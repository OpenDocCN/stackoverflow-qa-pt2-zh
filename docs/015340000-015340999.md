# StackOverflow 问答 15340000-15340999

# c# - 发生异常时发送 SMTP 邮件

> ID：15340000
> 
> 赞同：-2
> 
> 时间：2013-03-11T13:35:33.707
> 
> 标签：c#, email, smtp

如果有人能告诉我我是否走在正确的轨道上，我将不胜感激......基本上，我有一个需要为我的应用程序运行的网络服务，我已将其放入 try catch，如果尝试失败我希望 catch 向我发送一封包含异常详细信息的电子邮件。

```
try
{
    // run webservice here
}
catch (Exception ex)
{
    string strTo = "scott@...";
    string strFrom = "web@...";
    string strSubject = "Webservice Not Run";
    SmtpMail.SmtpServer = "thepostoffice";

    SmtpMail.Send(strFrom, strTo, strSubject, ex.ToString());
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T13:37:41.973

是的，但是您最好将异常处理程序包装在某种记录器中，或者使用现有的记录器，例如[Log4Net](http://logging.apache.org/log4net/)或[NLog](http://nlog-project.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-13T23:14:49.423

发生异常时发送电子邮件的快速简便方法可以这样完成：

```
 SmtpClient Server = new SmtpClient();
        Server.Host = ""; //example: smtp.gmail.com
        Server.Port = ; //example: 587 if you're using gmail
        Server.EnableSsl = true; //If the smtp server requires it

        //Server Credentials
        NetworkCredential credentials = new NetworkCredential();
        credentials.UserName = "youremail@gmail.com";
        credentials.Password = "your password here";
        //assign the credential details to server
        Server.Credentials = credentials;

        //create sender's address
        MailAddress sender = new MailAddress("Sender email address", "sender name");

        //create receiver's address
        MailAddress receiver = new MailAddress("receiver email address", "receiver name");

        MailMessage message = new MailMessage(sender, receiver);
        message.Subject = "Your Subject";
        message.Body = ex.ToString();
        //send the email
        Server.Send(message); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T13:38:13.207

是的，如果您不想使用任何记录器工具，这是正确的方法。您可以为您的公共类之一创建函数 SendMail(stringExceptionoin)，然后从每个 catch 块调用此函数

# asp.net-mvc - 在 MVC 中发布表单后如何防止在页面刷新时在数据库中重复输入

> ID：15340001
> 
> 赞同：2
> 
> 时间：2013-03-11T13:35:35.893
> 
> 标签：asp.net-mvc

我在 mvc 4.0 中提交有关提交事件的表单。提交表单后发布到其操作并创建记录。在刷新页面时创建记录后，会创建另一个重复记录。

我已经使用了以下但没有成功：

```
ModelState.Clear();
ModelState.SetModelValue("Key", new ValueProviderResult(null, string.Empty, CultureInfo.InvariantCulture));
ModelState.Remove("Key"); 
```

我不想使用 AJAX 表单 Post 也不想重定向到另一个页面。

有什么方法可以像`!Page.IsPostBack()`在 mvc4.0 中那样在 asp.net 中使用。

我也不想使用会话。

（微软吹嘘 MVC 没有像 asp.net 这样的任何视图状态，但现在我不这么认为）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-17T07:25:39.043

您可以在成功更新后重定向到索引操作。在这种情况下，刷新将重新发送对索引操作的请求，而不是发布到更新操作。这种模式被称为“Post-Redirect-Get”模式。例子：

```
[HttpPost]
public ActionResult Update(SomeModelViewClass model)
{
   //some code that save data to db
   return RedirectToAction("index", new {id=model.Id});
}

[HttpGet]
public ActionResult Index(Guid id)
{
   //some code that get data from db by id
   return View(model);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-21T09:55:21.007

您可以使用 Ajax.post 提交表单。构建您的表单标签，如下所示。

```
@using (@Html.BeginForm("Index", "ControllerName", FormMethod.Post, new { id = "anyFormName" })) 
```

从页面调用 ajax 帖子。

```
$.ajax({
        url: "/ControllerName/Index",
        type: "POST",
        data: $("#anyFormName").serialize(),
        success: function (data) {
            $("#divFormContainer").html(data);
        }
    }); 
```

在控制器中创建 Index 方法，如下所示。

```
[HttpPost]
public ActionResult Index(FormCollection fc)
{
   // Put the form post logics here....
   // Build the model for the view...
   return PartialView("Index", model);
} 
```

# c# - 如果复杂对象具有来自字符串的隐式转换，可以将 QueryString 参数绑定到复杂对象吗

> ID：15340005
> 
> 赞同：7
> 
> 时间：2013-03-11T13:35:52.010
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

**简短的问题：**

如果我已经为我的对象提供了一种隐式转换机制，可以将其值从纯字符串转换，那么它可以自动绑定到 ViewModel 的属性吗？

**细节：**

我有一个像这样的复杂对象（为简洁明了而简化）

```
public enum PrimaryScopeEnum {
    Pivot1,
    Pivot2
}

public enum SecondaryScopeEnum {
    Entity1,
    Entity2,
    Entity3,
    Entity4
}

public class DataScope {
    public PrimaryScopeEnum PrimaryScope { get; set; }
    public SecondaryScopeEnum SecondaryScope { get; set; }

    public static implicit operator DataScope ( string combinedScope ) {
        DataScope ds = new DataScope();
        // Logic for populating Primary and Secondary Scope enums
        return ds;
    }
} 
```

我在我的视图模型中使用上述对象，如下所示：

```
public enum PageModeEnum {
    View,
    Add,
    Edit
}

public class DisplayInfoViewModel {
    public string SetID { get; set; }
    public PageModeEnum PageMode { get; set; } 
    public DataScope Scope { get; set; }
} 
```

我的控制器中的操作设置为

```
// Accessed with /MyController/DisplayInfo?SetID=22&PageMode=View&Scope=Pivot1
public virtual ActionResult DisplayInfo ( DisplayInfoViewModel vm ) {
    // vm.SetID is 22
    // vm.PageMode is PageModeEnum.View
    // vm.Scope is null
    return View ( vm );
} 
```

我的问题出在操作中，即使我已经给出了从字符串到`DataScope`类的隐式转换，它在执行期间无法正确绑定。

我已经分别使用正在传递的值（此处为 Pivot1）测试了铸件，并且铸件工作正常。

有没有办法让这种转换隐式发生，或者我应该将视图模型`Scope`变量更改为纯字符串，然后进行手动转换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:37:58.583

不，默认模型绑定器不使用任何隐式运算符。您必须为该`DataScope`类型编写一个自定义模型绑定器，如果您希望它能够工作，则必须从请求字符串中手动绑定它。

例如：

```
public class DataScopeModelBinder : DefaultModelBinder
{
    protected override object CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType)
    {
        var value = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);
        if (value == null)
        {
            return null;
        }

        return (DataScope)value.RawValue;
    }
} 
```

然后您将与`DataScope`您的类型相关联`Application_Start`：

```
ModelBinders.Binders.Add(typeof(DataScope), new DataScopeModelBinder()); 
```

# scheme - 将元素添加到方案列表的末尾

> ID：15340011
> 
> 赞同：-2
> 
> 时间：2013-03-11T13:36:25.763
> 
> 标签：scheme

请帮助我使用 Scheme 中的代码，基本上我需要的是如下一个函数（附加），它接受一个原子和一个列表并将元素添加到列表的末尾。

例子：

```
(append 'A '(B C D)) -> (B C D A) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:49:09.173

递归方法是：

```
(define (append atom lst)
  (if (empty? lst) 
      (list atom)
      (cons (car lst) (append atom (cdr lst))))) 
```

用法：

```
> (append 'A '(B C D))
'(B C D A) 
```

这相当于

```
> (cons 'B (cons 'C (cons 'D (list 'A))))
'(B C D A) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:49:20.717

您可以像这样将 A 添加到列表的末尾：

```
(append '(B C D) (list 'A))) 
```

[Append](ftp://ftp.cs.utexas.edu/pub/garbage/cs345/schintro-v13/schintro_43.html)需要一个列表参数作为第一个参数。第二个参数不必是一个列表，但它会像`(B C D . A)`你一样显示出来`(append '(B C D) 'A))`

[我的例子](http://codepad.org/EmvWkVRz)

# symfony - SonataAdminBundle - 如何更改到仪表板的路线？

> ID：15340017
> 
> 赞同：3
> 
> 时间：2013-03-11T13:36:56.143
> 
> 标签：symfony, sonata-admin

我已经用 SonataAdminBundle 安装了 Symfony 2.2.0。现在我想将默认仪表板路由从 更改`/dashboard`为`/`。

如何以正确的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T19:38:52.383

你可以在你的**app/config/routing.yml**文件中使用如下：

```
default:
    pattern:  /admin/
    defaults: { _controller: SonataAdminBundle:Core:dashboard } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:21:03.687

你可以试试这个

*   创建奏鸣曲路由文件的副本 [https://github.com/sonata-project/SonataAdminBundle/blob/master/Resources/config/routing/sonata_admin.xml](https://github.com/sonata-project/SonataAdminBundle/blob/master/Resources/config/routing/sonata_admin.xml)
*   并进行必要的更改。将文件保存在其中一个包中
*   在您的 app/config/routing.yml 中引用此路由文件

> ```
> admin:
>    resource: '@AcmeAdminBundle/Resources/config/routing/sonata_admin.xml'
>    prefix: /admin 
> ```

# python - Azure get_blob 仅返回 4KB 的图像大小

> ID：15340020
> 
> 赞同：1
> 
> 时间：2013-03-11T13:37:04.473
> 
> 标签：python, azure

我正在使用下面的代码从 blob 存储中下载图像，但它只下载了 10MB 图片中的 4KB：

```
 file = blob.get_blob('picture', filename)
            with open(filename, 'w') as f:
                f.write(file) 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:39:16.703

你需要类似的东西：

```
 // Retrieve the content of a blob. 
    // Return true on success, false if not found, throw exception on error.

    public string GetBlob(string container, string blob)
    {
        return Retry<string>(delegate()
        {
            HttpWebResponse response;

            string content = null;

            try
            {
                response = CreateRESTRequest("GET", container + "/" + blob).GetResponse() as HttpWebResponse;

                using (StreamReader reader = new StreamReader(response.GetResponseStream()))
                {
                    content = reader.ReadToEnd();
                }

                response.Close();
                return content;
            }
            catch (WebException ex)
            {
                if (ex.Status == WebExceptionStatus.ProtocolError &&
                    ex.Response != null &&
                    (int)(ex.Response as HttpWebResponse).StatusCode == 409)
                    return null;

                throw;
            }
        });
    } 
```

# c - 带函数的链表

> ID：15340027
> 
> 赞同：0
> 
> 时间：2013-03-11T13:37:23.843
> 
> 标签：c, singly-linked-list

我正在尝试创建一个创建和显示链接列表的程序。

现在我的 create_list() 函数有问题，它不会创建任何列表。

我做错了什么？

抱歉英语不好：/

代码 ：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct node {
    int data;
    struct node *next;
} node;

int main(){

     node *start;
     start = NULL;
     int a,n,on = 1;

     while(on == 1){
        printf(" \n choose: \n 1 --- create list \n 2 --- display list \n");
        scanf("%d",&n);
        switch(n){
            case 1:
                printf("-------------------------------------------- \n");
                printf(" Enter the elements. The last element is 0 \n");
                printf("-------------------------------------------- \n");

                Create_list();
                Display_list(start);
                break;

            case 2:
                 Display_list(start);
                break;
        }
    }

    system("pause");
    return 0;
}

void Display_list(node *curr){
    if(curr){
        while (curr->next != NULL){
                  printf("%d \n",curr->data);
                   curr=curr->next;
        }
    } else {
        printf(" \n The list is not created ! \n");
    }
}

void Create_list(node *curr){

    int i;
    node *start = NULL;

    if (start == NULL){
        curr = (node *)malloc(sizeof(node));
        start=curr;

       while ( i != 0){
            scanf("%d",&i);
            if(i == 0){
                curr->next=NULL;
                curr=start;
            } else {
                curr->data=i;
                curr->next=(node *)malloc(sizeof(node));
                curr=curr->next;
            }
        }

    } else {
          printf(" \n list already exists ! \n");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:43:28.327

函数 Create_List(node *curr) 需要一些参数。您没有从 main() 传递任何参数。你的代码编译了吗？

函数 Create_List(node *curr) 需要一些参数。您没有从 main() 传递任何参数。你的代码编译了吗？

你应该做的是在 main 中取一个节点，它将存储链表的第一个节点的位置。

```
void Insert(struct node **q, int num) //Num is the data to be added and **q is the pointer to the first node of the list.
{
struct node *temp, *r;
temp = *q;
if (*q == NULL) {
    temp = ((struct node *)malloc(sizeof(struct node)));
    temp->data = num;
    temp->link = NULL;
    *q = temp;
}
else    {
    while (temp->link != NULL)
        temp = temp->link;

    r = ((struct node *)malloc(sizeof(struct node)));
    r->data = num;
    r->link = NULL;
    temp->link = r;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:41:59.927

`start`in与in`Create_list`无关。由于两者都是各自功能的本地，因此一个甚至看不到另一个。因此，如果您愿意，设置实际上并没有设置。:P`start``main``start``start`

您需要将`start`函数带出并使其成为全局函数，或者将`&start`（作为 a `node**`）`main`传入`Create_list`并修改`*start`以设置列表头。（后者通常更可取，因为全局变量通常很难等待发生。）

# oracle - JMS 无法使用 spring/jms 使用来自 Oracle 队列的消息

> ID：15340030
> 
> 赞同：1
> 
> 时间：2013-03-11T13:37:25.237
> 
> 标签：oracle, spring, queue, jms, oracle-aq

我遵循了 spring 文档并设置了一个 Spring JMS 侦听器。然而，即使我向队列中添加了一条消息，我的代码也没有检测到这一点。我的弹簧配置如下：

```
<bean id="dataSourceListener" class="oracle.jdbc.pool.OracleDataSource">
    <property name="URL" value="xxx"/>
    <property name="user" value="xxx"/>
    <property name="password" value="xxx"/>
</bean>

<bean id="jmsConnectionFactory" class="OracleAqFactoryBean">
    <property name="dataSource" ref="dataSourceListener" />
</bean>

<jms:listener-container connection-factory="jmsConnectionFactory" acknowledge="transacted" concurrency="1-5">
    <jms:listener destination="queuename" ref="myMessageListener"/>
</jms:listener-container>

<bean id="myMessageListener" class="Listener"/> 
```

我的Java如下：

我的自定义监听器：

```
class Listener implements MessageListener {

    @Override
    void onMessage(Message message) {
        // code to handle message is here
    }
} 
```

还有我的 OracleAqFactoryBean：

```
public class OracleAqFactoryBean implements FactoryBean {
private DataSource dataSource;

public void setDataSource(DataSource dataSource) {
    this.dataSource = dataSource;
}

@Override
public Object getObject() throws Exception {
    return AQjmsFactory.getConnectionFactory( dataSource );
}

@Override
public Class<?> getObjectType() {
    return ConnectionFactory.class;
}

@Override
public boolean isSingleton() {
    return true;
}

} 
```

[编辑：上述设置现已成功运行]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:36:14.687

我不明白您为什么要将`FactoryBean`实现连接到 Spring DMLC`destination`属性。这显然是不正确的，因为该[`setDestination`方法](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/jms/listener/AbstractMessageListenerContainer.html#setDestination(javax.jms.Destination))只接受一个`javax.jms.Destination`类型。你已经连接了`connectionFactory`和`messageListener`。这就是开始使用消息所需的全部内容。如果您删除`testmq`已连接到该`destination`属性的 ref，则应该成功使用消息。

# wcf - 远程服务器返回错误：(413) Request Entity Too Large

> ID：15340038
> 
> 赞同：2
> 
> 时间：2013-03-11T13:37:46.750
> 
> 标签：wcf

我知道这是一个多余的问题，当我上传超过 100 KB 的文件时出现错误。

> 远程服务器返回错误：（413）请求实体太大。

我将内容发布到 WCF 服务（64 位环境）。我知道这应该通过管理 maxReceivedMessageSize 和相关行为来解决，但不幸的是它没有。

以下是我的配置：-

**客户**

```
 <binding allowCookies="false" bypassProxyOnLocal="false" closeTimeout="00:01:00" hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647" messageEncoding="Text" name="BasicHttpBinding_ICandidateManagementService" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:11:00" textEncoding="utf-8" transferMode="Streamed" useDefaultWebProxy="true">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647"
           maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="None">
          <transport clientCredentialType="None" proxyCredentialType="None" realm=""/>
            <message algorithmSuite="Default" clientCredentialType="UserName"/>
          </security>
        </binding>

 <behavior name="CandidateBehavior">
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
        </behavior>

<endpoint address="http://localhost:62368/CandidateManagementService.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ICandidateManagementService" contract="MMJ.ServiceContracts.ServiceContract.ICandidateManagementService" name="BasicHttpBinding_ICandidateManagementService" behaviorConfiguration="CandidateBehavior" /> 
```

**服务**

```
<services>
      <service name="BasicHttpBinding_ICandidateManagementService" behaviorConfiguration="CandidateBehavior">
        <endpoint contract="MMJ.ServiceContracts.ServiceContract.ICandidateManagementService" binding="basicHttpBinding" address="" bindingConfiguration="BasicHttpBinding_ICandidateManagementService"/>
      </service> 
```

我可能已经看到了所有可用的东西，但仍然无法解决这个问题。也尝试过使用下面的配置，但仍然没有改变......

```
<serverRuntime uploadReadAheadSize="500000000" maxRequestEntityAllowed="500000000"/> 
```

请帮忙！

**服务绑定配置**（与客户端相同）

```
<binding allowCookies="false" bypassProxyOnLocal="false" closeTimeout="00:01:00" hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647" messageEncoding="Text" name="BasicHttpBinding_ICandidateManagementService" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:11:00" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
          <readerQuotas maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxDepth="32" maxNameTableCharCount="2147483647" maxStringContentLength="2147483647"/>
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None" realm=""/>
            <message algorithmSuite="Default" clientCredentialType="UserName"/>
          </security>
        </binding> 
```

* * *

为了在下面提供更多见解，提琴手发现：-

> 请求计数：1 发送字节：85,719（标头：697；正文：85,022） 接收字节：10,129（标头：254；正文：9,875）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:24:50.003

经过一番努力，我的问题终于解决了。**我的服务配置有一个缺陷**，它没有给我任何运行时或编译时错误，因为它甚至没有识别配置。

我的服务配置是：-

```
<services>
      <service name="BasicHttpBinding_ICandidateManagementService" behaviorConfiguration="CandidateBehavior">
        <endpoint contract="MMJ.ServiceContracts.ServiceContract.ICandidateManagementService" binding="basicHttpBinding" address="" bindingConfiguration="BasicHttpBinding_ICandidateManagementService"/>
      </service> 
```

我的“名称”属性不是我的服务的完全限定名称，因此甚至没有考虑我使用的配置，因此 maxReceivedMessageSize 采用默认的 65KB。

我已经更新了它，它的工作就像一个魅力。

```
<services>
  <service name="MMJ.Services.CandidateManagementService">
    <endpoint contract="MMJ.ServiceContracts.ServiceContract.ICandidateManagementService" binding="basicHttpBinding" address="" bindingConfiguration="BasicHttpBinding_ICandidateManagementService"/>
  </service> 
```

另外，请查看此[帖子](https://stackoverflow.com/questions/2585256/wcf-service-name-binding-name)以获取更多参考。我知道这是一个愚蠢的错误，并感谢大家努力修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:10:52.603

您将数据发布到服务器，因此更新客户端设置无济于事。接收大消息的不是客户端，而是服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T19:40:03.610

查看您的客户端端点：

bindingConfiguration 不应该是

```
bindingConfiguration="BasicHttpBinding_ICandidateManagementService" 
```

代替

```
bindingConfiguration="BasicHttpBinding_IAdminService" 
```

# php - 如何阻止或保护来自浏览器检查元素的 ajax 发布值

> ID：15340046
> 
> 赞同：0
> 
> 时间：2013-03-11T13:38:00.603
> 
> 标签：php, jquery, ajax, post, inspect

```
 function updateR()
 {

    $.ajax({
       type: "POST",
       url: "update.php",
       data: { surprize: '12345678910', dpoint: point, dlevel: level }
         }).done(function( msg ) {
         //   alert( "Data Saved: " + msg );
        });

 } 
```

它是我的功能。如果用户想要打开浏览器检查元素并更改值点，如何阻止或保护浏览器检查元素的 ajax 发布值（点或级别）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:42:30.153

总之，你不能！是的，您可以做很多事情以某种方式隐藏它，或者添加一些垃圾来混淆它，但最终一个坚定的用户会找到它。很简单，因为用户可以看到负责将其发送到服务器的代码。

现在，您可以通过将垃圾值添加到 AJAX 请求，或者通过在实际数据中附加一些垃圾值来让尝试这样做的人变得困难。但是随后您必须混淆负责执行此操作的 javascript 代码。

但不要不要永远不要依赖这个！因为你只能让它变得困难，但有人下定决心就能做到。而且，如果您发现自己需要向服务器发送一些对用户保密的数据，那么您需要重新考虑您的系统架构，而不是试图向用户隐藏请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:41:06.170

Web 应用程序是客户端服务器应用程序，您永远不能信任来自客户端的数据，也许您可​​以更难作弊，但用户始终有可能将修改后的数据发送到您的服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:41:25.297

实际上，用户可以发送他想要的任何内容，无论是通过浏览器还是命令行/任何其他工具。

您必须在服务器端清理和过滤您的输入。

例如。如果您知道您只需要名为 'surprize' 的 post var 的数值，则必须通过以下方式对其进行验证：

```
if(empty($_POST['surprize'])||!is_numeric($_POST['surprize'])){
  //invalid surprize
  die('Bad Surprize value');
} 
```

# sap - 查找与传输请求列表相关的所有对象

> ID：15340049
> 
> 赞同：1
> 
> 时间：2013-03-11T13:38:09.633
> 
> 标签：sap, transport

我有一个庞大的传输请求列表，我想获得所有包含这些对象的报告（作为“总结”）。我在事务 SE03、SE09、SE10 和 Transport Organizer Tools 中都找不到报告。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T14:06:34.623

我发现，使用 SE11，转到表 E071，按 TRKORR 过滤（可以多选），按 PGMID、OBJECT 和 OBJ_NAME 在网格显示中分组结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T14:07:58.507

我不知道是否有标准报告，但这些是 SAP 中的表格，您可以在其中获取该信息以制作 Z 报告：

E070：更改和传输系统：请求/任务的标头

E07T：变更和传输系统：请求/任务的短文本

E071：更改和传输系统：请求/任务的对象条目 <--- 这是要传输的对象。

E070A：变更和传输系统：请求的属性

E070C：CTS：请求/任务的源/目标客户端

在表“E070”的情况下，字段“TRKORR”（请求/任务）和“STRKORR”（更高级别的请求）之间存在关联。

希望能帮助到你。

# opencv - CV_FILLED 的 Python OpenCv cv2 等效项

> ID：15340052
> 
> 赞同：20
> 
> 时间：2013-03-11T13:38:24.423
> 
> 标签：opencv, python-2.7

这按预期工作：

```
cv2.rectangle(image, pt1, pt2, color, thickness=cv2.cv.CV_FILLED) 
```

但是我一直没能在`cv2`界面中找到等价的常量。我知道这只是一些负值（[来自文档](http://docs.opencv.org/modules/core/doc/drawing_functions.html?highlight=rectangle#cv2.rectangle)），但我喜欢代码中常量的可读性，并希望在 pure 中编写等效函数`cv2`。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-11T21:15:39.260

目前没有同类产品。很可能它将在下一个主要版本（2.5）中添加，并将命名为`cv2.FILLED`.

任何方式都可以安全地假设确切的值 ( `cv2.cv.CV_FILLED == -1`) 不会改变。

# mysql - 如果存在相同 user_id 的值，则选择记录

> ID：15340064
> 
> 赞同：1
> 
> 时间：2013-03-11T13:39:00.320
> 
> 标签：mysql, sql, select, relational-division

我需要从 mysql 数据库中获取记录；在此表中有一个与用户关联的操作列表。我需要获取所有具有列操作 = 3 和列操作 = 5 的用户；例如，如果用户 nr。4 有一个 action = 3 的记录，另一个 action = 5 我明白了；如果用户只有一条 action = 3 或 action = 5 的记录，我不能得到它。如果我写这个查询

```
SELECT * 
FROM user_action 
WHERE action = 3 AND action = 5 
```

我总是得到 0 条记录。如果我写 OR 而不是 AND 我得到所有具有 action = 3 或 action = 5 的记录，即使用户没有这两个值。我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T13:40:47.200

这个问题有点叫`Relational Division`

```
SELECT  userID
FROM    user_action
WHERE   action IN (3,5)
GROUP   BY userID
HAVING  COUNT(DISTINCT action) = 2 
```

*   [关系划分的SQL](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

如果`action`对每个都是唯一的`userID`，您可以直接`COUNT()`记录而不用`DISTINCT`

```
SELECT  userID
FROM    user_action
WHERE   action IN (3,5)
GROUP   BY userID
HAVING  COUNT(*) = 2 
```

最后，如果您想获取用户的全部详细信息，则需要将其加入自身，

```
SELECT  a.*
FROM    user_action a
        INNER JOIN
        (
            SELECT  userID
            FROM    user_action
            WHERE   action IN (3,5)
            GROUP   BY userID
            HAVING  COUNT(*) = 2
        ) b ON a.userID = b.userID 
```

# apache - htaccess 从结束 url 修剪数字

> ID：15340068
> 
> 赞同：0
> 
> 时间：2013-03-11T13:39:16.433
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

我有很多最后包含 13 位数字代码的 url，看起来像……</p>

```
http://www.example.com/a-test-title-1/1579845887463/
http://www.example.com/a-test-title-2/2356668749876/
http://www.example.com/a-test-title-3/5689874598235/ 
```

我想删除这些数字，使网址看起来像……</p>

```
http://www.example.com/a-test-title-1/
http://www.example.com/a-test-title-2/
http://www.example.com/a-test-title-3/ 
```

我已经在我的 htaccess 文件中尝试过这个，`RewriteRule [0-9]{10,15} $1 [R=301,L]`但它不起作用，我不知道该怎么办？

有人有想法么？

谢谢，

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:17:58.710

你可以用这个 RewriteRule 砍掉数字

```
RewriteBase /
RewriteRule ^(.+?/)\d+/$ $1 [R,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:35:40.520

我写了这个似乎工作正常。谁能发现任何明显的错误？

```
RewriteCond %{REQUEST_URI} (.*)\/[0-9]{10,}\/$
RewriteRule .* %1\/ [R=301,L]` 
```

# javascript - 使用 Javascript 在 Span 标记内动态插入链接

> ID：15340071
> 
> 赞同：6
> 
> 时间：2013-03-11T13:39:30.350
> 
> 标签：javascript, hyperlink, affiliate

我有这个：

```
<span class="image"><img src="something.jpg"></span> 
```

我想使用 javascript 将其转换为：

```
<span class="image"><a href="domain"><img src="something.jpg"></a></span> 
```

必须使用 javascript 来隐藏附属链接。

我已经尝试过这个脚本，但它似乎不起作用：

```
function changespan() {
find all <span> tags;
for each <span> with class="image"{
URL = "http://domain.com"
Create new link to URL;
insert link into <span>;
}       
} 
```

该函数在文件 script.js 中上传，我以这种方式加载它：

```
<script type="text/javascript" src="script.js"></script>
<script type="text/javascript">
window.onload = changespan;
</script> 
```

编辑：解决这个问题后，我如何解析我的页面以找到这种格式的链接：然后将此值分配给变量 URL。我需要能够将 URL_1 的第一个路径分配给 URL_2，依此类推。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T13:47:18.173

这是您可以实现它的方式：

```
function changespan() {
    var spans = document.querySelectorAll('span.image');
    for (var i = spans.length; i--; ) {
        var a = document.createElement('a');
        a.href = "http://domain.com";
        spans[i].appendChild(a).appendChild(a.previousSibling);
    }
} 
```

[http://jsfiddle.net/Tqv76/1/](http://jsfiddle.net/Tqv76/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T13:46:17.617

在这里，我将它翻译成 JavaScript，以保持你的伪代码尽可能完整

[演示](http://jsfiddle.net/mplungjan/Ffx2c/)

```
window.onload=function() {
  var spans = document.getElementsByTagName("span"); // or the newer querySelectorAll
  for (var i=0;i<spans.length;i++) {
    if (spans[i].className=="image") {
      var link = document.createElement("a");
      link.href = "http://domain.com";
      link.setAttribute("rel","nofollow");
      link.className="someclass";
      link.innerHTML=spans[i].innerHTML;
      spans[i].replaceChild(link,spans[i].getElementsByTagName('img')[0]);
    }       
  }
} 
```

# url-rewriting - 在重写的 URL 中传递隐藏值？

> ID：15340073
> 
> 赞同：0
> 
> 时间：2013-03-11T13:39:43.503
> 
> 标签：url-rewriting, hidden

只是想知道是否有办法在重写的 URL 中传递隐藏变量？

我的链接在这种格式下工作正常：

```
http://www.mydomain.com/city/state/businessname/ 
```

但我也希望能够获取并传递 businessID 值，但不让它出现在重写的链接中。

[http://www.mydomain.com/city/state/businessname/busid/<-](http://www.mydomain.com/city/state/businessname/)隐藏***busid***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:43:56.290

如果 businessId 不应出现在前端 url 中，那么您可以在处理此请求的控制器/操作中检索它。

IE。如果您可以从业务名称中获取业务 ID，则无需检索它然后重写 url，只需在控制器操作中执行该逻辑即可。

或者设置一个过滤器或拦截器来处理它。

# asp.net-mvc-3 - DropCreateDatabaseIfModelChanges (MVC3) 的最佳替代方案是什么？

> ID：15340074
> 
> 赞同：1
> 
> 时间：2013-03-11T13:39:44.423
> 
> 标签：asp.net-mvc-3

我已经检查了其他问题并在谷歌搜索，但我找到了很多解决方案......

哪个最好？

当 DataModel 更改时，我需要更改表，并且我需要一个自动解决方案（就像 DropCreateDatabaseIfModelChanges 一样..

非常感谢所有回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:36:42.080

您可以进行 CodeFirst 迁移。[CodeFirst 迁移](http://msdn.microsoft.com/en-us/data/jj591621.aspx)。您需要 EF 5 二进制文件。

`Enable-Migrations –EnableAutomaticMigrations`在包管理器控制台中运行命令

`Add-Migration`将根据您对模型所做的更改为下一次迁移搭建支架。 `Update-Database`将对数据库应用任何挂起的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:14:36.320

要更新实体框架 EDMX 并将其与数据库更改同步，请在 VS2010 解决方案资源管理器中双击 EDMX。这会为设计器（模型浏览器窗口显然就是它的名称）提供实体的类布局。右键单击设计器表面上的任意位置，您将在对话框中看到“从数据库更新模型”选项。单击此按钮，您将进入更新向导，您可以在其中选择要添加的数据库对象（如果是新的），但默认情况下它会刷新现有对象。

向导似乎没有做的一件事是从现有对象中删除列。可能是某种安全机制，但是如果您从数据库中删除了该列，您真的想将它保留在您的实体中吗？嗯，谁知道呢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:44:00.000

它总是不能很好地工作。就我而言，我尝试使用模型编辑器手动创建任何内容，因此每次修改数据库模型时，我都会打开 EDMX 编辑器，选择所有实体并删除它们，然后右键单击模型并选择选项：更新自数据库。当对象列表出现时，我选择所有表和下一个。它更新模型。

# c# - 使用 webclient 从 webservices 获取 json 而不用其他方法操作数据

> ID：15340081
> 
> 赞同：2
> 
> 时间：2013-03-11T13:40:00.560
> 
> 标签：c#, json, web-services, windows-phone-8, webclient

我正在Windows phone 8 上开发，我想知道当我们调用WebClient 的DownloadStringCompleted 时是否可以以相同的方法操作数据？

```
private void DownloadDataFromWebService(String uri)
    {
        WebClient wc = new WebClient();
        wc.DownloadStringAsync(new Uri(uri));
        wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);
    }

    private void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        RootObject r = JsonConvert.DeserializeObject<RootObject>(e.Result);
        List<Category> listeCategories = r.Result;
    } 
```

因此，我想只用一种方法管理所有代码，因为我想返回一个对象 例如，

```
private List<Category> GetCategories(String uri)
    {
        WebClient wc = new WebClient();
        wc.DownloadStringAsync(new Uri(uri));
        .....
        .....
        RootObject r = JsonConvert.DeserializeObject<RootObject>(e.Result);
        return (List<Category>) r.Result;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:10:42.620

是的，这是可能的，由于神奇的 TaskCompletionSource 类， http: [//msdn.microsoft.com/en-us/library/dd449174](http://msdn.microsoft.com/en-us/library/dd449174%28v=vs.95%29.aspx) (v=vs.95).aspx 。去下载：

```
async Task<List<object>> getCategories(String uri)
{
    var taskCompletionObj = new TaskCompletionSource<string>();
    var wc= new webClient();
    wc.DownloadStringAsync(new URI(uri, Urikind.Absolute)) += (o, e) =>
    {
    taskCompletionObj.TrySetResult(e.Result);
    };
    string rawString = await taskCompletionObj.Task;
    RootObject r = JsonConvert.DeserializeObject<RootObject>(rawString);
    return (List<Category>)r.Result; 
} 
```

要使用：`var x = await getCategories(myURI);`

# html - 如何将 my_html 插入到 joomla 文章中以保留格式

> ID：15340085
> 
> 赞同：0
> 
> 时间：2013-03-11T13:40:10.180
> 
> 标签：html, css, joomla, article

我有大量的 html 想要复制并粘贴到 joomla 文章中。

一旦我将 my_html 插入到 joomla 中，my_html 就会继承所有的包装 css。

my_html 源自 pdf --> html 转换（Open Office Writer），其中大部分使用属性而不是样式，尤其是表格边框。

理想情况下，我想从包装 joomla 环境中屏蔽 my_html 的样式，但我认为这是不可能的。

* * *

**编辑**......这是一个例子：

在 my_html 我有一张桌子；一个单元格设置有边框，其余的应该是无边框的；但是在包装器的某处，上游，有一个边框 = 1，因此会影响所有单元格。

当然在这个例子中我可以很容易地解决这个问题，但是还有很多很多其他类似的问题......因此，屏蔽 my_html 会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:53:13.663

这只有在您`CodeMirror`用作文章编辑器时才有可能。`TinyMCe`编辑器剥离您的 CSS 或您正在使用的任何 js。

# android - ImageView 数组问题

> ID：15340086
> 
> 赞同：1
> 
> 时间：2013-03-11T13:40:11.567
> 
> 标签：android, arrays, android-layout, android-linearlayout, android-imageview

我正在尝试用 ImageViews 填充数组

更新 16:32：

```
 runOnUiThread(new Runnable() {
        public void run() {             
            try{                                    
                View inflatedView = getLayoutInflater().inflate(R.layout.mainview_menue_item_row, null);

                imageList = new ImageView[URLS.length];
                System.out.println(URLS.length);

                for(int x = 0; x < URLS.length; x++)
                {
                    ImageView img = (ImageView) inflatedView.findViewById(R.id.menueicon);

                    StrictMode.ThreadPolicy old = StrictMode.getThreadPolicy();
                    StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder(old)
                        .permitDiskWrites()
                        .permitNetwork()
                        .build());
                    imageDownloader.download(URLS[x], img);
                    StrictMode.setThreadPolicy(old);
                    //imageDownloader.download(URLS[x], img);
                    imageList[x] = img;     

                }                   
               } catch (Exception e) {
                   e.printStackTrace(); 
               }            
            }
    }); 

    MenueAdapter adapter = new MenueAdapter(MainActivity.this, 
            R.layout.mainview_menue_item_row, menue_data, imageList);
    listView1.setAdapter(adapter);

    HandleInput(); 
```

公共类 MenueAdapter 扩展 ArrayAdapter{

```
Context context; 

int layoutResourceId;
Menue data[] = null;
ImageView imageList[] = null; 

int destWidth;   
int destHeight; 

public MenueAdapter(Context context, 
        int layoutResourceId, 
        Menue[] data, 
        ImageView[] imageList) {
    super(context, layoutResourceId, data);
    this.layoutResourceId = layoutResourceId; 
    this.context= context; 
    this.data = data;
    this.imageList = imageList; 
    this.destWidth = 0; 
    this.destHeight = 0; 
}

@Override
public View getView(int position, View convertView,
        final ViewGroup parent) {       

    View row = convertView; 
    MenueHolder holder = null; 

    if (row == null) {
        LayoutInflater inflater = 
                ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false); 

        holder = new MenueHolder(); 

        holder.imgIcon = (ImageView)row.findViewById(R.id.menueicon);
        holder.txtHolder = (TextView)row.findViewById(R.id.textInRow); 
        holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle); 

        row.setTag(holder); 
    }
    else {
        holder = (MenueHolder)row.getTag(); 
    }

    Menue menue = data[position];
    holder.imgIcon = imageList[position]; 

    holder.txtHolder.setText(menue.txtHolder); 
    holder.txtTitle.setText(menue.title); 

    return row;

}

static class MenueHolder {  
    ImageView imgIcon; 
    TextView txtHolder; 
    TextView txtTitle; 
} 
```

}

imageDownloader.dowload() 返回一个 ImageView。问题似乎是，我的 ImageView img 总是为空。

我已经尝试过一些类似的东西： [Null ImageView Reference](https://stackoverflow.com/questions/6120004/null-imageview-reference)

但不幸的是，我通过在 xml 文件中添加 id-tag 得到一条错误消息...：/

这是我的 XML 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
   <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="left|center"
    android:paddingBottom="5px"
    android:paddingLeft="5px"
    android:paddingTop="5px" >
   <ImageView
       android:id="@+id/menueicon"
       android:adjustViewBounds="true"
       android:layout_width="wrap_content"      
       android:maxWidth ="200dp"       
       android:layout_height="fill_parent"      
       android:layout_marginRight="6dip"
       android:paddingLeft="2dp"      
       android:scaleType="centerCrop"/>"
    <LinearLayout
       android:orientation="vertical"
       android:layout_width="0dip"
       android:layout_weight="1"
       android:layout_height="fill_parent">       
    <TextView android:id="@+id/txtTitle"
    android:layout_width="wrap_content"
    android:textColor="#FF8600"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10px"    
    android:gravity="center"/>
    <TextView android:id="@+id/textInRow"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_marginLeft="10px"
       android:textColor="#0099CC"/>   
    </LinearLayout>
    </LinearLayout> 
```

我希望这是处理 strictMode 问题的正确方法，如果你们中的任何人知道得更好，请告诉我。

日志：

```
03-11 13:57:53.749: W/System.err(9562): java.lang.NullPointerException
03-11 13:57:53.759: W/System.err(9562):     at com.example.listview.MainActivity$1.run(MainActivity.java:150)
03-11 13:57:53.759: W/System.err(9562):     at android.app.Activity.runOnUiThread(Activity.java:4644)
03-11 13:57:53.759: W/System.err(9562):     at com.example.listview.MainActivity.onCreate(MainActivity.java:125)
03-11 13:57:53.759: W/System.err(9562):     at android.app.Activity.performCreate(Activity.java:5104)
03-11 13:57:53.759: W/System.err(9562):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-11 13:57:53.769: W/System.err(9562):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-11 13:57:53.769: W/System.err(9562):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-11 13:57:53.769: W/System.err(9562):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-11 13:57:53.769: W/System.err(9562):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-11 13:57:53.769: W/System.err(9562):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-11 13:57:53.769: W/System.err(9562):     at android.os.Looper.loop(Looper.java:137)
03-11 13:57:53.769: W/System.err(9562):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-11 13:57:53.769: W/System.err(9562):     at java.lang.reflect.Method.invokeNative(Native Method)
03-11 13:57:53.769: W/System.err(9562):     at java.lang.reflect.Method.invoke(Method.java:511)
03-11 13:57:53.769: W/System.err(9562):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-11 13:57:53.769: W/System.err(9562):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-11 13:57:53.781: W/System.err(9562):     at dalvik.system.NativeStart.main(Native Method) 
```

但原来的问题依然存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T13:51:39.530

如在日志中：

> android.view.ViewRootImpl$CalledFromWrongThreadException: 只有创建视图层次结构的原始线程才能触摸

因为您正在尝试从`Timertask`Thread 访问 ImageView。使用[Activity.runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)从其他线程更新 Ui

# beagleboard - 如何在 beaglebone 上运行自定义内核？

> ID：15340089
> 
> 赞同：1
> 
> 时间：2013-03-11T13:40:22.893
> 
> 标签：beagleboard, u-boot

我正在使用 TI - AM3359 SoC 为 beaglebone 启动内核或操作系统编程。我已经编写了一个汇编程序来将一些字符写入串行接口（只是开始），我想在 beaglebone 上将其作为内核运行，就像 linux 内核一样。

我的程序的链接地址是什么？

和

默认情况下如何从u-boot启动它？我不想进入 u-boot 编程，而是想使用 angstrom 发行版和 BBone 一起提供的可用 u-boot。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T01:16:09.503

> 我已经编写了一个汇编程序来将一些字符写入串行接口（只是开始），我想在 beaglebone 上将其作为内核运行，就像 linux 内核一样。

您编写的内容称为“独立程序”。与依赖操作系统获取资源和服务的应用程序相比，它不需要任何外部代码即可运行。您不应该将其称为内核（无论如何都不是），因为它不具有内核应具有的任何功能。

> 我的程序的链接地址是什么？

注意：对于典型的独立程序，“加载地址”和“链接地址”通常是相同的值，因为独立代码通常不可重定位或与位置无关。

U-Boot 通常在上层物理主存储器中链接、加载和执行。

Linux 内核通常链接到在物理主内存**+ 0x8000**的开头执行（无论如何对于 ARM）。但是内核映像，特别是如果它是诸如 zImage 或 uImage 之类的压缩文件时，通常会在更高的地址加载到内存中，并且解压缩例程会在其正确的加载和起始地址安装 Linux 内核。

因此，低物理主内存中的任何“好”地址都适合链接和加载您的程序。

> 默认情况下如何从u-boot启动它？

U-Boot 可以将执行转移到两种类型的“程序”（以及脚本）。
一种类型的程序是使用[bootm](http://www.denx.de/wiki/view/DULG/UBootCmdGroupExec#Section_5.9.4.2.)命令的“内核”。
这适用于具有由 mkimage 实用程序安装的头文件的内核或程序，它是完全独立的，并将接管系统。可以定制 U-Boot 来为这个内核准备系统。*对于 Linux，分配一个内存缓冲区，使用用户定义的文本进行初始化，并作为内核命令行*传递给 Linux 内核。*对于 ARM Linux，分配另一个内存缓冲区，用数据初始化并作为ATAG*传递给 ARM Linux 内核。

另一种类型的程序使用[go](http://www.denx.de/wiki/view/DULG/UBootCmdGroupExec#Section_5.9.4.3.)命令。
这是一个更简单的程序，它可以使用 U-Boot 的服务功能，甚至可能在完成后将控制权返回给 U-Boot。如果不需要准备缓冲区，那么您的简单独立程序应该使用该`go`命令。

您可以在`bootcmd`环境变量的定义中使用任一命令，该变量是在引导计时器到期时运行/执行的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-14T01:58:14.207

您可以使用 fsbl、bitstream、uboot.elf 和您的应用程序创建 boot.bin。然后刷入 QSPI 闪存并选择从它启动。

或者您可以从 TFTP 启动。在这里，您只需要使用 fsb、bitstream 和 uboot.elf 创建 boot.bin。您需要更改 uboot 头文件以强制它从 tftp 启动，例如 tftpboot 0x0 hello.elf; bootelf 0x0;. 一旦启动，它将使用 tftp 获取 elf/bin 文件并使用 bootelf 或 go 命令启动板。

如果有 SD 卡，您也可以从 SD 卡启动。

# ruby-on-rails - Rails 无法重新识别 application.html.haml

> ID：15340090
> 
> 赞同：-3
> 
> 时间：2013-03-11T13:40:23.353
> 
> 标签：ruby-on-rails, ruby, configuration

版本> ruby​​ 1.9.2p290 , Rails 3.1.0 , Ubuntu 12.04

我的 RoR 应用程序未检测到 application.html.halm 。所以 HTML 标记没有被解释，de CSS 和其他常见文件没有被包括在内。其余的视图呈现在 halm 中并且正在工作:)

这是我的应用程序控制器

```
class ApplicationController < ActionController::Base
  protect_from_forgery
end 
```

电影控制器

```
# This file is app/controllers/movies_controller.rb
class MoviesController < ApplicationController
  def index
    @movies = Movie.all
  end

  def show
    id = params[:id]
    @movie = Movie.find(id)
    # will render app/views/movies/show.html.haml by default
  end
  def new
    # default render 'new' template
  #  debugger
  end
  def create
    @movie = Movie.create!(params[:movie])
    flash[:notice] = "#{@movie.title} was succesfully created."
    redirect_to movies_path
  end
end`# This file is app/controllers/movies_controller.rb
class MoviesController < ApplicationController
  def index
    @movies = Movie.all
  end

  def show
    id = params[:id]
    @movie = Movie.find(id)
    # will render app/views/movies/show.html.haml by default
  end
  def new
    # default render 'new' template
  #  debugger
  end
  def create
    @movie = Movie.create!(params[:movie])
    flash[:notice] = "#{@movie.title} was succesfully created."
    redirect_to movies_path
  end
end 
```

应用程序/视图/布局/application.htlm.halm

```
!!! 5
%html
  %head
    %title Rotten Potatoes!
    = stylesheet_link_tag 'application'
    = javascript_include_tag 'application'
    = csrf_meta_tags

  %body
    = yield 
```

解释的结果是注意没有 HTML 和其他标签：

```
<h2>All Movies</h2>
<table id='movies'>
  <thead>
    <tr>
      <th>Movie Title</th>
      <th>Rating</th>
      <th>Release Date</th>
      <th>More Info</th>
    </tr>
  </thead>
  <tbody>

    <tr>
      <td>EEEe</td>
      <td>G</td>
      <td>2013-02-27 00:00:00 UTC</td>
      <td><a href="/movies/27">More about EEEe</a></td>
    </tr>
  </tbody>
</table>
<a href="/movies/new">Add new movie</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:43:23.153

改名：

```
app/views/layouts/application.htlm.halm 
```

到：

```
app/views/layouts/application.html.haml 
```

# java - Java：将新元素添加到列表

> ID：15340091
> 
> 赞同：0
> 
> 时间：2013-03-11T13:40:23.343
> 
> 标签：java

我有以下代码：

```
public void parseAttribs(String attribs){

   //attribs is a comma separated list
   //we are making a List from attribs by splitting the string at the commas

   List<String> attributes = Arrays.asList(attribs.split("\\s*,\\s*"));

   //when I try to add an element to the attributes List if fails
   attributes.add("an element"); 
```

我发现这个[Unable to add a String to an ArrayList: "misplaced construct(s)"](https://stackoverflow.com/questions/5055936/how-can-i-add-a-string-to-an-arraylist-in-java)并试图创建一个子类，但我也必须将 List 传递给子类，但它仍然不起作用。

任何人都可以对此有所了解吗？

非常感谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T13:44:00.470

`Arrays.asList`返回一个*固定大小的*`List`. 你可以使用

```
new ArrayList<String>(Arrays.asList(...))) 
```

这将为您提供*可以*添加`List`元素的位置。

 ** * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-11T13:43:55.837

此代码将不起作用，因为返回的列表`Arrays.asList()`是不可变列表。

您可以从 ArrayList 构造函数进行构造以使其工作。

```
List<String> attributes = new ArrayList<String>(Arrays.asList(attribs.split("\\s*,\\s*"))); 
```*

# java - 过滤器还是拦截器？如何以某种方式预先修改会话中的所有查询？

> ID：15340093
> 
> 赞同：1
> 
> 时间：2013-03-11T13:40:29.743
> 
> 标签：java, hibernate

我已经四处寻找了一段时间，但我仍然无法确定是我需要的过滤器还是带有 onPrepareStatement() 的拦截器。

我的用例如下：用户登录到我的应用程序后，根据几个复杂的决定，该用户获得某些访问权限，并且取决于他们是否可以访问某些数据。我认为实现这一点的最简单方法是“加入”每个查询都有一些限制，例如

```
SELECT * FROM sumfin WHERE cond1 and cond2; 
```

这里`cond2`是限制条件。所以基本上我想附加`and cond2;`到我所有现有的查询中。使用hibernate在java中做到这一点的最佳方法是什么？

# openlayers - 在 Openlayers 中，为什么我画完一个圆圈后我的标签会消失？

> ID：15340099
> 
> 赞同：0
> 
> 时间：2013-03-11T13:40:43.267
> 
> 标签：openlayers

我有一个圆形绘图模式。当您在此模式下绘制一个圆圈时，当您将圆圈拖动到正确的大小时，我有一个显示该圆圈半径的标签。这个标签在我画完圆圈后立即消失。我如何让这个圆圈在完成后留下并显示？我不确定为什么标签会消失。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:55:47.277

我通过使用 persist: true 解决了我的问题。

```
var polyOptions = {sides: 40, persist: true, style: style}; 
```

# jquery - 重新加载 div 没有外部文件

> ID：15340102
> 
> 赞同：1
> 
> 时间：2013-03-11T13:40:53.963
> 
> 标签：jquery, html

我有一个可以订购的图像列表。我使用此代码来订购图像：

```
$(document).ready(function(){ 
    $(function() 
    {
        $("#subafbeelding ul").sortable(
        { 
            opacity: 0.6, 
            cursor: 'move', 
            update: function(){
                var order = $(this).sortable("serialize") + '&action=updateRecordsListings'; 
                $(".hoofdafbeelding").load("foo.php");
                $.post("updatevolgoorde.php", order, function(theResponse)
                {
                    $("#contentRight").html(theResponse);

                });                                                              
            }                                 
        });
    });
}); 
```

后

```
 $("#contentRight").html(theResponse); 
```

我想重新加载 div 标题。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:21:45.777

您可以采取的一种选择是在加载页面时制作 html 的副本。将其存储在隐藏元素中，然后在您想要“重新加载”html 时重新使用它。

像这样的东西：

```
$("#storage").html($("#original").html());

function addEvents() {
    $("#original ul").sortable({
        opacity: 0.6,
        cursor: 'move',
        update: function () {

        }
    });
}
addEvents();

$("#reset").click(function (e) {
    e.preventDefault();
    $("#original").html($("#storage").html());
    addEvents();
}); 
```

它适用于以下html：

```
<div id="original">
    <ul>
        <li>one</li>
        <li>two</li>
        <li>three</li>
    </ul>
</div>
<div id="storage"></div>
<div> 
    <a id="reset">reset</a>
</div> 
```

[这是一个工作示例。](http://jsfiddle.net/musefan/FpLE4/)

# android - 在卸载应用程序时传递事件

> ID：15340114
> 
> 赞同：-2
> 
> 时间：2013-03-11T13:41:25.577
> 
> 标签：android

我正在开发一个应用程序，其中一些数据在应用程序的进程中写入文件。现在我需要做的是在卸载期间从同一个文件中删除该数据，并希望同一个文件存在于手机中。谁能告诉我，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:50:34.117

你无法知道这一点（除了利用 Android 中的一些安全漏洞）。就像@FoamyGuy 说的那样，这可能会使应用程序做很多坏事。`ACTION_PACKAGE_REMOVED`卸载应用程序时会广播一个调用的意图。问题是它会发送到**除**被卸载的应用程序之外的所有应用程序。

这在[文档中得到了证实](http://developer.android.com/reference/android/content/Intent.html#ACTION_PACKAGE_REMOVED)

现在，如果您感觉特别*邪恶*，并且如果您的用户设备上有两个应用程序，那么您可以`ACTION_PACKAGE_REMOVED`互相倾听对方的意图。但这不是很可行，改天再说。

# xcode - 关闭特定窗口的事件

> ID：15340115
> 
> 赞同：0
> 
> 时间：2013-03-11T13:41:26.050
> 
> 标签：xcode, macos, cocoa

我目前正在开发一个应在主窗口关闭时终止的应用程序。到目前为止，我使用过：

```
- (BOOL) applicationShouldTerminateAfterLastWindowClosed:(NSApplication *)application
{
    return YES;
} 
```

但是，当您打开首选项窗口然后关闭主窗口时，应用程序不会终止，因为首选项窗口将保持打开状态。

我基本上是在寻找一种在关闭主窗口时终止应用程序的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:47:16.540

您可以使用 ：

```
[NSApp terminate: nil]; 
```

# .net - 从 WPF 应用程序如何在*全屏*中打开浏览器并向其发送 POST 请求

> ID：15340116
> 
> 赞同：1
> 
> 时间：2013-03-11T13:41:26.590
> 
> 标签：.net, wpf

我的 WPF 应用程序必须打开一个浏览器窗口并使用 HTTP POST 向它发布一些值。更复杂的是，浏览器必须全屏显示。

通过关注这篇文章，我在第一部分取得了成功：[如何在 C# 中使用帖子信息打开 IE？](https://stackoverflow.com/questions/1705201/how-to-open-ie-with-post-info-in-c?lq=1) （嵌入一个不可见的 WebBrowser，然后从中打开一个新的空白窗口）。但是，我无法将此浏览器窗口设为全屏。

我尝试过的一件事是为 IE 设置一个注册表值以使用全屏。但是，一旦用户手动更改窗口大小，此值就会更改。

我考虑的另一件事是使用 Process.Start() 在信息亭模式下打开浏览器 (IE)。但是，当使用 Process.Start() 时，无法执行 POST 请求。我简要考虑的第三件事是使用 javascript 进行全屏显示，但我没有看到这与 POST 请求一起工作。

我无法更改接收 POST 的网站。

# opengl - 透视矩阵如何工作？

> ID：15340120
> 
> 赞同：2
> 
> 时间：2013-03-11T13:41:30.787
> 
> 标签：opengl, matrix, webgl

我开始阅读[learningwebgl 博客中的第 1 课](http://learningwebgl.com/blog/?p=28)，我注意到了这一部分：

```
var pMatrix = mat4.create();
mat4.perspective(45, gl.viewportWidth / gl.viewportHeight, 0.1, 100.0, pMatrix); 
```

我大致了解矩阵（平移/旋转/多重）的工作原理，但我不知道是什么`mat4.perspective(...)`意思。这有什么用途？如果我将一个向量与这个矩阵相乘，结果是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T13:56:27.487

透视矩阵用于缩放，并可能平移或翻转坐标系，为透视分割做准备。由于透视投影操作涉及除法，它不能单独用线性矩阵变换来表示。

在可编程图形管道中（请参阅[像素着色器](http://en.wikipedia.org/wiki/Shader)），您看不到除法操作 - 它仍然是固定功能部分之一。程序员通过调整操作中涉及的变量来控制它。在透视分割的情况下，投影矩阵为您提供了这种控制。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T13:51:17.907

投影矩阵用于将世界坐标转换为屏幕坐标。

三维虚拟世界中的位置是 x、y 和 z 坐标的三元组。当你想画一些东西（或者更确切地说是告诉 OpenGL 画一些东西）时，它需要计算这些坐标在用户屏幕上的位置。

该计算是通过矩阵乘法实现的。

由 x、y 和 z 组成的向量（以及允许矩阵执行缩放等操作所必需的第四个值 1）与矩阵相乘以接收一组新的 x、y 和 z 坐标（第 4 个值被丢弃）表示该点在用户屏幕上的位置（需要 z 坐标来确定哪些对象在其他对象的前面）。

函数 mat4.perspective 生成​​一个投影矩阵，该投影矩阵生成一个完全可以做到这一点的矩阵。论据是：

*   以度为单位的视野 (45)
*   视野的纵横比（视口的纵横比）
*   与仍然绘制的观察者的最小距离（0.1 世界单位）
*   与仍绘制的观察者的最大距离（100.0 世界单位）
*   存储生成的矩阵的数组 (pMatrix)

当一个点与这个矩阵相乘时，结果是必须绘制这个点的屏幕坐标。

# java - 此客户端服务器通信模型的跨语言 API

> ID：15340121
> 
> 赞同：0
> 
> 时间：2013-03-11T13:41:39.030
> 
> 标签：java, client-server

我的问题是这个问题的后续：
[Java 中的简单协议概念，用于此设置](https://stackoverflow.com/questions/15297928/simple-protocol-concept-in-java-for-this-setup)

这个想法是完全一样的，即客户端将发送请求和服务器响应一些信息：
![在此处输入图像描述](../Images/04d8be60174516451e2a7973975df598.png)

但是我想要一个众所周知的协议实现，以便服务器/客户端可以用任何编程语言实现。因此，运行 java 的客户端可以通过 TCP/IP 套接字与用 C 编写的远程应用程序进行通信，例如

出于这个原因，你能推荐任何众所周知的开源实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:56:21.137

只是一些提示：

*   休息界面：[http ://en.wikipedia.org/wiki/Representational_state_transfer](http://en.wikipedia.org/wiki/Representational_state_transfer)
*   科尔巴：[http ://en.wikipedia.org/wiki/Common_Object_Request_Broker_Architecture](http://en.wikipedia.org/wiki/Common_Object_Request_Broker_Architecture)
*   阿帕奇节俭：[http ://thrift.apache.org/](http://thrift.apache.org/)
*   谷歌协议缓冲区：[https ://developers.google.com/protocol-buffers/](https://developers.google.com/protocol-buffers/)
*   你自己在 tcp 上的实现...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:55:29.263

这取决于您的架构和您的要求，您可以直接使用 TCP 协议，Http 是另一种选择，如果您的服务器部署在 http 服务器上，我建议使用 Web 服务。我希望我的回答能给你一些想法。

# c# - 根据标志的值显示 TextBox 或 TextBlock

> ID：15340122
> 
> 赞同：-1
> 
> 时间：2013-03-11T13:41:39.613
> 
> 标签：c#, wpf, triggers

在我的 WPF 应用程序中，我的 Viewmodel 有一个布尔属性`IsOwnerOf`和一个字符串属性`Title`。如果`IsOwner==false`，我想要`TextBlock`显示`Title`（因为如果您不是所有者，您应该无法编辑它）并且如果`IsOwner==true`，我想要`TextBox`显示`Title`- 显然在视图中的同一位置。

我也不想在代码隐藏中做，因为我遵循 MVVM 模式。想过`Style.Triggers`，但有了它们我只能影响元素的属性，而不是元素类型本身，或者我可以吗？

编辑：实际上是下面关于触发`Visibility`或`IsReadOnly`工作的答案，但我仍然希望看到一个概念上更好的答案！如果我更换`TextBox`相应的怎么办？`TextBlock`通过没有这些方便属性的元素？必须有一种比同时创建并隐藏其中一个更好的方法，这听起来不对...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:45:33.920

最简单的选择是始终删除 a`TextBox`并将其`IsEnabled`或`IsReadOnly`属性绑定到`IsOwner`标志。

您也可以使用 a[`DataTemplateSelector`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)来实现此目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:45:49.910

您可以使用触发器来更改`Visibility`您的`TextBlock`和`TextBox`使用`BooleanToVisibilityConverter`

# vb.net - 如何使用 VB.NET 从 Twitter Stream API 解析位置

> ID：15340123
> 
> 赞同：0
> 
> 时间：2013-03-11T13:41:40.910
> 
> 标签：vb.net, twitter

我在 vb.net 中创建了一个函数，它使用 JSON.NET 解析来自 Twitter 的 JSON 响应。解析文本、源代码和 created_at 效果很好。我实际上在程序中使用了这段代码。但是当我尝试解析例如位置时，我只得到一个空字符串。我知道我可能需要一个数组。但是为什么我不需要一个用于文本、源和 created_at 的数组，我该如何声明该数组，它需要哪些值？

我的代码

```
 Private Sub ParseJson(ByVal Json As String)

    Dim o As JObject = JObject.Parse(Json)

    Dim tweet As String = o("text")
    Dim source As String = o("source")
    Dim created_at As String = o("created_at")

'See below, I get an empty string here

  Dim location As String = o("location")

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:33:56.503

[根据在线讨论](https://dev.twitter.com/discussions/3755)，提供位置信息的方式多种多样。[例如，为测试目的提供](http://api.twitter.com/1/statuses/user_timeline.json?screen_name=TestPerson15&include_entities=true)的示例查询包含以下 JSON 片段：

```
geo: {
    type: "Point",
    coordinates: [
        47.73491243,
        -122.33668846
    ]
},
coordinates: {
    type: "Point",
    coordinates: [
        -122.33668846,
        47.73491243
    ]
} 
```

因此，`location`您可以读取其中一个`geo`或`coordinates`哪个将是嵌套对象，而不是读取。我不知道`type`他们有哪些有效的 s。

信息*也*作为一个`place`更复杂的对象提供：

```
place: {
    id: "ecb63eb9d9d83b31",
    url: "http://api.twitter.com/1/geo/id/ecb63eb9d9d83b31.json",
    place_type: "city",
    name: "Shoreline",
    full_name: "Shoreline, WA",
    country_code: "US",
    country: "United States",
    bounding_box: {
        type: "Polygon",
        coordinates: [ … ]
    }
} 
```

因此，为了阅读`place`，您可以使用以下内容：

```
String.Format("{0} ({1})", o("place")("full_name"), o("place")("country_code")) 
```

这将返回

```
Shoreline, WA (US) 
```

我的理解是，这些属性都不是必须提供的，因此如果您想变得健壮，您应该测试所有这些属性的存在，直到找到一个产生所需信息的属性。

# .net - 在 web api 上接收时属性为 null

> ID：15340131
> 
> 赞同：4
> 
> 时间：2013-03-11T13:42:00.940
> 
> 标签：.net, asp.net-mvc, json, web-services, asp.net-web-api

我的 web api 中有以下方法

```
public class AccessPanelController : ApiController
    {
        public HttpResponseMessage PostGrantAccess([FromUri]GrantAccessRequest grantAccessRequest)
        {
            var deviceId = grantAccessRequest.DeviceId;

            var grantAccessResponse = new GrantAccessResponse()
                {
                    Status = "OK"
                };
            var response = Request.CreateResponse<GrantAccessResponse>(HttpStatusCode.OK, grantAccessResponse);
            return response;
        }

    } 
```

GrantAccessRequest 类：

```
public class GrantAccessRequest
{
    public string DeviceId { get; set; }
} 
```

客户：

```
 HttpClient client = new HttpClient();
            client.BaseAddress = new Uri("http://localhost:55208/");

            // Add an Accept header for JSON format.
            client.DefaultRequestHeaders.Accept.Add(
                new MediaTypeWithQualityHeaderValue("application/json"));

            Uri uri = null;

            var request = new GrantAccessRequest { DeviceId = "bla" };
            var response = client.PostAsJsonAsync("api/accesspanel", uri).Result;
            if (response.IsSuccessStatusCode)
            {
                uri = response.Headers.Location;
            } 
```

在我的`PostGrantAccess`方法中，`grantAccessRequest`是构造的，但`DeviceId`为空

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T13:44:58.650

摆脱`[FromUri]`控制器动作的属性。同样在客户端上，您似乎没有对`request`包含有效负载的变量做任何事情：

```
public HttpResponseMessage PostGrantAccess(GrantAccessRequest grantAccessRequest) 
```

为了更好地理解模型绑定在 Web API 中的工作原理，我建议您阅读[`following article`](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx).

所以：

```
using (var client = new HttpClient())
{
    client.BaseAddress = new Uri("http://localhost:55208/");

    var request = new GrantAccessRequest { DeviceId = "bla" };
    var response = client.PostAsJsonAsync("api/accesspanel", request).Result;
    if (response.IsSuccessStatusCode)
    {
        var uri = response.Headers.Location;
    }
} 
```

请注意，在这种情况下您不需要设置`Accept`请求标头，因为您正在使用该`PostAsJsonAsync`方法。

另外我不知道这是否是您问题中的错字，但您似乎已指定`api/accesspanel`为 url 而您的控制器操作被调用`GrantAccessRequest`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:45:06.817

好吧，这看起来有问题：

```
Uri uri = null;
var request = new GrantAccessRequest { DeviceId = "bla" };
var response = client.PostAsJsonAsync("api/accesspanel", uri).Result; 
```

您永远不会对 做任何事情`request`，并且`uri`永远为空。您希望设备 ID 如何到达服务器？

（我承认我对 WebAPI 知之甚少，无法确切知道您希望如何解决此问题，但大概您想在调用中的`request` *某个*`PostAsJsonAsync`位置使用...鉴于该`[FromUri]`属性，我希望有一些东西可以将该数据转换为要使用的 URI 的一部分。）

# python - 不使用发件人地址的 Django 电子邮件设置

> ID：15340134
> 
> 赞同：0
> 
> 时间：2013-03-11T13:42:06.887
> 
> 标签：python, django, email, django-forms

这是我的settings.py

```
 EMAIL_USE_TLS = True
 EMAIL_HOST = "smtp.gmail.com"
 EMAIL_HOST_USER = "mygmail@gmail.com"
 EMAIL_HOST_PASSWORD = "mypassword"
 EMAIL_PORT = 587 
```

和 view.py 代码

`From='someemail@mail.com' send_mail(Subject,Message, From, [To])`

每次发送邮件时都会显示`mygmail@gmail.com`，但我需要显示`someemail@mail.com`，如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:52:09.420

您是否将“someemail@mail.com”添加到您的 gmail 帐户？

谷歌有一个程序允许他们的 SMTP 像其他人一样发送电子邮件，他们要求你可以找到他们发送到这个给定电子邮件的代码。

否则很正常。

（避免恶意用户使用 google 的 SMTP 发送电子邮件为“barack.obama@whitehouse.gov”的安全方法）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T18:51:39.550

Google 只允许您从您在 Gmail 帐户中注册的地址发送电子邮件。所以 someemail@mail.com 除非是注册的 gmail 帐户，否则将无法使用。尽管我怀疑您正在尝试将其用作应用程序中某些用户的掩码以自己发送邮件。

另一种方法是使用 Gmail 以外的其他方法（例如 Mailgun、Sendgrid 等）。为获得最佳实践，请从合法注册的电子邮件地址发送电子邮件，但使用自定义电子邮件的回复字段。

# php - 在 HTML 表单中使用多维数组

> ID：15340143
> 
> 赞同：1
> 
> 时间：2013-03-11T13:42:43.170
> 
> 标签：php, arrays, forms

**问题 1：**我有一个表单，其中包含从数据库中提取的事件列表，旁边是供客户注册出席的复选框。有一个额外的复选框来指示任何特殊要求，以及一个用于详细说明的文本字段（'如果是，请提供更多详细信息......'）。

我想将客户参加的每个事件存储在一个多维数组中，其中包含事件 ID、“是/否”以表示特殊要求和任何此类要求的详细信息。我以为我走上了正轨：

```
 <form id="bookingform" method="post" action="booking-details.php">
    <fieldset>
      <legend>Personal information</legend>

      <div class="bookingitem">
        <label for="firstname">First name</label> <input type="text" name="firstname" id=
        "firstname" />*<br />
      </div>

      <div class="bookingitem">
        <label for="surname">Surname</label> <input type="text" name="surname" id=
        "surname" />*<br />
      </div>

      <div class="bookingitem">
        <label for="company">Company</label> <input type="text" name="company" id=
        "company" />*<br />
      </div>
    </fieldset>

    <fieldset>
      <legend>Which exhibition(s)?</legend>

      <div class="bookingitem">
        <?php
        $venues_query="SELECT exhibitions.exhib_id AS exhib_id, venues.venue_name AS venue, DATE_FORMAT(exhibitions.exhib_date, '%d/%m/%y') AS date FROM venues, exhibitions WHERE exhibitions.venue_id = venues.venue_id AND (exhibitions.exhib_date>=CURDATE())ORDER BY exhibitions.exhib_date";
        $venues_result=mysql_query($venues_query);
        while($venues=mysql_fetch_array($venues_result, MYSQL_ASSOC)){
        echo '<input type="checkbox" name="registrations['.$venues['exhib_id'].'][id]" /> '.$venues['venue'].' - '.$venues['date'].'<br/>';
        echo '<input type="checkbox" name="registrations['.$venues['exhib_id'].'][requirements]" />Special requirements?<br/>';
        echo 'If yes, please give more details... <input type="text" name="registrations['.$venues['exhib_id'].'][requirements_details]" />';
        }
        mysql_close();
        ?>
      </div>
    </fieldset>

    <fieldset>
      <legend>Terms and conditions:</legend>

      <p>T&amp;Cs here</p>

      <div>
        <input type="submit" class="buttons" name="submit" value="Submit" />
      </div>
    </fieldset>
  </form> 
```

...但是当我这样做时`var_dump($_POST['registrations']);`，我只会得到：

```
array(4) { [0]=> string(5) "00132" [1]=> string(5) "00140" [2]=> string(5) "00135" [3]=> string(5) "00136" } 
```

五位数字是从数据库中提取的事件 ID（在此示例中我注册了四个事件），但似乎没有存储其他信息。我希望这是非常明显的，但是任何人都可以发现我哪里出错了吗？

我希望能够使用以下代码循环遍历这些值（[根据这里的示例）：](https://stackoverflow.com/questions/2433727/submitting-a-multidimensional-array-via-post-with-php)

```
foreach ( $_POST['registrations'] as $registration )
    {
        echo '$registration[id]';
        echo '$registration[requirements]';
        echo '$registration[requirements_details]';

        // etc
    } 
```

**问题2：**我想确保当特殊要求框被勾选时，详细信息框也被填写。以前，我为表单的每个部分设置了三个单独的数组，并对`count()`刻度数和已完成的输入框数进行了分析。如果它们不匹配，则不会处理该表单。但是，我确信有一种更简单的方法可以实现这一目标，并且将不胜感激任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:15:07.207

当我尝试我认为是您生成的 HTML 时，我从 print_r 得到以下信息：

```
Array
(
    [registrations] => Array
        (
            [11111] => Array
                (
                    [id] => on
                    [requirements] => on
                    [requirements_details] => 1
                )

            [22222] => Array
                (
                    [id] => on
                    [requirements] => on
                    [requirements_details] => 2
                )

            [33333] => Array
                (
                    [id] => on
                    [requirements] => on
                    [requirements_details] => 3
                )

            [44444] => Array
                (
                    [id] => on
                    [requirements] => on
                    [requirements_details] => 4
                )

            [55555] => Array
                (
                    [id] => on
                    [requirements] => on
                    [requirements_details] => 5
                )

        )

) 
```

您可以使用为完整表单生成的 HTML 更新您的问题吗？

# knockout.js - Knockoutjs 模板 foreach，特殊第一项

> ID：15340145
> 
> 赞同：13
> 
> 时间：2013-03-11T13:42:55.023
> 
> 标签：knockout.js, jquery-validate

所以我一直在绞尽脑汁想办法解决这个问题。我有一个 foreach，吐出模板，我希望第一个元素具有特殊属性。到目前为止，我发现没有奏效的解决方案。

这是foreach：

```
<h3 class="question">Geografi</h3>   
        <p class="answer" data-bind="template: { name: 'geographyTmpl', foreach: geographyList,  templateOptions: { selections: selectedGeographies } }"></p> 
```

这是模板：

```
<script id="geographyTmpl" type="text/html">
<input class="geoCheckList" validate="required:true, minlength:2" name="geoCheckList[]" type="checkbox" data-bind='value: $data, attr: { id: "Geo"+$index()},checked: $root.selectedGeographies' />
<label data-bind="text: $data, attr: { 'for': 'Geo'+$index()}"></label> 
```

我想在第一个元素中添加：“validate="required:true, minlength:2"。

我需要做什么？

如果它有帮助，它用于 jQuery 验证。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-11T13:48:59.870

检查我的答案以获取有关 KnockoutJS 中第一个元素的另一个问题`foreach`

[跳过 foreach 淘汰赛 js 数组中的项目？](https://stackoverflow.com/questions/15300322/skip-item-in-foreach-knockout-js-array/15300548#15300548)

```
<div data-bind="text: ItemsArray[0].someProperty"></div>
<div data-bind="foreach: ItemsArray">
<!-- ko if: $index() == 0 -->
     <div data-bind="text: someProperty"></div>
 <!-- /ko -->
<!-- ko if: $index() != 0 -->
    <div data-bind="text: anotherDifferentProperty"></div>    
 <!-- /ko -->
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:48:42.763

您应该能够使用计算出的 observable 来返回布尔值，如果布尔值为真，则显示属性（标准淘汰赛）？

像这样的东西

```
this.IsFirst = ko.computed(function() {
    return this == Array[0];
}, this); 
```

看起来很老套，但应该可以

或使用

```
 {{if $item.first === $data}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:48:53.083

我很想使用[自定义绑定](http://knockoutjs.com/documentation/custom-bindings.html)而不是模板，然后从 bindingContext 中获取 $index，并仅在 $index 为 0 时添加 validate 属性。

```
ko.bindingHandlers.yourBindingName = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        // Create your input and label elements here then
        $(element).append(// add your new elements in here);
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-04T20:44:23.607

只要您从索引中删除括号，早期的帖子就可以使用。

像下面这样

```
<div data-bind="foreach: ItemsArray">
<!-- ko if: $index == 0 -->
     <div data-bind="text: someProperty"></div>
 <!-- /ko -->
<!-- ko if: $index != 0 -->
    <div data-bind="text: anotherDifferentProperty"></div>    
 <!-- /ko -->
</div>
```

# android - Android 布局：在 TextView 和 android:drawableStart 上——设置图标的大小？

> ID：15340146
> 
> 赞同：11
> 
> 时间：2013-03-11T13:42:58.713
> 
> 标签：android, android-layout, android-widget, textview

Lars Vogel 的关于*SQLite、自己的 ContentProvider 和 Loader*的教程使用以下布局作为 ToDo 项目列表（查看[http://www.vogella.com/articles/AndroidSQLite/article.html#todo_layout](http://www.vogella.com/articles/AndroidSQLite/article.html#todo_layout)，`todo_row.xml`布局文件）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/icon"
        android:layout_width="30dp"
        android:layout_height="24dp"
        android:layout_marginLeft="4dp"
        android:layout_marginRight="8dp"
        android:layout_marginTop="8dp"
        android:src="@drawable/reminder" >
    </ImageView>

    <TextView
        android:id="@+id/label"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="6dp"
        android:lines="1"
        android:text="@+id/TextView01"
        android:textSize="24dp" 
        >
    </TextView>

</LinearLayout> 
```

到现在为止还挺好。它工作得很好。Android 开发者工具 (Eclipse) 建议将`ImageView`. 的`drawable`属性替换为`TextView`. 我尝试了以下布局定义：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/label"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="8dp"
        android:layout_marginBottom="8dp"

        android:layout_marginLeft="4dp"
        android:drawablePadding="8dp"
        android:drawableStart="@drawable/reminder"       

        android:lines="1"
        android:text="@+id/TextView01"
        android:textSize="24sp" 
        >
    </TextView>

</LinearLayout> 
```

即`drawableStart`使用的是而不是`ImageView`。相关的`android:layout_marginLeft`，`android:drawablePadding`似乎工作正常。

但是，我不知道是否可以告诉drawable的大小。该`ImageView`解决方案使用`android:layout_width`/`height`属性来告诉想要的图标尺寸。-only`TextView`解决方案和`android:drawable...`?

谢谢，彼得

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T14:01:24.287

不幸的是，无法`TextView`使用`xml`. 只能用它来完成`Java`。

```
final LinearLayout layout = <get or create layou here>;
final TextView label = (TextView) layout.findViewById(R.id.label);

final float density = getResources().getDisplayMetrics().density;
final Drawable drawable = getResources().getDrawable(R.drawable.reminder);

final int width = Math.round(30 * density);
final int height = Math.round(24 * density);

drawable.setBounds(0, 0, width, height);
label.setCompoundDrawables(drawable, null, null, null); 
```

# sql - 将丢失的数据插入表中

> ID：15340147
> 
> 赞同：0
> 
> 时间：2013-03-11T13:42:59.787
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有两个表，它们有两个公共列“StationID”。

```
Create table t1(ID int, StationID bigint)
insert into t1 values
(0,1111),
(1,2222),
(2,34),
(3,456209),
(56,78979879),
(512,546)
go
Create table t2(StationID bigint, Descr varchar(50))
insert into t2 values
(-1,'test-1'),
(0,'test0'),
(1,'test1'),
(2,'test2'),
(5001,'dummy'),
(5002,'dummy'),
(6001,'dummy')
go 
```

现在我们注意到并非每个 t1.StationID 都在 t2.StationID 中。运行脚本就可以证明了。

```
select distinct StationID from t1 as A
where not exists
(select * from t2 as B where B.StationID =A.StationID) 
```

结果是：

```
StationID
34
546
1111
2222
456209
78979879 
```

现在我想用上面丢失的 StationID 填充 t2，列 Descr 可以是任何虚拟数据。我的真实案例有上千条记录，如何使用脚本来实现呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T13:49:38.207

```
insert into t2 (StationID, Descr)
select distinct StationID, 'dummy' 
from t1 as A
where not exists
   (select * from t2 as B where B.StationID =A.StationID) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T13:51:54.943

```
INSERT INTO 
    t2 
SELECT DISTINCT 
    stationid, 'dummy'  
FROM 
    t1 
WHERE 
    stationid NOT IN (SELECT stationid FROM t2) 
```

（作为其他人的替代品）。

# jquery - 具有多个事件的 jQuery 函数，一次发生一个事件

> ID：15340150
> 
> 赞同：0
> 
> 时间：2013-03-11T13:43:25.620
> 
> 标签：jquery, events, listener

我有一个相当简单的问题。我想让一个jquery函数工作，所以当我鼠标输入一个div时，会发生多个事件，一次一个，而不是一起发生。我会拖延吗？

HTML：

```
<div class="all">
<div class="wrapper">
<div class="trashwrapper">
<div class="trash"></div>
</div>
<div class="delete">
</div>
</div>
</div> 
```

查询：

```
$(".trashwrapper").on("mouseenter", function(){
   $(".delete").animate({width: "150px"}, 300);
   $(".delete").text("Delete?");
}).on("mouseleave", function(){
   $(".delete").empty("Delete?");
   $(".delete").animate({width: "0px"}, 300);
}); 
```

我想要它，所以我的 .delete 宽度动画为 150 像素，然后是“删除？” 文字出现。现在，“删除？” .delete 动画时几乎会出现文本。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:47:28.427

[animate](http://api.jquery.com/animate/)函数的第三个参数是动画完成时的回调函数。所以你可以在动画完成后设置文本

```
$(".trashwrapper").on("mouseenter", function(){
   $(".delete").animate({width: "150px"}, 300, function () {
         $(".delete").text("Delete?");
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:46:28.563

尝试使用回调函数：

```
$(".trashwrapper").on("mouseenter", function(){
   $(".delete").animate({width: "150px"}, 300,function(){
      $(this).text("Delete?");
   });
 }).on("mouseleave", function(){
    $(".delete").animate({width: "0px"}, 300, function(){
      $(this).empty("Delete?");
   });
 }); 
```

这将获取您想要的结果（动画后的文本更改）

# java - 在 Java 中调度微任务

> ID：15340153
> 
> 赞同：1
> 
> 时间：2013-03-11T13:43:28.517
> 
> 标签：java, scheduling

我有一个scanario，我想根据每个事件的时间戳将文件中的事件重播到JMS中。

有成千上万的事件。有些事件仅相隔一两毫秒，而有些则相隔几秒。

任何关于最佳方式的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:50:10.983

这是我要尝试的，按以下顺序：

1.  使用[石英](http://quartz-scheduler.org/)。我不明白为什么它不能处理成千上万的事件。
2.  如果由于某种原因石英不适合，我会获取所有事件时间戳（你说重播，所以我假设你提前知道它们），订购它们，并使用主线程 + 线程池。主线程 sleep()s 用于连续事件之间的间隔以及何时触发事件，它将调用处理程序的任务发送给执行程序。如果你想要更好的精度（并且可以忍受忙碌的等待）我会避免 sleep() 和 busywait

# java - 我可以通过ajax调用重定向用户吗

> ID：15340159
> 
> 赞同：-2
> 
> 时间：2013-03-11T13:43:50.197
> 
> 标签：java, ajax, jakarta-ee, dojo

我只想知道我是否可以通过 ajax 调用重定向用户，我必须在 java 中调用我的方法之一，然后从那里进行重定向

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T13:44:59.910

AJAX 调用将原始数据返回给 Javascript 回调。
他们不能告诉浏览器做任何事情。

相反，您可以告诉*您的 Javascript 代码*导航到新页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T14:16:21.490

您可以像这样构建 ajax 重定向（例如在 doFilter 中的过滤器中）。

```
String facesRequestHeader = httpServletRequest.getHeader( "Faces-Request" );

boolean isAjaxRequest = facesRequestHeader != null
        && facesRequestHeader.equals( "partial/ajax" );

String url = MessageFormat.format( "{0}://{1}:{2,number,####0}{3}",
        request.getScheme(), request.getServerName(),
        request.getServerPort(), YOUR_NEW_URL);

PrintWriter pw = response.getWriter();
pw.println( "<?xml version=\"1.0\" encoding=\"UTF-8\"?>" );
pw.println( "<partial-response><redirect url=\"" + url
        + "\"></redirect></partial-response>" );
        pw.flush();); 
```

这是在您使用 servlet 或 JSF 或类似的东西的情况下，您可以在进入生命周期之前重定向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:45:22.737

您可以从 Java 发送 ajax 响应，然后根据答案重定向用户。

# wcf - 根据声明在 WCF 中设置文化

> ID：15340170
> 
> 赞同：0
> 
> 时间：2013-03-11T13:44:14.307
> 
> 标签：wcf, globalization, wif

我有一个自定义声明，可以确定用户将使用的语言。

我有对 ClaimsPrincipal 的扩展，它检查该声明并生成适当的文化：

```
 public static CultureInfo Culture(this ClaimsPrincipal principal)
    {
        Claim claim = principal.FindFirst(CustomClaimTypes.Language);
        if (claim == null)
            return CultureInfo.CreateSpecificCulture("en");
        else
            return CultureInfo.CreateSpecificCulture(claim.Value);
    } 
```

我还实现了自定义 UserNameSecurityTokenHandler 和自定义 ClaimsAuthorizationManager 并且都可以正常工作。实际上整个解决方案工作得很好，除了我无法在 WCF 管道中找到合适的点，我可以根据上面的扩展设置 Thread.CurrentCulture。

我已经尝试过 ICallContextInitializer、IDispatchMessageInspector，但以上都不能真正看到我的 ClaimsPrincipal（它被空主体覆盖）。但是，在我的服务操作中，ClaimsPrincipal.Current 正确指向我在 UserNameSecurityTokenHandler 中创建的身份。

我应该在哪里设置这种依赖于声明的文化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:37:01.217

对于 WCF 数据服务，我使用 ProcessingRequest 事件：

```
public class ConfigurationManagementDataService : SecurityDataService<ConfigurationContext>
{
public ConfigurationManagementDataService()
    {
        Database.SetInitializer<ConfigurationContext>(null);
        ProcessingPipeline.ProcessingRequest += OnProcessingRequest;
    }
public void OnProcessingRequest(object sender, DataServiceProcessingPipelineEventArgs dataServiceProcessingPipelineEventArgs)
    {
    //assign IPrincipal to a Thread.Principal
    //we must set both, but Thread.CurrentPrincipal is a main
        if (context != null)
        {
            context.User = principal;
        }

        Thread.CurrentPrincipal = principal; 
```

# shell - 重命名文件以匹配目录名称

> ID：15340171
> 
> 赞同：0
> 
> 时间：2013-03-11T13:44:15.920
> 
> 标签：shell, unix

我有一个有趣的问题，希望可以通过 shell 命令轻松解决。我有一个目录树，其中的目录名称是有意义的，每个目录里面都有几个文件，包括一个 .mp3 文件。

我想批量重命名所有 mp3 文件以匹配目录的名称。

例如，高级目录如下所示：

```
Seans-iMac% ls
2006.James Lovelock: Gaia’s Revenge
2006.Religion and stem cell research
2006.Stephen Schneider
2006.Tony Judt: Post-war Europe since 1945
2006.Water management
2007.'Here, Bullet'
2007.Alan Bennett 
```

每个子目录的内容都差不多，例如：

```
Seans-iMac% cd "2006.Religion and stem cell research"
Seans-iMac% ls
details.txt     lnl_20060605.mp3    synopsis.txt 
```

我想把它改成这样：

```
Seans-iMac% ls
details.txt     2006.Religion and stem cell research.mp3    synopsis.txt 
```

我尝试了一个**for**循环，但似乎无法正确设置参数。为了使它更复杂，目录名称有空格，有些有单引号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:58:28.277

如果您确定每个子目录中最多有一个 mp3 文件，则应该这样做：

```
for i in *; do mv "$i"/*.mp3 "$i/$i.mp3"; done 
```

注意处理空格的双引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T13:58:41.833

```
for d in 2???.*
do
    mv "$d"/*.mp3 "$d/$d.mp3"
done 
```

glob 模式生成您感兴趣的目录名称，并在名称中保留空格。该命令假定子目录`mv`中只有一个文件，因此第一个参数将扩展为正确的文件名（将再次保留空格），第二个参数具有所需的形式。`.mp3`请注意，`*.mp3`在双引号字符串之外；这允许文件名扩展。请注意，目录名称（可能包含空格）总是在双引号内以避免丢失空格。

在使用 glob 以外的机制生成目录名称时要小心。并不是不能使用它们；只是需要这种照顾。请注意，包含换行符的目录名称往往比空格更成问题；我会重命名这些目录，使它们不包含换行符（同样适用于包含换行符的文件名）。名称中的前导和尾随空格也可能有问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T15:18:37.863

我的印象是您使用 tcsh 作为外壳。由于我不是一个大专家，下面会生成一个 bash shell 并使用 bash 语法。

```
bash -c 'find /path/to/root/dir -name \*.mp3 | while read file; do d=`dirname "$file"`; b=`basename "$d"`; echo mv -v "$file" "$d/$b.mp3";done' 
```

这不会做任何修改，它只是回显将要执行的命令。如果在仔细检查之后，它确实做了您想要的，请删除命令`echo`前面的。`mv`

This has the same limitations of the above ones, if there is more than one mp3 files in the directory, the last (alphabetical) file will have the name of the directory.mp3 and all other mp3 files will be overwritten (read: lost).

The difference in this case is that the structure of the folders can be nested and not necessarily in one level.

# caching - 在哪一层实现缓存？

> ID：15340173
> 
> 赞同：8
> 
> 时间：2013-03-11T13:44:23.390
> 
> 标签：caching, mocking, inversion-of-control, layer

我正在使用 Service Stack 的框架开发一个 Rest API。所有层都是分开的，因此我们可以为业务逻辑层单元测试制作 DAL 模拟。

我正在使用控制反转配置缓存：

`container.Register<ICacheClient>(new MemoryCacheClient());`

Where是一个用几个方法`MemoryCacheClient`实现的简单类。`ICacheClient`

这里有一个问题：通过这种控制反转包含对缓存的调用的最佳层是什么？

*   它可能在 BLL 中，但它不会给单元测试带来问题吗？

*   它可能在 DAL 中，知道我将不得不失去 IOC？而且，在这种情况下，我将依赖网络服务器的缓存，这可能是错误的。

*   它可能在 Web 界面中，知道我可以在这里有一些逻辑，甚至失去一些功能？

*   它可能在 Web 界面和 BLL 之间，创建一个新层？

我搜索了很多并阅读了一些文章，但没有幸运：

*   [帮助讨论关注点分离（数据访问与业务逻辑）](https://stackoverflow.com/questions/7192327/help-with-debate-on-separation-of-concerns-data-access-vs-business-logic)

*   [http://www.velocityreviews.com/forums/t639532-3-tier-design-and-cache-for-asp-net-3-5-a.html](http://www.velocityreviews.com/forums/t639532-3-tier-design-and-cache-for-asp-net-3-5-a.html)

*   [http://forums.asp.net/t/1795015.aspx/1](http://forums.asp.net/t/1795015.aspx/1)

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T19:33:55.413

您的缓存不需要位于任一层。您可以通过在装饰方法中包装将利用缓存的调用并在 IoC 容器中配置缓存装饰器的使用，将其保持在业务逻辑和数据访问逻辑之外。

我没有专门使用 ServiceStack 完成此操作，但该模式有据可查：

*   [介绍 CachedRepository 模式](http://ardalis.com/introducing-the-cachedrepository-pattern)（显式缓存装饰器）
*   [使用 Castle Windsor 将缓存作为横切关注点](http://blog.willbeattie.net/2010/08/caching-as-cross-cutting-concern-using.html)（利用动态代理）
*   [使用依赖注入的松散耦合 .NET 缓存提供程序](http://geekswithblogs.net/Rhames/archive/2012/09/11/loosely-coupled-.net-cache-provider-using-dependency-injection.aspx)
*   [控制反转和依赖注入：使用 Windsor 容器](http://msdn.microsoft.com/en-us/library/aa973811.aspx)

# ios - iOS - GMSMapView 显示语言

> ID：15340175
> 
> 赞同：0
> 
> 时间：2013-03-11T13:44:44.107
> 
> 标签：ios, google-maps, google-maps-sdk-ios

如何以不同的语言显示谷歌地图标签？
不是默认语言，取自国际设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-13T16:09:36.497

目前不可能，从 SDK 1.8 开始。

# sql - 如何在 SQL (Oracle) 中随机排列数据？

> ID：15340179
> 
> 赞同：4
> 
> 时间：2013-03-11T13:44:52.060
> 
> 标签：sql, oracle, permutation

随机排列数据的最佳方法是什么？例子：

```
id col1    col2     col3
1  data11  data12   data13
2  data21  data22   data23
3  data31  data32   data33 
```

我想随机排列 col1 和 col2 中的数据，结果将是这样的：

```
id col1    col2     col3
1  data31  data22   data13
2  data11  data12   data23
3  data21  data32   data33 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T13:53:49.533

使用 DBMS_RANDOM 来实现随机性。子查询中的 ROW_NUMBER() 提供了一个挂钩，您可以在 WHERE 子句中使用该挂钩，否则您将获得一个 CROSS JOIN（这不是很随机，而且可能很大）。

```
with c1 as ( select col1
                , row_number() over (order by dbms_random.value ) rn
             from your_table )
     , c2 as ( select col2 
                , row_number() over (order by dbms_random.value ) rn
             from your_table )
     , c3 as ( select col3 
                , row_number() over (order by dbms_random.value ) rn
             from your_table )
select c1.col1
       , c2.col2
       , c3.col3
from c1, c2, c3
where c2.rn = c1.rn
and   c3.rn = c1.rn; 
```

为了获得最佳效果，请记住使用种子。 [了解更多](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_random.htm#sthref4646)。

# ios - 类方法单例对象可以响应委托调用吗？

> ID：15340180
> 
> 赞同：1
> 
> 时间：2013-03-11T13:44:56.937
> 
> 标签：ios, objective-c, delegates, singleton, class-method

我有一个`SettingsManager`单例来处理整个应用程序中的用户设置（例如，每当在任何视图控制器中播放声音时，都会`SettingsManager`检查声音是否打开以及音量是多少）。

该类对象（我使用 访问`[SettingsManager sharedManager]`）能否响应发送到其他地方的委托消息？例如，如果我在我`SettingsViewController`的 .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:55:19.110

你的单例，一旦被实例化，当然可以充当代表。最后，它也是一个像任何其他对象一样的对象。它唯一的区别是它只被实例化一次。

但是，如果你只通过类方法访问它，并且没有将任何数据存储在 properties、ivars 等中，那么它可能根本不会被实例化。我不确定在这种情况下它是否是真正的单例，但我看到人们称它为单例，尽管它从未被实际实例化。在这种情况下，在类方法中，`self`总是指类而不是实例。并且一个类不能充当代表。

所以，根据你的单身人士的样子，答案是肯定的或否定的。

# c# - 如何使用一个操作链接在 mvc4 中下载多个文件？

> ID：15340183
> 
> 赞同：0
> 
> 时间：2013-03-11T13:45:00.690
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

行动：

```
public ActionResult Download(string filename)
    {
        var filenames = filename.Split(',').Distinct();
        var dirSeparator = Path.DirectorySeparatorChar;
        foreach (var f in filenames)
        {
            if (String.IsNullOrWhiteSpace(f)) continue;
            var path = AppDomain.CurrentDomain.BaseDirectory + "Uploads" + dirSeparator + f;
            if (!System.IO.File.Exists(path)) continue;
            return new BinaryContentResult
                       {
                           FileName = f,
                           ContentType = "application/octet-stream",
                           Content = System.IO.File.ReadAllBytes(path)
                       };
        }
        return View("Index");
    } 
```

BinaryContentResult 方法：

```
public class BinaryContentResult : ActionResult
{
    public string ContentType { get; set; }
    public string FileName { get; set; }
    public byte[] Content { get; set; }
    public override void ExecuteResult(ControllerContext context)
    {
        context.HttpContext.Response.ClearContent();
        context.HttpContext.Response.ContentType = ContentType;
        context.HttpContext.Response.AddHeader("content-disposition", "attachment; filename=" + FileName);
        context.HttpContext.Response.BinaryWrite(Content);
        context.HttpContext.Response.End();
    }
} 
```

看法：

```
 @{
                foreach (var item in Model)
                {
                @Html.ActionLink("Link","Index", "FileUpload", new { postid = item.PostId })
                }
            } 
```

但 actionlink 只下载一个（第一个）文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:51:00.560

一种可能性是将所有文件压缩成一个文件，然后将此压缩文件返回给客户端。您的代码也有一个巨大的缺陷：您在将整个文件内容返回给客户端之前将其加载到内存中：`System.IO.File.ReadAllBytes(path)`而不是仅仅使用`FileStreamResult`专门为此目的设计的内容。您似乎已经用该`BinaryContentResult`课程重新发明了一些轮子。

所以：

```
public ActionResult Download(string filename)
{
    var filenames = filename.Split(',').Distinct();
    string zipFile = Zip(filenames);
    return File(zip, "application/octet-stream", "download.zip");
}

private string Zip(IEnumerable<string> filenames)
{
    // here you could use any available zip library, such as SharpZipLib
    // to create a zip file containing all the files and return the physical
    // location of this zip on the disk
} 
```

# xml - 使用 jQuery 在 Textarea 中的单个新行与新段落

> ID：15340189
> 
> 赞同：1
> 
> 时间：2013-03-11T13:45:10.110
> 
> 标签：xml, xslt, unicode, linefeed

我正在 Google Chrome 浏览器上的 Textarea 中实现一个名为 Single New Line and New Paragraph 的功能（在 IE 中，我的解决方案正在运行，所以在 IE 上没有问题，因为 IE 认为 Shift+Enter (\r\n) 和 Enter (\n) 不同） . 这个概念是，如果我按 Shift+Enter，那么光标后的行（文本）应该转到下一个（新）行（\r\n），但应该在同一段落中考虑。现在，如果我只按 Enter 键，那么光标后的行（文本）也应该转到下一个（新）行（\n），但这次应该被视为一个新段落。

现在我的问题是：根据 jQuery API 文档（[http://api.jquery.com/val/](http://api.jquery.com/val/)），默认情况下 Textarea 不考虑 \r\n 。它只考虑 \n 我是按 Shift+Enter 还是只按 Enter。为了解决这个问题，我实现了名为的钩子（在 jQuery 站点中给出）

```
$.valHooks.textarea = {
  get: function( elem ) {
    return elem.value.replace( /\r?\n/g, "\r\n" );
  }
}; 
```

但是，无论我在 Textarea 上按什么键，它每次都会放置 \r\n。我想区分 Shift+Enter (\r\n) 和仅 Enter(\n)。但是如果放置了上面的钩子，那么每次它都会添加 \r\n 无论我是按 Shirt+Enter 还是只按 Enter。

在服务器端，现在很难确定如何考虑单新行（\r\n）或新段落（\n）？因为在这两种情况下，\r\n 组合都是从 Chrome 浏览器发送的。

基于 Shift+Enter 并且仅按下 Enter 键，我将在服务器端区分它们。但如上所述，每次 \r\n 从 Chrome 发送到服务器。

以上整个问题仅适用于谷歌浏览器（它在 IE 的所有版本中都能正常工作）。

如果在上述问题解释中仍然遗漏任何内容，请告诉我。

等待进一步的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T10:48:20.013

我自己解决了。`\r\n`因为无论我们按下`ENTER`还是Chrome 总是返回`SHIFT+ENTER`。我根据我的要求做了一个技巧。

当用户按下时，我需要放置一个特殊的 Unicode 字符`SHIFT+ENTER`，为了实现这一点，我使用了以下代码：

```
jQuery(txtInputControl).val(contentOfInputControl.substring(0,caretPositionOfCursor) +  String.fromCharCode(172) + contentOfInputControl.substring(caretPositionOfCursor,contentOfInputControl.length)); 
```

意味着我在用户按下的内容中间放置了一个 Unicode 特殊字符`SHIFT+ENTER`。也在服务器端处理它。这样我就可以从双方跟踪。

# ios - ios迁移核心数据

> ID：15340190
> 
> 赞同：2
> 
> 时间：2013-03-11T13:45:11.053
> 
> 标签：ios, objective-c, core-data, coordinate

我已阅读文档并按照本文中的步骤[操作](https://stackoverflow.com/questions/1018155/what-do-i-have-to-do-to-get-core-data-to-automatically-migrate-models/15339654?noredirect=1#comment21664481_15339654)-

运行我的代码时仍然出现错误，如下所示

```
-(void)loadPhotoGallery:(NSURL *)path
{
    if (self.defaultPhotoLibrary != nil) return;
    // this should handle auto migrations - according to documentation

    NSURL * url;

    if (path == nil)
    {
        url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
        url = [url URLByAppendingPathComponent:@"defaultPhotoDatabase"];
    } else {
        url = path;
    }
    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:

                             [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,

                             [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];
    NSString *path1 = [[NSBundle mainBundle] pathForResource:@"Photos" ofType:@"momd"];
    NSURL *momURL = [NSURL fileURLWithPath:path1];
    NSManagedObjectModel *managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:momURL];

    NSPersistentStoreCoordinator *persistentStoreCoordinator =  [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:managedObjectModel];
    NSError *error;
    if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:url options:options error:&error]) {
        // Printing this error
        NSLog(@"Problem with PersistentStoreCoordinator: %@",error);
    }

    UIManagedDocument *lib = [[UIManagedDocument alloc] initWithFileURL:url];
    if (![[NSFileManager defaultManager] fileExistsAtPath:[lib.fileURL path]]) {
        [lib saveToURL:lib.fileURL
      forSaveOperation:UIDocumentSaveForCreating
     completionHandler:^(BOOL success) {
         if (success)
         {
// Great
} else {
//bad
}
}
else if (lib.documentState == UIDocumentStateClosed) {
        [lib openWithCompletionHandler:^(BOOL success) {
            if (success) // here is the failure when migrating - because the DB file exists
            {
//great!
} else {
//bad - getting into this code
}
} 
```

我得到的错误：

> PersistentStoreCoordinator 的问题：错误域 = NSCocoaErrorDomain 代码 = 256“操作无法完成。（可可错误 256。）”用户信息 = 0xe09a880 {NSUnderlyingException = 无法打开数据库文件，NSSQLiteErrorDomain = 14}

但是数据库文件确实存在（在“elseif”中） - 所以不清楚问题是什么？

# perl - 使用 LWP::UserAgent 时不保存 Cookie

> ID：15340194
> 
> 赞同：2
> 
> 时间：2013-03-11T13:45:25.543
> 
> 标签：perl, cookies, lwp-useragent

我正在尝试使用 cookie，`LWP::UserAgent`但它们没有保存在文本文件中。我究竟做错了什么？

```
use v5.16;
use strict;
use warnings;
use Data::Dumper;

use LWP::UserAgent;
use HTTP::Cookies;
use Net::SSL ();

my $cookie_jar = HTTP::Cookies->new( 
    file => 'lwp_cookies.txt',
    autosave => 1,
);

my $ua = LWP::UserAgent->new(
    ssl_opts   => { verify_hostname => 0 },
    cookie_jar => $cookie_jar,
);

my $auth_url = 'https://my.site.url/path/authenticate';
use HTTP::Request::Common qw(GET);
my $req = HTTP::Request->new(GET => $auth_url);
$req->authorization_basic('username', 'password');

$ua->request($req);
say Dumper( \$cookie_jar ); 
```

转储的数据如下所示：

```
$VAR1 = \bless( {
   'autosave' => 1,
   'COOKIES' => {
          'my.site.url' => {
                '/' => {
                     'BLAH_COOKIE_KEY' => [
                         0,
                         'very_long_string',
                         undef,
                         1,
                         undef,
                         undef,
                         1
                       ]
                   }
              }
        },
   'file' => 'lwp_cookies.txt'
 }, 'HTTP::Cookies' ); 
```

而且`lwp_cookies.txt`只有这个：

```
#LWP-Cookies-1.0 
```

我在 Win with Strawberry Perl 上。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T14:12:06.810

尝试发出：

```
$cookie_jar->save 
```

此外，cookie 可能已过期，或被要求丢弃，因此，同样，将您`$cookie_jar`的`ignore_discard`设置为 1：

```
my $cookie_jar = HTTP::Cookies->new( 
    file => 'lwp_cookies.txt',
    autosave => 1,
    ignore_discard => 1,
); 
```

# c# - Filtergraph 中的增强型视频渲染器（EVR）

> ID：15340198
> 
> 赞同：0
> 
> 时间：2013-03-11T13:45:27.913
> 
> 标签：c#, .net, directshow

这是我的过滤器图。当我运行图表时，我看不到任何视频窗口。但是，如果我用其他一些渲染器（VMR7、VMR9 等）替换 EVR，我会看到视频窗口。请帮助。 ![在此处输入图像描述](../Images/21354186cbcb5eb64fe0f84ab345071a.png)

是否需要对 filtergraph 进行一些更改？此外，我找不到任何 AVI 解码器，我在哪里可以找到？有推荐的编解码器包吗？对于 Windows 7...

# r - R语言：像素图缩放和旋转？

> ID：15340199
> 
> 赞同：1
> 
> 时间：2013-03-11T13:45:31.997
> 
> 标签：r, pixmap

旋转和缩放像素图或 rtiff 对象的最佳方法是什么？

也许我错过了这些设施，但 pixmap 和 rtiff 包似乎没有这些功能。

感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T22:27:59.217

我将根据我自己的研究来回答这个问题，并提供一些总体上可能有用的其他信息。

A) 简单答案：使用 EBImage。

PDF 文档非常好，我的用例的 API 又好又简单.....

```
#Reading:

> f = readImage("C:/colorferet/dvd2/gray_feret_cd1/data/images/00001fa010_930831.tif")

#Scaling:

> f0.25 = resize(f,64, 96)

#Rotating:

>f2 = rotate(f,30)

#vectorifying.....

> v = c(f0.25) 
```

B) 补充资料：

B1) 是的.... 确认 - rtiff 和 pixmap 不支持所需的功能。除非出现其他信息，否则我将使用 EBImage

B2) 还有另一个包...Raster... 看起来它可以工作，但是 as.matrix( ) 和 as.raster( ) 似乎并没有以对称的方式起作用，所以有惊喜和学习曲线在那里。

# magento - 删除magento订单

> ID：15340202
> 
> 赞同：0
> 
> 时间：2013-03-11T13:45:41.340
> 
> 标签：magento

在这里，我正在使用下面的代码删除订单，但它仍然显示在订单网格中。当我点击这个订单时，它显示“这个订单不再存在”。但我不需要在运行以下代码后显示订单。

```
 <?php
$mageFilename = 'app/Mage.php';

require_once $mageFilename;

Varien_Profiler::enable();

Mage::setIsDeveloperMode(true);

ini_set('display_errors', 1);

umask(0);
Mage::app('default');
Mage::register('isSecureArea', 1);
//until here you gained access to the Magento models. The rest is custom code

$orders_object = Mage::getModel('sales/order')->getCollection()->addAttributeToFilter('increment_id', 100000025);

$orders_arr = $orders_object->getData();
if(!empty($orders_arr)){
$orders_data = $orders_arr[0];
$orderId = $orders_data['entity_id'];//put here the id of the order you want to delete. THE ONE FROM THE DATABASE NOT THE INCREMENT_ID

$order = Mage::getModel('sales/order')->load($orderId);

$invoices = $order->getInvoiceCollection();
foreach ($invoices as $invoice){
$invoice->delete();
}
$creditnotes = $order->getCreditmemosCollection();
foreach ($creditnotes as $creditnote){
$creditnote->delete();
}
$shipments = $order->getShipmentsCollection();
foreach ($shipments as $shipment){
$shipment->delete();
}
$order->delete();
echo "deleted";
}else{
echo "no record";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:09:52.963

网格中的嗨订单来自不同的表“sales_flat_order_grid”，它与 sales_flat_order 没有关系（我的意思是没有 ON DELETE CASCADE）。所以你需要使用下面给出的代码删除它：

**更新 1.1**

```
 $order_increment_id = $order->getIncrementId();
      if($order_increment_id){
           $order_in_grid = Mage::getResourceModel('sales/order_grid_collection')->addFieldToFilter('increment_id',$order_increment_id);
           $order_in_grid->getFirstItem()->delete();  
      } 
```

只需将上面的代码放在代码**$order->delete();中的这一行之后**

**更新 1.2。**

改用 RAW SQL QUERIES，因为我们无法使用模型从网格中删除订单

```
 $db = Mage::getSingleton('core/resource')->getConnection('core_write');    
     $sales_flat_order_grid= Mage::getSingleton('core/resource')->getTableName('sales_flat_order_grid');
     $order_increment_id = $order->getIncrementId();
      if($order_increment_id){ 
           $db->query("DELETE FROM ".$sales_flat_order_grid." WHERE increment_id='".mysql_escape_string($order_increment_id)."'");        
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-06T15:47:33.293

最简单的是，您可以获得一个可以为您完成所有工作的扩展程序。

来源：[http ://www.vjtemplates.com/magento-extensions/94-delete-order](http://www.vjtemplates.com/magento-extensions/94-delete-order)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-04T08:00:10.520

```
SET FOREIGN_KEY_CHECKS=0;

    ##############################
    # SALES RELATED TABLES
    ##############################
    TRUNCATE `sales_flat_creditmemo`;
    TRUNCATE `sales_flat_creditmemo_comment`;
    TRUNCATE `sales_flat_creditmemo_grid`;
    TRUNCATE `sales_flat_creditmemo_item`;
    TRUNCATE `sales_flat_invoice`;
    TRUNCATE `sales_flat_invoice_comment`;
    TRUNCATE `sales_flat_invoice_grid`;
    TRUNCATE `sales_flat_invoice_item`;
    TRUNCATE `sales_flat_order`;
    TRUNCATE `sales_flat_order_address`;
    TRUNCATE `sales_flat_order_grid`;
    TRUNCATE `sales_flat_order_item`;
    TRUNCATE `sales_flat_order_payment`;
    TRUNCATE `sales_flat_order_status_history`;
    TRUNCATE `sales_flat_quote`;
    TRUNCATE `sales_flat_quote_address`;
    TRUNCATE `sales_flat_quote_address_item`;
    TRUNCATE `sales_flat_quote_item`;
    TRUNCATE `sales_flat_quote_item_option`;
    TRUNCATE `sales_flat_quote_payment`;
    TRUNCATE `sales_flat_quote_shipping_rate`;
    TRUNCATE `sales_flat_shipment`;
    TRUNCATE `sales_flat_shipment_comment`;
    TRUNCATE `sales_flat_shipment_grid`;
    TRUNCATE `sales_flat_shipment_item`;
    TRUNCATE `sales_flat_shipment_track`;
    TRUNCATE `sales_invoiced_aggregated`;            # ??
    TRUNCATE `sales_invoiced_aggregated_order`;        # ??
    TRUNCATE `log_quote`;

    ALTER TABLE `sales_flat_creditmemo_comment` AUTO_INCREMENT=1;
    ALTER TABLE `sales_flat_creditmemo_grid` AUTO_INCREMENT=1;
    ALTER TABLE `sales_flat_creditmemo_item` AUTO_INCREMENT=1;
    ALTER TABLE `sales_flat_invoice` AUTO_INCREMENT=1;
    ALTER TABLE `sales_flat_invoice_comment` AUTO_INCREMENT=1;
    ALTER TABLE `sales_flat_invoice_grid` AUTO_INCREMENT=1;
    ALTER TABLE `sales_flat_invoice_item` AUTO_INCREMENT=1;
    ALTER TABLE `sales_flat_order` AUTO_INCREMENT=1;
    ALTER TABLE `sales_flat_order_address` AUTO_INCREMENT=1;
    ALTER TABLE `sales_flat_order_grid` AUTO_INCREMENT=1;
    ALTER TABLE `sales_flat_order_item` AUTO_INCREMENT=1;
    ALTER TABLE `sales_flat_order_payment` AUTO_INCREMENT=1;
    ALTER TABLE `sales_flat_order_status_history` AUTO_INCREMENT=1;
    ALTER TABLE `sales_flat_quote` AUTO_INCREMENT=1;
    ALTER TABLE `sales_flat_quote_address` AUTO_INCREMENT=1;
    ALTER TABLE `sales_flat_quote_address_item` AUTO_INCREMENT=1;
    ALTER TABLE `sales_flat_quote_item` AUTO_INCREMENT=1;
    ALTER TABLE `sales_flat_quote_item_option` AUTO_INCREMENT=1;
    ALTER TABLE `sales_flat_quote_payment` AUTO_INCREMENT=1;
    ALTER TABLE `sales_flat_quote_shipping_rate` AUTO_INCREMENT=1;
    ALTER TABLE `sales_flat_shipment` AUTO_INCREMENT=1;
    ALTER TABLE `sales_flat_shipment_comment` AUTO_INCREMENT=1;
    ALTER TABLE `sales_flat_shipment_grid` AUTO_INCREMENT=1;
    ALTER TABLE `sales_flat_shipment_item` AUTO_INCREMENT=1;
    ALTER TABLE `sales_flat_shipment_track` AUTO_INCREMENT=1;
    ALTER TABLE `sales_invoiced_aggregated` AUTO_INCREMENT=1;
    ALTER TABLE `sales_invoiced_aggregated_order` AUTO_INCREMENT=1;
    ALTER TABLE `log_quote` AUTO_INCREMENT=1;

    #########################################
    # DOWNLOADABLE PURCHASED
    #########################################
    TRUNCATE `downloadable_link_purchased`;
    TRUNCATE `downloadable_link_purchased_item`;

    ALTER TABLE `downloadable_link_purchased` AUTO_INCREMENT=1;
    ALTER TABLE `downloadable_link_purchased_item` AUTO_INCREMENT=1;

    #########################################
    # RESET ID COUNTERS
    #########################################
    TRUNCATE `eav_entity_store`;
    ALTER TABLE  `eav_entity_store` AUTO_INCREMENT=1;

    ##############################
    # CUSTOMER RELATED TABLES
    ##############################
    TRUNCATE `customer_address_entity`;
    TRUNCATE `customer_address_entity_datetime`;
    TRUNCATE `customer_address_entity_decimal`;
    TRUNCATE `customer_address_entity_int`;
    TRUNCATE `customer_address_entity_text`;
    TRUNCATE `customer_address_entity_varchar`;
    TRUNCATE `customer_entity`;
    TRUNCATE `customer_entity_datetime`;
    TRUNCATE `customer_entity_decimal`;
    TRUNCATE `customer_entity_int`;
    TRUNCATE `customer_entity_text`;
    TRUNCATE `customer_entity_varchar`;
    TRUNCATE `tag`;
    TRUNCATE `tag_relation`;
    TRUNCATE `tag_summary`;
    TRUNCATE `tag_properties`;            ## CHECK ME
    TRUNCATE `wishlist`;
    TRUNCATE `log_customer`;

    ALTER TABLE `customer_address_entity` AUTO_INCREMENT=1;
    ALTER TABLE `customer_address_entity_datetime` AUTO_INCREMENT=1;
    ALTER TABLE `customer_address_entity_decimal` AUTO_INCREMENT=1;
    ALTER TABLE `customer_address_entity_int` AUTO_INCREMENT=1;
    ALTER TABLE `customer_address_entity_text` AUTO_INCREMENT=1;
    ALTER TABLE `customer_address_entity_varchar` AUTO_INCREMENT=1;
    ALTER TABLE `customer_entity` AUTO_INCREMENT=1;
    ALTER TABLE `customer_entity_datetime` AUTO_INCREMENT=1;
    ALTER TABLE `customer_entity_decimal` AUTO_INCREMENT=1;
    ALTER TABLE `customer_entity_int` AUTO_INCREMENT=1;
    ALTER TABLE `customer_entity_text` AUTO_INCREMENT=1;
    ALTER TABLE `customer_entity_varchar` AUTO_INCREMENT=1;
    ALTER TABLE `tag` AUTO_INCREMENT=1;
    ALTER TABLE `tag_relation` AUTO_INCREMENT=1;
    ALTER TABLE `tag_summary` AUTO_INCREMENT=1;
    ALTER TABLE `tag_properties` AUTO_INCREMENT=1;
    ALTER TABLE `wishlist` AUTO_INCREMENT=1;
    ALTER TABLE `log_customer` AUTO_INCREMENT=1;

    ##############################
    # ADDITIONAL LOGS
    ##############################
    TRUNCATE `log_url`;
    TRUNCATE `log_url_info`;
    TRUNCATE `log_visitor`;
    TRUNCATE `log_visitor_info`;
    TRUNCATE `report_event`;
    TRUNCATE `report_viewed_product_index`;
    TRUNCATE `sendfriend_log`;
    ### ??? TRUNCATE `log_summary`

    ALTER TABLE `log_url` AUTO_INCREMENT=1;
    ALTER TABLE `log_url_info` AUTO_INCREMENT=1;
    ALTER TABLE `log_visitor` AUTO_INCREMENT=1;
    ALTER TABLE `log_visitor_info` AUTO_INCREMENT=1;
    ALTER TABLE `report_event` AUTO_INCREMENT=1;
    ALTER TABLE `report_viewed_product_index` AUTO_INCREMENT=1;
    ALTER TABLE `sendfriend_log` AUTO_INCREMENT=1;
    ### ??? ALTER TABLE `log_summary` AUTO_INCREMENT=1;

    SET FOREIGN_KEY_CHECKS=1; 
```

# java - Java中如何允许多个线程同时访问一个随机访问文件

> ID：15340205
> 
> 赞同：0
> 
> 时间：2013-03-11T13:45:57.137
> 
> 标签：java, multithreading, randomaccessfile

有没有一种方法可以允许多个线程同时执行读/写操作`RandomAccessFile`，即并发？我必须使用任何同步对象，还是可以在不使用任何同步的情况下完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:56:42.220

正如 Erik 所说，必须有一个同步机制。否则，这将成为 Readers/Writers 问题。

如果您可能想加快速度，您可以同时进行多次读取，并且每当您需要写入时，停止新的读取请求，让现有请求完成，获取锁，写入文件，释放锁。

[ReentrantReadWriteLock](http://download.oracle.com/javase/1,5.0/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html)可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:58:25.863

随机存取文件的行为方式与随机存取存储器相同——它对各种数据竞争开放。因此，只要您不确定不同的线程在文件的不同区域工作，您绝对必须使用同步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:52:55.317

您必须使用某种同步方法。文件中只能有一个文件位置。如果您尝试没有同步的并发访问，则行为充其量是不可预测的。

# java - 使用 + 运算符的 Java 字符串连接

> ID：15340207
> 
> 赞同：6
> 
> 时间：2013-03-11T13:46:04.413
> 
> 标签：java, string

我对字符串连接感到困惑。

```
String s1 = 20 + 30 + "abc" + (10 + 10);
String s2 = 20 + 30 + "abc" + 10 + 10;
System.out.println(s1);
System.out.println(s2); 
```

输出是：

> 50abc20
> 50abc1010

我想知道为什么在两种情况下都将*20 + 30*加在一起，但是*10 + 10*需要括号才能添加（s1）而不是连接到字符串（s2）。请在此处解释 String 运算符的`+`工作原理。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T13:53:08.430

加法是左结合的。接第一个案例

```
20+30+"abc"+(10+10)
-----       -------
  50 +"abc"+  20    <--- here both operands are integers with the + operator, which is addition
  ---------
  "50abc"  +  20    <--- + operator on integer and string results in concatenation
    ------------
      "50abc20"     <--- + operator on integer and string results in concatenation 
```

在第二种情况下：

```
20+30+"abc"+10+10
-----
  50 +"abc"+10+10  <--- here both operands are integers with the + operator, which is addition
  ---------
   "50abc"  +10+10  <--- + operator on integer and string results in concatenation
    ----------
    "50abc10"  +10  <--- + operator on integer and string results in concatenation
     ------------
      "50abc1010"   <--- + operator on integer and string results in concatenation 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:59:12.550

添加关联性的概念，您可以确保两个整数永远不会加在一起，方法是使用括号始终将字符串与整数配对，以便进行所需的连接操作而不是加法。

```
String s4 = ((20 + (30 + "abc")) + 10)+10; 
```

会产生：

```
2030abc1010 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T09:34:33.140

另外，为了补充这个话题，乔纳森·肖伯的答案的错误部分提示了我要记住的一件事：

**`a+=something`不等于`a=a+<something>`**：`+=`首先计算右侧，然后才将其添加到左侧。所以不得不重写，相当于：

```
a=a+(something); //notice the parentheses! 
```

显示差异

```
public class StringTest {
  public static void main(String... args){
    String a = "";
    a+=10+10+10;

    String b = ""+10+10+10;

    System.out.println("First string, with += : " + a);
    System.out.println("Second string, with simple =\"\" " + b);

  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T14:02:05.217

您需要从一个空字符串开始。

所以，这可能有效：

```
String s2 = ""+20+30+"abc"+10+10; 
```

或这个：

```
String s2 ="";
s2 = 20+30+"abc"+10+10;
System.out.println(s2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T09:20:35.577

你需要知道一些规则：
1、Java 运算符优先级，大部分从左到右
2、括号优先级高于**+**号优先级。**3、结果为和，如果+**
号 两边 都是整数，否则为连接。

# jakarta-ee - What could cause "javax.naming.OperationNotSupportedException" when tomcat startup

> ID：15340218
> 
> 赞同：0
> 
> 时间：2013-03-11T13:46:36.847
> 
> 标签：jakarta-ee, tomcat, jndi

My tomcat(7.0.34) shows error as

> Creation of the naming context failed: javax.naming.OperationNotSupportedException: Context is read only

when it starts up. But I don't know why? And how to fix it?

## UPDATE

the log:

```
Info: Starting Servlet Engine: Apache Tomcat/7.0.34
Mar 11, 2013 9:43:18 PM org.apache.catalina.core.NamingContextListener lifecycleEvent
Critical: Creation of the naming context failed: javax.naming.OperationNotSupportedException: Context is read only
Mar 11, 2013 9:43:18 PM org.apache.coyote.AbstractProtocol start
Info: Starting ProtocolHandler ["ajp-bio-8081"]
Mar 11, 2013 9:43:18 PM org.apache.catalina.core.StandardService startInternal
Info: Starting service ChongWuXingQiu
Mar 11, 2013 9:43:18 PM org.apache.catalina.core.StandardEngine startInternal
Info: Starting Servlet Engine: Apache Tomcat/7.0.34
Mar 11, 2013 9:43:18 PM org.apache.catalina.core.NamingContextListener lifecycleEvent
Critical: Creation of the naming context failed: javax.naming.OperationNotSupportedException: Context is read only
Mar 11, 2013 9:43:18 PM org.apache.coyote.AbstractProtocol start
Info: Starting ProtocolHandler ["ajp-bio-8082"]
Mar 11, 2013 9:43:18 PM org.apache.catalina.startup.Catalina start
Info: Server startup in 1753 ms 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T15:35:02.810

The Java EE spec states in Section 5.3.4 that the Naming context must be read-only and that OperationNotSupportedExceptions must be thrown on change requests. Unfortunatly, this does not directly answer your question, but may be a hint

Quote from the [spec](http://www.oracle.com/technetwork/java/javaee/tech/javaee5-jsp-135162.html):

> The container must ensure that the application component instances have only read access to their naming context. The container must throw the javax.naming.OperationNotSupportedException from all the methods of the javax.naming.Context interface that modify the environment naming context and its subcontexts.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-24T01:43:11.427

We recently upgraded our tomcat instance from Tomcat 5 to Tomcat 7\. The existing code looks something like this: ​

```
Context initCtx;
initCtx = new InitialContext();
Context envCtx = (Context) initCtx.lookup("java:comp/env");
strSMTPFrom = (String) envCtx.lookup("env/SMTP_From");
envCtx.close();
envCtx = null; 
```

The last two lines were obviously meant to release the resources but this is not acceptable to Tomcat (see [https://bz.apache.org/bugzilla/show_bug.cgi?id=51744](https://bz.apache.org/bugzilla/show_bug.cgi?id=51744)). If you cannot change your code then the work-around is to apply jndiExceptionOnFailedWrite to the context ([https://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Standard_Implementation](https://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Standard_Implementation)), e.g.

```
<Context jndiExceptionOnFailedWrite="false"> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-06T06:41:24.397

I recently got the same error. It was due to a config error where my JNDI server url was missing a slash.

So I had

```
java.naming.provider.url=tcp:/10.211.55.3:7222 
```

Instead of

```
java.naming.provider.url=tcp://10.211.55.3:7222 
```

# windows - Button 的 Pressed VisualState 的动画不会触发

> ID：15340221
> 
> 赞同：1
> 
> 时间：2013-03-11T13:46:38.190
> 
> 标签：windows, xaml, windows-phone-8, windows-phone, visualstatemanager

我正在开发一个 Windows Phone 8 项目。我对这个按钮的问题：

```
 <Button x:Name="decreaseFontButton" Foreground="{StaticResource GlobalBrush}">
            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Pressed">
                        <Storyboard>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Height" Storyboard.TargetName="decreaseFontButton">
                                <DiscreteObjectKeyFrame KeyTime="0" Value="70"/>
                            </ObjectAnimationUsingKeyFrames>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="decreaseFontButton" Completed="ObjectAnimationUsingKeyFrames_Completed_1">
                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource GlobalBrush}"/>
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
            <Button.Content>
                <Image Source="/Assets/Player/sub_minus.png" Width="28" Height="28"/>
            </Button.Content>
        </Button> 
```

是两个动画都没有被触发。我尝试将 VisualStateGroup 的名称更改为**FocusState**并将 VisualState 的名称更改为**Focused**，但我也没有看到任何更改。你能告诉我我做错了什么吗？

感谢您的关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:34:21.313

问题在于您如何尝试修改视觉状态。这些实际上是按钮内部模板的一部分，不能以您尝试的方式进行配置。

相反，您应该寻求创建一种新样式，其中包括您想要的视觉状态更改，并将该样式应用于按钮。

像这样：

```
<phone:PhoneApplicationPage.Resources>

    <SolidColorBrush Color="Aqua" x:Key="aquabrush" />

    <Style x:Key="AlternativeButtonStyle" TargetType="Button">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderBrush" Value="{StaticResource PhoneForegroundBrush}"/>
        <Setter Property="Foreground" Value="{StaticResource PhoneForegroundBrush}"/>
        <Setter Property="BorderThickness" Value="{StaticResource PhoneBorderThickness}"/>
        <Setter Property="FontFamily" Value="{StaticResource PhoneFontFamilySemiBold}"/>
        <Setter Property="FontSize" Value="{StaticResource PhoneFontSizeMedium}"/>
        <Setter Property="Padding" Value="10,5,10,6"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid Background="Transparent">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver"/>
                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ButtonBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource aquabrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Height" Storyboard.TargetName="ButtonBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="70"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Disabled" />
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates"/>
                        </VisualStateManager.VisualStateGroups>
                        <Border x:Name="ButtonBackground" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" CornerRadius="0" Margin="{StaticResource PhoneTouchTargetOverhang}">
                            <ContentControl x:Name="ContentContainer" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Foreground="{TemplateBinding Foreground}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" Padding="{TemplateBinding Padding}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</phone:PhoneApplicationPage.Resources>

<Grid x:Name="LayoutRoot" Background="Transparent">
    <Button Content="pressed?" Style="{StaticResource AlternativeButtonStyle}" />
</Grid> 
```

# css - 跨不同域共享 CSS 样式表

> ID：15340222
> 
> 赞同：4
> 
> 时间：2013-03-11T13:46:38.283
> 
> 标签：css, wordpress, cross-domain

我正在开发两个不同的 WordPress 网站，它们在许多方面相似但外观不同。

例如，假设我正在开发两个“杂志”网站，它们共享相同的 CSS 布局，例如网格系统、边距等，但不同的 CSS 装饰属性，例如渐变、颜色、阴影。

让他们共享相同的基本 CSS 布局但不同的装饰 CSS 的最佳方法是什么？

最初我想像......

```
<link rel="stylesheet" type="text/css" media="all" href="LINK-TO-BASE-CSS-ON-PRIMARY-DOMAIN.css" />
<link rel="stylesheet" type="text/css" media="all" href="<?php bloginfo( 'template_url' ); ?>/style.css" /> <!-- This would be the 'top-up' CSS --> 
```

不过，这对我来说似乎不是特别干净。我承认，这里也有一个非常相似的[问题](https://stackoverflow.com/questions/5437620/what-is-an-efficient-way-of-handling-multiple-css-stylesheets)。

这仍然被认为是最好的方法吗？链接到另一个域有什么缺点吗？我已经读到，由于跨域加载，这甚至可能是一个*优势。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T14:07:34.463

你建议的很好。我不确定是否存在称为“跨域加载”的*优势，但将样式表托管在另一台服务器中是一种非常常见的做法。*此其他服务器称为 CDN 或内容交付网络。以下是有关 CDN 及其优势的一些信息：

[http://www.sitepoint.com/7-reasons-to-use-a-cdn/](http://www.sitepoint.com/7-reasons-to-use-a-cdn/)

* * *

另外，专业提示：如果您要使用单独的域来托管文件，请进行一些[DNS 预取。](http://davidwalsh.name/dns-prefetching)这很简单：

```
<link rel="dns-prefetch" href="//myexternalcdn.com" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:57:55.603

尝试分离布局结构和模板，并从同一个域中调用所有内容

```
<link rel="stylesheet" type="text/css" media="all" href="fileserverdomain/css/structure.css" />
<link rel="stylesheet" type="text/css" media="all" href="fileserverdomain/css/firsttamplatename.css" /> 
```

或者

```
<link rel="stylesheet" type="text/css" media="all" href="fileserverdomain/css/structure.css" />
<link rel="stylesheet" type="text/css" media="all" href="fileserverdomain/css/secondtamplatename.css" /> 
```

此解决方案的好处是您可以额外提供切换模板：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-11T11:05:29.837

您可以使用此过滤器来过滤出具有任何条件或备用输出 href 字符串的样式，例如：

```
add_filter( 'style_loader_src', function($href){
if(strpos($href, "name-of-allowed.css") !== false) {
return $href;
}
return false;
}); 
```

# linux - 如何同步两个文件的内容

> ID：15340226
> 
> 赞同：0
> 
> 时间：2013-03-11T13:46:50.590
> 
> 标签：linux, unix, sync, rsync

我想同步两个文件的内容，File1 & File2

这两个文件的共同内容很少。

*   File2 是主文件。
*   File1 是普通文件。

文件2：

```
# cat File2

    [default]
host = XXXX

<i>[monitor:///server/dev-01/log/*.log*]</i>

index = main

disabled = false

sourcetype = serverlog 
```

文件1：

```
# cat File1

    [default]
host = XXXX

<i>[monitor:///server/cat-01/log/*.log*]</i>

index = second

disabled = false

sourcetype = server-logs 
```

必需的：

```
# cat File2

    [default]
host = XXXX

<i>[monitor:///server/dev-01/log/*.log*]</i>

index = main

disabled = false

sourcetype = serverlog

<i>[monitor:///server/cat-01/log/*.log*]</i>

index = second

disabled = false

sourcetype = server-logs 
```

# c - C 泛型类型作为函数参数输入

> ID：15340229
> 
> 赞同：0
> 
> 时间：2013-03-11T13:47:03.743
> 
> 标签：c, function, types, struct, arguments

所以我有两个不同的结构，其中我将访问的所有属性都是相同的。而且我还有一个函数，谁的论点，我希望能够接受两者中的任何一个。例子：

```
typedef struct{
    int whatnot = 14;
    int thing[11];
} TH_CONFIG;

typedef struct{
    int whatnot = 3;
    int thing[5];
} TH_CONFIG_2;

*_CONFIG var;

void fun(*_CONFIG input)
{
    input.whatnot = 5;
}

int main(){
    fun(var);
} 
```

我可能有一种暗示，我应该使用 void 作为我可以进行类型转换的类型或其他东西？但我的搜索只产生了关于函数指针、模板和 C# 的东西。

编辑： *_CONFIG 在语法上并不正确，它表示我不知道在那里做什么，但它应该是 _CONFIG 类型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:51:36.940

可能的解决方案。

1.  只需为它们都使用一个长度为 11 的数组。您真的用完了操作系统上的最后 6 个字节吗？
2.  使它成为一个动态数组。
3.  只用汇编写，你显然不关心 C 的更高层次。
4.  使用像 C++ 这样支持模板或多态的语言。
5.  只需传递`struct`您关心的参数即可。

    无效乐趣（int* whatnot）{ *whatnot = 5; }

    int main() { fun(&myStruct.whatnot); 返回0；}

6.  考虑到准 OO 设计。

    struct { int whatnot; } typedef 常见的；

    struct TH_CONFIG_1 { 通用通用；诠释事物[11]；};

    struct TH_CONFIG_2 { 共同共同；诠释事物[5]；}

但如果你坚持...

```
void fun(void* input) {
    ( (int)(*input) ) = 5;
} 
```

或者...

```
void fun(void* input) {
    ( (TH_CONFIG*) input)->whatnot = 5; // may have been a TH_CONFIG_2, but who cares?
} 
```

注意：这不会通过任何 C 商店的代码审查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:55:41.953

您可以使用任何指针类型并将其强制转换。

如果您访问的所有属性都相同，我猜一个是另一个的扩展（因为属性需要从结构的开头具有相同的偏移量）。在这种情况下，您可能需要使用此模式：

```
struct base {
  int foo;
  char **strings;
};

struct extended {
  struct base super;
  double other_stuff;
}; 
```

由于`super`是 的开头`struct extended`，您可以毫无问题`struct extended *`地转换为。`struct base *`当然，您可以通过在开头重复相同的字段来做到这一点`struct extended`，但随后您就是在重复自己。

# google-apps-script - 避免使用 Utilities.jsonStringify 上的函数

> ID：15340230
> 
> 赞同：1
> 
> 时间：2013-03-11T13:47:04.180
> 
> 标签：google-apps-script

我有一个带有一些原型函数的 javascript 对象，例如：

```
function Test() {

    this.name = "A name";

    Test.prototype.prototypedFunction = function() {
        var a = "anything";
    }

    this.normalMethod = function(){
        var b = "another thing";
    };
} 
```

在“Test”类型的任何对象上调用 Utilities.jsonStringify() 时，所有函数都被字符串化，如下所示：

{"prototypedFunction":"\nfunction () {\n var a \u003d \"anithing\";\n}\n","name":"A name","normalMethod":"\nfunction () {\ n var b \u003d \"另一件事\";\n}\n"}

但是由于我会将这个对象传递给一个休息服务，所以发送函数没有意义，只发送数据。我所期望的只是：

{"name":"一个名字"}

那么，Utilities.jsonStringify 是否可以避免字符串化函数，或者至少避免原型函数？

谢谢，

梅尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:58:50.933

改用 JSON.stringify ，它应该做你想做的事。

# msmq - 如何在不使用性能计数器的情况下从 MSMQ 获取每秒的消息数

> ID：15340234
> 
> 赞同：1
> 
> 时间：2013-03-11T13:47:11.277
> 
> 标签：msmq

获取每秒通过队列的消息数或每秒接收的消息队列数的过程，而不使用性能计数器

System.messaging.MessageQueue。

# adsense - 如何在 vbulletin 存档页面中添加 adsense 代码？

> ID：15340241
> 
> 赞同：1
> 
> 时间：2013-03-11T13:47:30.947
> 
> 标签：adsense, vbulletin

如何将 adsense 代码添加到 vbulletin 存档页面？我可以使用哪种方法？我需要将代码放在存档索引页面中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T11:16:36.707

vBulletin 4.x 包含默认位置，您可以使用这些默认位置在整个论坛的一系列预定义位置（包括其存档）中插入广告。此外，您还可以从选项列表中配置自己的选项。

要使用默认位置：

管理控制面板 > 广告 > 管理广告 > 存档

并按照提示配置您的广告。

要配置您自己的：

管理控制面板 > 广告 > 管理广告 > 投放新广告 > 存档

并按照提示配置您的广告。

但是请注意，Adsense 的代码将禁用它认为过于接近自己的任何链接，因此您需要使用“内容下方”位置以避免禁用存档的现有导航链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:52:50.897

您使用哪个 vBulletin 版本？使用模板管理器编辑默认存档模板并插入广告感知代码。

# android - TextView 长按监听器

> ID：15340246
> 
> 赞同：2
> 
> 时间：2013-03-11T13:48:06.417
> 
> 标签：android, android-activity, onclicklistener, onlongclicklistener

我已经制作了一个`TextView`，当我单击它并长按它时，我想制作一些东西。单击工作正常，但是当我长按`TextView`“活动”关闭时。

这是我的代码。

```
if (c.moveToFirst())
    {
        do
        {
            final String name = c.getString(0);
            TextView resname = new TextView(this);
            View line = new View(this);
            //ImageButton pin = new ImageButton(this);

            resname.setText(c.getString(0));
            resname.setTextColor(Color.WHITE);
            resname.setTextSize(30);
            resname.setTypeface(null,Typeface.BOLD);
            resname.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
            resname.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    Intent i = new Intent();
                    if (getIntent().getStringExtra("type").contentEquals("Restaurant")){
                        i.setClassName("com.mdl.cyrestaurants.guide", "com.mdl.cyrestaurants.guide.RestaurantDetails");
                        i.putExtra("name",name);
                    }
                    else if(getIntent().getStringExtra("type").contentEquals("Cafe")){
                        i.setClassName("com.mdl.cyrestaurants.guide", "com.mdl.cyrestaurants.guide.CafeDetails");
                        i.putExtra("name",name);
                    }
                    else if(getIntent().getStringExtra("type").contentEquals("Bar")){
                        i.setClassName("com.mdl.cyrestaurants.guide", "com.mdl.cyrestaurants.guide.BarDetails");
                        i.putExtra("name",name);
                    }
                    startActivity(i);
                }
            });

            resname.setOnLongClickListener(new View.OnLongClickListener() {

                @Override
                public boolean onLongClick(View v) {
                    if(db.delpin(name))
                        Toast.makeText(getBaseContext(), "Delete successful", Toast.LENGTH_SHORT).show();
                    else
                        Toast.makeText(getBaseContext(), "Delete failed", Toast.LENGTH_SHORT).show();

                    Intent i = new Intent();
                    i.setClassName("com.mdl.cyrestaurants.guide", "com.mdl.cyrestaurants.guide.pins");
                    i.putExtra("type", getIntent().getStringExtra("type"));
                    startActivity(i);
                    finish();

                    return false;
                }
            });

            //pin.setImageResource(R.drawable.pin);
            //pin.setBackgroundDrawable(getResources().getDrawable(R.drawable.unpin));
            //pin.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));

            line.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,2));
            line.setBackgroundColor(Color.RED);

            ((LinearLayout) layout).addView(resname);
            //((LinearLayout) layout).addView(pin);
            ((LinearLayout) layout).addView(line);
        }while(c.moveToNext()); 
```

日志猫：

```
03-11 16:11:56.318: E/AndroidRuntime(11301): FATAL EXCEPTION: main
03-11 16:11:56.318: E/AndroidRuntime(11301): java.lang.IllegalStateException: database not open
03-11 16:11:56.318: E/AndroidRuntime(11301):    at android.database.sqlite.SQLiteDatabase.delete(SQLiteDatabase.java:1663)
03-11 16:11:56.318: E/AndroidRuntime(11301):    at com.mdl.cyrestaurants.guide.DBAdapter.delpin(DBAdapter.java:422)
03-11 16:11:56.318: E/AndroidRuntime(11301):    at com.mdl.cyrestaurants.guide.pins$2.onLongClick(pins.java:69)
03-11 16:11:56.318: E/AndroidRuntime(11301):    at android.view.View.performLongClick(View.java:2427)
03-11 16:11:56.318: E/AndroidRuntime(11301):    at android.widget.TextView.performLongClick(TextView.java:7430)
03-11 16:11:56.318: E/AndroidRuntime(11301):    at android.view.View$CheckForLongPress.run(View.java:8793)
03-11 16:11:56.318: E/AndroidRuntime(11301):    at android.os.Handler.handleCallback(Handler.java:587)
03-11 16:11:56.318: E/AndroidRuntime(11301):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-11 16:11:56.318: E/AndroidRuntime(11301):    at android.os.Looper.loop(Looper.java:143)
03-11 16:11:56.318: E/AndroidRuntime(11301):    at android.app.ActivityThread.main(ActivityThread.java:4914)
03-11 16:11:56.318: E/AndroidRuntime(11301):    at java.lang.reflect.Method.invokeNative(Native Method)
03-11 16:11:56.318: E/AndroidRuntime(11301):    at java.lang.reflect.Method.invoke(Method.java:521)
03-11 16:11:56.318: E/AndroidRuntime(11301):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
03-11 16:11:56.318: E/AndroidRuntime(11301):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
03-11 16:11:56.318: E/AndroidRuntime(11301):    at dalvik.system.NativeStart.main(Native Method)
03-11 16:11:58.638: I/Process(11301): Sending signal. PID: 11301 SIG: 9 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:40:54.830

数据库未打开 03-11 16:11:56.318: E/AndroidRuntime(11301): at android.database.sqlite.SQLiteDatabase.delete(SQLiteDatabase.java:1663)

您正在尝试在不打开连接的情况下进行数据库操作

```
resname.setOnLongClickListener(new View.OnLongClickListener() {

                @Override
                public boolean onLongClick(View v) {
                  try
                  {
                    if(db.delpin(name))
                        Toast.makeText(getBaseContext(), "Delete successful", Toast.LENGTH_SHORT).show();
                    else
                        Toast.makeText(getBaseContext(), "Delete failed", Toast.LENGTH_SHORT).show();

                    Intent i = new Intent();
                    i.setClassName("com.mdl.cyrestaurants.guide", "com.mdl.cyrestaurants.guide.pins");
                    i.putExtra("type", getIntent().getStringExtra("type"));
                    startActivity(i);
                    finish();
                  }catch(Exception e)
                  {
                     // ---------------------------------
                      // handle error code here
                      // You have problem with db.delpin(name)
                     // ---------------------------------

                      return false;
                  }
                    return false;
                }
            }); 
```

# performance - Scala 2.10.1 和专业化（无法正常工作）

> ID：15340247
> 
> 赞同：0
> 
> 时间：2013-03-11T13:48:11.530
> 
> 标签：performance, scala, generics, boxing, scala-2.10

很抱歉第二次询问专业化问题，但我还不太了解到底发生了什么......
所以，我有一个项目（带有人工智能的五子棋游戏），我决定使用我自己的简单而肮脏的@在它的热门部分专门的 ad-hoc 集合，因为我必须在没有装箱的情况下存储原始类型。问题是这并没有真正的帮助，因为在`jvisualvm`'s Sampler 我清楚地看到

```
scala.runtime.BoxesRunTime.boxToShort() 
```

当最佳移动搜索开始运行时会消耗*数千*毫秒。

项目：[https](https://github.com/magicgoose/Gomoku)
://github.com/magicgoose/G ​​omoku “收藏品”较差的文件： [https](https://github.com/magicgoose/Gomoku/blob/master/src/magicgoose/gomoku/ai/SpecializedCollections.scala)
://github.com/magicgoose/G​​omoku/blob/master/src/magicgoose/gomoku/ai/SpecializedCollections.scala 导致拳击的方法（我认为是其中之一）：

```
trait Indexed[@specialized T] extends Enumerable[T] {
  @inline def length: Int
  @inline def apply(i: Int): T
// ...
  @inline final def findIndex(fun: T => Boolean) = {
    @tailrec def find(i: Int): Int = {
      if (i < length) {
        if (fun(this(i))) i
        else find(i + 1)
      } else -1
    }
    find(0)
  }
} 
```

我看过另一个项目（debox：[https](https://github.com/non/debox) ://github.com/non/debox ），它试图完成类似的事情（没有原始装箱的数据收集），但我不太明白它是如何在那里完成的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T14:23:28.927

这有一个简单的答案：`Function1`不专门研究`Short`参数，只有`Int`、`Long`、`Float`和`Double`。所以当你打电话时，`fun`你需要在进去的时候装箱。

要么使用你自己的函数类——遗憾的是缺乏方便的速记！——或者确保你没有使用`Short => Boolean`，而是使用`Int => Boolean`（并且类型知道它）。请注意，当我说这很容易时，我的意思只是容易解释问题：这两种解决方案都不是那么容易实现，但目前这是必要的。

# css - 如何将多个 div 并排排列，一个在另一个下方

> ID：15340248
> 
> 赞同：4
> 
> 时间：2013-03-11T13:48:14.933
> 
> 标签：css

这是我想做的；

[Pinterest](http://pinterest.com/all/?category=photography)

假设我有 10 个或更多矩形 div。我想将其中的 5 个 div 并排放置，而其他 5 个在其他 5 个下方。我的问题是；

我应该如何命名 div ？每个 div 的类名是否应该更改或 ID 是否更改或我应该给出；

```
float:left 
```

属性给所有 div 让它们并排对齐。所以当水平没有地方时，其他五个将放在它们下面。

我的意思是这 10 个 div（或更多）的结构应该如何？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T10:48:38.630

您可能会发现[Wookmark JQuery 插件](http://www.wookmark.com/jquery-plugin)很有用。它就像[砌体](http://masonry.desandro.com/)，但我认为它更容易。把你所有的图片放在一个 div 中，在 div 中引用它，`<script></script>`它基本上会产生与 Pininterest 相同的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-19T11:10:27.510

如果您使用类，则可以将其用于多个对象而无需更改名称。
试试这个：

```
<style>
.container {
    overflow:auto;
}
.sidebyside {
    float:left; 
    width:100px; 
    height:100px; 
    border-style:solid; 
    margin:5px;
}
.belowdiv {
    width:300px; 
    height:100px; 
    border-style:solid; 
    margin:5px;
}
</style>

<div class="container">
    <div class="sidebyside">div0</div>
    <div class="sidebyside">div1</div>
    <div class="sidebyside">div2</div>
    <div class="sidebyside">div3</div>
    <div class="sidebyside">div4</div>
</div>
<div class="belowdiv">div5</div>
<div class="belowdiv">div6</div>
<div class="belowdiv">div7</div>
<div class="belowdiv">div8</div>
<div class="belowdiv">div9</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:56:49.387

您可以做的是为所有 div 创建一个容器。并在它们下面添加 10 个 div。

```
<div id="divContainer">

    <div class="theDiv">
         //Div content 1
    </div>

    <div class="theDiv">
         //Div content 2
    </div>

    <div class="theDiv">
         //Div content 3
    </div>

    <div class="theDiv">
         //Div content 4
    </div>

    <div class="theDiv">
         //Div content 5
    </div>

    <div class="theDiv">
         //Div content 6
    </div>

    <div class="theDiv">
         //Div content 7
    </div>

    <div class="theDiv">
         //Div content 8
    </div>

    <div class="theDiv">
         //Div content 9
    </div>

    <div class="theDiv">
         //Div content 10
    </div>

</div> 
```

之后，您添加样式。

*   首先，给 divContainer 设置一个宽度，假设容器是 1000px，里面的每个 div 是 200px。
*   其次，添加 float 属性。

就像是。

```
<style>  
    #divContainer {background: blue; width: 1000px; float: left;}
    .theDiv {background: pink; float: left;}
</style> 
```

然后在这之后你可以关闭更多的属性，让它看起来更好，比如边距等等。

希望这对你有帮助 =)

# emma - 艾玛没有记录线路覆盖率，即使它执行了

> ID：15340249
> 
> 赞同：0
> 
> 时间：2013-03-11T13:48:16.587
> 
> 标签：emma

我正在使用 emma 来记录代码覆盖率。我对线路覆盖率（或线路百分比）特别感兴趣 我们计划通过自动化来增加源代码的线路覆盖率。我们首先手动执行场景，然后使用 emma 检查 line% 是否增加。如果有，我们继续并自动化该功能。我被一个特定的 IF-ELSE 块卡住了，当我手动运行场景时，我看到了想要的结果。但是 emma 并没有将这条线记录为所涵盖的内容。这是下面的示例代码

```
 if (a == null) 
             {
                 final class1 c1 = new class1();
                 if (c1.isSE()) 
                 {
                    c1.sendRedirect(req, res, "error.html");
                 } 
                 else 
                 {
                     c1.sendRedirect(req, res, "testpage.html");
                 }
                 return;
             } 
```

艾玛报告中的前 3 行是绿色的。但是，以下几行在 emma 报告中是红色的（意味着它们没有被覆盖）

```
c1.sendRedirect(req, res, "error.html");
c1.sendRedirect(req, res, "testpage.html");
return; 
```

但是当我手动执行场景时，我看到了想要的结果（即被重定向到 testpage.html 页面） 为什么 emma 没有记录这一行？

注意：我尝试了以下故障排除（在[http://emma.sourceforge.net/faq.html](http://emma.sourceforge.net/faq.html)中提到）

> 3.18。EMMA 开始报告它检测了 0 个类，即使我给了它一些输入......
> 
> 您可能会被 EMMA 仪器的增量特性绊倒。调试启用 EMMA 的构建时，尝试干净的重新编译和/或手动删除所有检测输出目录和所有*.em/* .ec 文件，以将 EMMA 重置为干净状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-23T01:45:26.043

可能对将来参考此内容的人有用...

当您对 Jars 进行检测时，您可以看到 emma 列出了一些带有“Class Compiled without Debug Mode”的类。如果您在检测时看到这些消息，则不会生成 Line % Coverage。要克服这个问题，您要么需要在调试模式下编译这些类，要么考虑排除那些不需要的类。通常带有上述消息的类将是第三方类。

如果您在检测时没有看到“Class Compiled without Debug Mode”消息 - 那么您应该在报告中看到 Line coverage。

# php - 在 Wordpress 中创建第二个完全可定制的循环页面

> ID：15340253
> 
> 赞同：0
> 
> 时间：2013-03-11T13:48:30.047
> 
> 标签：php, wordpress

我正在寻找对我正在开发的网站做点什么。这是我第一次使用 Wordpress，我已经完成了大部分需要运行的工作。

但是，我想在我的网站上创建另一个页面，该页面可以显示格式与普通 index.php 文件完全不同的循环帖子。

例如，index.php 有它自己的循环，并充当网站主页。第二个页面将被称为 roster.php，并有一个循环显示和格式化来自特定帖子类别的帖子。如果可能的话，我将在哪里创建 roster.php 文件，并且它仍然可以在我的 Wordpress 安装中正常工作吗？

我已经挖掘了 Wordpress Codex，并就这个主题进行了几次谷歌搜索，但我似乎找不到与这种情况类似的任何东西。或者也许我只是误解了他们所有人。

我非常感谢您花时间阅读这篇文章，您可以贡献的任何内容对我都非常有用。

再次感谢卡勒姆·克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:50:35.490

您可以`roster`在 wordpress 中创建一个页面，并在您的模板目录中创建一个 page-roster.php。Wordpress 会自动将页面路由到 php 文件。

然后，您可以在 page-roster.php 中进行自定义搜索和循环

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:51:51.477

page-roster.php 应该可以解决问题！

检查此以获取更多信息：[http ://codex.wordpress.org/Pages#What_Template_is_Used_to_Display_a_Particular_Page.3F](http://codex.wordpress.org/Pages#What_Template_is_Used_to_Display_a_Particular_Page.3F)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T13:53:08.560

您可以为您的页面、帖子甚至类别创建自定义模板，[此 Codex 页面](http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates)可以帮助您提供有关如何执行此操作的示例。

# python - Paypal IPN 在 python 金字塔框架中返回 Invalid

> ID：15340254
> 
> 赞同：0
> 
> 时间：2013-03-11T13:48:30.807
> 
> 标签：python, paypal, pyramid, paypal-sandbox, paypal-ipn

我一直在尝试实现贝宝 IPN 侦听器，但它一直让我无效。我正在使用 python 金字塔框架和请求库。请帮忙。

```
PP_URL = "https://www.sandbox.paypal.com/cgi-bin/webscr"
parameters = {}
parameters = request.POST.copy()
parameters['cmd']='_notify-validate'
params = urlencode(parameters)

status = requests.post(PP_URL, params=params)

status = status.text

print status 
```

谁能告诉我我做错了什么？

我也在使用[https://developer.paypal.com/webapps/developer/applications/ipn_simulator](https://developer.paypal.com/webapps/developer/applications/ipn_simulator)

测试ipn监听器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:07:56.327

可能发生的情况是：

此行将完全按原样复制已编码的 POST 请求：

```
parameters = request.POST.copy() 
```

然后调用此行，它对编码的行进行编码：

```
params = urlencode(parameters) 
```

这会导致双重编码，这将是有问题的。

您应该能够删除 params = urlencode(parameters) 行并且没问题。如果这不起作用，则对 POST 请求进行 urldecode，附加 notify-validate，然后再次进行 urlencode。

# tridion - PublishTransactionFilterData 中的属性以使用 Tridion 核心服务缩小搜索范围

> ID：15340256
> 
> 赞同：3
> 
> 时间：2013-03-11T13:48:33.623
> 
> 标签：tridion

我正在使用 Tridion Core Service 来获取从特定目标上的出版物中发布的所有组件。代码如下。由于可能有很多组件，并且使用此代码获得的结果包含所有项目，有没有办法缩小结果范围（如提供 ItemType 和递归为 false）。

```
var filter = new PublishTransactionsFilterData
            {
                PublicationTarget = new LinkToPublicationTargetData { IdRef = targetId },
                ForRepository = new LinkToRepositoryData { IdRef = GetPublication(publicationId)},
                BaseColumns = ListBaseColumns.IdAndTitle,
            };

XElement t= Instance.GetSystemWideListXml(filter);
var v = t.Elements().Where(k => k.Attribute("ItemType").Value == "16"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:00:45.200

首先，您的代码将始终返回 null，因为`ListBaseColumns.IdAndTitle`没有`ItemType`属性。缩小结果范围的唯一方法是您可以在 上找到的属性`PublishTransactionsFilterData`，它们是：

*   EndDate, StartDate 仅在此时间戳内搜索

*   优先级，如果你知道的话

*   PublishedBy，如果你知道是谁发布的

其余的都是后过滤，这也可以。您可以过滤 XML 中的所有内容。示例 XML 如下所示：

```
 <tcm:Item ID="tcm:0-241-66560" Title="page" Allow="24576" Deny="67108864" Icon="T64L0P0" ItemType="64" ItemID="tcm:2-72-64" State="4" StateChangeDate="2013-03-11T14:53:55" Publication="Test" PublicationTarget="Local" ItemPath="\Test\New Structure Group" Action="0" ScheduleDate="" UserId="tcm:0-11-65552" User="domain\user" Priority="4" Managed="0" /> 
```

您可以对任何属性进行后过滤

# fullcalendar - 垂直轴上的 FullCalendar 时间

> ID：15340269
> 
> 赞同：1
> 
> 时间：2013-03-11T13:49:22.560
> 
> 标签：fullcalendar

有没有办法改变垂直轴上的时间？我正在尝试制作具有 45 分钟时段的学校时间表日历，从 8:30 – 09:15、09:20 – 10:05 等开始。任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:05:15.147

添加选项`slotMinutes: 45`以使间隔为 45 分钟并通过添加选项设置开始时间`minTime: '8:30am'`

像这样：

```
$("#calendar").fullCalendar({
    slotMinutes: 45,
    minTime: '8:30am',
    //the reset of options.....
}); 
```

文档链接： http: [//arshaw.com/fullcalendar/docs/agenda/](http://arshaw.com/fullcalendar/docs/agenda/)

# wpf - 来自数据库的 WPF 工具提示

> ID：15340270
> 
> 赞同：1
> 
> 时间：2013-03-11T13:49:25.943
> 
> 标签：wpf, wpf-controls, tooltip

我需要能够在运行时在 3 层 WPF 应用程序中编辑工具提示。（这可能会允许管理员，而不是每个用户。）我想要的是在数据库中有工具提示，我一直在寻找各种技术来实现这一点。Josh Smith 有一个使用工具提示转换器的好例子（[这里](http://joshsmithonwpf.wordpress.com/2007/03/04/dynamically-generating-tooltip-text/)）。但是，我需要将工具提示链接到各个 UI 控件，因此每个控件都必须具有唯一标识符。不幸的是，这不是 WPF 所要求的。我不想给每个控件一个名字。我记得您可以以某种方式生成 x:Uid，但不记得如何生成。另外，我想以某种方式连接到工具提示机制，而不是为每个控件定义一个转换器。我意识到我的目标可能有点高，但是有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:28:15.667

您可以使用`VisualTreeHelper`类（[msdn](http://msdn.microsoft.com/en-us/library/system.windows.media.visualtreehelper.aspx)）。

在此解决方案中，如果要从 db 设置 ToolTip，则必须设置元素的名称。

首先，您必须创建将保存来自 db 的数据的类：

```
class ToolTipContainer
{
    public string ElementName { get; set; }
    public string ToolTip { get; set; }       
} 
```

接下来，您应该使用它`VisualTreeHelper`来遍历所有元素：

```
class ToolTipManager
{
    List<ToolTipContainer> source;

    public ToolTipManager(List<ToolTipContainer> source)
    {
        this.source = source;
    }

    public void EnumVisual(Visual myVisual)
    {
        for (int i = 0; i < VisualTreeHelper.GetChildrenCount(myVisual); i++)
        {                
            Visual childVisual = (Visual)VisualTreeHelper.GetChild(myVisual, i);                                 
            ((dynamic)childVisual).ToolTip = source.Where(x => x.ElementName == childVisual.GetValue(Control.NameProperty) as string).Select(x => x.ToolTip).FirstOrDefault();                                
            EnumVisual(childVisual);
        }
    }
} 
```

使用示例：

```
<Window x:Class="WPFToolTipDB.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <StackPanel>
            <Button Name="Button" Content="Click me" />
            <TextBox MinWidth="150" />
            <Button Name="Button1" Content="Click me!" />
            <TextBlock Name="TextBlock" Text="My text block" />
            <StackPanel Orientation="Horizontal">
                <TextBlock Name="tbName" Text="Name:" />
                <TextBox Name="tbEnterName" MinWidth="150" />
            </StackPanel>
        </StackPanel>
    </Grid>
</Window> 
```

代码隐藏：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        // When you don't specify name of the element you can set default ToolTip.
        source.Add(new ToolTipContainer { ElementName = string.Empty, ToolTip = "Empty ToolTip!!!" });
        source.Add(new ToolTipContainer { ElementName = "Button", ToolTip = "Click me" });
        source.Add(new ToolTipContainer { ElementName = "Button1", ToolTip = "Click me!" });
        source.Add(new ToolTipContainer { ElementName = "TextBlock", ToolTip = "My TextBlock" });
        source.Add(new ToolTipContainer { ElementName = "tbName", ToolTip = "Enter your name!" });
        source.Add(new ToolTipContainer { ElementName = "tbEnterName", ToolTip = "Please enter your name here!" });            

        var ttManager = new ToolTipManager(source);
        ttManager.EnumVisual(this.Content as Visual);
    }
    List<ToolTipContainer> source = new List<ToolTipContainer>();
} 
```

# javascript - iOS中的字母滚动

> ID：15340271
> 
> 赞同：0
> 
> 时间：2013-03-11T13:49:26.460
> 
> 标签：javascript, ios, titanium

我正在尝试使用 Titanium 和 Javascript 为 iOS（如 iOS 联系人）创建按字母顺序排列的滚动条。我已经修改了我在[这里找到的一些代码](http://developer.http://appcelerator.com/question/49141/alphabetical-scroll-bar)

我正在尝试对其进行调整，以便当用户选择特定行时，它将“客户端名称”传递给新窗口。代码和/或很可能我尝试调整它的方式有两个问题。选择时直接在“标题”行（A，B，C ...）之后的第一行不执行任何操作，第一行之后的其他行将用户引导到新窗口但不传递“客户端名称”。有人可以给我看一下可以完成这项工作的代码吗？我正在使用 OS 10.7.5，Titanium Studio Build: jenkins-titanium-rcp-release-788 (origin/release) 日期：2013 年 2 月 20 日，12:04:51。这是我的代码： **注意：下面的代码是修复问题后的工作代码**

```
var win = Titanium.UI.currentWindow;
win.barColor='#336699';
win.title='Alphabetical List';
win.backgroundImage='images/background.png';

var db = (function() {
var api   = {};
    api.all_item_names = function() {
        var conn = Ti.Database.install('mydb].sqlite','clients');
        var results = [];
        var resultSet = conn.execute('select * from clients order by clientname asc');
        while ( resultSet.isValidRow()) {
            results.push({
            clientname:  resultSet.fieldByName('clientname'),
        });
        resultSet.next();
    }
    resultSet.close();
    return results;
};
return api;
}());

var tvrow;
var curheader   = 'A';
var list    = [];
var index   = [];
var data   = [];
var isAndroid   = (Titanium.Platform.name == 'android');

list = ( db.all_item_names() );

for ( var ipos=0; ipos<list.length;ipos++){
    if( list[ipos].clientname[0] != curheader){
        curheader = list[ipos].clientname[0];

        tvrow = Titanium.UI.createTableViewRow({
            height:    40,
            path:'clientdetail.js' ,
            client: list[ipos],
            header:    curheader 
            });
        index.push({title:curheader, index:ipos});
    } else {
        tvrow = Titanium.UI.createTableViewRow({
            height:40,
            path:'clientdetail.js' ,
            client: list[ipos]});
        }   

var title= Titanium.UI.createLabel({ 
    left:    5, 
    top:     2, 
    height:  40, 
    color:   '#000', 
    font: {fontSize: 14, fontWeight: 'normal', fontFamily: (isAndroid?'sans-serif':'Helvetica Neue')}, 
    text:    list[ipos].clientname });
    tvrow.add(title);
    data.push(tvrow);
}

var tableView = Titanium.UI.createTableView({
    data:            data,
    index:           index,
    backgroundColor:'transparent',
    separatorStyle:  Titanium.UI.iPhone.TableViewStyle.GROUPED,
    top:             1,
    width:           '99%'
});

tableView.addEventListener('click', function(e)
    {
        if (e.rowData.path)
        {
            var win = Ti.UI.createWindow({
                url:e.row.path,
                title:e.row.clientname
            });

        var client = e.row.client;
        win.client = client.clientname;
        Ti.UI.currentTab.open(win);
    }
});

win.add(tableView); 
```

# entity-framework - 实体框架和部分类中的程序集名称

> ID：15340272
> 
> 赞同：0
> 
> 时间：2013-03-11T13:49:29.993
> 
> 标签：entity-framework, .net-assembly, partial-classes

在 .edmx 文件中我可以在哪里找到程序集名称？其次，当我创建自己的部分类时，如何让它出现在同一个程序集中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:23:20.577

edmx 文件中没有程序集名称。从 edmx 文件生成的代码成为 edmx 文件所在项目的一部分，因此成为为此项目编译的程序集的一部分。部分类主要是一种编译器技巧，当您编译部分类时，编译器会将所有部分类组合成一个类，并且在程序集中您将始终只有一个类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:08:49.390

请记住，为了使部分类工作，所有部分类必须驻留在相同的程序集和相同的命名空间中。在您的情况下，假设您的实体数据模型中有一个名为 Foo 的类。现在，这个 Foo 类将是驻留在您的 .edmx 文件中的部分类。另外，假设您想用一个名为 Bar 的附加属性来扩展这个分部类。您需要做的是在同一个程序集中创建另一个名为 Foo 的部分类，或者与包含 .edmx 文件的项目基本相同的项目，并将新属性 Bar 添加到 Foo 的该部分类实现中。此外，包含 Bar 属性的新的分部 Foo 类需要与 .edmx 文件中的 Foo 分部类驻留在相同的命名空间中。

我希望这有帮助。

# python - python线程问题

> ID：15340273
> 
> 赞同：0
> 
> 时间：2013-03-11T13:49:30.563
> 
> 标签：python, multithreading

我想将我的线程的结果放在一个列表中。

我有以下示例代码：

```
def parallelizer_task(processor,input,callback):
    output = processor(input)
    if callback:
        callback(output)
    return output

class ThreadsParallelizer(Parallelizer):

    def parallelize(self,processors,input=None,callback=None):
        threads = []
        for processor in processors:
            t = threading.Thread(target=parallelizer_task,args=(processor,input,callback))
            threads.append(t)
            t.start()
        return threads
parallelizer = ThreadsParallelizer 
```

但我有线程列表的输出为；

```
* <Thread(Thread-1, started 4418719744)>
* <Thread(Thread-2, started 4425617408)>
* <Thread(Thread-3, started 4429950976)> 
```

有没有办法让线程结果在列表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:00:44.303

是的，您可以使用例如`join`. 它将强制主线程等待子线程完成工作。然后，您可以将数据存储在`threading.Thread`对象中，如下所示：

```
def parallelizer_task(processor,input,callback):
    output = processor(input)
    if callback:
        callback(output)

    # Attach result to current thread
    thread = threading.currentThread()
    thread.result = output

class ThreadsParallelizer(Parallelizer):

    def parallelize(self,processors,input=None,callback=None):
        threads = []
        for processor in processors:
            t = threading.Thread(...)
            threads.append(t)
            t.start()

        # wait for threads to finish
        for th in threads:
            th.join()

        # do something with results
        results = [th.result for th in threads]
        return results 
```

# java - Eclipse/Ant 自定义 android 构建多应用

> ID：15340274
> 
> 赞同：0
> 
> 时间：2013-03-11T13:49:35.163
> 
> 标签：java, android, eclipse, ant

我想要一个 Android 构建系统过程、命令行或 Eclipse，以从单个源代码库生成多个 .apk 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:28:50.260

为每个项目编写具有各种目标的自定义构建脚本。

```
<target name="all" depends="project_1, project_2, project_3">
...

<target name="projetc_1">
<!-- build project 1 -->
...

<target name="projetc_2">
<!-- build project 2 -->
... 
```

如果您不知道从哪里开始，请查看此[Ant 教程，和/或查看 IDE 生成的 Ant 脚本。](http://ant.apache.org/manual/tutorial-writing-tasks.html)

# javascript - 将 js var 传递到通过 appendTo 添加的 html 块中

> ID：15340275
> 
> 赞同：0
> 
> 时间：2013-03-11T13:49:37.093
> 
> 标签：javascript, jquery, append, clone

我有这个 html，当有人单击按钮时，我将其注入到页面中。每次使用下面的 js 单击按钮时，都会再次附加 html。

```
<div style="display: none;">
    <div class="grab-me">
    <p>This is fieldset 1</p>
      <input name="foo[]" />
      <input name="bar[]" />
      <input name="oth[]" />
    </div>
 </div>

var count = 1;
  $(function(){
    $('.add-member').live("click", function(e){
        e.preventDefault(e);
        count += 1;
        var grab = $('.grab-me')
                .clone()
                .removeClass('grab-me')
                .appendTo('#register');

    });
 }); 
```

但我需要做的是它说“这是字段集 1”我需要每次将该数字增加 1，以便后续附加说这是字段集 2，这是字段集 3 等等。我看不出我怎么能当它被克隆时将一个变量（我的计数变量）传递给 html 块，它将替换该数字。

这是它的一个jsfiddle：http: [//jsfiddle.net/tzbgA/](http://jsfiddle.net/tzbgA/)

任何帮助都会很棒！谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:02:03.693

你可以给出你想改变类的句子。然后使用 jQuery 选择器更改其中的文本。

```
<body>
  <button class="add-member">add more</button>
  <div style="display: none;">
    <div class="grab-me">
    <p class="count">This is fieldset 1</p>
      <input name="foo[]" />
      <input name="bar[]" />
      <input name="oth[]" />
    </div>
 </div>
  <div id="register">
  </div>
</body> 
```

* * *

```
var count = 1;
$(function(){
    $('.add-member').on("click", function(e){
        e.preventDefault(e);        
        var grab = $('.grab-me')
                .clone()
                .removeClass('grab-me')
                .appendTo('#register')
        .find('p.count').html('This is fieldset '+count);
      count += 1;
    });
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:55:29.113

添加跨度：

```
 <p>This is fieldset <span>1</span></p> 

   var count = 1;
      $(function(){
        $('.add-member').on("click", function(e){
            e.preventDefault(e);
            count += 1;
            var grab = $('.grab-me')
                    .clone()
                    .removeClass('grab-me')
                    .appendTo('#register');
            $('.span').html('count');

        });
     }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:18:15.067

```
var count = 1;
$(function(){
    $('.add-member').live("click", function(e){
        e.preventDefault(e);
        count += 1;
        var grab = $('.grab-me').clone();
        $(grab p).html('This is fieldset '+count).appendTo('#register');
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T14:24:22.873

# 小提琴：http: [//jsfiddle.net/howderek/tzbgA/2/](http://jsfiddle.net/howderek/tzbgA/2/)

这是一个使用 8 行代码的版本：

### 代码（Javascript）

```
var count = 1,
    html = ' <p>This is fieldset #</p><input name="foo[]"/> <input name = "bar[]"/> <input name = "oth[]"/>';
$(function () {
    $('.add-member').live("click", function (e) {
        e.preventDefault(e);
        document.getElementById("register").innerHTML += html.replace("#",++count);
    });
}); 
```

# svn - 在 svn 下保持两条非常接近但独立的开发线？

> ID：15340277
> 
> 赞同：5
> 
> 时间：2013-03-11T13:49:41.047
> 
> 标签：svn, version-control, release-management

我们的项目在 svn 下，一切进展顺利。最近一个大客户要求我们为他们做一些非常具体的定制，这些定制需要编码和东​​西（不能使用配置或部署来完成）。我们决定维持两条独立的发展路线：

*   `trunk`分支是我们为普通客户部署的标准版本
*   该`arsh`分支是针对该客户的，并且正在与正在发生的事情分开进行持续开发`trunk`

现在的事情是`arsh`应该从 countinually 接收更新`trunk`，有时实现的功能`arsh`在`trunk`. 这种关系有点双向，但一个方向非常普遍（从`trunk`到`arsh`），而另一个是偶尔的。

最好的方法是什么？工作流程 ？最佳实践？见解？

编辑：我们使用 PHP 5.3、MySQL、Apache 和 Linux。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T14:28:45.567

最佳实践？`#ifdef`（或由运行时配置或任何其他编译时或运行时条件有条件地包含或有条件地注入相同接口的单独实现）！

在任何版本控制系统中，将并行版本作为分支来维护是一件很痛苦的事情。最好使用适当的条件编译或运行时配置技术来维护并行版本。

请记住，如果将分支 A 合并到分支 B，然后将分支 B 合并回分支 A，则两个分支将完全相同。这是 3 路合并的内在属性。这正是你想要的功能分支，但它完全不适合为不同的客户维护并行版本。

为了为不同的客户保留版本，请改用条件编译。

*   在面向对象的代码中，您通常可以拥有具有通用逻辑的基类和具有特定于该变体的逻辑的每个变体自定义派生类，这些逻辑要么有条件地包含在项目中，要么有条件地实例化。
*   大多数编程语言都支持某种形式的条件编译，Java 是一个明显的例外。

这种方法允许每个人通过对所有变体运行测试或由持续集成服务器构建和测试所有变体来立即检查他们没有破坏任何一个变体的任何功能。

你提到PHP。那里没有编译步骤，因此配置将只是运行时。我可能会创建一个包含特定于客户的覆盖的目录，这些覆盖将有条件地包含在适当的模板中。

注意：我目前正在开发一个 C++ 项目，该项目以这种方式为 20 多个客户定制，并且可以很好地扩展。我们没有每个客户的确切代码，而是我们有一组可选的功能，并且不同的子集被运送给不同的客户。这使得测试所有特性变得更容易一些，因为我们可以构建一个最大的变体并对其进行测试。当您发展到大量功能时，这会有所帮助，特别是如果您的项目需要很长时间才能构建（我们的持续集成构建运行大约一个小时，每晚构建 8 小时，构建所有客户变体需要超过一整天）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:39:09.497

您没有提及您的语言，但假设您使用的是面向对象的语言，请考虑将您的自定义功能保留在相同接口和/或基类的单独实现中，并在运行时使用工厂来决定要执行哪个实现跑。例如（在 C# 中）：

```
public interface IProcessor {
    void ProcessFile(string fileName);
}

public abstract class BaseProcessor : IProcessor {
    void IProcessor.ProcessFile(string fileName) {

        // Do shared stuff here like logging, validation, etc.

        ProcessFileForClient(fileName);
    }
    protected abstract void ProcessFileForClient(string fileName);
}

public class NormalProcessor : BaseProcessor {
    protected override void ProcessFileForClient(string fileName) {
        // Do your normal routine here
    }
}

public class AcmeProcessor : BaseProcessor {
    protected override void ProcessFileForClient(string fileName) {
        // Do your custom stuff here
    }
}

// This can be as complex as you need - you should probably use an IoC/DI framework,
// but this is a simple example.
public static class ProcessorFactory {
    public static IProcessor GetProcessor(string clientCode) {
        switch (clientCode) {
            case "Acme": return new AcmeProcessor();
            default: return new NormalProcessor();
        }
    }
} 
```

这种方法的好处是使您的自定义代码不会妨碍您的正常代码，同时仍然允许您在该基类中尽可能多地共享。

# php - 如何解释“if”语句中的多个表达式？

> ID：15340278
> 
> 赞同：1
> 
> 时间：2013-03-11T13:49:42.827
> 
> 标签：php, if-statement, expression

基本上

这是：

```
<?PHP if (false && crazyFunction()) : ?> 
```

与以下相同：

```
<?PHP if (false) : ?>
    <?PHP if (crazyFunction()) : ?> 
```

如果在第一个示例中评估 FALSE 是否仍会继续评估“crazyFunction”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:54:00.073

`&&`操作员是一个循环操作员，这意味着一旦知道结果将是错误的，它将立即停止。

这意味着如果左侧部分的计算结果为假，它将停止并返回假。`crazyFunction()`在这个例子中永远不会被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:59:25.490

一旦知道布尔表达式的值，就不再执行它。

请注意老式 mysql 连接中的这个（已弃用）示例：

```
$db=mysql_connect_db('...') or die('Database error'); 
```

如果在第一部分之后`mysql_connect`返回的东西不是`FALSE`0`NULL`等，它不会执行 this `die()`。

（不管这是否正确使用`mysql_*`函数）

# python - python递归返回无类型

> ID：15340281
> 
> 赞同：4
> 
> 时间：2013-03-11T13:49:44.330
> 
> 标签：python, recursion

我不明白，我怎样才能返回 a`List`而不是 a `None`？

```
class foo():
    def recursion(aList):
        if isGoal(aList[-1]):
            return aList
        for item in anotherList:
            newList = list(aList)
            newList.append(item)
            recursion(newList)

    someList = [0]
    return recursion(someList) 
```

基本上代码是记录所有路径（从 0 开始）。谁先得到 100 将被退回。`isGoal()`是检查路径的最后一项是否为 100。并且`anotherList`是一个随机数的小列表（从 0 到 100）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-11T14:10:26.517

## `return`陈述

当我第一次开始学习递归时，这个问题实际上花了我很长时间才掌握。

在处理 Python 函数/方法时要记住的一件事是，无论如何它们**总是一个值。** `return`所以假设你忘记`return`在你的函数/方法的主体中声明一个语句，Python 会为你处理它并`return None`在它的最后做。

这意味着，如果您在函数体中搞砸并放错了`return`或省略了它，而不是预期的返回，您`print type(messed_up_function())`将打印`NoneType`。

## 递归修复

现在考虑到这一点，在处理递归时，首先要确保除了**归纳案例之外还有一个****基本案例**，即防止无限递归循环。

 **接下来，确保你在两种情况下都返回，所以像这样：

```
def recur(val):
    """
    takes a string
    returns it back-to-front
    """
    assert type(val) == str
    # the base case
    if len(val) == 1:
        return val
    # the inductive case
    else:
        return val[-1] + recur(val[:-1]) # reverses a string char by char 
```

所以它的作用是它总是`return`s 并且是 100% 无限递归证明，因为它有一个有效的基本情况，并且在每个归纳步骤中都有一个递减的长度。

## Stack Viewer 调试递归函数

`recur('big')`如果我们在基本情况开始时使用添加的内容运行`assert False`，我们将具有以下堆栈结构：

![范围](../Images/734ba8f9e99a0021cff89d4a59451544.png)

从中我们可以看到，在每一个递归步骤中，我们都有`val`，这是这个函数的唯一参数，它越来越小，直到`len(val) == 1`它到达，然后它到达最终的返回，或者在这种情况下`assert False`。所以这只是调试递归函数/方法的一种方便方法。在[IDLE](http://docs.python.org/2/library/idle.html)中，您可以通过调用`Debug > Stack Viewer`shell 来访问这样的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:50:57.007

功能是这样的：

```
def recursion(aList):
    if isGoal(aList[-1]):
        return aList
    for item in anotherList():
        newList = list(aList)
        newList.append(item)
        recursion(newList) # here you ignore what recursion returns
    # when execution reaches this point, nothing is returned 
```

如果执行到达我添加的注释，则在 for 循环完成后，函数退出并且不返回任何内容。并且当您在没有执行`return`语句的情况下退出函数时，`None`返回。您必须确保从递归函数返回某些内容。

我无法就如何重写该函数向您提供建议，因为我不知道它要做什么。对我来说，它需要如何改变远非显而易见。但是，我可以完全自信地说，你必须回报一些东西！**

# linux - Tomcat7 绑定到一个 shell

> ID：15340286
> 
> 赞同：0
> 
> 时间：2013-03-11T13:50:03.583
> 
> 标签：linux, tomcat, ubuntu, startup

*   当我的 ubuntu 服务器启动时，tomcat7 不运行（我无法打开 localhost:8080）
*   当我 ssh 进入我的服务器时，我可以打开 localhost:8080
*   当我关闭我的 ssh 连接时，tomcat 再次停止工作

我在 init.d 中有这个启动脚本：

```
export JAVA_HOME=/usr/lib/jvm/java-7-oracle
export CATALINA_HOME=/home/knowroaming/apache-tomcat-7.0.34
/etc/init.d/tomcat7.sh start 
```

我在 /etc/（rc1.d 到 rc5.d）目录中也有这个脚本的符号链接。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:00:47.620

以下内容来自 howtogeek.com，与 tomcat 6 相关，但我已将说明与 tomcat7 一起使用

[http://www.howtogeek.com/howto/linux/installing-tomcat-6-on-ubuntu/](http://www.howtogeek.com/howto/linux/installing-tomcat-6-on-ubuntu/)

自动启动

要让tomcat在我们开机时自动启动，可以添加一个脚本让它自动启动和关机。

```
sudo vi /etc/init.d/tomcat 
```

现在粘贴以下内容：

```
# Tomcat auto-start
#
# description: Auto-starts tomcat
# processname: tomcat
# pidfile: /var/run/tomcat.pid

export JAVA_HOME=/usr/lib/jvm/java-6-sun

case $1 in
start)
        sh /usr/local/tomcat/bin/startup.sh
        ;;
stop)  
        sh /usr/local/tomcat/bin/shutdown.sh
        ;;
restart)
        sh /usr/local/tomcat/bin/shutdown.sh
        sh /usr/local/tomcat/bin/startup.sh
        ;;
esac   
exit 0 
```

您需要通过运行 chmod 命令使脚本可执行：

```
sudo chmod 755 /etc/init.d/tomcat 
```

最后一步实际上是使用符号链接将此脚本链接到启动文件夹。执行这两个命令，我们就可以上路了。

```
sudo ln -s /etc/init.d/tomcat /etc/rc1.d/K99tomcat
sudo ln -s /etc/init.d/tomcat /etc/rc2.d/S99tomcat 
```

Tomcat 现在应该已完全安装并可以运行。

# magento - Magento 中的“访客”和“未登录”客户组有什么区别？

> ID：15340288
> 
> 赞同：0
> 
> 时间：2013-03-11T13:50:06.513
> 
> 标签：magento

Magento中以下客户群有什么区别：

```
Guest 
```

v

```
Not Logged In 
```

对我来说，这些都是一样的，但是什么时候使用？我相信这是我正在调查的错误的来源，因为他们都分别使用不同的客户组 ID 0 和 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:27:50.607

客户组只是一种对在商店注册或未登录（仅在未登录组的情况下）的客户进行分组的一种方式，用于分配税级和应用促销等事情。

NOT LOGGED IN 组是唯一可以应用于访客且无法编辑或删除的组。所有其他组的名称无关紧要，例如在创建税收规则时如何使用该组，因此如果您有一个名为 Guest 的组，它是一个已创建的自定义组，并且只能应用于登录的客户（唯一Magento 自己创建的其他默认组称为 General）。

请参阅此处了解更多信息：

[http://www.magentocommerce.com/wiki/welcome_to_the_magento_user_s_guide/chapter_6#creating_customer_groups](http://www.magentocommerce.com/wiki/welcome_to_the_magento_user_s_guide/chapter_6#creating_customer_groups)

# java - JSP request.getParameter(string) 返回 null

> ID：15340294
> 
> 赞同：2
> 
> 时间：2013-03-11T13:50:25.057
> 
> 标签：java, forms, jsp

我在我的 index.jsp 中使用它：

```
<FORM  enctype="multipart/form-data" action="saveFile.jsp" method="POST">
Choose the file To Upload:<br>
<INPUT name="Filename" placeholder="Name to give your file"/>
<INPUT name="File" type="file" accept ="image/jpeg"/>
<INPUT TYPE="submit" VALUE="Send File" />      
</FORM> 
```

在 saveFile.jsp 中，字符串名称应该使用 request.getParameter("Filename") 从输入字段中获取值，但它返回的值为 null；

```
String name = request.getParameter("Filename"); 
```

我知道请求已发送，因为文件确实已交付给我，但我无法弄清楚为什么我的这部分代码会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:54:59.840

您尚未为文本字段设置任何值

```
<INPUT name="Filename" placeholder="Name to give your file" value="this should come"/> 
```

现在使用

```
String name = request.getParameter("Filename"); 
```

# asp.net - 在 IIS 上发布的 Asp.net 报表查看器

> ID：15340295
> 
> 赞同：1
> 
> 时间：2013-03-11T13:50:28.300
> 
> 标签：asp.net, report, infragistics

我在 Asp.net 网络表单应用程序上创建了一个网页。在我的项目中添加了一个 Silverlight 应用程序后，我在我的项目中添加了一个 Infragistics ReportViewer，在 Silverlight 应用程序上。我将展示我的 reprt 查看器。当我使用 F5 运行项目时，我的项目在 Visual Studio 上运行成功。现在我将在 IIS 上发布我的项目。我在文件夹 WebSite1 中发布了我的项目。

这是我的代码（silverligt 属性代码）：

```
<ig:XamReportViewer HorizontalAlignment="Left" Height="280" Margin="10,10,0,0" VerticalAlignment="Top" Width="380">
            <ig:XamReportViewer.RenderSettings>
                <ig:ServerRenderSettings DefinitionUri="/ornek;component/Report1.igr" ServiceEndpointUri="http://localhost:52237/ReportService1.svc/soapAddress"/>
            </ig:XamReportViewer.RenderSettings>
        </ig:XamReportViewer> 
```

我的报告服务在 IIS 上使用此 url 运行：

```
http://hacegan/WebSite1/ReportService1.svc 
```

所以刷新了我的项目代码：

```
<ig:XamReportViewer HorizontalAlignment="Left" Height="280" Margin="10,10,0,0" VerticalAlignment="Top" Width="380">
            <ig:XamReportViewer.RenderSettings>
                <ig:ServerRenderSettings DefinitionUri="/ornek;component/Report1.igr" ServiceEndpointUri="http://hacegan/WebSite1/ReportService1.svc/soapAddress"/>
            </ig:XamReportViewer.RenderSettings>
        </ig:XamReportViewer> 
```

但是，当我访问我的页面时，silverligt 应用程序出现错误：

无法与报表服务器建立连接

我能做什么或必须写什么到这一行

```
<ig:ServerRenderSettings DefinitionUri="/ornek;component/Report1.igr" ServiceEndpointUri="http://localhost:52237/ReportService1.svc/soapAddress"/> 
```

# gsp - 我如何在框架集标签中调用 GSP 文件

> ID：15340297
> 
> 赞同：1
> 
> 时间：2013-03-11T13:50:34.820
> 
> 标签：gsp, grails-2.0, frameset

我有三个 groovy 服务器页面，我想在框架集标签中显示它们的内容。

```
<frameset rows="100%,*" onload="init()" onunload="terminate()">
<frame id="DisplayFrame1" name="DisplayFrame1" src="course1part1.gsp" />
<frame id="DisplayFrame2" name="DisplayFrame2" src="course1part2.gsp" />
<frame id="DisplayFrame3" name="DisplayFrame3" src="course1part3.gsp" />
<frame id="DummyFrame" name="DummyFrame" src="about:blank" /> 
```

当我运行应用程序时，出现此错误：

> HTTP 状态 404 - 未找到“/course1part1.gsp”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-14T12:04:04.197

您应该使用[createLink](http://grails.org/doc/latest/ref/Tags/createLink.html)生成正确的 URL，而不是直接使用 GSP 页面的名称。

# c++ - 无法在 C++ 中读取带有括号字符的二进制文件

> ID：15340299
> 
> 赞同：0
> 
> 时间：2013-03-11T13:50:45.530
> 
> 标签：c++

我有读取文件并检查其内容的功能。该文件包含一些二进制内容以及非字母字符，如`()`、`=`、`divided by symbol`等。执行读取的函数是：

```
int FindMyWord(const char *fileName)
{
    ifstream myFile (fileName);
    if(!myFile)
        return false;
    string wordSearch = "MyWord";
    string line;
    int result = 0;
    while(getline(myFile, line))
    {
        if(line.find(wordSearch) != string::npos)
            result++;
    }
    //if(!myFile.eof() || !myFile)
    if(!myFile)
        printf("Problem Reading the File: %s\n", (const char *)fileName);

    myFile.close();
    return result;
} 
```

我有这两个问题：

1.  如果一行包含二进制字符，那么它不会读取完整的行，只是读取第一个单词（至少这是我通过在 VS2010 中打开文件所观察到的）。
2.  当它遇到行首的字符时`(`，while循环终止并`printf()`打印。

如果`string::getline()`无法读取这些字符，那么解决方案是什么？谢谢你。

**更新**：文件中一些二进制数据的图像：

![在此处输入图像描述](../Images/771999168c3bcb224836cfc49c5870ab.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:48:21.003

文本输入流不应在括号字符上失败。

如果您确实需要二进制流，请使用 ifstream(filename, std::ios::binary)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:55:58.573

阅读[cppreference.com 上的 std::getline 文档](http://en.cppreference.com/w/cpp/string/basic_string/getline)。如果您有任何奇怪的行为，您应该检查`failbit`直播。

# android - 围绕 X 旋转会影响滚动。如何消除这种情况？

> ID：15340300
> 
> 赞同：2
> 
> 时间：2013-03-11T13:50:47.660
> 
> 标签：android, sensors, pitch, rotational-matrices

我正在使用 android 的 TYPE_ROTATION_VECTOR 传感器来确定围绕 x、y 和 z 的旋转，并以某种方式在我的应用程序中使用这些度量。但是当我围绕 X 轴旋转手机时，滚动值（围绕 Y 轴旋转）也会发生变化。我不希望那样。当我绕 X 旋转时，如何忽略滚动的变化？这是我的一段代码

```
private final float[] mRotationMatrix = new float[16];
private float[] orientationVals = new float[3];

if (event.sensor.getType() == Sensor.TYPE_ROTATION_VECTOR) {

             SensorManager.getRotationMatrixFromVector(
                     mRotationMatrix , event.values);
             SensorManager.getOrientation(mRotationMatrix, orientationVals);

             azimuthVal =  (Math.round((Math.toDegrees(orientationVals[0]))*100.0)/100.0);
             pitchVal= (Math.round((Math.toDegrees(orientationVals[1]))*100.0)/100.0);
             rollVal = (Math.round((Math.toDegrees(orientationVals[2]))*100.0)/100.0);
             } 
```

# linux - 如何将多个 IP 地址映射到单个服务器的文件

> ID：15340302
> 
> 赞同：0
> 
> 时间：2013-03-11T13:50:50.930
> 
> 标签：linux, dns, ip, server-response, server-monitoring

我有一个来自 godaddy 的专用 linux 主机。我还购买了两个网站域名。假设它是 abc.com 和 xyz.com。

xyz.com 已设置到服务器。

我想获取 abc.com 的流量到 xyz.com 的子文件夹，但链接必须保留为 abc.com。即 abc.com/index.html 必须在 xyz.com/abc/index.html 路径中。但是 xyz.com/abc/index.html 必须返回 404 而 abc.com/index.html 必须返回正确的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:06:53.433

如果您使用`apache`with `mod_proxy`enabled，配置 a`ReverseProxy`将完成这项工作。`abc.com`这是在域的 apache 配置中添加的指令示例：

```
 ProxyPass / http://xyz.com/subfoder
 ProxyPassReverse / http://xyz.com/subfolder 
```

这些会将所有请求转发到[http://xyz.com/subfoder](http://xyz.com/subfoder) `

还可以查看[apache 的文档](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypass)

# php - 使用子级排序对多维数组进行排序

> ID：15340304
> 
> 赞同：0
> 
> 时间：2013-03-11T13:50:53.853
> 
> 标签：php, arrays, cakephp, multidimensional-array, usort

我在 CakePHP 框架内工作，并且有以下多维数组，我需要按值排序。我正在使用`usort`，但无法弄清楚如何按`[ForumPost]`.

这是数组：

```
Array
( 
    [0] => Array
        (
            [ForumPost] => Array
                (
                    [id] => 174
                    [forum_id] => 81
                    [user_id] => 39
                    [title] => A test post
    [1] => Array
        (
            [ForumPost] => Array
                (
                    [id] => 64
                    [forum_id] => 208
                    [user_id] => 36
                    [title] => B test post
... etc 
```

我的功能和调用是：

```
usort($array, array("ForumSearchesController", "cmp"));

function cmp($a, $b) {
    return $a['ForumPost']['title'] - $b['ForumPost']['title'];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:54:14.720

您不能简单地相互减去标题（字符串）并期望得到有意义的结果。字符串的等价物是调用函数[`strcmp`](http://www.php.net/manual/en/function.strcmp.php)：

```
function cmp($a, $b) {
    return strcmp($a['ForumPost']['title'], $b['ForumPost']['title']);
} 
```

# php - AJAX 加载的页面给出了空的 $_GET

> ID：15340310
> 
> 赞同：0
> 
> 时间：2013-03-11T13:51:04.947
> 
> 标签：php, javascript, jquery, ajax

通过 AJAX 方法加载的页面。index.php 是基本页面，profile.php 是加载的页面

jQuery：（“发布”与 HTML 请求无关）

```
$('<a/>', {href: '?userID='+post['userID']+'#profile'}).text(post['firstName']+' '+post['lastName']) 
```

HTML：

```
<a href="?userID=1#profile">Firstname Lastname</a> 
```

原始网址（点击后）

```
http://########/#####/index.php?userID=1#home 
```

profile.php 上的 $_GET print_r：

```
Array () 
```

按要求; ajax 加载 javascript (index.php):

```
 //AJAX page loading

        $(document).ready(function(){

            //Default page
            if(!window.location.hash)
                window.location.hash = '#home';

            //Check page reference
            checkURL();

            //Update nav
            $('#main-nav li').on("click", function (){
                $('#main-nav li').removeClass('active');
                $(this).addClass('active');

                //Assign each link a new onclick event, using their own hash as a parameter
                checkURL(this.hash);    
            });

            //check for a change in the URL every 250 ms to detect if the history buttons have been used
            setInterval("checkURL()",250);  
        });

        //Store the current URL hash
        var lasturl=""; 

        function checkURL(hash){
            if(!hash)

                //if no parameter is provided, use the hash value from the current address
                hash=window.location.hash;
            if(hash != lasturl) { 

                //If hash changed, update current hash and load new one
                lasturl=hash;
                loadPage(hash);
            }

        }

        function loadPage(url) {

            //Adjust page name
            url=url.replace('#','');   
            url=url+'.php';

            //AJAX load page contents in to main content div
            $('#content').load(url);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T01:52:37.617

解决方案：

1.  在根页面 (index.php) 上创建全局存储。
2.  在存储中设置变量而不是使用 $_GET。
3.  从子页面访问变量。

例子：

index.php (Javascript)

```
if (typeof(window.storage) === 'undefined') {
    window.storagePV = {};
}

$('#nav-profile').click(function() {
    window.storage.userID = <?php echo "$_SESSION[userID]"; ?>;
}); 
```

访问 userID 以查看用户的个人资料页面

```
var userID = window.storage.userID 
```

# java - 套接字中的 UnknownHostException

> ID：15340311
> 
> 赞同：0
> 
> 时间：2013-03-11T13:51:05.630
> 
> 标签：java, sockets, runtime-error

我正在制作一个从网站读取 html 并从 html 中提取一些内容的程序。当我尝试启动我的套接字时，我收到 UnknownHostException 错误。当我调用 InetAdress 方法时也会发生这种情况。我尝试了多种方法来做到这一点，包括不使用 inetaddress 方法，但它没有任何帮助。这是代码的样子

```
try {
    InetAddress add = InetAddress.getByName(text);
} catch (UnknownHostException e1) { 

}

try {
    Socket socket = new Socket(text,80); 
    PrintWriter out = new PrintWriter(socket.getOutputStream()); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:05:28.003

确保您仅传递主机名，而不是您尝试获取的资源的完整路径。例如，在您的评论中您写道`en.wikipedia.org/wiki/The_Elder_Scrolls_IV:_Oblivion`；要确定您`Socket`应该连接的主机，只需传递`en.wikipedia.org`给该`InetAddress.getByName()`方法。

# php - Laravel Eloquent：计数项目模型关系

> ID：15340316
> 
> 赞同：2
> 
> 时间：2013-03-11T13:51:28.033
> 
> 标签：php, orm, laravel, eloquent

我正在使用 Laravel 和 Eloquent 类。我有三个模型。

城市.php：

```
public function itineraries() {
    return $this->has_many('Itinerary', 'city_id');
} 
```

行程.php：

```
public function city()
    return $this->belongs_to('City');
}

public function type()
{
    return $this->belongs_to('Itinerarytype');
} 
```

行程类型.php：

```
public function itineraries()
{
    return $this->has_many('Itinerary');
} 
```

如您所见，一个城市有许多行程，一个行程属于一个城市和一个行程类型。itinerarytype 模型有许多行程。

使用该`with()`方法是否可以获得分组为行程类型的行程计数？

例如，这是我到目前为止所拥有的：

```
$city = City::with(array('itineraries'))->where_slug($city_slug)->first(); 
```

这得到了拥有那个蛞蝓的城市和所有它的行程。

我想得到一个类似的列表：（其中文本是行程类型，数字是计数）

> ```
> History: 10
> Entertainment: 5
> Outdoor: 6
> ... 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:21:37.550

您必须使用 join 和一些原始 sql 才能以高效的方式实现这一目标：

```
$city = City::where_slug($slug)->first();
$types = ItineraryType::join('itineraries', 'itineraries.type_id', '=', 'itenerary_types.id')
    ->where('itineraries.city_id', '=', $city->id)
    ->group_by('itinerary_types.id')
    ->order_by('itinerary_count')
    ->get(array('itinerary_types.*', DB::raw('COUNT(itineraries.id) as itinerary_count')));

foreach ($types as $type) {
    print($type->label . ': ' . $type->itinerary_count);
} 
```

# c# - Window_Loaded 事件线程错误中的后台线程

> ID：15340320
> 
> 赞同：1
> 
> 时间：2013-03-11T13:51:34.523
> 
> 标签：c#, wpf, multithreading, backgroundworker

我必须加载一个窗口，并且`Window_Loaded`必须加载一些变量并将其显示在 Window 上。

```
private void Window_Loaded_1(object sender, RoutedEventArgs e)
{         
    BackgroundWorker worker = new BackgroundWorker();

    worker.DoWork += (o, ea) =>
    {
        try
        {
            //code to download some variables which will show on UI of Window Loading
        }
        catch (Exception ex)
        {
            //The calling thread cannot access this object because a different thread owns it.
        }
    };

    worker.RunWorkerCompleted += (o, ea) =>
    {

    };

    worker.RunWorkerAsync();
} 
```

但我得到一个线程异常。有什么方法可以在窗口中显示变量值`DoWork`吗`Backgroundworker`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T13:58:30.980

您应该在该`DoWork`部分中检索您需要的数据，然后将其分配给`ea.Result`，这将使其在该`RunWorkerCompleted`部分中可用。

在该`RunWorkerCompleted`部分中，您可以`ea.Result`再次访问，将对象转换回您在 中分配的任何类型`DoWork`，并根据需要将数据应用到您的 UI 控件。

```
worker.DoWork += (o, ea) =>
{
    ea.Result = GetMyData();
};

worker.RunWorkerCompleted += (o, ea) =>
{
    var myData = (myDataType)ea.Result;

    // Assign myData as needed to UI components...
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:59:46.510

您需要让[Dispatcher](http://msdn.microsoft.com/en-us/library/ms615907.aspx)安排您的代码在 UI 线程上执行并编组必要的参数。尝试这样的事情：

```
Dispatcher.Invoke(
    new Action<string>(() =>
    {
        // Access UI from here
    }),
    DispatcherPriority.Normal
); 
```

虽然这（或类似的东西，因为这是记事本代码）可以解决您的问题，但您应该考虑在您的实现中使用 MVVM 模式。然后您将能够对 ViewModel 进行更改（仅更新数据）并且 UI 将相应更新。

# azure - 我可以从 ACS 获取 JSON 格式的数据吗？

> ID：15340324
> 
> 赞同：0
> 
> 时间：2013-03-11T13:51:38.630
> 
> 标签：azure, acs

当我开始阅读 ACS 2.0 文档时，我意识到 ACS 集成了基于声明的身份验证。所以如果我不想在我的应用程序中使用声明，我应该如何获取 SWT 或 JSON 格式的数据？

有没有人有一个如何实现这一目标的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:01:14.623

您配置信赖方的[令牌格式](http://msdn.microsoft.com/en-us/library/windowsazure/gg185906.aspx#BKMK_3)以指定 ACS 颁发的令牌格式。我建议您查看ACS 中[支持的协议](http://msdn.microsoft.com/en-us/library/windowsazure/gg185948.aspx)，因为如果您计划将您的应用程序（依赖方）与 ACS 集成，您将利用这些协议之一。[ACS 中支持的令牌格式](http://msdn.microsoft.com/en-us/library/windowsazure/gg185950.aspx)涵盖了令牌格式的差异，并帮助您确定哪个是您的依赖方的最佳选择。

无论您选择发布何种令牌格式（SAML、JWT、SWT），您的依赖方都将负责验证 Web 令牌并在做出授权决策时提取声明的声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:48:56.850

最简单的解决方案：切换 ACS 以使用 SWT 令牌，配置您的应用程序以保存引导令牌并以您的方式使用它们 web.config：

```
<system.identityModel>
    <identityConfiguration saveBootstrapContext="true"> 
```

应用：

```
var claimIdentity = Thread.CurrentPrincipal.Identity as ClaimsIdentity;
if (claimIdentity == null)
{
    return;
}

BootstrapContext bootstrapContext = claimIdentity.BootstrapContext as BootstrapContext;
SecurityToken token = null;
//you must configure SWT token handler in web.config or set up 'em manually like
SecurityTokenHandlerCollection handlers = FederatedAuthentication.FederationConfiguration.IdentityConfiguration.SecurityTokenHandlers;
//here is a bug in 4.5 cause a bootstrapContext.SecurityToken disappear sometimes. 
//http://blogs.msdn.com/b/vbertocci/archive/2012/11/30/using-the-bootstrapcontext-property-in-net-4-5.aspx
if (bootstrapContext.SecurityToken != null)
    {
        token = bootstrapContext.SecurityToken;
    }
else if (!string.IsNullOrEmpty(bootstrapContext.Token))
    {
        token = handlers.ReadToken(new XmlTextReader(new StringReader(bootstrapContext.Token)));
    } 
```

# c# - 在会话中存储 Linq 查询

> ID：15340327
> 
> 赞同：0
> 
> 时间：2013-03-11T13:51:44.147
> 
> 标签：c#, asp.net, linq

我正在尝试将 Query 的结果存储在 a 中`Session`以传递给`PageIndexChanging`事件。

当我运行查询时，我得到了异常`cannot access disposed object`。

当我绑定网格时，我将查询添加到`Session`

```
pnl_results.Visible = true;
ResultsGridView.DataSource = result;
ResultsGridView.DataBind();

Session["ResultQuery"] = result; 
```

然后我尝试在`PageIndexChanging`活动中使用它

```
protected void ResultsGridView_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    var gridResult = Session["ResultQuery"].ToString();
    ResultsGridView.PageIndex = e.NewPageIndex;
    ResultsGridView.DataSource = gridResult;
    ResultsGridView.DataBind();
} 
```

如何设置`Session`以便我可以在`PageIndexChanging`活动中使用它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:54:56.423

保留`result.ToList()`而不是`result`.

当您存储 LINQ 查询的输出时，您实际上是在存储`IEnumerable<T>`or `IQueryable<T>`，这只是应该运行的查询的*定义。*每次迭代结果时，整个查询都会运行，因此底层数据（可能是 EntityFramework 数据上下文）需要可用，但可能不可用。通过调用`ToList()`结果，您可以*实现*查询并缓存结果。现在你有一个`List<T>`对原始查询一无所知的。它只是结果的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T13:54:36.053

我认为错误是您将 IQueryable 存储在会话中而不是实际结果中，请在存储结果之前尝试执行 ToList() 或类似操作；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:10:10.877

`(T)Session["ResultQuery"]`通用喜欢使用请。

样品使用；

```
protected void ResultsGridView_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    // var gridResult = Session["ResultQuery"].ToString();
    var gridResult = (Product)Session["ResultQuery"];
    ResultsGridView.PageIndex = e.NewPageIndex;
    ResultsGridView.DataSource = gridResult;
    ResultsGridView.DataBind();
} 
```

# http - HTTP 307 重定向在 firefox 中不起作用

> ID：15340328
> 
> 赞同：0
> 
> 时间：2013-03-11T13:51:44.320
> 
> 标签：http, firefox, redirect

我们有一个用 C 编写的自定义网络服务器。

当浏览器访问页面[http://mydomain.com:30001/index.html](http://mydomain.com:30001/index.html)时，

我们的网络服务器会将浏览器重定向到 mydomain.com:30001/login.html，通过向浏览器发送 http 307 响应，然后浏览器将访问登录 url。

这在 IE 8 和 Chrome 中运行良好。

但是在firefox(18+)中，访问页面[http://mydomain.com:30001/index.html](http://mydomain.com:30001/index.html)时，

浏览器无法加载页面（/index.html 或 /login.html），并且似乎永远处于加载过程中。（并且萤火虫>网络面板什么也没显示。）

我也试过火狐设置

工具>选项>高级>常规：辅助功能：[]“当网站尝试重定向或重新加载页面时警告我”，

但没有任何效果，也没有任何改变。

所以我想知道为什么 Firefox 的行为不同或者还有其他原因。

更新：这是在 wireshark 中捕获的 firefox HTTP 部分

1.REQUEST（在浏览器地址栏访问[http://mydomain.com:30001/index.html时）](http://mydomain.com:30001/index.html)

> GET /index.html HTTP/1.1
> 主机：mydomain.com:30001
> 用户代理：Mozilla/5.0 (Windows NT 6.1; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0
> 接受：text/html,application/xhtml+xml ,application/xml;q=0.9, */* ;q=0.8
> Accept-Language: zh-cn,zh;q=0.8,en-us;q=0.5,en;q=0.3
> Accept-Encoding: gzip, deflate
> DNT: 1
> 连接：保持活动

2.响应

> HTTP/1.1 307 临时重定向
> 连接：keep-alive
> 位置：/login.html

就是这样，Firefox 不会通过另一个请求获取 /login.html。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T12:27:42.747

通过比较来自其他服务器的响应，它看起来像通过添加

> 内容长度：0

在响应头中解决了这个问题。谢谢。

根据协议，如果没有给出 Content-Length，则 Content-Length 可以通过关闭连接来确定。

我的原始响应没有提供 Content-Length，意味着浏览器正在等待此响应的传输结束以知道正确的长度，但设置 Connection: keep-alive 不会结束此连接。

我猜 IE 或 Chrome 在知道它是 307 重定向后会立即开始重定向处理，而 firefox 在完成读取此响应之前不会这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:29:50.393

这是一个适用于 Firefox 的 307 测试用例：http: [//greenbytes.de/tech/tc/httpredirects/#t307loc](http://greenbytes.de/tech/tc/httpredirects/#t307loc)。你必须找出你的服务器有什么不同。

# zend-framework2 - 在 ZF2 中，插入后获取最后一个插入 id，而不使用 TableGateway

> ID：15340331
> 
> 赞同：4
> 
> 时间：2013-03-11T13:51:49.373
> 
> 标签：zend-framework2

执行插入语句后，我需要最后一个插入 ID。现在我没有使用 TableGateway，所以我无法使用`$this->lastInsertValue`。如果我需要通过 Sql 对象而不是表网关对象使用 Insert 语句，还有哪些其他选项可用。

```
$objInsert = new Insert('name_master');
$objInsert->values(array( 'username' => $name,
                'price' => 0,
                'is_approval_needed' => 'n'
             ));

$sql = new Sql($this->adapter);

$result = $sql->prepareStatementForSqlObject($objInsert)->execute()->getAffectedRows(); 
```

由于我需要使用上一个插入的最后一个插入 id 在不同的表中执行多个插入语句，所以现在我想在我的模型的单个方法中执行它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T14:48:45.920

`Zend\Db\Adapter\Driver\DriverInterface`指定了一个`getLastGeneratedValue()`方法，所以大概这应该工作......

```
 $lastId = $this->adapter->getDriver()->getLastGeneratedValue(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-07T07:12:10.133

```
$dbAdapter = $this->tableGateway->adapter;
$lastId = $dbAdapter->getDriver()->getConnection()->getLastGeneratedValue(); 
```

# git - git请求主分支更改

> ID：15340342
> 
> 赞同：1
> 
> 时间：2013-03-11T13:52:23.397
> 
> 标签：git

假设我们有一群人在一个 git repo 中从事项目工作。他们每个人都在自己的分支上工作，然后他将主分支与自己的分支合并，依此类推。

是否可以禁止对 master 分支的任何直接更改（例如提交、合并），并发出类似更改此分支的请求，这将在团队的所有成员（或某个特定人员）接受后应用?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:30:05.237

如果你想在 GitHub 上发出推送请求，有几个选项：

1\. 首先你应该禁止推送到主分支（使用 git 钩子）并指定某人作为“主分支的市长”，有权推送到它和其他开发人员应向市长发送推送请求。因此，在这种情况下，每个想要推送到 master 分支的开发人员都可以使用`git format-patch`通过电子邮件将补丁发送给市长然后市长，使用`git am`可以将该补丁应用到 master 上。补丁也可以由`git diff`命令形成，并以文本格式或 *.patch 文件通过电子邮件发送。在这种情况下，市长可以使用`git apply`将 *.patch 文件应用到主分支。

2\. 您可以使用类似于 GitHub 的工具，例如[https://stackoverflow.com/questions/3943321/github-like-site-for-internal-use](https://stackoverflow.com/questions/3943321/github-like-site-for-internal-use)

希望这个答案对你有帮助:)

# c - 字符串，gets 和 do while

> ID：15340343
> 
> 赞同：0
> 
> 时间：2013-03-11T13:52:30.340
> 
> 标签：c, string, gets, openvms

我正在用 C 做一个练习，但是在 和我想重复 cicle（做 while）时遇到问题，事实上，如果我输入 1，程序会从顶部重新开始，但它不会停止在`gets(testo);`. 我尝试了很多方法来解决没有解决方案的错误，有人可以帮助我吗？

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

main(){
        int cch, cw, i, j, w, ord, f; //counter and index
        char testo[80];
        char alfa[50][25];
        char swap[25];

        do{     
                cch=0;
                cw=0;
                j=0;
                w=0;
                f=0;

                for(i=0;i<80;i++){
                        testo[i]='\0';
                }
                printf("Write the text:\n");
                gets(testo);

                //initialization 2d array
                for(i=0;i<50;i++){
                        for(j=0;j<25;j++){
                                alfa[i][j]='\0';
                        }
                }

                j=0;
                //Count word and characters
                if(testo[0]!='\0'){
                        cw=1;   
                        for(i=0;testo[i]!='\0';i++){
                                cch++;
                                if(testo[i]==' '){
                                        cw++;
                                        j++;
                                }
                        }
                }

                if(cch==j){
                        printf("You haven't written any word\n\n");
                }
                else{
                        //Don't count double space
                        for(i=0;i<cch;i++){
                                if(testo[i]==' ' && testo[i+1]==' '){
                                        cw--;
                                }
                        }

                        //Don't count as word if the text start with a space
                        if(testo[0]==' '){
                                cw--;
                                w--;
                        }

                        printf("\nThe text is composed by %d characters\n", cch);
                        printf("The text is composed by %d words\n", cw);

                        if(cw>0){
                                printf("\nUsed words:\n");
                                for(j=0;j<cch;j++){
                                        if(testo[j]==' ' && testo[j+1]==' '){
                                                //nothing to do        
                                        }
                                        else{
                                                if(testo[j]!=' '){
                                                        alfa[w][f]=testo[j];
                                                        f++;
                                                }
                                                else if(testo[j]=='\0'){
                                                        alfa[w][f]='\0';
                                                        f=0;
                                                        w=0;
                                                }
                                                else{
                                                        alfa[w][f]='\0';
                                                        w++;
                                                        f=0;
                                                }
                                        }
                                }

                                for(i=0;i<cw;i++){
                                        printf("%d> %s\n", i+1, &alfa[i]);
                                }

                                //order
                                f=1;
                                printf("\nWords used in alphabetical order:\n");
                                while(f==1){
                                        f=0;
                                        for(i=0;i<cw-1;i++){
                                                ord=strcmp(alfa[i],alfa[i+1]);
                                                if(ord>0){
                                                strcpy(swap,alfa[i]);
                                                strcpy(alfa[i],alfa[i+1]);
                                                strcpy(alfa[i+1],swap);
                                                f=1;
                                                }       
                                        }
                                }

                                for(i=0;i<cw;i++){
                                        printf("%d> %s\n", i+1, alfa[i]);
                                }
                        }
                }

        printf("\nDo you want write another text? (1=yes) -> ");
        scanf("%d", &j);

        }while(j==1);
} 
```

我知道目前作为代码并没有得到很好的优化并且还有其他错误，但是我在这方面遇到了问题。

谢谢你。

PS：代码在OpenVMS上测试

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T13:53:55.197

这是因为`scanf`循环结束时的调用没有读取换行符。相反，您的`gets`电话会读取此换行符。

一个简单的解决方案是在`scanf`格式字符串的末尾添加一个空格，如下所示：

```
scanf("%d ", &j); 
```

这将`scanf`跳过输入中的尾随空格。

另一种解决方案是在`fgets`之后添加一个额外的`scanf`，但不要在格式字符串中添加额外的空格：

```
scanf("%d", &j);
fgets(testo, sizeof(testo), stdin); 
```

或者使用`fgets`获取线路，然后使用`sscanf`提取答案：

```
fgets(testo, sizeof(testo), stdin);
sscanf(testo, "%d", &j); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:57:27.043

或者您可以尝试在 gets() 之前使用函数**flushall( )**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T14:11:52.287

您的第一个也是最明显的问题是左侧换行符。当你`scanf()`在这里使用时：

```
 printf("\nDo you want write another text? (1=yes) -> ");
    scanf("%d", &j);
} 
```

并且您使用`%d`特定格式，该功能正在寻找一个数字，当您输入一个数字时，您实际上是在输入一个数字和一个换行符

```
> 1<enter key>   // which means on stdin you're getting   '1''\n' 
```

`scanf()`只拿起 1 并离开你的`gets()`函数然后拿起的换行符，所以看起来它正在跳过输入。您需要做的就是使用该换行符，一种快速解决方法是使用它`getchar()`：

```
 printf("\nDo you want write another text? (1=yes) -> ");
    scanf("%d", &j);
    getchar();
} 
```

现在您的程序可以按预期运行。

* * *

其他注意事项：

1.  你的 main 应该真的返回一个`int`类型，即使它只是一个`return 0`
2.  你不应该使用`gets()`，即使手册[页](http://linux.die.net/man/3/gets)`gets()`说**从不使用gets()。**这通常是一个很好的迹象。;) 所以将该行替换为`fgets(testo, sizeof(testo), stdin);`
3.  你在这里错过了一个性能细节：`printf("\nThe text is composed by % characters\n", cch);`所以你得到了垃圾输出，那应该是`%d`

# excel - 使用 Excel，我将如何通过在单元格中输入数据来停止执行 vba 脚本

> ID：15340356
> 
> 赞同：0
> 
> 时间：2013-03-11T13:53:04.103
> 
> 标签：excel, vba

我有一些 vba 代码可以从其 Web 配置页面上的设备每分钟 4 次获取信息。

我需要从我在 C 列中放置一个 x 并继续直到我在页面下方的 D 列中放置一个 x 时发生这种情况。我有一个可以调用的函数，它将判断 X 是否在 d 中相对于 c 的正确位置。

我想做的是有一个按钮，上面写着好的，准备好扫描。然后让它在 c 中输入第一个值时启动，然后在输入 d 值时停止。我也很难想出一种在 VBA 脚本实际运行时输入值的方法。

有什么建议吗？谢谢。

这是检查列的代码。

```
Public Function BackgroundScan(MonitorSpreadsheet As Boolean) As Boolean
Dim LastStart As Integer
Dim LastStop As Integer

intDebug = 1

Select Case MonitorSpreadsheet
    Case True
        'We are actively testing
        If intDebug = 1 Then MsgBox "we ARE monitoring the spreadsheet."
        'Call scanning routine here
        'Get the status TestingInProgress
        LastStart = FindLastStartRow("SVQ")
        LastStop = FindLastStopRow("SVQ")
        If intDebug = 1 Then MsgBox "LastStart " & LastStart
        If intDebug = 1 Then MsgBox "LastStop " & LastStop
        Select Case LastStart
            Case Is < 20
                'We have not started.
                If intDebug = 1 Then MsgBox "We have not started."
                BackgroundScan = False
                'Loop around, and check again
            Case Else
                'ok we have started, now check to see if we have stopped.
                Select Case LastStop
                    Case Is < LastStart
                        '**** We ARE testing!!! ****
                        If intDebug = 1 Then MsgBox "We are testing, and haven't finished."
                        BackgroundScan = True
                    Case LastStart
                        'LastStart and LastStop are the same line, we have started AND finished
                        If intDebug = 1 Then MsgBox "We have started AND finished!"
                        BackgroundScan = False
                        'Loop around, and check again
                    Case Else
                        'We have finished testing, and the test spanned multiple rows
                        BackgroundScan = False
                        If intDebug = 1 Then MsgBox "We started on one line, and finished on another."
                End Select
        End Select
    Case False
        'we are not actively testing
        If intDebug = 1 Then MsgBox "We are NOT monitoring the spreadsheet."
        BackgroundScan = False
    Case Else
        MsgBox "Error: Boolean variable reports: " & MonitorSpreadsheet
        BackgroundScan = False
End Select 
```

结束功能

这是扫描网页的代码。

```
Private Sub CommandButton1_Click()
Dim Some         As String 'can't resist a good pun!
Dim intDelay     As Integer
Dim intMinDelay  As Integer
Dim i            As Integer
Dim s            As Integer
Dim RunStart     As Date
Dim WhichSVBeam As String
Dim lLen As Integer
Dim CurrentSVID As String
Dim CurrentBeamID As String
Dim PreviousSVID As String
Dim PreviousBeamID As String
Dim ColonLocation As Integer
'*******************************************************
'***             Test Continuous Button              ***
'***         Where n is specified in cell A6         ***
'*******************************************************

'grab the number of minutes between checking values
intMinDelay = GetValues("A7")

RunStart = Now

'Do this until the end of time, or the execution is halted.
Do 'uncomment do when we are sure the DoEvents will work as we expect
    WhichSVBeam = Scan_SVBeam(PreviousSVID, PreviousBeamID)

    If InStr(WhichSVBeam, ":") Then
        lLen = Len(WhichSVBeam)
        ColonLocation = InStr(WhichSVBeam, ":")
        'MsgBox WhichSVBeam & ", " & ColonLocation
        CurrentSVID = Left(WhichSVBeam, ColonLocation - 1)
        'MsgBox CurrentSVID
        CurrentBeamID = Right(WhichSVBeam, lLen - ColonLocation)
        'MsgBox CurrentBeamID
    Else
        'no colon, nothing to parse (this shouldn't happen)
        MsgBox "No ':' from Scan_SVBeam"
    End If

    'Call sCheckExecutionTimeGap(RunStart)
    'loop for the number of minutes we specified
    For i = 1 To intMinDelay
        'check every second for events
        For s = 1 To 240
            Call AppSleep(250)
            DoEvents
        Next s
    Next i
Loop

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:18:02.577

在伪代码中，它将是以下几行：

```
start when column c=x
    begin loop
        get data
        check value of column d
        if column d= x exit loop
    next loop iteration
end 
```

那是你要的吗？

菲利普

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:20:30.843

一段将定期运行并允许您更改要检查的电子表格中的值的代码示例如下：

```
Sub testCell()
Dim r1, r2 As Integer
Dim stopIt As Boolean

r1 = doWeStart
r2 = doWeStop(r1)

Debug.Print "The value of cell C1 is now " & [C1].Value
If r1 = 0 Then Debug.Print "We haven't started yet"
If r1 > 0 And r2 = 0 Then Debug.Print "We start but don't stop"
If r1 > 0 And r2 > 0 Then Debug.Print "We started and stopped"

If [C1].Value Like "stop" Or r1 > 0 And r2 > 0 Then stopIt = True Else stopIt = False

If Not stopIt Then
    Application.OnTime Now + TimeValue("00:00:05"), "testCell"
End If

End Sub
'
Function doWeStart()
    Dim xrow As Integer
    ' save old selection
    Set r = Selection
    xrow = 0

    ' search for "x" in column C
    On Error Resume Next
    xrow = Application.WorksheetFunction.Match("x", [C:C], 0)
    doWeStart = xrow

End Function
'
Function doWeStop(r1)
    Dim xrowd As Integer
    xrowd = 0

    ' search for "x" in column D, starting at row r1
    On Error Resume Next
    xrowd = Application.WorksheetFunction.Match("x", Range("D" & r1, "D1048576"), 0)
    If xrowd > 0 Then
        doWeStop = xrowd + r1 - 1
    Else
        doWeStop = 0
    End If

End Function 
```

这将每五秒运行一次，将在 C 列中查找第一个“x”，并在 C 中找到的列下方的 D 列中查找第一个“x”。根据那里的内容，它将（现在）在调试窗口——你可以把你的代码放在那里。当您在 C1 中输入“停止”，或者在 C 和 D 中都找到“x”时，它会停止。

# c# - 将窗口置于顶部

> ID：15340373
> 
> 赞同：-2
> 
> 时间：2013-03-11T13:53:40.620
> 
> 标签：c#, winforms

我正在尝试将我的表单置于顶部，截取屏幕截图，保存它，然后使用以下代码将其最小化。

```
 this.WindowState = FormWindowState.Maximized;
            this.FormBorderStyle = FormBorderStyle.None;
            this.TopMost = true;

            Application.DoEvents();

            string keys = "%" + "{PrtSc}";
            SendKeys.SendWait(keys);
            Clipboard.GetImage().Save(imagePath, ImageFormat.Jpeg);

            this.FormBorderStyle = FormBorderStyle.Sizable;
            this.WindowState = FormWindowState.Minimized;
            this.TopMost = false; 
```

我认为代码将始终将窗口置于顶部并截取屏幕截图。但是我注意到它不是 100% 工作的：机器太慢了，所以当将窗口置于顶部的代码执行时，整个窗口都不会出现。有时它不会把它带到顶部，所以图片包含一些用户活动。

我怎样才能将它完全带到顶部并等待它完成，然后截取屏幕截图并反转它。

请注意，申请中只有一个表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:08:50.900

也许添加一个计时器。运行代码的第一部分（直到并包括：“Application.DoEvents();”），然后启动计时器。在刻度代码上检查“this.TopMost”状态，只有当它是最顶层的表单时才进行屏幕截图并停止计时器。

# c# - 如何在枚举上创建扩展方法（c#）

> ID：15340377
> 
> 赞同：2
> 
> 时间：2013-03-11T13:53:55.697
> 
> 标签：c#, enums, extension-methods

我想创建一个扩展方法，该方法将通过其键返回枚举值。用法将是

```
LifeCycle.GetLifeCycle(1) 
```

或 LifeCycle.GetLifeCycleByValue("")

这是我的想法-假设我有以下枚举：

```
public enum LifeCycle
{
    Pending = 0,
    Approved = 1,
    Rejected = 2,
} 
```

我为 getByint 案例编写了以下扩展

```
public static class EnumerationExtensions
{
    private static Dictionary<int, LifeCycle> _lifeCycleMap = Enum.GetValues(typeof(LifeCycle)).Cast<int>().ToDictionary(Key => Key, value => ((LifeCycle)value));

    public static LifeCycle GetLifeCycle(this LifeCycle lifeCycle, int lifeCycleKey)
    {
        return _lifeCycleMap[lifeCycleKey];
    }
} 
```

至今

```
 LifeCycle.GetLifeCycle(1) 
```

不编译。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T13:55:49.980

没有静态扩展方法之类的东西，这是您正在尝试做的。您只能创建在类型实例中起作用的扩展方法，而不是类型本身。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T13:56:48.153

`LifeCycle`是类型而不是该枚举的实例。

所以这将编译：

```
LifeCycle.Pending.GetLifeCycle(1); 
```

但是这个扩展无论如何都是没有意义的，因为你可以`int`直接通过它的值获得一个枚举：

```
LifeCycle approved = (LifeCycle) 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T14:00:49.263

你只需要像这样投射：

```
var lifeCycle = (LifeCycle)1; 
```

这里举个例子：

```
using System;

namespace Test
{
    class Program
    {
        static void Main(string[] args)
        {
            var lifeCycle = (LifeCycle)1;
            Console.WriteLine(lifeCycle);
            //Output: Approved
        }
    }

    public enum LifeCycle
    {
        Pending = 0,
        Approved = 1,
        Rejected = 2,
    }
} 
```

# jquery - 如何在jqgrid中获取所选行的行ID

> ID：15340378
> 
> 赞同：5
> 
> 时间：2013-03-11T13:53:56.903
> 
> 标签：jquery, jqgrid

我正在编写此代码并在 jqgrid 的 rowdoubleclick 上调用该方法。我还给出了我的 jqgrid 的所有标签和列名。当我提醒这些值时，你能帮我弄清楚为什么我得到“未定义”吗？

```
<cc1:JQGrid ID="grdUserDetails" runat="server" Width="770px" Height="350px" ClientSideEvents-RowDoubleClick="ForwardDetails">
                <Columns>
                    <cc1:JQGridColumn DataField="VisitorID" HeaderText="ID" TextAlign="Left" PrimaryKey="true"
                        Visible="false" Searchable="false">
                    </cc1:JQGridColumn>
                    <cc1:JQGridColumn DataField="PersonName" HeaderText="Visitor" TextAlign="Left">
                    </cc1:JQGridColumn>
                    <cc1:JQGridColumn DataField="CompanyName" HeaderText="Company Name" TextAlign="Left">
                    </cc1:JQGridColumn>
                    <cc1:JQGridColumn DataField="ContactNumber" HeaderText="Contact Number" TextAlign="Left">
                    </cc1:JQGridColumn>
                    <cc1:JQGridColumn DataField="Address" HeaderText="Address" TextAlign="Left">
                    </cc1:JQGridColumn>
                    <cc1:JQGridColumn DataField="Email" HeaderText="Email" TextAlign="Left">
                    </cc1:JQGridColumn>
                    <cc1:JQGridColumn DataField="DisplayDate" HeaderText="Last Visited on" TextAlign="Left">
                    </cc1:JQGridColumn>
                </Columns>
                <PagerSettings PageSize="15" PageSizeOptions="[15,25,50]" />
                <ToolBarSettings ShowSearchButton="false" ShowRefreshButton="true" ShowSearchToolBar="true">
                </ToolBarSettings>
                <AppearanceSettings ShowRowNumbers="true" ></AppearanceSettings>
                <SearchToolBarSettings SearchToolBarAction="SearchOnKeyPress" />
            </cc1:JQGrid>

 function ForwardDetails() {
        var PersonName, Address, CompanyName, ContactNumber, Email;
        var selectedRowId, cellValue;
        var myGrid = $('#grdUserDetails');
         selectedRowId = myGrid.jqGrid('getGridParam', 'selrow');
         cellValue = myGrid.jqGrid('getCell', selectedRowId, 'Visitor Name');
        window.opener.setValues(PersonName, Address, CompanyName, ContactNumber, Email);
        window.close();           
    } 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-11T14:01:40.847

尝试这个：

```
var myGrid = $('#list'),
selectedRowId = myGrid.jqGrid ('getGridParam', 'selrow'),
cellValue = myGrid.jqGrid ('getCell', selectedRowId, 'columnName'); 
```

您在属性中`columnName`提供的列在哪里`name``colModel`

并且`#list`是您的网格的 id。

[参考 1](https://stackoverflow.com/questions/6995129/how-to-get-a-jqgrid-selected-row-cells-value) ,[参考 2](http://www.trirand.com/blog/phpjqgrid/examples/selection/selectedrow_client/default.php)

# java - Envers，对于带有 JoinColumn 的 ManyToOne，正在审核错误的列

> ID：15340382
> 
> 赞同：1
> 
> 时间：2013-03-11T13:54:04.337
> 
> 标签：java, hibernate, audit, hibernate-envers

在审核外键时，Envers 似乎忽略了 JoinColumn 注释。

例如，我有一个像这样的简单类：

```
@Audited
@Entity
public class Address {
    @Id
    @GeneratedValue
    private int id;

    @Audited(targetAuditMode = RelationTargetAuditMode.NOT_AUDITED)
    @ManyToOne
    @JoinColumn (name="addressTypeFk", referencedColumnName="EntityId",nullable=false)
    private AddressTypeLookup addressType; 
```

其中引用了这样的查找表：

```
@Entity
public class AddressTypeLookup
{
    @Id
    @GeneratedValue
    private int id;
    private String descr;
    private int entityId; 
```

请注意，Address 上的 addressType 属性连接到 entityId 列，而不是主键“id”列。还要注意 RelationTargetAuditMode.NOT_AUDITED 的使用：我想审计外键，但我不想审计对 AddressTypeLookup 的更改。问题是，当 Envers 记录对外键的更改时，它记录的是 AddressTypeLookup 主键值“id”，而不是 entityId。如何让 Envers 记录使用的 entityId 值？

[如果你想知道我为什么想要这个：我们有一个查找数据（又名主/参考数据）的数据库。它记录历史：所有行都有有效的开始/结束日期。id 列是正确唯一的；entityId 标识特定事物 - 例如特定地址类型的所有版本。所有查找表都被复制到应用程序数据库中——但只有当前数据被复制，而不是历史数据。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:03:35.807

这可能是使用 referencedColumnName 和 RTAM.NOT_AUDITED 的交集的错误。请提交错误报告[@https:](https://hibernate.onjira.com/) //hibernate.onjira.com/，envers 组件。

# c++ - microsoft access 数据库 - “记录太大”异常

> ID：15340383
> 
> 赞同：0
> 
> 时间：2013-03-11T13:54:08.250
> 
> 标签：c++, database, mfc

我有一些从 MS Access 数据库中读取的代码。该代码如下：

```
CDatabase database;
CString sDriver = "MICROSOFT ACCESS DRIVER (*.mdb)";
CString sDsn;
CString sFile = "MyDB.mdb";
CString sField;

// Build ODBC connection string
sDsn.Format("ODBC;DRIVER={%s};DSN='';DBQ=%s", sDriver, sFile);
TRY
{
    // Open the database
    database.Open(NULL, false, false, sDsn);

    // Allocate the recordset
    CRecordset recset(&database);

    // Execute the query
    recset.Open(CRecordset::forwardOnly, "SELECT NAME FROM INFOTABLE", CRecordset::readOnly);

    // Loop through each record
    while( !recset.IsEOF() )
    {
        // Copy each column into a variable
        recset.GetFieldValue("NAME", sField);

        // Add the obtained field to a drop-down box
        m_dropDown.AddString(sField);

        // goto next record
        recset.MoveNext();
    }
    // Close the database
    database.Close();
}
CATCH(CDBException, e)
{
    // If a database exception occured, show error msg
    AfxMessageBox("Database error: "+e->m_strError);
}
END_CATCH; 
```

**我的问题是，有时会**抛出异常。消息框显示，

```
Database error: Record too large 
```

我的数据库有 > 30000 条记录。

为什么会出现这个异常？另外，为什么*有时会*出现？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:12:30.370

您可以自己搜索答案，但无论如何引用[MSDN 支持](http://support.microsoft.com/kb/111304)-

> 表中的记录...在 Microsoft Access 数据库中被限制为略低于 2K，不包括备注字段。“记录太大”错误发生在您将数据输入此类记录时，而不是在您定义表结构时。

您可以尝试按照此[答案](https://stackoverflow.com/questions/11190256/record-is-too-large-ms-access-runtime-error)的建议使用备忘录类型。

# date - 如何根据日期计算“周数”？

> ID：15340394
> 
> 赞同：3
> 
> 时间：2013-03-11T13:54:39.810
> 
> 标签：date, calendar, week-number

对于我正在开发的系统，我需要一个与标准周数一样工作的“两周数”，它每 14 天而不是 7 天滚动一次。

换句话说，我正在寻找算法，而不是代码，从日期计算周数，以及给定年份和周数的开始/结束日期。

问题出在任何一年的第 1 周一般都不是 1 月 1 日，甚至可能是在之前的 12 月。因此，也有几年最终有 53 周。

例如：

*   2009 年第 1 周开始于**2008 年**-12月 29 日
*   因此，2009 年有一周 #53，从 2009-12-28 到 2010-01-03
*   2010 年第 1 周开始于 2010-01-04

这些数字是如何得出的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:00:04.837

> 这些数字是如何得出的？

好吧，这取决于您使用的系统，但我*怀疑*您使用的是 ISO-8601 周数，其定义如下：

> 2.2.10 日历周数
> 
> 序号，它根据以下规则标识其日历年内的日历周：一年的第一个日历周是包括该年的第一个星期四的那个，并且一个日历年的最后一个日历周是紧接在该周之前的一周下一个日历年的第一个日历周

请记住，ISO-8601 中的一周从星期一开始，到星期日结束——因此，“第一个星期四”规则的另一种表达方式是，一年中的第一周是包含新年至少四天的第一周.

Another *vital* point is that when you're expressing values using "week of week year", you need to use the "week year" itself as well, *not* the normal year. So for Sunday January 3rd 2010, you might express this as "Week 53, week year 2009, day-of-week Sunday". It's all too easy to use the "wrong type of year" and end up messing up values around the end of December and start of January.

# loadrunner - LoadRunner 相关现象？

> ID：15340396
> 
> 赞同：0
> 
> 时间：2013-03-11T13:54:43.743
> 
> 标签：loadrunner

我正在关联响应标头（范围=标头）中的值并在脚本中打印两次该值，但它在脚本的不同位置显示不同的值：这是日志：

```
Action.c(548): Notify: Parameter Substitution: parameter "treatmentsId" =  "172415" 
Action.c(548): Notify: Parameter Substitution: parameter "treatmentsId" =  "172415"
Action.c(548): web_submit_data("considertakingadump_2") was successful, 3792 body bytes, 242 header bytes, 12 chunking overhead bytes    [MsgId: MMSG-26385]
Action.c(559): Registering web_reg_save_param_ex was successful          [MsgId: MMSG-26390]
Action.c(567): Notify: Parameter Substitution: parameter "corrID1" =  "3"
Action.c(568): corrID1 first: 3
Action.c(570): Notify: Parameter Substitution: parameter "treatmentsId" =  "172415"
Action.c(570): Notify: Parameter Substitution: parameter "treatmentsId" =  "172415"
Action.c(570): Redirecting "http://b34aps012376.heyhay.com:8080/takeit/treatment/172415/considertakingadump?6-1.IFormSubmitListener-considertakingadumpListe-considertakingadumpRepeater-4-considertakingadumpListItem-vilkarHoved-innerPanel-vilkarVurdering-vilkarForm" (redirection depth is 0)       [MsgId: MMSG-26694]
Action.c(570): To location "http://b34aps012376.heyhay.com:8080/takeit/treatment/172415/considertakingadump"     [MsgId: MMSG-26693]
Action.c(570): Redirecting "http://b34aps012376.heyhay.com:8080/takeit/treatment/172415/considertakingadump" (redirection depth is 1)    [MsgId: MMSG-26694]
Action.c(570): To location "http://b34aps012376.heyhay.com:8080/takeit/treatment/172415/considertakingadump?10"          [MsgId: MMSG-26693]
Action.c(570): Notify: Saving Parameter "corrID1 = 10\r\nContent-Length: 0\r\n\r\nHTTP/1.1 200 OK\r\nServer: Apache-Coyote/1.1\r\nDate: Mon, 11 Mar 2013 12:41:33 GMT\r\nExpires: Thu, 01 Jan 1970 00:00:00 GMT\r\nPragma: no-cache\r\nCache-Control: no-cache, no-store\r\nContent-Type: text/html;charset=UTF-8\r\nTransfer-Encoding: chunked\r\n\r\n".
Action.c(570): web_submit_data("considertakingadump_3") was successful, 10004 body bytes, 838 header bytes, 20 chunking overhead bytes   [MsgId: MMSG-26385]
Action.c(583): Notify: Transaction "Huk av for oppfyllt vilkår" ended with "Pass" status (Duration: 0,6252 Wasted Time: 0,0056).
Action.c(585): Registering web_reg_save_param_ex was successful          [MsgId: MMSG-26390]
Action.c(595): Notify: Parameter Substitution: parameter "corrID1" =  "10\r\nContent-Length: 0\r\n\r\nHTTP/1.1 200 OK\r\nServer: Apache-Coyote/1.1\r\nDate: Mon, 11 Mar 2013 12:41:33 GMT\r\nExpires: Thu, 01 Jan 1970 00:00:00 GMT\r\nPragma: no-cache\r\nCache-Control: no-cache, no-store\r\nContent-Type: text/html;charset=UTF-8\r\nTransfer-Encoding: chunked\r\n\r\n"
Action.c(596): corrID1 second: 10
Action.c(599): Notify: Transaction "Neste etter avhuking" started.
Action.c(601): Notify: Parameter Substitution: parameter "treatmentsId" =  "172415"
Action.c(601): Notify: Parameter Substitution: parameter "corrID1" =  "10\r\nContent-Length: 0\r\n\r\nHTTP/1.1 200 OK\r\nServer: Apache-Coyote/1.1\r\nDate: Mon, 11 Mar 2013 12:41:33 GMT\r\nExpires: Thu, 01 Jan 1970 00:00:00 GMT\r\nPragma: no-cache\r\nCache-Control: no-cache, no-store\r\nContent-Type: text/html;charset=UTF-8\r\nTransfer-Encoding: chunked\r\n\r\n"
Action.c(601): Notify: Parameter Substitution: parameter "treatmentsId" =  "172415"
Action.c(601): Redirecting "http://b34aps012376.heyhay.com:8080/takeit/treatment/172415/considertakingadump?10Content-Length: 0HTTP/1.1 200 OKServer: Apache-Coyote/1.1Date: Mon, 11 Mar 2013 12:41:33 GMTExpires: Thu, 01 Jan 1970 00:00:00 GMTPragma: no-cacheCache-Control: no-cache, no-storeContent-Type: text/html;charset=UTF-8Transfer-Encoding: chunked-1.ILinkListener-neste" (redirection depth is 0)         [MsgId: MMSG-26694]
Action.c(601): To location "http://b34aps012376.heyhay.com:8080/takeit/treatment/172415/considertakingadump?11&10Content-Length:+0HTTP/1.1+200+OKServer:+Apache-Coyote/1.1Date:+Mon,+11+Mar+2013+12:41:33+GMTExpires:+Thu,+01+Jan+1970+00:00:00+GMTPragma:+no-cacheCache-Control:+no-cache,+no-storeContent-Type:+text/html%3Bcharset=UTF-8Transfer-Encoding:+chunked-1.ILinkListener-neste"     [MsgId: MMSG-26693]
Action.c(601): Notify: Saving Parameter "corrID2 = 11&10Content-Length:+0HTTP/1.1+200+OKServer:+Apache-Coyote/1.1Date:+Mon,+11+Mar+2013+12:41:33+GMTExpires:+Thu,+01+Jan+1970+00:00:00+GMTPragma:+no-cacheCache-Control:+no-cache,+no-storeContent-Type:+text/html%3Bcharset=UTF-8Transfer-Encoding:+chunked-1.ILinkListener-neste\r\nContent-Length: 0\r\n\r\nHTTP/1.1 200 OK\r\nServer: Apache-Coyote/1.1\r\nDate: Mon, 11 Mar 2013 12:41:33 GMT\r\nExpires: Thu, 01 Jan 1970 00:00:00 GMT\r\nPragma: no-cache\r\nCache-Control: no-cache, no-store\r\nContent-Type: text/html;charset=UTF-8\r\nTransfer-Encoding: chunked\r\n\r\n".

Action.c(601): web_url("Neste") was successful, 12429 body bytes, 811 header bytes, 21 chunking overhead bytes   [MsgId: MMSG-26385]
Action.c(610): Notify: Parameter Substitution: parameter "treatmentsId" =  "172415"
Action.c(610): web_url("Navigasjon_topp_4_viseforslagtiltakeit.png") was successful, 32914 body bytes, 230 header bytes          [MsgId: MMSG-26386]
Action.c(618): Notify: Transaction "Neste etter avhuking" ended with "Pass" status (Duration: 0,3079 Wasted Time: 0,0053).
Action.c(620): Registering web_reg_save_param_ex was successful          [MsgId: MMSG-26390]
Action.c(628): Notify: Transaction "Send til beslutning" started.
Action.c(630): Notify: Parameter Substitution: parameter "treatmentsId" =  "172415"
Action.c(630): Notify: Parameter Substitution: parameter "corrID2" =  "11&10Content-Length:+0HTTP/1.1+200+OKServer:+Apache-Coyote/1.1Date:+Mon,+11+Mar+2013+12:41:33+GMTExpires:+Thu,+01+Jan+1970+00:00:00+GMTPragma:+no-cacheCache-Control:+no-cache,+no-storeContent-Type:+text/html%3Bcharset=UTF-8Transfer-Encoding:+chunked-1.ILinkListener-neste\r\nContent-Length: 0\r\n\r\nHTTP/1.1 200 OK\r\nServer: Apache-Coyote/1.1\r\nDate: Mon, 11 Mar 2013 12:41:33 GMT\r\nExpires: Thu, 01 Jan 1970 00:00:00 GMT\r\nPragma: no-cache\r\nCache-Control: no-cache, no-store\r\nContent-Type: text/html;charset=UTF-8\r\nTransfer-Encoding: chunked\r\n\r\n"
Action.c(630): Notify: Parameter Substitution: parameter "treatmentsId" =  "172415"
Action.c(630): Redirecting "http://b34aps012376.heyhay.com:8080/takeit/treatment/172415/forslagtakeit?11&10Content-Length:+0HTTP/1.1+200+OKServer:+Apache-Coyote/1.1Date:+Mon,+11+Mar+2013+12:41:33+GMTExpires:+Thu,+01+Jan+1970+00:00:00+GMTPragma:+no-cacheCache-Control:+no-cache,+no-storeContent-Type:+text/html%3Bcharset=UTF-8Transfer-Encoding:+chunked-1.ILinkListener-nesteContent-Length: 0HTTP/1.1 200 OKServer: Apache-Coyote/1.1Date: Mon, 11 Mar 2013 12:41:33 GMTExpires: Thu, 01 Jan 1970 00:00:00 GMTPragma: no-cacheCache-Control: no-cache, no-storeContent-Type: text/html;charset=UTF-8Transfer-Encoding: chunked-1.ILinkListener-neste" (redirection depth is 0)          [MsgId: MMSG-26694]

Action.c(630): To location "http://b34aps012376.heyhay.com:8080/takeit/treatment/172415/forslagtakeit?10Content-Length:+0HTTP/1.1+200+OKServer:+Apache-Coyote/1.1Date:+Mon,+11+Mar+2013+12:41:33+GMTExpires:+Thu,+01+Jan+1970+00:00:00+GMTPragma:+no-cacheCache-Control:+no-cache,+no-storeContent-Type:+text/html%3Bcharset=UTF-8Transfer-Encoding:+chunked-1.ILinkListener-nesteContent-Length:+0HTTP/1.1+200+OKServer:+Apache-Coyote/1.1Date:+Mon,+11+Mar+2013+12:41:33+GMTExpires:+Thu,+01+Jan+1970+00:00:00+GMTPragma:+no-cacheCache-Control:+no-cache,+no-storeContent-Type:+text/html%3Bcharset"          [MsgId: MMSG-26693]

Action.c(630): Redirecting "http://b34aps012376.heyhay.com:8080/takeit/treatment/172415/forslagtakeit?10Content-Length:+0HTTP/1.1+200+OKServer:+Apache-Coyote/1.1Date:+Mon,+11+Mar+2013+12:41:33+GMTExpires:+Thu,+01+Jan+1970+00:00:00+GMTPragma:+no-cacheCache-Control:+no-cache,+no-storeContent-Type:+text/html%3Bcharset=UTF-8Transfer-Encoding:+chunked-1.ILinkListener-nesteContent-Length:+0HTTP/1.1+200+OKServer:+Apache-Coyote/1.1Date:+Mon,+11+Mar+2013+12:41:33+GMTExpires:+Thu,+01+Jan+1970+00:00:00+GMTPragma:+no-cacheCache-Control:+no-cache,+no-storeContent-Type:+text/html%3Bcharset" (redirection depth is 1)         [MsgId: MMSG-26694]

Action.c(630): To location "http://b34aps012376.heyhay.com:8080/takeit/treatment/172415/forslagtakeit?12&10Content-Length:+0HTTP/1.1+200+OKServer:+Apache-Coyote/1.1Date:+Mon,+11+Mar+2013+12:41:33+GMTExpires:+Thu,+01+Jan+1970+00:00:00+GMTPragma:+no-cacheCache-Control:+no-cache,+no-storeContent-Type:+text/html%3Bcharset=UTF-8Transfer-Encoding:+chunked-1.ILinkListener-nesteContent-Length:+0HTTP/1.1+200+OKServer:+Apache-Coyote/1.1Date:+Mon,+11+Mar+2013+12:41:33+GMTExpires:+Thu,+01+Jan+1970+00:00:00+GMTPragma:+no-cacheCache-Control:+no-cache,+no-storeContent-Type:+text/html%3Bcharset"       [MsgId: MMSG-26693]

Action.c(630): Notify: Saving Parameter "corrID3 = 12&10Content-Length:+0HTTP/1.1+200+OKServer:+Apache-Coyote/1.1Date:+Mon,+11+Mar+2013+12:41:33+GMTExpires:+Thu,+01+Jan+1970+00:00:00+GMTPragma:+no-cacheCache-Control:+no-cache,+no-storeContent-Type:+text/html%3Bcharset=UTF-8Transfer-Encoding:+chunked-1.ILinkListener-nesteContent-Length:+0HTTP/1.1+200+OKServer:+Apache-Coyote/1.1Date:+Mon,+11+Mar+2013+12:41:33+GMTExpires:+Thu,+01+Jan+1970+00:00:00+GMTPragma:+no-cacheCache-Control:+no-cache,+no-storeContent-Type:+text/html%3Bcharset\r\nContent-Length: 0\r\n\r\nHTTP/1.1 200 OK\r\nServer: Apache-Coyote/1.1\r\nDate: Mon, 11 Mar 2013 12:41:34 GMT\r\nExpires: Thu, 01 Jan 1970 00:00:00 GMT\r\nPragma: no-cache\r\nCache-Control: no-cache, no-store\r\nContent-Type: text/html;charset=UTF-8\r\nTransfer-Encoding: chunked\r\n\r\n".
Action.c(630): web_url("Send til beslutning") was successful, 14273 body bytes, 1800 header bytes, 21 chunking overhead bytes    [MsgId: MMSG-26385]
Action.c(639): Notify: Parameter Substitution: parameter "treatmentsId" =  "172415"
Action.c(639): web_url("Navigasjon_topp_5_fattetakeit.png") was successful, 32305 body bytes, 230 header bytes   [MsgId: MMSG-26386]
Action.c(647): Notify: Transaction "Send til beslutning" ended with "Pass" status (Duration: 0,4477 Wasted Time: 0,0047).
Action.c(649): Registering web_reg_save_param_ex was successful          [MsgId: MMSG-26390]
Action.c(659): Notify: Transaction "huk av for at valgte er godkjent" started. 
```

这是脚本：

```
web_submit_data("considertakingadump_2",                     "Action=http://b34aps012376.heyhay.com:8080/takeit/treatment/{treatmentsId}/considertakingadump?6-1.IBehaviorListener.0-considertakingadumpListe-considertakingadumpRepeater-4-considertakingadumpListItem-vilkarHoved-innerPanel-vilkarVurdering-vilkarForm-vilkarsregelValg",
            "Method=POST", 
                "RecContentType=text/xml",             

"Referer=http://b34aps012376.heyhay.com:8080/takeit/treatment/{treatmentsId}/considertakingadump?5", 

                "Snapshot=t57.inf", 

            "Mode=HTTP", 
            ITEMDATA, 
            "Name=vilkarsregelValg", "Value=OPPFYLT", ENDITEM, 
            LAST);

    web_reg_save_param_ex( 
            "ParamName=corrID1",
            "LB=considertakingadump?",        
            "RB=",
            SEARCH_FILTERS,
            "Scope=Headers",
            LAST);

    buffer1 = atoi(lr_eval_string("{corrID1}"));

    lr_output_message("corrID1 first: %d", buffer1);

    web_submit_data("considertakingadump_3", 

            "Action=http://b34aps012376.heyhay.com:8080/takeit/treatment/{treatmentsId}/considertakingadump?6-1.IFormSubmitListener-considertakingadumpListe-considertakingadumpRepeater-4-considertakingadumpListItem-vilkarHoved-innerPanel-vilkarVurdering-vilkarForm",

            "Method=POST", 
            "RecContentType=text/html",             "Referer=http://b34aps012376.heyhay.com:8080/takeit/treatment/{treatmentsId}/considertakingadump?5", 
            "Snapshot=t58.inf", 
            "Mode=HTTP", 

            ITEMDATA, 
            "Name=vilkarForm48_hf_0", "Value=", ENDITEM, 
            "Name=vilkarsregelValg", "Value=OPPFYLT", ENDITEM, 
            "Name=resultat.tilleggsbegrunnelse", "Value=", ENDITEM, 
            LAST);

    lr_end_transaction("Huk av for oppfyllt vilkår",LR_AUTO); 

    web_reg_save_param_ex(
            "ParamName=corrID2",
            "LB=considertakingadump?",
            "RB=",
            SEARCH_FILTERS,
            "Scope=Headers",
            LAST);

    //skriver ut variablen corrID1 rett før den brukes i en web_url
    buffer1 = atoi(lr_eval_string("{corrID1}"));

    lr_output_message("corrID1 second: %d", buffer1);

    lr_start_transaction("Neste etter avhuking");

    web_url("Neste",                "URL=http://b34aps012376.heyhay.com:8080/takeit/treatment/{treatmentsId}/considertakingadump?{corrID1}-1.ILinkListener-neste", 

            "Resource=0", 
            "RecContentType=text/html",               "Referer=http://b34aps012376.heyhay.com:8080/takeit/treatment/{treatmentsId}/considertakingadump?7", 
            "Snapshot=t59.inf", 
            "Mode=HTTP", 
            LAST); 
```

这不是很奇怪吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:18:41.507

根据您的输出日志，看起来参数 corrID1 在您在代码中提到的第一个 POST 之前已经存在值为“3”，然后您再次调用它以进行后续调用，该调用使用新值填充相同的参数。你确定你没有在脚本前面为 corrID1 调用 web_reg_save_param_ex 吗？

# android - 尝试与 Drive 应用程序集成，打开文档时出错

> ID：15340402
> 
> 赞同：0
> 
> 时间：2013-03-11T13:55:14.233
> 
> 标签：android, google-drive-api

我正在尝试使用此处的说明与 Drive 应用程序集成：[https](https://developers.google.com/drive/integrate-android-ui) ://developers.google.com/drive/integrate-android-ui 。

我按照说明操作，现在当我在云端硬盘应用程序中选择文件时，我的应用程序显示为“打开方式（使用谷歌驱动器）”选项。但是，当我尝试使用我的应用程序打开时，我收到一个错误对话框，上面写着：

“糟糕...无法打开文档。原因：发生内部错误。请稍后再试”

因为使用其他应用程序可以正确打开相同的文件（其他应用程序未与 Drive 应用程序集成，但它们确实打开了文件），我认为这可能是因为我的应用程序未得到正确授权。我主要关心的是上面链接指示我添加到清单 xml 中的应用程序 ID。目前尚不清楚这个 ID 是什么，但我认为它是来自我的 OAuth2.0 客户端的“客户端 ID”。对我来说，这个值看起来像（我更改了一些数字/字母以保护隐私）：449637423441-e13a246wq7a0fuqgvremtjupk07vgf59.apps.googleusercontent.com

我尝试在清单中使用整个字符串作为 ID，使用第一个“。”之前的部分，并使用“-”之前的部分；但是在所有 3 次尝试中，我从 Drive 应用程序中得到了相同的错误。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:22:48.857

您是否在 API 控制台中为您的项目启用并配置了 Drive SDK？您链接的页面中嵌入的视频显示了如何将 Android 应用程序与 Drive 集成，从先决条件和项目配置开始。

# javascript - 在哪里插入这个javascript？

> ID：15340405
> 
> 赞同：0
> 
> 时间：2013-03-11T13:55:23.163
> 
> 标签：javascript, html

我和 AndyHin 有同样的问题（[CSS HTML - DIV 高度填充剩余空间](https://stackoverflow.com/questions/5059021/css-html-div-height-fill-remaining-space)）但是当侯赛因说时看不到在哪里插入 javascript。我必须承认我对用 js 编写很陌生。

我已经尝试将它包含在如下的头部标签之间，并且我也尝试将它插入到 jquery 中，但无济于事。

```
<head> 

<script> 

Hussein's answer 

</script> 

</head> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:00:12.347

它依赖于页面上的元素，因此您需要将脚本执行延迟到 DOM 构建完成之后（这样才能实际选择所需的元素）。您有两种选择：

1.  将`<script>`标签放在 HTML 文档正文的末尾：

    ```
    <script>
        // code here
    </script>
    </body> 
    ```

2.  将`<script>`标签放在标签内`<head>`（或放在标签内的任何地方，`<body>`因为它实际上并不重要），并使用`DOM ready`事件处理程序：

    ```
    <script>
    $(document).ready(function() {
        // code here
    });
    </script> 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:58:14.507

放在**结束正文标记 ( `</body>`)**之前（最佳解决方案），或将脚本的所有代码包装为

```
$(function() { Hussein's answer }); 
```

如果您没有在文档末尾添加脚本或 use `$(document).ready()`，则代码会在 dom 准备好之前执行，因此您的 javascript 会找到 dom 元素，并且什么也不做（在最好的情况下）！

这是关于[$(function() {})](http://www.learningjquery.com/2006/09/introducing-document-ready)的文章（的缩写形式`$(document).ready()`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:01:51.023

在头部添加以下引用

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script> 
```

您可以在页面上的任何位置插入。

```
<script>

$(document).ready(function(){
    var one = $('#col_1').height(),
    two = $('#col_2').height(), 
    remaining_height = parseInt($(window).height() - one - two); 
    $('#col_3').height(remaining_height); 
});

<script> 
```

# android - 将 json 数据传递给自定义对象 - android

> ID：15340408
> 
> 赞同：0
> 
> 时间：2013-03-11T13:55:36.740
> 
> 标签：android, json

我的申请有问题。我正在尝试在 android 的自定义类中从我的数据库中传递 json 数据，然后将其显示在列表中。当我运行我的应用程序时，没有任何反应，没有错误，没有显示列表。如果有人可以帮助我将非常感激！:)

所有网络的东西都是异步完成的，我试图返回一个对象数组，所以我怀疑这可能是问题在这里，或者当我将字符串从 httphandler 类转换为 JSONArray 时。

这是我的主要活动

```
package com.example.test1;

import java.util.ArrayList; 
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.Activity;
import android.net.ParseException;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class clubpage extends Activity {

class Programme {

    public String name;
    public String event;
    public String price;

}

String clubphp = "http://10.0.2.2/corkgaa/Nemo.php";
String progString;
ArrayList<Programme> Programmedata = new ArrayList<Programme>();
ListView clublistview = (ListView)findViewById(R.id.listview1);

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.clubpage);

    new Dbhandler().execute(clubphp);   

    ArrayAdapter<Programme> adapter = new ArrayAdapter<Programme>(this,
            android.R.layout.simple_list_item_1, Programmedata);

    clublistview.setAdapter(adapter);

}   

public class Dbhandler extends AsyncTask<String, Void, ArrayList<Programme>> {

    protected ArrayList<Programme> doInBackground(String... arg0) {

ArrayList<Programme> arraydata = new ArrayList<Programme>();        
progString = httphandler.HttpGetExec(clubphp);

try{ 

    JSONArray jArray = new JSONArray(progString);
    JSONObject json_data=null; 

    for(int i=0;i<jArray.length();i++){ 

        json_data = jArray.getJSONObject(i); 
        Programme Progresult = new Programme();

        Progresult.name = json_data.getString("Name");
        Progresult.event = json_data.getString("Event");
        Progresult.price = json_data.getString("Price");

        arraydata.add(Progresult);

        }
    }
    catch(JSONException e1){ 

        }
    catch (ParseException e1) { 
        e1.printStackTrace();
        }
return arraydata;
    }

    @Override
    protected void onPostExecute(ArrayList<Programme> result) {

    Programmedata = result;
    }

}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
} 
```

}

httphandler 类在这里：

```
package com.example.test1;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient; 
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import android.util.Log;

public class httphandler {

//Main Dev setup

public static String HttpGetExec (String URI) {

    // TODO Auto-generated method stub
                String result = "no response"; 
                InputStream is = null; 
                StringBuilder sb = null;

                //http post 
                try{ 
                    HttpClient httpclient = new DefaultHttpClient(); 
                    HttpPost httppost = new HttpPost("http://10.0.2.2/corkgaa/Nemo.php"); 
                    HttpResponse response = httpclient.execute(httppost); 
                    HttpEntity entity = response.getEntity(); 
                    is = entity.getContent(); 
                    }
                catch(Exception e){ 
                        Log.e("log_tag", "Error in http connection"+e.toString()); 
                    }

                //convert response to string 
                try{ 
                    BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8); 
                    sb = new StringBuilder(); 
                    sb.append(reader.readLine() + "\n"); 
                    String line="0"; 
                    while ((line = reader.readLine()) != null) { 
                        sb.append(line + "\n");
                        } 
                    is.close(); 
                    result=sb.toString(); 
                    }
                catch(Exception e){ 
                    Log.e("log_tag", "Error converting result "+e.toString()); 
                    }

                return result;

                //aa=new ArrayAdapter<String>(clubpage.this, R.layout.listrow, R.id.title, result);
                //ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.listrow, R.id.title, result);
                //listview.setAdapter(aa);

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:43:53.890

将此行移至您的`onCreate`后面`setContentView`

```
clublistview = (ListView)findViewById(R.id.listview1); 
```

并将以下行移至异步任务中的 onPostExecute ：

```
ArrayAdapter<Programme> adapter = new ArrayAdapter<Programme>(this,
            android.R.layout.simple_list_item_1, Programmedata);

clublistview.setAdapter(adapter); 
```

在执行异步任务时，请考虑显示某种进度指示器。

# c# - 以编程方式向应用程序发送键盘命令

> ID：15340411
> 
> 赞同：0
> 
> 时间：2013-03-11T13:55:51.480
> 
> 标签：c#, multithreading, kinect, keyboard-events, sendkeys

我有以下代码，用 kinect 实现：

```
 private void ProcessForwardBackGesture(Joint head, Joint rightHand, Joint leftHand, Joint hip, Joint leftKnee, Joint rightKnee)
    {
        if (rightHand.Position.X > head.Position.X + 0.45)
        {
                OnGestureDetected("SwipeToRight");
                System.Windows.Forms.SendKeys.SendWait("{Right}");
        }
        if (leftHand.Position.X < head.Position.X - 0.45)
        {
               OnGestureDetected("SwipeToLeft");
               System.Windows.Forms.SendKeys.SendWait("{Left}");
        }
        if (rightHand.Position.Y > (hip.Position.Y + 0.20))
        {
            OnGestureDetected("UP");
            System.Windows.Forms.SendKeys.SendWait("{Up}");
        }
        if (rightHand.Position.Y < (hip.Position.Y - 0.20))
        {
            OnGestureDetected("DOWN");
            System.Windows.Forms.SendKeys.SendWait("{Down}");
        }
        if ((leftKnee.Position.Y > hip.Position.Y - 0.30))
        {
            OnGestureDetected("Space");
            System.Windows.Forms.SendKeys.SendWait("{Space}");
        }
        if ((rightKnee.Position.Y > hip.Position.Y - 0.30))
        {
            OnGestureDetected("Alt");
            System.Windows.Forms.SendKeys.SendWait("{Alt}");
        }

    } 
```

OnGestureDetected 函数向我展示了控制台中发生的情况。现在如果我保持一个姿势，在控制台中，那个键会出现，直到我离开那个姿势。在记事本中，如果我有很长的文本，它会按照我的姿势定义的方向不断滚动。但是在 3D 游戏或 java 游戏（带有 chrome）中，它只给出一个脉冲，然后什么也不做。我怎样才能让它保持那个脉冲。我想创建一个程序，以便能够使用 kinect 玩赛车游戏。

# delphi - Delphi：如何使 ENTER 键在 TFrame 中用作 TAB 键

> ID：15340412
> 
> 赞同：3
> 
> 时间：2013-03-11T13:55:53.113
> 
> 标签：delphi

我有一个框架和一些控件（编辑、按钮等）。如何拦截框架控件上任意位置的 ENTER 键并转换为 TAB 键（考虑到 SHIFT 状态）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T14:09:43.863

您只需要修改`CM_DIALOGKEY`.

```
type
  TMyForm = class(TForm)
  protected
    procedure CMDialogKey(var Message: TCMDialogKey); message CM_DIALOGKEY;
  end;

procedure TMyForm.CMDialogKey(var Message: TCMDialogKey);
begin
  if Message.CharCode=VK_RETURN then
    Message.CharCode := VK_TAB;
  inherited;
end; 
```

好吧，很明显这是做什么以及它是如何工作的。

你问如何在一个框架中做到这一点。无法在框架中处理对话框导航。出于相当明显的原因，这是由表单完成的。因此，您需要以某种方式将此代码拼接到承载您的框架的表单中。

对于备忘录控件，这将无效。他们会将按下`ENTER`视为换行符的输入。但我想这就是你希望发生的事情。否则备忘录控件将完全无法使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T00:39:33.277

`Enter`这是一些示例代码，它们将处理框架上的消息，以便在按下时能够导航到下一个控件。请注意，此示例不会将`Enter`密钥修改为`Tab`密钥。相反，它选择下一个控件并阻止对按键消息的进一步处理。

另请注意，代码可能需要进一步调整。一个是，如果任何控件实际上需要处理`Enter`密钥，例如 a `TMemo`，则需要添加一个异常。其次，导航被包裹在框架中，即在最后一个框架控件之后，第一个框架控件被聚焦 - 不是窗体上的控件，而不是框架上的控件。对于这些，您可能希望为消息返回添加条件，如果您希望在某些条件下进行默认处理，只需调用继承而不做任何其他事情。

```
type
  TFrame2 = class(TFrame)
    ...
  protected
    procedure CMChildKey(var Message: TCMChildKey); message CM_CHILDKEY;
  end;

..

procedure TFrame2.CMChildKey(var Message: TCMChildKey);
begin
  if Message.CharCode = VK_RETURN then begin
    SelectNext(Screen.ActiveControl, not Bool(GetKeyState(VK_SHIFT) and $80), True);
    Message.Result := 1;
  end else
    inherited;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T07:33:07.693

我认为有很多“丢弃并忘记”组件可以做到这一点，例如在[http://Torry.net](http://Torry.net)

例如，这样的组件是 RxLib 的一部分，后来以[`TJvEnterAsTab`](http://wiki.delphi-jedi.org/wiki/JVCL_Help%3aTJvEnterAsTab)名称继承到 JediVCL 中。

# c - C中的无符号整数

> ID：15340415
> 
> 赞同：7
> 
> 时间：2013-03-11T13:55:59.557
> 
> 标签：c, unsigned-integer

当我在下面运行程序时，它会输出 109876543210-1-2-3-4-5-6-78-9-10-11-12-and s0 on。为什么这样？无符号整数的概念是什么？

```
 main ()
   {
      unsigned int i;
       for (i = 10; i >= 0; i--)
                 printf ("%d", i);
   } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T13:59:39.983

无符号整数总是非负的，即大于或等于 0。当您在无符号整数类型中从 0 中减去 1 时，您最终会得到 MAX_INT。

因此，您的 for 循环将永远不会终止。

但是，如果您希望它打印无符号值而不是有符号值，则需要在 printf 中使用“%u”而不是“%d”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T13:57:42.060

格式字符串将`%d`替换值视为带`int`符号的 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T14:00:50.107

> 为什么这样？

因为你的程序有一个未定义的行为（使用`%d`which is for`int`打印一个`unsigned`） - 所以你可以期待任何事情发生。

为什么是无限循环？因为 an`unsigned int`总是`>= 0`。

> 无符号整数的概念是什么？

这是一个……**无符号**整数。一个非负的整数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T13:58:56.830

您使用`%d`，因此 printf 将值解释为带符号的。与无符号的零 (>=0) 的比较始终为真。

因此，虽然值从 10 到 0，但输出正常（109876543210）。之后，该值变为巨大的正数（最大值，对于 32bit int 它是`0xFFFFFFFF`）。与 0 的比较为真，因此循环继续。但在`printf` `0xFFFFFFFF`生产`-1`自用`%d`。然后循环继续到`0xFFFFFFFE`它`-2`仍然`>= 0`是无符号的。

使用`%u`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T14:00:09.407

`printf`不知道你给它的变量的类型，它得到的只是值（位本身）。您必须告诉它如何解释该值，并告诉它如何将`%d`其解释为有符号整数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T13:59:00.267

您正在使用带有 printf() 的“%d”，它是有符号整数的格式说明符。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-11T13:59:50.467

您应该在 printf 中`%u`用作[格式说明符](http://www.cplusplus.com/reference/cstdio/printf/)，否则该值将转换为`int`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-11T14:01:25.030

有符号整数（我们将使用 16 位）范围从 -32768 到 32767（0x8000 到 0x7FFF），*而无符号*整数范围从 0 到 65535（0x0000 到 0xFFFF）。所以无符号整数不能有负值，这就是你的循环永远不会终止的原因。但是，您已告诉打印程序将输出格式化*为*已**签名**( `%d`)，以便您在输出中看到格式化为负值的数字。在某种程度上，计算机中的所有内容都只是需要解释的一串位，您的代码示例使用相同位模式的两种不同解释......您的无符号整数。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-11T14:00:02.230

该声明`unsigned integer`指示编译器对变量使用无符号操作。例如，`>>`运算符对无符号整数和有符号整数有不同的行为（具体来说，它是否应该保留符号位）。

要打印无符号整数，您应该使用`%u`格式。

# css - 清除浮动在列表项内的对象

> ID：15340416
> 
> 赞同：1
> 
> 时间：2013-03-11T13:56:00.263
> 
> 标签：css

我有一个列表项，每个项目*内部都有浮动对象。*

html:

```
<ul>
  <li>
    <div class="icon" /><div class="text">blah</div>
  </li>
  <li>
    <div class="icon" /><div class="text">blah</div>
  </li>
</ul> 
```

CSS：

```
.icon, .text { float: left; }
.text:after { clear: both; } 
```

我的理解是第二种样式应该加一个明确的：都*在*文本框之后。但似乎并非如此。

通常，我会在 .text div 之后添加一个额外的 DIV，该 DIV 具有“已清除”类或具有清除对象的影响，但我注意到很多人不这样做，而只是使用`:after`选择器，等同于减少hacky代码。

关于我在其工作原理上缺少什么的任何指示？干杯

# javascript - jquery只能通过拖动标题来排序

> ID：15340418
> 
> 赞同：12
> 
> 时间：2013-03-11T13:56:08.107
> 
> 标签：javascript, jquery, jquery-ui-sortable, jquery-ui-draggable

我想在我的网页上有两个部分，可以互相左右拖动：

```
<style>
#sortableitem {
    width: 100px;
    height: 70px;
    float:left;
    list-style-type: none;
}
.content {
    background:lightgrey;
}
.header {
    background:grey;
}
<style>

<ul id='sortable'>
<li id='sortableitem'>
    <div class='header'>ITEM 1</div>
    <div class='content'>Content here</div>
</li>
<li id='sortableitem'>
    <div class='header'>ITEM 2</div>
    <div class='content'>Content here</div>
</li>
</ul>

<script>
$(document).ready(function () {
    $("#sortable").sortable();
});
</script> 
```

这是在这里工作：http: [//jsfiddle.net/gTUSw/](http://jsfiddle.net/gTUSw/)

但是，我只想能够使用标题部分进行拖动。我有我想要选择的内容。

如何让它工作，以便我可以通过标题拖动，但仍然可以正常控制内容区域中的鼠标事件？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-11T14:13:24.707

您想使用该`handle`选项，例如：

```
$("#sortable").sortable({ handle: ".header" }); 
```

您可以在此处查看一个工作示例：http: [//jsfiddle.net/gTUSw/1/](http://jsfiddle.net/gTUSw/1/) - 您还可以在此处查看完整 api 文档的大量[选项](http://api.jqueryui.com/sortable/)。

# python - 虽然循环变量不更新

> ID：15340422
> 
> 赞同：3
> 
> 时间：2013-03-11T13:56:32.400
> 
> 标签：python, loops

我在这样的方法中有一个循环：

```
from random import randint

class Player:
    def __init__(self, position=0):
        self.position = position

    def move(self, move):
        self.position += move

class Game:
    def __init__(self, size=10, p1=1, p2=1):
        self.size = size
        self.p1 = Player()
        self.p2 = Player()

    def finished(self):
        if self.p1.position >= self.size:
            return True
        if self.p2.position >= self.size:
            return True

    def run(self):
        while True:
            roll = randint(1,2)

            self.p2.move(roll)
            if self.finished():
                break

            roll = randint(1,2)

            self.p1.move(roll)
            if self.finished():
                break

        if self.p2.position >= self.p1.position: # if player 2 won return 2, else 1
            return 2
        else:
            return 1

    def jump(self, iterations):
        move1, move2, i = 0,0,0
        while i < iterations:
            print(move1, move2) # move1 is 0 again

            a = Game(self.size, self.p1.position+1, self.p2.position)
            x = a.run()
            print(x) # x is either 1 or 2, for the sake of testing 
                     # it's been set to always 1
            if x == 1:
                move1 += 1
            print(move1) # if move1 is incremented, it is shown here successfully    

            b = Game(self.size, self.p1.position+2, self.p2.position)
            y = b.run()

            if y == 1:
                move2 += 1

            i += 1

        if move2 >= move1:
            return 2
        else:
            return 1

human, comp, i = 0, 0, 0
times = 10
while i < times:
    g = Game()
    while True:
        roll = g.jump(4)
        g.p1.move(roll)
        if g.finished():
            human += 1
            break

        roll = g.jump(4)
        g.p2.move(roll)
        if g.finished():
            comp += 1
            break
    i += 1 
```

然而，在每个循环开始时，应该更新的变量正在被重置。我的缩进似乎是正确的，所以我不确定问题是什么。它可以是可变范围吗？

谢谢你的帮助。

编辑：这是所有代码的pastebin：http: [//pastebin.com/GjKA8yag](http://pastebin.com/GjKA8yag)

编辑：将所有代码添加到帖子中。以下是底部控制器代码应该发生的事情的概览：

初始化游戏，`g`. `g`有2个玩家，每个玩家都有一个位置，他们需要到达棋盘的末端才能获胜，棋盘长10个方格，他们可以一次移动1个或2个方格。

`jump`我们使用该方法来决定要移动多少个方格。该`jump`方法在其中创建了两个游戏，一个是游戏初始化为 player1 比他所在位置早 1 个方格，一个是游戏初始化为 player1 比他所在位置早 2 个方格。然后使用该方法随机完成这些游戏`run`，并返回一个值以查看谁赢得了该游戏（`2`对于 player2，`1`对于 player1）。

这是完成`iterations`的次数，然后是更成功的游戏，即最初向前移动 1 或向前移动 2，这就是实际游戏中将采取的移动`g`。

打印语句示例：

```
0 0
1
1
0 0
2
0
0 0
1
1
0 0
1
1 
```

第一行是`print(move1, move2)`，它位于 while 循环的开头。然后`print(x)`作为从`run()`方法返回的值，然后`print(move1)`在它增加之后。

我在 Windows 8 上运行 Python 3.3 x64。

结果：切换到 Python 2.7.3，它现在可以工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:36:55.070

```
 def jump(self, iterations):
        move1, move2, i = 0,0,0
        while i < iterations:
            print(move1, move2) # move1 is 0 again

            a = Game(self.size, self.p1.position+1, self.p2.position)
            x = a.run()
            print("who won game a? : " + str(x)) # x is either 1 or 2, for the sake of testing 
                     # it's been set to always 1
            if x == 1:
                move1 += 1
            print("move 1 is: " + str(move1)) # if move1 is incremented, it is shown here successfully    

            b = Game(self.size, self.p1.position+2, self.p2.position)
            y = b.run()
            print("who won game b? : " + str(y))

            if y == 1:
                move2 += 1
            print("move 2 is: " + str(move2))

            i += 1

        if move2 >= move1:
            return 2
        else:
            return 1

human, comp, i = 0, 0, 0
times = 10
while i < times:
    g = Game()
    print("new game")
    while True:
        print("position of 1 is:" + str(g.p1.position))
        print("position of 2 is:" + str(g.p2.position))
        roll = g.jump(4)
        print("first jump finished")
        g.p1.move(roll)
        if g.finished():
            human += 1
            break

        roll = g.jump(4)
        print("second jump finished")
        g.p2.move(roll)
        if g.finished():
            comp += 1
            break
    i += 1 
```

这是我更改的部分。我只在您的代码中添加了打印语句。
这是输出。
请告诉我输出的哪一部分对您没有意义。

```
new game
position of 1 is:0
position of 2 is:0
(0, 0)
who won game a? : 2
move 1 is: 0
who won game b? : 2
move 2 is: 0
(0, 0)
who won game a? : 2
move 1 is: 0
who won game b? : 1
move 2 is: 1
(0, 1)
who won game a? : 1
move 1 is: 1
who won game b? : 1
move 2 is: 2
(1, 2)
who won game a? : 1
move 1 is: 2
who won game b? : 2
move 2 is: 2
first jump finished
(0, 0)
who won game a? : 1
move 1 is: 1
who won game b? : 2
move 2 is: 0
(1, 0)
who won game a? : 1
move 1 is: 2
who won game b? : 1
move 2 is: 1
(2, 1)
who won game a? : 2
move 1 is: 2
who won game b? : 2
move 2 is: 1
(2, 1)
who won game a? : 2
move 1 is: 2
who won game b? : 2
move 2 is: 1
second jump finished
position of 1 is:2
position of 2 is:1
(0, 0)
who won game a? : 1
move 1 is: 1
who won game b? : 2
move 2 is: 0
(1, 0)
who won game a? : 2
move 1 is: 1
who won game b? : 1
move 2 is: 1
(1, 1)
who won game a? : 1
move 1 is: 2
who won game b? : 2
move 2 is: 1
(2, 1)
who won game a? : 2
move 1 is: 2
who won game b? : 2
move 2 is: 1
first jump finished
(0, 0)
who won game a? : 1
move 1 is: 1
who won game b? : 2
move 2 is: 0
(1, 0)
who won game a? : 2
move 1 is: 1
who won game b? : 1
move 2 is: 1
(1, 1)
who won game a? : 1
move 1 is: 2
who won game b? : 2
move 2 is: 1
(2, 1)
who won game a? : 2
move 1 is: 2
who won game b? : 2
move 2 is: 1
second jump finished
position of 1 is:3
position of 2 is:2 
```

# ms-access - 如何根据动态数据创建文件

> ID：15340424
> 
> 赞同：0
> 
> 时间：2013-03-11T13:56:32.870
> 
> 标签：ms-access

我目前有一个关于 MS Access 07 的查询，如下例所示。数据是动态的，因此区域的数量每周都会发生变化。

```
 ZONE     ERROR

    ZONE 1 | ERROR 1
    ZONE 1 | ERROR 3
    ZONE 2 | ERROR 4
    ZONE 2 | ERROR 5
    ZONE 3 | ERROR 1
    ZONE 3 | ERROR 3 
```

每周，我都需要运行此过程来为该周存在的每个区域创建一个单独的 Excel 文件。目前，我在想我可能需要将数据导入 Excel，然后使用高级过滤器将每个区域标识到一个新列“唯一区域”中，然后运行一个 VBA 代码，该代码将基于Unique Zones 列中的数据...不确定我是否走在正确的道路上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:21:28.013

由于您已经在谈论在 Excel 中使用 VBA 代码，因此您可能不会反对 Access 中的 VBA 解决方案。

假设您的表（或查询）称为 [ZoneErrors]。您可以在 Access 中创建类似于以下 VBA 函数的内容，然后从 Access 宏中调用它：

```
Public Function ExportZoneErrors()
Dim cdb As DAO.Database, rst As DAO.Recordset, qdf As DAO.QueryDef, _
        excelFileName As String

Set cdb = CurrentDb
Set rst = cdb.OpenRecordset("SELECT DISTINCT [ZONE] FROM [ZoneErrors]", dbOpenSnapshot)
Do While Not rst.EOF
    On Error Resume Next
    cdb.QueryDefs.Delete "tmpErrorsForJustOneZone"
    On Error GoTo 0
    Set qdf = cdb.CreateQueryDef("tmpErrorsForJustOneZone", _
            "SELECT * FROM [ZoneErrors] WHERE [ZONE]='" & rst!ZONE & "'")
    qdf.Close
    cdb.QueryDefs.Refresh

    ' build Excel file name (probably needs to be fancier in production)
    excelFileName = "Errors for " & rst!ZONE & ".xlsx"  ' e.g., "Errors for ZONE 1.xlsx"

    DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel12, "tmpErrorsForJustOneZone", excelFileName

    rst.MoveNext
Loop
rst.Close
Set rst = Nothing
Set cdb = Nothing
End Function 
```

# php - php - 在检索时显示带有换行符的 sql 值

> ID：15340425
> 
> 赞同：0
> 
> 时间：2013-03-11T13:56:40.263
> 
> 标签：php, sql, line-breaks

我正在使用以下代码来显示可点击的图片，但在图片下方它显示了图片的描述，在这部分：

```
<br>".$row['optie'];" 
```

但表格中的某些行太长，无法正确并排显示图片和说明。那么如何显示这些描述并添加换行符？

```
<?php   
    $query = "SELECT * FROM $tabel";
    $result = mysql_query($query);
    $aantal = 0;

    echo "<table>";
    echo "<tr>";

    while( ($row = mysql_fetch_array($result)))
    {
        $src = $row['afbeelding'];

        echo '<div class="Image">';
        echo "<td align='center'><h2><a href='pagina3.php?lang=" . $_SESSION['lang'] . "&naam=" . $naam . "&postcodehuisnummer=" .$postcodehuisnummer ."&fietskeuze=" . $fietskeuze . "&opties=" . $row['optie'] . "&optieid=" . $row['opties_id'] . "' '><img src=".$src." width='400px'><br>".$row['optie'];"</a><br /><br /> ";
        echo '</div>';
        $aantal++;
        if ($aantal==3) {echo "<tr>"; $aantal=0;} 
    }
    echo "</tr></tr>";
    echo "</table>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:27:55.630

您应该简单地将您的值连接到 URL 的末尾。

```
$row['optie'] = str_replace('\r', '<br>', $row['optie']); 
```

# jquery - jquery暂停/恢复计时器切换

> ID：15340426
> 
> 赞同：0
> 
> 时间：2013-03-11T13:56:40.163
> 
> 标签：jquery, toggle

我有这个简单的倒计时 -

```
$(document).ready(function() {

var Clock = {
    totalSeconds: 800,

    start: function () {
        var self = this;

        this.interval = setInterval(function () {
            self.totalSeconds -= 1;

            $("#hour").text(Math.floor(self.totalSeconds / 3600));
            $("#min").text(Math.floor(self.totalSeconds / 60 % 60));
            $("#sec").text(parseInt(self.totalSeconds % 60));
        }, 1000);
    },

    pause: function () {
        clearInterval(this.interval);
        delete this.interval;
    },

    resume: function () {
        if (!this.interval) this.start();
    }
};

Clock.start();

$('#pauseButton').click(function () { Clock.pause(); });
$('#resumeButton').click(function () { Clock.resume(); });

}); 
```

我真的只想要一个暂停/恢复按钮作为一件事

我怎么转

```
$('#pauseButton').click(function () { Clock.pause(); }); 
```

所以它切换暂停/恢复命令

编辑....

我将如何获得 CMS (PHP) 来决定 totalSeconds 是多少？如您所见，它当前将位于 .js 文件中，所以我想我需要在 html/php 页面底部添加 totalSeconds 并由输入的 cms 编辑/修改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:17:47.887

如果您可以使用 jquery ui，您可以使用复选框来切换状态

html

```
<input type="checkbox" id="pauseResume" /><label for="pauseResume"></label> 
```

javascript

```
$(document).ready(function() {
var Clock = {
    totalSeconds: 800,

    start: function () {
        var self = this;

        this.interval = setInterval(function () {
            self.totalSeconds -= 1;

            $("#hour").text(Math.floor(self.totalSeconds / 3600));
            $("#min").text(Math.floor(self.totalSeconds / 60 % 60));
            $("#sec").text(parseInt(self.totalSeconds % 60));
        }, 1000);
    },

    pause: function () {
        clearInterval(this.interval);
        delete this.interval;
    },

    resume: function () {
        if (!this.interval) this.start();
    }
};

Clock.start();

$('#pauseResume').click(function () {  
    if ($(this).is(":checked"))
    {
        Clock.pause();
        $(this).next('label').text("Resume");
    }
    else
    {
        Clock.resume();
        $(this).next('label').text("Pause");
    }
});
$('#pauseResume').button();
$('#pauseResume').next('label').text("Pause");

}); 
```

[http://jsfiddle.net/axrwkr/6usZ2](http://jsfiddle.net/axrwkr/6usZ2)

这是一个不使用 jquery ui 的，您必须自己设置复选框的样式

[http://jsfiddle.net/axrwkr/qv62T](http://jsfiddle.net/axrwkr/qv62T)

如果您只想在两个功能之间切换，请查看以下问题

[jquery在两个功能之间单击/切换](https://stackoverflow.com/a/4911660/2022859)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:27:08.467

我可以从您的代码中看到的最简单的方法是在您单击暂停按钮时检查间隔 ID 是否存在......

```
$('#pauseButton').click(function () {
    if (Clock.interval) {
        Clock.pause();
    } else { 
        Clock.resume();
    }
}); 
```

如果 ID 未定义，则它知道它已经暂停。

# mysql - 使用每行的多个 where 子句更新多行。（update_batch 只能处理 1 个 where 子句）

> ID：15340428
> 
> 赞同：0
> 
> 时间：2013-03-11T13:56:44.923
> 
> 标签：mysql, sql-update

我正在尝试像这样更新我的表：

```
Update MyTable 
SET value     = 1 
WHERE game_id = 1,
      x       =-4,
      y       = 8

SET value     = 2 
WHERE game_id = 1,
      x       =-3,
      y       = 7

SET value     = 3 
WHERE game_id = 2,
      x       = 5,
      y       = 2 
```

我可以这样做，`foreach()`但这会发送超过 50 个单独的查询，这非常慢。这就是为什么我希望将它组合成 1 个大查询。

（我确实为每一行使用了一个**id ，但****game_id**、**x**和**y**的组合是我用来识别我需要的行的方法。）

此处描述的 codeIgniter 的 update_batch() 函数： [使用 CodeIgniter 更新批处理](https://stackoverflow.com/questions/6264955/update-batch-with-codeigniter) 很有帮助并且几乎完美，但它只允许 1 个单个 where 子句，您不能（据我理解和尝试）输入具有多个 where 子句的数组。

我还检查了这个问题： [MYSQL UPDATE SET on the Same Column but with multiple WHERE Clauses](https://stackoverflow.com/questions/9368505/mysql-update-set-on-the-same-column-but-with-multiple-where-clauses) 但它只允许多行更新只包含一个不同的 WHERE 子句，我需要多个 WHERE 子句！:)

Anwsers 可以使用简单的 SQL，也可以使用 php（和 CodeIgniter）或其他方式。我希望以任何可能的方式解决这个问题；）

我真的可以使用建议/帮助！=D

编辑：

对不起，问题不够清楚，我只是改变了它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:00:00.153

看来我你需要逻辑运算符`AND`：

```
UPDATE MyTable
SET value = 1
WHERE game_id = 1
AND x         = -4
AND y         = 8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:00:53.490

我不熟悉多个 WHERE 子句的布局方式，为什么不这样做

```
UPDATE MyTable 
SET value     = 1 
WHERE game_id = 1
AND x         = -4
AND y         = 8 
```

# jquery - DropDownList 在回发或验证失败时没有要选择的项目

> ID：15340433
> 
> 赞同：0
> 
> 时间：2013-03-11T13:57:07.517
> 
> 标签：jquery, asp.net-mvc

我的视图“州”和“区”上有两个 DropDownList。我使用以下代码填充“状态”DDL。

控制器：-

```
var districts = (from r in db.Districts
                     select new { r.DistrictName });
ViewBag.DistrictName = new SelectList(districts, "DistrictName", "DistrictName"); 
```

看法：-

```
@Html.DropDownList("State", ViewBag.StateName as SelectList, "Select a State") 
```

现在，每当一个人选择州时，JSON致电填充了“地区的DDL。

控制器：-

```
[HttpGet]
public JsonResult DistrictList(string Id)
{
    var districts = (from d in db.Districts
                        where d.State.StateName == Id
                        select new { d.DistrictName });
    return Json(new SelectList(districts, "DistrictName", "DistrictName"), JsonRequestBehavior.AllowGet);
} 
```

看法：-

```
<select id="District"  name="District"></select>
<script type="text/jscript">
    $(function () {
        $('#State').change(function () {
            $.getJSON('/Application/DistrictList/' + $('#State').val(), function (data) {
                var items = '<option>Select a District</option>';
                $.each(data, function (i, districts) {
                    items += "<option value='" + districts.Text + "'>" + districts.Text + "</option>";
                });
                $('#District').html(items);
            });
        });
    });
</script> 
```

它工作正常，但问题是，每当任何验证失败时，'District' DDL 都会丢失其数据。我再次需要在“州”中进行新的选择，然后“区”从 Json resutl 中获取数据。如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:16:00.867

给你的第一个选项一个虚拟值，然后在后端检查它：

```
var items = '<option value="-1">Select a District</option>'; 
```

# iphone - 调用 becomeFirstResponder 时的 EXEC_BAD_ACCESS

> ID：15340434
> 
> 赞同：1
> 
> 时间：2013-03-11T13:57:10.103
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我创建了一个带有一些箭头键的键盘，允许用户在表格视图中的所有文本字段之间使用箭头按钮进行导航。（每个单元格 2 个）

在某些情况下单元格将被禁用，所以我有一个递归调用来跳过它们。IE。如果用户按下右箭头，并且 textField 被禁用，则再次递归调用右箭头以跳过它。

我还为需要自己完成的任何滚动设置动画。但是，最近发生了一些事情，当用户导航到新的 textField 并完成滚动动画后尝试设置 firstResponder 时，会导致 EXEC_BAD_ACCESS。

我能够从第一个单元格开始重现此问题并向下导航 2 次。这是代码，按照我可以显示的最好的顺序排列，并进行了很多编辑（就像其他 3 个箭头按钮的所有代码一样，所以你只看到调用的行）

```
//receive the arrow button pressed first

_arrowButton = arrowButton;
@try
{
    switch (_arrowButton.tag)
    {

        case NumericKeyboardViewDownArrow:
            destinationIndexPath =  [NSIndexPath  indexPathForRow:currentIndexPath.row + 1 inSection:currentIndexPath.section];
            newTag = currentTextField.tag;
            break;

        default:
            break;
    }

        // check bounds of the intended index path and return if out of bounds
    if ((destinationIndexPath.row == -1) || (destinationIndexPath.row >= [_tableView numberOfRowsInSection:[destinationIndexPath section]])) {
        destinationIndexPath = currentIndexPath;
        return;
    }

    /* 
     Animation for scrolling
    */

    CGPoint current = [_tableView contentOffset];

    // if we must animate up
    if (destinationIndexPath.row < currentIndexPath.row)
    {
            // up code here
    }

    // if we must animate down
    else if (destinationIndexPath.row > currentIndexPath.row)
    {
        // always scroll animate for down
        [_tableView setContentOffset:CGPointMake(0, current.y + _tableView.rowHeight) animated:YES];
    }

    // if we only move left or right
    else
    {
            // left and right code here
    }

    //update our current location
    currentIndexPath = destinationIndexPath;
@catch (NSException *e)
{
    return;
} 
```

然后在动画完成动画方法中完成动画后

```
- (void)scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView
 {
//after the animation is done, set the responder
nextTextFieldSelection = (UITextField *)[[_tableView cellForRowAtIndexPath:currentIndexPath] viewWithTag:newTag];
NSLog(@"nexttextfield%@",nextTextFieldSelection);
 if (nextTextFieldSelection)
 {
    //CRASH OCCURS HERE [nextTextFieldSelection becomeFirstResponder];
 }

[self checkTextFieldIsDisabled];
} 
```

在该方法结束时，我在一个新的文本字段中，我们检查是否禁用。在重现此崩溃时，它只是退出，因为我要进入的 textFields 没有被禁用。

在调用新的 becomeFirstResponder 之前，我尝试让第一响应者辞职，但这似乎没有任何效果。不过，我可能没有在合适的位置辞职。有什么想法会出现内存问题吗？

谢谢

# javascript - Jquery toggle 仅在 toggle() 中使用参数时才更改 div 顺序

> ID：15340438
> 
> 赞同：0
> 
> 时间：2013-03-11T13:57:24.043
> 
> 标签：javascript, jquery, html

我有这些 div

```
<div id="fechaPartida">
            <label>Partida </label>
            <input type="text" class=".ui-icon-calendar dates" name="date" id="dateSV"  value="" /> 
        </div>
        <span id="hideit">
        <div id="fechaRegreso"> 
            <label>Regreso</label>
            <input type="text" class=".ui-icon-calendar dates" name="date" id="dateFV" value="" />
        </div>
        </span>
        <div id="soloIda">
            </br>
            <input type="checkbox" class="" name="" id="soloIdaCheck" value=""/> Solo ida
        </div> 
```

我正在隐藏并显示（切换）带有跨度“hideit”的div。它切换得很好

```
$('#soloIdaCheck').click(function(){
        $('#hideit').toggle();

}); 
```

但我希望 jquery 使用 toggle('slow') 为您提供很酷的效果，但是当我这样做时，div 顺序会发生变化，因为我隐藏的 div 现在是最后一个

检查此图像以更好地理解它

![在此处输入图像描述](../Images/05581447e958923205db0ee208288b63.png)

这是 div 的 CSS

```
#fechas{
    width:100%;
    height:50px;
}

#fechaPartida{
    float:left;
    width:170px;
}
#hideit{
    display:inline-block;
}
#fechaRegreso{
    float:left;
    width:150px;
}
#soloIda{
    padding-top:5px;
    float:left;
    width:80px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:02:53.753

您可以使用[event.preventDefault()：](http://api.jquery.com/event.preventDefault/)

说明：如果调用该方法，则不会触发事件的默认动作。

```
$('#soloIdaCheck').click(function(){
        event.preventDefault();
        $('#hideit').toggle();    
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:06:32.947

这对我来说似乎可以使用`$('#hideit').toggle("slow");`

[http://jsfiddle.net/dazziep/EYbDd/](http://jsfiddle.net/dazziep/EYbDd/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:27:32.713

只是改变了一些小东西......似乎在我的工作正常，不知道这是否有帮助？

HTML

```
<div id="fechaPartida">
    <label>Partida</label>
    <input type="text" class=".ui-icon-calendar dates" name="date" id="dateSV" value="" />
</div>
<div id="fechaRegreso" class="hideit">
    <label>Regreso</label>
    <input type="text" class=".ui-icon-calendar dates" name="date" id="dateFV" value="" />
</div>
<div id="soloIda">
    <input type="checkbox" class="" name="" id="soloIdaCheck" value="" />Solo ida
</div> 
```

javascript

```
$('#soloIdaCheck').click(function () {
    $('.hideit').toggle("slow");
}); 
```

css

```
#fechas {
    width:100%;
    height:50px;
}
#fechaPartida {
    float:left;
    width:170px;
}
#hideit {
    display:inline-block;
}
#fechaRegreso {
    float:left;
    width:150px;
}
#soloIda {
    padding-top:20px;
    margin-left:10px;
    float:left;
    width:80px;
} 
```

编辑：-抱歉刚刚阅读了其他评论，您的订单不再有问题..我的坏.. DOH！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-28T12:09:11.660

这是最好的视觉解决方案：http: [//www.learningjquery.com/2009/02/slide-elements-in-different-directions](http://www.learningjquery.com/2009/02/slide-elements-in-different-directions)

横向滑动比慢速效果更漂亮。我知道这是一个品味问题，但绝大多数最终用户都拥有这种品味。

# jax-ws - SOAP 请求中不包含 JAX-WS Null 参数

> ID：15340442
> 
> 赞同：1
> 
> 时间：2013-03-11T13:57:35.473
> 
> 标签：jax-ws

我的问题是，当通过 SOAP UI（JAX-WS 客户端）从 Java 生成的代码发送请求时，空参数包含在 SOAP 生成的请求中。

我正在从第三方 WSDL 生成肥皂客户端，因此对 WSDL 修改没有任何控制权。

来自 Java 生成客户端的消息，没有具有空值的参数。我必须有空元素，它们是`<authId>`&`<reserved>`

```
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
    <S:Body>
        <BillPayment xmlns="http://action.one.worldnet.org">
        <userName>test</userName>
        <password>testing2</password>
        <AccountNumber>10385699</AccountNumber>
        <amount>0000000002300</amount>
        <tranDate>20130311</tranDate>
        <tranTime>064536</tranTime>
        <bankMnemonic>TIMEPAY</bankMnemonic>
        </BillPayment>
    </S:Body>
</S:Envelope> 
```

来自 SOAPUI 的消息，其中包含值为 null 的元素。

```
<soap:Body>
    <soap:Envelope>"
      <act:BillPayment>
         <act:userName>test</act:userName>
         <act:password>testing2</act:password>
         <act:AccountNumber>9132388</act:AccountNumber>
         <act:authId></act:authId>
         <act:amount>0000000010000</act:amount>
         <act:tranDate>20130311</act:tranDate>
         <act:tranTime>172345</act:tranTime>
         <act:bankMnemonic>THIRDParty</act:bankMnemonic>
         <act:reserved></act:reserved>
      </act:BillPayment>
   </soap:Body>
</soap:Envelope>" 
```

以下是我生成的 BillPayment 类

```
@XmlAccessorType(XmlAccessType.FIELD) 
```

@XmlType(name = "", propOrder = { "userName", "password", "accountNumber", "authId", "amount", "tranDate", "tranTime", "bankMnemonic", "reserved" }) @XmlRootElement (name = "BillPayment") 公共类 BillPayment {

```
@XmlElementRef(name = "userName", namespace = "http://action.wirelessnet.org", type = JAXBElement.class)
protected JAXBElement<String> userName;
@XmlElementRef(name = "password", namespace = "http://action.wirelessnet.org", type = JAXBElement.class)
protected JAXBElement<String> password;
@XmlElementRef(name = "AccountNumber", namespace = "http://action.wirelessnet.org", type = JAXBElement.class)
protected JAXBElement<String> accountNumber;
@XmlElementRef(name = "authId", namespace = "http://action.wirelessnet.org", type = JAXBElement.class)
protected JAXBElement<String> authId;
@XmlElementRef(name = "amount", namespace = "http://action.wirelessnet.org", type = JAXBElement.class)
protected JAXBElement<String> amount;
@XmlElementRef(name = "tranDate", namespace = "http://action.wirelessnet.org", type = JAXBElement.class)
protected JAXBElement<String> tranDate;
@XmlElementRef(name = "tranTime", namespace = "http://action.wirelessnet.org", type = JAXBElement.class)
protected JAXBElement<String> tranTime;
@XmlElementRef(name = "bankMnemonic", namespace = "http://action.wirelessnet.org", type = JAXBElement.class)
protected JAXBElement<String> bankMnemonic;
@XmlElementRef(name = "reserved", namespace = "http://action.wirelessnet.org", type = JAXBElement.class)
protected JAXBElement<String> reserved;

/**
 * Gets the value of the userName property.
 * 
 * @return possible object is {@link JAXBElement }{@code <}{@link String }
 *         {@code >}
 * 
 */
public JAXBElement<String> getUserName() {
    return userName;
}

/**
 * Sets the value of the userName property.
 * 
 * @param value
 *            allowed object is {@link JAXBElement }{@code <}{@link String }
 *            {@code >}
 * 
 */
public void setUserName(JAXBElement<String> value) {
    this.userName = ((JAXBElement<String>) value);
}

/**
 * Gets the value of the password property.
 * 
 * @return possible object is {@link JAXBElement }{@code <}{@link String }
 *         {@code >}
 * 
 */
public JAXBElement<String> getPassword() {
    return password;
}

/**
 * Sets the value of the password property.
 * 
 * @param value
 *            allowed object is {@link JAXBElement }{@code <}{@link String }
 *            {@code >}
 * 
 */
public void setPassword(JAXBElement<String> value) {
    this.password = ((JAXBElement<String>) value);
}

/**
 * Gets the value of the accountNumber property.
 * 
 * @return possible object is {@link JAXBElement }{@code <}{@link String }
 *         {@code >}
 * 
 */
public JAXBElement<String> getAccountNumber() {
    return accountNumber;
}

/**
 * Sets the value of the accountNumber property.
 * 
 * @param value
 *            allowed object is {@link JAXBElement }{@code <}{@link String }
 *            {@code >}
 * 
 */
public void setAccountNumber(JAXBElement<String> value) {
    this.accountNumber = ((JAXBElement<String>) value);
}

/**
 * Gets the value of the authId property.
 * 
 * @return possible object is {@link JAXBElement }{@code <}{@link String }
 *         {@code >}
 * 
 */
public JAXBElement<String> getAuthId() {
    return authId;
}

/**
 * Sets the value of the authId property.
 * 
 * @param value
 *            allowed object is {@link JAXBElement }{@code <}{@link String }
 *            {@code >}
 * 
 */
public void setAuthId(JAXBElement<String> value) {
    this.authId = ((JAXBElement<String>) value);
}

/**
 * Gets the value of the amount property.
 * 
 * @return possible object is {@link JAXBElement }{@code <}{@link String }
 *         {@code >}
 * 
 */
public JAXBElement<String> getAmount() {
    return amount;
}

/**
 * Sets the value of the amount property.
 * 
 * @param value
 *            allowed object is {@link JAXBElement }{@code <}{@link String }
 *            {@code >}
 * 
 */
public void setAmount(JAXBElement<String> value) {
    this.amount = ((JAXBElement<String>) value);
}

/**
 * Gets the value of the tranDate property.
 * 
 * @return possible object is {@link JAXBElement }{@code <}{@link String }
 *         {@code >}
 * 
 */
public JAXBElement<String> getTranDate() {
    return tranDate;
}

/**
 * Sets the value of the tranDate property.
 * 
 * @param value
 *            allowed object is {@link JAXBElement }{@code <}{@link String }
 *            {@code >}
 * 
 */
public void setTranDate(JAXBElement<String> value) {
    this.tranDate = ((JAXBElement<String>) value);
}

/**
 * Gets the value of the tranTime property.
 * 
 * @return possible object is {@link JAXBElement }{@code <}{@link String }
 *         {@code >}
 * 
 */
public JAXBElement<String> getTranTime() {
    return tranTime;
}

/**
 * Sets the value of the tranTime property.
 * 
 * @param value
 *            allowed object is {@link JAXBElement }{@code <}{@link String }
 *            {@code >}
 * 
 */
public void setTranTime(JAXBElement<String> value) {
    this.tranTime = ((JAXBElement<String>) value);
}

/**
 * Gets the value of the bankMnemonic property.
 * 
 * @return possible object is {@link JAXBElement }{@code <}{@link String }
 *         {@code >}
 * 
 */
public JAXBElement<String> getBankMnemonic() {
    return bankMnemonic;
}

/**
 * Sets the value of the bankMnemonic property.
 * 
 * @param value
 *            allowed object is {@link JAXBElement }{@code <}{@link String }
 *            {@code >}
 * 
 */
public void setBankMnemonic(JAXBElement<String> value) {
    this.bankMnemonic = ((JAXBElement<String>) value);
}

/**
 * Gets the value of the reserved property.
 * 
 * @return possible object is {@link JAXBElement }{@code <}{@link String }
 *         {@code >}
 * 
 */
public JAXBElement<String> getReserved() {
    return reserved;
}

/**
 * Sets the value of the reserved property.
 * 
 * @param value
 *            allowed object is {@link JAXBElement }{@code <}{@link String }
 *            {@code >}
 * 
 */
public void setReserved(JAXBElement<String> value) {
    this.reserved = ((JAXBElement<String>) value);
} 
```

}

寻求专家建议。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:32:33.287

您没有发布您的 WSDL。我怀疑你`<authId>`在`minOccurs=0`模式定义中有。我不确定您是在进行自上而下还是自下而上的设计。如果您使用的是自顶向下，您可以简单地添加`minOccurs=1`WSDL 模式定义部分。如果您使用的是自下而上的设计方法，您可以在 Web 服务代码中使用以下注释

```
@XmlElement(nillable=true, required=true)
String authId; 
```

请注意，此注释需要 Metro 2.0 (JAXB 2.2) 或更高版本。

**根据评论编辑：**

如果可以升级到 JDK 7，它应该包含 JAX-WS 2.2。但是，如果您因任何原因无法升级整个 JDK，您可以按照[此处](http://weblogs.java.net/blog/ramapulavarthi/archive/2009/04/tip_for_using_j.html)的说明，通过仅升级和文件来使用称为[Endorsed Standards Override Mechanism的功能。](http://docs.oracle.com/javase/6/docs/technotes/guides/standards/)`jaxws-api.jar``jaxb-api.jar`

# magento - 在 view.phtml 中创建一个块

> ID：15340450
> 
> 赞同：0
> 
> 时间：2013-03-11T13:58:04.313
> 
> 标签：magento, view, block, add, php

我想在 view.phtml 页面中添加一个块。

查看产品时，该块将位于“描述”部分的上方。该块将显示适合特定产品的不同汽车。因此，每次创建/编辑产品时，我都可以在“产品信息”屏幕的“常规”选项卡中列出适合该零件的汽车（名称、描述、简短描述、SKU 等...）

我一直在研究如何完成这项工作，但我不确定需要编辑哪个 XML 文件等等。

是否有关于将自定义块添加到 view.phtml 文件的分步说明指南？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:04:32.057

你应该编辑`app/design/frontend/#package#/#theme#/layout/catalog.xml`

在其中，您应该将该块添加为 view.phtml 块的子级。您可以在`<catalog_product_view>`标签中按以下方式执行此操作：

在里面`<reference name="content">`

将带有您的类型和名称的块放入`<block type="catalog/product_view`

然后您可以使用 $this->getChildHtml('name') 调用它

# dom - 将数据属性从 DOM 传递到 AngularJS 控制器中的功能

> ID：15340452
> 
> 赞同：0
> 
> 时间：2013-03-11T13:58:07.170
> 
> 标签：dom, controller, angularjs, custom-data-attribute

我正在使用 AngularJs 来更改某些 DOM 元素的可见性。可见性取决于在下拉列表中选择的值。更具体地说，在所选`option`标签的数据属性上。我无法通过 AngularJs 填充下拉列表，因为它是现有的 ASP.NET 控件。

我考虑过`ng-change`在我的控制器上使用和调用一个方法，但我必须传递一个参数。这个参数在 DOM 中，而不是在我的控制器中。显然，我想保持这种方式，而不是访问我的控制器中的 DOM。

我做了一个[jsFiddle](http://jsfiddle.net/7ttr6/1/)，但这是我的代码：

**HTML**

```
<body ng-app>
    <div ng-controller="VehicleDetailsCtrl">
         <select ng-model="selectedValue" ng-change="update()">
             <option value="1" data-carType="Car">Car 1</option>
             <option value="2" data-carType="Car">Car 2</option>
             <option value="3" data-carType="Truck">Truck</option>
        </select>
        <div ng-hide="isTruck">
            Hide if a truck was selected.
        </div>
    </div>
</body> 
```

**Javascript**

```
function VehicleDetailsCtrl($scope) {
    $scope.isTruck = false;
    $scope.selectedValue = null;
    $scope.update = function() {
        $scope.isTruck = !$scope.isTruck;
        // hide div here?
        // but then I'd need to know the selected option, 
        // but I don't want to reference the DOM here.
    };
} 
```

我是否以错误的方式处理这个问题？

请记住，我不能让 AngularJs 填充，`select`因为 ASP.NET 已经为我做到了（我目前无法更改）。

此外，我需要`selectedValue`（用于回发并将其保存到数据库）和`data-carType`（用于更改 DOM）。我在运行时不知道`value`Truck 的 id （或 ）`option`是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T15:10:12.717

使用指令创建车辆类型的对象并观察模型值`select`以更新您的`isTruck`变量：

HTML：

```
 <select ng-model="selectedValue" check-is-truck> 
```

JS：

```
var app = angular.module('myApp', []);

app.directive('checkIsTruck', function(){
    return function(scope, element, attrs){
        scope.vehicleTypes = {};
        scope.selectedType = false;
        angular.forEach(element.find('option'), function(item, idx) {
            scope.vehicleTypes[item.value] = item.dataset.cartype; 
        });  
        scope.$watch('selectedValue', function() {
            scope.selectedType=scope.vehicleTypes[scope.selectedValue];
            scope.isTruck = scope.selectedType == 'Truck'
        })
    };
})

function VehicleDetailsCtrl($scope) {
    $scope.isTruck = false;
    $scope.selectedValue = null;
} 
```

演示：http: [//jsfiddle.net/7ttr6/2/](http://jsfiddle.net/7ttr6/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:09:33.697

您不需要 ng-change 来更新值，因为 ng-model 会处理这个问题。在 ng-hide 中，您只需将`selectedValue`与“卡车”选项（int 3）的值进行比较：

```
<select ng-model="selectedValue">
     <option value="1" data-carType="Car">Car 1</option>
     <option value="2" data-carType="Car">Car 2</option>
     <option value="3" data-carType="Truck">Truck</option>
</select>
<div ng-hide="selectedValue==3">
    Hide if a truck was selected.
</div> 
```

[小提琴](http://jsfiddle.net/adibih/wSu6q/)

# javascript - 返回数组列表

> ID：15340453
> 
> 赞同：-1
> 
> 时间：2013-03-11T13:58:12.763
> 
> 标签：javascript, arrays

我有一个可以接受多个参数的 API 方法，但这些参数必须是数组。我不想做的是为每个数组调用每个 api.someMethod() - 我试图将它们集中在一个调用中。

例如：

```
function getArrays() {
    var arr1 = ['1','2','3'];
    var arr2 = ['4','5','6'];
    var arr3 = ['7','8'];

    return [ arr1, arr2, arr3 ]
} 
```

我为缺乏明确性表示歉意。我打电话给：

```
api.someMethod( getArrays() ) 
```

发生的情况是我的返回将我的数组包装在一个数组中，因为“someMethod”需要一个逗号分隔的数组列表，所以不会被接受。

```
api.someMethod( arr1, arr2, arr3 ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:00:45.887

使用[`apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)而不是`call`. 然后，您可以传递一个参数数组，而不必将每个参数都设为单独的参数。

```
api.apply(context, [[arr1], [arr2], [arr3]]); 
```

编辑以响应更新的问题。

这是采取的方法：

用作上下文（如果`api`您直接调用该方法，它将是）。

```
api.someMethod.apply( api, getArrays() ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:03:42.133

> 我不想做的是为每个数组调用每个 api.call - 我试图将它们集中在一个调用中。

可以通过以下方式处理具有可变数量参数的函数：

```
function variableArgs(){
  console.log(arguments.length);
  for(var i =0;i<arguments.length;i++){
    console.log(arguments[i]);
  }
}
variableArgs("hello")
variableArgs("hello","there","how","are","you"); 
```

至于返回一个数组（如果这是你想要的），你可以：

```
function variableArgs(){
  var ret=[];
  for(var i =0;i<arguments.length;i++){
    console.log("ret is:",ret);
    //processing
    ret=ret.concat(arguments[i]);
  }
  return ret;
}
console.log("result of variableArgs is:",variableArgs([1,2],[3,4],[5,6])) 
```

# c# - 具有多个 DictionaryEntry 的 foreach

> ID：15340461
> 
> 赞同：4
> 
> 时间：2013-03-11T13:58:39.563
> 
> 标签：c#, foreach

我正在尝试使用 3 个三个已经存在的 resx 文件的内容写入 ListView。仅将以下循环与其中一个文件一起使用会产生接近我想要的结果，但我需要将相同的循环与多个 DictionaryEntrys 一起使用。我正在尝试做的看起来像这样..

```
ResXResourceReader rdr0 = new ResXResourceReader(textPath1.Text + ".resx");
ResXResourceReader rdr1 = new ResXResourceReader(textPath1.Text + ".es.resx");
ResXResourceReader rdr2 = new ResXResourceReader(textPath1.Text + ".fr.resx");

foreach ((DictionaryEntry d in rdr0) && (DictionaryEntry e in rdr1))
{
    string[] row = { d.Key.ToString(), d.Value.ToString(), e.Value.ToString() };
    var listViewItem = new ListViewItem(row);
    listResx.Items.Add(listViewItem);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T13:59:49.803

`foreach`关键字无法做到这一点。

相反，您可以使用 LINQ[`.Zip()`方法](http://msdn.microsoft.com/en-us/library/dd267698.aspx)：

```
foreach(var item in rdr0.Zip(rdr1, (d, e)
         => new [] { d.Key.ToString(), d.Value.ToString(), e.Value.ToString() })) 
```

# android - 从主屏幕返回应用程序时未调用 onResume() 和 onRestart()

> ID：15340470
> 
> 赞同：0
> 
> 时间：2013-03-11T13:59:15.670
> 
> 标签：android

我是安卓新手。目前正在为Android构建一个简单的游戏。

我的问题是当按下主页按钮时，它会调用 onPause()，有时它会同时调用 onPause() 和 onStop()。但是，当我尝试返回游戏（通过单击主屏幕中的图标）时，既不会调用 onResume() 也不会调用 onRestart()。游戏一直在渲染，但我无法与游戏互动。触摸事件不起作用。当我尝试触摸按钮时，什么也没有发生，几秒钟后，它说“没有响应”，然后我必须强制关闭。

顺便提一句。我还注意到，当转到主屏幕时，会调用 MainGamePanel 中的 surfaceDestroyed() 函数。我以为这个函数会阻塞线程，但实际上线程在主屏幕时仍在运行。

有人可以告诉我为什么 onRestart() 或 onResume() 没有触发以及为什么从主屏幕返回游戏后触摸事件不起作用？

非常感谢。

我重写 onStop()、onPause()、onResume 和 onRestart() 以在调用函数时在日志中输出一条消息：

```
@Override
    protected void onStop() {
        Log.d(TAG, "Stopping...");
        super.onStop();
    } 
```

下面是我的活动和表面视图的代码。我有一个 ActivityMainGame 扩展了 Activity：

```
public class ActivityMainGame extends Activity 
{
    private MainGamePanel mainGamePanel;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_game);

        Log.w(TAG, "Creating the game");

        //set our MainGamePanel as the view
        mainGamePanel = new MainGamePanel(this);
        setContentView(mainGamePanel);
    }
} 
```

我创建了一个 MainGamePanel 扩展了 SurfaceView 实现了 SurfaceHolder.Callback，这个类启动了一个线程来在画布上渲染东西：

```
public class MainGamePanel extends SurfaceView implements SurfaceHolder.Callback 
{
    private MainGameThread thread;

    public MainGamePanel(Context context) 
    {
        super(context);
        // adding the callback (this) to the surface holder to intercept events
        getHolder().addCallback(this);

        // create the game loop thread
        thread = new MainGameThread(getHolder(), this);

        // make the GamePanel focusable so it can handle events
        setFocusable(true);
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) 
    {
        if (thread.getState() == Thread.State.NEW)
        {
            thread.setRunning(true);
            thread.start();
        }
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder)
    {
        boolean retry = true;
        while (retry)
        {
            try
            {
                thread.join();
                retry = false;
            }
            catch (InterruptedException e)
            {
                Log.d(TAG, e.getMessage());
            }
        }
    } 
```

应阿迪尔的要求，我将错误信息放在 logcat 中。这些是我的游戏被强制关闭时的消息：

```
03-11 15:04:21.491: E/ActivityManager(58): ANR in com.myslotgame (com.myslotgame /.ActivityMainGame)
03-11 15:04:21.491: E/ActivityManager(58): Reason: keyDispatchingTimedOut
03-11 15:04:21.491: E/ActivityManager(58): Load: 0.52 / 0.19 / 0.18
03-11 15:04:21.491: E/ActivityManager(58): CPU usage from 551359ms to 51ms ago:
03-11 15:04:21.491: E/ActivityManager(58):   system_server: 4% = 3% user + 0% kernel / faults: 5766 minor
03-11 15:04:21.491: E/ActivityManager(58):   adbd: 0% = 0% user + 0% kernel / faults: 55 minor
03-11 15:04:21.491: E/ActivityManager(58):   m.android.phone: 0% = 0% user + 0% kernel / faults: 17 minor
03-11 15:04:21.491: E/ActivityManager(58):   ndroid.launcher: 0% = 0% user + 0% kernel / faults: 1625 minor
03-11 15:04:21.491: E/ActivityManager(58):   qemud: 0% = 0% user + 0% kernel
03-11 15:04:21.491: E/ActivityManager(58):   events/0: 0% = 0% user + 0% kernel
03-11 15:04:21.491: E/ActivityManager(58):   zygote: 0% = 0% user + 0% kernel / faults: 1201 minor
03-11 15:04:21.491: E/ActivityManager(58):   id.defcontainer: 0% = 0% user + 0% kernel / faults: 77 minor
03-11 15:04:21.491: E/ActivityManager(58):   logcat: 0% = 0% user + 0% kernel
03-11 15:04:21.491: E/ActivityManager(58):   rild: 0% = 0% user + 0% kernel
03-11 15:04:21.491: E/ActivityManager(58):   ndroid.settings: 0% = 0% user + 0% kernel / faults: 9 minor
03-11 15:04:21.491: E/ActivityManager(58):   roid.alarmclock: 0% = 0% user + 0% kernel / faults: 14 minor
03-11 15:04:21.491: E/ActivityManager(58):   re-initialized>: 0% = 0% user + 0% kernel / faults: 7 minor
03-11 15:04:21.491: E/ActivityManager(58):   d.process.media: 0% = 0% user + 0% kernel / faults: 9 minor
03-11 15:04:21.491: E/ActivityManager(58):   com.android.mms: 0% = 0% user + 0% kernel / faults: 16 minor
03-11 15:04:21.491: E/ActivityManager(58):  +myslotgame: 0% = 0% user + 0% kernel
03-11 15:04:21.491: E/ActivityManager(58):  -myslotgame: 0% = 0% user + 0% kernel
03-11 15:04:21.491: E/ActivityManager(58): TOTAL: 7% = 6% user + 1% kernel + 0% irq + 0% softirq 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:31:28.540

`onStop()`不保证会被调用，因为Android有时可能不得不在后台提前结束游戏而不事先通知，但`onPause()`总是会被调用！因此，在该`onPause()`方法中，执行您在停止时会执行的操作，例如结束渲染线程，但您也可以放置一个 if 语句，`if (isFinishing())`并执行您在活动实际结束时执行的操作。注意：如果您的活动扩展了类，您

只能使用该方法，您的类在此实例中。`isFinishing()``Activity``ActivityMainGame`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:31:48.450

我认为当您进入主屏幕时，将调用 onPause 和 onStop 和 onDestroy。您可以在强制关闭后发布 logcat。

# c# - C# - 无法解析使用 Microsoft xsd.exe 生成的 XML 文件

> ID：15340472
> 
> 赞同：1
> 
> 时间：2013-03-11T13:59:26.487
> 
> 标签：c#, xml, serialization, xsd, deserialization

我已经使用 XSD 文件中的 xsd.exe 创建了一个 C# 类。根元素称为 ODX。我希望能够通过以类似于以下方式解析 XML 文件来填充 ODX 对象：

```
namespace OdxLib
{
    class Program
    {
        static void Main(string[] args)
        {
            ODX odxDocument;
            using (var stream = new FileStream("C:\\MCA2014.40_NEW.odx", FileMode.Open))
            {
                var serializer = new XmlSerializer(typeof(ODX));
                odxDocument = (ODX) serializer.Deserialize(stream);
                Console.WriteLine(odxDocument.ToString());
            }
        }
    }
} 
```

这对我来说是正确的。无论如何，我收到以下错误：

```
InvalidOperationException
Unable to generate a tempoprary class

error CS0030: Unable to convert type 'it.intecs.odx.DISABLEDAUDIENCEREFS' to 'it.intecs.odx.ENABLEDAUDIENCEREFS'.
error CS0029: Unable to implicitly convert type 'it.intecs.odx.ENABLEDAUDIENCEREFS' to 'it.intecs.odx.DISABLEDAUDIENCEREFS'. 
```

我不明白这个错误的原因。

这是一个 ODX 文件的示例（完整文件超过 150000 行）：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<ODX MODEL-VERSION="2.0.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="odx.xsd">
<!--created by CANdelaStudio::ODXExport201.dll 7.1.101 on 2012-06-12T11:33:41+02:00-->
  <?CANdelaTemplateManufacturer 12?>
  <?CANdelaTemplateName New ECU 2.9?>
  <?CANdelaTemplateVersion 3.0.0?>
  <?CANdelaProtocolStandard UDS?>
  <?ASAMOdxExport201.dll 7.1.101?>
  <DIAG-LAYER-CONTAINER ID="_XXX2014_990">
    <SHORT-NAME>XXX</SHORT-NAME>
    <LONG-NAME>XXX</LONG-NAME>
    <ADMIN-DATA>
      <LANGUAGE>eng</LANGUAGE>
      <DOC-REVISIONS>
        <DOC-REVISION>
        ...
        <COMPARAM-REFS>
          <COMPARAM-REF ID-REF="XYZ" DOCREF="UDS_CPS" DOCTYPE="COMPARAM-SPEC">
            <VALUE>500000</VALUE>
            <DESC>
              <p>
                250000 and 500000 baud shall be supported XXX
                <br/>
              </p>
            </DESC>
            <PROTOCOL-SNREF SHORT-NAME="Diagnostic_UDS_on_CAN"/>
          </COMPARAM-REF> 
```

这是 xsd.exe 在 xsd 文件上生成的类的一部分：

```
namespace it.intecs.odx {
    using System.Xml.Serialization;

    /// <remarks/>
    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
    [System.SerializableAttribute()]
    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.ComponentModel.DesignerCategoryAttribute("code")]
    [System.Xml.Serialization.XmlRootAttribute(Namespace="", IsNullable=false)]
    public partial class ODX {

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute("COMPARAM-SPEC", typeof(COMPARAMSPEC), Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
        [System.Xml.Serialization.XmlElementAttribute("COMPARAM-SUBSET", typeof(COMPARAMSUBSET), Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
        [System.Xml.Serialization.XmlElementAttribute("DIAG-LAYER-CONTAINER", typeof(DIAGLAYERCONTAINER), Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
        [System.Xml.Serialization.XmlElementAttribute("ECU-CONFIG", typeof(ECUCONFIG), Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
        [System.Xml.Serialization.XmlElementAttribute("FLASH", typeof(FLASH), Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
        [System.Xml.Serialization.XmlElementAttribute("FUNCTION-DICTIONARY", typeof(FUNCTIONDICTIONARY), Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
        [System.Xml.Serialization.XmlElementAttribute("MULTIPLE-ECU-JOB-SPEC", typeof(MULTIPLEECUJOBSPEC), Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
        [System.Xml.Serialization.XmlElementAttribute("VEHICLE-INFO-SPEC", typeof(VEHICLEINFOSPEC), Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
        public ODXCATEGORY Item;

        /// <remarks/>
        [System.Xml.Serialization.XmlAttributeAttribute("MODEL-VERSION")]
        public string MODELVERSION;

        public ODX() {
            this.MODELVERSION = "2.2.0";
        }
    }

    /// <remarks/>
    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
    [System.SerializableAttribute()]
    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.ComponentModel.DesignerCategoryAttribute("code")]
    [System.Xml.Serialization.XmlTypeAttribute(TypeName="COMPARAM-SPEC")]
    public partial class COMPARAMSPEC : ODXCATEGORY {

        /// <remarks/>
        [System.Xml.Serialization.XmlArrayAttribute("PROT-STACKS", Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
        [System.Xml.Serialization.XmlArrayItemAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified, IsNullable=false)]
        public PROTSTACK[] PROTSTACKS;
    }

    /// <remarks/>
    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
    [System.SerializableAttribute()]
    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.ComponentModel.DesignerCategoryAttribute("code")]
    [System.Xml.Serialization.XmlTypeAttribute(TypeName="PROT-STACK")]
    public partial class PROTSTACK { 
```

# jakarta-ee - JPA 究竟何时执行提交？

> ID：15340476
> 
> 赞同：0
> 
> 时间：2013-03-11T13:59:39.133
> 
> 标签：jakarta-ee, jpa, glassfish

我们正在使用带有 TopLink 和 Oracle 数据库的集群 Glassfish 2.x。JTA是持久化单元的指定事务类型，我们使用默认的缓存。

现在我们看到了一些我不太明白的行为：在 GF 节点 1 上执行了一个实体的更新，5 秒后，在节点 2 上执行了同一实体的另一个更新。但是当查看数据库时，它似乎更新的应用顺序错误。这甚至可能吗？根据我的理解，应该是在每个 WS 方法结束后，应该对数据库执行一次提交。所以应该不会有 5 秒的延迟，这两个操作会混淆。

更新在同一列上，并且仅在该列上，如果这很重要的话。因此，客户端在第二次调用期间是否确实看到了第一次更新的更改，这并不重要，因为他只是使用实体的主键和新列值来调用 WS 方法。在该方法中，获取实体，应用新列值并调用 entityManager.merge()。所以我不怀疑缓存在这里是一个问题。

两个 WS 方法调用/更新都没有引发异常。我无法检查数据库日志，因为它超出了我的控制范围。该行为偶尔发生一次。有没有人知道我们正在经历的行为可能是什么原因？当提交真正被执行时，它是否记录在某个地方？谢谢！

# c# - 如何在锚标签中使用数据绑定器

> ID：15340492
> 
> 赞同：0
> 
> 时间：2013-03-11T14:00:16.663
> 
> 标签：c#, asp.net

我在 asp.net repetor 中有锚标记我想嵌入数据活页夹以添加到 href 以创建灯箱

> error 编译错误
> 
> 说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。
> 
> 编译器错误消息：CS1002：；预期的
> 
> 源错误：
> 
> ```
> <a href="editReminders.aspx?reminderID=<% DataBinder.Eval(Container.DataItem, >"ReminderID") %>" shape="rect" > class="extLink">Edite</a> 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:20:00.753

您也可以通过创建方法在后面的代码中执行此操作

```
protected string GetReminderLink(object Data)
{
 return "<a target=\"_BLANK\" href=\"editReminders.aspx?reminderID=" + Data.ToString() + "\";\">Text</a>";
} 
```

然后在你的asp页面上调用它如下

```
<%# GetReminderLink(Eval("ReminderID"))%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:44:05.573

这应该有效：

```
<a href='editReminders.aspx?reminderID=<%# Eval("ReminderID") %>' shape="rect" class="extLink">Edite</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:07:39.817

尝试这个：

```
<a href='<%#Eval("ReminderID","editReminders.aspx?reminderID={0}") %>' shape="rect" class="extLink">Edite</a> 
```

# sql - 将参数从 powershell 传递到存储过程

> ID：15340496
> 
> 赞同：1
> 
> 时间：2013-03-11T14:00:31.440
> 
> 标签：sql, powershell

我试图使用 powershell 将 2 个参数传递给我的存储过程。

我的代码如下，当我在powershell中运行它时没有错误。但是，似乎没有传递参数，因为我无法得到正确的结果。下面有什么问题吗？

```
$SqlConnection = New-Object System.Data.SqlClient.SqlConnection
$SqlConnection.ConnectionString = "Server=localhost;Database=AMSDataWarehouse    Test;Integrated Security=SSPI"
$SqlCmd = New-Object System.Data.SqlClient.SqlCommand
$SqlCmd.Connection = $SqlConnection
$sqlcmd.CommandText = "YQBReport1"
$param1=$sqlcmd.Parameters.Add("@from" , [System.Data.SqlDbType]::DateTime)
$param1.Value = "2013-03-13"
$param2=$sqlcmd.Parameters.Add("@to" , [System.Data.SqlDbType]::DateTime)
$param2.Value = "2013-03-14"
$SqlConnection.Open()
$sqlcmd.ExecuteNonQuery()
$SqlAdapter = New-Object System.Data.SqlClient.SqlDataAdapter
$SqlAdapter.SelectCommand = $SqlCmd
$DataSet = New-Object System.Data.DataSet
$SqlAdapter.Fill($DataSet)
$SqlConnection.Close()
$SQLResult =$DataSet.Tables[0]
$commands = $SQLResult | foreach-object -process { $_.output }> output.ps1
.\output.ps1 
```

添加 YQBReport1 的代码

```
create PROCEDURE YQBreport1 
AS 
declare @from datetime, @to datetime, @TypeBigAC char(3)
select @TypeBigAC='333'

Select 
'$application = New-Object -ComObject Visio.Application;
$documents = $application.Documents;
$document = $documents.Add("AMSGantt.vst");
$pages = $application.ActiveDocument.Pages;
$page = $pages.Item(1);
$shape500 = $page.DrawLine(2,7.9,11,7.9);
$shape500.TextStyle = "Title";
$shape500.LineStyle = "Title";'
as output
union all

select
'$shape500.text = '+'"'+'Assignation de Barrières-' +      DATENAME(WEEKDAY,@from)+','+DATENAME(MONTH,@from)+'   '+DATENAME(DAY,@from)+','+DATENAME(YEAR,@from)+'"'+';'
as output
Union all

SELECT 
'$shape'+cast(ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+' =     $page.DrawRectangle'+'('+CAST(X1 as varchar)+','+CAST(Y1 as varchar)+','+CAST(X2 as   varchar)+','+CAST(Y2 as varchar)+')'+';'
+'$shape'+ cast(ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+'.'+'LineStyle =    Gantt"'+';'
+'$shape'+ cast(ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+'.'+'TextStyle =      "Gantt"'+case when left(arrival, 2)='AC' THEN 'Red' ELSE '' END+ CASE WHEN LEFT(Departure,      2)='AC' THEN 'Red' ELSE '' END+';'
    +'$shape'+ cast(ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+'.FillStyle =        "Gantt'+CASE WHEN CHARINDEX(@TypeBigAC, [ACType Iata])<>0 THEN ' Big AC' ELSE ''        END+'"'+';'
+'$shape'+ cast(ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+'.Text = "'+case when    LEN(arrival)<>0 THEN Arrival ELSE '###' END +' / '+ case when len([ACType Iata])<>0 then    [ACType Iata] else ' ' end +' / '+ CASE WHEN LEN(Departure)<>0 THEN Departure ELSE '###'    END +'"'+';'
+'$shape'+ cast(100+ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+' =   $page.DrawLine('+cast(X1 -0.5 as varchar)+','+cast(Y1 -0.03 as varchar)+','+cast(X1 +0.5 as    varchar)+','+cast(Y1 -0.03 as varchar)+ ')'+';'
+'$shape'+ cast(100+ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+'.Text =    "'+CONVERT(char(5), [Allocation Start Datetime], 108)+'"'+';'
+'$shape'+ cast(100+ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+'.TextStyle =   "Times"'+';'
+'$shape'+ cast(100+ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+'.LineStyle =     "Times"'+';'
+'$shape'+ cast(200+ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+' =    $page.DrawLine('+cast(X2 -0.1 as varchar)+','+cast(Y1 -0.03 as varchar)+','+cast(X2 +0.1 as    varchar)+','+cast(Y1 -0.03 as varchar)+ ')'+';'
+'$shape'+ cast(200+ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+'.Text =    "'+CONVERT(char(5), [Allocation End Datetime], 108)+'"'+';'
+'$shape'+ cast(200+ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+'.TextStyle =    "Times"'+';'
+'$shape'+ cast(200+ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+'.LineStyle =    "Times"'+';'

as output
FROM GanttReport(@from,@to,@TypeBigAC)
union all
select '$shape'+ cast(300+ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+' =     $page.DrawLine('+cast(X1 as varchar)+','+cast(Y2 as varchar)+','+cast(X2 as     varchar)+','+cast(Y1 as varchar)+ ')'
from GanttReportTowingLines(@from,@to,@TypeBigAC) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T14:04:32.487

您必须将命令类型设置为存储过程。

```
$SqlCmd.CommandType = [System.Data.CommandType]::StoredProcedure 
```

**更新**

在您的代码中`@from`，`@to`不是参数。使用上面的代码创建带有参数的 SP。

```
CREATE PROCEDURE YQBreport1 @from datetime, @to datetime
AS 
declare  @TypeBigAC char(3)
'''' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:03:51.037

试试这个

```
$commands = $SQLResult | foreach-object -process { $_.output }>> output.ps1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:40:38.943

我使用这样的东西：

```
sqlcmd -E -d Logging -S vansant.Server.local -Q "exec TestPass.ConsolidateMilestoneManualTestRuns @Milestone='$branch'" 
```

@Milestone 是一个参数。

# php - 检查表格单元格是否有内容并用符号◤标记单元格

> ID：15340498
> 
> 赞同：1
> 
> 时间：2013-03-11T14:00:36.520
> 
> 标签：php, javascript, jquery, html

有没有办法检查表格单元格是否具有特定内容并在该单元格的左上角用符号“◤”标记该单元格？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:03:32.083

使用这个查找和替换功能：

```
 function ReplaceCellContent(find, replace)
    {
        $("#table tr td:contains('" + find + "')").html(replace);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T14:15:24.127

您可能不想替换内容，只需用“◤”标记感兴趣的单元格。

你可以使用 CSS`:before`来做到这一点

```
<table>
<tr>
    <td>lorem</td>
    <td>lorem</td>
</tr>
<tr>
    <td>ipsum</td>
    <td>lorem</td>
</tr>
</table> 
```

JS：

```
$("td:contains('ipsum')").addClass('found'); 
```

工作示例：http: [//jsfiddle.net/3NWQD/1/](http://jsfiddle.net/3NWQD/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T14:57:11.837

示例 JSFiddle 答案：http: [//jsfiddle.net/ATV4G/1/](http://jsfiddle.net/ATV4G/1/)

Javascript：

```
 function markCell(containingText, replaceWith) { //making our function
        $("td:contains('"+containingText+"')").prepend("<span class='abs'>"+replaceWith+"        </span>");
    }

    markCell("first", "◤"); //calling the function 
```

CSS：

```
 .abs {
            position: absolute;
    } 
```

HTML：

```
 <table>
            <tr>
                <td>first</td>
                <td>second</td>
            </tr>
    </table> 
```

这些是最低要求。如果想美化输出，可以进一步写CSS来实现需求。（请查看 JSFiddle 示例）

希望这可以帮助你:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T14:33:52.440

试试这个

**HTML**

```
<table border="1" id="table">
    <tr><th>No</th><th>Player Name</th></tr>
    <tr><td>1</td><td>Sachin</td></tr>
    <tr><td>2</td><td>Dhoni</td></tr>
    <tr><td>3</td><td>Raina</td></tr>
    <tr><td>4</td><td>Yuvi</td></tr>
    <tr><td>5</td><td>Sachin</td></tr>
  </table> 
```

**jQuery**

```
function MarkCell(PlayerName)
{
    $("td").each(function(){ 
        //alert($(this).text());
        if($(this).text() == PlayerName)
        {
            $(this).html('&#9700;' + PlayerName);
        }
    });
}

MarkCell('Sachin'); 
```

[在这里](http://jsfiddle.net/LDFT2/)生活小提琴

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-11T14:24:52.280

这是一个PHP解决方案。

假设您连接了一个 MySQL 数据库，并且该表包含“state_or_province”、“city”和“country”列。如果你想用“GA”的州或省值标记所有单元格，你可以使用这样的东西：

```
echo "<table>
        <tr>
            <th>State</th>
            <th>City</th>
            <th>Country</th>
        </tr>";
while($row = mysql_fetch_array($myresults)){
    echo "<tr>";
            if($row["state_or_province"] == "GA"){
                echo "<td class = 'red'>".$row["state_or_province"]."</td>";
            }
            else{
                echo "<td>".$row["state_or_province"]."</td>";
            }
            echo "<td>".$row["city"]."</td>
                  <td>".$row["country"]."</td>
                  </tr>";
}
echo "</table>"; 
```

在您的 CSS 样式部分中，包括以下内容

```
.red{
    background-color: red;
} 
```

在此示例中，在我们呈现的表格的“状态”列下具有值“GA”的所有单元格都将显示在红色单元格中。如果您想让“◤”符号出现在左上角，只需编辑上面的 CSS

**更新**

改变

```
 if($row["state_or_province"] == "GA"){
            echo "<td class = 'red'>".$row["state_or_province"]."</td>";
        } 
```

到

```
 if($row["state_or_province"] == "GA"){
            echo "<td class = 'red'>&#9700".$row["state_or_province"]."</td>";
        } 
```

你会看到文本框内的三角形

# sql - 如何比较表并查找重复项以及查找具有不同值的列

> ID：15340505
> 
> 赞同：0
> 
> 时间：2013-03-11T14:00:46.013
> 
> 标签：sql, plsql, oracle10g

我在 Oracle 10g 中有以下表：

```
Table1
Name  Status
a         closed
b         live
c         live

Table2
Name  Status
a         final
b         live
c         live 
```

两个表中都没有主键，我正在尝试编写一个查询，该查询将返回相同的行，而无需循环两个表并比较行/列。如果状态列不同，则表 2 中的行优先。

所以在上面的例子中，我的查询应该返回这个：

```
Name   Status
a         final
b         live
c         live 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T14:04:05.597

由于您提到两个表上都没有*主键*，所以我假设一行可能存在于`Table1`,`Table2`或两者上。下面的查询使用`Common Table Expression`and`Windowing function`来获得这样的结果。

```
WITH unionTable
AS
(
    SELECT  Name, Status, 1 AS ordr FROM Table1
    UNION 
    SELECT  Name, Status, 2 AS ordr FROM Table2
),
ranks 
AS
(
    SELECT  Name, Status,
            ROW_NUMBER() OVER (PARTITION BY NAME ORDER BY ordr DESC) rn
    FROM    unionTable
)
SELECT  Name, Status
FROM    ranks
WHERE   rn = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!4/2faf4/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:04:13.967

像这样的东西？

```
SELECT table1.Name, table2.Status
FROM table1
INNER JOIN table2 ON table1.Name = table2.Name 
```

By always returning `table2.Status` you've covered both the case when they're the same and when they're different (essentially it doesn't matter what the value of `table1.Status` is).

# android - 如何仅在安装过程中在内部存储中创建文件？

> ID：15340509
> 
> 赞同：0
> 
> 时间：2013-03-11T14:00:50.357
> 
> 标签：android, storage, internal, oncreate, main-activity

我想知道如何仅在 .apk 安装期间在内部存储中创建文件。

我的问题是，当我使用 MainActivity 的 onCreate 方法放置文件时，每次重新启动应用程序时，我的文件内容都会被删除。

我也尝试使用 file.exists 但它没有帮助。

这是我正在使用的代码：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Internal internal = new Internal();
        String file_name = "profil1.txt";
        String file_name1 = "profil2.txt";
        File f = new File(file_name);
        try {
            if(f.exists()){
            Log.d(TAG, "les fichiers sont deja cree");
            }else {
                FileOutputStream fos = openFileOutput(file_name, Context.MODE_WORLD_WRITEABLE);
                FileOutputStream fos1 = openFileOutput(file_name1, Context.MODE_WORLD_WRITEABLE);    

            }
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        File file =getFilesDir();
        Log.d("TAG", file.getAbsolutePath());
        Path = file.getAbsolutePath();
        //internal.setFile();
        setDefaultKeyMode(DEFAULT_KEYS_SEARCH_LOCAL);

        setContentView(R.layout.main_grid);

        mGrid = (GridView) findViewById(R.id.gridview);
        mGrid.setColumnWidth(95);
        mGrid.setVisibility(0x00000000);
        // content.dispatchSystemUiVisibilityChanged(BIND_ADJUST_WITH_ACTIVITY);
        registerIntentReceivers();
        // requestWindowFeature(Window.FEATURE_NO_TITLE);
        appManager = new ApplicationManager(this, getPackageManager());
        appManager.loadApplications(true);

        bindApplications();
        bindButtons();

        // Try to find activity to auto-start on create.
        int i = 0;
        while (i < APPLICATION_START_NAMES.length) {
            Intent startIntent = appManager
                    .getIntentByName(APPLICATION_START_NAMES[i]);
            if (startIntent != null) {
                // Found it, let's start and continue.
                startActivity(startIntent);
                break;
            }
            i++;
            Log.d("TAG", "application number" + i);
            // we will try to hid the stat bar temporory because to hid it w e
            // neeed root acces
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                    WindowManager.LayoutParams.FLAG_FULLSCREEN);
        }
        // Administrat.SINGLETON.init(this);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:36:28.207

您无法在安装期间执行代码。您输入的代码`onCreate()`几乎是正确的。问题是当您检查文件的存在时，您还没有说在哪里寻找它。您需要指定应用程序的私有目录。试试这个：

```
 String file_name = "profil1.txt";
    String file_name1 = "profil2.txt";
    File f = new File(getFilesDir(), file_name); // File in the private directory
    try {
        if(f.exists()){
            ...
        }
    } 
```

# webserver - Lighttpd 403 错误

> ID：15340515
> 
> 赞同：1
> 
> 时间：2013-03-11T14:01:07.173
> 
> 标签：webserver, lighttpd

我有 2 台服务器，一台在 cenotos 5.9 和 centos 6.3 上运行。我正在尝试将 centos 6.3 配置为静态文件服务器。当我在 centos 6.3 上安装 lighttpd 时，服务器文档根目录位于 /srv/www/lighttpd。我能够运行index.html 文件和同一目录中的其他 html 文件。如果将 html 文件作为 new/s.html 放在新目录中，我将收到 403 禁止错误

*   /srv/www/lighttpd/s.html - 工作正常
*   /srv/www/lighttpd/new/s.html --403 错误

所有文件都有777权限

PS如果我在centos 5.9中复制过程一切正常

# django - django 在 manage.py 附近的脚本中登录 - 消息被忽略

> ID：15340516
> 
> 赞同：1
> 
> 时间：2013-03-11T14:01:15.070
> 
> 标签：django, logging, manage.py

我正在使用 Django 1.4.1。`tmp.py`在与 相同的目录中有一个脚本`manage.py`，它执行一些常规操作，并从 cron 启动，命令如下`python /path/to/project/tmp.py`

这里是`tmp.py`：

```
import os
if __name__ == "__main__":
    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "MYPROJECT.settings")

if __name__ == "__main__":
    import logging
    logger = logging.getLogger('parser.test')
    logger.info('Hello, world') 
```

这个脚本创建了一个日志条目，但是这个条目只是被 logger 忽略了。当我将相同的 3 行放入我的任何视图中时，日志条目会按预期出现在我的日志文件中。

记录器配置来自`setings.py`：

```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': True,
    'formatters': {
        'standard': {
            'format' : "[%(asctime)s] %(levelname)s [%(name)s:%(lineno)s] %(message)s",
            'datefmt' : "%d/%b/%Y %H:%M:%S"
        },
    },
    'handlers': {
        'null': {
            'level':'DEBUG',
            'class':'django.utils.log.NullHandler',
        },
        'logfile': {
            'level':'DEBUG',
            'class':'logging.handlers.RotatingFileHandler',
            'filename': "/hosting/MYPROJECTS/logs/logfile",
            'maxBytes': 50000,
            'backupCount': 2,
            'formatter': 'standard',
        },
        'console':{
            'level':'DEBUG',
            'class':'logging.StreamHandler',
            'formatter': 'standard'
        },
    },
    'loggers': {
        'django': {
            'handlers':['console'],
            'propagate': True,
            'level':'WARN',
        },
        'django.db.backends': {
            'handlers': ['console'],
            'level': 'DEBUG',
            'propagate': False,
        },
        'parser': {
            'handlers': ['console', 'logfile'],
            'level': 'DEBUG',
        },
    }
} 
```

为什么这个记录器只在视图中工作？`os.environ.setdefault("DJANGO_SETTINGS_MODULE", "MYPROJECT.settings")`也许记录器在我之后仍未配置`tmp.py`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:14:23.100

我无法解决这个问题，但我找到了替代解决方案：在 manage.py [https://docs.djangoproject.com/en/dev/howto/custom-management-commands/](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)附近编写一个自定义管理命令而不是单独的脚本 它记录在管理命令中工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-05T22:23:47.663

我设法让 Django 日志记录设置适用于我的非 Django 脚本。

首先，让我们定位到 Django 目录：`<myproject>/<src>/<myproject>/settings.py`&`<myproject>/<src>/manage.py`

```
# FILE: <myproject>/<src>/scripts/save_report_2_mongo.py
[...]
import logging
logger = logging.getLogger(__name__)
[...] 
```

在我的脚本顶部，我导入了日志记录。然后我创建日志记录对象。就我而言`__name__ == scripts.save_report_2_mongo`。如果 OP 的设置在我附近的任何地方，那么通过这个示例**名称**！=“ **main** ”，并且永远不会实例化记录器。正确的？

最后，里面`settings.py`

```
# FILE: <myproject>/<src>/<myproject>/settings.py
[...]
LOGGING = {
    [...]
    'formatters' : {...},
    'handlers' : {...},
    'loggers': {
       'django': {
           'handlers': ['console', 'fileInfo', 'fileDebug'],
           'level': 'DEBUG',
           'propagate': True,
       },
       'scripts.save_report_2_mongo': {
           'handlers': ['sr2m_handler'],
           'level': 'DEBUG',
       },
    } 
```

我相信这很有效，因为 Python 文档中的这段话：[docs.python.org > Logging HOWTO > Advanced Logging Tutorial](https://docs.python.org/3/howto/logging.html#advanced-logging-tutorial)

> 高级日志教程
> 
> 日志库采用模块化方法并提供几类组件：记录器、处理程序、过滤器和格式化程序。
> 
> *   记录器公开应用程序代码直接使用的接口。
>     
>     
>     
>     [...]
>     
>     
> 
> 记录是通过调用 Logger 类（以下称为记录器）实例上的方法来执行的。每个实例都有一个名称，它们在概念上使用点（句点）作为分隔符排列在命名空间层次结构中。例如，名为“scan”的记录器是记录器“scan.text”、“scan.html”和“scan.pdf”的父级。记录器名称可以是您想要的任何名称，并指示记录消息源自的应用程序区域。
> 
> 命名记录器时使用的一个很好的约定是在每个使用记录的模块中使用模块级记录器，命名如下：
> 
> `logger = logging.getLogger(__name__)`
> 
> **这意味着记录器名称跟踪包/模块层次结构，并且仅从记录器名称记录事件的位置很直观。**

我的重点***——记录器名称跟踪包/模块层次结构***。`__name__`在这种情况下，我在脚本中获取了 的值，然后在`settings.py`.

# sql - 子查询返回超过 1 个值：DateTime

> ID：15340517
> 
> 赞同：2
> 
> 时间：2013-03-11T14:01:18.543
> 
> 标签：sql, sql-server, datetime, sql-update

我正在尝试在单个表中调整多行夏令时。我需要在发现错误之前写入的所有记录中增加一个小时。我收到错误

```
Subquery returns more than 1 value. This is not permitted when the subquery follows =, != etc 
```

我明白它在告诉我什么，我只是想不出解决办法。这就是我想要做的：

```
UPDATE Table
SET LocalDateTime = LocalDateTime + '1:00:00'
WHERE (DateWritten > '3/10/13') AND (DateWritten < '3/11/13 7:00:00') AND (varCharColumn <> 'aString') 
```

我也尝试了这种变化并收到了同样的错误。

```
UPDATE Table
SET LocalDateTime = LocalDateTime + '1:00:00'
WHERE DateWritten IN (SELECT DateWritten FROM Table WHERE (same clause as above)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T14:06:47.760

您很可能在该表上有一个触发器，该触发器的编写方式无法处理多行更新。如果是这种情况，要么修复触发器，要么使用游标进行更新。

此外，正如其他人所提到的，您不能使用`+`运算符进行时间计算。改为使用`DATEADD`。

* * *

只是为了澄清：您的 UPDATE 不会导致您遇到的错误。最可能的原因是其他人设置的触发器。您可以在表格本身下方看到 SSMS 中的触发器。看看那里是否有触发器，如果​​有，请发布代码。也许我们可以帮助解决它。

如果您现在不想弄乱触发器，请使用如下光标：

```
DECLARE complex_cursor CURSOR FOR
    SELECT LocalDateTime
    FROM dbo.Table
    WHERE (DateWritten > '3/10/13') AND (DateWritten < '3/11/13 7:00:00') AND (varCharColumn <> 'aString') ;
OPEN complex_cursor;
FETCH FROM complex_cursor;
WHILE(@@FETCH_STATUS = 0)
BEGIN
  UPDATE dbo.Table
  SET LocalDateTime = DATEADD(hour,1,LocalDateTime) 
  WHERE CURRENT OF complex_cursor;

  FETCH FROM complex_cursor;
END
CLOSE complex_cursor;
DEALLOCATE complex_cursor;
GO 
```

来源[MSDN](http://msdn.microsoft.com/en-us/library/ms177523.aspx)（有调整）。

这应该可以解决您的直接问题。但是请记住：

1.  您确实应该修复触发器，因为它可能会导致其他问题。
2.  小心使用游标。我一般来说他们是一场表演噩梦。我是像您这样的一次性更新的情况，但是它们是可以接受的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:03:16.077

您可以使用`DateAdd()`

```
UPDATE Table
SET LocalDateTime = DateAdd(hour,1,LocalDateTime)
WHERE DateWritten > '3/10/13'
AND DateWritten < '3/11/13 7:00:00' 
AND varCharColumn <> 'aString' 
```

或者，您也可以`BETWEEN`在 DateWritten 列上进行比较

```
UPDATE Table
SET LocalDateTime = DateAdd(hour,1,LocalDateTime)
WHERE DateWritten BETWEEN '3/10/13'AND '3/11/13 7:00:00' 
AND varCharColumn <> 'aString' 
```

根据[这篇文章](http://social.msdn.microsoft.com/Forums/en-US/sqlxml/thread/98ef9dc8-5553-4684-81c2-7c9132103473/)，看起来您`Table`的视图可能会阻止更新多条记录。

[日期添加文档](http://msdn.microsoft.com/en-us/library/ms186819.aspx)

# jquery - 计算类 jquery 之前的项目数

> ID：15340519
> 
> 赞同：2
> 
> 时间：2013-03-11T14:01:19.973
> 
> 标签：jquery, count, carousel, flexslider

我有一个非常基本的 jquery 轮播，可以输出以下代码：

```
<div class="flexslider">
    <ul class="slides">
        <li><a>red</a></li>
        <li><a>green</a></li>
        <li><a class="flex-active">blue</a></li>
        <li><a>black</a></li>
        <li><a>white</a></li>
    </ul>
</div>
<div id="count"></div> 
```

我想输出当前幻灯片编号（第 3 张幻灯片，共 5 张），但使用 .index() 似乎不起作用。它一直显示为“-1”，并且不会随着轮播滑动而更新。

```
var total = $('.carousel li').length;
var current = $(this).find('.flex-active');

$("#count").html($('li').index(current)  + ' of ' + total); 
```

示例： http: [//files.marksy.com/public/slider/index.html](http://files.marksy.com/public/slider/index.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:53:30.843

一切都有些混乱，$(this) 不是您所追求的，而且您正在寻找 li 的孩子，因此它的索引将是错误的，需要获取它的父级。我已经清理了一点。

[http://jsfiddle.net/jozzhart/uMNvB/](http://jsfiddle.net/jozzhart/uMNvB/)

```
var $slides = $('.slides li');
var $current = $slides.find('.flex-active').parent();

var index = $slides.index($current) + 1;
var total = $slides.length;

$("#count").html(index + ' of ' + total); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:26:06.897

可能是这样的输出：

```
<div class="flexslider">
    <ul id="flex-UL" class="slides">
        <li><a>red</a></li>
        <li><a>green</a></li>
        <li id="flex-active"><a>blue</a></li>
        <li><a>black</a></li>
        <li><a>white</a></li>
    </ul>
</div>
<div id="count"></div> 
```

它是可行的

比：

```
var listItem = $('#flex-active');
var listTotal= $("#flex-UL li").size()
$('#count').html( 'Index: ' + $('li').index(listItem) + ' / ' + listTotal); 
```

输出：

```
red
green
blue
black
white 
```

指数：2 / 5

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:07:45.150

在您的示例中，您使用的是*FlexSlider*。

```
$('.flexslider').flexslider({animation:"slide"}); 
```

FlexSlider 存储当前幻灯片编号，您可以使用 -callback`after`获取此值：

```
$('.flexslider').flexslider({
    animation: "slide", 
    after: function(slider) {
        alert (slider.currentSlide);
    }
}); 
```

您可以在文档中阅读有关它的更多信息。它位于“*高级*”选项卡中，并从“[新的、强大的回调 API](http://www.woothemes.com/flexslider/) ”开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T14:58:47.577

O 对于您的设置：

```
 var listItem = $(".flex-active").parent();
   var listTotal = $(".slides li").size();
   var listitemNow = $('li').index(listItem);
   listitemNow++;
   $('#count').html('Index: ' + listitemNow + ' of ' + listTotal); 
```

输出：

```
red
green
blue
black
white 
```

索引： 3 / 5

# dotless - dotless 不能处理外部较少的文件？

> ID：15340525
> 
> 赞同：0
> 
> 时间：2013-03-11T14:01:32.030
> 
> 标签：dotless

我一直在`dotless`编译我的`less`文件，一切都很顺利，直到客户要求将我们的`less`文件移动到单独的服务器上。现在`less`不知何故只是部分编译。例如，如果我有类似的东西`ul li {color: red}`可以正常工作。但如果我有`ul { li {color: red} }`它不起作用。这只是一个虚拟示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:42:22.980

您能否更具体地了解您现在正在运行的设置？

假设您使用的是无点 HttpHandler，我只能指出，简单地将一些较少的文件移动到另一台服务器是行不通的。

无点 HttpHandler 是一个*服务器端组件*，它在将文件发送到 Web 浏览器之前将它们拉入`.less`并编译它们。`.css`因此，如果您只是将`.less`文件移动到未安装 dotless 的另一台服务器，您将失去less 和 css 之间的编译步骤。

为了将较少的文件卸载到另一台服务器（如 CDN），您必须做的是在部署过程中添加一个新步骤，该步骤使用将`dotless.Compiler.exe`.less 文件转换为 css 文件，然后可以由任何网络提供服务-服务器。

目前可能发生的事情是您移动了 .less 文件，而新服务器只是将其作为纯文本提供，而不是将其从 less 编译为 css

# python-2.7 - networkx 中节点上的事件边

> ID：15340531
> 
> 赞同：4
> 
> 时间：2013-03-11T14:01:47.593
> 
> 标签：python-2.7, networkx

对此问题的任何帮助表示赞赏。

如何使用networkx获取图中节点上的事件边？我已经尝试在文档中搜索它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-16T11:54:27.977

使用以节点为参数的[Graph.edges()方法。](https://networkx.github.io/documentation/stable/reference/classes/generated/networkx.Graph.edges.html#networkx.Graph.edges)

```
>>> G = nx.Graph()   # or DiGraph, MultiGraph, MultiDiGraph, etc
>>> nx.add_path(G, [0,1,2,3])
>>> G.edges
EdgeView([(0, 1), (1, 2), (2, 3)])
>>> G.edges(0)
EdgeDataView([(0, 1)])
>>> list(G.edges(0))
[(0, 1)] 
```

编辑 2020-09-10：networkx 2.x 的更新答案

# flash - Adobe Flash 安全更新挂起 Excel 2007 vba 浏览器对象

> ID：15340534
> 
> 赞同：0
> 
> 时间：2013-03-11T14:01:57.947
> 
> 标签：flash, excel, vba

如今，Adobe Flash 插件在尝试在 VBA 浏览器中播放 excel 2007 的 Flash 内容时会显示此消息 -

“本文档包含可能对您的计算机有害的嵌入内容。” 选择“不允许播放内容。（推荐）”或“我识别此内容。允许播放”。

我想那没关系，除了它会在该消息处挂起 excel 会话，而摆脱它的唯一方法是用任务管理器杀死 excel。

我不确定此更新何时到达，但现在任何在 VBA 浏览器对象中使用 flash 的东西都坏了。其他人得到这个，或者知道如何绕过它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T15:53:03.433

使用制表符或箭头键在选项中移动以选择“允许播放”，然后输入。

# iphone - 如何比较两个 ALAsset？

> ID：15340535
> 
> 赞同：1
> 
> 时间：2013-03-11T14:01:58.110
> 
> 标签：iphone, ios, objective-c, alassetslibrary

我在比较两个 ALAssets 对象时遇到了一些麻烦。我有两个 NSMutableArray：selectedImages 和 mutableAssets。我在那里存储 ALAssets 对象。但是当我想比较这些资产时，它不适用于 isEqual 或 containsObject 方法，只有当我通过它们的 url 比较它时它才有效：

```
 ALAsset *asset1 = [self.mutableAssets objectAtIndex:0];
        ALAsset *asset2 = [self.selectedImages objectAtIndex:0];

        NSLog(@"%@", asset1);
        NSLog(@"%@", asset2);

        if([self.selectedImages containsObject:[self.mutableAssets objectAtIndex:0]]) {
            NSLog(@"the same1");
        }
        if([asset1 isEqual:asset2]) {
            NSLog(@"the sames2");
        }
        if([asset1.defaultRepresentation.url isEqual:asset2.defaultRepresentation.url]) {
            NSLog(@"the same3");
        } 
```

只给出这一行：

```
ALAsset - Type:Photo, URLs:assets-library://asset/asset.JPG?id=E8947286-22E2-42E4-A904-14D940A387B3&ext=JPG
ALAsset - Type:Photo, URLs:assets-library://asset/asset.JPG?id=E8947286-22E2-42E4-A904-14D940A387B3&ext=JPG
the same3 
```

为什么会发生？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T14:11:55.333

似乎资产没有实现`isEqual:`

不过，我不会检查 defaultRep 的 URL……两个不同的资产在某种程度上可能具有相同的 defaultRep

我会选择`ALAssetPropertyAssetURL for iOS 6+`或`ALAssetPropertyURLs for ios4&5`

--- 你甚至可以把它包装在一个类别中！

```
@interface ALAsset (isEqual)
- (NSURL*)defaultURL;
@end

@implementation ALAsset (isEqual)

- (NSURL*)defaultURL {
     if([[[UIDevice currentDevice] systemVersion] floatValue]>=6.0)
     {
          return [self valueForKey: ALAssetPropertyAssetURL];
     }
     else
     {
           return self.defaultRepresentation.url;
     }
}
- (BOOL)isEqual:(id)obj {
    if(![obj isKindOfClass:[ALAsset class]]) 
        return NO;

    NSURL *u1 = [self defaultURL];
    NSURL *u2 = [obj defaultURL];

    return ([u1 isEqual:u2]);
} 
```

适用于 iOS 4、5 和 6 及更高版本

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T14:17:48.803

# 背景

`containsObject:`is 通过向数组的每个对象发送 isEqual: 消息（并将 anObject 作为参数传递给每个 isEqual: 消息）来确定数组中是否存在 anObject。

`isEqual:`是检查两个对象是否相同。如果两个对象相等，则它们必须具有相同的`hash`值。`hash`表示散列表结构中的表地址。

* * *

所以，如果不是 containsObject 也不是 isEqual。如果您想要您的 ALAsset 覆盖，请导出结果`isEqual`。

NSURL，`isEqual`当且仅当它们为 baseURL 和 relativeString 返回相同的值时，两个 NSURL 被认为是相等的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-13T11:07:17.470

```
if([[[asset1 defaultRepresentation].url absoluteString] isEqualToString:[[asset2 defaultRepresentation].url absoluteString]])
{
}
else
{
} 
```

# python - 绘制一天中的时间和位置坐标

> ID：15340537
> 
> 赞同：0
> 
> 时间：2013-03-11T14:02:00.677
> 
> 标签：python, matplotlib, data-visualization

我必须绘制具有 DateTime 和 GPS 坐标信息的数据。举个例子：

```
2013-03-01 19:55:00     45.4565    65.6783
2013-03-01 01:40:00     46.3121    -12.3456
2013-03-02 11:25:00     23.1234    -85.3456
2013-03-05 05:00:00     15.4565    32.1234
...... 
```

这只是一个与我拥有的数据类型匹配的随机示例。整个数据集为一周，时间戳四舍五入到最接近的 5 分钟。

我想在 python 中做的是将这些数据可视化为整个一周内每 24 小时的位置模式。因此，x 轴将有一天中的时间。我正在努力解决如何显示该位置的问题。可能需要 3D 绘图。

它将以不同的颜色显示每一天，并且整个星期的平均值还会显示一个（即整个星期平均为 24 小时）。

知道如何使用 python 和 matplotlib 将其可视化吗？

请注意，我现在无法绘制实际地图的位置。但就像 (x,y) 坐标一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-02-12T08:06:32.603

尝试使用 Folium 的 HeatMap with Time。首先，您定义一个函数来生成地图。

```
def generateBaseMap(default_location, default_zoom_start=12):
    base_map = folium.Map(location=default_location, control_scale=True, zoom_start=default_zoom_start)
    return base_map 
```

然后在按日期排序的列表中添加纬度和经度。

```
date_list = []
for date in df.date.sort_values().unique():
    date_list.append(df.loc[df.date == date, ['lat', 'lng']].values.tolist()) 
```

然后你用时间绘制热图

```
from folium.plugins import HeatMapWithTime

base_map = generateBaseMap(default_zoom_start=11, default_location = [lat, longitude])
HeatMapWithTime(date_list, radius=5, gradient={0.2: 'blue', 0.4: 'lime', 0.6: 'orange', 1: 'red'}, min_opacity=0.5, max_opacity=0.8, use_local_extrema=True).add_to(base_map)
base_map 
```

希望这可以帮助。

# java - Android GCM 注册 ID

> ID：15340542
> 
> 赞同：1
> 
> 时间：2013-03-11T14:02:12.897
> 
> 标签：java, android, google-cloud-messaging

我在我的 Android 应用程序中成功实现了 GCM，但我如何知道我的应用程序何时从设备上卸载？我也想删除我的 MySQL 数据库中的注册 ID。我认为 Apple 有一项服务，可以在发送失败时检查没有响应的 id，但 Google 有类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:07:06.977

[从这里](http://developer.android.com/google/gcm/adv.html)引用

> 最后，当 GCM 尝试向设备传递消息并且应用程序被卸载时，GCM 将立即丢弃该消息并使注册 ID 无效。将来尝试向该设备发送消息将收到 NotRegistered 错误。有关详细信息，请参阅取消注册的工作原理。

更多信息[在这里](http://developer.android.com/google/gcm/adv.html#unreg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:15:53.233

理想情况下，您可以将注册 ID 和 ANDROID_ID 发送到您的内容管理系统（发送到您的 MySQL 数据库）。并监听 PACKAGE_REMOVED 意图和内部广播接收器，您可以从 MySQL 数据库中删除该特定注册 ID

# sql - Gnome 的 libgda 和 SQL 注入

> ID：15340543
> 
> 赞同：2
> 
> 时间：2013-03-11T14:02:13.773
> 
> 标签：sql, c, code-injection, gnome

我正在使用 Gnome 数据访问 (libgda) 来访问 C 程序中的数据库。我使用 GdaSqlBuilder 来构建我的查询。以下是在请求字段上添加相等条件的示例代码：

```
GdaSqlBuilderId add_equal_condition(char* m_name, GValue* m_value)
{
    GdaSqlBuilderId name, value, condition;
    name = gda_sql_builder_add_id(builder, m_name);
    value = gda_sql_builder_add_expr_value(builder, NULL, m_value);
    condition = gda_sql_builder_add_cond(builder, GDA_SQL_OPERATOR_TYPE_EQUAL, name, value, 0);
    return condition;
} 
```

libgda 是否可以保护自己免受 SQL 注入的影响，或者我是否需要在将输入传递给 GDA 之前自己对其进行清理？

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:26:28.253

这在前言中有解释：

> 在创建包含值（文字）的 SQL 字符串时，可能会被诱惑（因为这是最简单的解决方案）创建一个包含值本身的字符串，执行该语句并在下一次需要相同的语句时应用相同的过程以不同的值执行。这种方法有以下两个主要缺陷，这就是为什么 Libgda 建议在语句中使用变量（也称为参数或占位符）并在仅变量值更改时重用相同的 GdaStatement 对象。

[https://developer.gnome.org/libgda/unstable/ch06s03.html](https://developer.gnome.org/libgda/unstable/ch06s03.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T14:21:06.337

即使当前版本不存在漏洞，但这并不意味着未来的每个版本都不会存在漏洞。您应该始终无一例外地关注用户提供的内容。

来自任何其他系统的接口也是如此。这不仅限于 SQLi，也不是 SQLi 或您使用的库的问题。您有责任让用户只能输入您希望他/她输入或拒绝的类型数据。您不能依赖其他代码为您执行此操作。

一般来说：没有什么可以完全保护自己免受某种类型的攻击。它将始终限于撰写本文时已知的攻击向量。

# jquery - 在 jquery 上绑定使用 ajax 锁定选择框

> ID：15340546
> 
> 赞同：0
> 
> 时间：2013-03-11T14:02:19.873
> 
> 标签：jquery, binding

我在 Rails3 中有一个简单的表单，它调用 AJAX 并用结果替换表

coffee.js 是

```
 id_handler = ->
       $.ajax
          url: "/surveys_search"
          data:
            id: $(this).val()
            name: $(this).prop("name")

    input_handler = ->
       $.ajax
          url: "/surveys_search"
          data:
            search: $(this).val()
            name: $(this).prop("name") 

    $(document).ready ->
      $(document).on "change", "select", id_handler
      $(document).on "keyup", "input", input_handler

      $("#survey_active").bind "change", ->
        $.ajax
          url: "/surveys_search"
          data:
            survey_active: (if $(this).is(":checked") then 1 else 0) 
```

我的表格是

```
 <div class="well  well-small">
    <h4>Quick search</h4>
    <dl class="dl-horizontal">
      <dt><strong>Quiz:</strong></dt> <dd>
        <%= text_field_tag :surveys_search, params[:surveys_search], :class=>"text-field" %> 
        <%= select_tag 'survey_select', options_from_collection_for_select(Survey.all, 'id', 'name'),:prompt=>"All"%>
        <strong>Published?</strong> <%= check_box_tag 'survey_active' %>

        </dd>
      <dt><strong>Prize:</strong></dt>   <dd><%= text_field_tag :prizes_search, params[:prizes_search], :class=>"text-field" %> <%= select_tag 'prize_select', options_from_collection_for_select(Prize.all, 'id', 'name'),:prompt=>"All"%></dd>
      <dt><strong>Location:</strong></dt>   <dd><%= text_field_tag :locations_search, params[:prizes_search], :class=>"text-field" %> <%= select_tag 'location_select', options_from_collection_for_select(Location.all, 'id', 'name'),:prompt=>"All"%></dd>
    </dl>
  </div> 
```

我的问题是，当我更改下拉列表的值时，选择框变得不可更改，直到我重新单击另一个元素然后尝试重新更改它。

当我更改它时，它实际上锁定了选择下拉列表

在上面的表格中，我更改了 TOP / FIRST 选择下拉列表，然后在 AJAX 调用之后 TOP 选择被锁定并且 BOTTOM / THIRD 选择框也处于焦点状态，我同时获得了两个焦点元素

有人可以解释如何绕过它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:07:07.983

```
id_handler = ->
   $.ajax
      url: "/surveys_search"
      data:
        id: $(this).val()
        name: $(this).prop("name") 
      success: $(this).blur() 
```

# blackberry-10 - BlackBerry Cascades 10 Maps 示例一直显示黑屏

> ID：15340548
> 
> 赞同：0
> 
> 时间：2013-03-11T14:02:25.380
> 
> 标签：blackberry-10, blackberry-cascades

我正在尝试运行地图示例 Qml，但是我的 MapView 一直加载为黑色。我检查了控制台输出并发现了这一点。

```
slogger2 buffer handle not initialized. ../../lgmon_api.c, logEvent(), around line 578!
cpp:: Created document 
cpp:: properties set 
MapViewPrivate::removeRenderEngine 
using the following render engine:  bb::cascades::maps::BlankRenderEngine 
MapViewPrivate::removeRenderEngine 
removing the old render engine:  bb::cascades::maps::BlankRenderEngine 
RenderEngineManager::RenderEngineManager 
RenderEngineManager::scanForPlugins() 
render engine search: searching   QDir( "/apps/com.example.GConnectBB.testDev__GConnectBB7836cab4/native/mapview-renderengine" , nameFilters = { * },  QDir::SortFlags( Name | IgnoreCase ) , QDir::Filters( Dirs|Files|Drives|AllEntries ) )  
render engine search: searching   QDir( "/base/usr/lib/qt4/plugins/mapview-renderengine" , nameFilters = { * },  QDir::SortFlags( Name | IgnoreCase ) , QDir::Filters( Dirs|Files|Drives|AllEntries ) )  
render engine search: attempting to load  "/base/usr/lib/qt4/plugins/mapview-renderengine/libRenderEngine3d.so" 
unknown symbol: _ZTIN2bb8platform3geo11GeoLocationE
unknown symbol: _ZTIN2bb8platform3geo11GeoLocationE
unknown symbol: _ZNK2bb8platform3geo11GeoLocation10metaObjectEv
unknown symbol: _ZN2bb8platform3geo11GeoLocation11qt_metacastEPKc
unknown symbol: _ZN2bb8platform3geo11GeoLocation11qt_metacallEN11QMetaObject4CallEiPPv
unknown symbol: _ZNK2bb8platform3geo11GeoLocation11boundingBoxEv
unknown symbol: _ZTIN2bb8cascades4maps17BlankRenderEngineE
unknown symbol: _ZN2bb8cascades4maps17BlankRenderEngine16staticMetaObjectE
unknown symbol: _ZTIN2bb8platform3geo10GeographicE
RenderEngineManager::engine(  <ViewProperties altitude=0, heading=0, lat=43.4682, lon=-80.5196, tilt=0, window=QSize(0, 0) >  ) 
using the following render engine:  bb::cascades::maps::BlankRenderEngine 
```

所以看起来它没有为我的地图加载合适的渲染引擎。我尝试使用黑莓操作系统更新更新我的 SDK 并更新手机上的操作系统，但无济于事。

这是我的地图的完整 Qml：

```
import bb.cascades 1.0
import bb.cascades.maps 1.0

Page {
    Container {
        layout: StackLayout {
        }
        MapView {
            id: mapview
            latitude: 43.468245
            longitude: -80.519603
            altitude: 10000
        }
    }
} 
```

更多详细信息：操作系统版本：10.9.10.35 本机 SDK：10.0.9.1673 Momentics 版本：10.0.9

我也尝试了另一个 SDK 版本，10.0.10.xxx，它也没有工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T04:38:48.100

正如@Hithredin 上面在评论中提到的那样，为了拥有地图功能，您需要确保在`.pro`文件中为链接器指定了所有要链接的库：

```
LIBS += -lbbplatform -lbbcascadesmaps -lGLESv1_CM 
```

而且，如果您正在使用地理定位（在您使用地图时经常发生这种情况），您需要在`bar-descriptor.xml`文件中拥有以下权限集：

```
<permission>read_geolocation</permission>
<permission>access_location_services</permission> 
```

有关 Blackberry 开发网站上的地图和位置的更多信息：

*   [位置文件](https://developer.blackberry.com/cascades/documentation/device_platform/location/index.html)
*   [地图文档](https://developer.blackberry.com/cascades/reference/location_maps.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-17T14:37:58.333

确保包括

```
#include <bb/cascades/maps/MapView> 
```

在您的 ApplicationUI.hpp 或 ApplicationUI.cpp 中。

# algorithm - 哈希表加载因子 a 和 n 个槽，为冲突打开寻址

> ID：15340552
> 
> 赞同：0
> 
> 时间：2013-03-11T14:02:38.460
> 
> 标签：algorithm, hash, hashtable, probability, hashcode

我参加了高频交易面试，他们问我数据结构的所有数学方面的一个问题是：负载因子 a=1-1/(sqrt(n)logn)，搜索不成功的时间是多少？仅使用“n”陈述答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:35:17.020

随着增加，该术语`1-1/(sqrt(n)*log(n))`接近 1.0 。`n`当 时`n==10`，值为 0.9048。当 时`n==1000000`，值为 0.9999。（我正在使用对数基数 2。）

使用完整的哈希表（负载因子为 1.0 的含义）和开放式寻址，您必须检查每个项目。所以搜索不成功的时间是 O(n)。

# mysql - 返回 INT 存储过程

> ID：15340558
> 
> 赞同：0
> 
> 时间：2013-03-11T14:02:50.697
> 
> 标签：mysql

当我在 MYSQL 中调用此过程时收到错误 1318。我在这个存储过程中做错了什么？我什至可以做这样的事情吗？

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `CN_renumber`
      (
    OUT @maxCn,
    OUT param1 INT,
    OUT update_count INT
      )
BEGIN

    DECLARE sql_error TINYINT DEFAULT FALSE;
    DECLARE CONTINUE HANDLER FOR SQLEXCEPTION SET sql_error = TRUE;
    START TRANSACTION;
    /*Renumber Cn in DBO*/
    /* Set max cn and incremented afterwords */
    SET @maxCn = '23206';
    UPDATE dbo.billadr SET Cn = (@maxCn:=@maxCn + 1);
    IF sql_error = FALSE THEN SET update_count = 1;
        COMMIT;
    ELSE
        SET update_count = 0;
        ROLLBACK;
    END IF;
    END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:32:14.933

参数有问题。试试这个程序，它将修复错误 1318 -

```
CREATE DEFINER='root'@'localhost' PROCEDURE CN_renumber
  (OUT maxCn int, OUT param1 int, OUT update_count int)
BEGIN

  SET @maxCn = 23206;
  UPDATE billadr SET Cn = (@maxCn := @maxCn + 1);

  SET maxCn = @maxCn;
END 
```

使用示例 -

```
SET @maxCn = NULL;
SET @param1 = NULL;
SET @update_count = NULL;
CALL CN_renumber(@maxCn, @param1, @update_count);

SELECT @maxCn, @param1, @update_count; 
```

# ios - 等待应用程序启动时加载数据

> ID：15340561
> 
> 赞同：2
> 
> 时间：2013-03-11T14:02:58.687
> 
> 标签：ios

我对 iOS 开发还很陌生，并且一直在为任务苦苦挣扎。最终决定寻求帮助。

在启动应用程序之前，我需要从 Internet 加载一些数据。我决定`didFinishLaunchingWithOptions`使用`AppDelegate`

它是：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{    
    // Override point for customization after application launch.

    //loading configuration
    [Configuration downloadConfiguration:^(NSMutableArray *currencies, double refreshIntervalInMilis, double timeDifferenceInMilis, NSError *error)  {
        if (error) {
            //displaying error dialog
        } else {
            //doing some stuff with data loaded          
        }
    }];    

    return YES;
} 
```

很明显，该方法会在数据加载之前返回 YES，因为它不会等待数据加载完毕。我的问题是**如何让这个方法在我返回 YES 之前等待这个块完成**（或者如果配置没有正确加载，则返回 NO）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T14:07:01.757

不要等数据下载完才返回`YES`。iOS 有看门狗守护程序，如果应用程序在 30 秒内没有启动，它会杀死应用程序。因此，如果您的用户的互联网连接非常糟糕，导致下载时间超过 30 秒 - 您的应用程序将在启动之前被终止。

我的建议是使用通知来通知需要的各方配置下载。安装程序需要列出的根视图控制器，比如说`MYApplicationDidDownloadConfigurationNotification`，一旦收到通知，它就会重新加载 UI 或推送一些其他依赖于相关配置的视图控制器。

如果下载不成功 - 更新 UI 而不是`NO`从委托方法返回。在您的所有应用程序启动之后，只是没有运气下载配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:24:49.520

我的建议是你添加一个启动画面，它显示它正在加载一个进度条。进度条表示您正在等待数据下载，完成后，您可以显示下一个屏幕。所以在你的 appdelegate.h

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{    
    // Override point for customization after application launch.

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    self.splashviewController = [[SplashViewController alloc] init];
    navigationController = [[NavigationController alloc] initWithRootViewController:self.splashviewController];

 self.window.rootViewController = navigationController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

在您的 splashview 控制器中，包括您的代码：

```
[Configuration downloadConfiguration:^(NSMutableArray *currencies, double refreshIntervalInMilis, double timeDifferenceInMilis, NSError *error)  {
        if (error) {
            //displaying error dialog
        } else {
            //doing some stuff with data loaded          
        }
    }]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:11:22.287

永远不要在主线程上等待网络访问。只需将代码为返回的数据初始化应用程序的其余部分，添加到回调块`downloadConfiguration:`

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-02-07T17:44:51.250

您是从 REST API 下载的吗？

如果是，请使用这个轻量级库：[JNRestClient](https://github.com/jonasman/JNRestClient)

它会在后台进行加载

# django - Django-Haystack - 如何分面？

> ID：15340567
> 
> 赞同：1
> 
> 时间：2013-03-11T14:03:15.067
> 
> 标签：django, django-haystack

我将 Django-Haystack 与 ElasticSearch 一起使用。

我将需要分面。

Django-Haystack 文档说：

> 您通常为您希望索引的每种类型的模型创建一个唯一的 SearchIndex，但如果您注意这样做并且您的字段名称非常标准化，您可以在不同的模型之间重用相同的 SearchIndex。

我的疑问是，要让分面工作，我可以为每个模型使用一个索引，还是必须创建一个唯一索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T00:33:31.553

您可以有多个索引类，但它们中的每一个都应该具有您将要分面的字段。

# c# - TDD - 包装 SQL 的方法的 100% 覆盖率

> ID：15340569
> 
> 赞同：1
> 
> 时间：2013-03-11T14:03:18.653
> 
> 标签：c#, unit-testing

我刚刚读完“使用 C# 进行专业测试驱动开发”，并一直在尝试找到一种方法来在我的代码中实现 100% 的覆盖率。这一切都很好，直到我找到一个充满了实现如下方法的存储库类：

```
public IEnumerable<MyDataContract> LoadConditional(bool isCondition)
{
   const string QUERY = @"SELECT ...fields... FROM MyData WHERE [IsCondition] = @IsCondition";
   return DataAccessor.ReadMyContracts(QUERY, isCondition); // something, something...
} 
```

我一直在考虑这个问题，并且无法在互联网上找到直接回答这个问题的答案。

*   我读到的东西表明与 SQL 相关的业务将存在于另一个程序集中。不过我不需要这个，也不相信我应该去那里。而且，从代码覆盖率来看，这是一个非常肤浅的变化。

*   我读过你可以为你的单元测试连接数据库（我以前做过）。但这很好……我不知道，感觉不对。测试速度很慢，并且维护量显着增加。

我的直觉是，如果没有我提到的最后一点，这种方法就不能进行单元测试。我应该如何看待这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T14:07:33.287

首先让我说，我认为实现 100% 的覆盖率完全没有意义，也证明不了任何事情。

话虽如此，我通常在 DB 和业务逻辑之间使用一些层——一些简单的映射器（PetaPoco、Dapper、OrmLite），或者很少使用完整的 ORM（NHibernate）。

在我需要对数据库进行集成测试的情况下，这些工具允许我对测试数据库（例如内存中的 SQLite DB）而不是“真正的”数据库服务器运行相同的查询。

关于您对“测试速度慢并且维护量显着增加”的担忧。您应该记住，这些不再是单元测试 - 这些是集成测试，它们不能像单元测试那样快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:10:13.977

在我看来，如果您进行实际的数据访问，您将进入集成测试并离开单元测试领域。我个人更喜欢仅将 SQL 保留在数据访问层内，即在数据库本身之前的单层，然后我测试所有内容。在我看来，一个名为的方法`ReadMyContracts`应该已经具有用于访问数据的正确 SQL，并且应该只接收（并传递）`isCondition`参数。

那只是MHO。

# github-api - 列出组织的分叉存储库

> ID：15340571
> 
> 赞同：1
> 
> 时间：2013-03-11T14:03:30.960
> 
> 标签：github-api

使用 Git API，我想列出从其他存储库分叉的组织的存储库。

我正在努力：

```
curl https://api.github.com/orgs/camptocamp/repos?type=forks 
```

但它只返回 30 个存储库，而[https://github.com/camptocamp/](https://github.com/camptocamp/)`forks`中的选项卡包含更多……有没有办法以编程方式检索此列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T07:19:25.517

您面临的问题是响应分页：http: [//developer.github.com/v3/#pagination](http://developer.github.com/v3/#pagination)。

> 返回多个项目的请求默认分页为 30 个项目。您可以使用 ?page 参数指定更多页面。对于某些资源，您还可以使用 ?per_page 参数将自定义页面大小设置为最大 100。

当您请求`https://api.github.com/orgs/camptocamp/repos?type=forks`时，响应标头包含一个`Link`标头，该标头为您提供获取下一页和最后一页的 URL：

`Link: <https://api.github.com/organizations/28109/repos?page=2&type=forks>; rel="next", <https://api.github.com/organizations/28109/repos?page=6&type=forks>; rel="last"`

# android - 如何根据变量创建 ImageButtons 并将参数链接到它？

> ID：15340573
> 
> 赞同：1
> 
> 时间：2013-03-11T14:03:37.500
> 
> 标签：android

我需要帮助来构建我的应用程序。我有一个 Strings 数组`String[] macs=new String [5]`，其中最多填充 5 个不同的 mac 地址，mac 地址的数量范围为 1 到 5。我希望我的活动做的是创建与 mac 地址一样多的 ImageButtons。然后，我想用mac地址填充每个ImageButton，以便能够通过它的mac地址识别每个ImageButton，所以它应该是一个可以随时获取的参数。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:20:13.113

为什么不创建一个`ListView`并用地址填充它，范围从 1 到 5 并且在覆盖的方法`onListItemClick`中，您可以获得位置（记住地址 1 实际上是`position = 0`）并执行相应的操作，假设第一项始终是 mac id 1，第二个是mac id 2，也许有这样的声明

```
@Override
public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
    switch (position) {
    case 0:
        // Perform action if position = 0 or address = 1
        break;
    case 1:
        // Perform action if position = 1 or address = 2
        break;
    // etc..
    }
} 
```

我对它不是很熟悉，但我相信`GridView`如果你必须有图片的话也会有很大的帮助。[在 Android Developers](http://developer.android.com/guide/topics/ui/layout/gridview.html "Android 开发者 - API 指南 - GridView")中查看。

# python - Python 提取模式匹配

> ID：15340582
> 
> 赞同：191
> 
> 时间：2013-03-11T14:04:05.137
> 
> 标签：python, regex

Python 2.7.1 我正在尝试使用 python 正则表达式来提取模式内的单词

我有一些看起来像这样的字符串

```
someline abc
someother line
name my_user_name is valid
some more lines 
```

我想提取单词“my_user_name”。我做类似的事情

```
import re
s = #that big string
p = re.compile("name .* is valid", re.flags)
p.match(s) #this gives me <_sre.SRE_Match object at 0x026B6838> 
```

我现在如何提取 my_user_name ？

* * *

## 回答 #1

> 赞同：237
> 
> 时间：2013-03-11T14:09:16.213

您需要从正则表达式中捕获。`search`对于模式，如果找到，使用 . 检索字符串`group(index)`。假设执行了有效的检查：

```
>>> p = re.compile("name (.*) is valid")
>>> result = p.search(s)
>>> result
<_sre.SRE_Match object at 0x10555e738>
>>> result.group(1)     # group(1) will return the 1st capture (stuff within the brackets).
                        # group(0) will returned the entire matched text.
'my_user_name' 
```

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2013-03-11T14:08:05.637

您可以使用匹配组：

```
p = re.compile('name (.*) is valid') 
```

例如

```
>>> import re
>>> p = re.compile('name (.*) is valid')
>>> s = """
... someline abc
... someother line
... name my_user_name is valid
... some more lines"""
>>> p.findall(s)
['my_user_name'] 
```

在这里，我使用`re.findall`而不是`re.search`获取`my_user_name`. 使用`re.search`，您需要从匹配对象的组中获取数据：

```
>>> p.search(s)   #gives a match object or None if no match is found
<_sre.SRE_Match object at 0xf5c60>
>>> p.search(s).group() #entire string that matched
'name my_user_name is valid'
>>> p.search(s).group(1) #first group that match in the string that matched
'my_user_name' 
```

* * *

如评论中所述，您可能希望使您的正则表达式不贪婪：

```
p = re.compile('name (.*?) is valid') 
```

只拿起`'name '`和下一个之间的东西`' is valid'`（而不是让你的正则表达式拿起`' is valid'`你组中的其他人。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-03-11T14:11:48.437

你可以使用这样的东西：

```
import re
s = #that big string
# the parenthesis create a group with what was matched
# and '\w' matches only alphanumeric charactes
p = re.compile("name +(\w+) +is valid", re.flags)
# use search(), so the match doesn't have to happen 
# at the beginning of "big string"
m = p.search(s)
# search() returns a Match object with information about what was matched
if m:
    name = m.group(1)
else:
    raise Exception('name not found') 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2019-01-22T14:59:01.690

您可以使用组（用`'('`和表示`')'`）来捕获部分字符串。然后匹配对象的[`group()`](https://docs.python.org/3/library/re.html#re.Match.group)方法为您提供组的内容：

```
>>> import re
>>> s = 'name my_user_name is valid'
>>> match = re.search('name (.*) is valid', s)
>>> match.group(0)  # the entire match
'name my_user_name is valid'
>>> match.group(1)  # the first parenthesized subgroup
'my_user_name' 
```

在 Python 3.6+ 中，您还可以[索引](https://docs.python.org/3/library/re.html#re.Match.__getitem__)匹配对象，而不是使用`group()`：

```
>>> match[0]  # the entire match 
'name my_user_name is valid'
>>> match[1]  # the first parenthesized subgroup
'my_user_name' 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2017-04-19T14:59:56.140

也许这更短更容易理解：

```
import re
text = '... someline abc... someother line... name my_user_name is valid.. some more lines'
>>> re.search('name (.*) is valid', text).group(1)
'my_user_name' 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2013-03-11T14:10:40.807

你想要一个[捕获组](http://docs.python.org/2/howto/regex.html#grouping)。

```
p = re.compile("name (.*) is valid", re.flags) # parentheses for capture groups
print p.match(s).groups() # This gives you a tuple of your matches. 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2019-02-01T10:28:44.713

这是一种不使用组（Python 3.6 或更高版本）的方法：

```
>>> re.search('2\d\d\d[01]\d[0-3]\d', 'report_20191207.xml')[0]
'20191207' 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-06-14T18:29:07.103

您还可以使用捕获组`(?P<user>pattern)`并像字典一样访问该组`match['user']`。

```
string = '''someline abc\n
            someother line\n
            name my_user_name is valid\n
            some more lines\n'''

pattern = r'name (?P<user>.*) is valid'
matches = re.search(pattern, str(string), re.DOTALL)
print(matches['user'])

# my_user_name 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2021-04-03T19:13:00.150

我通过谷歌找到了这个答案，因为我想将包含**多个组**的结果直接**解压缩**到多个变量中。虽然这对某些人来说可能很明显，但对我来说却不是，因为我过去总是使用过，所以也许它可以帮助将来也不知道.`re.search()`**`group()``group*s*()`**

 **```
s = "2020:12:30"
year, month, day = re.search(r"(\d+):(\d+):(\d+)", s).groups() 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-04-07T19:58:21.900

似乎您实际上是在尝试提取名称，但只需找到匹配项即可。如果是这种情况，为您的匹配设置跨度索引会很有帮助，我建议使用`re.finditer`. 作为快捷方式，您知道`name`正则表达式的部分长度为 5，`is valid`长度为 9，因此您可以对匹配的文本进行切片以提取名称。

*注意 - 在您的示例中，它看起来像是`s`带有换行符的字符串，所以这就是下面的假设。*

> ```
> ## covert s to list of strings separated by line:
> s2 = s.splitlines()
> 
> ## find matches by line: 
> for i, j in enumerate(s2):
>     matches = re.finditer("name (.*) is valid", j)
>     ## ignore lines without a match
>     if matches:
>         ## loop through match group elements
>         for k in matches:
>             ## get text
>             match_txt = k.group(0)
>             ## get line span
>             match_span = k.span(0)
>             ## extract username
>             my_user_name = match_txt[5:-9]
>             ## compare with original text
>             print(f'Extracted Username: {my_user_name} - found on line {i}')
>             print('Match Text:', match_txt) 
> ```**

# php - 如何使用 php 从 Xps 文件中读取

> ID：15340587
> 
> 赞同：0
> 
> 时间：2013-03-11T14:04:12.233
> 
> 标签：php, xps

嗨，我需要使用 php 从 xps 文件中检索所有信息，任何人都知道请告诉我它的紧急..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T17:17:33.927

您必须知道 XPS 只是 PKZIP 格式，包含一些 XML 文件作为描述和其他内容作为文档内容。因此，您的任务只是将 .zip 提取到一个临时文件夹中，抓取 .xml 并进行分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:30:32.833

您需要一个可以转换 .xps 文件的工具。有一个名为 gxps 的 GhostScript 变体可以做到这一点。

```
http://ghostscript.com/GhostXPS.html 
```

转换为文本将是一个两步过程，但仍然很简单：

```
exec("gxps -sDEVICE=pdfwrite -sOutputFile=input.pdf -dNOPAUSE input.xps");
$text = exec("pdftotext input.pdf"); 
```

# debugging - 为什么我的 Rails 功能不会中止？

> ID：15340592
> 
> 赞同：1
> 
> 时间：2013-03-11T14:04:20.857
> 
> 标签：debugging, ruby-on-rails-3.1

我正在尝试调试其他人编写的应用程序。在我的`production.log`中，我看到：

```
 Processing by Friendster::AppsController#home as HTML
  Parameters: {SOMESTUFF}
Completed 500 Internal Server Error in 3ms 
```

所以我去`app/controller/friendster/apps_controllers`看看这个`home`函数，它是：

```
 def home
    show_app_container
  end 
```

所以我把它改成：

```
 def home
    puts "container"
    abort "SHAMOON"

    show_app_container
  end 
```

就这样我可以看到某种错误或日志。但是任何地方都没有出现。没有什么不同的渲染。我不知道是否正在进行缓存，或者我是否在正确的功能中。任何调试此问题的帮助将不胜感激。

我也跑了一个`bundle exec rake routes`并得到：

```
friendster_app_home POST   /publishers/:publisher_id/apps/:app_id/home(.:format)                             {:action=>"home", :controller=>"friendster/apps"}
                    GET    /publishers/:publisher_id/apps/:app_id/home(.:format)                             {:action=>"home", :controller=>"friendster/apps"} 
```

虽然有很多路线`GET /publishers/:publisher_id/apps/:app_id/home(.:format)`，但我不确定这意味着什么。这是唯一的`friendster`一个。

**编辑：添加基本控制器父**

```
class Friendster::BaseController < AppsController
  protected

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:02:00.207

> 任何调试此问题的帮助将不胜感激。

包括[pry gem](http://pryrepl.org/)，调用`binding.pry`inside`#home`和 Pry 将在控制台中生成一个交互式调试器。

```
def home   
  binding.pry
  show_app_container
end 
```

# html - QtWebkit：如何连接虚拟键盘字段

> ID：15340593
> 
> 赞同：1
> 
> 时间：2013-03-11T14:04:27.720
> 
> 标签：html, input, embedded, qtwebkit

我正在开发一个嵌入式 Webkit 浏览器（在 linux 上使用 Qt 4.8.0），该浏览器在电视机上使用遥控器运行。到目前为止，我几乎完成了所有工作，现在我正在尝试处理`<input>`网页中的标签。

What I'd like to happen is: whenever an input field is selected, I'd like to pop my virtual keyboard and let the user enter text with his remote, then push back the result into the .

我已经尝试了几种方法来做到这一点：

*   使用[本教程](http://qt-project.org/doc/qt-4.8/tools-inputpanel.html)安装[QInputContext](http://qt-project.org/doc/qt-4.8/qinputcontext.html)：我没有看到任何事件通过我安装的 InputContext。
*   在浏览器的不同阶段（在 QApp、QGraphicsWebPage、QGraphicsWebView 中）重新实现各种`eventFilter()`：我看到了 LOADS 的事件，但从来没有看到我感兴趣的事件（`QEvent::RequestSoftwareInputPanel`/ `QEvent::CloseSoftwareInputPanel`/ `FocusIn`/ `FocusOut`/ `Enter`/ `Leave`）。
*   using`installSceneEventFilter()`给了我与前一点相同的结果。

由于我没有使用鼠标，因此我无法处理诸如“鼠标悬停”或“鼠标单击”之类的事件来确定`<input>`元素是否被聚焦。

所以我想知道如何连接到`<input>`网页中的任何内容以检测焦点何时到达它。请注意，即使该`<input>`字段是通过页面中的 Javascript 脚本*动态*插入的，我想这也必须有效。

我可以连接到 Qt 信号吗？
如何处理动态插入的新输入表单？

我尚未探索的可能解决方案：使用`QT_KEYPAD_NAVIGATION`in mkspecs 作为我的拱门，然后过滤应该通过的 QEvent::EnterEditFocus。我宁愿坚持我现在拥有的香草 Qt，所以这是一个极端（我不确定它是否会起作用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T08:06:15.140

对于那些对解决方案感兴趣的人，这里是：

*   用于`addToJavascriptWindowObject()`插入您自己的 C++ 对象，该对象至少有 1 个方法：`showMultitap(cont QWebElement&)`. 假设您使用名称“multitap”插入它。

*   注入如下所示的 javascript 代码：

    ```
    document.addEventListener("焦点", function(e){
        window.multitap.showMultitap(e); // 将落在你的 C++ 对象中
    }， 真的）;

    ```

并在实际显示 VK 之前检查您的 C++ 处理程序该元素是文本元素。

*   您将遇到的一个问题是您无法仅使用键盘（或远程）箭头退出文本字段，因此您必须添加`DEFINES += QT_KEYPAD_NAVIGATON`到 Qt 编译过程中（最好将它们放在拱门的 qmakespecs 中）。

# perl - 如何在 Perl 中读取 STDIN 并将内容写回 STDIN？

> ID：15340595
> 
> 赞同：2
> 
> 时间：2013-03-11T14:04:29.410
> 
> 标签：perl, stdin

我必须修补内部软件产品中的一些核心组件。由于它对 STDIN 的处理非常糟糕，我必须：

1.  读取 STDIN 并备份 RAW
2.  解析它
3.  将 RAW 写回 STDIN
4.  让下游系统处理 STDIN

不幸的是，我不允许修改任何遗留代码，所以我必须对其进行修补。

我的第一次不工作尝试：

```
BEGIN {
  my $stdin_raw = join '', <STDIN>;
  use IO::Handle;
  my $stdin_io1 = IO::Handle->new();
  $stdin_io1->printflush( $stdin_raw );
  my $stdin_io2 = IO::Handle->new();
  $stdin_io2->printflush( $stdin_raw );
  STDIN->fdopen( $stdin_io1, 'r' );
  require CGI;
  warn CGI::param('PARAM1');
  warn CGI::param('PARAM2');
  STDIN->fdopen( $stdin_io2, 'r' );
} 
```

它能够在第一行读取 STDIN，但较晚的 CGI 和下游系统都从 STDIN 获得任何输入，我（尝试）按照上面列出的方式进行设置。

那么：**如何在 Perl 中读取 STDIN 并将内容写回 STDIN？**

该应用程序在 CGI（网络服务器）条件下运行。STDIN 处理 Web 请求的 POST 数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:28:46.997

怎么样`open(STDIN, '<', \$stdin_raw)`

* * *

顺便一提，

```
my $stdin_raw = join '', <STDIN>; 
```

通常写成

```
my $stdin_raw; { local $/; $stdin_raw = <STDIN>; } 
```

可能也更有效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:04:19.250

根本不可能读取、重新填充、读取 STDIN。

# c# - 具有 Linq、内部联接、分组依据、排序依据的实体框架

> ID：15340597
> 
> 赞同：22
> 
> 时间：2013-03-11T14:04:30.067
> 
> 标签：c#, sql, entity-framework, linq, linq-to-entities

我有一个 SQL 查询

```
select Firma.Name as companyName, 
       Taetigkeit.Taetigkeit as skillName, 
       SUM(Zeit) as time
from Zeiterfassung 
inner join Firma On ZEiterfassung.FirmenID = Firma.ID    
inner join Taetigkeit on Zeiterfassung.TaetigkeitID = Taetigkeit.ID    
group by Taetigkeit, Firma.Name    
order by Firma.Name 
```

并希望将其“翻译”为 linq。这是我尝试过的：

```
var query = db.Zeiterfassung
              .Where(x => x.Firma.ID == x.FirmenID && x.TaetigkeitID == x.Taetigkeit.ID)
              .GroupBy(x => x.Taetigkeit.Taetigkeit1)
              .Select(x => new Evaluation() { skillName = x.Key, time = x.Sum(y => y.Zeit), //skillName = x.Sum(x => x.Zeit), })
              .OrderBy(x => x.skillName); 
```

我不知道谁来解决这个问题，因为我一直在做一个 groupBy 我无法访问其他成员。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-11T14:14:39.603

根据您提供的数据，我认为查询应该像

```
from z in db.Zeiterfassung
join f in db.Firma on z.FirmenID equals f.ID
join t in db.Taetigkeit on z.TaetigkeitID equals t.ID
select new { f.Name, t.Taetigkeit, z.Zeit) into x
group x by new { x.Taetigkeit, f.Name } into g
select new {
   CompanyName = g.Key.Name,
   SkillName = g.Key.Taetigkeit,
   Time = g.Sum(i => i.Zeit)
} 
```

或使用导航属性：

```
db.Zeiterfassung
  .Select(z => new { z.Zeit, z.Taetigkeit.Taetigkeit1, z.Firma.Name })
  .GroupBy(x => new { x.Taetigkeit1, x.Name })
  .Select(g => new Evaluation {
       companyName = g.Key.Name,
       skillName = g.Key.Taetigkeit1, 
       time = g.Sum(y => y.Zeit)
  }); 
```

# jquery - jQuery 可编辑添加 plecholder 文本

> ID：15340600
> 
> 赞同：1
> 
> 时间：2013-03-11T14:04:32.477
> 
> 标签：jquery, backbone.js, textarea

我有一个文本，当它被点击时，它变成了一个使用 js 中的可编辑函数的文本区域。如何向该区域添加占位符文本？我尝试使用 $('textarea') 在 dom 中搜索它，但我没有运气。我还使用主干模型和视图来生成视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:20:01.423

我稍后会更新选择器，但现在这将起作用：

$("form :text").attr("placeholder",你想要什么);

html gotcha，确保`<textarea></textarea>`它们在同一行，否则无论占位符值如何，“\n”都将是默认[值](https://stackoverflow.com/questions/10186913/html5-textarea-placeholder-not-appearing)。

# excel - 根据匹配的 excel 列比较两个 excel 列中的数据

> ID：15340606
> 
> 赞同：2
> 
> 时间：2013-03-11T14:04:51.287
> 
> 标签：excel, vba, compare

假设我有一个格式如下的电子表格：

```
Sheet 1                    |  Sheet 2
name          email        |  name          email
Mike Jones    mikej@mail   |  John Smith    jsmith@mail    
John Smith    johns@mail   |  Mike Jones    mjones@mail    
John Public   jpublic@mail |  Chris Paul    cpaul@mail        
Chris Paul    cpaul@mail   |  John Public   jpublic@mail
Jim Abram     jambram@mail |
Tim Toole     ttoole@mail  | 
```

而且我想比较具有匹配名称的条目的电子邮件并显示不匹配的名称（如果需要，我可以将所有数据放在一张纸上），所以基本上，这将输出：

> 迈克·琼斯
> 
> 约翰·史密斯

我试图用一个公式来做到这一点，但我想我可能不得不用一个宏......谁能指出我这样的例子？

我正在尝试这些方面的东西：

```
=IF(ISERROR(MATCH(Sheet1!A1,Sheet2!$A$1:$A$5,0)),(IF(ISERROR(MATCH(Sheet1!B1,Sheet2!$B$1:$B$5,0)), Sheet1!A1, ""),"") 
```

并且真的很想尝试将其表达为宏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:02:33.950

如果可以在第一页上插入一列，然后过滤它以查找重复项，那么您可以这样做：

```
name        email           Duplicate Count
Mike Jones  mikej@mail          0
John Smith  johns@mail          0
John Public jpublic@mail        1
Chris Paul  cpaul@mail          1
Jim Abram   jambram@mail        0
Tim Toole   ttoole@mail         0 
```

重复计数列具有以下内容：

```
=SUMPRODUCT((D:D=A2)*1,(B2=E:E)*1) 
```

其中 D 列和 E 列是您上面的第二个表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:28:03.747

这是一些将匹配项存储在工作簿中的短代码。您需要包含对“Microsoft Scripting Runtime”的引用。

```
Sub Compare(rng1 As Range, rng2 As Range, rngTarget As Range)
    Dim d As New Scripting.Dictionary
    Dim rngTemp As Range
    Const cMailCol As Long = 2

    For Each rngTemp In rng1.Columns(1).Cells
        d.Add rngTemp.Offset(cMailCol - 1).Value, rngTemp.Value
    Next

    For Each rngTemp In rng2.Columns(1).Cells
        If d.Exists(rngTemp.Offset(cMailCol - 1).Value) Then
            rngTarget = d(rngTemp.Offset(cMailCol - 1).Value)
            Set rngTarget = rngTarget.Offset(1)
        End If
    Next
End Sub 
```

就像 `Compare [A2:B7], [D2:E5], [G2]`将前两个范围的匹配存储在 G2 中一样！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T19:20:41.103

这是一个快速简单的公式解决方案的尝试！

1.  创建工作表 3；
2.  命名单元格 A1 = allnames。将所有名称（表 1 + 表 2）粘贴到 A 列
3.  名称单元格 B1 = 电子邮件。
    输入 B2 =`IF(VLOOKUP(A2,Sheet1!$A$1:$B$7,2,0<>VLOOKUP(A2,Sheet2!$A$1:$I$5,2,0),VLOOKUP(A2,Sheet1!$A$1:$B$7,2,0),"")`

4.  复制 B 列并粘贴为 C 列的“值”

5.  替换`"#N/A"`为`""`
6.  过滤C列`""`
7.  在 A 栏查看您想要的结果。

# css - 如果浏览器宽度不是 1200 像素宽，如何在防止水平滚动条的同时使用 1200 像素背景？

> ID：15340607
> 
> 赞同：0
> 
> 时间：2013-03-11T14:04:53.150
> 
> 标签：css, header, background-image, scrollbars

对于我的页眉，我有一个重复元素，无论浏览器宽度是多少，它都会扩展——2000px、4000px 等。在页眉元素内，我有一个固定的 1200px 宽的背景。我的页面布局是 960px 宽。

如果我将固定设置为 1200 像素，浏览器宽度低于 1200 像素的用户将出现水平滚动条。

我怎样才能让拥有 1100px 浏览器窗口的人看不到水平滚动条？

```
header {
  background: #000 url("/images/bg-header-repeat.png") repeat;
  position: relative;
}

.header-wrapper {
  background: url("/images/bg-header.png") no-repeat left top;
  margin: 0 auto;
  min-height: 100px;
  width: 1200px;
}

.container {
  margin: 0 auto;
  width: 960px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:09:15.957

不要给容器提供静态（和那么大）宽度。

做这个：

```
.header-wrapper {
  background: url("/images/bg-header.png") no-repeat left top;
  min-height: 100px;
  width:100%;
  position:relative;
  left:0;
  top:0;
}

.container
{
    position:relative;
    width:80%;
} 
```

给出较大的静态宽度很容易在某些分辨率下带来水平滚动条。如果您想在很宽的分辨率范围内覆盖整个浏览器宽度，请以百分比形式给出宽度。还使您的容器`position:relative`使其`top`、`left`和属性处于活动状态。所以你不需要使用. 这些属性选择它们相对于父容器的值。`right``bottom``margin`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:09:06.483

尝试添加 max-width 以便标题在较小的屏幕上更改宽度：

```
.header-wrapper {
  background: url("/images/bg-header.png") no-repeat left top;
  margin: 0 auto;
  min-height: 100px;
  max-width: 1200px;
} 
```

# jms - JMS-Topic通信的正确使用

> ID：15340613
> 
> 赞同：1
> 
> 时间：2013-03-11T14:05:19.457
> 
> 标签：jms, java-ee-6, jms-topic

我想在我的 JavaEE 6 项目中使用 JMS（主题）。我有一个类可以同时充当主题的发布者和订阅者。以下代码显示了该类中最重要的部分。

```
public class MessageHandler implements MessageListener {
    private static TopicConnectionFactory factory;
    private static Topic topic;

    private TopicSubscriber subscriber;
    private TopicPublisher publisher;

    public MessageHandler() throws NamingException, JMSException {
            if (factory == null) {
                Context context = new InitialContext();
                factory = (TopicConnectionFactory) new InitialContext()
                        .lookup("jms/myfactory");
                topic = (Topic) context.lookup("jms/mytopic");
            }
            TopicConnection connection = factory.createTopicConnection();
            connection.start();
            TopicSession session = connection
                    .createTopicSession(false, Session.AUTO_ACKNOWLEDGE);
            subscriber = session.createSubscriber(topic);
        }

    @Override
    public void onMessage(Message message) {
        try {
            ObjectMessage msg = (ObjectMessage) message;
            Object someO=  msg.getObject();
            System.out.println(this + " receives "+someO);
        } catch (JMSException e) {
            e.printStackTrace();
        }
    }

    public void sendMessage(Object someO) {
        try {
            ObjectMessage msg = session.createObjectMessage();
            msg.setObject(someO);
            publisher = session.createPublisher(topic);
         publisher.publish(msg);
         publisher.close();
        } catch (JMSException e) {
            e.printStackTrace();
        }
    }     
} 
```

我的问题是，如果这是设计这样一个类的好方法。我的想法是为订阅和发布共享一个连接和会话。但我担心这会导致一些开销或阻塞，因为我不会关闭连接、会话、订阅者和发布者，直到不再需要该对象。我在网上找到的所有示例都在发送或接收消息后直接关闭所有内容......

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:25:11.577

为什么您希望该类同时成为订阅者和发布者？

每当使用消息传递系统时，您可能会同时充当两者，但为什么要针对同一个主题这样做，您肯定不想收到自己的消息？

因此，主题的目的是在应用程序内的多个部分或多个应用程序之间使用 - 一个是将消息放入主题，其他人接收他们订阅的消息。

这也解释了您在示例中看到的内容 - 消息处理是一次性的，因此可以在之后关闭连接。

顺便说一句，既然您在“java-ee 6”区域内提出这个问题 - 您不能使用消息驱动 bean、注释您的主题配置并让应用程序服务器为您完成基础设施部分吗？

# c# - .resx 表单图标级联更新

> ID：15340615
> 
> 赞同：2
> 
> 时间：2013-03-11T14:05:24.660
> 
> 标签：c#, .net, winforms, localization

假设我们有一个 Windows 窗体 Form1，我们为其设置了一个图标。Visual Studio 会将图标存储在 Form1.resx ($this.Icon) 中。

现在我们决定将应用程序本地化为 N 种语言，因此我们将 Localizable 设置为 True，我们从 Language 选项中选择第一种语言，我们翻译文本并继续使用下一种语言重复该过程（选择另一种并翻译）直到N. 结果将是 N .resx 文件，其中包含带有原始图标的 $this.Icon 条目。

然后我们意识到我们想要更新表单图标，所以我们将语言设置为“（默认）”并设置新图标。令我们惊讶的是，我们发现 N 个 .resx 文件没有更新。

我们是否必须手动更新 N 个 .resx 文件？有类似级联更新的东西吗？在这种情况下你会怎么做以避免更新 N 个图标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-23T13:48:23.983

我刚刚将代码添加到我的 Program.Main 以修改所有解决方案 .resx 文件以删除 Form.Icon。

```
 try
    {
        string solutionDirPath = @"path\to\solution";
        string[] resxFilePaths = Directory.GetFiles(solutionDirPath, "*.resx", SearchOption.AllDirectories);
        foreach (string resxFilePath in resxFilePaths)
        {
            XDocument xdoc = XDocument.Load(resxFilePath);
            var iconElement = xdoc.Root.Elements("data").SingleOrDefault(el => (string)el.Attribute("name") == "$this.Icon");
            if (iconElement != null)
            {
                iconElement.Remove();
                xdoc.Save(resxFilePath);
            }
        }
    }
    catch (Exception ex)
    {

    }
    finally
    {

    } 
```

我的垃圾箱大小几乎减少了两倍！

同样对于所有形式，我只会使用我的应用程序可执行文件中的图标

```
Icon.ExtractAssociatedIcon(Application.ExecutablePath) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T14:16:16.530

老实说，没有理由在每个 resx 中都有相同的图标。

ResX 文件基于语言级联，从最具体的语言资源到最少的语言资源。

如果您从除默认值之外的所有 resx 文件中删除该图标，则将始终使用该图标。

如果您想要特定语言的不同图标，只需将不同图标添加到该 resx 文件。

您可以自己轻松地看到这一点。向表单添加标签，并根据名为“test”的键的值填充它（您可以通过在代码中调用“GetLocalResourceObject("test")' 来完成此操作）。

将键值对 'test'-'Hello' 添加到您的 resx 文件中。假设您的 resx 名为“foo.resx”。在特定于语言的文件（例如“foo.fr.resx”）中添加“test”-“Bonjour”。如果您以任何非法语语言运行程序，您将看到“Hello”，但如果您切换到法语，您将看到“Bonjour”。

它与您的图标的工作方式相同 - 您可以在基本 resx 中设置它，它会针对每种语言显示。然后，您可以在不同的资源文件中覆盖它。

# php - CouchDB 监听 _changes 提要

> ID：15340617
> 
> 赞同：1
> 
> 时间：2013-03-11T14:05:37.270
> 
> 标签：php, javascript, couchdb

我有一个小网站，我想在我拥有的沙发数据库上收听 _changes 提要。该网站显示数据库中的元素列表，当数据库发生更改时，我希望列表自行刷新。请记住，进行更改的客户不一定是查看列表的人。

我尝试了一些谷歌搜索，但没有找到我要找的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:48:35.540

即将推出的 CouchDB 1.3 将支持[EventSource](https://developer.mozilla.org/en-US/docs/Server-sent_events/EventSource)版本的 _changes 提要，您可以直接从 JavaScript 使用它。对于较旧的 CouchDB 版本，我认为您无法执行此类操作，因此您需要在两者之间使用某种代理（将连续的 _changes 提要转换为 EventSource 或 WebSocket 格式）。

# c# - 使我的 COM 程序集调用异步

> ID：15340620
> 
> 赞同：11
> 
> 时间：2013-03-11T14:05:39.650
> 
> 标签：c#, multithreading, com

在我目前的工作中，我刚刚“赢得”了维护一个用 C# 编码的遗留库的特权。

这个dll：

*   公开使用 Uniface 制作的大型遗留系统的方法，该系统别无选择，只能调用 COM 对象。
*   充当此遗留系统与另一个系统的 API 之间的链接。
*   在某些情况下，它的 UI 使用 WinForm。

更直观地，据我了解组件：

`*[Big legacy system in Uniface]*` **==[COM]==>** `[C# Library]` **==[托管 API]==>** `*[Big EDM Management System]*`

问题是：这个 C# 库中的一个方法运行时间太长，我*“应该”*让它异步！

我习惯了 C#，但根本不习惯 COM。我已经完成了并发编程，但是 COM 似乎给它增加了很多复杂性，到目前为止我所有的试验都以以下两种方式结束：

*   完全没有错误消息的崩溃
*   我的 Dll 仅部分工作（仅显示其 UI 的一部分，然后关闭），但仍然没有给我任何错误

我没有关于如何在 COM dll 中处理线程的想法和资源，我将不胜感激任何提示或帮助。

到目前为止，我更改的代码的最大部分是使我的方法异步：

```
// my public method called by the external system
public int ComparedSearch(string application, out string errMsg) {
  errMsg = "";
  try {
    Action<string> asyncOp = AsyncComparedSearch;
    asyncOp.BeginInvoke(application, null, null);
  } catch (ex) {
    // ...
  }
  return 0;
}

private int AsyncComparedSearch(string application) {
  // my actual method doing the work, that was the called method before
} 
```

任何提示或有用的资源将不胜感激。谢谢你。

**更新 1：**

遵循下面的答案和线索（尤其是关于`SynchronizationContext`，并在[此示例](http://blogs.msdn.com/b/mattdotson/archive/2006/02/13/531315.aspx)的帮助下），我能够重构我的代码并使其工作，但仅当从 C# 中的另一个 Window 应用程序调用时，而不是通过 COM。当我调用该函数时，遗留系统遇到了一个非常模糊的错误，并且没有提供有关崩溃的任何详细信息。

**更新 2：**

**我的试验中的最新更新：当调用来自测试项目而不是**来自*Uniface 系统*时，我设法使多线程工作。经过多次试验，我们倾向于认为我们的遗留系统在其当前配置中不能很好地支持多线程。但这不再是问题的重点:)

这是似乎有效的代码摘录：

```
string application;
SynchronizationContext context;

// my public method called by the external system
public int ComparedSearch(string application, out string errMsg) {
    this.application = application;
    context = WindowsFormsSynchronizationContext.Current;
    Thread t = new Thread(new ThreadStart(AsyncComparedSearchAndShowDocs));
    t.Start();
    errMsg = "";
    return 0;
}

private void AsyncComparedSearch() {
    // ANY WORK THAT AS NOTHING TO DO WITH UI
    context.Send(new SendOrPostCallback(
        delegate(object state)
        {
            // METHODS THAT MANAGE UI SOMEHOW
        }
    ), null);
} 
```

我们现在正在考虑修改此 COM 程序集以外的其他解决方案，例如将此库封装在 Windows 服务中并在系统和服务之间创建接口。它应该更可持续..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:01:31.780

不知道更多细节很难说，但这里几乎没有问题。

您通过在另一个线程上执行委托，`BeginInvoke`但您不等待它。您的`try\catch`块不会捕获任何东西，因为它在远程调用仍在执行时已经通过。相反，你应该把`try\catch`block 放在里面`AsyncComparedSearch`。

由于您不等待远程方法（`EndInvoke`或通过回调）执行结束，我不确定您如何处理 COM 调用的结果。我猜你是从内部更新 GUI 的`AsyncComparedSearch`。如果是这样，那是错误的，因为它在另一个线程上运行，您不应该从除 GUI 线程之外的任何地方更新 GUI - 这很可能会导致崩溃或其他意外行为。因此，您需要将 GUI 更新工作同步到 GUI 线程。在 WinForms 中，您需要使用[Control.BeginInvoke](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.begininvoke.aspx)（不要将其与 Delegate.BeginInvoke 混淆）或其他方式（例如[SynchronizationContext](http://msdn.microsoft.com/en-us/magazine/gg598924.aspx)）将代码同步到 GUI 线程。我使用类似的东西：

```
private delegate void ExecuteActionHandler(Action action);

public static void ExecuteOnUiThread(this Form form, Action action)
{
  if (form.InvokeRequired) { // we are not on UI thread
    // Invoke or BeginInvoke, depending on what you need
    form.Invoke(new ExecuteActionHandler(ExecuteOnUiThread), action);
  }
  else { // we are on UI thread so just execute the action
    action();
  }
} 
```

然后我从任何线程中这样称呼它：

```
theForm.ExecuteOnUiThread( () => theForm.SomeMethodWhichUpdatesControls() ); 
```

此外，请阅读[此答案](https://stackoverflow.com/questions/10340871/difference-between-delegate-begininvoke-and-using-threadpool-threads-in-c-sharp)以获取一些警告。

# php - 相同的字符串，但 var_dump() 表示一个长 5 个字符

> ID：15340621
> 
> 赞同：1
> 
> 时间：2013-03-11T14:05:40.053
> 
> 标签：php, string

我有 2 个字符串，当我`var_dump()`看到一个字符串比另一个字符串长 5 个字符时。

我想这是因为在第一个字符串中，`'`（引号）被视为`&#039;` 或`&apos;`（但我不确定）。

```
string(15) "i'm a bird" 
string(10) "i'm a bird" 
```

我希望第一个字符串也有 10 个字符。

我已经尝试过`htmlspecialchars()`, `htmlspecialchars()`with `ENT_QUOTES`, `htmlspecialchars()`with `ENT_NOQUOTES`, `utf8_decode()`, `utf8_encode()`, ...

它仍然是一个`string(15)`.

有人知道怎么做吗？

编辑：@Mathieu Imbert：当我查看页面源代码时，我看到它是这样的：

```
string(15) "i&#039;m a bird" 
```

* * *

解决方案：

编辑：谢谢 PeeHaa ！你代码@http [://codepad.viper-7.com/pvHCwH](http://codepad.viper-7.com/pvHCwH)修好了！

```
html_entity_decode($title, ENT_QUOTES); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:14:10.633

如果您希望第一个字符串也为 10 个字符，则需要`DECODE`字符串中的编码值。检查[html_entity_decode](http://php.net/manual/en/function.html-entity-decode.php)

您给出的示例将使第二个字符串也大于 10 个字符。

# r - 在R中为相同的值添加一列索引

> ID：15340622
> 
> 赞同：2
> 
> 时间：2013-03-11T14:05:44.423
> 
> 标签：r

我想从我拥有的按年事件发生的数据集制作一个平铺图。例如，我有这样的数据：

```
set.seed(123)
data <- data.frame(years = sample(2000:2010, 50, replace = T)) 
```

我想将这些绘制为 x = year 的平铺图，但在发生多次事件的年份中保持事件之间的分隔（y 方向）。问题是我没有其他列可以给我一个连续的 y 年倍数值。

为了说明，我有这个：

```
data[data$years == 2002, ]
[1] 2002 2002 2002 2002 
```

我想我需要这样的东西：

```
data[data$years == 2002, ]
    years   index
1    2002       1
2    2002       2
3    2002       3
4    2002       4 
```

`x = years`然后我可以用and平铺`y = index`。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T14:13:05.967

也许与`plyr`：

```
ddply(data, .(years), mutate, index=1:length(years)) 
```

这使 ：

```
 years index
1   2000     1
2   2000     2
3   2000     3
4   2001     1
5   2001     2
6   2001     3
7   2001     4
8   2001     5
9   2002     1
10  2002     2
11  2002     3
12  2002     4
13  2002     5 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T14:35:23.023

我首先对数据进行排序`years`并使用`ave`如下：

```
set.seed(123)
data <- data.frame(years = sample(2000:2010, 50, replace = T))
data <- data[order(data$years), , drop = F]
data$index <- ave(data$years, data$years, FUN=seq_along)

# a piece of output
#    years index
# 6   2000     1
# 18  2000     2
# 35  2000     3
# 15  2001     1
# 30  2001     2
# 41  2001     3
# 45  2001     4
# 46  2001     5
# 17  2002     1
# 38  2002     2
# 40  2002     3
# 47  2002     4
# 49  2002     5 
```

**编辑：**您也可以`ave`通过跳过排序为的第一行来进行排序而不进行排序：

```
set.seed(123)
data <- data.frame(years = sample(2000:2010, 50, replace = T))
data$index <- ave(data$years, data$years, FUN=seq_along)
> head(data)

#   years index
# 1  2003     1
# 2  2008     1
# 3  2004     1
# 4  2009     1
# 5  2010     1
# 6  2000     1 
```

请注意，现在订单被保留。现在，如果我们对 进行子集化`2002`：

```
data[data$years == 2002, ]

#    years index
# 17  2002     1
# 38  2002     2
# 40  2002     3
# 47  2002     4
# 49  2002     5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T14:11:55.987

可能不是最优雅的......只是添加另一种方式。

```
set.seed(123)
data <- data.frame(years = sample(2000:2010, 50, replace = T))
cbind(data[order(data), ], unlist(sapply(rle(data[order(data), ])$lengths, FUN = seq)))
##       [,1] [,2]
##  [1,] 2000    1
##  [2,] 2000    2
##  [3,] 2000    3
##  [4,] 2001    1
##  [5,] 2001    2
##  [6,] 2001    3
##  [7,] 2001    4
##  [8,] 2001    5
##  [9,] 2002    1
## [10,] 2002    2
## [11,] 2002    3
## [12,] 2002    4
## [13,] 2002    5
## [14,] 2003    1
## [15,] 2003    2
## [16,] 2003    3
## [17,] 2003    4
## [18,] 2004    1
## [19,] 2004    2
## [20,] 2004    3
## [21,] 2004    4
## [22,] 2004    5
## [23,] 2005    1
## [24,] 2005    2
## [25,] 2005    3
## [26,] 2005    4
## [27,] 2005    5
## [28,] 2006    1
## [29,] 2006    2
## [30,] 2006    3
## [31,] 2007    1
## [32,] 2007    2
## [33,] 2007    3
## [34,] 2007    4
## [35,] 2007    5
## [36,] 2007    6
## [37,] 2008    1
## [38,] 2008    2
## [39,] 2008    3
## [40,] 2009    1
## [41,] 2009    2
## [42,] 2009    3
## [43,] 2009    4
## [44,] 2009    5
## [45,] 2009    6
## [46,] 2010    1
## [47,] 2010    2
## [48,] 2010    3
## [49,] 2010    4
## [50,] 2010    5 
```

**根据 Arun 的建议，以下更简单。

```
cbind(data[order(data), ],sequence(rle(data[order(data), ])$lengths)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T16:29:37.397

本着分享的精神，这是在基础 R 中执行此操作的另一种方法：

```
stack(with(data, by(years, years, FUN = seq_along))) 
```

这是前几行：

```
> head(stack(with(data, by(years, years, FUN = seq_along))), 10)
   values  ind
1       1 2000
2       2 2000
3       3 2000
4       1 2001
5       2 2001
6       3 2001
7       4 2001
8       5 2001
9       1 2002
10      2 2002 
```

* * *

就此而言，任何拆分-应用-组合方法都可能是合适的，例如：

```
stack(sapply(split(data$years, data), seq_along))
stack(tapply(data$years, data$years, FUN = seq_along)) 
```

但是，@Arun 的`ave`解决方案和@juba 的“plyr”解决方案比这些更适合将列添加到多列数据集中，如果仅仅是因为它们的灵活性的话。

# assembly - 如何知道当前模式是实模式还是大实模式？

> ID：15340624
> 
> 赞同：1
> 
> 时间：2013-03-11T14:05:49.450
> 
> 标签：assembly, x86, bios, real-mode

假设我的 API 是从一个只能在实模式或大实模式下工作的系统调用的。我的 API 应该显示当前的系统模式。那么它怎么知道当前模式是实模式还是大实模式呢？

笔记：

1.  在大实模式下，保护模式启用位`CR0`被禁用，因此检查它没有任何区别。
2.  即使启用了 A20 地址线，也并不意味着它处于大实模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:19:36.130

如果你执行这个：

```
mov ebx, 0x10000
mov al, [ebx] 
```

并得到 a `#GP`，则段描述符`DS`的原始限制为 0xFFFF，这是普通实地址模式和虚拟 8086 模式的情况。

如果您没有得到`#GP`from `mov al, [ebx]`，则原始限制已超出 0xFFFF（通常为 0xFFFFFFFF，但不一定如此）。

顺便说一句，在尝试上述操作之前可以并且可能应该检查 v86 模式（以防您的主机操作系统没有正确地向您的处理程序反映异常）。执行`smsw`获取`cr0.pe`。它将在 v86 模式下设置为 1，在实地址模式下设置为 0。`cr0`直接用 with读取会在 v86 模式下`mov`生成 a ，这就是为什么是首选方法。`#GP``smsw`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T21:56:05.863

在 90 年代初期，我们使用了一种未记录的方法，让我们能够以 REAL 模式（现在可能称为 BIG REAL MODE）访问 4Gig。方法是进入保护模式，将粒度位更改为 1（表示 4K 粒度而不是 1 字节粒度），然后返回实模式并将所有段寄存器设置为 0。然后您可以使用 ebx 等访问4G 内存。

因此，如果这就是您所说的，请尝试进入保护模式并检查粒度位的设置。对不起，我所有的旧手册都在阁楼上。如果您需要这些信息，我可以将它们挖掘出来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:24:04.793

在大实模式下，实模式地址别名会失败。假设您处于大实模式，并且您的 DS 的值为 0x6000。由于 DS 的描述符缓存已重新加载（大实模式的定义），因此 DS:0 的物理地址不是 0x60000。如果你用另一个段寄存器点击 0x60000，那将不是同一个内存位置。

所以这里有一个食谱。在数据段中创建一个临时变量。注意它`offset`与 DS 的关系。用 DS-1 的值加载 ES，更改变量的值，看看是否在 ES:( `offset`+0x10) 处得到相同的值。为防止出现假阴性，请重复两次。

这不会检测到虚拟 86 模式。此外，如果 ES 也通过缓存描述符指向高内存，那么当您重新加载 ES 时，这将丢失。确保调用者代码不会依赖 ES 保持不变。

大实模式本身不是 CPU 模式 - 没有寄存器位显示“我们现在处于大实模式”。这只是使用香草实模式的 i386 特定逻辑访问高内存的一种方式。上面的过程只检查 DS 是否被这样处理；根据实现的不同，DOS 扩展器可能已经通过 ES 描述符重新加载实现了 big real，同时保持 DS vanilla。Wikipedia 说，有时甚至 CS 也会以这种方式别名，尽管由于中断，这是一个棘手的命题。

# c++ - 从文件读入向量

> ID：15340626
> 
> 赞同：-2
> 
> 时间：2013-03-11T14:05:53.897
> 
> 标签：c++, vector

我正在使用 C++，我正在从这样的文件行中读取：

```
D x1 x2 x3 y1 
```

我的代码有：

```
struct gate {
    char name;
    vector <string> inputs;
    string output;
}; 
```

在`main`函数中：

```
vector <gate> eco;

int c=0;
int n=0;
int x = line.length();
while(netlist[c][0])
{
    eco.push_back(gate());
    eco[n].name = netlist[c][0];
    eco[n].output[0] = netlist[c][x-2];
    eco[n].output[1] = netlist[c][x-1];
} 
```

`netlist`我已将文件复制到的二维数组在哪里。

我需要帮助来循环输入并将它们保存在 vector 中`eco`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T14:11:26.657

我不完全理解 2D 数组的含义，但我怀疑它是多余的。您应该使用以下代码：

```
ifstream somefile(path);
vector<gate> eco;
gate g;

while (somefile >> g)
    eco.push_back(g);

// or, simpler, requiring #include <iterator>
vector<gate> eco(std::istream_iterator<gate>(somefile),
                 std::istream_iterator<gate>()); 
```

`operator >>`并为您的类型适当地重载`gate`：

```
std::istream& operator >>(std::istream& in, gate& value) {
    // Error checking … return as soon as a failure is encountered.
    if (not (in >> gate.name))
        return in;

    gate.inputs.resize(3);
    return in >> gate.inputs[0] >>
                 gate.inputs[1] >>
                 gate.inputs[2] >>
                 gate.output;
} 
```

# jquery-ui - jquery 模态对话。在具有特定参数的关闭刷新页面上

> ID：15340628
> 
> 赞同：0
> 
> 时间：2013-03-11T14:06:03.500
> 
> 标签：jquery-ui, parameter-passing

我想知道当我关闭模式窗口时是否有办法更改重新加载的 url ......

现在我在 onClose 事件中有这个......

```
 , close: function (event, ui) {
        //debugger;
       //if($url.contains)
       location.reload(true);
    } 
```

理想情况下，我希望能够将几个参数传递给 location.reload(true) 函数。或者也许有另一种重新加载的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:14:09.073

您可以直接更改您的 location.href，它将加载相应的页面。如：

`location.href = location.href + '?a=1'`

# django - 覆盖 django 管理仪表板并在其上添加逻辑

> ID：15340630
> 
> 赞同：0
> 
> 时间：2013-03-11T14:06:07.163
> 
> 标签：django, admin, models, dashboard

我想知道如何在我的管理仪表板上添加一些逻辑。我需要对三个不同的模型进行查询并在仪表板模板上显示数据，但仍然无法处理具有不同模型数据的模板扩展。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:50:26.693

完成我计划做的事情看起来很奇怪。我需要更改 base_site.html 渲染视图以显示这些信息，或者我不知道如何处理的其他内容，所以，我所做的是：

*   在 /templates/admin 上扩展 admin/base.html 加载原始数据，并覆盖一些块

> {% 扩展“admin/base.html”%}

```
{% load i18n %}

{% block title %}
    {{ title }}
{% endblock %}
{% block branding %}
    <h1 id="site-name">Administration</h1>

{% endblock %}

{% block nav-global %}
    <center>
        <a href="/reports" class="link-button"><button>Reports</button></a>
        <a href="/report_graphs" class="link-button"><button>Graphs</button></a>
    </center>
{% endblock %} 
```

它现在工作正常，但仍然不知道如何处理 base_index.html 的管理视图

# javascript - 在 div 的祖父母之后插入行

> ID：15340631
> 
> 赞同：0
> 
> 时间：2013-03-11T14:06:18.360
> 
> 标签：javascript

`this`对应一个特定的div。

我想使用此代码在其祖父母之后插入一段代码，但它似乎不起作用：`this.parentNode[0].parentNode[0].insertAfter(newrespondform);`

如果需要，我可以提供更多代码，但在尝试调试后，我很确定问题出在此处。我怎么能写它使它工作？我不能向祖父母添加一个 ID 来选择它。

感谢您的帮助:)

编辑 - 这是在页面加载时加载的整个代码：

```
function comrespond(){
    function addresform(){
    var resid = this.getAttribute('id'),
    grandParent = this.parentNode.parentNode,
    newrespondform = '<div class="commentresponse"><span></span><span><p class="author">Leave a reply:</p><form id="commentform" action="http://split.snippetspace.com/wp-comments-post.php" method="post" onsubmit="addcomment(); return false;"><input id="author" aria-required="true" name="author" type="text" placeholder="Your name"/><input id="email" aria-required="true" name="email" type="text" placeholder="Email address" /><textarea id="comment" aria-required="true" name="comment" rows="8"></textarea><input id="submit" name="submit" type="submit" value="Post Comment" /><input id="comment_post_ID" name="comment_post_ID" type="hidden" value="'+resid+'" /></form></span></div>';
    grandParent.parentNode.insertBefore(newrespondform, grandParent.nextSibling);
    }
    var responsebtn = document.getElementsByClassName('comment-reply-link');
    for(var i = 0; i < responsebtn.length; i++){
                    bindEvt(responsebtn[i], "click", addresform);
                };} 
```

的HTML：

```
<div>
    <span></span>
    <span>
        <p class="author">Christopher</p>
        <div class="comment-reply-link" id="106"></div>
        <p>test comment 2 to see if it increments!</p>
    </span>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:11:32.917

您的代码中有几个问题。

首先，属性`parentNode`只包含一个节点，而不是一组节点，因此您不需要申请`[0]`获取第一个节点。其次，原生 JavaScript 中没有`insertAfter`方法。相反，您可以使用`insertBefore`. 所以解决方案可能如下所示：

```
var grandParent = this.parentNode.parentNode;
grandParent.parentNode.insertBefore(newrespondform, grandParent.nextSibling); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:09:28.983

`parentNode`不是一个数组，所以我认为只是摆脱`[0]`应该这样做。

```
this.parentNode.parentNode.insertAfter(newrespondform); 
```

# ant - 任何在线工具将转义字符应用于 ant 脚本的给定字符串

> ID：15340632
> 
> 赞同：1
> 
> 时间：2013-03-11T14:06:18.597
> 
> 标签：ant, escaping, stringescapeutils

嗨，我想用以下字符串替换 ant 脚本中的令牌值

```
<TagType Name="some name" param1="prefix=%s" param2="_default" /> 
```

因为我们不能直接`'<','"','%'`输入 ant 脚本，所以我们需要使用转义序列，例如`'&lt;','&quot;'..`

是否有任何在线工具可以为给定的字符串应用转义字符？我希望已经有这方面的工具:)

* * *

对于这样的给定字符串

```
<TagType Name="some name" param1="prefix=%s" param2="_default" /> 
```

我需要这样的转义字符串

```
&lt;TagType Name=&quot;some name&quot; param1=&quot;prefix=%s&quot; param2=&quot;_default&quot; /&gt; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T05:57:29.217

最后我找到了这个在线工具，它可以完成 xml 转义的工作。 [http://www.freeformatter.com/xml-escape.html](http://www.freeformatter.com/xml-escape.html)

# c - 将数组传递给函数

> ID：15340634
> 
> 赞同：-1
> 
> 时间：2013-03-11T14:06:19.817
> 
> 标签：c, arrays

您好我正在尝试创建一个程序，该程序接受一个 7 元素数组作为参数并将该数组的第三个到第五个元素返回到一个较小的数组，但是我目前收到此错误

```
assign8p7.c: In function 'main':
assign8p7.c:18:2: warning: passing argument 1 of 'copysect' makes pointer from 
integer without a cast [enabled by default]
assign8p7.c:3:6: note: expected 'int *' but argument is of type 'int' 
```

据我所知，警告有问题，我在参数中传递了一个数组，有人知道我该如何解决这个问题吗？也欢迎对我的代码提出任何其他建议。

```
#include <stdio.h>  

int *copysect(int ar[],int start,int end)
{
int i;
static int retar[3];
for(i = 0; i<3;i++)
{
    retar[i+start]=ar[i+start];
}
return retar;
}

int main(int argc, char const *argv[])
{
int arry[7] = {1,2,3,4,5,6,7};
int miniarry[3];
miniarry[0] = *copysect(arry[0],3,5);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T14:08:32.547

```
int *copysect(int ar[],int start,int end) 
```

好的，`copysect`它的第一个参数是一个整数数组。

```
miniarry[0] = *copysect(arry[0],3,5); 
```

哎呀，你给它传递了一个整数而不是一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:27:44.287

1.  您正在`copysect`使用数组中的第一个元素调用函数，而不是指向数组的指针。正确的调用是：

    ```
    copysect(arry,3,5); 
    ```

2.  您可以动态计算数组的差异。现在 copysect 函数的调用者必须知道 start 和 end 之间的差是 2。

    ```
    int retar[end - start + 1] 
    ```

3.  for 循环中的赋值是错误的。您正在取消引用超出 retar 数组范围的值

    ```
    retar[i]=ar[i+start]; 
    ```

4.  调用函数时，您通过取消引用函数返回的数组而不是整个数组来`copysect`仅分配 中的第一个元素。`miniarry`

5.  在函数中使用静态数组不是最好的主意（如果您多次调用该函数等，这将是有问题的）。相反，您可以在 elswhere 声明较小的数组并将其作为参数传递给函数。

    ```
    void copysect(int ar[], int retar[], int start,int end, ) 
    ```

# map - F# - GroupBy 并将函数应用于第二个元组项内的每个属性

> ID：15340635
> 
> 赞同：5
> 
> 时间：2013-03-11T14:06:29.113
> 
> 标签：map, f#, group-by, seq

我有一个 F# 类列表，我使用属性来访问数据（我使用的是用 C# 开发的库）。我想按一个属性分组，然后对结果元组的第二项中的每个属性应用一个单独的函数。

例子：

```
let grouped = list  |> Seq.groupBy (fun x -> x.Year) //group by the year property. Results in Seq<int * seq<myClass>>
                    |> Seq.map (fun (a, b) -> (a, //How to map generic functions to each remaining property in the second tuple? 
```

希望这对某人有意义。我的第二个元组项是由 groupBy 产生的序列。MyClass 中的每个剩余属性都需要应用不同的函数。在过去总结一个属性我刚刚做了类似的事情：

```
|> Seq.map (fun (a, b) -> (a, b |> Seq.SumBy (fun x -> x.myProperty))) 
```

我想对几个属性使用 Seq.map 做这样的事情。

非常感谢您的帮助，理查德

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-11T14:14:00.443

您需要以某种方式指定要使用的属性 - 最简单的方法是创建读取属性的函数列表。假设你的类型是`MyType`，你可以这样写：

```
let properties = [ (fun (x:MyType) -> x.MyProperty) ] 
```

构建组后，您可以遍历`properties`（使用`List.map`或 F# 列表理解）中的所有属性并计算组`values |> Seq.sumBy prop`在哪里以及当前属性是：`values``prop`

```
let grouped = 
  list  
  |> Seq.groupBy (fun x -> x.Year) 
  |> Seq.map (fun (key, values) -> 
       (key, [for prop in properties -> values |> Seq.sumBy prop ]) 
```

如果您需要使用除 之外的其他聚合函数`Seq.sumBy`，则可以构建需要运行的聚合操作列表（而不是属性列表）。

```
let properties = [ "MyPropSum", Seq.sumBy (fun (x:MyType) -> x.MyProperty);
                   "MyProp2Avg", Seq.averageBy (fun (x:MyType) -> x.MyProperty2) ] 
```

为了使进一步的处理更容易，我可能会用结果构建一个字典 - 这可以通过将带有名称-值对的列表传递给`dict`函数来轻松完成：

```
let grouped = 
  list  
  |> Seq.groupBy (fun x -> x.Year) 
  |> Seq.map (fun (key, values) -> 
       (key, dict [for name, aggregate in properties -> name, aggregate values ]) 
```

# java - 如何使用多个输出 用于将输出数据写入多个输出

> ID：15340638
> 
> 赞同：-1
> 
> 时间：2013-03-11T14:06:35.970
> 
> 标签：java, hadoop, mapreduce

我是 Hadoop 和 MapReduce 的新手，一直在尝试根据键将输出写入多个文件。谁能提供有关如何使用它的清晰想法或Java代码片段示例。我的映射器工作得很好，在随机播放之后，键和相应的值按预期获得。谢谢！

我想要做的是将输入文件中的几条记录输出到新文件中。因此，新的输出文件应该只包含那些需要的记录，而忽略其他不相关的记录。即使我不使用 MultipleTextOutputFormat，这也可以正常工作。我在mapper中实现的逻辑如下：

```
 public static class MapClass extends
            Mapper { `StringBuilder emitValue = null;
    StringBuilder emitKey = null;
    Text kword = new Text();
    Text vword = new Text();

    public void map(LongWritable key, Text value, Context context)
            throws IOException, InterruptedException {
        String[] parts;

        String line = value.toString();
        parts = line.split(" ");

            kword.set(parts[4].toString());
            vword.set(line.toString());
            context.write(kword, vword);
        }
    }` 

reduce的输入是这样的：

[key1]--> [value1, value2, ...] 

[key2]--> [value1, value2, ...] 

[key3]--> [value1, value2, ... .] 等等

我的兴趣是 [key2]--> [value1, value2, ...] 忽略其他键和相应的值。请帮我用减速机。

            回答 #1

赞同：1

时间：2013-03-11T18:42:08.943

Using`MultipleOutputs`允许您在多个文件中发出记录，但仅在一组预定义数量/类型的文件中而不是任意数量的文件中，而不是根据键/值即时决定文件名。

您可以通过扩展来创建自己的 OutputFormat `org.apache.hadoop.mapred.lib.MultipleTextOutputFormat`。您的 OutputFormat 类应能够根据 reducer 发出的键/值来决定输出文件名和文件夹。这可以通过以下方式实现：

```
 package oddjob.hadoop;

 import org.apache.hadoop.fs.Path;
 import org.apache.hadoop.io.Text;
 import org.apache.hadoop.mapred.lib.MultipleTextOutputFormat;

 public class MultipleTextOutputFormatByKey extends MultipleTextOutputFormat<Text, Text> {

        /**
        * Use they key as part of the path for the final output file.
        */
       @Override
       protected String generateFileNameForKeyValue(Text key, Text value, String leaf) {
             return new Path(key.toString(), leaf).toString();
       }

       /**
        * When actually writing the data, discard the key since it is already in
        * the file path.
        */
       @Override
       protected Text generateActualKey(Text key, Text value) {
             return null;
          }
 } 
```

欲了解更多信息，请阅读[此处](http://www.infoq.com/articles/HadoopOutputFormat)。

**PS：**您需要使用旧的`mapred`API 来实现。与较新的 API 一样，尚不支持`MultipleTextOutput`！参考[这个](https://stackoverflow.com/questions/15100621/multipletextoutputformat-alternative-in-new-api)。

```

# c# - 如何在 C# 中获取 TPL 任务线程的引用？

> ID：15340640
> 
> 赞同：5
> 
> 时间：2013-03-11T14:06:39.197
> 
> 标签：c#, .net, multithreading, concurrency, task-parallel-library

当我创建一个任务时

```
Task task = Task.Factory.StartNew(() => someMethod(args)); 
```

在 C# 4.0+ 中，如何获取此任务的线程的引用？

任务是否有可能在创建任务的同一线程中执行或产生多个线程？

更新：
原因是：

*   我想在调试器中识别任务的线程（并为其命名）等。

创建的任务是否总是在与创建任务的线程不同的线程中执行？
它是一个、零个还是多个线程？
它是在同一个内核上执行的吗？
重要的是要知道，例如，我可以让主线程进入睡眠状态，以为我正在冻结后台工作人员

更新：
有用的答案：

*   [使用 Task.StartNew 时指定线程的名称](https://stackoverflow.com/a/8038572/2031316)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T14:36:35.250

> 创建的任务是否总是在与创建任务的线程不同的线程中执行？

不，在某些情况下，TPL 能够确定任务可以在创建它的同一线程上执行，要么是因为提供了相关的任务创建选项（或任务调度程序），要么是作为优化，因为调用否则线程将无事可做。不过，您实际上并不需要担心这一点；这不像您最终会阻塞 UI 线程，因为 TPL 选择在该上下文中执行它的代码。除非您明确指出应该这样做，否则这种情况不会发生。出于所有意图和目的，您可以假设这永远不会发生（除非您强迫它发生），但在幕后，您无需意识到它，是的，它可能发生。

> 它是一个、零个还是多个线程？

默认情况下，任务在线程池中执行。线程池包含的线程数会根据给定的工作负载而有所不同。它会从一个开始，但如果有足够的需求就会增长，如果需求消失就会缩小。如果您指定该`LongRunning`选项，则会为此创建一个新线程`Task`。如果你指定一个 custom `TaskScheduler`，你可以让它做任何你想做的事情。

> 它是在同一个内核上执行的吗？

有可能，但不一定。

> 重要的是要知道，例如，我可以让主线程进入睡眠状态，以为我正在冻结后台工作程序

将主线程置于睡眠状态*不会*阻止后台工作人员工作。这就是创建后台工作人员的全部*意义*所在，这两个任务不会互相阻止对方的工作。请注意，如果后台工作人员曾经尝试访问 UI 以报告进度或显示结果，并且 UI 被阻止，那么他们将等待 UI 线程此时空闲。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T14:12:11.683

您可以使用：

```
System.Threading.Thread.CurrentThread 
```

但是正如评论中所说，您使用 TPL 来抽象线程，因此回到这个“低级别”可能是设计不佳的一个指标。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-11T14:40:08.137

Task.Factory.StartNew() 将任务排队等待执行（参见[此处](http://msdn.microsoft.com/en-us/library/dd321439.aspx)）。执行任务的实际线程以及何时执行取决于指定的 TaskScheduler（如果未指定则使用当前的 TaskScheduler）。

在 .Net 4 中，默认的 TaskScheduler 使用 ThreadPool 来执行任务（请参见[此处](http://msdn.microsoft.com/en-us/library/dd997402.aspx)），因此如果 ThreadPool 线程将任务排队，则同一线程可能稍后会执行它。

线程数由 ThreadPool 决定。

您不应该真正关心您的任务在哪个核心上执行。

排队执行任务很可能会将其安排在 ThreadPool 线程上执行，因此您不会有意外使主线程进入睡眠状态的风险

# python - 参数类型在正常和反射运算符重载中有所不同（__sub__ / __rsub__）

> ID：15340650
> 
> 赞同：3
> 
> 时间：2013-03-11T14:07:24.970
> 
> 标签：python, numpy, operator-overloading

将 numpy 数组通过右手运算符传递后，如何访问它的属性`__rsub__`？

我在 python 中编写了一个非常简单的类，它定义了两个函数：

```
class test(object):
    def __sub__(self,  other):
        return other

    def __rsub__(self,  other):
        return other 
```

基本上他们也应该这样做。左手运算符`__sub__`按预期工作，但似乎 numpy 数组在右手运算符上被剥离了它的属性

```
from skimage import data
from skimage.color import rgb2gray
lena = data.lena()

grayLena = rgb2gray(lena)
t = test()

## overloaded - operator
left_hand = t - grayLena
print left_hand
# Output: 
#array([[ 0.60802863,  0.60802863,  0.60779059, ...,  0.64137412,
#    0.57998235,  0.46985725],
#  [ 0.60802863,  0.60802863,  0.60779059, ...,  0.64137412,
#    0.57998235,  0.46985725],
#  [ 0.60802863,  0.60802863,  0.60779059, ...,  0.64137412,
#    0.57998235,  0.46985725],
#  ..., 
#  [ 0.13746353,  0.13746353,  0.16881412, ...,  0.37271804,
#    0.35559529,  0.34377725],
#  [ 0.14617059,  0.14617059,  0.18730588, ...,  0.36788784,
#    0.37292549,  0.38467529],
#  [ 0.14617059,  0.14617059,  0.18730588, ...,  0.36788784,
#    0.37292549,  0.38467529]])

right_hand = grayLena - t
print right_hand
# Output:
# array([[0.6080286274509803, 0.6080286274509803, 0.6077905882352941, ...,
#   0.6413741176470589, 0.5799823529411765, 0.4698572549019608],
#  [0.6080286274509803, 0.6080286274509803, 0.6077905882352941, ...,
#   0.6413741176470589, 0.5799823529411765, 0.4698572549019608],
#  [0.6080286274509803, 0.6080286274509803, 0.6077905882352941, ...,
#   0.6413741176470589, 0.5799823529411765, 0.4698572549019608],
#  ..., 
#  [0.1374635294117647, 0.1374635294117647, 0.1688141176470588, ...,
#   0.3727180392156863, 0.35559529411764706, 0.34377725490196076],
#  [0.1461705882352941, 0.1461705882352941, 0.18730588235294118, ...,
#   0.3678878431372549, 0.37292549019607846, 0.3846752941176471],
#  [0.1461705882352941, 0.1461705882352941, 0.18730588235294118, ...,
#   0.3678878431372549, 0.37292549019607846, 0.3846752941176471]], dtype=object) 
```

所以这两个操作的区别在于`__rsub__`接收一个 dtype=object 的数组。如果我只是设置这个数组的 dtype，一切都会正常工作。

但是，它仅适用于 . 之外的返回值`__rsub__`。在我里面我`__rsub__`只有垃圾，我无法转换回来，即如果我这样做

```
npArray = np.array(other,  dtype=type(other)) 
```

我得到一个类型的一维数组（在我的例子中是浮点数）。但是由于某种原因，形状信息丢失了。有没有人这样做或知道如何访问数组的原始属性（形状和类型）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:56:45.533

我不确定`ndarray`'s 机器内部的确切控制流程是什么，但是在您的情况下发生的事情或多或少是清楚的：

`ndarray`委托给对象`__rsub__`方法的不是整体减法操作，而是从数组中的每个项目中减去对象。显然，当它必须将操作委托给对象的方法时，`object`无论返回什么，都将返回类型设置为。您可以通过对代码稍作修改来检查它：

```
class test(object):
    def __sub__(self,  other):
        return other

    def __rsub__(self,  other):
        return other if other != 1 else 666

In [11]: t = test()

In [12]: t - np.arange(4)
Out[12]: array([0, 1, 2, 3])

In [13]: np.arange(4) - t
Out[13]: array([0, 666, 2, 3], dtype=object) 
```

我认为没有一种简单的方法可以覆盖这种行为。您可以尝试使用高和滥用方法[创建`test`一个子类`ndarray`](http://docs.scipy.org/doc/numpy/user/basics.subclassing.html#array-wrap-for-ufuncs)：`__array_priority__``__array_wrap__`

```
class test(np.ndarray):
    __array_priority__ = 100

    def __new__(cls):
        obj = np.int32([1]).view(cls)
        return obj

    def __array_wrap__(self, arr, context) :
        if context is not None :
            ufunc = context[0]
            args = context[1]
            if ufunc == np.subtract :
                if self is args[0] :
                    return args[1]
                elif self is args[1] :
                    return args[0]
        return arr 
```

现在：

```
>>> t = test()
>>> np.arange(4) - t
array([0, 1, 2, 3])
>>> t - np.arange(4)
array([0, 1, 2, 3]) 
```

但：

```
>>> np.arange(4) + t
test([1, 2, 3, 4])
>>> t + np.arange(4)
test([1, 2, 3, 4]) 
```

这有点浪费，因为我们正在执行将`1`内部添加`t`到数组中的每个值的操作，然后默默地丢弃它，但我想不出任何方法来覆盖它。

# r - 在 R 中使用线框图

> ID：15340658
> 
> 赞同：2
> 
> 时间：2013-03-11T14:07:47.190
> 
> 标签：r

我正在尝试使用 R 中的线框函数绘制一个曲面，显示一个变量如何响应其他两个变量的变化而变化。也就是说，我在 3x355 矩阵中从 optim 函数输出，三列标题为“r”、“k”和“sigma”。我想制作一个线框图，显示 sigma 如何随 r 和 k 变化。但是我在使用线框命令时遇到了麻烦，因为它一直在生成一个空盒子，里面什么都没有。

我尝试使用的代码如下所示：（对于“日志”矩阵）

```
logsgrid<-expand.grid(logs[,"sigma"]=logs[,"sigma],logs[,"r"],logs[,"k"])

wireframe(logs["sigma"]~logs["r"]*logs["k"],data=logsgrid) 
```

任何帮助将不胜感激！！！

我的数据看起来像：

```
> logs
                 r         k       sigma
  [1,]   0.3911590 254.49893   0.5159761
  [2,]   0.3911162 254.50250   0.5159893
  [3,]   0.3910748 254.54044   0.5159333
  [4,]   0.3910345 254.55662   0.5159562
  [5,]   0.3911328 254.48039   0.5160731
  [6,]   0.3910237 254.53855   0.5162077
  [7,]   0.3912773 254.50953   0.5161592
  [8,]   0.3909318 254.64676   0.5164667
  [9,]   0.3865343 258.65899   0.5215749
 [10,]   0.3902477 255.63565   0.5141283
 [11,]   1.8565417  12.88117   4.0498523
 [12,]  -0.2392318  16.68176   4.6337449
 [13,]  -0.4814815  15.55185  20.8000000
 [14,]  -2.2814815  18.25185  22.4000000
 [15,]  -2.4444444  19.55556  24.0000000
 [16,]  -2.6074074  20.85926  25.6000000
 [17,]  -2.7703704  22.16296  27.2000000
 [18,]  -2.9333333  23.46667  28.8000000
 [19,]  -3.0962963  24.77037  30.4000000
 [20,]  -3.2592593  26.07407  32.0000000
 [21,]  -3.4222222  27.37778  33.6000000
 [22,]  -3.5851852  28.68148  35.2000000
 [23,]  -3.7481481  29.98519  36.8000000
 [24,]  -3.9111111  31.28889  38.4000000
 [25,]  -4.0740741  32.59259  40.0000000
 [26,]  -4.2370370  33.89630  41.6000000
 [27,]   2.4000000  32.10000  44.1000000
 [28,]   2.4888889  33.28889  45.7333333
 [29,]   2.5777778  34.47778  47.3666667
 [30,]   2.6666667  35.66667  49.0000000
 [31,]   2.7555556  36.85556  50.6333333
 [32,]   2.8444444  38.04444  52.2666667
 [33,]   2.9333333  39.23333  53.9000000
 [34,]   3.0222222  40.42222  55.5333333
 [35,]   3.1111111  41.61111  57.1666667
 [36,]   3.2000000  42.80000  58.8000000
 [37,]   3.2888889  43.98889  60.4333333
 [38,]   3.3777778  45.17778  62.0666667
 [39,]   3.4666667  46.36667  63.7000000
 [40,]   3.5555556  47.55556  65.3333333
 [41,]   3.6444444  48.74444  66.9666667
 [42,] -11.2000000  51.80000  79.8000000
 [43,] -11.4666667  53.03333  81.7000000
 [44,] -11.7333333  54.26667  83.6000000
 [45,] -12.0000000  55.50000  85.5000000
 [46,]  15.3333333  52.13333  62.8666667
 [47,]  15.6666667  53.26667  64.2333333
 [48,]  16.0000000  54.40000  65.6000000
 [49,]  16.3333333  55.53333  66.9666667
 [50,]  16.6666667  56.66667  68.3333333
 [51,]  17.0000000  57.80000  69.7000000
 [52,]  17.3333333  58.93333  71.0666667
 [53,]  17.6666667  60.06667  72.4333333
 [54,]  18.0000000  61.20000  73.8000000
 [55,]  18.3333333  62.33333  75.1666667
 [56,]  18.6666667  63.46667  76.5333333
 [57,]  19.0000000  64.60000  77.9000000
 [58,]  19.3333333  65.73333  79.2666667
 [59,]  19.6666667  66.86667  80.6333333
 [60,]  20.0000000  68.00000  82.0000000
 [61,]  20.3333333  69.13333  83.3666667
 [62,]  20.6666667  70.26667  84.7333333
 [63,]  21.0000000  71.40000  86.1000000
 [64,]  21.3333333  72.53333  87.4666667
 [65,]  21.6666667  73.66667  88.8333333
 [66,]  22.0000000  74.80000  90.2000000
 [67,]  22.3333333  75.93333  91.5666667
 [68,]  22.6666667  77.06667  92.9333333
 [69,]  23.0000000  78.20000  94.3000000
 [70,]  23.3333333  79.33333  95.6666667
 [71,]  23.6666667  80.46667  97.0333333
 [72,]  24.0000000  81.60000  98.4000000
 [73,]  24.3333333  82.73333  99.7666667
 [74,]  24.6666667  83.86667 101.1333333
 [75,]  25.0000000  85.00000 102.5000000
 [76,]  25.3333333  86.13333 103.8666667
 [77,]  25.6666667  87.26667 105.2333333
 [78,]  26.0000000  88.40000 106.6000000
 [79,]  26.3333333  89.53333 107.9666667
 [80,]  26.6666667  90.66667 109.3333333
 [81,]  27.0000000  91.80000 110.7000000
 [82,]  27.3333333  92.93333 112.0666667
 [83,]  27.6666667  94.06667 113.4333333
 [84,]  28.0000000  95.20000 114.8000000
 [85,]  28.3333333  96.33333 116.1666667
 [86,]  28.6666667  97.46667 117.5333333
 [87,]  29.0000000  98.60000 118.9000000
 [88,]  29.3333333  99.73333 120.2666667
 [89,]  29.6666667 100.86667 121.6333333
 [90,]  30.0000000 102.00000 123.0000000
 [91,]  30.3333333 103.13333 124.3666667
 [92,]  30.6666667 104.26667 125.7333333
 [93,]  31.0000000 105.40000 127.1000000
 [94,]  31.3333333 106.53333 128.4666667
 [95,]  31.6666667 107.66667 129.8333333
 [96,]  32.0000000 108.80000 131.2000000
 [97,]  32.3333333 109.93333 132.5666667
 [98,]  32.6666667 111.06667 133.9333333
 [99,]  33.0000000 112.20000 135.3000000
[100,]  33.3333333 113.33333 136.6666667
[101,]  33.6666667 114.46667 138.0333333
[102,]  34.0000000 115.60000 139.4000000
[103,]  34.3333333 116.73333 140.7666667
[104,]  34.6666667 117.86667 142.1333333
[105,]  35.0000000 119.00000 143.5000000
[106,]  35.3333333 120.13333 144.8666667
[107,]  35.6666667 121.26667 146.2333333
[108,]  36.0000000 122.40000 147.6000000
[109,]  36.3333333 123.53333 148.9666667
[110,]  36.6666667 124.66667 150.3333333
[111,]  37.0000000 125.80000 151.7000000
[112,]  37.3333333 126.93333 153.0666667
[113,]  37.6666667 128.06667 154.4333333
[114,]  38.0000000 129.20000 155.8000000
[115,]  38.3333333 130.33333 157.1666667
[116,]  38.6666667 131.46667 158.5333333
[117,]  39.0000000 132.60000 159.9000000
[118,]  39.3333333 133.73333 161.2666667
[119,]  39.6666667 134.86667 162.6333333
[120,]  40.0000000 136.00000 164.0000000
[121,]  40.3333333 137.13333 165.3666667
[122,]  40.6666667 138.26667 166.7333333
[123,]  41.0000000 139.40000 168.1000000
[124,]  41.3333333 140.53333 169.4666667
[125,]  41.6666667 141.66667 170.8333333
[126,]  42.0000000 142.80000 172.2000000
[127,]  42.3333333 143.93333 173.5666667
[128,]  42.6666667 145.06667 174.9333333
[129,]  43.0000000 146.20000 176.3000000
[130,]  43.3333333 147.33333 177.6666667
[131,]  43.6666667 148.46667 179.0333333
[132,]  44.0000000 149.60000 180.4000000
[133,]  44.3333333 150.73333 181.7666667
[134,]  44.6666667 151.86667 183.1333333
[135,]  45.0000000 153.00000 184.5000000
[136,]  45.3333333 154.13333 185.8666667
[137,]  45.6666667 155.26667 187.2333333
[138,]  46.0000000 156.40000 188.6000000
[139,]  46.3333333 157.53333 189.9666667
[140,]  46.6666667 158.66667 191.3333333
[141,]  47.0000000 159.80000 192.7000000
[142,]  47.3333333 160.93333 194.0666667
[143,]  47.6666667 162.06667 195.4333333
[144,]  48.0000000 163.20000 196.8000000
[145,]  48.3333333 164.33333 198.1666667
[146,]  48.6666667 165.46667 199.5333333
[147,]  49.0000000 166.60000 200.9000000
[148,]  49.3333333 167.73333 202.2666667
[149,]  49.6666667 168.86667 203.6333333
[150,]  50.0000000 170.00000 205.0000000
[151,]  50.3333333 171.13333 206.3666667
[152,]  50.6666667 172.26667 207.7333333
[153,]  51.0000000 173.40000 209.1000000
[154,]  51.3333333 174.53333 210.4666667
[155,]  51.6666667 175.66667 211.8333333
[156,]  52.0000000 176.80000 213.2000000
[157,]  52.3333333 177.93333 214.5666667
[158,]  52.6666667 179.06667 215.9333333
[159,]  53.0000000 180.20000 217.3000000
[160,]  53.3333333 181.33333 218.6666667
[161,]  53.6666667 182.46667 220.0333333
[162,]  54.0000000 183.60000 221.4000000
[163,]  54.3333333 184.73333 222.7666667
[164,]  54.6666667 185.86667 224.1333333
[165,]  55.0000000 187.00000 225.5000000
[166,]  55.3333333 188.13333 226.8666667
[167,]  55.6666667 189.26667 228.2333333
[168,]  56.0000000 190.40000 229.6000000
[169,]  56.3333333 191.53333 230.9666667
[170,]  56.6666667 192.66667 232.3333333
[171,]  57.0000000 193.80000 233.7000000
[172,]  57.3333333 194.93333 235.0666667
[173,]  57.6666667 196.06667 236.4333333
[174,]  58.0000000 197.20000 237.8000000
[175,]  58.3333333 198.33333 239.1666667
[176,]  58.6666667 199.46667 240.5333333
[177,]  59.0000000 200.60000 241.9000000
[178,]  59.3333333 201.73333 243.2666667
[179,]  59.6666667 202.86667 244.6333333
[180,]  60.0000000 204.00000 246.0000000
[181,]  60.3333333 205.13333 247.3666667
[182,]  60.6666667 206.26667 248.7333333
[183,]  61.0000000 207.40000 250.1000000
[184,]  61.3333333 208.53333 251.4666667
[185,]  61.6666667 209.66667 252.8333333
[186,]  62.0000000 210.80000 254.2000000
[187,]  62.3333333 211.93333 255.5666667
[188,]  62.6666667 213.06667 256.9333333
[189,]  63.0000000 214.20000 258.3000000
[190,]  63.3333333 215.33333 259.6666667
[191,]  63.6666667 216.46667 261.0333333
[192,]  64.0000000 217.60000 262.4000000
[193,]  64.3333333 218.73333 263.7666667
[194,]  64.6666667 219.86667 265.1333333
[195,]  65.0000000 221.00000 266.5000000
[196,]  65.3333333 222.13333 267.8666667
[197,]  65.6666667 223.26667 269.2333333
[198,]  66.0000000 224.40000 270.6000000
[199,]  66.3333333 225.53333 271.9666667
[200,]  66.6666667 226.66667 273.3333333
[201,]  67.0000000 227.80000 274.7000000
[202,]  67.3333333 228.93333 276.0666667
[203,]  67.6666667 230.06667 277.4333333
[204,]  68.0000000 231.20000 278.8000000
[205,]  68.3333333 232.33333 280.1666667
[206,]  68.6666667 233.46667 281.5333333
[207,]  69.0000000 234.60000 282.9000000
[208,]  69.3333333 235.73333 284.2666667
[209,]  69.6666667 236.86667 285.6333333
[210,]  70.0000000 238.00000 287.0000000
[211,]  70.3333333 239.13333 288.3666667
[212,]  70.6666667 240.26667 289.7333333
[213,]  71.0000000 241.40000 291.1000000
[214,]  71.3333333 242.53333 292.4666667
[215,]  71.6666667 243.66667 293.8333333
[216,]  72.0000000 244.80000 295.2000000
[217,]  72.3333333 245.93333 296.5666667
[218,]  72.6666667 247.06667 297.9333333
[219,]  73.0000000 248.20000 299.3000000
[220,]  73.3333333 249.33333 300.6666667
[221,]  73.6666667 250.46667 302.0333333
[222,]  74.0000000 251.60000 303.4000000
[223,]  74.3333333 252.73333 304.7666667
[224,]  74.6666667 253.86667 306.1333333
[225,]  75.0000000 255.00000 307.5000000
[226,]  75.3333333 256.13333 308.8666667
[227,]  75.6666667 257.26667 310.2333333
[228,]  76.0000000 258.40000 311.6000000
[229,]  76.3333333 259.53333 312.9666667
[230,]  76.6666667 260.66667 314.3333333
[231,]  77.0000000 261.80000 315.7000000
[232,]  77.3333333 262.93333 317.0666667
[233,]  77.6666667 264.06667 318.4333333
[234,]  78.0000000 265.20000 319.8000000
[235,]  78.3333333 266.33333 321.1666667
[236,]  78.6666667 267.46667 322.5333333
[237,]  79.0000000 268.60000 323.9000000
[238,]  79.3333333 269.73333 325.2666667
[239,]  79.6666667 270.86667 326.6333333
[240,]  80.0000000 272.00000 328.0000000
[241,]  80.3333333 273.13333 329.3666667
[242,]  80.6666667 274.26667 330.7333333
[243,]  81.0000000 275.40000 332.1000000
[244,]  81.3333333 276.53333 333.4666667
[245,]  81.6666667 277.66667 334.8333333
[246,]  82.0000000 278.80000 336.2000000
[247,]  82.3333333 279.93333 337.5666667
[248,]  82.6666667 281.06667 338.9333333
[249,]  83.0000000 282.20000 340.3000000
[250,]  83.3333333 283.33333 341.6666667
[251,]  83.6666667 284.46667 343.0333333
[252,]  84.0000000 285.60000 344.4000000
[253,]  84.3333333 286.73333 345.7666667
[254,]  84.6666667 287.86667 347.1333333
[255,]  85.0000000 289.00000 348.5000000
[256,]  85.3333333 290.13333 349.8666667
[257,]  85.6666667 291.26667 351.2333333
[258,]  86.0000000 292.40000 352.6000000
[259,]  86.3333333 293.53333 353.9666667
[260,]  86.6666667 294.66667 355.3333333
[261,]  87.0000000 295.80000 356.7000000
[262,]  87.3333333 296.93333 358.0666667
[263,]  87.6666667 298.06667 359.4333333
[264,]  88.0000000 299.20000 360.8000000
[265,]  88.3333333 300.33333 362.1666667
[266,]  88.6666667 301.46667 363.5333333
[267,]  89.0000000 302.60000 364.9000000
[268,]  89.3333333 303.73333 366.2666667
[269,]  89.6666667 304.86667 367.6333333
[270,]  90.0000000 306.00000 369.0000000
[271,]  90.3333333 307.13333 370.3666667
[272,]  90.6666667 308.26667 371.7333333
[273,]  91.0000000 309.40000 373.1000000
[274,]  91.3333333 310.53333 374.4666667
[275,]  91.6666667 311.66667 375.8333333
[276,]  92.0000000 312.80000 377.2000000
[277,]  92.3333333 313.93333 378.5666667
[278,]  92.6666667 315.06667 379.9333333
[279,]  93.0000000 316.20000 381.3000000
[280,]  93.3333333 317.33333 382.6666667
[281,]  93.6666667 318.46667 384.0333333
[282,]  94.0000000 319.60000 385.4000000
[283,]  94.3333333 320.73333 386.7666667
[284,]  94.6666667 321.86667 388.1333333
[285,]  95.0000000 323.00000 389.5000000
[286,]  95.3333333 324.13333 390.8666667
[287,]  95.6666667 325.26667 392.2333333
[288,]  96.0000000 326.40000 393.6000000
[289,]  96.3333333 327.53333 394.9666667
[290,]  96.6666667 328.66667 396.3333333
[291,]  97.0000000 329.80000 397.7000000
[292,]  97.3333333 330.93333 399.0666667
[293,]  97.6666667 332.06667 400.4333333
[294,]  98.0000000 333.20000 401.8000000
[295,]  98.3333333 334.33333 403.1666667
[296,]  98.6666667 335.46667 404.5333333
[297,]  99.0000000 336.60000 405.9000000
[298,]  99.3333333 337.73333 407.2666667
[299,]  99.6666667 338.86667 408.6333333
[300,] 100.0000000 340.00000 410.0000000
[301,] 100.3333333 341.13333 411.3666667
[302,] 100.6666667 342.26667 412.7333333
[303,] 101.0000000 343.40000 414.1000000
[304,] 101.3333333 344.53333 415.4666667
[305,] 101.6666667 345.66667 416.8333333
[306,] 102.0000000 346.80000 418.2000000
[307,] 102.3333333 347.93333 419.5666667
[308,] 102.6666667 349.06667 420.9333333
[309,] 103.0000000 350.20000 422.3000000
[310,] 103.3333333 351.33333 423.6666667
[311,] 103.6666667 352.46667 425.0333333
[312,] 104.0000000 353.60000 426.4000000
[313,] 104.3333333 354.73333 427.7666667
[314,] 104.6666667 355.86667 429.1333333
[315,] 105.0000000 357.00000 430.5000000
[316,] 105.3333333 358.13333 431.8666667
[317,] 105.6666667 359.26667 433.2333333
[318,] 106.0000000 360.40000 434.6000000
[319,] 106.3333333 361.53333 435.9666667
[320,] 106.6666667 362.66667 437.3333333
[321,] 107.0000000 363.80000 438.7000000
[322,] 107.3333333 364.93333 440.0666667
[323,] 107.6666667 366.06667 441.4333333
[324,] 108.0000000 367.20000 442.8000000
[325,] 108.3333333 368.33333 444.1666667
[326,] 358.6000000 326.00000 326.0000000
[327,] 359.7000000 327.00000 327.0000000
[328,] 360.8000000 328.00000 328.0000000
[329,] 361.9000000 329.00000 329.0000000
[330,] 363.0000000 330.00000 330.0000000
[331,] 364.1000000 331.00000 331.0000000
[332,] 365.2000000 332.00000 332.0000000
[333,] 366.3000000 333.00000 333.0000000
[334,] 367.4000000 334.00000 334.0000000
[335,] 368.5000000 335.00000 335.0000000
[336,] 369.6000000 336.00000 336.0000000
[337,] 370.7000000 337.00000 337.0000000
[338,] 371.8000000 338.00000 338.0000000
[339,] 372.9000000 339.00000 339.0000000
[340,] 374.0000000 340.00000 340.0000000
[341,] 375.1000000 341.00000 341.0000000
[342,] 376.2000000 342.00000 342.0000000
[343,] 377.3000000 343.00000 343.0000000
[344,] 378.4000000 344.00000 344.0000000
[345,] 379.5000000 345.00000 345.0000000
[346,] 380.6000000 346.00000 346.0000000
[347,] 381.7000000 347.00000 347.0000000
[348,] 382.8000000 348.00000 348.0000000
[349,] 383.9000000 349.00000 349.0000000
[350,] 385.0000000 350.00000 350.0000000
[351,] 386.1000000 351.00000 351.0000000
[352,] 387.2000000 352.00000 352.0000000
[353,] 388.3000000 353.00000 353.0000000
[354,] 389.4000000 354.00000 354.0000000
[355,] 390.5000000 355.00000 355.0000000
[356,] 391.6000000 356.00000 356.0000000
[357,] 392.7000000 357.00000 357.0000000 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T22:54:21.947

我不知道结果是否有意义（这取决于你），但这里有一个使用`akima::interp`and的解决方案`lattice::wireframe`：

```
dat <- read.table("wftmp.dat",header=TRUE)
require("akima")
s <- with(dat,interp(r,k,sigma))
library("lattice")
with(s,wireframe(z,row.values=x,col.values=y)) 
```

![在此处输入图像描述](../Images/3a79c49de76ff576f226522ba0db140f.png)

但是，查看原始数据`rgl` 并添加插值曲面（您也可以查看原始数据`scatterplot3d`）表明插值没有多大意义：

```
library("rgl")
with(dat,plot3d(r,k,sigma,col="red"))
surface3d(s$x,s$y,s$z,col="gray") 
```

![在此处输入图像描述](../Images/0bbc0113302fdd1fce7a61712c84dd75.png)

也就是说，您的数据位于 (x,y,z) 空间中的几行，因此插值有点傻。

您可能也可以`pairs`通过基于 R 的图来解决这个问题......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:10:49.180

您不能使用绘图来绘制此类数据，`wireframe`因为`r`并且`k`不会形成网格。

你能做的是

```
library(rgl)
plot3d(logs[,"r"], logs[,"k"], logs[,"sigma"], type="s") 
```

# android - AndroidDrawable - 如何设置默认的开始/停止帧？

> ID：15340659
> 
> 赞同：0
> 
> 时间：2013-03-11T14:07:47.583
> 
> 标签：android, android-animation, android-drawable

我正在尝试将[AndroidDrawable](http://developer.android.com/reference/android/graphics/drawable/AnimationDrawable.html)用于循环中的动画（即连续播放图像）。但是困扰我的问题是我找不到一种*优雅*的方式来为动画设置默认的开始/停止图像。

示例：假设我有五个图像，即：“A”、“B”、“C”、“D”和“E”。

```
 <animation-list android:id="@+id/selected" android:oneshot="false">
    <item android:drawable="@drawable/A" android:duration="200" />
    <item android:drawable="@drawable/B" android:duration="200" />
    <item android:drawable="@drawable/C" android:duration="200" />
    <item android:drawable="@drawable/D" android:duration="200" />
    <item android:drawable="@drawable/E" android:duration="200" />
 </animation-list> 
```

当我开始动画时，它显然以图像“A”开始，并在与动画停止时对应的图像处结束（即，每当`Stop()`执行该方法时）

因此，我的问题是：“如何设置默认的开始/停止帧？”。

现在，我使用以下解决方案，它有效但不太*优雅*。我确信有更好的解决方案:)

我的解决方案：

*   为了以图像“C”开始动画，我将项目移动到动画列表的顶部。
*   要以图像“C”结束动画，我调用方法`Stop()`方法（这会在随机图像处停止动画）。然后我调用`Start()`启动动画的方法并显示第一个图像“C”。我立即调用方法`Stop()`，确保动画在图像“C”处停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:19:14.187

我不认为有一个*优雅*的方法可以做到这一点，只需在动画停止时将背景设置为@drawable/C

# html - 用大小均匀的按钮填充两个大小均匀的列

> ID：15340660
> 
> 赞同：0
> 
> 时间：2013-03-11T14:07:49.187
> 
> 标签：html, css

我正在设计一个菜单。此菜单应包含按两列排列的按钮。每个按钮的宽度应为可用屏幕宽度的 50%。

我已经设法使每个按钮的大小相同。但我希望每个按钮都是屏幕宽度的 50%，无论按钮包含多少字符。此外，我需要使用相对尺寸，因为我必须支持不同的屏幕分辨率。

这是我到目前为止得到的：http: [//jsfiddle.net/PJ9cJ/](http://jsfiddle.net/PJ9cJ/)

```
<div class="actions" id="actions">
        <div id="steuerung">
            <table class="actions_table" border="0" >
                <tr >
                    <td>
                            <a href="javascript:displaySomething();" class="action_button" >Button 1</a>
                    </td>
                    <td >
                            <a href="javascript:displaySomething();" class="action_button" >Button 2</a>
                    </td>
                </tr>
                <tr >
                    <td >
                            <a href="javascript:displaySomething();" class="action_button"  >Button 3</a>
                    </td>
                    <td >
                            <a href="javascript:displaySomething();" class="action_button" >Button 4</a>
                    </td>
                </tr>
            </table>
        </div>
    </div> 
```

在这里你可以看到我的问题： ![在此处输入图像描述](../Images/820c2d40529db2e9d2e2b1f3dcf9c308.png) 感谢任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:56:25.840

我将表格设为其所在元素的 100% 宽度，并将其父 div（动作）向左浮动并设为 100%。然后我对 action_button 类的边距做了一些调整。

```
.actions_table{
    width:100%;
    border-spacing:0;
}
#actions{
    width:100%;
    float:left;
}

.action_button {
    -moz-box-shadow:inset 0px 0px 0px 0px #ffffff;
    -webkit-box-shadow:inset 0px 0px 0px 0px #ffffff;
    box-shadow:inset 0px 0px 0px 0px #ffffff;
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #ededed), color-stop(1, #dfdfdf) );
    background:-moz-linear-gradient( center top, #ededed 5%, #dfdfdf 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ededed',       endColorstr='#dfdfdf');
    background-color:#ededed;
    -moz-border-radius:6px;
    -webkit-border-radius:6px;
    border-radius:6px;
    border:1px solid #dcdcdc;
    display:inline-block;
    color:#777777;
    font-family:arial;
    font-size:50%;
    font-weight:bold;
    width: 100%;
    margin: 5%;
    margin-left:0;
    margin-right:0;
    padding:1em 0px;
    text-decoration:none;
    text-shadow:1px 1px 0px #ffffff;
} 
```

[http://jsfiddle.net/PJ9cJ/11/](http://jsfiddle.net/PJ9cJ/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:21:33.340

我不明白您遇到的实际问题是什么？但我想让你说，如果你将`<td>`元素对齐到与列相同的大小。最好是用于`<td>`元素，`display: inline-block;`在此之后定义你可以调整`display: block;`到其他元素。或者如果这不起作用，请给我一张你想要的图片（只有你的专栏图片）。

# javascript - 在 TypeScript 中为接口实现原型

> ID：15340662
> 
> 赞同：7
> 
> 时间：2013-03-11T14:07:50.920
> 
> 标签：javascript, interface, typescript

我`TypeScript`为我的服务结果创建了一个界面。现在我想为里面的两个函数定义一个基本功能。问题是我得到一个错误：

> “支持”类型的值不存在“服务结果”属性。

我`WebStorm`用于开发（`VS2012`让我紧张，因为大型项目冻结 - 等待更好的集成：P）。

这是我的做法：

```
module Support {
    export interface ServiceResult extends Object {
        Error?: ServiceError;
        Check?(): void;
        GetErrorMessage?(): string;
    }
}

Support.ServiceResult.prototype.Check = () => {
   // (...)
};

Support.ServiceResult.prototype.GetErrorMessage = () => {
   // (...)
}; 
```

我也尝试将我的原型移动到模块中，但同样的错误仍然......（当然我删除了`Support.`前缀）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T14:20:37.887

您不能对接口进行原型设计，因为编译后的 JavaScript 根本不会发出与接口相关的任何内容。该接口纯粹是为了编译时使用而存在的。看看这个：

这个打字稿：

```
interface IFoo {
    getName();
}

class Foo implements IFoo {
    getName() {
        alert('foo!');
    }
} 
```

编译为此 JavaScript：

```
var Foo = (function () {
    function Foo() { }
    Foo.prototype.getName = function () {
        alert('foo!');
    };
    return Foo;
})(); 
```

结果根本没有`IFoo`- 这就是您收到该错误的原因。通常你不会原型化一个接口，你会原型化一个实现你的接口的类。

您甚至不必自己编写原型，只需将接口实现为类就足够了，TypeScript 编译器会为您添加原型。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-11T14:18:42.937

看起来您正在尝试将实现添加到接口 - 这是不可能的。

您只能添加到一个真正的实现，例如一个类。您也可以决定只将实现添加到类定义中，而不是直接使用`prototype`.

```
module Support {
    export interface ServiceResult extends Object {
        Error?: ServiceError;
        Check?(): void;
        GetErrorMessage?(): string;
    }

    export class ImplementationHere implements ServiceResult {
        Check() {

        }

        GetErrorMessage() {
            return '';
        }
    }
}

Support.ImplementationHere.prototype.Check = () => {
   // (...)
};

Support.ImplementationHere.prototype.GetErrorMessage = () => {
   // (...)
}; 
```

# iphone - 错误：消息发送到解除分配的实例

> ID：15340664
> 
> 赞同：0
> 
> 时间：2013-03-11T14:07:59.597
> 
> 标签：iphone, ios, objective-c, xcode

我制作了一个弹出视图，`UIButton`上面有一个关闭视图。每当我按下按钮时，程序退出并显示以下消息：`[MTPopupWindow performSelector:withObject:withObject:]: message sent to deallocated instance 0x84675f0` 这是使用该类的[**头文件**](http://pastebin.com/Q86GpHan)和[**源文件**](http://pastebin.com/Nk6sVT2u)我使用这行代码：

```
[MTPopupWindow showWindowWithContent:@"Some text here" insideView:self.view]; 
```

我认为过早解除分配我的对象有问题，但由于我正在使用`ARC`，我不确定是什么导致了这个问题。我认为问题出在这行代码中：

```
[self.closeBtn addTarget:self action:@selector(closePopupWindow) forControlEvents:UIControlEventTouchUpInside]; 
```

但我不认为这有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:22:05.153

当你写这个时你应该知道有一个问题：

```
// Cast to void because we don't use the result (otherwise compiler warning) 
```

由于您不使用结果，ARC 认为可以自由地在该行之后的对象上插入释放，这意味着该对象很早就被释放了。

有很多方法可以解决这个问题；看看诸如`NS_RETURNS_RETAINED`或让您的弹出窗口的调用者对其有强烈引用之类的东西。

# html - 图像超链接在 WordPress 文本小部件标题中不起作用

> ID：15340665
> 
> 赞同：0
> 
> 时间：2013-03-11T14:08:04.740
> 
> 标签：html, css, wordpress

我在标题中的文本小部件中找到了社交图标。它适用于 IE，但不适用于 Chrome 或 Firefox？我想知道这是否与我正在使用的 Artisteer 4 主题有关，但我查看了所有 CSS 和代码，并没有看到有什么干扰。我的网站是[http://www.visualtechnologyconsulting.com](http://www.visualtechnologyconsulting.com)

文本小部件中的代码是：

```
<a href="http://www.facebook.com/visualtechnologyconsulting/">
<img class="alignnone size-full wp-image-372" alt="Visual Technology Consulting 
Facebook" src="http://www.visualtechnologyconsulting.com/wp-
content/uploads/2013/01/facebook-logo-webtreats.png" width="75" height="75" />
</a>
<a href="http://www.linkedin.com/company/visual-technology-consulting/">
<img src="http://www.visualtechnologyconsulting.com/
wp-content/uploads/2013/01/linkedin-logo-webtreats.png" 
alt="Visual Technology Consulting Linkedin" width="75" height="75" 
class="alignnone size-full wp-image-373" />
</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:13:51.317

我可以在 Chrome 中看到它们。一切看起来都很好。但也许你发布了 CSS 部分？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:14:56.730

Nate，它在 Chrome 和 Firefox 中为我工作。[看这里。](http://i.imgur.com/PPVZWdX.jpg)您是否刷新了浏览器缓存？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:25:21.853

我找到了！！这是一个 CSS 问题，我用标题 div 覆盖图标，需要将其减少到 40%！

感谢大家！

# c# - phone:webbrowser 无法打开 PDF 文件 (Windows Phone 8)

> ID：15340667
> 
> 赞同：1
> 
> 时间：2013-03-11T14:08:06.197
> 
> 标签：c#, windows-phone-8

我已经构建了一个带有网络浏览器的应用程序。它工作正常，但是当我尝试导航到像 bla 这样的地址时。**pdf**网络浏览器什么也没显示。如果地址链接到 pdf 文件，我通过自动打开 Internet Explorer 解决了这个问题。

有更好的解决方案吗？我想在我自己的应用程序中打开那个 PDF 文件，我不想每次都打开 Internet Explorer。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:40:17.513

如果您在独立存储中有本地下载的 PDF，您可以使用`LaunchFileAsync`.

```
 private async void LaunchFileButton_Click(object sender, RoutedEventArgs rea)
 {

    // Access isolated storage.
    StorageFolder local = Windows.Storage.ApplicationData.Current.LocalFolder;

    // Access the PDF.
    StorageFile pdfFile = await local.GetFileAsync("file1.pdf");

    // Launch the bug query file.
    Windows.System.Launcher.LaunchFileAsync(pdfFile);
} 
```

（改编自[MSDN，参见“启动文件”部分](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206987%28v=vs.105%29.aspx)）。

如果它是一个远程 URL，那么您可以使用`LaunchUriAsync`（它将首先使用 IE 下载文件）。

您需要在安装了 PDF 阅读器应用程序的设备上尝试此操作 - 它无法在模拟器上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T10:01:36.083

如果您不熟悉 Async，您应该阅读以下文章：MSDN Asynchronous Programming with Async and Await

我无法测试我的应用程序，因为我的 WP8 手机当前不可用并且我无法在模拟器上安装 PDF 阅读器。

调用以下方法开始下载

```
WebClient pdfDownloader = null;
string LastFileName = ""; //To save the filename of the last created pdf

private void StartPDFDownload(string URL)
{
    pdfDownloader = new WebClient(); //prevents that the OpenReadCompleted-Event is     called multiple times
    pdfDownloader.OpenReadCompleted += DownloadPDF; //Create an event handler
    pdfDownloader.OpenReadAsync(new Uri(URL)); //Start to read the website
}

async void DownloadPDF(object sender, OpenReadCompletedEventArgs e)
{
    byte[] buffer = new byte[e.Result.Length]; //Gets the byte length of the pdf file
    await e.Result.ReadAsync(buffer, 0, buffer.Length); //Waits until the rad is completed (Async doesn't block the GUI Thread)

    using (IsolatedStorageFile ISFile = IsolatedStorageFile.GetUserStoreForApplication())
    {
        try
        {
            LastFileName = "tempPDF" + DateTime.Now.Ticks + ".pdf";
            using (IsolatedStorageFileStream ISFileStream = ISFile.CreateFile(LastFileName))
            {
                await ISFileStream.WriteAsync(buffer, 0, buffer.Length);
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message + Environment.NewLine + ex.HResult,
            ex.Source, MessageBoxButton.OK);
        //Catch errors regarding the creation of file
        }
     }    
    OpenPDFFile();
}

private async void OpenPDFFile()
{
    StorageFolder ISFolder = Windows.Storage.ApplicationData.Current.LocalFolder;
    try
    {
        IStorageFile ISFile = await ISFolder.GetFileAsync(LastFileName);
        await Windows.System.Launcher.LaunchFileAsync(ISFile);
        //http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206987%28v=vs.105%29.aspx
    }
    catch (Exception ex)
    {
    //Catch unknown errors while getting the file
    //or opening the app to display it
    }
} 
```

要从 WebBrowser-Control 调用这些方法，您需要捕获导航事件。

```
YourWebBrowserControl.Navigating += YourWebBrowserControl_Navigating;

void YourWebBrowserControl_Navigating(object sender, NavigatingEventArgs e)
{
    if(e.Uri.AbsolutPath.EndsWith("pdf"))
    {
        StartPDFDownload(e.Uri.ToString());
    }
} 
```

不要忘记您将不得不删除某天创建的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-19T19:03:53.680

试试这个从 WebControl 打开 PDF：

```
void MyWebBrowserControl_Navigating(object sender, NavigatingEventArgs e)
{
    if (e.Uri.AbsolutPath.ToLower().EndsWith(".pdf"))
    {
        var success = Windows.System.Launcher.LaunchUriAsync(e.Uri);
    }
} 
```

# html - 图像被缓存，但没有显示？

> ID：15340669
> 
> 赞同：0
> 
> 时间：2013-03-11T14:08:20.953
> 
> 标签：html

我有一张图片：

```
<img id="img1" src="http://igyaan.in/wp-content/uploads/2013/03/Nvidia-580x362.jpg" /> 
```

来自 url 的图像被缓存，但图像未显示。

我使用 firebug 对其进行了分析，在那里我可以看到对图像的 GET 请求，并返回图像。此外，还有一个我从未请求过的 facebook pic 请求（萤火虫：错误请求）：

```
http://a1.sphotos.ak.fbcdn.net/hphotos-ak-snc7/424831_319096764809781_1948053300_n.jpg 
```

jsFiddle：http: [//jsfiddle.net/Qb6YX/5/](http://jsfiddle.net/Qb6YX/5/)

知道为什么会这样吗？我该如何解决这个问题？
**MoreInfo：**我正在开发一个 Rss 提要阅读器，它显示帖子的图像。我在这个特定的网站上遇到了麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:07:24.443

该图像很可能是受热链接保护的。这就是为什么当您尝试在页面上加载它时它会被重定向。在这种情况下，您应该使用服务器端代理来检索图像并从那里加载它。

[使用来自Images.weserv.nl](http://images.weserv.nl)的外部服务：

```
<img src="http://images.weserv.nl/?url=igyaan.in/wp-content/uploads/2013/03/Nvidia-580x362.jpg" /> 
```

见[jsFiddle](http://jsfiddle.net/esCEj/)

如果您为此目的在您的服务器上托管代理脚本会更好，这样您的 RSS 提要阅读器的依赖关系就会更少。

但是，有时我们应该尊重网站所有者对盗链保护的决定。一种解决方法是用默认图像替换无法加载的图像。

# android - 为什么自定义首选项具有更大的文本大小？

> ID：15340674
> 
> 赞同：3
> 
> 时间：2013-03-11T14:08:35.147
> 
> 标签：android, android-layout, android-preferences

我有一个自定义偏好来显示带有标题和摘要的图标。但我不知道为什么它的标题与正常首选项（内置）相比具有更大的文本大小。这是我的自定义首选项的源代码和布局 xml。如果您需要更多信息，请告诉我。谢谢你。

```
public class IconPreferenceScreen extends Preference {

    public Drawable mIcon;
    private ImageView mImageView;

    public IconPreferenceScreen(Context context, AttributeSet attrs) {
        this(context, attrs, android.R.attr.preferenceStyle);
    }

    public IconPreferenceScreen(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        setLayoutResource(R.layout.preference_icon);
        TypedArray a = context.obtainStyledAttributes(attrs,
                R.styleable.IconPreferenceScreen, defStyle, android.R.attr.preferenceStyle);
        mIcon = a.getDrawable(R.styleable.IconPreferenceScreen_iconPref);
        a.recycle();
    }

    public IconPreferenceScreen(Context context) {
        this(context, null);
        setLayoutResource(R.layout.preference_icon);
    }

    @Override
    public void onBindView(View view) {
        super.onBindView(view);
        mImageView = (ImageView) view.findViewById(R.id.icon);
        if (mImageView != null && mIcon != null) {
            mImageView.setImageDrawable(mIcon);
        }
    }

    public void setIcon(Drawable icon) {
        if (mImageView != null && icon != null) {
            mImageView.setImageDrawable(icon);
        }
    }

    @Override
    protected View onCreateView(ViewGroup parent) {
        View layout= super.onCreateView(parent);
        layout.setVisibility(View.VISIBLE);
        return layout;
    }    
} 
```

布局文件在这里

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+android:id/widget_frame"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:gravity="center_vertical"
    android:paddingRight="?android:attr/scrollbarSize">

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="18dip"
        android:layout_marginRight="6dip"
        android:layout_marginTop="6dip"
        android:layout_marginBottom="6dip"
        android:layout_weight="1">

        <TextView android:id="@+android:id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:singleLine="true"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:ellipsize="marquee"
            android:fadingEdge="horizontal" />

        <TextView android:id="@+android:id/summary"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@android:id/title"
            android:layout_alignLeft="@android:id/title"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:maxLines="2" />

    </RelativeLayout>

    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="6dip"
        android:layout_marginRight="6dip"
        android:layout_gravity="center" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:29:14.923

您的问题很可能是您的标题使用`android:attr/textAppearanceLarge`. 通过挖掘 Android 源代码，该[`preferences_child.xml`](http://androidxref.com/source/xref/frameworks/base/core/res/res/layout/preference_child.xml)资源改为使用`?android:attr/textAppearanceMedium`.

# java - spring security UsernamePasswordAuthenticationFilter url匹配问题

> ID：15340677
> 
> 赞同：0
> 
> 时间：2013-03-11T14:08:43.667
> 
> 标签：java, spring, security

我将 spring security 默认的 '/j_security_check' url 更改为 '/check'，当我登录到我的系统时，我输入 url ' [http://www.example.com/users/list](http://www.example.com/users/list) ' 它将转到页面右侧，但是当我将“检查”字符串附加到此 url 时，例如“ [http://www.example.com/users/list/check](http://www.example.com/users/list/check) ”，它将进入我的自定义 UsernamePasswordAuthenticationFilterCustom 过滤器，任何 url 附加“检查”都可以这个，我不知道为什么。

```
 <beans:beans xmlns="http://www.springframework.org/schema/security" 
xmlns:beans="http://www.springframework.org/schema/beans" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">
<!-- HTTP security configurations -->
<http pattern="/favicon.ico" security="none"/>
<http pattern="/statics/**" security="none"/>
<http pattern="/forgotPasswords/**" security="none"/>
<http pattern="/messages/**" security="none"/>
<http pattern="/sessions/**" security="none"/>
<!--<http pattern="/preferences/reLogin" security="none"/>-->
<http pattern="/javascript/message/**" security="none"/>
<http pattern="/dualLogin" security="none"/>
<http pattern="/inbound" security="none"/>
<http pattern="/twilio/**" security="none"/>
<http pattern="/download/async/**" security="none"/>
<beans:bean id="usernamePasswordAuthenticationFilterCustom" class="com.everbridge.platform.security.extension.UsernamePasswordAuthenticationFilterCustom">
    <beans:property name="authenticationSuccessHandler" ref="authenticationSuccessHandler"/>
    <beans:property name="sessionAuthenticationStrategy" ref="sas" />
    <beans:property name="passwordParameter" value="password"/>
    <beans:property name="usernameParameter" value="username"/>
    <beans:property name="allowSessionCreation" value="true"/>
    <beans:property name="filterProcessesUrl" value="/check"/>
    <beans:property name="authenticationManager" ref="authenticationManagerCustom"/>
    <beans:property name="authenticationFailureHandler" ref="authenticationFailureHandler"/>
    <beans:property name="userService" ref="userService" />
    <beans:property name="roleService" ref="roleService" />
    <beans:property name="accountService" ref="accountService" />
    <beans:property name="featureService" ref="featureService" />
    <beans:property name="moduleService" ref="moduleService"/>
    <beans:property name="permissionService" ref="permissionService"/>
</beans:bean>

<http entry-point-ref="authenticationEntryPoint" auto-config="false" use-expressions="true">
    <custom-filter position="CONCURRENT_SESSION_FILTER" ref="concurrencyFilter" />
    <custom-filter position="FORM_LOGIN_FILTER" ref="usernamePasswordAuthenticationFilterCustom" />
    <custom-filter ref="filterSecurityInterceptor" before="FILTER_SECURITY_INTERCEPTOR" />
    <custom-filter ref="afterLoginInterceptor" after="LAST" />
    <logout logout-url="/logout" />
    <intercept-url pattern="/login" access="permitAll" requires-channel="any"/>
    <intercept-url pattern="/switch" access="permitAll" requires-channel="any"/>
    <intercept-url pattern="/api/**" access="permitAll" requires-channel="any"/>
    <intercept-url pattern="/m/switcher" access="permitAll" requires-channel="any"/>
    <intercept-url pattern="/m" access="permitAll" requires-channel="any"/>
    <intercept-url pattern="/logout" access="permitAll" requires-channel="any"/>
    <intercept-url pattern="/check" access="permitAll" requires-channel="any"/>
    <intercept-url pattern="/registers/**" access="permitAll" requires-channel="any"/>
    <intercept-url pattern="/preferences/**" access="permitAll" requires-channel="any"/>
    <intercept-url pattern="/information/**" access="permitAll" requires-channel="any"/>
    <intercept-url pattern="/**" access="isAuthenticated()" requires-channel="any"/>

    <access-denied-handler ref="accessDeniedHandlerCustom"/>
    <session-management session-authentication-strategy-ref="sas" />
</http>

<beans:bean id="authenticationSuccessHandler" class="com.everbridge.platform.setting.handler.extension.AuthenticationSuccessHandlerCustom">
    <beans:property name="targetUrl" value="/dashboard" />

</beans:bean>

<beans:bean id="sas"
            class="org.springframework.security.web.authentication.session.ConcurrentSessionControlStrategy">
    <beans:constructor-arg name="sessionRegistry" ref="sessionRegistry" />
    <beans:property name="maximumSessions" value="1" />
</beans:bean>

<beans:bean id="concurrencyFilter" class="com.everbridge.platform.security.extension.CustomConcurrentSessionFilter">
    <beans:property name="sessionRegistry" ref="sessionRegistry" />
    <beans:property name="expiredUrl" value="/login" />
    <beans:property name="logoutHandlers">
        <beans:list>
            <beans:bean class="org.springframework.security.web.authentication.logout.SecurityContextLogoutHandler"></beans:bean>
            <beans:bean class="com.everbridge.platform.security.extension.CustomLogoutHandler"></beans:bean>
        </beans:list>
    </beans:property>
</beans:bean>
<beans:bean id="sessionRegistry" class="org.springframework.security.core.session.SessionRegistryImpl" />

<beans:bean id="authenticationFailureHandler" class="com.everbridge.platform.setting.handler.extension.AuthenticationFailureHandlerCustom"/>

<beans:bean id="authenticationEntryPoint"
      class="com.everbridge.platform.security.extension.AjaxAwareAuthenticationEntryPoint">
    <beans:constructor-arg value="/login"/>
</beans:bean>

<beans:bean id="filterSecurityInterceptor"
    class="com.everbridge.platform.security.extension.FilterSecurityInterceptorCustom">
    <beans:property name="authenticationManager" ref="authenticationManagerCustom" />
    <beans:property name="accessDecisionManager" ref="accessDecisionManagerCustom" />
    <beans:property name="securityMetadataSource" ref="securityMetadataSourceCustom" />
</beans:bean>

<beans:bean id="afterLoginInterceptor"
    class="com.everbridge.platform.portal.filter.AfterLoginInterceptor">
    <beans:property name="accountService" ref="accountService" />
    <beans:property name="roleService" ref="roleService" />
    <beans:property name="userService" ref="userService" />
</beans:bean>

<beans:bean id="accessDecisionManagerCustom" class="com.everbridge.platform.security.extension.AccessDecisionManagerCustom"/>

<beans:bean id="securityMetadataSourceCustom" class="com.everbridge.platform.security.extension.InvocationSecurityMetadataSourceServiceCustom" init-method="loadResources">
    <beans:property name="operationService" ref="operationService"/>
    <beans:property name="permissionService" ref="permissionService"/>
    <beans:property name="resourceService" ref="resourceService"/>
    <beans:property name="roleService" ref="roleService"/>
    <beans:property name="featureService" ref="featureService"/>
</beans:bean>

<beans:bean id="accessDeniedHandlerCustom" class="com.everbridge.platform.security.extension.AccessDeniedHandlerCustom">
    <beans:property name="errorPage" value="/error401" />
</beans:bean>

<authentication-manager alias="authenticationManagerCustom"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:28:56.207

Tony，首先你需要定义你的用户将被验证的页面，因为 URL /j_security_check 是 Spring Security 将检查验证的 URL。

尝试将您的逻辑定义为身份验证：

```
<security:form-login login-page="/login"  always-use-default-target="true" login-processing-url="/check"  default-target-url="/dashboard" authentication-failure-url="/login.jsp?login_error=1" /> 
```

# ios - NSDictionary 和 NSString，几条消息返回一个奇怪的值

> ID：15340678
> 
> 赞同：0
> 
> 时间：2013-03-11T14:08:44.997
> 
> 标签：ios, objective-c, nsstring, nsdictionary

我对一个我根本无法理解的问题发疯了！我有一个以 NSString 对象为值的 NSDictionary（名为“标题”）。在这个字典中存储了从 HTTP 响应中获得的头字段。

我需要使用此代码向此字典发送消息

```
NSString* cacheControlString = [headers valueForKey:@"Cache-Control"] 
```

这条消息在一个被调用三次的方法中发送......我所拥有的是第一次和第二次消息返回一个正确的值。第三次有时它没有返回正确的值，并且调试器说关于 cacheControlString

```
@<variable is not a NSString> 
```

但为什么？！？！为什么不总是？该方法不会修改字典，因为它看不到字典！为了确保我可以完全控制该字典，我将响应返回的标题复制到我创建的另一个字典中。

另一个奇怪的事情是，如果我写这段代码：

```
NSString* cacheControlString = [headers valueForKey:@"Cache-Control"];
cacheControlString = [headers valueForKey:@"Cache-Control"];
cacheControlString = [headers valueForKey:@"Cache-Control"];
cacheControlString = [headers valueForKey:@"Cache-Control"];
cacheControlString = [headers valueForKey:@"Cache-Control"];
cacheControlString = [headers valueForKey:@"Cache-Control"];
cacheControlString = [headers valueForKey:@"Cache-Control"]; 
```

它总是返回一个正确的值......有人有这种问题吗？！我真的要疯了！

## 这是完整的代码：

```
- (void) firstMethod {
    BOOL mustRevalidate = [self checkCacheControlElementForElement:@"must-revalidate" inHeaders:[response headers]];
    BOOL publicResponse = [self checkCacheControlElementForElement:@"public" inHeaders:[response headers]];
    BOOL privateResponse = [self checkCacheControlElementForElement:@"private" inHeaders:[response headers]];
}

- (BOOL) checkCacheControlElementForElement:(NSString*)element inHeaders:(NSDictionary*)headers {
    NSString* cacheControlString = [headers valueForKey:@"Cache-Control"];
    return [self checkCacheControlElementForElement:element inHeader:cacheControlString];
}

- (BOOL) checkCacheControlElementForElement:(NSString*)element inHeader:(NSString*)headerString {
    if (!headerString)
        return NO;

    Header* header = [[Header alloc] initWithName:@"Cache-Control" andValue:headerString];
    for (HeaderElement* headerElement in [header elements]) {
        if ([[headerElement name] isEqualToString:element]) {
            [header release];
            return YES;
        }
    }
    [header release];
    return NO;
} 
```

Header 和 HeaderElement 是我创建的类，它们有助于处理标题，但仅适用于传递的 NSString 对象。checkCacheControlElementForElement:inHeader: 方法所做的只是搜索标题中是否有元素。

我已经看到，如果我将第二行删除到方法 checkCacheControlElementForElement:inHeaders: 让它简单地返回是的，我没有问题......但是为什么？Header 和 HeaderElement 类不适用于字典！

如您所见，没有人更改“标题”字典，并且您可以确定字典中的值在我使用它时不会自动释放...

# python - Django 项目和独立 Python 项目

> ID：15340682
> 
> 赞同：3
> 
> 时间：2013-03-11T14:08:48.170
> 
> 标签：python, django

我有以下文件结构：

```
ihe/
├── dcmt
│   ├── actions
│   ├── calendar_observer
│   ├── cms
│   ├── consumption
│   ├── data_mining
│   ├── dcmt
│   ├── dcmt_db
│   ├── dcmt_db.bak.bak
│   ├── dcmt_db.sqlite
│   ├── devices
│   ├── d.py
│   ├── gadgets
│   ├── history 
│   ├── houses
│   ├── hwc_settings
│   ├── __init__.py
│   ├── __init__.pyc
│   ├── manage.py
│   ├── notifications
│   ├── profitable
│   ├── rules
│   └── schedule
├── hwc
│   ├── configuration
│   ├── daemons
│   ├── database
│   ├── __init__.py
│   ├── __init__.pyc
│   ├── utils
│   └── wrapper
├── __init__.py
├── __init__.pyc 
```

dcmt 是一个 django 项目。hwc是纯python。然而，例如在 hwc/daemons 中有一个 runme.py 脚本。在那个 runme.py 脚本中，我希望能够从 django 项目中导入模型。现在据我了解，我必须拥有正确的 python 路径，然后以某种方式设置 django 设置。我的问题是我如何最好地做到这一点，以便对于整个 hwc 模块我只需要这样做一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:15:01.717

您的项目结构似乎有点混乱。

在另一个包层次结构中拥有一个 Django 项目可能不是一个好主意。许多导入路径假定您的项目位于顶级包中，而您可能尚未遇到问题的唯一原因是 Python 2.x 仍然支持相对导入（已在 3.x 中删除）。这使得对包的引用非常模糊，并可能导致奇怪的错误。

从我可以看到您的设置包实际上被称为 (fully-qualified) `ihe.dcmt.hwc_settings`。如果`ihe`在您的 Python 路径中（检查`sys.path`您尝试运行的脚本中的值），那么（即完全限定的路径）可能`DJANGO_SETTINGS_MODULE`应该指向。

如果您想在脚本中使用 Django 的功能，您可能需要查看文档以编写`manage.py`命令。这将让您更一致地编写与 Django 相关的脚本，并让您不必担心自己正确地引用和初始化 Django 的设置。

# r - 历年回报计算

> ID：15340684
> 
> 赞同：0
> 
> 时间：2013-03-11T14:08:55.113
> 
> 标签：r, time-series, finance, xts

我正在尝试计算`GDPC96`FRED 时间序列的日历年 GDP 增长（即 xts 对象）。我正在寻找一个没有循环的简单函数，它计算日历年增长，其中变量是数据对象（此处`GDPC96`）、频率（此处为季度）以及是否应显示已弃用的时期（例如 2013 年）。

例如：

```
library(quantmod)
getSymbols("GDPC96",src="FRED")
a <- annualReturn(GDPC96,leading=FALSE)
tail(a) 
```

我希望它是每个日历年的变化，即它应该从 01.01.1947 计算到 01.01.1948 等等。然后，对于 2012 年，数据仅在 10 月可用，应省略。

据我所知，PerformanceAnalytics 和相关软件包中的任何功能都不能正确执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:34:25.807

似乎您想要类似年度回报计算的东西。我不知道自动执行此操作的函数，但`ROC`使用 TTR 包中的函数很容易。

```
library(quantmod)
getSymbols("GDPC96",src="FRED")
ROC(GDPC96, 4)  # 4-period returns for quarterly data
getSymbols("SPY")
spy <- to.monthly(SPY)
ROC(spy, 12)  # 12-period returns for monthly data 
```

根据评论更新：

```
first.obs.by.year <- lapply(split(GDPC96, "years"),first)
last.obs.by.year <- lapply(split(GDPC96, "years"),last)
ROC(do.call(rbind, first.obs.by.year))
ROC(do.call(rbind, last.obs.by.year)) 
```

# c++ - 如何静态构建 Qt 5

> ID：15340688
> 
> 赞同：14
> 
> 时间：2013-03-11T14:09:02.407
> 
> 标签：c++, linux, qt, gcc, qt5

我在 linux 环境中使用基于 Qt 5.0.1 的 Qt Creator 2.6.2。该应用程序在我进行编译的计算机上运行良好，但是当我在另一台计算机上执行它时出现如下错误：

```
error while loading shared libraries: libQt5WebKitWidgets.so.5: cannot open shared object file: No such file or directory
error while loading shared libraries: libxslt.so.1: cannot open shared object file: No such file or directory 
```

我在这个[链接](https://stackoverflow.com/questions/1011197/qt-static-linking-and-deployment)中找到了一些解决方案（一些链接已经失效）。

所以我在我的 .pro 文件中添加了这一行：

```
CONFIG += static 
```

静态编译我的项目。

我以为我会得到的文件会更大，但我得到了相同的大小和相同的错误。

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T09:15:32.223

Qt 共享库在您测试它的另一台计算机上不存在。所以你需要：

1.  将共享库复制到您的另一台计算机。或者...
2.  创建一个静态 Qt 构建以与您的应用程序链接。

仅仅添加到您的 .pro 文件是不够的`CONFIG += static`，您还需要 Qt 静态库。因此，要执行 #2，您需要获取 Qt 源代码并自己构建它。

此外，Qt 是在 LGPL 下获得许可的，因此在静态链接时需要注意这一点。有些人认为 LGPL 不允许静态链接（除非您 LGPL 您自己的代码），而另一些人则认为它允许（只要您愿意为您的应用程序发布目标代码）。但这是另一回事。

# php - 连字符分隔的值和 LEFT_JOIN

> ID：15340689
> 
> 赞同：0
> 
> 时间：2013-03-11T14:09:03.597
> 
> 标签：php, mysql

我有一排用连字符分隔的一些值：

**表：live_customers**
**行：区域**

```
id | areas
 1 | 10-20-30
 2 | 40-50-60
... 
```

使用这个...

```
LEFT JOIN $table5 AS table5 ON live.areas REGEXP CONCAT('(^|-) ?',table5.id,' ?($|-)') 
```

我的结果看起来像：

```
(tab id:1) area: 10
(tab id:1) area: 20
...
(tab id:2) area: 40
... 
```

但我希望：

```
(tab id:1) area: 10,20,30
(tab id:2) area: 40,50,60 
```

我怎么能解决这个问题？

编辑：

完整的查询如下所示：

```
SELECT live.*,
live.id AS lid,
table1.id, table1.value AS tn_val,
table2.id, table2.value AS tp_val,
table3.id, table3.value AS ht_val,
table5.id, table5.value AS ar_val
FROM $dblist AS live
LEFT JOIN $table1 AS table1 ON live.town = table1.id
LEFT JOIN $table2 AS table2 ON live.htype = table2.id
LEFT JOIN $table3 AS table3 ON live.ht = table3.id
LEFT JOIN $table5 AS table5 ON live.areas REGEXP CONCAT('(^|-) ?',table5.id,' ?($|-)')
ORDER BY live.id ASC 
```

PHP 回声：

```
...
if ($post['areas']){ // Debugging areas stuff
echo '<strong>'.$_areas.': (ar_val)</strong> '.$post['ar_val'].'<p>';
echo '<strong>'.$_areas.': (areas)</strong> '.$post['areas'].'<p>';
}
... 
```

编辑2：

我很难用英语解释我的问题，但我正在尽我所能:)

在“live_customers”表中，我确实有这个：

```
id | areas
 1 | 10-20-30
 2 | 40-50-60
... 
```

在“区域”表（这是一个完全不同的表）中：

```
id | value
38 | Zone1
39 | Zone2
40 | Zone3
... 
```

在 SQL 查询中，您只看到表变量，因为我之前在页面顶部声明了它们：

```
$table5 = 'areas';
$dblist = 'live_customers'; 
```

ETC..

**解决方案**

感谢任何人的回答并让我知道“GROUP_CONCAT”。

这是我的解决方案：

```
SELECT live.*,
live.id AS lid,
table1.id, table1.value AS tn_val,
table2.id, table2.value AS tp_val,
table3.id, table3.value AS ht_val,
table5.id, GROUP_CONCAT(table5.value) AS ar_val
FROM $dblist AS live
LEFT JOIN $table1 AS table1 ON live.town = table1.id
LEFT JOIN $table2 AS table2 ON live.htype = table2.id
LEFT JOIN $table3 AS table3 ON live.ht = table3.id
LEFT JOIN $table5 AS table5 ON FIND_IN_SET(table5.id, REPLACE(live.areas, '-', ','))
GROUP BY live.id 
```

结果如我所愿^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:13:11.557

与 GROUP_CONCAT() 一起使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:35:07.677

首先要说的是，您的架构违反了第一范式 (1NF)，因为列区域不是原子的。您不应该将 3 个不同的值放在一列中。

接下来，您说您有一个名为 live_customers 的表，其中有一行名为 area。这是无稽之谈。行没有名字，列有。您显示了一个带有 2 列 id 和区域的表格。这是什么表？

接下来在查询中没有提到名为 live_customers 的表。

接下来，如果表中有一个名为area 的列，别名为live，那么输出应该包含该列，因为您选择的是live.*。在这种情况下，您的结果不可能是您向我们展示的结果，因为它将包含一个结果列，其中包含 10-20-30 之类的数据

最后，这些不能是发布查询的结果，因为我可以看到指定的 lid 的结果列。

如果您愿意花一些时间来确保您发布的问题有意义，那么您可能会得到一个合理的答案。

# android - 从 SDCard 安装并将其置于后台后应用程序重新启动

> ID：15340692
> 
> 赞同：2
> 
> 时间：2013-03-11T14:09:14.523
> 
> 标签：android, android-sdcard, android-install-apk

我创建了一个示例应用程序（只是一个文本视图，没有别的），我注意到了一个错误。从 SDCard 安装后，它会显示“已安装应用程序”屏幕，其中包含完成和打开按钮。

如果我单击打开按钮，会发生一件奇怪的事情：每当我将应用程序置于后台并从应用程序图标重新打开它时，它并没有重新打开它，而是创建了一个新实例。我可以确认它正在创建一个新实例，因为将其置于后台并重新打开几次后，当我单击后退按钮时，它会打开前一个实例，而不是返回主屏幕。

现在奇怪的是，它只有在从 SDCard 安装并单击打开按钮后才会发生。如果我单击完成按钮（或通过 ADB 安装）并通过图标打开应用程序，则不会发生。另外，如果我单击打开按钮（并且出现错误），在第一次结束应用程序后，错误不再出现。

我已经在不同的设备和不同的 Android 版本（GB、HC 和 ICS）中对其进行了测试，并且该错误正在它们中重现。

有人知道这是否是 Android 的一个已知问题，如果是，有人有我可以参考的官方参考吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:29:01.117

是的，这是一个令人讨厌的、众所周知的 Android 错误，从一开始就存在。请参阅以下内容：

[安卓问题 26658](http://code.google.com/p/android/issues/detail?id=26658)

[安卓问题 2373](http://code.google.com/p/android/issues/detail?id=2373)

[Android 应用的安装方式与 adb 和 sdcard 不同](https://stackoverflow.com/questions/14390019/android-app-acts-differently-installed-from-adb-vs-sdcard/14465327#14465327)

# jtextpane - 如何创建与 jTextPane 连接的 Log4j 2 appender？

> ID：15340695
> 
> 赞同：5
> 
> 时间：2013-03-11T14:09:16.257
> 
> 标签：jtextpane, appender, log4j2

我目前正在尝试`Log4j 2`登录到`JTextPane`. 它应该像 Netbeans IDE 控制台中的 STDERR 或 STDOUT 一样（包括文本样式 - 颜色）。

我知道我需要创建一个*附加程序*并将其与.`JTextPane``Log4j 2`

你有什么建议吗？

感谢您的帮助，马蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T14:46:16.827

我已经为 Logback 做了这个（只有纯文本）。您需要做的基本事情是：

*   实现你自己的 Appender 来接收日志事件。Log4j 2 提供[`AbstractAppender`](http://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/appender/AbstractAppender.html)，它将为您提供基线功能。
*   使用适当`Layout`的格式来格式化日志事件（将取决于[`Document`](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/Document.html)您使用的`JTextPane`.
*   将格式化文本附加`Document`到`JTextPane`.

其他几点：

*   如果您只记录纯文本，事情会更简单，在这种情况下，您应该使用`JTextArea`.
*   大概你会想要限制`Document`. 您可以通过检查每个追加的长度并`Document.remove`在超过最大长度时使用删除第一个 X% 来做到这一点。
*   如果你有频繁的日志操作，你应该限制你追加到文档的频率，并缓冲其间的变化以减少摆动更新/重绘的开销。我通常使用 3 Hz。当您有多个日志生产者线程时，这也是可取的，因为尽管该`Document.insertString`方法是线程安全的，但它会在执行更新之前获得对文档的锁定，并可能导致相当多的争用。

我强烈建议为此参考文档。我从未使用过 Log4j 2，但文档看起来很简单。同样，Java 教程的“使用文本组件”部分提供了您需要了解的有关 Swing 端的所有信息。不幸的是，我无法在此处提供其他链接。

# python - 正则表达式/python 在字符串中查找和替换特定数字

> ID：15340713
> 
> 赞同：3
> 
> 时间：2013-03-11T14:09:53.637
> 
> 标签：python, regex, parsing, python-2.7

我需要替换出现在较长字符串中的数字（角），它们看起来都类似于：

```
[ 17 plane_17 \ 23 25 17 99 150 248 \ noname ] 
```

我的函数将“旧”数字替换为“新”数字，例如，如果旧数字是 17 而新数字是 19，那么结果应该是：

```
[ 17 plane_17 \ 23 25 19 99 150 248 \ noname ] 
```

请注意，只有 \ \ 中的数字应该被替换（这些也可以是 // ）。

为此，我尝试设置一个正则表达式替换，目的是避免 \ \ 或 / / 之外的数字： `newplane = re.compile(r"[^[_] (" + str(oldcorner) + ")").sub(str(newcorner), oldplane)`

我很快意识到这不起作用，因为正则表达式从行首搜索，然后如果它与模式不匹配则失败。

一定有一些我不知道的聪明的方法。有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T14:30:19.837

您可以在正则表达式的子部分中使用回调函数：

```
import re

def callback(match):
    return match.group(0).replace('17', '19')

s = "[ 17 plane_17 \ 23 25 17 99 150 248 \ noname ]"

s = re.compile(r'\\.+?\\').sub(callback, s)

print s 
```

印刷：

```
[ 17 plane_17 \ 23 25 19 99 150 248 \ noname ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:36:26.553

除了 vpekar 答案之外，您还可以在替换字符串上使用模式的反向引用，因此您可以尝试在`/`or之间匹配所有内容，`\`并使用新数字和反向引用重新创建字符串：

```
line = '[ 17 plane_17 \ 23 25 17 99 150 248 \ noname ]'
re.sub(r'([\\|/].*\s)(?:17)(\s.*[\\|/])', r'\g<1>19\2', line) 
```

返回：

```
'[ 17 plane_17 \ 23 25 19 99 150 248 \ noname ]' 
```

# python - Django 错误（外部 IP）：内部服务器错误：/ico/apple-touch-icon-precomposed.png

> ID：15340714
> 
> 赞同：0
> 
> 时间：2013-03-11T14:09:54.680
> 
> 标签：python, html, django, django-1.4

当用户尝试访问不存在的站点页面时，我的 django 应用程序当前正在发送错误报告，这就是它应该的样子。

但是当我尝试通过我的平板电脑（Android 和 Apple）使用 django 应用程序时，我收到一封包含此错误的电子邮件

```
[Django] ERROR (EXTERNAL IP): Internal Server Error: /ico/apple-touch-icon-precomposed.png 
```

我的 html 标头看起来像这样

```
{% load static %}
<link rel="icon" href="{% static 'favicon.ico' %}" type="x-icon" /> 
```

我的静态文件路径以防万一。

```
|-- static
    |-- css
    |-- img
    |-- js
    |-- ico
        |-- favicon.png
        |-- apple-touch-icon-precomposed.png
    |-- favicon.ico 
```

我做了一些谷歌搜索，发现[了](https://docs.djangoproject.com/en/1.4/howto/error-reporting/#errors)关于错误报告的内容，并尝试将以下内容添加到 settings.py 但没有运气。

```
import re
IGNORABLE_404_URLS = (
    re.compile(r'^/ico/apple-touch-icon-precomposed\.png$'),
    re.compile(r'^/favicon\.ico$'),
    re.compile(r'^/robots\.txt$'),
) 
```

如何解决此问题以避免在网站图标上收到有关服务器错误的电子邮件。

有人对此有想法吗？我错过了什么吗

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:08:21.983

这可能很有趣，但这就是我解决问题的方法。

我在标题中添加了额外的几位。确保首先加载最小的图像，有关此的更多信息，您可以[在此处阅读](http://developer.apple.com/library/safari/#documentation/appleapplications/reference/safariwebcontent/ConfiguringWebApplications/ConfiguringWebApplications.html)

```
{% load static %}
<link rel="icon" href="{% static 'favicon.ico' %}" type="x-icon" />
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="{% static 'ico/apple-touch-icon-72-precomposed.png' %}" type="image/png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="{% static 'ico/apple-touch-icon-114-precomposed.png' %}" type="image/png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="{% static 'ico/apple-touch-icon-144-precomposed.png' %}" type="image/png">
<link rel="icon" href="{% static 'ico/favicon.png' %}" type="image/png"> 
```

最后我将额外的图像添加到静态

```
|-- static
    |-- css
    |-- img
    |-- js
    |-- ico
        |-- favicon.png
        |-- apple-touch-icon-precomposed.png
        |-- apple-touch-icon-72x72-precomposed.png
        |-- apple-touch-icon-114x114-precomposed.png
        |-- apple-touch-icon-144x144-precomposed.png
    |-- favicon.ico 
```

希望这对那里的人有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-19T06:59:21.213

 **我认为，如果设备所有者将站点添加到其中，Apple 设备就会发出这些请求。

这相当于网站图标。解决方法是添加2个100×100的png文件，分别保存为apple-touch-icon-precomposed.png和apple-touch-icon.png，上传到服务器根目录。

对我来说，错误已经消失了。**

# jquery - 带有 Lazy Line Painter 的 Jquery 线条动画

> ID：15340715
> 
> 赞同：0
> 
> 时间：2013-03-11T14:09:56.910
> 
> 标签：jquery, animation

我一直在尝试来自矢量（svg）文件的一些 jquery 动画，我的方法很好，但是为简单的行编写代码非常慢，直到我发现这个极好的小帮助

[http://lazylinepainter.info/](http://lazylinepainter.info/)

非常有帮助，它正是我正在寻找的东西。使用它我制作了这条线动画：

[http://bit.ly/YSL5qd](http://bit.ly/YSL5qd)

如您所见，动画适用于多条路径，我唯一不知道的是如何同时处理两条线。我试图在两个不同的js文件中实现路径，它不会工作......

有任何想法吗？感谢转发！

标记：

```
 <div id="svg7" style="width: 1022px; height: 150px; z-index: 9999; position: absolute; top: 50px;"></div>

        <script>window.jQuery || document.write('<script src="scripts/jquery-1.9.1.min.js"><\/script>')</script>
<script src="scripts/strokengine.js"></script>
<script src="scripts/pulsengine.js"></script>
<script src="scripts/main2.js"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T21:04:37.833

您可以将路径数据拆分为两个单独的键/值对，

将动画分配给第二个 div，

然后分别设置您的属性和“绘画”（svg8）。

```
var pathObj = {
    "svg7": {
        "strokepath": [
            {
                "path": " ... "
            }
        ],
        "dimensions": { ... }
    },
    /* second key / value */ 
    "svg8": {           
        "strokepath": [ 
            {
               "path": "..."
            }
        ],
        "dimensions": { ... }
    }
}; 

<div id="svg7"></div>
<div id="svg8"></div>  

// second lazyline instance
$('#svg8').lazylinepainter({
     "svgData": pathObj,
     "strokeWidth": 3,
     "strokeColor": "#89171a"
}).lazylinepainter('paint'); 
```

见下文;

[http://jsfiddle.net/J8nC3/4/](http://jsfiddle.net/J8nC3/4/)

这是lazylinepainter 的一个领域，在不久的将来会更容易实现。

谢谢凸轮

# c++ - 类的构造函数的声明和定义并打印出私有和公共变量？

> ID：15340717
> 
> 赞同：2
> 
> 时间：2013-03-11T14:10:04.697
> 
> 标签：c++, visual-studio, class

我很难过，我现在正在学习 C++ 课程，这是我遇到的问题，我必须声明和定义构造函数，我不知道我在做什么错我尝试但无法得到结果请帮助

```
 #include <iostream>
 using namespace std;

 class exercise
 {
 public:
      //declaration: constructor of class exercise
      int public_var;
      int get_private_var();
 private:
      int private_var;
  };

 //definition: constructor of class exercise
 int exercise::get_private_var()
 {
      return private_var;
 }

 int main()
 {
      exercise object(2,3);
      int pub_var = object.public_var;
      int pri_var = object.get_private_var();
      cout << pub_var <<' '<<pri_var<<endl;
      return 0;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T14:16:56.747

示例构造函数将是：

```
class exercise
{
public:
  exercise(int,int);
  int public_var;
  int get_private_var();
private:
  int private_var;
};

//Constructor definition
exercise::exercise(int a, int b)
{
  public_var = a;
  private_var = b
}
//rest of member functions 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:21:48.633

这是使用构造函数构建类的方法

```
class a
{
public:
int pubvar;
a() //default constructor
{
pubvar =1;
privar =2;
}
a(int one, int two) //constructor with intializing
{
pubvar = one;
privar = two;
}
private:
int privar;
} 
```

现在默认初始化是

```
a myclass; 
```

并用你的变量初始化是

```
a myclass(4,2); 
```

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:17:23.643

为了声明一个构造函数，你应该

```
class exercise
 {  
   public:
     //declaration: constructor of class exercise
     exercise();
     int public_var;
     int get_private_var();
   private:
     int private_var; 
```

};

为了实现（通常在 .cpp 文件中），您应该：

```
exercise::exercise()
{  
   //your code here
} 
```

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T14:18:42.823

`get_private_var`不是构造函数。当你这样做时调用它的函数`object.get_private_var()`- 它只是一个典型的成员函数。

构造函数是在您构造对象时被调用的函数（有意义，对吗？）。在您的情况下，它将在您执行以下操作时使用：

```
exercise object(2,3); 
```

这一行构造了一个对象，该`exercise`对象被调用`object`并将值传递给它的构造函数。看起来您想将这些值分配给and成员。`2``3``public_var``private_var`

首先你需要声明你的构造函数：

```
class exercise
{
 public:
  exercise(int, int); //declaration: constructor of class exercise

  int public_var;
  int get_private_var();
 private:
  int private_var;
}; 
```

如您所见，构造函数的声明与任何其他成员函数一样，只是它没有返回类型。这是有道理的，因为返回类型显然是类本身。在这里，我指定了两个参数。

现在我们需要定义构造函数，类似于您定义的方式`get_private_var`，但同样没有返回类型：

```
exercise::exercise(int x, int y)
{
  public_var = x;
  private_var = y;
} 
```

然后你就完成了。此构造函数只是将传递给它的值分配给公共和私有成员。

但是，有一种更好的方法来实现这个构造函数，使用成员初始化列表：

```
exercise::exercise(int x, int y)
  : public_var(x), private_var(y)
{ } 
```

# ibm-mobilefirst - 工作灯适配器

> ID：15340721
> 
> 赞同：0
> 
> 时间：2013-03-11T14:10:22.637
> 
> 标签：ibm-mobilefirst, worklight-adapters

我在工作灯适配器中遇到问题，在以下 http 适配器方法中，它显示`The mandatory parameter 'action' is missing`，返回 statusCode `500`和 statusReason 作为“ `Internal Server Error`”。我已在适配器 xml 文件中正确提供了所有用户凭据，但我不知道为什么会出现此错误。

**代码：**

```
function actionOnProcessInstance()
{

var param = "/rest/bpm/bfm/v1/process/_PI:9003013d.4387342e.1efe573f.7c20307?action=resume";

var input = 
{
  method : 'put',
  returnedContentType : 'json',
  path : param,
};

var response = WL.Server.invokeHttp(input);

return response;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:25:37.783

在 5.0.5.x 中，invokeHttp 将获取路径上为 put 和 post 提供的任何参数，并将它们放在 http 正文中，而不是让它们作为查询参数保留在路径上（正如开发人员可能想要的那样）。此行为将在即将发布的版本中更新，但目前无法强制这些保留为查询参数。

# makefile - 在makefile中编写编译规则时如 何剥离源文件的路径？

> ID：15340725
> 
> 赞同：13
> 
> 时间：2013-03-11T14:10:29.607
> 
> 标签：makefile

简而言之：我想编译来自不同目录的源代码，并将目标文件放入当前目录。

例如，我有文件：

```
test.c
../../lib1/boot.c
../../lib2/startup.c
../common/utils.c 
```

（还有一些文件.s（程序集）和.cpp，但我希望这不重要）。

我想在当前目录中的所有目标文件：

```
test.o
boot.o
startup.o
utils.o 
```

而且我不知道如何在我的makefile中编写这样的规则。

例如，

```
%o.: %.c 
```

现在不起作用，因为`make`找不到要构建的规则`boot.o`，`../../lib1/boot.c`它只能找到要构建`../../lib1/boot.o`的规则`../../lib1/boot.c`。

我试着用这个：

```
%o.: %.c
 (my compilation line, for example "gcc -c $^ -o $@")
%o.: ../../lib1/%.c
 (my compilation line)
%o.: ../../lib2/%.c
 (my compilation line)
%o.: ../common/%.c
 (my compilation line) 
```

它有效。但这显然不够通用，另外，今天有用户来找我说他的应用程序也有一些`../../some_other_lib/common_things.c`，因此我的makefile失败了。我浏览了我们的项目，发现了很多这样的案例，涉及到很多不同的目录。使用我的方法，我必须为每个这样的目录编写一个单独的规则，并使用相同的编译行。这对我来说似乎不太好。

所以我的问题是：如何制定一些通用的编译规则，将目标文件放在当前目录中（并检查），同时使用不同目录中的源进行操作？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T11:41:05.520

可以从`CSRC`变量 with中提取目录`$(dir ...)`，然后可以在`vpath`指令中使用此列表。

```
vpath %.c $(sort $(dir $(CSRC)))
vpath %.s $(sort $(dir $(SSRC)))
vpath %.cpp $(sort $(dir $(CPPSRC))) 
```

（我已经加入了`sort`删除重复项的功能，但这不是绝对必要的。）

现在规则可以保持简单，`make`并将在目录列表中搜索源文件。

```
$(COBJ) := $(notdir $(CSRC))
$(SOBJ) := $(notdir $(SSRC))
$(CPPOBJ) := $(notdir $(CPPSRC))

.PHONY: all
all: $(EXECUTABLE)

$(EXECUTABLE): $(COBJ) $(SOBJ) $(CPPOBJ)
    ....

$(COBJ): %.o: %.c
    ...

$(SOBJ): %.o: %.s
    ...

$(CPPOBJ): %.o: %.cpp
    ... 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-11T15:08:10.743

尝试`notdir`像这样使用makefile函数：

```
%.o:    %.c
    gcc -c $< -o $(notdir $@) 
```

`$@`必须等于完整路径 ex:`../../lib2/startup.o`广告`notdir`会将其中继到: `startup.o`。

使用此规则，您将能够在当前目录中编译所有源代码。

实际上，您的示例是这样的：

```
.
└── common
    ├── lib1
    │   └── boot.c
    ├── lib2
    │   └── startup.c
    ├── test
    │   ├── Makefile
    │   └── test.c
    └── utils.c 
```

我想我会变得更好：

```
.
├── common
│   ├── lib1
│   │   ├── Makefile
│   │   ├── obj
│   │   └── src
│   │       └── boot.c
│   ├── lib2
│   │   ├── Makefile
│   │   ├── obj
│   │   └── src
│   │       └── startup.c
│   ├── Makefile
│   ├── obj
│   ├── src
│   │   └── utils.c
│   └── test
│       ├── Makefile
│       ├── obj
│       └── src
│           └── test.c
└── Makefile 
```

为此，您需要所有 Makefile 来调用子目录 Makefile。并且`src`/ `obj`dirs 是您的源和对象之间的分隔符。

```
SRC := utils.c

OBJ := $(SRC:%.c=%.o)

NAME := project

SRC_D := src
OBJ_D := obj

SUBDIRS := lib1/ \
           lib2/ \
           test/

all: $(NAME) $(SUBDIRS)
    @for dir in $(SUBDIRS); \
    do \
    $(MAKE) -C $$dir; \
    done

$(NAME):    $(OBJ:%.o=$(OBJ_D)/%.o)

$(OBJ_D)/%.o :  $(SRC_D)/%.c
    gcc -c $< -o $@ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T17:43:48.410

好的，花了我一些时间，但最后我找到了解决方案（顺便在这个网站上使用了一些线程）：

```
# Defining compilation rules in a way that object files will be produced in current directory, and not in the directory of source files:
all: <List of my targets>

define my_c_rule
$(subst .c,.o,$(notdir $(1))): $(1)
    $(CC) $(CFLAGS) $(CDEFINES) $$^ -o $$@
endef
$(foreach f, $(CSRC), $(eval $(call my_c_rule, $(f)))) 
```

`$(CSRC)`包含源文件列表及其路径。

只需要考虑到，如果早些时候我有这样的事情：

```
.c.o:
    $(CC) $(CFLAGS) $(CDEFINES) $^ -o $@

all: <List of my targets> 
```

...现在我必须把`all`句子放在我在程序中描述的规则之上`my_c_rule`。如果我不这样做，`make`编译第一个源文件后停止。这是因为旧的“通配符”规则喜欢`.c.o`或`%.o: %.c`不替换`all`为默认目标（甚至更早编写），但非通配符规则`boot.o: ../../lib1/boot.c`（上述宏的结果）确实会替换默认目标，以防它们更早编写。

# css - 防止 走新路线；不工作

> ID：15340726
> 
> 赞同：1
> 
> 时间：2013-03-11T14:10:29.993
> 
> 标签：css, html

我正在编写一个顶部带有横幅的页面，该页面应包含一系列按钮。以下代码适用于所有按钮，但按钮应并排显示时换行。我知道 div 会自动换行，我应该使用 span，但是当我这样做时，它不会像使用 div 那样拉伸横幅以适应按钮。我尝试过使用多种浮点数，但无济于事。

```
<style type="text/css" media=screen>

body{
    margin: 0px;
    padding: 0px;
    color: #000;
    font-family: helvetica, times;
    font-size: 14px;
}

#wrapper{
  position: absolute;
  height: 100%;
  width: 100%;
  text-align:center;
}

#banner{
  background: url('images/banner_background.png');
  position: relative;
  margin: 0;
  width: 100%;
  color: #FFFFFF;
  z-index: 3;
}

#banner #button {
  padding:10px;
  margin:auto;
  position: relative;
  background: url('images/button.png');
  height: 100%;
  z-index: 4;
  width:100px;
}

</style>
</head>

<body>

<div id="wrapper">
  <div id="banner">

    <div id="button">
      dfsdfsfdsdfs
    </div>

    <div id="button">
      sddfdfdsf
    </div>

  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T14:19:01.020

要使填充仍然在像 a 这样的内联元素上起作用`span`，您必须将其设置为`display: inline-block`- 它仍然在文本流中，与块元素不同，但接受宽度/高度、填充和边距，就像图像一样。默认情况下，图像是内联块。

CSS：

```
#banner .button {
  display: inline-block;
  padding:10px;
  margin:auto;
  position: relative;
  background: url('images/button.png');
  height: 100%;
  z-index: 4;
  width:100px;
} 
```

HTML：

```
<span class="button">
  sddfdfdsf
</span>
<span class="button">
  sddfdfdsf
</span> 
```

**重要提示：** ID 对于单个元素是唯一的。如果您有多个按钮，请使用类。我也调整了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:17:22.140

制作你的`<div>`-s `inline-block`- [**DEMO**](http://jsfiddle.net/bNSZL/)

ID-s 也应该是唯一的。

如果你需要按钮，那么你必须使用`<button>`标签——它只是更具有语义意义。它可以设计成任何你想要的样式 - [**DEMO**](http://jsfiddle.net/bNSZL/1/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T14:12:37.220

您应该使用`display: inline`for a`div`而不是使用 a `span`。

`div`将 设置为`display`默认`block`情况下，而`span`设置为`inline`. 您不能设置`padding`或设置`margin`值，`span`因为它旨在以更轻松的方式使用（例如，某些单词的下划线或斜体）。因此，`div`如果可以这样做并设置属性`display: inline`以满足特殊需求，则最好使用。

# mod-rewrite - 带有子目录的 Joomla mod_rewrite

> ID：15340734
> 
> 赞同：1
> 
> 时间：2013-03-11T14:10:53.773
> 
> 标签：mod-rewrite, joomla

我有 joomla mod_rewrite 的问题。

我的主机信息：主机 - 共享 - 豪华 - Linux Joomla：2.5

```
root directories:
domain1com   (www.domain1.com) 
domain2com   (www.domain2.com)
domain3com   (www.domain3.com) 
```

例如，让我们以 domain1com 为例。

```
/domain1com/configuration.php

public $live_site = 'http://www.domain1.com';
public $sef = '1'; //Search Engine Friendly URLs ON
public $sef_rewrite = '1'; //Use URL rewriting ON

**/domain1com/.htaccess**

Options +FollowSymLinks
RewriteBase /domain1com/
RewriteEngine On

RewriteCond %{QUERY_STRING} mosConfig_[a-zA-Z_]{1,21}(=|\%3D) [OR]
RewriteCond %{QUERY_STRING} base64_encode.*\(.*\) [OR]
RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR]
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
RewriteRule ^(.*)$ index.php [F,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/index.php
RewriteCond %{REQUEST_URI} (/|\.php|\.html|\.htm|\.feed|\.pdf|\.raw|/[^.]*)$ [NC]
RewriteRule (.*) index.php
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L] 
```

尝试加载时出现错误：

```
www.domain1.com/example 
```

内部服务器错误 服务器遇到内部错误或配置错误，无法完成您的请求。请联系服务器管理员并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。服务器错误日志中可能提供有关此错误的更多信息。

www.domain1.com/index.php/example 工作正常...

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:07:13.810

重写基础是相对于域名而不是文件结构。尽管系统中有多个文件夹，但从域的角度来看，它是根目录。你应该有`RewriteBase /`。

如果您正在访问该站点，`www.domain1.com/domain1com/example`那么您将使用`RewriteBase /domain1com/`.

# php - 菜单中的子菜单，在 twitter bootstrap 的下方（不在左侧）

> ID：15340735
> 
> 赞同：1
> 
> 时间：2013-03-11T14:11:04.667
> 
> 标签：php, twitter-bootstrap, navigation

我想知道更改导航栏中的子菜单是否容易。我想将它们插入每个项目的菜单**下方（****而不是左侧**）。像这样 ：

```
Menu1
-submenu1-1
-submenu-12 
Menu2
-submenu2-1
Menu3
-submenu3-1
-submen3-2 
```

因此，单击菜单没有任何作用，因为子菜单在下面可用。我在 WP 中使用引导主题。

# jquery - 不支持 Youtube 链接

> ID：15340737
> 
> 赞同：4
> 
> 时间：2013-03-11T14:11:08.830
> 
> 标签：jquery, asp.net, html, upload

我在 ASP.NET MVC 中有一个网站。页面加载后，我收到以下错误。我已经动态传递了 Youtube URL，但出现错误：

```
Load denied by X-Frame-Options: http://www.youtube.com/v/g5RM5StrMXY does not permit cross-origin framing 
```

我的代码：

```
<script>
  function closeVideowindow(k) {
    alert(k);
    var URL = $('#cnad_text_1').val();
    var htm = '<iframe width="100%" height="100%" src=' + URL + '?rel=0 frameborder="0"    allowfullscreen ></iframe>';

    parent.$('.current').html(htm);
    parent.$('.current').removeClass('current');
    parent.$.fancybox.close();
  }  
</script>

<h1>Upload Video</h1>
  <div class="form_scpop">
    <form action="" method="get" name="sizeform">
      <!-- <frameset>
      <iframe src="https://www.youtube.com/watch?v=t090py6b0lM" width="853" height="480"></iframe>
      </frameset >-->
      <h2>Insert a youtube video Link</h2>
      <div class="col2">
        <input id="cnad_text_1"  name="cnad[text_1]" class="input_txt">
      </div>
      <input name="" type="submit" value="Save" class="saveurl"  onclick="closeVideowindow(this)" />
    </form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T14:59:19.783

我认为您使用了错误的 URL，请尝试使用：

> [http://www.youtube.com/embed/g5RM5StrMXY](http://www.youtube.com/embed/g5RM5StrMXY)

如果它仍然不起作用，请考虑将视频加载到 a`object`而不是 a 中`iframe`：

```
<object width="100%" height="100%">
    <param name="movie" value="http://www.youtube.com/v/g5RM5StrMXY?hl=en_US&amp;version=3&amp;rel=0"></param><param name="allowFullScreen" value="true"></param>
    <param name="allowscriptaccess" value="always"></param>
    <embed src="http://www.youtube.com/v/g5RM5StrMXY?hl=en_US&amp;version=3&amp;rel=0" type="application/x-shockwave-flash" width="560" height="315" allowscriptaccess="always" allowfullscreen="true"></embed>
</object> 
```

# c# - 从 DataTable 填充 RadGridView

> ID：15340739
> 
> 赞同：1
> 
> 时间：2013-03-11T14:11:19.237
> 
> 标签：c#, winforms, gridview

我需要以编程方式为 gridView 创建一个数据源，因此我正在构建一个 DataTable，然后将其分配给 radGridView 数据源。首先，我使用此代码多次添加与列数匹配的列：

```
 static DataTable dt = new DataTable(); 
   List<string> col = new List<string>();
    col.Add("ColumnName");
    dt.Columns.Add("ColumnName"); 
```

我正在使用以下代码动态创建 RadGridView 行：

```
 DataRow d = dt.NewRow();
            for (int i = 0; i < col.Count; i++)
                d[col[i]] = "Shaza";
            dt.Rows.Add(d);
            this.radGridView1.DataSource = dt; 
```

但是 radGridView 有确切的行数但没有任何数据，你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:21:25.183

这是基于 ASP.NET 网格的，FWIW：您是否向 gridview 本身添加了 Columns() 调用？

```
 .Columns(col =>
    {
        col.Bound(p => p.ColumnName).Width(100);
    }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-24T20:22:25.197

我认为您正在寻找的是：`this.radGridView1.ItemsSource = dt.DefaultView;`

# opencv - 使用 WebCam 与 OpenCV 2.1.X 相比，OpenCV 2.4.X 的正方形检测速度较慢

> ID：15340743
> 
> 赞同：1
> 
> 时间：2013-03-11T14:11:25.970
> 
> 标签：opencv, detection

我曾尝试使用 OpenCV 2.4.1-2.4.4 移植 Square 检测，但结果似乎很慢。由于提供了新功能，我很想转向更新版本的 OpenCV，但结果却很慢。

我的 2.4.X 版本的 OpenCV 代码是：

```
// The "Square Detector" program.
// It loads several images sequentially and tries to find squares in
// each image

#include "opencv2/core/core.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/highgui/highgui.hpp"

#include <iostream>
#include <math.h>
#include <string.h>

using namespace cv;
using namespace std;

int thresh = 50, N = 11;
const char* wndname = "Square Detection Demo";

// helper function:
// finds a cosine of angle between vectors
// from pt0->pt1 and from pt0->pt2
static double angle( Point pt1, Point pt2, Point pt0 )
{
    double dx1 = pt1.x - pt0.x;
    double dy1 = pt1.y - pt0.y;
    double dx2 = pt2.x - pt0.x;
    double dy2 = pt2.y - pt0.y;
    return (dx1*dx2 + dy1*dy2)/sqrt((dx1*dx1 + dy1*dy1)*(dx2*dx2 + dy2*dy2) + 1e-10);
}

// returns sequence of squares detected on the image.
// the sequence is stored in the specified memory storage
static void findSquares( const Mat& image, vector<vector<Point> >& squares )
{
    squares.clear();

    Mat pyr, timg, gray0(image.size(), CV_8U), gray;

    // down-scale and upscale the image to filter out the noise
    pyrDown(image, pyr, Size(image.cols/2, image.rows/2));
    pyrUp(pyr, timg, image.size());
    vector<vector<Point> > contours;

    // find squares in every color plane of the image
    for( int c = 0; c < 3; c++ )
    {
        int ch[] = {c, 0};
        mixChannels(&timg, 1, &gray0, 1, ch, 1);

        // try several threshold levels
        for( int l = 0; l < N; l++ )
        {
            // hack: use Canny instead of zero threshold level.
            // Canny helps to catch squares with gradient shading
            if( l == 0 )
            {
                // apply Canny. Take the upper threshold from slider
                // and set the lower to 0 (which forces edges merging)
                Canny(gray0, gray, 0, thresh, 5);
                // dilate canny output to remove potential
                // holes between edge segments
                dilate(gray, gray, Mat(), Point(-1,-1));
            }
            else
            {
                // apply threshold if l!=0:
                //     tgray(x,y) = gray(x,y) < (l+1)*255/N ? 255 : 0
                gray = gray0 >= (l+1)*255/N;
            }

            // find contours and store them all as a list
            findContours(gray, contours, CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);

            vector<Point> approx;

            // test each contour
            for( size_t i = 0; i < contours.size(); i++ )
            {
                // approximate contour with accuracy proportional
                // to the contour perimeter
                approxPolyDP(Mat(contours[i]), approx, arcLength(Mat(contours[i]), true)*0.02, true);

                // square contours should have 4 vertices after approximation
                // relatively large area (to filter out noisy contours)
                // and be convex.
                // Note: absolute value of an area is used because
                // area may be positive or negative - in accordance with the
                // contour orientation
                if( approx.size() == 4 &&
                    fabs(contourArea(Mat(approx))) > 1000 &&
                    isContourConvex(Mat(approx)) )
                {
                    double maxCosine = 0;

                    for( int j = 2; j < 5; j++ )
                    {
                        // find the maximum cosine of the angle between joint edges
                        double cosine = fabs(angle(approx[j%4], approx[j-2], approx[j-1]));
                        maxCosine = MAX(maxCosine, cosine);
                    }

                    // if cosines of all angles are small
                    // (all angles are ~90 degree) then write quandrange
                    // vertices to resultant sequence
                    if( maxCosine < 0.3 )
                        squares.push_back(approx);
                }
            }
        }
    }
}

// the function draws all the squares in the image
static void drawSquares( Mat& image, const vector<vector<Point> >& squares )
{
    for( size_t i = 0; i < squares.size(); i++ )
    {
        const Point* p = &squares[i][0];
        int n = (int)squares[i].size();
        polylines(image, &p, &n, 1, true, Scalar(0,255,0), 3, CV_AA);
    }

    imshow(wndname, image);
}

int main()
{
    VideoCapture cap;
    cap.open(0);
    Mat frame,image;

    namedWindow( "Square Detection Demo", 1 );
    vector<vector<Point> > squares;

    for(;;)
    {

        cap >> frame;
        if( frame.empty() ){
            break;
        }

        frame.copyTo(image);

        if( image.empty() )
        {
            cout << "Couldn't load image" << endl;
            continue;
        }

        findSquares(image, squares);
        drawSquares(image, squares);

        //imshow("Window", image);

        int c = waitKey(1);
        if( (char)c == 27 )
            break;
    }

    return 0;
} 
```

您会注意到代码是 Webcam 可视化和 OpenCV 2.4.X 提供的正方形代码的简单组合。

但是，我现在要放置的 OpenCV 2.1 版的等效代码要快得多：

```
 #include <cv.h>
#include <highgui.h>

int thresh = 50;
IplImage* img = 0;
IplImage* img0 = 0;
CvMemStorage* storage = 0;

// helper function:
// finds a cosine of angle between vectors
// from pt0->pt1 and from pt0->pt2
double angle( CvPoint* pt1, CvPoint* pt2, CvPoint* pt0 )
{
    double dx1 = pt1->x - pt0->x;
    double dy1 = pt1->y - pt0->y;
    double dx2 = pt2->x - pt0->x;
    double dy2 = pt2->y - pt0->y;
    return (dx1*dx2 + dy1*dy2)/sqrt((dx1*dx1 + dy1*dy1)*(dx2*dx2 + dy2*dy2) + 1e-10);
}

// returns sequence of squares detected on the image.
// the sequence is stored in the specified memory storage
CvSeq* findSquares4( IplImage* img, CvMemStorage* storage )
{
    CvSeq* contours;
    int i, c, l, N = 11;
    CvSize sz = cvSize( img->width & -2, img->height & -2 );
    IplImage* timg = cvCloneImage( img ); // make a copy of input image
    IplImage* gray = cvCreateImage( sz, 8, 1 );

    IplImage* pyr = cvCreateImage( cvSize(sz.width/2, sz.height/2), 8, 3 );
    IplImage* tgray;
    CvSeq* result;
    double s, t;
    // create empty sequence that will contain points -
    // 4 points per square (the square's vertices)
    CvSeq* squares = cvCreateSeq( 0, sizeof(CvSeq), sizeof(CvPoint), storage );

    // select the maximum ROI in the image
    // with the width and height divisible by 2
    cvSetImageROI( timg, cvRect( 0, 0, sz.width, sz.height ));

    //cvSetImageROI( timg, cvRect( 0,0,50, 50 ));

    // down-scale and upscale the image to filter out the noise
    cvPyrDown( timg, pyr, 7 );
    cvPyrUp( pyr, timg, 7 );
    tgray = cvCreateImage( sz, 8, 1 );

    // find squares in every color plane of the image
    for( c = 0; c < 3; c++ )
    {
        // extract the c-th color plane
        cvSetImageCOI( timg, c+1 );
        cvCopy( timg, tgray, 0 );

        // try several threshold levels
        for( l = 0; l < N; l++ )
        {
            // hack: use Canny instead of zero threshold level.
            // Canny helps to catch squares with gradient shading
            if( l == 0 )
            {
                // apply Canny. Take the upper threshold from slider
                // and set the lower to 0 (which forces edges merging)
                cvCanny( tgray, gray, 0, thresh, 5 );
                // dilate canny output to remove potential
                // holes between edge segments
                cvDilate( gray, gray, 0, 1 );
            }
            else
            {
                // apply threshold if l!=0:
                //     tgray(x,y) = gray(x,y) < (l+1)*255/N ? 255 : 0
                cvThreshold( tgray, gray, (l+1)*255/N, 255, CV_THRESH_BINARY );
            }

            // find contours and store them all as a list
            cvFindContours( gray, storage, &contours, sizeof(CvContour),
                CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE, cvPoint(0,0) );

            // test each contour
            while( contours )
            {
                // approximate contour with accuracy proportional
                // to the contour perimeter
                result = cvApproxPoly( contours, sizeof(CvContour), storage,
                    CV_POLY_APPROX_DP, cvContourPerimeter(contours)*0.02, 0 );
                // square contours should have 4 vertices after approximation
                // relatively large area (to filter out noisy contours)
                // and be convex.
                // Note: absolute value of an area is used because
                // area may be positive or negative - in accordance with the
                // contour orientation

                if( result->total == 4 &&
                    cvContourArea(result,CV_WHOLE_SEQ,0) > 1000 &&
                    cvCheckContourConvexity(result) )
                {
                    s = 0;

                    for( i = 0; i < 5; i++ )
                    {
                        // find minimum angle between joint
                        // edges (maximum of cosine)
                        if( i >= 2 )
                        {
                            t = fabs(angle(
                            (CvPoint*)cvGetSeqElem( result, i ),
                            (CvPoint*)cvGetSeqElem( result, i-2 ),
                            (CvPoint*)cvGetSeqElem( result, i-1 )));
                            s = s > t ? s : t;
                        }
                    }

                    // if cosines of all angles are small
                    // (all angles are ~90 degree) then write quandrange
                    // vertices to resultant sequence
                    if( s < 0.3 )
                        for( i = 0; i < 4; i++ )
                            cvSeqPush( squares,
                                (CvPoint*)cvGetSeqElem( result, i ));
                }

                // take the next contour
                contours = contours->h_next;
            }
        }
    }

    // release all the temporary images
    cvReleaseImage( &gray );
    cvReleaseImage( &pyr );
    cvReleaseImage( &tgray );
    cvReleaseImage( &timg );

    return squares;
}

// the function draws all the squares in the image
void drawSquares( IplImage* img, CvSeq* squares )
{
    CvSeqReader reader;
    IplImage* cpy = cvCloneImage( img );
    int i;

    // initialize reader of the sequence
    cvStartReadSeq( squares, &reader, 0 );

    // read 4 sequence elements at a time (all vertices of a square)
    for( i = 0; i < squares->total; i += 4 )
    {

        CvPoint pt[4], *rect = pt;
        int count = 4;

        // read 4 vertices
        CV_READ_SEQ_ELEM( pt[0], reader );
        CV_READ_SEQ_ELEM( pt[1], reader );
        CV_READ_SEQ_ELEM( pt[2], reader );
        CV_READ_SEQ_ELEM( pt[3], reader );

        // draw the square as a closed polyline
        cvPolyLine( cpy, &rect, &count, 1, 1, CV_RGB(0,255,0), 3, CV_AA, 0 );
    }

    // show the resultant image
    cvShowImage( "Squares", cpy );
    cvReleaseImage( &cpy );
}

int main(int argc, char** argv){

     // Crea una ventana llamada Original Image con un tamaño predeterminado.
    cvNamedWindow("Original Image", CV_WINDOW_AUTOSIZE);
    cvNamedWindow("Squares", CV_WINDOW_AUTOSIZE);

    // Crea la conexion con la Webcam.
    CvCapture* capture = cvCreateCameraCapture(0);

    if( !capture ){
        throw "Error when reading steam_avi";
    }

    storage = cvCreateMemStorage(0);
    while(true)
        {

        // Pongo el frame capturado dentro de la imagen originalImg.
        img0 = cvQueryFrame(capture);
        if(!img0){
            break;
        }

        img = cvCloneImage( img0 );

        // find and draw the squares
        drawSquares( img, findSquares4( img, storage ) );

        cvShowImage("Original Image", img0);

        cvReleaseImage(&img);   
        // clear memory storage - reset free space position
        cvClearMemStorage( storage );

        // Espero a que me pulsen el ESC para salir del bucle infinito.
        char c = cvWaitKey(10);
        if( c == 27 ) break;
    }

    //cvReleaseImage(&img); 
    cvReleaseImage(&img0);

    // clear memory storage - reset free space position
        cvClearMemStorage( storage );
    // Destruye la ventana “Original Image”.
    cvDestroyWindow("Original Image");
    cvDestroyWindow("Squares");
    // Libera la memoria utilizada por la variable capture.
    cvReleaseCapture(&capture);
} 
```

我知道我可以使用一个颜色通道来加速 x3，并更改其他参数来加速，但想知道为什么等效代码会给出如此不同的执行时间。

有什么基本的东西我错过了吗？

我已经尝试将工作代码放在每个人都可以尝试的地方，以免浪费任何人的时间与模糊的问题，例如：Opencv 2.4.X 很慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:37:51.010

最后遗漏了 Canny 并检查了正方形的面积是否低于某些值（小于图像面积的 20%），这样就不会检测到不需要的正方形。至于为同一个正方形获得多个结果，目前并不太在意，因为我可以输入给定的正方形作为可能的模板图像进行比较。现在开始识别正方形的图像。感谢克里斯至少阅读了这篇评论（我不能给你分数作为答案，因为它只是一个评论，但无论如何，谢谢你）。

# java - 教科书声称可以在 ctor 中使用 age=age 而不是 this.age = age，这在什么时候是正确的？

> ID：15340747
> 
> 赞同：3
> 
> 时间：2013-03-11T14:11:33.647
> 
> 标签：java

对于这堂课，

```
class Person {
    int age;
    public Person(int age) {
        this.age = age;
    }
} 
```

在我的课本中，作者告诉我写age=age来代替this.age=age也是可以的。

他说，如果参数和数据成员同名，赋值符号的左侧将被视为类的数据成员，右侧是参数。

我的电脑上安装了jdk1.7，age=age之类的代码没有效果。这在哪个版本的 Java 中有效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T14:14:07.687

这本书完全错了，应该更换。使用不同的书。 `age = age`永远不会有任何影响，并希望产生编译器警告。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T14:15:14.470

> 他说，如果参数和数据成员同名，赋值符号的左侧将被视为类的数据成员，右侧是参数。

这在 Sun / Oracle 发布的任何 Java 版本或符合 Java 语言规范的任何版本的任何语言中均无效。

请提供您在其中找到此声明的图书的名称和作者。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-11T14:14:14.940

我从来没有见过这个。至少我确定 Java 1.4 在这方面与 1.7 一样。

坚持使用：

```
this.age = age; 
```

也许教科书提到了这种情况，因为这会起作用。由于没有局部变量`age`，它将分配`customAge`给类字段`age`：

```
class Person {
    int age;
    public Person(int customAge) {
        age = customAge;
    }
} 
```

# python - 在一个字符串中查找多个正则表达式

> ID：15340748
> 
> 赞同：1
> 
> 时间：2013-03-11T14:11:42.107
> 
> 标签：python, regex, python-2.7

假设我们有这个：

```
html = 'http://example.com'
regex = '<(\d{0,2})>'
regex1 = '<span>(.+?)</span>' 
p = re.compile(regex)
p1 = re.compile(regex1) 
```

是否有可能在一个声明中`re.findall`同时使用？`p``p1``findall`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:16:29.243

首先：您通常希望避免使用正则表达式来解析 HTML。您确实想改用 HTML 解析器。BeautifulSoup 可让您搜索包含特定文本的元素（甚至使用正则表达式来匹配 HTML 中的特定方面）

您可以使用管道将正则表达式组合`|`在一个组中：

```
p_or_p1 = re.compile('(?:{}|{})'.format(p, p1)) 
```

# java - 在安卓游戏中按分数对玩家姓名进行排序

> ID：15340755
> 
> 赞同：0
> 
> 时间：2013-03-11T14:12:02.057
> 
> 标签：java, android, sorting, scoring

我正在制作一个拼字游戏应用程序，我想制作一个系统，玩家可以在其中查看他们的分数以及姓名。分数应该从高到低排列。输出应如下所示： **名称** **分数**

```
Kathy   150
Charm   140
Albert  130
Arvin   120
Angelo  110 
```

我正在尝试使用数组来做到这一点，但我很难做到这一点。

```
int score[]= new int[4];
        score[0]= 120;
        score[1]= 130;
        score[2]= 140;
        score[3]= 150;

        String names[] = new String[4];
        names[0]= "albert";
        names[1]= "arvin";
        names[2]= "charm";
        names[3]= "kathy";

        Player[] players = new Player[names.length];
        for(int i = 0; i < names.length; i++) {
            players[i] = new Player(names[i], score[i]);

            show.setText((CharSequence) players[i]);

        }

        Arrays.sort(players, new PlayerComparator());

   class PlayerComparator implements Comparator<Player> {
 public int compare(Player p1, Player p2) {
    return p1.getScore() < p2.getScore() ? -1
            : p1.getScore() > p2.getScore() ? 1 : 0;

}
}

public class Player {

private String name;

private int score;

public Player(String name, int score) {
    this.name = name;
    this.score = score;
}

public String getName() {
    return name;
}

public int getScore() {
    return score;
}

public String toString() {
    return "name=" + name + "; score=" + score;
} 
```

}

任何人都可以帮助我使用什么并指导我实现这个目标吗？非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:19:38.383

1.  制作一个`class Score implements Comparable`包含用户名和数字的。
2.  实现`compareTo()`for `Score`，`Comparable`接口需要那个。
3.  将所有分数插入到例如`ArrayList`.
4.  打电话[`Collections.sort(yourList)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#sort%28java.util.List%29)。
5.  要开心 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:50:56.787

如果要使用数组来执行此操作，则需要跟踪 2 个单独的数组，它们都是整数类型，第一个用于分数，第二个用于它们的位置。使用第二个数组的值来跟踪每个玩家及其各自的得分。根据您使用的语言，通常可以使用标准库中的排序函数和算法来执行从最高到最低的排序或其他排序。

如果您使用的是 Java，我建议您使用 HashMap [http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html) 这将消除使用 2 个数组并且更简单我认为这是为什么我会建议考虑使用 HashMap 它会使其更简单 希望这会有所帮助

# c# - '查询结果不能多 次列举'

> ID：15340762
> 
> 赞同：1
> 
> 时间：2013-03-11T14:12:15.190
> 
> 标签：c#, wpf, linq

我有一个使用 Linq to Sql 访问的 sql 服务器过程。当我执行查询时，我收到错误“查询结果不能多​​次枚举”。在 txtName 文本框中输入参数，结果显示在 lstName 列表视图中。

```
 public void GetSearchString()
 {
     Data.Database.FRCDatabaseDatacontext context = 
         new Data.Database.FRCDatabaseDatacontext();
     var result = context.GetSearchProcedure(txtName.Text);
     foreach (GetSearchProcedureResult search in result)
         if ( search.UserGuid == 
               Workspace.Instance.ActiveUser.CurrentUserActiveDirectoryGuid)
         {
             lstName.ItemsSource = result.ToList();
         }
 } 
```

此方法将返回每个结果，但我想返回 guid 匹配的结果。

谢谢！

```
Data.Database.FRCDatabaseDatacontext context = 
    new Data.Database.FRCDatabaseDatacontext();
var result = context.GetSearchProcedure(txtName.Text);
lstName.ItemsSource = result.ToList(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T14:22:51.483

您正在尝试多次枚举数据 - 一次在 中`foreach`，然后再次使用`.ToList()`for each match `UserGuid`，这会导致错误。

也许这个 LINQ 选择语句会有所帮助：

```
public void GetSearchString()
{
    Data.Database.FRCDatabaseDatacontext context = new Data.Database.FRCDatabaseDatacontext();

    lstName.ItemsSource = (from s in context.GetSearchProcedure(txtName.Text) 
                  where s.UserGuid == Workspace.Instance.ActiveUser.CurrentUserActiveDirectoryGuid
                  select s).ToList();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T14:16:23.447

```
public void GetSearchString()
  {
      var context = new Data.Database.FRCDatabaseDatacontext();
      var result = context.GetSearchProcedure(txtName.Text);
      var itemSource = result.ToList();

        foreach (GetSearchProcedureResult search in itemSource)
        if (search.UserGuid == Workspace.Instance.ActiveUser.CurrentUserActiveDirectoryGuid)
        {
            lstName.ItemsSource = itemSource;
        }
    } 
```

无论如何，最好将参数传递给过程，而不是在代码中重新计算它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T14:16:30.250

调用`.ToList`IQueryable 会导致它被具体化（即，查询被传递给后端提供者）。显然，这可能是您宁愿只做一次的事情，因为这可能是一项昂贵的操作。这就是错误试图告诉你的。

如果您只调用`.ToList`一次并存储结果，问题*应该*会消失。

# java - 在eclipse中为整个包生成equals()

> ID：15340770
> 
> 赞同：4
> 
> 时间：2013-03-11T14:12:38.293
> 
> 标签：java, eclipse

在 Eclipse 中自动生成`equals()`是一个很棒的特性。但是，为整个包生成它仍然很痛苦。反正有没有将它生成到整个包中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:03:29.553

我不确定是否有任何方法可以应用于`Generate hashCode and equals`整个包裹。但是有更好的方法来打开每个文件并应用`Generate hashCode and equals`.

使用[lombok](http://projectlombok.org)，您可以通过简单地为类添加注释来添加`equals()`和。`hashCode()``@EqualsAndHashCode`

`Generate hashCode and equals`在 Eclipse 中是一个很好的特性，但是，当您修改类时，您必须维护（重新生成）生成的代码，特别是当您添加或删除类的字段时。

如果您使用 lombok 和`@EqualsAndHashCode`，则不必重新生成自动生成的方法。当您修改类（添加或删除字段）并保存它（这意味着 Eclipse 编译修改的文件）时，lombok 会自动重新生成`equals()`and`hashCode()`方法。

# c# - 如何构建 ListView 并从代码隐藏中填充它

> ID：15340771
> 
> 赞同：0
> 
> 时间：2013-03-11T14:12:43.383
> 
> 标签：c#, asp.net

我想`ListView`从代码隐藏中填写我的内容，*并*想知道如何构建这些字段。我看到了[这个](https://stackoverflow.com/q/11407221/1919644)`ListView`例子，如果构建s 字段的唯一方法是使用表，我现在想这样做。如果不是，那么另一种方法是什么？我尝试只填充`ListView`数据源，如下所示：

```
ListView1.DataSource = ds;
ListView1.DataBind(); 
```

但它给了我一个错误：

> 必须在 ListView 'ListView1' 上定义 ItemTemplate。

最好的使用方法是`ListView`什么？该错误仅在我使用时发生`ListView1.DataBind();`

PS：我只需要显示**一行**，所以如果有人有比 更好的控制`ListView`，我正在阅读。

**更新**

现在我正在尝试这样：

```
<asp:ListView ID="ListView1" runat="server">
    <LayoutTemplate>
       <table border="0" cellpadding="1">
           <tr style="background-color: #E5E5FE">
              <th align="left"><asp:LinkButton ID="lnkResp" runat="server"></asp:LinkButton></th>
              <th align="left"><asp:LinkButton ID="lnkProj" runat="server"></asp:LinkButton></th>
              <th align="left"><asp:LinkButton ID="lnkFunc" runat="server"></asp:LinkButton></th>
              <th<></th>
           </tr>
       </table>
    </LayoutTemplate>
    <ItemTemplate>
       <tr>
          <td><asp:Label runat="server" ID="lblResp"><%#Eval("responsavel") %></asp:Label></td>
          <td><asp:Label runat="server" ID="lblProj"><%#Eval("projeto") %></asp:Label></td>
          <td><asp:Label runat="server" ID="lblFunc"><%#Eval("funcionalidade") %></asp:Label></td>
       </tr>
     </ItemTemplate>
</asp:ListView> 
```

但是我遇到了一个**新**错误：

`An item placeholder must be specified on ListView 'ListView1'.
Specify an item placeholder by setting a control's ID property to "itemPlaceholder".
The item placeholder control must also specify runat="server".`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T14:47:19.813

在您的中`LayoutTemplate`，您需要`<asp:PlaceHolder runat="server" ID="itemPlaceholder" />`在`table`标签中添加一个。

```
 <LayoutTemplate>
   <table border="0" cellpadding="1">
       <tr style="background-color: #E5E5FE">
          <th align="left"><asp:LinkButton ID="lnkResp" runat="server"></asp:LinkButton></th>
          <th align="left"><asp:LinkButton ID="lnkProj" runat="server"></asp:LinkButton></th>
          <th align="left"><asp:LinkButton ID="lnkFunc" runat="server"></asp:LinkButton></th>
          <th<></th>
       </tr>
       <asp:PlaceHolder runat="server" ID="itemPlaceholder" />
   </table>
</LayoutTemplate> 
```

# python - SimpleListFilter 中的 Django 管理员重定向

> ID：15340772
> 
> 赞同：0
> 
> 时间：2013-03-11T14:12:44.600
> 
> 标签：python, django, django-admin

是否可以在 SimpleListFilter 中创建一个重定向。我尝试用户 django 管理过滤器并重定向到 url。有没有办法这样做？

```
class ListFilter(SimpleListFilter):
    title = "test"

    def lookup(self, request, model_admin):
        return (
            ('1t', 'First test'),
        )

    def queryset(self, request, queryset):
        if self.value() == '1t':
            redirect('/admin/test/3test/')

class TestAdmin(admin.ModelAdmin):
    list_filter(ListFilter,) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:04:39.720

Short answer: No. The `queryset` method should return a filtered queryset, not a http response.

If you really want to add a link in the filter sidebar, you can hack it like this:

```
class ListFilter(SimpleListFilter):
    title = "test"
    template = 'admin_sidebar_links.html'

    def lookups(self, request, model_admin):
        return (,)

    def queryset(self, request, queryset):
        return queryset 
```

Then create an html file in your templates directory called 'admin_sidebar_links.html', containing something along these lines:

```
<h3>Filter Title</h3>
<ul>
    <li><a href="/admin/test/3test/">Link</a></li>
</ul> 
```

# sql - 如何在 rails 3.2.12 中使用字符串变量进行查询？

> ID：15340777
> 
> 赞同：0
> 
> 时间：2013-03-11T14:12:56.877
> 
> 标签：sql, ruby, ruby-on-rails-3

我们想将 rails 查询字符串和表名都存储在 db 中，并在运行时检索它们以执行。这是场景：

从表中检索活动`customer`记录。`customers`假设我们有 2 个变量定义为：

```
table_name = 'Customer'
query_string = ':active => true' 
```

在 Rails 中，查询可能是：

```
records = Customer.where(:active => true) 
```

现在将表名和查询字符串存储在变量 table_name 和 query_string 中，是否可以用 2 个变量组合查询字符串，例如：

```
 records = table_name.where(query_string) ? 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:17:01.660

您可以这样做，但通常不建议将字符串评估为哈希值。此外，`table_name`是一个不幸的变量名称，因为您实际上正在存储类名（表将是“客户”）。无论如何，您缺少的是这些字符串的评估：

```
records = class_name.constantize.where(instance_eval(query_string)) 
```

请注意，`instance_eval`在用户输入的字符串上运行对于应用程序的安全性和健康来说可能是灾难性的。小心使用，并坚持构建一个实际的哈希值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T21:28:10.367

的定义`instance_eval`是：`Evaluates a string containing Ruby source code, or the given block, within the context of the receiver (obj).`

评估查询字符串的另一种方法是包含`where`在字符串中，例如：

```
table_name = 'Customer'
query_string = 'where(:active => true)' 
```

然后可以通过以下方式检索记录：

```
records = table_name.constantize.instance_eval(query_string) 
```

通过放入`where`字符串，我们可以使用 instance_eval 的全部功能，而不是像上面的问题那样只返回源代码`where`。

# heroku - 通往heroku数据库的隧道？

> ID：15340779
> 
> 赞同：1
> 
> 时间：2013-03-11T14:13:05.643
> 
> 标签：heroku, heroku-toolbelt

我在 heroku 上有一个 django 项目，它在 heroku (ec2) 上使用 postgre 数据库。一切正常，但是在一台计算机上我无法访问 postger 端口 5432，所以我需要设置从我的计算机到那里的隧道。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:29:13.297

您将需要对中间主机进行某种访问才能使其成为可能。Heroku 不支持开箱即用。

[Corkscrew](http://www.agroman.net/corkscrew/)通过 HTTP 代理执行 SSH。然后你可以打开像[tsocks](http://tsocks.sourceforge.net/)这样的透明代理。这样您就不必了解防火墙。

这一切都适用于 Linux，也可能适用于 Mac。在 Windows 上，您可以通过 Putty 管道连接。

# python - Python Numpy 数据类型性能

> ID：15340781
> 
> 赞同：28
> 
> 时间：2013-03-11T14:13:07.610
> 
> 标签：python, performance, types, numpy, benchmarking

所以我做了一些测试，得到了奇怪的结果。

代码：

```
import numpy as np
import timeit

setup = """
import numpy as np
A = np.ones((1000,1000,3), dtype=datatype)
"""

datatypes = "np.uint8", "np.uint16", "np.uint32", "np.uint64",  "np.float16", "np.float32", "np.float64"

stmt1 = """
A = A * 255
A = A / 255
A = A - 1
A = A + 1
"""
#~ np.uint8 : 1.04969205993
#~ np.uint16 : 1.19391073202
#~ np.uint32 : 1.37279821351
#~ np.uint64 : 2.99286961148
#~ np.float16 : 9.62375889588
#~ np.float32 : 0.884994368045
#~ np.float64 : 0.920502625252

stmt2 = """
A *= 255
A /= 255
A -= 1
A += 1
"""
#~ np.uint8 : 0.959514497259
#~ np.uint16 : 0.988570167659
#~ np.uint32 : 0.963571471946
#~ np.uint64 : 2.07768933333
#~ np.float16 : 9.40085450056
#~ np.float32 : 0.882363984225
#~ np.float64 : 0.910147440048

stmt3 = """
A = A * 255 / 255 - 1 + 1
"""
#~ np.uint8 : 1.05919667881
#~ np.uint16 : 1.20249978404
#~ np.uint32 : 1.58037744789
#~ np.uint64 : 3.47520357571
#~ np.float16 : 10.4792515701
#~ np.float32 : 1.29654744484
#~ np.float64 : 1.80735079168

stmt4 = """
A[:,:,:2] *= A[:,:,:2]
"""
#~ np.uint8 : 1.23270964172
#~ np.uint16 : 1.3260807837
#~ np.uint32 : 1.32571002402
#~ np.uint64 : 1.76836543305
#~ np.float16 : 2.83364821535
#~ np.float32 : 1.31282323872
#~ np.float64 : 1.44151875479

stmt5 = """
A[:,:,:2] = A[:,:,:2] * A[:,:,:2]
"""
#~ np.uint8 : 1.38166223494
#~ np.uint16 : 1.49569114821
#~ np.uint32 : 1.53105315419
#~ np.uint64 : 2.03457943366
#~ np.float16 : 3.01117795524
#~ np.float32 : 1.51807271679
#~ np.float64 : 1.7164808877

stmt6 = """
A *= 4
A /= 4
"""
#~ np.uint8 : 0.698176392658
#~ np.uint16 : 0.709560468038
#~ np.uint32 : 0.701653066443
#~ np.uint64 : 1.64199069295
#~ np.float16 : 4.86752675499
#~ np.float32 : 0.421001675475
#~ np.float64 : 0.433056710408

stmt7 = """
np.left_shift(A, 2, A)
np.right_shift(A, 2, A)
"""
#~ np.uint8 : 0.381521115341
#~ np.uint16 : 0.383545967785
#~ np.uint32 : 0.386147272415
#~ np.uint64 : 0.665969478824

for stmt in [stmt1, stmt2, stmt3, stmt4, stmt5, stmt6, stmt7]:
    print stmt
    for d in datatypes:
        s = setup.replace("datatype", d)
        T = timeit.Timer(stmt=stmt, setup=s)
        print d,":", min(T.repeat(number=30))
    print
print 
```

为什么 float16 这么慢？为什么 float32 这么快？它通常比整数操作更快。

如果您有任何相关的性能提示，我将很高兴听到它们。

这是 Windows 8 64 位上的 python 2.6.6 32 位。Numpy 1.6、Numpy 1.7 的数字类似。现在将测试 MKL 优化版本：[http ://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy](http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy)

编辑：事实证明，MKL 版本在某些浮点情况下稍快，但有时对于整数运算要慢得多：

```
stmt2 = """
A *= 255
A /= 255
A -= 1
A += 1
"""
#np1.6
#~ np.uint8 : 0.959514497259
#~ np.uint16 : 0.988570167659
#~ np.uint32 : 0.963571471946
#~ np.uint64 : 2.07768933333
#~ np.float16 : 9.40085450056
#~ np.float32 : 0.882363984225
#~ np.float64 : 0.910147440048

# np1.7
#~ np.uint8 : 0.979
#~ np.uint16 : 1.010
#~ np.uint32 : 0.972
#~ np.uint64 : 2.081
#~ np.float16 : 9.362
#~ np.float32 : 0.882
#~ np.float64 : 0.918

# np1.7 mkl
#~ np.uint8 : 1.782
#~ np.uint16 : 1.145
#~ np.uint32 : 1.265
#~ np.uint64 : 2.088
#~ np.float16 : 9.029
#~ np.float32 : 0.800
#~ np.float64 : 0.866 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-11T14:33:43.810

我猜半精度算术（float16）必须由numpy“模拟”，因为在底层C语言（以及适当的处理器指令）中没有相应的类型。另一方面，使用本机数据类型可以非常有效地完成单精度 (float32) 和双精度 (float64) 操作。

关于单精度运算的良好性能：现代处理器具有用于矢量化浮点运算（例如 AVX）的高效单元，因为它也是良好的多媒体性能所必需的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-11T14:38:39.037

大多数常见的 CPU 不直接支持 16 位浮点数（尽管显卡供应商显然参与了这种数据类型，所以我希望 GPU 最终会支持它）。我希望他们以相对缓慢的方式被模仿。谷歌告诉我[float16 曾经依赖于硬件](http://mail.scipy.org/pipermail/numpy-discussion/2008-January/030672.html)，有些人想为不支持它的硬件模拟它，尽管我没有找到任何关于这是否真的发生的信息。

另一方面，32 位浮点数不仅是本机支持的，您还可以使用 SIMD 指令集扩展对它们进行矢量化处理，这大大减少了您进行基准测试的那种操作的开销。例外是对数据进行混洗，但在这种情况下，float32 与 int32 相当，两者都可以使用相同的 SIMD 指令来加载和存储更大的内存块。

虽然也有用于整数数学的 SIMD 指令，但它们不太常见（例如，SEE 在比浮点版本更高的版本中引入它们）并且通常不太复杂。我的猜测是（您的 NumPy 构建）没有对您来说较慢的操作的 SIMD 实现。或者，整数运算可能没有那么优化：浮点数用于许多性能很重要的易于矢量化的应用程序（例如图像/媒体/视频编码和解码），因此它们可能会更加优化。

# php - 为方法参数设置允许的变量类型

> ID：15340782
> 
> 赞同：0
> 
> 时间：2013-03-11T14:13:11.290
> 
> 标签：php, variables

在某些编程语言（例如 Java 或 C#）中，允许程序员设置允许的输入变量类型。我使用 PHP，我也想这样做以避免将错误的数据传递给我的方法/函数。

我的代码：

```
public static function generateFiles(array $data, Custom_Pager $pager)
{...} 
```

为什么允许，我不能这样写：

```
public static function generateFiles(array $data, Custom_Pager $pager, int $limit, string $text)
{ ... } 
```

有什么方法可以标准化我上面介绍的第一种和第二种方法声明？如果不是，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:15:41.440

PHP 是一种[弱类型](http://en.wikipedia.org/wiki/Strong_and_weak_typing)语言，所以这是不可能的。

PHP5.1 引入了[Type](http://php.net/manual/en/language.oop5.typehinting.php) Hinting ，虽然它有它的局限性：

> 类型提示不能用于标量类型，例如 int 或 string。特征也是不允许的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:20:02.603

[是的，您可以使用类型提示](http://php.net/manual/en/language.oop5.typehinting.php%20type%20hinting)将参数强制为某种类型，但它显然不适用于原始类型。

但是，如果参数值不符合您的期望，您可以在方法中引发异常。

```
if (!is_int($param))
    throw new Exception('param must be int.'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:28:59.403

我做了一个强制类型提示的函数。它的工作原理是这样的：

```
function getVar($var,$type) {
switch($type) { 
 case "int":
  return (int)$var;
 case "string":
  return (string)$var;
}
} 
```

您可以继续使用所有其他类型。您也可以使用相同的方法检查 is_int、is_string、is_bool 等变量...

# python-2.7 - 在不导入 Tkinter 的情况下使用 tkMessageBox

> ID：15340784
> 
> 赞同：1
> 
> 时间：2013-03-11T14:13:13.447
> 
> 标签：python-2.7, tkinter, tkmessagebox

我正在编写一个模块，我想支持弹出对话框来指示错误，但我不需要或不想要根窗口（因为我希望模块独立于主 GUI 并且可以在多个调用应用程序之间共享） . 我试着简单地这样做：

```
import tkMessageBox
[...stuff...]
if (errorCondition): tkMessageBox.showwarning("My Module","That won't work!") 
```

...但是当我运行它时，消息框旁边会出现一个根窗口。我知道这个`withdraw()`方法，但是因为我从来没有导入过`Tkinter`自己，也从来没有实例化过`Tkinter.Tk()`，所以我没有对象可以使用`withdraw()`。

一个可行的替代方法是继续导入`Tkinter`，所以我可以自己创建根窗口，然后创建`withdraw()`它：

```
import Tkinter
import tkMessageBox
root = Tkinter.Tk()
root.withdraw()
[...stuff...]
if (errorCondition): tkMessageBox.showwarning("My Module","That won't work!") 
```

...但即使这样可行，引入一个模块并实例化一个对象似乎很笨拙，以便我可以摆脱它。另外，我不想混淆这个根和调用应用程序中的“真实”根之间的东西。

回到第一个例子，很明显它`tkMessageBox`在做一些事情来自己创建根窗口。有什么办法可以获取对那个根窗口的引用，这样我就可以`withdraw()`了？

（环境是 Windows 7 和 Python 2.7.3。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:59:27.040

tkMessageBox 建立在 Tkinter 之上，因此不可能简单地摆脱它：模块的所有函数，如`tkMessageBox.showwarning`，都是函数的包装器`_show`。此函数创建一个`Message`对象，根据您使用的对话框类型具有不同的参数。`Message`是 的子类`Dialog`，而后者又是 的子类`Toplevel`。

`Toplevel`是一个 Tkinter 小部件，因此该模块的第一行（除了注释）`Dialog`定义为：

```
from Tkinter import * 
```

您的第二种解决方案是正确使用 tkMessageBox 的唯一方法，因为您被迫（至少在内部）使用 Tkinter。

**参考：**

*   [tkMessageBox 源码](http://hg.python.org/cpython/file/da3f4774b939/Lib/lib-tk/tkMessageBox.py)
*   [tkSimpleDialog 的源代码](http://hg.python.org/cpython/file/da3f4774b939/Lib/lib-tk/tkSimpleDialog.py)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T12:55:46.623

**注意**：tkMessageBox 不使用 tkSimpleDialog，它使用 tkCommonDialog。tkCommonDialog 的代码在 [这里](http://coverage.livinglogic.de/Lib/lib-tk/tkCommonDialog.py.html)

# .htaccess - 如何重写脚本并使用 .htaccess 从该脚本重定向，同时避免无限循环

> ID：15340785
> 
> 赞同：2
> 
> 时间：2013-03-11T14:13:21.383
> 
> 标签：.htaccess, url, redirect, url-rewriting

我想让我网站上的所有 URL 都由一个脚本处理。所以我输入了这样的重写规则：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) /myscript.php?p=$1 [L] 
```

但我不想允许在其中实际包含“myscript.php”的 URL 上访问我的脚本，所以我想将它们重定向回主站点：

```
Redirect 301 /myscript.php http://example.com/ 
```

问题是，如果我将这两个规则都放入我的 .htaccess 文件中，则会导致无限循环。如何让它们同时工作？

我还希望能够重定向以下内容：

```
/myscript.php?p=foo -> /foo 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T14:27:37.613

你可以设置一个环境变量

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !myscript\.php
RewriteRule (.*) /myscript.php?p=$1 [L,E=LOOP:1] 
```

并在您的第二条规则中进行测试

```
RewriteCond %{ENV:REDIRECT_LOOP} !1
RewriteRule ^myscript\.php$ / [R,L] 
```

永远不要在启用的情况下进行测试，有关详细信息`301`，请参阅此答案[提示调试 .htaccess 重写规则](https://stackoverflow.com/a/9204355/1741542)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-12T21:59:50.110

使用环境变量是完全可以的，但是，您不需要自己手动设置此环境变量。Apache 提供了可用于此目的的`REDIRECT_STATUS` *环境变量。*

`REDIRECT_STATUS`在初始请求中为空（或未设置）。它设置为`200`在第一次（成功）内部重写时。或者出现错误时的其他一些 HTTP 状态代码（`404`等）。

因此，我们可以简单地检查 that is empty 而不是检查 that `REDIRECT_LOOP`is *not* ，以确保我们正在测试初始请求而不是重写请求。例如：`1``REDIRECT_STATUS`

```
RewriteCond %{ENV:REDIRECT_STATUS} ^$
RewriteRule ^myscript\.php$ / [R,L] 
```

（请注意，它只是`REDIRECT_STATUS`，请求开始时没有`STATUS`变量。）

* * *

> ```
> RewriteCond %{REQUEST_FILENAME} !-f
> RewriteCond %{REQUEST_FILENAME} !-d
> RewriteCond %{REQUEST_URI} !myscript\.php
> RewriteRule (.*) /test/myscript.php?p=$1 [L,E=LOOP:1] 
> ```

*旁白：*`RewriteCond`检查的指令`REQUEST_URI`在这里并没有真正做任何事情。如果第一个条件为真（即它不是文件），那么这个条件也必须为真。但是，可以通过*首先*包含此条件来优化它。这将避免对*每个*请求（包括重写的请求）进行文件检查。例如：

```
RewriteCond %{REQUEST_URI} !^/test/myscript\.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) /test/myscript.php?p=$1 [L] 
```

或者，您可以在此规则之前包含一个预检查（异常），而不是在`myscript.php`请求时停止处理：

```
RewriteRule ^test/myscript\.php$ - [L] 
```

但是，如果您这样做，那么上述规范重定向*必须*出现*在*这些规则之前，否则它们将永远不会被处理。（无论如何，通常最好将规范重定向放在首位。）

# jquery - .html() 不在 jquery 中显示结果

> ID：15340786
> 
> 赞同：1
> 
> 时间：2013-03-11T14:13:22.150
> 
> 标签：jquery, google-maps, jquery-gmap3

这是代码：

```
$(function () {

  $("#test").gmap3({
    marker: {
      latLng: [46.578498, 2.457275],
      options: {
        draggable: true
      },
      events: {
        dragend: function (marker) {
          var position = (marker.getPosition());
          //alert (position)
          //alert($("#position").html(position));
          //alert($("#map").append('position: ',position));
          $("#map").append(marker.getPosition());
        }

      }
    },
    map: {
      options: {
        zoom: 5
      }
    }
  });
}); 
```

这是用于谷歌地图工作的 gmap3，问题在这里：

```
 dragend: function (marker) {
     var position = (marker.getPosition());
     $("#map").html(position);
 } 
```

html:

```
<div id="map" > </div>
<div id="position" > </div> 
```

当使用警报时正确显示位置编号，但不显示在 div 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:21:06.207

它是一个`typeof Object`，尝试使用，`$("#map").html(position.toString());`所以你应该得到一个输出。

此外，您可以不`var position = marker.getPosition();`使用额外的括号。干杯。

# c# - 如何在 web api 中重建返回类型对象

> ID：15340791
> 
> 赞同：1
> 
> 时间：2013-03-11T14:13:40.300
> 
> 标签：c#, .net, asp.net-mvc, json, asp.net-web-api

鉴于我的控制器中有以下 web api 方法

```
 public HttpResponseMessage PostGrantAccess(GrantAccessRequest grantAccessRequest)
    {
        var deviceId = grantAccessRequest.DeviceId;

        var grantAccessResponse = new GrantAccessResponse()
            {
                Status = "OK"
            };
        var response = Request.CreateResponse<GrantAccessResponse>(HttpStatusCode.OK, grantAccessResponse);
        return response;
    } 
```

客户端调用代码：

```
using (var client = new HttpClient())
{
    client.BaseAddress = new Uri("http://localhost:55208/");

    var request = new GrantAccessRequest { DeviceId = "bla" };
    var response = client.PostAsJsonAsync("api/accesspanel", request).Result;
    if (response.IsSuccessStatusCode)
    {
        var uri = response.Headers.Location;
    }
} 
```

我如何回到`GrantAccessResponse`客户那里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T14:19:05.497

```
response.Content.ReadAsAsync<GrantAccessResponse>() 
```

# c# - 如何更改 TFS 中的解决方案结构？

> ID：15340797
> 
> 赞同：1
> 
> 时间：2013-03-11T14:13:59.493
> 
> 标签：c#, visual-studio-2010, projects-and-solutions, code-organization

如何重组当前由源代码管理维护的解决方案？我需要创建几个文件夹并将现有项目移动到文件夹和另一个文件夹以维护依赖项等。

那么，我应该对源代码管理本身进行更改吗？还是从我的本地机器？我面临着在本地进行更改（我将项目映射到源代码控制）和同步（签入）更改的困难，因为结构本身已被完全修改。

所以我认为必须在源代码控制中进行更改？请建议我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:22:50.053

**由于以下几个原因，在 TFS 中更容易做到这一点：**

*   您将创建一个已移动或重命名的历史更改集，与在本地执行相比，您将被迫添加/删除
*   TFS 将自动移动您机器上的文件夹并更新映射路径。
*   如果您还需要重命名任何内容（您没有提到，但它可以被视为代码组织的一部分），TFS 还会在您重命名项目时适当地更新解决方案文件，因此您不必删除和重新添加项目到您的包含重命名项目的解决方案。

唯一需要注意的是，您通常会有文件和文件夹，例如`bin`不在`obj`TFS 中的文件夹，这些文件和文件夹不会被 TFS 移动，留下半个空目录。您将需要在您的机器上手动清理它们。

# vba - 将 2 个字段连接到另一个字段时，格式不起作用

> ID：15340799
> 
> 赞同：0
> 
> 时间：2013-03-11T14:14:01.367
> 
> 标签：vba, ms-access

我有一个名为 tblSource 的表，其中包含一个“出生月份”字段和一个“出生日期”字段。这些被格式化为数字 - 00，例如 March 将是 03。这些在该表中看起来很好。

现在我要做的是将这些值连接到第二个表 tblTarget 中称为 DOB 的字段中。它的格式是 MMDD，表示为 0000，所以 3 月 3 日应该显示为 0303。这就是我遇到问题的地方 - 3 月 3 日的 DOB 实际上显示为 0033。

这是我正在使用的查询中的 SQL：

```
INSERT INTO tblTarget ( [NABP-ePID], DOB )
SELECT tblSource .[NABP e-profile ID], tblSource .[Month of Birth] & tblSource .[Day of Birth] AS DOB
FROM tblSource 
WHERE tblSource .[Certification Type]='Pharmacist' Or tblSource .[Certification Type]='Pharmacy Technician'; 
```

目标表（0000）的格式有问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:27:22.277

我解决了这个问题 - 问题在于，如果您将字段指定为数字，它将切断任何前面的零，因为它们不是必需的。

例如，03 将表示为 3，因此当您将 03（三月）连接到 03（第三天）时，您将得到 33。如果目标字段的格式为 0000 - 您基本上提供了一些填充 - 因此 33 将显示为 0033 .

希望这对其他人有帮助。

# php - 如何让 msnbot 不会落入我的机器人陷阱？

> ID：15340801
> 
> 赞同：2
> 
> 时间：2013-03-11T14:14:08.380
> 
> 标签：php, html, bing, nofollow

是否有另一种方法告诉 Bing 不要抓取/传递/单击/输入某个链接，例如 google 的 rel=nofollow？

msnbot/2.​​0b 一直被困在我的机器人陷阱中。它不遵守锚标签 rel="nofollow"。

限制：

*   我无法添加到 robots.txt 的链接，因为该链接是动态参数键，即 anypage.php?xirh398。每个会话的密钥都是唯一的，每 5 分钟更改一次。
*   我不能使用元标记，因为陷阱不是页面。
*   我不能使用 HTTP 标头，因为那时机器人已经被禁止。
*   我不想不断更新白名单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:42:08.520

> 它不遵守锚标签 rel="nofollow"。

`nofollow`意思是“不要在搜索结果中重视这个链接”。这并不意味着“这不是一个真正的链接，不要关注它”。（是的，这是不直观的）。

如果您希望 Good Bots 远离您网站的一部分，请[使用 a`robots.txt`](http://www.robotstxt.org/robotstxt.html)告诉他们。

# sql - 考虑 CAP 定理和数据范式的最佳数据库后端

> ID：15340804
> 
> 赞同：0
> 
> 时间：2013-03-11T14:14:14.777
> 
> 标签：sql, nosql, distributed-computing

离开性能观点，我将把我的问题集中在 CAP 定理上，以及在寻找最佳解决方案时它应该如何重要。

我的数据模式很简单，只是一组*id、timestamp、value*元组。该值仅在第一次写入，之后仅被读取。

我应该尝试*分区*和*可用性*类型的后端吗？像[卡桑德拉](http://cassandra.apache.org/)

# ios - 使用布局约束调整 UICollectionView 的大小。节标题移动

> ID：15340805
> 
> 赞同：1
> 
> 时间：2013-03-11T14:14:14.847
> 
> 标签：ios, ipad, cocoa-touch, uicollectionview

我在许多其他视图之间有一个 UICollectionView，这些都是使用约束布局的，其中集合视图的高度是在其他视图的所有高度和它们之间的间隙之后的剩余空间。

有时，集合下方的视图之一会放大，因此集合视图会变短。

这按我的预期工作，除了部分标题（补充视图）的位置随着视图缩小而向上移动相同的量，但数据单元格保持在同一个位置。所以现在标题与单元格重叠，并且它们曾经存在的间隙。

一旦它们被滚动出屏幕或设备被旋转，这就是固定的，但我无法弄清楚如何阻止它发生

编辑：

我只是尝试了另一种方式，并增加了集合视图上方的视图大小，现在单元格在缩小时向下移动，并且标题保持固定。

似乎单元格相对于视图的顶部定位，而标题相对于视图可见部分的底部定位，这有点奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:58:51.357

我想出的答案是：

找到一些发送`invalidateLayout`到 collectionViewLayout 的方法

或者

创建一个 collectionViewFlowLayout 的子类（这是我使用的布局类型）

```
- (BOOL)shouldInvalidateLayoutForBoundsChange:(CGRect)newBounds
{
  return YES;
} 
```

但这最终被包含在调整大小动画中，并且从情节提要中复制所有单元格和标题大小等似乎需要做更多的工作。

# javascript - 循环遍历字符串并替换特定值？Javascript

> ID：15340807
> 
> 赞同：0
> 
> 时间：2013-03-11T14:14:17.220
> 
> 标签：javascript, html, loops

所以我正在用 html5/javascript 编写一个在线 mad lib 应用程序，截至目前我个人删除了我希望用户替换的单词，并注入了它们的值。我想让程序循环遍历一个字符串（故事），并用他们输入的单词替换我在数组中每种情况下选择的单词。例如，如果我希望 Noun1 是单词“hill”并且他们为 Noun1 输入的单词是“ferret”，那么每次故事会说“hill”时，它将被替换为“ferret”。使用字符串和数组是最好的做法还是有更好的方法？你介意告诉我如何在java-script中循环字符串以及如何替换值吗？

这是我目前拥有的。

```
 function makeML(){
   //get variables from form
   var firstNoun = window.document.myForm.txtfirstNoun.value;
   var secondNoun = document.myForm.txtsecondNoun.value;
   var firstVerb = document.myForm.txtfirstVerb.value;
   var thirdNoun = document.myForm.txtthirdNoun.value;
   var fourthNoun = document.myForm.txtfourthNoun.value;
   var secondVerb = document.myForm.txtsecondVerb.value;
   var firstBody = document.myForm.txtfirstBody.value;
   var story = "";
   story = "Hansel and Gretel sat by the " ;
   story += firstNoun;
   story += ". and when noon came, each ate a little piece of ";
   story += secondNoun;
   story += ", and as they heard the  ";
   story += firstVerb;
   story += " of the wood-axe, they believed that their father was near. It was not the  axe; however, but a ";
   story += thirdNoun;
   story += " which he had fastened to a ";
   story += fourthNoun;
   story += " which the wind was blowing backwards and forwards. And as they had been ";
   story +=  secondVerb; 
   story += " such a long time, their ";
   story +=  firstBody; 
   story += " closed with fatigue, and they fell fast asleep." 

   story += "!\"  \nThe End.... or is it."

   document.myForm.txtStory.value = story; 
```

我还有一点，但没有必要展示，除非你们出于任何原因需要它来更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:35:02.427

要替换 JavaScript 字符串中的值，可以使用 .replace() 方法。它有两个参数——查找匹配的正则表达式或字符串，以及替换匹配的新字符串。更详细的，您可以在[http://www.w3schools.com/jsref/jsref_replace.asp](http://www.w3schools.com/jsref/jsref_replace.asp)阅读。但就我而言，这种方式更适合用于相同键子字符串（例如 Noun1 ）发生很多的大文本。

# javascript - 常见问题解答 显示/隐藏扩展答案

> ID：15340809
> 
> 赞同：0
> 
> 时间：2013-03-11T14:14:27.540
> 
> 标签：javascript, show-hide, expand

我有一个包含 12 个常见问题的列表，但我只想显示前 5 个，直到用户单击“显示更多”按钮。我让这部分工作，但这样做会扩展它显示的新 7 个常见问题解答的答案。我想隐藏答案，直到用户点击问题，但不知道如何去做。我在修改别人的代码，不是我原来写的。

示例：[code]http://63.246.25.145/surety-bonds/contract-bonds/performance_bond.htm[/code]

JS: [code] //faq问答展开

```
$("#faqs .question").click(function()
{
    if($(this).hasClass("open"))
    {
        $(this).removeClass("open");
        $("#answer_"+$(this).attr("id").split("_")[1]).slideUp().removeClass("open")
    }
    else
    {
        $("#faqs .question.open").removeClass("open");
        $("#faqs .answer.open").slideUp().removeClass("open");
        $(this).addClass("open");
        $("#answer_"+$(this).attr("id").split("_")[1]).slideDown().addClass("open")
    }
}); 
```

//债券页面常见问题显示/隐藏

```
$("#faqlistholder5").each(   //count 10 since question <li>s and answer <li>s
    function()
    {
        var f=$("ul",this);

        if(f.children("li").size()<=10)
            return;

        var u=f.children("li:gt(9)",this).hide();
        var m="VIEW MORE &raquo";

        f.append($('<div id="viewMore" class="toggler"><a id="viewmorebuttonFAQ" class="button">'+m+"</a></div>").toggle(
            function()
            {
                u.show();
                $("#viewmorebuttonFAQ").html("VIEW LESS &raquo")
            },
                function()
                {
                    u.hide();$("#viewmorebuttonFAQ").html("VIEW MORE &raquo")
                }))
    }); 
```

[/代码]

谁能给我一些急需的指导？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:50:52.323

尝试添加

```
$("#faqs .answer").hide().removeClass("open"); 
```

在*u.show() 之后；*

* * *

```
function()
        {
            u.show();
            $("#faqs .answer").hide().removeClass("open");
            $("#viewmorebuttonFAQ").html("VIEW LESS &raquo")
        } 
```

# javascript - 如何使此文本旋转器按顺序阅读并重复

> ID：15340812
> 
> 赞同：0
> 
> 时间：2013-03-11T14:14:37.670
> 
> 标签：javascript

这是一个功能随机化的脚本。

```
function rotateEvery(sec) {
var Quotation=new Array()

Quotation[0] = 'Example 1..';
Quotation[1] = 'Example 2..';
Quotation[2] = 'Example 3..';
Quotation[3] = 'Example 4..';
Quotation[4] = 'Example 5..';    

var which = Math.round(Math.random()*(Quotation.length - 1));
document.getElementById('textrotator').innerHTML = Quotation[which];

setTimeout('rotateEvery('+sec+')', sec*1000);
}
rotateEvery(4); 
```

我希望它从引号 [0] 到引号 [n] 依次读取，然后重复。有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:28:00.327

**这是一个工作示例：http:** [//jsfiddle.net/hY26L/1/](http://jsfiddle.net/hY26L/1/)

```
var counter = 0;
var Quotation=new Array()
Quotation[0] = 'Example 1..';
Quotation[1] = 'Example 2..';
Quotation[2] = 'Example 3..';
Quotation[3] = 'Example 4..';
Quotation[4] = 'Example 5..';    

function rotate() {
    document.getElementById('textrotator').innerHTML = Quotation[counter++ % Quotation.length] 
}

rotate();
window.setInterval(rotate, 4000); 
```

% 是模数（[http://en.wikipedia.org/wiki/Modulo_operation](http://en.wikipedia.org/wiki/Modulo_operation)），基本上给你除法的余数。所以 0 % 4 是 0， 1 % 4 是 1， ...， 4 % 4 是 0 ... 等等。

`setInterval`就像`setTimeout`，但它每 X 毫秒触发一次，而不仅仅是一次

# ios - 这个 gdb 输出在 Xcode 中是什么意思？

> ID：15340816
> 
> 赞同：0
> 
> 时间：2013-03-11T14:14:41.537
> 
> 标签：ios, objective-c, xcode, debugging, error-handling

我在 Xcode 中使用 gdb 调试器，我只是不明白我收到的错误消息，它们似乎在每次运行后都会改变。

这是显示的代码片段：

```
0x001e8975  <+0006>  sub    $0xc,%esp
0x001e8978  <+0009>  call   0x1e897d <prepareForMethodLookup+14>
0x001e897d  <+0014>  pop    %edi
0x001e897e  <+0015>  mov    0x8(%ebp),%esi
0x001e8981  <+0018>  mov    0x10(%esi),%eax
0x001e8984  <+0021>  and    $0xfffffffc,%eax

0x001e8987  <+0024>  cmpl   $0x0,(%eax)

0x001e898a  <+0027>  js     0x1e89d2 <prepareForMethodLookup+99>
0x001e898c  <+0029>  mov    0xfe697(%edi),%ebx
0x001e8992  <+0035>  cmpl   $0x0,(%ebx)
0x001e8995  <+0038>  je     0x1e89aa <prepareForMethodLookup+59>
0x001e8997  <+0040>  cmpl   $0x2,0x103df7(%edi) 
```

中间的线是绿色箭头似乎指向的地方。我只是不完全明白这意味着什么。我会粘贴一些代码，但我不确定实际问题出在哪里，而且代码很多。这可能是一个菜鸟问题，或者我可能没有很好地解释它，但我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:45:08.997

您是否启用了异常断点？

在 XCode 中按 CMD-6

这应该将您从项目资源管理器更改为左侧选项卡上的断点

点击页面左下角的小+和“添加异常断点”，这将为应用程序中发生的所有异常添加一个断点。

我不确定为什么默认情况下它们没有打开，这有点烦人！

这可以帮助您找出您面临的问题。

# ios - 修改 IAP 价格等级并发布新版本的应用程序

> ID：15340818
> 
> 赞同：0
> 
> 时间：2013-03-11T14:14:47.227
> 
> 标签：ios, in-app-purchase, app-store-connect

我想更改价格等级。例如，我有 5 个 IAP Id ，第一个将减少到 TIER 3 -> TIER 1，它将在我的新版本应用程序中。

但是，当前版本仍然使用 TIER 3，如果我修改价格层并制定时间表，我真的不知道 Apple Review Team 何时会批准新版本应用程序。

审稿组还会糊涂吗？如果由于发布时间的价格等级计划同步问题，价格等级尚未更改。如果这样做，他们将在 ITC 中看到我的价格“第 3 级”但新版本。的应用程序使用“第 1 层”。

我真的对那种情况感到困惑？我不想添加新层，因为它们具有相同的功能...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:49:30.417

为什么不直接在 iTunes Connect 中制作一个新的、价格更低的重复产品，然后将新产品 ID 嵌入到您的新版本应用程序中。否则，您最终可能会遇到这样一种情况，即使用旧版本应用程序的人能够以更低的新价格购买。然后，当您对足够多的用户群迁移到您的应用程序的最新版本感到高兴时，您可以考虑逐步淘汰旧产品吗？

# cpanel - 电子邮件欺骗面板

> ID：15340822
> 
> 赞同：0
> 
> 时间：2013-03-11T14:14:59.683
> 
> 标签：cpanel

我在我的 indox 中收到了我之前发送的电子邮件，我如何使用 Cpanel 阻止它，我的收件箱总是填满。我读了这篇文章 [http://www.werockyourweb.com/stop-spoof-email](http://www.werockyourweb.com/stop-spoof-email) 但它看到对我不起作用。感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T08:39:22.963

请让我们知道队列中类似邮件的示例标题

确保参与该过程的域具有有效的 SPF(TXT) 记录。

[防晒指数](http://www.microsoft.com/mscorp/safety/content/technologies/senderid/wizard/default.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:05:25.693

似乎某些电子邮件系统阻止了我的电子邮件地址，看起来此消息是由邮件传递软件自动创建的。您发送的邮件在队列中超过 24 小时后仍未发送给一个或多个收件人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-06T08:46:57.423

欺骗可以通过多种方式完成，例如，如果您的任何表单中可能存在错误并导致从中发送垃圾邮件.. 或者您的许多注册流程表单都存在允许发送垃圾邮件的错误

如果它是明确的欺骗，那么是的，SPF 和 DKIM 将有助于减少它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-23T09:28:40.467

这是正确的！添加 DKIM 和 SPF 应该有助于减少欺骗性电子邮件。如果您将标题粘贴到此处，我们可以确定它的真正原因。您可以从返回的电子邮件以及服务器日志中找到它。

# android - 尝试为混淆配置 proguard 时出现异常。重复的类定义

> ID：15340824
> 
> 赞同：0
> 
> 时间：2013-03-11T14:15:10.133
> 
> 标签：android, security, proguard

我正在尝试使用 proguard 混淆我的代码。我在我的项目中使用谷歌地图。

但我得到以下例外。

如何解决？

```
 Proguard returned with error code 1\. See console
    Warning: class [bin/classes/com/google/android/gms/BuildConfig.class] unexpectedly contains class [com.google.android.gms.BuildConfig]
    Warning: class [bin/classes/com/google/android/gms/R$attr.class] unexpectedly contains class [com.google.android.gms.R$attr]
    Warning: class [bin/classes/com/google/android/gms/R$id.class] unexpectedly contains class [com.google.android.gms.R$id]
    Warning: class [bin/classes/com/google/android/gms/R$string.class] unexpectedly contains class [com.google.android.gms.R$string]
    Warning: class [bin/classes/com/google/android/gms/R$styleable.class] unexpectedly contains class [com.google.android.gms.R$styleable]
    Warning: class [bin/classes/com/google/android/gms/R.class] unexpectedly contains class [com.google.android.gms.R]
    Note: there were 1656 duplicate class definitions.
    Warning: there were 6 classes in incorrectly named files.
             You should make sure all file names correspond to their class names.
             The directory hierarchies must correspond to the package hierarchies.
             If you don't mind the mentioned classes not being written out,
             you could try your luck using the '-ignorewarnings' option.
    java.io.IOException: Please correct the above warnings first.
        at proguard.InputReader.execute(InputReader.java:133)
        at proguard.ProGuard.readInput(ProGuard.java:196)
        at proguard.ProGuard.execute(ProGuard.java:78)
        at proguard.ProGuard.main(ProGuard.java:492)
    Proguard returned with error code 1\. See console
    proguard.ParseException: Unexpected keyword 'names' in line 30 of file 'D:\redBus_Update_3\proguard-project.txt',
      included from argument number 4
        at proguard.ConfigurationParser.unknownAccessFlag(ConfigurationParser.java:1048)
        at proguard.ConfigurationParser.parseClassSpecificationArguments(ConfigurationParser.java:547)
        at proguard.ConfigurationParser.parseKeepClassSpecificationArguments(ConfigurationParser.java:490)
        at proguard.ConfigurationParser.parse(ConfigurationParser.java:138)
        at proguard.ProGuard.main(ProGuard.java:484) 
```

请在下面找到 proguard 文件的内容。

我也尝试对这些文件使用忽略警告选项

```
 # To enable ProGuard in your project, edit project.properties
# to define the proguard.config property as described in that file.
#
# Add project specific ProGuard rules here.
# By default, the flags in this file are appended to flags specified
# in ${sdk.dir}/tools/proguard/proguard-android.txt
# You can edit the include path and order by changing the ProGuard
# include property in project.properties.
#
# For more details, see
#   http://developer.android.com/guide/developing/tools/proguard.html

# Add any project specific keep options here:

# If your project uses WebView with JS, uncomment the following
# and specify the fully qualified class name to the JavaScript interface
# class:
#-keepclassmembers class fqcn.of.javascript.interface.for.webview {
#   public *;
#}

-libraryjars D:\google-play-services_lib_en
-libraryjars D:\redBus_Update_3\libs\FlurryAgent.jar
-libraryjars D:\redBus_Update_3\libs\gson-2.2.2.jar
-libraryjars D:\redBus_Update_3\libs\bugsense-3.0.1.jar
-libraryjars D:\redBus_Update_3\libs\android-support-v4.jar

-keep class android.location.** { *; }

-keep public class com.google.android.maps.** {*;}
-keep public class com.google.android.maps.** {*;}
-keep public class com.google.android.gms.maps.** {*;}

-dontwarn com.google.android.maps.GeoPoint
-dontwarn com.google.android.maps.MapActivity
-dontwarn com.google.android.maps.MapView
-dontwarn com.google.android.maps.MapController 
-dontwarn com.google.android.maps.Overlay 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T12:25:36.760

您不应在 proguard-project.txt 中指定任何 -libraryjars 选项。标准构建脚本会自动将它可以在`libs`目录中找到的库传递给 ProGuard。

如果您收到有关缺少类的任何警告，即使应用程序在调试模式下工作正常，您也应该考虑为这些类添加 -dontwarn 选项（参见本网站上的许多相关问题和答案）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T22:18:12.260

我最近有这个问题。我的解决方案最终是我只需要清理项目，这导致我出现不同的错误：

```
/gen already exists but is not a source folder. Convert to a source folder or rename it. 
```

所以我将它重命名为 genX，然后自动重新创建，清理项目，测试它，然后删除 genX。

这样做解决了我的 Proguard 问题。

# php - 未找到 Silex\Route::setPath()

> ID：15340827
> 
> 赞同：1
> 
> 时间：2013-03-11T14:15:27.357
> 
> 标签：php, silex

我正在开发一个新的 Silex 项目，并且无法安装到我的控制器提供程序的路由。我之前在另一个项目中成功地做到了这一点，但是现在当我将以下路线放入时`app.php`：

```
$app->mount('/', new CommonController());
$app->mount('/feeds', new FeedsController());
$app->mount('/admin', new AdminController()); 
```

我收到一个致命错误：`Fatal error: Call to undefined method Silex\Route::setPath() in [root]/vendor/symfony/routing/Symfony/Component/Routing/RouteCollection.php on line 255`

**编辑：**
安装根路由时不会引发错误。只有当我添加`/feeds`或`/admin`。
**结束编辑**

我不知道这可能来自哪里 - 我已经在我的其他工作项目中搜索了这个函数定义，但在代码中找不到它。我想我可能缺少一个库，`composer.json`但我不确定它可能是哪一个 - 两个项目的文件几乎相同：

**工作作曲家.json：**

```
{
    "name"        : "lyrixx/Silex-Kitchen-Edition",
    "type"        : "library",
    "description" : "A Silex Edition. This project is a base for your silex applications.",
    "keywords"    : ["framework"],
    "homepage"    : "http://lyrixx.github.com/Silex-Kitchen-Edition/",
    "license"     : "MIT",
    "authors"     : [
        {
            "name"  : "Grégoire Pineau",
            "email" : "lyrixx@lyrixx.info"
        }
    ],
    "repositories": [
        {
            "type": "package",
            "package": {
                "name"    : "twitter/bootstrap",
                "version" : "2.0.4",
                "source"  : {
                    "url"       : "https://github.com/twitter/bootstrap.git",
                    "type"      : "git",
                    "reference" : "v2.0.4"
                }
            }
        }
    ],
    "require": {
        "php"                     : ">=5.3.3",
        "silex/silex"             : "dev-master",
        "twig/twig"               : "1.*",
        "monolog/monolog"         : "1.0.*",
        "symfony/form"            : "2.1.*",
        "symfony/translation"     : "2.1.*",
        "symfony/twig-bridge"     : "2.1.*",
        "symfony/validator"       : "2.1.*",
        "symfony/yaml"            : "2.1.*",
        "symfony/config"          : "2.1.*",
        "kriswallsmith/assetic"   : "1.0.*",
        "twitter/bootstrap"       : "2.0.4",
        "doctrine/dbal"           : "2.2.*",
        "symfony/security"        : "2.1.*",
        "fate/silex-extensions"   : "dev-master",
        "michelf/php-markdown"    : "1.3.*@dev",
        "swiftmailer/swiftmailer" : ">=4.1.2,<4.2-dev"
    },
    "require-dev": {
        "symfony/dom-crawler"   : "2.1.*",
        "symfony/css-selector"  : "2.1.*",
        "symfony/browser-kit"   : "2.1.*"
    },
    "minimum-stability" : "dev",
    "scripts": {
        "post-install-cmd": "Lx\\Composer\\Script::postInstall"
    },
    "autoload": {
        "psr-0": {
            [autoload routes defined here]
        }
    }
} 
```

**“破碎”作曲家.json：**

```
{
    "require": {
        "php"                     : ">=5.3.3",
        "silex/silex"             : "dev-master",
        "twig/twig"               : "1.*",
        "monolog/monolog"         : "1.0.*",
        "symfony/form"            : "2.1.*",
        "symfony/translation"     : "2.1.*",
        "symfony/twig-bridge"     : "2.1.*",
        "symfony/validator"       : "2.1.*",
        "symfony/yaml"            : "2.1.*",
        "symfony/config"          : "2.1.*",
        "kriswallsmith/assetic"   : "1.0.*",
        "twitter/bootstrap"       : "2.0.*",
        "doctrine/dbal"           : "2.2.*",
        "fate/silex-extensions"   : "dev-master",
        "swiftmailer/swiftmailer" : ">=4.1.2,<4.2-dev"
    },
    "autoload": {
        "psr-0": {
            [autoload routes defined here]
        }
    }
} 
```

同样，这甚至可能不是我问题的根本原因，只是我的直觉。谁能破译这里发生了什么？

**第二次编辑：FeedsController.php**

```
<?php

namespace Controllers;

use Controllers\CommonController;
use Silex\Application;
use Symfony\Component\HttpFoundation\Request;

class FeedsController extends CommonController
{

    public function connect(Application $app)
    {
        $controller = $app['controllers_factory'];

        $controller->get('/', function (Request $request, Application $app)
        {
            return 'Yay!';
        });

        return $controller;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:53:23.777

我已将问题缩小到我的供应商文件夹中的一个坏库，但我不能确定它是哪一个。我将正常工作的供应商文件夹复制到损坏的文件夹中，一切都开始工作了。

一旦我知道确切的问题是什么，我会更新这个答案。

# android - 如何在 android 中使用 edittext 处理软键盘中的键事件

> ID：15340828
> 
> 赞同：1
> 
> 时间：2013-03-11T14:15:27.317
> 
> 标签：android

我正在尝试在 android 中处理事件软键盘，但是当我按下回车键时，我永远不会生成我所做的任何事情？请对我的代码进行任何编辑。

```
public class MainActivity extends Activity implements OnKeyListener  {
EditText editText1;
 EditText editText2;
      public void 
onCreate(Bundle savedInstanceState) {
      super.onCreate
(savedInstanceState);
      setContentView
(R.layout.activity_main);
      editText1 = (EditText) 
findViewById(R.id.editText1);
editText1.setOnKeyListener(this);
      editText2 = (EditText) findViewById(R.id.editText2);
      editText2.setOnKeyListener(this);
      InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
      imm.showSoftInput(editText1, InputMethodManager.SHOW_IMPLICIT);
       }
     public boolean onKey(View view, int keyCode, KeyEvent event) {
      if (event.getAction() == KeyEvent.KEYCODE_ENTER) 
      {
     editText2.setText("hello");      
      }
      return false; // pass on to other listeners.
     }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:22:04.713

我认为正确的做法应该是：

```
 public boolean onKey(View view, int keyCode, KeyEvent event) {
  if (keyCode == KeyEvent.KEYCODE_ENTER) 
  {
       editText2.setText("hello");      
  }
  return true; // pass on to other listeners.
 } 
```

# jsp - JSTL - 在特定工作日显示内容

> ID：15340829
> 
> 赞同：0
> 
> 时间：2013-03-11T14:15:31.680
> 
> 标签：jsp, jstl, dayofweek, weekday

我目前正在使用以下代码在 2012 年 11 月 30 日显示一些内容：

```
<jsp:useBean id="now" class="java.util.Date"/>
<fmt:formatDate var="currentDate" value="${now}" pattern="yyyy.MM.dd" />

<%
java.text.SimpleDateFormat sdf = new java.text.SimpleDateFormat("HHmmss");
String a = sdf.format(new java.util.Date());
%>

<c:if test='${currentDate ge "2012.11.26" && currentDate le "2012.11.30"}'>It is the 30th of November 2012</c:if> 
```

有没有办法可以在一周中的某一天做到这一点，例如每周一显示一段促销文字，这会在一周的剩余时间里消失？

此外，如果我添加下面的代码，我可以看到它打印以下“2013 年 3 月 11 日星期一 14:54:33 GMT 2013”​​。

```
<c:out value="${now}" /> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:34:41.997

这是一种方法。

```
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<jsp:useBean id="now" class="java.util.Date"/>
<c:if test="${fn:startsWith(now, 'Mon')}" >
     It is Monday.
</c:if> 
```

# jquery - 切换 DIV 并缩小差距

> ID：15340830
> 
> 赞同：2
> 
> 时间：2013-03-11T14:15:34.923
> 
> 标签：jquery, css

这是我想要实现的东西的简化版本

我有一个显示 3 个 div 框的页面

```
<div class="divd" id='div1' style="left:50px">>111</div>
<div class="divd" id='div2' style="left:150px">222</div>  
<div class="divd" id='div3' style="left:250px">333</div>
<p></p>
<p></p>
<p><input type="button"  id="tg" value="toggle"></p> 
```

我正在使用 Jquery 来切换中间 div

```
 $('#tg').click(function() { 
    $('#div2').toggle('slow', function() {
    });
  }); 
```

这一切都按预期工作，但我想做的是通过隐藏 div 来“缩小差距”，所以最终结果是 div1 和 div3 彼此相邻 可以做到这一点，非常感谢任何指针或帮助，谢谢

```
.divd { 
position:absolute ; 
width: 50px;
height: 50px;   
top: 50px ;
left: 120px ; 
border: 1px solid black;
background-color:#999; 
border-radius:5px;  
z-index:200;
text-align:center;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:22:35.513

我假设您的元素是绝对定位的，如下所示：http: [//jsfiddle.net/agpHB/1/](http://jsfiddle.net/agpHB/1/)

你不必那样做。尝试这个：

[http://jsfiddle.net/agpHB/2/](http://jsfiddle.net/agpHB/2/)

```
.divd {
    float: left;
    width: 150px;
    background-color: #eee;
}

<div class="divd" id="div1">111</div>
<div class="divd" id="div2">222</div>
<div class="divd" id="div3">333</div> 
```

浮动甚至不是绝对必要的。如果您必须绝对定位，则需要在进行切换的同时将元素 3 滑动到元素 2 的位置。它不会那么简单。

更新：要回复您对其他元素的评论，请尝试以下操作：http: [//jsfiddle.net/agpHB/3/](http://jsfiddle.net/agpHB/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:33:38.103

```
<script>
flag=0;
displayhide(x){
a=document.getElementById(x).style;
if(flag=0)
    {
    a.display="block";
    flag=1;
    }
else
    {
    a.display="none";
    flag=0; 
    }
}
</script>

and use
<p><input type="button"  id="tg" onclick="displayhide('div2')" value="toggle"></p> 
```

# unity3d - 在 Unity3d 中将 3d 对象动态添加到场景中

> ID：15340831
> 
> 赞同：3
> 
> 时间：2013-03-11T14:15:36.127
> 
> 标签：unity3d, unityscript

我正在开发一个 Unity3d 项目，在该项目中，我想通过按键在相同的位置、方向上动态地将 3d 对象添加到场景中。为此，我导入了这些对象并为所有这些对象制作了一个预制件。我正在使用以下脚本来执行此操作。但它并没有完成所需的操作。新对象被实例化并添加到场景中但旧物体不会被破坏。而且，新对象的位置并不总是相同的。场景最初由一个立方体组成。在我按下 '1' 、'2' 等之后.. 我想要一个新的对象来替换正在显示的 1 （在同一位置）。

脚本 ：

```
var myCar : GameObject;
var Cube : GameObject;
var Globe: GameObject;
var Clock : GameObject;
var Pistol : GameObject;
var LCD : GameObject;
var prev : int;
var temp: GameObject; 
function Start ()
{
    prev =0;
    temp=null;

}

function Update () 
{
    if(prev==0)
        temp=Cube;
    else if(prev==1)
        temp=myCar;
    else if(prev==2)
        temp=Globe;
    else if(prev==3)
        temp=Pistol;
    else if(prev==4)
        temp=Clock;
    else if(prev==5)
        temp=LCD;       

    if(Input.GetKey(KeyCode.Alpha1 || KeyCode.Keypad1))
    {
        if(prev!=1)
        {
            Instantiate(myCar,temp.transform.position ,temp.transform.rotation);
            myCar.transform.localScale = Vector3(0.06,0.06,0.06);
            Destroy(temp);
            prev=1;
        }     
    }
    else if(Input.GetKey(KeyCode.Alpha2 || KeyCode.Keypad2))
    {
     if(prev!=2)
     {
        Instantiate(Globe,temp.transform.position ,temp.transform.rotation);
        Globe.transform.localScale = Vector3(0.04,0.04,0.04);
        Destroy(temp);
        prev=2;
     }

    }
    else if(Input.GetKey(KeyCode.Alpha3 || KeyCode.Keypad3))
    {
     if(prev!=3)
     {
        Instantiate(Pistol,temp.transform.position ,temp.transform.rotation);
        Pistol.transform.localScale = Vector3(0.03,0.03,0.03);
        Destroy(temp);
        prev =3;
     }
    }
    else if(Input.GetKey(KeyCode.Alpha4 || KeyCode.Keypad4))
    {
     if(prev!=4)
     {
          Instantiate(Clock,temp.transform.position ,temp.transform.rotation);
          Clock.transform.localScale = Vector3(0.08,0.08,0.08);
            Destroy(temp);
            prev=4;
     }

    }
    else if(Input.GetKey(KeyCode.Alpha5 || KeyCode.Keypad5))
    {
     if(prev!=5)
     {
        Instantiate(LCD,temp.transform.position ,temp.transform.rotation);
        LCD.transform.localScale = Vector3(0.04,0.04,0.04);
        Destroy(temp);
        prev=5;
     }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T14:43:02.517

有几件事情需要考虑：

1.  最好存储对当前活动对象的引用而不是 if-else-if 部分。
2.  `Destroy`在预制对象上调用，但不在现有`GameObject`实例上调用，因此不执行任何操作。
3.  对 的所有操作都相同`transform`。它们只影响预制件。
4.  不是真正的错误，而是真正的增强：在我们的 3D 软件中缩放您的模型，以便无需`localScale`调整即可对其进行实例化。
    **更新：**如果您无法访问 Blender、Maya 等 3D 软件的原始模型……您可以轻松地在预制件中定义适当的比例。关键是尽量减少代码中的重复内容，并将所有类型的属性设置放入预制件中。

综上所述，我的建议：

1.  像 4 一样优化您的原始模型。
2.  引入一个成员变量来存储对当前对象的引用。
    **更新：**如果你想要一个特殊的对象，例如`Cube`在开始时初始化，你首先将它拖到场景中，然后将新创建`Cube`的从层次视图拖到 varable `current`。因此，您在开始场景时首先看到立方体，并且您的脚本*知道*它是当前的，当它必须替换它时。
3.  创建对象实例化的方法

我在 C# 中工作，但它应该类似于

```
var current : GameObject; 
```

...

```
function ReplaceObject (prefab : GameObject, newKey : int) {
    if (newKey != prev) {
        GameObject newObject = Instantiate(prefab, current.transform.position, 
            current.transform.rotation);
        Destroy(current);
        current = newObject;
        prev = newKey;
    }
} 
```

...

```
function Update () 
{
    if(Input.GetKey(KeyCode.Alpha1 || KeyCode.Keypad1)) {
        ReplaceObject (myCar, 1);
    } else if(Input.GetKey(KeyCode.Alpha2 || KeyCode.Keypad2))
        ReplaceObject (Globe, 2); 
```

# grep - 如何grep出可以更改的子字符串？

> ID：15340835
> 
> 赞同：0
> 
> 时间：2013-03-11T14:15:54.110
> 
> 标签：grep

基本上我有一个非常大的文本文件，每一行都包含

```
tag=yyyyy;id=xxxxx;db_ref=zzzzz; 
```

我想要的是 grep 出 id，但 id 的长度和形式可以改变，我想知道是否可以使用 grep -o 然后 grep for "id=" 然后提取它之后的所有内容，直到分号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:19:29.043

你可以这样做：

```
$ grep -o 'id=[^;]*' file 
```

如果你不想包含`id=`你可以使用正面[后视](http://www.regular-expressions.info/lookaround.html)的部分：

```
$ grep -Po '(?<=id=)[^;]*' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:19:38.293

尝试 ：

```
grep -Po "(?<=id=)[^;]*" file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:20:54.513

通过 grep：

```
grep -o 'id=[^;]*' 
```

通过 awk：

```
awk -F';' '{ print $2}' testlog
id=xxxxx 
```

编辑：查看 sudo_O 的后视答案。IMO，这更符合您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T22:06:25.367

你可以试试这个awk。如果每行有多个 id= 条目，它也应该工作，并且它不会给出误报`...;pid=blabla;...`

```
awk '/^id=/' RS=\; file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T22:10:08.260

尝试以下操作：

```
grep -oP 'id=\K[^;]*' file 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T10:57:21.173

```
perl -lne 'print $1 if(/id=([^\;]*);/)' your_file 
```

测试：

```
> echo "tag=yyyyy;id=xxxxx;db_ref=zzzzz; "|perl -lne 'print $1 if(/id=([^\;]*);/)'
xxxxx
> 
```

# jquery - 如何隐藏 Galleria 的数据层？

> ID：15340837
> 
> 赞同：1
> 
> 时间：2013-03-11T14:16:04.213
> 
> 标签：jquery, css, toggle, galleria, data-layer

我安装了 Galleria 插件并添加了一个数据层，这样您就可以看到照片的描述。我的问题是我希望图层默认隐藏（显示：无），但图层的 div 中有一个样式：

```
<div class="galleria-layer" style="position: absolute; z-index: 2; display: block; top: 0px; left: 0px;">Frau Maxl wollte nicht unbedingt Fotografiert sein. Ich habe ein paar stunden erlaubt aber die zwei wollte den ganzen tag nehmen.</div> 
```

这个“显示：块”是问题所在。如果我将其设置为“显示：无！重要”，则 div 将被隐藏，但它将保持隐藏状态。我想用 jQuery 切换它。正常的“显示：无”是无用的，因为它的优先级低于 div 中的样式。这个 div 也是动态生成的，因此更改它更加困难。

有谁知道这些风格的来源？我在 Gallerias JS 和 CSS 中没有找到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:30:25.473

我认为，Galleria js 处理该 div 的显示和隐藏，所以如果你想总是隐藏可以使用 !important

为什么不使用“display : none !important”添加另一个类？这种方式覆盖了原来的，让你动态改变与 addClass，toggleClass 和 removeClass 语句的 jquery

```
.myHideClass{
     display:none !important;
} 
```

所以...我如何在默认情况下将类放在 div 上？

```
<script>

    // Load the classic theme
    Galleria.loadTheme('galleria.classic.min.js');

    // Initialize Galleria
    Galleria.run('#galleria');

    //the divs are already created so...
    $('.galleria-layer').addClass("myHideClass")

</script> 
```

# php - Oscommerce 邮件不发送连接字符串

> ID：15340838
> 
> 赞同：-1
> 
> 时间：2013-03-11T14:16:05.983
> 
> 标签：php, oscommerce

嗨，我是 oscommerce 平台的新手，我有一个任务，即一旦用户检查邮件意味着它将发送到用户电子邮件地址和管理员电子邮件地址，否则它将向管理员发送邮件。问题就在这里，一旦我做了条件意味着它不会发送连接字符串的邮件。我的代码如下：

```
VARIABLE NAME:email_address=tep_db_prepare_input(HTTP_POST_VARS['email']);      

tep_mail(STORE_OWNER,emailaddres."xxyt@somemail.com",EMAIL_SUBJECT,subject,message,name, email_address);

tep_redirect(tep_href_link(FILENAME_CONTACT_US, 'action=success')); 
```

在这里，我也想将邮件发送给用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:09:40.363

HTTP_POST_VARS['email'] 需要注册全局变量，现在大多数服务器都处于关闭状态（因为它是一个安全威胁）。

echo HTTP_POST_VARS['email'] 并检查您是否获得了一些价值，否则使用 $_POST['email']

# javascript - 获取具有相同类的所有元素

> ID：15340840
> 
> 赞同：5
> 
> 时间：2013-03-11T14:16:13.453
> 
> 标签：javascript, arrays, class

我知道这个：

```
document.getElementsByClassName('class-1')[0]. 
```

选择`<div>`具有指定类的第一个。

我猜使用 a`for()`将通过整个数组`<div>`。

有人可以解释如何创建该数组吗？

我会更喜欢普通的Js。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-11T14:18:12.850

方法`getElementsByClassName()`返回一组具有特定类名的 DOM 元素。以下是如何使用返回的节点列表的规范示例：

```
var elements = document.getElementsByClassName("class-1");
for (var i = 0, len = elements.length; i < len; i++) {
    // elements[i].style ...
} 
```

# silverlight - 表达式混合动画多个对象

> ID：15340848
> 
> 赞同：0
> 
> 时间：2013-03-11T14:16:27.670
> 
> 标签：silverlight, xaml, microsoft-metro, windows-store-apps, expression-blend

我正在尝试在 Expression blend 中为 Windows Store App 创建一个动画。我希望动画代表降雨。动画由 2 张图片组成，我试图拥有 3 个场景。

1) 少雨：用云和 1 滴进行动画处理，如图 1 所示。这很好用

2) 中等降雨量：这里我想使用相同的云，但再添加 1 滴 3) 大雨：这里我想使用相同的云，但添加第三滴

我的问题是，当我尝试创建最后两个场景时，它会影响第一个场景，并且新对象也将显示在第一个场景上。所以我不能在同一个故事板上拥有这 3 个场景。无论如何我可以将情节提要分成多个层，所以我可以随时隐藏一些对象？从 msdn 网站我发现我的文章说我可以通过单击**工具 => 创建新图层来创建图层**。

但是，我的表情混合中没有该选项，并且我使用的是最新版本。

![在此处输入图像描述](../Images/8ac99ad779f71e5610e128b764581e82.png)

![在此处输入图像描述](../Images/04f900350bc0ed398a6b9aae744654f0.png)

动画 1

![小雨动画](../Images/00631f490becf8c889a370927a9196d4.png)

动画 2

![sssssse](../Images/da0b60c8bf1ccb0b81b34d2fac345054.png)

动画 3

![在此处输入图像描述](../Images/20b5ef0f4e622baf99b365bf7947e907.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:58:24.703

我会创建三个独立的故事板，每个场景一个。这将使您可以更好地控制何时做什么。

然后，您可以在每个 Storyboard 中根据需要处理对象并为其设置动画。然后，您可以使用不同的缓动来实现不同的雨滴下落速度。

我在 Expression Blend 中创建了一个解决方案，为您展示了这一点，并将其放在我的 Skydrive 上：[http](http://sdrv.ms/12IbxrR) : //sdrv.ms/12IbxrR，还有一篇博文介绍[了它是如何完成的](http://blendrocks.com/2013/03/11/creating-animation-with-paths-imported-from-illustrator/)。

每个按钮停止和启动正确动画的示例代码。

```
<Page
    x:Class="App1.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:App1"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">
    <Page.Resources>
        <Storyboard
            x:Name="MediumRainAnimation"
            RepeatBehavior="Forever">
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.Opacity)"
                Storyboard.TargetName="path">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="0" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.3"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.7"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:1"
                    Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.Opacity)"
                Storyboard.TargetName="path1">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="0" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.3"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.7"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:1"
                    Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase
                            EasingMode="EaseIn" />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.Opacity)"
                Storyboard.TargetName="path2">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="0" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.3"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.7"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:1"
                    Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CubicEase
                            EasingMode="EaseInOut" />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)"
                Storyboard.TargetName="path">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:1"
                    Value="200">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)"
                Storyboard.TargetName="path1">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:1"
                    Value="200">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase
                            EasingMode="EaseIn" />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)"
                Storyboard.TargetName="path2">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:1"
                    Value="200">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CubicEase
                            EasingMode="EaseInOut" />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)"
                Storyboard.TargetName="path">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="0" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.3"
                    Value="0" />
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)"
                Storyboard.TargetName="path1">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="0" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.3"
                    Value="0" />
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)"
                Storyboard.TargetName="path2">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="0" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.3"
                    Value="0" />
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
        <Storyboard
            x:Name="StrongRainAnimation"
            RepeatBehavior="Forever">
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.Opacity)"
                Storyboard.TargetName="path">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="0" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.18"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.42"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.6"
                    Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.Opacity)"
                Storyboard.TargetName="path1">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="0" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.18"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.42"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.6"
                    Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase
                            EasingMode="EaseIn" />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.Opacity)"
                Storyboard.TargetName="path2">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="0" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.18"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.42"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.6"
                    Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CubicEase
                            EasingMode="EaseInOut" />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)"
                Storyboard.TargetName="path">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.6"
                    Value="200">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)"
                Storyboard.TargetName="path1">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.6"
                    Value="200">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase
                            EasingMode="EaseIn" />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)"
                Storyboard.TargetName="path2">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.6"
                    Value="200">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CubicEase
                            EasingMode="EaseInOut" />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)"
                Storyboard.TargetName="path">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="0" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.18"
                    Value="0" />
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)"
                Storyboard.TargetName="path1">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="0" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.18"
                    Value="0" />
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)"
                Storyboard.TargetName="path2">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="0" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.18"
                    Value="0" />
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
        <Storyboard
            x:Name="SlowRainAnimation"
            RepeatBehavior="Forever">
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.Opacity)"
                Storyboard.TargetName="path">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="0" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.51"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:1.19"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:1.7"
                    Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.Opacity)"
                Storyboard.TargetName="path1">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="0" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.51"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:1.19"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:1.7"
                    Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase
                            EasingMode="EaseIn" />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.Opacity)"
                Storyboard.TargetName="path2">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="0" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.51"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:1.19"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:1.7"
                    Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CubicEase
                            EasingMode="EaseInOut" />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)"
                Storyboard.TargetName="path">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:1.7"
                    Value="200">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)"
                Storyboard.TargetName="path1">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:1.7"
                    Value="200">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase
                            EasingMode="EaseIn" />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)"
                Storyboard.TargetName="path2">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="1" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:1.7"
                    Value="200">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CubicEase
                            EasingMode="EaseInOut" />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)"
                Storyboard.TargetName="path">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="0" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.51"
                    Value="0" />
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)"
                Storyboard.TargetName="path1">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="0" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.51"
                    Value="0" />
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)"
                Storyboard.TargetName="path2">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="0" />
                <EasingDoubleKeyFrame
                    KeyTime="0:0:0.51"
                    Value="0" />
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
    </Page.Resources>
    <Grid
        Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
        <Path
            x:Name="path"
            Data="F1M35.116,42.866C35.116,52.426 27.367,60.174 17.808,60.174 8.249,60.174 0.5,52.426 0.5,42.866 0.5,33.307 17.808,1.058 17.808,1.058 17.808,1.058 35.116,33.307 35.116,42.866"
            Fill="#FF93B6F1"
            Height="60.673"
            Width="35.616"
            UseLayoutRounding="False"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Margin="0,0,100,0"
            RenderTransformOrigin="0.5,0.5">
            <Path.RenderTransform>
                <CompositeTransform />
            </Path.RenderTransform>
        </Path>
        <Path
            x:Name="path1"
            Data="F1M35.116,42.866C35.116,52.426 27.367,60.174 17.808,60.174 8.249,60.174 0.5,52.426 0.5,42.866 0.5,33.307 17.808,1.058 17.808,1.058 17.808,1.058 35.116,33.307 35.116,42.866"
            Fill="#FF93B6F1"
            Height="60.673"
            Width="35.616"
            UseLayoutRounding="False"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            RenderTransformOrigin="0.5,0.5">
            <Path.RenderTransform>
                <CompositeTransform />
            </Path.RenderTransform>
        </Path>
        <Path
            x:Name="path2"
            Data="F1M35.116,42.866C35.116,52.426 27.367,60.174 17.808,60.174 8.249,60.174 0.5,52.426 0.5,42.866 0.5,33.307 17.808,1.058 17.808,1.058 17.808,1.058 35.116,33.307 35.116,42.866"
            Fill="#FF93B6F1"
            Height="60.673"
            Width="35.616"
            UseLayoutRounding="False"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Margin="0,0,-100,0"
            RenderTransformOrigin="0.5,0.5">
            <Path.RenderTransform>
                <CompositeTransform />
            </Path.RenderTransform>
        </Path>
        <Path
            Data="F1M207.885,33.885C202.225,33.885 196.732,34.596 191.485,35.924 184.27,15.299 164.651,0.5 141.564,0.5 117.399,0.5 97.034,16.714 90.718,38.852 82.291,34.586 72.771,32.167 62.679,32.167 28.339,32.167 0.5,60.006 0.5,94.346 0.5,128.687 28.339,156.526 62.679,156.526 72.489,156.526 81.764,154.246 90.015,150.2 94.9,169.883 112.678,184.474 133.872,184.474 151.986,184.474 167.603,173.812 174.811,158.426 184.56,164.01 195.844,167.218 207.885,167.218 244.704,167.218 274.552,137.37 274.552,100.552 274.552,63.733 244.704,33.885 207.885,33.885"
            Fill="White"
            Height="184.974"
            Width="275.052"
            UseLayoutRounding="False"
            HorizontalAlignment="Center"
            VerticalAlignment="Center" />
        <StackPanel>
            <Button
                Tapped="Button_Tapped">Play slow rain</Button>
            <Button
                Tapped="Button_Tapped_1">Play Medium rain</Button>
            <Button
                Tapped="Button_Tapped_2">Play Strong rain</Button>
        </StackPanel>
    </Grid>
</Page> 
```

# java - 这是一个不好的做法吗？

> ID：15340849
> 
> 赞同：1
> 
> 时间：2013-03-11T14:16:28.233
> 
> 标签：java

以下代码是否被认为是一种不好的做法？你认为其他方式可以做到吗？目标是始终更新状态，无论是成功（即调用 service.invoke(id);returns normals ）或失败......

```
@Autowired
private Service service;

public void onMessage(Message message) {

    String id = null;
    String status = "FAILED";

    try {
        id = ((TextMessage) message).getText();
        status = service.invoke(id); //can throw unchecked exception
    } catch (final JMSException e) {
        throw new RuntimeException(e);
    } finally {
        if (StringUtils.isNumeric(id)) {
        service.update(id, status);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:21:28.243

这取决于您的用例，您是否必须根据上一步执行一个步骤。无论您收到什么异常，使用 finally 都可以执行您的第二步。

我建议您将第二步放在`try...catch`块之外，以便您仅在遇到任何预期的异常时更新并继续您的第二步，否则您的方法将抛出并退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T08:09:39.767

我认为你不应该使用消息监听器的实现，你应该独立于 spring tech 来连接它们。只是基于 pojo 。`<jms:listener-container >` 与_ `<jms:listener>`

# xslt - XSL 1.0 双重分组

> ID：15340853
> 
> 赞同：2
> 
> 时间：2013-03-11T14:16:37.193
> 
> 标签：xslt, xslt-1.0, xslt-grouping

这是我在这里的第一个问题。

我想使用 XSL 1.0 转换这个 xml：

```
<RESULTS>
    <RES>
      <GROUP>1</GROUP>
      <SUBGROUP>A</SUBGROUP>
      <NAME>Alice</NAME>
    </RES>

    <RES>
      <GROUP>1</GROUP>
      <SUBGROUP>A</SUBGROUP>
      <NAME>Bart</NAME>
    </RES>

    <RES>
      <GROUP>1</GROUP>
      <SUBGROUP>B</SUBGROUP>
      <NAME>Keira</NAME>
    </RES>

    <RES>
      <GROUP>2</GROUP>
      <SUBGROUP>A</SUBGROUP>
      <NAME>Mike</NAME>
    </RES>

    <RES>
      <GROUP>2</GROUP>
      <SUBGROUP>B</SUBGROUP>
      <NAME>Peter</NAME>
    </RES>

    <RES>
      <GROUP>2</GROUP>
      <SUBGROUP>B</SUBGROUP>
      <NAME>Olaf</NAME>
    </RES>

</RESULTS> 
```

进入这个：

```
 <h1> 1 </h1>
       <h2>A</h2>
         <p>Alice</p>
         <p>Bart</p>

       <h2>B</h2>
         <p>Keira</p>

    <h1> 2 </h1>
       <h2>A</h2>
         <p>Mike</p>

       <h2>B</h2>
         <p>Peter</p>
         <p>Olaf</p> 
```

我已经尝试过使用 Muenchian Method，但是这只允许我按 GROUP 排序，并且我无法按 SUBGROUP 对排序结果进行排序。请注意，每个组/子组我只能查看一次标题。

@CM Sperberg-麦昆

我不想贴一堵文字墙，但如果它可能有助于我这样做：

这是我尝试过的解决方案之一：

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:key name="byGROUP" match="RESULTS/RES" use="GROUP" />
    <xsl:template match="RESULTS">
        <xsl:for-each select="RES[count(. | key('byGROUP', GROUP)[1]) = 1]">
            <xsl:sort select="GROUP" order="descending" />
            <h1>
                <xsl:value-of select="GROUP" />
            </h1>

            <xsl:for-each select="key('byGROUP', GROUP)">
                <xsl:sort select="SUBGROUP" order="descending" />
                <h2>
                    <xsl:value-of select="SUBGROUP" />
                </h2>

                <p>
                    <xsl:value-of select="NAME" />
                </p>

            </xsl:for-each>

        </xsl:for-each>
    </xsl:template>

</xsl:stylesheet> 
```

我尝试使用 preceiding-sibling 来测试是否查看 SUBGROUP 但我发现遍历节点是不可能的，所以这可能不是一个好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:25:55.360

进行多个分组的典型方法是使用当前级别的值与所有父值的串联作为键值：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output indent="yes" omit-xml-declaration="yes"/>
  <xsl:key name="byGROUP" match="RESULTS/RES" use="GROUP" />
  <xsl:key name="bySUBGROUP" match="RESULTS/RES"
           use="concat(GROUP, '+', SUBGROUP)" />  

  <xsl:template match="RESULTS">
    <xsl:apply-templates
      select="RES[count(. | key('byGROUP', GROUP)[1]) = 1]
                 /GROUP">
      <xsl:sort select="." order="ascending" />
    </xsl:apply-templates>
  </xsl:template>

  <xsl:template match="GROUP">
    <h1>
      <xsl:value-of select="." />
    </h1>
    <xsl:variable name="thisGroup" select="key('byGROUP', .)" />
    <xsl:apply-templates
      select="$thisGroup[count(. | 
                          key('bySUBGROUP', concat(GROUP, '+', SUBGROUP))[1])
                         = 1]
                        /SUBGROUP">
      <xsl:sort select="." order="ascending" />
    </xsl:apply-templates>
  </xsl:template>

  <xsl:template match="SUBGROUP">
    <h2>
      <xsl:value-of select="." />
    </h2>
    <xsl:apply-templates select="key('bySUBGROUP', concat(../GROUP, '+', .))"/>
  </xsl:template>

  <xsl:template match="RES">
    <p>
      <xsl:value-of select="NAME" />
    </p>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<h1>1</h1>
<h2>A</h2>
<p>Alice</p>
<p>Bart</p>
<h2>B</h2>
<p>Keira</p>
<h1>2</h1>
<h2>A</h2>
<p>Mike</p>
<h2>B</h2>
<p>Peter</p>
<p>Olaf</p> 
```

# java - 创建更复杂的数独 (69x6)

> ID：15340856
> 
> 赞同：2
> 
> 时间：2013-03-11T14:16:47.447
> 
> 标签：java, algorithm, sudoku

我想知道是否可以使用此规则创建“数独”：在 69x6 的表中，我想输入从 1 到 46 的数字，重复 9 次，每个数字必须与其他数字保持在同一列中1 次，也只有 1 次。

含义：如果我有 9 个列中包含数字 1，则其他 5x9 (45) 数字将是从 2 到 46 的所有数字，因此 1 包含所有数字 1，并且只有 1 次。

（我做了一个程序来尝试填写数字，但我从来没有输入超过 382of414 个数字）这里是：[http ://pastebin.com/JFtb8SVg](http://pastebin.com/JFtb8SVg)

我没有把它贴在这里，因为它有 350 行，并用意大利语评论，我不想让你更正我的程序，就像告诉我我想做的事情是否可行

谢谢

戈卡莱克斯

# javascript - jQuery从动态数组中获取值

> ID：15340857
> 
> 赞同：1
> 
> 时间：2013-03-11T14:16:48.937
> 
> 标签：javascript, jquery, arrays

我有一个带有 divs ids 的数组（在我的情况下，它的所有 divs ID 值 od parent div (#area) ）：

```
jQuery.fn.getIdArray = function () {
 var ret = [];
 $('[id]', this).each(function () {
  ret.push(this.id);
 });
 return ret;
 };

var array = $("#area").getIdArray(); 
```

我需要获取一个数组字段值，如下所示：

```
var lef = $("#array".[0]).css("left"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T14:19:23.677

对它进行疯狂的摆动（见我对这个问题的评论）：

```
var array = $("#area").getIdArray();
var lef=$("#" + array[0]).css("left"); 
```

这假设`getIdArray`返回一个字符串数组，其中每个字符串是`id`一个 DOM 元素的值，并且您想要获取`left`这些元素中的第一个的值。

例如，如果数组返回为：

```
["foo", "bar", "charlie"] 
```

然后由`"#" + array[0]`is创建的选择器`#foo`，因此您最终获得了元素的`left`值。`foo`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T14:19:37.447

如果您的变量中有一个实际的 JS 数组，`array`只需使用括号表示法来访问每个单独的 ID。

```
// I have the # before-hand since I'm assuming you have just the ID name
var lef = $('#' + array[0]) // this will access the 1st one in the array 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T14:22:19.310

我想你正在寻找这个：

```
var divYouWantToChange = $("#"+array[0]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T14:34:52.380

我尝试将此作为答案，因为 getIdArray 不是 jquery 函数，我们不知道它的作用。如果您想将自定义过滤器应用于 $("#area") 集合，您可以使用过滤器来实现。这将返回一个 jquery 对象，您可以从中获取 .css("left") 。

如果您想同时保存 id 和 left 属性，可以使用以下代码进行操作：

```
var objects=[];
$("#area").filter(function(){
  $this=$(this);//cache the object
  objects.push({id:$this.attr("id"),
   left:$this.css("left")
  };
});
console.log(objects); 
```

# php - CakePHP 控制器方法不写入数据库

> ID：15340865
> 
> 赞同：0
> 
> 时间：2013-03-11T14:17:09.310
> 
> 标签：php, cakephp, cakephp-model

我正在从另一个控制器的方法中调用一个控制器方法。我可以确认正在调用该方法，因为当我对传递的数据执行 print_r 时，我看到了我期望的一切。我的问题是，当我调用 $this->Log->save($this->data) 时，没有任何东西写入数据库。我是一名 .NET 开发人员，因此我对 cakePHP 知之甚少，但我知道这是应该将内容保存到数据库的方式，因此我很困惑。

```
<?php
//The calling controller
App::import('Controller', 'Logs');
class othAuthComponent extends Object //I noticed this inherits from Object, 
                                      //but it doesn't seem to be a problem
{
    function SomeFunction()
    {
        //create instance of our Logs controller as per example
        $Logger = new LogsController;
        $Logger->constructClasses();
        $Logger->cms_addlog($user['User']['name'].' Logged in', $user['User']['id']);
    }
}
?> 
```

和罪犯：

```
<?php
//the called controller
class LogsController extends AppController 
{
    function cms_addlog($note,$ba_id)
    {

        $this->Log->create();
        $curDateTime = getdate();

        $this->data['LogTime'] = $curDateTime;
        $this->data['Note'] = $note;
        $this->data['brandactivatorid'] = $ba_id;
        //print_r($this->data);
            //die();
        $this->Log->save($this->data);
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:28:46.793

正确的做法是让 cms_addlog 函数成为 Log 模型的一部分。

然后打电话

`$this->Log->cms_addlog($user['User']['name'].' Logged in', $user['User']['id']);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:34:19.243

您不应该从代码中的任何位置调用控制器操作/方法。控制器操作旨在直接从浏览器访问。

干净的方法是在模型中实现 addLog 方法，然后从控制器或组件调用该方法。

请阅读[http://book.cakephp.org/2.0/en/getting-started/cakephp-structure.html](http://book.cakephp.org/2.0/en/getting-started/cakephp-structure.html)和[http://book.cakephp.org/2.0/en/cakephp-overview/understanding-model-view- controller.html](http://book.cakephp.org/2.0/en/cakephp-overview/understanding-model-view-controller.html)以供进一步参考。

# mysql - SQL：使用 WHERE 过滤器时返回 0 的聚合函数

> ID：15340866
> 
> 赞同：0
> 
> 时间：2013-03-11T14:17:13.973
> 
> 标签：mysql, sql, mysql-workbench

我有一个包含 10 列的表格，其中列出了营销活动的结果，包括人名、日期、居住区域、请求和响应。

请求列始终是一个数字，表示我们向特定人员发送的调查请求数。

响应列是一个从 0 到 X 的数字，表示一个人已响应接受的调查数。

现在，当我查看实际表格时，可能有 10% 左右的响应率。在响应列中有很多非零条目。

但是，当我编写这样的聚合函数时：

```
SELECT person, date, SUM(requests), SUM(response)
FROM analytics.SurveyResults0304
WHERE group_type = 'Youth'
GROUP BY person, date; 
```

我得到了 SUM（请求）的正确数字，但我得到了 SUM（响应）的大胖“0”？这对于所有 3 组类型都是相同的。它为 SUM(response) 返回 0

更新：当我不包含 group_type 过滤器时它工作正常，但为什么我不能将它与 WHERE 过滤器一起使用？

谢谢！！！

EDIT2：样本表

```
 Person    Date       Group_Type   Requests Response  Neighborhood FirstName  
  --------  --------   -----------  -------- --------  ------------ ---------
  Nixon     3/3/2013    Youth          3        3  Chinatown    Richard
  Clinton   3/3/2013    Youth          4        0  Gunhill      Bill
  Mao       3/3/2013    Youth          5        0  Berryville   Chairman
  Nixon     3/4/2013    Youth         17        2  Townsford    Richard
  Gates     3/3/2013    Elderly       41        5  Chinatown    Bill
  Gates     3/4/2013    Elderly        0        0  Chinatown    Bill
  Gates     3/5/2013    Elderly        0        0  Chinatown    Bill
  Gates     3/6/2013    Elderly        0        0  Chinatown    Bill 
```

例如当我这样做时：

```
SELECT  SUM(requests), SUM(response)
FROM analytics.SurveyResults0304
WHERE group_type = 'Youth'; 
```

它返回 70 表示请求，0 表示全面响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:55:22.947

您的代码似乎正在运行。请参阅根据您的数据示例构建的[SQL Fiddle 。](http://sqlfiddle.com/#!2/9ded19/1)

您的列中可能有**额外的空格和/或制表符**`Group_Type`吗？

```
PERSON  DATE                 SUM(REQUESTS)  SUM(RESPONSE)
--------------------------------------------------------
Clinton March, 03 2013 00:00:00+0000    4   0
Mao     March, 03 2013 00:00:00+0000    5   0
Nixon   March, 03 2013 00:00:00+0000    3   3
Nixon   March, 04 2013 00:00:00+0000    17  2 
```

# c# - 为什么我无法获取 CPU 风扇速度信息或数据或温度以外的任何信息？

> ID：15340868
> 
> 赞同：2
> 
> 时间：2013-03-11T14:17:17.127
> 
> 标签：c#, openhardwaremonitor

我在我的项目中使用 OpenHardwareMonitorLib.dll。我在课堂上有这个功能：

```
public static void cpuView(bool pause , CpuTemperature cpuTemp , Form1 f1 , List<string> myData , float? myCpuTemp , Button b1)
        {
            if (pause == true)
            {
            }
            else
            {
                Computer myComputer = new Computer();
                myComputer = new Computer(cpuTemp)
                {
                    CPUEnabled =

                        true
                };

                myComputer.Open();
                Trace.WriteLine("");
                foreach (var hardwareItem in myComputer.Hardware)
                {
                    if (hardwareItem.HardwareType == HardwareType.CPU)
                    {
                        hardwareItem.Update();
                        foreach (IHardware subHardware in hardwareItem.SubHardware)
                            subHardware.Update();

                        foreach (var sensor in hardwareItem.Sensors)
                        {
                            cpuTemp.SetValue("sensor", sensor.Value.ToString());
                            if (sensor.SensorType == SensorType.Temperature)
                            {
                                sensor.Hardware.Update();
                                cpuTemp.GetValue("sensor", sensor.Value.ToString());                                
                                f1.Invoke(new Action(() => myData.Add("Cpu Temeprature --- " + sensor.Value.ToString())));
                                myCpuTemp = sensor.Value;
                                if (sensor.Value > 60)
                                {

                                    Logger.Write("The Current CPU Temperature Is ===> " + sensor.Value);
                                    b1.Enabled = true;
                                }

                                break;
                            }
                            if (sensor.SensorType == SensorType.Fan)
                            {
                                sensor.Hardware.Update();
                                cpuTemp.GetValue("sensor", sensor.Value.ToString());
                                f1.Invoke(new Action(() => myData.Add("Cpu Temeprature --- " + sensor.Value.ToString())));
                                myCpuTemp = sensor.Value;
                                if (sensor.Value > 60)
                                {
                                    Logger.Write("The Current CPU Temperature Is ===> " + sensor.Value);
                                    b1.Enabled = true;
                                }
                                break;
                            }
                        }
                    }
                }
            }
        } 
```

此功能正在运行。我可以获取并查看 CPU 温度。但是，一旦我在这条线上将传感器类型更改为 Fan 之类的任何其他类型：

```
if (sensor.SensorType == SensorType.Temperature) 
```

至

```
if (sensor.SensorType == SensorType.Fan) 
```

`SensorType`那么只有当is时才会 == 相等`Temperature`。除了温度，我如何获取我的 CPU 的其他硬件的其他信息？

cpuTemp 是另一个类：

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Windows.Forms;
using OpenHardwareMonitor.Hardware;

namespace HardwareMonitoring
{
    class CpuTemperature:ISettings
    {    
        public CpuTemperature()
        {

        }

        private IDictionary<string, string> settings = new Dictionary<string, string>();

        public CpuTemperature(IDictionary<string, string> settings)
        {
            this.settings = settings;

        }

        public bool Contains(string name)
        {
            return settings.ContainsKey(name);
        }

        public string GetValue(string name, string value)
        {
            string result;
            if (settings.TryGetValue(name, out result))
                return result;
            else
                return value;
        }

        public void Remove(string name)
        {
            settings.Remove(name);
        }

        public void SetValue(string name, string value)
        {
            settings[name] = value;
        }

    }
} 
```

我忘了提到在构造函数的 Form1 中我有这个：

```
cpu = new CpuTemperature(new Dictionary<string, string>
            {
                { "/intelcpu/0/temperature/0/values", "H4sIAAAAAAAEAOy9B2AcSZYlJi9tynt/SvVK1+B0oQiAYBMk2JBAEOzBiM3mkuwdaUcjKasqgcplVmVdZhZAzO2dvPfee++999577733ujudTif33/8/XGZkAWz2zkrayZ4hgKrIHz9+fB8/Iu6//MH37x79i9/+NX6N3/TJm9/5f/01fw1+fosnv+A/+OlfS37/jZ/s/Lpv9fff6Ml/NTef/yZPnozc5679b+i193//TQZ+/w2Dd+P9/sZeX/67v/GTf/b3iP3u4/ObBL//73+i+f039+D8Zk/+xz/e/P6beu2TQZju8yH8f6OgzcvPv/U3/Rb8+z/0f/9b/+yfaOn8079X6fr6Cws7ln/iHzNwflPv99/wyS/+xY4+v/evcJ+733+jJ5//Cw7/4ndy9Im3+U2e/Fbnrk31C93vrt/fyPvdb+N//hsF7/4/AQAA//9NLZZ8WAIAAA==" },
                { "/intelcpu/0/load/0/values", "H4sIAAAAAAAEAOy9B2AcSZYlJi9tynt/SvVK1+B0oQiAYBMk2JBAEOzBiM3mkuwdaUcjKasqgcplVmVdZhZAzO2dvPfee++999577733ujudTif33/8/XGZkAWz2zkrayZ4hgKrIHz9+fB8/Iu6//MH37x79i9++mpwcv/md/9df89egZ/xX/ym/5y/4D37618Lv7ya//u+58+u+5d9/z7/5t/w9/6u5fP5bH/6av+eTkXyefXxp26ONaf/v/dG/sf39D/rvnv4e5vc/0IP56/waK/vuHzf5I38P8/tv+mv8Rbb9f0pwTF9/zr/1X9vP/8I//+/6Pf7Z30N+/zdf/HX29zd/859q4aCNP5b//U+U3/+7f+zXOjZwfqvDX/V7/o9/vPz+a1G/pv0f+fGlhfk7eZ//N3/0v28//5X0u/n8Cxq7+f1X/tHft20A5x8a/W5/02+BP36Nf+j/nv8XfzrT+c2//Ob4p3+vktvUhNs/+xcWikP6e/4T/5jS5M8/sL8vP/5ff49f/Ivl9//sHzv6PX/vXyG//9R/94/9HuZ34P/5vyC//3W/5e/1exa/k+Bw4bUBnU2bP4Xg/1bn0uafeTH6PatfKL//N3/0t2y/gG9+/8+IzqYNxmU+/+jwX7afY67/nwAAAP//GYSA31gCAAA=" },
            }); 
```

# magento - Magento - 使用自定义源模型导入属性

> ID：15340875
> 
> 赞同：1
> 
> 时间：2013-03-11T14:17:44.987
> 
> 标签：magento, import, attributes

我在导入具有自定义源模型的产品属性值时遇到了问题（因此属性编辑页面中没有可见选项）。简单地说，它也不适用于选项 ID 值或选项标签。

当我尝试使用此属性导出产品时，出现错误

```
Invalid option ID specified for ceneo_category_id (2278), skipping the record. (Line 1, SKU: ...) 
```

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T11:33:14.973

我想我刚刚遇到了同样的问题：

1.  使用产品的自定义源模型创建了自定义多选属性。
2.  标签是“人类可读的”，值是字母数字代码。
3.  在 csv 产品导入文件中使用了字母数字代码。
4.  尝试使用 Magento 导入加载具有此属性的产品。
5.  得到错误：行中“test_attr”的值无效：1

经过一些调试，这似乎是因为： - **Mage_ImportExport_Model_Import_Entity_Abstract#isAttributeValid(..)**报告属性值无效（案例“多选”行）。- 这是因为它正在检查 csv 文件中的值（字母数字代码）并发现它不在此属性的有效选项列表中。这是因为它的有效选项列表包含标签。- 选项列表包含标签而不是值/代码的原因是因为在**Mage_ImportExport_Model_Import_Entity_Abstract#getAttributeOptions(..)**它决定使用标签，因为该属性不在应该使用值的属性数组中。该数组在**Mage_ImportExport_Model_Import_Entity_Abstract**中声明：

```
protected $_indexValueAttributes = array(
    'status',
    'tax_class_id',
    'visibility',
    'enable_googlecheckout',
    'gift_message_available',
    'custom_design'
); 
```

因此，答案是在 csv 文件中使用属性的标签。或者覆盖**Mage_ImportExport_Model_Import_Entity_Abstract**以将您的属性放入产品导入期间预期值而非标签的属性数组。

# ruby-on-rails - 使用rails和postgresql中的键值进行不区分大小写的搜索

> ID：15340879
> 
> 赞同：3
> 
> 时间：2013-03-11T14:17:54.500
> 
> 标签：ruby-on-rails, ruby, postgresql, activerecord

我已经编写了正在运行的搜索功能，但我希望它不区分大小写。
我怎样才能让它不敏感，虽然我不想改变条件，因为它运行得很好。所有四个参数都是可选的，如果它们中的任何一个基于此条件存在，它就会起作用。

```
conditions = {}
conditions['first_name'] = params[:first_name] unless params[:first_name].blank?
conditions['last_name'] = params[:last_name] unless params[:last_name].blank?
conditions['specialities.name'] = params[:speciality] unless params[:speciality].blank?
conditions['locations.zipcode'] = params[:zipcode] unless params[:zipcode].blank?

search = Model.using_scope.where(conditions) 
```

我使用 PostgreSQL 作为区分大小写的数据库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T14:21:31.570

尝试使用`LOWER`(sql) 和`downcase`(ruby)的组合

```
 search = Model.using_scope
  search = search.where('LOWER(first_name) = ?', params[:first_name].downcase) unless params[:first_name].blank?
  search = search.where('LOWER(last_name) = ?', params[:last_name].downcase) unless params[:last_name].blank?
  search = search.where('specialities.name = ?', params[:speciality]) unless params[:speciality].blank?
  search = search.where('locations.zipcode = ?', params[:zipcode]) unless params[:zipcode].blank? 
```

# regex - 如何在 <> 括号之间 grep 文本和数字

> ID：15340884
> 
> 赞同：0
> 
> 时间：2013-03-11T14:18:06.573
> 
> 标签：regex, perl, grep

我是 Perl 的新手，想知道您是否可以帮助我进行查询。

我正在尝试从文本文件中提取 <> 括号之间的确切文本和数字序列。

这是代码：

```
open (FILE1, "file.txt") or die ("Error: File cannot be found"); 
@file1 = <FILE1>; 
@file2 = join(' ', @file1); 
my @grabJustTheHVSection = grep { $_ =~ /\<HV\>.*\<\\HV\>/s} @file2; 
close(FILE); 
```

我希望数组 @grabJustTheHVSection 仅包含 file1.txt 中的以下内容：
00000000 00000010 00000100 00001000 00000000 00100000 00000000 00000010 00000100 00001000 000000000 <\HVSection

更多示例代码：

```
@file2  = join('', @file1); 
my @replace = grep { $_ =~ /\<HV>/g } @file2;
foreach $_ (@replace){
    if($_ !~ m/.PDT>/g){
    s /<HV>/<PDT>/g;
    s /<\\HV>/<\\PDT>/g;
    (print NEW $_) or die "Cant write to $new: $!";
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:36:48.070

如果这是某种标记语言，您可能应该改用解析器。中的“反转”反斜杠`<\HV>`似乎表示其他内容，但也许这是一个错字？

无论如何，您可以使用[触发器运算符](http://perldoc.perl.org/perlop.html#Range-Operators)。要点是在条件之间触发器返回真，否则为假。

```
use strict;
use warnings;
use Data::Dumper;

chomp(my @file = <DATA>);

my @HV = grep /<HV>/ .. /<\\HV>/, @file;
print Dumper \@HV;

__DATA__
foo
<HV>
00000000 00000010 00000100 00001000 00000000 00100000
00000000 00000010 00000100 00001000 00000000 00100000
<\HV>
bar 
```

**输出：**

```
$VAR1 = [
          '<HV>',
          '00000000 00000010 00000100 00001000 00000000 00100000',
          '00000000 00000010 00000100 00001000 00000000 00100000',
          '<\\HV>'
        ]; 
```

# php - 当元素存在于数据库中时选中复选框

> ID：15340891
> 
> 赞同：0
> 
> 时间：2013-03-11T14:18:33.670
> 
> 标签：php, html, mysql

我有一个具有不同权限名称的表和另一个具有权限 ID 和具有该权限的 user_ID 的表。我有一个表单，我在其中提交适用于某个用户的权限。现在，我想检索这些权限和复选框以防它们有效。我使用此代码，但它似乎不起作用。

```
<?php
include "db.php";
$employees=mysql_query("SELECT * FROM asiakas");

echo "<form method='post' action='' id='employeesselection'><select name='select_employee' id='select_employee'>";
while($row=mysql_fetch_array($employees)){
        $selected = ($row['Id'] == $_POST['select_employee'])?'selected="selected"':'';
        echo '<option '.$selected.' value="'.$row['Id'].'">'.$row['Etunimi'].' - '. $row['Sukunimi'].'</option>';

    }
echo "</select><input type='hidden' name='action' value='selectedemployee'>
        <input type='submit' value ='submit' name='submit'><br/>";

if(isset($_POST['select_employee'])){
    $specific=mysql_query("SELECT Id, Sukunimi,Etunimi from asiakas WHERE Id=".$_POST['select_employee']);
    $sp=mysql_fetch_array($specific);
}
if(isset($sp['Etunimi']) && isset($sp['Sukunimi'])){
        $comp=mysql_query("SELECT * FROM Competences"); 
        echo "<br/>select competences for: ". $sp['Etunimi'];
        $id= $sp['Id'];

        $result=mysql_query("SELECT distinct c_ID from User_Competence WHERE e_ID=".$id);
        while($test=mysql_fetch_array($result))
        {
            echo $test['c_ID']; 
        }

        echo "<table><th>valid?</th><th>Competence description</th>";

        $counter=0;
        $traverse=0;

        while($compi=mysql_fetch_array($comp)){
            $checked='';
            if($test[$traverse]==$counter){
                $checked="checked";
                $traverse++;
            }
            $counter ++;
            echo "<tr><td><input type='checkbox'" .$checked." name='c[]' value='".$compi['Competence_ID']."'></td><td>".$compi['Competence_Description']."</td></tr>";
            }
            echo "</table>";
            echo "<input type='hidden' name='action' value='selectchecked'>";
            echo "<input type='submit' value='submit checks'>"; 
        }

        if(isset($_POST) && !empty($_POST)){
            print_r($_POST);
        }
        if(isset($_POST['action']) && $_POST['action']='selectchecked'){

            if (isset($_POST['c'])){
                $s = $_POST['c'];

                foreach ($s as $k => $v) {

                    if (is_array($v)) {

                        //  array_push($s, implode('', array($v [$what])));

                    }
            };
                echo $abc= implode(',', $s);

                for ( $a=0;$a<count($s);$a++){          
                    $ar=explode(',',$abc);
                    echo $var= $ar[$a];
                    $q=mysql_query("INSERT INTO user_competence(c_ID, e_ID) VALUES ('".$var."','".$id."')");

                }
            }

        }
        echo "</form>"; 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:23:00.570

如果你把它`checked`作为一个属性放在`<input type="checkbox">`它上面，它将被检查，即使你将属性的实际值留空。

因此，将以下部分从...

```
$checked="checked";
...
echo "<tr><td><input type='checkbox' checked='".$checked."' name='c[]' ... 
```

进入...

```
$checked="checked='checked'";
...
echo "<tr><td><input type='checkbox' ".$checked." name='c[]' ... 
```

这意味着如果`$test[$traverse$]`为真，`checked='checked'`将被放入 HTML 中，否则将被排除在外。

# java - 如何将 Jasypt 与弹簧自动装配一起使用？

> ID：15340892
> 
> 赞同：0
> 
> 时间：2013-03-11T14:18:37.187
> 
> 标签：java, spring, spring-security, jasypt

我已经看到了一些没有自动接线的解决方案，但我试图让它与自动接线一起使用。自上周以来我一直在尝试这个，但没有找到适合我的解决方案，可能是我没有正确实施它，所以任何帮助都会很棒。

我有一个属性文件`myprops.properties`：

```
Wsdl=someurl
UserName=admin
UserPassword=ENC(encriptedpassword) 
```

在我的 servlet.xml 文件中我替换了

```
<context:property-placeholder location="classpath*:myprops.properties" /> 
```

和

```
 <bean id="propertyPlaceholderConfigurer"
            class="org.jasypt.spring.properties.EncryptablePropertyPlaceholderConfigurer">
            <constructor-arg ref="configurationEncryptor" />
            <property name="location" value="classpath:myprops.properties" />
        </bean>
        <bean id="configurationEncryptor" class="org.jasypt.encryption.pbe.StandardPBEStringEncryptor">
            <property name="config" ref="environmentVariablesConfiguration" />
        </bean>
        <bean id="environmentVariablesConfiguration"
              class="org.jasypt.encryption.pbe.config.EnvironmentStringPBEConfig">
              <property name="algorithm" value="PBEWithMD5AndDES" />
              <property name="passwordEnvName" value="APP_ENCRYPTION_PASSWORD" />
</bean> 
```

在我的 service.java 中，我自动连接这些值，如下所示：

```
 @Autowired
    public void setUserPassword(@Value("${UserPassword}") String userPassword) {
        this.userPassword = userPassword;
    }

    @Autowired
    public void setUserName(@Value("${UserName}") String userName) {
        this.userName = userName;
    }

    @Autowired
    public void setWsdl(@Value("${Wsdl}") String wsdl) {
        this.wsdl = wsdl;
    } 
```

事情是当我没有加密密码时这是有效的，即`UserPassword=nonencriptedpassword`

但是一旦我将其加密并使用 ENC() 我就会收到以下错误

```
weblogic.application.ModuleException: 
    at weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1510)
    at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:482)
    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
    Truncated. see log file for complete stacktrace
Caused By: java.lang.NullPointerException
    at org.jasypt.encryption.pbe.config.SimplePBEConfig.getPasswordCharArray(SimplePBEConfig.java:434)
    at org.jasypt.encryption.pbe.StandardPBEByteEncryptor.resolveConfigurationPassword(StandardPBEByteEncryptor.java:740)
    at org.jasypt.encryption.pbe.StandardPBEByteEncryptor.initialize(StandardPBEByteEncryptor.java:590)
    at org.jasypt.encryption.pbe.StandardPBEStringEncryptor.initialize(StandardPBEStringEncryptor.java:553)
    at org.jasypt.encryption.pbe.StandardPBEStringEncryptor.decrypt(StandardPBEStringEncryptor.java:705)
    Truncated. see log file for complete stacktrace 
```

这可能是一些我不知道或忽略的愚蠢简单的事情，但我已经尝试按照[Jasypt wiki](https://wiki.jasig.org/display/CASUM/HOWTO+Use+Jasypt+to+encrypt+passwords+in+configuration+files)和网站上的教程以及教程[xmx1024](http://xmx1024.blogspot.com/2012/10/encrypting-properties-file-values-with.html)和 jayway 上[的](http://www.jayway.com/2008/12/09/encrypting-properties-with-jasypt/)教程，我确定我找到了一个使用自动连线的但我好像再也找不到了。

仅供参考：我使用的是 spring 3.0.4、Spring Security 3.0.4 和 jasypt 1.9

任何帮助都是极好的

## 更新

我已将环境变量设置为`APP_ENCRYPTION_PASSWORD`等于纯文本密码，并将属性文件中的密码设置为的返回值 `encrypt input=plaintextpassword password=APP_ENCRYPTION_PASSWORD`

我现在得到错误

```
<11-Mar-2013 16:33:54 o'clock GMT> <Warning> <HTTP> <BEA-101162> <User defined listener org.springframework.web.context.ContextLoaderListener failed: org.jasypt.exceptions.EncryptionOperationNotPossibleException.
org.jasypt.exceptions.EncryptionOperationNotPossibleException
    at org.jasypt.encryption.pbe.StandardPBEByteEncryptor.decrypt(StandardPBEByteEncryptor.java:981)
    at org.jasypt.encryption.pbe.StandardPBEStringEncryptor.decrypt(StandardPBEStringEncryptor.java:725)
    at org.jasypt.properties.PropertyValueEncryptionUtils.decrypt(PropertyValueEncryptionUtils.java:72)
    at org.jasypt.spring3.properties.EncryptablePropertyPlaceholderConfigurer.convertPropertyValue(EncryptablePropertyPlaceholderConfigurer.java:109)
    at org.springframework.beans.factory.config.PropertyResourceConfigurer.convertProperty(PropertyResourceConfigurer.java:112)
    Truncated. see log file for complete stacktrace
> 
<11-Mar-2013 16:33:54 o'clock GMT> <Error> <Deployer> <BEA-149265> <Failure occurred in the execution of deployment request with ID '1363019632631' for task '0'. Error is: 'weblogic.application.ModuleException: '
weblogic.application.ModuleException: 
    at weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1510)
    at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:482)
    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
    Truncated. see log file for complete stacktrace
Caused By: org.jasypt.exceptions.EncryptionOperationNotPossibleException
    at org.jasypt.encryption.pbe.StandardPBEByteEncryptor.decrypt(StandardPBEByteEncryptor.java:981)
    at org.jasypt.encryption.pbe.StandardPBEStringEncryptor.decrypt(StandardPBEStringEncryptor.java:725)
    at org.jasypt.properties.PropertyValueEncryptionUtils.decrypt(PropertyValueEncryptionUtils.java:72)
    at org.jasypt.spring3.properties.EncryptablePropertyPlaceholderConfigurer.convertPropertyValue(EncryptablePropertyPlaceholderConfigurer.java:109)
    at org.springframework.beans.factory.config.PropertyResourceConfigurer.convertProperty(PropertyResourceConfigurer.java:112)
    Truncated. see log file for complete stacktrace
> 
<11-Mar-2013 16:33:54 o'clock GMT> <Error> <Deployer> <BEA-149202> <Encountered an exception while attempting to commit the 1 task for the application 'adminUI_EA'.> 
<11-Mar-2013 16:33:54 o'clock GMT> <Warning> <Deployer> <BEA-149004> <Failures were detected while initiating deploy task for application 'adminUI_EA'.> 
<11-Mar-2013 16:33:54 o'clock GMT> <Warning> <Deployer> <BEA-149078> <Stack trace for message 149004
weblogic.application.ModuleException: :org.jasypt.exceptions.EncryptionOperationNotPossibleException:null
    at org.jasypt.encryption.pbe.StandardPBEByteEncryptor.decrypt(StandardPBEByteEncryptor.java:981)
    at org.jasypt.encryption.pbe.StandardPBEStringEncryptor.decrypt(StandardPBEStringEncryptor.java:725)
    at org.jasypt.properties.PropertyValueEncryptionUtils.decrypt(PropertyValueEncryptionUtils.java:72)
    at org.jasypt.spring3.properties.EncryptablePropertyPlaceholderConfigurer.convertPropertyValue(EncryptablePropertyPlaceholderConfigurer.java:109)
    at org.springframework.beans.factory.config.PropertyResourceConfigurer.convertProperty(PropertyResourceConfigurer.java:112)
    Truncated. see log file for complete stacktrace
> 
```

密码加密是通过以下方式完成的

```
C:\Users\jonnie\Desktop\jasypt-1.9.0\bin>encrypt input=****** password=APP_ENCRYPTION_PASSWORD

----ENVIRONMENT-----------------

Runtime: Sun Microsystems Inc. Java HotSpot(TM) 64-Bit Server VM 20.12-b01

----ARGUMENTS-------------------

input: *******
password: APP_ENCRYPTION_PASSWORD

----OUTPUT----------------------

****encriptedPassword**** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T16:02:21.743

这篇[博](http://chrislovecnm.com/2011/06/16/encrypting-spring-3-java-based-configurations-values-with-jasypt/)文有一个很好的例子，在使用 @Service 构建的 bean 上使用 @Value。该测试使用@Autowire 设置@Service bean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T17:37:14.733

1.  设置以下变量 Eclipse - 转到运行配置并在环境选项卡下设置新变量键/值 APP_ENCRYPTION_PASSWORD=MyKey 如果在 UNIX 上运行 - 导出 APP_ENCRYPTION_PASSWORD=MyKey

2.  创建如下所示的bean =>

    类路径：/app1.properties 类路径：/app2.properties

# jquery - 用文本计算 div 中的高度

> ID：15340897
> 
> 赞同：-1
> 
> 时间：2013-03-11T14:18:55.543
> 
> 标签：jquery

如何使用 jquery 计算 div 文本的高度或字数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T14:19:37.577

你可以使用 height()，试试这个

```
var height = $("div").height(); 
```

O 和数词会是这样的

```
var words = $('div').text().split(' ').length; 
```

# java - 使用 java.lang.OutOfMemoryError 进行 Junit 测试已被捕获，Java 堆空间

> ID：15340898
> 
> 赞同：1
> 
> 时间：2013-03-11T14:18:58.023
> 
> 标签：java, testing, junit, playframework

我正在尝试对 Web 应用程序进行一些 junit 测试，但我不断收到 OutOfMemoryError。我知道它在代码中发生的位置，但我不确定它为什么这样做。

```
Survey survey = new Survey();
        SurveyLayoutColumn column1 = new SurveyLayoutColumn();
        column1.addAnswerSpace(new Answer());
        SurveyLayoutColumn column2 = new SurveyLayoutColumn();
        column2.addAnswerSpace(new Answer());
        column2.addAnswerSpace(new Answer());
        SurveyLayoutColumn column3 = new SurveyLayoutColumn();
        column3.addAnswerSpace(new Answer());
        survey.addLayoutColumn(column1);
        survey.addLayoutColumn(column2);
        survey.addLayoutColumn(column3);
        survey.addQuestion(new Question());
        survey.addQuestion(new Question());
        survey.addQuestion(new Question());
        survey.addQuestion(new Question());
        Application app = new controllers.Application();
        app.saveSurvey(survey);
        long count = Survey.count();
        assertEquals(count,0); 
```

它发生在 app.saveSurvey(surey) ，这是该方法的代码

```
public static void saveSurvey(Survey survey) {
        System.out.println("Survey title is: " + survey.title);

        survey.published = true;
        survey.save();

        Map<String, Object> viewData = new HashMap<String, Object>();

        viewData.put("status", "success");

        JSONSerializer serializer = new JSONSerializer();

        serializer
            .include("status")
            .exclude("*");

        renderJSON(serializer.serialize(viewData));
    } 
```

任何帮助都会很好地说明为什么会发生这种情况。

编辑：这是痕迹

```
java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Arrays.java:2882)
    at java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:100)
    at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:390)
    at java.lang.StringBuilder.append(StringBuilder.java:119)
    at play.data.binding.Unbinder.unBind(Unbinder.java:106)
    at play.data.binding.Unbinder.unBind(Unbinder.java:110)
    at play.data.binding.Unbinder.unBind(Unbinder.java:63)
    at play.data.binding.Unbinder.unBind(Unbinder.java:110)
    at play.data.binding.Unbinder.unBind(Unbinder.java:110)
    at play.data.binding.Unbinder.unBind(Unbinder.java:63)
    at play.data.binding.Unbinder.unBind(Unbinder.java:110)
    at play.data.binding.Unbinder.unBind(Unbinder.java:110)
    at play.data.binding.Unbinder.unBind(Unbinder.java:63)
    at play.data.binding.Unbinder.unBind(Unbinder.java:110)
    at play.data.binding.Unbinder.unBind(Unbinder.java:110)
    at play.data.binding.Unbinder.unBind(Unbinder.java:63)
    at play.data.binding.Unbinder.unBind(Unbinder.java:110)
    at play.data.binding.Unbinder.unBind(Unbinder.java:110)
    at play.data.binding.Unbinder.unBind(Unbinder.java:63)
    at play.data.binding.Unbinder.unBind(Unbinder.java:110)
    at play.data.binding.Unbinder.unBind(Unbinder.java:110)
    at play.data.binding.Unbinder.unBind(Unbinder.java:63)
    at play.data.binding.Unbinder.unBind(Unbinder.java:110)
    at play.data.binding.Unbinder.unBind(Unbinder.java:110)
    at play.data.binding.Unbinder.unBind(Unbinder.java:63)
    at play.data.binding.Unbinder.unBind(Unbinder.java:110)
    at play.data.binding.Unbinder.unBind(Unbinder.java:110)
    at play.data.binding.Unbinder.unBind(Unbinder.java:63)
    at play.data.binding.Unbinder.unBind(Unbinder.java:110)
    at play.data.binding.Unbinder.unBind(Unbinder.java:110)
    at play.data.binding.Unbinder.unBind(Unbinder.java:63)
    at play.data.binding.Unbinder.unBind(Unbinder.java:110) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:05:59.227

好吧，Unbinder.unbind() 似乎在一个循环中，调用自身，并且在每次调用时它都会吸收一些内存；它可以用它在每次调用时使用的堆栈或连接到 AbstractStringBuilder 的东西来做到这一点。

内存不足是堆栈跟踪不一定指向问题行的时候。在这些情况下，堆栈跟踪通常会显示一些这样的循环。

# python-2.7 - Matplotlib 滑块小部件和更改颜色条阈值

> ID：15340910
> 
> 赞同：1
> 
> 时间：2013-03-11T14:19:27.357
> 
> 标签：python-2.7, widget, matplotlib, slider

我目前正在尝试开发一个程序，该程序允许用户以颜色图的形式显示他们的数据集，并通过使用滑块，它还允许用户调整颜色图的阈值，从而相应地更新颜色图. 最好的描述是通过使用图片： ![在此处输入图像描述](../Images/121885b8d5d9e2762098d54e1117cbbe.png)

此图像显示颜色栏在调整之前（左侧图像）和之后（右侧图像）的外观。随着颜色条的阈值发生变化，颜色图将相应更新。

现在我主要使用 matplotlib，我发现 matplotlib 确实支持一些小部件，例如滑块。但是，我需要帮助的领域是设计一段代码，该代码将在调整滑块时更新颜色条和颜色图（如上图所示的方式）。我想知道是否有人以前这样做过，并且可能有一段他们愿意分享的代码，并且可能有关于如何实现这一点的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T04:57:19.660

This should get you 80% of the way there:

```
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.widgets import Slider, Button

ax = plt.subplot(111)
plt.subplots_adjust(left=0.25, bottom=0.25)
img_data = np.random.rand(50,50)
c_min = 0
c_max = 1

img = ax.imshow(img_data, interpolation='nearest')
cb = plt.colorbar(img)
axcolor = 'lightgoldenrodyellow'

ax_cmin = plt.axes([0.25, 0.1, 0.65, 0.03])
ax_cmax  = plt.axes([0.25, 0.15, 0.65, 0.03])

s_cmin = Slider(ax_cmin, 'min', 0, 1, valinit=c_min)
s_cmax = Slider(ax_cmax, 'max', 0, 1, valinit=c_max)

def update(val, s=None):
    _cmin = s_cmin.val
    _cmax = s_cmax.val
    img.set_clim([_cmin, _cmax])
    plt.draw()

s_cmin.on_changed(update)
s_cmax.on_changed(update)

resetax = plt.axes([0.8, 0.025, 0.1, 0.04])
button = Button(resetax, 'Reset', color=axcolor, hovercolor='0.975')
def reset(event):
    s_cmin.reset()
    s_cmax.reset()
button.on_clicked(reset)

plt.show() 
```

This is a minimally edited version of the [official demo](http://matplotlib.org/examples/widgets/slider_demo.html).

# testing - mstest 单元测试中的意外异步等待行为

> ID：15340914
> 
> 赞同：1
> 
> 时间：2013-03-11T14:19:37.277
> 
> 标签：testing, asynchronous, mstest, async-await

我在测试异步方法时遇到新手问题。我已经阅读了其他一些帖子，包括[如何使用异步方法更正写入测试？](https://stackoverflow.com/questions/12625595/how-to-correct-write-test-with-async-methods?rq=1)，我*认为*我做的事情是正确的，但我显然错过了一些东西。

这是我要测试的代码：

```
/// <summary>
/// Temporary method used to simulate the time required to generate a report.
/// </summary>
public virtual async Task GenerateTestReportAsync()
{
    ++ActiveTaskCounter;

    await Task.Delay(2000);

    --ActiveTaskCounter;
} 
```

这是测试（是的，我可以/应该通过将 ActiveTaskCounter 值存储在列表中来改进它，但这不是重点）：

```
[TestMethod]
public async Task GenerateTestReportAsyncUpdatesActiveTaskCounter()

    var bayViewModel = CreateBayViewModel();

    var invocationCount = 0;
    bayViewModel.PropertyChanged += (sender, args) =>
        {
            if (args.PropertyName == "ActiveTaskCounter")
            {
                ++invocationCount;
            }
        };

    await bayViewModel.GenerateTestReportAsync();

    //Thread.Sleep(2100); // TODO: Why is this needed?
    Assert.AreEqual(2, invocationCount);
    Assert.AreEqual(0, bayViewModel.ActiveTaskCounter);
} 
```

测试始终通过未注释的 Thread.Sleep。它总是失败并注释 Thread.Sleep，如上所示。为什么是这样？*我假设“await bayViewModel.GenerateTestReportAsync()”下面的代码在 GenerateTestReportAsync真正*完成之前不会执行。

顺便说一句，我正在使用：Microsoft Visual Studio Ultimate 2012 版本 11.0.51106.01 更新 1 Microsoft .NET Framework 版本 4.5.50709

感谢您的任何帮助，您可以提供！这让我很难过：-|

编辑：这是视图模型类的最小复制...

```
using System.ComponentModel;
using System.Threading.Tasks;

public class BayViewModel : INotifyPropertyChanged
{
    public BayViewModel()
    {
        PropertyChanged = (sender, args) => { };
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private int _activeTaskCounter;
    public int ActiveTaskCounter
    {
        get
        {
            return _activeTaskCounter;
        }
        set
        {
            _activeTaskCounter = value;
            PropertyChanged(this, new PropertyChangedEventArgs("ActiveTaskCounter"));
        }
    }

    public virtual async Task GenerateTestReportAsync()
    {
        ++ActiveTaskCounter;

        await Task.Delay(2000);

        --ActiveTaskCounter;
    }
} 
```

# php - php字符串中的相邻字符

> ID：15340920
> 
> 赞同：0
> 
> 时间：2013-03-11T14:19:42.930
> 
> 标签：php, string, locate

如何在php中找到与定位字符串相邻的字符？我正在使用 foreach 循环来查找具有 $value 变量的较大文本正文中的每个值，那么我如何还要找出 $value 字符串周围的字符？对不起，如果这令人困惑。

```
$count = 1;
foreach ($new_classes as $value)
    {
    $pageBody2 = $pageBody;
    $pageBody = str_replace($value, '<a id="link" name="links" href="http://thecompendium.comuv.com/Compendium/index.html?page=' . $value . '">' . $value . '</a>', $pageBody, $count);
        if ($pageBody == $pageBody2)
        {
        $pageBody = str_replace(strtolower($value), '<a id="link" name="links" href="http://thecompendium.comuv.com/Compendium/index.html?page=' . $value . '">' . strtolower($value) . '</a>', $pageBody, $count);
        }
    }
echo $pageBody; 
```

我想查找字符串 $value 周围的字符以查看它们是否是字母数字（检查是否有任何字母或数字字符，不包括句点或空格），以便如果有，它不会替换它们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T22:21:18.367

已解决：我想出了该怎么做：

```
$count = 1;
foreach ($new_classes as $value)
{
    $pos = stripos($pageBody, $value);
    $left = $pageBody[$pos - 1];
    $right = $pageBody[$pos + strlen($value)];

    if (!ctype_alpha($left) && (!ctype_alpha($right) || ($right == 's')))
    {
        $pageBody2 = $pageBody;
        if ($right == 's')
        {
            $pageBody = str_replace($value . 's', '<a id="link" name="links" href="http://thecompendium.comuv.com/Compendium/index.html?page=' . $value . '">' . $value . 's' . '</a>', $pageBody, $count);
            if ($pageBody == $pageBody2)
            {
                $pageBody = str_replace(strtolower($value) . 's', '<a id="link" name="links" href="http://thecompendium.comuv.com/Compendium/index.html?page=' . $value . '">' . strtolower($value) . 's' . '</a>', $pageBody, $count);
            }
        }
        else
        {
            $pageBody = str_replace($value, '<a id="link" name="links" href="http://thecompendium.comuv.com/Compendium/index.html?page=' . $value . '">' . $value . '</a>', $pageBody, $count);
            if ($pageBody == $pageBody2)
            {
                $pageBody = str_replace(strtolower($value), '<a id="link" name="links" href="http://thecompendium.comuv.com/Compendium/index.html?page=' . $value . '">' . strtolower($value) . '</a>', $pageBody, $count);
            }
        }
    }
} 
```

其他人发布了一个定义 $left、$right 和 $pos 变量的代码（但是他们后来很遗憾地删除了他们的答案，我无法得到他们的名字来给予他们信任）。如果它们被空格、句点或以 s 结尾，我将其修改为 if 语句以创建指向单词的链接。

解决方案的书面说明：我使用 stripos 在 $pageBody 中定位了 $value 的位置，用于不区分大小写的位置（因为该单词的大小写可能与其作为类的名称不同）。然后使用该位置，我通过拉动 $pageBody 中 $value 的位置并向下 1 将单词左侧的字符定义为 $left，然后通过拉动将单词右侧的字符定义为 $right再次定位，并增加 $value 中的字符数。我对 $left 进行了验证，以确保它不是字母，并确保 $right 是字母 s，或者根本不是字母。如果它通过了验证测试，那么我运行其余的代码。但是，如果 $value 旁边的任一字符是字母（不包括 s 作为 $right），则它不会执行代码

# c# - 如何编写针对数据库的集成测试

> ID：15340924
> 
> 赞同：2
> 
> 时间：2013-03-11T14:20:03.187
> 
> 标签：c#, .net, unit-testing, integration-testing

可以说我有一个像下面这样的课程。

我不确定如何针对它编写单元/集成测试。它需要重构吗？

会不会只是添加一个 Add/Find 方法（它实际上会有），在测试中调用 Add，然后调用 Delete，然后是 Find？

```
public class Repository
{
    public void DeleteProduct(int id)
    {
        var connstring = ""; //Get from web.config
        using(SqlConnection conn = new SqlConnection(connstring))
        {
            conn.Open();
            SqlCommand command = new SqlCommand("DELETE FROM PRODUCTS WHERE ID = @ID")
            command.Paramaters.Add("@ID", id)
            command.ExecuteNonQuery();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:27:41.967

黄金法则是不要测试framewkrk 的代码。除非此方法没有自定义逻辑，否则无需测试。我认为您想要实现的是分离存储库以简化单元测试。最好的方法是为您的存储库创建接口并模拟它。如果您真的想创建一些集成测试，那么您必须创建一些测试数据库，您可以在其中进行核弹实验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:28:44.947

我的建议 - 为存储库编写集成测试（因为您使用的是数据访问框架），除非您在存储库中执行的不仅仅是 CRUD。

Add/Find are all individual Repository methods, and they need to be tested themselves.

I would recommend, use `Setup` to setup seed data, that you know you can act on. In this case, insert records into `Products` table.

Then Act: Call `Repository.Deleteproduct(<product id created in setup>)`

Assert that: Product created in setup is deleted (Query the database again to check).

If you are using an ORM, this test would also test your mappings for Product.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:27:44.597

我从未为数据库调用添加单元测试。这绝对是一个集成测试。没有什么可观察到的供您检查。

我知道 Java 有一些适合 JUnit 的工具。IT 要求您编写模仿前后的 XML 文件，然后将表的内容与 XML 文件进行比较。我确信.Net 会有类似的东西。但是我不确定这是否值得。我发现这些测试非常脆弱并且提供的价值很小。

我建议采取务实的方法，不要为数据库对象编写测试。而是测试那些与您的数据库对象交互的对象。

# android - Android 从另一个线程更新 UI

> ID：15340929
> 
> 赞同：-1
> 
> 时间：2013-03-11T14:20:37.227
> 
> 标签：android, multithreading, user-interface

再会，

我想从另一个线程更新我的 UI 中的图像按钮。下面是我在我的主线程 onCreate() 方法中运行的代码。

```
 new Thread(new Runnable() {
        public void run() {

            ImageButton btn = (ImageButton) findViewById(R.id.connected_icon);
            if (netConnection.IsConnected()) {
                // Change icon to green
                btn.setImageResource(R.drawable.green_small);
            } else {
                // Change icon to red
                btn.setImageResource(R.drawable.red_small);
            }
            try {
                // Sleep for a second before re_checking.
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
    }).start(); 
```

不，当我运行它时，我在 LogCat 中生成一个错误，说我无法从另一个线程更新 UI。

我记得曾经读过 soem，这样你就不会让多个线程同时更新同一个 UI 对象。但我怎么能做到这一点。我确定有解决办法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T14:29:20.153

您不能直接从线程访问 UI 组件。正确的方法是创建一个处理程序

```
 final Handler mHandler = new Handler() { 

     public void handleMessage(Message msg) { 

     } 
 }; 
```

并向 UIThread 发送消息

```
 Message msg = new Message();
 //TODO: add stuff to message
 mHandler.sendMessage(msg); 
```

在你的线程内。

这或使用 AsyncTask 代替并从 pre、post 或 progressUpdate 方法内部进行更新

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:24:05.720

UI 元素应该只从 UI 线程更新。使用异步任务做后台word，在onPostExecute中修改UI，运行在UI线程上

# ms-access - 更新 Access 表中匹配条件的顶部行

> ID：15340932
> 
> 赞同：0
> 
> 时间：2013-03-11T14:20:53.097
> 
> 标签：ms-access

我在 Microsoft Access 表中没有自动编号的主键。我很想知道在 Sql Server 中是否有任何与此查询等效的语法：

```
update top(2) [dbtest].[dbo].[myTable]
set ColA = ColA+13
where ColA = 5 
```

此代码仅更新与“where”子句中指定的条件匹配的前 2 行（取决于您在 TOP 之后的括号中指定的内容）。

但是，如果可能的话，我需要 Access 变体。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:52:59.780

只要您在表上有一个主键，这应该可以工作：

```
UPDATE MyTable SET ColA = ColA + 13
WHERE PKField IN(SELECT TOP 2 PKField FROM MyTable WHERE ColA = 5) 
```

*注意：您可能需要在某处考虑 Order By 子句，以确保您正在更新相关的 2 条记录。*

# javascript - 跟踪 div 在 textarea 中的位置

> ID：15340936
> 
> 赞同：2
> 
> 时间：2013-03-11T14:21:00.923
> 
> 标签：javascript, jquery, html, textarea, draggable

我有一个 textarea 可以跟踪这样的可移动 div

```
 $('#content').children().draggable({ 
        drag : function () {
                $('#textarea').text("left:" +($(this).position().left) + "px" + "\ntop:" + $(this).position().top + "px");
        } 
    }); 
```

问题是，如果我在该文本区域中写一些东西，如果我移动 div，它将停止更新位置。如果 textarea 中的文字是这样的：

blablablabla 左：10px 上：20px；啦啦啦啦啦

如果我移动 div 而不删除 textarea 的其他内容，我希望能够在 textarea 中写入并更新位置。

某人应该能够在文本区域中写任何他们想要的内容，如果他们移动它，该位置将出现在特定位置或他们所写内容的末尾

有任何想法吗？

使用“.val”而不是“.text”的示例：http: [//jsfiddle.net/Ydkrw/](http://jsfiddle.net/Ydkrw/) “.val”将删除现有文本...

更新：基于 valentinos 的回答，我确实喜欢这样：http: [//jsfiddle.net/8G82U/](http://jsfiddle.net/8G82U/) 但是如果您在移动之前在 textarea 中写了一些东西，这将不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:15:25.313

您可以将表示位置的字符串保存在变量中，并在拖动 div 时仅替换该字符串。像这样：

```
var position;
var oldposition = '';

$('#content').children().draggable({
    drag: function () {       
        position = "left:" + ($(this).position().left) + "px" + "\ntop:" +     $(this).position().top + "px";
        $('#textarea').val($('#textarea').val().replace(oldposition, position));   
        oldposition = position;
    }
}); 
```

[http://jsfiddle.net/kCT9f/](http://jsfiddle.net/kCT9f/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:16:35.980

通常，当我做这样的事情时，我会在内容中添加一个替换键，并在我需要准备内容时替换它。

```
<textarea>blablablabla {left: 10px} {top: 20px} blablablablabla</textarea> 
```

像这样移动 div 时更新关键字。

```
$('#content').children().draggable({ 
    drag: function(){
        var text = $('#textarea').text();

        // Replace Keys
        text = replaceLengthKey(text, "left", $(this).position().left);
        text = replaceLengthKey(text, "top", $(this).position().top);

        // Return changes
        $("#textarea").text(text);
    } 
});

function replaceLengthKey(source, name, value){
    // Absolute length units: https://developer.mozilla.org/en-US/docs/CSS/length#Absolute_length_units
    return source.replace(RegExp("\\{" + name + ":\\s*[0-9]*(px|mm|cm|in|pt|pc)?\\}", "gm"), "{" + name + ": " + value + "}")
} 
```

然后，当你在服务器或客户端上准备好你想要的内容时，至少结构会是一致的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:30:17.163

您可以将位置文本括在括号内，然后在移动 div 时应用正则表达式并仅更改括号内的文本。这是一个工作[示例](http://jsfiddle.net/Ydkrw/15/)。

```
 var text=$('#textarea').val();
 var newPos = "(left:" + ($(this).position().left) + "px" + "\ntop:" +($(this).position().top) + "px)"
 text=text.replace(/ *\([^)]*\) */g, newPos);
 $('#textarea').val(text); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T16:11:35.910

这可能是让你开始的东西。这只是一个粗略的设计，可能会对您有所帮助。使用`substring`和`replace`javascript方法。

[小提琴](http://jsfiddle.net/Ydkrw/17/)

# sas - 获取 SAS 中的当前观察计数

> ID：15340942
> 
> 赞同：2
> 
> 时间：2013-03-11T14:21:17.897
> 
> 标签：sas

我有一个文件，其中第一行是包含一些元数据信息的标题行。

如何获得 SAS 处理器正在处理的当前观察数（比如第一次观察 =1），以便我可以放入一个 IF 子句来处理这种特殊的数据行。

跟进：我想处理第一行并将其中一个列值保留在局部变量中以供进一步处理。我不想在我的最终输出中保留这条线。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T14:38:35.997

自动变量`_N_`返回 SAS 数据步循环的当前迭代次数。对于传统的数据步骤，即：

```
data something;
set something;
(code);
run; 
```

`_N_`相当于行号（因为数据步循环的每次迭代都会检索一行）。

因此，如果您只想在第一次迭代中做某事，这将实现：

```
data something;
set something;
if _n_ = 1 then do;
  (code);
end;
(more code);
run; 
```

对于您的跟进，您需要这样的东西：

```
data want;
set have;
retain _temp;
if _n_ = 1 then do;
  _temp = x;
end;
... more code ...
drop _temp;
run; 
```

DROP 和 RETAIN 语句可以出现在代码中的任何位置并且具有相同的效果，我将它们放置在它们的人类逻辑位置。RETAIN 表示每次通过数据步骤循环都不会将变量重置为丢失，因此您可以进一步访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:04:43.870

如果您正在阅读一个特别大的文本文件，您可能希望避免`if _n_=1 then`每次迭代都必须执行 ( ) 条件。您可以通过两次读取文件来执行此操作 - 一次提取标题行，再次读取文件，如下所示：

```
data _null_; /* create dummy file for demo purposes */
file "c:\myfile.txt";
put 'blah'; output;
put 'blah blah blah 666'; output;

data _null_; /* read in header info */
infile "c:\myfile.txt";
input myvar:$10.; /* or wherever the info is that you need */
call symput('myvar',myvar);/* create macro variable with relevant info */
stop; /* no further processing at this point */

data test; /* read in data FROM SECOND LINE */
infile "c:\myfile.txt" firstobs=2 ; /* note the FIRSTOBS option */
input my $ regular $ input $ statement ;
remember="&myvar";
run; 
```

不过，对于简短/简单的东西，乔的答案更好，因为它更具可读性..（并且对于小文件可能更有效）。

# excel - Excel导出；使用 VBA，如何将单元格导出为格式化而不是原始单元格值

> ID：15340943
> 
> 赞同：0
> 
> 时间：2013-03-11T14:21:18.847
> 
> 标签：excel, export-to-csv, vba

[此链接](http://support.microsoft.com/kb/291296/en-us?wa=wsignin1.0)显示如何编写一个小程序以将单元格值括在双引号中以进行 CSV 导出。

```
' Write current cell's text to file with quotation marks.
         Print #FileNum, """" & Selection.Cells(RowCount, _
            ColumnCount).Text & """"; 
```

有没有办法引用单元格的*格式化*值并将格式化值写出来？

例如，原始数据可能是`8543`，但电子表格可能对列应用了邮政编码格式，因此值显示为`08543`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:12:13.077

做这样的事情 - 获取值，然后根据所选范围的数字格式对其进行格式化：

```
Format(Range("A1").Value, Range("A1").NumberFormat) 
```

# rest - 如何使用 REST 调用方法

> ID：15340946
> 
> 赞同：5
> 
> 时间：2013-03-11T14:21:27.663
> 
> 标签：rest

我有一个相当普遍的问题：如何正确调用 RESTful Web 服务中的方法？

该方法应该只在数据库中进行转换并且不返回任何内容（所以没有 GET？！）。但是我也没有从客户端发送任何值（所以没有 PUT/POST ？！？）。

到目前为止，我正在使用 GET。把我读到这不是正确的方法......

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T14:26:14.207

REST 代表“代表性状态转移”。如果您没有传输代表您正在使用的事物的状态（在一个方向或另一个方向上），那么它本质上*就不是*RESTful 的，并且没有正确的方法来做到这一点并且仍然将其称为 REST。

如果你想要 RPC，那就做 RPC。只是不要称它为 RESTful。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T23:01:43.140

你这样做的方式是通过 RPC。REST 有利于状态转移，但不适用于触发与状态转移无关的操作，例如影响大量记录的操作。我见过的大多数系统都使用 REST 完成 99% 的 UI 支持工作，而 RPC 完成最后 1% 的工作——不涉及状态传输、批量更新操作等的操作。您的目标应该是尽可能多地表达业务逻辑，以响应状态应用程序，为 RPC 保留极端情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:33:44.960

如果您不传输任何类型的数据，那么实际上没有“正确”的方法可以做到这一点。您只是在调用一个方法，因此 REST 并不真正适用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-24T21:54:02.773

如今，带有“JSON Patch”有效负载的 PATCH 可能是一种可行的方法 - 但它仍然不是 RESTful。

将其称为 RPC 更合适，只要有文档记录，就没有理由不能在同一个 API 中。用您的 RPC 方法和 REST 资源分开记录您的 API。

例如

[![RPC 和 REST 示例](../Images/b4e7a9bf5cee69cbb55c5f873c059f77.png)](https://i.stack.imgur.com/Ro2jN.png)

请参阅：[了解 HTTP API 的 RPC 与 REST](https://www.smashingmagazine.com/2016/09/understanding-rest-and-rpc-for-http-apis/)

# ios - iOS // 调整 UIWebView 的大小

> ID：15340949
> 
> 赞同：1
> 
> 时间：2013-03-11T14:21:33.050
> 
> 标签：ios, uiwebview, resize

这似乎是一个非常普遍的问题，但我还没有找到任何解决方案。

我正在尝试调整标签`UIWebView`中包含正在播放的 HTML5 视频的大小。`<video>`

```
 CGRect newFrame = CGRectMake(0, 0, 1024, 768);

    [UIView animateWithDuration:5.0 animations:^{
        self.webView.frame = newFrame;
    } completion:^(BOOL finished) {
        DDLogInfo(@"Enter fullscreen anim completed");
    }]; 
```

当我运行此代码时，高度立即变为 768，而 xy 和宽度正确设置动画。我还尝试为边界设置动画，结果相同，而超级视图则结果相同。

我只是无法正确地将这个小 Web 视图动画化为全屏尺寸。

有没有人找到解决方案？我很想听听！

谢谢 ：）

# sql - 无法在没有“路径中的非法字符”错误的情况下向我的数据库添加行

> ID：15340951
> 
> 赞同：0
> 
> 时间：2013-03-11T14:21:40.300
> 
> 标签：sql, vb.net, visual-studio-2012

我是 Visual Basic 的初学者。

目前，我的程序出现问题，每当我尝试在我的数据库 Visual Studio 中添加一行时，都会标记“路径中的非法字符”错误。

这是我的代码相关区域的片段：

```
Dim customerAdapter As New CustomerDetailsTableAdapters.tblCustomerDetailsTableAdapter
Dim customerTable As CustomerDetails.tblCustomerDetailsDataTable
Dim customerRow As CustomerDetails.tblCustomerDetailsRow
Dim customerDataSet As CustomerDetails

Private Sub btnNext_Click(sender As Object, e As EventArgs) Handles btnNext.Click
        customerAdapter.AddCustomer(Forename:="test", Surname:="test",
                                    HouseNumber:="test", StreetName:="test",
                                    Postcode:="test", Email:="test",
                                    Telephone:="test", Mobile:="test",
                                    PreferredContact:="test")

End Sub 
```

我检查了数据类型是否正确。

我在 Visual Studio 2012 Ultimate 中工作，并且正在使用 .NET Framework 4。您应该知道的另一件事是，我在表中有一个列自动递增 1，并且当前表在启动时为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:37:32.377

我摆脱了缓慢的 Visual Studio Ultimate 2012 SQL 并安装了 Visual Studio Ultimate 2010。结果发现 SQL Server Compact 4.0 中的某些内容已经损坏。我确实尝试重新安装 2012 和 SQL 4.0，但没有好运。至少 2010 年的作品:)

# android - ANR 处理，显示消息框

> ID：15340958
> 
> 赞同：0
> 
> 时间：2013-03-11T14:22:00.627
> 
> 标签：android

类是否可以监听 ANR 时触发的事件？我的目标是向用户显示一个自定义对话框，其中`stacktrace`显示一个按钮，允许用户发布堆栈跟踪以支持。不关心对话，我可以自己做，我只对 ANR 处理（库或事件处理）感兴趣

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:49:56.330

这是不可能的。当 UI 线程挂起某个长时间运行的操作时，会触发 ANR 事件。所有与 ui 相关的操作都在这个线程中调度，因此您不能`Dialog`因为线程被阻塞而只显示自定义。

我不确定您是否真的需要这样，`Dialog`因为`Android`已经有一个类似的允许用户将 ANR 报告发送到`Google Play Developer console`

# c++ - C++ - std::set 未声明

> ID：15340963
> 
> 赞同：8
> 
> 时间：2013-03-11T14:22:13.047
> 
> 标签：c++, debugging

```
#include <iostream>

 using std::set;
 using std::cout;
 using std::endl; 
```

报错：

`Josephus_Permutation.cpp:3:13: error: ‘std::set’ has not been declared`

不应该`std::set`是命名空间的 STL`std`吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-11T14:22:45.640

它位于`std`命名空间中，但您需要包含适当的标头：

```
#include <set> 
```

标`<iostream>`头仅包含标准输入/输出库，其中包括`std::cout`和`std::endl`. `std::set`但是，在 中定义`<set>`。

# sql-server-2005 - 如何避免在控制流中重复逻辑

> ID：15340965
> 
> 赞同：1
> 
> 时间：2013-03-11T14:22:19.200
> 
> 标签：sql-server-2005, ssis

我有一个如下所示的包：

![SSIS](../Images/f3c0e7ac5bdc58324cd6bb8ffa10bc20.png)

注意我用红色矩形标记的两个区域：它们在各个方面都是相同的。我可以对包进行更改以避免这种重复吗？在我看来，我无法将它们移动到数据流任务，因为那里不存在循环和文件系统任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:05:32.750

您可以像@Bill 提到的那样为循环逻辑创建一个子包，“将查询的结果集传递给另一个包”的方法如下（以 SSIS 2012 为例，我做了类似的工作 SSIS 2005，所以你只需要把c#代码改成vb.net)

1.  在您的父包中，创建一个变量来保存父包中*resultSet*变量的名称： ![在此处输入图像描述](../Images/51e1cad19b58e0683f53a6d783e078f6.png)

2.  在您的子包中，创建一个字符串变量*parentResultSetName*： ![在此处输入图像描述](../Images/1675276c6c2d13eac78753f46b9343cc.png)

3.  在您的子包中，添加包配置以将*parentResultSetName*映射到父包变量*resultSetVariableName*： ![在此处输入图像描述](../Images/5a051e8ea84652de99dde7b03f5dab0f.png)

4.  现在，我们可以通过子包脚本任务中的名称读取*resultSet变量：*

    ```
    public void Main()
    {
        // TODO: Add your code here

        var dsName = Dts.Variables["parentResultSetName"].Value.ToString();
        Variables variables = null;

        DataSet resultSet = null;

        Dts.VariableDispenser.LockForRead(dsName);
        Dts.VariableDispenser.GetVariables(ref variables);

        try
        {
            resultSet = variables[dsName].Value as DataSet;

            if (resultSet != null)
            {
                MessageBox.Show("Sub package get: " + resultSet.Tables[0].Rows[0][0].ToString());
            }

            Dts.TaskResult = (int)ScriptResults.Success;
        }
        catch (Exception e)
        {
            Dts.Events.FireError(-1, "", e.Message, "", 0);
        }
    } 
    ```

5.  结果如下： ![在此处输入图像描述](../Images/68681a7329601f2e48beb54de75b6ea9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T22:52:56.677

另一种方法是在“批次”表中添加“操作”列。（或添加一个支腿表）。事先确定*你*想对记录做什么。然后只需删除一次记录和文件。

看起来你在这里做[RBAR](https://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CD4QFjAB&url=https://www.simple-talk.com/sql/t-sql-programming/rbar--row-by-agonizing-row/&ei=FWA-UZu8O6re7AbB04HACg&usg=AFQjCNH4pWw5Fu-nwX1sYe7Kfpma5vzUBg&sig2=uqF8e3rD3LMLbkZWuW_PnA&bvm=bv.43287494,d.d2k)操作。

因此，例如，您对您的表运行几个 UPDATE 语句，这些语句使表处于每条记录都被标记为删除或不删除的状态。

然后，您通过循环并根据表中的内容进行删除。

它会让你的包裹更简单。并且您可以合并一些“提交”逻辑，以确保始终同时删除记录和文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:38:41.480

只需将您的查询从“选择批量登录”任务放到记录集，然后在该记录集上进行另一个 foreach 循环，从变量执行这两个查询。我可以看到在您的第二个 foreach 循环中还有一些额外的任务，因此您将以某种方式将它们合并到“选择所有批量登录”任务中，或者使约束在两个循环中都匹配。

# php - 用于获取和设置数据的动态数据库功能

> ID：15340967
> 
> 赞同：0
> 
> 时间：2013-03-11T14:22:22.483
> 
> 标签：php, mysqli

我创建了一个类来处理我的应用程序的所有数据库操作。到目前为止，我已经在我的视图中收集并显示了 foreach 语句中的数据。我希望能够从我的数据库类的函数中获取和设置单个元素。

这是我在 foreach 中显示数据的数据库函数：

```
 public function test($sql, $type, $param)
   {
       $variables = array();
       $results = array();

       // Mysqli
       if($stmt = $this->AC->Mysqli->prepare($sql))
       {
        $params = array_merge($type, $param);
           call_user_func_array(array($stmt, 'bind_param'), $this->make_values_referenced($params));
        $stmt->execute();  
        $stmt->store_result();          
        // Existance
        if($stmt->num_rows > 0)
        {

        $meta = $stmt->result_metadata();

        while($field = $meta->fetch_field()) 
        {  
            $parameters[] = &$row[$field->name];  
        }  

        call_user_func_array(array($stmt, 'bind_result'), $parameters);                     

        while($stmt->fetch()) 
        {  

            $elemet = array();  

            foreach($row as $key => $val) 
            {  
                $element[$key] = $val;  
            }  

            $results[] = $element;  

        } 

        return $results;            

        }
        else
        {
            $results = FALSE;
            return $results;
        }            
        }
        else
        {
        die("ERROR: We could not connect.");
        }
    } 
```

下面的函数是从我的模型中调用的：

```
 public function profile_information($account_name)
    {
    // Mysqli Variables
    $sql = "SELECT $this->account_details.bio 
            FROM account_details 
            WHERE $this->account_details.account_name = ? LIMIT 10";    

            $type = array("s");
            $param = array($account_name);

            $results = $this->AC->Database->prepared_select_loop($sql, $type, $param);

            $this->AC->Template->set_data('profile_information', $results, FALSE);
    } 
```

一旦在我的模型中设置，我在我的控制器中调用该函数并在我的视图中使用 foreach 访问它以显示数据：

```
 $profile_information = $this->get_data('profile_information');
    foreach ($profile_information as $row) : 
        //Displaying data here
    endforeach; 
```

上面的方法可以很好地显示大量数据，但我想要做的是调用一个数据库函数，它允许我设置单个数据元素。因此，如果我只获得有限数量的数据（即一行姓名、年龄、地址），则不必使用 foreach

我解决此问题的一种非动态方法是为每个只需要数据库中的一行的函数编写数据库：

```
 function name($variable)
    {
            $sql = 'statement here';
            $stmt = $this->AC->Mysqli->prepare($sql);
                $stmt->bind_param("i", $id);
                $stmt->execute();
                $stmt->store_result();
                $stmt->bind_result(bind results);
                $stmt->fetch();

            $this->AC->Template->set_data('id', $id);               
            $this->AC->Template->set_data('account_name', $account_name);
    } 
```

所以基本上我想将上述语句重构到我的数据库类中，从而使其更具动态性。

我不知道如何解决这个问题，我不想使用 PDO，因为我希望在 Mysqli 中找到解决方案。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:39:42.477

> 你会建议只切换到 PDO 吗？

确实。

**整个**函数`test()`可以重写为**三行**（假设 $param 包含一个数组，其中包含准备好的语句的参数）：

```
public function test($sql, $param)
{
    $stmt = $this->AC->pdo->prepare($sql);
    $stmt->execute($param);  
    return $stmt->fetchAll();
} 
```

# magento - Magento 设置为仓位仍按价格显示

> ID：15340968
> 
> 赞同：0
> 
> 时间：2013-03-11T14:22:27.177
> 
> 标签：magento, position, displaytag

我是一个菜鸟，我正在接管另一个开发者的网站。

现在我的问题是我已经在 Adm 中设置了 Best Value，并且工具栏默认显示位置，但产品仍然按价格显示。位置选项仅在我单击它时才有效。

所以我认为之前的开发者改变了一些东西，但我不知道在哪里。

请有人给我一些建议在哪里检查。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:42:07.013

您可以在第 81 行附近检查 magento\app\design\frontend\default\YOURTHEME\template\catalog\product\list\toolbar.phtml 的 magento 1.7

# javascript - jQuery水印插件在IE9中提交水印作为表单的值

> ID：15340969
> 
> 赞同：3
> 
> 时间：2013-03-11T14:22:27.420
> 
> 标签：javascript, jquery, html, internet-explorer, watermark

我正在使用这个插件：

[http://code.google.com/p/jquery-watermark/downloads/detail?name=jquery.watermark-3.1.4.zip](http://code.google.com/p/jquery-watermark/downloads/detail?name=jquery.watermark-3.1.4.zip)

问题是它在 IE9 中将水印值作为文本框的值提交。我怎样才能避免这个问题？

这个问题与这篇文章有点相关：[http ://code.google.com/p/jquery-watermark/issues/detail?id=91](http://code.google.com/p/jquery-watermark/issues/detail?id=91)

但作者否认并将该错误标记为无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:38:51.537

您可能只使用一些简单的 JS 和 CSS 并自己动手。当它们工作时，使用大量的包罗万象的插件是很棒的。

[http://jsfiddle.net/VF8Dr/](http://jsfiddle.net/VF8Dr/)

[https://stackoverflow.com/a/14246071/884862](https://stackoverflow.com/a/14246071/884862)

CSS

```
.placeholder { 
  color: gray; 
  position: absolute;
  padding-left: 10px;
} 
```

JS

```
function addPlaceholder(id, text) {
  var elm = document.getElementById(id);
  var ph = document.createElement("SPAN");
  ph.className = "placeholder";
  ph.innerHTML = text;
  elm.parentNode.insertBefore(ph, elm.nextSibling);
  ph.style.left = elm.offsetLeft + 'px';
  ph.style.top = elm.offsetTop + 'px';
  ph.onclick = function() {
    ph.style.display = 'none';
    elm.focus();
  };
  elm.onfocus = function() {
    if(ph.style.display != 'none')
      ph.style.display = 'none';
  };
  elm.onblur = function() {
    if(elm.value == '')
      ph.style.display = '';
  };
}
addPlaceholder("demo", "my text"); 
```

根据您的需要，简单的可能是最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-10T14:32:56.230

我知道这是很老的帖子，但今天我遇到了同样的问题。问题：水印值作为文本框值传递。

基本上我在所有搜索功能中都使用了水印，并且整个搜索功能控件都包含在更新面板中，包括水印文本框。在我的情况下，由于更新面板，文本框值作为水印值传递给服务器端。所以我从更新面板中取出水印文本框，现在一切都按预期工作。

# sql - 子查询列错误

> ID：15340971
> 
> 赞同：0
> 
> 时间：2013-03-11T14:22:31.453
> 
> 标签：sql, subquery

我的查询中出现我无法解决的错误：

我的查询：

```
SELECT [subject], cal
FROM (
    SELECT [subject], cal
    FROM amir
    WHERE textfilter LIKE '% word %') a 
WHERE lev=3 AND cal between '6/10/2012' AND '3/11/2013' 
```

错误发生在“lev=3”

```
Msg 207, Level 16, State 1, Line 2
Invalid column name 'lev'. 
```

我的表格列是：

```
 [RecordId] [bigint] IDENTITY(1,1) NOT NULL,
    [text] [nvarchar](max) NOT NULL,
    [textfilter] [nvarchar](max) NOT NULL,
    [mo] [int] NULL,
    [loc] [int] NULL,
    [lev] [int] NOT NULL,
    [cal] [date] NOT NULL,
 CONSTRAINT [PK_SahifehEmam] PRIMARY KEY CLUSTERED 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T14:25:02.853

您不在`lev`子查询中选择，因此在主查询中不可用。

您可以像这样将它添加到您的子查询中：

```
select [subject], cal 
from (
    select [subject], cal, lev
    from amir 
    where textfilter like '% word %'
) a 
where lev=3 AND cal between '6/10/2012' AND '3/11/2013' 
```

虽然我什至不明白为什么子查询是必要的：

```
select [subject], cal 
from amir 
where textfilter like '% word %' and lev=3 AND 
    cal between '6/10/2012' AND '3/11/2013' 
```

# python - 如何使用 zcat 在 Python 中测试 gzip 文件目录并解压缩 gzip 文件？

> ID：15340982
> 
> 赞同：2
> 
> 时间：2013-03-11T14:23:08.600
> 
> 标签：python, logging, gzip, compression, zcat

我在 Python 的第二周，我被困在一个压缩/解压缩日志文件的目录中，我需要对其进行解析和处理。

目前我正在这样做：

```
import os
import sys
import operator
import zipfile
import zlib
import gzip
import subprocess

if sys.version.startswith("3."):
    import io
    io_method = io.BytesIO
else:
    import cStringIO
    io_method = cStringIO.StringIO

for f in glob.glob('logs/*'):
    file = open(f,'rb')        
    new_file_name = f + "_unzipped"
    last_pos = file.tell()

    # test for gzip
    if (file.read(2) == b'\x1f\x8b'):
        file.seek(last_pos)

    #unzip to new file
    out = open( new_file_name, "wb" )
    process = subprocess.Popen(["zcat", f], stdout = subprocess.PIPE, stderr=subprocess.STDOUT)

    while True:
      if process.poll() != None:
        break;

    output = io_method(process.communicate()[0])
    exitCode = process.returncode

    if (exitCode == 0):
      print "done"
      out.write( output )
      out.close()
    else:
      raise ProcessException(command, exitCode, output) 
```

我使用这些 SO 答案（[此处](https://stackoverflow.com/questions/4417546/constantly-print-subprocess-output-while-process-is-running)）和博文（[此处](http://codebright.wordpress.com/2011/03/25/139/)） “缝合”在一起

但是，它似乎不起作用，因为我的测试文件是 2.5GB，并且脚本已经咀嚼了 10 分钟以上，而且我不确定我所做的是否正确。

**问题：**
如果我不想使用 GZIP 模块并且需要逐块解压缩（实际文件大于 10GB），如何在 Python 中使用 zcat 和 subprocess 解压缩并保存到文件？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:49:35.720

这应该读取日志子目录中每个文件的第一行，并根据需要解压缩：

```
#!/usr/bin/env python

import glob
import gzip
import subprocess

for f in glob.glob('logs/*'):
  if f.endswith('.gz'):
    # Open a compressed file. Here is the easy way:
    #   file = gzip.open(f, 'rb')
    # Or, here is the hard way:
    proc = subprocess.Popen(['zcat', f], stdout=subprocess.PIPE)
    file = proc.stdout
  else:
    # Otherwise, it must be a regular file
    file = open(f, 'rb')

  # Process file, for example:
  print f, file.readline() 
```

# java - Java：如何为我的应用程序处理插件中的自定义设置？

> ID：15340985
> 
> 赞同：5
> 
> 时间：2013-03-11T14:23:11.740
> 
> 标签：java, swing, plugins, settings

我目前正在开发一个从其他设备接收命令的应用程序。我将提供一个接口，让其他人开发他们自己对传入命令的解释（插件）。其他人开发的每个插件都可以有任何需要用户提供的自定义设置。

例如，一个名为“KeyboardPlugin”的插件可以支持设置按键之间的延迟，还可以显示所有支持按键的列表。例如，另一个插件可以称为“MouseMovePlugin”，用户可以在其中选择鼠标的准确性及其速度。

现在我的问题是，每个插件的设置需要 1\. 显示在 UI 中，2\. 用户选择设置后，必须将它们解析回插件以让插件知道用户选择了什么.

我正在使用 Java，并且 UI 是在 Swing 中开发的。有一个选项面板显示与插件不直接相关的选项，如常用选项。但在同一个面板上，我想显示插件提供的设置。

插件设置如下所示：

*   a)"请输入两次按键之间的延迟 -> [Textbox with Int as input] (with min 1; max 500)
*   b）“bla bla -> [复选框]（带布尔值）”
*   c）“Bla bla 2 -> [文本框]（以字符串值作为输入；与设置 b 相关！）
*   d) "选择要按下的按钮" ["a","b","c"]

如您所见，插件设置可以是 int、boolean、string 类型，也可以是 d、数组或枚举类型。我现在的问题是，我该如何处理？每个插件都可以有一组设置类型，这些设置类型也可以相互依赖，例如示例 c 取决于用户对 b 的选择。

1）首先我需要一种技术来询问插件的设置，好吧，我可以调用插件接口中提供的方法，但它应该返回什么？我的意思是，列表可以工作，但设置选项之间没有依赖关系。

2）然后我如何“在插件中设置设置”。如果用户选择了他/她的首选设置，那么我该如何告诉插件呢？

到目前为止，我能想到的唯一解决方案如下： 一个简单的领域特定语言 (DSL)，如下所示： varName: type(min,max,default) "UI question" 作为给定示例：

```
buttonDelay: boolean(false) "Enable button delay"
if(buttonDelay){
buttonDelayTime: int(1,500,25) "Choose delay between buttons"
} 
```

我会将设置 DSL 解析为 Java 树，以便能够进行简单的类型检查并使用该树来生成设置 UI 面板。如果用户随后选择了他想要的设置（这可能是插件提供的设置的子集，因为他/她不能使用所有提供的设置），我会将 Map 解析到插件，例如 Map，其中键是 varName（来自示例：“buttonDelay”和“buttonDelaytime”）。而且我可能会有多个容器用于不同的设置类型，例如对于整数设置，有一个容器，还有布尔值、数组等。通过将地图解析到插件，插件可以向地图询问设置每个设置 varName，例如：

```
public void initPluginSettings(Map<String,SettingsInterface> settingsMap){
BooleanSetting buttonDelay = settingsMap.get("buttonDelay"); 
IntegerSetting buttonDelayTime = settingsMap.get("buttonDelayTime");
} 
```

有人有更简单/更智能的解决方案吗？或者这个问题有一些模式吗？我已经在网上搜索过，但我真的找不到任何东西。要实现 DSL，使用树类型检查等对我来说似乎有点“太多”这个问题。我的意思是，我可以做到这一点，但我很想在开始之前得到其他人的建议。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:18:30.907

怎么样：

```
interface Plugin {
  Map<String, String> getSettingsList();
  getPossibleValuesFor(String key);
  setValue(String key, .. value);
  .. getValue();
} 
```

getSettingsList() 将返回从键到类型的映射；getPossibleValuesFor() 在那里，因此插件开发人员可以限制类型的默认范围或在设置之间施加依赖关系。然后添加持久性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:02:38.153

怎么样：

```
Interface Plugin extends Serializable
{
    // You don't know what the plugin is, the possible options, or how best to set them. Let plugin developers build their own settings UI, you just grab and display it in your own JPanel.
    public JPanel getOptionsPanel();

    // We don't know the types of data that can be returned from plugins, so build a map of the setting name to what the user set it to, and return that to the plugin itself.
    public Map<String, Object> getUserSettings();
} 
```

这减轻了您试图弄清楚如何显示插件设置的负担。对于每个插件，获取其选项面板，并将其添加到您的选项面板中。然后您可以将选项名称和值返回给插件进行处理。

# jquery - 我在 jquery 上选择了问题

> ID：15340986
> 
> 赞同：-1
> 
> 时间：2013-03-11T14:23:13.547
> 
> 标签：jquery, html, css, events

我尝试做的是在单击 li 跨度时将 li 元素从一个容器移动到另一个容器。我有一个选择和我的选择容器，如果用户从第一个容器中单击 li span (id="add")，则 li 将被删除并且应该出现在第二个容器中。比我想出以下结构，也许不是最好的解决方法，因为我在移动选定的 li 时遇到了问题，而且在这种情况下我真的不知道如何处理回调。我会很感激建议

```
 <script>
(function($){   
jQuery( "#catalog" ).accordion({
heightStyle: "content"
});

jQuery("span#add").click(function(){
    jQuery(this).parent().animate(
            {
                'margin-left':'1000px'
            },1000,
            function(){
                var ul_class = $(this).parent().attr('class');
                $(this).slideUp('fast');               
                $("ul."+ ul_class + "_clone").append($(this).parent().html());
                $(this).remove();                
            }
            );

});

}) (jQuery);
</script>

<?php $datas = json_decode($param[0]->params) ?>
<div class="config_holder">
<div id="products">
    <h3>Config Params</h3>
    <div id="catalog">
        <?php foreach ($datas as $key1=>$data):?>
            <h4><a href="#"><?php if(!empty($key1)) echo $key1 ?></a></h4>
        <div>
            <ul class="<?php echo $key1 ?>">
                <?php if(!empty($data) ):?>
                <?php foreach($data as $key2=>$item):?>
                <?php if($key2 !="&nbsp;" || $key2 != " "): ?>
                <li id="" class="ui-state-default ui-corner-all" ><?php  echo $key2; ?><span style="float:right" id="add" class="ui-icon ui-icon-circle-plus"></span></li>
                <?php endif;?>
                <?php endforeach; ?>                
                <?php endif;?>
            </ul>
        </div>
        <?php endforeach;?>
    </div>
</div>
<div id="cart">
<h3 >Mein Konfiguration</h3>
<div class="ui-widget-content">
<img title="" src="http://i.dell.com/das/dih.ashx/165x130/sites/imagecontent/consumer/merchandizing/de/PublishingImages/165x119/6315-inspiron-17r-5721-165X119-de.png" alt="">
<ol>
<li class="placeholder">My Choises</li>
<?php foreach ($datas as $key3=>$clone):?>
<ul class="<?php echo $key3 ?>_clone"></ul>
<?php endforeach;?>

</ol>

</div>
<a href=""><button>search</button></a>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:59:25.820

尝试这个...

```
$("span, #add, .ui-icon").on('click', function(){
    $(this).parent().animate({'margin-left':'1000px'}, 1000, function(){
        var ul_class = $(this).parent().attr('id');
        $(this).slideUp('fast');               
        $("ul#"+ ul_class + "_clone").append($(this).parent().html());
        $(this).remove();
    });
}); 
```

看看这个[**DEMO**](http://jsfiddle.net/GLvTr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:37:41.477

如果您可以使用 jquery ui，则可以使用其连接列表功能。

```
$(function() {
    $( "#IdOfFirstList, #IdOfSecondList" ).sortable({
      connectWith: ".commonClassName"
    }).disableSelection();
}); 
```

这是完整示例的链接[http://jqueryui.com/sortable/#connect-lists](http://jqueryui.com/sortable/#connect-lists)

# android - 为什么我无法在某些设备上确定位置？

> ID：15340988
> 
> 赞同：0
> 
> 时间：2013-03-11T14:23:18.320
> 
> 标签：android, location, android-location

再会。我了解了有关 LocationListener 的所有信息，并查看了不同的示例——但每次在不同设备上进行的一些测试都让我感到不安。所以，我请你帮忙。故障设备：三星 Galaxy S1、Galaxy fit、htc one v、HTC Incredible S、Pipo Smart S1 等。无问题设备：三星 Galaxy S3。帮助 ：）

当前实施：

```
public class LocationListener implements android.location.LocationListener
{
    // Current myLocation
    private LocationManager mLocationManager = null;
    private boolean mLocationEnabled = false;
    private volatile Location mLocation;
    private LocationListener locationListener;
    private volatile boolean locationChanged = false;
    //interface implementation Runnable which called UI methods
    private LocationRunnable runnable = null;

    public LocationListener(Context context, LocationRunnable runnable)
    {
        this.runnable = runnable;
        mLocationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
        mLocation = null;
    }

    public boolean enableMyLocation()
    {
        mLocationEnabled = true;
        List<String> mProviders = mLocationManager.getProviders(true);

        if (mProviders.size() > 0)
        {
            locationListener = this;
            mLocationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 1000, 1, locationListener);

        }

        //start background process to count 30 secs
        new TimeOut().execute();
        return false;
    }

    public void disabledMyLocation()
    {
        if (mLocationManager != null)
            mLocationManager.removeUpdates(this);
    }

    private class TimeOut extends AsyncTask<Void, Void, Void>
    {

        @Override
        protected Void doInBackground(Void... params)
        {
                long sec = System.currentTimeMillis();
               //here we count 30 secs and if method onLocationChanged wasn't run before, start runnable here
                while (!locationChanged && System.currentTimeMillis() - sec < 30 * 1000)
                {}
            return null;
        }

        @Override
        protected void onPostExecute(Void p)
        {
            if (!locationChanged)
            {
                runnable.setLocation(mLocation);
                runnable.run();
            }

        //cancel update
            mLocationManager.removeUpdates(locationListener);
        }
    }

    public void onLocationChanged(Location location)
    {
     //if location is OK so call UI changing
        mLocation = location;
        locationChanged = true;
        runnable.setLocation(location);
        runnable.run();
        //cancel update
        mLocationManager.removeUpdates(locationListener);
    }

} 
```

# postgresql - Postgres - 更新语句作为触发器

> ID：15340990
> 
> 赞同：0
> 
> 时间：2013-03-11T14:23:41.237
> 
> 标签：postgresql

在过去的一个小时或更长时间里，我一直在尝试将更新语句放入触发器中。我理解 UPDATE 语句的概念，下面的工作很好

```
UPDATE cars SET country = 'France'; 
```

我想要的是把它放到一个触发器中，这样当汽车表更新时，国家列就会自动更新为法国。

我已经尝试过调整我在互联网上发现的函数和触发器，但我显然使语句错误，因为它们要么不执行，要么执行但在新记录时不更新国家/地区字段被添加。

```
CREATE FUNCTION update_country () RETURNS TRIGGER AS $$
BEGIN
    IF (TG_OP = 'UPDATE') THEN
        UPDATE cars SET country = 'France' WHERE id = New.id;
    END IF;
    RETURN NULL;
END;
$$ LANGUAGE plpgsql; --The trigger used to update a table.

CREATE TRIGGER update_country_col BEFORE UPDATE ON cars FOR EACH ROW EXECUTE PROCEDURE update_country(); 
```

上述脚本执行但不将法国添加到国家列。该函数改编自我在网上找到的声明。

Postgres 9.1。

我知道答案会很简单！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T15:43:31.277

在更新触发器中，您应该修改`NEW`记录。此外，您可能需要从过程中返回`NEW`记录。

因此，您应该使用以下程序而不是您的程序：

```
CREATE FUNCTION update_country () RETURNS TRIGGER AS $$
  BEGIN
    IF (TG_OP = 'UPDATE') THEN
     NEW.country = 'France';
    END IF;
    RETURN NEW; 
  END; $$ LANGUAGE plpgsql; 
```

# xpages - XSPDocument 中的 getDocument() 随机为空

> ID：15340994
> 
> 赞同：2
> 
> 时间：2013-03-11T14:24:06.227
> 
> 标签：xpages, xpages-ssjs

在我开发的生产应用程序中，有时我会收到一条错误消息，指出 .getDocument() 为空。我在我的代码中添加了检查，如果发生这种情况会捕获错误。奇怪的是 XSPDocument 接缝没问题。

还有其他想法如何调试导致此问题的原因吗？

==================================================== ======

# 编辑

应用程序的下部是一个简单的数据库，创建一个分配它获取状态新的状态，通过一个按钮将状态更改为正在进行。在文本、日期和数字字段中添加信息，没有 Richtext，没有附件。

用户可以切换到另一个 xpage 以发送此文档是电子邮件中的 pdf 附件。

用户可以将文档保存为草稿

完成后，单击批准按钮，此按钮将状态设置为已批准。保存文档并将其以 pdf 格式发送到电子邮件地址

该问题出现在“保存”按钮和“批准”按钮上。

xsp 文档中的 .getDocument 为 null xspdocument.getNoteID 返回一个 ID，我可以在 xsp 文档上执行 replaceitemvalue。它永远不会发生在仅存在于我所见的新文件上

感觉就像大卫的评论，后端文档被丢弃/回收

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:05:24.397

在不了解其他所有内容的情况下很难给出提示，但我记得我也看过这个。只是一些想法：如果发生这种情况，XSPDocument.getNoteID() 是否指向一个有效的文档？它是否可能指向与您预期不同的文档？数据源是否会发生某种动态变化？也许某种超时让服务器突然忘记了你是谁（在极少数情况下这发生在我身上）？洛萨/edcom

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:19:09.237

我们最近遇到了同样的 getDocument() 问题。最后我们找到了根本原因：通过 iFrame 同时加载了两个不同的 XPage。在 25% 的情况下，其中一个 XPage 会随机产生运行时错误。单会话上下文中 JSF 模型中的一种冲突。

解决方案：viewState="nostate"

不确定它是否对您的情况有所帮助，但此选项解决了我们应用程序中的许多问题。它是在 8.5.3 中引入的。它对所谓的 XAgent 应该特别有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:35:04.870

了解更多细节会很有帮助。我假设该文档以前已保存并且不是新笔记？

您不是想将实际的文档对象放在作用域变量中吗？那会很糟糕，因为那会非常有毒。在不知道更多的情况下，我认为可能是这种情况。后端文档已被垃圾回收。

# css - 所有字体即浏览器版本（6 到 10）

> ID：15340996
> 
> 赞同：-1
> 
> 时间：2013-03-11T14:24:14.583
> 
> 标签：css, internet-explorer, fonts

我试图找到可以为 IE 版本 6 到 10 呈现字体的代码。我测试了[font squirrel](http://www.fontsquirrel.com/)、[adobe webfonts](http://html.adobe.com/edge/webfonts/)和 Google 的 font css 的代码，但没有适用于所有 IE 浏览器的代码。

有没有人有代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:30:13.023

我相信这两项服务都会自动为所有受支持的浏览器（包括 IE）提供代码。

例如，从 Google 字体 API 调用带有 style 标签的字体，实际上会从 Google 拉取一个带有不同字体声明的 CSS 文件。

```
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Karla:400,400italic,700,700italic" /> 
```

**生成以下 CSS：**

```
@font-face {
  font-family: 'Karla';
  font-style: normal;
  font-weight: 400;
  src: local('Karla'), local('Karla-Regular'), url(http://themes.googleusercontent.com/static/fonts/karla/v2/QT0qO2FiFD03cwUe_t62t6CWcynf_cDxXwCLxiixG1c.woff) format('woff');
}
@font-face {
  font-family: 'Karla';
  font-style: normal;
  font-weight: 700;
  src: local('Karla Bold'), local('Karla-Bold'), url(http://themes.googleusercontent.com/static/fonts/karla/v2/3nZS3BKzlvhkwl4yjCQcjHYhjbSpvc47ee6xR_80Hnw.woff) format('woff');
}
@font-face {
  font-family: 'Karla';
  font-style: italic;
  font-weight: 400;
  src: local('Karla Italic'), local('Karla-Italic'), url(http://themes.googleusercontent.com/static/fonts/karla/v2/ietJ6bjhwzrJL8NSJOc2mgLUuEpTyoUstqEm5AMlJo4.woff) format('woff');
}
@font-face {
  font-family: 'Karla';
  font-style: italic;
  font-weight: 700;
  src: local('Karla Bold Italic'), local('Karla-BoldItalic'), url(http://themes.googleusercontent.com/static/fonts/karla/v2/VZ08RdiotRdV1D0ewK-mxL3hpw3pgy2gAi-Ip7WPMi0.woff) format('woff');
} 
```

如您所见，不同的浏览器有不同的格式。WOFF 适用于 IE。

米奇。

**PS - 我在下面的评论中提到的东西：**

您是否在本地 IE 中工作并查看此内容？如果是这样，它可能不起作用。要让它在 IE 中工作，我认为您必须在实际服务器上查看该网站。与 IE 中的“标头”和来源策略有关 - 这是一个安全问题。会是这样吗？

# matlab - 在 3D 图表中绘制 2 个函数

> ID：15340999
> 
> 赞同：0
> 
> 时间：2013-03-11T14:24:27.040
> 
> 标签：matlab, plot, matlab-figure

我是 MATLAB 新手。我有 2 个功能，`z=sin(x)`和 `y=cos(x)`. 我想在 XZ平面和 XY平面中将它们绘制在**3D** (x,y,z) 图表中（但不使用子图） 。正如我所见，标准的 plot 或 plot3d 函数使用起来并不明显。可能需要一些轴操作等，但我没有。如果我愿意或任何指导得到赞赏，我想知道解决方案。`z=sin(x)``y=cos(x)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:32:15.287

在这里，您有一个小例子说明您想要做什么

```
clear;clc; %clear variables from workspace and clean commadn line
x=-pi:0.1:pi; %define x
cero=zeros(size(x)); %create a vector of zeros
z=sin(x);
y=cos(x);

hold on %tell matlab to plot averything together
plot3(x,cero,z,'g');
plot3(x,y,cero,'r');
grid on; %pretty self-describing
view([1,1,1]) %set viewpoint to not se just a plane
hold off %stop ploting everything together 
```

询问你是否没有得到一些线路