# StackOverflow 问答 15547000-15547999

# ruby - Calling Sinatra from Sinatra produces results different from external request

> ID：15547001
> 
> 赞同：1
> 
> 时间：2013-03-21T12:03:24.240
> 
> 标签：ruby, sinatra, rack

Following my question [here](https://stackoverflow.com/questions/15500759/redirect-sinatra-request-changing-method-and-body/15507611?noredirect=1#comment22022912_15507611). So I am trying to do a smart redirect using this:

```
get "/category/:id/merge" do
    #... setting @catalog_id and category
    call env.merge("PATH_INFO" => "/catalog/#{@catalog_id}/category/#{category.id}", "REQUEST_METHOD"=>"PATCH","QUERY_STRING"=>"merge=1")
    status 200
end 
```

But when I look in logs, I see something that is not only frustrating but also completely absurd:

```
# this one is from internal call
I, [2013-03-21T15:55:54.382153 #29569]  INFO -- : Processing GET /catalog/1/category/2686/merge
I, [2013-03-21T15:55:54.382239 #29569]  INFO -- : Parameters: {}
...
I, [2013-03-21T15:55:54.394992 #29569]  INFO -- : Processing PATCH /catalog/1/category/2686
I, [2013-03-21T15:55:54.395041 #29569]  INFO -- : Parameters: {"merge"=>"1"}
I, [2013-03-21T15:55:54.395560 #29569]  INFO -- : Processed PATCH /catalog/1/category/2686?merge=1 with status code 404
I, [2013-03-21T15:55:54.395669 #29569]  INFO -- : Processed GET /catalog/1/category/2686/merge with status code 200

# this one is a direct request
I, [2013-03-21T15:56:36.246535 #29588]  INFO -- : Processing PATCH /catalog/1/category/2686
I, [2013-03-21T15:56:36.246629 #29588]  INFO -- : Parameters: {"merge"=>"1"}
...
I, [2013-03-21T15:56:36.286216 #29588]  INFO -- : Processed PATCH /catalog/1/category/2686?merge=1 with status code 204 
```

And the body of internal 404 request is just Sinatra's standard 404 error page. How the hell can he tell me straight in the eye that he doesn't know this route if I caught him serving exactly the same URL with acceptable 204?

**UPDATE** It gets even more exciting when I change REQUEST_METHOD to GET - works like a charm.

```
I, [2013-03-21T17:09:37.718756 #3141]  INFO -- : Processing GET /catalog/1/category/2686/merge
I, [2013-03-21T17:09:37.718838 #3141]  INFO -- : Parameters: {}
...
I, [2013-03-21T17:09:37.735632 #3141]  INFO -- : Processing GET /catalog/1/category/2686
I, [2013-03-21T17:09:37.735678 #3141]  INFO -- : Parameters: {"merge"=>"1"}
...
I, [2013-03-21T17:09:37.773033 #3141]  INFO -- : Processed GET /catalog/1/category/2686?merge=1 with status code 200
I, [2013-03-21T17:09:37.773143 #3141]  INFO -- : Processed GET /catalog/1/category/2686/merge with status code 200 
```

# html - Showing backing bean HTML data as it is without any wrapper extra tags in JSF

> ID：15547007
> 
> 赞同：-1
> 
> 时间：2013-03-21T12:03:40.933
> 
> 标签：html, jsf-2, richfaces

I am using JSF for my application.

I have a dynamic string which act as a propert html tag combination data.That data is stored in my bean rulesBean. I can easily shown that bean's data as html elements using,

```
 <h:outputLabel escape="false" value="#{rulesBean.myData}"/> 
```

But,above lines creates extra html tags i.e and put all bean data inside it.I dont want these extra wrapper tags.I just want to put whatevr i have in bean.So,i have to do like :

```
 #{rulesBean.myData} 
```

But,this line shows the html values as it is as text.I want to convert that text into proper html layout with out adding extra wrapper.

How to achive that in JSF ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:42:41.187

尝试这个...

```
<h:outputText escape="false" value="#{rulesBean.myData}" /> 
```

笔记。只要您使用任何“样式”属性，它就会在`<span>`

[http://www.jsftoolbox.com/documentation/help/12-TagReference/html/h_outputText.html](http://www.jsftoolbox.com/documentation/help/12-TagReference/html/h_outputText.html)

# javascript - iframe auto size based on content that changes size based on search results

> ID：15547009
> 
> 赞同：0
> 
> 时间：2013-03-21T12:03:42.110
> 
> 标签：javascript, iframe, resize, autosize

I have one page that contains search page iframe . If you try to search for a text it will rarely fit the page.

I don't know what code to use to auto resize iframe based on content changes.

Right now I use this code in iframe :

```
 <body onload="parent.alertsize(document.body.scrollHeight);"> 
```

And this javascript in parent page :

```
 <script>
function alertsize(pixels){
 pixels+=32;
 document.getElementById('my-iframe').style.height=pixels+"px";
 }
 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:19:53.150

```
<script type="text/javascript">
var myHeight = 0;

setInterval(function(){
    if(myHeight != document.body.scrollHeight){
        myHeight = document.body.scrollHeight;
        parent.alertsize(myHeight);
    }
},500);
</script> 
```

# android - 为什么我的位置不断变化，我的代码不正确？

> ID：15547011
> 
> 赞同：1
> 
> 时间：2013-03-21T12:03:49.110
> 
> 标签：android, locationlistener, android-maps-v2

我正在努力构建我的应用程序的远距离旅行部分，但我的位置有问题。在位置侦听器中，我在吐司中输出纬度和经度坐标，我可以看到坐标不断变化，现在我知道它们每次都不会完全相同，但是当我将第一个注册位置存储在侦听器中然后检查时该距离与不断更新的位置之间的距离跳跃，可能高达 25 米。这是我的监听器代码：

```
public class MyLocationListener implements LocationListener {
    public void onLocationChanged(Location location) {

        if(flag ==0){

            locationC = location;
            flag = 1;
        }

        //Constantly updated location
        locationD = location;

        //walking distance is distance from first initialized location to current location
        walking = locationC.distanceTo(locationD);

        String s =String.valueOf(location.getLatitude()); 
        String ss =String.valueOf(location.getLongitude()); 

         Toast.makeText(getApplicationContext(),"  "+s+" "+ss+" " ,Toast.LENGTH_SHORT).show(); 
         Toast.makeText(getApplicationContext(),"Walking distance is "+walking ,Toast.LENGTH_SHORT).show(); 

    }

    public void onStatusChanged(String s, int i, Bundle b) {
    }

    public void onProviderDisabled(String s) {
    }

    public void onProviderEnabled(String s) {
    }
} 
```

这是我在 onCreate 方法中运行的其余位置代码：

```
// Creating the location manger and towers etc
    lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    Criteria crit = new Criteria();
    towers = lm.getBestProvider(crit, false);
    location = lm.getLastKnownLocation(towers);

    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER,MINIMUM_TIME_BETWEEN_UPDATE, MINIMUM_DISTANCECHANGE_FOR_UPDATE,  new MyLocationListener());

    if (location != null) {
        glat = location.getLatitude();
        glon = location.getLongitude();
    } 
```

我研究了我正在使用的 V2 地图，看看是否有更准确的方法来获取位置，我发现它`googleMap.getLocation();`被破坏了，并且确实导致我的应用程序失败。我不确定我是否正确设置了我的侦听器或任何其他位置代码，我觉得该位置不应该像那样跳来跳去。

我会说我正在使用 GPS 在中等多云的天空下获取位置，设备告诉我位置是由 GPS 设置的。任何人都可以建议以更实用的方式获得更好的位置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:15:21.593

使用当前的 GPS 技术，纬度/经度在 20-50 米范围内跳跃是绝对正常的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T12:15:30.093

*在民用*GPS 精度下，25m 的偏差是完全正常的。

有关GPS 工作原理的更多详细信息，请参见[此处，特别是：](http://earthmeasurement.com/GPS_accuracy.html)

> 准确性差的原因并不总是很明显，但通常可归因于以下错误来源之一：
> 
> ```
> - Multipath / signal corruption
> - Low number of satellites / poor satellite geometry
> - Erratic Ionospheric activity 
> ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T12:24:03.463

您的常量 MINIMUM_DISTANCECHANGE_FOR_UPDATE 的值是多少？

我已经为它分配了 50 米，这对[我的应用程序](https://play.google.com/store/search?q=tureame)来说没问题。我还为 MINIMUM_TIME_BETWEEN_UPDATE 分配了 2 分钟。

[我的应用程序的源代码](https://github.com/barriosnahuel/tourGuide/blob/master/src/main/java/org/nbempire/android/tourguide/component/activity/MapActivity.java)| 请参阅方法*subscribeToLocationUpdates*

# jquery - 在 jQuery.load() 之后重新应用事件绑定

> ID：15547013
> 
> 赞同：1
> 
> 时间：2013-03-21T12:03:52.573
> 
> 标签：jquery

不幸的是，我无法创建 jsFiddle，因为这需要返回 HTML 的有效 URL，但关键是我正在使用输入掩码，它在执行后停止工作`$.load()` 我认为我只是不太了解这个函数。

脚本：

```
(function () {
    isa.uk.HpiLookup = (function () {
        function HpiLookup() { }
        HpiLookup.prototype.setupEventHandlers = function () {
            return $('#hpiLookupContainer').on("click", "#vehicleRegistrationSearchButton", this.onVehicleRegistrationSearchButton);
        };

        HpiLookup.prototype.setupInputMasks = function () {
            $('#VehicleRegistrationNumber').inputmask("#######", { "placeholder": "" });
        };

        HpiLookup.prototype.onVehicleRegistrationSearchButton = function (event) {
            event.preventDefault();
            return $('#hpiLookupContainer').load(
                GetVehicleByRegistrationNumberUrl,
                {
                    VehicleRegistrationNumber: $('#VehicleRegistrationNumber').val()
                },
                this.setupInputMasks);
        };

        return HpiLookup;

    })();
}).call(this); 
```

索引.cshtml：

```
<div id="hpiLookupContainer">
    <input id="VehicleRegistrationNumber" type="text">
    <button id="vehicleRegistrationSearchButton" type="button">Search</button>
</div>

<script type="text/javascript">
    var GetVehicleByRegistrationNumberUrl = '@Url.Action("GetVehicleByRegistrationNumber", "Vehicle")';
    var hpiLookup = new isa.uk.HpiLookup();
    hpiLookup.setupEventHandlers();
    hpiLookup.setupInputMasks();
</script> 
```

我试图以`setupInputMasks`这种方式进行 $.load() 回调，但它不会。**之后如何重新应用事件绑定`jQuery.load()`？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:41:02.600

当您调用`this.setupInputMasks);`它时，它是`this`在当前函数中而不是类中。Yuo 应该输入一些其他变量，即：`self`并`this`输入。

您的代码中的探索：

```
//...
HpiLookup.prototype.onVehicleRegistrationSearchButton = function (event) {
        event.preventDefault();
        var self = this; // Now You put this (from a class) into another variable
        return $('#hpiLookupContainer').load(
            GetVehicleByRegistrationNumberUrl,
            {
                VehicleRegistrationNumber: $('#VehicleRegistrationNumber').val()
            },
            function(){self.setupInputMasks}); // now You call class this
    };
// ... 
```

它应该帮助你。你也可以使用jQuery解决方案，函数代理。

更多在这里：[http ://api.jquery.com/jQuery.proxy/](http://api.jquery.com/jQuery.proxy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:20:06.973

这是解决方案：

```
return $('#hpiLookupContainer').load(
    GetVehicleByRegistrationNumberUrl,
    {
        VehicleRegistrationNumber: $('#VehicleRegistrationNumber').val()
    },
    hpiLookup.setupInputMasks
); 
```

# ios - Flash Builder build ios ipa ends in java out of memory error

> ID：15547016
> 
> 赞同：2
> 
> 时间：2013-03-21T12:04:00.747
> 
> 标签：ios, ipad, air, flash-builder

I'm using Flash Builder 4.7 with Adobe AIR 3.6 set into an Apache Flex 4.9.1 SDK;

HW system is:   iMac,  2,7 GHz Intel Core i5,  8 GB 1600 MHz DDR3,  NVIDIA GeForce GT 640M 512 MB,  OS X 10.8.2 (12C3103)   The Flash project consists in an application with a main SWF file which loads other SWF, in cascade. I've formerly compiled and run the application on an iPad 1, IOS 5.0.1 (9A405), but got on the device the error alert:

"Uncompiled ActionScript Your application is attempitng to run uncompiled ActionScript, probably due to the use of an embedded SWF. This is unsupported on iOS. See the Adobe Developer Connection website for more info."

Then I changed the FB compiler switches, now are set to:

```
-locale en_US 
-swf-version=19 
```

Those switche allow to load and debug and use small Flash Builder sample appication on the device.

But, when I try to compile my real application to build an IPA file either for an ad-hoc distribution, either for an debug on device, after some minutes long waiting, I get a Java stuck, with this trace:

```
Error occurred while packaging the application:

Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at java.util.HashMap.addEntry(HashMap.java:753)
    at java.util.HashMap.put(HashMap.java:385)
    at java.util.HashSet.add(HashSet.java:200)
    at adobe.abc.Algorithms.addUses(Algorithms.java:165)
    at adobe.abc.Algorithms.findUses(Algorithms.java:187)
    at adobe.abc.GlobalOptimizer.sccp(GlobalOptimizer.java:4731)
    at adobe.abc.GlobalOptimizer.optimize(GlobalOptimizer.java:3615)
    at adobe.abc.GlobalOptimizer.optimize(GlobalOptimizer.java:2309)
    at adobe.abc.LLVMEmitter.optimizeABCs(LLVMEmitter.java:532)
    at adobe.abc.LLVMEmitter.generateBitcode(LLVMEmitter.java:341)
    at com.adobe.air.ipa.AOTCompiler.convertAbcToLlvmBitcodeImpl(AOTCompiler.java:599)
    at com.adobe.air.ipa.BitcodeGenerator.main(BitcodeGenerator.java:104) 
```

I've tried to change the Java settings on FB's eclipse.ini in MacOS folder,

```
-vmargs 
-Xms(various settings up to)1024m 
-Xmx(various settings up to)1024m 
-XX:MaxPermSize=(various settings up to)512m 
-XX:PermSize=(various settings up to)256m 
```

but resuls are the same. now settings are as recommended:

```
-vmargs 
-Xms256m 
-Xmx512m 
-XX:MaxPermSize=256m 
-XX:PermSize=64m 
```

I've changed the Flex build.properties jvm.args = ${local.d32} -Xms64m -Xmx1024m -ea -Dapple.awt.UIElement=true

with no results; now I'n get back to the standard: jvm.args = ${local.d32} -Xms64m -Xmx384m -ea -Dapple.awt.UIElement=true

and I have nothing else in mind to try something.

Can anyone help me please?

# google-chrome-extension - 如何找到用于开发 chrome 扩展的 Google 的 OAuth 2.0 客户端密钥？

> ID：15547019
> 
> 赞同：21
> 
> 时间：2013-03-21T12:04:05.677
> 
> 标签：google-chrome-extension, oauth-2.0

我只看到以下细节

[https://code.google.com/apis/console/b/0/#project:xxxxx:access](https://code.google.com/apis/console/b/0/#project:xxxxx:access)

**已安装应用程序的客户端 ID**

*   客户 ID：477522346600.apps.googleusercontent.com

*   应用类型：Chrome App

*   应用程序 ID：gobkdpbocikdfbnfahjladnetpdkvmic

**简单的 API 访问**

*   API 密钥：AIzaSyDC_BSfqa1Uhgh3M6KqYUvzXuKX0lMnMaw

*   推荐人：允许任何推荐人

*   激活时间：2013 年 3 月 21 日凌晨 4:35

*   激活者：xxx@yyyy.com – 你

现在，我在上述数据中的客户秘密值是多少？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-21T12:23:12.430

好的，我自己想通了。

*   单击**已安装应用程序的客户端 ID部分中的****下载 JSON**链接。

***   在文本文件中打开 JSON。

    *   您将找到**client-secret**。** 

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-26T22:38:05.423

对于您的凭据，`Chrome App`您不会`client_secret`只获得`client_id`. 我建议将其创建为类型`other`。这应该会为您提供一个 ID 和一个可用于扩展的密钥。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-28T20:46:46.873

在 Credentials 页面上，将光标放在名称上（名称没有下划线没有光标在它上面）一旦名称突出显示并加下划线，单击。

[![Credentials->cursor over name 以突出显示链接，然后单击](../Images/fc67b0d66d657783113c691ce138a348.png)](https://i.stack.imgur.com/mzU0D.jpg)

[![客户端秘密屏幕将应用](../Images/449230c30373502fe8b3cb9605d33124.png)](https://i.stack.imgur.com/qH06w.jpg)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-23T21:31:56.090

以防万一有人像我一样陷入这种误解。
如果您使用应用程序类型“android”创建 OAuth 客户端（以及 @Erich 回答的 Chrome 应用程序），您将不会获得客户端密码。

使用此（图片）说明获取密钥。 [![在此处输入图像描述](../Images/96b6a8fa972b00d303e58dc4140fe354.png)](https://i.stack.imgur.com/j5nJl.png)**

# c# - 接口的 C# 显式实现破坏了我的 INotifyPropertyChanged

> ID：15547020
> 
> 赞同：0
> 
> 时间：2013-03-21T12:04:06.310
> 
> 标签：c#, multiple-inheritance, inotifypropertychanged, explicit-interface, explicit-implementation

这可能是一个有点愚蠢的问题，但我找不到任何解决方法或想到以下问题的任何解决方案......

```
 public class Example: IExample, INotifyPropertyChanged
  {
    public Example()
    {
    }

    /// Does not works properly... 
    string fooString;
    string IExample.A
    {
        get { return this.fooString; }
        set
        {
            this.fooString= value;
            onPropertyChange("A");
        }
    }

    /// Works just fine
    string fooString;
    public string A
    {
        get { return this.fooString; }
        set
        {
            this.fooString= value;
            onPropertyChange("A");
        }
    }

    PropertyChangedEventHandler propertyChangedHandler;

    private void onPropertyChange(string propertyName)
    {
        if (this.propertyChangedHandler != null)
            propertyChangedHandler(this, new PropertyChangedEventArgs(propertyName));
    }

    event PropertyChangedEventHandler INotifyPropertyChanged.PropertyChanged
    {
        add { this.propertyChangedHandler += value; }
        remove { this.propertyChangedHandler -= value; }
    }

 } 
```

正如您从代码中看到的那样，我有一个从 INotifyPropertyChanged 实现的类 Example 和具有 1 个属性 A 的 IExample 接口。

由于我使用的是**显式接口实现**，我不得不通过我的**IExample 接口引用我****的 A**

 **这就是我的问题所在。由于**A**在值更改时显式来自**IExamle** ，因此不会触发**INotifyPropertyChanged ...**

这是有道理的。

任何想法/想法如何保持**显式接口实现**和 INotifyPropertyChanged 并仍然完成工作？

你可能会问我为什么痴迷于**显式接口实现**

```
1) it's cool [I know horrible reason]
2) its clarity and better code readability [mostly because of this]
3) It forces you to use Interface 
```

顺便说一句，请随意批评 INotifyPropertyChanged 实现。我觉得我可以重新实现这是一种可以处理**显式继承的方法**

谢谢大家。

[编辑] 更改了“显式继承与显式接口实现” - 就像 Daniel 纠正了我一样，添加了隐式继承代码。显然其中一个继承应该被注释掉......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:18:33.213

正如我在评论中所说，您在未向我们展示的代码中一定做错了什么。这里引发了事件：

```
var example = new Example();
((INotifyPropertyChanged)example).PropertyChanged += OnAChanged;
((IExample)example).A = "new string"; 
```

见[http://ideone.com/jMpRG7](http://ideone.com/jMpRG7)**

# three.js - 如何在 ThreeJS 中将 Matrix4 转换为 Matrix3

> ID：15547022
> 
> 赞同：1
> 
> 时间：2013-03-21T12:04:11.610
> 
> 标签：three.js

有谁知道如何在 ThreeJS 中将 Matrix4 转换为 Matrix3？

我正在尝试获取“逆视图旋转”矩阵。据我了解，您需要执行以下操作：

1）将 camera.matrixWorldInverse 转换为 Matrix3
2）然后反转结果

那是对的吗？如果是这样，我将如何从 Matrix4 转换为 3？

感谢大家的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:29:14.807

您可以对 4x4 矩阵进行求逆。上面的 3x3 将包含您想要的反向旋转。否则，使用 3x3 矩阵的 set 方法并为其分配 4x4 矩阵的值。

# ruby-on-rails - Ruby 1.8.7 与 Ruby 1.9+ 的性能对比

> ID：15547024
> 
> 赞同：2
> 
> 时间：2013-03-21T12:04:20.977
> 
> 标签：ruby-on-rails, ruby, performance

最近我的任务是处理一个相当大容量的 Rails api（高峰时每秒 5k 请求）。

在此之前，我将大部分编码工作都花在了 Java 应用程序上，我只是刚接触 Ruby/Rails 世界。

在家里，我一直在使用最新版本的 Ruby/Rails 来开发一些小型应用程序，并对语言和框架有所了解。

工作中的 Rails 应用程序是基于 Ruby 1.8.7 和 Rails 2.3.16 构建的，对我来说，它看起来很旧，与我在家使用的当前版本相比，缺少很多语法和新功能。我更喜欢新版本的 ruby​​ 和 rails。

我向我的团队提出想要升级到更新/最新版本，但我被告知新版本的 Ruby 还没有准备好“生产”。遗憾的是，由于我对 Ruby 缺乏经验，我无法对此提出异议。

任何好的文章/指标显示与较新的 Ruby/Rails 版本相同或更好的性能？就个人而言，我希望语言/框架的更新迭代具有更好的性能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T12:17:48.877

您的团队可能的意思是：

> 我选择的 Linux 发行版仍然提供 Ruby 1.8.7（如果你不走运，还是 1.8.6）。由于他们还没有更新，我认为它还不稳定，但我没有这方面的硬数据。

但是，Linux 发行版的更改非常缓慢，而且它们很难确保所有软件都已更新以在较新的语言版本上正常工作。

话虽如此，Ruby 1.8很快[就要报废了。](http://www.ruby-lang.org/en/news/2011/10/06/plans-for-1-8-7/)现在，它只接收安全更新，但没有其他错误修复。2013 年 7 月，它将完全不受支持。仅此一项就足以让您尽快升级您的应用程序。

至于性能问题：对于大多数工作负载，Ruby 1.9.3 被认为比 Ruby 1.8.7 更快。Ruby 2.0 被认为比 1.9.3 快一点，但不如从 1.8.7 到 1.9 的变化。也就是说，一般性能建议很难。您应该自己检查这些陈述是否适用于您的应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T12:08:26.340

这些可以帮助你

[http://nerds.airbnb.com/upgrading-from-ree-187-to-ruby-193](http://nerds.airbnb.com/upgrading-from-ree-187-to-ruby-193)

[http://blog.pothoven.net/2012/10/ruby-187-vs-193-performance.html](http://blog.pothoven.net/2012/10/ruby-187-vs-193-performance.html)

[http://pulse.sportngin.com/news_article/show/156863?referrer_id=543230](http://pulse.sportngin.com/news_article/show/156863?referrer_id=543230)

请注意，ruby 2 具有更好的性能

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T13:21:55.190

目前还不太清楚你在问什么。您从性能开始，然后切换到“生产就绪”，然后再回到性能。由于您两次询问性能，我假设这就是您的意思。

Ruby 版本对性能没有影响。有些人声称并非如此，但实际上并没有任何基准测试证明 Ruby 版本对性能有任何影响。

*对*性能有很大影响的是您使用的 Ruby 实现和实现的版本，以及您运行它的环境。例如，JRuby 比 MRI 快，JRuby 1.7 比 JRuby 1.6 快, 在 HotSpot 上运行的 JRuby 1.7 比在 J9 上运行的 JRuby 1.7 快，在 HotSpot 1.7 上运行的 JRuby 1.7 比在 HotSpot 1.6 上运行的 JRuby 1.7 快，在带有 C2 编译器的 HotSpot 1.7 上运行的 JRuby 1.7 比在 HotSpot 1.7 上运行的 JRuby 1.7 快与 C1 编译器，等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T08:59:09.857

[根据这个](http://www.ruby-lang.org/en/news/2011/10/06/plans-for-1-8-7/)，对 Ruby 1.8.7 的支持将在 2013 年 6 月之后完全放弃。

所以最好升级到 Ruby 1.9+ 和 Rails 3+。查看这篇关于如何从 Rails 2 迁移到 Rails 3+ 的[精彩文章](http://www.simonecarletti.com/blog/2010/07/the-way-to-rails-3/)

当前版本的 Rails 较旧，但由于您拥有 Rails 2 应用程序，这篇文章将帮助您发现 Rails 2 和 Rails 3+ 应用程序之间的差异。

还可以查看[Railscasts](http://railscasts.com)以获取有关如何升级到 Rails 3、Rails 3 和 Rails 4 中引入的更改的精彩截屏视频

# java - 使用@ElementCollection、@MapKeyJoinColumn 进行多对多关系时参考关键问题

> ID：15547025
> 
> 赞同：0
> 
> 时间：2013-03-21T12:04:26.773
> 
> 标签：java, jpa, jpa-2.0, java-ee-6

我正在尝试多对多关系，团队成员可以处理多个项目，一个项目可以有多个团队成员，表结构如下，

```
create table TBL_PROJECT_ONE(
       id integer primary key generated always as identity(start with 12,increment by 3),
       name varchar(50)
)

create table TBL_TEAM_MEMBER_ONE(
    id integer primary key generated always as identity(start with 7,increment by 5),
    name varchar(50),
    salary integer
)

create table EMP_PRJ_CADRE(
    MEMBER_ID integer references TBL_TEAM_MEMBER_ONE,
    PRJ_ID integer references TBL_PROJECT_ONE,
    CADRE varchar(10),
    constraint PK_001_EMP_TEAM primary key (MEMBER_ID,PRJ_ID)
) 
```

在这里，我创建了一个新表来存储关系，现在请关注 Employee 实体，

```
@Entity
@Table(name="TBL_TEAM_MEMBER_ONE")
public class EmployeeEntityFour implements Serializable{
   public EmployeeEntityFour(){}
   public EmployeeEntityFour(String empName,Integer salary){
   ...
   ..
   }
   @Id
   @GeneratedValue(strategy= GenerationType.IDENTITY)
   @Column(name="ID")
   private Integer empId;

   @Column(name="NAME")
   private String empName;

   @Column(name="SALARY")
   private Integer empSal;

   @ElementCollection(fetch= FetchType.LAZY)
   @CollectionTable(name="EMP_PRJ_CADRE")
   @MapKeyJoinColumn(name="PRJ_ID")
   @Column(name="CADRE")
   private Map<ProjectEntityOne,String> employeeCadre;
   ...
   ..
   .
} 
```

请按照项目实体的映射，

```
@Entity
@Table(name="TBL_PROJECT_ONE")
public class ProjectEntityOne implements Serializable{
   public ProjectEntityOne(){}
   public ProjectEntityOne(String name){
     this.projectName = name;
   }

   @Id
   @GeneratedValue(strategy= GenerationType.IDENTITY)
   @Column(name="ID")
   private Integer projectId;

   @Column(name="NAME")
   private String projectName;    

   @ElementCollection(fetch= FetchType.LAZY)
   @CollectionTable(name="EMP_PRJ_CADRE")
   @MapKeyJoinColumn(name="MEMBER_ID")
   @Column(name="CADRE")
   private Map<EmployeeEntityFour,String> employeeCadre;
   ....
   ..
   .
} 
```

在main方法测试中编写的代码如下，

```
ProjectEntityOne proj = new ProjectEntityOne("Citi Grand Central");        
Map<EmployeeEntityFour,String> cadreMap = new HashMap<EmployeeEntityFour,String>();
cadreMap.put(new EmployeeEntityFour("Murlinarayan Muthu",34000), "Senior Software Engineer");
cadreMap.put(new EmployeeEntityFour("Gopalkrishna Rajnathan",64000), "Software Engineer");
cadreMap.put(new EmployeeEntityFour("Premanna Swaminathan",94000), "Project Manager");

proj.setEmployeeCadre(cadreMap);

em.persist(proj); 
```

但我收到一个错误

```
ERROR: 'PROJECTENTITYONE_ID' is not a column in table or VTI 'APP.EMP_PRJ_CADRE'. 
```

当我在两个实体中都指定了@MapKeyJoinColumn 时，我也收到错误，因为第三个表的列不正确。

我在哪里失踪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:55:17.900

它以某种方式起作用，我不得不对代码进行一些更改，

首先，Entity ProjectEntityOne中编辑后的代码如下，

```
@ElementCollection(fetch= FetchType.LAZY)
@CollectionTable(name="EMP_PRJ_CADRE",joinColumns=@JoinColumn(name="PRJ_ID"))
@MapKeyJoinColumn(name="MEMBER_ID")
@Column(name="CADRE")    
private Map<EmployeeEntityFour,String> employeeCadre; 
```

我在这里所做的是我在@CollectionTable 中添加了@JoinedColumn，

我在 Entity EmployeeEntityFour 中所做的第二次更改，更改是我从中删除了 PorjectEntityOne 的 Map，

在测试中，我可以使用员工映射保存项目，但这里所有员工都应该已经保存了一个。即地图的关键

```
Map<EmployeeEntityFour,String> employeeCadre; 
```

应该已经被持久化并且我们可以持久化项目实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:02:15.160

在 EmployeeEntityFour 中的 employeeCadre 上，您需要一个 @JoinColumn(name="MEMBER_ID")，并且您还需要 ProjectEntityOne 中的一个 @JoinColumn(name="PRJ_ID") 员工Cadre。

但是，我不会这样建模。首先，您不能拥有双向 ElementCollection 映射，并且 ElementCollection 只能由一方拥有。最好的解决方案是定义一个到 EMP_PRJ_CADRE 表的 Cadre 实体映射，并从双方都有一个 OneToMany，并且每个都有一个 ManyToOne。

或者，您可以将 ManyToMany 与 MapKeyColumn 一起使用，但我认为拥有实体会更好。

# css - 使用背景图像制作菱形

> ID：15547027
> 
> 赞同：1
> 
> 时间：2013-03-21T12:04:30.667
> 
> 标签：css

我正在使用以下测试代码来尝试创建菱形类型的形状。跨度是一个标准的长方形，两个边会使它看起来像一个菱形

```
**********
 *      * 
  ****** 
```

但是，之前和之后的选择器似乎没有渲染任何东西。我不确定我是否做错了，或者我是否最好绝对定位它们。

有任何想法吗？

```
<style>

span {
width:50px;
height:20px;
color:white;
background-color:red;
padding:10px;
}

span:before {
background: url('left_side.png') left center no-repeat; 
height:43px; width:22px; 
}

span:after {
background: url('right_side.png') right center no-repeat; 
height:43px; width:22px;
}

</style>

<html>
<body>

<span>
Some text goes here
</span>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:20:43.817

```
 #demo { border-top: 100px solid red;
            border-left: 50px solid transparent;
            border-right: 50px solid transparent;
            height: 0; width: 100px; } 
```

做没有图像为什么人们制作 css3

演示：http: [//jsfiddle.net/sahilpopli/dRyLg/](http://jsfiddle.net/sahilpopli/dRyLg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:09:42.480

尝试这个：

```
span:before  {
   content: url('left_side.png'); 
   height:43px; width:22px; 
}

span:after {
   content: url('right_side.png'); 
   height:43px; width:22px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:18:34.370

该`content`属性是强制性的，即使留空：

```
span:before {
    content : "";
    display:inline-block;
    background: url('left_side.png') left center no-repeat; 
    height:43px; width:22px; 
}

span:after {
    content : "";
    display:inline-block;
    background: url('right_side.png') right center no-repeat; 
    height:43px; width:22px;
} 
```

**编辑：**添加`display:inline-block;`维度属性以实际使用跨度，请参阅此示例[http://jsfiddle.net/3nvhb/](http://jsfiddle.net/3nvhb/)

# python - python正则表达式：re.findall(r"(do|re|mi)+","mimi rere midore")

> ID：15547033
> 
> 赞同：3
> 
> 时间：2013-03-21T12:04:38.933
> 
> 标签：python, regex

我不明白为什么这个正则表达式，

```
re.findall(r"(do|re|mi)+","mimi rere midore"), 
```

产生这个结果，

```
['mi', 're', 're']. 
```

我的预期结果是 ['mimi', 'rere', 'midore']...

但是，当我使用这个正则表达式时，

```
re.findall(r"(?:do|re|mi)+","mimi rere midore"), 
```

它按预期生成结果。

你能告诉我两个正则表达式之间的区别吗？谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T12:06:25.747

不同之处在于捕获组。使用捕获 froup，*仅*`findall()`返回捕获的内容。如果没有捕获组，则返回整个匹配项。

 *在您的第一个示例中，该组*仅*捕获两个字符，无论是否重复。在第二个示例中，整个匹配包括任何重复。

[`re.findall()`文档](http://docs.python.org/2/library/re.html#re.findall)中的区别非常清楚：

> 返回字符串中模式的所有非重叠匹配，作为字符串列表。[...] 如果模式中存在一个或多个组，则返回组列表；如果模式有多个组，这将是一个元组列表。

如果您的`(do|re|mi)+`模式是较大模式的一部分，并且您只想*返回*`findall()`完整的重复字符集，请为两个字母选项使用非捕获组，并围绕整个捕获组：

 *```
r'Some example text: ((?:do|re|me)+)' 
```**

# android - 完成活动后，如何使用对话框运行 AsyncTask？

> ID：15547036
> 
> 赞同：2
> 
> 时间：2013-03-21T12:04:42.570
> 
> 标签：android

我有两个活动，一个用于显示条目，另一个用于创建它们。这是一个标准用例：

*   用户打开应用程序并显示条目。
*   用户单击按钮创建新条目并打开新活动。
*   用户完成创建条目并单击“完成”。
*   活动以 setResult() 和 finish() 结束。

我要添加的是在查看活动**完全加载后运行的 AsyncTask。**此 AsyncTask 在运行时显示一个对话框。问题是，当我像这样将这段代码放入 onActivityResult() 时：

```
@Override 
public void onActivityResult(int requestCode, int resultCode, Intent data) {     
    super.onActivityResult(requestCode, resultCode, data); 
        switch(resultCode) { 
        case (Activity.RESULT_OK): {
            mEntryListFragment.updateContent();
            runAsyncTaskHere();
        }
    }
} 
```

它在返回主活动之前运行 AsyncTask，并且不显示任何对话框。有什么想法我能做什么？

编辑：这是 AsyncTask。

```
public static class LogInTask extends AsyncTask<String, Void, Integer> {
    protected String username = "";
    protected String password = "";
    protected ProgressDialog dialog;
    protected boolean showDialogs;

    public LogInTask(boolean sd) {
        this.showDialogs = sd;
    }

    @Override
    protected void onPreExecute() {
        if (this.showDialogs) dialog = ProgressDialog.show(MainActivity.getContext(), null, "Logging in...");
    }

    @Override
    protected Integer doInBackground(String... login) {
        if (Config.DEBUG) Log.d(Config.APP_NAME, "in doInBackground() of LogInTask");
        HttpResponse response = null;
        String username = login[0];
        String password = login[1];
        try {
            HttpPost httpPost = new HttpPost(URL_BASE + URL_LOGIN);

            // main (JSON) login method
            JSONObject json = new JSONObject().put("user", 
                    new JSONObject()
                        .put("email", username)
                        .put("password", password)
                        .put("remember_me", Config.REMEMBER_LOGIN)
                    );
            this.username = username;
            this.password = password;
            StringEntity se = new StringEntity(json.toString());
            httpPost.setHeader("Accept", "application/json");
            httpPost.setHeader("Content-type", "application/json");
            httpPost.setEntity(se);

            response = httpclient.execute(httpPost);
            String responseEntity = EntityUtils.toString(response.getEntity());
            JSONObject result = new JSONObject(responseEntity);
            return result.getBoolean("success") ? 1 : KEY_ERROR; // Return 1 if successful and -1 if not
        } catch (UnknownHostException e) {
            e.printStackTrace();
            KEY_ERROR;
        } catch (Exception e) {
            e.printStackTrace();
            return KEY_ERROR;
        }
    }

    @Override
    protected void onPostExecute(Integer result) {
        if (this.showDialogs) {
            dialog.dismiss();
            String text = result == 1 ? "Login was successful." : "Login failed!";
            makeToast(text);
        }
    }
} 
```

编辑2：我试过这个：

```
boolean needToUpdate = false;
@Override 
public void onActivityResult(int requestCode, int resultCode, Intent data) {     
    super.onActivityResult(requestCode, resultCode, data); 
    switch(resultCode) { 
        case (Activity.RESULT_OK): {
            mEntryListFragment.updateContent();
            needToUpdate = true;
        }
    }
}

@Override
public void onResume() {
    super.onResume();
    if (needToUpdate) {
        runAsyncTaskHere();
        mEntryListFragment.updateContent();
    }
    needToUpdate = false;
} 
```

它做了同样的事情。

编辑 3：这里是 AndroidManifest 的相关部分：

```
 <activity 
        android:name=".MainActivity" 
        android:label="@string/app_name"
        android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".AddEntryActivity"
        android:label="@string/app_name"
        android:screenOrientation="portrait"
        android:configChanges="orientation" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:09:32.637

`AsyncTask`是一个用于后台处理的类，请不要试图用它来对你的 UI 或活动做一些事情，它**总是**会导致不良和不可预测的行为。

也许我应该详细说明一下。活动来来去去，被杀死和恢复，被摧毁和重建，这是他们通常的生活方式。这是绝对正常的。

你`AsyncTask`可能很容易活得比你的`Activity`，所以当你试图访问 UI 时，它已经消失了。再次销毁并重新创建，你所拥有的只是一个死指针，它给你一个例外。加载您的文件`AsyncTask`，做网络，访问数据库。只是不要尝试访问 UI/Activity，否则您的应用程序最终会崩溃并烧毁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:27:13.230

1.  When you click on the Button to create new Entry, launch New Activity. but keep the Activity with entries. do not call finish() after intent.
2.  After creation, and on clicking DONE, just close the Current Activity.(call finish())
3.  mEntryListFragment.updateContent write this method in onStart() of the activity displaying entries.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:09:15.447

使用[ProgressDialog](http://developer.android.com/reference/android/app/ProgressDialog.html)来实现这一点。启动对话框 onPreExecute() 并完成它 onPostExecute() 方法。您必须在异步任务中覆盖这些方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T12:58:25.580

只是一个想法。

1.  你确定你正在检索正确的上下文。
2.  布尔值设置是否正确？

另外，我相信您正在使用 HttpCore。据我所知，由于它的粒度（与默认情况下可用的 HttpConnection 类相比），它需要更多注意网络和断开/连接。因此，我不认为将它与 AsyncTask 类一起使用是最好的，因为它们与 UI 线程几乎没有联系。因此，不要给用户太多控制权，并且可能会超出应用程序的生命周期。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T12:13:01.257

我认为，你必须使用回调的概念，

就像以前一样，加载完成，实现`callback`你可以处理的内部，`AsyncTask`在内部执行你的任务之后`doInBackGround()`，你可以使用`onPostExecute()`。

尝试这样的事情，

```
Callback_interface
{
    void async_run_after_some_time() ;
}

main_activity_class extends Activity Implements Callback_interface
{
    void async_run_after_some_time()
    {
        // implement your toast here 
    }
}

onPostExecute()
{
    main_activity_class ob = new main_activity_class ();
    ob.async_run_after_some_time();
} 
```

# iphone - IOS6 中的 UIImagePickerController 问题

> ID：15547038
> 
> 赞同：0
> 
> 时间：2013-03-21T12:04:44.200
> 
> 标签：iphone, ios, objective-c, ios6

在我的应用程序中，我集成了用于捕获图像的 UIImagePickerController。在 IOS 6 版本的设备中，如果我在运行时（相机处于运行模式）将 UIImagePickerController 的方向从纵向更改为横向，然后再次出现，底部的状态栏视图对齐自动更改（y 坐标自动增加。）它在 IOS 5 中工作正常。

在方向问题发生之前。

![在此处输入图像描述](../Images/b23b463042ab9cebc80d2b8d710b1271.png)

在将方向从纵向更改为横向并返回纵向模式后，IOS 6 中的视图将像这样更改。

![在此处输入图像描述](../Images/298349d9226bc189b9bcdb60d201b756.png)

用于显示 UIImagePickerController 的代码

```
 picker = [[UIImagePickerController alloc]init];
            picker.delegate = (id)self;
            picker.allowsEditing=YES;
            picker.sourceType = UIImagePickerControllerSourceTypeCamera ;
           [self presentViewController:picker animated:YES completion:nil]; 
```

指导我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:12:34.430

简单地使用这些行并检查：

```
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];

imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;

imagePicker.delegate = self;

[self presentViewController:imagePicker animated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:07:05.793

而不是呈现 uiimagepicker 视图控制器，只需使用适当的框架添加作为带有 self 的子视图，例如`[picker.view setFrame:CGRectMake(picker.view.frame.origin.x, picker.view.frame.origin.y-20, picker.view.frame.size.width, picker.view.frame.size.height)];`

# mysql - MySQL 获取时间优化

> ID：15547040
> 
> 赞同：8
> 
> 时间：2013-03-21T12:04:45.370
> 
> 标签：mysql, query-optimization, database-performance

o我有一个包含 200 万个寄存器的表，但它会很快增长。基本上，该表包含具有相应描述符的图像的兴趣点。当我尝试执行选择在空间上靠近查询点的点的查询时，总执行时间太长了。更准确地说，持续时间/获取 = 0.484 秒 / 27.441 秒。查询非常简单，只返回约 17000 行。

我的查询是：

```
SELECT fp.fingerprint_id, fp.coord_x, fp.coord_y, fp.angle,
fp.desc1, fp.desc2, fp.desc3, fp.desc4, fp.desc5, fp.desc6, fp.desc7, fp.desc8, fp.desc9, fp.desc10,
fp.desc11, fp.desc12, fp.desc13, fp.desc14, fp.desc15, fp.desc16, fp.desc17, fp.desc18, fp.desc19,
fp.desc20, fp.desc21, fp.desc22, fp.desc23, fp.desc24, fp.desc25, fp.desc26, fp.desc27, fp.desc28,
fp.desc29, fp.desc30, fp.desc31, fp.desc32
FROM fingerprint fp 
WHERE 
fp.is_strong_point = 1 AND 
(coord_x BETWEEN 193-40 AND 193+40) AND (coord_y BETWEEN 49-15 AND 49+15 ) 
LIMIT 1,1000000; 
```

这就是我所做的。

1.  我试图改变`key_buffer_size`，`my.ini`但没有看到太大的变化。
2.  此外，我尝试将 coord_x 和 coord_y 设置为索引，但查询时间变慢了。
3.  该表按 coord_x 字段的范围进行分区，这给了我更好的结果。

如何减少获取时间？是否有可能将其减少到毫秒？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-11-01T05:02:40.577

我也遇到了缓慢的获取问题（MySQL，InnoDB）。最后我发现 innodb_buffer_pool_size 对于我的系统默认设置为 8MB，这不足以处理查询。将其增加到 1GB 后，性能似乎很好：

```
 Duration / Fetch
353 row(s) returned 34.422 sec / 125.797 sec (8MB innodb buffer)
353 row(s) returned 0.500 sec / 1.297 sec (1GB innodb buffer) 
```

**更新：**

要更改 innodb_buffer_pool_size 将此添加到您的 my.cnf

```
innodb_buffer_pool_size=1G 
```

重启你的mysql使其生效

参考：[如何在 Mac OS 上更改 MySQL 中 innodb_buffer_pool_size 的值？](https://stackoverflow.com/questions/5696857/how-to-change-value-for-innodb-buffer-pool-size-in-mysql-on-mac-os/5698085#5698085)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:15:36.693

如果我是对的，那么查询真的很快，但是从数据库中获取数据的速度很慢。从存储中加载 170000 个结果需要 27 秒。

看起来您使用了错误的数据库类型。尝试将表从一个数据库引擎切换到另一个。

为了获得最大速度，您可以使用 MEMORY 引擎。唯一的缺点是，如果您必须对该表进行动态更改，则必须将该表的副本存储在另一个引擎中，并且在任何更改之后您必须重新加载差异或整个表。

此外，您还必须制作一个在您重新启动服务器时触发的脚本，以便在您的 mysql 服务器启动时加载您的内存表

[请参阅此处获取文档](http://dev.mysql.com/doc/refman/5.1/en/memory-storage-engine.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-10-29T08:16:55.670

增加我的缓冲区大小使我的查询更快。但是您需要将 my.ini 文件以 notepad++ 的形式打开，因为如果您以记事本的形式打开它，它会包含一些十六进制数据。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2020-03-05T13:13:03.740

确保该行没有写在你的 pom.xml 中。

```
<property name="hbm2ddl.auto">create</property> 
```

如果它被写入而不是删除它。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2019-11-09T10:11:48.427

我找到了一个修复方法，只需禁用您的 AVG 或系统中的任何抗病毒药物，然后重新启动您的工作台

# vba - 用于更新“更改日期”的 Excel 宏使 Excel 崩溃

> ID：15547044
> 
> 赞同：1
> 
> 时间：2013-03-21T12:04:55.403
> 
> 标签：excel, vba, excel

我有一个[excel](/questions/tagged/excel "显示标记为“excel”的问题")文件，其中有几个带有“上次更改：”字段的表格。如果对该表进行了任何更改，则该字段应更新为当前日期。

我实现了一个宏，它做了它应该做的，但不幸的是它禁用了非常烦人的“反向”（Strg + Z）功能。因此，我编辑了宏，使反向功能再次起作用。我的宏现在看起来像这样：

```
Option Explicit
Public Merker

Private Sub Worksheet_Change(ByVal Target As Range)
    If Not ThisWorkbook.ReadOnly Then
        Application.OnUndo "Rev. Change", "Wiederherstellen"
        Merker = Cells(3, 2)
        Cells(3, 2) = Date
    End If
End Sub

Sub Wiederherstellen()
    Cells(3, 2) = Merker
End Sub 
```

当我应用此宏时，一旦我对文档进行更改，Excel 就会崩溃。我的代码中有无效的东西吗？我真的很想知道，因为没有错误消息或错误行为，只有应用程序崩溃。这种崩溃每次都可靠地发生。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T12:08:24.447

您的事件可能会在无限循环中调用自身。尝试禁用事件以停止代码在此行上重新调用自身`Cells(3, 2) = Date`

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Not ThisWorkbook.ReadOnly Then
    Application.EnableEvents = False
        Application.OnUndo "Rev. Change", "Wiederherstellen"
        Merker = Cells(3, 2)
        Cells(3, 2) = Date
    Application.EnableEvents = True
    End If
End Sub 
```

# jakarta-ee - 使用 LDAP 进行验证

> ID：15547051
> 
> 赞同：0
> 
> 时间：2013-03-21T12:05:08.790
> 
> 标签：jakarta-ee, oracle-adf

我有一个在 Weblogic 上运行的 Web 应用程序。通常，当用户使用浏览器访问我
的 Web 应用程序时，Web 应用程序会向他们显示一个登录页面，要求他们输入用户名和密码。我必须根据 LDAP 目录对它们进行身份验证，然后它应该显示请求的资源。此处使用的用户名和密码与 Windows NT 用户名和密码相同。我能够连接 LDAP，但验证密码不起作用。

请在这方面帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:39:20.720

检查您的服务器是 LDAP v3 还是 LDAP v2？当您尝试连接 ldap 时，请使用适当的版本进行连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:33:18.467

你有几个选择：

1.  使用用户的凭据进行绑定。如果绑定成功，他们的密码是正确的。
2.  根据您的目录服务器（您似乎正在使用 AD）和相关策略，您可能会或可能无法读取密码属性。但是这种情况非常少见，而且很可能无论如何都会对密码进行哈希处理。

# android - 一个活动中的多个 YouTubePlayerViews

> ID：15547056
> 
> 赞同：1
> 
> 时间：2013-03-21T12:05:27.383
> 
> 标签：android, api, youtube

我有一个可以以编程方式创建多个 YouTubePlayerViews 的活动，这是包含每个 YouTubePlayerView 的类。

```
public class MyYouTubeView extends LinearLayout implements YouTubePlayer.OnInitializedListener {

private String mYouTubeVideoId;
private YouTubePlayerView mYouTubePlayerView;

public JournalYouTubeView(Activity context, String youTubeVideoId) {
    super(context);
    mYouTubeVideoId = youTubeVideoId;
    String apiKey = context.getResources().getString(R.string.youtube_api_key);
    mYouTubePlayerView = new YouTubePlayerView(context);
    mYouTubePlayerView.setTag(mYouTubeVideoId);
    mYouTubePlayerView.initialize(apiKey, this);
    LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT);
    int margin = (int) ScreenUtils.dip2pixel(10, context);
    params.leftMargin = margin;
    params.rightMargin = margin;
    addView(mYouTubePlayerView, params);
}

@Override
public void onInitializationFailure(Provider arg0, YouTubeInitializationResult arg1) {

}

@Override
public void onInitializationSuccess(YouTubePlayer.Provider provider,
        final YouTubePlayer player,
        boolean wasRestored) {

    if (!wasRestored) {
        player.cueVideo(mYouTubeVideoId);
    }
}
} 
```

不幸的是，当我的视图层次结构中有多个 YouTubePlayerView 实例时，这似乎不起作用。在示例 API 应用程序中，他们似乎在处理多个视频时使用片段，但是如果没有对应用程序进行一些重大的重新设计，我就无法使用这些片段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:06:04.377

所以看起来（尽管文档中没有提到）每个活动只能托管一个视频播放器。解决方案是使用将启动一个 YouTubePlayerView 的 ThumbNailViews。

# c# - 在 C# 中表达类型关系并避免长类型参数列表

> ID：15547058
> 
> 赞同：7
> 
> 时间：2013-03-21T12:05:41.827
> 
> 标签：c#, generics, type-parameter

我有这种情况（大大简化）：

```
interface IPoint<TPoint> 
   where TPoint:IPoint<TPoint>
{
   //example method
   TPoint Translate(TPoint offset);
}

interface IGrid<TPoint, TDualPoint> 
   where TPoint:IPoint<T
   where TDualPoint:Ipoint
{
   TDualPoint GetDualPoint(TPoint point, /* Parameter specifying direction */);
} 
```

这是典型的实现：

```
class HexPoint : IPoint<HexPoint> { ... }
class TriPoint : IPoint<TriPoint> { ... }

class HexGrid : IGrid<HexPoint, TriPoint> { ... }
class TriGrid : IGrid<TriPoint, HexPoint> { ... } 
```

因此，在 a 上`HexGrid`，客户端可以调用以获取双网格上的一个点，并使用完全正确的类型：

```
TriPoint dual = hexGrid.GetDualPoint(hexPoint, North); 
```

到目前为止，一切都很好; 客户不需要知道这两个点如何关联的类型，她只需要知道在 a`HexGrid`上方法`GetDualPoint`返回 a `TriPoint`。

除了...

我有一个充满通用算法的类，它们对`IGrid`s 进行操作，例如：

```
static List<TPoint> CalcShortestPath<TPoint, TDualPoint>(
   IGrid<TPoint, TDualPoint> grid, 
   TPoint start, 
   TPoint goal) 
{...} 
```

现在，客户端突然必须知道 a 的对偶点是 a 的小细节，`HexPoint`我们`TriPoint`需要将它指定为类型参数列表的一部分，尽管这对于这个算法并不重要：

```
static List<TPoint> CalcShortestPath<TPoint, *>(
   IGrid<TPoint, *> grid, 
   TPoint start, 
   TPoint goal) 
{...} 
```

理想情况下，我想让 DualPoint 成为 type 的“属性” `IPoint`，所以这`HexPoint.DualPoint` *就是*type `TriPoint`。

允许 IGrid 看起来像这样的东西：

```
interface IGrid<TPoint> 
   where TPoint:IPoint<TPoint> 
   //and TPoint has "property" DualPoint where DualPoint implements IPoint...
{
   IGrid<TPoint.DualPoint> GetDualGrid();
} 
```

和这样的`CalcShortestPath`功能

```
static List<TPoint> CalcShortestPath<TPoint>(
   IGrid<TPoint> grid, 
   TPoint start, 
   TPoint goal) 
{...} 
```

当然，据我所知，这是不可能的。

但是有没有办法我可以改变我的设计以某种方式模仿这个？以便

*   它表达了两种类型之间的关系
*   它可以防止过多的类型参数列表
*   它可以防止客户过分考虑具体类型如何“专门化”该类型实现的接口的类型参数。

* * *

说明为什么这会成为一个真正的问题：在我的库`IGrid`中实际上有 4 个类型参数，`IPoint`有 3 个，并且两者都可能增加（最多 6 个和 5 个）。（大多数这些类型参数之间存在类似的关系。）

算法的显式重载而不是泛​​型是不切实际的：每个`IGrid`和都有 9 个具体实现`IPoint`。一些算法在两种类型的网格上运行，因此具有大量的类型参数。（很多函数的声明都比函数体长！）

当我的 IDE 在自动重命名期间丢弃*所有*类型参数时，我的精神负担被驱散了，我不得不手动放回所有参数。这不是一项盲目的任务。我的大脑被炸了。

* * *

根据@Iridium 的要求，显示类型推断何时失败的示例。显然，下面的代码没有做任何事情；这只是为了说明编译器行为。

```
using System;
using System.Collections.Generic;
using System.Linq;

public interface IPoint<TPoint, TDualPoint> 
   where TPoint:IPoint<TPoint, TDualPoint> 
   where TDualPoint : IPoint<TDualPoint, TPoint>{}

interface IGrid<TPoint, TDualPoint> 
   where TPoint:IPoint<TPoint, TDualPoint>
   where TDualPoint:IPoint<TDualPoint, TPoint>{}

class HexPoint : IPoint<HexPoint, TriPoint> 
{
   public HexPoint Rotate240(){ return new HexPoint();} //Normally you would rotate the point
}

class TriPoint : IPoint<TriPoint, HexPoint>{}    
class HexGrid : IGrid<HexPoint, TriPoint>{}

static class Algorithms
{  
   public static IEnumerable<TPoint> TransformShape<TPoint, TDualPoint>(
      IEnumerable<TPoint> shape, 
      Func<TPoint, TPoint> transform)

   where TPoint : IPoint<TPoint, TDualPoint> 
   where TDualPoint : IPoint<TDualPoint, TPoint> 
   {
      return 
         from TPoint point in shape
            select transform(point);
   }

   public static IEnumerable<TPoint> TransformShape<TPoint, TDualPoint>(
      IGrid<TPoint, TDualPoint> grid, 
      IEnumerable<TPoint> shape, 
      Func<TPoint, TPoint> transform)

   where TPoint : IPoint<TPoint, TDualPoint> 
   where TDualPoint : IPoint<TDualPoint, TPoint> 
   {
      return 
         from TPoint point in shape
            //where transform(point) is in grid
            select transform(point);
   }
}

class UserCode
{  
   public static void UserMethod()
   {
      HexGrid hexGrid = new HexGrid();      
      List<HexPoint> hexPointShape = new List<HexPoint>(); //Add some items

      //Compiles
      var rotatedShape1 = Algorithms.TransformShape(
         hexGrid,
         hexPointShape, 
         point => point.Rotate240()).ToList();

      //Compiles   
      var rotatedShape2 = Algorithms.TransformShape<HexPoint, TriPoint>(
         hexPointShape, 
         point => point.Rotate240()).ToList(); 

      //Does not compile   
      var rotatedShape3 = Algorithms.TransformShape(
          hexPointShape, 
          point => point.Rotate240()).ToList();
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:50:50.890

我曾经遇到过泛型重载的情况，我有一组 5 个泛型接口，每个接口都根据泛型接口的每个实现进行了参数化。从理论上讲，这是一个绝妙的设计，因为这意味着所有方法参数和返回类型都是静态检查的。

在实践中，在与该设计争论了一段时间后，并意识到这意味着任何将这些接口中的任何一个作为参数的方法都必须指定所有类型参数，我决定简单地将这些接口设为非泛型并使用方法参数的运行时强制转换，而不是让编译器强制执行它。

我建议简化设计 - 可能会从接口中删除所有类型参数。

根据您要定义的算法类型，一个可能的解决方案可能是定义额外的接口，这些接口采用更少的类型参数，并作为交换暴露更少的方法。

例如：

```
interface IPoint 
{
    int X {get;}
    int Y {get;}
    // Maybe you do not need that one.
    IPoint Translate(IPoint dual);
}
interface IPoint<TPoint> : IPoint
    where TPoint : IPoint<TPoint>
{
    new TPoint Translate(TPoint dual);
} 
```

现在，您可以定义一个算法，该算法在`IPoint`没有关于双点类型泄漏的信息的情况下采用。但是请注意，为同一事物使用通用和非通用接口会使设计更加复杂。

如果没有更多关于真实接口的信息，以及你需要如何使用它，我真的不知道要建议什么精确的修改。

不要忘记你应该平衡实现的复杂性和可读性——即使你在重写方法类型参数时也遇到了麻烦，那么想想那些会在没有编写对象的情况下使用你的对象的人！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T16:15:26.007

所以，要根据我在评论中谈到的一次性想法抛出一个答案......

基本要点是“定义一个类型来传达这种点对偶的概念，并在你的相关签名中使用它，以便为编译器提供它需要的提示”

每当您遇到可怕的“无法从使用中推断类型”错误时，您应该阅读一件事：http: [//blogs.msdn.com/b/ericlippert/archive/2009/12/10/constraints-are-not-part- of-the-signature.aspx](http://blogs.msdn.com/b/ericlippert/archive/2009/12/10/constraints-are-not-part-of-the-signature.aspx)

在那，先生。Lippert 阐明了一个严酷的事实，即在这个推理阶段只检查签名的参数，而不是约束。所以我们必须在这里更“具体”一点。

首先，让我们定义我们的“二元关系”——我应该注意这是建立这些关系的**一种方式，它们（理论上）有无数种。**

```
public interface IDual<TPoint, TDualPoint> 
    where TPoint: IPoint<TPoint>, IDual<TPoint, TDualPoint>
    where TDualPoint: IPoint<TDualPoint>, IDual<TDualPoint, TPoint>
{} 
```

现在我们回过头来改造我们现有的签名：

```
public interface IPoint<TPoint> 
   where TPoint:IPoint<TPoint> 
{}
class TriPoint : IPoint<TriPoint>, IDual<TriPoint,HexPoint>
{}
class HexPoint : IPoint<HexPoint>, IDual<HexPoint,TriPoint> 
{
   // Normally you would rotate the point
   public HexPoint Rotate240(){ return new HexPoint();} 
} 
```

同样在“次要类型”上，网格：

```
interface IGrid<TPoint, TDualPoint> 
   where TPoint: IPoint<TPoint>, IDual<TPoint, TDualPoint>  
   where TDualPoint : IPoint<TDualPoint>, IDual<TDualPoint, TPoint> 
{
    TDualPoint GetDualPoint(TPoint point);
}
class HexGrid : IGrid<HexPoint, TriPoint>
{
    public TriPoint GetDualPoint(HexPoint point)
    {
        return new TriPoint();
    }
}
class TriGrid : IGrid<TriPoint, HexPoint> 
{
    public HexPoint GetDualPoint(TriPoint point)
    {
        return new HexPoint();
    }
} 
```

最后是我们的实用方法：

```
static class Algorithms
{  
   public static IEnumerable<TPoint> TransformShape<TPoint, TDualPoint>(
      IEnumerable<IDual<TPoint, TDualPoint>> shape, 
      Func<TPoint, TPoint> transform)
   where TPoint : IPoint<TPoint>, IDual<TPoint, TDualPoint>   
   where TDualPoint : IPoint<TDualPoint>, IDual<TDualPoint, TPoint> 
   {
      return 
         from TPoint point in shape
            select transform(point);
   }

   public static IEnumerable<TPoint> TransformShape<TPoint, TDualPoint>(
      IGrid<TPoint, TDualPoint> grid, 
      IEnumerable<IDual<TPoint, TDualPoint>> shape, 
      Func<TPoint, TPoint> transform)
   where TPoint : IPoint<TPoint>, IDual<TPoint, TDualPoint>   
   where TDualPoint : IPoint<TDualPoint>, IDual<TDualPoint, TPoint> 
   {
      return 
         from TPoint point in shape
            //where transform(point) is in grid
            select transform(point);
   }
} 
```

注意方法上的签名——我们说“嘿，我们给你的这个列表，它绝对有双重点”，这就是允许这样的代码：

```
 HexGrid hexGrid = new HexGrid();      
  List<HexPoint> hexPointShape = new List<HexPoint>(); //Add some items

  //Compiles
  var rotatedShape1 = Algorithms
      .TransformShape(
     hexGrid,
     hexPointShape, 
     point => point.Rotate240())
    .ToList();

  //Compiles   
  var rotatedShape2 = Algorithms
      .TransformShape<HexPoint, TriPoint>(
     hexPointShape, 
     point => point.Rotate240())
    .ToList();     

  //Did not compile, but does now!
  var rotatedShape3 = Algorithms
      .TransformShape(
      hexPointShape, 
      point => point.Rotate240())
    .ToList(); 
```

# spring - Liferay spring mvc portlets webapplication context

> ID：15547059
> 
> 赞同：1
> 
> 时间：2013-03-21T12:05:41.933
> 
> 标签：spring, liferay

我有一个war 文件，其中有10 个portlet。因此，在每个 acc-portlet.xml（所有 10 个 portlets.xml）中，我在其中添加了 spring injection beans 声明，并且我有 common.xml，其中包含跨 portlet 的常用 bean，并使用标签导入了这个 xml 文件每个 portlet xml 文件。

在 portlet 的控制器类中，我实现了 ApplicationContextAware。当我打印 applicationcontext 时，我实际上看到了 10 个 diff webapplicationcontext。

但根据我的理解（如果我没记错的话）应该只有 webapplicationcontext，因为这是一场单一的战争。

由于我在每个 portlet 中导入了 common.xml，spring 正在为每个 portlet 实例化单例 bean。

查看日志内容：

```
13:03:44,795 INFO  [XmlPortletApplicationContext:500] Refreshing PortletApplicationContext for namespace 'acc1-portlet': startup date [Thu Mar 21 13:03:44 GMT 2013]; parent: Root WebApplicationContext
13:03:44,795 INFO  [XmlBeanDefinitionReader:315] Loading XML bean definitions from PortletContext resource [/WEB-INF/acc1-portlet.xml]
13:03:44,827 INFO  [XmlBeanDefinitionReader:315] Loading XML bean definitions from PortletContext resource [/WEB-INF/common.xml]
13:03:44,858 INFO  [DefaultListableBeanFactory:581] Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@e894e0: defining beans [org.springframework.web.servlet.handler.SimpleMappingExceptionResolver#0,viewResolver,messageSource,jaxbMarshaller

13:03:44,795 INFO  [XmlPortletApplicationContext:500] Refreshing PortletApplicationContext for namespace 'bcc1-portlet': startup date [Thu Mar 21 13:03:44 GMT 2013]; parent: Root WebApplicationContext
13:03:44,795 INFO  [XmlBeanDefinitionReader:315] Loading XML bean definitions from PortletContext resource [/WEB-INF/bcc1-portlet.xml]
13:03:44,827 INFO  [XmlBeanDefinitionReader:315] Loading XML bean definitions from PortletContext resource [/WEB-INF/common.xml]
13:03:44,858 INFO  [DefaultListableBeanFactory:581] Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@e894e0: defining beans [org.springframework.web.servlet.handler.SimpleMappingExceptionResolver#0,viewResolver,messageSource,jaxbMarshaller. 
```

我怎样才能使 common.xml 内容只加载一次并有一个单一的 spring applicationcontext？

# c# - 在 Windows Phone 8 中旋转 HubTile

> ID：15547067
> 
> 赞同：3
> 
> 时间：2013-03-21T12:06:33.020
> 
> 标签：c#, windows-phone-7, xaml, windows-phone-8

在我的 windows phone 8 应用程序中，我使用的是 HubTile 控件。有什么办法可以改变 HubTile 的旋转速度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:18:49.730

如果您指的是用于 Windows Phone 的 Silverlight 工具包中的 HubTile，则您无法控制旋转速度。

一些信息：

[http://www.geekchamp.com/articles/windows-phone-hubtile-in-depth-part1-key-concepts-and-api](http://www.geekchamp.com/articles/windows-phone-hubtile-in-depth-part1-key-concepts-and-api)

您可以创建自己的与 HubTile 相同的控件并为其设置速度。查看：

[http://www.jeffblankenburg.com/2010/10/29/31-days-of-windows-phone-day-29-animations/](http://www.jeffblankenburg.com/2010/10/29/31-days-of-windows-phone-day-29-animations/)

# android - 在android中以编程方式结束来电

> ID：15547068
> 
> 赞同：4
> 
> 时间：2013-03-21T12:06:34.013
> 
> 标签：android, android-intent

我希望通过我的应用程序以编程方式结束来电。搜索后，我得到了使用 com.android.internal.telephony 的代码，但表示它不适用于高于 2.3 的版本。我得到了通过按键事件参加电话的代码

```
 Intent i = new Intent(Intent.ACTION_MEDIA_BUTTON);
                KeyEvent event = new KeyEvent(KeyEvent.ACTION_DOWN,KeyEvent.KEYCODE_HEADSETHOOK);
                i.putExtra(Intent.EXTRA_KEY_EVENT, event );
                context.sendOrderedBroadcast(i, null); 
```

有没有类似的方法可以结束通话？请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T07:26:57.593

查看此链接以在蜂窝设备上执行它之后它被弃用并且它不会工作但是，这是一个处理它的技巧

[http://prasanta-paul.blogspot.in/2010/09/call-control-in-android.html](http://prasanta-paul.blogspot.in/2010/09/call-control-in-android.html)

解决方案

1.  收到来电广播后，您会立即显示一个窗口，并将您的 END 呼叫按钮放在与中心默认的 android 结束呼叫按钮相同的位置，以便用户按下您的按钮，但您将在该窗口下方传递事件，因此通话由 android 结束，但您成为赢家..

这是一个教程，用于在您想要的任何地方创建一个窗口，而无需为其启动活动......

[http://www.piwai.info/chatheads-basics/#AndroidHead](http://www.piwai.info/chatheads-basics/#AndroidHead)

# gwt - 当我单击 GWT/MGWT 中的面板时要执行的事件

> ID：15547070
> 
> 赞同：0
> 
> 时间：2013-03-21T12:06:42.313
> 
> 标签：gwt, mgwt

我想在单击面板时执行一个事件，就像用户单击按钮时发生的那样。

我需要这个来处理这个面板的点击事件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T12:17:04.377

您必须使用 GWT[`FocusPanel`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/FocusPanel.html)使其内容可聚焦，并添加捕获鼠标和键盘事件的能力。所以把你的`panel`内心包裹起来`FocusPanel`。

```
Panel panel = new Panel();    //Your panel here(ex;hPanel,vPanel)
FocusPanel focusPanel = new FocusPanel();

focusPanel.addClickListener(new ClickListener(){

    public void onClick(Widget sender) {
        // TODO Auto-generated method stub
    }

});

focusPanel.add(panel); 
```

另一种可能性（没有 FocusPanel）

```
 HorizontalPanel hpanel = new HorizontalPanel();
        hpanel.sinkEvents(Event.CLICK);
        hpanel.addHandler(new ClickHandler() {

            @Override
            public void onClick(ClickEvent event) {
                // TODO Auto-generated method stub

            }
        }, ClickEvent.getType()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:47:49.503

我会做一个新的小部件（在这个例子中扩展一个 Absolute 面板），它像这样实现 HasClickHandlers 接口

```
public class MyCustomPanel extends AbsolutePanel
implements HasClickHandlers
{
    public HandlerRegistration addClickHandler(
        ClickHandler handler)
    {
        return addDomHandler(handler, ClickEvent.getType());
    }
} 
```

然后在我的代码中我会这样做

```
MyCustomPanel mPanel = new MyCustomPanel();
mPanel.addClickHandler(new ClickHandler() {
    public void onClick(ClickEvent event) {
        // Do on click stuff here.
    }
}); 
```

# css - Zurb Foundation - Sass 列不保持在行中

> ID：15547076
> 
> 赞同：2
> 
> 时间：2013-03-21T12:06:56.423
> 
> 标签：css, responsive-design, sass, compass-sass, zurb-foundation

我在使用 Sass/Compass 让列在 Foundation 4 中工作时遇到了一个非常基本的问题。

在大于 $small 媒体查询断点 (768px) 的屏幕尺寸下，我希望两列的宽度相等（每列 6 列）并且彼此相邻。现在，在屏幕尺寸大于 $small 的情况下，每一列只占据页面的左半部分，第二列低于第一列。

我尝试过使用 Foundation 的类而不是 Sass mixins，但我得到了相同的结果。我也尝试过重置为 Foundation 默认设置和导入，但没有任何变化。

我有以下 HTML：

```
<section>
  <div class="header">
    <h1>Sample text here.</h1>
  </div>
  <div class="content">
    <p>Sample text here.</p>
  </div>
</section> 
```

我正在使用以下 SCSS：

```
section {
  @include grid-row;
}

.header {
  @include grid-column( 12 );
  @media #{$small} {
    @include grid-column( 6 );
  }
}

.content {
  @include grid-column( 12 );
  @media #{$small} {
    @include grid-column( 6 );
  }
} 
```

这是简化测试用例的链接：http: [//bit.ly/149zpEq](http://bit.ly/149zpEq)

屏幕尺寸大于 768 像素时，红色列和绿色列应并排排列。唉，他们不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-09T20:21:20.950

使用此标记，无需任何额外的 sass 代码：

```
<section class="row">
    <div class="large-6 medium-6 small-12 columns">
        <div class="header">
            <h1>Sample text here.</h1>
        </div>
    </div>
    <div class="large-6 medium-6 small-12 columns">
        <div class="content">
            <p>Sample text here.</p>
        </div>
    </div>
</section> 
```

您只需为大于 $small 的屏幕添加“large-6”和“medium-6”，为小屏幕添加“small-12”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:08:56.313

将您的 Sass 更改为此。

```
.header {
  display: table-cell;
  @include grid-column( 12 );
  @media #{$small} {
    @include grid-column( 6 );
  }
}

.content {
  display: table-cell;
  @include grid-column( 12 );
  @media #{$small} {
    @include grid-column( 6 );
  }
} 
```

display: table 本身是不够的，子元素必须有 display: table-cell。

另一种选择是

```
section > div{
  display: table-cell;
} 
```

# java - 线程创建和启动

> ID：15547079
> 
> 赞同：0
> 
> 时间：2013-03-21T12:07:13.003
> 
> 标签：java

有没有区别

```
class MyThread extends Thread
{
}

MyThread obj = new MyThread();
Thread t = new Thread(obj);
t.start() 
```

VS

```
obj.start() 
```

选择一个比另一个有什么优势吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T12:10:51.390

一般来说，您不应该扩展`Thread`，而是实施`Runnable`。您的示例将变为：

```
class MyRunnable implements Runnable {

   public void run() {
      // Whatever needs to be done.
   }
}

MyRunnable obj = new MyRunnable();
Thread t = new Thread(obj);
t.start() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T12:11:05.587

是的，有一个区别：你不应该**扩展**，`Thread`而是使用`new Thread(myRunnable)`. 这类似于您的第一种方法，只是您的方式在扩展 Thread 而不是实现 Runnable 方面被误导了。所以这样做：

```
class MyRunnable implements Runnable {
   public void run() { ... }
}

Thread t = new MyThread(new MyRunnable());
t.start(); 
```

或者，更方便的是，

```
new Thread(new Runnable() { public void run() {
  ... stuff ...
}}).start(); 
```

一定要区分 和 的概念`Thread`：`Runnable`前者是实际系统资源的重量级句柄；后者只是一个方法的持有者。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T12:10:35.467

`Thread t = new Thread(obj);`采取`Runnable obj`- 推荐的方式。

`MyThread obj = new MyThread();`要求你现在`extend` `Thread`被**认为是不可取**的。

有关辩论的详细信息，请参阅[“实现可运行”与“扩展线程” 。](https://stackoverflow.com/q/541487/823393)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T12:11:28.753

这似乎充其量是令人困惑的。

我宁愿实现[Runnable](http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html)接口，然后该对象不仅可以用于`Thread`构造函数，还可以用于线程池、执行器等，这些线程池、执行器等使用`Runnable`对象以在以后提交给线程。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T12:09:17.320

您的对象已经扩展了 Thread，因此无需将其包装在新的 Thread 对象中。如果您要实现 Runnable，则第一种方法是正确的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-21T12:10:07.640

`new Thread(obj)`代表. `Thread.run`_ `obj`这仅用`obj`作 a`Runnable`而不是用作 a `Thread`。

```
MyRunnable obj = new MyRunnable();
Thread t = new Thread(obj);
t.start(); 
```

由于（在您的代码中）您正在实例化两个线程（一个已启动，一个从未启动，因此您为创建额外的线程支付了一些成本）。除此之外，带有 runnable 的表单会带来更好的设计，因为您扩展`Thread`的唯一目的不是覆盖`run`.

如果您使用 实现了您的逻辑`Runnable`，您将能够使用[`ThreadFactory`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadFactory.html#newThread%28java.lang.Runnable%29)，并且您将不再受制于`Thread`（在某些情况下很方便）的默认实现。

# php - 来自映射的其他关联的订单关联 - Doctrine2

> ID：15547083
> 
> 赞同：1
> 
> 时间：2013-03-21T12:07:19.270
> 
> 标签：php, symfony, orm, doctrine-orm

这适用**于订购多对关联**

```
/** @Entity **/
class User
{
    // ...

    /**
     * @ORM\ManyToMany(targetEntity="Group")
     * @ORM\OrderBy({"name" = "ASC"})
     **/
    private $groups;
} 
```

但是，如果在我的**Group** Entity 中我有一个`To-One association`（因此是 a `foreign_key field`），我不能按 foreign_key 字段排序：

```
/** @Entity **/
class Group
{
    // ...

    /**
     * @ORM\ManyToOne(targetEntity="Auxiliar", inversedBy="groups", fetch="EAGER")
     * @ORM\JoinColumn(name="auxiliar_id", referencedColumnName="id")
     **/
    private $auxiliar;
} 
```

为什么我不能按顺序排列组`auxiliar_id`？这不起作用（`500: unrecognized field`）：

```
/** @Entity **/
class User
{
    // ...

    /**
     * @ORM\ManyToMany(targetEntity="Group")
     * @ORM\OrderBy({"auxiliar_id" = "ASC"})
     **/
    private $groups;
} 
```

**编辑：**

也试过：`auxiliar`,,,,`groups.auxiliar``groups.auxiliar_id``auxiliar.id`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:19:05.663

您可以`auxiliar_id`在实体内部添加字段`Group`，水合后将由学说填充。

# mongodb - mongodb 中的查询/map-reduce

> ID：15547085
> 
> 赞同：0
> 
> 时间：2013-03-21T12:07:30.317
> 
> 标签：mongodb, mongodb-query

我们正在玩 mongodb，但在查询时遇到了一些麻烦。

我们制作了一个 powershell 脚本，它从我们的服务器获取驱动器信息并将其保存在 mongodb 中。

我们的型号：

```
{
  "_id" : ObjectId("514332334a62a9209c22c866"),
  "FreeSpace" : NumberLong("9439911936"),
  "Name" : "C",
  "TotalSize" : NumberLong("128033222656"),
  "Server" : "pcws24",
  "Tidspunkt" : ISODate("2013-03-15T14:37:39.457Z")
} 
```

编辑：我已将数据模型更改为此。它应该简化查询。

```
{
  "_id" : ObjectId("514c2ee94a62a914e0bbe954"),
  "Server" : "pcws24",
  "Tidspunkt" : ISODate("2013-03-22T10:14:01.4Z"),
  "Drev" : [{
      "DriveLetter" : "C",
      "VolumeLabel" : "",
      "FreeSpace" : NumberLong("6715068416"),
      "TotalSize" : NumberLong("128033222656")
    }, {
      "DriveLetter" : "D",
      "VolumeLabel" : "Data",
      "FreeSpace" : NumberLong("80200286208"),
      "TotalSize" : NumberLong("159891058688")
    }]
} 
```

我们有以下用例场景。

*   获取每台服务器上每个驱动器的最新状态。
*   获取每台服务器上每个驱动器过去 24 小时的状态。
*   获取每台服务器上每个驱动器的上周状态。等等

该模型是从 Get-Drive cmdlet 创建的。

我们如何做到这一点？可以通过查询完成还是我们应该使用 map/reduce？

# c - C strtok，按回车输入

> ID：15547089
> 
> 赞同：0
> 
> 时间：2013-03-21T12:07:47.310
> 
> 标签：c, char, strtok

我想读取数据：示例文本 opp 我看到了：示例（输入）文本（输入） opp（输入）

但是，我的代码不能正常工作。

```
#include <stdio.h>
#include <stdlib.h>
int main(){
    char separator[] = " ";
    char *schowek;
    char *wejscie;

    gets(&wejscie);
    schowek = strtok(&wejscie,separator);

    while( schowek != NULL )
    {
        printf( "%s\n", schowek );
        schowek = strtok( NULL, separator );
    }

    return 0;
} 
```

* * *

好的，我有这个代码。

```
#include <stdio.h>
#include <stdlib.h>

int main()
{

    char * slowo[] = {"zero", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine", "ten",
"eleven", "twelve", "thirteen", "fourteen", "fifteen", "sixteen", "seventeen", "eighteen", "nineteen",
"twenty", "thirty", "forty", "fifty", "sixty", "seventy", "eighty", "ninety", "hundred",
"thousand", "million"};
    int liczba[] = {0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,30,40,50,60,70,80,90,100,1000,1000000};

    char n[]="";
    int i=0;

    char s1[]="zero";

    char separator[] = " ";

    char wejscie[1024];
    if (fgets(wejscie, 1024, stdin))
    {
        char* schowek = strtok(wejscie,separator); /* Removed '&'. */

        if(strcmp(wejscie,n)==0)
        {
            exit;
        }

        while (schowek)
        {
            printf("%s\n", schowek);
            schowek = strtok(NULL, separator);
        }
    }
    return 0;
} 
```

他一切都好吗？现在我想将字符串转换为数字。

样本输入

六负七百二十九一百万一百一

样本输出

6 -729 1000101

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:14:22.230

`wejscie`是一个未初始化的指针，`gets()`正在写入不应该写入的内存，可能会导致分段错误。请注意，`gets()`它容易受到缓冲区溢出的影响，因为它没有提供限制读取字符数的工具（请参阅[警告：gets 函数是危险的](https://stackoverflow.com/questions/2843073/warninggets-function-is-dangerous)）。改用[`fgets()`](http://en.cppreference.com/w/c/io/fgets)a `char[]`：

```
char wejscie[1024];
if (fgets(wejscie, 1024, stdin))
{
    char* schowek = strtok(wejscie,separator); /* Removed '&'. */
    while (schowek)
    {
        printf("%s\n", schowek);
        schowek = strtok(NULL, separator);
    }
} 
```

虽然与该程序无关，但请注意这[`strtok()`](http://en.cppreference.com/w/c/string/byte/strtok)不是线程安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:13:28.527

您没有分配缓冲区来保存读取的数据。

```
 char *wejscie; 
```

分配一个指针来保存缓冲区的地址，而不是实际的缓冲区。

```
 gets(&wejscie); 
```

读入那个指针，而不是一个足够大的缓冲区。

这是这样做的方法（在堆栈上分配缓冲区）：

```
 char buffer[1024];
 fgets(buffer, sizeof(buffer), stdin); 
```

如果您希望使用指针和动态内存，那么可以这样做：

```
 char * wejscie = malloc(1024);
 fgets(wejscie, 1024, stdin); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:16:17.673

你没有内存来存储数据。快速示例：

```
char wejscie[256];
gets(wejscie); 
```

现在`wejscie`指向有效的内存块。

# scala - 尝试连接到远程参与者时出现 Akka BindException：地址已在使用中

> ID：15547090
> 
> 赞同：3
> 
> 时间：2013-03-21T12:07:52.473
> 
> 标签：scala, akka, actor

我正在尝试使用 Akka 远程演员，试图通过网络建立一个简单的 2 人游戏。[这个](https://stackoverflow.com/a/15534924/589352)对先前问题的回答给了我一个很好的起点，但现在我很难理解如何适应我的情况。ISTM 原件从同一个客户端连接两次（见下面的评论部分）。我想要做的是从不同的客户端运行它两次，但是当我这样做时，我得到一个 BindException，地址已经在使用中。我想那是因为每次我运行代码时它都会尝试启动服务器？我需要一种情况，我可以独立于客户端连接和断开来启动和停止主参与者。（最小的）Akka 配置和异常在代码之后：

```
import akka.actor._
//example from answer to https://stackoverflow.com/questions/15527193/keeping-references-to-two-actors
// by Patrick Nordwall
case object JoinMsg
case class Msg(s: String)

class Server extends Actor {

  def receive = {
    case JoinMsg =>
      println("got player 1")
      sender ! Msg("Waiting for player 2")
      context.become(waitingForPlayer2(sender))
  }

  def waitingForPlayer2(client1: ActorRef): Actor.Receive = {
    case JoinMsg =>
      println("got player 2")
      sender ! Msg("hi")
      client1 ! Msg("hi")
      context.become(ready(client1, sender))
  }

  def ready(client1: ActorRef, client2: ActorRef): Actor.Receive = {
    case m: Msg if sender == client1 => client2 ! m
    case m: Msg if sender == client2 => client1 ! m
  }
}

/* I want to run this once for each "player" */
object Demo extends App {
  val system = ActorSystem("Game")
  val server = system.actorOf(Props[Server], "server")

  system.actorOf(Props(new Actor {
    server ! JoinMsg
    def receive = {
      case Msg(s) => println(s)
    }
  }))

  /* Rather than connecting twice from the same node, I want to run this
     program twice from different nodes 
    system.actorOf(Props(new Actor {
    server ! JoinMsg
    def receive = {
      case Msg(s) => println(s)
    }
  }))*/
} 
```

配置：

```
akka {
  actor {
    provider = "akka.remote.RemoteActorRefProvider"
  }
  remote {
    transport = "akka.remote.netty.NettyRemoteTransport"
    netty {
      hostname = "localhost"
      port = 9000
    }
 }
} 
```

例外：

```
Exception in thread "main" java.lang.ExceptionInInitializerError
    at akkademo.main(akkademo.scala)
Caused by: org.jboss.netty.channel.ChannelException: Failed to bind to: localhost/127.0.0.1:9000
    at org.jboss.netty.bootstrap.ServerBootstrap.bind(ServerBootstrap.java:298)
    at akka.remote.netty.NettyRemoteServer.start(Server.scala:54)
    at akka.remote.netty.NettyRemoteTransport.start(NettyRemoteSupport.scala:90)
    at akka.remote.RemoteActorRefProvider.init(RemoteActorRefProvider.scala:94)
    at akka.actor.ActorSystemImpl._start(ActorSystem.scala:588)
    at akka.actor.ActorSystemImpl.start(ActorSystem.scala:595)
    at akka.actor.ActorSystem$.apply(ActorSystem.scala:111)
    at akka.actor.ActorSystem$.apply(ActorSystem.scala:93)
    at akkademo$.<init>(akkademo.scala:4)
    at akkademo$.<clinit>(akkademo.scala)
    ... 1 more
Caused by: java.net.BindException: Address already in use 
```

TIA。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T13:19:55.903

在同一台机器上运行多个实例时，您需要为它们配置不同的端口。在此示例中，只有服务器需要知道端口 (9000)。对于客户端，您可以使用 0 作为随机可用端口。

为客户端定义另一个配置文件。`client.conf`：

```
akka {
  actor {
    provider = "akka.remote.RemoteActorRefProvider"
  }
  remote {
    transport = "akka.remote.netty.NettyRemoteTransport"
    netty {
      hostname = "localhost"
      port = 0
    }
 }
} 
```

`ActorSystem`使用此配置在客户端中启动：

```
import com.typesafe.config.ConfigFactory
val system = ActorSystem("Game", ConfigFactory.load("client")) 
```

在客户端中，您将使用以下命令查找服务器：

```
val server = system.actorFor("akka://Game@localhost:9000/user/server") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T07:16:16.367

您要么需要单独指定客户端配置的端口，要么将服务器端配置的端口从 2552 更改为其他端口。2552 是 akka actor 系统的默认端口，当您在客户端创建一个 actor 系统进行查找（在同一台机器上）时，如果未明确指定，它也会尝试绑定到端口 2552，因此您会收到此错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-04T18:14:08.890

另一种更简单的方法可能是关闭所有终端窗口并打开新窗口。即使在停止所有节点后也面临同样的问题，但会在同一个终端中运行而不是打开新的终端

# ios - 如何在 Cocos2D 中使用 Point sprite

> ID：15547093
> 
> 赞同：0
> 
> 时间：2013-03-21T12:07:59.850
> 
> 标签：ios, cocoa, cocos2d-iphone, opengl-es-2.0

我想用纹理在 cocos2D 中绘制 Point Sprite。

那么如何将点大小传递给program_和vertexShader？我发现属性只有3种，如何使用新属性？

# 定义 kCCAttributeNameColor @"a_color"

# 定义 kCCAttributeNamePosition @"a_position"

# 定义 kCCAttributeNameTexCoord @"a_texCoord"

非常感谢！

# java - 注销时记住的 Primefaces TabMenu 活动选项卡

> ID：15547108
> 
> 赞同：-1
> 
> 时间：2013-03-21T12:08:47.440
> 
> 标签：java, jsf, primefaces

正如标题本身所解释的那样，我在管理选项卡菜单中当前活动的选项卡时遇到了问题。我正在使用带 PF 3.4 的 JSF 2.1。这是带有选项卡菜单的代码片段：

```
<h:form>
    <p:tabMenu activeIndex="#{navigationMB.activeIndex}"  >
        <p:menuitem value="Početna" action="#{navigationMB.navigateStudent('home')}" icon="ui-icon-home" />
        <p:menuitem value="Konsultacije" action="#{navigationMB.navigateStudent('konsultacije')}"  icon="ui-icon-search" />
        <p:menuitem value="Zakazivanje" action="#{navigationMB.navigateStudent('zakazivanje')}"  icon="ui-icon-document"/>
        <p:menuitem value="Profesori" action="#{navigationMB.navigateStudent('profesori')}"/>
        <p:menuitem value="Moj profil" action="#{navigationMB.navigateStudent('profil')}"  icon="ui-icon-person" />
    </p:tabMenu>
</h:form> 
```

这是用于导航该选项卡菜单的唯一目的的支持 bean 的代码：

```
@Named(value = "navigationMB")
@RequestScoped
public class NavigationMB {

private int activeIndex = 0;
public NavigationMB() {

}

public String navigateStudent(String page) {

    System.out.println("go to page " + page);

    if ("home".equals(page)) {
        activeIndex = 0;
        return "/student/home?faces-redirect=true";
    }
    if ("konsultacije".equals(page)) {
        activeIndex = 1;
        return "/student/allConsults?faces-redirect=true";
    }
    if ("zakazivanje".equals(page)) {
        activeIndex = 2;
        return "/student/newConsult?faces-redirect=true";
    }
    if ("profesori".equals(page)) {
        activeIndex = 3;
        return "/student/allProfessors?faces-redirect=true";
    }
    if ("profil".equals(page)) {
        activeIndex = 4;
        return "/student/profile?faces-redirect=true";
    }

    return "";
} 
```

这在浏览时运行良好，但是当我注销（使会话无效）并稍后返回相同或不同的用户时，会记住 activeIndex。我不明白这里的东西吗？我想每次有导航操作时都会创建请求范围的 bean，即使用户没有在任何地方导航，我设置为 0 的整数总是指向“家”，但事实并非如此。任何帮助都是极好的。

编辑：

似乎即使没有注销，当两个用户（浏览器中的两个选项卡）四处导航时，如果用户 1 单击例如选项卡菜单项 2，并且用户 2 刷新他的页面，用户 2 将看到选项卡菜单项 2 被选中也一样，反之亦然。

edit2：我在之前的编辑中犯了一个错误，请忘记上面的这一点（我没有注意到用户 2 侧的刷新实际上加载了用户 1 的视图）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:36:22.320

正如在问题的评论中所讨论的，该 bean 不被识别为请求范围。它是在应用程序启动期间创建的，并在应用程序运行期间一直存在。

由于使用了 Spring，使用 Spring 注释将解决此问题：

```
@Scope("request")
public class NavigationMB {
} 
```

对于请求范围的 bean，或者：

```
@Scope("session")
public class NavigationMB {
} 
```

使其会话范围。

# windows-8 - Windows 8 联系人

> ID：15547116
> 
> 赞同：-1
> 
> 时间：2013-03-21T12:09:10.770
> 
> 标签：windows-8

在 Windows 8`ContactPicker.PickMultipleContactsAsync` 中`ContactInformation.CustomFields`，`ContactInformation.InstantMessages`尽管联系人已填写所有详细信息，但计数为零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:12:25.917

尝试从 CodeSamples 运行应用程序并检查是否正确获取值：

[http://code.msdn.microsoft.com/windowsapps/Contact-Picker-App-sample-fc6677a1](http://code.msdn.microsoft.com/windowsapps/Contact-Picker-App-sample-fc6677a1)

# iphone - Nextpeer 与 npGetiOSVersion 的集成错误

> ID：15547118
> 
> 赞同：0
> 
> 时间：2013-03-21T12:09:12.237
> 
> 标签：iphone, ios, cocos2d-iphone, integration, nextpeer

我听说了 Nextpeer SDK 并开始集成到我当前的应用程序中。但是，它给了我一个错误。我无法解决错误。

错误指出：

```
-[UIDevice npGetiOSVersion]: unrecognized selector sent to instance 0x9e62370
 ***Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIDevice npGetiOSVersion]: unrecognized selector sent to instance 0x9e62370' 
```

# android - Alertdialog 不起作用，它在 Android 中出现异常

> ID：15547124
> 
> 赞同：1
> 
> 时间：2013-03-21T12:09:21.733
> 
> 标签：android, runtime, android-alertdialog

我尝试执行以下代码，但它会产生问题。没有它，代码可以正常工作。我希望弹出一个对话框并要求用户在 Wifi 关闭时启用它。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.welcome);
    Thread timer = new Thread(){
        public void run(){
            try{
                sleep(2000);                    
            }catch(InterruptedException e){
                e.printStackTrace();
            }
            finally{                    
                showAlert();                    
            }
        }
    };
    timer.start();
}

}

public void showAlert() {

    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);

    // set title
    alertDialogBuilder.setTitle("Your Title");

    // set dialog message
    alertDialogBuilder
            .setMessage("Click yes to exit!")
            .setCancelable(false)
            .setPositiveButton("Yes",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            // if this button is clicked, close
                            // current activity
                            Welcome.this.finish();
                        }
                    })
            .setNegativeButton("No", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    // if this button is clicked, just close
                    // the dialog box and do nothing
                    dialog.cancel();
                }
            });

    // create alert dialog
    AlertDialog alertDialog = alertDialogBuilder.create();

        // show it
        alertDialog.show();
} 
```

这是日志历史记录，注释行中的 ProgressDialog 代码也会引发相同的错误！：

```
11:46:57.306: E/AndroidRuntime(2140): FATAL EXCEPTION: Thread-141 
11:46:57.306: E/AndroidRuntime(2140): java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
11:46:57.306: E/AndroidRuntime(2140):   at android.os.Handler.<init>(Handler.java:197)
11:46:57.306: E/AndroidRuntime(2140):   at android.os.Handler.<init>(Handler.java:111)
11:46:57.306: E/AndroidRuntime(2140):   at android.app.Dialog.<init>(Dialog.java:107)
11:46:57.306: E/AndroidRuntime(2140):   at android.app.AlertDialog.<init>(AlertDialog.java:114)
11:46:57.306: E/AndroidRuntime(2140):   at android.app.AlertDialog$Builder.create(AlertDialog.java:931)
11:46:57.306: E/AndroidRuntime(2140):   at com.example.core4voipmobiledialer.Welcome.showAlert(Welcome.java:116)
11:46:57.306: E/AndroidRuntime(2140):   at com.example.core4voipmobiledialer.Welcome$1.run(Welcome.java:35) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:11:03.577

用于`runOnUiThread`显示`Toast`或`Alert Dialog`在线程中。

```
runOnUiThread(new Runnable() 
{
  @Override
  public void run() 
  {
     showAlert();          
  }
}); 
```

您从工作线程中调用它。您需要从主线程中调用 Toast.makeText() 或警报对话框。您也可以使用处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:24:07.423

1.  你必须把`Looper.prepare()`里面的`showDialog()`方法
2.  要打开 Wifi 设置启动一个新的 Intent：

`startActivity(new Intent(WifiManager.ACTION_WIFI_SETTINGS));`

（另请参阅有关最后一点的[android 文档）](http://developer.android.com/reference/android/net/wifi/WifiManager.html#ACTION_PICK_WIFI_NETWORK)

# android - 代码中的像素化图像

> ID：15547125
> 
> 赞同：1
> 
> 时间：2013-03-21T12:09:32.327
> 
> 标签：android, image, pixel

我已经搜索了如何通过代码在 android 中对图像进行像素化，结果各不相同。

我在此处找到了有关如何应用其他效果的库和教程：http: [//xjaphx.wordpress.com/learning/tutorials/](http://xjaphx.wordpress.com/learning/tutorials/)

有人可以为我澄清一下吗，在android中动态像素化图像的最简单方法是什么

如果它是一个我可以进行多少轮或我想要图像像素化多少的功能，它也会很方便。

预先感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T12:30:39.507

像素化图像的最简单方法是使用“最近邻”算法缩小图像，然后使用相同的算法放大图像。

过滤图像试图找到一个平均值需要更多的时间，但实际上并没有对结果质量产生任何改进，毕竟你是故意想让你的图像失真的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T12:31:27.690

我以前在 vb.net 中做过这个，它很容易变成一个函数，它的参数可以控制你想要的像素化程度。

基本思想是以X宽和y高的块为单位扫描图像。对于每个块，您找到平均 RGB 值并将所有这些像素设置为该颜色。块尺寸越小，像素化越少。

```
int avR,avB,avG; // store average of rgb 
    int pixel;
    Bitmap bmOut = Bitmap.createBitmap(width, height, src.getConfig());

    for(int x = 0; x < width; x+= pixelationAmount) { // do the whole image
        for(int y = 0; y < height; y++ pixelationamount) {
            avR = 0; avG = 0; avB =0;

            for(int xx =x; xx <pixelationAmount;xx++){// YOU WILL WANT TO PUYT SOME OUT OF                                      BOUNDS CHECKING HERE
                for(int yy= y; yy <pixelationAmount;yy++){ // this is scanning the colors
                    pixel = src.getPixel(x, y);
                    avR += (int) (color.red(pixel);
                    avG+= (int) (color.green(pixel);
                    avB += (int) (color.blue(pixel);
                }
            }
            avrR/= pixelationAmount^2; //divide all by the amount of samples taken to get an average
            avrG/= pixelationAmount^2;
            avrB/= pixelationAmount^2;

            for(int xx =x; xx <pixelationAmount;xx++){// YOU WILL WANT TO PUYT SOME OUT OF BOUNDS CHECKING HERE
                for(int yy= y; yy <pixelationAmount;yy++){ // this is going back over the block 
                    bmOut.setPixel(xx, yy, Color.argb(255, avR, avG,avB)); //sets the block to the average color
                }
            }

        }

    } 
```

对错误的格式感到抱歉（很快在记事本中写了），但认为它可能会给你一个框架来制作你自己的像素化功能

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-12T16:43:24.010

这是对上述有效算法的纠正：

```
 Bitmap bmOut = Bitmap.createBitmap(OriginalBitmap.getWidth(),OriginalBitmap.getHeight(),OriginalBitmap.getConfig());
    int pixelationAmount = 50; //you can change it!!
    int width = OriginalBitmap.getWidth();
    int height = OriginalBitmap.getHeight();
    int avR,avB,avG; // store average of rgb 
    int pixel;

    for(int x = 0; x < width; x+= pixelationAmount) { // do the whole image
        for(int y = 0; y < height; y+= pixelationAmount) {
            avR = 0; avG = 0; avB =0;

            int bx = x + pixelationAmount;
            int by = y + pixelationAmount;
            if(by >= height) by = height;
            if(bx >= width)bx = width;
            for(int xx =x; xx < bx;xx++){// YOU WILL WANT TO PUYT SOME OUT OF                                      BOUNDS CHECKING HERE
                for(int yy= y; yy < by;yy++){ // this is scanning the colors

                    pixel = OriginalBitmap.getPixel(xx, yy);
                    avR += (int) (Color.red(pixel));
                    avG+= (int) (Color.green(pixel));
                    avB += (int) (Color.blue(pixel));
                }
            }
            avR/= pixelationAmount^2; //divide all by the amount of samples taken to get an average
            avG/= pixelationAmount^2;
            avB/= pixelationAmount^2;

            for(int xx =x; xx < bx;xx++)// YOU WILL WANT TO PUYT SOME OUT OF BOUNDS CHECKING HERE
                for(int yy= y; yy <by;yy++){ // this is going back over the block 
                    bmOut.setPixel(xx, yy, Color.argb(255, avR, avG,avB)); //sets the block to the average color
                }

        }

    }
    iv.setImageBitmap(bmOut); 
```

无论如何，这不是我想要的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-12T17:27:39.063

我已经完全改变了以前的算法，它真的做了像马赛克过滤器这样的事情！这个想法是用下面的块像素替换每个块像素，简单地使用这个函数：

```
public void filter(){
    Bitmap bmOut = Bitmap.createBitmap(OriginalBitmap.getWidth(),OriginalBitmap.getHeight(),OriginalBitmap.getConfig());

    int pixelationAmount = 10;
    Bitmap a = Bitmap.createBitmap(pixelationAmount,pixelationAmount,OriginalBitmap.getConfig());
    Bitmap b = Bitmap.createBitmap(pixelationAmount,pixelationAmount,OriginalBitmap.getConfig());
    int width = OriginalBitmap.getWidth();
    int height = OriginalBitmap.getHeight();
    int pixel;
    int counter = 1;
    int px = 0;int py = 0;int pbx=0;int pby=0;
    for(int x = 0; x < width; x+= pixelationAmount) { // do the whole image
        for(int y = 0; y < height; y+= pixelationAmount) {
            int bx = x + pixelationAmount;
            int by = y + pixelationAmount;
            if(by >= height) by = height;
            if(bx >= width)bx = width;
            int xxx = -1;
            int yyy = -1;
            for(int xx =x; xx < bx;xx++){// YOU WILL WANT TO PUYT SOME OUT OF                                      BOUNDS CHECKING HERE
                xxx++;
                yyy = -1;
                for(int yy= y; yy < by;yy++){ // this is scanning the colors
                    yyy++;
                    pixel = OriginalBitmap.getPixel(xx, yy);
                    if(counter == 1)
                    {
                        a.setPixel(xxx, yyy, pixel);
                        px = x;//previous x
                        py = y;//previous y
                        pbx = bx;
                        pby = by;
                    }
                    else
                        b.setPixel(xxx, yyy, pixel);
                }
            }
            counter++;
            if(counter == 3)
            {
                int xxxx = -1;
                int yyyy = -1;
                for(int xx =x; xx < bx;xx++)
                {
                    xxxx++;
                    yyyy = -1;
                    for(int yy= y; yy <by;yy++){ 
                        yyyy++;
                        bmOut.setPixel(xx, yy, b.getPixel(xxxx, yyyy)); 
                    }
                }
                for(int xx =px; xx < pbx;xx++)
                {
                    for(int yy= py; yy <pby;yy++){  
                        bmOut.setPixel(xx, yy, a.getPixel(xxxx, yyyy)); //sets the block to the average color
                    }
                }

                counter = 1;
            }

        }

    }
    image_view.setImageBitmap(bmOut);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-24T19:13:44.900

这是我使用的代码：

ImageFilter 是父类：

```
public abstract class ImageFilter {

protected int [] pixels;
protected int width;
protected int height;

public ImageFilter (int [] _pixels, int _width,int _height){
    setPixels(_pixels,_width,_height);
}

public void setPixels(int [] _pixels, int _width,int _height){
    pixels = _pixels;
    width = _width;
    height = _height;
}

/**
 * a weighted Euclidean distance in RGB space
 * @param c1
 * @param c2
 * @return
 */
public double colorDistance(int c1, int c2)
{
    int red1 = Color.red(c1);
    int red2 = Color.red(c2);
    int rmean = (red1 + red2) >> 1;
    int r = red1 - red2;
    int g = Color.green(c1) - Color.green(c2);
    int b = Color.blue(c1) - Color.blue(c2);
    return Math.sqrt((((512+rmean)*r*r)>>8) + 4*g*g + (((767-rmean)*b*b)>>8));
}

public abstract int[]  procImage(); 
```

}

```
public class PixelateFilter extends ImageFilter {

int pixelSize;
int[] colors;

/**
 * @param _pixels
 * @param _width
 * @param _height
 */
public PixelateFilter(int[] _pixels, int _width, int _height) {
    this(_pixels, _width, _height, 10);
}

public PixelateFilter(int[] _pixels, int _width, int _height, int _pixelSize) {
    this(_pixels, _width, _height, _pixelSize, null);
}

public PixelateFilter(int[] _pixels, int _width, int _height, int _pixelSize, int[] _colors) {
    super(_pixels, _width, _height);
    pixelSize = _pixelSize;
    colors = _colors;
}

/* (non-Javadoc)
 * @see imageProcessing.ImageFilter#procImage()
 */
@Override
public int[] procImage() {
    for (int i = 0; i < width; i += pixelSize) {
        for (int j = 0; j < height; j += pixelSize) {
            int rectColor = getRectColor(i, j);
            fillRectColor(rectColor, i, j);
        }
    }
    return pixels;
}

private int getRectColor(int col, int row) {
    int r = 0, g = 0, b = 0;
    int sum = 0;
    for (int x = col; x < col + pixelSize; x++) {
        for (int y = row; y < row + pixelSize; y++) {
            int index = x + y * width;
            if (index < width * height) {
                int color = pixels[x + y * width];
                r += Color.red(color);
                g += Color.green(color);
                b += Color.blue(color);
            }

        }
    }
    sum = pixelSize * pixelSize;
    int newColor = Color.rgb(r / sum, g / sum, b / sum);
    if (colors != null)
        newColor = getBestMatch(newColor);
    return newColor;
}

private int getBestMatch(int color) {
    double diff = Double.MAX_VALUE;
    int res = color;
    for (int c : colors) {
        double currDiff = colorDistance(color, c);
        if (currDiff < diff) {
            diff = currDiff;
            res = c;
        }
    }
    return res;
}

private void fillRectColor(int color, int col, int row) {
    for (int x = col; x < col + pixelSize; x++) {
        for (int y = row; y < row + pixelSize; y++) {
            int index = x + y * width;
            if (x < width && y < height && index < width * height) {
                pixels[x + y * width] = color;
            }

        }
    }
}

public static final Bitmap changeToPixelate(Bitmap bitmap, int pixelSize, int [] colors) {
    int width = bitmap.getWidth();
    int height = bitmap.getHeight();

    int[] pixels = new int[width * height];
    bitmap.getPixels(pixels, 0, width, 0, 0, width, height);

    PixelateFilter pixelateFilter = new PixelateFilter(pixels, width, height, pixelSize, colors);

    int[] returnPixels = pixelateFilter.procImage();
    Bitmap returnBitmap = Bitmap.createBitmap(returnPixels, width, height, Bitmap.Config.ARGB_8888);

    return returnBitmap;

} 
```

}

以下是你如何使用它：

```
 int [] colors = new int [] { Color.BLACK,Color.WHITE,Color.BLUE,Color.CYAN,Color.RED};
    final Bitmap bmOut  = PixelateFilter.changeToPixelate(OriginalBitmap, pixelSize,colors); 
```

# c# - 使文本字段可见但不可编辑

> ID：15547127
> 
> 赞同：1
> 
> 时间：2013-03-21T12:09:36.770
> 
> 标签：c#, html

我正在使用下面的代码来允许用户添加查看用户名，因为此名称由活动目录给出我希望他们看到添加了名称但无法编辑数据的任何想法我将如何能够达到这个

```
@Html.EditorFor(model => model.UserName) 
```

我还尝试了以下两种方法，这两种方法都不适用于@ anslo 和声明为 true

```
@Html.EditorFor(model => model.UserName, new { @disabled ="disabled"})
@Html.EditorFor(model => model.UserName, new { @readonly = "readonly" }) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T12:13:08.533

去[@Html。**`TextBoxFor`**](https://msdn.microsoft.com/en-us/library/system.web.mvc.html.inputextensions.textboxfor(v=vs.118).aspx)您可以传递重载的扩展名：

```
@Html.TextBoxFor(model => model.UserName, new { @readonly = true }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:15:52.403

在 ASP.NET MVC 3`EditorFor`中没有重载来传递额外的参数，但你可以使用`TextBoxFor`：

```
@Html.TextBoxFor(model => model.UserName, new { disabled = "disabled", @readonly = "readonly" }) 
```

在 ASP.NET MVC 4 中，您可以将参数直接传递给`EditorFor`：

```
@Html.EditorFor(model => model.UserName, new { disabled = "disabled", @readonly = "readonly" }) 
```

# oracle - Oracle 10g 从表中的一组行中检索特定行的行号

> ID：15547132
> 
> 赞同：2
> 
> 时间：2013-03-21T12:09:45.057
> 
> 标签：oracle, oracle10g, rownum

我有一个`USER_ROLES`在 Oracle 10g 中命名的表，如下所示。

```
USER_ROLE_ID        USER_ID    AUTHORITY

28                  2          ROLE_ADMIN
45                  3          ROLE_USER
61                  3          ROLE_ASSISTANT
27                  3          ROLE_SUPERVISOR 
```

`USER_ID`表的外键在哪里`USER_TABLE`。我需要从与特定用户（）关联的一组行中知道特定行的行号`USER_ID`（而不是基于此表中的所有行）。

* * *

以下 SQL`USER_ROLE_ID`基于此表中的**所有行检索给定的行号（在本例中为 28）。**

```
select row_num from 
(select row_number() over (order by user_role_id desc) as row_num, user_role_id 
from user_roles order by user_role_id desc)
where user_role_id=28 
```

在这种情况下，它显示 3。

* * *

但我需要从仅与特定用户关联的一组行中检索行号。为此，如果我尝试以下 SQL，

```
select row_num from 
(select row_number() over (order by user_role_id desc) as row_num, user_role_id 
from user_roles order by user_role_id desc)
where user_id=2 and user_role_id=28 
```

在这种情况下，我修改了`WHERE`从

```
where user_role_id=28 
```

至

```
where user_id=2 and user_role_id=28 
```

它给出了以下错误。

```
ORA-00904: "USER_ID": invalid identifier 
```

那么，在这种情况下，仅从与特定用户关联的那些行中获取行号的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:19:38.207

只需将 user_id 添加到内部查询。`user_id`如果您希望 row_num 是 per （如果不忽略该位），我认为您还想对该分析进行分区：

```
select row_num 
  from  (select row_number() over (partition by user_id 
                                   order by user_role_id desc) as row_num, 
                user_role_id, user_id
           from user_roles)
where user_role_id=28 and user_id = 2; 
```

# c# - asp.net 图片网址

> ID：15547135
> 
> 赞同：-2
> 
> 时间：2013-03-21T12:09:53.403
> 
> 标签：c#, asp.net, save-image

我的网页正在将图像上传到服务器文件夹，`'d:\upresim'` 我使用该代码添加图像：

```
protected void Button2_Click(object sender, EventArgs e)
{
    FileUpload1.SaveAs(Server.MapPath("~/image/a.png"));
    Image1.ImageUrl = "~/image/a.png";
} 
```

我有一个选定的图像，我从中收到`FileUpload`我从选定的图像添加到服务器`upresim`到文件夹中的图像。后记我需要在 Image1 上显示添加的图像，但它什么也没显示我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:15:45.193

您必须在 Web 应用程序文件夹下上传图像，因为该文件夹您的应用程序必须具有写入文件系统的权限，然后将相对 url 设置为图像控件 ImageUrl。您还应该检查上传是否有文件，最好使用上传文件中的文件名。

例如，假设您的网站根文件夹中有文件夹 upresim，然后使用以下代码：

```
 if (FileUpload1.HasFile)
  {
    FileUpload1.SaveAs(Server.MapPath("/upresim/") + FileUpload1.FileName);
    Image1.ImageUrl = "/upresim/" + FileUpload1.FileName;
  } 
```

# c# - 如何将通用 MATLAB 矩阵导出到文本文件，格式类似于 C# 数组

> ID：15547138
> 
> 赞同：0
> 
> 时间：2013-03-21T12:10:01.480
> 
> 标签：c#, matlab, export

我在 MATLAB 中有一个矩阵，如下所示：

```
[ 1 2 3 4; 5 6 7 8; 9 10 11 12] 
```

我想将其导出为 C# 格式的文本文件：

```
double[,] myMat = { {1,2,3,4}, {5,6,7,8}, {9,10,11,12} }; 
```

我需要一个名为 example 的 MATLAB 函数，`exportMatrix()`它有两个参数：

*   MATLAB 矩阵
*   必须导出此矩阵的tipo

以下是如何使用此功能的两个示例：

```
exportMatrix( myMatrix1, 'short');
exportMatrix( myMatrix2, 'float'); 
```

我还需要如果矩阵是多维的，该函数应该正确导出它。例如，如果：

```
>> size(A)

ans =

        100        10           3 
```

那么调用的结果 `exportMatrix( A, 'double');`应该是：

```
double[, ,] A = {...}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:02:19.650

这是一个有趣的问题:) 这是一个起点：

```
function exportMatrix(A)
% get dimensions 
dimensions  = size(A);
N_dim       = length(dimensions);

% print variable declaration to console
fprintf('double[')
for i = 1:N_dim-1
    fprintf(',')
end
% finish declaration and print rows of matrix
fprintf('] A= {%s}\n', exportRow(A, dimensions))

function str_out = exportRow(B, dims)
% recursively print matrix

% init output string
str_out = '';

% have we finished yet?
if length(dims) > 1
    % if not, then go to next layer
    for i=1:dims(1)
        % this test is just to make sure that we do not reshape a
        % one-dimensional array
        if length(dims) > 2
            % print next slice inside curly-braces
            str_out = sprintf('%s{ %s },', str_out, exportRow(reshape(B(i,:), dims(2:end)), dims(2:end)) );
        elseif length(dims) == 2
            % we are almost at the end, so do not use reshape, but stil
            % print in curly braces
            str_out = sprintf('%s{ %s },', str_out, exportRow(B(i,:), dims(2:end)) );
        end
    end
else
    % we have found one of the final layers, so print numbers
    str_out = sprintf('%f, ', B);
    % strip last space and comma
    str_out = str_out(1:end-2);
end
% strip final comma and return
str_out = sprintf('%s', str_out(1:end-1)); 
```

仅适用于二维数组及以上。尝试例如。

```
exportMatrix(rand(2,2,2)) 
```

如果要打印到文件，则需要更改 fprintf 语句...

# sql - SQL Union All 太慢了

> ID：15547139
> 
> 赞同：2
> 
> 时间：2013-03-21T12:10:02.253
> 
> 标签：sql, sql-server, performance, union

我正在重写一个旧的遗留系统。它有一个名为`checkExisting()`. 旧系统使用查询从 MSSQL 数据库中提取对象，如下所示（使用 ADO DB）：

```
SELECT ObjectId, Name..... 
FROM tblRegisteredIncludes   
WHERE UPPER("Name") IN ('PROGA.H', 'PROGB.H'...............  list) 
```

有很多类似的表，`tblRegisteredIncludes`但是 SQL 是按表名分组的，并且使用带有对象名称列表的 IN 子句。

这执行得很快，因为 SQL Server 在一次扫描中收集了所有对象，并且`Name`在表中的列上有一个索引。

但是，在新系统中，我不能使用相同的 SQL，因为`WHERE`条件更复杂。它还使用 Source 字段，有时还使用条件中的其他字段。我有大量的单个 SQL 查询：

```
SELECT ObjectId, Name..... FROM tblRegisteredIncludes   
WHERE UPPER("Name") = 'PROGA.H' AND UPPER("Source") = "..."

SELECT ObjectId, Name..... FROM tblRegisteredIncludes   
WHERE UPPER("Name") = ('PROGB.H') AND UPPER("Source") = "..." 
```

我已将`tblRegisteredIncludes`表中的 Name-Index 替换为`(Name,Source)`.

即使如此，我也预计 SQL 的总执行速度会慢一些，但不会超过 15-20%。相反，它要慢得多，有时甚至高达 100%。我尝试使用 UNION ALL 将 SQL 组合在一个大型 SQL 查询中：

```
SELECT ObjectId, Name..... FROM tblRegisteredIncludes   
WHERE UPPER("Name") = 'PROGA.H' AND UPPER("Source") = "..."
UNION ALL
SELECT ObjectId, Name..... FROM tblRegisteredIncludes   
WHERE UPPER("Name") = ('PROGB.H') AND UPPER("Source") = "..." 
```

然后稍后处理生成的 ADO DB 记录集，但速度更慢！

我需要知道是否有一些有效的方法可以更快地执行这些查询？在使用 IN 子句和名称列表时，我需要达到与旧案例类似的性能。我可以提供执行计划。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:10:19.080

在该`union all`版本中，每个子查询都会导致对表的单独扫描。

您应该使用`or`条件引入所有行：

```
SELECT ObjectId, Name.....
FROM tblRegisteredIncludes   
WHERE (UPPER("Name") = 'PROGA.H' AND UPPER("Source") = "...") or
      (UPPER("Name") = ('PROGB.H') AND UPPER("Source") = "...") or
      . . . 
```

如果您遇到所有比较都打开`Name`和的情况`Source`，我建议您使用 CTE 创建一个动态表：

```
with toinclude as (
   select 'PROGA.H' as name, 'SOURCE' as source union all
   select . . .
)
select ri.ObjectId, ri.Name
from tblRegisteredIncludes join
     toinclude
     on ri.name = toinclude.name and ri.source = toinclude.source 
```

您可以省略`toupper()`除非您​​特别担心您的实现或字段已覆盖默认的不区分大小写行为。在子句中使用函数`where`通常会阻止使用索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:48:37.423

根据您的描述，我假设该表具有大量行，在这种情况下，几乎可以肯定是 UPPER 导致了速度问题，因为这意味着它无法正确使用您似乎已正确设置的索引。存储的数据真的区分大小写吗？- 检查 db 设置，默认情况下通常不会，在这种情况下您可以删除 UPPER。

如果它是区分大小写的，那么如果存储名称的大小写是一致的，您仍然可以删除大写并只使用一致的大写/小写名称，例如 Name = 'ProgB.H'

# mysql - 我想在 my-sql 中使用 while 循环

> ID：15547141
> 
> 赞同：-3
> 
> 时间：2013-03-21T12:10:06.813
> 
> 标签：mysql, sql-server, loops, while-loop

我已经在 SQL Server 中使用了下面的代码，它工作正常，我试图在 mysql 中使用相同的代码，但我收到了错误消息

> 1064-您的 sql 系统有错误；检查与您的 mysql 服务器版本相对应的手册以获取正确的 systax 以使用 Near'Declare @var Table (quantity int, width varchar(255) ) 在第 1 行插入 @var Select

```
Declare @var Table 
    ( quantity int, width varchar(255) )
Insert @var
SELECT DISTINCT
    vtiger_inventoryproductrel.quantity, vtiger_inventoryproductrel.width
From
    vtiger_inventoryproductrel

Declare @var1 Table 
    ( quantity int, width varchar(255) )

Declare @Order_Item_Id varchar(10),@Qty int 
Set @Order_Item_Id = ''
While @Order_Item_Id < (Select Max(id) From @var)

Begin 
    Select @Order_Item_Id= Min(id) from @var where id > @Order_Item_Id
    Select @Qty = quantity From @var Where id = @Order_Item_Id
    While @Qty>0
    Begin 
        Set @Qty = @Qty-1 
        Insert into @var1 select * From @var Where id = @Order_Item_Id
    End 
End 

Select * From @var1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:42:58.533

**MySQL 不是 Microsoft SQL Server。**

它们有非常不同的存储过程语言。在许多方面，与 Microsoft 相比，MySQL 的存储过程语言是有限的并且功能较少。大多数 MySQL 用户根本不编写存储过程，更喜欢用 PHP、Ruby、Python、Java、C# 或其他喜欢的语言在应用层编写业务逻辑。

以下是与您的示例过程相关的几点：

*   MySQL 没有`Table`类型。您不能将变量声明为表。

*   用于[`SET`](http://dev.mysql.com/doc/refman/5.5/en/set-statement.html)为语句中的变量赋值，而不是`INSERT`.

*   用于[`SELECT...INTO`](http://dev.mysql.com/doc/refman/5.5/en/select-into.html)将查询结果分配给变量。

*   存储过程中的每个语句都需要一个分号 ( `;`) 终止符。

*   你不能`SELECT ... FROM @var`。不支持将变量作为表名。您可以通过将@var 连接成一个字符串，然后将该字符串用作[准备好的语句](http://dev.mysql.com/doc/refman/5.5/en/sql-syntax-prepared-statements.html)来做到这一点。

这不是一个完整的列表，您需要更改才能使此过程在 MySQL 中工作，它只是差异的一个示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:34:52.717

在mysql中创建一个临时表

```
create temporary table var( quantity int, width varchar(255) );
create temporary table var1(quantity int, width varchar(255)); 
```

向临时表插入数据

```
insert into var(quantity, width )
SELECT DISTINCT vtiger_inventoryproductrel.quantity, vtiger_inventoryproductrel.width From vtiger_inventoryproductrel 
```

不使用从mysql表读取数据，而使用游标。 [Mysql 游标使用](http://dev.mysql.com/doc/refman/5.0/en/cursors.html)

var 中的临时表也没有包含列 id

# java - 为 Swing 组件设置自定义属性 (JEditorPane)

> ID：15547149
> 
> 赞同：2
> 
> 时间：2013-03-21T12:10:32.077
> 
> 标签：java, swing

我正在使用 Java Swing 在 Twitter 提要应用程序中工作。

我是否可以为 JEditorPane 设置自定义属性，如下所示

```
JEditorPane jep = new JEditorPane();
jep.tweetID = "222";
jep.tweetText = "Good Day..."; 
```

这样我就可以直接在与此 JEditorPane 关联的事件中获取这些属性，如下所示

```
 public void mouseReleased(MouseEvent e) 
        {
                   String currentTweetID = e.getSource().tweetID;
         } 
```

如果可能，请提出解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:50:50.373

每个构建 Swing 组件的 AWT 组件都有一个`setName`方法和一个`getName`方法。您可以使用任何字符串命名您的组件，例如您的`tweetID`. 如果您需要其他标识字符串，可以将它们连接在一起并使用`setName`方法将它们传递给您的操作方法。

您可以`JEditorPane`使用该`getText`方法获取您的文本。

# android - String[] 在查询方法中做了什么？

> ID：15547150
> 
> 赞同：1
> 
> 时间：2013-03-21T12:10:34.323
> 
> 标签：android

我试图找到答案，但官方文档中甚至没有记录。

课堂上`Cursor`有许多不同版本的`query()`. 其中一个参数是`String[] projection`，但我似乎无法弄清楚这对方法有什么作用。

我见过不同的例子，人们使用类似的东西

`String[] projections = { MediaStore.Images.Media._ID };`

但我不知道这会做什么。从来没有解释过。

有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:20:18.783

投影是要返回的列。

# javascript - 使用“on change”回调从 jQuery 插件更新 AngularJS 模型

> ID：15547152
> 
> 赞同：8
> 
> 时间：2013-03-21T12:10:43.843
> 
> 标签：javascript, jquery, dom, angularjs, on-screen-keyboard

我正在为需要屏幕键盘的触摸屏计算机构建一个 Web 应用程序，并尝试使用这个出色的（或者至少是我能找到的唯一一个不可怕的）键盘。 [https://github.com/Mottie/Keyboard/](https://github.com/Mottie/Keyboard/)

问题是，正如您可能已经猜到的那样，使用屏幕键盘时模型没有得到更新。这是我的代码，它可以工作，但有点难看：

部分 HTML：

```
<input type="text" class="keyboard" ng-model="newUser.name">
<input type="text" class="keyboard" ng-model="newUser.email> 
```

从部分页面控制器初始化键盘：

```
$('.keyboard')
.keyboard({
    stickyShift: false,
    usePreview: false,
    autoAccept: true,

    change: function(e, kb, el) {
        $scope.newUser.name = el.value;
    }
}); 
```

因此，在 jQuery 插件触发的更改上，我可以运行一些东西。显然，这只适用于更新单个字段/模型，名称一（而电子邮件一则根本不起作用，并且会覆盖名称字段），当与键盘一起使用时，我需要更新任意数量的字段，并且正确的一个。如何以不那么糟糕、不硬编码（如果可能且不太复杂）的方式解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T12:23:43.153

在 Angular 中编写它的方法是实际编写一个指令。您可以将指令与特定的类名相关联。

所以，你的指令看起来像

```
app.directive('keyboard',function(){
  return {
    require : '?ngModel',
    restrict : 'C',
    link : function(scope,element,attrs,ngModelCtrl){
      if(!ngModelCtrl){
        return;
      }
      $(element).keyboard({
        stickyShift: false,
        usePreview: false,
        autoAccept: true,

        change: function(e, kb, el) {
            ngModelCtrl.$setViewValue(el.value);
        }
    });
    }
  };
}); 
```

现在，如果任何元素同时定义了键盘类和 ng-Model 类，那么您的键盘应该会弹出。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-06T13:28:30.023

我修改了 ganraj 指令。现在模型在每次点击键盘按钮时都会更新。

```
app.directive('keyboard',function(){
  return {
    require : '?ngModel',
    restrict : 'C',
    link : function(scope,element,attrs,ngModelCtrl){
      if(!ngModelCtrl){
        return;
      }

      $(element).keyboard({
        stickyShift: false,
        usePreview: false,
        autoAccept: true,

        change: function(e, kb, el) {
            if(!scope.$$phase && !scope.$root.$$phase)
            {
                scope.$apply(function(){
                    ngModelCtrl.$setViewValue(el.value);
                }); 
            }
        }
    });
    }
  };
}); 
```

# mysql - 网站管理员权限：数据库与文件结构

> ID：15547153
> 
> 赞同：0
> 
> 时间：2013-03-21T12:10:46.093
> 
> 标签：mysql, database, file, data-structures

**背景：**

我正在制作一个网站，我希望在其中获得模块化管理权限以获取读/写/编辑权限。我的意图是允许任意数量的访问级别类型，并将其基于文件夹结构。

例如，root 管理员将对所有站点页面进行读/写/编辑。A 组可能对 www.example.com/section1/ 路径中的所有文件（包括子文件夹）进行了读/写/编辑，B 组可能对 www.example.com/section2/ 中的所有文件进行了读/写/编辑，等等。

我已经考虑了两个选项来实现这一点：创建一个 MySQL 数据库，它将保存：

组名（访问组的参考名称）
读取（组可以读取的文件夹列表，以逗号分隔）
写入（组可以写入新内容的文件夹列表，以逗号分隔）
编辑（组可以更改的文件夹列表已存在逗号分隔的信息）

我考虑的另一个选择是在某处创建一个“GroupAccess.txt”文件并将信息手动插入其中以供参考。

**问题：** 这些系统各自的优势是什么？具体来说，将管理员访问信息放在数据库中而不是文本文件中可以获得什么，反之亦然？（我正在寻找有关潜在速度问题、易于维护性、易于编辑/更改将存储的信息的信息）

注意：我不是在寻找“哪个更好”，我想知道具体的优势，以便我可以做出更明智的决定，决定什么对我最有利。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:25:30.180

首先想到的是，数据库比文本文件更安全，原因很简单，因为大多数 Web 服务器默认提供 .txt 文件，因此可以通过 Internet 读取文本文件，这将允许受限用户访问和非网站用户可以看到您网站的整个结构，反过来可以让您更容易受到可能对您网站某些区域的攻击。

使用数据库的另一个好处是，您可以轻松地使用连接来检查用户是否可以访问数据库中的某些内容，就像使用文件一样，您需要读取文件获取权限并构建 SQL 和从数据库中获取数据。

这些只是阅读您的问题时发现的两件事，希望对您有所帮助。

# python - 使用 sqlalchemy 的模型中的循环依赖

> ID：15547156
> 
> 赞同：0
> 
> 时间：2013-03-21T12:10:55.990
> 
> 标签：python, model, sqlalchemy, circular-dependency, python-import

我正在创建一个使用 SQLAlchemy 访问数据库的 webapp。我遇到了两个模型，它们相互引用并最终进入循环导入，这会引发以下异常：

```
--- SNIPP --- (output modified to hide software name)
  File "/opt/promethium/service/opt/xxxx/lib/python/api/server/server.py", line 11, in <module>
    from api.server.controllers import *
  File "/opt/promethium/service/opt/xxxx/lib/python/api/server/controllers/__init__.py", line 3, in <module>
    from messagescontroller import MessagesController
  File "/opt/promethium/service/opt/xxxx/lib/python/api/server/controllers/messagescontroller.py", line 7, in <module>
    from api.server.models import MessageModel, EmailModel, KeyModel, MessagerecipientModel
  File "/opt/promethium/service/opt/xxxx/lib/python/api/server/models/__init__.py", line 6, in <module>
    from keymodel import KeyModel
  File "/opt/promethium/service/opt/xxxx/lib/python/api/server/models/keymodel.py", line 18, in <module>
    from api.server.models import ApplicationModel, EmailModel
ImportError: cannot import name EmailModel 
```

这些是文件及其代码：

**__init__.py**

```
from applicationmodel import ApplicationModel
# some other imports here
from emailmodel import EmailModel
from keymodel import KeyModel
# some more imports here 
```

**密钥模型.py**

```
from sqlalchemy import Column, Integer, String, Date
from sqlalchemy import ForeignKey
from sqlalchemy.orm import relationship, backref, deferred
from sqlalchemy.ext.declarative import _declarative_constructor 
from sqlalchemy import event

from pyncacoreapi.server.models import ApplicationModel, EmailModel
from pyncacoreapi.server.libs.store import Base

class KeyModel(ApplicationModel, Base):
    __tablename__ = "keys"

    id = Column(Integer, primary_key=True)
    email_id = Column(Integer, ForeignKey("emails.id"))
    email = relationship("EmailModel", uselist=False, backref=backref("keys"))
    symmetrickey = deferred(Column(String,unique=True))
    certificate = deferred(Column(String,unique=True))
    privatekey = deferred(Column(String,unique=True))
    publickey = deferred(Column(String,unique=True))
    keymaterial = Column(String,unique=False) 
```

**电子邮件模型.py**

```
from sqlalchemy import Column, Integer, String, Date
from sqlalchemy import ForeignKey
from sqlalchemy.orm import relationship, backref
from sqlalchemy.ext.hybrid import hybrid_property
from sqlalchemy.ext.declarative import _declarative_constructor 

from pyncacoreapi.server.models import ApplicationModel, KeyModel, DomainModel

from pyncacoreapi.server.libs.store import Base, Db

from sqlalchemy import event

class EmailModel(ApplicationModel, Base):
    __tablename__ = "emails"

    id = Column(Integer, primary_key=True)
    email = Column(String, unique=True)
    domain_id = Column(Integer, ForeignKey("domains.id"))
    domain = relationship("DomainModel",backref=backref("emails", order_by=id))
    account_id = Column(Integer, ForeignKey("accounts.id"))
    account = relationship("AccountModel",backref=backref("emails", order_by=id)) 
```

我该怎么做才能让这个导入的东西正确？什么是最佳实践或“黄金法则”？谢谢你的帮助！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:22:51.873

在这种特定情况下，根本不需要导入`EmailModel`。更改`keymodel.py`以删除导入：

```
from pyncacoreapi.server.models import ApplicationModel 
```

SQLAlchemy 推迟解析作为字符串给出的引用，直到最后可能的时刻，所以在这里`EmailModel`定义与否并不重要。`email`您通过字符串在关系中引用它。

# java - Scala 一个具有可变状态的单例对象在 servlet 容器环境中是否具有与 Java 静态相同的行为？

> ID：15547157
> 
> 赞同：2
> 
> 时间：2013-03-21T12:10:56.307
> 
> 标签：java, scala, static-members, companion-object

不完全确定如何表达这个问题。在 java 中，如果您有一个静态实例 var 并且所属类位于 tomcat/classes 或 tomcat/lib 中，以便许多不同的 Web 应用程序（tomcat 类加载器的子级）可以使用它，则在一个 Web 应用程序中更改静态 var 会影响其他。

Scala 伴生对象也是如此吗？据我了解，Scala 单例对象是编译器创建的由静态变量引用的单例 Java 类。所以答案是肯定的。如果 web 应用 A 创建了一个新的 scala Foo 并且 web 应用 B 创建了一个新的 scala Foo 并且 Foo 类来自一个父类加载器，那么每个 web 应用都会有它自己的 Foo 实例，但实际上只有一个 Foo 的伴生对象的实例。

我在这里错过了什么吗？

提前感谢您的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:13:31.070

实际上，这一切都取决于类加载考虑，无论在 java 或 scala 对象中使用静态变量。

对于由同一个类加载器加载的所有类，单例对象将是相同的，因为底层运行时对于 scala 和 java 的工作方式相同。

如果您正在考虑在 scala 对象中使用可变变量来访问/修改某些共享的全局状态，我警告您这不是一个好的功能实践......但这取决于您需要做什么。

# divshot - 无法下载为项目 zip

> ID：15547158
> 
> 赞同：0
> 
> 时间：2013-03-21T12:10:57.007
> 
> 标签：divshot

每次我选择“导出代码”并单击下载为项目 zip 时，都没有任何反应。用 safari 和 chrome 测试。

这个功能还没有工作还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:57:25.607

我们已经报告了 Firefox 中的一些问题，但它应该可以在 Chrome 中运行。您能否通过电子邮件支持（at）divshot.com 向我们提供更多详细信息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T04:15:48.020

这真的取决于您的项目是否庞大，但有时（实际上经常如此）。您必须等待一段时间才能出现保存设置的弹出窗口，或者是 divshot 服务器真的很忙。

# ios - dismissViewControllerAnimated:completion: 方法替换在 Xcode4.6.1 上不起作用

> ID：15547159
> 
> 赞同：0
> 
> 时间：2013-03-21T12:11:00.360
> 
> 标签：ios, uiviewcontroller, ios4, xcode4.6

我一直在覆盖“dismissViewControllerAnimated:completion:”以在 iOS4.3 中使用此方法。但是自从我更新 Xcode(4.6.1) 以来，这种技术出现了运行时错误

```
error: address doesn't contain a section that points to a section in a object file 
```

神秘的是，“presentViewController:animated:completion:”方法没有问题......

这是我使用的“UIViewController+Compatibility.h”。

```
@implementation UIViewController (Compatibility)

- (void)iOS4_presentViewController:(UIViewController *)viewControllerToPresent animated:(BOOL)flag completion:(void (^)(void))completion
{
    [self presentModalViewController:viewControllerToPresent animated:flag];
    [self performSelector:@selector(callBlock:) withObject:completion afterDelay:(flag ? 0.5 : 0)];
}

- (void)iOS4_dismissViewControllerAnimated:(BOOL)flag completion:(void (^)(void))completion
{
    [self dismissModalViewControllerAnimated:flag];
    [self performSelector:@selector(callBlock:) withObject:completion afterDelay:(flag ? 0.5 : 0)];
}

- (void)callBlock:(void (^)(void))block
{
    if (block) {
        block();
    }
}

+ (void)iOS4compatibilize
{
    // presentViewController:animated:completion:
    Method m1 = class_getInstanceMethod(self.class, @selector(iOS4_presentViewController:animated:completion:));
    class_addMethod(self.class, 
                    @selector(presentViewController:animated:completion:), 
                    method_getImplementation(m1), 
                    method_getTypeEncoding(m1));

    // MEMO:
    // This cause a bug.
    // Method m2 = class_getClassMethod(self.class, @selector(iOS4_dismissViewControllerAnimated:completion:));
    // Here is the answer.

    // dismissViewControllerAnimated:completion:
    Method m2 = class_getInstanceMethod(self.class, @selector(iOS4_dismissViewControllerAnimated:completion:));
    class_addMethod(self.class,
                    @selector(dismissViewControllerAnimated:completion:),
                    method_getImplementation(m2), 
                    method_getTypeEncoding(m2));
}
@end 
```

有人有同样的问题吗？

**备忘录：我已经尝试过这些东西。**

*   清理我预先编译的二进制文件。
*   重新启动 Xcode，或重新启动我的 Mac。
*   我的 Xcode 是当前最新版本（4.6.1 版）
*   我写了很短的示例代码（它只是显示模态视图，然后关闭），但我得到了同样的错误。

我不知道如何解决这种情况...请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:47:08.507

这是解决方案。（我使用了错误的功能）

```
+ (void)iOS4compatibilize
{
    // presentViewController:animated:completion:
    Method m1 = class_getInstanceMethod(self.class, @selector(iOS4_presentViewController:animated:completion:));
    class_addMethod(self.class, 
                    @selector(presentViewController:animated:completion:), 
                    method_getImplementation(m1), 
                    method_getTypeEncoding(m1));

    // dismissViewControllerAnimated:completion:
    Method m2 = class_getInstanceMethod(self.class, @selector(iOS4_dismissViewControllerAnimated:completion:));
    class_addMethod(self.class,
                    @selector(dismissViewControllerAnimated:completion:),
                    method_getImplementation(m2), 
                    method_getTypeEncoding(m2));
} 
```

# java - 如何暂停for循环并在关闭JFrame后它会再次恢复并进入下一个JFrame？

> ID：15547160
> 
> 赞同：0
> 
> 时间：2013-03-21T12:11:03.603
> 
> 标签：java, swing, jframe

我做了什么？

- 在 JFrame 中创建了 10 个 JCheckBox。例如 A、B、C、..

- 为每个 JCheckBox 创建 10 个 JFrame，例如，JFrame A、JFrame B、JFrameC、..

- 创建 ArrayList 用于存储 JCheckBoxes 的值，无论它是否被选中。

- 为 JFrames 创建 ArrayList 并将每个 Frame 添加到其中。

我想做的事？

选择多个复选框后，当我单击“下一步”时，将出现第一个选中框的第一个 JFrame。

考虑示例：我选择了复选框 B、C、F、H 之后，我将单击“下一步”，JFrame B 将出现。现在我将输入数据，然后再次单击“下一步”，它将检查下一个选中的复选框，JFrame 将显示为此处 C。然后是 JFrame F，最后是 JFrame H。

我该怎么做这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:10:24.440

将您想要的任何输入数据添加到 InputPanel 类中。

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class TestGUI {
    JFrame frame;
    ArrayList<JCheckBox> checkBoxes = new ArrayList<JCheckBox>();
    JButton next = new JButton("Next");

    public TestGUI() {
        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setLayout(new BoxLayout(frame.getContentPane(), BoxLayout.Y_AXIS));
        for (int i = 1; i <= 10; i++) {
            JCheckBox box = new JCheckBox(Integer.toString(i));
            box.setName(Integer.toString(i));
            checkBoxes.add(box);
            frame.add(box);
        }
        next.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent arg0) {
                for (int i = 0; i < checkBoxes.size(); i++) {
                    if (checkBoxes.get(i).isSelected()) {
                        InputPanel panel = new InputPanel();
                        int choice = JOptionPane.showConfirmDialog(frame,
                            panel, "Get info for checkbox "
                            + checkBoxes.get(i).getName(),
                            JOptionPane.OK_CANCEL_OPTION);
                        if (choice == JOptionPane.OK_OPTION) {
                            System.out.println(panel.getText());
                        }
                    }
                }
            }
        });
        frame.add(next);
        frame.pack();
        frame.setVisible(true);
    }
    private class InputPanel extends JPanel {
        private JLabel label = new JLabel("Get some info");
        private JTextField text = new JTextField(10);

        public InputPanel() {
            add(label);
            add(text);
        }

        public String getText() {
            return text.getText();
        }
    }

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                TestGUI gui = new TestGUI();
            }
        });
    }
} 
```

# c# - 如何使用重定向的 stdin 而不是 stdout 启动进程？

> ID：15547168
> 
> 赞同：2
> 
> 时间：2013-03-21T12:11:23.307
> 
> 标签：c#, winapi

我正在尝试启动一个子进程，并将 stdin 重定向到我自己创建的句柄，但让 stdout 和 stderr 指向子进程的控制台窗口。

例子：

```
var processStartInfo = new ProcessStartInfo(m_Exe)
{
    UseShellExecute = false,
    RedirectStandardInput = true,
};
m_Process = new Process {StartInfo = processStartInfo};
m_Process.Start();
m_StdIn = m_Process.StandardInput;

// write a line to the subprocess
m_StdIn.WriteLine(""); 
```

问题是设置 RedirectStandardInput 也会导致 stdout 和 stderr 被拦截。如果未设置 RedirectStandardInput，则子进程的输出将正确发送到子进程的控制台窗口。

查看底层的 win32 api， http: [//msdn.microsoft.com/en-gb/library/windows/desktop/ms686331%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms686331%28v=vs.85%29.aspx)说：

> 如果 dwFlags 指定 STARTF_USESTDHANDLES，则此成员 [hStdOutput] 是进程的标准输出句柄。否则，此成员将被忽略，标准输出的默认值是控制台窗口的缓冲区。

我们必须设置 STARTF_USESTDHANDLES 才能重定向标准输入；有没有其他方法可以将标准输出定向到控制台窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:29:15.567

只是不要重定向标准输出：

```
static void Main(string[] args)
{
    var psi = new ProcessStartInfo("cmd.exe")
    {
        RedirectStandardInput = true,
        RedirectStandardOutput = false,
        UseShellExecute = false
    };

    var p = new Process { StartInfo = psi };
    p.Start();

    var stdin = p.StandardInput;

    // write a line to the subprocess
    p.StandardInput.WriteLine("dir");
} 
```

您的流程的输出将显示在 Console.Out

# java - 在带有 Netbeans 7.3 的诺基亚 SDK 2.0 中找不到 JRE

> ID：15547169
> 
> 赞同：2
> 
> 时间：2013-03-21T12:11:25.600
> 
> 标签：java, eclipse, netbeans, java-me, nokia-s40

我想开发`J2ME`移动应用程序，`Nokia SDK 2.0`并成功安装`Netbeans 7.3`，`J2ME`在这里我添加了平台。 `Tools -> Java Platform -> Add Platform -> Java ME CLDC Platform Emulator`.

它自动找到安装`Nokia SDK`在C盘。当我单击下一步时，它显示一个错误。

![在此处输入图像描述](../Images/09167eac411aa009f4c7ba5d7f750bb6.png)

如果有人知道，请提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T04:13:12.963

你使用什么操作系统？您使用 32/64 位操作系统吗？

我之前也遇到过这个问题。

我使用的是 Windows 8 64 位。我已经安装了 Jdk 和 jre x64 位，但无法将 nokia 2.0 sdk 添加到我的 netbeans。

但是在我尝试将 jre 32 位安装到我的计算机之后。它开始检测我的 jre 安装，现在我可以在我的 windows 8 中使用 nokia 2.0 sdk

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T04:52:55.370

为 x86（32 位）安装 Java 1.7，然后对我来说很好。（诺基亚 SDK 是 32 位，与 64 位 JRE 有兼容性问题）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T06:54:15.893

我也遇到了同样的问题，你需要安装 jdk-6u17-windows-i586 位并尝试。

# mule - Mule 文件入站轮询配置

> ID：15547177
> 
> 赞同：5
> 
> 时间：2013-03-21T12:11:38.003
> 
> 标签：mule

我想从特定目录以特定时间间隔一次轮询 10 个文件。如果该目录中存在 250 个文件 Mule 文件入站应该从 250 个文件中取出 10 个文件并处理它们，然后再处理 10 个文件等。我有轮询频率值“10000”

我试图像这样应用 maxThreadsActive 但它不起作用

```
<file:connector>
<receiver-thread-profile maxThreadsActive=10/>
</file:connector> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-26T14:44:21.987

Mule 允许您覆盖传输实现的某些部分。在这种情况下，您应该覆盖`org.mule.transport.file.FileMessageReceiver`，特别是`listFiles()`方法。

```
public class MyFileMessageReceiver extends FileMessageReceiver
{
    private static final MAX_FILES = 10;

    @Override
    List<File> listFiles() throws MuleException
    {
        try
        {
            List<File> files = new ArrayList<File>();
            this.basicListFiles(readDirectory, files);

            if(files.isEmpty())
                return NO_FILES;

            if(files.size() > MAX_FILES)
                return files.subList(0, MAX_FILES);
            else
                return files;
        }
        catch (Exception e)
        {
            throw new DefaultMuleException(FileMessages.errorWhileListingFiles(), e);
        }
    }
} 
```

然后，创建一个将使用您的消息接收器的连接器

```
<file:connector name="inboundFileConnector"> 
    <service-overrides messageReceiver="org.mule.transport.file.MyFileMessageReceiver"/> 
</file:connector> 
```

最后，您可以将此连接器与配置中的任何文件入站端点一起使用。您只需指定轮询频率即可。

高温高压

# php - jquery值到php

> ID：15547181
> 
> 赞同：0
> 
> 时间：2013-03-21T12:11:45.837
> 
> 标签：php, jquery

我想将一个 id 值从 html 添加到 php。这是我的脚本：

HTML 代码：

```
<body>
<script type="text/javascript" src="jquery/jquery.min.js"></script>
<script>

   xy.on("click", function() {
     window.location = "/pieplots/pie.php";  
     var id=100;        //HOW CAN I ADD THIS VELUE, TO THE OPENED pie.php?
   }); 
```

PHP代码：

```
<?php // content="text/plain; charset=utf-8"

$id = $_POST['id'];
echo $id; 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:15:14.070

因为您使用 post 参数，所以您应该发布一个帖子：

```
$.ajax({
 type: "POST",
 url:"/pieplots/pie.php",
 data: { id: 100 }
}) 
```

Üdv，巴林特

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:15:41.457

如果不是强制使用`POST`，请在脚本中尝试以下代码：

```
 xy.on("click", function() {
var id=100;
 window.location = "/pieplots/pie.php?id=" + id;             
});` 
```

而这个在 php 中：
`$id = $_GET['id']; echo $id;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:14:29.113

```
xy.on("click", function() {
     var id=100;        //HOW CAN I ADD THIS VELUE, TO THE OPENED pie.php?
     window.location = "/pieplots/pie.php?id=" + id;  
}); 
```

服务器端可能必须进行如下更改，因为您正在发送 GET 请求

```
$id = $_GET['id']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T12:20:39.360

如果您希望浏览器发出发布请求（而不是 ajax），则必须为此提供一个`<form>`。像这样的东西可以工作：

```
xy.on('click', function(){
    var id = 100;
    $('<form method="post" action="/pieplots/pie.php">'+
      '<input type="hidden" name="id" value="'+id+'">'+
      '</form>').appendTo($('body')).submit();
}); 
```

# android - 在 Eclipse 中，未检测到我的设备

> ID：15547183
> 
> 赞同：2
> 
> 时间：2013-03-21T12:11:49.567
> 
> 标签：android, eclipse

在 Eclipse 中不再检测到我的 android 智能手机设备。我试图重新启动 Eclipse、我的系统和我的设备也没有修复它。

我的设备是“Micromax canvas2”智能手机。我的驱动程序已安装。我用三星驱动程序检查了其他三星设备，它工作正常。

我检查了所有设置。还要检查 eclipse Windows > Show view > Other .. > Device but no device found。

为什么找不到我的设备，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:17:10.023

尝试杀死 adb 服务器并通过命令提示符重新启动它

转到您保存它的 android skd 目录并遍历 adb.exe，您将在平台工具中找到它。

可能这会对你有所帮助。同样的事情发生在我身上很多次。我当时只是重新启动服务器

![在此处输入图像描述](../Images/0871835a0ed82f078cd803c6cb0e6eb0.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:22:25.707

```
Edit ~/.android/adb_usb.ini (or if you are running as root, check /root/.android)
Add 0x1bbb to the end of the file if it already exists, otherwise do: echo 0x1bbb >> adb_usb.ini
adb kill-server
adb start-server
Check output of adb devices for your device 
```

# jboss - JBoss 6 EJB 教程.jar

> ID：15547184
> 
> 赞同：3
> 
> 时间：2013-03-21T12:11:50.220
> 
> 标签：jboss, ejb-3.0

我正在阅读 JBoss 站点的 EJB 3.0 教程，我遇到了第三个教程，即[Transactions and Security](http://docs.jboss.org/ejb3/app-server/tutorial/security/security.html)。

这里有一段说：

> 在此特定示例中，使用了“其他”域。“其他”域对应于包含明文用户、密码和用户/角色关联的**users.properties**和**roles.properties文件。**如果您打开构建的**tutorial.jar**文件，您将在其中看到这两个文件。

所以我在 JBoss 6 目录中搜索了我从 zip 中提取但没有找到的 tutorial.jar。

本教程指的是 JBoss 4.0，所以我在 JBoss 4.2 安装目录中搜索了相同的内容，但还是没有找到。

有人可以帮我找到 tutorial.jar 吗？

**更新 ：**

[好的，我从这里](http://anonsvn.jboss.org/repos/jbossas/projects/ejb3/trunk/docs/tutorial/security/)找到了教程中使用的属性文件，但仍然找不到 tutorial.jar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:52:49.390

我找到了 tutorial.jar 文件，但没有得到，但希望这可以帮助你......

在您的 jboss 根文件夹中，检查下面的角色路径

```
jboss-6.0.0.20100429-M3\server\default\conf\props\jbossws-roles.properties 
```

并为用户

```
jboss-6.0.0.20100429-M3\server\default\conf\props\jbossws-users.properties 
```

# c# - this[parameter] 语法有什么用？

> ID：15547185
> 
> 赞同：2
> 
> 时间：2013-03-21T12:11:52.270
> 
> 标签：c#, methods, syntax, this

我第一次遇到这种语法（我正在使用 WPF，但不确定它是否仅适用于 WPF）

```
public string this[string name]
{
   if(this.User == name)
   {
      ...
   }
} 
```

与下面的标准方法相比，使用它有什么优势？

```
public string Validate(string name)
{
   if(this.User == name)
   {
      ...
   }
} 
```

我尝试编译`public string this(string name)`，但不起作用，所以`this`方面是关键。但是这种格式是否实现了标准方法无法实现的功能，它仅特定于 WPF 还是一种语言实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:13:20.617

它被称为[`Indexer`](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)。

> 索引器允许类或结构的实例像数组一样被索引。索引器类似于属性，只是它们的访问器带有参数。

索引器提供*类似数组的*语法。它允许以与数组相同的方式访问类型。诸如索引器之类的属性通常会访问后备存储。

您可以阅读[“奇怪的”C# 属性语法](https://stackoverflow.com/questions/14138258/strange-c-sharp-property-syntax/14138282#14138282)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T12:13:10.560

它是一个[索引器](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)：

> 索引器允许类或结构的实例像数组一样被索引。索引器类似于属性，只是它们的访问器带有参数。

这些通常用于集合类型——例如字典、列表和数组。

在您给出的具体示例中，一种方法似乎更合适。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:17:02.293

this[] 语法是“索引器”。它是转发私有支持集合的语法糖。它允许您使用类似数组的类，但在返回数据之前封装一些逻辑。例如，您可以包装 Dictionary 以针对不存在的键返回 null 而不是抛出异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T12:18:06.993

这使您可以像使用数组一样使用类来访问元素：

for ex 而不是写作

> var element = myObject.GetElementAt(index);

你写

> var 元素 = myObject[索引];

# android - 在开发人员设置中设置不保留活动标志时，清除 2 个给定活动之间的活动堆栈

> ID：15547189
> 
> 赞同：1
> 
> 时间：2013-03-21T12:12:05.007
> 
> 标签：android

我有一个应用程序，我从活动 A->B->C->D 移动。现在我希望当我按下 D 上的按钮时，我的堆栈应该是 A->D。我已经从 android API 级别 8 到 10 做到了这一点，但在 android 4.0 上，我有“**不保留活动**”设置，这些设置会在后台杀死我的活动，从而使 Intent.FLAG_ACTIVITY_CLEAR_TOP 和 Intent.FLAG_ACTIVITY_NEW_TASK 无用，因为我的活动 a 不存在。

我该如何处理这种情况。任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:28:50.547

不要保留活动我认为这是模拟场景的开发人员选项。

我用来清理后台堆栈（在您的情况下只有活动 B 和 C）是在该活动上注册一个广播，并在用户按下按钮时从 D 活动启动一个意图。

```
public void onClick(View v){
 Intent broadcastIntent = new Intent();
 broadcastIntent.setAction("com.package.CLEAR_B_C");
 sendBroadcast(broadcastIntent);
} 
```

所以当 B 和 C 收到意图时，调用 finish()。

[请参阅该帖子和 Francesco Laurita 的答案](https://stackoverflow.com/questions/3007998/on-logout-clear-activity-history-stack-preventing-back-button-from-opening-l)

# php - jqgrid filtertoolbar 不工作，搜索对话框正常

> ID：15547192
> 
> 赞同：2
> 
> 时间：2013-03-21T12:12:11.647
> 
> 标签：php, jqgrid

我有一个 jgrid 设置并正确显示数据。我添加了一个过滤器工具箱，但是当我输入一些内容时，网格不会显示任何数据。如果我使用放大镜进行搜索，一切都会按预期进行。

这是代码：index.html

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
        <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
        <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>blablabla</title>

        <link rel="stylesheet" type="text/css" media="screen" href="css/jquery-ui-1.10.2.custom.css" />
        <link rel="stylesheet" type="text/css" media="screen" href="css/ui.jqgrid.css" />
         <?php
         include("dbconfig.php");
         ?>

        <script src="js/jquery-1.9.0.min.js" type="text/javascript"></script>
        <script src="js/i18n/grid.locale-en.js" type="text/javascript"></script>
        <script src="js/jquery.jqGrid.min.js" type="text/javascript"></script>

        <script type="text/javascript">
        $(function(){ 
          $("#list").jqGrid({
            url:'example.php',
            datatype: 'json',
            colNames:['Edit','ID','Alliance Name','Player', 'Level','Might','City 1','City 2','City 3','City 4','Notes'],
            colModel :[ 
            {name: 'myac', width:80, fixed:true, sortable:false, resize:false,search:false, formatter:'actions',
                    formatoptions:{keys:true}},
              {name:'id', index:'id', width:30,searchoptions: { sopt: ['eq', 'cn']} }, 
              {name:'alliance_name', index:'alliance_name', editable:true, sorttype: 'int' ,sortable:true, search:true,searchoptions: { sopt: ['eq', 'cn']}, stype:'text', width:110}, 
              {name:'player_name', index:'player_name', editable:true, sortable:true,search:true,searchoptions: { sopt: ['eq', 'cn']}, stype:'text', width:80, align:'center'}, 
              {name:'player_lvl', index:'player_lvl', editable:true,  sortable:true, search:true,searchoptions: { sopt: ['eq', 'cn']}, stype:'text', width:80, align:'center'}, 
              {name:'player_might', index:'player_might', editable:true, sortable:true,search:true, searchoptions: { sopt: ['eq', 'cn']},stype:'text', width:80, align:'center'}, 
              {name:'city1_coords', index:'city1_coords', editable:true, width:80,search:true,searchoptions: { sopt: ['eq', 'cn']}, stype:'text' ,align:'center'}, 
              {name:'city2_coords', index:'city2_coords',editable:true,  width:80,search:true,searchoptions: { sopt: ['eq', 'cn']}, stype:'text', align:'center'},
              {name:'city3_coords', index:'city3_coords',editable:true,  width:80,search:true,searchoptions: { sopt: ['eq', 'cn']}, stype:'text', align:'center'},
              {name:'city4_coords', index:'city4_coords',editable:true, width:80,search:true,searchoptions: { sopt: ['eq', 'cn']}, stype:'text', align:'center'},     
              {name:'notes', index:'notes', width:150, editable:true,search:true, searchoptions: { sopt: ['eq', 'cn']}, stype:'text',sortable:false} 
            ],

            pager: '#pager',
            rowNum:30,
            rowList:[10,20,30,40,50,60,70,100],
            sortname: 'id',
            mtype: "GET",
            sortorder: 'asc',
            viewrecords: true,
            ignoreCase:true,
            gridview: true,
            subGrid : true,
            height: "100%",
            editurl: 'dummy.php',
            autowidth: true,
            subGridUrl: 'subgrid.php',
            subgridtype: "json",

             autoencode: true,

        subGridModel: [{ name  : ['Wild 1','Wild 2','Wild 3','Wild 4','Wild 5','Wild 6','Wild 7','Wild 8','Wild 9','Wild 10'], 
                            width : [120,120,120,120,120,120,120,120,120,120]} 
            ],
            caption: 'Enemy Coordrinates',

            repeatitems: false,
            loadComplete: function(){ $('#list').setGridParam({datatype: 'json'}); 
            jQuery("#list").trigger("reloadGrid");
            }

          }); 
            jQuery("#list").showCol('subgrid');
            jQuery("#list").jqGrid('navGrid',"#pager",{edit:false,add:false,del:false,search:true});
            jQuery("#list").jqGrid('inlineNav',"#pager");
            jQuery("#list").jqGrid('filterToolbar',{stringResult: false, searchOnEnter : false, defaultSearch: 'cn', ignoreCase: true});

        }); 

        </script>

        </head>
        <body>
        <table id="list"><tr><td/></tr></table> 
        <div id="pager"></div> 

        </body>
        </html> 
```

例子.php

```
 <?php 
        //include the information needed for the connection to MySQL data base server. 
        // we store here username, database and password 
        include("dbconfig.php");
        //ini_set("display_errors",1);
        // to the url parameter are added 4 parameters as described in colModel
        // we should get these parameters to construct the needed query
        // Since we specify in the options of the grid that we will use a GET method 
        // we should use the appropriate command to obtain the parameters. 
        // In our case this is $_GET. If we specify that we want to use post 
        // we should use $_POST. Maybe the better way is to use $_REQUEST, which
        // contain both the GET and POST variables. For more information refer to php documentation.
        // Get the requested page. By default grid sets this to 1\. 
        $page = $_REQUEST['page']; 
        $limit = $_REQUEST['rows']; 
        $sidx = $_REQUEST['sidx']; 
        $sord = $_REQUEST['sord']; 

        // if we not pass at first time index use the first column for the index or what you want
        if(!$sidx) $sidx =1; 

        //array to translate the search type
        $ops = array(
            'eq'=>'=', //equal
            'ne'=>'<>',//not equal
            'lt'=>'<', //less than
            'le'=>'<=',//less than or equal
            'gt'=>'>', //greater than
            'ge'=>'>=',//greater than or equal
            'bw'=>'LIKE', //begins with
            'bn'=>'NOT LIKE', //doesn't begin with
            'in'=>'LIKE', //is in
            'ni'=>'NOT LIKE', //is not in
            'ew'=>'LIKE', //ends with
            'en'=>'NOT LIKE', //doesn't end with
            'cn'=>'LIKE', // contains
            'nc'=>'NOT LIKE'  //doesn't contain
        );
        function getWhereClause($col, $oper, $val){
            global $ops;
            if($oper == 'bw' || $oper == 'bn') $val .= '%';
            if($oper == 'ew' || $oper == 'en' ) $val = '%'.$val;
            if($oper == 'cn' || $oper == 'nc' || $oper == 'in' || $oper == 'ni') $val = '%'.$val.'%';
            return " WHERE $col {$ops[$oper]} '$val' ";
        }
        $where = ""; //if there is no search request sent by jqgrid, $where should be empty
        $searchField = isset($_GET['searchField']) ? $_GET['searchField'] : false;
        $searchOper = isset($_GET['searchOper']) ? $_GET['searchOper']: false;
        $searchString = isset($_GET['searchString']) ? $_GET['searchString'] : false;
        if ($_GET['_search'] == 'true') {
            $where = getWhereClause($searchField,$searchOper,$searchString);
        //  var_dump($where);

        }

         $totalrows = isset($_REQUEST['totalrows']) ? $_REQUEST['totalrows']: false;
        if($totalrows) {
            $limit = $totalrows;    
        }

        // connect to the MySQL database server 
        $db = mysql_connect($dbhost, $dbuser, $dbpassword) or die("Connection Error: " . mysql_error()); 

        // select the database 
        mysql_select_db($database) or die("Error connecting to db."); 
         if ($limit<0) $limit = 0;
        // calculate the number of rows for the query. We need this for paging the result 
        $result = mysql_query("SELECT COUNT(*) AS count FROM enemy_coords"); 
        $row = mysql_fetch_array($result,MYSQL_ASSOC); 
        $count = $row['count']; 

                if( $count >0 ) {
                    $total_pages = ceil($count/$limit);
                } else {
                    $total_pages = 0;
                }
                if ($page > $total_pages) $page=$total_pages;
                $start = $limit*$page - $limit; // do not put $limit*($page - 1)
                if ($start<0) $start = 0;

        // if for some reasons start position is negative set it to 0 
        // typical case is that the user type 0 for the requested page 

        // the actual query for the grid data 
        $SQL = "SELECT * FROM enemy_coords ".$where." ORDER BY $sidx $sord LIMIT $start , $limit"; 
        $result = mysql_query( $SQL ) or die("Couldn't execute query.".mysql_error()); 

        $responce->page = $page;
        $responce->total = $total_pages;
        $responce->records = $count;
        $i=0;
        while($row = mysql_fetch_array($result,MYSQL_ASSOC)) {
            $responce->rows[$i]['id']=$row[ID];
            $responce->rows[$i]['cell']=array($row[ID],$row[ID],$row[alliance_name],$row[player_name],$row[player_lvl],$row[player_might],$row[city1_coords],$row[city2_coords],$row[city3_coords],$row[city4_coords],$row[notes]);
            $i++;
        }        

        echo json_encode($responce);
        // var_dump($SQL);
        ?> 
```

子网格.php

```
 <?php
        include("dbconfig.php");
        $id = $_GET['id'];

        // connect to the database
        $db = mysql_connect($dbhost, $dbuser, $dbpassword)
        or die("Connection Error: " . mysql_error());

        mysql_select_db($database) or die("Error conecting to db.");
        $SQL = "SELECT wild1,wild2,wild3,wild4,wild5,wild6,wild7,wild8,wild9,wild10 FROM enemy_coords WHERE id=".$id."";
        $result = mysql_query( $SQL ) or die("Couldnt execute query.".mysql_error());

        $i=0;
        while($row = mysql_fetch_array($result,MYSQL_ASSOC)) {
            $responce->rows[$i]['id']=$row[num];
            $responce->rows[$i]['cell']=array($row[wild1],$row[wild2],$row[wild3],$row[wild4],$row[wild5],$row[wild6],$row[wild7],$row[wild8],$row[wild9],$row[wild10],);
            $i++;
        } 
        echo json_encode($responce);
        ?> 
```

我做错了什么？我不是php专家！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:29:31.227

您使用`stringResult: false`选项。它意味着*另一种*数据格式，即您当前使用的[单字段搜索格式。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3asinge_searching)您可以尝试使用 Fiddler 或 Firebug 或 IE 或 Chrome 的开发人员工具来捕获 HTTP 流量。您将看到，如果`stringResult: false`选项 jqGrid 以表格形式发送数据

```
key=value 
```

其中是应用过滤器的列`key`的值`index`或属性。`name`例如，如果用户在`notes`列上的输入字段中键入文本“bla”而不是参数

```
notes=bla 
```

将在 URL 中找到。您可以使用`$_REQUEST['notes']`它来获取它。

因为单字段搜索的数据格式和`stringResult: false`我个人比较喜欢用`stringResult: true`的格式不一样，高级搜索的格式可以看[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aadvanced_searching#options)。

# javascript - 使用 vanilla javascript 将 HTML 表导出为 CSV

> ID：15547198
> 
> 赞同：78
> 
> 时间：2013-03-21T12:12:35.627
> 
> 标签：javascript, jquery, node.js, html-table, export-to-csv

我正在尝试在我的网站中添加 csv 下载选项的功能。它应该将网站中存在的 html 表转换为 csv 内容并使其可下载。我一直在互联网上搜索一个好的插件，并找到了一些有用的插件，例如[http://www.dev-skills.com/export-html-table-to-csv-file/](https://web.archive.org/web/20131008192222/http://www.dev-skills.com/export-html-table-to-csv-file/) 但它使用 php 脚本来完成下载部分。我想知道是否有一个纯 javascript 库可用于使用 node.js 等服务器端软件而不使用 php 来执行此功能？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2019-05-30T01:16:03.983

应该适用于每个现代浏览器并且没有 jQuery 或任何依赖项，这里是我的实现：

```
// Quick and simple export target #table_id into a csv
function download_table_as_csv(table_id, separator = ',') {
    // Select rows from table_id
    var rows = document.querySelectorAll('table#' + table_id + ' tr');
    // Construct csv
    var csv = [];
    for (var i = 0; i < rows.length; i++) {
        var row = [], cols = rows[i].querySelectorAll('td, th');
        for (var j = 0; j < cols.length; j++) {
            // Clean innertext to remove multiple spaces and jumpline (break csv)
            var data = cols[j].innerText.replace(/(\r\n|\n|\r)/gm, '').replace(/(\s\s)/gm, ' ')
            // Escape double-quote with double-double-quote (see https://stackoverflow.com/questions/17808511/properly-escape-a-double-quote-in-csv)
            data = data.replace(/"/g, '""');
            // Push escaped string
            row.push('"' + data + '"');
        }
        csv.push(row.join(separator));
    }
    var csv_string = csv.join('\n');
    // Download it
    var filename = 'export_' + table_id + '_' + new Date().toLocaleDateString() + '.csv';
    var link = document.createElement('a');
    link.style.display = 'none';
    link.setAttribute('target', '_blank');
    link.setAttribute('href', 'data:text/csv;charset=utf-8,' + encodeURIComponent(csv_string));
    link.setAttribute('download', filename);
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
} 
```

然后添加您的下载按钮/链接：

```
<a href="#" onclick="download_table_as_csv('my_id_table_to_export');">Download as CSV</a> 
```

CSV 文件是有时间的并且与默认的 Excel 格式兼容。

*评论后更新*：添加第二个参数“分隔符”，它可以用来配置另一个字符`;`，如果你有用户在世界不同地区下载你的 csv，这很有用，因为他们可以为 Excel 使用另一个默认分隔符，有关更多信息，请参阅：[https ://superuser.com/a/606274/908273](https://superuser.com/a/606274/908273)

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-03-21T17:27:19.607

使用 just `jQuery`、 vanilla`Javascript`和`table2CSV`库：

[导出到 html-table-as-csv-file-using-jquery](http://odoepner.wordpress.com/2012/04/09/export-to-html-table-as-csv-file-using-jquery/)

将此代码放入要在该`head`部分中加载的脚本中：

```
 $(document).ready(function () {
    $('table').each(function () {
        var $table = $(this);

        var $button = $("<button type='button'>");
        $button.text("Export to spreadsheet");
        $button.insertAfter($table);

        $button.click(function () {
            var csv = $table.table2CSV({
                delivery: 'value'
            });
            window.location.href = 'data:text/csv;charset=UTF-8,' 
            + encodeURIComponent(csv);
        });
    });
}) 
```

笔记：

需要[jQuery](http://jquery.com/download/)和[table2CSV](https://github.com/rubo77/table2CSV)：在上面的脚本之前添加对两个库的脚本引用。

选择`table`器用作示例，可以根据需要进行调整。

它只适用于完全`Data URI`支持的浏览器：Firefox、Chrome 和 Opera，不适用于 IE，它只支持`Data URIs`将二进制图像数据嵌入到页面中。

为了获得完整的浏览器兼容性，您必须使用稍微不同的方法，该方法需要`echo`CSV 的服务器端脚本。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-01-29T14:00:20.563

[在http://jordiburgos.com/post/2014/excellentexport-javascript-export-to-excel-csv.html](https://web.archive.org/web/20150208082455/http://jordiburgos.com/post/2014/excellentexport-javascript-export-to-excel-csv.html)有一个非常简单的免费和开源解决方案

[首先从https://github.com/jmaister/excellentexport/releases/tag/v1.4](https://github.com/jmaister/excellentexport/releases/tag/v1.4)下载 javascript 文件和示例文件

html 页面如下所示。

确保 javascript 文件位于同一文件夹中或相应地更改 html 文件中脚本的路径。

```
<html>
<head>
    <title>Export to excel test</title>
    <script src="excellentexport.js"></script>
    <style>
        table, tr, td {
            border: 1px black solid;
        }
    </style>
</head>
<body>
    <h1>ExcellentExport.js</h1>

    Check on <a href="http://jordiburgos.com">jordiburgos.com</a> and  <a href="https://github.com/jmaister/excellentexport">GitHub</a>.

    <h3>Test page</h3>

    <br/>

    <a download="somedata.xls" href="#" onclick="return ExcellentExport.excel(this, 'datatable', 'Sheet Name Here');">Export to Excel</a>
    <br/>

    <a download="somedata.csv" href="#" onclick="return ExcellentExport.csv(this, 'datatable');">Export to CSV</a>
    <br/>

    <table id="datatable">
        <tr>
            <th>Column 1</th>
            <th>Column "cool" 2</th>
            <th>Column 3</th>
        </tr>
        <tr>
            <td>100,111</td>
            <td>200</td>
            <td>300</td>
        </tr>
        <tr>
            <td>400</td>
            <td>500</td>
            <td>600</td>
        </tr>
        <tr>
            <td>Text</td>
            <td>More text</td>
            <td>Text with
                new line</td>
        </tr>
    </table>

</body> 
```

因为我已经尝试了大多数其他方法，所以使用它非常容易。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-11-14T19:31:37.617

您不需要服务器端的 PHP 脚本。仅在客户端执行此操作，在接受[Data URIs](http://en.wikipedia.org/wiki/Data_URI)的浏览器中：

```
data:application/csv;charset=utf-8,content_encoded_as_url 
```

数据 URI 将类似于：

```
data:application/csv;charset=utf-8,Col1%2CCol2%2CCol3%0AVal1%2CVal2%2CVal3%0AVal11%2CVal22%2CVal33%0AVal111%2CVal222%2CVal333 
```

您可以通过以下方式调用此 URI：

*   使用`window.open`
*   或设置`window.location`
*   或通过锚的href
*   通过添加下载属性，它将在 chrome 中工作，仍然需要在 IE 中进行测试。

要进行测试，只需复制上面的 URI 并粘贴到浏览器地址栏中。或者在 HTML 页面中测试下面的锚点：

```
<a download="somedata.csv" href="data:application/csv;charset=utf-8,Col1%2CCol2%2CCol3%0AVal1%2CVal2%2CVal3%0AVal11%2CVal22%2CVal33%0AVal111%2CVal222%2CVal333">Example</a> 
```

要创建内容，从表中获取值，您可以使用[MelanciaUK](https://web.archive.org/web/20130602200125/http://www.kunalbabre.com/projects/table2CSV.php)提到的[table2CSV](https://stackoverflow.com/a/15554192/439171)并执行以下操作：

```
var csv = $table.table2CSV({delivery:'value'});
window.location.href = 'data:application/csv;charset=UTF-8,' + encodeURIComponent(csv); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-02-24T07:03:30.993

(1)这是针对此问题的原生 javascript 解决方案。它适用于大多数现代浏览器。

```
function export2csv() {
  let data = "";
  const tableData = [];
  const rows = document.querySelectorAll("table tr");
  for (const row of rows) {
    const rowData = [];
    for (const [index, column] of row.querySelectorAll("th, td").entries()) {
      // To retain the commas in the "Description" column, we can enclose those fields in quotation marks.
      if ((index + 1) % 3 === 0) {
        rowData.push('"' + column.innerText + '"');
      } else {
        rowData.push(column.innerText);
      }
    }
    tableData.push(rowData.join(","));
  }
  data += tableData.join("\n");
  const a = document.createElement("a");
  a.href = URL.createObjectURL(new Blob([data], { type: "text/csv" }));
  a.setAttribute("download", "data.csv");
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
}
```

```
table {
  border-collapse: collapse;
}

td, th {
  border: 1px solid #aaa;
  padding: 0.5rem;
  text-align: left;
}

td {
  font-size: 0.875rem;
}

.btn-group {
  padding: 1rem 0;
}

button {
  background-color: #fff;
  border: 1px solid #000;
  margin-top: 0.5rem;
  border-radius: 3px;
  padding: 0.5rem 1rem;
  font-size: 1rem;
}

button:hover {
  cursor: pointer;
  background-color: #000;
  color: #fff;
}
```

```
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Author</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>jQuery</td>
      <td>John Resig</td>
      <td>The Write Less, Do More, JavaScript Library.</td>
    </tr>
    <tr>
      <td>React</td>
      <td>Jordan Walke</td>
      <td>React makes it painless to create interactive UIs.</td>
    </tr>
    <tr>
      <td>Vue.js</td>
      <td>Yuxi You</td>
      <td>The Progressive JavaScript Framework.</td>
    </tr>
  </tbody>
</table>

<div class="btn-group">
  <button onclick="export2csv()">csv</button>
</div>
```

(2) 如果你想要一个纯javascript库，[FileSaver.js](https://github.com/eligrey/FileSaver.js/)可以帮你保存触发文件下载的代码片段。此外，FileSaver.js 将不负责构建要导出的内容。您必须以您想要的格式自己构建内容。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-01-03T18:55:13.163

使用了上面的答案，但根据我的需要对其进行了更改。

我使用了以下函数并导入到我需要下载 csv 文件的**REACT文件中。**

我的元素中有一个`span`标签。`th`为大多数函数/方法的作用添加了注释。

```
import { tableToCSV, downloadCSV } from './../Helpers/exportToCSV';

export function tableToCSV(){
  let tableHeaders = Array.from(document.querySelectorAll('th'))
    .map(item => {
      // title = splits elem tags on '\n',
      // then filter out blank "" that appears in array.
      // ex ["Timestamp", "[Full time]", ""]
      let title = item.innerText.split("\n").filter(str => (str !== 0)).join(" ")
      return title
    }).join(",")

  const rows = Array.from(document.querySelectorAll('tr'))
  .reduce((arr, currRow) => {
    // if tr tag contains th tag.
    // if null return array.
    if (currRow.querySelector('th')) return arr

    // concats individual cells into csv format row.
    const cells = Array.from(currRow.querySelectorAll('td'))
      .map(item => item.innerText)
      .join(',')
    return arr.concat([cells])
  }, [])

return tableHeaders + '\n' + rows.join('\n')
}

export function downloadCSV(csv){
  const csvFile = new Blob([csv], { type: 'text/csv' })
  const downloadLink =  document.createElement('a')
  // sets the name for the download file
  downloadLink.download = `CSV-${currentDateUSWritten()}.csv`
  // sets the url to the window URL created from csv file above
  downloadLink.href = window.URL.createObjectURL(csvFile)
  // creates link, but does not display it.
  downloadLink.style.display = 'none'
  // add link to body so click function below works
  document.body.appendChild(downloadLink)

  downloadLink.click()
} 
```

当用户单击导出到 csv 时，它会在反应中触发以下功能。

```
 handleExport = (e) => {
    e.preventDefault();
    const csv = tableToCSV()
    return downloadCSV(csv)
  } 
```

示例 html 表元素。

```
 <table id="datatable">
        <tbody>
          <tr id="tableHeader" className="t-header">
            <th>Timestamp
              <span className="block">full time</span></th>
            <th>current rate
              <span className="block">alt view</span>
            </th>
            <th>Battery Voltage
              <span className="block">current voltage
              </span>
            </th>
            <th>Temperature 1
              <span className="block">[C]</span>
            </th>
            <th>Temperature 2
              <span className="block">[C]</span>
            </th>
            <th>Time & Date </th>
          </tr>

        </tbody>
        <tbody>
          {this.renderData()}
        </tbody>
      </table>
    </div> 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2021-01-09T05:34:24.267

**现代解决方案**

此处提出的大多数解决方案都将与嵌套表或 td 元素中的其他元素中断。我经常在表格中使用其他元素，但只想导出最顶层的表格。我从 Calumah 获取了一些在这里找到的代码，并添加了一些现代香草 ES6 JS。

使用**textContent**是比 innerText 更好的解决方案，因为 innerText 将返回 td 元素内的任何 HTML。但是，即使 textContent 也会从嵌套元素返回文本。一个更好的解决方案是在您的 td 上使用自定义数据属性并从那里为您的 CSV 提取值。

快乐编码！

```
function downloadAsCSV(tableEle, separator = ','){
    let csvRows = []
    //only get direct children of the table in question (thead, tbody)
    Array.from(tableEle.children).forEach(function(node){
        //using scope to only get direct tr of node
        node.querySelectorAll(':scope > tr').forEach(function(tr){
            let csvLine = []
            //again scope to only get direct children
            tr.querySelectorAll(':scope > td').forEach(function(td){
                //clone as to not remove anything from original
                let copytd = td.cloneNode(true)
                let data
                if(copytd.dataset.val) data = copytd.dataset.val.replace(/(\r\n|\n|\r)/gm, '')
                else {
                    Array.from(copytd.children).forEach(function(remove){
                        //remove nested elements before getting text
                        remove.parentNode.removeChild(remove)   
                    })
                    data = copytd.textContent.replace(/(\r\n|\n|\r)/gm, '')
                }
                data = data.replace(/(\s\s)/gm, ' ').replace(/"/g, '""')
                csvLine.push('"'+data+'"')
            })
            csvRows.push(csvLine.join(separator))
        })
    })
    var a = document.createElement("a")
    a.style = "display: none; visibility: hidden" //safari needs visibility hidden
    a.href = 'data:text/csv;charset=utf-8,' + encodeURIComponent(csvRows.join('\n'))
    a.download = 'testfile.csv'
    document.body.appendChild(a)
    a.click()
    a.remove()
} 
```

编辑：cloneNode() 更新为 cloneNode(true) 以获取内部信息

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-12-03T20:23:59.437

我发现有一个图书馆。请参见此处的示例：

[https://editor.datatables.net/examples/extensions/exportButtons.html](https://editor.datatables.net/examples/extensions/exportButtons.html)

除了上述代码之外，还加载了以下 Javascript 库文件以供本示例使用：

在 HTML 中，包括以下脚本：

```
jquery.dataTables.min.js   
dataTables.editor.min.js   
dataTables.select.min.js
dataTables.buttons.min.js  
jszip.min.js    
pdfmake.min.js
vfs_fonts.js  
buttons.html5.min.js    
buttons.print.min.js 
```

通过添加如下脚本启用按钮：

```
<script>
$(document).ready( function () {
    $('#table-arrays').DataTable({
        dom: '<"top"Blf>rt<"bottom"ip>',
        buttons: ['copy', 'excel', 'csv', 'pdf', 'print'],
        select: true,
    });
} );
</script> 
```

由于某种原因，excel 导出导致文件损坏，但可以修复。或者，禁用 excel 并使用 csv 导出。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2020-02-27T21:08:45.387

我使用了上面发布的 Calumah 的函数，但我确实遇到了他的代码的问题。

行用分号连接

```
csv.push(row.join(';')); 
```

但生成的链接将“text/csv”作为内容类型

也许在 Windows 中这不是问题，但在 Excel for Mac 中，这会让事情变得很糟糕。我将数组连接更改为逗号，并且效果很好。

# html - 由于非 https 元素而损坏了 https？

> ID：15547202
> 
> 赞同：1
> 
> 时间：2013-03-21T12:12:37.253
> 
> 标签：html, http, ssl, https

我拥有一个论坛应用程序，每当有人发布一些链接为非 https 的内容时，chrome 都会哭着说 https 已损坏或其他什么，因为页面包含不安全的内容。我能做些什么吗？基本上为了使地址栏中的 https 保持绿色，我需要拒绝我的用户发布来自其他页面的任何内容，这太疯狂了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:18:19.617

您可以使用链接重定向器。当他们发布 url 时，您使用[https://yoursite.com/redirect/user_posted_url 之类的链接](https://yoursite.com/redirect/user_posted_url)

不知道你用的是什么论坛平台。

# android - 如何在 2 个 android 设备之间使用广播数据报套接字

> ID：15547203
> 
> 赞同：1
> 
> 时间：2013-03-21T12:12:49.657
> 
> 标签：android

我需要通过广播将数据从手机发送到另一个我用它来发送数据

```
DatagramSocket udp = new DatagramSocket();
                udp.setBroadcast(true);
                String data = miniMe.name + "="
                        + InetAddress.getLocalHost().getHostAddress();
                DatagramPacket packet = new DatagramPacket(data.getBytes(),
                        data.getBytes().length,InetAddress
                        .getByName("255.255.255.255"), 7667);
                while (!endBroadCasting) {
                    udp.send(packet);
                    Log.e("host lobby", "boradcast");
                    Thread.sleep(1000);
                } 
```

并将其用于监听数据：

```
 castListener = new DatagramSocket(7667);
                    DatagramPacket listenerPacket = new DatagramPacket(buf,
                            300);
                    while (isListening) {
                        Log.e("gamelist", "listening called");
                        castListener.receive(listenerPacket);
                        String temp = new String(listenerPacket.getData())
                                .trim();
                        StringTokenizer token = new StringTokenizer(temp,
                                "=");} 
```

但我没有从监听设备得到任何东西

# php - foreach 太慢了

> ID：15547206
> 
> 赞同：4
> 
> 时间：2013-03-21T12:12:58.413
> 
> 标签：php, mysql, arrays, foreach

我有 2 个数组：

```
$questions: pid => name
$answers: pid => rid 
```

它在数据库中插入所有问题（pid），如果有答案（rid），则插入答案；如果没有答案，则插入 0。

```
foreach($questions as $value) {
    $idanswer = ($answers[$value[pid]]) ? $answers[$value[pid]] : 0;
    $idquestion = $value[pid];
    $sql = "INSERT INTO solucion ( rid, pid) VALUES ( '$idanswer ', '$idquestion ')";
    $db - > query($sql);
} 
```

在我缺乏经验的情况下，我几乎对所有事情都使用 foreach，但在这种情况下太慢了。有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T12:16:57.400

不要将单个`INSERT`查询包装在 PHP 循环中，而是使用 PHP 循环在字符串中构建*单个* `INSERT`查询，然后在最后执行该单个查询。

**提示：** [`INSERT`](http://dev.mysql.com/doc/refman/5.5/en/insert.html)可以同时插入*多*行。

尽管单个`INSERT`速度很快，但 MySQL 查询的组合往返*总是*难以扩展，因为您正在为每个数组元素重复连接/通信/解释/文件访问开销......*所有*`N`这些都是不必要的.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T12:17:58.720

与其对要插入的每一行运行一个查询，为什么不在一个查询中插入所有行呢？查询是您在那里支付的昂贵费用，这肯定不是 foreach 的问题。

你为什么不按照以下方式去做：

```
$sql = "INSERT INTO solucion (rid, pid) VALUES ";
$vls = array();
foreach($questions as $value) {
    $idanswer = ($answers[$value[pid]]) ? $answers[$value[pid]] : 0;
    $idquestion = $value[pid];
    $vls[] = " ( '$idanswer ', '$idquestion ')";

}
$sql .= implode(', ', $vls);
$db->query($sql); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T12:17:09.227

我建议构建一个插入多个值的 INSERT 语句，因为每个记录的结构都相同。

```
$values = [];
foreach($questions as $value) {
  $idanswer = ($answers[$value[pid]]) ? $answers[$value[pid]] : 0;
  $idquestion = $value[pid];
  array_push($values, "('$idanswer', '$idquestion')");
 }
 $db->query("INSERT INTO solucion (rid, pid) VALUES " . implode(',', $values)); 
```

上面的代码片段将构建一个如下形式的 INSERT 语句

```
INSERT INTO table (column, column) VALUES ('value', 'value'), ('value', 'value') 
```

最好减少插入所有记录所需的数据库命中次数。

有关 INSERT 语句的完整参考，请阅读[文档](http://dev.mysql.com/doc/refman/5.6/en/insert.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T12:19:53.247

这很慢，因为您在每次 foreach 迭代中执行 1 个事务。

在 foreach 循环中构建整个 SQL 语句，然后在 foreach 完成后执行一次。

```
INSERT INTO tbl_name (a,b) VALUES(1,2),(4,5),(7,8); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T12:21:48.190

与其运行多个插入语句，不如构建一个 INSERT 语句，然后只运行一个语句。例如见下文。

```
$query = "INSERT INTO solucion ( rid, pid) VALUES";

foreach($questions as $value) {
    $idanswer = ($answers[$value[pid]]) ? $answers[$value[pid]] : 0;
    $idquestion = $value[pid];
    $query .= " ( '$idanswer ', '$idquestion '),";
}

$query = rtrim($query, ",").";";

$db - > query($sql); 
```

# c# - GridView 中的验证不适用于 EditItemTemplate 中的 TextBox

> ID：15547207
> 
> 赞同：2
> 
> 时间：2013-03-21T12:13:00.017
> 
> 标签：c#, asp.net, gridview

我正在尝试为控件中`RegularExpressionValidator`的文本框添加一个。`EditItemTemplate``GridView`

当用户点击“更新”时，如果输入错误，验证器工作（错误信息可见）。但是，在`OnRowUpdating`方法上，我有`Page.IsValid==true`. 为什么会这样？

ASP 代码：

```
<asp:GridView ID="dgvsaldoPV" runat="server" Visible="False" AutoGenerateColumns="False" 
        ShowFooter="True" AllowSorting="True" OnSorting="TaskGridView_SortingSaldoPV" OnRowEditing="gv1_RowEditing" 
        OnRowUpdating="gv1_RowUpdating" onRowCancelingEdit="gv1_RowCancelingEdit" DataKeyNames="ID_CASSA">
        <AlternatingRowStyle BackColor="#FFFFCC" />
        <Columns>

            <asp:TemplateField HeaderText="Saldo" InsertVisible="False" SortExpression="SALDO" >
                <EditItemTemplate >
                    <asp:TextBox ID="txtsaldo" runat="server" validationgroup="saldo" Text='<%# Bind("SALDO") %>'></asp:TextBox>
                    <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" ControlToValidate="txtsaldo"
                ErrorMessage="Inserisci valori numerici, usare ',' per i decimali" ValidationExpression="^\d*\,?\d+$" validationgroup="saldo"
                    ForeColor="Red" ></asp:RegularExpressionValidator>
                </EditItemTemplate>
                <ItemTemplate >
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("SALDO") %>'></asp:Label>
                </ItemTemplate>
                <ItemStyle CssClass="style11"    />
            </asp:TemplateField>

            <asp:CommandField ShowEditButton="True" ShowHeader="false" HeaderStyle-CssClass="headerstyle1"/>
        </Columns>
        <FooterStyle BackColor="#CC0000" ForeColor="White" />
        <HeaderStyle CssClass="headerstyle" />
        <RowStyle HorizontalAlign="Center" VerticalAlign="Middle"/>

    </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:32:19.900

试着打电话

```
Page.Validate(); 
```

在您的`GridView.RowUpdating`活动开始时。这将强制检查所有服务器端验证器。我希望那时已经调用了它，但听起来情况并非如此。

如果您`GridView`正在`UpdatePanel`执行部分 PostBack，或者导致 PostBack 触发的控件未设置为导致验证（它的`.CausesValidation`属性设置为 false），那么我可以想象该`Page.IsValid`属性尚未正确填充。

# sql - 修改 SQL Server 中的默认值

> ID：15547210
> 
> 赞同：52
> 
> 时间：2013-03-21T12:13:05.757
> 
> 标签：sql, sql-server

我正在尝试使用 SQL Server 2008 中的 SQL 语句更改列的默认值。我在很多地方都发现了如何在创建表/添加列时设置默认值，但不知道如何设置它/一旦该列已经存在，修改它。

这就是我可以用来设置它的添加：

```
ALTER TABLE MyTable ADD MyColumn int NOT NULL DEFAULT 0 
```

这有效，但如果我稍后尝试修改它：

```
ALTER TABLE MyTable ALTER COLUMN MyColumn int NOT NULL DEFAULT -1
ALTER TABLE MyTable ALTER COLUMN MyColumn int NOT NULL SET DEFAULT -1 
```

这些都不是语法正确的，而且我找不到任何语法来做我在任何地方假装的事情。我提供的唯一选择是添加一个新列，从前一列复制值，然后删除前一列和新列以进行更改，但这对我来说似乎不正确。

有没有办法只用一个简单的句子做我想做的事？

谢谢。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-03-21T12:20:46.287

当您添加具有默认值的列时，会发生什么情况是创建了一个默认约束：

```
create table _temp 
( x int default 1) 
```

`sp_help _temp`结果：

```
constraint_type constraint_name
DEFAULT on column x DF___temp__x__5A3B20F9 
```

所以列定义中的 default 子句只是创建约束的捷径；默认值不是列的固有属性。如果要修改已存在列的默认值，则必须先删除约束：

```
alter table _temp drop constraint DF___temp__x__5A3B20F9 
```

然后创建一个新的默认约束：

```
alter table _temp add constraint DF_temp_x default 2 for x 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2014-04-08T11:42:04.030

```
DECLARE @Command nvarchar(max), @ConstraintName nvarchar(max), @TableName nvarchar(max), @ColumnName nvarchar(max)
SET @TableName = 'TableName'
SET @ColumnName = 'ColumnName'
SELECT @ConstraintName = name
    FROM sys.default_constraints
    WHERE parent_object_id = object_id(@TableName)
        AND parent_column_id = columnproperty(object_id(@TableName), @ColumnName, 'ColumnId')

SELECT @Command = 'ALTER TABLE ' + @TableName + ' DROP CONSTRAINT ' + @ConstraintName  
EXECUTE sp_executeSQL @Command

SELECT @Command = 'ALTER TABLE ' + @TableName + ' ADD CONSTRAINT ' + @ConstraintName + ' DEFAULT 1 FOR ' + @ColumnName 
EXECUTE sp_executeSQL @Command 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-03-21T12:19:48.387

您应该删除 DEFAULT 约束并添加一个像这样的新约束

```
alter table Mytable
drop constraint <constraint name>
go
alter table MyTable
add constraint df_MyTable_MyColumn default -1 for MyColumn
go 
```

使用 sp_helpconstraint MyTable 获取约束名称

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-21T12:20:14.433

`DEFAULT`是一个约束。你想用`ALTER TABLE ADD CONSTRAINT`.

```
ALTER TABLE MyTable
ADD CONSTRAINT <constraint name>
DEFAULT -1 FOR MyColumn 
```

您需要先删除当前约束，例如：

```
ALTER TABLE MyTable
DROP CONSTRAINT <constraint name> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-25T15:57:16.497

如果列不存在，则为其添加默认值

```
DECLARE @defaultLock VARCHAR(100)
SELECT @defaultLock = (SELECT object_definition(default_object_id) AS definition FROM sys.columns WHERE name = 'Lock' AND object_id = object_id('dbo.Positions'))
    IF @defaultLock IS NULL
        ALTER TABLE Positions ADD DEFAULT (0) FOR Lock 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-27T11:18:26.073

我不得不更改现有数据库中许多字段的默认约束，因此希望一键完成。希望这可以帮助...

```
select 'USE ' + DB_NAME()
SELECT 'ALTER TABLE '+ src3.name + '.' + src1.name +' drop constraint '+ src.name + '
ALTER TABLE ' + src3.name + '.' +  src1.name +' ADD CONSTRAINT '+ src.name + ' DEFAULT getutcdate() FOR ' + src2.name -- amend default constrint accordingly.
    FROM sys.tables src1
      inner join sys.schemas src3
        on src3.schema_id = src1.schema_id
      inner join sys.columns src2
        on src2.object_id = src1.object_id
      inner join sys.default_constraints src
        on src.parent_column_id = src2.column_id
           and src.parent_object_id = src1.object_id
    WHERE  (-- pick up existing constraint definition
            src.definition like '%getdate%'
             or src.definition like '%current\_timestamp%' escape '\'
            )
            and src1.type = 'U'
order by  src3.name + '.' + src1.name 
```

显然，您需要修改查询并将输出复制到另一个选项卡以执行。

# android - 使用 3G 无线网络从 android 平板电脑访问端口 8080 上的 http 服务器

> ID：15547213
> 
> 赞同：1
> 
> 时间：2013-03-21T12:13:08.923
> 
> 标签：android

我正在开发一个 android 应用程序，它连接到端口 8080 上的 http 服务器。该应用程序在模拟器上运行良好。但是当我尝试从真正的平板设备上使用该应用程序时，我将无法访问 http 服务器。我使用了以下内容： - 两个设备都使用 3G 路由器连接到同一个无线网络。- android 应用程序使用 IP 地址 192.168.0.4 连接到 http 服务器

# java - 为报告设置数字格式模式以保留小数点后的所有数字

> ID：15547215
> 
> 赞同：2
> 
> 时间：2013-03-21T12:13:10.680
> 
> 标签：java, jasper-reports, ireport, number-formatting

我正在使用*iReport* 3.1.0 生成碧玉报告。

对于我的报告中的一个字段，我想设置一个 1000 分隔符模式。

此字段位于“*详细信息*”区域中，并显示小数点后具有不同位数的值。

所以，我想保留小数点后的所有数字。（我无法在模式中指定特定的位数）是否可以编写一个显示小数点后所有数字的数字格式模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:24:03.423

只需在格式模式中的小数点后放置*大量*的#。不会显示尾随零，因此只要模式中的 # 多于数据中的小数位，您将获得所有数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:51:02.440

所需字段的清晰模式:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:06:12.837

我不认为这是可能的。您必须指定小数点后的位数。

确定小数点后的最大可能位数并将模式设置为#,##0.######## 其中小数点后的# 数应等于小数点后的最大可能位数。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-21T12:40:28.167

1:- 启动 iReport 并打开报告。

2：- 选择要使用千位分隔符的字段，然后转到属性部分。

3：- 转到“模式”属性并在数字类别中选中千位分隔符复选框。

# python - 在 python 日期时间中处理月份

> ID：15547217
> 
> 赞同：3
> 
> 时间：2013-03-21T12:13:14.583
> 
> 标签：python, datetime, python-2.4

我有一个函数可以在提供的日期时间之前获取月份的开始：

```
def get_start_of_previous_month(dt):
    '''
    Return the datetime corresponding to the start of the month
    before the provided datetime.
    '''
    target_month = (dt.month - 1)
    if target_month == 0:
        target_month = 12
    year_delta = (dt.month - 2) / 12
    target_year = dt.year + year_delta

    midnight = datetime.time.min
    target_date = datetime.date(target_year, target_month, 1)
    start_of_target_month = datetime.datetime.combine(target_date, midnight)
    return start_of_target_month 
```

然而，它似乎非常复杂。任何人都可以提出一个更简单的方法吗？我正在使用 python 2.4。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T12:17:05.587

使用本月初的*偏移*`timedelta(days=1)`量：

 *```
import datetime

def get_start_of_previous_month(dt):
    '''
    Return the datetime corresponding to the start of the month
    before the provided datetime.
    '''
    previous = dt.date().replace(day=1) - datetime.timedelta(days=1)
    return datetime.datetime.combine(previous.replace(day=1), datetime.time.min) 
```

`.replace(day=1)`返回当前月初的新日期，之后减去一天将保证我们在前一个月结束。然后我们再次使用相同的技巧来获得该月的第一*天*。

演示（肯定是在 Python 2.4 上）：

```
>>> get_start_of_previous_month(datetime.datetime.now())
datetime.datetime(2013, 2, 1, 0, 0)
>>> get_start_of_previous_month(datetime.datetime(2013, 1, 21, 12, 23))
datetime.datetime(2012, 12, 1, 0, 0) 
```*

# linux - 在linux机器上编译线程程序时出现“未定义引用”错误

> ID：15547232
> 
> 赞同：0
> 
> 时间：2013-03-21T12:14:21.963
> 
> 标签：linux, gcc, pthreads

嗨，我在线程中编写了一个简单的程序来创建 10 个线程并正常执行它们，但是当我在 linux 机器上编译代码时，它给出了以下错误.. ***/tmp/cc4swqyK.o: In function `main': threadcreate1.c:(.text+0x40): undefined reference to`pthread_create' threadcreate1.c:(. text+0x78): undefined reference to `pthread_join' collect2: ld 返回 1 exit status***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:16:05.877

您是否将其编译为“gcc -lpthread fileName.c”

您必须包含头文件 pthread.h

```
#include <pthread.h> 
```

并在编译时使用`-l`gcc 的 ' ' 选项指定要链接的库。

# audio - 水平并排显示两个视频并导出为一个视频

> ID：15547239
> 
> 赞同：2
> 
> 时间：2013-03-21T12:14:27.750
> 
> 标签：audio, video, ffmpeg, avisynth

我想要实现的目标：以编程方式（使用某种脚本）将两个不同的视频组合到一个视频中，其中视频并排显示，两个视频的声音同时播放。

我发现至少有两种方法可以并排显示两个视频，但在每一种方法中，我都有一个不同的问题，这使得该过程难以完成：

1.  **Avisyth 和 Avs2Avi：**
    Avisyth 确实让这个过程变得简单。使用这样一个简单的 Avisyth 脚本，您应该能够并排播放两个视频：

    `video1=AVISource("d:\file1.avi")
    video2=AVISource("d:\file2.avi")
    StackHorizontal(video1,video2)`

    可以使用 avs2avi 创建新的输出文件。
    这里的问题是我什至无法使用avisyth 播放一个avi 文件，因为我收到“AviSource 无法找到fourcc xvid 的解压缩器”消息。我搜索了该问题的解决方案，但没有任何帮助。GSpot 说我拥有所需的所有编解码器，但我似乎无能为力。因为我无法播放真实视频，所以我不知道最终视频是否会播放两个视频中的声音。Avisyth 安装正确，我能够运行以下脚本 StackHorizo​​ntal(version ,version)。

2.  **ffmpeg**
    就像一个有两个视频和最终文件的魅力但是我没有从两个视频中得到声音，而只有第一个。我发现从第二个视频中添加声音的解决方案是在命令行中使用 libfaac，如下所示：

`ffmpeg.exe -i video1.mp4 -vf "[in] scale=iw/2:ih/2, pad=2*iw:ih [left]; movie=video2.mp4, scale=iw/3:ih/3 [right]; [left][right] overlay=main_w/2:0 [out]" -c:a libfaac -b:v 768k Output.mp4`

但我总是收到一个错误，即找不到编码器 libfaac。我下载了 libfaac.dll 但仍然没有结果。

有没有解决这些问题的方法？是否有另一种方法可以通过并排播放的两个视频以编程方式制作一个视频？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:55:37.927

由于使用 Avisynth 对您来说似乎没有问题，您可以只使用另一个源过滤器。[FFMS2](https://code.google.com/p/ffmpegsource/)应该非常符合要求 - 它是完全独立的，不依赖于任何系统解码器，如 AviSource 所依赖的。

# oracle - 执行匿名程序时出错

> ID：15547241
> 
> 赞同：0
> 
> 时间：2013-03-21T12:14:30.250
> 
> 标签：oracle, plsql

我收到错误，因为 **ORA-06550：第 21 行，第 0 列：PLS-00103：在预期以下情况之一时遇到符号“文件结尾”：开始函数杂注过程**

在执行程序时，请找到下面的程序

```
declare
procedure p2;
procedure p3;
          procedure p1
                    is
                      begin
                           dbms_output.put_line('CAlling procedure P1');
                           p2;
                 end p1;
           procedure p2 is
                       begin
                            dbms_output.put_line('CAlling procedure P2');
                           p3;
                  end p2;
           procedure p3 is
                       begin
                            dbms_output.put_line('CAlling procedure P3');
                   end p3; 
```

请帮我解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:41:12.057

```
declare
   procedure p2;
   procedure p3;
   procedure p1 is
   begin
      dbms_output.put_line('CAlling procedure P1');
      p2;
   end p1;
   procedure p2 is
   begin
      dbms_output.put_line('CAlling procedure P2');
      p3;
   end p2;
   procedure p3 is
   begin
      dbms_output.put_line('CAlling procedure P3');
   end p3;
begin
   p1;
end;                   
/ 
```

# android - 使用图表Android旋转图表文本

> ID：15547243
> 
> 赞同：1
> 
> 时间：2013-03-21T12:14:34.853
> 
> 标签：android, pie-chart

我需要你的专业知识来解决这个问题。我已经使用下面给出的代码来绘制饼图并在标志“bisSmart”设置为 true 时旋转它。一切都很好，除了一个问题。

我想用它的弧移动文本。但问题是，在移动文本时，它会出现在图表上。我想从饼图外部移动文本。请帮助我摆脱这个问题。提前谢谢。这是代码。

```
 public class PieChart extends ViewGroup
    {
        private List<Item> mData = new ArrayList<Item>();
        private float mTotal = 0.0f;
        private RectF mPieBounds = new RectF();
        private Paint mPiePaint;
        private Paint mTextPaint;
        private Paint mShadowPaint;
        private boolean mShowText = false;
        private float mTextX = 0.0f;
        private float mTextY = 0.0f;
        private float mTextWidth = 0.0f;
        private float mTextHeight = 0.0f;
        private int mTextPos = TEXTPOS_LEFT;
        private float mHighlightStrength = 1.15f;
        private float mPointerRadius = 2.0f;
        private float mPointerX;
        private float mPointerY;
        private int mPieRotation;
        private int margin = 0;
        private OnCurrentItemChangedListener mCurrentItemChangedListener = null;
    private int mTextColor;
        private PieView mPieView;
        private Scroller mScroller;
        private ValueAnimator mScrollAnimator;
        private GestureDetector mDetector;
        private PointerView mPointerView;
        private int mCurrentItemAngle;
    private int mCurrentItem = 0;
        private boolean mAutoCenterInSlice;
        private ObjectAnimator mAutoCenterAnimator;
        private RectF mShadowBounds = new RectF();
        private Context cntxPie;
        float rotatedangle = (float) 0.0;
        public static final int TEXTPOS_LEFT = 0;
        public static final int TEXTPOS_RIGHT = 1;
        public static final int FLING_VELOCITY_DOWNSCALE = 4;
        public static final int AUTOCENTER_ANIM_DURATION = 250;
        boolean bisSmart;

        public interface OnCurrentItemChangedListener
            {
                void OnCurrentItemChanged(PieChart source, int currentItem);
            }
        public PieChart(Context context)
            {
                super(context);
                cntxPie = context;
                init();
            }

        public void isSmart(boolean bisSmart)
            {
                this.bisSmart = bisSmart;
            }

        public PieChart(Context context, AttributeSet attrs)
            {
                super(context, attrs);

                TypedArray a = context.getTheme().obtainStyledAttributes(attrs, R.styleable.PieChart, 0, 0);

                try
                    {
                        mShowText = a.getBoolean(R.styleable.PieChart_showText, false);
                        mTextY = a.getDimension(R.styleable.PieChart_labelY, 0.0f);
                        mTextWidth = a.getDimension(R.styleable.PieChart_labelWidth, 0.0f);
                        mTextHeight = a.getDimension(R.styleable.PieChart_labelHeight, 0.0f);
                        mTextPos = a.getInteger(R.styleable.PieChart_labelPosition, 0);
                        mTextColor = a.getColor(R.styleable.PieChart_labelColor, 0xff000000);
                        mHighlightStrength = a.getFloat(R.styleable.PieChart_highlightStrength, 1.0f);
                        mPieRotation = a.getInt(R.styleable.PieChart_pieRotation, 0);
                        mPointerRadius = a.getDimension(R.styleable.PieChart_pointerRadius, 2.0f);
                        mAutoCenterInSlice = a.getBoolean(R.styleable.PieChart_autoCenterPointerInSlice, false);
                    }
                finally
                    {
                        a.recycle();
                    }

                init();
            }

        public boolean getShowText()
            {
                return mShowText;
            }

        public void setShowText(boolean showText)
            {
                mShowText = showText;
                invalidate();
            }

        public float getTextY()
            {
                return mTextY;
            }

        public void setTextY(float textY)
            {
                mTextY = textY;
                invalidate();
            }

        public float getTextWidth()
            {
                return mTextWidth;
            }

        public void setTextWidth(float textWidth)
            {
                mTextWidth = textWidth;
                invalidate();
            }

        public float getTextHeight()
            {
                return mTextHeight;
            }

        public void setTextHeight(float textHeight)
            {
                mTextHeight = textHeight;
                invalidate();
            }

        public int getTextPos()
            {
                return mTextPos;
            }

        public void setTextPos(int textPos)
            {
                if (textPos != TEXTPOS_LEFT && textPos != TEXTPOS_RIGHT)
                    {
                        throw new IllegalArgumentException("TextPos must be one of TEXTPOS_LEFT or TEXTPOS_RIGHT");
                    }
                mTextPos = textPos;
                invalidate();
            }

        public float getHighlightStrength()
            {
                return mHighlightStrength;
            }

        public void setHighlightStrength(float highlightStrength)
            {
                if (highlightStrength < 0.0f)
                    {
                        throw new IllegalArgumentException("highlight strength cannot be negative");
                    }
                mHighlightStrength = highlightStrength;
                invalidate();
            }

        public float getPointerRadius()
            {
                return mPointerRadius;
            }

        public void setPointerRadius(float pointerRadius)
            {
                mPointerRadius = pointerRadius;
                invalidate();
            }

        public int getPieRotation()
            {
                return mPieRotation;
            }

        public void setPieRotation(int rotation)
            {
                rotation = (rotation % 360 + 360) % 360;
                mPieRotation = rotation;
                mPieView.rotateTo(rotation);

                calcCurrentItem();
            }

        public int getCurrentItem()
            {
                return mCurrentItem;
            }

        public void setCurrentItem(int currentItem)
            {
                setCurrentItem(currentItem, true);
            }

        private void setCurrentItem(int currentItem, boolean scrollIntoView)
            {
                mCurrentItem = currentItem;
                if (mCurrentItemChangedListener != null)
                    {
                        mCurrentItemChangedListener.OnCurrentItemChanged(this, currentItem);
                    }
                if (scrollIntoView)
                    {
                        centerOnCurrentItem();
                    }
                invalidate();
            }

        public void setOnCurrentItemChangedListener(OnCurrentItemChangedListener listener)
            {
                mCurrentItemChangedListener = listener;
            }

        public int addItem(String label, double value, int color)
            {
                Item it = new Item();
                it.mLabel = label;
                it.mColor = color;
                it.mValue = value;

                it.mHighlight = Color.argb(0xff, Math.min((int) (mHighlightStrength * (float) Color.red(color)), 0xff),
                        Math.min((int) (mHighlightStrength * (float) Color.green(color)), 0xff),
                        Math.min((int) (mHighlightStrength * (float) Color.blue(color)), 0xff));
                mTotal += value;

                mData.add(it);

                onDataChanged();

                return mData.size() - 1;
            }

        @Override
        public boolean onTouchEvent(MotionEvent event)
            {
                if (bisSmart)
                    {

                        boolean result = mDetector.onTouchEvent(event);

                        if (!result)
                            {
                                if (event.getAction() == MotionEvent.ACTION_UP)
                                    {

                                        stopScrolling();
                                        result = true;
                                    }
                            }
                        return result;
                    }
                return false;
            }

        @Override
        protected void onLayout(boolean changed, int l, int t, int r, int b)
            {

            }

        @Override
        protected void onDraw(Canvas canvas)
            {
                super.onDraw(canvas);
                canvas.drawColor(Color.TRANSPARENT);
                // Draw the shadow
                canvas.drawOval(mShadowBounds, mShadowPaint);

                // Draw the label text
                if (getShowText())
                    {
                        canvas.drawText(mData.get(mCurrentItem).mLabel, mTextX + (mTextX / 2), getHeight() / 2, mTextPaint);
                    }

                if (Build.VERSION.SDK_INT < 11)
                    {
                        tickScrollAnimation();
                        if (!mScroller.isFinished())
                            {
                                postInvalidate();
                            }
                    }
            }

        @Override
        protected int getSuggestedMinimumWidth()
            {
                return (int) mTextWidth * 2;
            }

        @Override
        protected int getSuggestedMinimumHeight()
            {
                return (int) mTextWidth;
            }

        @Override
        protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
            {
                // Try for a width based on our minimum
                int minw = getPaddingLeft() + getPaddingRight() + getSuggestedMinimumWidth();

                int w = Math.max(minw, MeasureSpec.getSize(widthMeasureSpec));

                // Whatever the width ends up being, ask for a height that would let the pie
                // get as big as it can
                int minh = (w - (int) mTextWidth) + getPaddingBottom() + getPaddingTop();
                int h = Math.min(MeasureSpec.getSize(heightMeasureSpec), minh);

                setMeasuredDimension(w, h);
            }

        @Override
        protected void onSizeChanged(int w, int h, int oldw, int oldh)
            {
                super.onSizeChanged(w, h, oldw, oldh);

                float xpad = (float) (getPaddingLeft() + getPaddingRight());
                float ypad = (float) (getPaddingTop() + getPaddingBottom());

                // Account for the label
                if (mShowText)
                    xpad += mTextWidth;

                float ww = (float) w - xpad;
                float hh = (float) h - ypad;

                float diameter = Math.min(ww, hh);
                mPieBounds = new RectF(0.0f, 0.0f, diameter, diameter);
                mPieBounds.offsetTo(getPaddingLeft(), getPaddingTop());

                mPointerY = mTextY - (mTextHeight / 2.0f);
                float pointerOffset = mPieBounds.centerY() - mPointerY;

                mTextPaint.setTextAlign(Paint.Align.LEFT);
                mTextX = mPieBounds.right;

                if (pointerOffset < 0)
                    {
                        pointerOffset = -pointerOffset;
                        mCurrentItemAngle = 360;// 360;//315
                    }
                else
                    {
                        mCurrentItemAngle = 0;// 45
                    }
                mPointerX = mPieBounds.centerX() + pointerOffset;
                // }

                mShadowBounds = new RectF(mPieBounds.left + 10, mPieBounds.bottom + 10, mPieBounds.right - 10, mPieBounds.bottom + 20);

                if (bisSmart)
                    mPieView.layout((int) mPieBounds.left, (int) mPieBounds.top, (int) mPieBounds.right, (int) mPieBounds.bottom);
                else
                    mPieView.layout((int) mPieBounds.left - 40, (int) mPieBounds.top, (int) mPieBounds.right + 60, (int) mPieBounds.bottom);

                mPieView.setPivot(mPieBounds.width() / 2, mPieBounds.height() / 2);

                onDataChanged();
            }

        private void calcCurrentItem()
            {

                // mCurrentItemAngle=-45;
                int pointerAngle = (mCurrentItemAngle + 360 + mPieRotation) % 360;
                for (int i = 0; i < mData.size(); ++i)
                    {
                        Item it = mData.get(i);
                        if (it.mStartAngle <= pointerAngle && pointerAngle <= it.mEndAngle)
                            {
                                if (i != mCurrentItem)
                                    {
                                        setCurrentItem(i, false);
                                    }
                                break;
                            }
                    }
            }

        private void onDataChanged()
            {
                // When the data changes, we have to recalculate
                // all of the angles.
                int currentAngle = 0;
                int count = 0;

                for (Item it : mData)
                    {
                        count++;
                        it.mStartAngle = currentAngle;

                        if (count == mData.size())
                            it.mEndAngle = 360;
                        else
                            it.mEndAngle = (int) ((float) currentAngle + it.mValue * 360.0f / mTotal);

                        currentAngle = it.mEndAngle;

                        it.mShader = new SweepGradient(mPieBounds.width() / 2.0f, mPieBounds.height() / 2.0f, new int[]
                            { it.mHighlight, it.mHighlight, it.mColor, it.mColor, }, new float[]
                            { 0, (float) (360 - it.mEndAngle) / 360.0f, (float) (360 - it.mStartAngle) / 360.0f, 1.0f });
                    }
                calcCurrentItem();
                onScrollFinished();
            }

        private void init()
            {

                setLayerToSW(this);

                // Set up the paint for the label text
                mTextPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
                mTextPaint.setColor(mTextColor);
                if (mTextHeight == 0)
                    {
                        mTextHeight = mTextPaint.getTextSize();
                    }
                else
                    {
                        mTextPaint.setTextSize(mTextHeight);
                    }

                // Set up the paint for the pie slices
                mPiePaint = new Paint(Paint.ANTI_ALIAS_FLAG);
                mPiePaint.setStyle(Paint.Style.FILL);
                mPiePaint.setTextSize(mTextHeight);

                // Set up the paint for the shadow
                mShadowPaint = new Paint(0);
                mShadowPaint.setColor(0xff101010);
                mShadowPaint.setMaskFilter(new BlurMaskFilter(8, BlurMaskFilter.Blur.NORMAL));

                mPieView = new PieView(getContext());
                mPieView.measure(800, 800);

                addView(mPieView);
                mPieView.rotateTo(mPieRotation);

                if (Build.VERSION.SDK_INT >= 11)
                    {
                        mAutoCenterAnimator = ObjectAnimator.ofInt(PieChart.this, "PieRotation", 0);

                        // Add a listener to hook the onAnimationEnd event so that we can do
                        // some cleanup when the pie stops moving.
                        mAutoCenterAnimator.addListener(new Animator.AnimatorListener()
                            {
                                public void onAnimationStart(Animator animator)
                                    {
                                    }

                                public void onAnimationEnd(Animator animator)
                                    {
                                        mPieView.decelerate();
                                    }

                                public void onAnimationCancel(Animator animator)
                                    {
                                    }

                                public void onAnimationRepeat(Animator animator)
                                    {
                                    }
                            });
                    }

                // Create a Scroller to handle the fling gesture.
                if (Build.VERSION.SDK_INT < 11)
                    {
                        mScroller = new Scroller(getContext());
                    }
                else
                    {
                        mScroller = new Scroller(getContext(), null, true);
                    }

                if (Build.VERSION.SDK_INT >= 11)
                    {
                        mScrollAnimator = ValueAnimator.ofFloat(0, 1);
                        mScrollAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener()
                            {
                                public void onAnimationUpdate(ValueAnimator valueAnimator)
                                    {
                                        tickScrollAnimation();
                                    }
                            });
                    }

                mDetector = new GestureDetector(PieChart.this.getContext(), new GestureListener());

                mDetector.setIsLongpressEnabled(false);

                if (this.isInEditMode())
                    {

                    }

            }

        private void tickScrollAnimation()
            {
                if (!mScroller.isFinished())
                    {
                        mScroller.computeScrollOffset();
                        setPieRotation(mScroller.getCurrY());
                    }
                else
                    {
                        if (Build.VERSION.SDK_INT >= 11)
                            {
                                mScrollAnimator.cancel();
                            }
                        onScrollFinished();
                    }
            }

        private void setLayerToSW(View v)
            {
                if (!v.isInEditMode() && Build.VERSION.SDK_INT >= 11)
                    {
                        setLayerType(View.LAYER_TYPE_SOFTWARE, null);
                    }
            }

        private void setLayerToHW(View v)
            {
                if (!v.isInEditMode() && Build.VERSION.SDK_INT >= 11)
                    {
                        setLayerType(View.LAYER_TYPE_HARDWARE, null);
                    }
            }

        private void stopScrolling()
            {
                mScroller.forceFinished(true);
                if (Build.VERSION.SDK_INT >= 11)
                    {
                        mAutoCenterAnimator.cancel();
                    }

                onScrollFinished();
            }

        private void onScrollFinished()
            {
                if (mAutoCenterInSlice)
                    {
                        centerOnCurrentItem();
                    }
                else
                    {
                        mPieView.decelerate();
                    }
            }

        private void centerOnCurrentItem()
            {
                Item current = mData.get(getCurrentItem());
                int targetAngle = current.mStartAngle + (current.mEndAngle - current.mStartAngle) / 2;
                targetAngle -= mCurrentItemAngle;
                if (targetAngle < 90 && mPieRotation > 180)
                    targetAngle += 360;

                if (Build.VERSION.SDK_INT >= 11)
                    {
                        // Fancy animated version
                        mAutoCenterAnimator.setIntValues(targetAngle);
                        mAutoCenterAnimator.setDuration(AUTOCENTER_ANIM_DURATION).start();
                    }
                else
                    {
                        // Dull non-animated version
                        // mPieView.rotateTo(targetAngle);
                    }
            }

        private class PieView extends View
            {
                private PointF mPivot = new PointF();

                /**
                 * Construct a PieView
                 * 
                 * @param context
                 */
                public PieView(Context context)
                    {
                        super(context);
                        // this.setLayoutParams(new LayoutParams(300, 300));
                    }

                @Override
                protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
                    {
                        setMeasuredDimension(measureWidth(widthMeasureSpec), measureHeight(heightMeasureSpec));
                        // super.onMeasure(widthMeasureSpec, heightMeasureSpec);
                        super.onMeasure(800, 800);
                    }

                private int measureWidth(int measureSpec)
                    {
                        int preferred = 800;
                        return getMeasurement(measureSpec, preferred);
                    }

                private int measureHeight(int measureSpec)
                    {
                        int preferred = 800;
                        return getMeasurement(measureSpec, preferred);
                    }

                private int getMeasurement(int measureSpec, int preferred)
                    {
                        int specSize = MeasureSpec.getSize(measureSpec);
                        int measurement = 0;

                        switch (MeasureSpec.getMode(measureSpec))
                            {
                            case MeasureSpec.EXACTLY:
                                // This means the width of this view has been given.
                                measurement = specSize;
                                break;
                            case MeasureSpec.AT_MOST:
                                // Take the minimum of the preferred size and what
                                // we were told to be.
                                measurement = Math.min(preferred, specSize);
                                break;
                            default:
                                measurement = preferred;
                                break;
                            }

                        return 800;
                    }

                public void accelerate()
                    {
                        setLayerToHW(this);
                    }

                public void decelerate()
                    {
                        setLayerToSW(this);
                    }

                @Override
                protected void onDraw(Canvas canvas)
                    {
                        super.onDraw(canvas);

                        canvas.drawColor(Color.TRANSPARENT);

                        int left = 0 + margin;
                        int top = 0 + margin;
                        int right = 0 + getWidth();
                        int bottom = 0 + getHeight();

                        int mRadius = Math.min(Math.abs(right - left), Math.abs(bottom - top));
                        int radius = (int) (mRadius * 0.35 * 1.0);
                        float shortRadius = radius * 0.9f;
                        float longRadius = radius * 1.1f;

                        for (int i = 0; i < mData.size(); i++)
                            {
                                Item it = mData.get(i);
                                mPiePaint.setShader(it.mShader);

                                float fStartAngle = 360 - it.mEndAngle;
                                float fEndAngle = it.mEndAngle - it.mStartAngle;

                                canvas.drawArc(mBounds, fStartAngle, fEndAngle, true, mPiePaint);

                                Paint pntWhite = new Paint();
                                pntWhite.setAntiAlias(true);
                                pntWhite.setColor(Color.parseColor("#EFE7E7"));
                                pntWhite.setStyle(Style.STROKE);
                                if (bisSmart)
                                    pntWhite.setStrokeWidth(3);
                                else
                                    pntWhite.setStrokeWidth(1.5f);

                                canvas.drawArc(mBounds, fStartAngle, fEndAngle, true, pntWhite);

                                Paint pntBlack = new Paint();
                                // Center circle that does not rotate
                                // canvas.save();
                                pntBlack.setAntiAlias(true);
                                pntBlack.setStyle(Style.FILL);
                                pntBlack.setColor(Color.parseColor("#B5B5B5"));
                                if (bisSmart)
                                    canvas.drawCircle(getWidth() / 2, getHeight() / 2, 60, pntBlack);
                                else
                                    canvas.drawCircle(getWidth() / 2, getHeight() / 2, 30, pntBlack);

                                // Center circle that does not rotate
                                canvas.save();

                                if (bisSmart)
                                    {
                                        pntWhite.setStrokeWidth(2);
                                        canvas.drawCircle(getWidth() / 2, getHeight() / 2, 60, pntWhite);
                                    }
                                else
                                    {
                                        pntWhite.setStrokeWidth(1.5f);
                                        canvas.drawCircle(getWidth() / 2, getHeight() / 2, 30, pntWhite);
                                    }

                                canvas.rotate(-mPieRotation, getWidth() / 2, getHeight() / 2);
                                canvas.restore();
                            }
                        List<RectF> prevLabelsBounds = new ArrayList<RectF>();
                        for (int i = 0; i < mData.size(); i++)
                            {
                                Item it = mData.get(i);

                                float fStartAngle = 360 - it.mEndAngle;
                                float fEndAngle = it.mEndAngle - it.mStartAngle;

                                int color = Color.parseColor("#5A595A");

                                drawLabel(it.mLabel, prevLabelsBounds, getWidth() / 2, getHeight() / 2, shortRadius, longRadius, fStartAngle,
                                        fEndAngle, left, right, false, canvas, color);

                            }
                        prevLabelsBounds.clear();
                    }

                @Override
                protected void onSizeChanged(int w, int h, int oldw, int oldh)
                    {
                        if (bisSmart)
                            mBounds = new RectF(0 + 90, 0 + 90, w - 90, h - 90);
                        else
                            mBounds = new RectF(0 + 100, 0 + 50, w - 100, h - 50);
                    }

                RectF mBounds;

                public void rotateTo(float pieRotation)
                    {
                        rotatedangle = pieRotation;
                        if (Build.VERSION.SDK_INT >= 11)
                            {
                                setRotation(pieRotation);
                                invalidate();
                            }
                        else
                            {
                                invalidate();
                            }
                    }

                public void setPivot(float x, float y)
                    {
                        mPivot.x = x;
                        mPivot.y = y;
                        if (Build.VERSION.SDK_INT >= 11)
                            {
                                setPivotX(x);
                                setPivotY(y);
                            }
                        else
                            {
                                invalidate();
                            }
                    }
            }

        private class Item
            {
                public String mLabel;
                public double mValue;
                public int mColor;

                // computed values
                public int mStartAngle;
                public int mEndAngle;

                public int mHighlight;
                public Shader mShader;
            }

        private class GestureListener extends GestureDetector.SimpleOnGestureListener
            {
                @Override
                public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY)
                    {
                        // Set the pie rotation directly.
                        float scrollTheta = vectorToScalarScroll(distanceX, distanceY, e2.getX() - mPieBounds.centerX(),
                                e2.getY() - mPieBounds.centerY());
                        setPieRotation(getPieRotation() - (int) scrollTheta / FLING_VELOCITY_DOWNSCALE);

                        return true;
                    }

                @Override
                public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY)
                    {
                        // Set up the Scroller for a fling
                        float scrollTheta = vectorToScalarScroll(velocityX, velocityY, e2.getX() - mPieBounds.centerX(),
                                e2.getY() - mPieBounds.centerY());
                        mScroller.fling(0, (int) getPieRotation(), 0, (int) scrollTheta / FLING_VELOCITY_DOWNSCALE, 0, 0, Integer.MIN_VALUE,
                                Integer.MAX_VALUE);

                        // Start the animator and tell it to animate for the expected duration of the fling.
                        if (Build.VERSION.SDK_INT >= 11)
                            {
                                mScrollAnimator.setDuration(mScroller.getDuration());
                                mScrollAnimator.start();
                            }
                        return true;
                    }

                @Override
                public boolean onDown(MotionEvent e)
                    {
                        // The user is interacting with the pie, so we want to turn on acceleration
                        // so that the interaction is smooth.
                        mPieView.accelerate();
                        if (isAnimationRunning())
                            {
                                stopScrolling();
                            }
                        return true;
                    }
            }

        private boolean isAnimationRunning()
            {
                return !mScroller.isFinished() || (Build.VERSION.SDK_INT >= 11 && mAutoCenterAnimator.isRunning());
            }

        private static float vectorToScalarScroll(float dx, float dy, float x, float y)
            {

                float l = (float) Math.sqrt(dx * dx + dy * dy);
                float crossX = -y;
                float crossY = x;

                float dot = (crossX * dx + crossY * dy);
                float sign = Math.signum(dot);

                return l * sign;
            }

        protected void drawLabel(String labelText, List<RectF> prevLabelsBounds, int centerX, int centerY, float shortRadius, float longRadius,
                float currentAngle, float angle, int left, int right, boolean line, Canvas mcanvas, int txtcolor)
            {
                // line=true;
                Paint pntText = new Paint();
                pntText.setAntiAlias(true);
                pntText.setColor(txtcolor);
                if (bisSmart)
                    pntText.setTextSize(15);
                else
                    pntText.setTextSize(10);

                double rAngle = Math.toRadians(90 - (currentAngle + angle / 2));
                double sinValue = Math.sin(rAngle);
                double cosValue = Math.cos(rAngle);
                int x1 = Math.round(centerX + (float) (shortRadius * sinValue));
                int y1 = Math.round(centerY + (float) (shortRadius * cosValue));
                int x2 = Math.round(centerX + (float) (longRadius * sinValue));
                int y2 = Math.round(centerY + (float) (longRadius * cosValue));

                float size = 20;
                float extra = Math.max(size / 2, 10);
                pntText.setTextAlign(Align.CENTER);
                if (x1 > x2)
                    {
                        extra = -extra;
                    }

                float xLabel = x2 + extra;
                float yLabel = y2;
                // labelText = getFitText(labelText, width, paint);
                float widthLabel = pntText.measureText(labelText);
                boolean okBounds = false;
                while (!okBounds && line)
                    {
                        boolean intersects = false;
                        int length = prevLabelsBounds.size();
                        for (int j = 0; j < length && !intersects; j++)
                            {
                                RectF prevLabelBounds = prevLabelsBounds.get(j);
                                if (prevLabelBounds.intersects(xLabel, yLabel, xLabel + widthLabel, yLabel + size))
                                    {
                                        intersects = true;
                                        yLabel = Math.max(yLabel, prevLabelBounds.bottom);
                                    }
                            }
                        okBounds = !intersects;
                    }

                if (line)
                    {
                        y2 = (int) (yLabel - size / 2);
                        mcanvas.drawLine(x1, y1, x2, y2, pntText);
                    }
                else
                    {
                        pntText.setTextAlign(Align.CENTER);
                    }
                /**
                 * my code
                 */
                // draw bounding rect before rotating text
                Rect rect = new Rect();
                pntText.getTextBounds(labelText, 0, labelText.length(), rect);
                mcanvas.save();

                // rotate the canvas on center of the text to draw

                mcanvas.rotate(-mPieRotation, xLabel, yLabel);

                if (bisSmart)
                    {
                        mcanvas.drawText(labelText, xLabel, yLabel, pntText);
                        /*
                         * if (x1 > x2) { //pntText.setTextAlign(Align.RIGHT); mcanvas.drawText(labelText, xLabel-(widthLabel / 3) , yLabel, pntText); } else { //pntText.setTextAlign(Align.LEFT);
                         * mcanvas.drawText(labelText, xLabel + (widthLabel / 3), yLabel, pntText); }
                         */
                    }
                else
                    {
                        if (xLabel < centerX)
                            {

                                mcanvas.drawText(labelText, xLabel - (widthLabel / 3), yLabel, pntText);
                            }
                        else
                            {
                                mcanvas.drawText(labelText, xLabel + (widthLabel / 3), yLabel, pntText);
                            }
                    }

                mcanvas.restore();
                if (line)
                    {
                        prevLabelsBounds.add(new RectF(xLabel, yLabel, xLabel + widthLabel, yLabel + size));
                    }

            }
    } 
```

# variables - 从注册表中读取和值并连接并最终分配给 wix bootstrapper 中的变量

> ID：15547244
> 
> 赞同：1
> 
> 时间：2013-03-21T12:14:38.843
> 
> 标签：variables, wix, string-concatenation, bootstrapper

我想在安装后立即启动应用程序。我的代码如下

```
 <Variable Name="LaunchTarget" Value="C:\ProgramFiles\MySetup\MyExe.exe" /> 
```

如果用户在安装过程中更改了安装目录，则此代码将不起作用。

我的想法是在安装过程中将目录保留在注册表项中（例如`C:\ProgramFile\UserGiverName`），并且在引导程序中想要读取此值并使用此注册表项值添加 exe 名称，然后将该值分配给`LaunchTarget`变量。

欢迎对此提出任何好的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:11:44.533

如果您编写自定义引导程序应用程序，则可以执行您所描述的操作。但是，wixstdba 中没有内置任何东西可以在应用链*后读取注册表。*我猜您使用的是 wixstdba，因为它内置了 LaunchTarget 的概念。

为了解决这个问题，我建议使用一个变量来存储安装文件夹（也许调用它`InstallFolder`）并通过一个`MsiProperty`元素将该值从 wixstdba 传递到 .msi 文件。就像是：

```
<!-- Default InstallFolder to something -->
<Variable Name='InstallFolder' Value='[ProgramFilesFolder]MySetup' />

<!-- Pass InstallFolder to the MSI -->
<MsiPackage ...>
   <MsiProperty Name='INSTALLFOLDER' Value='[InstallFolder]' />
</MsiPackage> 
```

然后您可以将 LaunchTarget 设置为：

```
<Variable Name='LaunchTarget' Value='[InstallFolder]\MyExe.exe' /> 
```

# sql-server-2008 - 使用TSQL随机选择记录总和的百分比

> ID：15547246
> 
> 赞同：0
> 
> 时间：2013-03-21T12:14:43.823
> 
> 标签：sql-server-2008, tsql

我有一个包含道路参考号和道路长度的表格，其中包含列`RoadID (int)`和`RoadLength (int)`.

大约有 3000 行。使用 T-SQL，我需要提取随机选择的道路参考及其长度，其中长度之和为表中所有道路总长度的 5%。这是针对随机选择道路的年度道路调查。

我正在对 SQL Server 2008 数据库使用 T-SQL。[从这篇文章http://www.sqlservercentral.com/Forums/Topic793008-149-1.aspx](http://www.sqlservercentral.com/Forums/Topic793008-149-1.aspx)尝试了一些三角查询的变体，但在选择随机行时遇到了困难。我尝试使用`order by newID()`，但我的结果看起来不正确。

任何有关最有效方法的帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:39:19.877

凌乱，但它似乎工作

```
--Create a temp table and add a random number column
CREATE TABLE #Roads(ROW_NUM int, RoadID int, RoadLength int)

--Populate from zt_Roads table and add a random number field
INSERT #Roads (ROW_NUM , RoadID , RoadLength )
                    (SELECT ROW_NUMBER() OVER (ORDER BY NEWID()),
                        RoadID,
                        RoadLength
                         from zt_Roads)
go

--Calcualte 5% of the TOTAL length of ALL roads
declare @FivePercent int
SELECT  @FivePercent =  ROUND(Sum(IsNULL((RoadLength ),0))*.01,0) from zt_Roads
print 'One Percent of total length = ' 
Print @FivePercent

--Select a random sample from temp table so that the total sample length 
--is no more than 5% of all roads in table
; with RandomSample as 
(SELECT top 100 percent 
    ROW_NUM, 
    RoadID, 
    RoadLength, 
    RoadLength+
        COALESCE((Select Sum(RoadLength) from #Roads b 
        WHERE b.ROW_NUM < a.ROW_NUM),0) as RunningTotal

        From #Roads  a
        ORDER BY ROW_NUM)

Select * from RandomSample WHERE RunningTotal <@FivePercent 
Drop table #Roads 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:00:45.590

我不确定您需要接近总数的 5%，但这应该让您非常接近：

```
CREATE TABLE #RoadReference (RoadID INT IDENTITY, RoadLength INT)

INSERT #RoadReference (RoadLength) VALUES (CAST(RAND() * 1000 AS INT))
GO 3000

DECLARE @SampleDistance int

SELECT @SampleDistance = SUM(RoadLength) * .05 FROM #RoadReference

SELECT @SampleDistance AS FivePercentOfTotalRoadLength

SELECT RoadID, SUM(RoadLength) RoadLength
FROM (
    SELECT TOP 5 PERCENT * 
    FROM #RoadReference ORDER BY NEWID()) DataSample
GROUP BY RoadID WITH ROLLUP
ORDER BY RoadLength 
```

# solr - 外部文件字段不起作用并引发空指针异常

> ID：15547247
> 
> 赞同：1
> 
> 时间：2013-03-21T12:14:44.823
> 
> 标签：solr, solr-query-syntax

我配置了我的外部文件字段配置，如下所示：

```
 < field name="idRank" type="idRankFile" indexed="true" stored="true" omitNorms="true" omitTermFreqAndPositions="true" valType="pfloat" />

    < fieldType name="idRankFile" keyField="id" defVal="10" stored="true" indexed="true" class="solr.ExternalFileField" valType="pfloat|float|tfloat" /> 
```

以下是我保存在名为 :external_idRank.txt 的文件中的值。这里的键是文档中 size 字段的值。

```
2938025 = 100.0 

4030380 = 115.0

9751 = 125.0

12738 = 135.0 

9752 = 145.0 
```

我使用以下查询来检索结果，并根据`idRank`值对其进行排序：

```
/solr/collection1/select/?&q=content:* _ val _:"sum(idRank,1)"&fl=size&rows=100 
```

但是，当我使用以下查询时，它会抛出如下异常，

> java.lang.NullPointerException at org.apache.solr.search.function.FileFloatSource.getFloats(FileFloatSource.java:273) at org.apache.solr.search.function.FileFloatSource.access$000(FileFloatSource.java:51) at org .apache.solr.search.function.FileFloatSource$2.createValue(FileFloatSource.java:147) 在 org.apache.solr.search.function.FileFloatSource$Cache.get(FileFloatSource.java:190) 在 org.apache.solr。 search.function.FileFloatSource.getCachedFloats(FileFloatSource.java:141) 在 org.apache.solr.search.function.FileFloatSource.getValues(FileFloatSource.java:84) 在 org.apache.lucene.queries.function.valuesource.MultiFloatFunction。 getValues(MultiFloatFunction.java:65) 在 org.apache.lucene.queries.function.FunctionQuery$AllScorer.(FunctionQuery.java:120) 在 org.apache.lucene.queries.function。FunctionQuery$FunctionWeight.scorer(FunctionQuery.java:95) at org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.java:323) at

我应该怎么做才能毫无例外地执行这个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:56:39.803

而不是您的文件内容是：

```
2938025 = 100.0

4030380 = 115.0

9751 = 125.0

12738 = 135.0

9752 = 145.0 
```

尝试完全按照[https://lucene.apache.org/solr/api-4_0_0-BETA/org/apache/solr/schema/ExternalFileField.html](https://lucene.apache.org/solr/api-4_0_0-BETA/org/apache/solr/schema/ExternalFileField.html)中指定的方式保存文件，例如：

```
2938025=100.0
4030380=115.0
9751=125.0
12738=135.0
9752=145.0 
```

还可以尝试将您的 fieldType 定义更改为：

`<fieldType name="idRankFile" keyField="id" defVal="10" class="solr.ExternalFileField" valType="float" />`

请注意，这`indexed`对`stored`外部文件字段没有意义。

# c# - 我正在使用 Winforms Testbox LostFocus 和 Textbox GotFocus

> ID：15547248
> 
> 赞同：0
> 
> 时间：2013-03-21T12:14:49.580
> 
> 标签：c#, winforms, event-handling

我尝试进行一些格式化，并且我的格式化结果工作正常。问题是它是一个带有 Textbox LostFocus 和 GotFocus 事件的循环。所以在调试中它会互相跳转，我不知道我做错了什么。

NUMBERS 的转换工作正常，这只是循环。所以当我用鼠标点击文本框时它开始：txtBase2

1.  它进入 txtBase2_GotFocus 事件行 8

2.  然后执行第 9 行

3.  然后跳转到 txtBase2_Lostfocus 方法到第 3 行

4.  然后再回到 txtBase2_GotFocus 方法到 lin8。

以上 4 个步骤仍在循环中......并且它不会停止我做错了什么？或者我没看到的东西是什么？

ps：转换是针对金额值完成的。

整个想法是：

*   当用户在文本框中输入金额并离开文本框时，其格式应为：1.245,12（带千位分隔符）

*   当用户离开文本框并且有数量/数字时，文本框数字的格式应为 1245,12（不带千位分隔符）

格式转换工作正常，但它与这两个事件循环在一起！！！！！！

Winforms、C#、.NET 4.5

请指教？

```
 protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);

        txtBase2.LostFocus += txtBase2_LostFocus;
        txtBase2.GotFocus += txtBase2_GotFocus;

    }

 private void txtBase2_LostFocus(object sender, EventArgs e)
    {
        Line 1:/ /when leaving the TEXTBOX
        Line 2: //input: 1234,56
        Line 3: double toDouble = Convert.ToDouble(txtBase2.Text);
        Line 4: string jj = toDouble.ToString("n", System.Globalization.CultureInfo.GetCultureInfo("NL-be"));
        //output: 1.234,56
        Line 5: txtBase2.Text = jj.ToString();
    }

    private void txtBase2_GotFocus(object sender, EventArgs e)
    {
        Line 6: //when Entering (get in) the TEXTBOX
        Line 7: //input 1.234,56
        Line 8: CultureInfo ci = CultureInfo.GetCultureInfo("NL-be");
        Line 9: string decimalFormatted = Convert.ToDecimal(txtBase2.Text, ci).ToString();
        //Output 1234,56
        Line 10: txtBase2.Text = decimalFormatted;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:01:19.220

我无法再测试这个，在我的机器上运行 Windows 8，但这段代码很危险。它*很*可能在 Windows 消息循环中非常脆弱的点抛出异常。EXE 项目的平台目标设置为 x86 的 64 位操作系统（Vista 和 Win7）出现问题。您可以通过在输出窗口中查看“第一次机会”异常通知来验证该理论。并使用 Debug + Exceptions 诊断它，勾选 CLR 异常的 Throw 复选框。或者通过将平台目标更改为 AnyCPU。

GotFocus 和 LostFocus 的另一个重要指标是查看设计器中的可见事件。选择文本框并单击“属性”窗口中的闪电图标。请注意 GotFocus 和 LostFocus**没有**在此处列出。Enter 和 Leave 事件是备选方案。

您将需要以不同的方式执行此操作。首先，您**必须**使用 Decimal.TryParse() 以便您可以看到转换失败，无一例外。这是预期的失败，用户可以轻松地将文本框留空或键入不是数字的字符串。当这种情况发生时，您当然不希望您的程序崩溃。

其次，使用 Validating 事件而不是 Leave 或 LostFocus 事件。您可以设置 e.Cancel = true 以防止焦点更改并强制用户输入有效数字。当 Text 不可转换时，使用 ErrorProvider 组件显示警告。如果你做对了，那么你就不再需要 Enter 事件了。检查[此答案](https://stackoverflow.com/a/15207773/17034)以获取执行此操作的 NumberBox 控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:26:37.687

这可能是您在处理程序中设置 Control.Text 属性的副作用。

您真的应该使用[Enter](http://msdn.microsoft.com/en-gb/library/system.windows.forms.control.enter.aspx)和[Leave](http://msdn.microsoft.com/en-gb/library/system.windows.forms.control.leave.aspx)事件。

[Control.GotFocus()](http://msdn.microsoft.com/en-gb/library/system.windows.forms.control.gotfocus.aspx)的文档有这样的说法：

> > 通常，GotFocus 和 LostFocus 事件仅在更新 UICues 或编写自定义控件时使用。相反，Enter 和 Leave 事件应用于除 Form 类之外的所有控件，Form 类使用 Activated 和 Deactivate 事件。

如果您使用`Enter`and`Leave`代替，您仍然会遇到问题吗？

另外，如果您注释掉设置 Control.Text 的代码，您是否会遇到问题？

# iphone - 如何在 ios 中加载 wfm（线框）

> ID：15547249
> 
> 赞同：0
> 
> 时间：2013-03-21T12:14:49.773
> 
> 标签：iphone, ios, objective-c, opengl-es, 3d

我的项目是在 iphone 中显示人脸，目前正在使用 opengles 和“.obj”文件来加载人体模型。但是对于每个人脸，我需要生成不同的“.obj”文件以使纹理映射准确。

在谷歌搜索中，我了解了[Candide](http://www.icg.isy.liu.se/candide/)，它有一个线框模型，它还有每个面部特征的坐标。所以如果我能得到这样的模型就好了。

所以我的问题是，如何将“wfm”文件导出到ios并获取模型？有人可以在这方面指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:25:21.573

您可以使用 wmf2svg 将 wmf 转换为 svg 文件。请参阅[http://code.google.com/p/wmf2svg/](http://code.google.com/p/wmf2svg/) 然后您可以使用paintcode 创建目标C 代码。请参阅[https://itunes.apple.com/us/app/paintcode/id507897570?mt=12](https://itunes.apple.com/us/app/paintcode/id507897570?mt=12)

# javascript - 如何使用 HTML5 在 ios6 中录制和播放语音

> ID：15547251
> 
> 赞同：1
> 
> 时间：2013-03-21T12:14:56.670
> 
> 标签：javascript, jquery, html, ios6

我们正在用 HTML5 和 Javascript 开发 Web 应用程序。

我们需要实现录音功能。我们使用 了[Wami Api](https://code.google.com/p/wami-recorder/)，但它不支持 iPad，因为它使用闪存进行录制。

您能告诉我在 Web 应用程序中在 iPad 中录制语音的最佳选择吗？

是否有任何 API 或库？

请建议..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:18:32.463

您可以使用 Phonegap 并使其成为应用程序 - 这样您就可以访问一些本机 API，例如：

[http://docs.phonegap.com/en/2.5.0/cordova_media_media.md.html#Media](http://docs.phonegap.com/en/2.5.0/cordova_media_media.md.html#Media)

```
var media = new Media();

media.startRecord(); 
```

[http://docs.phonegap.com/en/2.5.0/cordova_media_media.md.html#media.startRecord](http://docs.phonegap.com/en/2.5.0/cordova_media_media.md.html#media.startRecord)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:19:12.747

[Media Capture and Streams 规范](http://www.w3.org/TR/mediacapture-streams/)中描述了这方面的（草案）标准，但它是新的、实验性的，[iOS 6 不支持它](http://caniuse.com/#search=getUser)。

如果您想录制声音，那么我认为您将不得不查看本机应用程序而不是 Web 应用程序。

您可以继续在您的应用程序中使用 HTML 5/JavaScript，方法是使用向移动设备上的本机功能添加接口的各种包装 API 之一。例如，[来自 Apache Cordova 的 Media API](http://cordova.apache.org/docs/en/2.5.0/cordova_media_media.md.html#Media)或[Titanium 的 AudioRecorder](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Media.AudioRecorder)。

# php - 在mysql中搜索文本中的两个单词

> ID：15547252
> 
> 赞同：0
> 
> 时间：2013-03-21T12:15:03.657
> 
> 标签：php, mysql, search, text

我有一张包含推文数据的表格。我可以在推文数据中搜索单个单词，但是如何在每个句子中有效地搜索两个单词（它们的整个表格）。如果它出现在 Twitter 数据中，我很可能可以遍历所有单词并进行搜索，但是有更好的搜索方法吗？

```
Twitter Data: "#Mdluli General Bheki Cele, Hawks head Anwa Dramat, operational services's Godfrey Lebeya and Gauteng's Mzwandile Petros were implicated." 
```

我要返回的数据：

```
Bheki Cele
Anwa Dramat
Mzwandile Petros
Godfrey Lebeya 
```

谢谢

安德烈

# c++ - c++中模板文件和实现文件不能分开

> ID：15547254
> 
> 赞同：-3
> 
> 时间：2013-03-21T12:15:12.200
> 
> 标签：c++, templates

为什么我们不能在 C++ 中分离模板声明文件和实现文件。这背后的原因是什么。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:18:42.283

你可以这样做，但你不能把实现放到`.cpp`文件中。

原因很简单，当您使用模板时，它是实例化的替代类型。当您有单独的 cpp 文件时，您没有替代实现的类型参数，并且链接器找不到它们。

# c# - 如何获取包含特殊字符和其后数字的字符串的所有子字符串 - C#

> ID：15547258
> 
> 赞同：0
> 
> 时间：2013-03-21T12:15:16.240
> 
> 标签：c#

我有以下格式的字符串：

```
string s1 = "#1233 + #343 - #24311";
string s2 = "(#563*#534)/#2333"; 
```

对于每个字符串，我怎样才能获得所有形式为#NUMBER 的子字符串？

例如：`#1233`, `#343`,`#24311`

注意这些数字的位数不是固定的，也不一定用空格隔开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:23:25.193

正如 GSerg 注意到正则表达式一样，我只想展示实现：

```
MatchCollection matches = Regex.Matches(s1, @"#\d+");

string[] result = matches.Cast<Match>()
                         .Select(match => match.Value)
                         .ToArray();

Console.WriteLine( string.Join(Environment.NewLine, result) ); 
```

打印`s1`

```
#1233
#343
#24311 
```

# c# - 使用 C# 创建具有所有人权限的新文件夹

> ID：15547266
> 
> 赞同：0
> 
> 时间：2013-03-21T12:15:44.113
> 
> 标签：c#

我想在“C：\ Program Files”中创建一个具有所有人访问权限的新文件夹，这应该在所有操作系统中都可以解决。任何机构都可以为您提供使用 C# 实现上述场景的支持吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:18:36.437

以下是一些示例代码：

[http://www.redmondpie.com/applying-permissions-on-any-windows-folder-using-c/](http://www.redmondpie.com/applying-permissions-on-any-windows-folder-using-c/)

这可以通过在文件夹/文件上定义新的 ACL-s 来实现。

干杯

# search - 如何将 cmis 用于多个内容存储库？

> ID：15547269
> 
> 赞同：1
> 
> 时间：2013-03-21T12:15:59.113
> 
> 标签：search, integration, cmis

我想在有多个存储库（同一供应商或不同供应商）的情况下使用 CMIS，并且 CMIS 用于将所有这些存储库集成到一个公共平台上。

例如，在搜索场景中，CMIS 用于同时从所有存储库中获取内容。

任何想法？

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:46:47.797

Apache Chemistry OpenCMIS 提供了一个称为 CMIS Bridge 的组件。它充当客户端的 CMIS 服务器并将 CMIS 请求路由到后端系统。您可以将自己的业务逻辑放在转换、过滤、丰富和联合数据的桥梁上。但是，在这一点上，CMIS 桥是相当基本的，没有很好的文档记录。虽然，已经有使用此组件的商业产品。

# mysql - 是否可以将一列引用为多个外键？

> ID：15547276
> 
> 赞同：40
> 
> 时间：2013-03-21T12:16:10.957
> 
> 标签：mysql, sql, foreign-keys

我的表很少，我想将 PDF 表中的一列引用到其他多个表。 ![在此处输入图像描述](../Images/c553b9194046e75178e7b02b12c35137.png)

例如，如果 PDF 表格`select`输出如下所示：

```
ITEM_TYPE  ITEM_ID  QUANTITY

1          23       3
2          12       1 
```

它告诉我：

PDF 上面有 3 个 Car Wheel Product 和 1 个 Car Template Header；

我写了 SQL 代码，但不能正常工作：

```
CREATE TABLE `pdf_created` (
    `id` INT(10) UNSIGNED NOT NULL UNIQUE AUTO_INCREMENT,
    `pdf_id` INT(10) NOT NULL,
    `item_type` INT(3) UNSIGNED NOT NULL,
    `item_id` INT(10) UNSIGNED NOT NULL,
    `quantity` INT(3) NOT NULL,
    PRIMARY KEY (`id`),
    KEY `FK_pdf_id` (`pdf_id`),
    CONSTRAINT `FK_pdf_id` FOREIGN KEY (`pdf_id`) REFERENCES `pdf` (`id`),
    KEY `FK_item_type` (`item_type`),
    CONSTRAINT `FK_item_type` FOREIGN KEY (`item_type`) REFERENCES `item` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
    KEY `FK_item_id` (`item_id`),
    CONSTRAINT `FK_item_id` FOREIGN KEY (`item_id`) REFERENCES `product` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
    CONSTRAINT `FK_item_id` FOREIGN KEY (`item_id`) REFERENCES `service` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
    CONSTRAINT `FK_item_id` FOREIGN KEY (`item_id`) REFERENCES `header` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `header` (
    `id` INT(10) UNSIGNED NOT NULL UNIQUE AUTO_INCREMENT,
    `title` VARCHAR(255),
    `desc` VARCHAR(65535),
    PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `service` (
    `id` INT(10) UNSIGNED NOT NULL UNIQUE AUTO_INCREMENT,
    `desc` VARCHAR(65535) NOT NULL,
    `price` DECIMAL(5,2) NOT NULL,
    `active` INT(1) NOT NULL,
    PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `product` (
    `id` INT(10) UNSIGNED NOT NULL UNIQUE AUTO_INCREMENT,
    `category_id` INT(3) UNSIGNED NOT NULL,
    `symbol` VARCHAR(255),
    `desc` VARCHAR(65535), 
    `price` DECIMAL(5,2) NOT NULL,
    PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

有可能创造吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-21T13:59:24.027

不。

也就是说，您不能以这种方式创建外键约束。但是，您可以使用没有外键约束的外键。

所有外键都是另一个表（或同一个表中的另一个记录）主键的值，可以在连接中使用。事实上，如果您只需要使用连接的值，您可以引用主键以外的字段。

但是，外键约束告诉数据库强制执行规则，即对于表中的每个外键值，所引用的表都有一条记录，该记录作为它的主键。强制 PDF 表中的每个外键在*所有四个*表中都有一个主键对您不起作用。所以继续使用该字段来引用其他记录，但不要创建任何外键约束。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-03-11T08:12:22.100

你遇到的问题叫做`Polymorphic Associations`

请参考这个问题：[MySQL - 条件外键约束](https://stackoverflow.com/questions/2002985/mysql-conditional-foreign-key-constraints)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T12:22:04.930

这应该是可能的。一个潜在的问题是您的三个外键约束具有相同的名称。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T12:30:32.077

不，一个外键字段意味着引用一个表。

如果您确实有您描述的 FK 约束，那么 item_id 字段将在所有三个表中引用相同的主键值。三个不同表中所需的主键很可能具有不同的主键。

您想要的是一条记录（行）引用表产品、标题和服务中的记录。做到这一点的方法是使用三个不同的字段，每个外键一个。

我还注意到 Item 表具有所需*的三个外键*。您可以让 PDF 表有一个引用 Item 的字段，而 Item 中的记录引用其他三个表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-28T10:48:49.273

是的，它可能的外键约束名称应该像这样不同，主键和外键表列应该像这样具有相同的数据类型..

```
CREATE TABLE `neo_address_t` (
  `address_id` varchar(8) NOT NULL,
  `address_line_1` varchar(45) NOT NULL,
  `address_line_2` varchar(45) NOT NULL,
  `address_line_3` varchar(45) NOT NULL,
  `address_city` varchar(45) NOT NULL,
  `address_zipcode` varchar(45) NOT NULL,
  `address_state` varchar(45) NOT NULL DEFAULT 'Karnataka',
  `address_country` varchar(45) NOT NULL DEFAULT 'INDIA',
  `created_by` varchar(8) DEFAULT NULL,
  `created_on` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `last_modified_by` varchar(8) DEFAULT NULL,
  `last_modified_date` timestamp NULL DEFAULT '0000-00-00 00:00:00',
  `Refer_ID` int(11) DEFAULT NULL,
  `a_id` varchar(255) DEFAULT NULL,
  `referenceid` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`address_id`),
  KEY `hospital_ID_FK_idx` (`Refer_ID`),
  CONSTRAINT `Patient_ID_FK` FOREIGN KEY (`Refer_ID`) REFERENCES `neo_patient_t` (`patient_ID`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `hospital_ID_FK` FOREIGN KEY (`Refer_ID`) REFERENCES `neo_hospital_t` (`hospital_id`) ON DELETE NO ACTION ON UPDATE CASCADE,
  CONSTRAINT `staff_ID_FK` FOREIGN KEY (`Refer_ID`) REFERENCES `neo_staff_t` (`staff_ID`) ON DELETE NO ACTION ON UPDATE NO ACTION
)     
ENGINE=InnoDB DEFAULT CHARSET=utf8$$ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-08T06:29:49.193

从理论上讲，您不能在单个列上强制执行多个外键。或者，您可以使用验证多个表中存在的输入并执行必要操作的过程来强制执行此操作。请注意，该特定表上的所有操作都应由验证所需条件的过程完成，否则将导致违反完整性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-27T08:44:34.073

是的，这是可能的。即使这看起来有点奇怪。

首先，我想展示我的 MySQL Workbench 的屏幕截图，以证明它可以工作。

[![表格编辑器](../Images/856268e2d7bb7650e4e0fe8c9ab471e1.png)](https://i.stack.imgur.com/hKBWv.png)

...对于那些说“也许您忘记应用更改”的人...这是模式浏览器的屏幕截图：

[![模式浏览器](../Images/7ce520a788ce12687da7e228f3a9f7ea.png)](https://i.stack.imgur.com/jvzv1.png)

最后是带有一些示例数据的导出转储：

```
-- MySQL dump 10.13  Distrib 5.7.12, for Win64 (x86_64)
--
-- Host: localhost    Database: multiple_foreign_keys
-- ------------------------------------------------------
-- Server version   5.7.17-log

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `header`
--

DROP TABLE IF EXISTS `header`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `header` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `title` varchar(255) DEFAULT NULL,
  `desc` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=43 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `header`
--

LOCK TABLES `header` WRITE;
/*!40000 ALTER TABLE `header` DISABLE KEYS */;
INSERT INTO `header` VALUES (42,'Header','Test Header');
/*!40000 ALTER TABLE `header` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `pdf_created`
--

DROP TABLE IF EXISTS `pdf_created`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `pdf_created` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `pdf_id` int(10) NOT NULL,
  `item_type` int(3) unsigned NOT NULL,
  `item_id` int(10) unsigned NOT NULL,
  `quantity` int(3) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`),
  KEY `fk_item_to_product_idx` (`item_id`),
  CONSTRAINT `fk_item_to_header` FOREIGN KEY (`item_id`) REFERENCES `header` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_item_to_product` FOREIGN KEY (`item_id`) REFERENCES `product` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_item_to_service` FOREIGN KEY (`item_id`) REFERENCES `service` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `pdf_created`
--

LOCK TABLES `pdf_created` WRITE;
/*!40000 ALTER TABLE `pdf_created` DISABLE KEYS */;
INSERT INTO `pdf_created` VALUES (1,2,5,42,1);
/*!40000 ALTER TABLE `pdf_created` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `product`
--

DROP TABLE IF EXISTS `product`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `product` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `category_id` int(3) unsigned NOT NULL,
  `symbol` varchar(255) DEFAULT NULL,
  `desc` varchar(255) DEFAULT NULL,
  `price` decimal(5,2) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=43 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `product`
--

LOCK TABLES `product` WRITE;
/*!40000 ALTER TABLE `product` DISABLE KEYS */;
INSERT INTO `product` VALUES (42,13,'product','desc',10.00);
/*!40000 ALTER TABLE `product` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `service`
--

DROP TABLE IF EXISTS `service`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `service` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `desc` varchar(255) NOT NULL,
  `price` decimal(5,2) NOT NULL,
  `active` int(1) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=43 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `service`
--

LOCK TABLES `service` WRITE;
/*!40000 ALTER TABLE `service` DISABLE KEYS */;
INSERT INTO `service` VALUES (42,'some service',5.00,1);
/*!40000 ALTER TABLE `service` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2018-08-27 10:31:41 
```

如果您想测试它而不是 SQL 脚本编辑器，请在 MySQL Workbench 中使用“数据导入/恢复”。

**但是**`product`您不应该对,`header`和`service`引用的表使用自动增量`pdf_created.item_id`，因为如果这三个都获得相同的 ID，那将是一个幸运的巧合。您应该分配 id（项目的 id）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-03T07:40:39.227

是的，这是可能的，您可以使用一列作为多个表的外键，但这也不是一个好习惯，因为您永远不会在需要使用这种方法的地方如此依赖，但为了学习，您可以使用这种类型的 SQL 查询可以完成这项工作；）

[![在此处输入图像描述](../Images/dd793b2e29ca762f9b41028bbcb5664f.png)](https://i.stack.imgur.com/19CWB.png)

ALTER TABLE`demo4`添加约束`rel1`外键 ( `two`) 引用`demo1`( `id`) ON DELETE RESTRICT ON UPDATE RESTRICT;

ALTER TABLE`demo4`添加约束`rel2`外键 ( `two`) 引用`demo2`( `id`) ON DELETE RESTRICT ON UPDATE RESTRICT;

ALTER TABLE`demo4`添加约束`rel3`外键 ( `two`) 引用`demo3`( `id`) ON DELETE RESTRICT ON UPDATE RESTRICT;

# ios - UIButton 做不同的动作 ios

> ID：15547277
> 
> 赞同：0
> 
> 时间：2013-03-21T12:16:12.543
> 
> 标签：ios, button, uibutton, action, ibaction

我有两个导航按钮（左和右）和两个类别按钮（例如 loveCategory 和 otherCategory）。当我选择 loveCategory 时，我希望我的导航按钮仅从 loveCategory 显示（在我的情况下为图像），当我按下 otherCategory 时，导航按钮应该能够仅从 otherCategory 显示（图像）（即当我按下左右按钮时） ）。

如果不清楚，请告诉我。

这是我的代码：

```
-(IBAction)NavigationBtnTapped:(UIButton*)sender {
UIButton *button=sender;
switch (button.tag) {
    case 1:
        //statements
        break;
    case 2:
        //statements
        break;
    default:
        break;
}

}

-(IBAction)loveCategory {
}
-(IBAction)otherCategory {
} 
```

**我如何在另一个动作中调用一个动作**

```
-(IBAction)loveCategory 
{ 
  -(IBAction)NavigationBtnTapped:(id)sender
{
// Is it possible to call an action within another action?
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:21:08.220

将标签 1 和 2 分配给您的按钮并尝试以下操作：

```
 -(IBAction)NavigationBtnTapped:(id)sender {

    switch ([sender tag]) {
        case 1:
            //statements
            break;
        case 2:
            //statements
            break;
        default:
            break;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:54:26.917

您可以通过设置标志来执行此操作，最后选择哪个类别

```
int selectedCategory = 0;

-(IBAction)NavigationBtnTapped:(UIButton*)sender {
UIButton *button=sender;
switch (button.tag) {
    case 1:
        //statements
        if(selectedCategory == 0){
           // go left for lovecategory 
        }else{
          // go left for OtherCategory 
        }
        break;
    case 2:
        //statements
       if(selectedCategory == 0){
            // go right for lovecategory 
       }else{
           // go right for OtherCategory 
       }
        break;
    default:
        break;
}

}

-(IBAction)loveCategory {
  selectedCategory = 0;
}
-(IBAction)otherCategory {
   selectedCategory=1;
} 
```

那是你要的吗 ？

在另一个动作中调用动作

```
-(IBAction)loveCategory 
{ 
  [self NavigationBtnTapped:null];
}
-(IBAction)NavigationBtnTapped:(id)sender
{
// Is it possible to call an action within another action?
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T05:24:31.563

找到了答案！

在头文件中

```
BOOL isLove,isOther; 
```

在实现文件中

```
- (void)viewDidLoad
{
    isOther=TRUE;
    isLove=FALSE;
}

-(IBAction)NavigationBtnTapped:(UIButton*)sender {
if (isLove) {
// Statement
}
else
{
//statement
} 
```

如有必要，使用“else if”来检查多个按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T13:31:50.227

另一种方法是拥有 2 个 UIButtons 和两个 UIImages 但这不是这样做的好方法：D

一开始loveCategory的按钮隐藏=NO，图片隐藏=YES，otherCategory的按钮=YES，图片隐藏=NO。

当您单击 loveCategory 的按钮时，loveCategory 的按钮 hidden = YES 并且其图像 hidden = NO 并且对于 otherCategory 的按钮 hidden = NO 和 image hidden = YES

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T12:21:30.347

**另一种方法是......**

给两者的**标签**`UIButton`。

像这样

```
button1.tag = 101;
button2.tag = 102; 
```

两者`UIButton`都有相同的方法调用。
诸如此类，

```
-(void)buttonTapped:(UIButton *)sender
{
   if(sender.tag == 101)
   {
     // code for loveCategory
   }
   if(sender.tag == 102)
   {
     // code for otherCategory
   }
} 
```

# regex - 从 fasta 文件生成随机子集序列

> ID：15547280
> 
> 赞同：2
> 
> 时间：2013-03-21T12:16:21.477
> 
> 标签：regex, perl, protein-database

向全世界的 Perl 大师问好。

我在编程方面遇到了另一个麻烦。我正在编写一个程序，该程序从具有特定输入数的蛋白质 fasta 文件中选择随机序列。

一般的 fasta 文件如下所示：

> >seq_ID_1 描述等 ASDGDSAHSAHASDFRHGSDHSDGEWTSHSDHDSHFSDGSGASGADGHHAH ASDSADGDASHDASHSAREWAWGDASHASGASGASGSDGASDGDSAHSHAS SFASGDASGDSSDFDSFSDFSD
> 
> >seq_ID_2 描述等 ASDGDSAHSAHASDFRHGSDHSDGEWTSHSDHDSHFSDGSGASGADGHHAH ASDSADGDASHDASHSAREWAWGDASHASGASGASG
> 
> 等等.......

字母代表氨基酸肽。

所以我有一个包含 1000 个序列的 fasta 文件，想要检索其中的 63.21%，即 632.1 个序列。但是序列不能是浮点数，所以如果它超过 0.5 我想向上取整，如果小于 0.5 向下取整。

这是我生成随机序列子集的代码，但它不太擅长工作。

```
#!/usr/bin/perl

#Selecting 63.21% of random sequnces from a proteom file.
use strict;
use warnings;
use List::Util qw(shuffle);

#Give the first argument as a proteom file.
if (@ARGV != 1)
{
    print "Invalid arguments\n";
    print "Usage: perl randseq.pl [proteom_file]";
    exit(0);
}

my $FILE = $ARGV[0];
my $i = 0;
my %protseq = {};
my $nIdx = 0;

#Extraction and counting of the all headers from a proteom file.
open(LIST,$FILE);
open(TEMP1, ">temp1");
while (my $line = <LIST>){
    chomp $line;
    if ($line =~ />(\S+) (.+)/){
        $i++;
        print TEMP1 $1,"\n";
    }
}
close(LIST);
close(TEMP1);

#Selection of random headers for generating a random subset of the proteom file.
my $GET_LINES = RoundToInt ($i*0.6321);

my @line_starts;
open(my $FH,'<','temp1');
open(TEMP2, ">temp2");

do {
     push @line_starts, tell $FH
} while ( <$FH> );

my $count = @line_starts;

my @shuffled_starts = (shuffle @line_starts)[1..$GET_LINES+1];

for my $start ( @shuffled_starts ) {

     seek $FH, $start, 0
         or die "Unable to seek to line - $!\n";

     print TEMP2 scalar <$FH>;
}
close(TEMP2);

#Assigning the sequence data to randomly generated header file.
open(DATA,'<','temp2');
while(my $line = <DATA>)
{
    chomp($line);
    $line =~ s/[\t\s]//g;
    if($line =~ /^([^\s]+)/)
    {
        $protseq{$1}++;
    }
}
close(DATA);

open(DATA, "$FILE");
open(OUT, ">random_seqs.fasta");
while(my $line = <DATA>)
{
    chomp($line);
    if($line =~ /^>([^\s]+)/)
    {
        if($protseq{$1} ne "")
        {

            $nIdx = 1;
            print OUT "$line\n";
        }
        else
        {
            $nIdx = 0;
        }
    }
    else
    {
        if($nIdx == 1)
        {
            print OUT "$line\n";
        }
    }
}
close(DATA);
close(OUT);

#subroutine for rounding
sub RoundToInt {
  int($_[0] + .5 * ($_[0] <=> 0));
}

system("erase temp1");
system("erase temp2");
exit; 
```

但是，它有时会给出适当数量的序列，有时会给出一个更多的序列。我怎样才能摆脱它......请有什么想法吗？

或者也许更好的短代码？

在这里你可以得到一个 75 酵母蛋白质组文件。[http://www.peroxisomedb.org/Download/Saccharomyces_cerevisiae.fas][1]

希望我能尽快解决这个问题...... :(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:39:06.777

您的方法看起来不错，只是不必要的复杂。我会这样做：

```
use strict;
use warnings;

# usage: randseq.pl [fraction] < input.fasta > output.fasta
my $fraction = (@ARGV ? shift : 0.6321);

# Collect input lines into an array of sequences:
my @sequences;
while (<>) {
    # A leading > starts a new sequence. (The "\" is only there to
    # avoid confusing the Stack Overflow syntax highlighting.)
    push @sequences, [] if /^\>/;
    push @{ $sequences[-1] }, $_;
}

# Calculate how many sequences we want:
my $n = @sequences;
my $k = int( $n * $fraction + 0.5 );
warn "Selecting $k out of $n sequences (", 100 * $k / $n, "%).\n";

# Do a partial Fisher-Yates shuffle to select $k random sequences out of $n:
foreach my $i (0 .. $k-1) {
    my $j = $i + int rand($n-$i);
    @sequences[$i,$j] = @sequences[$j,$i];
}

# Print the output:
print @$_ for @sequences[0 .. $k-1]; 
```

请注意，此代码将输入文件的全部内容读入内存。如果输入文件太大，而您只想要其中的一小部分，则可以使用[水库采样](http://en.wikipedia.org/wiki/Reservoir_sampling)从任意大的集合中选择*k个随机序列，而无需保存更多：*

```
use strict;
use warnings;

my $k = (@ARGV ? shift : 632);  # sample size: need to know this in advance

# Use reservoir sampling to select $k random sequences:
my @samples;
my $n = 0;  # total number of sequences read
my $i;      # index of current sequence
while (<>) {
    if (/^\>/) {
        # Select a random sequence from 0 to $n-1 to replace:
        $i = int rand ++$n;
        # Save all samples until we've accumulated $k of them:
        $samples[$n-1] = $samples[$i] if $n <= $k;
        # Only actually store the new sequence if it's one of the $k first ones:
        $samples[$i] = [] if $i < $k;
    }
    push @{ $samples[$i] }, $_ if $i < $k;
}

warn "Only read $n < $k sequences, selected all.\n" if $n < $k;
warn "Selected $k out of $n sequences (", 100 * $k / $n, "%).\n" if $n >= $k;

# Print sampled sequences:
print @$_ for @samples; 
```

但是，如果您真的想要输入序列的*一部分*，您需要首先在文件的单独传递中对它们进行计数。

作为副作用，上述两个程序还统一打乱采样序列。（事实上​​，我特意调整了水库采样算法，以使*n*和*k*的所有值的随机播放一致。）如果您不希望这样，您可以在打印之前根据您喜欢的任何标准对序列进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:56:57.097

我将 spritf 函数用于整数和数组而不是临时文件

```
#!/usr/bin/perl

use strict;

if (@ARGV != 1)
{
    print "Invalid arguments\n";
    print "Usage: perl randseq.pl [proteom_file]";
    exit(0);
}

my $FILE = $ARGV[0];

open(LIST,"<$FILE");

my @peptides;
my $element;
while (my $line = <LIST>){
      if ($line =~ />.*/) {
      push (@peptides, $element);
      $element=$line;
      }
      else {
      $element.=$line;
      }
}
close(LIST);

my $GET_LINES = sprintf("%.0f",$#peptides*0.6321);

my @out;
for (0..$GET_LINES) {
    my $index=$#peptides;
    push (@out, $peptides[int(rand($index))]);
    splice(@peptides, $index, 1);
}

open (OUT, '>out.fasta');
foreach (@out) {
  print OUT $_."\n";
}

exit; 
```

# php - Wordpress 将规则页面 slug 重写为自定义模板

> ID：15547283
> 
> 赞同：1
> 
> 时间：2013-03-21T12:16:37.397
> 
> 标签：php, wordpress, wordpress-theming

我想在我的 Wordpress 网站中创建一个动态页面来显示热门帖子和其他内容

我需要在自定义模板文件中处理 /popular 请求而不创建 Wordpress 页面，并将模板文件命名为 page-popular.php

我试过

```
add_action( 'init', 'rewrite_init' );
function rewrite_init()
{
    add_rewrite_rule( 'popular/?', 'index.php?popular=true', 'top' );
} 
```

然后我尝试检查是否设置了查询字符串流行，我失败了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:12:27.867

如果我正确理解了您的问题：您*不想*创建新页面（通过 wp-admin 中的页面），但您*确实*想使用自定义页面模板文件 - 对吗？

在这种情况下，本主题可能会回答您的问题：

[https://wordpress.stackexchange.com/a/9959/17826](https://wordpress.stackexchange.com/a/9959/17826)

# php - 为什么不将会话数据存储在表中 持续时间登录站点？

> ID：15547284
> 
> 赞同：0
> 
> 时间：2013-03-21T12:16:43.590
> 
> 标签：php, codeigniter, session, session-cookies, session-timeout

我是使用 MVC Codeigniter 框架的 PHP 新手。我有一个关于使用 codeigniter 在表（ci_sessions）中存储会话的问题。我还设置了 config.php 文件，例如 -

```
$config['sess_cookie_name'] = 'ci_session';
$config['sess_expiration']= 3600;
$config['sess_encrypt_cookie'] = FALSE;
$config['sess_use_database']= TRUE;
$config['sess_table_name']= 'ci_sessions';
$config['sess_match_ip']= FALSE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update'] = 300; 
```

并且还在数据库中创建了名为 ci_sessions 的表。喜欢

```
CREATE TABLE IF NOT EXISTS  `ci_sessions` (
session_id varchar(40) DEFAULT '0' NOT NULL,
ip_address varchar(45) DEFAULT '0' NOT NULL,
user_agent varchar(120) NOT NULL,
last_activity int(10) unsigned DEFAULT 0 NOT NULL,
user_data text NOT NULL,
PRIMARY KEY (session_id),
KEY `last_activity_idx` (`last_activity`)
); 
```

完成上述所有活动后，数据库中 ci_sessions 表的 user_data 列中没有数据存储。

当我想使用类似访问会话数据时- `print_r($this->session->all_userdata());` `print $this->session->userdata['myksb'];`

然后错误显示为 -

```
大批 （
[session_id] => 97b9e34713b52f32a32e915053cba826
[ip_address] => 127.0.0.1
[user_agent] => Mozilla/5.0 (Windows NT 6.1; WOW64; rv:19.0) Gecko
[last_activity] => 1363866927 )

遇到 PHP 错误
严重性：通知
消息：未定义索引：myksb
文件名：控制器/home.php
行号：13876

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:09:59.870

这里有几件事要解决。

1.  `$this->session->userdata()`是一种方法而不是数组。`$this->session->userdata['myksb'];`无效。你必须使用`$this->session->userdata('myksb');`

2.  `$this->session->sess_destroy()`杀死你的会话。它实际上从您的会话和 cookie 中删除了您的 sessionId。一旦完成，您就不能为您的会话分配新信息，它不再有 ID。您必须删除该呼叫。CodeIgniter 会自动清理你的会话表。

# ruby - 找不到文件“jquery”，找不到“基础”

> ID：15547285
> 
> 赞同：1
> 
> 时间：2013-03-21T12:16:50.483
> 
> 标签：ruby, ruby-on-rails-3, asset-pipeline, zurb-foundation

我在从旧的 Rails 3.0 项目升级到最新的 Rails 3.2（Rails 4 有点过于前卫）和使用宣传的资产管道时遇到了麻烦。我已经成功地将资产管道用于具有像基础这样的宝石的新项目中，但是让它在这个旧项目中工作似乎很困难，反复`Sprockets::FileNotFound`出现错误。gemfile 正确地包含了资产组中的所有 gem。

```
source 'http://rubygems.org'

gem "rails", "~> 3.2.13"

... database gems ...
gem 'nokogiri'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'compass-rails'
  gem 'uglifier', '>= 1.0.3'
  gem 'zurb-foundation', '~> 4.0.0'
  gem 'jquery-ui-rails'
end
gem 'jquery-rails'
.... 
```

请注意，我`Sprockets::FileNotFound: couldn't find file 'jquery'`通过将 jquery-rails 移到`:assets`-group 之外解决了类似的错误，但这不是至少基础应该如何工作......

我面临的另一个问题（并且可能相关）是它`rails g foundation:install`不起作用，即使`bundle install`命令列出了`zurb-foundation`正在使用的 gem（4.0.9）。

我尝试将使用基础资产的新生成项目与我当前的项目进行比较，但我似乎查看了升级后的 Rails 项目配置之间的差异，但`Sprockets::FileNotFound: couldn't find file 'jquery'`基础仍然存在。

请注意，我已经看到建议将文件移动到项目的文件`vendor`夹中的解决方案，但这不是我想要的解决方案类型。我想充分利用资产管道，并尽量让我的项目保持干净。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:08:08.577

我似乎自己找到了答案……猜猜问这个问题有助于我更好地发现新创建的项目和旧项目之间的差异……

在 application.rb 中，Bundler 的 require 语句与新创建的项目不同：

`Bundler.require(:default, Rails.env) if defined?(Bundler)`（旧）与`Bundler.require(*Rails.groups(:assets => %w(development test))) if defined?(Bundler)`（新）

我想区别在于除了默认组之外，当环境是开发或测试时，还需要包含资产组。

# asp.net - 如何调试常见的 DLL 项目？

> ID：15547286
> 
> 赞同：0
> 
> 时间：2013-03-21T12:16:53.807
> 
> 标签：asp.net, visual-studio-2010, visual-studio

正如问题标题所示，我有两种解决方案：一种用于 ASP.NET 站点，另一种用于 DLL 项目。

当我调试站点时，我想在 DLL 中的断点处停止。

如果不从 *.pdb 文件“进入”那里的代码，我如何才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T12:18:17.487

将公共 dll 的项目添加到您站点的解决方案中，将引用从 dll 引用更改为项目引用，您可以轻松地进入公共 dll 的代码，并且两个项目中的断点都会被命中。

或者，您可以保留 dll 引用，并在使用它的项目中打开编译为 dll 的代码文件。然后，您可以在此代码中设置断点并单步执行，但这样会丢失大量元数据，从而使调试更加困难。

# sql - 过程案例语句错误

> ID：15547289
> 
> 赞同：4
> 
> 时间：2013-03-21T12:16:59.283
> 
> 标签：sql, sql-server

我有一个存储过程，如下所示：

```
SELECT @AdminApproved = CASE WHEN @AdminApprovalDate IS NULL
    THEN 0 
    ELSE 1
    END 
```

据我了解`CASE`，`@AdminApproved`不应该是 0 或 1 以外的任何值。它不可能是 NULL。然而我得到了 NULL !!!! 任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T12:24:35.017

## 您的示例代码有效

根据[SQL Fiddle](http://sqlfiddle.com/#!6/d41d8/3218) ，这是可行的。它设置为 0 或 1。因此，如果您使用的正是您向我们展示的代码，则此变量不能是`null`.

```
declare @AdminApproved1 bit
declare @AdminApproved2 bit
select @AdminApproved1 = case when (null) is null then 0 else 1 end,
       @AdminApproved2 = case when (getdate()) is null then 0 else 1 end

-- both have values
select @AdminApproved1, @AdminApproved2; 
```

## 但变量仍然可以`null`

因此，如果您的代码示例不完整，那么[我可以向您展示另一个示例](http://sqlfiddle.com/#!6/9b7c1/3)`null`，即使在执行`select`语句之后，两个上层变量也将是。我怀疑你的问题是相关的。

```
declare @AdminApproved1 bit
declare @AdminApproved2 bit
select @AdminApproved1 = CASE WHEN (null) IS NULL THEN 0 ELSE 1 END,
       @AdminApproved2 = CASE WHEN (getdate()) IS NULL THEN 0 ELSE 1 END
from SomeTable
where 0 = 1 -- this query yields no results

-- both are NULL when
select @AdminApproved1, @AdminApproved2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:31:05.567

您不能从该查询中获得 null，因此您的代码中的其他地方肯定有其他错误。很可能有一些东西使该查询根本无法执行。

测试以验证结果：

```
declare @AdminApproved int
declare @AdminApprovalDate datetime

-- testing with null

set @AdminApprovalDate = null

SELECT @AdminApproved = CASE WHEN @AdminApprovalDate IS NULL
    THEN 0 
    ELSE 1
    END

select @AdminApproved

-- testing with a date

set @AdminApprovalDate = getdate()

SELECT @AdminApproved = CASE WHEN @AdminApprovalDate IS NULL
    THEN 0 
    ELSE 1
    END

select @AdminApproved 
```

输出：

```
0

1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:34:36.880

如果在选择内没有返回行，则分配一个值`SELECT`将*保留*分配之前的原始值。（实际上，值将是`NULL`保留值是不正确的。

只有 SET 的情况可能是不返回行的赋值将值设置为`NULL`。

因此，在您的特殊情况下，先前的值是 NULL （因为您没有分配值）并且您的选择没有返回。

# java - Java中的多线程：等到两个按钮被按下？

> ID：15547290
> 
> 赞同：0
> 
> 时间：2013-03-21T12:17:01.487
> 
> 标签：java, multithreading

我目前正在编写一个带有 Swing-Interface 的小型应用程序，其中包含一堆按钮。现在我的问题如下：启动应用程序后，调用一个方法，我想等待两个按钮被按下，然后正常进行。我有两个线程，一个是主线程，另一个是为了等待两个按钮被按下而创建的。对于按钮，我像往常一样添加了一个 ActionListener，它将一个变量增加一个，并在变量为 2 时调用一个唤醒另一个的方法。
所以这是我的代码：

```
int counter = 0;
static Thread thread1;
static Thread thread2;

public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                thread1 = new Thread() {
                    @Override
                    public void run() {
                        MainFrame frame = new MainFrame();
                        frame.setVisible(true);
                        start();
                    }
                };
                thread1.start();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

public MainFrame() {
    //other stuff and similar Listeners
    JButton button1 = new JButton();
    button1.addActionListener(new ActionAdapter() {
        @Override
        public void actionPerformed(ActionEvent ae) {
            count++;
            notifyIfTwo();
        }
    });
}

public void notifyIfTwo() {
    if (count == 2) {
        synchronized(thread2) {
            notifyAll();
        }
    }
}

public void start() {
    thread2 = new Thread() {
        @Override
        public void run() {
            try {
                synchronized(thread1) {
                    thread2.wait();
                }
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    };
    thread2.start();    
    //other stuff
} 
```

不管我怎么做，我总是得到一个 IllegalMonitorStateException。我还尝试使用 thread2 中的循环来检查计数器是否为 2，但我得到了相同的结果。我认为这与同步问题有关，但我对整个多线程的东西还是陌生的，所以如果你能给我一些指向正确方向的指示，我将不胜感激。
或者，也许您甚至知道一种更简单的方法来解决整个“等到按下两个按钮”的问题？

提前致谢，
问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:31:08.107

使用[`CountDownLatch`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html). 它允许等待给定数量的`countDown()`调用。

`Thread.wait();`在您的代码中没有意义，它无法编译。该`wait`方法可以应用于您正在同步的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:30:57.037

我认为导致您出现异常的原因是 thread1 正在从 UI 线程访问 GUI 组件。解决此问题的一种方法是摆脱 thread1。让您的 onClick（或 actionPerformed）处理程序增加变量。让 thread2 在等待（比如 500 毫秒）后循环并监视变量值。

因此，您可以稍后使用 runnable 保留调用，但在外部 run 方法中执行工作，例如：

```
public static void main(String[] args) {
EventQueue.invokeLater(new Runnable() {
    public void run() {
        try
        {
            MainFrame frame = new MainFrame();
            frame.setVisible(true);
            start();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
});
}

public void start() {
thread2 = new Thread() {
    @Override
    public void run() {
        try {
                while (keepGoing)
                {
                    thread2.sleep(500);
                    if (variableIncremented)
                    {
                        // doSomething();
                        // reset variable, or set keepGoing = false
                    }
                }
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
};
    thread2.start();    
    //other stuff
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T12:36:31.207

重点是：

```
 synchronized(thread2) {
        notifyAll();
    } 
```

您正在通知所有等待的线程`this`，但您没有监视器`this`。对于所有等待/通知/通知全部，代码必须是：

```
 synchronized (foo) {
    foo.wait();    // or foo.notify()
 } 
```

同样，稍后您将拥有：

```
 synchronized(thread1) {
     thread2.wait();
  } 
```

您不能在 obj1 上同步并在 obj2 上等待，除非 obj1 == obj2。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T14:18:34.900

好的，现在想通了。剩下的问题是我没有足够严格地将 GUI 线程和包含逻辑的另一个线程分开（在我发布的代码之外）。
感谢所有帮助我找出 IllegalMonitorStateException 的人。
我现在像有人建议的那样使用了 CountDownLatch，它就像一个魅力。

# mongodb - Scala 流畅的语法和用于 MongoDB 的 Casbah 工具包

> ID：15547298
> 
> 赞同：0
> 
> 时间：2013-03-21T12:17:07.270
> 
> 标签：mongodb, scala, fluid, casbah

我是 Scala 的新手，正在尝试将 Casbah 工具包用于 MongoDb。Casbah 教程 说：

“...这应该允许更流畅的语法与 Mongo 一起使用。DB 对象还提供了一个 apply() 用于获取集合，因此您可以自由地链接它们：”

```
scala> val mongoColl = mongoClient("casbah_test")("test_data")
mongoColl: com.mongodb.casbah.MongoCollection = MongoCollection() 
```

我在哪里可以阅读有关 Scala 构造的信息，例如 mongoClient("casbah_test")("test_data") ？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:17:32.977

很抱歉，目前这不是一个好故事，而且学习曲线很陡峭。casbah 的文档将因剧变而发生，请参阅[SCALA-63](https://jira.mongodb.org/browse/SCALA-63)，目前它希望您在能够掌握在 scala 中使用它之前具备如何使用 mongodb 的工作知识。

目前，我认为成功的最快方法是遵循主要[的入门](http://docs.mongodb.org/manual/tutorial/getting-started/)指南，并从 shell 中吸取教训，了解如何使用 Casbah。

如果您更有动力深入研究代码，则可以使用[查询集成规范测试](https://github.com/mongodb/casbah/blob/master/casbah-core/src/test/scala/QueryIntegrationSpec.scala)来了解如何使用流体 api。

如果这没有阻止你并且你想支持一个开源项目，我很乐意接受关于改进[文档](https://github.com/mongodb/casbah/tree/master/src/sphinx)的拉取请求——在[用户组](https://groups.google.com/group/mongodb-casbah-users)上联系我。

# web-services - 在 Jersey 网络服务中也必须使用 @XmlRootElement 进行 JSON 响应吗？

> ID：15547302
> 
> 赞同：8
> 
> 时间：2013-03-21T12:17:17.347
> 
> 标签：web-services, rest, jersey

我的代码实际上包含一个资源类和一个 BEan 类，它的返回类型是 JSON。

## 资源类

```
@Path("/json")
public class JSONRetrive {

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public JSONT getJson(){
        JSONT jsont = new JSONT();
        jsont.setJsont("inr");
        return jsont;
    }
} 
```

/* 是否有任何 Annotation 将代表 JSON。我需要为此使用任何其他注释吗？ */

## 我的豆类

```
//@XmlRootElement
public class JSONT {
private String jsont;

public String getJsont() {
    return jsont;
}

public void setJsont(String jsont) {
    this.jsont = jsont;
}

} 
```

如果我取消注释 @XmlRootElement 它工作正常是否有任何其他替代解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:38:58.223

我为此找到了替代解决方案`@XmlRootElement`，如果我们想在不使用的情况下生成 JSON 响应，`@XmlRootElement`我们应该使用 Jersey Jackson 库。`web.xml`在（DD文件）中添加以下给定代码

```
<init-param>
    <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
    <param-value>true</param-value>
</init-param>
<load-on-startup>1</load-on-startup> 
```

和 Jackson API 相关的 jar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-17T10:46:09.040

如果您使用的是 Jersey 和 Maven ，那么只需转到您的 pom.xml 并根据您的情况取消注释/添加以下代码

```
<!-- uncomment this to get JSON support
        <dependency>
            <groupId>org.glassfish.jersey.media</groupId>
            <artifactId>jersey-media-json-binding</artifactId>
        </dependency>
--> 
```

在此之后，您可以使用`@Produces(MediaType.APPLICATION_JSON)`并且您将获得 JSON 响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:08:54.803

也许[这](https://stackoverflow.com/questions/5005668/configure-jersey-jackson-to-not-use-xmlelement-field-annotation-for-json-field)会有所帮助？我不明白为什么使用注释对您来说是个问题，至少在这种情况下是这样。您能否详细说明这给您带来的问题？

# c++ - 将指向数据成员的指针转换为 void *

> ID：15547305
> 
> 赞同：6
> 
> 时间：2013-03-21T12:17:26.257
> 
> 标签：c++, casting, type-conversion, pointer-to-member

我知道我可以获得指向类或结构的数据成员的指针，但以下代码的最后一行无法编译：

```
struct abc
{
    int a;
    int b;
    char c;
};

int main()
{
    char abc::*ptt1 = &abc::c;
    void *another_ptr = (void*)ptt1;
} 
```

为什么我不能将ptt1 转换为another_ptr？我们在谈论指针，所以一个指针应该与另一个指针具有相似的维度（尽管在概念上不同）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T12:22:07.570

*指向非静态类成员类型*的指针与*对象指针类型*不同；他们的行为非常不同。事实上，你甚至不能取消引用指向成员的指针`*`。要通过指向成员的指针访问成员，请改用`.*`and`->*`运算符。如果您*可以*将它转换为像这样的对象指针类型，那么，如果您取消引用它会发生什么`*`？

只有对象指针类型有标准转换为`void*`（§4.10）：

> “指向*cv* `T`的指针”类型的纯右值，其中`T`是对象类型，可以转换为“指向*cv* `void`的指针”类型的纯右值。

它们是如此不同，以至于标准甚至不遗余力地确保术语“指针”不包括指向非静态成员的指针（第 3.9.2 节）：

> 除了指向静态成员的指针外，引用“指针”的文本不适用于指向成员的指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T12:37:28.473

主要原因是因为没有要求指向成员的指针与指向数据的指针具有相同的大小和表示形式。 ~~在实践中，很难想象指向数据成员的指针无法放入 a`void*`中，因为指向数据成员的指针实际上只需要包含偏移量。粗略地说，指向数据成员的指针永远不需要大于 a `size_t`，并且 a`void*`必须至少与 a 一样大`size_t`。另一方面，它很容易包含在指针中不合法的位模式。~~ 事实上，正如 Steve Jessop 所指出的，指向成员的指针确实需要额外的信息，因为如果成员在虚拟基中，它的偏移量取决于最派生的类，并且必须根据指针中的额外信息动态计算。

更一般地说，a`void*`只能包含指向数据的指针。它必须与最大的数据指针（通常是 a `char*`）一样大，但指向函数的指针和成员指针可以更大，并且不适合（并且指向成员函数的指针几乎永远不适合）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:28:36.127

你想做这样的事情吗？

```
struct ABC
{
    int a;
    int b;
    char c;
};

int main()
{
    ABC abc;
    char *ptt1 = &abc.c;
    void *another_ptr = (void*)ptt1;
} 
```

# jquery - jquery移动列表分隔符格式

> ID：15547318
> 
> 赞同：1
> 
> 时间：2013-03-21T12:18:20.387
> 
> 标签：jquery, css, listview, jquery-mobile

我正在尝试更改 jquery 移动列表视图中列表分隔符的样式，但到目前为止还没有运气。问题是我在列表分隔符内使用了一个 url，而 jquery 使它变成蓝色并带有下划线。我希望它与不是 url 时相同。

这是我添加到我的 css 以覆盖 jquery css 的内容：

```
 a.ui-li-divider{
      text-decoration:  none;
   } 
```

但它什么也没做。有任何想法吗？

-- 谢谢巴特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:39:27.850

# 解决方案

这是一个工作示例：http: [//jsfiddle.net/Gajotres/kpqa5/](http://jsfiddle.net/Gajotres/kpqa5/)

```
.ui-li-divider a {
    text-decoration:  none;
    color: black !important;
} 
```

# 最后的笔记

如果您想了解更多关于如何自定义 jQuery Mobile 页面和小部件的信息，请查看这篇**[文章](http://www.gajotres.net/learn-how-to-customize-jquery-mobile-application/)**。它附带了许多工作示例，包括为什么 !important 对于 jQuery Mobile 是必需的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T12:28:13.360

我知道内联样式是一种不好的做法，但内联样式正在起作用。

```
<div data-role="page" id="home">
    <div data-role="container">
        <ul data-role="listview" data-inset="true" data-divider-theme="d">
            <li data-role="list-divider"><a href="#" STYLE="text-decoration:none; color:black;">Mail</a>
            </li>
            <li><a href="#">Inbox</a>

            </li>
            <li><a href="#">Outbox</a>

            </li>
            <li data-role="list-divider"><a href="#" STYLE="text-decoration:none; color:black;">Contacts</a>
            </li>
            <li><a href="#">Friends</a>

            </li>
            <li><a href="#">Work</a>

            </li>
        </ul>
    </div>
</div> 
```

[在http://jsfiddle.net/mayooresan/LB8ZN/](http://jsfiddle.net/mayooresan/LB8ZN/)查看现场小提琴

# jquery - Chrome不刷新多选元素

> ID：15547319
> 
> 赞同：4
> 
> 时间：2013-03-21T12:18:23.053
> 
> 标签：jquery, html, google-chrome

我的 HTML 中有一个非常简单的元素：

```
<select multiple="multiple" size="19" name="Title[book_types_array][]" id="Title_book_types_array">
    <option value="0">None Selected</option>
    <option value="1" selected="selected">Textbook School</option>
    <option value="2">Textbook Undergraduate</option>
</select> 
```

而且我有一些 JQuery，它神奇地允许单击多个选择：

```
$('select[multiple] option').click(function(e){
   var self = $(this);
   e.preventDefault();
   if (self.attr('selected'))
       self.removeAttr('selected');
   else
       self.attr('selected', 'selected');
}); 
```

这在 Firefox 上很有效，但在 Chrome 上无效。

它在技术上适用于 Chrome，但不会刷新元素。例如，我选择了两个选项，然后取消选择它们，它仍然显示它们为选中状态。但是，当我在元素中选择一个新选项时，它现在将正确刷新并取消选择我之前未选择的两个元素。如果我单击另一个窗口然后再次返回，它也会刷新元素。

这是 Chrome 中带有此元素的某种错误，还是我遗漏了什么？

### 编辑

通过查看控制台，我可以看到它是如何取消选定属性的，它只是没有刷新元素。

添加示例：http: [//jsfiddle.net/Udf5c/](http://jsfiddle.net/Udf5c/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:08:34.653

我已经针对该主题进行了一些研究，因为您的问题非常有趣。似乎使用 prop() 而不是 attr() 更好。[http://ejohn.org/blog/jquery-16-and-attr/](http://ejohn.org/blog/jquery-16-and-attr/)

这篇文章也可能对你有用：[jQuery, Chrome and "selected" attribute anomalies](https://stackoverflow.com/questions/12203767/jquery-chrome-and-selected-attribute-anomalies)

```
 $('select[multiple] option').mousedown(function(e){
   var self = $(this);
   e.preventDefault();
console.log(self.attr('selected'));

   if ( self.is(':selected'))
        self.prop('selected', false);
   else
        self.prop('selected', 'selected');

}); 
```

这是我在 chrome 下尝试过的工作示例：http: [//jsfiddle.net/7sZUj/](http://jsfiddle.net/7sZUj/) 希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:33:22.320

好的，既然 IE 不在桌面上，试试这个：http: [//jsfiddle.net/Udf5c/5/](http://jsfiddle.net/Udf5c/5/)

```
$('select[multiple] option').mousedown(function(e){

    var sel = $(this).parent('select');
    var opt = $(this);

    var pushTarget = false;

    var selectedOptions = sel.find('option:selected');

    if (opt.attr('selected')) {
        selectedOptions = 
            $($.grep(selectedOptions, function(val) {
                return $(val).val() != opt.val();
            }));

    } else {
        selectedOptions.push(opt);
    }

    sel.children().each(function() {
        $(this).attr('selected', false); 
    });

    selectedOptions.each(function() {
        var o = sel.find('option[value="' + $(this).val() + '"]');
        o.attr('selected', 'selected');
    });

   e.preventDefault();
}); 
```

它检查刚刚选择的内容，然后取消选择所有内容并重新选择您想要的内容。:)

# java - 覆盖预定义数组

> ID：15547320
> 
> 赞同：0
> 
> 时间：2013-03-21T12:18:30.830
> 
> 标签：java, arrays, arraylist, overwrite

我有一个名为 columnsArray[] 的数组，它被预定义为包含 6 个字符串。当我运行我的方法 columns() 时，它应该用用户通过复选框选择的新字符串数组覆盖 columnsArray[]。我尝试实现的方式将每个选中的框添加到arrayList，然后将arrayList转换为array[]。但是，当代码运行时，columnsArray 不会被覆盖。

到目前为止，这是我的代码：

```
public class EditView {
    private JFrame frame;
    JCheckBox appNo, name, program, date, pName, country, fileLoc, email, uni,
            countryUni, degree, classification, funding, supervisor,
            rejectedBy, misc;
    public ArrayList<String> columnArrLst;
    public String[] columnsArray = { "Application Number", "Name", "Program",
            "Date", "Project Name", "Country of Uni" };

    public EditView() {

    }

    public void makeFrame() {
        frame = new JFrame("Edit View");
        frame.setPreferredSize(new Dimension(300, 350));
        Container contentPane = frame.getContentPane();
        contentPane.setLayout(new GridLayout(0, 2, 20, 20));

        appNo = new JCheckBox("appNo");
        name = new JCheckBox("Name");
        program = new JCheckBox("Program");
        date = new JCheckBox("Date");
        pName = new JCheckBox("Project Title");
        country = new JCheckBox("Country of Origin");
        fileLoc = new JCheckBox("Current File Location");
        // countryRef = new JCheckBox("");
        email = new JCheckBox("Email address");
        uni = new JCheckBox("Last University");
        countryUni = new JCheckBox("Country of last Uni");
        degree = new JCheckBox("Degree");
        classification = new JCheckBox("Degree Classification");
        funding = new JCheckBox("funding");
        supervisor = new JCheckBox("Supervisor");
        rejectedBy = new JCheckBox("Rejected By");
        misc = new JCheckBox("Miscelaneous");
        contentPane.add(appNo);
        contentPane.add(name);
        contentPane.add(program);
        contentPane.add(date);
        contentPane.add(pName);
        contentPane.add(country);
        contentPane.add(fileLoc);
        contentPane.add(email);
        contentPane.add(uni);
        contentPane.add(countryUni);
        contentPane.add(degree);
        contentPane.add(classification);
        contentPane.add(supervisor);
        contentPane.add(rejectedBy);
        contentPane.add(misc);

        JButton changeView = new JButton("Change View");

        changeView.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                columns();
                frame.dispose();
            }
        });

        contentPane.add(changeView);
        frame.pack();
        frame.setVisible(true);
        frame.setLocationRelativeTo(null);
    }

    public String[] columns() {
        columnArrLst = new ArrayList<String>();
        if (appNo.isSelected()) {
            columnArrLst.add("AppNo");
        }
        if (name.isSelected()) {
            columnArrLst.add("Name");
        }
        if (date.isSelected()) {
            columnArrLst.add("Date");
        }
        if (fileLoc.isSelected()) {
            columnArrLst.add("file Location");
        }
        if (country.isSelected()) {
            columnArrLst.add("Country");
        }
        if (email.isSelected()) {
            columnArrLst.add("Email");
        }
        if (uni.isSelected()) {
            columnArrLst.add("University");
        }
        if (countryUni.isSelected()) {
            columnArrLst.add("Country of Uni");
        }
        if (degree.isSelected()) {
            columnArrLst.add("Degree");
        }
        if (classification.isSelected()) {
            columnArrLst.add("Degree Classification");
        }
        if (pName.isSelected()) {
            columnArrLst.add("ProjectName");
        }
        if (funding.isSelected()) {
            columnArrLst.add("Funding");
        }
        if (supervisor.isSelected()) {
            columnArrLst.add("Supervisor");
        }
        if (rejectedBy.isSelected()) {
            columnArrLst.add("rejected By");
        }
        if (misc.isSelected()) {
            columnArrLst.add("Miscelaneous");
        }
        columnsArray = new String[columnArrLst.size()];
        columnArrLst.toArray(columnsArray);
        return columnsArray;
    }
} 
```

任何想法为什么它不被覆盖？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:30:44.253

试试这个

```
columnsArray =  columnArrLst.toArray(new String[columnArrLst.size()]); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:33:45.530

将倒数第二行 [columnArrLst.toArray(columnsArray);] 替换为以下内容。

columnsArray = columnArrLst.toArray(columnsArray);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T12:35:49.803

您的代码没有任何问题，当您将其用作时，数组内容实际上会发生变化

```
EditView e = new EditView();
e.makeFrame(); 
```

并在之后插入一个打印循环

```
columnArrLst.toArray(columnsArray); 
```

请注意，您的 JFrame 显示在不同的线程中。如果你想检查这些值，你需要明确地等到按钮被按下才能看到它们的变化。如果您正在执行以下操作：

```
EditView e = new EditView();
e.makeFrame();
for (String s : e.columnsArray) { System.out.println(s);} 
```

这将打印旧值，因为打印线程实际上是不同的线程并立即打印这些值。

# java - 如何在 java/android 中漂亮地格式化 GPS 数据？

> ID：15547329
> 
> 赞同：1
> 
> 时间：2013-03-21T12:18:52.343
> 
> 标签：java, android, gps, location, string-formatting

我将 gps 数据设为 2 `double`- 一个`double`用于经度，另一个`double`用于纬度。

我将它们格式化`Strings`为

```
Location.convert(mGps.getLatitude(), Location.FORMAT_MINUTES); 
```

但是我希望它像谷歌地图上那样格式化，比如说，17（这里是度数的符号）55（这里是分钟的符号）23（这里是秒的符号）。

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:32:51.787

在这个[Wikipedia 链接](http://en.wikipedia.org/wiki/Geographic_coordinate_conversion#Java_Implementation)中，您有一个 Java 实现来进行这种转换。

```
// Input a double latitude or longitude in the decimal format
// e.g. 87.728056
String decimalToDMS(double coord) {
    String output, degrees, minutes, seconds;

    // gets the modulus the coordinate divided by one (MOD1).
    // in other words gets all the numbers after the decimal point.
    // e.g. mod = 87.728056 % 1 == 0.728056
    //
    // next get the integer part of the coord. On other words the whole number part.
    // e.g. intPart = 87

    double mod = coord % 1;
    int intPart = (int)coord;

    //set degrees to the value of intPart
    //e.g. degrees = "87"

    degrees = String.valueOf(intPart);

    // next times the MOD1 of degrees by 60 so we can find the integer part for minutes.
    // get the MOD1 of the new coord to find the numbers after the decimal point.
    // e.g. coord = 0.728056 * 60 == 43.68336
    //      mod = 43.68336 % 1 == 0.68336
    //
    // next get the value of the integer part of the coord.
    // e.g. intPart = 43

    coord = mod * 60;
    mod = coord % 1;
    intPart = (int)coord;

    // set minutes to the value of intPart.
    // e.g. minutes = "43"
    minutes = String.valueOf(intPart);

    //do the same again for minutes
    //e.g. coord = 0.68336 * 60 == 41.0016
    //e.g. intPart = 41
    coord = mod * 60;
    intPart = (int)coord;

    // set seconds to the value of intPart.
    // e.g. seconds = "41"
    seconds = String.valueOf(intPart);

    // I used this format for android but you can change it 
    // to return in whatever format you like
    // e.g. output = "87/1,43/1,41/1"
    output = degrees + "/1," + minutes + "/1," + seconds + "/1";

    //Standard output of D°M′S″
    //output = degrees + "°" + minutes + "'" + seconds + "\"";

    return output;
}

   /*
    * Conversion DMS to decimal 
    *
    * Input: latitude or longitude in the DMS format ( example: N 43° 36' 15.894")
    * Return: latitude or longitude in decimal format   
    * hemisphereOUmeridien => {W,E,S,N}
    *
    */
    public double DMSToDecimal(String hemisphereOUmeridien,double degres,double minutes,double secondes)
    {
            double LatOrLon=0;
            double signe=1.0;

            if((hemisphereOUmeridien=="W")||(hemisphereOUmeridien=="S")) {signe=-1.0;}              
            LatOrLon = signe*(Math.floor(degres) + Math.floor(minutes)/60.0 + secondes/3600.0);

            return(LatOrLon);               
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:21:20.283

这称为度数到 DMS 的转换。请参阅[http://support.microsoft.com/kb/213449以及](http://support.microsoft.com/kb/213449)[wiki](http://en.wikipedia.org/wiki/Geographic_coordinate_conversion)
上的 java 代码和更多信息

# windows - Windows 的 SourceTree 不工作

> ID：15547331
> 
> 赞同：11
> 
> 时间：2013-03-21T12:19:00.423
> 
> 标签：windows, git, atlassian-sourcetree

当我从命令行键入 git pull 时，我可以毫无问题地获取代码。

当我打开 Windows 的 SourceTree 并尝试 Pull 时，我得到：

```
git -c diff.mnemonicprefix=false -c core.quotepath=false fetch origin
fatal: Could not read from remote repository.
Please make sure you have the correct access rights
and the repository exists.

Completed with errors, see above. 
```

我可能做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T08:55:38.903

在 Windows 上使用 SourceTree 似乎必须使用 Putty Agent。OpenSSH 密钥不起作用。

如果您只有 OpenSSH 密钥：

1.  单击工具菜单中的**创建或导入 SSH 密钥**
2.  在腻子密钥生成器中从转换菜单中选择**导入密钥**
3.  选择您的私钥并点击保存私钥

您现在拥有包含您的密钥的 PPK 文件。

在 Source Tree从工具菜单中**启动 SSH 代理**并浏览到您的 PPK 文件。

所有操作现在应该可以正常工作了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-23T13:51:01.003

如果您使用公钥/私钥对进行身份验证，则此方法有效：

1.  打开 Sourcetree 并转到“工具 > 创建或导入 SSH 密钥”（这将打开一个 PuTTY 密钥生成器窗口）并单击“生成”。

2.  生成后，转到 drupal.org 并导航到“我的帐户 > 配置文件 > SSH 密钥”，然后单击“添加公钥”。

3.  将生成的公钥从“PuTTY 密钥生成器”窗口（“用于粘贴到 OpenSSH 授权密钥文件的公钥：”）复制到 drupal.org 并保存。

4.  在“PuTTY Key Generator”窗口中输入“Key passphrase”和“Confirm passphrase”，然后单击“Save private key”。确保将其保存在可以再次找到它的地方。

5.  关闭“PuTTY Key Generator”窗口并在 SourceTree 中转到“工具 > 启动 SSH 代理（选美）”。您应该可以在此处选择您的私钥文件。（你刚刚保存的那个）

6.  使用 drupal.org 提供的链接添加您的存储库。（用户名@git.drupal.org:project/your_project.git）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-21T08:04:24.123

在 Windows 中不需要使用 Putty，但建议使用，否则每次启动 SourceTree 时都必须重新添加 ssh 密钥。
为此，请转到“工具 -> 添加 SSH 密钥...”并选择您在云服务器中提供的密钥（Git、BitBucket...）。现在，只要您使用 ssh url 克隆了您的存储库，您就可以正确地推/拉。
请记住，仅当您可以从命令行成功推/拉时，这可能适用于您，如果您不这样做，那么您有其他类型的问题。
如果您不小心使用 https url 克隆了您的存储库，则：

```
git remote set-url <remote> <ssh-uri> 
```

喜欢：

```
git remote set-url origin git@github.com... 
```

# arrays - 嵌套“cfloop”标签以循环遍历对

> ID：15547333
> 
> 赞同：1
> 
> 时间：2013-03-21T12:19:06.423
> 
> 标签：arrays, list, loops, coldfusion

我目前正在尝试创建一个`<select>`下拉列表，它将`<option>`根据`URL`变量（或默认值）选择哪个。但是，我不希望我的选项列表看起来像；

name_az, name_za, 最新, 最旧

因为这不是很用户友好，但我也不想在我的代码中使用这些；

名称 AZ（默认）、名称 ZA、最新频段、最旧频段

因为显然这让我自己做更多的工作。

我可以手动创建每个选项列表并`<cfif>`检查每组选项以选择所需的选项。然而，正如任何设计师都知道的那样，当您可以创建一个循环列表并简单地将两个值添加到该列表中时，这会产生很多额外的、不需要的工作。

以下是我目前拥有的代码；

```
<select>
    <cfset sortlist = "name_az|Name A-Z (Default),name_za|Name Z-A,newest|Newest Bands,oldest|Oldest Bands">
    <cfoutput>
        <cfloop list="#sortlist#" delimiters="," index="sortpair">
            <cfloop list="#sortpair#" delimiters="|" index="sortphrase">
                <option value="#sortphrase#">#sortphrase#</option>
            </cfloop>
        </cfloop>
    </cfoutput>
</select> 
```

我希望它返回这个：

```
<select>
    <option value="name_az">Name A-Z (Default)</option>
    <option value="name_za">Name Z-A</option>
    <option value="newest">Newest Bands</option>
    <option value="oldest">Oldest Bands</option>
</select> 
```

但是，显然我要求它返回`sortphrase`列出的任何位置，因此它将返回如下：

```
<select>
    <option value="name_az">name_az</option>
    <option value="Name A-Z (Default)">Name A-Z (Default)</option>
    <option value="name_za">name_za</option>
    <option value="Name Z-A">Name Z-A</option>
    etc..
</select> 
```

有没有办法创建一个`<cfloop>`我可以循环`x`列表中的值的地方？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T12:29:20.467

您使用嵌套循环的想法对我来说似乎是错误的。把它当成是可以的 | 分隔列表，但为什么要循环呢？你最终会得到两倍于你需要的选项标签。尝试

```
<cfloop list="#sortlist#" delimiters="," index="sortpair">
    <option value="#listFirst(sortpair, '|')#">#listLast(sortpair, '|')#</option>
</cfloop> 
```

此外，通常数组比 Coldfusion 中的列表执行得更快。对于像这样的小东西，这并不重要，但我通常会使用数组而不是列表，至少对于循环而言（但可能仍然使用 |-delimited 列表作为两个单独的部分）。

或者，您可以为每个键值对使用一个结构。例如，这是使用关联数组表示法的另一种方法：

```
<cfset sortarray = [
    {name = "name_az", value = "Name A-Z (Default)"},
    {name = "name_za", value = "Name Z-A"},
    {name = "newest", value = "Newest Bands"},
    {name = "oldest", value = "Oldest Bands"}
]>

<cfloop array="#sortarray#" index="sortstruct">
    <option value="#sortstruct['name']#">#sortstruct['value']#</option>
</cfloop> 
```

或使用结构符号：

```
<cfloop array="#sortarray#" index="sortstruct">
    <option value="#sortstruct.name#">#sortstruct.value#</option>
</cfloop> 
```

# mysql - 如果在where子句中是唯一索引列，mysql在找到第一个结果后会做什么

> ID：15547334
> 
> 赞同：3
> 
> 时间：2013-03-21T12:19:10.750
> 
> 标签：mysql

```
SELECT id FROM mytable WHERE login = 'Jhon' AND password = '123' 
```

列`login`具有唯一索引，`password`未编入索引。

找到第一个结果后，mysql会停止执行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T12:37:36.917

```
SELECT id FROM mytable WHERE login = 'Jhon' AND password = '123' 
```

很好，限制不是必需的，因为您正在过滤 UNIQUE CONSTRAINT/INDEX。

顺便说一句，不要在数据库中存储纯文本密码。

如果 login 是唯一索引，则一旦找到“Jhon”，查询将停止搜索索引 b-tree。因为您有两个条件登录和密码，您可能希望提示 MySQL 使用登录索引，以避免（在技术上应该是不可能的）查询计划的错误优化。

```
SELECT id FROM mytable USE INDEX(login) WHERE login = 'Jhon' AND password = '123'
SELECT id FROM mytable FORCE INDEX(login) WHERE login = 'Jhon' AND password = '123' 
```

# python - 如何在 Django 管理员中更改默认小部件？

> ID：15547335
> 
> 赞同：1
> 
> 时间：2013-03-21T12:19:11.527
> 
> 标签：python, django, admin

我正在为我的项目使用自动生成的 Django 管理员。结果如下：

![结果](../Images/5e09dd9a9d639e546a6e0a2cda5596fd.png)

对于字段“Professor”，Django 自动生成了一个下拉列表，但其中至少有 1000 个元素。因此，我想用更用户友好的东西替换列表，例如用于“裁判”的小部件，您基本上只需键入名称的第一个字母，元素就会出现在下面。

如何修改 admin.py 或 models.py 文件以获得该结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:16:36.913

您可以尝试将您的字段添加到 admin.py 中的 raw_id 字段：

```
class YourModelAdmin(admin.ModelAdmin):
    raw_id_fields=('professor', )

admin.site.register(YourModel, YourModelAdmin) 
```

为此，您将获得一个漂亮的搜索按钮

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:26:18.240

您正在寻找：

[**ModelAdmin.formfield_overrides**](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_overrides)

> 这提供了一种快速而简单的方法来覆盖一些在管理员中使用的[字段](https://docs.djangoproject.com/en/dev/ref/forms/fields/#django.forms.Field)选项。formfield_overrides 是一个字典，将字段类映射到参数字典，以便在构造时传递给字段。

看这个例子：

```
from django.db import models
from django.contrib import admin

# Import our custom widget and our model from where they're defined
from myapp.widgets import RichTextEditorWidget
from myapp.models import MyModel

class MyModelAdmin(admin.ModelAdmin):
    formfield_overrides = {
        models.TextField: {'widget': RichTextEditorWidget},
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:19:17.083

您只需要选择一位教授还是多位教授？生成下拉列表是因为您`professor = models.ForeignKey(Professor)`在模型中使用了类似的东西。ForeignKey 意味着单选，但您的示例小部件意味着多项选择。所以你的意图不是很清楚。使用下拉列表，您还可以通过键入首字母来选择选项。

# oracle - Pl/SQL 循环遍历游标的值

> ID：15547342
> 
> 赞同：1
> 
> 时间：2013-03-21T12:19:33.380
> 
> 标签：oracle, plsql

```
CREATE OR REPLACE Function TotalIncome
   ( name_in IN varchar2 )
   RETURN varchar2
IS
   total_val number(6);

   cursor c1 is
     select monthly_income
     from employees
     where name = name_in;

BEGIN

   total_val := 0;

   FOR employee_rec in c1
   LOOP
      total_val := total_val + employee_rec.monthly_income;
   END LOOP;

   RETURN total_val;

END; 
```

在这个例子中，有人告诉我，我们正在遍历 的值，但我不明白的是，如果我们正在遍历这些值，为什么有`employee_rec.monthly_income`必要？另外，当我执行 a `FETCH`on时，`employee_rec`我似乎遇到了错误，所以我猜它们彼此不同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T12:25:04.697

您正在遍历结果集中的*记录*。

换句话说：

```
FOR employee_rec in c1 
```

表示打开游标`c1`并对其执行提取。对于找到的每一行，将行记录分配给名为 的记录变量`employee_rec`。

因此，要参考`monthly_income`这一点，您必须说`employee_rec.monthly_income`，而不仅仅是单独说`monthly_income`。

> 当我对 employee_rec 进行 FETCH

employee_rec 不是游标（它是一个变量），因此您不会从中获取。在这种情况下`C1`，for 循环隐式处理 fetch from，因此您不需要显式 fetch。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T12:24:06.940

您不是“遍历值”，而是遍历光标返回的记录。在您的情况下，您的记录只包含一个字段——`monthly_income`但一般来说，一条记录可以包含许多字段，您可以在每次循环迭代中使用您认为合适的字段。

# javascript - html & js 文本字段数据 (DD-MM-YYYY) 验证

> ID：15547344
> 
> 赞同：0
> 
> 时间：2013-03-21T12:19:41.813
> 
> 标签：javascript, html

在我的表单中，我有一个文本字段，用户可以在其中输入日期。好习惯告诉我不要让用户在字段中放置除 dgit 和“-”符号之外的任何内容。

但是，我在实现此类功能时遇到了一些问题。到目前为止，我有一个只接受数字的字段。如果用户尝试输入字段字母，则该字母将被删除。但重点是创建`(DD-MM-YYYY)`格式，因此字段必须接受“-”符号。

这是我的代码：

```
<input type="text" name="test3" placeholder='DD-MM-YYYY' onkeyup="if (/\D/g.test(this.value)) this.value = this.value.replace(/\D/g,'')"/> 
```

我尝试放入`|\-`正则表达式但没有成功。谁能指出我在哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:26:12.213

HTML5 has another approach for you:

```
<input type="date" name="test3"> 
```

The browser is responsible for the formatting of the date presentation, though.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:24:12.587

你可以尝试类似的东西

```
<input type="text" name="test3" placeholder='DD-MM-YYYY' onkeyup="if (/[^\d-]/g.test(this.value)) this.value = this.value.replace(/[^\d-]/g,'')" onchange="validate(this)"/>

function validate(el){
    var regex = /^(0?[1-9]|[12][0-9]|3[01])-(0?[1-9]|1[012])-\d{4}$/;
    if(!regex.test(el.value)){
        alert('invalid date');
        el.value = '';
    }
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/puLtX/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T12:28:51.707

使用正则表达式

/^\d{4}-\d{2}-\d{2}$|[^\d-]|-\d{2}-\d*-/

你也可以

```
 **/^\d{4}-\d{2}-\d{2}$|[^\d-]|-\d{2}-\d*-/.test(input.value)** 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T12:31:54.700

你可以用 HTML5 做到这一点

看我的jsfiddle：http: [//jsfiddle.net/H7tMZ/2/](http://jsfiddle.net/H7tMZ/2/)

```
<form>
    <input type="text" name="date" pattern="\d{1,2}-\d{1,2}-\d{4}" placeholder="dd-mm-jjjj"/>
    <button type="submit"/>
</form> 
```

# lucene - 与 ElasticSearch 的精确文档匹配

> ID：15547349
> 
> 赞同：2
> 
> 时间：2013-03-21T12:19:52.390
> 
> 标签：lucene, elasticsearch

我需要准确地查询一组“短文档”。例子：

文件：

1.  {“name”：“John Doe”，“alt”：“John W Doe”}
2.  {“name”：“我的朋友 John Doe”，“alt”：“John A Doe”}
3.  {“名称”：“约翰”，“替代”：“苏西”}
4.  {"name": "Jack", "alt": "John Doe"}

预期成绩：

1.  如果我搜索“John Doe”，我希望 1 的分数远大于 2 和 4 的分数
2.  如果我搜索“John Doé”，同上
3.  如果我搜索“John”，我想得到 3（完全匹配优于重复名称和 alt）

ES可以吗？我怎样才能做到这一点？我尝试提升“名称”，但我找不到如何完全匹配文档字段，而不是在其中搜索。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T11:13:30.347

您所描述的正是搜索引擎默认的工作方式。搜索`"John Doe"`变成了对术语`"john"`和的搜索`"doe"`。对于每个术语，它会查找包含该术语的文档，然后为`_score`每个文档分配 a，基于：

*   该术语在所有文档中的常见程度（更常见 == 相关性较低）
*   文档领域中的术语有多常见（更常见 == 更相关）
*   文档的字段有多长（更长 == 不太相关）

您没有看到明确结果的原因是 Elasticsearch 是分布式的，并且您正在使用少量数据进行测试。默认情况下，一个索引有 5 个主分片，并且您的文档在不同的分片上建立索引。每个分片都有自己的文档频率计数，因此分数被扭曲了。

当您添加真实世界的数据量时，频率甚至会超出分片，但要测试少量数据，您需要执行以下两项操作之一：

1.  创建一个只有一个主分片的索引，或者
2.  指定`search_type=dfs_query_then_fetch`在使用全局频率运行查询之前首先从每个分片获取频率

为了演示，首先索引您的数据：

```
curl -XPUT 'http://127.0.0.1:9200/test/test/1?pretty=1'  -d '
{
   "alt" : "John W Doe",
   "name" : "John Doe"
}
'
curl -XPUT 'http://127.0.0.1:9200/test/test/2?pretty=1'  -d '
{
   "alt" : "John A Doe",
   "name" : "My friend John Doe"
}
'
curl -XPUT 'http://127.0.0.1:9200/test/test/3?pretty=1'  -d '
{
   "alt" : "Susy",
   "name" : "John"
}
'
curl -XPUT 'http://127.0.0.1:9200/test/test/4?pretty=1'  -d '
{
   "alt" : "John Doe",
   "name" : "Jack"
}
' 
```

现在，搜索`"john doe"`，记得指定`dfs_query_then_fetch`。

```
curl -XGET 'http://127.0.0.1:9200/test/test/_search?pretty=1&search_type=dfs_query_then_fetch'  -d '
{
   "query" : {
      "match" : {
         "name" : "john doe"
      }
   }
}
' 
```

Doc 1 是结果中的第一个：

```
# {
#    "hits" : {
#       "hits" : [
#          {
#             "_source" : {
#                "alt" : "John W Doe",
#                "name" : "John Doe"
#             },
#             "_score" : 1.0189849,
#             "_index" : "test",
#             "_id" : "1",
#             "_type" : "test"
#          },
#          {
#             "_source" : {
#                "alt" : "John A Doe",
#                "name" : "My friend John Doe"
#             },
#             "_score" : 0.81518793,
#             "_index" : "test",
#             "_id" : "2",
#             "_type" : "test"
#          },
#          {
#             "_source" : {
#                "alt" : "Susy",
#                "name" : "John"
#             },
#             "_score" : 0.3066778,
#             "_index" : "test",
#             "_id" : "3",
#             "_type" : "test"
#          }
#       ],
#       "max_score" : 1.0189849,
#       "total" : 3
#    },
#    "timed_out" : false,
#    "_shards" : {
#       "failed" : 0,
#       "successful" : 5,
#       "total" : 5
#    },
#    "took" : 8
# } 
```

当您搜索时`"john"`：

```
curl -XGET 'http://127.0.0.1:9200/test/test/_search?pretty=1&search_type=dfs_query_then_fetch'  -d '
{
   "query" : {
      "match" : {
         "name" : "john"
      }
   }
}
' 
```

Doc 3 首先出现：

```
# {
#    "hits" : {
#       "hits" : [
#          {
#             "_source" : {
#                "alt" : "Susy",
#                "name" : "John"
#             },
#             "_score" : 1,
#             "_index" : "test",
#             "_id" : "3",
#             "_type" : "test"
#          },
#          {
#             "_source" : {
#                "alt" : "John W Doe",
#                "name" : "John Doe"
#             },
#             "_score" : 0.625,
#             "_index" : "test",
#             "_id" : "1",
#             "_type" : "test"
#          },
#          {
#             "_source" : {
#                "alt" : "John A Doe",
#                "name" : "My friend John Doe"
#             },
#             "_score" : 0.5,
#             "_index" : "test",
#             "_id" : "2",
#             "_type" : "test"
#          }
#       ],
#       "max_score" : 1,
#       "total" : 3
#    },
#    "timed_out" : false,
#    "_shards" : {
#       "failed" : 0,
#       "successful" : 5,
#       "total" : 5
#    },
#    "took" : 5
# } 
```

## 忽略重音

第二个问题是匹配`"John Doé`“。这是一个*分析*问题。为了使全文更易于搜索，我们将其*分析*为单独的术语或标记，它们存储在索引中。为了匹配例如`john`，`John`和`JOHN`当用户搜索 时`john`，每个术语/标记都会通过多个标记过滤器，以将它们放入标准形式。

当我们进行全文搜索时，搜索词也会经历同样的过程。因此，如果我们有一个包含 的文档`John`，则索引为`john`，如果用户搜索`JOHN`，我们实际搜索的是`john`。

为了`Doé`匹配`doe`，我们需要一个去除重音符号的过滤器，我们需要将它应用于被索引的文本和搜索词。最简单的方法是使用[ASCII 折叠令牌过滤器](http://www.elasticsearch.org/guide/reference/index-modules/analysis/asciifolding-tokenfilter.html)。

我们可以在创建索引时定义自定义分析器，并且我们可以在*映射*中指定特定字段应在索引时和搜索时使用该分析器。

首先，删除旧索引：

```
curl -XDELETE 'http://127.0.0.1:9200/test/?pretty=1' 
```

然后创建索引，指定自定义分析器和映射：

```
curl -XPUT 'http://127.0.0.1:9200/test/?pretty=1'  -d '
{
   "settings" : {
      "analysis" : {
         "analyzer" : {
            "no_accents" : {
               "filter" : [
                  "standard",
                  "lowercase",
                  "asciifolding"
               ],
               "type" : "custom",
               "tokenizer" : "standard"
            }
         }
      }
   },
   "mappings" : {
      "test" : {
         "properties" : {
            "name" : {
               "type" : "string",
               "analyzer" : "no_accents"
            }
         }
      }
   }
}
' 
```

重新索引数据：

```
curl -XPUT 'http://127.0.0.1:9200/test/test/1?pretty=1'  -d '
{
   "alt" : "John W Doe",
   "name" : "John Doe"
}
'
curl -XPUT 'http://127.0.0.1:9200/test/test/2?pretty=1'  -d '
{
   "alt" : "John A Doe",
   "name" : "My friend John Doe"
}
'
curl -XPUT 'http://127.0.0.1:9200/test/test/3?pretty=1'  -d '
{
   "alt" : "Susy",
   "name" : "John"
}
'
curl -XPUT 'http://127.0.0.1:9200/test/test/4?pretty=1'  -d '
{
   "alt" : "John Doe",
   "name" : "Jack"
}
' 
```

现在，测试搜索：

```
curl -XGET 'http://127.0.0.1:9200/test/test/_search?pretty=1&search_type=dfs_query_then_fetch'  -d '
{
   "query" : {
      "match" : {
         "name" : "john doé"
      }
   }
}
'

# {
#    "hits" : {
#       "hits" : [
#          {
#             "_source" : {
#                "alt" : "John W Doe",
#                "name" : "John Doe"
#             },
#             "_score" : 1.0189849,
#             "_index" : "test",
#             "_id" : "1",
#             "_type" : "test"
#          },
#          {
#             "_source" : {
#                "alt" : "John A Doe",
#                "name" : "My friend John Doe"
#             },
#             "_score" : 0.81518793,
#             "_index" : "test",
#             "_id" : "2",
#             "_type" : "test"
#          },
#          {
#             "_source" : {
#                "alt" : "Susy",
#                "name" : "John"
#             },
#             "_score" : 0.3066778,
#             "_index" : "test",
#             "_id" : "3",
#             "_type" : "test"
#          }
#       ],
#       "max_score" : 1.0189849,
#       "total" : 3
#    },
#    "timed_out" : false,
#    "_shards" : {
#       "failed" : 0,
#       "successful" : 5,
#       "total" : 5
#    },
#    "took" : 6
# } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T13:54:27.833

我认为如果您映射为多个字段并提升非分析字段，您将实现您所需要的：

```
 "name": {
            "type": "multi_field",
            "fields": {
                "untouched": {
                    "type": "string",
                    "index": "not_analyzed",
                    "boost": "1.1"
                },
                "name": {
                    "include_in_all": true,
                    "type": "string",
                    "index": "analyzed",
                    "search_analyzer": "someanalyzer",
                    "index_analyzer": "someanalyzer"
                }
            }
        } 
```

如果您需要灵活性，还可以通过在 query_string 中使用 '^'-notation 来提高查询时间而不是索引时间

```
{
    "query_string" : {
        "fields" : ["name, name.untouched^5"],
        "query" : "this AND that OR thus",
    }
} 
```

# c++ - CPrintDialog::OnInitDialog 不会每次都被调用

> ID：15547352
> 
> 赞同：4
> 
> 时间：2013-03-21T12:19:54.793
> 
> 标签：c++, windows, visual-c++, mfc

我正在使用 MyPrintDialog 扩展的 CPrintDialog。问题是：当应用程序尝试打开打印对话框时，第一次调用 MyPrintDialog 的 OnInitDialog() 方法。

我正在尝试通过 OnInitDialog() 方法在打印对话框中设置打印机名称。打印机名称由用户在我要用于打印的应用程序中指定。

我的 OnInitDialog() 方法

```
CComboBox *wndCmbBox = (CComboBox *)GetDlgItem( IDC_PER_USER ); /*IDC_PER_USER which is ID of Prin Dialog combo */
if( wndCmbBox != NULL )
{
    wndCmbBox->SelectString( -1, PrinterName );
} 
```

或者他们有什么方法可以在“打印”对话框中设置用户选择的打印机名称..？

请解释。

**编辑**

是的，我的意思是 onInit()`OnInitDialog()`

我正在使用带有 Win7 32 位的 VS 2012。我只在第一次调用`DoModel()`. 下一个连续的`DoModel()`方法调用`OnInitDialog()`。我已经调试了问题并发现了一些东西

```
INT_PTR CALLBACK AfxDlgProc(HWND hWnd, UINT message, WPARAM, LPARAM)
{
    if (message == WM_INITDIALOG)
    {
        // special case for WM_INITDIALOG
        CDialog* pDlg = DYNAMIC_DOWNCAST(CDialog, CWnd::FromHandlePermanent(hWnd));
        if (pDlg != NULL)
            return pDlg->OnInitDialog();
        else
            return 1;
    }
    return 0;
} 
```

以上是dlgcore.cpp的功能。当问题被重现时，我观察到`DYNAMIC_DOWNCAST`返回`NULL`。

请注意，我自定义了 CPrintDialog 并在其中添加了一个复选框。我怀疑它是否会造成问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-21T13:13:47.013

如果您要说`OnInitDialog()`而不是`OnInit()`，那么[这篇 MSKB 文章](http://support.microsoft.com/kb/193272)可能解释了您的问题，尽管它似乎已在 VC6 SP1 之后得到修复。

# javascript - JSON 不显示字符串传递的所有值

> ID：15547355
> 
> 赞同：0
> 
> 时间：2013-03-21T12:20:00.237
> 
> 标签：javascript, jquery, asp.net, html, json

一个 div 包含一个包含 3 行的表格、一个文本区域和一个按钮。使用 JSON，3 行显示正确的信息，但 textarea 显示为空白。我希望它显示数据库中的先前记录。

```
 function ChangeLoadingImage(CommentSuccessfullyUpdated) {
            if (CommentSuccessfullyUpdated != "FALSE") { 
                var x = jQuery.parseJSON(CommentSuccessfullyUpdated);

                $("#Item").text(x.Item);
                $("#Description").text(x.Description);
                $("#Price").text(x.Price);
                $("#ExistingComments").text(x.ExistingComments);
            }
            else if (CommentSuccessfullyUpdated == "False") {
                showLoadingImage.src = "../Images/X.png";
            }
        }

    <div id="dialog" title="Comments"  style="display:none;">
     <table class="detailstable FadeOutOnEdit">
         <tr>
            <th>Item</th>
            <th>Description</th>
            <th>Owed</th>
         </tr>
         <tr>
             <td id="Item"></td>
             <td id="Description"></td>
             <td id="Price"></td>
         </tr>
     </table> 

     <br />
           <textarea id="ExistingComments" type="text" runat="server" rows="7"
            maxlength="2000"> </textarea> 

            <input id="SubmitComment" type="button" value="Submit"
                onclick="SubmitButton()" />                          
    </div> 
```

所有正确的值都在字符串中返回。但是没有命名 td，而是命名了 textarea，但它没有出现。关于为什么的任何想法？

```
String result = "{" + string.Format("\"Item\": \"{0}\", \"Description\": \"{1}\", \"Price\": \"{2}\", \"ExistingComments\": \"{3}\"", Item, Description, Price, ExistingComments) + "}";

          return result; 
```

## -------------------------------------------------- ------------------------------------------

**编辑：** 我也尝试过`alert(x.ExistingComments);`显示正确的文本。也试过`$("textarea#ExistingComments").text(x.ExistingComments);`哪个什么都不做？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:21:54.193

> 使用 JSON，3 行显示正确的信息，但 textarea 显示为空白。

您不能在 textarea 上调用[text()](http://api.jquery.com/text/)而需要[val()](http://api.jquery.com/val/)

*改变*

```
 $("#ExistingComments").text(x.ExistingComments); 
```

*到*

```
 $("#ExistingComments").val(x.ExistingComments); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:29:18.180

```
$('textarea').filter('[id*=ExistingComments]').val(x.ExistingComments); 
```

# python - 如何处理 XML 中的 $？

> ID：15547356
> 
> 赞同：1
> 
> 时间：2013-03-21T12:20:00.523
> 
> 标签：python, xml

ElementTree 引发异常`<PRP$>`：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 3, in xml
  File "/usr/lib/python2.7/xml/etree/ElementTree.py", line 1301, in XML
    parser.feed(text)
  File "/usr/lib/python2.7/xml/etree/ElementTree.py", line 1643, in feed
    self._raiseerror(v)
  File "/usr/lib/python2.7/xml/etree/ElementTree.py", line 1507, in _raiseerror
    raise err
xml.etree.ElementTree.ParseError: not well-formed (invalid token): line 28, column 14 
```

我从斯坦福 NLP 包中得到了这个输出。真的是畸形吗？维基百科和其他来源没有提到它。

如何解决这个问题？`$`如果我知道它是什么，我想用它的相应实体替换。

# xcode - Cocoa 调度键盘事件

> ID：15547361
> 
> 赞同：1
> 
> 时间：2013-03-21T12:20:10.780
> 
> 标签：xcode, macos, cocoa

我需要制作一个类似于虚拟键盘的应用程序，但要简化得多，它将具有方向键和另外 4 个按钮（待配置）。它基本上是一个虚拟游戏手柄，如游戏机或 Xbox。目的是在交互式显示器上使用它来玩一系列可能给他们奖励的简单游戏。

我的问题是，我可以按下游戏手柄上的“X”按钮，然后将用户按下某个字母的信息发送到我的操作系统吗？这与用户打开的应用程序无关，我希望它在后台工作，并且可以将这些事件发送到用户正在玩的任何游戏。

顺便说一句，这将适用于 mac osx 10.8.x

# java - 文档文本提取和修改

> ID：15547362
> 
> 赞同：2
> 
> 时间：2013-03-21T12:20:11.983
> 
> 标签：java

我最近遇到了[Apache Tika](http://tika.apache.org "阿帕奇蒂卡")，这是一个漂亮的工具包，它处理多种类型的文件以提取文本（以及一些其他信息，例如元数据）。

我面临的问题是，给定一个文档（某些格式，如 PDF、DOC、XLS 等），我需要**提取**文本，**修改**其中的一些，然后以原始格式**重新构建**文档（与修改后的文本）。据我所知，Tika 提供了提取文本的功能，但不会“缝合”修改后的文档。

我觉得有一些库可以针对**特定的文件类型执行此操作，但我不知道有任何类似于 Tika 的工具包，它通过处理 Tika 支持的****所有**文件类型为我提供了端到端的解决方案。我也不确定 Tika 本身是否可以为我做到这一点。

如果有人知道这种情况，请告诉我。我正在寻找一个用 Java 编写的库。

问候，

萨利尔

编辑：coderanch.com/how-to/java/AccessingFileFormats 有几个工具包列表器，但我希望能全面包装 Tika 支持的所有格式的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T20:10:56.550

*   阿帕奇 POI

Apache POI 是您的 Java Excel 解决方案（适用于 Excel 97-2008）。我们有完整的 API 用于移植其他 OOXML 和 OLE2 格式，欢迎其他人参与。

OLE2 文件包括大多数 Microsoft Office 文件，例如 XLS、DOC 和 PPT 以及基于 MFC 序列化 API 的文件格式。该项目为 OLE2 文件系统 (POIFS) 和 OLE2 文档属性 (HPSF) 提供 API。

Office OpenXML 格式是 Microsoft Office 2007 和 2008 中基于新标准的 XML 文件格式。这包括 XLSX、DOCX 和 PPTX。

*   日食Birt

    问：BIRT 支持哪些报表输出格式？

2.1 版支持 HTML、分页 HTML 和 PDF。2.2 版支持 HTML、分页 HTML、PDF、WORD、XLS 和 PostScript

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T06:55:26.980

似乎没有比[这里](http://www.coderanch.com/how-to/java/AccessingFileFormats)提到的更好的工具包了。唯一的出路是为这些工具包中的一个或多个编写自己的包装器来完成工作。如果 Tika 自己提供该设施，那就太好了，但不幸的是，情况似乎并非如此。

# perl - 我使用下面的代码来检查 replace.exe 的单个实例是否正在运行

> ID：15547367
> 
> 赞同：0
> 
> 时间：2013-03-21T12:20:30.423
> 
> 标签：perl, fcntl

我使用下面的代码来检查 replace.exe 的单个实例是否正在运行。当我创建 replace.exe 并在 Windows 上运行时，又创建了一个名为 replace（没有任何扩展名）的 0 kb 大小的文件。

我不希望创建该文件，否则我想在 replace.exe 执行结束后自动删除该文件。

请帮助我。谢谢

```
use Fcntl qw(:flock);
# Check if any instance of this script is already running
my $lock = "replace";
sub LockOut ( ) {
  &print_log ("A instance of this script is running. Therefore exiting. Please try after some time.");
  print "A instance of this script is running. Therefore exiting. Please try after some time.";
  exit 1;
}

open ( my $pid, '>', $lock );
flock ( $pid, LOCK_EX | LOCK_NB ) or LockOut( ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:40:07.513

我假设您正在使用以某种方式编译成 Windows 可执行文件的 perl 脚本，并且您希望它在单个实例中运行。

您可以尝试以下方法：

```
use Fcntl qw(LOCK_EX LOCK_NB LOCK_UN);
if (!flock DATA,LOCK_EX|LOCK_NB)
{
    print STDERR "Already running! Exiting...\n";
    exit;
}

#### DO NOT REMOVE ####
__DATA__
This DATA-Block will be locked by the single-instance logic,
preventing it to be locked more than once. 
```

在 perlscript 中，可以独占锁定 __DATA__ 块，但我不知道您的脚本编译器是否保留了该功能。

如果这不起作用，您可以找出可执行文件的文件名并锁定那个文件，它应该与锁定一个名为“replace”的文件做同样的事情。

# android - 将数据http发送到网络服务器没有结果

> ID：15547368
> 
> 赞同：1
> 
> 时间：2013-03-21T12:20:35.657
> 
> 标签：android

我创建了一个简单的教程将数据发送到服务器

我在 onCreate 里面创建了一个按钮

```
Button button = (Button) findViewById(R.id.send);
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // Perform action on click

                postData();
            }
        }); 
```

这是我发送数据的代码

```
public void postData() {
        // Create a new HttpClient and Post Header
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://www.www.www/hama/test123.php");

        //This is the data to send
        String MyName = "adil"; //any data to send

        try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
        nameValuePairs.add(new BasicNameValuePair("action", MyName));

        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request

        ResponseHandler<String> responseHandler = new BasicResponseHandler();
        String response = httpclient.execute(httppost, responseHandler);

        //This is the response from a php application
        String reverseString = response;
        Toast.makeText(this, "response" + reverseString, Toast.LENGTH_LONG).show();

        } catch (ClientProtocolException e) {
        Toast.makeText(this, "CPE response " + e.toString(), Toast.LENGTH_LONG).show();
        // TODO Auto-generated catch block
        } catch (IOException e) {
        Toast.makeText(this, "IOE response " + e.toString(), Toast.LENGTH_LONG).show();
        // TODO Auto-generated catch block
        }

        }//end postData() 
```

当我尝试按下按钮时，当我尝试刷新页面时，网络服务器没有结果。页面是空白的，没有结果。

这是我的php代码

```
<?php

//code to reverse the string

$reversed = strrev($_POST["action"]);

echo $reversed;

?> 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:25:37.050

First of all, **NEVER** perform network actions on the UI Thread. It will make your app unresponsive.

```
String response = httpclient.execute(httppost, responseHandler); 
```

that actually returns an HttpResponse, not a String. Do this instead:

```
final HttpResponse response = httpClient.execute(get, localContext);

final HttpEntity entity = response.getEntity();
final InputStream is = entity.getContent();
final InputStreamReader isr = new InputStreamReader(is, "ISO-8859-1");
final BufferedReader br = new BufferedReader(isr);
String line = "";
String responseFromServer = "";
while ((line = br.readLine()) != null) {
     responseFromServer += line;
} 
```

`responseFromServer` will contain your server response.

And please, next time at least try doing some `ex.printStackTrace()` on your catch blocks so you know what's going on.

# firefox-addon-sdk - Addon SDK 面板中的侦听器重复

> ID：15547371
> 
> 赞同：1
> 
> 时间：2013-03-21T12:20:39.837
> 
> 标签：firefox-addon-sdk

我正在使用一个由小部件调用的面板来拍摄存储快照并将其显示在表格中。但是，标记似乎有一些重复。

基本上我有一个用于测试目的的存储项目和几个设置，如开关。每次我单击小部件打开它时，存储项目都会在页面上重复。我可以理解，因为面板不会在显示/隐藏时重新加载。

主要问题是我有一个正常的 jQuery 点击事件来将一些数据发送回存储，这似乎也被重复了。如果我打开和关闭面板 6 次，我会一键触发六个事件。

这对我说，每次重新加载都会创建更多的侦听器，但我找不到任何东西可以告诉我如何正确删除侦听器。请参阅示例

**内容脚本**

```
testPanel = require("sdk/panel").Panel({
    contentURL: data.url("test.html"),
    contentScriptFile: [data.url("test.js")],
    onShow: function() {
        testPanel.port.emit("Loaded")
        testPanel.port.on("clicked", function(){
            console.log('received click')
        });
    }
});

require("sdk/widget").Widget({
    id: "my-widget",
    label: "My Widget",
    panel: testPanel,
        content: "Click here"
}); 
```

**测试.js**

```
var el = document.getElementsByTagName('a')[0];

el.addEventListener('click', function() {
    console.log('clicked');
    self.port.emit("clicked");
});

self.port.on("Loaded", function() {
    $(".wrapper").append('<div>New element</div>');
}); 
```

**控制台输出**

```
info: test_addon: Script loaded
info: test_addon: clicked
info: test_addon: received click
info: test_addon: clicked
info: test_addon: received click
info: test_addon: received click
info: test_addon: clicked
info: test_addon: received click
info: test_addon: received click
info: test_addon: received click 
```

有人有类似的问题吗？

**问题解决了**

的用法`removeListener()`不是 100% 明确的，但是通过使用全局函数而不是匿名函数，您可以删除事件侦听器`onHide`。然后它将创建一个新实例`onShow`，但旧实例已被删除。呸！

**内容脚本**

```
function showClick() {
    console.log('received click')
}
testPanel = require("sdk/panel").Panel({
    contentURL: data.url("test.html"),
    contentScriptFile: [data.url("test.js")],
    onShow: function() {
        testPanel.port.emit("Loaded");
        testPanel.port.on("clicked", showClick);
    },
    onHide: function() {
        testPanel.port.removeListener('clicked', showClick);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:56:08.833

我知道您解决了问题，但通常您不想在该`onShow`方法中创建侦听器。我建议您在`onShow`方法之外创建侦听器，如果需要，您可以使用该`isShowing`属性检查接收事件时面板是否打开。现在，在面板的整个生命周期中，您只有一个侦听器。

```
function showClick() {
    console.log('received click')
}
testPanel = require("sdk/panel").Panel({
    contentURL: data.url("test.html"),
    contentScriptFile: [data.url("test.js")],
    onShow: function() {
        testPanel.port.emit("Loaded");
    },
    onHide: function() {

    }
});
testPanel.port.on("clicked", function() {
  if (testPanel.isShowing) {
    console.log('received click');
  }
}); 
```

# iphone - iOS 通知用户有关地理围栏事件的最佳方式是什么？

> ID：15547373
> 
> 赞同：2
> 
> 时间：2013-03-21T12:20:40.830
> 
> 标签：iphone, objective-c, ios5, ios6, gps

问题讨论如下：

1：用户可以使用我的应用程序使用触发距离和地址注册多个事件。

当用户在附近，离开或穿过注册的事件地点时，如何根据位置触发多个事件。

我必须管理事件并提醒他。

我正在使用 CLLocationManger 委托方法 didUpdateLocation 来跟踪位置距离

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:55:59.560

iOS 对 Location 的原生支持在[Location Awareness Programming Guide](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/Introduction/Introduction.html)中有详细解释。当您浏览它时，您会发现您`didUpdateLocation`只是跟踪用户位置的一步。

也就是说，还涉及许多其他步骤：

1.  `[locationManager startUpdatingLocation]`- 触发位置管理器开始监控位置更新。

2.  `didUpdateLocations`- 代表收到有关位置更新的通知。请注意，您的方法`didUpdateLocation`适用于 < iOS 6 的版本。

3.  `[locationManager startMonitoringSignificantLocationChanges]`- 触发位置更新事件，以便可以进行准确的监控并节省大量电量。

4.  [区域监控](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW8)- 这是您想要的地理围栏要求。

    *   `regionMonitoringAvailable`决定硬件是否支持监视基于形状的区域。
    *   `startMonitoringForRegion`方法开始监视特定区域。
    *   同样，`stopMonitoringForRegion`停止监视区域。
    *   最后，[didEnterRegion](http://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html#//apple_ref/doc/uid/TP40007124-CH3-SW10)和[didExitRegion](http://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html#//apple_ref/doc/uid/TP40007124-CH3-SW11)为您提供所需的地理围栏触发。

也就是说，有许多第三方 iOS sdk 提供商为您的 iOS 应用程序内的区域监控提供高级支持。[Geoloqi](https://developers.geoloqi.com/)和[Parse](https://parse.com)就是其中的两个。您可以访问他们的 api 页面以了解更多关于他们的监控是多么简单或复杂，并根据定价、复杂性等进行选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:08:59.210

Nirav 为您提供了 API 中包含的内容的一个很好的概述，我在这里更专注于您在 Apple 文档中找不到的内容：

要检测地理区域的进入和离开，您可以使用
圆形、矩形和封闭多边形。

您将它们与该地理区域的纬度、经度坐标一起存储。

检测进入事件：
如果当前位置状态从外部区域变为内部区域。

检测离开事件：
如果当前位置状态从内部区域变为外部区域。

```
calculate inside: 
```

多边形内部：在 Stackoverflow 上搜索多边形算法中的点
矩形内部：使用 API
圆形内部：使用 API：从位置到圆心的距离 < 半径

# asp.net - 将 Bootstrap 样式应用于 Asp.net 控件

> ID：15547377
> 
> 赞同：0
> 
> 时间：2013-03-21T12:20:51.403
> 
> 标签：asp.net, twitter-bootstrap

我正在使用 asp.net 4.5 、 c# 和 Bootstrap 构建一个简单的 Web 项目

我的前端只是一个包含一些静态内容（导航栏、侧边栏、页脚等）的母版页/默认页面，而页面标题和内容是从 mdb 数据库中检索的。我尝试制作了几个页面，一切似乎都运行良好，但我刚刚意识到应用在 ASP.NET Web 控件上的样式未呈现。请注意，由于编辑器尚未完成，我仍在手动将内容放入数据库中。

例子：

```
<i>prova tag &lt;i&gt;</i> This works (default styling)
<asp:button CssClass="btn btn-large">Test Button</asp:button> (This does not work      (simple, unstyled text is shown)
<asp:label>Prova Roba strana</asp:label> (This works (because it uses the default styling)
<input type=password/> (This works)
<code>&lt;section&gt;</code> (This works) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:42:40.807

这是使用引导主题制作按钮的两个示例。

```
<button type="button" class="btn btn-large">Test</button>
<asp:Button runat="server" Text="Test Button" CssClass="btn btn-large" /> 
```

我猜您将两者混合在一起并且混合无效，​​这就是它不起作用的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-08T19:20:08.060

改为使用

`<asp:button class="btn btn-large">Test Button</asp:button>`

# c# - 使用 Assert.AreEqual() 比较两个对象

> ID：15547383
> 
> 赞同：33
> 
> 时间：2013-03-21T12:21:21.193
> 
> 标签：c#, unit-testing, object, compare, xunit

我第一次在visual studio c#中编写测试用例我有一个返回对象列表的方法，我想通过使用该`Assert.AreEqual()`方法将它与另一个对象列表进行比较。

我尝试这样做，但即使两个对象相同，断言也会失败。

我想知道这个方法，两个参数是比较引用还是对象的内容，

我是否必须重载`==`操作员才能完成这项工作？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-09-13T19:11:56.930

这些答案对于这个问题来说太复杂了。比较两个列表不需要覆盖，也不需要分解多个断言。Microsoft 使用以下类 CollectionAssert。

```
CollectionAssert.AreEqual(expectedList, actualList) 
```

这适用于列表、字典和任何其他实现 ICollection 接口的东西。

microsoft 文档位于以下位置，详细说明了可以对集合进行的各种类型的断言

[http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.collectionassert.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.collectionassert.aspx)

但是，正如@Bart 所提到的，这在（复杂）对象列表中无法正常工作，并且对于这些情况，可能仍需要覆盖 Equals 方法。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-21T12:40:05.770

如果您正在使用`NUnit`这就是文档所说的

> 从 2.2 版开始，还为比较单维数组做出了特殊规定。如果两个数组的长度相同并且每个对应的元素都相等，则 Assert.AreEqual 会将两个数组视为相等。注意：目前不支持多维数组、嵌套数组（数组的数组）和其他集合类型如 ArrayList。

通常，如果您要比较两个对象并且希望具有基于值的相等性，则必须覆盖该`Equals`方法。

要实现您正在寻找的内容，请尝试以下操作：

```
class Person 
{
    public string Firstname {get; set;}
    public string Lastname {get; set;} 

    public override bool Equals(object other) 
    {
      var toCompareWith = other as Person;
      if (toCompareWith == null) 
        return false;
      return this.Firstname ==  toCompareWith.Firstname && 
          this.Lastname ==  toCompareWith.Lastname; 
    }
} 
```

并在您的单元测试中：

```
Assert.AreEqual(expectedList.ToArray(), actualList.ToArray()); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-07-14T15:08:20.000

您可以将它们序列化并测试生成的字符串。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-21T12:28:37.500

.NET 上的Assert.AreEqual`xUnit`将检查对象是否*相同*，但是对象标识与值相等不同，这似乎是您在寻找值相等。IE。“我列表中的对象是否具有相同的值？” 这就是为什么它“失败”这两个列表并不相同，即使每个列表中每个对象的值可能代表相同的值。

通常在测试工作中，测试集合和关键元素的计数就足够了。

```
var count = listA.Count;
Assert.AreEqual(count,listB.Count);
Assert.AreEqual(listA.First(),listB.first());
Assert.AreEqual(listA.Last(),listB.Last());
Assert.AreEqual(listA[count/2],listB[count/2]); 
```

最后一个测试不必在中间元素，只是为了测试列表中的元素，它不是随机元素的唯一原因是因为您希望能够重现您的测试结果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T12:28:28.297

Assert.AreEqual() 比较引用。通常在比较列表时，我会比较项目的数量，而不是列表中一个确切项目的某些属性，或者直接比较列表中的项目（但它也是参考）。

如果您想按内容比较对象，则必须实现一些递归对象比较器，但我认为它不适合单元测试，因为您希望它们始终尽可能快地运行。

# capybara - 测试文本是否不包含任何 HTML

> ID：15547389
> 
> 赞同：0
> 
> 时间：2013-03-21T12:21:37.643
> 
> 标签：capybara

我想测试某些内容是否不包含任何 HTML。什么是简单而干净的方法？

```
page.find(".description").should_not have_content /\<.*\>/ 
```

不能正常工作，因为它失败`&lt;strong&gt;Lorem`但继续传递`<strong>Lorem`。可能是由于 capybara 帮助其用户转义 HTML 的方式。

用 xpaths 解决是可行的，但让我想知道是否没有更简单的解决方案。

```
page.should_not have_selector(:xpath, "//div[@class="description"]/*") 
```

是否有一种内置的方法来检测 Capybara 中的某些文本是否已从 HTML 中删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:54:56.150

Capybara 的`has_content?`（以及因此`have_content`）方法旨在检查呈现给用户的文本，而不是您期望的元素的 html 源中的文本。

因此，我认为水豚的行为是正确的：

*   如果 html 源`.description`是`&lt;strong&gt;Lorem`，用户会看到`<strong>Lorem`. Capybara 搜索此文本`/\<.*\>/`并找到它。
*   如果 html 源`.description`是`<strong>Lorem`，用户会看到`Lorem`. Capybara 搜索此文本`/\<.*\>/`并没有找到它。

如果要检查元素的源 html，[可以使用 javascript 的函数`innerHTML`](https://stackoverflow.com/a/15459797/841064)：

```
source_text = page.evaluate_script("document.querySelector('.description').innerHTML")
source_text.should_not =~ /\<.*\>/ 
```

# javascript - 区分 DOM - 如何编写单元测试来检查脚本不会对页面上的元素进行任何用户可见的更改？

> ID：15547397
> 
> 赞同：4
> 
> 时间：2013-03-21T12:21:52.963
> 
> 标签：javascript, unit-testing, dom, testing, selenium

我最近一直在写的一个 JavaScript 插件内置了各种故障保护，告诉整个插件或它的一部分隐藏自己并在它无法运行的情况下死掉。例如，假设我们提供的一项功能是，当用户在在线商店中将鼠标悬停在某商品上时，它会自动生成一个显示竞争对手价格的弹出框。然后我们还会进行一些检查，如果我们不知道任何竞争对手的价格，或者我们无法识别该商品，则不要显示弹出框。

我想使用大致遵循以下结构的测试来测试功能禁用：

1.  将我们的插件加载到应该禁用某些功能的页面上
2.  欺骗一些会触发该功能的用户操作
3.  ***断言没有对 DOM 进行任何可见的更改。（即不改变可见元素的样式，不添加或删除元素，除非它们有`display:none`）***

当然，第 3 步是有趣的一步。有没有一种简单的方法可以在 JavaScript 中编写“DOM 不变”测试？（或者在 Selenium for Python 中，这是我用来编写我的测试的——但在 JavaScript 中编写检查可能更广泛有用，因为它可以在任何 JavaScript 测试环境中使用。）

* * *

PS 一些注意事项可以避免“你做错了！” 人群：

*   是的，我知道我可以将上面测试中的第 3 步替换为检查插件将做出的*具体更改*是否尚未进行，我什至可能决定这样做。但是，如果这些具体的变化没有明确规定并且容易发生变化，这种包罗万象的方法可能会很有用。

*   是的，我还意识到，当触发了本应无效果的事件时，仅检查 DOM 没有*立即*的视觉变化并不足以证明没有任何东西已经损坏。不过，这对我目前的目的来说是最好的。另外，即使结果没有用，它也很有趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T14:38:28.130

使用突变观察者来检测没有发生突变。您可能想查看 Mutation Summary，这是一个非常好的用于突变观察者的高级包装器。检查没有发生突变可能很容易，因为检查返回的数组的长度是否为 0。请参阅[https://code.google.com/p/mutation-summary/](https://code.google.com/p/mutation-summary/)。

# joomla2.5 - 我想用 viruemart 组件升级我的 joomla 版本

> ID：15547399
> 
> 赞同：1
> 
> 时间：2013-03-21T12:21:54.543
> 
> 标签：joomla2.5, upgrade, joomla1.5, joomla-extensions, virtuemart

我也想更新/升级我的 joomla 版本和美德市场组件。现在我的 joomla 版本是 1.5.26，我的美德市场组件版本是 1.1.9，我想转换成 joomla 2.5 和美德市场最新版本 2.0 .6.

但主要问题是我想用数据更新/升级 joomla 和美德市场。（如用户、产品、类别、订单等）我想知道很多网站还有美德官方网站。我找到了很多解决方案，但是当我放弃所有说明并使用本地机器时。然后旧数据 f 美德市场将删除，但我想保留旧数据并在新版本上更新/升级。

所以请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:26:36.490

[使用Jupgrade](http://extensions.joomla.org/extensions/migration-a-conversion/joomla-migration/11658)升级您的 J1.5 站点，这会在新目录中创建一个重复站点，然后按照[此处](http://dev.virtuemart.net/projects/virtuemart/wiki/Upgrading_VM1_to_VM2_with_provided_packages)的过程升级 VirtuMart。

如果您发现您的 VirtuMart 数据仍然没有迁移，通过 PHPmyadmin 导出这些表并将它们导入 J2.5 数据库是相当容易的。然后您应该能够运行 VirtuMart 升级安装。

# c - 使用 dev_add_pack 的协议处理程序消耗 cpu

> ID：15547400
> 
> 赞同：1
> 
> 时间：2013-03-21T12:21:56.040
> 
> 标签：c, linux, linux-kernel, kernel

我编写了一个内核模块并使用 dev_add_pack 来获取所有传入的数据包。根据给定的过滤规则，如果数据包匹配，我将其转发到用户空间。

当我加载这个内核模块并使用 sipp 发送 udp 流量时，出现 ksoftirqd 进程并开始消耗 cpu。（我正在通过 top 命令对此进行测试）

有什么办法可以节省cpu？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T07:56:31.333

我猜你使用 ETH_P_ALL 类型将你的 packet_type 结构注册到协议栈。而且我认为你的 packet_type->func 是瓶颈，它可能本身会消耗大量的 cpu，或者它破坏了现有的协议栈模型并触发其他现有的 packet_type 函数来消耗 cpu。所以节省cpu的唯一方法是优化你的packet_type->func。如果你的函数太复杂，你应该考虑将函数拆分为几个部分，使用简单的部分作为在ksoftirqd上下文中运行的packet_type->func，而复杂的部分应该放在其他内核线程上下文中（你可以创建如果需要，内核模块中的新线程）。

# javascript - 在 Jquery 中实现模糊抖动

> ID：15547401
> 
> 赞同：0
> 
> 时间：2013-03-21T12:21:57.367
> 
> 标签：javascript, jquery, css

我在一个网站上工作，这里是它的演示 [http://benseno.com.tr/demo/oto/](http://benseno.com.tr/demo/oto/) 我想为一个在页脚中使用 Jquery 的元素实现模糊摇晃动画，如下图所示： ![在此处输入图像描述](../Images/f5711057bc9925e097c3fa3050ebae77.png)

![在此处输入图像描述](../Images/2b8833026e7df71c96865ff65396e5a8.png)

![在此处输入图像描述](../Images/bf47954412b03745924346ee96490928.png)

在第一张图片中，这张橙色幻灯片出现了 然后“X”`Div`出现在图片中的动作中，这就是我所缺少的或我想要做的，我需要你所有的建议来实现类似于这个动作的东西，你可以在演示中看到我到目前为止所做的事情，向下滚动到页脚，我的脚本是：

```
<script type="text/javascript">
    $(window).scroll(function() {
        if ($(window).scrollTop() > 700) {
            $('#footer_img').animate({
                'background-position' : '300px'
            }, 500, 'linear', function() {
                $('#footer_x').fadeIn(10);
                $('#footer_x').animate({
                    'width' : '201px',
                    'height' : '217px'
                }, 200, 'linear');

                $('#footer_x').effect('shake', {
                    times : 1,
                    direction : 'down',
                    distance : 3
                }, 50);

            });

        }
        if ($(window).scrollTop() == 0) {
            $('#footer_img').animate({
                'background-position' : '900px'
            }, 1000, 'linear');
            $('#footer_x').fadeOut(100);
        }
    });
</script> 
```

任何建议，建议都非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:05:24.513

让我给你一些建议（在某种程度上符合 Sahil Popli 的回答）

首先，正如 Sahil 建议的那样，建议对动画使用 css3 过渡。这更好，因为支持它的浏览器会比你目前拥有的缓慢而卡顿的动画更流畅地完成工作。或者，如果您需要对动画进行更多控制，或者只是想以比当前更流畅的动画同时支持新旧浏览器，则可以使用[此库。](http://www.greensock.com/gsap-js/)

终于到了模糊部分，我刚刚看到 Sahil 在我处理这个答案时添加了关于 filter 属性的注释，但我想对此进行扩展。

使用该功能确实可以在基于 webkit 的浏览器（chrome、safari 和几个月的opera）中实现模糊效果`-webkit-filter:blur(distance);`，问题当然是仅限于 webkit。然而 Gecko (firefox) 不支持该`blur`功能，但它允许您使用`url()`资源引用 svg 过滤器。这听起来可能很复杂，但您唯一需要做的就是在您的 css 旁边添加以下文件

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
  <defs>
    <filter id="blur" x="0" y="0">
      <!-- Change stdDeviation for different amounts of blur -->
      <feGaussianBlur in="SourceGraphic" stdDeviation="2" />
    </filter>
  </defs>
</svg> 
```

而不是使用`blur`您现在可以使用的功能

```
-webkit-filter:url(filter.svg#blur);
filter:url(filter.svg#blur); 
```

这将在 Firefox、Safari 和 chrome 中工作。这样做的缺点是，与`blur`函数不同，它*不能*使用 css3 或 javascript 进行转换，因此您只能打开和关闭效果（尽管您可以通过向 svg 文件添加更多模糊元素来制作多个阶段）。

现在，较旧的 IE 版本（IE9 及以下）也有一个专有`filter`属性，也可以用来添加模糊效果，所以通过添加以下内容

```
-webkit-filter:url(filter.svg#blur);
filter:url(filter.svg#blur);
zoom:1;
filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius='2', MakeShadow='false', ShadowOpacity='0') 
```

除了 IE10+ 之外，所有主流浏览器都会有模糊效果。现在，它*也*可以在 IE10 中运行，但这需要从 a 切换`HTML element`到`SVG element`应用模糊滤镜的 a ，这反过来会导致 IE9- 错过（或者你必须使用特征检测以使用不同的版本）。（您可以使用 s 中的`image`标签包含位图图像`svg`，例如在[此演示](http://ie.microsoft.com/testdrive/Graphics/hands-on-css3/hands-on_svg-filter-effects.htm)中所做的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:27:26.557

一些css可以帮助Demo：[http ://dabblet.com/gist/5212660](http://dabblet.com/gist/5212660)

```
.style1 
    { 
     animation-name: shake; 
     animation-duration: 0.8s; 
     transform-origin:50% 50%; 
     animation-iteration-count: infinite; 
     animation-timing-function: linear; 

     -moz-animation-name: shake; 
     -moz-animation-duration: 0.8s; 
     -moz-transform-origin:50% 50%; 
     -moz-animation-iteration-count: infinite; 
     -moz-animation-timing-function: linear; 

     -webkit-animation-name: shake; 
     -webkit-animation-duration: 0.4s; 
     -webkit-transform-origin:50% 50%; 
     -webkit-animation-iteration-count: infinite; 
     -webkit-animation-timing-function: linear; 
    }

    @keyframes shake{ 
     0% { transform: translate(2px, 1px) rotate(0deg);    } 
     10% { transform: translate(-1px, -2px) rotate(-1deg);  } 
     20% { transform: translate(-3px, 0px) rotate(1deg);     } 
     30% { transform: translate(0px, 2px) rotate(0deg);     } 
     40% { transform: translate(1px, -1px) rotate(1deg);     } 
     50% { transform: translate(-1px, 2px) rotate(-1deg);    } 
     60% { transform: translate(-3px, 1px) rotate(0deg);     } 
     70% { transform: translate(2px, 1px) rotate(-1deg);     } 
     80% { transform: translate(-1px, -1px) rotate(1deg);   } 
     90% { transform: translate(2px, 2px) rotate(0deg);     } 
     100% { transform: translate(1px, -2px) rotate(-1deg);     } 
    }  

    @-moz-keyframes shake{ 
     0% {   -moz-transform: translate(2px, 1px) rotate(0deg);    } 
     10% {  -moz-transform: translate(-1px, -2px) rotate(-1deg);  } 
     20% {  -moz-transform: translate(-3px, 0px) rotate(1deg);     } 
     30% {  -moz-transform: translate(0px, 2px) rotate(0deg);     } 
     40% {  -moz-transform: translate(1px, -1px) rotate(1deg);     } 
     50% {  -moz-transform: translate(-1px, 2px) rotate(-1deg);    } 
     60% {  -moz-transform: translate(-3px, 1px) rotate(0deg);     } 
     70% {  -moz-transform: translate(2px, 1px) rotate(-1deg);     } 
     80% {  -moz-transform: translate(-1px, -1px) rotate(1deg); }  
     90% {  -moz-transform: translate(2px, 2px) rotate(0deg);     } 
     100% { -moz-transform: translate(1px, -2px) rotate(-1deg);     } 
    }  

    @-webkit-keyframes shake { 
     0% {   -webkit-transform: translate(2px, 1px) rotate(0deg);  } 
     10% {  -webkit-transform: translate(-1px, -2px) rotate(-1deg); } 
     20% {  -webkit-transform: translate(-3px, 0px) rotate(1deg);   } 
     30% {  -webkit-transform: translate(0px, 2px) rotate(0deg);   } 
     40% {  -webkit-transform: translate(1px, -1px) rotate(1deg); } 
     50% {  -webkit-transform: translate(-1px, 2px) rotate(-1deg);   } 
     60% {  -webkit-transform: translate(-3px, 1px) rotate(0deg);   } 
     70% {  -webkit-transform: translate(2px, 1px) rotate(-1deg);   } 
     80% {  -webkit-transform: translate(-1px, -1px) rotate(1deg);   } 
     90% {  -webkit-transform: translate(2px, 2px) rotate(0deg);   } 
     100% { -webkit-transform: translate(1px, -2px) rotate(-1deg);   } 
    } 
```

演示：[http ://dabblet.com/gist/5212660](http://dabblet.com/gist/5212660)

* * *

添加模糊

采用

```
filter: blur(5px);
// Browser Specific
-webkit-filter: blur(35px);
-moz-filter: blur(5px);
-o-filter: blur(5px);
-ms-filter: blur(5px); 
```

* * *

像

```
@-webkit-keyframes shake { 
         0% {   -webkit-transform: translate(2px, 1px) rotate(0deg);  -webkit-filter: blur(10px);  } 
         10% {  -webkit-transform: translate(-1px, -2px) rotate(-1deg); -webkit-filter: blur(9px); } 
         20% {  -webkit-transform: translate(-3px, 0px) rotate(1deg);   -webkit-filter: blur(8px); } 
         30% {  -webkit-transform: translate(0px, 2px) rotate(0deg);   } 
         40% {  -webkit-transform: translate(1px, -1px) rotate(1deg); } 
         50% {  -webkit-transform: translate(-1px, 2px) rotate(-1deg);   } 
         60% {  -webkit-transform: translate(-3px, 1px) rotate(0deg);   } 
         70% {  -webkit-transform: translate(2px, 1px) rotate(-1deg);   } 
         80% {  -webkit-transform: translate(-1px, -1px) rotate(1deg);   } 
         90% {  -webkit-transform: translate(2px, 2px) rotate(0deg);   } 
         100% { -webkit-transform: translate(1px, -2px) rotate(-1deg);   } 
        } 
```

根据您的需要更改值

结帐[http://dabblet.com/gist/5212721](http://dabblet.com/gist/5212721)

仅为 webkit 编辑

仅在 chrome 中尝试

# javascript - Javascript：使用 AJAX 读取文本文件

> ID：15547407
> 
> 赞同：3
> 
> 时间：2013-03-21T12:22:07.130
> 
> 标签：javascript, html, ajax, marquee

无法让 AJAX 工作！我在网站上有一个选框，让它工作！但是我希望它在文本文件中找到选框的文本，并且我希望它读取文本文件中的文本（这是一行）并将其分配给名为的变量`content`，该变量是脚本中的全局变量标签。

当我运行网站（本地 IIS）时，字幕文本是：“未定义”（不带引号）。

为什么不将文本分配给变量`content`？

```
 var content

    function loadXMLDoc()
    {   
        var textfile;
        if (window.XMLHttpRequest)
        { 
            textfile = new XMLHttpRequest(); 
        }
        textfile.onreadystatechange = function ()
        {   
            if (textfile.readyState == 4 && textfile.status == 200)
            { 
                content = textfile.responseText; 
            }
        }
        textfile.open("GET", "C:\Users\Fares\Dropbox\Sync\College\Computing\DeltaOne\MarqueeText.txt", true);
        textfile.send();
    } 
```

**编辑：**感谢@kuncajs 一百万，正如他指出的那样，我忘了调用该函数！：） 固定的！感谢其他所有人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:26:21.537

不要使用本地路径，例如： `C:\Users\Fares\Dropbox\Sync\College\Computing\DeltaOne\MarqueeText.txt`

将其放在 IIS 的 www 目录中，并声明如下路径： `localhost/text.txt`

服务器可以限制对您的文件系统的访问，并且您应该尝试使用相对路径`text.txt`或绝对路径`/text.txt`，以便即使在生产环境中部署它时路径也能正常工作。

**编辑：** 因此，如果这没有帮助，请确保您确实调用了该`loadXMLDoc()`函数。还要检查你所做的一切都是*在*AJAX 结束之后！我的意思是你在 if - 当 AJAX 完成时做任务，但你也应该初始化你的选框！之后！文本已加载。如果您在未定义之前执行此操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:38:56.867

首先尝试使用相对或绝对路径。

如果这不起作用，请检查您在使用浏览器时是否可以访问该文件（假设您的网站已打开`mysite.com/index.html`，请尝试打开`mysite.com/text.txt`）

如果您无法使用浏览器访问它，那么您将不得不配置您的服务器以允许读取此文件，从未尝试过 IIS，所以我无法帮助您。

此外，由于您要求 XHR 是异步的，因此可能需要一些时间才能填充变量（取决于您/您的服务器的速度）

# python - 如何使用 NLTK 分词器去除标点符号？

> ID：15547409
> 
> 赞同：142
> 
> 时间：2013-03-21T12:22:07.597
> 
> 标签：python, nlp, tokenize, nltk

我刚开始使用 NLTK，我不太明白如何从文本中获取单词列表。如果我使用`nltk.word_tokenize()`，我会得到一个单词和标点符号列表。我只需要单词。我怎样才能摆脱标点符号？`word_tokenize`也不适用于多个句子：在最后一个单词中添加点。

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2013-03-21T18:19:48.677

看看 nltk[在此处](http://www.nltk.org/api/nltk.tokenize.html)提供的其他标记化选项。例如，您可以定义一个分词器，它挑选出字母数字字符序列作为令牌并删除其他所有内容：

```
from nltk.tokenize import RegexpTokenizer

tokenizer = RegexpTokenizer(r'\w+')
tokenizer.tokenize('Eighty-seven miles to go, yet.  Onward!') 
```

输出：

```
['Eighty', 'seven', 'miles', 'to', 'go', 'yet', 'Onward'] 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2015-09-20T22:31:23.140

您实际上并不需要 NLTK 来删除标点符号。您可以使用简单的 python 将其删除。对于字符串：

```
import string
s = '... some string with punctuation ...'
s = s.translate(None, string.punctuation) 
```

或者对于 unicode：

```
import string
translate_table = dict((ord(char), None) for char in string.punctuation)   
s.translate(translate_table) 
```

然后在你的分词器中使用这个字符串。

**PS**字符串模块还有一些其他可以删除的元素集（如数字）。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2016-12-07T17:51:33.490

下面的代码将删除所有标点符号以及非字母字符。抄自他们的书。

[http://www.nltk.org/book/ch01.html](http://www.nltk.org/book/ch01.html)

```
import nltk

s = "I can't do this now, because I'm so tired.  Please give me some time. @ sd  4 232"

words = nltk.word_tokenize(s)

words=[word.lower() for word in words if word.isalpha()]

print(words) 
```

输出

```
['i', 'ca', 'do', 'this', 'now', 'because', 'i', 'so', 'tired', 'please', 'give', 'me', 'some', 'time', 'sd'] 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-03-21T17:19:21.353

正如评论中所注意到的，以 sent_tokenize() 开头，因为 word_tokenize() 仅适用于单个句子。您可以使用 filter() 过滤掉标点符号。如果你有一个 unicode 字符串，请确保它是一个 unicode 对象（不是一个用一些编码如 'utf-8' 编码的 'str'）。

```
from nltk.tokenize import word_tokenize, sent_tokenize

text = '''It is a blue, small, and extraordinary ball. Like no other'''
tokens = [word for sent in sent_tokenize(text) for word in word_tokenize(sent)]
print filter(lambda word: word not in ',-', tokens) 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-05-12T01:10:03.460

我刚刚使用了以下代码，它删除了所有标点符号：

```
tokens = nltk.wordpunct_tokenize(raw)

type(tokens)

text = nltk.Text(tokens)

type(text)  

words = [w.lower() for w in text if w.isalpha()] 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2019-07-02T07:21:43.167

真诚的问一句，什么是词？如果您的假设是一个单词仅由字母字符组成，那么您就错了，因为**如果您在 tokenisation 之前删除标点符号，诸如此类**`can't`的单词将被破坏成碎片（例如`can`and `t`），这很可能会对您的程序产生负面影响。

 **因此解决方案是**标记化然后删除标点符号**。

```
import string

from nltk.tokenize import word_tokenize

tokens = word_tokenize("I'm a southern salesman.")
# ['I', "'m", 'a', 'southern', 'salesman', '.']

tokens = list(filter(lambda token: token not in string.punctuation, tokens))
# ['I', "'m", 'a', 'southern', 'salesman'] 
```

...然后，如果您愿意，可以将某些标记替换`'m`为`am`.

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-08-03T05:11:47.640

我认为您需要某种正则表达式匹配（以下代码在 Python 3 中）：

```
import string
import re
import nltk

s = "I can't do this now, because I'm so tired.  Please give me some time."
l = nltk.word_tokenize(s)
ll = [x for x in l if not re.fullmatch('[' + string.punctuation + ']+', x)]
print(l)
print(ll) 
```

输出：

```
['I', 'ca', "n't", 'do', 'this', 'now', ',', 'because', 'I', "'m", 'so', 'tired', '.', 'Please', 'give', 'me', 'some', 'time', '.']
['I', 'ca', "n't", 'do', 'this', 'now', 'because', 'I', "'m", 'so', 'tired', 'Please', 'give', 'me', 'some', 'time'] 
```

在大多数情况下应该可以正常工作，因为它删除了标点符号，同时保留了诸如“n't”之类的标记，这些标记无法从`wordpunct_tokenize`.

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-09-04T19:03:55.610

我使用此代码删除标点符号：

```
import nltk
def getTerms(sentences):
    tokens = nltk.word_tokenize(sentences)
    words = [w.lower() for w in tokens if w.isalnum()]
    print tokens
    print words

getTerms("hh, hh3h. wo shi 2 4 A . fdffdf. A&&B ") 
```

如果你想检查一个标记是否是一个有效的英文单词，你可能需要[PyEnchant](http://pythonhosted.org/pyenchant/)

教程：

```
 import enchant
 d = enchant.Dict("en_US")
 d.check("Hello")
 d.check("Helo")
 d.suggest("Helo") 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-11-25T06:53:41.853

您可以在没有 nltk (python 3.x) 的情况下在一行中完成。

```
import string
string_text= string_text.translate(str.maketrans('','',string.punctuation)) 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-08-08T19:34:02.957

只需将@rmalouf 添加到解决方案中，这将不包含任何数字，因为 \w+ 等效于 [a-zA-Z0-9_]

```
from nltk.tokenize import RegexpTokenizer
tokenizer = RegexpTokenizer(r'[a-zA-Z]')
tokenizer.tokenize('Eighty-seven miles to go, yet.  Onward!') 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-08-09T17:10:03.557

删除标点符号（它将删除 . 以及使用以下代码处理的部分标点符号）

```
 tbl = dict.fromkeys(i for i in range(sys.maxunicode) if unicodedata.category(chr(i)).startswith('P'))
        text_string = text_string.translate(tbl) #text_string don't have punctuation
        w = word_tokenize(text_string)  #now tokenize the string 
```

样本输入/输出：

```
direct flat in oberoi esquire. 3 bhk 2195 saleable 1330 carpet. rate of 14500 final plus 1% floor rise. tax approx 9% only. flat cost with parking 3.89 cr plus taxes plus possession charger. middle floor. north door. arey and oberoi woods facing. 53% paymemt due. 1% transfer charge with buyer. total cost around 4.20 cr approx plus possession charges. rahul soni 
```

`['direct', 'flat', 'oberoi', 'esquire', '3', 'bhk', '2195', 'saleable', '1330', 'carpet', 'rate', '14500', 'final', 'plus', '1', 'floor', 'rise', 'tax', 'approx', '9', 'flat', 'cost', 'parking', '389', 'cr', 'plus', 'taxes', 'plus', 'possession', 'charger', 'middle', 'floor', 'north', 'door', 'arey', 'oberoi', 'woods', 'facing', '53', 'paymemt', 'due', '1', 'transfer', 'charge', 'buyer', 'total', 'cost', 'around', '420', 'cr', 'approx', 'plus', 'possession', 'charges', 'rahul', 'soni']`**

# regex - 正则表达式大写单词和排除范围

> ID：15547410
> 
> 赞同：0
> 
> 时间：2013-03-21T12:22:09.937
> 
> 标签：regex

我需要的是这个：

1.  匹配所有资本`WORDS`
2.  匹配第一个字母的所有单词`Capital`
3.  匹配所有带有大写单词和字母之间的点的单词，例如`F.M.I`
4.  `áéíóúÁÉÍÓÚÑñ`在成功点 1,2,3 的单词中包含这些字母
5.  排除首字母大写的单词列表，如下所示：`En La El Los Ese`
6.  排除所有字母大写的单词列表，例如`SALUD`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:40:05.910

`^(([A-Z](\.[A-Z])+)|([A-Z][A-Za-z]+))$`匹配**首字母大写/所有大写/大写字母，由点**词分隔。

**它的作用是**：

*   `([A-Z](\.[A-Z])+)`匹配一个大写字母后跟一个或多个出现的模式**一个点后跟一个大写字母**- 第三个要求

*   `([A-Z][A-Za-z]+)`匹配一个大写字母后跟一个或多个字母（也允许单个大写字母，将 + 替换为 *） - 第一个和第二个要求

如果第一个字母是大写字母，要允许字符 áéíóúÁÉÍÓÚÑñ，只需将它们包含在字符类中

```
([A-Z][A-Za-záéíóúÁÉÍÓÚÑñ]+) 
```

为了排除某些单词，您可以使用否定的前瞻性，例如

```
^(?!SALUD)(?!Los)(([A-Z](\.[A-Z])+)|([A-Z][A-Za-záéíóúÁÉÍÓÚÑñ]+))$ 
```

这避免了 SALUD 和 Los 这两个词。

*   `(?!SALUD)`确保以下字符序列不是**SALUD**并且同样是`(?!Los)`

我没有很好地满足你的第四个要求。

[http://www.regular-expressions.info/](http://www.regular-expressions.info/)是学习正则表达式的好地方。

如果您想匹配而不考虑开始和结束，请移除锚点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:13:30.557

我认为这可能有效 \b(?!SALUD)(?!Los)((A-Z+)|([AZ][A-Za-záéíóúÁÉÍÓÚÑñ]+))

# c# - 涉及物品消失的奇怪问题

> ID：15547411
> 
> 赞同：4
> 
> 时间：2013-03-21T12:22:13.323
> 
> 标签：c#, .net, wpf, windows, user-interface

我有一个 ComboBox，它作为 ObservableCollection 作为其项目源。因此，组合框由标签组成。

我有许多可以由用户生成的用户控件，每个用户控件都可以有许多组合框。创建 UserControl 时，将带有 UserControl 名称的标签添加到 ObservableCollection，因此项目源为 ObservableCollection 的每个 ComboBox 现在也将添加最新的标签。

一切正常，ComboBoxes 在新的 UserControls 产生时填充，正如预期的那样。然而，一个非常奇怪的问题正在发生。

当用户打开一个 UserControl 的 ComboBox 下拉菜单时，他可以正常看到所有的标签。

然后，当用户打开另一个 UserControl 的 ComboBox 下拉菜单时，所有项目都以相同的方式显示。现在奇怪的问题是，当用户回到前一个 UserControl 的 ComboBox 时，项目消失了。标签仍然存在，因为我已经对其进行了调试，发现标签仍然作为项目包含，但是好像它们的高度已设置为 0（在调试时发现它们的高度不是 0，而是 26 in事实）。

包含相同数量的标签，如上面的屏幕截图所示，它们是可选择的，但不可见（只能看到那个蓝色的小条，表明它正在选择某些东西）。我不会在任何地方更改标签的高度。

**一位用户评论说 WPF 通过它所代表的集合来缓存 CollectionView，因此所有 ComboBoxes 共享相同的 CollectionView 实例。因此，标签只能有一个可视父级，因此当用户展开第二个 ComboBox 时，它会将标签与第一个分离。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:55:50.510

这是解决方案。`ComboBox`像这样更改您的并将您的绑定`ObservableCollection<T>`到`ComboBox`. 请注意，您应该将 更改`ObservableCollection<Label>`为`ObservableCollection<string>`。

```
<ComboBox x:Name="cmb1" Height="24" Margin="0,27,0,0" VerticalAlignment="Top" Width="131">
   <ComboBox.ItemTemplate>
       <DataTemplate>
           <Label Content="{Binding}"/>
       </DataTemplate>
   </ComboBox.ItemTemplate>
</ComboBox> 
```

我希望这有帮助。

# selenium - 我的表单中有一个组合框，我希望每次测试用例运行时 selenium ide 从组合框列表中随机选择一个值

> ID：15547413
> 
> 赞同：0
> 
> 时间：2013-03-21T12:22:18.547
> 
> 标签：selenium, combobox

我的表单中有一个组合框，我希望每次测试用例运行时 selenium ide 从组合框列表中选择一个随机值。

在硒中，我有这个：

```
Command: store
Target: javascript{Math.floor(Math.random())}
Value: man 
```

并在下一步中：

```
Command: select
Target: id of combo box
Value: ${man} 
```

但是当我运行测试用例时；它会产生一个错误：

> '[错误] 未找到标签为 '0' 的选项'。

我怎样才能完成这项任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:18:13.650

您的 java 脚本代码始终将结果显示为 0。您的 java 脚本需要稍作更改才能正常工作。使用以下代码，

**命令：** store**目标：** javascript{Math.floor(Math.random()*3)}**值：** man

这将在每次运行时给出一个介于 0 到 2 之间的随机值。公式中使用的值 3 是一个变量，它代表 ComboBox 中项目的计数。如果 ComboBox 中有 6 个项目，则必须将 3 替换为 6。

下一行是根据 id 值选择一个 ComboBox 项，

**命令：**选择**目标：** css=select**值：** id=${man}

但是有一个问题，为了使它起作用，所有标签中都应该有一个 id 属性，其增量数值为 0,1,2,..etc。

例如，

```
<select>
  <option id="0">Milk</option>
  <option id="1">Tea</option>
  <option id="2">Coffee</option>
</select> 
```

或者让它以你写的方式工作，即，

**命令：**选择**目标：** css=select**值：** ${man}

那么 ComboBox 应该具有从 0、1、2、3 等递增的值。例如，HTML 代码将如下所示，

```
<select>
  <option>0</option>
  <option>1</option>
  <option>2</option>
</select> 
```

* * *

### 更新

* * *

根据您的最新回复，我修改了公式并且它有效，

**命令：** storeEval**目标：** {var myList=new Array(111,222,333,444,888,999,555,777,221,"ADA","AD"); myList[Math.floor(Math.random()*11)]}**值：** myListVal

**命令：**选择**目标：** css=select**值：** ${myListVal}

**细节**

{var myList=new Array(111,222,333,444,888,999,555,777,221,"ADA","AD"); myList[Math.floor(Math.random()*11)]}

1.  创建了一个 Array **myList**并将其与列表中所需的值一起存储。
2.  由于有 11 个列表项，我创建了一个公式 Math.floor(Math.random()*11)，它将随机生成从 0 到 10 的值。
3.  当从 Selenium-IDE 执行时，**myList**数组的索引值会从 0 到 10 随机变化。这将导致 myList 的数组值不同，存储到变量**myListVal**中。

# iphone - 用于屏幕截图的 iPhone 或 MacBook 库存图片

> ID：15547414
> 
> 赞同：0
> 
> 时间：2013-03-21T12:22:24.027
> 
> 标签：iphone, photoshop, psd

我确信对此有一个明显的答案，我只是使用了错误的搜索条件。我不知道还有什么地方可以问这个！

我有一个作为 iPhone 应用程序和 Mac 桌面应用程序运行的应用程序。在整个网络上，当有人想要展示一个应用程序时，他们会在 iPhone 的屏幕上显示应用程序屏幕截图的图像。这款 iPhone 几乎总是在屏幕右上角有一个浅色阴影。例如[http://www.sparrowmailapp.com/iphone.php](http://www.sparrowmailapp.com/iphone.php)。这只是对可以通过谷歌搜索找到的任意数量的 iPhone 库存图像的编辑，例如[http://images.apple.com/iphone/design/images/hero_front.jpg](http://images.apple.com/iphone/design/images/hero_front.jpg)。但是，它具有这种一致的阴影。这告诉我某处有一个带有 iPhone 外壳的 PSD，中间有一个空白区域可将您的屏幕截图复制到其中，而光影则保留在顶层。

但是我在哪里可以找到这个？Apple 网站上有某种生成器吗？有人在某处发布了一组官方资产吗？我正在寻找 iPhone 5 版本和 MacBook 版本。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:27:05.427

这是题外话。虽然登录到您的开发者帐户并查找设备 psd 的营销资源。

编辑：

[这是网址](https://developer.apple.com/appstore/resources/marketing/index.html)

# javascript - 在循环内定义函数，i 的值未定义或不可预测

> ID：15547417
> 
> 赞同：1
> 
> 时间：2013-03-21T12:22:28.760
> 
> 标签：javascript, function, loops, closures

我很想对此进行一些解释（取自 javascriptkit.com）：

```
function buildList(list) {
  var result = [];
  for (var i = 0; i < list.length; i++) {
    var item = 'item' + list[i];
    result.push( function() {alert(item + ' ' + list[i])} );
  }
  return result;
}

function testList() {
  var fnlist = buildList([1,2,3]);
  // using j only to help prevent confusion - could use i
  for (var j = 0; j < fnlist.length; j++) {
    fnlist[j]();
  }
} 
```

所以`testList()`很简单。我尝试一步一步地遵循第一个函数，这就是我认为它会返回的内容：

项目 1 1
项目 2 2
项目 3 3

我不明白的是如何`result`返回`item 3 undefined`3 次 - 为什么未定义，为什么只有`item 3`？

- 在我努力学习的过程中，我并不想让它发挥作用，而是要了解我缺少什么部分以及为什么它没有像我期望的那样出现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T12:24:46.627

有什么问题？

for 循环中的函数有一个引用，`i`但`i`在每次迭代中都会发生变化，因此当您调用循环中声明的函数时，它将使用`i`它的最后一个值（3）。

一个简单的闭包将保存索引值不变：

```
for (var i = 0; i < list.length; i++) {
    (function(index){
        var item = 'item' + list[index];  // why ?
        result.push( function() {alert(item + ' ' + list[index])} );    
    })(i);    
} 
```

**笔记：**

`var item = 'item' + list[index];`如果您重新查找列表中的值，为什么需要？

**基于问题的**更新更改，****

 **因为`i`具有最终值- 3 ，这使您的代码处于最终迭代中：

```
// i equals to 2 here
var item = 'item' + list[i]; // gives item3
result.push( function() {alert(item + ' ' + list[i])} );
// now `i` is changed to three so we don't enter the loop. 
```

价值观：

*   `item`==`"item3"`
*   `i == 3`
*   `list[i]`== `list[3]`== `undefined`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:46:00.263

重要的是要理解由返回的数组`buildList`包含`3`共享相同闭包的函数。每次更改该闭包的局部变量时 - 它都会影响共享它的所有函数。换句话说，`i`和`item`result`list`中所有函数的变量都是相同的。在循环遍历 之后`list`， 的值`i`保持等于，`3`并且对于 in 中的所有函数都是如此，`result`因为它们共享对该变量的引用。因此，您的问题的答案将是这样的：

**为什么未定义？**

因为`list[3] === undefined`

**为什么`item 3`？**

因为最后一次`item`变量被修改是什么时候`i`执行`2`它`for`的主体（`list[2] === 3`因此`item === 'item 3'`）**

# matlab - 2个样本kolmogorov-smirnov gof matlab的不同结果

> ID：15547421
> 
> 赞同：0
> 
> 时间：2013-03-21T12:22:35.630
> 
> 标签：matlab, math, statistics

我在 matlab 中进行了 GOF 测试，但两个样本 Kolmogorov Smirnov 测试给了我相反的结果。在matlab中我使用了这段代码

```
file=importdata('all_subj_1file.xls','\t');
[ill1]=xlsread('all_subj_1file.xls','ill1','B2:E1608');
ill1_frac=ill1(:,2);
[a,b]=gamfit(ill1_frac);
y=gamrnd(a(1),a(2),1607,1); %same length gamma
[h, p, ks2stat]=kstest2(ill1_frac, y) 
```

但有时我也会变得不同`p`（`ks2stat`可能是因为我每次运行代码时都会生成新的 gamrnd）。
**问题是**如何选择 Kolmogorov-Smirnov 的结果？我应该多次运行代码并选择我最喜欢的那个吗？但它们是相反的（如 Ho 或 H1 偏差水平）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:00:55.247

为了获得理论分布的 GOF，应使用一个样本 Kolmogorov Smirnov 检验而不是两个样本 KS 检验。

# android - 如何在 android 中默认设置 RadioGroup 未选中？

> ID：15547424
> 
> 赞同：6
> 
> 时间：2013-03-21T12:22:50.937
> 
> 标签：android, radio-group

我正在做一个应用程序来进行简单的测验。我给出的答案是使用[`RadioGroup`](http://developer.android.com/reference/android/widget/RadioGroup.html). 那么在加载每个问题时，我如何[`RadioGroup`](http://developer.android.com/reference/android/widget/RadioGroup.html)默认设置未选中？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-21T12:26:40.200

只需将`checked`XML for each 中的属性设置`RadioButton`为 false：

```
android:checked="false" 
```

那应该可以解决问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-21T12:25:49.733

你看过安卓开发者指南吗？

[http://developer.android.com/reference/android/widget/RadioGroup.html](http://developer.android.com/reference/android/widget/RadioGroup.html)

> 最初，所有单选按钮都未选中。

尽管您可以使用该[`clearCheck()`](http://developer.android.com/reference/android/widget/RadioGroup.html#clearCheck%28%29)方法在代码中执行此操作

> 清除选择。清除选择时，不会选择该组中的单选按钮，getCheckedRadioButtonId() 返回 null。

也许您的问题可能与我的理解不同。也许更多地解释你如何加载问题等等。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T12:24:48.280

尝试

```
RadioGroup.check(0) 
```

0 是一个 id，它永远不会由 adt 生成

更新：来自 RadioGroup 的来源

```
public class RadioGroup extends LinearLayout {
    // holds the checked id; the selection is empty by default
    private int mCheckedId = -1;
    ... 
```

# php - SimpleSAMLphp 保持登录状态

> ID：15547429
> 
> 赞同：1
> 
> 时间：2013-03-21T12:23:00.013
> 
> 标签：php, cookies, saml-2.0

我对 config.php 中的 cookie 设置感到困惑。

我有一个身份提供者和三个服务提供者。我希望我的用户在 x 天内重新访问该网站时能够保持登录状态。我设置`session.cookie.lifetime`为 7 天 (60*60*24*30)

并`session.duration`设置为默认 8 小时 (60*60*8)。

如果 cookie 未过期，如何使用 cookie 自动重新登录？会话持续时间似乎优先于 cookie 生命周期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-12T09:40:00.263

cookie 使用会话数据进行验证，因此在您的情况下，两者都`session.duration`必须`session.cookie.lifetime`至少为 7 天。会话过期时 cookie 毫无价值，因为服务器无法识别它。

通常选择`session.duration`比`session.cookie.lifetime`允许时钟偏差大一点是个好主意。

# c# - 将数据从 IEnumerable 对象导出到 c# 中的 Excel 数据表的优雅方式？

> ID：15547434
> 
> 赞同：1
> 
> 时间：2013-03-21T12:23:08.873
> 
> 标签：c#, excel, datatable, ienumerable, populate

我的数据保存在 IEnumerable 对象中，我希望将其填充到 Excel 中的表中。

基本上我能够将数据导出到 Excel 工作表，但我不知道以更优雅的方式导出表格。

这就是我所拥有的：

```
 //Populate column names
 String[] columnNames = {"val1", "val2", "val3", "val4", "val5"};
 for (int p = 1, l = 1; l <= 5;l++)
 {
           xlWorkSheet.Cells[p, l] = columnNames[l-1]; 
 }

 //Entries is an IEnumerable object
 int i = 1;
 foreach (var e in Entries)
 {
            int j = 1;
            xlWorkSheet.Cells[i, j] = e.val1; j++;
            xlWorkSheet.Cells[i, j] = e.val2; j++;
            xlWorkSheet.Cells[i, j] = e.val3; j++;
            xlWorkSheet.Cells[i, j] = e.val4; j++;
            xlWorkSheet.Cells[i, j] = e.val5; j++; 
            i++; 
  } 
```

我正在考虑将数据从 IEnumerable 转换为数据表，例如[将 IEnumerable 转换为 DataTable](https://stackoverflow.com/questions/1253725/convert-ienumerable-to-datatable)，但我认为它会引入额外的一层不必要的复杂性。

你怎么认为？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:37:01.820

我强烈推荐[EPPlus](http://epplus.codeplex.com/)来格式化 Excel 输出。我最近不得不这样做并查看了许多不同的方法，但这是最好的！

尽管就输出而言，这实际上取决于您要实现的目标。

从他们的文档中，EPPlus 支持....

*   EPPlus 支持：
*   单元格范围
*   单元格样式（边框、颜色、填充、字体、数字、对齐方式）
*   图表
*   图片
*   形状
*   评论
*   表
*   保护
*   加密
*   数据透视表
*   数据验证
*   条件格式
*   VBA
*   还有很多...

编辑：我刚刚意识到问题是关于优雅的导出方式。在这种情况下，您的做法并没有太大问题。但是对于 Excel 端的格式化，我支持我的（很大程度上无关但对某些人有用）的帖子。:)

# java - 当迭代数以百万计时，打印循环状态的有效方法是什么

> ID：15547435
> 
> 赞同：0
> 
> 时间：2013-03-21T12:23:09.750
> 
> 标签：java, algorithm, data-structures

假设我正在逐行读取一个文件（包含 8 亿行），然后处理数据（非常轻量级的处理，基本上是格式化字符串），然后将处理后的行写入另一个文件。

如果我想为从文件中读取的每 100 万行打印一个语句，一个基本的方法是添加一个 if 语句检查迭代变量，并且对于每个 %million == 0，我打印该语句。

现在，这段代码在每次迭代中检查索引是否达到下一个百万，这是每次迭代中的额外处理，对吗？

有没有其他有效的方法可以做到这一点，只有当迭代索引变量达到百万倍时，才会发送一些信号并打印语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:29:34.563

> 现在，这段代码在每次迭代中检查索引是否达到下一个百万，这是每次迭代中的额外处理，对吗？

正确的

> 有没有其他有效的方法可以做到这一点，只有当迭代索引变量达到百万倍时，才会发送一些信号并打印语句？

不，没有¹。

但不要担心这是“低效的”。测试的成本很可能比读取和处理数据的成本低*2 个或更多数量级。*

^(1 - 经过反思，在某些情况下，减少专用计数器并测试它是否为零可能更有效。此外，如果计数器溢出，'%' 方法将无法正常工作。)

* * *

一般建议。不要花时间在这个级别上“优化”事情，除非你有**证据**表明你有瓶颈。您需要使用*真实*数据来分析您的应用程序，以便您可以决定是否值得优化应用程序的这一方面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T12:29:52.630

在我的机器上，以下需要 1.4 秒：

```
 for (int i = 0; i < 800000000; ++i) {
        if (i % 1000000 == 0) {
            System.out.print('.');
        }
    } 
```

这表明你会没事的。但是，如果有疑问，请提供个人资料。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T14:21:59.407

如果你想要一个线性解决方案，就像*Stephen C*所说的那样，这是不可能的最佳方式，

但是当我们谈论并行性时，有一个最佳解决方案，

例如，如果您的迭代进程状态可以被另一个正在另一个处理器上工作的线程访问，那么它可以在给定时间点告诉您它的状态，而不会中断您的迭代进程，

这也是*最佳*的，因为打印状态会花费您的迭代过程**Θ(0)**，因为它是由外部线程在并行处理流\处理器上完成的

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T13:17:42.653

您有 800M 行文本数据，需要处理然后复制到单个 TextFile

*   我更喜欢公共参数“NotifyAfter”，在你的情况下是 1M 。
*   然后，如果需要，我可以将 800M 行拆分为一批 {NotifyAfter} 并将它们存储在数组或队列中 {Start,End} 。
*   现在我可以产生一些线程，我必须小心这里的 Race/Deadlock，因为它们都是从同一个文件中读取的。
*   然后每个子流程将完成它的工作并引发一个事件 - TaskComplete（增加已处理的行数）
    *   在这里，您必须决定 - 您的线程是否将所有内容写入较小的文件，然后将它们拼接在一起
    *   或者您可以同步代码以写入同一个文件。

我同意斯蒂芬-不要优化，除非有瓶颈的证据

希望这可以帮助 ！！

# android - 录制的声音文件（ala google now，google keep）- RecognizerIntent/Listener

> ID：15547438
> 
> 赞同：4
> 
> 时间：2013-03-21T12:23:15.217
> 
> 标签：android, voice-recognition, speech-to-text, voice-recording

我一直在开发一个使用识别器意图来获取语音输入的应用程序。然而，自从 jelly bean 推出以来，我一直无法从我的语音输入中获取实际的声音文件。

在识别监听器 ( [http://developer.android.com/reference/android/speech/RecognitionListener.html](http://developer.android.com/reference/android/speech/RecognitionListener.html) ) 中有一个名为 onBufferReceived 的方法。但是，没有承诺会调用此方法，并且当我实现它时，它从未被调用过。有什么方法可以强制执行此方法，或者收集识别器意图分析的声音文件的“最佳实践”方法是什么？

这应该是可能的，因为谷歌现在都可以使用语音命令“note-to-self”来做到这一点，而 Google Keep:s voice-notes 也是如此。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:45:48.777

我不认为有办法强迫它。这显然取决于识别服务的实现。如果谷歌决定不打电话`onBufferReceived`，那么就没有办法获得所使用的实际数据。请注意，上述谷歌应用程序不使用（公共）意图/服务 API 来访问语音识别，但似乎在应用程序中使用私有 API（语音识别可能捆绑在他们的应用程序中）。

# java - 拆分ArrayList to multiple depending on int value in Object I have an ArrayList containing Objects, these objects have multiple values. Now I would like to split up this list in to mulptiple lists depeding on an int value in 问问题 问问题 2013-03-21T12:23:26.557 3392 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have an ArrayList containing Objects, these objects have multiple values. Now I would like to split up this list in to mulptiple lists depeding on an int value in the objects. So if for example: 2 Objects have an int with value 1 3 Objects have an int with the value 3 So the arraylist has 5 objects, and I'd like to get: 2 Arraylists, 1 with the first objects en 1 with the second objects (more if there are more different int values) Sorry if it is confusing.. First create a cache like this: Map<integer, list<yourobjecttype="">> Then cycle through each of your objects, and use your integer to access the above Map, if the value is null, create a new List and put it in the Map, then add your object to the List. The end result would be a map with two entries, each containing a list of entries with the integer from your object being the discriminator. Here's the code: Map<integer, list<yourobject="">> cache = new HashMap<integer, list<yourobject="">>(); for (YourObject yo : yourObjectListArrayWhatever) { List <yourobject>list = cache.get(yo.getIntegerValue()); if (list == null) { list = new ArrayList<yourobject>(); cache.put(yo.getIntegerValue(), list); } list.add(yo); } javaobjectarraylistsplit 4 2 回答 2 This answer is useful 7 首先创建一个这样的缓存：Map<integer, list<yourobjecttype="">> 然后循环遍历您的每个对象，并使用您的整数来访问上面的Map，如果值为 null，则创建一个新对象List并将其放入Map，然后将您的对象添加到List. 最终结果将是一个包含两个条目的映射，每个条目都包含一个条目列表，其中来自您的对象的整数是鉴别器。 这是代码： Map<integer, list<yourobject="">> cache = new HashMap<integer, list<yourobject="">>(); for (YourObject yo : yourObjectListArrayWhatever) { List <yourobject>list = cache.get(yo.getIntegerValue()); if (list == null) { list = new ArrayList<yourobject>(); cache.put(yo.getIntegerValue(), list); } list.add(yo); } 于 2013-03-21T12:27:31.963 回答 This answer is useful 0 How do you store an int value in Object? I'm sure you have an implementation that is derived from Object and in that case you should use generecity at a lower point of the hierarchy. Say you have a class Person with an int value and then subclasses Man extends Person and Woman extends Person and you populate this ArrayList with men and women, you would do so like so: List <person>pList = new ArrayList<person>(); Now, in your Person class you should have a get-method for the int value. For example if the int value is the person's age: public int getAge() { return age; } Then, to finally answer your question I would go about like so: List <person>firstList = new ArrayList<person>(); List <person>secondList = new ArrayList<person>(); for (Person person:pList) { if (person.getAge()==1) { firstList.add(person); } else if (person.getAge()==3) { secondList.add(person); } }//for I hope I answered your question adequately. 于 2013-03-21T12:37:41.190 回答 Related 1 java - 如何在 WeldListener 中捕获 isHexDigit 异常？ 1 php - 安装 laravel 时项目受到影响 2 javascript - Twig：为 js 转义 simplequote 0 python - Python channeladvisor OrderService, suds.client.Client(url), urllib2.URLError: 1 ruby-on-rails - Rails - 参数数量错误（1 代表 0） 13 ios - 透明 UITableViewHeaderFooterView 1 asp.net-mvc - 提高我的自定义授权模块的性能和可扩展性 3 riak - Riak：运行“riak-admin test”后“读取测试值失败：{error,{insufficient_vnodes,0,need,1}}” 2 java - 在 apache shiro 中获取令牌提交的异常身份验证失败 1 mysql - 将 Amazon RDS 表名重命名为大写字母会引发错误 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</person></person></person></person></person></person></yourobject></yourobject></integer,></integer,></integer,></yourobject></yourobject></integer,></integer,></integer,>

> ID：15547444
> 
> 赞同：1
> 
> 时间：
> 
> 标签：java, object, arraylist, split

I have an ArrayList containing Objects, these objects have multiple values.

Now I would like to split up this list in to mulptiple lists depeding on an int value in the objects.

So if for example:

2 Objects have an int with value 1
3 Objects have an int with the value 3

So the arraylist has 5 objects, and I'd like to get:

2 Arraylists, 1 with the first objects en 1 with the second objects (more if there are more different int values)

Sorry if it is confusing..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T12:27:31.963

首先创建一个这样的缓存：`Map<Integer, List<YourObjectType>>`

然后循环遍历您的每个对象，并使用您的整数来访问上面的`Map`，如果值为 null，则创建一个新对象`List`并将其放入`Map`，然后将您的对象添加到`List`.

最终结果将是一个包含两个条目的映射，每个条目都包含一个条目列表，其中来自您的对象的整数是鉴别器。

这是代码：

```
Map<Integer, List<YourObject>> cache = new HashMap<Integer, List<YourObject>>();
for (YourObject yo : yourObjectListArrayWhatever) {
  List<YourObject> list = cache.get(yo.getIntegerValue());
  if (list == null) {
    list = new ArrayList<YourObject>();
    cache.put(yo.getIntegerValue(), list);
  }
  list.add(yo);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:37:41.190

How do you store an int value in Object? I'm sure you have an implementation that is derived from Object and in that case you should use generecity at a lower point of the hierarchy.

Say you have a class Person with an int value and then subclasses Man extends Person and Woman extends Person and you populate this ArrayList with men and women, you would do so like so:

```
List<Person> pList = new ArrayList<Person>(); 
```

Now, in your Person class you should have a get-method for the int value. For example if the int value is the person's age:

```
public int getAge() { return age; } 
```

Then, to finally answer your question I would go about like so:

```
List<Person> firstList = new ArrayList<Person>();
List<Person> secondList = new ArrayList<Person>();
for (Person person:pList) {
    if (person.getAge()==1) {
        firstList.add(person);
    }
    else if (person.getAge()==3) {
        secondList.add(person);
    }
}//for 
```

I hope I answered your question adequately.

# python - Python 绘图。如何绘制 f(x,y)？

> ID：15547448
> 
> 赞同：0
> 
> 时间：2013-03-21T12:23:47.190
> 
> 标签：python, matplotlib, plot, visualization, correlation

我对 Python 比较陌生。我有一列数据 x 和另一列数据 y （它们都是浮动的）。我已将它们保存为列表 a 和 b。

我想绘制相关性以及 10 行 a 和 b 之间的标准差。所以本质上，我想绘制：

```
 |
   |
 x |  corr(x,y), stdev(x,y)
   |
   |
   |_________
        y 
```

有人可以告诉我如何在 Python 中执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:10:43.230

对于您问题的第一部分...绘制 2 个相互关联的列表（相关性）我想参考[以下网站](http://bespokeblog.wordpress.com/2011/07/07/basic-data-plotting-with-matplotlib-part-2-lines-points-formatting/)，该网站有一个非常清晰的示例。

您能否详细说明（澄清）您问题的第二部分（stdev.）？

您想在数据集上绘制标准差（为 1 个常数吗？）？
或者你想绘制相关函数的标准偏差（不太了解统计数据，但我很确定这是否有意义：D）？

问候，

M。

# jquery - 使用 jQuery 加载表单时显示 div 的单选按钮

> ID：15547450
> 
> 赞同：0
> 
> 时间：2013-03-21T12:23:58.513
> 
> 标签：jquery, forms

我在下面遇到的问题是我正在使用一个通过几个不同阶段的表单，并且单击功能会触发“显示”。

有没有办法让节目由类似于 onload 的东西触发？

所以在这里解释更大的图景。我有一个带有单选按钮的表单来“添加图像”。表格的第 1 阶段适用于作者。表单的第 2 阶段适用于内容编辑器。这样表单就完成了并传递给了内容编辑器。如果在第 1 阶段选中单选按钮，则会显示 div。当此表单传递到第 2 阶段时，我仍需要显示 div。希望这能进一步解释我的问题。

第 2 阶段是一个完全不同的页面。

对不起，这是我第一次来这里！

### 标记

```
<input type = radio id = "image1" name = "image1" > image 1 </input>
<input type = radio id = "image2" name = "image2" > image 2 </input>
<div id= "div-id1" style="display:none"> image 1</div>
<div id= "div-id2" style="display:none"> image 2</div> 
```

### JavaScript

```
$("#image1").click(function(){

    if ($("#image1").is(":checked")) {
      //show the hidden div
       $("#div-id1").show("slide");
    } 
    else {
      $("#div-id1").hide("slide");
    }
});

$("#image2").click(function(){
    if ($("#image2").is(":checked")) {
      //show the hidden div
      $("#div-id2").show("slide");
    } 
    else {
      $("#div-id2").hide("slide");
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:32:02.863

试试这个。它对我有用[DEMO](http://jsfiddle.net/LWLwh/1/)

```
$("#image1").click(function(){
    if ($("#image1").is(":checked")) {
      //show the hidden div
       $("#div-id1").show();

    }
});

$("#image2").click(function(){
    if ($("#image2").is(":checked")) {
      //show the hidden div
      $("#div-id2").show();

    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:36:07.200

[`hide()`](http://api.jquery.com/hide/)并[`show()`](http://api.jquery.com/show/)在 jQuery 中将 a`duration`作为第一个参数。

有一个`slideDown()`and`slideUp()`功能，但我认为这不是你想要的。

[看看这个小提琴](http://jsfiddle.net/Cwalkdawg/AgkR6/20/)

### 新标记

```
<input type="checkbox" id="image1" class="imageBox" name="image1" checked>image 1</input>
<input type="checkbox" id="image2" class="imageBox" name="image2">image 2</input>
<div id="image1Container" class="imageContainer" style="display:none">image 1</div>
<div id="image2Container" class="imageContainer" style="display:none">image 2</div> 
```

### 对应代码

```
(function () {
    var showImgBlock = function (img, container) {
        (img.is(":checked")) ? container.show(500) : container.hide(300);
    };

    $(".imageBox").each(function () {
        item = this.id;
        showImgBlock($("#" + item), $("#" + item + "Container"));

    }).click(function () {
        item = this.id;
        showImgBlock($("#" + item), $("#" + item + "Container"));
    });;
})(); 
```

现在发生的情况是您的复选框有一个类 ( `.imageBox`)。当文档加载时，每个`.imageBox`都经过检查，以检查相应容器`id`名称被拉出的特定复选框。`div`

我认为创建一个函数将是有益的。这样您就不需要`if/else`一遍又一遍地键入相同的块。记住，[重复的代码是不好的](http://en.wikipedia.org/wiki/Duplicate_code)

另外，我不知道它是否超出了您的项目范围，但是在我的 Fiddle 中，我使用`checkbox`了而不是`radio`那种方式，您也可以取消选择它们。改变它，保留它，由你决定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:34:52.597

尝试这个

```
$("#image1").click(function(){

if ($(this).is(":checked")) {

     $("#div-id1").show("slide up");

}
});
$("#image2").click(function(){

if ($(this).is(":checked")) {

     $("#div-id2").fadeIn("slow");
}
}); 
```

[http://jsfiddle.net/tamilmani/2CJdd/](http://jsfiddle.net/tamilmani/2CJdd/)

# git - 在推送时让 git 重新格式化源代码

> ID：15547459
> 
> 赞同：7
> 
> 时间：2013-03-21T12:24:24.660
> 
> 标签：git, formatting, githooks

我正在管理一个开发团队，每个人都使用 Eclipse 和相同的格式设置。

现在一些开发人员有理由切换到其他 IDE，这些 IDE 的源代码格式不同。因此，当他们现在推送到 git origin 存储库时，git 会注意到很多外观差异。不幸的是，对于一些开发人员来说，这是一个大问题。

有没有办法让 git - 也许通过使用钩子 - 重新格式化推送或最好提交的所有内容，所以 repo 中的代码总是独立格式化 IDE？

我假设我们不是 git-history 中第一个遇到这个问题的团队，所以我希望有一个预制解决方案或至少一些最佳实践。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T13:04:43.323

可靠地做到这一点的唯一方法是在服务器端（出于安全原因，在克隆期间不会自动设置客户端挂钩，因此如果您按照其中一条评论中的建议在客户端执行此操作，则每个开发人员都必须手动设置该钩子一次）。

理论上，您可以在那里操纵收到的更新……但这是一件相当复杂的事情。但是，实际的*问题*是，一旦完成，您在本地就有自己的、未触及的提交，并且在服务器上有修改过的提交——这是自找麻烦。如果您现在要进行拉取/合并，git 会将未修改的历史记录与修改的历史记录结合起来，突然间您将所有提交都两次。

如果您想确保只有格式正确的代码最终出现在存储库中，那么如果您*拒绝*格式不正确的代码，它会更容易并且导致的问题更少。当然，这在实践中可能相当烦人，但这是您必须做出的权衡。

假设您可以让您的开发人员进行本地挂钩设置，那么本地预提交挂钩几乎肯定会更容易编写并且在实践中减少麻烦 - 但它可以通过各种方式绕过，所以没有铁定的保证.

# android - 获取editText标签时出现空指针异常

> ID：15547461
> 
> 赞同：-2
> 
> 时间：2013-03-21T12:24:28.987
> 
> 标签：android, nullpointerexception

我在以下 if 循环中收到空指针异常：

```
...
if (tmp_tag.getName().equals("Tags")) {
            e.setText(stringBuilder.toString());
        }
... 
```

我什至检查了标签是否正确设置为editTexts，但仍然出现“空指针异常”。不知道我在哪里缺少代码。事实上，我什至不知道如何调试应用程序来查找错误。请帮我...

这是我的活动 Java 代码：

```
package com.walletapp;

import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.ContentValues;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;

public class AddRecords extends Activity {

Spinner spinner, spinner_tags;
SQLiteDatabase database;
ArrayList<String> spinner_list, tags_list, cat_field_list;
String[] tags;
ArrayList<CharSequence> selectedTags = new ArrayList<CharSequence>();
TextView tv_1, tv_2, tv_3, tv_4, tv_5, tv_6, tv_7, tv_8, tv_9, tv_10,
        tv_11, tv_12, tv_13;
EditText et_1, et_2, et_3, et_4, et_5, et_6, et_7, et_8, et_9, et_10,
        et_11, et_12, et_13;
TextView[] tv;
EditText[] et;
Button btn_save;
int cat_id;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_add_records);

    this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

    tv_1 = (TextView) findViewById(R.id.textView1);
    tv_2 = (TextView) findViewById(R.id.textView2);
    tv_3 = (TextView) findViewById(R.id.textView3);
    tv_4 = (TextView) findViewById(R.id.textView4);
    tv_5 = (TextView) findViewById(R.id.textView5);
    tv_6 = (TextView) findViewById(R.id.textView6);
    tv_7 = (TextView) findViewById(R.id.textView7);
    tv_8 = (TextView) findViewById(R.id.textView8);
    tv_9 = (TextView) findViewById(R.id.textView9);
    tv_10 = (TextView) findViewById(R.id.textView10);
    tv_11 = (TextView) findViewById(R.id.textView11);
    tv_12 = (TextView) findViewById(R.id.textView12);
    tv_13 = (TextView) findViewById(R.id.textView13);

    tv = new TextView[] { tv_1, tv_2, tv_3, tv_4, tv_5, tv_6, tv_7, tv_8,
            tv_9, tv_10, tv_11, tv_12, tv_13 };

    et_1 = (EditText) findViewById(R.id.editText1);
    et_2 = (EditText) findViewById(R.id.editText2);
    et_3 = (EditText) findViewById(R.id.editText3);
    et_4 = (EditText) findViewById(R.id.editText4);
    et_5 = (EditText) findViewById(R.id.editText5);
    et_6 = (EditText) findViewById(R.id.editText6);
    et_7 = (EditText) findViewById(R.id.editText7);
    et_8 = (EditText) findViewById(R.id.editText8);
    et_9 = (EditText) findViewById(R.id.editText9);
    et_10 = (EditText) findViewById(R.id.editText10);
    et_11 = (EditText) findViewById(R.id.editText11);
    et_12 = (EditText) findViewById(R.id.editText12);
    et_13 = (EditText) findViewById(R.id.editText13);

    et = new EditText[] { et_1, et_2, et_3, et_4, et_5, et_6, et_7, et_8,
            et_9, et_10, et_11, et_12, et_13 };

    selectedTags = new ArrayList<CharSequence>();
    build_tags_list();

    btn_save = (Button) findViewById(R.id.buttonAddRecordsSave);
    btn_save.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            loadDatabase();
            String currentDate = new SimpleDateFormat("yyyy/MM/dd")
                    .format(Calendar.getInstance().getTime());

            // ----------first insert into records_data table------------

            Tag tmp_tag = (Tag) et_1.getTag();
            ContentValues values = new ContentValues();

            values.put("cat_id", tmp_tag.getCat_id());
            values.put("tag_id", "0");
            values.put("is_favourite", "0");
            values.put("rec_name", et_1.getText() + "");
            values.put("is_delete", "0");
            values.put("create_date", currentDate);
            values.put("update_date", "0");

            database.insert("records_data", null, values);
            values.clear();

            // --------now insert the rest of the entries except "Tags" into
            // records_fields_data table---------

            // ----------------first we fetch rec_id from records_data

            int rec_id = 0;
            Cursor cursor = database.query("records_data",
                    new String[] { "rec_id" }, "rec_name=?",
                    new String[] { et_1.getText() + "" }, null, null, null);
            while (cursor.moveToNext()) {
                rec_id = cursor.getInt(0);
            }
            cursor.close();

            // ---------------use rec_id to insert into records_fields_data

            for (EditText e : et) {
                Tag tmp = (Tag) e.getTag();

                if (tmp.getName().equals("Tags")) {
                    continue;
                } else {
                    values.put("rec_id", rec_id);
                    values.put("cat_field_id", "0");
                    values.put("field_value", e.getText() + "");
                    values.put("is_delete", "0");
                    values.put("create_date", currentDate);
                    values.put("update_date", "0");

                    database.insert("records_fields_data", null, values);
                    values.clear();
                }
            }

            // --------now insert into record_tag_relation table

            if (selectedTags.size() != 0)
                for (CharSequence s : selectedTags) {
                    values.put("cat_id", cat_id);
                    values.put("tag_id", get_tag_id(s));
                    database.insert("record_tag_relation", null, values);
                    values.clear();
                }
        }
    });

    spinner = (Spinner) findViewById(R.id.spinnerAddRecords);
    cat_field_list = new ArrayList<String>();
    build_spinner_list();
    spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {

            cat_id = getId(arg0.getItemAtPosition(arg2) + "");
            generateUI(arg0.getItemAtPosition(arg2) + "");
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {

        }
    });
}

public int get_tag_id(CharSequence s) {

    int tag_id = 0;
    Cursor cursor = database.query("tags", new String[] { "tag_id" },
            "tag_name=?", new String[] { s + "" }, null, null, null);
    while (cursor.moveToNext()) {
        tag_id = cursor.getInt(0);
    }

    return tag_id;
}

protected void showSelectTagsDialog() {

    boolean[] checkedTags = new boolean[tags.length];
    int count = tags.length;

    for (int i = 0; i < count; i++)
        checkedTags[i] = selectedTags.contains(tags[i]);

    DialogInterface.OnMultiChoiceClickListener tagsDialogListener = new DialogInterface.OnMultiChoiceClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which,
                boolean isChecked) {
            if (isChecked)
                selectedTags.add(tags[which]);
            else
                selectedTags.remove(tags[which]);

            onChangeSelectedTags();
        }
    };

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Select Tag(s)");
    builder.setMultiChoiceItems(tags, checkedTags, tagsDialogListener);
    builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            dialog.dismiss();
        }
    });

    AlertDialog dialog = builder.create();
    dialog.show();
}

public void onChangeSelectedTags() {

    StringBuilder stringBuilder = new StringBuilder();

    for (CharSequence tag : selectedTags)
        stringBuilder.append(tag + ",");

    Tag tmp_tag = null;
    for (EditText e : et) {

        tmp_tag = (Tag) e.getTag();
        // Toast.makeText(getBaseContext(), e.getText()+"",
        // Toast.LENGTH_SHORT).show();
        if (tmp_tag.getName().equals("Tags")) {
            e.setText(stringBuilder.toString());
        }
    }
}

private void build_tags_list() {

    loadDatabase();

    tags_list = new ArrayList<String>();
    Cursor cursor = database.query("tags", new String[] { "tag_name" },
            null, null, null, null, null);
    while (cursor.moveToNext())
        tags_list.add(cursor.getString(0));
    cursor.close();
    database.close();

    tags = tags_list.toArray(new String[tags_list.size()]);
}

private void build_spinner_list() {
    loadDatabase();

    spinner_list = new ArrayList<String>();
    spinner_list.add("Category");
    Cursor cursor = database.query("category",
            new String[] { "cat_description" }, null, null, null, null,
            null);
    while (cursor.moveToNext())
        spinner_list.add(cursor.getString(0));
    cursor.close();
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, spinner_list);
    dataAdapter
            .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(dataAdapter);
    database.close();
}

protected int getId(String string) {

    loadDatabase();

    int tmp_cat_id = 0;
    Cursor cursor = database.query("category", new String[] { "cat_id" },
            "cat_description=?", new String[] { string }, null, null, null);
    while (cursor.moveToNext())
        tmp_cat_id = cursor.getInt(0);
    cursor.close();
    database.close();

    return tmp_cat_id;
}

protected void generateUI(String string) {

    if (string.equals("Category")) {
        Toast.makeText(getBaseContext(),
                "Select the category to proceed further.",
                Toast.LENGTH_SHORT).show();
        for (EditText e : et)
            e.setVisibility(View.GONE);
        for (TextView t : tv)
            t.setVisibility(View.GONE);
        btn_save.setVisibility(View.GONE);
    }

    else {
        loadDatabase();
        cat_field_list.clear();

        // ----------------fetch id of item selected in spinner

        // int cat_id = 0;
        // Cursor cursor = database.query("category",
        // new String[] { "cat_id" }, "cat_description=?",
        // new String[] { string }, null, null, null);
        // while (cursor.moveToNext())
        // cat_id = cursor.getInt(0);
        // cursor.close();

        // ----------------fetch cat_fields of the selected item in the
        // spinner

        Cursor cursor = database.query("category_fields",
                new String[] { "field_name" }, "cat_id=?",
                new String[] { cat_id + "" }, null, null, null);
        while (cursor.moveToNext())
            cat_field_list.add(cursor.getString(0));
        cursor.close();

        // -------------sort list in the format "Description",.....Rest of
        // the fields.....,"Notes","Tags"

        ArrayList<String> al_new_cat_field_id_list = new ArrayList<String>();
        al_new_cat_field_id_list = sort_list(cat_field_list);

        for (int i = 0; i < al_new_cat_field_id_list.size(); i++) {
            tv[i].setVisibility(View.VISIBLE);
            tv[i].setText(al_new_cat_field_id_list.get(i));
            et[i].setVisibility(View.VISIBLE);
            et[i].setTag(new Tag(cat_id,
                    get_cat_field_id(al_new_cat_field_id_list.get(i)),
                    al_new_cat_field_id_list.get(i)));

            if (al_new_cat_field_id_list.get(i).equals("Tags")) {
                et[i].setFocusable(false);
                et[i].setFocusableInTouchMode(false);
                et[i].setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        showSelectTagsDialog();
                    }
                });
            }

            Tag tmp = (Tag) et[i].getTag();
            Toast.makeText(
                    getBaseContext(),
                    "cat_id: " + tmp.getCat_id() + ", cat_field_id: "
                            + tmp.getCat_field_id() + ", name: "
                            + tmp.getName(), Toast.LENGTH_SHORT).show();
        }

        btn_save.setVisibility(View.VISIBLE);
        database.close();
    }
}

private ArrayList<String> sort_list(ArrayList<String> cat_field_list2) {

    int count = 0;
    ArrayList<String> al_tmp = new ArrayList<String>();
    for (String s : cat_field_list2) {
        if (s.equals("Description")) {
            if (al_tmp.contains(s)) {
                // ----do nothing
            } else {
                al_tmp.add(s);
            }
        } else if (s.equals("Notes")) {
            continue;
        } else if (s.equals("Tags")) {
            continue;
        } else {
            if (al_tmp.contains(s)) {
                // ----do nothing
            } else {
                al_tmp.add(s);
            }
        }
        count++;
        if (count == cat_field_list.size() - 2) {
            al_tmp.add("Notes");
            al_tmp.add("Tags");
        }
    }
    return al_tmp;
}

private int get_cat_field_id(String string) {

    loadDatabase();

    int tmp_cat_field_id = 0;
    Cursor cursor = database.query("category_fields",
            new String[] { "cat_field_id" }, "field_name=?",
            new String[] { string }, null, null, null);
    while (cursor.moveToNext())
        tmp_cat_field_id = cursor.getInt(0);
    cursor.close();
    database.close();

    return tmp_cat_field_id;
}

private void loadDatabase() {
    database = openOrCreateDatabase("WalletAppDatabase.db",
            SQLiteDatabase.OPEN_READWRITE, null);
}

public class Tag {
    int cat_id;
    int cat_field_id;
    String name;

    public Tag(int tmp_cat_id, int tmp_cat_field_id) {

        cat_id = tmp_cat_id;
        cat_field_id = tmp_cat_field_id;
    }

    public Tag(int tmp_cat_id, int tmp_cat_field_id, String tmp_name) {

        name = tmp_name;
        cat_id = tmp_cat_id;
        cat_field_id = tmp_cat_field_id;
    }

    int getCat_id() {
        return cat_id;
    }

    int getCat_field_id() {
        return cat_field_id;
    }

    String getName() {
        return name;
    }

}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
        finish();
        startActivity(new Intent(AddRecords.this, AllRecords.class));
        return true;
    }
    return super.onKeyDown(keyCode, event);
}
} 
```

这是我的 logcat 输出：

```
 03-21 18:27:09.790: D/AndroidRuntime(32189): Shutting down VM
03-21 18:27:09.790: W/dalvikvm(32189): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
03-21 18:27:09.821: E/AndroidRuntime(32189): FATAL EXCEPTION: main
03-21 18:27:09.821: E/AndroidRuntime(32189): java.lang.NullPointerException
03-21 18:27:09.821: E/AndroidRuntime(32189):    at com.walletapp.AddRecords.onChangeSelectedTags(AddRecords.java:241)
03-21 18:27:09.821: E/AndroidRuntime(32189):    at com.walletapp.AddRecords$3.onClick(AddRecords.java:211)
03-21 18:27:09.821: E/AndroidRuntime(32189):    at com.android.internal.app.AlertController$AlertParams$4.onItemClick(AlertController.java:886)
03-21 18:27:09.821: E/AndroidRuntime(32189):    at android.widget.AdapterView.performItemClick(AdapterView.java:284)
03-21 18:27:09.821: E/AndroidRuntime(32189):    at android.widget.ListView.performItemClick(ListView.java:3382)
03-21 18:27:09.821: E/AndroidRuntime(32189):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
03-21 18:27:09.821: E/AndroidRuntime(32189):    at android.os.Handler.handleCallback(Handler.java:587)
03-21 18:27:09.821: E/AndroidRuntime(32189):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-21 18:27:09.821: E/AndroidRuntime(32189):    at android.os.Looper.loop(Looper.java:123)
03-21 18:27:09.821: E/AndroidRuntime(32189):    at android.app.ActivityThread.main(ActivityThread.java:4627)
03-21 18:27:09.821: E/AndroidRuntime(32189):    at java.lang.reflect.Method.invokeNative(Native Method)
03-21 18:27:09.821: E/AndroidRuntime(32189):    at java.lang.reflect.Method.invoke(Method.java:521)
03-21 18:27:09.821: E/AndroidRuntime(32189):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-21 18:27:09.821: E/AndroidRuntime(32189):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-21 18:27:09.821: E/AndroidRuntime(32189):    at dalvik.system.NativeStart.main(Native Method)
03-21 18:27:11.730: I/Process(32189): Sending signal. PID: 32189 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:36:20.647

我真的不知道，但是您可以尝试以下方法：不要使用增强的 for 循环，而是尝试通常的 for 循环：

```
 public void onChangeSelectedTags() {

StringBuilder stringBuilder = new StringBuilder();

for (CharSequence tag : selectedTags)
    stringBuilder.append(tag + ",");

Tag tmp_tag = null;
for (int i=0;i<et.length;i++) {

    tmp_tag = (Tag) et[i].getTag();
    // Toast.makeText(getBaseContext(), e.getText()+"",
    // Toast.LENGTH_SHORT).show();
    if (tmp_tag.getName().equals("Tags")) {
        e.setText(stringBuilder.toString());
    }
}
 } 
```

错误是否仍然存在？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T03:15:09.937

我得到了答案，，，这就是如何...我将“setTag（）”标签设置为前5个EditTexts，在我增强的for循环中，我试图获取第6个标签（等等on）EditText，，，当我从未设置这些标签时，我将如何获得这些标签。我唯一的错误是，我忘记在我的 if 循环中插入“break”...感谢您的支持...

# python - 使用 pandas 计算两个节点在网络中链接的概率

> ID：15547468
> 
> 赞同：0
> 
> 时间：2013-03-21T12:24:43.460
> 
> 标签：python, graph, pandas

**从网络中，我想绘制两个节点连接的概率作为它们彼此距离的函数。**

我有两个熊猫系列，一个 ( `distance`) 是每对节点之间的距离，另一个 ( `adjacency`) 用零和一填充，并告诉节点是否已连接。

我的想法是使用`cut`并`value_counts`首先计算在箱内有距离的对的数量，这很好用：

```
factor = pandas.cut(distance, 100)
num_bin = pandas.value_counts(factor) 
```

`num_bin`现在，如果有一个与每个箱内连接节点数相同大小的向量，我就会有我的概率。但是如何计算这个向量？

我的问题是如何知道，让我们说第二个 bin 内的 3 对节点，有多少是连接的？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:12:00.667

你可以用[`crosstab`](http://pandas.pydata.org/pandas-docs/dev/reshaping.html?highlight=crosstab#cross-tabulations)这个：

```
import numpy as np
import pandas as pd

factor = pd.cut(distance, 100)

# the crosstab dataframe with the value counts in each bucket
ct = pd.crosstab(factor, adjacency, margins=True,
                 rownames=['distance'], colnames=['adjacency'])

# from here computing the probability of nodes being adjacent is straightforward
ct['prob'] = np.true_divide(ct[1], ct['All']) 
```

这给出了这种形式的数据框：

```
>>> ct

adjacency           0    1  All      prob
distance
(0.00685, 0.107]    7    4   11  0.363636
(0.107, 0.205]      6    9   15  0.600000
(0.205, 0.304]      6    6   12  0.500000
(0.304, 0.403]      5    2    7  0.285714
(0.403, 0.502]      4    6   10  0.600000
(0.502, 0.6]        8    3   11  0.272727
(0.6, 0.699]        6    2    8  0.250000
(0.699, 0.798]      4    6   10  0.600000
(0.798, 0.896]      4    5    9  0.555556
(0.896, 0.995]      5    2    7  0.285714
All                55   45  100  0.450000 
```

# entity-framework - PowerTools Beta 3 失败

> ID：15547474
> 
> 赞同：2
> 
> 时间：2013-03-21T12:25:13.580
> 
> 标签：entity-framework, ef-power-tools

我试图生成“视图”以提高我的应用程序的性能。该应用程序是通过 RIA 服务链接到服务器的 Silverlight 4。服务器应用程序从 EF 4.1 + RIA 服务开始。我安装了“EF Power Tools Beta 3 v0.7.0.0”并且可以毫无问题地生成我的视图。但我很快意识到 EF 4.1。无法从预编译的视图中受益。需要 EF >= 4.2。通过 NuGet，我看到了使用 EF 5 的 RIA 服务 (RIAServices.EntityFramework.4.2.0) 的更新。我安装并让一切正常，但是当我尝试生成视图时出现异常：

`System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.Reflection.ReflectionTypeLoadException: Unable to load one or more of the requested types. Retrieve the LoaderExceptions property for more information.`

我试过重新安装 PowerTools。运气不好，我已经下载了 PowerTools 的源代码并调试了异常。显然 PowerTools 正在尝试并且找不到旧的 EF 版本。LoaderExceptions 属性读取：

`{System.IO.FileNotFoundException: Could not load file or assembly 'EntityFramework, Version=4.1.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies.`

我调查了 PublicKeyToken 并确认它与我的“bin”输出映射中的 EF 5 (EF 4.4 target=.NET 4) dll 相同。但是 PowerTools 正在寻找 EF 4.1 .. 为什么？

我的 web.config 文件有这个：

```
<sectionGroup name="system.serviceModel">
  <section name="domainServices" type="System.ServiceModel.DomainServices.Hosting.DomainServicesSection, System.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" allowDefinition="MachineToApplication" requirePermission="false" />
</sectionGroup>
<section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" /> 
```

和：

```
<runtime>
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <dependentAssembly>
    <assemblyIdentity name="EntityFramework" publicKeyToken="b77a5c561934e089" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-4.4.0.0" newVersion="4.4.0.0" />
  </dependentAssembly>
</assemblyBinding> 
```

我还测试了更改 Web.config 中的 PublicKeyToken 只是为了确认我从 PowerTools 收到另一个错误，因此 PowerTools 似乎解析了我的 Web.config。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:26:44.090

更新：我创建了一个新的 Web 项目并将所有模型代码文件添加为链接。相同的连接字符串。现在我可以建立视图.. 奇怪.. 相同的参考。

当我将视图添加到我的原始项目时，RIA 服务不会启动。删除了视图，它们又重新开始了。

# java - Findbugs 可能出现误报？

> ID：15547475
> 
> 赞同：1
> 
> 时间：2013-03-21T12:25:16.553
> 
> 标签：java, findbugs, java.util.concurrent

请参考以下代码片段（去掉多余部分以突出问题案例）：

FindBugs 抱怨“*方法不会释放所有路径上的锁定*”。这是误报吗？如果没有，如何解决这个问题？

```
 try{
      someLock.lock();
     //do something
    } finally{
      if (someLock.isLocked())
        someLock.unlock();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T12:31:22.037

如果`isLocked()`扔东西，那么你不会解锁。

我认为不太可能`isLocked`抛出异常，但是当你锁定时，你必须解锁，测试没有意义。那么为什么不使用[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html)中描述的标准模式：

```
someLock.lock();
try{
    //do something
} finally{
    someLock.unlock();
} 
```

所以我说

*   这是一个误报，因为您的代码无法解锁
*   从某种意义上说，这是一个真正的积极因素，您应该根据建议修复您的代码

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T12:31:06.613

**锁住了**

> 查询此锁是否由任何线程持有。此方法设计用于监控系统状态，**而不是用于同步控制**。

不是“用于同步控制”意味着**isLocked**的实现不能保证不受竞争条件的影响，即使我们已经获得了锁，它也可能返回 false。

```
someLock.lock();
try{      
 //do something
} finally{
  someLock.unlock();
} 
```

或者

```
boolean locked=false;
try{      
 someLock.lock();
 locked=true;
 //do something
} finally{
  if (locked) someLock.unlock();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T13:06:00.560

这看起来像是一个误报，但我想我可以理解你为什么会得到它。

FindBugs 规则最有可能被编码为检查所有路径是否调用`unlock`......而不管调用是否实际需要（从锁状态的角度来看）。它很可能不会尝试跟踪锁的状态，并且很可能不知道是什么`isLocked` *意思*。虽然对您和我来说很明显没有必要调用`unlock`if `isLocked`returns `false`，但并未实施 FindBugs 规则来进行此推断。

（事实上​​，在广泛的用例中可靠地进行推理对于 FindBugs 实现者来说是一个难题。我们处于“自动定理证明器”领域......）

# android - Android 4.2 GPS 图标无法从通知栏中删除

> ID：15547479
> 
> 赞同：0
> 
> 时间：2013-03-21T12:25:31.467
> 
> 标签：android, gps, location, android-4.2-jelly-bean

我只在 Android 4.2.2 设备中遇到本地化问题。

当我使用正常流程进行定位并启用精确定位权限时，GPS 图标永远不会消失。问题是即使 GPS 未获取本地化，图标也会出现，例如使用 getLastKnownLocation （例如，使用这个有用的提示[https://code.google.com/p/android-protips-location/source/browse /trunk/src/com/radioactiveyak/location_best_practices/utils/GingerbreadLastLocationFinder.java](https://code.google.com/p/android-protips-location/source/browse/trunk/src/com/radioactiveyak/location_best_practices/utils/GingerbreadLastLocationFinder.java)）或网络提供商。

本地化过程正常，基于位置最佳实践：[https](https://code.google.com/p/android-protips-location/source/browse/trunk/src/com/radioactiveyak/location_best_practices/) ://code.google.com/p/android-protips-location/source/browse/trunk/src/com/radioactiveyak/location_best_practices/ Reto Meier 创建的项目在这篇文章中： [http ://android-developers.blogspot.com.es/2011/06/deep-dive-into-location.html](http://android-developers.blogspot.com.es/2011/06/deep-dive-into-location.html)

当然，locationmanager 和 listener 都停止了，置为 null。该问题仅适用于 Android 4.2.2 版本。你知道这是否是Android错误吗？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:56:46.267

我认为这描述了您的问题：

[谷歌错误报告](http://code.google.com/p/android/issues/detail?id=39745)

对我来说它看起来像一个错误

# c# - Microsoft.Test.CommandLineParsing 这是哪个 dll

> ID：15547481
> 
> 赞同：2
> 
> 时间：2013-03-21T12:25:35.163
> 
> 标签：c#, visual-studio, command-line, command-line-arguments

我最近从一位前同事那里继承了 ac# .net v4 项目，其中包含以下声明：

```
using Microsoft.Test.CommandLineParsing; 
```

我已经为此搜索了谷歌和我们的整个存储库树，但我一生都找不到所需的 DLL。

“测试”部分是未找到的位，所以我认为有一个 Microsoft.Test.dll - 没有这样的运气！

有人可以告诉我我需要参考哪个 MS DLL 才能使用它。

谢谢，加里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T12:34:25.070

该命名空间来自[TestApi](http://testapi.codeplex.com/)项目。

# proxy - getting client IP addresses in apache log when server behind varnish reverse proxy which inturn is behind load balancer

> ID：15547483
> 
> 赞同：1
> 
> 时间：2013-03-21T12:25:37.130
> 
> 标签：proxy, unique, load-balancing, varnish, visitors

I am having this problem to find unique visitors to my site. The site is deployed on AWS cloud. The first hit goes to load balancer which routes to varnish cache (type of reverse proxy) and which inturn routes to apache web server. I have the below config inside my apache conf file:

LogFormat "%{X-Forwarded-For}i %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" \"%{forensic-id}n\"" varnishcombined

CustomLog logs/access_log varnishcombined

inside my varnish file I have following: sub vcl_recv {

```
unset req.http.X-Forwarded-For;
set req.http.X-Forwarded-For = client.ip; 
```

When I check my access log, I see that all requests have the load balancer IP rather than the actual IP of the client from where request has come. nfact it is the ip of the aws load balancer.

If i remove any one that is either varnish or load balancer my access log has correct entries capturing the client IP addresses.

Has anybody faced this situation?

Manguesh

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-02T00:32:02.833

在 sub vcl_recv 中使用它有一个 IP 列表（包括您的 ELB 和客户端 IP）

```
if (req.restarts == 0) {
    if (req.http.X-Forwarded-For) {
        set req.http.X-Forwarded-For = req.http.X-Forwarded-For + ", " + client.ip;
    } else {
        set req.http.X-Forwarded-For = client.ip;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:28:54.557

好的，所以修复很简单。我所要做的就是从我的清漆配置文件中删除以下几行：

取消设置 req.http.X-Forwarded-For；设置 req.http.X-Forwarded-For = client.ip;

最初我只有 varnish 和 apache 作为后端，因此上述行是传播客户端 IP 所必需的。但是，通过在清漆代理上方添加负载均衡器，相同的行修剪了客户端 IP 传播的 http 标头，而是将负载均衡器 Ip 设置为客户端。

曼格什

# xpages - Read content from non xp:inputText field with ssjs

> ID：15547484
> 
> 赞同：2
> 
> 时间：2013-03-21T12:25:37.970
> 
> 标签：xpages, lotus-notes, xpages-ssjs

Is there a way to read a field with ssjs that is created via client side javascript (so is no xp:input field, it's a simple html input field wich is in the notes form-tag)? I know i can send the value with an XAgent, but i hope there is another beautiful way. Somthing like `context.getSubmittedValue("fieldName")`

Thanks

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T12:59:35.090

您可以访问 SSJS 中的值

```
paramValues.get("fieldName").toString(); 
```

在 Java 中，您可以从请求参数值映射中访问参数：

```
ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext();
Map<String, String[]> pMap = ec.getRequestParameterValuesMap(); 
```

# dependency-injection - 如何将默认的 Guice Provider 注入我的自定义 Provider？

> ID：15547485
> 
> 赞同：4
> 
> 时间：2013-03-21T12:25:38.860
> 
> 标签：dependency-injection, guice

如果我创建一个提供程序并将其绑定到一个类，就像这样

```
bind(MyClass.class).toProvider(MyClassProvider.class) 
```

然后`Provider<MyClass>`自动被绑定`to MyClassProvider`。如果您想将 a`Provider<MyClass>`注入`MyClassProvider`，那将是一个问题，如下所示：

```
@Inject
public MyClassProvider(Provider<MyClass> provider) 
```

我想将默认的 Guice 提供程序注入到我的提供程序中，以便我可以轻松地在我的自定义提供程序中创建新实例。怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T16:25:42.407

您将需要在两者之一上使用[绑定注释](http://code.google.com/p/google-guice/wiki/BindingAnnotations)。如果您不介意 MyClass 的用户被注释，这很容易。

```
public class AccountTest {

   @Test
   public void test() {
       Injector injector = Guice.createInjector(new AbstractModule() {

           @Override
           protected void configure() {
               bind(MyClass.class).annotatedWith(Names.named("MYPROVIDER")).toProvider(MyClassProvider.class);
           }
       });
       MyClassUser user = injector.getInstance(MyClassUser.class);

       assertTrue(user.get().myProvider); // Shows if was created via my provider or the Guice provider.
   }
}

class MyClassUser {
    Provider<MyClass> provider;

    @com.google.inject.Inject
    public MyClassUser(@Named("MYPROVIDER") Provider<MyClass> provider) {
        this.provider=  provider;
    }

    MyClass get() {
        return provider.get();
    }
}

class MyClass {
    boolean myProvider = false;
}

class MyClassProvider implements Provider<MyClass> {
    Provider<MyClass> provider;

    @com.google.inject.Inject
    public MyClassProvider(Provider<MyClass> provider) {
        this.provider=  provider;
    }

    @Override
    public MyClass get() {
        MyClass c = provider.get();
        c.myProvider = true;
        return c;
    }

    public String toString() {
        return "Our provider";
    }
} 
```

如果您不希望 MyClass 的用户使用命名提供程序，我能够使其工作的唯一方法是扩展`MyClass`并`MyClassProvider`需要一个“ `MyClass2`”提供程序。作为一种解决方案，它闻起来很有效（而不是用糟糕的答案污染这个答案，你可以在[这个 gist](https://gist.github.com/mlk/5220259)上找到代码）。

您可以使用私有模块或子模块来做到这一点（因为它是机器人腿问题的变体），但我一直无法弄清楚如何做到这一点。

# perl - Use perl to find the font properties of MS-Word document

> ID：15547486
> 
> 赞同：0
> 
> 时间：2013-03-21T12:25:40.280
> 
> 标签：perl

What i need to do is... Read a word file and based on the properties of the font add a tag ahead of them to differentiate it as a header or a paragraph However, i need to do this using Perl.. Is it possible??? Any help will be appreciated. Thanks!!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:55:16.387

@Nikita，这将为您提供有关其完成方式的详细视图：

```
#!/usr/bin/perl
use strict;
use warnings;
use Win32::OLE::Const 'Microsoft Word';
#$Win32::OLE::CP = CP_UTF8;
binmode STDOUT, 'encoding(utf8)';

# OPEN FILE SPECIFIED AS FIRST ARGUMENT
my $fname=$ARGV[0]; 
my $fnameFullPath = `cygpath.exe -wa $fname`;
$fnameFullPath =~ s/\\/\\\\/g;
$fnameFullPath =~ s/\s*$//;
unless (-e $fnameFullPath) { print "Error: File did not exists\n"; exit 1;}

# STARTING OLE
my $Word = Win32::OLE->GetActiveObject('Word.Application')
    || Win32::OLE->new('Word.Application','Quit')
    or die Win32::OLE->LastError();

$Word->{'Visible'} = 0;
my $doc = $Word->Documents->Open($fnameFullPath);
my $paragraphs = $doc->Paragraphs() ;
my $enumerate = new Win32::OLE::Enum($paragraphs);

# PROCESSING PARAGRAPHS
while(defined(my $paragraph = $enumerate->Next())) {

    my $text = $paragraph->{Range}->{Text};
    my $sel = $Word->Selection;
    my $font = $sel->Font;

    if ($font->{Size} == 18){
        print "Text: ", $text, "\n";
        print "Font Bold: ", $font->{Bold}, "\n";
        print "Font Italic: ", $font->{Italic}, "\n";
        print "Font Name: ", $font->{Name}, "\n";
        print "Font Size: ", $font->{Size}, "\n";
        print "=========\n";
    }
}

# CLOSING OLE
$Word->ActiveDocument->Close ;
$Word->Quit; 
```

输出将是这样的：

```
文本：这是一个包含不同字体和大小的文档文件，文档还包含页眉和页脚（字体：TNR，大小：18）
字体粗体：0
字体斜体：0
字体名称：Times New Roman
字体大小：18
=========
文本：这是一个 Perl 示例（字体 TNR，大小：12）
字体粗体：0
字体斜体：0
字体名称：Times New Roman
字体大小：18
=========
文本：这是一个 Python 示例（字体：Courier New，大小：10）
字体粗体：0
字体斜体：0
字体名称：Times New Roman
字体大小：18
=========
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T13:57:45.523

我需要更多信息来帮助您识别需要处理的单词。在我的示例中，我只是搜索文本**Some**（[这是我的 *.docx 文件](https://dl.dropbox.com/u/47707959/fonts.docx)）

```
#!/usr/bin/perl

use Modern::Perl;
use Win32::OLE;

use Win32::OLE qw(in with);
use Win32::OLE::Variant;
use Win32::OLE::Const 'Microsoft Word';
$Win32::OLE::Warn = 3;

print "Starting Word\n";

    my $Word = Win32::OLE->GetActiveObject('Word.Application') ||
           Win32::OLE->new('Word.Application');
    $Word->{'Visible'}     = 1;
    $Word->{DisplayAlerts} = 0;

my $File = $Word->Documents->Open( "./fonts.docx" ) or die Win32::OLE->LastError;

$Word->Selection->HomeKey(wdStory);

$Word->Selection->Find->{'Text'} = 'Some';

$Word->Selection->Find->Execute();

say "Font size: [", $Word->Selection->Font->Size(), "]";
say "Font name: [", $Word->Selection->Font->Name(), "]";

$Word->Quit; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:34:30.753

尝试使用 OLE 自动化，[Win32::OLE](http://search.cpan.org/perldoc?Win32%3a%3aOLE)模块很有帮助。这种方式需要对 Word OLE api 有更深入的了解。

# c - Get cluster size

> ID：15547488
> 
> 赞同：1
> 
> 时间：2013-03-21T12:25:45.697
> 
> 标签：c, windows, kernel, driver, volume

I am working on an upper volume filter driver taking diskperf as base.
I want to know how can I calculate cluster size(allocation unit size).
I know that using `GetDiskFreeSpace` I can get the desired output, but it's useful only in user mode.
I want it to work at the kernel level.
Is there any IOCTL or any function that will help me to find the cluster size?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:38:47.053

`ZwQueryVolumeInformationFile/NtQueryVolumeInformationFile`FsInformationClass 设置为`FILE_FS_SIZE_INFORMATION`struct。

或使用[IRP_MJ_QUERY_VOLUME_INFORMATION](http://technet.microsoft.com/en-us/subscriptions/ff549318%28v=vs.85%29.aspx)。

# symfony - Default language set by default french

> ID：15547489
> 
> 赞同：1
> 
> 时间：2013-03-21T12:25:49.510
> 
> 标签：symfony, symfony-2.1

I do have the following entry in config.yml

```
framework:
      translator: { fallback: de } 
```

When I go to my index page. Chrome always tells me that the website is in french and want to translate. How can I get rid of it that it is in french?

I don't want to disable the function in chrome.

I can't see anything else in the config-files that would solve my problem.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:42:24.960

尝试在标签上设置`lang`属性：`html`

```
<html lang="{{ app.request.locale }}"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:06:52.907

由于您已经拥有@Elnur 建议的内容，因此也可以尝试以下操作：

```
<META HTTP-EQUIV="Content-Language" content="{{ app.request.locale}}"/> 
```

然后，再次阅读这个[StackExchange 问题](https://webmasters.stackexchange.com/questions/5043/how-can-i-prevent-google-mistakenly-offering-to-translate-a-page)

# java - using RSA public.key distributed by a web service in android

> ID：15547491
> 
> 赞同：0
> 
> 时间：2013-03-21T12:25:50.047
> 
> 标签：java, android, filenotfoundexception

I am trying to secure the connection between `Android app` and `Java Web Service` with `RSA private/public.key`. Let me tell you whole scenario. When android app is downloaded and installed on mobile device,just one time it makes a connection to web service for getting public.key. And after that android app will use this public.key for all comunication with web service. I have succed to encrypt with public.key and decrypte with private key in same application so far. But now I need to distribute public key to my android device clients and let them to save this public.key file and use it. Let me tell yu about my second scenario. I need also update these private and public key for example every 2 months. How can I inform clients about public key is updated and send them new public.key Thank you.
Below code is for requesting public.key. I can get in Inputstream but can not create public.key and write content inside it.

```
 public ConnectService(String sngUrl,Context context){
    try {
        URL url = new URL(sngUrl);
        URLConnection conection = url.openConnection();
        conection.connect();

        InputStream input = new BufferedInputStream(url.openStream(), 8192);
        System.out.println(convertStreamToString(input));

        String dirPath = context.getFilesDir().getAbsolutePath() + File.separator + "key";
        File keyDir = new File(dirPath);
        if (!keyDir.exists())
            keyDir.mkdirs();

        OutputStream output = new FileOutputStream(keyDir+"/public.key");

        byte data[] = new byte[1024];
        while ((input.read(data)) != -1) {
            output.write(data);
        }

        output.flush();
        output.close();
        input.close();

    } catch (Exception e) {
        System.out.println("HATA: "+e.getMessage());
        e.printStackTrace();
    }
}

    EXCEPTION : java.io.FileNotFoundException: /data/data/com.shoponway/files/key/public.key 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:55:45.783

关于代码，试试这个：

```
OutputStream output = new FileOutputStream(new File(dirPath+"/public.key")); 
```

关于更新公钥，是的，客户端可以在连接到互联网后自动下载它和/或他们可以在应用程序启动后检查密钥是否更新。

编辑：这是我用来在文件上写东西的东西

```
fw = new FileWriter(new File(Environment.getExternalStorageDirectory().getPath()
           + "/myFolder/public.key"));
...
while(something){
    fw.write(blaBla);
}
fw.flush();
fw.close(); 
```

以下部分确保 SDCard：

```
Environment.getExternalStorageDirectory().getPath() 
```

你可以相应地改变它。

# c# - 在 Windows 商店应用程序中默认选择组合框中的第一个选项

> ID：15547494
> 
> 赞同：0
> 
> 时间：2013-03-21T12:26:04.327
> 
> 标签：c#, xaml, windows-store-apps

我在 Windows 商店应用程序中使用组合框，并通过数据绑定填充它。但是在运行时，它会选择一个空选项。我想从组合框中的项目中选择第一个选项。我尝试`SelectedIndex="0"`在 xaml 中进行设置，但它给出了问题，在组件初始化组合时 bcz 有 0 个元素。我不想使用代码隐藏。( `combo1.SelectedIndex = 0`)。任何建议如何通过 xaml 做到这一点？

编辑：

```
<StackPanel Orientation="Horizontal">
                <TextBlock Text="Repository" Margin="10" VerticalAlignment="Center"/>
                <ComboBox Width="{StaticResource ComboWidth}" x:Name="repocombo" SelectedIndex="0" ItemsSource="{Binding Path=Repositories}" SelectionChanged="SearchCombo_SelectionChanged">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Path=Name}"/>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
            </StackPanel> 
```

它给出了'Windows.UI.Xaml.Markup.XamlParseException'，但如果我从中删除`SelectedIndex="0"`它对我来说很好。任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:57:29.177

您可以将属性添加到保持`SelectedItem`（并绑定到`Combobox.SelectedItem`）的 ViewModel（或可绑定数据），并且在设置属性`Repositories`时还设置`SelectedItem`：

```
Repositories = GetData();
SelectedItem = Repositories.FirstOrDefault(); 
```

并在您的 xaml 代码中：

```
<ComboBox ItemsSource="{Binding Path=SelectedItem}"[...] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T07:50:01.843

```
<ComboBox SelectedItem="{Binding Path=SelectedItem}"[...] 
```

# php - Get referer inside php file_get_contents

> ID：15547495
> 
> 赞同：7
> 
> 时间：2013-03-21T12:26:05.053
> 
> 标签：php, url

I've got some file on `www.aaa.com/file.php`

I've got another file on `www.saveme.com/file2.php`

And inside this 2nd one I call 1st one this way `file_get_contents('www.aaa.com/file.php');`

I want `www.aaa.com/file.php` to get url of site that has called it.

Is it possible?

`www.lol.com` calls `www.aaa.com/file.php` -> it gets `www.lol.pl`

`www.another.com` calls it -> it gets `www.another.com`

Something like 'who've called me from another server and what server was it?'

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-09-11T20:28:07.350

实际上，不，因为它并不像 Payalytic 船长所说的那么明显，这里是如何做到的。

```
$referer = "http://abc.info";
$opts = array(
       'http'=>array(
           'header'=>array("Referer: $referer\r\n")
       )
);
$context = stream_context_create($opts);
file_put_contents($img, file_get_contents($node_img, false, $context)); 
```

**来源：** [http ://thuannvn.blogspot.be/2011/12/how-to-set-referer-in-php.html](http://thuannvn.blogspot.be/2011/12/how-to-set-referer-in-php.html)

看了官方文档头疼，没说referers，终于在网上做了一个经典的搜索，马上就找到了。万岁！

**编辑：**文档说`header`应该是一个字符串（[http://be2.php.net/manual/en/context.http.php](http://be2.php.net/manual/en/context.http.php)）。应该检查它是否也适用于数组。

或者，您还应该能够从收到的请求的 IP 中检索域名。（但并非总是如此）

你也可以用`curl`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T12:28:23.977

您需要将引用者作为参数传递给`file_get_contents`：

```
file_get_contents('http://www.aaa.com/file.php?referrer='.urlencode($referrer)); 
```

否则，第二台服务器无法获取原始引荐来源网址。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-21T12:42:49.233

请参阅[http://php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)，您将在其中找到有关 get_headers() 和 $http_response_header 的信息。

# c - Visual map of Files

> ID：15547497
> 
> 赞同：-1
> 
> 时间：2013-03-21T12:26:08.293
> 
> 标签：c, file, directory

I just finished writing a c program that split a very large program into its different components and stored them in a tree like structure using directories and sub directories.

I was wondering if there are any programs that can graph the file system. I'm trying not to have to write my own program to do that if possible.

If possible the program would be easy to use.

Windows or Linux programs would work.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:28:32.063

您可以尝试 WinDirStat，它几乎可以满足您的要求。

[http://windirstat.info/](http://windirstat.info/)

还有一个适用于 linux 的版本

[http://kdirstat.sourceforge.net/](http://kdirstat.sourceforge.net/)

# cakephp-2.1 - cakephp how to create data validation for hasMany model?

> ID：15547500
> 
> 赞同：2
> 
> 时间：2013-03-21T12:26:12.693
> 
> 标签：cakephp-2.1

My user hasMany address. I wish to collect all the address from same view file. So i named the fields as [model][0][field_name], [model][1][field_name] .... , [model][n][field_name]. I use saveMany function to add all the data at once.

The validation code i created in model works for only [model][0] fields alone.

How to make the data validation for all the set of fields?

# php - How to display data from two tables with refernece of id

> ID：15547502
> 
> 赞同：0
> 
> 时间：2013-03-21T12:26:18.527
> 
> 标签：php, mysql, sql, join

```
-----------------------------------------
      Table Name: product_cat
-----------------------------------------
id         - int(11)     - auto_increment
           -             -
cat_name   - varchar(30) -
           -             -
branch_code- varchar(30) -
           -             -
date       - datetime    -

-----------------------------------------
      Table Name: product_brand
-----------------------------------------
id          - int(11)     - auto_increment
            -             -
parent_id   - int(11)     -
            -             -
branch_name - varchar(40) -
            -             -
category    - varchar(40) - 
```

I applied foreign key in `product_brand` table by this query(`alter table product_brand add constraint ta1 foreign key(parent_id) references product_cat(id)`)

and I am inserting data in `product_brand` table by following way

```
<table>
         <form action="index.php?tanzil=brand_added" method="post">        
     <tr>
       <td>Brand Name:</td>
       <td>
         <input type="text" name="brand_name" />
       </td>
     </tr>
     <tr>
      <td>Category:</td>
      <td>
        <select name="cat_name">

<?php
db_connect();
$q="select * from product_cat order by cat_name";
$rs=mysql_query($q);
for($i=0;$i<mysql_num_rows($rs);$i++){

$rd=mysql_fetch_object($rs);
echo"<option value='$rd->id'>$rd->cat_name</option>";

}
?>

        </select>
      </td>
    </tr>
    <tr>
     <td>
       <input type="submit" value="submit" />
     </td>
   </tr>
      </form>
 </table> 
```

and inserting data in database by this way

```
db_connect();
$name_of_cat = $_POST['cat_name'];
$name_of_brand = $_POST['brand_name'];
$g ="insert into product_brand (parent_id,brand_name,category) values ('$name_of_cat','$name_of_brand','$name_of_cat')";
if(mysql_query($g)){
echo "Done";    
}
else{   
echo"Some error occured";
} 
```

and displaying data by this way

```
$query= "select * from product_brand";
$result= mysql_query($query);
while($row=mysql_fetch_object($result))
{
echo $row['brand_name'];
} 
```

but I am not getting cat_name name from product_cat table reference of parent_id

How can I get it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:28:06.353

[**`JOIN`**](http://en.wikipedia.org/wiki/Join_%28SQL%29)两张表：

```
SELECT
  p.id,
  p.branch_name,
  c.cat_name
FROM product_Brand     AS p
INNER JOIN Product_cat AS c ON c.id = c.parent_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:44:37.467

由于结果必须包含“Product_brand”表中的所有行，因此尝试使用 LEFT JOIN，如下所示，

```
$query= "SELECT
      pb.*,
      pc.cat_name
    FROM product_Brand  pb
    LEFT JOIN Product_cat pc ON pb.id = pc.parent_id";
$result= mysql_query($query);
while($row=mysql_fetch_object($result))
{
echo $row['brand_name'];
} 
```

# java - java网络安全

> ID：15547515
> 
> 赞同：-2
> 
> 时间：2013-03-21T12:26:59.100
> 
> 标签：java, security, oracle9i, materialized-views

让我解释一下这个问题。所以，有一个数据库对于许多应用程序来说都是至关重要的，我需要保证它的安全。另外，我不想直接访问该数据库。我想使用物化视图。这是一个好的解决方案吗？我需要一些关于如何保持主数据库安全和同步的建议。

，干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:46:01.763

你到底想做什么？是否所有的应用程序都需要写入数据库？如果不是只读应用程序，您可以在数据库中使用 View。

否则，保持数据库安全的最佳方法是在创建表时使用约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:37:48.607

我会使用不同的方法。制作您的数据库副本，并在 QA / Pilot 阶段针对该副本使用您的应用程序。一旦您知道您的应用程序是稳定的并且不会引入安全或稳定性问题，那么您就可以开始使用您的生产数据库了。

添加物化视图可能很难使用，因为您需要在手动与主数据库同步之前检查每个更新。而且由于更新和同步之间会有很大的延迟，因此您会遇到潜在的冲突问题。

# php - Windows: Setting PHP file permissions before deploying to Amazon Beanstalk

> ID：15547516
> 
> 赞同：3
> 
> 时间：2013-03-21T12:26:59.787
> 
> 标签：php, windows, apache, amazon, amazon-elastic-beanstalk

I've recently converted over to Amazon's Elastic Beanstalk which has been great but I have one problem I haven't been able to fix or find a decent solution to.

When deploying via GIT with $ git aws.push

My files are deployed but all my folders and files do not have the correct permissions. Currently running Win 8 with xampp for local development. For example on a recent WordPress deployment, all my folders were 777 once deployed to beanstlak. It is an NTFS partition the files are in too.

It is easy enough to SSH in and run:

```
$  sudo su
$  find /var/www/html/ -type d -exec chmod 755 {} \;
$  find /var/www/html/ -type f -exec chmod 644 {} \; 
```

However I'd rather fix my permissions before upload however I don't think this is possible with Windows. I'm sure I can setup a script or some type of service hook to run these on deployment but I was hoping there may be an easier way.

Any insight from the SO community on setting windows file permissions to match Apache's?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-19T10:26:12.460

在您的代码被提取到您的实例之后但在它被视为“部署”之前，设置一个挂钩来修复权限实际上并不难。您可以创建一个名为 的文件`.ebextensions/00permissions.conifg`，只要它位于带有扩展名的正确文件夹中，名称并不重要`.config`- 配置脚本按字母顺序执行。内容如下：

```
container_commands:
  00fix_permissions_dirs:
    command: "find . -type d -exec chmod 755 {} \;"
    ignoreErrors: true
  01fix_permissions_files:
    command: "find . -type f -exec chmod 644 {} \;"
    ignoreErrors: true 
```

注意 a 的默认目录`container_command`是部署文件已被提取到的目录，因此无需设置显式路径。

您可以在 Elastic Beanstalk 文档中查看有关[可以在实例上运行的命令种类的](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html)更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T16:52:11.220

container_commands：00fix_permissions_dirs：命令：“find /var/app/ondeck -type d -exec chmod 755 {} \;” ignoreErrors: true 01fix_permissions_files: command: "find /var/app/ondeck -type f -exec chmod 644 {} \;" 忽略错误：真

这将更改应用程序的文件权限。目前，当应用程序完全部署时，无法运行命令，但您可以利用“ondeck”文件夹，这是 beanstalk 在部署应用程序文件之前放置应用程序文件的文件夹。

# sas - SAS数据步骤/ proc sql使用自动增量主键从另一个表中插入行

> ID：15547521
> 
> 赞同：1
> 
> 时间：2013-03-21T12:27:20.793
> 
> 标签：sas, proc-sql, datastep

我有2个数据集如下

```
id name status 
1  A    a
2  B    b
3  C    c 
```

另一个数据集

```
name status new
C    c      0
D    d      1
E    e      1
F    f      1 
```

如何将第二个表中的所有行插入到第一个表中？情况是第一个表是永久性的。第二张表每月更新一次，所以我想将每月更新表中的所有行添加到永久表中，这样它看起来像这样

```
id name status
1  A    a
2  B    b
3  C    c
4  D    d
5  E    e
6  F    f 
```

我面临的问题是我无法从数据集 1 中增加 id。据我搜索，SAS 中的数据集没有自动增量属性。自动增量可以通过使用数据步骤来完成，但我不知道数据步骤是否可以用于像这样的 2 个表的情况。通常的sql是

```
Insert into table1 (name, status) 
select name, status from table2 where new = 1; 
```

但由于 sas 数据集不支持自动增量列，因此我面临的问题。我可以在上面的proc sql之后使用SAS数据步骤来解决它

```
data table1;
set table1;
if _n_ > 3 then id = _n_;
run; 
```

这会增加 id 列的值，但代码有点丑，而且 id 是主键，在其他表中用作外键，所以我不想弄乱旧行的 id .

我正在学习和使用 SAS，因此非常感谢您的帮助。提前致谢。

额外问题：如果第二张表没有新列，有没有办法用数据步骤完成我想要的（从月度表（2nd）到永久表（1st）添加新行）？目前，我使用这个丑陋的 proc sql/data 步骤来创建新列

```
proc sql; //create a temp table from table2
create t2temp as select t2.*, 
(case when t2.name = t1.name and t2.status = t1.status then 0 else 1) as new
from table2 as t2 
left join table1 as t1
on t2.name = t1.name and t2.status = t1.status;
drop table t2; //drop the old table2 with no column "new"
quit;
data table2;  //rename the t2temp as table2
set t2temp;
run; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:34:00.750

您可以在数据步骤中执行此操作。顺便说一句，如果你完全重新创建它，你可以使用

```
id+1; 
```

创建一个自动编号的字段（假设您的数据步骤不是太复杂）。这将跟踪当前的最高 ID 号，如果它在新数据集中，则随时为每一行分配一个更高的 ID。

```
data have;
input id name $ status $;
datalines;
2  A    a
3  B    b
1  C    c
;;;;
run;

data addon;
input name $ status $ new;
datalines;
C    c      0
D    d      1
E    e      1
F    f      1
;;;;
run;

data want;
retain _maxID;                    *keep the value of _maxID from one row to the next, 
                                   do not reset it;
set have(in=old) addon(in=add);   *in= creates a temporary variable indicating which 
                                   dataset a row came from;
if (old) or (add and new);        *in SAS like in c/etc., 0/missing(null) is 
                                   false negative/positive numbers are true;
if add then ID = _maxID+1;        *assigns ID to the new records;
_maxID = max(id,_maxID);          *determines the new maximum ID - 
                                   this structure guarantees it works 
                                   even if the old DS is not sorted;
put id= name=;
drop _maxID;
run; 
```

回答第二个问题：

是的，你仍然可以这样做。最简单的方法之一是，如果您有按名称排序的数据集：

```
data want;
retain _maxID;
set have(in=old) addon(in=add);
by name;
if (old) or (add and first.name);
if add then ID = _maxID+1;
_maxID = max(id,_maxID);
put id= name=;
run; 
```

对于具有相同值的第一条记录，first.name 为真`name`；因此，如果 HAVE 具有该名称的值，则不允许 ADDON 添加新记录。

这确实需要`name`在 HAVE 中是唯一的，否则您可能会删除一些记录。如果这不是真的，那么你有一个更复杂的解决方案。

# ruby - Spree 中是否可以有多个 user_class？与角色分离

> ID：15547524
> 
> 赞同：0
> 
> 时间：2013-03-21T12:27:28.213
> 
> 标签：ruby, ruby-on-rails-3, authentication, spree

我有一个同时使用 Spree 和 Refinery 的 Rails 项目。为了获得统一的身份验证，Spree.user_class 已设置为 Refinery 的 User 类。我现在希望通过 Spree 为客户提供*另一个*user_class，它不会通过炼油厂的身份验证。

这甚至可能吗，或者我什至会浪费时间看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:47:04.753

以防万一有人想知道 - 答案是否定的。我要采用的解决方案是继续使用 Refinery 的 User 类，分配角色并确保 - 在客户偶然发现 /refinery 的情况下 - 客户只是通过 Spree 身份验证进行路由。

# c# - 使用 CodeTypeDeclaration 创建一个类并向其添加成员

> ID：15547525
> 
> 赞同：1
> 
> 时间：2013-03-21T12:27:31.440
> 
> 标签：c#, codedom, jscript.net

我在 CodeTypeDeclaration 的帮助下声明一个类，如下所示：

```
CodeTypeDeclaration targetClass = new CodeTypeDeclaration(sType); 
```

我可以添加一个构造函数：

```
 CodeConstructor constructor = new CodeConstructor();
 constructor.Attributes = MemberAttributes.Public; 
```

或成员字段：

```
 CodeMemberField myField = new CodeMemberField();
 myField.Name = fieldName;
 myField.Type = new CodeTypeReference(fieldType);

 targetClass.Members.Add(myField); 
```

但我正在尝试添加任何类型的行，例如常量声明：

```
const addressFilteresErrorCounters: UInt32 = 0x0000AE77; 
```

我可以在不使用 CodeMemberField 的情况下执行此操作吗？也许我可以以某种方式向类添加 CodeSnippetStatement，所以我们简单地说，通过使用力向类添加一些行，而不是使用 CodeMemberField 过滤声明行？

也许像这样：

```
 targetClass.Members.Add(new CodeSnippetStatement("var n = 2")); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-09T12:15:46.710

您不能`CodeSnippetStatement`直接将 a 添加到类中。但是，您可以将它们添加到`CodeMemberMethod`例如：

```
CodeMemberMethod method = new CodeMemberMethod();
method.Name = "DoSomething";
method.Attributes = MemberAttributes.Public | MemberAttributes.Final;
method.Statements.Add(new CodeSnippetStatement("var n = 2;")); 
```

尽管您不需要借助 a`CodeSnippetStatement`添加常量。您可以使用：

```
CodeTypeDeclaration exampleClass = new CodeTypeDeclaration("GeneratedClass");
CodeMemberField constant = new CodeMemberField(new CodeTypeReference(typeof(System.UInt32)), "addressFilteresErrorCounters");
constant.Attributes = MemberAttributes.Const;
constant.InitExpression = new CodePrimitiveExpression(0x0000AE77);
exampleClass.Members.Add(constant); 
```

# java - Youtube Android Api 显示错误

> ID：15547527
> 
> 赞同：6
> 
> 时间：2013-03-21T12:27:35.083
> 
> 标签：java, android, youtube-api

我正在**使用 Youtube android api 开发一个 android 应用程序。**它在上周成功运行。但现在它显示一个错误，"

> 初始化 youtube 播放器时出错（网络错误）

然后我通过开发者论坛尝试了使用 Youtube android api 的示例应用程序。它也显示了同样的错误..请给我一个解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T03:56:58.783

我无法重现该错误。我在我的 Nexus 7 上使用带有 Youtube Android Api 的示例应用程序，以及 YouTube 应用程序的最后一个版本。

也许它与这里提到的问题有关：

[YouTube 意图，错误 400](https://stackoverflow.com/questions/13731192/youtube-intent-error-400)

您可以尝试提到的解决方法“退出 youtube 应用程序，然后重新登录”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T11:48:15.170

[在帮助解决我的问题的Google 产品论坛](https://productforums.google.com/forum/#!topic/youtube/FQoBYsObhBQ)上尝试此解决方案- 这与您遇到的问题类似:)

解决方案：只提供**YouTube ID**，而不是整个 YouTube URL 给`loadVideo()`函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-27T10:28:00.743

试试这个 400 错误..

检查您的 id。我认为 id 或 youtube url 的开头或结尾都有空格。我有类似的问题并由此解决。您也应该尝试。如果您正确设置，这可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-26T08:48:17.093

我遇到了同样的问题。我意识到 youtube 应用程序有可用的更新，因此无法使用。安装更新后一切正常。当需要安装更新时，该应用程序似乎以某种方式阻止了 API。

# java - 在tomcat中创建文件

> ID：15547530
> 
> 赞同：-4
> 
> 时间：2013-03-21T12:27:43.090
> 
> 标签：java, tomcat

我有一个 tomcat java web 应用程序。我想创建一个文件来存储一些 json 数据。如何创建此文件以及将在何处创建此文件？

```
public void insert(UserProfile profile) {
    JSONObject jsUser = profile.asJSONObject();     

    try {

        String path = profile.getUsername()+".json";
        FileWriter fileWriter = new FileWriter(path);

        fileWriter.write(jsUser.toJSONString());
        fileWriter.flush();
        fileWriter.close();

    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:36:58.993

> 我如何创建这个文件...

使用标准的 Java I/O 库来创建和写入文件；例如，您可以使用 FileWriter。

> ...这个文件将在哪里创建？

完全由您决定要在哪里创建文件。

但是，您需要注意有人可能会破坏您的 Web 服务，因为它会填满文件系统……或者导致它在某些（重要的）现有文件之上写入内容。您需要一个好的策略来处理这些问题，但这取决于这些文件的目的以及编写它们的环境。

# zend-framework - Zend Session Namespace，获取定义数组的键

> ID：15547531
> 
> 赞同：1
> 
> 时间：2013-03-21T12:28:00.607
> 
> 标签：zend-framework, zend-session-namespace

我正在使用一些 Zend_Session_Namespace 对象来保存一些数据，其中大部分数据或多维数组。我感觉我错过了 Zend_Session_Namespace 逻辑的一部分，或者我没有将它们用于它们应该做的事情。

例如，我将 cd id 及其 tracklist 存储为数组。

```
$session = new Zend_Session_Namespace('cd-track-list');
$session->{123} = array('First Track', 'Second Track'); 
```

之后我想循环会话命名空间，我想知道 cd 的 id 和它的 tracklist。

```
foreach($session as $key => $value {
   // $key is 0 -> but should be 123
   // $value is array('First Track', 'Second Track');
} 
```

$value 是正确的，但这里没有设置 $key。所以我的问题是，当我循环所有 cd 时，如何获取 cd 的 id？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:56:50.107

它不适用于您的整数索引，它被强制转换为“0”，这就是问题所在。参见**“Zend_Session_Namespace.php”（__set）**

`$name = (string) $name;`

您可以使用：

```
$session = new Zend_Session_Namespace('cd-track-list');
$session->a = array('First Track', 'Second Track');

foreach($session as $key => $value {
   // $key is 0 -> but should be 123
   // $value is array('First Track', 'Second Track');
} 
```

# wpf - WPF DataGrid 到 BindingList 不起作用，从不显示结果

> ID：15547536
> 
> 赞同：0
> 
> 时间：2013-03-21T12:28:14.240
> 
> 标签：wpf, data-binding, datagrid

我正在尝试通过属性将数据绑定到 DataGrid，然后更新该属性以更改（排序）数据网格中的结果。

我最初绑定 DataGrid：

```
 BindingList<Booking> tourBookings;

    private async void PageFrame_Loaded_1(object sender, RoutedEventArgs e) {

            tourBookings = new BindingList<Booking>((await DataManager.BookingsRef.GetBookingHeaders(PageSize, CurrentPage)).TourBookings);

            dgBookings.DataContext = tourBookings;

    } 
```

此时 DataGrid 中没有任何内容，无论哪种方式我都有一个排序方法：

```
 private async void DataGrid_Sorting_1(object sender, DataGridSortingEventArgs e) {

        tourBookings = new BindingList<Booking>((await DataManager.BookingsRef.GetBookingHeaders(s, asc, PageSize, CurrentPage)).TourBookings);

    } 
```

..我的数据网格中仍然没有结果...

**我的结果在哪里？**

这也是我的绑定：

```
 <DataGrid x:Name="dgBookings" DataContext="{Binding Path=tourBookings}" Style="{StaticResource DataGridStyle}" AutoGenerateColumns="False" CanUserAddRows="False" 
                      ScrollViewer.PanningMode="VerticalOnly"  ScrollViewer.VerticalScrollBarVisibility="Auto"  ScrollViewer.CanContentScroll="True" 
                       ScrollViewer.PanningDeceleration="5"  ScrollViewer.PanningRatio="1" Grid.RowSpan="2"
                      Grid.Row="1" RowEditEnding="DataGrid_RowEditEnding_1"  CanUserSortColumns="True" Sorting="DataGrid_Sorting_1">

            <DataGrid.Columns>

                <DataGridTemplateColumn Width="*" SortMemberPath="Time" SortDirection="Ascending">
                    <DataGridTemplateColumn.Header>
                        Time
                    </DataGridTemplateColumn.Header>
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding StartTime, StringFormat=HH:mm}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn Width="*" SortMemberPath="TourID">
                    <DataGridTemplateColumn.Header>
                        Tour ID 1
                    </DataGridTemplateColumn.Header>
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding TourID}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

 ..... and load of other properties and then close datagrid.columns etc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:51:44.317

binding 仅适用于公共属性，您的 tourbookings 只是一个字段。

```
 BindingList<Booking> tourBookings {get;set;} 
```

编辑：

你必须设置 itemssource

```
<DataGrid ItemsSource="{Binding Path=tourBookings}" /> 
```

编辑2：

如果您将 datacontext 设置为您的列表，那么您的绑定应如下所示

```
<DataGrid ItemsSource="{Binding}" /> 
```

# unicode - SSIS 在 Unicode 和非 Unicode 错误之间转换

> ID：15547539
> 
> 赞同：79
> 
> 时间：2013-03-21T12:28:20.253
> 
> 标签：unicode, ssis, non-unicode

我有一个 ssis 包，我在其中使用链接到 SQL Server 2005 表的 OLEDB 源。除日期列之外的所有列都是 NVARCHAR(255)。我正在使用 Excel 目标并使用 SQL 语句在 Excel 工作簿中创建工作表，SQL 位于 excel 连接管理器中（实际上是创建工作表的 create table 语句），并且源自从D B。

无论我做了什么，我都会不断收到这个 unicode --> 我的源和目标之间的非 unicode 转换错误。尝试在 S > D 之间转换为字符串 [DT_STR]，将其删除，将 SQL 表 VARCHAR 更改为 NVARCHAR，但仍然出现此翻转错误。

因为我正在使用 SQL 语句在 Excel 中创建工作表，所以我看不到任何方法来实际预定义 Excel 工作表中列的数据类型。我想这将是一个默认的元数据，但我不知道。

那么在我的 SQL 表目标和使用这个 SSIS sql 语句创建我的 Excel 工作表之间，我怎样才能阻止这个错误的出现呢？

我的错误是：

> 数据流任务 [OLE DB 源 [1]] 出错：列“MyColumn”无法在 unicode 和非 unicode 字符串数据类型之间转换。

对于所有 nvarchar 列。

感谢任何帮助

谢谢

安德鲁

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2016-12-13T10:09:25.193

以下步骤对我有用：

1.  右键单击源任务。

2.  单击“显示高级编辑器”。

![ssis 中源任务的高级编辑选项](../Images/fb06c71924d39443cd7addca16885020.png)

3.  转到“输入和输出属性”选项卡。

![](../Images/7c8f4f9cc81a1ee599fb1d1c36a67c49.png)

4.  选择您收到错误的输出列。

5.  它的数据类型将是“String[DT_STR]”。

6.  将该数据类型更改为“Unicode String[DT_WSTR]”。

![将数据类型更改为 unicode 字符串](../Images/2b33226527e35bce91237ce625a05022.png)

7.  保存并关闭。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2014-03-25T11:49:19.360

添加数据转换转换以将字符串列从非 Unicode (DT_STR) 转换为 Unicode (DT_WSTR) 字符串。

您需要对所有字符串列执行此操作...

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2018-03-02T23:38:51.697

这里缺少的部分是`Data Conversion`对象。它应该在 OLE DB Source 和 Destination 对象之间。

[![在此处输入图像描述](../Images/e7483de8eca46879a383fa34e77bc714.png)](https://i.stack.imgur.com/MtmSr.jpg)

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2015-06-11T05:41:36.377

1.  首先，将数据转换块添加到数据流图中。

2.  打开数据转换块并勾选显示错误的列。下面将其数据类型更改为 unicode string(DT_WSTR) 或任何预期的数据类型并保存。

3.  转到目标块。去里面映射，把新创建的元素映射到对应的地址，保存。

4.  在解决方案资源管理器中右键单击您的项目。选择属性。选择配置属性并在其中选择调试。在此，将 Run64BitRunTime 选项设置为 false（因为 excel 不能很好地处理 64 位应用程序）。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-11-08T13:38:47.687

您可以将 nvarchar 列转换为 varchar 列，而不是添加之前建议的*数据转换。*这可以防止您执行不必要的步骤，并且具有比替代方案更高的性能。

在您的 SQL 语句的选择中，替换`date`为`CAST(date AS varchar([size]))`. 由于某种原因，这还没有改变输出数据类型。为此，请执行以下操作：

1.  右键单击您的*OLE DB 源*步骤并打开高级编辑器。
2.  转到输入和输出属性
3.  选择输出列
4.  选择您的专栏
5.  在数据类型属性下将数据类型更改为字符串 [DT_STR]
6.  将 Length 更改为您在*CAST*语句中指定的长度

完成此操作后，您的源数据将作为 varchar 输出，您的错误将消失。

[资源](http://www.sqlservercentral.com/articles/Integration+Services+(SSIS)/149290/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-07-31T20:57:26.537

我一直有同样的问题，并尝试了这里写的所有东西，但它仍然给了我同样的错误。结果是我试图转换的列中的 NULL 值。

删除 NULL 值解决了我的问题。

干杯，艾哈迈德

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-01-19T13:52:27.037

在上面的示例中，我一直丢失值，我认为延迟验证将允许将新数据类型保存为元数据的一部分。

在“Excel 连接管理器”的连接管理器上，从属性中将延迟验证设置为 False。

然后在 Excel 的数据流目标任务上，再次从属性中将 ValidationExternalMetaData 设置为 False。

现在，这将允许您右键单击 Excel 目标任务并转到 Excel 目标的高级编辑器 - > 最右侧选项卡 - 输入和输出属性。在 External Columns 文件夹部分，您现在可以更改有问题的列的数据类型和长度值，现在可以保存。

祝你好运！

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-03-16T16:28:30.190

似乎没有人提到这一点，但是在源查询中将 varchar 转换为 nvarchar 也解决了这个问题。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-10-09T10:05:08.297

当我安装连接到在 Windows 上运行的 Oracle 12 服务器的 Oracle 版本 12 客户端 32 位客户端时，我遇到了这种情况。尽管 Oracle-source 和 SqlServer-destination 都不是 Unicode，但我一直收到此消息，好像 oracle 列是 Unicode。我解决了插入数据转换框的问题，并为 varchar2 字段选择类型 DT-STR（非 unicode），为数字字段选择类型 DT-WSTR（unicode），然后我从输出字段名称中删除了“COPY OF”。请注意，我一直收到错误，因为我在设置转换类型之前已将源框箭头与转换框连接起来。所以我不得不切换源框，这清除了目标框中的所有错误。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-02-06T03:25:16.620

在 SQL Server 中创建表时，使您的表列`NVARCHAR`而不是`VARCHAR`.

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-06-17T22:47:37.360

我认为人们错过了这一点。在我的例子中，我有 100 个字符列可以在 Oracle 和 MS Sql 之间进行转换。如果您有 100 个单独的字符列要分配，那么所有关于数据转换和高级编辑器的东西都非常乏味。再加上 SSIS 是 SSIS，即使您将 VALIDATEEXTERNALMETADATA 设置为 false，它有时也会重置所有 100 个高级编辑器更改，这非常令人讨厌。如果有一些价值，我不介意进行数据转换，但是 20 年前 ETL 工具用来将 oracle 字符转换为 ms sql 字符而不大惊小怪。如果您有很多字符列并且可以使用 nvarchar，那么 Bakalolo 和 Zafer 说的就是答案，只需声明所有输出 ms sql 列（nvarchar），您的数据任务就会自动将您的 oracle 字段分配到 ms sql 字段中，没有手动覆盖。我还发现新的 Oracle Source (2021) 不会抱怨在 ms sql 中将 unicode 转换为 varchar。一位同事刚刚告诉我，将 oracle 字符分配给 ms sql varchar 的 ssis 向导（可能仅在 vs 2019+ 中）将自动执行分配而不会覆盖，但我个人没有尝试过。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-01T14:32:58.033

我刚刚遇到同样的问题，我在我的 SQL 请求中解决了它：直接使用 convert

```
CONVERT(NVARCHAR(50),'') AS MyVarName 
```

我需要将一个空的（或固定大小的字符串）放入 excel 文件中。将 MyVarName 的强制类型从 DT-STR 转换为 DT-WSTR (unicode)

# excel - 单元格中的“12/2013” 自动更改为“12/1/2013”

> ID：15547554
> 
> 赞同：1
> 
> 时间：2013-03-21T12:28:50.820
> 
> 标签：excel, vba

在 excel 中，如何防止这种值的自动更改，例如：“12/2013”​​到“12/1/2013”

如果我在单元格中输入“12/2013”​​，它会自动更改为“12/1/2013”​​。我不想要这个。

因为我想稍后使用 vba 搜索确切的“12/2013”​​。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T12:32:36.200

您可以`'`用作前缀，即输入`'12/2013`- 或预先将列/单元格格式化为文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T12:32:07.280

右键单击单元格（或选择单元格后的单元格）-> 单元格格式-> 数字-> 文本并重新输入数据。

# git - 为 R Studio 创建离线版本控制

> ID：15547555
> 
> 赞同：1
> 
> 时间：2013-03-21T12:28:51.140
> 
> 标签：git, version-control, rstudio

我需要创建一个（私有）版本控制，我将是唯一可以访问它的人。我想要一些关于如何将存储库放在本地驱动器而不是在线驱动器的意见。

在这些其他问题[中，private-version-control-without-server](https://stackoverflow.com/questions/11208072/private-version-control-without-server)和[协作使用git-without-remote-server](https://stackoverflow.com/questions/5559590/collaborate-using-git-without-remote-server)似乎可以使用 Git，但没有人提供实际的见解。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:52:58.350

即使您只有一个存储库，Git 也能正常工作。通常的工作流程是您始终在自己的本地存储库上工作。您可以与其他（“远程”）存储库共享更改，但您不必这样做。本地存储库可以自己做所有事情，包括分支和浏览历史记录。

# c++ - 具有复制分配的不同对象容器之间的自动化

> ID：15547559
> 
> 赞同：3
> 
> 时间：2013-03-21T12:29:02.610
> 
> 标签：c++, containers, copy-constructor, copy-assignment

我有一个稀疏向量类型`std::vector<SparseElement<T,I>>`，其中 SparseElement 是：

```
template<typename T, typename I = unsigned int>
struct SparseElement
{
    I index;
    T value;
    //............
    SparseElement &operator=(const std::pair<I,T> &pair);
 } 
```

因为我用于填充`std::map<I,T>`作为元素的稀疏向量 a `std::pair<I,T>`，所以我想要一个解决方案而不更改 SparseElement 的“索引”和“值”成员：

```
std::pair<I,T> a;
SparseElement<T,I> b;
b = a; // This is OK!
a = b; // Is there a solution on this problem?
// on containers:
std::vector<SparseElement<T,I>> vec;
std::map<I,T> m(vec.begin(), vec.end()); // Not working.
vec.assign(m.begin(), m.end()); // Working. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:48:08.060

重写答案以帮助社区

```
template<typename T, typename I = unsigned int>
struct SparseElement
{
    //..........
    I index;                //!< Index of element in vector
    T value;                //!< Value of element
    //..........
    //! Template copy constructor from a different type of \p std::pair
    //! This is useful for conversion from MapVector to SparseVector
    template<typename T2, typename I2>
    SparseElement(const std::pair<I2,T2> &s) : index(s.first), value(s.second) {}
    //..........
    //! Template copy assign from a different type of \p std::pair
    //! This is useful for conversion from MapVector to SparseVector
    template<typename T2, typename I2>
    SparseElement &operator=(const std::pair<I2,T2> &s) { index = s.first; value = s.second; return *this; }

    //! Implicit conversion from SparseElement to a \p std::pair
    //! This is useful for conversion from SparseVector to MapVector
    operator std::pair<const I,T>() { return std::pair<const I,T>(index, value); }
}; 
```

# google-maps - Google Map API v3 颜色自定义

> ID：15547570
> 
> 赞同：15
> 
> 时间：2013-03-21T12:29:34.570
> 
> 标签：google-maps, google-maps-api-3

![地图样本图片](../Images/470aae8a12ecb32b148048273a381d65.png)

我正在尝试使用谷歌地图实现类似上图的地图。我通过在 StyledMapType 对象中将饱和度设置为 -100 来制作地图灰度，并使用 Circle 对象在标记周围绘制一个半径。现在整个地图都是灰色的，因为我无法在圆圈内设置另一个饱和度。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-14T11:24:31.500

另一个想法是创建第二张地图，通过 StyledMapType 以另一种方式对其进行样式设置，使其绝对定位，并将其放在第一张灰度地图的前面。

您可以使用 -webkit-mask 使其看起来像[这里描述的那样](https://stackoverflow.com/questions/6894439/transparent-rounded-corners-on-google-map)

您还应该在地图之间同步事件，以便它们重合，即以相同位置为中心并且始终具有相同的缩放级别。您还需要创建某种阻止程序来避免递归调用

```
var block = false;
google.maps.event.addListener (thismap, 'center_changed', function(event) {
    if (block) return;
    block = true;
    othermap.setCenter(thisMap.getCenter());
    block=false;
}); 
```

对于两个地图，'center_changed'（控制地图居中）和'zoom_changed'（控制地图缩放）应该做同样的事情

这里我设置了一个[例子](http://jsfiddle.net/paulitto/Fn2LS/8/)

如果您需要以这种方式创建多个地图，则需要做更多工作以使它们坚持必要的点

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T13:44:58.323

据我所知，没有办法直接在 API 中完成此操作。过去我不得不实现类似的效果，而我的做法是创建一个“甜甜圈”而不是一个圆圈。

实际上，这个想法是创建一个不包括其中心的圆形区域的大形状。通过这种方式，您可以将多边形上的不透明度设置得相当低，以便在本例中突出显示“感兴趣区域”为中心圆。

这可能是一个很好的起点：[http ://www.geocodezip.com/v3_polygon_example_donut.html](http://www.geocodezip.com/v3_polygon_example_donut.html)

虽然显然在你的情况下你会想要改变颜色。另请注意，大小是固定的，因此除非您限制地图边界，否则用户将能够缩小到足够远以看到边缘（从而破坏错觉），并且多边形会向两极扭曲（讨厌的球形地球）。

希望这可以帮助。

# javascript - 为什么 jQuery 加载器不工作？

> ID：15547573
> 
> 赞同：-1
> 
> 时间：2013-03-21T12:29:42.940
> 
> 标签：javascript, jquery, html

当我的网站开始加载时，它应该显示加载到我的网站加载时。为此，我使用了 jQuery 插件。以下是js文件

```
/*
 * jQuery showLoading plugin v1.0
 * 
 * Copyright (c) 2009 Jim Keller
 * Context - http://www.contextllc.com
 * 
 * Dual licensed under the MIT and GPL licenses.
 *
 */

    jQuery.fn.showLoading = function(options) {

        var indicatorID;
            var settings = {
                'addClass': '',
                'beforeShow': '', 
                'afterShow': '',
                'hPos': 'center', 
                'vPos': 'center',
                'indicatorZIndex' : 5001, 
                'overlayZIndex': 5000, 
                'parent': '',
                'marginTop': 0,
                'marginLeft': 0,
                'overlayWidth': null,
                'overlayHeight': null
            };

        jQuery.extend(settings, options);

            var loadingDiv = jQuery('<div></div>');
        var overlayDiv = jQuery('<div></div>');

        //
        // Set up ID and classes
        //
        if ( settings.indicatorID ) {
            indicatorID = settings.indicatorID;
        }
        else {
            indicatorID = jQuery(this).attr('id');
        }

        jQuery(loadingDiv).attr('id', 'loading-indicator-' + indicatorID );
        jQuery(loadingDiv).addClass('loading-indicator');

        if ( settings.addClass ){
            jQuery(loadingDiv).addClass(settings.addClass);
        }

        //
        // Create the overlay
        //
        jQuery(overlayDiv).css('display', 'none');

        // Append to body, otherwise position() doesn't work on Webkit-based browsers
        jQuery(document.body).append(overlayDiv);

        //
        // Set overlay classes
        //
        jQuery(overlayDiv).attr('id', 'loading-indicator-' + indicatorID + '-overlay');

        jQuery(overlayDiv).addClass('loading-indicator-overlay');

        if ( settings.addClass ){
            jQuery(overlayDiv).addClass(settings.addClass + '-overlay');
        }

        //
        // Set overlay position
        //

        var overlay_width;
        var overlay_height;

        var border_top_width = jQuery(this).css('border-top-width');
        var border_left_width = jQuery(this).css('border-left-width');

        //
        // IE will return values like 'medium' as the default border, 
        // but we need a number
        //
        border_top_width = isNaN(parseInt(border_top_width)) ? 0 : border_top_width;
        border_left_width = isNaN(parseInt(border_left_width)) ? 0 : border_left_width;

        var overlay_left_pos = jQuery(this).offset().left + parseInt(border_left_width);
        var overlay_top_pos = jQuery(this).offset().top + parseInt(border_top_width);

        if ( settings.overlayWidth !== null ) {
            overlay_width = settings.overlayWidth;
        }
        else {
            overlay_width = parseInt(jQuery(this).width()) + parseInt(jQuery(this).css('padding-right')) + parseInt(jQuery(this).css('padding-left'));
        }

        if ( settings.overlayHeight !== null ) {
            overlay_height = settings.overlayWidth;
        }
        else {
            overlay_height = parseInt(jQuery(this).height()) + parseInt(jQuery(this).css('padding-top')) + parseInt(jQuery(this).css('padding-bottom'));
        }

        jQuery(overlayDiv).css('width', overlay_width.toString() + 'px');
        jQuery(overlayDiv).css('height', overlay_height.toString() + 'px');

        jQuery(overlayDiv).css('left', overlay_left_pos.toString() + 'px');
        jQuery(overlayDiv).css('position', 'absolute');

        jQuery(overlayDiv).css('top', overlay_top_pos.toString() + 'px' );
        jQuery(overlayDiv).css('z-index', settings.overlayZIndex);

        //
        // Set any custom overlay CSS       
        //
            if ( settings.overlayCSS ) {
                jQuery(overlayDiv).css ( settings.overlayCSS );
            }

        //
        // We have to append the element to the body first
        // or .width() won't work in Webkit-based browsers (e.g. Chrome, Safari)
        //
        jQuery(loadingDiv).css('display', 'none');
        jQuery(document.body).append(loadingDiv);

        jQuery(loadingDiv).css('position', 'absolute');
        jQuery(loadingDiv).css('z-index', settings.indicatorZIndex);

        //
        // Set top margin
        //

        var indicatorTop = overlay_top_pos;

        if ( settings.marginTop ) {
            indicatorTop += parseInt(settings.marginTop);
        }

        var indicatorLeft = overlay_left_pos;

        if ( settings.marginLeft ) {
            indicatorLeft += parseInt(settings.marginTop);
        }

        //
        // set horizontal position
        //
        if ( settings.hPos.toString().toLowerCase() == 'center' ) {
            jQuery(loadingDiv).css('left', (indicatorLeft + ((jQuery(overlayDiv).width() - parseInt(jQuery(loadingDiv).width())) / 2)).toString()  + 'px');
        }
        else if ( settings.hPos.toString().toLowerCase() == 'left' ) {
            jQuery(loadingDiv).css('left', (indicatorLeft + parseInt(jQuery(overlayDiv).css('margin-left'))).toString() + 'px');
        }
        else if ( settings.hPos.toString().toLowerCase() == 'right' ) {
            jQuery(loadingDiv).css('left', (indicatorLeft + (jQuery(overlayDiv).width() - parseInt(jQuery(loadingDiv).width()))).toString()  + 'px');
        }
        else {
            jQuery(loadingDiv).css('left', (indicatorLeft + parseInt(settings.hPos)).toString() + 'px');
        }       

        //
        // set vertical position
        //
        if ( settings.vPos.toString().toLowerCase() == 'center' ) {
            jQuery(loadingDiv).css('top', (indicatorTop + ((jQuery(overlayDiv).height() - parseInt(jQuery(loadingDiv).height())) / 2)).toString()  + 'px');
        }
        else if ( settings.vPos.toString().toLowerCase() == 'top' ) {
            jQuery(loadingDiv).css('top', indicatorTop.toString() + 'px');
        }
        else if ( settings.vPos.toString().toLowerCase() == 'bottom' ) {
            jQuery(loadingDiv).css('top', (indicatorTop + (jQuery(overlayDiv).height() - parseInt(jQuery(loadingDiv).height()))).toString()  + 'px');
        }
        else {
            jQuery(loadingDiv).css('top', (indicatorTop + parseInt(settings.vPos)).toString() + 'px' );
        }       

        //
        // Set any custom css for loading indicator
        //
            if ( settings.css ) {
                jQuery(loadingDiv).css ( settings.css );
            }

        //
        // Set up callback options
        //
        var callback_options = 
            {
                'overlay': overlayDiv,
                'indicator': loadingDiv,
                'element': this
            };

        //
        // beforeShow callback
        //
        if ( typeof(settings.beforeShow) == 'function' ) {
            settings.beforeShow( callback_options );
        }

        //
        // Show the overlay
        //
        jQuery(overlayDiv).show();

        //
        // Show the loading indicator
        //
        jQuery(loadingDiv).show();

        //
        // afterShow callback
        //
        if ( typeof(settings.afterShow) == 'function' ) {
            settings.afterShow( callback_options );
        }

        return this;
         };

    jQuery.fn.hideLoading = function(options) {

            var settings = {};

            jQuery.extend(settings, options);

        if ( settings.indicatorID ) {
            indicatorID = settings.indicatorID;
        }
        else {
            indicatorID = jQuery(this).attr('id');
        }

        jQuery(document.body).find('#loading-indicator-' + indicatorID ).remove();
        jQuery(document.body).find('#loading-indicator-' + indicatorID + '-overlay' ).remove();

        return this;
        }; 
```

在 html 文件中，我使用了如下脚本。

```
<script type="text/javascript">
$(document).ready(
            function()
            {
                jQuery('#activity_pane').showLoading(
                    {
                        'afterShow': 
                        function() 
                        {
                            setTimeout( "jQuery('#activity_pane').hideLoading()", 3000 );
                        }
                    }
                );
            }
        ); 

</script> 
```

我的 div 标签如下..

```
<div id="activity_pane">
    Here is where we will load something via ajax.
    <br />
    This container <b>must</b> have an id attribute
</div> 
```

但我收到如下错误..

```
TypeError: jQuery(...).showLoading is not a function
function() 
```

请帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T15:27:00.993

第一件事。

在页面上加载整个内容后触发以下事件：

```
$(document).ready() 
```

那么，为什么要在这个事件上附加一个加载窗口，因为它应该在页面加载时显示？

检查插件网站，给出的示例是将其附加到单击事件，因此在执行 AJAX 调用时会弹出加载窗口。除非您的整个页面是从单击事件开始的 AJAX 调用加载的，否则我很确定他们的示例不符合您的想法。

# android - 在phonegap / coredava的应用程序安装问题后第一次运行sqlite

> ID：15547578
> 
> 赞同：1
> 
> 时间：2013-03-21T12:29:51.533
> 
> 标签：android, sqlite, cordova

我正在使用phonegap / coredava开发一个应用程序，同时尝试在安装应用程序后第一次创建访问数据库我无法访问数据库但在第二次运行时一切正常我该如何解决这个问题我的javascript代码如下

```
 var dbsize=4*1024;
    document.addEventListener("deviceready", onDeviceReady, false);
    var dbShell = window.openDatabase("mydb", "1.0", "my db", dbsize); 
    function onDeviceReady(){
        dbShell.transaction(defaultPopulatedb,errorDF,successDF);
    }
    function defaultPopulatedb(tx){ //creating tables for the first time
    tx.executeSql('CREATE TABLE IF NOT EXISTS Userlocation (id INTEGER PRIMARY KEY AUTOINCREMENT, Location TEXT NOT NULL, Locationvalue TEXT NOT NULL)',[],checkfirst,errorTB);
    }
    function checkfirst(tx) 
    {
    tx.executeSql('SELECT * FROM Userlocation',[],chevals,errorDFS);        }
    }
    function chevals(tx,result)
    {     
     var len =result.rows.length;
        if(!len){
        tx.executeSql('INSERT INTO Userlocation(Location,Locationvalue) VALUES ("default","default")',[],added,erdf);
        }
    }
    function errorDFS()
   {
     alert("error");
   }
    function added()
   {
     alert("added");
   }
    function erdf()
   {
     alert("error adding default");
   }
    function errorTB()
   {
     alert("error table");
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:57:54.977

我也遇到过这个问题。您可以简单地 try{...} catch (ex){...} 并忽略第一个异常。

实际上， phonegap[有](https://cordova.codeplex.com/wikipage?title=How%20to%20use%20nova.data)一个很棒的数据访问框架。

# c# - 你可以用 C# 编写 C++ 包装器而不是使用 C++/CLI 吗？

> ID：15547581
> 
> 赞同：1
> 
> 时间：2013-03-21T12:30:06.210
> 
> 标签：c#, .net, visual-c++, compilation, cil

我正在尝试从托管的 .NET 应用程序访问 C++ 代码。为此，我需要在 C++/CLI 中为我需要的非托管 C++ 类编写[.NET 包装器。](http://www.multicoreconsulting.co.uk/blog/c-snippets/how-to-call-unmanaged-cplusplus-from-csharp/)

如果 C++/CLI 编译为普通的旧 CIL，那么为什么不能使用*不安全*的类在 C# 中编写相同的包装类，因为 C# 也支持指针？

是不是因为 C++/CLI 编译器与 C# 编译器不同，可以引用原生 C++ 代码而 C# 不能？

如果可以，我愿意，因为我对 C# 语法比对 C++ 更熟悉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:24:04.727

您可以（尝试）并且通过足够的努力，您可能可以使事情顺利进行；即使没有诉诸`unsafe`代码。但我认为您会发现用于互操作情况的 C++/CLI 语法与 C# 非常相似。

然而，这种方法的最大问题可能是互操作层的长期维护。每次 C++ 方面发生变化时，您可能必须手动对 C# 进行更改。你不会从 C# 编译器中得到太多帮助，提醒你注意这些事情。只有在运行时无法在 DLL 中找到损坏的 C++ 名称时，您才会知道。

在 C# 中重新实现 C++ .H 文件也容易出错，尤其是当您需要相同的代码同时用于 32 位和 64 位时。

# c# - Dynamics CRM 2011 - 使用 QueryExpression 获取一组 N:1 相关实体

> ID：15547583
> 
> 赞同：2
> 
> 时间：2013-03-21T12:30:10.110
> 
> 标签：c#, .net, dynamics-crm-2011

我正在为 CRM 2011 部署开发自定义 Web 服务，现在我正在概述与我们的一些实体相关的内容。我们有一个自定义`product`实体，其中包含产品名称和类别等详细信息，并且我们有一个`agreement`实体，它将 链接`product`到客户并包含特定于该客户的产品详细信息。`agreement`并且`product`有 N:1 的关系。

我现在正在制作一个概述页面，它将显示在 CRM 的客户页面上，该页面应该显示`agreement`该客户的所有 s。对于此显示，我还需要检索有关`product`这些协议链接到的 s 的一些信息，这些信息将用于对`agreement`概览页面上的 s 进行分组。我一直找不到任何相关/具体的例子，我一直在努力寻找一种可行的方法来查询我需要的数据。

按照我的想象，我想使用两个查询来获取所需的数据。首先，一个查询获取`agreement`关于客户的所有 s。然后将此列表传递给第二个查询，该查询返回`product`与第一个列表相交的所有 s。这是否可以使用 a `QueryExpression`，或者我是否需要遍历`agreement`列表并为每个单独的关联运行单独的查询？`FetchXML`如果可能的话，我宁愿避免。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:37:29.510

如果我正确理解您的问题，您只需在第一个查询时将[LinkEntity](http://msdn.microsoft.com/en-us/library/bb890678.aspx)添加到您的 Product 实体中。您还可以指定要返回的 Product 实体的属性，但它们会以[AliasedValues](http://www.dotnetdust.blogspot.com/2013/03/simplifying-retrieval-of-aliased-values.html)的形式返回，因此请注意这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T21:33:50.430

添加到 Daryls 的答案中，您可以查看[这篇文章](https://stackoverflow.com/questions/14320701/how-to-obtain-members-of-a-marketing-list-using-queryexpression-object)以获取有关如何链接实体的示例。MSDN 在这个主题上令人困惑（至少对我而言）。

我在那里提出了一个很好的查询表达式结构，而 Daryl 提出了一个更紧凑的等价物。（我的当然更好。：D）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:50:52.890

`ConditionOperator.In`我查看了 LinkEntity，但最终在第二个查询中实现了我想要做的事情，如下所示：

```
query.Criteria.AddCondition(
    new ConditionExpression(
        "myprefix_productid",
        ConditionOperator.In,
        agreementList )
); 
```

`agreementList`s的数组在哪里`Guid`。我在发布问题之前也尝试了这个，但没有将参数包装在 中`new ConditionExpression()`，这不起作用。大概这是因为隐式方式为`AddCondition`函数调用了错误的重载。

不过，其他答案中的有用链接，我也会研究一下！

# javascript - crypto-js 无法解密它加密的内容

> ID：15547584
> 
> 赞同：4
> 
> 时间：2013-03-21T12:30:22.217
> 
> 标签：javascript, cryptography

我需要使用 AES CBC no pad 使用 javascript 加密一个字符串，通过 HTTP 将 IV 和加密数据作为 HEX 传递，然后在服务器端使用 javascript 解密。

解密功能有效，因为我可以正确解密使用 hurlant AS3 库加密的数据。但是，下面的加密不起作用 - 结果无法使用解密函数解密，也无法使用 hurant 演示解密：[http ://crypto.hurlant.com/demo/](http://crypto.hurlant.com/demo/)

在此示例中，我使用“1234”作为消息，而不是实际数据。

除了只有琐碎案例的快速入门指南之外，我已经搜索并发现没有任何关于这个库或其功能的文档，所以一切都是通过反复试验。我已经尝试了以下数百种变体。

示例生成的 IV 为十六进制：“15ae89d17f632d21f0cda04734d38694”

示例生成的加密数据为 HEX：“44ddf295”

示例消息：“15ae89d17f632d21f0cda04734d3869444ddf295”

谁能看到我的 encrypt() 函数有什么问题？

```
// this function doesnt work - the resultant message (which is 
//       IV+Ecypted text all as HEX cannot be decrypted.
function encrypt() {
    var key = CryptoJS.enc.Hex.parse('48656c6c6f2c20576f726c6421888888');
    var IVLEN = 16; // Im guessing this is 16 bytes.
    var iv= CryptoJS.lib.WordArray.random(IVLEN);
    var encrypted;
    var message;

    encrypted = CryptoJS.AES.encrypt("1234", key, { iv: iv, padding: CryptoJS.pad.NoPadding,  mode: CryptoJS.mode.CBC });

    message = CryptoJS.enc.Hex.stringify(iv) + CryptoJS.enc.Hex.stringify(encrypted.ciphertext);

    var test = decrypt(message);  // throws a malformed UTF-8 exception

    alert (test); // should alert "1234"

    return message;

}

// this function works perfectly with data generated using HURLANT crypto libs.
function decrypt(data) {
    var key = CryptoJS.enc.Hex.parse('48656c6c6f2c20576f726c6421888888');
    var ivHexStr, iv;
    var encMessageHexStr;
    var IVLEN = 32;  // This is 16 bytes, as one byte is 2 Hex chars.
    var encrypted = {};
    var decrypted;
    var result;

    ivHexStr = data.substring(0,IVLEN);
    encMessageHexStr = data.substring(IVLEN);

    iv = CryptoJS.enc.Hex.parse(ivHexStr);
    encrypted.key        = key;
    encrypted.iv         = iv;
    encrypted.ciphertext = CryptoJS.enc.Hex.parse(encMessageHexStr);

    decrypted = CryptoJS.AES.decrypt(encrypted, key, { iv: iv, padding: CryptoJS.pad.NoPadding, mode: CryptoJS.mode.CBC });

    result = CryptoJS.enc.Utf8.stringify(decrypted);

    return(result);
}; //decrypt() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:46:10.353

使用 CBC 模式填充是必需的。CFB 或 OFB 都不需要填充。

[CryptoJS 支持以下模式：](http://code.google.com/p/crypto-js/#Block_Modes_and_Padding)

*   CBC（默认）
*   循环流化床
*   点击率
*   OFB
*   欧洲央行

[CryptoJS 支持以下填充方案：](http://code.google.com/p/crypto-js/#Block_Modes_and_Padding)

*   pkcs7（默认）
*   ISO97971
*   AnsiX923
*   ISO10126
*   零填充
*   无填充

# amazon-web-services - 使用 boto 在现有 EBS 卷上正确设置 DeleteOnTermination

> ID：15547593
> 
> 赞同：0
> 
> 时间：2013-03-21T12:30:41.993
> 
> 标签：amazon-web-services, amazon-ec2, boto

挖掘代码（例如考虑[this](https://github.com/boto/boto/commit/8a35e954cd73b2ddec6c4d9fee4070b41d275da7)），我发现我可以使用以下方法读取属性：

```
instance.block_device_mapping['/dev/sdz'].delete_on_termination 
```

...并使用以下方法切换它：

```
instance.modify_attribute('blockdevicemapping', ['/dev/sdz=1']) # toggle on
instance.modify_attribute('blockdevicemapping', ['/dev/sdz']) # toggle off 
```

但它是不对称的，我觉得我缺少一些更高级别的功能。

不应该更像：

```
block_device_type = instance.block_device_mapping['/dev/sdz']
block_device_type.delete_on_termination = True
block_device_type.save() # I made this API up 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-20T03:47:18.643

You turn this setting on and off with a list of the formatted string `'%s=%d'`.

*Switch to on*

```
>>> inst.modify_attribute('blockDeviceMapping', ['/dev/sda1=1']) 
```

*Switch to off*

```
>>> inst.modify_attribute('blockDeviceMapping', ['/dev/sda1=0']) 
```

* * *

I verified changes outside of python after each attempt to change the setting using:

```
$ aws ec2 describe-instance-attribute --instance-id i-7890abcd --attribute blockDeviceMapping 
```

1.  Calling `inst.modify_attribute('blockDeviceMapping', ['/dev/sda1'])` (the string lacks `=0`) did not produce any change.
2.  Assigning to `inst.block_device_mapping['/dev/sda1'].delete_on_termination` also did not produce any change.

* * *

After calling `modify_attribute`, the value of `delete_on_termination` on local block device objects is unchanged.

* * *

I walk through the whole process at:
[http://f06mote.com/post/77239804736/amazon-ec2-instance-safety-tweak-turn-off-delete-on](http://f06mote.com/post/77239804736/amazon-ec2-instance-safety-tweak-turn-off-delete-on)

# android - 使用 android 创建许多配置文件

> ID：15547601
> 
> 赞同：0
> 
> 时间：2013-03-21T12:31:01.530
> 
> 标签：android, database, android-intent, android-sqlite

我创建了一个屏幕，它将接受用户的输入，例如姓名、地址等。我使用数据库表中的 ID 存储这些信息。所以我可以使用 ID 检索这些信息。现在我的问题是，创建帐户后，会出现现有配置文件列表，用户应该单击他的名字来激活他的帐户。激活他的帐户必须包括检索他的姓名和地址。并且名称应该出现在下一个屏幕上。我面临的问题是，我已经使用 onListItemClick 事件检索了当前用户的 ID。因此，仅当用户单击名称时才检索信息，并且如果他单击任何其他按钮，信息就会消失。我怎样才能保留用户的信息，直到他注销？

我的代码：

```
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);      
    mRowId = id;
    if (mRowId != null) {
      Intent i = new Intent(this, Main.class);
      i.putExtra("ID", mRowId);
      startActivity(i);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:40:43.233

推荐的方法是使用[SharedPreferences](http://developer.android.com/guide/topics/data/data-storage.html#pref)。您可以在其中存储键值对，以便随时轻松访问。您可以在此处存储用户名和其他登录信息，然后访问它以获取当前用户的详细信息。

所以一个简单的算法可能是：

*   当应用程序启动时，如果没有用户处于活动状态，则显示用户创建/选择屏幕

*   一旦用户创建/选择他的个人资料，将用户数据存储在共享首选项中并继续下一个屏幕。

有关共享首选项的实际用法，请参阅此线程：

[如何在 Android 中使用 SharedPreferences 来存储、获取和编辑值](https://stackoverflow.com/questions/3624280/how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values)

# c# - WCF 双工内的 TPL 数据流块

> ID：15547607
> 
> 赞同：2
> 
> 时间：2013-03-21T12:31:09.943
> 
> 标签：c#, .net, wcf, task-parallel-library, tpl-dataflow

我是SO的新作家，请多多包涵。

我有一个带有双工服务合同的 WCF 服务。该服务合同有一个操作联系人，假设进行长时间的数据处理。我被限制将并发数据处理的数量限制为最多 3 个。我的问题是，在数据处理之后，我需要返回到相同的服务实例上下文，所以我回调我的发起程序端点，传递数据处理结果。我需要提一下，由于各种原因，我受限于 TPL 数据流和 WCF 双工。

这是我到目前为止所写内容的演示

在控制台库中，我模拟 WCF 调用

```
class Program
{
    static void Main(string[] args)
    {
        // simulate service calls

        Enumerable.Range(0, 5).ToList().ForEach(x =>
        {
            new System.Threading.Thread(new ThreadStart(async () =>
            {
                var service = new Service();
                await service.Inc(x);
            })).Start();
        });
    }
} 
```

这是假设为 WCF 服务的内容

```
// service contract
public class Service
{
    static TransformBlock<Message<int>, Message<int>> transformBlock;

    static Service()
    {
        transformBlock = new TransformBlock<Message<int>, Message<int>>(x => Inc(x), new ExecutionDataflowBlockOptions
        {
            MaxDegreeOfParallelism = 3
        });
    }

    static Message<int> Inc(Message<int> input)
    {
        System.Threading.Thread.Sleep(100);

        return new Message<int> { Token = input.Token, Data = input.Data + 1 };
    }

    // operation contract
    public async Task Inc(int id)
    {
        var token = Guid.NewGuid().ToString();

        transformBlock.Post(new Message<int> { Token = token, Data = id });

        while (await transformBlock.OutputAvailableAsync())
        {
            Message<int> message;
            if (transformBlock.TryReceive(m => m.Token == token, out message))
            {
                // do further processing using initiator service instance members
                // something like Callback.IncResult(m.Data);
                break;
            }
        }
    }
}

public class Message<T>
{
    public string Token { get; set; }

    public T Data { get; set; }
} 
```

操作合同并不是真正需要异步的，但我需要 OutputAvailableAsync 通知。

这是一个好方法还是对我的场景有更好的解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:00:48.750

首先，我认为您不应该以您的方式使用令牌。在进程之间进行通信时，唯一标识符很有用。但是当您在单个进程中时，只需使用引用相等。

要真正回答您的问题，我认为（某种）繁忙循环不是一个好主意。

一个更简单的异步限制解决方案是使用[`SemaphoreSlim`](http://msdn.microsoft.com/en-us/library/system.threading.semaphoreslim.aspx). 就像是：

```
static readonly SemaphoreSlim Semaphore = new SemaphoreSlim(3);

// operation contract
public async Task Inc(int id)
{
    await Semaphore.WaitAsync();

    try
    {
        Thread.Sleep(100);
        var result = id + 1;
        // do further processing using initiator service instance members
        // something like Callback.IncResult(result);
    }
    finally
    {
        Semaphore.Release();
    }
} 
```

如果您真的想（或必须？）使用数据流，您可以[`TaskCompletionSource`](http://msdn.microsoft.com/en-us/library/dd449174.aspx)用于操作和块之间的同步。操作方法将等待，`Task`并且`TaskCompletionSource`块将在完成对该消息的计算时设置它：

```
private static readonly ActionBlock<Message<int>> Block =
    new ActionBlock<Message<int>>(
        x => Inc(x),
        new ExecutionDataflowBlockOptions
        {
            MaxDegreeOfParallelism = 3
        });

static void Inc(Message<int> input)
{
    Thread.Sleep(100);

    input.TCS.SetResult(input.Data + 1);
}

// operation contract
public async Task Inc(int id)
{
    var tcs = new TaskCompletionSource<int>();

    Block.Post(new Message<int> { TCS = tcs, Data = id });

    int result = await tcs.Task;
    // do further processing using initiator service instance members
    // something like Callback.IncResult(result);
} 
```

# android - 如何识别android中ExpandableListView的getChildView中的按钮点击

> ID：15547610
> 
> 赞同：3
> 
> 时间：2013-03-21T12:31:21.740
> 
> 标签：android, expandablelistview, baseadapter

我正在我的 android 应用程序中构建 ExpandableListView。我制作了重复特定数字的子 xml 布局。我的 xml 布局中有一个删除按钮，其中 xml 中的 id 设置为 btnDelete。通过单击删除按钮，我想删除特定的孩子。

例如：

团体：

```
Child 1         Delete
Child 2         Delete
Chile 3         Delete 
```

现在我的问题是如何识别单击了哪个子删除按钮。因为所有删除按钮在我的 xml 布局中都有相同的 ID。请建议我一个解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:33:28.690

在您扩展行布局的适配器中，您可以`setTag ()`为每个删除按钮设置一个标签（使用方法）。标签可以是这个删除按钮对应的行位置。

稍后，当有人单击按钮时，在 中`onClickListener`，您将获得按钮标记（带有`v.getTag ()`），将其解析为整数并删除该位置的行。

# c# - 按钮和复选框不会出现在 windows 32 位 (windows xp) 中

> ID：15547613
> 
> 赞同：0
> 
> 时间：2013-03-21T12:31:27.953
> 
> 标签：c#, winforms, visual-studio

我已经为 windows 64 位的 windows 开发了一个应用程序，但是使用 .NET framework 3.5 但是在 windows 32 位中，按钮和复选框不会出现。为什么？

这是我在 Windows 64 位中运行的程序的打印屏幕

![在此处输入图像描述](../Images/8ca2fe098b85ce56630d5700d3524894.png)

这是我在 Windows 32 位中运行的程序的打印屏幕

![在此处输入图像描述](../Images/9b187cac3383f02a425a9c91bb0c615f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:43:21.440

不能发表评论，很遗憾。如上所述，它不太可能与 CPU/OS 架构有关。很明显，您使用不同的操作系统安装，也许是不同的 PC。任何一个都有它自己的偏好。在一般情况下，不可能说出为什么看不到复选框。它可以是路径问题、安全性或 %anything%。您是否在调试器下运行您的应用程序？您是否收到任何异常或日志条目？（如果你有一个）

# php - 如何将字符串中的值连接到变量中的值？

> ID：15547615
> 
> 赞同：3
> 
> 时间：2013-03-21T12:31:33.130
> 
> 标签：php, javascript, dynamic-forms, dynamicform

我目前正在从事开放式购物车框架工作。在那个打开的购物车中，存在动态表单。在那个动态表单中，所以脚本也是动态的，我必须计算表单数据何时发生变化。在此期间我遇到了一些问题。我正在动态获取选择框选项值....

```
foreach ($options as $option) {  $initiates_f=$initiates_f+1; ?>    
       <?php if ($option['type'] == 'select'){ ?>   

            var a_<?php echo $initiates_f;?>= document.getElementById("option[<?php echo $option['product_option_id']; ?>]").value;
            var spl_<?php echo $initiates_f;?>  = a_<?php echo $initiates_f;?>.split("_");
            var cr_<?php echo $initiates_f;?>   = spl_<?php echo $initiates_f;?>[1];
            var operator3_<?php echo $initiates_f;?>    = cr_<?php echo $initiates_f;?>.split("[");
            var symbol<?php echo $initiates_f;?> = operator3_<?php echo $initiates_f;?>[0];
            var dtt_<?php echo $initiates_f;?> =  operator3_<?php echo $initiates_f;?>[1];
            var myarr_<?php echo $initiates_f;?>        = dtt_<?php echo $initiates_f;?>.split("$");
            var symbol_st_<?php echo $initiates_f;?>    = myarr_<?php echo $initiates_f;?>[1];
            var split_value_<?php echo $initiates_f;?> = myarr_<?php echo $initiates_f;?>[1];
            var final_value_<?php echo $initiates_f;?>  =symbol_st_<?php echo $initiates_f;?>.split(".");
            var Final_price<?php echo $initiates_f;?>   =final_value_<?php echo $initiates_f;?>[0];

    <?php  }    } ?> 
```

此外，我将 Final_price 值分配给 for 循环之外的某个变量。这里的脚本编码...

```
 var total_amount=0;
                    for(var i=1; i<=j; i++)
                    {alert('test');

                             final_prices=("Final_price"+i).value;
                            alert(final_prices);
alert(symbol_prices.value);*/
                            if(isNumber(final_prices)){
                                alert("number");
                                /*if(symbol_prices =='+') {
                                        alert("plus");
                                 var total_amount+=parseInt(original_prices)+parseInt(final_prices);
                                 calculated_price_element.innerHTML=total_amount;
                                 alert(total_amount);
                            } else if(symbol_prices =='-') {
                                    alert("minus");
                                 var total_amount+=parseInt(original_prices)-parseInt(final_prices);
                                 calculated_price_element.innerHTML=total_amount;
                                  alert(total_amount);
                            }*/
                     //alert('test');

                    }

                } 
```

在那个编码`final_prices=("Final_price"+i).value;`没有从那个分配的变量返回值，如何获得这个值..请解决它..我挣扎了 2 天..任何其他替代解决方案..请指导我...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:09:47.007

我得到了解决方案....请遵循这个对其他更有用的...我总结了 php 和 java-script...

```
 foreach ($options as $option) {  $initiates_f=$initiates_f+1; ?>   
       <?php if ($option['type'] == 'select'){ ?>   

            var a_<?php echo $initiates_f;?>= document.getElementById("option[<?php echo $option['product_option_id']; ?>]").value;
            var spl_<?php echo $initiates_f;?>  = a_<?php echo $initiates_f;?>.split("_");
            var cr_<?php echo $initiates_f;?>   = spl_<?php echo $initiates_f;?>[1];
            var operator3_<?php echo $initiates_f;?>    = cr_<?php echo $initiates_f;?>.split("[");
            var symbol<?php echo $initiates_f;?> = operator3_<?php echo $initiates_f;?>[0];
            var dtt_<?php echo $initiates_f;?> =  operator3_<?php echo $initiates_f;?>[1];
            var myarr_<?php echo $initiates_f;?>        = dtt_<?php echo $initiates_f;?>.split("$");
            var symbol_st_<?php echo $initiates_f;?>    = myarr_<?php echo $initiates_f;?>[1];
            var split_value_<?php echo $initiates_f;?> = myarr_<?php echo $initiates_f;?>[1];
            var final_value_<?php echo $initiates_f;?>  =symbol_st_<?php echo $initiates_f;?>.split(".");
            var Final_price<?php echo $initiates_f;?>   =final_value_<?php echo $initiates_f;?>[0];

    <?php  }    } 

    echo 'var final_prices=0;';

       $initiates_f=0;
       foreach ($options as $option) {  $initiates_f=$initiates_f+1; 
       if ($option['type'] == 'select')
    {
    echo 'final_prices=parseInt(Final_price'.$initiates_f.');';
        echo    "total_amount+=parseInt(final_prices);
                    // alert(total_amount);
                 calculated_price_element.innerHTML=total_amount;";

     }
     }
    ?> 
```

感谢你...

# tinymce - JavaScript 弹出窗口中的 TinyMCE

> ID：15547616
> 
> 赞同：2
> 
> 时间：2013-03-21T12:31:37.037
> 
> 标签：tinymce

当 TinyMCE 在弹出窗口中时，我遇到了 TinyMCE 的问题。看看我对这个问题的解释。

此代码在我的 JSON 弹出窗口中

```
<!-- TinyMCE -->
<script type="text/javascript" src="../../Scripts/tiny_mce/tiny_mce.js"></script>
<script type="text/javascript">
    tinyMCE.init({
        mode: "textareas",
        theme: "simple"
    });
</script>
<!-- Gets replaced with TinyMCE, remember HTML in a textarea should be encoded -->
<textarea id="elm1" name="elm1" rows="8" cols="80" style="width: 80%">
        Pełny opis...
    </textarea>
<br /> 
```

首次弹出显示时，您可以看到此编辑器

![在此处输入图像描述](../Images/227670ef00368387abec02a15640b3d6.png)

第二次弹出显示时，您可以看到此编辑器

![在此处输入图像描述](../Images/566530ee27bf17271f0d0f3e2a3e6d17.png)

在我看来问题就在这里（只有一次正在使用这个 JS）

```
 <script type="text/javascript">
        tinyMCE.init({
            mode: "textareas",
            theme: "simple"
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:51:54.707

在第二种情况下，您会看到 textarea html 元素。这可能是因为您在关闭第一个弹出窗口时没有正确关闭 tinymce。幕后发生的事情是 html 结构消失了，但是 tinymce 仍然注册了编辑器实例，并且在您重新打开弹出窗口时不会打开具有相同 id 的新实例。这里的解决方案是在关闭弹窗时关闭tinymce。

要关闭编辑器实例，请使用：

```
tinymce.execCommand('mceRemoveControl',true,'your_editor_id'); 
```

重新初始化使用

```
tinymce.execCommand('mceAddControl',true,'your_editor_id'); 
```

Tinymce 将源 html 元素（您的文本区域）的 id 作为编辑器 id。如果没有“内容”是默认值。

# android - 1个imageview android上的多个动画

> ID：15547621
> 
> 赞同：24
> 
> 时间：2013-03-21T12:32:02.520
> 
> 标签：android, xml, animation, imageview

我有 2 个动画已经在工作，我想同时淡化我的火车 + 补间我的火车。如果我执行其中的 1 行，它会起作用。但是如果我尝试同时执行它，只有 1 会起作用..我真的找不到这里的解决方案。

也许你能帮忙？

```
 final ImageView mytrain = (ImageView) findViewById(R.id.train);
  final Animation traintween = AnimationUtils.loadAnimation(this,R.anim.treinanimation);
   final Animation trainfade = AnimationUtils.loadAnimation(this,R.anim.trainfade);

  mytrain.startAnimation(trainfade);
 mytrain.startAnimation(trainntween); 
```

我希望 mytrain 执行这两个动画..

感谢您的帮助！

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-03-21T12:35:23.877

使用`AnimationSet`类：

```
AnimationSet s = new AnimationSet(false);//false means don't share interpolators
s.addAnimation(traintween);
s.addAnimation(trainfad);
mytrain.startAnimation(s); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-16T07:52:48.010

可以使用 android 的 AnimatorSet 类以编程方式完成：

```
final AnimatorSet mAnimatorSet = new AnimatorSet();
    mAnimatorSet.playTogether(
                ObjectAnimator.ofFloat(img_view,"scaleX",1,0.9f,0.9f,1.1f,1.1f,1),
                ObjectAnimator.ofFloat(img_view,"scaleY",1,0.9f,0.9f,1.1f,1.1f,1),
                ObjectAnimator.ofFloat(img_view,"rotation",0 ,-3 , -3, 3, -3, 3, -3,3,-3,3,-3,0)
        );

//define any animation you want,like above

mAnimatorSet.setDuration(2000); //set duration for animations
    mAnimatorSet.start(); 
```

此示例将同时启动目标视图（imgView）上的所有 3 个动画，您也可以使用 playSequentially .....

有关完整示例[，请查看此内容..](https://gagandroid.blogspot.in/2015/04/set-more-than-one-animation-on-view.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-21T12:33:43.533

您需要使用`AnimationSet`，查看[文档](http://developer.android.com/reference/android/view/animation/AnimationSet.html)。只需调用`addAnimation()`您要播放的每个动画。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T12:37:55.603

这是单个 xml 文件中所有动画的示例...

这将对您有所帮助，但首先您应该阅读 AnimationSet 的文档

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">

<scale android:fromXScale="1.0" android:toXScale="3.0"
    android:fromYScale="1.0" android:toYScale="3.0" android:pivotX="50%"
    android:pivotY="50%"  android:duration="5000" />
<set>
    <alpha xmlns:android="http://schemas.android.com/apk/res/android"
        android:fromAlpha="0.2" android:toAlpha="1.0"     android:duration="3000" />
    <rotate android:fromDegrees="0" android:toDegrees="-360"
        android:toYScale="0.0" android:pivotX="50%" android:pivotY="50%"
        android:startOffset="700" android:duration="4000" />
<!--        <translate android:fromXDelta="0%" android:toXDelta="0%" -->
<!--            android:fromYDelta="0%" android:toYDelta="100%"     android:duration="3000" -->
</set>

</set> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T15:30:19.417

您也可以使用 ImageSwitcher，我认为在您的情况下这比 AnimationSet 更好

# iphone - 视频编辑，如 Aviary 图像编辑或 Instagram 应用

> ID：15547624
> 
> 赞同：0
> 
> 时间：2013-03-21T12:32:08.243
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我正在开发一个应用程序，它可以根据图像中的显示上传具有不同效果的视频。现在我想在 Aviary SDK 或 instagram 应用程序中编辑与图像编辑相同的视频。

是否有任何框架可用于目标 c 中的视频编辑？

![Aviary 图像效果屏幕截图](../Images/d79ba4e4280e1f4c160a6ebbb4cc6e72.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:50:18.763

编辑是指过滤器吗？试试[GPUImage](https://github.com/BradLarson/GPUImage)。最好的一个，你可以免费获得。

# oracle11g - Oracle 级联撤销

> ID：15547632
> 
> 赞同：0
> 
> 时间：2013-03-21T12:32:23.467
> 
> 标签：oracle11g

当您撤销特权时，例如：

```
REVOKE select ON product FROM user2; 
```

撤销是默认级联的，还是必须指定？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:03:58.443

通过 WITH GRANT OPTION 授予的权限将在授予者撤销该权限时自动删除。

```
CREATE USER bob1 IDENTIFIED BY "Password";              

User created.                                           

GRANT create table, create session TO bob1;             

Grant succeeded.                                        

CREATE USER bob2 IDENTIFIED BY "Password";              

User created.                                           

GRANT create session TO bob2;                           

Grant succeeded.                                        

CREATE USER bob3 IDENTIFIED BY "Password";              

User created.                                           

GRANT create session TO bob3;                           

Grant succeeded.                                        

CONNECT bob1                                            
Enter password: *********                               
Connected.                                              

CREATE TABLE bobs_t (n NUMBER);                         

Table created.                                          

GRANT select ON bobs_t TO bob2 WITH GRANT OPTION;       

Grant succeeded.                                        

CONNECT bob2                                            
Enter password: *********                               

GRANT select ON bob1.bobs_t TO bob3;                    

Grant succeeded.                                        

SELECT * FROM user_tab_privs;                           

GRANTEE  Owner  TABLE_NAME  GRANTOR  PRIVILEGE  GRA HIE 
-------- ------ ----------- -------- ---------- --- --- 
BOB3     BOB1   BOBS_T      BOB2     SELECT     NO  NO  
BOB2            BOBS_T      BOB1     SELECT     YES NO  

2 rows selected.                                        

CONNECT bob3                                            
Enter password: *********                               

SELECT * FROM user_tab_privs;                           

GRANTEE  Owner  TABLE_NAME  GRANTOR  PRIVILEGE  GRA HIE 
-------- ------ ----------- -------- ---------- --- --- 
BOB3     BOB1   BOBS_T      BOB2     SELECT     NO  NO  

1 row selected.                                         

CONNECT bob1                                            

SELECT * FROM user_tab_privs;                           

GRANTEE  Owner  TABLE_NAME  GRANTOR  PRIVILEGE  GRA HIE 
-------- ------ ----------- -------- ---------- --- --- 
BOB3     BOB1   BOBS_T      BOB2     SELECT     NO  NO  
BOB2            BOBS_T      BOB1     SELECT     YES NO  

2 rows selected.                                        

REVOKE select ON bobs_t FROM bob2;                      

Revoke succeeded.                                       

SELECT * FROM user_tab_privs;                           

no rows selected 
```

# javascript - 在 Jquery 脚本中使用 javascript 函数

> ID：15547635
> 
> 赞同：1
> 
> 时间：2013-03-21T12:32:32.140
> 
> 标签：javascript, jquery

抱歉，如果这听起来很奇怪，但我尝试创建一个在执行剩余的 jQuery 代码之前检查变量的函数，它看起来像这样：

```
$(document).ready(function(){
    var myVar = true;

    var myFunction = function(){
        if (myVar) {
            // do something
        };
    };

    $("div").click(function(){
        myFunction();
        $("div).fadeOut("fast");
    });
}); 
```

我想这不是你在 jQuery 中实现函数的方式，所以我有点迷茫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:34:10.047

您的点击处理程序中缺少双引号：

```
$("div").fadeOut("fast"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:35:02.797

```
$("div).fadeOut("fast"); 
```

语法错误

代替它

`$("div").fadeOut("fast");`

# javascript - 如何将数据存储在 crossrider 本地数据库上，以便数据持续存在直到浏览器重新启动/关闭

> ID：15547638
> 
> 赞同：0
> 
> 时间：2013-03-21T12:32:38.280
> 
> 标签：javascript, browser-extension, crossrider

我必须在我正在使用的 crossrider 本地数据库上存储一个 6 位数字`appAPI.db.async`。
我想实现以下之一：
1）当浏览器被用户关闭时，一种告诉crossrider删除存储数据的方法。 **或**
2) 一种在下次重新启动浏览器时自动增加数据的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:05:41.273

无论浏览器重新启动，Crossrider DB API 都是持久的。

我们的 API 不支持在浏览器会话结束时使数据库密钥过期，而且通常我不确定是否可以使用本机扩展数据库实现来完成。（这更多是与会话 cookie 相关的功能）

有一种替代解决方案是一种 hack：每次用户访问页面时，再次将 DB 条目设置为在 15 分钟内过期（刷新内置计时器）。因此，如果他们关闭浏览器 15 分钟，它将重置。

不要忘记您可以使用此 API 设置数据库密钥的过期时间： [http ://docs.crossrider.com/#!/api/appAPI.db-method-set](http://docs.crossrider.com/#!/api/appAPI.db-method-set)

# php - MySQL结果很大

> ID：15547641
> 
> 赞同：-3
> 
> 时间：2013-03-21T12:32:47.060
> 
> 标签：php, mysql

我有 2 个表，它们都有大约 300000 个值。由于技术原因，我们无法直接匹配时间戳或一个唯一 ID。

但是我们想获取这个结果：

```
SELECT * FROM adsDelivered
         JOIN pageViews ON (
            adsDelivered.session = pageViews.session and 
            adsDelivered.referer = pageViews.referer and 
            abs(unix_timestamp(adsDelivered.timeCreated) - unix_timestamp(pageViews.timeCreated)) <= 5
         ) 
         WHERE pageViews.timeCreated >= '2013-03-21 00:00:00' and 
               pageViews.timeCreated <= '2013-03-21 23:59:59' 
         LIMIT 100 
```

反馈很大，需要很长时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:36:58.727

我建议对查询做一个解释计划。如果您看到 TABLE SCAN，您将知道您必须重写查询以便有效地使用索引。

我猜这是`timeCreated`杀死你的原因，因为你必须扫描每一行 JOIN 来查看哪一行满足 WHERE 子句。

进行一些减少您需要扫描的集合大小的操作将有很大帮助。使用索引也会有所帮助。确保 WHERE 子句中的列被正确索引，然后重写查询以利用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:42:09.903

除非您能找到为数据添加索引的方法，否则无法加快速度。

目前，您的开销是您在扫描两个表时为每个潜在匹配调用 abs 和 unix_timestamp 。

我唯一的建议是解释计划并查看正在发生的事情，它可能是次优优化，您可以通过不使用 join 来改进事情，而是使用 where 子句，如下所示：

```
SELECT * 
FROM adsDelivered, pageViews
WHERE adsDelivered.session = pageViews.session
AND adsDelivered.referer = pageViews.referer
AND abs(unix_timestamp(adsDelivered.timeCreated) - unix_timestamp(pageViews.timeCreated)) <= 5
AND pageViews.timeCreated >= '2013-03-21 00:00:00'
AND pageViews.timeCreated <= '2013-03-21 23:59:59' 
LIMIT 100 
```

# java - zk：确认框后，页面刷新问题，活页夹不工作

> ID：15547642
> 
> 赞同：1
> 
> 时间：2013-03-21T12:32:49.887
> 
> 标签：java, mvvm, zk

我成功地从列表框中删除了选定的项目，然后从数据库中删除了所有对象并刷新了列表框。然后我添加了带有是和否选项的确认框，然后我的列表没有刷新。我在 zk 论坛上看到这个有类似问题的线程有一个解决方案，我实现了它但是得到了类转换异常

我正在使用 MVVM

[http://forum.zkoss.org/question/73640/refreshing-listbox-after-deleting-an-itemrow/](http://forum.zkoss.org/question/73640/refreshing-listbox-after-deleting-an-itemrow/)

获取异常的代码：

```
AnnotateDataBinder binder = (AnnotateDataBinder) userWin.getAttribute("binder");
                    binder.loadAll(); 
```

例外：

```
Mar 21, 2013 5:22:23 PM org.zkoss.zk.ui.impl.UiEngineImpl handleError:1352
SEVERE: >>java.lang.ClassCastException: org.zkoss.bind.AnnotateBinder cannot be cast to org.zkoss.zkplus.databind.AnnotateDataBinder 
```

期待着听到您的意见。我已经搜索了网络，但除了更新zk之外找不到任何东西。我已经在使用最新版本的 zk 6.5.1.1。

提前致谢。

@添加您建议的代码行后，我的列表没有更新，这是我的方法

```
 @Override
    @Command("deleteAllSelected")
    @NotifyChange({"selectedObject","objectList"})
    public void deleteAllSelected() {
        logger.info("in deleteAllSelected()>>>>>>>>>>>>>>>>>>>>>>>>>>>>");

        logger.info("direct selection: " + objectList.getSelection());
        final Set<UserIntelliopsDTO> setMe = objectList.getSelection();
        logger.info("selectedion size in dellete all" + setMe.size());

        EventListener<ClickEvent> clickListener = new EventListener<Messagebox.ClickEvent>() {
            public void onEvent(ClickEvent event) throws Exception {
                if (Messagebox.Button.YES.equals(event.getButton())) {
                    int i =0;
                    for(UserIntelliopsDTO dto:setMe){

                        userService.deleteUserIntelliops(dto.getUserIntelliOps().getUserId());

                        logger.info("siapa:userIntelliops " + dto.getUserIntelliOps() +  dto.getUserIntelliOps().getUserId());
                        selectedObject = null;

                        logger.info("iteration: " + i);
                        ++i;
                    }

                    selectedObject = null;
                    deleteAllSelectedButton.setVisible(false);
                    enableEditMode(true);

                }
            }
        };
        Messagebox.show("Are you sure you want to delete all selected records?", "Delete All Selected",
                new Messagebox.Button[] { Messagebox.Button.YES,
                        Messagebox.Button.NO }, Messagebox.QUESTION,
                clickListener);

        BindUtils.postNotifyChange(null, null, this, "*");

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T12:43:49.003

我假设您正在使用 MVVM 模型..所以当您单击下面的删除按钮时，您可以执行此操作，方法将编码...

```
 @Command
public void doDeleteItems(@ContextParam(ContextType.VIEW) Component view) {
        logger.debug("Delete Icon selected");

if (myModel.getSelectedListItem() == null || myModel.getSelectedListItem().isEmpty()) {
            showError("No rows are selected");
        } else {

Messagebox.show("Are you sure you want to delete?", "Alert !!", Messagebox.YES | Messagebox.NO, Messagebox.QUESTION,new org.zkoss.zk.ui.event.EventListener() {

public void onEvent(Event evt) throws InterruptedException {
    if (evt.getName().equals("onYes")) {
//Add code for Deletion
  if (listModel.contains(deletedObj))
listModel.remove(deletedObj); 
}
else{
//Do somthing else
}
BindUtils.postNotifyChange(null, null, this, "*");//this means current viewmodel object and refresh the variables 
```

}

正如我所做的那样`BindUtils.postNotifyChange()`，它会为您刷新列表带来魔力，或者您可以使用 `NotifyChange("*")`

删除记录后，您还需要在此处从列表中删除对象...

# c++ - C++ 读取整个文本文件

> ID：15547645
> 
> 赞同：1
> 
> 时间：2013-03-21T12:32:57.257
> 
> 标签：c++, visual-c++, text-files

我尝试使用带有此代码的 vc++ 读取整个文本文件

```
ifstream file (filePath, ios::in|ios::binary|ios::ate);
    if (file.is_open())
    {
        size = (long)file.tellg();
        char *contents = new char [size];
        file.seekg (0, ios::beg);
        file.read (contents, size);
        file.close();
        isInCharString("eat",contents);

        delete [] contents;
    } 
```

但它不是获取所有整个文件，为什么以及如何处理这个？

注意：文件大小为 1.87 MB 和 39854 行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:46:18.223

您缺少以下行

```
file.seekg (0, file.end); 
```

前：

```
size = file.tellg();
file.seekg (0, file.beg); 
```

如本例所述：[http ://www.cplusplus.com/reference/istream/istream/read/](http://www.cplusplus.com/reference/istream/istream/read/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T12:47:08.663

另一种方法是：

```
std::string s;
{
    std::ifstream file ("example.bin", std::ios::binary);
    if (file) {
        std::ostringstream os;
        os << file.rdbuf();
        s = os.str();
    }
    else {
        // error
    }
} 
```

或者，您可以使用 C 库函数 fopen、fseek、ftell、fread、fclose。在某些情况下，c-api 可以更快，但会牺牲更多的 STL 接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:36:24.563

你真的应该养成阅读文档的习惯。[ifstream::read](http://www.cplusplus.com/reference/istream/istream/read/)被记录为有时不会读取所有字节，并且

```
 The number of characters successfully read and stored by this function 
   can be accessed by calling member gcount. 
```

`file.gcount()`因此，您可以通过查看和来调试您的问题`file.rdstate()`。此外，对于如此大的读取，使用（在一些显式循环中）[istream::readsome](http://www.cplusplus.com/reference/istream/istream/readsome/)成员函数可能更相关。（我建议阅读例如 64K 字节的块）。

^(PS这可能是一些实现或系统特定的问题。)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T13:46:57.320

谢谢大家，我发现了错误，只是下面的代码读取了整个文件，问题出在 VS watcher 本身，它只是显示一定数量的数据而不是全文文件。

# maven - Maven 3.0.3 原型创建：来自多个模块项目

> ID：15547647
> 
> 赞同：1
> 
> 时间：2013-03-21T12:33:14.453
> 
> 标签：maven, maven-archetype

我正在使用 Maven 3.0.3，并且我有一个多模块 maven 项目，我想将其用于 Archetype 创建。结构如下：

```
Main_Project   
   ----pom.xml  
   ----Module_1
     ----pom.xml    
     ----src
         ----main
            ----java
              ----com
                ----mycompany
                   ----domain
                     ----DomainT.java
                   ----repo
            ----resources
            ----webapp
         ----test
   ----Module_2
     ----pom.xml  
     ----src
         ----main
            ----java
              ----com
                ----mycompany
                   ----web
                     ----WebT.java
            ----resources
            ----webapp
         ----test 
```

现在，当我在 Module_2 中使用以下 cmd 时，原型已成功且正确地创建，即

```
c:\Main_Project\Module_2>mvn archetype:create-from-project 
```

但是，当我从主文件夹（即`c:\Main_Project`）运行相同的命令时，不会创建包结构（对于“生成”cmd），并且两个模块中仍然存在原始包结构。我的意思是java和其他文件中的包名称被正确的变量替换，但是没有创建包文件夹结构.eg

原来的结构是：

```
 ----src
         ----main
            ----java
              ----com
                ----mycompany
                   ----domain
                     ----DomainT.java 
```

运行cmd后， `mvn archetype:generate -DarchetypeCatalog=local`

```
Define value for property 'groupId': : com.sample
Define value for property 'artifactId': : test_project
Define value for property 'version':  1.0-SNAPSHOT:
Define value for property 'package':  com.sample: : 
```

在文件夹内生成时的文件夹结构仍然`Module_1\src\main\java`与上面相同（即`Module_1\src\main\java\com\mycompany`）而不像`Module_1\src\main\java\com\sample`

不知道我能做些什么来使它工作？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-02T11:02:51.203

现在修好了。

在父 pom.xml 中，模块声明在配置文件中。

# c# - wpf中的焦点管理器问题

> ID：15547648
> 
> 赞同：0
> 
> 时间：2013-03-21T12:33:18.203
> 
> 标签：c#, wpf, user-controls, popup, focusmanager

我有`Popup`动态附加`UserControl`. 这里我需要为第一个控件设置焦点。如果我使用：

```
FocusManager.FocusedElement="{Binding ElementName=txtcode}" 
```

在`UserControl` 光标不来。谁能帮我把重点放在`UserControl`.

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:26:45.050

我只需要这样做，但不是在用户控件中，所以可能无济于事。我需要做的是在 Window 标签中添加 FocusManager 位：

```
<Window x:Class="xxxxx"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" FocusManager.FocusedElement="{Binding ElementName=txtcode}"> 
```

然后确保我正确命名了控件：

```
<TextBox Name="txtcode" Text="" /> 
```

虽然我是 wpf 的新手，还没有使用过用户控件。

# java - 是否需要在 /etc/fstab 中启用“atime”才能在 java 中获得正确的上次访问时间？

> ID：15547649
> 
> 赞同：2
> 
> 时间：2013-03-21T12:33:18.167
> 
> 标签：java, linux, lastaccesstime

我可以使用以下代码获取上次访问时间。

```
public Date getLastAccessTime(String filePath) throws IOException {
    File f = new File(filePath);
    BasicFileAttributes basicFileAttributes = Files.getFileAttributeView(
        f.toPath(),
        BasicFileAttributeView.class).readAttributes();
    Date accessTime = new Date(basicFileAttributes.lastAccessTime().toMillis());
    return accessTime;
} 
```

但在我的 linux 系统中，它在 /etc/fstab 中被配置为“relatime”。

是否有必要在 /etc/fstab 中启用“atime”以获得准确的上次访问时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:14:59.043

> 是否有必要在 /etc/fstab 中启用“atime”以获得准确的上次访问时间？

简短的回答：是的

在 Linux 上，JDK 使用`sys_stat64()`系统调用来检索有关文件的信息。如果内核在访问文件时不更新该`st_atime`字段，则 Java 无法获得此信息。

Linux 2.6.30 更改了 Linux 内核关于 st_atime 更新策略的默认行为。`relatime`现在是默认行为。这意味着`st_atime`仅在`st_mtime`或更新时才`st_ctime`更新，而不是在访问文件时更新。如果你想要*旧*的行为，你可以使用`strictatime`. 有关更多信息，请参见 mount 手册页（搜索`atime`、`noatime`、`relatime`、`strictatime`）。

# ios - 如何一次对一组 200 个地址进行地理编码

> ID：15547656
> 
> 赞同：1
> 
> 时间：2013-03-21T12:33:29.120
> 
> 标签：ios, iphone, throttling, clgeocoder

我读过 iOS 将应用程序一次限制为大约 50 个地理编码请求。如果我有大套装，可能有 200 套怎么办？有什么方法可以一次对超过 50 套进行地理编码？例如，使用集合之间的延迟，每个集合限制为 50。什么是延迟集合之间的地理编码的理想方法？

我已经看到 NSProgrammer 对以下问题的回答：

[iPhone iOS5 CLGeocoder 如何对大量（200）组地址进行地理编码？](https://stackoverflow.com/questions/10619879/iphone-ios5-clgeocoder-how-to-geocode-a-large-200-set-of-addresses)

对于他提到的那种延迟有什么建议吗？该延迟会在处理程序内部并在另一个线程上运行吗？

```
for(int i = 0; i < [myArray count]; i++){

[call geoCoderMethod];
}

-geoCoderMethod{
    [geocoder geocodeAddressString:addressString completionHandler:^(NSArray *placemarks, NSError *error) {

    getCo-ordinates;
    add annotation to mapview;
} 
```

我尝试将数组拆分为每个 25 个项目的块，并调用并使用方法`geoCoderMethod`引发延迟。`performSelector`但是该`performSelector`方法`geoCoder`似乎在不同的线程中运行，我无法在方法调用之间造成延迟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:23:14.940

这里完整的解决方案取决于您的逻辑。您可以使用可变数组来存储所有 200 个地址并运行“for 循环”以将发送请求限制在 50 以下，例如 20 或 30 取决于您的地址数组的数组计数。并除以你的限制来决定如果你有 200 个地址，这个“for 循环”应该循环多少次，然后如果你除以 20，那么你的“for 循环”总共运行 10 次，每次运行它都会发送 20 个地址进行地理编码. 这样它就不会达到 50 并且您可以轻松检索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:54:12.490

我有一组地址，我需要将它们转换为坐标。我所做的是将集合分成最多 40 个联系人的块（您可能会增加到 50 个，但在一分钟内不会超过）。因此，拥有超过 40 个联系人的组必须在两者之间有一个延迟，以便在加载地图视图之前处理所有地址并将其转换为坐标。

我需要根据用户要求加载地图视图。在我的情况下，无论组中的联系人列表和时间因素如何，都可以再次加载地图视图并获得收益。如果用户打算加载地图视图并在 1 分钟内再次重新加载，我需要为此开发一个逻辑。为此，我决定保存地图视图的状态，如果用户决定在 1 分钟内重新加载同一组地址。

但是如果用户决定加载另一组联系人，那么我必须根据要加载的联系人组重新考虑我的逻辑。所以我必须跟踪要加载哪个组（以前的一个或一个新的），该组的联系人数量是否超过 40。

我必须注意的另一个重要因素是时间。为此，我有一个静态`NSDate`变量，它始终跟踪`CLGeocoder`上次工作的“时间”，如果当前时间（`CLGeocoder`即将使用的时间）没有 1 分钟的差异，那么我必须延迟加载地图。

这就是我使用`CLGeocoder`. 我相信逻辑可以在很大程度上优化，输出会更快。如果有人提出更好的实现，将不胜感激。

# iphone - [CCProgressTimer progressWithSprite:]：无法识别的选择器发送到类 0x1a8194

> ID：15547658
> 
> 赞同：1
> 
> 时间：2013-03-21T12:33:32.037
> 
> 标签：iphone, ios, xcode, cocos2d-iphone

出现上述错误：由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“+ [CCProgressTimer progressWithSprite：]：无法识别的选择器发送到类 0x1a8194

这是我的代码

> arrow_base = [CCSprite spriteWithFile:ARROW_OUTER]; arrow_base.position = ccp(m_pBullet.position.x,m_pBullet.position.y);

```
 arrow = [CCProgressTimer progressWithSprite:@"arrow_inner.png"];//[CCSprite spriteWithFile:ARROW_INNER]];

    arrow.type=kCCProgressTimerTypeHorizontalBarLR;

    //arrow.type = kCCProgressTimerTypeBar;
   // arrow.midpoint = ccp(0,0.5);
    arrow.position = ccp(m_pBullet.position.x,m_pBullet.position.y);
    arrow.percentage = 100;

    [m_pBulletCover addChild:arrow_base];
    [m_pBulletCover addChild:arrow]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:38:20.323

progressWithSprite 将 CCSprite 对象作为输入而不是 NSString。

```
 arrow = [CCProgressTimer progressWithSprite:[CCSprite spriteWithFile:@"arrow_inner.png"]]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T05:18:00.997

我检查了它的库文件，错误原因是没有方法 ProgressWithSprite，而不是它有 progressWithFile 方法。可能是由于 Cocos2d 版本问题，作为 LearnCocos2d 提供的帮助，所以我现在使用它并且它工作正常

> 箭头 = [CCProgressTimer progressWithFile:@"arrow_inner.png"];

# java - 向 selenium IDE 添加 Java 扩展的机会

> ID：15547661
> 
> 赞同：0
> 
> 时间：2013-03-21T12:33:34.117
> 
> 标签：java, selenium, ide

我想认识到，我是否有机会将自己的 java 库添加到 selenium IDE，就像添加 JS 扩展一样？由于几个原因，使用我的 JS 扩展并不舒适和有用，我正在寻找机会将我的 Java 库添加到 selenium IDE，我希望有机会从 Selenium IDE 中的 java 库调用方法。我可以做这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:36:42.283

不，我知道你不能从 Selenium IDE 调用 java 库，你必须使用 Selenium RC。

# c# - "aaaa".StartsWith("aaa") 返回 false

> ID：15547663
> 
> 赞同：18
> 
> 时间：2013-03-21T12:33:45.107
> 
> 标签：c#, string, startswith

如果这不是错误，那么任何人都可以解释这种行为背后的原因吗？确实，似乎每个奇数个字母都会返回 false：

```
string test = "aaaaaaaaaaaaaaaaaaaa";
Console.WriteLine(test.StartsWith("aa"));
Console.WriteLine(test.StartsWith("aaa"));
Console.WriteLine(test.StartsWith("aaaa"));
Console.WriteLine(test.StartsWith("aaaaa"));
Console.WriteLine(test.StartsWith("aaaaaa"));
Console.WriteLine(test.StartsWith("aaaaaaa")); 
```

在丹麦系统上执行时产生以下输出：

```
True
False
True
False
True
False 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-21T12:36:51.367

这当然是由于您当前的文化。您可能使用丹麦语，其中 aa 被视为字母。如果您尝试改变文化..或案例，它会起作用。

我想我记得匈牙利文化和信件协会的类似行为

查看[丹麦文本的 String StartsWith() 问题](https://stackoverflow.com/questions/6535910/string-startwith-issue-with-danish-text)

例子：

```
using System;
using System.Globalization;

namespace Demo
{
    public static class Program
    {
        public static void Main(string[] args)
        {
            System.Threading.Thread.CurrentThread.CurrentUICulture = new CultureInfo("da-DK");
            System.Threading.Thread.CurrentThread.CurrentCulture = System.Threading.Thread.CurrentThread.CurrentUICulture;
            string test = "aaaaaaaaaaaaaaaaaaaa";
            Console.WriteLine(test.StartsWith("aa"));
            Console.WriteLine(test.StartsWith("aaa"));
            Console.WriteLine(test.StartsWith("aaaa"));
            Console.WriteLine(test.StartsWith("aaaaa"));
            Console.WriteLine(test.StartsWith("aaaaaa"));
            Console.WriteLine(test.StartsWith("aaaaaaa"));
        }
    }
} 
```

这打印了 OP 声称的内容。

# ios - 如何一次控制多个按钮？

> ID：15547666
> 
> 赞同：-1
> 
> 时间：2013-03-21T12:33:46.700
> 
> 标签：ios, objective-c, sdk

我是一个初学者 ios 开发人员，我正在制作 **TIC TAC TOE**

我想创建一个数组来一次控制所有按钮，而不是编写大量代码

那么如何将所有 9 个按钮链接到一个数组中呢？

而不是写

`button1 , button2 , button 3 ,button4 >> button [x]`

或类似的东西

pleeeeeease 我是初学者，所以接受我的问题，如果它是愚蠢的，不要评价

或者告诉我答案在哪里，我会删除我的问题

谢谢你的帮助:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:39:30.590

**通过它的TAG**访问 UIButton 。

给每个人不同的**TAG**`UIButton`

例如

```
for (int i = 1; i <=9; i++) {

        UIButton *button =(UIButton *)[self.view viewWithTag:i];

    } 
```

希望这会帮助你。

一切顺利 ！！！

# sql - 在 IF 条件语句中选择

> ID：15547667
> 
> 赞同：1
> 
> 时间：2013-03-21T12:33:51.120
> 
> 标签：sql, oracle, select, if-statement

我想输入 if 条件选择查询：

```
IF ( 10 in (select id from ids where ..) ) then ...
/*  */
END IF; 
```

如何以正确的语法实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:51:57.737

如果您使用的是 SQL Server，那么显而易见的方法是使用[EXISTS](http://msdn.microsoft.com/en-us/library/ms188336.aspx)，例如

```
if exists(select id from ids where id = 10)
begin
    print 'it exists'
end 
```

另一种方法是使用等效的关键字[SOME 或 ANY](http://msdn.microsoft.com/en-us/library/ms175064.aspx)

```
if 10 = some(select id from ids)
begin
    print 'it exists'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:25:34.220

这可能会有所帮助 - 所有示例都等同于 Oracle SQL 中的 IF。

案例表达式：

```
SELECT deptno, empno, ename
     , (CASE WHEN deptno = 10 THEN 1 ELSE 0 END) check_dept
  FROM scott.emp
ORDER BY 1
/ 
```

解码（）函数：

```
SELECT deptno, empno, ename, DECODE(deptno, 10, 1, 0) check_dept
  FROM scott.emp
ORDER BY 1
/ 
```

你的例子 - 案例..：

```
select id, (CASE WHEN id = 10 THEN 1 ELSE 0 END) AS check_id from ids where... 
/ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-21T13:13:22.967

```
for ( -- 
      -- The following select statement returns
      -- records only, if there are any whose
      -- ID = 10.
      -- The rownum = 1 condition makes sure that
      -- at most one record is returned.
      --
      select null 
       from ids
      where id = 10 and
            rownum = 1) loop

      /* 
         Do something if at least on record is selected
         by the select statement.
       */

end loop; 
```

虽然这个“解决方案”应该做你想做的事，但我不一定建议这样做，因为对于代码的后期维护者来说，如果这`for ... loop`到底是什么目的，它可能本质上并不清楚。您可能需要考虑使用一个变量，您可以在其中选择记录数`id=10`并根据`cnt>0`.

# android - 如何获取服务器响应代码以在 WebView 上重定向响应

> ID：15547669
> 
> 赞同：0
> 
> 时间：2013-03-21T12:33:54.053
> 
> 标签：android, android-layout, android-intent, android-webview

我有一个`WebView`组件，我`WebViewClient`为它设置了一个：

```
WebView webView = (WebView)findViewById(R.id.my_webview);

webView.setWebViewClient(
         new WebViewClient() {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String newUrl) {

                       //Here, I handle the url redirecting.
                       //@newUrl is the redirected url

                       // How to get server response code here??

                }
         }
); 
```

正如您在上面看到的，我的代码处理在`shouldOverrideUrlLoading(...)`. 它工作正常。有时，重定向的服务器响应是带有错误消息的错误代码，例如服务器日志是：

```
 < 400
 < Content-Type: text/plain
 Bad header value: 'name' 
```

在上述情况下，`WebView`页面显示“ **Bad header value: 'name'** ”。

我的问题是，在我的 java 代码中，如何获取重定向响应的服务器响应代码（例如，在上述情况下**400 ）？**

**==================== 我试过的==========================**

我试图添加`onReceivedError()`到`new WebViewClient(){...}`, 以捕获错误响应，但代码没有被执行。

```
@Override
public void onReceivedError (WebView view, int errorCode, String description, String failingUrl){
        Log.v("onReceivedError:", errorCode+":"+description);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:13:00.873

截至目前..我猜唯一（正确的）方法不是通过java代码。事实上，它是将javascript注入你的webview，这反过来会给你响应代码。

在此处查看此[答案](https://stackoverflow.com/a/13993930/1221203)

# java - 使用反斜杠以速度转义美元符号不起作用

> ID：15547671
> 
> 赞同：18
> 
> 时间：2013-03-21T12:33:54.740
> 
> 标签：java, velocity

我有以下片段要从速度模板文件中渲染。

```
xyz $$foo 
```

美元符号需要从 VTL 解析器中转义。在模板文件中，我将其表示为

```
xyz \$\$foo 
```

我预计

```
xyz $$foo 
```

但我明白了

```
xyz \$foo 
```

我究竟做错了什么？？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-21T13:04:44.983

一种方法是使用固定的字符串变量，即为 $ 符号设置一个变量，然后使用它。

```
#set ( $d = "$")
xyz ${d}${d}foo 
```

它给出了预期的输出

```
xyz $$foo 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-07T08:15:11.890

您可能还想查看[EscapeTool](http://velocity.apache.org/tools/devel/generic/EscapeTool.html)的速度。

一旦将它包含在上下文中（例如，在名称“esc”下），您就可以使用 ${esc.d} 来获取美元符号。不过，对于这种特殊情况，您提到的方法更容易。

我认为值得一提，因为它提供了其他几种方便的方法来适当地转义字符串，如果您的模板正在生成 Java/javascript/html 等。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2016-04-25T17:50:57.173

[使用 Velocity 的NumberTool](http://velocity.apache.org/tools/devel/javadoc/org/apache/velocity/tools/generic/NumberTool.html)也可能会有所帮助。

它有一个内置的货币格式化程序：

```
$myNumber                   -> 13.55
$number.format($myNumber)   -> 13.6
$number.currency($myNumber) -> $13.55
$number.integer($myNumber)  -> 13 
```

# php - 提交正确输入的验证码

> ID：15547672
> 
> 赞同：0
> 
> 时间：2013-03-21T12:33:56.380
> 
> 标签：php

我有一个带有选项框的以下页面，当用户选择以下选项然后单击提交时，它会将它们带到相关的 url。但是，用户必须在与屏幕上的简单静态验证码图像匹配的框中键入正确的字符串。

目前代码看起来像这样，但是我需要帮助设置条件，以便在提交之前必须在框中输入“abcdef”，否则会出错。

```
<?php
// Check to see if the form has been submitted.
if(isset($_POST['menu1'])) {
  // If the form has been submitted, force a re-direct to the choice selected.
  header('Location: ' . $_POST['menu1']);
}
?>

<div style="padding-left: 50px">
<p class="arial"><strong></strong><br /><br /></p>
<form method="post"> 
<table class="freecontact2form" border="0" width="400px">
<tbody>
<tr>
<td colspan="2"><span style="font-size: x-small;"> </span> <font color=#000000 ></font>
  <br /><br /></td>
</tr>
<tr>
  <td valign="top"><table width="400px" class="freecontact2form">
    <tr>
      <td colspan="2"><br />
        <br />
        <div class="freecontact2formmessage"> </div></td>
    </tr>
    <tr>
      <td valign="top"><label for="menu1" >These are the following options:<span     class="required_star"> </span></label></td>
      <td valign="top"><select name="menu1" id="menu1">
        <option selected="selected" value ="http://www.google.com">Google </option>
        <option value ="www.msn.com">MSN</option>
        <option value ="www.youtube.com">Youtube</option>
        <option value ="bing.com">Bing</option>

      </select></td>
    </tr>

    <tr>
      <td valign="top"><label for="captcha" ><span class="required_star"></span><span     class="required_star"></span></label></td>
      <td valign="top"><BR /><BR /><img src="captcha.jpg" /></td>
    </tr>
    <tr>
      <td>Please enter the characters shown in the CAPTCHA image:</td>
      <td><input type="text" name="captcha" id="captcha" value="" size="10" />
      </td>
    </tr>
    <tr>
      <td style="text-align:center" colspan="2"><br /><br /> 
      <input type="submit" value=" Submit ">

</td>
    </tr>
  </table></td>
  <td valign="top">&nbsp;</td>
</tr>

<tr>

</tr>
<tr>

</tr>
</tbody>
</table>
</form> <br />
<p> </p>
<p> </p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:36:16.107

首次显示页面时将代码保存在会话中。然后对照会话变量检查代码字段的 POST 值。

```
session_start();
$_SESSION['captcha'] = 'abcdef'; 
```

关于表单提交：

```
session_start();
if($_POST['captcha'] == $_SESSION['captcha'] && isset($_POST['menu1'])){
    header();
} 
```

# java - 当 sonar:sonar 插件运行时，Maven 编译失败无法使用 @Nonnull 注释访问 Enum

> ID：15547673
> 
> 赞同：2
> 
> 时间：2013-03-21T12:33:59.227
> 
> 标签：java, maven, build, sonarqube, cobertura

我有一个相当大的 maven 项目，里面有很多子项目，我的竹实例使用“mvn clean deploy”运行连续构建。还有一个单独的夜间“mvn clean sonar:sonar”失败并出现以下错误。

MediaServiceType 是正在编译的子项目的主要 java 部分中的 Enum，它实现了来自另一个项目的接口。AbstractToolTest 与 MediaServiceType 在同一个包中，因此它不显示完整的包名称。有问题的行只是从接口类型转换为 MediaSerivceType。

我认为我的 pom 有问题，但是使用 -X 查看构建时，java 编译器实际上会注销类路径，其中包括一个具有 MediaServiceType.class 的文件夹。我也不确定是什么导致了“无法访问 MediaServiceType”的错误，而不是找不到类。

什么可能导致这种问题？

```
21-Mar-2013 10:45:46    [INFO] ------------------------------------------------------------------------
21-Mar-2013 10:45:46    [ERROR] BUILD ERROR
21-Mar-2013 10:45:46    [INFO] ------------------------------------------------------------------------
21-Mar-2013 10:45:46    [INFO] Can not execute Sonar
21-Mar-2013 10:45:46    
21-Mar-2013 10:45:46    Embedded error: Unable to execute maven plugin
21-Mar-2013 10:45:46    Compilation failure
21-Mar-2013 10:45:46    /data/bamboo/xml-data/build-dir/PRO-PROTRUNKSONAR-JOB1/processors/processor-tool/src/test/java/company/prod/processor/AbstractToolTest.java:[20,52] error: cannot access MediaServiceType
21-Mar-2013 10:45:46    
21-Mar-2013 10:45:46    
21-Mar-2013 10:45:46    [INFO] ------------------------------------------------------------------------
21-Mar-2013 10:45:46    [DEBUG] Trace
21-Mar-2013 10:45:46    org.apache.maven.lifecycle.LifecycleExecutionException: Can not execute Sonar
21-Mar-2013 10:45:46        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:719)
21-Mar-2013 10:45:46        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:569)
21-Mar-2013 10:45:46        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:539)
21-Mar-2013 10:45:46        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
21-Mar-2013 10:45:46        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:284)
21-Mar-2013 10:45:46        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
21-Mar-2013 10:45:46        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
21-Mar-2013 10:45:46        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
21-Mar-2013 10:45:46        at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
21-Mar-2013 10:45:46        at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
21-Mar-2013 10:45:46        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
21-Mar-2013 10:45:46        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
21-Mar-2013 10:45:46        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
21-Mar-2013 10:45:46        at java.lang.reflect.Method.invoke(Method.java:601)
21-Mar-2013 10:45:46        at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
21-Mar-2013 10:45:46        at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
21-Mar-2013 10:45:46        at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
21-Mar-2013 10:45:46        at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
21-Mar-2013 10:45:46    Caused by: org.apache.maven.plugin.MojoExecutionException: Can not execute Sonar
21-Mar-2013 10:45:46        at org.codehaus.mojo.sonar.Bootstraper.executeMojo(Bootstraper.java:103)
21-Mar-2013 10:45:46        at org.codehaus.mojo.sonar.Bootstraper.start(Bootstraper.java:79)
21-Mar-2013 10:45:46        at org.codehaus.mojo.sonar.SonarMojo.execute(SonarMojo.java:88)
21-Mar-2013 10:45:46        at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
21-Mar-2013 10:45:46        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
21-Mar-2013 10:45:46        ... 17 more
21-Mar-2013 10:45:46    Caused by: org.sonar.api.utils.SonarException: Unable to execute maven plugin
21-Mar-2013 10:45:46        at org.sonar.batch.AbstractMavenPluginExecutor.execute(AbstractMavenPluginExecutor.java:51)
21-Mar-2013 10:45:46        at org.sonar.batch.AbstractMavenPluginExecutor.execute(AbstractMavenPluginExecutor.java:38)
21-Mar-2013 10:45:46        at org.sonar.batch.phases.InitializersExecutor.executeMavenPlugin(InitializersExecutor.java:73)
21-Mar-2013 10:45:46        at org.sonar.batch.phases.InitializersExecutor.execute(InitializersExecutor.java:60)
21-Mar-2013 10:45:46        at org.sonar.batch.phases.Phases.execute(Phases.java:90)
21-Mar-2013 10:45:46        at org.sonar.batch.bootstrap.ProjectModule.doStart(ProjectModule.java:143)
21-Mar-2013 10:45:46        at org.sonar.batch.bootstrap.Module.start(Module.java:83)
21-Mar-2013 10:45:46        at org.sonar.batch.bootstrap.BatchModule.analyze(BatchModule.java:111)
21-Mar-2013 10:45:46        at org.sonar.batch.bootstrap.BatchModule.analyze(BatchModule.java:106)
21-Mar-2013 10:45:46        at org.sonar.batch.bootstrap.BatchModule.analyze(BatchModule.java:106)
21-Mar-2013 10:45:46        at org.sonar.batch.bootstrap.BatchModule.doStart(BatchModule.java:101)
21-Mar-2013 10:45:46        at org.sonar.batch.bootstrap.Module.start(Module.java:83)
21-Mar-2013 10:45:46        at org.sonar.batch.bootstrap.BootstrapModule.doStart(BootstrapModule.java:102)
21-Mar-2013 10:45:46        at org.sonar.batch.bootstrap.Module.start(Module.java:83)
21-Mar-2013 10:45:46        at org.sonar.batch.Batch.execute(Batch.java:100)
21-Mar-2013 10:45:46        at org.sonar.maven.SonarMojo.executeBatch(SonarMojo.java:152)
21-Mar-2013 10:45:46        at org.sonar.maven.SonarMojo.execute(SonarMojo.java:142)
21-Mar-2013 10:45:46        at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
21-Mar-2013 10:45:46        at org.codehaus.mojo.sonar.Bootstraper.executeMojo(Bootstraper.java:98)
21-Mar-2013 10:45:46        ... 21 more
21-Mar-2013 10:45:46    Caused by: org.apache.maven.BuildFailureException: Compilation failure
21-Mar-2013 10:45:46    /data/bamboo/xml-data/build-dir/PRO-PROTRUNKSONAR-JOB1/processors/processor-tool/src/test/java/company/prod/processor/AbstractToolTest.java:[20,52] error: cannot access MediaServiceType
21-Mar-2013 10:45:46    
21-Mar-2013 10:45:46    
21-Mar-2013 10:45:46        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:715)
21-Mar-2013 10:45:46        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:556)
21-Mar-2013 10:45:46        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.forkProjectLifecycle(DefaultLifecycleExecutor.java:1205)
21-Mar-2013 10:45:46        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.forkLifecycle(DefaultLifecycleExecutor.java:1038)
21-Mar-2013 10:45:46        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:643)
21-Mar-2013 10:45:46        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:569)
21-Mar-2013 10:45:46        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:539)
21-Mar-2013 10:45:46        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
21-Mar-2013 10:45:46        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
21-Mar-2013 10:45:46        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
21-Mar-2013 10:45:46        at org.sonar.maven.Maven2PluginExecutor.concreteExecute(Maven2PluginExecutor.java:52)
21-Mar-2013 10:45:46        at org.sonar.batch.AbstractMavenPluginExecutor.execute(AbstractMavenPluginExecutor.java:49)
21-Mar-2013 10:45:46        ... 39 more
21-Mar-2013 10:45:46    Caused by: org.apache.maven.plugin.CompilationFailureException: Compilation failure
21-Mar-2013 10:45:46    /data/bamboo/xml-data/build-dir/PRO-PROTRUNKSONAR-JOB1/processors/processor-tool/src/test/java/company/prod/processor/AbstractToolTest.java:[20,52] error: cannot access MediaServiceType
21-Mar-2013 10:45:46    
21-Mar-2013 10:45:46    
21-Mar-2013 10:45:46        at org.apache.maven.plugin.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:516)
21-Mar-2013 10:45:46        at org.apache.maven.plugin.TestCompilerMojo.execute(TestCompilerMojo.java:102)
21-Mar-2013 10:45:46        at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
21-Mar-2013 10:45:46        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
21-Mar-2013 10:45:46        ... 50 more 
```

打开详细日志记录后，我得到以下信息

```
21-Mar-2013 17:55:07    [loading RegularFileObject[/data/bamboo/xml-data/build-dir/PRO-PROTRUNKSONAR-JOB1/processors/processor-tool/target/generated-classes/cobertura/company/prod/processor/MediaServiceType.class]]
21-Mar-2013 17:55:07    /data/bamboo/xml-data/build-dir/PRO-PROTRUNKSONAR-JOB1/processors/processor-tool/src/test/java/company/prod/processor/AbstractToolTest.java:20: error: cannot access MediaServiceType
21-Mar-2013 17:55:07            return MediaServiceFactory.getMediaService((MediaServiceType) serviceType, ppt2TextPath, pdfwmkPath); 
```

并且类文件存在意味着它不是缺少 MediaServiceType 而是其他东西。

我现在发现责任与在 MediaServiceType 中使用的 javax.annotations.Nonnull 有关，如果我删除声纳构建运行。运行 mvn test 也可以正常工作，但是如果我运行 sonar 测试编译失败，所以我很确定现在应该归咎于声纳，而不是我的 pom 文件。

对测试与声纳构建的 --debug 日志进行比较，我可以看到当声纳运行时，以下额外的 jar 被放在编译类路径中：

*   cobertura-1.9.4.1.jar
*   蚂蚁1.7.0.jar
*   ant-launcher-1.7.0.jar

也不是使用目标/类作为主要类，而是使用生成类/cobertura。

目前我已经通过忽略 cobertura 配置中的 MediaServiceType 来解决这个问题

```
 <configuration>
                <instrumentation>
                    <excludes>
                        <exclude>**/MediaServiceType.class</exclude>
                        <exclude>**/*Parameter.class</exclude>
                    </excludes>
                </instrumentation>
            </configuration> 
```

参数枚举似乎也有同样的问题，它们也是使用@Nonnull 的枚举。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:44:17.930

您是否检查过包含 MediaServiceType 和 AbstractToolTest 的依赖项是否在测试范围内。`<scope>test</scope>`. 测试找不到类，因此它可能不在范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:27:11.557

确保您对旧版本没有问题（您最近添加了 Enum 吗？）。

您可以尝试暂时移走竹子主文件夹中的所有内容`~/.m2/repository`，看看是否有帮助。我担心您可能出于某种原因在本地存储库中使用捆绑包而不是实际模块。如果这确实有效，您必须找出原因；）

# batch-file - 执行 del 批处理文件时排除 temp 内的文件夹

> ID：15547674
> 
> 赞同：3
> 
> 时间：2013-03-21T12:33:59.180
> 
> 标签：batch-file, cmd

如果我想在我想删除的文件夹中排除一个文件夹，我应该在我的 DEL 批处理文件中添加什么？

我有这个代码来删除我的临时文件夹的所有内容

```
DEL /F /Q C:\temp 
```

现在，我想在里面排除一个名为***imptfolder***的文件夹。无论它是否存在于临时文件夹中，都不应该被删除。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:43:14.867

这是一些批处理脚本代码，可以满足您的要求。

```
for /d %%I in (c:\temp\*) do (
    if /i not "%%~nxI" equ "imptfolder" rmdir /q /s "%%~I"
)
del /q c:\temp\* 
```

如果您只是从控制台输入这些命令，请使用单百分比而不是双百分比。

```
cd /d c:\temp
for /d %I in (*) do @(if /i not "%~I" equ "imptfolder" rmdir /q /s "%~I")
del /q * 
```

# c# - 我在这里想念什么？DataGrid 和 ListView 未在 WPF 应用程序中填充

> ID：15547675
> 
> 赞同：0
> 
> 时间：2013-03-21T12:34:01.700
> 
> 标签：c#, listview, datagrid, connection-string, sql-server-2012

我正在关注一本关于 C# 面向对象编程的书，但该应用程序无法正常工作。DataGrid 和 ListView 未填充。我错过了什么重要的一点？

我唯一能想到的是我没有连接到数据库，因为我不知道连接字符串的语法，在 data source= 中放入什么等等。数据源是书中的.\sqlexpress，但是我的是sql server 2012，没有报错，不知道怎么办。
这是书中的代码：

```
return @"Integrated Security=True;Data Source=.\SQLEXPRESS;" +
"Initial Catalog=OfficeSupply"; 
```

这是我编写的代码：

```
 return @"Data Source=ServerName;Initial Catalog=OfficeSupply" +
            @"User ID=username;Password=password"; 
```

我是个菜鸟，所以我不完全确定这是否是问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:37:09.257

看看这本书，将列表视图传递给**SQL 数据源**或**对象数据源**，您返回的是您在 app.Config XML 文件中真正想要的 DB 连接字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:01:26.240

这解决了这个问题：

```
return @"Integrated Security=True;Data Source=(local);" +
                     "Initial Catalog=OfficeSupply"; 
```

# sql-server - 派生列转换中的 SSIS 表达式以将回车替换为空

> ID：15547677
> 
> 赞同：0
> 
> 时间：2013-03-21T12:34:06.953
> 
> 标签：sql-server, ssis

我正在使用 SQL Server 2005 SSIS 并且正在导入一个在每行末尾`text file`都有回车符`enter code here`的值，然后我正在转换该值。

```
(DT_NUMERIC,28,8)(ISNULL(MyField) ? NULL(DT_WSTR,50) : 
REPLACE(MyField,"Carriage Return Value","")) 
```

代替`Carriage Return Value`我尝试过：

```
CHAR(13) + CHAR(10), "\r\n", "\"" 
```

但这些不会起作用或给出错误。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:20:31.597

你收到什么样的错误？你想把整个文件读入一个变量吗？或者您是否逐行阅读，并且在行尾出现超过 1`\r\n`次（当您在行尾出现单个 \r\n 时，ssis 会处理它，您只需要在平面文件连接管理器中指定行分隔符。顺便说一下，你说你试图替换`"\n\r"`，虽然它应该是`"\r\n"`（但不应该抛出错误）。

# java - android中的线程无法按预期工作

> ID：15547681
> 
> 赞同：1
> 
> 时间：2013-03-21T12:34:18.467
> 
> 标签：java, android, multithreading, mobile

我正在遵循一个显示如何创建 Pong 游戏的指南。有一部分，我应该创建一个线程，并调用一个移动球的函数。

这是我创建的代码：

```
package com.ozadari.pingpong;

public class PingPongGame extends Thread {
private Ball gameBall;
private PingPongView gameView;

public PingPongGame(Ball theBall,PingPongView mainView)
{
    this.gameBall = theBall;
    this.gameView = mainView;
}

@Override
public void run()
{
    while(true)
    {
        this.gameBall.moveBall();
        this.gameView.postInvalidate();

        try
        {
            PingPongGame.sleep(5);

        }
        catch(InterruptedException e)
        {

            e.printStackTrace();
        }

    }
}} 
```

该线程被调用并且正在工作，但它不打印任何内容。我试图取消无限循环并使循环运行 100 次。在我等了一会儿之后，它会在运行 100 次后打印到屏幕上，但它不会在中间打印任何东西。

问题是什么？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:39:03.933

从您发布的代码中不确定，但无论如何，您可以使用处理程序并让它每秒运行一次（将时间更改为您想要的时间）：

```
Handler handler = new Handler();
final Runnable r = new Runnable()
{
    public void run() 
        {
             //do your stuff here
              handler.postDelayed(this, 1000);
        }
};

handler.postDelayed(r, 1000); 
```

[http://developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

您也可以使用普通线程，并在最后调用 start 。

```
Thread thread = new Thread()
{
    @Override
    public void run() {
        try {
            while(true) {
                sleep(1000);
                handler.post(r);
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
};

thread.start(); 
```

# php - 使用 number@service_provider 向 Sms 发送脚本的电子邮件

> ID：15547682
> 
> 赞同：1
> 
> 时间：2013-03-21T12:34:21.550
> 
> 标签：php

我使用了一项服务，例如向 number@service_provider (123456@pcs.asa.com) 等用户发送短信，并且我正在以电子邮件的形式发送消息并且工作正常，但不是立即在一两天后收到此消息，而且我认为此服务仅在美国使用，所以任何人都知道为什么我的服务响应迟了。

我正在使用 mine-construct 发送邮件，我正在使用此站点获取提供商信息[Service Provider Info](http://www.data24-7.com/textat.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T09:07:10.537

您是否尝试过寻找可靠的 SMS 网关服务，例如[Twilio](http://www.twilio.com)？我使用了他们的服务，发现它们非常可靠，并且为不同的编程语言预构建了各种 SDK。

# mysql - Mysql从具有多个键值对的表的单个字段中选择键的值

> ID：15547684
> 
> 赞同：1
> 
> 时间：2013-03-21T12:34:23.800
> 
> 标签：mysql, sql

我有这样的桌子：

服务：

```
+----+-----------+------------+-------------+
| id | name      | service_id | description |
+----+-----------+------------+-------------+
| 1  | CHAT      |      1     |             |
| 2  | SMS       |      1     |             |
+----+-----------+------------+-------------+ 
```

服务特点：

```
+----+------------+------------+-------------+
| id | service_id | name       | description |
+----+------------+------------+-------------+
|10  |          1 | Audio      |             |
|20  |          1 | Video      |             |
|30  |          2 | BULKSMS    |             |
+----+------------+------------+-------------+ 
```

客户服务：

```
+----+-----------+------------+----------------------------------+---------------------------------------------+
| id | client_id | service_id |service_features_id               |service_values                               |
+----+-----------+------------+----------------------------------+---------------------------------------------+
|100 |      1000 |          1 |features:{10:enable, 20:disable}  |values:{data_transfer:102400, quota:204800}  |
|200 |      1001 |          2 |features:{30:enable}              |values:{total_sms:100000, users:800}         |
|300 |      1001 |          1 |features:{10:disable, 20:enable}  |values:{quota:204800}                        |
+----+-----------+------------+----------------------------------+---------------------------------------------+ 
```

现在我想要任何键的服务值，即client_id 1000 的data_transfer 或quota 仅来自mysql select 查询。**答案应分别为 102400 或 204800**

有没有更好的方法来形式化表格或存储信息。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:44:55.247

绝对有更好的方法。您的架构需要另外两个表`client_services_features`和一个`client_services_values`, 而不是`client_services`. `client_services_features`具有以下列：

*   ID
*   client_id
*   services_id
*   service_feature_id
*   已启用

并`client_services_values`具有以下列：

*   ID
*   client_id
*   services_id
*   值名
*   价值价值

每当您找到一个将事物列表保持在一行中的表结构时，您通常希望为该列表创建一个单独的表。当列表包含 id 时，您总是希望为列表创建一个单独的表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:47:12.280

在列中存储值、json 或 xml 的列表会使查询特定数据变得非常困难。通常最好将数据分成单独的行。

我会做另外两张桌子

客户端服务值：

```
+----+-----------+------------+---------------------------------+
| id | client_id | service_id |service_type   | service_value   |
+----+-----------+------------+---------------------------------+
|1   |      1000 |          1 |data_transfer  | 102400          |
|2   |      1000 |          1 |quota          | 204800          |
|3   |      1001 |          2 |total_sms      | 100000          |
|4   |      1001 |          2 |users          | 800             |
|5   |      1001 |          1 |quota          | 204800          |
+----+-----------+------------+---------------------------------+ 
```

和client_features

```
+----+-----------+------------+-----------------+
| id | client_id | feature_id | feature_value   |
+----+-----------+------------+-----------------+
|1   |      1000 |         10 |enable           |
|2   |      1000 |         20 |disable          |
|3   |      1001 |         30 |enable           |
|4   |      1001 |         10 |disable          |
|5   |      1001 |         20 |enable           |
+----+-----------+------------+-----------------+ 
```

# android - 磁场、旋转矩阵和全局坐标

> ID：15547691
> 
> 赞同：1
> 
> 时间：2013-03-21T12:34:39.793
> 
> 标签：android, math, android-sensors

我想我已经阅读了关于这个主题的所有帖子，但我仍然无法理解一些事情：

Q1：要获得全局坐标中的磁场矢量，我需要将反转的旋转矩阵和磁场矢量相乘，为什么我需要反转旋转矩阵？

Q2：假设我有一个设备，我可以使用 getOrientation(...) 方法根据沿 Z 轴的旋转计算方位角。无论手机的姿态如何，我可以使用旋转矩阵或其他方法来计算磁北的方位角吗？所以如果我旋转手机，我和磁北之间的角度会保持不变吗？

Q3：当我将磁矢量（第 4 列为零）与反向旋转矩阵相乘时，我得到 x 非常接近于零。我知道其他帖子没问题，但我不明白为什么？

Q4：理论上，假设我有两个设备相距 1 米，是否可以仅根据它们的磁场（在全局坐标中）来确定这两个设备的空间位置

提前致谢。

PS 我已经读过这些帖子： [Getting magnetic field values in global coordinates](https://stackoverflow.com/questions/11772923/how-can-i-get-the-magnetic-field-vector-independent-of-the-device-rotation)， [如何获得磁场矢量，与设备旋转无关？](https://stackoverflow.com/questions/11772923/how-can-i-get-the-magnetic-field-vector-independent-of-the-device-rotation)

[将设备中的磁场 X、Y、Z 值转换为全局参考系](https://stackoverflow.com/questions/15315129/convert-magnetic-field-x-y-z-values-from-device-into-global-reference-frame)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T19:52:18.143

如果您在[将磁场 X、Y、Z 值从设备转换为全局参考系](https://stackoverflow.com/questions/15315129/convert-magnetic-field-x-y-z-values-from-device-into-global-reference-frame)中阅读了我的答案，您仍然不明白。

**A1**。**将旋转矩阵**与设备坐标系中的**磁场矢量**坐标相乘，得到世界坐标系中的**磁场矢量**坐标。

**让我强调一下：上面说的是旋转矩阵，而不是反转的旋转矩阵。**

调用得到的**Rotation矩阵**`getRotationMatrix`是基矩阵从设备基到世界基的变化。即给定任意向量**v**，坐标在设备坐标系中，通过**旋转矩阵**乘以设备坐标系中的坐标，可以得到同一向量**v**在世界坐标系中的坐标。

 **逆**旋转矩阵**是基矩阵从世界基到设备基的变化。因此，当您将此矩阵与坐标相乘时，它被解释为将矩阵与世界坐标系中的向量坐标相乘，以获得相同向量在设备坐标系中的坐标。因此，如果将**反向旋转矩阵与****磁传感器**返回的**磁场矢量**坐标相乘。然后坐标被解释为世界坐标系中矢量的坐标，因此不代表**磁场****矢量**，所得乘积不是********世界坐标系中的磁场矢量**。实际上它是一个向量在设备坐标系中的坐标。******

 ******A2。** `getOrientation`仅当设备是**flat**时才有意义。对我来说，这只是一堆角度计算。我看看我尝试在**几何**上做什么，然后使用**旋转矩阵**来计算我想要的。例如，要计算后置摄像头指向的方向，我将其视为**-z**的方向（与屏幕正交的向量的相反方向）。因此，为了找到这个方向，我将**-z**投影到世界**东西北平面**并计算这个**投影向量**和**North axis**之间的角度。现在如果你这样想，那么设备的旋转不会改变**-z的方向**，因此**投影矢量**与您旋转设备时相同。如果你使用`getOrientation`，那么你必须预先`remapCoordinateSystem(inR, AXIS_X, AXIS_Z, outR)`要求`getOrientation`给你**正确的结果**。

**A3。**`getRotationMatrix`假设**地磁参数**是完全位于**北天平面**中的向量的坐标。那么位于这个平面上的任何向量都必须有**x**坐标等于**0**。这只是基本的线性代数。

**A4。**答案是不。要获得**空间位置**，您必须相对于**固定**坐标系表达这些向量。只有这些向量在设备坐标系中的坐标，你无法找到一个**固定的基础**来计算基础矩阵从**设备基础**到这个**固定基础**的变化。需要满足我上面链接中所述的两个条件才能计算基数的变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:28:43.350

A1。旋转矩阵告诉您手机在世界坐标中的位置。如果要将磁矢量从手机坐标转换为世界坐标，则必须乘以逆。

A2。不太明白这个问题，对不起。

A3。x坐标是磁力的横向分量，对应于北极与磁极的偏差或类似的东西。它应该很小，与 z 坐标相同，它是垂直分量。

A4。从理论上讲，这可能可行，但是由于您在 Android 设备中拥有的传感器的精度，这种方法似乎不太可行。******

# c++ - 为什么我没有成功初始化类中的私有数据成员？

> ID：15547694
> 
> 赞同：0
> 
> 时间：2013-03-21T12:34:46.567
> 
> 标签：c++, oop, class

现在，我遇到了一个练习题：处理 CRect 类中的一些数据。但我的结果与我的预期不同。

我的代码如下：

```
#include<iostream>
#include<cmath>
using namespace std;
class CRect
{
public:
    void Diagonal(CRect one)
    {
        float l;
        l=sqrt( (one.right-one.left)*(one.right-one.left)+(one.bottom-one.top)*(one.bottom-one.top) );
        cout<<"The length is "<<l<<endl;
    }
    void Show(CRect one)
    {
        cout<<"("<<one.left<<","<<one.top<<")"<<"   ";
        cout<<"("<<one.right<<","<<one.bottom<<")"<<endl;
    }
    CRect(float left1,float top1,float right1,float bottom1)
    {
        left=left1;
        top=top1;
        right=right1;
        bottom=bottom1;
    }
    CRect(float left1,float top1)
    {
        left=left1;
        top=top1;
    }
    CRect(CRect &c)           
    {
        right=c.right;
        bottom=c.bottom;
    }
private:
    float left,top,right,bottom;
};

int main()
{
    CRect r1(10,10,20,20);
    CRect r2(0,0);
    r2=CRect(r1);
    r1.Show(r1);
    r1.Diagonal(r1);
    r2.Show(r2);
    r2.Diagonal(r2);
    return 0;
} 
```

然后，结果如下图： ![结果图片](../Images/3f4802cd06c74b87ea29ddbb4172af29.png)

我认为我没有初始化`left`and `top`。但是，我不知道如何纠正它。我在我的代码中找不到错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T12:39:09.343

您的复制构造函数仅“初始化” ¹ `right`和`bottom`,`top`并`left`留下垃圾值：

```
CRect(CRect &c)           
{
    right=c.right;
    bottom=c.bottom;
} 
```

接下来，这两个参数的构造函数有类似的缺陷：

```
CRect(float left1,float top1)
{
    left=left1;
    top=top1;
} 
```

您必须将所有数据成员设置为某些内容。如果这样做，您可以完全删除复制构造函数，让编译器合成一个来完成它的工作。

¹*为什么是引号？因为您实际上是在将值分配给至少在语义上已经初始化的数据成员。要将数据成员初始化为一个值，请使用构造函数初始化列表：*`CRect(float left1,float top1) : left(left1), top(top1), right(), bottom() {}`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T12:41:08.663

您的复制构造函数`CRect(CRect &c)`无法初始化左侧和顶部。当您将`r1`and`r2`传递给函数`Diagonal`and时，将调用复制构造函数`Show`。

而且：

1.  您根本不需要定义复制构造函数。如果您没有定义自己的，则会生成一个默认值。
2.  `Show`并且`Diagonal`是成员函数，它们不需要带参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T12:39:36.957

您尚未初始化`CRect(float left1,float top1)`构造函数和复制构造函数中的所有成员。

```
CRect(const CRect &c) 
{
    right=c.right;
    bottom=c.bottom;
    top=c.top;
    left=c.left;
} 
```

甚至可以省略您的复制构造函数并允许默认的复制构造函数执行所有操作。

更多的

```
CRect(float left1,float top1)
{
    left=left1;
    top=top1;
    // How about right and bottom ?!
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T12:42:55.893

看看你的复制构造函数

```
CRect(CRect &c)           
{
    right=c.right;
    bottom=c.bottom;
} 
```

应该

```
CRect(CRect &c)           
{
    right=c.right;
    bottom=c.bottom;
    top=c.top;
    left=c.left
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T14:02:50.743

我的回答没有直接解决您的问题，但您需要养成使用构造函数**初始化列表**来初始化类成员成员变量的习惯。*（我这样说是因为你的班级可能还没有引入初始化列表。）*

例如，不要像这样从构造函数为成员变量赋值***：***

```
CRect(float left1, float top1)
{
    left=left1;
    top=top1;
} 
```

...您应该像这样***初始化***您的成员变量：

```
CRect(float left1, float top1)
    : left(left1), top(top1)
{
} 
```

为什么，请参阅 C++ FAQ 条目[[10.6] 我的构造函数应该使用“初始化列表”还是“赋值”？](http://www.parashift.com/c++-faq/init-lists.html)以及SO 上的[C++ 初始化列表](https://stackoverflow.com/questions/4589237/c-initialization-lists)。

在您自己的编程中，您可能还需要考虑为成员变量采用命名约定，以便更轻松地将它们与其他变量类型区分开来。例如，而不是：

```
private:
    float left;       // no decoration 
```

...考虑使用两种常见约定之一：

```
private:
    float left_;      // trailing underscore
    float m_left;     // leading 'm_' 
```

有关这方面的更多信息，请参阅SO 上[C++ 中成员变量的尾随下划线。](https://stackoverflow.com/questions/3650623/trailing-underscores-for-member-variables-in-c)

# node.js - 无法在 Ubuntu 12.04 上使用 coffeescript 安装 node.js

> ID：15547695
> 
> 赞同：2
> 
> 时间：2013-03-21T12:34:46.810
> 
> 标签：node.js, ubuntu, coffeescript

[尝试使用这样](http://www.gaggl.com/2012/07/coffeescript-on-ubuntu-12-04/)的咖啡脚本安装 node.js ：

```
sudo sudo apt-get install nodejs npm
sudo npm install -g coffee-script 
```

但：

```
coffee -v 
```

返回我：

```
Error: require.paths is removed. Use node_modules folders, or the NODE_PATH environment variable instead.
    at Function.Object.defineProperty.get (module.js:388:11)
    at Object.<anonymous> (/home/lapsa/bin/coffee@1.3.0:4:21)
    at Module._compile (module.js:456:26)
    at Object.Module._extensions..js (module.js:474:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Function.Module.runMain (module.js:497:10)
    at startup (node.js:119:16)
    at node.js:903:3 
```

我现在完全迷失了。有什么帮助吗？

* * *

尝试了[这种方法](https://stackoverflow.com/questions/10516034/nodejs-and-coffeescript-install-ubuntu-12-04)，但没有成功。

```
$ npm -v
1.2.15

$ node -v
v0.11.0-pre

$ lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 12.04.2 LTS
Release:        12.04
Codename:       precise 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:24:05.510

这个解决方案对我有用（在 Ubuntu 12.04 和 13.04 上测试过）：

```
sudo apt-get install python-software-properties python g++ make
sudo add-apt-repository ppa:chris-lea/node.js
sudo apt-get update
sudo apt-get install nodejs
sudo npm install -g coffee-script 
```

来源： [https ://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager](https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager)

请注意，它不使用默认的 Ubuntu 软件包`npm`。而是`npm`包装在 Chris Lea 的`nodejs`包装中。

如果您已经`npm`安装，您可能希望在应用上述解决方法之前先将其删除。`node`请注意，与名为但与 nodejs 无关的包也存在命名冲突。如果您不小心安装了该软件包，您可能还想删除它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T20:19:39.753

我想知道您的问题是否与尝试使用安装 npm 有关

```
sudo apt-get install nodejs npm 
```

如果您查看[通过包管理器安装 nodejs](https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager)的说明，则说明

```
As of Node.js v0.10.0, the nodejs package from Chris Lea's repo includes both npm and nodejs-dev. 
```

我想知道 npm 包的恶意安装版本是否会给您带来问题。前几天我遇到了这个问题，但对我来说，npm 就是不会安装。

# javascript - 未捕获类似 FB 的事件

> ID：15547701
> 
> 赞同：-2
> 
> 时间：2013-03-21T12:35:05.560
> 
> 标签：javascript, facebook, sdk, facebook-like

我已经使用 iframe 代码放置了类似 FB 的按钮...

这是Like按钮的代码：

```
<iframe src="//www.facebook.com/plugins/like.php?href=https%3A%2F%2Fmadamebridal.com%2Fdev%2Fcheckout%2Fonepage%2F&amp;send=false&amp;layout=standard&amp;width=450&amp;show_faces=true&amp;font&amp;colorscheme=light&amp;action=like&amp;height=80" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:80px;" allowTransparency="true"></iframe> 
```

我正在使用此代码来捕获类似 FB 的事件...

这是代码：

```
window.fbAsyncInit = function() {
    (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));

    // Additional initialization code here
    FB.Event.subscribe('edge.create',
        function(response) {
            alert('You liked THISSS Yeaa');
        }
    );
}; 
```

但是......它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:20:35.013

你的问题一点都不清楚，你去看医生的时候你不说，我觉得疼，期待他给你治好。您是否正确加载了javascript sdk？

此代码应该适合您，除非您有其他脚本触发错误并阻止 facebook sdk 正常工作。

将此代码放在您的`<body>`标签旁边

```
<div id="fb-root"></div>
        <script>
          window.fbAsyncInit = function() {
            FB.init({
              status     : true, // check login status
              cookie     : true, // enable cookies to allow the server to access the session
              xfbml      : true  // parse XFBML
            });

            // Additional initialization code here
            FB.Event.subscribe('edge.create', function(response) {alert('You liked THISSS Yeaa'); });
            };

          // Load the SDK Asynchronously
          (function(d){
             var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
             if (d.getElementById(id)) {return;}
             js = d.createElement('script'); js.id = id; js.async = true;
             js.src = "//connect.facebook.net/en_US/all.js";
             ref.parentNode.insertBefore(js, ref);
           }(document));
    </script> 
```

# encryption - base64 编码的 iv? (NSISCrypt) 对称加密

> ID：15547704
> 
> 赞同：0
> 
> 时间：2013-03-21T12:35:17.760
> 
> 标签：encryption, base64, nsis

所以我试图为 NSIS 安装程序使用一个名为 NSISCrypt 的插件，我想混淆一个注册密码。

于是就有了一些简单的Base64加解密。所以我想嘿！太好了.... [http://nsis.sourceforge.net/NsisCrypt_plug-in](http://nsis.sourceforge.net/NsisCrypt_plug-in)（他是它的自述文件）

问题是我不太确定 Base64 iv 是什么.....我用谷歌搜索了 base64 iv 并没有提出任何结果。

我不是加密专家，但是我当然知道预共享密钥是什么……但是 BaseIV 是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:24:02.300

[初始化向量](http://en.wikipedia.org/wiki/Initialization_vector)是非秘密的，通常是唯一的或随机的，生成的数据有助于在使用相同密钥时使加密具有不确定性。那里的文档只是说 IV 需要进行 base64 编码。

# database - db.SubmitChanges() 未更新 Windows phone 8 中的数据库

> ID：15547706
> 
> 赞同：1
> 
> 时间：2013-03-21T12:35:26.933
> 
> 标签：database, windows-phone-8

我的问题可能与谷歌搜索中的许多问题相似，但我有一些具体的查询。我已经编写了这样的代码，其中 db 是数据库，Items 是具有文件名作为一个属性的表。

```
var query = from fs in dB.Items
              where fs.FilePath.Trim() == strOldpath.ToString()
              select fs;

                 foreach (var fs in query)
                 {
                    fs.FileName = txtrename.Text.ToString();                
                 }

                 try
                 {
                    dB.SubmitChanges();
                 }
                 catch (Exception e)
                 {

                 } 
```

此代码运行良好，但调试后我停止模拟器并在命令提示符下运行

`ISETool.exe ts xd 19xxxx-b6f2-474b-a747-6axxxxxxx E:\Practise\WinPhone\PhoneApp3\`

它在特定文件夹中创建 *.sdf，我可以在服务器资源管理器中打开它。但我可以看到，它显示的不是更新的文件名，而是旧的文件名。代码运行良好。为什么文件名没有更新有什么帮助吗？我也为表设置了主键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:27:47.417

您似乎在尝试更新只读查询的结果时遇到了一个已知问题：

[LINQ to SQL 实体身份缓存和编译查询错误的解决方法？](https://stackoverflow.com/questions/1427624/workaround-for-linq-to-sql-entity-identity-caching-and-compiled-query-bug)

# angularjs - 控制器内部函数不会更新 $scope 变量

> ID：15547709
> 
> 赞同：0
> 
> 时间：2013-03-21T12:35:36.613
> 
> 标签：angularjs, angularjs-scope

我在 $scope 内有一个函数，它更新 $scope 内的变量 - 我的问题是，一旦函数结束，变量就会被“恢复”到其原始值：

```
function MyCtrl($scope, $http, $templateCache) {
$scope.changeWeek = function (direction) {
    console.log(direction);
    console.log($scope.firstdayofweek);
    var d = new Date();
    direction == '7' ? d.setDate($scope.firstdayofweek.getDate() + 7) : d.setDate($scope.firstdayofweek.getDate() - 7);
    $scope.firstdayofweek = d;
    console.log(d);
    console.log($scope.firstdayofweek);
}
$scope.firstdayofweek = getMonday(new Date());
$http({ method: 'GET', url: '/TimeSheet/Services/GetSubEmployees.ashx', cache: $templateCache }).
 success(function (data, status) {

     $scope.status = status;
     $scope.fullname = data.fullname;
     $scope.accountname = data.accountname;
     $scope.domain = data.domain;
     $scope.subemployees = data.subemployees;
     $scope.domain == 'IL' ? $scope.firstdayofweek.setDate($scope.firstdayofweek.getDate() - 1) : $scope.firstdayofweek.setDate($scope.firstdayofweek.getDate());

 }).
error(function (data, status) {
    $scope.data = data || "Request failed";
    $scope.status = status;
}); 
```

}

标记：

```
<div class="row" >
  <div class="span1"><a href="#" ng-click="changeWeek(-7)"></a></div>
  <div ng-repeat="n in [] | range:7" class="span1">
    {{(firstdayofweek.getDate()+$index)+'/'+(firstdayofweek.getMonth()+1)}}
  </div>
  <div class="span1"><a href="#" ng-click="changeWeek(7)"></a></div>
</div> 
```

$scope.firstdayofweek 在函数内部按预期更新（+-7 天），但 {{firstdayofweek}} 每次调用该函数时都会显示“现在”的更新日期。（控制台显示正确的更新日期）

我猜控制器每次都会刷新 - 有什么办法可以阻止它发生？

谢谢！

# java - 服务（线程）顺序java

> ID：15547710
> 
> 赞同：0
> 
> 时间：2013-03-21T12:35:38.127
> 
> 标签：java, multithreading, service

我的任务是使 3 个（A、B、C）服务相互依赖。当服务A启动时，服务B可以启动，当服务B启动时，服务C可以启动，当C停止时，B可以停止，当B停止时，A可以停止。我已经设法启动线程并使用状态选项从一个切换到另一个。我不得不说我对java不太了解，但我刚刚开始学习java，所以我是新手，所以任何帮助、建议等都会很棒。

另外我有 3 个几乎相同的课程，所以任何人都可以告诉他们我如何用一个替换这 3 个课程？有什么办法吗？

这是我的代码：

```
public class service_class {
    int status=1;
    public static void main(String[] args) {

        service_class service_class = new service_class();

        A1 a=new A1(service_class);
        B1 b=new B1(service_class);
        C1 c=new C1(service_class);

        a.start();
        b.start();
        c.start();

    }
}

class A1 extends Thread{
    service_class service_class;

    A1(service_class service_class){
        this.service_class = service_class;
    }

    @Override
    public void run() {

        try{
            synchronized (service_class) {
                 while(service_class.status!=1){
                        service_class.wait();
                    }

                    System.out.print("A started" + "\n");
                    service_class.status = 2;
                    service_class.notifyAll();

                    while(service_class.status!=7){
                        service_class.wait();
                    }
                    System.out.print("A stoped" + "\n");
                    service_class.status = 1;
                    service_class.notifyAll();
                }

        }catch (Exception e) {
            System.out.println("Exception 1 :"+e.getMessage());
        }

    }

}

class B1 extends Thread{

    service_class service_class;

    B1(service_class service_class){
        this.service_class = service_class;
    }

    @Override
    public void run() {

        try{
            synchronized (service_class) {

                    while(service_class.status!=2){
                        service_class.wait();
                    }

                    System.out.print("B started " + "\n");
                    service_class.status = 4;
                    service_class.notifyAll();

                    while(service_class.status!=6){
                        service_class.wait();
                    }
                    System.out.print("B stoped" + "\n");
                    service_class.status = 7;
                    service_class.notifyAll();
                }

        }catch (Exception e) {
            System.out.println("Exception 2 :"+e.getMessage());
        }

    }
}

class C1 extends Thread{

    service_class service_class;

    C1(service_class service_class){
        this.service_class = service_class;
    }

    @Override
    public void run() {

        try{
            synchronized (service_class) {
                 while(service_class.status!=4){
                        service_class.wait();
                    }
                    System.out.print("C started" + "\n");
                    service_class.status = 5;
                    service_class.notifyAll();

                    while(service_class.status!=5){
                        service_class.wait();
                    }
                    System.out.print("C stoped" + "\n");
                    service_class.status = 6;
                    service_class.notifyAll();
            }
        }catch (Exception e) {
            System.out.println("Exception 4 :"+e.getMessage());
        };

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:45:11.473

> 我有 3 个几乎相同的课程，所以任何人都可以告诉他们我如何用一个替换这 3 个课程？有什么办法吗？

看起来这 3 个类之间的`A`区别`B`是`C`：

*   打印的名称字符串，以及
*   每个人测试和设置的状态值。

所以只需用`final`实例变量替换它们，并用传递给（统一）类构造函数的值初始化它们。

* * *

然而 ...

扩展`Thread`通常被认为是一个坏主意。首先，很难使用线程池。更好的方法是使用标准类，并在构造它时`Thread`传递一个实例。`Runnable`事实上，如果您使用线程池或执行器服务或其他任何东西，您甚至不需要自己创建和管理线程。

至于等待/通知的东西，使用更高级别的同步构造（例如`CountDownLatch`）更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:39:09.580

使用[CountDownLatch](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html)

A`CountDownLatch`用给定的计数初始化。该`await`方法会阻塞，直到由于该`countDown()`方法的调用（由其他线程）而计数达到零，然后释放所有等待的线程。我的建议是编写一个超类：

*   提供一个初始计数为 1 的锁存器
*   接受该类的另一个实例或`CountDownLatch`在执行前要等待的
*   在开始时减少其锁存器
*   包装该逻辑`run`并提供一个抽象方法`innerRun`，将在其中实现实际代码。

    ```
    abstract class LatchedRunnable extends Runnable {

    private CountDownLatch latch=new CountDownLatch(1);
    private CountDownLatch wait;
    public Foo(LatchedRunnable waitFor) {
      this.wait=waitFor.latch;
    }
    public Foo(CountDownLatch waitFor) {
      this.wait=waitFor;
    }

    final run () {
     //wait for the other thread
     if (wait!=null) 
        try {wait.await();} 
        catch (InterruptedException e) {return;}

     //signal that we have started
     latch.countDown();

     //actually start
     innerRun();
    }

    protected abstract void innerRun(); //do stuff here
    }

    class Foo extends LatchedRunnable {
       Foo(LatchedRunnable waitFor) {super(waitFor);}
       protected void innerRun() {...}
    }

    class Bar extends LatchedRunnable { 
       Bar(LatchedRunnable waitFor) {super(waitFor);}
       protected void innerRun() {...}
    }

    Foo foo = new Foo(null);
    Bar bar = new Bar(foo); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-04T09:46:14.933

CountDownLatch，在我的理解中，是一种在不进入死锁的情况下实现同步的机制。就这样，

考虑一下，Thread1 执行诸如文件读取之类的任务。读取完整文件后，另一个线程可以处理文件内容并获取某些信息。现在第三个线程负责将信息复制到数据库。

假设有多个客户端以相同的顺序使用上述相同的步骤：

1.  文件读取
2.  文件处理器
3.  数据库更新

我们不是按顺序处理所有事情，而是创建三个线程池。

```
ThreadPool<FileReaderThread> poolA;
ThreadPool<FileProcessorThread> poolB;
ThreadPool<DBUpdate> poolC; 
```

随着新请求的到来，将创建一个具有适当计数的倒计时锁存器。当来自 poolA 的线程完成其工作时，计数将递减。一旦此计数达到 0，将调用来自 poolB 的线程。类似地，另一个 countdownlatch 将用于同步来自 poolB 和 poolC 的线程。理想情况下，我们使用 CountDownLatch 实现顺序过程。

如有不妥请指正。

# php - 搜索特定键的子数组

> ID：15547712
> 
> 赞同：2
> 
> 时间：2013-03-21T12:35:39.350
> 
> 标签：php, arrays

搜索数组元素的子数组以检查特定键的值的最有效方法是什么？例如，给定以下数组，我想检查两个子数组的“msg”值，如果其中任何一个被填充，则返回一个布尔结果：

```
[TGMN02] => Array
        (
            [2] => Array
                (
                    [id] => 93143
                    [msg] => 
                )

            [3] => Array
                (
                    [id] => 24876
                    [msg] => 
                )
        ) 
```

我目前所拥有的只是循环和检查，感觉很笨拙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:45:42.537

我不知道“最”有效，但这不一定要遍历整个数组，因为它会在找到的第一个值上打破循环，因此在技术上更有效。

```
 function hasMsg($a){
   foreach($a as $b)
     if(!empty($b['msg'])) return true;
   return false;
 } 
```

* * *

好的......因为一些*微薄的*评论没有伴随其他建议 - 你可以尝试使用一些 PHP>5.3 - 我真的看不出它会如何*更有效*- 它仍然必须在某种程度上循环遍历数组（但我不是 100% 确定 PHP 解释器的内部工作原理 - 也许有一些内部魔法可以加快速度），所以这可能纯粹是美学：

```
$hasMsg = !!(count(array_filter($a,function($b){ return !empty($b['msg']); }))); 
```

...如果效率低下的话。 **通过数组“循环”并没有错**——它是一种久经考验的语言结构，自数字时代（几乎）出现以来就一直存在。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T14:42:37.667

首先编写一些自定义函数，然后尝试将其与 array_walk_recursive(array &$input , callable $funcname [, mixed $userdata = NULL ]) 函数一起使用。[php手册](http://www.php.net/manual/en/function.array-walk-recursive.php)。

# windows - 在我的项目中安装 npm 模块

> ID：15547713
> 
> 赞同：1
> 
> 时间：2013-03-21T12:35:43.133
> 
> 标签：windows, node.js, command-line, npm

我在驱动器“F”上有 node.js 项目。例如`F:\development\WebStormProjects\test-app\`

那么，我如何`npm install twitter-bootstrap-node`在该项目文件夹中安装 nmp 模块（）？

我的操作系统是windows。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:53:33.250

您可以将模块作为依赖项添加到您的模块中，`package.json`也可以手动安装。无论如何，*在您的项目目录*中的命令行中键入上述命令应该会产生预期的效果。

如果您添加了一个模块作为依赖项，那么`npm install`项目根目录中的一个简单的就足够了。

编辑：模块的全局安装不是默认的，如果你担心的话。你必须主动触发它`npm install -g $MODULE_NAME`

# c# - 在按钮单击时以编程方式将控件添加到 ASP.NET C# 页面

> ID：15547714
> 
> 赞同：0
> 
> 时间：2013-03-21T12:35:43.863
> 
> 标签：c#, asp.net

我希望能够在我的 asp.net c# 页面上将固定装置添加到特定的比赛周。

当用户单击添加按钮时，它应该创建两个下拉列表，以便他们可以选择主队和客队。我希望能够允许用户想要添加尽可能多的装置，因此我需要一种向页面添加控件的动态方式。添加完所有灯具后，我希望将它们全部保存到数据库中。

滚动浏览论坛，我发现以下方法可以通过编程方式添加控件：

C＃

```
 protected void AddTeamButton_Click(object sender, EventArgs e)
    {
        DropDownList homeTeamName = new DropDownList();
        homeTeamName.Items.Add("Arsenal");
        homeTeamName.Items.Add("Aston Villa");
        homeTeamName.ID = "homeTeam";
        PlaceHolder1.Controls.Add(homeTeamName);

        DropDownList awayTeamName = new DropDownList();
        awayTeamName.Items.Add("Arsenal");
        awayTeamName.Items.Add("Aston Villa");
        awayTeamName.ID = "awayTeam";
        PlaceHolder1.Controls.Add(awayTeamName);
    } 
```

aspx：

```
<asp:PlaceHolder ID="PlaceHolder1" runat="server"></asp:PlaceHolder> 
```

但是，这只会创建一组控件，第二次单击添加时，什么也没有发生。当我需要保存时，它也不会创建要访问的唯一 ID。

有什么想法可以解决我遇到的这些问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:43:13.513

asp.net 中的动态控件并不那么容易。
您需要在每个帖子（理想情况下`Init`）上创建它们，直到您在页面上需要它们。
您还需要为他们提供唯一的 ID。

如果你想创建多个控件，我建议在你的 Session 中维护一个计数器，并使用它来循环并在 Init 上生成所需的控件。

在您的`AddTeamButton_Click`身上，您只会增加计数器并添加一组控件。

# security - 每用户盐和跨用户哈希攻击

> ID：15547716
> 
> 赞同：1
> 
> 时间：2013-03-21T12:35:51.507
> 
> 标签：security, hash, sql-server-2008-r2, passwords, salt

我们使用 SHA2 和以下盐对用户密码（在 .net Web 应用程序中）进行哈希处理：

*   **应用程序 salt** - 存储在数据库之外（在我们的例子中，Web 应用程序 web.config 作为加密字符串） - 这被传递给涉及登录、创建新用户和更改密码等的存储过程。
*   **每个用户 salt** - 一个 SQL 唯一标识符 - 当前存储在用户表中 - 在插入时使用默认值自动生成`(CONVERT([char](36),newid(),(0)))`
*   **数据库盐**- 存储在数据库中的设置表中的盐。
*   **密码**- 当然还有用户密码。

虽然这有助于彩虹和字典攻击等，但我在想如果有人确实发现我们的安全漏洞并设法对数据库运行更新语句会发生什么 - 特别是 - 什么会阻止用户使用我们的网站注册他们知道的密码，然后用他们的盐和散列替换管理员帐户上的盐和散列 - 从而让他们对我们的站点/应用程序具有完全的管理员访问权限？

这是我们应该真正担心的风险吗？如果有，是否有技术术语/标准预防技术？

我正在考虑以某种方式将用户 ID（在我们的例子中是一个整数）包含在哈希中 - 只是好奇这方面的最佳实践是什么，或者我们是否过度思考？

**PS：**我知道 SHA2 不是用于密码的理想哈希，并且首选 BCrypt 等较慢的哈希方法，这是我参与该项目之前做出的决定

**PS：**我们的 Web 应用程序（及其应用程序密钥）受到 SQL 服务器的严格防火墙 - 它们之间只有一个端口是开放的，并且用于 SQL）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T12:42:42.853

老实说，我认为你是在想太多的事情。如果恶意用户能够对您的 users 表运行更新查询，则他们很可能对数据库中的其他表具有相同的访问权限。同样，最有可能的权限也存储在所述数据库中，并且运行另一个查询以授予自己适当的权限会更容易，而不是接管现有管理员的帐户。或者，只需直接在数据库中更改他们想要的任何数据，而完全忘记前端。

因此，我想说一旦用户可以访问数据库（通过 SQL 注入或其他方式），所有的赌注都已经结束，他们可以做任何他们喜欢的事情。

请注意，对哈希进行加盐处理的原因仅仅是为了使密码转储变得毫无价值。也就是说，如果（何时？）用户将他们的密码重新用于另一个站点并且没有加盐，则在字典（所谓的彩虹表）中查找获得的散列值将提供*明文密码*，然后可以在另一个网站上用于冒充用户。加盐哈希消除了使用彩虹表查找值的这种“可逆性”。知道盐确实让攻击者占了上风，但他们仍然需要暴力破解才能获得匹配的密码。添加一个未知的应用程序范围的盐会使这个过程变得更加困难，尽管它仍然可以使用数百万个帐户和大量的蛮力或纯粹的运气。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:38:58.630

就任何密码安全性和/或应用程序安全性而言，将任意 SQL 注入的风险视为阻碍因素，您当然是正确的。

在违反数据库安全的情况下（有人窃取 SQL 转储或对您的数据进行任意 SELECT 访问），强化存储密码的预防措施可以保证最终用户的密码隐私以及某些应用程序安全性因为 SELECT 不会直接导致可以被盗并用于登录的密码。

但是，如果 SELECT 语句是可访问的，则可以与其他 SQL 机制配对，例如，在服务器端编写任意 Web-shell 或其他文件，这可能允许攻击者以他们可能的方式影响应用程序代码MITM 登录时的用户密码（因为加密发生在服务器端的散列）。

您的问题的最终答案是，SQL 注入是一个*非常*严重的问题，并且在没有适当 SQL 安全性的情况下部署代码时，添加 Web 应用程序防火墙 (WAF) 或 SQL 代理（想到 GreenSQL）等层可以提供优势。

# java - 让 Android 连接到本地数据库服务器

> ID：15547720
> 
> 赞同：-7
> 
> 时间：2013-03-21T12:36:09.893
> 
> 标签：java, android

我在本地有一个数据库服务器。（这意味着当我输入 192.168.1.1 时运行，而不是将这个数据库上传到网络上）并且我希望我的 android 设备连接到这个数据库服务器以获取数据。

我的 android 设备和数据库服务器在 wifi 网络上是相同的。那么我的android设备如何才能连接到这台计算机以便从数据库服务器获取数据，请教我。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:45:59.747

我认为您不应该立即从 Android 应用程序访问数据库服务器。您需要实现一个 Web 服务来与您的数据库服务器通信。Web Service 可以充当您的 DB 和 Android 应用程序之间的层。

如果您使用部署在通过 Wifi 连接的同一局域网中的 Web 服务，那么您可以使用托管该 Web 服务的机器的 IP 从您的 Android 应用程序访问该 Web 服务。

否则，只需将您的服务部署到 Web 主机并直接从您的移动应用程序调用该服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:39:54.163

尝试使用网络服务。这样您就可以检索和更新服务器的数据库。此外，在完成开发后，您的应用程序通常不会在您的本地计算机上。

# python - Csv Writer - 尝试在每列中写入变量

> ID：15547727
> 
> 赞同：1
> 
> 时间：2013-03-21T12:36:25.780
> 
> 标签：python, csv, writer

我正在尝试在 csv 文件中写入一些数据，但我无法选择不同的列..

```
car=["car 11"]
finish=["Landhaus , Nord"]
time=["['05:36']", "['06:06']", "['06:36']", "['07:06']", "['07:36']", "['08:06']", "['08:36']", "['09:06']", "['09:36']", "['10:06']", "['10:36']", "['11:06']", "['11:36']", "['12:06']", "['12:36']", "['13:06']", "['13:36']", "['14:06']", "['14:36']", "['15:06']", "['15:36']", "['16:06']", "['16:36']", "['17:06']", "['17:36']", "['18:06']", "['18:36']", "['19:06']", "['19:36']", "['20:06']", "['20:36']"]<br/>
myfile = open("Informationen.csv", "wb")
writer = csv.writer(myfile,dialect='excel',delimiter=' ')
bla =[car,finish,time]
writer.writerow(bla) 
```

输出：

```
car 11 Landhaus , Nord "['05:36']", "['06:06']", [..] 
```

全部在 1 行和第 1 列

但我想要这样

```
car 11 (in row 1 Colum 1) | "Landhaus , Nord" (in row 1 Column 2) | ['05:36'] (in Line 1 Column 3 ) | ['06:06'] (in row 1 Column 4 ) till Column n 
```

谢谢你的帮助 ！

编辑
1more 示例它应该看起来像
第 1 行：car 11（第 1 列）Landhaus，Nord（第 2 列）['05:36']（第 3 列）['05:36']（第 4 列）[... ] 示例[http://img13.imageshack.us/img13/4964/unbenanntvilw.png](http://img13.imageshack.us/img13/4964/unbenanntvilw.png)

到目前为止的解决方案：但时间列表仍然存在问题

```
car=["car 11"]
trenn=[';']
finish=['Landhaus , Nord']
time=["['05:36']", "['06:06']", "['06:36']", "['07:06']", "['07:36']", "['08:06']", "['08:36']", "['09:06']", "['09:36']", "['10:06']", "['10:36']", "['11:06']", "['11:36']", "['12:06']", "['12:36']", "['13:06']", "['13:36']", "['14:06']", "['14:36']", "['15:06']", "['15:36']", "['16:06']", "['16:36']", "['17:06']", "['17:36']", "['18:06']", "['18:36']", "['19:06']", "['19:36']", "['20:06']", "['20:36']"]
myfile = open("Informationen2.csv", "wb")
writer = csv.writer(myfile,delimiter=' ')
bla = car + trenn + finish + trenn + time
writer.writerow(bla)
myfile.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:41:11.897

```
import csv

car=["car 11"]
finish=['Landhaus , Nord']
time=["['05:36']", "['06:06']", "['06:36']", "['07:06']", "['07:36']", "['08:06']", "['08:36']", "['09:06']", "['09:36']", "['10:06']", "['10:36']", "['11:06']", "['11:36']", "['12:06']", "['12:36']", "['13:06']", "['13:36']", "['14:06']", "['14:36']", "['15:06']", "['15:36']", "['16:06']", "['16:36']", "['17:06']", "['17:36']", "['18:06']", "['18:36']", "['19:06']", "['19:36']", "['20:06']", "['20:36']"]
myfile = open("derp.csv", "wb")
writer = csv.writer(myfile)
bla = car + finish + time
writer.writerow(bla)
myfile.close() 
```

这是我从 excel 得到的输出

![在此处输入图像描述](../Images/d93dfbf72609a61309b963d1a6e68398.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:02:31.753

[Python 文档](http://docs.python.org/2/library/csv.html)指出，对于函数`csv.writer()`...

> “可以给出可选`dialect`参数，用于定义一组特定于特定 CSV 方言的参数”。

... 然后 ...

> `fmtparams`“可以给出其他可选的关键字参数来**覆盖当前方言中的单个格式参数**”。

您遇到的问题是将`time`列表的字符串表示形式写入文件并使用空格分隔符写入文件的结果。如果您将其`Informationen.csv`视为纯文本文件，问题就会变得很明显。

首先，写入已通过空白分隔符作为参数的文件`csv.writer(myfile, dialect='excel', delimiter=' ')`会覆盖 Excel 方言中定义的默认分隔符，并导致 list 的元素`bla`以格式写入文件，`element1 element2 element3`而不是`element1,element2,element3`.

其次，尽管列表中的大多数元素`time`根据需要在电子表格中分配了它们自己的列，但将列表作为其自身的字符串表示形式写入文件会导致整体不受欢迎的格式。

当您将使用脚本创建的文件作为 Excel 文件打开时，Excel 会根据它发现的前两个逗号读取两个初始值，这些逗号恰好位于字符串的中心`'Landhaus , Nord'`和列表的字符串表示形式`time`中。

您可以首先通过将列表的元素附加到`time`列表来实现所需的列分离`bla`，而不是将前者嵌套在后者中。然后您需要省略`delimiter=' '`in `csv.writer(myfile, dialect='excel', delimiter=' ')`，从而在写入文件时避免分隔符覆盖效果：

```
import csv

car = ['car 11']
finish = ['Landhaus , Nord']
time = ["['05:36']", "['06:06']", "['06:36']", "['07:06']", "['07:36']"]
try:
    with open('Informationen.csv', 'w') as myfile:
        writer = csv.writer(myfile, dialect='excel')
        bla = [car, finish]
        for each_time in time:
            bla.append(each_time)
        writer.writerow(bla)
except IOError as ioe:
    print('Error: ' + str(ioe)) 
```

在 Excel 中生成以下输出：

[http://imageshack.us/a/img839/8061/screenshotkn.png](http://imageshack.us/a/img839/8061/screenshotkn.png)

# android - 如何在android中解析xml数据的字符串

> ID：15547728
> 
> 赞同：0
> 
> 时间：2013-03-21T12:36:27.450
> 
> 标签：android, web-services, parsing, xml-parsing

我是 android 编程新手。我的要求是调用 Web 服务。我成功地得到了来自 Web 服务的响应。如何在 android 中解析响应。给我解决方案。

这是获取响应的代码：

```
 HttpResponse response = httpclient.execute(httppost);
           String str=response.getStatusLine().toString();

           System.out.println("========URL STATUS========"+str);

           HttpEntity r_entity = response.getEntity();

           if( r_entity != null ) {
               result = new byte[(int) r_entity.getContentLength()];
               if(r_entity.isStreaming()) {
                    is = new DataInputStream(r_entity.getContent());
                   is.readFully(result);

               }
           }

           httpclient.getConnectionManager().shutdown();
           String responsedata= (new String(result).toString()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:39:38.660

以下示例用于 dom 解析器。

```
 DocumentBuilderFactory dbf =DocumentBuilderFactory.newInstance();
 DocumentBuilder db = dbf.newDocumentBuilder();
 InputSource is = new InputSource();
 StringReader sr=new StringReader(result.toString());
 is.setCharacterStream(sr);
 Document doc = db.parse(is);
 NodeList nodes = doc.getElementsByTagName("your root tag");

 //get your other tag elements. 
```

[http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/](http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/)。dom 解析器的示例。

[http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/](http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/)。萨克斯解析器的示例。

Dom 是基于 w3c 的解析器。Dom 比 sax 慢，因为它使用树节点并且必须在内存中。所以不推荐使用DOM解析器解析大数据。

另一方面，SAX 比 dom 快。推荐用于大型 xml 数据。

上面的链接为您提供了两者的示例。使用上述任何解析器从 xml 标记中解析和获取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:29:52.007

您需要的只是一个 android xml 解析库。有很多用于 android 的 xml 解析。

[官方教程](http://developer.android.com/training/basics/network-ops/xml.html)

还有一篇文章《[比较android中xml解析的方法](http://steveliles.github.com/comparing_methods_of_xml_parsing_in_android.html)》

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:39:08.117

您可以尝试使用 SimpleXmlParser。这是一个原生的android类。它比 DOM xml 解析器更简单。

# iframe - 在 HTML 源代码中隐藏 iframe url

> ID：15547730
> 
> 赞同：7
> 
> 时间：2013-03-21T12:36:30.130
> 
> 标签：iframe

如何从 HTML 源代码中隐藏 iframe url？

```
<iframe src="http://mysite.com" frameborder="0" scrolling="no" width="728" height="90"></iframe> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T12:42:27.467

您可以使用 javascript 加载源代码，它不会`iframe url`在页面源代码中可见。例如`jQuery`：

```
<script type="text/javascript">
$(document).ready(function(e) {
  $('iframe').attr('src','http://www.flickr.com/');
});
</script>

<body>
<iframe src="" />
</body> 
```

[这里的例子。](http://jsfiddle.net/65ytY/)

您可以将其与服务器端结合使用`$.post`以获取值：

```
$.post('get-iframe-src.php', function(data) {
  $('iframe').attr('src',data);
}); 
```

您甚至可以将`iframe`自身加载到某些元素，例如：

```
$.post('get-iframe.php', function(data) {
  $('#element_id').html(data);
}); 
```

等解决方案很多，这只是其中之一。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-21T12:40:23.063

你不能。如果 URL 不在 HTML 中，浏览器如何知道从哪里获取它？

您可以尝试的一件事是将其隐藏起来，以使某人*更难*找到它。您可以将`src`属性设为空白，然后当文档准备就绪时，在单独的 AJAX 请求中从服务器获取 URL 值，并更新`iframe`标记以将该值包含在`src`.

然而，这将是相当多的工作，并且不会真正完成任何事情。它会阻止的唯一事情是有人通过查看页面源找到它。他们仍然可以在任何 Web 浏览器的调试工具中查看 HTML 的“当前版本”。（右键单击一个元素并检查它，这在这一点上几乎无处不在。）或者任何其他普通的流量嗅探工具都会一目了然。

最终，如果网络浏览器需要知道一条信息，那么该信息需要在客户端可见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T12:40:15.540

没有办法完全阻止源查看。但是有几种方法可以禁用右键单击：

1）Javascript：

```
<script language="JavaScript">
<!--

var message="Your message goes here.";

function click(e) {
if (document.all) {
if (event.button == 2) {
alert(message);
return false;
}
}
if (document.layers) {
if (e.which == 3) {
alert(message);
return false;
}
}
}
if (document.layers) {
document.captureEvents(Event.MOUSEDOWN);
}
document.onmousedown=click;
// --> 
```

2）将以下内容添加到您的标签中：oncontextmenu="return false"

参考`https://forum.powweb.com/archive/index.php/t-36161.html`

# knockout.js - 在与 Knockout Validation 绑定后显示验证消息

> ID：15547734
> 
> 赞同：1
> 
> 时间：2013-03-21T12:36:34.750
> 
> 标签：knockout.js, knockout-validation

使用 Knockout Validation 似乎仅当在控件上按下可能更改可观察值的键时才执行验证。

当我第一次绑定时，不执行验证（如果初始值无效，则不显示消息）。我只需要关注我的一个输入控件并写一封信并取消关注它，以便执行验证。

如何在第一次绑定后递归地显示每个控件周围的所有消息？我尝试了`group`解决方案，但是我有一个嵌套层次结构，`validatedObservable`这会产生超出的 maxStackSize

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T07:04:17.493

您可以配置 knockout.validation 以立即显示消息。

```
ko.validation.init({ messagesOnModified: false }); 
```

有关配置的详细信息，请参见以下 wiki 页面： [https ://github.com/ericmbarnard/Knockout-Validation/wiki/Configuration](https://github.com/ericmbarnard/Knockout-Validation/wiki/Configuration)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T09:50:44.293

你也可以这样做

```
$(document).ready(function () {
     ko.applyBindings(new vm(), $("#id")[0]);
     $(".validationMessage").css("color", "Red");
     vm.errors.showAllMessages(true);
}); 
```

# primefaces - Primefaces数据表列宽不起作用

> ID：15547735
> 
> 赞同：5
> 
> 时间：2013-03-21T12:36:37.307
> 
> 标签：primefaces, datatable, width

我创建了一个包含一些测试数据的数据表。我的问题是某些值对于我的一个列来说太大了，这导致了奇怪的布局：

![在此处输入图像描述](../Images/9ed5c93f1a21150b88500f41c863d5ef.png)

（订单栏后应显示另外两栏）

我已经尝试了一些事情：

*   `<p:column headerText="Orders" width="50">`没有变化
*   `<p:column headerText="Orders" style="max-width: 30px;">`使列更小，但值在 30px 后被削减
*   在几个数字后添加 a`<br/>`以强制分隔线，但没有更改

订单值是一个大字符串。我的目标是将订单列更改为拆分字符串值的多行列。

我的数据表代码：

```
<h:body>
    <h:head>
    </h:head>
    <h:form id="form">           
        <p:dataTable id="customerTable" var="customer" value="#{customerDataTable.allCustomer}"
         rows="25" paginator="true" emptyMessage="No customer found.">  

                <p:column headerText="Customer ID" style="text-align: center;">  
                <h:outputText value="#{customer.customerNumber}" /> 
                </p:column>

                <p:column headerText="Fist Name" style="text-align: center;">  
                <h:outputText value="#{customer.contactFirstName}" />  
                </p:column> 

                <p:column headerText="Last Name" style="text-align: center;">  
                <h:outputText value="#{customer.contactLastName}" />  
                </p:column> 

                <p:column headerText="Sales Employee Nr." style="text-align: center;">  
                <h:outputText value="#{customer.employee.employeeNumber}" />  
                </p:column> 

                <p:column headerText="Orders">  
                <h:outputText value="#{customer.allOrders}"/>
                </p:column> 

                <p:column headerText="Payments" style="text-align: center;" >
                    <p:commandButton id="payment_btn" update=":form:p_display" oncomplete="paymentDialog.show()" icon="ui-icon-calculator">
                    <f:setPropertyActionListener target="#{customerDataTable.selectedCustomer}" value="#{customer}"/>
                    </p:commandButton>  
                    <p:tooltip for="payment_btn" value="Click to see all payments" showEffect="fade" hideEffect="fade"></p:tooltip>
                </p:column>

                <p:column headerText="Contact Data" style="text-align: center;" >
                    <p:commandButton id="contact_btn" update=":form:c_display" oncomplete="contactDialog.show()" icon="ui-icon-home">
                    <f:setPropertyActionListener target="#{customerDataTable.selectedCustomer}" value="#{customer}"/>
                    </p:commandButton>  
                    <p:tooltip for="contact_btn" value="Click to see the detailed contact data" showEffect="fade" hideEffect="fade"></p:tooltip>
                </p:column>

        </p:dataTable>
    </h:form>    
    </h:body> 
```

在其他线程中，我找到了使用 css 的解决方案，但这也不起作用（原因可能是我现在不知道应该如何以及在何处创建 css 文件和方法）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T17:44:49.517

如果你想打破行，你可以使用 CSS。尝试将此添加到您的样式中

```
.ui-datatable td,.ui-datatable th {
    white-space: normal;
} 
```

如果您的文本中没有空格，这将不起作用，因为浏览器不知道在哪里换行，在这种情况下您可以使用*wbr*标签，但重要的是要说它不受 IE 支持

**也可以看看：**

*   [http://www.w3schools.com/tags/tag_wbr.asp](http://www.w3schools.com/tags/tag_wbr.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T06:16:47.933

尝试将其添加到`scrollable="true"`它的工作数据表。

# c# - 将文本的颜色保存在数据库中并将带有颜色的文本复制到富文本框中

> ID：15547738
> 
> 赞同：1
> 
> 时间：2013-03-21T12:36:43.133
> 
> 标签：c#, sql, wpf, colors, richtextbox

我想在将文本复制到时保持文本的格式，我`richtextbox`该怎么做？（当您在 microsoft word 文档中复制代码时，代码的颜色将与 Visual Studio 中的颜色相同（在此处显示[http://img4.fotos-hochladen.net/uploads/unbenannanta2k46fcjn5.png](http://img4.fotos-hochladen.net/uploads/unbenannta2k46fcjn5.png)））

我想将文本保存在 sql 数据库中并以相同的格式（颜色等）重新加载它。我知道如何在数据库中保存和读取数据，但是如何使用格式（颜色）保存文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:53:33.990

您还可以将隐藏的 FlowDocument 保存`RichTextBox.Document`为字符串

```
public static string ToStringExt(this IDocumentPaginatorSource flowDocument)
{
    return XamlWriter.Save(flowDocument);
} 
```

要将其转换回 FlowDocument，您可以使用此扩展

```
public static bool IsFlowDocument(this string xamlString)
{
    if (xamlString.IsNullOrEmpty()) 
        throw new ArgumentNullException();

    if (xamlString.StartsWith("<") && xamlString.EndsWith(">"))
    {
        XmlDocument xml = new XmlDocument();
        try
        {
            xml.LoadXml(string.Format("<Root>{0}</Root>", xamlString));
            return true;
        }
        catch (XmlException)
        {
            return false;
        }
    }
    return false;
}

public static FlowDocument toFlowDocument(this string xamlString)
{
    if (IsFlowDocument(xamlString))
    {
        var stringReader = new StringReader(xamlString);
        var xmlReader = System.Xml.XmlReader.Create(stringReader);

        return XamlReader.Load(xmlReader) as FlowDocument;
    }
    else
    {
        Paragraph myParagraph = new Paragraph();
        myParagraph.Inlines.Add(new Run(xamlString));
        FlowDocument myFlowDocument = new FlowDocument();
        myFlowDocument.Blocks.Add(myParagraph);

        return myFlowDocument;
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T12:39:52.660

使用RichTextBox的[Rtf属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.rtf.aspx)

`richtextbox1.Rtf`=> 存储到数据库

从数据库中检索并恢复`richtextbox1.Rtf`.

# windows - IOCP循环终止可能导致内存泄漏？如何优雅地关闭 IOCP 循环

> ID：15547741
> 
> 赞同：3
> 
> 时间：2013-03-21T12:36:49.253
> 
> 标签：windows, multithreading, io, iocp

我有经典的 IOCP 回调，它将 i/o 挂起的请求出列，处理它们，并以这种方式释放它们：

```
struct MyIoRequest { OVERLAPPED o; /* ... other params ... */ };
bool is_iocp_active = true;

DWORD WINAPI WorkerProc(LPVOID lpParam)
{
    ULONG_PTR dwKey;
    DWORD dwTrans;
    LPOVERLAPPED io_req;
    while(is_iocp_active)
    {
        GetQueuedCompletionStatus((HANDLE)lpParam, &dwTrans, &dwKey, (LPOVERLAPPED*)&io_req, WSA_INFINITE); 
       // NOTE, i could use GetQueuedCompletionStatusEx() here ^ and set it in the 
       // alertable state TRUE, so i can wake up the thread with an ACP request from another thread!

        printf("dequeued an i/o request\n");
        // [ process i/o request ]
        ...

        // [ destroy request ]
        destroy_request(io_req);
    }
    // [ clean up some stuff ] 
    return 0;
} 
```

然后，在代码中我将有某个地方：

```
MyIoRequest * io_req = allocate_request(...params...);
ReadFile(..., (OVERLAPPED*)io_req); 
```

这很完美。

现在我的问题是：我想立即关闭 IOCP 队列而不引起泄漏怎么办？（例如应用程序必须退出）我的意思是：如果我将 is_iocp_active 设置为'false'，下一次 GetQueuedCompletionStatus() 将出列一个新的 i/o 请求，这将是最后一个 i/o 请求：它将返回，导致线程根据 MSDN，当一个线程退出时，系统会简单地取消其所有挂起的 i/o 请求。

但是我在调​​用 ReadFile() 时实例化的“MyIoRequest”类型的结构根本不会被销毁：系统已取消挂起的 i/o 请求，但我必须手动销毁我创建的那些结构，否则我将当我停止循环时泄漏所有待处理的 i/o 请求！

那么，我该怎么做呢？仅将该变量设置为 false 来停止 IOCP 循环是错误的吗？请注意，即使我使用 APC 请求停止可警报线程，也会发生这种情况。

我想到的解决方案是将每个“MyIoRequest”结构添加到队列/列表中，然后在 GetQueuedCompletionStatusEx 返回时将它们出列，但这不应该造成瓶颈，因为此类 MyIoRequest 结构的入队/出队过程必须是互锁？也许我误解了如何使用 IOCP 循环。有人可以对这个话题有所了解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T08:37:06.650

我通常关闭 IOCP 线程的方式是发布我自己的“请立即关闭”完成。这样，您可以干净地关闭并处理所有待处理的完成，然后关闭线程。

执行此操作的方法是调用 PostQueuedCompletionStatus()，其中 num 字节、完成键和 pOverlapped 为 0。这将意味着完成键是一个唯一值（您不会有一个具有零句柄/完成键的有效文件或套接字）。

第一步是关闭完成源，因此关闭或中止您的套接字连接、关闭文件等。一旦所有这些都关闭，您将无法再生成任何完成数据包，因此您可以发布特殊的“0”完成；为您为 IOCP 提供服务的每个线程发布一个。一旦线程获得“0”完成键，它就会退出。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T12:55:46.440

如果您要终止应用程序，并且没有理由不这样做（例如关闭数据库连接、进程间共享内存问题），请调用 ExitProcess(0)。

如果做不到这一点，请为所有套接字句柄调用 CancelIO() 并在它们进入时处理所有已取消的完成。

先试试 ExitProcess()！

# c++ - C++ B树的问题

> ID：15547747
> 
> 赞同：-1
> 
> 时间：2013-03-21T12:37:02.327
> 
> 标签：c++, map, c++11, b-tree, multimap

我正在使用[Google 的 C++ B-tree](https://code.google.com/p/cpp-btree/)，我遇到了一个可能有人能够回答的问题。

首先，我收到以下错误：

```
In file included from ref_impl/../include/btree_map.h:31:0,
             from ref_impl/core.cpp:48:
ref_impl/../include/btree.h: In instantiation of ‘btree::btree_node<Params>::reference btree::btree_node<Params>::value(int) [with Params = btree::btree_map_params<unsigned int, unsigned int, std::less<unsigned int>, std::allocator<std::pair<const unsigned int, unsigned int> >, 256>; btree::btree_node<Params>::reference = std::pair<const unsigned int, unsigned int>&]’:
ref_impl/../include/btree.h:809:33:   required from ‘btree::btree_iterator<Node, Reference, Pointer>::pointer btree::btree_iterator<Node, Reference, Pointer>::operator->() const [with Node = btree::btree_node<btree::btree_map_params<unsigned int, unsigned int, std::less<unsigned int>, std::allocator<std::pair<const unsigned int, unsigned int> >, 256> >; Reference = std::pair<const unsigned int, unsigned int>&; Pointer = std::pair<const unsigned int, unsigned int>*; btree::btree_iterator<Node, Reference, Pointer>::pointer = std::pair<const unsigned int, unsigned int>*]’
ref_impl/core.cpp:539:18:   required from here 
ref_impl/../include/btree.h:557:57: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing] 
```

btree.h：

```
pointer operator->() const {
    return &node->value(position);
 } 
```

这似乎是错误的原因。

我的部分代码如下：

```
auto range = duplicates.equal_range(query_ids_temp[i]);
    for (auto it = range.first; it != range.second; ++it) {
//error     
       std::vector<unsigned int>::iterator pos = std::find(deleted_queries.begin(), deleted_queries.end(), it->second);
    //error
        if (pos != deleted_queries.end()) {
            duplicates.erase(it);
            deleted_queries.erase(pos);

        } else {
            query_ids.push_back(it->second);
        }
    } 
```

错误似乎是it->second

另外我试过：

```
for (btree_multimap<unsigned int, unsigned int>::iterator it = range.first; it != range.second; ++it) {
                    //error
        auto temp = it->second;
                    //error
        std::vector<unsigned int>::iterator position = std::find(deleted_queries.begin(), deleted_queries.end(), temp);
        if (position != deleted_queries.end()) {
            duplicates.erase(temp);
            deleted_queries.erase(position);

        } else {
            query_ids.push_back(it->second);
        }
    } 
```

请记住，错误似乎是在 auto temp = it->second;

我也试过：

```
auto p = duplicates.find(query_ids_temp[i]);
      if(p != duplicates.end()) { // found a name
        do {
                    //error
            auto temp = p->second;
                    //error
            auto pos = std::find(deleted_queries.begin(), deleted_queries.end(), temp);
            if (pos != deleted_queries.end()) {
                duplicates.erase(p->second);
                deleted_queries.erase(pos);

            } else {
                query_ids.push_back(p->second);
            }

          p++;
        } while (p != duplicates.upper_bound(query_ids_temp[i]));
      }
      else{
        cout << "Name not found.\n";
      } 
```

问题似乎又是一样的： auto temp = p->second;

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:22:07.787

谷歌的 B-tree 的中心警告是突变使迭代器无效。在循环内调用 duplicates.erase() 会使“p”无效。

出于这个原因，erase() 方法返回一个迭代器，因此您可以编写如下内容：

```
if (...) {
  p = duplicates.erase(...);
  ...
} else {
  ...
  p++;
} 
```

顺便说一句，请提供有关哪个编译器版本发出警告的详细信息。

# django - 是什么导致以下模板错误“无效的块标签：'blocktrans'、预期的'elif'、'else'或'endif'？

> ID：15547749
> 
> 赞同：3
> 
> 时间：2013-03-21T12:37:05.310
> 
> 标签：django, django-templates

是什么导致以下模板错误？

```
In template /var/www/userreg/tagging/templates/registration/login.html, error at line 153

Invalid block tag: 'blocktrans', expected 'elif', 'else' or 'endif'
   143 : 
   144 : 
   145 :    <td>
   146 : 
   147 :    </td>
   148 : </tr>
   149 : </table>
   150 : </td>
   151 :    <td style="text-align:center;">
   152 :        {% if socialaccount.providers  %}
   153 : <p> {% blocktrans with site.name as site_name %} Please sign in with your
 existing acounts through  {% endblocktrans %}
   154 : 
   155 : <div class="socialaccount_ballot">
   156 : 
   157 :   <ul class="socialaccount_providers">
   158 :     {% include "socialaccount/snippets/provider_list.html" %}
   159 :   </ul>
   160 : 
   161 :   <div class="login-or">{% trans 'or' %}</div>
   162 :
   163 : </div>
Exception Type: TemplateSyntaxError at /accounts/login/
Exception Value: Invalid block tag: 'blocktrans', expected 'elif', 'else' or 'endif' 
```

环境：

```
Request Method: GET
Django Version: 1.5
Python Version: 2.7.3 
```

已安装的应用程序：

```
 ('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'registration',
 'django.contrib.humanize',
 'allauth',
 'allauth.account',
 'allauth.socialaccount',
 'allauth.socialaccount.providers.facebook',
 'allauth.socialaccount.providers.google',
 'allauth.socialaccount.providers.linkedin') 
```

已安装的中间件：

```
 ('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware') 
```

我的模板

```
{% extends "base.html" %}

{% load i18n %}   
{% load account %}   
{% load url from future %}

{% block title %}Log in{% endblock %}

{% block content_header %}Log in{% endblock %}

{% block main_content %}    
    {% if socialaccount.providers  %}    
    <p> 
       {% blocktrans with site.name as site_name %}
       Please sign in with your existing acounts through     
       {% endblocktrans %}

       <div class="socialaccount_ballot"> 
          <ul class="socialaccount_providers">
          {% include "socialaccount/snippets/provider_list.html" %}    
          </ul>

          <div class="login-or">{% trans 'or' %}</div>  
       </div>

       {% include "socialaccount/snippets/login_extra.html" %}

       {% blocktrans %}    
       <a href="{{ signup_url }}">sign up</a> for a {{site_name}} account and sign in below:
       {% endblocktrans %}
    </p>   
    {% endif %}         
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:36:37.303

您`site_name`在以下位置定义：

```
{% blocktrans with site.name as site_name %}
    Please sign in with your existing acounts 
{% endblocktrans %} 
```

你没有引用它的地方。

但是您`site_name`在以下位置引用：

```
{% blocktrans %}
    <a href="{{ signup_url }}">sign up</a> for a {{site_name}} account and sign in below:
{% endblocktrans %} 
```

您没有`site_name`在开始`blocktrans`标签处声明和定义的地方。

正如我从您的回溯中看到的那样，django 没有抱怨，因此可能会从`socialaccount/snippets/provider_list.html`or发出错误`socialaccount/snippets/login_extra.html`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T12:39:01.293

只是`{% endblock %}`，不是`{% endblocktrans %}`

# javascript - 来自 Intranet 的 IE8 ActiveX 控件问题

> ID：15547750
> 
> 赞同：0
> 
> 时间：2013-03-21T12:37:05.870
> 
> 标签：javascript, jquery, html, activex

我有一些静态页面，在所有浏览器（ie8、ie9、Mozilla、chrome、safari）中都能完美运行。当我在ie8中打开静态页面时，它提示允许ActiveX控件，如果我不允许ActiveX控件，页面显示不完美，如果我允许ActiveX控件页面工作正常。

我的问题是，当我在 Intranet 的服务器（WCS）中部署页面时，如果我从**IE8**访问 URL，它不会提示 ActiveX 控件，因此它不允许 ActiveX 控件并且不会按预期显示，但是页面在其他浏览器（ie9、Mozilla、chrome、safari）中运行良好。

请告诉我如何克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T09:31:25.737

**html5shiv-printshiv.js**

这包括上述所有内容，以及允许 HTML5 元素在 IE 6-8 中打印时设置样式并包含子元素的机制。

[下载链接](https://github.com/aFarkas/html5shiv)

# c - 程序执行期间的分段错误

> ID：15547752
> 
> 赞同：1
> 
> 时间：2013-03-21T12:37:07.477
> 
> 标签：c, linux, gcc, pthreads

我编写了一个程序来创建 10 个线程并正常运行它们。该程序运行良好，但最后它给出了分段错误。这是什么故障，是什么原因造成的，我该如何解决？我的代码是：

```
#include<stdio.h>
#include<pthread.h>
void *print(void *num);

int main()
{
    pthread_t tid[10];
    int n,check;
    void *exitstatus;
    for(n=1;n<=10;n++)
    {
        check=pthread_create(&tid[n],NULL,print,(void *)&n);
        if(check=0)
            printf("thread created");
        pthread_join(tid[n],&exitstatus);
    }

    return 0;

} 

void *print(void *num)
{
    int i,*val=(int *)num;
    for(i=0;i<(5);i++)
        printf("Hello World!!!(thread %d )\n",*val);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T12:44:57.033

你有很多缺点：

```
for(n=1;n<=10;n++) // No, The array starts from 0 and lasts on 9 
```

尝试这个

```
for(n=0;n<10;n++) 
```

* * *

```
if(check=0) // No, this will assign 0 to check instead of compare it 
```

尝试这个

```
if(check==0) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T12:49:50.603

您正在访问超出其索引的数组。这是未定义的行为。

你的数组`t[10]`从索引开始`t[0]`，应该在`t[9]`-

```
for(n = 0; n < 10; n++) { 
 //your stuff
} 
```

也是`check == 0`你检查平等的方式。`check = 0`将分配`0`给`check`

因此，您的代码必须如下所示：

```
#include<stdio.h>
#include<pthread.h>
void *print(void *num);

int main()
{
    pthread_t tid[10];
    int n,check;
    void *exitstatus;
    for(n = 0; n < 10; n++)
    {
        check=pthread_create(&tid[n], NULL, print, (void *)&n);
        if(check == 0)
            printf("thread created");
        pthread_join(tid[n], &exitstatus);
    }
    return 0;
} 

void *print(void *num)
{
    int i,*val=(int *)num;
    for(i = 0; i < 5; i++)
        printf("Hello World!!!(thread %d )\n", *val);
} 
```

关于编程风格的另一个重要说明：请使用适当的缩进并明智地使用空格。如果使用适当的缩进和空格，大多数编程错误和错误都可以消除。例如，循环中运算符前后的一个空格，以及在下一个参数之前和之前`for`调用函数时的参数之间。`,`

# android - 使用 sharedUserId 访问另一个应用程序的数据

> ID：15547755
> 
> 赞同：5
> 
> 时间：2013-03-21T12:37:11.130
> 
> 标签：android

我有一个已经上市的应用程序，我们称之为“旧应用程序”。我想创建一个“新应用程序”，与我决定使用 SharedID 的旧应用程序共享数据。

我更改了 NEW 应用程序的清单，添加了以下行：

```
android:sharedUserId="com.myname.myoldapp" 
```

其中 com.myname.myoldapp 是旧应用程序包的名称。但它不起作用。

如何使用新应用访问旧应用数据？更改旧应用程序的 userId 以匹配新应用程序的 shareduserid 显然不是一种选择，因为旧应用程序已经在线并且所有更新它的用户都会丢失他们的个人数据。

PS：证书是一样的。

谢谢，。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T13:00:04.540

> 我有一个已经上市的应用程序，我们称之为“旧应用程序”。我想创建一个“新应用程序”，与我决定使用 SharedID 的旧应用程序共享数据。

在不破坏所有现有安装的情况下，这将不再可能。

> 我更改了新应用程序的清单，添加了以下行： android:sharedUserId="com.myname.myoldapp" 其中 com.myname.myoldapp 是旧应用程序包的名称。但它不起作用。

如果您阅读[上的文档`android:sharedUserId`](http://developer.android.com/guide/topics/manifest/manifest-element.html#uid)，您会看到有人告诉您：“但是，如果两个或多个应用程序的此属性设置为**相同的值**，它们将共享相同的 ID”（强调我的）。由于您的旧应用程序没有`android:sharedUserId`，因此您无法将新应用程序设置为旧应用程序的`android:sharedUserId`值。

> 如何使用新应用访问旧应用数据？

使用`Service`. 或者一个`ContentProvider`. 或 Android 支持的任何其他形式的 IPC。旧应用程序需要公开一个基于 IPC 的 API，新应用程序可以使用该 API 来访问旧应用程序的数据。您可以使用自定义`signature`级别的权限来限制对这些 API 的访问仅限于您的应用程序。

# mysql - MySQL 从 2 个或多个表中选择，其中 where 子句具有表 B 中表 A 的条件

> ID：15547756
> 
> 赞同：0
> 
> 时间：2013-03-21T12:37:21.090
> 
> 标签：mysql, sql, database, subquery

我正在尝试从 2 个表中进行选择。但是在表 BI 中需要从表 A 中获取一个值。

为了方便起见，我对此进行了简化，但最终结果是一个非常复杂的查询，这是导致问题的唯一部分。

在此示例中，我们使用 2 个表 - 一个用于成员，一个用于链接到的成员。

这是代码：

```
 SELECT member.id member.name, member.email .membership.type, membership.status FROM
    (
        (SELECT * FROM tbl_members) AS member,
        (SELECT * FROM tbl_memberships WHERE tbl_memberships.memberid = member.id) AS membership
    ) 
```

问题是，在第二个选择查询中，您无法访问 member.id，那么如果可能的话，您将如何在第二个查询中访问来自第一个查询的信息。如果不可能，还有哪些其他选项，请记住**join cant return multiple columns**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:39:13.463

但是一个连接**可以**返回多个列：

```
SELECT  *
FROM    tbl_members m
JOIN    tbl_memberships ms
ON      ms.memberid = m.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:59:14.297

为什么不使用左连接，如果连接没有从 tbl_members 返回所有列

```
SELECT  *
FROM    tbl_members 
Left JOIN    tbl_memberships 
ON      tbl_memberships.memberid = tbl_members.id 
```

# ajax - 异步加载图像

> ID：15547765
> 
> 赞同：-1
> 
> 时间：2013-03-21T12:37:40.473
> 
> 标签：ajax, seo

我已经阅读了 SEO 以异步方式进行一些 URL 访问是有好处的。我见过一些以这种方式加载图像的好页面，但我不确定花时间这样做是否值得。

我正在开发一个电子商务网站，当然，我需要它在 Google 中的位置尽可能好。对于我的产品目录和产品详细信息页面，我可以将其付诸实践，但正如我所说，我不知道这是否值得。

任何有经验的人都可以告诉我我应该还是不应该，以一种或另一种方式做这件事有哪些优点和缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:46:50.900

For SEO a good rule of thumb is that your page needs to be usable in three seconds from the time that a user clicks on your site in the search engine results pages (SERPs). After about three seconds users start turning back to look for something else. Google takes note of this user defection and sites slower than three seconds start to fall for the queries for which they were ranking.

You can use tools like the [Firebug](http://getfirebug.com/) plugin for Firefox to measure your site speed. Access your site remotely using this plugin and look at the `net` tab to see how long it takes to get the page to the "onload" state.

Getting your site faster than three seconds doesn't seem to have much impact on search engine rankings. You may find that it increases user engagement and conversions in other ways though.

The specific technique of asynchronous images that you mention is just one in a large arsenal of things that you can do. Asynchronous images is most appropriate for images below the fold that users don't see without scrolling.

You should also consider other options such as:

*   Image sprites
*   Gzip compression on the server ([mod_gzip](http://sourceforge.net/projects/mod-gzip/))
*   CDN services
*   Compacting and minimizing HTML, JS, and CSS (using [YUI Compressor](http://yui.github.com/yuicompressor/) or similar)
*   Combining and inlining JS and CSS

Install browser plugins such as [Google Page Speed](https://developers.google.com/speed/pagespeed/) that will examine your site and give you a whole list of relevant suggestions.

# spring - 使用spring运行多个测试的jpa问题

> ID：15547767
> 
> 赞同：0
> 
> 时间：2013-03-21T12:37:42.703
> 
> 标签：spring, testing, jpa, junit

我的问题是，当我单独运行测试时，测试工作正常，但是当我运行所有测试时，几个测试开始失败。

看起来是 applicationContext 的问题我有 3 个 applicationContext 但 applicationContext-test 之前导入了 2 个。

有时我会做@applicationContext(applicationContext1.xml)

其他时候@applicationContext(applicationContext-test.xml)

对于不同的测试，我得到不同的例外：

*   SQLGrammarException：无法执行查询。
*   分离实体异常
*   ConstraintViolation 异常。

有些测试正常，有些则不行，但我不知道为什么。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:05:05.190

进行`DirtiesContext`测试以允许每次运行测试时重新加载上下文。

不同`@ApplicationContext`的应该可以正常工作。我认为您没有在测试中清理数据库（因为没有`@DirtiesContext`spring 将使用相同的上下文（和相同的数据库）来处理相同的内容 `@ApplicationContext`）。

# php - 从简单的 html dom 解析器中剥离 span 标签

> ID：15547768
> 
> 赞同：1
> 
> 时间：2013-03-21T12:37:45.020
> 
> 标签：php, simple-html-dom

嗨，我不想解析跨度标签，它是我从中提取数据的子标签.....

```
Ex:- <a class="imp">
     Some data 1 2 3
     <span>
      Unwanted Data
     </span>
     </a> 
```

我正在使用的代码：-

```
 foreach($html->find(a.imp) as $value)
   {
          echo $value->innertext;
   }

Output:-
Some data 1 2 3
Unwanted Data...

 Desired output:-
 Some data 1 2 3 
```

我真的不知道有什么功能或方法可以让我不能包含子标签？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T13:04:13.510

我相信您必须遍历第一组结果，找到所有 span 元素并将每个 span 元素的外文本设置为空字符串，从而删除该元素的整个 HTML。

```
foreach($html->find('a.imp') as $value)
{
    foreach($value->find('span') as $e)
    {
        $e->outertext = '';
    }

    echo $value->innertext;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:55:11.833

简单的 HTML DOM 解析器将起作用：

```
$content = file_get_html($link);
$stuffiwant = $content->find("//a/text()");
var_dump($stuffiwant); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T23:00:43.760

我不相信 simple 有一个干净的方法来删除元素。在 phpquery 中，您可以：

```
$doc->find('a.imp span')->remove();
echo $doc->find('a.imp')->text(); 
```

# activeadmin - CollectionAction 路由被跳过，动作被视为 ID

> ID：15547773
> 
> 赞同：3
> 
> 时间：2013-03-21T12:38:01.127
> 
> 标签：activeadmin

我正在尝试`collection_action`在 ActiveAdmin 中创建一个，它允许我导入 CSV 文件并从中生成订阅者。我希望能够单击一个`action_item`链接并进入我输入 CSV 文件的表单，然后对其进行一些处理。

这是我到目前为止所拥有的：

```
ActiveAdmin.register Subscriber do

collection_action :import_csv, :method => :post do 
    render "import_csv"
end         

action_item do 
    link_to "Import from CSV", import_csv_admin_subscribers_path
end 
```

视图也被创建，此时只是空白。我重新启动了 rails 服务器，并`rake routes`输出：

```
import_csv_admin_subscribers POST       /admin/subscribers/import_csv(.:format)       admin/subscribers#import_csv
batch_action_admin_subscribers POST       /admin/subscribers/batch_action(.:format)     admin/subscribers#batch_action
             admin_subscribers GET        /admin/subscribers(.:format)                  admin/subscribers#index
                               POST       /admin/subscribers(.:format)                  admin/subscribers#create
          new_admin_subscriber GET        /admin/subscribers/new(.:format)              admin/subscribers#new
         edit_admin_subscriber GET        /admin/subscribers/:id/edit(.:format)         admin/subscribers#edit
              admin_subscriber GET        /admin/subscribers/:id(.:format)              admin/subscribers#show
                               PUT        /admin/subscribers/:id(.:format)              admin/subscribers#update
                               DELETE     /admin/subscribers/:id(.:format)              admin/subscribers#destroy 
```

但是，当我单击操作项时，我收到错误`Couldn't find Subscriber with id=import_csv`

如果我将方法更改为`:get`它可以很好地呈现视图。我假设问题是我使用`:post`? 如果您使用该方法调用控制器操作，是否无法呈现视图？

**编辑**好的，是的，用 a 渲染视图没有意义，`post`但是[为什么 ActiveAdmin 文档](http://activeadmin.info/docs/8-custom-actions.html#collection_actions)建议您以这种方式对 CSV 导入执行操作？`# Do some CSV importing work here...`不生成表格怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-06T14:32:59.243

您需要将 method: :post 选项添加到调用链接，因为该 url 没有 get 操作。

# google-maps - 查找汽车在给定时间内可到达的所有点

> ID：15547774
> 
> 赞同：2
> 
> 时间：2013-03-21T12:38:12.937
> 
> 标签：google-maps, google-maps-api-3

我有一个大约 3000 个点（经度、纬度）的列表，我需要创建一个应用程序来查找地图上任何给定位置（经度、纬度）的所有点，这些点可以在 10 分钟车程内到达。我可以轻松地以米为单位计算此任务的距离，例如。圆圈内的所有点，但我需要使用以分钟为单位的持续时间，而不是以米为单位的距离。我应该使用 Google Maps API 的哪个部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:49:51.313

看起来您需要使用[Google Distance Matrix](https://developers.google.com/maps/documentation/distancematrix/)。但是，由于限制，您可能需要在发送请求之前巧妙地过滤可能的位置列表。

*   **每个查询 100 个元素。**
*   **每 10 秒 100 个元素。**
*   **每 24 小时周期 2,500 个元素。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:19:30.940

我会建议这样的[事情](http://maps.forum.nu/gm_driving_radius.html)（[Marcelo](https://stackoverflow.com/users/408519/marcelo)的 v2 示例）。原件没有了，[这里是一个副本](http://geocodezip.com/v2_marcelo_driveTimePolygon.html)，以及[一个移植到 v3 API 的版本](http://geocodezip.com/v3_marcelo_driveTimePolygon.html)。

首先画一个半径大于 10 分钟行驶时间（10 英里应该可以）的圆（或不画，但在概念上）。在该圆中查找数据库中的所有点（距离中心点小于半径/10 英里）。

这应该将您的分数缩小到一个可管理的数字。使用[距离矩阵](https://developers.google.com/maps/documentation/distancematrix/)进一步细化数字，消除那些在圆圈内但大于 10 分钟路程的数字。

[概念证明](http://www.geocodezip.com/v3_10minuteDriveD.html) - 使用地点搜索位置，将结果缩减为 10 英里半径内的结果，然后将这些结果发送到 DirectionsMatrix，丢弃任何持续时间超过 10 分钟的结果。

# php - 当我到达 PHP 中的某个字符时，如何停止正则表达式？

> ID：15547780
> 
> 赞同：1
> 
> 时间：2013-03-21T12:38:37.290
> 
> 标签：php, regex, url, url-rewriting, rewrite

我有一个字符串，`/controller/method/parameter1/parameter2?parameter1=parameter2`. 这只是`REQUEST_URI`我用于我的网站的。

我想使用 PHP 将此字符串拆分为单独的数组元素，以下代码适用于此操作：`preg_split('[/]', $_SERVER['REQUEST_URI'], NULL, PREG_SPLIT_NO_EMPTY)`.

这几乎可以完美地工作，为我提供了出色的数组输出，直到我添加了 get 变量。有了这些，最后一个数组元素也包含了 get 变量。

我的问题是，有没有办法在达到问号 (?) 后立即停止处理？

我想从问号中删除它，并且只显示问号之前的项目。这（希望）将意味着：

```
Array
(
    [0] => controller
    [1] => method
    [2] => parameter1
    [3] => parameter2?parameter1=parameter2
) 
```

会变成这样：

```
Array
(
    [0] => controller
    [1] => method
    [2] => parameter1
    [3] => parameter2
) 
```

问题是，我希望这一切都在正则表达式中。我真的不在乎是否有另一种方法（我知道有），我只想知道是否有办法在正则表达式中做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:40:56.957

分裂前爆炸

```
$vars = explode('?', $_SERVER['REQUEST_URI']);

$array = preg_split('[/]', $vars[0], NULL, PREG_SPLIT_NO_EMPTY); 
```

**更新**

来自[php.net](http://www.php.net/manual/en/function.preg-split.php)：

> 如果您不需要正则表达式的强大功能，您可以选择更快（尽管更简单）的替代方法，例如[explode()](http://php.net/explode)或[str_split](http://php.net/str_split) ()。

在您的情况下，您可以使用**str_split**并节省一些时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:45:22.457

您可以替换 ?(.*) 使用：

```
preg_split('[/]', 
preg_replace("/\?(.*)/", "", $_SERVER['REQUEST_URI']), 
NULL, PREG_SPLIT_NO_EMPTY) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:44:55.897

我在使用正则表达式之前`strpos`和`substr`之前在我的系统中执行此操作：

```
$uri = $_SERVER['REQUEST_URI'];
$uri = ($pos = strpos($uri, '?')) ? substr($uri, 0, $pos) : $uri; 
```

# iframe - 如何在 Firebug 控制台中跨 iFrame 查询 id 元素

> ID：15547781
> 
> 赞同：0
> 
> 时间：2013-03-21T12:38:39.223
> 
> 标签：iframe, firebug, domdocument, getelementbyid, jconsole

我想使用`document.getElementById('parameter')`. 但是 id 元素位于几个嵌套 iFrame 的链中，因为查询返回 null 值（PS：-所有 iFrame 都属于同一个域）

有什么方法可以让我在 iFrame 中查询这个 id 元素而不找出父 iFrame？

请帮忙 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T23:09:17.397

您不能`document.getElementById`在 iframe 中查找标签，因为它完全不同`document`。

试试 jQuery：

```
$('IFRAME').find('#parameter') 
```

这将查看页面上的所有 iframe，然后检查每个 iframe 的#parameter。

# sbt - SBT“包”依赖于“测试”

> ID：15547784
> 
> 赞同：1
> 
> 时间：2013-03-21T12:38:49.150
> 
> 标签：sbt, lift, xsbt-web-plugin

如何使目标“包”依赖于目标“测试”？

这里有一个解决方案：[Force sbt 0.11 to run tests](https://stackoverflow.com/questions/9277009/force-sbt-0-11-to-run-tests) 但它并不真正适用于 xsbt-web-plugin。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:29:49.837

这是我所做的：

```
Keys.`package` <<= (test in Test, Keys.`package` in Compile) map { (_, in) =>
  println("after package & test")
  in
} 
```

它运行测试，如果测试成功，则运行包任务。（在全新安装的 lift-2.5-RC2 上测试）

# android - 如何从 EditText 中删除请求焦点？

> ID：15547785
> 
> 赞同：6
> 
> 时间：2013-03-21T12:38:49.733
> 
> 标签：android, android-edittext

当我触摸它出现的edittext时，我想从edittext中删除蓝线，但我不知道如何删除它。看图了解更多![在此处输入图像描述](../Images/ce383969d9f186e7bf2cae6266ccef44.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T12:41:44.107

这样做

```
lUserNameEditText.clearFocus(); 
```

另一种对我有用的关于边界的方法是

```
lUserNameEditText.setBackgroundColor(0); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T12:46:17.870

您是否尝试过`Layout XML`像这样更改

```
<EditText  
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:hint="Password" 
android:background="#00000000"
/> 
```

或通过代码完成

```
editTextView.setBackgroundColor(0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T12:45:50.930

删除 xml 布局中的 requestFocus 标记，因此会自动失去焦点

# playframework - 为什么PlayFramework只有“eclipse”一个子模块？

> ID：15547786
> 
> 赞同：2
> 
> 时间：2013-03-21T12:38:49.560
> 
> 标签：playframework, playframework-2.1

使用 Play Framework 2.1.1-RC1，我将一个项目拆分为多个模块，如下所示：

```
object ApplicationBuild extends Build {

  val appName         = "Project"
  val appVersion      = "1.0"

  val appDependencies = Seq(
    // Add your project dependencies here,
    javaCore,
    javaJdbc,
    javaEbean,
    "mysql" % "mysql-connector-java" % "5.1.18"
  )

  lazy val common = play.Project(
    appName + "-common", appVersion, appDependencies, path = file("modules/common")
  ).settings(
    publishArtifact in(Compile, packageDoc) := false
  )

  lazy val website = play.Project(
    appName + "-website", appVersion, appDependencies, path = file("modules/website")
  ).dependsOn(common).aggregate(common).settings(
    requireJs += "app.js",

    publishArtifact in(Compile, packageDoc) := false
  )

  lazy val api = play.Project(
    appName + "-api", appVersion, appDependencies, path = file("modules/api")
  ).dependsOn(common).aggregate(common).settings(
    publishArtifact in(Compile, packageDoc) := false
  )

  val main = play.Project(appName, appVersion, appDependencies).settings(
    publishArtifact in(Compile, packageDoc) := false
  ).dependsOn(website, api).aggregate(website, api)
} 
```

所以，当我调用时`play eclipse`，它应该使所有三个子模块都黯然失色，而是只编译第一个，你知道为什么吗？

这是 play 的转储：

```
$ /opt/play/2.1.1-RC1/play eclipse
  [info] Loading project definition from /mnt/data/dev/perso/Project/project
  [info] Set current project to Project (in build file:/mnt/data/dev/perso/Project/)
  [info] About to create Eclipse project files for your project(s).
  [info] Updating {file:/mnt/data/dev/perso/Project/}Project-common...
  [info] Resolving org.hibernate.javax.persistence#hibernate-jpa-2.0-api;1.0.1.Fin                                                                                [info] Done updating.                                                        
  [info] Compiling 27 Java sources to /mnt/data/dev/perso/Project/modules/common/target/scala-2.10/classes...
  [info] Successfully created Eclipse project files for project(s):
  [info] Project-common
$ 
```

为什么？有什么原因吗？

如果我运行该项目，一切正常，每个模块都正常工作。

我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T09:19:37.543

好的，在[Google Group](https://groups.google.com/forum/#!topic/play-framework/0Oq3b3sROBs)对 PlayFramework 的讨论中，@Stijn 给出了很好的指示，我找到了解决方案。

使用[PlayFramework 文档](http://www.playframework.com/documentation/2.1.1-RC1/IDE)，您有两个选项来构建所有子模块：

**选项1：**

进入`play`控制台，然后调用`eclipse skip-parents=false`：

```
$ /path/to/playframework/play
[PlayProject] $ eclipse skip-parents=false 
```

*警告！*在游戏控制台之外这样做是行不通的：

```
$ /path/to/playframework/play eclipse skip-parents=false
> [error] Not a valid key: skip-parents (similar: ivy-paths)
> [error] skip-parents=false 
```

**选项 2：**

修改 Build.scala ：

```
import com.typesafe.sbteclipse.core.EclipsePlugin.EclipseKeys

object ApplicationBuild extends Build {

  override def settings = super.settings ++ Seq(
      EclipseKeys.skipParents in ThisBuild := false
  )

  ...

} 
```

不要忘记导入 EclipseKeys！

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-08T19:04:01.630

如果您编写以下内容，则在播放控制台之外执行此操作将起作用：

```
play "eclipse skip-parents=false" 
```

# c# - 生成敌人问题

> ID：15547787
> 
> 赞同：1
> 
> 时间：2013-03-21T12:38:50.530
> 
> 标签：c#, unity3d

当玩家到达一个路点时，我试图让我的游戏产生敌人。

现在，我有这个功能工作。当我的玩家到达第一条路时，敌人会生成。只有在他杀死了屏幕上的所有敌人后，他才会继续前进。然而，当他到达第二个路点时，没有敌人产生。

现在，在我的碰撞类中，我调用以下代码行：

```
Destroy(gameObject) 
```

虽然这项工作适用于第一个路径点，但第二个路径点不会产生任何东西，因为我的碰撞类已附加到的游戏对象已被破坏。然而，我所有的敌人都是预制件，我认为破坏功能只会破坏预制件的那个实例。无论您何时调用实例化方法，它都只会破坏该实例。

我正在用以下方法生成我的敌人：

```
 public GameObject SpawnEnemies()
{
    Vector3 _position = new Vector3(transform.position.x, transform.position.y, transform.position.z);

    // instantiate particel system
    Instantiate(_particle, _position, Quaternion.identity);

    _clone = (GameObject)Instantiate(_enemy, _position, transform.rotation);
    _ai = _clone.GetComponent<HV_BaseAI>();
    _ai._waypoints = _wayPoints;

    return _clone;
} 
```

然后我在我的碰撞方法中使用以下代码找出有多少敌人还活着：

```
 GameObject g, f; // enemies I want to spawn
    g = GameObject.FindGameObjectWithTag("SectionController");
    f = GameObject.FindGameObjectWithTag("SectionController");

    HV_SectionController tempSectionControllerGroundEnemies, tempSectionControllerFlyingEnemies;
    tempSectionControllerGroundEnemies = g.GetComponent<HV_SectionController>();
    tempSectionControllerFlyingEnemies = f.GetComponent<HV_SectionController>();

    tempSectionControllerGroundEnemies._numberOfGroundEnemies.Remove(gameObject); // remove enemies from list
    tempSectionControllerFlyingEnemies._numberOfFlyingEnemies.Remove(gameObject);
    //Destroy(gameObject);

    _numberOfGroundEnemies = tempSectionControllerGroundEnemies._numberOfGroundEnemies.Count;
    _numberOfFlyingEnemies = tempSectionControllerFlyingEnemies._numberOfFlyingEnemies.Count; 
```

然后，当我想继续时，我会进行以下检查：

```
 if (_groundEnemiesRemaining == 0)
        {
            MoveToNextSection();
            _sectionStartTime = Time.time;
        } 
```

我知道上面的行目前只检查一种类型的敌人，但它是我目前遇到问题的地面敌人。

有谁知道如何删除我从第一部分生成的敌人预制件，一旦它们被击中，然后在下一部分重新生成而不会出现错误：

> “GameObject”类型的对象已被销毁，但您仍在尝试访问它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:23:59.170

我的猜测是游戏对象正在被两个不同的碰撞事件“摧毁”。第一个破坏它，第二个抛出错误。

我在类似情况下所做的是将销毁代码放在被销毁的对象中。然后从您的碰撞类中，使用`gameObject.SendMessage(string)`向实际对象发送消息，该对象会破坏它。

在没有看到更多代码的情况下，我无法推测错误的根源，但以上是我最好的猜测。SendMessage 也可以采用 DontRequireReceiver 参数，因此如果两个碰撞事件尝试向它发送消息，它不会弹出错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-09T03:19:02.630

而不是摧毁它们，你可以只`disable`使用它们`gameObject.SetActive()`！

# c# - 将一个 Web 部件的文本框值传递给 MOSS 2007 中的另一个 Web 部件

> ID：15547789
> 
> 赞同：0
> 
> 时间：2013-03-21T12:38:55.240
> 
> 标签：c#, sharepoint-2007, web-parts, moss

我想将用户控件 (.ascx) 页面中的文本框的值传递给另一个 Web 部件。另一个 Web 部件中的 .ascx 页面。

Web 部件中的代码如下所示。

```
 protected override void CreateChildControls()
    {            
            base.CreateChildControls();          
            _childControl = Page.LoadControl("~/_CONTROLTEMPLATES/MyFolder/MyPage.ascx");
            this.Controls.AddAt(0, _childControl);

    } 
```

我在 MyPage.ascx 中有文本框，我想在另一个 webpart 中使用该值。

我尝试创建接口和通信通道，但我无法弄清楚访问文本框的逻辑。

任何帮助，将不胜感激。

TIA,

编号

ps：我是sharepoint的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:00:04.783

我尝试过的一些解决方案或传递变量的方式，

文本框的值或与此相关的任何变量，应通过 QueryString 或静态变量或会话变量传递。

仅当您觉得数据在您的应用程序关闭期间由于原因 kow 持续存在时，才应使用静态变量。

要使用 Session 变量，应从 Sharepoint 管理员激活 Session。

查询字符串是安全性不太受关注的情况下可行的解决方案之一。

# iphone - ios ad-hoc 应用内购买：在用户购买多件商品时只询问用户凭证一次是否正常？

> ID：15547790
> 
> 赞同：0
> 
> 时间：2013-03-21T12:38:55.427
> 
> 标签：iphone, ios, in-app-purchase, itunes

我正在临时构建版本上测试 IAP。

当我第一次购买应用程序时，苹果会询问我的苹果 ID（我正在使用测试帐户）和密码。

但是当我在第一次购买后尝试购买其他物品时，苹果不会询问我的凭据并小心

IAP 自动处理。我不确定这是不是正常行为。

我以为每次我尝试购买应用程序时苹果都会询问我的凭证。

我很困惑。苹果在第一次身份验证后跳过身份验证是否正常？

还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T17:33:07.870

我相信 15 分钟后，Apple 才会重新验证 Apple Id。因此，第一次购买验证 ID，后续购买无需重新验证即可运行。要在您第二次购买时测试这个空间 15 分钟。你应该被要求再次进入。

Apple 这样做是为了让您不必每次都输入密码。假设是有人没有在你购买东西后的 15 分钟内偷走你的手机。用应用商店试试这个。下载一个应用程序并注意 15 分钟内的后续下载不需要输入您的 Apple ID。

答：是的，完全正常

# python - 如果发生异常不启动对象？

> ID：15547791
> 
> 赞同：0
> 
> 时间：2013-03-21T12:38:56.597
> 
> 标签：python, python-2.7

如果捕获到异常，是否可以阻止初始化 python 对象`__init__`？

**例子**

```
class pwm():

    def __init__(self):
        try:
            wiring_pi = cdll.LoadLibrary('/home/lib.so')
        except:
            print "Problem with loading the library:", sys.exc_info()
            #DON'T CREATE THE OBJECT, FOR IT IS USELES WITHOUT lib.so 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:44:18.200

当然，您可以从 引发异常`__init__`。然后调用者将看到异常。严格来说，对象已经被创建，但是在抛出异常时会被回收，因为没有对它的引用。

在您的示例代码中，要么完全省略该`except`子句，要么从中引发异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T12:45:54.553

在那里覆盖`__new__`并加载dll。`super().__new__(...)`如果失败，请在调用in之前引发异常`__new__`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:29:24.860

您可以使用静态方法来捕获**init**中的执行，然后返回 None 或其他...

```
class AesSedai(object):
    def __init__(name="Moiraine"):
        wiring_pi = cdll.LoadLibrary('/home/lib.so')
    @staticmethod
    def create_wizard(cls,*args, **kwargs):
        try:
            wiring_pi = cdll.LoadLibrary('/home/lib.so')
            return cls(*args, **kwargs)
        except:
            print "Problem with loading the library:", sys.exc_info()
            return 
```

# mysql - MySQL 自然排序（如 OSX Finder）

> ID：15547800
> 
> 赞同：0
> 
> 时间：2013-03-21T12:39:13.640
> 
> 标签：mysql, natural-sort

我已经搜索了很长时间，但是我找到的解决方案并没有按我的需要工作。

让我解释一下：我有一张包含数千种产品的表格，每个产品都有一个字母数字 SKU，也用于排序。该 SKU 包括：

`Category Code`（可变数量的字母字符），

`Product Number`（整数），

`Product Model Variation`（可选，可变数量的字母字符）

例如：（`MANT 12 CL`不带空格）

* * *

现在，我需要像这样订购它们（如果这些是文件名，OSX Finder 会完美地订购它们）：

```
MANT1
MANT2
MANT2C
MANT2D
MANT2W
MANT3
MANT4C
MANT9
MANT12
MANT12C
MANT12CL
MANT12P
MANT13
MANT21
MANT24
MANT24D
MANT29 
```

当然`ORDER BY sku`显然是错误的：

```
MANT1
MANT12
MANT12C
MANT12CL
MANT12P
MANT13
MANT2
MANT21
MANT24
MANT24D
MANT29
MANT2C
MANT2D
MANT2W
MANT3
MANT4C
MANT9 
```

并且`ORDER BY LENGTH(sku), sku`在排序模型变体时遇到问题：

```
MANT1
MANT2
MANT3
MANT9
MANT12
MANT13
MANT21
MANT24
MANT29
MANT2C
MANT2D
MANT2W
MANT4C
MANT12C
MANT12P
MANT24D
MANT12CL 
```

那么，有没有办法像 Finder 那样对这些东西进行排序？

（此外，一旦排序，有没有办法获得下一个和上一个产品？我不介意使用几个查询：此时优雅是我的最后一个问题......）

提前谢谢大家。

* * *

最后一件事：在我的搜索过程中，我找到[了一个类似问题的答案，](https://stackoverflow.com/a/12257917/653245) 但我不知道如何在 PHP 中使用它，所以我不知道它是否有效，实际上是我的问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:43:49.840

你在获取数据时使用 PHP 吗？

如果是这样，在数据已经加载后尝试使用[自然排序功能进行内存排序？](http://php.net/manual/en/function.natsort.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:50:39.540

顺序不是“完全错误”，它只取决于您使用的排序规则。在您的情况下，您可以尝试二进制排序规则，例如“latin1_bin”。

以下示例 ORDER BY 使用 COLLATE 处理 UTF8 数据：

```
mysql> SELECT c1 FROM t1 ORDER BY c1;
+------+
| c1   |
+------+
| a1   |
| a12  |
| a13c |
| a2   |
| a21  |
+------+

mysql> SELECT c1 FROM t1 ORDER BY c1 COLLATE 'utf8_bin';
+------+
| c1   |
+------+
| a1   |
| a12  |
| a2   |
| a21  |
| a13c |
+------+ 
```

# events - 视频背景/ Chrome 浏览器仅在用户点击屏幕时显示视频？

> ID：15547804
> 
> 赞同：0
> 
> 时间：2013-03-21T12:39:20.503
> 
> 标签：events, google-chrome, jquery-plugins, html5-video

我在这个网站上使用了一个视频背景插件[http://kimcolemanprojects.com/index.html](http://kimcolemanprojects.com/index.html)

它在所有浏览器上都很好用，只有在用户点击屏幕之前视频不会显示，这只是一个白屏。

看起来它绑定到点击事件，但我不知道在哪里。我看不到绑定到此页面的任何事件。

谢谢你的帮助。

安吉拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:54:24.200

这确实是一件奇怪的事。只有当我在后台选项卡中打开您的网站时才会发生这种情况。绝对没有点击处理程序。（请参阅开发工具中的“事件侦听器断点”。）并且视频元素确实存在并已加载，即使它没有显示。所以我怀疑这要么是 Chrome 中的错误，要么是它处理某些缓慢加载页面的方式的怪癖。

似乎使它出现的一件事是在开发人员工具中调整 CSS。因此，请尝试在 body 元素的末尾将其添加到您的页面中：

```
<script>
  $(document).ready(function() {
    setTimeout(function() {
      document.getElementsByTagName('video')[0].style.display = '';
    }, 500);
  });
</script> 
```

当我在控制台中运行它时，这对我有用，所以希望它可以在脚本中运行。

此外，您可以做一些简单的事情来使页面加载速度更快并缓解这个特定问题，即使您不能让它完全消失。

1.  设置深色背景颜色。这样，当视频需要一些时间加载时，人们将能够立即看到白色文字。

2.  使视频更小。它大约 21MB，对于背景来说太大了。它以大约每秒 3400kb 的速度进行编码，这甚至超出了您对网络上高清视频的需要。尝试 1000kb 甚至更少。也许500kb。并且不要在视频文件中包含音轨。

3.  将海报图像保存为 jpg 而不是 png。它是 140kb。你可以让它更小。

4.  将所有脚本（移动重定向除外）放在正文标记的底部。这样，您至少可以在无需加载脚本的情况下显示文本和背景颜色。

# c# - c# combobox 根据另一个组合框的值过滤一个组合框

> ID：15547812
> 
> 赞同：1
> 
> 时间：2013-03-21T12:39:32.777
> 
> 标签：c#, winforms, datagridview, combobox, filter

我有 2 个表，product_items 和类别。和2个组合框。我想在选定的类别之后过滤另一个组合框。对不起，我的英语不好 :)，我尝试了 9 小时，但没有得到解决方案：/ 我的代码我写了多少。

```
DataSet ds = new DataSet();
            SqlDataAdapter da = new SqlDataAdapter("select itemid, itemname, pcatid from produkti_items_tab", TestConnection);
            da.Fill(ds, "FillDropDown");

            comboBox1.DataSource = ds.Tables["FillDropDown"].DefaultView;
            comboBox1.DisplayMember = "itemname";
            comboBox1.ValueMember = "itemid";

            //============================================
            DataSet ddd = new DataSet();
            SqlDataAdapter dada = new SqlDataAdapter("select pcatid, pcatname from produkti_cat_tab", TestConnection);
            dada.Fill(ddd, "FillDropDownzzz");

            comboBox2.DataSource = ddd.Tables["FillDropDownzzz"].DefaultView;
            comboBox2.DisplayMember = "pcatname";
            comboBox2.ValueMember = "pcatid"; 
```

但我不知道我应该在这里写什么：

```
 private void comboBox2_SelectedIndexChanged(object sender, EventArgs e)
{
    //how filter :/
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:47:32.607

不确定，需要对此进行测试，但是绑定到第一个组合框的 DataView 具有 RowFilter 属性。
将此属性设置为适当的条件应删除不属于当前所选类别的项目

```
if(comboBox2.SelectedValue != null)
{
    DataView dv = comboBox1.DataSource as DataView;
    dv.RowFilter = "pcatid = " + comboBox2.SelectedValue.ToString();
} 
```

# android - 如何从 ListView 中的复选框（多选）和单选按钮（单选）中检索信息

> ID：15547818
> 
> 赞同：1
> 
> 时间：2013-03-21T12:39:52.153
> 
> 标签：android, android-layout, android-listview, android-arrayadapter

我是android新手，这是我的第一个应用程序，我有带有复选框（多个）和单选按钮（单）的自定义列表视图，现在我只是像复选框（q1，q3）和单选按钮（q2，q4）一样实现它。我的问题是：如何获取所选复选框和单选按钮的值，单击提交按钮如何存储这些值。请提供一些解决方案。谢谢

```
public class MainActivity  extends ListActivity{
String[] QuestionList = new String[] {"q1","q2","q3","q4"};
String [] Question=new String []{"question1","question2","question3","question4"};
String[] option=new String[]{"option1","option2","option3","option4","option5","option6","option7","option8","option9","option10","option11","option12","option13","option14","option15","option16"};

String radiocheck;
CheckBox cb1;
CheckBox cb2;
CheckBox cb3;
CheckBox cb4;
TextView checkText;
LinearLayout check;
LinearLayout layout;
//LinearLayout radio;
TextView radioText;
RadioGroup radio;
RadioButton rb1;
RadioButton rb2;
RadioButton rb3;
RadioButton rb4;
Button save;
Button submit;
ListView list;

MyThumbnaildapter adapter;
public class MyThumbnaildapter extends ArrayAdapter<String>
{
public MyThumbnaildapter(Context context, int textViewResourceId,String[] objects)
            {
             super(context, textViewResourceId, objects);
            }
@Override
    public View getView( int position, View convertView, ViewGroup parent) {
    ViewGroup item =getViewGroup(convertView, parent);
    radiocheck = QuestionList[position];
    int pos=position;
    check = (LinearLayout)item.findViewById(R.id.linear);
    radio = (RadioGroup)item.findViewById(R.id.radio);
    save=(Button)item.findViewById(R.id.save);
    submit=(Button)item.findViewById(R.id.button2);
    layout=(LinearLayout)item.findViewById(R.id.layoutButton);

if (radiocheck.equalsIgnoreCase("q1")||radiocheck.equalsIgnoreCase("q3"))
        {
          check.setVisibility(View.VISIBLE);
          radio.setVisibility(View.GONE);
          checkText=(TextView)item.findViewById(R.id.c1);

          checkText.setText(Question[position]);
        cb1=(CheckBox)item.findViewById(R.id.ch1);
        cb2=(CheckBox)item.findViewById(R.id.ch2);
        cb3=(CheckBox)item.findViewById(R.id.ch3);
        cb4=(CheckBox)item.findViewById(R.id.ch4);

            cb1.setText(option[(pos*4)]);
            cb2.setText(option[(pos*4)+1]);
            cb3.setText(option[(pos*4)+2]);
            cb4.setText(option[(pos*4)+3]);

        }
else if(radiocheck.equalsIgnoreCase("q2")||radiocheck.equalsIgnoreCase("q4"))
        {
            check.setVisibility(View.GONE);
            radio.setVisibility(View.VISIBLE);
         radioText=(TextView)item.findViewById(R.id.Tradio);
             rb1=(RadioButton)item.findViewById(R.id.option1);
             rb2=(RadioButton)item.findViewById(R.id.option2);
             rb3=(RadioButton)item.findViewById(R.id.option3);
             rb4=(RadioButton)item.findViewById(R.id.option4);

         radioText.setText(Question[position]);
         rb1.setText(option[(pos*4)]);
         rb2.setText(option[(pos*4)+1]);
         rb3.setText(option[(pos*4)+2]);
         rb4.setText(option[(pos*4)+3]);
         } 
if((position+1)==Question.length){
   layout.setVisibility(View.VISIBLE);
   save.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        saveAnswers();

                                }

    private void saveAnswers() {
          LinearLayout root = (LinearLayout) findViewById(R.id.totalLayout);
            loopQuestions(root);
    }

    private void loopQuestions(ViewGroup parent) {
        for(int i = 0; i < parent.getChildCount(); i++) {
            View child = parent.getChildAt(i);

                if(child instanceof RadioGroup ) {
                    //Support for RadioGroups
                    RadioGroup radio = (RadioGroup)child;
                    storeAnswer(radio.getId(), radio.getCheckedRadioButtonId());
                }
                else if(child instanceof CheckBox) {
                    //Support for checkboxe1
                    CheckBox cb1 = (CheckBox)child;
                  int  answer = cb1.isChecked() ? 1:0;
                    if(answer==1)
                    storeAnswer(cb1.getId(), answer);
                }
                else if(child instanceof CheckBox) {
                    //Support for checkboxe2
                    CheckBox cb2 = (CheckBox)child;
                  int  answer = cb2.isChecked() ? 1:0;
                    if(answer==1)
                    storeAnswer(cb2.getId(), answer);
                }

                else if(child instanceof CheckBox) {
                    //Support for checkboxe3
                    CheckBox cb3 = (CheckBox)child;
                   int answer = cb3.isChecked() ? 1:0;
                    if(answer==1)
                    storeAnswer(cb3.getId(), answer);
                }
                else if(child instanceof CheckBox) {
                    //Support for checkboxe4
                    CheckBox cb4 = (CheckBox)child;
                   int answer = cb4.isChecked() ?  1:0;
                    if(answer==1)
                    storeAnswer(cb4.getId(), answer);
                }

                if(child instanceof ViewGroup) {
                    //Nested Q&A
                    ViewGroup group = (ViewGroup)child;
                    loopQuestions(group);
                }
            }
    }

        private void storeAnswer(int id, int answer) 
        {

            //how to store answer  using map
        }
});
}

return item;        
                                                                     }
}

public ViewGroup getViewGroup(View reuse, ViewGroup parent) 
{
if(reuse instanceof ViewGroup)
return (ViewGroup)reuse;

Context context = parent.getContext(); 
 LayoutInflater inflater = LayoutInflater.from(context); 
 ViewGroup item = (ViewGroup)inflater.inflate(R.layout.checkbox, null);
 return item;
  }   

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setListAdapter(new MyThumbnaildapter(MainActivity.this, R.layout.checkbox,QuestionList));

}} 
```

**checkbox.xml 是：**

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" 
android:id="@+id/totalLayout">

 <LinearLayout
    android:id="@+id/Loptionr"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:visibility="visible">

 <RadioGroup
    android:id="@+id/radio"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    >

<TextView
    android:id="@+id/Tradio"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/optionS"
    android:layout_alignParentTop="true"

    android:textStyle="bold" />

<RadioButton
    android:id="@+id/option4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
/>

  <RadioButton
    android:id="@+id/option3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    />

   <RadioButton
    android:id="@+id/option2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

 />

  <RadioButton
    android:id="@+id/option1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
     />
 </RadioGroup>
 </LinearLayout>

<LinearLayout
    android:id="@+id/linear"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:visibility="visible">

  <TextView 
    android:id="@+id/c1"

    android:layout_width="wrap_content"
      android:layout_height="wrap_content"/>
 <CheckBox
    android:id="@+id/ch1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

 />

<CheckBox
    android:id="@+id/ch2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    />

<CheckBox
    android:id="@+id/ch3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    />

<CheckBox
    android:id="@+id/ch4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
   />

</LinearLayout>

<LinearLayout android:layout_width="wrap_content"
 android:id="@+id/layoutButton"
 android:orientation="horizontal"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/artist"
    android:layout_below="@+id/thumbnail"
    android:layout_marginLeft="44dp"
     android:visibility="gone">
<Button
    android:id="@+id/save"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Save"
    android:visibility="visible" />
 <Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
  android:layout_marginLeft="30dp"
    android:text="Submit"
    android:visibility="visible" />
</LinearLayout>

</LinearLayout> 
```

# c# - 使用 Rx 等到同一事件发生一段时间

> ID：15547823
> 
> 赞同：1
> 
> 时间：2013-03-21T12:40:02.197
> 
> 标签：c#, winforms, events, delay, system.reactive

使用 Reactive.NET，我如何才能等到同一事件发生 n 秒后再执行操作？

以下示例（C#，WinForms）正在做我想做的事，但我想要在扩展发生之前延迟（比如说 1 秒）：

```
var autoExpand = Observable.FromEventPattern<DragEventArgs>(tree, "DragOver");

autoExpand
    .ObserveOn(SynchronizationContext.Current)
    .Distinct(dragEvent => tree.GetNodeFromCoordinates(dragEvent.EventArgs.X, dragEvent.EventArgs.Y))
    .Subscribe(dragEvent => {
            TreeNode node = tree.GetNodeFromCoordinates(dragEvent.EventArgs.X, dragEvent.EventArgs.Y);

            if (node != null) node.Expand();
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:54:24.947

我相信您正在寻找`Throttle`：

```
var autoExpand = Observable.FromEventPattern<DragEventArgs>(tree, "DragOver");

autoExpand
    .Select(dragEvent => tree.GetNodeFromCoordinates(dragEvent.EventArgs.X, dragEvent.EventArgs.Y))
    .DistinctUntilChanged()
    .Throttle(TimeSpan.FromSeconds(1))
    .ObserveOn(SynchronizationContext.Current)
    .Subscribe(node => {
            if (node != null) node.Expand();
        }); 
```

笔记：

*   为避免重复制作`tree.GetNodeFromCoordinates()`，我已将其与`Select`运营商一起使用以将其带到订阅中
*   如果节点相同，我们可以方便`DistinctUntilChanged`地阻止重复的节点选择事件
*   我已将`ObserveOn`操作员移至`Throttle`通话后以避免阻塞线程 - 一般准则`ObserveOn`建议您应将其保留为订阅前的最后一个操作员。如果您确实需要使用`SynchronizationContext.Current`for`tree.GetNodeFromCoordinates()`那么您可能需要切换调度程序几次以避免跨线程异常。

# forms - 井内浮子形式

> ID：15547825
> 
> 赞同：1
> 
> 时间：2013-03-21T12:40:05.770
> 
> 标签：forms, twitter-bootstrap

我想把 2 个表格放在一个井里，一个挨着一个。我使用 twitter-boostrap。

这是我的代码

```
 <div class="well">
          <h3>
            Title
          </h3>
          <form  method="post" class="form-horizontal">
              <div class="control-group">
              <label class="control-label" for="select01">Label1: </label> 
              <select class="input-mini" id="select01">
                      (my options)
              </select>
            </div>
              <div class="control-group">
              <label class="control-label" for="input01">Label2: </label> 
                <input class="input-mini" id="input01">
            </div>
            <div class="control-group">
              <label class="control-label" for="select02">Label3: </label> 
              <select class="input-mini" id="select02">
                (myoptions)
              </select>
            </div>
          <div class="form-actions">
            <button type="submit" class="btn btn-primary">Submit</button>
          </div>
          </form>
          <form  method="post" class="form-horizontal">
              <div class="control-group">
              <label class="control-label" for="input02">Label3: </label> 
                  <input class="input-mini" id="input02">
              </div>
              <div class="control-group">
              <label class="control-label" for="input03">Label4: </label> 
                  <input class="input-mini" id="input03">
              </div>
          <div class="form-actions">
            <button type="submit" class="btn btn-primary">Submit</button>
          </div>

          </form>
</div> 
```

如果我在 div 中包含表单并添加一个带有 float:left 的样式，那么我会很好地刹车并将我的表单排除在外。我在表单中尝试了跨度、div、表单，但我找不到一种方法可以将一个表单放在另一个表单旁边而不破坏井。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T12:48:11.923

尝试将您的表单包装在一个 div 中以将该内容与井隔离：

[http://jsfiddle.net/SAdM8/6](http://jsfiddle.net/SAdM8/6)

```
<div class="well">
    <div style="overflow: hidden;">
    ... forms ...
    </div>
</div> 
```

就像比利护城河所说，您可以简单地将溢出属性添加到井中。我更喜欢将 Bootstrap 元素保持在其自然状态以避免意外损坏。要么工作。

# jquery - jQuery .click 值更改

> ID：15547837
> 
> 赞同：0
> 
> 时间：2013-03-21T12:40:29.383
> 
> 标签：jquery, forms, click

无法让这个基本的 .click 事件起作用这是我的代码：

```
 $("#thebutton").click(function(){
     var text = $("input1").val();
     $("#input2").val(text);
     }); 
```

这是codepen [http://cdpn.io/GFoxs](http://cdpn.io/GFoxs)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:41:18.303

您错过了[id 选择器](http://api.jquery.com/id-selector/)`#`的符号，您还需要正确包含 jQuery，因为您收到错误*“Uncaught ReferenceError: $ is not defined”*，这篇[文章](http://learn.jquery.com/about-jquery/how-jquery-works/)可以帮助您理解

 *改变

```
var text = $("input1").val(); 
```

到

```
var text = $("#input1").val(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:41:49.640

请参阅错误：

```
Uncaught ReferenceError: $ is not defined 
```

您还没有包含 jquery 库...

进而：

```
 var text = $("#input1").val()  //<--Missing id selector here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:41:19.610

在这里你使用 id 所以使用`#`

```
$("#thebutton").click(function(){
     var text = $("#input1").val(); //$("input1").val(); change this
     $("#input2").val(text);
     }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T12:41:48.017

像这样试试

```
$("#thebutton").click(function(){
     var text = $("#input1").val();
     $("#input2").val(text);
}); 
```*

# r - 如何在 R 中模拟词袋模型以适应 SVM

> ID：15547838
> 
> 赞同：0
> 
> 时间：2013-03-21T12:40:29.473
> 
> 标签：r, machine-learning

我的问题：我如何将词袋模型作为特征应用到 R 中的 svm 中？

我生成的一些数据很低：

```
Title Salary
"Software Engineer" 100000
"Software Engineer" 120000
"Junior Software Engineer" 60000
"Junior Software Engineer" 70000
"Senior Software Engineer" 130000 
```

使用 read.table，我可以得到一个 2*n 的（字符，数字）矩阵。我想将“词袋”应用于标题列。但是，如果我只是手动拆分任何条目，例如

```
jobs['Title'][1,] <- strsplit(jobs['Title'][1,], ' ') 
```

这给出了：

```
Title Salary
"Software" 100000
"Software Engineer" 120000
"Junior Software Engineer" 60000
"Junior Software Engineer" 70000
"Senior Software Engineer" 130000 
```

而不是我预期的：

```
Title Salary
["Software", "Engineer"] 100000
"Software Engineer" 120000
"Junior Software Engineer" 60000
"Junior Software Engineer" 70000
"Senior Software Engineer" 130000 
```

我调用 SVM 的代码如下所示：

```
jobs <- read.table("jobs.data", header = TRUE, as.is = TRUE)
index <- 1:nrow(jobs)
testindex <- sample(index, trunc(length(index)/3))
testset <- jobs[testindex,]
trainset <- jobs[-testindex,]
svm.model <- svm(Salary ~ ., data = trainset, cost = 10, gamma = 1)
svm.pred <- predict(svm.model, testset) 
```

我想我弄错了，但我还没有找到方法，有人可以分享我应该怎么做吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T15:46:15.803

令人担忧的是，机器学习问题中的一个基本问题被否决了。所以让我回答我自己的问题。

1.  每个单词都分配有一个向量，其中 1 表示存在，0 表示不存在。本质上，这将形成一个稀疏矩阵，加上该类的一列。

2.  使用 Python，使用字典来表示一袋单词。在 Python 中进行字符串操作要容易得多。将数据输入 NLTK 或 PyOrange。

这里的要点是 R 似乎不是一种用于字符串操作的语言。您可以使用 tm 库来帮助您。

我希望这可以帮助任何面临类似问题的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-21T08:59:28.500

在 R 中使用 tm 包很容易做到这一点：

```
require(Matrix)
require(e1071) 
require(tm)
options(stringsAsFactors = F)

jobs <- data.frame(Title = c("Software Engineer", "Software Engineer", 
                             "Junior Software Engineer", "Junior Software Engineer", 
                             "Senior Software Engineer", "Hardware Engineer"),
                   Salary = c(100000, 120000,
                              60000, 70000,
                              130000, 110000))

# Create the corpus
MyCorpus <- VCorpus(VectorSource(jobs$Title),  readerControl = list(language = "en"))
content(MyCorpus[[1]])

# Some preprocessing
MyCorpus <- tm_map(MyCorpus, content_transformer(tolower))
content(MyCorpus[[1]])

# Create the Document-Term matrix
DTM <- DocumentTermMatrix(MyCorpus, 
                          control = list(bounds = list(global = c(0, Inf)))) 
dim(DTM)
inspect(DTM)

# Create a sparse matrix to put into SVM
sparse_DTM <- sparseMatrix(i = DTM$i, j = DTM$j, x = DTM$v,
                               dims = dim(DTM),
                               dimnames = list(rownames(DTM), colnames(DTM)))

# SVM
svm.model <- svm(sparse_DTM, jobs$Salary, cost = 10, gamma = 1) 
```

我让你处理训练集/测试集，并进一步了解 tm 包帮助。

# mysql - 将 ORMLite 与 MySQL 和 MyISAM 表一起使用

> ID：15547840
> 
> 赞同：0
> 
> 时间：2013-03-21T12:40:33.147
> 
> 标签：mysql, innodb, myisam, ormlite

ORMLite 的 MySQL 驱动程序默认使用 InnoDB 表。该文档描述了如何将其配置为使用其他表类型，但没有描述这样做的后果。最近在使用 InnoDB 时遇到了不好的经历，我想迁移到 MyISAM，但只是想检查一下 ORMLite 的所有功能是否会继续正常工作，因为我知道 MyISAM 缺少 InnoDB 支持的一些功能。有人有这方面的经验吗？有什么潜伏的问题吗？

（FWIW，我知道我的应用程序没有任何特殊的事务需求，这是一个明显会失败的功能）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:22:27.170

抱歉，我不知道从 ORM 的角度来看之间`InnoDB`的区别。`MyISAM`我*希望*ORMLite不会[受到](http://ormlite.com/)任何影响。表的类型是 MySQL 内部指定的，可能会影响性能或查询行为。

这是我将在这里总结 [的两种类型之间差异](http://www.kavoir.com/2009/09/mysql-engines-innodb-vs-myisam-a-comparison-of-pros-and-cons.html)的一个很好的表格。

1.  InnoDB 较新，而 MyISAM 较旧。
2.  InnoDB 更复杂，而 MyISAM 更简单。
3.  InnoDB 在数据完整性方面更加严格，而 MyISAM 是松散的。
4.  InnoDB 实现了用于插入和更新的行级锁，而 MyISAM 实现了表级锁。
5.  InnoDB 有事务，而 MyISAM 没有。
6.  InnoDB 有外键和关系约束，而 MyISAM 没有。InnoDB 有更好的崩溃恢复，而 MyISAM 在系统崩溃时恢复数据完整性方面很差。
7.  MyISAM 有全文搜索索引，而 InnoDB 没有。

我在此列表中看到的唯一影响查询级别的是`MyISAM`不支持外键或约束，但 ORMLite（截至 2013 年 3 月）也不支持它们。 `MyISAM`不支持事务，但您可以在没有它们的情况下进行 ORMLite 调用。

在我的脑海中，我在这个列表中看不到任何会影响 ORM 的东西。也就是说，测试将是一个好主意。:-)

# arrays - NodeJS - 创建空数组会导致数组中有很多空值

> ID：15547847
> 
> 赞同：2
> 
> 时间：2013-03-21T12:40:53.713
> 
> 标签：arrays, node.js, socket.io

我正在使用 socket.io 创建一个 Node.js 聊天
问题是，当我看到的时`console.log`，`history`我看到一个包含很多空值的数组，最后我的历史条目 `[null,null,null......[ { username: 'Nobody Example', message: '231', date: '03/21/2013 14:23:58' } ]]`

这些空值怎么会在数组中？
这是我的代码的一部分。

```
var history = [];

io.sockets.on('connection', function (socket) {

    socket.on('send', function (message) {
        var date = time();

        io.sockets.in(socket.room).emit('message', socket.username, message, date);

        history[socket.room].push({ username: socket.username, message: message, date: date });

        console.log(history);

    });

    socket.on('joinroom', function (room, username) {
        socket.room = room;
        socket.join(room);

        if ( typeof history[room] === 'undefined' )
            history[room] = [];

    });

}); 
```

编辑以获取更多详细信息：

问题出在为每个房间创建空数组时的“joinroom”事件中。
以下是我进行的一些测试：

```
socket.on('joinroom', function (room, username) {
    socket.room = room;
    socket.join(room);

    console.log(typeof history[room] == 'undefined');
    history[room] = [];
    console.log(typeof history[room] == 'undefined');
    console.log(JSON.stringify(history));
}); 
```

控制台日志：

```
真的
错误的
[null,null,null,null,........,null,[]]
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T15:18:18.900

如果您有一个空数组并使用大数字（例如您的房间 ID）对其进行索引，则该数字之前的数组中的所有插槽都将被填充`undefined`（转换为`null`JSON）。

所以试着把历史变成一个对象：

```
var history = {}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:11:17.050

尝试下面的代码更改为对象（哈希）；

```
var history = {};

io.sockets.on('connection', function (socket) {

socket.on('send', function (message) {
    var date = time();

    io.sockets.in(socket.room).emit('message', socket.username, message, date);

    if(history[socket.room] !== undefined) {
          history[socket.room].push = { username: socket.username, message: message, date: date   };
    } else {
        history[socket.room] = [{ username: socket.username, message: message, date: date   }];
    }

    console.log(history);

}); 
```

# php - 根据 MySQL 数据库中的库存随机生成数字

> ID：15547849
> 
> 赞同：3
> 
> 时间：2013-03-21T12:40:56.337
> 
> 标签：php, mysql

我需要一些关于我在 PHP 中制作的脚本的帮助。目前它被设置为老虎机风格的游戏，用户可以支付一点钱并生成3个随机数字，每个数字链接到他们可以赢得的奖品。匹配 3 并赢得所述奖品。

不幸的是，因为我不会总是将每件物品作为奖品赠送，我需要一种方法来检查每个号码并确保它有库存：

`$stock = $conn -> query('SELECT DISTINCT ItemID FROM codes WHERE Available = 1');`

如果它有库存，请将其添加到一个算法中，该算法将随机选择 3 个数字。目前我有这样的设置：

```
function generate_numbers(){
global $numbers;
$numbers = array(
'0' => rand(1,2),
'1' => rand(1,2),
'2' => rand(1,2)
);
display_numbers();
} 
```

它根据两个变量生成数字，每个数字都链接到一个奖品。显然它没有考虑到哪些号码有库存，这将导致我发放我没有的奖品，并且它不允许有优势。

我需要一种简单的方法来检查一件物品是否有货，如果有货，它会被添加到可以赢得的奖品列表中，我需要它有优势，这样一些奖品会出现（很多）比其他基于简单值的代码 X 有 0.25% 的机会出现，而 cody Y 有 50% 的机会出现。

如果我用更大范围的数字设置它：

```
function generate_numbers(){
global $numbers;
$numbers = array(
'0' => rand(1,100),
'1' => rand(1,100),
'2' => rand(1,100)
);
display_numbers(); } 
```

* * *

```
if (($numbers[0] > 0) && ($numbers[0] < 40)){
echo "you win prize x";
else if (($numbers[0] > 40) && ($number[0] < 50)){
echo "you win prize y";
else {
echo "you win prize z";
} 
```

我仍然要么发放我没有的奖品 - 或者我可以添加一个嵌入的 if else 来检查代码是否有库存，是否发放它，如果它不是不提供奖品或提供默认奖品.

但这将意味着我库存中的代码越多，获得它们的机会就越大，我不想这样做我真的希望它完全公平，具有预定义的赔率。

所以希望所有这些都是有道理的，这不是一个过于复杂的问题，但我认为这是一个非常不寻常的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:47:28.403

扫描您的问题，我认为您需要更改您的查询

```
$stock = $conn -> query('SELECT DISTINCT ItemID FROM codes WHERE Available = 1 ORDER BY RAND()'); 
```

有了这个，你选择了前 3 个，你得到了 3 个随机奖品，

这是一个快速的解决方案。有机会它会更复杂让我想......

**编辑**

经过一些测试，我认为我明白了，

您需要在顶部添加一列，该列`chance`将是一个数字，然后该记录出现的机会是 N 上的 1，

额外的 where 代码是：

`0 = FLOOR(RAND()*chance)`

所以最终的代码是

```
$stock = $conn ->query(
    'SELECT DISTINCT ItemID FROM codes WHERE Available = 1 AND 0 = FLOOR(RAND()*chance) ORDER BY RAND()'
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:50:19.903

如果我理解正确，您可以从创建一系列可用奖品开始，并以查询开头。

所以数组将是：

```
{0 => prize1_id,
 1 => prize3_id,
 2 => prize4_id,
 // ...and so on
 } 
```

然后您可以获取随机数，但不是来自奖品 ID，而是来自数组索引（键）。

如果您希望某些项目有更多机会被选中，例如可以添加两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:04:17.473

你可以做到这一点的一种方法（如果你没有很多项目）是创建一个`ItemID`s 数组并`shuffle()`在数组上使用。然后选择前三个元素（或使用 或 随机化此选择`rand()`）`mt_rand()`作为您显示的数字。这样您就可以选择不存在的项目。您可以更改此算法以检查库存水平，以便它不会`ItemID`根据您的决定添加无库存或低库存（可能通过`codes`定义要选择的项目所需的最低库存的新列）。

为了获得优势，您可以`ItemID`为希望更频繁地选择的项目添加许多重复项。您可以在表格中添加另一列以指示您希望包含特定项目的次数，因此至少 3（以匹配三个数字）您可以为您希望被挑选更多`codes`的 for s 分配更大的值`ItemID`通常由算法决定。它还可以为您不想赠送的物品设置 0。

# android - 附件文件名不正确

> ID：15547854
> 
> 赞同：2
> 
> 时间：2013-03-21T12:41:03.107
> 
> 标签：android

我正在 android 中创建应用程序，我在其中发送带有附件的电子邮件。电子邮件发送代码工作正常，但问题是我在电子邮件上收到的文件名称错误。文件名与路径名连接，就像我正在创建名为 abc.csv 的文件，在邮件中我将其接收为**_mnt_sdcard_MyTest_abc.csv**。这是代码，请建议如何解决此问题。

```
 File   folder = new File(Environment.getExternalStorageDirectory() + File.separator
                 + getString(R.string.app_name));
   Mail m = new Mail("abc@gmail.com", "000000"); 
      String[] toArr = MailTo;
      m.setTo(toArr); 
      m.setFrom("abc@gmail.com"); 
      m.setSubject(Subject); 
      m.setBody(Body); 
      try { 
           m.addAttachment(folder+"/"+filename); 
          if(m.send()) {
              result= true;
        } else { 
            result= false;
        } 
      } catch(Exception e) { 
       Log.e("MailApp", "Could not send email", e); 
      } 
      return result; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:54:24.647

改变这条线

```
File   folder = new File(Environment.getExternalStorageDirectory() + File.separator
                 + getResources().getString(R.string.app_name)); 
```

确保您的文件名是正确的打印日志，如下所示：

```
Log.e("FILENAME----->",""+folder.toString()); 
```

# c# - Reportviewer - 使连续的重复行合二为一

> ID：15547859
> 
> 赞同：0
> 
> 时间：2013-03-21T12:41:17.117
> 
> 标签：c#, sql, visual-studio-2010, ado.net, report-viewer2010

我可以知道如何处理下面描述的场景吗？

假设我有一个包含 4 列的数据集，并且我有 3 个连续的重复标准，`Date`但不是数量。我怎样才能使它成为将之前所有 3 行相加的一行？如何在报表查看器中执行此操作？`Name``ID`

```
Date      Name          ID          Quantity
____________________________________________
21/3     John           001         10
         John           001         20
         John           001         10 
```

我想让它像：

```
Date      Name          ID          Quantity
____________________________________________
21/3     John           001         40 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T04:03:02.960

我通过使用 GROUP BY 查询解决了这个问题。例如：

```
SELECT Date, Name, ID, SUM(Quantity) as Quantity
From EmpTable
GROUP BY Date, Name, ID
ORDER BY Date ASC 
```

不过很简单，我只是认为报表查看器可以做到这一点。谢谢

# iphone - 当用户退出应用程序时保存核心数据？

> ID：15547877
> 
> 赞同：4
> 
> 时间：2013-03-21T12:42:15.523
> 
> 标签：iphone, ios, objective-c, cocoa-touch, core-data

当用户按下主页按钮时，我正在尝试保存核心数据。我想这样做，`-applicationDidEnterBackground:`但它没有被调用。这可能是因为您无法从此处保存核心数据，或者只是因为没有足够的时间完成操作。但是，它确实有效，`-applicationWillResignActive:`我只是好奇这是执行此操作的最佳委托方法以及为什么`-applicationDidEnterBackground:`不起作用。（正如您从输出中看到的那样，两种方法都被调用，如果我从`-applicationWillResignActive:`根本没有发生任何事情中删除保存，所以它不是一个阻塞另一个的情况）

```
// CALLS SAVE
- (void)applicationWillResignActive:(UIApplication *)application {
    [[self model] saveCoreData:@"SAVE FROM: applicationWillResignActive"];
    NSLog(@"APPDEL: %s", __PRETTY_FUNCTION__);
}

// DOES NOT CALL SAVE
- (void)applicationDidEnterBackground:(UIApplication *)application {
    [[self model] saveCoreData:@"SAVE FROM: applicationDidEnterBackground"];
    NSLog(@"APPDEL: %s", __PRETTY_FUNCTION__);
} 
```

.

```
// CONSOLE OUTPUT
2013-03-21 cvb[6724:907] APPDEL: -[AppDelegate applicationWillResignActive:]
2013-03-21 cvb[6724:907] APPDEL: -[AppDelegate applicationDidEnterBackground:]
2013-03-21 cvb[6724:907]  
2013-03-21 cvb[6724:907] SAVE: SAVE FROM: applicationWillResignActive
2013-03-21 cvb[6724:907] SAVE: Saving successful ... 
```

# 编辑：

这就是我最后所做的：

```
- (void)applicationDidEnterBackground:(UIApplication *)application {
    __block UIBackgroundTaskIdentifier bgTask = [application beginBackgroundTaskWithExpirationHandler:^{
        [application endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    }];
    [[self model] saveCoreData:@"[ENTERING BACKGROUND]"];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:13:16.913

查看[UIApplicationDelegate 协议参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)。

基本上，这是您可能感兴趣的部分`applicationDidEnterBackground:`

> 您应该在此方法退出之前执行与调整用户界面相关的任何任务，但其他任务（例如保存状态）应根据需要移动到并发调度队列或辅助线程。因为您在 applicationDidEnterBackground: 中启动的任何后台任务很可能在该方法退出之前不会运行，因此您应该在启动这些任务之前请求额外的后台执行时间。换句话说，首先调用 beginBackgroundTaskWithExpirationHandler: 然后在调度队列或辅助线程上运行任务。

# html - 如何在css3中制作曲线样式菜单？

> ID：15547878
> 
> 赞同：6
> 
> 时间：2013-03-21T12:42:18.640
> 
> 标签：html, css, canvas

是否可以使用 css3 制作曲线/弧形菜单？

![在此处输入图像描述](../Images/b6996582f036a55d3a7a49217a730dac.png)

我可以在 HTML5 中实现这个使用画布或其他东西吗？

*提前致谢， 洛根*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:15:44.640

不幸的是，我不知道任何优雅的解决方案，尤其是在菜单项方面，但弧线本身应该可以在纯 css 和几个 html 元素中使用。

也许这可以让你开始。

**html**

```
<div class="container">
    <div class="gray"></div>
    <div class="white"></div>
</div> 
```

**css**

```
.container {
    height: 200px;
    overflow: hidden;
    position: relative;
}
.gray,
.white {
    position: absolute;
    left: -25%;
    right: -25%;
    border-radius: 100%;
}
.gray { /* use a gray border with border radius to emulate an arc */
    top: -50%;
    border:100px solid gray;
    border-top: none;
    height: 200px;
}
.white { /* put a white oval on top for the top edge of the banner */
    top: -80%;
    background-color: white;
    height: 300px;
} 
```

[http://jsfiddle.net/rNLsr/](http://jsfiddle.net/rNLsr/)

现在的挑战是定位所有菜单项并[相应地旋转它们](http://davidwalsh.name/css-transform-rotate)......我并不认为这是一个可行的解决方案，但无论如何我都会发布希望你会发现它有用。

[SVG](https://developer.mozilla.org/en/docs/SVG)允许您[弯曲文本](http://www.svgbasics.com/text2.html)，并且可能是更适合此任务的工具。

# 编辑

这是我用 SVG 做的一个版本，它是一个概念验证，需要调整才能看起来不错（由于某种原因，在 chrome 中呈现可怕而在 IE 中呈现微小），但它为您提供了基本概念：

**svg**

```
<svg viewBox="0 0 500 300" version="1.1">
    <defs>
        <!-- Start at (10,40) end at (490,40) use control point (250 ,85) -->
        <path id="curvetext" d="M 10,40 Q 250,85 490,40" />
    </defs>
    <use x="0" y="0" xlink:href="#curvetext" fill="none" stroke="gray" stroke-width="50"/>
    <text font-size="12" fill="white">
        <textPath xlink:href="#curvetext">
            <a xlink:href="http://example.com">Menu 1</a> Menu 2 Menu 3 Menu 4 Menu 5 Menu 6 Menu 7 Menu 8 Menu 9
        </textPath>
    </text>
</svg> 
```

SVG 演示：http: [//jsfiddle.net/rNLsr/2/](http://jsfiddle.net/rNLsr/2/)

# html - H1中的HTML H3元素

> ID：15547879
> 
> 赞同：0
> 
> 时间：2013-03-21T12:42:24.860
> 
> 标签：html, css

```
<h1>Hello<h3>World</h3></h1> 
```

如果这是我的 html，所有浏览器都会从 h1 中删除 h3。如果我看到源代码

```
<h1>Hello</h1>
<h3>World</h3> 
```

据我所知 h1 和 h3 都是块元素。为什么我不能将块元素放在另一个块中。

[http://jsfiddle.net/J3dP4/](http://jsfiddle.net/J3dP4/)

![捕获](../Images/13e372edbd23ede4b57650d42597aae6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:46:04.677

来自[w3.org 上的 h1 元素](http://www.w3.org/TR/html-markup/h1.html)：

> 允许内容：
> 
> 措辞内容

[此处](http://www.w3.org/TR/html-markup/common-models.html#common.elem.phrasing)列出了措辞元素：

> a 或 em 或 strong 或 small 或 mark 或 abbr 或 dfn 或 i 或 b 或 s 或 u 或 code 或 var 或 samp 或 kbd 或 sup 或 sub 或 q 或 cite 或 span 或 bdo 或 bdi 或 br 或 wbr 或 ins 或del or img or embed or object or iframe or map or area or script or noscript or ruby​​ or video or audio or input or textarea or select or button or label or output or datalist or keygen or progress or command or canvas or time or Meter

`h3`不在其中。

所以不，你不能把 a 放在 a`h3`中`h1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:47:57.407

`<h1>`并且`<h3>`都是同一种块元素，标题级别。如果它按您的意图“工作”没有什么区别，结果是一样的。

一直`<h1>`到`<h6>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:12:28.277

这就是为什么你不应该那样做，以及为什么你不能那样做。

为什么你不应该这样做，请参阅dystroy的回答。

为什么你不能这样做，只是解析规则不允许你这样做。但这仅仅是因为您试图制作一个 h？元素另一个 h 的直接子元素？孩子。如果它是后代但不是直接孩子，那么解析规则不会阻止您。例如，

```
<h1>Hello<div><h3>World</h3></div></h1> 
```

[提琴手](http://jsfiddle.net/J3dP4/1/)

*将*在 h1 元素内的 div 元素内放置一个 h3 元素。但是请注意，这种安排仍然无效，您不应该这样做。

# javascript - 指定字体名称的一部分

> ID：15547890
> 
> 赞同：0
> 
> 时间：2013-03-21T12:42:41.300
> 
> 标签：javascript, css, fonts

有没有办法指定字体名称的一部分并且浏览器使用第一个匹配的字体？例如，我想让浏览器使用名称中包含“Garamond”的任何字体，例如 Garamond Pro、Garamond Pro、...。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:19:04.577

不在 HTML 或 CSS 中。您可能需要 JavaScript 和 Flash 才能获得用户系统中的字体列表，请参阅[Get a List of Installed Fonts with Flash and Javascript](http://hasseg.org/blog/post/526/getting-a-list-of-installed-fonts-with-flash-and-javascript/)。

使用“Garammond”这个名字，你可能什么也找不到。使用“Garamond”，您通常只会找到“Garamond”或什么也没有。

# internet-explorer - 为什么在按住 Control 键单击链接时 Internet Explorer 对 URL 的编码方式不同

> ID：15547897
> 
> 赞同：2
> 
> 时间：2013-03-21T12:42:56.247
> 
> 标签：internet-explorer, encoding, character-encoding

我遇到了一个问题，Internet Explorer（10，但我认为我对旧 IE 也有同样的问题）会根据我是否正常单击链接或是否通过 Control-clicking 在新选项卡中打开它来对 URL 进行不同的编码在上面。

我制作了一个小的 JSBin 来测试这个问题，这就是我**正常**单击链接时 Wireshark 显示的内容：

![正常点击](../Images/d19c44372a224b8061e58be87f3d17eb.png)

这是我在**控制点击时得到的**：

![按住 Control 键单击](../Images/e572b64d52167431c223006f21c12d11.png)

请注意，URL 中的“Å”编码不同，第一种情况是“\305”，第二种情况是“\303\205”。

**如何重现**

您需要 Wireshark 或一些类似的工具，因此需要做一些工作。

1.  在 Internet Explorer中转到此 JSBin：http: [//jsbin.com/agukeg/5](http://jsbin.com/agukeg/5)
2.  启动 Wireshark（或您选择的工具）并开始捕获。
3.  单击链接“testme”（通常不使用 Control）。
4.  按住 Control 的同时单击链接
5.  比较 Wireshark 中的 URL

为什么会发生这种情况，更重要的是，是否有解决方法或真正的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:19:23.543

这是一个无效的 URL。像谷歌浏览器这样的浏览器可能会欺骗开发人员，因为它们的地址栏显示解码的字符，但它们从不将这些字符发送到服务器，而是在幕后使用标准的 URL 编码。此外，当您从 Google Chrome 地址栏中复制粘贴 URL 时，丑陋的编码会将其放入剪贴板。

[URL](http://en.wikipedia.org/wiki/URL#List_of_allowed_URL_characters)中唯一允许的不带编码的字符是：

> 无保留
> 
> ```
> A B C D E F G H I J K L M N O P Q R S T U V W X Y Z a b c d e f g h i
> j k l m n o p q r s t u v w x y z 0 1 2 3 4 5 6 7 8 9 - _ . ~ 
> ```
> 
> 保留
> 有时必须编码
> 
> ```
> ! * ' ( ) ; : @ & = + $ , / ? % # [ ] 
> ```

对链接中的 URL 进行编码：

```
<a href="?pKod=BAS%C3%85R"></a> 
```

# android - 当不保留在 Setting 上选择的活动时，进度对话框不会关闭

> ID：15547901
> 
> 赞同：2
> 
> 时间：2013-03-21T12:43:10.003
> 
> 标签：android, android-intent, android-widget, android-preferences, android-progressbar

当在设置的开发人员选项进度对话框中选择“不保留活动”时，不会关闭。实际上，我正在显示 Progerss 栏，用于初始化应用程序，当我从 Activity A 到 Activity B 然后来到 Activity A 时，初始化完成后进度栏不会消失。下面是我的代码，

第一个活动

```
package com.example.donotkeepactivitiesalive;

import android.app.Activity;
import android.app.Dialog;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity {

    public static final int MESSAGE_PROGRESS_BAR_INITIALIZING = 1;
    private Dialog m_cObjDialog;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        System.out.println(getClass().getName() + "before InitializeEnvironment >>>>>>");
        new InitializeEnvironment().execute();
        System.out.println(getClass().getName() + "after InitializeEnvironment >>>>>>");
        Button lb = (Button) findViewById(R.id.button1);
        lb.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent lIntent = new Intent(MainActivity.this, SecondActivity.class);
                startActivity(lIntent);
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    protected Dialog onCreateDialog(int id) {
        m_cObjDialog = new ProgressDialog(this);
        m_cObjDialog.setTitle("Initializing");
        ((ProgressDialog) m_cObjDialog).setMessage("Initializing the Application");
        m_cObjDialog.setCancelable(false);
        return m_cObjDialog;
    }

    class InitializeEnvironment extends AsyncTask<String, String, String> {
        @Override
        protected void onPreExecute() {
            System.out.println(getClass().getName() + "onPreExecute >>>>>>");
            super.onPreExecute();
            showDialog(MESSAGE_PROGRESS_BAR_INITIALIZING);
        }

        @Override
        protected String doInBackground(String... aurl) {
            System.out.println(getClass().getName() + " doInBackground >>>>>>");
            return null;
        }

        @Override
        protected void onPostExecute(String unused) {
            dismissDialog(MESSAGE_PROGRESS_BAR_INITIALIZING);
            System.out.println(getClass().getName() + " onPostExecute >>>>>>");
        }
    }

} 
```

第二次活动

```
package com.example.donotkeepactivitiesalive;

import android.app.Activity;
import android.os.Bundle;

public class SecondActivity extends Activity{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

} 
```

即使启用了“不保留活动”，是否有任何方法可以跟踪此问题并正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:40:49.483

我解决了这个问题，通过检查 Bundle 对象是否为空。如果 Bundle 对象为空，则调用 AsynTask 类，否则不调用，

```
if(null == savedInstanceState) {
        new InitializeEnvironment().execute();
    } 
```

但请确保您之前的 Activity 没有覆盖 onActivityResult()

# php - 在 MS Windows 上创建的 php 应用程序在 Linux 上运行时可能会导致问题？

> ID：15547909
> 
> 赞同：-3
> 
> 时间：2013-03-21T12:43:25.030
> 
> 标签：php

我是 PHP 新手，在 Windows 上开发脚本（WAMP）

在将文件上传到 Linux 服务器之前我应该​​做什么？

我使用 UTF-8 作为字符集。行尾重要吗？在 MS Windows 上编写脚本时我应该选择 unix 文件结尾吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:51:59.143

注意函数名和变量名，Linux 区分大小写，Windows 不区分。例如 $test 和 $Test 在 windows 上是一样的，在 linux 系统上是不同的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:52:47.577

在`linux`目录分隔符是`/`.

在windows中两者`/`都`\`可以使用。

`Linux`也区分大小写。这是需要注意的两点。

# c - 将 Midi 序列写入文件

> ID：15547911
> 
> 赞同：3
> 
> 时间：2013-03-21T12:43:27.070
> 
> 标签：c, midi, pyportmidi

我有一个用 C 语言编写的控制台程序，它使用 PortMidi 库生成简短的随机音乐作品。最终，我想将这些序列写为 MIDI 或音频文件。

我在 portmidi 库中找到了一些关于读写函数的解释：`Pm_read()`和`Pm_write()`; 但是，没有例子，我很难理解和实现这一点。

无论如何我可以一次导出整个序列吗？

如果没有，是否需要递归读取缓冲区并保存单个 MIDI 音符？还是我需要将整个序列读入缓冲区然后保存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T02:35:24.473

PortMidi 没有任何方法可以在一个 shebang 中完成整个操作（据我所知），因此您必须手动将所有输出 MIDI 消息缓冲到一个数组中，然后将它们保存到一个文件中。一个很好的例子可以在[http://audacity.googlecode.com/svn/audacity-src/trunk/lib-src/portmidi/pm_test/sysex.c](http://audacity.googlecode.com/svn/audacity-src/trunk/lib-src/portmidi/pm_test/sysex.c)`receive_sysex()`的函数中找到。

# javascript - Javascript 字符串语法和 for 循环逻辑

> ID：15547913
> 
> 赞同：0
> 
> 时间：2013-03-21T12:43:36.803
> 
> 标签：javascript

所以我正在学习如何使用 javascript 执行循环，并且正在研究如何使用数组来执行循环。我了解如何创建数组，但我不清楚的是在循环中使用实现它。所以我遇到了那种“在循环中制造一个数组”的例子，就像我认为我在这种情况下所做的那样。

我想要做的是使用 javascript 来更改页面上不同 dom 元素的类。我不想做的是用不同的数值一遍又一遍地重复相同的代码。我以为我做的一切都是对的，但显然我没有。这是我的代码：

```
<script>
for (var i = 0; i < 11; i++) {
    var storyImageSubmit + [i] = document.getElementById('story_image_' + [i]);
    var realImageUpload + [i] = document.getElementById('realImageUpload' + [i]);

    realImageUpload + [i].addEventListener('mouseover', over_profile_image_submit_ + [i], false);
    realImageUpload + [i].addEventListener('mouseout', out_profile_image_submit_ + [i], false);
    realImageUpload + [i].addEventListener('mousedown', down_profile_image_submit_ + [i], false);
    realImageUpload + [i].addEventListener('mouseup', up_profile_image_submit_ + [i], false);

    function over_profile_image_submit_ + [i] + () {
        storyImageSubmit + [i].className = "accountSettingsBrowseSubmitHover"; 
    }
    function out_profile_image_submit_ + [i] + () {
        storyImageSubmit + [i].className = "accountSettingsBrowseSubmit"; 
    }
    function down_profile_image_submit_ + [i] + () {
        storyImageSubmit + [i].className = "accountSettingsBrowseSubmitDown"; 
    }
    function up_profile_image_submit_ + [i] + () {
        storyImageSubmit + [i].className = "accountSettingsBrowseSubmit"; 
    }
}
</script> 
```

我希望代码看起来像什么，但使用 1-10 的不同数值进行迭代，是这样的：

```
<script>
for (var i = 0; i < 11; i++) {
    var storyImageSubmit1 = document.getElementById('story_image_1');
    var realImageUpload1 = document.getElementById('realImageUpload1']);

    realImageUpload1.addEventListener('mouseover', over_profile_image_submit_1, false);
    realImageUpload1.addEventListener('mouseout', out_profile_image_submit_1, false);
    realImageUpload1.addEventListener('mousedown', down_profile_image_submit_1, false);
    realImageUpload1.addEventListener('mouseup', up_profile_image_submit_1, false);

    function over_profile_image_submit_1() {
        storyImageSubmit1.className = "accountSettingsBrowseSubmitHover"; 
    }
    function out_profile_image_submit_1() {
        storyImageSubmit1.className = "accountSettingsBrowseSubmit"; 
    }
    function down_profile_image_submit_1() {
        storyImageSubmit1.className = "accountSettingsBrowseSubmitDown"; 
    }
    function up_profile_image_submit_1() {
        storyImageSubmit1.className = "accountSettingsBrowseSubmit"; 
    }
}
</script 
```

我在这里做错了什么？

<------------更新：------------>

这是我目前的代码，在确定我需要一个数组来完成我想做的事情之后。我测试了我的数组变量循环，该部门的一切似乎都运行良好。

我现在遇到的下一个问题是让 javascript 不要重写我每次迭代定义的监听变量。我决定最好的方法是消除循环中的任何变量，以便每次监听和函数执行都是独一无二的。我这样做是假设重写我的变量是它不起作用的原因。但即使这样做了，它也行不通。

```
<script>
var storyImageValue = ["1","2","3","4","5","6","7","8","9","10"];
for (var i = 0; i < storyImageValue.length; i++) {
    document.getElementById('realImageUpload' + storyImageValue[i]).addEventListener('mouseover', function () { document.getElementById('storyImageSubmit' + storyImageValue[i]).className = "accountSettingsBrowseSubmitHover"; }, false);
} 
```

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:51:15.630

尝试这样的事情：

```
for (var i = 1; i <= 10; i++) {
    var storyImage = document.getElementById('story_image_' + i);
    var realImage = document.getElementById('realImageUpload' + i);

    realImage.addEventListener('mouseover', function () { storyImage.className = "..."; }, false);
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:46:00.310

如果您在 JavaScript 中有一个数组，那么您可以使用 for-loop 构造对其进行迭代：

```
var arr = [1, 2, 3], i, element;
for (i = 0; i < arr.length; ++i) {
    element = arr[i];
    // Now do whatever you want with element within this loop.
} 
```

* * *

**根据您的评论**更新：****

 **您在注释中的代码中发生的情况是该变量`i`的范围没有正确地用于您的目的。问题是，在 JavaScript 中，没有块作用域，只有函数作用域......

这意味着无论何时调用您的事件侦听器函数，它都会获取 的值，`i`但该值始终是循环中使用的最后一个值..在本例中为 10。

试试这样：

```
var storyImageValue = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10"];

for (var i = 0; i < storyImageValue.length; i++) {
  (function (index) {
    document.getElementById('realImageUpload' + storyImageValue[index]).addEventListener('mouseover', function () {
        document.getElementById('storyImageSubmit' + storyImageValue[index]).className = "accountSettingsBrowseSubmitHover";
    }, false);
  }(i));
} 
```

我正在做的是创建一个函数，它接受一个参数（在我们的例子中代表循环索引），它在声明后立即调用自身，传入循环计数器的当前值`i`。

这是因为我之前提到的范围界定。由于 JavaScript 不支持块作用域，而仅支持函数作用域，因此创建一个立即调用自身的函数将创建您需要存储循环计数器的作用域，以便在执行事件侦听器函数后，它将访问正确的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:55:23.333

在 JQuery 中，您可以使用以下语法来解析 javascript 数组：

$.each(curVal, function(i, array){

警报（curVal）；
});**

# asp.net - 如何转置 ASP.NET ListView 网格布局？

> ID：15547921
> 
> 赞同：1
> 
> 时间：2013-03-21T12:43:52.703
> 
> 标签：asp.net, .net, listview

我是 ASP.NET 的新手，正在尝试创建重复的 detailsview 类型格式。我的意思是第一列是标题类型列，后续列是数据记录。

> 记录 Rec1 Rec 2 Rec3
> 标题 A Fld A Fld A Fld A
> 标题 B Fld B Fld B Fld B

[基于此示例](http://aspnet.4guysfromrolla.com/articles/010208-1.aspx)，我尝试了以下几个迭代：

```
 <asp:ListView ID="ListView2" runat="server" DataKeyNames="FldA" DataSourceID="EntityRecordSource" GroupItemCount="3">     
    <LayoutTemplate>
        <table id="Table1" runat="server">
            <tr id="Tr21" runat="server">
                <td id="Td1" runat="server">
                    <table id="Table2" runat="server" border="0" style="">
                        <tr id="Tr1" runat="server" style="">
                            <th id="Th1" runat="server"></th>
                        </tr>
                        <tr id="Tr2" runat="server" style="">
                            <th id="Th2" runat="server">FldA</th>
                        </tr>
                        <tr id="Tr3" runat="server" style="">
                            <th id="Th3" runat="server">FldB</th>
                        </tr>
                        <tr id="Tr4" runat="server" style="">
                            <th id="Th4" runat="server">FldC</th>
                        </tr>                            
                    </table>
                </td>
                <td>
                    <table>
                        <asp:PlaceHolder runat="server" ID="groupPlaceHolder"></asp:PlaceHolder>
                    </table>
                </td>
            </tr>
            <tr id="Tr22" runat="server">
                <td id="Td2" runat="server" style="">
                    <asp:DataPager ID="DataPager1" runat="server">
                        <Fields>
                            <asp:NextPreviousPagerField ButtonType="Button" ShowFirstPageButton="True" ShowLastPageButton="True" />
                        </Fields>
                    </asp:DataPager>
                </td>
            </tr>
        </table>
    </LayoutTemplate>
    <GroupTemplate >            
        <tr id="Tr1" runat="server" style="">                
            <asp:PlaceHolder runat="server" ID="itemPlaceHolder1"></asp:PlaceHolder>
        </tr>
        <tr id="Tr2" runat="server" style="">
            <asp:PlaceHolder runat="server" ID="itemPlaceHolder2"></asp:PlaceHolder>
        </tr>
        <tr id="Tr3" runat="server" style="">
            <asp:PlaceHolder runat="server" ID="itemPlaceHolder3"></asp:PlaceHolder>
        </tr>
    </GroupTemplate>
    <ItemTemplate>
            <td>
                <asp:Label ID="FldALabel" runat="server" Text='<%# Eval("FldA") %>' />
            </td>
            <td>
                <asp:Label ID="FldBLabel" runat="server" Text='<%# Eval("FldB") %>' />
            </td>
            <td>
                <asp:Label ID="FldCLabel" runat="server" Text='<%# Eval("FldC") %>' />
            </td>                
    </ItemTemplate>
</asp:ListView> 
```

但是，这会导致错误说明：

> System.Web.UI.HtmlControls.HtmlTableCellCollection 必须具有“System.Web.UI.HtmlControls.HtmlTableCell”类型的项目。“asp:PlaceHolder”的类型为“System.Web.UI.WebControls.PlaceHolder”。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-16T20:20:54.877

我想要基本相同的东西，这是我为完成此任务而编写的方法：

```
 internal static void TransposeListview(ListView lv)
    {
        if (lv.Items.Count == 0)
            throw new ArgumentException("ListView has no items, so values cannot be transposed.", "lv");

        // first, convert the column headers into a first row
        var columnHeaderValues = (from ColumnHeader ch in lv.Columns select ch.Text).ToArray();
        lv.Items.Insert(0, new ListViewItem(columnHeaderValues, 0));

        var cols = lv.Columns.Count;
        var rows = lv.Items.Count;

        // create a list of ListViewSubItem arrays, to hold the target values
        var lvsiArrayList = new List<ListViewItem.ListViewSubItem[]>();

        for (var i = 0; i <= cols - 1; i++)
        {
            var lvsiArray = new ListViewItem.ListViewSubItem[rows];
            for (var j = 0; j <= rows - 1; j++)
                lvsiArray[j] = lv.Items[j].SubItems[i];
            lvsiArrayList.Add(lvsiArray);
        }

        // now clear the whole ListView, and create the items and subitems using flipped row/column indexes
        lv.Clear();

        foreach (var lvsiArray in lvsiArrayList)
            lv.Items.Add(new ListViewItem(lvsiArray, 0));

        // last, convert the first row into column headers
        columnHeaderValues = (from ListViewItem.ListViewSubItem lvsi in lv.Items[0].SubItems select lvsi.Text).ToArray();
        for (var j = 0; j <= rows - 1; j++)
            lv.Columns.Add(columnHeaderValues[j]);
        lv.Items.RemoveAt(0);

    } 
```

# javascript - 如何绑定在 jquery 调用函数的选择菜单中定义的 onchange 事件？

> ID：15547923
> 
> 赞同：1
> 
> 时间：2013-03-21T12:43:55.367
> 
> 标签：javascript, jquery, select, xhtml, bind

我正在尝试使用以下插件实现克隆选择菜单：

[https://github.com/afEkenholm/ScrollectBox](https://github.com/afEkenholm/ScrollectBox)

[https://github.com/afEkenholm/ScrollectBox/blob/master/index.html](https://github.com/afEkenholm/ScrollectBox/blob/master/index.html)

[https://github.com/afEkenholm/ScrollectBox/blob/master/js/ScrollectBox/jquery.scrollectbox.js](https://github.com/afEkenholm/ScrollectBox/blob/master/js/ScrollectBox/jquery.scrollectbox.js)

但我无法绑定`onchange`在 jquery 调用函数中的以下选择菜单中定义的事件。

```
 <select onchange="function(this);" id="selector" class="selection" >
    <option value="" selected="Select Topic">Select Topic</option> 
    <option value="Food">Food</option>
    <option value="Drink">Drink</option>
    </select> 
```

如何绑定`onchange="function(this);"`以下调用函数？

```
<script type="text/javascript">
jQuery(document).ready(function($){ 
   $(".selection").scrollectBox({
    preset: 'dropdown',
    numVisibleOptions: 4,
    scrollInterval: 150, 
    scrollOn: 'hover'
    });
});
</script> 
```

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:46:41.993

在 jQuery 中使用链接。

```
$(".selection").scrollectBox({
    preset: 'dropdown',
    numVisibleOptions: 4,
    scrollInterval: 150, 
    scrollOn: 'hover'
}).on('change', function() {
    // this
}); 
```

# mootools - Mootools 注入在 ul 上不起作用正确

> ID：15547931
> 
> 赞同：0
> 
> 时间：2013-03-21T12:44:18.500
> 
> 标签：mootools, inject

在页面中，我有该代码：

```
<ul>
<li>Name 1</li>
<li>Name 2</li>
<li>Name 3</li>
<li>Name 4</li>
<li id="beforeInsert"></li>
</ul> 
```

我尝试注入其中一些代码：

```
<li>Name 5</li>
<li>Name 6</li>
<li>Name 7</li> 
```

`<li id="beforeInsert"></li>`在具有该功能的元素之前：

```
html.inject("beforeInsert", "before"); 
```

但是这个函数只是`<li>`从我的第二个列表中添加第一个元素，在`<ul>`块中。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:52:27.560

注入功能适用于 mootools dom 元素。所以你可以做这样的事情：

```
var el_before = document.id('beforeInsert');
[5,6,7].each(function(num){
   var li = new Element('li').set('html','Name ' + num);
   li.inject(el_before,'before');
}); 
```

[jsfiddle](http://jsfiddle.net/QrEJY/)

# javascript - 代码适用于 http://jsfiddle.net 但不适用于 http://liveweave.com

> ID：15547932
> 
> 赞同：1
> 
> 时间：2013-03-21T12:44:19.797
> 
> 标签：javascript, jquery, google-maps, jsfiddle

我有一个谷歌地图应用程序，它在谷歌地图中绘制一条线路径，该代码在[http://jsfiddle.net](http://jsfiddle.net)中完美运行，但似乎在[http://liveweave.com上不起作用](http://liveweave.com)

jsfiddle 中的工作代码如下所示。

[**JSFIDDLE**](http://jsfiddle.net/vPzPj/2/)

**[现场编织](http://liveweave.com/cmDd3f)**

这是我的代码

```
<!DOCTYPE html>
<html>
    <head>

        <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.js"></script>
<style type="text/css">
    #map_canvas {
    width:550px;
    height:400px;
}
</style>

<link href="http://code.google.com/apis/maps/documentation/javascript/examples/standard.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
        <script type="text/javascript"> 
       function initialize(){
       var center= new google.maps.LatLng(10.012552,76.327043);
       var myOptions = {
                zoom: 16,
                center: center,
                mapTypeControl: true,
                mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
                navigationControl: true,
                mapTypeId: google.maps.MapTypeId.ROADMAP
       }     
      var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

      var polylineCoordinates = [
            new google.maps.LatLng(10.013566,76.331549),
            new google.maps.LatLng(10.013566,76.331463),
            new google.maps.LatLng(10.013503,76.331313),
            new google.maps.LatLng(10.013482,76.331205),
            new google.maps.LatLng(10.013419,76.330926),
            new google.maps.LatLng(10.013334,76.330712),
            new google.maps.LatLng(10.013313,76.330411),
            new google.maps.LatLng(10.013292,76.330175),
            new google.maps.LatLng(10.013228,76.329854),
            new google.maps.LatLng(10.013144,76.329553),
            new google.maps.LatLng(10.013059,76.329296),
            new google.maps.LatLng(10.012996,76.329017),
            new google.maps.LatLng(10.012869,76.328802),
            new google.maps.LatLng(10.012785,76.328545),
            new google.maps.LatLng(10.012700,76.328223),
            new google.maps.LatLng(10.012679,76.328030),
            new google.maps.LatLng(10.012658,76.327837),
            new google.maps.LatLng(10.012637,76.327600),
            new google.maps.LatLng(10.012573,76.327322),
            new google.maps.LatLng(10.012552,76.327043),
            new google.maps.LatLng(10.012552,76.326807),
            new google.maps.LatLng(10.012510,76.326613),
            new google.maps.LatLng(10.012447,76.326399),
            new google.maps.LatLng(10.012404,76.326227),
      ];

            marker = new google.maps.Marker({
            position: new google.maps.LatLng(10.012404,76.32622),
            icon: {
                path: google.maps.SymbolPath.CIRCLE,
                scale: 3.5,
                strokeColor: '#FF3300'   
            },
            draggable: true,
            map: map
            });          
      var polyline = new google.maps.Polyline({
          path: polylineCoordinates,
          strokeColor: '#5C5CE6',
          strokeOpacity: 2.0,
          strokeWeight: 5,
          editable: false
      });

      polyline.setMap(map);    

}
initialize();

        </script>
    </head>
    <body>
        <div id="map_canvas" ></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:52:44.053

这是因为脚本的执行方式。Jsfiddle 设置了 onDomready 设置，因此它会在 dom 加载时执行 javascript。我在 liveweave 中没有看到类似的选项。

而不是放置`initialize();`在脚本的末尾，将函数添加到 body 标签的 onload 属性中。

`<body onload="initialize();">`

示例： http: [//liveweave.com/Dj5fSM](http://liveweave.com/Dj5fSM)

# javascript - html表格可编辑

> ID：15547940
> 
> 赞同：5
> 
> 时间：2013-03-21T12:44:32.763
> 
> 标签：javascript, jquery, html

我有一个非常简单的表结构

```
<table width='50%' id='tabs'>
<tr><td>1</td><td>5</td><td>6</td></tr>
<tr><td>2</td><td>2</td><td>2</td></tr>
<tr><td>3</td><td>2</td><td>2</td></tr>
</table> 
```

这是我使表格可编辑的简单脚本，这工作正常，但我发现它很慢而且代码效率不高。我想改进这段代码。顺便说一下，我正在使用 jquery 1.3.2

```
var z={};
function tdClicks(){
var x="",y="";
$("table tr td").click(function(){
    z=$(this);
    x = $(this).text() || $(this).find("input[type='text']").val();
    if(!x){
        x="";
    }
    $(this).html("<input type='text' size='5' value='"+ x+"' />");
    $(this).unbind("click");
    $(this).find("input[type='text']").bind("blur", function(){
        catchme($(this).val());
        tdClicks();
    });
});
}

function catchme(wht){
    $(z).text(wht);
}

tdClicks(); 
```

请在此处查看[JS FIDDLE](http://jsfiddle.net/v7znh/6/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:09:33.257

试试这个

```
$("table tr td").on('blur',"input[type='text']", function( e ){

    $(this).closest('td').text( 
        $(this).val()
    );
});

$("table").on('click','td', function( e ){

   if ( $(this).find('input').length ) {
       return ;   
   }    

   var input = $("<input type='text' size='5' />")
                  .val( $(this).text() );

   $(this).empty().append( input );

}); 
```

你可以找到它小提琴[http://jsfiddle.net/v7znh/13/](http://jsfiddle.net/v7znh/13/)

* * *

作为用户评论，我已经更新了 jquery 1.3 的代码

```
$("table td").click( function( e ){

    if ( $(this).find('input').length ) {
         return ;   
    }        
    var input = $("<input type='text' size='5' />")
                      .val( $(this).text() );

    $(this).empty().append( input );

    $(this).find('input')
           .focus()
           .blur( function( e ){
                  $(this).parent('td').text( 
                     $(this).val()
                  );
            });    
}); 
```

检查这个[http://jsfiddle.net/v7znh/16/](http://jsfiddle.net/v7znh/16/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T12:59:32.217

这似乎更干净一些

```
$("table").on("click", "td:not(.active)", function () {    
    var $this = $(this);
    var $textbox = $("<input>", { type: "text", size: 5, value: $this.addClass("active").text() });
    $this.html($textbox);
    $textbox.focus();    
});

$("table").on("blur", "input:text", function () {        
    var $this = $(this);
    $this.parent().removeClass("active").text($this.val());
}); 
```

* * *

[http://jsfiddle.net/hunter/v7znh/12/](http://jsfiddle.net/hunter/v7znh/12/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T13:10:14.940

你可以使用`contenteditable`属性

javascript

```
$("table tr td").attr("contenteditable", true); 
```

[例子](http://jsfiddle.net/axrwkr/kzUgS)

要在 Internet Explorer 中进行这项工作，请使用以下命令

```
$("table tr td").each(function() {
    var contents = $(this).html();
    $(this).html($("<div>").append(contents));
});
$("table tr td div").attr("contenteditable", true); 
```

[例子](http://jsfiddle.net/axrwkr/TvBhz)

看看这个问题了解更多详情

[如何使 HTML 表格单元格可编辑？](https://stackoverflow.com/questions/6012823/how-to-make-html-table-cell-editable)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-21T12:56:24.600

也许它可以帮助：

```
$(function(){  
  var x="",y="";
  $("table tr td").click(function(){
    x = $(this).text() || $(this).find("input[type='text']").val();
    if(!x){
       x="";
    }
    $(this).html("<input type='text' size='5' value='"+ x+"' />");
    $(this).unbind("click");
    $(this).find("input[type='text']").bind("blur", function(){
      $(this).text($(this).val());
    });
  });
}); 
```

祝你好运

# qt - Qt 布局未扩展

> ID：15547946
> 
> 赞同：2
> 
> 时间：2013-03-21T12:44:39.463
> 
> 标签：qt, qlayout

我有一个 Qt 小部件，它有一个框架，包含其余的小部件。

我只希望其中一个小部件在最大化窗口时展开，所以我为其他小部件设置了最大值。

但它只会在我为框架设置网格布局时扩展，这会弄乱小部件的位置。

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:12:17.180

你使用任何类型的布局吗？大小策略仅在父级设置了布局时才有效。

您可以使用不同布局的组合来获得所需的外观，否则您将不得不在父级的 resize 事件方法中自己计算“扩展小部件”的大小。

# html - CSS 宽度 100% - X px

> ID：15547947
> 
> 赞同：0
> 
> 时间：2013-03-21T12:44:47.347
> 
> 标签：html, css, css-float, fluid-layout, fixed-width

我有一个具有固定右列的流畅布局，但我无法让它正常工作。

这是我的网站：（`http://65.39.128.45/~jpretty/gallery/mimesis/test-product/`为什么链接不能包含 IP？）

忽略左列，这无关紧要。将主要大图像视为内容，将相关图像视为右列。

我发现了这一点，并实施了它。它有所帮助但并没有完全解决它：

[http://www.dynamicdrive.com/style/layouts/category/C13/](http://www.dynamicdrive.com/style/layouts/category/C13/)

在我目前的努力阶段，问题是主图像没有填充 100% 的容器（100%，减去侧边栏的 300 像素）。我还需要它来保持两者之间的固定间距（30px）

HTML：

```
<div class="imagecol portrait">
    <div class="mainimg">
        <img class="product_image" id="product_image_15" alt="Test Product" title="Test Product" src="http://65.39.128.45/~jpretty/wp-content/uploads/2013/03/url.jpg">
    </div>

    <div class="products_list clearfix related-products">

        <div class="product">
            <img src="http://65.39.128.45/~jpretty/wp-content/uploads/2013/03/YugoslavianCamo-200x200.jpg" title="Product 01" alt="Product 01">
            <p>Product 01</p>
        </div>

        <div class="product">
            <img src="http://65.39.128.45/~jpretty/wp-content/uploads/2013/03/animals-2-200x200.jpg" title="Product 03" alt="Product 03">
        </div>

        <div class="product">
            <img src="http://65.39.128.45/~jpretty/wp-content/uploads/2013/03/url-200x200.jpg" title="Test Product" alt="Test Product">
        </div>
    </div>
</div> 
```

一些CSS：

```
.single_product_display .imagecol{
    width:77%;
    float:right;
    margin:0;
}
.imagecol .mainimg{
    width:100%;
    float:left;
}
.imagecol .product_image{
    margin-right: 330px;
    cursor:default !important;
}
.imagecol.portrait .products_list{
    margin: 0px 0 0 -330px;
    float: left;
    width: 300px;   
}
.imagecol .products_list .product{
    margin:0 5px 5px 0;
    width: 145px;
    height: auto;
} 
```

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:03:38.927

我的建议是让您采用完全响应式布局。找到最接近右列宽度的父元素的 % 宽度。只使用 %'s 作为宽度和边距，并确保所有这些的总和等于 100%。例如：

**在下图中，每个 * 代表布局总宽度的 5%。**

```
|****|*|**********|*|****|
|    | |          | |    |
|    | |          | |    |
|20% |5|    50%   |5|20% |
|    |%|          |%|    |
|    | |          | |    |
|****|*|**********|*|****| 
```

***20 + 5 =25 + 50 = 75 + 20 = 95 + 5 = 100%***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:49:41.527

这是因为你有这个 CSS 规则：

```
.imagecol.portrait .product_image {
    width: 55%;
} 
```

这会迫使您的图像跨越其容器的 55%。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:00:42.413

我设法解决了这个问题，问题是它的`<img>`扩展方式`<div>`与教程中的扩展方式不同（[http://www.dynamicdrive.com/style/layouts/category/C13/](http://www.dynamicdrive.com/style/layouts/category/C13/)）。解决方案涉及将主图像包装在另一个中`<div>`所以HTML变成了这样：

```
<div class="imagecol portrait">
    <div class="imagecolwrapper">
        <div class="mainimg">
            <img class="product_image" id="product_image_15" alt="Test Product" title="Test Product" src="http://65.39.128.45/~jpretty/wp-content/uploads/2013/03/url.jpg">
        </div>
    </div>

    <div class="products_list clearfix related-products">

        <div class="product">
            <img src="http://65.39.128.45/~jpretty/wp-content/uploads/2013/03/YugoslavianCamo-200x200.jpg" title="Product 01" alt="Product 01">
            <p>Product 01</p>
        </div>

        <div class="product">
            <img src="http://65.39.128.45/~jpretty/wp-content/uploads/2013/03/animals-2-200x200.jpg" title="Product 03" alt="Product 03">
        </div>

        <div class="product">
            <img src="http://65.39.128.45/~jpretty/wp-content/uploads/2013/03/url-200x200.jpg" title="Test Product" alt="Test Product">
        </div>
    </div>
</div> 
```

CSS变成了这样：

```
.single_product_display .imagecol{
    width:77%;
    float:right;
    margin:0;
}
.imagecol .imagecolwrapper{
    width:100%;
    float:left;
}
.imagecol .mainimg{
    margin-right: 330px;
}
.imagecol .product_image{
    width:100%;
    cursor:default !important;
}
.imagecol.portrait .products_list{
    margin: 0px 0 0 -300px;
    float: left;
    width: 300px;   
} 
```

# java - contains() 方法的问题

> ID：15547956
> 
> 赞同：0
> 
> 时间：2013-03-21T12:45:20.003
> 
> 标签：java, contains

我正在使用`contains()`方法编写一个简单的代码，但问题是如果我将一个字符串数组放在`contains()`方法的参数中，程序什么也不做（没有错误）。因此，它只需要遍历一个字符串数组并查看它是否包含来自第二个数组的元素。我尝试在论点中使用一个词，效果很好。数组不为空，我可以打印它们。那么，有什么建议吗？

这是代码的一部分：

```
 for(int i = 0; i < farbe.length; i++) {
            for(int j = 1; j < names.length; j++) {
                if(names[j].contains(farbe[i])) {
                    System.out.println(names[j]+"\t"+"yes");
                }
            }
        } 
```

数组元素从 .*txt 文件中读取。因此，'names' 数组包含单词序列，而 'color' 数组包含颜色。数组中的部分：

名称：

> Herrenlederjacke >>Collins
> Herrenstoffjacke >>M H7 4B
> 9-LV (schwarz | 54)
> 9-LV (schwarz | 52)
> Tunika-Lederkleid >>9519

颜色：

> 米色
> 布劳恩施瓦茨
> _

数组很大，所以我只放了一小部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:48:18.160

您的问题可能是 java 数组从索引 0 开始。此外，您的大括号在 contains 行中放错了位置。尝试 ：

```
for(int i = 0; i < farbe.length; i++){
    for(int j = 0; j < names.length; j++){
            if(Arrays.asList(names[j].contains(farbe[i]))){
                System.out.println(names[j]+"\t"+"yes");
            }
                             } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:51:13.557

假设文件中的每一行都是数组中的单独元素，我们将拥有

```
String[] names={
        "Names:",
        "Herrenlederjacke >>Collins",
        "Herrenstoffjacke >>M H7 4B",
        "9-LV (schwarz | 54)",
        "9-LV (schwarz | 52)",
        "Tunika-Lederkleid >>9519"
};
String[] farbe={
        "beige",
        "braun",
        "schwarz",
}; 
```

要检查存在哪种颜色，`names`您可以使用此代码

```
for (String color : farbe) {//will iterate over all colors
    namesLoop:
    for(String name :names){//will iterate over all names
        if (name.contains(color)){
            System.out.println(color+"\t yes");
            break namesLoop;//we found this color, we can skip to next one
        }
    }
} 
```

# c# - 打印数据表的内容

> ID：15547959
> 
> 赞同：36
> 
> 时间：2013-03-21T12:45:33.850
> 
> 标签：c#, sql-server, datatable

目前我有通过 SQL 连接查找数据库表并将前五行插入数据表（表）的代码。

```
using(SqlCommand _cmd = new SqlCommand(queryStatement, _con))
{
    DataTable Table = new DataTable("TestTable");

    SqlDataAdapter _dap = new SqlDataAdapter(_cmd);

    _con.Open();
    _dap.Fill(Table);
    _con.Close();
} 
```

然后如何将此表的内容打印到控制台以供用户查看？

在挖掘之后，我是否可以将内容绑定到列表视图，或者有没有办法直接打印它们？在这个阶段我不关心设计，只关心数据。

任何指针都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-21T12:49:25.087

你可以试试这段代码：

```
foreach(DataRow dataRow in Table.Rows)
{
    foreach(var item in dataRow.ItemArray)
    {
        Console.WriteLine(item);
    }
} 
```

**更新 1**

```
DataTable Table = new DataTable("TestTable");
using(SqlCommand _cmd = new SqlCommand(queryStatement, _con))
{
    SqlDataAdapter _dap = new SqlDataAdapter(_cmd);
    _con.Open();
    _dap.Fill(Table);
    _con.Close();

}
Console.WriteLine(Table.Rows.Count);
foreach(DataRow dataRow in Table.Rows)
{
    foreach(var item in dataRow.ItemArray)
    {
        Console.WriteLine(item);
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-07-17T20:52:24.150

这是另一种将表格转储为逗号分隔字符串的解决方案：

```
using System.Data;

public static string DumpDataTable(DataTable table)
        {
            string data = string.Empty;
            StringBuilder sb = new StringBuilder();

            if (null != table && null != table.Rows)
            {
                foreach (DataRow dataRow in table.Rows)
                {
                    foreach (var item in dataRow.ItemArray)
                    {
                        sb.Append(item);
                        sb.Append(',');
                    }
                    sb.AppendLine();
                }

                data = sb.ToString();
            }
            return data;
        } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-09-16T02:12:28.733

正确的表格显示

```
static void print_results(DataTable data)
    {
        Console.WriteLine();
        Dictionary<string, int> colWidths = new Dictionary<string, int>();

        foreach (DataColumn col in data.Columns)
        {
            Console.Write(col.ColumnName);
            var maxLabelSize = data.Rows.OfType<DataRow>()
                    .Select(m => (m.Field<object>(col.ColumnName)?.ToString() ?? "").Length)
                    .OrderByDescending(m => m).FirstOrDefault();

            colWidths.Add(col.ColumnName, maxLabelSize);
            for (int i = 0; i < maxLabelSize - col.ColumnName.Length + 10; i++) Console.Write(" ");
        }

        Console.WriteLine();

        foreach (DataRow dataRow in data.Rows)
        {
            for (int j = 0; j < dataRow.ItemArray.Length; j++)
            {
                Console.Write(dataRow.ItemArray[j]);
                for (int i = 0; i < colWidths[data.Columns[j].ColumnName] - dataRow.ItemArray[j].ToString().Length + 10; i++) Console.Write(" ");
            }
            Console.WriteLine();
        }
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-05-16T10:06:05.547

这是由包含单个表的数据表完成的

```
 SqlConnection con = new SqlConnection(constr);
        con.Open();
        SqlCommand cmd = new SqlCommand("select * from info", con);
        SqlDataAdapter ad = new SqlDataAdapter(cmd);

        DataTable dt = new DataTable();
        ad.Fill(dt);
        Console.WriteLine(dt.Columns[0].ColumnName.ToString());
        Console.WriteLine(dt.Rows[1].ItemArray[0].ToString()); 
```

这是由包含一组表的数据集完成的

```
 SqlConnection con = new SqlConnection(constr);
        con.Open();
        SqlCommand cmd = new SqlCommand("select * from info", con);
        SqlDataAdapter ad = new SqlDataAdapter(cmd);

        DataSet dt = new DataSet();
        ad.Fill(dt);
        Console.WriteLine(dt.Tables[0].Columns[0].ColumnName.ToString());
        Console.WriteLine(dt.Tables[0].Rows[0].ItemArray[0].ToString()); 
```

两者都会给出相同的结果。只有数据集包含表的索引数。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-05-02T11:31:52.960

```
foreach (DataRow dr in myDataTable.Rows)
{
    foreach (var item in dr.ItemArray)
    {
        Console.Write(item + " ");
    }
    Console.WriteLine();
} 
```

* * *

¹以前的答案与此类似，但没有明确格式化行条目和单元格之间的分隔

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-24T11:37:43.407

**打印带列的数据表内容行**

```
Here is solution 

DataTable datatableinfo= new DataTable();

// Fill data table 

//datatableinfo=fill by function or get data from database

//Print data table with rows and column

for (int j = 0; j < datatableinfo.Rows.Count; j++)
{
    for (int i = 0; i < datatableinfo.Columns.Count; i++)    
        {    
            Console.Write(datatableinfo.Columns[i].ColumnName + " ");    
            Console.WriteLine(datatableinfo.Rows[j].ItemArray[i]); 
        }
}

Ouput :
ColumnName - row Value
ColumnName - row Value
ColumnName - row Value
ColumnName - row Value 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-10-22T15:06:12.497

使用以下扩展方法 (C# 9.0)：

```
/// <summary>
/// Provides extension methods for the <see cref="DataTable"/> type.
/// </summary>
public static class DataTableExtensions
{
    /// <summary>
    /// Generates a textual representation of <paramref name="table"/>.
    /// </summary>
    /// <param name="table">The table to print.</param>
    /// <returns>A textual representation of <paramref name="table"/>.</returns>
    public static String Print(this DataTable table)
    {
        String GetCellValueAsString(DataRow row, DataColumn column)
        {
            var cellValue = row[column];
            var cellValueAsString = cellValue is null or DBNull ? "{{null}}" : cellValue.ToString();

            return cellValueAsString;
        }

        var columnWidths = new Dictionary<DataColumn, Int32>();

        foreach (DataColumn column in table.Columns)
        {
            columnWidths.Add(column, column.ColumnName.Length);
        }

        foreach (DataRow row in table.Rows)
        {
            foreach (DataColumn column in table.Columns)
            {
                columnWidths[column] = Math.Max(columnWidths[column], GetCellValueAsString(row, column).Length);
            }
        }

        var resultBuilder = new StringBuilder();

        resultBuilder.Append("| ");

        foreach (DataColumn column in table.Columns)
        {
            resultBuilder.Append(column.ColumnName.PadRight(columnWidths[column]));
            resultBuilder.Append(" | ");
        }

        resultBuilder.AppendLine();

        foreach (DataRow row in table.Rows)
        {
            resultBuilder.Append("| ");

            foreach (DataColumn column in table.Columns)
            {
                resultBuilder.Append(GetCellValueAsString(row, column).PadRight(columnWidths[column]));
                resultBuilder.Append(" | ");
            }

            resultBuilder.AppendLine();
        }

        return resultBuilder.ToString();
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-07T15:13:47.947

基于此处的另一个答案，这是一种将 DataTable 转换为 CSV 输出并将列名添加为输出中的第一行的方法：

```
public static string DataTableToCsv(DataTable table)
{
    string result = string.Empty;
    StringBuilder resultBuilder = new StringBuilder();

    if (table != null && table.Rows != null && table.Columns != null && table.Columns.Count > 0)
    {
        int lastItemIndex = table.Columns.Count - 1;
        int index = 0;

        foreach (DataColumn column in table.Columns)
        {
            resultBuilder.Append(column.ColumnName);

            if (index < lastItemIndex)       // if not the last element in the row
                resultBuilder.Append(", ");  // add the separator

            index++;
        }

        resultBuilder.AppendLine();  // add a CRLF after column names row

        foreach (DataRow dataRow in table.Rows)
        {
            lastItemIndex = dataRow.ItemArray.Length - 1;
            index = 0;

            foreach (object item in dataRow.ItemArray)
            {
                resultBuilder.Append(item);

                if (index < lastItemIndex)       // if not the last element in the row
                    resultBuilder.Append(", ");  // add the separator

                index++;
            }

            resultBuilder.AppendLine();  // add a CRLF after each data row
        }

        result = resultBuilder.ToString();
    }

    return result;
} 
```

使用示例：

```
DataTable table = new DataTable();
....
Console.WriteLine(DataTableToCsv(table)); 
```

请注意，此方法不能正确处理（即转义）包含引号或逗号的数据。但它应该足以作为一种快速而肮脏的方式将数据表转储到控制台或其他任何地方进行查看。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-24T00:31:08.320

使用以下扩展方法。

```
public static string ToCSV(this DataTable t, bool header)
{
    StringBuilder sb = new StringBuilder();
    int i = 0;
    int maxColIdx = 0;

    if (t?.Columns?.Count > 0)
    {
        maxColIdx = t.Columns.Count - 1;
        if (header)
        {
            foreach (DataColumn c in t.Columns)
            {
                sb.Append(c.ColumnName);
                if (i < maxColIdx) sb.Append(", ");
                i++;
            }
            sb.AppendLine();
        }

        if (t?.Rows?.Count > 0)
        {
            foreach (DataRow r in t.Rows)
            {
                i = 0;
                foreach (var item in r.ItemArray)
                {
                    sb.Append(item);
                    if( i < maxColIdx) sb.Append(',');
                    i++;
                }
                sb.AppendLine();
            }
        }
    }           
    return sb.ToString();
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-10T19:44:55.437

打印 DataTable 和 DataRow 的函数。

```
 private void printDataTable(DataTable Table)
    {
        foreach (DataRow dataRow in Table.Rows)
        {
            printDataRow(dataRow);
        }
    }

    private void printDataRow(DataRow drow)
    {

        StringBuilder sb = new StringBuilder();

        sb.AppendLine(string.Join(",", drow.ItemArray));
        Console.WriteLine(sb);

    } 
```

# javascript - jquery-ui-combify 定位

> ID：15547960
> 
> 赞同：0
> 
> 时间：2013-03-21T12:45:37.100
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-ui-autocomplete

我正在使用`jquery.ui.combify`.

以下是我的`HTML`文件：

```
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.0/themes/base/jquery-ui.css" type="text/css" media="all" />
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min.js"></script>
        <link rel="stylesheet" type="text/css" href="jqgridcss/jquery.ui.combify.css" />
        <script type="text/javascript" src="jqgridjs/jquery.ui.combify.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $("#MySelect").combify();
            $("#MySelect2").combify();
        });
    </script>
    </head>
    <select id="MySelect">
        <option>Some Option</option>
        <option>Some Other Option</option>
    </select>
    <select id="MySelect2">
        <option>Some Option</option>
        <option>Some Other Option</option>
    </select>
</html> 
```

我有两个`combo-boxes`，我想在一行中显示，但是我将这两个`combo-boxes`放在不同的行中。

这是`combo-boxes`应该如何出现的：

![选择1](../Images/a5261654fa91215167945953673e4431.png)

但它们看起来像：

![在此处输入图像描述](../Images/1464319911a09c04b763eb425d21989b.png)

所以让我知道是否有解决方案。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:10:09.697

```
#MySelect{float:left;}
#MySelect2{float:left;} 
```

使用`float:left`或`float:right`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:04:22.060

试试这个代码....

```
<html>
<body>
    <table>
    <tr>
     <td><select id="MySelect">
            <option>Some Option</option>
            <option>Some Other Option</option>
        </select> 
     </td>
    <td>
    <select id="MySelect2">
            <option>Some Option</option>
            <option>Some Other Option</option>
        </select>
    </td>
    </tr>
    </body>
</html> 
```

# javascript - 执行在 TypeError 之后立即停止：document.getElementById(...) is null

> ID：15547961
> 
> 赞同：-3
> 
> 时间：2013-03-21T12:45:38.023
> 
> 标签：javascript

我正在尝试编写一段 JavaScript 代码，让我可以使用箭头在博客文章中来回切换。

我认为最简单和最简单的方法是`id`在锚点中添加标签，这些标签会转到上一个-下一个帖子，然后让 JavaScript`href`从锚点中读取。

我用谷歌搜索并让它工作——我相信我在这里找到了答案——但我有这个问题——代码在第一篇文章中不起作用。我认为这是因为没有`prev`id，我得到一个`TypeError: document.getElementById(...) is null`. 这以某种方式停止了代码的执行，而且我也无法获得`href`id `prev`。

我该如何解决？

这是一个 HTML 演示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>

    <script type="text/javascript">
        var nextpage;
        var prevpage;

        window.onload=function()
        {
            prevpage = document.getElementById("prev").getAttribute("href");
            nextpage = document.getElementById("next").getAttribute("href");
        }

        document.onkeydown = function(evt)
        {
            evt = evt || window.event;
            switch (evt.keyCode)
            {
                case 37:
                    if (typeof prevpage !== 'undefined') window.location = prevpage;
                    break;
                case 39:
                    if (typeof nextpage !== 'undefined') window.location = nextpage;
                    break;
            }
        };
    </script>
</head>

<body>

<ul>
    <li class="previous"><a id="prev" href="http://www.yahoo.com">&laquo; <span>Previous Post</span></a></li>
    <li class="next"><a id="next" href="http://www.google.com"><span>Next Post</span> &raquo;</a></li>
</ul>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:52:00.310

如果您尝试读取 null 的属性，它将引发错误。所以你需要在阅读它之前测试它是否存在。

```
 window.onload=function()
    {

        var prevElem = document.getElementById("prev");
        var nextElem = document.getElementById("next");

        prevpage = prevElem ? prevElem.href || null;
        nextpage = nextElem ? nextElem.href || null;
    }

    document.onkeydown = function(evt)
    {
        evt = evt || window.event;
        switch (evt.keyCode)
        {
            case 37:
                if (prevpage) window.location = prevpage;
                break;
            case 39:
                if (nextpage) window.location = nextpage;
                break;
        }
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:51:36.517

在这种情况下，您必须测试是否[`document.getElementById()`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)返回 DOM 元素引用或`null`，因为尝试访问的属性会`null`导致错误。

```
window.onload=function()
{
    var prevpage = document.getElementById("prev"),
        nextpage = document.getElementById("next");
    document.onkeydown = function(evt)
    {
        evt = evt || window.event;
        switch (evt.keyCode)
        {
            case 37:
                if (prevpage) window.location = prevpage.href;
                break;
            case 39:
                if (nextpage) window.location = nextpage.href;
                break;
        }
    };
}; 
```

`null`被认为是一个虚假值，因此它不会进入`if`您的开关内部的块。

假设`next`/`prev`是锚`<a>`，您可以直接访问它们的`href`属性，而无需使用`getAttribute`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T21:25:37.597

我发现了问题。

`prevpage = document.getElementById("prev").getAttribute("href");`给出一个 TypeError，它会停止执行。我需要做的是首先检查是否`document.getElementById("prev")`为空。如果不是，那我可以`getAttribute("href")`

我需要`getAttribute("href")`是因为我想获取本地文件 --ie `post30.html`，而不是`[http://www.example.com/post30.html](http://www.example.com/post30.html)`. 我忘了提那个。

这就是代码的样子：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>

    <script type="text/javascript">
        var nextpage;
       var prevpage;

       window.onload=function()
        {   
           var temp;

           temp = document.getElementById("prev");  
            if (temp) prevpage = temp.getAttribute("href")

           temp = document.getElementById("next");
            if (temp) nextpage = temp.getAttribute("href")

        }

       document.onkeydown = function(evt)
        {
           evt = evt || window.event;
            switch (evt.keyCode)
            {
                case 37:
                    if (prevpage) window.location = prevpage;
                    break;
                case 39:
                    if (nextpage) window.location = nextpage;
                    break;
            }
        };
    </script>
</head>

<body>

<ul>
    <li class="previous"><a id="prev" href="next.html">&laquo; <span>Previous Post</span></a></li>
    <li class="next"><a id="next" href="prev.html"><span>Next Post</span> &raquo;</a></li>
</ul>

</body>

</html> 
```

# css - Set full width for the inner div

> ID：15547971
> 
> 赞同：1
> 
> 时间：2013-03-21T12:46:00.590
> 
> 标签：css, html, width

I have a parent div, Inside that div I have two levels of children div as follow,

```
<div class="grandParant">
    <div class="parant1">test</div> 
    <div class="parant2"> 
        <div class="child">Hello world this is a long test string</div>
         <div class="child">12</div>
         <div class="child">4545</div>
    </div>
</div> 
```

from the above sample code, I need to show the entire first "child" class content(Hello world this is a long test string) without any break, ie in a single line. The width of the "parant2" div should also be incremented with respect to the child width. So how could this be done with css? I am not posting my css since it is a little bit lengthy, but you can see it in jsfiddle.

**EDIT** my expected output is more like the alphabet 'L'

```
| test |
| Hello world this is a long test string |
| 12                                     |
| 4545                                   | 
```

my [jsfiddle](http://jsfiddle.net/arjuncc/9Sha7/7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:49:43.280

You can do that by removing "max-width" ...

Where ever if you give "max-width" it only get upto that extent only,beyond that width it will break the lines

Put css only like

```
min-width:100px; 
```

Here is fiddel **[http://jsfiddle.net/9Sha7/8/](http://jsfiddle.net/9Sha7/8/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:49:47.510

If you remove the `max-width` take `parant1` outside of it's grandparent, you'll get your desired result of non-wrapping:

**DEMO: [http://jsfiddle.net/9Sha7/18/](http://jsfiddle.net/9Sha7/18/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:51:30.747

take out the padding

```
.grandParant{
margin:0 auto;
float:left;
min-width:100px;
max-width:120px;    
height:150px;
position:relative;
border-left: 1px solid #000000;
border-right: 1px solid #000000;
background:#cccccc;
font-size:11px;
cursor:pointer;    
}
.parant1{
    width:auto;
margin-bottom:22px;

text-align:center;
    background:blue;
}
.parant2{

text-align:left;
width:auto;
background:#f3f3f3;
}

.child{
     width:100%;
position:static;
background:green;
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T12:55:31.813

Just get rid of all the `width` attributes and the `max-width`, then it should be fine according to your requirements: [http://jsfiddle.net/9Sha7/13/](http://jsfiddle.net/9Sha7/13/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T13:01:37.837

Remove `max-width` from your `.grandParent` class and give `white-space:nowrap;` to your `.child` class.

**[Working Fiddle](http://jsfiddle.net/9Sha7/21/)**

# wordpress - WordPress 多用户站点，允许唯一用户查看自定义屏幕

> ID：15547973
> 
> 赞同：0
> 
> 时间：2013-03-21T12:46:04.143
> 
> 标签：wordpress, login, multi-user

所以我需要建立一个有 25 个用户的 WordPress 站点。该网站会为每个这些用户填写各种表格（每个用户的表格不同）然后将这些结果存储在数据库中。

问题是，我需要让 user1 只能看到我们希望 user1 填写的表格，对于 user2,3...等也是如此。我们已经建立了网站的骨架，但我正在寻找插件或主题或可以让不同用户看到不同页面的东西。有没有可用的？

或者你有任何想法如何以另一种方式去做吗？

我花了一天时间寻找最好的部分，但找不到可行的解决方案。任何帮助将*不胜*感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:48:53.873

可以做两件事。使用联系表格 7 或重力表格插件来创建不同的表格。创建您喜欢显示表单的用户特定页面。在页面中粘贴相应的表单短代码。

使用角色范围插件来限制用户查看页面。您可以为不同的用户设置查看不同页面的权限。

希望这对您有所帮助。

# android - 使 Android 应用程序不适用于平板电脑

> ID：15547985
> 
> 赞同：32
> 
> 时间：2013-03-21T12:46:18.290
> 
> 标签：android, tablet

我在 Play 商店中发布我的应用程序，我不希望它可用于平板电脑。我怎样才能让它发生？

我不想手动排除安卓开发者控制台中的每一个平板电脑，但我真的需要我的应用程序专门在智能手机上运行。

编辑：我按照你的建议做了，但结果如下：

![在此处输入图像描述](../Images/2d18220d033c83bee92c750b77e5fb7c.png)

为了进一步解释：我需要我的应用程序在普通人称为智能手机的设备上运行，而不是在普通人称为平板电脑的设备上运行……例如，它必须在“Galaxy Note 2”上运行，但不能在“Galaxy Tab”上运行

**感谢@CommonsWare **：****

 **我必须在清单中设置以下标签：

```
<uses-sdk android:minSdkVersion="9" android:targetSdkVersion="9"/> 
```

和：

```
<compatible-screens>
    <!-- all small size screens -->
    <screen android:screenSize="small" android:screenDensity="ldpi" />
    <screen android:screenSize="small" android:screenDensity="mdpi" />
    <screen android:screenSize="small" android:screenDensity="hdpi" /> 
    <screen android:screenSize="small" android:screenDensity="xhdpi" />
    <!-- all normal size screens -->
    <screen android:screenSize="normal" android:screenDensity="ldpi" />
    <screen android:screenSize="normal" android:screenDensity="mdpi" />
    <screen android:screenSize="normal" android:screenDensity="hdpi" />
    <screen android:screenSize="normal" android:screenDensity="xhdpi" />
    <!-- all large size screens -->
    <screen android:screenSize="large" android:screenDensity="ldpi" />
    <screen android:screenSize="large" android:screenDensity="mdpi" />
    <screen android:screenSize="large" android:screenDensity="hdpi" />
    <screen android:screenSize="large" android:screenDensity="xhdpi" />
</compatible-screens> 
```

并执行以下操作：右键单击项目 -> 属性 -> android -> 选择大于 8 的目标

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-21T12:49:27.530

[http://developer.android.com/guide/practices/screens-distribution.html#FilteringHansetApps](http://developer.android.com/guide/practices/screens-distribution.html#FilteringHansetApps)

> ...您可以使用该元素根据屏幕尺寸和密度的组合来管理应用程序的分布。Google Play 等外部服务使用此信息对您的应用程序进行过滤，以便只有具有您声明兼容的屏幕配置的设备才能下载您的应用程序。

该页面的示例`<compatible-screens>`元素：

```
<manifest ... >
    <compatible-screens>
        <!-- all small size screens -->
        <screen android:screenSize="small" android:screenDensity="ldpi" />
        <screen android:screenSize="small" android:screenDensity="mdpi" />
        <screen android:screenSize="small" android:screenDensity="hdpi" />
        <screen android:screenSize="small" android:screenDensity="xhdpi" />
        <!-- all normal size screens -->
        <screen android:screenSize="normal" android:screenDensity="ldpi" />
        <screen android:screenSize="normal" android:screenDensity="mdpi" />
        <screen android:screenSize="normal" android:screenDensity="hdpi" />
        <screen android:screenSize="normal" android:screenDensity="xhdpi" />
    </compatible-screens>
    ...
    <application ... >
        ...
    <application>
</manifest> 
```

但是，我建议还添加密度为 的线条`xxhdpi`，因为此类设备现已上市（Droid DNA、Xperia Z、HTC Butterfly 等）。

* * *

**更新**

首先，关于您的构建错误，如果您阅读[element](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html)[的文档`<compatible-screens>`](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html)，您会注意到它是在 API 级别 9 中添加的，并且出于某种奇怪的原因，您的构建目标设置得比这更早。

二、关于：

> 我需要我的应用程序在普通人称为智能手机的设备上运行，而不是在普通人称为平板电脑的设备上运行……例如，它必须在“Galaxy Note 2”上运行，但不能在“Galaxy Tab”上运行

这是不可能的，仅仅是因为您没有具体的定义来明确您所做的事情并且不希望您的应用程序发布。

地球上有大约 80 亿“正常人”。欢迎您采访他们每个人，并询问他们对 Galaxy Note 2 的看法。有人会说是电话。有人会说是平板电脑。有些人会说“平板手机”，这不会有用。有些人会把你赶出他们的家，声称你带了一些发光的恶魔进入他们中间（这也没有用，如果他们手边有石头可以扔可能会很痛苦）。

如果在未来的某个时间点，你对你的设备做什么和不想要做什么有了一个科学的定义，问一个新的 StackOverflow 问题。通过“科学定义”，我的意思是一种算法，可以被所有设备上的所有人普遍应用，以确定你做什么和不想要你的应用程序。

（请注意，“所有人”是指那些可能认为您是恶魔贩子的人）

例如：

*   “我想在所有具有电话功能的设备上发货，无论屏幕大小如何”

*   “我想在所有屏幕尺寸小于最小边的某些英寸的设备上发货：

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-21T12:49:18.800

在清单文件中使用支持屏幕标记是**错误的方法**。始终使用`<compatible-screens>`使您的应用无法在平板电脑上使用。

```
<supports-screens 
    android:smallScreens="true"
    android:normalScreens="true" 
    android:largeScreens="false"
    android:xlargeScreens="false"
    android:resizeable="false" /> 
```

**警告**

> 如果您将元素用于上述场景（当您的应用程序不兼容大屏幕时）并将大屏幕尺寸属性设置为“false”，则 Google Play 等外部服务不会应用过滤。您的应用程序仍可用于较大的屏幕，但在运行时，它不会调整大小以适应屏幕。相反，系统将模拟手机屏幕尺寸（大约 320dp x 480dp；有关更多信息，请参阅屏幕兼容模式）。如果您想防止您的应用程序在更大的屏幕上被下载，请按照**@CommonsWare**的建议使用。

使用标签排除您的应用程序以在平板电脑上运行。

```
<compatible-screens>
<!-- all small size screens -->

  <screen android:screenSize="small" android:screenDensity="ldpi" />
  <screen android:screenSize="small" android:screenDensity="mdpi" />
  <screen android:screenSize="small" android:screenDensity="hdpi" />
  <screen android:screenSize="small" android:screenDensity="xhdpi" />

  <!-- all normal size screens -->

  <screen android:screenSize="normal" android:screenDensity="ldpi" />
  <screen android:screenSize="normal" android:screenDensity="mdpi" />
  <screen android:screenSize="normal" android:screenDensity="hdpi" />
  <screen android:screenSize="normal" android:screenDensity="xhdpi" />

</compatible-screens> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-07T17:45:38.017

对于那些新的线程，使用

```
<uses-feature android:name="android.hardware.telephony" required="true"/> 
```

来源（[https://paramsen.github.io/exclude-tablets/](https://paramsen.github.io/exclude-tablets/)）

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-21T12:52:27.640

您可以尝试为 3g 或 4g 服务添加某种检查。这将排除大多数但可能不是所有平板电脑。**

# java - 正确的 JNDI @Resource(name)

> ID：15547986
> 
> 赞同：5
> 
> 时间：2013-03-21T12:46:19.920
> 
> 标签：java, jboss, jndi

我有以下用于获取 JDBC 连接的类：

```
package util;

import java.sql.Connection;
import java.sql.SQLException;

import javax.annotation.Resource;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import javax.sql.DataSource;

public class OracleConnection implements AutoCloseable{

private final String oracle_DS_CTX = "java:jboss/oracleDS"; 

    //  @Resource(name="java:jboss/oracleDS")
    //  private DataSource ds; //doesn't work   

    private Connection _conn;   

    public OracleConnection() throws SQLException, NamingException{

            Context ctx = new InitialContext();
            DataSource ds = (DataSource) ctx.lookup(oracle_DS_CTX);
            _conn = ds.getConnection();
    }

    @Override
    public void close() throws Exception {
            if(_conn != null){
                    _conn.close();
            }
    }

    public Connection getConnection() throws SQLException {
            return _conn;
    }
} 
```

我在使用`@Resource`注释时遇到问题。通过 InitialContext 获得的数据源可以正常工作，但我不确定应该在资源名称中输入什么字符串（在我的代码中注释掉）。

我试过了：

`@Resource(name="java:jboss/oracleDS")`

`@Resource(name="oracleDS")`

AS是JBOSS AS7

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T13:04:09.377

你在你的 中定义了什么名字`standalone.xml`？

那是您需要在您的`@Resource`

但是有一个小技巧，你需要在`lookup`属性中设置它而不是`name`.

这是一个例子，假设我的 DS jndi 是`java:jboss/ExampleDS`.

```
@Resource(lookup = "java:jboss/ExampleDS")
private DataSource dataSource; 
```

# mysql - 数据库上的 Check_constraint 无法正常工作

> ID：15547989
> 
> 赞同：0
> 
> 时间：2013-03-21T12:46:35.123
> 
> 标签：mysql, database

假设：table_name = t1

c1 列的检查约束为 (Y, N, '')。

但是，当我在 c1 列中手动插入除上述有效值（如 A）之外的任何值时，数据库不会给出任何错误并成功提交。

我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:49:36.433

根据^([这里](http://dev.mysql.com/doc/refman/5.1/en/create-table.html))的 MySQL Docs ：

> CHECK 子句被解析，但**被所有存储引擎忽略**。

另一种方法是创建`BEFORE INSERT`触发器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:04:18.940

假设“CHECK 子句已解析但被所有存储引擎忽略。”，我已将检查约束更改为仅接受 Y 和 N。我还需要更改代码，在其中声明并初始化与此列对应的变量。

感谢你的回复。

# php - yii 无法隐藏入口网址

> ID：15547990
> 
> 赞同：0
> 
> 时间：2013-03-21T12:46:38.093
> 
> 标签：php, yii

我想让

```
http://localhost/demo/index.php?r=greeting 
```

通过访问

```
http://localhost/demo/greeting 
```

在 config/main.php 中，我设置为

```
'urlManager'=>array(
            'urlFormat'=>'path',
            'showScriptName' => false,      
            'rules'=>array(
                '<controller:\w+>/<id:\d+>'=>'<controller>/view',
                '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
                '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
            ),
        ), 
```

我将以下内容放入 .htaccess

```
Options +FollowSymLinks
IndexIgnore */*
<IfModule mod_rewrite.c>
RewriteEngine on

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php
</IfModule> 
```

我可以得到

```
http://localhost/demo/index.php/greeting 
```

工作但不工作

```
http://localhost/demo/greeting 
```

作品是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:14:40.570

这对我有用...

```
 'urlManager'=>array(
        'urlFormat'=>'path',
        'rules'=>array(
            '<controller:\w+>/<id:\d+>'=>'<controller>/view',
            '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
            '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
),
        'showScriptName'=>false,
    ), 
```

对于 htaccess 部分

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
#otherwise forward to index.php
RewriteRule . index.php 
```

看起来像你的，但你必须确保 .htaccess 文件在受保护的文件夹之外，因此在你的 web 目录的根文件夹中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T13:02:55.090

```
'urlManager'=>array(
        'urlFormat'=>'path',
                    'showScriptName'=>false,
        'rules'=>array(
                            'gii'=>'gii',
                            'gii/<controller:\w+>'=>'gii/<controller>',
                            'gii/<controller:\w+>/<action:\w+>'=>'gii/<controller>/<action>',

            '<controller:\w+>/<id:\d+>'=>'<controller>/view',
            '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
            '<controller:\w+>/<action:\w+>/<key:\w+>'=>'<controller>/<action>',
            '<controller:\w+>/<action:\w+>/<id:\w+>/<param:\w+>'=>'<controller>/<action>',
            '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
        ),
    ), 
```

试试这个。它为我工作。这也包括 gii url 的一部分。使用它，您还可以使用以下网址打开您的 gii 面板`http://localhost/demo/gii`

您还在什么 .htaccess 中进行了此更改？

# java - StAX 您如何按原样保存 XML 数据

> ID：15547994
> 
> 赞同：0
> 
> 时间：2013-03-21T12:46:54.397
> 
> 标签：java, stax

我需要保留从另一个系统接收到的一些 XML 数据。以下是我们收到的示例：

```
<SomeTag display="1 2 3 4 5 &lt;anotherTag>someValue&lt;/anotherTag>" /> 
```

当它被读入然后保存到我们的数据库时，它是这样保存的：

```
<SomeTag display="1 2 3 4 5 &lt;anotherTag&gt;someValue&lt;/anotherTag&gt;" /> 
```

我想完全按原样保留数据，而不用对 > 符号进行编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:52:26.410

如果您将从另一个系统收到的 xml 保存为 DB 列中的字符串而不进行处理，它将保证按原样保留它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:00:19.220

如果您*只有*StAX 事件，那么没有，没有办法实现这一点，因为当您获得属性值时

```
1 2 3 4 5 <anotherTag>someValue</anotherTag> 
```

从 StAX 解析器无法知道原始字节的样子 - 大于号可能是`>`or`&gt;`或`&#x3E;`，所有这些形式在解析时都会产生相同的值，并且任何 XML 解析器都必须将它们视为等效。

如果您关心精确的原始表示，那么您将不得不在 XML 世界之外执行此操作 - 在 StAX 解析器解析原始字节之前以某种方式保存它们，使用正确的字符编码对其进行解码，并将生成的字符串直接存储到你的数据库。

# android - Android：片段布局中的 ListView

> ID：15547997
> 
> 赞同：1
> 
> 时间：2013-03-21T12:47:07.043
> 
> 标签：android, listview, android-listview, crash, fragment

我正在尝试将 ListView 添加到 Fragment，而不仅仅是 ListFragment。我希望标签位于顶部而不是片段中的 ListView。我的代码编译得很好，但是当我启动它时会崩溃。

这是我也尝试添加 ListView 的片段。

```
public static class MainFragment extends Fragment {

    public static final String ARG_SECTION_NUMBER = "section_number";

    public MainFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Create a new TextView and set its text to the fragment's section
        // number argument value.
        View V = inflater.inflate(R.layout.main, container, false);

        ListView LV = (ListView) this.getActivity().findViewById(R.id.mainList);
        String List[] = new String[2];
        List[0] = "tst1";
        List[1] ="tst2";
        ArrayAdapter<String> aa = new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_2, List);

        LV.setAdapter(aa);

        return V;
    }
} 
```

我的日志猫说它在 LV.setAdapter(aa); 上崩溃了；

这是调用片段的完整代码

公共类 MainCalActivity 扩展 FragmentActivity 实现 ActionBar.TabListener {

```
SectionsPagerAdapter mSectionsPagerAdapter;

/**
 * The {@link ViewPager} that will host the section contents.
 */
ViewPager mViewPager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_cal);

    // Set up the action bar.
    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    // Create the adapter that will return a fragment for each of the three
    // primary sections of the app.
    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

    // When swiping between different sections, select the corresponding
    // tab. We can also use ActionBar.Tab#select() to do this if we have
    // a reference to the Tab.
    mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
        @Override
        public void onPageSelected(int position) {
            actionBar.setSelectedNavigationItem(position);
        }
    });

    // For each of the sections in the app, add a tab to the action bar.
    for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
        // Create a tab with text corresponding to the page title defined by
        // the adapter. Also specify this Activity object, which implements
        // the TabListener interface, as the callback (listener) for when
        // this tab is selected.
        actionBar.addTab(
                actionBar.newTab()
                        .setText(mSectionsPagerAdapter.getPageTitle(i))
                        .setTabListener(this));
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main_cal, menu);
    return true;
}

@Override
public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    // When the given tab is selected, switch to the corresponding page in
    // the ViewPager.
    mViewPager.setCurrentItem(tab.getPosition());
}

@Override
public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
}

@Override
public void onTabReselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
}

/**
 * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
 * one of the sections/tabs/pages.
 */
public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        // getItem is called to instantiate the fragment for the given page.
        // Return a DummySectionFragment (defined as a static inner class
        // below) with the page number as its lone argument.
        Fragment fragment;                  
        Bundle args = new Bundle();
        if(position == 0)
        {

            fragment = new MainFragment();
            args.putInt(MainFragment.ARG_SECTION_NUMBER, position + 1);
            fragment.setArguments(args);
            return  fragment;
        } else
        {

            fragment = new CalFragment();
            args.putInt(MainFragment.ARG_SECTION_NUMBER, position + 1);
            fragment.setArguments(args);
            return fragment;
        }

    }

    @Override
    public int getCount() {
        // Show 2 total pages.
        return 2;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
            case 0:
                return getString(R.string.main);
            case 1:
                return getString(R.string.cal);

        }
        return null;
    }
}

/**
 * The Main fragment argument representing the main menu
 */
public static class MainFragment extends Fragment {

    public static final String ARG_SECTION_NUMBER = "section_number";

    public MainFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Create a new TextView and set its text to the fragment's section
        // number argument value.
        View V = inflater.inflate(R.layout.main, container, false);

        ListView LV = (ListView) this.getActivity().findViewById(R.id.mainList);
        String List[] = new String[2];
        List[0] = "tst1";
        List[1] ="tst2";
        ArrayAdapter<String> aa = new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_2, List);

        LV.setAdapter(aa);

        return V;
    }
}

/**
* The Calendar fragment argument representing the Calendar
*/

public static class CalFragment extends Fragment {
    /**
     * The Calendar fragment argument representing the Calendar
     */
    public static final String ARG_SECTION_NUMBER = "section_number";

    public CalFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View V = inflater.inflate(R.layout.cal, container, false);

        return V;
    }
} 
```

}

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
    vandroid:id="@+id/TextView01"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:text="@string/addS"
    android:textSize="30sp" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="246dp"
    android:layout_height="wrap_content"
    android:ems="10"
    android:hint="@string/stuff" >

    <requestFocus />
</EditText>

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="right"
    android:gravity="right"
    android:text="@string/add" />

<ListView
    android:id="@+id/mainList"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView>

</LinearLayout> 
```

和我的原木猫

```
03-21 13:15:13.845: E/ArrayAdapter(837): You must supply a resource ID for a TextView
03-21 13:15:14.015: E/AndroidRuntime(837): FATAL EXCEPTION: main
03-21 13:15:14.015: E/AndroidRuntime(837): java.lang.IllegalStateException: ArrayAdapter requires the resource ID to be a TextView
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:386)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.widget.AbsListView.obtainView(AbsListView.java:2159)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.widget.ListView.measureHeightOfChildren(ListView.java:1246)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.widget.ListView.onMeasure(ListView.java:1158)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.view.View.measure(View.java:15513)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:695)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.view.View.measure(View.java:15513)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.view.View.measure(View.java:15513)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1381)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.view.View.measure(View.java:15513)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.view.View.measure(View.java:15513)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:847)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.view.View.measure(View.java:15513)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
03-21 13:15:14.015: E/AndroidRuntime(837):  at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2176)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.view.View.measure(View.java:15513)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1874)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1089)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1265)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.view.Choreographer.doCallbacks(Choreographer.java:562)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.view.Choreographer.doFrame(Choreographer.java:532)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.os.Handler.handleCallback(Handler.java:725)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.os.Looper.loop(Looper.java:137)
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.app.ActivityThread.main(ActivityThread.java:5039)
03-21 13:15:14.015: E/AndroidRuntime(837):  at java.lang.reflect.Method.invokeNative(Native Method)
03-21 13:15:14.015: E/AndroidRuntime(837):  at java.lang.reflect.Method.invoke(Method.java:511)
03-21 13:15:14.015: E/AndroidRuntime(837):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-21 13:15:14.015: E/AndroidRuntime(837):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-21 13:15:14.015: E/AndroidRuntime(837):  at dalvik.system.NativeStart.main(Native Method)
03-21 13:15:14.015: E/AndroidRuntime(837): Caused by: java.lang.ClassCastException: android.widget.TwoLineListItem cannot be cast to android.widget.TextView
03-21 13:15:14.015: E/AndroidRuntime(837):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:379)
03-21 13:15:14.015: E/AndroidRuntime(837):  ... 43 more
03-21 13:15:39.406: E/Trace(915): error opening trace file: No such file or directory (2)
03-21 13:15:40.465: E/ArrayAdapter(915): You must supply a resource ID for a TextView
03-21 13:15:40.495: E/AndroidRuntime(915): FATAL EXCEPTION: main
03-21 13:15:40.495: E/AndroidRuntime(915): java.lang.IllegalStateException: ArrayAdapter requires the resource ID to be a TextView
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:386)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.widget.AbsListView.obtainView(AbsListView.java:2159)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.widget.ListView.measureHeightOfChildren(ListView.java:1246)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.widget.ListView.onMeasure(ListView.java:1158)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.view.View.measure(View.java:15513)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:695)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.view.View.measure(View.java:15513)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.view.View.measure(View.java:15513)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1381)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.view.View.measure(View.java:15513)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.view.View.measure(View.java:15513)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:847)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.view.View.measure(View.java:15513)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
03-21 13:15:40.495: E/AndroidRuntime(915):  at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2176)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.view.View.measure(View.java:15513)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1874)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1089)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1265)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.view.Choreographer.doCallbacks(Choreographer.java:562)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.view.Choreographer.doFrame(Choreographer.java:532)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.os.Handler.handleCallback(Handler.java:725)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.os.Looper.loop(Looper.java:137)
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.app.ActivityThread.main(ActivityThread.java:5039)
03-21 13:15:40.495: E/AndroidRuntime(915):  at java.lang.reflect.Method.invokeNative(Native Method)
03-21 13:15:40.495: E/AndroidRuntime(915):  at java.lang.reflect.Method.invoke(Method.java:511)
03-21 13:15:40.495: E/AndroidRuntime(915):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-21 13:15:40.495: E/AndroidRuntime(915):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-21 13:15:40.495: E/AndroidRuntime(915):  at dalvik.system.NativeStart.main(Native Method)
03-21 13:15:40.495: E/AndroidRuntime(915): Caused by: java.lang.ClassCastException: android.widget.TwoLineListItem cannot be cast to android.widget.TextView
03-21 13:15:40.495: E/AndroidRuntime(915):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:379)
03-21 13:15:40.495: E/AndroidRuntime(915):  ... 43 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:58:25.077

堆栈跟踪告诉您代码有什么问题： java.lang.IllegalStateException: ArrayAdapter requires the resource ID to be a TextView

您正在使用

```
new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_2, List); 
```

这是这个构造函数：

```
public ArrayAdapter (Context context, int textViewResourceId, T[] objects) 
```

并且文档说明了 textViewResourceId：包含 TextView 的布局文件的资源 ID 以在实例化视图时使用（请参阅[http://developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter(android.content.上下文，int）](http://developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter%28android.content.Context,%20int%29)）

因为您使用的布局是一个更复杂的布局 (TwoLineListItem)，所以您必须告诉适配器使用哪个 TextView：

```
new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_2, android.R.id.text1, List); 
```

或者你可以使用简单的布局 android.R.layout.simple_list_item_1 代替。

```
new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, List); 
```

无论如何，在您的情况下使用两行布局没有意义，因为您似乎每行只有一个文本。