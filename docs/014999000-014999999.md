# StackOverflow 问答 14999000-14999999

# python - 在字符串中动态转义 % 符号和括号 {}

> ID：14999001
> 
> 赞同：4
> 
> 时间：2013-02-21T09:45:33.397
> 
> 标签：python, python-2.7, python-2.x

我正在开发一个 Web 应用程序。

我需要转义`%`，`{ }`如果存在，则使用`.format()`或进行进一步的字符串替换`%s`

我试过了`urllib quote_plus`，`re.escape()`但没有一个有效。

我需要转义的字符串不是静态的。

我该如何解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T09:48:54.127

用于`%`：

```
s = s.replace('%', '%%') 
```

用于`format`：

```
s = s.replace('{', '{{').replace('}', '}}') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:08:37.887

逃跑`%`，`{`和`}`。您可以使用该`re.sub`方法执行此操作。为了逃避 `string.format`：

```
re.sub(r'({|})', '\g<1>\g<1>', original) 
```

为了逃避`string % args`：

```
re.sub(r'(%)', '\g<1>\g<1>', original) 
```

# php - php DOM XML在重新打开后生成带有换行符的XML

> ID：14999006
> 
> 赞同：0
> 
> 时间：2013-02-21T09:45:42.367
> 
> 标签：php, xml, dom, object

所以我有这个代码

```
$domDoc = new DOMDocument;
$rootElt = $domDoc->createElement('CONFIG');
$rootNode = $domDoc->appendChild($rootElt);

$subElt = $domDoc->createElement('APP-ID');
$subNode = $rootNode->appendChild($subElt);

$textNode = $domDoc->createTextNode('166533e56');
$subNode->appendChild($textNode);

$domDoc->save('config.xml'); 
```

那产生

```
<CONFIG><APP-ID>166533e56</APP-ID></CONFIG> 
```

这是没有换行符的。当我添加

```
$domDoc->formatOutput = true; 
```

就在代码的最后一行之前

```
$domDoc->save('config.xml'); 
```

输出现在很好：

```
<CONFIG>
  <APP-ID>166533e56</APP-ID>
</CONFIG> 
```

但是，当我在另一个 php 中尝试打开 xml 并在其中写入一些内容时，无论我尝试什么，它都会以未格式化的形式附加在那里。

在另一个 php 代码中，我这样做：

```
$domDoc = new DOMDocument;
$domDoc->load('config.xml');

$rootNode = $domDoc->documentElement;
$config_root = $rootNode->getElementsByTagName("CONFIG");

$rootElt = $domDoc->createElement('USER-ID');
$subNode = $rootNode->appendChild($rootElt);

$textNode = $domDoc->createTextNode('333265332f');
$subNode->appendChild($textNode);

$rootElt = $domDoc->createElement('USER-NAME');
$sub2Node = $rootNode->appendChild($rootElt);

$textNode = $domDoc->createTextNode('John');
$sub2Node->appendChild($textNode);

$domDoc->formatOutput = true;
$domDoc->save('config.xml'); 
```

这导致

```
<CONFIG>
  <APP-ID>166533e56</APP-ID>
<USER-ID>333265332f</USER-ID><USER-NAME>John</USER-NAME></CONFIG> 
```

这是完全错误的。它应该是

```
<CONFIG>
  <APP-ID>166533e56</APP-ID>
  <USER-ID>333265332f</USER-ID>
  <USER-NAME>John</USER-NAME>
</CONFIG> 
```

为什么没有添加换行符？我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:11:12.363

在加载文件`$domDoc->preserveWhiteSpace = false;` **之前**设置：

```
$domDoc = new DOMDocument;
$domDoc->preserveWhiteSpace = false;// <-- this line
$domDoc->loadXML(<<<XML
<?xml version="1.0"?>
<CONFIG>
  <APP-ID>166533e56</APP-ID>
</CONFIG>
XML
);

$rootNode = $domDoc->documentElement;
$config_root = $rootNode->getElementsByTagName("CONFIG");

$rootElt = $domDoc->createElement('USER-ID');
$subNode = $rootNode->appendChild($rootElt);

$textNode = $domDoc->createTextNode('333265332f');
$subNode->appendChild($textNode);

$rootElt = $domDoc->createElement('USER-NAME');
$sub2Node = $rootNode->appendChild($rootElt);

$textNode = $domDoc->createTextNode('John');
$sub2Node->appendChild($textNode);

$domDoc->formatOutput = true;
//$domDoc->save('config.xml');    
echo $domDoc->saveXML(); 
```

[现场演示](http://3v4l.org/oZrBs)

# sql-server - 带有 FOREIGN KEY REFERENCES 的错误消息

> ID：14999014
> 
> 赞同：4
> 
> 时间：2013-02-21T09:46:05.523
> 
> 标签：sql-server, foreign-keys, create-table

我正在尝试创建一个链接到多个角色的表。该表称为 UserRoles，只有两列。

第一列包含对用户的引用 第二列包含指向角色的链接

我使用了 FOREIGN KEY REFERENCES，您可能会在底部注意到，但我不断收到错误消息

执行查询时出现以下错误：

> 服务器：消息 1770，级别 16，状态 0，行 1 外键 'FK_ *UserRoles* _user___70DDC3D8' 引用了引用表 'MyUsers' 中的无效列 'user_id'。

无法创建约束。请参阅以前的错误。

有一个更好的方法吗？

```
CREATE TABLE MyUsers
(
id                INT          IDENTITY(1,1)PRIMARY KEY,
user_logon_id     VARCHAR(30)  NOT NULL,
user_full_name    VARCHAR(30)  NULL,
user_description  VARCHAR(125) NULL,
user_password     VARCHAR(125) NOT NULL,
);

INSERT INTO MyUsers (user_logon_id, user_full_name, user_description, user_password) VALUES ('mcobery', 'Marc Cobery',

CREATE TABLE MyRole
(
myrole_id         INT          IDENTITY(1,1)PRIMARY KEY,
role_name         VARCHAR(30)  NOT NULL,
role_description  VARCHAR(50)  NULL,
);

INSERT INTO MyRole (role_name, role_description) VALUES ('administrator', ' Administrator of the web site');

INSERT INTO MyRole (role_name, role_description) VALUES ('user', ' User of the web site');

CREATE TABLE UserRoles
(
user_id int FOREIGN KEY REFERENCES MyUsers(user_id),
role_id int FOREIGN KEY REFERENCES MyRole(role_id),
); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T09:51:39.853

它应该如下所示

```
CREATE TABLE UserRoles
 (
    user_id int FOREIGN KEY REFERENCES MyUsers(id),
    role_id int FOREIGN KEY REFERENCES MyRole(myrole_id),
 ); 
```

MyUsers 表中不存在 user_id 列

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:59:28.870

您的表格应如下所示：

```
CREATE TABLE UserRoles
(
user_id int FOREIGN KEY REFERENCES MyUsers(id),
role_id int FOREIGN KEY REFERENCES MyRole(myrole_id),
); 
```

这是创建引用时的规则：

Column_Name DATATYPE FOREIGN KEY REFERENCES ParentTableName(parentColumnName)

# mysql - 在特定时间运行的查询

> ID：14999022
> 
> 赞同：0
> 
> 时间：2013-02-21T09:46:27.673
> 
> 标签：mysql, sql, database-design, phpmyadmin

我想编写一个在特定时间运行的查询。

例如，当设定的时间到来时，查询会自动执行。

就像如果用户在网站上注册并且在 2 天内没有验证他/她的电子邮件，那么应该通过删除查询删除该用户的数据条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:55:11.960

似乎您需要一个预定的事件参考[http://dev.mysql.com/doc/refman/5.1/en/create-event.html](http://dev.mysql.com/doc/refman/5.1/en/create-event.html)，可以说每天运行一个。假设如果用户验证邮件（如单击链接）将在您的数据库中生成一个条目，那么您可以检查 (current_day - register_day) > 2 天然后记录状态“过期”和所有记录“过期”状态有资格删除。

相关问题： [无法在 MySQL 中调度存储过程](https://stackoverflow.com/questions/10189759/cant-schedule-a-stored-procedure-in-mysql) 以及 [如何在 MySQL 中调度存储过程](https://stackoverflow.com/questions/6560639/how-to-schedule-a-stored-procedure-in-mysql)

希望这可以帮助

# interface - 接口文件的自动一致性检查

> ID：14999024
> 
> 赞同：0
> 
> 时间：2013-02-21T09:46:34.740
> 
> 标签：interface, static-libraries, fortran90

我想在 Fortran90 中创建一个库，并认为一个好的方法是在文件 interface.f90（没有模块）中收集公共例程，编译并将所有内容收集到“.a”静态库中，并维护一个文件 interface.inc，其中的接口块对应于 interface.f90 中的例程。然后我会将 .a 文件与 interface.inc 一起分发，因此用户可以在编译时使用“include 'interface.inc'”进行类型检查。

问题是，在开发库时，每次公共例程的接口发生变化时，都必须在两个地方手动进行机会：interface.f90 和 interface.inc。最好的情况是 interface.inc 可以在编译库时从 interface.f90 自动生成，但到目前为止我还没有找到标准化的方法。

然而，手动更改 interface.inc 是可以接受的，只要在编译库时发现任何不一致。所以我要问的是：有没有办法自动检查 interface.inc 中的接口块与 interface.f90 中的实际例程的一致性（编译库时）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:57:05.240

在 Fortran 90 中不是语言意义上的。特定处理器可能会提供此功能作为诊断功能，但它们不是必需的。

在自动接口生成方面——我知道的一个处理器（Intel Fortran）具有合适的命令行选项，将为它遇到的每个外部过程写出接口块。它使用它来检查外部过程的接口。我已经看到一些用户出于与您自己类似的原因而收获这些界面块。不过，这依赖于非常特定于处理器的行为，并且该行为的不时变化偶尔会破坏这种安排。

*在 Fortran 2003 中，可能*存在进行一致性检查的可能性。该方法是在一个单独的模块中声明基于接口块的过程指针。然后，在每个实际过程中，将模块与过程指针一起使用，并（可能在调试 if 构造或类似结构中）尝试将相关过程指针与实际过程相关联。编译器不需要诊断过程指针显式接口中的不匹配，但大多数都应该。[请参阅此论坛](http://software.intel.com/en-us/forums/topic/355850)帖子末尾的帖子以进行一些讨论（请注意，F2008 标准中有一个错误，该错误正式“未能为过程指针分配提供解释”，但我认为这将在勘误二中得到纠正）。

在将您的界面块打包给最终用户方面，考虑将它们放在一个模块中并为该模块提供源代码。这将使您在将来可以为用户提供的内容方面具有更大的灵活性。

```
MODULE interfaces
  IMPLICIT NONE
  PRIVATE
  PUBLIC :: external
  INTERFACE
    SUBROUTINE external(arg)
      IMPLICIT NONE
      INTEGER, INTENT(IN) :: arg(:)
    END SUBROUTINE external
  END INTERFACE
END MODULE interfaces

MODULE proc_pointers
  USE interfaces
  IMPLICIT NONE
  PRIVATE
  LOGICAL, PARAMETER, PUBLIC :: check_flag = .TRUE.
  PROCEDURE(external), POINTER, PUBLIC :: external_pptr
END MODULE proc_pointers

SUBROUTINE external(arg)
  USE proc_pointers
  IMPLICIT NONE
  INTEGER, INTENT(IN) :: arg(:)
  IF (check_flag) external_pptr => external
  ...    
END SUBROUTINE external 
```

# sql-server - SSRS 数据源已更改。有日志吗？

> ID：14999026
> 
> 赞同：2
> 
> 时间：2013-02-21T09:46:43.167
> 
> 标签：sql-server, reporting-services

SQL Services Reporting Services 是否有一个日志文件来跟踪对报告配置所做的更改？

我正在尝试查看何时专门更改了数据源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:55:42.273

在看

> C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\LogFiles

在服务器上。

如果您在多实例服务器上，请根据需要替换 MSRS10_50.MSSQLSERVER。这确实记录了对数据源的更改以及大量其他内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T12:44:36.887

您可以使用 ReportServer 数据库查看报告的整个历史记录，除非已刷新。打开安装了 SSRS 的管理工作室，然后转到报表服务器使用的报表服务器数据库。然后，您需要查询它以获取所需的信息。

# java - 在 tomcat 上运行非 web java 应用程序

> ID：14999028
> 
> 赞同：7
> 
> 时间：2013-02-21T09:46:46.867
> 
> 标签：java, tomcat

我有一个简单的 Java 应用程序，我需要一直运行（也可以在服务器重新启动时自动启动）。
我曾考虑过服务包装器，但 Windows 版本是付费的。
有没有一种方法可以配置 Tomcat 以自动运行项目中的特定类或任何其他可以产生相同结果的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T10:39:36.527

我认为您需要有一个同时以 tomcat 开头的应用程序（无论是 Web 还是非 Web）。

好吧，您需要一个简单的 Web 应用程序来注册一个侦听器（侦听应用程序启动事件，即 tomcat 启动事件）并启动您的类。

在您的 web.xml 中非常简单，您可以像这样声明一个侦听器：

```
<listener>
        <description>application startup and shutdown events</description>
        <display-name>ApplicationListener</display-name>
        <listener-class>com.myapp.server.config.ApplicationListener</listener-class>
</listener> 
```

在你的 ApplicationListener 类中你实现了 ServletContextListener 接口。这是一个例子：

```
import java.io.File;

import javax.servlet.ServletContext;
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;

/**
 * Class to listen for application startup and shutdown
 * 
 * @author HBR
 * 
 */
public class ApplicationListener implements ServletContextListener {
    private static Logger logger = Logger.getLogger(ApplicationListener.class);

    @Override
    public void contextDestroyed(ServletContextEvent servletContextEvent) {
        logger.info("class : context destroyed");

    }

    @Override
    public void contextInitialized(ServletContextEvent servletContextEvent) {
        ServletContext context = servletContextEvent.getServletContext();
        ///// HERE You launch your class
        logger.info("myapp : context Initialized");
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:08:14.243

看看：

1.  [http://wrapper.tanukisoftware.com/doc/english/download.jsp](http://wrapper.tanukisoftware.com/doc/english/download.jsp)
2.  [http://commons.apache.org/daemon/jsvc.html](http://commons.apache.org/daemon/jsvc.html)

两者都将帮助您将 java 应用程序作为服务运行。但是，如果您想将您的应用程序与 tomcat 结合运行，您可以实现自己的简单 Web 应用程序来运行您的应用程序。你可以使用

1.  在服务器启动时启动的 servlet（在 web.xml 中配置）
2.  HTTP 过滤器
3.  Servlet上下文监听器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:05:46.197

一个快速的谷歌显示了一堆选项：

*   [Java Service Wrapper](http://wrapper.tanukisoftware.com/doc/english/download.jsp)（可能是提到的那个）
*   [另一个 Java 服务包装器](http://yajsw.sourceforge.net/)（基于 JSW 并设计为在很大程度上兼容）
*   [Windows 服务包装器](http://code.google.com/p/simple-service-wrapper/)（任何应用即服务，仅限 Windows）
*   [Commons Daemon](http://commons.apache.org/daemon/)（Tomcat 使用的那个）

最后，如果您希望在 Tomcat 中使用它（作为 Web 应用程序的一部分），则可以使用[Quartz Scheduler](http://quartz-scheduler.org)之类的东西。

# jquery - 表单未返回 true 或 false 它采用 true 默认

> ID：14999029
> 
> 赞同：1
> 
> 时间：2013-02-21T09:46:51.407
> 
> 标签：jquery, ajax, form-submit

我的代码是：

```
$('#trainer_registration_form_new').submit(function(){
            var email           = $('#email').val();
            var dataString      = 'email='+email;
            $.ajax({
                type     : "get",
                url      : "checkEmail.php",
                data     : dataString,
                async    : false,
                dataType : "html",
                success  : function(result){
                    if(result==1) {
                        alert('email alredy exist');
                        $("input#email").focus();
                        $('#email').val('');
                        tempField =  $('#email');
                        setTimeout("tempField.focus();",1);
                        return false;
                    } else {
                       return true;
                    }
                }
            });
     }); 
```

这段代码有什么问题，我只想检查重复的电子邮件 onsubmit 并提交表单。但它没有任何其他想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:53:06.730

尝试更改`dataType : "html",`为`dataType : "text",`

`alert(result);`前`if(result==1) {`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:49:54.800

我猜你打算让你`return false`阻止表单提交？情况并非如此，因为您是`false`从`success`回调而不是`submit()`回调函数返回的。

相反，您可以考虑在`submit()`回调顶部创建一个布尔变量，并在其中设置它的值`success`并在最后返回它。

所以这是一个粗略的例子：

```
$('#trainer_registration_form_new').submit(function(){
   var $form = $(this);
   $.ajax({
      // As you were...
      success: function(result) {
          if(result==1) {
              // As you were..
          } else {
              $form.submit()
     }
   });

   return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T09:50:10.340

该`return`语句位于作为 AJAX 请求的处理程序传递的匿名函数内部`success`，因此只会从该函数返回一个值（无处），而不是从您的提交处理程序函数。您需要使用一个变量来存储返回值，并将其设置为该函数`true`或`false`该函数内部。

理想情况下，您也应该避免使用`async: false`，因为这样会破坏使用 AJAX 的全部目的，并且会锁定浏览器直到请求完成。

# python - 为python进程保留ram

> ID：14999031
> 
> 赞同：2
> 
> 时间：2013-02-21T09:47:00.977
> 
> 标签：python, windows-7, python-2.7

我有一个在多台机器上运行的 python 脚本（用 py2exe 制作的 exe）。这个 Python exe 定期做两件事；一个线程编写一个 py 文件以供进一步处理，而另一个线程使用该`pyZmq`模块侦听 tcp 端口。使用了大约 12Mo 的 ram，它已经完美运行了好几天。

现在问题来了：这些机器也运行`3dsmax`渲染。`3dsmax`占用系统上所有可用的内存，只为我的脚本留下 4Mo 内存。在这种状态下，报告（py 文件写入）线程正常运行，但侦听 tcp 端口的线程不再工作（向机器发送 msg 不会收到）。

但是，此 python exe 进程以高优先级运行：

```
set_nice(psutil.HIGH_PRIORITY_CLASS) 
```

那么，我怎样才能为我的进程保留 14Mo 的 ram，以便没有其他正在运行的进程可以占用这个 ram？或者另一种避免exe将他的ram“交给”其他进程的方法？

谢谢，基布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T01:36:54.437

您可以使用 Win32 调用[VirtualLock](http://msdn.microsoft.com/en-us/library/aa366895%28VS.85%29.aspx)。我没有看到任何简单的 python 示例，也没有方便的 Windows 机器来玩，但它可能相对容易。

在 Python [ProcessHacker](http://processhacker.sourceforge.net/)之外似乎可以做到，但我无法验证。

但总的来说，这是一个坏主意。我认为您可能遇到了更严重的问题。祝你好运！

# wordpress - 我在哪里可以设置 woocommerce 在单个产品页面上显示分组产品

> ID：14999034
> 
> 赞同：0
> 
> 时间：2013-02-21T09:47:11.920
> 
> 标签：wordpress, woocommerce

我在哪里可以设置 woocommerce 在单个产品页面上显示分组产品？

是否有类似的操作： add_action( 'woocommerce_after_single_product_summary', 'woocommerce_output_related_products', 20 );

最好的问候和答案 - 亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:32:08.137

我相信你正在寻找这个钩子：

`add_action( 'woocommerce_after_single_product_summary', 'woocommerce_output_related_products', 20 );`

来自：*wp-content/plugins/woocommerce/woocommerce-hooks.php*

* * *

在*wp-content/plugins/woocommerce/templates/content-single-product.php*中，您有：

```
 /**
     * woocommerce_after_single_product_summary hook
     *
     * @hooked woocommerce_output_product_data_tabs - 10
     * @hooked woocommerce_output_related_products - 20
     */
    do_action( 'woocommerce_after_single_product_summary' ); 
```

如果您想修改相关内容，请查看：*wp-content/plugins/woocommerce/templates/single-product/related.php*

# c# - 在C#中将二进制数据插入oracle

> ID：14999037
> 
> 赞同：0
> 
> 时间：2013-02-21T09:47:18.397
> 
> 标签：c#, asp.net, oracle

我正在尝试从经典的 asp 迁移到 .net。

我有这段代码可以上传并将其保存到 oracle 数据库。我如何在 C# 中以最简单的方式在几行中做到这一点？

尤其会提出与下面类似的答案，以便我可以更好地联系...

```
Dim Conn, Rs, SQL
Set Conn = Server.CreateObject("ADODB.Connection")
Set Rs = Server.CreateObject("ADODB.Recordset")

Conn.Open GetConnString

Rs.Open "select * from EMPIMAGE.imageupload where Id=142", Conn, 3, 3
if fileSize > 0 and Request.ServerVariables("LOGON_USER") <> "" Then
    Rs.Fields("UPLOAD_USER") = Request.ServerVariables("LOGON_USER")
    Rs.Fields("FILESIZE") = fileSize
    Rs.Fields("FILENAME") = fileName
    RS.Fields("data").AppendChunk fileData
    Rs.Update()
End If    
Rs.Close()
Conn.Close
Set Rs = Nothing
Set Conn = Nothing 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:50:16.810

正如@ayush 在
[使用 C# 在 Oracle 数据库中插入 blob的问题之一中所回答的那样](https://stackoverflow.com/questions/4902250/insert-blob-in-oracle-database-with-c-sharp)

这是一个使用 c# 和过程在 oracle 中插入 blob 数据的示例（您说更喜欢这意味着您可以）。

```
using System;
using System.Data;
using Oracle.DataAccess.Client;
using Oracle.DataAccess.Types;
using System.IO;
using System.Text;

//Step 1
// Connect to database
// Note: Modify User Id, Password, Data Source as per your database setup
string constr = "User Id=Scott;Password=tiger;Data Source=orcl9i";

OracleConnection con = new OracleConnection(constr);
con.Open();
Console.WriteLine("Connected to database!");

// Step 2
// Note: Modify the Source and Destination location
// of the image as per your machine settings
String SourceLoc  = "D:/Images/photo.jpg";
String DestinationLoc = "D:/Images/TestImage.jpg";

// provide read access to the file

FileStream fs = new FileStream(SourceLoc, FileMode.Open,FileAccess.Read);

// Create a byte array of file stream length
byte[] ImageData = new byte[fs.Length];

//Read block of bytes from stream into the byte array
fs.Read(ImageData,0,System.Convert.ToInt32(fs.Length));

//Close the File Stream
fs.Close();

// Step 3
// Create Anonymous PL/SQL block string
String block = " BEGIN " +
               " INSERT INTO testblob (id, photo) VALUES (100, :1); " +
               " SELECT photo into :2 from testblob WHERE id = 100; " +
               " END; ";

// Set command to create Anonymous PL/SQL Block
OracleCommand cmd = new OracleCommand();
cmd.CommandText = block;
cmd.Connection = con;

// Since executing an anonymous PL/SQL block, setting the command type
// as Text instead of StoredProcedure
cmd.CommandType = CommandType.Text;

// Step 4
// Setting Oracle parameters

// Bind the parameter as OracleDbType.Blob to command for inserting image
OracleParameter param = cmd.Parameters.Add("blobtodb", OracleDbType.Blob);
param.Direction = ParameterDirection.Input;

// Assign Byte Array to Oracle Parameter
param.Value = ImageData;

// Bind the parameter as OracleDbType.Blob to command for retrieving the image
OracleParameter param2 = cmd.Parameters.Add("blobfromdb", OracleDbType.Blob);
param2.Direction = ParameterDirection.Output;

// Step 5
// Execute the Anonymous PL/SQL Block

// The anonymous PL/SQL block inserts the image to the
// database and then retrieves the images as an output parameter
cmd.ExecuteNonQuery();
Console.WriteLine("Image file inserted to database from " + SourceLoc);

// Step 6
// Save the retrieved image to the DestinationLoc in the file system

// Create a byte array
byte[] byteData = new byte[0];

// fetch the value of Oracle parameter into the byte array
byteData = (byte[])((OracleBlob)(cmd.Parameters[1].Value)).Value;

// get the length of the byte array
int ArraySize = new int();
ArraySize = byteData.GetUpperBound(0);

// Write the Blob data fetched from database to the filesystem at the
// destination location
FileStream fs1 = new FileStream(@DestinationLoc,
                                FileMode.OpenOrCreate, FileAccess.Write);
fs1.Write(byteData, 0,ArraySize);
fs1.Close();

Console.WriteLine("Image saved to " + DestinationLoc + " successfully !");
Console.WriteLine("");
Console.WriteLine("***********************************************************");
Console.WriteLine("Before running this application again, execute 'Listing 1' "); 
```

# android - 如何使用 adb 在 Android 设备上启动进程

> ID：14999039
> 
> 赞同：0
> 
> 时间：2013-02-21T09:47:19.513
> 
> 标签：android, adb

我正在使用 adb 命令来管理 android 手机上的进程。

我可以通过命令杀死特定进程

```
adb kill "PID"  (PID is the process ID) 
```

并且该过程被杀死。

但是当我使用命令启动它时

```
adb start "PID" 
```

它不会启动该过程。

我希望启动的进程位于 /system/bin 文件夹中，我不知道该进程的包或活动名称是什么。我只知道进程的“PID”和“用户”。

是否有任何命令可以在 android 设备上启动特定进程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T09:50:19.913

一旦你杀死了对应的进程`PID`，你怎么能重新启动它？

您可以尝试通过`adb`这种方式启动应用程序：-

```
adb shell
am start -n com.package.name/com.package.name.ActivityName 
```

或者你可以直接使用它：

```
adb shell am start -n com.package.name/com.package.name.ActivityName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T07:51:11.783

本机应用程序没有活动。它们就是这样 - 本机二进制文件。

如果您只知道进程的数字 ID - 那么`ps <PID>`命令将在`NAME`列中显示进程二进制文件的名称。像这样：

```
# ps 407
USER     PID   PPID  VSIZE  RSS     WCHAN    PC         NAME
root      407   1     4540   272   ffffffff 000160a4 S /sbin/adbd 
```

如果`PPID`值为`1`- 这意味着它已由系统启动，`init`并且该应用程序很可能是“服务”应用程序。要控制它，您需要找到服务的名称，然后只需使用`stop <service>`and `start <service>`。

要查找服务的名称运行`grep ^service /init*rc | grep <binary name>`服务的名称将在第二列（即“adbd”）：

```
# grep ^service /init*rc | grep /sbin/adbd
/init.rc:service adbd /sbin/adbd 
```

所以要正确控制这个应用程序 - 你应该使用`stop adbd`和`start adbd`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-10T18:40:22.913

您说您知道您的二进制文件在 /system/bin 中，所以我假设您也知道该二进制文件的名称。如果您不这样做，该命令将帮助您找出：

```
ps PID 
```

要启动二进制文件（例如正常运行时间），您只需在 shell 中输入其名称：

```
adb shell
uptime 
```

或在一个命令中

```
adb shell uptime 
```

但是如果您的二进制文件不在 $PATH 中列出的目录之一中，您必须输入它的完整路径

```
adb shell /system/bin/uptime 
```

您可以使用以下命令检查 $PATH：

```
adb shell echo $PATH 
```

# wordpress - Wordpress 帖子图片未显示在 Google plus 帖子中

> ID：14999054
> 
> 赞同：1
> 
> 时间：2013-02-21T09:47:55.427
> 
> 标签：wordpress, google-plus

Wordpress 帖子图片未显示在 Google plus 帖子中。

我有一个 Wordpress 博客。当我发布我的文章（有更多图片）时，Google Plus 中的链接没有在我的帖子标题和描述旁边显示我的任何帖子图片。

我的图片在 www.mysite.com/wp-content/uploads/2012/02/sampleimage.jpg 中。当我将此 URL 粘贴到浏览器中时，它会显示图像，但是当我在 Google 中发布 URL 时，它不会显示图像。

有没有人遇到过同样的问题？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:27:00.470

你在使用 og:image 元标记吗？[在这个论坛 ( http://productforums.google.com/forum/#!topic/webmasters/VPelac6eozA](http://productforums.google.com/forum/#!topic/webmasters/VPelac6eozA) )上有很多关于它的讨论，但我发现 og:image 非常适合我。

只需将其添加到您的脑海中：

```
<meta property='og:image' content='http://www.mysite.com/wp-content/uploads/2012/02/sampleimage.jpg'/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T21:44:48.440

我也有同样的问题，但在 Facebook 上。og:image 适用于 Facebook，但 Google+ 需要不同的标记：

```
<meta itemprop="image" content="yourimageurl.png"> 
```

我写了一个教程，让图像在 Google+、Facebook 和 Twitter 上正常工作，因为它们都有不同的标记。希望它会帮助你。

[如何让 Facebook、Twitter 和 Google+ 提取正确的图像](https://turbofuture.com/internet/Fixed-Incorrect-Blog-Post-Image-on-Google-Facebook-and-Twitter)

# c# - SQL Server 2008 如何将数据从表单保存到表

> ID：14999055
> 
> 赞同：-1
> 
> 时间：2013-02-21T09:47:57.517
> 
> 标签：c#, sql-server, visual-studio-2010

我正在做一个项目，我必须将表单中的值插入到 SQL Server 2008 表中。

插入的值之一是许可证号，但数据库中的类别列为空。我正在使用的代码是：

```
SqlCommand qry = new SqlCommand(
"INSERT INTO licnscatagory(license_number, catagory) 
 VALUES('"+ license_numberTextBox.Text +"','"+ catagoryComboBox.Text +"')", conn;
qry.ExecuteNonQuery(); 
```

在数据库`license_number`中有一个数据类型`numeric`和 `category`是`varchar(50)`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T11:54:46.503

使用此代码

```
SqlCommand qry = new SqlCommand(
     "INSERT INTO licnscatagory(license_number,catagory) 
     VALUES('"+ license_numberTextBox.Text +"','"+ catagoryComboBox.SelectedValue+"')", conn;
     qry.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T09:56:25.427

您的解决方案容易受到 SQL 注入攻击。想象一个用户在您的 license_numberTextBox 中输入以下内容。

'); DROP TABLE 目录；

除此之外，您的问题在于数字周围的单引号。在 ADO.NET 中执行此类插入或任何 SQL 查询的正确方法是使用参数。请参阅以下内容：

```
 SqlCommand qry = new SqlCommand("INSERT INTO licnscatagory (license_number, category) VALUES (@licenseNumber, @category)", conn);
        qry.Parameters.AddWithValue("licenseNumber", Convert.ToDecimal(license_numberTextBox.Text));
        qry.Parameters.AddWithValue("category", catagoryComboBox.Text);
        qry.ExecuteNonQuery(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T09:56:24.963

使用此代码..

```
 SqlCommand qry = new SqlCommand(
 "INSERT INTO licnscatagory(license_number,catagory) 
 VALUES('"+ license_numberTextBox.Text +"','"+ catagoryComboBox.SelectedItem.Text +"')", conn;
 qry.ExecuteNonQuery(); 
```

# php - htaccess 在不同机器上的行为不同

> ID：14999056
> 
> 赞同：3
> 
> 时间：2013-02-21T09:47:59.107
> 
> 标签：php, apache, .htaccess, mod-rewrite

我在我的 htaccess 中使用以下重写代码，但是有一个问题。

```
RewriteEngine On

RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^([A-Za-z0-9-_]+)/?$ /$1.php [NC,L,QSA]
RewriteRule ^admin/([A-Za-z0-9\-]+)/?$ /admin/$1.php [NC,L]
RewriteRule ^user-profile/([A-Za-z0-9]+)/?$ /user-profile.php?view=$1 [NC,L] 
```

> 机器 A：www.website.com/admin/admin.page [不工作，404] [admin.page.php 工作]
> 
> 机器 B：localhost/alias/admin/admin.page [作品]
> 
> 机器 A：www.website.com/user-profile/username [作品]
> 
> 机器 B：localhost/alias/user-profile/username [不起作用，302] [user-profile.php?view=username works]

怎么了？

（我在一台机器上使用别名，而不是在另一台机器上）

> 机器A：apache 2.2.22，php 5.4.3 winxp pro
> 
> 机器B：apache 2.2.22，php 5.4.3 win7 Ultimate

编辑：

> 127.0.0.1 - - [21/Feb/2013:11:08:32 +0100] "GET /alias/user-profile/username HTTP/1.1" 302 1373
> 
> 127.0.0.1 - - [21/Feb/2013:11:08:33 +0100]“获取/别名/帐户 HTTP/1.1”302 20
> 
> 127.0.0.1 - - [21/Feb/2013:11:08:33 +0100] “GET /alias/announcements HTTP/1.1”200 4157

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T06:47:57.590

重写规则不应触发 /alias url，因为您的重写规则将表达式定义为以 admin (^admin) 开头，不同的主机（www.website.com 和 localhost）可能不会到达同一个虚拟主机。这里的问题更可能是由于 url 的差异而不是您的重写规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:54:08.427

```
RewriteRule ^admin/admin.([A-Za-z0-9\-]+)/?$ /admin/admin.$1.php [NC,L] 
```

修复了管理部分，现在我需要修复配置文件部分..

# android - SDK 管理器 - 不会安装新包（安装按钮仍然“不可点击”）

> ID：14999058
> 
> 赞同：3
> 
> 时间：2013-02-21T09:48:13.437
> 
> 标签：android, eclipse, sdk, package

我有一个非常烦人的问题，当我尝试使用我的 Eclipse 版本打开一个导入的项目时，它告诉我除非我下载某个版本的 21，否则我不能这样做。然后它会打开我的 SDK 管理器，当我想安装新软件包来更新我的版本时，即使接受了条款和条件，也无法做到。

这是一张图片： ![在此处输入图像描述](../Images/bb7a0278d768a1f2f960fc9daf17c2b1.png)

欢迎任何帮助！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:55:03.230

`Android SDK Manager--> Tools--> Option-->click on Clear cache`尝试在刷新列表后 首先清除缓存`Android SDK Manager --> Packages --> Reload`

希望它会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T08:28:53.443

就我而言，我必须在**Tools->Options**中设置代理设置。

在 Internet Explorer 中，按 Alt+t -> 选择 Internet 选项 ->**连接**选项卡 -> 单击**Lan settings**。您可以在那里看到代理设置。

# wpf - WPF 窗口 GotFocus / LostFocus

> ID：14999059
> 
> 赞同：5
> 
> 时间：2013-02-21T09:48:14.300
> 
> 标签：wpf, window, focus

我有一个简单的任务要完成，或者至少在外观上......

我想处理一个窗口当前是否是 Windows 环境中当前选定窗口的事实。

我以为我只需要处理我的窗口的两个事件 LostFocus 和 GotFocus ，但它们没有触发。我可以选择窗口或单击桌面上的其他位置，没有任何事件被触发..

GotFocus 事件仅在我缩小或最大化窗口时触发。

难道我做错了什么 ？

谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T10:05:34.290

尝试使用激活/停用事件。GotFocus/LostFocus 旨在仅用于控件（例如，当您单击窗口内的控件时会触发）。

# svn - 将存储库与 SVN 混合

> ID：14999061
> 
> 赞同：3
> 
> 时间：2013-02-21T09:48:17.983
> 
> 标签：svn, repository

我正在使用框架交响乐（1.4）在PHP中开发一个Web应用程序。代码使用 SVN 进行版本控制。在这个网络应用程序中，我们所有的客户都有一个共同的基础，以及一些专门为每个客户创建的额外功能。这些细节在**项目代码中任何位置**的文件/文件夹中。我们在这里尝试做的是拥有可以轻松混合的不同存储库：

*   一为共同基地。当我们想要处理它时，我们可以签出这个存储库，做任何我们必须做的事情并提交......所以，SVN :)
*   每个客户一个。这就是棘手的地方......当我们必须处理特定的客户代码时，我们想检查同一个文件夹中的公共基础和客户存储库，做我们必须做的任何事情，**只提交特定的代码**，我提醒你分布在项目内的不同文件夹/文件中。

我已经环顾四周，发现了不同的东西，例如 svn 属性*external*或 svnadmin 子命令*dump*。但我没有找到任何似乎真正适合我需要的东西。因此，在我开始编写 shell 脚本来执行此操作并可能会弄乱我的项目之前，我的问题是：

*   你有没有遇到过这样的问题
*   您如何管理项目中的特定代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:40:51.947

创建多个分支，一个用于您的基本功能，一个用于每个客户。您可以在存储库中使用 svn:external 链接到您的基本功能文件。

# java - 关闭声纳中的资源冲突

> ID：14999065
> 
> 赞同：2
> 
> 时间：2013-02-21T09:48:25.400
> 
> 标签：java, database, database-connection, sonarqube

在我的 Dao 类中，为了关闭数据库资源，我编写了一个小函数，它接收 ResultSet、Connection 和 Statement 对象并关闭它。

我从我拥有的每个数据库访问方法的 finally 块中调用它。但 Sonar 将这些显示为违规行为，例如：

```
Ensure that resources like this Statement object are closed after use 
```

有什么方法可以让 Sonar 知道这些已经处理了吗？

使用的配置文件是“声纳方式”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T10:59:55.427

此规则由 PMD 引入 Sonar，它非常基本：它只是检查 finally 块中是否有“myResource.close()”调用。句号。如果您广泛使用“小功能”，那么您可能应该考虑停用此规则，因为它会产生太多误报。

您也可以尝试激活可能更智能的 Findbugs 规则。[在我们的声纳演示实例 - Nemo](http://nemo.sonarsource.org/rules_configuration/index/7?searchtext=close&plugins%5B%5D=findbugs&priorities%5B%5D=&rule_status=ACTIVE&inheritance=&commit=Search)上查看这些规则。

# ios - 如何在 GKSessionModeServer/GKSessionModeClient 模型中查找和连接设备

> ID：14999071
> 
> 赞同：0
> 
> 时间：2013-02-21T09:48:40.737
> 
> 标签：ios, bluetooth, gamekit

使用`GKPeerPickerController`我可以通过 bluetogether 轻松连接两个 ios 设备。但它仅在 GKSessionModePeer 模式下。

我使用代码在`GKSessionModeServer`模式下创建会话

```
GKSession *session=[[GKSession alloc] initWithSessionID:nil displayName:nil sessionMode:GKSessionModeServer];
session.delegate = self;
session.available = YES;
// Set data handler.
[session setDataReceiveHandler:self withContext:nil]; 
```

`GKSessionModeClient`此代码用于在另一台设备中以模式创建会话

```
GKSession *session=[[GKSession alloc] initWithSessionID:nil displayName:nil sessionMode:GKSessionModeClient];
session.delegate = self;
session.available = YES;
// Set data handler.
[session setDataReceiveHandler:self withContext:nil]; 
```

当我设置时，应该调用`session.available =YES`一些方法。`delegate`但是什么也没发生。为什么？

如何使用 api 找到其他设备并将它们连接在一起？或者任何其他方法可以通过蓝牙传输数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T08:22:21.830

最后我修复它。当我设置 session.available = YES 时，它会寻找其他 session ，方法：

```
- (void)session:(GKSession *)session peer:(NSString *)peerID didChangeState:(GKPeerConnectionState)state 
```

将被调用。

搜索时不能释放会话！！！

# arrays - Postgres 8.4.3：如何使用 unnest 将名称和名称字符串转换为规范化的数字 id

> ID：14999076
> 
> 赞同：3
> 
> 时间：2013-02-21T09:48:50.430
> 
> 标签：arrays, postgresql, insert

我有一个包含两个字符字段的表 region_town_names，一个包含区域名称，另一个包含逗号分隔的城镇列表

```
region  | towns
-------------------------------
regionA | townA, townB, townC    
regionB | townB, townD 
```

我还有两个表（region_id 和 town_id），每个地区/城镇都有数字 id

```
id  | name                              id  |  name
---------------                         ----------------
 1  | regionA                            1  |  townA
 2  | regionB                            2  |  townB
                                         3  |  townC
                                         4  |  townD 
```

我现在正在尝试填充一个规范化的表 region_town_ids ，它应该取消嵌套城镇列表并包含区域和城镇的 ID，如下所示：

```
 region_id | town_id
 -------------------
    1      |    1
    1      |    2
    1      |    3
    2      |    2
    2      |    4 
```

我可以很容易地得到名字并将它们插入

```
 insert into region_town_ids
   select region as region_id, unnest(string_to_array(towns,', ')) as town_id 
   from region_town_names; 
```

但是如何在同一语句中查找名称的 ID 并插入它们而不是名称？那可能吗？我需要一个 psql 函数吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:01:21.430

[SQL小提琴](http://www.sqlfiddle.com/#!11/fbf32/1)

```
select
    rid.id region_id,
    tid.id town_id
from
    (
        select
            region region_name,
            unnest(string_to_array(towns,', ')) town_name
        from region_town_names
    ) rtn
    inner join
    region_id rid on rid.name = rtn.region_name 
    inner join
    town_id tid on tid.name = rtn.town_name 
```

这回答了你的问题，但我怀疑你弄错了。请注意 town_id #2 如何属于两个区域。可能吗？

另外我认为您可以简化模型，消除`region_town_ids`表格并使`town_id`表格如下所示：

```
(id, region_id, name) 
```

# javascript - 相对高度和宽度，但绝对定位 x, y

> ID：14999088
> 
> 赞同：9
> 
> 时间：2013-02-21T09:49:08.917
> 
> 标签：javascript, jquery, css

我有一个巨大的水平滚动网站。以[马里奥世界](http://gamesbackgrounds.com/walls/super_mario_world_wallpaper_4-HD.jpg)为例。每个“资产”都是绝对定位的。

我希望项目的大小（高度和宽度）与浏览器的视口相关（因此使用百分比），但需要使用左侧的实际像素等来定位项目。

当我这样做时，很明显，当我调整浏览器窗口的大小时，资产的大小会正确调整。但是项目的位置是以像素为单位的，所以事情相对于背景会移动。

这个问题有简单的 CSS 解决方案吗？使用百分比来定义位置（例如左：50%）并不是一个很好的解决方案，因为它不是很准确（参见下面的 jsfiddle）。或者我应该使用 JS 查看 resize 事件并这样做？如果是这样，怎么做？

我不确定我现在是否有意义..所以如果有任何问题请告诉我。

**编辑**

这是一个 JSFiddle：http: [//jsfiddle.net/BZ77t/](http://jsfiddle.net/BZ77t/)

请注意，当您调整窗口大小时，黑色块 ( `#blockpx`) 使用像素定位，因此在调整大小期间不会受到影响。然而，红色块 ( `#blockpercentage`) 是使用百分比来调整大小和定位的，达到了我想要的效果：坚持预期的位置（即背景图像的位置）。然而，它并不是很准确——在这个例子中这并不重要，但是在更大的设置（更宽的宽度）中，差异变得相当大。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:41:22.690

解决方案是使用包含元素和 javascript 的组合：http: [//jsfiddle.net/KaaXg/3/](http://jsfiddle.net/KaaXg/3/)

这个小提琴包括这个 javascript 功能：

```
$(document).ready(function(){
    $(".container").css("width", $(".image").width());        
    $(window).resize(function(){
        $(".container").css("width", $(".image").width());        
    });
}); 
```

这里要注意的最重要的事情是，`left`值`width`是相对于`body`元素计算的，这是无意的。

为了解决这个问题，我们添加了一个包含元素，其中包含`div`用于页面上红色块图形的图像和其他标签。

但是，如果没有 javascript，在`left`调整窗口大小后重新加载页面时，该属性仍然只会“更新”。块级元素不会自行水平更新。

因此，您希望`left`and`width`与背景图像成比例，但它们不会随着页面大小调整或仅使用 CSS 移动而更新。上面的 javascript 解决方案在页面调整大小时动态更新包含元素的宽度，解决了这个问题。

我单独留下了`bottom`和`height`css 样式，因为它们按照您网站的预期工作，容器的高度会增加以容纳其中的图像。

我不确定你想对页面上的固定像素黑色块做什么，所以我保持原样。

***编辑：我认真地检查了这个项目，创建了一个对象工厂来创建新的图形并更新了页面的代码。这个解决方案几乎不需要 HTML 或 CSS，有更多的 javascript 代码，但会更容易在页面上实现动态图形/功能添加新元素。[http://jsfiddle.net/RnCWN/9/](http://jsfiddle.net/RnCWN/9/)***

我在这里提出的 javascript 解决方案使用实时更新百分比来设置基于百分比的块的`width`和`left`属性，以及初始化静态`height`和`bottom`属性。

通过此版本，您可以使用该方法`PercentageBasedGraphic`在您的页面上创建一个浮动框。这是一个例子：

```
PercentageBasedGraphic(25, 10, 4, 30, "block1"); 
```

此函数将添加`div`带有`id = "block1"`属性的 a，以及相应`width`的 、`height`、`left`和`bottom`值（均以百分比表示）。它还返回一个对象，其中包含调整`div`刚刚创建的大小和重新定位所需的所有信息。您可以*通过*向每个`div`. 无论如何，我们最终如何使用我们返回的对象？

```
addGraphic(graphicArr, PercentageBasedGraphic(25, 10, 4, 30, "block1")); 
```

该`addGraphic`函数将每个新的浮动框添加到一个数组中。稍后，我们在调整窗口大小时遍历这个数组以重新定位我们定义的所有浮动框。

老实说，超级马里奥的画面让这一切变得很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:23:37.837

您可以尝试检查窗口的旧（调整大小之前）和新（之后）宽度和高度之间的差异，并使用此差异来更改底部和左侧位置：

```
$(document).ready(function(){
    var width = $(window).width();
    var height = $(window).height();
    var blockLeft = parseInt($('#blockpx').css('left'));
    var blockBottom = parseInt($('#blockpx').css('bottom'));
    $(window).resize(function(){
        var difWidth = width - $(this).width();
        var difHeight = height - $(this).height();
        if (difHeight>0) {
            $('#blockpx').css('bottom',blockBottom-difHeight + 'px');
        } else {
            $('#blockpx').css('bottom',blockBottom+difHeight + 'px');
        }
        if (difWidth>0) {
            $('#blockpx').css('left',blockLeft-difWidth + 'px');
        } else {
            $('#blockpx').css('left',blockLeft+difWidth + 'px');
        }
    });
}); 
```

试试[jsfiddle](http://jsfiddle.net/BZ77t/15/)。

它是一个 jquery 变体，你可以使用普通的 javascript 来做同样的事情。

# c - 函数插入仅适用于 malloc 而不是免费的

> ID：14999090
> 
> 赞同：2
> 
> 时间：2013-02-21T09:49:16.923
> 
> 标签：c, malloc, free, dynamic-linking, ld-preload

我在通过使用函数插入监视 malloc 和 free 时遇到了一个小问题。

当只为 malloc 执行函数插入时，它按预期工作。但是，当尝试插入 free 时，它​​也会进入一个循环；我似乎免费被递归调用，但我只是不知道为什么。

这是 malloc 和 free 函数的代码。(mod_malloc_free.c)

```
#define _GNU_SOURCE
#include <stdio.h>
#include <stdint.h>
#include <dlfcn.h>

void* malloc(size_t size) {

   static void* (*real_malloc)(size_t) = NULL;

   printf("%s\n", "inside shared malloc");

   if(!real_malloc)
        real_malloc = dlsym(RTLD_NEXT, "malloc");

   void * p = real_malloc(size);

   printf("malloc(%d) = %p\n",size, p );

   printf("%s\n", "returning from shared malloc");

   return p;

   }

void free(void* ap ) {

    static void (*real_free)(void*) = NULL;

  printf("inside shared free...\n");

  if(!real_free)
       real_free = dlsym(RTLD_NEXT, "free");

   printf("free = %p\n", ap);

   real_free(ap);

} 
```

主要简单地包括：

```
#include <stdio.h>
#include <malloc.h>

int main(void) {

    void * p = malloc(123);

    printf("p = %p\n",p );

    free(p);

    return 0; 
```

}

编译为：

> gcc -shared -ldl -fPIC mod_malloc_free.c -o libcustom.so
> 
> gcc -o smallMain -Wall smallMain.c
> 
> LD_PRELOAD=./libcustom.so ./smallMain

此致

尼菲肯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:14:38.250

glibc 提供带有`__`前缀的真实符号（不弱）。所以尝试查找符号`__malloc`和`__free`。

并且只是为了防止递归，不要使用 printf() 或任何其他可能需要在包装器内分配内存的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:39:53.487

很可能`printf`是在召唤`free`。当然，这意味着它还执行内存分配，所以它提出了一个问题，为什么在`malloc`. 可能`printf`正在调用替代方案，例如`calloc`or `realloc`。

要仅插入您自己的代码，请使用宏来替换调用或单独链接您的代码，并使用链接器功能在与外部库链接之前删除您的`malloc`and `free`（例如`-unexported_symbol`Apple 版本的 ld 的开关）。

要插入所有代码，`printf`请从您的例程中删除。调用更简单的例程，例如`fputs`代替。或者，使用静态标志来抑制递归：

```
void free(void *ap)
{
    static void (*RealFree)(void *) = 0;
    If (!RealFree)
        RealFree = dlsym(RTLD_NEXT, "free");

    static int InsideCall = 0;
    if (!InsideCall)
    {
        InsideCall = 1;
        … Do stuff…
        InsideCall = 0;
    }
} 
```

（如果您有多个线程或执行内存分配的异常处理程序，则必须采取额外的步骤。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:34:43.850

我建议您使用宏将 malloc/free 替换为您自己的函数，而不是使用函数指针。

这样的事情应该这样做：

```
 #ifdef REPLACE_MALLOC
 #define malloc(x) my_mallc(x)
 #define free(x)   my_free(x)
 #endif 
```

不要忘记做：

```
 #undef malloc
 #undef free 
```

在您实际实施之前。

但是请注意，从技术上讲，这不是“正确的”——你不应该将宏用于标准库的一部分，所以如果它停止工作，请不要在这里抱怨——特别是，微软已经做了这样的事情在调试版本中替换`malloc`为它的调试版本。

# c# - 将 ListView.Items.Count 绑定到标签的一种方法（Windows 窗体）

> ID：14999093
> 
> 赞同：0
> 
> 时间：2013-02-21T09:49:27.497
> 
> 标签：c#, winforms, data-binding

我有一个`ListView`包含一些我需要执行一些操作的记录。我希望将这些记录计入执行按钮，因此按钮的 .Text 属性会显示“执行（[items_count]）”。

当然项目是由用户从列表中添加/删除的，所以我想刷新计数器。我正在考虑在添加/删除项目时[添加一个要触发的事件](https://stackoverflow.com/questions/3041069/add-event-handler-for-listview-items-added)，但我不想创建新的 listView 类 - 我希望它尽可能简单。

我尝试使用[此代码](http://www.c-sharpcorner.com/blogs/581/how-to-binding-a-property-to-a-label-control-in-a-windows-f.aspx)，但失败了。我所做的是：

```
// in the form's code:
public string ItemsCount
{
    get { return String.Format("Execute ({0})", myListView.Items.Count); }
}

// in the form's constructor:
myButton.DataBindings.Add("Text", this, "ItemsCount"); 
```

而且它一直只显示“Execute {0)”。

是否有一个简单的解决方案，所以我不必更改现有对象（例如将`myListView`' 类更改为继承的自定义类`ListView`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:21:26.707

我认为一旦 ListView 中的 Items 集合发生更改，您需要提供某种更改通知。检查[此链接](http://msdn.microsoft.com/en-us/library/xz45s2bh.aspx)以获取有关实施更改通知的帮助。

**编辑**

我已经整理了有关 WinForms ListView 的信息，看起来没有简单的方法可以检测何时更改 Items 集合。检查[相关讨论](https://stackoverflow.com/questions/47169/is-there-an-event-that-triggers-if-the-number-of-listviewitems-in-a-listview-cha)。

所以恐怕这里唯一可用的选择是实际继承ListView。

# android - 如何使用谷歌地图v2显示两点之间的路线

> ID：14999097
> 
> 赞同：0
> 
> 时间：2013-02-21T09:49:39.920
> 
> 标签：android, google-maps, maproute

我想在 Google Maps V2 中显示两点之间的路线。我可以使用 V1 实现这一点，但 Google Map V2 不支持地理点。所以我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:54:42.113

您可以为路线绘制折线。这里的文档：

[https://developers.google.com/maps/documentation/javascript/v2/overlays#Drawing_Polylines](https://developers.google.com/maps/documentation/javascript/v2/overlays#Drawing_Polylines)

如果您的意思是绘制您在 Google 地图路线中看到的实际路线，请阅读[此处](https://stackoverflow.com/questions/3922086/google-map-static-drawing-route-instead-of-straight-line)的讨论。基本上你需要使用[DirectionService](http://code.google.com/apis/maps/documentation/javascript/reference.html#DirectionsService)

# c++ - 将智能指针显式转换为指针类型的原始指针。

> ID：14999098
> 
> 赞同：1
> 
> 时间：2013-02-21T09:49:47.013
> 
> 标签：c++

抱歉，如果这是一个非常基本的问题，我正在尝试运行以下程序，但我遇到了分段错误。

**我明白什么？**

有一个函数 proc(t) ，其中 t 通过运算符 T 与 T* 关联*。因此，在执行 proc(t) 函数时，我们将有一个指向 T 的指针类型*，并且调用 display () 函数是合法的。

我想要的是 ？

1）我在哪里犯了错误？

2）我的理解是否正确？

```
#include <iostream>

using namespace std;

template <typename T>
class sPtr
{
    private:
       T * __pointee;
     public:

        operator T * () {
                cout <<"Inside T* () "<<endl;
        };
    explicit sPtr ( T * t )
    {

      __pointee = t;
    };
    T * operator->() {
        return __pointee;
     }
};

class JTest
{
 private:
        int x;
 public:
   JTest ( int l=100) { x=l; };
    void display ();
};

void JTest::display()
{
  cout <<"Display API x is "<<x<<endl;
}

void proc (JTest * tmp)
{
  cout <<" proc"<<endl;
  tmp->display ();
  cout <<"Invoking JTest -> display "<<endl;
}

int main ( int argc, char ** argv)
{
 sPtr <JTest> t(new JTest);
 t->display();
 proc(t);   // Invokes operator T*().

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:57:00.650

您`operator T*()`缺少返回语句，因此它显然返回了一个垃圾值（指向内存中随机位置的指针），并且取消引用该指针而不是段错误。

你的编译器怎么没有出错，这超出了我的范围。

# php - 在 auto_increment 中遇到非常奇怪的问题

> ID：14999102
> 
> 赞同：3
> 
> 时间：2013-02-21T09:49:54.380
> 
> 标签：php, mysql, phpmyadmin, auto-increment

我有桌子叫`notifications`，我有`id auto_increment primary key`。

**完整的表结构。**

```
CREATE TABLE IF NOT EXISTS `notifications` (
  `id` int(11) NOT NULL auto_increment,
  `user_id` int(11) NOT NULL,
  `sender_id` int(11) NOT NULL,
  `sender_picture` varchar(300) NOT NULL,
  `title` varchar(300) NOT NULL,
  `message_link` varchar(500) NOT NULL,
  `created` datetime NOT NULL,
  `modified` datetime NOT NULL,
  `status` tinyint(4) NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
```

现在的问题是 auto_increment 应该插入如下记录。

```
1 record
2 record
3 record
```

但它真的很奇怪为什么我的`phpmyadmin`节目记录如下。

```
1 record
3 record
2 record
```

有`options`什么我需要设置的吗`phpmyadmin`？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:54:39.893

其实这不是问题。保持记录不变，因为这些记录是随机插入到表中的。

只需在投影期间执行您想要的排序（*SELECT 语句*）。例如，

```
SELECT * 
FROM   TABLENAME 
ORDER  BY colName ASC // or DESC for descending 
```

客户端不会查看数据库，而是查看您创建的应用程序`:D`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:54:12.387

有时 phpmyadmin 会按另一个字段对记录进行排序以进行显示。

# jquery - Jquery 检查输入 .val() 是否包含某些字符

> ID：14999104
> 
> 赞同：4
> 
> 时间：2013-02-21T09:49:56.893
> 
> 标签：jquery

我需要检查页面上的输入字段是否包含字符。

这是用于非常基本的电子邮件地址验证，所以我只想检查文本是否不为空，是否包含`@`字符`.`。

我一直在尝试这种方式：

```
if (($("." + parentname.attr("class") + " #email").val().contains("@")) && ($("." + parentname.attr("class") + " #email").val().contains(".")))
{
    email = 1;
} 
```

假设值为`me@this.com`，此代码将引发以下错误：

> 对象 me@this.com 没有方法“包含”

所以我做了一些研究，发现 .contains 是针对 DOM 对象的，而不是用于建议尝试这个的字符串：

```
if (($("." + parentname.attr("class") + " #email").val().IndexOf("@") != -1) && ($("." + parentname.attr("class") + " #email").val().IndexOf(".") != -1))
{
    email = 1;
} 
```

这会导致类似的错误：

> 对象 me@this.com 没有方法“IndexOf”

我在这里基本上没有想法，特别是考虑到以下代码在我制作的另一个站点中可以按我的意愿工作：

```
if ($("#contact-email").val().contains("yahoo.com")) {
    $(".errmsg").text("Domain yahoo.com has been banned due to excessive spam, please use another domain.");
} 
```

谁能建议我可以尝试的任何其他事情，或者更好的是，如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T09:55:53.557

`indexOf`开头不使用大写字母**I。**试试这个：

```
if (($("." + parentname.attr("class") + " #email").val().indexOf("@") != -1) && ($("." + parentname.attr("class") + " #email").val().indexOf(".") != -1))
{
  email = 1;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T09:55:45.950

我有一个在 Javascript 中验证电子邮件的功能：

```
function isEmail(emailV){
    if(emailV != null && emailV != undefined){
        var pattern = new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);
        return pattern.test(emailV);    
    }
    else{
        return false;
    }

} 
```

它验证电子邮件允许的所有字符，您只需像这样调用它：

```
if(isEmail($("#contact-email").val())){
   //EMAIL IS VALID
}
else{
   //EMAIL IS NOT VALID
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:09:23.073

`**[LIVE DEMO](http://jsbin.com/eputip/1/edit)**`

```
// VISUALIZE ERRORS
function showError(el, err){
    return err ?  $(el).addClass('error') :  $(el).removeClass('error');
}

// REGEXES
var isValidEmailAddress = function( emailAddress ) {
    var pattern = new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);
    return pattern.test(emailAddress);
};

// "EMAIL"
function validate_email( el, val ){
    var err = !isValidEmailAddress( val );
    showError(el, err);
}

$('#email').on('input', function(){
  validate_email( this, this.value );
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T09:57:17.453

该方法是`indexOf`代替`IndexOf`. 如果你更正你的代码，它应该像一个魅力:)。

试试这个代码片段：

```
if (($("." + parentname.attr("class") + " #email").val().indexOf("@") !== -1) 
    && ($("." + parentname.attr("class") + " #email").val().indexOf(".") !== -1))
{
    email = 1;
} 
```

# c++ - 检查输入是否为整数

> ID：14999105
> 
> 赞同：0
> 
> 时间：2013-02-21T09:49:59.200
> 
> 标签：c++, int, cin

我试图确保用户输入是一个正整数，并且无论用户尝试输入什么，我的函数都能正常工作。

```
int getNumber()
{
    string userInput;
    int userNumber;
    bool badInput = true;
    cout<<"Enter a positive integer: ";
    cin>>userInput;
    while (badInput)
    {
        for (int i=0; i<userInput.length(); i++)
        {
            if (isdigit(userInput[i]))
            {
                badInput = false;
            }
            else
            {
                badInput = true;
                cout<<"That wasn't a valid input, try again: ";
                cin>>userInput;
                break;
            }
        }
    }
    userNumber = atoi(userInput.c_str());
    return userNumber;
} 
```

有没有更清洁的方法来做到这一点，或者这是最好的方法？我尝试了各种其他方法，例如使用 cin.bad 等，但他们总是设法错过一些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:47:27.610

如果您需要检查正整数，您可能还需要将文本转换为整数。你应该同时做这两个；类似于：

```
std::string line;
if ( !std::getline( std::cin, line ) ) {
    //  no input available...
} else {
    std::istringstream parser( line );
    int userNumber;
    if ( parser >> userNumber >> std::ws
            && parser.get() == EOF
            && userNumber > 0 ) {
        //  All OK...
    } else {
        //  Some error in the input.
    }
} 
```

`strtol`如果您有来自其他地方的字符串，也可以使用。错误检测有点棘手，因为[`strtol`](http://en.cppreference.com/w/cpp/string/byte/strtol) 在某些情况下有一些奇怪的语义：

```
int
getPositiveInteger( std::string const& input )
{
    char const* end;
    errno = 0;
    long results = strtol( input.c_str(), &end, 10 );
    if ( end != input.c_str() ) {
        while ( isspace( static_cast<unsigned char>( *end) ) ) {
            ++ end;
        }
    }
    return (errno == 0
            && end != input.c_str()
            && *end == '\0'
            && results > 0
            && results <= INT_MAX)
        ? results
        : -1;
} 
```

（如果出现错误，我已返回 -1。）

您会注意到必须测试的条件数量，以确保其`stdtol`正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:07:16.050

您可以[`std::string::find_first_not_of()`](http://en.cppreference.com/w/cpp/string/basic_string/find_first_not_of)用于测试数字和[`std::stoi`](http://en.cppreference.com/w/cpp/string/basic_string/stol)溢出

```
std::string input;
bool badInput;
int i;

std::cout << "Enter a positive integer: ";
do {
    std::cin >> input;
    try {
        badInput = input.find_first_not_of("0123456789") != std::string::npos;
        if (!badInput)
            i = std::stoi(input);
    } catch (const std::invalid_argument&) {
        badInput = true;
    } catch (const std::out_of_range&) {
        badInput = true;
    }

    if (badInput)
        std::cout << "That wasn't a valid input, try again: ";
} while (badInput); 
```

不过，这不会检查前导`+`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:02:44.297

你可以简单地使用[`strtol`](http://www.cplusplus.com/reference/cstdlib/strtol)，像这样：

```
char str[] = "+12345";
char* end;
long number = strtol(str, &end, 10);
if (number < 0) {
    printf("Number is negative!\n");
    // ...
}
if (*end) {
    printf("Junk found after number: '%s'\n", end);
    // ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T10:11:02.493

就像mvp说的，`strol`是要走的路。

```
bool string_to_int(char* s, int* val) {
   char* endptr;
   errno = 0; /* reset errno */
   int i = strtol(s, &endptr, 10);
   if (endptr == s) return false; /* conversion failed */
   if (*endptr) return false; /* unexpected characters behind the integer */
   if (errno) return false; /* out of range */
   *val = i;
   return true;
} 
```

# mysql - 了解slow.log mysql

> ID：14999106
> 
> 赞同：1
> 
> 时间：2013-02-21T09:49:59.310
> 
> 标签：mysql

我对 mysql slow.log 输出有疑问。查询 mysql slow 显示了这一点，我用 mysql 检查了相同的`explain`内容，它说只检查了 5 行，但 mysql slow 说检查了大约 7 lkh 行。

另外在我的查询中没有写`set timestamp`

```
 # User@Host: dba[dba] @ localhost []
   # Query_time: 7.282718  Lock_time: 1.291532 Rows_sent: 0  Rows_examined: 651223
   SET timestamp=1361437845;
   SELECT *
   FROM tableA
   WHERE app='pic' and sub
   LIKE '%katrina%'
   order by id desc limit 5 
```

这是解释输出

```
 1 SIMPLE tableA index NULL  PRIMARY 4 NULL  5 Using where 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T17:44:25.363

您只有 5 行，因为您将结果集限制为 5 行。查看查询的最后一行。MySQL 仍然必须检查这 651223 行以找到它只显示 5 行的结果集。这是因为不能在列上使用索引，`sub`因为您的 LIKE 子句以`%`. 如果您在 column 上有索引`app`，则可能由于多种原因不使用它。与您的表所​​包含的行数相比，您的不同值可能太少了。因此 MySQL 决定使用主键索引进行排序（您的 order by 子句）。至少我是这么认为的，因为我无法`explain`在您的评论中真正阅读您的结果。请在下一次将此类信息编辑到问题中。

这`SET timestamp=1361437845`是查询作为 unix_timestamp 执行的时间。

**更新（进一步解释）：**

您的 LIKE 子句是`LIKE '%katrina%'`. 这意味着“字符串中的某处是卡特里娜飓风，它之前和之后可能有字符”。现在想象一下，您想根据这些标准在电话簿中查找某人。电话簿按字母顺序排列的事实是没有用的，因为这些人的名字可能是 Ankatrina 或 Zekatrina。与您在 column 上的索引相同`sub`。

假设您有 300 万行，其中 100 万行在列应用程序中有“pic”，100 万行有“nic”，100 万行有“asdf”。这意味着，查看索引实际上是额外的工作，然后在表中查找实际记录。所以有时只扫描整个表会更便宜。但就像我说的，这只是一个猜测。我们没有关于您的数据库的足够信息。

拥有索引并不能保证一定会使用该索引。

之所以`EXPLAIN`说 5 rows 而不是 slow-query-log 的原因是，这`EXPLAIN`实际上只是一个猜测，优化器可能如何处理您的查询。当您想知道如何处理它时，请使用`EXPLAIN EXTENDED`. 这里还有一点棘手的是，如果您不需要，查询就不必检查这么多行`ORDER BY id DESC`。然后 MySQL 真的会扫描 5 行并吐出结果，因为你的`LIMIT 5`. 由于您的订购，它可能必须首先创建一个临时表，对事物进行排序，然后从该表中吐出 5 行。可能是在 中没有考虑到这`EXPLAIN`一点`slow-query-log`。

# windows-phone-7 - 订阅照片事件

> ID：14999112
> 
> 赞同：0
> 
> 时间：2013-02-21T09:50:21.463
> 
> 标签：windows-phone-7, events, windows-phone-7.1, windows-phone-8

当用户从我的应用程序外部拍照时，是否可以在我的应用程序中收到通知？例如，当我使用手机侧面的按钮拍照时，我希望在我的应用程序中也自动获取该照片并在那里进行处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:05:17.750

**不可以**，用户拍照时不能直接收到通知。

但是，您可以[与 Pictures Hub 集成](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202966%28v=vs.105%29.aspx)，以便用户在拍摄后可以轻松分享照片，如果他们决定这样做的话。

# sql - 带有左外连接的选择查询从主表返回太多结果

> ID：14999113
> 
> 赞同：0
> 
> 时间：2013-02-21T09:50:21.390
> 
> 标签：sql

好的，这是选择语句

```
SELECT dbo.tbl_inspectors.user_firstname, 
       dbo.tbl_inspectors.user_lastname, 
       dbo.tbl_inspectors.user_loc, 
       dbo.tbl_appraisals.appPartA, 
       dbo.tbl_appraisals.appPartB, 
       dbo.tbl_appraisals.appAppraised, 
       dbo.tbl_appraisals.appFinalized,
       dbo.tbl_appraisals.appDate,
       dbo.tbl_inspectors.appProcStart, 
       dbo.tbl_inspectors.appDue, 
       dbo.tbl_inspectors.inspAdhocStaff, 
       dbo.tbl_inspectors.access_id, 
       dbo.tbl_appraisals.appraiseID, dbo.tbl_inspectors.user_id
FROM   dbo.tbl_inspectors 
       LEFT OUTER JOIN
       dbo.tbl_appraisals ON dbo.tbl_inspectors.user_id = bo.tbl_appraisals.inspectID 
```

如果 tbl_appraisals 表中有多个针对 tbl_inspectors.user_id 的结果，那么我会为每个检查员获得多个结果，我只想让它从 tbl_appraisals 中针对 tbl_inspectors user_id 提取最新匹配，我怎样才能简单地实现这一点？

PS tbl_appraisals.appDate 是确定 tbl_appraisals 最新结果的字段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:11:43.227

假设引擎不是 MySQL ......

这是“每组 TOP 1”问题

```
SELECT
    *
FROM
    (
    SELECT I.user_firstname, 
           I.user_lastname, 
           I.user_loc, 
           A.appPartA, 
           A.appPartB, 
           A.appAppraised, 
           A.appFinalized,
           A.appDate,
           I.appProcStart, 
           I.appDue, 
           I.inspAdhocStaff, 
           I.access_id, 
           A.appraiseID,
           I.USER_ID,
           ROW_NUMBER() OVER (PARTITION BY I.user_id ORDER BY COALESCE(A.appDate, '19000101') DESC) AS rn
    FROM   dbo.tbl_inspectors I
           LEFT OUTER JOIN
           dbo.tbl_appraisals A ON I.user_id = A.inspectID
    ) X
WHERE
    X.rn = 1 
```

# php - stream_get_contents 和应用内验证仅有时有效

> ID：14999115
> 
> 赞同：0
> 
> 时间：2013-02-21T09:50:27.163
> 
> 标签：php

我正在使用此代码对苹果的服务器执行应用内收据验证。运行此脚本的时间大约为 50%，一切正常。然而，在另外 50% 的时间里，我得到一个空的 json 响应。我没有任何例外。任何想法为什么？

```
function do_post_request($url, $data, $optional_headers = null)
{
  $params = array('http' => array(
              'method' => 'POST',
              'content' => $data
            ));
  if ($optional_headers !== null) {
    $params['http']['header'] = $optional_headers;
  }
  $ctx = stream_context_create($params);
  $fp = @fopen($url, 'rb', false, $ctx);
  if (!$fp) {
    throw new Exception("Problem with $url, $php_errormsg");
  }
  $meta = stream_get_meta_data($fp);

      print_r($meta);

  stream_set_timeout($fp, 200);
  $response = @stream_get_contents($fp);
  if ($response === false) {
    throw new Exception("Problem reading data from $url, $php_errormsg");
    }
  return $response;
}

$appleURL = "https://buy.itunes.apple.com/verifyReceipt";

$receipt = json_encode(array("receipt-data" => $receiptdata));
$response_json = do_post_request($appleURL, $receipt);
$response = json_decode($response_json);
var_dump($response_json); 
```

这就是我 var_dump 流元数据时得到的

```
array(10) { ["wrapper_data"]=> array(2) { ["headers"]=> array(0) { } ["readbuf"]=> resource(6) of type (stream) } ["wrapper_type"]=> string(4) "cURL" ["stream_type"]=> string(4) "cURL" ["mode"]=> string(2) "rb" ["unread_bytes"]=> int(0) ["seekable"]=> bool(false) ["uri"]=> string(42) "https://buy.itunes.apple.com/verifyReceipt" ["timed_out"]=> bool(false) ["blocked"]=> bool(true) ["eof"]=> bool(false) } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T00:26:51.890

我遇到了通过 tcp 与其他人的服务器通信的此类问题。我从来没有完全理解根本原因，但通过使用阻塞来让事情正常工作[这在用例中是可以容忍的]

```
 stream_set_blocking ($conn, true); 
    // other stuff
    stream_set_timeout($conn, 60);
    $connResponse = stream_get_contents($conn); 
```

# php - 如何从点击银行 API 获取产品？

> ID：14999116
> 
> 赞同：2
> 
> 时间：2013-02-21T09:50:28.063
> 
> 标签：php, mysql, api, clickbank

我正在使用 click bank API。在该 API 中，我想显示该 API 的产品列表。我是 click bank API 的初学者。

例如

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,"https://api.clickbank.com/rest/1.3/products/");
curl_setopt($ch, CURLOPT_HEADER, true); 
curl_setopt($ch, CURLOPT_HTTPGET, true); 
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Accept: application/xml", "Authorization:DEV-DEVAPIKEY:API-CLERKAPIKEY"));
$result = curl_exec($ch);
curl_close($ch);

print $result; 
```

如何解决它。请尽快给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:05:12.500

尝试

```
curl_setopt($ch, CURLOPT_URL,"https://api.clickbank.com/rest/1.3/products/list"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-19T15:18:56.617

我相信产品 API 仅适用于**您**作为卖家的产品，我认为它不会为您提供市场上的所有产品（如果这是您所追求的）。我遇到了类似的问题，但过去我发现有一种方法可以以 .zip 格式下载整个市场。

[https://support.clickbank.com/hc/en-us/articles/220376547-Marketplace-Feed](https://support.clickbank.com/hc/en-us/articles/220376547-Marketplace-Feed)

# c# - ASP.NET MVC4：属性参数必须是属性参数类型的常量表达式、typeof表达式或数组创建表达式

> ID：14999117
> 
> 赞同：9
> 
> 时间：2013-02-21T09:50:28.830
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, data-annotations

我有以下代码：

```
 [Required(ErrorMessage = MessageModel.translateMessage("required")))]
    [Display(Name= MessageModel.translateMessage("id"))]
    public string user_id { get; set; } 
```

我正在尝试使错误消息动态化，但编译时出现错误。：

`"An attribute argument must be a constant expression , typeof expression or array creation expression of an attribute parameter type."`

这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-21T12:12:23.090

首先，您创建一个 Resource .resx 文件，该文件将包含您的本地化字符串。

当您声明属性时，您设置了 ResourceType 参数。这会导致将 Name、ShortName 和 Description 参数用作资源键而不是值。

```
[Display(Name = "GenreName", ShortName = "GenreShortName", Description = "GenreDescription", ResourceType = typeof(MyResources))]
public string Genre { get; set; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T09:58:57.770

错误消息说“属性参数必须是常量表达式......”。

这意味着`DisplayName`属性的参数必须是常量表达式（例如字符串、整数等），或错误消息中列出的任何其他表达式类型。

如果你想本地化一个属性，那么你需要一个支持它的属性。如果你使用的是 ASP.Net 4，那么 DisplayAttribute 应该是这样的：

```
[Display(Name="ID",Resource=typeof(MessageModel.translateMessage("id")))]
public string user_id { get; set; } 
```

也请检查达林的这个[答案](https://stackoverflow.com/a/2432520/1551730)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-13T15:40:33.410

很晚才回复。

DataAnnotations 参数值需要常量，实际字符串。所以，你不能在这里写一个方法。您是否需要任何类型的本地化然后创建资源文件。然后编写类似这样的代码。这里“RequiredField”和“Email”是在资源文件中创建的键，“ViewModelResource”是资源文件的名称。

```
[Required(ErrorMessageResourceName = "RequiredField", ErrorMessageResourceType = typeof(ViewModelResource))]
[Display(Name = "Email", ResourceType=typeof(ViewModelResource))]
public string Email{ get; set; } 
```

如果您想根据条件自定义消息，则根据条件创建自己的“自定义数据注释”。

# javascript - 如何在javascript中替换不在href标签内的URL

> ID：14999119
> 
> 赞同：5
> 
> 时间：2013-02-21T09:50:31.240
> 
> 标签：javascript, regex, regex-negation

我有一个包含 URL 链接的文本的情况。链接有两种形式

1.  www.stackoverflow.com
2.  <a href="http://www.stackoverflow.com">堆栈溢出</a>

我正在尝试创建一个使用正则表达式的简单函数，该函数将使用 A HREF 标记包装类型**1**的所有链接，但让其他链接已经单独包装。

我有类似的东西，但没有成功。

```
function replaceURLWithHTMLLinks(text) {
    var exp = /(<(\s*)a(\s)*href.*>.*<\/(\s)*a(\s*)>)/ig;
    var matches = exp.exec(text);
    for(var i=0; i < matches.length; i++) {
        var line = matches[i];
        if(!exp.test(line)) {
            var exp2 = /(\b(?:(?:(?:https?|ftp|file):\/\/|www\.|ftp\.)[-A-Z0-9+&@#\/%?=~_|$!:,.;]*[-A-Z0-9+&@#\/%=~_|$])|”(?:(?:https?|ftp|file):\/\/|www\.|ftp\.)[^"\r\n]+”?|’(?:(?:https?|ftp|file):\/\/|www\.|ftp\.)[^'\r\n]+’?)/ig;
            text = text.replace("http://","");
                text = text.replace(exp2, "<a href=http://$1>$1</a>");
        }
    }

    return text;
} 
```

它不起作用，但希望有人可以修复它:)

**编辑**

在@MikeM answer的帮助下修复它的解决方案

```
function replaceLinksSO(text) {
    rex = /(<a href=")?(?:https?:\/\/)?(?:(?:www)[-A-Za-z0-9+&@#\/%?=~_|$!:,.;]+\.)+[-A-Za-z0-9+&@#\/%?=~_|$!:,.;]+/ig;   
    return text.replace(rex, function ( $0, $1 ) {
        if(/^https?:\/\/.+/i.test($0)) {
            return $1 ? $0: '<a href="'+$0+'">'+$0+'</a>';
        }
        else {
            return $1 ? $0: '<a href="http://'+$0+'">'+$0+'</a>';
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T10:38:35.813

在不尝试分析上面复杂的正则表达式和函数的情况下，这里是一个使用玩具 url 匹配模式的示例实现来说明进行此类替换的方法

```
var str = ' www.stackoverflow.com  <a href="http://www.somesite.com">somesite</a> www.othersite.org '
    rex = /(<a href=")?(?:https?:\/\/)?(?:\w+\.)+\w+/g;    

str = str.replace( rex, function ( $0, $1 ) {
    return $1 ? $0 : '<a href="' + $0 + '">' + $0 + '</a>';
}); 
```

您可以更改 url 匹配模式并`\s*`根据需要插入例如。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T10:26:19.917

替换匹配`/(https?:\/\/)?((?:www|ftp)\.[-A-Za-z0-9+&@#\/%?=~_|$!:,.;]+?)[\r\n\s]+/`的模式`<a href="$1$2">$1</a>`将满足您的要求。

一个更好的正则表达式匹配将是`^(?!href="[^"\n\r\s]+?").*?(https?:\/\/)?((?:www|ftp)\.[-A-Za-z0-9+&@#\/%?=~_|$!:,.;]+)$`

# django - Buildout 的 python 包或 buildout 的 django.wsgi 未加载

> ID：14999122
> 
> 赞同：0
> 
> 时间：2013-02-21T09:50:46.690
> 
> 标签：django, buildout

我正在围绕 zc.buildout 工作。我将我的项目部署在我的本地 apache 服务器中。

我的问题是当我运行它时，我收到一个导入错误“没有名为 raven.conf 的模块”但是我在 egg 目录中指定了所有包。

那是 django 试图从系统的 python 包中加载包，而不是从隔离的 buildout 文件夹中加载包。我该如何解决它，

```
Myproject
  bootstrap.py
  setup.py
  bin/
     buildout
     django
     django.wsgi
     .....
  eggs/
       raven-3.1.13-py2.7.egg
       ..........
  parts
  project
  develop-eggs
  src/
  some files
  django.wsgi
  myapp/
    files
    settings.py 
```

构建.cfg

```
[buildout]
parts = python
        django

develop = .
eggs = beautifulsoup       
       MySQL_python
       pymongo
       requests
       .......
       .......
       raven
       sqlalchemy

[python]
recipe = zc.recipe.egg
interpreter = python
eggs = ${buildout:eggs}

[django]
recipe = djangorecipe
wsgi = true
settings = settings
eggs = ${buildout:eggs} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:11:59.533

你检查过你的 Django 项目目录有正确的`__init__.py`文件吗？这个错误通常是由于这个原因。

在您的`src/myapp`目录中，您应该有一个`__init__.py`文件，因此 Python 会将其作为模块获取并可以导入。`myapp/`对于包含 Python 代码的所有其他目录也是如此。如果您的目录中有一个`ImportError`，`raven.conf`可能是因为您的目录中没有任何`__init__.py`文件`conf/`。

# c++ - 异常处理问题

> ID：14999124
> 
> 赞同：1
> 
> 时间：2013-02-21T09:50:59.687
> 
> 标签：c++, exception, architecture, exception-handling

我有与服务器通信的 C++ 应用程序。它将一些数据发布到服务器，当我处理服务器故障的异常时，我遇到了这个问题。当服务器出现问题时，我需要处理连接引发的异常，并尝试重新连接到服务器。我在下面发布了相关的伪代码：

```
try {
    publisher->publishData(data);
} catch (const ServerDownException& ex) {
    //handle error, reconnect and create a new session
} 
```

我担心的是，在处理此异常时，我需要重新连接并再次创建会话。再次创建会话的代码可能会引发异常。所以错误处理代码会在原来的catch块内再次有一个try-catch块，如下：

```
try {
    publisher->publishData(data);
} catch (const ServerDownException& ex) {
    publisher->initialize();
    publisher->openSocket();
    try {
        publisher->createSession();
    } catch (const SessionException& tx) {
        //session creation error
    }
    publisher->publishData(data);//after re-connecting, publish data again
} 
```

我的问题是，像这样嵌套 try - catch 可以吗？否则这只是糟糕的设计吗？如果是这样，实现这一目标的最佳方法是什么？

PS.：我的代码是用 C++ 编写的，但我想这个问题很笼统。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:12:55.120

很难根据您发布的唯一代码提出建议，但至少，我会做这样的事情：

```
while(true){
  try {
      publisher->publishData(data);
      break;
  } catch (const ServerDownException& ex) {
    reconnect(publisher);
  }
} 
```

重新连接包括

```
publisher->initialize();
publisher->openSocket();
try {
   publisher->createSession();
} catch (const SessionException& tx) {
  //session creation error
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T10:33:15.667

对象应该是自治的。他们应该拥有正确行动所需的所有信息，以及执行行动所需的对象的引用。

`CRC`:小`C`姐姐`R`的责任感`C`。

对象应该被告知要做什么，而不是被一些外部对象查询和修改以使它们进入某种正确的状态。他们负责执行该操作。如果他们无法执行操作，由于某种原因他们无法解决，他们应该抛出异常（或至少以某种方式报告错误）。

您的发布者仅应在无法发布数据时抛出异常。不要像查询一样使用该异常：*“哦，它已断开连接，需要告诉它重新连接。”*

如果它不能解决连接问题，那么它真的可以抛出 a `PublishingException`，而不是 a `ServerDown`or `SessionException`。

然后，您的代码将不得不处理当您无法发布数据时要执行的操作。也许尝试以不同的方式发布，也许向管理员发送电子邮件。但不要尝试重新连接，您已经知道发布无法正常工作。

你可以再打电话`publishData`试试。这就像一个政策：当出版不起作用时我们该怎么办？该策略的正确位置将取决于您的设计。

可以满足您配置它的`Publisher`策略，例如尝试重新连接多少次，是否在连接成功之前保留缓存等。但是所有这些责任都属于发布者，如果它只会抛出异常无法实现它。

# iphone - 在 MKMapview 中显示不同的 Pin 图

> ID：14999128
> 
> 赞同：6
> 
> 时间：2013-02-21T09:51:12.193
> 
> 标签：iphone, ios, map, mkmapview, mkannotation

在我的 MKMap 视图中，我使用图像自定义了注释图钉。但仍有一些引脚是静态的，没有显示给定的图像。

我正在使用 **-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id )annotation**来设置 pin 图像。

在此处添加我的代码和屏幕：

```
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
 {

if ([annotation isKindOfClass:[MKUserLocation class]])
    return nil;

static NSString* AnnotationIdentifier = @"AnnotationIdentifier";
MKPinAnnotationView* pinView = [[MKPinAnnotationView alloc]
                                 initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier];
pinView.animatesDrop=YES;
pinView.canShowCallout=YES;
    pinView.pinColor= MKPinAnnotationColorGreen;

    pinView.enabled = YES;
    pinView.canShowCallout = YES;
    pinView.image=[UIImage imageNamed:@"bublerest.png"]; //here I am giving the image  

UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
[rightButton setTitle:annotation.title forState:UIControlStateNormal];
[rightButton addTarget:self
                action:@selector(showDetails:)
      forControlEvents:UIControlEventTouchUpInside];

    pinView.rightCalloutAccessoryView = rightButton;

UIImageView *profileIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"rest_image2.png"]];
pinView.leftCalloutAccessoryView = profileIconView;

return pinView;
} 
```

![在此处输入图像描述](../Images/00a4e02245b9b801da40de52626d7466.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-21T10:15:12.210

如果您想在`MKAnnotationView`苹果“Pin”上使用不同的图像，则必须使用 a`MKAnnotationView`而不是 a `MKPinAnnotationView`。

MKPinAnnotationView 不打算以这种方式自定义，并且会不时显示 Pin。类[参考](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKPinAnnotationView_Class/Reference/Reference.html)仅显示`pinColor`并且`animatesDrop`应该更改。

但是，您将丢失 PinAnnotationView 的动画和阴影。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T12:29:26.587

在协议中创建一个属性，`MKAnnotation`用于设置引脚，例如

```
@interface AddressAnnotation1 : NSObject<MKAnnotation> {
}
@property (nonatomic, retain) NSString *mPinColor; 
```

在.m文件中实现文件

```
- (NSString *)pincolor{
    return mPinColor;
}

- (void) setpincolor:(NSString*) String1{
    mPinColor = String1;
} 
```

添加 时`annotation`，还要设置`pin`颜色。

```
#pragma mark annotation delegate
- (MKAnnotationView *) mapView:(MKMapView *)mapView1 viewForAnnotation:(AddressAnnotation1 *) annotation
{
    UIImage *anImage = nil;

    MKAnnotationView *annView=(MKAnnotationView*)[mapView1 dequeueReusableAnnotationViewWithIdentifier:@"annotation"];
    if(annView==nil){
        annView=[[[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"annotation"] autorelease];
    }
    if([annotation.mPinColor isEqualToString:@"green"])
    {
        anImage=[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Google map pin 02.png" ofType:nil]];
    }
    else if([annotation.mPinColor isEqualToString:@"red"])
    {
        anImage=[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Google map pin 01.png" ofType:nil]];
    }
    else if([annotation.mPinColor isEqualToString:@"blue"])
    {
        anImage=[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Google map pin 02.png" ofType:nil]];
    }
    annView.image = anImage;
return annView;
} 
```

如果您不想要引脚的自定义图像，请将条件语句的主体替换为

```
annView.pinColor = MKPinAnnotationColorGreen; 
```

或者

```
annView.pinColor = MKPinAnnotationColorRed; 
```

或者

```
annView.pinColor = MKPinAnnotationColorPurple; 
```

我之前已经实现了这一点。所以试试吧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T11:47:45.127

使用这个`viewForAnnotation`

```
if ([annotation isKindOfClass:[MyAnnotation class]]) {
    // try to dequeue an existing pin view first
    static NSString* myAnnotationIdentifier = @"MyAnnotationIdentifier";

    // If an existing pin view was not available, create one
    MKPinAnnotationView* customPinView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:myAnnotationIdentifier];

    if ([(MyAnnotation *)annotation ann] == AnnotationTypeStart) {
        NSLog(@"In Start");
        customPinView.enabled = NO;
        customPinView.image = [UIImage imageNamed:@"begin.png"];
    }
} 
```

where`MyAnnotation`实现如下

```
typedef enum AnnotationType {
    AnnotationTypeStart,
    AnnotationTypeEnd,
    AnnotationTypeWayPoint,
} AnnotationType;

@interface MyAnnotation : NSObject <MKAnnotation> {
    CLLocationCoordinate2D coordinate;
    NSString *title;
    NSString *subtitle;
    AnnotationType ann;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T10:30:10.497

发布我在最近的项目中使用的示例片段。希望这可以帮助。

```
- (MKAnnotationView *) mapView:(MKMapView *)mapView1 viewForAnnotation:(id <MKAnnotation>) annotation{

Annotation *annotationInst = (Annotation*)annotation;

MKAnnotationView *pinView = nil;
if(annotation != mapView.userLocation)
{
    static NSString *defaultPinID = @"pinId";
    pinView = (MKAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:defaultPinID];

    if ( pinView == nil ){
        pinView = [[[MKAnnotationView alloc]
                   initWithAnnotation:annotation reuseIdentifier:defaultPinID]autorelease];           
    }

    pinView.canShowCallout = YES;
    pinView.image = [UIImage imageNamed:LOCATION_BUBBLE];

    UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    pinView.rightCalloutAccessoryView = rightButton;
}    
return pinView;    
} 
```

# c# - 如何在 ASP.NET MVC 的验证消息中呈现 html？

> ID：14999130
> 
> 赞同：25
> 
> 时间：2013-02-21T09:51:13.727
> 
> 标签：c#, asp.net-mvc, razor

我目前正在开发一个注册页面。当用户已经存在时，我想在电子邮件字段的错误消息中为用户提供登录和重置密码链接。在控制器中，我有：

```
[HttpPost]
public ActionResult Register(RegistrationModel registration)
{
  ...

  if(userExists)
  {
      const string errorMessage = "User already exist. You can <a href="/account/login">login</a> ...";
      ModelState.AddModelError("Email", errorMessage);
      return View("Register", registration);
  }
} 
```

但是当我尝试在视图中输出此消息时，我没有得到我期望的结果。我得到像纯文本一样的 html 标记。**我已经尝试过**：

```
@using(Html.BeginForm())
{
<div>@Html.TextBoxFor(m => m.Email)            
@{
   @Html.ValidationMessageFor(m => m.Email)

   ...

   @Html.Raw(Html.ValidationMessageFor(m => m.Email))

   ...

   string validationMessage = Html.ValidationMessageFor(m => m.Email).ToString();
   @Html.Raw(validationMessage)

   ...

   string validationMessage = Html.ValidationMessageFor(m => m.Email).ToHtmlString();
   @Html.Raw(validationMessage)

   ...

   string validationMessage = Html.ValidationMessageFor(m => m.Email).ToString();
   @(new HtmlString(validationMessage))

   ...

   string validationMessage = Html.ValidationMessageFor(m => m.Email).ToHtmlString();
   @(new HtmlString(validationMessage))

   ...

   string validationMessage = Html.ValidationMessageFor(m => m.Email).ToString();
   @(new MvcHtmlString(validationMessage))

   ...

   string validationMessage = Html.ValidationMessageFor(m => m.Email).ToHtmlString();
   @(new MvcHtmlString(validationMessage))

}
</div>
} 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-21T14:09:40.947

```
@Html.Raw(HttpUtility.HtmlDecode(Html.ValidationMessageFor(m => m.Email).ToHtmlString())) 
```

虽然不漂亮

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-08T20:50:40.130

在自己使用 ASP.NET Core 解决这个问题时发现了这篇文章。

我最终做的是在 modelstate.AddError() 中添加我的验证消息部分，并分别将具有我想要呈现的 Html 的位添加到 ViewData，如下所示：

ViewData["myKey"]= "我的 html";

感觉很丑，可能有更好的方法，但对于我非常有限的需求，这很符合要求。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-10-14T13:06:17.667

阅读这篇文章以评估错误

[如何在验证集合 asp.net mvc 中添加验证错误？](https://stackoverflow.com/questions/4681328/how-to-add-validation-errors-in-the-validation-collection-asp-net-mvc)

在你看来

Html.ValidationMessage("电子邮件")

# database-design - 避免循环依赖

> ID：14999131
> 
> 赞同：8
> 
> 时间：2013-02-21T09:51:19.810
> 
> 标签：database-design, hibernate-mapping, circular-dependency, erd, class-table-inheritance

我正在开发一个旅行管理应用程序。有问题的设计如下所示：

旅行中的每个人都被指定为旅行者。每个旅行者都有一本护照。现在，Traveler 可以是 MainMember 或 SubMember，这取决于他是否是一家之主。MainMember 决定诸如 TourPackage、他的旅行家庭的总金额等内容。SubMember 在旅行时依赖于 MainMember。因此，如果 MainMember 被删除，它的所有 SubMember 也必须被删除。

所以，旅行者有护照。（一对一关系） Traveler 是 MainMember 或 SubMember。（Traveler-MainMember 和 Traveler-SubMember 之间的一对零/一）一个 MainMember 可能有多个 SubMember。（一对多）一个 SubMember 只有一个 MainMember。（多对一）

我目前的 ERD 如下所示。

![旅行者 ER 图](../Images/df2558895775f98d6503f40f3b3bd584.png)

如您所见，三个表 - Traveler、MainMember 和 SubMember - 形成了循环依赖关系。不过，我不确定这是否会损害我的申请。如果我删除一个作为 MainMember 的 Traveler，那么 1\. Traveler 中的一条记录被删除。2、删除其相关的MainMember记录。3、删除依赖于MainMember的SubMember记录。4\. 子会员的旅行者记录被删除。

虽然这似乎不是问题，但作为 Traveler-MainMember 删除将始终只删除 Traveler-SubMember。不过，我对此有不好的预感。

谁能指导我更好的设计？

**更新 -**

在等待回复的同时，我根据@Daveo 的回复想出了另一个设计。基本上，Traveler 包含自引用外键。SubMember 记录将使用它来识别他们的父母。

这是 ERD。

![带有自引用表的 ERD](../Images/46324a3c1aba4912352e4322821d80a5.png)

现在，正如@Branko 所指出的那样，由于我之前的设计中没有循环依赖的问题，我想知道哪种设计更好？

另外，哪种设计更适合通过 Hibernate 实现？我认为第二种方法在通过 Hibernate 实现时可能会导致复杂性。

对于您喜欢的设计，我还将感谢有关实现模式（Hibernate 实体中的继承等）的一些指示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T13:16:58.833

> 如您所见，三个表 - Traveler、MainMember 和 SubMember - 形成了循环依赖关系。

^(不，这不是循环依赖 - 此图中的任何“节点”都无法通过沿正确方向1)跟随图“边”到达自身。它可以更准确地描述为“合并”甚至（原始）“菱形”依赖。

不，它不会损害您的应用程序。²

您正在使用“单独表中的每个类”方法有效地实现**继承**（又名类别、子类化、子类型化、泛化层次结构等）。这种方法是干净的，但不能保证开箱即用的存在³和排他性^(4 。)有一些方法可以[修改它](https://stackoverflow.com/a/9178524/533120)，也有其他的继承实现策略可以，但它们各有[优缺点](https://stackoverflow.com/a/12037398/533120)。

在我看来，您的模型非常适合您尝试完成的任务，并且在应用程序级别执行存在/排他性可能比在数据库级别执行它的弊端要小。

* * *

*¹ “方向”是从参考到参考表。`Traveller`不引用`MainMember`也不`SubMember`因此打破循环。*

*²除非您使用的 DBMS（例如 MS SQL Server）不支持对此类“合并”依赖项的引用操作（在这种情况下，您需要通过触发器实现 ON CASCADE DELETE）。*

*³ `Traveller`不能单独存在（不能是“抽象的”），它必须是`MainMember`or `SubMember`。*

*⁴ `Traveller`不能同时是`MainMember`和`SubMember`。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T10:05:14.743

我只会在数据库中有两个表。

旅行者和密码

Traveler 将有一个 Parent_Id 字段，该字段将链接回 Traveler 表并存储主要/主要旅客是谁。还存储此表中主/子成员的通用字段，如联系电话

然后使用继承和 ORM 在您的实际应用程序中创建两个不同的类。MainMember 和 SubMember MainMember 将是 Traveler 中 Parent_Id 为空的所有行 SubMember 将是 Traveler 中 Parent_Id 不为空的所有行

# javascript - Ember - 按多个方向的多个属性对数组进行排序

> ID：14999132
> 
> 赞同：9
> 
> 时间：2013-02-21T09:51:23.593
> 
> 标签：javascript, sorting, ember.js

我需要按多个属性对 Ember 模型的集合进行排序，而不需要以相同的方向/顺序。即我需要按属性*a***升序**排序，按属性*b***降序**排序。有没有办法做到这一点？

### 更新

我尝试将`sortAscending`属性设置为数组，但它不起作用。在查看源代码后，似乎不支持开箱即用的此功能（尚）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-05-11T18:27:31.607

在您的 ArrayController 中：

```
sortProperties: ["propA:asc", "propB:desc"]
sortedModel: Ember.computed.sort("model", "sortProperties"); 
```

然后`sortedModel`在模板的`#each`处理程序中引用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T12:37:28.920

我决定创建一个允许在多个订单（方向）中排序的*mixin 。*它将`SortableMixin`尝试扩展到尽可能多的向后兼容。实际上它可以用作常规`SortableMixin`。它添加的是`sortAscendingProperties`属性，它是排序属性名称（数组的成员`sortProperty`）的数组，应该按升序排序。如果属性在`sortAscendingProperties`，则按升序排序，否则将按 排序`sortAscending`，这是一种默认值。尽管我认为这不是最好的名称，但我
将 mixin 称为。`MultiSortableMixin`

```
(function() {

    var get = Ember.get, set = Ember.set, forEach = Ember.EnumerableUtils.forEach;

    /**
     * extends the SortableMixin by allowing sorting by multiple orders.
     *
     * sortProperties - array of strings
     * sortAscending - default sort order
     * sortAscendingProperties - properties which are listed here will be sorted in ascending order, those which are not listed - will be sorted according to sortAscending
     */
    Ember.MultiSortableMixin = Ember.Mixin.create(Ember.SortableMixin, {
        /**
         Specifies the arrangedContent's sort direction

         @property {Array} sortAscendingProperties
         */
        sortAscendingProperties: null,
        orderBy: function(item1, item2) {
            var result = 0,
                    sortProperties = get(this, 'sortProperties'),
                    sortAscending = get(this, 'sortAscending'),
                    sortAscendingProperties = get(this, 'sortAscendingProperties');

            Ember.assert("you need to define `sortProperties`", !!sortProperties);

            forEach(sortProperties, function(propertyName) {
                if (result === 0) {
                    result = Ember.compare(get(item1, propertyName), get(item2, propertyName));
                    //use default sortAscending if propertyName is not listed in sortAscendingProperties
                    var sa = (sortAscendingProperties && sortAscendingProperties.indexOf(propertyName) > -1) || sortAscending;
                    if ((result !== 0) && !sa) {
                        result = (-1) * result;
                    }
                }
            });

            return result;
        },
        //overrided to add more watched props. TODO - the contents of this method is the same as parent's - find the way to just add watched stuff
        arrangedContent: Ember.computed('content', 'sortProperties.@each', 'sortAscendingProperties.@each', 'sortAscending', function(key, value) {
            var content = get(this, 'content'),
                    isSorted = get(this, 'isSorted'),
                    sortProperties = get(this, 'sortProperties'),
                    self = this;

            if (content && isSorted) {
                content = content.slice();
                content.sort(function(item1, item2) {
                    return self.orderBy(item1, item2);
                });
                forEach(content, function(item) {
                    forEach(sortProperties, function(sortProperty) {
                        Ember.addObserver(item, sortProperty, this, 'contentItemSortPropertyDidChange');
                    }, this);
                }, this);
                return Ember.A(content);
            }

            return content;
        }),
    // unneeded in this mixin, overrided to disable functionality from SortableMixin. TODO - find a way to just remove it
        sortAscendingDidChange: Ember.observer(function() {
            //empty
        }, 'sortAscending')
    });

})(); 
```

使用示例：

```
App.ThingsController = Ember.ArrayController.extend(Ember.MultiSortableMixin, {
    sortProperties: ['prop1', 'prop2', 'prop3'], 
    sortAscending: false,
    sortAscendingProperties: ['prop2', 'prop3'], 
    //your stuff
}); 
```

在此示例中，内容`ThingsController`将按*prop1*排序- 降序排列，然后按*prop2*和*prop3*排序 - 均按升序排列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:53:20.283

这不是 Ember 的开箱即用功能。但是查看[SortableMixin 的代码](https://github.com/emberjs/ember.js/blob/master/packages/ember-runtime/lib/mixins/sortable.js#L63)可以看到它使用 Ember.compare 来比较两个实体：

```
orderBy: function(item1, item2) {
    var result = 0,
        sortProperties = get(this, 'sortProperties'),
        sortAscending = get(this, 'sortAscending');

    Ember.assert("you need to define `sortProperties`", !!sortProperties);

    forEach(sortProperties, function(propertyName) {
      if (result === 0) {
        result = Ember.compare(get(item1, propertyName), get(item2, propertyName));
        if ((result !== 0) && !sortAscending) {
          result = (-1) * result;
        }
      }
    });

    return result;
  }, 
```

Ember.compare包含对[**Comparable Mixin**](https://github.com/emberjs/ember.js/blob/master/packages/ember-runtime/lib/mixins/comparable.js)[的](https://github.com/emberjs/ember.js/blob/master/packages/ember-runtime/lib/core.js#L159)检查：[](https://github.com/emberjs/ember.js/blob/master/packages/ember-runtime/lib/mixins/comparable.js)

 **```
var Comparable = Ember.Comparable;
  if (Comparable) {
    if (type1==='instance' && Comparable.detect(v.constructor)) {
      return v.constructor.compare(v, w);
    }

    if (type2 === 'instance' && Comparable.detect(w.constructor)) {
      return 1-w.constructor.compare(w, v);
    }
  } 
```

因此我提出的解决方案是：

**1** - 向您的模型添加一个附加字段，其中包含所有排序属性的包装对象，例如“combinedAandB”

```
App.YourModel = Ember.Object.extend({
a : null,
b : null,
combinedAandB : function(){
  // the following Object should implement SortableMixin
  var comparator = App.AandBComparator.create(this.get("a"), this.get("b"));
  return comparator;
}.property("a","b") 
```

**2** - 你的 ComparatorModel (App.AandBComparator) 应该实现 Comparable Mixin。在此比较方法中，尊重您想要的排序行为（prop a 升序和 prop b 降序）。

**3** - 现在您可以实例化一个 ArrayController 并根据您的组合属性对其进行排序：

```
var yourModelController = //whereever you may get that one from
yourModelController.set("sortProperties", "combinedAandB"); 
```

**注意：**这只是我在阅读您的要求时的一个自发想法。我还没有实现这个。所以这可能并不完美:-)**

# django - 如何在 Django 中从 HttpResponseRedirect 传递消息？

> ID：14999134
> 
> 赞同：30
> 
> 时间：2013-02-21T09:51:28.270
> 
> 标签：django

我有一个执行特定任务的视图并返回到另一个呈现 hello.html 模板的视图。

```
def 1stview(request):
   #Do this
   #Do that
   return HttpResponseRedirect('/success/')

def success(request):
    return render_to_response('overview.html', {'overview_files': b, 'total_files':total_files, 'total_size':total_size, 'username': username}, context_instance=RequestContext(request)) 
```

成功完成第一个视图后，我想在`overview.html`. 有很多重定向可以`success`查看。我只想在通过第一个视图时传输消息。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2018-03-22T09:42:37.377

*添加更详尽的答案。*

**1：在您的settings.py**中配置消息存储：

```
MESSAGE_STORAGE = 'django.contrib.messages.storage.session.SessionStorage' 
```

或者如果您不使用会话，请使用 CookieStorage：

```
MESSAGE_STORAGE = 'django.contrib.messages.storage.session.CookieStorage' 
```

2：在您看来，导入**django.contrib.messages**：

```
from django.contrib import messages 
```

3：设置返回HttpResonse前的消息数据：

```
messages.success(request, 'Changes successfully saved.') 
```

这是以下的简写：

```
messages.add_message(request, messages.SUCCESS, 'Changes successfully saved.') 
```

然后可以在模板中使用消息标签（在这种情况下为*messages.SUCCESS ），即添加相应的 CSS 类或隐藏调试消息。*Django 默认包含一些，但如果您希望将其与 Bootstrap 的默认警报类一起使用，您将需要为缺少的添加一些自定义[消息标签](https://docs.djangoproject.com/en/1.9/ref/contrib/messages/#message-tags)。

4：如果您正在使用 Bootstrap 警报，则可以在您的模板中使用如下消息：

```
{% if messages %}
    {% for message in messages %}
        <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}" role="alert">{{ message }}</div>
    {% endfor %}
{% endif %} 
```

例如，Django 使用 'error' 作为 ERROR 的默认标记，而 Bootstrap 使用危险来指示错误。最好的解决方案是使用自定义标签，但您也可以在模板中对其进行猴子补丁（丑陋的解决方案）：

```
{% if messages %}
    {% for message in messages %}
            <div class="alert {% if message.tags %}alert-{% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}danger{% else %}{{ message.tags }}{% endif %}{% endif %}" role="alert">{{ message }}</div>
    {% endfor %}
{% endif %} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-21T10:13:57.630

使用[消息框架](https://docs.djangoproject.com/en/3.0/ref/contrib/messages/)在页面请求之间发送消息。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-09-25T19:57:33.617

**使用 i18n网址**时要小心！**如果您使用类似`/whatever/`但使用国际化的链接，它将重定向到`/en/whatever/`，从而丢失请求中的消息。如果您使用国际化，请始终将语言传递给 URL：**

 **```
from django.contrib import messages
from django.utils.translation import get_language

messages.success(request, _('Thank you'))
return redirect('/%s/whatever/' % get_language()) 
```

花了我几个小时来理解这一点......

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-09-18T13:51:03.233

```
from django.contrib import messages
messages.success(request, _('Thank you'))
return redirect('/whatever/') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-25T13:55:00.293

看了这个问题，有一个问题：如果重定向来自1stview以外的函数，消息会一直显示；因此，我们必须通过 send 检查重定向是否来自 1stview。GET 是当前状态。

```
from django.contrib import messages
def 1stview(request):

   return HttpResponseRedirect('/success/'+'?Status='+'True')

def success(request):
    Pass_1stview = request.GET.get('Status')
    if Pass_1stview :
       messages.success(request, _('Content of the messages'))
    return render_to_response('overview.html', {'overview_files': b, 'total_files':total_files, 'total_size':total_size, 'username': username}, context_instance=RequestContext(request)) 
```**

# ajax - 使用 Ajax 在 onClick() 上显示 Mysql 查询结果

> ID：14999136
> 
> 赞同：1
> 
> 时间：2013-02-21T09:51:31.397
> 
> 标签：ajax, jquery

我是 Ajax 脚本的初学者，我正在尝试构建一个在用户单击链接时显示 Mysql 查询结果的脚本。我考虑过使用调用 Ajax 脚本的 onClick() 函数。这是我的代码：

```
<script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>
<script src="/course/format/topics/ajax.js" type="text/javascript"></script>
<div id="stitre">
    <a href="#" onclick="display()" id="link1" class="link"> Link 1</a>
</div>
<div id="one"> </div>
<div id="stitre">
    <a href="#" onclick="display()" id="link2" class="link"> Link 2</a>
</div>
<div id="one"> </div> 
```

我的 ajax.js 代码：

```
$(document).ready(function() { 
for (var i=1; i<3; i++) {
    var id = document.getElementById("#link" + i);
    function display() {
        $.ajax({
            async: false,
            type: "POST",
            url: "myphp.php",
            data: "id=" + id,
            dataType: "json",
            success: function(msg) {
                if(msg.success) {
            $("#one").html(msg);
                } else {
                    alert("error");
                }
            }
        });
    };
}
}); 
```

最后， myphp.php ：

```
<?php
    require_once('config.php');
    mysql_connect($CFG->dbhost, $CFG->dbuser, $CFG->dbpass);
    mysql_select_db($CFG->dbname);
    mysql_query("SET NAMES 'utf8'");

    $id = $_GET['id'];
    if($return = display($id)) {
        echo "success";
    } else {
        echo "error";
    }
    echo json_encode($reply);
?> 
```

目前，当我单击链接时没有显示任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:03:05.707

有很多问题。

1.  内联事件处理程序 ( `onclick="display()"`) 很糟糕。jQuery 提供了一种将事件处理程序绑定到元素的简单机制，您应该使用它。
2.  您的`display()`函数不是全局范围的，它仅在传递给的匿名函数范围内可见`.ready()`。这在实践中意味着当你点击你的`<a>`元素时，他们试图执行他们看不到的功能。
3.  以您拥有的方式在循环内声明一个函数`for`将导致使用最后一次迭代的值的单个函数。
4.  您的`id`变量是 DOM 元素，而不是字符串，因此将其作为 AJAX 调用数据的一部分传递可能不会传递您想要的值。
5.  HTML 元素上的`id`属性是唯一标识符，因此实际上需要是唯一的。拥有两个`<div id="one">`元素（或具有相同 的其他元素`id`）是无效的。

请尝试以下操作：

```
$(document).ready(function () {
    $('.link').click(function (e) {
        e.preventDefault();
        $.ajax({
            type: "POST",
            url: "myphp.php",
            data: { id: this.id },
            dataType: "json",
            success: function (msg) {
                if (msg.success) {
                    $("#one").html(msg);
                } else {
                    alert("error");
                }
            }
        });
    });
}); 
```

确保在`$(document).ready()`元素存在（DOM 准备就绪）之前代码不会执行。`$('.link')`选择所有带有类的元素`link`（您的`<a>`元素）。该`.click()`函数将`click`事件处理程序添加到所有这些元素。匿名函数的`e`参数作为参数传递给 jQuery 规范化事件对象。

调用`e.preventDefault()`阻止默认行为（按照链接），最后调用`$.ajax()`提交 AJAX 调用。我已删除`async: false`，因为它不应该被需要。请注意，事件处理函数内部`this`是指触发事件的元素（即`<a>`您单击的特定元素）。

我还没有解决 HTML 的问题，但上面的问题列表应该为您提供一个基础，让您自己更正这些问题。

我不是 PHP 程序员，所以我不能真正谈论您的服务器端代码的有效性。如果您使用的是 Firefox，我还建议您安装[Firebug](http://getfirebug.com)`F12` ，否则学习如何使用浏览器的开发人员工具（点击打开它们），因为它会告诉您正在抛出的任何 JavaScript 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:01:02.410

您必须更改 PHP 脚本，

```
//Some thing
$reply['success'] = "Success"; //Create an associative array which is going to be input of json_encode()
if($return = display($id)) {
    $reply['success'] = "Some Success Message";
} else {
    $reply['error'] = " Some Error Message";
}
echo json_encode($reply); 
```

在阿贾克斯，

```
$.ajax({
            ...
            ...
            success: function(msg) {
                if(msg.success) {
            $("#one").html(msg);
                } else {
                    alert("error" + msg.error);
                }
            }
        }); 
```

还要检查你的 php 版本，一些较低的版本不支持 json_encode()。注意：上面的代码不是实际的。但我希望这会给你一些想法来做你的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:04:59.800

## 可能是这样使用 with class 代替：

```
<div class="stitre">
   <a href="#" onclick="display(this.id)" id="link1" class="link"> Link 1</a>
</div>
<div class="one"></div>
<div class="stitre">
  <a href="#" onclick="display(this.id)" id="link2" class="link"> Link 2</a>
</div>
<div class="one"></div> 
```

然后只需以这种方式使用此功能，无需`doc ready`：

```
function display($id) {
    $.ajax({
        async: false,
        type: "POST",
        url: "myphp.php",
        data: {id:$id},   //<----------send like this
        dataType: "json",
        success: function(msg) {
            if(msg.success) {
                $($id).next(".one").html(msg);
            } else {
                alert("error");
            }
        }
    });
} 
```

## 笔记：

```
<div id="stitre">
   <a href="#" onclick="display()" id="link1" class="link"> Link 1</a>
</div>
<div id="one"></div>
<div id="stitre">
  <a href="#" onclick="display()" id="link2" class="link"> Link 2</a>
</div>
<div id="one"></div> 
```

另一个问题是`you are using same id for multiple dom elements`，这根本无效。要么你可以`change id to class instead.`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T09:56:00.740

替换您的成功回调：

```
success: function(msg) {
    $("#one").html(msg);
} 
```

`msg.success`不存在。除了你不需要检查成功之外，你已经知道它已经成功了，因为调用了成功回调！

# c++ - 使用 lambda 作为参数：std::function 还是 template？

> ID：14999138
> 
> 赞同：5
> 
> 时间：2013-02-21T09:51:34.407
> 
> 标签：c++, templates, c++11, lambda

我正在学习 c++11，对 lambda 尤其感兴趣。

经过一些实践，我假设 lambda 闭包是一个无名的函数对象。

所以我写了这段代码。

```
template <class callable_object>
void lambda_caller( callable_object lambda )
{
    std::cout<< sizeof(lambda) << endl;
    lambda();
} 
```

我知道我可以使用`std::function`而不是使用模板，但我不希望在类型转换时产生开销。

但是我在阅读这个问题时发现了一个问题：[Why can't I create a vector of lambda in C++11?](https://stackoverflow.com/questions/7477310/why-cant-i-create-a-vector-of-lambda-in-c11)

回答者说：“每个 lambda 都有不同的类型——即使它们具有相同的签名。”。

编译器为不同的类制作不同的代码。

所以我认为我的编译器会`lambda_caller`在我对 lambda 进行另一个定义时创建另一个版本来传递。

有没有办法避免它，除了使用`std::function`？lambda 闭包没有任何泛型类型吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T10:01:57.813

你无法避免它。Lambda 只是一个重载了 operator()() 的类，它执行你的代码。所以不同的代码 - 不同的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:54:07.720

`std::function`是 lambda 闭包的泛型类型。问题是每个 lambda 可能会捕获不同的变量。所以不能简化为一个函数指针和一些数据，因为 lambda 可能已经捕获了 3 个变量，或者它可能已经捕获了 4`std::function`个。将确保为数据分配足够的内存，但它来了成本（数据可以堆分配）。

但是，如果您想存储多个 lambda，并且您在编译时知道有多少。您可以将它们存储在一个`std::tuple`。这允许每个 lambda 有不同的类型。不幸的是，C++ 仍然没有提供迭代元组的方法，但是使用[Boost.Fusion](http://www.boost.org/doc/libs/1_53_0/libs/fusion/doc/html/fusion/algorithm/iteration/functions/for_each.html)可以。

# c# - SqlDataReader 与 SqlDataAdapter：返回 DataTable 的性能哪个更好？

> ID：14999143
> 
> 赞同：29
> 
> 时间：2013-02-21T09:51:46.967
> 
> 标签：c#, performance, datatable, sqldatareader, sqldataadapter

我想知道哪个具有更好的返回 a 的性能`DataTable`。在这里`SqlDataReader`我用`DataTable.Load(dr)`

使用`SqlDataReader`：

```
public static DataTable populateUsingDataReader(string myQuery)
{
    DataTable dt = new DataTable();
    using (SqlConnection con = new SqlConnection(constring))
    {
        SqlCommand cmd = new SqlCommand(myQuery, con);
        con.Open();
        SqlDataReader dr = null;
        dr = cmd.ExecuteReader(CommandBehavior.CloseConnection);
        if (dr.HasRows)
        {
            dt.Load(dr);
        }
        return dt;
    }
} 
```

使用`SqlDataAdapter`：

```
public DataTable populateUsingDataAdapter(string myQuery)
{
    SqlDataAdapter dap = new SqlDataAdapter(myQuery,cn);
    DataSet ds = new DataSet();
    dap.Fill(ds);
    return ds.Tables[0];
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-21T10:24:05.967

差异可以忽略不计，因此最好使用更简洁的版本：`SqlDataAdapter.Fill`.

`SqlDataReader.Fill`在内部创建一个内部类`LoadAdapter`（派生自`DataAdapter`），并调用其`Fill`方法：性能将与`SqlDataAdapter.Fill(DataTable)`.

参数的初始化/验证会有一些小的差异，但是随着行数的增加，这将变得越来越不重要。

另请注意，您的第二个样本应修改为与第一个样本相当：

```
public DataTable populateUsingDataAdapter(string myQuery)
{
    using (SqlConnection con = new SqlConnection(constring))
    {
        SqlDataAdapter dap = new SqlDataAdapter(myQuery,con);
        DataTable dt = new DataTable();
        dap.Fill(dt);
        return dt;
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-21T10:29:11.987

[这个问题](https://stackoverflow.com/questions/5758526/what-is-the-fastest-way-to-read-data-from-a-dbdatareader/14860927)，更具体地说，[这个答案](https://stackoverflow.com/a/14860927/453277)表明你的第二个例子更快。这当然不是一个详尽的基准测试，但它是一个有趣的测试。

反映源代码可以`DataTable`看出调用DataTable.Load()实际上是创建了一个内部`DataAdapter`子类`LoadAdapter`，调用`Fill()`了`DataAdapter`. `SqlDataAdapter`它的大部分装载工作都在同一个地方完成。

更重要的是，为了可读性，我倾向于支持第二个示例。这两个示例都无法与直接使用 . 提供的快速访问相比`DataReader`，因此我会选择更简洁的代码。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-21T09:59:20.430

`SqlDataReader`历史上明显快于`SqlDataAdapter`. .NET 4.5 中可能已经进行了改进，但我怀疑它的改进是否足以超过 DataReader 的性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T10:06:49.600

**SqlDataReader**将比 SQlDataAdapter 更快，因为它在连接状态下工作，这意味着第一个结果一旦可用就会从查询中返回..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-26T13:57:12.690

除了选定的解决方案，我想补充一点：

使用 DataReader，您不需要知道您拥有哪种类型的 DbConnection。

您只需要一个实现 IDbConnection 的实例，您可以使用“connection.CreateCommand”，然后使用“dbCommand.ExecuteReader”，然后使用 dataTable.Load。

但是当您使用 DataAdapter 时，您需要知道使用的是哪个连接（即 oracle、sqlserver 等）

（这与线程启动器无关，但我在寻找这个主题时使用 g**gle 来到这里。）

# java - 以下两种方法来调度和停止线程哪个更好

> ID：14999146
> 
> 赞同：2
> 
> 时间：2013-02-21T09:51:51.833
> 
> 标签：java, multithreading

我通常看到两种方法来实现一个守护进程，它做一些工作并进入睡眠并再次醒来。

1.  while(flag) 方法，其中 flag 为 true，如果我们想停止守护程序，则由其他类设置为 false。

    ```
    while(flag){
       //do something
       Thread.sleep(10000l);
    } 
    ```

2.  使用固定延迟使用 ScheduledThreadPoolExecutor 进行调度。

IMO，第二种方法更清洁且易于测试。有人可以比较这两种方法。第一种方法会导致任何内存问题吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T09:58:15.050

> 第一种方法会导致任何内存问题吗？

不，最大的问题是管理`flag`变量的可见性。每当我看到有人建议这种方法时，我都会立即投反对票。该类`Thread`出于某种原因封装了中断标志的概念。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T09:57:17.587

推荐方法 2)。

方法一对底层线程系统（尤其是在 UNIX 上）的随机唤醒不稳健，您还需要实现自己的错误处理

方法二允许您从底层抽象`Thread`并使用`Runnable`or `Callable`。

此外，方法 1) 存在时钟漂移问题，即您的任务需要非零时间来执行，因此它**不会**每十秒执行一次。实际上，`ScheduledExecutorService`它将每秒安排一次执行，或者，如果需要，以十秒为间隔。

方法 2) 提供了一种简单的方法来安排线程在一段时间内做某事，然后按照[javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html)中的示例将其杀死。

最后，`ExecutorSevice`关闭自定义线程要容易得多，只需调用`executorService.shutdown()`然后`executorService.awaitTermination()`等待最后一个任务完成即可。

您可能要注意的一件事是 javadoc 中的这个 gem -“如果任务的任何执行遇到异常，则后续执行将被抑制”。这意味着要么你必须非常小心`try/catch`，`Callable`要么你需要继承它`ScheduledExecutorService`（取自 javadoc）：

```
public class MyScheduledExecutor extends ScheduledThreadPoolExecutor {

    public MyScheduledExecutor(int corePoolSize) {
        super(corePoolSize);
    }

    @Override
    protected void afterExecute(Runnable r, Throwable t) {
        super.afterExecute(r, t);
        if (t == null && r instanceof Future<?>) {
            try {
                Object result = ((Future<?>) r).get();
            } catch (CancellationException ce) {
                t = ce;
            } catch (ExecutionException ee) {
                t = ee.getCause();
            } catch (InterruptedException ie) {
                Thread.currentThread().interrupt(); // ignore/reset
            }
        }
        if (t != null) {
            System.out.println(t);
        }
    }
} 
```

# sql-server - 在 SQL 中验证列表输入

> ID：14999147
> 
> 赞同：3
> 
> 时间：2013-02-21T09:51:52.217
> 
> 标签：sql-server, tsql, validation, sql-server-2005

关于字符串验证的快速问题。

我们正在实现一个存储过程，其中包含许多过滤其结果的参数输入。它主要用于 SSRS 报告。

我们已经设置 proc 以便用户可以输入单个值或 sql 格式的列表（例如 'a'、'b'、...），但我们识别列表的方法非常初级。这个 -

```
if patindex('%''%'',%',) <> 0 
```

即，我们正在检查是否存在 eg 的单个实例 `'item',`
我们想要检查列表的格式是否正确 - 即列表由一系列以 `'item',` 块结尾的 `'item'` 块组成，并且之间没有杂散的逗号，偶数个撇号等。如果不是，我们想向非技术用户报告，而不是给他们一个难以理解的错误。

在 TSQL 中执行此操作有什么建议吗？或者这是 SSRS 更适合做的事情？（我承认我对 SSRS 几乎是全新的。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:59:33.923

我建议在 t-sql 中使用字符串拆分函数将条目拆分为更易于管理的信息。然后，使用类似的东西：

```
if (select count(1) 
      from dbo.StringSplit('''item1'', ''item2'', ''item3''', ',')
     where StringPart not like '''%''') > 0
... 
```

这是我的个人字符串拆分功能，供您参考：

```
create function [dbo].[StringSplit] ( @p_String varchar(max), @p_Delimiter char(1) = ',' )
returns @ReturnTable table (
  [Index] int identity(1, 1) not null,
  [StringPart] varchar(4000) not null
) as
begin

   declare @EndPosition int
   declare @StartPosition int = 0;
   declare @TextPosition int = 1;
   declare @ChunkLength smallint
   declare @TemporaryString varchar(4000) = '';
   declare @LeftOverString varchar(4000) = '';
   declare @TemporaryValue varchar(4000) = '';

   while @TextPosition <= Len( @p_String )
   begin
      set @ChunkLength = 4000 - Len( @LeftOverString )
      set @TemporaryString = @LeftOverString + SubString( @p_String, @TextPosition, @ChunkLength )
      set @TextPosition = @TextPosition + @ChunkLength
      set @EndPosition = CharIndex( @p_Delimiter, @TemporaryString )
      while @EndPosition > 0
      begin
         insert @ReturnTable values ( LTrim( RTrim( SubString( @TemporaryString, @StartPosition + 1, @EndPosition - @StartPosition - 1 ) ) ) )
         set @StartPosition = @EndPosition
         set @EndPosition = CharIndex( @p_Delimiter, @TemporaryString, @StartPosition + 1 )
      end
      set @LeftOverString = Right( @TemporaryString, Len( @TemporaryString ) - @StartPosition )
   end

   insert @ReturnTable values ( LTrim( RTrim( @LeftOverString ) ) )

   return

end 
```

# php - PHP 必填字段

> ID：14999149
> 
> 赞同：0
> 
> 时间：2013-02-21T09:51:57.267
> 
> 标签：php, html, css, forms, fill

我在 PHP 中得到以下代码：

```
<?php
$field_name = $_POST['name'];
$field_email = $_POST['email'];
$field_message = $_POST['message'];

$mail_to = 'info@remydesigns.nl';
$subject = 'Bericht van '.$field_name;

$body_message = 'Van: '.$field_name."\n";
$body_message .= 'E-mail: '.$field_email."\n";
$body_message .= 'Bericht: '.$field_message;

$headers = 'From: '.$field_email."\r\n";
$headers .= 'Reply-To: '.$field_email."\r\n";

$mail_status = mail($mail_to, $subject, $body_message, $headers);

else { ?>
    <script language="javascript" type="text/javascript">
        alert('Bericht mislukt, probeer het nog een keer.');
        window.location = 'index.htm';
    </script>
<?php
}

if ($mail_status) { ?>
    <script language="javascript" type="text/javascript">
        alert('Bedankt voor je bericht.');
        window.location = 'index.htm';
    </script>
<?php
}
?> 
```

每当我点击提交时，即使没有填写字段，它也会发送一封电子邮件。所以我不断收到人们的空邮件..

我不能让它检查字段是否为空。我的代码有什么问题？

谢谢

编辑：

```
<?php
if(isset($_POST['name']) && isset($_POST['email']) && isset($_POST['message'])) {
    $field_name = $_POST['name'];
    $field_email = $_POST['email'];
    $field_message = $_POST['message'];

    $mail_to = 'info@remydesigns.nl';
    $subject = 'Bericht van '.$field_name;

    $body_message = 'Van: '.$field_name."\n";
    $body_message .= 'E-mail: '.$field_email."\n";
    $body_message .= 'Bericht: '.$field_message;

    $headers = 'From: '.$field_email."\r\n";
    $headers .= 'Reply-To: '.$field_email."\r\n";

    $mail_status = mail($mail_to, $subject, $body_message, $headers);
}
if ($mail_status) { ?>
    <script language="javascript" type="text/javascript">
        alert('Bedankt voor je bericht.');
        window.location = 'index.htm';
    </script>
<?php
}
else { ?>
    <script language="javascript" type="text/javascript">
        alert('Bericht mislukt, probeer het nog een keer.');
        window.location = 'index.htm';
    </script>
<?php
}
?> 
```

HTML：

```
<form action="contact.php" method="post">
    <span>Naam</span> <input class="name" name="name" type="text" /> 
    <span>Email</span> <input class="email" name="email" type="text" /> 
    <span>Bericht</span><textarea class="message" name="message"></textarea> 
        <input class="submit" type="submit" value="Submit" />&nbsp;
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:55:42.610

利用`isset`

```
if(isset($_POST['name']) && isset($_POST['email']) && isset($_POST['message'])) {
     $field_name = $_POST['name'];
     $field_email = $_POST['email'];
     $field_message = $_POST['message'];

     $mail_to = 'info@remydesigns.nl';
     $subject = 'Bericht van '.$field_name;

     $body_message = 'Van: '.$field_name."\n";
     $body_message .= 'E-mail: '.$field_email."\n";
     $body_message .= 'Bericht: '.$field_message;

     $headers = 'From: '.$field_email."\r\n";
     $headers .= 'Reply-To: '.$field_email."\r\n";

     $mail_status = mail($mail_to, $subject, $body_message, $headers);

     if ($mail_status) { ?>
         <script language="javascript" type="text/javascript">
             alert('Bedankt voor je bericht.');
             window.location = 'index.htm';
         </script>
     <?php
     }
     else { ?>
         <script language="javascript" type="text/javascript">
             alert('Bericht mislukt, probeer het nog een keer.');
             window.location = 'index.htm';
         </script>
     <?php
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:55:19.913

使用类似这样的东西来检查它是否为空`isset`

```
<?php

if(empty($_POST['name']) || empty($_POST['email']) || empty($_POST['message']))
    die();
if(isset($_POST['name']) && isset($_POST['email']) && isset($_POST['message'])){
now do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T09:56:05.830

尝试将代码放在其中 -

```
if (isset($_POST['submit'])) {
// send email
} 
```

或者

```
if(!empty($_POST)){
// send email
} 
```

# c# - 运算符“||” 不能应用于“字符串”和“布尔”类型的操作数

> ID：14999150
> 
> 赞同：3
> 
> 时间：2013-02-21T09:51:58.703
> 
> 标签：c#, .net, linq, linq-to-sql

我不知道为什么同时我在 linq 中编译我的查询如下

```
from c in PriceListPolicies_TBLs
where ((c.CountryCode ?? "VNALL")== "VNALL" ? "VN" : c.CountryCode || 
      (c.CountryCode ?? "THALL") == "THALL" ? "TH" : c.CountryCode) 
select c 
```

给出这个错误

> 运算符“||” 不能应用于“字符串”和“布尔”类型的操作数

我怎样才能让这个查询工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T09:54:15.990

尝试这个：

```
from c in PriceListPolicies_TBLs 
where 
(
  ((c.CountryCode ?? "VNALL") == "VNALL" ? "VN" : c.CountryCode)
  || 
  ((c.CountryCode ?? "THALL") == "THALL" ? "TH" : c.CountryCode)
) 
select c 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T09:53:53.590

该`||`运算符只能应用于`bool`和`bool`

```
c.CountryCode || (c.CountryCode ?? "THALL") // is wrong, since c.CountryCode is a string 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T11:17:41.370

根据您的[评论](https://stackoverflow.com/questions/14999150/operator-cannot-be-applied-to-operands-of-type-string-and-bool#comment21070841_14999150)，您不需要条件。只需执行以下操作：

```
var allItems = from c in PriceListPolicies_TBLs
               select c;

foreach (var c in allItems)
{
    if (c.CountryCode == "VNALL")
    {
        c.CountryCode = "VN";
    }
    else if (c.CountryCode == "THALL")
    {
        c.CountryCode = "TH";
    }
} 
```

# c# - 自定义数据表输出

> ID：14999151
> 
> 赞同：2
> 
> 时间：2013-02-21T09:52:00.260
> 
> 标签：c#, winforms, data-binding

我对 Windows 窗体（.net 3.5）很陌生，并试图以一种好的方式呈现一些绑定数据。

我有一个看起来像这样的表：

```
date        -      unit     -      message
2012-01-01         200             some text
2012-01-01         300             some text
2012-01-01         400             some text
2012-01-02         100             some text
2012-01-02         300             some text
2012-01-02         700             some text 
```

我想将其输出到：

```
units       -    2012-01-01 - 2012-01-02   - count
200              some text                   1
100                           some text      1
300              some text    some text      2 
```

等等……这可能吗？我应该从哪里开始？我不知道所有可用的功能和控件，也许你们有一些聪明的想法。

提前致谢！

代码：

```
public DataTable ReadExcel()
{
        String excelConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=test.xlsx;Extended Properties=\"Excel 12.0;IMEX=1;HDR=YES;TypeGuessRows=0;ImportMixedTypes=Text\"";
        OleDbConnection excelCon = new OleDbConnection(excelConnectionString);
        OleDbCommand excelSelectCmd = new OleDbCommand("SELECT * FROM [stock$]", excelCon);
        OleDbDataAdapter excelAdapter = new OleDbDataAdapter();
        excelAdapter.SelectCommand = excelSelectCmd;
        DataSet excelDS = new DataSet();
        DataTable dt = new DataTable();
        excelAdapter.Fill(excelDS);
        excelCon.Close();

         return dt;
} 
```

所以基本上我只是从一个excel文件中填充一个数据表并返回它，然后我将它绑定到一个DataGridView，数据在网格中按预期显示。

现在我只是在寻找一种以另一种方式呈现数据的方法。

```
 DBLayer test = new DBLayer();
        dataGridView1.DataSource = test.ReadExcel(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:16:24.147

希望它会有所帮助。

**EDIT5**我已将绑定添加到 dataGridView

```
public static class GroupedDtoWorker
{
    public static List<GroupedDto> GetIt()
    {
        DataTable dataTable = new DataTable();
        dataTable.Columns.Add("date").DataType = typeof(DateTime);
        dataTable.Columns.Add("unit").DataType = typeof(Int32);
        dataTable.Columns.Add("message").DataType = typeof(String);
        dataTable.Rows.Add("27.5.1989", "200", "someText");
        dataTable.Rows.Add("27.6.1989", "300", "someText");
        dataTable.Rows.Add("27.7.1989", "400", "someText");
        dataTable.Rows.Add("27.8.1989", "100", "someText");
        dataTable.Rows.Add("27.9.1989", "300", "someText");
        dataTable.Rows.Add("27.10.1989", "700", "someText");

        var result = (from rows in dataTable.AsEnumerable()
                      select new Dto
                      {
                          DateTime = rows.Field<DateTime>("date"),
                          Unit = rows.Field<Int32>("unit"),
                          Message = rows.Field<String>("message")

                      }).GroupBy(e => e.Unit)
                            .Select(
                                e =>
                                new GroupedDto()
                                {
                                    DateMessage = GetDictionary(e),
                                    Unit = e.AsQueryable().First().Unit,
                                    Count = e.Count()
                                }).ToList();
        return result;
    }

    public static Dictionary<String, String> GetDictionary(IGrouping<int, Dto> input)
    {
        Dictionary<String, String> result = new Dictionary<string, string>();
        input.ToList().ForEach(e => result.Add(e.DateTime.Date.ToString("yyyy/MM/dd"), e.Message));
        return result;
    }

}

public class GroupedDto
{
    public Int32 Unit { get; set; }
    public Dictionary<String, String> DateMessage { get; set; }
    public Int32 Count { get; set; }
}

public class Dto
{
    public DateTime DateTime { get; set; }
    public Int32 Unit { get; set; }
    public String Message { get; set; }
} 
```

和 DataGridView 绑定：

```
 public Form1()
    {
        InitializeComponent();
        var dto = GroupedDtoWorker.GetIt();
        dataGridView.Columns.Add("units", "units");
        foreach (GroupedDto groupedDto in dto)
        {
            foreach (KeyValuePair<string, string> keyValuePair in groupedDto.DateMessage)
            {
                if (!dataGridView.Columns.Contains(keyValuePair.Key))
                {
                    dataGridView.Columns.Add(keyValuePair.Key, keyValuePair.Key);
                }
            }
        }
        dataGridView.Columns.Add("count", "count");

        foreach (GroupedDto groupedDto in dto)
        {
            String[] row = new string[dataGridView.Columns.Count];
            row[0] = groupedDto.Unit.ToString();
            row[dataGridView.Columns.Count - 1] = groupedDto.Count.ToString();
            foreach (KeyValuePair<string, string> keyValuePair in groupedDto.DateMessage)
            {
                Int32 index = dataGridView.Columns[keyValuePair.Key].Index;
                row[index] = keyValuePair.Value;
            }
            dataGridView.Rows.Add(row);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:14:36.457

如果您希望使用 LINQ 查询数据表，那么您最好执行以下操作：-

```
public class Dto
{
    public DateTime dateTime { get; set; }
    public Int32 Unit { get; set; }
    public String Message { get; set; }
}

public List<Dto> GetEnumerableObject()
{

       //Populate your Datatable from Excel Spreadsheet here as your already doing

       Var Result = (from rows in DataTable.AsEnumerable()

                     select new Dto
                     {
                        dateTime = rows.Field<DateTime>("date"),
                        Unit = rows.Field<Int32>("unit"),
                        Message = rows.Field<string>("message")

                     }).ToList();

       return Result;

} 
```

在您的主代码中，您可以执行以下操作：-

```
List<Dto> myList = GetEnumerableObject(); 
```

然后你就可以学习LINQ的乐趣了。

# html - 在元素或单独的标签/文件中定义样式：有区别吗

> ID：14999157
> 
> 赞同：-3
> 
> 时间：2013-02-21T09:52:21.430
> 
> 标签：html, css

考虑以下 html 片段

1.

```
<div class="some-class" style="key: value;"> 
```

2.

```
<style type="text/css">
  .some-class {color:red;}
</style>
...
<div class="some-class"> 
```

3.

```
<div class="some-class"> 
```

在`.some-class {color:red;}`一个单独的 CSS 文件中。1、2、3有区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:54:57.880

当然有：每个都有不同的优先级：http: [//www.hongkiat.com/blog/css-priority-level/](http://www.hongkiat.com/blog/css-priority-level/)。

从另一个角度来看——最后一个是最好的，因为它可以以最简单的方式进行维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:55:05.487

第三个选项使用外部 CSS 被认为是最佳实践，因为您的标记不包含任何样式信息。它创建了关注点分离，为您留下更清晰的标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:09:23.807

是，有一点不同。

在第一种情况下，您使用的是具有最高优先级的内联 CSS，因此它将被应用。

在第二种情况下，css 在 HTML 中使用，那么它不是一个好习惯。

在第三种情况下，您在外部文件中声明 CSS，以便它可以跨不同的 html 页面使用，并且也易于维护。

# python - 具有同名时间序列的python pandas（水平）连接错误

> ID：14999158
> 
> 赞同：0
> 
> 时间：2013-02-21T09:52:21.777
> 
> 标签：python, pandas, time-series, concat

（熊猫 0.10.1）

简单的例子在这里。

```
import pandas
import pandas.util.testing as PUT
ts1 = PUT.makeTimeSeries(3)       ## not zero
ts2 = PUT.makeTimeSeries(3) * 0.0 ## zeros
ts1.name = 'ts'
ts2.name = 'ts'
df = pandas.concat([ts1,ts2], axis = 1)
print df

            ts  ts
2000-01-03  -0  -0
2000-01-04   0   0
2000-01-05   0   0 
```

或者反过来，

```
df = pandas.concat([ts2,ts1], axis = 1)

                  ts        ts
2000-01-03  0.615385  0.615385
2000-01-04 -0.881817 -0.881817
2000-01-05  2.354081  2.354081 
```

垂直连接很好

```
df = pandas.concat([ts2,ts1], axis = 0)

2000-01-03   -0.000000
2000-01-04    0.000000
2000-01-05    0.000000
2000-01-03    0.615385
2000-01-04   -0.881817
2000-01-05    2.354081
Name: ts 
```

原来的 ts1 和 ts2 虽然没有被覆盖

```
print ts1

2000-01-03    0.615385
2000-01-04   -0.881817
2000-01-05    2.354081
Freq: B, Name: ts

print ts2

2000-01-03   -0
2000-01-04    0
2000-01-05    0
Freq: B, Name: ts 
```

顺便说一句，如果你连接两个具有相同列名的 DF，结果是正确的

# javascript - CouchDB：获取唯一值

> ID：14999164
> 
> 赞同：0
> 
> 时间：2013-02-21T09:52:47.620
> 
> 标签：javascript, couchdb

我有一个数据库，我需要在其中获取一些值。该数据库由包含房间的文档组成，每个房间都有属性“地板”和“酒店”（还有更多，但它们在这里并不重要）。

事情是; 我需要得到我要求的酒店的所有楼层。`getAllFloorsOnHotel("hotel")`有点东西。但我不知道如何查询数据库。我在这里读过：http: [//guide.couchdb.org/editions/1/en/cookbook.html#unique](http://guide.couchdb.org/editions/1/en/cookbook.html#unique)，但这并不是我所需要的。他们在那里使用钥匙和`group=true`删除重复项，如果地板是钥匙，这将起作用，但在我的情况下，酒店是钥匙。因此，如果我使用，`group=true`我自然只能回到那家酒店的 1 层楼。如果我不使用`group=true`，我将返回指定酒店的所有楼层 - 重复。

我怎样才能让 couchdb 把酒店的所有楼层都还给我，没有重复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:19:47.393

您需要使用数组作为键。

在你的 map 函数中，你的 emit 应该是这样的：

```
emit([doc.hotel, doc.floor], null); 
```

我已经为该值设置了 null，但它可以是您想要用于 reduce 函数的任何内容。要获取每个酒店的每个楼层的列表，您的 reduce 函数可以返回 true。

然后，当您查询时，使用 group_level 而不是 group 并将其分配给您希望将其分组的数组的级别。group_level=2 将按楼层分组。

要使用 curl 查询您会去的房间：

```
curl -X GET http://localhost:5894/yourDB/yourView?group_level=2 
```

这将为您提供所有酒店及其所有楼层。要获取特定酒店的列表，您需要查询一个范围。很难展示如何使用 curl 执行此操作，因为您必须对数组字符串执行各种操作才能使其正常工作。您需要的变量是 startkey 和 endkey。无论如何，您可能正在使用 ajax，所以只需将这些作为选项传递。

```
startkey: ["hotelName", 0],
endkey: ["hotelName", {}],
group_level: 2 
```

0 和 {} 只是低值和高值。{} 排在最后，因此无论您的字符串是什么，都将位于这两件事之间。

此外，如果您使用 descending: true，则需要切换 0 和 {}。（这让我很痛苦）

这里有更多信息： [CouchDB 在同一视图中排序和过滤](https://stackoverflow.com/questions/3311225/couchdb-sorting-and-filtering-in-the-same-view/3313336#3313336)

# c# - 如何使用c#在excel中获取单元格名称（不是其中的值）

> ID：14999165
> 
> 赞同：1
> 
> 时间：2013-02-21T09:52:53.190
> 
> 标签：c#, office-interop, excel-interop

如何使用 C# 获取 Excel 工作表的单元格名称（不是值）。示例：在工作簿 book1、activesheet sheet1 中，单元格 A10 的值是“apple”。如果选择了这个单元格（假设只选择了一个单元格），我应该得到 A10 的答案。你们中的任何人都可以告诉我该怎么做。

我知道这是微不足道的。但我搜索并找到了如何获取值（即在此示例中使用 Excel.range 的“苹果”），而不是单元格的名称。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:00:57.977

```
r = Activecell.Row 
c = ActiveCell.Column 
```

这将为您提供活动单元格的数字地址

# android - 可扩展列表视图处理组单击和向下箭头

> ID：14999170
> 
> 赞同：1
> 
> 时间：2013-02-21T09:53:09.093
> 
> 标签：android, expandablelistview

我有一个可扩展的列表视图，其每个组项都有按钮。有什么方法可以区分按钮点击和项目点击？我希望该按钮单击以展开列表。当项目单击以打开活动时

非常感谢

编辑：更多解释

这大致是我想做的事情，现在我正在考虑使用 ExpandableListView 但我不知道该怎么做。

如您所见，我的组行有两个部分，箭头（我有一个自定义箭头）和文本部分。如果用户点击红色部分，那么我想展开（典型的可扩展列表），如果用户点击绿色部分，那么它会将他们带到一个活动中。

请，任何想法如何！ ![在此处输入图像描述](../Images/6e9876643954e500df9ec9a75f4cb8ef.png)

注意：这个问题以前由@snake 提出。我有类似的问题，所以复制它。

设置可扩展适配器的代码：

```
mGroupCollection = new ArrayList<GroupEntity>();

    //
    // for (int number = 0; number < list_related.size(); number++) {
    // System.out.println("the index of the gi"+number);
    // GroupItemEntity gi = ge.new GroupItemEntity();
    //
    // gi.Name = list_related.get(number);
    // System.out.println("to check index value"+gi.Name);
    // ge.GroupItemCollection.add(gi);
    // }
    //
    // mGroupCollection.add(ge);
    //

    for (int number = 1; number <= 6; number++) {
        GroupEntity ge = new GroupEntity();

        switch (number) {
        case 1:
            ge.Name = "MY LEARNING OPTIONS";

            break;
        case 2:
            ge.Name = "MY CAREER TOOLS";

            GroupItemEntity gi_c1 = ge.new GroupItemEntity();
            gi_c1.Name = "Career Options";
            ge.GroupItemCollection.add(gi_c1);
            GroupItemEntity gi_c2 = ge.new GroupItemEntity();
            gi_c2.Name = "Salary BenchMark";
            ge.GroupItemCollection.add(gi_c2);
            GroupItemEntity gi_c3 = ge.new GroupItemEntity();
            gi_c3.Name = "Reading List";
            ge.GroupItemCollection.add(gi_c3);

            break;
        case 3:
            ge.Name = "MY JOURNAL";

            GroupItemEntity gi_j1 = ge.new GroupItemEntity();
            gi_j1.Name = "NoteBook";
            ge.GroupItemCollection.add(gi_j1);
            GroupItemEntity gi_j2 = ge.new GroupItemEntity();
            gi_j2.Name = "Calendar";
            ge.GroupItemCollection.add(gi_j2);
            GroupItemEntity gi_j3 = ge.new GroupItemEntity();
            gi_j3.Name = "Favourites";
            ge.GroupItemCollection.add(gi_j3);

            break;

        case 4:

            ge.Name = "EVENTS";
            GroupItemEntity gi_events = ge.new GroupItemEntity();

            break;

        case 5:
            ge.Name = "PRESS RELEASE";
            GroupItemEntity gi_press = ge.new GroupItemEntity();

            break;

        case 6:
            ge.Name = "ABOUT";
            GroupItemEntity gi_about = ge.new GroupItemEntity();

            break;

        }

        mGroupCollection.add(ge);

    }

    // ge.Name = "commnets";

    adapterexpand = new ExpandableListMainFragmentAdapter(getActivity(),
            lv, mGroupCollection);
    System.out.println("I reached here in case" + adapterexpand);

    lv.setAdapter(adapterexpand); 
```

我的组点击可扩展列表代码：

```
 lv.setOnGroupClickListener(new OnGroupClickListener() {

        @Override
        public boolean onGroupClick(ExpandableListView parent, View v,
                int groupPosition, long id) {
            String planet = adapterexpand.getGroupValue(groupPosition)
                    .toString();
            System.out.println("this is from details" + planet.trim());
            //Fragment newContent = null;
            switch (groupPosition) {

            case 0:
                Intent intentcourse = new Intent(getActivity(),
                        LearnMainActivity.class);

                startActivity(intentcourse);

                break;
            case 1:

                //Intent intentcareer = new Intent(getActivity(),
                        //CareerToolMainActivity.class);
                //startActivity(intentcareer);

                break;
            case 2:

                break;

            case 3:
                Intent intentevent = new Intent(getActivity(),
                        EventsMainActivity.class);
                startActivity(intentevent);
                break;

            case 4:

                Intent intentspeech = new Intent(getActivity(),
                        SpeechMainActivity.class);
                startActivity(intentspeech);

                break;
            case 5:
                //newContent = new ColorFragment(android.R.color.black);

                break;

            }

            return false;
        }

    }); 
```

这是处理子点击的方式：

```
 lv.setOnChildClickListener(new ExpandableListView.OnChildClickListener()
    {
        @Override
        public boolean onChildClick(ExpandableListView parent, View v, int group_position, int child_position, long id)
        {
        if (group_position==2)
        {
            //Fragment newContent = null;
            switch (child_position) {

            case 0:
                Intent intentcourse = new Intent(getActivity(),
                        NoteBookMain.class);

                startActivity(intentcourse);

                break;
            case 1:
                Intent intentcal = new Intent(getActivity(),
                        SimpleCalendarViewActivity.class);
                startActivity(intentcal);

                break;
            case 2:

                break;

            case 3:

            case 4:
            //  newContent = new ColorFragment(android.R.color.white);

                break;

            }

            System.out.println("clicked parent " + group_position + " child "
                    + child_position);

        }
            return false;

        }

    }); 
```

# linux - www 文件夹的权限被拒绝

> ID：14999172
> 
> 赞同：0
> 
> 时间：2013-02-21T09:53:10.827
> 
> 标签：linux, apache, permissions, permission-denied

`www`我使用终端和`root`用户在我的文件夹中创建了一个目录。然后，在该文件夹中创建一些文本文件。（带终端和`root`用户）

现在，当我想通过浏览器访问这些文件和目录时，Apache 说：

> 403 禁止。您无权访问此服务器上的 /folder。

目录中的其他文件和文件夹`www`可通过浏览器访问。（我通过 FTP 客户端上传它们）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:11:17.493

您必须更改文件和文件夹所有者。形成你的终端：

```
chown YOUR_APACHE_USER YOUR_FOLDER 
```

（显然你必须替换 YOUR_APACHE_USER 和 YOUR_FOLDER）

或者你可以写：

```
chown -R YOURAPACHEUSER YOUR_FOLDER 
```

做所有的文件和子文件夹。

注意：必须写 YOUR_FOLDER 的绝对路径

# hirefire - Hirefire 不会运行延迟的作业

> ID：14999179
> 
> 赞同：0
> 
> 时间：2013-02-21T09:53:27.987
> 
> 标签：hirefire

我正在使用带有hirefire gem 的延迟工作活动记录来管理工人。但是在heroku上似乎hirefire没有运行作业，当我在下面运行这个命令时

```
 heroku run rake jobs:work --app gentle-gorge-9319 
```

然后它运行工作。但是hirefire的作者说它会检测工作本身。

有什么帮助吗？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-25T20:24:24.367

如果您从未为您的应用扩展过工作人员，请先扩展至单个工作人员，然后再缩减。显然，这会将您的应用程序标记为“收费”，并让 HireFire 扩大/缩小工作人员的规模。这对我有用。

> 如果这是您第一次使用 Heroku，或者从未使用过他们的任何付费功能，请确保您已在 Heroku 输入您的帐单信息，以便他们可以实际向您收取使用其资源的费用。如果您没有填写帐单信息，那么它将不起作用。此外，尝试从 Heroku 的管理器（或通过命令行）手动扩展以查看它是否有效。这也会将您的帐户标记为“收费”，这很重要，因为 HireFire 无法为您执行此操作。

通过[HireFire 的常见问题解答](http://hirefire.io/documentation/support/faqs)

# perl - 替换换行符和后面的空格，直到文件中的特定字符串

> ID：14999184
> 
> 赞同：2
> 
> 时间：2013-02-21T09:53:34.960
> 
> 标签：perl, unix, sed

如何使用单行**sed**或**perl**替换换行符和后面的空格，直到特定字符串？

例如，我想在文件中的字符串“XYZ”之前替换换行符和后面的空格。所有以单词 'XYZ' 开头的行都将附加在上一行之前（带有一个额外的空格）。

```
lorem ipsum dolor 坐 amet
  XYZ lorem ipsum dolor sit amet
    XXX lorem ipsum dolor sit amet
  DDD lorem ipsum dolor sit amet
      XYZ lorem ipsum dolor sit amet
cccc lorem ipsum dolor sat amet

   XYZ lorem ipsum dolor sit amet

```

输出将是

```
lorem ipsum dolor sit amet XYZ lorem ipsum dolor sit amet
    XXX lorem ipsum dolor sit amet
  DDD lorem ipsum dolor sit amet XYZ lorem ipsum dolor sit amet
cccc lorem ipsum dolor sat amet XYZ lorem ipsum dolor sat amet

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T10:02:57.113

```
perl -0777pe's/\n\s*(?=XYZ)/ /g' file 
```

`-0777`导致整个文件被视为一行。

写入的命令将输出到 STDOUT，您可以随意重定向。`-i~`并将`-i`编辑“就地”，分别有和没有备份。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:59:54.657

试试这个：

`s/[\s\n]+XYZ/ XYZ/gsm;`

# sql - 返回多列的plpgsql函数被多次调用

> ID：14999187
> 
> 赞同：1
> 
> 时间：2013-02-21T09:53:39.677
> 
> 标签：sql, postgresql, plpgsql, rowtype, lateral

我正在运行 PostgreSQL 9.2.1 并有一个返回 3 列的 plpgsql 函数。它被称为这样（简化）：

```
SELECT (my_function(b.input)).*, a.other, b.columns
FROM table_a a
JOIN table_b b ON a.id = b.id
WHERE ... 
```

该函数打印出一条警告消息，我惊讶地发现它打印了 3 次。看起来该函数被调用了 3 次 - 大概每列一次。这对性能没有好处！我怎样才能确保它只被调用一次？它已被标记为 STABLE。

如果我称它为

```
SELECT * FROM my_function(input) 
```

然后警告只打印一次，但我不知道如何将它集成到更大的查询中，并返回连接和其他列。也就是说，当我需要 FROM 列表中的其他表并且函数从这些表中获取输入时，我不知道如何将函数放入 FROM 列表中。

**编辑**：

查询（更接近原始）：

```
SELECT (my_aggregate_function(sub1.border, sub1.lower_limit, sub1.upper_limit, operation)).*
FROM
(
    SELECT (my_function(ca.timeslice_id)).*, agc.operation
    FROM geometry_component agc
    JOIN volume av ON agc.volume_id = av.id
    JOIN volume_dependency avd ON av.contributor_id = avd.id
    JOIN my_rowset_function('2013-02-22') ca ON avd.id = ca.feature_id
    WHERE agc.timeslice_id = 12345
    ORDER BY agc.sequence
) sub1 
```

`my_aggregate_function`并且`my_function`每个返回 3 列（border、lower_limit、upper_limit），但是`my_aggregate_function`是一个聚合并且`my_function`是一个常规函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:13:55.780

这应该做的工作：

```
SELECT (y).*
FROM  (
   SELECT my_aggregate_function(border, lower_limit, upper_limit, operation) AS y
   FROM (
      SELECT (x).*, operation
      FROM  (
         SELECT my_function(ca.timeslice_id) AS x, agc.operation
         FROM   geometry_component agc
         JOIN   volume             av  ON av.id = agc.volume_id
         JOIN   volume_dependency  avd ON avd.id = av.contributor_id
         JOIN   my_rowset_function('2013-02-22') ca ON ca.feature_id = avd.id
         WHERE  agc.timeslice_id = 12345
         ORDER  BY agc.sequence
         ) sub1
      )sub2
   )sub3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:58:24.680

不幸的是，这是实现的正常怪癖。`LATERAL`当9.3支持查询时，可以避免这个问题。

目前我不知道有什么好的解决方法。

# c++ - 性能下降 - 可能是设计不当的方法

> ID：14999188
> 
> 赞同：3
> 
> 时间：2013-02-21T09:53:40.007
> 
> 标签：c++, performance, vector

我正在开发基于客户端-服务器图块的游戏。客户端保存 3 维数据，`std::vector`并在每一帧中将其内容与服务器发送的内容进行比较（我`std::vector`在客户端有一个单独的内容，其中填充了服务器发送的数据）。

现在客户端的地图由 15x11 个图块组成，每个图块包含大约 10 个放置在其上的对象的数据，所以我在 a 中得到 15*11*10 = 1650 个元素 `std::vector`。

我正在比较两个`std::vector`s 中的数据，如果有变化，我会创建新对象/删除对象/移动对象，具体取决于差异。我就是这样做的：

```
std::vector<IdAndPosition> clientIds; 
std::vector<IdAndPosition> serverIds;

// Fill client ids
for(unsigned int i = 0; i < m_tiles.size(); i++)
{
    for(unsigned int j = 0; j < m_tiles[i].size(); j++)
    {   
        for(unsigned int s = 0; s < m_tiles[i][j].getObjects().size(); s++)
        {
            clientIds.push_back(IdAndPosition(m_tiles[i][j].getObjectAtPosition(s)->getId(), i, j, s));
        }
    }
}

// Fill server ids
for(unsigned int i = 0; i < g_gameStateData.m_gameObjects.size(); i++)
{
    for(unsigned int j = 0; j < g_gameStateData.m_gameObjects[i].size(); j++)
    {   
        for(unsigned int s = 0; s < g_gameStateData.m_gameObjects[i][j].size(); s++)
        {
            serverIds.push_back(IdAndPosition(g_gameStateData.m_gameObjects[i][j][s].second, i, j, s));
        }
    }
}

for (int i = 0; i < serverIds.size(); i++)
{
    IdAndPosition& serverId = serverIds[i];

    bool found = false;
    for(int j = 0; j < clientIds.size(); j++)
    {
        IdAndPosition& clientId = clientIds[j];

        found = serverId.id == clientId.id;
        if(found)
            break;
    }
    if(!found)
    {
        // If not found, create that object
                        // tileX        // tileY
        m_tiles[serverId.pos[0]][serverId.pos[1]].addObjectAtPosition(
            TGameObjectFactory::createGameObject(g_gameStateData.m_gameObjects[serverId.pos[0]][serverId.pos[1]][serverId.pos[2]].first),   // Game object
            serverId.pos[2]                                                                                                                 // Position at stack
        );

        // And set it's individual id
        m_tiles[serverId.pos[0]][serverId.pos[1]].getObjectAtPosition(serverId.pos[2])->setId(g_gameStateData.m_gameObjects[serverId.pos[0]][serverId.pos[1]][serverId.pos[2]].second);
    }
}

for (int i = 0; i < clientIds.size(); i++)
{
    IdAndPosition& clientId = clientIds[i];

    bool found = false;
    for(int j = 0; j < serverIds.size(); j++)
    {
        IdAndPosition& serverId = serverIds[j];

        found = serverId.id == clientId.id;
        if(found)
            break;
    }
    if(!found)
    {
        // If not found, create empty object at this position
                        // tileX        // tileY
        m_tiles[clientId.pos[0]][clientId.pos[1]].addObjectAtPosition(
            TGameObjectFactory::createGameObject(NO_GAME_OBJECT_ID),        // Empty game object (we're removing deprecated one)
            clientId.pos[2]                                                 // Position at stack
        );
    }
} 
```

问题是由于在调试模式下调用该函数（从 ~90 到 ~20 fps），我的性能大幅下降。我知道每帧都要经过大量数据，但我不知道如何设计它以使其不那么慢。

我在 Visual Studio 2012 中使用了性能分析来找出导致最大性能下降的确切原因，我得到了这个结果： ![在此处输入图像描述](../Images/98cc96a8e7a45777d9a70f973f33e84d.png)

所以看起来`[] operator`是`std::vector`主要原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T09:59:56.407

您正在对其进行性能分析的代码看起来像是对每个项目进行线性 O(n) 搜索，从而使整个事情成为 O(n^2)。

我真的不明白你想要实现什么，但原因不是因为 std::vector 的操作符很慢，而是因为你这样做的次数太多了。

我建议首先将您的所有 clientIds 放在一个地图中，这会将订单减少到 O(nlogn)。可能还需要进行其他优化，例如，如果您可以提供帮助，请不要查看外部地图中的每个元素。

```
for(int j = 0; j < serverIds.size(); j++)
{
    IdAndPosition& serverId = serverIds[j];

    found = serverId.id == clientId.id;
    if(found)
        break;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T10:00:28.150

（在我的 MSVC++ 中）的调试版本中有边界检查，`[]`它在发行版中被删除，这可能是它相对如此之高的原因。

这是我看到的代码。

```
const_reference operator[](size_type _Pos) const
        {   // subscript nonmutable sequence
 #if _ITERATOR_DEBUG_LEVEL == 2
        if (size() <= _Pos)
            {   // report error
            _DEBUG_ERROR("vector subscript out of range");
            _SCL_SECURE_OUT_OF_RANGE;
            }

 #elif _ITERATOR_DEBUG_LEVEL == 1
        _SCL_SECURE_VALIDATE_RANGE(_Pos < size()); 
 #endif /* _ITERATOR_DEBUG_LEVEL */

        return (*(this->_Myfirst + _Pos));
        } 
```

几乎每一行都在发行版中消失了，除了最后一个..

# ios - Foursquare 重定向 uri 必须是 https？

> ID：14999189
> 
> 赞同：1
> 
> 时间：2013-02-21T09:53:39.873
> 
> 标签：ios, objective-c, api, foursquare

我在foursquare 上创建了新应用程序，登录到foursquare 后我需要将其重定向到我的iOs 应用程序。

我使用 BZFoursquare API。API 的教程使用自定义 URL 方案，但我无法在不以 http 或 https 开头的 Foursquare 应用程序设置 url 上编写

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:24:56.050

托管一个网站，将用户重定向回您的应用程序。如果你想要一些超级简单的东西，你可以试试[https://www.webscript.io/](https://www.webscript.io/)

# ruby-on-rails - rails 设计 edit_user_registration

> ID：14999192
> 
> 赞同：0
> 
> 时间：2013-02-21T09:53:57.043
> 
> 标签：ruby-on-rails, devise

我在我的 Rails 应用程序中使用设计进行身份验证。我可以登录和注销，也可以注册。但是，一旦用户登录，我想为用户提供一种修改登录密码的方法。为此，该应用程序提供了指向**“edit_user_registration_path”**的链接，该链接显示在下面的 rake 路由输出中。

当用户点击下面的修改密码链接时，

```
<li><%= link_to "Change Password", edit_user_registration_path %></li> 
```

我收到以下错误

```
ActionController::RoutingError (No route matches {:action=>"edit", :controller=>"users"}): 
```

我有一个带有显示、编辑和更新操作的 UsersController。编辑操作是更新用户模型的其他列。

路线设置如下

```
devise_for :users
resources  :users, only: [:show, :edit, :update] 
```

rake 路由输出 -

```
 new_user_session GET    /users/sign_in(.:format)       devise/sessions#new
        user_session POST   /users/sign_in(.:format)       devise/sessions#create
destroy_user_session DELETE /users/sign_out(.:format)      devise/sessions#destroy
       user_password POST   /users/password(.:format)      devise/passwords#create
   new_user_password GET    /users/password/new(.:format)  devise/passwords#new
  edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit
                     PUT    /users/password(.:format)      devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)        devise/registrations#cancel
   user_registration POST   /users(.:format)               devise/registrations#create
new_user_registration GET    /users/sign_up(.:format)       devise/registrations#new
edit_user_registration GET    /users/edit(.:format)          devise/registrations#edit
                     PUT    /users(.:format)               devise/registrations#update
                     DELETE /users(.:format)               devise/registrations#destroy
           edit_user GET    /users/:id/edit(.:format)      users#edit
                user GET    /users/:id(.:format)           users#show
                     PUT    /users/:id(.:format)           users#update
                root        /                              home#index 
```

控制台日志如下

```
Started GET "/users/edit" for 127.0.0.1 at 2013-02-21 15:21:38 +0530
Processing by Devise::RegistrationsController#edit as HTML
 User Load (0.6ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
 Rendered devise/registrations/edit.html.erb within layouts/application (15.9ms)
 Rendered layouts/_shim.html.erb (0.0ms)
 Rendered layouts/_messages.html.erb (0.1ms)
 Rendered layouts/_header.html.erb (42.5ms)
Completed 500 Internal Server Error in 99ms

ActionController::RoutingError (No route matches {:action=>"edit", :controller=>"users"}):
app/views/layouts/_header.html.erb:22:in `_app_views_layouts__header_html_erb__267315279__621159918'
app/views/layouts/application.html.erb:20:in `_app_views_layouts_application_html_erb__982964301_89714280' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:43:56.407

上面日志中的重要行是：

> ActionController::RoutingError (没有路由匹配 {:action=>"edit", :controller=>"users"}): app/views/layouts/_header.html.erb:22:in `_app_views_layouts__header_html_erb__267315279__621159918'

在这种情况下，路由需要与它的所有参数匹配

```
edit_user GET    /users/:id/edit(.:format)      users#edit 
```

未提供 :id 时不匹配。

代替：

```
<%= link_to "Settings", edit_user_path %> 
```

`current_user`作为参数发送：

```
<%= link_to "Settings", edit_user_path(current_user) %> 
```

# php - Kohana：授权 ORM

> ID：14999196
> 
> 赞同：1
> 
> 时间：2013-02-21T09:54:13.330
> 
> 标签：php, authentication, orm, kohana-3

我是 Kohana 的菜鸟，正在尝试使用 Auth ORM 实现登录功能。以下是我编写的代码：

/classes/controller/admin.php

```
<?php defined('SYSPATH') or die('No direct script access.');

class Controller_Admin extends Controller_Default
{
    public function action_index()
    {            
        // Enter a new user manually
        $user = ORM::factory('admin');
        $user->username = 'admin';
        $user->password = 'password';        
        $user->save();

        // Login with this user
        $success = Auth::instance()->login('admin','password','admin');
        if ($success){
            echo "Welcome !";
        }else{
            echo "Not welcome...";
        }
    }

} 
```

/classes/models/admin.php

```
<?php defined('SYSPATH') or die('No direct access allowed.');

class Model_Admin extends ORM {

    public function save(Validation $validation = NULL)
    {
        $this->salt = uniqid();
        $this->password = Auth::instance()->hash($this->password, $this->salt);
        $this->created = date('Y-m-d');

        parent::save($validation);
    }

} 
```

引导程序.php

```
 Kohana::modules(array(
    'auth'       => MODPATH.'auth',       // Basic authentication
    // 'cache'      => MODPATH.'cache',    auth  // Caching with multiple backends
    // 'codebench'  => MODPATH.'codebench',  // Benchmarking tool
     'database'   => MODPATH.'database',   // Database access
    // 'image'      => MODPATH.'image',      // Image manipulation
     'orm'        => MODPATH.'orm',        // Object Relationship Mapping
    // 'unittest'   => MODPATH.'unittest',   // Unit testing
    // 'userguide'  => MODPATH.'userguide',  // User guide and API documentation
    ));

Cookie::$salt = 'somerandomstring'; 
```

数据库表结构如下：id=>主键用户名密码salt created

我有

而且我每次都会收到“不欢迎......”的消息。我不确定我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T01:27:11.957

我在这里看到了一些可能会有所帮助的想法

```
Auth::instance()->login('admin','password','admin'); 
```

第三个参数应该是布尔值，而不是字符串，它启用自动登录

[http://kohanaframework.org/3.3/guide-api/Auth_ORM#login](http://kohanaframework.org/3.3/guide-api/Auth_ORM#login)

默认情况下，Kohana Auth 使用用户模型作为对象进行身份验证，所以我会使用

```
 $user = ORM::factory('User');
    $user->username = 'admin';
    $user->password = 'password';        
    $user->save(); 
```

这假设您仍在使用 classes/models/user.php 或 classes/models/admin.php，主要用于您正在使用的密码加密，但即使这是必要的，您也可以使用以下

```
ORM::factory('user')->create_user($this->request->post(), array(
                'username',
                'password',
                'email'
            )); 
```

[http://kohanaframework.org/3.3/guide-api/Model_User#create_user](http://kohanaframework.org/3.3/guide-api/Model_User#create_user)

所以你实际上不需要创建一个

类/模型/user.php 或

类/模型/admin.php，

除非你需要这样存储创建的，

如果由于某种原因你需要扩展用户其他模型，你应该看看如何扩展它。但我建议研究角色的工作原理，然后您可以保留用户并为其分配管理员角色。

我希望这有帮助

问候安德烈斯

# jquery - jQuery 选择的库

> ID：14999204
> 
> 赞同：0
> 
> 时间：2013-02-21T09:54:38.613
> 
> 标签：jquery, jquery-chosen

有没有一种方法可以让我看到所选脚本何时执行？我想要一个像这样工作的函数：

```
$('#events-drop-down').chosen({}, function(event){
    // Perform something when chosen has been loaded.
}); 
```

无论如何，我可以通过选择的库来实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:01:33.047

据我所知，`chosen`插件的加载没有任何异步。在所有操作完成之前，下一行代码不会运行。

```
$('#events-drop-down').chosen({});
console.log('Will be run after chosen has been applied'); 
```

# python-2.7 - how to access attributes of list objects?

> ID：14999207
> 
> 赞同：0
> 
> 时间：2013-02-21T09:54:47.093
> 
> 标签：python-2.7, wxpython

```
 panel=wx.Panel(self)
        panel.SetBackgroundColour(wx.WHITE)
        font = wx.Font(8, wx.DEFAULT, wx.NORMAL, wx.BOLD)
        self.field1 = wx.TextCtrl(panel,pos=(120,25),size=(170,20))
        self.field2 = wx.TextCtrl(panel,pos=(120,90),size=(170,20))
        self.field=[self.field1,self.field2]
        field1_lbl=wx.StaticText(panel,-1, label='path1:', pos=(25, 25))
        field1_lbl.SetFont(font)
        field2_lbl=wx.StaticText(panel,-1, label='path2:', pos=(25,90))
        field2_lbl.SetFont(font)
        self.checkbox1=wx.CheckBox(panel, -1,'Default',pos=(240,45),size=(50,25))
        self.checkbox1.SetValue(False)
        self.checkbox1.Bind(wx.EVT_CHECKBOX,self.OnDefault)

        self.checkbox2=wx.CheckBox(panel, -1,'Default',pos=(240,110),size=(50,25))
        self.checkbox2.SetValue(False)
        self.checkbox2.Bind(wx.EVT_CHECKBOX,self.OnDefault)
        self.checkbox=[self.checkbox1,self.checkbox2]
    def OnDefault(self,event):
        for checkbox in self.checkbox:
            for field in self.field:
                if self.checkbox.Value==False:
                    self.field.Enable(True)
                else:
                    self.field.Enable(False) 
```

How can I access attributes of `self.checkbox` list object? I get an error saying

```
Traceback (most recent call last):
  File "D:\PROJECT\mypro.py", line 251, in OnDefault
    if self.checkbox.Value==False:
AttributeError: 'list' object has no attribute 'Value' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T23:14:25.270

Are you sure you do not want to define `OnDefault` as follows:

```
def OnDefault(self,event):
    for checkbox in self.checkbox:
        for field in self.field:
            if checkbox.Value==False:
                self.field.Enable(True)
            else:
                self.field.Enable(False) 
```

`self.checkbox` is a normal Python list, its elements have a `Value` attribute. The way this programmed is that the Value of the self.checkbox2 controls both fields.

I don't see where `self.field` is defined, but if that is

```
self.field = [self.field1, self.field2] 
```

then you might want OnDefault to be something like:

```
def OnDefault(self,event):
    for idx, checkbox in enumerate(self.checkbox):
        field = self.field[idx]:
        if checkbox.Value==False:
            field.Enable(True)
        else:
            field.Enable(False) 
```

So the first checkbox controls the first field and the second checkbox the second field.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:57:57.893

Though it worked with the below code, i found it difficult to access attributes of list object.here's my code.

```
def OnDefault(self,event):
    if self.checkbox1.Value==False:
        self.field1.Enable(True)
    else:
        self.field1.Enable(False)

    if self.checkbox2.Value==False:  
        self.field2.Enable(True)
    else:
        self.field2.Enable(False) 
```

but, i have to check for all checkbox contained in the panel.Instead, i tried using list object which lead to an error saying

```
Traceback (most recent call last):
 File "D:\PROJECT\mypro.py", line 149, in OnDefault
   self.field.Enable(False)
AttributeError: 'list' object has no attribute 'Enable' 
```

# java - 循环无法正常工作

> ID：14999211
> 
> 赞同：0
> 
> 时间：2013-02-21T09:55:09.330
> 
> 标签：java, while-loop

我目前的程序有问题，它不能正确循环，请帮助我。代码如下。提前致谢！

```
import java.util.Scanner;
import javax.swing.JOptionPane;
import javax.swing.*;
public class Wewe{
    public static void main(String[]args){
        Scanner inp = new Scanner(System.in);
        boolean tryAgain;
        do{
        System.out.print("\nInput username: ");
        String user = inp.nextLine();
        System.out.print("\nInput password: ");
        String pass = inp.nextLine();
    if(user.equals("admin") && pass.equals("admin")){
            System.out.print("Success!");
            tryAgain = true;
        }
        if(user!="admin" && pass!="admin"){
            JOptionPane.showMessageDialog(null, "Try again! Invalid username or password!","Error Logging-In", JOptionPane.ERROR_MESSAGE);
        tryAgain = false;
    }
}while(tryAgain = true);
        }
    } 
```

我想要发生的是，一旦用户输入了错误的用户名或密码，程序就会循环。但是如果用户输入了正确的用户名或密码，它就不会循环询问用户是否输入正确的用户名或密码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T09:57:48.443

试试这种方式：

```
public static void main(String[]args){
        Scanner inp = new Scanner(System.in);
        boolean tryAgain = true;
        do{
        System.out.print("\nInput username: ");
        String user = inp.nextLine();
        System.out.print("\nInput password: ");
        String pass = inp.nextLine();
    if(user.equals("admin") && pass.equals("admin")){
            System.out.print("Success!");
            tryAgain = false;
        }
        if(!user.equals("admin") || !(pass.equals("admin")){
            JOptionPane.showMessageDialog(null, "Try again! Invalid username or password!","Error Logging-In", JOptionPane.ERROR_MESSAGE);
        tryAgain = true;
    }
}while(tryAgain);
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T09:57:06.177

改变

`if(user!="admin" && pass!="admin")`到`if(user!="admin" || pass!="admin")`

如果您想检查无效的用户名*或*密码

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T09:56:52.133

`while(tryAgain == true)`改变 = 到 ==

`=`用于赋值。

`==`用于检查条件。

您也可以使用 .

```
while(tryAgain) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-21T10:01:54.177

这分配`true`给`tryAgain`（它总是评估为`true`，创建一个无限循环）：

```
} while(tryAgain = true) 
```

所以应该是：

```
} while(tryAgain == true) 
```

但是通过遵循良好的编码风格可以避免整个问题；它应该很简单：

```
} while(tryAgain) 
```

永远不要将布尔变量与布尔常量进行比较，只需使用`booleanVar`或`!booleanVar`作为您的条件

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T09:57:46.537

成功后设置`tryAgain`为 false 以中断循环。还可以使用`else if`after 检查来查看用户是否已成功登录以跳过对无效用户的检查。也正如其他人提到的`String`对象的比较应该使用该`equals`方法。最后，while 循环应该使用比较运算符`==`而不是赋值运算符`=`。

```
public static void main(String[] args) {
        Scanner inp = new Scanner(System.in);
        boolean tryAgain;
        do {
            System.out.print("\nInput username: ");
            String user = inp.nextLine();
            System.out.print("\nInput password: ");
            String pass = inp.nextLine();
            if (user.equals("admin") && pass.equals("admin")) {
                System.out.print("Success!");
                tryAgain = false;  //Changed to false to break loop
            }else if (!user.equals("admin") && !pass.equals("admin")) {
                            //^Using equals instead of ==, added else if
                JOptionPane.showMessageDialog(null,
                        "Try again! Invalid username or password!",
                        "Error Logging-In", JOptionPane.ERROR_MESSAGE);
                tryAgain = false;
            }
        } while (tryAgain == true); //using == instead of =
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-21T09:58:27.093

试试这个：

```
public class Wewe{
    public static void main(String[]args){
        Scanner inp = new Scanner(System.in);
        boolean tryAgain = true;
        do{
            System.out.print("\nInput username: ");
            String user = inp.nextLine();
            System.out.print("\nInput password: ");
            String pass = inp.nextLine();
            if(user.equals("admin") && pass.equals("admin")){
                System.out.print("Success!");
                tryAgain = false;
            }
            if(user!="admin" && pass!="admin"){
                JOptionPane.showMessageDialog(null, "Try again! Invalid username or password!","Error Logging-In", JOptionPane.ERROR_MESSAGE);
                tryAgain = true;
            }
        } while(tryAgain);
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-21T10:00:32.467

您的代码中有几个错误：

```
if(user!="admin" && pass!="admin"){ .... tryAgain = false; 
```

应该：

```
if(user!="admin" || pass!="admin"){ ....  tryAgain = true; 
```

然后：

```
System.out.print("Success!");
            tryAgain = true; 
```

应该：

```
System.out.print("Success!");
            tryAgain = false; 
```

最后：

```
while(tryAgain = true); 
```

应该：

```
while(tryAgain == true); 
```

要不就`while(tryAgain);`

希望有帮助！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-21T10:01:14.853

使用**等于**而不是**==**和

```
 Scanner inp = new Scanner(System.in);
        boolean tryAgain;
        do{
        System.out.print("\nInput username: ");
        String user = inp.nextLine();
        System.out.print("\nInput password: ");
        String pass = inp.nextLine();
    if(user.equals("admin") && pass.equals("admin")){
            System.out.print("Success!");
            tryAgain = true;
        }
        if( !"admin".equals(user) && !"admin".equals(pass)){
            JOptionPane.showMessageDialog(null, "Try again! Invalid username or password!","Error Logging-In", JOptionPane.ERROR_MESSAGE);
        tryAgain = false;
    }
}while(tryAgain = true); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-21T10:03:14.403

为什么不只使用 else 并且 tryAgain 也被这样错误地使用了

```
 if(user.equals("admin") && pass.equals("admin")){
            System.out.print("Success!");
            tryAgain = false; //why repeat again
        }
        else{
            JOptionPane.showMessageDialog(null, "Try again! Invalid username or password!","Error Logging-In", JOptionPane.ERROR_MESSAGE);
        tryAgain = true; //ask again
    } 
```

也应该是

```
while(tryAgain) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-21T10:04:54.723

检查以下解决方案。

```
 public static void main(String[]args){
        Scanner inp = new Scanner(System.in);
        boolean tryAgain;
        do{
        System.out.print("\nInput username: ");
        String user = inp.nextLine();
        System.out.print("\nInput password: ");
        String pass = inp.nextLine();
    if(user.equals("admin") && pass.equals("admin")){
            System.out.print("Success!");
            tryAgain = true;
        }
        if(!user.equals("admin") || !pass.equals("admin")){
            JOptionPane.showMessageDialog(null, "Try again! Invalid username or password!","Error Logging-In", JOptionPane.ERROR_MESSAGE);
        tryAgain = false;
    }
}while(tryAgain);
        }
} 
```

您正在将两个字符串对象与 != 进行比较。那是错的。

您帖子中的问题是： **if(user!="admin" && pass!="admin"){**

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-02-21T10:07:33.027

```
import java.util.Scanner;
import javax.swing.JOptionPane;
import javax.swing.*;
public class Wewe
{
    public static void main(String[]args)
    {
        Scanner inp = new Scanner(System.in);
        boolean tryAgain;
        do
        {
            System.out.print("\nInput username: ");
            String user = inp.nextLine();
            System.out.print("\nInput password: ");
            String pass = inp.nextLine();
            if(user.equals("admin") && pass.equals("admin"))
            {
                System.out.print("Success!");
                tryAgain = false;
            }
            else
            {
                JOptionPane.showMessageDialog(null, "Try again! Invalid username or password!","Error Logging-In", JOptionPane.ERROR_MESSAGE);
                tryAgain = true;
            }
        } while(tryAgain == true);
    }
} 
```

已经进行了许多更改。

首先，您的代码已正确缩进 - 它使任何想要帮助的人都更容易！

其次，您不需要有两个 if 语句。您可以使用 if-else 语句，因为您想这样做：“如果用户的名称和密码正确，请执行此操作。如果用户的名称和密码不正确，请执行此操作。” 可以缩写为“如果您的用户具有正确的用户名和密码，请执行此操作。如果没有，请执行此操作。”。

`while(tryAgain = true)`第三，当 tryAgain 为真时，您的 do-while 循环将继续，因此您需要代替`while(tryAgain == true)`，因为两个等号用于比较，而一个不用于比较。

第四，当 tryAgain 为真时，您的循环继续，因此如果他们输入无效的用户名或密码，您希望 tryAgain 为真以继续循环，如果输入正确的用户名或密码则为假，以停止循环。

**另外，**不要使用 == 来比较字符串。== 检查两个对象是否相同，因此用户永远不会 == "admin"。相反，使用 equals() 方法来比较字符串。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-02-21T10:12:03.250

```
public static void main(String[] args) {
    Scanner inp = new Scanner(System.in);
    boolean tryAgain = false;

    do {
        System.out.print("\nInput username: ");
        String user = inp.nextLine();
        System.out.print("\nInput password: ");
        String pass = inp.nextLine();
        if (user.equals("admin") && pass.equals("admin")) {
            System.out.print("Success!");
            tryAgain = true;
            inp.close();
        } else {
            JOptionPane.showMessageDialog(null,
                    "Try again! Invalid username or password!",
                    "Error Logging-In", JOptionPane.ERROR_MESSAGE);
        }
    } while (tryAgain == false);
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-02-21T10:32:14.040

如果我从代码中理解您的愿望，则存在一些严重错误：

首先，如果用户名和密码“admin”是正确的，并且你想结束循环，代码应该是：

```
System.out.print("Success!");
        tryAgain = false; 
```

不是：

```
System.out.print("Success!");
            tryAgain = true; 
```

将 tryAgain 设置为 false 意味着（当您的变量（和以后的代码）被写入时）程序不会“重试”用户名和密码（循环将停止循环）。

此外，您在以下陈述中有相同的差异：

```
if(user!="admin" && pass!="admin"){
            ...
        tryAgain = false; 
```

tryAgain 应在此处设置为 true，因为您希望编程为“重试”输入名称和密码 ( `tryAgain = true`)。

最后，最重要的是，您的循环 while 命令实际上并没有做任何事情。这：

```
while(tryAgain = true); 
```

正在定义一个变量，而不是从中读取信息。你必须写：

```
while(tryAgain == true); 
```

如果您想检查 tryAgain 是否设置为 true。

除此之外，这里还有一些不好的编码风格选择：

*   有两个单独的 if 语句，其中一个可以工作
*   考虑字符串时使用 '!='
*   考虑布尔值时有任何“=”

您的两个 if 语句可以合并为：

```
if(user.equals("admin") && pass.equals("admin")){
            System.out.print("Success!");
            tryAgain = false;
}
else{
JOptionPane.showMessageDialog(null, "Try again! Invalid username or password!","Error Logging-In", JOptionPane.ERROR_MESSAGE);
        tryAgain = true;
} 
```

由于只有一种方法可以成功，因此没有理由不将其他所有内容都放在 else 子句中。

最后的while语句可以简单地写成：

```
while(tryAgain) 
```

虽然 tryAgain 为真，但它会循环。

这里的另一个问题是，如果用户只是单击 enter 并且 pass 被读取为空字符串。当程序尝试将字符串与“admin”进行比较时，它会抛出异常。我会添加一个首字母：

```
if(user.isEmpty() || pass.isEmpty()){
JOptionPane.showMessageDialog(null, "Try again! Invalid username or password!","Error Logging-In", JOptionPane.ERROR_MESSAGE);
        tryAgain = false
} 
```

到 if 语句。

这是我对代码的处理方式：

```
import java.util.Scanner;
import javax.swing.JOptionPane;
import javax.swing.*;
public class Wewe{
    public static void main(String[]args){
        Scanner inp = new Scanner(System.in);
        boolean tryAgain = true;
        do{
        System.out.print("\nInput username: ");
        String user = inp.nextLine();
        System.out.print("\nInput password: ");
        String pass = inp.nextLine();
if(user.isEmpty() || pass.isEmpty()){
    JOptionPane.showMessageDialog(null, "Try again! Invalid username or password!","Error Logging-In", JOptionPane.ERROR_MESSAGE);
            tryAgain = false
    }
    else if(user.equals("admin") && pass.equals("admin")){
            System.out.print("Success!");
            tryAgain = false;
        }
        else{
            JOptionPane.showMessageDialog(null, "Try again! Invalid username or password!","Error Logging-In", JOptionPane.ERROR_MESSAGE);
        tryAgain = true;
    }
}while(tryAgain);
        }
    } 
```

我当然希望这会有所帮助，并且我能够解决一些困惑！

# stored-procedures - 如何将多行数据从 JDBC 发送到 oracle 存储过程？

> ID：14999212
> 
> 赞同：0
> 
> 时间：2013-02-21T09:55:11.743
> 
> 标签：stored-procedures, jdbc, java-stored-procedures

我想使用 JDBC 中的 oracle 存储过程将多行数据保存在 DB 中。

了解 XML 数据方法。

**我们可以将列表或映射从java发送到数据库并**从存储过程插入数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:01:21.770

有类似“表值参数”的东西可以帮助您将多行存储在数据库中

参考这个。[这可能会给你一些帮助](http://www.higherorderlogic.com/2010/02/calling-an-oracle-stored-procedure-with-a-table-parameter-with-springs-storedprocedure-class/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-13T13:24:50.133

在 Java 中，我们可以为 Oracle 对象使用 STRUCT 类。

有关更多详细信息，请查看以下链接

[https://docs.oracle.com/cd/B10501_01/java.920/a96654/oraoot.htm](https://docs.oracle.com/cd/B10501_01/java.920/a96654/oraoot.htm)

# c# - 来自asp.net后面代码的粗体html字符串

> ID：14999219
> 
> 赞同：0
> 
> 时间：2013-02-21T09:55:33.360
> 
> 标签：c#, asp.net

我希望消息在警告框中显示时以粗体显示。我正在使用 ClientScript.RegisterStartupScript 来创建 javascript 警报框

我尝试在字符串中使用 b 标记，但它不起作用，asp.net 不会将其转换为等效的 html

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:57:01.510

Javascript`alert()`框无法格式化。

如果您希望格式化文本，您应该使用[自定义模式弹出窗口](http://jqueryui.com/dialog/)。

***现场演示：http:** [//jsfiddle.net/FCreL/](http://jsfiddle.net/FCreL/)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:59:33.450

无法更改标准警报中的文本样式。您可能会浏览这些有关创建 DHTML 弹出窗口的链接，但我认为仅在警报上加粗文本的工作量太大。

[http://www.openwebware.com/products/openpopups/](http://www.openwebware.com/products/openpopups/)

[http://www.subimage.com/dhtml/subModal/](http://www.subimage.com/dhtml/subModal/)

[http://www.dynamicdrive.com/dynamicindex8/dhtmlwindow/index.htm](http://www.dynamicdrive.com/dynamicindex8/dhtmlwindow/index.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:00:05.733

该`alert()`对话框未呈现在`HTML`. 所以更好的选择去自定义警报框或确认框。

给你：[模态对话框](http://www.javascriptplugins.com/javascript/plugin/modal-dialog-box/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T10:02:06.307

你不能这样做。但是您可以使用自定义警报和确认框。

您可以在此处阅读一些用户界面库：

[http://speckyboy.com/2010/05/17/15-javascript-web-ui-libraries-frameworks-and-libraries/](http://speckyboy.com/2010/05/17/15-javascript-web-ui-libraries-frameworks-and-libraries/)

最常见的库是：

*   [http://jqueryui.com/](http://jqueryui.com/)
*   [http://mootools.net/](http://mootools.net/)
*   [http://www.prototype-ui.com/](http://www.prototype-ui.com/)
*   [http://script.aculo.us/](http://script.aculo.us/)
*   [http://developer.yahoo.com/yui/](http://developer.yahoo.com/yui/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T09:58:24.460

无法更改默认 javascript 警告框中的文本样式。

如果您想设置警报样式，最好创建一个“弹出”div，您可以在其中放入 HTML 内容。像[fancybox](http://fancybox.net/)这样的东西可能更适合您的需求。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T09:57:28.777

你无法改变这一点。警报框和确认框..它是根据浏览器的角度来看的。你无法改变这一点。是的，您可以创建自己的对话框..

如果您想创建自己的对话框，那么您可能会发现这个有趣的
[jQuery UI 对话框](http://jqueryui.com/dialog/)

# iphone - Iphone 如何从这个 json HASH 获取 ID 和所有者到 NString

> ID：14999223
> 
> 赞同：0
> 
> 时间：2013-02-21T09:55:44.513
> 
> 标签：iphone, objective-c, xcode, json, flickr

Iphone 如何从这个哈希中获取 ID 和所有者到 NString 中。

```
 { "photos": { "page": 1, "pages": 26, "perpage": 10, "total": "259", 
        "photo": [
          { "id": "8493465829", "owner": "77009896@N08", "secret": "e0a8381648", "server": "8367", "farm": 9, "title": "IMG_9444", "ispublic": 1, "isfriend": 0, "isfamily": 0 },
          { "id": "8494565062", "owner": "77009896@N08", "secret": "6aaa0f41b9", "server": "8372", "farm": 9, "title": "IMG_9443", "ispublic": 1, "isfriend": 0, "isfamily": 0 },
          { "id": "8493492761", "owner": "77009896@N08", "secret": "30f4da89b4", "server": "8523", "farm": 9, "title": "IMG_9488", "ispublic": 1, "isfriend": 0, "isfamily": 0 },
          { "id": "8493492007", "owner": "77009896@N08", "secret": "95c0f2215e", "server": "8529", "farm": 9, "title": "IMG_9487", "ispublic": 1, "isfriend": 0, "isfamily": 0 },
          { "id": "8493471375", "owner": "77009896@N08", "secret": "812fddc8cd", "server": "8516", "farm": 9, "title": "IMG_9453", "ispublic": 1, "isfriend": 0, "isfamily": 0 },
          { "id": "8493463059", "owner": "77009896@N08", "secret": "7eedfd6b7c", "server": "8389", "farm": 9, "title": "IMG_9440", "ispublic": 1, "isfriend": 0, "isfamily": 0 },
          { "id": "8494572044", "owner": "77009896@N08", "secret": "e4d514021d", "server": "8087", "farm": 9, "title": "IMG_9454", "ispublic": 1, "isfriend": 0, "isfamily": 0 },
          { "id": "8493462429", "owner": "77009896@N08", "secret": "43822f14a5", "server": "8526", "farm": 9, "title": "IMG_9439", "ispublic": 1, "isfriend": 0, "isfamily": 0 },
          { "id": "8493489419", "owner": "77009896@N08", "secret": "8b50906ebe", "server": "8515", "farm": 9, "title": "IMG_9480", "ispublic": 1, "isfriend": 0, "isfamily": 0 },
          { "id": "8493488459", "owner": "77009896@N08", "secret": "7ec696b8d0", "server": "8242", "farm": 9, "title": "IMG_9479", "ispublic": 1, "isfriend": 0, "isfamily": 0 }
        ] }, "stat": "ok" } 
```

这段代码给了我一个错误

```
NSDictionary *photos =[JSON objectForKey:@"photos"];
NSDictionary *picturesOfLocations = photos[@"photo"];

NSString *flickUserID = picturesOfLocations[@"id"];

// NSURL *url = [[NSURL alloc] initWithString:[picturesOfLocations objectForKey:@"photo"]];
//NSData *data = [NSData dataWithContentsOfURL:url];
// cell.imageView.image = [[UIImage alloc] initWithData:data];
NSLog(@"%@", flickUserID); 
```

`Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFArray objectForKeyedSubscript:]: unrecognized selector sent to instance 0x7527430' *** First throw call stack: (0x1ce3012 0x1120e7e 0x1d6e4bd 0x1cd2bbc 0x1cd294e 0x24dd9 0x171f2 0x185b9 0x4a4753f 0x4a59014 0x4a497d5 0x1c89af5 0x1c88f44 0x1c88e1b 0x1c3d7e3 0x1c3d668 0x64ffc 0x244d 0x2375) libc++abi.dylib: terminate called throwing an exception`

尝试以下操作时出现同样的错误

```
NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

NSDictionary* dict = [NSJSONSerialization JSONObjectWithData:JSON options:kNilOptions error:nil];
NSString* stringPhoho = [[[[dict valueForKey:@"photos"] valueForKey:@"photo"] objectForKey:0] valueForKey:@"owner"];
NSLog(@"%@",stringPhoho); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:23:08.023

```
NSDictionary *picturesOfLocations = photos[@"photo"]; 
```

是错误的，因为它是一个 NSArray ( [ ) 所以：

```
NSArray *picturesOfLocations = photos[@"photo"]; 
```

最后你有一个 NSDictionary 的 NSArray，你可以使用：

```
//parse each photo
for (NSDictionary * photo in picturesOfLocations ){
     NSString* flickUserID = [photo  objectForKey:@"id"];
     NSLog(@"%@", flickUserID);
    //etc...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:05:43.650

请尝试以下语法

使用 JSOn 序列化如下

```
NSDictionary* dict = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:nil]; 
```

并解析`owner`如下

```
NSString* stringPhoho = [[[[dictResponse valueForKey:@"photos"] valueForKey:@"photo"] objectForKey:0] valueForKey:@"owner"]; 
```

它会给你`owner` `77009896@N08`位于`index` `0`数组上的`photo`

您可以根据您的要求访问所有“所有者”ID，即使用 for 循环，如果您使用的是 tableview，则使用`didSelectRow`方法，使用按钮标签等...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:06:54.807

photos[@"photo"] 给出了我认为的错误....

它应该是这样的

... = [照片objectForKey：@“照片”]；

请参阅 NSDictionary 的类参考！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T10:08:01.227

'photo' 是字典数组，而不是字典。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T10:18:03.707

“照片”标签是一个字典数组。我还没有尝试过，但认为这应该适合你。

```
NSDictionary *photos =[JSON objectForKey:@"photos"];
NSArray *picturesOfLocations = [photos objectForKey:@"photo"];

for(NSDictionary* pic in  picturesOfLocations )
{
   NSString *flickUserID = [pic objectForKey:@"id"] 
} 
```

# javascript - 如何在 node.js 中清理 child_process.spawn() 上的子进程

> ID：14999229
> 
> 赞同：8
> 
> 时间：2013-02-21T09:56:00.953
> 
> 标签：javascript, node.js

以下代码：

```
#!/usr/bin/env node
"use strict";

var child_process = require('child_process');

var x = child_process.spawn('sleep', [100],);

throw new Error("failure"); 
```

产生一个子进程并退出而不等待子进程退出。

我怎么能等呢？我想调用 waitpid(2) 但 child_process 似乎没有 waitpid(2)。

添加：

抱歉，我真正想要的是在父进程存在时杀死子进程，而不是等待它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-21T10:11:24.020

```
#!/usr/bin/env node
"use strict";

var child_process = require('child_process');

var x = child_process.spawn('sleep', [10]);

x.on('exit', function () {
    throw (new Error("failure"));
}); 
```

编辑：

您可以通过向主添加监听器来监听主进程，`process`例如`process.on('exit', function () { x.kill() })`

但是抛出这样的错误是一个问题，你最好关闭这个过程`process.exit()`

```
#!/usr/bin/env node
"use strict";

var child_process = require('child_process');

var x = child_process.spawn('sleep', [100]);

process.on('exit', function () {
    x.kill();
});

process.exit(1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T10:26:37.293

```
#!/usr/bin/env node
"use strict";

var child_process = require('child_process');

var x = child_process.spawn('sleep', [10]);

process.on('exit', function() {
  if (x) {
    x.kill();
  }
}); 
```

# agility.js - 如何将动态数组模型属性绑定到 agilityjs 对象的视图

> ID：14999237
> 
> 赞同：1
> 
> 时间：2013-02-21T09:56:37.213
> 
> 标签：agility.js

我使用 agilityjs 作为客户端 mvc 框架。我有一种情况，我有一个 div 元素，它应该显示从服务器端检索并作为模型放在客户端的商家列表。

```
var merchants = //retrieve merchants from server as json array;
var merchantsWrapper = $$({'merchants':merchants},'<div id="merchants-wrapper"></div>'); 
```

现在我需要一种方法将`merchants`模型属性绑定到`merchants-wrapper div`该 div 应该显示所有商家的位置。每个商家都显示在另一个原型中定义的特定布局中`merchant agility object`：

```
var merchantProto = $$({//model props}, '<div>rendering layout</div>'); 
```

我想要一种机制，通过该机制，`merchants array`应该有两种方式绑定到`merchants-wrapper div`并且每个商家都应该根据 来呈现`merchant prootype`，并且如果`merchants`属性通过排序或过滤而改变，视图应该得到相应的更新。

我有一个想法，我可以在事件上渲染一次并在`create`事件上做同样的`change:merchants`事情，但我不想创建新的商人对象，所以要么应该有一种方法来清除`merchants-wrapper`div 的内容，然后附加新的商人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:00:03.533

好吧，我试过了，它对我有用......

```
var merchants = //retrieve merchants from server as json array;
var merchantsWrapper = $$({'merchants':merchants},'<div id="merchants-wrapper"></div>',
    {
      'create':function(){
           var merchnts = [];
           for (each merchant in merchants){  //its pseudocode plz dnt mind the syntax
              var merchnt = $$(merchantProto,{//model props});
              merchnts.push(merchnt); 
           }
           this.model.set({'merchants':merchnts});
       },

       'change:merchants':function(){
           this.view.$("#merchants-wrapper").html("");
           for(each merchant in this.model.get('merchants')){
               this.append(merchant);
           }  
       }
); 
```

我希望它可以帮助别人:)

# r - 我们可以在相关计算中将两个函数合并为一个吗？

> ID：14999244
> 
> 赞同：-1
> 
> 时间：2013-02-21T09:56:55.123
> 
> 标签：r, correlation

这段代码运行良好，我得到的结果如下：

```
dir1 <- list.files("D:thly", "*.bin", full.names = TRUE)
dir2 <- list.files("D:002", "*.envi", full.names = TRUE)
file_tot <- array(dim = c(1440, 720, 11, 2))

resultscor<-apply(file_tot,c(1,2),function(x){cor(x[,1],x[,2],use = "na.or.complete")}) 
```

我想仅在`P-value is lower than 0.05`. 这个功能将完成这项工作：

```
 return_cor = function(x, y)  {
    z = cor.test(x,y)
    if(z[[3]] < 0.05) {
    return(z[[5]])
      } else { 
    return(NA) 
    }
    } 
```

但是我收到了这个错误：

```
 Error in cor.test.default(x, y) : not enough finite observations 
```

这两个函数都工作得很好。我们如何将两个函数合并为一个函数，以便在 P 值为（某个值，阈值）时计算相关性，并且即使少于 3 对也进行计算。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:11:53.847

问题不是很清楚，

如果您只想在 p>0.5 时进行计算，

你可以在执行函数之前添加一个断言，或者一个简单的 if：

像：

```
 if (IsValid(x,y))
     return function(x,y);
 else
     return NA; 
```

其中 isValid 是您发布的检查 x,y 是否足够接近您的函数。

# c# - 实体框架 - 在实体集合上使用 Join 子句

> ID：14999247
> 
> 赞同：0
> 
> 时间：2013-02-21T09:57:00.870
> 
> 标签：c#, sql, entity-framework

我是实体框架的初学者，我需要您的帮助来构建查询。

我有以下表格：

**表格1**

```
idTable1  myDataTable1 
```

**表2**

```
idTable2 myDataTable2 #idTable1 #idTable3 
```

**表3**

```
idTable3 myDataTable3 
```

我需要等效于以下 sql 请求：

```
SELECT * FROM table1 t1
    INNER JOIN table2 t2
    WHERE t1.idTable1 = t2.idTable1 
        and t2.idTable3 = 4; 
```

我尝试使用这样的实体框架来做到这一点，但它不起作用：

```
List<table1> l = context.table1.Where(tab => (tab.table2.idTable3 == 4)).ToList<table1>(); 
```

问题是“table2”是一个EntityCollection，我需要选择一个带有“ElementAt”的来调用“idTable3”，但我想在所有table2元素中搜索......

你有什么想法吗？

问候

编辑：目前，我使用以下 Linq 查询，但如果您有一些想法......

```
from t1 in context.table1 from t2 in t1.table2 where t2.table3.idTable3 == 4 select t1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:53:52.823

```
var result = context.table1.Where(x => x.table2.Any(y => y.idTable3 == 4)).ToList(); 
```

# regex - 用 'bar' 重命名包含子字符串 'foo' 的文件

> ID：14999256
> 
> 赞同：5
> 
> 时间：2013-02-21T09:57:24.833
> 
> 标签：regex, linux, shell, unix, command-line

我想重命名包含子字符串“ `foo`”的所有文件，在给定文件夹中将其替换为“ `bar`”。我该怎么做？

更新：

```
for i in ./*foo*; do mv "$i" "${i//foo/bar}";done 
```

作品！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:00:53.393

如果您有`rename(1)`附带的`perl`（Debian 提供），您可以使用：

```
cd /path/to/directory
rename 's/foo/bar/g' * 
```

如果你有另一个`rename(1)`（我在 Red Hat Enterprise Linux 和其他一些发行版中看到它，它来自 util-linux），你可以尝试：

```
cd /path/to/directory
rename foo bar *foo* 
```

`rename`您可以通过尝试检查您拥有的版本`rename -V`。如果它不识别标志，则它是 perl 版本。如果它打印版本信息，它是另一个版本。

# c# - 如何触发RegularExpressionValidator的客户端验证？

> ID：14999261
> 
> 赞同：0
> 
> 时间：2013-02-21T09:57:46.713
> 
> 标签：c#, asp.net

我将 RegularExpressionValidators 用于我的 ASP.NET 表单中的输入文本框。

GUI看起来像。所有项目都是服务器控件，离开文本框后，如果输入无效，我会显示错误消息。

我已在 RegularExpressionValidator 中使用 EnableClientScript 启用客户端验证。一旦我离开文本框，它会立即触发验证器。但是在单击任何按钮（导致生成回发）时，会从屏幕上删除正则表达式验证器错误显示。如何重新触发客户端验证？

我是asp.net的新手

```
---------------------------
|                         | * Invalid input
---------------------------

Listbox A           Listbox B
------------       ------------
|          |       |          |
|          |       |          |
|          |   >>  |          |
|          |       |          |
|          |       |          |
------------       ------------ 
```

代码是这样的。

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:TextBox ID="nameBox" runat="server" CssClass="StandardTextBox" Width="297px"
        EnableViewState="true"></asp:TextBox>
    <asp:RegularExpressionValidator ID="regExpValidatorRuleName2" align="left" runat="server"
        ControlToValidate="nameBox" 
        Width="10px" Height="10px" 
        CssClass="StandardErrorLabel"
        Display="Dynamic" 
        ErrorMessage="Input has Invalid character(s). Valid characters are a-z, A-Z, 0-9, _, @, ., -"
        ValidationGroup="EditingPanel" 
        ValidationExpression="^[a-zA-Z0-9_@.-]*$" 
        ToolTip="Input has Invalid character(s). Valid characters are a-z, A-Z, 0-9, _, @, ., -">*</asp:RegularExpressionValidator>
    <asp:Panel ID="criteriaPanel1" GroupingText="Test" runat="server"
        left="19px" CssClass="InputPanelTableLeft" Width="400px" Height="470px" Font-Bold="True"
        Font-Size="X-Small">
        <table class="InputPanelTable">
            <tr>
                <td align="left">
                    <asp:ListBox ID="listboxA" Rows="10" runat="server" EnableViewState="true"
                        Width="150px" Height="100px"></asp:ListBox>
                </td>
                <td style="padding: 0px 5px 0px 5px" valign="middle">
                    <asp:Button ID="buttonMove" runat="server" OnClick="buttonMove_OnClick"
                        Text="&gt;&gt;" ToolTip="Moves selected item from left side to right" />
                </td>
                <td align="left">
                    <asp:ListBox ID="listboxB" Rows="10" runat="server" EnableViewState="true"
                        Width="150px" Height="100px"></asp:ListBox>
                </td>
            </tr>
        </table>
    </asp:Panel>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:22:07.283

我发现***buttonMove***在单击它时会导致回发。

验证控件的错误消息不能在回发中持续存在。

您还没有提到从 ListBox A 移动到 ListBox B 的内容。

因此，如果您可以使用 JavaScript 将元素从 ListBox A 移动到 ListBox B（我的意思是，不要使用服务器端程序），您的问题就可以解决。

如果您有任何问题，请告诉我。

# c# - 检查窗口是否为 MessageBox

> ID：14999264
> 
> 赞同：5
> 
> 时间：2013-02-21T09:57:55.287
> 
> 标签：c#, winapi, interop

我有一个功能，我可以对出现的窗口做出反应。现在我想知道出现的窗口是否是一个消息框。如果它是一个，我想阅读它的文本。

我已经能够通过以下方式提取 Window-Title、Class-Name 和 Process-Id

```
[DllImport("user32.dll", CharSet = CharSet.Unicode)]
internal static extern int GetWindowText(IntPtr hWnd, StringBuilder text, int count);

[DllImport("user32.dll", CharSet = CharSet.Unicode, SetLastError = true)]
internal static extern int GetClassName(IntPtr hWnd, StringBuilder lpClassName, int nMaxCount);

[DllImport("user32.dll")]
internal static extern int GetWindowThreadProcessId(IntPtr hWnd, out int lpdwProcessId); 
```

但是我怎样才能找到消息框的文本呢？

要获得所有窗口，我正在使用它：

```
internal static class WindowFinder
    {
    private static readonly List<IntPtr> listWindows = new List<IntPtr>();

    private static bool IsWindowOrDialog(IntPtr hwnd, int lParam)
    {
        if (NativeMethods.IsHungAppWindow(hwnd) || !NativeMethods.IsWindowVisible(hwnd))
            return true;
        listWindows.Add(hwnd);
        return true;
    }

    internal static IEnumerable<IntPtr> GetAllWindows()
    {
        listWindows.Clear();
        NativeMethods.EnumWindows(IsWindowOrDialog, IntPtr.Zero);
        return listWindows;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:52:28.533

我不知道你到底在尝试什么，但你可以：

1.  [`FindWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633499%28v=vs.85%29.aspx)
2.  [`GetDlgItem`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645481%28v=vs.85%29.aspx)并使用提取文本
3.  [`GetWindowText`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633520%28v=vs.85%29.aspx)

由于 MessageBoxes 是静态类型 (0xFFFF)，因此您应该像这样使用`GetDlgItem`和`GetWindowText`：

```
IntPtr dlgHandle = GetDlgItem(MboxHandle, 0xFFFF);
GetWindowText(dlgHandle, yourStringBuilder, maxTextCount); 
```

# api - Trigger.io 安全性，尤其适用于 REST API

> ID：14999265
> 
> 赞同：2
> 
> 时间：2013-02-21T09:58:00.880
> 
> 标签：api, security, rest, authentication, trigger.io

这几天我脑子里只有一个想法。

我使用 trigger.io 作为我们移动应用程序的平台。我们都在使用 javascript 作为 REST API 的脚本语言。

由于我们使用的是 Javascript，因此如果有人反编译应用程序并查看其源代码，则可以看到所有代码，尤其是帐户凭据（Api Key、Secret Key 等）。

我想知道 trigger.io 中是否有任何人可以回答、澄清并给我们一些具体的例子，如何使我们的应用程序免受任何恶意攻击（重放攻击、侧劫持等）和帐户滥用。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T17:27:42.047

对于在用户设备上运行的任何应用程序，密钥安全性绝对是一个大问题。

从 Trigger.io 应用程序中提取密钥可能比从已编译的本机应用程序中提取密钥稍微容易一些，因为您的 JavaScript 可能比编译后的代码更容易混淆。如果您希望在编译后的代码中使用您的密钥，那么您可以考虑使用一个仅将密钥释放到 JS 的本机插件 - [http://docs.trigger.io/en/v1.4/modules/native/](http://docs.trigger.io/en/v1.4/modules/native/)。

但是，我不建议这样做，因为仍然可以从编译的代码中提取密钥——即使混淆二进制文件中的密钥也不足以挫败坚定的黑客。

我们所知道的解决该问题的唯一方法是在应用程序本身中不包含任何密钥，而是让用户通过交互式身份验证步骤。一旦发生这种情况并且您知道您在与谁交谈，您的服务器就可以向应用程序释放必要的密钥。

# python - Django-Axes 导致 DatabaseError - 事务块

> ID：14999266
> 
> 赞同：1
> 
> 时间：2013-02-21T09:58:05.050
> 
> 标签：python, django, transactions, django-postgresql

因此，我将 django 更新为 1.4.5 ，将 postgres 更新为 9.2.3 ，将 psycopg2 更新为 2.4.6 。我`runserver`和一切看起来都很好，但是当我去的时候，我在 session/middleware.py(36) 中`localhost:8000`看到了臭名昭著的“当前事务中止..” 。`request.session.save()`

我跑了`syncdb`，`migrate`没有任何错误或更改。我还在 'DATABASES' - 'OPTIONS' 中添加了：{'autocommit': True, }，但仍然没有帮助。我也试过这个：

```
from django.db import connection
connection._rollback() 
```

在 Django 外壳中。

我还尝试通过以下方式阻止 postgres：

```
pg_ctl -D /usr/local/var/postgres stop -s -m fast 
```

我得到：

```
pg_ctl: server does not shut down 
```

运行`pg -ef|grep postgres`显示没有挂起的查询。

我该如何解决这个块？如何查找是什么原因造成的？

**答：** *我为解决此错误所做的总结*

我启用了 sql 日志记录：

```
DEBUG=True    
LOGGING = {
        'version': 1,
        'disable_existing_loggers': False,
        'handlers': {
            'null': {
                'level': 'DEBUG',
                'class': 'django.utils.log.NullHandler',
            },
            'console': {
                'level': 'DEBUG',
                'class': 'logging.StreamHandler',
                'formatter': 'simple'
            }
        },
        'loggers': {
            'django': {
                'handlers': ['console'],
                'level': 'DEBUG',
            },
        }
    } 
```

这向我展示了正在执行的所有 sql 语句，包括导致内部数据库错误的语句，在我的情况下，这是由 django-axes 引起的（我之前将其升级到版本 1.2.9）。

django-axes 需要创建某些表。重新运行 syncdb 并没有解决我的问题，因为其中一个表（新字段 - 用户名）内部发生了变化。

`python manage.py sqlclear axes`- 向我展示了要删除的表，所以我去了 psql 并做到了。之后我再次运行`python manage.py syncdb`并获得更新的表格。

然后我在`__init__.py`轴模块中发现了一个错误，`get_version()`错误的字符串格式。修复它解决了所有这些混乱:)

终于，美满的结局！

# javascript - 在 ajax 请求中发送大型 XML 字符串

> ID：14999269
> 
> 赞同：1
> 
> 时间：2013-02-21T09:58:09.153
> 
> 标签：javascript, ajax, extjs4

我有一个大的 xml 字符串，我想使用 ajax 调用将其发送到服务器端。

我想使用 ExtJs 4 Ext.Ajax.request 或 javascript Ajax 调用（NO JQUERY）发送它。

我在发送 xmlString 时使用了转义函数，但我无法在服务器端获取完整的 xml 字符串。

有人可以指导我如何使用 extjs ajax 请求或 javascript ajax 请求在服务器端发送大的 xml 字符串吗？

以下是我正在使用的代码行 -

在客户端，我有一个名为 xmlString 的 var，其中包含 svg xml 作为字符串。

```
var xmlString="<xml>  + ........." ;
Ext.Ajax.request({
    url: 'myUrl',
    params: {
        svgXml: xmlString
    },
    success: function(response){
    }
}); 
```

在服务器端，当我从请求中获取 svgXml 参数时，我没有得到在上述 ajax 请求中发送的完整 xml 字符串。

# php - 无论如何创建图形表示让PHP说2D？

> ID：14999270
> 
> 赞同：0
> 
> 时间：2013-02-21T09:58:13.117
> 
> 标签：php, cakephp-2.1

我敢肯定，我不要求整个剧本。如果您有答案 == 是，那么请提供 PHP 中的函数名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:01:16.930

查看[GD 库](http://php.net/manual/en/book.image.php)。它具有处理图像和绘图的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T10:01:18.540

尝试使用`gd library`

更多信息： [http](http://www.php.net/image) ://www.php.net/image 和 [http://www.php.net/imagick](http://www.php.net/imagick)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:01:45.087

不确定这是否真的是您要搜索的内容，但 php 的文档应该能够告诉您更多信息。

例如： http: [//php.net/manual/en/image.examples-png.php](http://php.net/manual/en/image.examples-png.php) [http://www.php.net/manual/en/book.image.php](http://www.php.net/manual/en/book.image.php)

# jquery - Drupal View - 像谷歌图片搜索

> ID：14999272
> 
> 赞同：0
> 
> 时间：2013-02-21T09:58:17.423
> 
> 标签：jquery, css, drupal, google-image-search

我正在尝试为我的内容创建一个目录，该目录具有与谷歌图片搜索类似的功能。IE。当您单击图标/图像时，下方的行会向下移动并显示该图像的扩展内容。

这可以仅由 CSS 完成还是需要先以特定方式设置

*编辑：我知道显示/隐藏是由javascript完成的，但我的意思是我可以让一个div出现并按下它下面的行，而不是仅仅按下它下面的列

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:10:26.193

这不能用纯 CSS 完成，你需要 javascript 来响应点击事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:06:20.390

我认为它应该是每个结果行之后的每个 div，当您单击该 div 上方的图像时，然后通过 jQuery 和其中的内容显示该额外的 div。

以下是您可能想要使用的 jQuery 效果：http: [//api.jquery.com/category/effects/](http://api.jquery.com/category/effects/)

# javascript - Angularjs过滤器回调

> ID：14999273
> 
> 赞同：5
> 
> 时间：2013-02-21T09:58:19.980
> 
> 标签：javascript, jquery, html, dom, angularjs

我有一个使用 Angularjs 过滤器过滤的项目列表。这是 Jade 标记：

```
li(ng-repeat="parcel in parcels | filter : filterActiveAreaParcels") 
```

我想运行一些 jQuery 插件，以在过滤器功能运行并且元素在 DOM 中呈现后增强加载元素的外观。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:01:34.010

假设您的过滤器没有做一些疯狂的异步事情，并且您的*包裹*列表中有合理数量的项目（请参阅 Misko 的 SO 答案[here](https://stackoverflow.com/a/9693933/1095616)），那么这个[plnkr](http://embed.plnkr.co/BO1DhE4O0rS9OOYzJpEb/preview)应该可以完成这项工作。注意这个 plnkr 中的自定义过滤器是如何进行一些相对昂贵的操作（循环超过 1m 次迭代），但是 my-plugin 指令中的 $scope.$watch 仍然能够为列表中的每个过滤项按时调用 jquery 插件。

如果您的 jquery 插件在 ng-repeat 完成之前仍然被调用，那么您可以尝试在指令中使用 $timeout()。

# javascript - 从 javascript 对象中打印 5 个随机键/值对

> ID：14999276
> 
> 赞同：0
> 
> 时间：2013-02-21T09:58:26.433
> 
> 标签：javascript, jquery

我需要从 javascript 对象中选择并打印 5 个随机键/值对。目前我像这样遍历对象：

```
 $.each(object, function(key, val) {
                 ...
        }); 
```

但是我怎么能从这个对象中打印 5 个随机键值对呢？问题是我不知道这个对象的长度，所以我无法通过计算随机起始位置并从那里开始获取 5 对来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:08:39.797

查找对象中的项目数并不难。你只需要使用`Object.keys`. 这将获取一个包含对象中所有键名的数组。

```
var keys = Object.keys(object),
    length = keys.length; 
```

然后您可能会想要随机选择项目，可能是这样的：

```
var i,
    result = [];
for (i = 0; i < 5; i++) {
    result.push(object[keys[Math.floor(Math.random() * length)]]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:08:46.547

`Object.keys(object)`会给你一个对象中所有键的数组

```
var arrayOfAllKeys = Object.keys(object);
for(var i=0; i<5; i++){
    var rnd = Math.floor(Math.random()*arrayOfAllKeys.length);
    var objKey = arrayofAllKeys[rnd];
    alert( "key: " + objKey + " value: " + object[objKey]);
} 
```

您可以使用以下方法模拟 Object.keys(object)：

```
var arrayOfKeys = [];
$.each(object, function(key, value){
    arrayOfKeys.push(key);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:10:04.447

如果对象不是太大，您可以将数据复制到常规数组中并打乱它：

```
function fisherYates(array){
    var i=array.length;
    while(i--){
        var j=Math.floor( Math.random() * (i+1) );
        var tmp=array[i];
        array[i]=array[j];
        array[j]=tmp;
    }
}

var object = {
    firstName: "Jim",
    lastName: "Smith",
    city: "London",
    country: "UK",
    age: 33,
    height: 170,
    score: 123,
    active: true
}

var deck = [];
$.each(object, function(key, val){
    var o = {};
    o[key] = val;
    deck.push(o);
});

fisherYates(deck);

var selection = deck.slice(0, 5);
console.log(selection); 
```

# svn - SVN 日志错误日期不匹配

> ID：14999279
> 
> 赞同：0
> 
> 时间：2013-02-21T09:58:28.653
> 
> 标签：svn

我尝试使用 SVN log 命令列出两个日期之间在 SVN 存储库中完成的活动。我给出了从 2012 年到 2013 年的日期，但它给出了 2010 年的输出。有人可以帮忙吗

```
C:\Users\madsrini>svn log URL -r{2012-08-01}:{2013-02-21}
------------------------------------------------------------------------
r1 | <USERNAME> | 2010-12-10 18:04:52 +0530 (Fri, 10 Dec 2010) | 1 line 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:29:40.837

请重新阅读[SVN 书籍](http://svnbook.red-bean.com/en/1.7/svn.tour.revs.specifiers.html)，“修订日期”一章

> 当您指定一个日期时，Subversion 将该日期解析为该日期的**最新版本的存储库**

并警告“颠覆早一天吗？”

> 如果您将单个日期指定为修订版而不指定一天中的时间（例如 2006-11-27），您可能认为 Subversion 应该为您提供发生在 11 月 27 日的最后修订版。相反，您会从 26 日甚至更早的时间收到修订版。

**您的日志显示（按要求）： 2012-08-01 之前**的最新修订是 2010-12-10

# javascript - jquery手机导航功能？

> ID：14999284
> 
> 赞同：0
> 
> 时间：2013-02-21T09:58:41.383
> 
> 标签：javascript, jquery

我想实现一个 jquery 移动导航。但是从 jquery load() 函数构建我自己的。我看过history.js，但它很难理解。很高兴在地址栏中看到页面的正确 URL。请有人可以帮助我朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:07:49.573

这是一个简单的 History.js 示例。

我们的标记。

```
<!DOCTYPE HTML>
<html>
<head>
    <script src="jquery.js"></script>
    <script src="jquery.history.js"></script>
<title>History.js</title>
</head>
<body>

        <a href="page1.html">Page 1</a>
        <a href="Page2.html">Page 2</a>
     <div id="content">
        <p>Content within this box is replaced with content from
            supporting pages using javascript and AJAX.</p>
    </div>
</body>
</html> 
```

javascript。

```
$(function() {

            // Note: We are using a capital H instead of a lower 'h'
            var History = window.History; 
            if (!History.enabled) {
                // History.js is disabled for this browser.
                // This is because we can optionally choose to support HTML4 browsers or not.
                return false;
            }

            // Bind to StateChange Event
            History.Adapter.bind(window, 'statechange', function(e) {
                // Note: We are using statechange instead of popstate
                var State = History.getState();
                $('#content').load(State.url + " #content").html();
            });

            $('a').on('click',function(evt) {
                evt.preventDefault();
                History.pushState(null, $(this).text(), $(this).attr('href'));
            });
        }); 
```

将该脚本插入到页面的头部标签或底部。基本上 pages1.html 和 page2.html 应该包含一个名为 content 的 div，它会使用 load from 方法返回内容`$('#content').load(State.url + " #content").html();`

就是这样。

# javascript - 如何使用 javascript 获取表数据值作为变量

> ID：14999285
> 
> 赞同：0
> 
> 时间：2013-02-21T09:58:44.110
> 
> 标签：javascript, html, asp-classic

我在浏览器上有一个页面，它以表格格式显示一些项目。现在我想选择特定项目（行），然后将这些选定行的数据（列值）作为 Javascript 函数中的变量获取，以便我可以将它们用作 ASP 页面上查询字符串中的参数。

```
function selectedRows() 
{
   var selectedItems = Hesto.UI.GetSelectedItems('#ScannedLabelTable');
   $.each(selectedItems, function (i, item) {
   $.ajax({
   url: PRINT_LABELS_QUERY_PAGE
         , data:  // this is where i need help on..
     , dataType: 'json'
     , success:alert("Labels Printed")
     , error: Hesto.Ajax.ErrorHandler
     });
});
FetchLabelDetails();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:01:24.057

试试这个它对我有用.......

```
$('#export').click(function() {
          //alert('clicked')
          var myRows = [];
            var $headers = $("th");
            var $rows = $("tbody tr").each(function(index) {
              $cells = $(this).find("td");
              myRows[index] = {};
              $cells.each(function(cellIndex) {
                    myRows[index][$($headers[cellIndex]).html()] = $(this).html();
              });    
            });
            var myObj = {};
            myObj.myrows = myRows;

            //alert(JSON.stringify(myObj));
                $.ajax({
                type: "POST",
                url: "your url",
                data: "objdata="+JSON.stringify(myObj),//passing data as json
                success: function(result){  
                    //alert('exported');
                }  
            });

          }); 
```

这将从表中导出所有数据并保存为 json

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:12:12.370

从这样的表中，您可以接受`document.getElementById("").innerHTML`用于从特定单元格中获取

```
 <TABLE>
    <TR>
        <TD id='1'>abc</TD>
        <TD id='2'>efg</TD>
        <TD id='3'>hij</TD>
    </TR>
    <TR>
        <TD id='4'>lmno</TD>
        <TD id='5'>pqr</TD>
        <TD id='6'>stu</TD>
    </TR>
    </TABLE> 
```

你可以`document.getElementById("2").innerHTML`用来获取`efg`

# spring - 公共网络服务

> ID：14999293
> 
> 赞同：-1
> 
> 时间：2013-02-21T09:59:13.783
> 
> 标签：spring, spring-security, cxf

我也在我使用 spring 的项目中用 cxf 编写了一个 Web 服务。如果有人想访问我的服务，他/她会收到错误“处理时发生故障”。这是关于春季安全的。我希望我的服务是公开的，每个人都可以访问我如何配置它。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-21T10:05:14.320

你试过弹簧安全拦截网址吗？配置喜欢如下

```
<security:http ......
<security:intercept-url pattern="/yourwebservice/**"
filters="none" />
</security:http> 
```

使用此配置，Web 服务调用应该绕过 Spring Security。

# ruby-on-rails - submit_tag rails 表单中的引导图标

> ID：14999294
> 
> 赞同：45
> 
> 时间：2013-02-21T09:59:14.113
> 
> 标签：ruby-on-rails, forms, twitter-bootstrap

我有这个表格：

```
<%= form_tag(user_pages_path(current_user), :method => "get") do %>
  <%= text_field_tag :update, 'yes', type: "hidden"  %>
  <%= submit_tag "Update list", :class => "btn btn-default" %>
<% end %> 
```

我想在按钮中包含一个图标。我正在使用引导程序，所以我必须包含以下代码：

```
<i class=" icon-repeat"></i> 
```

¿ 关于如何在表单按钮中包含此代码的任何想法？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-02-21T10:29:54.803

您可以使用`button_tag`代替`submit_tag`：

```
<%= button_tag(type: "submit", class: "btn btn-default") do %>
    Update list <i class="icon-repeat"></i>
<% end %> 
```

# node.js - 在 Windows 上分析 node.js

> ID：14999297
> 
> 赞同：3
> 
> 时间：2013-02-21T09:59:26.343
> 
> 标签：node.js, profiler

我可以分析在 Windows 上运行的 node.js 进程吗？

一步一步的指南或博客文章的链接会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:35:31.327

如果其他人遇到同样的问题：

*   从github获取源码（选择需要的分支）
*   使用来自铬源[http://src.chromium.org/svn/trunk/deps/third_party的 cygwin 和 python](http://src.chromium.org/svn/trunk/deps/third_party)
*   使用 VS C++ Express 2010（至少对于 v0.8）
*   以 32 位版本为目标（我无法让 x64 工作）
*   构建节点和 v8
*   将 v8 exe 从构建目录移动到 v8

使用“node --prof source.js”运行节点，然后使用“windows-tick-processor.bat”分析 v8.log

如果你得到太多“未计入”的勾号，你就做错了。

# django-forms - 自定义 feincms 管理表单

> ID：14999298
> 
> 赞同：1
> 
> 时间：2013-02-21T09:59:28.447
> 
> 标签：django-forms, django-admin, feincms

我正在使用外键从我的模型创建内容，但我希望对象显示为复选框或多选而不是组合。

有人告诉我使用 feincms_item_editor_form 但我很不确定如何使用它。

我的模型是：

```
class TeamMember(models.Model):
    name = models.CharField(max_length=200)
    position = models.CharField(max_length=64)
    image = models.ImageField(upload_to='profile')
    description = models.TextField()
    def __unicode__(self):
        return "%s " % self.name 
```

我的内容是：

```
class TeamMemberContent(models.Model):
    member = models.ForeignKey(TeamMember)

class Meta:
    abstract = True
def render(self, **kwargs):
    request = kwargs.get('request')
    print request
    return render_to_string('team_member.html', {'members': self.member}) 
```

非常感谢您提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:26:00.780

实际上，我刚刚发现使用`ManyToMany`而不是`ForeignKey`解决了整个问题。

# c# - C# - 为什么执行这些不同的代码会给我相同的结果？

> ID：14999302
> 
> 赞同：1
> 
> 时间：2013-02-21T09:59:40.243
> 
> 标签：c#

我的第一个代码执行后，在我采取行动后，计算机总是试图获取井字游戏板的右下角：

```
private void ComputersTurn()
    {
        Control.ControlCollection coll = this.Controls;
        foreach (Control c in coll)//for each button in form
        {
            if ((c != null) && (c is Button))//if c is a button and c has a value
            {
                if ((c.Name != "btnNewGame") && (c.Name != "btnExit")) // if the button isnt btn new game or exit
                {

                    if (c.Enabled == true) //if a button has an X
                    {
                        c.Text = "O"; //place an O
                        c.Enabled = false; //in a empty button
                        CheckComputerWinner(); //check if it wins
                        return; //return result
                    }//end of if
               }//end of if 2
            }//end of if 1
        }//end of foreach
    }//end of ComputersTurn 
```

我得到帮助的第二个代码......做同样的事情：

```
private void ComputersTurn()
    {
        Control.ControlCollection coll = this.Controls;
        foreach (Control c in coll)//for each button in form
        {
            if ((c != null) && (c is Button))//if c is a button and c has a value
            {
                if ((c.Name != "btnNewGame") && (c.Name != "btnExit")) // if the button isnt btn new game or exit
                {
                    gamefield = new Button[] { btn1, btn2, btn3, btn4, btn5, btn6, btn7, btn8, btn9 };
                    int freeCount = gamefield.Count(b => b.Text != "X");

                    int offset = RandomGenerator.GenRand(0 - 8, freeCount - 1);
                    Button target = gamefield.Where(b => b.Text != "X").Skip(offset).FirstOrDefault(); ;
                    if (target != null)//if target has an X
                    {
                        // check it
                        if (c.Enabled == true)
                        {
                            c.Text = "O"; //O will be inside the button
                            c.Enabled = false; //button can no long be used
                            CheckComputerWinner(); //check if it finishes task
                            return;
                        }
                    }
               }
            }
        }
    }//end of ComputersTurn 
```

随机发生器

```
public static class RandomGenerator
    {
        private static readonly Random _random = new Random();

        public static int GenRand(int x, int y)
        {
            return _random.Next(x, y);
        }
    } 
```

我不明白为什么。第二个旨在使计算机具有随机性，第一个旨在使计算机具有可预测性。为什么他们都在做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:07:37.453

第二种解决方案从不使用该`target`值。它使用当前循环值`c`。将所有检查它的逻辑更改为使用`target`而不是`c`. 您还可以一起消除外部循环和两个外部 if 语句。

# html - 当您按 Enter 时，输入类型图像不提交表单

> ID：14999303
> 
> 赞同：1
> 
> 时间：2013-02-21T09:59:44.867
> 
> 标签：html, forms

我有一个表单，您需要单击以提交表单的输入有 type="image"。我想这样做，当您专注于表单的另一个输入并点击输入表单时（就像您单击输入类型图像一样）。

我需要使用 javascript 来创建这种行为吗？

这是默认行为并被认为具有良好的可访问性、可用性和用户体验吗？我很确定我在很多网站上都看到过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:36:12.280

你用过`<form> </form>`标签试试这个>更新的代码

```
<script type="text/javascript">
    function submitform_myfn()
    {
      alert("form getting submitted");
      document.forms["myform"].submit();
      if(document.getElementById('a').value!="")
        {
            alert("input box value "+document.getElementById('a').value);
        }
        else
        {
            alert("Please enter some value in input box and submit again");
        }
    }

    </script>

<form name="myform">
Put some value for input box and try submitting form by clicking image
<input type="text" id="a" name="a" />

<input type="image"   style=" background:url(http://www.youthcancertrust.org/cms/site/images/RTEmagicC_play_button.png.png) no-repeat; display:block; width:300px; height:306px; "  onclick="submitform_myfn()" />

</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:43:32.823

您的表单需要一个`action`属性，指的是将处理结果的脚本 - 例如：

```
<form id="myform" action="./myform.php">
    <!-- the rest of your form -->
</form> 
```

如果没有`action`属性，表单将无法提交，因为浏览器不知道将其提交到哪里。

# .htaccess - 使用 .htaccess 将 http://example.com/any/path 重写为 http://example.com/any

> ID：14999305
> 
> 赞同：0
> 
> 时间：2013-02-21T09:59:47.217
> 
> 标签：.htaccess

我想在不存在文件的情况下重写 URI - 这应该是我的观点 - 像这样：

`http://example.com/test/path/example`→`http://example.com/test`

我已经用这条规则删除了斜杠：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} (.*)$
RewriteRule ^(.+)/$ $1 [R=301,L] 
```

我必须在`.htaccess`文件中添加什么才能获得所需的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:49:38.617

如果未使用问题中的规则集，您可以尝试以下操作：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule  ^([^/]+)/.+/?  $1?  [R=301,L] 
```

永久重定向

`http://example.com/folder/with/any/path`或任何查询

到：

`http://example.com/folder`

假定所有字符串都是可变的。

对于静默映射，将 [R=301,L] 替换为 [L]

# html - 无法在 Safari (MAC OS) 中播放 .m3u8 文件

> ID：14999308
> 
> 赞同：1
> 
> 时间：2013-02-21T09:59:54.500
> 
> 标签：html, safari, http-live-streaming

我们从服务器获取媒体流。在客户端的 Web 浏览器中播放此媒体流的一种方法是使用 HLS。我们将媒体流分割成多个 .ts 文件并创建了一个播放列表 (.m3u8)。但是当我们尝试在 Safari 浏览器中播放 .m3u8 文件时，我们无法播放视频文件（.ts 文件）。

如果有人可以让我们知道如何在 Safari 中播放 .m3u8 文件，那将非常有帮助。我们尝试使用 Apple 网站上提供的示例 .m3u8 文件，并且可以正常播放。当我们用自己的 .m3u8 文件替换 .m3u8 文件时，我们无法播放媒体文件。

是否需要 HTTP 服务器才能在 Safari 的标签中播放 HLS 流？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:39:58.140

```
Is it required to have HTTP server to play HLS streams in tag in Safari? 
```

是的，HLS（Http Live Streaming）要求视频通过 HTTP 提供。这意味着您不能简单地将 video 标签指向 local `.m3u8`，而是必须将其指向`.m3u8`通过 HTTP 提供的文件。

# php - 如何检查功能是否仅包含在子文件夹的页面中

> ID：14999310
> 
> 赞同：0
> 
> 时间：2013-02-21T10:00:01.927
> 
> 标签：php, directory

我需要一些帮助。

我的网站结构如下：

```
root folder(mysite):
- subfolder: includes (has inside the initialize.php - I include it on the top of ALL my pages )
- subfolder: admin (has inside the localhost/mysite/admin/index.php, localhost/mysite/admin/edit.php, localhost/mysite/admin/delete.php)

index.php(localhost/mysite/admin/index.php )
albums.php 
```

我还有一个函数 loggedin()，仅当用户登录时才允许访问管理文件夹中的页面。所以管理页面中的代码是这样的：

```
<?php require_once('../includes/initialize.php'); ?>
<?php loggedin(); //I put this only in pages inside admin folder ?>
<?php include('header.php'); ?>
/// Instead inside root pages is like this:
<?php require_once('includes/initialize.php'); ?>
<?php include('header.php'); ?> 
```

不过，我想做的是将我的函数放在 initialize.php 中，并执行检查以确保 login() 仅包含在 admin 文件夹内的所有页面中，因此 localhost/mysite/ index.php 不会拥有它，而是 localhost/mysite/admin/index.php 会拥有它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:09:22.527

你可以把这样的东西放在 initilize.php 文件中

```
$dir = basename(dirname(__FILE__));
if($dir == 'admin') {
    loggedIn();
} 
```

这将是一种非常简单的方法，并且仅在 admin/ 目录不包含任何其他目录时才有效。

**编辑**

```
$dir = basename(dirname($_SERVER['SCRIPT_NAME']); 
```

应该给你你所在的当前目录。所以如果你在*admin/index.php*页面上`$dir`，现在将等于`admin`. 执行小`if`语句来检查目录是否等于 admin，如果是，则进行登录检查。

好吧，现在 admin/ 目录中的任何内容都将调用 loggedIn() 函数，因此您必须将 login.php 文件放在 admin/ 目录之外，否则执行类似的操作

```
$fileName = basename($_SERVER['SCRIPT_NAME']);
if($dir == 'admin' && $fileName != 'login.php') {
    loggedIn();
} 
```

它会完成工作，但我建议您查看访问控制列表。

# grid - 异步回发后，Obout Grid 在 UpdatePanel 内不起作用

> ID：14999326
> 
> 赞同：0
> 
> 时间：2013-02-21T10:01:02.430
> 
> 标签：grid, updatepanel, obout, asynchronous-postback

我有一个用于控制 Obout 网格数据源的下拉列表。

```
<obout:OboutDropDownList runat="server" ID="ddlAAACode"
   DataTextField="Description" DataValueField="AAACode" 
   FolderStyle="~/AppThemes/intstyles/premiere_blue/OboutDropDownList" 
   Width="250" Enabled="true" 
   AutoPostBack="true" 
   OnSelectedIndexChanged="ddlAAACode_SelectedIndexChanged" /> 
```

“ddlAAACode_SelectedIndexChanged”代码

```
protected void ddlAAACode_SelectedIndexChanged(object sender, EventArgs e)
{
    string AAACode = ddlAAACode.SelectedValue;

    .....getting business object & entity.....

    try
    {
        DataTable dt = obj.GetObject(AAACode);

        if (dt != null)
        {
            if (dt.Rows.Count > 0)
            {
                grid1.DataSource = dt;
                grid1.DataBind();
            }

            dt = null;
        }
    }
    catch (ApplicationException ex)
    {
        throw new ApplicationException(ex.Message);
    }
    finally
    {
    }
} 
```

从下拉列表中选择一项后，“Obout 网格”将根据需要正确检索数据，但随后完全冻结且无法正常工作（即使单击 Obout 网格上方的任何位置也不会发生任何事情）。下面是 UpdatePanel 中“关于网格”的示例代码。

```
<asp:UpdatePanel ID="UpdatePanel" runat="server" UpdateMode="Conditional"> 
    <ContentTemplate>
        <obout:Grid id="grid1" runat="server" CallbackMode="true" AllowPageSizeSelection="false" Serialize="false" 
            AutoGenerateColumns="false" FolderStyle="~/App_Themes/grdstyles/style_12" AllowFiltering="true" 
            AllowAddingRecords="false">
            <Columns>
                <obout:Column ID="Column1" DataField="AAACode" Width="100" HeaderText="AAA Code" runat="server">
                    <FilterOptions>
                        <obout:FilterOption Type="NoFilter" />
                        <obout:FilterOption Type="Contains" />
                        <obout:FilterOption Type="DoesNotContain" />
                        <obout:FilterOption Type="StartsWith" />
                        <obout:FilterOption Type="EndsWith" />
                    </FilterOptions>
                </obout:Column>
    <ContentTemplate>
........
........
........
<Triggers>
            <asp:AsyncPostBackTrigger ControlID="ddlGroupCode"/>
    </Triggers>
</asp:UpdatePanel> 
```

任何评论都非常感谢..帮助我.. :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:19:44.560

我认为您必须在标准 UpdatePanel 控件的位置使用免费的 Obout AJAX Page 控件

# jquery - 包含带有 jQ uery 无冲突的 Underscore.js

> ID：14999336
> 
> 赞同：1
> 
> 时间：2013-02-21T10:01:27.980
> 
> 标签：jquery, underscore.js

我需要在主要使用 Prototype.js 并且 jQuery 处于无冲突模式的平台中包含 underscore.js。

我们该怎么做呢？例如，Backbone 表明我们可以使用 Backbone.$ = $j 指向 jQuery。

但是 underscorejs.org 似乎没有任何关于它的信息。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T22:04:34.507

如果页面上有 Backbone 和 jQuery（无论是否处于无冲突模式），则不需要为此做任何特别的事情。

这是分配 Backbone.$ 的 Backbone 代码的一部分（从 Backbone 0.9.10 开始）：

```
Backbone.$ = root.jQuery || root.Zepto || root.ender; 
```

这意味着 Backbone.$ 将设置为使用“jQuery”变量（如果存在）（无论您是否处于 noConflict 模式，它都应该使用），如果它不存在，它将尝试使用 Zepto 或代替 ender 库。

来源： [https ://github.com/documentcloud/backbone/blob/21a875b2c50b8a69760b4e6a80495a153e5065b3/backbone.js#L44](https://github.com/documentcloud/backbone/blob/21a875b2c50b8a69760b4e6a80495a153e5065b3/backbone.js#L44)

如果您特别询问 Underscore 和 jQuery，请注意 Underscore 根本不依赖 jQuery - 只有 Backbone 依赖于它（或提到的其他库之一）。

# ruby-on-rails - Redmine 两次发送邮件

> ID：14999340
> 
> 赞同：5
> 
> 时间：2013-02-21T10:01:54.120
> 
> 标签：ruby-on-rails, ruby, actionmailer, redmine, qmail

在 redmine 中创建/编辑问题时，通知邮件会发送两次。为什么？

我查看了 redmine 配置文件“config/configuration.yml”并试图删除“production:”中的“email_delivery:”部分，因为“default:”中已经定义了一个

即使使用“管理 > 设置 > 电子邮件通知”的“发送测试邮件”功能，测试电子邮件也会发送两次。

但这只发生在使用下面的 ":sendmail" 配置时。当使用 ":smtp" 并设置 SMTP 服务器时，邮件只会被正确发送一次。当使用命令行“mail”命令时，邮件也只发送一次。

这就是我的 configuration.yml 的样子：

```
production:
  email_delivery:
    delivery_method: :sendmail
# ... comments ...
default:
  # Outgoing emails configuration (see examples above)
  email_delivery:
    delivery_method: :sendmail
# ... other stuff 
```

使用的邮件程序是 qmail。这是用于发送测试邮件的 mail.info 的输出：

```
Feb 21 10:52:56 admin qmail-queue-handlers[12443]: Handlers Filter before-queue for qmail started ...
Feb 21 10:52:56 admin qmail-queue-handlers[12443]: from=support@web-consulting.at
Feb 21 10:52:56 admin qmail-queue-handlers[12443]: to=kraft@web-consulting.at
Feb 21 10:52:56 admin qmail-queue-handlers[12443]: to=kraft@web-consulting.at
Feb 21 10:52:56 admin qmail: 1361440376.142458 new msg 5758988
Feb 21 10:52:56 admin qmail: 1361440376.142504 info msg 5758988: bytes 2348 from <support@web-consulting.at> qp 12446 uid 10028
Feb 21 10:52:56 admin qmail: 1361440376.143705 starting delivery 34398: msg 5758988 to local 78-kraft@web-consulting.at
Feb 21 10:52:56 admin qmail: 1361440376.143730 status: local 1/10 remote 0/20
Feb 21 10:52:56 admin qmail: 1361440376.143735 starting delivery 34399: msg 5758988 to local 78-kraft@web-consulting.at
Feb 21 10:52:56 admin qmail: 1361440376.143738 status: local 2/10 remote 0/20
Feb 21 10:52:56 admin qmail-local-handlers[12447]: Handlers Filter before-local for qmail started ...
Feb 21 10:52:56 admin qmail-local-handlers[12448]: Handlers Filter before-local for qmail started ...
Feb 21 10:52:56 admin qmail-local-handlers[12448]: from=support@web-consulting.at
Feb 21 10:52:56 admin qmail-local-handlers[12448]: to=kraft@web-consulting.at
Feb 21 10:52:56 admin qmail-local-handlers[12448]: mailbox: /var/qmail/mailnames/web-consulting.at/kraft
Feb 21 10:52:56 admin qmail-local-handlers[12447]: from=support@web-consulting.at
Feb 21 10:52:56 admin qmail-local-handlers[12447]: to=kraft@web-consulting.at
Feb 21 10:52:56 admin qmail-local-handlers[12447]: mailbox: /var/qmail/mailnames/web-consulting.at/kraft
Feb 21 10:52:56 admin qmail: 1361440376.159507 delivery 34399: success: did_0+0+2/
Feb 21 10:52:56 admin qmail: 1361440376.159542 status: local 1/10 remote 0/20
Feb 21 10:52:56 admin qmail: 1361440376.160164 delivery 34398: success: did_0+0+2/
Feb 21 10:52:56 admin qmail: 1361440376.160248 status: local 0/10 remote 0/20
Feb 21 10:52:56 admin qmail: 1361440376.160283 end msg 5758988 
```

似乎 ruby​​ ActionMailer 已经导致“to=kraft@web-consulting.at”两次。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:33:00.557

也许您有旧版本的 sendmail？

```
 config.action_mailer.delivery_method = :sendmail
  config.action_mailer.sendmail_settings = {
   :location => '/usr/sbin/sendmail',
   :arguments => "-i"
  } 
```

对我来说，我不得不使用 sendmail 和 -i 来解决双重发送问题

（参考） [http://stefanwienert.net/blog/2011/11/17/rails-schickt-mails-zweimal-wenn-man-sendmail-verwendet-slash-rails-sent-mails-twice-when-using-sendmail /](http://stefanwienert.net/blog/2011/11/17/rails-schickt-mails-zweimal-wenn-man-sendmail-verwendet-slash-rails-sent-mails-twice-when-using-sendmail/)

# python - 使用dict时的python语法

> ID：14999341
> 
> 赞同：1
> 
> 时间：2013-02-21T10:01:54.827
> 
> 标签：python, syntax, coding-style

什么是正确的方法：

```
def my_func():
  return {'key1': val1, 'key2': val2} 
```

或者

```
def my_func():
  return
  {
    'key1': val1, 
    'key2': val2
  } 
```

第二种方式似乎更具可读性（特别是当有很多键值或嵌套对象时）但我不确定返回后的空白是否适用于每种情况

编辑：

在一些答案之后，我建议这样做：

```
def my_func():
  return {'key1': val1, 
          'key2': val2} 
```

这似乎是最一致的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T10:03:19.223

对于短字典，第一个可以，第二个不能按预期工作（返回`None`）。对于更长的，我更喜欢类似的东西

```
def my_func():
    return {'key1': val1,
            'key2': val2,
            'key3': val3,
            'key4': val4,
           } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:03:15.917

我会推荐与@eumiro 相同的方法，但 IMO 从换行符开始大字典/列表/元组的内容会使代码更具可读性：

```
def my_func():
    return {
        'key1': val1,
        'key2': val2,
        'key3': val3,
        'key4': val4,
    } 
```

# wcf - 自定义 wcf 服务主机工厂

> ID：14999342
> 
> 赞同：1
> 
> 时间：2013-02-21T10:01:53.983
> 
> 标签：wcf, configuration, hosting

我目前正在创建一个自定义服务主机工厂，我可以在其中以编程方式添加端点。只是想知道在我创建服务主机并以编程方式添加服务端点时，是否可以在配置文件中配置服务行为。

配置文件中的行为以及程序端添加的端点是否会被正确提取？这是因为我有两个选择来创建 ServiceHost 实例。

以下哪一项可以正确设置我在配置文件中配置的行为。请注意，我扩展了[ServiceHostFactory](http://msdn.microsoft.com/en-us/library/system.servicemodel.activation.servicehostfactory.aspx)类并覆盖了[CreateServiceHost(String, Uri[])](http://msdn.microsoft.com/en-us/library/aa344725.aspx)方法。

```
var host = new ServiceHost(typeof(MyConcreteService), baseAddresses);
var host = base.CreateServiceHost(typeof(MyConcreteService), baseAddresses); 
```

请帮助和感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:27:22.597

两者都应该可以正常工作，因为您通过指定其接口类型来定义服务类型的配置，而不管主机是如何创建的。

# css - CSS、相对路径和 URL 端口号

> ID：14999345
> 
> 赞同：0
> 
> 时间：2013-02-21T10:01:59.863
> 
> 标签：css, url-routing

我得到了这个样式表，它位于我的网页标签内。（不是 css 文件，因为这是唯一会使用的文件）。

```
background-image: url("/assets/img/report/test4.png"); 
```

使用相对 url 时，我的背景图像 url 不包括主机的端口号。

例子：

作品：

```
localhost:8334/assets/img/report/test4.png 
```

不起作用，并且是相对url的输出：

```
localhost/assets/img/report/test4.png 
```

知道为什么它不包括端口号吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:34:03.933

如果您的“资产”文件夹位于根目录中，为什么要添加额外的“/”？我从来没有像这样使用它，也许尝试编辑它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:05:23.573

尝试使用`relative`路径而不是路径`absolute`。例子：

`background-image:url('../../assets/img/report/test4.png');`

# android - NullPointerException 我无法加载 ListView。两天不见了，请帮帮我

> ID：14999346
> 
> 赞同：0
> 
> 时间：2013-02-21T10:02:01.293
> 
> 标签：android, listview, nullpointerexception

**日志猫**

```
 02-20 21:43:55.316: E/salida cursor(1564): recorrido finalizado
    02-20 21:43:55.316: D/AndroidRuntime(1564): Shutting down VM
    02-20 21:43:55.316: W/dalvikvm(1564): threadid=1: thread exiting with uncaught exception              (group=0x40028a00)
    02-20 21:43:55.336: E/AndroidRuntime(1564): FATAL EXCEPTION: main
    02-20 21:43:55.336: E/AndroidRuntime(1564): java.lang.RuntimeException: Unable to start                    activity ComponentInfo{es.garman.waypoints/es.garman.waypoints.ListaLugaresActivity}:    java.lang.NullPointerException
   02-20 21:43:55.336: E/AndroidRuntime(1564):  at   android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2781)
   02-20 21:43:55.336: E/AndroidRuntime(1564):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2797)
   02-20 21:43:55.336: E/AndroidRuntime(1564):  at android.app.ActivityThread.access$2300(ActivityThread.java:135)
   02-20 21:43:55.336: E/AndroidRuntime(1564):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2132)
   02-20 21:43:55.336: E/AndroidRuntime(1564):  at android.os.Handler.dispatchMessage(Handler.java:99)
   02-20 21:43:55.336: E/AndroidRuntime(1564):  at android.os.Looper.loop(Looper.java:143)
   02-20 21:43:55.336: E/AndroidRuntime(1564):  at android.app.ActivityThread.main(ActivityThread.java:4914)
   02-20 21:43:55.336: E/AndroidRuntime(1564):  at java.lang.reflect.Method.invokeNative(Native Method)
   02-20 21:43:55.336: E/AndroidRuntime(1564):  at java.lang.reflect.Method.invoke(Method.java:521)
   02-20 21:43:55.336: E/AndroidRuntime(1564):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
   02-20 21:43:55.336: E/AndroidRuntime(1564):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
   02-20 21:43:55.336: E/AndroidRuntime(1564):  at dalvik.system.NativeStart.main(Native Method)
   02-20 21:43:55.336: E/AndroidRuntime(1564): Caused by: java.lang.NullPointerException
   02-20 21:43:55.336: E/AndroidRuntime(1564):  at es.garman.waypoints.ListaLugaresActivity.cargarLista(ListaLugaresActivity.java:59)
   02-20 21:43:55.336: E/AndroidRuntime(1564):  at es.garman.waypoints.ListaLugaresActivity.onCreate(ListaLugaresActivity.java:34)
   02-20 21:43:55.336: E/AndroidRuntime(1564):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1065)
   02-20 21:43:55.336: E/AndroidRuntime(1564):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2745)
   02-20 21:43:55.336: E/AndroidRuntime(1564):  ... 11 more
   02-20 21:44:30.756: I/Process(1564): Sending signal. PID: 1564 SIG: 9 
```

**ListaLugaresActivity.java**

> ```
>  import android.app.Activity;
> import android.app.ListActivity;
> import android.database.Cursor;
> import android.database.sqlite.SQLiteDatabase;
> import android.os.Bundle;
> import android.util.Log;
> import android.view.LayoutInflater;
> import android.view.View;
> import android.view.ViewGroup;
> import android.widget.ListView;
> import android.widget.ArrayAdapter;
> import android.widget.TextView;
> public class ListaLugaresActivity extends ListActivity {    
> private BaseDatos db;
> private SQLiteDatabase dbLista;
> Cursor cursor;
> private ListView lista;
> private WaypointRegistro[] datosLista;  
> @Override
> public void onCreate(Bundle savedInstanceState) {
>     super.onCreate(savedInstanceState);
>     setContentView(R.layout.lista_pantalla);      
>     //Abrimos la base de datos 'DBUsuarios' en modo escritura
>     db = new BaseDatos(this, "waypointsDB", null, 1);
>     db.getWritableDatabase();
>     db.close();     
>     cargarLista();
> }
> private void cargarLista() {       
>    dbLista = db.getReadableDatabase();       
>    if (dbLista != null) {         
>       cursor = dbLista.rawQuery("SELECT _id, nombre, lat, lon, descripcion, foto FROM  waypointsDB", null);
> 
>       //Nos aseguramos de que existe al menos un registro
>       if (cursor.moveToFirst()) {
>          //Recorremos el cursor hasta que no haya más registros
>          datosLista = new WaypointRegistro[cursor.getCount()];
>          int i = 0;
>          do {
>              Log.e("inicio", "do");
>             datosLista[i] = new WaypointRegistro();
>             datosLista[i].setId(cursor.getInt(0));
>             datosLista[i].setNombre(cursor.getString(1));
>             datosLista[i].setDescripcion(cursor.getString(4));
>             i++;
>          } while (cursor.moveToNext());
>          Log.e("salida cursor", "recorrido finalizado");
>          AdaptadorUsuarios adaptador = new AdaptadorUsuarios(this);
>          lista.setAdapter(adaptador);             
>       }
>    }
> }
> @SuppressWarnings("unchecked")
> class AdaptadorUsuarios extends ArrayAdapter { 
>     Activity context;
> 
>     AdaptadorUsuarios(Activity context) {
>         super(context, R.layout.lista_fila, datosLista);
>         this.context = context;
>     }
> 
>     public View getView(int position, View convertView, ViewGroup parent) {   
> 
>        View item = convertView;
>        ViewHolder holder;
>        if (item == null) {
> 
>           LayoutInflater inflater = context.getLayoutInflater();
>           item = inflater.inflate(R.layout.lista_fila, null);
>           holder = new ViewHolder();
>           holder.id = (TextView)item.findViewById(R.id.idLista);
>           holder.nombre = (TextView)item.findViewById(R.id.nombreLista);
>           holder.descripcion = (TextView)item.findViewById(R.id.descripcionLista);
>           item.setTag(holder);
>         }else{
>             holder = (ViewHolder)item.getTag();
>         }
>             holder.id.setText(datosLista[position].getId() + "");
>             holder.nombre.setText(datosLista[position].getNombre());
>             holder.descripcion.setText(datosLista[position].getDescripcion());
>         return(item);
>     }
> }
> static class ViewHolder {
>    TextView id;
>    TextView nombre;
>    TextView descripcion;
> }
> } 
> ```

**WaypointRegistro.java**

```
public class WaypointRegistro {
private int id;
private String nombre;
private String descripcion;

public WaypointRegistro(){}
public WaypointRegistro(int id, String nombre, String descripcion){
    setId(id);
    setNombre(nombre);
    setDescripcion(descripcion);
}
public int getId() {
   return id;
}
public void setId(int id) {
   this.id = id;
}
public String getNombre() {
   return nombre;
}
public void setNombre(String nombre) {
   this.nombre = nombre;
}
public String getDescripcion() {
   return descripcion;
}
public void setDescripcion(String email) {
   this.descripcion = email;
}   

} 
```

**lista_fila.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

<LinearLayout 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingRight="4dp">
    <TextView 
        android:id="@+id/idLista"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="16sp"
        android:padding="3dp"
        />

    </LinearLayout>
        <LinearLayout 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:paddingBottom="5dp">
            <TextView 
                android:id="@+id/nombreLista"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textSize="20sp"
                />
            <TextView 
                android:id="@+id/descripcionLista"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textSize="14sp"
                />
    </LinearLayout>

</LinearLayout> 
```

**lista_pantalla.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" 
>
<TextView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:layout_margin="10dp"
    android:layout_marginBottom="10dp"
    android:text="@string/txt_tituloLista"
    android:textColor="#FF4201"
    android:textSize="25sp"
    android:textStyle="bold"
    />
<ListView 
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_weight="1"
    android:layout_height="fill_parent"
    android:padding="5dp">
</ListView>

    <TextView 
        android:id="@+id/android:empty"
        android:text="@string/txt_empty"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:10:35.007

`lista`一片空白。

将此添加到您的`onCreate()`：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.lista_pantalla);
    lista = getListView();  // <- Add this line
    // ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:10:43.243

你得到 NullPointerException 因为`lista`是 null 只是`lista` 在设置 setAdapter 之前初始化：

```
lista=ListaLugaresActivity.this.getListView();
lista.setAdapter(adaptador); 
```

# documentation - 设计规范在项目文档中的含义是什么？

> ID：14999348
> 
> 赞同：5
> 
> 时间：2013-02-21T10:02:12.323
> 
> 标签：documentation

谁能帮我理解项目文档中设计规范的含义是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T10:08:19.853

在软件的上下文中，设计规范通常是描述软件的所有数据、架构、接口和组件级设计的设计文档。

设计规范提供了有关产品需求以及如何组合产品的明确信息。在必须专门制造产品以满足独特需求的情况下，需要使用它。例如，设计规范必须包括我上面列出的所有必要信息，即软件的数据、架构、接口和组件级设计，不包括文档。

一个例子可以在[这里找到](http://www.bradapp.com/docs/sdd.html)

# r - 如何存储 sqlQuery 数据框？

> ID：14999349
> 
> 赞同：0
> 
> 时间：2013-02-21T10:02:12.487
> 
> 标签：r, dataframe, rodbc

我迭代了一个日期数组，用于创建 sql 查询。

> 日期 <- c("2010-06-29", "2010-07-09", "2010-07-22")

```
fn1 <- function (N) 
{
    queryStart <- "SELECT something FROM somethingelse WHERE table.date ='"
    queryEnd <- "'AND table.something = 'foo'"
    for(i in 1:length(N)) {
        query1 <- paste(queryStart,N[i],queryEnd)
        result <- sqlQuery(con, query1)  //print(sqlQuery(con,query1) works as intended
    }
    return (result)
} 
```

> fn1（日期）

如何将所有内容放在一个数据框中？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:15:08.933

试试这个，虽然我没有测试过......

```
fn1 <- function (N) 
{
    queryStart <- "SELECT something FROM somethingelse WHERE table.date ='"
    queryEnd <- "'AND table.something = 'foo'"
    allQueries<-data.frame(matrix(nrow=0,ncol=0));
    for(i in 1:length(N)) {
        query1 <- paste(queryStart,N[i],queryEnd)
        result <- sqlQuery(con, query1)  //print(sqlQuery(con,query1) works as intended
        if (nrow(allQueries) == 0){
            allQueries<-result;
        } 
        else{
            allQueries<-rbind(allQueries,result);
        }
    }
    return (allQueries);
} 
```

# visual-studio - 如何在 Visual Studio 2012 中将文本添加到决策节点 UML

> ID：14999350
> 
> 赞同：6
> 
> 时间：2013-02-21T10:02:16.883
> 
> 标签：visual-studio, uml, activity-diagram

我尝试在 Visual Studio 中使用活动图。当我向图表添加决策节点时，无法添加文本以显示真假条件。我在连接器属性中进行了搜索，但没有帮助。
看看这个，我想在决策节点中添加`true`和文本：`false`
![在此处输入图像描述](../Images/b76fdeddd173a4c82e8439ed43b32ac4.png)

另一种方法是使用评论节点，但问题是评论没有与连接器链接。
我怎样才能做到这一点？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-21T10:07:04.557

单击连接器和`Right click->Properties`。在“属性”中，您可以`Guard`在每个连接器上命名。

# node.js - socket.io 私人和群聊

> ID：14999352
> 
> 赞同：0
> 
> 时间：2013-02-21T10:02:28.763
> 
> 标签：node.js, socket.io

我正在尝试使用 socket.io 制作一个 google/facebook 聊天克隆。

当用户连接到服务器时，我将用户放在以用户 ID 命名的房间中（因此，如果用户打开了多个选项卡，所有选项卡都会进入同一个房间并在所有选项卡中接收消息）。当 A 向 B 发送消息时，我将其广播到以 B 命名的房间。在 UI 中，每个聊天窗口都有发件人的 ID，因此当用户收到消息时，我会找到带有发件人 ID 的窗口并用新的更新窗口信息。简单的。

现在，A 和 B 邀请 C 和 D 加入群聊。所以聊天变成了群聊。我被困在这里。我该如何处理这种情况？如何在客户端 UI 和服务器中跟踪聊天？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:14:05.063

您始终可以将组命名为聊天中用户的串联（带有一些分隔符），按任意值（例如 id）排序。因此，如果您有 ID 为 USERA 的用户 A 和 ID 为 USERB 的用户 B，则包含他们的房间将是 USERA-USERB。（请注意，此模式仅在用户 ID 中没有破折号时才有效）。当用户 C 加入聊天时，打开一个 ID 为 USERA-USERB-USERC 的房间，将所有用户添加到该房间，并将之前对话中的消息重新广播给用户。

请注意，这将为 UserA 和 UserB 打开一个新的对话，您可能不想这样做。在这种情况下，您必须找到一种打乱房间的方法以更改房间 ID（您必须对此进行一些思考），然后将最后 x 条消息重新广播给新用户。

另请注意，您必须将关联的房间 ID 与发送给客户端的所有事件一起发送，以便客户端知道该事件与哪个聊天相关。

# python - 有没有办法使用 Drive SDK 进行批量调用？

> ID：14999355
> 
> 赞同：0
> 
> 时间：2013-02-21T10:02:33.353
> 
> 标签：python, google-drive-api

一些较旧的 Google API（如联系人）允许您进行批量调用。这可以通过 Python Drive API 实现吗？

具体来说，我想知道是否可以在一次 API 调用中获取多个文件的评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:16:04.723

挖掘文档后的一个简单示例，假设您将凭据存储在变量 creds 中：

```
def list_animals(request_id, response, exception):
    if exception is not None:
        # Do something with the exception.
        pass
    else:
        # Do something with the response.
        pass

def list_farmers(request_id, response, exception):
    if exception is not None:
        # Do something with the exception.
        pass
    else:
        # Do something with the response.
        pass

service_ = authHandler.CreateService('drive', 'v2', creds)

batch = BatchHttpRequest()

batch.add(service_.changes().list(), list_animals)
batch.add(service_.changes().list(), list_farmers)
batch.execute(http=authHandler.getHttp(creds)) 
```

# algorithm - 如何查找并返回二叉树的最底部（最深节点）节点？二叉搜索树？

> ID：14999356
> 
> 赞同：0
> 
> 时间：2013-02-21T10:02:32.903
> 
> 标签：algorithm, tree, binary-tree, binary-search-tree

我有一个`binary tree`唯一的条件，即最深层次有一个节点。树中的节点具有父属性（以及左、右、数据）

是否可以确定最深层次的节点比`O(N`) 更好？如果树是 a`binary search tree (right->data > parent->data, left->data < parent->data)`而不是二叉树怎么办？

我可以使用广度优先方法到达那里，该方法可以在 O(N) 中完成二叉树和二叉搜索树的工作，但想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:06:28.767

没有办法比`O(n)`.

当所有节点都只有左子节点时，考虑一棵树 - 您需要扫描所有节点才能到达最深的节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T15:55:47.153

即使使用平衡树，您也必须检查每个子树以找到最深的节点，例如：

```
struct RESULT{
    Node *node;
    int level;
};
RESULT getDeepest( Node *root ){
    if( root == NULL ){
        RESULT result = {NULL, 0};
        return result;
    }
    RESULT lResult = getDeepest( root->left );
    RESULT rResult = getDeepest( root->right );
    RESULT result = lResult.level < rResult.level ? rResult : lResult;
    ++ result.level;
    if( result.node == NULL )
        result.node = root;
    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-16T10:01:54.297

```
public Node deepestNode(Node root, int level){
        int deepestLevel=0;
        Node deepestNode=null;
        if(root==null){
            return null;
        }
        deepestNode(root.left,level++);
        if(level>deepestLevel){
            deepestLevel=level;``
            deepestNode =root;
        }
        deepestNode(root.right,level++);//not sure of increment
        return deepestNode;
    } 
```

# macos - otool 错误：不是目标文件

> ID：14999359
> 
> 赞同：3
> 
> 时间：2013-02-21T10:02:43.103
> 
> 标签：macos, assembly, otool

我在 Mac OS 上有两个文件。一个 Mach-O 可执行 i386 和一个数据（我的 Finder 中的相同 exec 图标）。

当我第一次执行 otool -tV 命令时，我打印了我的汇编代码。但是当我为我的第二个文件编写它时，我收到了这条消息：myFile: is not an object file。

知道如何转换或直接读取数据文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:11:29.320

错误`otool`是因为数据文件不是[Mach-O 目标文件](http://en.wikipedia.org/wiki/Mach-O)，它具有用于存储代码、数据、符号等的预定义格式。

仅将数据文件转换为对象文件是不可能的（或几乎不可能）。

# c# - 实体框架通过主键获取实体

> ID：14999362
> 
> 赞同：0
> 
> 时间：2013-02-21T10:02:51.157
> 
> 标签：c#, .net, entity-framework, primary-key, objectcontext

前段时间，我想实现一个能够确定是否对给定实体进行插入或更新的方法，因此我不必公开“插入”和“更新”方法，而只是一个简单的“插入或更新” ”。

确定实体是否是新实体的代码部分是：

```
 public virtual T GetEntityByPrimaryKey<T>(T entity) where T : class
    {
        var entityType = entity.GetType();
        var objectSet = ((IObjectContextAdapter)this.DatabaseContext).ObjectContext.CreateObjectSet<T>();
        var keyNames = objectSet.EntitySet.ElementType.KeyMembers.Select(edmMember => edmMember.Name);
        var keyValues = keyNames.Select(name => entityType.GetProperty(name).GetValue(entity, null)).ToArray();

        return this.DatabaseContext.Set<T>().Find(keyValues);
    } 
```

InsertOrUpdate 方法是这样的：

```
 public virtual T InsertOrUpdate<T>(T entity) where T : class
    {
        var databaseEntity = this.GetEntityByPrimaryKey(entity);

        if (databaseEntity == null)
        {
            var entry = this.DatabaseContext.Entry(entity);

            entry.State = EntityState.Added;

            databaseEntity = entry.Entity;
        }
        else
        {
            this.DatabaseContext.Entry(databaseEntity).CurrentValues.SetValues(entity);
        }

        return databaseEntity;
    } 
```

现在，只要对象的“主键”由代码确定，这种方法就可以创造奇迹。有效的示例是 GUID、HI-LO 算法、自然键等。

然而，这对于“数据库生成的身份”场景来说是非常糟糕的，原因很简单：因为我在代码中的“Id”对于我要插入的所有对象都是 0，所以该方法将考虑它们相同。如果我添加 10 个对象，第一个将导致“新”，但接下来的九个将导致“已经存在”。这是因为 EF 的“查找”方法从 objectcontext 中读取数据，并且只有当它不存在时才会下到数据库进行查询。

在第一个对象之后，将跟踪 ID 为 0 的给定类型的实体。连续调用将导致“更新”，这是错误的。

现在，我知道数据库生成的 id 是邪恶的，绝对不适合任何 ORM，但我坚持使用这些方法，我需要修复此方法或完全删除它并退回到单独的“插入”和“更新”方法并将任务委托给调用者以确定要做什么。由于我们有一个高度解耦的解决方案，我宁愿避免这样做。

如果有人可以提供帮助并找到修复 GetEntityByPrimaryKey 方法的方法，那就太棒了。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:07:52.183

我有以下建议：

**1：**我会向实体
添加类似属性的东西。`IsTransient`如果 PK 为 0，则返回`true`，否则返回`false`。
您可以使用此属性更改您的方法，如下所示：

1.  `IsTransient`== 真的吗？-> 插入
2.  `IsTransient`== 假的？-> 带有数据库检查的现有代码

使该属性虚拟化，您甚至可以通过覆盖来支持具有“奇怪”PK 的实体`IsTransient`。

**2：**
如果您不喜欢将其添加到您的实体中，您仍然可以创建一个封装此逻辑的扩展方法。或者甚至将该支票直接添加到您的`InsertOrUpdate`.

由于您的实体没有通用基类，因此这些建议会变得有点乏味。您基本上必须为每个实体提供一种扩展方法。

**3：**
如果您有 PK 约定，您可以使用它`dynamic`来访问 ID 属性：

```
dynamic dynamicEntity = entity;
if(dynamicEntity.Id == 0)
{
    // Insert
}
else
{
    // Current code.
} 
```

**4：**
看到将瞬态实体添加到上下文会破坏所有后续瞬态项的内容，将瞬态项添加到列表而不是上下文中可能是个好主意。
仅在将要提交时将它们添加到上下文中。我确信有一个钩子，你可以使用它：

```
List<object> _newEntities;

private override OnCommit()
{
    foreach(var newEntity in newEntities)
        DatabaseContext.Entry(newEntity).State = EntityState.Added;
}

public virtual T InsertOrUpdate<T>(T entity) where T : class
{
    var databaseEntity = this.GetEntityByPrimaryKey(entity);

    if (databaseEntity == null)
        _newEntities.Add(entity);
    else
        this.DatabaseContext.Entry(databaseEntity).CurrentValues.SetValues(entity);

    return databaseEntity;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:32:43.053

> 因为对于我要插入的所有对象，我在代码中的“Id”将为 0

当您不提供密钥时，您似乎期望密钥具有唯一性。是否可以将**它们初始化为唯一的负数**？（对于实际数据库条目来说不是有效值）

我有一个类似的问题（即自我跟踪对象能够判断两个尚未插入的子对象是否在键上相同......），这解决了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:32:47.900

鉴于您的 POCO 没有 DB 垃圾，您必须使用 Fluent API 来声明 DB Generated Key 信息。所以也许 CONTEXT 上的 DbSet 包含这个 DB Generated 标志。

我使用扩展来获取上下文中使用的所有 POCO。也许通过足够的反思，您可以找到一个可用作 DB 生成标志的属性或属性。其余的已经很清楚了。

也许这是一个有用的起点：

```
 public static List<string> GetModelNames(this DbContext context ) {
      var model = new List<string>();
      var propList = context.GetType().GetProperties();
      foreach (var propertyInfo in propList)
      {
      if (propertyInfo.PropertyType.GetTypeInfo().Name.StartsWith("DbSet"))
      {
          model.Add(propertyInfo.Name);
          var innerProps = propertyInfo.GetType().GetProperties(); // added to snoop around in debug mode , can your find anything useful?
      }
      }

      return model;
  }
 public static List<string> GetModelTypes(this DbContext context)
 {
     var model = new List<string>();
     var propList = context.GetType().GetProperties();
     foreach (var propertyInfo in propList)
     {
         if (propertyInfo.PropertyType.GetTypeInfo().Name.StartsWith("DbSet"   ))
         {
             model.Add(propertyInfo.PropertyType.GenericTypeArguments[0].Name);
         }
     }

     return model;
 }
} 
```

# php - 发生数据库错误 1452

> ID：14999370
> 
> 赞同：0
> 
> 时间：2013-02-21T10:03:04.323
> 
> 标签：php, mysql, codeigniter, phpmyadmin

我正在开发一个需要我在 phpMyAdmin 中使用外键的项目。我在两个表上设置了外键。`tblquestions`已链接到`answers`表，但是当我尝试将数据插入其中时`tblquestions`出现此错误

> 发生数据库错误
> 
> 错误号：1452
> 
> 无法添加或更新子行：外键约束失败 ( `user_test`. `tblquestions`, CONSTRAINT `tblquestions_ibfk_5`FOREIGN KEY ( `QID`) REFERENCES `answers`( `ID`) ON DELETE CASCADE ON UPDATE CASCADE)
> 
> 插入`tblquestions`( `Question`, `qA`, `qB`, `qC`) 值 ('unikalus klausimas', 'unikalus atsakymas', 'unikalus atsakymas', 'unikalus atsakymas')

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:15:27.290

外键基本上无非是“表中的条目必须在被引用表中具有相应值”的规则。

在您的情况下，逻辑是，不存在的问题无法得到答案。因此，您以错误的方式放置了外键。

然后，当您插入数据时，您必须首先插入问题的行。当您插入答案的行时，您必须查找答案所属问题的 ID。

顺便说一句，请忽略 Yogesh Suthar 的评论。外键是数据库中确保数据完整性的一个非常重要的特性，显然他不知道他在说什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:14:54.467

如果您已链接`tblquestions`到`answers`，则应首先添加答案，然后添加问题。否则，由于您尝试在父级之前添加子级，因此无法保持参照完整性。（总是在孩子之前添加父母。）

这是一种方法。让我们使用两个表：`tbl_question`, `tbl_answer`。

`tbl_question`至少有两列：

*   ID：`int`
*   问题：`text`

`tbl_answer`包含可能正确的答案（如果您想为一个问题添加一组可选答案，则可能是错误的）。

*   question_id: `int`, FK 到`tbl_question` `id`
*   answer_option: `tinyint(1)`/ `char(1)`，单个问题的一组可选答案
*   回答：`text`
*   is_correct: `tinyint(1)`/ `byte(1)`（标记问题的正确答案）

和一个复合PK `question_id`。`answer_option`现在，您可以通过`id`/连接这两个表，`question_id`并获得单个问题的所有可选答案。只要确保其中只有一个被标记为正确。

* * *

尽管在我写这篇文章时你已经接受了一个答案，但我会发布这个答案。就像 tombom 说的，你有一个 FK 建立错误的方式。

不知道您通过询问有关设置带有联接的表的教程是什么意思。您应该首先熟悉外键的概念，然后您可以以任何您喜欢的方式加入您的表。这里有几个链接。

*   [http://en.wikipedia.org/wiki/Foreign_key](http://en.wikipedia.org/wiki/Foreign_key)
*   [http://www.sitepoint.com/mysql-foreign-keys-quicker-database-development/](http://www.sitepoint.com/mysql-foreign-keys-quicker-database-development/)
*   [左、右、外连接和内连接有什么区别？](https://stackoverflow.com/questions/448023/what-is-the-difference-between-left-right-outer-and-inner-joins)
*   [http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

FK 的概念非常简单，是与另一个表上的列相关的列（您可以使用外键列的值连接两个或多个表）。只需记住在这些表/值之间添加 FK 约束，以便 RDBMS 在您尝试执行破坏约束的操作时向您发出警告。就像这里当你试图为一个不存在的问题添加答案时一样。

最后，如果您担心引用完整性，请使用 InnoDB（每个 DB 设计者/经理/管理员都应该这样做）。

*   [http://dev.mysql.com/doc/refman/5.5/en/ansi-diff-foreign-keys.html](http://dev.mysql.com/doc/refman/5.5/en/ansi-diff-foreign-keys.html)

# format - Fluid Extbase HTML 不正确

> ID：14999372
> 
> 赞同：0
> 
> 时间：2013-02-21T10:03:07.850
> 
> 标签：format, typo3, fluid, extbase

我有这个代码：

```
<f:format.html>{article.text}</f:format.html> 
```

我的问题是，如果我在 {article.text.} 中有一个类似 object oder param 的标签，则代码不会编译它并显示正常文本。

还有其他可能防止这种情况发生吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T09:01:54.097

我不确定“给我看普通文本”是什么意思，但问题可能是`format.html`视图助手`lib.parseFunc_RTE`默认使用：http: [//git.typo3.org/TYPO3v4/CoreProjects/MVC/fluid.git/ blob/HEAD:/Classes/ViewHelpers/Format/HtmlViewHelper.php#l86](http://git.typo3.org/TYPO3v4/CoreProjects/MVC/fluid.git/blob/HEAD:/Classes/ViewHelpers/Format/HtmlViewHelper.php#l86)

所以你可以尝试允许标签

```
lib.parseFunc_RTE.allowTags := addToList(object, param) 
```

# eclipse - 为什么Eclipse插件羽化许可协议不能粘贴？

> ID：14999375
> 
> 赞同：2
> 
> 时间：2013-02-21T10:03:12.063
> 
> 标签：eclipse, eclipse-plugin

Eclipse插件羽化项目->feather.xml->信息->许可协议

为什么我不能使用“粘贴”（ctr + v）？

# vim - 让 tab 在 vi m 中做每一件事

> ID：14999382
> 
> 赞同：1
> 
> 时间：2013-02-21T10:03:57.117
> 
> 标签：vim

我想做的是让`<tab>`一切都做。

1.  如果那里有空格，请添加普通选项卡
2.  如果出现，在弹出菜单中上下移动
3.  在那里添加 CodeComplete() 函数的返回结果

我从 CodeComplete() 函数中得到了变量的结果`codecompl`。所以问题就在这里：如何在变量中插入刺`codecompl`。请不要调用return，因为在插入变量的字符串后我还有其他事情要做`codecompl`。代码贴在这里：

```
function! CleverTab()
    if strpart( getline('.'), 0, col('.')-1 ) =~ '^\s*$'
        return "\<Tab>"
    endif
    if pumvisible()
        return "\<C-N>"
    endif
    let s:codecompl = CodeComplete()
    <c-r>=s:codecompl<cr>
    "exec " " .s:codecompl. "\<enter>"."."
    "if g:swith_region_flag == 1
    "    return SwitchRegion()
    "else return s:codecompl
    return ''
endfunction 
```

我尝试了很多方法，但问题仍然没有解决。我现在想的是使用 = 将字符串插入变量 codecompl 中。然后做其他事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:57:30.807

如果您不坚持编写自己的函数，请查看[supertab](http://www.vim.org/scripts/script.php?script_id=1643)。它具有所有这些功能...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:09:10.347

你的意思是你不能只是

```
:return s:codecompl 
```

因为你需要执行其他代码，但是*在*插入内容之后`s:codecompl`就完成了？！

该序列不可能在单个函数中实现；将附加代码移动到不同的函数并将其调用附加到插入的代码中：

```
:return s:codecompl . "\<C-O>:call SecondPart()\<CR>" 
```

或者

```
:return s:codecompl . "\<C-R>=SecondPart()\<CR>" 
```

# magento - 在新安装的 Magento 版本中查找图片上传选项

> ID：14999385
> 
> 赞同：0
> 
> 时间：2013-02-21T10:04:04.913
> 
> 标签：magento, magento-1.7

我已经在我的本地主机（**XAMPP**）中安装了新版本的**Magento 1.7.0.2 。**

 **我正在尝试**上传**与产品相关的图片。但我力求找到**上传**和**浏览**按钮。

这是由于安装不当造成的问题吗？如果是，我尝试在另一台机器上安装相同的。但同样的结果。

这是屏幕截图。 ![在此处输入图像描述](../Images/4884b15c4799bf1e489bfcb2bd19a928.png)

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T03:42:35.553

在您的浏览器中安装最新版本的 Flash Player。**

# wcf - 在 Visual Studio 2012 中使用文件系统发布方法发布 WCF 服务应用程序

> ID：14999386
> 
> 赞同：0
> 
> 时间：2013-02-21T10:04:05.887
> 
> 标签：wcf, visual-studio-2012, publishing, publish-profiles

我想使用文件系统发布方法在我的本地系统中发布 WCF 服务。在发布方法中，我给出了“文件系统”，目标位置为“C:\inetpub\wwroot\wcfpublish”，目标网址为“ [https://wcf.publish.net:11096/Default.html](https://wcf.publish.net:11096/Default.html) ”。但是当我点击发布错误消息时，出现“无法打开[https://wcf.publish.net:11096/Default.html](https://wcf.publish.net:11096/Default.html)的 url 。异常：未注册类”。我也在主机文件中配置过。请指导我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:07:33.467

根据我的经验，在进行`FileSystem`发布时，`publishUrl`实际上指向的是文件路径，而不是顾名思义的 Url。

尝试设置`PublishUrl`为`C:\inetpub\wwroot\wcfpublish`.

# android - Android调试本机代码“gdb.setup：没有这样的文件或目录”

> ID：14999388
> 
> 赞同：2
> 
> 时间：2013-02-21T10:04:13.263
> 
> 标签：android, debugging, android-ndk, native-code, gdbserver

我已经尝试了将近一周的时间来调试 ndk 示例 hello-jni 的 c 代码，但没有运气。我曾尝试关注许多关于如何做到这一点的教程/博客文章，但同样没有运气。

例如，如果我按照本教程进行操作：http: [//mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-debugging/](http://mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-debugging/)，当我运行 ndk-时，我只能进入第 3 步- gdb 它说：“cp：无法统计`.libs/armeabi/gdb.setup'：没有这样的文件或目录”

如许多教程中所述，我已注释掉 ndk-gdb 的最后一行。

这是我从 cygwin 运行 ndk-gdb 时得到的：

> $ /cygdrive/d/data/klr200/construction/software/local/pc/android-ndk-r8d/ndk-gdb-eclipse --project=/cygdrive/d/data/klr200/construction/software/local/pc/ android-ndk-r8d/samples/hello-jni --verbose --force --adb=/cygdrive/d/data/klr200/construction/software/local/pc/android-sdk/platform-tools/adb.exe
> 
> Android NDK安装路径：/cygdrive/d/data/klr200/construction/software/local/pc/android-ndk-r8d
> 使用具体adb命令：/cygdrive/d/data/klr200/construction/software/local/pc/android -sdk/platform-tools/adb.exe
> 找到 ADB 版本：Android Debug Bridge 版本 1.0.31
> 使用 ADB 标志：
> 使用指定的项目
> 路径：/cygdrive/d/data/klr200/construction/software/local/pc/android-ndk -r8d/samples/hello-jni
> 找到包名：com.example.hellojni
> ABIs target by application: armeabi
> Device API Level: 10
> Device CPU ABIs: armeabi
> Compatible device ABI: armeabi
> using gdb setup init: ./libs/armeabi/gdb 。设置
> 使用工具链前缀：/cygdrive/d/data/klr200/construction/software/local/pc/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/arm-linux-androideabi-
> 使用应用程序输出目录：./obj/local/armeabi
> 找到可调试标志：true
> 找到设备 gdbserver：/data/data/com.example.hellojni/lib/gdbserver
> 找到数据目录：'/data/data/com.example.hellojni'
> 发现运行 PID: 351
> Killing existing debugging session
> 命令: adb_cmd shell kill -9 496
> [1] Killed run-as com.examp...
> 成功启动 gdbserver。
> 设置网络重定向
> 命令： adb_cmd shell run-as com.example.hellojni lib/gdbserver +debug-socket --attach >351
> 命令：adb_cmd forward tcp:5039 localfilesystem:/data/data/com.example.hellojni/debug-socket
> 命令：adb_cmd pull /system/bin/app_process obj/local/armeabi/app_process
> 附加；pid = 351
> 监听 Unix 套接字调试套接字
> 16 KB/s（0.329 秒内 5660 字节）
> 从设备/模拟器中拉取 app_process。
> 命令：adb_cmd pull /system/bin/linker obj/local/armeabi/linker
> 48 KB/s（0.786 秒内 39404 字节）
> 从设备/模拟器中拉出链接器。
> 命令：adb_cmd pull /system/lib/libc.so obj/local/armeabi/libc.so
> 77 KB/s（3.468 秒内 273868 个字节）
> 从设备/模拟器中提取 libc.so。
> **cp：无法统计`./libs/armeabi/gdb.setup'：没有这样的文件或目录**

我在任何地方都找不到 app_process（据我所知，这非常重要），如果我查看项目目录.../libs/armeabi，gdb.setup 文件就在那里。

我正在使用：

*   安卓 NDK r8d
*   安卓 SDK 21.1
*   带有 CDT 8.1.1 的 Eclipse Juno
*   最新的cygwin
*   Windows 7 32 位

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:04:27.747

找到了！参数 project="project path" 区分大小写，所以当我更正项目路径时，它运行得很好。

# php - 使用 meio upload 以编程方式裁剪照片

> ID：14999389
> 
> 赞同：0
> 
> 时间：2013-02-21T10:04:13.840
> 
> 标签：php, cakephp, image-preloader, meio-upload

我想使用 CAKE PHP MEIO 上传以编程方式从目录中生成 50 张照片的缩略图，而不是单独上传。

可能是通过调用一些meio上传库函数。

```
$meio->crop('/path/to/image/')->saveTo('/path/to/target/dir/filename.jpg'); 
```

有没有办法上传这样的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:27:14.117

[ImageTool](https://github.com/raitisg/CakePHP-ImageTool-Component/blob/master/ImageToolComponent.php)非常适合这种事情。

使用 cake`Folder`和`File`实用程序的组合打开目录，循环文件并应用必要的调整大小。

例如：

```
$dir = new Folder('/path/to/my/images');
$files = $dir->find('.*\.jpg'); // find all jpg
foreach($files as $file) {
    $this->ImageTool->resize(...);
    // etc
} 
```

# java - hibernate annotations：映射一个保持顺序的列表

> ID：14999391
> 
> 赞同：2
> 
> 时间：2013-02-21T10:04:18.427
> 
> 标签：java, hibernate, hibernate-annotations

我想做一个保持秩序的一对多映射。订单本身很复杂，并且与业务逻辑相关，没有一个单一的字段或简单的逻辑可以表示它。

我想要的是加载一个对象，交换列表中的两个（或更多）元素并保存并执行`session.update(object)`. 我希望下次加载元素时保持正确的顺序，但事实并非如此。

我在做什么：

```
@Entity
 public class Product {

@Id @GeneratedValue(strategy=GenerationType.AUTO)
private long id;
@OneToMany(fetch=FetchType.EAGER)
private List<Image> images = new ArrayList<Image>();

  blah blah blah

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T07:38:55.210

`@OrderColumn`为我做了伎俩

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T10:38:19.440

您可以对`javax.persistence.OrderBy`多个列进行排序，这通常在大多数情况下都有效。

如果订单更复杂，我建议添加一个单独的方法，在内存中执行排序并返回排序列表（不可修改）。

在所有情况下，我认为不存在允许交换列表中的元素的解决方案，以便 Hibernate 了解如何更新交换的实体（即使只有 1 个字段上的订单）：你必须更新孩子自己的实体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T10:20:52.367

这正是 Hibernate 中 LIST 映射的目的：

```
 <list name="friends">
      <key column="M_ID" not-null="true"/>
      <list-index column="M_INDEX"/>
      <one-to-many class="Person"/>
   </list> 
```

对于需要使用@OrderBy 的注释，请参阅[http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/collections.html#collections-indexed](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/collections.html#collections-indexed)

# java - 计算按钮点击次数

> ID：14999392
> 
> 赞同：2
> 
> 时间：2013-02-21T10:04:22.093
> 
> 标签：java, swing, jbutton

我想计算使用 GUI 单击按钮的次数。

我做了这段代码：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) 
 {                                         
  int clicked = 0;
  clicked++;
  System.out.println(clicked);
 } 
```

但每次我单击按钮时，它都会显示输出“1”。

我希望每次单击按钮时都显示计数。

例如：如果我单击按钮两次，它应该给我“2”的输出。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T10:05:01.077

每次单击时都会重置计数器，因为您已经在 action 方法中定义了变量。尽量不要那样做。

```
int clicked = 0; // move this outside
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) 
{                                         
    // int clicked = 0; -- this resets it to 0 each time
    clicked++;
    System.out.println(clicked);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T10:06:03.023

您已声明`clicked`为局部变量，初始化为`0`，它不能是其他任何东西`1`

改为`clicked`创建一个类级别的变量...

```
private int clicked = 0;

//...

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) 
{                                         
    clicked++;
    System.out.println(clicked);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-21T10:06:07.537

试试下面的代码

```
int clicked = 0;
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) 
 {                                         

  clicked++;
  System.out.println(clicked);
 } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-21T10:06:23.637

您已经`count`在`ActionListener`. 在块外声明它。

```
int clicked = 0;  //make it as your class member.
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) 
{                                         

  clicked++;
  System.out.println(clicked);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-21T10:06:33.103

根据您实例化此类的方式，您需要`clicked`在字段级别或类变量级别声明变量。目前，`clicked`变量的范围是方法的本地范围。

**选项1**

```
int clicked = 0;

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) 
 {                                         
  clicked++;
  System.out.println(clicked);
 } 
```

**选项 2**

```
static int clicked = 0;

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) 
 {                                         
  clicked++;
  System.out.println(clicked);
 } 
```

您使用的选项将取决于实例化。如果可能，应避免使用第二种选择。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-21T10:38:58.837

每次`jButton1ActionPerformed`触发时，单击的变量都会实例化回 0，这就是为什么它总是给你一个值 1。你应该将`clicked`变量移到该方法之外

```
//Somewhere in your class
private intClicked = 0;
//More methods here.

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) 
 {                                         
  clicked++;
  System.out.println(clicked);
 } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-21T10:05:26.317

改变

```
int clicked = 0; 
```

成为你班级的一员。这样每次按下按钮时它都不会设置为零。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-16T07:33:41.283

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import javax.swing.JTextField;
import javax.swing.JButton;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

public class Threading extends JFrame {

    private JPanel contentPane;
    private JTextField DisplayOne;
    private JTextField DisplayTwo;

    int count;
    int count1;
    int count2;

    /**
     * Launch the application.
     */

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() 
            {
                  try {
                    Threading frame = new Threading();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the frame.
     */

    public Threading() 
    {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 450, 300);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);

        JPanel panel = new JPanel();
        contentPane.add(panel, BorderLayout.CENTER);

        DisplayOne = new JTextField();
        panel.add(DisplayOne);
        DisplayOne.setColumns(10);

        DisplayTwo = new JTextField();
        panel.add(DisplayTwo);
        DisplayTwo.setColumns(10);

        JButton btnCountOne = new JButton("Count 1");
        count1=0;
        btnCountOne.addActionListener(new ActionListener() {                
                public void actionPerformed(ActionEvent arg0) 
                {   
                    DisplayOne.setText(Integer.toString(count1++));
                }
        });
        panel.add(btnCountOne);

        JButton btnCountTwo = new JButton("Count 2");
        count2=0;
        btnCountTwo.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) 
            {
                DisplayTwo.setText(Integer.toString(count2++));
            }
        });
        panel.add(btnCountTwo);

        JButton btnCountBoth = new JButton("Count Both");
        count=0;
        btnCountBoth.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) 
            {
                while (count < 10)
                {
                DisplayOne.setText(Integer.toString(++count));
                DisplayTwo.setText(Integer.toString(count));
                }
            }
        });
        panel.add(btnCountBoth);
    }

} 
```

# python - 与 Python / Numpy / Scipy 三重集成

> ID：14999393
> 
> 赞同：1
> 
> 时间：2013-02-21T10:04:21.120
> 
> 标签：python, numpy, scipy, scientific-computing

我是 python 新手，并通过遵循 Python“科学讲义 2013.1 版”教程进行学习。请帮我解决下面屏幕截图中的这个三重积分问题（第 70 页）。我已经介绍了该教程的先前内容。如果可能，请提供带有解释的逐步命令，因为作为航空航天工程师的编程概念对我来说是新的。

谢谢你。

![http://dl.dropbox.com/u/50511173/Untitled.png](../Images/4e8d5ec4c20d9005e43160aa9e685473.png)

练习：粗略的积分近似 编写一个函数 f(a, b, c)，它返回 a^b - c。形成一个 24x12x6 数组，其中包含参数范围 [0,1] x [0,1] x [0,1] 中的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:14:06.440

这可能看起来令人生畏，但这个问题会一步一步地告诉你该怎么做。

编写一个`f(a, b, c)`返回的函数`a^b-c`。

```
def f(a, b, c):
    return a ** b - c 
```

形成一个包含其参数范围的 24x12x6 数组`[0,1] x [0,1] x [0,1]`。给你`ogrid`提示。所以阅读文档我猜它看起来像：

```
x = np.ogrid[0:1:24j, 0:1:12j, 0:1:6j] 
```

然后你可以做

```
f(x[0], x[1], x[2]) 
```

然后取平均值

```
np.mean(f(x[0], x[1], x[2])) 
```

这给了我`0.18884234602967925`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T10:13:10.770

你误解了这个问题。他们没有要求您计算积分。他们要求您计算该函数在一组点上的平均值。练习的动机是该平均值将是该积分值的近似值。

您需要做的就是形成他们请求的数组，包含 24x12x6 的值，将所有这些值相加，然后除以该数组中的元素数。

# php - 重新声明一个 php 函数

> ID：14999395
> 
> 赞同：1
> 
> 时间：2013-02-21T10:04:26.680
> 
> 标签：php, wordpress, overloading, redeclare

WordPress CMS 的正常安装由数百个脚本、插件和主题组成。该概念允许通过简单地创建脚本副本并将更改的版本放在正确的目录中来替换脚本。但是，安装新版本的脚本或插件时，不会更新复制的脚本。在一个脚本中通常有数百个函数。更改一个功能的代价是其他功能也将不再更新。在许多情况下，Wordpress 钩子和过滤器足以添加或抑制特定功能，但并非总是如此。

我正在寻找一种重新声明或重载函数的方法，以便在安装更新时可以将原始脚本替换为 CMS。我试过这个：

```
rename_function( 'wp_function' , 'old_wp_funtion )

function wp_function(){
        // things to do before the function
    $a = $b;
        // call the old function
    $result = old_wp_function();
        // things to do afterwards
    $b = $c;

    return $result;
} 
```

但它不起作用。此外，使用 Wordpress，您永远不知道要考虑的参数类型和数量。重载的函数也必须处理这个问题。

我的问题是：我如何才能让它在所有情况下都能正常工作，并且可以使用任何数量和任何类型的参数。并且不必对原始函数/脚本进行任何更改，因为它们可能（而且必须）被 Wordpress 更新覆盖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:41:57.273

PHP 不支持在声明函数后重新定义函数。有很多方法可以强制它，但总的来说，它被认为是*非常*糟糕的编程实践，并且强烈建议不要这样做。

如果您真的想在 PHP 中重载代码，最好在类中编写代码而不是在普通函数中编写代码，因为类可以很容易地扩展，并且方法可以重载。*到目前为止*，这将是您的最佳选择。它可能需要对您的代码进行一些修改，但无论如何在类中编写代码是一种很好的做法，因此请考虑这是一个提高代码质量的机会。

另一种选择是使用命名空间。PHP 5.3 及更高版本支持命名空间，这意味着您可以多次声明相同的函数名，但在不同的命名空间中。如果您的代码当前未使用命名空间，这可能需要大量的工作来实现，但它可能有助于您做您想做的事。但我怀疑我之前提到的班级选项会是一个更好的选择。

具体参考`rename_function()`您在此处尝试使用的功能：它是[称为 ADP 的非标准调试器扩展的](http://www.php.net/manual/en/intro.apd.php)一部分；它是开发人员的调试器，因此当然不应该在生产系统中使用。

如果您决定按照您想要的方式进行操作，您可以尝试的其他选项包括[Runkit 扩展](http://php.net/manual/en/book.runkit.php)，它明确设计为允许您完全按照您的要求进行思考。同样，它仅供开发人员使用，不鼓励用于生产。

另一种选择是[Patchwork 库](https://github.com/antecedent/patchwork/)，它是纯 PHP 代码（即它不需要安装 PHP 扩展）。这使它成为一个更具吸引力的解决方案。但同样，作者明确建议不要将它用于开发环境以外的任何东西。

所以你有它：你有几个选择。如果您*必须*按照您描述的路线进行，我建议使用 Patchwork 库。

但我要再说一遍，你所要求的不是一个好主意——重要的线索应该是没有其他人这样做，而那些做类似事情的人一有机会就说它应该'不用于生产。

它被认为是一个有用的工具的唯一情况是编写测试脚本，在这种情况下你有无法避免的依赖关系。将依赖项重新定义为模拟或存根可以为其他无法测试的代码编写单元测试。

但除此之外，来自 PHP 世界的一致信息是：不要重新定义函数。

# jquery - 在拖动元素时防止锚标记动作

> ID：14999401
> 
> 赞同：1
> 
> 时间：2013-02-21T10:04:44.480
> 
> 标签：jquery, events, touch

我正在为触摸设备使用 jQuery 环形交叉口插件。轮播中的每个元素都链接到某个 html 页面`(a href="about.html")`，并且我启用了拖放功能，在拖动过程中如何禁用锚标记上的单击事件并在拖放完成时再次撤销。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:31:09.377

我修改了 w3school 中显示的示例，使其最适合您的要求。通过以下代码，

```
<html>
<head>
<style type="text/css">
#div1 {width:350px;height:70px;padding:10px;border:1px solid #aaaaaa;}
</style>
<script>
function allowDrop(ev)
{
ev.preventDefault();
}

function drag(ev)
{
ev.dataTransfer.setData("Text",ev.target.id);
}

function drop(ev)
{
ev.preventDefault();
var data=ev.dataTransfer.getData("Text");
ev.target.appendChild(document.getElementById(data));
}
</script>
</head>
<body>

<p>Drag the Google link into the rectangle:</p>

<div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
<br>
<a id="drag1" href="http://www.google.com" draggable="true" ondragstart="drag(event)"> Google</a>
</body>
</html> 
```

将 Google 链接拖入框中，然后单击它进行导航。我希望这能帮到您。

# c# - 如何在使用 iTextSharp 创建的 pdf 文件中显示中文字符

> ID：14999403
> 
> 赞同：3
> 
> 时间：2013-02-21T10:04:54.260
> 
> 标签：c#, itextsharp

我有包含一些英文字符和一些中文字符的字符串数据。我正在使用 iTextSharp 创建一个包含此数据的 pdf 文件。创建pdf文件后，当我打开它时，pdf只包含英文字符。它不显示中文字符。你能告诉我如何在pdf文件中显示汉字吗？请注意，我写入 pdf 的字符串数据包含动态语言字符，即有时是英文，有时是中文，有时是日文等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T11:34:16.767

这在 iText(Sharp) 文档中进行了解释。当您有一个包含不同语言字形的字符串时，您需要使用 a `FontSelector`，如[本例](http://sourceforge.net/p/itextsharp/code/HEAD/tree/trunk/book/iTextExamplesWeb/iTextExamplesWeb/iTextInAction2Ed/Chapter11/FontSelectionExample.cs)所示。

```
FontSelector selector = new FontSelector();
selector.AddFont(FontFactory.GetFont(FontFactory.TIMES_ROMAN, 12));
selector.AddFont(FontFactory.GetFont("MSung-Light", "UniCNS-UCS2-H", BaseFont.NOT_EMBEDDED));
Phrase ph = selector.Process(TEXT);
document.Add(new Paragraph(ph)); 
```

在这种情况下，我首先将 Times Roman 添加到字体选择器中，然后是 MSung-Light。现在所有的英文字符`TEXT`都将在 Times Roman 中。您说缺少的字符将使用 MSung-Light 渲染。如果您更改 MSung-Light 和 Times Roman 的顺序，完整的`TEXT`将在 MSung-Light 中呈现，因此请确保您明智地选择您的字体。顺序很重要，`TEXT`您未定义字体的每个字符都将丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-24T11:36:36.703

“SIMSUN.ttf”对我有用。你可以从网上下载它。 [https://www.wfonts.com/font/simsun](https://www.wfonts.com/font/simsun)

[![在此处输入图像描述](../Images/9d2e08e236b488e756784a9fd07650d5.png)](https://i.stack.imgur.com/qfcEY.png)

# sql - 如何在 SQL 查询中获取不同的值

> ID：14999405
> 
> 赞同：11
> 
> 时间：2013-02-21T10:04:56.553
> 
> 标签：sql, sql-server

我的 SQL 查询有问题

我想选择 DISTINCT StudentGroups(SG) 但查询给了我一些重复

这是我的查询

```
SELECT      DISTINCT(SG.SGID), en.EnrollmentID, CR.Name AS Course, INS.Name as Instructor,
                S.Session, SG.StartTime, SG.EndTime, EN.CreateDate

    FROM        StudentGroups SG inner JOIN Enrollments EN ON SG.SGID = EN.SGID
                JOIN Courses CR ON SG.CourseID = CR.CourseID
                JOIN Class CL ON SG.ClassID = CL.ClassID
                JOIN Instructors INS ON SG.InstructorID = INS.InstructorID
                JOIN Sessions S ON SG.SessionID = S.SessionID

    WHERE       EN.SGID NOT IN ( SELECT SGID FROM Enrollments
                            WHERE StudentID = 45 
```

**更新**

这个查询给了我以下数据

![在此处输入图像描述](../Images/7c49d88d7ac34907a1edb3a66b22df2c.png)

但我不想重复 SGID

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-21T10:19:55.717

`DISTINCT`始终适用于返回的所有列。在一列周围加上括号对其行为没有影响。

如果您希望结果仅包含 的唯一值`SG.GID`，则可以改用`GROUP BY`子句——但是您必须确定一些规则，以便在其他列*中返回哪些值。*您可以使用 、 、 、 等聚合函数来执行此操作`MIN()`。`MAX()`简化`COUNT()`示例`SUM()`：

```
SELECT  SG.SGID,
        MIN(SG.START_TIME),              --the lowest start time for this sgid.
        COUNT(DISTINCT en.EnrollmentID)  --the unique enrollments for this sgid.
    FROM StudentGroups SG 
    INNER JOIN Enrollments EN ON SG.SGID = EN.SGID
    GROUP BY SG.SGID; 
```

在原始查询中连接多个表时，在计算和求和时必须小心，因为连接中的重复项可能会给您不正确的结果。

另一种选择是使用`ROW_NUMBER()`为每个返回一行`SGID`：

```
SELECT * FROM (
    SELECT  SG.SGID,
            SG.START_TIME, 
            en.EnrollmentID,
            ROW_NUMBER() OVER (PARTITION BY SGID ORDER BY SG.START_TIME) as RN
        FROM StudentGroups SG 
        INNER JOIN Enrollments EN ON SG.SGID = EN.SGID
    )
    WHERE RN = 1; 
```

这对每个 的行进行编号`SGID`，从 1 开始并按 的值排序`SG.START_TIME`。它将返回每行具有最早开始时间的一行`SGID`。如果多行具有相同的开始时间，它将选择其中任何一个，或多或少随机。您可以向`ORDER BY`子句添加更多字段以进一步定义返回哪些行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-09T06:42:01.560

当 DISTINCT 不适用于您想要的输出时，请使用 GROUP BY 子句。

# ios - 如果不允许 UIImagePickerController 访问照片库，则显示 UIActionSheetUser

> ID：14999408
> 
> 赞同：1
> 
> 时间：2013-02-21T10:05:09.067
> 
> 标签：ios, objective-c, uiimagepickercontroller, photo, photolibrary

当我想显示 UIImagePickerController 但用户不允许我的应用访问照片库时，有没有办法获得通知。

或者，如果用户在弹出窗口时说“是”或“否”，我能否以某种方式获取信息，如果他们希望允许此应用访问照片库。

所以我可以显示一个 UIActionSheet 来通知用户我要对图片做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:08:04.310

您可以将答案保存到 NSUserDefaults 中，然后收集此信息以选择应该呈现给用户的内容。

# php - 从 php 调用托管的 WCF 服务

> ID：14999412
> 
> 赞同：-1
> 
> 时间：2013-02-21T10:05:15.037
> 
> 标签：php, .net, wcf, web-services

我有一个**WCF Web 服务**，用 .net 框架 4.0 制作。

该服务托管在**IIS 7**上。

然后我有一个用于 PHP的**WAMP 服务器。**

PHP制作的页面如何**调用 WCF 服务**函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:05:26.933

你试过什么？

您可以使用`SoapClient` [如下所示](http://weblogs.asp.net/gunnarpeipman/archive/2007/09/17/using-wcf-services-with-php.aspx)：

```
$client = new SoapClient('http://gamma/wcftest/MathService.svc?wsdl');
$obj->x = 2.5;
$obj->y = 3.5;
$retval = $client->Add($obj);

echo "2.5 + 3.5 = " . $retval->AddResult; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:02:32.897

前端是什么语言或从什么语言调用它都没有关系。

这就是 Web 服务的美妙之处，它为您提供了平台独立性。

WCF 以 JSON、JSONP 或 XML 格式返回数据，所有这些都可以在您的 PHP、jQuery、Java 等中使用...

您只需要学习如何使用所选格式的返回数据。

# asp.net-mvc-4 - ASP.NET MVC 4 & KNOCKOUT.JS

> ID：14999414
> 
> 赞同：0
> 
> 时间：2013-02-21T10:05:15.947
> 
> 标签：asp.net-mvc-4, knockout.js

我有 2 个填充有 knockout.js 的下拉列表，我有 2 个问题：

1）为什么这个是从 Model.StreetList 填充的

```
@Html.DropDownListFor(m => m.SelectedStreet, Model.StreetList, new {onchange = "FetchHouses();"}) 
```

但这并不

```
 @Html.DropDownListFor(m => m.SelectedStreet, Model.StreetList, new {onchange = "FetchHouses();", @data_bind = "options: StreetList, optionsText: 'Name', optionsValue: 'Id', optionsCaption: 'Select...'"}) 
```

那么默认情况下是否可以从模型中填充它，但是如果发生某些事件，则使用敲除绑定填充它？

2) 如果 ModelState 无效，则表单提交后，这 2 个下拉列表的选定值将丢失。我该如何解决这个问题？

```
<p>
    @Html.LabelFor(m => m.SelectedStreet, @Resources.RegistrationStreet)
    @Html.DropDownListFor(m => m.SelectedStreet, Model.StreetList, new {onchange = "FetchHouses();", @data_bind = "options: StreetList, optionsText: 'Name', optionsValue: 'Id', optionsCaption: 'Select...'"})
</p>
<p>
    @Html.LabelFor(m => m.SelectedHouse, @Resources.RegistrationHouse)
    @Html.DropDownListFor(m => m.SelectedHouse, Model.HouseList, new { @data_bind="options: HouseList, optionsText: 'Number', optionsValue: 'Id'"})
</p> 
```

任何帮助表示赞赏！

编辑：

knockout.js 绑定发生在更改事件上并且工作正常，问题是虽然没有触发更改事件，但我想从 MVC 模型中填充下拉列表这是执行绑定的 js 代码：

```
function CascadingDdLViewModelStreet() {
    this.StreetList = ko.observableArray([]);
    this.HouseList = ko.observableArray([]);
}

var objVMStreet = new CascadingDdLViewModelStreet();
ko.applyBindings(objVMStreet);

function FetchStreets() {
    objVMStreet.HouseList([]);
    objVMStreet.StreetList([]);
    var cityCode = $("#SelectedCity").val();
    $.getJSON("/Account/GetStreets/" + cityCode, null, function(data) {
        objVMStreet.StreetList(data);
    });

}

function FetchHouses() {
    var streetCode = $("#SelectedStreet").val();
    $.getJSON("/Account/GetHouses/" + streetCode, null, function(data) {
        objVMStreet.HouseList(data);
    });
} 
```

这是一个完整的代码：

查看： http: [//pastebin.com/jva9ff8A](http://pastebin.com/jva9ff8A)

型号： http: [//pastebin.com/vDQkg0d5](http://pastebin.com/vDQkg0d5)

控制器： http: [//pastebin.com/avBuRy9D](http://pastebin.com/avBuRy9D)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:14:41.347

1.try populating ko model with data from MVC model like so:

```
function CascadingDdLViewModelStreet() {
  this.StreetList = ko.observableArray(@Html.Raw(Json.Encode(Model.StreetList)));
  this.HouseList = ko.observableArray([]);
} 
```

2.You need to pass the model (even though invalid) with SelectedStreet & SelectedHouse populated back to the View.

# compiler-construction - 从 Rational Apex Ada 编译器迁移到 GCC Ada 编译器

> ID：14999417
> 
> 赞同：0
> 
> 时间：2013-02-21T10:05:25.523
> 
> 标签：compiler-construction, ada

我将从事一个使用 Ada 语言的软件开发项目。客户正在使用 Rational Apex Ada 编译器，而我将使用 GNU 编译器。我的代码应该可以在客户的电脑上正常工作。Ada 语言中所有可能的编译器相关代码是什么？这样我就可以开发一个独立于编译器的代码。我也想在我的电脑上编译和执行客户的代码。

谢谢 Padmapriya

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T13:59:54.647

GNAT Pro 的下一个版本将提供一个新的“pragma Profile (Rational)”来帮助从 Apex 移植到 GNAT。有关说明，请参见[http://docs.adacore.com/gnat-unw-docs/html/gnat_rm_2.html#SEC110](http://docs.adacore.com/gnat-unw-docs/html/gnat_rm_2.html#SEC110)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T15:02:40.643

In my experience, your main difficulty in going between Gnat and another vendor's compiler is going to be dealing with Gnat's oddball file naming requirements. I believe that Rational, like most compilers, will happily use whatever filename you give it, and just keeps track of the mapping with internal files. Gnat is not so forgiving (but doesn't require the internal mapping files).

So if you folks are writing everything from scratch, my reccomendation would be to standardize on Gnat's preferred file naming. This means one source file per Ada program unit, with the file name matching the program unit name, but all lower-case, and dots replaced by hyphens. Package specifications use the `.ads` extension, and program unit bodies use `.adb`.

Otherwise, there isn't much reason why the code can't be completely portable. I worked on one job that had a high-fidelity flight simulator built with a Intermetrics-based front-end for a VxWorks OS target that we were able to rebuild with Gnat at our (Win32) desks for basic desk testing. Even the hard real-time scheduler ported over just fine, as it used all Ada tasking primitives in its implementation. IIRC, the only non-portable calls we had to deal with were a BIOS call to set the TOD clock from its battery backup, and a single VxWorks OS call to set its Real-time Clock frequency. Figuring out how to get everything `gnatchop`ped properly took far more time than stubbing out those two calls.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T14:29:45.963

“编译器相关代码”在 Ada 中的作用比在许多其他语言（例如 C 或 C++）中要小得多。但是，依赖于编译器的包并不少见，并且也可能存在编译器特定的编译指示和属性。

根据我的经验，Rational Apex 开发人员似乎倾向于过度（恕我直言）使用 Rational 提供的包。

要么必须移植或重新实现此类包，要么重新编码与它们交互的 Ada 以使用纯 Ada 方法，这是高度首选的选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T11:01:43.113

我当前的项目使用了一些特定于编译器的（Branched from `gnat`）功能，并且我们还打开了一堆警告，在我们编译的某个时刻，它给了我们错误消息：

```
warning: use of this unit is non-portable and version-dependent 
```

如果您还要求编译器将警告视为错误， ( `-gnatwe`) 您应该在找到它们时编译失败。

# selenium - 足够的硒测试？

> ID：14999421
> 
> 赞同：0
> 
> 时间：2013-02-21T10:05:34.010
> 
> 标签：selenium

我想听听关于在 Selenium 测试中什么是充分验证的意见。测试中的基本思想通常是从一个页面到另一个页面并单击链接，但是确定您获得预期页面的最佳方法是什么？它是在检查当前的网址还是标题？似乎很确定，但它留下了链接被破坏并给出错误页面的可能性。需要更深入吗？在当前页面上定位某些元素是常见的做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:39:09.320

在我看来，只要您认为足以确定您正在测试的产品的质量，请记住自动化测试运行不会超过手动测试时间:) 并且不会给您误报。这在很大程度上取决于您的情况或您正在测试的功能。

如果您的应用程序已经存在很长时间并且一直经过测试，那么我会让我的自动化测试只是确保流程没有中断，在这种情况下，最后几次验证就足够了。我通常会进行一些内容检查，而不仅仅是检查页面标题或网址。如果您的页面有一个通用的模式来报告错误，那么您也可以在页面上查找是否缺少该模式。

如果您知道您的应用程序通常会失败的特定位置，因为这使得更多地回归它或添加更多验证以确定质量很重要。

# javascript - 如何从 javascript 打开 ics 文件？

> ID：14999423
> 
> 赞同：0
> 
> 时间：2013-02-21T10:05:39.123
> 
> 标签：javascript, android, iphone, cordova

我正在创建一个移动应用程序。我试图在电子邮件中成功打开 .ics，但我需要从 javascript 打开它。我将文件复制到我的项目的 www/ics 文件夹中，我尝试了这个：

```
window.location = "ics/callelement.ics"; 
```

没发生什么事。也许是因为我的项目中不能有 ics 文件，在这种情况下我该如何获取文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-30T01:15:30.217

我设法通过执行以下操作打开了一个 ics 文件：

```
window.open( "data:text/calendar;charset=utf8," + escape(calendarReminders.getFullCalendar())); 
```

calendarReminders.getFullCalendar() 返回一个表示有效 iCalendar 文件的字符串。

# jquery - Jquery 和 IE8 问题

> ID：14999426
> 
> 赞同：0
> 
> 时间：2013-02-21T10:05:48.987
> 
> 标签：jquery

我创建了一个选择，应该更改选择事件上的 url 页面。

我写了这个简单的脚本来做到这一点：

```
<select name="elenco_regioni" id="elenco_regioni">
<option value="">Select an option</option>
<option value="http://example.com/page/1">Page 1</option>
<option value="http://example.com/page/2">Page 2</option>
</select>
    <script type="text/javascript">
        $(function(){   
        $('#elenco_regioni').bind('change', function () {
            var url = $(this).val();
            if (url) {
                 window.location = url;
            }
            return false;
        });
        });
    </script> 
```

在 Firefox、safari、chrome、IE9 上一切正常...如何在 IE7 和 IE8 上修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:11:57.800

尝试在函数中调用它

```
<select name="elenco_regioni" id="elenco_regioni">
<option value="http://example.com/page/1">Page 1</option>
<option value="http://example.com/page/2">Page 2</option>
</select>
    <script type="text/javascript">
        $(function(){   
        $('#elenco_regioni').bind('change', function () {
            var url = $(this).val();
            if (url) {
                 go_to_url(url);
            }
            return false;
        });
        });
        function go_to_url(url)
        {
             window.location = url;
        }
    </script> 
```

# android - 安卓 | 将屏幕高度作为宽度，将屏幕宽度作为高度

> ID：14999427
> 
> 赞同：0
> 
> 时间：2013-02-21T10:05:49.763
> 
> 标签：android, mobile, android-manifest, screen-orientation

我的应用程序中有以下代码来获取屏幕宽度和高度：

```
screenHeight = (short) Activity.getWindow().getWindowManager().getDefaultDisplay().getHeight();
screenWidth  = (short) Activity.getWindow().getWindowManager().getDefaultDisplay().getWidth(); 
```

在 AndroidManifest 中，我有：

```
 <activity
      android:name="com.test.MyActivity"
      android:configChanges="keyboardHidden|orientation"
      android:launchMode="singleTask"
      android:screenOrientation="landscape"
      android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >
 </activity> 
```

现在，对于屏幕分辨率为 1280x700 的设备，我希望 screenWidth 变量的值始终为 1280，而 screenHeight 的值始终为 700。这与用户拿着手机的方式无关。

但是，有时我得到 screenWidth 等于 700 和 height 等于 1280。这是为什么呢？我的清单文件不应该强制我的应用程序的方向始终保持横向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:54:12.217

put the line in your manifest activity tag

```
android:configChanges="keyboardHidden|orientation" 
```

override the method in your activity

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
} 
```

and put the line in onCreate() method

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAP); 
```

your application will remain in landscap only. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:25:40.560

这是Android的一个有点棘手的部分。您不应该依赖这些方法，因为您的应用程序中可能会异步发生许多事情。如果您的应用程序被迫以横向运行，但您有一部普通手机，它可能将纵向作为主屏幕和锁定屏幕的默认方向，那么您就有麻烦了。每次锁定屏幕或启动应用程序的新实例时，由于旋转动画挂起，您无法确定报告的宽度和高度是横向还是纵向。

要正确确定分辨率，您必须找出您实际检查的方向。您可以使用加速计、OrientationEventListener、OnConfigurationChanged 和 rootView 大小。不过，我想处理这个问题的最好方法是在你的代码中交换宽度和高度，所以宽度总是更大的值。就这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:13:00.480

`android:screenOrientation="landscape"`

这导致了这里的问题，如果你必须解决你的问题，那就让它成为肖像。

如果您不想限制自己，请检查代码中的方向并进一步使用您的代码。

不是代码而是一个想法， **例如**

```
 if(getOrientation=="portrait")

   determine height and width.

 else
    ... 
```

# c# - 在 C# 中赋值和创建字符串实例有什么区别？

> ID：14999429
> 
> 赞同：4
> 
> 时间：2013-02-21T10:05:51.243
> 
> 标签：c#, string, heap-memory

我有示例代码。

```
var charMass = new char[] { 's', 't', 'r' };
string myString = new string(charMass);
string myString2 = new string(charMass);
string myString3 = "str";
string myString4 = "str";

bool bb1 = Object.ReferenceEquals(myString, myString2);
bool bb2 = Object.ReferenceEquals(myString, myString3);
bool bb3 = Object.ReferenceEquals(myString3, myString4); 
```

为什么 bb1 和 bb2 是假的？我知道 equals 必须显示为真，因为它比较值，但是那些字符串的内存分配呢？为什么 myString3 和 myString4 指向堆中的同一个内存块，但 myString 和 myString2 没有？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T10:08:31.107

C# 编译器对其进行优化，因此相同的文字指向相同的字符串实例

[MSDN](http://msdn.microsoft.com/en-us/library/system.string.isinterned.aspx)：

> 实习生池保存字符串存储。**如果将文字字符串常量分配给多个变量，则每个变量都设置为引用**实习池中的相同常量，而不是引用具有相同值的多个不同 String 实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T15:31:56.530

我在这里回答你的问题：

[http://blogs.msdn.com/b/ericlippert/archive/2009/09/28/string-interning-and-string-empty.aspx](http://blogs.msdn.com/b/ericlippert/archive/2009/09/28/string-interning-and-string-empty.aspx)。

简短的回答是：实习文字字符串既*便宜又容易*，因此默认情况下完成。实习动态分配的字符串*通常会以大量时间为代价节省少量字节，*因此*不值得为*. 如果你想强制实习，你可以自己去做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T10:11:58.890

`myString`并且`myString2`永远不能彼此（或任何其他字符串）引用相等，因为您显式调用了字符串构造函数，导致每次都创建一个新对象。显然，这个新对象不会与任何其他已经存在的对象引用相等。

`myString3`并且`myString4`是引用相等的，因为编译器[对字符串进行了实习](http://msdn.microsoft.com/en-us/library/system.string.intern.aspx)：在编译时用字符串文字初始化的字符串值最终在运行时成为对同一对象的引用：

> 公共语言运行时通过维护一个称为实习池的表来保存字符串存储，该表包含对程序中以编程方式声明或创建的每个唯一文字字符串的单个引用。因此，具有特定值的文字字符串的实例在系统中只存在一次。
> 
> 例如，如果您将相同的文字字符串分配给多个变量，则运行时会从实习池中检索对文字字符串的相同引用并将其分配给每个变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T10:09:05.913

也许编译器以某种方式将其优化`"str"`为单个*文字*，然后将其分配给每个变量，当然，字符串是指针，意味着它们都指向同一个地址。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T10:13:29.123

这是基于框架中String的底层实现。

[http://msdn.microsoft.com/en-us/library/system.string.intern.aspx](http://msdn.microsoft.com/en-us/library/system.string.intern.aspx)

我看到的方式是，对于 myString 和 myString2，您使用 char[] 创建了它们，并且在创建字符串时在实习生池中没有默认查找。

在 myString3 和 myString4 的情况下，myString3 为 InternPool 添加了价值，而对于 myString4，您只是获得了一个引用，因为它是示例块。

我以前的印象是，在早期版本的框架中，IsIntern 是可选的，并且可以让开发人员使用。看起来不一定是这样

# java - neo4j：在 neo4j graphDB 中向节点和关系类型添加多个属性

> ID：14999430
> 
> 赞同：1
> 
> 时间：2013-02-21T10:06:00.463
> 
> 标签：java, neo4j, nodes, graph-databases, edges

我想在 neo4j (java) 中从 Facebook 数据构建社交网络图。我正在尝试搜索相关示例以理解这些概念，但仍然无法获得任何这些特定类型。请帮助我了解如何实现它，并在可能的情况下提供适当的链接以获取相关帮助。

我想要节点和关系（边缘）属性如下：

```
Node properties:
   String id, name, town;
   int numOfFriends;
   Double age;
   Date dateOfJoining
   HashSet<String> postIdSet;

Relationship Properties:
   boolean Knows;
   int numOfLikes, numOfComments;
   float wtLikes, wtComments;
   String relationship; 
```

如何创建`graphDB`具有上述属性的节点和边？

我有一个用于创建`graphDB`和添加节点和关系的示例代码结构，如下所示：

```
GraphDatabaseService graphDB = new GraphDatabaseFactory().newEmbeddedDatabase(DB_PATH);
registerShutdownHook(graphDB);

Transaction tx = graphDB.beginTx();
try {
    /* define relationshipType*/
    RelationshipType rel = DynamicRelationshipType.withName(??);

    /* create new node with given properties*/
    Node node1 = graphDB.createNode();

    /* set node1 properties e.g. node1.id="1234" */

    /* create another new node with given properties */
    Node node2 = graphDB.createNode();

    /* set node2 properties e.g. node1.id="5678" */

    /* search for node with id "1234" */
    Node n1 = getNodeById(graphDB,"1234");

    /* search for node with id "5678" */
    Node n2 = getNodeById(graphDB,"5678");

    /* create relationship between n1 and n2 with above mentioned properties and set their values */
    Relationship relationship = n1.createRelationshipTo(n2, rel);
    relationship.setProperty(??);
    tx.success();
} finally {
    tx.finish();
} 
```

如何将这些不同的属性添加到节点或边缘（关系）？

如何搜索具有给定 String`"id"`属性的节点并更新它的其他属性，例如`numOfFriends`？

如果有人尝试为所有/任何查询填充/提供示例解决方案代码，这将是最有用的：（1）添加给定的节点属性集，（2）添加给定的边缘属性集，（3）搜索对于节点和其他任何内容。这可以作为访问此问题的任何人的快速参考。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T10:23:23.810

只需使用 node.setProperty 或 relationship.setProperty 设置属性

搜索：您可以使用 Cypher 执行查询以取回节点、属性和关系，或者您可以使用索引来查找节点，然后执行 node.getProperty。

手册中的所有内容：http: [//docs.neo4j.org/chunked/stable/tutorials-java-embedded.html](http://docs.neo4j.org/chunked/stable/tutorials-java-embedded.html) （假设您根据您的代码使用嵌入式）

顺便说一句： tx.success() 需要在您完成节点/rel 操作后调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-29T14:51:22.797

这是我一直在看的一堆要点：http: [//gist.neo4j.org/](http://gist.neo4j.org/)

可能会让您了解如何推进您的项目。

# c++ - 将一组指针投射到其他对象？

> ID：14999431
> 
> 赞同：1
> 
> 时间：2013-02-21T10:06:01.420
> 
> 标签：c++, python, numpy, chipmunk, pymunk

我正在尝试将一组对象发送到我的 c 库。

我要发送的对象是一个 pymunk Body。它有一个嵌入其中的指针对象`Body._body`。我能够将一个单一的传递给我的函数，并使用 Chipmunk 函数提取我想要的任何东西。我`cpBodyGetMass`只是用作测试，并且有效。

如果我制作这些数组。唯一有效的是第一个。

我希望能够将`Body._body`地址作为数组发送到我的 dll。我想我可以将指针存储在一个`c_int`或`c_long`数组中，并将这些地址转换为`cpBody`Chipmunk 想要的地址。

这是我的自定义功能

```
int pymunk_body(int color_id, int numof, float * values, cpBody * body){

    glBindTexture(GL_TEXTURE_2D,0);
    cpBody bd;
    float red;
    float green;
    float blue;
    float alpha;
    float sizex;
    float sizey;
    cpVect position;
    float positionx;
    float positiony;
    float rotation;

    for (int i=0;i<numof*6;i=i+6){
        bd=body[i/6];
        red=values[0+i];
        green=values[1+i];
        blue=values[2+i];
        alpha=values[3+i];
        sizex=values[4+i];
        sizey=values[5+i];
        position=cpBodyGetPos(body);
        positionx=position.x;
        positiony=position.y;
        rotation=cpBodyGetAngle(body)*180/PI;
    } 
```

我的 C++ 没有 python 包装，所以我只能发送 C 对象。我一直这样做的方式是...

```
 gldll[4](ctypes.c_int(add_color),
    ctypes.c_float(color[0]),
    ctypes.c_float(color[1]),
    ctypes.c_float(color[2]),
    ctypes.c_float(color[3]),
    ctypes.c_float(position[0]),
    ctypes.c_float(position[1]),
    ctypes.c_float(rotation),
    ctypes.c_float(size[0]),
    ctypes.c_float(size[1])) 
```

和

```
 ni=numpy.array([self.texture.TextureID,ublur,add_color,blurSize,self.Blur+blur,textfont],"i")
    nf=numpy.array([(self.width+self.height)/2.0,color[0],color[1],color[2],color[3],position[0],position[1],rotation,self.half_width,self.half_height,scale],"f")

    gldll[2](ctypes.c_void_p(ni.ctypes.data),ctypes.c_void_p(nf.ctypes.data)) 
```

现在，如果我发送一个指针数组。基本上是一个 4 字节整数的数组。`cpBody body[]`假设它必须以字节为单位跳转到数组中的 sizeof(cpBody) 才能到达下一个对象。但他们不是内联的。它是指向所有主体的随机指针列表。我需要它来读取每个数组元素中的地址，并让它假设`cpBody`在那个位置有一个。

如果你看第二个例子。我通过单个指针发送了一个数组。我需要发送一个指向指针数组的指针并从每个指针中获取 cpBody。这意味着我需要数组只跳转 4 个字节并将内存地址读取为`cpBody`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:11:29.520

这是将一组 pymunk.Body 对象发送到 ac lib 的一种方法的简短示例：

首先是c代码：

```
#include "chipmunk.h"

double mass_sum(size_t numof, cpBody ** body);
double mass_sum(size_t numof, cpBody ** body){
    double total = 0;  
    for (int i=0; i<numof; i++){    
         total += cpBodyGetMass(body[i]);
    }
    return total;
} 
```

然后是python代码：

```
from ctypes import *
import sys
sys.path.insert(0,'..')

import pymunk 

sendbody_lib = windll.LoadLibrary("sendbody.dll")

cpBody = pymunk._chipmunk.cpBody

mass_sum = sendbody_lib.mass_sum
mass_sum.restype = c_double
mass_sum.argtypes = [c_int, POINTER(POINTER(cpBody))]

b1 = pymunk.Body(1, 1)
b2 = pymunk.Body(10, 1)
bodies = [b1._body, b2._body, b1._body]
arr = (POINTER(cpBody) * len(bodies))(*bodies)

print mass_sum(len(arr), arr) 
```

（我必须修改路径以让我的代码找到 pymunk，正如您在开始时看到的那样，但这只是因为我没有默认将它安装到 python 路径中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:08:02.763

我不确定，但您使用`cpBodyGetAngle(body)`不应该`cpBodyGetAngle(bd)`（与 相同`cpBodyGetPos`），因为这总是会将数组衰减为指向第一个元素的指针。

如果这不是您正在寻找的，您能描述什么不起作用吗？你的程序是否崩溃，产生意想不到的结果，......

# .htaccess - htaccess 将带有查询字符串的旧 URL 重定向到新的 SEO URL

> ID：14999434
> 
> 赞同：3
> 
> 时间：2013-02-21T10:06:06.207
> 
> 标签：.htaccess, redirect

我知道这是一个常见的问题/问题，但我花了几个小时寻找答案，我发现太多不同的解决方案彼此差异太大。我想知道实现这一目标的“最佳”方式（最佳实践）。

我的 htacces 文件如下所示：

```
RewriteEngine On

# Redirect non-www URLs to www-prefixed ones
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

# Redirect HTTPS requests to HTTP ones
RewriteCond %{HTTPS} =on
RewriteRule .* http://%{SERVER_NAME}%{REQUEST_URI} [R,L]

# Redirect URLs with trailing slashes to ones without it
RewriteRule ^([^/\.]+)/$ http://%{HTTP_HOST}/$1 [R=301,L]

# Rewrite pretty URLs
RewriteRule ^([^/\.]+)$ index.php?page=$1 [L] 
```

现在需要最后一个重要步骤：重定向旧 URL，例如

`http://www.domain.com/index.php?page=abc`和`http://www.domain.com/?page=abc`

给新的：

`http://www.domain.com/abc`

我知道我可能应该检查`{QUERY_STRING}`并将此重定向放在重写 URL 的最后一行之前，或者可能不？如何正确编写这样的规则？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T12:18:35.357

要重定向`http://www.domain.com/index.php?page=abc and http://www.domain.com/?page=abc`到新的，请使用此附加规则：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+(?:index\.php)?\?page=([^\s]+) [NC]
RewriteRule ^ /%1? [R=301,L] 
```

# javascript - 谷歌方向服务未使用 javascript 在 ruby on rails 中运行

> ID：14999436
> 
> 赞同：0
> 
> 时间：2013-02-21T10:06:11.110
> 
> 标签：javascript, ruby-on-rails

我是 ruby​​ on rails 和 javascript 的新手。我想在我的项目中使用谷歌地图方向服务。它在 html 中运行良好，但是当我将它放在我的 rails 项目中时，它停止工作并抛出错误

ReferenceError：谷歌未定义

var DirectionsService = 新的 google.maps.DirectionsService();

我发布我的代码也请在下面查看。

```
function initGeolocation()
{
       if(navigator.geolocation)
        {
          navigator.geolocation.getCurrentPosition( success, fail );
        }
    else
        {
          alert("Sorry, your browser does not support geolocation services.");
        }
}

var geocoder;
var directionDisplay;
var map;   
var marker;
 alert("bahar");
var directionsService = new google.maps.DirectionsService();
alert("bahar666");

function success(position) {
  geocoder = new google.maps.Geocoder();
  directionsDisplay = new google.maps.DirectionsRenderer();
  coords = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
  var myOptions = {
    zoom:12,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    center: coords
  }
  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
  marker=new google.maps.Marker();
  marker.setPosition(coords);
  marker.setMap(map);
  directionsDisplay.setMap(map);

}

function calcRoute(startloc,endloc) {

  var start = new google.maps.LatLng(startloc[0],startloc[1]);
  var end =new google.maps.LatLng(endloc[0],endloc[1]);
  var request = {
    origin:start,
    destination:end,
    travelMode: google.maps.TravelMode.DRIVING
  };
 alert("satatus"+directionsService);
  directionsService.route(request, function(result, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      directionsDisplay.setDirections(result);
    }
    else
     {
       alert("error in status"+status);
     }
  });
}

   function getlonglat(address){
 var loc3=[];
 geocoder.geocode( { 'address': address}, function(results, status) {

    if (status == google.maps.GeocoderStatus.OK) {
    loc3[0]=results[0].geometry.location.lat();
    loc3[1]=results[0].geometry.location.lng();

  } 
  else {
    alert("Geocode was not successful for the following reason: " + status);
       }
});
 return loc3;

}

   function codeAddress() {

var address1 = document.getElementById("routeStart").value;
var address2 = document.getElementById("routeEnd").value;

var loc1=getlonglat(address1);    
var loc2=getlonglat(address2);

    setTimeout(function() {calcRoute(loc1,loc2);},800);

  }

    function fail()
    {
         var err=document.getElementById("error_view");
          err.innerHTML="An unknown error occurred."
    }

    <!DOCTYPE HTML>
  <html>
  <head>
  <title>Basic GeoLocation Map</title>
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
 <script type="text/javascript" src="http://maps.google.com/maps/api       /js?libraries=places&sensor=false"></script>
 <script src="map.js" type="text/javascript"></script>

 </head>
 <body onload="initGeolocation();">
 <p id="error_view"></p>
 <div id="map_canvas" style="width: 600px; height: 400px; border-right: 1px solid     #666666;    border-bottom: 1px solid #666666; border-top: 1px solid #AAAAAA; border-left:     1px solid #AAAAAA;"></div>
 <br><br>
 <form action="#" onSubmit="codeAddress();return false;" id="routeForm">
   <label>
      From: <br />
     <input type="text" id="routeStart" >

    </label>
      <label><br />
  To: <br />
  <input type="text" id="routeEnd"  >
   </label>
     <script>

            var autocomplete1 = new google.maps.places.Autocomplete($("#routeStart")[0], {});
            var autocomplete2 = new google.maps.places.Autocomplete($("#routeEnd")[0], {});

          google.maps.event.addListener(autocomplete1, 'place_changed', function() {
            var place = autocomplete1.getPlace();
            console.log(place.address_components);
        });

        google.maps.event.addListener(autocomplete2, 'place_changed', function() {
            var place = autocomplete2.getPlace();
            console.log(place.address_components);
        });
       </script>

   <input type="submit" value="Calculate route">
  </form>

  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:17:56.457

通过将 html 和 javascript 放在同一页面上解决

# grep - 使用 grep 进行模式匹配时保持行结构

> ID：14999440
> 
> 赞同：1
> 
> 时间：2013-02-21T10:06:15.550
> 
> 标签：grep

我有一个关于 grep 的问题。我正在寻找多行文本中的特定模式。同一行通常有多个匹配项。我已经弄清楚如何提取我的模式，但是 grep 将每个匹配项放在一个新行上。有什么办法可以阻止 grep 这样做吗？理想情况下，我希望提取所有匹配项并保留原始文件的行结构。

这是一个例子：

一个输入行（其中有数千行）：

```
MUC3A|ENST00000414964[in] MUC3A|ENST00000422757[in] MUC3A|ENST00000319509[in] MUC3A|ENST00000483133[in] RP11-395B7.2.1|ENST00000420080[me] RP11-395B7.2.1|ENST00000438198[me] RP11-395B7.2.1|ENST00000434775[5g] MUC12|ENST00000536621[5g] MUC12|ENST00000379442[5g] MUC3A|ENST00000480291[5g] 
```

我的 grep 命令：

```
grep -oe MUC12[\|A-Za-z0-9-]*\[[A-Za-z0-9]*\] 
```

我当前的输出：

```
MUC12|ENST00000536621[5g]
MUC12|ENST00000379442[5g] 
```

我的理想输出：

```
MUC12|ENST00000536621[5g] MUC12|ENST00000379442[5g] 
```

有任何想法吗？我将非常感谢任何人可以提供的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:07:11.673

```
$ awk '{
   s=""
   for (i=1;i<=NF;i++) {
      if ($i ~ /MUC12[\|A-Za-z0-9-]*\[[A-Za-z0-9]*\]/) {
         printf "%s%s",s,$i
         s=" "
      }
   }
   print ""
}' file
MUC12|ENST00000536621[5g] MUC12|ENST00000379442[5g] 
```

我会稍微更改您的 RE 以锚定表达式，使用字符类而不是显式范围以实现简洁和可移植性，并查找 1 个或多个字符 (+) 而不是允许零 (*)：

```
$ awk '{
   s=""
   for (i=1;i<=NF;i++) {
      if ($i ~ /^MUC12\|[[:alnum:]-]+\[[[:alnum:]]+\]$/) {
         printf "%s%s",s,$i
         s=" "
      }
   }
   print ""
}' file
MUC12|ENST00000536621[5g] MUC12|ENST00000379442[5g] 
```

我也移动了“|” 在字符列表之外，因为它似乎不属于您发布的示例输入中的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T15:55:02.513

当您设置`-o`标志时，`grep`将在新行上分别打印每个匹配项，并且无法更改此行为。简单的解决方法是`grep`打印出每场比赛的行号，然后加入连续编号的行。您可以使用它`awk`来执行此操作。像这样运行：

```
< file grep -one "MUC12[\|A-Za-z0-9-]*\[[A-Za-z0-9]*\]" | awk -f script.awk 
```

内容`script.awk`：

```
BEGIN {
    FS=":"
}

$1 == y {
    sub(/[^:]+:/,"")
    r = (r ? r OFS : "") $0
    next
}

x {
    print x, r
    r=""
}

{
    x=$0
    y=$1
    sub(/[^:]+:/,"",x)
}

END {
    print x, r
} 
```

或者，这是单线：

```
< file grep -one "MUC12[\|A-Za-z0-9-]*\[[A-Za-z0-9]*\]" | awk -F ":" '$1 == y { sub(/[^:]+:/,""); r = (r ? r OFS : "") $0; next } x { print x, r; r="" } { x=$0; y=$1; sub(/[^:]+:/,"",x) } END { print x, r }' 
```

这里介绍的方法可以应用于任何由`grep`. 与公认的答案不同，这种方法对于非空格分隔的正则表达式不会失败 - 这可能*非常*重要。

# postgis - PostGIS：两个地理区域之间的 ST_Intersects()，有时返回错误结果

> ID：14999443
> 
> 赞同：2
> 
> 时间：2013-02-21T10:06:23.840
> 
> 标签：postgis, geography, intersect

我在 PostGIS 中的两个地理区域之间存在交叉问题：我有一个带有地理列的 table1，在 wgs84 中填充了多个多边形（每行一个）。第二个表 2 也有一个地理列，其中填充了 wgs84 中的多个多边形（每行一个）。然后我在两者之间做一个相交 (select (..) where ST_Intersects())。

在某些（非常罕见的）情况下，在我看来，它不能正常工作，因为相交在预期为真的地方返回 false：我有一个重新投影的 tif，它代表 table1 中的一条线的地理，它覆盖了很大的区域坦桑尼亚。我还为表 2 中的一条线重新投影了 tif，它只覆盖了几平方公里的小区域。在 ArcMap 中，两者相交，小区域位于大区域的边缘，但 PostGIS 对 ST_Intsersects(geog1, geog2) 返回 false。

当我通过倾卸器将 table1 导出为 shapefile 时，地理的角点与直线相连，而不是与大圆圈的一部分相连。然后我得到相同的结果：table2 的区域现在在 table1 的区域之外。所以我想，PostGis 也用这个简化的多边形进行计算，但据我所知，地理是用大圆的一部分而不是直线来计算的？

我已经尝试了一切以确保两个表都真正填充了地理而不是几何，但即使是明确地转换为地理也不会改变结果。

以前是否发生过类似的事情，或者您知道我做错了什么？table2 还具有几何和栅格列（总共 = 3 个空间列）可能是一个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T06:10:27.437

在没有看到您的实际几何形状的情况下，我不能肯定地说，但几乎可以肯定的是，您误解了大圆线将如何限制您的区域，而 PostGIS 做得对，尤其是在您处理边界附近的关系时。使用 Google 地球线串（不是多边形，这些不是使用大圆圈渲染的）来可视化示例有时有助于阐明事物的视觉工作方式。

# svn - 如何为已删除/重命名/移动的文件创建补丁文件？

> ID：14999445
> 
> 赞同：7
> 
> 时间：2013-02-21T10:06:26.580
> 
> 标签：svn, tortoisesvn, patch

我正在使用 TortoiseSVN。[如此处](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-patch.html)所示，我可以对修改后的文件使用`Create patch`和，它工作正常。`Apply patch`

但是，当我删除、重命名或移动某个文件时，请选择`Create patch`. 补丁文件为空。

有人[在这里](https://stackoverflow.com/questions/317649/how-to-make-svn-diff-produce-file-that-patch-would-apply-when-svn-cp-or-svn-mv)问，但答案并不令人满意。另外，我不想要命令行解决方案。

假设我正在创建一张票，告诉源所有者删除、重命名或移动某些文件。如何克服这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2018-06-29T10:10:18.543

它通常应该工作。但请确保选择在创建补丁时已删除的文件/文件夹。右键单击项目->选择“创建补丁”->现在确保**在单击确定之前选择已删除的文件/文件夹**

# button - Tkinter 艰难地学习如何使用 pack 和 grid

> ID：14999449
> 
> 赞同：-1
> 
> 时间：2013-02-21T10:06:35.240
> 
> 标签：button, grid, tkinter, label, python-imaging-library

这是我关于堆栈溢出的第一篇文章。在谷歌搜索信息一整天后，我整理了我的第一个 python Tkinter 软件。当我运行我的第一个软件时，令我非常沮丧的是，tkinter 一直在思考它自己，没有产生任何错误或显示任何东西。我决定在堆栈溢出时发布我的代码。

请阅读我的 Python 代码 # 解释 Python 的工作原理：

```
#load the normal drivers
import Tkinter
from Tkinter import *
import Tkinter as tk
import tkMessageBox
from PIL import Image, ImageTk
from Tkconstants import *
# this makes the master app window
master = Tk()
master.geometry('+0+0')
master.wm_title("App Window")
frame = Frame(master, height=300, width=700, background="black")
frame.pack_propagate(0)
#intro image on the right column
img = ImageTk.PhotoImage(file="1.gif")
panel = tk.Label(master, image = img).grid(row = 1, column = 2)
#code to put Buttons into the left column Label
panel2 = tk.Label().grid(row = 1, column = 1)
#onClick commands I will work on Later.
def onClick1():
    master.image = PhotoImage(file="captain_scarlett.gif")
    w = Label(master, image=master.image)
    w.photo = master
    w.pack(side=RIGHT) 
def onClick2():
    photo = PhotoImage(file="1.gif")
    w = Label(master, image=photo)
    w.photo = photo
    w.pack(side=RIGHT)
def onClick3():
    photo = PhotoImage(file="1.gif")
    w = Label(master, image=photo)
    w.photo = photo
    w.pack(side=RIGHT)
def onClick4():
    photo = PhotoImage(file="1.gif")
    w = Label(master, image=photo)
    w.photo = photo
    w.pack(side=RIGHT)
#these are the Buttons that go into left column      
master.Button1 = Button(panel2, text="captain_scarlet",  fg="#000",    
width=17, background="yellow", command=onClick1) 
master.Button2 = Button(panel2, text="Page 2",  fg="#000", width=17,    
background="yellow", command=onClick2)
master.Button3 = Button(panel2, text="Page 3",  fg="#000", width=17,   
background="yellow", command=onClick3)
master.Button4 = Button(panel2, text="Page 4",  fg="#000", width=17,   
background="yellow", command=onClick4)
#normal exiting commands    
frame.pack()
master.mainloop() 
```

我得到的答案改变了我对 Tkinter 如何工作和形成的整体理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:24:10.050

我最好告诉你我的问题的答案我必须转换这个包代码

```
def onClick1():
    master.image = PhotoImage(file="captain_scarlett.gif")
    w = Label(master, image=master.image)
    w.photo = master
    w.pack(side=RIGHT) 
```

并使代码在网格上可用，而不会让 Tkinter 头疼

```
def but1():
    img = Image.open("captain_scarlett.gif")
    intro = ImageTk.PhotoImage(img)
    right = Label(win, image=intro)
    right.grid(row=0, column=1, rowspan=14)
    right.image=intro 
```

我希望这些信息能帮助人们摆脱我在以后某个时间陷入的 Tkinter 陷阱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:04:18.337

您的问题是您正在混合`grid`并`pack`在同一个窗口中。你不能这样做。其中之一将根据其规则控制并调整小部件的大小。然后，另一个会看到一个或多个小部件已更改大小并尝试根据新大小重新调整。这可能会导致其他一些小部件改变大小，导致第一个小部件注意到并重新调整。这将永远持续下去。

您可以在同一个应用程序中混合使用`grid`，`pack`但不能同时使用它们来控制同一个包含的小部件。

# java - Android上的软键盘

> ID：14999457
> 
> 赞同：2
> 
> 时间：2013-02-21T10:06:57.910
> 
> 标签：java, android, android-softkeyboard

应用程序中有 4 种不同的活动。在传递活动时，软键盘会自动打开。为了解决这个问题，我使用了

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN); 
```

但是这次当我为editText打开键盘时，键盘会覆盖我在活动底部使用的布局。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:10:22.933

在您的清单文件中添加`android:windowSoftInputMode="stateHidden"`

```
<activity android:name=".YourActivity"
         android:windowSoftInputMode="stateHidden|adjustResize"> 
```

查看开发人员[文档](http://developer.android.com/guide/topics/manifest/activity-element.html)以获取更多详细信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T10:14:30.503

试试这个，

`manifestfile.xml`在您的.all中添加此代码`Activity`

```
 android:windowSoftInputMode="stateHidden|adjustResize" 
```

# java - 类型参数的意义是什么？为什么我们需要在返回类型中添加一次，然后在修饰符和返回类型之间添加？

> ID：14999459
> 
> 赞同：2
> 
> 时间：2013-02-21T10:07:03.517
> 
> 标签：java, generics

考虑这个通用方法取自`Effective Java:`

```
 // Generic method
    public static <E> Set<E> union(Set<E> s1, Set<E> s2) {
     Set<E> result = new HashSet<E>(s1);
     result.addAll(s2);
     return result;
    } 
```

而这个方法来练习上面的通用方法：

```
// Simple program to exercise generic method
public static void main(String[] args) {
 Set<String> guys = new HashSet<String>(
 Arrays.asList("Tom", "Dick", "Harry"));
 Set<String> stooges = new HashSet<String>(
 Arrays.asList("Larry", "Moe", "Curly"));
 Set<String> aflCio = union(guys, stooges); //What does the type parameter help here?
 System.out.println(aflCio);
} 
```

如果我们没有提供类型参数，即`<E>`在修饰符和返回类型之间，我们仍然可以不将`aflCio`类型的引用分配给`Set<String>`联合方法的返回值吗？在这里购买我们的类型参数是什么？

我很难理解以下段落：

> 泛型方法的一个值得注意的特性是，您不需要像调用泛型构造函数时那样显式指定类型参数的值。编译器通过检查方法参数的类型来计算类型参数的值。在上面的程序中，编译器看到 union 的两个参数都是 Set 类型，所以它知道类型参数 E 必须是 String。这个过程称为类型推断。

我们不是将返回类型中的类型参数提到为`Set<E>`. 那么为什么我们需要再次添加它呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T10:10:49.820

也许理解这一点的最简单方法是考虑替代方案。如果不使用[泛型方法](http://docs.oracle.com/javase/tutorial/extra/generics/methods.html)，则必须为`Set`.

`Object`不是一个有效的选择，因为您不想`Set<Object>`从您的方法中接收 a - 您不能将其分配给 a `Set<String>`：

```
// Nope 
public static Set<Object> union(Set<Object> s1, Set<Object> s2) {
  Set<Object> result = new HashSet<Object>(s1);
  result.addAll(s2);
  return result;
} 
```

通配符`?`类型也不合适。同样，您无法将其分配给`Set<String>`.

相反，Java 定义了一个通用方法的语法，该方法正是为这种情况而设计的。

```
public static <E> Set<E> union(Set<E> s1, Set<E> s2) {
  Set<E> result = new HashSet<E>(s1);
  result.addAll(s2);
  return result;
} 
```

现在我们不关心在 中存储什么类型`Set`，只要在两个输入中使用相同的类型。然后编译器知道`Set<String>`如果输入是`Set<String>`s，则返回类型将是。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T10:24:53.603

如果您要问为什么必须编写`<E>`，那是因为这正是 Java 通用语法的定义方式。否则它不会编译，因为在这种情况下必须声明类型参数。

如果您要问绑定完成了什么：它所做的最相关的事情是确保两个参数是`Set`同一事物的 s 并且返回值包含相同类型的事物。

没有这个，您当然仍然可以设法合并两组字符串。毕竟人们在 Java 1.4 的日子里管理它。但是编译器无法为您检查。没有这个，您仍然可以将结果转换为正确的泛型类型，但是，您必须进行转换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T10:19:39.343

参数`<E>`让编译器知道您不会在`List<E>`like中指定真实的类名`List<String>`，而是使用类型变量 E

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T10:28:26.443

这给你带来了`TypeSafety`。`TypeSafety`确保

*   传递的参数和函数的返回类型是正确的数据类型。
*   一个类处理正确数据类型的对象。

这在您必须使用其他开发人员编写的类和函数的大型项目中非常重要。无需深入研究函数或类定义，您就可以传递/获取正确数据类型的对象，而不必担心由于`ClassCastExceptions`.

# c# - 我收到此错误“查询值和目标字段的数量不同。”

> ID：14999463
> 
> 赞同：-2
> 
> 时间：2013-02-21T10:07:12.497
> 
> 标签：c#, .net, oledb

我收到了这个错误：

> 语法错误 INSERT INTO 语句

这是正确的另一个是 SQL 对不起

```
//Server Connection
private void ServerConnect()
{
    string ConnString;
    ConnString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=PLAN.accdb";
    TConn = new OleDbConnection(ConnString);
    TConn.Open();
    MessageBox.Show("You Are Connected.");
    TConn.Close();
}

//ADD MEMOS
private void GetMemoList()
{
    string query;
    DataSet ds = new DataSet();
    query = "SELECT MEMO_ID,DATE,TIME,MEMOS FROM TBLMEMO ORDER BY DATE ASC";
    OleDbDataAdapter da = new OleDbDataAdapter(query, TConn);
    da.Fill(ds);
    this.dgv1.DataSource = ds.Tables[0];
}

private void AddMemo(string MemoDate, string MemoTime, string Memos)
{
    TConn.Open();

    string acc;
    acc = "INSERT INTO TBLMEMO (DATE,TIME,MEMOS) VALUES (@Memodate,@MemoTime,@Memos)";
    OleDbCommand cmd = new OleDbCommand(acc, TConn);
    cmd.Parameters.AddWithValue("@memDate", MemoDate);
    cmd.Parameters.AddWithValue("@memTime", MemoTime);
    cmd.Parameters.AddWithValue("@memos", Memos);
    cmd.ExecuteNonQuery();
    TConn.Close();
}

private void btnAddMemos_Click(object sender, EventArgs e)
{
    AddMemo(this.dtpDate.Value.ToShortDateString(), this.dtpTime.Value.ToShortTimeString(), this.txtInfo.Text.Trim());
    GetMemoList();
    txtInfo.Clear();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:19:52.183

表的主键可能未设置为自增

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:08:44.587

表 TBLMEMO 中可能包含三个以上的字段，但您只插入了 3 个字段。这就是为什么您会收到此错误“查询值和目标字段的数量不一样”。

尝试

```
"INSERT INTO TBLMEMO(COLUMNNAME1, COLUMNNAME2, COLUMNNAME3) VALUES ('" + MemoDate + "','" + MemoTime + "','" + Memos + "')"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:15:51.527

始终在 INSERT 语句中指定目标列。您还需要在语句中使用参数来避免 Sql 注入攻击。

```
var acc = "INSERT INTO TBLMEMO (DATE, TIME, MEMOS) VALUES (@date, @time, @memos)";
TConn.Open();
var cmd = new SqlCommand(acc, TConn);
cmd.Parameters.AddWithValue("date", MemoDate);
cmd.Parameters.AddWithValue("time", MemoTime);
cmd.Parameters.AddWithValue("memos", Memos);
cmd.ExecuteNonQuery();
TConn.Close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T10:09:55.033

尝试在查询中指定您的字段

```
acc = "INSERT INTO TBLMEMO (fld1Name, fld2Name, fld3Name) VALUES ('" + MemoDate + "','" + MemoTime + "','" + Memos + "')"; 
```

# windows-phone-7 - 如何从 app.xml 中读取资源

> ID：14999469
> 
> 赞同：0
> 
> 时间：2013-02-21T10:07:25.897
> 
> 标签：windows-phone-7

我在 app.xml 中定义了一些资源

```
<Application.Resources>
    <maps:MapGlobalSettings x:Key="MapGlobalSettings" ApiKey="1234567890" />
</Application.Resources> 
```

如何从代码中读取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:14:42.897

您可以阅读全球资源，例如

```
App.Current.Resources["MapGlobalSettings"] 
```

它返回对象，因此您必须将其转换为原始类型

# java - 关于按子类覆盖类的方法的案例

> ID：14999471
> 
> 赞同：-1
> 
> 时间：2013-02-21T10:07:27.593
> 
> 标签：java

我开发了下面的类，如下所示

```
class Ab {
    int i = 10; 
    static void getF() {
        System.out.println("I am good");
    }
}
class Hamm extends Ab {
    int i = 10; 
    static void getF() {
        System.out.println("I am good and bad boy");
    }
    public static void main(String[] args) {
         //Hamm h = new Hamm();      
        // h.getF(); //Ham
        Ab a = new Hamm();  //reference of parent class
        //a.getF(); // Ab class

    }
} 
```

现在我的查询是否存在任何情况，我得到的是 Ab 类的变量 i，但 Hamm 类的方法 getF()，请告知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:12:03.993

将方法声明为非静态的。无论如何，您都将其用作实例方法。静态方法不能被覆盖。

这是一个工作示例：

```
class Ab {
    int i = 10; 
    void getF() {
        System.out.println("I am good");
    }
}
class Main extends Ab {
    int i = 10; 
    @Override
    void getF() {
        System.out.println("I am good and bad boy");
    }
    public static void main(String[] args) {
         //Hamm h = new Hamm();      
        // h.getF(); //Ham
        Ab a = new Main();  //reference of parent class
        a.getF(); // Ab class

    }
} 
```

还有一个关于[ideone](http://ideone.com/dgB40O)的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:10:53.180

创建 的实例时`Hamm`，该实例将使用子类上定义的变量和方法，`Hamm`因为它们将覆盖父类的方法/字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:11:43.743

静态方法和类变量（属性）不能像实例方法（非静态方法）一样被覆盖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T10:12:38.157

java中的方法是多态的。如果您了解 C++，则认为所有非静态方法都是“虚拟的”。这意味着将调用实际的实现，例如，在您的情况下，实现是在 class 中完成的`Hmmm`。

但是，字段不是多态的，因此`a.i`返回`i`属于`Ab`class 的变量，因为`a`它是 type 的变量`Ab`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T10:14:24.250

我认为您的问题是因为您已将方法设为静态，从而隐藏了子类的方法。因此，每次调用该方法时，都会执行父类中的方法。顺便说一句，既然您在两个地方都将变量“i”初始化为 10，那么您怎么知道值来自哪里？

# php - 谷歌云存储服务帐号访问未配置

> ID：14999474
> 
> 赞同：4
> 
> 时间：2013-02-21T10:07:41.497
> 
> 标签：php, google-cloud-storage

我正在开发一个自动将 PDF 文档上传到 Google 云存储桶的 PHP 脚本。

我正在使用 Google 的云存储服务帐户。

我得到的结果是：错误调用 GET [https://www.googleapis.com/storage/v1beta1/b/](https://www.googleapis.com/storage/v1beta1/b/) ..: (403) 未配置访问

我正在使用的 PHP 代码（php google api 客户端库）如下：

```
$clientID = 'MY CLIENT ID';
$keyFile = 'PATH\TO\KEYFILE\key.p12';
$key_secret = 'MY KEY SECRET';

$client = new Google_Client();
$client->setClientId($clientID);
$client->setApplicationName("Google Cloud Storage Sample");
$client->setScopes('https://www.googleapis.com/auth/devstorage.full_control');

$key = file_get_contents($keyFile);
$client->setAssertionCredentials(new Google_AssertionCredentials(
    'service account name',
    array('https://www.googleapis.com/auth/devstorage.full_control'),
    $key,$key_secret)
);

$storageService = new Google_StorageService($client);
try 
{
   $bucket = $storageService->buckets->get('my_bucket');

}      
catch (exception $e)
{
    print $e->getMessage();
}

Thanks for any support on this one. 
```

# bash - Bash - 在所有子文件夹中用 oaa 替换 ö å ä

> ID：14999475
> 
> 赞同：0
> 
> 时间：2013-02-21T10:07:48.653
> 
> 标签：bash, replace

我有一个名为 data 的文件夹，其中的文件夹包含带有 å ö ö 的名称，我需要一个脚本来将这些文件夹 naames 中的所有 å ö ö 替换为 aa ö。示例：在“Folder1 - ö - å”之前 之后：“Folder1 - o - a”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:22:16.847

存在各种`rename`命令。其中之一使用语法

```
rename ö o * 
```

第二个使用

```
rename s/ö/o/g * 
```

用于`man rename`找出您的系统有哪一个。

第一个可以实现为 bash 函数：

```
Rename () { 
    if (($# < 3)); then
        echo Usage: Rename from to files... 1>&2;
        return 1;
    fi;
    from="$1";
    to="$2";
    shift 2;
    for file in "$@";
    do
        mv "$file" "${file/$from/$to}";
    done
} 
```

请注意，它仅替换第一次出现的子字符串。如果要替换所有匹配项，请使用`${file//$form/$to}`.

## 谨防！

有几种方法可以在 Unicode 中结束编码 ö。因此，它可以是 utf-8 `c3 b6`，也可以是`6f cc 88`. 如果您的文件系统使用 unicode，您可能必须尝试所有可能性。

# c# - 使用 AppDomain.CreateInstance 时，实例的包装器是什么？

> ID：14999483
> 
> 赞同：2
> 
> 时间：2013-02-21T10:08:10.530
> 
> 标签：c#, .net, appdomain

可能是一个基本问题：

我经历了这个，

```
secondDomain.CreateInstance("AssemblyA", "AssemblyA.Demo", true,
    System.Reflection.BindingFlags.CreateInstance, null, 
    new object[] { 7, 3 }, null, null); 
```

并以评论的形式查看了解释。

```
 // Returns:
    //     An object that is a wrapper for the new instance specified by typeName. The
    //     return value needs to be unwrapped to access the real object. 
```

MSDN：[AppDomain.CreateInstance 方法](http://msdn.microsoft.com/en-us/library/023e4w79%28v=vs.85%29.aspx)。

在这种情况下，对象的包装器是什么？为什么使用这个？如何解开这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:16:37.677

您可以将包装器视为指向另一个对象的“c”或“c++”指针。您可以使用[Unwrap](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.objecthandle.unwrap.aspx)方法将其解包：

```
MyType testObj = (MyType) obj.Unwrap(); 
```

有关更多信息，请参阅[此链接](http://msdn.microsoft.com/en-gb/library/system.runtime.remoting.objecthandle.aspx)。

# java - ProcessBuilder 找不到指定的文件，而 Process 可以

> ID：14999489
> 
> 赞同：4
> 
> 时间：2013-02-21T10:08:33.473
> 
> 标签：java, process, processbuilder

我正在尝试从 Java 程序运行 jar 文件，并且成功使用`getRuntime()`：

```
Process processAlgo = Runtime.getRuntime().exec("java -jar "+algoPath); 
```

但是，当我尝试使用时`ProcessBuilder`，出现`The system cannot find the file specified`异常：

```
ProcessBuilder builder = new ProcessBuilder("java -jar " + algoPath);
Process processAlgo = builder.start(); 
```

我试图更改指定文件的位置并指出其完整路径，但它不起作用。什么可能导致问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T10:13:47.430

`ProcessBuilder`期望它的参数单独传入。

也就是说，对于每个命令和参数，都`ProcessBuilder`希望将其视为单独的参数。

目前，您告诉它运行“java -jar algoPath 的值是什么”......从`ProcessBuilder`的角度来看，这是一个无效命令。

尝试...

```
ProcessBuilder builder = new ProcessBuilder("java",  "-jar", algoPath);
Process processAlgo = builder.start(); 
```

反而。

如果`algoPath`包含空格（即多于一个参数），它们也需要分隔成单独的参数，否则您的程序将无法执行，因为 Java 会将`algoPath`视为单个参数。

检查[JavaDocs](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)以获取更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-27T19:11:25.010

是的，“java”应该是您的第一个参数，并且每个其他参数都必须在其他参数中发送。

我在执行“bash /path/script.sh arg1 arg2”这一行时遇到问题...因为我传递的第一个参数是“bash /path/script.sh”、“arg1”、“arg3”...得到 Exception: Command not found by JAVA。

当我在参数中分离每个元素时，然后工作正常。“bash”、“/路径/脚本”、“arg1”、“arg2”。

# javascript - JS 嵌套函数

> ID：14999491
> 
> 赞同：1
> 
> 时间：2013-02-21T10:08:37.640
> 
> 标签：javascript

我正在使用嵌套函数

```
Function mainfunction (callbackfun) {
    //some code + function (score)
    {
        var score = scoreString;
        alert(scoreString);
        callbackFun(score);
    }
}  //--> I return this value to my calling function

mainfunction(function (anystring){
    alert(anystring);  //-> this would return me the value in callbackfun 
}); 
```

我想要的是`anystring`像

```
var fetchvalue ;

mainfunction(function (anystring){
    fetchvalue =anystring;  //-> this would return me the value in callbackfun 
}); 
```

如果我在正确的轨道上，请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:14:59.023

稍微整理一下您的代码，更正拼写错误等......，并观察输出`mainfunction`给您这个工作脚本。很难判断这是否回答了您的问题，但它确实将变量发送到回调函数，然后从该回调中获取返回值。

```
function mainfunction(callbackfun){
  //some code + function (score)
  var scoreString = Math.random()*10000000

  var score = scoreString;
  alert(callbackfun(score));

}; //  --> i return this value to my calling function

mainfunction(function(anystring){
  return anystring;  //-> this would return me the value in callbackfun 
}); 
```

# c++ - 如何在 C++ 中使用自定义消息抛出 std::bad_alloc？

> ID：14999496
> 
> 赞同：3
> 
> 时间：2013-02-21T10:08:45.053
> 
> 标签：c++, bad-alloc

由于 VS2008 类 bad_alloc 不提供带有字符串参数的构造函数。有没有可能在不覆盖这样的类的情况下创建自定义消息？

```
// this is only pseudo-code
class custom_exception : bad_alloc {
public:
    string Message;
    custom_exception(string m) {Message = m;}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T10:40:42.477

`bad_alloc`需要在不分配内存的情况下可构造，这就是为什么它的构造函数不带消息参数的原因。您当然可以将其子类化并覆盖`what`。

# c# - 如何让我的 HTML 页面适合 win 表单中的 Web 浏览器？

> ID：14999500
> 
> 赞同：0
> 
> 时间：2013-02-21T10:09:06.157
> 
> 标签：c#, winforms, webbrowser-control

我可以在一个简单的网络浏览器中导航到谷歌（在父控件中使用文档），但是对于我的组件大小，我得到的分辨率太高了。

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:36:31.227

请给我们截图。我刚刚制作了一个新的 winforms 应用程序，只有以下代码隐藏（设计器中没有）

```
 public partial class Form1 : Form
{
    WebBrowser wb = new WebBrowser();
    public Form1()
    {
        InitializeComponent();
        this.Controls.Add(wb);
        wb.Dock = DockStyle.Fill;
        Load += OnLoad;
    }

    private void OnLoad(object sender, EventArgs eventArgs)
    {
        wb.Navigate("http://www.google.de");
    }
} 
```

一切正常

# java - 需要根据一些业务逻辑设置多个handler

> ID：14999503
> 
> 赞同：2
> 
> 时间：2013-02-21T10:09:11.517
> 
> 标签：java, html, jetty, embedded-jetty

我是码头的新手，我正在尝试将 HTML5 的 FileSystem API 调用转发给客户端，因为当它们从 JRE 接收时，这是一个构建 Web 文件系统的雄心勃勃的项目。到目前为止，单个处理程序可以提供一个 java 脚本页面，例如调用文件的最后修改日期。我希望能够调用不同的处理程序，这些处理程序将提供 getFilesize、getFileName 等 java 脚本，那么如何让单个码头服务器临时执行不同的处理程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:33:52.430

多个 Jetty 处理程序是可能的，因为处理程序隐喻只是一棵处理程序树。

有关其工作原理的一些详细信息，请参阅问题[嵌入式 Jetty 重写无法正常工作](https://stackoverflow.com/a/14468007/775715)的先前答案。

有关更具体的示例，请查看[ManyHandlers 嵌入式码头示例](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/examples/embedded/src/main/java/org/eclipse/jetty/embedded/ManyHandlers.java)。

# ruby - 在 Ruby 中将基类转换为子类

> ID：14999505
> 
> 赞同：1
> 
> 时间：2013-02-21T10:09:15.093
> 
> 标签：ruby

在红宝石中

```
class A
  @x = 1
  @y = 2
  attr_accessor :x, :y
end

class B < A
  @z = 3
  attr_accessor :z
end

a = A.new
b = B.new 
```

[1] 将A(a)的一个实例转换为B？在不丢失 C++ 中任何 A 的成员值的情况下，会有 static_cast、reinterpret_cast、“convert”运算符等。如何在 ruby​​ 上执行此操作？（有没有捷径），例如

```
b = a.convert_to B
# b.x = 1
# b.y = 2
# b.z = 3 
```

[2] 如果继承了很多数据成员，如何使用a的值覆盖B(b)实例的每个继承的数据成员值？（是否有内置的方法或快捷方式来执行此操作？）例如

```
a.x = 1
a.y = 2

b.x = 3
b.y = 4
b.z = 6

b.overwrite_all_inherited_method_from a
# b.x = 1
# b.y = 2
# b.z = 6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-01T13:22:31.503

像这样？

```
class A
  attr_accessor :x, :y

  def copy other
    other.instance_variables.each do |v| 
      instance_variable_set v, other.instance_variable_get(v)
    end
  end
end

class B < A
  attr_accessor :z
end

a = A.new
a.x = 1
a.y = 2

b = B.new
b.z = 3

puts a.inspect, b.inspect
#<A:0x0000010127f3d8 @x=1, @y=2>
#<B:0x0000010127f3b0 @z=3>

b.copy a

puts a.inspect, b.inspect
#<A:0x0000010127f3d8 @x=1, @y=2>
#<B:0x0000010127f3b0 @z=3, @x=1, @y=2> 
```

# java - 将字符串日期转换为字符串日期不同格式

> ID：14999506
> 
> 赞同：19
> 
> 时间：2013-02-21T10:09:15.257
> 
> 标签：java, simpledateformat, date-conversion

我是 Java 新手。Postgres db 包含日期格式为`yyyy-MM-dd`. 我需要转换为`dd-MM-yyyy`.

我试过这个，但错误的结果是显示

```
 public static void main(String[] args) throws ParseException {

    String strDate = "2013-02-21";
      DateFormat formatter = new SimpleDateFormat("dd-MM-yyyy");
      Date da = (Date)formatter.parse(strDate);
      System.out.println("==Date is ==" + da);
      String strDateTime = formatter.format(da);

      System.out.println("==String date is : " + strDateTime);
} 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-21T10:12:17.453

```
SimpleDateFormat format1 = new SimpleDateFormat("yyyy-MM-dd");
SimpleDateFormat format2 = new SimpleDateFormat("dd-MM-yyyy");
Date date = format1.parse("2013-02-21");
System.out.println(format2.format(date)); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-21T10:10:56.317

您需要使用两个`DateFormat`实例。一个包含输入字符串的格式，另一个包含输出字符串的所需格式。

```
public static void main(String[] args) throws ParseException {

    String strDate = "2013-02-21";

    DateFormat inputFormatter = new SimpleDateFormat("yyyy-MM-dd");
    Date da = (Date)inputFormatter.parse(strDate);
    System.out.println("==Date is ==" + da);

    DateFormat outputFormatter = new SimpleDateFormat("dd-MM-yyyy");
    String strDateTime = outputFormatter.format(da);
    System.out.println("==String date is : " + strDateTime);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-21T10:19:43.713

参考这些格式[Java 日期格式文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)：

![日期时间格式](../Images/4b9aeae00145d055f8837b0d52d719c6.png)

试试这个代码：

```
String myDate= "2013-02-21";
DateFormat iFormatter = new SimpleDateFormat("yyyy-MM-dd");
DateFormat oFormatter = new SimpleDateFormat("dd-MM-yyyy");
String strDateTime = oFormatter.format(iFormatter.parse(myDate)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-21T10:13:25.920

您需要一种格式来解析当前状态和一种格式来生成所需的输出。

```
String strDate  = "2013-02-21";
DateFormat to   = new SimpleDateFormat("dd-MM-yyyy"); // wanted format
DateFormat from = new SimpleDateFormat("yyyy-MM-dd"); // current format
System.out.println(to.format(from.parse(strDate))); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-06-22T14:59:12.320

尝试以下实用功能。

```
// convert String date to another string date
public String convertStringDateToAnotherStringDate(String stringdate, String stringdateformat, String returndateformat){        

        try {
            Date date = new SimpleDateFormat(stringdateformat).parse(stringdate);
            String returndate = new SimpleDateFormat(returndateformat).format(date);
            return returndate;
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            return "";
        }

}

// call function with required parameter arguments
String resultDate = convertStringDateToAnotherStringDate("2017-06-22", "yyyy-MM-dd", "dd-MM-yyyy")
System.out.println(resultDate); 
```

> **结果：** 22-06-2017

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T10:13:47.677

您正在使用相同的格式化程序来处理不同的格式。

您需要提供两个格式化程序`new SimpleDateFormat("dd-MM-yyyy");`来转换`2013-02-21`为日期对象并将日期对象`new SimpleDateFormat("dd-MM-yyyy");`格式化为字符串`21-02-2013`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-30T15:52:19.357

首先，您不应该`String`从 Postgres 数据库中获取日期。您应该将其作为表示日期的类型的对象来获取。

其次，虽然在 2013 年使用`Date`和`SimpleDateFormat`普遍合理，但日子已经过去，新的更好的日期和时间类已经问世并普遍使用。恕我直言，没有人应该再使用旧课程了，我认为它们早已过时。

要从您的数据库中获取`LocalDate`对象：`ResultSet`

```
 LocalDate da = yourResultSet.getObject(3, LocalDate.class); 
```

（我假设日期在查询的第 3 列中）。

将其格式化为`dd-MM-yyyy`：

```
 DateTimeFormatter formatter = DateTimeFormatter.ofPattern("dd-MM-uuuu");
    String strDateTime = da.format(formatter);
    System.out.println("==String date is : " + strDateTime); 
```

这将给出类似的输出

```
==String date is : 21-02-2013 
```

最后，如果您有问题中的字符串并希望将其重新格式化为所需的格式：

```
 String strDate = "2013-02-21";      
    LocalDate da = LocalDate.parse(strDate);
    System.out.println("==Date is ==" + da); 
```

这打印

```
==Date is ==2013-02-21 
```

我正在利用字符串匹配 ISO 8601 标准日期格式这一事实，这是现代日期和时间类的默认格式。所以在这种情况下，我们不需要一个显式的格式化程序来解析，就像我们解析其他格式一样。

格式化为您想要的格式就像以前一样发生。

## 旧类问题的一个例子

在我的计算机上，问题中代码的输出是

```
==Date is ==Tue Aug 06 00:00:00 CET 26
==String date is : 06-08-0026 
```

您显然得到了错误的结果，并且您不知道出了什么问题。问题是您正在使用您打算用于新字符串的格式化程序解析您*的*`2013-02-21`数据库*日期*字符串`dd-MM-yyyy`. 所以它被解析为公元 2013 年 2 月 21 日。2月不是2013天吗？使用默认设置没有问题`SimpleDateFormat`，它只是继续计算接下来的几个月和几年的天数，并在五年半后的 8 月 6 日结束，但仍处于历史的早期阶段。

如果我们尝试对现代类进行类似操作：

```
 LocalDate.parse(strDate, formatter); 
```

——我们得到`java.time.format.DateTimeParseException: Text '2013-02-21' could not be parsed at index 2`。这是因为格式化程序指示了两位数的日期，所以当解析两位数后输入字符串中有更多位时，这是一个错误，并因此报告。我认为这种行为更正确，更有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-07T07:48:23.640

您需要使用`SimpleDateFormat`实例并传递您喜欢的**日期模式。**

当前模式：`yyyy-MM-dd`

需要的模式：`dd-MM-yyyy`

现在尝试以下。它产生所需的日期格式模式。

```
public class App {
    public static void main(String[] args) {
        SimpleDateFormat format1 = new SimpleDateFormat("yyyy-MM-dd");
        SimpleDateFormat format2 = new SimpleDateFormat("dd-MM-yyyy");
        Date date = null;
        try {
            date = format1.parse("2013-02-21");
            System.out.println(format1.format(date)); //current format: 2013-02-21
        } catch (ParseException e) {
            e.printStackTrace();
        }
        System.out.println(format2.format(date)); //the format that is needed : 21-02-2013
    }
} 
```

# windows-8 - 单击按钮时，进度环不可见

> ID：14999510
> 
> 赞同：1
> 
> 时间：2013-02-21T10:09:30.697
> 
> 标签：windows-8, microsoft-metro

我的主网格中有 1 个按钮。单击按钮时，我会更改子网格的视图，比如第一次单击时我显示 1 个列表视图，第二次单击时显示 1 个带有差异数据的网格视图。同时更改我想要的视图显示进度环，因为它需要时间来加载数据。我已经完成了 1 件事是点击按钮只显示进度指示器，加载完成后只是关闭进度指示器。但它不工作。知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:31:08.297

那是因为您的所有执行都是在单个线程上完成的，UI 没有任何中断来实际呈现视图。

将逻辑拆分为 3 个部分

1) 开始动画

2）将此代码推送到 Task.Run 并等待它。

3) 结束动画

# xcode - Xcode ARC 与overlayviewcontroller 冲突

> ID：14999511
> 
> 赞同：0
> 
> 时间：2013-02-21T10:09:32.430
> 
> 标签：xcode, automatic-ref-counting

[PhotoPicker 示例代码使用覆盖视图](http://developer.apple.com/library/ios/#samplecode/PhotoPicker/Listings/OverlayViewController_h.html#//apple_ref/doc/uid/DTS40010196-OverlayViewController_h-DontLinkElementID_7)。下面是我在我的应用程序中使用的 PhotoPicker 的一些相关代码，但我想使用**ARC**，而 PhotoPicker 不使用 ARC。我想我已经设法解决了 PhotoPicker 和 ARC 之间的其他冲突，但不是这个。

当`OverlayViewController.h`我按原样使用下面的行时`id <OverlayViewControllerDelegate> delegate;`，我得到了错误`Existing ivar 'delegate' for property 'delegate' with assign attribute must be __unsafe_unretained`。

OverlayViewController.h

```
#import <UIKit/UIKit.h>
#import <AudioToolbox/AudioServices.h>

@protocol OverlayViewControllerDelegate;

@interface OverlayViewController : UIViewController <UINavigationControllerDelegate, UIImagePickerControllerDelegate>
{
    id <OverlayViewControllerDelegate> delegate;  // **THIS IS THE KEY LINE**
}    

@property (nonatomic, assign) id <OverlayViewControllerDelegate> delegate;
@property (nonatomic, retain) UIImagePickerController *imagePickerController;

- (void)setupImagePicker:(UIImagePickerControllerSourceType)sourceType;

@end

@protocol OverlayViewControllerDelegate
- (void)didTakePicture:(UIImage *)picture;
- (void)didFinishWithCamera;
@end 
```

[但是当我按照这里的建议](https://stackoverflow.com/questions/10080312/unsafe-unretained-for-a-delegate-wont-build)，或者注释掉那一行或者在那一行前面加上`__unsafe_unretained`，我就得到了问题`Cannot find protocol declaration for 'OverlayViewControllerDelegate'; did you mean 'UISplitViewControllerDelegate'?`。`MyViewController.h`

MyViewController.h

```
#import <UIKit/UIKit.h>

#import "OverlayViewController.h"

@interface MyViewController : UIViewController <UIImagePickerControllerDelegate, OverlayViewControllerDelegate>
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:19:57.650

我的问题有一个错误。很抱歉。在实际代码中，不知何故`#import "OverlayViewController.h`被省略了。

```
MyViewController.h

#import <UIKit/UIKit.h>

#import "OverlayViewController.h" 
```

# php - Sublime Text 2：自动转义引号

> ID：14999526
> 
> 赞同：0
> 
> 时间：2013-02-21T10:10:06.080
> 
> 标签：php, html, escaping

使用 Sumblime Text 2，有没有办法自动转义 HTML 块以在字符串中使用或 php 回显？

当用双引号包裹大量 HTML 时，您必须转义所有双引号，这可以通过 keybind 命令完成吗？

简单的例子：

```
 <label for="file">Filename:</label>
    <input type="file" name="uploadedfile" id="file"><br /> 
```

会成为：

```
 <label for=\"file\">Filename:</label>
    <input type=\"file\" name=\"uploadedfile\" id=\"file\"><br /> 
```

所以你可以像这样使用它：

```
 $output = "<label for=\"file\">Filename:</label>
    <input type=\"file\" name=\"uploadedfile\" id=\"file\"><br />" 
```

当然我可以只使用查找和替换，但由于这是一项常见任务，是否可以使用仅对选择执行此操作的键绑定来完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:25:21.490

为什么不使用单引号？

```
<?php     $output = '<label for="file">Filename:</label>
        <input type="file" name="uploadedfile" id="file" value="'.$filename.'"><br />';

    echo $output;

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:39:28.683

你总是可以使用替换工具来改变它：

```
<label for="file">Filename:</label>
<input type="file" name="uploadedfile" id="file"><br /> 
```

进入这个：

```
<label for='file'>Filename:</label>
<input type='file' name='uploadedfile' id='file'><br /> 
```

然后这样做：

```
$output = "<label for='file'>Filename:</label>
<input type='file' name='uploadedfile' id='file'><br />"; 
```

HTML 接受 ' 和 "。

# c# - 未收到 Azure 服务总线消息

> ID：14999527
> 
> 赞同：4
> 
> 时间：2013-02-21T10:10:09.887
> 
> 标签：c#, asp.net, azure, servicebus, azure-servicebus-queues

我正在从网络角色向工作角色发送消息。早些时候，这些消息被正确和立即接收，但现在不知从何处没有收到一些消息，即使所有消息的内容都是相同的。就像我现在发送一条消息一样，它没有收到，但在我发送另一条消息之后立即收到最新的一条。之前没有收到的消息，在几秒钟后突然收到，或者有时会随着生存时间到期而变成死信消息。

我无法弄清楚问题可能是什么，有什么想法吗？或者这种行为在服务总线上是正常的吗？

这就是我在工作角色中接收消息的方式

编辑：

```
public override void Run()
    {
        while (!IsStopped)
        {
            try
            {
                if (BroadcastReceived)
                {
                    BroadcastReceived = false;
                    // Receive the message from Web Role to upload the broadcast to queue
                    BroadcastClient.BeginReceive(OnWebRoleMessageReceived, null);
                }

                if (SignalRMessageReceived)
                {
                    SignalRMessageReceived = false;
                    // Receive the message from SignalR BroadcastHub
                    SignalRClient.BeginReceive(OnSignalRMessageReceived, null);
                }

                if (SignalRFirstTimeMessageReceived)
                {
                    SignalRFirstTimeMessageReceived = false;
                    // Receive the message from SignalR BroadcastHub
                    SignalRFirstTimeClient.BeginReceive(OnSignalRFirstTimeMessageReceived, null);
                }          
         }
     }

public void OnWebRoleMessageReceived(IAsyncResult iar)
    {
        BrokeredMessage receivedBroadcastMessage = null;
        receivedBroadcastMessage = BroadcastClient.EndReceive(iar);

        if (receivedBroadcastMessage != null)
        {
            // Process the message
           receivedBroadcastMessage.Complete();
        }
BroadcastReceived = true;
     } 
```

更新 ：

```
BroadcastClient = CloudStorageHelper.GetServiceBusQueueClient(Queuenames.ApiToWorkerRole);

public static QueueClient GetServiceBusQueueClient(string queuename)
    {
        string connectionString = CloudConfigurationManager.GetSetting("Microsoft.ServiceBus.ConnectionString");

        var namespaceManager = NamespaceManager.CreateFromConnectionString(connectionString);

        if (!namespaceManager.QueueExists(queuename))
        {
            namespaceManager.CreateQueue(queuename);
        }

        QueueClient Client = QueueClient.CreateFromConnectionString(connectionString, queuename);

        return Client;
    } 
```

网络角色：

```
var queueClient = CloudStorageHelper.GetServiceBusQueueClient(Queuenames.ApiToWorkerRole);

            //for testing purposes
            record.Username = "owner";
            record.Channel = "World";
            record.Title = "Sample";
            record.Duration = 10;

            BrokeredMessage message = new BrokeredMessage(record);

            queueClient.Send(message); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:09:51.253

之所以出现这个问题，是因为在我们的工作者角色中，我们不断检查服务总线队列以查看是否有消息到达。当我们同时启动本地和云工作者角色时，两个工作者角色都会尝试从同一个服务总线队列接收新消息。因此，有时云接受它，有时接受本地接受。

为云和本地项目使用不同的服务总线队列名称解决了该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:11:04.307

在上面的 worker 角色中，您只在 Run 中执行代码一次。所以本质上这表明每次运行工作者角色时都会处理一条消息？在循环中处理消息的典型代码如下所示：

```
 public override void Run()
    {
        while (!IsStopped)
        {
            try
            {
                // Receive the message
                BrokeredMessage receivedMessage = null;
                receivedMessage = Client.Receive();

                if (receivedMessage != null)
                {
                    // Process the message
                    receivedMessage.Complete(); // Unless you do this the message goes back in the Queue
                }
            }
            catch (MessagingException e)
            {
                if (!e.IsTransient)
                {
                    Trace.WriteLine(e.Message);
                    throw;
                }

                Thread.Sleep(10000); // optional if you want to add a delay
            }
        }
    } 
```

# python - Python - 如何读取/解析 csv 行？

> ID：14999528
> 
> 赞同：6
> 
> 时间：2013-02-21T10:10:13.503
> 
> 标签：python, parsing, csv, line

我已经进行了一些搜索，但大多数答案是关于阅读完整的 csv 文件，而这些都不像我面临的问题。

我正在尝试使用 urllib2 从网络读取文件：

```
request = urllib2.Request('http://.../tv.txt')
response = urllib2.urlopen(request)
lines = response.readlines()
for line in lines:
    ... 
```

“行”格式如下所示：

```
"ABC", "XYZ,MNO", "KLM"
"ABC", "MN"
"ABC", "123", "10", "OPPA GANGNAM STYLE", "LADY" 
```

如上所示，这些行实际上不是 CSV 行。列数不断变化。

有没有办法将每一行分成一个列表？期望的结果应该是：

```
["ABC", "XYZ,MNO", "KLM"]
["ABC", "MN"]
["ABC", "123", "10", "OPPA GANGNAM STYLE", "LADY"] 
```

我尝试使用 line.split(",") 但它无法正确拆分，因为每对双引号内都有逗号。

如果你知道怎么做，请帮助我。非常感谢你。

干杯，

PHP-Python-Java-MySQL-新手。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T10:12:39.783

使用 csv 模块，它可以满足您的需求。

```
yourstring= '"ABC", "XYZ,MNO", "KLM"\n"ABC", "MN"\n"ABC", "123", "10", "OPPA GANGNAM STYLE", "LADY"'

import csv
import io

class MyDialect(csv.Dialect):
    strict = True
    skipinitialspace = True
    quoting = csv.QUOTE_ALL
    delimiter = ','
    quotechar = '"'
    lineterminator = '\n'

b = io.StringIO(yourstring)
r = csv.reader(b, MyDialect())

for i in r:
    print len(i), ':',' @ '.join(i) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-31T10:29:41.990

```
import csv
import io

input='''"ABC", "XYZ,MNO", "KLM"
"ABC", "MN"
"ABC", "123", "10", "OPPA GANGNAM STYLE", "LADY"'''

resader = csv.reader(
    io.StringIO(input), 
    delimiter = ',', 
    quotechar = '"', 
    skipinitialspace = True,
)
for row in resader:
    print(row) 
```

将导致

```
['ABC', 'XYZ,MNO', 'KLM']
['ABC', 'MN']
['ABC', '123', '10', 'OPPA GANGNAM STYLE', 'LADY'] 
```

# delphi - VCL 样式：在最终 Builder 编译期间

> ID：14999532
> 
> 赞同：1
> 
> 时间：2013-02-21T10:10:28.570
> 
> 标签：delphi, finalbuilder

为了在运行时为我的应用程序定义 VCL 样式，我找到了以下链接[DELPHI VCL STYLES](http://theroadtodelphi.wordpress.com/category/vcl-styles/)。是否还有一个选项可以在编译过程中使用 finalbuilder 工具为我的应用程序设置 VCL 样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:40:30.730

结果我不知何故在SO上有不止一个个人资料。这是屏幕截图

![资源编译器选项](../Images/8ec5438e45d2d29ad6ff8539d69597fd.png)

# c# - 带有intel hd 3000的opentk c#上的深度纹理和fbo问题

> ID：14999535
> 
> 赞同：0
> 
> 时间：2013-02-21T10:10:34.710
> 
> 标签：c#, opengl, opentk, fbo, depth-buffer

我目前在使用英特尔高清图形硬件来实现阴影映射效果时遇到问题。我认为代码与我想要的结果相差不远，因为此代码片段在 ATI Mobility Radeon 5650 和 Nvidia NVS 4200M 上运行良好，但在 Intel HD 3000 和 4000 上不起作用。

```
 GL.GenTextures(1, out ShadowMap);
    GL.BindTexture(TextureTarget.Texture2D, ShadowMap);
    GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureMinFilter, (int)TextureMinFilter.Nearest);
    GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureMagFilter, (int)TextureMagFilter.Nearest); 
    GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureWrapS, (int)TextureWrapMode.Clamp);
    GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureWrapT, (int)TextureWrapMode.Clamp);
    GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureCompareFunc, (int)All.Lequal);
    GL.TexImage2D(TextureTarget.Texture2D, 0, PixelInternalFormat.DepthComponent32, SHADOW_MAP_SIZE, SHADOW_MAP_SIZE, 0, OpenTK.Graphics.OpenGL.PixelFormat.DepthComponent, PixelType.Float, IntPtr.Zero);

    GL.BindTexture(TextureTarget.Texture2D, 0);

    GL.GenFramebuffers(1, out FBO);
    GL.BindFramebuffer(FramebufferTarget.Framebuffer, FBO);

    DrawBuffersEnum dbe = DrawBuffersEnum.None;
    GL.DrawBuffers(0, ref dbe);

    GL.FramebufferTexture2D(FramebufferTarget.Framebuffer, FramebufferAttachment.DepthAttachment, TextureTarget.Texture2D, ShadowMap, 0);

    FramebufferErrorCode status = GL.CheckFramebufferStatus(FramebufferTarget.Framebuffer);

    GL.BindFramebuffer(FramebufferTarget.Framebuffer, 0); 
```

“status”变量表示 FramebufferIncompletReadBuffer，因此使用此 fbo 将不正确（从灯光 POV 渲染场景）。我一直在网上看到这种状态，但我没有找到解决我问题的答案。所以我在这个片段上做错了什么和/或这个 FBO 问题的起源是什么。提前致谢。PS：在着色器中，我使用 1.2 版本，我应该将 ShadowMap 纹理采样为深度图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:41:23.223

对于遇到示例问题的人，它只是更新最新的驱动程序，我在问我的问题之前考虑了这一点，但 Windows 7 告诉我我有最新的驱动程序（这是错误的）。

# batch-file - 将系统日期转换为 dd/mm/yyyy

> ID：14999537
> 
> 赞同：0
> 
> 时间：2013-02-21T10:10:42.683
> 
> 标签：batch-file

在我提出疑问之前，让我告诉我我是批处理文件的新手..

我有一个要求，我想将系统日期转换为 DD/MM/YYYY 格式，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:35:42.653

这应该可以解决问题。

[http://www.commandline.co.uk/cmdfuncs/dandt/index.html#getdate](http://www.commandline.co.uk/cmdfuncs/dandt/index.html#getdate)

```
@echo off
call :GetDate year month day
echo/Today is: %day%-%month%-%year%
goto :EOF

:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:GetDate yy mm dd
::
:: By:   Ritchie Lawrence, 2002-06-15\. Version 1.0
::
:: Func: Loads local system date components into args 1 to 3\. For NT4/2K/XP
::
:: Args: %1 var to receive year, 4 digits (by ref)
::       %2 var to receive month, 2 digits, 01 to 12 (by ref)
::       %3 Var to receive day of month, 2 digits, 01 to 31 (by ref)
:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
setlocal ENABLEEXTENSIONS
set t=2&if "%date%z" LSS "A" set t=1
for /f "skip=1 tokens=2-4 delims=(-)" %%a in ('echo/^|date') do (
  for /f "tokens=%t%-4 delims=.-/ " %%d in ('date/t') do (
    set %%a=%%d&set %%b=%%e&set %%c=%%f))
endlocal&set %1=%yy%&set %2=%mm%&set %3=%dd%&goto :EOF
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: 
```

# c++ - 如何将 Qt 与应用程序打包（但不是静态的）

> ID：14999540
> 
> 赞同：2
> 
> 时间：2013-02-21T10:10:50.887
> 
> 标签：c++, qt

我正在寻找一个 Qt 应用程序，其中包含它的 app 文件夹中所需的所有文件。虽然我不想静态编译 Qt，但是否可以在应用程序旁边分发一些 Qt 文件，而不必在每个客户端的 PC 上安装 Qt？

如果是这样：

*   应该打包哪些 Qt 文件？
*   这是 Qt 许可证允许的吗？（不是digia的商业版）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:16:57.553

查看文档：[部署 Qt 应用程序](http://qt-project.org/doc/qt-4.8/deployment.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:32:34.297

通过使用 DependenyWalker，您可以很容易地找出您必须在包中提供哪些 Qt .dll 文件。更多信息在这里： http: [//www.dependencywalker.com/](http://www.dependencywalker.com/)

它扫描可执行文件以查找对库的依赖项。

# javascript - 使用 Javascript 检索显示标签中的复选框输入

> ID：14999546
> 
> 赞同：0
> 
> 时间：2013-02-21T10:11:15.260
> 
> 标签：javascript, jsp, displaytag

我已经使用显示标记库在 JSP 文件中显示我的第一个返回结果。为了进一步处理，我需要选中的复选框值并在 Javascript 中操作它们。但是，我无法通过使用 getElementsByName() 函数来获取它们。希望这里有人可以给我一些建议以继续进行。非常感谢！

以下是我在 JSP 文件中的显示表代码：

```
<display:table name="${List}" id="row" class="displaytable">
    <display:column title="Equipment" class="fieldAlignCenter">
          <c:forEach var="deviceRow" items="${row.getDeviceList()}">
              <input type="checkbox" name="equipNo" value="${deviceRow.equipNo}">
              <c:out value="${deviceRow.equipNo}" />
          </c:forEach>
    </display:column>
</display:table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:16:07.013

像这样将id添加到输入标签

```
<display:table name="${List}" id="row" class="displaytable">
    <display:column title="Equipment" class="fieldAlignCenter">
          <c:forEach var="deviceRow" items="${row.getDeviceList()}">
              <input type="checkbox" id="equipNo_id" name="equipNo" value="${deviceRow.equipNo}">
              <c:out value="${deviceRow.equipNo}" />
          </c:forEach>
    </display:column>
</display:table> 
```

并使用`document.getElementById("equipNo_id").checked`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:14:39.887

只需确保您还为复选框分配了一个 ID。此 id 可以与名称相同。

```
<input type="checkbox" name="equipNo" id="equipNo" value="${deviceRow.equipNo}">
<script type="text/javascript">
alert(document.getElementById('equipNo').checked);
</script> 
```

# optimistic-concurrency - 基于多版本时间戳的并发控制

> ID：14999548
> 
> 赞同：3
> 
> 时间：2013-02-21T10:11:17.867
> 
> 标签：optimistic-concurrency, database-concurrency

在基于时间戳的并发控制中，如果某些带有 T_j 且 j > i 已经读过它的事务，为什么你必须拒绝在元素 x_k 上的事务 T_i 中写入。

如文件所述。

![在此处输入图像描述](../Images/7657bacd80ff8c7a37c7389e7bc0ada8.png)

如果 T_j 根本不打算进行任何更新，为什么有必要对 T_i 的行为如此严格？

# android - Android 相对布局在 Galaxy S3 上无法正常工作

> ID：14999549
> 
> 赞同：1
> 
> 时间：2013-02-21T10:11:18.970
> 
> 标签：android, amazon-s3, android-relativelayout, galaxy

我正在进行设计并对其进行测试：

*   银河 Nexus 3
*   三星Galaxy S3

似乎 S3 在一些相关布局命令中表现不佳，例如：

*   Layout_toStartOf
*   Layout_toEndOf

简化问题如下：

## 代码

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@android:color/white" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:text="Button" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/button1"
    android:layout_toEndOf="@id/button1"
    android:text="Button" />

</RelativeLayout> 
```

## 图片

1.  在编辑器和 Nexus 3 上
2.  在三星 S3 上

![在编辑器和 Nexus 3 中正常工作](../Images/3c72aaf0b399d0ae8bfa0f6a9b543abd.png)

![在三星 S3 上无法正常工作](../Images/2b0cea7611a4b41c047a79ff72d3a14f.png)

由于我经常使用缩放和相互关联的图片，因此此功能非常重要。

如果有人可以与我分享他们的经验，我将不胜感激。

谢谢

编辑：错别字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:18:53.130

首先，没有诸如 `android:layout_toEndOf="@id/button1"`.

相对布局只有 2 个资源可以根据任何小部件的 id 进行排列`toLeftOf`并`toRightOf`检查您的代码。

**编辑：**

`toEndOf`并且`toStartOf`最近在 API 级别 17 即 android 4.2 版本中添加，因此在较低版本的 android 中将找不到

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:12:48.770

遇到过同样的问题：

我使用 ToStartOf 和 toEndOf 将固定大小的图形与缩放的 1px 宽的图形对齐。

[图形 1] <-- [图形 2（1px 缩放到 20dp）] <-- [图形 3]

当您从右到左构建它时，它们不会正确对齐。当您说 toLeftOf 缩放图形时，它将使新图形位于图片原始大小的左侧，而不是缩放图片的末尾-因此重叠。

[图[hic 1 图]phic 2][图 3]

一种解决方法是从左到右构建图形，将所有元素作为一个模块放在相对布局中，并将不同的模块相互对齐。

感谢有关具有 ToStartOf 和 ToEndOf 函数的 API 级别的信息！

# ios - libtool 在 Xcode 4.2 中以退出代码 1 失败

> ID：14999550
> 
> 赞同：1
> 
> 时间：2013-02-21T10:11:17.830
> 
> 标签：ios, xcode

我编译我的项目，它显示了这个错误：

> Libtool /Users/trinstanchen/Library/Developer/Xcode/DerivedData/iOSSocial-dedmezxegpbuqnfkhmbfrvtphyas/Build/Products/Debug-iphonesimulator/libiOSSocial.a normal i386 cd "/Users/trinstanchen/Downloads/iOSSocial-develop copy/iOSSocial" setenv IPHONEOS_DEPLOYMENT_TARGET 5.0 setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/ usr/sbin:/sbin" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool -static -arch_only i386 -syslibroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator .platform/Developer/SDKs/iPhoneSimulator6.0。sdk -L/Users/trinstanchen/Library/Developer/Xcode/DerivedData/iOSSocial-dedmezxegpbuqnfkhmbfrvtphyas/Build/Products/Debug-iphonesimulator-filelist/Users/trinstanchen/Library/Developer/Xcode/DerivedData/iOSSocial-dedmezxegpbuqnfkhmbfrvtphyas/Build/Intermediates/ iOSSocial.build/Debug-iphonesimulator/iOSSocial.build/Objects-normal/i386/iOSSocial.LinkFileList -ObjC -fno-objc-arc -framework CoreGraphics -framework SenTestingKit -framework UIKit -framework Foundation -o /Users/trinstanchen/Library/开发人员/Xcode/DerivedData/iOSSocial-dedmezxegpbuqnfkhmbfrvtphyas/Build/Products/Debug-iphonesimulator/libiOSSocial.aLinkFileList -ObjC -fno-objc-arc -framework CoreGraphics -framework SenTestingKit -framework UIKit -framework Foundation -o /Users/trinstanchen/Library/Developer/Xcode/DerivedData/iOSSocial-dedmezxegpbuqnfkhmbfrvtphyas/Build/Products/Debug-iphonesimulator/libiOSSocial。一个LinkFileList -ObjC -fno-objc-arc -framework CoreGraphics -framework SenTestingKit -framework UIKit -framework Foundation -o /Users/trinstanchen/Library/Developer/Xcode/DerivedData/iOSSocial-dedmezxegpbuqnfkhmbfrvtphyas/Build/Products/Debug-iphonesimulator/libiOSSocial。一个
> 
> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool：未知选项字符“f”在：-fno-objc-arc 用法：/Applications/Xcode.app/Contents/Developer/ Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool -static [-] file [...] [-filelist listfile[,dirname]] [-arch_only arch] [-sacLT] 用法：/Applications/Xcode.app/Contents /Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool -dynamic [-] file [...] [-filelist listfile[,dirname]] [-arch_only arch] [-o output] [-install_name name] [ -compatibility_version #] [-current_version #] [-seg1addr 0x#] [-segs_read_only_addr 0x#] [-segs_read_write_addr 0x#] [-seg_addr_table ] [-seg_addr_table_filename ] [-all_load] [-noall_load] 命令 /Applications/Xcode.app /Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool 失败，退出代码为 1

谁能给我帮助？

# c# - 使用 Page.ClientScript.RegisterStartupScript() 在 asp.net c# 中不显示消息框

> ID：14999553
> 
> 赞同：0
> 
> 时间：2013-02-21T10:11:27.780
> 
> 标签：c#, asp.net

我正在使用 Page.ClientScript.RegisterStartupScript(); 在 asp.net C# 中显示一条消息

如果我写下面的代码，那么它的工作

```
 Page.ClientScript.RegisterStartupScript(this.GetType(), "ShowMessage", string.Format("<script type='text/javascript'>alert('{0}')</script>", "Record Saved"));
 Page.ClientScript.RegisterStartupScript(this.GetType(), "Error", string.Format("<script type='text/javascript'>alert('{0}')</script>", ex.Message.ToString())); 
```

**但如果我写**

```
string Result = objChap.Insert();
Page.ClientScript.RegisterStartupScript(this.GetType(), "Error", string.Format("<script type='text/javascript'>alert('{0}')</script>", Result)); 
```

然后它不工作意味着消息框不显示

我的完整代码是

```
protected void btnSave_Click(object sender, EventArgs e)
    {
        try
        {
            objChap.FK_SemesterID = Convert.ToDecimal(drplstSem.SelectedValue);
            objChap.FK_SubjectID = Convert.ToDecimal(drplstSub.SelectedValue);
            objChap.ChapterName= txtChap.Text;
            objChap.ChapterSName = txtChapShortName.Text;
            objChap.Remarks = txtRemarks.Text;
            objChap.Dta_User = Global.Dta_User;
            objChap.Dta_Users = Global.Dta_User;

            string Result = objChap.Insert();
            if (Result == "1")
            {

                Page.ClientScript.RegisterStartupScript(this.GetType(), "ShowMessage", string.Format("<script type='text/javascript'>alert('{0}')</script>", "Record Saved"));

            }
            else
            {
                Page.ClientScript.RegisterStartupScript(this.GetType(), "Error1", string.Format("<script type='text/javascript'>alert('{0}')</script>", Result));

            }

        }
        catch (Exception ex)
        {
            Page.ClientScript.RegisterStartupScript(this.GetType(), "Error", string.Format("<script type='text/javascript'>alert('{0}')</script>", ex.Message.ToString()));
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T10:56:16.213

当字符串包含单引号时，它会破坏脚本，因为单引号也用于包装传递给的值`alert()`。

要克服这个问题，请转义引号：

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "Error1", 
    string.Format("<script type='text/javascript'>alert('{0}')</script>", 
    Result.Replace("'", "\\'"))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T16:17:30.063

上述解决方案对我不起作用，但我的情况略有不同。

这工作正常：

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "JSscript", "alert('this is a test');", true); 
```

这不会：

```
String MetaJS = Convert.ToString(aList["JavaScript"].Value); //alert('this is a test'); 
Page.ClientScript.RegisterStartupScript(this.GetType(), "MetaScript", MetaJS, true); 
```

这不会：

```
String MetaJS = Convert.ToString(aList["JavaScript"].Value); //alert('this is a test'); 
Page.ClientScript.RegisterStartupScript(this.GetType(), "MetaScript", string.Format("{0}", MetaJS.Replace("'", "\\'")), true); 
```

# python - 如何比较两个 csv 文件中的列？

> ID：14999555
> 
> 赞同：0
> 
> 时间：2013-02-21T10:11:30.240
> 
> 标签：python

我正在尝试比较 2 个 csv 文件中的列。

在 file1.csv 中：

```
aaa,1
abc,2
bcd,2
adc,3 
```

在 file2.csv 中：

```
aaa,1
abc,0
bcd,2
adc,4 
```

**我希望得到“Not Equ”的结果。**

**如果第一列相同但第二列不同。**

我尝试了下面的代码但没有成功：

```
import csv
file1 = 'C:/Users/Desktop/file1.csv'
file2 = 'C:/Users/Desktop/file2.csv'

reader1 = csv.reader(open(file1))
reader2 = csv.reader(open(file2))

for row1 in reader1:
    text1 = row1[0].split(',')
    test1sentence = text1[0]
    test1class = text1[1]

    for row2 in reader2:
        text2 = row2[0].split(',')
        test2sentence = text2[0]
        test2class = text2[1]

        if test1sentence == test2sentence:
            if test1class != test2class:
                print "Not Equ" 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:27:56.387

您基本上是在与将键与值匹配的字典（或地图）进行比较。

正确的方法是比较键集。如果它们相等，则对于每个键，比较两个文件中的值。

```
#!/usr/bin/python

def file_to_dict(filename):
    lines  =  open(filename).read().split()
    return dict([line.split(',') for line in lines])

dict1, dict2 = file_to_dict('file1.csv'), file_to_dict('file2.csv')

print "Keys are equal? ", set(dict1.keys())==set(dict2.keys())
print "Values are equal? ", all([dict1[key]==dict2[key] for key in dict1]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T10:34:10.650

您可以将文件读入两个字典并进行比较，如下所示：

```
dict1 = dict(row for row in reader1 if len(row) == 2)
dict2 = dict(row for row in reader2 if len(row) == 2)

if sorted(dict1.keys()) == sorted(dict2.keys()):
    if dict1 != dict2:
        print "Not Equ" 
```

`dict(reader1)`将第一列转换为字典的键，将第二列转换为值。

生成器表达式`(row for row in reader1 if len(row) == 2)`过滤掉不完全包含两列的行。

要比较键，必须对它们进行排序。比较整个 dicts ( `dict1 != dict2`) 将比较排序的键值对。因为我们首先比较了键，所以我们知道整个 dicts 之间的任何差异都是由值引起的。

* * *

编辑：要比较单个项目，而不是整个列：

```
dict1 = dict(row for row in reader1 if len(row) == 2)
dict2 = dict(row for row in reader2 if len(row) == 2)

for key, val in dict1.iteritems():
    try:
        if dict2[key] != val:
            print "Not Equ"
    except KeyError:
        pass 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:51:30.347

您可以将其解析为字典并进行比较，如下所示：

```
>>> d1={'aaa':1, 'abc':2, 'bcd':2, 'adc':3}
>>> d2={'aaa':1, 'abc':0, 'bcd':2, 'adc':4}
>>> d1==d2
False
>>> d2={'aaa':1, 'abc':2, 'bcd':2, 'adc':3}
>>> d1==d2
True 
```

# r - cumsum 使用 ddply

> ID：14999556
> 
> 赞同：13
> 
> 时间：2013-02-21T10:11:33.087
> 
> 标签：r, aggregate, plyr

如果这更容易，我需要在 ddply 或聚合的级别中使用 group by。我不确定如何执行此操作，因为我需要使用 cumsum 作为我的聚合函数。这是我的数据的样子：

```
level1      level2  hour     product 
A           tea     0          7
A           tea     1          2
A           tea     2          9
A           coffee  17         7
A           coffee  18         2
A           coffee  20         4
B           coffee  0          2
B           coffee  1          3
B           coffee  2          4
B           tea     21         3
B           tea     22         1 
```

预期输出：

```
A     tea     0   7
A     tea     1   9
A     tea     2   18
A     coffee  17  7
A     coffee  18  9
A     coffee  20  13
B     coffee  0   2
B     coffee  1   5
B     coffee  2   9
B     tea     21  3
B     tea     22  4 
```

我尝试使用

```
ddply(dd,c("level1","level2","hour"),summarise,cumsum(product)) 
```

但这并没有总结起来，我认为这是因为小时列被用于分组，并且被它分割..我认为..我不确定我是否完全理解聚合在这里是如何工作的。有什么方法可以使用聚合或 ddply 获得所需的输出？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-21T10:21:30.883

`ave`这是使用and的基础 R 中的解决方案`within`：

```
within(mydf, {
  cumsumProduct <- ave(product, level1, level2, FUN = cumsum)
})
#    level1 level2 hour product cumsumProduct
# 1       A    tea    0       7             7
# 2       A    tea    1       2             9
# 3       A    tea    2       9            18
# 4       A coffee   17       7             7
# 5       A coffee   18       2             9
# 6       A coffee   20       4            13
# 7       B coffee    0       2             2
# 8       B coffee    1       3             5
# 9       B coffee    2       4             9
# 10      B    tea   21       3             3
# 11      B    tea   22       1             4 
```

当然，如果您想删除现有的产品列，您可以将命令更改为以下内容以覆盖当前的“产品”列：

```
within(mydf, {
  product <- ave(product, level1, level2, FUN = cumsum)
}) 
```

您当前的方法部分不起作用，因为您已将“小时”作为分组变量之一。换句话说，它看到“A + tea + 0”的组合与“A + tea + 1”不同，但从您想要的输出来看，您似乎只是希望“A + tea”的组合成为团体。

`aggregate`不会像您期望的那样工作，因为它会将所有内容压缩`data.frame`成行数与“level1”和“level2”的唯一组合数相同的行数，在本例中为 4 行。聚合列将是一个`list`. 这些值是正确的，但用处不大。

这是`aggregate`及其输出：

```
> aggregate(product ~ level1 + level2, mydf, cumsum)
  level1 level2  product
1      A coffee 7, 9, 13
2      B coffee  2, 5, 9
3      A    tea 7, 9, 18
4      B    tea     3, 4 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-21T10:19:42.330

你应该使用`transform`而不是`summarise`：

```
# you should probably order your `level2` first
dd$level2 <- factor(dd$level2, levels=c("tea", "coffee"))
# and transform using level1 and level2 alone, not hour
# if you use hour, the groups will be for each row
ddply(dd, .(level1, level2), transform, product=cumsum(product))

#    level1 level2 hour product
# 1       A    tea    0       7
# 2       A    tea    1       9
# 3       A    tea    2      18
# 4       A coffee   17       7
# 5       A coffee   18       9
# 6       A coffee   20      13
# 7       B    tea   21       3
# 8       B    tea   22       4
# 9       B coffee    0       2
# 10      B coffee    1       5
# 11      B coffee    2       9 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-24T17:01:23.810

现在引用此内容的人们可能希望避免使用`plyr::ddply`. 这是一个`dplyr`解决方案。

```
library(dplyr)
output <- dd %>%
  group_by(level1, level2) %>%
  mutate(product_sum = cumsum(product)) %>%
  ungroup()
output 
```

请注意，这`product_sum`是新列的命名位置。你可以`product`改用。然后，原始产品列将被覆盖，因为看起来原始问题可能更愿意这样做并且在输出中没有两列。

数据：

```
level1 <- c(rep("A",6), rep("B",5))
level2 <- c(rep("tea",3), rep("coffee",6), rep("tea",2))
hour <- c(0,1,2,17,18,20,0,1,2,21,22)
product <- c(7,2,9,7,2,4,2,3,4,3,1)

dd <- data.frame(level1, level2, hour, product) 
```

# sql - SQL通过时间戳列计算当前值和上一个值之间的差异

> ID：14999559
> 
> 赞同：0
> 
> 时间：2013-02-21T10:11:39.337
> 
> 标签：sql, sql-server, sql-server-2008, datediff

我正在计算时间戳列组织的当前值和上一个值之间的差异？

我的表组织如下：

```
MeterID(PK,FK,int.not null), ActualTimeStamp(smalldatetime,not null), Value(float,null)

Meter ID     ActualTimeStamp     Value          
312514     2013-01-01 08:08:00   72         
312514     2013-01-01 08:07:00   12 
```

所以我的答案应该是`72 - 12 = 60`

我似乎能找到的唯一解决方案是使用我无法选择的行号，如果有人可以帮助我，我真的很感激它破坏了我的大脑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:44:47.560

这是一个可以帮助您的查询。只需修改它以适合您的需要/表名称/等。

```
with sub as (
  select meterid,
         actualtimestamp,
         value,
         row_number() over (partition by meterid order by actualtimestamp desc) as rn
     from test  
  )
select meterid,
       actualtimestamp,
       value,
       value - isnull((select value
                 from sub
                where s.meterid = meterid
                  and rn = s.rn + 1), value) as answer
from sub s
order by meterid, actualtimestamp desc; 
```

基本上它的作用是使用 row_number() 聚合函数添加行号。使用行号，查询尝试从前一个条目中获取值并获取值差。

在这里尝试[提琴手](http://www.sqlfiddle.com/#!3/95281/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-05T05:22:07.813

在 SQL Server 2008 中，我会在`outer apply`这里推荐一个符合您要求的 find diff 的短代码

```
 select t.*, isnull((t.value - tprev.value),0) as diff
from test t outer apply
     (select top 1 tprev.*
      from test tprev
      where tprev.meterid = t.meterid and
            tprev.actualtimestamp < t.actualtimestamp
      order by tprev.actualtimestamp desc
       )tprev 
```

# javascript - 使用javascript在DOM中查找输入类

> ID：14999563
> 
> 赞同：1
> 
> 时间：2013-02-21T10:11:50.893
> 
> 标签：javascript, cefsharp

嗨，我正在使用 CEFsharp 通过网站自动化并填写字段等。到目前为止，我无法让 jquery 正常工作，我正在使用 javascript 并且遇到了问题。

当我尝试查找输入字段时：

```
<input class="quantity" type="text" value="1" maxlength="2" size="2" name="quantity"> 
```

我使用 javascript：

```
document.getElementsByClassName('quantity')[0].value = '3'; 
```

这第一次工作正常，3 个项目被添加到购物篮中。但是，一旦项目在篮子中，就会创建一个跨度类，因此类数量的数组位置不再为 0，因此找不到我正在寻找的输入类。

```
<strong class="quantity">3</strong> 
```

我知道在 jquery 中这很容易，但目前我必须使用 javascript，那么 javascript 相当于做什么：

```
jquery $('input.classname') 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:08:30.210

尝试使用 querySelector() // 跨平台和 querySelectorAll() // 现代浏览器

# jquery - jQuery加载外部站点页面

> ID：14999573
> 
> 赞同：12
> 
> 时间：2013-02-21T10:12:08.687
> 
> 标签：jquery, load

是否可以从外部网站加载单个页面？

我试图显示一个页面，但似乎无法让它工作

```
$("#response").load("http://domain.com", function(response, status, xhr) {
   if (status == "error") {
      var msg = "Sorry but there was an error: ";
      alert(msg + xhr.status + " " + xhr.statusText);
   }
 }); 
```

帮助将不胜感激

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-21T10:17:34.113

您遇到了**跨域策略**问题，因为 AJAX（出于安全原因）不允许您从不在同一域中的页面中获取内容。

**要摆脱它并完成您的任务：**
您需要一个 PHP 文件，您可以`grabber.php`使用这行 PHP 调用：

```
<?php echo file_get_contents($_GET['url']); ?> 
```

比在你的 html 中（或任何文件都喜欢:)

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <meta charset=utf-8 />
    <title>test</title>
</head>
<body>

    <div id="response"></div>

</body>

<script>
$(function(){
    var contentURI= 'http://domain.com #element';    // URL TO GRAB + # of any desired element // if needed :)
    $('#response').load('grabber.php?url='+ contentURI);
});
</script>

</html> 
```

为什么这行得通？

*   现在，AJAX 正在向页面发送一个简单的 GET 请求`grabber.php`，

*   `grabber.php`呼应所需的内容

*   现在内容在您的（服务器）域上！

*   AJAX 很高兴为您服务 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T10:16:05.143

您是否尝试在不同的域上加载页面？

如果是，那么您似乎有一个跨域策略...

# wpf - 排序 CollectionViewSource 时如何在 SortDescription 中设置条件而不是 PropertyName？

> ID：14999576
> 
> 赞同：1
> 
> 时间：2013-02-21T10:12:13.833
> 
> 标签：wpf, xaml, observablecollection, collectionviewsource

我想对 a 进行排序，`CollectionViewSource`但我需要设置一个条件而不是`PropertyName`。事实上，我想使用`CollectionViewSource`in进行下面的排序`Xaml`。

```
 Class2Colection.OrderBy(s => s.Id).OrderBy(s =>!s.Id.HasValue));

  <CollectionViewSource Source="{Binding Class2Colection}">
       <CollectionViewSource.SortDescriptions>
            <scm:SortDescription PropertyName="Id" Direction="Ascending"/>
            <scm:SortDescription PropertyName="??" Direction="Ascending"/>
       </CollectionViewSource.SortDescriptions>
  </CollectionViewSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:50:26.970

您可以通过实现自己的`IComparer`并将其设置为类的公共`CustomSort`属性来应用自定义排序逻辑`ListCollectionView`。但这不是您问题的完整答案，而是您可以前进的方向。

您可以实现此目的的最简单方法

> ```
> Class2Colection.OrderBy(s => s.Id).OrderBy(s =>!s.Id.HasValue)); 
> ```

in`xaml`是在您的数据类中公开另一个属性，该属性将返回`!Id.HasValue`并按其排序。

# php - php计算字符串中的公式

> ID：14999578
> 
> 赞同：1
> 
> 时间：2013-02-21T10:12:18.640
> 
> 标签：php, formula, equation

所以我有公式作为字符串

`$comm = "(a x 5% - 2%)";`

我希望它是 `$comm = $a * 5/100 * (1-2/100);`

我怎样才能在 php 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:19:22.103

看一眼

[http://www.phpclasses.org/package/2695-PHP-Safely-evaluate-mathematical-expressions.html](http://www.phpclasses.org/package/2695-PHP-Safely-evaluate-mathematical-expressions.html)

哪个可以评估数学代码

```
 // instantiate a new EvalMath
  $m = new EvalMath;
  $m->suppress_errors = true;
 // set the value of x
  $m->evaluate('x = 3');
   var_dump($m->evaluate('y = (x > 5)')); 
```

发现于： [在 php 中处理数学方程](https://stackoverflow.com/questions/4019418/process-mathematical-equations-in-php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T10:24:45.070

要从头开始以正确、可靠和安全的方式执行此操作，您需要执行以下操作：

1.  词法分析，这涉及将输入与标记进行模式匹配：

    ```
    (a x 5% - 2%) 
    ```

    将变成类似于以下令牌链：

    ```
    openparen variable multiply integer percent minus integer percent closeparen 
    ```

2.  语法分析，这涉及获取这些标记并定义它们之间的关系，就像这样，匹配标记的模式：

    ```
    statement = operand operator statement 
    ```

3.  然后您将需要解析生成的语法树，以便您可以运行它并生成答案。

它永远不会看起来那么简单，`$comm = $a * 5/100 - 2/100;`但它会得出相同的结论。

某个地方的某个人可能已经解决了这个问题，这是我在简短的 Google 搜索后发现的两个： [PHP Maths Expression Parser](http://codehackit.blogspot.co.uk/2011/08/expression-parser-in-php.html)和 [另一个](http://route50.net/forum/thread/2196).

这些 SO 问题也很相似[数学解析器的智能设计？](https://stackoverflow.com/questions/114586/smart-design-of-a-math-parser),[在 php 中处理数学方程](https://stackoverflow.com/questions/4019418/process-mathematical-equations-in-php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T10:39:59.570

它只是尝试，但也许是好的开始。

```
$somm = 0;
$a = 30;

$str = "(a x 5% - 2%)";

$pt1 = "/x/i";
$str = preg_replace($pt1, "*", $str);

$pt2 = "/([a-z])+/i";
$str = preg_replace($pt2, "\$$0", $str);

$pt3 = "/([0-9])+%/";
$str = preg_replace($pt3, "($0/100)", $str);

$pt4 = "/%/";
$str = preg_replace($pt4, "", $str);

$e = "\$comm = $str;";
eval($e);
echo $e . "<br>";
echo $comm; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T05:04:58.513

解决了！！

```
<?php 
    function evalmath($equation)
    {
        $result = 0;
        // sanitize imput
        $equation = preg_replace("/[^a-z0-9+\-.*\/()%]/","",$equation);
        // convert alphabet to $variabel 
        $equation = preg_replace("/([a-z])+/i", "\$$0", $equation); 
        // convert percentages to decimal
        $equation = preg_replace("/([+-])([0-9]{1})(%)/","*(1\$1.0\$2)",$equation);
        $equation = preg_replace("/([+-])([0-9]+)(%)/","*(1\$1.\$2)",$equation);
        $equation = preg_replace("/([0-9]{1})(%)/",".0\$1",$equation);
        $equation = preg_replace("/([0-9]+)(%)/",".\$1",$equation);
        /*if ( $equation != "" ){
            $result = @eval("return " . $equation . ";" );
        }
        if ($result == null) {
            throw new Exception("Unable to calculate equation");
        }
        return $result;*/
        return $equation;
    }
    $total = 18000;
    $equation =  evalmath('total-(230000*5%-2%+3000*2*1)');
    if ( $equation != "" ){

        $result = @eval("return " . $equation . ";" );
    }
    if ($result == null) {

        throw new Exception("Unable to calculate equation");
    }
    echo $result;
?> 
```

# episerver - ImageVault 无法找到匿名用户

> ID：14999581
> 
> 赞同：1
> 
> 时间：2013-02-21T10:12:29.800
> 
> 标签：episerver

我们正在使用 Episerver 和 ImageVault，它已经运行了很长时间。直到最近，当向公众用户展示专辑时，无缘无故停止工作。我们的项目中没有代码更改或对周围服务器环境的更改。IVFileList 控件数据绑定时引发异常。抛出的异常是“主域和可信域之间的信任关系失败”。

我已经调试了代码，得出的结论是异常的原因实际上是因为 Episerver 试图通过 WindowsMemberShipProvider 找到一个名为“Anonymous”的用户。我在下面包含了一个简化的堆栈跟踪（排除了几个可读性调用）。我从 DataBind 调用开始，该调用导致调用 episervers multiplexprovider 以查找用户“匿名”，这反过来又导致调用引发异常的 TranslateToSids 方法。

`System.Security.Principal.NTAccount.TranslateToSids(...)`

`EPiServer.Security.MultiplexingMembershipProvider.FindMembershipUser("Anonymous")`

`ImageStoreNET.Developer.WebControls.IVFileListData.DataBind()`

通过在网络服务器中创建一个本地帐户并将其命名为“匿名”，我找到了解决此问题的方法。现在一切都恢复正常了！TranslateToSids 方法不再抛出异常，相册图片可见。

有没有人知道为什么突然需要这个帐户？回想起来，我们以前从未有过。尽管解决方法有效，但创建本地帐户感觉像是一个丑陋的解决方案。这应该是解决这个问题的更正确的方法。有什么建议么？

# java - 当我从未关闭任何内容时，为什么会收到 ResultSet is closed 错误

> ID：14999582
> 
> 赞同：0
> 
> 时间：2013-02-21T10:12:34.600
> 
> 标签：java, jdbc, connection, resultset, sqlexception

我的代码中有这个错误，并且已经彻底检查和编辑它，但我仍然遇到同样的问题。我还使用了多个 resultSet 和 Statements 但发生了同样的错误。以下是我得到的错误：

```
 "Database Connected with Current Date 20130221
    java.sql.SQLException: ResultSet is closed
    at sun.jdbc.odbc.JdbcOdbcResultSet.checkOpen(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbcResultSet.next(Unknown Source)
    at UNSUB.main(UNSUB.java:78)"
Press any key to continue . . . 
```

请问可能是什么原因？我现在不知道任何解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T10:15:46.840

异常`java.sql.SQLException: ResultSet is closed`意味着您的代码已经关闭了您正在使用的结果集对象，或者更有可能是您的代码已经重新执行或关闭了生成结果集的语句。根据 JDBC 规范，这些操作中的任何一个都将关闭语句中的任何结果集。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-21T10:19:06.723

您是否`next()`在 ResultSet 上调用了该方法？如果您没有，那可能是您收到该错误的原因。

# macos - 如何查找磁盘卷的格式

> ID：14999586
> 
> 赞同：3
> 
> 时间：2013-02-21T10:12:40.457
> 
> 标签：macos, cocoa, disk

我正在更新我在 Mac App Store 上编写并拥有的备份实用程序。

在 Macintosh Cocoa 应用程序中，我如何找到磁盘卷的格式化方式？我发现的唯一正式的事情是做一个 GetResourceValue: for 'NSURLVolumeLocalizedFormatDescriptionKey'，但这取决于语言。

我的实用程序不支持格式化为 FAT32 的卷。我的实用程序需要对 XSan 驱动器进行特殊处理。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T18:24:49.077

`statfs(2)`会给你一个非本地化的名字：

```
struct statfs volinfo;
if(statfs("/path/to/your/volume", &volinfo) != 0)
{
  perror("statfs");
  return -1;
}

fprintf(stderr, "%s\n", volinfo.f_fstypename); 
```

查看`/System/Library/Filesystems`将在 中返回的名称`f_fstypename`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-30T20:27:33.660

这个问题已经回答了，但我会投入我的 2 美分......

```
/sbin/mount | grep acfs | awk '{print $3}' 
```

这输出

```
/Volumes/XsanVolumeName1
/Volumes/XsanVolumeName2 
```

# performance - 预编译的视图不起作用

> ID：14999588
> 
> 赞同：2
> 
> 时间：2013-02-21T10:12:49.103
> 
> 标签：performance, entity-framework, reflection, entity-framework-mapping

我试图使用预编译的视图来获得良好的性能，我成功​​地生成了视图，并且在编译时和运行时 .edmx 中的一切都是相同的。早些时候，默认连接工厂的数据提供程序存在错误，.edmx 总是将 SqlClient 提供程序用于默认连接工厂，即使您将默认连接工厂更改为其他数据提供程序，但是当我注释掉类的构造函数时，这种情况得到了克服继承 DbContext，在 .edmx 文件中的此连接提供者与我在 app.config 中的默认连接工厂中指定的相同之后。因此，在编译时生成的 .Edmx 和运行时 .edmx 中的一切都是相同的。

但是当我在编译时生成视图并使用视图来优化性能时，当我调用 dbcontext.SaveChanges() 时会引发以下异常

“EntityContainer 'DatabaseContext' 的映射和元数​​据信息不再匹配用于创建预生成视图的信息。”

上述异常表明存在一些不匹配，但我检查了 edmx，一切都一样。所以是什么问题。或者我经历过这个

[预编译视图不影响性能](https://stackoverflow.com/questions/8272461/pre-compiled-view-not-affecting-performance)

因为它暗示了不同的装配问题。因此，对于我的情况，我有一个 project1，它有几个 POCO 类和不同的 project2，它引用 project1 并使用 project1 的 POCO 类，并且 DbContext 类已经在 project2 中定义，我正在为 project2 生成视图，那么到底是什么问题在此先感谢您的帮助

# php - 关于在 PHP 中插入数组

> ID：14999596
> 
> 赞同：-2
> 
> 时间：2013-02-21T10:13:11.660
> 
> 标签：php, mysql

使用 fetch 函数从表中检索值并将其放入`$row[variable]`.

有没有办法将这些值存储到另一个表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:15:23.667

Shure 只需使用“正常”的 INSERT 语句并将您的数据插入到新表中

```
mysql_query("INSERT INTO Persons (FirstName, LastName, Age)
VALUES ('$row[name]', 'row[surname]','$row[age]')"); 
```

您可能想在即将到来的玫瑰上使用 foreach / 进行迭代

或者直接使用从检索数据中的循环将它们再次插入到其他地方

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:20:55.663

是的，在 $row[variable] 中检索值后，您可以使用上述变量运行简单的插入查询，例如，

```
<?php
$query = mysql_query("Insert into table (field_name1) values ("'.$row[variable].'")");
?> 
```

# c# - 如果它存在而不是数据库，我如何缓存对象并从内存中读取？

> ID：14999599
> 
> 赞同：10
> 
> 时间：2013-02-21T10:13:19.340
> 
> 标签：c#, caching, interface

我有以下四个课程：

```
public class Section
{
    public int SectionId { get; set; }
    public string Name { get; set; }
    public string Title { get; set; }
    public string MetaTag { get; set; }
    public string MetaDescription { get; set; }
    public string UrlSafe { get; set; }
    public string Header { get; set; }
    public string ImageName { get; set; }
}       

public interface ISectionRepository
{
    List<Section> GetAllSections();
}

public class SectionRepository : ISectionRepository
{
    Context context = new Context();

    public List<Section> GetAllSections()
    {
        return context.Sections.ToList();
    }
}

public class SectionApplication
{
    SectionRepository sectionRepo = new SectionRepository();

    public List<Section> GetAllSections()
    {
        return sectionRepo.GetAllSections();
    }
} 
```

在我的控制器中，我有

```
public class SectionController : Controller
{
    SectionApplication sectionApp = new SectionApplication();

    public ActionResult Index()
    {
        return View(sectionApp.GetAllSections());
    }
} 
```

现在，我想在内存上缓存部分特定时间，以便从缓存中读取部分（如果存在），否则从数据库中读取。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-21T10:24:01.883

简单可行的方法，您可以使用[MemoryCache](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.aspx)，代码如下所示：

```
public List<Section> GetAllSections()
    {
        var memoryCache = MemoryCache.Default;

        if (!memoryCache.Contains("section"))
        {
            var expiration = DateTimeOffset.UtcNow.AddMinutes(5);
            var sections = context.Sections.ToList();

            memoryCache.Add("section", section, expiration);
        }

        return memoryCache.Get("section", null);

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T10:18:29.180

您可以通过添加一个具有超时的新类来进行缓存。第一次读取时，直接从数据库中读取数据并将数据写入新类的属性并制作时间戳。在下一个读取操作中，您检查新类以查看是否已达到超时。如果没有，则从新类中读取数据。否则，您从数据库中读取并将其放入缓存类并更新超时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-05T18:06:42.873

```
public interface IRepositoryCollection
{
    DateTime dateCreated { get; set; }
}

public class Cache<T> : Dictionary<string, T>
{
    private int cacheDuration = 1;
    private int maxCacheSize = 20;

    public Cache(int cacheDuration, int maxCacheSize)
    {
        this.cacheDuration = cacheDuration;
        this.maxCacheSize = maxCacheSize;
    }

    public new void Add(string key, T invoices)
    {
        base.Add(key, invoices);
        RemoveOld();
        RemoveOldest();
    }

    public void RemoveOld()
    {
        foreach (KeyValuePair<string, T> cacheItem in this)
        {
            Interfaces.IRepositoryCollection currentvalue = (Interfaces.IRepositoryCollection)cacheItem.Value;

            if (currentvalue.dateCreated < DateTime.Now.AddHours(-cacheDuration))
            {
                this.Remove(cacheItem.Key);
            }
        }
    }

    public void RemoveOldest()
    {
        do
        {
            this.Remove(this.First().Key);
        }
        while (this.Count > maxCacheSize);
    }
}

public class ProformaInvoiceCache
{
    private static Cache<ProformaInvoices> cache = new Cache<ProformaInvoices>(1, 20);

    public static string AddInvoiceCollection(ProformaInvoices invoices)
    {
        // Adds invoice collection to static instance of cache, returns guid required to retrieve item from cache
        return cache.Add(invoices);
    }

    public static ProformaInvoices GetInvoiceCollection(string guid)
    {
        // Gets invoice collection from cache corresponding to passed guid
        return cache.Get(guid);
    }
} 
```

# android - Android中Bitmap的OutOfMemoryError

> ID：14999600
> 
> 赞同：3
> 
> 时间：2013-02-21T10:13:22.127
> 
> 标签：android, bitmap

我正在开发一个演示应用程序，其中我正在播放这么多图像（位图）。我正在使用全局位图对象在多个活动中显示相同的图像。但是，当我尝试使用 Bitmap.createBitmap(...) 创建位图时，使用它时会出现 OutOfMemoryError。我尝试使用[此代码](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html#load-bitmap)，但仍然遇到相同的错误，它使我的应用程序崩溃并通过 OutOfMemoryError。

我坚持这一点。任何人都可以有任何解决方案来避免这种情况。？？

提前致谢。

**我在裁剪图像后得到位图，以便我使用下面的代码来解码位图大小。**

```
public static Bitmap loadFromBitmap( Context context, Bitmap b, int maxW, int maxH ) throws IOException {
        final BitmapFactory.Options options = new BitmapFactory.Options();
        Bitmap bitmap = null;
        options.inScaled = false;
        options.inPreferredConfig = Bitmap.Config.RGB_565;
        options.inJustDecodeBounds = true;
        BufferedInputStream stream = null;
        ByteArrayOutputStream outstream = new ByteArrayOutputStream();
        b.compress(CompressFormat.JPEG, 100, outstream);
        InputStream is = new java.io.ByteArrayInputStream(outstream.toByteArray());

        stream = new BufferedInputStream(is, 16384 );
        if ( stream != null ) {
            options.inSampleSize = calculateInSampleSize( options, maxW, maxH );
            stream = null;
            stream = new BufferedInputStream(is, 16384 );
        } else {
            return null;
        }
        options.inDither = false;
        options.inJustDecodeBounds = false;
        options.inPurgeable = true;
        bitmap = BitmapFactory.decodeStream( stream, null, options );
        if ( bitmap != null ) bitmap = BitmapUtils.resizeBitmap( bitmap, maxW, maxH );
        return bitmap;
    }

    public static int calculateInSampleSize(BitmapFactory.Options options, int reqWidth, int reqHeight) {
        // Raw height and width of image
        final int height = options.outHeight;
        final int width = options.outWidth;
        int inSampleSize = 1;

        if (height > reqHeight || width > reqWidth) {

            // Calculate ratios of height and width to requested height and width
            final int heightRatio = Math.round((float) height / (float) reqHeight);
            final int widthRatio = Math.round((float) width / (float) reqWidth);

            // Choose the smallest ratio as inSampleSize value, this will guarantee
            // a final image with both dimensions larger than or equal to the
            // requested height and width.
            inSampleSize = heightRatio < widthRatio ? heightRatio : widthRatio;
        }

        return inSampleSize;
    } 
```

错误：

```
02-21 15:32:31.160: E/AndroidRuntime(2951): FATAL EXCEPTION: main
02-21 15:32:31.160: E/AndroidRuntime(2951): java.lang.OutOfMemoryError
02-21 15:32:31.160: E/AndroidRuntime(2951):     at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
02-21 15:32:31.160: E/AndroidRuntime(2951):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:483)
02-21 15:32:31.160: E/AndroidRuntime(2951):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
02-21 15:32:31.160: E/AndroidRuntime(2951):     at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:374)
02-21 15:32:31.160: E/AndroidRuntime(2951):     at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:404)
02-21 15:32:31.160: E/AndroidRuntime(2951):     at android.app.Activity.performCreate(Activity.java:4465)
02-21 15:32:31.160: E/AndroidRuntime(2951):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1092)
02-21 15:32:31.160: E/AndroidRuntime(2951):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1924)
02-21 15:32:31.160: E/AndroidRuntime(2951):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1985)
02-21 15:32:31.160: E/AndroidRuntime(2951):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
02-21 15:32:31.160: E/AndroidRuntime(2951):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1151)
02-21 15:32:31.160: E/AndroidRuntime(2951):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-21 15:32:31.160: E/AndroidRuntime(2951):     at android.os.Looper.loop(Looper.java:137)
02-21 15:32:31.160: E/AndroidRuntime(2951):     at android.app.ActivityThread.main(ActivityThread.java:4447)
02-21 15:32:31.160: E/AndroidRuntime(2951):     at java.lang.reflect.Method.invokeNative(Native Method)
02-21 15:32:31.160: E/AndroidRuntime(2951):     at java.lang.reflect.Method.invoke(Method.java:511)
02-21 15:32:31.160: E/AndroidRuntime(2951):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-21 15:32:31.160: E/AndroidRuntime(2951):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-21 15:32:31.160: E/AndroidRuntime(2951):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T20:10:18.763

Ah - the many wonderful battles one may have with Google's implementation of bitmap handling in Android.

I would tend to do some memory profiling anytime I hit the roof with memory - very often (although not always) it is because one is doing something wrong (i.e., unexpectedly memory intensive). Just browsing the code, I am a little bit puzzled by the need to force the code through three streams, just to end up with a bitmap again. I feel as if I'm missing some information for me to make sense of this, but I'd definitely take a look at just how much memory you're allocating in each of those steps if I were you (heap dump -> hprof-conv -> memory analyzer is your friend).

However, I suspect that what you may be looking for is [BitmapRegionDecoder](http://developer.android.com/reference/android/graphics/BitmapRegionDecoder.html). I actually only recently discovered this myself, but I think it does pretty much exactly what you are after - allows you to decode a region from a bitmap (inputstream) without loading the entire bitmap into memory (you can also get the width/height). Only downside is that it is Android 2.3.3+ only, but these days that >90% of the market so that should not be a huge problem. I've done some pretty neat work with this (smooth pan and zoom of 6000x4000 image) - it is definitely memory effective if used right.

[EDIT]

I recently open-source my own dumb implementation using BitmapRegionDecoder which handles pan, fling, and pinch-zoom of a very large bitmap. You can find the code (ASL2.0) at [https://github.com/micabyte/android_game](https://github.com/micabyte/android_game)

The class you want to look at is BitmapSurfaceRenderer. So far I've tested it with up to 8000x4000 images, and it seems to work very well. When I get the time, I'll put up a simple example app that demonstrates how it is used as well.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T03:42:48.410

Try to get rid of `outstream` before you decode, e.g nulling the pointer (closing this specific stream will do nothing due to the type of the stream).

You're doing quite an extensive operation here so we need to be as light as possible...

Your code also lacks closing the input stream (which is not the bug here, but still should be done after you decodeStream), using close().

Try and look into Nostras [ImageLoader](https://github.com/nostra13/Android-Universal-Image-Loader), as it efficiently handles loading images into specific sized containers, i.e resizing and compressing them, before you will need to handle them. It also supports content uris which will help you all at once.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T10:48:14.240

使用 options.inPurgeable=true 和 op.inInputShareable=true 编辑您的代码，并在您的代码中执行一些内存节省方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T08:01:52.073

`Bitmap.recycle()`在使 Bitmap 对象无效之前使用该方法。

以下是示例：

```
 public final void setBitmap(Bitmap bitmap) {
   if (this.myBitmapImage != null) {
      this.myBitmapImage.recycle();
   }
    this.myBitmapImage = bitmap;
 } 
```

接下来，您可以`myBitmapImage`在不调用的情况下进行更改`System.gc()`，如下所示：

```
 setMyBitmap(anotherBitmap);
   setMyBitmap(null); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T07:03:50.927

尝试`System.gc()`在每次调用之前添加`loadFromBitmap()`.

# ios - 如果我通过蓝牙低功耗发送数据，我可以知道传输状态吗？

> ID：14999601
> 
> 赞同：3
> 
> 时间：2013-02-21T10:13:23.850
> 
> 标签：ios, core-bluetooth, bluetooth-lowenergy

我正在尝试通过 Apple 提供的这个[示例了解更多信息。](http://developer.apple.com/library/ios/#samplecode/BTLE_Transfer/Introduction/Intro.html)

此示例可以将文本从 iOS 设备发送到另一台设备。

有一种方法叫：

> -(BOOL)updateValue:(NSData *)Value forCharacteristic:(CBMutableCharacteristic *)characteristic onSubscribedCentrals:(NSArray *)centrals;

当此示例通过此方法发送文本时，它将返回一个 BOOL 以告知您是否成功。

它简单明了。

但我怀疑：

这是 BLE 提供的吗？

还是因为 CoreBluetooth API？

换句话说，如果我从其他 BLE 设备（不是 iOS 设备）接收数据。

那台设备能知道我收到了数据吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T03:39:24.193

在 BLE 中，当您的中央设备（这里是 iOS 设备，假定为主设备，也是客户端）想要向外围设备（假定为从设备和服务器）发送数据时，它有几个选项可以做到这一点：

(1) 写入一个特征值

(2) 写命令到一个特征值

不同之处在于 (1) 有来自外围设备的响应。(2) 没有那个。(2) 优于 (1) 的优点是 (2) 可以盲目发送多个数据，而 (1) 必须等到对先前写入的响应才能发送下一个数据。

同样，如果您的外围设备（作为服务器）想要向您的 iOS 设备发送一些数据，您可以指示（带确认）或通知（不带确认）。

希望这可以帮助。

# c++ - memcpy 非 POD 对象导致未定义的行为

> ID：14999602
> 
> 赞同：-2
> 
> 时间：2013-02-21T10:13:25.187
> 
> 标签：c++, memcpy

在什么情况下，Class的对象会保证插入`invisible data`到对象中？

`memcpy`人们通常说使用复制对象而不是复制对象是不行的`copy-assignment`，有时编译器会在对象中插入不可见的数据。所以之后`memcpy`，对象内存布局可能会崩溃。

如果它包含虚拟功能，那么它不是POD。但是包含virtual，函数可能不会crash，是没有定义的。有人可以给我任何例子，说明 memcpy 肯定是错误的。

有人说`shared_ptr`有影响`memcpy`，我试过了，但没有崩溃

有人可以写一个测试演示来证明吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:45:49.080

`shared_ptr`是一个很好的例子：复制对象表示将为您提供指向同一对象的第二个指针，但不会增加使用次数。一旦你打破了使用计数必须等于指针数量的不变量，你就会让自己对未定义的行为持开放态度，例如取消对悬空指针的引用，以及两次删除同一个对象：

```
shared_ptr<int> good(new int(42));
shared_ptr<int> evil;

memcpy(&evil, &good, sizeof evil); // Breaking invariant
good.reset();                      // Deletes object

*evil = 666;                       // BOOM! accesses deleted object
evil.reset();                      // BOOM! deletes object a second time. 
```

您还提到了虚函数。如果您复制派生类的基本子对象，这些可能会导致问题；结果对象将（可能）指向错误类的虚拟表：

```
struct Base {
    virtual int f() {return 0;}
};

struct Derived : Base {
    int x;
    virtual int f() {return x;}
};

Base * good = new Derived;
Base evil;

memcpy(*evil, good, sizeof evil); // Base object with Derived vtable (probably)

evil->f(); // BOOM! probably accesses nonexistent member `x` 
```

# ios - 定义一个宏来替换代码

> ID：14999608
> 
> 赞同：2
> 
> 时间：2013-02-21T10:13:38.563
> 
> 标签：ios, objective-c, macros, c-preprocessor, testflight

我正在使用 TestFlight 并且我有这个宏来替换 NSLog 的 TestFlight 远程日志记录等价物。

```
 #define NSLog(__FORMAT__, ...) TFLog((@"%s [Line %d] " __FORMAT__), __PRETTY_FUNCTION__, __LINE__, ##__VA_ARGS__) 
```

我刚刚从 TestFlight 网站复制粘贴了这个，现在我想创建自己的，用于稍微不同的目的。

我希望能够打字...

```
MyEventLog(@"Something happened."); 
```

...并将其解释为...

```
[[MyEventLogManager sharedInstance] newLogWithText:@"Something happened"]; 
```

我只是不确定语法是如何工作的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T10:17:12.787

```
#define MyEventLog(message) [[MyEventLogManager sharedInstance] newLogWithText:message] 
```

但是，您会发现提供该方法的可变参数版本很有用，因此您可以将格式文本传递给它：

```
- (void)newLogWithFormat:(NSString *)format, ...
{
    va_list va;
    va_start(va, format);
    NSString *message = [[NSString alloc] initWithFormat:format arguments:va];
    va_end(va);

    [self newLogWithText:message];

    // If not using ARC, then:
    // [message release];
} 
```

并使用：

```
#define MyEventFormat(__FORMAT__, ...) [[MyEventLogManager sharedInstance] newLogWithFormat:__FORMAT__, ##__VA_ARGS__] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T10:18:13.360

你可以看看我的 LoggingEngine，我用的是类似的东西。

```
#define PBLog(s,...) [PBLog logFile:__FILE__ withLineNumber:__LINE__ andFormat:(s), ##__VA_ARGS__] 
```

在这里你可以看到我调用了方法`[PBLog logfile:withLineNumber:andFormat:]`

[https://github.com/nerdishbynature/PBLog](https://github.com/nerdishbynature/PBLog)

# jquery - 展开/折叠无法正常工作

> ID：14999610
> 
> 赞同：0
> 
> 时间：2013-02-21T10:13:43.170
> 
> 标签：jquery

我想展开和折叠 div。为此，我使用：-

```
<ul class="link">
    <li>main link 1<span>[-]</span>
        <ul class="inner_div" style="display:block">
            <li><a>test 1</a></li>
            <li><a>test 2</a></li>
            <li><a>test 3</a></li>
        </ul>
    </li>
</ul>
<ul class="link">
    <li>main link 2<span>[+]</span>
        <ul class="inner_div">
            <li><a>test 1</a></li>
            <li><a>test 2</a></li>
            <li><a>test 3</a></li>
        </ul>
    </li>
</ul>
 <ul class="link">
    <li>main link 3<span>[+]</span>
        <ul class="inner_div">
            <li><a>test 1</a></li>
            <li><a>test 2</a></li>
            <li><a>test 3</a></li>
        </ul>
    </li>
</ul>
 <ul class="link">
    <li>main link 4<span>[+]</span>
        <ul class="inner_div">
            <li><a>test 1</a></li>
            <li><a>test 2</a></li>
            <li><a>test 3</a></li>
        </ul>
    </li>
</ul> 
```

脚本是：-

```
$('.link span').click(function(){
$(".inner_div").hide();
var $ul = $(this).next();
$(this).html( $ul.is(':visible') ? '[+]' : '[&ndash;]');
$ul.slideToggle();

}); 
```

CSS是： -

```
.inner_div{ display:none; }
.link span { float: right; cursor: pointer; } 
```

它可以工作，但是当我再次单击展开 div 时，它应该被隐藏。但它并没有隐藏。另一个问题是加减号无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:19:28.550

当你这样做时，`$(".inner_div").hide()`你也隐藏了当前打开的内容。稍后当您说它`$ul.slideToggle()`会重新打开内容时（因为它现在被隐藏了）。

将其更改为：

```
$('.link span').click(function () {
    var $ul = $(this).next();
    $(".inner_div").not( $ul ).hide();
    $( '.link span' ).html( '[+]' );
    if( !$ul.is( ':visible' ) ) {
        $( this ).html( '[&ndash;]');
    }
    $ul.slideToggle();
}); 
```

这也将解决 +/- 问题。

演示：http: [//jsfiddle.net/S7MjY/2/](http://jsfiddle.net/S7MjY/2/)

作为旁注：不要在 HTML 中对最初打开的菜单进行硬编码。而是让所有菜单项以相同的方式开始，并使用 JavaScript 打开默认菜单项。

# parallel-processing - 我可以在事件驱动的 Python Web 应用程序中并行化什么？

> ID：14999615
> 
> 赞同：0
> 
> 时间：2013-02-21T10:13:55.660
> 
> 标签：parallel-processing, multiprocessing, tornado, event-driven

我正在尝试在 Tornado 上制作一个简单的应用程序，而 Tornado 是一个[事件驱动](http://daverecycles.com/post/3104767110/explain-event-driven-web-servers-to-your-grandma)的Web 服务器，并且因为它在 Python 上，所以我将尝试使用 Multiprocessing，但是在什么方面？

密码散列是线性运算，不是吗？如果我对密码进行 1000 次哈希运算，那么每个`n`操作都需要该`n-1`操作吗？

图像处理呢，如果它们在表单中使用，那么它必须等到客户端验证他的表单否？

我可以从多处理中获得的唯一示例是 3D 渲染，您获得的流程越多，您获得的时间就越多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:49:51.490

为什么在没有实际需要的情况下需要多处理并为您的目的增加地狱般的复杂性？如果你想利用多核，只需在 Nginx 后面提出一些 Tornado 实例。对于像散列计算、模板渲染等琐碎的任务，开销是可以接受的。如果您有更复杂的场景，请将您的工作委托给一个队列，例如 celery。

散列是一个 O(n) 操作，但这并不意味着您每次都需要先前的计算来计算散列。此外，3D 渲染不会在服务器上进行 :)

# c++ - 我可以为 Java 或 C++ 使用 Python 缩进样式吗？

> ID：14999616
> 
> 赞同：1
> 
> 时间：2013-02-21T10:13:55.893
> 
> 标签：c++, python, eclipse-plugin, notepad++, indentation

我喜欢 Python 风格，因为它易于阅读和编写。使代码更短，避免不必要的字符，如';' 或者 '{}'。但是，我需要在工作中使用 Java 和 C++。

我想知道是否有办法在这些语言中使用 Python 缩进规则。也许存在 Notepad++ 或 Eclipse 的插件，它会做这样的事情：

当我打开 file.java 时，更改 Java 缩进规则并使用 Python 规则格式化文件，以便我更容易阅读。当我编辑并保存它时，插件会添加所有的 ';' 和'{}'再次让JVM理解。

我想你们中的一些人会认为这是一个糟糕的想法，但我只是想尝试一下。在我看来，学习一门新语言很有趣，但学习新的缩进规则只是无聊和无用的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T10:17:37.833

你可以这样做，但这可能是个坏主意。坚持语言约定可以让您与其他开发人员共享代码。用制表符切换大括号会使任何想要修补代码的 C 专业人士感到困惑。

话虽如此，[nobraces](http://blog.brush.co.nz/2007/09/nobraces/)将制表符转换为大括号：

> 无论如何，我仍然在嵌入式编程合同中大量使用 C，并且 Tim Hatch 的 pybraces 启发我为 C 编写一个类似物，它为您提供 Python 风格的 C 缩进。

另请参阅Eli Bendersky 的[Python 如何影响我的 C/C++ 大括号样式。](http://eli.thegreenplace.net/2011/01/14/how-python-affected-my-cc-brace-style/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:22:51.677

虽然我不知道任何这样的插件，但不一定有一种理智的方法可以做到这一点。在某些情况下，没有主体的循环在 cpp 中是有意义的。分号清楚地表明了意图，如果没有它，它可能看起来像一个缺失的标识。我认为你应该只使用额外的字符，如果你习惯了它们会增加可读性，特别是如果你有一个突出匹配（对应的开始和结束）大括号/括号的编辑器。

既然 Java 和 cpp 让您可以随意缩进代码，您仍然可以使用类似于 python 中的标识。

为了完整起见，在 c 中没有主体的循环的两个示例：

等待特殊的微控制器寄存器切换：

```
while(magicRegister==1); 
```

复制 c 风格的字符串（小心这很容易出错（溢出））：

```
while(*(strptrcpy++) = *(strptrsrc++)); 
```

# android - 异步 ListFragment 的正确方法

> ID：14999623
> 
> 赞同：1
> 
> 时间：2013-02-21T10:14:12.263
> 
> 标签：android, android-asynctask, android-fragments, xamarin.android, android-loader

我对 Android 还是很陌生，我发现很难找出完成以下任务的正确/最佳方法：

我正在使用 ActionBarSherlock 拥有一组选项卡，每个选项卡都加载一个片段。其中之一是 ListFragment（实际上是 SherlockListFragment）。我一开始只是使用一个新线程来加载列表，一切看起来都很好，直到您在列表加载之前切换到不同的选项卡。然后它在 SetListShown(true) 失败，因为我猜该片段不活动。

```
public override void OnActivityCreated(Bundle savedInstanceState)
{
    base.OnActivityCreated(savedInstanceState);

    SetListShown(false);

    var listView = (ListView) Activity.FindViewById(Android.Resource.Id.List);

    Button loadMore = new Button(Activity);
    loadMore.SetText("Load more articles", TextView.BufferType.Normal);
    loadMore.Click += LoadMoreArticles;
    listView.AddFooterView(loadMore);

    ThreadPool.QueueUserWorkItem((obj) => {

        var articles = _articleService.GetArticles(0, 10, DateTime.UtcNow);
        _items = articles.Select(x => new ArticleSummaryModel(x)).ToList();

        Activity.RunOnUiThread(() => {

            _adapter = new ArticleList_Adapter(Activity, _items);
            ListAdapter = _adapter;

            SetListShown(true);
        });
    });
} 
```

我想要发生的是，当第一次打开选项卡时，它开始加载数据，显示标准进度指示器，然后它完成了显示列表并删除了进度指示器。如果在加载数据时选项卡发生更改，则在再次打开该选项卡时应该可见。

如果有一种简单的方法可以实现我错过的这一点，那就太好了！Android 根本不可能，我也想知道，所以我可以停止尝试 ;-)

我已经阅读了很多关于 AsyncTask、AsyncTaskLoader、IntentService 等的内容，但我完全不清楚我需要使用什么，而且其中任何一个都可以真正实现我想要的！

仅供参考，我正在使用 mono for android 和支持 v2.3+​​ 的兼容性包，但希望可以翻译任何 java 示例等。

提前谢谢了！罗宾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:16:36.797

我不确定这将如何与 monodroid 一起使用，但我猜它应该大致相同。使用 AsyncTaskLoader，因为它们通过 LoaderManager 与活动生命周期相关联。您应该让您的片段实现 LoaderCallbacks 接口并`loaderManager.init(...)`在其中的某处调用（例如， in `onActivityCreated`）。加载器任务完成后，您将收到`onLoadFinished`数据通知，您可以在那里将其加载到适配器中并进行进度条和列表视图转换。您可以在此处的文档页面上找到有关如何实现 AsyncTaskLoader 的示例，或者[在此处](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)获得更多详细[信息](http://www.androiddesignpatterns.com/2012/08/implementing-loaders.html)。至于过渡，请使用类似[这样](http://developer.android.com/training/animation/crossfade.html)的东西，它可以为您的应用程序提供一些润色。

# android - Android：拍照和保存，人像模式/风景模式

> ID：14999625
> 
> 赞同：1
> 
> 时间：2013-02-21T10:14:16.203
> 
> 标签：android, camera, rotation, landscape, portrait

当我使用我的 android 相机处于肖像模式时，看到的图像是横向的所以我写道：

```
 Method rotateMethod;
    rotateMethod = android.hardware.Camera.class.getMethod("setDisplayOrientation", int.class);
    rotateMethod.invoke(camera, 90); 
```

有用。然而，当我保存图像时，他的横向图像（宽度大于高度）我可以做些什么来收集我的相机看到的图像（字节 []）？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-21T10:52:17.530

使用此代码：

```
Parameters p=camera.getParameters(); 
p.set("orientation", "portrait");    
camera.setParameters(p); 
```

并开始相机预览

# networking - 是否可以在没有操作系统集成的情况下将数据从服务器推送到客户端（电话、计算机）

> ID：14999629
> 
> 赞同：4
> 
> 时间：2013-02-21T10:14:21.660
> 
> 标签：networking, cloud, network-protocols

服务器有没有办法将一些数据无线无缝地推送到客户端，可能是 Windows（电话）、iPhone、Mac 或 Android 设备，而无需任何操作系统集成？

如果是这样，最好的设计模式是什么，最好的技术是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T01:47:17.283

使用[WebSocket](http://en.wikipedia.org/wiki/WebSocket)（带或不带[socket.io](http://socket.io)）。将来，您可以使用 WebRTC。

使用 Websockets，设置非常简单。客户端（用户代理，如浏览器或 WebView）通过 http(s) 连接到 Websocket 服务器（防火墙问题较少），仅此而已。有一个带有基于事件的 API 的双向套接字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:53:30.707

如果“操作系统集成”是指“为每个平台编写特殊代码”，那么答案是否定的。

正如您所提到的，您想要文件系统访问和后台处理。目前，该组合无法以跨平台方式使用。

如果通过“操作系统集成”您的意思是“无需等待 apple/google/ms 提供该功能”，那么答案是肯定的/也许。

所有流行的平台都支持推送通知和后台处理，只要您按照每个特定平台的预期方式对其进行编码。

但是文件系统访问将受限于平台对您的限制。例如，在 ios 和 win8(phone) 中，无法在您自己的应用程序私有文件结构之外写入或读取文件。出于安全原因，您无法访问其他应用程序的文件系统。

更新：

这里的一般模式是为您想要支持的每个平台发布一个应用程序。该应用程序将在其各自平台的推送通知服务中注册自己。

您将编写通用服务器端代码来接受要推送到所有客户端设备的数据。然后，您将为您支持的每个平台调用相应的推送 API，从而唤醒客户端设备并触发您提供的应用程序进行响应。

当应用程序打开时，您让应用程序联系您的服务器并下载完整数据“推送通知只是您应用程序的唤醒电话”

通过这种方式，您可以轻松判断哪些设备是如何接收数据的。

每个平台特定的应用程序必须将数据保存到其自己的本地存储中，并提供一种通过其各自平台支持的方法共享数据的方式。

在 IOS 上，它可以像支持“Open In..”范式一样简单。在 W8Phone 上，您必须通过可用的“共享合同”之一发布数据，等等，以用于您想要支持的每个平台。

这是目前的一般模式。有一些警告。在 IOS 上，应用程序不会在收到推送通知时自动启动。这意味着您的应用程序只会在用户打开应用程序时下载全部数据。

移动应用程序通常也不能在后台无限期运行。这意味着一旦应用程序启动，您的应用程序将有一个有限的窗口来自动处理推送通知。在允许的“背景时间”​​之后。应用程序将关闭并且设备上的任何推送通知都会发出哔哔声，但在用户点击其中一个通知或直接打开应用程序之前不会打开应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T21:22:25.820

[推送技术](http://en.wikipedia.org/wiki/Push_technology)只是服务器发起数据传输的一种方法，而不是客户端*向*服务器请求它。

Apple 通过在操作系统中提供此类内置功能，使推送技术相对易于使用。以及 Android 通过[Google Cloud Messaging for Android](http://developer.android.com/google/gcm/index.html)。但是，Windows 没有。

Apple 推送通知和 Google 针对 Android 的消息传递似乎是操作系统需要处理的神奇和/或功能；但是，情况不一定如此。将其“集成”到操作系统中的优势与让框架为您处理功能相同。

* * *

*用技术术语来说，推送技术是从客户端到接受消息*的服务器的长期连接。这些消息将被视为*推送消息*，因为客户端没有**单独**请求它们。

在自己实施推送技术时要记住的主要事情是，客户端**负责**尽可能地保持该长期连接的活动。由于客户端 IP 地址可以在断开连接之间更改，因此服务器不能保证客户端的地址在断开连接之间保持不变。此外，客户端可以从防火墙后面连接，从而使服务器无法访问客户端。

相比之下，[拉取技术](http://en.wikipedia.org/wiki/Pull_technology)是客户端连接到服务器并请求数据的更传统的过程。

* * *

对于 Apple iOS，您最好的选择是使用他们的[推送通知服务](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)。

对于 Android 设备，您应该使用[适用于 Android 的 Google Cloud Messaging](http://developer.android.com/google/gcm/index.html)。或者，您可以创建自己的后台服务来处理消息；这是一个[指南](http://marakana.com/forums/android/examples/60.html)。

对于 Windows（*至少是桌面*），您**必须**创建自己的服务来执行此类任务。这是[MSDN 指南](http://msdn.microsoft.com/en-us/library/zt39148a.aspx)，解释了如何使用 Visual Studio（*VB 和 C#*）创建 Windows 服务。可能已经构建了在 Windows 上处理此类消息传递的框架，但是，我不知道。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T09:04:33.343

如果您想在服务器和客户端之间接收和发送实时通信（无论设备或操作系统如何），我强烈建议您使用 XMPP 技术，因为它专为您所要求的事情而设计。

可扩展消息和存在协议 (XMPP) 是可扩展标记语言 [XML] 的应用程序配置文件，它能够在任何两个或多个网络实体之间实现结构化但可扩展数据的近实时交换。[XMPP‑CORE] 中定义的 XMPP 的核心特性为许多类型的近实时应用程序提供了构建块，这些应用程序可以通过发送特定 XML 命名空间限定的应用程序特定数据而在核心之上分层。

[http://xmpp.org/rfcs/rfc6121.html#intro](http://xmpp.org/rfcs/rfc6121.html#intro) - 这是最新的 RFC，它将为您提供一个很好的起点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T11:08:20.367

为什么不使用网络服务？在我之前的项目中，我使用 webservice 从 mysql 数据库传递数据。我使用的网络服务是 nusoap。在客户端，我使用了 Android 的 kSoap 库。希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-02T02:46:14.980

从技术上讲，您可以使用[XMPP Libraries](http://xmpp.org/xmpp-software/libraries/)，它用于实现聊天系统（msn、gtalk、facebook 聊天等），但这可以作为推送消息系统很好地工作，因为它是开源的并且可以很好地处理您的所有情况从来没想过。您也可以托管自己的服务器并以这种方式发送推送消息......

# visual-studio - 如何解决此错误：加载包含文件 'EF.Utility.CS.ttinclude' 返回 null 或空字符串

> ID：14999633
> 
> 赞同：29
> 
> 时间：2013-02-21T10:14:34.500
> 
> 标签：visual-studio, entity-framework-5, t4, .net-framework-version

如何解决这些错误：

1.  加载包含文件 'EF.Utility.CS.ttinclude' 返回了一个 null 或空字符串。
2.  值不在预期范围内。

使用的工具：VS 2012、Entity Framework 5.0.0、T4MVCExtensions 3.5.0、.NET Framework 4.5

我一直在大型 MVC 解决方案中的项目中使用 EF 和 T4 模板，没有发生任何事故。现在，当我右键单击 edmx 图时，EF 会响应消息：值不在预期范围内。当我编译 EF 项目时，它会响应以下消息：

1.  加载包含文件 'EF.Utility.CS.ttinclude' 返回了一个 null 或空字符串。转换将不会运行。C:\Projects\NSAForms\NSAForms\NSAFormsEDM\NSAFormsEntities.tt
2.  无法解析文件的包含文本：C:\Projects\NSAForms\NSAForms\NSAFormsEDM\EF.Utility.CS.ttinclude C:\Projects\NSAForms\NSAForms\NSAFormsEDM\NSAFormsEntities.tt

数据库中的每个表都有一个主键。我对这个问题的突然出现感到震惊。有没有人有一些建议如何解决这个问题？

提前致谢，

阿诺德

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-11-13T18:44:27.433

我有非常相似的问题，我尝试使用 VS2012 和 VS2013。

重新安装 Entity Framework 6 Tools for Visual Studio 2012 [http://www.microsoft.com/en-us/download/confirmation.aspx?id=40762](http://www.microsoft.com/en-us/download/confirmation.aspx?id=40762) 后，一切都恢复正常。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-02-22T00:31:40.870

在 VS 2012 中，只有选择了**Microsoft Web Developer Tools**或**Microsoft SQL Server Data Tools**组件时才会安装*EF.Utility.CS.ttinclude文件。*

 ***** * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-11-09T15:55:14.230

重新安装适用于 Visual Studio 2012 的 Entity Framework 6 工具[http://www.microsoft.com/en-us/download/confirmation.aspx?id=40762](http://www.microsoft.com/en-us/download/confirmation.aspx?id=40762)为我工作

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-25T17:42:54.870

对于 VS2017，我最终将 EF6.Utility.CS.ttinclude 添加到模型的文件夹中。这解决了我的 MySql 和 EF 问题。

文件位于：C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\IDE\Extensions\Microsoft\Entity Framework Tools\Templates\Includes\EF6.Utility.CS.ttinclude

**更新** 为避免执行上述操作，完全删除实体然后重新添加修复了问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-18T15:53:23.387

> 视觉工作室 2017

得到了同样的错误，但只在一个测试项目中。在查看了测试项目和成功引用该文件的另一个项目后，我发现将以下内容添加到失败项目的 app.config 解决了我的问题

```
 <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="mssqllocaldb" />
      </parameters>
    </defaultConnectionFactory>
  <connectionStrings> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-02T18:01:12.830

在此功能已在 Professional 中运行后，最近安装 VS2017 Enterprise 时遇到此问题。
我的解决方案是：

1.  打开 Visual Studio 安装程序并“修改”我的 Enterprise 安装。
2.  在 Web & Cloud 部分下选择“ASP.NET 和 Web 开发”
3.  点击右下角的“修改” [![在此处输入图像描述](../Images/7e6b566f42bcc7276b6d07610674a7ba.png)](https://i.stack.imgur.com/aF7g7.png)

可能值得注意的是，我已经安装了 EF6，不需要重新安装它即可使其正常工作。

完成这些步骤并启动 Visual Studio 后，错误消失了，我能够成功生成我的类。希望这可以帮助！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-30T06:04:00.427

以上所有解决方案都对我不起作用，所以我创建了一个新项目以查看问题是否仍然存在，但新创建的项目中没有出现错误。然后，我将该项目与旧备份进行比较，以检查最近所做的更改并发现了问题。我最近在降级包**后将包 Clarius.TransformOnBuild 升级**到更新的版本，错误消失了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-11T14:51:50.610

在我的情况下，问题是由一个奇怪的文件夹名称（`%20`而不是空格）引起的。我只是用空格代替了同一个文件夹的目录连接，`%20`它解决了这个问题。

这是我用来建立联结的 PowerShell 命令：

```
cd "c:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\Common7\IDE\Extensions\Microsoft\"
mklink /j "Entity Framework Tools" "Entity%20Framework%20Tools"
Junction created for Entity Framework Tools <<===>> Entity%20Framework%20Tools 
```

然后，您可以使用`ls`查看目录内容，您应该会看到这两行（为简洁起见进行了编辑）：

```
Mode                LastWriteTime         Length Name
----                -------------         ------ ----
...
d----l        2/27/2019   9:57 AM                Entity Framework Tools
d-----        2/26/2019  12:24 PM                Entity%20Framework%20Tools
... 
```

在模式下，`l`表示它是一个“链接”（又名联结），而`d`表示它是一个目录。通过建立联结而不是重命名文件夹，您可以确保两个目录名称始终有效。****

# codeigniter - 使用内连接codeigniter查询4个表

> ID：14999644
> 
> 赞同：0
> 
> 时间：2013-02-21T10:15:05.130
> 
> 标签：codeigniter, activerecord

我有 4 个表 jobs、company、employment_type 和 job_category，每个表的主键是 job_id、com_id、type_id、job_cat_id，但（com_id、type_id、job_cat_id）是工作表的外键。

我没有活动记录的查询完美地工作，如下所示

```
select company.com_id, company.company_name, jobs.job_id, jobs.title, jobs.opening_date, jobs.closing_date, jobs.number_of_pos, employment_type.type_id, employment_type.type, job_category.job_cat_id,  job_category. category from company inner join jobs on company.com_id=jobs.com_id inner join employment_type on employment_type.type_id=jobs.type_id inner join job_category on job_category.job_cat_id=jobs.job_cat_id 
```

但是如果我尝试使用 codeiginiter 活动记录，例如

```
 $this->db->select('company.com_id, company.company_name, jobs.job_id, jobs.title, jobs.opening_date, jobs.closing_date, jobs.number_of_pos, employment_type.type_id, employment_type.type, job_category.job_cat_id,  job_category. category');
            $this->db->from('company');
            $this->db->join('jobs','company.com_id=jobs.com_id','inner');
            $this->db->join('employment_type', 'employment_type.type_id=jobs.type_id','inner');
            $this->db->join('job_category', 'job_category.job_cat_id=jobs.job_cat_id','inner');
            $this->db->order_by('job_id','DESC');
            $this->db->limit($limit, $offset);
            $query = $this->db->get();
            return $query->result_array(); 
```

我最终出现以下错误

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '`) INNER JOIN `jobs` ON `company`.`com_id`=`jobs`.`com_id` INNER JOIN `employmen' at line 1

SELECT `company`.`com_id`, `company`.`company_name`, `jobs`.`job_id`, `jobs`.`title`, `jobs`.`opening_date`, `jobs`.`closing_date`, `jobs`.`number_of_pos`, `employment_type`.`type_id`, `employment_type`.`type`, `job_category`.`job_cat_id`, `job_category`.` category FROM (`company`) INNER JOIN `jobs` ON `company`.`com_id`=`jobs`.`com_id` INNER JOIN `employment_type` ON `employment_type`.`type_id`=`jobs`.`type_id` INNER JOIN `job_category` ON `job_category`.`job_cat_id`=`jobs`.`job_cat_id` ORDER BY `job_id` DESC LIMIT 10 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:26:56.573

你有一个空间`job_category. category`可以删除它，你应该是金色的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:29:56.843

像这样格式化您的查询

```
$data   =   array(
                'company.com_id', 
                'company.company_name', 
                'jobs.job_id', 
                'jobs.title',
                'jobs.opening_date', 
                'jobs.closing_date', 
                'jobs.number_of_pos', 
                'employment_type.type_id', 
                'employment_type.type', 
                'job_category.job_cat_id',  
                'job_category.category'
);

$this->db->select($data);
$this->db->from('company');
$this->db->join('jobs','company.com_id=jobs.com_id','inner');
$this->db->join('employment_type', 'employment_type.type_id=jobs.type_id','inner');
$this->db->join('job_category', 'job_category.job_cat_id=jobs.job_cat_id','inner');
$this->db->order_by('job_id','DESC');
$this->db->limit($limit, $offset);
$query = $this->db->get();
return $query->result_array(); 
```

# cocoa - 将 NSDictionary 的本地声明传递给 performSelector

> ID：14999649
> 
> 赞同：0
> 
> 时间：2013-02-21T10:15:17.720
> 
> 标签：cocoa, nsdictionary, selector

它是如何做到的，我不需要将数据对象放在选择器调用方法中？

带有警告的代码（本地数据声明）：

```
NSDictionary *data = [NSDictionary dictionaryWithObjectsAndKeys:@"SiluetaImage", @"ACTION", silueta_id, @"siluetaid", siluetaTyp_id, @"siluetatypid", nil];
[self performSelector:@selector(downloadBinDataForTyp:data:) 
           withObject:@"SiluetaImage" 
           withObject:data]; 
```

没有警告的代码：

```
[self performSelector:@selector(downloadBinDataForTyp:data:) 
           withObject:@"SiluetaImage" 
           withObject:[NSDictionary dictionaryWithObjectsAndKeys:@"SiluetaImage", @"ACTION", silueta_id, @"siluetaid", siluetaTyp_id, @"siluetatypid", nil]]; 
```

选择器：

```
- (void)downloadBinDataForTyp:(NSString *)typ data:(NSDictionary*)data
{
    ASINetworkQueue *q = [self queue];
    NSString *sUrl = @"url_web_service";

    ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:sUrl]];
    NSString *msgLength = [NSString stringWithFormat:@"%d", [[self getMsg] length]];

    [request setTimeOutSeconds:60];
    [request addRequestHeader: @"Content-Type" value:@"text/xml; charset=utf-8"];
    [request addRequestHeader: @"SOAPAction" value:_action];
    [request addRequestHeader: @"Content-Length" value:msgLength];
    [request setRequestMethod: @"POST"];
    request.userInfo = data;

    [request appendPostData:[self getMsg]];
    [request setDelegate:self];

    [q addOperation:request];
    [q go];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:23:44.477

```
NSDictionary *data = [NSDictionary dictionaryWithObjectsAndKeys:@"SiluetaImage", @"ACTION", silueta_id, @"siluetaid", siluetaTyp_id, @"siluetatypid", nil];
[self performSelector:@selector(downloadBinDataForTyp:data:) 
           withObject:@"SiluetaImage" 
           withObject:data]; 
```

在此，您将`data`其范围仅传递给该方法。并且在方法之外无法访问它，因为它正在获取`release`d。

# javascript - 解析 JSON 字符串时出错

> ID：14999650
> 
> 赞同：0
> 
> 时间：2013-02-21T10:15:17.697
> 
> 标签：javascript, json

我收到以下错误：

> 未捕获的异常：无效的 JSON：{"id":1,"channel":"V125954","text":"{"nick":"Du","visit":"1","text":"hello" ,"_ref":"Du","_cur":"Du","_ip":"Du","_browser":"Du","_os":"Du","_td":"12:29" }"}

尝试使用以下函数解析时：

```
 var parseJSON = function(data) {
    if (!data || !isString(data)) {
      return null;
    }

    // Make sure leading/trailing whitespace is removed (IE can't handle it)
    data = trim(data);

    // Attempt to parse using the native JSON parser first
    if (window.JSON && window.JSON.parse) {
      try {
        return window.JSON.parse( data );
      } catch(e) {
        throw "Invalid JSON: " + data;
        console.log(e);
      }
    }

    // Make sure the incoming data is actual JSON
    // Logic borrowed from http://json.org/json2.js
    if (validChars.test(data.replace(validEscape, "@").replace( validTokens, "]").replace( validBraces, "")) ) {
      return (new Function("return " + data))();
    }

    throw "Invalid JSON: " + data;
  }; 
```

通过nodejs发送数据是这样的：

```
 var options = {
          uri: 'http://localhost/pub?id=' + req.params.channel,
          method: 'POST',
          json: {
            "nick": "Du",
            "visit": "1",
            "text": "hej",
            "_ref": "Du",
            "_cur": "Du",
            "_ip": "Du",
            "_browser": "Du",
            "_os": "Du",
            "_td": "12:29",                                                                                                                                                             
          }
        };

        request_helper(options, function (error, response, body) {
          if (!error && response.statusCode == 200) {
            console.log("ok") 
          }
        }); 
```

有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:18:06.000

您的 json 无效。

使用 [http://jsonlint.com/](http://jsonlint.com/)来验证您的 json 文件。

更正的json

```
{
    "id": 1,
    "channel": "V125954",
    "text": {
        "nick": "Du",
        "visit": "1",
        "text": "hello",
        "_ref": "Du",
        "_cur": "Du",
        "_ip": "Du",
        "_browser": "Du",
        "_os": "Du",
        "_td": "12: 29"
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:18:18.277

您的 JSON 字符串无效，这就是您收到错误的原因。尝试类似：

```
{
    "id": 1,
    "channel": "V125954",
    "text": {
        "nick": "Du",
        "visit": "1",
        "text": "hello",
        "_ref": "Du",
        "_cur": "Du",
        "_ip": "Du",
        "_browser": "Du",
        "_os": "Du",
        "_td": "12: 29"
    }
} 
```

[您可以在http://jsonlint.org/](http://jsonlint.org/)验证您的 JSON 字符串

JSON 中嵌套结构的正确语法是：

```
{
   "obj": {
        "foo": "bar"
    }
} 
```

**不是**

```
{
   "obj": "{
        "foo": "bar"
    }"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:20:21.737

数据有问题

```
{"id":1,"channel":"V125954","text":"{"nick":"Du","visit":"1","text":"hello","_ref":"Du","_cur":"Du","_ip":"Du","_browser":"Du","_os":"Du","_td":"12:29"}"} 
```

`"text": "{"nick":"Du...`这部分有错误你需要转义，`\"nick`否则这应该是数据

```
{"id":1,"channel":"V125954","text":'{"nick":"Du","visit":"1","text":"hello","_ref":"Du","_cur":"Du","_ip":"Du","_browser":"Du","_os":"Du","_td":"12:29"}'}; 
```

# svn - 如何知道代码在哪个版本发生了变化？

> ID：14999653
> 
> 赞同：0
> 
> 时间：2013-02-21T10:15:24.967
> 
> 标签：svn

我想知道的是无论如何要知道什么时候（版本）的一个函数或一段代码。

在我的公司，我们经常使用颠覆来维护我们的项目。

有一次，我使用 winmerge 来区分不同版本的相同代码。但是版本的范围可能非常大。也许，版本 A r113 版本 B r2323455

我改变了一个部分，我想知道哪个版本的部分更改。也许在 r1244 或 r2454 我无法手动找到它，无论如何要解决这个难题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T10:22:39.380

也许你可以使用[svn blame](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.blame.html)。如果您使用的是 tortoise svn，请右键单击文件 -> tortoise svn - 责备

# objective-c - 如何在 iOS 6.x 中以静默方式在后台启动 APP

> ID：14999658
> 
> 赞同：3
> 
> 时间：2013-02-21T10:15:44.790
> 
> 标签：objective-c, ios6, jailbreak, launch

我们想在 iPhone 中静默启动一个 APP，而不要将这个 APP 带到前台。在 iOS 5.x 中，我们通过以下代码实现了这个目标：

```
 [(SBApplication*)app setDisplaySetting:0x4 flag:NO];
    [(SBDisplayStack*)displayStack pushDisplay:app];
    [(SBDisplayStack*)displayStack popDisplay:app]; 
```

但是，在 iOS 6.x 中不再有 SBDisplayStack。我做了一些搜索，但没有找到任何答案。有人说 SBWorkSpace 取代了 iOS 6.x 中的 SBDisplayStack。我们使用 SBAppToAppWorkspaceTransaction 来实现，但总是将 APP 带到前台，这并没有达到我们的目标。

任何人都可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T11:44:55.107

您可以使用私有框架中的`SBSLaunchApplicationWithIdentifier()`函数。`SpringBoardServices`它需要一个`suspended`参数：

```
SBSLaunchApplicationWithIdentifier(CFSTR("com.company.app"), TRUE); 
```

您还需要此`com.apple.springboard.launchapplications`权限。

# string - F# 中的绝对初学者 - 需要帮助

> ID：14999663
> 
> 赞同：-2
> 
> 时间：2013-02-21T10:15:52.707
> 
> 标签：string, f#

我有以下代码 -

```
let items = [
    (20,"cat");
    (13,"can");
    (19,"letter");
    (55,"dog");
    (87,"kettle");
    (122,"weight");
] 
```

有人可以给我举个例子，给出编号为 13 的项目名称吗？我尝试的一切都返回错误，在网上查找了一些示例，但没有一个！

注意 - 以前的解决方案不起作用。执行此操作的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:31:59.010

```
let getName people id =
    people 
    |> Seq.filter (fun person -> fst person = id)
    |> Seq.head
    |> snd

    // or: |> Seq.filter (fst >> (=) id)

let getId people name =
    people 
    |> Seq.filter (fun person -> snd person = name)
    |> Seq.head
    |> fst

let getNames people =
    people
    |> List.map snd 
```

您可以按如下方式调用它们：

```
printfn "%d" (getId people "LIAM")
printfn "%s" (getName people 44567)
printfn "%A" (getNames people) 
```

# c# - 在屏幕顶部（覆盖层）进行绘制的最有效方式。在.Net 中？

> ID：14999664
> 
> 赞同：1
> 
> 时间：2013-02-21T10:15:55.143
> 
> 标签：c#, .net, winforms, system.drawing

无论用户在做什么，我都想绘制元素并将它们移动到屏幕顶部。

如果我在 C# 中使用 Windows 窗体，我有 2 个解决方案：

1.  创建一个透明背景的窗体并在其上绘制，

    *   覆盖 OnPaint 事件
    *   每 X 毫秒无效
2.  为创建的每个元素（矩形、圆形等）创建一个透明背景表单。

    *   只需移动表格，不要强制重绘

表单处理是一种更昂贵的方式还是油漆刷新是？

我必须使用 WPF、Silverlight、C 或 Windows 窗体就可以了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:28:03.597

我可以建议如何在 WPF 中实现它 - 您可以在许多与 UI 相关的类和 TranslateTransform 类中使用 Transform 属性以有效地移动这些对象。

但这实际上取决于您计划在窗口中同时拥有多少移动对象。在某些情况下，切换到某些特定的面向游戏的解决方案（如 XNA 等）可能会更有效。

# c++ - 将 Win32 应用程序转换为对象

> ID：14999665
> 
> 赞同：1
> 
> 时间：2013-02-21T10:15:54.893
> 
> 标签：c++, winapi, object, main, winmain

我对 WinAPI 编程很陌生，并且已经编写了一个用于屏幕捕获的 Win32 应用程序。当我运行程序时，光标立即变为十字准线，我可以单击并拖动以捕获屏幕的一部分并将其保存到文件中。

但是，我现在想修改我的程序，使其不包含 main 方法 (WinMain)，并且本质上将其转换为对象类而不是应用程序类，以便我可以从其他程序调用函数。我无法找到有关如何执行此操作的良好资源，因为我相信 WinMain 在后台执行特殊功能，因此我不能简单地更改方法的名称。

任何人都可以提出一些好的资源或教程来解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:11:31.097

有很多方法可以做到这一点，但你的拳头要后退一步：

yopu 如何期望您的“程序”（让我们继续这样称呼）被调用？使用哪些参数和返回类型？

那么，你想暴露什么样的 API？标题中的 C++ 类？来自静态库的 C++ 类？从 DLL 导出的 AC 函数？COM 对象？

关于库、DLL 或 COM 库的外观有很多示例（只需尝试谷歌搜索这些关键字）。

最简单的方法是设置一个库或一个 DLL 项目（大多数 IDE 都有提供空骨架的向导），而不是在其中粘贴您需要保留在那里的相关代码，让它从公开的函数或类中调用方法。

只有在您决定了您的“对象”应该具有哪种“形式”之后，才能给出更准确的答案。

# jsf-2 - 如何清除会话范围托管 bean 的对象？

> ID：14999667
> 
> 赞同：11
> 
> 时间：2013-02-21T10:16:00.067
> 
> 标签：jsf-2, primefaces

我正在使用 primefaces 在 JSF 中开发一个基于登录的应用程序。因为我将记录的用户信息保存在会话范围的 managedbean 中，我需要在他注销时清除该详细信息，那么如何清除 SessionScoped ManagedBean 对象中的那些详细信息？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-21T11:31:53.650

您需要通过在您的操作方法中调用以下函数来使当前会话无效：

```
FacesContext.getCurrentInstance().getExternalContext().invalidateSession(); 
```

此外，由于会话范围的 bean 在后续请求中被丢弃，请务必发送重定向：

```
FacesContext.getCurrentInstance().getExternalContext().redirect("/login.xhtml"); 
```

或者，只需从您的方法返回导航案例结果：

```
return "login.xhtml?faces-redirect=true"; 
```

如果您不想使会话无效并有效地保留会话范围的 bean（我认为这是一种不好的做法），只需取消所有用户数据（希望收集在一个会话范围的托管 bean 中）在注销方法中（如果注销方法驻留在另一个会话范围的 bean 中，您可能需要注入该 bean）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T11:17:41.180

您不需要手动清除会话范围的托管 bean。只需清除用户会话。通过在 servlet 中使用以下代码进行注销。

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    System_Properties system_Properties=new System_Properties();
    PrintWriter out = response.getWriter();
    try {
        request.getSession().invalidate();            
    }finally {
        out.close();
    }
} 
```

如果您仍然手动清除托管 bean 数据，则可以使用以下代码完成。

```
FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("managed_bean_name", null); 
```

其中“mananged_bean_name”是托管 bean 的名称。

希望能帮助到你

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-21T11:13:50.390

当用户注销时，会话被销毁，所有 SessionScoped ManagedBean 对象也被销毁

# asp.net - 将 MemoryStream 文件存储到 Azure Blob

> ID：14999682
> 
> 赞同：14
> 
> 时间：2013-02-21T10:16:41.117
> 
> 标签：asp.net, azure, azure-blob-storage, memorystream

我有一个通过 System.Drawing 动态生成的图像。然后我将生成的图像输出到一个`MemoryStream`用于存储到我的 Azure blob 中。

但我似乎无法将我的文件存储在我选择的 blob 中。没有发生错误，我的图像已成功保存到`MemoryStream`. 正如预期的那样，我的 blob 是空的。

我已确保我的 blob 容器具有公共读/写访问权限。

## 代码

```
// Retrieve storage account from connection string.
CloudStorageAccount storageAccount = CloudStorageAccount.Parse(String.Format("DefaultEndpointsProtocol=https;AccountName={0};AccountKey={1}", Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.GetConfigurationSettingValue("CMSAzureAccountName").ToString(), Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.GetConfigurationSettingValue("CMSAzureSharedKey").ToString()));

// Create the blob client.
CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();

// Retrieve reference to a previously created container.
CloudBlobContainer container = blobClient.GetContainerReference("myimagecontainer");

// Retrieve reference to a blob named "myblob".
CloudBlockBlob blockBlob = container.GetBlockBlobReference("test.jpg");

//Output image
ImageCodecInfo[] Info = System.Drawing.Imaging.ImageCodecInfo.GetImageEncoders();
EncoderParameters Params = new System.Drawing.Imaging.EncoderParameters(1);
Params.Param[0] = new EncoderParameter(Encoder.Quality, 100L);

System.IO.MemoryStream msImage = new System.IO.MemoryStream();
GenerateImage.Render(imageOutput).Save(msImage, Info[1], Params); //GenerateImage.Render() method creates a custom image and returns a Bitmap

// Create or overwrite the "myblob" blob with contents from a local file.
using (var fileStream = msImage)
{
    blockBlob.UploadFromStream(fileStream);
} 
```

任何帮助，将不胜感激。

## 更新

我设法找到了错误的主要原因。我需要更改以下内容：

```
CloudStorageAccount storageAccount = CloudStorageAccount.Parse(String.Format("DefaultEndpointsProtocol=https;AccountName={0};AccountKey={1}", Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.GetConfigurationSettingValue("CMSAzureAccountName").ToString(), Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.GetConfigurationSettingValue("CMSAzureSharedKey").ToString())); 
```

到

```
CloudStorageAccount storageAccount = CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue("DiagnosticsConnectionString")); 
```

但我会将“Gaurav Mantri”回复标记为正确。如果不是他的洞察力，我的图像不会上传到 blob。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-21T10:30:36.410

尝试将内存流的位置设置为 0，看看是否有帮助。类似于下面的代码：

```
msImage.Position = 0;//Move the pointer to the start of stream.

// Create or overwrite the "myblob" blob with contents from a local file.
using (var fileStream = msImage)
{
    blockBlob.UploadFromStream(fileStream);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-12T21:01:45.447

我有同样的问题，代码有效，但 pdf 文件大小始终为 0，我必须使 MyMemoryStream.Position = 0; 下面是我使用的代码。希望它可以帮助某人。

```
using (pdfStream)
{
    pdfStream.Position = 0;
    blob.UploadFromStream(pdfStream);                            
    _model.ConvertedPdfUrl = blob.Uri.AbsoluteUri;
} 
```

# android - 为什么我的相对布局不占用整个屏幕高度

> ID：14999683
> 
> 赞同：2
> 
> 时间：2013-02-21T10:16:41.210
> 
> 标签：android, scrollview, android-relativelayout

所以，我有一些简单的布局，有一些文本和一个按钮。文本在开始时定位，在某些手机上，高度高于屏幕高度，因此我将其定位在滚动视图中。在该文本旁边，我还有一个文本视图和一个按钮，该按钮应位于屏幕的右下角。问题是一个大屏幕我的按钮不在底部，而是在文本结束的地方，我可以看到我的 relativelayout 没有占据 scrollView 的整个高度。我的布局：

```
<ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/text1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:text="Some dummy text"
        android:textColor="#969696"
        android:textSize="13dp" />

    <TextView
        android:id="@+id/text2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="false"
        android:layout_below="@+id/text1"
        android:text="some dummy text2"
        android:textColor="#969696"
        android:textSize="13dp" />

    <ImageButton
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:src="@drawable/btn49_2x" />

</RelativeLayout>

</ScrollView> 
```

我的真实布局有点复杂，所以我需要使用相对布局。但是如何确保它占据整个屏幕高度？

我尝试将高度设置为`wrap:content`但没有效果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T10:23:34.223

添加`android:fillViewport="true"`到您的滚动视图

# mysql - mysql中的内存泄漏使用不同的线程

> ID：14999685
> 
> 赞同：3
> 
> 时间：2013-02-21T10:16:48.353
> 
> 标签：mysql, c, gcc, memory-leaks

我正在编写一个简单的 C 程序来从 mysql db 请求一些数据，该函数在单线程应用程序中使用时不会报告内存泄漏，但在线程中会报告。

功能是这个我已经剥离了不必要的代码

```
BOOL getip(char * ip,int * port,BOOL serie)
{
    MYSQL * conn,mysql;
    MYSQL_RES * res;
    MYSQL_ROW row;

   char * server = "someip";
    char * user = "root";
    char * pass = "root";
    char * db = "testdb";
    char * query = NULL;

mysql_init(&mysql);

mysql_close(&mysql);

}

> ==30295== HEAP SUMMARY:
> ==30295==     in use at exit: 73,872 bytes in 21 blocks
> ==30295==   total heap usage: 85 allocs, 64 frees, 119,908 bytes allocated
> ==30295== 
> ==30295== 128 bytes in 1 blocks are definitely lost in loss record 2 of 5
> ==30295==    at 0x402A629: calloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
> ==30295==    by 0x408FB63: my_thread_init (in /usr/lib/i386-linux-gnu/libmysqlclient.so.18.0.0)
> ==30295==    by 0x408FE43: my_thread_global_init (in /usr/lib/i386-linux-gnu/libmysqlclient.so.18.0.0)
> ==30295==    by 0x408E2D7: my_init (in /usr/lib/i386-linux-gnu/libmysqlclient.so.18.0.0)
> ==30295==    by 0x406B3FA: mysql_server_init (in /usr/lib/i386-linux-gnu/libmysqlclient.so.18.0.0)
> ==30295==    by 0x406CB28: mysql_init (in /usr/lib/i386-linux-gnu/libmysqlclient.so.18.0.0)
> ==30295==    by 0x8048DD1: getip (database.c:22)
> ==30295==    by 0x80492DD: sockit (listener.c:50)
> ==30295==    by 0x4378D4B: start_thread (pthread_create.c:308)
> ==30295==    by 0x447BD3D: clone (clone.S:130)
> ==30295== 
> ==30295== LEAK SUMMARY:
> ==30295==    definitely lost: 128 bytes in 1 blocks
> ==30295==    indirectly lost: 0 bytes in 0 blocks
> ==30295==      possibly lost: 0 bytes in 0 blocks
> ==30295==    still reachable: 73,744 bytes in 20 blocks
> ==30295==         suppressed: 0 bytes in 0 blocks
> ==30295== Reachable blocks (those to which a pointer was found) are not shown.
> ==30295== To see them, rerun with: --leak-check=full --show-reachable=yes 
```

每次函数执行时泄漏都会增加，所以它一定是一个错误

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:22:52.817

`mysql_library_end();`最后有帮助吗？

测试这个：

```
int main(void)
{
    MYSQL *mysql;

    mysql_init(mysql);
    mysql_close(mysql);
    mysql_library_end();

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-09T07:05:56.553

尝试 [mysql_thread_end()](https://dev.mysql.com/doc/refman/5.0/en/mysql-thread-end.html)而不是 `mysql_library_end()`

# android - 使用 Google 地图 apiv2 片段的 Android 中的 UI 错误

> ID：14999687
> 
> 赞同：0
> 
> 时间：2013-02-21T10:16:49.433
> 
> 标签：android, android-layout, google-maps-api-2

我在我的项目中使用了 Google map API v2，在布局文件中我使用了我附加的以下代码。它运行良好，但在 UI 设计中，滚动活动时会形成黑色层

![在此处输入图像描述](../Images/e4c8918dd9e39e82bcd2d74f6544f79b.png)

**代码：**

```
<ScrollView
-----
--->

<LinearLayout
-----
----->
//bla bla bla
<fragment
    xmlns:map="http://schemas.android.com/apk/res-auto"
        android:id="@+id/mapview1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        class="com.google.android.gms.maps.MapFragment" 
         map:cameraZoom="15"
       />

//bla bla bla
</LinearLayout
-----
----->
</ScrollView
-----
---> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T15:01:11.883

另一种替代解决方案是使用新`GoogleMap.snapshot()`功能，并使用地图截图代替；[如此处](https://stackoverflow.com/a/18212473/495800)所述。

# c# - 数组的 Lambda 绑定表达式

> ID：14999690
> 
> 赞同：0
> 
> 时间：2013-02-21T10:16:55.580
> 
> 标签：c#, linq, lambda, expression-trees

我目前正在使用 Lambda 表达式编写动态选择子句，并停留在必须处理嵌套集合的地方。例如

```
class A
{
    public string Property1 {get;set;}
    public string Property2 {get;set;}
    public IEnumerable<B> Property3 {get;set;}
}

class B
{
    public string Prop1 {get;set;}
    public int Prop2 {get;set;}
} 
```

如上所示，我有 A 类和 B 类，并且我得到了 A 的集合，但是由于 A 中的这些数据将绑定到网格，因此不需要所有属性。它像视图依赖。视图定义要显示的字段。因此，我正在动态创建对象并向其添加所需的属性。这是我使用 Lambda 表达式完成的，如下所示，

```
Expression.Bind(p, Expression.PropertyOrField(entityExpression, p.Name)) 
```

如果我必须从类 A 中仅选择 Property1 和 Property2，则此方法有效，但是如果我想要作为集合的 Property3，它将不起作用，因为我正在动态创建类型并只是向其添加所需的属性。因此在运行时我会有这样的场景

```
IEnumerable<RuntimeType2> => RuntimeType2 { string Prop1 {get;set; }
IEnumberable<RuntimeType1> => 
RuntimeType1 { string Property1 {get;set;
IEnumerable<RuntimeType2> Property3 {get;set;} } 
```

以上是我想要实现的场景。对于简单的情况，我可以做到这一点，但是我正在努力绑定到集合。

我希望我的问题有足够的描述。如果您需要更多信息，请回复。任何指针都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:20:03.290

The problem is that you try to push a value of type `IEnumerable<B>` into a property with type `IEnumerable<RuntimeType2>`. You have to convert between the two by using a nested select (that you have to create using the Expression API to call the `Enumerable.Select` method).

# mysql - 带有PDO和参数的Mysql动态sql语句

> ID：14999691
> 
> 赞同：0
> 
> 时间：2013-02-21T10:16:56.657
> 
> 标签：mysql, pdo, dynamic-sql

我想创建一个动态 sql 语句并使用 PDO 运行它。我的问题是我有一些参数，我想不出一种传递参数的方法。前任 ：

```
$query = "Select * from tbl_task where 1=1";
if (!empty($name)) $query .= " AND name = ?";
if (!empty($status)) $query .= " AND status = ?"
$db_stmt = new PDOStatement();
$db_stmt = $this->db->prepare($query);
$db_stmt->bindParam (1,$name); 
$db_stmt->bindParam (2,$status); 
```

我的参数没有被绑定，我不知道我必须绑定多少个参数，除非我编写相同的 if 语句但使用 bindParam 指令。

我`mysql_real_escape_string`尝试将 bindParam 改为 PDO，但由于某种原因，我的参数被添加为空。

关于如何构建动态查询并将参数绑定到 PDO 的任何想法？

编辑 1：

```
$arr = array();
if (!empty($name)){
    $query .= " AND `name` like :NAME";
    $arr['NAME'] = $name;
}
$db_stmt = new PDOStatement();
$db_stmt = $this->db->prepare($query);
$db_stmt->execute($arr); 
```

我怎样才能写一个“喜欢”的声明？我试过

```
$query .= " AND `name` like :NAME" . "%"; 
```

并且不工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:26:50.600

我通常做的事情如下：

```
$query = "Select * from `tbl_task` where 1=1";
$arr = array();
if (!empty($name)) 
    {
    $query .= " AND `name` = :NAME";
    $arr['NAME'] = $name;
    }
if (!empty($status))
    {
    $query .= " AND `status` = :STATUS";
    $arr['STATUS'] = $status;
    }
$this->db->beginTransaction();
try
    {  
    $tmp = $this->db->prepare($query);  
    $tmp->execute($arr);
    $this->db->commit();
    }
catch(PDOException $ex)
    {
    $this->db->rollBack();
    $this->log->error($ex->getMessage());
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T10:26:57.593

不能添加 SQL 代码作为参数；只有数据会做。您必须将这些位强制放入`$query`. 它们不会被转义，因此它们不应该包含用户提交的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:34:13.807

我通常做的事情如下：

```
$query = "Select * from tbl_task where 1=1";
if (!empty($name)) $query .= $db->parse(" AND name = ?s", $name);
if (!empty($status)) $query .= $db->parse(" AND status = ?s",$status);
$data = $this->db->getAll($query); 
```

这个想法是有一个函数来解析任意查询部分而不是整个查询中的占位符。
不过，我不打扰本地准备好的语句。他们用大量无用的代码污染了 PHP 脚本，没有任何好处。

要回答
您被告知的更新问题，您不能绑定任意查询部分。但只是字面意思。
所以，让你的文字看起来像`foo%` ，然后用通常的方式绑定它。

# php - multi-dimensional array sorting?

> ID：14999695
> 
> 赞同：0
> 
> 时间：2013-02-21T10:17:01.790
> 
> 标签：php, cakephp, multidimensional-array

i am facing a problem related to array sorting . i want sort this array according to there points . please help me , thanx in advance

```
Array
(
[5] => Array
    (
        [0] => Array
            (
                [feedbacks] => Array
                    (
                        [emp_name] => test test
                    )

                [0] => Array
                    (
                        [point] => 19
                    )
            )
    )

[9] => Array
    (
        [0] => Array
            (
                [feedbacks] => Array
                    (
                        [emp_name] => a
                    )

                [0] => Array
                    (
                        [point] => 5
                    )
            )
    )

[8] => Array
    (
        [0] => Array
            (
                [feedbacks] => Array
                    (
                        [emp_name] => b
                    )

                [0] => Array
                    (
                        [point] => 23
                    )
            )
    )

[4] => Array
    (
        [0] => Array
            (
                [feedbacks] => Array
                    (
                        [emp_name] => c

                [0] => Array
                    (
                        [point] => -1
                    )
            )
    ) 
```

)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:24:07.157

Try this :

```
<?php

$arr='Your array';

$sort = array();
foreach($arr as $k=>$v) {
    $sort['point'][$k] = $v[0][0]['point']; // $v[0][0] is your point for each array
}

array_multisort($sort['point'], SORT_DESC, $arr);
///array_multisort($sort['point'], SORT_ASC, $arr); // for ascending order

echo "<pre>";
print_r($arr);

?> 
```

# android - Android：当片段视图准备好时如何通知 Activity？

> ID：14999698
> 
> 赞同：28
> 
> 时间：2013-02-21T10:17:19.537
> 
> 标签：android, android-fragments, google-maps-android-api-2

我在地图位于第二个位置的下拉导航活动中使用 Google Maps API V2。

我正在务实地添加地图，例如：

```
mMapFragment = supportMapFragment.newInstance();
getSupportFragmentManager()
        .beginTransaction()
        .replace(R.id.placeHolder, mMapFragment, TAG_MAP)
        .commit(); 
```

我想获得 GoogleMap ovject，因为文档[https://developers.google.com/maps/documentation/android/map](https://developers.google.com/maps/documentation/android/map)说它应该用 完成`mMapFragment.getMap()`，但它返回 null。

根据[http://developer.android.com/reference/com/google/android/gms/maps/SupportMapFragment.html](http://developer.android.com/reference/com/google/android/gms/maps/SupportMapFragment.html) 如果 Fragment 没有经历 onCreateView 生命周期事件，它会返回 null。

我怎么知道片段何时准备好？

编辑：我发现这个[我如何知道使用 SupportMapFragment 时地图已准备好使用？](https://stackoverflow.com/questions/14047257/how-do-i-know-the-map-is-ready-to-get-used-when-using-the-supportmapfragment)

覆盖 onActivityCreated 似乎是一个解决方案，但是我必须通过构造函数而不是使用 newInstance() 来实例化片段，这有什么区别吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-02-21T16:42:18.303

我首选的方法是使用回调从`Fragment`. 另外，这是 Android 在[与 Activity 通信时提出的推荐方法](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)

对于您的示例，在您的 中`Fragment`，添加一个接口并注册它。

```
public static interface OnCompleteListener {
    public abstract void onComplete();
}

private OnCompleteListener mListener;

public void onAttach(Context context) {
    super.onAttach(context);
    try {
        this.mListener = (OnCompleteListener)context;
    }
    catch (final ClassCastException e) {
        throw new ClassCastException(context.toString() + " must implement OnCompleteListener");
    }
} 
```

现在在你的实现这个*接口*`Activity`

```
public class MyActivity extends FragmentActivity implements MyFragment.OnCompleteListener {
    //...

    public void onComplete() {
        // After the fragment completes, it calls this callback.
        // setup the rest of your layout now
        mMapFragment.getMap()
    }
} 
```

现在，无论你在什么`Fragment`地方表示它已经加载，通知你`Activity`它已经准备好了。

```
@Override
protected void onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    // create your fragment
    //...

    // signal that you're done and tell the Actvity to call getMap()
    mListener.onComplete();
} 
```

**编辑**2017-12-05 onAttach(Activity activity) 已[弃用](https://developer.android.com/reference/android/app/Fragment.html#onAttach(android.app.Activity))，请改用 onAttach(Context context)。上面的代码已调整。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-19T11:14:02.747

除了[柯克的回答](https://stackoverflow.com/a/15007656/653513)：因为`public void onAttach(Activity activity)`已弃用，您现在可以简单地使用：

```
@Override
public void onAttach(Context context) {
    super.onAttach(context);

    Activity activity;

    if (context instanceof Activity){

        activity=(Activity) context;

        try {
            this.mListener = (OnCompleteListener)activity;
        } catch (final ClassCastException e) {
            throw new ClassCastException(activity.toString() + " must implement OnCompleteListener");
        }
    }
} 
```

其余的保持不变......尽管有人可能希望将其`(Fragment sender)`用作参数并始终传递`this`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-29T10:58:28.530

**如果你想在没有任何监听器的情况下这样做：**

添加带有**标签的片段**

```
 supportFragmentManager
                .beginTransaction()
                .add(R.id.pagerContainer, UniversalWebViewFragment.newInstance(UniversalWebViewFragment.YOUTUBE_SERACH_URL+"HD trailers"), 
                "UniversalWebView")
                .disallowAddToBackStack()
                .commit() 
```

**在加载片段后要调用**的 Hosting Activity 类中创建一个公共方法。**在这里，我正在回调我的片段的方法，例如**

 **```
public fun loadURL() {
        val webViewFragment = supportFragmentManager
                              .findFragmentByTag("UniversalWebView") 
                               as UniversalWebViewFragment

        webViewFragment.searchOnYoutube("Crysis Warhead")
    } 
```

现在在**`onViewCreated`**片段的 Method 中，您可以像这样简单地调用 Host 活动的公共方法：

```
 (activity as HomeActivity ).loadURL() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T16:25:38.163

我不确定我是否完全理解您的问题，但我有一个类似的设置，我正在使用导航下拉菜单。这对我有用：

1.) 从 xml 文件加载片段并调用 setupMapIfNeeded()

```
SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()
                .findFragmentById(R.id.basicMap);

setUpMapIfNeeded(); 
```

这是供参考的xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/basicMap"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  class="com.google.android.gms.maps.SupportMapFragment" /> 
```

2.) 然后设置地图（有关 isGoogleMapsInstalled() 的详细信息，请参阅[此问题](https://stackoverflow.com/a/13789869/1103584)）

```
 private void setUpMapIfNeeded() 
    {
    // Do a null check to confirm that we have not already instantiated the map.
    if (mMap == null) 
    {
        // Try to obtain the map from the SupportMapFragment.
        mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.basicMap)).getMap();
        // Check if we were successful in obtaining the map.
        if(isGoogleMapsInstalled())
        {
            if (mMap != null) 
            {
                mMap.setOnCameraChangeListener(getCameraChangeListener());
                mMap.setInfoWindowAdapter(new MyCustomInfoWindowAdapter(this));
            }
        }
        else
        {
            MapConstants.showDialogWithTextAndButton(this, R.string.installGoogleMaps, R.string.install, false, getGoogleMapsListener());
        }
    }
    } 
```

3.) 确保您还从 onResume() 调用 setUpMapIfNeeded()：

```
public void onResume()
{
    super.onResume();

    setUpMapIfNeeded();
} 
```**

# java - Java - readObject() 和 setSoTimeout()

> ID：14999703
> 
> 赞同：6
> 
> 时间：2013-02-21T10:17:28.583
> 
> 标签：java, sockets, socket-timeout-exception

所以，我在我的客户端写了一个线程，它试图`readObject()`从一个套接字流。

只要客户端连接，此线程就会运行。

可以在客户端的 GUI 上关闭与服务器的连接。如果客户端决定通过单击“断开连接”菜单选项断开连接（这不会退出客户端程序），则套接字将被关闭并将 a`isConnected`设置为 false。

由于客户端读取线程尝试`readObject()`从流中读取，而连接可以通过 GUI 关闭，我将超时设置为 250 毫秒（`setSoTimeout(250)`）。

```
@Override
public void run()
{
  this.connection = this.connectionHandler.getSocket();
  while(connectionHandler.isConnected())
  {
    this.readCircle();
  }
  this.connectionHandler.setReadTaskRunning(false);
}

private void readCircle()
{
  try
  {
    this.connection.setSoTimeout(250);
    this.connectionHandler.readData(); //this uses readObject().
  }
 catch(SocketTimeoutException timeout){}
 catch(...){} 
```

}

我知道这`readObject()`会阻塞，为了检查客户端是否仍然连接，我将它包装在 a 中`while`，它检查（每次超时）客户端套接字是否仍然连接。

我现在的问题：

如果`readObject()`开始获取服务器传递的对象，尝试读取它，但在处理超时时，流上的数据会以某种方式“损坏”，因为它被取消了。`readObject()`或者如果GUI线程想要关闭套接字，我应该让块并捕获异常。

我对套接字不是很有经验，也许我的方法是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:23:25.833

套接字读取超时将导致 a`SocketTimeoutException`被抛出`readObject()`。您可能无法重用它`ObjectInputStream`，并且流可能会被损坏，因为它的当前位置将在很大程度上保持未定义。

这可能只能通过关闭并重新打开连接来解决。

# google-maps - 如何从 Google Map API 的参数变量中获取城市名称

> ID：14999710
> 
> 赞同：1
> 
> 时间：2013-02-21T10:17:50.973
> 
> 标签：google-maps

我正在使用此功能：`getDirection(glat,glon,acity)`使用此功能，我必须绘制一条从城市到 glat 和 glong [纬度和经度] 位置的路线。我已经完成了一切，但我不知道如何将变量 acity 设置为原点。

```
var directionsService = new google.maps.DirectionsService();
var directionsDisplay = new google.maps.DirectionsRenderer();
var default_latitude=22.5936840;//12.9715987;
var default_longitude=78.962880;//77.5945627;
var myOptions = 
{
    center: new google.maps.LatLng(default_latitude,default_longitude),
    zoom: 4,
    mapTypeId: google.maps.MapTypeId.ROADMAP
};

var map = new google.maps.Map(document.getElementById("mapp"),myOptions);

var latlng=new google.maps.LatLng(glat,glon);

$('#mapDiv1').modal({closeClass: "mapCloseImg1"});

directionsDisplay.setMap(map);
directionsDisplay.setPanel(document.getElementById("panel"));

var request = {
  origin: [WANT TO PUT ACITY AS ORIGIN BUT DONT KNOW HOW]
  destination:latlng,
  travelMode: google.maps.DirectionsTravelMode.DRIVING
};

directionsService.route(request, function(response, status) {
  if (status == google.maps.DirectionsStatus.OK) {
    directionsDisplay.setDirections(response);
  }
}); 
} 
```

# pdf - 如何从 pdf 组件中知道 url？(Tridion2009)

> ID：14999713
> 
> 赞同：0
> 
> 时间：2013-02-21T10:18:04.393
> 
> 标签：pdf, tridion2009

我们有一些 pdf 作为多媒体组件。在发布我们使用 pdf 的页面之前，我想知道 url。该组件已发布。

我试图猜测寻找另一个示例： domain/en/multimedia/Name_pdf.pdf 但没有用......

¿ 有人知道规则吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:46:26.247

**很大程度上**取决于您如何处理模板中的多媒体组件，是否创建变体（可能不是用于 PDF 文件），以及在一定程度上，您使用的交付环境类型及其配置方式。

如果您尝试从模板输出指向已发布二进制文件的链接，您可能应该通过输出如下语法来使用开箱即用的功能

```
<a href="#" tridion:href="[MMCompTcmUri]">text</a> 
```

从您的模板中，然后使用其他默认 TBB 发布组件并为您解析链接。

但是，在默认的标准 2009 环境中，通过正常发布，您应该会发现您的文件只是发布到位于以下位置的文件系统

```
<Publication Images Path>\<Binary Filename> 
```

链接解析为

```
http://<Your server>/<Publication Images URL>/<Binary Filename> 
```

注意：在早期版本的 Tridion 中，二进制文件名被操纵以包含 TCM Id 以实现唯一性，但到 2009 年不再是这种情况

# css - wro4j 通配符不适用于类路径？

> ID：14999717
> 
> 赞同：2
> 
> 时间：2013-02-21T10:18:11.503
> 
> 标签：css, maven, wro4j

```
<groups xmlns="http://www.isdc.ro/wro">
    <group name="index">
        <css>classpath:gss/**</css>
    </group>
</groups> 
```

结果是

```
[INFO] wroManagerFactory class: ro.isdc.wro.extensions.manager.standalone.GoogleStandaloneManagerFactory
0    WARN DefaultWildcardStreamLocator - No resource found for wildcard: **
4    WARN DefaultWildcardStreamLocator - No resource found for wildcard: **
15   WARN DefaultWildcardStreamLocator - No resource found for wildcard: ** 
```

但

```
<groups xmlns="http://www.isdc.ro/wro">
    <group name="index">
        <css>classpath:gss/compass/screen.gss</css>
    </group>
</groups> 
```

结果是

```
[INFO] file size: index.css -> 1001 bytes 
```

关于通配符匹配，我缺少一些简单的东西吗？Wro4j 1.6.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:12:33.740

这是一个错误。按照[报告问题](http://code.google.com/p/wro4j/issues/detail?id=680&start=100)的页面上的进度。

# java - R.java Android 库项目中的字段在 Intellij IDEA 中不是最终的

> ID：14999719
> 
> 赞同：3
> 
> 时间：2013-02-21T10:18:14.427
> 
> 标签：java, android, intellij-idea, android-library

在 Android 库模块中生成的 R.java 如下所示：

```
public final class R {
    public static final class attr {
    }
    public static final class drawable {
        public static int trele_le=0x7f020000;
    }
    public static final class id {
        public static int line_lay=0x7f050000;
        public static int foo_bar=0x7f050001;
    }
    ...
} 
```

因此，无法使用 RoboGuice：@InjectView(R.id.line_lay)，因为它需要一个 final 字段作为参数

但是在非库模块中，字段是最终的。

如何解决这个问题（使字段最终？）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:32:16.517

好的，这是一个 IDEA 错误：youtrack.jetbrains.com/issue/IDEA-78599

编辑：或者毕竟不是错误，而是 Android SDK 中的预期设计：[http ://tools.android.com/tips/non-constant-fields](http://tools.android.com/tips/non-constant-fields)

# android - 在窗口外单击时取消android mapview中的覆盖弹出视图

> ID：14999722
> 
> 赞同：0
> 
> 时间：2013-02-21T10:18:19.847
> 
> 标签：android

我正在使用带有叠加层的mapview，在这里我选择叠加层项目它显示特定叠加层项目的信息......现在我想在点击窗口一侧时关闭信息框..这里是我的示例代码..

```
popUp = getLayoutInflater().inflate(R.layout.village_popupwindow, null,
                false);
final GeoPoint selectedPoint = item.getPoint();     
mapParams = new MapView.LayoutParams(500, 300, selectedPoint,130, -200, MapView.LayoutParams.CENTER);
                mapView.addView(popUp, mapParams);

        ImageView imageView = (ImageView) findViewById(R.id.homeImage);
        TextView textTitle = (TextView) popUp.findViewById(R.id.text_title);
        TextView adress = (TextView) popUp.findViewById(R.id.text_plan);
        textTitle.setText(arrayListForAmenitiesDto.get(storeId).getName());
        adress.setText("Read more..."); 
```

任何人都知道如何关闭此弹出式布局？...不使用弹出式布局中的关闭按钮...我只想关闭弹出式布局，同时单击 popuplayout 之外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T13:48:47.563

只需使用此代码在外部触摸时关闭弹出窗口

```
 popUp.setOnTouchListener(new OnTouchListener() {            

        public boolean onTouch(View arg0, MotionEvent motionEvent) {

            return true;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:17:07.787

嗨，我解决了上述问题，我的回答是

```
otherHomesPlace.setOnFocusChangeListener(new OnFocusChangeListener() {

                @Override
                public void onFocusChanged(ItemizedOverlay overlay,
                        OverlayItem newFocus) {
                    // TODO Auto-generated method stub
                    System.out.println("Focus changed"+otherHomesPlace.getFocus());
                    if(otherHomesPlace.getFocus()==null){
                    popUp.setVisibility(View.GONE);
                }else{
                    popUp.setVisibility(View.VISIBLE);
                }
                }
            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:30:48.057

**您可以通过将onTouchListener**注册到 mapView来删除该弹出窗口。例如

```
mapView.setOnTouchListener(new OnTouchListener() {          
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        try{
            //you can remove your popup here. hope this helps.
        }catch (Exception e) {}
      return false;
    }
}); 
```

# javascript - JavaScript 中的 touchstart 不再返回 TouchList

> ID：14999724
> 
> 赞同：2
> 
> 时间：2013-02-21T10:18:25.790
> 
> 标签：javascript, jquery, javascript-events

我遇到了一个非常奇怪的问题。我将`touchstart`事件绑定到一个元素，并想检索事件的 X 和 Y 坐标。所有在线[文档](http://developer.apple.com/library/safari/#documentation/appleapplications/reference/SafariWebContent/HandlingEvents/HandlingEvents.html)都表明这可以通过以下方式之一获得：

*   `e.touches`
*   `e.targetTouches`
*   `e.changedTouches`

但是，以下代码在从 jQuery 运行时调用所有三个假定数组的`#test`返回值：`undefined`

```
$('#test').bind('touchstart', function(e) {
    alert(e.targetTouches);
    alert(e.touches);
    alert(e.changedTouches);
}); 
```

可以看这里的demo > [http://jsfiddle.net/c7UKV/1/](http://jsfiddle.net/c7UKV/1/)（需要在移动设备上查看，也可以直接看这里的结果 > [http://jsfiddle.net/c7UKV/ 1/嵌入式/结果/](http://jsfiddle.net/c7UKV/1/embedded/result/)）。

我的问题是有人知道解决方法，还是 jQuery 以某种我不知道的方式规范化事件？我测试的所有 jQuery 版本（1.6+）以及 iOS 模拟器和物理 iDevice 上都存在这个问题。

作为对上述内容的更新，使用 vanilla JavaScript（而不是 jQuery）调用它会返回正确的结果。例如，以下代码可以正常工作：

```
document.getElementById('test').addEventListener('touchstart', checkCoords, false);

function checkCoords(e)
{
    alert(e.targetTouches);
    alert(e.touches);
    alert(e.changedTouches);
} 
```

因此，这似乎是一个 jQuery 问题，而不是其他任何问题。[**您可以在此jsFiddle**](http://jsfiddle.net/c7UKV/8/)中看到上述内容正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T10:48:30.240

如[文档中所述](http://api.jquery.com/category/events/event-object/)，并非原始的每个属性都`event`被复制到 jQuery 的规范化事件对象中。

您仍然可以使用 originalEvent 对象访问它：

```
$('#test').bind('touchstart', checkCoords );

function checkCoords(e){
  alert(e.originalEvent.targetTouches);
  alert(e.originalEvent.touches);
  alert(e.originalEvent.changedTouches);
} 
```

# c# - 在 WinRT 中获取用户名和密码？

> ID：14999732
> 
> 赞同：0
> 
> 时间：2013-02-21T10:18:44.937
> 
> 标签：c#, authentication, windows-8, windows-runtime, windows-authentication

我在 Windows 8 中创建了一个示例应用程序，我需要 Windows 登录用户的用户名和密码才能在应用程序中对他/她进行身份验证。我知道我们可以`Environment.CurrentUser`在旧桌面应用程序中使用我如何在 Windows 8 Metro 应用程序中获取用户信息以进行身份​​验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:34:47.363

您可以获取当前用户名，但不能获取密码。

要使您的方案正常工作，您的应用程序需要选择企业身份验证功能，然后您应该能够`CredentialCache.DefaultNetworkCredentials`在您的应用程序中使用

# php - For/Foreach 循环在第一个条件下停止并且永远不会恢复

> ID：14999733
> 
> 赞同：0
> 
> 时间：2013-02-21T10:18:47.060
> 
> 标签：php, arrays, for-loop, foreach

A 有一个`array`这样的

```
Array
(
    [0] => stdClass Object
        (
            [user_id] => 3035
            [category] => Preliminary
            [value] => 0
            [fullname] => 
            [studid] => 1202924
            [remarks] => 
        )

    [1] => stdClass Object
        (
            [user_id] => 3035
            [category] => Midterm
            [value] => 0
            [fullname] => 
            [studid] => 1202924
            [remarks] => 
        )

    [2] => stdClass Object
        (
            [user_id] => 3035
            [category] => Semi-Finals
            [value] => 0
            [fullname] => 
            [studid] => 1202924
            [remarks] => 
        )

    [3] => stdClass Object
        (
            [user_id] => 3035
            [category] => Finals
            [value] => 0
            [fullname] => 
            [studid] => 1202924
            [remarks] => 
        )

    [4] => stdClass Object
        (
            [user_id] => 3035
            [category] => Remedial
            [value] => 0
            [fullname] => 
            [studid] => 1202924
            [remarks] => 
        )

    [5] => stdClass Object
        (
            [user_id] => 3036
            [category] => Preliminary
            [value] => 0
            [fullname] => 
            [studid] => 1202925
            [remarks] => 
        )

    [6] => stdClass Object
        (
            [user_id] => 3036
            [category] => Midterm
            [value] => 0
            [fullname] => 
            [studid] => 1202925
            [remarks] => 
        )

    [7] => stdClass Object
        (
            [user_id] => 3036
            [category] => Semi-Finals
            [value] => 0
            [fullname] => 
            [studid] => 1202925
            [remarks] => 
        )

    [8] => stdClass Object
        (
            [user_id] => 3036
            [category] => Finals
            [value] => 0
            [fullname] => 
            [studid] => 1202925
            [remarks] => 
        )

    [9] => stdClass Object
        (
            [user_id] => 3036
            [category] => Remedial
            [value] => 0
            [fullname] => 
            [studid] => 1202925
            [remarks] => 
        ) 
```

我想这样格式化

```
Array
(
    [0] => Array
        (
            [fullname] => 
            [studid] => 1202924
            [user_id] => 3035
            [Preliminary] => 0
            [Midterm] => 0
            [Semi-Finals] => 0
            [Finals] => 0
            [Remedial] => 0
        ),
    [1] => array
         (
            [fullname] =>
            [studid] => 1202925
            [user_id] => 3036
            [preliminary] => 0
            [midterm] => 0
            [semi-finals] => 0
            [finals] => 0
            [remedial] => 0
         )
) 
```

基本上按他们`studid`或`user_id`

现在我尝试了很多尝试，比如

```
$count = 0;
$uid = $subject_student_grades[$count]->user_id;

for($x=0;$x < count($subject_student_grades);$x++)
{
    if($uid == $subject_student_grades[$x]->user_id)
    {
        $test[$count]['fullname'] = $subject_student_grades[$x]->fullname;
        $test[$count]['studid'] = $subject_student_grades[$x]->studid; 
        $test[$count]['user_id'] = $subject_student_grades[$x]->user_id; 
        $test[$count][$subject_student_grades[$x]->category] =      $subject_student_grades[$x]->value;
    }else{
        $count++;
    }
 } 
```

**和**

$计数 = 0; foreach($subject_student_grades 作为 $value) {

```
 $uid = $subject_student_grades[$count]->user_id;

    if($uid == $value->user_id)
    {
        $test[$count]['fullname'] = $value->fullname;
        $test[$count]['studid'] = $value->studid; 
        $test[$count]['user_id'] = $value->user_id; 
        $test[$count][$value->category] = $value->value;

    }else{
        $count++;
    }
} 
```

但问题是它只循环带有`0`索引的第一部分，并且在条件停止并且不处理或循环其余部分之后，注意指出我做错了什么？

**编辑** 所以现在我编辑它并将计数放在`foreach loop`仍然相同的唯一迭代之外，`array`我认为在它不恢复的条件之后？如果我删除它，`else{}`它输出的数组结构比我的目标差得多。

我试图`echo`在 else 上输出一些东西，`echo's`我认为这里的问题是，在循环进入条件后它返回 true，然后继续到 else 并且不会返回到`if clause`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:23:00.370

`$count`关于第二个循环，肯定有一个错误：

```
foreach($subject_student_grades as $value)
{
    $count = 0; //Why is that here? 
```

这样，每次迭代都会覆盖`$count`to `0`，所以`$test`数组总是用 来寻址`0`，所以 element`0`将是那里唯一的一个。

这应该是这样的：

```
$count = 0;

foreach($subject_student_grades as $value)
{
    $uid = $subject_student_grades[$count]->user_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T09:08:17.317

foreach 的重点是，除了可能构建一个新数组之外，您实际上不需要维护计数（但是您可以使用速记）。

我会这样做

```
$test = array();
foreach($subject_student_grades as $value) {
    $temp = array();
    $temp['fullname'] = $value->fullname;
    $temp['studid'] = $value->studid; 
    $temp['user_id'] = $value->user_id; 
    $temp[$value->category] = $value->value;

    $test[] = $temp; # This is shorthand to assign the next numerical index

} 
```

if 语句似乎是多余的，因为它阻止了 count++ 当为 true 时，你的循环将完全不同步，因为 foreach 会自动向前移动，而你的 count 不会是第一次，所以总是会出现一次

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:23:23.333

计数必须在循环之外：

```
$count = 0;
foreach($subject_student_grades as $value)
{
    $uid = $subject_student_grades[$count]->user_id;

    if($uid == $value->user_id)
    {
        $test[$count]['fullname'] = $value->fullname;
        $test[$count]['studid'] = $value->studid; 
        $test[$count]['user_id'] = $value->user_id; 
        $test[$count][$value->category] = $value->value;

    }

    $count++;
} 
```

# git - git如何将特定子文件夹标记为分支

> ID：14999737
> 
> 赞同：0
> 
> 时间：2013-02-21T10:18:53.820
> 
> 标签：git, git-branch, subdirectory

最近我从 SVN 迁移到 GIT，使用`git-svn`.

签出代码的实际大小约为 24GB。在 GIT 中，目前我只看到一次分支为`origin/master`. 因此，如果每个开发者克隆 master，他每次都需要拉 24GB，这是真正的痛苦。

所以，我需要将一些现有的位置标记为分支，以便可以直接签出，而不是完整的 repo。

项目回购结构如下：

```
/Docs/
/project-maintainance/
/main-project/
             /module1
                    /branch1  
                    /branch2  
             /module2
                    /branch1  
                    /branch2
                    /branch3 
```

现在，为了完成这个任务，我想将一些特定的文件夹标记为分支，而不是创建新的分支。我浏览了很多网页，但这只会增加我的困惑，因为我是初学者。

如何从子文件夹而不是顶级文件夹创建分支？

编辑：现在我的目标是能够`checkout multiple subtrees, push and pull changes.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:55:14.017

Unfortunately, git does not work like this as it is a [distributed version control system (DVCS)](http://en.wikipedia.org/wiki/Distributed_version_control_system). This means that you have an entire copy of the code and not just part of it.

However, it is possible to do what is called a `shallow clone`. For example:

```
git clone <repo> --depth 1 
```

This approach comes with various caveats - you can find plenty more discussion [here](https://stackoverflow.com/questions/6900103/why-cant-i-push-from-a-shallow-clone).

Ultimately, 24GB is extremely large for a git repo. In fact I've never heard of such a large repository before. It may be worth investigating trying to drastically reduce it in size using the `filter branch` command.

I have written a [Ruby gem](https://github.com/bsnape/git-health-check) - which is still in early development - that provides some basic stats about your git repository such as large files in your history (and no longer in your `working copy`) that may be suitable candidates for removal using `filter branch`.

Another option could be to split your single repository into multiple ones. I can't strongly recommend this as I don't know how your code fits together, but there is [a great discussion here](https://stackoverflow.com/questions/359424/detach-subdirectory-into-separate-git-repository).

# perl - 无法使用 perl Net::Appliance::Session 库重新加载 Cisco 设备

> ID：14999742
> 
> 赞同：0
> 
> 时间：2013-02-21T10:19:17.703
> 
> 标签：perl, cisco

我正在尝试使用 net::appliance::session 库重新启动 Cisco 设备。但即使代码没有给出错误，设备也不会重新启动。这是我正在使用的两行：

```
$session->cmd(String => 'Reload',Match => ['/Proceed/'], );
$session->cmd(String => "\n", Match => ['//'],); 
```

在 Cisco shell 中，重新加载命令如下所示：

```
test#reload
Proceed with reload? [confirm]
Connection closed by foreign host. 
```

[cpan论坛中的这个帖子](http://cpanforum.com/threads/6937)也告诉我这样做。我认为回车和确认对话框有问题。因为当我尝试创建一个目录时它工作正常：

```
$session->cmd(String => 'mkdir',Match => ['/Create dire.*/'] );
$session->cmd(String => 'test',Match => ['//'] ); 
```

这在 Cisco shell 中的等价物：

```
test#mkdir
Create directory filename []? test
Created dir flash:test 
```

但是当我尝试删除这个需要回车作为确认的目录时，脚本再次失败。

```
$session->cmd(String => 'rmdir asd',Match => ['/Remove directory.*/'] );     
$session->cmd(String => '\n' ,Match => ['/Delete flash.*/'] );
$session->cmd(String => '\n'); 
```

思科的等价物是这样的：

```
test#rmdir test
Remove directory filename [test]? 
Delete flash:test? [confirm]
Removed dir flash:test 
```

所以我认为问题不在于 reload 命令。但问题是发送回车作为确认。我试过`\n` `\r` `\n\r` `\r\n`空字符串，但它们没有用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:39:52.420

也许思科设备区分大小写？在示例中，您在 Perl 代码中使用了“重新加载”和“重新加载”。

也许你可以试试这个：

$session->say('reload'); $会话->聚集（）；$session->say('确认'); $会话->聚集（）；

# ember.js - emberjs 开头的“加载屏幕”

> ID：14999745
> 
> 赞同：12
> 
> 时间：2013-02-21T10:19:22.813
> 
> 标签：ember.js, single-page-application, hottowel

我不知道，如果你看过这个演示应用程序：http: [//www.johnpapa.net/hottowel/](http://www.johnpapa.net/hottowel/)但是一旦你启动它，你会在开始时看到一个非常漂亮的加载屏幕，就像你在任何更大的屏幕上一样桌面应用程序/游戏。

所以我自己没有机会正确地浏览代码，但我最近开始使用 Emberjs，我觉得为我正在构建的整个 SPA 加载所有 js 代码可能在秒区。

我现在的问题是，如何使用 emberjs 实现这样的加载屏幕？还是有更好的方法来解决这个问题？（我不认为 requirejs 会是一个解决方案，虽然我可能是错的）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-10T00:00:23.933

我想为此提供一个替代答案。默认情况下，`ready`当 DOM 准备好时触发，之后可能需要一些时间来渲染您的应用程序，从而导致（可能）几秒钟的空白页面。对于我的应用程序，使用`didInsertElement`on`ApplicationView`是最好的解决方案。

例子：

```
App.ApplicationView = Ember.View.extend({
  didInsertElement: function() {
     $("#loading").remove();
  }
}); 
```

请注意，Ember 还提供延迟应用程序准备就绪的功能，请参阅[代码](https://github.com/emberjs/ember.js/blob/master/packages/ember-application/lib/system/application.js#L315)以获取更多信息。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-08-31T13:00:40.190

也许这是我做事的懒惰方式，但我只是通过在我的和我的 CSS 中添加一个`no-ember`类来解决这个问题`div.loading`

```
.ember-application .no-ember {
  display: none;
} 
```

（Ember 会自动将 . 添加`ember-application`到`body`.）

这样，您还可以添加 CSS3 动画以从加载屏幕过渡。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-02-22T10:19:39.233

你可以这样做：

```
App = Ember.Application.create({
  ready: function () {
    $("#loader").remove();
  }
}); 
```

在你的身体里你设置了这样的东西

```
<img src="img/loading.gif" id="loader"> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-06-04T22:42:49.353

作为使用 didInsertElement 的替代方法，willInsertElement 是执行加载 div 删除的更好事件，因为它将在应用程序模板在其中呈现之前从 body 标签中删除并消除“闪烁”效果（除非使用绝对定位加载 div ）。

例子：

```
App.ApplicationView = Ember.View.extend({
  willInsertElement: function() {
      $("#loading").remove();
  }
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-08T12:27:26.617

Ember 有一个自动加载视图逻辑。

通过简单地设置 App.LoadingView 及其模板，Ember 将在应用程序加载时显示该视图。

此功能可能会在下一个版本中更改，以支持看起来很有前途的嵌套加载路线功能。见下文：

[文件草稿](https://gist.github.com/machty/6944577)

[功能提案和讨论](https://github.com/emberjs/ember.js/pull/3568)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-11T18:46:49.070

在 Ember 2.0 中不再有 View 层，但你可以对初始化器做同样的事情：

```
App.initializer({
  name: 'splash-screen-remover',
  initialize: function(application) {
    $('#loading').remove();
  },
}); 
```

# jsf - JSF Validator：ValidateDoubleRange 传递了一个 Double 对象，它认为我总是超出范围。为什么？

> ID：14999749
> 
> 赞同：1
> 
> 时间：2013-02-21T10:19:38.243
> 
> 标签：jsf, icefaces, validation

```
I have an inputtext, nothing fancy in it:

                <ice:inputText value="Test" rendered="#{!element.flag}"
                               partialSubmit="true" >
                    <f:validateDoubleRange minimum="#{element.minimumValueNum}"
                                           maximum="#{element.maximumValueNum}"/>
                </ice:inputText> 
```

element.minimumValue 是一个Double Object，element.minimumValue也是如此，问题是验证器总是认为我超出范围（任何给定值）...

如果我给出具体值：

```
 <ice:inputText value="Test" rendered="#{!element.flag}"
                           partialSubmit="true" >
                <f:validateDoubleRange minimum="10"
                                       maximum="100"/>
            </ice:inputText> 
```

它就像一个魅力：

如果我使用字符串转换，也可以：

```
 <ice:inputText value="Test" rendered="#{!element.flag}"
                               partialSubmit="true" >
                    <f:validateDoubleRange minimum="#{element.maximumValueNumString}"
                                           maximum="#{element.maximumValueNumString}"/>
                </ice:inputText> 
```

在正确的 Bean 处：

```
... public String getMaximumValueNumString() {
     return maximumValueNum.toString();
 }
 public String getMinimumValueNumString() {
    return minimumValueNum.toString();
}... 
```

所以我需要得出一个结论，即我不能将 Double 对象传递给 doubleRangeValidator，这是真的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:49:52.473

我认为你真的应该仔细检查你的“元素”映射或注释，也许它给你 null，它的范围总是零。

我自己的简单示例：

```
 <ice:inputText value="#{transfer.monto}" partialSubmit="true" id="monto">
      <f:validateDoubleRange minimum="#{transfer.minimum}" maximum="#{transfer.maximum}"/>
    </ice:inputText> 
```

价值观：

```
public double getMinimum() {
    return 10d;
}

public double getMaximum() {
    return 100d;
} 
```

使用“5”时的结果：

验证错误：属性......：10和100。

..

所以，简短的回答，它支持动态值。

问候。

# java - 如何修复 Java Web 应用程序中通过已发送数据的信息暴露漏洞

> ID：14999751
> 
> 赞同：0
> 
> 时间：2013-02-21T10:19:39.273
> 
> 标签：java, security, veracode

我`Information Exposure`通过`Sent Data`缺陷获得了 Veracode。我的代码是：

```
String companyName = System.getProperty(EPMIConstants.COMPANY_NAME); 
```

这`System.getProperty(EPMIConstants.COMPANY_NAME)`从服务器本身硬编码的 JVM 参数中获取其值。

变量`companyName`导致了这个缺陷。

有人可以告诉我如何避免这个缺陷吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:43:01.960

我建议您在 Veracode 中创建一个规则例外，这样误报就不会再突出显示。

法比奥

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:00:09.683

看看这个：

[http://cwe.mitre.org/data/definitions/201.html](http://cwe.mitre.org/data/definitions/201.html)

看起来这可能是误报。

法比奥@fcerullo

# php - PHP、MySQL、查询期间丢失与 MySQL 服务器的连接、TurnKey Ubuntu/Linux、

> ID：14999757
> 
> 赞同：2
> 
> 时间：2013-02-21T10:19:51.380
> 
> 标签：php, mysql, linux

嗨，所有 php 和 mysql 专家，

我试图为我的问题找到一些帮助或“教程”或类似的问题/答案，但没有成功。我已经安装了 TurnKey Linux、php、mysql，成功的宽度 ip 地址：172.##.##.##，我可以从另一个 comp 连接到这个服务器。我正在编辑 my.cnf 文件，我打开了 3306 端口，我可以通过 mysql -u root -p -h 172.##.##.## 从另一个 comp 连接。我添加了可以从任何主机或 IP 地址连接的用户：root。我也可以成功连接宽度 mysqladmin 或 mysql 工作台。我还可以在此服务器上创建数据库和一些表，如 db_test、tab_test 等，如果我在此服务器上使用下一个脚本，它的工作非常好：

```
<?php
$db_hostname="localhost";
$db_username="root";
$db_password="pxxxxx";

    $db_connect=mysql_connect($db_hostname, $db_username, $db_password);
    if (!$db_connect) {
        die('Could not connect: ' . mysql_error());
    }

    mysql_close($db_connect);
?> 
```

但是如果我使用下一个脚本它不起作用并向我报告错误：无法连接：查询期间丢失与 MySQL 服务器的连接；

```
<?php
$db_hostname="172.##.##.##";
$db_username="root";
$db_password="pxxxxx";

    $db_connect=mysql_connect($db_hostname, $db_username, $db_password);
    if (!$db_connect) {
        die('Could not connect: ' . mysql_error());
    }

    mysql_close($db_connect);
?> 
```

如果我使用另一个 php 服务器女巫可以看到或 ping 这个服务器，这个脚本也不起作用。

有人可以帮我解决这个问题！请。生无可恋。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T08:39:29.883

这篇评论有点长了……

它似乎不是连接错误 - 这是一条不同的错误消息。

更改 PHPMyAdmin 的配置不会对其他脚本产生任何影响。

如果您从 PHP 发布 mysql 配置的详细信息，它可能会有所帮助。您的 mysqld 也是以[skip-name-resolve](http://dev.mysql.com/doc/refman/5.1/en/server-options.html#option_mysqld_skip-name-resolve)开头的吗？您的示例脚本需要多长时间才能失败？

需要注意的一件事是，当 mysql 客户端在连接字符串中看到“localhost”时，它会尝试通过文件系统套接字进行连接 - 而不是网络套接字 - 当您将主机提供为 172 时，您是否会遇到相同的错误。## .##.## ?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T06:10:20.183

我有同样的错误，请到 xampp\phpMyAdmin\libraries\config.default.php

修改以下代码

```
existing one -  $cfg['ExecTimeLimit'] = 300;

modify to    -  $cfg['ExecTimeLimit'] = 600; 
```

# php - Facebook PHP SDK 3.0 注销完全不起作用

> ID：14999760
> 
> 赞同：1
> 
> 时间：2013-02-21T10:19:56.963
> 
> 标签：php, facebook

我正在尝试注销用户。我将用户重定向到注销页面。这工作正常。但是在注销页面中，我有一个重定向到登录页面的链接，当我去那里时，用户已经登录...我有一个回显来打印用户 ID...并打印我的用户 ID！

这是我的注销功能：

```
function logoutUrl(&$facebook){
  $params = array('next'    => '(remaining url).../logout.php');
  return $facebook->getLogoutUrl($params); 
```

这是我的登录页面：

```
<?php
include_once "fb_functions.php";
$facebook = getFBInstance();
echo getUser($facebook);
session_start();
?>
<body>
<div id="container"> 
<div id="header">
</div>
<div id="body">
    <h2>
        <?php if (getUser($facebook)): ?>
            <a href="<?php echo logoutUrl($facebook); ?>">Logout</a>
            <?php else: ?>
            <a href="<?php echo loginUrl($facebook); ?>">Login with Facebook</a>
        <?php endif ?>
    </h2>
</div>
</div> 
```

# mysql - 用于删除条目的 MySQL 查询

> ID：14999763
> 
> 赞同：1
> 
> 时间：2013-02-21T10:20:06.217
> 
> 标签：mysql

我有一个带有“最后登录”行的帐户数据库，我想删除所有在最后登录行为空（NULL）的帐户。

有人知道这个的 MySQL Query 吗？（数据库结构类似于：用户 ID、密码、上次登录）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:24:33.407

这应该可以解决问题：

```
DELETE FROM Account-Database WHERE last-login IS NULL; 
```

或者如果该字段只是一个空字段（不是`null`但是`''`）

```
DELETE FROM Account-Database WHERE last-login= ''; 
```

见：[http ://dev.mysql.com/doc/refman/5.0/en/delete.html](http://dev.mysql.com/doc/refman/5.0/en/delete.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:21:53.800

```
delete from Account-Database where `last-login` is NULL; 
```

您的问题不清楚 Account-Database 是表名还是数据库名，但您明白了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:32:42.997

```
<?php
mysql_query("Delete from Account-Database where last-login = NULL");
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T10:35:44.927

```
DELETE FROM `Account-Database` WHERE `last-login` IS NULL; 
```

DELETE 查询的语法如下：

```
DELETE FROM `tablename` WHERE conditions 
```

# php - 如何在 PHP 中构建搜索引擎来搜索多个站点的实时内容？

> ID：14999765
> 
> 赞同：0
> 
> 时间：2013-02-21T10:20:12.043
> 
> 标签：php, curl, web-scraping, search-engine

我是一个相对新手的程序员，对 PHP 有很好的理解，但更多的是阅读、理解和复制我需要的部分，而不是从头开始开发。

我有一个超过 1000 个要搜索的 URL 的列表。我想根据需要在这些页面中搜索内容，并仅返回包含我提供的文本查询的结果。我将 Google 自定义搜索引擎视为一个简单的选择，它运行良好，但限制了我可以添加的页面数量。

我已经研究了 cURL，但似乎没有提供我正在寻找的东西，除非我错过了什么？

还是有其他免费且易于使用的选项，例如 Google CSE？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:44:36.613

您可以为需要的页面编写爬虫，并使用 Sphinx 引擎（[http://sphinxsearch.com/](http://sphinxsearch.com/)）在页面中进行搜索。在我看来，应该写一个带有 HTTP 扩展的爬虫比纯 cURL lib 更好。

# shell - Jenkins：从 shell 脚本设置环境变量

> ID：14999768
> 
> 赞同：8
> 
> 时间：2013-02-21T10:20:28.340
> 
> 标签：shell, jenkins, environment-variables

我有一个 bash 脚本，我使用“执行 shell”从 Jenkins 作业执行。该脚本启动一个 EC2 实例并设置一个`host`包含新实例主机名的变量。

我想将新实例的主机名（脚本变量`host`：）设置为 Jenkins 环境变量，以便可以将其传递给下游作业（可能使用 Build Flow 插件）。

知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T08:07:37.170

我最终使用一个文件在构建之间传播数据。第一个构建创建一个文件，其中包含我需要传播的信息（新创建的 EC2 实例的主机名）。该文件如下所示：

```
host.name=ec2.123.3345.amazon.com 
```

我使用 EnvInject 插件读取文件并“注入”在下一个构建中可用的属性（我正在使用构建流程插件来协调构建）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T10:25:28.837

您可以安装一个插件来注入您的变量：EnvInject Plugin

如果我理解你的问题，我认为这个简单的插件就是你所需要的。

# dynamic-programming - 对 1-10^9 的值应用 dp

> ID：14999772
> 
> 赞同：0
> 
> 时间：2013-02-21T10:20:39.330
> 
> 标签：dynamic-programming

我想存储 1-10^9 的斐波那契数。使用 dp。当数组的最大大小远小于该值时，如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:23:52.617

不可能。如果最大允许数组无法存储它们，则无法存储所有数字。但是，您不需要存储所有值来仅计算一个值 - 您只需要 3 个变量。还有一个对数解决方案可以找到`F(n)`- 第 n 个斐波那契数。

# c# - C#, json .net - 两个单词的值

> ID：14999773
> 
> 赞同：1
> 
> 时间：2013-02-21T10:20:43.607
> 
> 标签：c#, json, json.net

需要像这样解析JSON：

```
{
  "Status": "Success",
  "Data": {
    "Folders": [
      {
        "Folder ID": 1,
        "Name": "12"
      },
      {
        "Folder ID": 2,
        "Name": "3"
      }
    ]
  }
} 
```

这样做：

```
public class getFoldersDataFolders
{
    public int FolderID { get; set; }
    public string Name { get; set; }
}

public class getFoldersDataAnswer
{
    public List<getFoldersDataFolders> Folders { get; set; }
}

public class getFoldersAnswer
{
    public string Status { get; set; }
    public getFoldersDataAnswer Data { get; set; }
}
...
    var gfA = JsonConvert.DeserializeObject<WAAPIJSONClasses.getFoldersAnswer>( answer );
    for ( var i = 0; i < gfA.Data.Folders.Count; i++ )
    {
        folders[ gfA.Data.Folders[ i ].Name ] = gfA.Data.Folders[ i ].FolderID;
    } 
```

在 gfA.Data.Folders[i].FolderID 我有 0。

我认为问题在于“文件夹 ID”字段的名称由两个单词组成（以空格分隔）。那么，如果字段名包含多个单词（以空格分隔），如何获取该字段的值呢？

感谢您的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T10:25:17.670

尝试：

```
public class getFoldersDataFolders
{
    [JsonProperty(PropertyName = "Folder ID")]
    public int FolderID { get; set; }
    public string Name { get; set; }
} 
```

# symfony - LEFT JOIN 与右表上的 WHERE，oneToMany 上的学说2

> ID：14999775
> 
> 赞同：1
> 
> 时间：2013-02-21T10:20:53.883
> 
> 标签：symfony, doctrine-orm, left-join

我在这里找到了一些帖子，但它仍然不起作用：

我有 2 个实体故事和故事已完成：

```
TA\Minigames\MinigameBundle\Entity\Story:
    type: entity
    table: story
    id:
        id:
            type: integer
            generator: { strategy: AUTO }
    oneToMany:
        completed:
            targetEntity: StoryCompleted
            mappedBy: story
    fields:
        cycle_nr: 
            type: integer

TA\Minigames\MinigameBundle\Entity\StoryCompleted:
    type: entity
    table: story_completed
    id:
        id:
            type: integer
            generator: { strategy: AUTO }
    manyToOne:
        story:
            targetEntity: Story
    fields:
        company_id: 
            type: integer
        completed:
            type: boolean 
```

我想获取所有故事的列表，并知道 company_id = 1 看到了哪些故事，所以我尝试了左连接：

```
SELECT s FROM MGMinigameBundle:Story s LEFT JOIN s.completed c WHERE s.cycle_nr = 1 AND (c.company_id = $company_id OR c is NULL) 
```

我想得到一个像这样的 $company_id ：

```
story_id completed
1         1
2         -
3         - 
```

但是对于给定的 $company_id，我在每个 Story 中都获得了所有已完成的实体（对于所有 $company_id），而不仅仅是一个，并且必须遍历它们以找到我需要的实体。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:36:32.550

在您的选择语句中包含“c”：

```
SELECT s, c 
FROM MGMinigameBundle:Story s 
LEFT JOIN s.completed c 
WHERE s.cycle_nr = 1 AND (c.company_id = $company_id OR c is NULL) 
```

这样，StoryCompleted 记录将用于根据 company_id “水合” Story 对象的已完成集合。[这是DQL 中“常规连接”和“获取连接”](http://docs.doctrine-project.org/en/latest/reference/dql-doctrine-query-language.html#joins)之间的区别

# extjs - AjaxProxy 不向 ExtJS TreeStore 中的服务器发送请求

> ID：14999778
> 
> 赞同：0
> 
> 时间：2013-02-21T10:21:05.150
> 
> 标签：extjs, extjs4

我已经定义了 TreeStore-Implementation 但在 FireBug 中我没有看到对我的服务器的请求，也没有看到数据。如果我取消注释根属性并注释掉代理属性，我的数据就会显示出来。可能是什么原因？

谢谢！

```
Ext.define('PM.store.Projects', {
    extend: 'Ext.data.TreeStore',
    model: 'PM.model.Project',

    proxy: {
        type: 'ajax',
        url: 'data/projectTree.json',
    }

    /*root: {
        name: 'Demo',
        children: [
            {
                name: 'Test',
                leaf: true,
            },
        ],
    },*/
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-18T06:13:26.133

您必须显式加载商店。尝试 autoLoad: true 看看它是否会发出请求。

# c# - app.config 中的 maxReceivedMessageSize 和 maxBufferSize

> ID：14999779
> 
> 赞同：40
> 
> 时间：2013-02-21T10:21:05.997
> 
> 标签：c#, .net, winforms, wcf, service-model

如何在运行应用程序之前将 app.config 文件中的 maxReceivedMessageSize 和 maxBufferSize 参数增加到 2000000。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-02-21T10:24:48.607

您需要在绑定上执行此操作，但您需要在**客户**端**和**服务器上执行此操作。就像是：

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding maxBufferSize="64000000" maxReceivedMessageSize="64000000" />
        </basicHttpBinding>
    </bindings>
</system.serviceModel> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-21T10:44:11.763

您可以在 app.config 中执行此操作。像那样：

```
maxReceivedMessageSize="2147483647" 
```

（最大值为`Int32.MaxValue`）

或在代码中：

```
WSHttpBinding binding = new WSHttpBinding();
binding.Name = "MyBinding";
binding.MaxReceivedMessageSize = Int32.MaxValue; 
```

**笔记：**

如果您的服务对广阔的世界开放，请在增加此值时考虑安全性。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-03-07T15:05:39.960

当前接受的答案不正确。**不需要**在客户端和服务器绑定上设置和`maxBufferSize`。`maxReceivedMessageSize`这取决于！

如果你的请求太大（即服务操作的方法参数是内存密集型）设置服务端的属性，如果响应太大（即服务操作的方法返回值是内存密集型）设置客户端的值。

`maxBufferSize`关于和`maxReceivedMessageSize`查看[MaxBufferSize 属性](https://stackoverflow.com/questions/35844111/maxbuffersize-property)的区别？.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-12T15:35:38.790

如果您使用的是自定义绑定，则可以像这样设置值：

```
<customBinding>
    <binding name="x">
        <httpsTransport maxBufferSize="2147483647" maxReceivedMessageSize="2147483647" />
    </binding>
</customBinding> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-18T07:04:49.450

简单的解决方案：检查它是否适合您..

转到 web.config

查找客户端使用的绑定。

改变为，

maxBufferSize="2147483647" maxReceivedMessageSize="2147483647"

完毕。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-23T08:57:32.000

```
binding name="BindingName" 
maxReceivedMessageSize="2097152" 
maxBufferSize="2097152" 
maxBufferPoolSize="2097152" 
```

在客户端和服务器端

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-11T13:15:08.537

在客户端打开 app.config 并添加 maxBufferSize 和 maxReceivedMessageSize 属性（如果不可用）

**原来的**

```
 <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="Service1Soap"/>
      </basicHttpBinding>
    </bindings> 
```

**编辑/更新后**

```
 <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="Service1Soap" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647"/>
      </basicHttpBinding>
    </bindings> 
```

# sharepoint - CAML 查询中嵌套 OR 的限制是什么？

> ID：14999784
> 
> 赞同：1
> 
> 时间：2013-02-21T10:21:35.397
> 
> 标签：sharepoint, sharepoint-2007, caml

从问题“ CAML 中的[**SQL IN 等效项”中**](https://stackoverflow.com/questions/1891303/sql-in-equivalent-in-caml)，我了解到 SharePoint 2010 具有 CAML 的 SQL“IN”等效项。另外2007版本不支持这个。OP 通过嵌套一堆 OR 语句来解决这个问题，以达到相同的结果。我对此进行了测试，嵌套确实很神奇，但是......

就我而言，我从大约 1000 个项目的列表中获取项目。我为我的 CAML 查询动态创建了一个语句，其中包含嵌套 OR 块中的所有 ID。我不担心大量嵌套块，因为[**这**](http://msdn.microsoft.com/en-us/library/ms472196%28v=office.12%29.aspx)是 MSDN 关于 OR 元素的声明：

`Occurrences: Minimum: 0, Maximum: Unbounded.`

和：

`This element can be nested inside other Or and And elements. The server supports unlimited complicated queries.`

当我从 SharePoint 2007 内置 Web服务调用*GetListItems方法时，我收到以下错误：*

`Exception of type 'Microsoft.SharePoint.SoapServer.SoapServerException' was thrown. Some part of your SQL statement is nested too deeply. Rewrite the query or break it up into smaller queries.`

我的代码编写正确，因为我只用 5 个嵌套的 Or 元素测试了相同的代码，结果符合预期。我的问题是：嵌套 Or 元素的限制是什么？我无法在任何地方找到它，因为微软声称这是无限的。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T10:28:03.987

对于那些面临同样问题的人。我在 SharePoint.StackExchange.com 上进行了搜索，发现了以下问题：

*   [嵌套 CAML 查询导致异常“您的 SQL 语句的某些部分嵌套太深。重写查询或将其分解为更小的查询”</a>](https://sharepoint.stackexchange.com/questions/6531/nested-caml-querie-results-in-exception-some-part-of-your-sql-statement-is-nes)
[](https://sharepoint.stackexchange.com/questions/6531/nested-caml-querie-results-in-exception-some-part-of-your-sql-statement-is-nes)

 [答案之一指向该网站：](https://sharepoint.stackexchange.com/questions/6531/nested-caml-querie-results-in-exception-some-part-of-your-sql-statement-is-nes) 

[](https://sharepoint.stackexchange.com/questions/6531/nested-caml-querie-results-in-exception-some-part-of-your-sql-statement-is-nes)
*   [CAML：嵌套太深](http://rapidapplicationdevelopment.blogspot.be/2007/05/caml-nested-too-deep.html)

该人发现500件太多了，但一批300件工作正常。所以我尝试了这个，这也适用于我。所以对于任何面临同样问题的人来说，这可能是解决方案。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-03T14:59:29.650

`SP2010`和嵌套的问题相同`OR`，在达到 160 多个嵌套项时会中断。

`System.ArgumentException`尝试获取`SPListItemCollection = List.GetItems(Query);` 看起来像 SQL 服务器拒绝执行查询时，引发的错误不是很有帮助 ( )。

解决方法是中断多个查询或改变查询方式。

# fortran90 - 读取文本文件作为输入，然后使用 2D 矩阵中的数据写入文本文件作为输出

> ID：14999786
> 
> 赞同：0
> 
> 时间：2013-02-21T10:21:46.870
> 
> 标签：fortran90, fortran77

我是 FORTRAN90 的真正新手，当然是任何其他编程语言。但是，我需要为我的工作制作一个程序。因此，我要求任何人发表任何评论。提前致谢。

从现在开始，我将解释我的问题。原始数据如下：

```
15 1r 2 1r 70 22r 2 2r 15 1r 2 1r 8 8r 15 1 3r 
```

这可以用另一种方式再次编写，如下所示；

```
15 15 2 2 70 70 70 70 70 70 70 70 70 70 70 70 70 70 70 70 70 70 70 70 70 70 70 2 2 2 15 15 2 2 
8 8 8 8 8 8 8 8 8 15 1 1 1 1 
```

所以上例中的数据元素总数可以统计为48个。原始数据的总数为`12,113,640`。然后原始数据由 220(z) 个切片组成`322(x) x 171(y)`。每个切片有 55,062 个元素。

如果可能的话，就像计算元素个数的方式一样，程序计数55062个元素，然后输出文件（txt），那么总共220片数据应该是二维数组。

所以我必须从一个完整的数据文件中提取 220 个切片。而且每个切片中的数据应该是二维数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:17:38.380

它会是这样的——我假设你知道如何从文件中读取行

```
program main
   character(len=120):: compressed
   character ch
   integer value, rval, repeat, ix, complen

   ! Pretend this is the line read from the file
   compressed = '15 1r 2 1r 70 22r 2 2r 15 1r 2 1r 8 8r 15 1 3r'

   complen = len(trim(compressed))
   ix = 1
   do while (ix .lt. complen)
      ! Skip spaces
      do
         ch = compressed(ix:ix)
         if (ch .ne. ' ') exit
         ix = ix + 1
      end do

      ! Extract the number
      value = 0
      do
         ch = compressed(ix:ix)
         if (ch .ge. '0' .and. ch .le. '9') then
            value = value * 10 + ichar(ch) - ichar('0')
         else
            exit
         end if
         ix = ix + 1
         if (ix .gt. complen) exit
      end do

      ! is it a repeater
      repeat = 1
      if (ch .eq. 'r') then
         ! reduce by 1 since one has already been printed
         repeat = value  - 1
         ix = ix + 1
      else
         rval = value
      end if

      ! assume there won't be more than 100 repeats
      write(*, '(100I3)', advance='no') (rval, ii = 1, repeat)
   end do
   stop
end program 
```

# actionscript-3 - 使用 AS3 中的所有场景对象检查角色命中测试

> ID：14999792
> 
> 赞同：0
> 
> 时间：2013-02-21T10:22:11.013
> 
> 标签：actionscript-3, collision-detection, hittest

好的，这是我的问题，需要一些时间来解释。

班级正在开发 AS3 中的街机游戏。该大学有一台街机，机器上的操作系统由我们的老师开发，并提供软件开发工具包。它没有什么疯狂的，所以大部分都很简单。我只是想指出这一点，主要是因为我没有使用 ENTER_FRAME 事件和循环函数，而是使用 SDK 提供的名为 update() 的覆盖函数来执行每帧的更新。

好的，这就是我的问题。我有一个名为 GameState 的文档类，它基本上在该状态下处理游戏。在这堂课中，我设置了世界和角色。现在它只有 2 座山、2 座城堡、3 个岛屿和角色。

```
private function initWorld():void
    {
        trace("World has initiated");
        addChild(hazardArea)
        positionElement(hazardArea, 0, 560);

        addChild(mountainSideRight);
        positionElement(mountainSideRight, 730, 200)

        addChild(mountainSideLeft);
        positionElement(mountainSideLeft, 0, 200);

        addChild(castleOne);
        positionElement(castleOne, 5, 160);

        addChild(castleTwo);
        positionElement(castleTwo, 765, 160);

        addIslands();
    } 
```

position 元素只是一个设置我添加到舞台的 MC 的 x 和 y 坐标的函数。现在，我还在 AddChild 上创建了一个覆盖，这样每次我将 Child 添加到阶段时，它都会将其保存到我以后可以访问的数组中：

```
override public function addChild(object:*):void
    {
        super.addChild(object);
        worldObjects.push(object);
    } 
```

好的，三个岛是通过 addIsland 添加的，如下所示：

```
private function addIslands():void
    {
        var island:Array = Islands.getIslandCords();
        for (var x:int = 0; x < DiceNumbers.NUM_ISLS; x++) 
        {
            addChild(island[x].mc);
            positionElement(island[x].mc, island[x].x, island[x].y);

        }
    } 
```

岛屿只是一个类，它用一堆数学和东西为我的 3 个岛屿找到一个位置......并不重要返回的数组只是 3 个包含移动剪辑实例以及 x 和 y 坐标的对象为了它。

我还有一个单独的角色类来代表我的侏儒（我游戏中的角色）。课堂上没有什么奇怪的，除了我有一个看起来像这样的重力系统：

```
var gravity:Number = 2;
public var moveX:Number = 300;
public var moveY:Number = 50;
public var xSpeed:Number = 0;
public var ySpeed:Number = 2;
public static const playerSpeed:Number = 3;
public var friction:Number = .75; 
```

然后我提到的 update() 函数就像 EVENT_FRAME 循环一样工作，里面有这个：

```
public function update():void
{
    xSpeed *= friction;
    moveX += xSpeed;
    moveY += ySpeed
    theDwarf.y += gravity;

    this.x = moveX;
    this.y = moveY;

    updateControls();
} 
```

theDwarf 是我的侏儒影片剪辑的实例，而 updateControls 为我的侏儒提供了移动的功能。

好的....所以最后在 update() 函数下的 GameState 类中，我调用我的碰撞类并将包含场景中所有对象的数组传递给它。在这个类中，我检查碰撞：

```
public function checkCollision(listOfObjects:Vector.<MovieClip>):void
    {   

        for (var i:int = 0; i < worldObjects.length; i++) {
            if(worldObjects[i] is Player){

                var objOne:MovieClip = worldObjects[i];             
                for (var j:int = 0; j < worldObjects.length; j++){
                    if (j == i){
                        // elimates self comparisons.
                    }
                    else{
                        var objTwo:MovieClip = worldObjects[j];
                        checkIntersect(objOne, objTwo )
                    }
                }
            }
        }
    }

private function checkIntersect(player:MovieClip, objTwo:MovieClip):void
    {
        if(player.hitTestObject(objTwo)){
            player.ySpeed = -1;
        }
        else{
            player.ySpeed = 2;
        }
    } 
```

我的问题是：这个函数会检查我的播放器与舞台上的每个物体。因此，即使我的矮人降落在 1 个岛上，他也没有撞到其他 2 个岛屿，因此 ySpeed 一直重置为 2。如果我摆脱 else 语句，我的矮人重力永远不会回到 2，他也永远不会再跌倒。我找不到解决方案...我非常努力地想找到一种方法来解决这个问题，我很困惑...我希望我的侏儒摔倒，除非他在我的一个岛屿或一座山上。我希望我已经足够清楚地解释我的问题，这现在已经成为一个巨大的帖子......：D谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:52:15.260

为了更好地解释我之前的评论，您必须像这样更改最后两个函数：

```
public function checkCollision(listOfObjects:Vector.<MovieClip>):void
{   

   OuterLoop: for (var i:int = 0; i < worldObjects.length; i++) {
        if(worldObjects[i] is Player){

            var objOne:MovieClip = worldObjects[i];             
            for (var j:int = 0; j < worldObjects.length; j++){
                if (j == i){
                    // elimates self comparisons.
                }
                else{
                    var objTwo:MovieClip = worldObjects[j];
                    player.ySpeed = checkIntersect(objOne, objTwo )
                    if (player.ySpeed == -1)
                        break OuterLoop;
                }
            }
        }
    }
}

private function checkIntersect(player:MovieClip, objTwo:MovieClip):int
{
    if(player.hitTestObject(objTwo)){
        return -1;
    }
    else{
        return 2;
    }
} 
```

这也可以做得更好。但这是解决您问题的最快方法。

# php - 为什么这个程序输出“10”？

> ID：14999794
> 
> 赞同：2
> 
> 时间：2013-02-21T10:22:13.757
> 
> 标签：php

我是一个新手，并在 c 和 php 中测试了以下代码。请告诉我为什么这段代码输出“10”。

```
for($i=0;$i<10;$i++);
{
    print $i;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T10:29:56.843

是的，但他问为什么要打印“10”。原因如下：

你的代码是：

```
<?php
for($i=0;$i<10;$i++);
{
print $i;
}
?> 
```

这一行`for($i=0;$i<10;$i++);`是一个循环，它从 0 到 9 循环了 10 次。在每个数字之后，变量`$i`递增 ( `$i++`)，所以在第一次循环之后，`$i`值为 1。在第十次迭代之后，它的值为 10。

之后你这样`print $i;`做它会正确打印数字 10。

但是现在，如果你去掉for循环后面的分号，那么for循环就有了下面的主体

```
{
print $i;
} 
```

它会打印出来`0123456789`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T10:24:09.777

消除`;`

```
for($i=0;$i<10;$i++);
                    ^ 
```

工作示例[http://codepad.viper-7.com/SeVcbl](http://codepad.viper-7.com/SeVcbl)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-21T10:24:40.220

`for`See Ther 在该循环之后是一个分号。所以 PHP 认为循环没有主体。所以 The`print $i`只执行一次

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-21T10:23:55.767

错误的代码**；**

```
<?php
 for($i=0;$i<10;$i++)
 {
  print $i;
 } 
```

?>

应该输出所有数字

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-21T10:24:36.927

`for`因为您声明中的分号。这会比您预期的更早结束该语句，并且该`print`语句不再是循环的一部分。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-21T10:26:17.060

删除 for($i=0;$i<10;$i++); 后面的 ;(分号) 陈述。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-21T10:26:21.573

去掉这一行中的分号，它会输出 1,2,3..9：

```
for($i=0;$i<10;$i++); 
```

如果你不这样做，它将首先运行循环而不写任何东西，然后打印 $i，它在 for 循环中变成了 10。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-26T04:31:07.427

for 循环旁边的分号 (;) 表示循环内容是空的，因此空内容在循环 ( `for($i=0;$i<10;$i++);`) 中执行了 10 次，并且对于每个循环，$i 的值都会递增，最终值 10 会打印为输出。

# sql - 将 sql 中的两个日期减去 hhhh:mm:ss

> ID：14999798
> 
> 赞同：1
> 
> 时间：2013-02-21T10:22:20.143
> 
> 标签：sql, sql-server-2008

当小时数可能大于 24 时，我想减去两个日期并得到 hhhh:mm:ss

而且我不想通过 hhhh 来限制小时数。我有两个日期， `date1='1900-01-01 00:00:00.000'`和 `date2='1900-01-02 01:00:00.000'`。我想得到：

```
date2-date1 = '25:00:00.0' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:15:12.133

您只能在字符数据类型中使用它，因为数据类型时间范围从 00:00:00.0000000 到 23:59:59.9999999

```
DECLARE @date1 datetime = '19000101 00:00:00.000',
        @date2 datetime = '19000102 01:00:00.000'

SELECT CAST(DATEDIFF(hour, @date1, @date2) AS nvarchar(5))+ ':00:00.0' 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/e1c06/23)上的演示[](http://sqlfiddle.com/#!3/e1c06/23)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:37:22.007

此外，在 T-SQL 中有一个`DATEDIFF`函数：

```
DATEDIFF ( datepart , startdate , enddate ) 
```

例如：

```
SELECT DATEDIFF(year, '2005-12-31 23:59:59', '2006-01-01 00:00:00'); 
```

在 oracle 中，您可以看到此链接很有帮助 - [http://www.akadia.com/services/ora_date_time.html](http://www.akadia.com/services/ora_date_time.html)

在 MySQL - [https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-sub](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-sub)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:28:27.327

我不知道你的表格列..这里我有两列`time1`，即`time2`属性为`DATE`..下面是减去的查询......

`select to_char(Time1,'DD-MM-YYYY HH24:MM:SSAM'),to_char(Time2,'DD-MM-YYYY HH12:MM:SSAM'),(Time1-Time2)*1440 from Table_Name`;**

# drupal - Drupal 7 国际化/多语言：如果文章缺少翻译，则重定向到默认语言

> ID：14999799
> 
> 赞同：0
> 
> 时间：2013-02-21T10:22:30.137
> 
> 标签：drupal, internationalization, drupal-7, translation

我是 Drupal 7 国际化的新手，这就是我想要做的。

假设我的网站有 3 种语言。英语、法语和荷兰语。我想要的是当一篇文章没有被翻译成特定语言时，看到文章的英文版本。

我可以用英语写我的文章，然后使用中性语言来确保文章出现在每种语言中，但是我不能只翻译法语或荷兰语的文章。

示例：我用英语创建了一篇文章。我把它翻译成法语。我还没有把它翻译成荷兰语，但我仍然希望这篇文章的英文版出现在网站的荷兰语版中。

如果有人有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:45:44.427

（基于我安装的 Drupal 6，如果找不到相同的选项，您可能需要进一步查看）

在站点配置选项中，转到语言，然后转到“多语言系统”。在 Drupal 6 中，它带有 i18n 模块；我相信它是 Drupal 7 中的核心功能。对于内容选择，选择“混合当前语言（如果可用）或默认语言（如果没有）和中性语言”选项。此外，请确保将英语设置为您的默认语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T13:30:16.933

我正在为上述问题使用选择翻译模块。[您可以在https://drupal.org/node/1098708](https://drupal.org/node/1098708)找到模块。

在视图中添加过滤器：选择翻译在选择翻译选择模式中使用当前语言；如果不可用，则使用默认语言；如果不可用，请使用原始语言。

# jsf - JSF SelectOneMenu 对 OnValueChanged 没有反应

> ID：14999800
> 
> 赞同：0
> 
> 时间：2013-02-21T10:22:35.333
> 
> 标签：jsf, selectonemenu, valuechangelistener

我有这行代码，我可以在其中选择皮肤。

```
<h:form>
    <h:selectOneMenu id="dropdownSkin"
        value="#{helloBean.currentSkin.name}" defaultLabel="Select a skin.."
        valueChangeListener="#{helloBean.skinValueChanged}">
        <f:selectItems value="#{helloBean.mySkinsSI}" var="c"
            itemValue="#{c.value}" immediate="true" onchange="this.form.submit()" />
    </h:selectOneMenu>
    <br />

    <h:inputText id="name" value="#{helloBean.currentSkin.name}"></h:inputText>
    <br />
    <h:inputText id="tcolor" value="#{helloBean.currentSkin.tcolor}"></h:inputText>
    <br />
    <h:inputText id="bcolor" value="#{helloBean.currentSkin.bcolor}"></h:inputText>
</h:form> 
```

但我调试了它，它从来没有进入我的方法：

```
public void skinValueChanged(ValueChangeEvent e) {
    currentSkin = (Skin) e.getNewValue();
} 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:44:11.900

标签上没有`onchange`属性。将您的属性`f:selectItems`迁移到，这应该可以工作。`onchange``h:selectOneMenu`

`h:selectOneMenu`生成为 HTML`select`标签，并且`f:selectItems`是`option`标签。所以`onchange`真的应该在`select`标签中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T11:01:29.500

不要在 f:selectItems 组件中提供更改，而是尝试为**h:selectOneMenu组件提供****onchange="submit()"**并尝试。它应该工作。

# r - 如何在 grid.newpage 中使用 R 基础图？

> ID：14999802
> 
> 赞同：6
> 
> 时间：2013-02-21T10:22:43.093
> 
> 标签：r, plot, r-grid

是否可以在`grid`包中“强制”R 基图`grid.newpage`？例如，这很好用：

```
library(grid)
grid.newpage()
vp1 <- viewport(x=0,y=0.5,width=0.5, height=0.5, just = c("left", "bottom"))
vp2 <- viewport(x=0.5,y=0,width=0.5, height=0.5, just = c("left", "bottom"))
pushViewport(vp1)
grid.rect()
grid.text("vp1", 0.5, 0.5)
upViewport()
pushViewport(vp2)
grid.rect()
grid.text("vp2", 0.5, 0.5) 
```

![在此处输入图像描述](../Images/c669552aeaee6d01185adb80855013c7.png).

但如果我尝试这样的事情：

```
grid.newpage()
vp1 <- viewport(x=0,y=0.5,width=0.5, height=0.5, just = c("left", "bottom"))
vp2 <- viewport(x=0.5,y=0,width=0.5, height=0.5, just = c("left", "bottom"))
pushViewport(vp1)
grid.rect()
print(plot(1,2))
grid.text("vp1", 0.5, 0.5)
upViewport()
pushViewport(vp2)
grid.rect()
print(plot(1,2)) 
```

R 基础图只是覆盖了`grid.newpage`. 使用`par(new=T)`也无济于事。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T10:43:25.870

因为没有人回答这个问题，我会自己做。正如安德烈所说，这个问题的答案就[在这里](https://stackoverflow.com/questions/13021863/plots-generated-by-plot-and-ggplot-side-by-side/13022137#13022137)。您将需要包中的`gridFIG()`函数`gridBase`来绘制 R 基础图，`plot.new()`而不是`grid.newpage()`：

```
library(grid)
library(gridBase)
plot.new()
vp1 <- viewport(x=0,y=0.5,width=0.5, height=0.5, just = c("left", "bottom"))
vp2 <- viewport(x=0.5,y=0,width=0.5, height=0.5, just = c("left", "bottom"))
pushViewport(vp1)
grid.rect()
grid.text("vp1", 0.5, 0.5)
par(new=TRUE, fig=gridFIG())
plot(1,2)
upViewport()
pushViewport(vp2)
grid.rect()
grid.text("vp2", 0.5, 0.5)
par(new=TRUE, fig=gridFIG())
plot(1,2) 
```

![在此处输入图像描述](../Images/cf72d723f741b17b11f5fed5fae7aeef.png)

# regex - 如何使用 vi 替换 '/' 字符

> ID：14999803
> 
> 赞同：1
> 
> 时间：2013-02-21T10:22:44.590
> 
> 标签：regex, vim, replace, vi

我应该使用什么替换命令，以便`/`用 vi 在文本文件中用字符串“abc”替换每个出现的字符？

```
:1,$ s/?/abc 
```

我应该用什么代替`?`上面的代码片段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T10:40:07.160

您可以将按照惯例的替换分隔符更改为`/`其他内容，然后您根本不必转义正斜杠 -

```
:%s;/;abc;g
:%s~/~abc~g
:%s!/!abc!g
:1,$s?/?abc?g
:%s/\//abc/g
:1,$sub;/;abc;g 
```

这些都在每一行上进行相同的`/`替换。`abc`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T10:24:16.767

答案是`:%s/\//abc/g`我认为。

# ruby-on-rails - 如何通过 gem 向所有 ActiveRecord::Base 类添加范围？

> ID：14999804
> 
> 赞同：0
> 
> 时间：2013-02-21T10:22:48.240
> 
> 标签：ruby-on-rails, ruby, gem

我试图为所有 ActiveRecord::Base 子类添加范围，但我的方法不起作用，因为在通过调用`ActiveRecord::Base.subclasses`或列出类之前需要先触及这些类`ActiveRecord::Base.descendants`。因此，我无法通过包含包含范围的 ActiveSupport::Concern 扩展类来扩展循环中的类。

我也不能`Dir.glob(Rails.root.join("app/models*.rb").to_s)`用来列出和要求所有文件。因为 Rails.root 会`nil`在环境加载之前返回。

那么如何使用我的范围从 gem 扩展所有 ActiveRecord::Base 子类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:21:23.767

准确地添加到所有子类：

```
class ActiveRecord::Base
  def self.inherited(child)
    child.instance_eval <<-EOV
      scope ...
    EOV
    super
  end
end 
```

添加到 ActiveRecord::Base

```
module MyScope
  extend ActiveSupport::Concern
  included do
    scope ...
  end
end

# Load it before_initialize:

class Railtie < ::Rails::Railtie
  config.before_initialize do
    ActiveSupport.on_load :active_record do
      include MyScope
    end
  end
end 
```

# facebook - 从页面的所有“共享”中汇总喜欢

> ID：14999810
> 
> 赞同：0
> 
> 时间：2013-02-21T10:23:10.497
> 
> 标签：facebook, facebook-graph-api, facebook-like, share

我有一个包含不同页面的网站。每个页面都应该有一个赞按钮和一个分享按钮（仅限 Facebook）。

首先，我在 Facebook 文档中没有找到任何提及分享按钮的内容。你能给我一个指南或参考吗？

然而，最大的问题是我需要汇总所有分享的点赞数，以及页面上的点赞数。例如，如果有 10 个用户在页面上点击了“赞”。然后一些分享到他们的个人资料，有人也喜欢，我需要在个人资料上显示总共 10 + 的喜欢。是否有现成的 Facebook API 函数来执行此操作？还是我需要跟踪每个共享并手动汇总所有参考？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:38:36.450

对于 URL，您可以使用 FQL`link_stat`表来获取此数据，但它似乎是每个 URL。

`link_stat`表格文档- [https://developers.facebook.com/docs/reference/fql/link_stat/](https://developers.facebook.com/docs/reference/fql/link_stat/)

使用：

```
https://graph.facebook.com/fql?q=SELECT%20url,%20normalized_url,%20share_count,%20like_count,%20comment_count,%20total_count,%20commentsbox_count,%20comments_fbid,%20click_count%20FROM%20link_stat%20WHERE%20url=%27http://www.bbc.co.uk/news/%27 
```

会给你：

```
{
   "data": [
      {
         "url": "http://www.bbc.co.uk/news/",
         "normalized_url": "http://www.bbc.co.uk/news/",
         "share_count": 31155,
         "like_count": 12932,
         "comment_count": 17584,
         "total_count": 61671,
         "commentsbox_count": 2,
         "comments_fbid": 405555547748,
         "click_count": 1032
      }
   ]
} 
```

当然，使用这种方法，您需要为每个页面进行 API 调用。

也许有人知道更好的方法。

# tridion - 如何在 Tridion 中为上下文菜单项获取页面（次要版本）的元数据？

> ID：14999823
> 
> 赞同：3
> 
> 时间：2013-02-21T10:23:45.633
> 
> 标签：tridion, tridion-2011

我正在使用 SDL Tridion 2011 SP1 版本。

*   工作流在系统中启用。
*   添加到编辑器的上下文菜单按钮，它使用页面元数据。
*   事件系统将在 SAVE 事件时更新页面元数据中的当前页面路径。

但是由于系统中启用了工作流，每当我将页面从一个 SG 复制到另一个 SG 并显式单击保存按钮时，都会触发工作流。

在工作流完成之前，我无法在上下文菜单 JS 代码中获取修改后的元数据（事件系统将更新元数据中修改后的当前页面路径）。

怀疑原因：**无法获取次要版本的元数据。**

当前代码：

```
var itemId = selection.getItem(0);
var item = $models.getItem(itemId);
var contentXml = item.getStaticXmlDocument();
var currentPath = $xml.getInnerText(contentXml, "//*[local-name()='current_path']"); 
```

请建议我如何处理 Java 脚本中的场景。早期反应表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:17:30.727

看起来您假设该项目已加载。这种情况不会经常发生。

您应该检查 isLoaded() 方法，如果它返回 false，请使用回调调用 load() 方法。然后检查回调中的处理，因为项目是异步加载的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:32:30.243

您可以更改不同事件的元数据吗？例如在复制或移动事件上？

见`Tridion.ContentManager.Extensibility.Events.CopyEventArgs`或`MoveEventArgs`。

# extjs - Extjs4根据多选组合框中选择的许多值过滤组合框

> ID：14999824
> 
> 赞同：1
> 
> 时间：2013-02-21T10:23:51.017
> 
> 标签：extjs, combobox, extjs4, filtering, multi-select

我有一个组合框：`Problems`，我想根据在另一个组合框中选择的另一个值来调整此组合框中显示的数据：`Rooms`。但我的问题是`Rooms`组合框是多选的。所以我应该根据选择的许多值应用过滤器。

![在此处输入图像描述](../Images/0f4e63924730408a5f4f0bd6b99c45bc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T11:04:48.567

你有两种可能：

*   更改房间的选择后，您必须重新加载问题商店。在后端，您应该过滤输出中的问题。

*   [您可以使用filterBy()](http://docs.sencha.com/extjs/4.2.0/#!/api/Ext.data.Store-method-filterBy)过滤您的问题存储

# c# - 用户，朋友，在 soc 的上下文中。网络，这是什么关系

> ID：14999826
> 
> 赞同：0
> 
> 时间：2013-02-21T10:23:54.803
> 
> 标签：c#, database

我正在尝试为我的用户实现朋友功能，但我需要一点帮助。

一个`User`可以有很多`friends`。`Friend`没有 实体就不能存在`User`。

知道在查看对方关系时所有朋友都属于一个用户，或者一个多个朋友可能指向多个用户。我在这里有点困惑。

概括地说，我有一对多的 via`User`和什么关系 via `Friend`？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:29:30.757

通常你会实现从用户到用户的多对多 (mn) 关系。一个名为 Friend 的类可能有助于在您这边（一个用户那边）保存一些数据。

包括朋友，这可能看起来像：

1 个用户有 N 个好友。1 位朋友只是对 1 位其他用户的“参考”（与以前不同）

编辑：由于此模型仅包含实体朋友作为参考，您可能仍将其视为从用户到用户的多对多关系。

EDIT2：重新表述关系：

用户对朋友：一对多。朋友对用户：多对一（反之）。那里 Friend 与 User 有第二种关系：多对一（当然也存在相反的关系）。

# php - 使用 codeigniter 发送电子邮件（新手）

> ID：14999837
> 
> 赞同：-1
> 
> 时间：2013-02-21T10:24:23.113
> 
> 标签：php, codeigniter, email, smtp, gmail

我是 Codeigniter 的菜鸟，我想制作一个联系表格，我希望将其发送到我的 gmail。我提出了一个观点：

```
<div id="content">
<?php if (isset($mail_sent)): ?>
<b>Mail Sent</b>
<?php endif; ?>

<form action="<?php echo base_url() ?>" method="POST">

<b>Your Name :</b>
<br />
<input type="text" name="name" />
<br />
<b>Your Email Address:</b>
<br />
<input type="text" name="from" />
<br />
<b>Subject :</b>
<br />
<input type="text" name="subject" />
<br />
<b>Message :</b>
<br />
<textarea name="message" rows="10" cols="15"></textarea>
<br />
<input type="submit" name="q" value="Contact" />

</form>
</div> 
```

我在我的联系页面中的同一控制器代码块中有邮件设置。它看起来像这样：

```
public function contact()
{
    $this->load->view('header');
    $this->load->view('owrb_contact');
    $this->load->view('footer');

    $config['protocol'] = 'sendmail';
    $config['mailpath'] = '/usr/sbin/sendmail';
    $config['charset'] = 'iso-8859-1';

    // gmail specific settings here
    $config['smtp_host'] = 'smtp.gmail.com';
    $config['smtp_user'] = 'keessonnema@gmail.com';
    $config['smtp_pass'] = '123keesje123';
    $config['smtp_port'] = '465';

    $config['wordwrap'] = TRUE;

    $this->load->library('email');
    $this->email->initialize($config);

    $this->email->from('keessonnema@gmail.com', 'Kees Sonnema');

    $this->email->subject('Email Test');
    $this->email->message('Testing the email class.');  

    $this->email->send();
} 
```

现在我必须配置一个 smtp gmail 控制器？我真的不知道该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:27:51.440

你可以使用 Codeigniter 框架发送邮件，这里有描述。

[http://ellislab.com/codeigniter/user-guide/libraries/email.html](http://ellislab.com/codeigniter/user-guide/libraries/email.html)

有协议、服务器和您可能希望配置的每个项目的设置。如果您愿意，也可以将其与 gmail 连接。

```
$config['protocol'] = 'sendmail';
$config['mailpath'] = '/usr/sbin/sendmail';
$config['charset'] = 'iso-8859-1';

// gmail specific settings here
$config['smtp_host'] = '';
$config['smtp_user'] = '';
$config['smtp_pass'] = '';
$config['smtp_port'] = '';

$config['wordwrap'] = TRUE;

$this->load->library('email');
$this->email->initialize($config);

$this->email->from('your@example.com', 'Your Name');

$this->email->subject('Email Test');
$this->email->message('Testing the email class.');  

$this->email->send(); 
```

# mysql - MYSQL 函数中的 IN 查询

> ID：14999838
> 
> 赞同：0
> 
> 时间：2013-02-21T10:24:23.610
> 
> 标签：mysql

我处于需要将逗号分隔的项目 ID 从存储过程传递给函数的情况

存储过程是

```
CREATE PROCEDURE `spGetData`(
)
BEGIN

SET SESSION group_concat_max_len = 10000000;
set @leadProjectIDs = (SELECT distinct cast(group_concat(ProjectID separator ',')
                     as  char(10000000))
                    from
                    project pr where Status = 2);

select fnCount(@leadProjectIDs) as Count;
END 
```

功能是

```
CREATE FUNCTION `fnCount`(
                 _projectIds varchar(800)
       ) RETURNS decimal(10,2)
 Begin

   Set @LeadsCount = (Select count(*) from project where projectid in(_projectIds));
   return @LeadsCount;
END 
```

但上面的函数不返回任何计数。

我这里提到的 SP 和 Function 只是一个例子，我使用 Function 来获取数据，因为它有更多的条件和 join 然后在这里提到。

所以只想知道，我怎样才能传递像 1,2,3,4 这样的 projectid 并从 MYSQL 中的函数获取结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:39:38.033

尝试使用该`INSTR`功能：

```
CREATE FUNCTION `fnCount`(
                 _projectIds varchar(800)
       ) RETURNS decimal(10,2)
 Begin

   Set @LeadsCount = (Select count(*) 
                        from project 
                       where INSTR(_projectIds, concat(',', projectid, ',')) > 0);
   return @LeadsCount;
END 
```

只需确保 _projectIds 参数中的每个 projectid 都具有 format `,projectid,`。此外，请注意，可以在该字符串上连接的项目 ID 是有限的，它可能会在某个时候爆炸。

# orchardcms - Zengallery 图像路径模式

> ID：14999842
> 
> 赞同：1
> 
> 时间：2013-02-21T10:24:33.950
> 
> 标签：orchardcms

我希望 Bertand 能回答这个问题，因为他写了模块 zen gallery :)

我希望能够选择我`product.Sku`的图像路径（模式），但我不知道如何编写模式。

我有一个`productpart`附件，`productcontenttype`但如果我输入`/productimages/{Content.ProductPart.Sku}`我的模式，模块将无法拾取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:35:09.367

这是我在 nwazet.com 上使用的设置：`product/{Content.Sku}`

这是使用提供 sku 令牌的 Nwazet Commerce。

# xml - 使用 XSLT 进行简单的 XML 重构

> ID：14999846
> 
> 赞同：3
> 
> 时间：2013-02-21T10:24:40.580
> 
> 标签：xml, xslt

我是 XSLT 的新手，我正在尝试实现相当简单的重组。我有一个代表一个人的 xml 文档（用于说明目的）。我在person下有很多元素。我想从这些中提取`first_name`and `last_name`（以及至关重要的其他）到一个新`full_name`元素中。我在[这里](https://stackoverflow.com/questions/6156307/how-to-use-xslt-to-convert-a-simple-piece-of-xml/6156761#6156761)看到了这个问题。“renameWrapped”方法有效。但是它不够通用，因为我不能保证输入文档中元素的顺序。

我有以下 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<myname:Person xmlns:myname="http://www.myname.co.uk/def">
    <myname:attr1>some value</myname:attr1>
    <myname:first_name>john</myname:first_name>
    <myname:last_name>smith</myname:last_name>
    <myname:attr2>some value</myname:attr2>
    <!-- other person stuff -->
</myname:Person> 
```

这由以下 xsl 转换：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:myname="http://www.myname.co.uk/def">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="@*|node()" name="identity">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="myname:Person">
        <myname:Person>
            <xsl:copy>
                <xsl:apply-templates select="@*|node()[local-name() != 'first_name' and local-name() != 'Person' and local-name() != 'last_name']"/>
            </xsl:copy>
            <myname:FullName>
                <xsl:apply-templates select="myname:first_name | myname:last_name"/>
            </myname:FullName>
        </myname:Person>
    </xsl:template>

</xsl:stylesheet> 
```

然而，这给了我以下`myname:Person`被复制的输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<myname:Person xmlns:myname="http://www.myname.co.uk/def">
    <myname:Person>
        <myname:attr1>some value</myname:attr1>
        <myname:attr2>some value</myname:attr2>
    </myname:Person>
    <myname:FullName>
        <myname:first_name>john</myname:first_name>
        <myname:last_name>smith</myname:last_name>
    </myname:FullName>
</myname:Person> 
```

我究竟做错了什么？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T10:28:57.027

其中一个`<myname:Person>`元素来自模板中的文字结果元素，另一个来自`<xsl:copy>`. 如果你想

```
<?xml version="1.0" encoding="UTF-8"?>
<myname:Person xmlns:myname="http://www.myname.co.uk/def">
    <myname:attr1>some value</myname:attr1>
    <myname:attr2>some value</myname:attr2>
    <myname:FullName>
        <myname:first_name>john</myname:first_name>
        <myname:last_name>smith</myname:last_name>
    </myname:FullName>
</myname:Person> 
```

然后简单地省略`<xsl:copy>`，即

```
<xsl:template match="myname:Person">
    <myname:Person>
        <xsl:apply-templates select="@*|node()[local-name() != 'first_name' and local-name() != 'Person' and local-name() != 'last_name']"/>
        <myname:FullName>
            <xsl:apply-templates select="myname:first_name | myname:last_name"/>
        </myname:FullName>
    </myname:Person>
</xsl:template> 
```

或者省略明确的`<myname:Person>`：

```
<xsl:template match="myname:Person">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()[local-name() != 'first_name' and local-name() != 'Person' and local-name() != 'last_name']"/>
        <myname:FullName>
            <xsl:apply-templates select="myname:first_name | myname:last_name"/>
        </myname:FullName>
    </xsl:copy>
</xsl:template> 
```

# sql - 如果值不存在，SQLite 插入值

> ID：14999848
> 
> 赞同：1
> 
> 时间：2013-02-21T10:24:47.153
> 
> 标签：sql, sqlite, insert

插入值时如何避免在 SQLite 中添加重复条目？

现在当我插入时，它正在添加重复项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:29:21.573

您需要在表的某处添加一个唯一索引，以便将行插入：

```
create unique index mytable_id on mytable (id) 
```

现在，如果您尝试将具有相同 id 的两行添加到 mytable，sqlite 将引发错误。

# filter - 过滤包含包含的整数列

> ID：14999852
> 
> 赞同：0
> 
> 时间：2013-02-21T10:24:58.380
> 
> 标签：filter, grid, integer

我正在尝试通过为每列应用搜索过滤器来为我的网格应用全局搜索过滤器：

```
filter.push(
   //strings
   { field: "Name", operator: "contains", value: item },
   { field: "City", operator: "contains", value: item },
   { field: "StreetAddress", operator: "contains", value: item },

   //integers
   { field: "Zip", operator: "iscontainedin", value: item }
);

//apply filters with 'or logic' (searchterm is contained somewhere in the row)
$("#Grid").data("kendoGrid").dataSource.filter({
     logic: "or",
     filters: filter
}); 
```

这对我有用，除了不是数据类型字符串的列。我知道我可以使用运算符“isequalto”（[http](http://docs.kendoui.com/api/wrappers/aspnet-mvc/Kendo.Mvc/FilterOperator) ://docs.kendoui.c​​om/api/wrappers/aspnet-mvc/Kendo.Mvc/FilterOperator ），但我想要一个包含整数的功能，比如 1234 包含 23 ...

这可能吗，或者是否有更好的解决方案来归档一个全局搜索字段，它可以将过滤应用于表的所有列（无需手动设置）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T18:01:46.603

好的，我最终做的是以下内容：我在我的模型中添加了一个附加字段，它只是所有其他字段的串联，例如“field1 field2 field3”，然后我只在这个字段聚合上使用我的包含过滤器。这非常适合我的需求！（希望它可以帮助别人......）

# jquery - jQuery switchClass() 不适用于 CSS :after 选择器

> ID：14999854
> 
> 赞同：1
> 
> 时间：2013-02-21T10:25:01.680
> 
> 标签：jquery, css, jquery-ui

[**JSFiddle 演示**](http://jsfiddle.net/ys54w/1/)

如果您去看 jsfiddle 演示并尝试一下，您会看到蓝色边框的 div 已按我的意愿消失，但 switchClass() 中的文本“Opened”不会更改为“Closed”。（如果我使用其他类型的 CSS 元素而不是 :after 选择器，则 switchClass() 可以正常工作）

HTML：

```
<div class="filter_title">
    <div class="filter_title_price" id="filter_price_toggle"><span>Price</span>
    </div>
</div>
<div class="hideprice" style="margin-top:10px; border:1px solid blue;">If you click Price [Opened] I will go away :) but the text "Opened" won't change to text "Closed"</div> 
```

JS：

```
$(function () {
    $("#filter_price_toggle").click(function () {
        $(".hideprice").toggle("blind", 250);
        $("filter_title_price").switchClass("filter_title_price", "filter_title_price2", 250);
        $("filter_title_price2").switchClass("filter_title_price2", "filter_title_price", 250);
        return false;
    });
}); 
```

CSS：

```
.filter_title {
    font-weight:bold;
    padding: 3px 10px;
    border-style: solid;
    border-width: 1px 1px 1px 0;
    border-color: #fff #d9d9d9 #d9d9d9;
    background-color: #f6f6f6;
    margin-top:5px;
}
.filter_title_price:after {
    content:"[Opened]";
}
.filter_title_price2:after {
    content:"[Closed]";
} 
```

如何更改文本？

还是 switchClass() 和 css :after 选择器不合作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:31:09.777

代码缺少`.`类选择器，一旦切换，类就会切换回原始代码。以下示例在 上引入了一个新类`div`以避免冲突，并利用条件语句来确定应如何切换 CSS 类。

**HTML**

```
<div class="filter_title">
    <div class="hook filter_title_price" id="filter_price_toggle"><span>Price</span>
    </div>
</div>
<div class="hideprice" style="margin-top:10px; border:1px solid blue;">If you click Price [Opened] I will go away :) but the text "Opened" won't change to text "Closed"</div> 
```

**Javascript**

```
$(function () {
    $("#filter_price_toggle").click(function () {
        $(".hideprice").toggle("blind", 250);
        if($(".hook").hasClass("filter_title_price")){
            $(".hook").switchClass("filter_title_price", "filter_title_price2", 250);
        }else{
            $(".hook").switchClass("filter_title_price2", "filter_title_price", 250);
        }
        return false;
    });
}); 
```

工作示例：http: [//jsfiddle.net/ys54w/9/](http://jsfiddle.net/ys54w/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T10:36:08.297

您没有检查该类是否存在于 dom 中。并且您正在直接触发 2 个开关类事件。那样它就不会工作。

您需要先检查是否存在哪个类并相应地进行 switchclass。

```
 if($(this).attr("class")=="filter_title_price")
    $(this).switchClass("filter_title_price", "filter_title_price2", 250);
    else
    $(this).switchClass("filter_title_price2", "filter_title_price", 250); 
```

**[工作演示](http://jsfiddle.net/bXuFc/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T10:36:28.107

好的，这里有几个问题。

*   首先，您的选择器对于您正在运行 switchClass 的对象是错误的。由于您在单击的内容上运行它，因此您可以使用`$(this)`.
*   其次，您尝试切换，然后在每次单击时再次直接切换回来。您只需`switchClass`在每次点击时执行相关操作。

尝试这个：

```
$(function () {
  $("#filter_price_toggle").click(function () {
    $(".hideprice").toggle("blind", 250);
    if ($(this).hasClass("filter_title_price"))
      $(this).switchClass("filter_title_price", "filter_title_price2", 250);
    else
      $(this).switchClass("filter_title_price2", "filter_title_price", 250);
    return false;
  });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T10:37:02.637

尝试这个：

```
 $(function () {
       $("#filter_price_toggle").on('click', function () {
           var element = $(this);
           $(".hideprice").toggle("blind", 250);
           element.hasClass("filter_title_price") ? element.switchClass("filter_title_price", "filter_title_price2", 250) : element.switchClass("filter_title_price2", "filter_title_price", 250);
       });
   }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T10:37:08.393

试试这个javascript：

```
$(function () {
$("#filter_price_toggle").click(function () {
    $(".hideprice").toggle("blind", 250);
    if($(this).hasClass('filter_title_price'))
        $(".filter_title_price").switchClass("filter_title_price", "filter_title_price2", 250);
    else
        $(".filter_title_price2").switchClass("filter_title_price2", "filter_title_price", 250);
    return false;
});
}); 
```

# events - 等待 akka actor 系统可用

> ID：14999855
> 
> 赞同：2
> 
> 时间：2013-02-21T10:25:07.113
> 
> 标签：events, scala, akka, actor, remote-actors

我将 AKKA 2.1 与 Scala 2.10 一起使用。

我需要多台机器来启动演员系统并实例化一些演员。在此之后，每个系统都需要访问所有其他系统并使用“actorFor(...)”收集对其参与者的引用。

但是，我需要一种方法让参与者系统在连接之前等待其他系统启动，否则我会出错。

如果参与者系统 A 在 B 离线时连接到 B，我的程序将失败。但是，如果 A 连接到 B 并在 B 上存在远程 Actor 引用之前获得它，则一旦 B 实际实例化该 Actor，程序就会继续正常运行。

简而言之，在尝试连接到 B 之前，我需要以某种方式等待 B 的创建事件。在 Scala+AKKA 中有没有好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-22T18:00:28.967

99% 的时间与人解决问题会让你与演员一起解决问题。想象它是建筑物（ActorSystems）和人（Actors）。

您可以在“/user/receptionist”之类的公共路径下创建一个在 ActorSystem 启动时创建的“接待员”演员（可以将 Akka 扩展配置为在 ActorSystem 启动时加载），然后告诉接待员与您联系演员 X/Y/Z 上线时，然后让 X/Y/Z 向接待员注册。因此，如果外部参与者询问时 X/Y/Z 不存在，它会存储请求直到某个超时或 X/Y/Z “报告”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T15:00:21.640

您可能想查看对 Akka 的集群支持。它允许您在其他机器加入集群并可以进行通信时监听事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T16:04:07.657

首先，`actorSelection`现在建议使用获取参与者引用的机制，尤其是通过网络。参见：[Akka 文档](http://doc.akka.io/docs/akka/snapshot/general/addressing.html)

这是异步和分布式系统中的一个重要问题。akka 集群支持使用从其类似发电机的框架中采用的各种机制。如果您想象您的每个演员都是人，并且每个演员系统都是建筑物中的人，那么您的任务类似于询问 Bob 是否已经进入街对面的建筑物。您可以：

*   一直打电话给那个大楼，直到鲍勃接电话。即发送一条消息尝试获取`actorRef`直到成功并处理错误
*   让鲍勃到达时给你打电话。但这确实是一个问题 22，因为 Bob 也不知道你在你的大楼里。
*   您可以引入一个“种子”actor 系统，所有其他actor 系统在创建时都隐含地知道该actor 系统，并且一旦actor 可用，每个actor 系统都会向该位置发送一条消息。这实际上将创建一个集中式存储库。

# python - 对数据库进行爬取和索引

> ID：14999862
> 
> 赞同：0
> 
> 时间：2013-02-21T10:25:43.113
> 
> 标签：python, ruby-on-rails, mongodb, web-crawler, database

我们有两个站点，一个用 RoR 开发，另一个用 Python（Django）开发。MongoDB 用作站点的数据存储。这些站点是基于登录的。因此，用户只能看到他们的数据，而不能看到其他用户的数据。此外，MongoDB中有许多模型，这些模型之间是相互关联的。

我们必须开发一种类似于 Gmail 搜索的搜索功能。在 Gmail 搜索框中，有许多字段，如、 、`label:`等`to:`用于过滤目的。如果没有选择这些字段，则进行正常搜索。令人惊讶的是，对于任何搜索查询，以 256 kbps 的带宽速度在不到 1 秒的时间内获取 Gmail 搜索结果。`from:``attachment:`

通过在所有模型中调用多个查询来搜索关键字是不可行的。对于爬取数据库数据的解决方案，谷歌搜索进行了查找。

在“搜索引擎”上进行谷歌搜索时，有一个结果提到了抓取和索引网页。可用的工具是 Lucene Solr+Nutch 和 Sphinx。但它适用于抓取网页并使用 Nutch 将关键字存储到数据库中，并使用 Solr 索引关键字并搜索它们。

在“数据库搜索引擎”上搜索并没有提供任何具体结果。

在此[链接](https://stackoverflow.com/questions/3215029/nosql-mongodb-vs-lucene-or-solr-as-your-database/3216550#3216550)中，在第二点中，有人指出*MongoDB 等似乎服务于不需要搜索和/或分面的目的*。那么，是不是意味着在 MongoDB 上爬取和索引是不可行的呢？

一般来说，有没有像在数据库上爬行和索引的东西，不管数据库工具（MySQL、SQLite、PostgreSQL、MongoDB 等）是什么？

更新：

我们开发的网站与 Gmail 非常相似，只是它与邮件服务无关。我们只需要开发一个搜索功能。因此，Gmail 用户可以看到他们的邮件，而不是其他人的邮件。同样，我们网站上的内容是特定于用户的。希望它能澄清问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:56:58.077

鉴于您的要求，据我所知，您并不真正想要网络爬虫，因为您想要索引文档的文本，而不是网页，并且文档对个人来说是私有的，因此您需要对搜索范围应用文档限制。虽然您可以以某种安全的方式（并由用户组织）抓取它们，但它似乎效率非常低且非常间接。

您需要提取数据并将其存储在全文搜索索引系统中。虽然某些数据库可能内置了全文搜索，但许多目前需要辅助系统，例如[ElasticSearch](http://www.elasticsearch.org/)或 Lucene。MongoDB 2.4 版本计划至少将全文搜索预览集成到数据库中。

正如我所提到的，一些数据库已经内置了全文搜索。大多数人对搜索结果的质量和性能的评价褒贬不一。鉴于您的要求，专用的可扩展全文搜索解决方案可能会为您提供最佳服务。

因此，当新数据进入您的系统时，您将在全文搜索系统中对其进行标记和索引。

不会有跨数据库系统的通用索引系统。您需要将其连接起来以获得最有效的搜索系统。如果您手动执行此操作，您将获得更好的结果，无论如何我都会怀疑。

# c# - 从更新面板中动态创建的控件中获取价值

> ID：14999866
> 
> 赞同：0
> 
> 时间：2013-02-21T10:25:54.233
> 
> 标签：c#, vb.net, dynamic, updatepanel

在`asp:DataList`我有一些文本的不同行，每行都有一个按钮。OnClientClick 在此按钮上打开一个 jquery 对话框，onclick 调用后端并在显示的对话框中填充一个更新面板。

后端给了我像“AV”“TEXT”这样的值，这意味着我应该填充一个文本框，当返回值时，这个标识符被称为“AV”。可以有无限数量的控件，我将它们添加到（动态创建的）表中。

这工作正常。但是在更新面板中，我有一个按钮可以保存这些值和 ID，但我找不到它们！我尝试添加`Session`让我找到控件的表，但值不存在。如果未添加到会话中，则控件不存在。

```
<div id="dialog-confirm" style="display: none;">
<div id='dialog'>
    <asp:UpdatePanel ID="upEditUpdatePanel" UpdateMode="Conditional" runat="server">
        <ContentTemplate>
            <asp:Panel ID="pnlVars" runat="server">
            </asp:Panel>
            <asp:Button ID="btnOK" runat="server" Text="OK" OnClientClick="StartLoader();" OnClick="btnOK_Click" align="center" />
        </ContentTemplate>
        <Triggers>
            <asp:PostBackTrigger ControlID="btnOK" />
        </Triggers>
    </asp:UpdatePanel>
</div> 
```

控件添加如下：

```
Dim pnlVars As Panel = upEditUpdatePanel.FindControl("pnlVars")
...
controls = GetControls()
Swtich controls.type
Case "TEXT"
Dim txtVar As New TextBox
txtVar.ID = "AV"
tblCellVal.Controls.Add(txtVar)
tblRow.Cells.Add(tblCellVal)
tblVars.Controls.Add(tblRow)
pnlVars.Controls.Add(tblVars)
....
upEditUpdatePanel.Update() 
```

我试图获取值和迭代控件的方式：

```
 Protected Sub btnOK_Click(ByVal sender As Object, _
                      ByVal e As EventArgs)
    For Each c As Control In pnlVars.Controls
        If TypeOf c Is Control Then

            If TypeOf c Is TextBox Then
                Dim ctr As TextBox = DirectCast(c, TextBox)
            End If

        End If
        If c.Controls.Count > 0 Then
            GetUserControls(c.Controls)
        End If
    Next
End Sub 
```

接受 vb.net 或 c# 中的答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:54:57.553

你应该了解asp.net`Page Cycle`

[http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)

要获取已经动态创建的值，您必须从中获取它们

```
protected void Page_PreRender(object sender, EventArgs e) {
    // get values from your dynamically created elements
} 
```

# boost-asio - Boost 绑定 AIX xlc io_service 运行

> ID：14999867
> 
> 赞同：0
> 
> 时间：2013-02-21T10:25:56.390
> 
> 标签：boost-asio, aix, boost-bind, xlc

我尝试使用 boost 编译项目，将 asio::io_service 绑定到 boost::thread，并且我遇到了我不知道如何解决的错误使用：IBM XL C/C++ for AIX，V11.1 (5724-X13)，版本: 11.01.0000.0006 (AIX 7.1)

```
 "/home/clag/projects/tomas/include/boost/asio/detail/posix_fd_set_adapter.hpp", line 33.30: 1540-0198 (W) The omitted keyword "private" is assumed for base class "noncopyable".
    "/home/clag/projects/tomas/ots/src/agent/agent.cc", line 50.46: 1540-0219 (S) The call to "boost::bind" has no best match.
    "/home/clag/projects/tomas/ots/src/agent/agent.cc", line 50.58: 1540-1229 (I) Argument number 1 is an rvalue of type "overloaded function: boost::asio::io_service::run".
    "/home/clag/projects/tomas/ots/src/agent/agent.cc", line 50.100: 1540-1229 (I) Argument number 2 is an rvalue of type "const boost::reference_wrapper<const boost::asio::io_service>".
    "/home/clag/projects/tomas/include/boost/bind/bind_mf_cc.hpp", line 30.5: 1540-1202 (I) No candidate is better than "boost::bind<unsigned long,boost::asio::io_service,boost::reference_wrapper<const boost::asio::io_service> >(unsigned long (io_service::*)() const, reference_wrapper<const boost::asio::io_service>)".
    "/home/clag/projects/tomas/ots/src/agent/agent.cc", line 50.58: 1540-1231 (I) The conversion from argument number 1 to "unsigned long (boost::asio::io_service::*)() const" uses the resolved overloaded function "size_t boost::asio::io_service::run()".
    "/home/clag/projects/tomas/ots/src/agent/agent.cc", line 50.100: 1540-1231 (I) The conversion from argument number 2 to "boost::reference_wrapper<const boost::asio::io_service>" uses "the identity conversion".
    "/home/clag/projects/tomas/include/boost/bind/bind_mf_cc.hpp", line 20.5: 1540-1202 (I) No candidate is better than "boost::bind<unsigned long,boost::asio::io_service,boost::reference_wrapper<const boost::asio::io_service> >(unsigned long (io_service::*)(), reference_wrapper<const boost::asio::io_service>)".
    "/home/clag/projects/tomas/ots/src/agent/agent.cc", line 50.58: 1540-1231 (I) The conversion from argument number 1 to "unsigned long (boost::asio::io_service::*)()" uses the resolved overloaded function "size_t boost::asio::io_service::run()".
    "/home/clag/projects/tomas/ots/src/agent/agent.cc", line 50.100: 1540-1231 (I) The conversion from argument number 2 to "boost::reference_wrapper<const boost::asio::io_service>" uses "the identity conversion".
    "/home/clag/projects/tomas/ots/src/agent/agent.cc", line 52.35: 1540-0219 (S) The call to "boost::bind" has no best match.
    "/home/clag/projects/tomas/ots/src/agent/agent.cc", line 52.47: 1540-1229 (I) Argument number 1 is an rvalue of type "overloaded function: boost::asio::io_service::run".
    "/home/clag/projects/tomas/ots/src/agent/agent.cc", line 52.98: 1540-1229 (I) Argument number 2 is an rvalue of type "boost::asio::io_service *".
    "/home/clag/projects/tomas/include/boost/bind/bind_mf_cc.hpp", line 30.5: 1540-1202 (I) No candidate is better than "boost::bind<unsigned long,boost::asio::io_service,boost::asio::io_service *>(unsigned long (io_service::*)() const, io_service *)".
    "/home/clag/projects/tomas/ots/src/agent/agent.cc", line 52.47: 1540-1231 (I) The conversion from argument number 1 to "unsigned long (boost::asio::io_service::*)() const" uses the resolved overloaded function "size_t boost::asio::io_service::run()".
    "/home/clag/projects/tomas/ots/src/agent/agent.cc", line 52.98: 1540-1231 (I) The conversion from argument number 2 to "boost::asio::io_service *" uses "the identity conversion".
    "/home/clag/projects/tomas/include/boost/bind/bind_mf_cc.hpp", line 20.5: 1540-1202 (I) No candidate is better than "boost::bind<unsigned long,boost::asio::io_service,boost::asio::io_service *>(unsigned long (io_service::*)(), io_service *)".
    "/home/clag/projects/tomas/ots/src/agent/agent.cc", line 52.47: 1540-1231 (I) The conversion from argument number 1 to "unsigned long (boost::asio::io_service::*)()" uses the resolved overloaded function "size_t boost::asio::io_service::run()".
    "/home/clag/projects/tomas/ots/src/agent/agent.cc", line 52.98: 1540-1231 (I) The conversion from argument number 2 to "boost::asio::io_service *" uses "the identity conversion".
    "/home/clag/projects/tomas/include/boost/asio/impl/write.hpp", line 276.7: 1540-0198 (W) The omitted keyword "private" is assumed for base class "detail::base_from_completion_cond<CompletionCondition>".
    "/home/clag/projects/tomas/include/boost/asio/impl/write.hpp", line 276.7: 1540-0198 (W) The omitted keyword "private" is assumed for base class "detail::base_from_completion_cond>boost::asio::detail::transfer_all_t>" 
```

导致错误的代码：

```
 acceptor_thread_.reset(new boost::thread(boost::bind(&boost::asio::io_service::run, boost::cref(*accept_io_service_))));
    for (int i = 0; i < agent_config_.threads(); i++) {
        thread_group_.create_thread(boost::bind(&boost::asio::io_service::run, work_io_service_.get()));
    } 
```

定义：

```
 boost::shared_ptr<boost::asio::io_service> accept_io_service_;
    boost::shared_ptr<boost::thread> acceptor_thread_;
    boost::shared_ptr<boost::asio::io_service> work_io_service_;
    boost::thread_group thread_group_; 
```

顺便提一下，这可能只是一些标志选项，但我在任何地方都找不到它，因为相同的代码在 Linux(GCC)、HP-UX(aCC) 和 Windows(MSVC) 上编译得非常好。

谢谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:30:21.693

快速的 google 搜索表明 AIX 存在重载解决问题，尤其是在涉及模板时。因此，可能值得尝试不同的方法来减少需要发生的重载解决方案的数量。

例如，[`boost::mem_fn()`](http://www.boost.org/doc/libs/1_53_0/libs/bind/mem_fn.html)可以用来代替[`boost::bind()`](http://www.boost.org/doc/libs/1_53_0/libs/bind/bind.html).

```
std::size_t (io_service::*run)() = &io_service::run;
boost::thread t(boost::mem_fn(run), io_service); 
```

此外，如果编译器仍然无法解决重载问题，请考虑编写一个简单的仿函数。[`boost::thread()`](http://www.boost.org/doc/libs/1_53_0/doc/html/thread/thread_management.html#thread.thread_management.thread.callable_constructor)构造函数的唯一要求是`func`参数是可复制的并且`func()`必须是有效的表达式。

```
struct service_runner
{
  explicit service_runner(boost::shared_ptr<boost::asio::io_service> io_service)
    : io_service(io_service)
  {}
  std::size_t operator()() { return io_service->run(); }
  boost::shared_ptr<boost::asio::io_service> io_service;
};

...

boost::thread t((service_runner(io_service))); 
```

其他需要考虑的点：

*   更喜欢编译符合要求的代码，而不是使用编译器标志来允许不符合要求的代码编译。在这种特殊情况下，[`io_service::run()`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/io_service/run/overload1.html)是一个非常量成员函数，但`accept_io_service`绑定到它的实例参数作为常量引用通过`boost::cref()`. 需要添加编译器标志，例如 gcc's`-fpermissive`以允许编译不合格代码。使用这些选项时要非常小心，因为它们可能会掩盖严重的问题。
*   考虑`boost::shared_ptr`作为实例句柄传递给绑定调用。`io_service`只要线程仍在运行，这将保持活动状态。否则，`io_service`可能会在线程仍在处理其事件循环时被删除，从而导致调用未定义行为的可能性很高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:41:30.263

只是好奇，您是否为您正在使用的编译器使用 IBM boost 库补丁？[http://www-01.ibm.com/support/docview.wss?uid=swg27006911](http://www-01.ibm.com/support/docview.wss?uid=swg27006911)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:59:34.773

查看尝试的 4 个可能的候选人的消息，差异似乎与 const 相关

```
No candidate is better than "boost::bind<unsigned long,boost::asio::io_service,boost::reference_wrapper<const boost::asio::io_service> >(unsigned long (io_service::*)() const, reference_wrapper<const boost::asio::io_service
>)".
No candidate is better than "boost::bind<unsigned long,boost::asio::io_service,boost::reference_wrapper<const boost::asio::io_service> >(unsigned long (io_service::*)(), reference_wrapper<const boost::asio::io_service>)".
No candidate is better than "boost::bind<unsigned long,boost::asio::io_service,boost::asio::io_service *>(unsigned long (io_service::*)() const, io_service *)".
No candidate is better than "boost::bind<unsigned long,boost::asio::io_service,boost::asio::io_service *>(unsigned long (io_service::*)(), io_service *)". 
```

由于您使用的是 V11.1 编译器，因此默认情况下未启用一些修复，您可以尝试使用以下选项

-qxflag=EnableIssue214PartialOrdering 这将启用与 C++ 核心语言问题 214 相关的几个修复

-qxflag=FunctionCVTmplArgDeduction2011 这启用了一些 C++2011 对参数推导的澄清

这些更改是 V12.1 编译器的默认值，但不是 V11.1 编译器的默认值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-28T11:47:55.387

如果有人偶然发现这个问题，我会添加额外的响应。因为我发现这与编译器无法解析使用哪个函数有关，如果函数名称相同，但参数不同。

例子：

```
void test(int a);
void test(int a, int b); 
```

将不起作用，并且会导致与上述类似的错误。
但是像这样更改名称：

```
void test(int a);
void test2(int a, int b); 
```

...会很好地工作。

这绝对是比创建包装器更少的开销解决方案（正如我自己在观察到这一点之前所做的那样）。

希望有人会发现这很有用。

# google-drive-api - 回复、评论和更改缺少用户 ID

> ID：14999870
> 
> 赞同：2
> 
> 时间：2013-02-21T10:26:13.490
> 
> 标签：google-drive-api

目前，在更改、评论或回复中没有唯一标识用户标识的句柄。这使得在用户 ID 下缓存这些数据变得非常困难。

是否有计划在用户名之外添加用户 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:38:36.443

用户的 permissionId 当前显示在更改提要中：

```
"lastModifyingUser": {
"kind": "drive#user",
"displayName": "Andrew Smith",
 "picture": {
  "url": ...
 },
 "permissionId": "05830388977156113623" 
```

# java - 开启可聆听的未来 > 可迭代 > 通过拆分和运行

> ID：14999877
> 
> 赞同：7
> 
> 时间：2013-02-21T10:26:30.000
> 
> 标签：java, asynchronous, concurrency, guava, future

我正在寻找将 a`ListenableFuture<Iterable<A>>`转换为个人序列的最佳方法`ListenableFutures`。这是我正在寻找的方法签名：

```
public <A, B> Iterable<ListenableFuture<B>> splitAndRun(
    final ListenableFuture<Iterable<A>> elements, 
    final Function<A, B> func, 
    final ListeningExecutorService executor
); 
```

显然，如果我回来了，我可以这样做`ListenableFuture<Iterable<ListenableFuture<B>>>`，但我觉得我应该能够拆分并运行它并保持它的异步性。

这是我到目前为止的代码，但你会注意到最后的讨厌`.get()`，这会破坏事情。如果我把事情复杂化了，请原谅。

```
public class CallableFunction<I, O> implements Callable<O>{
  private final I input;
  private final Function<I, O> func;

  public CallableFunction(I input, Function<I, O> func) {
    this.input = input;
    this.func = func;
  }

  @Override public O call() throws Exception {
    return func.apply(input);
  }
}

public <A, B> Iterable<ListenableFuture<B>> splitAndRun(
    final ListenableFuture<Iterable<A>> elements, 
    final Function<A, B> func, 
    final ListeningExecutorService executor
) throws InterruptedException, ExecutionException {
  return Futures.transform(elements, 
      new Function<Iterable<A>, Iterable<ListenableFuture<B>>>() {
    @Override
    public Iterable<ListenableFuture<B>> apply(Iterable<A> input) {
      return Iterables.transform(input, new Function<A, ListenableFuture<B>>() {
        @Override
        public ListenableFuture<B> apply(A a) {
          return executor.submit(new CallableFunction<A, B>(a, func));
        }
      });
    }
  }, executor).get();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T11:53:01.783

如果你把它想象`ListenableFuture`成一个盒子，为了从那个盒子里得到一些东西，你必须阻塞线程（调用`get`方法）。

不确定实施`splitAndRun`方法是否会以某种方式使您受益。您仍然会有一个返回的异步操作`ListenableFuture<Iterable<A>>`。

`Iterable<ListenableFuture<A>>`不过，作为单个加入的反向操作`ListenableFuture<Iterable<A>>`可能很有用。如果要将多个异步计算收集到一个中，则可能需要使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T16:46:44.793

（替代[我原来的答案](https://stackoverflow.com/a/15071244/28465)）

但是，如果转换速度很慢，或者某些输入可能会失败但其他输入会成功怎么办？在这种情况下，我们希望单独转换每个输出。另外，*我们要确保转换只发生一次*。我们的集合转换方法不做**此**保证。因此，在您的示例代码中，对输出的每次迭代都会向执行程序提交新任务，即使之前提交的任务可能已经完成。出于这个原因，我们`Iterables.transform`只在转换轻量级时推荐和朋友。（通常，如果你正在做一些重量级的事情，你的转换函数会抛出一个检查异常，它`Function`不允许。认为这是一个提示:) 当然，您的示例恰好没有触发提示。）

这在代码中意味着什么？基本上，我们将颠倒我在其他答案中给出的操作顺序。我们将从 转换`Future<Iterable<A>>`为`Iterable<Future<A>>`第一。*然后*我们将为每个人提交一个单独的任务，`A`以将其转换为`B`. 对于后一步，我们将提供一个`Executor` [以便转换不会阻塞一些无辜的线程](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/Futures.html#transform%28com.google.common.util.concurrent.ListenableFuture,%20com.google.common.util.concurrent.AsyncFunction%29)。（我们现在只需要`Futures.transform`，所以我静态导入了它。）

```
List<ListenableFuture<A>> individuals = newArrayList();
for (int i = 0; i < knownSize; i++) {
  final int index = i;
  individuals.add(transform(input, new Function<List<A>, A>() {
    @Override
    public A apply(List<A> values) {
      return values.get(index);
    }
  }));
}

List<ListenableFuture<B>> result = newArrayList();
for (ListenableFuture<A> original : individuals) {
  result.add(transform(original, function, executor));
}
return result; 
```

反正就是这个想法。但是我的实现很愚蠢。我们可以轻松地同时执行这两个步骤：

```
List<ListenableFuture<B>> result = newArrayList();
for (int i = 0; i < knownSize; i++) {
  final int index = i;
  result.add(transform(input, new Function<List<A>, B>() {
    @Override
    public B apply(List<A> values) {
      return function.apply(values.get(index));
    }
  }, executor));
}
return result; 
```

因为这使得 n`Futures.transform`调用而不是 1 并且因为它使用单独`Executor`的 ，所以如果转换是重量级的，它比我的其他解决方案更好，如果它是轻量级的，则更糟。另一个警告仍然存在：只有当您知道您将拥有多少输出时，这才会起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T16:11:32.993

这有两个部分。第一个是将 a 转换`Future<Iterable<A>>`为 a `Future<Iterable<B>>`。这可以通过嵌套`Futures.transform`和`Iterables.transform`（**如果**转换速度很快——在替代答案中更多）来实现。这是代码（虽然我已经换成了`Iterables.transform`，`Lists.transform`这将需要 a `Future<List<A>>`，原因我稍后也会解释）：

```
final ListenableFuture<List<B>> transformed =
    Futures.transform(input, new Function<List<A>, List<B>>() {
      @Override
      public List<B> apply(List<A> inputs) {
        return Lists.transform(inputs, function);
      }
    }); 
```

现在是从`Future<Iterable<B>>`到的转换`Iterable<Future<B>>`。正如 Mairbek 所说，这通常是不可能的：在我们知道将返回多少元素之前，我们无法知道输出将有多少元素`Future`。但是，如果我们确实知道输出中的元素数量，我们就可以让它工作。我们将应用另一个`Futures.transform`. （这就是我在`List`上面使用的原因。Plain`Collection`也可以工作，但代码会更难看。）

```
List<ListenableFuture<B>> result = newArrayList();
for (int i = 0; i < knownSize; i++) {
  final int index = i;
  result.add(Futures.transform(transformed, new Function<List<B>, B>() {
    @Override
    public B apply(List<B> values) {
      return values.get(index);
    }
  }));
}
return result; 
```

当然，`Future`列表中的每一个都将同时完成——只有在完整输入`Future`完成后。也就是我们不能更早的得到结果；我们只能以不同的格式获取它们（即，单个`Future`实例而不是批量列表）。这是以`Future<Iterable<A>>`.

# angularjs - 与弹出指令一起使用时双向绑定错误

> ID：14999878
> 
> 赞同：0
> 
> 时间：2013-02-21T10:26:31.217
> 
> 标签：angularjs, angularjs-scope

我正在尝试 angularjs 模态弹出指令。在那个弹出窗口中，我使用了选项卡和窗格指令。我有两个文本框（都具有相同的 ng-model=myName），一个在我的主页中，一个在我的弹出窗口中。如果我更改主页中的值，它会在弹出文本框中更新，但是当我更改弹出文本框时，主页文本框不会更新。如何修复它。

```
// html page
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html ng-app="modalDemo">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>modal popup</title>

<link rel="stylesheet" href="css/bootstrap.css">
<link rel="stylesheet" href="css/style.css">
<script type="text/javascript" src="js/jquery-1.8.1.min.js"></script>

<script type="text/javascript" src="js/angular.min.js"></script>
<script type="text/javascript" src="js/angular-resource.min.js"></script>
<script type="text/javascript" src="js/route1.js"></script>
<script type="text/javascript" src="js/controller.js"></script>
<script type="text/javascript" src="js/scripts.js"></script>
</head>
<body ng-controller="bodyCtrl">
<br />
 <input type="text" ng-model="myName" />
<button ng-click="primaryAction()">click to load default text</button> <br /><br />

<button modal-open="myModal"> click me</button>

<popup modal-id="myModal" modal-type="tabs" show-header="false" header-title="Modal Header">

<tabs>
<pane title="first">
    <input type="text" name="myName" ng-model="myName">
        <button class="btn btn-primary" ng-click="primaryAction()">save</button>
</pane>
<pane title="second">
    <h3>content2</h3>
</pane>
<pane title="Third">
    <h3>content3</h3>
</pane>

</tabs> 
```

我已经在我的小提琴中发布了我的代码。[在这里摆弄](http://jsfiddle.net/Zd7ax/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:33:48.030

那是因为有两个不同的范围，其中一个是另一个的父级。当`myName`子作用域上不存在任何属性时，子作用域`myName`从父作用域获取。也就是说，当您更改外部输入（连接到父范围）中的值时， tabs 指令内的输入会更新。但是，当您在选项卡内编辑输入字段的值时，该值将写入`myName`子范围的新属性，并且`myName`不再在父范围和子范围之间连接。

如果您想像这样共享 ng-models，请确保您的模型包含一个点。类似的东西，`myModel.myName`而不仅仅是`myName`. 这将导致 JavaScript 首先`myModel`在子作用域上查找，但由于子作用域没有 a `myModel`，它会在父作用域中查找它并设置`myName`该对象。

这是一个工作示例：http: [//jsfiddle.net/Zd7ax/30/](http://jsfiddle.net/Zd7ax/30/)

# solr - 如何让solr建议器返回带有分数的建议

> ID：14999881
> 
> 赞同：1
> 
> 时间：2013-02-21T10:26:37.503
> 
> 标签：solr, autosuggest

我正在使用 Apache SOLR 4.1，并且正在使用 Suggester 组件。但是，我无法弄清楚如何让它也输出每个建议的分数/频率。有谁知道这是否可能？

谢谢，

伊戈尔

# c# - Unity3D相机不断移动

> ID：14999882
> 
> 赞同：1
> 
> 时间：2013-02-21T10:26:39.127
> 
> 标签：c#, camera, unity3d

我正在尝试统一制作我自己的第一人称相机控件，在游戏板上使用两个拇指杆。我有这个工作正常。但是，当我移动右手拇指杆（用于向左/向右和向上/向下看的拇指杆时，相机开始不断更新。

这是我的手柄移动代码：

```
 // Update is called once per frame
void Update()
{

    float speed = transform.localEulerAngles.y + Input.GetAxis("LeftRight") * sensitivityX;

    rotationY += Input.GetAxis("UpDown") * sensitivityY;
    rotationY = Mathf.Clamp(rotationY, minimumY, maximumY);

    transform.localEulerAngles = new Vector3(-rotationY, speed, 0);

} 
```

为了控制左拇指杆，我简单地将我的脚本附加到 Unity 提供的第一人称角色控制器上。

我知道我的代码正在更新每一帧，但我认为它只会在我按下右拇指杆时更新。如果不是这种情况，有没有办法可以限制它仅在我移动右拇指杆时增加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:37:09.907

Update() 中的代码确实会在每一帧中执行。

您注意到的运动主要是由于`transform.localEulerAngles`每帧都被调用。速度参数从不为零，因为它基于`transform.localEulerAngles.y`

您可以检查轴值是否不为零，如下所示：

```
void Update()
{

    float inputValueLeftRight = Input.GetAxis("LeftRight");
    if(inputValueLeftRight > 0 || inputValueLeftRight < 0)
    {
       float speed = transform.localEulerAngles.y + inputValueLeftRight * sensitivityX;    
       transform.localEulerAngles = new Vector3(-rotationY, speed, 0);
    }

    float inputValueUpDown = Input.GetAxis("UpDown");
    if(inputValueUpDown > 0 || inputValueUpDown < 0)
    {
       rotationY += inputValueUpDown * sensitivityY;
       rotationY = Mathf.Clamp(rotationY, minimumY, maximumY);
    }

} 
```

# php - 让浏览器缓存我的动态 PHP 样式表

> ID：14999883
> 
> 赞同：6
> 
> 时间：2013-02-21T10:26:43.853
> 
> 标签：php, css, caching, dynamic, browser

我想在 PHP 文件 (styles.php) 中创建一个样式表，这样样式表就会变成动态的，具体取决于请求的用户。对于每个单独的用户，样式表是不变的，因此应该缓存在他的客户端浏览器上。

我读过你可以通过设置内容类型和缓存控制等的标题来实现这一点，但我无法让它工作。显然还有更多，甚至是不可能的。浏览器似乎并不总是听缓存标头。

有谁知道让 PHP 文件缓存在浏览器中需要什么？

我不想将所有动态 CSS 放在 HTML 的样式块中，也不想为此更改我的 Apache 配置。如果我想要的真的不可能，我也想知道。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T11:16:36.640

这些标头应该可以正常工作：

```
$expires = 60*60*24; // how long to cache in secs..
header("Pragma: public");
header("Cache-Control: maxage=".$expires);
header('Expires: ' . gmdate('D, d M Y H:i:s', time()+$expires) . ' GMT');
header('Content-type: text/css'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:30:26.503

这似乎是相似的，请检查。

[动态 Css 的缓存头](https://stackoverflow.com/questions/2395609/cache-headers-for-dynamic-css-generated-via-php)

# performance - 从大文件访问 n-gram 频率

> ID：14999889
> 
> 赞同：2
> 
> 时间：2013-02-21T10:27:01.490
> 
> 标签：performance, nlp, large-files, n-gram, memory-efficient

我对自然语言处理和 Java 编程很陌生。我有一个非常大的文本文件，其中包含 ngram 和相关频率（aaprox. 250 mb）。我需要在程序运行时获取频率值，给定一个 ngram。文件中提供的 ngram 频率如下（仅作为示例）：

```
the quick 445
quick brown 458
brown fox 11
fox jumped 123 
```

我尝试在启动时通过填充一个哈希集来读取文件……但一个 18mb 的文件花了将近 1500 毫秒（使用 System.currentTimeMillis() 测试）。现在我正在考虑对 n-gram 计数进行排序并将 250mb 文件分成小块并填充一个列表并通过在单独的索引中索引文件集并引用它来按需获取频率。

但是，我不确定是否有另一种更简单或更有效的方法来做到这一点。请让我知道是否有更好的方法来做到这一点。（最好不使用任何脚本或库......）。谢谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:52:12.743

看看[BerkeleyLM](http://code.google.com/p/berkeleylm/)，它是一个用于处理 ngram 的特殊库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T23:19:11.733

我同意@mbatchkarov 的观点，即加载时间通常不是最重要的优化目标。但是运行时通常与内存占用密切相关（内存访问速度很慢，因此缓存中可以容纳的工作集越多越好）。

您将每个二元组映射到整数计数（大概在 java.util.HashMap 中）的初始方法是明智的，但非常占用内存。您的计数文件包含数百万个二元组，每个元组都必须表示为单独的字符串。这些字符串消耗（至少）大约 40 个字节的内存，并且每个计数都需要一个 Integer 对象——在大多数 JVM 实现中大约需要 20 个字节。我粗略的粗略猜测将该数据结构超过了千兆字节。

但是您可以做得更好，通过观察虽然双元组仅在您的文件（和您的数据结构）中出现一次，但大多数单个单词会重复多次 - 您可以在不重复存储它们的情况下逃脱。

我将从单词到整数索引的映射开始 - 例如，从您的示例中，the=0、quick=1、brown=2 等等。我不知道您的词典有多大，但常用英语单词的典型映射可能有几万或几十万个单词。所以字符串存储必须更小。

要存储计数，您可以将这些整数词索引组合成一个复合键，并将该键用于您的地图。一种简单的“组合”方法是简单地将第一个单词的索引移位，并在第二个索引中进行 OR。

在伪代码中：

```
HashMap<String, Integer> lexicon = new HashMap<String, Integer>();

// Iterate through the file, mapping each word to 
for (String file line) {
  ... Parse out word1 and word2
  if (!lexicon.containsKey(word1)) {
      lexicon.put(word1, lexicon.size());
  }
  if (!lexicon.containsKey(word2)) {
      lexicon.put(word2, lexicon.size());
  }
} 
```

现在，再次遍历文件，将计数添加到单独的计数映射中。

```
HashMap<Long, Integer> countMap = new HashMap<Long, Integer>();

for (String file line) {
    ... Parse out word1, word2, and count
    int i1 = lexicon.get(word1);
    int i2 = lexicon.get(word2);
    long key = (i1 << 32) | i2;
    countMap.put(key, count);
} 
```

访问二元计数类似于映射它 - 查找两个单词的索引，创建键，然后在计数映射中查找。这应该会大大减少您的存储空间。但我会更进一步，用[FastUtil](http://fastutil.di.unimi.it/)或[Trove](http://trove.starlight-systems.com/)之类的特定类型映射替换通用 HashMaps 。原始数据结构将消除数据映射中每个 Long 和 Integer 的大量 ~12-20 字节开销。

上面的伪代码假设您使用 32 位整数作为单词索引，并将它们组合成 64 位长整数。如果您的词典足够小，您可以使用 16 位 short 和 32 位 int 来代替，这样可以节省更多空间。

编辑：我应该很清楚，如果你想实现一个完整的 n-gram 语言模型（trigram、4-gram 等），有更有效的表示，并且 n-gram 模型可以由几个库很好地处理（我建议你看看[OpenGRM](http://www.openfst.org/twiki/bin/view/GRM/NGramLibrary)和[Lingpipe](http://alias-i.com/lingpipe/)）。但是上面的伪代码是一种简单且相对有效的方法来做一个简单的二元模型。

# java - 使用 Android 从 jar 资源中播放音频文件

> ID：14999890
> 
> 赞同：2
> 
> 时间：2013-02-21T10:27:02.933
> 
> 标签：java, android, android-mediaplayer

如果我在 jar 库中有这个方法：

```
public void playAudioFile()
{
  ClassLoader cLoader = getClass().getClassLoader();
  URL url = cLoader.getResource("audio.mp3"); // in the resource of the jar library
  System.out.println(url.toString());

  MediaPlayer mediaPlayer = new MediaPlayer();
  mediaPlayer.setDataSource(url);
} 
```

编译库后，我有： MySDK.jar

当我将 MySDK.jar 添加到我的 android 应用程序并尝试播放音频文件时：

```
private void playAudio()
{
   MySDK.Audio audio = new MySDK.Audio();
   audio.playAudioFile();
} 
```

编译android应用程序后，我有：mysampleapp.apk

调试应用程序时，无法播放音频文件，原因是：

```
System.out.println(url.toString()); 
```

给出：

```
jar:file:/data/app/com.mysampleapp.apk!/audio.mp3 
```

音频的路径应该来自 jar 文件，而不是来自示例应用程序。因此，无法播放音频文件。

我做错了什么，如何将音频文件作为 jar 库中的资源文件播放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:00:00.270

我认为在 Android 中使用 .jar 中的方法开始播放 mp3 文件是不可能的。如果您需要保留 .jar 并播放其中的 mp3，我会暂时将 mp3 解压缩到 SD 卡并从那里播放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:17:45.180

您好在您的 playAudioFile() 方法中尝试这些代码

```
 URL defaultSound = getClass().getResource("/folder/folder/audio.wav");
    File soundFile = new File(defaultSound.toURI());
    System.out.println("defaultSound " + defaultSound);  // check the URL!
    AudioInputStream audioInputStream = AudioSystem.getAudioInputStream(defaultSound);
    Clip clip = AudioSystem.getClip();
    clip.open(audioInputStream);
    clip.start( ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T22:33:16.680

我只看到两个解决方案：

*   jar 文件必须包含 mp3。
*   添加基本​​ url 作为参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T14:08:17.933

我怀疑这个问题与 SO 上的另一个问题非常相似（但我不知道如何标记它）。我提供给那个的答案是：[将字符串转换为资源 Uri 以进行 mp3 播放](https://stackoverflow.com/questions/8833772/convert-a-string-to-a-resource-uri-for-mp3-playback/12404111#12404111)

本质上，您需要正确获取 URI，如上面的链接所述。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T22:40:37.607

Dalvik 不知道你的库，它只知道你的应用程序。我认为您可以解决此问题的一种方法是将特定于应用程序的资源作为参数传递给 playAudioFile() 方法（或者，您可以初始化其类的属性）。这样，您可以将文件复制到属于您的应用程序的正确目录，并且仍然可以为您的类重用。

# c# - 将 EF 与不是 1:1 的现有数据库和域/对象模型一起使用

> ID：14999891
> 
> 赞同：4
> 
> 时间：2013-02-21T10:27:09.447
> 
> 标签：c#, entity-framework, ef-code-first, ef-database-first

首先：我是 EF 新手，这只是为了测试 EF 的功能，看看它如何适应已经根据数据库表和对象模型设置的环境 - 以及当这两个模型不要在类名/表名和属性名/列名上，甚至表和类的数量上进行1:1的映射。如果您想回复：“EF 不应该以这种方式使用”，请记住“测试功能”。谢谢！:)

考虑以下场景。

我有三个数据库表：

```
|----------------|       |-------------|       |-----------------|
|   MessageLog   | >---1 |   Message   | 1---< |   MessageText   |
|----------------|       |-------------|       |-----------------|
| logId          |       | messageId   |       | messageId       |
| messageId      |       | type        |       | languageCode    |
| from           |       | ...         |       | text1           |
| to             |       |-------------|       | text2           |
| ...            |                             | ...             |
|----------------|                             |-----------------| 
```

我想映射到两个类：

```
|--------------------|       |----------------------------|
|   ServiceMessage   |<-\    |   ServiceMessageInstance   |
|--------------------|  |    |----------------------------|
| Id: string         |  |    | Id: string                 |
| LanguageCode: str. |  \----| Message: ServiceMessage    |
| Text1: string      |       | From: DateTime             |
| Text2: string      |       | To: DateTime               |
| Type: MessageType  |       |----------------------------|
|--------------------| 
```

ServiceMessage 对象由 Message 表中的一行（以**messageId**作为键）和 MessageText 表中的一行（以**messageId**和**languageCode**作为键）组成。

ServiceMessageInstance 更简单：它具有对 ServiceMessage 对象的引用和一些附加属性。

我在 EF 上玩了一些，并进行了很多谷歌搜索，但我还没有找到我的问题的答案：我怎样才能用 EF 做到这一点？我应该采取哪种方法？我可以用 EDMX 设计器做到这一点吗？DbContext.OnModelCreating？

我意识到这可能有点过于“宽泛”的问题，但我会很感激任何指针！

谢谢。

BR，爱马仕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:17:46.977

走哪条路问题:-) 这里解释得很好：http: [//msdn.microsoft.com/en-us/data/ee712907](http://msdn.microsoft.com/en-us/data/ee712907)

为了帮助您，您还可以安装**Entity Framework powertools。**

[http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)

首先从数据库**逆向工程代码**是一个不错的选择。
创建一个新项目。然后在项目 Right Click 上，上下文菜单应该提供 ![在此处输入图像描述](../Images/6785df57869ce6d48ce7765537451ebc.png)

您应该会看到添加到项目中的代码。这对审查很有用。然后删除了临时项目。在为您自己的代码获取有用的部分之后。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:16:10.100

说实话，我实际上并没有尝试过，因为我没有遇到迫使我这样做的情况，但我记得当我阅读“[编程实体框架 DbContext](https://rads.stackoverflow.com/amzn/click/com/1449312969) ”时，我遇到了一个部分确切地说，第 5 章称为“跨多个表映射单个实体”，我认为这正是您想要的。
**笔记**

*   上述称为**“实体拆分”**的功能首先使用实体​​框架代码，但我假设（*不确定*）它也可能与其他实体框架神话一起使用。
*   您不能通过 Data Annotations 启用它，而是必须使用 Fluent API 对其进行配置。
*   为此，您需要使用**[Map](http://msdn.microsoft.com/en-us/library/gg679141%28v=vs.103%29.aspx)**功能。
*   还有一个功能也朝着另一个方向发展，它允许您将多个实体映射到单个表。

# shell - 如何在 Unix 中搜索 XML 文件的标签值？

> ID：14999895
> 
> 赞同：1
> 
> 时间：2013-02-21T10:27:15.703
> 
> 标签：shell, unix, xml-parsing

我有一个像下面这样的 xml

```
<productCode>
    <codingScheme>BDR</codingScheme>
</productCode>
<productCode>
    <codingScheme>CNY</codingScheme>
</productCode>
...
<riskCategoryCode>
    <codingScheme>BDR</codingScheme>
</riskCategoryCode>
<riskCategoryCode>
    <codingScheme>NCP</codingScheme>
</riskCategoryCode>
... 
```

现在我需要计算仅在标签下有多少这样的*BDR值。*`codingScheme``productCode`

我写了这个脚本：

```
Word1="<productCode>";
Word2="<codingScheme>BDR";
Word3="$Word1${Var}$Word2";
echo "$Word3";
grep -c "$Word3" fileFullName; 
```

但它计算和的总出现`productCode`次数`codingScheme`（例如，`productCode`10 次和`codingScheme`20 次，然后返回 30，这不是必需的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:35:07.627

```
awk '{if($0~/\<codingScheme\>BDR\<\/codingScheme\>/){if(x~/productCode/)count++};x=$0}END{print count}' your_file 
```

测试：

```
> cat temp
<productCode>
<codingScheme>BDR</codingScheme>
</productCode>
<productCode>
<codingScheme>CNY</codingScheme>
</productCode>
<productCode>
<codingScheme>BDR</codingScheme>
</productCode>
......
<riskCategoryCode>
<codingScheme>BDR</codingScheme>
</riskCategoryCode>
<riskCategoryCode>
<codingScheme>NCP</codingScheme>
</riskCategoryCode>
> awk '{if($0~/\<codingScheme\>BDR\<\/codingScheme\>/){if(x~/productCode/)count++};x=$0}END{print count}' temp
2
> 
```

# php - cakephp 查询 1.1 中 MYSQL Max 中的记录不正确

> ID：14999896
> 
> 赞同：0
> 
> 时间：2013-02-21T10:27:19.397
> 
> 标签：php, mysql, cakephp

我有一个场景，我需要找到一个高于最后一个最高数字的数字，然后将该数字插入新行中，并且必须根据 2 if 语句执行两次，我为此使用了 mysql `max`：

```
if(condtn1){
    $maxNum = $this->model->query('SELECT SQL_NO_CACHE max(qte_number) + 1 as newQuoteNumber FROM qtes LIMIT 1');
 $this->model->save($data) // the max number caluclated above inserts here and is visible in DB
}
if(condtn2){
    $maxNum = $this->model->query('SELECT SQL_NO_CACHE max(qte_number) + 1 as newQuoteNumber FROM qtes LIMIT 1');
 $this->model->save($data); //simillar case with some values different in data array 
} 
```

我假设在第一个条件下保存的数字现在将作为我在第二个条件下需要的数字的基础。就像第一个生成 200 并保存在数据库中一样，所以在第二种情况下它应该是 201，但在它们两个中它仍然是 200。我尝试了一些缓存选项来禁用缓存，例如

```
$this->cacheQueries = false; 
```

并且还手动将其从 tmp 文件夹中删除，但没有效果。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:28:23.270

显然，您正在尝试创建所谓的“无缝序列”。

但是，因为您使用两个单独的查询来实现这一点（首先计算 max(x) + 1，*然后*使用该值插入新记录），所以您冒着计算值不再是正确值的风险; *在您计算*新数字和*插入*新记录之间，其他人可能创建了新记录。

更好的选择可能是让*数据库*在插入期间为您计算值。您可以使用“触发器”来执行此操作；Stackoverflow 上的这个问题做了类似的事情，可能会给你正确的指导来实现这一点；

[MySQL触发器将列设置为max + 1不起作用](https://stackoverflow.com/questions/5240838/mysql-trigger-to-set-column-to-max-1-not-working)

将创建新 ID 的责任留给数据库还有一个好处是，*无论您使用什么工具插入数据*，数据库都将始终确保生成正确的 ID/序列。

因此，即使您通过 MySQL shell 或使用 PhpMyAdmin 插入新记录，数据库也会自动生成新编号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:42:10.937

我找到了一种方法来完成这项工作。这是一个缓存问题，查询函数中有第二个参数需要设置为不缓存查询

```
$this->model->query($qry,false); 
```

谢谢大家。

# jquery - jQuery.ajax() 省略“空”对象属性

> ID：14999897
> 
> 赞同：9
> 
> 时间：2013-02-21T10:27:19.900
> 
> 标签：jquery

我有以下 JS 对象：

```
var data_test = { foo: [], bar: [ 'baz' ] }; 
```

当我通过以下方式提交此对象时`jQuery.ajax()`：

```
$.ajax({
    url: "test.php",
    type: "POST",
    data: data_test
}); 
```

事实证明只`bar`发送了数组，而不是那个`foo`。

证明：在*test.php*中，我简单地`var_dump`编辑了`$_REQUEST`：

```
array(1) {
  ["bar"]=>
  array(1) {
    [0]=>
    string(3) "baz"
  }
} 
```

是否可以强制 jQuery 也提交一个空对象属性？我需要 jQuery 发送`data_test`对象的精确副本，如果它忽略了打破我逻辑的空值！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-05-26T21:57:16.020

游戏有点（非常）晚了，但我想指出，如果您的应用程序准备好接受 JSON，您可以使用 JSON.stringify 发送空数组：

```
var data_test = { foo: [], bar: [ 'baz' ] };

$.ajax({
    url: "test.php",
    type: "POST",
    data: JSON.stringify(data_test),
    contentType: 'application/json'
}); 
```

这应该发布空数组。请注意，`JSON.stringify`它从 IE8 开始可用，但您始终可以使用[json.js](https://github.com/douglascrockford/JSON-js)来填补这个空白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:57:06.167

为什么不直接设置空数组……你甚至可以用这种方式创建一个函数……

```
function __validate(obj) {

 for(key in obj) {

  if(obj[key].length == 0) {
    obj[key] = [""];
  }

 }

return obj;
}

data_test = __validate(data_test); 
```

现在，如果你会看到，你会得到确切的结构。然而正如@lonesomeday 正确所说，没有jQuery 方法可以做到这一点。

# c# - xhr.setRequestHeader 不在 Firefox 中工作，但在 IE 中工作？

> ID：14999899
> 
> 赞同：1
> 
> 时间：2013-02-21T10:27:23.977
> 
> 标签：c#, asp.net, jquery

在这里，我通过 jquery ajax 调用传递了一个 http 请求标头值。它仅适用于 IE，不适用于 Firefox。当 `xhr.setRequestHeader`代码中有ajax 调用本身时，Firefox 中不会发生

```
var Call = function () {
$.support.cors = true;
var input = {
             RefId: "111", LoginId: "222", Id: "33", FirstName: "aaa", LastName: "bbb"
            };
var url = document.URL;
$.ajax({
            type: "POST",
            beforeSend: function (xhr) {
            xhr.setRequestHeader("URL", url);
            },
            url: "http://localhost:40780/Service.svc/Insertion",
            data: JSON.stringify(Input),
            contentType: "application/json",
            dataType: "json",
            success: function (response) {
            alert(response);
            },
            error: function (xhr, status, error) {
            }
        });
    } 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:15:59.560

好吧，我想可以在这里找到原因，通过客户端和服务器处理 CORS 和预检请求的方式：

[http://www.html5rocks.com/en/tutorials/cors/](http://www.html5rocks.com/en/tutorials/cors/)

> 来自 JQuery 的 CORS
> 
> JQuery 的 $.ajax() 方法可用于发出常规 XHR 和 CORS 请求。关于 JQuery 实现的几点说明：
> 
> JQuery 的 CORS 实现不支持 IE 的 XDomainRequest 对象。但是有一些 JQuery 插件可以实现这一点。有关详细信息，请参阅 [http://bugs.jquery.com/ticket/8283](http://bugs.jquery.com/ticket/8283)。如果浏览器支持 CORS，则 $.support.cors 布尔值将设置为 true（这在 IE 中返回 false，请参见上面的项目符号）。这是检查 CORS 支持的快速方法。

```
 headers: {
    // Set any custom headers here.
    // If you set any non-simple headers, your server must include these
    // headers in the 'Access-Control-Allow-Headers' response header.
  }, 
```

希望这会有所帮助

# php - 选择复选框并从特定 id 获取结果

> ID：14999901
> 
> 赞同：0
> 
> 时间：2013-02-21T10:27:34.753
> 
> 标签：php, checkbox

大家好，当用户自动选择一个复选框时，复选框 id 结果将来自数据库，这可能吗？

```
<tr>
        <td height="25" align="center" valign="middle" bgcolor="#F7F7F7" >1.</td>
        <td align="left" valign="middle" bgcolor="#F7F7F7">
        <input type="checkbox" name="checkbox" value="<?php echo $res['profile_id']; ?>" /></td>
        <td align="left" valign="middle" bgcolor="#F7F7F7" >
        <?php echo $sql['profile_product']; ?></td>
        <td align="center" valign="middle" bgcolor="#F7F7F7" ><span class="WebRupee" style="color:#FF0000">Rs. </span>
        <?php echo $sql['profile_mrp']; ?></td>
        <td align="center" valign="middle" bgcolor="#F7F7F7" ><span class="WebRupee" style="color:#FF0000">Rs. </span>
        <?php echo $sql['profile_ctc']; ?></td>
        <td align="center" valign="middle" bgcolor="#F7F7F7" ><span class="WebRupee" style="color:#FF0000">Rs. </span>
        <?php echo $sql['profile_krt']; ?></td>
</tr> 
```

# java - 有什么作用。或 / 代表 java servlet/spring/struts？

> ID：14999902
> 
> 赞同：0
> 
> 时间：2013-02-21T10:27:35.583
> 
> 标签：java

在一个项目中，同时给出我们经常使用的包的路径或文件名，`.`或者`/` 每个的重要性是什么。例如

```
src/main/resources
|
|-ftl
   |
   |-css, hello.ftl
      |
      |-images, helloCss.css
          |
          |-pic.jpeg 
```

我正在尝试在 hello.ftl freemarker 模板中包含一个 css 文件，但它似乎没有接受它`<link rel="stylesheet" href="./css/helloCss.css"/>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:33:36.703

使用时，`ClassPath.getRessource()`您需要使用`'/'`而不是`'.'`表示 a 中的资源`java package`，因为`java packages`使用分隔`'.'`但其他文件可能`'.'`在其名称中包含该字符（与`java packages`and相比`classes`）。

编辑：您的问题是`src/main/ressources`部署到哪里。由于我不知道您的项目配置，因此我无法告诉您`helloCss.css`最终 Web 项目中的哪个路径。

EDIT2：由于`'.'`路径的开头表示当前目录（归功于user1516873，请参阅评论），这是您问题的最可能原因。

# google-chrome - Chrome：防止 Inspector 窃取 Cmd-1 到 Cmd-9 的快捷方式

> ID：14999904
> 
> 赞同：0
> 
> 时间：2013-02-21T10:27:48.013
> 
> 标签：google-chrome, keyboard-shortcuts, google-chrome-devtools

在开发网站时，我经常使用 Cmd-1 到 Cmd-9 在 Chrome 的选项卡之间切换。可悲的是，当 Inspector 打开（并且有焦点）时，它会窃取那些在自己的选项卡之间切换的快捷方式。有没有办法防止这种情况？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-12T08:19:47.660

*现在这是可选的，可以使用“设置常规*”页面中的复选框进行切换。

# python - 将两个列表组合成一个字典或打印它们（最短的方式）

> ID：14999905
> 
> 赞同：0
> 
> 时间：2013-02-21T10:27:50.967
> 
> 标签：python, list, dictionary

我有两个清单

```
a=[0,0.3,0.6]
b=['x','y','z'] 
```

我可以使用 zip 将它们组合到字典中，遍历它（也出于某种原因 zip 更改 a 的顺序）。但我想知道最短的代码（一个衬里），它需要 a，b 并打印出来

```
0 \t 'x'
0.3 \t 'y'
0.6 \t 'z' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:30:25.567

使用 zip，但没有字典：

```
print '\n'.join('{} \t {}'.format(aa,bb) for aa,bb in zip(a,b)) 
```

或者

```
print '\n'.join(map('{0[0]} \t {0[1]}'.format, zip(a,b))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T10:31:34.927

创建 dict 的最佳方法是理解（尽管使用 zip ......）

```
{key: value for (key, value) in zip(a,b)} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T10:31:12.803

这很容易`zip`：

```
print '\n'.join(str(i)+' \t '+str(j) for i, j in zip(a, b)) 
```

或者：

```
print '\n'.join('%d \t %s' % (i, j) for i, j in zip(a, b)) 
```

或者当然是[eumiro](https://stackoverflow.com/a/14999954/1907098)使用的格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T10:48:42.063

`for/join/map`无论你使用什么，你都在某种程度上进行迭代。`print`列表理解使其紧凑（或“更短”），`join`ed 列表也是如此。`map`还在内部迭代每个元素。

列表理解：

```
[print("%d\t%d\n"%(i,j)) for i,j in zip(a,b)] 
```

# heroku - 无法推送到heroku

> ID：14999918
> 
> 赞同：3
> 
> 时间：2013-02-21T10:28:28.120
> 
> 标签：heroku, key, public-key

我安装了 Windows 7 Home Premium：

```
gem 1.8.24
ruby 1.9.3p385
node 0.8.19
git 1.8.1.msysgit.
heroku/toolbelt/2.35.0 (i386-mingw32) ruby/1.9.3 
```

我可以使用以下命令成功登录heroku `heroku login`：。即使我清除密钥：`heroku keys:clear`并生成新密钥，`heroku keys:add`我也取得了成功！

当我登录 heroku 网页-> 我的帐户时，我已经正确添加了密钥。我作为合作者被添加到项目中。

```
git remote add heroku-s git@heroku.com:secret-project.git 
```

问题是，当我尝试将文件推送到 heroku 时：

```
git push heroku-s master 
```

我得到错误：

```
Permission denied (publickey).
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T10:36:45.080

尝试重新生成公钥 ( `id_pub.rsa`)，然后将其再次添加到 heroku。

```
ssh-keygen -t rsa -C "your_email@youremail.com"
heroku keys:clear
heroku keys:add 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T19:07:51.190

对我来说，问题是密钥是在我的 HOMEDRIVE 上生成的（在我的工作中是 F:/.ssh），但 Heroku 正在 C:/Users/MYNAME/.ssh 中查找。将 id_rsa 文件从 F:/.ssh 复制到 C:/Users/MYNAME/.ssh 解决了这个问题。

然后我跑了

```
heroku.keys:add 
```

之后我能够做到

```
git push heroku master 
```

# rest - 在数据库中登录 REST 请求/响应

> ID：14999919
> 
> 赞同：0
> 
> 时间：2013-02-21T10:28:29.320
> 
> 标签：rest, logging, jaxb, cxf

我想记录使用 CXF 和 JAXB 的应用程序的 REST 请求和响应。

我曾经在使用 AOP 调用 web 服务之前记录未编组的对象，然后我切换到 cxf 拦截器，但我对 cxf 拦截器的 PHASE 概念不太满意（糟糕的文档）。

这就是为什么我想知道是否有更好的方法来记录 REST Web 服务的 XML 请求和响应（我的表中有一些附加信息）。

我正在使用 JDK 5 和 tomcat 5（是的，我知道......）

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:38:04.170

CXF 文档中有一个部分涵盖了其中的一些内容：

[http://cxf.apache.org/docs/debugging-and-logging.html](http://cxf.apache.org/docs/debugging-and-logging.html)

更具体地说，您可以子类化 CXF 日志记录拦截器并覆盖它们实际执行日志记录的一种方法。

# arrays - 将命令参数保存到数组批处理

> ID：14999922
> 
> 赞同：-1
> 
> 时间：2013-02-21T10:28:33.900
> 
> 标签：arrays, batch-file, arguments

我正在寻找一种方法来创建批处理接收的参数数组。

示例：如果我运行，`bfile.bat 1 2 3 4 5`我将有一个包含 5 个单元格的数组`1, 2, 3, 4, 5`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T13:04:31.187

Windows 批处理脚本并没有真正包含数组的功能，因为在其他语言中没有用于排序、长度等的数组成员函数。Aacini 就此事撰写了[详尽](https://stackoverflow.com/a/10167990/1683264)的说明。

话虽如此，您可以很好地模拟数组以完成您描述的内容。

```
@echo off
:: arr.bat -- simulates creation of an array with script arguments
setlocal enabledelayedexpansion

set args=%*
set arr.length=0

rem delayed expansion of %args% here to prevent if statement from freaking out
rem if quotation marks or spaces are encountered
if #!args!==# goto :usage

rem ###############
rem construct array
rem ###############

rem surround each argument with quotation marks and loop through them
rem 1 "2 3" 4 becomes "1" ""2" "3"" "4" (keeping 2 and 3 grouped)
for %%I in ("%args: =" "%") do (

    rem Pop quiz, hotshot.  Why did I not just use `set arr[!arr.length!]=%%~I`
    rem to strip the quotation marks?  Try it and see what happens.
    set val=%%I
    set arr[!arr.length!]=!val:"=!

    rem incrememt %array.length%
    set /a arr.length=!arr.length! + 1
)

rem ##############
rem retrieve array
rem ##############

echo arr[] has a length of %arr.length%.

rem arr.Ubound is the highest index in the array.  For instance, if the array
rem has 4 elements, then !arr[%arr.Ubound%]! refers to %arr[3]%.
set /a arr.Ubound=%arr.length% - 1
for /L %%I in (0, 1, %arr.Ubound%) do (

    rem To retrieve an array element, expand the inner variable immediately
    rem while delaying expansion of the outer variable.
    echo arr[%%I] = !arr[%%I]!
)

goto :EOF

:usage
echo Usage: %~nx0 [arg [arg [arg]]] etc. 
```

这是一些示例输出。

```
C:\Users\me\Desktop>arr
Usage: arr.bat [arg [arg [arg]]] etc.

C:\Users\me\Desktop>arr 1 "2 3" 4
arr[] has a length of 3.
arr[0] = 1
arr[1] = 2 3
arr[2] = 4

C:\Users\me\Desktop>arr the quick brown fox jumps over the lazy dog, and so forth.
arr[] has a length of 12.
arr[0] = the
arr[1] = quick
arr[2] = brown
arr[3] = fox
arr[4] = jumps
arr[5] = over
arr[6] = the
arr[7] = lazy
arr[8] = dog,
arr[9] = and
arr[10] = so
arr[11] = forth. 
```

# javascript - 使用 Rangy.js 粘贴没有 HTML 标签的纯文本

> ID：14999923
> 
> 赞同：0
> 
> 时间：2013-02-21T10:28:35.517
> 
> 标签：javascript, jquery, contenteditable, paste, rangy

我在这里和谷歌搜索和搜索，但我没有找到任何解决方案，通过使用[Rangy.js](http://code.google.com/p/rangy/)或原生 JS 来做到这一点如此简单。

如果我有简单的格式化文本要复制，比如..

```
<div>
    <b>Copy me (All) : Soufflé chupa chups</b><br>
    <p style="color:#f00;">
        Cotton candy caramels
    </p>
</div> 
```

如何将纯文本（没有样式文本）复制并粘贴到`contenteditable`元素？

我不关心旧的 IE。只是当前的 Firefox 或 Chrome 需要工作。

**演示：http:** [//jsfiddle.net/72r6J/](http://jsfiddle.net/72r6J/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:50:33.177

不幸的是，您将需要一个稍微笨拙的解决方案。我在这里描述过：

[https://stackoverflow.com/a/3554615/96100](https://stackoverflow.com/a/3554615/96100)

这是 CKEditor 开发人员对类似问题的有用深入回答：

[粘贴为纯文本 Contenteditable div & textarea (word/excel...)](https://stackoverflow.com/questions/11240602/paste-as-plain-text-contenteditable-div-textarea-word-excel/11290082#11290082)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T11:09:50.987

我不知道你所有的用例，但是这样的事情呢：

```
$(document).keyup(function(){
         $(".editor").text($(".editor").text());
    }); 
```

它只是删除了里面的所有 html 标签，你也可以用其他事件来做，或者删除编辑器 div 中的所有样式属性。

# javascript - 在前面插入 th

> ID：14999927
> 
> 赞同：34
> 
> 时间：2013-02-21T10:28:53.063
> 
> 标签：javascript, html-table

我想在表格的元素`th`内插入一个标签。我正在使用在下创建的行对象的方法，实际上是在插入。有没有不使用任何 JS 库的 JavaScript 解决方案？`tr``thead``insertCell``table.tHead``td`

**更新** 目前我正在使用与[Minko Gechev](https://stackoverflow.com/a/15000019/1823389)和[gaurav](https://stackoverflow.com/a/15000018/1823389)提供的解决方案相同的东西。我想知道是否有像使用这样的干净解决方案`insertCell`？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2015-12-10T00:33:20.337

您也可以按照最初的要求使用 insertCell 方法。您只需更改 outerHTML 以覆盖`<td>`由 insertCell 方法创建的：

```
var table = document.createElement("TABLE")
var row   = table.insertRow(0);
    row.insertCell(0).outerHTML = "<th>First</th>";  // rather than innerHTML 
```

要匹配给出的示例：

**HTML**

```
<table id="table">
  <thead>
    <tr>
      <th>First</th>
    </tr>
  <thead>
</table> 
```

**Javascript**

```
var tr = document.getElementById('table').tHead.children[0];
    tr.insertCell(1).outerHTML = "<th>Second</th>"  // some browsers require the index parm -- 1 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-21T10:33:27.100

你可以用普通的 JavaScript 来做到这一点。试试这个：

**HTML**

```
<table id="table">
  <thead>
    <tr>
      <th>First</th>
    </tr>
  <thead>
</table> 
```

**JavaScript**

```
var tr = document.getElementById('table').tHead.children[0],
    th = document.createElement('th');
th.innerHTML = "Second";
tr.appendChild(th); 
```

这是一个示例[http://codepen.io/anon/pen/Bgwuf](http://codepen.io/anon/pen/Bgwuf)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-21T10:33:24.763

改用`table.tHead.children[0].appendChild(document.createElement("th"))`方法。基本上，您必须`th`在运行时创建一个并将其插入到您的头中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-24T23:21:05.263

您可以通过更改其原型将此功能添加到本机 HTMLTableRowElement：

```
HTMLTableRowElement.prototype.insertCell = (function(oldInsertCell) {
    return function(index) {
        if (this.parentElement.tagName.toUpperCase() == "THEAD") {
            if (index < -1 || index > this.cells.length) {
                // This case is suppose to throw a DOMException, but we can't construct one
                // Just let the real function do it.
            } else {
                let th = document.createElement("TH");
                if (arguments.length == 0 || index == -1 || index == this.cells.length) {
                    return this.appendChild(th);
                } else {
                    return this.insertBefore(th, this.children[index]);
                }
            }
        }
        return oldInsertCell.apply(this, arguments);
    }
})(HTMLTableRowElement.prototype.insertCell); 
```

运行此代码后，任何新的 HTMLTableRowElements（“td”标签）都将检查父标签是否为 thead 标签。如果是这样，它将执行与 insertCell 相同的功能，但使用 th 标记。如果没有，它将只使用原始的 insertCell 功能。

```
document.querySelector("thead > tr").insertCell(); // inserts a th into a tr inside a thead
document.querySelector(":not(thead) > tr").insertCell(); // inserts a td into a tr not inside a thead 
```

*请注意，[一般**不**建议扩展原生对象。](https://stackoverflow.com/q/14034180/1248889)*

# android - Android元素背景颜色问题

> ID：14999929
> 
> 赞同：3
> 
> 时间：2013-02-21T10:28:58.283
> 
> 标签：android, colors

我的 Sony XPERIA U（也称为 ST25i）的配色方案存在一些问题。在我的 android 应用程序中，`layout.xml`我将 bg 颜色设置为 2`Buttons`和`ImageView`：（这是片段`layout.xml`）

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                    android:id="@+id/update_app_group_start"
                    android:orientation="horizontal"
                    android:layout_width="fill_parent"
                    android:layout_gravity="center_vertical|center_horizontal"
                    android:layout_height="wrap_content">
        <Button
                android:layout_width="0dp"
                android:layout_height="48dp"
                android:layout_weight="1"
                android:layout_marginLeft="30dp"
                android:layout_marginRight="10dp"
                android:text="@string/update_button_update"
                android:textColor="@color/my_white"
                android:id="@+id/update_app_button_download"
                android:textSize="20dp"
                android:background="@color/my_light_blue"/>

        <ImageView android:layout_width="2dp"
                   android:layout_height="48dp"
                   android:background="@color/my_light_blue"
                   android:id="@+id/update_app_buttons_delimiter"
                   android:layout_centerHorizontal="true"
                   android:layout_centerVertical="true"/>

        <Button
                android:layout_width="0dp"
                android:layout_height="48dp"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="30dp"
                android:layout_weight="1"
                android:text="@string/update_button_cancel"
                android:textSize="20dp"
                android:textColor="@color/my_white"
                android:id="@+id/update_app_button_cancel"
                android:background="@color/my_light_blue"/>
    </LinearLayout> 
```

和`colors.xml`：

```
<?xml version="1.0" encoding="utf-8"?>

<resources>
    <color name="my_white">#ffffff</color>
    <color name="my_light_blue">#33b5e5</color>
</resources> 
```

但是，在我`activity`的这些元素的背景颜色中设置了不可预测的：有时是黄色、红色或绿色。如果我以这种方式直接在代码中设置它们：

```
 final ImageView delimiter = (ImageView) findViewById(R.id.update_app_buttons_delimiter);
    delimiter.setBackgroundColor(context.getResources().getColor(R.color.my_light_blue)); 
```

它工作正常。

有没有人发布过这个问题？另外，我使用`ActionBarSherlock`and `ViewPagerIndicator`。

感谢您的回复！

# wpf - 在 WPF 的内部 ListBox 中绑定所选项目

> ID：14999931
> 
> 赞同：1
> 
> 时间：2013-02-21T10:29:14.420
> 
> 标签：wpf, listbox

我无法在我的应用程序中绑定 ListBox 的选定项（IDE：Visual Studio 2010，语言：C#，技术：WPF 和 MVVM）。

要求：有一个接口列表和另一个连接到每个接口的设备列表。显示这两个列表的模式如下：

接口1

```
Device 1

Device 2

Device 3 
```

接口 2

```
Device 1

Device 2 
```

接口 3

```
Device 1

Device 2

Device 3

Device 4 
```

等等。

如果选择了任何接口，则默认情况下必须选择第一个设备，如果选择了任何设备，则必须选择相应的接口。我可以做第一部分，但不能做第二部分。如何使所选项目在所有内部设备列表中都是唯一的？

我想将上述列表显示为扩展器列表，其中每个扩展器将具有以下格式：扩展器标头：接口名称扩展器主体：连接设备列表

我希望我很清楚。

请告诉我是否有任何 wpf 控件，或者我应该为此开发一个新的 ListBox？

问候克鲁西卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:27:59.080

根据这个要求：

> 如何使所选项目在所有内部设备列表中都是唯一的？

您应该只在一个大列表框中定义组：

```
public class Interface
{
    public string Name { get; set; }
    public List<Device> Devices { get; set; }
}

public class Device
{
    public string Name { get; set; }
}

<CollectionViewSource x:Key="interfaces" Source="{Binding SomePropertyGivingInterfaces}" >
    <CollectionViewSource.GroupDescriptions>
        <PropertyGroupDescription PropertyName="Name" />
    </CollectionViewSource.GroupDescriptions>
</CollectionViewSource>

<DataTemplate x:Key="interfaceTemplate" DataType="Interface">
    <StackPanel Orientation="Horizontal">
        <TextBlock Text="{Binding Name}" />
    </StackPanel>
</DataTemplate>

<ListBox ItemsSource="{Binding Source={StaticResource interfaces}}">
    <ListBox.GroupStyle>
        <GroupStyle HeaderTemplate="{StaticResource interfaceTemplate}" />
    </ListBox.GroupStyle>
    <ListBox.ItemTemplate>
        <DataTemplate DataType="Device">
            <ListBox ItemsSource="{Binding Devices}">
                <ListBox.ItemTemplate>
                    <DataTemplate DataType="Device">
                        <TextBlock Text="{Binding Name}" />
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

然后当您只能选择一个设备时。

# android - 将 WebView 显示为 AlertDialog 内容

> ID：14999932
> 
> 赞同：2
> 
> 时间：2013-02-21T10:29:19.883
> 
> 标签：android, webview, android-alertdialog

我正在尝试创建一个`AlertDialog`内容丰富的内容。当我使用`Html.fromHtml()`设置消息文本时，例如：

```
AlertDialog.Builder adb = new AlertDialog.Builder(this);
adb.setTitle("title");
adb.setMessage(Html.fromHtml(text)); 
```

它只允许我使用基本的 HTML 元素，例如`&lt;b&gt;`（粗体）和`&lt;i&gt;`（斜体）。

当我使用`WebView`like

```
WebView webView = new WebView(this);
myWebView.loadData(webContent, "text/html", "utf-8");
AlertDialog.Builder adb = new AlertDialog.Builder(this);
adb.setView(webView); 
```

我失去了默认的 Android 风格。

我该怎么做才能获得丰富的上下文，例如`&lt;ul&gt;`在`AlertDialog`? 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:33:42.193

试试这个，使用自定义适配器

```
final Dialog custon_dialog = new Dialog(Login.this);
custon_dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
custon_dialog.setContentView(R.layout.webview);
custon_dialog.setCancelable(true);
// custon_dialog.setTitle(null);

WebView mwebview = (WebView) custon_dialog.findViewById(R.id.webview);
    mwebview.setBackgroundColor(0x00000000);
    mwebview.loadData(webContent, "text/html", "utf-8");
custon_dialog.show();
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:42:05.623

您可以在活动中添加 webview，并将活动主题设置为清单文件中的对话框：

```
<activity .....
          android:theme="@android:style/Theme.Dialog"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:47:51.277

> Html.fromHtml(text) 使用tagsoup

确实支持简单的标签供您参考[html.fromhtml](http://developer.android.com/reference/android/text/Html.html#fromHtml%28java.lang.String,%20android.text.Html.ImageGetter,%20android.text.Html.TagHandler%29)

尽管使用

```
String text="some html code"; 
```

**使用您的 css 等创建一个 html 文件，并将所有文件放在应用程序的 assets 文件夹中。**

现在，代替这个

```
adb.setMessage(Html.fromHtml(text)); 
```

> 就像您希望在**alerdialog**中显示的**丰富内容**一样。

 ****这应该对您有所帮助，请记住：您还可以使用自己的自定义布局来扩展对话框**

```
AlertDialog.Builder alert = new AlertDialog.Builder(yourclass.this);

   alert.setTitle("title");
   WebView wv = new WebView(yourclass.this);

   wv.loadUrl("file:///assets/yourHtmlFileName.html");

                        wv.setWebViewClient(new WebViewClient()
                        {
                            public boolean shouldOverrideUrlLoading(WebView view, String url)
                            {
                                view.loadUrl(url);

                                return true;
                            }
                        });

                        alert.setView(wv);

                        alert.show();

                    }
                }); 
```**

# c# - 调试完成但未完成调试

> ID：14999935
> 
> 赞同：0
> 
> 时间：2013-02-21T10:29:28.660
> 
> 标签：c#, asp.net, debugging, visual-studio-2008, asp.net-development-serv

我像往常一样调试我的代码，并设置了一组断点，但我注意到调试在没有完成循环的情况下完成！

这是以虚拟方式发生的。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:36:50.297

当我遇到断点问题时，我会删除`.suo`与项目位于同一目录中的与项目同名的隐藏文件，并在其他信息中保留调试断点。

始终先进行备份。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T10:44:01.383

试试这个怎么样

1.) 运行-> 输入 inetmgr

2.) 从应用程序池中，选择您正在处理的应用程序池的名称。

3.) 右键单击​​并选择高级设置

4.) 在流程模型下，增加“Ping 最大响应时间”的值，例如 9000

5.）也尝试增加“Ping Period”的值

希望这可以帮助。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:33:50.393

是否跳过断点？如果是这样，我在 Visual Studio 2008 上遇到了这个问题，必须应用这个补丁：

[http://archive.msdn.microsoft.com/KB957912/Release/ProjectReleases.aspx?ReleaseId=1796](http://archive.msdn.microsoft.com/KB957912/Release/ProjectReleases.aspx?ReleaseId=1796)

# android - 获取noactivityfound来处理意图错误android

> ID：14999936
> 
> 赞同：0
> 
> 时间：2013-02-21T10:29:27.700
> 
> 标签：android, android-intent, start-activity

我正在制作一个应用程序，用户可以在其中添加任何网址作为书签。在我的主要活动中，一旦用户单击一个按钮，我就会开始另一个活动。

```
protected void BookMark(){

            if(check){
            Intent intent=new Intent(this, getURL.class);
//          EditText editText= (EditText) findViewById(R.id.edit_message);
//              String message= "Fill";
//              intent.putExtra("Value", message);
                startActivity(intent);

            }else  {

                Uri url2=Uri.parse(url1);
                //Toast.makeText(this, "Trying", Toast.LENGTH_LONG).show();
                try{
                    Intent intent = null;
                    intent = new Intent(Intent.ACTION_VIEW,url2);
                    startActivity(intent);
                } 
                catch (Exception e)
                {
                    Log.e("Add Error", e.toString());
                    e.printStackTrace();
                } 
```

然后在下一个活动中，我正在捕获 url 并将其保存在主要活动的静态变量中。但是，当再次单击该按钮时，它应该打开一个浏览器并传递了 url。但相反，我收到一个错误，activtitynotfound 来处理意图。

```
public class getURL extends Activity{

    EditText text1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_book);
        text1=(EditText) findViewById(R.id.text1);

    }

    public void addBookMark(View v){

        String text = text1.getText().toString();
        text1.setText(" ");
        text = String.format("\"http://"+text+"\"");
        MainActivity.url1=text; 
        MainActivity.check=false;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:53:07.210

终于得到了答案。我犯了一个愚蠢的错误。我做了以下更改并且它起作用了。text = String.format("\"http://"+text+"\""); 改为 text = String.format("http://"+text);

# bing-maps - 嵌入必应地图 - 图钉

> ID：14999939
> 
> 赞同：1
> 
> 时间：2013-02-21T10:29:30.910
> 
> 标签：bing-maps, bing

我正在尝试将 bing 地图嵌入网页并且它可以工作，但我想在网页上的嵌入地图中显示图钉。正如我所见，这是不可能的。有谁知道如何做到这一点？

```
<div id="mapviewer"><iframe id="map" scrolling="no" width="500" height="400" frameborder="0" src="http://www.bing.com/maps/embed/?v=2&amp;cp=45.810280~15.957222&amp;lvl=4&amp;dir=0&amp;sty=r&amp;cid=AF2FECA12C1AA81D!196&amp;form=LMLTEW&amp;emid=8841ff8b-025d-e5a7-e37f-39b4d31b3b93"></iframe><div id="LME_maplinks" style="line-height:20px;"><a id="LME_largerMap" href="http://www.bing.com/maps/?v=2&amp;cp=45.810280~15.957222&amp;lvl=4&amp;dir=0&amp;sty=r&amp;cid=AF2FECA12C1AA81D!196&amp;form=LMLTEW" target="_blank" style="margin:0 7px">View Larger Map</a><a id="LME_directions" href="http://www.bing.com/maps/?v=2&amp;cp=45.810280~15.957222&amp;lvl=4&amp;dir=0&amp;sty=r&amp;cid=AF2FECA12C1AA81D!196&amp;form=LMLTEW&amp;rtp=%7Epos.45.810279846_15.957221984000004_" target="_blank" style="margin:0 7px">Driving Directions</a></div></div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T12:55:31.143

您可以在带有“pushpins”参数的嵌入式地图中使用图钉，请参阅 MSDN：

[http://msdn.microsoft.com/en-us/library/ee692180.aspx](http://msdn.microsoft.com/en-us/library/ee692180.aspx)

这是一个例子：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
   <head>
      <title>Embedded Map</title>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   </head>
   <body style="font-family:Arial">
      <p>A simple embedded map.</p>
      <iframe width="400" height="300" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"
         src="http://dev.virtualearth.net/embeddedMap/v1/ajax/aerial?zoomLevel=10&center=47.5_-122.5&pushpins=47.5_-122.5"/>
   </body>
</html> 
```

以下是可用选项的示例：

***mapMode***
地图的样式。有效值为：Road、Aerial、AerialWithLabels、Birdseye、BirdseyeWithLabels

***zoomLevel*** 一个 int 值，指示地图样式的有效缩放级别。

***center***
由下划线分隔的两个双精度值，它们是地图中心坐标的纬度和经度值。

***标题***
以度为单位指定地图方向的双精度值。

***图钉***
两个由下划线分隔的双精度值，它们是图钉坐标的纬度和经度值。多个图钉位置由 ~ 分隔。

***文化***
一个有效的文化字符串。默认值为“en-us”。

# c++ - if语句中float的转换

> ID：14999940
> 
> 赞同：1
> 
> 时间：2013-02-21T10:29:39.280
> 
> 标签：c++, c

在以下代码中：

```
float x = 0.23;
int z;

z = x;

if (x)
    printf("float %f will not be converted to 0!\n", x);

if (z)
    printf("this will not print!\n"); 
```

我认为浮点数将转换为整数，然后在`if`语句中使用时检查它是否为零。有人可以向我解释一下，为什么不是这样？

编辑：

（只是为了澄清让我感到困惑的事情）由于像`<`return这样的逻辑运算符`int`，我认为该`if`语句接收整数值，因此需要进行转换。正如答案所指出的那样，事实并非如此。谢谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T10:58:38.943

> 我认为浮点数将转换为整数，然后在 if 语句中使用时检查它是否为零。

不，它只会与零进行比较。C++11 4.12 中给出了将算术类型转换为布尔值的规则：

> 零值 [...] 转换为`false`; 任何其他值都转换为`true`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T11:13:22.330

1.  与其他类型操作时会发生类型转换，整数在它们之间操作时会转换为float，例如：x + z // z 会先转换为“float”，然后再与“x”相加
2.  如果在“if()”中用作逻辑条件，则只判断“null/zero or not”。0.23 不是零/空，因此结果为 TRUE。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T10:31:58.997

编译器只会检查参数`if`是否为`zero`. 如果不是，则条件为`true`。根本没有进行任何转换。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T10:32:48.100

您的第一个测试是 testing `x`，`float`所以没有“转换”发生在那里。

基本上，`if`将检查表达式是 0 还是非零，并且显然 0.23 是非零的，因此代码应该执行。

你可以想到

```
if(x) 
```

一样

```
if(x != 0) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T10:33:04.687

如果在布尔上下文中使用浮点数，将直接检查它是否为零，而无需先将其转换为 int。如此`0.23f`，`true`虽然`(int)0.23f`如此`false`。

# iphone - 自动选择第一个 UITableView 文本框

> ID：14999943
> 
> 赞同：4
> 
> 时间：2013-02-21T10:29:52.050
> 
> 标签：iphone, ios, objective-c, uitableview

我有一个接受登录凭据的表格视图。我想让我的应用在加载或出现时自动选择第一个 tableview 文本框。我希望将光标放在“电子邮件地址”字段中并自动抬起键盘。我似乎无法弄清楚这一点。有人有想法么？谢谢！

![在此处输入图像描述](../Images/9b8af2abab3317187ff91262d063edcf.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T10:33:02.583

您必须将第一响应者分配给`UITextView`...

例如：

```
[textField becomeFirstResponder] 
```

您可以在 UIViewController 的 viewDidAppear 中执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T10:33:22.927

```
- (void)viewDidAppear:(BOOL)animated {
[super viewDidAppear:animated];

NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];

myTextField = (UITextField *)[cell viewWithTag:kMyTextFieldTag];
[myTextField becomeFirstResponder];
} 
```

# openscenegraph - 选取对象时获取索引节点或名称节点

> ID：14999946
> 
> 赞同：0
> 
> 时间：2013-02-21T10:29:58.710
> 
> 标签：openscenegraph

我在 Android 上使用 OSG...

我在 main 中初始化了 indexNode= 0

```
int main(int, char **)
{

    osg::ref_ptr<osg::Node> model1 = osgDB::readNodeFile( "cessna.osg");
    osg::ref_ptr<osg::Node> model2 = osgDB::readNodeFile( "cow.osg" );

    unsigned int indexNode= 0;

    osg::ref_ptr<osg::Group> root = new osg::Group;
    root->addChild( model1.get() );
    root->addChild( model2.get() );

    osg::ref_ptr<PickHandler> picker = new PickHandler;
    root->addChild( picker->getOrCreateSelectionBox() );

    osgViewer::Viewer viewer;
    viewer.setSceneData( root.get() );
    viewer.addEventHandler( picker.get() );
    return viewer.run();

} 
```

这是带有打印语句的部分

```
 class PickHandler : public osgGA::GUIEventHandler
{
  public:
         osg::Node* getOrCreateSelectionBox();
  virtual bool handle( const osgGA::GUIEventAdapter& ea,osgGA::GUIActionAdapter& aa );

  protected: osg::ref_ptr<osg::MatrixTransform> _selectionBox;
};

osg::Node* PickHandler::getOrCreateSelectionBox()
{
  if ( !_selectionBox )
     {
       osg::ref_ptr<osg::Geode> geode = new osg::Geode;
       geode->addDrawable(new osg::ShapeDrawable(new osg::Box(osg::Vec3(),1.0f)) );
       _selectionBox = new osg::MatrixTransform;
       _selectionBox->setNodeMask( 0x1 );
       _selectionBox->addChild( geode.get() );
       osg::StateSet* ss = _selectionBox->getOrCreateStateSet();
       ss->setMode( GL_LIGHTING, osg::StateAttribute::OFF );
       ss->setAttributeAndModes(new osg::PolygonMode(osg::PolygonMode::FRONT_AND_BACK,osg::PolygonMode::LINE));
     }
  return _selectionBox.get();
}

bool PickHandler::handle( const osgGA::GUIEventAdapter& ea,osgGA::GUIActionAdapter& aa )
{
  if ( ea.getEventType()!=osgGA::GUIEventAdapter::RELEASE || ea.getButton()!=osgGA::GUIEventAdapter::LEFT_MOUSE_BUTTON )
      return false;

osgViewer::Viewer* viewer = dynamic_cast<osgViewer::Viewer*>(&aa);

if ( viewer )
   {
     osg::ref_ptr<osgUtil::LineSegmentIntersector> intersector = new osgUtil::LineSegmentIntersector( osgUtil::Intersector::WINDOW, ea.getX(), ea.getY());
     osgUtil::IntersectionVisitor iv( intersector.get() );
     iv.setTraversalMask( ~0x1 );
     viewer->getCamera()->accept( iv );
     if ( intersector->containsIntersections() )
        {
          osgUtil::LineSegmentIntersector::Intersection result=*(intersector->getIntersections().begin());
          osg::BoundingBox bb = result.drawable->getBound();

          osg::ref_ptr newnode = result.drawable->getParent(0);
          indexNode= mTransform->getChildIndex(newnode);

          __android_log_print(ANDROID_LOG_INFO,"index","%d\n",indexNode);

          osg::Vec3 worldCenter = bb.center() * osg::computeLocalToWorld(result.nodePath);
          _selectionBox->setMatrix(osg::Matrix::scale(bb.xMax()-bb.xMin(), bb.yMax()-bb.yMin(), bb.zMax()-bb.zMin()) *osg::Matrix::translate(worldCenter) );
        }
   }
   return false;
} 
```

这些行：

```
osg::ref_ptr newnode = result.drawable->getParent(0);
indexNode= mTransform->getChildIndex(newnode);       
__android_log_print(ANDROID_LOG_INFO,"index","%d\n",indexNode); 
```

当我选择任何节点（牛或飞机）时，我想获取节点名称或索引节点，我需要返回任何可以帮助我知道我选择了哪个对象的东西？

我不知道我所做的是否正确，但是当我单击任何对象时，它会给我数字 3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T17:41:47.067

这是添加节点名称和标识符的方式：

```
int main()
{
    ....
    osg::ref_ptr<osg::Group> root = new osg::Group;
    root->setName("Node Name");
    root->setUserValue("id", idNumber);
    ...
} 
```

拾取对象时，您可以通过以下方式检索其名称和标识符：

```
osg::Node *node;
node->getUserValue("id", returnedString);
std::string name = node->getName(); 
```

希望这可以消除您的疑问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T01:30:17.627

乍一看，不清楚它在哪里“给”你数字 3。我没有看到任何打印的内容，也没有看到任何可能包含 3 的 int。我看到了很多边界和矩阵。

您需要更好地解释这种情况，也许使用更简单的演示代码。

# math - 在任何二进制矩阵中，是否有任何有效的方法来确认一行中的一个 0 而其余项目在 matlab 中为 1？

> ID：14999948
> 
> 赞同：-3
> 
> 时间：2013-02-21T10:30:04.630
> 
> 标签：math, matrix, binary, matlab

例如

```
A=[0 0 0;
   1 1 1;
   1 0 0; 
   1 1 0; 
   0 0 1]; 
```

应用功能后

```
A=[1 1 0;
   1 1 0;
   1 1 0; 
   1 0 1]; 
```

一排一零，其余为一。如果全部为一，则随机放置一零。如果找到多个零，则随机取一并将所有零转换为一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:16:39.987

如果您要问的是一种检测每一行包含单个零的方法，并且其余行元素都等于 1，那么您可以尝试这个。如果要测试的矩阵是`m`x`n`矩阵`A`，那么

```
 sum(A == 1,2) 
```

应该产生一个`(m x 1)`所有元素都等于 的矩阵`n-1`。类似地，如果 的每一行`A`只有一个零，那么

```
sum(A == 0,2) 
```

应该返回一个`(m x 1)`元素都等于 1 的矩阵。然后你需要的矩阵类型应该满足

```
sum(sum(A == 1,2) == (n-1)) = m 
```

和

```
sum(sum(A == 0,2) == (n-1)) = m 
```

我不确定这是否是您实际要问的，因为您的问题很不清楚，但这确实可以满足问题**标题**本身的要求（当然取决于您对效率的定义）。

# c - 如何使用多个 pthread 来评估程序中的表达式

> ID：14999951
> 
> 赞同：0
> 
> 时间：2013-02-21T10:30:20.003
> 
> 标签：c, linux, pthreads

我想使用 pthread 通过将表达式分解为线程来解决它。

我的问题是：- 如果要使用 pthreads 评估像 (a+b)+(c+d)+(e+f) 这样的表达式：-

1.  创建 3 个线程，其中第一个表达式 (a+b) 由第一个线程求值，(c+d) 由第二个线程求值，(e+f) 由第三个线程求值。
2.  上述所有变量的值都是'1'，因此，表达式评估的最终答案应该是'6'。
3.  最后应该执行第三个线程，它将最终输出打印为“6”。

那怎么办呢？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:35:17.563

解析表达式时，您将获得如下所示的抽象语法树：

```
 +
                 / \
                +   +
               / \ / \
              +  + e  f
             / \ |\
             a b c d 
```

您可以在语法树的节点处将问题划分为线程。在评估一个节点时，您可以将两个不同的子问题（左子树和右子树）分配给两个不同的线程。每个子线程都可以重复该模式，直到您充分并行化了树。在代码中，这可能如下所示：

```
int evaluate_subtree_threaded(node_t* parent_node)
{
   int left_result, right_result;
   pthread_t thread;

   pthread_create(&thread, NULL, evaluate_subtree_threaded, parent_node->left);
   right_result = evaluate_subtree(parent_node->right);
   pthread_join(thread, &left_result);
   return left_result + right_result;
} 
```

请注意此代码片段如何公然假设实际的评估逻辑在`evaluate_subtree`其中并忽略所有类型。

当然，请注意创建线程比评估表达式要昂贵得多。

# ruby-on-rails - 从时间戳查询结果中访问日期

> ID：14999953
> 
> 赞同：0
> 
> 时间：2013-02-21T10:30:25.327
> 
> 标签：ruby-on-rails, ruby, timestamp

我正在编写一个脚本，并对数据库进行查询以获取表中最后输入的时间戳。所以我得到的结果是这样的：

```
#<UtilityReading timestamp: "2013-02-18 23:30:00"> 
```

我只是想知道如何从结果中访问日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:40:44.730

例如，如果您的 UtilityReading 在名为 的变量`@utility`中，那么您只需调用`@utility.timestamp.to_date`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:42:05.657

你可以试试

```
@utility.timestamp.to_date 
```

# c++ - C++ 计算器不适用于 * 运算符

> ID：14999955
> 
> 赞同：0
> 
> 时间：2013-02-21T10:30:26.180
> 
> 标签：c++, debugging

我正在使用 Stroustrup 的编程原理和实践学习 c++，并且有一个示例代码可以调试并使其工作。我已经进行了更正，当您输入使用 + 或 - 运算符的算术表达式时，它可以工作。但是，当我使用 * 运算符输入表达式时，什么也没有发生。我使用调试器来帮助我浏览代码，但我无法弄清楚。本书使用非标准包含文件[std_lib_facilities.h](http://ideone.com/9zq9KF)

实际的计算器程序在[这里](http://ideone.com/QBeb2g)。有人可以帮我弄清楚为什么像 2*3 这样的表达式吗？2+3 时不产生结果；作品？

PS：根据程序`;`，最后必须有一个有效的表达式才能触发打印。所以 2+3; 是正确的并且会触发和打印，但是没有 a 的 2+3`;`只会导致光标一直闪烁。也请不要这样，它是第一次尝试制作计算器程序，所以它缺少很多功能。我现在关心的是弄清楚为什么涉及`*`运算符的简单算术表达式不起作用。谢谢。

**[编辑]**

感谢@KonradRudolph 的回答。让我难过的一件事是，当我使用 gdb 调试器（我在 linux 上）时，当我输入带有 *. 现在我知道有一个错误，但我希望它至少能进入函数并挂在那里的某个地方。为什么调试器不会进入有错误的函数？那会更有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T10:38:38.177

好吧，您根本没有进行所有必要的更正。

在`term`：

```
 switch (t.kind) {
    case '*':
        left *= primary();
        t = ts.get();
    case '/':
        {    
            double d = primary();
            if (d == 0) error("divide by zero");
            left /= d; 
            t = ts.get();
            break;
        }
    default: 
        ts.putback(t);     // put t back into the token stream
        return left;
    } 
```

`case '*'`缺少`break`声明。

可能会有更多错误。

# java - 在 facebook android sdk 中处理传入通知中的请求 ID 为空

> ID：14999956
> 
> 赞同：3
> 
> 时间：2013-02-21T10:30:26.437
> 
> 标签：java, android, facebook, facebook-android-sdk, facebook-app-requests

我正在尝试处理 facebook 中的传入通知。

参考：http: [//developers.facebook.com/docs/howtos/androidsdk/3.0/app-link-requests/](http://developers.facebook.com/docs/howtos/androidsdk/3.0/app-link-requests/)

代码 ：

```
public class MainFragment extends Fragment{

private static final String TAG = "MainFragment";
private UiLifecycleHelper uiHelper;
private String requestId;
private TextView username;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Log.d(TAG, "MainFragment.onCreate()");
    uiHelper = new UiLifecycleHelper(getActivity(), callback);
    uiHelper.onCreate(savedInstanceState);

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {

    Log.d(TAG, "MainFragment.onCreateView()");
    View view = inflater.inflate(R.layout.login,container, false);

    LoginButton authButton = (LoginButton) view.findViewById(R.id.loginButton);
    authButton.setReadPermissions(Arrays.asList("user_likes", "user_status"));
    authButton.setFragment(this);

    username = (TextView) view.findViewById(R.id.textusename);

    return view;
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    Log.d(TAG, "MainFragment.onActivityCreated()");

    // Check for an incoming notification. Save the info
    // Parse any incoming notifications and save

    Uri intentUri = getActivity().getIntent().getData();
    if (intentUri != null) {
        String requestIdParam = intentUri.getQueryParameter("request_ids");
        if (requestIdParam != null) {
            String array[] = requestIdParam.split(",");
            requestId = array[0];
        }
    }

}

private void onSessionStateChange(Session session, SessionState state, Exception exception) {

    // Check if the user is authenticated and
    // an incoming notification needs handling 
    Log.d(TAG,"MainFragment.onSessionStateChange()");

    Log.d(TAG, "Request id : "+requestId);

    if (state.isOpened() && requestId != null) {
        Log.d("request id", requestId);

        getRequestData(requestId);

        Toast.makeText(getActivity().getApplicationContext(), "Incoming request", Toast.LENGTH_SHORT).show();
        requestId = null;
    }

    if (state.isOpened())
    {
        Settings.addLoggingBehavior(LoggingBehavior.REQUESTS);

        Request.executeMeRequestAsync(Session.getActiveSession(), new GraphUserCallback() {

            @Override
            public void onCompleted(GraphUser user, Response response) {
                if (user != null) {
                    username.setText(user.getName());
                }                   
            }
        });

    }

}

private Session.StatusCallback callback = new Session.StatusCallback() {

    @Override
    public void call(Session session, SessionState state, Exception exception) {

        onSessionStateChange(session, state, exception);
    }
};

private void getRequestData(String requestid)
{
    Request request = new Request(Session.getActiveSession(), requestid, null, HttpMethod.GET, new Request.Callback() {

        @Override
        public void onCompleted(Response response) {

            // Process the returned response
            GraphObject graphObject = response.getGraphObject();
            FacebookRequestError error = response.getError();

            Log.d(TAG, response.toString());

            // Default message
            String message = "Incoming request";

            if( graphObject != null )
            {
                // Check if there is extra data
                if ( graphObject.getProperty("data") != null )
                {
                    try {

                        // Get the data, parse info to get the key/value info

                        JSONObject dataObject = new JSONObject(graphObject.getProperty("data").toString());

                        // Get the value for the key - badge_of_awesomeness
                        String badge = dataObject.getString("badge_of_awesomeness");

                        // Get the value for the key - social_karma
                        String karma = dataObject.getString("social_karma");

                        // Get the sender's name
                        JSONObject fromObject =(JSONObject) graphObject.getProperty("from");

                        String sender = fromObject.getString("name");
                        String title = sender+" sent you a gift";

                        // Create the text for the alert based on the sender
                        // and the data
                        message = title + "\n\n" + "Badge: " + badge + " Karma: " + karma;
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }
                Toast.makeText(getActivity().getApplicationContext(),message,Toast.LENGTH_LONG).show();
            }

        }
    });

    Log.d(TAG, "Request : "+request.toString());

    // Execute the request asynchronously.
    Request.executeBatchAsync(request);

}
} 
```

日志猫

```
03-02 17:40:20.443: D/MainFragment(947): MainFragment.onCreate()
03-02 17:40:20.463: D/MainFragment(947): MainFragment.onCreateView()
03-02 17:40:20.753: D/MainFragment(947): MainFragment.onActivityCreated()
03-02 17:40:28.623: D/MainFragment(947): MainFragment.onSessionStateChange()
03-02 17:40:28.623: D/MainFragment(947): Request id : null
03-02 17:40:30.673: D/MainFragment(947): MainFragment.onSessionStateChange()
03-02 17:40:30.673: D/MainFragment(947): Request id : null
03-02 17:40:30.823: D/MainFragment(947): MainFragment.onSessionStateChange()
03-02 17:40:30.833: D/MainFragment(947): Request id : null 
```

现在我的问题是，当我使用 Facebook android 应用程序单击通知时，我的应用程序已启动，但我无法获取该通知的请求 ID。

应用仪表板配置 ![在此处输入图像描述](../Images/a46353b8012f427a0c27a7e423df6fbc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T08:11:55.390

这是我花了一整天时间解决的问题。感谢博班

> 这是 Facebook 错误。只需在 App Dashboard 中添加 Mobile Web，您将获得 request_ids

[Android 应用：处理在 Facebook 上发布的应用请求](https://stackoverflow.com/questions/14550361/android-app-handling-app-request-posted-on-facebook/15636105#15636105)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T11:28:31.387

我想你没有忘记这个`requestId`属性：

```
private String requestId; 
```

您还可以检查`intentUri`,`requestIdParam`和方法`array[0]`中的值`onActivityCreated`吗？

```
@Override
public void onActivityCreated(Bundle savedInstanceState) { // <--- in THIS method
    super.onActivityCreated(savedInstanceState);
    Log.d(TAG, "MainFragment.onActivityCreated()");

    // Check for an incoming notification. Save the info
    Uri intentUri = getActivity().getIntent().getData();
    Log.d(TAG, "intentUri: " + intentUri.toString()); // <--- HERE
    if (intentUri != null) {
        String requestIdParam = intentUri.getQueryParameter("request_ids");
        Log.d(TAG, "requestIdParam: " + requestIdParam); // <--- HERE
        if (requestIdParam != null) {
            String array[] = requestIdParam.split(",");
            Log.d(TAG, "requestId: " + array[0]); // <--- HERE
            requestId = array[0];
        }
    }
} 
```

请更新您的帖子，向我们展示整个班级。

**编辑：**

> 当用户点击 Android 版 Facebook 中的通知时，**您在 App Dashboard 设置中配置的类**将被调用，请求信息将传递到 Intent 数据中。数据将包含以下信息：

```
target_url=[URL]/?request_ids=[COMMA_SEPARATED_REQUESTIDs]
    &ref=notif&fb_source=notification
    &app_request_type=user_to_user 
```

但是，您没有得到`request_ids`参数。在我看来，以下配置有问题： ![应用仪表板设置](../Images/6bf0c57081b71191facecc7d3370aadd.png)

你在这些领域放了**什么？**它与您的实际应用树状结构相符吗？

**编辑2：**

> **类名：**这是您希望 Facebook 启动的主要活动的类名。

你的里面有什么`Login.java`？

应该是`com.pricus.expensemanagement.MainActivity`。

确保您已正确遵循[有关 login 的第一个教程](https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/)，尤其是这一步：

> 首先，使活动子类 FragmentActivity 而不是 Activity：

```
public class MainActivity extends FragmentActivity { 
```

# webbrowser-control - WebBrowser 控件打开一个新窗口

> ID：14999959
> 
> 赞同：2
> 
> 时间：2013-02-21T10:30:29.973
> 
> 标签：webbrowser-control, facebook-oauth

我正在使用 Facebook 授权的 WPF 客户端。我正在使用 WebBrowser 控件并显示 facebook 的登录页面，然后进行一些重定向，最后它显示了我的页面，其中包含 url 中的访问令牌。

然后我抓住这个令牌并保存它，我在我的表单上调用 Close()。窗口关闭，但几乎是在 IE 弹出一个显示成功页面的单独窗口之后。

我怎样才能阻止这个新窗口弹出？

这是我的代码（其中一些）

```
private void WebBrowserNavigated(object sender, WebBrowserNavigatedEventArgs e)
{

   string url = e.Url.ToString();

   var result = Regex.Match(url, @"access_token=(?<token>[\d|\w]+)&");
   if (result.Success)
   {
      string token = result.Groups["token"].Value;
      Reader.SetAccessToken(token, SocialNetworkInformation.SocialNetwork.Facebook, url: e.Url);

       this.Close();
   }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:54:19.327

我解决了我的问题。不是最好的方法，但它有效。

我没有在收到响应后立即关闭表单，而是调用了一个关闭此表单的委托方法。在 0,3 秒上设置一个计时器。窗口存在足够长的时间来接收答案，但几乎没有足够长的时间让用户看到响应。

# java - 如何使用 Java Media Framework (JMF) 发送 rtcp bye 消息？

> ID：14999961
> 
> 赞同：1
> 
> 时间：2013-02-21T10:30:36.767
> 
> 标签：java, rtp, jmf, rtcp

我正在使用 java 应用程序使用 JAIN SIP java API 与 nuance 语音服务器建立 SIP 会话。然后我通过发送一些 MRCP 命令（如 GET_PARAMS、SET-PARAMS、Define Grammar 和使用 mrcp4j API 识别）来准备系统以进行识别。

然后我使用 JMF api 与语音服务器建立 rtp 和 rtcp 会话，以发送音频进行识别。服务器已收到音频，但在收到 RTCP 再见之前无法识别。

**但问题是我无法使用 rtcp bye 结束 rtp 会话，因为我无法在 JMF 文档中找到一种方法**。

如果有人可以指导我，那将非常有帮助。我附上了 RTP 会话的代码。

JMF api 文档的链接在[这里](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/media/jmf/2.1.1/apidocs/)

```
// send Audio data
// create the RTP Manager
RTPManager rtpManager = RTPManager.newInstance();

// create the local endpoint for the local interface on any local port
int port = Integer.parseInt(rtpPORT);;
SessionAddress localAddress = new SessionAddress();      
InetAddress IP = InetAddress.getByName("hydhtc284704d");
localAddress.setControlHostAddress(IP);
localAddress.setControlPort(24501);
localAddress.setDataHostAddress(IP);
localAddress.setDataPort(24500);

// initialize the RTPManager
rtpManager.initialize(localAddress);
//rtpManager.initialize(rtpConnector);

// specify the remote endpoint of this unicast session 
InetAddress ipAddress = InetAddress.getByName("hydhtc227033d");
SessionAddress remoteAddress = new SessionAddress(ipAddress, port, ipAddress, port + 1);

//System.out.println(remoteAddress);
// open the connection
rtpManager.addTarget(remoteAddress);

rtpManager.addSendStreamListener(new SendStreamListener() {
@Override
public void update(SendStreamEvent arg0) {
//System.out.println("Send Stream Event: " + arg0.getSource());
System.out.println("Number of bytes transmitted: " + arg0.getSendStream().getSourceTransmissionStats().getBytesTransmitted());
System.out.println("Sender Report: " + arg0.getSendStream().getSenderReport());
}
});

rtpManager.addReceiveStreamListener(new ReceiveStreamListener() {
@Override
public void update(ReceiveStreamEvent arg0) {
// TODO Auto-generated method stub
}
});

File audioFile = new File("C:\\Users\\Bhanu_Verma\\Desktop\\eclipse\\one.wav");
Processor processor= Manager.createProcessor(audioFile.toURI().toURL());
processor.configure();
// Block until the Processor has been configured

while (processor.getState() != processor.Configured) {
}

processor.setContentDescriptor(new ContentDescriptor(ContentDescriptor.RAW_RTP));

TrackControl track[] = processor.getTrackControls();
//ContentDescriptor cd = new ContentDescriptor(ContentDescriptor.RAW_RTP);
//processor.setContentDescriptor(cd);
boolean encodingOk = false;
// Go through the tracks and try to program one of them to
// output ulaw data.

    for (int i = 0; i < track.length; i++) {
        if (!encodingOk && track[i] instanceof FormatControl) {
            if (((FormatControl)track[i]).setFormat(new AudioFormat(AudioFormat.ULAW_RTP,8000,8,1)) == null)
            {
                track[i].setEnabled(false);
            }
            else 
            {
                encodingOk = true;
            }
        }
        else 
        {
            // we could not set this track to ulaw, so disable it
            track[i].setEnabled(false);
        }
    }

    // At this point, we have determined where we can send out ulaw data or not.
    // realize the processor

    if (encodingOk) {
        processor.realize();
        // block until realized.

        while (processor.getState() != processor.Realized) {
        }

        // get the output datasource of the processor and exit if we fail
        DataSource dataOutput = processor.getDataOutput();

        // create a send stream for the output data source of a processor and start it

        SendStream sendStream = rtpManager.createSendStream(dataOutput,0);
        sendStream.start();

        System.out.println("Starting processor" + "\n");
        processor.start();

        while(processor.getState()== processor.Started)
        {
            System.out.println("Sending Audio..");
        }

        System.out.println("Processor was started and audio was sent to server");

        Wait(2000);  // waiting so that audio could be given to the server

        // close the connection if no longer needed.
        rtpManager.removeTarget(remoteAddress, "Client disconnected.");

        // call dispose at the end of the life-cycle of this RTPManager so
        // it is prepared to be garbage-collected.
        rtpManager.dispose(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:53:09.797

好吧，没有这种使用 JMF 发送 rtcp 再见的显式方法。但是，当您关闭 SendStream 时，JMF 会在内部发送 RTCP 再见。

请注意，**关闭和停止 SendStream**是不同的。关闭流会删除会话，而停止 SendStream 只会停止数据传输。要发送 RTCP 再见，只需在发送完媒体后停止处理器并关闭 SendStream。因此，要发送 RTCP 再见，只需将这两行添加到您的代码中。

```
processor.stop();  //processor needs to be stopped as well before closing the sendStream
sendStream.close(); 
```

# nhibernate - 我们应该如何查询多个一对多关系

> ID：14999962
> 
> 赞同：0
> 
> 时间：2013-02-21T10:30:42.050
> 
> 标签：nhibernate, hibernate-criteria, detachedcriteria

**领域**

我正在尝试优化我的查询并需要一些建议。这是查询一对多关系的首选方式吗？

我的域如下所示：

**测量集**

```
 /// <summary>
    /// 
    /// </summary>
    /// <remarks>
    /// Tables: none
    /// </remarks>
    public class MeasureSet : PersistentEntity
    {
        #region Properties
        /// <summary>
        /// Gets or sets the code.
        /// </summary>
        /// <value>
        /// The code.
        /// </value>
        public virtual string Code { get; set; }
        /// <summary>
        /// Gets or sets the description.
        /// </summary>
        /// <value>
        /// The description.
        /// </value>
        public virtual string Description { get; set; }
        /// <summary>
        /// Gets or sets the measure domains.
        /// </summary>
        /// <value>
        /// The measure domains.
        /// </value>
        public virtual IList<MeasureDomain> MeasureDomains { get; protected set; } 
} 
```

**测量域**

```
 /// <summary>
    /// 
    /// </summary>
    /// <remarks>
    /// Tables: domeinen
    /// </remarks>
    public class MeasureDomain : PersistentEntity
    {
        #region Properties
        /// <summary>
        /// Gets or sets the code.
        /// </summary>
        /// <value>
        /// The code.
        /// </value>
        public virtual string Code { get; set; }
        /// <summary>
        /// Gets or sets the description.
        /// </summary>
        /// <value>
        /// The description.
        /// </value>
        public virtual string Description { get; set; }
        /// <summary>
        /// Gets or sets the explanation.
        /// </summary>
        /// <value>
        /// The explanation.
        /// </value>
        public virtual string Explanation { get; set; }
        /// <summary>
        /// Gets or sets the measure set.
        /// </summary>
        /// <value>
        /// The measure set.
        /// </value>
        public virtual MeasureSet MeasureSet { get; set; }
        /// <summary>
        /// Gets or sets the measure sub domains.
        /// </summary>
        /// <value>
        /// The measure sub domains.
        /// </value>
        public virtual IList<MeasureSubDomain> MeasureSubDomains { get; protected set; }
        /// <summary>
        /// Gets or sets the audits.
        /// </summary>
        /// <value>
        /// The audits.
        /// </value>
        public virtual IList<Audit> Audits { get; protected set; } 
        #endregion
} 
```

**测量子域**

```
 /// <summary>
    /// 
    /// </summary>
    /// <remarks>
    /// Tables: subdomeinen, subdomeinenbestanden
    /// </remarks>
    public class MeasureSubDomain : PersistentEntity
    {
        #region Properties
        /// <summary>
        /// Gets or sets the code.
        /// </summary>
        /// <value>
        /// The code.
        /// </value>
        public virtual string Code { get; set; }
        /// <summary>
        /// Gets or sets the description.
        /// </summary>
        /// <value>
        /// The description.
        /// </value>
        public virtual string Description { get; set; }
        /// <summary>
        /// Gets or sets the domain.
        /// </summary>
        /// <value>
        /// The domain.
        /// </value>
        public virtual MeasureDomain MeasureDomain { get; set; }
        /// <summary>
        /// Gets or sets the explanation.
        /// </summary>
        /// <value>
        /// The explanation.
        /// </value>
        public virtual string Explanation { get; set; }
        /// <summary>
        /// Gets or sets the files.
        /// </summary>
        /// <value>
        /// The files.
        /// </value>
        public virtual IList<File> Files { get; protected set; }
        /// <summary>
        /// Gets or sets the measure controls.
        /// </summary>
        /// <value>
        /// The measure controls.
        /// </value>
        public virtual IList<MeasureControl> MeasureControls { get; protected set; }
        /// <summary>
        /// Gets or sets the audits.
        /// </summary>
        /// <value>
        /// The audits.
        /// </value>
        public virtual IList<Audit> Audits { get; protected set; }
} 
```

我只需要子项、代码和描述属性的集合。我目前使用的查询是这样的：

**一对多查询**

```
 measureSets = LazySessionFactory.CurrentSession.CreateCriteria<MeasureSet>()
        .Add(Subqueries.PropertyIn("Id",
            DetachedCriteria.For<MeasureDomain>()
                .SetProjection(Projections.Property("MeasureSet.Id"))
                .Add(Subqueries.PropertyIn("Id",
                    DetachedCriteria.For<MeasureSubDomain>()
                    .SetProjection(Projections.Property("MeasureDomain.Id"))
                    .Add(Subqueries.PropertyIn("Id",
                        DetachedCriteria.For<MeasureControl>()
                        .SetProjection(Projections.Property("MeasureSubDomain.Id"))
                        .Add(Subqueries.PropertyIn("Id",
                            DetachedCriteria.For<Measure>()
                            .SetProjection(Projections.Property("MeasureControl.Id"))))))))))
                            .SetCacheable(true)
                            .Future<MeasureSet>().ToList(); 
```

**基类**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace GRCcontrol.Domain.Entities
{
    /// <summary>
    /// Base class for domain entities based on NHibernate.
    /// </summary>
    /// <typeparam name="TId">The type of the id.</typeparam>
    public abstract class PersistentEntity<TId> : IEquatable<PersistentEntity<TId>>
    {
        /// <summary>
        /// Gets or sets the id.
        /// </summary>
        /// <value>
        /// The id.
        /// </value>
        public virtual TId Id { get; protected set; }

        /// <summary>
        /// Determines whether the specified <see cref="System.Object" /> is equal to this instance.
        /// </summary>
        /// <param name="obj">The <see cref="System.Object" /> to compare with this instance.</param>
        /// <returns>
        ///   <c>true</c> if the specified <see cref="System.Object" /> is equal to this instance; otherwise, <c>false</c>.
        /// </returns>
        public override bool Equals(object obj)
        {
            return Equals(obj as PersistentEntity<TId>);
        }
        /// <summary>
        /// Determines whether the specified obj is transient.
        /// </summary>
        /// <param name="obj">The obj.</param>
        /// <returns>
        ///   <c>true</c> if the specified obj is transient; otherwise, <c>false</c>.
        /// </returns>
        private static bool IsTransient(PersistentEntity<TId> obj)
        {
            return obj != null &&
                Equals(obj.Id, default(TId));
        }
        /// <summary>
        /// Gets the type of the unproxied type, since NHibernate's lazy loading technology, creates proxies from entities.
        /// </summary>
        /// <returns></returns>
        private Type GetUnproxiedType()
        {
            return GetType();
        }
        /// <summary>
        /// Equalses the specified other.
        /// </summary>
        /// <param name="other">The other.</param>
        /// <returns></returns>
        public virtual bool Equals(PersistentEntity<TId> other)
        {
            if (other == null)
                return false;
            if (ReferenceEquals(this, other))
                return true;
            if (!IsTransient(this) &&
                !IsTransient(other) &&
                Equals(Id, other.Id))
            {
                var otherType = other.GetUnproxiedType();
                var thisType = GetUnproxiedType();

                return thisType.IsAssignableFrom(otherType) ||
                    otherType.IsAssignableFrom(thisType);
            }

            return false;
        }
        /// <summary>
        /// Returns a hash code for this instance.
        /// </summary>
        /// <returns>
        /// A hash code for this instance, suitable for use in hashing algorithms and data structures like a hash table. 
        /// </returns>
        public override int GetHashCode()
        {
            if (Equals(Id, default(TId)))
                return base.GetHashCode();

            return Id.GetHashCode();
        }
    }
    /// <summary>
    /// Base class for domain entities based on NHibernate.
    /// </summary>
    public abstract class PersistentEntity : PersistentEntity<Guid>
    {
    }
} 
```

我仍在获取所有属性，以及我目前并不真正需要的审计集合等。由于 NHibernate 不支持对集合的预测，我想知道我应该如何更改我的代码以获得更好的性能。

希望你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:14:48.380

我认为你真正想要的是渴望获取：

```
measureSets = LazySessionFactory.CurrentSession.CreateCriteria<MeasureSet>()
    .SetFetchMode("MeasureDomains", FetchType.Eager)
    .SetFetchMode("MeasureDomains.MeasureSubDomains", FetchType.Eager)
    .SetFetchMode("MeasureDomains.MeasureSubDomains.MeasureControls", FetchType.Eager)
    .SetCacheable(true)
    .Future<MeasureSet>().ToList(); 
```

几乎会做你想做的事，除了它不会排除任何没有域/子域/控件的度量集

如果这还不够好，您可以通过添加来限制它：

```
measureSets = LazySessionFactory.CurrentSession.CreateCriteria<MeasureSet>()
    .Add(Subqueries.PropertyIn("Id", 
        DetachedCriteria.For<Measure>()
            .CreateAlias("MeasureControl", "mc")
            .CreateAlias("mc.MeasureSubDomain", "msd")
            .CreateAlias("msd.MeasureDomain", "md")
            .SetProjection(Projections.Property("md.MeasureSet.id")))
    .SetFetchMode("MeasureDomains", FetchType.Eager)
    .SetFetchMode("MeasureDomains.MeasureSubDomains", FetchType.Eager)
    .SetFetchMode("MeasureDomains.MeasureSubDomains.MeasureControls", FetchType.Eager)
    .SetCacheable(true)
    .Future<MeasureSet>().ToList(); 
```

（我对模型的其余部分做了一些假设）但是，这确实有一个缺点，即需要可能会损害性能的子选择（YMMV）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T06:34:13.927

我在这个问题上花了几个小时，但我终于找到了解决方案。此查询也经过优化，需要对数据库进行四次调用：

```
 IEnumerable<MeasureSet> measureSets = null;

    var currentSession = LazySessionFactory.CurrentSession;

    measureSets = currentSession.QueryOver<MeasureSet>().TransformUsing(Transformers.DistinctRootEntity)
        .Fetch(m => m.MeasureDomains).Eager
        .Future();

    var setIds = measureSets.Select(x => x.Id).ToArray();

    var domains = currentSession.QueryOver<MeasureDomain>().TransformUsing(Transformers.DistinctRootEntity)
        .WhereRestrictionOn(x => x.MeasureSet.Id).IsIn(setIds).Fetch(m => m.MeasureSubDomains).Eager.Future();
    var domainIds = domains.Select(x => x.Id).ToArray();

    var subDomains = currentSession.QueryOver<MeasureSubDomain>().TransformUsing(Transformers.DistinctRootEntity)
        .WhereRestrictionOn(x => x.MeasureDomain.Id).IsIn(domainIds).Fetch(m => m.MeasureControls).Eager.Future();
    var subDomainIds = subDomains.Select(x => x.Id).ToArray();

    var controls = currentSession.QueryOver<MeasureControl>().TransformUsing(Transformers.DistinctRootEntity)
        .WhereRestrictionOn(x => x.MeasureSubDomain.Id).IsIn(subDomainIds).Fetch(m => m.Measures).Eager.Future();
    var controlIds = controls.Select(x => x.Id).ToArray();

    currentSession.QueryOver<Measure>().TransformUsing(Transformers.DistinctRootEntity)
        .WhereRestrictionOn(x => x.MeasureControl.Id).IsIn(controlIds).Future();

    return measureSets.AsQueryable(); 
```

当您有比这个更好的解决方案时，请回复我的回答。

# wpf - GridSplitter 错误地调整大小

> ID：14999963
> 
> 赞同：0
> 
> 时间：2013-02-21T10:30:44.637
> 
> 标签：wpf, resize, grid, splitter

在`Page`派生类上，我有一些嵌套网格。

我已将其更改`ColumnDefinition`为某些像素的宽度（即大约 5），其中某些列的宽度为“*”。

所有元素都有`Width="Auto"`.

这是我的拆分器：

```
<Grid Margin="10"
          HorizontalAlignment="Stretch"
          VerticalAlignment="Stretch"
          Grid.Background="SpringGreen">

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="5" />
            <ColumnDefinition Width="5*" />
            <ColumnDefinition Width="5" />
            <ColumnDefinition Width="5" />
            <ColumnDefinition Width="5" />
            <ColumnDefinition Width="5*" />
            <ColumnDefinition Width="5" />

        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="5*" />

        </Grid.RowDefinitions>

        <GridSplitter Grid.Row="1"
                      Grid.Column="3"
                      Width="Auto"
                      Height="Auto"
                      Margin="0"
                      HorizontalAlignment="Stretch"
                      VerticalAlignment="Stretch"
                      Background="Red"
                      BorderThickness="1,0"
                      Cursor="SizeWE"
                      RenderTransformOrigin="-1,1"
                      ShowsPreview="True" />
    </Grid> 
```

所以问题是，它几乎没有向左调整大小，但非常向右。它不取决于窗口大小，即使在全屏模式下，拆分器也只允许左侧的一些像素。

-edit- 是否有任何我自己没有发现的已知问题（在 Google 上）？有没有人经历过类似的奇怪行为？

-edit update- 找到网格的最小定义来重现问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:18:15.233

在两个 *-width 列之间有 3 个宽度为 5 的列。`GridSplitter`是在这些中间。它通过调整前一列的大小（即 5 像素列中的第一列）来工作。您不能向左调整大小，因为该列只有 5 像素宽。

请记住，`Row`和`Column`属性是从零开始的。

# c# - Parallel.ForEach 中的二进制序列化/反序列化 (BinaryFormatter)

> ID：14999972
> 
> 赞同：0
> 
> 时间：2013-02-21T10:31:11.110
> 
> 标签：c#, parallel-processing

也许这是一个重复（（但我没有找到任何在 Parallel.Foreach 中使用 binnaryformatter 的示例代码。有人可以提供它的示例吗？代码示例

```
Parralel.ForEach(files, fileCurr=>
                  {
                      using(lib.Accesser("fileType", fileNameSpec))
                      {
                        LoadFileData(fileNameSpec,fileCurr,cancellationToken, progressCallback);
                      }
                   });
and

LoadFileData(fileNameSpec,fileCurr,cancellationToken, progressCallback)
{
 using(lib2.load(fileCurr.name))
{
 foreach(var v in fileCurr.include)
 {
   var objectForSerialization = loadObj(v);
   //my code goes below
   System.IO.Stream stream = System.IO.File.Open("J:\\volume", FileMode.OpenOrCreate);
                    System.Runtime.Serialization.Formatters.Binary.BinaryFormatter bformatter = new BinaryFormatter();
                    bformatter.Serialize(stream, objectForSerialization);
                    stream.Close();
  //but this fil will be locked by multyply writes

 }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:59:14.310

你的问题的一部分是

**在同一个文件中并行读取和写入或执行多个写入实际上是不可能的。**

一旦为文件读/写实现了锁定机制，就不再需要并行执行迭代，因为它的操作*不能并行执行*。

**如果您只是反序列**化，（只是从文件中读取）这是一个不同的故事。

只读访问可以并行完成，因为它不需要锁定文件本身。

请参阅：[如何在不锁定的情况下读取文本文件？](https://stackoverflow.com/questions/3448230/how-can-i-read-a-text-file-without-locking-it)

您可以做的另一件事是预加载文本文件（如果可能的话）并直接从结果字符串中反序列化它们。

：：编辑：：

还有一件事 ：

您似乎总是在写入 `J:`驱动器上的同一个文件（一个`volume`没有扩展名的文件）。

**如果您正在序列化多个对象，您将希望它们被序列化为不同的文件......**

如果您可以确保所有对象都被序列化为不同的文件，那么您*可以*使操作并行。

这将是这样的：

```
 System.IO.Stream stream = System.IO.File.Open("J:\\volume\\" + GenerateFileName(v), FileMode.OpenOrCreate); 
```

然后确保 GenerateFileName 生成一个唯一的文件名作为字符串。

# html - Favicon 在 localhost 上运行良好，但在服务器上出现问题（使用 Typo3）

> ID：14999976
> 
> 赞同：-1
> 
> 时间：2013-02-21T10:31:19.673
> 
> 标签：html, image, typo3, favicon

我创建了几种尺寸的图标，将 16、24、32 和 128 像素的版本放在 favicon.ico 文件中。这在我的本地主机上工作得很好，但是一旦我们使用 Typo3 在生产服务器上使用相同的文件和代码，favicon 在 Firefox 中确实是像素化的，并且在 IE9 中根本不显示。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:53:42.147

如果它适用于某些浏览器，可能是缓存问题，并且只使用它自己的 32px 图标，不需要更大的尺寸，因为它只是一个标签的小图像。

尝试在浏览器选项中进行硬刷新或手动清除缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:23:49.087

问题是你的网站图标在哪里，你是用什么方式把它放在 Typo3 中的？？？

你应该检查你的路径，因为如果你有它在 HTML 中，你必须从“Fileadmin/..”开始更正它的路径，以及如果你有它在你的模板 TS 设置中。

这就是我链接到网站图标并且没有问题的方式。

```
page.shortcutIcon = fileadmin/img/favicon.png 
```

它被放置在模板 TS setup 之前：

```
page.10 = TEMPLATE 
```

另一种方法是使用以下代码：

```
page.headerData {
  5 = HTML
  5.value = XXX   // here goes any meta, link etc. tag for header part
  10 = HTML
  10.value = XXX   // here goes any meta, link etc. tag for header part,
  etc.
} 
```

至于图标大小，正如 Samayres 所说，32px 就足够了。

# ios - NSDocumentDirectory - 写入和读取文件

> ID：14999980
> 
> 赞同：0
> 
> 时间：2013-02-21T10:31:35.683
> 
> 标签：ios, objective-c, nsdocumentdirectory

`UITextFields`这是用于从(name,addr,contactNumber,email)的内容写入文件的代码。

```
NSDictionary *userDict = [NSDictionary dictionaryWithObjectsAndKeys:
                          self.name.text, @"UserName"
                          ,self.address.text, @"UserAddress"
                          ,self.contactNumber.text, @"UserContactNumber"
                          ,self.email.text, @"UserEmail"
                          , nil];
NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:@"UserDetails"];
BOOL writtenToFile = [userDict writeToFile:fullPath atomically:YES];
NSLog(@"writtenToFile: %d",writtenToFile); 
```

而这个从文件中读取。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsPath = [paths objectAtIndex:0];
NSDirectoryEnumerator *directoryEnumerator = [[NSFileManager defaultManager] enumeratorAtPath:documentsPath];
for (NSString *path in directoryEnumerator)
{
    NSLog(@"File Names: %@", path);
    if ([path isEqualToString:@"UserDetails"]) {
        NSData *data = [NSData dataWithContentsOfFile:path];
        NSLog(@"%@",data);
        NSDictionary *userDict = [[NSDictionary alloc] initWithContentsOfFile:path];
        NSLog(@"%@",userDict);
    }
} 
```

但它无法读取任何内容。它一直在日志中打印 null 。

```
File Names: UserDetails
(null)
(null) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:39:01.560

阅读时忘记添加额外**的“路径”**

```
NSString *documentsPath =  [[paths objectAtIndex:0] stringByAppendingPathComponent:@"UserDetails"]; 
```

**编辑**

然后，提供**dataWithContentsOfFile:**的完整路径。Enumerate 只会给你文件名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:44:08.980

```
NSString *path = [[[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject] path];
//You'll need an additional '/'
NSString *fullPath = [path stringByAppendingFormat:@"/UserDetails.plist"];
BOOL writtenToFile = [userDict writeToFile:fullPath atomically:YES]; 
```

# perl - “使用诊断”不起作用

> ID：14999981
> 
> 赞同：4
> 
> 时间：2013-02-21T10:31:44.270
> 
> 标签：perl

每次我`use diagnostics`在 Perl 中输入时，我都会收到一条错误消息，说

`couldn't find diagnostics data in /file name.etc...`

有人可以帮忙吗？等`use warnings`一切正常！

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T10:38:57.327

这表明您的 Perl 安装不包括 perldiag.pod（一个文档文件）。见[这里](http://grokbase.com/t/perl/perl5-porters/04bbpyed7v/suggestions-to-better-ship-perl-on-os-x)。

最简单的解决方案可能是更新您的 Perl 安装。无论如何，这是个好主意，除非您已经拥有最新版本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T11:08:13.297

找不到`perldiag.pod`Perl 自带的文件。

您的操作系统/发行版可能将 Perl 的文档文件分离到一个单独的包中。只需安装该`perl-doc`软件包或您的发行版命名它的任何内容。

或者您可以自己在[perldiag](http://perldoc.perl.org/perldiag.html)中查找错误消息。

# joomla - 如何在菜单中分配模块 [Joomla 2.5]

> ID：14999983
> 
> 赞同：1
> 
> 时间：2013-02-21T10:31:49.870
> 
> 标签：joomla, joomla2.5

我正在使用模块**JLV FACEBOOK LOGIN**，我想将此模块分配为模板中的菜单项。

1.  为什么我 在以下屏幕截图 中看不到**JLV FACEBOOK LOGIN模块**![在此处输入图像描述](../Images/938a554d136af6e953e2bffdc5c31263.png)

我知道我问的是人们已经问过的同样的问题，但我是 joomla 的新手，所以请承担我的错误。任何建议的教程或任何有关如何将模块用作菜单的链接都将对我非常有帮助，在此先感谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:42:34.673

快进到 this 的输出`JLV FACEBOOK LOGIN menu Item`。那么，一旦你点击这个链接，它应该带你到它自己页面上显示的模块吗？

如果您对此表示肯定，那么您只需将模块插入文章并将文章链接到菜单即可。

如果这不是您从菜单链接中想要的，那么单击菜单项时的预期输出是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T10:37:34.267

要将模块分配给菜单，您不能使用菜单管理器。转到扩展 -> 模块管理器，打开您的 JLV FACEBOOK LOGIN 模块，设置应该启用的菜单项和模板位置的选项，然后发布模块。

请注意，您不能将模块添加为菜单链接，这仅适用于组件。模块是一个扩展，它应该只是页面的一小部分，它不能是它自己的页面，比如组件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T12:59:33.620

谢谢大家帮助我。
所以最后我在插件[加载模块](http://www.pages-and-items.com/extensions/load-module-into-article)的帮助下将**模块**包含在**文章中。**然后将文章包含在**Menu**中。

 **希望这对像我这样的新手有所帮助**

# c# - Windows 颜色到单个整数

> ID：14999984
> 
> 赞同：0
> 
> 时间：2013-02-21T10:31:49.980
> 
> 标签：c#, colors, drawing, system

我正在使用仅支持颜色 RGB 分量的字节值的 API。我试图区分可变数量的项目，比如 8 到 12 个。我想为每个项目分配一种颜色。因此，如果有 10 个项目，我会将范围划分为 10 个并为每个项目分配相应的颜色（想想彩虹）。看起来`toArgb()`可行，但更多读数表明可能使用十六进制。我显然需要提取 RGB 值以发送回 API。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:18:10.090

据我了解，您将输入颜色范围和项目数量。此外，您希望生成的颜色代表颜色渐变。

尝试这个：

```
// set the edges of the color range
var firstColor = Color.Red;
var secondColor = Color.Green;

int rMin = firstColor.R;
int rMax = secondColor.R;
int bMin = firstColor.B;
int bMax = secondColor.B;
int gMin = firstColor.G;
int gMax = secondColor.G;

int size = 10;

for (int i = 0; i < size; i++)
{
    var rAverage = rMin + (int)((rMax - rMin) * i / size);
    var gAverage = gMin + (int)((gMax - gMin) * i / size);
    var bAverage = bMin + (int)((bMax - bMin) * i / size);
    var currentColor = Color.FromArgb(rAverage, gAverage, bAverage);
    // TODO: use the currentColor
} 
```

# orm - 从不同数据库映射 Doctrine 中的实体时抛出 ReflectionException

> ID：14999986
> 
> 赞同：0
> 
> 时间：2013-02-21T10:31:55.330
> 
> 标签：orm, doctrine-orm, zend-framework2, cross-database

我正在尝试在包含两个模块的 ZF2 应用程序中使用 Doctrine 2，每个模块都有自己的数据库。我需要使用跨数据库连接，以便将一个模块中的实体与另一个模块中的实体相关联。[这是设置的 UML 图](http://yuml.me/5a0c9e64.png)。

我已经尝试在我的第一个实体中使用它（我已经删除了不相关的参数和`use`语句）：

```
namespace Client\Entity;

/**
 * A website.
 *
 * @ORM\Entity
 * @ORM\Table(name="users.website")
 * ...
 * @property $server
 */
class Website extends BaseEntity {

    // Other class vars ... 

    /**
     * @ORM\ManyToOne(targetEntity="Server\Entity\Server", inversedBy="websites")
     * @ORM\JoinColumn(name="server_id", referencedColumnName="id")
     */
    protected $server; 
```

这在我的服务器实体中：

```
namespace Server\Entity;

/**
 * A server.
 *
 * @ORM\Entity
 * @ORM\Table(name="servers.server")
 * ...
 * @property $websites
 */
class Server extends BaseEntity {

   // Other class vars ... 

   /**
    * @ORM\OneToMany(targetEntity="Client\Entity\Website", mappedBy="server")
    */
   protected $websites; 
```

当我创建一个新的网站实体（通过一个`DoctrineModule\Form\Element\ObjectSelect`用于服务器关联的 Web 表单）时，这个映射完美地工作，但是当我去*编辑*一个现有的网站时，这个 ReflectionException 被抛出：

> 类 Server\Entity\Website 不存在

完整的堆栈跟踪[可以在这里找到](http://pastebin.com/CsLD3zBi)。出于某种原因，当通过与网站实体的关联访问服务器实体时，它认为所有实体都存在于`Server\Entity`命名空间中，而不是`Client\Entity`. 我需要做什么来确保服务器实体在正确的模块命名空间中查找？

CLI 命令`orm:info`产生：

```
Found 7 mapped entities:
[OK]   Server\Entity\Server
[OK]   Client\Entity\Role
[OK]   Client\Entity\Website
[OK]   Client\Entity\User
[OK]   Client\Entity\Client
[OK]   Client\Entity\Permission
[OK]   Message\Entity\Notification 
```

但`orm:validate-schema`结果是：

```
[Mapping]  OK - The mapping files are correct.
[Database] FAIL - The database schema is not in sync with the current mapping file. 
```

* * *

我的每个模块中都有这个`module.config.php`：

```
'driver' => array(
    __NAMESPACE__ . '_driver' => array(
        'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
        'cache' => 'array',
        'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Entity')
    ),
    'orm_default' => array(
        'drivers' => array(
            __NAMESPACE__ . '\Entity' => __NAMESPACE__ . '_driver'
        )
    )
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T10:31:43.387

我设法修复它。在我的`Server\Entity\Server`中，我有这些用于添加/删除网站的 getter/setter 函数：

```
public function setWebsite(Website $website) 
{
   $this->websites->add($website);    
}

public function removeWebsite(Website $website)
{
   $this->websites->removeElement($website);
} 
```

但是您需要指定**完整的命名空间**作为参数：

```
public function setWebsite(\Client\Entity\Website $website) { ... } 
```

这么愚蠢的错误！我发现了这个问题，因为我浏览了堆栈跟踪中的每个文件并到达了它试图将我的 Entity 类中的每个方法/参数保存到代理文件的地步（Doctrine/ORM/Proxy/ProxyFactory 中的第 223 行）。 php）。

# php - javascript 如何在 for 循环中呈现融合图表？

> ID：14999990
> 
> 赞同：1
> 
> 时间：2013-02-21T10:32:03.847
> 
> 标签：php, javascript

我正在使用从 xml 文件呈现的融合图表。

```
var  chart1  = new FusionCharts('FusionCharts/MSColumn3D.swf', ' G01 ', '600', '400', '0', '1');                    
        chart1.setXMLUrl(' G01.xml');
        chart1.render('graph1'); 
```

想要渲染近 12 个具有来自 php 数组的 id 的图形，例如粗体项目。

这里chart1，G01是对象。

我必须这样做

```
 foreach($array as $k)
 {

echo "<script type="text/javascript" >";

 var $k['chartid'] = new FusionCharts('FusionCharts/MSColumn3D.swf', '<?php echo   $k['graphid'];?>', '600', '400', '0', '1');                  
        chart1.setXMLUrl("<?php echo $k['graphid'].'xml';?>");
        chart1.render('<?php echo $k['divid'];?>');//div id from html to render graph
    echo "</script>";
         } 
```

但它不工作。帮我解决。谢谢

# javascript - 访问调用者函数上下文不传递它

> ID：14999991
> 
> 赞同：1
> 
> 时间：2013-02-21T10:32:06.907
> 
> 标签：javascript, scope

如果它是从另一个函数甚至框架调用的，我如何访问调用者上下文？示例 1\. 一般情况下可能吗？

```
var aaa = function(){
    (function(){console.log(ab)}).call(arguments.callee.caller); //fail
}
function bbb(){
    var ab = 'fff'; //defined in this function's context
    aaa();
} 
```

示例 2。

```
<html>
    function someFunction(){
        //description on bottom
    }
    <iframe>
        function() bbb(){parent.someFunction();}
        bbb();
    </iframe>
</html> 
```

我可以在不直接将其传递给 someFunction 的情况下获取调用函数的 Window 对象吗？我可以有多个 iframe，它们都会调用 someFunction。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:36:59.330

> 一般可以吗？

您可以获得对调用者函数的引用，但永远不能在该函数之外访问其局部变量。

> 我可以在不直接将其传递给 someFunction 的情况下获取调用函数的 Window 对象吗？

`window`不。函数对象与定义函数的环境对象之间没有暴露关系。`window`对象是函数作用域链的一部分，但您不能访问作用域链。

* * *

明确地说，将函数需要知道的任何内容传递给函数（*依赖注入*）。它还使您的功能更易于测试。

# c - 在 c 中使用 p 线程编写并行快速排序

> ID：14999995
> 
> 赞同：2
> 
> 时间：2013-02-21T10:32:23.740
> 
> 标签：c, parallel-processing, pthreads

我正在尝试实现并行快速排序算法，但我不太确定如何在快速排序函数中使用 pthread。这是我在粘贴箱[http://pastebin.com/tG0h6cMU上的代码的链接](http://pastebin.com/tG0h6cMU)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:57:37.010

如果 CPU 受限，每个进程的线程数应该接近 1.0。如果涉及某种类型的 I/O，那么您可以拥有更多线程 - 例如，如果`make -j N`每个内核运行大约 1.5 个“作业”（其中 N = 内核 * 1.5），编译 Linux 内核往往会运行得最快。但是请注意，这在很大程度上取决于线程/进程的实际行为，并且几乎可以肯定有必要为您的特定场景测量理想性能。

当然，如果线程数超过内核数太多，就会出现“线程抖动”。如果没有足够的线程，核心就不会保持忙碌，所以这也不是很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:19:59.950

一般来说，你可以不使用`pthread_mutex_lock`没有线程同步的并行快速排序。根据 WP：[https ://en.wikipedia.org/wiki/Quicksort#Parallelization](https://en.wikipedia.org/wiki/Quicksort#Parallelization)

现在专门针对您的实施：

我无法编译代码，因为我缺少 read_in 和 gen_random 但我可以告诉你这些：

您的代码存在一些问题：

第 45 行：您正在分配一个 `int r` to `int* r` **!!!**

第 133 行：`if(a,...)`。

还有一些未使用的变量（237：未排序，236：已排序，218：i）。也许你忘记了什么

# vb.net - 获取活动窗口的标题

> ID：14999997
> 
> 赞同：2
> 
> 时间：2013-02-21T10:32:29.360
> 
> 标签：vb.net, winforms, winapi, dllimport, user32

我已经声明了以下 WinAPI 调用

```
<DllImport("USER32.DLL", EntryPoint:="GetActiveWindow", SetLastError:=True,
    CharSet:=CharSet.Unicode, ExactSpelling:=True,
    CallingConvention:=CallingConvention.StdCall)>
Public Shared Function GetActiveWindowHandle() As System.IntPtr
End Function

<DllImport("USER32.DLL", EntryPoint:="GetWindowText", SetLastError:=True,
    CharSet:=CharSet.Unicode, ExactSpelling:=True,
    CallingConvention:=CallingConvention.StdCall)>
Public Shared Function GetActiveWindowText(ByVal hWnd As System.IntPtr, _
                                            ByVal lpString As System.Text.StringBuilder, _
                                            ByVal cch As Integer) As Integer
End Function 
```

然后，我调用这个子程序来获取活动窗口标题栏中的文本

```
Public Sub Test()
    Dim caption As New System.Text.StringBuilder(256)
    Dim hWnd As IntPtr = GetActiveWindowHandle()
    GetActiveWindowText(hWnd, caption, caption.Capacity)
    MsgBox(caption.ToString)
End Sub 
```

最后，我收到以下错误

> 无法在 DLL 'USER32.DLL' 中找到名为 'GetWindowText' 的入口点

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T12:12:41.200

```
<DllImport("USER32.DLL", EntryPoint:="GetWindowText", SetLastError:=True,
    CharSet:=CharSet.Unicode, ExactSpelling:=True, 
```

您坚持使用 ExactSpelling。问题出在哪里，user32.dll导出的GetWindowText有*两个*版本。GetWindowTextA 和 GetWindowTextW。A 版本使用 ansi 字符串，这是一种传统字符串格式，在 Windows ME 中最后一次使用的默认代码页中编码为 8 位字符。W 版本使用 Unicode 字符串，编码为原生 Windows 字符串类型 utf-16。pinvoke marshaller 将根据 CharSet 尝试其中任何一个，但您使用 ExactSpelling := True 阻止了它这样做。所以它找不到GetWindowText，它不存在。

使用 EntryPoint := "GetWindowTextW" 或删除 ExactSpelling。