# StackOverflow 问答 15652000-15652999

# ios - 删除准备出售的 iOS 应用程序

> ID：15652000
> 
> 赞同：4
> 
> 时间：2013-03-27T04:37:26.050
> 
> 标签：ios, certificate, app-store-connect

我的问题很简单：是否可以从准备出售的 iTunesConnect 中删除我的应用程序？

我提交了一个有问题的应用程序，并希望使用不同的 Mac 对其进行更新。不小心我没有备份我的旧 Mac 上的证书和其他重要的东西。所以我认为唯一的解决方法是使用不同的捆绑包名称和 SKU 提交新的新应用程序。问题是如何从准备出售的 iTunesConnect 中删除我现有的应用程序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T04:48:12.593

在 iTunes Connect 中，单击

*   管理您的应用程序
*   （您要删除的应用程序）
*   权利与采购
*   然后取消选择所有国家
*   节省

这将把它从销售中删除。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-23T07:08:09.763

2017 年更新

在 iTunes 连接

*   我的应用
*   选择您的应用
*   定价和可用性
*   在可用性下，选择从销售中移除
*   点击保存

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T04:51:10.813

如果您点击您的应用，然后点击“权利和定价”，然后您可以在定价下方的国家/地区可用性部分中选择“取消全选”。这将从所有国家/地区的应用商店中删除您的应用程序，您可以在提交新的二进制文件后将其更改回来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-25T05:11:27.927

**截至2020年更新**

登录[https://appstoreconnect.apple.com/](https://appstoreconnect.apple.com/)

我的应用程序 -> 选择您的应用程序

然后单击左侧面板中的**定价和可用性选项卡。**

在可用性部分下，选择**从销售中移除**

点击保存

[![在此处输入图像描述](../Images/4279364bdff17b4414d0730b17d54e67.png)](https://i.stack.imgur.com/gRY39.png)

# java - 这段代码有什么问题？

> ID：15652002
> 
> 赞同：0
> 
> 时间：2013-03-27T04:38:04.733
> 
> 标签：java

出于某种原因，我输入的所有内容都不断得到空行，我正在尝试制作一个读取输入的程序，删除所有不必要的空格，但每个单词之间有一个空格。然后打印出所有的行。

不使用任何哨兵来阻止。

```
import java.util.Scanner ;
import java.lang.Character;
import java.lang.String ;
public class trim
{
        public static void main (String[]args)
        {

          String SongName = " " ;
          String Song = " " ;
          int i = 0 ;
          int count = 0 ;

                 Scanner scan = new Scanner(System.in);
                while(scan.hasNextLine())
                {
                  count++;
                  scan.nextLine();
                }

                 for (  ; i < count ; i ++)
                 {
                   if (scan.hasNext())
                   {
                    SongName =scan.nextLine() ;
                    SongName = SongName.trim() ;
                    SongName = SongName.replaceAll("\\s+"," ");
                    if (Song== " " )
                    {
                    Song = SongName;
                    }
                    else
                    {
                    Song  = Song + "\n" +SongName ;
                    }
                   }
                   System.out.println(Song) ;

                }

         }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T04:41:18.127

```
while(scan.hasNextLine()){
       count++;
       scan.nextLine();
} 
```

这将在您的程序真正启动之前读取所有输入。

在那之后（如果程序走得那么远，STDIN 通常不会在控制台上关闭），scan 在第二个循环中没有更多要读取的内容了。

此外，小写的类名与大写的变量名一样令人困惑。至少你在这里是一致的;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T04:41:22.583

```
while (scan.hasNextLine()) {
    count++;
    scan.nextLine();
} 
```

这对我来说似乎是一个无限循环。它只是不断地从控制台读取输入。你继续打字，这继续阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T07:04:41.047

将您的输入添加到列表中，然后您可以继续执行逻辑。我已将代码修改如下。

```
import java.util.Scanner ;
import java.util.ArrayList ;
import java.lang.Character;
import java.lang.String ;

public class trim {

public static void main (String[]args) {
    String SongName = " " ;
    String Song = " " ;          
    int count = 0 ;
ArrayList lst = new ArrayList();

    Scanner scan = new Scanner(System.in);
    while(scan.hasNextLine()) {                  
        lst.add(scan.nextLine());
        count++;
    }

for (int i=0 ; i < count ; i ++)  {                   
    SongName = (String)lst.get(i);  
    SongName = SongName.trim() ;
    SongName = SongName.replaceAll("\\s+"," ");
    if (Song== " " ) {
       Song = SongName;
    }
    else  {
       Song  = Song + "\n" +SongName ;
    }                   
    }
System.out.println(Song) ;
  }
} 
```

# php - FFMPEG 无法在 PHP 中使用 exec() 或 shell_exec() 运行

> ID：15652004
> 
> 赞同：1
> 
> 时间：2013-03-27T04:38:49.740
> 
> 标签：php, ffmpeg

所以我一直在努力让 FFMPEG 对上传到我网站的视频进行编码。上传脚本使用 exec() 调用 PHP 二进制文件来运行一个名为 encode.php 的脚本，如下所示：

```
include("include/config.inc.php");
$videoID = $argv[1];
exec("ffmpeg -i " . $_SERVER['DOCUMENT_ROOT'] . "/processing/" .  $videoID. ".mp4 -vcodec libx264 -vpre normal -s 1280x720 -r 30 -acodec libfaac " . $_SERVER['DOCUMENT_ROOT'] . "/videos/" . $videoID . ".mp4");
$connect = mysql_connect($dbhost, $dbusername, $dbpassword);
mysql_select_db($dbname, $connect);
$query = mysql_query("UPDATE `videos` SET `isProcessing` = 0 WHERE `id` = '$videoID' LIMIT 1"); 
```

但是，视频根本没有任何反应。我试过使用 FFMPEG 的完整路径，但这也不起作用。我知道脚本正在执行，因为数据库中的 isProcessing 设置为 0。

也许我只是一无所知，但我似乎无法弄清楚这一点。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T17:45:01.763

您可能会发现这个项目很有用： [https ://ffmpeg-php.readthedocs.org/en/latest/index.html#installation](https://ffmpeg-php.readthedocs.org/en/latest/index.html#installation)

# ios - iOS 上的 URL 方案

> ID：15652007
> 
> 赞同：2
> 
> 时间：2013-03-27T04:38:57.797
> 
> 标签：ios, url-scheme

我正在尝试使用 URL 方案从另一个应用程序（应用程序 2）启动一个应用程序（应用程序 1）。有没有办法可以检查正在启动我的应用程序的应用程序名称？示例 App2 启动 App 1（所以我可以在启动 App 1 时检查 App 2 名称）还是我们可以获得有关启动 App1 的源的信息？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T04:57:03.977

要从另一个应用程序启动一个应用程序，您只需在 info plist 文件中配置“支持的 url 方案”。您也可以通过 appDelegate 中的以下方法了解应用程序启动的原因。

*   (BOOL)应用程序:(UIApplication *)应用程序 didFinishLaunchingWithOptions:(NSDictionary *)launchOptions

这里的启动选项是

指示应用程序启动原因的字典（如果有）。在用户直接启动应用程序的情况下，此字典的内容可能为空。

可能的键是

NSString *const UIApplicationLaunchOptionsURLKey; NSString *const **UIApplicationLaunchOptionsSourceApplicationKey** ; NSString *const UIApplicationLaunchOptionsRemoteNotificationKey; NSString *const UIApplicationLaunchOptionsAnnotationKey; NSString *const UIApplicationLaunchOptionsLocalNotificationKey; NSString *const UIApplicationLaunchOptionsLocationKey; NSString *const UIApplicationLaunchOptionsNewsstandDownloadsKey;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:13:45.763

由于 URL 方案由您决定，您可以在 URL 中传递您想要的任何信息。例如：

```
[[UIApplication sharedApplication] openURL:@"app1scheme://app_action?source=app2"]; 
```

与使用启动选项键相比，此方法的唯一真正优势是，如果有人从网站链接启动您的应用程序，它也可以工作，并且可能包含网站特定信息。

# php - 如何使用按键事件进行计算

> ID：15652008
> 
> 赞同：0
> 
> 时间：2013-03-27T04:39:11.583
> 
> 标签：php, javascript, jquery, yii

这是我的创建页面。

![在此处输入图像描述](../Images/3cc56756f2835a27853031bf02a589cb.png)

费率 = 人工 + 机械 + 材料 + 现场开销 + 总部开销 + 利润

在提交按钮单击之前，我想完成上述计算并将其填充到 Rate 文本字段。是否有类似按键的事件（如在 Windows 应用程序中）来执行此操作？我是 yii 的新手，我想你们帮我做这件事。

这是我通过 Yii 生成的表单。

```
<div class="form">

<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'trboq-form',
    'enableAjaxValidation'=>false,
)); ?>

<?php
    $projectWbs = Yii::app()->session['projectWbs'];
?>

<?php
    $subBoqNo=Yii::app()->session['$subBoqNo']  ;
    $subBoqDes=Yii::app()->session['subBoqDes']  ;
    $mainBoqDes=Yii::app()->session['mainBoqDes']  ;
?>

    <p class="note">Fields with <span class="required">*</span> are required.</p>

    <?php echo $form->errorSummary($model); ?>

<!-- Start of First table-->
 <div class="form">
  <div class="group" style="width:600px; padding-left:50px;margin-top:40px; margin-left:15px">
   <fieldset>
      <legend>General</legend>
      <table>
     <tr>
       <th><?php echo $form->hiddenfield($model,'Project_Code'); ?></th>
       <th><?php echo $form->hiddenfield($model,'Project_Code',array('size'=>20,'value'=>$projectWbs,'readonly'=>true)); ?></th>
       <th><?php echo $form->error($model,'Project_Code'); ?></th>
    </tr>
    <tr>
        <th><?php echo $form->labelEx($model,'Sub_BOQ_No'); ?></th>
        <th><?php echo $form->textField($model,'Sub_BOQ_No',array('size'=>20,'value'=>$subBoqNo,'readonly'=>true)); ?></th>
        <th><?php echo $form->error($model,'Sub_BOQ_No'); ?></th>
    </tr>
       <tr>
        <th><?php echo $form->labelEx($model,'Sub_BOQ_Description'); ?></th>
        <th><?php echo $form->textField($model,'Sub_BOQ_Description',array('size'=>60,'maxlength'=>150, 'value'=>$subBoqDes,'readonly'=>true)); ?>        </th>
        <th><?php echo $form->error($model,'Sub_BOQ_Description'); ?></th>
    </tr>
      <tr>
        <th><?php echo $form->labelEx($model,'BOQ_Item_Code'); ?></th>
        <th><?php echo $form->textField($model,'BOQ_Item_Code',array('size'=>25,'maxlength'=>25)); ?></th>
        <th><?php echo $form->error($model,'BOQ_Item_Code'); ?></th>
    </tr>
       <tr>
        <th><?php echo $form->labelEx($model,'BOQ_Item_Name'); ?></th>
        <th><?php echo $form->textarea($model,'BOQ_Item_Name',array('rows'=>6, 'cols'=>40)); ?></th>
        <th><?php echo $form->error($model,'BOQ_Item_Name'); ?></th>
    </tr>
    </tr>
       <tr>
        <th><?php echo $form->labelEx($model,'BOQ_Description'); ?></th>
        <th><?php echo $form->textarea($model,'BOQ_Description',array('rows'=>6, 'cols'=>40)); ?></th>
        <th><?php echo $form->error($model,'BOQ_Description'); ?></th>
    </tr>

    <tr>
        <th><?php echo $form->labelEx($model,'Unit_Code'); ?></th>
        <th> <?php echo $form->dropdownlist($model,'Unit_Code',CHtml::listData(MaUnits::model()->findAll(),'Unit_Code','Unit_Code'),array('width'=>              '25', 'empty'=>'please select'));  ?></th>
        <th><?php echo $form->error($model,'Unit_Code');?></th>
    </tr>

     <tr>
        <th><?php echo $form->labelEx($model,'Qty'); ?></th>
        <th><?php echo $form->textField($model,'Qty'); ?></th>
        <th><?php echo $form->error($model,'Qty'); ?></th>
    </tr>
        </table>
    </fieldset>

  </div>
  </div>

  <div class="form">
  <div class="group" style="width:600px; padding-left:50px;margin-top:40px; margin-left:15px">
   <fieldset>
      <legend>Cost</legend>
      <table>
      <tr>
        <th><?php echo $form->labelEx($model,'Labour'); ?></th>
        <th><?php echo $form->textField($model,'Labour'); ?></th>
        <th><?php echo $form->error($model,'Labour'); ?></th>
    </tr>
    <tr>
        <th><?php echo $form->labelEx($model,'Machinery'); ?></th>
        <th><?php echo $form->textField($model,'Machinery'); ?></th>
        <th><?php echo $form->error($model,'Machinery'); ?></th>
    </tr>
       <tr>
        <th><?php echo $form->labelEx($model,'Matirial'); ?></th>
        <th><?php echo $form->textField($model,'Matirial'); ?></th>
        <th><?php echo $form->error($model,'Matirial'); ?></th>
    </tr>
      <tr>
        <th><?php echo $form->labelEx($model,'Side_over_head'); ?></th>
        <th><?php echo $form->textField($model,'Side_over_head'); ?></th>
        <th><?php echo $form->error($model,'Side_over_head'); ?></th>
    </tr>
       <tr>
        <th><?php echo $form->labelEx($model,'Head_office_over_head'); ?></th>
        <th><?php echo $form->textField($model,'Head_office_over_head'); ?></th>
        <th><?php echo $form->error($model,'Head_office_over_head'); ?></th>
    </tr>
     <tr>
        <th><?php echo $form->labelEx($model,'Profit'); ?></th>
        <th><?php echo $form->textField($model,'Profit'); ?></th>
        <th><?php echo $form->error($model,'Profit'); ?></th>
    </tr>
    <tr><th><p>----------------------------------------------------------------------------</p></th></tr>
    <tr>
        <th><?php echo $form->labelEx($model,'Rate'); ?></th>
        <th><?php echo $form->textField($model,'Rate'); ?></th>
        <th><?php echo $form->error($model,'Rate'); ?></th>
    </tr>
      <tr>
        <th><?php echo $form->labelEx($model,'Amount_Total'); ?></th>
        <th><?php echo $form->textField($model,'Amount_Total'); ?></th>
        <th><?php echo $form->error($model,'Amount_Total'); ?></th>
      </tr>
        </table>
    </fieldset>
  </div>
  </div>

        <div class="row buttons" style="margin-left:580px">
            <?php echo CHtml::submitButton($model->isNewRecord ? 'Save' : 'Save'); ?>
        </div>

<?php $this->endWidget(); ?>

</div><!-- form --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:15:28.843

你可以用 javascript 和 jquery 做这种事情，看看它是如何工作的：[http://www.w3schools.com/jquery/](http://www.w3schools.com/jquery/)，[http://www.w3schools.com/js/](http://www.w3schools.com/js/)，[http:// /api.jquery.com/](http://api.jquery.com/)

了解 javascript 需要一些工作，但你可以用它构建强大的东西。

在你的情况下，它可能是这样的：

```
<html>
    <head>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>
    <body>
        <form id="myForm">
            <input id="Labour" type="text"/> <label>Labour</label> <br/>
            <input id="Machinery" type="text"/> <label>Machinery</label> <br/>
            <input id="Material" type="text"/> <label>Material</label><br/>
            <input id="Site" type="text"/> <label>Site Over Head</label><br/>
            <input id="HeadOffice" type="text"/> <label>Head Office Over Head</label><br/>
            <input id="Profit" type="text"/> <label>Profit</label><br/>
            <input type="submit">  <br/>
        </form>

        <script type="text/javascript">
            $("#myForm input").each(function(){
                $(this).keyup(function(){
                    var labour = $("#Labour").val();
                    var Machinery = $("#Machinery").val();
                    var Material = $("#Material").val();
                    var SiteOverHead = $("#Site").val();
                    var HeadOfficeOverHead = $("#HeadOffice").val();
                    labour = $.isNumeric(labour)?labour:0;
                    Machinery = $.isNumeric(Machinery)?Machinery:0;
                    Material = $.isNumeric(Material)?Material:0;
                    SiteOverHead = $.isNumeric(SiteOverHead)?SiteOverHead:0;
                    HeadOfficeOverHead = $.isNumeric(HeadOfficeOverHead)?HeadOfficeOverHead:0;
                    $("#Profit").val(parseInt(labour)+parseInt(Machinery)+parseInt(Material)+parseInt(SiteOverHead)+parseInt(HeadOfficeOverHead));
                });
            });
        </script>
    </body>
</html> 
```

祝你好运。

# asp.net - asp.net sql 用于“前 10 名按前 10 名中的项目升序排列”

> ID：15652011
> 
> 赞同：0
> 
> 时间：2013-03-27T04:39:37.857
> 
> 标签：asp.net, sqlcommand

我需要使用一个使用 ASP.NET 的数据库，并获取前 10 项并在前 10 名中按升序对它们进行排序。我使用了以下组合，但没有让它们工作：

TOP 10 [rows] LIMIT（不支持） ORDER BY [rows] ASC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:49:06.440

你可以做这样的事情（这里可能不是 100%，我面前没有 SQL），但我不建议不要在内部选择上指定某种 order by，就好像底层聚集索引发生了变化一样那会改变你的结果。

```
select *
from 
(select top 10 *
from mytable) as x
order by x.mycolumn asc 
```

# php - 你如何在页面上找到带有ajax返回的元素

> ID：15652012
> 
> 赞同：0
> 
> 时间：2013-03-27T04:39:43.710
> 
> 标签：php, ajax

html:

```
 <ul>
 <li>Automobile</li>
 <li>Jet</li>
 <li>Ferry</li>
 <li>Subway</li>
 </ul> 
```

这是我找到 li 然后将 user_input 添加到 li 的函数

```
 $this->load->library('simple_html_dom');

    $html = file_get_html("http://localhost/marketeer/Exercise/pa/4");

    $oldlist = array();

    foreach($html->find('li') as $list){
        array_push($oldlist ,strip_tags($list));
    }

            $newlist = explode(",",$user_input[0]);
    //merge array in $newlist
    $oldlist = array_merge($oldlist,$newlist);

            foreach($oldlist as $li){
        echo "<li>" . $li . "</li>";
    } 
```

第一次打电话没关系，它添加了

```
 <ul>
 <li>Automobile</li>
 <li>Jet</li>
 <li>Ferry</li>
 <li>Subway</li>
 <li>new1</li>
 </ul> 
```

然后当我输入另一个时`<li>new2</li>`，它替换为

```
 <ul>
 <li>Automobile</li>
 <li>Jet</li>
 <li>Ferry</li>
 <li>Subway</li>
 <li>new2</li>
 </ul> 
```

这就像我调用一个没有新附加值的静态页面。顺便说一句，我使用 ajax 返回函数。

# javascript - 如果其中一个未注释，为什么两个函数都不会被调用？

> ID：15652023
> 
> 赞同：0
> 
> 时间：2013-03-27T04:40:52.637
> 
> 标签：javascript, html, function

我有一个外部 javascript 文件，它有两个函数，每次页面加载时都应该调用它们。但是，两者都没有。如果我注释掉js文件中调用tester()函数的那一行，那么runGame()就会被调用，但是如果tester()没有被注释，那么都不运行。但是，如果我将 tester() 函数调用放在 runGame() 调用之后，那么 runGame() 可以工作，但 tester() 仍然无法工作。

tester() 甚至不会自行运行，因此我在该函数中可能做错了什么。谁能告诉我我做错了什么？

html

```
<html>
<head>
    <script type="text/javascript" src="rock_paper_scissors.js">

    </script>

</head>

<body>
    <p id="game">Test</p>
    <br />
    <input type="button" value="Play again" onClick="tester()"></input>
</body> 
```

rock_paper_scissors.js

```
var info = document.getElementById("game");

var tester = function(){
    document.getElementById('game').innerHTML = 'hello';
    //info.innerHTML("HI");
};

var compare = function(choice1, choice2){
    if(choice1 == choice2)
        document.write("The result is a tie!");
    else if(choice1 == "rock"){
        if(choice2 == "scissors")
            document.write("You win! Rock wins");
        else
            document.write("The computer wins! Paper wins");
    }
    else if(choice1 == "paper"){
        if(choice2 == "rock")
            document.write("You win! Paper wins");
        else
            document.write("The computer wins! Scissors wins");
    }
    else if(choice1 == "scissors"){
        if(choice2 == "rock")
            document.write("The computer wins! Rock wins");
        else
            document.write("You win! Scissors wins");
    }
    else
        document.write("You didn't pick a real choice");
};

var runGame = function(){

    var userChoice = prompt("Do you choose rock, paper or scissors?");
    var computerChoice = Math.random();
    if (computerChoice < 0.34) {
        computerChoice = "rock";
    } else if(computerChoice <= 0.67) {
        computerChoice = "paper";
    } else {
        computerChoice = "scissors";
    }

    document.write("<p>You picked " + userChoice + "</p>");
    document.write("<p>The Computer picked " + computerChoice + "</p>");
    compare(userChoice, computerChoice);
};

runGame();
tester(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T04:44:07.407

您确定 ID 为“游戏”的元素存在吗？[编辑：只是更好地查看了您的代码-您的脚本在 HEAD 中，这意味着它在`game`加载之前正在执行，因此它肯定不存在。] 如果不存在，`info`is`null`和访问`innerHtml`会`null`破坏您的代码。检查 JavaScript 控制台以查看错误。

您必须将代码移动到`game`元素下方（它和正文末尾之间的任何位置都可以，通常在`body`结束标记之前），或者从正文的事件处理程序运行您的代码，或者使用提供事件`load`的库（如 jQuery）`ready`.

第一行（不使用的那一行`info`）*不会*破坏您的代码的原因是您`game`在运行时正在查找元素`tester`（这将比文档完全加载要晚得多），而不是在脚本标记时找到（如您所见，这不起作用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:44:20.300

一件好事总是要做：检查 javascript 控制台。

在加载之前，您不能修改 DOM。将`<script...>`标签移到`</body>`.

# c++ - 使用 C++ 在 RHEL 6 linux 上使用 pcsc-lite 检测/与读卡器通信的问题

> ID：15652027
> 
> 赞同：2
> 
> 时间：2013-03-27T04:41:10.360
> 
> 标签：c++, smartcard, smartcard-reader, pcsc, rhel6

我正在尝试开发一个与智能卡阅读器接口并从智能卡读取信息的应用程序。

让我给你开发环境和使用的硬件。
操作系统：Red Hat Enterprise Linux 6
IDE：Eclipse Juno CDT
语言：C/C++

*硬件：*
智能卡读卡器：Omnikey 5321 ( [https://www.hidglobal.com/products/readers/omnikey/5321](https://www.hidglobal.com/products/readers/omnikey/5321) )
我已经安装了驱动，可以找到以下目录/文件：

/usr/lib64/pcsc/drivers/ifd-ccid.bundle
/usr/lib64/pcsc/drivers/ifdokrfid_lnx_x64-2.10.0.1.bundle/Contents
/usr/lib64/pcsc/drivers/ifdokrfid_lnx_x64-2.10.0.1.bundle/Contents /info.plist
/usr/lib64/pcsc/drivers/ifdokrfid_lnx_x64-2.10.0.1.bundle/Contents/Linux

info.plist 的内容清楚地显示了“ifdFriendlyName”键下的“OMNIKEY CardMan 5x21”字符串。

我想使用 PC/SC 标准。因此，我已经下载并安装了 PCSC-lite，并检查了守护程序 (pcscd) 是否正在运行并且服务状态正常。

***现在到了有趣的部分……***
在我的代码中，我按顺序使用了以下 API。

```
 SCARDCONTEXT oSCardContext;
SCardEstablishContext(SCARD_SCOPE_SYSTEM, NULL, NULL, & SCardContext); 
```

SCardEstablishContext() 返回 SCARD_S_SUCCESS。伟大的！

```
 SCARDCONTEXT oSCardContext;
DWORD dwReaders = SCARD_AUTOALLOCATE;
LPSTR mszReaders;
SCardListReaders(oSCardContext, NULL, (LPSTR) & mszReaders, & dwReaders); 
```

SCardListReaders() 返回 SCARD_E_NO_READERS_AVAILABLE。不好。

在这一点上，我去检查阅读器是否正确连接。是的。我验证是否可以在 /etc/reader.conf 中看到任何阅读器条目，但我发现此处没有列出任何阅读器。然后我去 /etc/reader.conf.d 但在这里也找不到文件。所以智能卡上下文是空的，我想，因此没有列出读者。

***所以现在的问题是 pcsc-lite 无法检测到（？）我连接的阅读器以及安装了哪个驱动程序？***

只是为了检查一下，我使用 udev 库编写了一个简单的程序来读取所有“usb”子系统条目，并且能够从 udev 中找到有关连接的读卡器的以下信息：
**设备节点路径：（空）**
**供应商 ID：076b**
**产品 ID :5321**
**制造商:OMNIKEY**
**产品:智能卡读卡器 USB**
**串口:(null)**

***所以确定设备是可检测的。但是为什么 PC/SC 资源管理器不能创建这个上下文呢？***

**那么，我该如何解决呢？**

我是 Linux 新手，并且一直在尝试自己解决这个问题而不寻求帮助。但是后来我发现，当有时间限制时，最好向专家和曾经工作和/或遇到过此类问题的人寻求帮助确实是明智的。

我一直在谷歌上搜索太多，但没有看到任何有我的问题。所以我想我可能错过了一些非常基本的东西。

如果有什么我需要提供的，请告诉我。我会尽快这样做。

感谢您抽出宝贵时间阅读。

问候。

**编辑：**
我有更新...

我做了以下事情：
1\. 我得到了一个新的读卡器（SCM Microsystems），但仍然没有检测到它。
2\. pcscd 守护程序默认在引导时启动。我登录后停止了服务，然后使用命令“pcscd -a -f -d”在前台模式下运行，成功检测到 SCM 阅读器。
3\. 我尝试在上面的问题中插入阅读器 OMNIKIEY 5321，但未检测到。

显然，我得出了以下结论：
1.由于某种原因，直到我登录后手动停止pcscd并以前台模式运行，没有检测到阅读器。
2\. OMNIKEY 读卡器/驱动有问题。

问候。

# plugins - GStreamer - 示例插件

> ID：15652035
> 
> 赞同：1
> 
> 时间：2013-03-27T04:41:56.967
> 
> 标签：plugins, gstreamer

我是 gstreamer 的新手，正在尝试开发一个用于字幕解码的示例插件。

我已经下载了 gStreamer 插件模板：基于[此](http://siilo.dyndns.org/wiki/index.php/Creating_a_Plugin_template)信息。

当我从命令行启动插件时，它工作正常。

我编写了一个示例应用程序来验证插件。**但是现在，我在将管道状态设置为 PLAYING 时遇到了问题**。下面是代码片段

任何输入都会有很大帮助。

在此先感谢，克兰蒂

* * *

```
gst_init(NULL, NULL);

loop = g_main_loop_new (NULL, TRUE);

g_print("\n Gstreamer is Initialized and Created the loop ");

pipeline = gst_pipeline_new ("pipeline");

source = gst_element_factory_make ("filesrc", "source");

filter = gst_element_factory_make ("myfilter", "testfilter");

sink = gst_element_factory_make ("fakesink", "sink");

if((NULL != pipeline) && (NULL != source) && (NULL != filter) && (NULL != sink))
{
    g_print("\n Successfully created the factory elements ");

    g_object_set(G_OBJECT (source), "location", fileName, NULL);
    g_print("\n Set the file name \n");

    g_object_set(G_OBJECT (filter), "silent", 1, NULL);
    g_print("\n Set the silent type \n");

    /* we add a message handler */
    bus = gst_pipeline_get_bus (GST_PIPELINE (pipeline));
    bus_watch_id = gst_bus_add_watch (bus, bus_call, loop);
    gst_object_unref (bus);
    g_print("\n Created bus and a monitor to watch it");

    gst_bin_add_many(GST_BIN(pipeline), source, filter, sink, NULL);
    gst_element_link_many(source, filter, sink);
    g_print("\n Added and Linked the factory elements");

    g_signal_connect (filter, "pad-added", G_CALLBACK (on_pad_added), filter);

    g_print ("Now reading: %s\n", "test.txt");
    g_print ("Setting the pipeline state to PLAYING ");
    ret = gst_element_set_state (pipeline, GST_STATE_PLAYING);
    if(ret == GST_STATE_CHANGE_FAILURE)
    {
        g_print("\n Failure in setting pipeline state to PLAYING \n");
    }

    else
    {
        g_print("\n Successfully set the pipeline state to playing \n");
    }
}

else
{
    g_print("\n Failure in creating factory elements");
} 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:19:07.140

在尝试了一些关于 gstreamer 元素的示例后，发现了问题。

除了 filesrc、filter、fakesink:: 如果我也将 'decoder' 元素添加到管道中，那么我可以将状态更改为 PLAYING

但是为什么需要这样做-我仍在尝试弄清楚

有时，用于创建管道的名称也会引起问题：最好使用一些唯一的名称而不是 gst_pipeline_new ("**管道**") 中的管道；

# android - 如何获得 Intellij 预览以显示我的自定义视图

> ID：15652038
> 
> 赞同：3
> 
> 时间：2013-03-27T04:42:05.473
> 
> 标签：android, layout, intellij-idea

如何获得 Intellij 的预览以显示我的自定义视图？我有一个非常简单的类覆盖 TextView：

```
public class TouchableTextView extends TextView {
    int width;
    int height;
    int status;
    public TouchableTextView(android.content.Context context, String text) {
        super(context);
        setTypeface(Typeface.SERIF);
        setText(text);
        setTextSize(getResources().getDimension(R.dimen.big_text_size));
        setTextColor(getResources().getColor(R.color.text_dark));
        this.measure(0, 0);
        width = this.getMeasuredWidth();
        height = this.getMeasuredHeight();

    }
} 
```

我当然可以在这方面使用一些帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T11:56:19.387

您必须重载 View 类的构造函数之一。例如，您可以提供`TouchableTextView(Context context, AttributeSet attrs)`. IDE 无法使用包含自定义“文本”参数的构造函数来实例化您的视图。

# c# - 保存到媒体库 Windows 手机时提高 JPG 屏幕截图质量

> ID：15652041
> 
> 赞同：1
> 
> 时间：2013-03-27T04:42:37.530
> 
> 标签：c#, windows-phone-8, screenshot, media

我正在使用以下代码截取我的应用程序的屏幕截图。然而，即使质量设置为 100，最终的屏幕截图仍然看起来很模糊。关于如何提高图像质量的任何建议。

```
 public static void SaveJPGToLib(FrameworkElement element)
    {
        WriteableBitmap bmpCurrentScreenImage = new WriteableBitmap((int)element.ActualWidth, (int)element.ActualHeight);
        bmpCurrentScreenImage.Render(element, new MatrixTransform());
        bmpCurrentScreenImage.Invalidate();

        using (var stream = new MemoryStream())
        {
            // Save the picture to the Windows Phone media library.
            bmpCurrentScreenImage.SaveJpeg(stream, bmpCurrentScreenImage.PixelWidth, bmpCurrentScreenImage.PixelHeight, 0, 100);
            stream.Seek(0, SeekOrigin.Begin);

            string filename = "screenshots\\" + DateTime.Now.Ticks.ToString(CultureInfo.InvariantCulture) + ".jpg";
            new MediaLibrary().SavePicture(filename, stream);
        }

        MessageBox.Show("Saved in your media library!", "Done", MessageBoxButton.OK);
    } 
```

请注意原始屏幕截图和生成的屏幕截图之间的差异。

原装品质

![原来的](../Images/77244a279a8f71842430e553995e895b.png)

截屏

![通过代码截取的屏幕截图](../Images/74caccbcd7561131e09224ce00532cc5.png)

# design-patterns - Composite（来自 Composite Pattern）可以有一个 isLeaf() 方法吗？

> ID：15652058
> 
> 赞同：1
> 
> 时间：2013-03-27T04:44:30.297
> 
> 标签：design-patterns, language-agnostic, composite

*复合材料*不应该有一个`isLeaf()`方法是有原因的吗？

（因为这种模式的重点是（如果我没记错的话）能够同时使用*Leaf*和*Composite*作为同一个东西，而不区分？）

或者，如果我仍然可以像使用它们一样使用它们，是否完全可以，**但**如果我愿意，还可以找出哪个是哪个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:17:29.207

关于 Composite 争论的问题之一是如何处理叶类中的 getChildren()。如果您正在使用接口，则可以将其放在共享接口中，然后在叶类中抛出 UnsupportedOperationException。

您还可以使用访问者对不同的节点类型进行不同的处理，因此以文件夹/文件组合为核心的经典文件系统，您可以使用访问者来轻松为不同类型提供特殊操作（或只处理特定类型）。

你有如何使用它的计划吗？也许具体案例将是一种更好的方式来确定该方法的价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:10:34.657

我的理解也是，这种模式的本质是在迭代项目时，您不需要知道您引用的实际类型。但是，我使用了该模式并尝试将其转换为特定类型，这实际上与区分 isLeaf 相同。这显然贬低了多态性并违反了 OCP，但是它在那种情况下工作得很好。

我将设计模式视为扶手，而不是手铐。

# c - 我如何设计一个循环播放声音但不阻塞其余程序的循环？

> ID：15652059
> 
> 赞同：0
> 
> 时间：2013-03-27T04:44:33.640
> 
> 标签：c, block, playsound

我有一个声音字节，我想在用户看到一组案例语句时连续循环。因此，一旦触发了同时具有 case 语句和播放声音循环的 while 语句，我希望声音循环继续播放，同时不阻止用户与每个 case 语句交互的能力。

基本上在这一点上我发生了两件事

1：playsound 中的阻塞循环阻止 case 语句出现或启动

2：playsound 仅在用户按下一个键时触发...我不想等待用户的键盘命令，我希望它连续播放

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:05:55.880

好的，我可以将 SND_LOOP 添加到我的 playsound 函数的末尾，谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:47:55.633

您总是可以派生一个孩子，在父代码中播放声音，然后 wait() 让孩子（包含案例语句）终止。

# android - 写入android后文件不可见

> ID：15652060
> 
> 赞同：0
> 
> 时间：2013-03-27T04:44:44.690
> 
> 标签：android, file-io, fileoutputstream

我正在尝试将一些 json 数据写入文件，下面是我尝试过的。

```
JSONObject obj = new JSONObject();
    try {
        obj.put("name", "mkyong.com");
    } catch (JSONException e2) {
        e2.printStackTrace();
    }
    try {
        obj.put("age", new Integer(100));
    } catch (JSONException e2) {
        e2.printStackTrace();
    }
    ArrayList list = new ArrayList();
    list.add("msg 1");
    list.add("msg 2");
    list.add("msg 3");

    try {
        obj.put("messages", list);
    } catch (JSONException e1) {
        e1.printStackTrace();
    }
    FileOutputStream fs;
    String filename = "Sample.json";
    try {
        fs = openFileOutput(filename, Context.MODE_APPEND);
        fs.write(obj.toString().getBytes());
        fs.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

虽然我没有收到任何错误，但创建的文件不可见。我是否必须阅读它以验证其是否正确写入？如果我能在 src 文件夹中看到创建的文件，那将有很大帮助，因为我写了很多东西，很容易验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:11:19.013

尝试改变

```
String filename = "Sample.txt"; 
```

代替

```
String filename = "Sample.json"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:01:01.003

可能很蹩脚，但我们可以在 DDMS 透视图中找到文件，然后拉出标签将可见！！从那里，我们可以将其拉出并从本地计算机上查看！！

# android - ListView 不显示 android sqlite 项目

> ID：15652061
> 
> 赞同：0
> 
> 时间：2013-03-27T04:44:54.393
> 
> 标签：android, sqlite, listview

我在使用 ListView 显示 sqlite 数据库中的数据项时遇到问题。当我尝试单击按钮后查看数据时，它显示：

> com.LocationReminder 和 Task@4053afb0

有点奇怪。

这是我的 readReminder.java

```
import java.util.ArrayList;
import android.app.ListActivity;
import android.os.Bundle;
import android.widget.ArrayAdapter;

public class readReminder extends ListActivity {
private DBReminder operasiDB;
private ArrayList<Task> daftarTugas;

 @Override
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.read_task);
     operasiDB = new DBReminder(this);

     daftarTugas = operasiDB.viewAllTask();
     ArrayAdapter<Task> adapter = new ArrayAdapter<Task>(this,
         android.R.layout.simple_list_item_1, daftarTugas);

     setListAdapter(adapter);
 }
} 
```

这是我显示数据库中所有数据的代码

```
public ArrayList<Task> viewAllTask() {
    openConn();
    ArrayList<Task> tugas = new ArrayList<Task>();
    Cursor curs = db.rawQuery("select * from " + TableName, null);
    if (curs.moveToFirst()) {
        do {
            Task task = new Task();
            task.setId(Integer.parseInt(curs.getString(curs.getColumnIndex(ID))));
    task.setLatitude(Integer.parseInt(curs.getString(curs.getColumnIndex(LATITUDE))));               
task.setLongitude(Integer.parseInt(curs.getString(curs.getColumnIndex(LONGITUDE)));
task.setRadius(Integer.parseInt(curs.getString(curs.getColumnIndex(RADIUS))));
task.setAlamat(curs.getString(curs.getColumnIndex(ALAMAT)));
task.setKonteks(curs.getString(curs.getColumnIndex(KONTEKS_TUGAS)));
tugas.add(task);
        } while (curs.moveToNext());
    }
    closeConn();
    return tugas;
} 
```

在 SQLite Manager Eclipse 中，数据也与表一起出现。请帮我。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:54:11.860

`Adapter`您必须通过扩展`ArrayAdapter`类来创建自己的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:55:44.753

如果要在列表视图中显示多个列，请使用 SimpleCursorAdapter

```
public Cursor viewAllTask() {
//openConn(); open your database in the activity onCreate

return db.rawQuery("select * from " + TableName, null);

//closeConn(); // close your database in the activity onDestroy
} 
```

更改`private ArrayList<Task> daftarTugas;` 为`Cursor daftarTugas;`

```
 @Override
 public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.read_task);
 operasiDB = new DBReminder(this);
 operasiDB.open();

 Cursor daftarTugas = operasiDB.viewAllTask();
 String[] fromColumns = {DBReminder.RADIUS, 
                         DBReminder.ALAMAT,
                         DBReminder.KEY_KONTEKS_TUGAS};
int[] toViews = {R.id.textview_radius, 
                 R.id.textview_alamat,
                 R.id.textview_konteks_tugas};
SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, 
                            R.layout.listview_items,
                            daftarTugas, fromColumns, toViews, 0);
        setListAdapter(adapter);
 } 
```

布局 XML 名称 listview_items

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<TextView
    android:id="@+id/textview_radius"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

<TextView 
    android:id="@+id/textview_alamat"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

<TextView 
    android:id="@+id/textview_konteks_tugas"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T06:46:33.487

默认情况下，ArrayAdaptor 类期望提供的资源 id 引用单个 TextView。您需要自定义它。

简单易用的使用 simplecursoradoptor 的方法。

# google-maps - 地理编码谷歌地图错误的位置

> ID：15652067
> 
> 赞同：1
> 
> 时间：2013-03-27T04:45:28.823
> 
> 标签：google-maps

我正在尝试在简单地图示例（[http://gmaps-samples.googlecode.com/svn/trunk/geocoder/singlegeocode.html](http://gmaps-samples.googlecode.com/svn/trunk/geocoder/singlegeocode.html)）中的位置（-23.426056，-47.599556）中放置一个标记，并且标记从不留在正确的地方。在谷歌地图中，​​我总是得到两个标记，一个红色的（标记街道）和一个绿色的（标记正确位置的箭头），就像这张照片[http://s4.postimg.org/6ahyt0rm5/ibagen .gif](http://s4.postimg.org/6ahyt0rm5/ibagen.gif)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:03:17.200

如果您知道标记所属的位置（坐标），请不要使用地理编码器，只需将标记放在您想要的位置即可。与[Google Maps API v3 文档中的此示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/marker-simple)类似 请注意，您发布的示例使用的是 Google Maps API v2，该示例已于 2010 年 5 月 19 日弃用；并于 2013 年 5 月 19 日终止使用。不鼓励使用该版本进行新开发。

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Google Maps JavaScript API v3 Example: Marker Simple</title>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script>
      function initialize() {
        var myLatlng = new google.maps.LatLng(-23.426056, -47.599556);
        var mapOptions = {
          zoom: 4,
          center: myLatlng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

        var marker = new google.maps.Marker({
            position: myLatlng,
            map: map,
            title: 'Hello World!'
        });
      }
    </script>
  </head>
  <body onload="initialize()">
    <div id="map-canvas" style="height:400px; width:500px;"></div>
  </body>
</html> 
```

# java - “像一个％”。如何在应用引擎上写这个？

> ID：15652070
> 
> 赞同：2
> 
> 时间：2013-03-27T04:45:34.393
> 
> 标签：java, google-app-engine

我正在使用带有应用程序引擎的java。SQL查询：

> select * from Person where name LIKE "a%"

如何在 Google App Engine 上编写它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:09:00.807

假设您正在查询 App Engine 数据存储区中的实体，在 Java 中您将重写`LIKE "a%"`为类似

```
Query query = new Query("Person")
  .addFilter("name", QueryFilterOperater.GREATER_THAN_OR_EQUAL, "a")
  .addFilter("name", QueryFilterOperator.LESS_THAN, "b"); 
```

剩下的留作练习。请参阅[https://developers.google.com/appengine/docs/java/datastore/queries](https://developers.google.com/appengine/docs/java/datastore/queries)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T06:12:01.603

Appengine 的数据存储中不支持 LIKE 运算符。

两种解决方案：

*   如果您想保留类似 SQL 的查询，请使用 Google Cloud SQL
*   对数据存储中的实体使用[全文搜索](https://developers.google.com/appengine/docs/java/search/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T06:29:45.490

要执行此类查询，您必须使用[Google Cloud SQL](https://developers.google.com/appengine/docs/python/cloud-sql/developers-guide)。

如果您使用的是 Datastore，那么它不支持全文搜索。您必须手动创建所有可能的名称变体并使用它们来查询实体。您可以将它们存储在特殊实体的多值字段中（它可能很昂贵）或使用完全适合此目的的特殊[搜索 API](https://developers.google.com/appengine/docs/java/search/)（搜索不支持子字符串匹配，因此您必须使用相同的变体）。

使用 Search API 的两个词是：

1.  列表项在 Datastore 中创建 Person 实体，其中包含一些`name`

2.  在名为 的搜索索引中创建相应的文档`Persons`，其中包含字段`possible_names`和`entity_id`（您也可以使用 Document.doc_id 来存储实体的 id）。在`possible_names`您存储所有有用的名称变体除以空格。

3.  查询`Persons`索引以查找字段`possible_names`与您的搜索字符串匹配的所有文档。

4.  使用字段`entity_id`表单结果的文档按 id 从数据存储中检索实体。

[这](https://stackoverflow.com/questions/10960384/google-app-engine-python-search-api-string-search)是一个小例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T04:47:24.877

你在找这个吗 `"select * from Person where name LIKE \"a%\""`

# php - mysql 数据库中显示值为 0 的单选按钮

> ID：15652073
> 
> 赞同：2
> 
> 时间：2013-03-27T04:45:46.617
> 
> 标签：php, mysql

我的单选按钮的值为“1”、“2”、“3”，我的数据库设置为接收作为 INT 的值。但是，当提交表单时，它们会在每个字段中作为零进入数据库。这是[JS 小提琴](http://jsfiddle.net/VSwL8/)

```
<p><input type="radio"  name="buttons"  value="1">A-Flat 
```

// 我已经连接了我的数据库

```
// variables
$frets =  $_POST["fret"]; 
$fonts =  $_POST["fonts"]; 
$buttons =  $_POST["buttons"];

// if else to display the results
if(isset($_POST['submit'])) {

    // mysql

    $query = "INSERT INTO $tbl_name (frets, fonts, buttons) VALUES ('$frets','$fonts','$buttons') ";
mysql_query ($query);

mysql_close();  

    // stuff
    echo '<h1>Thanks!!</h1>','<p>',"I lied about the prize. Here is a funny video to make up for it.",'</p>','<br />',
        '<iframe width="560" height="315" src="http://www.youtube.com/embed/3-HCs4tRw8o" frameborder="0" allowfullscreen></iframe>';
}

 else {

    // page header
    echo '<h1>', "You broke it!",'</h1> ';

    // message
    echo '<h3 style=text-align:center;>',"Silly Rabbit! Make sure you fill out all the fields!", "<br>",
             "<a href=usertesting.php>Try again.</a>",'</h3>';
 }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:48:52.720

1.echo 的值`$buttons`，即`echo $buttons;`看看那里有什么。

2.将查询更改为：

```
$query = "INSERT INTO $tbl_name (frets, fonts, buttons) VALUES ('".$frets."','".$fonts."','".$buttons."') ";
mysql_query ($query); 
```

3.还要检查`buttons`数据库中的数据类型

您的查询容易出现 sql 注入，请确保其安全。

mysql_* 函数不推荐使用 mysqli_* 函数或 PDO

# c# - 在按钮的 PostBackUrl 属性上，仅将特定控件而不是所有控件发送到目标页面的上一页

> ID：15652074
> 
> 赞同：0
> 
> 时间：2013-03-27T04:45:52.160
> 
> 标签：c#, asp.net, ajax, jquery

问题很简单，当我们从源页面使用 PostBackUrl 属性并转到目标页面时，在目标页面上，我们可以使用 PreviousPage 属性访问目标页面上源页面的所有控件。

我的问题是：是否可以只发送特定控件而不是从源页面到目标页面的所有控件。核心目的是优化。我的源页面有 300 多个控件。我只想将一个特定控件而不是所有这 300 个控件发送到目标页面，这可能吗？提前谢谢。任何帮助表示赞赏。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:27:04.640

你在使用 Ajax 吗？

我认为你应该在谷歌上搜索 Viewstate、Partial PostBacks 和 UpdatePanels。

也请看这里：[什么是部分回发？](https://stackoverflow.com/questions/1238651/what-is-a-partial-postback)

# iphone - iPhone免费手绘图像并保存高质量的编辑图像

> ID：15652078
> 
> 赞同：0
> 
> 时间：2013-03-27T04:46:18.250
> 
> 标签：iphone, uiview, uiimageview, drawing

我能够成功地利用`UIView`例如`drawScreen`

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
```

我已经添加了我`UIImageView`作为上面的子视图，`UIView`例如`drawScreen`，这样看起来你正在绘制图像。

现在我想用绘图保存图像，我也使用了这部分

```
UIGraphicsBeginImageContext(CGSizeMake(drawScreen.frame.size.width, drawScreen.frame.size.height)); 
```

问题：
问题是生成的保存图像尺寸过大`drawScreen`，而我的原始图像质量很好。例如，

大小`drawScreen`为 300x300

我的原始图像的大小是 640x640

结果图像的大小也是 300x300。

如何通过编辑保存原始大小的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:40:58.507

首先简单地替换`drawScreen.frame.size.width`原始`drawScreen.frame.size.height`图像的大小。

首先，您需要创建一个`UIView`与图像大小相同的新实例（并将图像添加到其中）。然后，您将需要缩放并重新绘制您的艺术作品。根据您存储图像的方式，您需要将坐标乘以计算出的因子，或者渲染一些东西然后放大它。无论哪种方式，您都会将放大的图形作为子视图添加到新的`UIView`. 然后使用`UIGraphicsGetCurrentImageContext`.

您将需要阅读[此文档](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_context/dq_context.html#//apple_ref/doc/uid/TP30001066-CH203-SW9)。

此外，您可能会发现[这个问题](https://stackoverflow.com/questions/4475397/convert-uiwebview-contents-to-a-uiimage-when-the-webview-is-larger-than-the-scre)有些帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:32:24.733

我可以使用编辑保存原始大小的图像`UIScrollView`。我已禁用单指滚动，`UIScrollView`仅允许两根手指滚动并使用单指绘制图像。我使用以下代码保存原始大小的图像

```
UIGraphicsBeginImageContext(self.scrollView.contentSize);
 {
     CGPoint savedContentOffset = self.scrollView.contentOffset;
     CGRect savedFrame = self.scrollView.frame;

     self.scrollView.contentOffset = CGPointZero;
     self.scrollView.frame = CGRectMake(0, 0, self.scrollView.contentSize.width, self.scrollView.contentSize.height);

     [self.scrollView.layer renderInContext: UIGraphicsGetCurrentContext()];
     UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
     UIImageWriteToSavedPhotosAlbum(viewImage, nil, nil, nil);
     self.scrollView.contentOffset = savedContentOffset;
     self.scrollView.frame = savedFrame;
 }
 UIGraphicsEndImageContext(); 
```

# ios - 如何在 ios 5.0 以下使用 http://upload.twitter.com/1/statuses/update_with_media 将图像发布到 Twitter

> ID：15652079
> 
> 赞同：0
> 
> 时间：2013-03-27T04:46:21.290
> 
> 标签：ios, objective-c, twitter, twitter-oauth, mgtwitterengine

我正在尝试通过使用新的 api statuses/update_with_media 在 Twitter 上共享图像。然后我从 dev.twitter.com/discussion 页面搜索并获得了以下代码。这里的代码如下。

在此处输入代码

```
- (NSString *) _uploadImage:(UIImage *)image requestType:(MGTwitterRequestType)requestType responseType:(MGTwitterResponseType)responseType
{

    NSString *boundary = @"----------------------------991990ee82f7";

    NSURL *finalURL = [NSURL URLWithString:@"http://upload.twitter.com/1/statuses/update_with_media.json"];
    if (!finalURL) 
    {
        return nil;
    }

    NSLog(@"-> Open Connection: %@", finalURL);

    OAMutableURLRequest *theRequest = [[OAMutableURLRequest alloc] initWithURL:finalURL
                                                                      consumer:self.consumer
                                                                         token:_accessToken 
                                                                         realm: nil
                                                             signatureProvider:nil];

    [theRequest setHTTPMethod:@"POST"];
    [theRequest setHTTPShouldHandleCookies:NO];

    // Set headers for client information, for tracking purposes at Twitter.
    [theRequest setValue:_clientName    forHTTPHeaderField:@"X-Twitter-Client"];
    [theRequest setValue:_clientVersion forHTTPHeaderField:@"X-Twitter-Client-Version"];
    [theRequest setValue:_clientURL     forHTTPHeaderField:@"X-Twitter-Client-URL"];

    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
    [theRequest setValue:contentType forHTTPHeaderField:@"content-type"];

    NSMutableData *body = [NSMutableData dataWithLength:0];
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    [body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"media_data[]\"; filename=\"1.jpg\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];  
    [body appendData:[[NSString stringWithString:[UIImageJPEGRepresentation(image, 1.0) base64EncodingWithLineLength:0]] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"status\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Honeymoon uploads image\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    // --------------------------------------------------------------------------------
    // modificaiton from the base clase
    // our version "prepares" the oauth url request
    // --------------------------------------------------------------------------------
    [theRequest prepare];

    [theRequest setHTTPBody:body];

    // Create a connection using this request, with the default timeout and caching policy, 
    // and appropriate Twitter request and response types for parsing and error reporting.
    MGTwitterHTTPURLConnection *connection;
    connection = [[MGTwitterHTTPURLConnection alloc] initWithRequest:theRequest 
                                                            delegate:self 
                                                         requestType:requestType 
                                                        responseType:responseType];

    if (!connection) 
    {
        return nil;
    } 
    else 
    {
        [_connections setObject:connection forKey:[connection identifier]];
        //[connection release];
    }

    return [connection identifier];  
} 
```

然后我在 SA_OAuthtwitterengine 中实现了这段代码，因为我使用 oauth 方法将文本或图像发布到 twitter，因为我的应用程序部署目标是从 3.0（ios，ipod）开始，所以我尝试使用这种方法。

现在我的问题是如何创建代码以通过消息将图像发送到 twitter。

我尝试使用以下类型将图像发送到 Twitter

```
[_engine sendupdate:@"http://www.prepare-community.com/ShareFiles/index-fr.jpg"]; 
```

我收到连接错误，这意味着 401 错误。

你能告诉我如何使用上面的代码将图像发送到 twitter 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:59:05.200

这是使用新的 twitter api update_with_media 上传图片的解决方案。使用此 API，您可以将图像直接上传到 Twitter 帐户。上面的 _uploadimage 代码应该首先放在 SA_OAuthtwitter 引擎 .m 文件中，然后在 .h 文件中贴花。

并做一个小正确，即放置 filenamed=1.jpg 而不是 1.png。

现在只需将下面的代码放在 MGTwitterengine.m 类中。这里的代码如下

```
 - (NSString *)_uploadImage:(UIImage *)image withStatus:(NSString *)status
{
     return [self _uploadImage:image withStatus:status requestType:MGTwitterImageRequest responseType:MGTwitterStatuses];
} 
```

然后我们使用此代码将图像上传到 Twitter。那是，

[_engine _uploadImage:yourpicture withStatus:yourstatus];

希望它对你有用....

# google-chrome-extension - 似乎无法将 CSS 注入 YouTube？

> ID：15652080
> 
> 赞同：3
> 
> 时间：2013-03-27T04:46:29.507
> 
> 标签：google-chrome-extension

我正在尝试将 JS 和 CSS 注入 YouTube 页面。我可以注入 JS，但在注入 CSS 时看不到任何效果。我做错了什么还是 YouTube 以某种方式限制了我？

这是我的 manifest.json 的相关部分：

```
 "content_scripts": [
    {
      "matches": ["http://www.youtube.com/watch?v*"],
      "css": ["ChromeExtension/css/inject.css"],
      "js": ["ChromeExtension/js/thirdParty/underscore.js", "ChromeExtension/js/thirdParty/jquery.js", "ChromeExtension/js/inject.js"]
    }
  ] 
```

我看到所有的 js 都正确注入了，但对 css 没有影响。我的 CSS 似乎根本没有注入：

![在此处输入图像描述](../Images/4b034344f8dca9b161c9d3eb32dc82f8.png)

**更新：**

好奇.. 注入此代码有效，但我也尝试将 '!important' 应用于所有 css 属性。这两种方法具有**不同的**效果，与 StackOverflow 上提供的其他解决方案形成鲜明对比。

我在这方面取得了更大的成功，但仍然对为什么更简洁的定义失败感到好奇：

```
var style = document.createElement('link');
style.rel = 'stylesheet';
style.type = 'text/css';
style.href = chrome.extension.getURL('ChromeExtension/css/inject.css');
document.head.appendChild(style); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:37:42.557

无需使用`!important`，只需确保您的 css 具有更高的特异性来覆盖已经存在的内容。如果您查看`body`'s 样式，您应该会看到如下内容：![在此处输入图像描述](../Images/2adedb84b15634424d65efd6faf26a07.png)

这表明正在应用 css，只是被覆盖。将您的CSS更改为类似

```
body.ltr{
  background-color: #000;
} 
```

会工作得很好。

编辑：最重要的是，问题实际上可能出`?`在匹配模式中。对我来说`http:///www.youtube.com/watch*`有效而`http:///www.youtube.com/watch?*`无效。至于为什么这会影响注入`css`，但不影响`js`我不知道。

# c++ - 函数背后的逻辑

> ID：15652082
> 
> 赞同：2
> 
> 时间：2013-03-27T04:46:44.617
> 
> 标签：c++, function

我想了解这个函数的作用，它背后的逻辑。

我已经单独搜索了每个术语（例如：`size_t`，`bitset`...），但我仍然想知道逻辑是如何流动的？

```
size_t popcount(size_t n) {
    std::bitset<sizeof(size_t) * CHAR_BIT> b(n);
    return b.count();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T04:48:24.847

返回位集中设置的位数`b`（即值为 1）。

```
size_t popcount(size_t n) 
```

`n`作为要在位集中设置的位数传递。

```
std::bitset<sizeof(size_t) * CHAR_BIT> b(n); 
```

创建一个`std::bitset`

```
return b.count(); 
```

检查**[文档](http://en.cppreference.com/w/cpp/utility/bitset)**以`std::bitset`查看`std::bitset::count`返回的内容并回答您的问题。如您所见`std::bitset`，这是一个标准库提供的用于存储位的模板类。一旦您了解rest 非常关注文档以了解此类提供的功能并将其映射到您的代码如何使用它。

# ruby-on-rails - 如何将作为可标记的行为集成到 RailsAdmin？

> ID：15652085
> 
> 赞同：6
> 
> 时间：2013-03-27T04:46:56.540
> 
> 标签：ruby-on-rails, ruby-on-rails-3, acts-as-taggable-on, rails-admin

有人将作为可标记的行为集成到 RailsAdmin 吗？我正在尝试[rails_admin_tag_list](https://github.com/kryzhovnik/rails_admin_tag_list)但它对我不起作用。

我的环境：

```
**Gems included by the bundle:
  * actionmailer (3.2.13)
  * actionpack (3.2.13)
  * activemodel (3.2.13)
  * activerecord (3.2.13)
  * activeresource (3.2.13)
  * activesupport (3.2.13)
  * acts-as-taggable-on (2.3.3)
  * acts_as_votable (0.4.0)
  * addressable (2.3.3)
  * arel (3.0.2)
  * bcrypt-ruby (3.0.1)
  * best_in_place (2.1.0)
  * better_errors (0.6.0)
  * bootstrap-sass (2.3.1.0)
  * bootstrap-wysihtml5-rails (0.3.1.19)
  * builder (3.0.4)
  * bundler (1.3.2)
  * cache_digests (0.2.0)
  * cancan (1.6.9)
  * coderay (1.0.9)
  * coffee-rails (3.2.2)
  * coffee-script (2.2.0)
  * coffee-script-source (1.6.2)
  * daemons (1.1.9)
  * database_cleaner (0.9.1)
  * delayed_job (3.0.5)
  * delayed_job_active_record (0.3.3)
  * devise (2.2.3)
  * diff-lcs (1.1.3)
  * erubis (2.7.0)
  * execjs (1.4.0)
  * fabrication (2.6.1)
  * faraday (0.8.7)
  * ffaker (1.15.0)
  * font-awesome-sass-rails (3.0.2.2)
  * haml (4.0.1)
  * hashie (1.2.0)
  * hike (1.2.1)
  * httpauth (0.2.0)
  * i18n (0.6.1)
  * journey (1.0.4)
  * jquery-rails (2.2.1)
  * jquery-ui-rails (3.0.1)
  * json (1.7.7)
  * jwt (0.1.8)
  * kaminari (0.14.1)
  * kgio (2.8.0)
  * koala (1.6.0)
  * mail (2.5.3)
  * mime-types (1.21)
  * multi_json (1.7.2)
  * multipart-post (1.2.0)
  * nested_form (0.3.1)
  * nokogiri (1.5.9)
  * oauth2 (0.8.1)
  * omniauth (1.1.3)
  * omniauth-facebook (1.4.1)
  * omniauth-oauth2 (1.1.1)
  * orm_adapter (0.4.0)
  * pg (0.14.1)
  * polyglot (0.3.3)
  * rack (1.4.5)
  * rack-cache (1.2)
  * rack-pjax (0.7.0)
  * rack-ssl (1.3.3)
  * rack-test (0.6.2)
  * rails (3.2.13)
  * rails_admin (0.4.6)
  * rails_admin_tag_list (0.1.5)
  * railties (3.2.13)
  * raindrops (0.10.0)
  * rake (10.0.4)
  * rdoc (3.12.2)
  * remotipart (1.0.5)
  * rspec-core (2.12.2)
  * rspec-expectations (2.12.1)
  * rspec-mocks (2.12.2)
  * rspec-rails (2.12.2)
  * safe_yaml (0.9.0)
  * sass (3.2.7)
  * sass-rails (3.2.6)
  * simplecov (0.7.1)
  * simplecov-html (0.7.1)
  * sprockets (2.2.2)
  * strong_parameters (0.2.0)
  * thor (0.18.0)
  * tilt (1.3.6)
  * treetop (1.4.12)
  * tzinfo (0.3.37)
  * uglifier (1.3.0)
  * unicorn (4.6.2)
  * warden (1.2.1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-07T04:52:02.570

假设您有帖子模型，

```
class Post < ActiveRecord::Base
  attr_accessible :title, :user_id, :content, :tag_list

  acts_as_taggable
end 
```

并在初始化程序下的 rails_admin.rb

```
config.model Post do
  list do
    field :title
    field :tag_list
  end

  edit do
    field :title
    field :tag_list do
      html_attributes do
        {:style => "width:90%"}
      end
    end
    field :content
  end
end 
```

就是这样，这是一个包含上述场景的示例项目：

[https://github.com/railscash/sample_change_user_role](https://github.com/railscash/sample_change_user_role)

# c++ - 向量的散列函数

> ID：15652086
> 
> 赞同：2
> 
> 时间：2013-03-27T04:47:08.317
> 
> 标签：c++, algorithm, hash

首先，我想知道是否有人知道表示 nD 向量的向量的散列函数？

其次，是否有类似的散列函数，我可以指定一个分辨率，使两个“接近”的向量散列到相同的值？

例如：给定分辨率 r = 0.01 q1 = {1.01, 2.3} q2 = {1.01, 2.31} 将散列到相同的值。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:05:25.550

也许这样的东西对你有用？

```
#include <stdint.h>
#include <iostream>
#include <vector>

using namespace std;

// simple variant of ELF hash ... but you could use any general-purpose hashing algorithm here instead
static int GetHashCodeForBytes(const char * bytes, int numBytes)
{
   unsigned long h = 0, g;
   for (int i=0; i<numBytes; i++)
   {
      h = ( h << 4 ) + bytes[i];
      if (g = h & 0xF0000000L) {h ^= g >> 24;}
      h &= ~g;
   }
   return h;
}

static int GetHashForDouble(double v)
{
   return GetHashCodeForBytes((const char *)&v, sizeof(v));
}

static int GetHashForDoubleVector(const vector<double> & v)
{
   int ret = 0;
   for (int i=0; i<v.size(); i++) ret += ((i+1)*(GetHashForDouble(v[i])));
   return ret;
}

int main()
{
   vector<double> vec;
   vec.push_back(3.14159);
   vec.push_back(2.34567);
   cout << "  Hash code for test vec is:  " << GetHashForDoubleVector(vec) << endl;
   return 0;
} 
```

# c - 如何使用 .map 文件查找嵌入式 C 中不同文件的空间分配

> ID：15652090
> 
> 赞同：0
> 
> 时间：2013-03-27T04:47:31.293
> 
> 标签：c

使用 gcc 编译器编译时，有什么方法可以找到分配给各种变量和文件的空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-05T21:32:26.643

您可以轻松地使用映射文件来查找静态变量的分配。

如果您想根据包含声明的文件对这些信息进行排序，则必须编写一个执行此操作的程序，这应该是可能的。代码分配也是如此。

# php - 如何设计独立于浏览器的html页面？

> ID：15652095
> 
> 赞同：-1
> 
> 时间：2013-03-27T04:47:50.437
> 
> 标签：php, javascript, html, css

我正在尝试使用 div 设计一个独立于浏览器的页面。有时不同浏览器的设计视图不同？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T04:58:49.983

这是 Meyer Reset IMO 的更好替代方案。

[http://necolas.github.com/normalize.css/](http://necolas.github.com/normalize.css/)

试图使网站在所有浏览器中看起来都一样是毫无意义/不可能的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T04:51:04.223

Eric Meyer 的[Reset CSS](http://meyerweb.com/eric/tools/css/reset/)将有助于消除不同浏览器之间的一些差异。

# javascript - 如何在页面加载时带来带有选定值的下拉列表（选择）。？

> ID：15652096
> 
> 赞同：2
> 
> 时间：2013-03-27T04:47:50.747
> 
> 标签：javascript, jquery, ajax, jquery-chosen

我正在使用选择框的[***选择插件***](http://vignesh.gvignesh.org/Choosen/)。我正在根据 ajax 请求替换这两个框。我希望复选框在出现时预先填写。我尝试了一些东西，但它失败了。我阅读了这个[***文档***](http://harvesthq.github.com/chosen/)并且无法完成。这是我在阅读文档后尝试过的。一旦 ajax 响应来了，我就在做这些事情。

```
var city = $('#hdnCity').val();
//**Ajax Request Goes and the response is here**//
$('#searchParams').html(responseText);
var value = $("#favCities1 option:contains("+city+")").attr('selected', 'selected');
$("#chzn-select").val(value).trigger("liszt:updated"); 
```

我无法做到这一点。帮手是可观的。先感谢您！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T05:01:57.187

问题出在最后一行：`$("#chzn-select").val(value).trigger("liszt:updated");`

您将不得不分开，因为`$("#chzn-select").val(value)`只返回 jQuery 对象，而不是`<select>`元素。因此，Chosen 无法接听该`liszt:updated`事件，因为它只收听`<select>`.

所以你必须这样做：

```
$("#chzn-select").val(city);
$("#chzn-select").trigger("liszt:updated"); 
```

请参阅工作示例：http: [//jsfiddle.net/amyamy86/qQCw8/](http://jsfiddle.net/amyamy86/qQCw8/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T05:19:06.157

在没有任何进一步信息的情况下，我想这是您如何处理 ajax 响应的问题

`searchParams`应该在 ajax 成功回调中更新

```
var city = $('#hdnCity').val();

$.ajax({
    url: '',
    ...
}).done(function(responseText){
    //**Ajax Request Goes and the response is here**//
    $('#searchParams').html(responseText);
    var value = $("#favCities1 option:contains("+city+")").attr('selected', 'selected').val();
    $("#chzn-select").val(value).trigger("liszt:updated");
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T23:18:29.710

Chrome 要求您现在触发一个不同的事件，[http://harvesthq.github.io/chosen/](http://harvesthq.github.io/chosen/)。如果不触发此事件，多选框将不会更新。

```
$('#chzn-select').trigger('chosen:updated') 
```

您可以通过这个 jsfiddle 看到它的实际效果，[http://jsfiddle.net/LjtVa/](http://jsfiddle.net/LjtVa/)

# php - 如何获取 XML 第二个孩子

> ID：15652100
> 
> 赞同：1
> 
> 时间：2013-03-27T04:48:01.830
> 
> 标签：php, xml

有人可以帮我获得以下xml的第二个孩子：

```
<?xml version="1.0" encoding="UTF-8"?>
<GetItemResponse xmlns="urn:ebay:apis:eBLBaseComponents">
  <Timestamp>2013-03-27T03:39:01.575Z</Timestamp>
  <Ack>Success</Ack>
  <Version>815</Version>
  <Build>E815_CORE_API_15855340_R1</Build>
    <item>
    <ApplicationData>881030.B.0000</ApplicationData>
    <AutoPay>false</AutoPay>
    <BuyerProtection>ItemEligible</BuyerProtection>
    <BuyItNowPrice currencyID="USD">0.0</BuyItNowPrice>
    <Country>US</Country>
    <Currency>USD</Currency>
    <GiftIcon>0</GiftIcon>
    <HitCounter>RetroStyle</HitCounter>
    <ItemID></ItemID>
    <ListingDetails>
      <Adult>false</Adult>
      <BindingAuction>false</BindingAuction>
      <CheckoutEnabled>true</CheckoutEnabled>
      <ConvertedBuyItNowPrice currencyID="USD">0.0</ConvertedBuyItNowPrice>
     <ShippingServiceOptions>
            <ShippingService>UPSGround</ShippingService>
            <ShippingServiceCost currencyID="USD">9.99</ShippingServiceCost>
     </ShippingServiceOptions>
     <InternationalShippingServiceOption>
            <ShippingService>StandardInternational</ShippingService>
            <ShippingServiceCost currencyID="USD">39.99</ShippingServiceCost>
     </InternationalShippingServiceOption>
    <item> 
```

我正在使用 for 循环浏览所有项目（对于 $items 作为 $item）。我需要从 ShippingServiceOptions 和 InternationalShippingServiceOption 获取 ShippingServiceCost。

我想执行以下操作，但它不起作用：

```
//for ShippingServiceOptions
$item->getElementsByTagName('ShippingServiceCost')->item(0)->nodeValue;

//for InternationalServiceOptions
$item->getElementsByTagName('ShippingServiceCost')->item(1)->nodeValue; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:59:35.150

编辑

由于您已经发布了完整的 XML，php xml 遍历将如下所示：

```
$xml = simplexml_load_string($response);
foreach($xml->item->ListingDetails as $child) {
    foreach($child->children() as $option) {
        if(isset($option->ShippingServiceCost)){
            echo $option->getName() . ": " . $option->ShippingServiceCost . "<br>";
        }
    }
} 
```

您发布的 XML 有错误，以后请在发布前验证它，这样我们就不必修复错误了 :)

* * *

如果你有 PHP 5+，你可以使用 simplexml 来解析你的 xml。此外，您需要关闭“项目”xml 标记。

然后代码变为：

```
<?php
    $xml = simplexml_load_file("test.xml");
    foreach($xml->children() as $child) {
        echo $child->getName() . ": " . $child->ShippingServiceCost . "<br>";
    }
?> 
```

xml：

```
<item>
 <ShippingServiceOptions>
        <ShippingService>UPSGround</ShippingService>
        <ShippingServiceCost currencyID="USD">9.99</ShippingServiceCost>
 </ShippingServiceOptions>
 <InternationalShippingServiceOption>
        <ShippingService>StandardInternational</ShippingService>
        <ShippingServiceCost currencyID="USD">39.99</ShippingServiceCost>
 </InternationalShippingServiceOption>
</item> 
```

输出 ：

```
ShippingServiceOptions: 9.99
InternationalShippingServiceOption: 39.99 
```

# postgresql - 简单的postgres语法问题

> ID：15652103
> 
> 赞同：0
> 
> 时间：2013-03-27T04:48:13.000
> 
> 标签：postgresql

我是 sql server 的 postgres 新手。我编写了一个函数 getSkill，它接受一个整数并从“技能”表中返回一个“技能”类型。现在我想从“Jobs”表中输入整数类型的“SkillIDs”。如果我这样做，那么 postres 会说存在语法错误并在 ^getSkill 处添加一个插入符号。

```
select * from getSkill(select "SkillID" from "Jobs" where "JobID"="posID") //syntax error at ^getSkill 
```

我很确定 () 中的语句是有效的 postgres 语句——但如果我用整数替换它，sytnax 错误就会消失。

```
select * from getSkill("0") //returns an error saying there is no row at position 0 in the DB, because it is still unfilled2 
```

这让我很困惑。如果我用一个简单的整数替换返回整数的有效 postres 语句，语法错误似乎消失了。

有人可以解释发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:58:59.110

我认为应该是

```
select getSkill(SkillID) from Jobs where JobID="posID" 
```

# javascript - 延迟弹出代码

> ID：15652104
> 
> 赞同：4
> 
> 时间：2013-03-27T04:48:15.030
> 
> 标签：javascript, popup

我目前正在尝试为我的网站设置一个弹出式调查，该调查会在 10 秒后出现在访问者面前，但对编码只有一个补救性的理解。Surveymonkey 为弹出窗口生成了以下代码，但我将如何添加这个延迟弹出功能？

```
<script src="http://www.surveymonkey.com/jsPop.aspx?sm=WVuy7oI7MerxwqmaCFF23g_3d_3d"> </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T05:12:33.723

您需要在 10 秒超时后使用 JavaScript 将此脚本标记添加到页面，而不是预先加载它。这应该适合你：

```
<script>
    setTimeout(function() {
        var head = document.getElementsByTagName('head')[0];
        var script = document.createElement('script');
        script.src = 'http://www.surveymonkey.com/jsPop.aspx?sm=WVuy7oI7MerxwqmaCFF23g_3d_3d';
        head.appendChild(script);
    }, 10000);
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-25T19:34:25.297

我的做法有点不同，因为我使用的是调查猴子“收集回复”安装代码来进行弹出式调查，所以我想我会发布我的回复，希望它可以帮助其他人。

```
var myfunc = function(e,t,o,n){}();
window.setTimeout(myfunc, 30000); 
```

我将超时设置为 30 秒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-12T15:46:30.180

我还使用了“收集响应”安装代码，但建议的代码 bt BV2005 对我不起作用。我不得不这样做：

```
function OpenSurvey(e,t,n,o){};
window.setTimeout(function(){ OpenSurvey(window,document,"script","smx-sk"); }, 30000); 
```

# visual-studio - 如何在 MFC 中为不同的构建目标使用不同的资源文件

> ID：15652108
> 
> 赞同：3
> 
> 时间：2013-03-27T04:48:24.477
> 
> 标签：visual-studio, visual-c++, build, mfc, target

我有一些特定于目标的资源。就像目标**客户端**的不同对话框和目标**管理员**的不同对话框一样。还有一些特定于每个目标的字符串。我不希望特定于管理应用程序的资源和代码出现在客户端构建中。

假设我可以有 3 个资源文件，**admin**、**client**和**common**，并以某种方式告诉构建引擎使用**admin**和**common** res 进行 admin 构建，并使用**client**和**common** res 进行客户端构建。

我怎样才能做到这一点？

如何拥有多个资源文件并将资源文件用于特定目标构建。？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T09:44:05.247

好的，这是我完全回答您的问题的尝试，只要获得赏金会很有趣（它们在 MFC 标记的问题中不会经常发生 :) ）。如果有的话，请说明您认为未解决的问题领域。这就是 VS 2008 的全部内容，对其他版本的更改应该是最小的。

*   首先为每个不同的构建目标添加资源文件，例如“admin.rc”、“common.rc”等。在解决方案浏览器中，右键单击您的项目，“添加->新建项目->资源文件”。

*   在解决方案浏览器中右键单击新添加的资源文件，选择“属性”并在“常规”下将“从构建中排除”设置为“是”。

*   在资源视图中，您现在可以将所需的资源添加到相应的资源文件中。

*   接下来，在资源视图中，右键单击“主”资源文件（）并选择“资源包含”。

*   在下面的框中，在任何内容的末尾，添加

> ```
> #ifdef ADMIN
> #include "admin.rc"
> #endif 
> ```

当然，在预处理器中使用的符号您可以自己选择，并且文件名需要与您之前创建资源文件时选择的任何内容相匹配。

*   然后，在您的“管理员”项目配置中（我假设您对每个目标使用不同的配置？）并在解决方案资源管理器中，右键单击您的项目并导航到“资源->常规”。在“预处理器定义”下，添加“ADMIN”（或您在上一步中选择的任何内容）。

*   构建您的解决方案。您可以使用类似[http://www.wilsonc.demon.co.uk/d10resourceeditor.htm](http://www.wilsonc.demon.co.uk/d10resourceeditor.htm)或[http://melander.dk/reseditor/](http://melander.dk/reseditor/)的方式验证二进制文件中包含哪些资源。

请注意，显然您必须考虑各种构建中不可用的资源；因此，您必须确保不显示将在其构造函数中使用对话框 IDD 的对话框。您也可以通过预处理器执行此操作；只需将相同的标志添加到相应配置中的 C++ 预处理器即可。

另一个问题是每个 .rc 文件都有一个 resource.h，并且它们都将使用自己的编号。您可以通过仔细命名和编号来完成这项工作，但我会为每个分配一个不同的范围，以尝试在编译时捕获尽可能多的问题。为此，请打开您的“resource1.h”或您所称的任何名称，并将 _APS_NEXT__VALUE 定义更改为更高的数字。

或者，您可以将所有资源定义粘贴到一个 resource.h 中并编辑所有 .rc 文件以包含该一个 resource.h。只需在解决方案资源管理器中右键单击 rc 文件，然后选择“打开方式”并单击“源代码编辑器”。如果您要走“复杂的资源构建”路线，无论如何您都必须熟悉 rc 文件的格式（至少对于基础知识而言）。这并不难，只要确保您对链接器、资源编译器、.rc 文件、.cpp 文件和 resource.h 文件之间的关系有一个大致的了解。此外，特定于 MFC 的预处理器值一开始看起来很吓人，但它们大多是不言自明的，无论如何您大部分时间都可以忽略它们。

Petzold 对资源文件及其格式有一个简洁但充分的解释，您可能想从壁橱中挖掘出来，并在掌握事情的窍门时将其放在手边。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T16:11:48.110

您可以在 .rc 文件中使用 #ifdef。但是，这会搞砸资源编辑器。处理此问题的“标准”方法是为每个目标设置单独的 .rc 文件，然后将它们中的每一个都包含在一个执行 #ifdef 的脚本中，例如

```
#ifdef CLIENT_1
#include "client_1.rc"
#endif
#ifdef CLIENT_2
#include "client_2.rc"
#endif 
```

这样资源编辑器只需要解析“完整”的 rc 文件。尽管如此，这样工作还是很痛苦，因为编辑器很容易混淆。曾几何时，我还尝试为每个“目标”设置一个单独的项目，然后在我的“资源包含”部分中将它们与相对路径一起#include。我不记得为什么我最后没有使用这种方法。使用预处理器可以完成这项工作，但总感觉有点笨拙。也许最新版本的 VS 可以更好地处理它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-27T05:02:42.657

根据给定的描述，我认为不需要不同的 .RC 文件。您可以有一个字符串表，其中包含两个（或多个目标）的字符串。在启动时，您将拥有指向其中任何一个的 UINT 变量。例如：

```
UINT nUserConfirmationId;
UINT nAcessDeiniedMsgId;

if(target1)
{
   nUserConfirmationId = IDD_ENG_STRING_ID_FOR_CONFIRM;
   ..
}
else
{
   nUserConfirmationId = IDD_FRE_STRING_ID_FOR_CONFIRM;
   ...
} 
```

然后使用`nUserConfirmationId`等变量。类似地，您可以拥有对话框资源（我不明白为什么需要不同的对话框，只应替换字符串）。是的，当您添加资源时，它存在维护问题。

或者，您可以拥有包含目标特定资源的纯资源 DLL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-30T02:39:13.223

**如果您只有少数特定于配置的资源，您可能会发现在配置之间共享.rc**更容易且更易于维护，但让它们使用不同的资源子集。VS（至少 2017 年）也支持它：为单个资源添加**条件**。

在**解决方案资源管理器**中，双击您的**.rc**以打开**资源视图**。在资源树中，右键单击您希望依赖于配置的对话框、图标等，然后打开**Properties**。

在属性窗口中，您应该看到**Condition**。

现在，您应该已经为您的客户端、服务器、管理员构建专门定义了预处理器符号。（如果你不这样做，现在就这样做！**属性页 -> C/C++ -> 预处理器 -> 预处理器定义**。）

只需将此符号添加到**Condition**中。**这具有在.rc**文件中的代码块周围添加`#ifdef`...的效果，但是以 VS 友好的方式 - 它不会破坏编辑器。`#endif`

 ***注意：*但是，我注意到此过程*似乎不适用于 String Tables*。无法判断它是 UI 错误还是根本不受支持。**

# android - Android In-App Billing：不用花钱就能用测试账号购买实物？

> ID：15652117
> 
> 赞同：3
> 
> 时间：2013-03-27T04:49:16.083
> 
> 标签：android, in-app-billing

我已经使用静态响应代码测试了我的 In App Billing 代码，但我正在下一步使用我的真实应用程序 ID 进行测试。

我已经在 Google Play 中配置了 ID。我已经设置了我的测试帐户。

当我尝试发起测试购买时，我被要求提供信用卡信息……它会向我收费吗？

我希望测试帐户像静态 skus 一样使用假 CC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T06:10:50.820

You have to input a real CC when testing as you said. When I tested in my app I just went into my Developer Console and cancelled the order by hitting the "Cancel Entire Order" button. Doing so refunded the money to my card.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T06:21:16.997

要在应用程序购买中进行测试，您应该设置一个单独的谷歌帐户，因为您无法购买自己的应用程序。

使用测试帐户，您应该使用真实有效的信用卡购买您正在测试的项目。

如果您进入开发者控制台，您可以随时退款/取消任何订单。如果您在购买后约 15-20 分钟内退款，则费用将永远不会出现在您的卡上。如果您在此之后退款，则会显示为收费和单独的退款。

你不会失去任何东西。您可以随时全额退款。

忽略“此应用内购买无法退款”消息。这适用于购买者。开发商有权随时退还任何订单。我已经退还了过去一年多的订单。

更新：现在可以完成 [https://developer.android.com/google/play/billing/billing_testing.html?rd=1#test-purchases](https://developer.android.com/google/play/billing/billing_testing.html?rd=1#test-purchases)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T04:55:07.483

测试购买不应向您的卡收费。即使是这样，您也可以立即取消订单。您可以进行真正的购买并立即取消订单以获得全额退款。

我在自己的应用程序上执行了多次测试和真实的应用内购买交易，并且从未被错误收费或无法全额退款。

这是我成功用于退款购买的流程：

1.  在您的 Google Checkout 帐户中找到相关订单并打开详细信息页面。
2.  使用以下选项进行退款。

![退款](../Images/166d6ec3596eb1d1d6fc1dd7392ed624.png)

您的 Google Checkout 交易列表中的已退款订单应如下所示：

![已退款](../Images/85c9aad9b4e38a148cb246f43f0e752b.png)

我不得不在几次（如上）退款自己，从来没有遇到过问题。如果您在我的帐户上损失了 0.99 美元，我深表歉意。

# dotnetnuke - DotNetNuke 将安全性集成到 SQL Server

> ID：15652124
> 
> 赞同：1
> 
> 时间：2013-03-27T04:50:15.093
> 
> 标签：dotnetnuke

我正在将 DotNetNuke 7.0.4 安装到 Windows 2008 R2 + IIS 7.5 + SQL 2012 机器上。尝试在初始数据库设置页面上使用集成安全性，但总是收到 SQL 登录失败消息。SQL server 日志显示 DNN 使用 [domainname\machinesname$] 连接到 SQL server。我在 SQL 上创建了这个帐户，但仍然收到此错误消息。（找不到匹配的登录名）。

我该如何解决这个问题？如果我想为我的站点使用 AD 身份验证，我是否必须使用此集成安全性？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T05:00:24.077

将您的 Web 应用程序/网站的应用程序池的应用程序池标识更改为您希望使用的域用户名。在下面找到导航到的链接。

[指定应用程序池的标识 (IIS 7)](http://technet.microsoft.com/en-us/library/cc771170%28v=ws.10%29.aspx)

# iphone - Hpple-All Nodes 为 nil

> ID：15652126
> 
> 赞同：3
> 
> 时间：2013-03-27T04:50:28.200
> 
> 标签：iphone, objective-c, c, hpple

我对 Objective-c 很陌生，但对常规 C 很好，我正在研究 iPhone 开发。现在我在学校评分系统中的所有节点都是 nil 我知道它们在正确的 xPath 中，因为`//table[@class='grid']/tbody/tr[4]/td[16]`在 Firefox xPath 检查器插件中正确显示。我知道我从网页收到的 NSData 是正确的，因为我对它进行了 NSlogged。但由于某种原因，我仍然以 nil Nodes 告终。

```
Course2 *fillCourse(int row){

    NSURL *CUrl = [NSURL URLWithString:@"MY SCHOOL SITE HERE"];
    NSData *CHtmlData = [NSData dataWithContentsOfURL:CUrl];

    TFHpple *StuffParser = [TFHpple hppleWithHTMLData:CHtmlData];
    NSString *XpathQ = @"//table[@class='grid']/tbody/tr[5]/td[16]/a";
    NSArray *tutorialsNodes = [StuffParser searchWithXPathQuery:XpathQ];
    /*
    for(TFHppleElement *string in tutorialsNodes){
        NSLog(@"%@",[element content]);

    }
     */
    NSString *XpathQ2 = @"//table[@class='grid']/tbody/tr[5]/td[16]/a";
    NSArray *tutorialsNodes2 = [StuffParser searchWithXPathQuery:XpathQ2]; 

    Course2 *COUR = [[Course2 alloc] init];
    //  NSMutableArray *newTutorials = [[NSMutableArray alloc] initWithCapacity:0];
    for (TFHppleElement *element in tutorialsNodes) {
        COUR.grade = [element content];
        COUR.teacherPage = [NSURL URLWithString:[element objectForKey:@"href"]];
    }
    for (TFHppleElement *element2 in tutorialsNodes2) {
       COUR.Class = [[element2 firstChild] content];
    }

    return COUR;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-11T18:59:12.067

尝试`tbody`从您的 XPath 查询中删除。即，让它看起来像`//table[@class='grid']/tr[4]/td[16]`。我对 Hpple 也有类似的问题，我不得不删除所有`tbody`'s.

# ruby - 为什么 `=`、`&` 和 `?` 在 `urlsafe_encode64` 中没有改变？

> ID：15652128
> 
> 赞同：0
> 
> 时间：2013-03-27T04:50:52.873
> 
> 标签：ruby, url, encode

`Base64.urlsafe_encode64`将`+`and转换`/`为`-`and `_`but 离开`=`, `&`and`?`原样。我的理解是`=`用作参数键和值之间的分隔符，如果在url中使用会引起冲突。此外，`&`和`?`用于分隔参数。为什么这在 base 64 中不是问题？为什么是`=`，`&`并且`?`未转换？

**编辑**我似乎一直很困惑，但现在我明白了。`=`,`&`并且`?`作为 url 是安全的，但在 url 的每个组件（路径、参数键、参数值）中使用是不安全的。那么，是否有一种概念/方法可以使字符串安全地出现在 url 的这些组件（路径、参数键、参数值）中？如果有这样的概念，它叫什么（即“url安全”之类的东西，但不完全是）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:09:52.227

我想你刚刚回答了你的问题。看一下数据链接：

```
data:image/gif;base64,R0lGODlhEAAOALMAAOazToeHh0tLS/7LZv/0jvb29t/f3//Ub//ge8WSLf/rhf/3kdbW1mxsbP//mf///yH5BAAAAAAALAAAAAAQAA4AAARe8L1Ekyky67QZ1hLnjM5UUde0ECwLJoExKcppV0aCcGCmTIHEIUEqjgaORCMxIC6e0CcguWw6aFjsVMkkIr7g77ZKPJjPZqIyd7sJAgVGoEGv2xsBxqNgYPj/gAwXEQA7 
```

其中允许使用等号。要转义等号，请将结果传递给[`CGI::escape`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/cgi/rdoc/CGI.html#method-c-escape).

# objective-c - 游戏中心登录

> ID：15652131
> 
> 赞同：2
> 
> 时间：2013-03-27T04:51:03.327
> 
> 标签：objective-c, game-center, nsnotifications

在我的游戏中，玩家需要使用 Apples Game Center 登录。如果他们是游戏的新玩家，他们必须先登录 Game Center，因为我使用 playerID 作为用于设置新用户帐户的数据的一部分。

我有一个 GameCenter 类，我用它来让玩家登录，或者如果他们还没有登录，则提示他们登录，这是主要代码。

```
-(void) setup
{
    gameCenterAuthenticationComplete = NO;

    if (!isGameCenterAPIAvailable()) {
        // Game Center is not available.
        NSLog(@"Game Center is not available.");
    } else {
        NSLog(@"Game Center is available.");

            __weak typeof(self) weakSelf = self; // removes retain cycle error

            GKLocalPlayer *localPlayer =  [GKLocalPlayer localPlayer]; // localPlayer is the public GKLocalPlayer

        __weak GKLocalPlayer *weakPlayer = localPlayer; // removes retain cycle error

            weakPlayer.authenticateHandler = ^(UIViewController *viewController, NSError *error)
            {
                if (viewController != nil)
                {
                    [weakSelf showAuthenticationDialogWhenReasonable:viewController];
                }
                else if (weakPlayer.isAuthenticated)
                {
                    [weakSelf authenticatedPlayer:weakPlayer];
                }
                else
                {
                    [weakSelf disableGameCenter];
                }
            };
        }

    }

    -(void)showAuthenticationDialogWhenReasonable:(UIViewController *)controller
    {
        [[[[[UIApplication sharedApplication] delegate] window] rootViewController] presentViewController:controller animated:YES completion:nil];
    }

    -(void)authenticatedPlayer:(GKLocalPlayer *)player
    {
        NSLog(@"%@,%@,%@",player.playerID,player.displayName, player.alias);

        localPlayer = player;

        gameCenterAuthenticationComplete = YES;       

    }

    -(void)disableGameCenter
    {

    } 
```

这很好用。但我有2个问题。

1) 正如我所说，如果玩家是新玩家，那么他们必须先登录 Game Center，然后才能进行新用户注册。这个新注册在另一个类中。那么如何让其他类监听 GameCenter 的变量 gameCenterAuthenticationComplete = YES 呢？我在其他地方读到我可以使用委托，但这是否适用于对象？跨对象的通知会更好吗？

2) 更重要的是，如果玩家关闭模态以登录 GameCenter 会发生什么，当模态关闭时的回调/阻塞在哪里？所以我可以提示他们再次登录或至少在屏幕上显示一条消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T05:50:57.510

1).您可以通过导入其类标头并在委托的接口（Appdelegate.h）中声明该类的实例并通过 Appdelegate.m 中的该实例访问 gameCenterAuthenticationComplete 来访问您的 gameCenterAuthenticationComplete 或者您可以通过类的 sharedinstance 访问它 do您的班级 Yourclass.h 文件中的以下内容

```
+(YourClass*) sharedInstance; 
```

在 YourClass.m

```
static YourClass* instance;

+(YourClass*) sharedInstance
{
@synchronized(self)
{
    if (instance == nil) 
    {
        instance = [[YourClass alloc] init];
    }
}

return instance;
} 
```

2）这个方法在gamecenterleaderboardviewcontroller的取消按钮上被调用

```
- (void)leaderboardViewControllerDidFinish:(GKLeaderboardViewController *)view_controller
{
[self.gameCenter dismissModalViewControllerAnimated:NO];
[view_controller release];

} 
```

# ios - 如何在 UITableViewCell 中为 UIButton 设置 Action

> ID：15652133
> 
> 赞同：15
> 
> 时间：2013-03-27T04:51:06.483
> 
> 标签：ios, uitableview

我有`XIB`文件**TimerCell.xib**`UITableViewCell`。在**cellForRowAtIndexPath**的其他类中，我初始化了这个`UITableViewCell`：

```
 static NSString *CellIdentifier = @"cellTimer";
    TimerCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        //cell = [[TimerCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"TimerCell"owner:self options:nil];
        cell = [nib objectAtIndex:0]; 
```

在我的**TimerCell 中**，我有两个`UILabel`和一个`UIButton`。对于这个按钮，我想将**操作**设置为某种方法。

我怎样才能做到这一点？以及如何`UILabel`实时显示我的后台倒数计时器的数据？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-27T05:00:16.147

这段代码可以帮助你

```
static NSString *CellIdentifier = @"cellTimer";
TimerCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    //cell = [[TimerCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"TimerCell"owner:self options:nil];
    cell = [nib objectAtIndex:0];
    UIButton *button=[UIButton buttonWithType:UIButtonTypeRoundedRect];
    button.tag=indexPath.row;
   [button addTarget:self 
       action:@selector(aMethod:) forControlEvents:UIControlEventTouchDown];
   [button setTitle:@"cellButton" forState:UIControlStateNormal];
    button.frame = CGRectMake(80.0, 0.0, 160.0, 40.0);
    [cell.contentView addSubview:button];
   }

  return cell;
}

-(void)aMethod:(UIButton*)sender
{
 NSLog(@"I Clicked a button %d",sender.tag);
} 
```

希望这可以帮助！！！

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-27T05:10:23.593

由于您有一个`UITableViewCell`named的子类`TimerCell`，您可以将 outlet 属性添加到`TimerCell`. 例如：

```
@interface TimerCell : UITableViewCell

@property (nonatomic, strong) UIButton *button;
@property (nonatomic, strong) UILabel *label;

@end 
```

在`TimerCell.xib`中，将插座连接到按钮和标签。

然后，在 中`tableView:cellForRowAtIndexPath:`，您可以轻松访问按钮以设置其目标和操作：

```
static NSString *CellIdentifier = @"cellTimer";
TimerCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"TimerCell"owner:self options:nil];
    cell = [nib objectAtIndex:0];
}

[cell.button addTarget:self action:@selector(cellButtonWasTapped:)
    forControlEvents:UIControlEventTouchUpInside];; 
```

您可以使用单元格的属性访问单元格的标签`label`，以便在计时器触发时对其进行更新。

获取按钮和标签的另一种方法是使用视图标签，正如我在[这个答案](https://stackoverflow.com/a/8291867/77567)中描述的那样。

在`cellButtonWasTapped:`（或您从按钮发送的任何操作）中，您可能想要查找包含该按钮的单元格的索引路径。[我在这个答案](https://stackoverflow.com/a/7881028/77567)中解释了如何做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T08:58:32.093

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"cellTimer";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier: CellIdentifier];
    NSInteger index = indexPath.row;
    UILabel *titleLabel = (UILabel *)[cell viewWithTag:101];
    UIButton *button = (UIButton *)[cell viewWithTag:100];
    [button addTarget:self action:@selector(MethodName:) forControlEvents:UIControlEventTouchUpInside];
} 
```

并在您的 XIB 文件 TimerCell.xib 中设置 UIButton 和 UILabel 的标签

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-27T05:08:21.337

请在 SO 上发布之前进行更好的研究。这是将按钮添加到单元格的代码

```
UIButton *Button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[Button addTarget:self action:@selector(MethodName:) forControlEvents:UIControlEventTouchUpInside];
[Button setTitle:@"ButtonTitle" forState:UIControlStateNormal];
Button.frame = CGRectMake(100.0, 10.0, 40.0, 40.0);
[cell.contentView addSubview:Button]; 
```

# ios - 自定义单元类与文件所有者有什么区别

> ID：15652139
> 
> 赞同：4
> 
> 时间：2013-03-27T04:51:42.093
> 
> 标签：ios

在官方开发人员指南（和其他类似指南）中，它提到您需要设置单元格的自定义类属性才能建立 IBOutlet 连接。这个自定义类只是一个在 @properties 上带有 IBOutlet 标记的目标 c 类。我正在努力理解的是单元格的这个自定义类属性与 XIB 的文件所有者有何不同。根据我的实验，我可以将文件所有者留空，只要在单元格上设置了自定义类，所有连接仍然有效（我单击单元格并转到“身份检查器”并设置单元格的自定义类） . 我认为文件所有者是 UI 视图可以与之交互的唯一对象。

[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html)

ctrl+f "为自定义单元格内容使用 outlets" 以到达文档中的位置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-05T18:47:07.103

我有同样的问题并进行了一些实验。据我所知，该`Custom Class`属性适用于您的`XIB`. 即，如果您有一个`XIB`具有多个 UI 对象的 UI 设计，则每个对象都可以有一个单独的自定义类。自定义类也必须是您拥有的 UIView 对象的父类的子类`XIB`。例如，对于`cell`自定义类必须是`UITableViewCell`.

`File Owner`另一方面只是一个和整个`XIB`。它可以是**任何**课程（据我所知）。以我为例，我有一个带有文本字段和一些标签`XIB`的自定义。`UITableViewCell`我使用单元格作为表的标题视图（即在`UITableView`对象中）。

就我而言，我没有**为**我的`XIB`. 我只是将单元格的文件所有者设为我的`UITableViewController`（管理我的表格视图），并将我的文本字段和标签连接到`UITableViewController`类中的属性。这对我有用，因为我只有一个自**定义**实例`TableViewCell`（它是整个表格的标题，并且只有一个标题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:18:56.163

文件的所有者只是 Interface Builder 提供的一种方便的方式来引用运行时实例化的对象，该对象通常`UIViewController`与主视图相关联。

也就是说，您可以引用任意数量的其他对象，特别是如果您有视图或视图控制器的层次结构。

# function - 我有两个 scala 项目 - 基本相同 - 一个有效，一个无效。有人能告诉我为什么吗？

> ID：15652143
> 
> 赞同：0
> 
> 时间：2013-03-27T04:51:58.357
> 
> 标签：function, scala, text-based, mud

对于课堂，我们必须制作一个基于测试的游戏，在这个游戏中，我们穿过一系列房间，比如老式的文字游戏 Colossal Cave Adventure。

我首先定义了不同房间的功能，以便在房间中输入方向时可以轻松切换。

以下代码大部分时间都在 REPL 中工作，但我希望它每次都能工作：

```
def roomOne():Unit = {
println("You are currently in Room 1.")
println("There are 2 doors: North and West")
println("Which door would you like to go through?")

var input = readLine(">> ").toUpperCase match {
case "NORTH" => roomFour()
case "WEST" => roomNine()
case "EAST" => {
  println("You cannot go there.")
  roomOne()
}
case "SOUTH" => {
  println("You cannot go there.")
  roomOne()
  }
 }
}
def roomFour():Unit = {
println("You are currently in Room 4.")
println("There are 2 doors: East and South")
println("Which door would you like to go through?") 
}
def roomNine():Unit = {
println("You are currently in Room 9.")
println("There are 3 doors: North, East, and South")
println("Which door would you like to go through?")
}
def startGame():Unit = {
var input = readLine(">> ").toUpperCase match {
case "YES" => roomOne()
case "NO" => {
  println("When you are ready to begin please type \"yes\".")
  startGame()
}
}
}

println("**************************************************")
println("**************************************************")

println("Hello Mr. Doofenshmirtz. Are you ready to find the parts to create the Super DOOM-inator?")

startGame() 
```

并且以下代码在 REPL 中根本不起作用：

```
def roomOne():Unit = {
println("You are currently in Room 1.")
println("There are 2 doors: North and West")
println("Which door would you like to go through?")

var input = readLine(">> ").toUpperCase match {
case "NORTH" => roomFour()
case "WEST" => roomNine()
case "EAST" => {
  println("You cannot go there.")
  roomOne()
}
case "SOUTH" => {
  println("You cannot go there.")
  roomOne()
}
}
}
def roomFour():Unit = {
println("You are currently in Room 4.")
println("There are 2 doors: East and South")
println("Which door would you like to go through?")

var input = readLine(">> ").toUpperCase match {
case "NORTH" => {
  println("You cannot go there.")
  roomFour()
}
case "WEST" => {
  println("You cannot go there.")
  roomFour()
}
case "EAST" => roomFive()
case "SOUTH" => roomOne()
}
}
def roomFive():Unit = {
println("You are currently in Room 5.")
println("There are 3 doors: East, South, and West")
println("Which door would you like to go through?")
}
def roomNine():Unit = {
println("You are currently in Room 9.")
println("There are 3 doors: North, East, and South")
println("Which door would you like to go through?")
}
def startGame():Unit = {
var input = readLine(">> ").toUpperCase match {
case "YES" => roomOne()
case "NO" => {
  println("When you are ready to begin please type \"yes\".")
  startGame()
}
}
}

println("**************************************************")
println("**************************************************")

println("Hello Mr. Doofenshmirtz. Are you ready to find the parts to create the Super DOOM-inator?")

startGame() 
```

有人可以帮我吗？我整天都在尝试不同的事情，但我似乎无法让它发挥作用。为什么第一个有时会起作用，而不是总是起作用？为什么第二个永远不起作用？每次运行时如何让第二个工作？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:02:08.363

查看 pastebin，问题可能在于您将代码粘贴到 REPL 中的方式。尝试这个：

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

... paste stuff ...

... press Ctrl-d 
```

# c# - 从另一个窗体传递数据到前一个窗体

> ID：15652146
> 
> 赞同：1
> 
> 时间：2013-03-27T04:52:19.960
> 
> 标签：c#, database, winforms, visual-studio-2010

我正在使用 Visual Studio 2010 中的 Windows 窗体应用程序。我正在尝试刷新并添加关于 C# 知识和查询数据库的新知识。

详细信息：[我不是在使用 MDI 表单，而是在 Visual Studio 2010 的解决方案中使用了几个 Windform 和一个本地数据库]

我的解决方案中有几个窗口表单（登录表单、主窗口表单和搜索表单）。当用户登录时，主窗口窗体出现，登录窗体隐藏[登录窗体中的数据然后传递到主窗体窗体，该窗体将用于在其他功能中访问数据库 - 抱歉没有放这个小细节之前]。当用户在主窗口表单中按下按钮搜索数据库时，会出现一个新表单（搜索表单）。在搜索表单中，用户可以搜索数据库中的数据并从数据库中选择数据。

问题：

当用户想从数据库中选择一些数据时，我陷入了当前表单（搜索表单）如何将数据传递到主窗口表单的问题上。

非常感谢您对此的任何帮助。为了让每个人都清楚，这不是任何形式的家庭作业。

^_^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:58:00.317

您可以在 MainForm 上添加一个属性或方法，您可以在代表您的 MainForms 的实例上调用它

在搜索表单中：

```
mainForm.SomeMethod(..) or mainFor.SomeProperty = val 
```

或者...您可以在从该点到 MainForm 中的方法的搜索上创建一个委托属性。委托将在创建时分配给 SearchForm。

# ios - 截屏时相机控制器不工作

> ID：15652147
> 
> 赞同：0
> 
> 时间：2013-03-27T04:52:31.873
> 
> 标签：ios, uiimage, calayer, screen-capture, camera-overlay

我用背景相机控制器截取了叠加图像。但是拍照时后台cameracontroller层隐藏了

代码：

```
CGRect rect = [previewView bounds];
UIGraphicsBeginImageContext(rect.size);
CGContextRef context = UIGraphicsGetCurrentContext();
[previewView.layer renderInContext:context];   
UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
 UIImageWriteToSavedPhotosAlbum(img, nil, nil, nil); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:20:44.463

相机预览层不是常见的 CALayer，在上下文中渲染时​​不考虑在内。在上下文中渲染仅适用于一种 CALayer。最有效的方法是直接从相机缓冲区获取屏幕截图。

# c++ - c++ shared_ptr with std::function or double (*SOME_NAME)(double);

> ID：15652149
> 
> 赞同：1
> 
> 时间：2013-03-27T04:52:53.787
> 
> 标签：c++, function, shared-ptr

Q1）鉴于我们有

`typedef double (*function_t)(double);`

或者

`typedef std::function<double(double)> function_t;`

我们如何定义

`std::shared_ptr<function_t> ptr_func = ???`

对于某些功能。

假设我们想要一个`shared_ptr`已经定义的对象（现在忘记它违背了目的 - 但我需要这个）。作为示例，请考虑以下类型的对象`double`。

```
struct null_deleter
{
    void operator() (void const *) const {};
};

int main()
{
    // define object
    double b=0;

    // define shared pointer
    std::shared_ptr<double> ptr_store;
    ptr_store.reset(&b,null_deleter()); // this works and behaves how you would expect
} 
```

虽然如果我们对 a`shared_ptr`类型做同样的事情`function_t`，即

```
double f (double x)
{
    // some_function + return
}

int main()
{

    // define shared pointer
    std::shared_ptr<function_t> ptr_store;
    ptr_store.reset(&f,null_deleter()); // ERROR: does not work
} 
```

返回的错误类似于以下内容：

```
error: cannot convert 'double (*)(double)' to 'double (**)(double)' in initialization 
```

或在`std::function`

```
error: cannot convert 'double (*)(double)' to 'std::function<double(double)>*' in initialization 
```

很明显没有传递正确的类型，可能我们不允许这样做（？）

注意：使用windows MinGW 上的`g++4-7-2`版本编译`-std=c++11 -O3`

**几个答案效果很好，我会在今天的某个时候回复大家。现在是早上6.30，我还没睡。我正在实施的整个设计模式可能是错误的，希望我能稍后解释一下：|**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:13:48.483

这是人为的，但是在不了解您实际上要做什么的情况下，这是我能想到的最好的方法：

```
#include <iostream>

typedef std::function<double(double)> function_t;

double f(double t)
{
    return t*5;
}

int main(int argc, char*argv[])
{
    // You usually want to attach the shared pointer to a dynamically allocated object
    std::shared_ptr<function_t> ptr;
    ptr.reset(new function_t(std::bind(&f, std::placeholders::_1)));
    std::cout << (*ptr)(5.0);

    // But we can attach the smart pointer to a local function object on the stack (BAD IDEA)
    function_t fff = std::bind(&f, std::placeholders::_1);
    ptr.reset(&fff);
    std::cout << (*ptr)(5.0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:40:37.293

我尽量避免使用原始函数指针，并且更喜欢将它们包装在函数对象中。按照这种方法，下面的代码可以工作。`shared_ptr`想要包含一个指向作为其第一个模板参数给出的类型的对象的指针，所以如果你使用

```
std::shared_ptr<function_t> 
```

那么它必须包含一个

```
function_t* 
```

你说得对。

通常，我们会传入一个指向动态分配对象的指针，如

```
std::shared_ptr<function_t> ptr_store( new function_t( f ) ); 
```

但在您的情况下，您想传递已经在堆栈上的对象的地址。

所以我创建了一个`function_t`名为 的本地对象`foo`，然后将它的地址连同它一起传递`null_deleter`给 shared_ptr，一切正常。

我希望这有帮助！

PS 我用的是 Microsoft Visual Studio 2010

```
#include <functional>
#include <memory>
#include <iostream>

typedef std::function<double(double)> function_t;

struct null_deleter
{
  void operator() (void const *) const {};
};

double f (double x)
{
  return 2.0 * x;
}

int main( int argc, char* argv[] )
{
  // A function object on the stack
  function_t foo( f );

  // Putting this in a local scope to verify that when the shared_ptr goes
  // out of scope, nothing bad happens.
  double result1;
  {
  std::shared_ptr<function_t> ptr_store;
  ptr_store.reset( &foo, null_deleter() );

  result1 = (*ptr_store)( 10.0 );
  std::cout << result1 << std::endl;
  }
  // ptr_store has now been destroyed

  // Calling the foo function object again just to be sure it's still OK
  double result2 = foo( 5.0 );
  std::cout << result2 << std::endl;
} 
```

# php - 将可变数量的参数传递给 Postgresql

> ID：15652150
> 
> 赞同：-1
> 
> 时间：2013-03-27T04:53:03.610
> 
> 标签：php, postgresql, pdo, parameterized

如何将随机数量的参数传递给查询？下面的代码块显示了尝试的内容。所有失败都显示为 bool(false)。为了测试，使用三个整数来表示 id。

来自项目 1 的查询在 pgAdminIII 中手动执行，并且成功。对第 2 项和第 4 项的查询进行了回显和比较。它们看起来像预期的那样接近，但参数不具有约束力。

```
SELECT column FROM table WHERE id = ANY('{1,2,3}'::int[]);
SELECT column FROM table WHERE id = ANY('{?,?,?}'::int[]) 
```

1）这行得通。希望任何子句将是 1-N 个数字：

```
$sql = "SELECT column FROM table WHERE id = ANY('{1,2,3}'::int[])";

$sth = $dbh->prepare($sql);
$sth->execute();

$result = $sth->fetch(PDO::FETCH_NUM);

echo var_dump($result);

$dbh = null; 
```

2）这失败了：

```
$values = array(1,2,3);
$placeHolders = implode(',', array_fill(0, count($values), '?'));

$sql = sprintf("SELECT column FROM table WHERE id = ANY('{%s}'::int[])", $placeHolders);

$sth = $dbh->prepare($sql);
$sth->execute($values);
$result = $sth->fetch();

echo var_dump($result);

$dbh = null; 
```

3）这失败了：

```
$values = array(':qwer' => 1, ':asdf' => 2, ':zxcv' => 3);

$sql = "SELECT colum FROM table WHERE id = ANY(\'{ :qwer , :asdf , :zxcv }\'::int[])";  //Below error caused if single quote not escaped.

$sth = $dbh->prepare($sql);
$sth->execute($values); // Invalid parameter number: :qwer if single quotes not escaped.
$result = $sth->fetch();

echo var_dump($result);

$dbh = null; 
```

4）这失败（显式绑定参数）：

```
$values = array(1,2,3);
$placeHolders = implode(',', array_fill(0, count($values), '?'));

$sql = sprintf("SELECT query FROM nc_reports WHERE id = ANY('{%s}'::int[])", $placeHolders);

$sth = $dbh->prepare($sql);

$i = 1;
foreach($values as $val)
{
    //$sth->bindParam($i, $val, PDO::PARAM_INT);
    $sth->bindValue($i, $val, PDO::PARAM_INT);
    $i++;
}
$sth->execute();
$result = $sth->fetch();

echo var_dump($result);

$dbh = null; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:25:38.683

尝试自己生成查询：

```
$values = array(1,2,3);
// Generate the query
$params = substr(str_repeat("?,", sizeof($values)), 0, -1);

$sql = "SELECT query FROM nc_reports WHERE id IN ($params)";

$sth = $dbh->prepare($sql);

for ($i = 0; $i < sizeof($values); $i++)
{
    $sth->bindValue($i+1, $values[$i], PDO::PARAM_INT);
}
$sth->execute();
// Iterate over the results
while (($result = $sth->fetch()) !== FALSE) {
    echo var_dump($result);
}
$dbh = null; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-27T05:40:57.780

@FoolishSeth：感谢您向我指出答案。由于代码的格式，我无法理解最初讨论的 ws 是什么。我能够使其工作，但没有使用 ANY（无结果）或 IN（仅第一个结果）。

执行和获取被移到循环中，$values 数组中的每个项目都被单独查询并添加到 $results 数组中。

```
$values = array(1,2,3);

$sql = "SELECT column FROM table WHERE id = ?";

$sth = $dbh->prepare($sql);

$result = array();

foreach($values as $key => $val)
{
    $sth->bindValue(1, $val, PDO::PARAM_INT);
    $sth->execute();
    $result[$key] = $sth->fetch(PDO::FETCH_NUM);
}

echo var_dump($result); 
```

以上根据需要返回了三行。我没有机会针对大的 $values[] 进行测试，但是对于少量的记录，这应该可以工作。

# csv - 处理/编辑大文件中的特殊字符（> 2gb）

> ID：15652153
> 
> 赞同：0
> 
> 时间：2013-03-27T04:53:29.177
> 
> 标签：csv, double-quotes

我使用 java 写入并创建了一个 csv 文件。由于某些字段中有 ',' 作为值的一部分，因此我用 '"" ' 将每一列括起来（（如 "allen,jade","123","12 street" ））。所以我的 csv 文件中的值如下所示：

“col a 值”，“col b 值” ....

现在，当我尝试使用 COPY tablea from 'filename.csv' DELIMITER ',' CSV 将此文件上传到 postgres (9.1) 数据库时；我收到一条错误消息：最后一个预期列之后的额外数据。

我检查了显示错误的记录，它有一列将“”作为其值的一部分。

正是这样：

"Halswell 耶和华见证人会众基督城","基督城","Halswell 耶和华见证人会众"

我猜这是因为我收到此错误的第一列中的值内的'"'。

如果我错了，请纠正我，如果你能帮助我解决这个问题，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:57:22.957

在创建 CSV 文件时，您应该先转义任何现有的引号（替换`"`为`\"`），然后再将它们包含在您自己的引号中。

# model - 如何使用 Kinect 和 XNA 在人体上嵌入 3D 布料

> ID：15652155
> 
> 赞同：0
> 
> 时间：2013-03-27T04:53:40.263
> 
> 标签：model, 3d, kinect, xna-4.0

我正在用 kinect 和 XNA 做一个虚拟更衣室类型的项目。但我不知道如何将 3D 模型映射到覆盖所有身体区域的身体。我已经尝试了 Avataaring-XNA 示例，并且可以将背景添加为来自 Kinect 的视频。但问题是 3D 模型（Dude.fbx）没有随着人体真实身体移动，也没有覆盖整个身体。任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T00:12:31.953

也许这会有所帮助[http://mopred.blogspot.com/2012/11/changed-avateering-avatar-in-kinect.html](http://mopred.blogspot.com/2012/11/changing-avateering-avatar-in-kinect.html)有了这个，您可以将模型更改为您喜欢的任何人，我已经尝试过并且效果很好。您提到您将背景添加为来自 kinect 的视频，我想在前景中添加模型 3d，在背景中添加视频数据，您能帮我吗？

# php - PHP：获取在文件选择对话框/窗口中选择的文件的完整路径

> ID：15652156
> 
> 赞同：0
> 
> 时间：2013-03-27T04:53:43.780
> 
> 标签：php, csv, file-io, import

我想要做的是使用 PHP 允许用户通过文件选择对话框/窗口选择 .csv 文件，然后我想从该文件中导入数据并将其插入到我的数据库中。

我需要一些帮助是如何创建文件选择窗口/对话框。我想要它，以便在文件资源管理器中只显示 .csv 文件。

在用户选择文件后如何从 csv 导入数据的任何帮助也将不胜感激。这都是使用PHP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:20:04.130

试试这个。

```
/****** PHP Script *****/
    if($_SERVER['REQUEST_METHOD'] == 'POST') {

         $filename = $_FILES['myfile']['name'];
         $filesize = $_FILES['myfile']['size'];
         $filetype = $_FILES['myfile']['type'];
         $filetemp = $_FILES['myfile']['tmp_name'];

         *** do insert using $filename
     }

    /******* html script *****/
    <form action='filename.php' action='post'>
      <input type='file' name='myfile' />     // File browser
      <input type='submit' name='submit' />
    </form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T05:23:07.940

可以使用该`<input>` `accept`属性来更改文件对话框，但浏览器支持会有所不同。上传后，您需要检查文件类型和扩展名。

[`fgetcsv()`](http://php.net/manual/en/function.fgetcsv.php)对于解析 csv 文件非常有用。

# node.js - 如何使用 MongoDB、Node.js(+express) 和 Jade 创建 MVC 表单

> ID：15652159
> 
> 赞同：3
> 
> 时间：2013-03-27T04:53:57.367
> 
> 标签：node.js, mongodb, express, pug

我的任务是使用上面的堆栈创建一个简单的 CRUD 应用程序。

但是，我缺乏对它的了解可能会阻止我以更轻松的方式做事。

我主要关心的是更新。我有一个从数据库加载的对象（文档）。需要将字段映射到表单中，修改和保存表单内容时，必须更新数据库。

我发现使用 JADE 动态渲染和填充表单非常容易，但是，在回来的路上，我发现自己通过使用 jQuery 发送表单的字符串化 JSON 表示来“手动”重建对象；在将其存储回数据库之前。

是否有一些自动工具可以为我执行此映射？给定一个 JSON 对象和一个表单，它将处理填充并将信息保存回模型中。

作为参考，我来自 SpringMVC+Hibernate 背景。

指向教程甚至简单示例的指针都可以。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:51:01.253

和其他人一样，我肯定会推荐[MongooseJS](http://mongoosejs.com/)。当我开始尝试学习类似的堆栈时，它帮助了我。在服务器上，你可能有这样的东西：

```
// Define schema
var userSchema = mongoose.Schema(
    { name: 'string',
      description: 'string',
      email: 'string',
      date: { type: Date, default: Date.now },
    });

// Instantiate db model
var User = mongoose.model('User', userSchema);

// POST from client
exports.addUser = function (req, res) {

    // req.body contains the json from the client post
    // as long as the json field names are the same as the schema field names it will map the data automatically
    var newUser = new User(req.body); 

    newUser.save(function (err) {
      if(err) {
          return res.json({error: "Error saving new user"});
      } else {
        console.log("success adding new user");
        res.json(newUser);
      }

    });
};

// PUT from client
exports.updateUser = function(req, body) {
    // this contains the updated user json
    var updatedUser = req.body;

    // here we lookup that user by the email field
    User.findOne({ 'email': updatedUser.email }, function (err, user) {
      if(err) {
        return res.json({error: "Error fetching user" });
      }
      else {
        // we succesfully found the user in the database, update individual fields:
        user.name = updatedUser.name;
        user.save(function(err) {
            if(err) {
                return res.json({error: "Error updating user"});
            } else {
                console.log("success updating user");
                res.json(updatedUser);
            }
        })
      }
    });

}; 
```

编辑* 显然 Mongoose 实际上有一个 findOneAndUpdate 方法，它与我上面写的更新模型的功能基本相同。你可以[在这里阅读](http://mongoosejs.com/docs/api.html#model_Model.findOneAndUpdate)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T05:38:50.023

我一直在使用[`LocomotiveJS`](http://locomotivejs.org/), 的创建者[`Passport`](http://passportjs.org/)。

机车有 Mongoose ORM[支持](http://locomotivejs.org/guide/mongoose/)。
您修改本地 JS 对象并调用 save() 进行更新。
这符合您的需求吗？

这是使用此设置的博客示例：
[https ://github.com/strongloop/sample-blog](https://github.com/strongloop/sample-blog)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-10T09:55:12.140

试试[express-orm-mvc](https://github.com/ddo/express-orm-mvc) 一个简单的包，支持 express 和 orm 的 mvc 模板

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T05:35:16.180

我不会使用 jQuery 在客户端构造 JSON 对象。最好将该实现留给服务器端。您可以轻松地从 post 变量创建一个 json 对象并保存该对象。另外，我不知道你是否需要这个，但是 mongoose 是一个很好的 ODM（对象文档映射器），它可以帮助你制作集合文档的模型。

# mysql - 使用 C API 获取 MySQL 中的上一行

> ID：15652160
> 
> 赞同：0
> 
> 时间：2013-03-27T04:53:57.910
> 
> 标签：mysql, c

我正在使用`C-MySQL API`s 浏览获取的 MySQL 行。

我`MYSQL_RES *f`用来检索特定查询的结果，然后我可以一次使用`mysql_fetch_row(f)`.

问题是刚才说我使用第 4 行，`mysql_fetch_row(f)`但接下来我想要的是，如果特定条件为真，那么我应该能够获取第 2 行，否则我可以通过正常程序并获取第 5 行。

我尝试使用一个临时的`MYSQL_RES *temp` ，它将被初始化为

```
temp=f; 
```

然后每当我想回滚时，我都可以使用

```
f=temp; 
```

但这不起作用，因为他们两个都指向同一个东西。我也试过

```
*temp=*f; 
```

然后每当我想回滚时，我都可以使用

```
*f=*temp; 
```

但这会产生分段错误。

# magento - 如何在 magento 中获取 $this->getAddToCartUrl($product)

> ID：15652165
> 
> 赞同：3
> 
> 时间：2013-03-27T04:54:28.477
> 
> 标签：magento, magento-1.7

在我的 magento 应用程序中，在 template/page/ 文件夹中创建了一个 phtml 页面。

这里展示了一个产品...那么就需要展示了

```
$this->getAddToCartUrl($product) 
```

但它返回空值......这意味着没有返回值......

我怎样才能在我的 phtml 页面中得到它......

这是html代码：

```
<input id="url_<?php echo $_iterator;?>" name="url_$_iterator;" type="text" value="<?php echo $this->getAddToCartUrl($product) ?>"> 
```

任何人有任何解决方案....

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-15T07:24:35.433

你试试这个....

```
 <?php echo $this->helper('checkout/cart')->getAddUrl($_product) ?> 
```

试试这个而不是这个`$this->getAddToCartUrl($product)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T08:34:21.710

为了能够调用`getAddToCartUrl`您的 Block 类必须继承自`Mage_Catalog_Block_Product_Abstract`（在布局声明中）

是这样吗？

# android - 停止 AudioTrack 播放时的间歇性点击

> ID：15652167
> 
> 赞同：0
> 
> 时间：2013-03-27T04:54:43.187
> 
> 标签：android, audio, audiotrack

我在流媒体模式下使用 AudioTrack。在我停止播放一小段 wav 文件后，大约有 5-10 次会听到咔嗒声。这让我发疯，因为我无法始终如一地重现它。在调用 AudioTrack.release() 之前，我尝试了对 AudioTrack.flush()、AudioTrack.pause() 和 AudioTrack.stop() 的各种调用组合。我也试过调用 AudioTrack.setStereoVolume() 并传入 AudioTrack.getMinVolume() 的结果。没有任何效果。

一些观察：

*   似乎只有在我播放一小段 wav 文件时才会发生。当我播放超过 3 秒的音频时，我无法重现它。
*   有时，当我写入音频数据的结尾时，AudioTrack.write() 会返回 -22。我在 Javadoc 中没有看到 -22 的规范。此外，这种情况并不总是与点击一致。
*   即使我重播 wav 文件的同一部分，点击也不能始终如一地重现。
*   咔哒声可以来自右侧或左侧扬声器，但不能同时来自两者。

我在运行 Android 4.0.3 的 Acer Iconia A500 上看到了这一点。我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:57:52.813

流行可能是因为歌曲以非常高的样本结束，然后突然变为 0。这会导致“流行”噪音。尝试在 0.01 秒的时间内淡出歌曲。

从高样本到 0 音量的流行听起来像这样：[https ://soundcloud.com/hertzdevil/dirac](https://soundcloud.com/hertzdevil/dirac)

# c# - 命名空间“系统”中不存在类型或命名空间“计时器”名称

> ID：15652177
> 
> 赞同：2
> 
> 时间：2013-03-27T04:55:53.790
> 
> 标签：c#, visual-studio-2010, timer, namespaces, system

我敢肯定，这个问题的答案远没有我的大脑看起来那么难，但我似乎无法弄清楚这一点。

我正在尝试为我正在开始的游戏设置一个计时器，主要是跟随一个教程来了解基础知识。我什至用 EXACT 代码作为教程创建了一个新项目，但我不断收到相同的错误。尽管看到代码在教程中完美运行......

我会很感激任何帮助，如果你能让我知道我在哪里搞砸了以及为什么，而不仅仅是更正代码。我将其作为一个学习项目进行，因此我想知道将来如何防止这种情况。提前致谢！

哦，我不知道这是否重要，但我使用的是 Microsoft Visual C# 2010 Express。

> 4 个错误，相同的消息。第 10、66、67 和 72 行。

```
using System;
using System.Collections.Generic;

namespace rout3reset
{
public class RogueLike
{
    static bool isGameAlive = true; 
    static Player player;
    static System.Timers.Timer World; //timer declare

    public class Player //
    {
        public char CHR = '@'; // Symbol for player
        public Vector position; // X, Y coordinates tracker
        public string Name = "";
        public short Health = 25; // Base health
        public short Mana = 25; // Base Mana
        public Player() //player constructor
        {
            position = new Vector(1, 1); // sets spawn point
        }
        public void Update() // get handle controls
        {

        }
    }
    public class AI //
    {

    }

    public class Tree //
    {

    }

    public class Vector
    {
        public short X;
        public short Y;
        public Vector(short X, short Y) // Main constructor
        {
            this.X = X;
            this.Y = Y;
        }
        public Vector() // Overload of 1
        {
            this.X = 0;
            this.Y = 0;
        }
    }

    static void Main(string[] args)
    {
        Initialize();
        do
        {
            player.Update();
        }
        while (isGameAlive);
    }

    static void Initialize()
    {
        World = new System.Timers.Timer(50); //Sets timer elapse point (50 milliseconds)
        World.Elapsed += new System.Timers.ElapsedEventHandler(Draw); //Start timer
        World.Start();
        player = new Player();
    }

    static void Draw(object sender, System.Timers.ElapsedEventArgs e) // Handles world timer tick
    {
        Console.Clear();
        Console.WriteLine("########################################"); //40 Spaces wide by 20 spaces tall
        Console.WriteLine("#--------------------------------------#");
        Console.WriteLine("#--------------------------------------#");
        Console.WriteLine("#--------------------------------------#");
        Console.WriteLine("#--------------------------------------#");
        Console.WriteLine("#--------------------------------------#");
        Console.WriteLine("#--------------------------------------#");
        Console.WriteLine("#--------------------------------------#");
        Console.WriteLine("#--------------------------------------#");
        Console.WriteLine("#--------------------------------------#");
        Console.WriteLine("#--------------------------------------#");
        Console.WriteLine("#--------------------------------------#");
        Console.WriteLine("#--------------------------------------#");
        Console.WriteLine("#--------------------------------------#");
        Console.WriteLine("#--------------------------------------#");
        Console.WriteLine("#--------------------------------------#");
        Console.WriteLine("#--------------------------------------#");
        Console.WriteLine("#--------------------------------------#");
        Console.WriteLine("#--------------------------------------#");
        Console.WriteLine("########################################");

        Console.WriteLine("-{0} HP: {1} MP: {2}", player.Name, player.Health, player.Mana); //STAT BAR  

        Console.SetCursorPosition(player.position.X, player.position.Y); //sets proper char position for player symbol
        Console.Write(player.CHR); //draws the players char
    }
    static void Updateworld() //update non-player, non-antagonist objects (trees, etc)
    {

    }

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T05:05:58.463

MSDN 告诉我们这[`System.Timers.Timer`](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)是来自 System.dll。

> 命名空间：System.Timers
> 
> 程序集：系统（在 System.dll 中）

听起来您缺少对`System.dll`. 确保你引用它：

![在此处输入图像描述](../Images/169c9cca8e487bf9e8a52e74ae8e448a.png)

# c - 快速排序算法不适用于所有数组

> ID：15652181
> 
> 赞同：2
> 
> 时间：2013-03-27T04:56:03.340
> 
> 标签：c, quicksort

这是一个家庭作业。我最终会将这段代码翻译成 MIPS 程序集，但这对我来说是容易的部分。我一直在调试这段代码好几个小时，并且一直在我的教授办公时间，但我仍然无法让我的快速排序算法工作。这是代码以及我对我认为问题区域所在位置的一些评论：

```
// This struct is in my .h file
typedef struct {
    // v0 points to the first element in the array equal to the pivot
    int *v0;

    // v1 points to the first element in the array greater than the pivot (one past the end of the pivot sub-array)
    int *v1;
} PartRet;

void swap(int *a, int *b) {
    int temp = *a;
    *a = *b;
    *b = temp;
}

PartRet partition(int *lo, int *hi) {
    // Will later be translating this to MIPS where 2 values can be returned. I am using a PartRet struct to simulate this.
    PartRet retval;

    // We must use the last item as the pivot
    int pivot = *hi;

    int *left = lo;

    // Take the last value before the pivot
    int *right = hi - 1;

    while (left < right) {
        while((left < hi) && (*left <= pivot)) {
            ++left;
        }

        while((right > lo) && (*right > pivot)) {
            --right;
        }

        if (left < right) {
            swap(left++, right--);
        }
    }

    // Is this correct? left will always be >= right after the while loop
    if (*hi < *left) {
        swap(left, hi);
    }

    // MADE CHANGE HERE
    int *v0 = hi;
    int *v1;

    // Starting at the left pointer, find the beginning of the sub-array where the elements are equal to the pivot
    // MADE CHANGE HERE
    while (v0 > lo && *(v0 - 1) >= pivot) {
        --v0;
    }

    v1 = v0;

    // Starting at the beginning of the sub-array where the elements are equal to the pivot, find the element after the end of this array.
    while (v1 < hi && *v1 == pivot) {
    ++v1;
    }

    if (v1 <= v0) {
        v1 = hi + 1;
    }

    // Simulating returning two values
    retval.v0 = v0;
    retval.v1 = v1;

    return retval;
}

void quicksort(int *array, int length) {
    if (length < 2) {
        return;
    }

    PartRet part = partition(array, array + length - 1);

    // I *think* this first call is correct, but I'm not sure.
    int firstHalfLength = (int)(part.v0 - array);
    quicksort(array, firstHalfLength);

    int *onePastEnd = array + length;
    int secondHalfLength = (int)(onePastEnd - part.v1);

    // I have a feeling that this isn't correct
    quicksort(part.v1, secondHalfLength);
} 
```

我什至尝试使用在线代码示例重写代码，但要求是使用 lo 和 hi 指针，但我发现没有代码示例使用它。当我调试代码时，我最终只使代码适用于某些数组，而不是其他数组，尤其是当枢轴是数组中的最小元素时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:26:28.823

分区代码有问题。这里有 4 个简单的测试输出，来自下面的 SSCCE 代码：

```
array1:
Array (Before):
[6]: 23 9 37 4 2 12
Array (First half partition):
[3]: 2 9 4
Array (First half partition):
[1]: 2
Array (Second half partition):
[1]: 9
Array (Second half partition):
[2]: 23 37
Array (First half partition):
[0]:
Array (Second half partition):
[1]: 23
Array (After):
[6]: 2 4 9 12 37 23

array2:
Array (Before):
[3]: 23 9 37
Array (First half partition):
[1]: 23
Array (Second half partition):
[1]: 9
Array (After):
[3]: 23 37 9

array3:
Array (Before):
[2]: 23 9
Array (First half partition):
[0]:
Array (Second half partition):
[1]: 23
Array (After):
[2]: 9 23

array4:
Array (Before):
[2]: 9 24
Array (First half partition):
[0]:
Array (Second half partition):
[1]: 9
Array (After):
[2]: 24 9 
```

### SSCCE 代码

```
#include <stdio.h>

typedef struct
{
    int *v0;    // v0 points to the first element in the array equal to the pivot
    int *v1;    // v1 points to the first element in the array greater than the pivot (one past the end of the pivot sub-array)
} PartRet;

static void dump_array(FILE *fp, const char *tag, int *array, int size)
{
    fprintf(fp, "Array (%s):\n", tag);
    fprintf(fp, "[%d]:", size);
    for (int i = 0; i < size; i++)
        fprintf(fp, " %d", array[i]);
    putchar('\n');
}

static void swap(int *a, int *b)
{
    int temp = *a;
    *a = *b;
    *b = temp;
}

static PartRet partition(int *lo, int *hi)
{
    // Will later be translating this to MIPS where 2 values can be
    // returned.  I am using a PartRet struct to simulate this.
    PartRet retval;

    // This code probably won't ever be hit as the base case in the QS
    // function will return first
    if ((hi - lo) < 1)
    {
        retval.v0 = lo;
        retval.v1 = lo + (hi - lo) - 1;
        return retval;
    }

    // We must use the last item as the pivot
    int pivot = *hi;

    int *left = lo;

    // Take the last value before the pivot
    int *right = hi - 1;

    while (left < right)
    {
        if (*left <= pivot)
        {
            ++left;
            continue;
        }

        if (*right >= pivot)
        {
            --right;
            continue;
        }

        swap(left, right);
    }

    // Is this correct? left will always be >= right after the while loop
    swap(left, hi);

    int *v0 = left;
    int *v1;

    // Starting at the left pointer, find the beginning of the sub-array
    // where the elements are equal to the pivot
    while (v0 > lo && *(v0 - 1) == pivot)
    {
        --v0;
    }

    v1 = v0;

    // Starting at the beginning of the sub-array where the elements are
    // equal to the pivot, find the element after the end of this array.
    while (v1 < hi && *v1 == pivot)
    {
        ++v1;
    }

    // Simulating returning two values
    retval.v0 = v0;
    retval.v1 = v1;

    return retval;
}

static void quicksort(int *array, int length)
{
    if (length < 2)
    {
        return;
    }

    PartRet part = partition(array, array + length - 1);

    // I *think* this first call is correct, but I'm not sure.
    int firstHalfLength = (int)(part.v0 - array);
    dump_array(stdout, "First half partition", array, firstHalfLength);
    quicksort(array, firstHalfLength);

    int *onePastEnd = array + length;
    int secondHalfLength = (int)(onePastEnd - part.v1);

    // I have a feeling that this isn't correct
    dump_array(stdout, "Second half partition", part.v1, secondHalfLength);
    quicksort(part.v1, secondHalfLength);
}

static void mini_test(FILE *fp, const char *name, int *array, int size)
{
    putc('\n', fp);
    fprintf(fp, "%s:\n", name);
    dump_array(fp, "Before", array, size);
    quicksort(array, size);
    dump_array(fp, "After", array, size);
    putc('\n', fp);
}

int main(void)
{
    int array1[] = { 23, 9, 37, 4, 2, 12 };
    enum { NUM_ARRAY1 = sizeof(array1) / sizeof(array1[0]) };
    mini_test(stdout, "array1", array1, NUM_ARRAY1);

    int array2[] = { 23, 9, 37, };
    enum { NUM_ARRAY2 = sizeof(array2) / sizeof(array2[0]) };
    mini_test(stdout, "array2", array2, NUM_ARRAY2);

    int array3[] = { 23, 9, };
    enum { NUM_ARRAY3 = sizeof(array3) / sizeof(array3[0]) };
    mini_test(stdout, "array3", array3, NUM_ARRAY3);

    int array4[] = { 9, 24, };
    enum { NUM_ARRAY4 = sizeof(array4) / sizeof(array4[0]) };
    mini_test(stdout, "array4", array4, NUM_ARRAY4);

    return(0);
} 
```

我没有对排序代码进行任何算法更改。我只是简单地添加了`dump_array()`函数，并对其进行了战略调用，然后添加了`mini_test()`函数和`main()`. 这些固定装置非常有用。请注意，当输入数组的大小为 2 且顺序错误时，分区是正确的，但当大小为 2 且顺序正确时，分区已颠倒了数组元素的位置。这是有问题的！解决它，您可能已经修复了大部分其余部分。在所有 6 个排列（3 个不同的值）中使用一些 3 个元素数组；考虑使用 3 个元素和只有 2 个不同的值，以及 3 个元素和只有 1 个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T06:15:41.680

注意：我发布这个只是为了让你看看不同的方法。我已经在上面的评论中指出了您的算法中的至少一个缺陷。考虑一下。

具有集成分区的传统就地快速排序通常如下所示，尽管每个人似乎都有自己的最爱。为了简单起见，我更喜欢这样（分区和递归在同一个过程中）。最重要的是，汇编的翻译非常简单，但你现在可能已经知道了：

```
void quicksort(int *lo, int *hi)
{
    /* early exit on trivial slice */
    size_t len = (hi - lo) + 1;
    if (len <= 1)
        return;

    /* use hi-point for storage */
    swap(lo + len/2, hi);

    /* move everything in range below pivot */
    int *pvt=lo, *left=lo;
    for(; left != hi; ++left)
        if (*left <= *hi)
            swap(left, pvt++);

    /* this is the proper spot for the pivot */
    swap(pvt, hi);

    /* recurse sublists. do NOT include pivot slot. */
    quicksort(lo, pvt-1);
    quicksort(pvt+1, hi);
} 
```

该算法中唯一真正的变量是如何计算提取初始枢轴值的“点”。今天的许多实现都使用随机点，因为它有助于分散快速排序对近似排序列表的退化性能：

```
 swap(lo + (rand() % len), hi); 
```

其他实现就像从切片中间抓取元素一样，就像我在上面的算法中所做的那样：

```
 swap(lo + len/2, hi); 
```

您可能会发现有趣的是，有些人根本不抓住中间元素并进行交换，只是使用高位中的任何内容作为枢轴值。这仅将代码减少了*一行*，但有一个巨大的警告：它将在几乎排序或完全排序的列表上保证**糟糕的交换性能（一切都会交换）。**

无论如何，如果没有别的，我希望它可以帮助您了解算法的分区部分正在尝试做什么：将枢轴值以下的所有内容推到列表头部的插槽中，将其上方的所有内容推到列表的尾部，然后递归到这些分区中，但最重要的是，不要在*任*一切片的递归中包含枢轴槽。它已经在它需要的地方（事实上，在那个时候，它是唯一可以保证的地方）。

# html - 如何控制单个背景定义的多个图像

> ID：15652188
> 
> 赞同：1
> 
> 时间：2013-03-27T04:56:33.580
> 
> 标签：html, css

在 CSS 中，我试图弄清楚如何单独控制 2 个背景图像的大小，它们相互堆叠。因此，在 CSS 中，可以这样定义 1 个背景图像：`background:url('base.png') no-repeat center;`. 为了在基础图像上叠加叠加层，您可以使用图 1 中的*方法*。

```
    。我的课 {
      背景：
        url('overlay.png') 无重复中心，
        url('base.png') 无重复中心；
      背景尺寸：100% 100%；
    }

```

***图。1***

但是，如果我想要每个图像的尺寸略有不同，我不知道该怎么做。我认为咒语是一种内联位置和尺寸定义，如图*2 所示*。但我还没有完全正确。有谁知道如何做到这一点？提前致谢。

```
    。我的课 {
      背景：
        url('overlay.png') 不重复 0 0 / 100% 90%,
        url('base.png') 不重复中心 0 0 / 100% 100%;
    }

```

***图2***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T05:14:20.967

我认为您几乎可以使用 CSS 我相信您可以按以下方式进行操作：

```
 .my-class {
      background:
        url('overlay.png') no-repeat center, 
        url('base.png') no-repeat center;
      background-size: 90px 80px, 100px 100px;
    } 
```

您只需要逗号，然后设置第二个背景的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:10:32.170

将背景图像设置为两个不同的图像`divs`然后使用 z-index 将它们分层会更容易。

**演示：http:** [//jsfiddle.net/vEMs4/](http://jsfiddle.net/vEMs4/)

**HTML：**

```
<div id="bg1"></div>
<div id="bg2"></div> 
```

**CSS：**

```
#bg1{
    position:absolute;
    top:0px;
    left:50px;
    height:200px;
    width:250px;
    background-color:blue;
    opacity:0.3;
    z-index:2;
}
#bg2{
    top:0px;
    left:0px;
    position:absolute;
    height:250px;
    width:250px;
    background-color:green;
    opacity:0.3;
    z-index:1;
} 
```

在演示中，我使用背景颜色而不是图像，因此您需要针对图像进行适当调整。

# java - 包含整数的字符串上的 Java 比较器

> ID：15652189
> 
> 赞同：0
> 
> 时间：2013-03-27T04:56:53.070
> 
> 标签：java, string, integer, comparator

我正在尝试编写一个比较器，用于根据它拥有的整数对字符串列表进行排序。前任。H3232GHSD3 和 H56RFRSFR4，第一个字符串的整数为 32323，而第二个字符串的整数为 564，因此第二个字符串小于第一个字符串。

这是我的代码

```
import java.util.*;

// Sorts strings based on integers it contains 
class IntComparator implements Comparator<String>{

    @Override
    public int compare(String s1, String s2) {
        // Strip the non integers from strings
        s1 = s1.replaceAll("[^\\d.]","");
        s1 = s1.replaceAll("[^\\d.]","");
        // change string to integers
        int l1 = Integer.parseInt(s1);
        int l2 = Integer.parseInt(s2);

        if(l1 > l2){
            return 1;
        }
        else if(l1 < l2){
            return -1;
        }
        return 0;
    }
}
public class sample {
    public static void main(String[] args) {

        List<String> RandomString = new ArrayList<String>();

        RandomString.add("HA4ZNV0WE1");
        RandomString.add("A3XHN20WE1");
        RandomString.add("D4VH3V0WE1");

        Collections.sort(RandomString, new IntComparator());

        for(String R : RandomString){
            System.out.println(R);
        }

    }

} 
```

这是我得到的错误

```
Exception in thread "main" java.lang.NumberFormatException: For input string: "HA4ZNV0WE1"
    at java.lang.NumberFormatException.forInputString(Unknown Source)
    at java.lang.Integer.parseInt(Unknown Source)
    at java.lang.Integer.parseInt(Unknown Source)
    at IntComparator.compare(sample.java:13)
    at IntComparator.compare(sample.java:1)
    at java.util.TimSort.countRunAndMakeAscending(Unknown Source)
    at java.util.TimSort.sort(Unknown Source)
    at java.util.TimSort.sort(Unknown Source)
    at java.util.Arrays.sort(Unknown Source)
    at java.util.Collections.sort(Unknown Source)
    at sample.main(sample.java:36) 
```

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T05:01:53.210

您的代码中有错字。改变 -

```
// Strip the non integers from strings
s1 = s1.replaceAll("[^\\d.]","");
s1 = s1.replaceAll("[^\\d.]",""); 
```

对此——

```
// Strip the non integers from strings
s1 = s1.replaceAll("[^\\d.]","");
s2 = s2.replaceAll("[^\\d.]",""); // In your code, you've written s1 here too. 
```

我假设您已经复制并粘贴了第一行，但忘记更改变量名。这就是为什么有时它被称为[反模式](http://en.wikipedia.org/wiki/Anti-pattern#Methodological)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T05:02:14.180

注意你的代码

```
// Strip the non integers from strings
s1 = s1.replaceAll("[^\\d.]","");
s1 = s1.replaceAll("[^\\d.]",""); 
```

你应该把第二行变成

```
s2 = s2.replaceAll("[^\\d.]",""); 
```

`s1`在您发布的代码中，您只是两次摆脱了非数字，并且永远不会`s2`指向只有数字的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T05:01:50.560

尝试`[^\p{L}]`代替你的正则表达式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T05:13:26.807

尝试

```
 s1 = s1.replaceAll("\\D", "");
        s2 = s2.replaceAll("\\D", ""); 
```

# android-ndk - 如何在 ndk 中获取故障转储。不在调试中

> ID：15652190
> 
> 赞同：1
> 
> 时间：2013-03-27T04:57:01.890
> 
> 标签：android-ndk, try-catch, coredump

当我的应用程序崩溃时如何获取崩溃转储，它通常发生在我的 apk 的 c++ 模块中。我在 c++ 中发现了这段代码

```
try 
{
 made some crash code to test
}
catch(...)
{
 i ,catch it ,and write the info to the sd card.
} 
```

当崩溃发生时，代码没有进入catch部分，它立即崩溃。

有什么问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:17:15.623

您的崩溃是由于分段错误。

SIGSEGV 崩溃不会被 try catch 捕获。C++ 中的 SIGSEGV 被认为是错误，需要用代码做一些事情来修复它，而不是用 try catch 包装它。

如果你非常有必要捕捉 seg 错误，你可以看看[这个帖子](http://bytes.com/topic/c/answers/394618-how-catch-all-runtime-exception)。您可以尝试一下，但不能保证它会起作用。

# sql - 使用日期和时间的 SQL 查询

> ID：15652194
> 
> 赞同：0
> 
> 时间：2013-03-27T04:57:39.347
> 
> 标签：sql

我需要一些帮助来查询。

我想使用 GETDATE 作为今天的日期并指定上午 6:00 到下午 6:00 的时间

例如，类似：

`where t_stamp between "current date 06:00:00" and "current date 18:00:00"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:08:02.947

GETDATE 似乎表明它是 SQL Server - 请在以后包含此信息。

许多方法之一是：

```
where  t_stamp between
CONVERT(DATETIME,CONVERT(VARCHAR(10),GETDATE(),126) + 'T06:00:00',126)
AND
CONVERT(DATETIME,CONVERT(VARCHAR(10),GETDATE(),126) + 'T18:00:00',126) 
```

丑我知道。同一个答案有大约一百万种不同的排列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:04:25.380

对于 SQL Server 2008 及更高版本：

```
declare @start datetime
declare @end datetime 

set @start = dateadd( hh, 6, convert( datetime, convert(date, getdate()) ) )
set @end = dateadd( hh, 12, @start )

select @start, @end 
```

# plsql - PL/SQL 语句被忽略 & 没有足够的值

> ID：15652202
> 
> 赞同：1
> 
> 时间：2013-03-27T04:58:47.413
> 
> 标签：plsql, procedures

```
--Below is for testing only - to be deleted later
CREATE OR REPLACE PROCEDURE movie_rental_sp 
    (movieIdCount IN OUT NUMBER,
    movieID IN OUT NUMBER)
IS
noMovie EXCEPTION;
BEGIN
SELECT MOVIE_ID, count(movie_id)
    INTO movieIdCount
    FROM MM_MOVIE
    WHERE MOVIE_ID = movieID;
IF movieIdCount = 0 THEN
RAISE noMovie;
END IF;

EXCEPTION
    WHEN noMovie THEN
    DBMS_OUTPUT.PUT_LINE('No movies found');
END;
/ 
```

警告：创建的过程存在编译错误。

SQL> 显示错误 PROCEDURE MOVIE_RENTAL_SP 的错误：

LINE/COL 错误

* * *

7/1 PL/SQL：SQL 语句被忽略 9/2 PL/SQL：ORA-00947：没有足够的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:05:41.697

您的 SELECT 有 2 列，但您的 INTO 只有 1 个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T02:11:28.270

将选择语句更改为，

```
SELECT MOVIE_ID, count(movie_id)
INTO movieID , movieIdCount
..... 
```

# c# - C# 从包含列表的列表中删除重复项

> ID：15652204
> 
> 赞同：0
> 
> 时间：2013-03-27T04:58:53.747
> 
> 标签：c#, linq

假设我们有一个“A 学生”列表和一个“B 学生”列表。然后我们将这两个列表添加到一个更通用的列表中，称为“学生”。然后有人决定通过在通用“学生”列表中添加重复的“学生”列表来使我们的生活复杂化。删除“A学生”重复列表之一的最有效方法是什么？请注意，其中涉及两个自定义类。

代码中的通用学生列表称为 lstStudents。这是我想从中删除任何重复项的列表。

（我试图想出一个更好的例子，但这是我现在能做的最好的。）

我不必使用 LINQ，但它是可用的。MoreLinq 也可用。

这是我的课程：

```
public class Student
{
    public Student(string _name, int _age, Exam _lastExam)
    {
        name = _name;
        age = _age;
        lastExam = _lastExam;
    }

    public string name { get; set; }
    public int age { get; set; }
    public Exam lastExam { get; set; }
}

public class Exam
{
    public Exam(int _correct, int _possible)
    {
        correct = _correct;
        possible = _possible;
    }

    public int correct { get; set; }
    public int possible { get; set; }
} 
```

这是创建混乱的代码：

```
List<List<Student>> lstStudents = new List<List<Student>>();
List<Student> lstAStudents = new List<Student>();
List<Student> lstDuplicateAStudents = new List<Student>();
List<Student> lstBStudents = new List<Student>();

// Create a list of some A students
lstAStudents.Add(new Student("Alex", 14, new Exam(98,100)));
lstAStudents.Add(new Student("Kim", 13, new Exam(96, 100)));
lstAStudents.Add(new Student("Brian", 14, new Exam(92, 100)));
lstStudents.Add(lstAStudents);

// Create a duplicate list of A students
lstDuplicateAStudents.Add(new Student("Alex", 14, new Exam(98, 100)));
lstDuplicateAStudents.Add(new Student("Kim", 13, new Exam(96, 100)));
lstDuplicateAStudents.Add(new Student("Brian", 14, new Exam(92, 100)));
lstStudents.Add(lstDuplicateAStudents);

// Create a list of some B students
lstBStudents.Add(new Student("John", 13, new Exam(88, 100)));
lstBStudents.Add(new Student("Jenny", 13, new Exam(80, 100)));
lstBStudents.Add(new Student("Jamie", 15, new Exam(81, 100)));
lstStudents.Add(lstBStudents); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T05:08:01.183

可能您可以持有一组将累积唯一列表的集合：

```
var set = new HashSet<List<Student>>(new CustomComparer());
foreach (List<List<Student>> list in source)
{
  if (set.Contains(list))
    continue;
  set.Add(list)
}

public class CustomComparer : IEqualityComparer<List<Student>>
{
   public bool Equals(List<Student> one, List<Student> two)
   {
     if (one.Count != two.Count) return false;

     // simplest possible code to compare two lists
     // warning: runs in O(N*logN) for each compare
     return one.OrderBy(s=>s).SequenceEqual(two.OrderBy(s=>s));
   }

   public int GetHashCodeList<Student> item)
   {
     int ret = -1;
     foreach (var s in item)
       ret ^= s.GetHashCode();
     return ret;
   }
} 
```

此解决方案的主要问题是用于比较两个列表<> 的代码。包含不同顺序的相同元素的列表是否被视为相等？如果是，我们需要通过对每个列表进行预排序来更改顺序（以节省比较时间），或者每次对每个列表的副本进行排序，这将导致额外的时间损失。所以我想主要问题是你的名单有多大。对于低于 1000 个学生/100 个列表的值，性能问题应该不会很明显。

另一个问题是 GetHashCode 实现 - 它是 O(N)，我们无处缓存计算值，因为 List 是一个框架结构。为了解决这个问题，我建议引入 StudentList 类，该类将具有比较器（现在我们必须在外部指定它）并通过缓存获取哈希码。

此外，还有一个更好的[通用集合等价比较器实现](https://stackoverflow.com/questions/50098/comparing-two-collections-for-equality)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T06:55:39.970

您可以[`IEquatable<T>`](http://msdn.microsoft.com/en-us/library/ms131190.aspx)同时使用`Student`和`Exam`：

```
public class Student: IEquatable<Student>
{
    ...

    public bool Equals(Student other)
    {
        return name == other.name && age == other.age 
                    && lastExam.Equals(other.lastExam);
    }

    public override bool Equals(object obj)
    {
        Student student = obj as Student;
        return Equals(student);
    }

    public override int GetHashCode()
    {
        return name.GetHashCode() ^ 
             age.GetHashCode() ^ lastExam.GetHashCode();
    }
} 
```

对于`Exam`：

```
public class Exam: IEquatable<Exam>
{
    ...

    public bool Equals(Exam exam)
    {
        return exam.correct == correct && exam.possible == possible;
    }

    public override bool Equals(object obj)
    {
        Exam exam = obj as Exam;
        return Equals(exam);
    }

    public override int GetHashCode()
    {
        return correct.GetHashCode() ^ possible.GetHashCode();
    }
} 
```

然后建立一个自`IQualityComparer<T>`定义`List<Student>`：

```
public class StudentListComparer : IEqualityComparer<List<Student>>
{
    public bool Equals(List<Student> x, List<Student> y)
    {
        return x.OrderBy(a => a.name)
                .SequenceEqual(y.OrderBy(b => b.name));
    }

    public int GetHashCode(List<Student> obj)
    {
        return obj.Aggregate(0, (current, t) => current ^ t.GetHashCode());
    }
} 
```

然后你可以`Distinct`得到结果：

```
var result = lstStudents.Distinct(new StudentListComparer()); 
```

# asp.net - 文件上传在 Asp.net 中不起作用。HasFile 始终为假

> ID：15652206
> 
> 赞同：0
> 
> 时间：2013-03-27T04:59:15.513
> 
> 标签：asp.net, file-upload

我在monoX CMS中工作并尝试上传文件。但是文件上传的hasFile总是错误的。我在.aspx页面中使用服务器脚本。下面是我的代码。

```
 <script runat="server">
     protected void btn_click_me(object sender, EventArgs e)
     {
        dbOperations dbObj = new dbOperations();
        if (selected_file.HasFile)
        {
            string title = txt_file_title.Value.ToString();
            int f_type = Convert.ToInt32(dd_file_type.Value);

            dbObj.CreateSubmission(title, f_type, selected_file.PostedFile);
        }
    }
    </script> 
```

我的 HTML 代码是：

```
 <MonoX:StyledButton ID="btnSubmit" CommandName="submit" OnClick="btn_click_me" runat="server" CausesValidation="true" ValidationGroup="validate_submission" Text='Submit'>
  </MonoX:StyledButton> 
```

在萤火虫中看到的表单标签是：

```
<form id="aspnetForm" enctype="multipart/form-data" style="height: 100%" onsubmit="javascript:return WebForm_OnSubmit();" action="/MyFolder/Submissions.aspx" method="post" name="aspnetForm"> 
```

渲染文件标签为：

```
<input type="file" id="ctl00_ctl00_ctl01_ctl00_cp_cp_cp_cp_selected_file" name="ctl00$ctl00$ctl01$ctl00$cp$cp$cp$cp$selected_file"> 
```

# java - 提取应用程序图标仍然为空

> ID：15652208
> 
> 赞同：0
> 
> 时间：2013-03-27T04:59:39.977
> 
> 标签：java, icons, imageicon

我正在尝试`arraylist`从文件夹中提取图标图像，但我不断收到 NullPointerException。我已经可以提取较小的版本，但是它们太小了。我要获取的图标是常规大小的图标。`filePaths`保存图标位置列表。`iconBIG.add(...)`是`NullPointerException`错误指向的地方。

```
// Global
private ArrayList<Icon> iconBIG = new ArrayList<Icon>();

// Within extractIcon()...
for (String target : filePaths)
    {
        try 
        {
            ShellFolder shell = ShellFolder.getShellFolder(new File(target));
            iconBIG.add(new ImageIcon(shell.getIcon(true)));    
        } 
        catch (FileNotFoundException e) 
        {
            e.printStackTrace();
        }
    } 
```

**编辑：**我已经拥有使用 ShellFolder 的完全权限。

**更新：**如果我更改，它说`new File(target)`的位置（仅包含应用程序的完整路径）

`getShellFolder(new File(target)`

至

`getShellFolder(new File(C:/foo/bar.lnk)`,

代码有效。我事先已经想好用`\`'/'替换所有内容，但我不明白为什么它仍然调用相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:17:03.220

似乎工作正常，因为您允许执行此私有包。下面是一个适用于 JDK 6 的示例：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.FileNotFoundException;
import javax.swing.*;
import sun.awt.shell.ShellFolder;

public class ShowShellIcon {
    private static void createAndShowUI() {
        final JFrame frame = new JFrame("Load Image");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JButton loadButton = new JButton("Display Image");
        loadButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                JFileChooser fc = new JFileChooser(
                        System.getProperty("user.home"));
                if (fc.showOpenDialog(null) == JFileChooser.APPROVE_OPTION){
                    try {
                        ShellFolder shell = ShellFolder.getShellFolder(fc
                                .getSelectedFile());
                        JOptionPane.showMessageDialog(null,
                                new ImageIcon(shell.getIcon(true)));
                    } catch (FileNotFoundException ex) {
                        ex.printStackTrace();
                    }
                }
            }
        });

        frame.add(loadButton);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                try {
                    UIManager.setLookAndFeel(
                            UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                    ex.printStackTrace();
                } 
                createAndShowUI();
            }
        });
    }
} 
```

# android - ActionbarSherlock 中 homeAsUpIndicator 图标的更改在 ICS 中不起作用？

> ID：15652219
> 
> 赞同：7
> 
> 时间：2013-03-27T05:00:57.163
> 
> 标签：android, actionbarsherlock

我尝试`homeAsUpIndicator`更改`ActionBar`. 我曾经`ActionBarSherlock`与旧的 Android 版本兼容。当应用程序在具有旧版 ICS 和 ICS 的设备上运行时，我为我的 Activity 设置了一个特定主题，它显示不同的颜色。

这是我正在使用的风格

```
<style name="Theme.PM" parent="@style/Theme.Sherlock.Light">

    <item name="android:homeAsUpIndicator">@drawable/back_sign</item> 
    <item name="homeAsUpIndicator">@drawable/back_sign</item>

</style> 
```

如下图所示，对于 ICS，将主页视为向上指示器看起来像黑色。

![在此处输入图像描述](../Images/05f81918e50e28d71705c06095111c9b.png)

对于旧版本的 ICS，将主页视为向上指示器看起来像白色。

![在此处输入图像描述](../Images/bd8069f046886da316d2fea710038ebf.png)

我对两个版本都使用相同的图像，但在 ICS 上看起来不同。如何解决这个问题呢..

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-27T07:40:22.357

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <style name="CustomStyleUpAsHome" parent="Theme.Sherlock.Light">
        <item name="android:actionBarStyle">@style/CustomActionBarUpAsHome</item>
        <item name="android:homeAsUpIndicator">@drawable/arrow_home</item>
        <item name="homeAsUpIndicator">@drawable/arrow_home</item>
    </style>

    <style name="CustomActionBarUpAsHome" parent="CustomActionBar">
        <item name="android:displayOptions">homeAsUp|useLogo|showHome</item>
        <item name="displayOptions">homeAsUp|useLogo|showHome</item>
    </style>

</resources>

<activity
    android:name=".activity.Activity"
    android:screenOrientation="portrait"
    android:theme="@style/CustomStyleUpAsHome">
</activity> 
```

这段代码很好用。尝试做类似的事情。也许它会帮助你。

祝你好运！

# javascript - 这个缩小的 JS 和这个未压缩的版本有什么相同之处？

> ID：15652221
> 
> 赞同：1
> 
> 时间：2013-03-27T05:01:11.387
> 
> 标签：javascript

所以这就是我未压缩的样子：

```
function extractDropdownValues(){     
  var all_selected = true;
  $('.variant_options select').each(function() { 
      if (this.selectedIndex == 0) {
          all_selected = false;
      }
  }); 
```

这是压缩版：

```
extractDropdownValues(){var e=!0;$(".variant_options select").each(function(){this.selectedIndex==0&&(e=!1)}); 
```

我对if 语句`e=!0`的等效`all_selected = true`和压缩版本感到困惑。`this.selectedIndex==0`在压缩版本中，它说`if`这个索引 == 0，然后将其设置为 false。

但在压缩版本中，它看起来像是在检查 是否`selectedIndex`等于 0 并且`&&`（`all_selected = false`即`e=!1`）。但我不希望那个作为`if`条件，那应该是`if`条件满足后的结果。

我读错了吗？

PS 压缩版在生产中不工作，但未压缩的在开发中工作。我不确定这两者是否相关，但从表面上看，它们似乎与我并不相同。

**编辑 1**

正如我所怀疑的，我通过 JS 美化器运行了缩小的 JS，结果如下：

```
function extractDropdownValues() {
    var e = !0;
    $(".variant_options select").each(function () {
        this.selectedIndex == 0 && (e = !1)
    }); 
```

苏……啊……这里发生了WTF？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T05:02:54.323

布尔形式的 0 为假，因此 0（假）的布尔否定为真。

类似地，布尔形式的 1 为真，因此 1（真）的布尔否定为假。

`&&`是短路'and'运算符，这意味着一旦它知道它的结果是什么，它就会立即返回——如果它的第一个操作数是假的，它就会返回假。如果它的第一个操作数为真，那么它只计算第二个操作数并返回它。

所以`e=!1`只在`this.selectedIndex==0`为真时执行（因为如果为假，它知道它将返回假并提前中止）。

# ruby-on-rails - 在 ruby on rails 中读取 webcal URL

> ID：15652222
> 
> 赞同：2
> 
> 时间：2013-03-27T05:01:18.523
> 
> 标签：ruby-on-rails, icalendar, webcal

我正在尝试解析 webcal 链接

```
webcal://www.facebook.com/ical/b.php?uid=13301632&key=asdgagaweg 
```

在 Ruby on Rails 应用程序中，以便我可以自定义事件条目。我研究了[RiCal](http://ri-cal.rubyforge.org/)和[icalendar](https://github.com/icalendar/icalendar)，但都没有显示任何对阅读日历提要 (webcal://) 的支持。

是否有任何支持解析 webcal 地址的 Rails 库？如果没有，我应该如何创建自己的解析器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-16T00:18:34.503

webcal 只是用于访问 icalendar 文档的非官方 URI 方案。您可以使用 http 获取日历并使用几个 icalendar 插件之一对其进行解析：

```
require 'net/http'
uri = URI('http://www.facebook.com/ical/b.php?uid=13301632&key=asdgagaweg')
calendar = Net::HTTP.get(uri) 
```

有关执行 http get 请求的替代方法： [如何使用 Ruby on Rails 发出 HTTP 请求？](https://stackoverflow.com/questions/4581075/how-make-a-http-get-request-using-ruby-on-rails)

然后使用您喜欢的插件解析响应：

[日历](http://icalendar.rubyforge.org/rdoc/)：

```
cal = icalendar.parse(calendar).first 
```

[虚拟机](http://vpim.rubyforge.org/)：

```
cal = Vpim::Icalendar.decode(calendar).first 
```

[ri_cal](http://rubydoc.info/github/rubyredrick/ri_cal/RiCal)：

```
cal = RiCal.parse_string(calendar).first 
```

# mysql - 如何从sql中的每一行值计算

> ID：15652233
> 
> 赞同：2
> 
> 时间：2013-03-27T05:02:31.187
> 
> 标签：mysql, sql

我有一个名为 general_ledger 的表，我需要从中显示 dr_amount、cr_amount 以及它们之间的余额作为 running_balance。这就是为什么我写了一个下面给出的查询。但是我得到了每个查询的结果，比如当前行的余额。但我需要用剩余的余额产生结果。假设第一行 dr_balance 为 20000，cr_balance 为 5000，剩余余额为 15000。在第二行中，只有 cr_balance 为 5000。现在扣除的结果应该是 10000，但我的结果是 -5000。我不知道如何解决这个问题。谁能帮我解决这个问题？我非常需要你的帮助。这是我在下面给出的查询：

```
 SELECT                    '' AS cost_center_id
                                        , '' AS cost_center_name
                                        , '' AS office_code
                                        , CONVERT('2013-02-01',DATETIME) AS transaction_date
                                        , '' AS accounts_head_id
                                        , '' AS account_name
                                        , '' AS opposite_accounts_head_id
                                        , '' AS opposite_account_name
                                        , 'Opening Balance' AS particulars
                                        , tempOpeningBalance.dr_amount
                                        , tempOpeningBalance.cr_amount
                                        , '' AS voucher_no
                                        , '' AS vin
                                        FROM (SELECT IFNULL(mcoa.account_code,'1101010101100321') AS account_code
                                                , IFNULL(mcoa.account_name,'Cash') AS account_name
                                                , IFNULL(mcoa.account_type,'ASSET') AS accountType
                                                , CAST(IFNULL(SUM(IFNULL(maingl.dr_balance,0)),0) AS DECIMAL(27,5)) AS dr_amount
                                                , CAST(IFNULL(SUM(IFNULL(maingl.cr_balance,0)),0) AS DECIMAL(27,5)) AS cr_amount
                                                FROM master_chart_of_accounts AS mcoa
                                                INNER JOIN chart_of_accounts AS coa ON (mcoa.id = coa.master_chart_of_accounts_id AND mcoa.id = 80)
                                                LEFT JOIN general_ledger AS maingl ON (coa.id = maingl.accounts_head_id AND coa.account_code='1101010101100321')
                                                INNER JOIN
                                                (   SELECT  gl.accounts_head_id, MAX(gl.gl_id) AS max_gl_id, gl.office_code, gl.office_type, gl.country_id,gl.cost_center_id
                                                       FROM     general_ledger AS gl
                            -- INNER JOIN voucher_info AS vi ON (gl.voucher_info_id = vi.id)
                                                        -- WHERE  vi.posting_date < '2013-02-01' AND
                                                        WHERE gl.transaction_date < '2013-02-01' AND
                                                          gl.cost_center_id IN ('BI0000000000000000000001') AND
                                                          gl.country_id IN (1) AND
                                                          gl.office_code IN ('UG500013') AND
                                                          1=1
                                                GROUP BY gl.accounts_head_id, gl.office_code, gl.office_type, gl.country_id,gl.cost_center_id
                                                ORDER BY gl.accounts_head_id
                                                ) AS tmpgl
                                                ON (    maingl.office_code = tmpgl.office_code
                                                AND maingl.office_type = tmpgl.office_type
                                                AND maingl.accounts_head_id = tmpgl.accounts_head_id
                                                AND maingl.country_id = tmpgl.country_id
                                                AND maingl.cost_center_id = tmpgl.cost_center_id
                                                AND maingl.gl_id = tmpgl.max_gl_id
                                                   )
                                                 WHERE  mcoa.account_status_id = 1 AND
                                                    coa.account_status_id = 1
                                             ) AS tempOpeningBalance

UNION

SELECT      vi.cost_center_id
      , cc.center_name AS cost_center_name
      , gl.office_code
      , vi.posting_date AS transaction_date
      , vd.accounts_head_id
      , (SELECT chart_of_accounts.account_name FROM chart_of_accounts WHERE chart_of_accounts.id = vd.accounts_head_id) AS account_name
      , vd.opposite_accounts_head_id
      , (SELECT chart_of_accounts.account_name FROM chart_of_accounts WHERE chart_of_accounts.id = vd.opposite_accounts_head_id) AS opposite_account_name
      , vd.particulars
      , gl.dr_amount AS dr_amount -- here to check
      , gl.cr_amount AS cr_amount
      , vi.voucher_no
      , vi.vin
FROM general_ledger AS gl
INNER JOIN voucher_info AS vi
 ON (gl.voucher_info_id = vi.id)
INNER JOIN cost_center AS cc
 ON (vi.cost_center_id = cc.id)
INNER JOIN voucher_details AS vd
 ON (vi.id = vd.voucher_info_id)
INNER JOIN chart_of_accounts AS coa
 ON (vd.accounts_head_id = coa.id)

WHERE   vi.posting_date BETWEEN '2013-02-01' AND'2013-02-28'
    AND vi.voucher_status_id = 3
    AND vd.status_id = 1
    AND vi.office_code = 'UG500063'
    AND coa.account_code='1101010101100321'
    AND coa.cost_center_id = 'BI0000000000000000000001'
ORDER BY   cost_center_name
     , office_code
     , transaction_date; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T05:44:43.810

使用这样的变量

```
SET @running_balance=0;
SELECT dr_amount AS dr_amount 
      , cr_amount AS cr_amount
      , @running_balance := (@running_balance + dr_amount - cr_amount)
FROM general_ledger 
```

# sql - 过去 4 周的 SQL 汇总总计

> ID：15652239
> 
> 赞同：0
> 
> 时间：2013-03-27T05:03:05.637
> 
> 标签：sql, rollup

我有一张表，我想在查询中获取前四个星期的订单总数。但我想用 SELECT 将其返回（该行的前 4 周 Order1 列的总数 - 如果它们存在）

```
PurchasingID Order1              Date         FourWeekTotal
------------ ------------------- -------      ---------------
1            1.00                2013-04-21   14.00
2            2.00                2013-04-14   12.00
3            3.00                2013-04-07   9.00
4            4.00                2013-03-31   5.00
5            5.00                2013-03-24   0.00 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T05:14:04.687

我的理解是对于表中的每条记录，您希望查看 Order1 本身的总和以及在主记录之前的四个星期内具有 Date 值的每条记录。干得好：

```
create table MysteryTable
(
    PurchasingId int not null primary key identity(1,1),
    Order1 money not null,
    [Date] date not null
)

insert MysteryTable( Order1, [Date] ) values ( 1.00, '2013-04-21' )
insert MysteryTable( Order1, [Date] ) values ( 2.00, '2013-04-14' )
insert MysteryTable( Order1, [Date] ) values ( 3.00, '2013-04-07' )
insert MysteryTable( Order1, [Date] ) values ( 4.00, '2013-03-31' )
insert MysteryTable( Order1, [Date] ) values ( 5.00, '2013-03-24' )

select
    t1.PurchasingId
    , t1.Order1
    , t1.Date
    , SUM( ISNULL( t2.Order1, 0 ) ) FourWeekTotal
from
    MysteryTable t1
    left outer join MysteryTable t2
     on DATEADD( ww, -4, t1.Date ) <= t2.Date and t1.Date > t2.Date
group by
    t1.PurchasingId
    , t1.Order1
    , t1.Date
order by
    t1.Date desc 
```

解释：

将表加入自身，t1 表示要返回的记录，t2 表示要聚合的记录。加入基于 t1 的日期减去四个星期小于或等于 t2 的日期和 t1 的日期大于 t2 的日期。然后按 t1 字段对记录进行分组，并对 t2.Order1 求和。左外连接是为了说明前面没有任何数据的一条记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:09:34.400

尝试这个...

```
Declare @LBDate date
SET @LBDate = DATEADD(d,-28,getdate()) 
```

现在写你的选择查询......

```
Select * from Orders where Date between @LBDate and Getdate() 
```

您也可以使用您需要的日期而不是当前日期..

# java - 我想在我的枚举中创建一个方法？

> ID：15652243
> 
> 赞同：3
> 
> 时间：2013-03-27T05:03:36.943
> 
> 标签：java

我想在我的枚举中添加一个`toString`方法。如果取决于我现在是 0.20，`CustomerType`我的班级会返回折扣百分比消息，因为它是 customerType 大学。我是枚举的新手，我希望能够向我的枚举添加一个方法，根据客户类型打印“College customer”。实现这一点有困难吗？我到底做错了什么？`System.out.println()``cutomerType``toString`

听听我的课：

```
import java.text.NumberFormat;
public class CustomerTypeApp
{
public static void main(String[] args)
{
    // display a welcome message
    System.out.println("Welcome to the Customer Type Test application\n");

    // get and display the discount percent for a customer type
    double Customer = getDiscountPercent(CustomerType.College);
    NumberFormat percent = NumberFormat.getPercentInstance();
    String display = "Discount Percent: " + percent.format(Customer);

    System.out.println(display);
}

// a method that accepts a CustomerType enumeration
public static double getDiscountPercent (CustomerType ct)
{
    double discountPercent = 0.0;
    if (ct == CustomerType.Retail)
        discountPercent = .10;
    else if (ct == CustomerType.College)
        discountPercent = .20;
    else if (ct == CustomerType.Trade)
        discountPercent = .30;

    return discountPercent;
}
} 
```

这是我的枚举：

```
public enum CustomerType {
    Retail,
    Trade,
    College;
    public String toString() {
        String s = "";
        if (this.name() == "College")
        s = "College customer";
        return s;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T05:11:39.880

枚举非常强大，可以将静态数据保存在一个地方。你可以这样做：

```
public enum CustomerType {

    Retail(.1, "Retail customer"),
    College(.2, "College customer"),
    Trade(.3, "Trade customer");

    private final double discountPercent;
    private final String description;

    private CustomerType(double discountPercent, String description) {
        this.discountPercent = discountPercent;
        this.description = description;
    }

    public double getDiscountPercent() {
        return discountPercent;
    }

    public String getDescription() {
        return description;
    }

    @Override
    public String toString() {
        return description;
    }

} 
```

# jquery - 如何防止使用jquery提交表单？

> ID：15652244
> 
> 赞同：1
> 
> 时间：2013-03-27T05:03:41.803
> 
> 标签：jquery, html, jsp

实际上在jsp页面中我使用的是spring标签和jquery代码..听到的是我的代码..

```
 <form:form action="process">

        <p class="forgot">
            <a href="login/forgotPassword" class="submit_forgotPassword">Forgot your
                password?</a>
        </p>
        <p class="remember">
            <input id="signin_submit" value="Sign in" tabindex="6" type="submit">

        </p>
    </form:form>

<script>
    $('#LOGIN').ajaxForm({
        target : '#body',
        success : function(responseText, statusText, xhr, $form) {
            alert(responseText);
        },
        beforeSubmit : function() {
            $.blockUI({
                message : '<h1> Just a moment...</h1>'
            });
        }
    }); 
    $('.submit_forgotPassword').click(function(event){
        event.preventDefault(); // interrupt default hyperlink behavior
        $("#LOGIN").attr("action",$(this).attr("href"));
        $("#LOGIN").submit();
    });

</script> 
```

问题是提交表单不执行所需的操作

实际上我的代码有两个动作 1\. `submit`2\. `Forgot Password`?

1.第一次我们给出正确的值并点击提交它工作正常..

2.第二次（点击注销后）我们提供emailid并点击`forgot Password?`链接电子邮件将发送到给定的email id它也可以正常工作......现在问题来了......

第 3.3 次我们给出正确的值并单击提交电子邮件发送到给定的电子邮件（它像第二步一样工作）......

为什么它会这样工作我指定了每个点击处理程序表单......

`forgot password?`当我们提供正确的值时，每次发送邮件时都单击链接...

给我建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:22:38.627

我的建议是不要使用登录表单操作作为忘记密码处理程序。

```
$("#LOGIN").attr("action",$(this).attr("href"));
        $("#LOGIN").submit(); 
```

如果您有一个忘记密码的页面，为什么不直接重定向到该页面并从那里处理请求？

混淆可能是您使用 ajaxForm 插件建议使用它来提交表单：

```
// attach handler to form's submit event 
$('#myFormId').submit(function() { 
    // submit the form 
    $(this).ajaxSubmit(); 
    // return false to prevent normal browser submit and page navigation 
    return false; 
}); 
```

我会将重置密码视为单独的请求，并获取您希望使用的任何参数，例如用户名作为数据，如下所示：

```
var queryString = $('#myFormId').formSerialize(); 
```

这取决于您想要达到的目标。您能解释一下为什么要使用重置密码操作提交表单吗？

我可以看到使用 JSP 没有任何区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T06:14:29.420

您正在将表单操作更改为“忘记密码”链接，同时单击“忘记密码”按钮。我们必须将表单操作恢复为“提交”链接，否则“提交”按钮将发布帖子到“忘记密码”链接。

```
<script>

    $('#LOGIN').ajaxForm({
        target : '#body',
        success : function(responseText, statusText, xhr, $form) {
            alert(responseText);
        },
        beforeSubmit : function() {
            $.blockUI({
                message : '<h1> Just a moment...</h1>'
            });
        }
    }); 
    $('.submit_forgotPassword').click(function(event){
        event.preventDefault(); // interrupt default hyperlink behavior
        //Save original form submit link before changinf it to forgot password link
        var submitBtnLink = $("#LOGIN").attr("action");
        $("#LOGIN").attr("action",$(this).attr("href"));
        $("#LOGIN").submit();
       //Revert form action to submit link after submitting forgot password
       $("#LOGIN").attr("action",submitBtnLink);
    });

</script> 
```

尝试这个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T06:25:50.637

您在此处更改了提交 URL：

```
$('.submit_forgotPassword').click(function(event){
        event.preventDefault(); // interrupt default hyperlink behavior
        $("#LOGIN").attr("action",$(this).attr("href"));
        $("#LOGIN").submit();
    }); 
```

因此，您需要在提交点击时重置网址：

```
 $('#signin_submit').click(function(event){
        event.preventDefault(); // interrupt default hyperlink behavior
        $("#LOGIN").attr("action","login/processLogin");
        $("#LOGIN").submit();
    }); 
```

# apache - Apache 服务器使用 bash 记录最高流量

> ID：15652246
> 
> 赞同：0
> 
> 时间：2013-03-27T05:04:05.430
> 
> 标签：apache, bash

我有一个 Apache 服务器日志，正在尝试确定哪个 IP 地址产生了最多的流量。我已经设法将其格式化，因此它只是 IP 及其流量（以字节为单位）：

```
xxx.xxx.xxx.xxx 915925
yyy.yyy.yyy.yyy 1193
zzz.zzz.zzz.zzz 2356 
```

所以现在我正在寻找一种方法来组合和添加相同 IP 的字节，然后找到最高值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:49:58.757

如果文件中有 ip 和流量字节，请使用以下内容完成工作。

1.  **`cat file | perl -ane '$h{ $F[0] } += $F[1]; END { for ( sort keys %h ) { printf qq[%s %d\n], $_, $h{ $_ } } }' | sort -k2 -n -r`**

2.  **`awk '{A[$1]+=$2;next}END{for(i in A){print i,A[i]}}' file | sort -k2 -n -r`**

# jquery - 即使使用 (.listview("refresh")) 进行 ajax 调用后，JQuery Mobile css 也不起作用

> ID：15652247
> 
> 赞同：0
> 
> 时间：2013-03-27T05:04:11.013
> 
> 标签：jquery, jquery-mobile

该页面在调用 Ajax 后丢失了其 JQMobile CSS，即使我添加了：

```
$("#idlist").listview("refresh"); 
```

在我的代码中：

```
$(document).ready(function() {
var display= $("#displaydata");
    function displaydata()
{
    $.ajax({
        crossDomain:true,
        type:"GET",
        data:"lihat==suku",
        url:"server.php",
        success: function(data){        
        display.html(data);

        }
    });
}

displaydata(); }); 
```

我已经从 PHP 调用数据，这是我的 PHP 代码：

```
 if(isset($_GET["lihat"])=="suku")
{
    $tampil = mysql_query("select * from deskripsi");
    echo"<ul id='ul' data-role='listview' data-inset='true' data-filter='true' data-filter-placeholder='Cari Suku Besar...'>";
    while($r = mysql_fetch_array($tampil))
    {
        echo"<li>$r[suku]</li>";    
    }
    echo"</ul>";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T05:54:41.367

这是一个建议：

在您的**PHP**代码中，构建一个**HTML**字符串，然后最后回显该字符串值。

像这样：

```
if(isset($_GET["lihat"])=="suku") {
    $tampil = mysql_query("select * from deskripsi");
    $string = "<ul id='ul' data-role='listview' data-inset='true' data-filter='true' data-filter-placeholder='Cari Suku Besar...'>";
    while($r = mysql_fetch_array($tampil)) {
        $string .= "<li>$r[suku]</li>";    
    }
    $string .= "</ul>";
    echo $string;
} 
```

在附加响应数据后，在您的 ajax 成功函数中添加以下代码：

```
$("#idlist").listview().trigger("create"); 
```

享受...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T05:48:40.017

按下`f12`并查看是否收到任何错误消息。您确定收到正确的响应吗？

您需要成功功能如下。`html()`将简单地替换 div 中的所有内容，因此您必须再次重新添加`<ul></ul>`标签。

```
 success: function(data){ 
        var tempString = "<ul data-role='listview'>";
        tempString += data;
        tempString += "</ul>";
        display.html(tempString);
    } 
```

尝试刷新列表视图，如下所示

```
$("#idlist").listview(); 
```

`$("#idlist").listview("refresh");`似乎适用于现有的列表视图，而不适用于我们从头开始构建的列表视图。

# android - java.Lang.RuntimeException, setParameters 在 android(4.1.1) 版本中失败

> ID：15652249
> 
> 赞同：4
> 
> 时间：2013-03-27T05:04:26.817
> 
> 标签：android, android-camera, android-sdcard, android-camera-intent

我开发了一个应用程序，可以在打卡时拍摄照片。它在 Acer 选项卡上运行良好（捕获图像并保存在 sdcard 中）。现在，当我在三星 Galaxy（Android-4.1.1）中运行相同的应用程序时，我的应用程序在点击打卡时出现“不幸的是应用程序已停止”。我的代码就在这里。

```
// ClockIn functionality
clockin_btn.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {       
        clockin_btn.setEnabled(false);
        camera.stopPreview();
        capturePhoto(0);
      // showing one error here in log cat
        previewing = false;         
        clockin_label.setText(String.format(session_msg,logout_seconds));   
        ticker.setBase(SystemClock.elapsedRealtime()); 
        ticker.start();
    }       
});

private String capturePhoto(int clockInOutMode) {

    final int mode = clockInOutMode;
    img_file = String.format("%d.jpg", System.currentTimeMillis());

    Camera.PictureCallback mCall = new Camera.PictureCallback() {               

        public void onPictureTaken(byte[] data, Camera camera) {

            try {    

                Bitmap mBitmap = BitmapFactory.decodeByteArray(data, 0, data.length);           
                File file = new File(Constants.EMP_IMG_LOCATION, img_file);           
                FileOutputStream fOut = new FileOutputStream(file);                    
                mBitmap.compress(Bitmap.CompressFormat.JPEG, 80, fOut);               
                fOut.flush();               
                fOut.close();

                if ( mode == 0) {
                    clockIn(img_file);
                } else {
                    clockOut(img_file);
                }

            } catch (FileNotFoundException e) {
                e.printStackTrace();

            } catch (IOException e) {        
                e.printStackTrace();

            } 
        }   

    };  

    Camera.Parameters cameraParams = camera.getParameters();
    List<Camera.Size> sizes = cameraParams.getSupportedPictureSizes();
    Camera.Size result = null;
    for (int i=0;i<sizes.size();i++){
        result = (Size) sizes.get(i);
        Log.i("PictureSize", "Supported Size.Width: " + result.width + "height: " +result.height);         
    }

    cameraParams.setPictureSize(640, 480);
    camera.setParameters(cameraParams);
            System.gc();
    camera.setPreviewCallback(null);
    camera.takePicture(null, null, mCall);

       // showing one error here in logcat

    return img_file;
} 
```

我的 Logcat 显示为：

```
03-27 04:52:19.273: E/AndroidRuntime(4105): FATAL EXCEPTION: main
03-27 04:52:19.273: E/AndroidRuntime(4105): java.lang.RuntimeException: setParameters failed
03-27 04:52:19.273: E/AndroidRuntime(4105):     at android.hardware.Camera.native_setParameters(Native Method)
03-27 04:52:19.273: E/AndroidRuntime(4105):     at android.hardware.Camera.setParameters(Camera.java:1452) 
```

和我的 android.manifest.xml 文件：

```
 <uses-feature android:name="android.hardware.camera" />
 <uses-feature android:name="android.hardware.camera.autofocus" />
 <used-feature android:name="android.hardware.location" />
 <used-feature android:name="android.hardware.camera.setParameters" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:10:27.210

在调用 takePicture 方法之前调用`camera.takePicture(null, null, mCall);`startPreview 方法，我使用的 startPreview 方法是

```
private void startPreview() {
        if (cameraConfigured && camera!=null) {
          camera.startPreview();
          inPreview=true;
        }
      } 
```

通过这个我解决了我的问题......它可以帮助你们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:08:55.570

它并非在所有情况下都有效。你打电话`getSupportedPictureSizes()`然后你可以得到名单。`setPictureSize()`并从列表中选择参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-16T07:57:35.790

```
private void flipBackToFrontCamera() {

    if (mCamera != null) {
        mCamera.stopPreview();
        mCamera.release();
        mCamera = null;
    }

    mCamera = Camera.open(1);

    if (mCamera != null) {
        try {
            mCamera.setPreviewDisplay(surfaceView.getHolder());
            mCamera.startPreview();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

# javascript - 将变量添加到 href URL onClick JQUERY 的末尾

> ID：15652251
> 
> 赞同：16
> 
> 时间：2013-03-27T05:04:56.357
> 
> 标签：javascript, jquery, onclick

我觉得这应该有效，但没有。不知道我做错了什么。

```
function addURL()
{   
$(this).attr('href', function() {
return this.href + '&cylnders=12';
}   

<a onclick="addURL();" href="/search-results/?var1=red&var2=leather">Click this</a> 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-27T05:11:57.083

首先，您缺少一堆括号：

```
function addURL()
{
    $(this).attr('href', function() {
        return this.href + '&cylnders=12';
    });
} 
```

其次，在您的代码中，“this”指的是窗口，而不是元素。试试这个：

```
<a onclick="addURL(this)" href="/search-results/?var1=red&var2=leather">Click this</a>

function addURL(element)
{
    $(element).attr('href', function() {
        return this.href + '&cylnders=12';
    });
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T05:30:38.267

为什么不向链接href添加一个ID或类以通过jquery识别它？在您可以将任何数据添加到 href 属性之前，您的链接似乎已被触发。

```
<a class="datalink" href="/search-results/?var1=red&var2=leather">Click this</a>
<script>

$('.datalink').attr('href', function() {
return this.href + '&cylnders=12';

});

</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T05:17:30.973

```
 function addURL()
      {
     var data=window.location+"&cylnders=12";
     alert(data);
     } 
```

试试这个概念。希望它会给你一些解决方案。

也试试这个

```
 function addURL()
          {
               window.location.href='/search-results/?var1=red&var2=leather&cylnders=12'
           } 
```

# regex - sed 使用来自字符串包含空间的参数

> ID：15652253
> 
> 赞同：0
> 
> 时间：2013-03-27T05:05:18.523
> 
> 标签：regex, bash, sed

我正在编写函数以将文件中的有效选项替换为我的设置。1.txt 是这样的：

```
PasswordAuthentication yes
PermitRootLogin yes 
```

我的函数将处理文件，然后输出如下：

```
#PasswordAuthentication yes
PasswordAuthentication no
#PermitRootLogin yes
PermitRootLogin no 
```

sed 参数来自函数 sed_chain() 生成的字符串，如下所示： 问题是如果 ${pattern} 和 ${option} 之间有空格，则出现错误：sed: -e expression #1, char 46: 未终止的 `s' 命令

如果它们之间没有空间，则该功能有效，但这不是我想要的。

```
#!/bin/bash
A="PasswordAuthentication no"
B="PermitRootLogin no"
F="/tmp/1.txt"

sed_chain() {
    args=("$@")
    file=${@:(-1)}
    pattern_params=""

    for i in $(seq 0 $(($#-2)))
    do
        pattern=$(echo ${args[$i]}|cut -d" " -f1)
        option=$(echo ${args[$i]}|cut -d" " -f2)
        echo $pattern
        echo $option

        pattern_params="-e s/^[^#]*${pattern}.*$/#&\n${pattern} ${option}/g $pattern_params"    # failed
        #pattern_params='-e s/^[^#]*'${pattern}'.*$/#&'"\n${pattern}${option}"'/g '${pattern_params}  # passed
        echo "*** $pattern_params ***"
    done

    sed $pattern_params $file
}

sed_chain "$A" "$B" "$F" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:20:31.917

这 [[:space:]] 可能有用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:18:00.550

尝试在表达式周围加上单引号。

```
pattern_params="-e 's/^[^#]*${pattern}.*$/#&\n${pattern} ${option}/g' $pattern_params" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:08:42.133

我有一个解决方法，不是将所有参数组合成一个，而是为每个参数一个接一个地运行 sed 命令。它工作正常。但是我仍然想知道如何将参数组合成一个。

```
sed_chain() {
    args=("$@")
    file=${@:(-1)}

    for i in $(seq 0 $(($#-2)))
    do
        pattern=$(echo ${args[$i]}|cut -d" " -f1)
        option=$(echo ${args[$i]}|cut -d" " -f2)
        echo $pattern
        echo $option

        pattern_param="s/^[^#]*${pattern}.*$/#&\n${pattern} ${option}/g"

        sed -i -e "$pattern_param" $file
    done

} 
```

# c# - 不使用 Web 服务的 C# 中的实时代码

> ID：15652263
> 
> 赞同：2
> 
> 时间：2013-03-27T05:06:11.667
> 
> 标签：c#, sql-server, wpf, events

我有一个 WPF 代码控件来获取数据并显示它。当数据库中的相应表发生更改时，我必须通过更新它来使其生效。
我无法使用 WCF 服务。我想知道我是否可以查看特定表的更改并将这些事件冒泡到我的 WPF 表单中？我正在使用`SQL SERVER 2008`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T05:19:06.157

我以前从未尝试过，但这可能会帮助您实现您想要做的事情。

[在 Windows 应用程序中使用 SqlDependency](http://msdn.microsoft.com/en-us/library/a52dhwx7%28VS.80%29.aspx)

# makefile - Makefile 可以在特定路径中生成所有目标文件

> ID：15652264
> 
> 赞同：0
> 
> 时间：2013-03-27T05:06:17.763
> 
> 标签：makefile, gnu-make

我哪里出错了！！

我正在尝试在**../bin/中生成目标文件**

但是下面的代码在相应的源文件目录中生成。

在我正在运行的代码下方。

## 修改后的代码：

```
LIB = $(BIN_DIR)/libutils.a
APP = $(BIN_DIR)/app

CC = gcc
AR = ar

CFLAGS = -Wall -g
LDFLAGS =

all: $(LIB) $(APP)

SRC =   $(SRC_DIR)/add.c \
        $(SRC_DIR)/sub.c 

OBJ = $(SRC:.c=.o)

INCLUDES = -I$(INC_DIR)/
LIBS = -L../ -L/usr/local/lib -lm

LDFLAGS = -g
.SUFFIXES: .c

.c.o:
    $(CC) $(INCLUDES) -c $(SRC_DIR)/$< -o $(BIN_DIR)/$@

$(LIB): $(OBJ)
$(AR) rcs $(LIB) $(OBJ)

$(BIN_DIR)/app: $(BIN_DIR)/test.o \
                $(BIN_DIR)/t.o \
                $(BIN_DIR)/libutils.a
    $(CC) $(LDFLAGS) -o $@ $^

clean:
    rm -f $(LIB) $(BIN_DIR)/* $(SRC_DIR)/*.o *.o 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:41:11.083

你仍然有规则：

```
$(LIB): $(OBJ)
    ... 
```

并且`OBJ`仍然如此，所以*如果您的对象规则按预期工作*`src_dir/add.o src_dir/sub.o`，Make 将尝试构建这些对象。所以，第一步：

 *SRC = $(SRC_DIR)/add.c \ $(SRC_DIR)/sub.c

~~OBJ = $(SRC:.c=.o)~~
OBJ = $(patsubst $(SRC_DIR)/%.c,$(BIN_DIR)/%.o,$(SRC))

现在你会发现你的对象规则，

```
.c.o:
    ... 
```

不起作用，因为它希望在目标文件应该去的同一个地方找到源文件（即`$(OBJ_DIR)`）。因此，将此规则替换为：

```
$(BIN_DIR)/%.o: $(SRC_DIR)/%.c
    $(CC) $(INCLUDES) -c $< -o $@ 
```

我注意到您没有构建`$(BIN_DIR)/t.o`和的规定`$(BIN_DIR)/test.o`，但应用程序需要它们。你应该调查一下。

进一步的改进是可能的，但这是一个开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:10:02.777

您的 SRC 有一个相对路径，而您的 OBJ 只是扩展名更改为的 SRC。○

所以 OBJ 将包含以下内容：

```
../src/add.o
../src/sub.o 
```

并且将在其中创建 .o。

进行这些更改，它将起作用：

```
SRC =   add.c \
        sub.c

.c.o:
    $(CC) $(INCLUDES) -c ../src/$< -o ../bin/$@ 
```*

# mysql - MySQL：外键约束在 InnoDB 中被忽略

> ID：15652267
> 
> 赞同：1
> 
> 时间：2013-03-27T05:06:34.537
> 
> 标签：mysql, sql, foreign-keys

我正在创建一个名为 fac_master 的表，它有一个外键，它引用了 dept_master 的 dept_id。正在创建该表，但未在该表上强制执行外键。我在 dept_master 中也有一个外键，它工作得很好，但不适用于这个表。

```
create table Dept_Master
(   dept_id smallint unsigned auto_increment not null comment 'Department/Branch ID',
    dept_name varchar(100) not null comment 'Department Name such as Computer Engineering',
    prog_id tinyint unsigned not null comment 'Program ID under which this department falls',
    PRIMARY KEY(dept_id),
    CONSTRAINT fk_dept FOREIGN KEY(prog_id) REFERENCES Prog_Master(prog_id) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE=InnoDB COLLATE latin1_general_ci;

create table Fac_Master
(   fac_id smallint unsigned auto_increment not null comment 'Faculty ID',
    dept_id smallint unsigned not null comment 'Department Id of the department in which this faculty works',
    fac_name varchar(30) not null comment 'Name of the Faculty',
    fac_father_name varchar(30) comment 'Father\'s name of the faculty',
    fac_surname varchar(30) comment 'Surname of the faculty',
    fac_designation varchar(30) not null comment 'Designation of the faculty',
    fac_mail_id varchar(50) comment 'E-mail id of the faculty',
    fac_mobile bigint(10) unsigned comment 'Mobile number of the faculty',
    fac_address varchar(100) comment 'Permanent Address of the faculty',
    fac_status varchar(1) not null comment 'Status of Faculty: A=Active D=Deactive',
    fac_joining_date date comment 'Joining Date of the Faculty',
    PRIMARY KEY(fac_id),
    CONSTRAINT fk_faculty FOREIGN KEY(dept_id) REFERENCES Dept_Master(dept_id) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE=InnoDB COLLATE latin1_general_ci; 
```

当我尝试在“dept_master”的“prog_id”中添加一个在“prog_master”的“prog_id”中不存在的值时，它会给出 fk 约束错误，这很好但是当我尝试在“dept_id”中添加一个值时“fac_master”在“dept_master”的“dept_id”中不存在，然后它被添加，但它应该给出一个 fk 约束错误。我还检查了信息模式中的外键约束，发现表 fac_master 没有外键约束。我在 Windows 7 HP 64 位版本上使用 WAMP Server 2.2。

问题是什么？请帮忙..

**编辑：**

```
alter table Fac_Master
add constraint fk_faculty FOREIGN KEY(dept_id) REFERENCES Dept_Master(dept_id) ON DELETE RESTRICT ON UPDATE RESTRICT; 
```

如上所示使用alter table 有效，但与create table 一起使用时无效。可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T08:21:36.457

看来问题是由您逃避`'`in的方式引起的`'Father\'s name of the faculty'`。当您更改它时`'Father''s name of the faculty'`，您会发现外键约束已正确创建。

根据手册，包含单引号的两种方式都是正确的，因此这是一个错误。请参阅[此 MySQL 错误票](http://bugs.mysql.com/bug.php?id=67881)。

# php - 混搭应用程序框架

> ID：15652268
> 
> 赞同：1
> 
> 时间：2013-03-27T05:06:44.050
> 
> 标签：php, frameworks, mashup

我需要创建一个 mashup 应用程序（使用许多 API 将不同的服务集成为一个）。需要明确的是，mashup 与使用许多 API 的 Web 应用程序之间的区别在于，mashup 还将集成现成的小部件 (UI)，而不仅仅是请求 API。

是否有专注于 mashup 应用程序的框架（首选 PHP）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:24:57.740

它不完全是您想要的，但这可能会有所帮助： [http](http://elastic.io/) ://elastic.io/ - 这是一个新工具，专为希望创建将不同服务联系在一起的简单应用程序的最终用户而设计

[http://pipes.yahoo.com/pipes/](http://pipes.yahoo.com/pipes/) - 是一个强大的组合工具，用于聚合、操作和混搭来自网络的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:13:04.560

您描述的“混搭”应用程序与任何其他应用程序没有任何不同。

如果您不需要大量代码（但主要使用 Web 服务等），那么选择一个轻量级框架。

你选择哪一个将取决于你的技能水平。

从 Laravel 和 Silex 开始。不知道你为什么说 PHP Preferred，但如果你刚刚开始，那么我建议你也看看 Rails。

# qt - QGraphicsView橡皮筋选择矩形不可见

> ID：15652269
> 
> 赞同：3
> 
> 时间：2013-03-27T05:06:45.780
> 
> 标签：qt, qgraphicsview, qgraphicsitem, qgraphicsscene

我有一个`QGraphicsView`小部件，场景中有很多物品。我在 ctr + 鼠标左键单击上平移视图并将其缩放到使用鼠标左键拖动创建的橡皮筋矩形。我看不到橡皮筋选择矩形（虚线），而橡皮筋选择功能工作正常。任何人都可以帮助我理解这一点吗？
在我看来，我使用这些标志：

```
setTransformationAnchor(QGraphicsView::AnchorUnderMouse);
setViewportUpdateMode(QGraphicsView::SmartViewportUpdate);
setRenderHints(QPainter::HighQualityAntialiasing | QPainter::SmoothPixmapTransform);
setOptimizationFlag(QGraphicsView::DontSavePainterState,true);
setCacheMode(QGraphicsView::CacheBackground);
setOptimizationFlag(QGraphicsView::DontAdjustForAntialiasing);
setViewport(new QGLWidget); 
```

下面是我的事件处理程序。

鼠标按下事件处理程序：

```
void MyView::mousePressEvent(QMouseEvent* event)
{
    if(event->button()==Qt::LeftButton)
    {       
        if(event->modifiers()==Qt::ControlModifier)
        {
            setDragMode(QGraphicsView::NoDrag);
            m_rubberBandActive = false;         
            mousepressed=true;
            m_lastDragPos = event->pos();
            return;
        }
        else
        {           
            setDragMode(QGraphicsView::RubberBandDrag);
            m_rubberBandOrigin = event->pos();
            m_rubberBandActive = true;
        }
    }   
    event->accept();
   }
   else
   {    
      QWidget::mousePressEvent(event);
   }    
} 
```

鼠标移动事件：

```
void MyView::mouseMoveEvent(QMouseEvent* event)
{
if(mousepressed)
{
    QPointF delta = mapToScene(event->pos()) - mapToScene(m_lastDragPos);
    this->panView(delta);
    m_lastDragPos = event->pos();   
    return;
}
event->accept();
} 
```

鼠标释放事件处理程序：

```
void MyView::mouseReleaseEvent(QMouseEvent *event)
{
if (m_rubberBandActive)
{
    QPoint rubberBandEnd = event->pos();        
    QRectF zoomRectInScene = QRectF(mapToScene(m_rubberBandOrigin),mapToScene(rubberBandEnd));

    fitInView(zoomRectInScene, Qt::KeepAspectRatio);
    m_rubberBandActive = false;
}

mousepressed=false;
event->accept();
} 
```

平移视图：

```
void MyView::panView(QPointF delta)
{
    QPoint viewCenter(viewport()->width() / 2 + delta.x(), viewport()->height() / 2 + delta.y());
    QPointF newCenter = mapToScene(viewCenter);
    centerOn(newCenter);
} 
```

# jquery - Jquery选择所有未选中的带有文本== FOO的收音机

> ID：15652272
> 
> 赞同：1
> 
> 时间：2013-03-27T05:06:59.907
> 
> 标签：jquery, jquery-selectors

我有一个小提琴[http://jsfiddle.net/rh0dium/kRy2N/3/](http://jsfiddle.net/rh0dium/kRy2N/3/)我正在尝试创建一个“标记所有未回答的......”作为 FOO。但我在最后两部分遇到了麻烦。第一个是查找所有标签的选择器，其中包含尚未回答的收音机。我尝试了以下各种组合：

```
var inputs = $('input:radio:not(:checked):contains("' + value + '")'); 
```

但他们似乎都没有抓住它。此外，一旦我得到它们，我如何确保它

1.  还没回答。
2.  确保对于给定的标签，您只能得到一个答案。
3.  将其重新添加到列表中，以便如果用户改变主意，我们可以将其重置。这就是`answers`.

我看错了吗？或者一些 jquery 大师可以帮助我。

**更新**

[http://jsfiddle.net/rh0dium/kRy2N/4/](http://jsfiddle.net/rh0dium/kRy2N/4/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T05:17:35.540

以下代码将获取所有`radio`未检查的内容并且值包含`value`

```
$('input:radio:not(:checked)[value*="' + value + '"]'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:03:20.850

尝试这个

```
$(document).ready(function() {
    var answers = [];
    $("#multi_choice_change").change(function() {
        var value = $("select#multi_choice_change option:selected").val();
        console.log("Changed to " + value);
        //Remove checked from unmatched radio buttons
        $('input:radio[value!="'+value+'"]').prop('checked',false);
        //add checked to matched radio buttons 
        $('input:radio[value="'+value+'"]').prop('checked','checked');
         })
}); 
```

# pdfbox - PDFToImage 是否也会提取嵌入的图像 - pdfbox？

> ID：15652278
> 
> 赞同：1
> 
> 时间：2013-03-27T05:07:36.940
> 
> 标签：pdfbox

`PDFToImage`命令也会进行图像提取吗？

我想将`PDF`文件转换为`Image` `(PDFBOX)`

我正在使用`PDFToImage`pdf 到图像文件转换的命令，但是我在运行时缺少 PDF 中的所有嵌入式图像`PDFToImage`。

或者我是否需要单独运行提取图像才能从 PDF 文件中提取图像？

有没有其他方法可以实现这一点？？？

提前致谢 ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-11T14:42:49.047

`PDFToImage`正在将 PDF 页面转换为图像并每页输出一张图像。您正在寻找`ExtractImages`提取 PDF 文档的所有嵌入图像的方法。

更多信息`ExtractImages`可以在这里找到：

[http://pdfbox.apache.org/apidocs/org/apache/pdfbox/ExtractImages.html](http://pdfbox.apache.org/apidocs/org/apache/pdfbox/ExtractImages.html)

为了更具体地回答您的问题，这两个程序做不同的事情。您可以重新编码收集这两种功能的单个功能，或单独运行它们。

# perl - 如何在perl中将二维数组输出到csv文件

> ID：15652286
> 
> 赞同：0
> 
> 时间：2013-03-27T05:08:34.693
> 
> 标签：perl, csv, printing, multidimensional-array, output

如何在 perl 中将二维数组输出到 csv 文件？

例如，我构建了一个维度数组：

```
for my $i(0..100) {
    for my $j (0..50) {
        $data[$i][$j]=0;
    } 
} 
```

我想将其输出到 csv 文件以供将来参考。并且这个 csv 文件应该被读取并重建为二维数组。使用如下代码：

```
my $outfilename="output.csv"; 
my $csv = Text::CSV->new;
open OUT , '<', $outfilename or die "Could not open $outfilename: $!";

while( my $row = $csv->getline( OUT ) ) { 
    push @output, $row;
}
close OUT; 
```

什么是有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T08:15:02.013

像往常一样，CPAN 是你的朋友：你可以使用[Tie::Array::CSV](http://search.cpan.org/~jberger/Tie-Array-CSV-0.07/lib/Tie/Array/CSV.pm)

文档中的示例看起来很像您需要的：

```
use strict; use warnings;
use Tie::Array::CSV;
tie my @file, 'Tie::Array::CSV', 'filename';

# print $file[0][2];
$file[3][5] = "Camel"; 
```

至于效率，就您的时间而言，它看起来非常有效。该模块有一个警告说“某些操作可能非常低效[...]（例如），（un）shift-ing”。不过，您的案件似乎不会受到影响。

# c++ - 如何访问结构中定义的变量

> ID：15652287
> 
> 赞同：0
> 
> 时间：2013-03-27T05:08:46.487
> 
> 标签：c++, struct, stdmap

```
struct POINT3DID 
{
    unsigned int newID;
    float x, y, z;
};

typedef std::map<unsigned int, POINT3DID> ID2POINT3DID;

ID2POINT3DID m_i2pt3idVertices; 
```

有人可以告诉我如何`x,y and z`使用`m_i2pt3idVertices`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T05:13:12.507

`m_i2pt3idVertices`是存储`POINT3DID`对象的容器。单独来说，它没有成员变量`x`,`y`或`z`. 你可以在`POINT3DID`里面放一个：

```
m_i2pt3idVertices[0] = POINT3DID(); // Put a POINT3DID into key 0

m_i2pt3idVertices[0].x = 1.0f; // Assign x for key 0
m_i2pt3idVertices[0].y = 2.0f; // Assign y for key 0
m_i2pt3idVertices[0].z = 3.0f; // Assign z for key 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T05:13:53.740

您需要使用迭代器。这是一个示例：

```
std::map<unsigned int, POINT3DID>::iterator it;
it = m_i2pt2idVertices.find(5);
it->second.x = 0;
it->second.y = 1;
it->second.z = 2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T05:14:42.300

`ID2POINT3DID`是地图容器。`unsigned int`您可以通过某些键访问单个元素：

```
m_i2pt3idVertices[42].x 
```

或者您可以迭代容器中的元素：

```
for(ID2POINT3DID::iterator it=m_i2pt3idVertices.begin();it!=m_i2pt3idVertices.end();++it) {
        cout << it->second.x << " " << it->second.y << " " << it->second.z << endl;
} 
```

# javascript - 为什么我的 Adsense 广告采用页面上最后一个广告的尺寸？

> ID：15652290
> 
> 赞同：0
> 
> 时间：2013-03-27T05:08:53.873
> 
> 标签：javascript, html, ads, adsense

似乎我的广告采用了页面上最后一个广告的尺寸，导致所有以前的广告都被裁剪。关于为什么会发生这种情况的任何信息？

[截屏](http://i.imgur.com/6iDhWSt.jpg)

示例 - [http://mypetwantsthis.com/category/dog/clothing-dog/](http://mypetwantsthis.com/category/dog/clothing-dog/)

# javascript - chrome 内容脚本中未触发窗口 onload 事件

> ID：15652291
> 
> 赞同：9
> 
> 时间：2013-03-27T05:08:59.220
> 
> 标签：javascript, google-chrome-extension

我在 Chrome 扩展程序中使用内容脚本。内容脚本在“document_start”注入。

```
window.onload = function() {console.log("window onload event fired.");} 
```

我在内容脚本中运行上述代码，但是当我加载页面时，不会触发 onload 事件。
有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-18T20:26:33.113

检查此代码

```
if (window.attachEvent) {window.attachEvent('onload', your_function);}
else if (window.addEventListener) {window.addEventListener('load', your_function, false);}
else {document.addEventListener('load', your_function, false);} 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-03-27T05:28:13.047

它工作得很好。为了检查`console.log`Windows onload 事件是否被触发。

在 Chrome 中运行（`Load`）页面/脚本。

`Right click`并选择`Inspect element`。

点击`Console tab`。

您将`window onload event fired.`在控制台上看到“”。

**截屏：**

![在此处输入图像描述](../Images/5006c744ac3c8ef41d0cd591ddae2b17.png)

# android - MediaRecorder 启动失败

> ID：15652292
> 
> 赞同：0
> 
> 时间：2013-03-27T05:09:09.633
> 
> 标签：android, android-mediarecorder

为 mediarecorder 运行 start() 时出现此错误。以下是我的代码。我的cos怎么了？代码：

```
public class RecordVideoActivity extends Activity implements OnClickListener {

    private Camera mCamera;
    private CameraPreview mPreview;
    private MediaRecorder mMediaRecorder;
    private boolean isRecording = false;
    private Button captureButton;
    private Button goodButton;
    private Button badButton;
    Thread thread;
    public static final int MEDIA_TYPE_IMAGE = 1;
    public static final int MEDIA_TYPE_VIDEO = 2;
    ArrayList<TrimPoint> mTrimPoints; 
    Timer mTimer;
    double currentTime=0;
    static String filepath;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_recordvideo);
        loadGUI();
        mTimer = new Timer();

        mTrimPoints = new ArrayList<TrimPoint>();
        // Create an instance of Camera
        mCamera = getCameraInstance();

        // Create our Preview view and set it as the content of our activity.
        mPreview = new CameraPreview(this, mCamera);
        FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
        preview.addView(mPreview);
    }

    private void loadGUI() {
        captureButton = (Button) findViewById(R.id.button_capture);
        captureButton.setOnClickListener(this);
        goodButton = (Button) findViewById(R.id.button_good);
        goodButton.setOnClickListener(this);
        badButton = (Button) findViewById(R.id.button_bad);
        badButton.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.button_capture:
            captureButtonHandler();
            break;
        case R.id.button_bad:
            badButtonHandler();
            break;
        case R.id.button_good:
            goodButtonHandler();
            break;
        default:
            break;
        }
    }

    private void goodButtonHandler() {
        TrimPoint mTrimPoint = new TrimPoint(true,currentTime);
        mTrimPoints.add(mTrimPoint);
    }

    private void badButtonHandler() {
        TrimPoint mTrimPoint = new TrimPoint(false,currentTime);
        mTrimPoints.add(mTrimPoint);
        Camera.Parameters params = mCamera.getParameters();
        params.setColorEffect(Camera.Parameters.EFFECT_MONO);
        mCamera.setParameters(params);

        if(thread != null){
            thread = null;
        }
        thread = new Thread()
        {
            @Override
            public void run() {
                try {
                    //while(true) {
                        int time = 5000;
                        Log.d("HFI","Time: "+time);
                        sleep(time);
                        Camera.Parameters params = mCamera.getParameters();
                        params.setColorEffect(Camera.Parameters.EFFECT_NONE);
                        mCamera.setParameters(params);
                    //}
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        };

        thread.start();
    }

    private void captureButtonHandler() {
        if (isRecording) {
            // stop recording and release camera
            mMediaRecorder.stop(); // stop the recording
            mTimer.cancel();
            releaseMediaRecorder(); // release the MediaRecorder object
            mCamera.lock(); // take camera access back from MediaRecorder

            // inform the user that recording has stopped
            captureButton.setText("Capture");
            mCamera.startPreview();
            isRecording = false;

            Intent intent = new Intent(Intent.ACTION_VIEW); //I encourage using this instead of specifying the string "android.intent.action.VIEW"
            intent.setDataAndType(Uri.parse(filepath), "video/mp4");
            startActivity(intent);  

        } else {
            // initialize video camera
            if (prepareVideoRecorder()) {
                // Camera is available and unlocked, MediaRecorder is
                // prepared,
                // now you can start recording

                mMediaRecorder.start();

                // inform the user that recording has started
                captureButton.setText("Stop");
                isRecording = true;

                mTimer.schedule(new TimerTask() {
                    @Override
                    public void run() {
                        currentTime = currentTime+1;
                    }
                }, 1000,1000);
            } else {
                // prepare didn't work, release the camera
                releaseMediaRecorder();
                // inform user
            }
        }
    }

    private final Handler handler = new Handler() {
        @Override
        public void handleMessage(final Message msg) {
            super.handleMessage(msg);
            //start Asyntask here. progress show/hide should be done in asynctaswk itself.
        }
    };

    /** A safe way to get an instance of the Camera object. */
    public static Camera getCameraInstance() {
        Camera c = null;
        try {
            c = Camera.open(); // attempt to get a Camera instance
            if (c != null) {
                Camera.Parameters params = c.getParameters();
                c.setParameters(params);
            }
        } catch (Exception e) {
            Log.d("DEBUG", "Camera did not open: " + e.toString());
            // Camera is not available (in use or does not exist)
        }
        return c; // returns null if camera is unavailable
    }

    private boolean prepareVideoRecorder() {

        if(mMediaRecorder == null){
        mMediaRecorder = new MediaRecorder();
        }else{
            Log.d(Constants.TAG,"MediaRecoder is Not Null");
        }
        // Step 1: Unlock and set camera to MediaRecorder
        mCamera.stopPreview();
        mCamera.unlock();
        mMediaRecorder.setCamera(mCamera);

        // Step 2: Set sources
        mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
        mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

        // Step 3: Set a CamcorderProfile (requires API Level 8 or higher)
        mMediaRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_LOW));

        // Step 4: Set output file
        mMediaRecorder.setOutputFile(getOutputMediaFile(MEDIA_TYPE_VIDEO).toString());

        // Step 5: Set the preview output
        mMediaRecorder.setPreviewDisplay(mPreview.getHolder().getSurface());

        // Step 6: Prepare configured MediaRecorder
        try {
            mMediaRecorder.prepare();
        } catch (IllegalStateException e) {
            Log.d("DEBUG", "IllegalStateException preparing MediaRecorder: " + e.getMessage());
            releaseMediaRecorder();
            return false;
        } catch (IOException e) {
            Log.d("DEBUG", "IOException preparing MediaRecorder: " + e.getMessage());
            releaseMediaRecorder();
            return false;
        }
        return true;
    }

    /** Create a file Uri for saving an image or video */
    @SuppressWarnings("unused")
    private static Uri getOutputMediaFileUri(int type) {
        return Uri.fromFile(getOutputMediaFile(type));
    }

    @SuppressLint("SimpleDateFormat")
    private static File getOutputMediaFile(int type) {
        // To be safe, you should check that the SDCard is mounted
        // using Environment.getExternalStorageState() before doing this.

        File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM),"HFVideos");
        // This location works best if you want the created images to be shared
        // between applications and persist after your app has been uninstalled.

        // Create the storage directory if it does not exist
        if (!mediaStorageDir.exists()) {
            if (!mediaStorageDir.mkdirs()) {
                Log.d("MyCameraApp", "failed to create directory");
                return null;
            }
        }

        // Create a media file name
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss")
                .format(new Date());
        File mediaFile;
        if (type == MEDIA_TYPE_IMAGE) {
            mediaFile = new File(mediaStorageDir.getPath() + File.separator + "IMG_" + timeStamp + ".jpg");
        } else if (type == MEDIA_TYPE_VIDEO) {
            mediaFile = new File(mediaStorageDir.getPath() + File.separator + "VID_" + timeStamp + ".mp4");
        } else {
            return null;
        }
        filepath = mediaFile.toString();
        Log.d(Constants.TAG,"Path: "+filepath);
        return mediaFile;
    }

    @Override
    protected void onPause() {
        super.onPause();
        releaseMediaRecorder(); // if you are using MediaRecorder, release it
                                // first
        releaseCamera(); // release the camera immediately on pause event
    }

    private void releaseMediaRecorder() {
        if (mMediaRecorder != null) {
            mMediaRecorder.reset(); // clear recorder configuration
            mMediaRecorder.release(); // release the recorder object
            mMediaRecorder = null;
            mCamera.setPreviewCallback(null);
            mCamera.lock(); // lock camera for later use
        }
    }

    private void releaseCamera() {
        if (mCamera != null) {
            isRecording = false;
            mCamera.stopPreview();
            mCamera.setPreviewCallback(null);
            mCamera.release(); // release the camera for other applications
            mCamera = null;
        }
    }

} 
```

日志猫：

```
03-27 10:00:17.849: I/MediaRecorderJNI(2736): prepare: surface=0x26c898 (identity=147)
03-27 10:00:17.869: E/MediaRecorder(2736): start failed: -19
03-27 10:00:17.869: D/AndroidRuntime(2736): Shutting down VM
03-27 10:00:17.869: W/dalvikvm(2736): threadid=1: thread exiting with uncaught exception (group=0x40a92930)
03-27 10:00:17.869: E/AndroidRuntime(2736): FATAL EXCEPTION: main
03-27 10:00:17.869: E/AndroidRuntime(2736): java.lang.RuntimeException: start failed.
03-27 10:00:17.869: E/AndroidRuntime(2736):     at android.media.MediaRecorder.start(Native Method)
03-27 10:00:17.869: E/AndroidRuntime(2736):     at uk.org.humanfocus.hfi.RecordVideoActivity.captureButtonHandler(RecordVideoActivity.java:151)
03-27 10:00:17.869: E/AndroidRuntime(2736):     at uk.org.humanfocus.hfi.RecordVideoActivity.onClick(RecordVideoActivity.java:77)
03-27 10:00:17.869: E/AndroidRuntime(2736):     at android.view.View.performClick(View.java:4202)
03-27 10:00:17.869: E/AndroidRuntime(2736):     at android.view.View$PerformClick.run(View.java:17344)
03-27 10:00:17.869: E/AndroidRuntime(2736):     at android.os.Handler.handleCallback(Handler.java:725)
03-27 10:00:17.869: E/AndroidRuntime(2736):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-27 10:00:17.869: E/AndroidRuntime(2736):     at android.os.Looper.loop(Looper.java:137)
03-27 10:00:17.869: E/AndroidRuntime(2736):     at android.app.ActivityThread.main(ActivityThread.java:5191)
03-27 10:00:17.869: E/AndroidRuntime(2736):     at java.lang.reflect.Method.invokeNative(Native Method)
03-27 10:00:17.869: E/AndroidRuntime(2736):     at java.lang.reflect.Method.invoke(Method.java:511)
03-27 10:00:17.869: E/AndroidRuntime(2736):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
03-27 10:00:17.869: E/AndroidRuntime(2736):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
03-27 10:00:17.869: E/AndroidRuntime(2736):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:52:22.133

问题解决了。问题是由于`CyanogenMod`我在我的 Android 设备中使用的。

搜索时得到解决方案`thread exiting with uncaught exception (group=0x40a92930)`

# perl - 在 Perl 中打印数组

> ID：15652305
> 
> 赞同：0
> 
> 时间：2013-03-27T05:10:37.047
> 
> 标签：perl

我目前有我的 Perl 脚本来读取 fstab 文件，按列拆分它们并搜索每列中的哪个单词最长以显示它。所有这些都很有效（我认为），我遇到的问题是它会为每一行打印出相同的长度，这是不正确的。示例 $dev_parts 打印 24，$labe_parts 打印 24，依此类推...

下面是我的代码。

```
 #!/usr/bin/perl
  use strict;

  print "Enter file name: \n";
  my $file_name = <STDIN>;
  open(IN, "$file_name");

  my @parts = split( /\s+/, $file_name);
  foreach my $usr_file (<IN>) {
      chomp($usr_file);
      @parts = split( /\s+/, $usr_file);
      push(@dev, $parts[0]);
      push(@label, $parts[1]);
      push(@tmpfs, $parts[2]);
      push(@devpts, $parts[3]);
      push(@sysfs, $parts[4]);
      push(@proc, $parts[5]);
  }

  foreach  $dev_parts (@dev) {
      $dev_length1 = length ($parts[$dev_parts]);
      if ( $dev_length1 > $dev_length2) {
              $dev_length2 = $dev_length1;
      }
  }
  print "The longest word in the first line is: $dev_length2 \n";

  foreach  $label_parts (@label) {
      $label_length1 = length($parts[$label_parts]);
      if ($label_length1 > $label_length2) {
              $label_length2 = $label_length1;
      }
  }
  print "The longest word in the first line is: $label_length2 \n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:06:54.763

这就是你的代码应该是这样的

```
 #!/usr/bin/perl
  use strict;
  use warnings;
  use Data::Dumper;

  print "Enter file name: \n";
  my $file_name = <STDIN>;
  chomp($file_name);
  open(FILE, "$file_name") or die $!;

  my %colhash;
  while (<FILE>) {
      my $col=0;
      my @parts = split /\s+/;

      map { my $len = length($_);
        $col++;
        if($colhash{$col} < $len ){ 
            $colhash{$col} = $len;    # store the longest word length for each column
        } 
    } @parts;      
  }

print Dumper(\%colhash); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:24:18.833

你这里有一个错误：

```
foreach  $dev_parts (@dev) {
     $dev_length1 = length ($parts[$dev_parts]); 
```

据我了解，您正在寻找`@dev`. 但是，您从`@parts`数组中获取元素的长度。该数组始终设置为文件的最后一行。因此，您正在查看文件最后一行中的每个元素，而不是相应列的每个元素。

你只需要`length($dev_parts)`取而代之。

顺便说一下，这里有一种更简单的方法来查找数组中的最长长度：

```
use List::Util qw/max/; #Core module, always available.

my $longest_dev = max map {length} @dev; 
```

*对您的代码的其他一些评论：*

`use strict;`很好。你也应该`use warnings;`。它将帮助您发现代码中的愚蠢错误。

每次打开文件时都应该检查错误：

```
open(IN, $file_name) or die "Failed to open $file_name: $!"; 
```

更好的是，使用带有词法文件句柄的首选开放语法：

```
open(my $in_file, '<', $file_name) or die "Failed to open $file_name: $!";
...
while (<$in_file>) { 
```

我不确定您要在这里做什么：

```
my @parts = split( /\s+/, $file_name); 
```

您正在用空格分割文件名，但您不使用它来做任何事情。然后您稍后重新使用相同的数组来保存这些行。

当您遍历文件的行时，`while`首选循环。`foreach`它节省了内存，因为它不会先将整个文件读入内存（其他方面完全相同）。

```
while (my $usr_file = <IN>) { 
```

# excel - 自动填充数据时出现运行时错误 1004

> ID：15652307
> 
> 赞同：0
> 
> 时间：2013-03-27T05:10:51.620
> 
> 标签：excel, vba

我的代码应该在“L”列中自动填充 K2=J2 等的“IF”公式，但遇到运行时错误 1004。

我希望宏完成整个列，直到它到达 K 列中包含数据的最后一行。

代码：

```
Sub SiteAccess()

Dim mySheet As Worksheet, myOtherSheet As Worksheet, myBook As Workbook
Set myBook = Excel.ActiveWorkbook
Set mySheet = myBook.Sheets("SiteAccessReports")
Set myOtherSheet = myBook.Sheets("Sheet1")

Dim ff As Long

ff = myOtherSheet.Range("L2:L" & myOtherSheet.Cells(myOtherSheet.Rows.Count, "L").End(xlUp).Row).Count
With Sheets("Sheet1")
.Range("L2").Formula = "=IF(RC[-2]=RC[-1],""No"",""Yes"")"
Selection.AutoFill Destination:=Range("L2:L" & ff), Type:=xlFillDefault 'Error Line
End With

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T19:35:33.353

我相信有一个更好的答案，但到目前为止还没有其他答案：

```
Sub SiteAccess()
    Dim myBook As Workbook
    Dim myOtherSheet As Worksheet
    Dim ff As Long
    Set myBook = Excel.ActiveWorkbook
    Set myOtherSheet = myBook.Sheets("Sheet1")
    ff = myOtherSheet.Range("K1:K" & myOtherSheet.Cells(myOtherSheet.Rows.Count, "K") _
    .End(xlUp).Row).Count
    With Sheets("Sheet1")
        .Range("L2").Select
        .Range("L2").Formula = "=IF(RC[-2]=RC[-1],""No"",""Yes"")"
        Selection.AutoFill Destination:=Range("L2:L" & ff), Type:=xlFillDefault
    End With
End Sub 
```

# c - #define 变量用法

> ID：15652308
> 
> 赞同：2
> 
> 时间：2013-03-27T05:11:01.180
> 
> 标签：c, preprocessor-directive

我正在做一个用 C 编程语言编写的项目。我有一个代码片段如下

```
unsigned char value[10];
#define arr() (&value[0]) 
```

为什么他们为 unsigned char 数组定义了一种“函数”（ `arr()`）类型的'd 变量？`#define`

他们正在尝试使用诸如`arr()[1],arr()[2]`等之类的变量，

1.  `arr() + 2`等于`value + 2`。_ 我尝试执行一个小程序，但这两个结果给了我不同的答案。这怎么可能。因为他们将第一个数组的地址分配给`arr()`. 这两个不应该是一样的吗？

谁能解释定义上述变量的意义是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:18:45.540

`arr()[i]`==> `(&value[0])[i]`==>`value[i]`

还

`arr() + i` ==> `(&value[0]) + i` ==>`value + i`

所以

`arr() + 2` ==> `(&value[0]) + 2` ==>`value + 2`

[我只能猜测程序员编写这种方式是为了使编码与 hist 代码的其他部分保持一致，例如[这个例子](https://stackoverflow.com/questions/15095350/define-something-1-0)]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T05:16:33.623

我不能告诉你他们*为什么*这样做，但是是的，`arr() + 2`而且`value + 2`是一回事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T05:18:08.050

这一行`#define arr() (&value[0])`意味着每当预处理器（在编译器之前运行）遇到`arr()`它时，它会在文件中将其替换为`(&value[0])`.

所以`arr()[1]`意思`(&value[0])[1]`。`value[0]`是存储在第一个值索引处的`&`内容，再次获取它的地址......这与值相同。所以它应该只是`value[1]`整体的，除非我遗漏了什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T05:32:32.517

> arr() + 2 是否等于 value + 2。我尝试执行一个小程序，但这两个结果给了我不同的答案。这怎么可能。因为他们将第一个数组的地址分配给 arr()。这两个不应该是一样的吗？

是的，它们是一样的。

试试这个程序

```
#include <stdio.h>

#define arr() (&value[0])

int main(void)
{

unsigned char value[11] = "0123456789";
printf("arr()[2] = %c\n",  arr()[2] );
printf("arr()+ 2 = %c\n",*(arr() + 2) );
printf("value+ 2 = %c\n",*(value + 2) );

return 0;
} 
```

# javascript - 直到单击事件才加载画布图像...我想在页面加载时加载，如何？

> ID：15652309
> 
> 赞同：0
> 
> 时间：2013-03-27T05:11:14.640
> 
> 标签：javascript, html, canvas, onload

我正在创建战舰，这是一个 HTML5 画布上的棋盘游戏。加载页面时，我在加载船舶图像时遇到问题。出于某种原因，船舶图像仅在我单击屏幕上的某个位置时显示。

### 背景资料：

1.我有 2 个画布元素，每个元素都有 2 个上下文

2.如果我将 PlayerGrid.js 放在 OpponentGrid.js 之前，我必须点击屏幕才能显示我的船。

3.Draw() 是绘制网格的对象，图像一旦从createShips() 中创建出来。createships() 只是创建不同的船对象并将图像分配给每个对象。

4.我尝试在很多地方调用 DRAW()，onload 和 createShips()，但它们仍然没有显示。

有人知道它可能是什么吗？这是上下文或画布中的冲突吗？当我将 OpponentGrid.js 放在 PlayerGrid.js 之前时，船舶图像确实会显示，但是我的 XMLHttpRequest 存在一个不值得解决的巨大问题。

加载完所有内容后，我还应该如何调用我的 Draw 方法？我应该在最后的某个地方在我的 Battleship.html 中调用我的 Draw() 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:41:08.803

**这是在使用之前确保所有图像都已加载的方法**

代码和小提琴：http: [//jsfiddle.net/m1erickson/nD5jr/](http://jsfiddle.net/m1erickson/nD5jr/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

  var canvas1=document.getElementById("canvas1");
  var ctx1=canvas1.getContext("2d");
  var canvas2=document.getElementById("canvas2");
  var ctx2=canvas2.getContext("2d");

  var imageURLs=[];
  var imagesOK=0;
  var imagesFailed=0;
  var imgs=[];
  imageURLs.push("http://upload.wikimedia.org/wikipedia/commons/d/d4/New_York_City_at_night_HDR_edit1.jpg");
  imageURLs.push("http://www.freebestwallpapers.info/bulkupload//20082010//Places/future-city.jpg");
  loadAllImages();

  function loadAllImages(){
      for (var i = 0; i < imageURLs.length; i++) {
        var img = new Image();
        imgs.push(img);
        img.onload = onLoad; 
        img.onerror = onFail;
        img.src = imageURLs[i];
      }      
  }

  var imagesAllLoaded = function() {
    if (imagesOK+imagesFailed==imageURLs.length ) {

       // ALL IMAGES ARE NOW PROCESSED
       // ready to use loaded images
       // ready to handle failed image loads

       ctx1.drawImage(imgs[0],0,0,canvas1.width,canvas1.height);
       ctx2.drawImage(imgs[1],0,0,canvas2.width,canvas2.height);

    }
  };

  function onLoad() {
    imagesOK++;
    imagesAllLoaded();
  }

  function onFail() {
    // possibly log which images failed to load
    imagesFailed++;
    imagesAllLoaded();
  };   

}); // end $(function(){});
</script>

</head>

<body>
    <canvas id="canvas1" width=300 height=300></canvas><br/>
    <canvas id="canvas2" width=300 height=300></canvas>
</body>
</html> 
```

# android - 模拟器：模拟器窗口不在视野范围内，并已居中

> ID：15652311
> 
> 赞同：16
> 
> 时间：2013-03-27T05:11:29.190
> 
> 标签：android, android-emulator, avd

启动 android 模拟器后，我收到此警告：

```
emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
emulator: emulator window was out of view and was recentered 
```

在没有键盘的情况下显示此警告模拟器后，即使我同时选择了复选框`"Hardware keyboard present"`和`"Display a skin with hardware controls"`

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-02-26T10:35:23.610

在**Windows**上：

*   检查路径`C:\Users\<username>\.android\avd\<avdname>.avd\`并打开文件`emulator-user.ini`。

在**Linux 上**：

*   打开`emulator-user.ini`位于 的文件`/home/<username>/.android/avd/<avdname>.avd/`。

然后将参数设置为

```
window.x = 0
window.y = 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-17T15:49:54.863

alt-space 技巧在 Win7 上对我有用。首先单击模拟器（使窗口处于活动状态）。alt 空格。选择“移动”。4 箭头指针现在显示，但不起作用。但是，使用键盘开始移动它。使用键盘移动后，您可以用鼠标在屏幕上拖动它。谢谢你的提示！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-16T22:50:54.317

### 100% 有效

请按照以下步骤操作：

1.  转到此目录或按 Win+R 然后键入：
    **(C:\Users\typeyourusername\.android\avd)**

2.  双击文件夹（AVD 名称）
3.  删除文件“ **emulator-user** ”
4.  运行您的 AVD 或（如果您已经打开 avd）关闭并重新运行 AVD

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-15T11:29:14.780

如果您使用的是 HAXM，请将其更新到最新版本并从 sdk 目录再次运行 HAXM 安装程序。如果安装程序出错，请使用 bat 文件进行静默运行。这对我有用。在我的情况下，修改用户仿真文件的事件不起作用。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-27T06:02:22.457

从[这里](https://stackoverflow.com/a/7866454/1037442)

解决方案：编辑设备设置并将 RAM 分配更改为较小的数字。如果是 1024 或更多，则将其减少到 512Mb 或 256Mb

您可以在“编辑 Android 虚拟设备 (AVD)”对话框的硬件部分 -> 设备内存大小中更改它

# xcode - 设置 Xcode 以使用外部编译器

> ID：15652316
> 
> 赞同：5
> 
> 时间：2013-03-27T05:12:01.993
> 
> 标签：xcode, 8051, sdcc

我正在尝试使用 Xcode 作为微控制器代码的编辑器。我想使用构建、运行按钮。我如何使用它们来触发编译程序的脚本？我已经有一个可以在命令行上运行的脚本。我需要传递一些参数，比如文件名，也许还有几个选项。我正在使用 SDCC，它是一个 8501 编译器。是否可以在 Xcode 中创建自定义目标或其他内容，以便调用脚本并传递文件名或参数？有关如何执行此操作的任何示例？当然，我不能为此使用 GCC。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T07:58:48.903

那么，您需要创建“外部构建系统”项目：

*   文件 -> 新建 -> 项目 -> OS X -> 外部构建系统 -> 下一步
*   将“/bin/bash”设置为“构建工具”字段
*   设置其他信息并创建项目
*   选择您的目标并在“信息”选项卡上设置参数（您的脚本名称和要传递给脚本的参数）和工作目录（如果需要）。您也可以在此处更改构建工具。

如果要将单独的脚本设置为运行命令，则：

*   在底部单击您当前的方案并选择“编辑方案...”
*   在左侧面板中选择“运行”
*   “信息”选项卡：选择“可执行文件”->“其他...”-> 导航到 /bin 目录（Command + Shift + G）-> 选择“bash”。将“调试器”设置为“无”
*   “参数”选项卡：设置参数（您的脚本和要传递的参数）。
*   “选项”选项卡：设置工作目录。

我通常只使用一个脚本（设置为运行脚本）。在这种情况下，只需将目标的“信息”选项卡上的参数留空。

**编辑**：对于 make 作为构建工具，不需要传递任何参数，只需适当地设置 Directory，make 就会在那里找到 Makefile。

# php - 在 zend 表单中包装标签

> ID：15652317
> 
> 赞同：2
> 
> 时间：2013-03-27T05:12:04.457
> 
> 标签：php, zend-framework, zend-form

如何以 zend 形式包装 dt dd 标签。我生成的 html 代码的先前格式是这样的：

```
<dt id="email-label">
   <label for="email" class="optional">Username(email):</label>
</dt>
<dd id="email-element">
   <input type="text" name="email" id="email" value="">
</dd> 
```

Zend 代码是：

```
$form->addElement('text', 'email');
$usernameElement = $form->getElement('email');
$usernameElement->setLabel('Username(email):'); 
```

我希望这两个标签将被包裹在一个父标签中，如下所示：

```
<div id="form_wrapper">
    <dt id="email-label">
        <label for="email" class="optional">Username(email):</label>
    </dt>
    <dd id="email-element">
        <input type="text" name="email" id="email" value="">
    </dd>  
</div> 
```

那么我怎么能在zend框架中做到这一点呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T05:23:28.447

尝试这个，

```
$usernameElement->setDecorators(array(
     'ViewHelper',
     'Label',
      new Zend_Form_Decorator_HtmlTag(array('tag' => 'div','id'=>'form_wrapper')) 
)); 
```

# php - AS#3 组织从 PhP 加载的变量

> ID：15652320
> 
> 赞同：1
> 
> 时间：2013-03-27T05:12:12.303
> 
> 标签：php, actionscript-3, flash, flash-cs5

我遇到了一个问题，即如何在 Flash 中组织来自 PHP 脚本的变量。理想情况下，我希望它们采用数组类型格式，这样我就可以遍历它们。下面是一些要使用的代码。

```
 function completeHandler(evt:Event){ // after loading the php
    var symbolsArray:Array = new Array()                      
    symbolsArray.push(evt.target.data.symbol_1);// php variable named: symbol_1, symbol_2
    trace(evt.target.data); 
    } 
```

以上一切正常，PHP 变量列为 symbol_1、symbol_2 等

我想要一个循环，而不是将每个变量可分离地推入数组中，如下所示：

```
 function completeHandler(evt:Event){ 
    var symbolsArray:Array = new Array() 
    var counter =1                     
    symbolsArray.push(evt.target.data.symbol_+counter); this is the issue
    trace(symbolsArray[0]); //returns NaN 
    } 
```

下面是 php return vars to flash 给出一个想法：

```
 $returnVars['symbol_1'] = $virtualReel1[0];
      $returnVars['symbol_2'] = $virtualReel1[1];
      $returnVars['symbol_3'] = $virtualReel1[2];
      $returnVars['symbol_4'] = $virtualReel2[0];
      $returnVars['symbol_5'] = $virtualReel2[1];
      //etc
      $returnString = http_build_query($returnVars);
      echo $returnString; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T05:16:35.620

```
 symbolsArray.push(evt.target.data["symbol_"+counter]); 
```

如果你需要动态查询一个对象的属性，你可以通过一个可以动态形成的字符串键将其寻址为数组或字典。适用于任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T05:18:40.220

返回的数据可以被视为一个对象（包含对象），因此您可以像这样循环遍历它：

```
function completeHandler(evt:Event)
{
    var symbolsArray:Array = new Array();
    for each (var obj:Object in evt.target.data)
    {
        symbolsArray.push(obj);
    }
} 
```

如果您知道所有项目都是 oif 相同类型，则可以强制转换对象。例如：如果所有数字：

```
symbolsArray.push(Number(obj)); 
```

或字符串：

```
symbolsArray.push(String(obj)); 
```

# php - 使用 jQuery 将值从一个页面传递到另一个页面

> ID：15652326
> 
> 赞同：1
> 
> 时间：2013-03-27T05:12:38.367
> 
> 标签：php, jquery

我有一个使用 jQuery 将值从一个页面传递到另一个页面的简单脚本设置。该值存储在一个数组中。单击链接时，应该将数组的值发送到 community.php 页面，但它不起作用，我不确定如何在社区页面上提取数组的内容，有什么建议吗？

**查询**

```
$("#subscribe_link").click(function () {
    $.post("community.php", { 'choices[]': ["Jon", "Susan"] });
}); 
```

**PHP**

```
print_r($choices); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:22:19.087

实际上，您可以通过这种方式发送数组。问题是您必须在执行任何 php 之前访问发布的数据并创建变量。

```
$("#subscribe_link").click(function () {
    $.post("community.php", { 'choices[]': ["Jon", "Susan"] });
}); 
```

社区.php：

```
$choices = $_POST['choices'];
print_r($choices); 
```

除非您对请求数据执行某些操作，否则您的 ajax 请求似乎什么也不做：因此，您的 $.post() 应该是：

```
$('#btn').click(function(){
        $.post("community.php", { 'choices[]': ["Jon", "Susan"]}, function(data){ 
            alert(data);   
     });
}); 
```

# android - 为一个固定位置获取不同的纬度和经度

> ID：15652335
> 
> 赞同：3
> 
> 时间：2013-03-27T05:13:30.030
> 
> 标签：android, gps, latitude-longitude

我创建了一个 android 应用程序，每 2 秒获取一次位置的纬度和经度。该应用程序运行良好，但是当我将我的android设备保持在一个位置时，我会得到不同的纬度和经度......令人惊讶的是，即使所有这些不同的坐标都指向同一个位置，即使它们不同。

例如对于一个恒定的位置

我越来越喜欢

```
Latitude  -     10.013499  
Longitude -     76.3303451 
```

2 秒后

```
Latitude  -     10.0135014  
Longitude -     76.3303467 
```

2 秒后

```
Latitude  -     10.0135001
Longitude -     76.3303451 
```

2 秒后

```
Latitude  -     10.0135011  
Longitude -     76.3303466 
```

谁能告诉我为什么我会这样..
我们如何才能获得给定点的独特纬度和经度。
我的代码如下

```
import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.TimeUnit;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class AndroidGPSTrackingActivity extends Activity {

    Button btnShowLocation, stop;
    double latitude, longitude;
    int is = 0;
    ScheduledExecutorService scheduler;
    // GPSTracker class
    GPSTracker gps;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        btnShowLocation = (Button) findViewById(R.id.btnShowLocation);
        stop = (Button) findViewById(R.id.stop);
        // show location button click event
        btnShowLocation.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                // create class object
                scheduler = Executors.newSingleThreadScheduledExecutor();
                scheduler.scheduleAtFixedRate(new Runnable() {

                    public void run() {
                        System.out.println("sss");
                        // Log.i("hello", "world");
                        is++;
                        Log.i("hello", "" + is);
                        runOnUiThread(new Runnable() {

                            public void run() {
                                gps = new GPSTracker(
                                        AndroidGPSTrackingActivity.this);
                                latitude = gps.getLatitude();
                                longitude = gps.getLongitude();
                                Toast.makeText(
                                        getApplicationContext(),
                                        "Your Location is - \nLat: " + latitude
                                                + "\nLong: " + longitude,
                                        Toast.LENGTH_SHORT).show();
                            }
                        });
                    }
                }, 2, 2, TimeUnit.SECONDS);
            }
        });
        stop.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                scheduler.shutdown();
                onDestroy();
            }
        });
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        Toast.makeText(this, "Service destroyed...", Toast.LENGTH_LONG).show();
    }

    public double getLatitude() {
        return latitude;
    }

    public void setLatitude(double latitude) {
        this.latitude = latitude;
    }

    public double getLongitude() {
        return longitude;
    }

    public void setLongitude(double longitude) {
        this.longitude = longitude;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T05:15:50.417

GPS 不准确。使用普通手机的硬件，它可以在任何时候达到大约 10 米左右的距离。因此，连续的多个读数不会具有相同的确切位置。

网络提供商更糟糕——它可能有高达 1 公里的不准确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:27:44.397

坐标不指向同一个位置，如果你放大到足够大，你会发现它们相差几米。
要检测在一个位置静止不动，您可以计算到最后一个位置的距离，并且只有当它超过您使用该位置的阈值时，或者您使用 GPS 位置的速度属性。

# python - 如何加速 Pandas rolling_sum()？

> ID：15652343
> 
> 赞同：1
> 
> 时间：2013-03-27T05:14:16.010
> 
> 标签：python, pandas

我有需要计算 Pandas 多级数据帧的滚动和的应用程序，我想找到一种方法来缩短处理时间。

`mul_df()`是创建演示多级数据框的功能。

```
import itertools
import numpy as np
import pandas as pd

def mul_df(level1_rownum, level2_rownum, col_num):
    ''' create multilevel dataframe '''

    index_name = ['IDX_1','IDX_2']
    col_name = ['COL'+str(x).zfill(3) for x in range(col_num)]

    first_level_dt = [['A'+str(x).zfill(4)]*level2_rownum for x in range(level1_rownum)]
    first_level_dt = list(itertools.chain(*first_level_dt))
    second_level_dt = ['B'+str(x).zfill(3) for x in range(level2_rownum)]*level1_rownum

    dt = pd.DataFrame(np.random.randn(level1_rownum*level2_rownum, col_num), columns=col_name)
    dt[index_name[0]] = first_level_dt
    dt[index_name[1]] = second_level_dt

    rst = dt.set_index(index_name, drop=True, inplace=False)
    return rst 
```

例如 ：

```
>>> df = mul_df(4,5,3)
             COL000  COL001  COL002
IDX_1 IDX_2                        
A0000 B000   0.2317 -0.6122  0.2289
      B001  -0.9218 -0.2918  1.7295
      B002   0.1368  0.6659 -1.9193
      B003   0.3839 -0.8542 -0.3065
      B004   2.0361 -0.4601  1.1246
A0001 B000   0.3039 -0.6761  1.3762
      B001   1.1767  0.8465 -0.1745
      B002   0.4937  1.6774 -0.3038
      B003  -0.3627 -1.6413 -0.7373
      B004  -0.0149  1.5900  0.3385
A0002 B000   0.0326  0.2637  1.7990
      B001  -0.1071  0.6097 -0.2812
      B002  -0.2199  0.7360  1.9425
      B003  -1.0423  0.6763 -0.2479
      B004  -0.9024  0.3016 -2.7585
A0003 B000   0.2550  0.0470  0.6849
      B001   0.5986  0.3283  1.6327
      B002   0.8929 -1.1128 -0.9495
      B003  -0.5633  1.7935  0.1652
      B004   1.0417 -0.4833  0.3413 
```

并使用下面的命令来计算每列数据 groupby 'IDX_1' 的滚动总和（窗口大小为 4）：

```
>>> df.groupby(level='IDX_1').apply(lambda x: pd.rolling_sum(x,4))
             COL000  COL001  COL002
IDX_1 IDX_2                        
A0000 B000      NaN     NaN     NaN
      B001      NaN     NaN     NaN
      B002      NaN     NaN     NaN
      B003  -0.1694 -1.0923 -0.2675
      B004   1.6350 -0.9402  0.6282
A0001 B000      NaN     NaN     NaN
      B001      NaN     NaN     NaN
      B002      NaN     NaN     NaN
      B003   1.6116  0.2064  0.1606
      B004   1.2928  2.4726 -0.8771
A0002 B000      NaN     NaN     NaN
      B001      NaN     NaN     NaN
      B002      NaN     NaN     NaN
      B003  -1.3367  2.2857  3.2125
      B004  -2.2717  2.3236 -1.3451
A0003 B000      NaN     NaN     NaN
      B001      NaN     NaN     NaN
      B002      NaN     NaN     NaN
      B003   1.1832  1.0559  1.5334
      B004   1.9699  0.5256  1.1898
>>> 
```

我尝试计算`rolling_sum()`一个大数据框的。

```
In [1]: df = mul_df(1000,25,1000)
In [2]: timeit df.groupby(level='IDX_1').apply(lambda x: pd.rolling_sum(x,4))
1 loops, best of 3: 52.1 s per loop 
```

(1000*25, 1000) 数据帧需要 52.1 秒。如何加快 rolling_sum 的速度（我的意思是有其他方法可以实现相同的计算结果但花费更少的时间）？

**编辑（为waitingkuo的解决方案添加内存错误消息）**

```
In [1]: df = mul_df(1000,25,1000)

In [2]: k2 = df.frs(4)
---------------------------------------------------------------------------
MemoryError                               Traceback (most recent call last)
<ipython-input-2-1b54b2662162> in <module>()
----> 1 k2 = df.frs(4)

F:\STK Analysis\Kits\Dev_Tools\FinReporter\FM_CORE.pyc in wrapped(*args, **kwargs)
    149         from datetime import datetime
    150         t1 = datetime.now()
--> 151         rst = fn(*args, **kwargs)
    152         t2 = datetime.now()
    153         print "Time: %0.3f"%((t2-t1).seconds + (t2-t1).microseconds/1000000.0)

F:\STK Analysis\Kits\Dev_Tools\FinReporter\FM_CORE.pyc in _frs(df, n)
    864     ''' fast_rolling_sum , http://stackoverflow.com/questions/15652343/how-to-speed-up-pandas-rolling-sum '''
    865     grp = df.groupby(level='STK_ID')
--> 866     return np.sum([grp.shift(i) for i in range(n)])
    867 DataFrame.frs = _frs
    868

D:\Python\lib\site-packages\pandas\core\groupby.pyc in wrapper(*args, **kwargs)
    259                 return self.apply(curried_with_axis)
    260             except Exception:
--> 261                 return self.apply(curried)
    262
    263         return wrapper

D:\Python\lib\site-packages\pandas\core\groupby.pyc in apply(self, func, *args, **kwargs)
    320         func = _intercept_function(func)
    321         f = lambda g: func(g, *args, **kwargs)
--> 322         return self._python_apply_general(f)
    323
    324     def _python_apply_general(self, f):

D:\Python\lib\site-packages\pandas\core\groupby.pyc in _python_apply_general(self, f)
    323
    324     def _python_apply_general(self, f):
--> 325         keys, values, mutated = self.grouper.apply(f, self.obj, self.axis)
    326
    327         return self._wrap_applied_output(keys, values,

D:\Python\lib\site-packages\pandas\core\groupby.pyc in apply(self, f, data, axis, keep_internal)
    583         if hasattr(splitter, 'fast_apply') and axis == 0:
    584             try:
--> 585                 values, mutated = splitter.fast_apply(f, group_keys)
    586                 return group_keys, values, mutated
    587             except lib.InvalidApply:

D:\Python\lib\site-packages\pandas\core\groupby.pyc in fast_apply(self, f, names)
   2136             return [], True
   2137
-> 2138         sdata = self._get_sorted_data()
   2139         results, mutated = lib.apply_frame_axis0(sdata, f, names, starts, ends)
   2140

D:\Python\lib\site-packages\pandas\core\groupby.pyc in _get_sorted_data(self)
   2103
   2104     def _get_sorted_data(self):
-> 2105         return self.data.take(self.sort_idx, axis=self.axis)
   2106
   2107     def _chop(self, sdata, slice_obj):

D:\Python\lib\site-packages\pandas\core\frame.pyc in take(self, indices, axis)
   2900             new_values = com.take_2d(self.values,
   2901                                      com._ensure_int64(indices),
-> 2902                                      axis=axis)
   2903             if axis == 0:
   2904                 new_columns = self.columns

D:\Python\lib\site-packages\pandas\core\common.pyc in take_2d(arr, indexer, out, mask, needs_masking, axis, fill_value)
    426     elif dtype_str in ('float64', 'object', 'datetime64[ns]'):
    427         if out is None:
--> 428             out = np.empty(out_shape, dtype=arr.dtype)
    429         take_f = _get_take2d_function(dtype_str, axis=axis)
    430         take_f(arr, _ensure_int64(indexer), out=out, fill_value=fill_value)

MemoryError:

In [3]: 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T14:49:43.603

如何先转移它然后将它们加在一起？

```
In [223]: def my_rolling_sum(d, n):
   .....:     g = d.groupby(level='IDX_1')
   .....:     return np.sum([g.shift(i) for i in range(n)])
   .....: 
```

让我们看看性能：

```
In [224]: df = mul_df(1000,25,1000)

In [225]: timeit df.groupby(level='IDX_1').apply(lambda x: pd.rolling_sum(x,4))
1 loops, best of 3: 32.4 s per loop

In [230]: timeit my_rolling_sum(df, 4)
1 loops, best of 3: 7.15 s per loop 
```

## 编辑

虽然它消耗太多内存，但我尝试对其进行一些修改：

```
In [5]: def my_rolling_sum(d, n):
   ...:     g = d.groupby(level='IDX_1')
   ...:     result = g.shift(0)
   ...:     for i in range(1, n):
   ...:         result = result + g.shift(i)
   ...: 
```

希望它可以帮助你。

# html - 图像映射在 Internet Explorer 10 中不起作用

> ID：15652345
> 
> 赞同：1
> 
> 时间：2013-03-27T05:14:28.117
> 
> 标签：html, image, map, internet-explorer-10

```
<img src="images/imagemap.png" width="600" height="100" border="0" usemap="#map" />

<map name="map">
<!-- #$-:Image map file created by GIMP Image Map plug-in -->
<!-- #$-:GIMP Image Map plug-in by Maurits Rijk -->
<!-- #$-:Please do not edit lines starting with "#$" -->
<!-- #$VERSION:2.3 -->
<!-- #$AUTHOR:Eric -->
<area shape="rect" coords="2,2,98,97"  onclick="scrollto1()" style="cursor: pointer;"     />
<area shape="rect" coords="102,3,202,95"  onclick="scrollto2()"  style="cursor:     pointer;" />
<area shape="rect" coords="208,3,307,95"  onclick="scrollto3()"  style="cursor: pointer;"/>
<area shape="rect" coords="315,5,409,98"  onclick="scrollto4()"  style="cursor: pointer;"/>
<area shape="rect" coords="413,6,502,97"  onclick="scrollto5()"  style="cursor: pointer;"/>
<area shape="rect" coords="507,4,597,97"  onclick="scrollto6()"  style="cursor: pointer;"/>
</map> 
```

除了 Internet Explorer 10 之外的所有浏览器中都可以单击图像映射。我想知道是否有某种方法可以让 Internet Explorer 中的东西正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:48:55.160

我已经更新了你的代码，它现在可以工作了:)

您没有该区域自动关闭，并且您丢失了`href="#"`并且根本不需要样式:)

检查小提琴以防你想检查

```
Link : http://jsfiddle.net/MarmeeK/bD4s7/

<img src="http://images5.fanpop.com/image/photos/30600000/Template-800-x-100-pippy-and-jezzis-world-of-purdy-mindedness-30664157-800-100.jpg" width="600" height="100" border="0" usemap="#maps" alt="" />

<map name="maps">

<area shape="rect" coords="2,2,98,97"  onclick="scrollto1()" style="cursor: pointer;"     >
<area shape="rect" coords="102,3,202,95" href="#" >
<area shape="rect" coords="208,3,307,95" href="#" >
<area shape="rect" coords="315,5,409,98" href="#" >
<area shape="rect" coords="413,6,502,97" href="#" >
<area shape="rect" coords="507,4,597,97" href="#" onclick="javascript:alert('hi');" >
</map> 
```

# php - 通过电子邮件发送单个结果（10 个结果 = 10 封电子邮件）而不是 1 封包含所有数据的电子邮件

> ID：15652351
> 
> 赞同：0
> 
> 时间：2013-03-27T05:16:09.120
> 
> 标签：php, arrays, email, foreach

我有以下脚本调用查询数据库并将结果作为电子邮件输出。但是，我想单独发送结果（10 个结果 = 10 封电子邮件），而不是在一封包含所有结果的电子邮件中。

任何善良的灵魂可以指出我正确的方向吗？这就是我现在所拥有的。我应该 foreach 结果吗？

```
 <?php
//authentication for database
$hostname = "xxxx";
$username = "xxxx";
$password = "xxxx";

//connection to the database
$dbhandle = mysql_connect($hostname, $username, $password) 
or die("Unable to connect to MySQL");

//select a database to work with
$selected = mysql_select_db("test",$dbhandle) 
or die("Could not select examples");

//execute the SQL query and return records
$result = mysql_query("SELECT * FROM tbl_assignees WHERE work_pass_expiry = DATE(NOW())");

if (!$result) {
//handle your error
die('The query failed.');
}

//variable for email message
$to      = 'some email address';
$emailBody = "";

//fetch tha data from the database 
while ($row = mysql_fetch_array($result))
{
$subject = $row['name']."'s"." work pass is expiry soon";
$emailBody .="Creator: ".$row['rlog_create_user_name']." \n";
$emailBody .="Company: ".$row['company']."\n";
$emailBody .="Assignee's Name: ".$row['name']." \n";
$emailBody .="Fin No: ".$row['fin_no_']." \n";
$emailBody .="Relationship: ".$row['relationship']." \n";
$emailBody .="Main Holder's Fin :".$row['main_holder_fin']." \n";
$emailBody .="Work Pass Type :".$row['work_pass_type']." \n";
$emailBody .="Work Pass Expiry :".$row['work_pass_expiry']." \n";
$emailBody .="Passport No. :".$row['passport_no_']." \n";
$emailBody .="Passport Expiry :".$row['passport_expiry']." \n";
$emailBody .="D.O.B :".$row['d_o_b']." \n";
$emailBody .="Contact :".$row['contact']." \n";
$emailBody .="Email :".$row['email']." \n";
$emailBody .="Notes :".$row['note'];

}

$headers = 'From: Work Pass Notification System <no-reply@someemailaddress>' . "\r\n" .
    'Reply-To: someemailaddress' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

if(mail($to, $subject, $emailBody, $headers)) {
echo $emailBody;
echo 'Email sent successfully!';
} else {
echo $emailBody;
die('Failure: Email was not sent!');

}   
//close the connection
mysql_close($dbhandle);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:26:23.950

在 while 循环中添加 mail 函数，如下所示：

```
while ($row = mysql_fetch_array($result))
{    $to      = 'some email address'; // it's good if you get email ids from database also
     $emailBody=""; // Clear body for each email.

     /** Your Email Subject and body Here **/

     $headers = 'From: Work Pass Notification System <no-reply@someemailaddress>' . "\r\n" .
    'Reply-To: someemailaddress' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

      if(mail($to, $subject, $emailBody, $headers)) {
          echo $emailBody;
          echo 'Email sent successfully!';
      } else {
          echo $emailBody;
          die('Failure: Email was not sent!');
      }
} 
```

这将发送等于从数据库中检索到的记录数量的电子邮件。

# iphone - 退出警报视图中存在的文本字段键盘

> ID：15652352
> 
> 赞同：0
> 
> 时间：2013-03-27T05:16:17.023
> 
> 标签：iphone, keyboard, uitextfield

我在警报视图上有三个文本字段，我将键盘设置为 decimalType ，

```
- (IBAction)heightMethod:(id)sender

{

 self.utextfield = [[UITextField alloc] initWithFrame:CGRectMake(12.0, 45.0, 260.0, 25.0)]; utextfield.placeholder = @"  Centimeters";

self.utextfield.delegate=self;

self.utextfield.tag=3;
[ self.utextfield setBackgroundColor:[UIColor whiteColor]];
[self.alertHeight addSubview: self.utextfield];
// Adds a password Field
self.ptextfield = [[UITextField alloc] initWithFrame:CGRectMake(40, 80.0, 80, 25.0)]; ptextfield.placeholder = @"   Feet";
self.ptextfield.delegate=self;
self.ptextfield.tag=4;

[self.ptextfield setBackgroundColor:[UIColor whiteColor]];
[self.alertHeight addSubview:self.ptextfield];

self.ptextfieldInches = [[UITextField alloc] initWithFrame:CGRectMake(140, 80.0, 80, 25.0)]; ptextfieldInches.placeholder = @"   Inches";
self.ptextfieldInches.delegate=self;
self.ptextfieldInches.tag=5;

[ptextfieldInches setBackgroundColor:[UIColor whiteColor]];
[self.alertHeight addSubview:ptextfieldInches];

 [self.utextfield setKeyboardType:UIKeyboardTypeDecimalPad];
 [self.ptextfieldInches setKeyboardType:UIKeyboardTypeDecimalPad];
 [self.ptextfield setKeyboardType:UIKeyboardTypeDecimalPad];

[self.alertHeight show];

} 
```

当我点击任何文本字段时，键盘只辞职两次，但第三次没有辞职。我在 alertview 的 delgate 方法中添加了 resignfirst responder 方法，看这里

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:39:35.823

创建 iVar`UITextField`并在 side`UITextFieldDelegate`方法中分配`textFieldShouldBeginEditing`。希望它应该工作。

如下：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
   textField = iVar;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:52:32.873

尝试

```
- (void) alertView:(UIAlertView *)alertView willDismissWithButtonIndex:(NSInteger)buttonIndex
{
    [self.view endEditing: YES];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:50:28.160

当您在警报视图上按 OK 按钮时，键盘会自动关闭。我已经对其进行了测试，因此请从上述方法中删除**resignfirstresponder并尝试**

# c - 如何暂停和播放声音

> ID：15652354
> 
> 赞同：0
> 
> 时间：2013-03-27T05:16:24.483
> 
> 标签：c, audio

嘿，我想播放声音。我发出 ac 命令并播放声音，然后用户按下一个键，比如说“h”，然后声音停止 5 秒，5 秒后返回。我可以使用什么 c 命令来执行此操作？我认为 mci 发送字符串可能有效，但我不确定。Play Sound 是我的首选，但它没有此功能。

任何代码建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:06:40.700

我假设您使用的是 Windows

1.  使用`waveOutPause()`暂停音频。
2.  利用`Sleep(5000);`
3.  使用`waveOutRestart()`可从暂停的位置开始播放音频。

另请参阅：[waveOutPause MSDN 文档](http://msdn.microsoft.com/en-us/library/aa910079.aspx)

# php - 如何在 codeigniter 中启动一个新的网站项目？

> ID：15652357
> 
> 赞同：2
> 
> 时间：2013-03-27T05:16:52.933
> 
> 标签：php, codeigniter, web

我真的是初学者，`codeigniter`自从过去两周以来我一直在研究 CI。这期间我创建了很多views.php文件，一些controllers.php文件和一些models.php文件

**现在我想开始一个新的网站项目。**

我应该怎么办。我应该删除我的控制器，视图和模型等的所有文件，然后下载另一个`codeigniter`并从头开始吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T05:48:31.920

您应该查看 codeigniter 的文档以获取帮助，但只是为了让您快速入门，我将解释如何创建您的第一个 codeigniter 项目。

[安装 1 从http://ellislab.com/codeigniter](http://ellislab.com/codeigniter)下载 codeigniter 框架 2 将其上传到您网站的根目录或本地 apache 服务器目录。

创建您的 codeigniter 项目。在 codeigniter 中，您的控制器将处理 url 请求并加载适当的模型和视图。所以第一步是创建你的控制器。

1 创建您的控制器：转到 Applications->controllers，您将在那里找到一个名为welcome.php 的内置控制器。这个控制器加载一个视图welcome_message.php，它位于Application->views 中。您可以使用此控制器或创建自己的控制器。要创建您自己的控制器，请创建一个新的 php 文件 myfirstcontroller.php 并从 CI_Controller 扩展一个具有相同名称的类。请注意，文件名和您的类名应该相同。index 函数是向控制器发出请求时将调用的默认函数

```
class myfirstcontroller extends CI_Controller {

    public function index(){

    $this->load->view("myfirstview");

    }

} 
```

所以当你通过 yoursite/index.php/myfirstcontroller 请求这个控制器时

它将加载一个名为 myfirstview.php 的视图，该视图将驻留在应用程序-> 视图中。

继续并在应用程序 -> 视图中创建此文件。

2 要将数据从控制器传递到视图，您将向视图发送一个数组

```
class myfirstcontroller extends CI_Controller {

    public function index(){

    $data['name']="My first application.";
    $this->load->view("myfirstview",$data);

    }

} 
```

3 您可以在视图中访问此变量

```
 echo $name 
```

它会输出你的变量

3你使用模型你必须在applications->models中创建一个文件并从控制器调用它，它会以数组的形式返回结果。

您可以查看文档以获取更多帮助。

希望这可以帮助您开始使用 codeigniter。

用户指南在您的下载库中。

您也可以在[http://ellislab.com/codeigniter/user-guide/查看](http://ellislab.com/codeigniter/user-guide/)

祝你好运！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:36:35.630

这是 Phil Sturgeon 关于如何在一个 CI 实例上创建多个站点的文章，在这里他解释了 2 种方法并描述了优缺点。

[http://philsturgeon.co.uk/blog/2009/07/Create-an-Admin-panel-with-CodeIgniter](http://philsturgeon.co.uk/blog/2009/07/Create-an-Admin-panel-with-CodeIgniter)

但在他最新的文章中，他讲述了模块化分离发生了什么。

[http://philsturgeon.co.uk/blog/2010/03/modular-separation-codeigniter-2](http://philsturgeon.co.uk/blog/2010/03/modular-separation-codeigniter-2)

# c - 在 UDP 应用程序中客户端或服务器关闭时如何处理

> ID：15652358
> 
> 赞同：1
> 
> 时间：2013-03-27T05:16:57.850
> 
> 标签：c, windows, winapi, udp

我正在开发一个使用 UDP 进行客户端服务器通信的 Windows 应用程序，但由于 UDP 是无连接的，所以每当客户端出现故障时，服务器不知道客户端已关闭并继续发送数据。服务器关闭时的情况类似。我怎样才能满足这种情况，即每当客户端或服务器中的任何一个发生故障时，对方都必须知道并且可以处理它。等待回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T06:20:23.823

您要问的内容超出了 UDP 的范围。您需要通过 UDP 实现自己的协议来实现这一点。

一个简单的想法可能是定期发送[*keepalive 消息*](http://en.wikipedia.org/wiki/Keepalive)（另一方面，TCP 具有此功能）。

您可以有一个简单的实现，如下所示：

*   让后台线程继续发送这些消息并等待回复。
*   收到回复后，您可以使用活动设备列表填充某种数据结构或文件。
*   您的其他主线程（或多个线程）可以有以下更改：

    1.  在发送任何数据之前，请检查您要发送到的客户端是否存在于该文件/数据结构中。
    2.  如果没有，请跳过此客户端。
    3.  对填充的文件/数据结构中的所有剩余客户端重复上述操作。

我在上述实现中看到的一个问题类似于从主线程的角度来看的[RAW 危险。](http://en.wikipedia.org/wiki/Hazard_%28computer_architecture%29#Read_After_Write_.28RAW.29)

使用以下类比而不是[提到的 RAW 危险示例](http://en.wikipedia.org/wiki/Hazard_%28computer_architecture%29#Example)，

*   `i1`=您发送keepalive消息的后台线程。
*   `i2`=发送/接收数据并执行其他任务的主线程（或多个线程）。
*   此处的 RAW 危险是`i2`尝试读取`i1` **之前** `i1`填充的数据结构/文件时已对其进行了更新。
*   这意味着（最坏的情况），`i2`不会得到更新的列表，这样可能会错过一些客户。
*   如果这种损失很严重，我可以建议你可能有一种机制，当它完成任何正在进行的写入时`i1`会发出信号。`i2`
*   如果这种损失不是很严重，那么您可以跳过上述机制以使您的程序更快。

* * *

## Keepalive 消息说明：

您只需要发送一个非常轻量级的消息（通常没有数据。只是标题信息）。**确保**此消息**是唯一的**。您*不*希望另一条消息被解释为保活消息。

`sendto()`您可以通过呼叫[广播地址](http://en.wikipedia.org/wiki/Broadcast_address#IP_networking)来发送此消息。完成发送后，使用 等待特定超时的回复`recv()`。

将每个回复记录在数据结构/文件中。超时到期后，让线程休眠一段时间。当该时间到期时，重复上述过程。

为了帮助您开始编写良好、健壮的网络代码，请阅读[Beej 的网络编程指南](http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html)。这绝对是美妙的。它解释了许多概念。

# android - 如何从android中的资产中获取XML数据？

> ID：15652359
> 
> 赞同：5
> 
> 时间：2013-03-27T05:16:58.860
> 
> 标签：android, android-xml

我在资产文件夹中存储了一个 XML 文件，我想检索我存储在 android 资产中的数据 XML 文件，给我一个解决方案。

```
<Response>
    <RequestID>1001</RequestID>
    <FunctionStatus></FunctionStatus>   
    <Message></Message>

<Result>    
    <Banner>

    <Banner_List>
        <Banner_id>3794</Banner_id>
        <Banner_url>http://www.metromatinee.com/agile_dogs/05.jpg</Banner_url>
        <Movie_name>Rose Guitarinaal</Movie_name>
        <gender>Movie</gender>
    </Banner_List> 
</Response> 
```

我试过
`InputStream is = getAssets().open("demo.xml");`

但异常引起了
任何帮助..???

```
03-27 11:03:04.939: E/AndroidRuntime(432): FATAL EXCEPTION: main
03-27 11:03:04.939: E/AndroidRuntime(432): java.lang.NullPointerException
03-27 11:03:04.939: E/AndroidRuntime(432):  at android.content.ContextWrapper.getAssets(ContextWrapper.java:74)
03-27 11:03:04.939: E/AndroidRuntime(432):  at com.service.example.DemoBussinessExecutePage.executeBussinessFunction(DemoBussinessExecutePage.java:230)
03-27 11:03:04.939: E/AndroidRuntime(432):  at com.service.example.Service_Manager.executeBussinessFunction(Service_Manager.java:38)
03-27 11:03:04.939: E/AndroidRuntime(432):  at com.service.example.Service_class$1.onClick(Service_class.java:57)
03-27 11:03:04.939: E/AndroidRuntime(432):  at android.view.View.performClick(View.java:2408)
03-27 11:03:04.939: E/AndroidRuntime(432):  at android.view.View$PerformClick.run(View.java:8816)
03-27 11:03:04.939: E/AndroidRuntime(432):  at android.os.Handler.handleCallback(Handler.java:587)
03-27 11:03:04.939: E/AndroidRuntime(432):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-27 11:03:04.939: E/AndroidRuntime(432):  at android.os.Looper.loop(Looper.java:123)
03-27 11:03:04.939: E/AndroidRuntime(432):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-27 11:03:04.939: E/AndroidRuntime(432):  at java.lang.reflect.Method.invokeNative(Native Method)
03-27 11:03:04.939: E/AndroidRuntime(432):  at java.lang.reflect.Method.invoke(Method.java:521)
03-27 11:03:04.939: E/AndroidRuntime(432):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-27 11:03:04.939: E/AndroidRuntime(432):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-27 11:03:04.939: E/AndroidRuntime(432):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T08:33:58.677

最后我得到了解决方案。

```
AssetManager am = Class.getAssets();
        try 
        {
            InputStream is = am.open("1001.xml");
            int length = is.available();
            byte[] data = new byte[length];
            is.read(data);
            demoInput = new String(data).toString();
        }
        catch (IOException e1)
        {
            e1.printStackTrace();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:44:05.650

这对我有用。

```
 InputSource is = new InputSource(getResources().openRawResource(R.raw.config));
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc=db.parse(new InputSource(is.getByteStream()));
        doc.getDocumentElement().normalize();
  NodeList nodeList = doc.getElementsByTagName("woeid");
        for (int i = 0; i < nodeList.getLength(); i++) 
        {
            Node node = nodeList.item(i);
            Element fstElmnt = (Element) node;
            fstElmnt.getElementsByTagName("countrywoeid").item(0).getTextContent();
            fstElmnt.getElementsByTagName("countryname").item(0).getTextContent();
        } 
```

这是项目原始文件夹中的 XML

```
 <settings>
 <title>Configuration</title>
 <Version>1.0</Version>
 <Gadgets>6</Gadgets>
 <woeid>
  <countrywoeid>2211096</countrywoeid>
  <countryname>Asia/Karachi</countryname>
 </woeid>
 <woeid>
  <countrywoeid>2211177</countrywoeid>
  <countryname>Asia/Karachi</countryname>
 </woeid> 
```

# node.js - 无法在 ntwitter 的流媒体 API 中使用“关注”。接收未指定的“错误”事件

> ID：15652361
> 
> 赞同：2
> 
> 时间：2013-03-27T05:17:06.303
> 
> 标签：node.js, twitter, twitter-streaming-api

我需要从单个 Twitter 帐户流式传输推文，但我不确定我做错了什么。使用“跟踪”时，流工作正常（流式传输趋势主题）。但是当我使用“跟随”时，代码会中断。

我正在使用 ntwitter 模块。

这是代码：

```
var twitter = require('ntwitter');

var twit = new twitter({
  consumer_key: 'deleted',
  consumer_secret: 'deleted',
  access_token_key: 'deleted',
  access_token_secret: 'deleted'
});

twit.stream('statuses/filter', { follow:'@tbottt' }, function(stream) {
    stream.on('data',function(data){
      console.log(data);
    });
}); 
```

我收到这个错误

```
Error: Uncaught, unspecified 'error' event.
    at EventEmitter.emit (events.js:68:15)
    at ClientRequest.Twitter.stream (F:\Dropbox\work\socketio\node_modules\ntwitter\lib\twitter.js:251:14)
    at ClientRequest.EventEmitter.emit (events.js:88:17)
    at HTTPParser.parserOnIncomingClient [as onIncoming] (http.js:1455:7)
    at HTTPParser.parserOnHeadersComplete [as onHeadersComplete] (http.js:111:23)
    at CleartextStream.socketOnData [as ondata] (http.js:1366:20)
    at CleartextStream.CryptoStream._push (tls.js:492:27)
    at SecurePair.cycle (tls.js:846:20)
    at EncryptedStream.CryptoStream.write (tls.js:227:13)
    at Socket.ondata (stream.js:38:26) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-21T17:19:04.120

我知道有点晚了，但我自己遇到同样的问题后发现了这个问题。

我发现您必须在请求中使用 twitter 用户的 ID 而**不是**屏幕名称。`follow`

有一些网站声称提供快速的 twitter 用户名 -> ID 搜索，但没有一个对我有用。相反，我发现如果您在包含来自用户的推文的页面上查看源代码并搜索`data-user-id`，您会发现它被列为 HTML 元素中的一个属性（通常第二次或第三次出现包含 ID）。

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-14T10:29:27.377

您必须使用用户 ID 而不是用户名。我在很长一段时间内都犯了同样的错误，但它并不完美。

示例代码 =>

```
var   Twit = require('twit');

var T = new Twit({
  consumer_key:         config.key.consumer_key,
  consumer_secret:      config.key.consumer_secret,
  access_token:         config.key.access_token,
  access_token_secret:  config.key.access_token_secret
});

var stream = T.stream('statuses/filter', { follow: 4708084272 })
stream.on('tweet', function (tweet) {
  console.log(tweet)
}) 
```

# php - 双重检查验证 PHP 和 Ajax

> ID：15652368
> 
> 赞同：0
> 
> 时间：2013-03-27T05:17:43.423
> 
> 标签：php, ajax, validation

目前我正在`Ajax`检查注册验证，但我觉得如果互联网连接不够好，有时`Ajax`无法正常工作，它会使用户使用相同的用户名注册。那么如何仔细检查注册验证以避免我的数据库中出现重复的用户名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:27:40.253

如果您数据库中的字段设置为`UNIQUE`这不会有问题，因为将返回错误，即

```
CREATE TABLE user (
    username VARCHAR(20) UNIQUE NOT NULL,
    ...
) 
```

当`INSERT`在这个表上运行 an 但潜在的用户名已经被占用时，错误将被踢回。

我应该提一下，虽然客户端验证一切都很好，很适合在您的网页上使用 pop-up `div`s 和 highlighting `span`s，但应该始终在服务器端重新检查验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:31:21.343

除了将列上的约束设置`username`为唯一之外，您应该在创建记录之前进行查询以检查是否有任何错误，听起来您只依赖 Javascript 来验证您的输入。

先解决你的验证！不要依赖javascript来做，前端（html视图）和后端代码（php）需要它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T05:40:00.930

好吧，这只是一个想法，我很确定您会对输入的更改或模糊事件进行验证。但注册将通过提交按钮完成。如果我是对的，只需在注册过程页面中添加一些脚本来检查用户名是否存在，如果存在，只需重定向回注册页面，并在`$_SESSION`or上添加一些错误变量`URL/$_REQUEST`。该错误变量可用于告诉用户出了什么问题。. 祝你好运 ！

# ios - NSString 方法 stringByTrimmingCharactersInSet：不修剪逗号

> ID：15652370
> 
> 赞同：0
> 
> 时间：2013-03-27T05:17:48.207
> 
> 标签：ios, nsstring, nscharacterset

我有以下代码用于从一些表示数字的字符串中删除多余的字符：

```
NSCharacterSet *charactersToKeep = [NSCharacterSet characterSetWithCharactersInString:@"0123456789"];
NSCharacterSet *charactersToBeRemoved = [charactersToKeep invertedSet];

NSString *myString = [dictionary objectForKey:@"MyKey"];
myString = [myString stringByTrimmingCharactersInSet:charactersToBeRemoved];
myString = [myString stringByReplacingOccurrencesOfString:@"," withString:@""]; 
```

在 method 之后`stringByTrimmingCharactersInSet:`，除了逗号之外的所有多余字符都被删除。`stringByReplacingOccurencesOfString:`删除逗号后的调用。为什么第一次调用后没有删除？

以下是每行代码之后 myString 的示例：

```
myString = " $9,959 "
myString = "9,959"
myString = "9959" 
```

我也试过

```
NSCharacterSet *charactersToBeRemoved = [NSCharacterSet decimalDigitCharacterSet]; 
```

并得到相同的结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T05:21:57.460

stringByTrimmingCharactersInSet：只从字符串的末端修剪字符，而不是在里面。

# postgresql - 正好一列和两列 postgres

> ID：15652375
> 
> 赞同：0
> 
> 时间：2013-03-27T05:18:15.950
> 
> 标签：postgresql

我是 SQL Server 的 postgres 新手。我正在设置一个将“posID”作为整数的函数，并且（我认为）从技能表中返回行。如果我将函数的返回类型设置为“技能”，则会出现错误：“最终语句返回的列太多。” 但是，如果我将返回类型设置为“技能”[]（技能数组？），那么我会收到错误“最终语句必须只返回一列”。

我对正在发生的事情感到困惑。我认为 postgres 正在“看到”该作业 id 是作业表上的主键并且（因此希望该函数仅返回一行）但是无论是否使用主键我都会遇到相同的错误-所以也许是更简单的事情。

这是函数中的代码

```
select * from "Skills" inner join "Jobs" on "Skills"."SkillID"="Jobs"."SkillID" where "JobID"="posID" 
```

这是工作表（有时没有 PK）

```
CREATE TABLE "Jobs"
(
  "JobID" integer NOT NULL,
  "SkillID" integer,
  "Title" character varying[],
  CONSTRAINT "PK" PRIMARY KEY ("JobID")
) 
```

这是技能表

```
CREATE TABLE "Skills"
(
  "SkillName" character varying(50),
  "SkillID" integer
) 
```

这是函数（使用不同的代码。显然它不会接受上面的代码）

```
CREATE OR REPLACE FUNCTION "skillsForJob"("posID" integer)
  RETURNS "Skills" AS
'select * from "Skills"'
  LANGUAGE sql VOLATILE
  COST 100;
ALTER FUNCTION "skillsForJob"(integer)
  OWNER TO postgres; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T05:30:12.170

您需要使用`returns setof <table>`返回多行，查看[文档](http://www.postgresql.org/docs/9.0/static/xfunc-sql.html)

```
CREATE OR REPLACE FUNCTION skillsForJob(posID integer)
  RETURNS "Skills" AS
'select "Skills".* from "Skills" inner join "Jobs" on "Skills"."SkillID"="Jobs"."SkillID" where "JobID"=$1'
  LANGUAGE sql VOLATILE
  COST 100;
ALTER FUNCTION "skillsForJob"(integer)
  OWNER TO test; 
```

# php - 从 PHP 返回值的 AJAX 调用不起作用

> ID：15652376
> 
> 赞同：0
> 
> 时间：2013-03-27T05:18:22.817
> 
> 标签：php, javascript, ajax, jquery

我有一个 AJAX 脚本，它将值发送到 PHP 脚本并从 PHP 脚本中检索值。脚本发送值的部分工作正常。这是检索值的问题。我无法弄清楚出了什么问题。

AJAX 代码：

```
$(document).ready(function() {
    $("#raaagh").click(function() {
        $.ajax({
            url: 'ajax.php', //This is the current doc
            type: "POST",
            data: ({name: 145}),
            success: function(data) {
                console.log(data);
                $.ajax({
                    url:'ajax.php',
                    data: data,
                    dataType:'json',
                    success:function(data1) {
                        var y1=data1;
                        console.log(data1);
                    }
                });
            }
        });
    });
}); 
```

PHP代码：

```
<?php

$userAnswer = $_POST['name'];    

echo json_encode($userAnswer);    
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:23:08.117

```
data: {name: 145} 
```

试试这个希望这会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:38:04.090

在将值分配给 $userAnswer 之前，请检查是否发布了“名称”。

两个 ajax 脚本都发送到“ajax.php”。在第一个 ajax 请求中发布“名称”，但在第二个 ajax 请求中未发布“名称”。

要查看警告和错误，请在 php.ini 中启用错误报告。

```
<?php 
//To enable error reporting
ini_set('display_errors',true);
error_reporting(E_ALL); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T07:47:58.873

在第二个 ajax 调用中设置`type:'POST'`并尝试使用`data1[0]`.
还请记住，您正在与第二个请求一起发送一个 json 字符串（来自第一个 ajax）。
基本上你正在编码一个编码值，所以当你收到 post 值时，你应该 json_decode post 值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T11:35:25.807

您的嵌套 AJAX 调用未指定请求类型。默认值为 GET，但您的 ajax.php 正在尝试查找 POST。

```
$(document).ready(function() {
$("#raaagh").click(function() {
    $.ajax({
        url: 'ajax.php',
        type: "POST",
        data: ({name: 145}),
        success: function(data) {
            console.log(data);
            $.ajax({
                url:'ajax.php',
                type: "POST",       //<-- added here
                data: {name:data},  //<-- also required for POST
                dataType:'json',
                success:function(data1) {
                    var y1=data1;
                    console.log(data1);
                }
            });
        }
    });
}); 
```

});

# php - 通过 jQuery AJAX 传递表单数组数据

> ID：15652379
> 
> 赞同：2
> 
> 时间：2013-03-27T05:18:29.277
> 
> 标签：php, html, jquery

我有一个表格，允许您一次添加多个列表。

我还必须通过 md5check。

IE）

```
<select name="master_id"></select>

<select name="id2[]"></select>
<select name="id3[]"></select>
<input name="text[]"></input>
<input name="text2[]"></text>
<input name="text3[]"></text>
<input name="check[]" type="checkbox"></input>

<select name="id2[]"></select>
<select name="id3[]"></select>
<input name="text[]"></input>
<input name="text2[]"></text>
<input name="text3[]"></text>
<input name="check[]" type="checkbox"></input>

<select name="id2[]"></select>
<select name="id3[]"></select>
<input name="text[]"></input>
<input name="text2[]"></text>
<input name="text3[]"></text>
<input name="check[]" type="checkbox"></input>

jQuery.ajax({
    type: "POST",
    url: ipb.vars['base_url'] + "app=main&module=ajax&section=upload&do=upload",
    data: {
        'md5check': ipb.vars['secure_hash'],
    }
    }).done(function() {
    alert( "Data Saved:");
    }); 
```

我想通过 AJAX 传递主 ID 和数组，以便它们可以在 PHP 中使用 $_REQUEST。'md5check'***必须***在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:41:23.043

data 也可以采用字符串，因此，您可以使用

```
jQuery.ajax({
  type: "POST",
  url: ipb.vars['base_url'] + "app=main&module=ajax&section=upload&do=upload",
  data: $('input[name="username[]"],input[name="password[]"],input[name="rawtext[]"]').serialize()
    + '&md5check='+ipb.vars['secure_hash'],
}).done(function() {
  alert( "Data Saved:");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T17:12:47.847

您可以使用以下内容。

```
$('#myform').submit(function(e) {
    e.preventDefault();
    e.stopPropagation();

    var formData = $(this).serializeObject();
    var postData = $.extend({}, formData, {
        app: main,
        module: ajax,
        section: upload,
        do: upload
    });

    $.post(ipb.vars['base_url'], postData,
        function(data) {
            alert(data);
        }
    );
});

$.fn.serializeObject = function() {
    var objectData = {};
    var serializeArr = this.serializeArray();

    $.each(serializeArr, function() {
        if(objectData[this.name] !== undefined) {
            if(!objectData[this.name].push) {
                objectData[this.name] = [objectData[this.name]];
            }

            objectData[this.name].push($.trim(this.value) || '');
        } else {
            objectData[this.name] = $.trim(this.value) || '';
        }
    });

    return objectData;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T05:53:32.320

HTML 表单：

```
<form action="" method="POST" id="myform">
    <input name="username[]">
    <input name="password[]">
    <input name="rawtext[]">
    <input name="username[]">
    <input name="password[]">
    <input name="rawtext[]">
    <input name="username[]">
    <input name="password[]">
    <input name="rawtext[]">
   <input name="submit" type="submit" value="submit">
</form> 
```

jQuery：

```
$('#myform').submit(function(event) {
     event.preventDefault();
     //comment this line out
     alert($(this).serialize());
     $.post(ipb.vars['base_url'] + "app=main&module=ajax&section=upload&do=upload&", { 
     $(this).serialize() })
    .done(function(data) {
    alert("Data Loaded: " + data);
  });
 return false;
}); 
```

# iphone - Xcode 变量视图在断点处停止时卡住加载变量

> ID：15652383
> 
> 赞同：5
> 
> 时间：2013-03-27T05:19:02.100
> 
> 标签：iphone, ios, xcode

我正在调试和 iOS，当在断点处停止时，变量视图会卡在变量中心的旋转指示器长达 5 分钟。在 iPhone 5 上调试和在模拟器上调试时都会发生这种情况。调试器被卡住，直到加载此视图。

我正在使用 Xcode 4.6.1

这发生在两个共享一些通用代码的项目上。我尝试从 LLDB 切换到 GDB，但没有任何区别。

# shell - ssh 到另一台服务器并仅列出目录中的目录

> ID：15652387
> 
> 赞同：1
> 
> 时间：2013-03-27T05:19:21.720
> 
> 标签：shell, unix, ssh

dev1.ab.com 是当前服务器，我必须 ssh 到 tes1.ab.com，移动到路径 /spfs/tomcat/dir 内并列出那里存在的所有目录（无文件）。

为此，我使用 dev1.ab.co 命令行中的以下命令

* *ssh tes1.ab.com “ls -1d */ /spfs/tomcat/dir”**

但在输出中我得到输出的主目录是/spfs/tomcat，我也尝试过

* *ssh tes1.ab.com " ls -lrt /spfs/tomcat/dir | ls -1d */"**

* *ssh tes1.ab.com " cd /spfs/tomcat/dir | ls -1d */"**

并最终得到几乎相同的结果。

有人可以帮我在 dev1.ab.com 的命令行中编写一个命令来 ssh 到 tes1.ab.com 并将输出作为 /spfs/tomcat/dir 目录中存在的目录列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:23:58.573

使用`find`而不是`ls`.

`ssh tes1.ab.com "find /my/folder -type d"`

仅添加`-maxdepth 1`到第一级列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:01:27.120

你可以使用以下

ssh tes1.ab.com 'ls -ld /spfs/tomcat/dir/*/'

单独列出 /spfs/tomcat/dir 中的所有目录

# ios - Worklight WL.Client.Push.onReadyToSubscribe 没有被解雇

> ID：15652388
> 
> 赞同：0
> 
> 时间：2013-03-27T05:19:40.880
> 
> 标签：ios, apple-push-notifications, ibm-mobilefirst

我遇到了 Worklight 推送通知的问题。

我遵循了 Worklight 5.0.5，Module_41_-_Push_Notifications 的所有步骤。PDF 文件，并做了 Push 演示。

我面临一个错误，说明：

> [错误] 无法订阅，通知令牌未在服务器上更新

尽管在控制台上它确实显示了设备 ID。我的假设是**WL.Client.Push.onReadyToSubscribe**没有被解雇。

有人有类似的问题。 [https://www.ibm.com/developerworks/forums/thread.jspa?threadID=456501](https://www.ibm.com/developerworks/forums/thread.jspa?threadID=456501)

我已经设定

```
<pushSender password="Your_Password"/> 
```

并多次重新生成和部署应用程序，但没有任何好处。

欢迎任何帮助或建议。

```
Environment:
WL 5.0.5 & 5.0.6
Xcode 4.2
iPhone (iOS 5.1 and 6.1) 
```

我在本地 Mac 上再次尝试，通过 iPhone 4、iOS 5.1 进行测试。通过设备运行并连接到 Studio 码头时。我越来越低了。

```
Mar 27 11:23:49 Appsdev-iPhone PushApplication[211] <Warning>: Applications are expected to have a root view controller at the end of application launch
Mar 27 11:23:49 Appsdev-iPhone PushApplication[211] <Warning>: Web resources integrity test is disabled.
Mar 27 11:23:49 Appsdev-iPhone kernel[0] <Debug>: launchd[211] Builtin profile: container (sandbox)
Mar 27 11:23:49 Appsdev-iPhone kernel[0] <Debug>: launchd[211] Container: /private/var/mobile/Applications/5DA837C4-F039-4795-9509-C98383E40C68 [69] (sandbox)
Mar 27 11:23:49 Appsdev-iPhone PushApplication[211] <Warning>: Multi-tasking -> Device: YES, App: YES
Mar 27 11:23:51 Appsdev-iPhone PushApplication[211] <Warning>: [LOG] ondeviceready event dispatched
Mar 27 11:23:51 Appsdev-iPhone PushApplication[211] <Warning>: {
        appVersionPref = "1.0";
        freeSpace = 14291787776;
        wlSkinLoaderChecksum = "(null)";
        wlSkinName = default;
    }
Mar 27 11:23:51 Appsdev-iPhone PushApplication[211] <Warning>: [LOG] wlclient init started
Mar 27 11:23:51 Appsdev-iPhone PushApplication[211] <Warning>: [LOG] Read cookies: null
Mar 27 11:23:51 Appsdev-iPhone PushApplication[211] <Warning>: [LOG] CookieMgr read cookies: {}
Mar 27 11:23:51 Appsdev-iPhone PushApplication[211] <Warning>: [LOG] Request [http://172.20.10.2:8080/apps/services/api/PushApplication/iphone/init]
Mar 27 11:24:12 Appsdev-iPhone PushApplication[211] <Warning>: [LOG] Request [login]
Mar 27 11:24:12 Appsdev-iPhone PushApplication[211] <Warning>: [LOG] Request [http://172.20.10.2:8080/apps/services/api/PushApplication/iphone/init]
Mar 27 11:24:12 Appsdev-iPhone PushApplication[211] <Warning>: DeviceAuthManager:getWorklightUniqueDeviceId --> returning UUID from the keychain
Mar 27 11:24:12 Appsdev-iPhone PushApplication[211] <Warning>: [LOG] Request [http://172.20.10.2:8080/apps/services/api/PushApplication/iphone/init]
Mar 27 11:24:12 Appsdev-iPhone PushApplication[211] <Warning>: [LOG] Clearing notification subscriptions.
Mar 27 11:24:12 Appsdev-iPhone PushApplication[211] <Warning>: [LOG] Send new server notification token id.
Mar 27 11:24:12 Appsdev-iPhone SpringBoard[15] <Warning>: No valid 'aps-environment' entitlement string found for application 'PushApplication': (null). Notifications will not be delivered.
Mar 27 11:24:12 Appsdev-iPhone PushApplication[211] <Warning>: [LOG] response [http://172.20.10.2:8080/apps/services/api/PushApplication/iphone/init] success: /*-secure-
    {"userPrefs":{},"WL-Authentication-Success":{"wl_remoteDisableRealm":{"userId":"null","attributes":{},"isUserAuthenticated":1,"displayName":"null"},"PushAppRealm":{"userId":"aahad","attributes":{},"isUserAuthenticated":1,"displayName":"aahad"},"wl_antiXSRFRealm":{"userId":"3l6ap8g9t4h9uk5rb1fmqfok15","attributes":{},"isUserAuthenticated":1,"displayName":"3l6ap8g9t4h9uk5rb1fmqfok15"},"wl_deviceNoProvisioningRealm":{"userId":"57B167E4-1258-4AD7-9DA1-92DC66A0451E","attributes":{"mobileClientData":"com.worklight.core.auth.impl.MobileClientData@6a76de98"},"isUserAuthenticated":1,"displayName":"57B167E4-1258-4AD7-9DA1-92DC66A0451E"}},"notificationSubscriptionState":{},"gadgetProps":{"directUpdate":{"updateUnpackedSize":1014255,"availableSkins":["default"],"checksum":4077143359,"updateSize":290080},"ENVIRONMENT":"iphone"},"userInfo":{"wl_authenticityRealm":{"userId":null,"attributes":{},"isUserAuthenticated":0,"displayName":null},"SampleAppRealm":{"userId":null,"attributes":{},"isUserAuthenticated":0,"displayName":null},"wl_remoteDisableRealm":{"userId":"null","attributes":{},"isUserAuthenticated":1,"displayName":"null"},"PushAppRealm":{"userId":"aahad","attributes":{},"isUserAuthenticated":1,"displayName":"aahad"},"wl_antiXSRFRealm":{"userId":"3l6ap8g9t4h9uk5rb1fmqfok15","attributes":{},"isUserAuthenticated":1,"displayName":"3l6ap8g9t4h9uk5rb1fmqfok15"},"WorklightConsole":{"userId":null,"attributes":{},"isUserAuthenticated":0,"displayName":null},"wl_deviceAutoProvisioningRealm":{"userId":null,"attributes":{},"isUserAuthenticated":0,"displayName":null},"wl_deviceNoProvisioningRealm":{"userId":"57B167E4-1258-4AD7-9DA1-92DC66A0451E","attributes":{"mobileClientData":"com.worklight.core.auth.impl.MobileClientData@6a76de98"},"isUserAuthenticated":1,"displayName":"57B167E4-1258-4AD7-9DA1-92DC66A0451E"},"myserver":{"userId":"aahad","attributes":{},"isUserAuthenticated":1,"displayName":"aahad"},"wl_anonymousUserRealm":{"userId":null,"attributes":{},"isUserAuthenticated":0,"displayName":null}}}*/

Mar 27 11:24:12 Appsdev-iPhone PushApplication[211] <Warning>: [LOG] wlclient connect success
Mar 27 11:24:12 Appsdev-iPhone PushApplication[211] <Warning>: [LOG] before: app init onSuccess
Mar 27 11:24:12 Appsdev-iPhone PushApplication[211] <Warning>: [LOG] after: app init onSuccess
Mar 27 11:24:12 Appsdev-iPhone PushApplication[211] <Warning>: [LOG] wlclient init success
Mar 27 11:24:12 Appsdev-iPhone PushApplication[211] <Warning>: Could not register for remote notifications: Error Domain=NSCocoaErrorDomain Code=3000 "no valid 'aps-environment' entitlement string found for application" UserInfo=0xfeafba0 {NSLocalizedDescription=no valid 'aps-environment' entitlement string found for application}
Mar 27 11:24:12 Appsdev-iPhone PushApplication[211] <Warning>: [ERROR] Error while trying to retrieve device token from the mobile operating system. 
```

请参阅附加的快照。![在此处输入图像描述](../Images/9f38c8f22197c1d6b3958039902da883.png) ![在此处输入图像描述](../Images/8e72526e16a443938d9eae11df6d2a4b.png)

生成APNS的步骤：

*   登录 Apple Account 选择 App ID -> 配置 -> 启用推送

*   选定的开发推送 SSL 证书

*   先生成新的 CSR，然后获得证书
*   双击证书并从钥匙串中选择这个新证书及其私钥，然后右键单击并导出并保存为 apns-certificate-sandbox.p12
*   复制到 Worklight 中，位于 application-descriptor.xml 同一级别的 App 文件夹的根目录中

*   提供 pushSender 密码和 securityTest

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T08:08:28.470

@伊丹，

现在解决了。有两个原因：

1.  在 worklight App 文件夹中复制 APNS 证书后，您必须重新生成和部署所有证书。然后，您必须在 WL 控制台上部署 wlapp ......这是不做的。
2.  我为 iPhone 环境使用了错误的自定义安全领域，阻止了 WL 服务器响应设备。

希望这些信息能帮助其他面临类似问题的人。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:58:48.563

确保您拥有：

1.  将 iPhone 环境添加到 application-descriptor.xml（使用 Worklight 提供的向导）
2.  将移动安全测试添加到 iphone 环境（查看它是如何为 Android 环境完成的；复制它）
3.  将 .p12 证书放在应用程序文件夹中（与环境文件夹同级）
4.  证书的名称是“apns-certificate-sandbox.p12”（用于开发）或“apns-certificate-production.p12”（用于生产）
5.  在 pushSender 元素中添加了正确的密码

登录应用程序后，您应该会收到一条警报，说明您可以订阅。

为确保您已正确设置开发环境，请遵循本指南：[了解和设置在开发环境中使用 iOS 设备和 Apple 推送通知服务 (APNS) 所需的工件](https://www.ibm.com/developerworks/community/blogs/worklight/entry/understanding-and-setting-up-push-notifications-in-development-evnironment?lang=en)

# .net - 如何在 .NET 中生成代理类 wsdl 方案时忽略重复的 xsd 元素

> ID：15652389
> 
> 赞同：0
> 
> 时间：2013-03-27T05:19:53.387
> 
> 标签：.net, wsdl, soapui, svcutil.exe, wsdl.exe

我需要从 wsdl 方案生成 .NET (C#) 代理类

[http://hh.ru/services/VacancyService?wsdl](http://hh.ru/services/VacancyService?wsdl)

但我收到一个错误：

```
The global element 'http://ns.hr-xml.org/2007-04-15:InternetDomainName' has already been declared. 
```

我尝试使用 MS VS 2012 和 2010 中的 wsdl.exe、svcutil.exe 工具，但没有成功。

在 SoapUI（通过 Axis 1.X wsdl2java 工具）中生成代理类并取消选中 noImports 复选框时，可以避免该错误。

有没有办法让 wsdl.exe 或 svcutil.exe 忽略重复的 xsd 元素？或者也许修改下载的 wsdl 方案？

PS：当前的 Web 服务“按原样”呈现，没有机会以某种方式对其进行更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T14:10:47.570

No, there is no such option. Your best option is to write your own utility that downloads the WSDL and removes the duplicate definitions before passing the file to xsd.exe.

# hudson - Hudson 无法使用 jsTestDriver 打开浏览器

> ID：15652392
> 
> 赞同：0
> 
> 时间：2013-03-27T05:20:20.890
> 
> 标签：hudson, js-test-driver, jsunit

试图运行一个弹出警报窗口的测试用例。这在哈德逊不起作用，但在命令提示符下同样工作正常

错误：它显示一个窗口，说明“交互式服务检测”，并说该程序与 Windows 不完全兼容，

JsTestDriver 版本 --> 1.3.5

火狐——> 14.0.1

哈德逊 --> 2.2.1

任何帮助将不胜感激

# c# - C#代码在word文档的表格单元格中填充颜色

> ID：15652394
> 
> 赞同：8
> 
> 时间：2013-03-27T05:20:26.767
> 
> 标签：c#, ms-word

我使用 C# 创建了一个包含表格的 word 文档。现在我想用红色填充此表中的一个单元格。在网上搜索时，我发现我可以使用着色对象来做到这一点。但我不知道如何使用它的任何细节。

我尝试使用类似的东西：

```
doc.Tables[whichTable].Cell(1,4).Range.Shading.BackgroundPatternColor 
```

但是我怎样才能使用它来设置颜色？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T05:32:34.493

如果您查看此[参考页面](http://msdn.microsoft.com/en-us/library/office/aa223960%28v=office.11%29.aspx)，您将看到列出的 WdColor 常量。这些是文字可用的颜色，要查看更多关于它们的信息，请参阅[此处](http://msdn.microsoft.com/en-us/library/office/bb237558%28v=office.12%29.aspx)的枚举列表。

您选择表格单元格的代码对我来说是正确的，因此您只需将 BackgroundPatternColor 设置为 WdColors 之一。

# scala - ConstructingParser中的preserveWS参数是什么意思？

> ID：15652395
> 
> 赞同：0
> 
> 时间：2013-03-27T05:20:42.603
> 
> 标签：scala

[https://github.com/scala/scala/blob/v2.10.1/src/library/scala/xml/parsing/ConstructingParser.scala](https://github.com/scala/scala/blob/v2.10.1/src/library/scala/xml/parsing/ConstructingParser.scala)

源代码或文档都没有解释`preserveWS`:

```
object ConstructingParser {
  def fromFile(inp: File, preserveWS: Boolean) =
    new ConstructingParser(Source.fromFile(inp), preserveWS).initialize

  def fromSource(inp: Source, preserveWS: Boolean) =
    new ConstructingParser(inp, preserveWS).initialize
} 
```

有人知道这是什么意思吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T00:49:08.910

正如 Mat 建议的那样，它确实意味着“保留空白”。

# javascript - 为什么物体没有锚定到棱柱关节

> ID：15652397
> 
> 赞同：0
> 
> 时间：2013-03-27T05:20:53.187
> 
> 标签：javascript, box2d, box2dweb

我正在创建一堆随机对象并将它们约束到一个带有棱柱关节的固定体（圆）。目标是让他们滑向那个固定的圆圈。

问题是 - 物体从关节边缘掉落，因为它们似乎没有锚定。

我究竟做错了什么？

js小提琴：http: [//jsfiddle.net/Jk5VD/7/](http://jsfiddle.net/Jk5VD/7/)

js：（联合代码直接去Physics.prototype.connectToCenterWithJoint）

```
var Physics = (function () {
    function Physics() {
        this.bodies = [];
        this.testObjectCount = 30;
        this.w = new Box2D.Dynamics.b2World(new Box2D.Common.Math.b2Vec2(0, 10), true);
        var fixture = new Box2D.Dynamics.b2FixtureDef();
        this.bodyDef = new Box2D.Dynamics.b2BodyDef();
        this.bodyDef.type = Box2D.Dynamics.b2Body.b2_staticBody;
        this.bodyDef.position.x = 9;
        this.bodyDef.position.y = 13;
        fixture.shape = Box2D.Collision.Shapes.b2PolygonShape.AsBox(10, .5);
        this.w.CreateBody(this.bodyDef).CreateFixture(fixture);
        this.bodyDef.type = Box2D.Dynamics.b2Body.b2_dynamicBody;
        this.bodyDef = new Box2D.Dynamics.b2BodyDef();
        this.bodyDef.type = Box2D.Dynamics.b2Body.b2_staticBody;
        this.bodyDef.position.x = 10;
        this.bodyDef.position.y = 6;
        fixture.shape = new Box2D.Collision.Shapes.b2CircleShape(1);
        var circle = this.w.CreateBody(this.bodyDef);
        circle.CreateFixture(fixture);
        this.c = circle;
        this.bodyDef.type = Box2D.Dynamics.b2Body.b2_dynamicBody;
        this.populate();
        this.testJoints();
    }
    Physics.prototype.populate = function () {
        var fixture = new Box2D.Dynamics.b2FixtureDef();
        for(var i = 0; i < this.testObjectCount; ++i) {
            var rnd = Math.random();
            if(rnd > 0.7) {
                fixture.shape = Box2D.Collision.Shapes.b2PolygonShape.AsBox(Math.random() + 0.1, Math.random() + 0.1);
            } else if(rnd < .7 && rnd > .3) {
                fixture.shape = new Box2D.Collision.Shapes.b2CircleShape(Math.random() + 0.1);
            } else {
                var vertices = [
                    new Box2D.Common.Math.b2Vec2(0.0, 0.0), 
                    new Box2D.Common.Math.b2Vec2(1.0, 0.0), 
                    new Box2D.Common.Math.b2Vec2(0.0, 1.0)
                ];
                fixture.shape = Box2D.Collision.Shapes.b2PolygonShape.AsArray(vertices);
            }
            this.bodyDef.position.x = Math.random() * 20;
            this.bodyDef.position.y = Math.random() * 10;
            var body = this.w.CreateBody(this.bodyDef);
            body.CreateFixture(fixture);
            this.bodies.push(body);
        }
    };
    Physics.prototype.bindToCanvas = function (canvasId) {
        var _this = this;
        var debugDraw = new Box2D.Dynamics.b2DebugDraw();
        debugDraw.SetSprite((document.getElementById(canvasId)).getContext("2d"));
        debugDraw.SetDrawScale(30.0);
        debugDraw.SetFillAlpha(0.3);
        debugDraw.SetLineThickness(1.0);
        debugDraw.SetFlags(Box2D.Dynamics.b2DebugDraw.e_shapeBit | Box2D.Dynamics.b2DebugDraw.e_jointBit);
        this.w.SetDebugDraw(debugDraw);
        window.setInterval(function () {
            _this.update();
        }, 1000 / 60);
    };
    Physics.prototype.connectToCenterWithJoint = function (b) {
        var jd = new Box2D.Dynamics.Joints.b2PrismaticJointDef();
        var axis = Box2D.Common.Math.b2Math.SubtractVV(b.GetWorldCenter(), this.c.GetWorldCenter());
        axis.Normalize();
        jd.Initialize(this.c, b, b.GetWorldCenter(), axis);
        jd.lowerTranslation = -1;
        jd.upperTranslation = 0;
        jd.enableLimit = true;
        this.w.CreateJoint(jd);
    };
    Physics.prototype.testJoints = function () {
        for(var i = 0; i < this.testObjectCount; ++i) {
            this.connectToCenterWithJoint(this.bodies[i]);
        }
    };
    Physics.prototype.applyTestFoce = function () {
        for(var i = 0; i < this.testObjectCount; ++i) {
            this.bodies[i].ApplyForce(new Box2D.Common.Math.b2Vec2(5000, 0), this.bodies[i].GetWorldCenter());
        }
    };
    Physics.prototype.update = function () {
        this.w.Step(1 / 60, 10, 10);
        this.w.DrawDebugData();
        this.w.ClearForces();
    };
    return Physics;
})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:15:27.520

问题是需要设置密度才能使棱柱接头起作用。这将教会我相信默认值。

使固定：

```
fixture.density = .5; 
```

在这里工作：http: [//jsfiddle.net/Jk5VD/9/](http://jsfiddle.net/Jk5VD/9/)

# sql - 在sql server中使用case语句将值拆分为列

> ID：15652400
> 
> 赞同：0
> 
> 时间：2013-03-27T05:21:17.370
> 
> 标签：sql, sql-server, case-statement

在拆分列中的值时需要帮助。这是我到目前为止得到的

```
select
recordid, productname,
case when future06 like '%418%' then (Books
case when future06 like '%421%' then (Video) else null
end
from schema.dbo.table1 
```

`Books`并且`Video`是列下的两个主要产品`future06`。而不是`future06`作为第三列，我想同时拥有`Books`and和.`Video``recordid``productname`

生活会让输出看起来像：

```
RecordID   ProductName  Books   Video 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:25:39.067

```
select
recordid, productname,
case when future06 like '%418%' then future06 else null end as Books,
case when future06 like '%421%' then future06 else null end as Video
from schema.dbo.table1

select
recordid, productname,
COUNT(case when future06 like '%418%' then 1 else 0 end) as NoOfBooks,
COUNT(case when future06 like '%421%' then 1 else 0 end) as NoOfVideo
from schema.dbo.table1 
group by recordid, productname

select
recordid, productname,
COUNT(case when future06 like '%418%' then 1 else 0 end) as NoOfBooks,
COUNT(case when future06 like '%421%' then 1 else 0 end) as NoOfVideo, 
COUNT(*) as Total 
from schema.dbo.table1 
group by recordid, productname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:26:34.930

你几乎拥有它：

```
select
    RecordID
    , ProductName
    , Books = case when future06 like '%418%' then future06 else null end
    , Video = case when future06 like '%421%' then future06 else null end
from
    schema.dbo.table1 
```

# matlab - 使用数组元素作为索引

> ID：15652402
> 
> 赞同：1
> 
> 时间：2013-03-27T05:21:57.403
> 
> 标签：matlab, matrix

假设我们在矩阵中有以下数组声明

```
a=[1 2 3;4 5 6;7 8 9] 
```

在matlab中看起来像通常的矩阵形式

一个=

```
 1     2     3
 4     5     6
 7     8     9 
```

我对以下代码的工作原理感兴趣

> `[a a(a) ]`

这里给出的当然是一本书的答案

```
 ans =
    1 2 3 1 4 7
    4 5 6 2 5 8
    7 8 9 3 6 9 
```

正如我首先理解的那样，括号中的 a 只显示原始 a，或从 1 到 9 的数字，因为第二种情况是使用数组元素作为数组的索引，所以这意味着例如数字

```
1   2  3
4   5  6
7   8   9 
```

这些是数组 a 的索引，第一个索引 `a[1]=1,a{2]=2,a[3]=3 .... a[9]=9` 是这样吗？但是为什么它以转置方式打印？不应该像原来的矩阵吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T05:26:18.333

在这种情况下，行在列之前被遍历 so `a[2] = 4`，`a[3] = 7`并且`a[4] = 2`

# scrapy - 导出包含 startURL 的 CSV

> ID：15652406
> 
> 赞同：1
> 
> 时间：2013-03-27T05:22:07.533
> 
> 标签：scrapy

我在使用 Scrapy 抓取图像并将结果导出为 CSV 时遇到了一些问题。我的设置是：

```
FEED_URI = 'export.csv'
FEED_FORMAT = 'csv' 
```

第一个问题是导出为 JSON，而不是 CSV。另一个问题是我希望导出包含 start_urls，所以导出应该是：

```
start_url, original_image, scraped_image
http://www.bk.com, http://www.bk.com/images/bk-logo-rv.png, http://mysite.com/53948534985374.jpg 
```

这就是我正在运行的命令：

```
scrapy crawl image_downloader -L ERROR --logfile=log 
```

这就是管道：

```
class ImageDownloaderPipeline(ImagesPipeline):

    def get_media_requests(self, item, info):
        for image_url in item['image_urls']:
            yield Request(image_url)

    def item_completed(self, results, item, info):
        image_paths = [x['path'] for ok, x in results if ok]
        if not image_paths:
            raise DropItem("Item contains no images")
        return item 
```

谁能帮帮我？

谢谢！

# php - 对于不熟悉面向对象的 PHP 的人来说，避免在 PHP 中使用全局数据库处理程序变量？

> ID：15652416
> 
> 赞同：1
> 
> 时间：2013-03-27T05:23:10.537
> 
> 标签：php, oop, class, global-variables, database-connection

**首先：**这个问题**不是**重复的。这就是为什么。我之前关于该主题的问题已作为（所有事情的）副本[关闭](https://stackoverflow.com/questions/11369360/how-to-properly-setting-up-pdo-connection)。那一点帮助都没有——我什么都不懂。我对 OOP 完全陌生——我需要一个适合我理解水平的答案——我不知道链接问题的答案在说什么。仅仅因为这个问题**看起来**很相似，提问者可能不是——我在之前的问题中特别要求对我的理解水平给出一个“可以理解的”答案。所以，我会再问一次（如果需要，我会再问一次）。开始：

* * *

总体而言，我对 PHP 还是比较陌生，对面向对象的 PHP 还是比较陌生，在过去一周内才刚刚开始自学，我仍然无法掌握一些概念，例如继承和什么是类抽象——一些由于我一直在使用 PDO 处理我的数据库连接和查询一段时间，因此我已经能够相当快地掌握它，但除此之外我仍然是 OOPHP 的新手，所以如果我的问题请多多包涵似乎有点“基本”。

我在每个网页的顶部都有一个初始化文件（init.php），除其他外，它使用 PDO 连接到 MySQL 数据库，如下所示：

```
尝试 {
    $dbh = new PDO(conn. data here);
} 捕捉（PDOException $e）{
    回声 $e->getMessage();
}

```

因此，据我了解，在执行此代码时，`$dbh`现在将其实例化为 PDO 对象。在我的 init.php 文件的底部有很多需要链接到函数文件，例如`user.func.php`,`images.func.php`等。

问题是每当我需要从我的一个函数内部查询数据库时，我需要先声明`$dbh`为全局，然后才能对其进行操作，如下所示：

```
功能我的功能{
    全球 $dbh; // 问题来了！

    尝试 {
        $stmt = $dbh->prepare(这里有一些 SQL);
        $stmt->执行（）；
    } 抓住 {
        // ETC。
    }
}
```

现在，问题不在于我对**为什么**必须声明为全局变量的理解——我明白了很多，而是如何避免它。我已经阅读了一些关于为什么要避免全局变量的 StackOverflow 答案，但我不确定如何。

我将如何`global $dbh`从我的代码中删除？每次我实例化它并使用它时，我会创建一个数据库处理程序类并将我的连接设置传递给构造函数方法吗？（似乎有点多余）。

不太确定如何替换我对全局变量的使用，因此绝对感谢我能理解的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:38:23.280

在非常广泛的术语中-您在这里询问[范围](http://en.wikipedia.org/wiki/Scope_%28computer_science%29) 有一些特定的理论，在继续编写代码之前了解这些理论会很有用。我知道它有时看起来很有吸引力，但退一步学习一些理论在这里真的很有用。

您链接到的答案直接跳转到解释依赖注入，但这可能是一个更好的起点（[如何向 5 岁的孩子解释依赖注入？](https://stackoverflow.com/questions/1638919/how-to-explain-dependency-injection-to-a-5-year-old)）特别是这条评论：[https ://stackoverflow.com/a /1639321/181707](https://stackoverflow.com/a/1639321/181707)

最后——我建议你看一些处理这些东西的简单框架——并从阅读源代码中学习。

一个超级简单的依赖注入容器是 Pimple：

[http://pimple.sensiolabs.org/](http://pimple.sensiolabs.org/)

快速浏览一下介绍 - 它并不可怕，应该可以帮助您了解所涉及的概念。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T05:46:58.100

您可以通过扩展类来避免重复使用代码。新类从扩展类中获取所有公共和受保护的功能。

```
<?php
//$dbh stuff up here

class Main{
   public $dbh;
   function __construct() { //this magic function runs when the class is initiated.
       global $dbh;
       $this->dbh = $dbh;
       //dbh will be accessible for this whole class using $this->dbh 
   }
}

class imageClass extends Main{
    public function test(){
       if (isset($this->dbh){
           echo "it works";
       }
    }
}

class userClass extends Main{
   function __construct(){
       //this construct function overwrites the construct function in main so dbh
       //will not be accessible in this class
   }
}

imageFunc::test(); 
```

如果您如此担心不重用代码，为什么您需要在每个页面的顶部放置 init.php ！我想你可能想研究一下 Model-View-Controller 框架。我从 cakephp.org 上的博客教程开始，您可以在 youtube 上查看 jream，这是一个创建 MVC 的教程[http://www.youtube.com/playlist?list=PL7A20112CF84B2229](http://www.youtube.com/playlist?list=PL7A20112CF84B2229)。

# c++ - C++ 在应用程序中挂钩函数

> ID：15652420
> 
> 赞同：2
> 
> 时间：2013-03-27T05:23:25.167
> 
> 标签：c++, c, hook

我无法在游戏客户端中挂接一个函数，该函数用于向房间里的每个人发送一个用 Zlib 压缩的 UDP 数据包。任何帮助将不胜感激。钩子的问题是，它打印第一个数据包的大小，然后崩溃，我已经尝试了我知道的所有可能的方法来解决这个问题，我已经研究了几个小时，但一无所获。

我认为可能是错误的一些事情是：参数，或调用约定，或两者兼而有之。

这是钩子函数（C++）：

```
typedef int (__stdcall *PSendUDPPacket)(char*, int, short int, bool);

PSendUDPPacket OrigSendUDPPacket;

void hookTheFunction()
{
    *(PDWORD)&OrigSendUDPPacket = (DWORD)DetourFunction((PBYTE)0x004CAC50, (PBYTE)MySendUDPPacket);
}

int __stdcall MySendUDPPacket(char* arg1, int arg2, short int arg3, bool arg4)
{
    printf("Sending UDP Packet SIZE: %i.\n", arg2);
    return OrigSendUDPPacket(arg1, arg2, arg3, arg4);
} 
```

这是我试图挂钩的从 Ollydbg 转储的整个函数：

```
Address   Hex dump          Command
004CAC50      55            PUSH EBP
004CAC51      8BEC          MOV EBP,ESP
004CAC53      83EC 58       SUB ESP,58
004CAC56  /.  53            PUSH EBX
004CAC57  |.  56            PUSH ESI
004CAC58  |.  57            PUSH EDI
004CAC59  |.  51            PUSH ECX
004CAC5A  |.  8D7D A8       LEA EDI,[EBP-58]
004CAC5D  |.  B9 16000000   MOV ECX,16
004CAC62  |.  B8 CCCCCCCC   MOV EAX,CCCCCCCC
004CAC67  |.  F3:AB         REP STOS DWORD PTR ES:[EDI]
004CAC69  |.  59            POP ECX
004CAC6A  |.  894D FC       MOV DWORD PTR SS:[EBP-4],ECX
004CAC6D  |.  8B45 08       MOV EAX,DWORD PTR SS:[EBP+8]
004CAC70  |.  8945 F8       MOV DWORD PTR SS:[EBP-8],EAX
004CAC73  |.  8B4D 14       MOV ECX,DWORD PTR SS:[EBP+14]
004CAC76  |.  83E1 01       AND ECX,00000001
004CAC79  |.  F7D9          NEG ECX
004CAC7B  |.  1BC9          SBB ECX,ECX
004CAC7D  |.  F7D9          NEG ECX
004CAC7F  |.  894D F4       MOV DWORD PTR SS:[EBP-0C],ECX
004CAC82  |.  8B55 10       MOV EDX,DWORD PTR SS:[EBP+10]
004CAC85  |.  8955 E8       MOV DWORD PTR SS:[EBP-18],EDX
004CAC88  |.  837D E8 FF    CMP DWORD PTR SS:[EBP-18],-1
004CAC8C  |.  74 05         JE SHORT 004CAC93
004CAC8E  |.  E9 D9000000   JMP 004CAD6C
004CAC93  |>  C745 F0 00000 MOV DWORD PTR SS:[EBP-10],0
004CAC9A  |.  C745 EC 00000 MOV DWORD PTR SS:[EBP-14],0
004CACA1  |.  EB 09         JMP SHORT 004CACAC
004CACA3  |>  8B45 EC       MOV EAX,DWORD PTR SS:[EBP-14]
004CACA6  |.  83C0 01       ADD EAX,1
004CACA9  |.  8945 EC       MOV DWORD PTR SS:[EBP-14],EAX
004CACAC  |>  837D EC 08    CMP DWORD PTR SS:[EBP-14],8
004CACB0  |.  0F8D B4000000 JGE 004CAD6A
004CACB6  |.  8B4D EC       MOV ECX,DWORD PTR SS:[EBP-14]
004CACB9  |.  6BC9 76       IMUL ECX,ECX,76
004CACBC  |.  8B55 FC       MOV EDX,DWORD PTR SS:[EBP-4]
004CACBF  |.  33C0          XOR EAX,EAX
004CACC1  |.  8A440A 05     MOV AL,BYTE PTR DS:[ECX+EDX+5]
004CACC5  |.  85C0          TEST EAX,EAX
004CACC7  |.  75 02         JNE SHORT 004CACCB
004CACC9  |.^ EB D8         JMP SHORT 004CACA3
004CACCB  |>  8B4D EC       MOV ECX,DWORD PTR SS:[EBP-14]
004CACCE  |.  6BC9 76       IMUL ECX,ECX,76
004CACD1  |.  8B55 FC       MOV EDX,DWORD PTR SS:[EBP-4]
004CACD4  |.  33C0          XOR EAX,EAX
004CACD6  |.  8A440A 3B     MOV AL,BYTE PTR DS:[ECX+EDX+3B]
004CACDA  |.  8B4D FC       MOV ECX,DWORD PTR SS:[EBP-4]
004CACDD  |.  3981 C0030000 CMP DWORD PTR DS:[ECX+3C0],EAX
004CACE3  |.  75 1F         JNE SHORT 004CAD04
004CACE5  |.  837D F4 00    CMP DWORD PTR SS:[EBP-0C],0
004CACE9  |.^ 74 17         JE SHORT 004CAD02
004CACEB  |.  68 00020000   PUSH 200
004CACF0  |.  8B55 F8       MOV EDX,DWORD PTR SS:[EBP-8]
004CACF3  |.  52            PUSH EDX
004CACF4  |.  8B4D FC       MOV ECX,DWORD PTR SS:[EBP-4]
004CACF7  |.  81C1 B4030000 ADD ECX,3B4
004CACFD  |.  E8 E995F3FF   CALL 004042EB
004CAD02  |>^ EB 9F         JMP SHORT 004CACA3
004CAD04  |>  8B45 EC       MOV EAX,DWORD PTR SS:[EBP-14]
004CAD07  |.  6BC0 76       IMUL EAX,EAX,76
004CAD0A  |.  8B4D FC       MOV ECX,DWORD PTR SS:[EBP-4]
004CAD0D  |.  33D2          XOR EDX,EDX
004CAD0F  |.  8A5401 77     MOV DL,BYTE PTR DS:[EAX+ECX+77]
004CAD13  |.  85D2          TEST EDX,EDX
004CAD15  |.  74 2F         JE SHORT 004CAD46
004CAD17  |.  837D F0 00    CMP DWORD PTR SS:[EBP-10],0
004CAD1B  |.  74 02         JE SHORT 004CAD1F
004CAD1D  |.^ EB 84         JMP SHORT 004CACA3
004CAD1F  |>  C745 F0 01000 MOV DWORD PTR SS:[EBP-10],1
004CAD26  |.  66:8B45 0C    MOV AX,WORD PTR SS:[EBP+0C]
004CAD2A  |.  50            PUSH EAX
004CAD2B  |.  8B4D 08       MOV ECX,DWORD PTR SS:[EBP+8]
004CAD2E  |.  51            PUSH ECX
004CAD2F  |.  8B55 FC       MOV EDX,DWORD PTR SS:[EBP-4]
004CAD32  |.  8B82 C0030000 MOV EAX,DWORD PTR DS:[EDX+3C0]
004CAD38  |.  50            PUSH EAX
004CAD39  |.  8B4D FC       MOV ECX,DWORD PTR SS:[EBP-4]
004CAD3C  |.  E8 2F7AF3FF   CALL 00402770
004CAD41  |.^ E9 5DFFFFFF   JMP 004CACA3
004CAD46  |>  66:8B4D 0C    MOV CX,WORD PTR SS:[EBP+0C]
004CAD4A  |.  51            PUSH ECX
004CAD4B  |.  8B55 08       MOV EDX,DWORD PTR SS:[EBP+8]
004CAD4E  |.  52            PUSH EDX
004CAD4F  |.  8B45 EC       MOV EAX,DWORD PTR SS:[EBP-14]
004CAD52  |.  50            PUSH EAX
004CAD53  |.  8B4D FC       MOV ECX,DWORD PTR SS:[EBP-4]
004CAD56  |.  8B91 C0030000 MOV EDX,DWORD PTR DS:[ECX+3C0]
004CAD5C  |.  52            PUSH EDX
004CAD5D  |.  8B4D FC       MOV ECX,DWORD PTR SS:[EBP-4]
004CAD60  |.  E8 3681F3FF   CALL 00402E9B
004CAD65  \.^ E9 39FFFFFF   JMP 004CACA3
004CAD6A   >  EB 5D         JMP SHORT 004CADC9
004CAD6C  />  8B45 FC       MOV EAX,DWORD PTR SS:[EBP-4]
004CAD6F  |.  8B4D 10       MOV ECX,DWORD PTR SS:[EBP+10]
004CAD72  |.  3B88 C0030000 CMP ECX,DWORD PTR DS:[EAX+3C0]
004CAD78  |.  74 32         JE SHORT 004CADAC
004CAD7A  |.  8B55 10       MOV EDX,DWORD PTR SS:[EBP+10]
004CAD7D  |.  6BD2 76       IMUL EDX,EDX,76
004CAD80  |.  8B45 FC       MOV EAX,DWORD PTR SS:[EBP-4]
004CAD83  |.  33C9          XOR ECX,ECX
004CAD85  |.  8A4C10 05     MOV CL,BYTE PTR DS:[EDX+EAX+5]
004CAD89  |.  85C9          TEST ECX,ECX
004CAD8B  |.  74 1F         JE SHORT 004CADAC
004CAD8D  |.  66:8B55 0C    MOV DX,WORD PTR SS:[EBP+0C]
004CAD91  |.  52            PUSH EDX
004CAD92  |.  8B45 08       MOV EAX,DWORD PTR SS:[EBP+8]
004CAD95  |.  50            PUSH EAX
004CAD96  |.  8B4D 10       MOV ECX,DWORD PTR SS:[EBP+10]
004CAD99  |.  51            PUSH ECX
004CAD9A  |.  8B55 FC       MOV EDX,DWORD PTR SS:[EBP-4]
004CAD9D  |.  8B82 C0030000 MOV EAX,DWORD PTR DS:[EDX+3C0]
004CADA3  |.  50            PUSH EAX
004CADA4  |.  8B4D FC       MOV ECX,DWORD PTR SS:[EBP-4]
004CADA7  |.  E8 EF80F3FF   CALL 00402E9B
004CADAC  |>  837D F4 00    CMP DWORD PTR SS:[EBP-0C],0
004CADB0  |.  74 17         JE SHORT 004CADC9
004CADB2  |.  68 00020000   PUSH 200
004CADB7  |.  8B4D F8       MOV ECX,DWORD PTR SS:[EBP-8]
004CADBA  |.  51            PUSH ECX
004CADBB  |.  8B4D FC       MOV ECX,DWORD PTR SS:[EBP-4]
004CADBE  |.  81C1 B4030000 ADD ECX,3B4
004CADC4  |.  E8 2295F3FF   CALL 004042EB
004CADC9  |>  33C0          XOR EAX,EAX
004CADCB  |.  5F            POP EDI
004CADCC  |.  5E            POP ESI
004CADCD  |.  5B            POP EBX
004CADCE  |.  83C4 58       ADD ESP,58
004CADD1  |.  3BEC          CMP EBP,ESP
004CADD3  |.  E8 883E2A00   CALL 0076EC60
004CADD8  |.  8BE5          MOV ESP,EBP
004CADDA  |.  5D            POP EBP
004CADDB  \.  C2 1000       RETN 10 
```

# audio - 如何正确使用 getComponants 获取音频数组？

> ID：15652423
> 
> 赞同：2
> 
> 时间：2013-03-27T05:23:31.210
> 
> 标签：audio, unity3d, unityscript

好的，所以我把这段代码压缩到一行：

```
gameObject.GetComponents(AudioSource)[0].audio.Play(); 
```

这一行给了我这个错误：

```
InvalidCastException: Cannot cast from source type to destination type.
scriptexplosion+$Start$4+$.MoveNext () (at Assets/scriptexplosion.js:7) 
```

我的问题是如何将组件数组转换为 AudioSource 数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:53:02.757

显然，您必须使用此代码使 GetComponents() 返回类型（在本例中为 AudioSource）：

```
gameObject.GetComponents<AudioSource>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:29:41.797

试试这个：

```
gameObject.GetComponents(AudioSource[0]).audio.Play(); 
```

# javascript - 从纬度和经度识别哪个是多边形

> ID：15652424
> 
> 赞同：7
> 
> 时间：2013-03-27T05:23:41.073
> 
> 标签：javascript, jquery, polygon, latitude-longitude, leaflet

我有一张使用 Leaflet.js 绘制的地图。如果我将经度和纬度值作为输入我可以识别多边形吗？我可以为此获取客户端脚本吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T10:07:34.283

得到的答案如下：

//这是基于“多边形算法中的点”

```
function getPoint () {
     float x=-89.82421875;     //x and y represents the lat and lng values
     float y= 40.18307014852533;
    var a = boundaries;    //the coordinates used to draw the map
    for (i = 0; i < a.features.length; i++) {
        PointInPolygon(x,y, a.features[i].geometry.coordinates[0], i);
    }
};

function PointInPolygon(pointX, pointY, _vertices, number) {
        var j = _vertices.length - 1;
        var oddNodes = false;
        var polyX, polyY,polyXJ,polyYJ;

        for (var i = 0; i < _vertices.length; i++) {
            polyY = parseFloat(_vertices[i].toString().split(",")[1]);
            polyX = parseFloat(_vertices[i].toString().split(",")[0]);
            polyXJ = parseFloat(_vertices[j].toString().split(",")[0]);
            polyYJ = parseFloat(_vertices[j].toString().split(",")[1]);
            if (polyY < pointY && polyYJ >= pointY ||
                polyYJ < pointY && polyY >= pointY) {
                if (polyX +
                    (pointY - polyY) / (polyYJ - polyY) * (polyXJ - polyX) < pointX)  
                {  
                    oddNodes = !oddNodes;  
                }  
            }  
            j = i;
        }
        if (oddNodes == true) {
             map._layers[number+1].fire('click');             //fire the map click event
        } 
    } 
```

# python - “变量”或“变量不是无”

> ID：15652427
> 
> 赞同：16
> 
> 时间：2013-03-27T05:23:58.900
> 
> 标签：python, comparison

```
Variable = None 
```

在特定情况下，这三者之间有什么区别吗？如果没有区别，哪个更适合使用？

```
if Variable:
 print "Hello world" 
```

和

```
if Variable is not None:
 print "Hello world" 
```

和

```
if Variable != None:
 print "Hello world" 
```

在无变量的情况下是否相同？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T05:56:18.657

> 在特定情况下，这三者之间有什么区别吗？

第一个询问变量是否是虚假的。`None`除了-<code>False, `0`, 任何空序列等之外，此测试将失败。

第二个询问是否是魔术单例常量`None`。这只会为`None`自己失败。

第三个询问是否有任何东西认为自己等于`None`。例如，这将失败`Holder(None)`，其中`Holder`是一个包装器类，其实例比较等于它们所持有的任何东西。或者，给出一个不太现实但更短的代码示例：

```
class Stupid(object):
    def __ne__(self, other):
        return False
Variable = Stupid() 
```

最后一个很少有用；事实上，如果你认为你可能需要检查`== None`or `!= None`，并且你没有专门创建透明包装类或类似的东西，你可能真的想要`is None`or `is not None`。但其他两个都非常有用和常见。

> 如果没有区别，哪个更适合使用？

嗯，*还是*有区别的，看具体用途，哪个更合适。

在问题的最后，您似乎可能会问在 where `Variable`is absolute的特定情况下是否有任何区别`None`。在那种情况下，这三者之间当然没有功能上的区别。*它们都保证为假，因此什么也不做。这意味着这三者中的任何一个与根本不编写代码之间也没有区别。这更简单，更易读，更快。

* 存在性能差异——第一个不必`LOAD_CONST`使用`None`, 或调用比较运算符。而且，即使您以某种方式设法重新绑定`None`或更改了`None`常量的值（可能是通过在整个堆上踩`ctypes`？），第一个更有可能仍然有效。但这些都无关紧要——而且，如果他们这样做，再一次，没有任何代码会更快、更可靠。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-27T05:25:49.290

`not x`如果`x`is `None`, `False`, `[]`, `{}`, 等则为真。

`x is not None`将永远是`True`，除非变量实际上是`None`。

编辑：

当您想检查变量是否实际设置为正确值时，这具有实际重要性。否则你可能会遇到问题。例如，如果您想评估项目列表并执行以下操作：

```
if not x: 
```

检查是否提供了一个列表，然后条件将在一个空列表上触发，这可能仍然是一个有效的输入。所以在这种情况下，你想检查

```
if x is not None: 
```

允许空列表作为有效输入，但仍然检查根本没有提供列表的情况。

该`None`值本身与某些语言中的 a`null`或值相当。`nil`它是已定义变量中缺少值的占位符（如果未定义，它将抛出`NameError`）。这就是为什么`None`在某些情况下将该值用作默认值的原因：

```
>>> def foo():
...     pass
...
>>> x = foo()
>>> x is None
True 
```

它也经常用作可选变量的默认值：

```
>>> def foo(bar=None):
...     if bar is None:
...         print('No argument passed.')
...     else:
...         print('Variable bar: %s' % str(bar))
...
>>> foo(0)
Variable bar: 0
>>> foo()
No argument passed. 
```

这样，`0`仍然是一个有效值，`False`如果使用`if not bar:`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-27T06:23:55.010

[PEP 8](https://www.python.org/dev/peps/pep-0008/#programming-recommendations)的官方建议是通过身份检查来测试*None ：*

```
if Variable is not None:
    print "Hello world" 
```

平等/不平等测试也可以工作，但速度较慢且不习惯：

```
if Variable != None:
    print "Hello world" 
```

*测试变量*的布尔值会产生不同的结果。如果变量是空容器或等于零的数字，则以下测试将打印“hello world”：

```
# Hello world won't print for any of these values:
for Variable in (), '', u'', {}, [], 0, 0.0, 0j, None:
    if Variable:
        print "Hello world" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T05:26:03.650

它们不一样。`not`检查是否`bool(var)`评估为`False`.

例如。

```
>>> not ''
True
>>> not 'abc'
False
>>> not 0
True 
```

`if x is None`检查 x 是否是`None`它自己。

# css - rgba 不工作，当我在 5 分钟前工作时

> ID：15652428
> 
> 赞同：4
> 
> 时间：2013-03-27T05:23:59.553
> 
> 标签：css, background-color, rgba

这是我的网站[http://www.blindsdetroit.com/](http://www.blindsdetroit.com/)我需要在可透视的背景图像上显示您无法看到的文本。它不适用于 chrome 或 firefox。rgb 也不起作用，它只是说它的属性值无效？为什么是这样

这是我的CSS：

```
#top_box{
background: rgba (208,206,195,.5);
position:relative;
height:400px;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-27T05:29:13.473

我刚刚尝试使用[Chrome 开发人员工具](https://developers.google.com/chrome-developer-tools/)，它似乎是`rgba`左括号和左括号之间的空格。所以，而不是：

```
background: rgba (208,206,195,.5); 
```

尝试...

```
background: rgba(208,206,195,.5); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-10-12T12:22:22.300

替换`rgb`为`rgba`. 它适用于 chrome 和 firefox 浏览器。

# php - 从分页数据库条目中提取数据并传递给表单

> ID：15652430
> 
> 赞同：0
> 
> 时间：2013-03-27T05:24:09.107
> 
> 标签：php, forms, pagination

Stack Overflow 不允许我发布超过 2 个超链接，我需要三个，所以要正确查看我的查询，请点击下面的链接： http:
[//bretleduc.com/inquiry.htm](http://bretleduc.com/inquiry.htm)

我制作的这个页面：[分页数据][1]

显示人们在以下页面中输入的问题/评论：[联系艺术家][2]

理论上，一旦有人发表评论或问题，艺术家（杰克逊大卫，我正在为他制作此页面）可以看到评论并在[回复问题或评论] [3]页面中回复它。但是现在，艺术家必须将姓名和电子邮件地址从 [分页数据][1] 部分复制并粘贴到 [回复问题或评论][3] 表单中。

我要做的是修改 [分页数据][1] 页面，使其能够选择条目并让名称和电子邮件地址以另一种形式填充名称和电子邮件地址字段。这样，艺术家只需点击分页条目（例如可能使用单选按钮）并让客户的姓名和电子邮件地址自动填充到以下表格中，就可以更轻松地回答客户的查询：[回复问题或评论] [3]

这是我从脚本站点获得的 [分页数据][1] 页面的代码：

```
<?php
// Adam's Custom PHP MySQL Pagination Tutorial and Script
// You have to put your mysql connection data and alter the SQL queries(both queries)
// This script is in tutorial form and is accompanied by the following video:
// http://www.youtube.com/watch?v=K8xYGnEOXYc
require("hidden.php");
//////////////  QUERY THE MEMBER DATA INITIALLY LIKE YOU NORMALLY WOULD
$sql = mysql_query("SELECT Comment_ID, Name, email, Comment FROM Comments ORDER BY Comment_ID DESC");
//////////////////////////////////// Adam's Pagination Logic ////////////////////////////////////////////////////////////////////////
$nr = mysql_num_rows($sql); // Get total of Num rows from the database query
if (isset($_GET['pn'])) { // Get pn from URL vars if it is present
    $pn = preg_replace('#[^0-9]#i', '', $_GET['pn']); // filter everything but numbers for security(new)
    //$pn = ereg_replace("[^0-9]", "", $_GET['pn']); // filter everything but numbers for security(deprecated)
} else { // If the pn URL variable is not present force it to be value of page number 1
    $pn = 1;
}
//This is where we set how many database items to show on each page
$itemsPerPage = 2;
// Get the value of the last page in the pagination result set
$lastPage = ceil($nr / $itemsPerPage);
// Be sure URL variable $pn(page number) is no lower than page 1 and no higher than $lastpage
if ($pn < 1) { // If it is less than 1
    $pn = 1; // force if to be 1
} else if ($pn > $lastPage) { // if it is greater than $lastpage
    $pn = $lastPage; // force it to be $lastpage's value
}
// This creates the numbers to click in between the next and back buttons
// This section is explained well in the video that accompanies this script
$centerPages = "";
$sub1 = $pn - 1;
$sub2 = $pn - 2;
$add1 = $pn + 1;
$add2 = $pn + 2;
if ($pn == 1) {
    $centerPages .= '&nbsp; <span class="pagNumActive">' . $pn . '</span> &nbsp;';
    $centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $add1 . '">' . $add1 . '</a> &nbsp;';
} else if ($pn == $lastPage) {
    $centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $sub1 . '">' . $sub1 . '</a> &nbsp;';
    $centerPages .= '&nbsp; <span class="pagNumActive">' . $pn . '</span> &nbsp;';
} else if ($pn > 2 && $pn < ($lastPage - 1)) {
    $centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $sub2 . '">' . $sub2 . '</a> &nbsp;';
    $centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $sub1 . '">' . $sub1 . '</a> &nbsp;';
    $centerPages .= '&nbsp; <span class="pagNumActive">' . $pn . '</span> &nbsp;';
    $centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $add1 . '">' . $add1 . '</a> &nbsp;';
    $centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $add2 . '">' . $add2 . '</a> &nbsp;';
} else if ($pn > 1 && $pn < $lastPage) {
    $centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $sub1 . '">' . $sub1 . '</a> &nbsp;';
    $centerPages .= '&nbsp; <span class="pagNumActive">' . $pn . '</span> &nbsp;';
    $centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $add1 . '">' . $add1 . '</a> &nbsp;';
}
// This line sets the "LIMIT" range... the 2 values we place to choose a range of rows from database in our query
$limit = 'LIMIT ' .($pn - 1) * $itemsPerPage .',' .$itemsPerPage;
// Now we are going to run the same query as above but this time add $limit onto the end of the SQL syntax
// $sql2 is what we will use to fuel our while loop statement below
$sql2 = mysql_query("SELECT Comment_ID, Name, email, Comment FROM Comments ORDER BY Comment_ID DESC $limit");
//////////////////////////////// END Adam's Pagination Logic ////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////// Adam's Pagination Display Setup /////////////////////////////////////////////////////////////////////
$paginationDisplay = ""; // Initialize the pagination output variable
// This code runs only if the last page variable is ot equal to 1, if it is only 1 page we require no paginated links to display
if ($lastPage != "1"){
    // This shows the user what page they are on, and the total number of pages
    $paginationDisplay .= 'Page <strong>' . $pn . '</strong> of ' . $lastPage. '&nbsp;  &nbsp;  &nbsp; ';
    // If we are not on page 1 we can place the Back button
    if ($pn != 1) {
        $previous = $pn - 1;
        $paginationDisplay .=  '&nbsp;  <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $previous . '"> Back</a> ';
    }
    // Lay in the clickable numbers display here between the Back and Next links
    $paginationDisplay .= '<span class="paginationNumbers">' . $centerPages . '</span>';
    // If we are not on the very last page we can place the Next button
    if ($pn != $lastPage) {
        $nextPage = $pn + 1;
        $paginationDisplay .=  '&nbsp;  <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $nextPage . '"> Next</a> ';
    }
}
///////////////////////////////////// END Adam's Pagination Display Setup ///////////////////////////////////////////////////////////////////////////
// Build the Output Section Here
$outputList = '';
while($row = mysql_fetch_array($sql2)){

    $Comment_ID = $row["Comment_ID"];
    $Name = $row["Name"];
    $email = $row["email"];
    $Comment = $row["Comment"];

    $outputList .= '<h1>' . $Name . '</h1><h2>' . $email . '<br />' . $Comment . '</h2><hr />';

} // close while loop
?>
<html>
<head>
<title>Adam's Pagination</title>
<style type="text/css">
<!--
.pagNumActive {
    color: #000;
    border:#060 1px solid; background-color: #D2FFD2; padding-left:3px; padding-right:3px;
}
.paginationNumbers a:link {
    color: #000;
    text-decoration: none;
    border:#999 1px solid; background-color:#F0F0F0; padding-left:3px; padding-right:3px;
}
.paginationNumbers a:visited {
    color: #000;
    text-decoration: none;
    border:#999 1px solid; background-color:#F0F0F0; padding-left:3px; padding-right:3px;
}
.paginationNumbers a:hover {
    color: #000;
    text-decoration: none;
    border:#060 1px solid; background-color: #D2FFD2; padding-left:3px; padding-right:3px;
}
.paginationNumbers a:active {
    color: #000;
    text-decoration: none;
    border:#999 1px solid; background-color:#F0F0F0; padding-left:3px; padding-right:3px;
}
-->
</style>
</head>
<body>
   <div style="margin-left:64px; margin-right:64px;">
     <h2>Total Items: <?php echo $nr; ?></h2>
   </div>
      <div style="margin-left:58px; margin-right:58px; padding:6px; background-color:#FFF; border:#999 1px solid;"><?php echo $paginationDisplay; ?></div>
      <div style="margin-left:64px; margin-right:64px;"><?php print "$outputList"; ?></div>
      <div style="margin-left:58px; margin-right:58px; padding:6px; background-color:#FFF; border:#999 1px solid;"><?php echo $paginationDisplay; ?></div>
</body>
</html> 
```

我想我需要在代码的以下行中添加某种形式：

```
$outputList .= '<h1>' . $Name . '</h1><h2>' . $email . '<br />' . $Comment . '</h2><hr />'; 
```

此外，如果我们可以选择条目自动将姓名和电子邮件地址发布到 [回复问题或评论][3] 表单，而无需单击提交按钮，那将是一个奖励。

如果将[分页数据][1]的代码和[回复问题或评论][3]的代码合并到一个页面中会更容易，我也可以这样做。

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:24:56.670

我终于通过血汗和泪水得到了页面。我删除了一些混淆输入字段的 isset 编码。我还将过程从 _POST 更改为 _GET。感谢你的帮助！

# android - 如何将两个 mp3 音频文件混合/叠加到一个 mp3 文件中（不连接）

> ID：15652432
> 
> 赞同：18
> 
> 时间：2013-03-27T05:24:36.620
> 
> 标签：android, audio, merge, mp3

我想将两个 mp3 文件合并为一个 mp3 文件。例如，如果第一个文件是 1 分钟，第二个文件是 30 秒，那么输出应该是一分钟。在那一分钟内，它应该播放两个文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-15T17:33:38.677

首先，**为了混合两个音频文件，您需要操纵它们的原始表示**；由于**MP3 文件是经过压缩的**，因此您无法直接访问信号的原始表示。您需要对压缩的 MP3 流进行解码，以便“理解”音频信号的波形，然后才能将它们混合。

因此，为了将两个压缩音频文件混合成一个压缩音频文件，需要以下步骤：

1.  **使用解码器解码**压缩文件以获得原始数据（**没有可用的公共系统 API，您需要手动完成！**）。
2.  **混合**两个原始未压缩数据流（必要时应用*音频剪辑）。*为此，您需要考虑使用*解码器*( [PCM](http://wiki.multimedia.cx/?title=PCM) )获得的原始数据格式
3.  **将原始混合数据编码**为压缩的 MP3 文件（根据解码器，您需要使用*编码器*手动完成）

更多关于 MP3 解码器的信息可以在[这里](https://github.com/thasmin/android-mp3decoders)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T08:01:44.100

我不确定您是否想在 Android 手机上执行此操作（由于您的标签，看起来像那样），但如果我是对的，也许可以尝试[LoopStack](https://play.google.com/store/apps/details?id=com.singlecellsoftware.loopstack&hl=de)，它是一个移动 DAW（我自己没有尝试过）。

如果您只是“混合”两个文件而不调整输出音量，您的输出可能会剪辑。但是我不确定是否可以在不解码的情况下“混合”两个 mp3 文件。

如果您可以在 PC 上合并它们，请尝试[Audacity](http://audacity.sourceforge.net/?lang=en)，它是一个免费的桌面 DAW。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-19T11:13:25.540

我没有在 Android 中做过，但我使用 Adob​​e flex 做过。我想逻辑保持不变。我按照以下步骤操作：

*   我将两个 mp3 提取到两个字节数组中。( `song1ByteArray`, `song2ByteArray`)
*   找出更大的字节数组。（假设`song1ByteArray`是更大的）。
*   创建一个返回混合字节数组的函数。

    ```
    private ByteArray mix2Songs(ByteArray song1ByteArray, ByteArray song2ByteArray){
    int arrLength=song1ByteArray.length; 
    for(int i=0;i<arrLength;i+=8){ // here if you see we are incrementing the length by 8 because a sterio sound has both left and right channels 4 bytes for left +4 bytes for right.
        // read left and right channel values for the first song
        float source1_L=song1ByteArray.readFloat();// I'm not sure if readFloat() function exists in android but there will be an equivalant one.
        float source1_R=song1ByteArray.readFloat(); 
        float source2_L=0;
        float source2_R=0;
        if(song2ByteArray.bytesAvailable>0){
            source2_L=song1ByteArray.readFloat();//left channel of audio song2ByteArray
            source2_R=song1ByteArray.readFloat(); //right channel of audio song2ByteArray
        }
        returnResultArr.writeFloat((source_1_L+source_2_L)/2); // average value of the source 1 and 2 left channel
        returnResultArr.writeFloat((source_1_R+source_2_R)/2); // average value of the source 1 and 2 right channel
    }
    return returnResultArr;
    } 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-21T09:32:16.023

[这家伙](http://mindtherobot.com/blog/624/android-audio-play-an-mp3-file-on-an-audiotrack/)在与您的项目非常相似的项目中使用了 JLayer 库。他还为您提供了有关如何将该库集成到您的 android 应用程序中直接重新编译 jar 的指南。

解释他的代码很容易完成你的任务：

```
public static byte[] decode(String path, int startMs, int maxMs) 
  throws IOException, com.mindtherobot.libs.mpg.DecoderException {
  ByteArrayOutputStream outStream = new ByteArrayOutputStream(1024);

  float totalMs = 0;
  boolean seeking = true;

  File file = new File(path);
  InputStream inputStream = new BufferedInputStream(new FileInputStream(file), 8 * 1024);
  try {
    Bitstream bitstream = new Bitstream(inputStream);
    Decoder decoder = new Decoder();

    boolean done = false;
    while (! done) {
      Header frameHeader = bitstream.readFrame();
      if (frameHeader == null) {
        done = true;
      } else {
        totalMs += frameHeader.ms_per_frame();

        if (totalMs >= startMs) {
          seeking = false;
        }

        if (! seeking) {
          SampleBuffer output = (SampleBuffer) decoder.decodeFrame(frameHeader, bitstream);

          if (output.getSampleFrequency() != 44100
              || output.getChannelCount() != 2) {
            throw new com.mindtherobot.libs.mpg.DecoderException("mono or non-44100 MP3 not supported");
          }

          short[] pcm = output.getBuffer();
          for (short s : pcm) {
            outStream.write(s & 0xff);
            outStream.write((s >> 8 ) & 0xff);
          }
        }

        if (totalMs >= (startMs + maxMs)) {
          done = true;
        }
      }
      bitstream.closeFrame();
    }

    return outStream.toByteArray();
  } catch (BitstreamException e) {
    throw new IOException("Bitstream error: " + e);
  } catch (DecoderException e) {
    Log.w(TAG, "Decoder error", e);
    throw new com.mindtherobot.libs.mpg.DecoderException(e);
  } finally {
    IOUtils.safeClose(inputStream);     
  }
}

public static byte[] mix(String path1, String path2) {
    byte[] pcm1 = decode(path1, 0, 60000); 
    byte[] pcm2 = decode(path2, 0, 60000);
    int len1=pcm1.length; 
    int len2=pcm2.length;
    byte[] pcmL; 
    byte[] pcmS;
    int lenL; // length of the longest
    int lenS; // length of the shortest
    if (len2>len1) {
        lenL = len1;
        pcmL = pcm1;
        lenS = len2;                
        pcmS = pcm2;
    } else {
        lenL = len2;
        pcmL = pcm2;
        lenS = len1;                
        pcmS = pcm1;
    } 
    for (int idx = 0; idx < lenL; idx++) {
        int sample;
        if (idx >= lenS) {
            sample = pcmL[idx];
        } else {
            sample = pcmL[idx] + pcmS[idx];
        }
        sample=(int)(sample*.71);
        if (sample>127) sample=127;
        if (sample<-128) sample=-128;
        pcmL[idx] = (byte) sample;
    }
    return pcmL;
} 
```

请注意，我在最后几行添加了衰减和削波：在混合两个波形时，您总是必须同时执行这两项操作。如果您没有内存/时间要求，您可以对样本总和进行 int[] 并评估什么是最佳衰减以避免削波。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-20T23:51:26.673

### 1\. [Android中的混音发帖](https://stackoverflow.com/questions/2191408/mixing-audio-files)

### 2.[另一篇关于在Android中混合音频的帖子](https://stackoverflow.com/questions/16766248/mix-audio-in-android)

### 3\. 你可以利用[Java Sound](http://javasolution.blogspot.in/2007/05/mixing-two-audio-files-using-java-sound.html)来混合两个音频文件

例子：

```
 // First convert audiofile to audioinputstream

audioInputStream = AudioSystem.getAudioInputStream(soundFile);
audioInputStream2 = AudioSystem.getAudioInputStream(soundFile2);

// Create one collection list object using arraylist then add all AudioInputStreams

Collection list=new ArrayList();
list.add(audioInputStream2);
list.add(audioInputStream);

// Then pass the audioformat and collection list to MixingAudioInputStream constructor

MixingAudioInputStream mixer=new MixingAudioInputStream(audioFormat, list); 

// Finally read data from mixed AudionInputStream and give it to SourceDataLine

nBytesRead =mixer.read(abData, 0,abData.length);

int nBytesWritten = line.write(abData, 0, nBytesRead); 
```

### 4\. 试试有混音选项的[AudioConcat](http://www.jsresources.org/examples/AudioConcat.html)`-m`

```
 java AudioConcat [ -D ] [ -c ] | [ -m ] | [ -f ] -o outputfile inputfile ...

Parameters. 

-c
selects concatenation mode

-m
selects mixing mode

-f
selects float mixing mode

-o outputfile
The filename of the output file

inputfile
the name(s) of input file(s) 
```

### 5\. 你可以使用[ffmpeg android wrapper使用](https://github.com/guardianproject/android-ffmpeg-java)[这里](https://stackoverflow.com/questions/14498539/how-to-overlay-two-audio-files-using-ffmpeg)解释的语法和方法

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-10T23:10:18.693

要合并（重叠）两个声音文件，您可以使用[This FFMPEG library](https://github.com/WritingMinds/ffmpeg-android-java)。

这是[文档](http://writingminds.github.io/ffmpeg-android-java/)

在他们的示例中，您只需输入您想要的命令。所以让我们谈谈我们需要的命令。

```
-i [FISRST_FILE_PATH] -i [SECOND_FILE_PATH] -filter_complex amerge -ac 2 -c:a libmp3lame -q:a 4 [OUTPUT_FILE_PATH] 
```

对于第一个和第二个文件路径，您将获得声音文件的绝对路径。1-如果它在存储中，那么它是一个子文件夹`Environment.getExternalStorageDirectory().getAbsolutePath()`

2-如果它是资产，那么它应该是一个子文件夹`file:///android_asset/`

对于输出路径，请确保添加扩展名 ex。

```
String path = Environment.getExternalStorageDirectory().getAbsolutePath() + "/File Name.mp3" 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-10-16T12:30:08.130

我没有得到任何好的解决方案。但我们可以在这里做一些技巧.. :) 您可以将两个 mp3 文件分配给两个不同的 MediaPlayer 对象。然后使用按钮一次播放两个文件。比较两个 mp3 文件以找到最长持续时间。之后使用 AudioReorder 录制到该持续时间。它会解决你的问题..我知道这不是正确的方法，但希望它会帮助你.. :)

# ruby-on-rails - Ruby - 从 Mysql 获取数据后拆分数组

> ID：15652433
> 
> 赞同：0
> 
> 时间：2013-03-27T05:24:42.067
> 
> 标签：ruby-on-rails, ruby, arrays, ruby-on-rails-3

我有以下代码可以将 MySQL 数据库中的数据提取到我的 rails 控制器中

```
@main = $connection.execute("SELECT * FROM builds WHERE platform_type IS NOT NULL") 
```

这将返回一个 mysql2 类型的对象，我猜它的行为就像一个数组。

我想将其拆分为 2 个数组，第一个数组的 platform_type 为“TOTAL”，其他数组中的所有内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T05:41:06.123

它实际上返回一个[`Mysql2::Result`](http://rubydoc.info/gems/mysql2/0.2.6/frames/Mysql2/Result)对象。你当然可以

```
totals = []
others = []
main.each { |r|
  (r['platform_type'] == 'TOTAL' ? totals : others) << r
} 
```

但为什么不使用类似的轨道方式：

```
Builds.where("platform_type = ?", 'TOTAL')
Builds.where("platform_type NOT IN ?", [nil, 'TOTAL']) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T05:41:04.187

试试array.select。就像是

```
total = @main.select { |build| build.platform_type == 'TOTAL' }
not_total = @main.reject { |build| build.platform_type == 'TOTAL' } 
```

[http://matthewcarriere.com/2008/06/23/using-select-reject-collect-inject-and-detect/](http://matthewcarriere.com/2008/06/23/using-select-reject-collect-inject-and-detect/)

更好的是，按照这个答案使用 Enumerable.partition：[Ruby Select and Reject in one method](https://stackoverflow.com/questions/6778585/ruby-select-and-reject-in-one-method)

# ruby-on-rails-3 - 使用内存对象的 D3 图形示例

> ID：15652439
> 
> 赞同：1
> 
> 时间：2013-03-27T05:25:16.267
> 
> 标签：ruby-on-rails-3, d3.js

这似乎应该很简单，但我已经花了几个小时没有任何成功。

以[http://bl.ocks.org/mbostock/950642](http://bl.ocks.org/mbostock/950642)上的 D3 图示例为例。该示例使用名为 graph.json 的本地文件。我已经设置了一个 Rails 应用程序来提供类似的图表，但是我不想编写 JSON 文件。相反，我将节点和链接生成到一个对象中，例如：

```
{"nodes":[{"node_type":"Person","name":"Damien","id":"damien_person"}, {"node_type":"Person","name":"Grant","id":"grant_person"}}],
"links":[{"source":"damien_person","target":"grant_person","label":"Friends"}} 
```

现在，当我渲染 D3 时，我需要更新调用`d3.json("graph.json", function(json) {...});`以引用我的内存对象而不是本地文件（或 url）。但是，我尝试过的一切都破坏了我的 html/javascript。例如，我尝试设置`var dataset = <%= raw(@myInMemoryObject) %>;`, 并且它适用于分配（我在数据集上做了一个警报），但是我无法让 D3 代码使用它。

如何替换 d3.json 调用以使用我的内存对象？

谢谢，

达米安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:25:58.327

您使用的想法，例如`var dataset = <%= raw(@myInMemoryObject) %>`，是正确的方法，但您需要准备对象以采用正确的格式。

链接中指定的节点需要是对节点数组中节点的数字引用，例如。0代表第一，1代表第二

```
var json ={
    "nodes":[{"name":"Damien","id":"a"}, {"name":"Bob","id":"b"}],
    "links":[{"source":0, "target":1,"value":1}]
} 
```

或链接到使节点本身的实际对象：

```
var a = {"name":"Damien","id":"a"};
var b = {"name":"Bob","id":"b"}
var json ={
    "nodes":[a,b],
    "links":[{"source":a,"target":b,"value":1}]
}; 
```

相关讨论在这里：[https ://groups.google.com/forum/?fromgroups=#!topic/d3-js/LWuhBeEipz4](https://groups.google.com/forum/?fromgroups=#!topic/d3-js/LWuhBeEipz4)

此处示例：http: [//jsfiddle.net/5A9eV/1/](http://jsfiddle.net/5A9eV/1/)

# android - 第二次按菜单键时无法关闭警报对话框

> ID：15652444
> 
> 赞同：0
> 
> 时间：2013-03-27T05:25:42.077
> 
> 标签：android, menu

在这里，我显示了一个`AlertDialog`通过按菜单键并显示弹出窗口`dialogs`，但是当我`dissmiss`第二次再次按菜单键尝试进入对话框时，它似乎 `menu key`没有触发。

这是我的代码

```
 @SuppressLint({ "NewApi", "NewApi", "NewApi", "NewApi" })
    @Override
 public boolean onKeyDown(int keyCode, KeyEvent event) {
  AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);

    if (keyCode == KeyEvent.KEYCODE_MENU && event.getAction() == 0 ) {

   if(!open){
   showDialogItem();
   open=true;

   }

   else if(open){
   alertDialog.dismiss(
  open =false;
   }return true;

            }

    return super.onKeyDown(keyCode, event);

    } 

 public void showDialogItem(){
                     AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);
  alertDialogBuilder .setItems(R.array.select_dialog_items, new DialogInterface.OnClickListener()
     {
  public void onClick(DialogInterface dialog, int which) {

 String[] items = getResources().getStringArray(R.array.select_dialog_items);
 new AlertDialog.Builder(MainActivity.this)
 .setMessage("You selected: " + which + " , " + items[which])
                                            .show();
                                }
                            });

   alertDialog = alertDialogBuilder.create();

   WindowManager.LayoutParams lp = new WindowManager.LayoutParams();
lp = alertDialog.getWindow().getAttributes();
 lp.gravity = Gravity.TOP | Gravity.LEFT;
   lp.x=-300;
lp.gravity=Gravity.BOTTOM;
   alertDialog.getWindow().setAttributes(lp);

    alertDialog.show();
    alertDialog.getWindow().setLayout(130, 220);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:06:19.237

```
Got this initialize 

public static int x=0;

public boolean onKeyDown(int keyCode, KeyEvent event) {

if (keyCode == KeyEvent.KEYCODE_MENU && event.getAction() == 0 ) 
{

AlertDialog.Builder builder = new AlertDialog.Builder(this)
.setOnKeyListener(new DialogInterface.OnKeyListener() 
{
 @Override
 public boolean onKey (DialogInterface dialog, int keyCode, KeyEvent event) 
{

         if (keyCode == KeyEvent.KEYCODE_MENU && event.getAction() == 0) 
{

                      if(x==1)
                      {
                        alert.dismiss();
                        x=0;
                      }
             return true;
             }
             return false;
             }
             });
if(x==0)
{
builder.setMessage("Login details Changed Successfully...");
builder .setCancelable(true);              
builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {
public void onClick(DialogInterface dialog, int id) {
      System.exit(0);
 }
     });
    alert = builder.create();
    alert.show();
    x=1;
          }
          return true;

         } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:41:09.747

这不会像您期望的那样工作，只是因为一旦打开对话框，它将拦截菜单键而不是底层活动。您可以解决它*不*使用 AlertDialog。相反，您可以创建一个显示为对话框的活动：

然后从您的主要活动中，按下菜单按钮，开始此活动。在这个活动中，按下菜单按钮，你就完成了。

另一种选择是在对话框中添加一个键侦听器，并在按下菜单按钮时关闭对话框。

在这两种解决方案中的任何一种中，需要注意的重要一点是对话（或对话活动）而不是父活动将接收第二次菜单按下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T05:32:09.310

初始化打开=假；

```
 if(open==false){
            showDialogItem();
            open=true;             
             }

     else{
           alertDialog.dismiss();
           open =false;
         }return true; 
```

# django - 使用 Django ORM 的 SQL 中给定关系的 order_by 中间表

> ID：15652454
> 
> 赞同：0
> 
> 时间：2013-03-27T05:26:29.417
> 
> 标签：django, django-orm

```
class Nutrient(models.Model):
    tagname = models.CharField(max_length=10)

class FoodNutrientAmount(models.Model):
    nutrient = models.ForeignKey(Nutrient)
    food = models.ForeignKey(Food)
    amount = models.FloatField()

class Food(models.Model):
    nutrients = models.ManyToManyField(
        Nutrient,
        through=FoodNutrientAmount,
    ) 
```

`tagname=FOL`因此，我可以通过列表理解获得按营养量排序的食物：

```
ordered_fnas = FoodNutrientAmount.objects.filter(
    nutrient__tagname="FOL"
).order_by('-amount')
ordered_foods_by_most_fol = [fna.food for fna in ordered_fnas] 
```

我可以在不将整个内容放入内存的情况下获得这样一个可迭代的查询集吗？

也许有不同的方法使用`Food.objects.annotate`or `extra`？目前我想不出一个很好的方法来做到这一点。

我可以接近 values_list；但是，我得到了 pks 的有序列表，而不是`Food`我想要的对象的查询集。

```
FoodNutrientAmount.objects.filter(
    nutrient__tagname='FOL'
).order_by('-amount').v‌​alues_list('food', flat=True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:44:17.160

编辑：

这是一个多对多的关系。所以你可能可以利用它。如何添加默认排序`FoodNutrientAmount`，然后您可以执行正常的多对多查询。

```
class FoodNutrientAmount(models.Model):
    nutrient = models.ForeignKey(Nutrient)
    food = models.ForeignKey(Food)
    amount = models.FloatField()

    class Meta:
        ordering = ('-amount',) 
```

然后你可以打电话 -

```
nutritious_foods = Food.objects.filter(nutrients__tagname='FOL').order_by('foodnutrientamount') 
```

# python - Pygame 箭头控制

> ID：15652459
> 
> 赞同：2
> 
> 时间：2013-03-27T05:27:00.440
> 
> 标签：python, pygame

我想知道为什么当我执行文件
时，即使我长时间按住箭头键，左侧矩形的箭头控制和移动也不会连续向上或向下移动。

```
import pygame

black    = (   0,   0,   0)
white    = ( 255, 255, 255)
green    = (   0, 255,   0)
red      = ( 255,   0,   0)

pygame.init()

size = [700,500]
screen = pygame.display.set_mode(size)

fonto = pygame.font.SysFont("algerian", 100)
font = pygame.font.SysFont("algerian", 12)
text = fonto.render("Game Over", True, (0, 128, 10))

pygame.display.set_caption("Vasanths First Legit Game")

done = False
pygame.mouse.set_visible(0)

clock = pygame.time.Clock()
score = 1

rect_x = 50
rect_y = 50
rect_xp = 10
rect_yp = 10

rect_change_x = 10
rect_change_y = 10
rect_change_xp = 10
rect_change_yp = 3

while done == False:
    for event in pygame.event.get(): 
        if event.type == pygame.QUIT: 
            done=True 

        if event.type == pygame.KEYDOWN:
            if event.key == pygame.K_DOWN:
                rect_yp = rect_change_yp+rect_yp
        if event.type == pygame.KEYUP:
            if event.key == pygame.K_DOWN:
                rect_yp = 0+rect_yp

        if event.type == pygame.KEYDOWN:
            if event.key == pygame.K_LEFT:
                rect_yp=-3+rect_yp
            if event.key == pygame.K_RIGHT:
                rect_yp=3+rect_yp
            if event.key == pygame.K_UP:
                rect_yp=-3+rect_yp
            if event.key == pygame.K_DOWN:
                rect_yp=3+rect_yp

        if event.type == pygame.KEYUP:
            if event.key == pygame.K_LEFT:
                rect_yp=0+rect_yp
            if event.key == pygame.K_RIGHT:
                rect_yp=0+rect_yp
            if event.key == pygame.K_UP:
                rect_yp=0+rect_yp
            if event.key == pygame.K_DOWN:
                rect_yp=0+rect_yp

    pos = pygame.mouse.get_pos()

    x = pos[0] 
    y = pos[1] 

    screen.fill(black)

    pygame.draw.rect(screen,white,[rect_x,rect_y,10,10])
    pygame.draw.rect(screen,green,[x,490,50,10])
    pygame.draw.rect(screen,green,[10,rect_yp,10,50])
    # Move the rectangle starting point
    rect_x += rect_change_x
    rect_y += rect_change_y

    if rect_y == 0:
        rect_change_x=rect_change_x*1
        rect_change_y=rect_change_y*-1
    if rect_y == 490:
       if rect_x < x + 50 :
            scoref = font.render(score, True, (0, 128, 0))
            screen.blit(scoref,
                (20 - scoref.get_width() // 10, 20 - scoref.get_height() // 10))
            rect_change_x=rect_change_x*1
            rect_change_y=rect_change_y*-1

        if rect_x < x:
            rect_change_y = 0
            rect_change_x = 0

            #dont do this , it will go bizzonkes
            score = str(score)
            score = int(score)

    if rect_y == 490:
        if rect_x < x + 50 :
            if rect_change_x !=0:
                if rect_change_y !=0:
                    score=int(score)
                    score = score + 1
                    score=str(score)
    if rect_change_x == 0:
        if rect_change_y == 0:
                    screen.blit(text,
                        (320 - text.get_width() // 2, 240 - text.get_height() // 2))

    if rect_x == 700:
        rect_change_x = rect_change_x*-1
        rect_change_y = rect_change_y*1

    if rect_x == 0:
        rect_change_x = rect_change_x*0
        rect_change_y = rect_change_y*0

    if rect_y == 500:
        rect_change_y = 0
        rect_change_x = 0
        screen.blit(text,
            (320 - text.get_width() // 2, 240 - text.get_height() // 2))
        score=str(score)

    print(score)
    score = str(score)

    scoref = font.render(score, True, (0, 128, 0))
    screen.blit(scoref,
                (20 - scoref.get_width() // 10, 20 - scoref.get_height() // 10))

    clock.tick(30)

    pygame.display.flip()

pygame.quit () 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T08:49:55.220

在 pygame 中，输入在事件循环中处理。有一个事件队列，系统从键盘发送输入，通过调用`pygame.event.get()`你得到队列中的第一个事件。有许多类型的事件，最受欢迎的是`KEYUP`和`KEYDOWN`。大多数初学者犯的错误是，他们认为当按下按钮时，会一直发送 KEYDOWN 事件。这不是必需的，因为如果你按下一个按钮，它会一直被按下直到你释放它。因此，您需要有某些标志来查看是否按下了按钮。

最流行的方法是使用`d = v*t`方程。由于速度是恒定的，我们需要引入一个方向。所以我们的方程看起来像这样：

> distance_changed = 方向 * 速度 * time_change

然后在您的事件循环中更改方向：

> 1 如果 KEYDOWN-RIGHT
> 
> -1 如果 KEYDOWN-LEFT
> 
> 如果 KEYUP-LEFT 或 RIGHT，则为 0。

现在可能会出现问题，为什么要使用 time_change？由于我们无法预测程序将在哪些机器上运行，因此无法知道循环重复的次数。如果您使用旧机器，则游戏运行速度会慢得多。所以我们测量最后一次运动所花费的时间，这样它就不会在不同的机器上改变。

我看到您使用 pygame.tick(30)，它会等待以使循环完成所花费的时间是恒定的。当您在较旧的机器上运行它时，就会出现问题。循环无法加速。

作为建议，您应该将游戏划分为功能。它更具可读性，您可以在不同的地方使用您的代码。此外，您的事件循环有很多 ifs。使用 elif，因为如果已经按下了 LEFT，则没有必要检查是否按下了 RIGTH 键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-29T12:39:21.887

我会用`pygame.key.get_pressed()`，但你也忘记了`pygame.key.set_repeat()`。第一个参数是开始重复所需的毫秒数，第二个参数是键重复的间隔。

这是一个同时使用两者的示例：

```
x = 400
y = 300

import pygame, sys

bkg = (255, 211, 0)
clr = (0, 0, 0)
squ = (8, 11, 134)

pygame.init()
size = (800, 600)
screen = pygame.display.set_mode(size)
pygame.display.set_caption("Bloxy")
pygame.key.set_repeat(1, 1)
font = pygame.font.SysFont("Stencil", 20)
clock = pygame.time.Clock()

while True:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
            sys.exit()

    keys_pressed = pygame.key.get_pressed()

    if keys_pressed[pygame.K_LEFT]:
        x -= 5
    if keys_pressed[pygame.K_RIGHT]:
        x += 5
    if keys_pressed[pygame.K_UP]:
        y -= 5
    if keys_pressed[pygame.K_DOWN]:
        y += 5

    if x > 800:
        x = 0
    if x < 0:
        x = 800
    if y > 600:
        y = 0
    if y < 0:
        y = 600

    screen.fill(bkg)
    text = font.render('(' + str(x) + ',' + str(y) + ')', True, clr)
    screen.blit(text, [10, 10])
    pygame.draw.rect(screen, squ, [x - 10, y - 10, 20, 20])

    pygame.display.flip()
    clock.tick(60) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T16:10:04.500

这就是我在自己的一个 Pygame 项目中处理它的方式：

```
class Inputs:

def __init__(self):
    self.bindings = {"up": pygame.K_UP,
                     "down":  pygame.K_DOWN,
                     "left":  pygame.K_LEFT,
                     "right":   pygame.K_RIGHT,
                     "lp":  pygame.K_a,
                     "mp":  pygame.K_s,
                     "hp":  pygame.K_d,
                     "lk":  pygame.K_z,
                     "mk":  pygame.K_x,
                     "hk":  pygame.K_c,
                     "pause":   pygame.K_RETURN}

    self.inputState = {"up": False,
                   "down": False,
                   "right": False,
                   "left": False,
                   "lp": False,
                   "mp": False,
                   "hp": False,
                   "lk": False,
                   "mk": False,
                   "hk": False,
                   "pause": False}

    self.buffer = InputBuffer()

def lookupBinding(self, keyEntered):
    for binding, keyBound in self.bindings.items():
        if keyEntered == keyBound:
            return binding

    return "not found"

def getInputState(self, events):
    for event in events:

        if event.type == pygame.KEYDOWN:
            binding = self.lookupBinding(event.key)
            if binding != "not found":
                newInput = Input()
                newInput.inputName = binding
                newInput.timeSinceInput = 0
                self.buffer.push(newInput)
                self.inputState[binding] = True

        if event.type == pygame.KEYUP:
            binding = self.lookupBinding(event.key)
            if binding != "not found":
                self.inputState[binding] = False

    return self.inputState 
```

我保留了两个字典，一个是游戏中的“命令”，例如方向，到 pygame 键，然后是另一个命令到一个布尔值，表示命令的开/关状态。通过观察 KEYDOWN 和 KEYUP 事件，我可以确定哪些映射输入是打开的，哪些是关闭的。

编辑：我应该提到的这种方法的一个好处是，它可以很容易地在以后更改键映射，甚至允许自定义键映射。您的游戏逻辑只需要依赖于基本输入，例如跳跃或移动输入，并且如果键映射发生更改，则无需更改。

# gcc - 自定义 MIPS 工具链和 abicall 的问题

> ID：15652460
> 
> 赞同：2
> 
> 时间：2013-03-27T05:27:15.100
> 
> 标签：gcc, mips, toolchain, uclibc, crosstool-ng

我正在从事一个专注于 MIPS32 拱门（小端序）的项目。供应商给了我一个 GNU 工具链来编译我的项目，以他们的嵌入式 Linux 版本为目标，一切正常。这是一个 GCC+Linux+uClibc 工具链。

然而，最近我需要在我的 uClibc 构建中添加一些功能，所以我尝试在我自己的盒子中复制供应商的工具链。

在 crosstool-ng 的帮助下一切正常，但是当我尝试编译我的项目时，我到处都收到奇怪的链接器警告：

```
warning: linking abicalls files with non-abicalls files 
```

根据我的研究，这些都是非常严重的警告。用 readelf 分析我的目标文件会给我几乎相同的输出。这些文件中的任何地方都没有 .abicall 部分。这适用于我的项目的目标文件和我的工具链的目标文件。

这里有什么问题？我什至不知道从哪里开始调试这个。

# mysql - 创建程序时出错

> ID：15652461
> 
> 赞同：0
> 
> 时间：2013-03-27T05:27:16.170
> 
> 标签：mysql, procedures

我创建了一个过程，但是当我尝试执行它时给出一个错误，即没有选择数据库。这是我的过程。

```
 DELIMITER $$  
   create procedure myproced  
   as  
   declare arpt varchar(10);  
   declare num int;  
   BEGIN  
   use lookup;  
   create temporary table lookup.airportname as (select distinct name from lookup.airpot);  
   select count(*) into num from (select * from airportname);  
   END;  
   $$ 
```

我还在堆栈溢出中看到了一些关于相同问题的帖子。他们提到如果你正在使用 mysql 工作台，请从下拉列表中选择数据库。我正在使用 mysql 查询浏览器。即使我提到了使用数据库。但它仍然是提示错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:36:57.820

尝试将此行添加到您的过程声明中：

```
create procedure `lookup`.myproced 
```

这可能会解决您的问题，我在自己的程序中使用这种声明并且从未遇到任何此类问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:36:37.223

在过程之外使用`USE`语句。里面不需要。

```
DELIMITER $$  
USE [DAtabase Name]$$
DELIMITER $$  
   create procedure myproced  
   as  
   declare arpt varchar(10);  
   declare num int;  
   BEGIN  
   create temporary table lookup.airportname as (select distinct name from lookup.airpot);  
   select count(*) into num from (select * from airportname);  
   END;  
   $$ 
```

# django - Django Userena 自定义

> ID：15652462
> 
> 赞同：3
> 
> 时间：2013-03-27T05:27:21.537
> 
> 标签：django

我最近在我的 Linux Apache 服务器上安装了 Django Userena。

纠正一些错误后，我开始查看文档。但是，在搜索文档和谷歌搜索后，我仍然不知道如何更改页面的外观！例如，如何更改登录页面、注册页面等的外观？我知道每个 userena 模板都 extends `base.html`，但是我从那里去哪里呢？

我可能遗漏了一些非常简单的东西，所以如果答案很明显，请原谅我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T05:56:57.030

这是Userena( [source](https://github.com/bread-and-pepper/django-userena/blob/master/userena/views.py#L285)`signin` ) 的方法签名-

```
def signin(request, auth_form=AuthenticationForm,
       template_name='userena/signin_form.html',
       redirect_field_name=REDIRECT_FIELD_NAME,
       redirect_signin_function=signin_redirect, extra_context=None): 
```

如您所见，有一个`template_name`保存模板位置的方法。您可以覆盖它。在您的`urls.py`中，您可以像使用它一样 -

```
url(r'^signin/', 'userena.views.signin', {'template_name': 'signin.html'}, name="signin"), 
```

然后，您可以在文件夹中创建`signin.html`页面`templates`并扩展`base.html`. 视图在名为 的变量中`signin`发送登录表单`form`。你可以看到[源码](https://github.com/bread-and-pepper/django-userena/blob/master/userena/views.py#L359)。您可以使用模板上的表单，`signin.html`例如`{{ form.as_p }}`. 如果您可以按照`userena.forms. AuthenticationForm`. 再次检查[源代码](https://github.com/bread-and-pepper/django-userena/blob/master/userena/forms.py#L142)。您可以对 Userena 拥有的任何允许像这样覆盖的视图执行相同的操作。

如有疑问，请阅读源代码。:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T08:34:17.570

您需要覆盖`userena` *默认值* `templates`。

`templates/`在您的named中创建一个目录`userena/`，然后例如，如果您想更改表单，请在您刚刚创建的目录中`signup`轻松创建`signup_form.html`模板文件并开始编写。`userena/`

例如这里是默认[`signup_form.html`](https://github.com/bread-and-pepper/django-userena/blob/master/userena/templates/userena/signup_form.html)模板。

您可以在其 github 存储库中找到*userena* [默认模板](https://github.com/bread-and-pepper/django-userena/tree/master/userena/templates/userena)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T07:42:24.593

只需将提供的 userena 模板复制到您的模板目录中即可。

你可以在 linux 机器上找到它们`find / -name userena`

您正在寻找的路径是`../userena/templates/userena`. 将 userena 文件夹复制到您的模板目录并开始更改`signin_form.html`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T08:22:46.627

只需将模板复制到您自己的模板目录即可。如果您按照此[链接](https://github.com/bread-and-pepper/django-userena/tree/master/userena/templates)下载并将目录“userena”复制到您的模板目录。然后，您可以自定义模板，包括电子邮件文本和模板。

# openx - OpenX Admin 无法访问

> ID：15652467
> 
> 赞同：0
> 
> 时间：2013-03-27T05:28:07.677
> 
> 标签：openx

几天前，我的 OpenX 服务器因流量大而受到猛烈抨击。从那以后，我一直无法进入 OpenX 管理员。页面只是超时。服务器仍在投放广告。Apache 已重新启动，服务器集群上的 RAM 已从每台服务器 256MB（总计 896MB）增加到每台服务器 512MB（总计 1.6GB）。我在日志中看到很多 apc-cache 'Unable to allocate memory for pool' 错误。

服务器运行 1ubuntu4.15 和 PHP 5.3.2。OpenX 版本是 2.8.9 PHP 设置 memory_limit=64M max_execution_time=90

关于在哪里看什么有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:08:18.773

通过删除 OpenX 缓存文件夹中的所有文件，我能够让管理 UI 再次工作。

# html - 从 Div 出来的表格 - IE 问题

> ID：15652471
> 
> 赞同：0
> 
> 时间：2013-03-27T05:28:22.313
> 
> 标签：html, css, internet-explorer, html-table

我是一名 UI 开发人员。我的问题是我在 2 里面放了一张桌子`divs`。但是表是从IE8中出来的`div`。

在 Firefox 中，它运行顺畅。但是 IE 杀了我。

请帮我。[http://i.stack.imgur.com/k6N5Z.jpg](http://i.stack.imgur.com/k6N5Z.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:14:49.250

将以下内容添加到您的 css 是一个临时解决方案：

```
.rightPane{overflow-x:scroll;} 
```

我说是临时的，因为您的 html 中有很多错误。例如在`<h1>`标签中包围整个表格。我建议您通过验证服务运行您的源代码并修复错误。更干净的代码将更容易修复，也更可靠。

你更新的小提琴 - [http://jsfiddle.net/9QCTu/1/](http://jsfiddle.net/9QCTu/1/)

希望这可以帮助..

# android - Html（jquery）拖放在AndroidEmulator中不起作用

> ID：15652473
> 
> 赞同：0
> 
> 时间：2013-03-27T05:28:26.697
> 
> 标签：android, html, jquery

我是新的Android ..我在Html中创建了一个项目......它运行得很好......我想在android模拟器中运行这个html项目......我不知道是什么原因......设计是在 Android 模拟器中出现的..但是拖放仅在 android 模拟器中不起作用..我使用 phonegap 来运行 html 代码..如果你知道请给我打电话..提前谢谢..这是我的 Html （jQuery代码）

```
 <!DOCTYPE html>
    <html>
    <head>
      <meta http-equiv="content-type" content="text/html; charset=UTF-8">
      <title> - jsFiddle demo by scaillerie</title>
      <script type='text/javascript' src='http://code.jquery.com/jquery-1.4.4.min.js'></script>
      <link rel="stylesheet" type="text/css" href="/css/normalize.css">

      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.7/jquery-ui.js"></script>

      <link rel="stylesheet" type="text/css" href="/css/result-light.css">

      <style type='text/css'>
        .ui-layout-center {
        width: 400px;
        height: 300px;
        border: 1px solid black;
    }

    .ui-state-hover {
        background-color: #f9ffff;   
    }

      </style>

    <script type='text/javascript'>//<![CDATA[ 
    $(window).load(function(){
    jQuery(function() {
        jQuery(".component").draggable({
            //  use a helper-clone that is append to 'body' so is not 'contained' by a pane
            helper: function() {
                return jQuery(this).clone().appendTo('body').css({
                    'zIndex': 5
                });
            },
            cursor: 'move',
            containment: "document"
        });

        jQuery('.ui-layout-center').droppable({
            activeClass: 'ui-state-hover',
            accept: '.component',
            drop: function(event, ui) {
                if (!ui.draggable.hasClass("dropped"))
                    jQuery(this).append(jQuery(ui.draggable).clone().addClass("dropped").draggable());
                }
            });
        });
    });//]]>  

    </script>

    </head>
    <body>
      <div class="component">Element 1</div>
    <div class="component">Element 2</div>

    <div class="ui-layout-center"> </div>

    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:54:52.050

不幸的是，jQuery UI 不能与触摸事件一起正常工作。然而，有许多插件可以在 jQuery UI 中启用触摸，Touch Punch 就是其中之一：[http ://touchpunch.furf.com/](http://touchpunch.furf.com/)

您还应该考虑更新您正在使用的 jQuery 版本...v1.4.4 现在已经 3 岁了。

# salesforce - System.UnexpectedException：不能从测试方法中调用多个 executeBatch

> ID：15652474
> 
> 赞同：1
> 
> 时间：2013-03-27T05:28:31.857
> 
> 标签：salesforce, apex-code

ia 测试我的应用程序。它给了我错误

```
System.UnexpectedException: No more than one executeBatch can be called from within a testmethod. Please make sure the iterable returned from your start method matches the batch size, resulting in one executeBatch invocation. 
```

当此应用程序基于 Google Calendar Api 时，我正在尝试调用 Batch apex 类。这就是 json 响应的原因。但我面临无法解决的上述错误。

```
@isTest public class TestBatchCleanGCalendars {

    static testMethod void testBatchJob() {

        GoogleTestHelper.createfullGSettings(10);
        GoogleTestHelper.createCampaigns();

        List<Campaign> campaigns = [Select Id, Name from Campaign];

        system.assertEquals(5,campaigns.size());

        GoogleTestHelper.createTestCalendars();

        GCalendarUtil.testResponse = GoogleTestHelper.returnGCalendarResp();
            BatchCleanGCalendars bJob = new BatchCleanGCalendars('Select Id, Name, CalendarId__c,CalendarQuery__c,FieldToDisplay__c from CalendarSettings__c');

        bJob.testResponse = '{'
+' "kind": "calendar#events",'
+' "summary": "Saarthak",'
+' "description": "",'
+' "updated": "2013-03-26T10:17:05.354Z",'
+' "timeZone": "Asia/Calcutta",'
+' "accessRole": "owner",'
+' "items": ['
+'  {'  +'  "kind": "calendar#event",'   +' "id": "c3gmu1me12tmujuifgmbrr33rc",'  +'  "status": "confirmed",'
+  ' "htmlLink": "https://www.google.com/calendar/event?eid=YzNnbXUxbWUxMnRtdWp1aWZnbWJycjMzcmMgamg5NWRyMDhpNDdwZ3RkMzFmMzQ5Z25uZmdAZw",'
+'  "created": "2013-03-26T10:17:03.000Z",'   +' "updated": "2013-03-26T10:17:03.552Z",'   +' "summary": "GC Product Webinar - Jan 7, 2002",'   +' "description": "null",'   +' "creator": {'   +'  "email": "riteshmehandiratta@gmail.com"'   +' },'   +' "organizer": {'
+'  "email": "jh95dr08i47pgtd31f349gnnfg@group.calendar.google.com",'   +'  "displayName": "Saarthak",'   +'  "self": true'   +' },'   +' "start": {'    +' "date": "2006-09-04"'   +' },'  +'  "end": {'   +'  "date": "2006-09-04"'   +' },'   +' "iCalUID": "c3gmu1me12tmujuifgmbrr33rc@google.com",'   +' "sequence": 0,'   +' "reminders": {'    +' "useDefault": true'  +'  }'  +' },'  +' {'   +' "kind": "calendar#event",'   +' "id": "6se2vm8guhbh2tekc7scnpcudc",'  
+' "status": "confirmed",'   +' "htmlLink": "https://www.google.com/calendar/event?eid=NnNlMnZtOGd1aGJoMnRla2M3c2NucGN1ZGMgamg5NWRyMDhpNDdwZ3RkMzFmMzQ5Z25uZmdAZw",'
+' "created": "2013-03-26T10:17:04.000Z",'   +' "updated": "2013-03-26T10:17:04.096Z",'   +' "summary": "User Conference - Jun 17-19, 2002",'   +' "description": "null",'   +' "creator": {'   +'  "email": "riteshmehandiratta@gmail.com"'   +' },'   +' "organizer": {'
+'  "email": "jh95dr08i47pgtd31f349gnnfg@group.calendar.google.com",'   +'  "displayName": "Saarthak",'   +'  "self": true'   +' },'   +' "start": {'   +'  "date": "2007-02-12"'   +' },'   +' "end": {'    +' "date": "2007-02-14"'   +' },'   +' "iCalUID": "6se2vm8guhbh2tekc7scnpcudc@google.com",'   +' "sequence": 0,'   +' "reminders": {'    +' "useDefault": true'   +' }'  +' },'  +' {'  +'  "kind": "calendar#event",'  +'  "id": "8of1l1ffqbfmm582und3q42k10",' 
+'  "status": "confirmed",'   +' "htmlLink": "https://www.google.com/calendar/event?eid=OG9mMWwxZmZxYmZtbTU4MnVuZDNxNDJrMTAgamg5NWRyMDhpNDdwZ3RkMzFmMzQ5Z25uZmdAZw",'
+' "created": "2013-03-26T10:17:04.000Z",'   +' "updated": "2013-03-26T10:17:04.707Z",'   +' "summary": "DM Campaign to Top Customers - Nov 12-23, 2001",'   +' "description": "null",'   +' "creator": {'   +'  "email": "riteshmehandiratta@gmail.com"'   +' },' 
+'"organizer": {'   +'  "email": "jh95dr08i47pgtd31f349gnnfg@group.calendar.google.com",'   +'  "displayName": "Saarthak",'   +'  "self": true'   +' },'   +' "start": {'   +'  "date": "2006-07-10"'   +' },'   +' "end": {'    +' "date": "2006-07-21"'  +'  },'   +' "iCalUID": "8of1l1ffqbfmm582und3q42k10@google.com",'   +' "sequence": 0,'   +' "reminders": {'   +'  "useDefault": true'   +' }'  +' }'
+' ]'
+',"nextPageToken": "CigKGjFhaW9oc25nZTFhZzBxYTY4bjZhOGlrdG5nGAEggICA0arZqecT"'
+'}';

 bJob.testResponse1 = '{'
+' "kind": "calendar#events",'
+' "summary": "Saarthak",'
+' "description": "",'
+' "updated": "2013-03-26T10:17:05.354Z",'
+' "timeZone": "Asia/Calcutta",'
+' "accessRole": "owner",'
+' "items": ['
+'  {'  +'  "kind": "calendar#event",'   +' "id": "c3gmu1me12tmujuifgmbrr33rc",'  +'  "status": "confirmed",'
+  ' "htmlLink": "https://www.google.com/calendar/event?eid=YzNnbXUxbWUxMnRtdWp1aWZnbWJycjMzcmMgamg5NWRyMDhpNDdwZ3RkMzFmMzQ5Z25uZmdAZw",'
+'  "created": "2013-03-26T10:17:03.000Z",'   +' "updated": "2013-03-26T10:17:03.552Z",'   +' "summary": "GC Product Webinar - Jan 7, 2002",'   +' "description": "null",'   +' "creator": {'   +'  "email": "riteshmehandiratta@gmail.com"'   +' },'   +' "organizer": {'
+'  "email": "jh95dr08i47pgtd31f349gnnfg@group.calendar.google.com",'   +'  "displayName": "Saarthak",'   +'  "self": true'   +' },'   +' "start": {'    +' "date": "2006-09-04"'   +' },'  +'  "end": {'   +'  "date": "2006-09-04"'   +' },'   +' "iCalUID": "c3gmu1me12tmujuifgmbrr33rc@google.com",'   +' "sequence": 0,'   +' "reminders": {'    +' "useDefault": true'  +'  }'  +' },'  +' {'   +' "kind": "calendar#event",'   +' "id": "6se2vm8guhbh2tekc7scnpcudc",'  
+' "status": "confirmed",'   +' "htmlLink": "https://www.google.com/calendar/event?eid=NnNlMnZtOGd1aGJoMnRla2M3c2NucGN1ZGMgamg5NWRyMDhpNDdwZ3RkMzFmMzQ5Z25uZmdAZw",'
+' "created": "2013-03-26T10:17:04.000Z",'   +' "updated": "2013-03-26T10:17:04.096Z",'   +' "summary": "User Conference - Jun 17-19, 2002",'   +' "description": "null",'   +' "creator": {'   +'  "email": "riteshmehandiratta@gmail.com"'   +' },'   +' "organizer": {'
+'  "email": "jh95dr08i47pgtd31f349gnnfg@group.calendar.google.com",'   +'  "displayName": "Saarthak",'   +'  "self": true'   +' },'   +' "start": {'   +'  "date": "2007-02-12"'   +' },'   +' "end": {'    +' "date": "2007-02-14"'   +' },'   +' "iCalUID": "6se2vm8guhbh2tekc7scnpcudc@google.com",'   +' "sequence": 0,'   +' "reminders": {'    +' "useDefault": true'   +' }'  +' },'  +' {'  +'  "kind": "calendar#event",'  +'  "id": "8of1l1ffqbfmm582und3q42k10",' 
+'  "status": "confirmed",'   +' "htmlLink": "https://www.google.com/calendar/event?eid=OG9mMWwxZmZxYmZtbTU4MnVuZDNxNDJrMTAgamg5NWRyMDhpNDdwZ3RkMzFmMzQ5Z25uZmdAZw",'
+' "created": "2013-03-26T10:17:04.000Z",'   +' "updated": "2013-03-26T10:17:04.707Z",'   +' "summary": "DM Campaign to Top Customers - Nov 12-23, 2001",'   +' "description": "null",'   +' "creator": {'   +'  "email": "riteshmehandiratta@gmail.com"'   +' },' 
+'"organizer": {'   +'  "email": "jh95dr08i47pgtd31f349gnnfg@group.calendar.google.com",'   +'  "displayName": "Saarthak",'   +'  "self": true'   +' },'   +' "start": {'   +'  "date": "2006-07-10"'   +' },'   +' "end": {'    +' "date": "2006-07-21"'  +'  },'   +' "iCalUID": "8of1l1ffqbfmm582und3q42k10@google.com",'   +' "sequence": 0,'   +' "reminders": {'   +'  "useDefault": true'   +' }'  +' }'
+' ]'
+'}';
        Test.StartTest();

        System.assertEquals(2,[Select count() from CalendarSettings__c ]);

               DataBase.executeBatch(bJob); 

        Test.StopTest();

    } 
```

在完成方法中完成批处理请求后，我又调用了一个批处理类。谁能指出我为什么在测试方法中调用一个批处理类时出现此错误？请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:30:38.397

While you can call batch class from another batch class, you afre allowed to call only one batch class from Test classes. Hence you are facing this error.

The alternative for this is to check in the finish method of the calling Batch class whether you are in a test context or regular context. You can do this using Test.isRunningTest().

# iphone - 嵌套 UIScrollView - 滚动方向

> ID：15652475
> 
> 赞同：2
> 
> 时间：2013-03-27T05:28:52.650
> 
> 标签：iphone, ios, objective-c, ipad, uiscrollview

嗨，大家好！

我有一个关于嵌套滚动视图的问题。

有一个包含嵌套滚动视图的滚动视图。我将只调用**external-scrollview**和**inner-scrollview**。outer-scrollview 是水平滚动视图，inner-scrollviews 是垂直滚动视图。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    _outerScrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds];
    _outerScrollView.pagingEnabled = YES;
    _outerScrollView.contentSize = CGSizeMake(_outerScrollView.frame.size.width * 3, _outerScrollView.frame.size.height);
    [self.view addSubview:_outerScrollView];

    for(int i=0; i<3; i++) {

        UIScrollView *innerScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(i * _outerScrollView.frame.size.width,
                                                                                             0,
                                                                                             _outerScrollView.frame.size.width,
                                                                                             _outerScrollView.frame.size.height)];
        [_outerScrollView addSubview:innerScrollView];

        UIView *contentView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, innerScrollView.frame.size.width, innerScrollView.frame.size.height * 2.0)];
        contentView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"imagefile"]];
        [innerScrollView addSubview:contentView];

        innerScrollView.contentSize = contentView.frame.size;

    }
} 
```

基本上，如果只有 1 个滚动视图会同时滚动。

如果我滚动到**left**或**right**，则**external-scrollview**将被滚动。

如果我滚动到**top**或**bottom**，则**inner-scrollview**将被滚动，

并且，如果我沿**对角线**滚动，**两者之一**将被滚动。这取决于滚动的方向。

![在此处输入图像描述](../Images/65826fdfecc85c652c126178a20f94b3.png)

如果角度为 0~45 度，**inner-scrollview**会滚动。如果角度为 45~90 度，**outer-scrollview**将被滚动。

可以改变**角度**吗？

例如，即使角度是 30 度，我也想水平滚动。

谢谢！

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:35:37.593

如果您想要一种简单的方法来实现这种嵌套的滚动视图操作，您可以尝试简单地禁用内部视图的水平滚动并禁用外部视图的垂直滚动。但是，如果这不能为您提供所需的结果，您将需要进行大量自定义编码。

首先，您需要启动您自己的 UIScrollView 子类。首先覆盖这些函数：

```
touchesBegan:
touchesMoved:
touchesEnded:
touchesCancelled: 
```

并且

```
touchesShouldBegin: 
```

从那里，您将不得不进行自己的计算以确定拖动的角度并相应地向滚动视图发送消息，可能会调用`super`上述一个或多个函数。您也可以考虑从头开始编写自己的滚动视图，您可以简单地将 UIView 作为子类的子视图。

# iphone - 通过点击视图关闭弹出框时将执行哪种方法

> ID：15652476
> 
> 赞同：0
> 
> 时间：2013-03-27T05:28:58.793
> 
> 标签：iphone, uipopovercontroller

每当我点击视图时，在我的应用程序中您好。启动的弹出框将自动关闭。我可以知道将执行哪种方法来获得这种行为。在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T05:34:35.507

让您的主视图控制器成为弹出框控制器的委托，并实现 –popoverControllerDidDismissPopover: 方法。查看 Apple 的文档以获取帮助。

[苹果的文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPopoverControllerDelegate_protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40009307)

# opennlp - 我想获取 parseTree 的节点

> ID：15652482
> 
> 赞同：1
> 
> 时间：2013-03-27T05:29:29.997
> 
> 标签：opennlp

这是我的代码的一部分：

```
String sentence = "系统不要求用户根据特定条件搜索书籍并检查特定书籍的可用性。但是要检查书籍，检查他们各自的书籍借阅状态，并暂停已经出借的书籍，用户必须首先向系统表明自己的身份。”；

解析 topParses[] =ParserTool.parseLine(sentence, parser, /*numParses=*/ 3);

for (解析 parseTree: topParses){

parseTree.show();

```

我怎样才能得到句子中的动词？请！

我的意思是，我怎样才能得到树的节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T12:14:43.150

如果您正在寻找动词*短语*，请使用 Chunker，如果您只需要动词，请使用 POS 标记器。查看此答案 [如何使用 Open nlp 的分块解析器提取名词短语](https://stackoverflow.com/questions/14708047/how-to-extract-the-noun-phrases-using-open-nlps-chunking-parser/20601852#20601852)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T14:26:49.740

如果只需要从句子中获取动词，那么opennlp中的POSTagger就足够了。您所要做的就是使用Opennlp分词器获取数组中的令牌并将其提供给POSTaggerME。它会给你相应的POS标记..然后您可以按 VB、VBZ 等动词的标记进行过滤。

# matlab - 内矩阵维度必须一致错误

> ID：15652488
> 
> 赞同：0
> 
> 时间：2013-03-27T05:29:50.140
> 
> 标签：matlab

我有一段代码，在其中我将数组值保存到 .txt 文件中，然后在另一个函数中，我必须将这些值从 .txt 检索到数组中......代码看起来有点像这样......

```
fid = fopen('c:\\coeffs2.txt','wt'); 
fprintf(fid,'%f\n',descr2);
fclose(fid); 
```

在另一个文件中，我以这种方式检索它..

```
fid = fopen('c:\\coeffs2.txt'); 
des2= [];
des2 = fscanf(fid,'%f\n'); 
fclose(fid); 
```

我得到错误，因为内部矩阵维度必须同意......请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:38:53.237

您确定这些行是产生该错误的行吗？究竟发生错误的行是什么？通常，如果您在打算对非方阵`*`进行逐元素乘法 ( ) 时进行（例如）矩阵乘法 ( )，就会发生这种情况......`.*`

您可以使用`save('c:\\coeffs2.mat', 'descr2');`and`load('c:\\coeffs2.mat');`作为替代（更有效）的方式来存储/检索矩阵，并确保您没有更改维度。

您是否尝试`size(descr2)`在保存之前和检索之后查看提供了什么？也许你只需要一个`resize`...

# c++ - 切换到 /MT 后的 C++ 链接问题

> ID：15652490
> 
> 赞同：1
> 
> 时间：2013-03-27T05:30:10.473
> 
> 标签：c++, c, visual-c++

我正在研究应该在任何 Windows NT 机器上运行的应用程序。今天我试图在新机器上部署我的应用程序并突然得到`msvcp100.dll`丢失的错误。我已经开始深入研究这个问题并找到了解决方案。只有我必须做的是在项目配置中更改`Run time library`From`/MD`到`Multi-threaded (/MT)`.

但切换到当前模式后，我收到链接错误。不知道为什么以及如何解决它。你能帮我弄清楚吗？谢谢！

![在此处输入图像描述](../Images/93b032bf242ea5fcaab37d0f0d40c567.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T05:35:05.070

您不应该部署调试版本。使用发布设置（包括运行时库的发布版本）进行编译，您将不会遇到这个问题。（您可以在发布版本中启用调试信息......它使用会导致问题的调试库）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T05:35:14.513

错误来自在调试模式下编译时，您需要更改项目以链接到与调试库的链接，即**`msvcmrtd.lib`**代替`msvcmrt.lib`和**`msvcrtd.lib`**代替`msvcrt.lib`

将调试二进制文件部署到其他机器可能/将导致运行时问题，尽管由于 DLL 的调试版本不是（afaik）可再分发的，您可能想要做的是修复您的发布版本。

# ms-access - 可视化开发，Web/Mobile 等 MS Access 工具

> ID：15652495
> 
> 赞同：0
> 
> 时间：2013-03-27T05:30:52.367
> 
> 标签：ms-access, web-applications, mobile

是否有类似于 MS Access 但用于 Web 的工具。这将允许用户在可视化环境中创建业务线应用程序和报告应用程序，同时还支持脚本/编程环境？

注意：总的来说，我不是 MS Access 的粉丝，但在许多情况下，它显示出一种非常有效的方式，让用户自己操作数据、屏幕和报告，并帮助他们完成需要编程的最困难的部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:06:11.270

我一直在寻找类似于 MS Access 的东西。很长一段时间以来，我一直使用 access 来构建数据采集工具，其工作方式与 lab-view 的工作方式类似。我发现访问的优势在于表单设计器、查询设计器以及它在 .adp 模式下使用 MSSQL 的能力。它还能够使用 MS office 中的其他组件和其他基于 com 对象模型的库等。即时模式允许非常快速地测试 vba 代码。我无法在 Visual Studio VB.net 或迄今为止我尝试过的任何 IDE 中高效地工作。但是我不是计算机科学专家，所以我希望有人比我有更多的知识。

到目前为止，我见过的最接近的工具是 Alpha 5 v11 和 RAD Studio X3 Delphi。我查看了 Limnor Studio VS，MS Light-switch。我尝试了 Python，但在 Access 中找不到 GUI 工作。我的大部分用途是通过 LAN 或 GPIB 控制设备，并从中提取数据以供以后绘图或其他分析。

我很想听到更多的可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:37:24.963

也许你应该看看[Morfik](http://morfik.com/) ( [http://morfik.com/](http://morfik.com/) )。

如果您熟悉 Access 中的方式，您很快就会找到 Morfik。

你可以用 Java、C#、BASIC 和 Object Pascal 编写你的东西。将其部署为网站将很容易，并且 UI 非常漂亮。

网上有很多视频演示了它是如何工作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T21:43:56.087

您可能想查看[m-Power](http://www.mrc-productivity.com/)。我不会将它与 MS Access 进行比较，但它可以让用户在可视化环境中创建业务线应用程序和报表应用程序。

# java - android中achartengine中曲线下的着色区域

> ID：15652497
> 
> 赞同：3
> 
> 时间：2013-03-27T05:31:07.577
> 
> 标签：java, android, charts, android-canvas, android-view

如何为 android的[achartengine蠕虫图线中的曲线下区域着色。](http://www.achartengine.org)![在此处输入图像描述](../Images/a84ed28a86ded4f4ded7c7c89ad76bb8.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T19:59:02.883

这应该很简单：

```
FillOutsideLine fill = new FillOutsideLine(FillOutsideLine.Type.BOUNDS_ALL);
fill.setColor(Color.GREEN);
seriesRenderer.addFillOutsideLine(fill); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T08:47:03.353

FillOutsideLine fill = new FillOutsideLine(FillOutsideLine.Type.BOUNDS_ALL);

填充.setColor(Color.BLUE);

seriesRenderer.addFillOutsideLine(fill);

# sql-server - SQL Server - 仅用于数字和加号的模式匹配

> ID：15652500
> 
> 赞同：0
> 
> 时间：2013-03-27T05:31:23.907
> 
> 标签：sql-server, function, design-patterns

我正在使用以下功能来清理电话号码字段：

```
CREATE Function [fnRemoveNonNumericCharacters](@strText VARCHAR(1000))
RETURNS VARCHAR(1000)
AS
BEGIN
    WHILE PATINDEX('%[^0-9]%', @strText) > 0
    BEGIN
        SET @strText = STUFF(@strText, PATINDEX('%[^0-9]%', @strText), 1, '')
    END
    RETURN @strText
END 
```

我将如何修改上面的模式，以便将`+`符号视为可接受的字符（对于国际号码）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:49:42.433

使用 '%[^0-9+]%' 作为模式。但是，这将允许数字中的任何位置出现加号。您真正应该做的是测试第一个字符是否为“+”，如果是，只需将其添加到经过处理的数字前面即可。这是我的实现：

```
CREATE Function [fnRemoveNonNumericCharacters](@strText VARCHAR(1000))
RETURNS VARCHAR(1000)
AS
BEGIN
    declare @index int
    declare @hasPlus bit

    set @strText = LTRIM(@strText)

    if( '+' = left(@strText, 1) )
    begin
        set @hasPlus = 1
    end
    else
    begin
        set @hasPlus = 0
    end

    set @index = PATINDEX('%[^0-9]%', @strText)

    WHILE @index > 0
    BEGIN
        SET @strText = STUFF(@strText, @index, 1, '')

        set @index = PATINDEX('%[^0-9]%', @strText)
    END

    if( 1 = @hasPlus )
    begin
        set @strText = '+' + @strText
    end

    RETURN @strText
END 
```

# android - 在android中使用蓝牙（BluetoothShare.java）传输多个文件

> ID：15652502
> 
> 赞同：2
> 
> 时间：2013-03-27T05:31:58.793
> 
> 标签：android, file, bluetooth, transfer

我正在使用以下代码使用蓝牙传输文件而无需用户交互，如何使用此代码传输多个文件`BluetoothShare.java`：

```
String filePath = Environment.getExternalStorageDirectory().toString() + "/test.mp3";
ContentValues values = new ContentValues();
values.put(BluetoothShare.URI, Uri.fromFile(new File(filePath)).toString());
values.put(BluetoothShare.DESTINATION, device.getAddress());
values.put(BluetoothShare.DIRECTION, BluetoothShare.DIRECTION_OUTBOUND);
Long ts = System.currentTimeMillis();
values.put(BluetoothShare.TIMESTAMP, ts);
Uri contentUri = getContentResolver().insert(BluetoothShare.CONTENT_URI, values); 
```

# python - 在折线图中放置一个间隙/中断

> ID：15652503
> 
> 赞同：14
> 
> 时间：2013-03-27T05:32:05.353
> 
> 标签：python, matplotlib

我有一个具有有效“连续”传感器读数的数据集，偶尔会有间隙。

然而，有几个时期没有记录数据。这些差距明显长于采样周期。

默认情况下，pyplot 将每个数据点连接到下一个数据点（如果我设置了线型），但是我觉得当它连接长间隙两侧的两个数据点时，这有点误导。

我宁愿那里没有线；也就是说，我希望线路停止并在间隙后重新开始。

我尝试使用 y-value 在这些间隙部分中添加一个元素`None`，但似乎将该线发送回绘图的较早部分（尽管奇怪的是这些线并未出现在所有缩放级别）。

我想到的另一个选择是通过单独调用来简单地绘制每个部分`plot`，但这会有点丑陋和麻烦。

有没有更优雅的方法来实现这一点？

编辑：下面是一个演示行为的最小工作示例。第一个情节是我试图避免的连接线。第二个图显示添加一个`None`值似乎有效，但是如果您平移图的视图，您会得到第三个图中所示的内容，一条线跳转到图的较早部分。

```
import numpy as np
import matplotlib.pyplot as plt

t1 = np.arange(0, 8, 0.05)
t2 = np.arange(10, 14, 0.05)
t = np.concatenate([t1, t2])
c = np.cos(t)

fig = plt.figure()
ax = fig.gca()
ax.plot(t, c)
ax.set_title('Undesirable joining line')

t1 = np.arange(0, 8, 0.05)
t2 = np.arange(10, 14, 0.05)
c1 = np.cos(t1)
c2 = np.cos(t2)
t = np.concatenate([t1, t1[-1:], t2])
c = np.concatenate([c1, [None,], c2])

fig = plt.figure()
ax = fig.gca()
ax.plot(t, c)
ax.set_title('Ok if you don\'t pan the plot')

fig = plt.figure()
ax = fig.gca()
ax.plot(t, c)
ax.axis([-1, 12, -0.5, 1.25])
ax.set_title('Strange jumping line')

plt.show() 
```

![情节 3，](../Images/a667561676a6d5d0c9e8090c887409eb.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-27T15:53:00.813

掩码数组适用于此。您只需要掩盖您不想连接的第一个点：

```
import numpy as np
import numpy.ma as ma
import matplotlib.pyplot as plt

t1 = np.arange(0, 8, 0.05)
mask_start = len(t1)
t2 = np.arange(10, 14, 0.05)
t = np.concatenate([t1, t2])
c = np.cos(t)     # an aside, but it's better to use numpy ufuncs than list comps

mc = ma.array(c)
mc[mask_start] = ma.masked
plt.figure()
plt.plot(t, mc)
plt.title('Using masked arrays')

plt.show() 
```

![在此处输入图像描述](../Images/0684b542ccc60bebfb43f67259fbd21e.png)

至少在我的系统（OSX、Python 2.7、mpl 1.1.0）上，平移等没有任何问题。

# php - 将 JS RegEx 转换为 PHP 不起作用

> ID：15652509
> 
> 赞同：0
> 
> 时间：2013-03-27T05:33:00.710
> 
> 标签：php, javascript, jquery

我有这个 JS/jQuery：

```
$(this).text().replace(/([^\s]+)/, day); 
```

它取了一条线`MAR/26/2013 05:00 PM`并将其转换为`05:00 PM`.

但是由于某种原因，这个 PHP 没有做适当的替换：

```
$time = preg_replace('/([^\s]+)/', '', $dateStr); 
```

相反，我留下了一个包含一个空格的字符串。

我完美地转换了我的所有代码，直到上述行。`$(this).text()`具有与 相同的值`$dateStr`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:39:09.127

如果您`$dateStr`将始终采用该格式并且您只想要下午 5:00 组件，请尝试：

```
$dateStr= "MAR/26/2013 05:00 PM";
$time = explode(" ", $dateStr);
echo $time[1]." ".$time[2]; 
```

# mysql - 为什么在重新同步 mysql slave 时发出“reset master”

> ID：15652510
> 
> 赞同：3
> 
> 时间：2013-03-27T05:33:01.303
> 
> 标签：mysql, replication, binlog

我最近需要执行一些数据库重新同步，并且有一个关于（似乎是）在将数据库转储到主服务器之前发出“RESET MASTER”的常见做法的问题。

在从主数据库转储数据库之前，我发现的围绕此过程的几乎所有文档都有一个“RESET MASTER”。

示例：[https ://stackoverflow.com/a/3229580/1570785](https://stackoverflow.com/a/3229580/1570785)

然而，在生产环境中，这似乎适得其反，主要是因为“RESET MASTER”命令会清除现有的二进制日志。因此，如果在复制中断时您的主服务器出现问题，您最终会得到一个不一致/损坏的主服务器*和*一个不同步的从服务器。

鉴于首先需要执行此过程（即 mysql 复制出现问题），仅仅因为从站需要清除二进制日志（可用于从 COMPLETE 灾难中恢复）似乎是不明智的重新同步。

我真正要问的是：我错过了什么 - 在从主站转储之前执行“重置主站”是否有正当理由？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-11T10:35:11.250

这不是必需的。如果您使用 mysqldump 创建转储，请添加以下选项： `--single-transaction`- 不锁定 innodb 表并创建一致的快照。 `--master-data`- 添加主服务器的二进制日志位置，该从服务器应该开始复制。

# javascript - Javascript 启用，禁用仅具有 Java 代码的 JSP 文件中的下拉菜单，直接没有 HTML

> ID：15652513
> 
> 赞同：2
> 
> 时间：2013-03-27T05:33:21.797
> 
> 标签：javascript, jsp

让我介绍一下设计。

JSP 中的每个字段都由`Map`. 标签名称、输入类型（下拉或其他）、输入值、默认值等被添加到`Map`.say中`Map nameAttributes`。还有另一个类，`GeneralWriter writer`我无权访问，它从 中获取值`Map`，解析它们并编写正确的 HTML 代码。

写完 Map 后，`writer.writeSelectBox(nameAttributes);`被调用。

现在，要求是：
有一个下拉菜单，根据其选择的值，其他一些下拉菜单被禁用（显示在 UI 中，但不可修改）或启用。因为，我没有为添加的字段编写 HTML 代码，所以我无法编写函数调用事件来完成我的工作。

我观察到一个 JS 函数在`onMouseOut`来自字段的事件上被调用，如`"View Source"`. 所以我想我可能会在那里编写代码来检查字段值并影响其他下拉菜单。但是如果我写`alert`在 JS 函数中（只是为了检查），它不会提醒我，这意味着该函数没有被调用，我无法编写启用/禁用代码。

有什么办法可以完成工作。启用和禁用应取决于用户在其中一个下拉菜单中选择的内容。

示例代码：

```
<%
Map nameAttr = new HashMap();   
nameAttr.put(GeneralConst.INPUT_MESSAGE, Const.MSG_FIELD_NAME);
//.....

writer.writeAllSelectBox(nameAttr);
%> 
```

急需帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:10:23.333

在 JSP 页面的 View Source 中，很明显为某些字段添加了 onChange 和 onMouseOut 事件等，并且在`GeneralWriter`类中，这些内容被写入到 out 流中，如下所示

```
out.println("<td nowrap><select name=" + strName);
out.println(" style=\"width:" + strWidth + "px\"");
out.println(" onChange ="+onChange); 
```

因此，我在那里添加了自己的方法，而不是使用现有代码并引入了 onChange 事件。`onChange`您看到的“ ”变量（右侧）是`java.lang.String`类型，它必须从 JSP 本身传递，至于我想要什么行为或为特定 JSP 调用哪个特定函数。

现在我在 JSP 中添加了以下内容

```
<body>
  <script>
    window.onload = setModeForPara2('MEMBERTYPE','MEMBERSTATE','CKSTATUS') ;
    function resetevent(uri){
      setModeForPara2('MEMBERTYPE','MEMBERSTATE','CKSTATUS') ;
    }
  </script>
</body> 
```

其中参数是下拉菜单的名称，并且`setModeForPara2()`是禁用/启用的 JS 函数，因为我的要求在原始帖子中已说明。它检查 MEMBERTYPE 是否为 0，然后将禁用状态和灰色渲染到 MEMBERSTATE 和 CKSTATUS 下拉菜单，否则启用它们并删除灰色。
这`resetevent(uri)`也是一个 JS 函数，当点击 Reset 按钮时，将禁用状态渲染到 State 和 Status 字段。

这样一来，`setModeForPara2()`只要：
1\. 加载页面，
2\. 更改第一个下拉列表 (MEMBERTYPE) 的值，以及
3\. 单击重置按钮，就会调用函数。

解决。

# android - 在 Android 中，如何将表面传递给 MediaCodec::configure API

> ID：15652518
> 
> 赞同：2
> 
> 时间：2013-03-27T05:34:42.713
> 
> 标签：android, android-layout

我正在尝试使用API创建一个简单的视频播放`MediaExtractor`器。`MediaCodec`

我能够提取 TS（传输流）文件的各个轨道。我还能够创建解码器并对其进行配置，并能够解码内容。

当我想在 a 上渲染视频时`surface`，我知道我们应该将表面作为参数提供给`MediaCodec.configure`.

```
status_t MediaCodec::configure (MediaFormat format, Surface surface, MediaCrypto crypto, int flags) 
```

现在，我找不到任何关于如何创建 a`surface`并将其传递给`configure`函数的示例。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-22T09:56:19.030

首先将 TextureView.SurfaceTextureListener 实现为：

```
public class MainActivity extends AppCompatActivity implements  TextureView.SurfaceTextureListener {

private TextureView m_surface;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    m_surface = (TextureView)findViewById(R.id.textureView);
    m_surface.setSurfaceTextureListener(this);
} 
```

现在像这样将 Surface 传递给 MediaCodec

```
m_codec.configure(format,new Surface(m_surface.getSurfaceTexture()), null, 0); 
```

# c++ - 如何在Linux中检查CD驱动器是打开还是关闭？

> ID：15652520
> 
> 赞同：8
> 
> 时间：2013-03-27T05:35:09.653
> 
> 标签：c++, c, linux, cd-drive

我正在制作一个需要知道 CD 驱动器是打开还是关闭的应用程序。

`eject`打开 CD 驱动器，并检查打开所需的时间（较短的时间表示它已打开，而较长的时间，嗯......），但我不能使用这种技术，因为应用程序实际上会打开驱动器（而且我如果驱动器已关闭，我不想重新打开它，如果驱动器打开，我也不想关闭它）。

我将如何在 linux 上执行此操作？我看到可以在 Windows 下执行此操作（尽管可能是错误的），但我还没有看到在 linux 上执行此操作的方法。

如果无法使用 linux API 调用，是否可以实现可以做到这一点的低级函数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-04T10:59:14.230

要使示例代码正常工作，您应该这样做：

```
#include <sys/ioctl.h>
#include <linux/cdrom.h>

int result=ioctl(fd, CDROM_DRIVE_STATUS, CDSL_NONE);

switch(result) {
  case CDS_NO_INFO: ... break;
  case CDS_NO_DISC: ... break;
  case CDS_TRAY_OPEN: ... break;
  case CDS_DRIVE_NOT_READY: ... break;
  case CDS_DISC_OK: ... break;
  default: /* error */
} 
```

即结果作为 ioctl() 函数结果返回，而不是作为槽参数返回。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-27T06:41:05.803

您可以使用`CDROM_DRIVE_STATUS`ioctl 获取托盘状态。CD 驱动器的所有 ioctl 都可以在`/usr/include/linux/cdrom.h`

```
#define CDROM_DRIVE_STATUS      0x5326  /* Get tray position, etc. */ 
```

取自[这里](http://www.mjmwired.net/kernel/Documentation/ioctl/cdrom.txt)

```
int slot;
ioctl(fd, CDROM_DRIVE_STATUS, slot);

switch(slot) {
  case CDS_NO_INFO: ... break;
  case CDS_NO_DISC: ... break;
  case CDS_TRAY_OPEN: ... break;
  case CDS_DRIVE_NOT_READY: ... break;
  case CDS_DISC_OK: ... break;
  default: /* error */
} 
```

# android - Android从外部存储读取html文件

> ID：15652524
> 
> 赞同：1
> 
> 时间：2013-03-27T05:35:21.727
> 
> 标签：android, android-webview

我正在尝试在 /storage/sdcard0/... 中显示 html 文件

```
WebView engine = (WebView) (findViewById(R.id.webView1));
engine.setWebViewClient(new WebViewClient());
engine.loadUrl(Environment.getExternalStorageDirectory().getPath() + "testing.html"); 
```

但网页无法显示....有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T05:42:00.643

解决了！！！应该在前面添加“file:///”=]=]

```
engine.loadUrl("file:///" + 
Environment.getExternalStorageDirectory().getPath() + 
"testing.html"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T05:44:15.463

利用

```
engine.loadUrl("file:///"+Environment.getExternalStorageDirectory().getAbsolutePath() + "testing.html"); 
```

# php - 上传图片不在文件夹中移动

> ID：15652529
> 
> 赞同：0
> 
> 时间：2013-03-27T05:36:41.130
> 
> 标签：php, codeigniter, file-upload

我的网站有问题

当我将图像上传到我的网站时，图像成功到数据库但无法移动到图像文件夹

```
$config = array(

'allowed_types'=>'jpg|jpeg|gif|png|bmp',

'upload_path'=>base_url().'webroot/img/barang',

'max_size'=>'5000'
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:35:26.370

上传后，执行以下操作：

`print_r($this->upload->data());`

这将向您准确显示上传过程完成后您拥有的数据。如果您在那里没有发现任何问题，则可能是@AmitHorakeri 在上面的评论中所说的：权限。

希望这可以帮助。

# javascript - 如何在 Javascript 上添加值？

> ID：15652530
> 
> 赞同：0
> 
> 时间：2013-03-27T05:36:41.583
> 
> 标签：javascript

我是这方面的初学者，想知道我是否可以添加这两个值

```
maxScreenWidth: 480,
menuTitle: 'Menu:' 
```

进入这个脚本。

```
function DropDown(el) {
    this.mainNav = el;
    this.initEvents();
}
DropDown.prototype = {
    initEvents: function () {
        var obj = this;

        obj.mainNav.on('click', function (event) {
            $(this).toggleClass('active');
            event.stopPropagation();
        });
    }
}

$(function () {

    var mainNav = new DropDown($('#mainNav'));

    $(document).click(function () {
        // all dropdowns
        $('.dropdown-menu').removeClass('active');
    });

}); 
```

提前致谢。

*   此外，这是我应用到我的网站的下拉菜单。

[http://tympanus.net/Tutorials/CustomDropDownListStyling/index2.html](http://tympanus.net/Tutorials/CustomDropDownListStyling/index2.html)

我试图将此菜单仅应用于电话布局，但无论屏幕尺寸如何，它都会保持其形式。它应该在超过 480 像素时消失，但事实并非如此。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:47:04.947

如果要添加这些属性，只需像下面这样添加它们：

```
function DropDown(el, width, title) {
    this.mainNav = el;
    this.maxScreenWidth = width; //added
    this.menuTitle = title; //added
    this.initEvents();
} 
```

现在它们作为可传递参数成为构造函数的一部分

然后，当您调用构造函数时，只需传递这些值应该是什么

```
$(function () {
    var mainNav = new DropDown($('#mainNav'), 480, 'Menu'); //See, pass them here.

    $(document).click(function () {
        // all dropdowns
        $('.dropdown-menu').removeClass('active');
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:24:16.773

您可以将此值添加为 Christoper 所写的 DropDown 参数，也可以创建全局变量：

```
var maxScreenWidth = 480;
var menuTitle = 'Menu:';
function DropDown(el) {
    this.mainNav = el;
    this.initEvents();
}
//... 
```

但是，如果你把它写在你的 js 文件中，其他代码可以访问和更改你的全局变量（它们毕竟是全局的 :)），所以这种技术存在：

```
(function ($) {
    var maxScreenWidth = 480;
    var menuTitle = 'Menu:';
    function DropDown(el) {
        this.mainNav = el;
        this.initEvents();
    }
    //...
}(jQuery)); 
```

在最后一个示例中，您正在创建具有“私有范围”的函数，因此您的“私有”变量无法从其他 js 代码访问。您还应该注意，您无法从应用程序中的其他代码访问 DropDown，只能在此函数中访问。

# performance - 如何确定网站速度慢的原因？

> ID：15652531
> 
> 赞同：22
> 
> 时间：2013-03-27T05:36:44.517
> 
> 标签：performance, web, slowdown

我曾经在一次采访中被问到这个问题：

*“假设您拥有一个网站，其服务器位于某个远程位置。有一天，一些用户致电/发送电子邮件说您的网站速度非常慢。您如何确定网站速度慢的原因？另外，当您自己检查网站时任何用户都会（使用您的浏览器），该网站表现得很好。”*

我只能想到一件事（被击落）：

*   检查服务器日志以分析传入流量。可能是 DoS 攻击或异常高的流量。面试官告诉我假设服务器流量正常，没有 DoS。

我有点迷茫，因为我从来没有想过这个问题。我几乎不知道运行服务器/网站是如何工作的。因此，如果有人可以强调一些方法，那就太好了。

在谷歌搜索时，我只能找到[这篇相关的、精彩的文章](http://samsaffron.com/archive/2011/05/02/A+day+in+the+life+of+a+slow+page+at+Stack+Overflow#)。那篇文章现在对我来说有点太技术性了，但我正在慢慢分解并理解它。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-27T18:01:22.813

由于您在自己检查网站时已经说过速度很好，这意味着（至少对于您检查的页面）服务器没有任何问题，它可以以良好的速度为这些页面提供服务。此时您应该弄清楚的是，您与报告您的网站速度慢的用户之间的区别是什么。可能有很多不同的东西：

*   用户是否使用慢速网络连接（例如移动设备）？
*   用户在同一虚拟主机上托管的其他网站是否遇到同样的问题？如果是这样，这可能表明存在网络问题。通常这也可能表明网络服务器存在资源问题，但在这种情况下，站点对您来说也会很慢。
*   如果以上都没有导致答案，您可以假设与服务器的连接和服务器本身都很好。这意味着问题必须在用户设备中。找出他使用的浏览器/操作系统并尝试复制问题。如果失败，请查明他是否使用了任何可能导致问题的防病毒软件或类似软件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-27T05:49:30.383

这是一个很好的工具来查找网页的速度并告诉你是什么让它变慢：[https ://developers.google.com/speed/pagespeed/insights](https://developers.google.com/speed/pagespeed/insights)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-13T05:29:11.417

我认为上述答案中缺少的重要一点是服务器位置，它对 Web 性能至关重要。

当有人说打开网页需要更长的时间时，这意味着高延迟。服务器位置可能会导致高延迟。假设您是网页的所有者，那么服务器和客户端位于同一位置，因此延迟较低。

但是，现在如果客户端越过边界，那么延迟时间将急剧增加。因此性能缓慢。

另一个因素是缓存，它极大地影响了延迟时间。

以 facebook 为例，他们在世界各地都有服务器以减少延迟时间（并提供其他几个优势），他们使用巨大的缓存系统来缓存他们的热门数据（热门话题）而冷数据（旧数据）是存储在硬盘中，因此加载较旧的照片或帖子需要更长的时间。因此，用户可能会在尝试加载一些冷数据时抱怨这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-02T20:20:55.293

我能想到这几个原因（前两个上面已经提到过）：

1.  由于客户端位置的高延迟
2.  服务器内存可能需要增加
3.  来自页面的服务调用次数。
4.  如果在投诉时服务可能会关闭，它可能会阻止页面加载。
5.  体验不佳时服务器负载可能过高。服务器可能需要增加资源（例如向集群添加另一个服务器/Web 服务器）。
6.  检查当时服务器上是否有任何后台作业正在运行。

检查批处理作业的日志和计划以确定当时正在运行的内容非常重要。

希望这有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-14T16:38:11.613

显然，连接到您网站的人的连接存在问题，或者这可能是一个暂时的问题，当您检查您的网站时，一切都很好。您可以检查您的日志或询问您的主机在发生减速时是否存在问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-27T17:26:27.520

一个原因可能是用户的角色与您的角色不同。您可能假设拥有管理员权限（例如超级用户角色），并且代码可能只是允许此类角色的所有内容，这意味着它实际上并没有做太多的条件检查来查看允许或不允许的内容。有时，获得用户的所有权限并进行条件检查是相当超前的，当然取决于如何实施授权。这意味着，对于特定角色，页面可能真的很慢。因此，您应该找出用户的角色，看看这是否是一个原因。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-27T05:50:08.807

通常，用户将页面加载时间作为衡量网站是否运行缓慢的指标。但是如果你真的想知道什么是最长时间，你可以按 f12 打开浏览器调试器。如果您的浏览器是 chrome，请点击网络并查看您的应用程序正在进行哪些调用以及哪些调用需要最长时间。如果您使用的是 Firefox，则需要安装 firebug。如果有，请再次按 f12 并单击 Net。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-02T23:02:23.903

尽管您的问题很清楚，但网站优化是一个非常广泛的主题。

大多数流行的 Web 开发框架由于某种原因，处理器效率极低。

开发 n 层 Web 应用程序的老式方法仍然非常重要，并且仍然被认为是 W3C 的最佳实践。如果您花一点时间阅读最流行的 Web 开发框架的源代码结构，您会发现它们在服务器上运行的代码比所需的要多得多。

这似乎是一个简单的答案，但是，您在服务器上运行的代码越少，在客户端运行的代码越多，服务器运行的速度就越快。有时将框架代码与老式方式进行对比是了解这一点的最佳方式。这是一个完整工作的迷你 Web 应用程序的链接，它代表 W3C 最佳实践，在服务器上运行最少的代码，在客户端运行最多的代码：http: [//developersfound.com/W3C_MVC_EX.zip](http://developersfound.com/W3C_MVC_EX.zip)这个代码库是也符合 MVC。

该代码库带有 MySQL 数据库转储、php 和客户端代码。要查看此代码的运行情况，您需要将 SQL 转储恢复到 MySQL 实例（sql 转储来自 MySQL 8 社区）并添加在 php 文件 (conn_include.php) 中找到的用户和模式权限；将用户设置为对架构具有执行权限。

如果您将此代码库与所有最流行的 Web 框架进行对比，您会真正看到这些框架是多么低效。声称是 MVC 框架的流行 PHP 框架实际上根本不兼容 MVC。这是因为它们依赖于将 PHP 标记嵌入 HTML 标记或反之亦然（根据 W3C 被认为是非常糟糕的做法）。此外，大多数流行的节点框架在服务器上运行的代码比所需的要多。除非框架支持 AJAX 转储，例如 Yii 2，否则嵌入式标签也会阻止异步调用正常工作。

遵守 MVC 的两个最重要的规则是：永远不要在 HTML 标签中嵌入服务器端标签（例如 PHP 标签）或反之亦然（除非有很好的借口，例如 SEO），并且从不编写代码来运行如果它可以在客户端运行，则在服务器上。同样，真正的 MVC 基于层分离，而 MVC 框架基于代码分离。真正的 MVC 合规性是非常高效的处理器。不要误解我的意思 MVC 框架对很多事情都非常有用，但是如果你正在开发一个将获得数百万点击的网站，它们就毫无用处，或者至少它们会让你的云计算费用如此之高它真的会侵蚀你公司的利润。

总而言之，框架对在客户端或服务器上运行的代码没有给予太多控制，而且效率非常低，但是您可以用更少的代码更快地启动和运行原型。

相比之下，老式方式需要更多的麻烦，但您可以完全控制在服务器上运行的内容和在客户端运行的内容。

作为优化的附加建议，请避免使用传递查询和触发器，而是选择存储过程。历史上存储过程在 MVC 作为一种范式出现时并没有被发明出来，但它确实增加了层之间的关注点分离，并且处理器效率更高。

希望这个建议有帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-11-20T02:09:23.450

这通常是内存问题，可以通过增加托管应用程序的 Web 服务器的堆大小来解决。如果应用程序在 Weblogic Server 上运行。堆大小可以在位于应用程序主页的“setEnv”文件中增加。祝你好运！迈克尔·奥雷贝

# html - HTML表格td显示

> ID：15652532
> 
> 赞同：0
> 
> 时间：2013-03-27T05:36:49.833
> 
> 标签：html, html-table

我有多个 HTML 表，其中嵌入了一些 Ruby 代码。如下所示：

```
<% loop-1 %>
<table>
   <tr>
     <td rowspan=" X ">abcd</td>
     <td>xyz</td>
    </tr>

    <% loop-2 %>
    <% if (condition) %>
    <tr>
      <td></td>
      <td>xyz1</td>
    </tr>
    <% end %>
    <% end %>
 </table>  
<% end %> 
```

所以如上所见，有多个基于loop-1生成的表。现在每个表将至少有一行。在第一行之后，还有另一个循环 2 和一些条件。每个表的第一行之后可能有可变数量的行。我希望第一个具有 rowspan(X) = no。该表的总行数。

例如。如果在第一行之后，loop-2 再生成 2 行，我想要 X=3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:36:24.183

你不能只使用 HTML 来做到这一点。唯一可能的方法是计算循环之前会发生多少*条件*。即提前执行相同的循环并在每次满足条件时增加 X。

# java - 如何在 Java 中缓存 SOAP 请求和响应

> ID：15652533
> 
> 赞同：0
> 
> 时间：2013-03-27T05:36:50.397
> 
> 标签：java, caching, axis2

是否有缓存 SOAP 请求和响应的机制，以便提高性能....

我们可以减少不必要的相同请求访问服务器以获取相同的响应。

顺便说一句，我将 AXIS2 用于带有 AXIOM 的 Web 服务。

等待您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:09:46.107

据我所知，在 中没有这样做的机制，但是您始终可以使用简单的地图或使用[guava-google 库](https://code.google.com/p/guava-libraries/wiki/CachesExplained)`AXIS`来构建自己的自定义缓存

# sql - SQL-ex.ru #26 从两个表中选择平均值

> ID：15652542
> 
> 赞同：2
> 
> 时间：2013-03-27T05:37:49.370
> 
> 标签：sql, join, union

[我对网站http://www.sql-ex.ru/](http://www.sql-ex.ru/)上的 sql 查询有疑问。查询要求：

> 定义制造商 A 生产的个人电脑和笔记本电脑的平均价格。

数据库架构如下：

```
Product(maker, model, type)
PC(code, model, speed, ram, hd, cd, price)
Laptop(code, model, speed, ram, hd, screen, price)
Printer(code, model, color, type, price) 
```

我将查询写为：

```
SELECT AVG(t.k) AS Avg_Price
FROM
  (SELECT AVG(A.price) AS k
    FROM PC A 
  JOIN Product B ON(A.model=B.model)
  WHERE B.maker='A'
  UNION ALL
  SELECT AVG(C.price) AS k
     FROM Laptop C
  JOIN PRODUCT D ON(C.model=D.model)
  WHERE D.maker='A') AS t 
```

问题是它没有返回正确的答案。平均回报远高于预期。计算平均值的方式是否错误？如何更改查询以使其返回预期的答案？任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T06:10:03.953

您分别计算个人电脑价格和笔记本电脑价格的平均值，然后将平均值放在一起。您的查询很好，只是您不应该对子查询中的价格进行平均。只需返回子查询中的价格和顶层的平均值：

```
select
    AVG( Price ) Avg_Price
from
(
    (
        select
            pc.Price
        from
            PC pc
            join Produt prod
             on pc.Model = prod.Model
        where
            prod.Maker = 'A'
    )
    union all
    (
        select
            pc.Price
        from
            Laptop l
            join Produt prod
             on l.Model = prod.Model
        where
            prod.Maker = 'A'
    )
) q 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-20T08:13:43.183

```
SELECT AVG(datatable.price) FROM
(
(SELECT PC.Price FROM PC INNER JOIN Product p1 ON PC.model=P1.model     
     WHERE P1.maker='A') 
UNION ALL 
(SELECT Laptop.price FROM Laptop INNER JOIN Product p2 ON 
    Laptop.model=P2.model WHERE P2.maker='A')
) datatable 
```

正确的。

**您的查询结果：**

> 平均价格
> 
> 754.1666

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T06:09:14.620

你的查询是错误的。它通常就像您如何在分布式系统上进行聚合一样。您可以在分布式节点上进行聚合，然后带回聚合数据并在返回数据的顶部进行 agg，除非聚合是可转移的。**AVG**不可传输。(1+2+3+4+5)/5 <> ((1+2)/2 + (1+2+3)/3)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-03T06:28:20.427

它也有效

```
SELECT Avg(price) AS avg_price
FROM   (SELECT pc.price
        FROM   pc
               INNER JOIN product
                       ON pc.model = product.model
        WHERE  maker = 'A'
        UNION ALL
        SELECT laptop.price
        FROM   laptop
               INNER JOIN product
                       ON laptop.model = product.model
        WHERE  maker = 'A') Any_name 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-14T10:09:01.053

```
with t1 as
(SELECT price, type from pc left join product on product.model = pc.model where maker = 'A'
UNION ALL
SELECT price, type from laptop left join product on product.model = laptop.model where maker = 'A')
select avg(price) from t1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-27T06:13:21.547

```
SELECT AVG(resultList.Price)
FROM
    (
        SELECT  a.Price
        FROM    PC a INNER JOIN Product B 
                    on a.Model = B.Model
        WHERE   B.Maker = 'A'
        UNION ALL
        SELECT  c.Price
        FROM    Laptop c INNER JOIN Product d 
                    on c.Model = d.Model
        WHERE   d.Maker = 'A'
    ) resultList 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-17T05:20:12.637

我总是与 JOINS（个人）有很大的斗争，所以试试这个没有加入的解决方案。使用 IN 运算符

```
with cte as (
    SELECT price, model, code 
    FROM pc 
    WHERE model 
    IN (SELECT model FROM product WHERE maker = 'A')
UNION
    SELECT price, model, code 
    FROM laptop 
    WHERE model 
    IN (SELECT model FROM product WHERE maker = 'A')
)

SELECT AVG(price) FROM cte 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-08T09:34:08.863

```
select AVG(P.price) as avg_price
from
(
 select price, model from PC
 UNION ALL
 select price, model from Laptop
) P
join Product ON P.model = Product.model
where maker = 'A' 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-02-24T11:58:49.307

```
Select avg(price) from
       ((select price,model  from pc 
       union all
       select price,model from laptop) a inner join  product on product.model=a.model and product.maker='A' ) 
```

首先，我认为如果我`union` `price`和`model`两张桌子，然后我们可以`average(price)`从制造商 A那里找到会更好。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-05-07T17:55:02.827

```
SELECT AVG(price) FROM 
(
     SELECT PC.price, Product.maker FROM PC JOIN Product ON(PC.model=Product.model)
     UNION ALL
     SELECT Laptop.price, Product.maker FROM Laptop JOIN Product ON (Laptop.model = Product.model)
) T 
GROUP BY T.maker HAVING T.maker = 'A' 
```

它之所以有效，是因为首先您选择了所有笔记本电脑和个人电脑的价格，接下来您只选择制造商 = 'A' 的记录，最后一步是计算平均价格。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2019-05-03T06:32:19.473

```
select avg(price) as avg_price from
(select price
from Product, PC
where Product.model = PC.model
and maker = 'A'
union all
select price
from Product, Laptop
where Product.model = Laptop.model
and maker='A') avg_price 
```

# spotify - 应用 API 1.0 的 Spotify 分页控件

> ID：15652550
> 
> 赞同：-1
> 
> 时间：2013-03-27T05:38:29.327
> 
> 标签：spotify

我在 Spotify App API 1.0 的文档中缺少用于分页的视图和样式表。我可以从哪里获得分页控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:10:40.667

在 Spotify API 0.X 中调用了一个组件`Pager`来完成此操作（请参阅[如何在 Spotify 应用程序 API 中创建类似“轮播”的小部件？](https://stackoverflow.com/questions/8850514/how-to-create-a-carousel-like-widget-in-spotify-apps-api)）。然而，该组件从未被公开记录，只有“最新消息”页面使用了它。

在 API 1.0 中，该组件终于被弃用了。

# java - Java，确保从arrayList中删除对象时正在删除

> ID：15652552
> 
> 赞同：2
> 
> 时间：2013-03-27T05:38:36.923
> 
> 标签：java, loops, arraylist, garbage

假设我正在删除一个名为“Enemy”的“死”对象。

使用这样的东西：

```
for(int i = 0; i < enemies.size(); i++)
    {
    Enemy en = (Enemy) enemies.get(i);
    if(en.getVisible() == true)
        en.update();
    else
        enemies.remove(i);
    } 
```

对象从 ArrayList 中删除后是否会被删除？还是“应该”？我以前主要做 C++ 代码，垃圾收集让我很困惑。

有什么方法可以查看垃圾收集器是否正在删除对象？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:43:01.363

如果您从 ArrayList 中删除一个对象，并且该对象没有任何其他引用，那么它将是垃圾收集器的“合格”。之后，您不必担心将其从堆中删除：JVM 会通过自动垃圾收集器来完成此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T05:40:43.080

我真的很喜欢看到 C/C++ 和 Java 的整个垃圾收集惨败的反面。Java 有自己的垃圾收集器，您无需担心内存管理 - .remove() 就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T05:43:04.307

我认为这取决于您如何输入对象。如果你将它保存在其他地方，它应该仍然存在，但是如果你直接将它添加到 arrayList 它可能是垃圾。

PS您的代码需要更正

```
enemies.remove(i);
enemies.remove(i--); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T05:53:37.843

接受我关于`ConcurrentModificationException`回来的评论。你不会得到它，但你的循环仍然不正确。看一看：

```
List<String> list = new ArrayList<String>(Arrays.asList("A","B","C","D"));
for (int i = 0; i < list.size(); i++) {
    String s = list.get(i);
    if ("B".equals(s) || "C".equals(s)) list.remove(i);
}
System.out.println(list); 
```

输出：

```
[A, C, D] 
```

`C`由于`i`总是增加和跳过元素，因此不会被删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T05:58:28.143

在大多数情况下，您无需担心 Java 中的显式内存管理 - 只要从列表中删除后没有其他对象引用它们，垃圾收集器就会（最终）删除它们。

如果`enemies`列表中的对象持有一些系统资源或其他需要明确处理的东西（比如文件句柄或其他东西），您需要在丢失引用之前清理它：

```
Enemy enemy = enemies.remove();
enemy.dispose(); // this is your method to clean up the internals - name it what you want
// continue your loop here 
```

在与您的示例代码相关的注释中，您需要使用一个`Iterator`而不只是一个 for 循环来迭代索引，这样您就可以`remove`正确地进行操作，而不会遇到当前索引和列表大小的问题。您可能还需要考虑不同的`List`实现（例如`LinkedList`，如果它很大，从中间插入/删除`ArrayList`可能会变得昂贵。

对于您的其他问题：

> 有什么方法可以查看垃圾收集器是否正在删除对象？

你可以[重写`finalize`](http://javarevisited.blogspot.ca/2012/03/finalize-method-in-java-tutorial.html)你的类的[方法](http://javarevisited.blogspot.ca/2012/03/finalize-method-in-java-tutorial.html)——但是当你这样做时[要小心。](https://stackoverflow.com/questions/5635749/what-is-the-use-of-overriding-the-finalize-method-of-object-class)另请注意，[无法保证](https://stackoverflow.com/a/5636351/836214)您的对象何时会被垃圾收集 - 不同的 JVM 通常管理内存略有不同，并且通常仅在需要更多内存时才进行垃圾收集。

# java - 使用 Java 中的代码弹出调试器

> ID：15652554
> 
> 赞同：3
> 
> 时间：2013-03-27T05:38:50.030
> 
> 标签：java, debugging, crash

我使用`abort()`In *C*使我的程序崩溃。调试器会捕获它。

也许Java中的等价物应该是例外。但是 Java 也有非常严格的异常链接策略，因此使用异常进行调试似乎不是一个好主意。

我应该在 Java 中为此使用什么？出于调试目的的故意程序崩溃，可以被调试器捕获。（我正在使用 Eclipse）

**更新**

如果代码可以在发布版本中选择退出，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T05:43:15.903

在 Eclipse 中，您可以设置调试点，并在调试模式下运行。

也就是说，a `CheckedException`（必须被调用函数捕获或向上传递）和`UncheckedException`（更接近你想要的）之间存在差异。如果您想强制崩溃，请抛出后者。

然而，这通常是一种糟糕的编程方式。使用替代方法来捕获所需的错误，您会发现更好的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T06:16:59.187

您可以使用`assert(false)`. 假设您使用 Eclipse 作为调试器，您可以[将 Eclipse 设置为中断特定异常](https://stackoverflow.com/questions/3066199/eclipse-break-when-exception-is-thrown)（在本例中为[`AssertionError`](http://docs.oracle.com/javase/7/docs/api/java/lang/AssertionError.html)）。确保[启用 assertions](https://stackoverflow.com/questions/5509082/eclipse-enable-assertions)，否则它不会做任何事情。

由于您必须明确告诉 JVM 启用断言，我认为这将算作*“可以在发布构建时选择退出的代码”。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T05:44:30.617

我不知道如何在 Eclipse 中处理它。但是，在 JDB 下，这可以通过捕获异常来完成。Eclipse 应该有这样的接口。

像这样使用命令行

```
"catch java.io.FileNotFoundException" 
```

详情请参考[这里](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/jdb.html)

# bash - 将文件中的分隔值读入数组变量

> ID：15652559
> 
> 赞同：0
> 
> 时间：2013-03-27T05:38:59.603
> 
> 标签：bash

我想读取 data.txt ，其中有一个 2x2 矩阵数，由制表符分隔，如下所示：

```
0.5 0.1
0.3 0.2 
```

有什么方法可以在 bash 中读取这个文件，然后将它存储到一个数组中，然后稍微处理它，然后再次将它导出到一个文件中？例如在 matlab 中：

```
a=dlmread('data.txt') //read file to array variable a
for i=1:2
   for j=1:2
   b[i][j]=a[i][j]+100
   end
end
dlmwrite(b,'data2.txt') //exporting array value b to data2.txt 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:56:12.547

如果您的处理范围很简单，例如向每个条目添加 100，那么像这样的简单`awk`命令可能会起作用：

```
awk '{ for(i = 1; i <= NF - 1; i++) { printf("%.1f%s", $i + 100, OFS); } printf("%.1f%s", $NF+100, ORS); }' < matrix.txt 
```

这只是遍历每一行并添加 100。也可以进行更复杂的操作，但如果你真的想要处理矩阵，有更好的工具（如`python`+`numpy`或`octave`）。

也可以使用`bash`数组，但要执行任何操作，无论如何您都必须使用外部程序，因为`bash`它不处理浮点运算。

# c - fgets() 陷入无限循环

> ID：15652563
> 
> 赞同：1
> 
> 时间：2013-03-27T05:39:27.917
> 
> 标签：c, fgets, string.h

如果我使用 fgets() 函数在整个文本文件中搜索特定分隔符，如何确保 fgets() 不会在 EOF 处无限循环？

我将从 delimiter1 到 delimiter2 的所有行连接到 struct1[i].string1 中，其中 i 是 delimiter1/delimiter2 模式的第 n 次出现。这种模式在整个文本文件中一直持续到最后，这里没有 delimiter2，而是 EOF。我也想连接从 delimiter1 到 EOF 的所有内容。

```
int i;
while(fgets(temp_string,100,inFile) != NULL){    
if(strcmp(temp_string,"Delimiter1")==0){ //checks to see if current line is delimiter1
        j=strcmp(temp_string,"Delimiter2");
        while(j!=0 && temp_string != NULL){ //Here I try to exit if it is the EOF
            fgets(temp_string,100,inFile);  
                 strcat(struct1[i].string1,temp_string);
                 j= strcmp(temp_string,"Delimiter2"); //update comparator           
        }
        i++;
    }

}   
} 
```

但是，当我尝试运行此代码时，我陷入了无限循环。我在内部 while 循环中放了一条打印语句，显示整数“i”是什么，它被困在数字 4 上，这是文本文件中 delimiter1 的总数，让我相信 EOF 给了我无限循环。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:02:05.863

无限循环的原因是内循环：

```
 while(j!=0 && temp_string != NULL){ //Here
       ^              ^ never set to NULL
       | never became 0 if  "Delimiter2" not found 
```

假设，如果 temp_string 中的值**不是** `"Delimiter2"`，那么您永远不会设置为`j`= 0 并且您也不会将 temp_string 设置为 NULL

您一次读取 temp_string `100`char ，因此`"Delimiter2"`可能会从具有其他一些章程的文件中读取，这就是 strcmp() 即使在读取时也不返回 0 的原因`"Delimiter2"`。

尝试通过 printf you temp_string 来修改你的代码。

此外，您可以使用`strstr()`函数代替在文件`strcmp()`中查找`"Delimiter2"`。如果在 temp_string 中找到任何位置，`strstr()`则返回有效地址，否则返回NULL。`"Delimiter2"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:05:23.810

感谢所有的投入。有人指出，在内部的while循环中

```
while(j!=0 && temp_string != NULL){ 
```

temp_string != NULL 从未被发现。将其更改为

```
!feof(inFile) 
```

解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T06:00:57.013

temp_string 是您的缓冲区，我猜它是预先分配的或在堆栈上，因此它不能为 NULL。这意味着内部循环永远不会停止。

您必须检查内部的返回码`fgets()`

# fullcalendar - fullcalendar：在周视图中获取选定的时间

> ID：15652564
> 
> 赞同：2
> 
> 时间：2013-03-27T05:39:32.660
> 
> 标签：fullcalendar

在周视图中，如果我选择一个时间段，我如何通过单击按钮获得所选时间。是否有一个函数可以调用，getTime 或其他什么？我可以通过执行以下操作来获得选定的日期：

var start = $('#calendar').fullCalendar('getView').visStart;

但是，不确定如何获得选定的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:48:48.477

我认为`select`回调比 更好`dayClick`，因为如果选择了日期范围，您可以获得开始日期。

```
select: function(startDate, endDate, allDay, jsEvent, view) {
  // here startDate and endDate will give you the date-range selected
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:28:13.207

`visStart`属性仅保留第一个可见日期的日期对象。

如果您想获得点击日期和时间，您可以使用 dayClick 事件：

```
dayClick: function(date, allDay, jsEvent, view) {
    //some code here
} 
```

具有`date`日期对象

# android - 单个系列和单个渲染器的多个颜色条

> ID：15652565
> 
> 赞同：1
> 
> 时间：2013-03-27T05:39:32.603
> 
> 标签：android, bar-chart, achartengine

我正在为单系列和单渲染器生成条形图。我需要根据给定的数据条件生成不同颜色的条形图。

以下是我的渲染器代码，

```
 private XYMultipleSeriesRenderer getDemoRenderer() {
    XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();
    renderer.setBarSpacing(1.0);
    renderer.setAxisTitleTextSize(12);
    renderer.setChartTitleTextSize(12);
    renderer.setLabelsTextSize(15);
    renderer.setLegendTextSize(15);
    renderer.setPointSize(5f);
    renderer.setMargins(new int[] { 20, 30, 15, 0 });
    renderer.setXLabels(0);
    XYSeriesRenderer r = new XYSeriesRenderer();
    SQLiteDatabase DB = Context
            .openOrCreateDatabase("WaterElectricityReadingDataBase.db",
                    MODE_WORLD_READABLE, null);
    Cursor c = DB
            .rawQuery(
                    "select ReadingValue,ReadingMode, from WaterElectricity ",
                    null);  
    if (c.moveToFirst()) {
        do {
            String ReadingMode = c.getString(c
                    .getColumnIndex("ReadingMode"));
            if (ReadingMode.contains("Water")){

                r.setColor(Color.GREEN);
            }else if(ReadingMode.contains("Electricity")){
                r.setColor(Color.WHITE);
            }
        }while (c.moveToNext());
    }              
    r.setPointStyle(PointStyle.DIAMOND);
    r.setFillBelowLine(false);
    r.setFillPoints(true);
    renderer.addSeriesRenderer(r);
    setChartSettings(renderer);
    return renderer;
} 
```

在上面的代码中，如果 ReadingMode 是“Water”，我需要生成绿色的条形图，而另一个生成白色的条形图。如果我运行上面的代码，我确实观察到所有条都以绿色生成。我的数据库中的 ReadingMode 记录为“Water”和“Electricity”。但为什么会这样？我是否需要使用多个渲染器但我只有一个系列？

任何人都可以建议我一个好的解决方案吗？我的头快要断了。

任何帮助将不胜感激！！提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:07:29.207

[使用 achartengine 的条形图](https://stackoverflow.com/questions/5405858/bar-chart-using-achartengine)。检查链接中接受的答案。

```
 OR 
```

对每个条使用不同的系列。

[http://code.google.com/p/achartengine/issues/detail?id=76](http://code.google.com/p/achartengine/issues/detail?id=76)。有人报告了同样的问题。

# objective-c - 单击主页按钮时Cocos 2d游戏暂停需要时间

> ID：15652571
> 
> 赞同：0
> 
> 时间：2013-03-27T05:40:14.060
> 
> 标签：objective-c, cocos2d-iphone

当使用应用程序委托的 applicationWillResignActive 方法单击主页按钮时，我正在暂停我的游戏。暂停工作正常，但似乎暂停需要一些时间。当我恢复游戏时，玩家已经移动了一些距离。

但是，如果我通过单击游戏中可用的暂停按钮来暂停游戏，它就可以正常工作。

仅当按下主页按钮时才会出现此问题。请帮我解决一下这个。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:04:16.907

这可能是由于主线程在您按下主页按钮的时间和`applicationWillResignActive`被调用的时间之间仍在执行的事实

# html - 如何使用 SWF 作为正文背景？

> ID：15652572
> 
> 赞同：1
> 
> 时间：2013-03-27T05:40:31.120
> 
> 标签：html, css, flash

如何在带有 css 或其他一些脚本的 html 中使用 SWF 作为正文背景？

```
body {
background-image:url(bg.swf);
background-repeat:repeat; background-position:center top;
} 
```

（这只是一个例子）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:35:44.457

我认为最好的方法是在您的 css 代码中设置 SWF 的位置，以便它始终位于显示的所有其他内容的后面。

您可以为此使用 z-index 属性：

```
.mySWF {
 z-index: -1;
} 
```

这将创建一个名为“mySWF”的类，它位于其他所有内容的正常位置之后。您需要做的就是通过添加以下内容将其应用于代码中的 SWF 对象：

```
class="mySWF" 
```

这将把它推到后面。

# javascript - 如何从json对象中获取内部json

> ID：15652575
> 
> 赞同：0
> 
> 时间：2013-03-27T05:40:43.263
> 
> 标签：javascript, json

假设我有这个 json

```
{"widget": {
    "debug": "on",
    "window": {
        "title": "Sample Konfabulator Widget",
        "name": "main_window",
        "width": 500,
        "height": 500
    },
    "image": { 
        "src": "Images/Sun.png",
        "name": "sun1",
        "hOffset": 250,
        "vOffset": 250,
        "alignment": "center"
    },
    "text": {
        "data": "Click Here",
        "size": 36,
        "style": "bold",
        "name": "text1",
        "hOffset": 250,
        "vOffset": 100,
        "alignment": "center",
        "onMouseUp": "sun1.opacity = (sun1.opacity / 100) * 90;"
    }
}} 
```

我有这些对象的列表并像这样放入变量

`var myobjects = data`

其中包含上述对象的列表

现在工作正常，但现在我有一个问题。我现在有一个包含这些对象的父对象，而不是直接获取对象列表

```
"id": "21"
"myobject": 
{
{"widget": {
    "debug": "on",
    "window": {
        "title": "Sample Konfabulator Widget",
        "name": "main_window",
        "width": 500,
        "height": 500
    },
    "image": { 
        "src": "Images/Sun.png",
        "name": "sun1",
        "hOffset": 250,
        "vOffset": 250,
        "alignment": "center"
    },
    "text": {
        "data": "Click Here",
        "size": 36,
        "style": "bold",
        "name": "text1",
        "hOffset": 250,
        "vOffset": 100,
        "alignment": "center",
        "onMouseUp": "sun1.opacity = (sun1.opacity / 100) * 90;"
    }
}}
} 
```

而不是获取子对象列表，我现在有父对象列表`data`

如何像以前一样从父对象列表中获取子对象列表

就像是

`var childobjects = data.childobjects`

我想要那个，因为我已经编码了模板，只有当我有对象的直接列表时才可以使用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:45:06.250

你想*展平*对象数组吗？

```
// suppose data is like this:
var data = [
    { id: 1, myobject: {widgets:'',whatever:''}},
    { id: 5, myobject: {widgets:'',whatever:''}},
    { id: 23, myobject: {widgets:'',whatever:''}}
] 
```

然后这段代码：

```
var myobjects = [];

for (key in data) {
  myobjects.push(data[key].myobject);
} 
```

将离开`myobjects`等于：

```
[
    {widgets:'',whatever:''},
    {widgets:'',whatever:''},
    {widgets:'',whatever:''}
] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T05:58:51.060

我认为这是你需要的：

```
<script type="text/javascript">
var parents = [{"id": "21",
                "myobject": 
                 {"widget": {
                  "debug": "on",
                  "window": {
                             "title": "Sample Konfabulator Widget",
                              "name": "main_window",
                              "width": 500,
                              "height": 500
                             },
                "image": { 
                "src": "Images/Sun.png",
                 "name": "sun1",
                 "hOffset": 250,
                 "vOffset": 250,
                "alignment": "center"
               },
              "text": {
                      "data": "Click Here",
                      "size": 36,
                      "style": "bold",
                       "name": "text1",
                      "hOffset": 250,
                      "vOffset": 100,
                     "alignment": "center",
                     "onMouseUp": "sun1.opacity = (sun1.opacity / 100) * 90;"
                 }
             }
         }},
                {"id": "22",
                "myobject": 
                 {"widget": {
                  "debug": "on",
                  "window": {
                             "title": "Sample Konfabulator Widget",
                              "name": "main_window",
                              "width": 500,
                              "height": 500
                             },
                "image": { 
                "src": "Images/Sun.png",
                 "name": "sun1",
                 "hOffset": 250,
                 "vOffset": 250,
                "alignment": "center"
               },
              "text": {
                      "data": "Click Here",
                      "size": 36,
                      "style": "bold",
                       "name": "text1",
                      "hOffset": 250,
                      "vOffset": 100,
                     "alignment": "center",
                     "onMouseUp": "sun1.opacity = (sun1.opacity / 100) * 90;"
                 }
             }
         }}
    ]; 
   for(x in parents ){
        console.log(parents[x].myobject);
   }
   </script> 
```

# email - PermError SPF 永久错误：DNS 查找过多

> ID：15652585
> 
> 赞同：8
> 
> 时间：2013-03-27T05:41:31.163
> 
> 标签：email, gmail, spam, sendgrid, spf

我配置了 SPF 和 TXT 记录。当我检查 SPF 记录语法时。它说 PermError SPF 永久错误：DNS 查找过多。

```
 v=spf1 include:_spf.google.com include:netcore.co.in ~all 
```

而且我的电子邮件也落入垃圾邮件中。

**1) 我在共享主机上，我没有配置专用 IP 和 DKIM。实际上，我不会发送带有垃圾邮件触发词的电子邮件。因为我在共享主机上。共享主机上的其他人是否有可能发送导致我的电子邮件进入垃圾邮件的电子邮件。**

**2) 我正在使用 netcore.co.in 发送群发邮件**。和**google.com 从 gmail 发送邮件。而且我也正确配置了 MX 记录。我提到了 google MX 记录，但没有提到 netcore.net MX 记录。我正在使用 sendgrid 的免费 smtp 服务器从我的 java web 应用程序发送电子邮件。我在 spf 记录中没有提到。SPF 记录是否会导致垃圾邮件问题。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T14:03:59.903

你应该看看我几周前回答的这个问题：

> [SPF 记录中的 DNS 查找过多](https://stackoverflow.com/questions/14261214/too-many-dns-lookups-in-an-spf-record/14262788#14262788)

您只能获得 10 次针对 SPF 的 DNS 查找（这是协议的一部分）。自动进行两次查找以获取您的 TXT 记录和实际的 SPF 记录。如果不进行实际的数学运算（我将把它留给您作为练习），您将徘徊在 13-14 次查找附近。您需要将您的 SPF 记录合并为一个，或者删除其中一项服务。（例如，SendGrid 允许您在一组 IP 下同时发送事务性邮件和群发邮件，因此您可以完全放弃 netcore 或 gmail）。

至于您的垃圾邮件问题，您应该联系 SendGrid 支持 ( [http://support.sendgrid.com](http://support.sendgrid.com) )，这不应该发生在您身上，他们将能够帮助您排除故障并解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-04T06:16:12.997

另一种选择是使用像 spfproxy.org 这样的 SPF 代理服务。它掩盖了在后台执行它的代理背后的所有查找。只需几分钟即可完成设置。=

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-05T03:28:28.457

这与共享主机、专用 IP、是否设置 DKIM 或您的内容是否垃圾无关。

这里唯一的罪魁祸首是您的 SPF 包含 10 多个进行 DNS 查找的机制和/或修饰符。[SPF 规范](https://www.rfc-editor.org/rfc/rfc7208)强加此限制以防止 DDoS 攻击。

您可以使用在线 SPF 检查器检查 SPF 记录中的 DNS 查找计数：[在线 SPF 检查器](https://dmarcly.com/tools/spf-checker)

当在 SPF 检查期间返回“SPF PermError: too many DNS lookups”时，DMARC 将其视为失败，因为这是一个永久性错误，并且所有 SPF 永久性错误都被 DMARC 解释为失败。这可能会对您的电子邮件送达率产生负面影响，您应该寻求解决此问题的方法。

我写了一篇关于这个主题的帖子：[SPF PermError: too many DNS lookups](https://dmarcly.com/blog/spf-permerror-too-many-dns-lookups-when-spf-record-exceeds-10-dns-lookup-limit)

# jquery - 如何打开多个灯箱

> ID：15652586
> 
> 赞同：0
> 
> 时间：2013-03-27T05:41:37.393
> 
> 标签：jquery, html, fancybox, lightbox2

我在页面上有一个画廊。当您单击其中一个缩略图时，将显示相应相册的图库。在相册中，当您点击图片时，点击图片的更大、更清晰的版本将出现在灯箱中。[画廊在这个网站上](http://lfupholstery.net/home.html)我只是想知道如何打开两个灯箱而不是一个。它可能是在另一个之上或之下的一个堆栈，我只需要打开两个。下面是我现在使用的代码，当你点击图片时它只会打开一个灯箱。

```
<a href="images/headboards/lhb1.jpg" class="triggerLightbox"><img src="images/headboards/hb1.jpg" alt="Headboard" width="620" height="350" /></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:13:23.453

创建两个或多个具有相同属性值的链接图像，`rel`如下所示：

```
<a rel="group" href="images/headboards/lhb1.jpg" class="triggerLightbox"><img src="images/headboards/hb1.jpg" alt="Headboard" width="620" height="350" /></a>
<a rel="group" href="images/headboards/lhb2.jpg" class="triggerLightbox"><img src="images/headboards/hb2.jpg" alt="Headboard" width="620" height="350" /></a> 
```

祝你好运！

# sql - 创建索引 SQL Server 2008

> ID：15652587
> 
> 赞同：6
> 
> 时间：2013-03-27T05:41:40.187
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2012

最近我被投入到数据库微调中。我对 SQL Server 有一些想法，并决定创建一些索引。

参考了这个[http://sqlserverplanet.com/ddl/create-index](http://sqlserverplanet.com/ddl/create-index)

但我不明白其他类型的索引（如选项）将如何`INCLUDE`提供`WITH`帮助。我试过谷歌，但没有看到何时使用这些的简单描述。

```
CREATE NONCLUSTERED INDEX IX_NC_PresidentNumber
ON dbo.Presidents (PresidentNumber)
INCLUDE (President,YearsInOffice,RatingPoints)
WHERE ElectoralVotes IS NOT NULL

CREATE NONCLUSTERED INDEX IX_NC_PresidentNumber
ON dbo.Presidents (PresidentNumber)
WITH ( DATA_COMPRESSION = ROW )

CREATE NONCLUSTERED INDEX IX_NC_PresidentNumber
ON dbo.Presidents (PresidentNumber)
WITH ( DATA_COMPRESSION = PAGE ) 
```

我应该使用上述什么场景？他们会提高性能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T06:02:51.050

数据压缩也将有助于您的查询性能，因为压缩后，当您运行查询时，将加载较少的页面/范围，因为 I/O 减少了，减少 I/O 始终是一个不错的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T05:45:43.173

我不能说 with datacompression 选项，但 Include 选项绝对可以提高性能。如果您仅选择 PresidentNumber 和一个或多个 President、YearsInOffice 或 RatingPoints 列，并且 ElectoralVotes 不为空，那么您的查询将从索引本身获取值，而不必触及基础表。如果您的表有其他列并且您在查询中包含其中之一，那么它将必须从表和索引中检索值。

* * *

```
Select top 20 PresidentNumber, President, YearsInOffice, RatingPoints
From Presidents
where ElectoralVotes IS NOT NULL 
```

上面的查询只会从 IX_NC_PresidentNumber 中读取，而不必从 Presidents 表中提取数据，因为查询中的所有列都包含在索引中

```
Select top 20 PresidentNumber, President, YearsInOffice, PoliticalParty
From Presidents
where ElectoralVotes IS NOT NULL 
```

此查询还将使用索引 IX_NC_PresidentNumber 和 Presidents 表，因为查询中的政治党列不包含在索引中。

```
Select PresidentNumber, President, YearsInOffice, RatingPoints
From Presidents
Where RatingPoints > 50 
```

此查询很可能最终会执行表扫描，因为查询中的 where 子句与索引中使用的 where 子句不匹配，并且对行数没有限制。

# dita - 有没有人在他们的工作中实施 DITA 1.2 主题方案？

> ID：15652589
> 
> 赞同：3
> 
> 时间：2013-03-27T05:41:57.480
> 
> 标签：dita

想知道有没有人在工作中实现过DITA1.2的subjectscheme maps？如果是，请您分解示例以显示：

*   怎么做？
*   什么时候不使用它？

我知道它背后的理论，但我还没有实施相同的，我想知道在规划和实施阶段是否有一些事情我必须牢记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:40:35.060

这里有一个例子：

[如何使用 DITA subjectSchemes？](https://stackoverflow.com/questions/15101188/how-to-use-dita-subjectschemes)

DITA 1.2 规范也有一个很好的例子 (3.1.5.1.1)。

您目前可以使用主题方案图做的是：

*   定义分类
*   将分类法​​绑定到分析或标记属性，以便该属性仅采用您定义的值
*   过滤或标记具有使用 DITAVAL 文件定义的值的元素。

优点1：既然你有分类，过滤一个父值也会过滤它的子值，这很方便。

优势 2：您可以完全定义并控制值列表，从而防止标签膨胀。

优势 3：您可以在许多主题图中重用主题方案图，以通常的模块化 DITA 方式，因此您可以在任何地方应用相同的分类法。

这些似乎是目前主题方案图的主要用途。

我发现的唯一缺点是我可以想到主题方案映射的其他假设用途，例如分面浏览，但我认为不存在任何实现。无论如何，DITA-OT 还没有这样的东西。

# android - Android：从片段页面加载活动或意图

> ID：15652591
> 
> 赞同：1
> 
> 时间：2013-03-27T05:42:08.707
> 
> 标签：android, android-activity, fragment

我正在尝试从片段中加载活动。我只是使用了基本的 android 示例代码并添加了一些不同的布局。下面的代码部分工作，但是，当滑动到第 3 页而不仅仅是第 4 页时，意图/活动开始。我认为从第 3 页滑动到第 2 页时它也开始了一次。我认为这与 android 想要预加载页面上的所有内容以实现无缝滑动。

从一个片段页面滑动到另一个片段页面时，有没有办法加载活动？或者也许只有在我实际滑动到适当的页面后才能启动活动？除了不良行为之外，我没有收到任何错误。

```
public static class DummySectionFragment extends Fragment {
    /**
     * The fragment argument representing the section number for this
     * fragment.
     */
    public static final String ARG_SECTION_NUMBER = "section_number";

    public DummySectionFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        if (getArguments().getInt(ARG_SECTION_NUMBER)==2){
            LayoutInflater inflater2 = (LayoutInflater) getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View mDialogView = inflater2.inflate(R.layout.activity_main2, null);
            return mDialogView;
        } else if (getArguments().getInt(ARG_SECTION_NUMBER)==3){
            LayoutInflater inflater2 = (LayoutInflater) getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View mDialogView = inflater2.inflate(R.layout.activity_main3, null);
            return mDialogView;
        } else if (getArguments().getInt(ARG_SECTION_NUMBER)==4){
             LayoutInflater inflater2 = (LayoutInflater) getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
             View mIntentView = inflater2.inflate(R.layout.page_four_layout, null);
             Intent intent = new Intent(getActivity().getApplication(), PageFourActivity.class);
             startActivity(intent);
             return mIntentView;
        } else {

            // Create a new TextView and set its text to the fragment's section
            // number argument value.
            TextView textView = new TextView(getActivity());
            textView.setGravity(Gravity.CENTER);
            textView.setText(Integer.toString(getArguments().getInt(
                ARG_SECTION_NUMBER)));
            return textView;
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:03:20.333

如果您使用的是`ViewPager`with `Fragment`s，我认为[ViewPager.SimpleOnPageChangeListener](http://developer.android.com/reference/android/support/v4/view/ViewPager.SimpleOnPageChangeListener.html)应该可以帮助您。查看[onPageSelected](http://developer.android.com/reference/android/support/v4/view/ViewPager.SimpleOnPageChangeListener.html#onPageSelected%28int%29)函数。就像你猜到的，当使用 ViewPager 时，android 通常会在两侧加载页面。可以使用[setOffscreenPageLimit()](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOffscreenPageLimit%28int%29)设置此数字。您可以尝试将其设置为 0 或其他值，未经测试。

# ios - 获取谷歌地图方向问题

> ID：15652592
> 
> 赞同：0
> 
> 时间：2013-03-27T05:42:13.173
> 
> 标签：ios, objective-c, google-maps-api-3, xcode4.5

我正在研究谷歌地图中的谷歌地图，如何用路线中的路点向用户表示行车路线。根据谷歌地图 SDK，他们提供了一个我尝试过的示例 url，但我无法获得 json 响应。

网址： [http ://maps.googleapis.com/maps/api/directions/json?origin=Boston,MA&destination=Concord,MA&waypoints=Charlestown,MA|Lexington,MA&sensor=false](http://maps.googleapis.com/maps/api/directions/json?origin=Boston,MA&destination=Concord,MA&waypoints=Charlestown,MA|Lexington,MA&sensor=false)

错误：错误域=NSURLErrorDomain 代码=-1000“错误 URL”UserInfo=0x9245e00 {NSUnderlyingError=0x8643f00“错误 URL”，NSLocalizedDescription=错误 URL}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:25:37.660

我认为您应该执行以下操作

```
NSURL *url=[NSURL URLWithString:[@" http://maps.googleapis.com/maps/api/directions/json?origin=Boston,MA&destination=Concord,MA&waypoints=Charlestown,MA|Lexington,MA&sensor=false" stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 
```

# python - 如何在 Python 中查找具有特定不区分大小写扩展名的文件

> ID：15652594
> 
> 赞同：6
> 
> 时间：2013-03-27T05:42:26.970
> 
> 标签：python, file, find, case-insensitive

`glob.glob()`是区分大小写的。
是否有任何简单的方法可以在 Python 中查找具有特定不区分大小写扩展名的文件。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-27T05:44:18.497

[*fnmatch*](http://docs.python.org/2.7/library/fnmatch.html#module-fnmatch)模块提供了比*glob*模块更多的模式匹配控制：

```
>>> import os
>>> from fnmatch import filter
>>> filter(os.listdir('.'), '*.[Pp][Yy]') 
```

您还可以使用[*os.listdir()*](http://docs.python.org/2.7/library/os.html#os.listdir)后跟正则表达式匹配：

```
>>> import os, re
>>> [filename for filename in os.listdir('.') 
              if re.search(r'\.py$', filename, re.IGNORECASE)] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-27T05:52:01.583

这应该可以解决问题：

```
import os
import glob

def find_case_insensitve(dirname, extensions):
    for filename in glob.glob(dirname):
        base, ext = os.path.splitext(filename)
        if ext.lower() in extensions:
            print filename

find_case_insensitve('/home/anthon/Desktop/*', ['.jpeg', '.png', '.jpg']) 
```

不要忘记以小写形式指定扩展名列表。

# sql-server - 将动态sql的结果转换为xml

> ID：15652595
> 
> 赞同：2
> 
> 时间：2013-03-27T05:42:58.863
> 
> 标签：sql-server, xml, sql-server-2008

我想执行下面的T-sql

```
declare @sql varchar(max) = 'select 1 a, 2 b for xml path (''''), root(''root'')'
declare @t table (x xml)
insert into @t exec (@sql) 
```

但是，我收到了错误消息

> 消息 6819，第 16 层，状态 5，第 2 行
> 
> INSERT 语句中不允许使用 FOR XML 子句

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T06:18:31.570

将创建 XML 的查询嵌入到一个额外的 select 语句中。

```
declare @sql varchar(max) = '
select
  (
  select 1 a,
         2 b
  for xml path (''''), root(''root'')
  )'

declare @t table (x xml)
insert into @t exec (@sql) 
```

# wpf - 用于平铺列表视图的 WPF 工具包

> ID：15652597
> 
> 赞同：10
> 
> 时间：2013-03-27T05:43:03.290
> 
> 标签：wpf, wpf-controls, wpftoolkit

我需要创建格式良好的按钮图块，例如 Windows 8 起始页。是否有任何可用于自定义 ListView 的工具包，它可能支持平铺视图或网格视图，具有一些格式并且可能是一些动画选项。

我尝试创建自己的自定义列表视图，但这似乎是一项复杂的任务。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-04T12:02:27.860

我不知道一个不错的免费平铺控件。[DevExpress](http://www.youtube.com/watch?v=IVmF9_BGHoM)有一个漂亮的商业版本。

如果您指定您的确切要求（即您需要配置哪些属性，需要什么样的动画，......）并且我找到了时间，但我会试一试。

编辑：我创建了一个带有 WrapPanel 作为 ItemsPanel 的 ItemsControl。使用 MVVM 模式，根据您的需要和数据对象扩展控件应该不会太困难。比较难做的是 DragDrop 行为部分——当然还有一些改进的余地。我没有包括图像。

![在此处输入图像描述](../Images/fdfbe7058b214b46d6102590e359877d.png)

TileControl.xaml：

```
<UserControl x:Class="WpfApplication1.TileControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
             xmlns:local="clr-namespace:WpfApplication1"
             xmlns:beh="clr-namespace:WpfApplication1.Behavior"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">

    <UserControl.DataContext>
        <local:ViewModel />
    </UserControl.DataContext>

    <UserControl.Resources>
        <local:TileTypeToColorConverter x:Key="TileTypeToColorConverter" />
    </UserControl.Resources>

    <Grid>
        <Image Source="/WpfApplication1;component/Themes/background.png" Stretch="UniformToFill" />
        <Border x:Name="darkenBorder" Background="Black" Opacity="0.6" />
        <ItemsControl ItemsSource="{Binding Tiles}" Background="Transparent" Margin="5">
            <i:Interaction.Behaviors>
                <beh:ItemsControlDragDropBehavior />
            </i:Interaction.Behaviors>
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel Orientation="Horizontal" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate DataType="local:TileModel">
                    <Button Content="{Binding Text}" Background="{Binding TileType, Converter={StaticResource TileTypeToColorConverter}}"
                               Command="{Binding ClickCommand}" Width="120" Height="110" Padding="5" RenderTransformOrigin="0.5, 0.5"  >
                        <Button.RenderTransform>
                            <TransformGroup>
                                <ScaleTransform />
                                <SkewTransform/>
                                <RotateTransform/>
                                <TranslateTransform/>
                            </TransformGroup>
                        </Button.RenderTransform>
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Padding="5" Background="Transparent">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*" />
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>
                                        <Border x:Name="tileBackground" Grid.RowSpan="2" Background="{TemplateBinding Background}" Opacity="0.9" />
                                        <Image Source="{Binding Image}" HorizontalAlignment="Center" VerticalAlignment="Bottom" Height="50"  />
                                        <ContentPresenter TextElement.Foreground="White" Grid.Row="1" HorizontalAlignment="Center" Margin="3,10" />
                                    </Grid>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                        <Button.Resources>
                            <ElasticEase x:Key="easeOutBounce" EasingMode="EaseOut" Springiness="6" Oscillations="4" />
                        </Button.Resources>
                        <Button.Triggers>
                            <EventTrigger RoutedEvent="Button.Click">
                                <BeginStoryboard>
                                    <Storyboard Duration="00:00:00.05" AutoReverse="True">
                                        <DoubleAnimation To="0.1" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)"/>
                                        <DoubleAnimation To="0.1" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                            <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)" From="0.1" To="1.0" EasingFunction="{StaticResource easeOutBounce}" />
                                        <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)" From="0.1" To="1.0" EasingFunction="{StaticResource easeOutBounce}" />
                                        <DoubleAnimation Storyboard.TargetProperty="Opacity" From="0.1" To="1.0" EasingFunction="{StaticResource easeOutBounce}" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                        </Button.Triggers>
                    </Button>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </Grid>
</UserControl> 
```

ViewModel、TileModel、TileType、ActionCommand：

```
using System;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Windows.Input;
using System.Windows.Media.Imaging;

namespace WpfApplication1
{
    public class ViewModel : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;
        private void OnPropertyChanged(string propertyName)
        {
            if (this.PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }

        private ObservableCollection<TileModel> _tiles;
        public ObservableCollection<TileModel> Tiles { get { return _tiles; } set { _tiles = value; OnPropertyChanged("Tiles"); } }

        public ViewModel()
        {

           Tiles= new ObservableCollection<TileModel>()
            {
                new TileModel() { Text = "Facebook", Image = Properties.Resources.Facebook.ToBitmapImage(), TileType = TileType.Website },
                new TileModel() { Text = "Skype", Image = Properties.Resources.Skype.ToBitmapImage(), TileType = TileType.Application },
                new TileModel() { Text = "Ask.com", Image = Properties.Resources.AskCom.ToBitmapImage(), TileType = TileType.Website  },
                new TileModel() { Text = "Amazon", Image = Properties.Resources.Amazon.ToBitmapImage(), TileType = TileType.Website },
                new TileModel() { Text = "Evernote", Image = Properties.Resources.Evernote.ToBitmapImage(), TileType = TileType.Application },
                new TileModel() { Text = "Twitter", Image = Properties.Resources.Twitter.ToBitmapImage(), TileType = TileType.Website },
                new TileModel() { Text = "Internet Explorer",  Image = Properties.Resources.InterneExplorer.ToBitmapImage(), TileType = TileType.Browser },
                new TileModel() { Text = "Android", Image = Properties.Resources.Android.ToBitmapImage(), TileType = TileType.Application },
                new TileModel() { Text = "Winamp", Image = Properties.Resources.Winamp.ToBitmapImage(), TileType = TileType.Application },
                new TileModel() { Text = "YouTube", Image = Properties.Resources.YouTube.ToBitmapImage(), TileType = TileType.Website },
            };
        }

    }

    public class TileModel : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;
        protected void OnPropertyChanged(string propertyName)
        {
            if (this.PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }

        private string _text;
        public string Text { get { return _text; } set { _text = value; OnPropertyChanged("Text"); } }

        private BitmapSource _image;
        public BitmapSource Image { get { return _image; } set { _image = value; OnPropertyChanged("Image"); } }

        private TileType _tileType;
        public TileType TileType { get { return _tileType; } set { _tileType = value; OnPropertyChanged("TileType"); } }

        public ICommand ClickCommand { get; private set; }

        public TileModel()
        {
            ClickCommand = new ActionCommand(Click);
        }

        private void Click()
        {
            // execute appropriate action
        }

    }

    public enum TileType
    {
        Browser,
        Website,
        Application
    }

    public class ActionCommand : ICommand
    {
        public event EventHandler CanExecuteChanged;
        private Action _action;

        public ActionCommand(Action action)
        {
            _action = action;
        }

        public bool CanExecute(object parameter) { return true; }

        public void Execute(object parameter)
        {
            if (_action != null)
                _action();
        }
    }
} 
```

ItemsControlDragDropBehavior：

```
using System;
using System.Collections;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Controls.Primitives;
using System.Windows.Input;
using System.Windows.Interactivity;
using System.Windows.Media;

namespace WpfApplication1.Behavior
{
    public class ItemsControlDragDropBehavior : Behavior<ItemsControl>
    {
        private bool _isMouseDown;
        private bool _isDragging;
        private Point _dragStartPosition;
        private UIElement _dragItem;
        private UIElement _dragContainer;
        private IDataObject _dataObject;
        private int _currentDropIndex;
        private Point _lastCheckPoint;

        protected override void OnAttached()
        {
            this.AssociatedObject.AllowDrop = true;
            this.AssociatedObject.PreviewMouseLeftButtonDown += AssociatedObject_PreviewMouseLeftButtonDown;
            this.AssociatedObject.PreviewMouseMove += AssociatedObject_PreviewMouseMove;
            this.AssociatedObject.PreviewDragOver += AssociatedObject_PreviewDragOver;
            this.AssociatedObject.PreviewDrop += AssociatedObject_PreviewDrop;
            this.AssociatedObject.PreviewMouseLeftButtonUp += AssociatedObject_PreviewMouseLeftButtonUp;

            base.OnAttached();
        }

        void AssociatedObject_PreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
        {
            ItemsControl itemsControl = (ItemsControl)sender;
            Point p = e.GetPosition(itemsControl);

            object data = itemsControl.GetDataObjectFromPoint(p);
            _dataObject = data != null ? new DataObject(data.GetType(), data) : null;

            _dragContainer = itemsControl.GetItemContainerFromPoint(p);
            if (_dragContainer != null)
                _dragItem = GetItemFromContainer(_dragContainer);

            if (data != null)
            {
                _isMouseDown = true;
                _dragStartPosition = p;
            }
        }

        void AssociatedObject_PreviewMouseMove(object sender, MouseEventArgs e)
        {
            if (_isMouseDown)
            {
                ItemsControl itemsControl = (ItemsControl)sender;
                Point currentPosition = e.GetPosition(itemsControl);
                if ((_isDragging == false) && (Math.Abs(currentPosition.X - _dragStartPosition.X) > SystemParameters.MinimumHorizontalDragDistance) ||
                    (Math.Abs(currentPosition.Y - _dragStartPosition.Y) > SystemParameters.MinimumVerticalDragDistance))
                {
                    DragStarted(e.GetPosition(itemsControl));
                }
                e.Handled = true;
            }
        }

        void AssociatedObject_PreviewDragOver(object sender, DragEventArgs e)
        {
            UpdateDropIndex(e.GetPosition(this.AssociatedObject));
        }

        void AssociatedObject_PreviewDrop(object sender, DragEventArgs e)
        {
            UpdateDropIndex(e.GetPosition(this.AssociatedObject));
        }

        void AssociatedObject_PreviewMouseLeftButtonUp(object sender, System.Windows.Input.MouseButtonEventArgs e)
        {
            _isMouseDown = false;
        }

        private void DragStarted(Point p)
        {
            if (!_isDragging)
            {
                _isDragging = true;

                if (_dragContainer != null)
                    _dragContainer.Opacity = 0.3;

                _currentDropIndex = FindDropIndex(p);

                DragDropEffects e = DragDrop.DoDragDrop(this.AssociatedObject, _dataObject, DragDropEffects.Copy | DragDropEffects.Move);

                ResetState();
            }
        }

        private void ResetState()
        {
            if (_dragContainer != null)
                _dragContainer.Opacity = 1.0;

            _isMouseDown = false;
            _isDragging = false;
            _dataObject = null;
            _dragItem = null;
            _dragContainer = null;
            _currentDropIndex = -1;
        }

        private void UpdateDropIndex(Point p)
        {
            if ((_lastCheckPoint - p).Length > SystemParameters.MinimumHorizontalDragDistance) // prevent too frequent call
            {
                int dropIndex = FindDropIndex(p);
                if (dropIndex != _currentDropIndex && dropIndex > -1)
                {
                    this.AssociatedObject.RemoveItem(_dataObject);
                    this.AssociatedObject.AddItem(_dataObject, dropIndex);
                    _currentDropIndex = dropIndex;
                }
                _lastCheckPoint = p;
            }
        }

        private int FindDropIndex(Point p)
        {
            ItemsControl itemsControl = this.AssociatedObject;
            UIElement dropTargetContainer = null;

            dropTargetContainer = itemsControl.GetItemContainerFromPoint(p);

            int index = -1;
            if (dropTargetContainer != null)
            {
                index = itemsControl.ItemContainerGenerator.IndexFromContainer(dropTargetContainer);

                if (!IsPointInTopHalf(p))
                    index = index++; // in second half of item, add after
            }
            else if (IsPointAfterAllItems(itemsControl, p))
            {
                // still within itemscontrol, but after all items
                index = itemsControl.Items.Count - 1;
            }

            return index;
        }

        public bool IsPointInTopHalf(Point p)
        {
            ItemsControl itemsControl = this.AssociatedObject;

            bool isInTopHalf = false;

            UIElement selectedItemContainer = itemsControl.GetItemContainerFromPoint(p);
            Point relativePosition = Mouse.GetPosition(selectedItemContainer);

            if (IsItemControlOrientationHorizontal())
                isInTopHalf = relativePosition.X < ((FrameworkElement)selectedItemContainer).ActualWidth / 2;
            else
                isInTopHalf = relativePosition.Y < ((FrameworkElement)selectedItemContainer).ActualHeight / 2;

            return isInTopHalf;
        }

        private bool IsItemControlOrientationHorizontal()
        {
            bool isHorizontal = false;
            Panel panel = GetItemsPanel();
            if (panel is WrapPanel)
                isHorizontal = ((WrapPanel)panel).Orientation == Orientation.Horizontal;
            else if (panel is StackPanel)
                isHorizontal = ((StackPanel)panel).Orientation == Orientation.Horizontal;

            return isHorizontal;
        }

        private UIElement GetItemFromContainer(UIElement container)
        {
            UIElement item = null;
            if (container != null)
                item = VisualTreeHelper.GetChild(container, 0) as UIElement;
            return item;
        }

        private Panel GetItemsPanel()
        {
            ItemsPresenter itemsPresenter = GetVisualChild<ItemsPresenter>(this.AssociatedObject);
            Panel itemsPanel = VisualTreeHelper.GetChild(itemsPresenter, 0) as Panel;
            return itemsPanel;
        }

        private static T GetVisualChild<T>(DependencyObject parent) where T : Visual
        {
            T child = default(T);

            int numVisuals = VisualTreeHelper.GetChildrenCount(parent);
            for (int i = 0; i < numVisuals; i++)
            {
                Visual v = (Visual)VisualTreeHelper.GetChild(parent, i);
                child = v as T;
                if (child == null)
                {
                    child = GetVisualChild<T>(v);
                }
                if (child != null)
                {
                    break;
                }
            }
            return child;
        }

        /// still needs some work
        private static bool IsPointAfterAllItems(ItemsControl itemsControl, Point point)
        {
            bool isAfter = false;

            UIElement target = itemsControl.GetLastItemContainer();
            Point targetPos = target.TransformToAncestor(itemsControl).Transform(new Point(0, 0));
            Point relativeToTarget = new Point(point.X - targetPos.X, point.Y - targetPos.Y);

            if (relativeToTarget.X >= 0 && relativeToTarget.Y >= 0)
            {
                var bounds = VisualTreeHelper.GetDescendantBounds(target);
                isAfter = !bounds.Contains(relativeToTarget);
            }
            return isAfter;
        }
    }

    public static class ItemsControlExtensions
    {
        public static object GetDataObjectFromPoint(this ItemsControl itemsControl, Point p)
        {
            UIElement element = itemsControl.InputHitTest(p) as UIElement;

            while (element != null)
            {
                if (element == itemsControl)
                    return null;

                object data = itemsControl.ItemContainerGenerator.ItemFromContainer(element);
                if (data != DependencyProperty.UnsetValue)
                    return data;
                else
                    element = VisualTreeHelper.GetParent(element) as UIElement;
            }
            return null;
        }

        public static UIElement GetItemContainerFromPoint(this ItemsControl itemsControl, Point p)
        {
            UIElement element = itemsControl.InputHitTest(p) as UIElement;

            while (element != null)
            {
                object data = itemsControl.ItemContainerGenerator.ItemFromContainer(element);

                if (data != DependencyProperty.UnsetValue)
                    return element;
                else
                    element = VisualTreeHelper.GetParent(element) as UIElement;
            }

            return element;
        }

        public static UIElement GetLastItemContainer(this ItemsControl itemsControl)
        {
            UIElement container = null;
            if (itemsControl.HasItems)
                container = itemsControl.GetItemContainerAtIndex(itemsControl.Items.Count - 1);

            return container;
        }

        public static UIElement GetItemContainerAtIndex(this ItemsControl itemsControl, int index)
        {
            UIElement container = null;

            if (itemsControl != null && itemsControl.Items.Count > index && itemsControl.ItemContainerGenerator.Status == GeneratorStatus.ContainersGenerated)
                container = itemsControl.ItemContainerGenerator.ContainerFromIndex(index) as UIElement;
            else
                container = itemsControl;

            return container;
        }

        public static void AddItem(this ItemsControl itemsControl, IDataObject item, int insertIndex)
        {
            if (itemsControl.ItemsSource != null)
            {
                foreach (string format in item.GetFormats())
                {
                    object data = item.GetData(format);
                    IList iList = itemsControl.ItemsSource as IList;
                    if (iList != null)
                        iList.Insert(insertIndex, data);
                    else
                    {
                        Type type = itemsControl.ItemsSource.GetType();
                        Type genericList = type.GetInterface("IList`1");
                        if (genericList != null)
                            type.GetMethod("Insert").Invoke(itemsControl.ItemsSource, new object[] { insertIndex, data });
                    }
                }
            }
            else
                itemsControl.Items.Insert(insertIndex, item);
        }

        public static void RemoveItem(this ItemsControl itemsControl, IDataObject itemToRemove)
        {
            if (itemToRemove != null)
            {
                foreach (string format in itemToRemove.GetFormats())
                {
                    object data = itemToRemove.GetData(format);
                    int index = itemsControl.Items.IndexOf(data);
                    if (index > -1)
                        itemsControl.RemoveItemAt(index);
                }
            }
        }

        public static void RemoveItemAt(this ItemsControl itemsControl, int removeIndex)
        {
            if (removeIndex != -1 && removeIndex < itemsControl.Items.Count)
            {
                if (itemsControl.ItemsSource != null)
                {
                    IList iList = itemsControl.ItemsSource as IList;
                    if (iList != null)
                    {
                        iList.RemoveAt(removeIndex);
                    }
                    else
                    {
                        Type type = itemsControl.ItemsSource.GetType();
                        Type genericList = type.GetInterface("IList`1");
                        if (genericList != null)
                            type.GetMethod("RemoveAt").Invoke(itemsControl.ItemsSource, new object[] { removeIndex });
                    }
                }
                else
                    itemsControl.Items.RemoveAt(removeIndex);
            }
        }
    }
} 
```

TileTypeToColorConverter：

```
public class TileTypeToColorConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        SolidColorBrush brush = new SolidColorBrush();
        TileType type = (TileType)value;
        switch (type)
        {
            case TileType.Browser: brush.Color = Colors.Maroon; break;
            case TileType.Application: brush.Color = Colors.DodgerBlue; break;
            case TileType.Website: brush.Color = Colors.DarkGoldenrod; break;
        }
        return brush;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:59:22.407

您可以简单地使用项目控制，i)。在项目面板中，只需给出您想要的行数和列数 ii)。如果要在此处动态生成按钮，只需将按钮列表分配给它。

```
<ItemsControl x:Name="lstButtons"
              Grid.Row="0"
              Grid.Column="1">
  <ItemsControl.ItemsPanel>
    <ItemsPanelTemplate>
      <UniformGrid Columns="4"
                   Rows="4" />
    </ItemsPanelTemplate>
  </ItemsControl.ItemsPanel>
  <ItemsControl.ItemTemplate>
    <DataTemplate>
      <Button  Click="CLICK_EVENT_HERE"
               Style="Use metro Button Style here" />
    </DataTemplate>
  </ItemsControl.ItemTemplate>
</ItemsControl> 
```

# sql-server - 将 char 数据类型转换为 datetime 数据类型导致 SQL Server 2005 中的 datetime 值超出范围

> ID：15652599
> 
> 赞同：1
> 
> 时间：2013-03-27T05:43:04.353
> 
> 标签：sql-server, sql-server-2005, date, view

我写了一个视图，其中表中的日期转换为

```
convert(varchar, date, 103) 
```

并取别名为 DATE1 然后我写了如下查询：

```
select DATE1  
from date_demo
WHERE  MONTH(DATE1) = '12' 
```

我只想检索月份 = 'december' 为 12 的特定记录

我收到一个错误：

> 将 char 数据类型转换为 datetime 数据类型会导致 datetime 值超出范围。

这是在 SQL Server 2005 中，请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T05:48:33.890

正如大卫建议的那样，您应该使用日期列而不是转换为字符串然后再转换回日期时间列。

但是，当您将其转换回日期时间时，您需要指定[日期时间样式](http://msdn.microsoft.com/en-IN/library/ms187928.aspx)

```
select DATE1  from date_demo
WHERE  MONTH(convert(datetime,DATE1,103))= '12' 
```

此外，您需要指定 varchar 数据类型的长度 阅读这篇文章[的坏习惯是踢出没有长度的声明 varchar](https://sqlblog.org/2009/10/09/bad-habits-to-kick-declaring-varchar-without-length)

# node.js - Node.js 的自然模板 .html（如 Thymeleaf）

> ID：15652602
> 
> 赞同：14
> 
> 时间：2013-03-27T05:43:49.993
> 
> 标签：node.js, model-view-controller, view, templating, thymeleaf

Node.js 是否有自然模板

自然模板（如[Thymeleaf](http://www.thymeleaf.org/) [模板引擎](http://en.wikipedia.org/wiki/Template_engine_%28web%29)）是指模板页面或其部分可以作为原型完美地显示在浏览器中，而无需执行。也就是说，我有扩展名为 .html 的模板，我可以在浏览器中打开预览它，并使用标准的 HTML 开发工具进行编辑。

更新：我已经添加了答案，已在评论中添加。（新的 StackOverflower 用户害怕添加答案吗？）希望听到开发人员的意见，他们实际上使用了这些东西（只需添加新的答案）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T05:32:13.893

[github.com/flatiron/plates](https://github.com/flatiron/plates) (answered by generalhenry)

> Plates (short for templates) binds data to markup. Plates has NO special syntax. It works in the browser and in Node.js.

Active

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-28T05:33:34.893

[{{ mustache }}](http://mustache.github.com/) (answered by etienne)

> Logic-less templates.
> 
> Available in Ruby, JavaScript, Python, Erlang, PHP, Perl, Objective-C, Java, .NET, Android, C++, Go, Lua, ooc, ActionScript, ColdFusion, Scala, Clojure, Fantom, CoffeeScript, D, and for node.js.
> 
> Works great with TextMate, Vim, Emacs, and Coda.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-04-09T13:48:51.810

我正在使用[Handlebars](http://handlebarsjs.com/)。

JavaScript 中有很多模板引擎，在[这里](http://garann.github.io/template-chooser/)你可以决定你需要什么。

# sql - 查找每个匹配项的 SQL 语句

> ID：15652604
> 
> 赞同：0
> 
> 时间：2013-03-27T05:43:55.327
> 
> 标签：sql

现在是 IPL 季节。以下是 IPL 匹配数据库关系：

`Player(playerid, name, playsfor)`：包含每个球员和他效力的球队的详细信息。Playsfor 在 Team 表中引用 teamid。

`Team(teamid, teamname)`：包含团队ID和团队名称。

`Playerbat(playerid, matchid, runsscored,teamid)`：包含球员在每场比赛中的得分。仅当玩家在比赛中上场时才会为该玩家排一排。

`Playerbowl(playerid, matchid, wicketstaken,teamid)`：包含球员在每场比赛中的三柱门。仅当玩家在比赛中上场时才会为该玩家排一排。

`PlayersmatchDetails (Playerid, Matchid)`：包含参加比赛的球员姓名。

通过使用上面的表格，编写一条 SQL 语句来查找每场比赛的每支至少参加过一场比赛的球队的总得分。

注意 1：要在结果或输出中显示的列应该是 matchid 和 Runs only。

注意2：在编写SQL查询时，需要将表名写成schemaname.tablename（例如employee.projectDetails，其中employee是schemaname，projectDetails是tablename）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:31:57.513

我根据 Note1 和 Note2 做了几个假设。

注意 1：您声明您只需要 matchid 和 Runs 列，但描述中说的是每个团队的得分，因此您还需要在输出中包含团队，所以我的答案包含 matchid、teamname、Runs 作为输出。

注意 2：您没有指定模式名称，因此我假设所有表都位于名为 schemaname 的模式中。您需要将其替换为正确的模式名称。

```
SELECT pb.matchid, t.teamname, SUM(pb.runsscored) as Runs
FROM schemaname.Playerbat pb
INNER JOIN schemaname.Team t ON t.teamid = pb.teamid
GROUP BY pb.matchid, t.teamname
ORDER BY t.teamname, pb.matchid 
```

# google-maps - Google Map V2 禁用 MyLocation 蓝色图标

> ID：15652606
> 
> 赞同：2
> 
> 时间：2013-03-27T05:44:05.463
> 
> 标签：google-maps, google-maps-markers, google-maps-android-api-2

当我设置LocationSource 时，谷歌地图会自动显示蓝色图标。有谁知道怎么去掉蓝色图标？？

谢谢。

[类似的东西](http://dl.dropbox.com/u/78582670/20130327_133518.jpg)

有我的编码：

```
 private Marker myLocation = null;

private void prepareMapSetting(GoogleMap aGoogleMap)
{
    aGoogleMap.setLocationSource(mLocationSource);
    aGoogleMap.setOnMyLocationChangeListener(mOnMyLocationChangeListener);
    aGoogleMap.setOnMapLongClickListener(mOnMapLongClickListener);
        aGoogleMap.setMyLocationEnabled(true);
}

private OnMapLongClickListener mOnMapLongClickListener = new OnMapLongClickListener()
{
    @Override
    public void onMapLongClick(LatLng point)
    {
        if(null != mOnLocationChangedListener){
            if(null == myLocation){
                myLocation = getMap().addMarker(new MarkerOptions()
                .position(point)
                .title("You")
                .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_GREEN)));
            }
            else{
                myLocation.setPosition(point);
            }

            Location location = new Location("LongPressLocationProvider");
            location.setLatitude(point.latitude);
            location.setLongitude(point.longitude);
            mOnLocationChangedListener.onLocationChanged(location);
        }

    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-29T22:57:57.043

我不确定你的问题（我也没有看到你的图片）。

其实`setLocationSource`只是设置mylocation层的位置源（即蓝点...）

如果你不想要蓝点，就放

```
 aGoogleMap.setMyLocationEnabled(false); 
```

并且不要使用 locationSource

# geometry - IDML：形状如何存储在 IDML 文件中？

> ID：15652612
> 
> 赞同：4
> 
> 时间：2013-03-27T05:44:33.563
> 
> 标签：geometry, idml

我在阅读 IDML 价差时遇到了多种形状。每个形状都有自己的几何形状，看起来像 -

```
-<PathGeometry> 
   -<GeometryPathType PathOpen="false"> 
      -<PathPointArray> 
          <PathPointType RightDirection="-611.5 1548.5" LeftDirection="-611.5 1548.5" Anchor="-611.5 1548.5"/> 
          <PathPointType RightDirection="-611.5 2339.5" LeftDirection="-611.5 2339.5" Anchor="-611.5 2339.5"/>
          <PathPointType RightDirection="-533.3 2339.5" LeftDirection="-533.3 2339.5" Anchor="-533.3 2339.5"/> 
          <PathPointType RightDirection="-533.3 1548.5" LeftDirection="-533.3 1548.5" Anchor="-533.3 1548.5"/> 
       </PathPointArray> 
   </GeometryPathType>
 </PathGeometry> 
```

对于矩形来说，这是微不足道的（如上面的示例），其中`<PathPoint>`元素中的每个属性都指向矩形中的端点。其他形状会发生什么？换句话说，RightDirection、LeftDirection 和 Anchor 属性表示什么？有没有办法确定它在看 PathPointArray 的形状？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T08:24:31.530

每个 IDML都是三次贝塞尔[曲线](http://en.wikipedia.org/wiki/B%C3%A9zier_curve)`PathPointType`上的一个节点。控制点和锚点的组合定义了线的端点和曲率。IDML 中的所有线都被定义为曲线，但正如您所注意到的，直线的控制点和锚点是相同的。直线多边形（例如三角形）的定义方式相同。

[IDML](https://www.adobe.com/content/dam/Adobe/en/devnet/indesign/cs55-docs/IDML/idml-specification.pdf)只有一小部分形状类型（矩形、椭圆、图形线、多边形 - 参见规范中的 10.3.1.）。您可以通过一次绘制一条线从 IDML 绘制任何形状，但是为矩形和椭圆创建单独的例程会更有效。

还要注意元素`PathOpen="false"`。`GeometryPathType`为了提高效率，未定义形状中的最后一行 - 如果`PathOpen`== false，您将创建一条从最后一点返回到第一个点的线。

# c++ - cin.Getline 不返回任何内容

> ID：15652613
> 
> 赞同：1
> 
> 时间：2013-03-27T05:44:34.983
> 
> 标签：c++, string, cin

我正在努力学习 C++。我现在在弦上。我写了这个简单的方法，它应该要求输入一个字符串然后返回它。为此，我使用 cin.getLine() 方法，但使用 cin.getLine() 后未打印字符串

```
string getString(char string[])
{

  cout << "Please enter a string to process ";
  cin >> string;
  cout << "String in getString before process: " << string << "\n";
  cin.getline(string, STRINGSIZE);
  cout << "String after processing: " << string << "\n"; // here string is not printed
  return string;
} 
```

谁能帮我理解我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T05:54:31.440

您首先将字符串读取到`std::string`with `cin >> string;`，然后再从`cin`with读取一些内容，`cin.getline(string, STREAMSIZE);` 这是不必要的，读取一次并返回：

```
string getString(char string[]){
  cout << "Please enter a string to process ";
  cin >> string;
  cout << "String in getString before process: " << string << "\n";
  // process this, do whatever you describe as processing it
  cout << "String after processing: " << string << "\n"; // string is printed
  return string;
 } 
```

否则，如果您想使用`getline`，请执行以下操作：

```
 std::string name;

  std::cout << "Please, enter your full name: ";
  std::getline (std::cin,name); // or std::getline(std::cin,string, 'r'); to read
  //only to delimiter character 'r'
  std::cout << "Hello, " << name << "!\n"; 
```

所以要记住的是使用`getline`OR `cin`，除非真的有特殊原因，否则不要同时使用

# c++ - 提升成员函数指针

> ID：15652617
> 
> 赞同：0
> 
> 时间：2013-03-27T05:45:01.743
> 
> 标签：c++, class, boost, member

我对 boost 库很陌生。

我试图通过将传递给 glutDisplayFunc() 等的回调绑定到单个类来为图形程序完成一些事情。

我想在没有一些常量全局类对象的情况下完成此操作。

用代码解释：

```
class CallbackHolder {
public:
    void dostuff(void) {
        // etc.
    }
};
void bind() {
    glutIdleFunc((new CallbackHolder())->dostuff);
} 
```

我知道这可以通过使用 boost::bind 和 boost::function 来实现。

然而，我确实看到的一个问题是将 boost::function 转换回普通函数指针。

你将如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:59:11.267

您不能从转换`boost::function`为普通函数指针，也不能从成员函数指针转换为普通函数指针。接受回调的函数有一些解决方法，您可以在其中提供用户数据。

不幸的是，过剩界面不允许您提供用户数据。这意味着你被困在最丑陋的解决方案中，使用全局变量和普通函数。

```
class CallbackHolder {
  public:
    void dostuff(void) {
      // etc.
    }
};

CallbackHolder * g_callbackHolder = NULL;

void call_callback_holder(void) {
   if(g_callbackHolder) g_callbackHolder->dostuff();
}

void bind() {
   g_callbackHolder = new CallbackHolder();
   glutIdleFunc( &call_callback_holder );
} 
```

# .net - 我可以在一个 Windows 服务中托管多个不同的 Windows 服务吗？

> ID：15652620
> 
> 赞同：0
> 
> 时间：2013-03-27T05:45:16.270
> 
> 标签：.net, windows-services

我有一组旧版 Windows 服务。所有这些服务都安装在多台服务器上，但服务可能由于某些原因而关闭，例如内存泄漏、文件系统异常和 sql 连接异常。因此，我们必须每天远程检查服务器并检查服务的状态。虽然添加了恢复操作。但它仍然不是健壮的、可控的。

我想找到的解决方案是将所有这些现有服务集成到一个 windows 服务中。该主机服务可以运行子服务并对其进行调度和监控，当发生错误时，我的主机服务可以恢复，将错误记录到数据库并发送电子邮件给相关人员。该解决方案还可以使我定期安排服务，例如停止，设置。所以我想知道有没有一种方法我不需要修改从服务库继承的现有 Windows 服务的程序集并将它们集成到我的框架中。我认为操作系统可以托管子服务，必须有一种方式让我的主机服务或框架也可以托管子服务并安排它们。

我的最终目标是只有一个 windows 服务，它是我的主机服务。其他子服务在我的服务下运行，没有安装到操作系统。

我在下面挖了一些相关的线程，但它们不符合我的要求：

*   [我可以在单个 Windows 可执行文件中托管多个服务吗](https://stackoverflow.com/questions/1688275/can-i-have-multiple-services-hosted-in-a-single-windows-executable)
*   [.NET Windows 服务 - 一个项目中的多个服务](https://stackoverflow.com/questions/1407217/net-windows-service-multiple-services-in-one-project)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:07:34.897

> 所以我想知道有没有一种方法我不需要修改从服务库继承的现有 Windows 服务的程序集并将它们集成到我的框架中

听起来您不想修改现有代码，所以我想说到目前为止最简单和最有效的解决方案是编写一个单独的服务来监控其他服务。

[ServiceController](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller.aspx)类包含检查其他服务状态所需的所有功能，而无需求助于`sc`其他实用程序调用。

您可以维护 .txt 文件或 .xml 文件，其中包含要监视的服务列表。

```
string[] servicesToWatch = GetServiceList();
foreach (string service in servicesToWatch)
{
    try
    {
        ServiceController sc = new ServiceController(service);
        if (sc.Status != ServiceStatus.Running)
        {
            sc.Start();
            sc.WaitForStatus(ServiceStatus.Running, TimeSpan.FromMinutes(2));
            // log to database that service was restarted
        }
    }
    catch (Exception e)
    {
        // log to database that service could not be started
        // send emails to necessary people
    }
} 
```

然后，您可以将上述代码放入计时器或每 x 分钟检查一次的 while 循环中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:23:12.760

当您说服务时，您是指适当的服务或转换为服务的可执行文件吗？如果是后者，则您可以完全控制它。您可以将子服务生成为线程甚至进程。最大的问题是终止进程。随着 Windows 操作系统的每个新版本，他们添加了越来越多的安全功能，这使得杀死进程变得困难。

线程可能是一个问题，如果一个线程由于内存泄漏而死，它会影响程序。整个程序可能不得不自我关闭并重新启动。

警告说明：服务以称为“本地用户”的用户身份运行。您无法以“本地用户”身份登录，即使是最高管理员（称为管理员），您也无法终止“本地用户”服务或进程。只有“本地用户”才能杀死他们。

你看过像firedaemon这样的共享软件产品吗？他们做类似的事情。

# python - 如何在 wxTextCtrl 中动态对齐文本？

> ID：15652622
> 
> 赞同：1
> 
> 时间：2013-03-27T05:45:25.203
> 
> 标签：python, wxpython, wxtextctrl

我想将选定的文本`wxTextCtrl`左对齐或右对齐。这是我整个程序的代码。我需要将文本向右对齐，并在单击按钮时向左对齐。

```
class Beditor(wx.Frame):
    def __init__(self, parent, id, title):
        wx.Frame.__init__(self, parent, id, title, size=(800,600))

        self.SetIcon(wx.Icon('/usr/share/ezhuthani/icons/icon.png', wx.BITMAP_TYPE_PNG))

        ## variables
        self.modify = False
        self.last_name_saved = ''
        self.replace = False
        self.word = ''

    ## Class Methods
    def NewApplication(self, event):
        editor = Beditor(None, -1, window_title + '[Untitled/പേരു നൽകിയിട്ടില്ല]'  )
        editor.Centre()
        editor.Show()

    def OnOpenFile(self, event):
        file_name = os.path.basename(self.last_name_saved)
        if self.modify:
            dlg = wx.MessageDialog(self, 'Save changes?/മാറ്റങ്ങൾ സംഭരിക്കേണ്ടതുണ്ടോ?', '', wx.YES_NO | wx.YES_DEFAULT | wx.CANCEL |
                        wx.ICON_QUESTION)
            val = dlg.ShowModal()
            if val == wx.ID_YES:
                self.OnSaveFile(event)
                self.DoOpenFile()
            elif val == wx.ID_CANCEL:
                dlg.Destroy()
            else:
                self.DoOpenFile()
        else:
            self.DoOpenFile()

    def DoOpenFile(self):
        wcd = 'All files (*)|*|Editor files (*.ef)|*.ef|'
        dir = os.getcwd()
        open_dlg = wx.FileDialog(self, message='Choose a file/ഒരു രേഖ തിരഞ്ഞെടുക്കുക', defaultDir=dir, defaultFile='',
                        wildcard=wcd, style=wx.OPEN|wx.CHANGE_DIR)
        if open_dlg.ShowModal() == wx.ID_OK:
            path = open_dlg.GetPath()

            try:
                file = open(path, 'r')
                text = file.read()
                file.close()
                if self.text.GetLastPosition():
                    self.text.Clear()
                self.text.WriteText(text)
                self.last_name_saved = path
                self.statusbar.SetStatusText('', 1)
                self.modify = False
                self.SetTitle(window_title + path)

            except IOError, error:
                dlg = wx.MessageDialog(self, 'Error opening file/രേഖ തുറക്കാന്‍ കഴിയില്ല\n' + str(error))
                dlg.ShowModal()

            except UnicodeDecodeError, error:
                dlg = wx.MessageDialog(self, 'Error opening file/രേഖ തുറക്കാന്‍ കഴിയില്ല\n' + str(error))
                dlg.ShowModal()

        open_dlg.Destroy()
    def OnSaveFile(self, event):
        if self.last_name_saved:

            try:
                file = open(self.last_name_saved, 'w')
                text = self.text.GetValue()
                file.write(text.encode('utf-8'))
                file.close()
                self.statusbar.SetStatusText(os.path.basename(self.last_name_saved) + ' saved/സംഭരിച്ചു', 0)
                self.modify = False
                self.statusbar.SetStatusText('', 1)

            except IOError, error:
                dlg = wx.MessageDialog(self, 'Error saving file/രേഖ സംഭരിക്കാൻ കഴിയില്ല\n' + str(error))
                dlg.ShowModal()
        else:
            self.OnSaveAsFile(event)

    def OnSaveAsFile(self, event):
        wcd='All files(*)|*|Editor files (*.ef)|*.ef|'
        dir = os.getcwd()
        save_dlg = wx.FileDialog(self, message='Save file as.../വേറേതായി സംഭരിക്കുക...', defaultDir=dir, defaultFile='',
                        wildcard=wcd, style=wx.SAVE | wx.OVERWRITE_PROMPT)
        if save_dlg.ShowModal() == wx.ID_OK:
            path = save_dlg.GetPath()

            try:
                file = open(path, 'w')
                text = self.text.GetValue()
                file.write(text.encode('utf-8'))
                file.close()
                self.last_name_saved = os.path.basename(path)
                self.statusbar.SetStatusText(self.last_name_saved + ' saved/സംഭരിച്ചു', 0)
                self.modify = False
                self.statusbar.SetStatusText('', 1)
                self.SetTitle(window_title + path)
            except IOError, error:
                dlg = wx.MessageDialog(self, 'Error saving file/രേഖ സംഭരിക്കാൻ കഴിയില്ല\n' + str(error))
                dlg.ShowModal()
        save_dlg.Destroy()

    def OnCut(self, event):
        self.text.Cut()

    def OnCopy(self, event):
        self.text.Copy()

    def OnPaste(self, event):
        self.text.Paste()

    def QuitApplication(self, event):
        if self.modify:
            dlg = wx.MessageDialog(self, 'Save before Exit?/പുറത്തു പോകുന്നതിനു മുൻപ് രേഖ സംഭരിക്കേണ്ടതുണ്ടോ?', '', wx.YES_NO | wx.YES_DEFAULT |
                        wx.CANCEL | wx.ICON_QUESTION)
            val = dlg.ShowModal()
            if val == wx.ID_YES:
                self.OnSaveFile(event)
                if not self.modify:
                    wx.Exit()
            elif val == wx.ID_CANCEL:
                dlg.Destroy()
            else:
                self.Destroy()
        else:
            self.Destroy()

    def OnDelete(self, event):
        frm, to = self.text.GetSelection()
        self.text.Remove(frm, to)

    def OnSelectAll(self, event):
        self.text.SelectAll()

    def OnTextChanged(self, event):
        self.modify = True
        self.statusbar.SetStatusText(' modified', 1)
        event.Skip()

    def OnKeyDown(self, event):
        keycode = event.GetKeyCode()
        if keycode == wx.WXK_INSERT:
            if not self.replace:
                self.statusbar.SetStatusText('INS', 2)
                self.replace = True
            else:
                self.statusbar.SetStatusText('', 2)
                self.replace = False
        event.Skip()

    def ToggleStatusBar(self, event):
        if self.statusbar.IsShown():
            self.statusbar.Hide()
        else:
            self.statusbar.Show()

    def StatusBar(self):
        self.statusbar = self.CreateStatusBar()
        self.statusbar.SetStatusStyles([wx.SB_VERTICAL])
        self.statusbar.SetFieldsCount(3)
        self.statusbar.SetStatusWidths([-13, -3, -2])

    def LayoutHelp(self, event):
        info = wx.AboutDialogInfo()

        info.SetIcon(wx.Icon('/usr/share/ezhuthani/icons/ezhuthani.png', wx.BITMAP_TYPE_PNG))
        info.SetName('Layout')
        wx.AboutBox(info)

    def ToggleConvInToolbar(self, event):
        if self.convert.IsChecked():
            toggle = True
        else:
            toggle = False

        self.toolbar.ToggleTool(504, toggle)

    def ToggleConvInMenu(self, event):
        self.convert.Toggle()

    def OnAbout(self, event):

        description = """എഴുത്താണി """ """\n A Malayalam Phonetic Text Editor for GNU/Linux systems\n"""

        licence = """       
        എഴുത്താണി is a FREE software; you can redistribute it and/or modify it under the 
                terms of the GNU General Public License as published by the Free Software Foundation; 
                either version 3 of the License, or (at your option) any later version.

        എഴുത്താണി is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; 
        without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR 
        PURPOSE.  See the GNU General Public License for more details. You should have received 
        a copy of the GNU General Public License along with എഴുത്താണി ; if not, write to the Free 
        Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  0211"""

        info = wx.AboutDialogInfo()

        info.SetIcon(wx.Icon('/usr/share/ezhuthani/icons/logo.png', wx.BITMAP_TYPE_PNG))
        info.SetName('എഴുത്താണി')
        info.SetVersion('0.1')
        info.SetDescription(description)
        info.SetCopyright('Developed by IIITM-K Trivandrum')
        info.SetWebSite('http://www.iiitmk.ac.in/vrclc/')
        info.SetLicence(licence)
        info.AddDeveloper('Christy , Arun')
        info.AddDocWriter('Arun, Christy')
        info.AddArtist('The IIITMK crew :-)')

        info.SetName('എഴുത്താണി')
        wx.AboutBox(info)

    def FontSel(self, event):
        default_font = wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 0, "")
        data = wx.FontData()

        data.SetAllowSymbols(False)
        data.SetInitialFont(default_font)
        data.SetRange(10, 30)
        dlg = wx.FontDialog(self, data)
        if dlg.ShowModal() == wx.ID_OK:
            data = dlg.GetFontData()
            font = data.GetChosenFont()
            color = data.GetColour()
            text = 'Face: %s, Size: %d, Color: %s' % (font.GetFaceName(), font.GetPointSize(),  color.Get())
            self.text.SetFont(font)
        dlg.Destroy()

    def PreviewConv(self, event):
        keycode = event.GetKeyCode()

        if not self.convert.IsChecked():
            if 32 < keycode <= 126:
                key = chr(keycode)
                self.word += key
                self.statusbar.SetStatusText(engine.roman2beng(self.word.encode('utf-8')),0)
            elif keycode == wx.WXK_SPACE:
                self.statusbar.SetStatusText('',0)
                self.word = ''
            elif keycode == wx.WXK_HOME or keycode == wx.WXK_END:
                self.statusbar.SetStatusText('',0)
                self.word = ''

            else:
                event.Skip()
                text = self.text.GetRange(0, self.text.GetInsertionPoint()-1)

                sow = text.rfind(' ')   ## sow = start of word (caret position)

                if sow == -1:           ## you are at the start of document, so remove the initial space
                    sow = 0     

                self.word = self.text.GetRange(sow, self.text.GetInsertionPoint()-1)
                self.statusbar.SetStatusText(engine.roman2beng(self.word.encode('utf-8')),0)

        else:
            self.statusbar.SetStatusText('',0)
            self.word = ''

        event.Skip()

    def populateStore(self, event):
        keycode = event.GetKeyCode()
        if keycode == wx.WXK_SPACE:
            event.Skip()
            stockUndo.append(self.text.GetValue())
            self.toolbar.EnableTool( 808, True)
            if len(stockUndo) > depth:
                del stockUndo[0]

        event.Skip()

        ###### converting to Malayalam using engine  ##########
    def conv(self, event):
        ## New Algorithm for Ver 1.2
        keycode = event.GetKeyCode()

        if keycode == wx.WXK_SPACE: 
        #if keycode == event.GetKeyCode():
            text = self.text.GetRange(0, self.text.GetInsertionPoint())
            wordlist = text.split(' ')
            cur_word = ' ' + wordlist[-1]       ## cur_word = current word
            sow = text.rfind(' ')   ## sow = start of word (caret position)

            #event.Skip()           

            if sow == -1:           ## you are at the start of document, so remove the initial space
                sow = 0
                cur_word = cur_word[1:]

            if not self.convert.IsChecked():
                self.text.Replace(sow, self.text.GetInsertionPoint(), engine.roman2beng(cur_word.encode('utf-8') ))

        event.Skip()

app = wx.App()
Beditor(None, -1, window_title + '[Untitled] / പേരു നൽകിയിട്ടില്ല')
app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:20:43.150

您可以通过以下方式在事件处理程序中设置样式：

```
style = self.textCtrl.GetWindowStyle()
self.textCtrl.SetWindowStyle(style & ~wx.TE_LEFT | wx.TE_RIGHT) 
```

或将其改回：

```
self.textCtrl.SetWindowStyle(style & ~wx.TE_RIGHT | wx.TE_LEFT) 
```

使用 wxPython 2.8.12 在 Ubuntu 12.04 上成功测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:00:25.853

默认为`wxTextCtrl`左对齐。[`wxTE_RIGHT`](http://docs.wxwidgets.org/2.8/wx_wxtextctrl.html)您可以使用windows 样式向右对齐，但它仅适用于 Windows 和 GTK2。

# java - 在 Windows 7 64 位中设置 JMF

> ID：15652624
> 
> 赞同：0
> 
> 时间：2013-03-27T05:45:40.220
> 
> 标签：java, swing, jmf

我到处搜索，试图弄清楚如何让这个愚蠢的东西发挥作用。我下载并运行了 JMF 的 Windows 安装程序，并将我的变量`PATH`和`CLASSPATH`环境变量设置为以下内容：

请注意，这是在管理员的用户变量（我的用户帐户名）下，而不是系统变量下。

```
CLASSPATH

C:\Program Files (x86)\JMF2.1.1e\lib\jmf.jar;C:\Program Files (x86)\JMF2.1.1e\lib\sound.jar;.;%CLASSPATH%

PATH

C:\Program Files (x86)\JMF2.1.1e\lib;%PATH% 
```

但是，每当我使用`JMFDiagnostic`Oracle 网站上的 Tool Applet 时，它也会因我没有正确的课程而崩溃。此外，当我进入 NetBeans 7.3 并尝试导入其中一个包时，它说它不存在。

谁能帮帮兄弟！？我花了很多时间在这方面工作！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T10:59:04.870

尝试卸载 JMF 并将其重新安装到 C:\JMF2.1.1e\

在 Win 7 上安装 JMF 的完整步骤如下： [https ://forums.oracle.com/forums/thread.jspa?threadID=2132405](https://forums.oracle.com/forums/thread.jspa?threadID=2132405)

注意：当完成卸载 JMF 时，不要忘记删除用户变量中名为 CLASSPATH 的环境变量（如果它没有自动删除）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T06:27:17.810

*如果使用 JMF 的 java 程序在 Windows XP 中运行而在 Windows 7 中无法运行，则解决方案如下：*

1.  在您的 Windows 7 PC 上正常安装 JMF。假设您的 JMF 安装目录是：C:\Program Files\JMF2.1.1e。

2.  创建一个文件**C:\WINDOWS\java.jmfdir**，打开 .jmfdir 文件并在此文件 **C:\PROGRA~1\JMF21~1.1E\lib中写入以下行**

古尔米特·辛格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T05:57:52.563

如果您有 64 位 JDK，它将无法正常工作。bcz JMF 仅适用于 32 位平台。因此，您还需要安装 32 位 JDK。（并且为了避免JDK配置问题，最好卸载64位JDK）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-24T02:27:12.320

更正： C:\WINDOWS\java\jmfdir 而不是 C:\WINDOWS\java.jmfdir

......... 所以你必须在 Windows 目录中手动创建 java 目录，然后在 Java 目录中手动创建 jmfdir 文件，然后在 jmfdir 文件中写入此路径：

C:\PROGRA~1\JMF21~1.1E\lib

# java - 贝尔曼福特显示器的前身，适用于每次迭代

> ID：15652626
> 
> 赞同：1
> 
> 时间：2013-03-27T05:45:50.300
> 
> 标签：java

这里显示所有迭代的前驱顶点。我希望为顶点显示最终的前身

```
import java.io.*;
import java.util.*;
public class BellmanFord {
    LinkedList<Edge> edges;
    int d[];
    int n,e,s;
    final int INFINITY=999;
    private static class Edge  {
        int u,v,w;
        public Edge(int a, int b, int c){
            u=a;
            v=b;
            w=c;
       }
       BellmanFord() throws IOException{
            int item;
            edges=new LinkedList<Edge>();
            BufferedReader inp = new BufferedReader (new InputStreamReader(System.in));
            System.out.print("Enter number of vertices ");
            n=Integer.parseInt(inp.readLine());
            System.out.println("Cost Matrix");
            for(int i=0;i<n;i++)
            for(int j=0;j<n;j++){
                item=Integer.parseInt(inp.readLine());
                if(item!=0)
                    edges.add(new Edge(i,j,item));
            }
            e=edges.size();
            d=new int[n];
            System.out.print("Enter the source vertex ");
            s=Integer.parseInt(inp.readLine());
       }
       void relax() {
            int i,j;
            for(i=0;i<n;++i)
                d[i]=INFINITY;;
            d[s] = 0;
            for (i = 0; i < n - 1; ++i)
                 for (j = 0; j < e; ++j)
                     if (d[edges.get(j).u] + edges.get(j).w < d[edges.get(j).v])
                     {                         
                         d[edges.get(j).v] = d[edges.get(j).u] + edges.get(j).w;
                        /*Gives me the predecessor nodes of all iterations How can i get the final predecessornodes*/                                                                                                     System.out.println(edges.get(j).v+" Has predecessor " + edges.get(j).u);
                     }
        }
        boolean cycle() {
            int j;
            for (j = 0; j < e; ++j)
                if (d[edges.get(j).u] + edges.get(j).w < d[edges.get(j).v])
                    return false;
            return true;
        }
        public static void main(String args[]) throws IOException   {
             BellmanFord r=new BellmanFord();
             r.relax();
             if(r.cycle())
             for(int i=0;i<r.n;i++)
             System.out.println(r.s+"to"+i+" ==> "+r.d[i]);
             else
             System.out.println(" There is a nagative edge cycle ");
       }
} 
```

错误输出如下。我正在尝试为每次迭代打印出前任：

```
**OUTPUT:**

Enter number of vertices
Cost Matrix
0
-1
4
0
0
0
0
3
2
2
0
0
0
0
0
0
1
5
0
0
0
0
0
-3
0
Enter the source vertex
1 Has predecessor 0
2 Has predecessor 0
2 Has predecessor 1
3 Has predecessor 1
4 Has predecessor 1
3 Has predecessor 4
0to0 ==> 0
0to1 ==> -1
0to2 ==> 2
0to3 ==> -2
0to4 ==> 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:58:36.027

似乎你的最后几行很难理解，所以我给你我几天前制作的程序。你可以寻找你的程序犯的错误，因为它很难理解 100 行代码并找出错误：
另外我建议您更多地专注于编写整洁和注释的代码，而不是直接关注时间优化。只检查逻辑并尝试在您的代码中实现它，这就是为什么我没有发布 Java 代码以便您可以轻松获取所有内容:)

```
// A C / C++ program for Bellman-Ford's single source shortest path algorithm.

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <limits.h>

// a structure to represent a weighted edge in graph
struct Edge
{
    int src, dest, weight;
};

// a structure to represent a connected, directed and weighted graph
struct Graph
{
    // V-> Number of vertices, E-> Number of edges
    int V, E;

    // graph is represented as an array of edges.
    struct Edge* edge;
};

// Creates a graph with V vertices and E edges
struct Graph* createGraph(int V, int E)
{
    struct Graph* graph = (struct Graph*) malloc( sizeof(struct Graph) );
    graph->V = V;
    graph->E = E;

    graph->edge = (struct Edge*) malloc( graph->E * sizeof( struct Edge ) );

    return graph;
}

// A utility function used to print the solution
void printArr(int dist[], int n)
{
    printf("Vertex   Distance from Source\n");
    for (int i = 0; i < n; ++i)
        printf("%d \t\t %d\n", i, dist[i]);
}

// The main function that finds shortest distances from src to all other
// vertices using Bellman-Ford algorithm.  The function also detects negative
// weight cycle
void BellmanFord(struct Graph* graph, int src)
{
    int V = graph->V;
    int E = graph->E;
    int dist[V];

    // Step 1: Initialize distances from src to all other vertices as INFINITE
    for (int i = 0; i < V; i++)
        dist[i]   = INT_MAX;
    dist[src] = 0;

    // Step 2: Relax all edges |V| - 1 times. A simple shortest path from src
    // to any other vertex can have at-most |V| - 1 edges
    for (int i = 1; i <= V-1; i++)
    {
        for (int j = 0; j < E; j++)
        {
            int u = graph->edge[j].src;
            int v = graph->edge[j].dest;
            int weight = graph->edge[j].weight;
            if (dist[u] + weight < dist[v])
                dist[v] = dist[u] + weight;
        }
    }

    // Step 3: check for negative-weight cycles.  The above step guarantees
    // shortest distances if graph doesn't contain negative weight cycle.  
    // If we get a shorter path, then there is a cycle.
    for (int i = 0; i < E; i++)
    {
        int u = graph->edge[i].src;
        int v = graph->edge[i].dest;
        int weight = graph->edge[i].weight;
        if (dist[u] + weight < dist[v])
            printf("Graph contains negative weight cycle");
    }

    printArr(dist, V);

    return;
}

// Driver program to test above functions
int main()
{

    int V = 5;  // Number of vertices in graph
    int E = 8;  // Number of edges in graph
    struct Graph* graph = createGraph(V, E);

    // add edge 0-1 
    graph->edge[0].src = 0;
    graph->edge[0].dest = 1;
    graph->edge[0].weight = -1;

    // add edge 0-2 
    graph->edge[1].src = 0;
    graph->edge[1].dest = 2;
    graph->edge[1].weight = 4;

    // add edge 1-2 
    graph->edge[2].src = 1;
    graph->edge[2].dest = 2;
    graph->edge[2].weight = 3;

    // add edge 1-3 
    graph->edge[3].src = 1;
    graph->edge[3].dest = 3;
    graph->edge[3].weight = 2;

    // add edge 1-4 
    graph->edge[4].src = 1;
    graph->edge[4].dest = 4;
    graph->edge[4].weight = 2;

    // add edge 3-2 
    graph->edge[5].src = 3;
    graph->edge[5].dest = 2;
    graph->edge[5].weight = 5;

    // add edge 3-1 
    graph->edge[6].src = 3;
    graph->edge[6].dest = 1;
    graph->edge[6].weight = 1;

    // add edge 4-3 
    graph->edge[7].src = 4;
    graph->edge[7].dest = 3;
    graph->edge[7].weight = -3;

    BellmanFord(graph, 0);

    return 0;
} 
```

# iphone - 在不链接 IOKit 的情况下获取 iDevice 的 IMEI

> ID：15652627
> 
> 赞同：1
> 
> 时间：2013-03-27T05:46:10.317
> 
> 标签：iphone, objective-c, ipad, imei

我正在尝试获取代码正在运行的 ipad 的 IMEI，但我不想将它链接到那里的应用程序，因为我想动态加载 IOKit。

我在周围找到了一些代码并将其转换为此代码，并在 iPhone 4s 上对其进行了测试，但它确实有效，任何人都可以看到此代码不起作用的任何原因吗？

PS我的应用程序不能通过应用程序商店仅作为企业应用程序提供。

```
mach_port_t          masterPort;
CFTypeID             propID = (CFTypeID) NULL;
unsigned int         bufSize;

void *IOKit = dlopen("/System/Library/Frameworks/IOKit.framework/IOKit", RTLD_NOW);

if(IOKit)
{
    kern_return_t (*kIOMasterPort)( mach_port_t bootstrapPort,mach_port_t * masterPort ) = dlsym(IOKit,"IOMasterPort");

    io_registry_entry_t (*kIORegistryGetRootEntry)(mach_port_t  masterPort ) = dlsym(IOKit,"IORegistryGetRootEntry");

    CFTypeRef (*kIORegistryEntrySearchCFProperty)(io_registry_entry_t   entry,const io_name_t       plane,CFStringRef       key,CFAllocatorRef      allocator, IOOptionBits     options ) =
    dlsym(IOKit,"IORegistryEntrySearchCFProperty");

    kern_return_t kr = kIOMasterPort(MACH_PORT_NULL, &masterPort);

    io_registry_entry_t entry = kIORegistryGetRootEntry(masterPort);

    CFTypeRef prop = kIORegistryEntrySearchCFProperty(entry, "IODeviceTree", (CFStringRef) @"device-imei" , nil, kIORegistryIterateRecursively);

    propID = CFGetTypeID(prop);

    CFDataRef propData = (CFDataRef) prop;
    if (!propData) return nil;

    bufSize = CFDataGetLength(propData);
    if (!bufSize) return nil;

    NSString *p1 = [[[NSString alloc] initWithBytes:CFDataGetBytePtr(propData) length:bufSize encoding:1] autorelease];
    NSLog(@"foo %@" ,p1);
    return [p1 componentsSeparatedByString:@"\0"];
}

// kern_return_t kr = IOMasterPort(MACH_PORT_NULL, &masterPort);

return nil; 
```

# ios - 将自定义 UITableViewCell 返回到非编辑状态

> ID：15652628
> 
> 赞同：1
> 
> 时间：2013-03-27T05:46:19.210
> 
> 标签：ios, uitableview, sdk

我将 UITableViewCell 子类化为我的表格视图创建自定义布局和动画。基本上，当我向左滑动时，我进入编辑模式，当我向右滑动时，我退出编辑模式——每个都有适当的动画。

滑动按预期工作，但是每当表格视图滚动或另一个单元格进入编辑状态时，我似乎无法弄清楚如何将单元格设置为非编辑状态。

这个想法是每当表格视图滚动或用户开始在另一个单元格上编辑（向左滑动）时将单元格重置为“正常”状态。

这是我的自定义 UITableViewCell 类：

```
//
//  CustomTableViewCell.m
//
//  Created by Spencer Müller Diniz on 27/03/13.
//  Copyright (c) 2013 Family. All rights reserved.
//

#import "CustomTableViewCell.h"

@implementation CustomTableViewCell

@synthesize customView;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];

    if (self) {
        CGRect customFrame = CGRectMake(0.0f, 0.0f, self.contentView.bounds.size.width, self.contentView.bounds.size.height);

        self.customView = [[CustomTableViewCellView alloc] initWithFrame:customFrame];
        [self.contentView addSubview:self.customView];

        UISwipeGestureRecognizer* sgrLeft = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(cellSwipedLeft:)];
        [sgrLeft setDirection:UISwipeGestureRecognizerDirectionLeft];
        [self addGestureRecognizer:sgrLeft];

        UISwipeGestureRecognizer* sgrRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(cellSwipedRight:)];
        [sgrRight setDirection:UISwipeGestureRecognizerDirectionRight];
        [self addGestureRecognizer:sgrRight];
    }

    return self;
}

- (void)cellSwipedLeft:(UIGestureRecognizer *)gestureRecognizer {
    if (!self.isEditing)
        [self setEditing:YES animated:YES];
}

- (void)cellSwipedRight:(UIGestureRecognizer *)gestureRecognizer {
    if (self.isEditing)
        [self setEditing:NO animated:YES];
}

- (void)layoutSubviews {
    if (self.isEditing) {
        [UIView animateWithDuration:0.5f animations:^{
            self.customView.forgroundView.frame = CGRectMake(-100.0f, 0.0f, self.customView.forgroundView.frame.size.width, self.customView.forgroundView.frame.size.height);
        }];

    }
    else {
        [UIView animateWithDuration:0.5f animations:^{
            self.customView.forgroundView.frame = CGRectMake(0.0f, 0.0f, self.customView.forgroundView.frame.size.width, self.customView.forgroundView.frame.size.height);
        }];
    }
}

@end 
```

# vb.net - 如何从串行数据计算校验和

> ID：15652630
> 
> 赞同：0
> 
> 时间：2013-03-27T05:47:00.490
> 
> 标签：vb.net, serial-port, byte, checksum

我有一个用 vb.net 编写的应用程序，它监听一个串行端口，以下是我收到的字节：

```
B3 01 33 00 00 00 01  
B0 01 33 00 00 00 02
B1 01 33 00 00 00 03
B6 01 33 00 00 00 04
B7 01 33 00 00 00 05
81 01 33 00 00 01 32
B0 01 33 00 00 02 00
82 01 33 00 00 02 32
B1 01 33 00 00 03 00
83 01 33 00 00 03 32
B6 01 33 00 00 04 00
84 01 33 00 00 04 32
B7 01 33 00 00 05 00

```

我想得到正确的计算或过程。如何获得第一个字节？

即`B3`, `B0`,`B1`等等。

# simulation - 无线传感器网络的 NS2 仿真

> ID：15652631
> 
> 赞同：2
> 
> 时间：2013-03-27T05:47:00.697
> 
> 标签：simulation, wireless, sensors, ns2

我有一个无线传感器网络的模拟项目。在该项目中，我想模拟两个 WSN 协议以提高性能和安全性。ZigBEE、SPIN 等协议。Tinysec、LEDS、LiSIP。列表中的任意两个。模拟将在 NS2 中完成。我不知道如何以及从哪里开始？对于模拟，我需要协议的工作代码，如何编写代码？我的意思是应该如何编写它们，或者我会在网上得到它。

# android-layout - 如何在 Android 手机中禁用主页按钮的功能，我们可以为主页按钮设置一些其他操作吗？

> ID：15652634
> 
> 赞同：0
> 
> 时间：2013-03-27T05:47:02.227
> 
> 标签：android-layout, android-ui, android-button

如何在 Android 手机中禁用主页按钮的功能，我们可以为主页按钮设置一些其他操作吗？谁能给我一个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:08:44.297

您可以覆盖`onKeyEvent`您的**活动**

```
 public boolean onKeyDown(int keyCode, KeyEvent event) {
    if(keyCode == KeyEvent.KEYCODE_HOME) {
        // call the desired code.
        // If you want the home key disabled just uncomment the following line
        // return false;

    }
    return super.onKeyDown(keyCode, event);
 } 
```

# jquery - jQuery插件如何添加事件？

> ID：15652638
> 
> 赞同：1
> 
> 时间：2013-03-27T05:47:33.887
> 
> 标签：jquery, plugins

好的，所以我是 jQuery 插件游戏的新手，我读了很多书，似乎有 2700 万种方法来编写 jQuery 插件。我想要在我的插件中做的是使用最干净的方式来处理事件。

以这个基本插件模式为例：

```
;(function ( $, window, document, undefined ) {

    var pluginName = 'MyPlugin';
    var defaults = {
            propertyName: "value"
    };

    function Plugin( element, options ) {
            this.options = $.extend( {}, defaults, options );
            this._defaults = defaults;
            this._name = pluginName;
            this.element = element;
            this.init();
    }

    Plugin.prototype = {
            init: function() {
                    // SOME INIT FUNCTION
            },
            someMethod: function(el, options) {
                    // DO SOMETHING ELSE
            }
    }

    $.fn[pluginName] = function(options) {
            return this.each(function() {
                    if (!$.data(this, 'plugin_' + pluginName)) {
                            $.data(this, 'plugin_' + pluginName, new Plugin(this, options));
                    }
                    else if ($.isFunction(Plugin.prototype[options])) {
                            $.data(this, 'plugin_' + pluginName)[options]();
                    }
            });
    }

})( jQuery, window, document ); 
```

然后我们有这个简单的html：

```
<a href="a link to somewhere">My Link</a> 
```

假设在我们的插件中，我们希望在单击链接时提醒 href 并阻止默认操作。显然，这是一个非常愚蠢的例子，我想做的事情更加激烈，所以请不要说“你不需要插件”，因为这不是重点。

所以我们在我们的链接上初始化我们的插件：

```
$(document).ready(function(){
    $('a').each(function(){
        $(this).MyPlugin();
    });
}); 
```

我不知道是否有办法添加 click: 方法并自动调用它。或者也许有某种内部事件绑定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:30:18.430

我只想在 init 函数上添加一个点击事件，所以它更干净

```
Plugin.prototype = {
    init: function() {
        // DO INIT

        $(this.element).on("click", function(e){
            e.preventDefault();
            alert($(this).attr("href"));
        });
    },
    someMethod: function(el, options) {
        // DO SOMETHING ELSE
    }
}; 
```

或者，

你可以把它放在一个单独的方法上：http: [//jsfiddle.net/nashio/PDyEd/4/](http://jsfiddle.net/nashio/PDyEd/4/)

```
;(function ( $, window, document, undefined ) {

    var pluginName = 'MyPlugin';
    var defaults = {
        propertyName: "value"
    };

    function Plugin( element, options ) {
        this.options = $.extend( {}, defaults, options );
        this._defaults = defaults;
        this._name = pluginName;
        this.element = element;
        this.init();
        this.attachEvents(this.element, this.options);
    }

    Plugin.prototype = {
        init: function() {
            // DO INIT
        },
        attachEvents: function(el, options) {
           $(el).on("click", function(e){
                e.preventDefault();
                alert($(this).attr("href"));
            });
        }
    };

    $.fn[pluginName] = function(options) {
        return this.each(function() {

            if (!$.data(this, 'plugin_' + pluginName)) {
                $.data(this, 'plugin_' + pluginName, new Plugin(this, options));
            }
            else if ($.isFunction(Plugin.prototype[options])) {
                $.data(this, 'plugin_' + pluginName)[options]();
            }
        });
    }

})( jQuery, window, document );

$(document).ready(function() {
    $('a').MyPlugin(); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:24:25.810

**编辑2：**我第一次是对的，呵呵。我以前没有使用过这种模式，但我喜欢它。

所以在你的插件原型方法中，你可以访问`each`循环中的元素，所以你可以在那里绑定一个点击，或者你想要的任何其他东西！

```
$.fn[pluginName] = function(options) {
    return this.each(function() {
        $(this).click(function(event) {
            event.preventDefault();
            alert($(this).attr('href'));
        });

        if (!$.data(this, 'plugin_' + pluginName)) {
            $.data(this, 'plugin_' + pluginName, new Plugin(this, options));
        }
        else if ($.isFunction(Plugin.prototype[options])) {
            $.data(this, 'plugin_' + pluginName)[options]();
        }
    });
} 
```

此外，您的代码中缺少`{`该`function Plugin`行。

看到它在这个小提琴中工作：http: [//jsfiddle.net/PDyEd/](http://jsfiddle.net/PDyEd/)

# c++ - 数字常量前应有“,”或“...”

> ID：15652642
> 
> 赞同：5
> 
> 时间：2013-03-27T05:48:31.157
> 
> 标签：c++, arduino

我放弃。谷歌也没有回答我或文档。这里有什么问题？

> " 在 x.cpp:7 中包含的文件中：/Users/user/Dropbox/Projects/Arduino/libraries/Range/Range.h:27: 错误：数字常量 /Users/user/Dropbox/Projects/Arduino/ 之前的预期标识符库/Range/Range.h:27: 错误：数字常量前应有 ',' 或 '...'

```
//
//  Range.h
//  Handles range to ground and altitude
//
//  Created by x on 2013-03-27.
//
//

#ifndef RANGE_H_
#define RANGE_H_

#include "NewPing.h"

#define BOTTOM_RF_PIN       5
#define BOTTOM_RF_ECHO_PIN  10
#define BOTTOM_RF_MAX       200

class Range {
public:
    Range();
    void init();
    float toGround();
    float toCeiling();
    float altitude();
private:
    NewPing bottomRF(BOTTOM_RF_PIN, BOTTOM_RF_ECHO_PIN, BOTTOM_RF_MAX);

};

#endif /* RANGE_H_ */ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T05:51:16.640

代替

`NewPing bottomRF(BOTTOM_RF_PIN, BOTTOM_RF_ECHO_PIN, BOTTOM_RF_MAX);`

尝试

`NewPing bottomRF(int, int, int);`

原因：你不能声明一个函数来接受文字。只有类型。`int`是一种类型，5 10 和 200 是文字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T05:52:50.273

如果`bottomRF`是数据成员，而不是函数，并且您试图在类声明中实例化它：

您不能在类声明中实例化类类型项。这样做的好地方是在构造函数初始化列表中。

```
public:
    Range() :bottomRF(BOTTOM_RF_PIN, BOTTOM_RF_ECHO_PIN, BOTTOM_RF_MAX) {} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T05:54:26.223

不需要指定参数的类型吗？例如

```
NewPing bottomRF(int a1 = BOTTOM_RF_PIN, int a2= BOTTOM_RF_ECHO_PIN, int a3 = BOTTOM_RF_MAX); 
```

# sql - 使用 BCP 和隐藏路径从 SQL 导出数据时出错

> ID：15652648
> 
> 赞同：2
> 
> 时间：2013-03-27T05:48:46.623
> 
> 标签：sql, sql-server, bcp

当我使用隐藏路径时`\\\twn-a110093\s$\SNData1.csv`，它不起作用。

错误信息：

> [Microsoft][SQL Native Client] 无法打开 BCP 主机数据文件

也许'$'字符无法识别？我该如何解决这个问题？

```
Exec master..xp_cmdshell 'bcp " select * from sfm.dbo.tblSNDataDetail " queryout "\\twn-a110093\s$\SNData1.csv" -c -t, -T -S TWN-SQL-01' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:29:11.380

只是你不能 BCP 数据直接到 UNC 路径，会有双跳问题，你必须在 2 个服务器之间设置约束委派。您需要做的是首先 BCP 到您的本地驱动器，然后将文件移动/复制到 UNC 路径，这实际上比您直接 BCP 到 UNC 路径更快，即使您正确设置它也是如此。信不信由你，试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:13:28.167

更有可能是安全问题：

“由 xp_cmdshell 生成的 Windows 进程具有与 SQL Server 服务帐户相同的安全权限”

确保 SQL Server 服务帐户用户有权访问该路径/文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T06:58:24.270

您在 BCP 命令中使用 UNC 路径，实际上您直接在驱动器根 S$ 上创建文件。它将涉及安全检查。您可以尝试的是：

1.首先将驱动器根文件夹的路径更改为子文件夹，如`\twn-a110093\s$\Test\SNData1.csv`

2.授予 ​​SQL Server 服务帐户对文件夹“test”的写入权限，如果 SQL Server 在 NT 服务下运行，那么您需要给 Network服务帐户对文件夹的写入权限

3.如果“twn-a110093”不是 SQl Server 所在的同一台服务器，则在文件共享文件夹上，您可能需要授予“所有人”完全权限。

4.如果一切都不起作用，那么首先BCP到本地文件夹，然后将文件robocopy到UNC路径，就像@Guna说的那样，最好直接将文件写入UNC路径，这是真的。

# eclipse - Spring 抛出负载异常（java.lang.NoSuchMethodError :)

> ID：15652652
> 
> 赞同：0
> 
> 时间：2013-03-27T05:49:12.067
> 
> 标签：eclipse, spring

我正在尝试在eclipse中运行一个简单的jsp程序，但是当我运行程序时出现以下错误。我现在正在使用spring，我已经在正确的路径中正确添加了所有jar。jsp程序如下

```
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
   <body>
    <h1>WELCOME TO EMPLOYEE ACCESS SITE.PLEASE ENTER THE FOLLOWING INFORMATION</h1>
    <form:form method="POST" action="/Spring/mvc1/addStudent">
    <table>
     <tr>
       <td><form:label path="name">Name</form:label></td>
       <td><form:input path="name" /></td>
     </tr>

     <tr>
       <td><form:label path="id">id</form:label></td>
       <td><form:input path="id" /></td>
     </tr>
     <tr>
       <td colspan="2">
         <input type="submit" value="Submit"/>
       </td>
     </tr>
    </table>  
 </form:form>
  </body>
</html> 
```

当我运行上面的程序时，我得到以下一组错误

```
SEVERE: Servlet /Spring threw load() exception
java.lang.NoSuchMethodError: org.springframework.web.context.ConfigurableWebApplicationContext.setId(Ljava/lang/String;)V
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:454)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:483)
at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:358)
at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:325)
at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
at javax.servlet.GenericServlet.init(GenericServlet.java:212)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1161)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:981)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4058)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4364)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
at org.apache.catalina.core.StandardService.start(StandardService.java:516)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
at org.apache.catalina.startup.Catalina.start(Catalina.java:578)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
Mar 27, 2013 11:02:15 AM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
Mar 27, 2013 11:02:15 AM org.apache.jk.common.ChannelSocket init
INFO: JK: ajp13 listening on /0.0.0.0:8009
Mar 27, 2013 11:02:15 AM org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/109  config=null
Mar 27, 2013 11:02:15 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 2471 ms
Mar 27, 2013 11:02:23 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet jsp threw exception
java.lang.IllegalStateException: No WebApplicationContext found: no   
ContextLoaderListener registered?
at org.springframework.web.context.support.WebApplicationContextUtils.getRequiredWebApplicationContext(WebApplicationContextUtils.java:84)
at org.springframework.web.servlet.support.RequestContextUtils.getWebApplicationContext(RequestContextUtils.java:81)
at org.springframework.web.servlet.support.RequestContext.initContext(RequestContext.java:219)
at org.springframework.web.servlet.support.JspAwareRequestContext.initContext(JspAwareRequestContext.java:74)
at org.springframework.web.servlet.support.JspAwareRequestContext.<init>(JspAwareRequestContext.java:48)
at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:76)
at org.apache.jsp.mvc11.student_jsp._jspx_meth_form_005fform_005f0(student_jsp.java:104)
at org.apache.jsp.mvc11.student_jsp._jspService(student_jsp.java:73)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:337)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
at java.lang.Thread.run(Thread.java:619) 
```

我还没有将jsp页面链接到spring类。我只是想看看前端显示。我不确定问题出在哪里......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:05:47.407

您的 JSP 页面应该由 Spring Controller 返回。如果您在 JSP 中没有弹簧表单标签，它会起作用，但是您在 JSP 中的表单有需要名称和 ID 路径的标签。它们应该来自豆子。因此，您需要将该 bean/POJO 与 JSP 一起传递。在`Model`对象中添加 bean。

代码将是这样的：假设页面 URL 是：`http://localhost:8484/yourappcontext/student`

```
@Controller
public class StudentController {

    @RequestMapping(value="/student", method = RequestMethod.GET)
    public String showAddStudentPage(Model model) {

        // instantiate empty student pojo containing name & id needed by JSP
        Student student = new Student();

        // add student pojo in model being sent with JSP
        model.addSttribute("student", student);

        return "addStudent"; // this would be your JSP name.
    }
} 
```

# php - PHP 常量 SQL 查询

> ID：15652653
> 
> 赞同：0
> 
> 时间：2013-03-27T05:49:25.677
> 
> 标签：php, javascript, mysql, crash

我需要每 1 秒不断地从我的数据库中读取一次以获取最新值。这是我的代码：

```
 <?php
    // connect to the "tests" database
    $conn = new mysqli('localhost', 'root','','Test');

    // check connection
    if (mysqli_connect_errno()) {
     exit('Connect failed: '. mysqli_connect_error());
    }

    // SELECT sql query
   $sql = "SELECT * FROM `Value`"; 

   // perform the query and store the result
   $result = $conn->query($sql);

   if (!$result)
    print 'Error!';

   // if the $result contains at least one row
   if ($result->num_rows > 0) {
    // output data of each row from $result
     while($row = $result->fetch_assoc()) {
      $output=$row;
    print_r($output);
     }
   } 
   else {
    print '0 results';
   }

   $conn->close();
   ?> 
```

我的 HTML 代码每 1 秒刷新一次，如下所示：

```
function reload (){
    setInterval(getData,1000);
}

function getData()
  {
    $.get('test.php', function(data) {

        var output = data;

        document.getElementById("output").innerHTML = "Info: " + output;
    }); 
  }
....
<body onload="reload();">

<p id="output"></p>

</body> 
```

一切正常，但大约 5-10 分钟后 MYSQL 服务器崩溃。我假设它正在超载。我的想法是我每次都在运行 php 脚本，它每秒都连接。我做错了吗？有人对更好的实施有任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:07:31.120

我认为您正在寻找脚本结束时数据库“未关闭”的东西。

在 mysqli 中，您可以通过添加 p: 来添加主机名以使用所谓的持久数据库连接

```
// connect to the "tests" database
$conn = new mysqli('p:localhost', 'root','','Test'); 
```

在此处阅读有关持久连接的更多信息：http: [//php.net/manual/en/features.persistent-connections.php](http://php.net/manual/en/features.persistent-connections.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:00:13.067

您可以尝试让它在最后一个请求完成后 1 秒后才开始下一个请求，方法是调用`setTimeout()`回调，如下所示：

```
function getData()
  {
    $.get('test.php', function(data) {

        var output = data;

        document.getElementById("output").innerHTML = "Info: " + output;
        setTimeout(getData, 1000);
    }); 
  }
....
<body onload="getData();"> 
```

这通常是比使用更好的方法`setInterval()`，因为您可能最终有两个并发连接，并且 request`A`可能在 request 之前开始`B`，但可能在 之后结束*，* `B`因为发生了一些事情并且完成请求花费了超过一秒钟。这可能会导致一些奇怪的行为。

这也可以解决您的问题，因为它可能会失败，因为它最终会从同一个 IP 打开多个并发连接等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T06:00:59.450

**是的，它可以以更好的方式实施**。由于您 `Database connection configuration`每次都使用相同的，因此**无需在页面刷新时连接和关闭数据库**。*每秒连接到数据库服务器是非常昂贵的调用*。

你为什么不`just reload/refresh the query statement`呢？

这个想法是：

使用[持久数据库连接](http://php.net/manual/en/features.persistent-connections.php)

请参阅以下[帖子中的](https://stackoverflow.com/questions/50303/persistent-db-connections-yea-or-nay)**BlaM**答案， 以了解为什么持久连接是最佳的。

将查询放在单独的 div 中，例如 #load。

```
 echo '<div id="load">';
// SELECT sql query
   $sql = "SELECT * FROM `Value`"; 

   // perform the query and store the result
   $result = $conn->query($sql);

   if (!$result)
    print 'Error!';

   // if the $result contains at least one row
   if ($result->num_rows > 0) {
    // output data of each row from $result
     while($row = $result->fetch_assoc()) {
      $output=$row;
    print_r($output);
     }
   } 
   else {
    print '0 results';
   }
       echo '</div>'; 
```

使用 jquery 函数**仅刷新 #load div**

```
<script type="text/javascript">
var auto_refresh = setInterval(
function ()
{
$("#load").load("filename.php #load");
}15000); // refresh every 1 second
</script> 
```

**我已经为自动刷新排行榜页面实现了这个。它运行良好，服务器即使在 50 小时内也没有崩溃**。

# logging - logrotate cron 作业不旋转某些日志

> ID：15652654
> 
> 赞同：14
> 
> 时间：2013-03-27T05:49:26.520
> 
> 标签：logging, cron, cron-task, logrotate, log-rotation

我在“logrotate.d”目录中添加了两个脚本，以便轮换我的应用程序日志。这是其中之一的配置：

```
<myLogFilePath> {
  compress
  copytruncate
  delaycompress
  dateext
  missingok
  notifempty
  daily
  rotate 30
} 
```

“cron.daily”目录中有一个“logrotate”脚本（根据 cron 日志似乎每天都在运行）：

```
#!/bin/sh

echo "logrotate_test" >>/tmp/logrotate_test
#/usr/sbin/logrotate /etc/logrotate.conf >/dev/null 2>&1
/usr/sbin/logrotate -v /etc/logrotate.conf &>>/root/logrotate_error

EXITVALUE=$?
if [ $EXITVALUE != 0 ]; then
    /usr/bin/logger -t logrotate "ALERT exited abnormally with [$EXITVALUE]"
fi
exit 0 
```

第一个回声语句正在工作。
**但我发现我的应用程序日志单独没有得到轮换，而其他日志（如 httpd）正在轮换**
**而且我在提到的“logrotate_error”文件中也看不到任何输出**（对所有用户都有写权限）。

但是系统日志说：**“logrotate：ALERT 异常退出 [1]”**

但是当我在“cron.daily”脚本中手动运行相同的“logrotate”时，一切似乎都正常。

为什么它在每日 cron 计划中不轮换？我在这里做错了吗？
如果我能得到这么急需的帮助，那就太好了。

**更新：** 看起来，这是因为 selinux - 我的用户主目录中的日志文件受到 selinux 的限制以及运行 logrotate 脚本的时间：

```
SELinux is preventing /usr/sbin/logrotate from getattr access on the file /home/user/logs/application.log 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-24T18:19:39.397

SELinux 限制了对不具有所需 SELinux 文件上下文类型的目录中的日志文件的 logrotate 访问。"/var/log" 目录有**"var_log_t"**文件上下文，而 logrotate 能够做到这一点。所以解决方案是在我的应用程序日志文件和它的父目录上设置它：

```
semanage fcontext -a -t var_log_t <directory/logfile>
restorecon -v <directory/logfile> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-05T16:43:58.620

我有一个类似的问题。为了解决这个问题，我首先使用 sestatus 命令检查了 SELinux 的状态：

```
# sestatus
SELinux status:                 enabled
SELinuxfs mount:                /selinux
Current mode:                   enforcing
Mode from config file:          enforcing
Policy version:                 24
Policy from config file:        targeted 
```

然后，使用 ls --scontext 检查应用于文件和目录的 SELinux 安全上下文。检查您希望 logrotate 操作的文件，并检查正在工作的文件，例如 /var/log/maillog：

```
# ls --scontext /var/log/maillog*
system_u:object_r:var_log_t:s0   /var/log/maillog
system_u:object_r:var_log_t:s0   /var/log/maillog-20140713
system_u:object_r:var_log_t:s0   /var/log/maillog-20140720
system_u:object_r:var_log_t:s0   /var/log/maillog-20140727
system_u:object_r:var_log_t:s0   /var/log/maillog-20140803 
```

使用 semanage 更改文件上下文。

```
semanage fcontext -a -t var_log_t <directory/logfile>
restorecon -v <directory/logfile> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-29T09:20:48.953

只是为了概括上述内容并确保为所有未来的文件正确设置相同的 SELinux 上下文：

```
semanage fcontext -a -t var_log_t "<directory>(/.*)?"
restorecon -v <directory> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-22T09:15:16.830

我最近遇到了一个与 SELinux 相关的类似问题，`logrotate`即未按预期对文件进行操作，当要旋转的日志位于 NFS 共享上时，就会发生这种问题。

在这种情况下，设置`logrotate_use_nfs`seboolean 似乎可以解决问题，例如

```
$ setsebool logrotate_use_nfs 1
$ getsebool logrotate_use_nfs
logrotate_use_nfs --> on 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-08T19:09:43.707

> SELinux 阻止 /usr/sbin/logrotate 对目录站点进行读取访问。
> 
> ***** 插件包罗万象（100。信心）建议 ***************************
> 
> 如果您认为默认情况下应该允许 logrotate 对站点目录进行读取访问。然后你应该将此报告为错误。您可以生成本地策略模块以允许此访问。
> 通过执行以下命令暂时
> 允许此访问：
> 
> ```
> # grep logrotate /var/log/audit/audit.log | audit2allow -M mypol
> # semodule -i mypol.pp 
> ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-17T12:53:19.250

我已经看到禁用 SELINUX 的这个问题，这是因为正在旋转的日志文件的父目录具有全局写权限，而 logrotate 不欢迎

```
error: skipping "/xxx/yyy/log/logfile.log" because parent directory has insecure permissions (It's world writable or writable by group which is not "root") Set "su" directive in config file to tell logrotate which user/group should be used for rotation. 
```

chmod 父目录到 755 解决了这个问题

```
# logrotate --version
logrotate 3.8.6 
```

# c# - 使用反射从dll调用方法后获取返回值

> ID：15652656
> 
> 赞同：5
> 
> 时间：2013-03-27T05:49:33.447
> 
> 标签：c#, reflection

我正在使用反射加载 dll 并尝试调用返回`List<customType>`. 如何调用方法并获取返回值。我试过这个，但说`entry point not found exception`。

```
MethodInfo[] info= classType.GetMethods();
MethodInfo method = mInfo.FirstOrDefault(c => c.Name == "GetDetails");
object values = method.Invoke(classInstance, new object[] { param1}); 
```

价值观有例外`entry point not found`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T06:17:07.773

```
Assembly assembly = Assembly.LoadFile(@"assembly location");    // you can change the way you load the assembly
Type type = assembly.GetType("mynamespace.NameOfTheClass");                                       
ConstructorInfo constructor = type.GetConstructor(Type.EmptyTypes);
object classObject = constructor.Invoke(new object[] { });

MethodInfo methodInfo = type.GetMethod("GetDetails");
var returnValue = (List<customType>)methodInfo.Invoke(classObject, new object[] { param1}); 
```

根据您的类是否为静态以及您的构造函数是否采用任何参数，可能需要进行一些更改。

# oracle - JPA Cast 在 Oracle 中不起作用

> ID：15652663
> 
> 赞同：1
> 
> 时间：2013-03-27T05:50:13.573
> 
> 标签：oracle, hibernate, jpa, oracle11g

我有一张桌子`person{id,personName,birthDate}`。在表格中，我必须通过他们的birthDate 获取所有人员的详细信息，而不比较其时间。我有以下查询

```
Query q = entitymanager.createQuery(select p from person p where
    CAST(p.birthDate as date) = :birthdate);         
q.setparameter("birthdate",new Date(),TemporalType.DATE) ; 
```

当我使用 mysql 测试上述查询时，它给出了正确的结果。但它在 Oracle 中无法正常运行。`between...and`我通过将开始时间设置为 0:0:0 并将结束时间设置为 23:59:59 来尝试逻辑。有没有其他选择。

我正在使用 JPA 1.0 和休眠作为服务提供者。在此先感谢您的帮助。

# android - IOS/Android App 谷歌云存储下载

> ID：15652665
> 
> 赞同：2
> 
> 时间：2013-03-27T05:50:36.230
> 
> 标签：android, ios, amazon-s3, google-cloud-storage

有没有办法将单个大文件作为多线程下载，并从谷歌云存储下载后合并所有文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:26:42.963

是的。从 Google Cloud 存储下载对象时，您可以指定要检索的字节范围。使用 XML API，这将通过“Range:”标头处理。这对于恢复中断的下载很有用，但它也可以用于多线程下载文件。

以下是有关如何格式化范围参数的一些文档：[https ://developers.google.com/storage/docs/reference-headers#range](https://developers.google.com/storage/docs/reference-headers#range)

这是获取对象调用的文档，包括 Range 标头： [https ://developers.google.com/storage/docs/reference-methods#getobject](https://developers.google.com/storage/docs/reference-methods#getobject)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T06:07:34.990

你可以使用 android 的 DownloadManager 类，它最适合下载较大的文件，请参阅下面的链接 [http://developer.android.com/reference/android/app/DownloadManager.html](http://developer.android.com/reference/android/app/DownloadManager.html)

# python - openerp 7 one2many 和 many2one

> ID：15652667
> 
> 赞同：0
> 
> 时间：2013-03-27T05:50:40.420
> 
> 标签：python, xml, one-to-many, openerp, many-to-one

请参考下面 205 - 280 之间的代码行

[https://github.com/priyankahdp/openerp/blob/openerp/model%20class](https://github.com/priyankahdp/openerp/blob/openerp/model%20class)

在我看来 255 - 337 之间的 xml 行

[https://github.com/priyankahdp/openerp/blob/openerp/view.xml](https://github.com/priyankahdp/openerp/blob/openerp/view.xml)

并且需要澄清我的错误在哪里。见茶工人行

[http://flic.kr/p/e6uf1E](http://flic.kr/p/e6uf1E)

从该下拉列表中加载了不正确的数据，我不需要

@@senthilnatang：

您的意思是删除以下行（第 283 行）？

```
<field name='selected_tea_workers_line_ids' nolabel='1'> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:08:47.633

为什么要在子级（selected_tea_workers_line_ids 'bpl.selected.tea.workers.line'）中添加父级（tea_worker_line_id 'bpl.offer'），不需要将其从视图中删除，因为您已经将 tea.worker.lines 设置为 one2many bpl.offer 的。

# jsp - 没有任何jquery或js的jsp中的分页

> ID：15652672
> 
> 赞同：0
> 
> 时间：2013-03-27T05:51:07.187
> 
> 标签：jsp, pagination

我需要一个分页链接，如`Prev 1-10 Next`,`Prev 11-20 Next`等。我有一个数组列表，比如 arList ，其中包含 300 条记录。我需要先显示前 10 条记录。仅单击下一步时，我需要显示下一个 10。

任何人都可以分享一个链接或资源有类似的想法吗？

```
ArrayList arList  = new ArrayList();
arList = // calling method to retrieve elements

// table starts here
<table id="tbl">

 for(int i=0; i < arList.size();i++) 
 {
 HashMap hMap=(HashMap)arList.get(i);                        
 firstVal= (String)hMap.get("first");
 secondVal= (String)hMap.get("second");
%><tr><td> 
// firstVal and secondVal goes here
</tr></td><%
 }

</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:59:42.823

你可以为此使用JSTL！

```
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
...
<c:forEach items="${list}" var="item" begin="0" end="9">
    ${item}
</c:forEach> 
```

您甚至可以在这些属性中使用 EL。

```
request.setAttribute("firstrow", 0);
request.setAttribute("rowcount", 10)

<c:forEach items="${list}" var="item" begin="${firstrow}" end="${firstrow + rowcount - 1}">
    ${item}
</c:forEach> 
```

# ruby - 第一页上的海葵打印链接

> ID：15652683
> 
> 赞同：0
> 
> 时间：2013-03-27T05:52:34.383
> 
> 标签：ruby, anemone

想看看我做错了什么。这里。

我需要在父页面上打印链接，即使它们是针对另一个域的。然后出去。

```
require 'anemone'
url = ARGV[0]
Anemone.crawl(url, :depth_limit => 1) do |anemone|
    anemone.on_every_page do |page|
        page.links.each do |link|
            puts link
        end
     end
end 
```

我做错了什么？

编辑：什么都不输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:06:00.770

这对我有用

```
 require 'anemone'
    require 'optparse'
    file = ARGV[0]
    File.open(file).each do |url|
      url = URI.parse(URI.encode(url.strip))
      Anemone.crawl(url, :discard_page_bodies => true) do |anemone|
            anemone.on_every_page do |page|
                    links = page.doc.xpath("//a/@href")
                    if (links != nil)
                            links.each do |link|
                                    puts link.to_s
                            end
                    end
            end

      end
    end 
```

# latitude-longitude - GML 边界框中的纬度/经度信息

> ID：15652684
> 
> 赞同：2
> 
> 时间：2013-03-27T05:52:34.650
> 
> 标签：latitude-longitude, gml

例如，如果我们在 gml 中有如下所示的边界框：

`<gml:Envelope> <gml:lowerCorner>42.943 -71.032</gml:lowerCorner> <gml:upperCorner>43.039 -69.856</gml:upperCorner> </gml:Envelope>`

现在，对于下角，哪个值是纬度，哪个是经度。在在线文档中找不到此信息。

谢谢流浪者

上述 GML 格式为 GeoRSS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-04T08:07:13.417

从 GML 模式：

```
<complexType name="EnvelopeType">
<choice>
<sequence>
<element name="lowerCorner" type="gml:DirectPositionType"/>
<element name="upperCorner" type="gml:DirectPositionType"/>
</sequence>
<element ref="gml:pos" minOccurs="2" maxOccurs="2">
<annotation>
<appinfo>deprecated</appinfo>
</annotation>
</element>
<element ref="gml:coordinates"/>
</choice>
<attributeGroup ref="gml:SRSReferenceGroup"/>
</complexType>
<element name="Envelope" type="gml:EnvelopeType" substitutionGroup="gml:AbstractObject">
<annotation>
<documentation>
Envelope defines an extent using a pair of positions defining opposite corners in arbitrary dimensions. The first direct position is the "lower corner" (a coordinate position consisting of all the minimal ordinates for each dimension for all points within the envelope), the second one the "upper corner" (a coordinate position consisting of all the maximal ordinates for each dimension for all points within the envelope). The use of the properties "coordinates" and "pos" has been deprecated. The explicitly named properties "lowerCorner" and "upperCorner" shall be used instead.
</documentation>
</annotation>
</element> 
```

这导致 SRSReference 组，其中包含允许您查找有关坐标的轴顺序和单位（除其他外）的代码。：

```
<attributeGroup name="SRSReferenceGroup">
<annotation>
<documentation>
The attribute group SRSReferenceGroup is an optional reference to the CRS used by this geometry, with optional additional information to simplify the processing of the coordinates when a more complete definition of the CRS is not needed. In general the attribute srsName points to a CRS instance of gml:AbstractCoordinateReferenceSystem. For well-known references it is not required that the CRS description exists at the location the URI points to. If no srsName attribute is given, the CRS shall be specified as part of the larger context this geometry element is part of.
</documentation>
</annotation>
<attribute name="srsName" type="anyURI"/>
<attribute name="srsDimension" type="positiveInteger"/>
<attributeGroup ref="gml:SRSInformationGroup"/>
</attributeGroup> 
```

因此，如果没有指定的 SRS，就不可能回答您的问题，我们甚至不知道您的坐标所在的单位。

# windows-phone-8 - 是否可以为 BackTile click 设置导航 uri

> ID：15652686
> 
> 赞同：1
> 
> 时间：2013-03-27T05:52:43.693
> 
> 标签：windows-phone-8, windows-phone

我开发了 wp8 应用程序，

我在某些情况下更新我的应用程序磁贴，

这里是我用来更新我的瓷砖的代码

```
 ShellTile TileToFind = ShellTile.ActiveTiles.First();

            StandardTileData NewTileData = new StandardTileData
            {
                BackgroundImage = new Uri(@"/ApplicationTile.png", UriKind.RelativeOrAbsolute),
                Count = NotificationCount,
                BackTitle = offers.data.info[0].offer_title,
                BackContent = offers.data.info[0].location_area,

            };

            TileToFind.Update(NewTileData); 
```

我的疑问是，是否可以为 BackTile 设置导航 uri，就像我在我的 toast 消息中提供导航 uri 一样

```
 Microsoft.Phone.Shell.ShellToast toast = new Microsoft.Phone.Shell.ShellToast();
            toast.Content = "@" + offers.data.info[0].location_area;
            toast.Title = offers.data.info[0].offer_title;
            toast.NavigationUri = new Uri("/LocationDealsPage.xaml", UriKind.Relative);
            toast.Show(); 
```

我需要导航到不同的页面，同时单击后面的瓷砖和前面的瓷砖。

任何人请告诉我，是否可能，如果可能，请告诉我如何。

如果不可能，还有其他方法可以做到这一点。

谢谢你。

诺鲁尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:04:08.170

当用户在显示背面时点击磁贴时，无法设置不同的 URI 以导航到。

如果您需要导航到应用程序的不同部分，您可以使用多个磁贴。

或者，如果您在有新信息可用时远程更新磁贴的背面，并且您希望在启动应用程序并且有新信息时执行不同的操作（例如，直接转到该新项目而不是主页) 您可以在打开应用程序时进行此检查。为了避免在应用程序启动时发出 [n 额外] 网络请求，您可以使用后台代理定期提取最新数据（包括检测是否有新项目的标志），以便在应用程序启动时它就在那里推出。

# json - 在 Perl 中递归转换嵌套哈希表

> ID：15652687
> 
> 赞同：1
> 
> 时间：2013-03-27T05:52:44.927
> 
> 标签：json, perl, recursion

我有一个嵌套的哈希表，如下所示：

```
{"a": {"b": {"c": {"d": "", "e": ""},
             "m": ""},
       "f": ""},
 "h": {"i": {"j": "", "k": ""}
      }
} 
```

我想把它转换成这样的格式：

```
[
    {"title": "a", "isFolder": true,
        "children": [
            {"title": "b", "isFolder": true",
                "children": [
                    {"title": "c", "isFolder": true",
                        "children": [
                            {"title": "d"},
                            {"title": "e"}
                        ]
                    },
                    {"title": "m"}
                ]
            },
            {"title": "f"},
            {"title": "g"}
        ]
    },
    {"title": "h", "isFolder": "true",
        "children": [
            {"title": "i", "isFolder": "true",
                "children": [
                    {"title": "j"},
                    {"title": "k"}
                ]
            }
        ]
    }
] 
```

于是我写了一个程序：

```
#!/usr/bin/perl

use JSON;

$json = JSON->new->allow_nonref;

$struct = [];
sub convertRaw() {
    ($raw, $ts) = @_;

    foreach (keys %$raw) {
        if ($raw->{$_}) {
            push @$ts, {"title" => $_, "isFolder" => "true", "children" => []};
            &convertRaw($raw->{$_}, @$ts[-1]->{"children"});
        }
        else {
            push @$ts, {"title" => $_};
        }
    }
}

$raw_struct = {"a"=> {"b"=> {"c"=> {"d"=> "", "e"=> ""},
                             "m"=> ""},
                      "f"=> ""},
               "h"=> {"i"=> {"j"=> "", "k"=> ""}
                     }
              };

&convertRaw($raw_struct, $struct);

print $json->pretty->encode($struct)."\n"; 
```

但是，输出结果是这样的：

```
[
   {
      "isFolder" : "true",
      "children" : [
         {
            "isFolder" : "true",
            "children" : [
               {
                  "title" : "k"
               },
               {
                  "title" : "j"
               },
               {
                  "title" : "a"
               }
            ],
            "title" : "i"
         }
      ],
      "title" : "h"
   }
] 
```

真的很迷茫。你能弄清楚这里有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:11:40.537

您有全局声明的变量`$raw`和`$ts`. 所以子元素处理期间的哈希更新会影响父元素的未来处理。[将它们声明为词法范围的变量](http://p3rl.org/my)：

```
sub convertRaw {
    my ($raw, $ts) = @_;
    # the rest of the code 
```

# ios - iOS MessageUI.h 未找到

> ID：15652695
> 
> 赞同：1
> 
> 时间：2013-03-27T05:53:22.887
> 
> 标签：ios, sms, messageui

我想使用 MFMessageComposeViewController 发送应用内短信，并在我的项目中导入 MessageUI 框架。但是当我使用

```
#import "MessageUI.h" 
```

Xcode告诉我：找不到MessageUI.h。我不知道为什么以及如何解决这个问题？

非常感谢。

![构架](../Images/162a7641ca18e30b0bd66fd64f76d69e.png)

![错误](../Images/47fcc708af00d5a3338f73963b3bc3b6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:13:51.247

这个语法：

```
#import "MessageUI.h" 
```

将用于在本地项目中导入标头。要导入系统类型的标头，请使用以下语法：

```
#import <MessageUI/MessageUI.h> 
```

当您使用此语法时，编译器知道在哪里查找有问题的标头。

# ruby - JSON::ParserError 757：意外的标记 Ruby on Rails

> ID：15652696
> 
> 赞同：2
> 
> 时间：2013-03-27T05:53:28.337
> 
> 标签：ruby, json, parsing, import, gateway

您好，我正在尝试将消息从外部网关导入到我在 Ruby on Rails 中的数据库中，这些消息是使用 JSON 发送的，但是无论我收到什么，我都会不断出错：

```
757: unexpected token at 'sting another 8:16 09\/02\/2013","from":"254720321222","to":"2658","date":"2013-02-09 17:17:19"},{"id":256069,"text":"Wajpt","from":"254704476069","to":"2658","date":"2013-02-09 20:12:30"},{"id":256510,"text":"STOP","from":"254789934061","to":"2658","date":"2013-02-10 07:20:01"},{"id":256774,"text":"Adan","from":"254729933301","to":"2658","date":"2013-02-10 10:36:11"},{"id":257039,"text":"1967","from":"254700365399","to":"2658","date":"2013-02-10 14:13:55"}]}} 
```

这是我的控制器代码：

```
 require 'AfricasTalkingGateway'

class MessageController < ApplicationController
    username = 'username'
    apikey   = 'apikey'

    gateway  = AfricasTalkingGateway.new(username, apikey)

    last_received_id = 212815
    while true
      messages = gateway.fetch_messages(last_received_id)

      messages.each {|x|
        puts 'from' + x.from + 'to' + x.to + 'text' + x.text + 'date' + x.date
        last_received_id = x.id
      }

      break if messages.length == 0

    def create
    @message = Message.new(:from => x.from, :to => x.to, :date => x.date, :text => x.text, :giud => x.id)
    @message.save

  def index
    @message = Message.find(:all)
  end
end 
```

和我的网关 rb 文件：

```
require 'rubygems'
require 'curb'
require 'json'

class AfricasTalkingGatewayAuthenticationError < Exception
end

class AfricasTalkingGatewayUnexpectedError < Exception
end

class SMSMessage
  attr_accessor :id, :text, :from, :to, :date

  def initialize(m_id, m_text,m_from, m_to ,m_date)
    @id = m_id
    @text = m_text
    @from = m_from
    @to = m_to
    @date = m_date
  end
end

class StatusReport
  attr_accessor :number, :status, :cost

  def initialize(m_number, m_status, m_cost)
    @number = m_number
    @status = m_status
    @cost = m_cost
  end
end

class AfricasTalkingGateway

  #Constants
  URL = 'https://api.africastalking.com/version1/messaging'
  ACCEPT_TYPE = 'application/json'

  def initialize(user_name,api_key)
    @user_name = user_name
    @api_key = api_key
  end

  def send_message(recipients, message)
    data = nil
    response_code = nil

    post_body = {:username => @user_name, :message => message, :to => recipients }

    http = Curl.post(URL, post_body) do |curl|
      curl.headers['Accept'] = ACCEPT_TYPE
      curl.headers['apiKey'] = @api_key
      curl.verbose = true

      curl.on_body { |body|
        data = body
        body.to_s.length
      }
      curl.on_complete { |resp| response_code = resp.response_code }
    end

    raise AfricasTalkingGatewayAuthenticationError if response_code == 401
    raise AfricasTalkingGatewayUnexpectedError "Unexpected error occured" if response_code != 201 or data.nil?

    reports = JSON.parse(data)["SMSMessageData"]["Recipients"].collect { |entry|
      StatusReport.new entry["number"], entry["status"], entry["cost"]
    }
    return reports

  end

  def fetch_messages(last_received_id)
    data = nil
    response_code = nil

    http = Curl.get("#{URL}?username=#{@user_name}&lastReceivedId=#{last_received_id}") do |curl|
      curl.headers['Accept'] = ACCEPT_TYPE
      curl.headers['apiKey'] = @api_key
      curl.verbose = false
      curl.on_body { |body|
        data = body
        body.to_s.length
      }
      curl.on_complete { |resp| response_code = resp.response_code }
    end

    raise AfricasTalkingGatewayAuthenticationError if response_code == 401
    raise AfricasTalkingGatewayUnexpectedError "Data is nil for some unexpected reason" if response_code != 200 or data.nil?

    messages = JSON.parse(data)["SMSMessageData"]["Messages"].collect { |msg|
      SMSMessage.new msg["id"], msg["text"], msg["from"] , msg["to"], msg["date"]

    }    

    return messages

  end
end 
```

请帮我解决这个问题

# .net - Visual c++ CLR如何发送windows消息？

> ID：15652698
> 
> 赞同：1
> 
> 时间：2013-03-27T05:53:29.797
> 
> 标签：.net, winapi, c++-cli

```
private:
    #define WM_SETTEXT                      0x000C

    void doSomethinggToolStripMenuItem_Click(System::Object^  sender, System::EventArgs^  e) 
    {
         SendMessage(this->Handle, WM_SETTEXT, (wPARAM)"Some Window Title", 0);
    } 
```

导致以下错误：

```
error C2065: 'wPARAM' : undeclared identifier
error C2143: syntax error : missing ')' before 'string'
error C2059: syntax error : ')' 
```

this->Handle <--- （错误）没有从 System::IntPtr 到 HWND 的合适转换

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:58:49.420

您需要的符号是`WPARAM`（全部大写），而不是“wPARAM”。

另请注意，`WM_SETTEXT`实际上将字符串参数作为`lParam`值，而不是`wParam`：

```
SendMessage(this->Handle, WM_SETTEXT, 0, (LPARAM)"Some Window Title"); 
```

# sqlite - SQLite 查询将连续的数字范围分组到不同的分组集中

> ID：15652706
> 
> 赞同：1
> 
> 时间：2013-03-27T05:54:34.443
> 
> 标签：sqlite

我想得到下表的岛屿：

```
Group    MemberNo
A           100
A           101
A           200
A           201
A           202
A           203
X           100
X           101
A           204
X           301
X           302
A           500
A           600 
```

我想使用 SQL（岛屿）得到这个结果：

```
Group  FromMemberNo      ToMemberNo
A             100             101
A             200             204
X             100             101
X             301             302
A             500             500
A             600             600 
```

我已经看到了很多代码/论坛，但没有使用 SQLite，因为 SQLite 没有 CTE。

100-101 是连续的，因此它将被组合为一个。

有谁知道如何在 SQLite 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:22:00.090

最快的方法是循环遍历该表的有序记录并手动收集岛屿。

在纯 SQL（作为面向集合的语言）中，这并不容易。

首先，我们找出哪些记录是岛屿中的第一个。第一条记录没有先前的记录，即具有相同组但具有较小组的记录`MemberNo`：

```
SELECT "Group",
       MemberNo AS FromMemberNo
FROM ThisTable AS t1
WHERE NOT EXISTS (SELECT 1
                  FROM ThisTable AS t2
                  WHERE t2."Group" = t1."Group"
                    AND t2.MemberNo = t1.MemberNo - 1) 
```

要找到一个岛的最后一条记录，我们必须找到最大的记录，`MemberNo`它仍然属于同一个岛，即具有相同的组，并且`MemberNo`岛上的所有s都是连续的。`MemberNo`我们通过计算它们在第一个和最后一个记录中的值之间的差异来检测连续的 s。带有 group和 first`MemberNo`的岛的最后一个可以这样计算：`G``MemberNo` `M`

```
SELECT MAX(MemberNo) AS LastMemberNo
FROM ThisTable AS t3
WHERE t3."Group" = G
  AND t3.MemberNo - M + 1 = (SELECT COUNT(*)
                             FROM ThisTable AS t4
                             WHERE t4."Group" = G
                               AND t4.MemberNo BETWEEN M AND t3.MemberNo) 
```

最后，将其插入第一个查询：

```
SELECT "Group",
       MemberNo AS FromMemberNo,
       (SELECT MAX(MemberNo)
        FROM ThisTable AS t3
        WHERE t3."Group" = t1."Group"
          AND t3.MemberNo - t1.MemberNo + 1 = (SELECT COUNT(*)
                                               FROM ThisTable AS t4
                                               WHERE t4."Group" = t1."Group"
                                                 AND t4.MemberNo BETWEEN t1.MemberNo AND t3.MemberNo)
       ) AS LastMemberNo
FROM ThisTable AS t1
WHERE NOT EXISTS (SELECT 1
                  FROM ThisTable AS t2
                  WHERE t2."Group" = t1."Group"
                    AND t2.MemberNo = t1.MemberNo - 1) 
```

# ios - 将大小为 10x10 的 UIImageView 设置为 UIView 的背景

> ID：15652707
> 
> 赞同：0
> 
> 时间：2013-03-27T05:54:41.310
> 
> 标签：ios, objective-c, uiview, uiimageview, uiimage

我有大小为 10x10 像素的图像，我需要将图像设置为 UIView 的背景，图像水平和垂直复制，而不是拉伸。可以用ios做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T05:57:26.587

你可以这样做：

```
view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"bodyBG"]]; 
```

它默认水平和垂直复制。

# ios - 用于在 youtube 应用中打开特定 youtube 页面的 iOS url 方案

> ID：15652715
> 
> 赞同：4
> 
> 时间：2013-03-27T05:55:25.933
> 
> 标签：ios, objective-c, url, youtube

无论如何使用 iOS URL 方案将 YouTube 打开到特定用户的个人资料我已经尝试过 youtube://user/myusername 但这似乎不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-24T10:42:24.893

要在 Youtube 应用中打开一个 Youtube 页面（如果它已安装在设备上），您可以检查设备是否可以打开该页面：

```
// URL scheme for youtube app
NSString *youtubeURL = @"youtube://www.youtube.com/user/";

// Page name(or channel name)
NSString *youtubePageName = @"YourPageName";

// Check if the device can open in Youtube app or not.
if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString: [youtubeURL stringByAppendingString:youtubePageName]]]){
    // Open in Youtube app
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString: [youtubeURL stringByAppendingString:youtubePageName]]];
}else{
    // If device cannot open in youtube app, open the page in browser.
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString: @"http://www.youtube.com/user/YourPageName"]];
} 
```

这个解决方案对我有用

iOS 9 编辑：目标应用程序的 URL 方案必须添加到`LSApplicationQueriesSchemes`key 下的 info.plist。

这是一篇相关文章：[iOS 9 not opening Instagram app with URL SCHEME](https://stackoverflow.com/questions/30987986/ios-9-not-opening-instagram-app-with-url-scheme/30988328#30988328)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T06:33:53.980

不，几周前我也在寻找同样的东西，但我什么也没找到。相反，我选择使用 UIWebView 来显示 youtube 频道或使用`openURL:` `UIApplication`' 方法通过 Safari 打开频道。

如果你想节省一些时间，你可以在[这个](https://github.com/tonisalae/TSMiniWebBrowser)Github 页面使用易于实现的 TSMiniWebBrowser 的控件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T05:57:56.080

此论坛帖子缺乏回复表明目前可能没有办法做到这一点：[YouTube iOS URL Scheme for Channels](http://productforums.google.com/forum/#!searchin/youtube/url%2420scheme/youtube/42DmqMPXHOQ/LfOWjwiHcuEJ)

但您也许可以在 YouTube 的 iOS 应用[反馈页面](http://support.google.com/youtube/bin/request.py?contact_type=satisfaction_survey_ios)上请求该功能。同时，我建议只链接到用户的 HTML YouTube 页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-18T11:09:38.627

这是 youtube Channel Url 方案，尝试在 UIWebView 中加载它，它会起作用。

[http://m.youtube.com/#/user/channel_name](http://m.youtube.com/#/user/channel_name)例如[http://m.youtube.com/#/user/whartonmagazine](http://m.youtube.com/#/user/whartonmagazine)

# flash - Flash CS6 的 JSFL 打字机效果

> ID：15652716
> 
> 赞同：2
> 
> 时间：2013-03-27T05:55:27.057
> 
> 标签：flash, flash-cs6, jsfl

希望这是一个快速的 - 自从 cs3 和以下 jsfl 打字机效果开始工作以来，我没有接触过 flash。我不确定是否存在错误，但在 CS6 中效果实际上是向后工作的 - 好像它已经反转了选择？最后一个字母首先动画，而不是第一个动画。

有谁知道解决方案？JSFL 下面

* * *

```
var doc = fl.getDocumentDOM();

doc.breakApart();
doc.distributeToLayers();
doc.selectAll();

var obs = doc.selection;
doc.getTimeline().insertFrames( obs.length * 2, true, 1); 

var tl = doc.getTimeline();
var total = obs.length;
var i = total + 1;

while( i-- ){
    tl.setSelectedLayers( i, true );
    tl.cutFrames(0);
    tl.pasteFrames( i * 2 );
    tl.clearFrames(0, (i * 2));

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:24:37.807

也许分发到层的顺序在某些时候发生了逆转。无论如何，简单地反转图层选择对我有用：

```
tl.setSelectedLayers( total - i, true ); 
```

# d - Object.Error：打印 std.algorithm.cartesianProduct 的结果时发生访问冲突

> ID：15652718
> 
> 赞同：4
> 
> 时间：2013-03-27T05:56:02.760
> 
> 标签：d, phobos

我正在为 x86 使用 DMD 2.062。

```
module test;    

private enum test1
{
    one,
    two,
    three,
}

private enum test2
{
    one,
    two,
    three,
}

auto ct = cartesianProduct([EnumMembers!test1], [EnumMembers!test2]);

unittest
{
    import std.stdio;
    foreach (n, m; ct)
    {
        writeln(n, " ", m);
    }
} 
```

该程序打印出：

```
one one
two one
three one 
```

然后抛出访问冲突错误。我是否错误地使用了笛卡尔产品，或者这是函数中的错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T09:40:13.603

Tiny bit of both, probably. The issue here is that `ct` is attempted to be evaluated at compile-time and produces result range that is used in run-time. I guess either CTFE or cartesianProduct does not expect such scenario and something bad happens that involves using invalid memory. I think it *should* have either work, or be a compile-time error, but that won't help you and belongs to bug tracker.

What does matter here, though is that everything will work if you move `ct` initialization to unit-test body or `static this()` module constructor. What you seem to miss is that D does not support initialization of global variables at program start-up. Value assigned to global is always evaluated at compile-time, which often "just works", often results in compile-time error (if initialization is not CTFE-able) and in this case results in weird behavior :)

What you may want is this code:

```
auto Test1Members = [ EnumMembers!test1 ];
auto Test2Members = [ EnumMembers!test2 ];
alias CT = typeof(cartesianProduct(Test1Members, Test2Members));
CT ct;

static this()
{
    ct = cartesianProduct(Test1Members, Test2Members);
} 
```

In general, interconnection between compile-time data and run-time data for complex types as arrays or associative arrays is very tricky with current D front-end implementation and requires lot of attention.

# cocoa - 通过双击运行.app并链接dylibs

> ID：15652719
> 
> 赞同：0
> 
> 时间：2013-03-27T05:56:10.790
> 
> 标签：cocoa, dylib, xcode4.6

有人可以告诉我如何通过直接双击它而不运行xcode来启动（运行）.app（mac可执行文件）。我尝试使用可可应用程序，如何链接或加载.app的依赖dylib。

以及如何使用 DYLD_LIBRARY_PATH 环境变量在 info.plist 中给出 dylib 的相对路径。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:08:40.373

好像可以在存档的时候直接双击运行，在管理器中“导出为称谓”，结束后，可以复制到任何地方运行。

顺便说一句，当你在第一次启动这个应用程序的Mac上第一次双击它时，只有在右键菜单中使用“打开”来启动它，它才会运行，然后，它会按你的意愿运行.

# ruby - Module.fun 和 fun 有什么区别？

> ID：15652724
> 
> 赞同：0
> 
> 时间：2013-03-27T05:56:25.017
> 
> 标签：ruby

```
module MyMod
  def fun1
  #...
  end 

  def MyMod.fun2
  #...
  end
end 
```

fun1 和 MyMod.fun2 有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T06:00:53.897

`fun1`是一个实例方法。只有当任何类在其定义中包含该模块时才能访问它。

```
p RUBY_VERSION

module MyMod

  def fun1
  p "hi"
  end 

  def MyMod.fun2
  p "hello"
  end
end

class Foo
include MyMod
end
Foo.new.fun1
MyMod.fun2
p MyMod.instance_methods(false)
p MyMod.public_class_method("fun2") 
```

*输出：*

```
"2.0.0"
"hi"
"hello"
[:fun1]
MyMod 
```

# maven - 类未发布到 Maven 的嵌入式 tomcat 服务器（tomcat:run）

> ID：15652731
> 
> 赞同：0
> 
> 时间：2013-03-27T05:57:06.593
> 
> 标签：maven, maven-plugin, maven-tomcat-plugin

我在我的项目中使用 eclipse indigo IDE、apache tomcat 6.0 服务器、m2e 插件、jdk 1.6 软件。

在我对 java 代码进行一些更改后，我会进行 clean & maven build 并使用 maven ie 'tomcat:run' plugin 命令启动 tomcat 嵌入式服务器。但是在完成所有步骤之后，我根本看不到我的更改。

现在，在我构建所有类之后，我看到所有类文件都在“目标”文件夹中生成，我确认了它的生成时间。所以我相信这些类文件不会发布到 Maven 的嵌入式 tomcat 服务器中原因。

PS - 我不启动/停止或使用在 eclipse 中配置的 tomcat 服务器，因为我相信 maven 的嵌入式 tomcat 服务器不会在 eclipse 中使用 tomcat 服务器，它可以自行工作。如果我在这里错了，请纠正我。

请帮帮我。

[更新]：可能对面临类似问题的人有用。

上述问题是因为 eclipse 项目设置文件损坏，因为当我在不同的工作区中导入相同的项目时遇到同样的问题。但是当我在新工作区中单独包含修改后的代码时，它工作正常。我所有的改变都得到了体现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:42:24.457

使用 tomcat7:run 然后配置 backgroundProcessorDelay 见[http://tomcat.apache.org/maven-plugin-2.1/tomcat7-maven-plugin/run-mojo.html#backgroundProcessorDelay](http://tomcat.apache.org/maven-plugin-2.1/tomcat7-maven-plugin/run-mojo.html#backgroundProcessorDelay) with > 0

# opencv - 线检测openCV

> ID：15652736
> 
> 赞同：0
> 
> 时间：2013-03-27T05:57:45.373
> 
> 标签：opencv

我正在运行一个代码来检测 Visual Studio 2008 中 openCV 2.1 中的行，这是代码的一部分：

```
 IplImage* src=cvLoadImage("parrot.png");

                  IplImage* dst = cvCreateImage( cvGetSize(src), 8, 1 );
                  IplImage* color_dst = cvCreateImage( cvGetSize(src), 8, 3 );
                  CvMemStorage* storage = cvCreateMemStorage(0);
                  CvSeq* lines = 0;
                  int i;
          int choice=0;
                  cvCanny( src, dst, 10, 100, 3 ); 
```

代码编译正常，但运行时出现以下错误：OpenCV Error: Unsupported format or combination of formats () in unknown functi n, file ........\ocv\opencv\src\cv\cvcanny.cpp ，第 66 行

有关如何解决此问题的任何提示...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:56:11.303

默认情况下，当您加载图像时，它会将其加载为彩色图像[`cvLoadImage(const char* filename, int iscolor=CV_LOAD_IMAGE_COLOR)`](http://opencv.willowgarage.com/documentation/c/reading_and_writing_images_and_video.html)。Canny 需要单通道图像作为输入和输出[`void cvCanny(const CvArr* image, CvArr* edges, double threshold1, double threshold2, int aperture_size=3)`](http://opencv.willowgarage.com/documentation/c/imgproc_feature_detection.html)。因此，我认为如果您将图像加载为灰度或稍后将其转换为灰度，它应该可以工作。

任何一个：

```
IplImage* src=cvLoadImage("parrot.png", CV_LOAD_IMAGE_GRAYSCALE ); 
```

或者：

```
cvtColor(src, src, CV_RGB2GRAY); 
```

# c# - 使用来自 httpwebrequest windows phone 的 cookie 访问网站

> ID：15652739
> 
> 赞同：0
> 
> 时间：2013-03-27T05:57:52.423
> 
> 标签：c#, windows-phone-7, windows-phone-8

我没有使用 cookie 的经验，我尝试使用 cookie（我从`httpwebrequest` **POST**方法获得）来访问网站。在**POST**方法中，我完成了身份验证部分，最后得到了 cookie。我不知道如何使用这个 cookie 访问一个网站，它类似于这个[HttpWebRequest POST Method](http://www.youtube.com/watch?annotation_id=annotation_277791&feature=iv&src_vid=7Wzel-g1U54&v=UV5_b5oaUQk)。

希望任何人都可以给我一些建议，指针或一些示例代码。谢谢你的帮助。

这是我到目前为止完成的代码。

```
private void GetResponseCallback(IAsyncResult asynchronousResult)
        {
            HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
            // End the operation
            HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);

            Stream streamResponse = response.GetResponseStream();
            StreamReader streamRead = new StreamReader(streamResponse);

            using (IsolatedStorageFile isf =
               IsolatedStorageFile.GetUserStoreForApplication())
            {
                using (IsolatedStorageFileStream isfs = isf.OpenFile("CookieExCookies",
                    FileMode.OpenOrCreate, FileAccess.Write))
                {
                    using (StreamWriter sw = new StreamWriter(isfs))
                    {
                        foreach (Cookie cookieValue in response.Cookies)
                        {
                            sw.WriteLine(cookieValue.ToString());
                        }
                        sw.Close();
                    }
                }
            }
            // Close the stream object
            streamResponse.Close();
            streamRead.Close();
            response.Close();

            //allDone.Set();
        } 
```

TextBox 中的 cookie 存储

```
private void ReadFromIsolatedStorage()
    {
        using (IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication())
        {
            using (IsolatedStorageFileStream isfs =
               isf.OpenFile("CookieExCookies", FileMode.OpenOrCreate))
            {
                using (StreamReader sr = new StreamReader(isfs))
                {
                    tbTesting.Text = sr.ReadToEnd();
                    sr.Close();
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:13:01.747

您可以使用 CookieContainer 类来获取和设置 cookie。当你使用它时，它会为你处理一切。您不必显式手动设置 cookie。检查下面的代码。

首先创建一个 CookieContainer 类的实例。

```
CookieContainer cookieContainer = new CookieContainer(); 
```

然后将其用于身份验证，然后将其分配给您用于身份验证的每个请求

```
//Login request to get the cookie
HttpWebRequest req = (HttpWebRequest)WebRequest.Create("http://mydomain.com/login.svc");
req.Method = "POST";
if (req.SupportsCookieContainer)
   req.CookieContainer = cookieContainer;
.. rest of your code..

//Any other request which needs a cookie
HttpWebRequest req = (HttpWebRequest)WebRequest.Create("http://mydomain.com/getuserdata.svc");
req.Method = "POST";
if (req.SupportsCookieContainer)
   req.CookieContainer = cookieContainer;
.. rest of your code.. 
```

# ios - 如何获取核心数据中现有实体（表）的列表

> ID：15652745
> 
> 赞同：9
> 
> 时间：2013-03-27T05:58:26.840
> 
> 标签：ios, core-data

如何获取核心数据中特定模式（托管对象模型）的现有实体（表）列表。我刚刚开始实施核心数据概念并坚持这些观点。

就像是：

```
SELECT COUNT(*) FROM information_schema.tables WHERE table_schema = 'dbName'; 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T12:39:01.903

您应该通读[Apple 的核心数据编程指南](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)。要获取特定 的实体`NSManagedObjectModel`，您可以使用以下方法之一（假设您有一个`NSManagedObjectModel`命名的`objectModel`）：

```
NSArray *myEntities = [objectModel entities];
// Array of all entities in the model 
```

或者

```
NSDictionary *myEntities = [objectModel entitiesByName];
// Dictionary of entities in the model, with the entity names as keys 
```

您可以在[NSManagedObjectModel 类参考](http://developer.apple.com/library/mac/#documentation/cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectModel_Class/Reference/Reference.html#//apple_ref/occ/cl/NSManagedObjectModel)中阅读更多内容。

看来您来自 SQL 背景（就像我一样）。Core Data 中有许多不同的概念 - 有时会更好，一旦你理解它们，有时需要比你可能习惯的简单 SQL 语句更多的工作。我认为在没有 SQL“包袱”的情况下使用 Core Data 并将其视为第一次学习如何使用数据库是很重要的——这将有助于避免挫败感。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-09-01T14:49:35.707

在 Swift 中，它将是：

```
let model: NSManagedObjectModel

let entities: [NSEntityDescription] = model.entities
// or
let entitiesByName: [String: NSEntityDescription] = model.entitiesByName 
```

并获取名称列表

```
let enititesNames: [String] = entities.compactMap(\.name) 
```

# c - CUDA中的强制对齐？

> ID：15652749
> 
> 赞同：0
> 
> 时间：2013-03-27T05:58:48.217
> 
> 标签：c, cuda, alignment, nvidia

有没有办法创建一个二维数组 a[][]，其中每个 a[i] 本身都被迫与 CUDA 中的其他数据类型对齐？

我想做这样的事情：

```
__shared__ unsigned char a[20][8];// where a[i] is aligned to 8-byte boundary;

double t=*((double *)(a[2])); 
```

甚至是这样的：

```
__shared__ unsigned char a[20][9];// where a[i] is aligned to 8-byte boundary;

double t=*((double *)(a[2])); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:43:41.947

使用工会怎么样？

```
union my_union_type {
    char   a[8];
    double t;
};

my_union_type var[20];

char   a = var.a[2][3];
double t = var.t[2]; 
```

这不等同于您的第二个示例，因为（正如 talonmies 指出的那样）您的示例是非法的并且会生成无效代码，而我的代码会在每个元素之后插入 7 个字节的正确对齐方式。但我认为它最接近您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:43:08.303

您显示的两个代码片段在 CUDA 中都是非法的。

所有当前的硬件都需要将类型与字大小的边界对齐。在您的示例中，仅从 , , 等读取`a[0]`是`a[8]`有效`a[16]`的，因为硬件要求任何`double`读取都发生在 8 字节对齐的边界处。其他任何事情都会从设备产生运行时错误。即使您尝试使用结构，编译器也会通过填充来强制对齐。如果您想要不同的*有效*对齐方式，该语言支持结构的[__align__ 说明符](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#device-memory-accesses)。

这是一个冗长的说不的方式。

# bash - Bash脚本使用变量替换文本文件中的两个字段

> ID：15652752
> 
> 赞同：0
> 
> 时间：2013-03-27T05:58:55.787
> 
> 标签：bash, replace, sed, awk

这应该是一个简单的解决方法，但目前我无法完全理解它。

我有一个名为的逗号分隔文件`my_course`，其中包含课程列表以及有关它们的一些信息。

我需要获取有关最后两个字段的用户输入并相应地更改它们。

每个字段的构造如下： `CourseNumber,CourseTitle,CreditHours,Status,Grade`

示例文件：

```
CSC3210,COMPUTER ORG & PROGRAMMING,3,0,N/A
CSC2010,INTRO TO COMPUTER SCIENCE,3,0,N/A
CSC1010,COMPUTERS & APPLICATIONS,3,0,N/A 
```

我得到了 3 件事的用户输入：`Course Number`、`Status (0 or 1)`和`Grade (A,B,C,N/A)`

到目前为止，我已经尝试匹配包含课程编号的行并更改最后两个字段。我还没有打算弄清楚如何使用 sed 修改最后两个字段，所以我正在使用这种可怕的 awk 和 sed 混乱：

```
temporary=$(awk -v status=$status -v grade=$grade '
BEGIN { FS="," }; $(NF)=""; $(NF-1)="";
/'$cNum'/ {printf $0","status","grade;}'  my_course)

sed -i "s/CSC$cNum.*/$temporary/g" my_course 
```

我在这里遇到的问题是课程标题​​中的字段数可以在 1 到 4 之间，所以我不能轻易地打印前 n 个字段。我尝试删除最后两个字段并附加状态和等级的新值，但这对我不起作用。

注意：我已经完成检查以确保用户输入有效数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:14:29.760

使用一个简单的 awk 脚本：

```
BEGIN {
  FS=","
  OFS=FS
}

$0 ~ course {
  $(NF-1)=status
  $NF=grade
} {print} 
```

并在命令行上，为课程、状态和成绩等各种参数设置三个参数。

在行动：

```
$ cat input
CSC3210,COMPUTER ORG & PROGRAMMING,3,0,N/A
CSC2010,INTRO TO COMPUTER SCIENCE,3,0,N/A
CSC1010,COMPUTERS & APPLICATIONS,3,0,N/A

$ awk -vcourse="CSC3210" -vstatus="1" -vgrade="A" -f grades.awk input
CSC3210,COMPUTER ORG & PROGRAMMING,3,1,A
CSC2010,INTRO TO COMPUTER SCIENCE,3,0,N/A
CSC1010,COMPUTERS & APPLICATIONS,3,0,N/A

$ awk -vcourse="CSC1010" -vstatus="1" -vgrade="B" -f grades.awk input
CSC3210,COMPUTER ORG & PROGRAMMING,3,0,N/A
CSC2010,INTRO TO COMPUTER SCIENCE,3,0,N/A
CSC1010,COMPUTERS & APPLICATIONS,3,1,B 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:14:36.130

只要您只看*最后*两个逗号，课程名称中有多少逗号并不重要： `sed -i "/CSC$cNum/ s/.,[^,]*$$/$status,$grade/"` 诀窍是`$`在模式中使用以匹配行尾。`$$`因为双引号。

并且不要费心构建“临时”行 - 仅将替换应用于与课程编号匹配的行。

# ruby-on-rails-3 - Capybara/RSpec 更好的日志记录？

> ID：15652754
> 
> 赞同：2
> 
> 时间：2013-03-27T05:59:08.933
> 
> 标签：ruby-on-rails-3, rspec, capybara

我很难调查测试失败的原因。我是一位非常有经验的程序员，并且精通一般调试技术，但我对 Capybara 和 RSpec 不熟悉，所以我希望有某种我不知道的工具可以帮助我。

简而言之，我有一个类似这样的测试：

```
expect { click('.fake_button'); sleep 1 }.to change { clicks.count }.by(1) 
```

当点击假按钮时，它会触发对 Rails 应用程序的 AJAX 调用，其中包括向数据库添加点击记录。我能想到许多可能导致此测试失败的事情，并且从日志中获取信息的成功有限。测试在开发中不会失败，只是偶尔会在测试中失败。测试环境的差异之一是测试是在我们办公室的服务器上针对云中的服务器运行的，因此存在网络延迟以及其他可能的问题。

这很难诊断，因为从失败的测试中得到的信息太少了，当然，当我读到有关失败的信息时，所有的数据库信息都被丢弃了。我知道`clicks.count`测试中没有改变，我可以推断`click('.fake_button')`成功，但由于服务器时间同步问题，我什至不能确定单击发生在右侧按钮上或 AJAX 调用是否已触发。

我想要一些工具来帮助我在 web 服务器日志中跟踪这个测试用例（例如，可能使用自动 URL 参数）、关于 Capybara 所做的详细日志记录以及网页记录发生故障，包括 cookie 值。我能得到这些吗？有这样的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T07:22:42.323

Capybara 模拟人类行为。测试代码完全符合需要。这是真正的用户应该期待的。我认为你不应该抱怨代码。

我认为可以增加等待时间，比如 1 到 2，因为您的网络延迟，但它不应该超过一个合理的值，否则应用程序不能像真实用户预期的那样工作。

调试 Capybara 代码，我总结了三种方法：

1.  将“save_and_open_page”添加到您想要查看结果的位置。然后在测试过程中会出现一个保存的html页面。（我忘记是否应该添加“启动”宝石）

2.  暂时把这个测试设置成JS，看看这个测试怎么样。

    ```
    scenario "a fake test", js: true do
      # code here
    end 
    ```

    这样做会弹出一个真正的浏览器，Capybara 会逐步向您展示它是如何播放代码的。

3.  只需运行`$ tail log/test.log`以显示最近发生的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T22:12:30.937

以@Billy 的建议为基础，`log/test.log`并没有给我任何有用的信息，而且我已经在使用`js: true`，所以我尝试了这个：

```
begin
  expect { click('.fake_button'); sleep 1 }.to change { clicks.count }.by(1)
rescue Exception => e
  begin
    timestamp = Time::now.strftime('%Y%m%d%H%M%S%L')
    begin
      screenshot_name = "tmp/capybara/capybara-screenshot-#{timestamp}.png"
      $stderr.puts "Trying to save screenshot #{screenshot_name} due to test failure"
      page.save_screenshot(screenshot_name)
    rescue Exception => inner
      $stderr.puts "Ignoring exception #{inner} while trying to save screenshot of test page"
    end
    begin
      # Page saved by Capybara under tmp/capybara/ by default
      save_page "capybara-html-#{timestamp}.html"
    rescue Exception => inner
      $stderr.puts "Ignoring exception #{inner} while trying to save HTML of failed test page"
    end
  ensure
    raise e
  end
end 
```

后来我通过执行以下操作更改了测试本身以利用 Capybara 的 AJAX 同步功能：

```
 starting_count = clicks.count
    click('.fake_button')
    page.should have_css('.submitted')     # Capybara is smart enough to wait for this to happen
    clicks.count.should == starting_count + 1 
```

请注意，我正在寻找的 CSS 是通过 AJAX 回调在 JavaScript 中添加到页面的内容，因此它的显示是 AJAX 调用完成的信号。

这些`rescue`块很重要，因为屏幕截图的失败率很高，因为没有足够的内存来呈现整个页面并将其转换为图像。

**编辑**

虽然我还没有尝试过，但有希望的解决方案是[Capybara::Screenshot](https://github.com/mattheworiordan/capybara-screenshot)，它会在任何失败时自动保存屏幕截图和 HTML。只是阅读代码，当屏幕截图失败时它看起来会出现问题，并且我无法判断屏幕截图被触发时页面将处于什么状态，但它看起来确实值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T00:13:54.620

调试测试的一个好方法是使用 irb 来观察浏览器中实际发生的情况。RSpec 失败通常会为简单的案例提供不错的信息，但对于更复杂的事情，我要么将案例拆分直到它变得简单，要么将其放入 irb 进行实时会话，以确保它完成它应该做的事情。

确保使用 :selenium 作为您的驱动程序，您应该会看到 firefox 出现并且能够被您的 irb 会话驱动。

# .net - 来自 Font.GetHeight（图形图形）的 Windows 窗体“System.ArgumentException：参数无效”

> ID：15652756
> 
> 赞同：3
> 
> 时间：2013-03-27T05:59:12.727
> 
> 标签：.net, winforms, gdi+, argumentexception

我正在支持使用 dotnet 3.5 和 ComponentFactory Krypton v4.4.0.0 的 winforms 应用程序，我最近实现了 AppDomain.CurrentDomain.UnhandledException 和 Application.ThreadException 处理程序来通知我客户端上发生的异常，并发现出现了很多错误在日志中。这个现在正在我的脑海中：

```
System.ArgumentException: Parameter is not valid.
 at System.Drawing.Font.GetHeight(Graphics graphics)
 at System.Drawing.Font.GetHeight()
 at System.Drawing.Font.get_Height()
 at System.Windows.Forms.Control.set_Font(Font value)
 at System.Windows.Forms.DataGridViewComboBoxEditingControl.ApplyCellStyleToEditingControl(DataGridViewCellStyledataGridViewCellStyle)
 at System.Windows.Forms.DataGridView.BeginEditInternal(Boolean selectAll)
 at System.Windows.Forms.DataGridView.ProcessKeyEventArgs(Message& m)
 at System.Windows.Forms.Control.ProcessKeyMessage(Message& m)
 at System.Windows.Forms.Control.WmKeyChar(Message& m)
 at System.Windows.Forms.Control.WndProc(Message& m)
 at System.Windows.Forms.DataGridView.WndProc(Message& m)
 at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
 at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
 at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam,IntPtr lparam) 
```

请注意，堆栈跟踪完全在 Windows 代码中。还有一个通过我的一个课程：

```
System.ArgumentException: Parameter is not valid.
  at System.Drawing.Font.GetHeight(Graphics graphics)
  at System.Drawing.Font.GetHeight()
  at System.Drawing.Font.get_Height()
  at System.Windows.Forms.Control.set_Font(Font value)
  at MyOrg.MyApp.WindowsClient.GuiControls.MaskedTextBoxEditingControl.ApplyCellStyleToEditingControl(DataGridViewCellStyledataGridViewCellStyle)
  at System.Windows.Forms.DataGridView.BeginEditInternal(Boolean selectAll)
  at System.Windows.Forms.DataGridView.ProcessKeyEventArgs(Message& m)
  at System.Windows.Forms.Control.ProcessKeyMessage(Message& m)
  at System.Windows.Forms.Control.WmKeyChar(Message& m)
  at System.Windows.Forms.Control.WndProc(Message& m)
  at System.Windows.Forms.DataGridView.WndProc(Message& m)
  at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
  at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
  at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

这是该片段的代码：

```
public void ApplyCellStyleToEditingControl(DataGridViewCellStyle dataGridViewCellStyle)
{
  this.Font = dataGridViewCellStyle.Font;
  this.ForeColor = dataGridViewCellStyle.ForeColor;
  this.BackColor = dataGridViewCellStyle.BackColor;
  this.TextAlign = translateAlignment(dataGridViewCellStyle.Alignment);
} 
```

这并没有告诉我太多。

“System.ArgumentException：参数无效。” 错误是非常可悲的，给我的余地很少，但是使用 dotPeek 我查看了 Font.Get_Height(Graphics g) 的代码，发现这是一个 GDI+ 错误，特别是 GetFontHeight：

```
public float GetHeight(Graphics graphics)
{
  if (graphics == null)
  {
    throw new ArgumentNullException("graphics");
  }
  else
  {
    float size;
    int fontHeight = SafeNativeMethods.Gdip.GdipGetFontHeight(new HandleRef((object) this, this.NativeFont), new HandleRef((object) graphics, graphics.NativeGraphics), out size);
    if (fontHeight != 0)
      throw SafeNativeMethods.Gdip.StatusException(fontHeight);
    else
      return size;
  }
} 
```

这是 GDI+ 方法： [http ://www.jose.it-berater.org/gdiplus/reference/flatapi/font/gdipgetfontheight.htm](http://www.jose.it-berater.org/gdiplus/reference/flatapi/font/gdipgetfontheight.htm)

[我的状态错误是无效参数，如此处所述：http: //msdn.microsoft.com/en-us/library/windows/desktop/ms534175](http://msdn.microsoft.com/en-us/library/windows/desktop/ms534175(v=vs.85).aspx) (v=vs.85) .aspx

不幸的是，这些都不能帮助我解决 Graphics 对象的问题。这是来自现场用户未处理的异常。我最近有一个内存泄漏，这是由泄漏的 EventHandler 和消耗所有可用的 GDI 句柄引起的，但我已经修复了这个问题，所以现在我不确定这是内存泄漏、GDI 句柄泄漏还是只是坏的配置某个由用户做一些不寻常的事情触发的地方。

有人有想法么？非常感谢帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-18T15:07:48.010

我刚刚遇到了这个问题，花了几个小时才弄清楚，我将其追溯到代码库的其他部分，从控件获取对字体的引用，然后对该字体执行 Dispose()。我能够通过创建一个 Windows 窗体项目、添加一个 TreeView 和一个 DataGridView 并在 TreeView 上执行它来重现这一点

treeView.Font.Dispose();

希望我发现的内容对遇到此问题的任何人都有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-09T18:51:21.487

我正在使用 Krypton 4.4 和 .NET 4.0 并且遇到了相同的行为，但它处理的是 KryptonComboBox。和 matao 一样，错误似乎根本不是通过我的代码，而是通过 Krypton 框架和 .NET 本身。

在对 Krypton 源代码进行一些调查并查看引发此错误时的堆栈跟踪后，我注意到 KryptonComboBox（或 Krypton 框架的一部分）附加到 Microsoft.Win32.SystemEvents.OnUserPreferenceChanged 事件，这让我开始思考. 也许这没有通过我的代码的原因是这个事件是在某个时候从操作系统触发的。它仍然没有解释为什么会抛出错误，但我开始以不同的方式思考这个问题。

现在，每当发生此错误时，它总是会遍历 KryptonComboBox，但无论如何都不一致。它实际上很难调用。但是，由于 OnUserPreferenceChanged 事件触发，我开始研究诸如全局策略更改或会触发该事件的东西。幸运的是，我注意到如果我运行我的 WinForms 应用程序并启动 Internet Explorer，我可以可靠地弹出这个异常。不要问我为什么会这样，但显然启动 IE 会以某种方式触发 OnUserPreferenceChanged 事件。

现在我有了触发异常的可靠方法，我开始在我的代码中查看 KryptonComboBox 实例并注释掉整个模块，看看我是否可以让这个异常返回。最终，我发现了这个错误，结果是我的 WinForms 应用程序中的代码连接方式出现了错误。具体来说，这是错误：

```
 KryptonComboBox detailView = new KryptonComboBox();
    detailView.Sorted = true;
    detailView.Text = "View";
    detailView.Items.Add(new KryptonListItem("Details", "Detail View"));
    detailView.Items.Add(new KryptonListItem("List", "List"));
    detailView.Items.Add(new KryptonListItem("Tile", "Tiles"));

    ToolStripMenuItem mItem = new ToolStripMenuItem();
    mItem.Tag = detailView;
    mItem.Text = detailView.Text;
    mItem.Click += new EventHandler(contextItem_Click); 
```

我的猜测是，由于`detailView`没有连接到 Control 管道，Krypton 框架在尝试更新 KryptonCombBox 控件的 Palette 时存在一些问题。

我注意到的一个奇怪的细微差别是，在 Krypton 框架内引发第一个异常之后，它似乎破坏了 Graphics 对象。随后调用更新调色板（切换氪控件的颜色），错误总是会抛出，但通过调用堆栈中的不同区域（总是从我的源代码中的某个地方启动）。

Matao，我不确定这是否能回答您的问题，但我相信您可能对如何在 DataGridView 中连接控件有一些问题。也许您正在将控件与 DataGridView 中某物上的 Tag 属性相关联？

我希望这能让您对您的问题有所了解。

*** 编辑 ***

根据 Matao 的问题，我通过删除添加`KryptonComboBox`到`ToolStripMenuItem`. 相反，为了获得我想要的功能，我只是`ToolStripMenuItems`在.`DropDownItems``mItem`

我会查看您的源代码以查找未添加到控制管道的任何动态创建的控件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-08T13:11:17.690

对我来说，这是因为 DefaultFont 的 Dispose()

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2020-06-02T08:11:49.420

不要将 DataGrid 视图停靠到父布局

# azure - Azure/WebMatrix web.config 500 错误

> ID：15652757
> 
> 赞同：0
> 
> 时间：2013-03-27T05:59:17.267
> 
> 标签：azure, webmatrix-2

我尝试将 MIME 类型添加到 webmatrix web.config 文件以在 Azure 中运行：

```
<system.webServer>
     <staticContent>
         <mimeMap fileExtension=".json" mimeType="application/json" />
     </staticContent>
</system.webServer> 
```

但是在尝试加载 json 文件时出现 500（内部服务器错误）。

该网站在本地工作。

我需要在 Azure 中做些什么吗？

（编辑：）

我在 web.config 中的所有内容是：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
     <system.data>
    <DbProviderFactories>
        <remove invariant="System.Data.SqlServerCe.4.0" />
        <add invariant="System.Data.SqlServerCe.4.0" name="Microsoft® SQL Server®    Compact 4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" />
    </DbProviderFactories>
    </system.data>
<system.webServer>
  <staticContent>
<mimeMap fileExtension=".json" mimeType="application/json" />
</staticContent>
</system.webServer>
</configuration> 
```

没有 MIME 类型的位是由 webMatrix 生成的。

控制台错误：

GET [http://carlistings.azurewebsites.net/CarListings/data/cars.json?_dc=1364378861597&page=1&start=0&limit=25](http://carlistings.azurewebsites.net/CarListings/data/cars.json?_dc=1364378861597&page=1&start=0&limit=25) 500（内部服务器错误）

**更新**

该文件不会更改，而是由 Sencha Architect 教程应用程序中的 JavaScript 调用。

```
{
"img" : "2004_Porsche_911_Carrera_type_997.jpg",
"manufacturer" : "Porsche",
"model" : "911",
"price" : 135000,
"wiki" : "http://en.wikipedia.org/wiki/Porsche_997",
"quality" : [{
    "name" : "overall",
    "rating" : 1
},{
    "name" : "mechanical",
    "rating" : 4
},{
    "name" : "powertrain",
    "rating" : 2
},{
    "name" : "body",
    "rating" : 4
},{
    "name" : "interior",
    "rating" : 3
},{
    "name" : "accessories",
    "rating" : 2
}]
} 
```

**更新 2**

我注意到在本地运行应用程序（应用程序正常运行的地方），错误日志将 cars.json 文件显示为 application/json，而在 Azure 服务器上，它显示为 text/html。

看来 Azure 服务器正在使用其他内容忽略我的 web.config 文件......

（我已在 Azure 中启用调试，但还找不到错误列表...）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:08:39.900

HTTP 500 来自其他东西。

我准确地添加了您在新的空网站中所做的事情，结果符合预期。

测试 URL：http: [//jsonp.azurewebsites.net/demo.json](http://jsonp.azurewebsites.net/demo.json)

这是来自请求的提琴手跟踪：

```
GET http://jsonp.azurewebsites.net/demo.json HTTP/1.1
User-Agent: Fiddler
Host: jsonp.azurewebsites.net 
```

而且反应也如预期：

```
HTTP/1.1 200 OK
Content-Length: 30
Content-Type: application/json
Last-Modified: Wed, 27 Mar 2013 09:03:09 GMT
Accept-Ranges: bytes
ETag: "cc2c13e7c92ace1:0"
Server: Microsoft-IIS/7.5
.. aditional header omitted for readability
Date: Wed, 27 Mar 2013 09:03:52 GMT

{"title":"demo","count":10} 
```

我建议您打开所有可能的日志记录并检查错误日志。很可能你定义`system.webServer`了两次，或者类似的东西。查看有关如何启用日志记录的[SO question 。](https://stackoverflow.com/questions/13079457/azure-website-debugging)

**更新**

更新问题后，很明显这`cars.json`不是真实`static`文件。所以这个问题有点混乱。你在这个“文件”中执行什么类型的脚本？

**更新 2**

这是你的 json：http: [//jsonp.azurewebsites.net/demo.json](http://jsonp.azurewebsites.net/demo.json)

显然，您在网站设置的其余部分遇到问题。正如我所说 - 打开所有日志记录并检查真正的错误消息。

# plugins - 如何将插件安装到 Sublime Text 2 编辑器？

> ID：15652758
> 
> 赞同：147
> 
> 时间：2013-03-27T05:59:18.663
> 
> 标签：plugins, installation, sublimetext2

如何**将插件安装**到 Sublime Text 编辑器？

我想将**Emmet 插件**安装到 Sublime Text 2 编辑器。

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2013-03-27T06:03:37.617

您的 Sublime Text 2 安装目录中应该有一个`Data/Packages`文件夹。您需要做的就是下载插件并将插件文件夹放入`Packages`文件夹中。

或者，更简单的方法是安装`Package Control Plugin`by wbond。

去这里：[https ://sublime.wbond.net/installation](https://sublime.wbond.net/installation)

并按照安装说明进行操作。

完成后，您可以使用 Sublime 中的++`Ctrl`快捷方式，输入 install 并回车，然后搜索.`Shift``P``emmet`

编辑：您现在也可以立即按`Ctrl`+ `Shift`+`P`并使用命令“安装包控制”而不是按照安装说明进行操作。（在构建 3126 上测试）

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2013-10-01T08:59:36.553

首先安装[包控制](https://sublime.wbond.net/installation)。

最简单的安装方法是通过 Sublime Text 控制台。控制台可通过`Ctrl`+```快捷方式或 View > Show Console 菜单访问。打开后，将适用于您的 Sublime Text 版本的 Python 代码粘贴到控制台中。

**Sublime Text 3 的代码**

```
import urllib.request,os; pf = 'Package Control.sublime-package'; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); open(os.path.join(ipp, pf), 'wb').write(urllib.request.urlopen( 'http://sublime.wbond.net/' + pf.replace(' ','%20')).read()) 
```

**Sublime Text 2 的代码**

```
import urllib2,os; pf='Package Control.sublime-package'; ipp = sublime.installed_packages_path(); os.makedirs( ipp ) if not os.path.exists(ipp) else None; urllib2.install_opener( urllib2.build_opener( urllib2.ProxyHandler( ))); open( os.path.join( ipp, pf), 'wb' ).write( urllib2.urlopen( 'http://sublime.wbond.net/' +pf.replace( ' ','%20' )).read()); print( 'Please restart Sublime Text to finish installation') 
```

> 有关最新的安装代码，请查看[Package Control Installation Guide](https://packagecontrol.io/installation)。

**手动的**

如果由于某种原因控制台安装说明对您不起作用（例如在您的网络上有代理），请执行以下步骤来手动安装 Package Control：

1.  单击首选项 > 浏览包... 菜单
2.  浏览一个文件夹，然后进入 Installed Packages/ 文件夹
3.  下载 Package Control.sublime-package 并将其复制到 Installed Packages/ 目录中
4.  重新启动崇高文本

**[用法](https://sublime.wbond.net/docs/usage)**

包控制由命令面板驱动。要打开托盘，请按`Ctrl`+ `Shift`+ `p`（Win、Linux）或`CMD`+ `Shift`+ `p`（OSX）。所有 Package Control 命令都以 Package Control: 开头，因此首先键入 Package。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-10-24T17:52:54.103

## 没有包管理器

***我强烈建议使用其他答案中描述的包管理器，因为它对于安装和**更新都更加方便。但是，有时插件不在目录中，因此这里是手动方法。*

首先，在您的`Packages`目录中找到您的`Application Support/Sublime Text 2`目录，例如：

`~/Library/Application Support/Sublime Text 2/Packages`

现在，获取您的插件文件夹（例如，您可以从 GitHub 以 zip 的形式下载该文件夹）并将该文件夹复制到您的`Packages`目录中：

```
cp ~/Downloads/SomePlugin-master/ 
   ~/Library/Application\ Support/Sublime\ Text\ 2/Packages/SomePlugin` 
```

重新启动 Sublime Text 2 并繁荣！你完成了。

## 使用包管理器

请参阅此处的其他答案之一或转到[包管理器主页](http://wbond.net/sublime_packages/package_control)。

## 奖励积分

[如果有一个插件不在包管理器中，为什么不按照此处](https://sublime.wbond.net/docs/submitting_a_package)找到的步骤代表作者提交它。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-11-12T06:33:31.953

1.  [按照https://packagecontrol.io/installation](https://packagecontrol.io/installation)上的指示安装包管理器

2.  `Ctrl`使用+ `Shift`+打开包管理器`P`

3.  键入**Package Control**以显示与包相关的命令（安装包、删除包等）

好好享受！

[![在此处输入图像描述](../Images/c10bea0e188cb2310295d9dec4b56f06.png)](https://i.stack.imgur.com/Xof6T.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-27T06:02:11.763

您需要先安装 Package Control（从 Sublime 中的 Python 控制台。访问[http://wbond.net/sublime_packages/package_control](http://wbond.net/sublime_packages/package_control)了解更多信息），然后从他们的存储库安装 emmet。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-12T21:17:35.353

> 该指令已在 Mac OSx Catalina 上进行了测试。

安装后`Sublime Text 3`，安装`Package Control`通过`Tools > Package Control`。使用以下说明安装`package`或`theme`：

1.  按`CMD + SHIFT + P`

2.  选择`Package Control: Install Package`--- 或您需要的任何其他选项。 [![包装控制](../Images/a8f9770eaf27fef88c5de9a4674a467a.png)](https://i.stack.imgur.com/1LSKz.png)

3.  输入所需包或主题的名称，然后按 Enter。

[![安装包](../Images/7968d71fffe6453aed8f23049936b92a.png)](https://i.stack.imgur.com/B9QDw.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-12T17:35:21.547

根据约翰戴的回答

您的 Sublime Text 2 安装目录中应该有一个**Data/Packages 文件夹**。您需要做的就是下载插件并将插件文件夹放在 Packages 文件夹中。

*如果您正在搜索 Data/Packages 文件夹，您可以在此处找到它*

**Windows** : %APPDATA%\Sublime Text 2

**OS X** : ~/Library/Application Support/Sublime Text 2

**Linux**：~/.Sublime Text 2

**便携式安装**：Sublime Text 2/Data

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-30T15:07:15.007

vanilla Sublime 的安装代码块将来可能会更改。

这个[链接](https://packagecontrol.io/installation#st2)是安装 Sublime Text 2 插件支持的最安全的地方。

对于 Sublime Text 3，此[链接](https://packagecontrol.io/installation#st3)有效，包含代码。

[![在此处输入图像描述](../Images/79b31aac484ddc11202c05eedc6165d6.png)](https://i.stack.imgur.com/4HJma.jpg)

# c++ - 将 lambda 函数作为回调传递和存储

> ID：15652761
> 
> 赞同：24
> 
> 时间：2013-03-27T05:59:54.603
> 
> 标签：c++, c++11, callback, lambda

我想知道这是否是一种可接受的编写回调的方法：

存储回调：

```
struct EventHolder {
    std::function<void()> Callback;
    EventTypes::EventType Type;
};
std::vector<Events::EventHolder> EventCallbacks; 
```

方法定义：

```
void On(EventType OnEventType,std::function<void()>&& Callback)
{
    Events::EventHolder NewEvent;
    NewEvent.Callback=std::move(Callback);
    NewEvent.Type=OnEventType;
    EventCallbacks.push_back(std::move(NewEvent));
} 
```

绑定事件：

```
Button->On(EventType::Click,[]{
    // ... callback body
}); 
```

我最大的问题是关于按值传递回调。这是一种有效的方法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-27T06:47:38.050

这是存储事件处理程序的一种完全有效的方法。

但是，我想指出一些有关添加回调的函数签名的细节。您担心按值传递它而不是按引用传递。在您的示例中，您当前拥有：

```
void On(EventType OnEventType,std::function<void()>&& Callback) 
```

这很好，只要您只将它绑定到右值。但是，除非有特殊原因要禁止它，否则我建议您始终使用一种方法，该方法通过值或左值引用接受参数，并在认为必要时添加右值引用版本作为补充。

没有采用左值引用的方法意味着您的代码当前将无法编译，因为：

```
std::function<void()> func([](){/*something clever*/});
// Do something necessary with func, perhaps logging or debug prints.
Button->On(EventType::Click, func); 
```

为简单起见，无论何时您选择如何传递值，您都可以简单地遵循以下准则：

*   如果您需要一个副本或打算修改传入的值，而不希望更改传递的实际对象：按值传递。
*   如果您打算修改传入的值，并希望这些更改影响实际传递的对象：通过引用传递。
*   如果您不想更改传递的对象，但相信避免复制是有益的：通过 const 引用传递。
*   如果您通过值、引用或 const 引用获取参数，并相信可以使用输入参数是临时的知识来实现​​有价值的优化：也允许通过右值引用传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T06:06:31.003

是的。函数要么是原始函数指针，要么是其复制构造函数没有副作用的轻量级类，因此它们的副本必须充当原始对象，因此这种方法是完全可以的。但是为什么按值传递对象然后将其移动到原始容器中，您可以传递引用然后将其复制到容器中并具有接受 r 值引用的重载函数（应该不那么重要）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-29T15:36:41.983

我有几乎同样的问题。我想知道有多少监视器存在以及它们在哪里。

至少我放弃了，写了一个简短的结构。不好，但我只想要信息。

即使是我尝试过的 Lambda，也没有机会定义 Lambda ...不是固定的 Addr 和 second 不能构造为 CALLBACK ...

```
#include <WinUser.h>
#include <vector>
using namespace std;

struct _sMonitors{
        struct DispInfo {
            HMONITOR    hMon;
    //      HDC         dcMon;      // Everytime NULL (What ever!)
            RECT        pRcMon;
        };
        list< DispInfo> List;
        _sMonitors() {
            EnumDisplayMonitors(0, 0, Func, (LPARAM)this);
        }
        BOOL static CALLBACK Func(HMONITOR hMon, HDC dcMon, LPRECT pRcMon, LPARAM lParam){
            auto& Struct = *((_sMonitors*)lParam);
            Struct.List.push_back({ hMon,*pRcMon });
            return 1; 
        }
};
_sMonitors Monitors; 
```

正如我会用我的语言说的！Mann ging mir das auf den Sack...

# jquery - 如何在点击谷歌地图时获得 x,y 坐标

> ID：15652772
> 
> 赞同：0
> 
> 时间：2013-03-27T06:01:00.680
> 
> 标签：jquery, google-maps

我想要使​​用 jquery 在谷歌地图上单击的像素的 x,y 坐标。如何获得它？我只能得到纬度和经度值..但我需要左上角的位置..

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:08:57.463

尝试在容器上使用 click 事件，该事件将有一个`offsetX`和`offsetY`它是相对于容器的坐标。

看到这个小提琴：

[http://jsfiddle.net/N66hh/2/](http://jsfiddle.net/N66hh/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:01:32.017

点击事件的PageX，PageY会给出左上角的位置。

```
$('#map-canvas').click(function(event) {
        $("#tooltip").css('left', event.pageX);
        $("#tooltip").css('top',event.pageY);
}); 
```

[参考这个](http://jsfiddle.net/TmGg8/9/)

# android - 猴子说没有发现任何活动

> ID：15652774
> 
> 赞同：0
> 
> 时间：2013-03-27T06:01:13.103
> 
> 标签：android, testing, android-activity, monkey

这以前在我的设置中可以正常工作，现在即使对于测试应用程序也会出现此错误

默认清单文件如下所示；

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.test"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.test.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

猴子输出的图像

![在此处输入图像描述](../Images/0db5b82dd4e4f4def110de2b11969f42.png)

如果我没有错，项目名称和目录匹配，如下所示

![在此处输入图像描述](../Images/9045cde9c010e181a9dbc643ba50c5e2.png)

我不知道我在这里做错了什么..请帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:13:01.323

`-p <allowed-package-name>`在你的情况下`-p com.example.test`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:52:08.087

我已经在一台干净的新PC上安装了eclipse，现在奇怪的是它可以工作了..所以这个安装中的某些东西会产生这个错误..所以现在，找出原因......

# css - CSS换行问题

> ID：15652775
> 
> 赞同：0
> 
> 时间：2013-03-27T06:01:24.813
> 
> 标签：css

我在论坛中搜索了类似的 CSS 问题，但我的关键字并没有真正帮助。如果在其他地方问过这个问题，我很抱歉，但我找不到。

所以，简而言之，我是网站设计的新手，正在尝试为朋友建立一个网站。我有一个想法，正在一点一点地组合起来，但我遇到了一个奇怪的问题。这很难解释，所以我将发布两个链接并解释两者之间的区别：

[链路 1](http://vinylwines.com/ac_new/index1.php)和 [链路 2](http://vinylwines.com/ac_new/index2.php)

如果您查看这两个站点，我遇到的问题应该很清楚。基本上，我有一个“内容”部分，前两行似乎有一些不可见的标签侵入它。上面两个引用之间的唯一区别是，第一个，我在“内容”部分放了一个 < p > 标签，第二个，我放了两个换行符，然后是 < p > 标签。当有两个换行符时文本换行但没有其他情况的事实向我表明，有一些 DOM 元素侵入了“内容”div 的空间，但我使用了每个浏览器的“检查”工具，但找不到罪魁祸首。如果有人可以帮助我，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:19:47.323

我查看了您的代码，它需要重新思考和重组。您对 css 职位的使用不合适。请深入研究定位和浮动，以更好地了解如何构建容器。

`clear: both`要解决您的问题，您可以添加`#content`

```
#content{clear:both;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:10:50.363

在第一个链接中（没有换行符，删除 top:25px 添加 overfolw:auto）

```
#content {
background: white;
position: relative;
width: 100%;
height: 550px;
margin: auto;
opacity: 0;
overflow: auto;
} 
```

# antlr - 使用带有布尔检查的 Tree Walker + 捕获整个表达式

> ID：15652779
> 
> 赞同：0
> 
> 时间：2013-03-27T06:01:35.600
> 
> 标签：antlr, antlr3

实际上，我有两个问题希望能得到解答，因为它们半依赖于我的工作。下面是语法+树语法+Java测试文件。

我实际上想要实现的是以下几点：

**问题一：**

我有一个可以正确解析我的语言的语法。我想对变量声明做一些语义检查。所以我创建了一个tree walker，到目前为止它可以正常工作。我的问题是它没有捕获整个表达式字符串。例如，

```
float x = 10 + 10; 
```

它只捕获第一部分，即 10。我不确定我做错了什么。如果我一次性完成，它会起作用。不知何故，如果我将工作分成语法和树语法，它不会捕获整个字符串。

**问题2：**

我想检查一个规则，如果我的条件返回 true，我想删除那个子树。例如，

```
float x = 10;
float x; // <================ I would like this to be removed. 
```

我尝试过使用重写规则，但我认为它比这更复杂。

**测试.g：**

```
grammar Test;
options {
  language = Java;
  output = AST;
}

parse : varDeclare+
      ;

varDeclare : type id equalExp? ';'
           ;

equalExp : ('=' (expression | '...'))
         ;

expression : binaryExpression
           ;

binaryExpression : addingExpression (('=='|'!='|'<='|'>='|'>'|'<') addingExpression)*
                 ;

addingExpression : multiplyingExpression (('+'|'-') multiplyingExpression)*
                 ;

multiplyingExpression : unaryExpression 
                        (('*'|'/') unaryExpression)*
                      ;

unaryExpression: ('!'|'-')* primitiveElement;   

primitiveElement : literalExpression
                 | id
                 | '(' expression ')'
                 ;  

literalExpression : INT
                  ;              

id : IDENTIFIER
   ;

type : 'int'    
     | 'float'
     ; 

// L E X I C A L   R U L E S      

INT : DIGITS ;   

IDENTIFIER : LETTER (LETTER | DIGIT)*;

WS  :   ( ' '
        | '\t'
        | '\r'
        | '\n'
        ) {$channel=HIDDEN;}
    ;

fragment LETTER : ('a'..'z' | 'A'..'Z' | '_') ;
fragment DIGITS: DIGIT+;
fragment DIGIT : '0'..'9'; 
```

**测试树.g：**

```
tree grammar TestTree;

options {
  language = Java;
  tokenVocab = Test;
  ASTLabelType = CommonTree;
}

@members {
    SemanticCheck s;

    public TestTree(TreeNodeStream input, SemanticCheck s) {
        this(input);
        this.s = s;
    }

}

parse[SemanticCheck s]
      : varDeclare+
      ;

varDeclare : type id equalExp? ';'
           {s.check($type.name, $id.text, $equalExp.expr);}
           ;

equalExp returns [String expr]
         : ('=' (expression {$expr = $expression.e;} | '...' {$expr = "...";}))
         ;

expression returns [String e]
@after {$e = $expression.text;}
           : binaryExpression
           ;

binaryExpression : addingExpression (('=='|'!='|'<='|'>='|'>'|'<') addingExpression)*
                 ;

addingExpression : multiplyingExpression (('+'|'-') multiplyingExpression)*
                 ;

multiplyingExpression : unaryExpression 
                        (('*'|'/') unaryExpression)*
                      ;

unaryExpression: ('!'|'-')* primitiveElement;   

primitiveElement : literalExpression
                 | id
                 | '(' expression ')'
                 ;  

literalExpression : INT
                  ;              

id : IDENTIFIER
   ;

type returns [String name]
@after { $name = $type.text; }
     : 'int'    
     | 'float'
     ; 
```

Java 测试文件，**Test.java：**

```
import java.util.ArrayList;
import java.util.List;

import org.antlr.runtime.ANTLRStringStream;
import org.antlr.runtime.CommonTokenStream;
import org.antlr.runtime.RuleReturnScope;
import org.antlr.runtime.tree.CommonTree;
import org.antlr.runtime.tree.CommonTreeNodeStream;

public class Test {
    public static void main(String[] args) throws Exception {
        SemanticCheck s = new SemanticCheck();

        String src = 
                "float x = 10+y; \n" + 
                "float x; \n";
        TestLexer lexer = new TestLexer(new ANTLRStringStream(src));
        //TestLexer lexer = new TestLexer(new ANTLRFileStream("input.txt"));
        CommonTokenStream tokenStream = new CommonTokenStream(lexer);
        TestParser parser = new TestParser(tokenStream);
        RuleReturnScope r = parser.parse();

        System.out.println("Parse Tree:\n" + tokenStream.toString());

        CommonTree t = (CommonTree)r.getTree();
        CommonTreeNodeStream nodes = new CommonTreeNodeStream(t);
        nodes.setTokenStream(tokenStream);

        TestTree walker = new TestTree(nodes, s);
        walker.parse(s);

    }
}

class SemanticCheck {
    List<String> names;

    public SemanticCheck() {
        this.names = new ArrayList<String>();

    }

    public boolean check(String type, String variableName, String exp) {
        System.out.println("Type: " + type + "  variableName: " + variableName + "  exp: " + exp);
        if(names.contains(variableName)) {
            System.out.println("Remove statement! Already defined!");
            return true;
        }

        names.add(variableName);
        return false;
    }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:23:17.800

我发现了我的问题，结果证明我需要先构建一个 AST，然后才能做任何事情。这将有助于理解什么是扁平树与构建 AST。

[如何输出使用 ANTLR 构建的 AST？](https://stackoverflow.com/questions/4931346/how-to-output-the-ast-built-using-antlr/4933963#4933963)

感谢[Bart](https://stackoverflow.com/users/50476/bart-kiers)在 StackOverFlow 中的无穷无尽的示例，我能够使用语义谓词来完成上面示例中所需的操作。

以下是更新后的代码：

**测试.g**

```
 grammar Test;
    options {
      language = Java;
      output = AST;
    }
    tokens {
    VARDECL;
    Assign = '=';
    EqT    = '==';  
    NEq    = '!=';
    LT     = '<';
    LTEq   = '<=';
    GT     = '>';
    GTEq   = '>=';
    NOT    = '!';
    PLUS   = '+';
    MINUS  = '-';
    MULT   = '*';
    DIV    = '/';
    }

    parse : varDeclare+
          ;

    varDeclare : type id equalExp ';' -> ^(VARDECL type id equalExp)
               ;

    equalExp : (Assign^ (expression | '...' )) 
             ;

    expression : binaryExpression
               ;

    binaryExpression : addingExpression ((EqT|NEq|LTEq|GTEq|LT|GT)^ addingExpression)*
                     ;

    addingExpression : multiplyingExpression ((PLUS|MINUS)^ multiplyingExpression)*
                     ;

    multiplyingExpression : unaryExpression 
                            ((MULT|DIV)^ unaryExpression)*
                          ;

    unaryExpression: ((NOT|MINUS))^ primitiveElement
                   | primitiveElement
                   ;   

    primitiveElement : literalExpression
                     | id
                     | '(' expression ')' -> expression
                     ;  

    literalExpression : INT
                      ;              

    id : IDENTIFIER
       ;

    type : 'int'    
         | 'float'
         ; 

    // L E X I C A L   R U L E S      

    INT : DIGITS ;   

    IDENTIFIER : LETTER (LETTER | DIGIT)*;

    WS  :   ( ' '
            | '\t'
            | '\r'
            | '\n'
            ) {$channel=HIDDEN;}
        ;

    fragment LETTER : ('a'..'z' | 'A'..'Z' | '_') ;
    fragment DIGITS: DIGIT+;
    fragment DIGIT : '0'..'9'; 
```

只要你有 varDeclare，这应该会自动构建一个 AST。现在到树语法/walker。

**测试树.g**

```
tree grammar TestTree;

options {
  language = Java;
  tokenVocab = Test;
  ASTLabelType = CommonTree;
  output = AST;
}

tokens {
    REMOVED;
}

@members {
    SemanticCheck s;

    public TestTree(TreeNodeStream input, SemanticCheck s) {
        this(input);
        this.s = s;
    }

}

start[SemanticCheck s] : varDeclare+
      ;

varDeclare : ^(VARDECL type id equalExp)
            -> {s.check($type.text, $id.text, $equalExp.text)}? REMOVED
            -> ^(VARDECL type id equalExp)  
           ;

equalExp : ^(Assign expression)
         | ^(Assign '...')
         ;

expression : ^(('!') expression)
        | ^(('+'|'-'|'*'|'/') expression expression*)
        | ^(('=='|'<='|'<'|'>='|'>'|'!=') expression expression*)
        | literalExpression
       ;                                  

literalExpression : INT
                  | id
                  ;  

id : IDENTIFIER
   ;

type : 'int'    
     | 'float'
     ; 
```

现在开始测试它：

**测试.java**

```
import java.util.ArrayList;
import java.util.List;

import org.antlr.runtime.ANTLRStringStream;
import org.antlr.runtime.CommonTokenStream;
import org.antlr.runtime.tree.*;

public class Test {
    public static void main(String[] args) throws Exception {
        SemanticCheck s = new SemanticCheck();

        String src = 
                "float x = 10; \n" + 
                "int x = 1; \n";
        TestLexer lexer = new TestLexer(new ANTLRStringStream(src));
        CommonTokenStream tokenStream = new CommonTokenStream(lexer);
        TestParser parser = new TestParser(tokenStream);
        TestParser.parse_return r = parser.parse();
        System.out.println("Tree:" + ((Tree)r.tree).toStringTree() + "\n");

        CommonTreeNodeStream nodes = new CommonTreeNodeStream((Tree)r.tree);
        nodes.setTokenStream(tokenStream);
        TestTree walker = new TestTree(nodes, s);
        TestTree.start_return r2 = walker.start(s);
        System.out.println("\nTree Walker: "+((Tree)r2.tree).toStringTree());

    }
}

class SemanticCheck {
    List<String> names;

    public SemanticCheck() {
        this.names = new ArrayList<String>();

    }

    public boolean check(String type, String variableName, String exp) {
        System.out.println("Type: " + type + "  variableName: " + variableName + "  exp: " + exp);
        if(names.contains(variableName)) {
            return true;
        }

        names.add(variableName);
        return false;
    }
} 
```

**输出：**

```
Tree:(VARDECL float x (= 10)) (VARDECL int x (= 1))

Type: float  variableName: x  exp: = 10
Type: int  variableName: x  exp: = 1

Tree Walker: (VARDECL float x (= 10)) REMOVED 
```

希望这可以帮助！如果我做错了什么，请随时指出任何错误。

# c# - 为 rowDataBound 方法设置行的高度

> ID：15652780
> 
> 赞同：0
> 
> 时间：2013-03-27T06:01:47.877
> 
> 标签：c#, asp.net, sql

我有以下代码：

```
protected void exampleGridView_RowDataBound(object o, GridViewRowEventArgs e)

  {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            e.Row.Cells[0].Width = new Unit("150px");
            e.Row.Cells[1].Width = new Unit("5px");
            e.Row.Cells[2].Width = new Unit("150px");
            e.Row.Cells[3].Width = new Unit("150px");
            e.Row.Cells[4].Width = new Unit("150px");
            e.Row.Cells[5].Width = new Unit("150px");
            e.Row.Cells[6].Width = new Unit("150px");
            // and so on
        }
    } 
```

是否也可以设置单元格的高度？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:40:19.167

您在 RowDataBound() 事件中设置宽度。你不能这样做，在 databind() 发生之前尝试 columns 属性。

例子

```
GridView1.CellPadding = 20;
GridView1.RowStyle.Height = 80; 
```

或者你可以试试这个样本

在 aspx 中：

```
 <asp:GridView ID="GridView1" OnRowDataBound="GridView1_RowDataBound" AutoGenerateColumns="false"
        runat="server">
        <Columns>
            <asp:BoundField DataField="CatID" HeaderText="ID" />
            <asp:BoundField DataField="CatName" HeaderText="Name" />
        </Columns>
    </asp:GridView> 
```

在 .cs 中：

```
protected void Page_Load(object sender, EventArgs e)
{
    List<Category> _lstCategory = new List<Category>{new Category { CatID = 1, CatName = "Cat1" }, 
                                                        new Category { CatID=2,CatName="Cat2" }};
    //GridView1.CellPadding = 20;
    //GridView1.RowStyle.Height = 80;
    GridView1.DataSource = _lstCategory;
    GridView1.DataBind();

}
public class Category
{
    public int CatID { get; set; }
    public string CatName { get; set; }
}
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    e.Row.Cells[1].Width = 100;
    e.Row.Cells[0].Width = 1;
} 
```

这个对我有用。

# kendo-ui - 我可以在不使用共享数据源的情况下为剑道网格和图表应用相同的数据源吗

> ID：15652783
> 
> 赞同：1
> 
> 时间：2013-03-27T06:02:10.207
> 
> 标签：kendo-ui, kendo-grid

我的应用程序中有剑道网格和图表。我对网格和图表使用共享数据源。但是我想在不使用共享数据源的情况下对网格和图表使用相同的数据源。我想将网格的结果绑定为图表数据源.这可能吗？如果可能的话怎么做？如果有人知道这件事，请帮助我..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T06:10:01.750

好吧，如果您不想使用共享数据源，那么您必须使用具有相同配置对象的不同数据源。我猜你想保持[干燥](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

为此，您可以在两个地方使用相同的配置对象。例如

```
var configDS = {
                        type: "odata",
                        transport: {
                            read: "..."
                        },
                        schema: {
                            model: {
                                fields: {
                                    ...
                                }
                            }
                        },
                        pageSize: 20,
                        serverPaging: true,
                        serverFiltering: true,
                        serverSorting: true
                    }

$("#grid").kendoGrid({
       dataSource: configDS 
       //other options for Grid
  })
$('#chart').kendoChart({
       datasource:configDS
      //other options for Chart
}) 
```

# asp.net-mvc - IIS 7.5 Windows 7 中的 MVC4 部署

> ID：15652786
> 
> 赞同：1
> 
> 时间：2013-03-27T06:02:43.990
> 
> 标签：asp.net-mvc, iis-7.5, web-deployment

我开发了一个 MVC4 应用程序并在 Windows 7 的 IIS 7.5 中部署。

在部署之前，我`aspnet_regiis - i`使用 VS 2012 运行和发布。

在 IIS 7.5 中部署后，我能够**成功打开主页**，这并不是我想的故事的结局！

现在我有几个 ajax 调用来获取数据没有得到任何结果。我尝试在 Firebug 中查看会发生什么并得到“ `Error Summary HTTP Error 404.0 - Not Found`”和错误代码：0x80070002。

然后我比较了 Locahost 和 IIS 的 Header 部分，我没有看到太大的差异。

我`<modules runAllManagedModulesForAllRequests="true" />`在我的 web.config 中添加了。

PS：如果我在本地运行但不在 IIS 中运行，一切看起来都很好。并且在我的本地计算机中安装了 IIS。

我是否需要添加任何关于如何修复的内容或任何建议将不胜感激。

谢谢

# crystal-reports - Crystal 报表中的隐藏部分是否会对报表产生任何影响？

> ID：15652790
> 
> 赞同：0
> 
> 时间：2013-03-27T06:03:03.240
> 
> 标签：crystal-reports, report

我正在尝试将 Crystal Reports 与 Microsoft Visual Studio 一起使用。不幸的是，我有很多不容易总结的问题。

我的主要分组部分之前有一个子报告。当这个子报告莫名其妙地无法显示它应该显示的数据时，我也会丢失报告第一页上的页眉部分。我不知道为什么子报告应该影响/与页眉交互 - 我没有用于抑制页眉的代码或条件。

所以，我尝试禁止子报告部分 - 我仍然丢失了我的页眉。最后，如果我完全删除子报告，我会恢复我的页眉。这对我来说没有意义。关于发生了什么的任何想法？

谢谢您的帮助。

# python - 如何创建一个python套接字侦听器守护进程

> ID：15652791
> 
> 赞同：5
> 
> 时间：2013-03-27T06:03:13.600
> 
> 标签：python, network-programming, daemon

我想知道如何创建一个监听发布请求的守护进程。我发现这段代码在这个[链接](http://code.activestate.com/recipes/278731/)上创建了一个守护进程，但我不知道如何填充它。我通过 json 从 android 手机向 php 服务器发送命令，将其重定向到可以通过串行与 arduino 通信的 python。我想知道是否有更好的解决方案，谢谢您的帮助

这是守护进程创建的代码：

```
 ## {{{ http://code.activestate.com/recipes/278731/ (r6)
"""Disk And Execution MONitor (Daemon)

Configurable daemon behaviors:

   1.) The current working directory set to the "/" directory.
   2.) The current file creation mode mask set to 0.
   3.) Close all open files (1024). 
   4.) Redirect standard I/O streams to "/dev/null".

A failed call to fork() now raises an exception.

References:
   1) Advanced Programming in the Unix Environment: W. Richard Stevens
   2) Unix Programming Frequently Asked Questions:
         http://www.erlenstar.demon.co.uk/unix/faq_toc.html
"""

__author__ = "Chad J. Schroeder"
__copyright__ = "Copyright (C) 2005 Chad J. Schroeder"

__revision__ = "$Id$"
__version__ = "0.2"

# Standard Python modules.
import os               # Miscellaneous OS interfaces.
import sys              # System-specific parameters and functions.

# Default daemon parameters.
# File mode creation mask of the daemon.
UMASK = 0

# Default working directory for the daemon.
WORKDIR = "/"

# Default maximum for the number of available file descriptors.
MAXFD = 1024

# The standard I/O file descriptors are redirected to /dev/null by default.
if (hasattr(os, "devnull")):
   REDIRECT_TO = os.devnull
else:
   REDIRECT_TO = "/dev/null"

def createDaemon():
   """Detach a process from the controlling terminal and run it in the
   background as a daemon.
   """

   try:
      # Fork a child process so the parent can exit.  This returns control to
      # the command-line or shell.  It also guarantees that the child will not
      # be a process group leader, since the child receives a new process ID
      # and inherits the parent's process group ID.  This step is required
      # to insure that the next call to os.setsid is successful.
      pid = os.fork()
   except OSError, e:
      raise Exception, "%s [%d]" % (e.strerror, e.errno)

   if (pid == 0):   # The first child.
      # To become the session leader of this new session and the process group
      # leader of the new process group, we call os.setsid().  The process is
      # also guaranteed not to have a controlling terminal.
      os.setsid()

      # Is ignoring SIGHUP necessary?
      #
      # It's often suggested that the SIGHUP signal should be ignored before
      # the second fork to avoid premature termination of the process.  The
      # reason is that when the first child terminates, all processes, e.g.
      # the second child, in the orphaned group will be sent a SIGHUP.
      #
      # "However, as part of the session management system, there are exactly
      # two cases where SIGHUP is sent on the death of a process:
      #
      #   1) When the process that dies is the session leader of a session that
      #      is attached to a terminal device, SIGHUP is sent to all processes
      #      in the foreground process group of that terminal device.
      #   2) When the death of a process causes a process group to become
      #      orphaned, and one or more processes in the orphaned group are
      #      stopped, then SIGHUP and SIGCONT are sent to all members of the
      #      orphaned group." [2]
      #
      # The first case can be ignored since the child is guaranteed not to have
      # a controlling terminal.  The second case isn't so easy to dismiss.
      # The process group is orphaned when the first child terminates and
      # POSIX.1 requires that every STOPPED process in an orphaned process
      # group be sent a SIGHUP signal followed by a SIGCONT signal.  Since the
      # second child is not STOPPED though, we can safely forego ignoring the
      # SIGHUP signal.  In any case, there are no ill-effects if it is ignored.
      #
      # import signal           # Set handlers for asynchronous events.
      # signal.signal(signal.SIGHUP, signal.SIG_IGN)

      try:
         # Fork a second child and exit immediately to prevent zombies.  This
         # causes the second child process to be orphaned, making the init
         # process responsible for its cleanup.  And, since the first child is
         # a session leader without a controlling terminal, it's possible for
         # it to acquire one by opening a terminal in the future (System V-
         # based systems).  This second fork guarantees that the child is no
         # longer a session leader, preventing the daemon from ever acquiring
         # a controlling terminal.
         pid = os.fork()    # Fork a second child.
      except OSError, e:
         raise Exception, "%s [%d]" % (e.strerror, e.errno)

      if (pid == 0):    # The second child.
         # Since the current working directory may be a mounted filesystem, we
         # avoid the issue of not being able to unmount the filesystem at
         # shutdown time by changing it to the root directory.
         os.chdir(WORKDIR)
         # We probably don't want the file mode creation mask inherited from
         # the parent, so we give the child complete control over permissions.
         os.umask(UMASK)
      else:
         # exit() or _exit()?  See below.
         os._exit(0)    # Exit parent (the first child) of the second child.
   else:
      # exit() or _exit()?
      # _exit is like exit(), but it doesn't call any functions registered
      # with atexit (and on_exit) or any registered signal handlers.  It also
      # closes any open file descriptors.  Using exit() may cause all stdio
      # streams to be flushed twice and any temporary files may be unexpectedly
      # removed.  It's therefore recommended that child branches of a fork()
      # and the parent branch(es) of a daemon use _exit().
      os._exit(0)   # Exit parent of the first child.

   # Close all open file descriptors.  This prevents the child from keeping
   # open any file descriptors inherited from the parent.  There is a variety
   # of methods to accomplish this task.  Three are listed below.
   #
   # Try the system configuration variable, SC_OPEN_MAX, to obtain the maximum
   # number of open file descriptors to close.  If it doesn't exists, use
   # the default value (configurable).
   #
   # try:
   #    maxfd = os.sysconf("SC_OPEN_MAX")
   # except (AttributeError, ValueError):
   #    maxfd = MAXFD
   #
   # OR
   #
   # if (os.sysconf_names.has_key("SC_OPEN_MAX")):
   #    maxfd = os.sysconf("SC_OPEN_MAX")
   # else:
   #    maxfd = MAXFD
   #
   # OR
   #
   # Use the getrlimit method to retrieve the maximum file descriptor number
   # that can be opened by this process.  If there is not limit on the
   # resource, use the default value.
   #
   import resource      # Resource usage information.
   maxfd = resource.getrlimit(resource.RLIMIT_NOFILE)[1]
   if (maxfd == resource.RLIM_INFINITY):
      maxfd = MAXFD

   # Iterate through and close all file descriptors.
   for fd in range(0, maxfd):
      try:
         os.close(fd)
      except OSError:   # ERROR, fd wasn't open to begin with (ignored)
         pass

   # Redirect the standard I/O file descriptors to the specified file.  Since
   # the daemon has no controlling terminal, most daemons redirect stdin,
   # stdout, and stderr to /dev/null.  This is done to prevent side-effects
   # from reads and writes to the standard I/O file descriptors.

   # This call to open is guaranteed to return the lowest file descriptor,
   # which will be 0 (stdin), since it was closed above.
   os.open(REDIRECT_TO, os.O_RDWR)  # standard input (0)

   # Duplicate standard input to standard output and standard error.
   os.dup2(0, 1)            # standard output (1)
   os.dup2(0, 2)            # standard error (2)

   return(0)

if __name__ == "__main__":

   retCode = createDaemon()

   # The code, as is, will create a new file in the root directory, when
   # executed with superuser privileges.  The file will contain the following
   # daemon related process parameters: return code, process ID, parent
   # process group ID, session ID, user ID, effective user ID, real group ID,
   # and the effective group ID.  Notice the relationship between the daemon's 
   # process ID, process group ID, and its parent's process ID.

   procParams = """
   return code = %s
   process ID = %s
   parent process ID = %s
   process group ID = %s
   session ID = %s
   user ID = %s
   effective user ID = %s
   real group ID = %s
   effective group ID = %s
   """ % (retCode, os.getpid(), os.getppid(), os.getpgrp(), os.getsid(0),
   os.getuid(), os.geteuid(), os.getgid(), os.getegid())

   open("createDaemon.log", "w").write(procParams + "\n")

   sys.exit(retCode)
## end of http://code.activestate.com/recipes/278731/ }}} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-27T06:21:25.050

如果你必须写一个守护进程，你肯定要使用，因为它是[PEP 3143](http://www.python.org/dev/peps/pep-3143)[`python-daemon`](https://pypi.python.org/pypi/python-daemon/)的参考实现。有很多小事情你必须做对。

如果您必须编写一个服务器，并且从未做过，并且不需要处理超过 100 个左右的同时连接，并且不需要在不同的客户端之间共享数据，那么`threading`这是迄今为止最简单的解决方案。

一个回显服务器守护进程（它会一直运行直到你运行`signal`它，并且不会尝试正常关闭）看起来像这样：

```
import socket
import threading
import daemon

def handle_client(sock):
    with sock.makefile() as f:
        sock.close()
        for line in f:
            f.writeline(line)

def serve_forever():
    server = socket.socket()
    server.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
    server.bind(('0.0.0.0', 12345))
    server.listen(1)
    while True:
        conn, address = server.accept()
        thread = threading.Thread(target=handle_client, args=[conn])
        thread.daemon = True
        thread.start()

with daemon.DaemonContext():
    serve_forever() 
```

只需将您的真实代码放入该`handle_client`循环中即可。这将打开一个侦听端口的[套接字](https://docs.python.org/3/library/socket.html#example)`12345`。

* * *

但实际上，即使这比您需要的更复杂。[`inetd`](http://en.wikipedia.org/wiki/Inetd)服务要简单得多：

```
import sys
for line in sys.stdin:
    print(line) 
```

并将其注册为端口 12345 上的服务器，只需添加一行`/etc/inetd.conf`：

```
12345 stream tcp nowait nobody /usr/bin/python python /usr/local/bin/myscript.py 
```

就是这样。

当然，现代 *nix 系统几乎肯定不会使用 old-school `inetd`，而是使用`xinetd`, `systemd`,`launchd`或其他替代品，因此配置会有所不同。阅读适合您系统的文档。但是，仍然比编写套接字服务器守护进程简单得多。

* * *

或者……为什么需要编写 PHP 服务器来转发到 Python 服务器？对此有一些潜在的答案，但如果您没有答案，则无需这样做。只需使用 Python 服务/CGI/任何东西而不是 PHP 服务，让 Web 服务器处理所有网络、守护进程、管理等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:11:48.040

在你的 python 代码中尝试实现一个服务器。检查这篇[文章](http://www.daniweb.com/software-development/python/threads/380019/simple-socket-server-in-python)并从您的 PHP 创建一个客户端以连接到该 Python 服务器。

请参阅这篇[文章](http://php.net/manual/en/sockets.examples.php)，当 PHP 客户端使用相关信息连接到 Python 服务器时，使用串行启动与 Arduino 的通信。

这篇[文章](http://shazsterblog.blogspot.com/2011/11/arduino-google-voice-activated-servo.html)展示了类似的东西，但使用了一个使用串行与 Arduino 通信的 Java 服务器和一个连接到 Java 服务器的 Python 客户端。

# html - 圆圈上的悬停状态

> ID：15652796
> 
> 赞同：2
> 
> 时间：2013-03-27T06:03:48.487
> 
> 标签：html, css, hover, geometry, transitions

我正在设计这个[页面](http://creativusmouse.com/Proteus/html_preview/index.html)，其中包含四个带有 CSS3 过渡的大圆圈，我正试图让它在 IE8 上运行。我知道 CSS3 过渡不适用于旧版本的 IE，因此我只想让这些圆圈在没有过渡的情况下正常悬停。我真的不知道如何实现这一目标。希望有人可以帮助我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:30:12.590

你可以`:hover`在你的元素上使用，像这样`#id_of_circe:hover {...}`

# android - 线程以未捕获的异常退出 (group=0x4001d800)

> ID：15652797
> 
> 赞同：-4
> 
> 时间：2013-03-27T06:03:54.007
> 
> 标签：android, exception

我是 android 应用程序开发的新手......我正在做的就是创建一个应用程序，将一个添加到计数器 wen add 按钮被点击，sub one wen subb 按钮被点击。请指出我的错误

**起点**.java `

```
package vignesh.pandian.app;

import android.os.Bundle;
import android.app.Activity;

import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class Startingpoint extends Activity {

    int counter;
    Button add, subb;
    TextView displ;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_startingpoint);
        counter=0;
        add = (Button) findViewById(R.id.add);
        subb =(Button) findViewById(R.id.bSub);
        displ =(Button) findViewById(R.id.tex);

 add.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                counter++;
                displ.setText("value is "+counter);

            }
        });
         subb.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                counter--;
                displ.setText("value is"+counter);

            }
        });         

    }

} 
```

**活动起点.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/add"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:text="Add one " />

    <TextView
        android:id="@+id/My"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="15dp"
        android:text="Vignesh&apos;s app !!!!"
        tools:context=".Startingpoint" />

    <TextView
        android:id="@+id/tex"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginTop="35dp"
        android:text="Value is"
        android:textSize="35dp"
        tools:context=".Startingpoint" />

    <Button
        android:id="@+id/bSub"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/add"
        android:layout_marginTop="37dp"
        android:text="Subract one " />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:07:22.363

> 文本视图显示；
> 
> displ =(Button) findViewById(R.id.tex);

错了，用这个

```
displ =(TextView) findViewById(R.id.tex); 
```

disp1 是 Textview 对象，而不是按钮对象。

# jquery - Angular-UI jQuery Passthrough 与 angular.element()

> ID：15652802
> 
> 赞同：0
> 
> 时间：2013-03-27T06:04:20.633
> 
> 标签：jquery, angularjs, angular-ui

Angular-UI Jquery Passthrough 和 angular.element() 提供的功能是什么？

它们可以互换吗？jQuery 是否通过 angular.element() 的任何附加选项？

有什么好的例子可以展示每个在 ng-app 中的强大功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:28:16.173

您混淆了 2 段不相关的代码。

Passthru 只是一个简单的包装器，它使您能够在 DOM 元素上调用任何 jQuery 方法，而无需创建新指令。

`angular.element()`是一个返回 DOM 元素的 javascript 方法。如果你先注入 jQuery 然后`angular.element() === jQuery() ==== $()`

Passthru 没有做任何特别的事情，`angular.element()`也不需要，因为`$element`链接函数已经提供了 a 。

# image - 从 WinRT 中的绝对路径动态设置 ImagePath

> ID：15652803
> 
> 赞同：0
> 
> 时间：2013-03-27T06:04:24.803
> 
> 标签：image, winrt-xaml, winrt-async

我正在尝试创建一个动态创建的 Grid 项目的 GridView，每个项目的背景设置如下：

```
<Grid.Background>
     <ImageBrush ImageSource="{Binding FilePath}" Stretch="UniformToFill" />
</Grid.Background> 
```

如果 FilePath 是应该为每个 Grid 项目加载的文件的绝对路径，有没有办法可以将此值转换为 ImagePath 以便加载图像？

我正在使用文件选择器获取 FilePath。然后将该值保存到应用程序启动时加载的 ObservableCollection，并通过设置为 DataContext 来显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:44:42.043

没有`ImagePath`我知道的属性，`ImageSource`也不是路径，甚至不是`Uri`. 您可能应该将您的绑定`ImageSource`到一个`BitmapImage`. 只需创建一个新的`BitmapImage`并调用`SetSource`，或者`SetSourceAsync`如果您想在更新图像之前等待它加载 - 例如显示占位符图像、进度指示器或淡入图像。

# android - 删除 android 应用中的 JNI 本地引用

> ID：15652804
> 
> 赞同：0
> 
> 时间：2013-03-27T06:04:35.080
> 
> 标签：android, cordova, java-native-interface

嗨，在我的 android phonegap 应用程序中，我使用了下面的链接并调用了本机代码。使用该本机代码添加了两个数字。使用此本机代码如何删除 jni 本地引用？

这是链接： http: [//marakana.com/forums/android/examples/49.html](http://marakana.com/forums/android/examples/49.html)

我在 logcat 中收到此错误：

```
JNI error local reference table overflow 512 entries
VM aborting 
```

要解决此错误，我需要删除 jni 本地引用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:41:57.437

要删除本地引用，您需要添加一行`env->DeleteLocalRef(jniRef)`，其中`jniRef`是您在 JNI 中创建的对象`jstring`，例如。您分享的链接中的代码不会导致本地引用表溢出。仅当您进行大量对象创建（通常在循环中）时才会发生溢出。它必须在单个函数调用的上下文中发生，因为当函数退出时，所有本地引用都会自动清除。发布一些代码以获得更多帮助

# ibm-mobilefirst - Worklight 项目在更新后不工作

> ID：15652806
> 
> 赞同：0
> 
> 时间：2013-03-27T06:04:54.653
> 
> 标签：ibm-mobilefirst

我正在使用 worklight 5.0.5 并将我的 worklight 升级到 5.0.6，现在它要求 wlInitOptions not found。我尝试使用初始化选项手动创建一个文件，但它仍然没有从该文件中读取变量。升级后我需要在旧项目中更新的位置是否发生了变化？需要帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:20:44.687

创建一个新应用程序，从其 common\js 文件夹中复制 initOptions.js 文件。接下来，将此文件放在您自己的应用程序的 common\js 文件夹中。

# php - 如何使用 PHP DOMDocument 删除父 Div

> ID：15652810
> 
> 赞同：3
> 
> 时间：2013-03-27T06:05:09.353
> 
> 标签：php, dom, domdocument

```
$html_string = '<div class="quote" post_id="57" 
style="border:1px solid #000;padding:15px;margin:15px;" 
user_id="1" user_name="david_cameron"><strong><span 
style="font-size:200%;">My Name is Rashid Farooq</span></strong></div>'; 
```

我想删除父 div 并只获得以下输出

```
<strong><span style="font-size:200%;">My Name is David Cameron</span></strong> 
```

我努力了

```
$dom = new DOMDocument;
$dom->loadHTML($html_string);
$divs = $dom->getElementsByTagName('div');
$innerHTML_contents = $divs->item(0)->textContent
echo $innerHTML_contents 
```

但它给了我唯一的“我的名字是大卫卡梅隆”，并去掉了所有的标签。如何仅删除父 div 并获取 div 中的所有其他 html 内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T06:14:45.040

尝试使用此功能

```
function DOMinnerHTML($element) 
{ 
   $innerHTML = ""; 
   $children = $element->childNodes; 
   foreach ($children as $child) 
   { 
      $tmp_dom = new DOMDocument(); 
      $tmp_dom->appendChild($tmp_dom->importNode($child, true)); 
      $innerHTML.=trim($tmp_dom->saveHTML()); 
   } 
   return $innerHTML; 
} 
```

喜欢

```
$dom = new DOMDocument;
$dom->loadHTML($html_string);
$divs = $dom->getElementsByTagName('div');
$innerHTML_contents = DOMinnerHTML($divs->item(0));
echo $innerHTML_contents 
```

输出

```
 <strong><span style="font-size:200%;">My Name is Rashid Farooq</span></strong> 
```

# arrays - 如何避免在 MIPS 的循环中硬编码数组索引/索引？

> ID：15652812
> 
> 赞同：1
> 
> 时间：2013-03-27T06:05:53.763
> 
> 标签：arrays, loops, assembly, mips, addressing

例如，

```
$a0 is an index/pointer
$a1 is the address of the array base 
```

我想在循环中访问数组的每个元素，对该元素执行算术运算，然后将其保存到下一个。每次迭代时，索引应增加 +1。

举一个简单的例子，我试图对数组中的每个前一个元素求平方。初始硬编码值为 INDEX[0]=0，ARRAY[0]=2。我已经标记了我感到困惑的地方。我不知道如何为每个循环制作这个变量。

```
 .data
INDEX: .space  4
       .align  2
ARRAY: .space  16
       .align  2

       .text
        la     $a0, INDEX
        la     $a1, ARRAY
        li     $t0, 0
        sw     $t0, ($a0)       # set INDEX[0]=0
        li     $t0, 2
        sw     $t0, ($a1)       # set ARRAY[0]=2

LOOP:
        lw     $t0, ($a0)
        sll    $t0, $t0, 2      # $a0 * 4 to get element offset
        lw     $t1, $t0($a1)    # STUCK HERE (1)
        add    $t1, $t1, $t1    # square
        lw     $t0, ($a0)
        add    $t0, $t0, 1
        sw     $t1, $t0($a1)    # AND HERE (2)
        add    $a0, $a0, 1

               ... keep looping if space remaining in $a1 
```

(1) 如何保存元素 ARRAY[INDEX] 以注册 $t1 而无需硬编码偏移量？

(2) 如何将更改后的寄存器 $t1 保存到数组中的特定元素：ARRAY[INDEX] = $t1

由于间接寻址会在每个循环中发生变化，因此我想避免使用 4($a1)、8($a1) 等。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:15:45.623

您需要将基址和索引加在一起。像这样的东西应该可以工作：

```
 sll    $t2, $t0, 2      # $a0 * 4 to get element offset
    add    $t2, $t2, $a1    # Add the array base address to the scaled index
    lw     $t1, ($t2)       # $t1 = ARRAY[index]
    add    $t1, $t1, $t1    # square
    add    $t0, $t0, 1
    sw     $t1, ($t2) 
```

请注意，您实际上并没有对数字进行平方 - 您正在将它们加倍（t1 = t1 + t1）。要平方一个数字，您需要将其*乘以*它自己。

# c - rsa加密解密使用c

> ID：15652816
> 
> 赞同：2
> 
> 时间：2013-03-27T06:06:28.020
> 
> 标签：c, openssl, rsa, encryption

我正在尝试使用 Open SSL 编写 RSA 加密和解密的 C 代码。但我不能这样做。我用谷歌搜索了它，但无论我从互联网上得到什么代码，我都想不出来。 `main`函数在这里，我从堆栈溢出中得到。我尝试使用它……但它不起作用。可能是我的坏。

```
encrypt(FILE *rsa_Pkey_fole,FILE *in_file,FILE *out_file){

}

int main(int argc, char *argv[])
{
    FILE *rsa_pkey_file, *infile;
    int rv;

    if (argc < 2) {
            fprintf(stderr, "Usage: %s <PEM RSA Public Key File>\n", argv[0]);
            exit(1);
    }

    rsa_pkey_file = fopen(argv[1], "rb");
    infile = fopen(argv[2], "w");
    if (!rsa_pkey_file) {
        perror(argv[1]);
        fprintf(stderr, "Error loading PEM RSA Public Key File.\n");
        exit(2);
    }

    rv = encrypt(rsa_pkey_file, infile.txt, stdout);
    fclose(rsa_pkey_file);

    return rv;
} 
```

和类似的方式解密。

如何以简单的方式使用 C 中的 Open SSL 库对文件进行 RSA 加密和解密？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T10:29:35.647

RSA加密的步骤如下：

1.  **将公钥读入`RSA *`结构。**这取决于您的密钥格式。如果 key 是`PEM`格式，请使用`PEM_read_RSA_PUBKEY`函数。如果是`DER`形式，请使用`d2i_RSA`.
2.  **使用 RSA 公钥加密您的数据。**使用`RSA_public_encrypt`功能。
3.  **将数据写入文件或您想做的任何事情。**

RSA解密的步骤是：

1.  **将私钥读入`RSA *`结构。**它类似于 RSA 加密中的步骤 1，但有一些细微差别。
2.  **使用 解密数据`RSA_private_decrypt`。**使用`RSA_private_decrypt`.

您可以查看非常有用的 OpenSSL 文档，并且它的名称很直观。我给你的只是广义的想法。如果您需要更多帮助，我可以发布代码示例。

# python - cgi 获取提交的图像数据-url

> ID：15652818
> 
> 赞同：0
> 
> 时间：2013-03-27T06:06:46.533
> 
> 标签：python, google-app-engine, cgi

对不起，如果这个问题很愚蠢。我将 jqplot 图像转换为 data-url 并使用表单发送。在新页面中，我曾经`cgi.FieldStorage()`获取提交的data-url，但一无所获。那么有人可以就我的方法给我一些建议吗？谢谢！

我在 Google App Engine 上使用 Python

输入页面Javascript

```
var imgData = $('#chart1').jqplotToImageStr({});
$('<tr style="display:none"><td><input type="hidden" name="extract1"></td></tr>')
    .appendTo('.getpdf')
    .find('input')
    .data(imgData); 
```

输出页面：

```
def post(self):
    form = cgi.FieldStorage()   
    extract1 = form.getvalue('extract1') #extract1 is empty 
```

我试图打印表格，它看起来像：`MiniFieldStorage('extract1', '"data:image/png;base64,iVBORw0KGgoAAAANSUhE`

如果我分配了 data-url (data:image/png;base64,iVBORw0KGg...)，它就起作用了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:00:39.407

我有（工作）代码可以做类似的事情。

```
def post(self):
  img_data = self.request.get('extract1')
  # then strip off the prefix and convert from base64 
```

这就是我正在做的。`cgi.FieldStorage`我通常不会在 Python App Engine 应用程序中看到进行深入研究。

# authentication - ASP.Net MVC 4 简单成员指定架构

> ID：15652820
> 
> 赞同：2
> 
> 时间：2013-03-27T06:06:58.707
> 
> 标签：authentication, asp.net-mvc-4, simplemembership

我试图弄清楚如何设置 ASP.Net MVC 4 的简单成员资格。在我当前的数据库中容纳用户的表具有与“dbo”不同的架构。初始化数据库连接时如何指定架构：

```
 WebSecurity.InitializeDatabaseConnection
            (
                connectionStringName: "GuessAListConnection",
                userTableName: "UserProfile",
                userIdColumn: "UserId",
                userNameColumn: "UserName",
                autoCreateTables: false
            ); 
```

没有架构选项。我尝试将架构附加到 userTableName ，但这会产生错误。有什么建议么？

谢谢

汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:43:13.653

如果您的用户/身份验证表与 dbo（或任何数据库用户的默认模式）不同，我找到了另一种解决方案，那就是使用视图。

在我的数据库中，我的用户/身份验证表的范围为“安全”模式。我还有一个 Person 表所在的 Person 模式。我只在 Person 表中存储 FirstName、LastName。

我创建了一个视图，将所有表拉到一起进行身份验证，并返回以下字段：

UserId、用户名、PersonId、名字、姓氏、AuthenticationType、LastLoginDate、IsLockedOut

在我的应用程序中，我可以通过多种不同的方式对一个人进行身份验证：Form、Windows、Facebook、Twitter 等。UserId、UserName 与不同的身份验证类型相关。

**这是我在 ASP.Net MVC 中的 UserProfile 类：**

```
 [Table("__vwRegisteredUser")]
  public class UserProfile
  {
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public String UserName { get; set; }
    public int PersonId { get; set; }
    public String FirstName { get; set; }
    public String LastName { get; set; }
    public String AuthenticationTypeName { get; set; }
    public Boolean IsLockedOut { get; set; }
    public DateTime LastLoginDate { get; set; }

    public int Id
    {
        get
        {
            return PersonId;
        }
    }

    public String Name
    {
        get
        {
            return String.Format("{0} {1}", FirstName, LastName);
        }
    }
} 
```

请注意，我为 Table 属性使用了一个视图。我还将 PersonId 作为 Id 属性返回，并将 FirstName 和 LastName 连接在一起作为 Name 属性。UserName 是从我的身份验证类型（Windows 用户名、电子邮件地址（如果我使用表单身份验证）或 Facebook 或 Twitter 返回的任何内容）返回的值。因此，我的 Security.Authentication 表中的 UserName 没有一致性。

初始化数据库连接仍然需要一个表，以便 SimpleMembership 生成成员表。也许有一种方法可以拥有一个自定义会员表，但我还没有想出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T06:50:37.160

WebSecurity 将使用数据库用户的任何默认模式。无法指定我知道的不同模式。

# wix - 如何从每个用户更改为所有用户安装？

> ID：15652821
> 
> 赞同：2
> 
> 时间：2013-03-27T06:07:01.440
> 
> 标签：wix, migration, windows-installer, wix3.5, major-upgrade

对于我们的 msi，我们没有在现有版本中提及 allusers 属性。所以默认情况下它按照用户进行。

我们的客户使用管理员用户 ID 安装了应用程序，并且该管理员离开了公司。因此，他的用户 ID 不再处于有效状态。

现在他们无法使用另一个管理员帐户迁移到较新的版本（因为它是按用户安装的）。

虽然我们可以更改我们的 msi 以支持所有用户，但它在迁移（重大升级）中不起作用。

似乎只有当我们提供不支持现有版本的全新版本时，我们才能解决该问题。

即使以前的 msi 是每个用户的，是否还有其他解决方法可以提及，现在应该进行重大升级吗？

我们在安装过程中使用 WIX 3.5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:46:36.333

不幸的是，Windows 安装程序不支持“跨上下文”升级。正如您发现的，每机器包无法升级每用户包，每用户包不能升级每机器包。

您可以编写一个可执行文件来查找旧的 .msi 并使用 API 卸载它们，例如`::MsiEnumRelatedProducts()`查找产品然后`::MsiConfigureProduct()`删除它们。但是，如果没有用户帐户，我不确定您是否能够看到按用户安装的产品。

# parsing - 如何高效便捷地解析 Go 中的简单消息？

> ID：15652823
> 
> 赞同：4
> 
> 时间：2013-03-27T06:07:20.993
> 
> 标签：parsing, go

下面是一个消息示例：

```
User: tbone
Location: /whatever
Time: 23:23:23

This is a little message. 
```

它有点像 HTTP 和其他协议：标头后跟一个空行和消息正文。

解析这个最简单有效的方法是什么？标准[文本/扫描仪](http://golang.org/pkg/text/scanner/)对我来说看起来不错。如果我能更好地处理空白，这对我来说会很容易使用。也就是说，在标题中，它应该忽略冒号周围的空格，但让我知道单词和换行符之间的空格。我还需要知道消息正文何时开始。

扫描仪可能是适合这项工作的工具吗？有更好的策略吗？我是否应该编写自己的小解析器，一次沿着一个字符（或有时两个）行进并构建我的数据结构？这是我想避免的那种不便，但我可以做到。

顺便说一句，我控制消息格式。是否有更好的消息格式可以简化任务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T06:13:20.280

text/scanner 将太多开销（在程序员时间）用于这种简单的格式。

net/http 使用[net/textproto](http://golang.org/pkg/net/textproto/)，您也可以使用它。寻找 MIMEHeader 和[ReadMIMEHeader](http://golang.org/pkg/net/textproto/#Reader.ReadMIMEHeader)。

如果您需要比 MIMEHeader 包含的内容更复杂的内容，我会考虑只使用 JSON。

# android - 如何从另一个片段类访问方法？

> ID：15652825
> 
> 赞同：1
> 
> 时间：2013-03-27T06:07:25.070
> 
> 标签：android, methods, nullpointerexception, fragment

我希望从另一个片段调用一个方法，但它一直告诉我我的 TextViews 的值为 null ..？

玩家1：

```
public class PlayerTurn1 extends Fragment  {

    TextView p1Name;
    TextView p1Icon;
    Button doneP1;
    Button resetP1;
    EditText row;
    EditText column;
    TicTacToeLayout myObject = new TicTacToeLayout();
    ArrayList<String> player1;
    Bundle extras = new Bundle();
    int turn = 1;

public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

       extras = getArguments();

       player1 = new ArrayList<String>(extras.getStringArrayList("player1"));

       Toast.makeText(getActivity(), player1.get(0), Toast.LENGTH_LONG).show();//Name of the player
       Toast.makeText(getActivity(), player1.get(1), Toast.LENGTH_LONG).show();//Icon chosen by the player

        row = (EditText) getActivity().findViewById(R.id.rowP1);
        column = (EditText) getActivity().findViewById(R.id.columnP1);
        p1Name = (TextView) getActivity().findViewById(R.id.p1NameInfo);
        p1Icon = (TextView) getActivity().findViewById(R.id.p1IconInfo);
        doneP1 = (Button) getActivity().findViewById(R.id.doneP1);
        resetP1 = (Button) getActivity().findViewById(R.id.resetP2);

        setPlayer();

        doneP1.setOnClickListener(new View.OnClickListener() {          
            public void onClick(View v) {   

                if(checkField() != false)
                {
                     int rowValueInt = Integer.parseInt(row.getText().toString());
                     int colValueInt = Integer.parseInt(column.getText().toString());

                    myObject.play(rowValueInt, colValueInt, player1.get(1));
                    callPlayer2Fragment();

                }

            }
        });
    } 
```

player 2 片段是完全相同的代码，所以我不会费心添加它。

TicTacToeLayout 片段类：

```
public class TicTacToeLayout extends Fragment {

    TextView image1, image2, image3, image4, image5, image6, image7, image8, image9;
    TextView[][] images;

    public View onCreateView(LayoutInflater inflater,
    ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.tictactoe_layout, container, false);
    }

    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        image1 = (TextView) getActivity().findViewById(R.id.Image1);
        image2 = (TextView) getActivity().findViewById(R.id.Image2);
        image3 = (TextView) getActivity().findViewById(R.id.Image3);
        image4 = (TextView) getActivity().findViewById(R.id.Image4);
        image5 = (TextView) getActivity().findViewById(R.id.Image5);
        image6 = (TextView) getActivity().findViewById(R.id.Image6);
        image7 = (TextView) getActivity().findViewById(R.id.Image7);
        image8 = (TextView) getActivity().findViewById(R.id.Image8);
        image9 = (TextView) getActivity().findViewById(R.id.Image9);

        images = new TextView[][]{ {image1, image2, image3},
                                   {image4, image5, image6},
                                   {image7, image8, image9} };

        toast();
    }

    public void toast()
    {
        Toast.makeText(getActivity(), images[0][0].getText().toString(), Toast.LENGTH_LONG).show();
        Toast.makeText(getActivity(), images[0][1].getText().toString(), Toast.LENGTH_LONG).show();
        Toast.makeText(getActivity(), images[0][2].getText().toString(), Toast.LENGTH_LONG).show();
        Toast.makeText(getActivity(), images[1][0].getText().toString(), Toast.LENGTH_LONG).show();
    }

    public void play(int row, int column, String icon)
    {
            images[row-1][column-1].setText(icon);
    }

} 
```

我只是做了一个方法来尝试烤面包，以确保数组中有东西并且它有效。但是，它仅在创建片段时才进行烘烤。不知何故，在方法调用之后 `myObject.play(rowValueInt, colValueInt, player1.get(1));` ，调试器告诉我我的图像的所有值都是空的。

这是调试器所说的：

```
this    TicTacToeLayout  (id=830016401072)  
    image1  null    
    image2  null    
    image3  null    
    image4  null    
    image5  null    
    image6  null    
    image7  null    
    image8  null    
    image9  null    
    images  null    

row 1   
column  2   
icon    "O" (id=830016398920) 
```

这基本上发生在我单击完成按钮时。应该发生的是当玩家点击按钮时，在 TicTacToeLayout 片段中，位于玩家输入的任何行和列的文本视图更改为 X 或 O。行、列和图标都有各自的值，但图像在调用对象后最终为 null。有任何想法吗？我的帖子已关闭，因为显然我没有提供太多信息并且管理员很生气，所以如果您需要其他任何内容，请告诉我我会更新。

**EDIT** 调用位于 PlayerTurn1 中的第二个玩家片段

```
public void callPlayer2Fragment()
    {
        FragmentManager fm       = getFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();
        Fragment Player2Frag = new PlayerTurn2();
        Player2Frag.setArguments(extras);
        ft.replace(R.id.fragment_container, Player2Frag);
        ft.commit();
    } 
```

单击完成按钮时，将调用 PlayerTurn2 片段并从此类传递参数，但该片段被替换。

XML 布局

```
<?xml version="1.0" encoding="UTF-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal" >

        <FrameLayout
         android:id="@+id/fragment_container"
         android:layout_width="0px"
         android:layout_height="match_parent" 
         android:layout_weight="1" />

        <fragment
            android:id="@+id/frag2"
            android:name="As2.packageTK.TicTacToeLayout"
            android:layout_width="0px"
            android:layout_height="match_parent"
            android:layout_weight="1" />

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:17:30.857

它们全部为空的原因是片段当前不是“活动的”（即附加或创建）。您应该通过 Activity 中的接口来执行此操作。我[在这里解释](https://stackoverflow.com/questions/11573712/why-direct-communication-between-fragments-is-not-recommended/11573912#11573912)

# c# - 如何分离并行请求？

> ID：15652828
> 
> 赞同：1
> 
> 时间：2013-03-27T06:07:34.863
> 
> 标签：c#, asp.net, asp.net-mvc-3, linq-to-sql

我将尝试用一个简化的控制台应用程序示例来解释这个问题，但是真正的项目是一个 ASP.NET MVC3 应用程序。

具有以下表格：

![在此处输入图像描述](../Images/145bba24686db6a30668e1ea839c4604.png)

想象以下场景：

1.  用户创建报告（其中的一行，报告内容在`TestReport`哪里，是一个标志，表示报告是否已准备好进行处理）；默认设置为，即未准备好。`Text``string``Ready``bool``Ready``false`
2.  用户希望报告被处理，所以他提交它；`Ready`设置在`true`这里。

如果报告还没有被处理，系统会提供一个机会来召回报告。所以，当报表被召回时，`Ready`被设置为`false`返回。相反，在处理报表时，会创建一行`TestReportRef`，通过它的 引用报表`Id`。

现在想象在同一时刻

1.  用户想撤回报告；
2.  报告被添加到进程列表中；

一旦这可能同时发生，就可能发生错误。那就是报告将有`Ready`==`false`并且将在`TestReportRef`.

这是一个简单的控制台示例，说明如何发生这种情况：

```
var dc = new TestDataContext('my connection string');
dc.TestReport.InsertOnSubmit(new TestReport
{
    Text = "My report content",
    Ready = true //ready at once
});
dc.SubmitChanges();

Action recallReport = () =>
{
    var _dc = new TestDataContext(cs);
    var report = _dc.TestReport.FirstOrDefault(t => t.Ready);
    if (report != null && !report.TestReportRef.Any())
    {
        Thread.Sleep(1000);
        report.Ready = false;
        _dc.SubmitChanges();
    }
};

Action acceptReport = () =>
{
    var _dc = new TestDataContext(cs);
    var report = _dc.TestReport.FirstOrDefault(t => t.Ready);
    if (report != null && !report.TestReportRef.Any())
    {
        Thread.Sleep(1000);
        _dc.TestReportRef.InsertOnSubmit(new TestReportRef
        {
            FK_ReportId = report.Id
        });
        _dc.SubmitChanges();
    }
};

var task1 = new Task(recallReport);
var task2 = new Task(acceptReport);

task1.Start();
task2.Start();

task1.Wait();
task2.Wait();

foreach (var t in dc.TestReport)
{
    Console.WriteLine(string.Format("{0}\t{1}\t{2}", t.Id, t.Text, t.Ready));
}

foreach (var t in dc.TestReportRef)
{
    Console.WriteLine("ref id:\t" + t.FK_ReportId);
} 
```

`Thread.Sleep(1000);`添加以确保任务将检查一个相同的情况。

给定的示例可能听起来很尴尬，但是，我希望它应该解释我正在处理的问题。

我怎样才能避免这种情况？使存储库单例似乎不是一个好主意。**我应该只使用一些共享互斥锁（一个用于所有 Web 请求）来分隔写操作吗？** 或者在这种情况下我应该使用什么模式？

* * *

这只是我所拥有的场景之一的简化​​示例。但是，在某些情况下，它可能会遇到类似的差异。我猜最好的办法是让这种交叉点成为不可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:21:27.333

为什么不在`version`报告表上添加一列？任务从跟踪当前版本开始，任务结束时，如果版本与跟踪的版本相同，则操作正常，否则失败。如果操作正常，请将版本更新为版本 +1。这是一种乐观锁；这隐含地假设可能会发生冲突，但它们并不那么频繁。

**更新**

如果您使用的是 linqto sql，也许您可​​以检查参数[UpdateCheck](http://msdn.microsoft.com/en-us/library/system.data.linq.mapping.columnattribute.updatecheck.aspx) `[Column(UpdateCheck=UpdateCheck.Always)]` 在您的情况下这对于处理并发很有用。

# jquery - 逐字动画css3或jquery

> ID：15652830
> 
> 赞同：0
> 
> 时间：2013-03-27T06:07:38.683
> 
> 标签：jquery, css, animation, word

我有一个内容，必须在网页中显示一些动画，比如我们说话时应该一一显示单词。是否可以使用 jquery 或 css3 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:38:46.993

是的，这是可能的。不过，这可能取决于您说话的速度。您可以轻松地编写一些带有速度参数的基本 jQuery，该参数会按间隔显示单词。

这是我写的一个快速的jsfiddle，它正是这样做的。[http://jsfiddle.net/jquery4u/u4ENg/](http://jsfiddle.net/jquery4u/u4ENg/)

```
$(document).ready(function () {
    var $el = $('div'),
        text = $el.text(),
        speed = 1000; //ms

    $el.empty();

    var wordArray = text.split(' '),
        i = 0;

    INV = setInterval(function () {
        if (i >= wordArray.length - 1) {
            clearInterval(INV);
        }
        $el.append(wordArray[i] + ' ');
        i++;
    }, speed);
}); 
```

有一个非常好的[打字机 jQuery 插件](http://www.idangero.us/preview/?item=32)，它就像打字机一样可能有用。

# qt - 如何为 qtcreator 应用程序构建 mongodb c++ 驱动程序..？

> ID：15652831
> 
> 赞同：2
> 
> 时间：2013-03-27T06:07:43.350
> 
> 标签：qt, qt-creator

我是 QtCreator 的新手，我使用 C++ 创建了一个 gui。

我有以下要求：

1.  如何在 Qt Creator 中安装或导入 mongodb c++ 驱动程序？为此，我已经从网站下载了驱动程序。提取它。现在该怎么办？我不知道如何编译这些文件。（请提出任何详细的教程）

2.  导入驱动程序后，我想使用默认用户名和密码连接到本地 mongodb 数据库。

# jquery - jQuery mouseup 未在 ie8 中触发

> ID：15652833
> 
> 赞同：1
> 
> 时间：2013-03-27T06:08:03.070
> 
> 标签：jquery, mouseup

我有一些代码存档这样的功能：

在浏览器中，我可以拖动图像，代码如下：

```
 function activateMove() {
      isMoving = false;
      $thumb.bind('mousedown', startMove);
  }

  function startMove() {
      isMoving = true;
      $(document).bind('mousemove', moveUpdate);
      $(document).bind('mouseup', endMove);
      return false;
  }

  function endMove() {
      isMoving = false;
      $(document).unbind('mousemove', moveUpdate);
      $(document).unbind('mouseup', endMove);
      return false;
  } 
```

我只是复制了部分功能，但应该足够清楚......

问题是 mouseup 事件，它在除*IE8*之外的所有浏览器中都可以正常工作。

当一个人在浏览器外拖动拇指并释放鼠标时，任何鼠标移动（不按下鼠标）都会导致图像移动。要停止此自动移动，必须再次单击。

所以这意味着：

*   点击图片
*   拖动它，然后在页面可见区域之外释放鼠标（例如在地址栏上释放鼠标）
*   现在，如果您上下移动鼠标，图像会随着鼠标移动（这不是理想的行为）

*在IE8*中有什么可能的解决方案吗？我花了很多时间在这...

我会在线解答的，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-25T15:10:10.477

这是由于 IE8 中的一个错误，我认为是由于实施不善的安全修复。

在 IE8 中，一旦鼠标离开文档，就不会触发鼠标事件，包括`document.mouseup`- 我认为这是由于 IE 中较早的安全漏洞，您可以在浏览器窗口外获取鼠标点击的坐标。

为了解决这个问题，您需要在鼠标离开内容区域时触发另一个事件。幸运的是 IE 在这里有一个适当的事件我们可以使用：

```
function startMove() {
   isMoving = true;
   $(document).bind('mousemove', moveUpdate);
   return false;
}

function endMove() {
   isMoving = false;
   $(document).unbind('mousemove', moveUpdate);
   return false;
}

function activateMove() {
   isMoving = false;
   $thumb.bind('mousedown', startMove);
   $(document).bind('mouseup', endMove);

   //IE8 hack - also end the move when the mouse leaves the document
   $(document).bind('mouseleave', endMove);
} 
```

请注意，这`mouseleave`是所需的行为 - 当鼠标离开文档区域时它会触发一次。IE 以外的浏览器支持`mouseout`，但每次鼠标穿过子内容时都会触发。它很有用，所以 jQuery[在其他浏览器中欺骗了它](http://api.jquery.com/mouseleave/)。

# log4j - 如何配置 log4j 属性文件以在控制台中仅打印侦听器类日志？

> ID：15652836
> 
> 赞同：0
> 
> 时间：2013-03-27T06:08:33.290
> 
> 标签：log4j, testng

我正在使用由如下所示的几个日志方法组成的侦听器类来记录 TestNG 测试。我只想在我的控制台中打印侦听器类日志，并且完整日志应该转到 FullLog 文件。完整日志正在移动到完整日志文件，但在控制台中我得到了完整日志和侦听器类日志。我如何配置相同的 log4j 属性文件。

监听类：

```
public class SimpleListener implements ITestListener {           
    private static Logger m_log = Logger.getLogger(SimpleListener.class);  

    public void onFinish(ITestContext itestcontext) {          
        m_log.info("onFinish() is called");      }        

    public void onStart(ITestContext itestcontext) {         
        m_log.info("onStart() is called");      
        }        
} 
```

我的 log4j 属性文件：

```
log4j.rootLogger=INFO, FullLogAppender, ConsoleAppender
log4j.logger.TestLog=INFO, BreakPointAppender

#Console Log Appender
log4j.appender.ConsoleAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.ConsoleAppender=org.apache.log4j.ConsoleAppender
log4j.appender.ConsoleAppender.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n
log4j.appender.ConsoleAppender.Target=System.out

#Full Log Appender
log4j.appender.FullLogAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.FullLogAppender.File=mfgLogs/FullLogs/FullLog.log
log4j.appender.FullLogAppender=org.apache.log4j.RollingFileAppender
log4j.appender.FullLogAppender.layout.ConversionPattern=%d %-5p %c  %x- %m%n
log4j.appender.FullLogAppender.Append=false Dec 12 12:41:11 IST 2012 
```

控制台中的预期结果：

```
11:29:33,159  INFO SimpleListener:15 - onStart() is called
11:29:50,372  INFO SimpleListener:31 - runTest.....
11:30:23,637  INFO SimpleListener:23 - Failed 
11:30:24,402  INFO SimpleListener:12 - onFinish() is called 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:30:03.540

*   从根记录器中删除控制台附加程序

    ```
     log4j.rootLogger=INFO, FullLogAppender 
    ```

*   为您的听众添加一个记录器

    ```
    log4j.logger.xxxx.SimpleListener =INFO, ConsoleAppender 
    ```

xxxx.SimpleListener 将是您的侦听器的完全限定类名；

*   如果您不希望侦听器的日志出现在完整的日志文件中，请将 additivity 设置为 false

    ```
    log4j.additivity.xxxx.SimpleListener=false 
    ```

# java - com.allanbank.mongodb.MongoCollection.insert(Durability arg0, DocumentAssignable... arg1)的返回值是什么意思

> ID：15652837
> 
> 赞同：-4
> 
> 时间：2013-03-27T06:08:35.747
> 
> 标签：java, mongodb, asynchronous, insert, driver

返回值

```
com.allanbank.mongodb.MongoCollection.insert(Durability arg0, DocumentAssignable... arg1) 
```

是**int**。

当我尝试打印返回值时，我得到了 0。该值被正确插入。

**问题：**目前还不清楚返回值 0 是什么意思。所以我希望有人向我解释插入函数的返回值的含义，因为文档不是很清楚。

这个 int 值代表什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:14:18.260

这就是[文档](http://www.allanbank.com/mongodb-async-driver/apidocs/com/allanbank/mongodb/MongoCollection.html#insert%28com.allanbank.mongodb.Durability,%20com.allanbank.mongodb.bson.DocumentAssignable...%29)所说的

> 插入的文档数。如果持久性为 NONE，则该值将为 -1。

所以返回值的`0`意思是，插入的文档数是`0`（无）。

# image - Google Chrome 中没有图像加载 - 在 Firefox/IE 中运行良好

> ID：15652843
> 
> 赞同：0
> 
> 时间：2013-03-27T06:08:55.783
> 
> 标签：image, google-chrome, nivo-slider

出于某种原因，当我使用 Chrome 测试我的网站时，根本没有加载图像，甚至没有加载图标或底部简单的“返回页面顶部”箭头图标之类的微小图像。浏览器选项卡只是挂在旋转的圆圈加载状态。如果我刷新它 10 次或其他东西，那么可能会加载一部分图像。有趣的是，我的 Nivo-Slider 图像**永远不会加载**……无论我刷新多少次，Nivo-Slider 库都应该在我的页面左上方有一个很大的空白区域。

如果您检查，控制台完全没有错误。

谁能帮我检查一下为什么我的网站无法在 Chrome 中运行？它在 Firefox/IE 中完美运行。我承认某些图像可能具有较大的文件大小，但它不应该导致 Chrome 挂起半小时？

我正在使用最新的 Chrome/IE/Firefox。Windows 7 64 位。

我的网站：www.symphonyofpromise.com/inspiration/en

顺便说一句，我的网站是一个完全虚构的博物馆/画廊项目，它不是某些博物馆的官方网站！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:12:23.167

我不能 100% 确定这一点，但从“网络”面板判断，您可能同时加载了太多 MP3 文件，从而使同时请求的数量最大化。Chrome 可能会使用不同的优先级算法。

我建议删除其中一些 MP3 文件并将加载推迟到初始加载之后。

编辑：没关系，看起来 MP3 加载正常，但其他资源肯定会阻止它。请求永远不应该等待这么长时间。在“网络”面板中进一步查看，您会发现问题所在。

# maven - 从 mojo 修改 maven 插件配置的正确方法

> ID：15652853
> 
> 赞同：0
> 
> 时间：2013-03-27T06:09:56.140
> 
> 标签：maven, maven-3, maven-plugin

我知道这是一个主观问题，很可能会被关闭。但我不知道在哪里问这个问题才能得到答案。

maven android 插件有一件烦人的小事——它会修改原始清单文件，如果你在工作文件夹中运行 maven，你的 vcs 会建议你提交这些更改。

示例：如果我使用 beta 环境构建构建，我们有几个环境要运行，它将修改**AndroidManifest.xml**中的应用程序名称。

这可以通过复制原始清单并将副本引用到 android maven 插件来轻松解决。但是我决定让开发人员更容易，所以插件会自动执行此操作，除非开发人员指定他希望此更新在原始清单下完成。

修改功能很容易（复制文件并替换保持对文件的引用的属性），但问题是我需要将此属性传递给其他 mojos。

`AbstractAndroidMojo`在没有`execute`方法的抽象 mojo 中定义的属性。所有其他的 mojos 都扩展了这个类。定义如下所示：

```
/**
 * The <code>AndroidManifest.xml</code> file.
 *
 * @parameter default-value="${project.basedir}/AndroidManifest.xml"
 */
protected File androidManifestFile; 
```

我遵循了这个[答案](https://stackoverflow.com/questions/4061386/maven-how-to-pass-parameters-between-mojos)：

```
private void updatePluginConfiguration ( String newManifestFileValue )
{
    for ( Plugin plugin : project.getBuild().getPlugins() )
    {
        if ( plugin.getArtifactId().equals( "android-maven-plugin" ) )
        {
            Xpp3Dom configuration = (Xpp3Dom) plugin.getConfiguration();
            Xpp3Dom manifestFileParameter = configuration.getChild( "androidManifestFile" );
            if ( manifestFileParameter == null )
            {
                manifestFileParameter = new Xpp3Dom( "androidManifestFile" );
                configuration.addChild( manifestFileParameter );
            }
            manifestFileParameter.setValue( newManifestFileValue );
            break;
        }
    }
} 
```

但不幸的是，这不起作用。有许多明确的方法可以使其工作，但所有这些方法都需要更改所有当前的 mojos。

我想知道是否有人知道为什么答案不起作用或如何使它起作用。

更新插件的代码可以在这里找到： [https ://github.com/emartynov/maven-android-plugin/tree/keep-android-manifest](https://github.com/emartynov/maven-android-plugin/tree/keep-android-manifest)

感谢所有阅读到最后的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-23T17:10:54.080

您是否在同一生命周期阶段运行您的目标？如果没有，在您提供的帖子中写道：

> 注意：任何配置更改都会在当前阶段结束时被丢弃。

另一件要考虑的事情：目标是否按您期望的顺序运行？看看这篇文章：[http](http://www.mkyong.com/maven/maven-plugin-execution-order-in-same-phase/) ://www.mkyong.com/maven/maven-plugin-execution-order-in-same-phase/ - 也许这是您遇到问题的插件的顺序。

其他需要考虑的事情：也许您更喜欢更清洁的解决方案 - 将此类功能添加到 android-maven-plugin？Manfred Moser 通常对由拉取请求支持的提案持开放态度；）

我很可能会在我的插件中做同样的事情。唯一的区别是我重用了来自 maven-dependency-plugin 的目标，以在我的自定义插件生命周期内复制依赖项。我正在尝试为 InstallShield 项目构建制作插件。

# go - 如何在 golang 中调用 Linux/UNIX 的系统调用

> ID：15652857
> 
> 赞同：6
> 
> 时间：2013-03-27T06:10:06.937
> 
> 标签：go, system-calls

由于某些原因，我需要调用系统（Linux）的一些系统调用，我检查了“syscall”包的文档，但找不到任何关于它的信息。

然后我刚刚看到一个项目（[https://github.com/AllenDang/w32/blob/master/kernel32.go](https://github.com/AllenDang/w32/blob/master/kernel32.go)），它包装了windows api。我读了一下它的源代码。

它用

```
modkernel32 = syscall.NewLazyDLL("kernel32.dll") 
```

加载动态库。但是，没有函数 NewLazyDLL() 的文档

我确信 Linux/UNIX 应该有类似的功能。有没有人可以告诉我函数的名称或在 Golang 中调用 Linux 系统调用或从 libc.so 加载函数的方式？

**更多细节**

我想调用系统调用'daemon'或'fork'（我想守护进程），因为我找不到golang库提供它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T07:10:38.033

目前 Go 标准库中没有`daemon`样式函数。添加此类功能存在[一个未解决的错误](http://code.google.com/p/go/issues/detail?id=227)，但已推迟到 Go 1.1 发布之后。我建议阅读错误报告，因为它并不像最初出现的那么简单。

除了拥有守护进程本身之外，还有其他方法可以运行守护进程。例如，像 Upstart 和 Systemd 这样的现代 init 守护进程可以为您管理此类守护进程。

# asp.net-mvc - 什么是松耦合？

> ID：15652861
> 
> 赞同：7
> 
> 时间：2013-03-27T06:10:20.723
> 
> 标签：asp.net-mvc

我在**MSDN**上研究了一些**MVC**的概念，并且我达到了他们写了一个词**“MVC 的三个主要组件之间的松散耦合”**的地步。

 ****我在谷歌上搜索了很多关于松散耦合的信息。但我每次都得到不同类型的答案。

甚至我得到了一个新词**紧密耦合**和**紧密内聚**。

任何人都可以正确定义这个词，以及它的确切含义。

我期待着您的回复。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T15:46:22.443

松散耦合只是以这样一种方式编写软件，即所有类都可以独立工作而无需相互依赖。由于您正在学习 MVC，我将使用它作为示例来演示松散耦合的概念：

**1) 紧耦合**

ASP.NET Web 表单是紧密耦合的。每个 .aspx 页面都依赖于页面背后的代码，这使得自动化测试成为一场噩梦

**2) 松耦合**

ASP.NET MVC 是松耦合的。逻辑分为 3 个部分：

1.  模型 - 包含您的类和业务逻辑
2.  视图 - 根据模型数据显示应用程序 UI
3.  控制器 - 响应即将到来的 URL 请求并选择适当的视图

这三个部分可以独立更改而不会相互影响，并且由于[关注点分离](http://weblogs.asp.net/melvynharbour/archive/2008/07/30/clean-separation-of-concerns-in-mvc.aspx)的原则，我们可以轻松编写自动化测试来测试我们的模型，而无需依赖视图。****

# c# - 针对资源 mvc3 授权用户

> ID：15652863
> 
> 赞同：1
> 
> 时间：2013-03-27T06:10:28.077
> 
> 标签：c#, asp.net-mvc-3

我需要授权用户使用我的 MVC 3 项目中的资源。按照以下方式进行是否是一个好习惯？

```
interface IResource
{
    string Id { get; set; }
    bool Authorize(User user);
}

class User
{
    // some logic for user
}

class ResourceA : IResource
{
    public string Id { get; set; }

    public ResourceA(string id)
    {
        Id = id;
    }

    bool Authorize(User user)
    {
        // Query database to check if user has permission to the resource
        // return true if the user has, otherwise false
    }
}

class TestController : Controller
{
    // Get details of resource A
    public ActionResult Get(User user, string resourceId)
    {
        IResource resource = new ResourceA(resourceId);
        if (resource.Authorize(user))
        {
            // do stuff
        }
        else
        {
            throw HttpException(403, "No permission");
        }
    }
} 
```

在上述实现中：

网站的所有资源都强制实现IResource接口。

所有与资源交互的请求都需要实现授权码。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:20:01.580

解决方案看起来不错。如果您有与资源相关的特定控制器和操作，您还可以使用 ActionFilter ，您可以在其中创建自定义逻辑并在验证失败时检查和重定向。属性也是中央逻辑系统的方式之一。解决方案取决于您的用户将如何与资源进行交互。

# javascript - 如何获取我的谷歌地图窗口的边界框坐标

> ID：15652867
> 
> 赞同：17
> 
> 时间：2013-03-27T06:11:08.827
> 
> 标签：javascript, jquery, google-maps-api-3

我正在开发一个包含 google maps api v3 和 PostGres 的项目。

我想要做的是将我的地图窗口的边界框坐标（左下角和右上角）传递给 POSTGRES，并在特定缩放级别上获取生成的地图窗口的 POI 位置。

我怎样才能做到这一点..？有任何想法吗？在 api v3 中是否已经有直接的功能？

我有这个，但这似乎对我不起作用

[在 Google 地图窗口中查找角的经纬度](https://stackoverflow.com/questions/1083472/finding-the-lat-long-of-the-corners-in-a-google-maps-window)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-27T10:26:08.207

[问题](https://stackoverflow.com/questions/1083472/finding-the-lat-long-of-the-corners-in-a-google-maps-window)是使用Google Maps API v2，使用 Google Maps API v3 等效[google.maps.Map.getBounds()](https://developers.google.com/maps/documentation/javascript/reference#Map)。

在 bounds_changed 事件触发之前，边界将不可用，因此将其包装在 bounds_changed 的​​侦听器中

```
google.maps.event.addListener(map, "bounds_changed", function() {
   // send the new bounds back to your server
   alert("map bounds{"+map.getBounds());
}); 
```

# sql-server - Sql server xquery 返回元素名称

> ID：15652872
> 
> 赞同：0
> 
> 时间：2013-03-27T06:11:43.353
> 
> 标签：sql-server, xml, sql-server-2008, xquery, xquery-sql

我有以下xml

```
declare @xml xml = '<Values><a>AAA</a><b>BBB</b></Values>';
select @xml.query('for $k in /Values return concat(",@", "=''", $k, "''")') 
```

它返回

> ,@='AAABBB'

不过我期待

> ,@a='AAA',@b='BBB'

如何编写xquery？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:18:28.153

我自己想通了。

```
declare @xml xml = '<Values><a>AAA</a><b>BBB</b></Values>';
select @xml.query('for $k in /Values/* 
    return concat(",@", fn:local-name($k), "=''", $k, "''")') 
```

# algorithm - 如何遍历邻接矩阵？

> ID：15652877
> 
> 赞同：6
> 
> 时间：2013-03-27T06:12:04.417
> 
> 标签：algorithm, tree, graph-algorithm

邻接矩阵表示任意树中节点之间的连接。

这是一个邻接矩阵的实例，它呈现一个无向图：

```
  1 2 3 4
1 0 1 1 0
2 1 0 1 0
3 1 1 0 0
4 0 0 0 0

```

该矩阵显示了一个图，其中节点 1 和 2 已连接，1 和 3 已连接，2 和 3 已连接。

如何使用这种矩阵暴力破解此类图中可能路径的所有组合？我的意思是只选择节点 1 是一个单独的组合。然后，比如说，1-2 是一个单独的组合。1-2-3；3-1-2。但是 1-2-3-1 是不可能的，因为重复选择了同一个节点。

那么如何使用这些规则暴力破解所有组合呢？

我更喜欢 C#、C++ 或 Java 语言示例）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T07:05:11.990

鉴于您示例的限制，编写代码不会超过 40 行。

本质上，您只需继续访问连接到您当前正在检查的节点的节点。一旦发现没有新的节点可以访问，就会进行跟踪支持。

此外，您需要一些方法来跟踪您前往当前节点的路径。在示例中，我只是将此信息放入堆栈中，以使我免于一些内存管理问题。

```
#include <stdio.h>

#define N_NODES 4
#define NAME_OFFSET 1

int edges[N_NODES][N_NODES] = {
    { 0, 1, 1, 0 },
    { 1, 0, 1, 0 },
    { 1, 1, 0, 0 },
    { 0, 0, 0, 0 }
};

int visited[N_NODES] = { 0, 0, 0, 0 };

struct Node {
    int node;
    struct Node *prev;
};

void visit(int node, struct Node *prev_node) {
    struct Node n = { node, prev_node };
    struct Node *p = &n;

    do 
        printf("%d%s", p->node + NAME_OFFSET, (p->prev != NULL)?  "->" : "\n");
    while ((p = p->prev) != NULL);

    visited[node]=1;
    int i;
    for (i = 0; i < N_NODES; ++i)
        if ((visited[i] == 0) && (edges[node][i] == 1))
            visit(i, &n);
    visited[node] = 0;
}

int main (int argc, char *argv[]) {
    int i;
    for (i = 0; i < N_NODES; ++i) {
        visit(i, NULL);
    }
    return 0;
} 
```

产生：

```
1
2->1
3->2->1
3->1
2->3->1
2
1->2
3->1->2
3->2
1->3->2
3
1->3
2->1->3
2->3
1->2->3
4 
```

我想这就是你要找的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T06:25:29.393

看起来好像您正在使用无向图，并且您可能想要一个非循环路径。

您拥有的 2 个最简单的选择是在图表上进行广度优先或深度优先的遍历。我要做的是编写一个递归方法（深度优先），如下所示：

```
public void recurse(int node) {
    System.out.print("-> " + node);
    for (int i = node; i < num_nodes; ++i) {
        if (i == node)
            continue;
        if (graph[node][i] > 0)
            recurse(i);
    }
} 
```

然后你只需遍历节点并调用`recurse(node)`每个起始节点。我希望这会有所帮助。

# asp.net - gridview 中的文件上传控件在 asp.net 的更新面板中不起作用

> ID：15652880
> 
> 赞同：1
> 
> 时间：2013-03-27T06:12:26.543
> 
> 标签：asp.net, updatepanel

文件上传控制不起作用..

文件上传控制在 gridview 里面，而 grid view 在 update panel 里面。

当我做回发文件上传控制 furesume.hasfile 给我假如果文件在那里也给假。

请问任何机构可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:13:33.657

添加您的网格视图作为更新面板的触发器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:01:44.760

您不能在部分回发中使用更新面板中的文件上传控件。
请参阅我对问题的
`http://stackoverflow.com/questions/15539634/uploaded-file-content-preview/15546618#15546618`回答，这与您的问题有关。我已经展示了一个完整的例子。
简而言之，使用`ajaxfileupload`

# jquery - 如何从分页的 JSON 数据中显示图像？

> ID：15652883
> 
> 赞同：1
> 
> 时间：2013-03-27T06:12:56.657
> 
> 标签：jquery, json

我是 JSON 和 jQuery 的新手。[我刚刚尝试了来自该站点http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)的示例 来显示来自 Flickr 的照片，它的工作。

然后我尝试显示我朋友网站上的照片。但它不再起作用了。

这是 JSON 数据的结构。我发现这里有分页。但我不知道我应该如何引用 LargePhotoUrl 来显示

```
{
featuredshops: [],
-page: {
    - pageInformation: {
        number: 1,
        size: 20
    }
    first: 1,
    last: 20,
    totalNumberOfPages: 10,
    totalNumberOfEntities: 100
    - entities: [
        -{
            id: 1,
            name: "A",
            -photos{
                - smallPhotoUrl: "photos/1/smalldisplay.jpg"
                - largePhotoUrl: "photos/1/largedisplay.jpg"
            }
        }
        -{
            id: 2,
            name: "B",
            -photos{
                - smallPhotoUrl: "photos/2/smalldisplay.jpg"
                - largePhotoUrl: "photos/2/largedisplay.jpg"
            }
        }
    ]
}
} 
```

这就是我尝试过的

```
function() {
        var shopAPI = "www.sample.com/shops.json";
        $.getJSON( shopAPI, {
        format: "json"
    })
    .done(function( data ) {
        $.each(data.page.entities, function(i, item){
            var img = $("<img/>").attr("src", item.photos.largePhotoUrl);
            $("<a/>").attr({href: item.photos.largePhotoUrl, title: "Shop Photos"}).append(img).appendTo("#images");
        });
    });
})() 
```

# git - git pull 后出现错误

> ID：15652885
> 
> 赞同：0
> 
> 时间：2013-03-27T06:13:03.280
> 
> 标签：git

我试图从一个 repo 中“git pull”，然后我收到一条错误消息，说 pull 是不可能的，因为你有未合并的文件，但我在网上做了一些搜索，“git pull = git fetch + git merge”，不是吗？

我使用了 git pull，然后我收到以下消息

```
 U   Assembly-CSharp.pidb
    U   Assembly-UnityScript.pidb
    M   Assets/testing.unity
    U   Library/assetDatabase3
    U   Temp/Undo55e9beda8401848509d9e3bb5d5fe513
    U   Temp/Undof0c17c0ba33904b16a1698563ff5302c
    U   Temp/__EditModeScene
    U   wiisummoner-csharp.sln
    U   wiisummoner.sln
Pull is not possible because you have unmerged files.
Please, fix them up in the work tree, and then use 'git add/rm <file>'
as appropriate to mark resolution, or use 'git commit -a'. 
```

上面是错误消息，然后我尝试“git merge”，我得到一个错误“合并是不可能的，因为你有未合并的文件”。这太令人困惑了..有人知道问题是什么吗？我想要的只是从回购中提取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:19:47.407

正如您所说，“git pull”相当于“git fetch + git merge”。

如果你不能做一个“git merge”，那么从逻辑上讲你不能做一个“git pull”，因为它会在这个过程中做一个“git merge”。

您可能在 Temp 中有自己的文件，或者您的本地 *.pidb 文件可能已经存在并与上游分支冲突。

将这些文件放入版本控制只是自找麻烦，除非您想对这些文件进行版本化和协调差异（而且您真的不想......），我建议您拒绝上游更改并告诉他们修复它。

顺便说一句，为了记录，这就是 git pull 的完整输出的样子，我制作了一个简单的测试存储库来演示：

```
$ git --version
git version 1.7.12.4 (Apple Git-37)
$ git pull
Updating e78f298..3067a12
error: The following untracked working tree files would be overwritten by merge:
    three.txt
Please move or remove them before you can merge.
Aborting 
```

在这种情况下，答案很简单：

*   将three.txt 移到其他地方。（也许这样`git stash`做）
*   执行`git pull`

然后，如果您的“three.txt”版本很重要，请另外执行：

*   将three.txt移回。（如果你这样做了`git stash`，也许你可以这样做`git stash pop`
*   尝试调和差异，这样您就不会笨拙地覆盖其他人的更改。
*   提交新的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:15:00.333

您应该隐藏您的更改并在之后弹出它们

```
git stash
git pull
git stash pop 
```

之后您可能会遇到可以手动修复的冲突。

另一种选择是，如果创建提交有意义（即您完成了所做的更改），您可以简单地提交更改并在此之后拉取。

# javascript - 表单提交后如何停止重定向到 API 调用结果？

> ID：15652896
> 
> 赞同：0
> 
> 时间：2013-03-27T06:13:52.730
> 
> 标签：javascript, html, forms, api

我正在尝试使用 Clipped API ( [http://www.clipped.me/api.html](http://www.clipped.me/api.html) ) 在用户提交文章 url 时返回文章摘要。当用户提交适当的 URL 时，他们会被重定向到带有 JSON 结果的新页面。我想让用户留在页面上并在 JavaScript 中解析 JSON 字符串。我假设重定向与表单操作是指向脚本本身的链接这一事实有关，但我不确定在这里做什么。下面是代码。

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
<title>Summarize you will!</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
</head>

<body>

    <form action="http://clipped.me/algorithm/clippedapi.php?url=[URL]"  method="get">
        <input type="text" name="url"/>
        <input type="submit" value="Submit"/>
    </form>

</body>

<script type="text/javascript">

</script>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:16:42.047

不要使用表单提交来调用 API。请改用 AJAX 调用。

# java - 将 JTable 中的内容存储到文本文件中

> ID：15652898
> 
> 赞同：0
> 
> 时间：2013-03-27T06:13:58.633
> 
> 标签：java, swing, file-io, jtable, defaulttablemodel

我写了一个带有 5 个文本框和一个按钮的摇摆表单。当我单击按钮保存时，输入的数据将显示在表格中。现在我想将表中显示的数据存储到文本文件中。任何人都可以帮我处理这段代码。我仍然是一个 Java 初学者，对 Java 编码知之甚少。经过大量冲浪后，我能够完成桌面部分。我附上到目前为止完成的代码。如果我犯了一些愚蠢的错误，请原谅。真的需要你的帮助。提前致谢..

```
import javax.swing.*;   
import java.awt.*;      
import java.awt.event.*;  

class ReadTextFile extends JFrame  
{   
JButton save;  
JPanel panel;   
JLabel label1,label2,label3,label4,label5;   
final JTextField text1,text2,text3,text4,text5;    

ReadTextFile(){    
label1 = new JLabel();   
label1.setText("English Word:");   
text1 = new JTextField(20);    

label2 = new JLabel();   
label2.setText("English Synonym:");   
text2 = new JTextField(20);   

label3 = new JLabel();    
label3.setText("Kannada Word:");    
text3 = new JTextField(20);    

label4 = new JLabel();      
label4.setText("Kannada Synonym:");    
text4 = new JTextField(20);    

label5 = new JLabel();
label5.setText("Parts of Speech:");    
text5 = new JTextField(20);     

save=new JButton("SAVE");    

panel=new JPanel(new GridLayout(6,2));     
panel.add(label1);     
panel.add(text1);       
panel.add(label2);     
panel.add(text2);    
panel.add(label3);     
panel.add(text3);     
panel.add(label4);     
panel.add(text4);      
panel.add(label5);     
panel.add(text5);    
panel.add(save);    
add(panel,BorderLayout.CENTER);    
setTitle("Word Base");     

save.addActionListener(new ActionListener() {    
public void actionPerformed(ActionEvent ae){      
String value1=text1.getText();     
String value2=text2.getText();     
String value3=text3.getText();      
String value4=text4.getText();       
String value5=text5.getText();     
Object rowData[][] = { { value1, value2,value3,value4, value5} };     
Object columnNames[] = { "English Word", "English Synonym", "Kannada Word","Kannada Synonym","POS" };      
JFrame f=new JFrame();       
JTable table = new JTable(rowData,columnNames);        
JScrollPane scrollPane = new JScrollPane(table);       
JPanel p=new JPanel();       
p.add(scrollPane);       
f.add(p);       
f.setVisible(true);      
//f.setDefaultLookAndFeelDecorated(true);      
f.setSize(400,200);        
}      
});      
}        

public static void main(String arg[])     
{       
try    
{      
  ReadTextFile frame=new ReadTextFile();        
  frame.setSize(300,200);       
  frame.setVisible(true);       
}        
catch(Exception e)       
{}      
 }      
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:15:05.227

在您的按钮操作侦听器中，您可以从表中获取数据表并像这样写入文件。

```
StringBuffer sbTableData = new StringBuffer();
for(int row = 0; row < table.getRowCount(); row ++){
    for(int column = 0; column < table.getColumnCount(); column ++){
        sbTableData.append(table.getValueAt(row, column)).append("\t");
    }
    sbTableData.append("\n");
}
// Write `sbTableData.toString()` into a file here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:50:25.000

首先，你需要添加你的按钮点击事件，比如：

```
save.addActionListener(new ActionListener(){
//this you must get JFiledText value and use ioStream input to file
}) 
```

# php - 解析有效的 html (php - tidy)

> ID：15652899
> 
> 赞同：0
> 
> 时间：2013-03-27T06:14:17.203
> 
> 标签：php, parsing, htmltidy

我想使用 tidy 插件，但只用于一个字符串。我正在使用的代码是：

```
tidy_repair_string($string); 
```

我的问题是这个脚本在一个文件中，我只需要一次来包含他。

但整理重复的 html、正文、标题标签（文件的通用标签）。

如何只验证我的字符串而不返回 html 等？

示例：如果我的字符串是`<b><s>Text</b>`我希望 tidy 只返回`<b><s>Text</s></b>`

**不是 ：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<title></title>
</head>
<body>
<b><s>Text</s></b>
</body>
</html> 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-27T15:55:18.440

正如您在问题中已经指出的那样，Tidy 对完整的 HTML 文档进行操作，因此修复后的文档包含（如果已配置）一个文档类型，但始终包含一个 head 部分。

您正在寻找一个 HTML 片段，它不是一个完整的 HTML 文档。

这种区分已经包含了解决方案：将您的 HTML 片段作为正文注入，将其作为文档进行修复，然后仅获取正文的子项作为字符串。完毕。这是一个相当短但已经有效的示例：

```
/* Tidy example: Clean a HTML fragment */

$fragment = '<b><s>Text</b>';

$tidy = new Tidy;
$tidy->parseString($fragment);
$tidy->cleanRepair();

$result = implode('', (array) $tidy->body()->child); // <b><s>Text</s></b> 
```

如果您想更进一步并验证 HTML 片段（例如，只有有效的 HTML 标签和所有标签都关闭，请参阅[tidy configuration](http://tidy.sourceforge.net/docs/quickref.html)），您可以在其前面加上最低限度的 HTML，因此错误和警告属于片段本身。然后可以通过以下方式获得状态[`tidy::getStatus()`](http://www.php.net/manual/en/tidy.getstatus.php)：

```
/* Tidy example: Validate a HTML fragment (4 samples) */

$fragments = [
    ['Valid fragment', '<b><s>Text</s></b>'],
    ['Unclosed tag', '<b><s>Text</b>'],
    ['Unknown tag', '<unknown></unknown>'],
    ['Unfinished attribute', '<a href=">link</a>'],
];

$tidy = new Tidy;

foreach ($fragments as list($title, $fragment)) {
    $tidy->parseString("<!DOCTYPE html><title>HTML fragment</title><body>" . $fragment);
    $status = $tidy->getStatus();
    $tidy->cleanRepair();
    $result = implode('', (array)$tidy->body()->child);
    printf("%s - Status: %d\n  HTML: %s\n  Repaired: %s\n", $title, $status, $fragment, $result);
} 
```

此示例将提供以下输出，演示`getType`默认配置中返回值的含义：

```
Valid fragment - Status: 0
  HTML: <b><s>Text</s></b>
  Repaired: <b><s>Text</s></b>
Unclosed tag - Status: 1
  HTML: <b><s>Text</b>
  Repaired: <b><s>Text</s></b>
Unknown tag - Status: 2
  HTML: <unknown></unknown>
  Repaired: 
Unfinished attribute - Status: 2
  HTML: <a href=">link</a>
  Repaired: <a href="%3Elink%3C/a%3E"></a> 
```

这比您要求的要多，我只是将其添加为一个附加示例，例如查看字符串中的所有标签是否都已关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:17:26.053

也许这行得通。如果没有，请参阅[http://tidy.sourceforge.net/docs/quickref.html#output-html](http://tidy.sourceforge.net/docs/quickref.html#output-html) 了解更多选项

```
$string = tidy_repair_string($string, array(
'output-html' => false,
'doctype' => false)); 
```

# java - 删除 Jetty 9 中的 HTTP Server 标头

> ID：15652902
> 
> 赞同：24
> 
> 时间：2013-03-27T06:14:31.550
> 
> 标签：java, jetty

这是在 Jetty 8 中隐藏服务器版本的方式：

```
Server server = new Server(port);
server.setSendServerVersion(false); 
```

你如何在 Jetty 9 中做到这一点？所以现在它应该看起来像这样？

```
HttpConfiguration config = new HttpConfiguration();
config.setSendServerVersion(false);
//TODO: Associate config with server???
Server server = new Server(port); 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-04-23T13:06:53.557

在 Jetty 9 中，需要在 HttpConfiguration 上进行配置：

```
HttpConfiguration httpConfig = new HttpConfiguration();
httpConfig.setSendServerVersion( false );
HttpConnectionFactory httpFactory = new HttpConnectionFactory( httpConfig );
ServerConnector httpConnector = new ServerConnector( server,httpFactory );
server.setConnectors( new Connector[] { httpConnector } ); 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-03-28T05:48:31.860

如果制定了一些似乎有效的代码。不确定它是否正确，但至少它有效（：

```
Server server = new Server(port);
for(Connector y : server.getConnectors()) {
    for(ConnectionFactory x  : y.getConnectionFactories()) {
        if(x instanceof HttpConnectionFactory) {
            ((HttpConnectionFactory)x).getHttpConfiguration().setSendServerVersion(false);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-12-05T12:40:34.577

如果您使用 jetty9 作为独立服务器，您可以通过`jetty.httpConfig.sendServerVersion=false`在文件中设置来禁用服务器签名`start.ini`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-26T00:07:50.957

Jacob 解决方案的 Lambda 样式变体（对我有用）：

```
final Server server = new Server(port);
Stream.of(server.getConnectors()).flatMap(connector -> connector.getConnectionFactories().stream())
            .filter(connFactory -> connFactory instanceof HttpConnectionFactory)
            .forEach(httpConnFactory -> ((HttpConnectionFactory)httpConnFactory).getHttpConfiguration().setSendServerVersion(false)); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-27T12:34:40.470

现在有一个带有该设置的 HttpConfiguration 对象。

org.eclipse.jetty.server.HttpConfiguration

查看 jetty.xml 中有关 http 配置部分的部分，该部分显示如何设置对象，然后查看 jetty-http.xml 文件，该文件显示如何使用该配置。请记住，jetty xml 文件实际上只是 java 的一个薄皮，工作原理基本相同。

[http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-server/src/main/config/etc/jetty.xml](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-server/src/main/config/etc/jetty.xml)

[http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-server/src/main/config/etc/jetty-http.xml](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-server/src/main/config/etc/jetty-http.xml)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-05T01:56:16.403

一些安全分析软件会将在响应标头中发送服务器版本标记为问题。

OP 正在寻找嵌入式解决方案，但如果您的 Jetty 部署使用 server.ini 文件，您可以简单地设置 jetty.send.server.version=false

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-03T07:24:35.870

in `jetty9.2`，将此配置更改为`false`in`start.ini`

```
# should jetty send the server version header?
jetty.send.server.version=true 
```

# flash - 这是否可以动态更改 Flash 文档资源（图像等）？

> ID：15652903
> 
> 赞同：0
> 
> 时间：2013-03-27T06:14:32.630
> 
> 标签：flash, animation, flash-cs5

我已经在 Flash 中创建了一个动画横幅，现在我想授予管理员访问权限以通过管理面板动态更改图像等。由于我在 Flash 中开发的动画的输出只是一个 swf 文件……那该怎么做呢？在 JavaScript 或 JQuery 的帮助下这是否可能......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:20:05.387

据我所知（有人可能会纠正我），我不相信你可以。一旦图像被编译为 swf 的一部分，它就会被有效地“烘焙”。一种解决方案是编写 swf 以从 url 动态加载外部图像，这样它们就不会被烘焙，然后可以指向管理员设置的任何图像。

# qt - 如何在嵌入式 Web 浏览器中支持 window.print()？

> ID：15652906
> 
> 赞同：14
> 
> 时间：2013-03-27T06:14:38.117
> 
> 标签：qt, printing, webkit

我想`print`为 HTML 文件创建一个按钮。嗯，`window.print()`。但这不起作用，因为软件中嵌入的网络浏览器是我公司自己开发的。它不支持打印。

这个网络浏览器使用的是WebKit，而我对Qt和WebKit知之甚少。

那么，网络浏览器如何处理`window.print`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T04:38:06.777

Alter the HTML file so that if a query string argument like ?print=1 is present it will automatically call window.print(). Then just open your-file.html?print=1 in a separate browser process.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T00:22:19.350

考虑通过 AJAX 将 HTML/CSS（或链接）的内容发送到服务器端打印服务器，该服务器然后呈现 HTML 并将其发送到网络打印机。另一种选择是使用 NSAPI (C++) 创建浏览器插件。另一种选择是嵌入一个 Java 小程序，它获取 HTML，呈现它，然后将它发送到打印机。

# java - java如何检查文件中使用的模式？

> ID：15652909
> 
> 赞同：-4
> 
> 时间：2013-03-27T06:14:50.810
> 
> 标签：java, filereader

我正在从不同的操作系统读取不同的文件。在文件中有很多行。但我得到的信息是，在每一行之后可能会使用“\n”或“\r”或类似的东西。当我按照[阅读文本文件的最佳方式中的说明阅读文件时[关闭]](https://stackoverflow.com/questions/4716503/best-way-to-read-a-text-file)

那么我应该通过在[Class Pattern](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Pattern.html)中解释的 if-else 条件在控制台中添加什么打印。我需要帮助。我正在尝试阅读[此](https://stackoverflow.com/questions/4915967/how-match-a-pattern-in-text-using-scanner-and-pattern-classes)内容。但是还是需要专家帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:21:07.750

如果您只是打印到控制台，您可以简单地使用 \n。为了给您一些背景知识，这两个分隔符真正重要的时间是在文件本身内（以及您必须手动检测或在文件中写入换行符的时间）。在基于 unix 的系统中，换行符在文件中由 \n 表示。在 Windows 中，换行符由 \r\n 表示。但是当您打印到控制台时，\n 将正确执行。

同样在您提供的模式匹配示例中。您只需手动添加一个换行符，这样您就可以知道换行符在哪里。因此，特别是在这种情况下，您可以根据需要标记换行符，只要它是一致的。

# oop - 重构和依赖问题

> ID：15652910
> 
> 赞同：0
> 
> 时间：2013-03-27T06:14:57.720
> 
> 标签：oop, refactoring, packaging, composer-php, decoupling

我有许多 SMS 提供程序，每个都位于文件系统的单独目录中。每个提供者目录内的主类扩展了抽象类 ProviderAbstract.php，它位于文件系统的其他位置和提供者目录之外。

我想让每个提供者成为一个单独的作曲家包，以便可以独立开发、测试和部署。问题是每个提供者扩展的 ProviderAbstract 类......在这种情况下最好的方法是什么？在每个 Provider 包中都有一个类的副本不是解决方案.. 解决这种依赖关系的最佳方法是什么..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:33:33.547

我不知道这是否是正确的方法。如果您在 Monolog 或 Swiftmailer 等处有日志，它们的一个作曲家包中都有“提供者”。他们可以开发一个 Provider 而无需查看其他 Provider，然后对其进行测试并部署整个软件包。如果您决定将如此小的组件放入自己的 Composer 包中，您最终会付出很多开销。

但是，如果您想继续这样做，您可以将抽象类提取到它自己的作曲家包中，并让所有其他包都将其作为依赖项。这就是 PSR3 记录器接口的使用方式。

# solr - Solr全进口性能

> ID：15652918
> 
> 赞同：1
> 
> 时间：2013-03-27T06:15:42.087
> 
> 标签：solr, solr4

我有一小部分查询和实体，即使性能很差，我只是想知道我可以采取哪些技巧和配置来提高性能？

注意我使用的是 Solr **4.1。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T22:22:32.653

您应该尽量减少导入期间的提交次数。即使您在向 Solr 添加文档时不定期提交，Solr 也会根据 solrconfig.xml autoCommit 设置进行自动提交：

```
<autoCommit>
   <maxDocs>10000</maxDocs>
   <maxTime>15000</maxTime>
   <openSearcher>false</openSearcher>
</autoCommit> 
```

增加两者`maxDocs`，`maxTime`看看你是否获得更好的速度。（`maxTime`以毫秒为单位，因此默认设置仅为 15 秒，这对于批量导入来说非常低。）

您甚至可以尝试在批量导入期间禁用自动提交，并在添加所有文档后发出一个提交命令。如果这不会从 Solr 引发内存不足异常，那么这是您可以获得的最佳速度。

如果您正在执行 RDBMS 导入，那么我会建议使用 JOIN 捕获尽可能多的字段并最大限度地减少子实体的数量，因为每个子实体都会打开与数据库的单独连接。由于您是从 mongo 导入的，因此这不适用于您。您可以通过使用 Solr 所需的所有数据创建一个新的 mongo 集合来进行试验，在数据导入器中保留一个实体，看看它是否提高了导入速度。

# xaml - 实现搜索界面 Windows Phone

> ID：15652922
> 
> 赞同：2
> 
> 时间：2013-03-27T06:16:36.990
> 
> 标签：xaml, search, windows-phone-8, windows-phone

我环顾四周，但找不到关于如何为 Windows Phone 应用程序实现搜索覆盖的良好参考。我想模拟搜索是如何在商店、音乐和其他系统类型的应用程序中实现的。

我用图标创建了应用程序栏，但不确定单击按钮时发生了什么。似乎在页面顶部过渡了一些叠加层。我可以效仿这一点，但由于这似乎是一个常见的场景，我希望会有一个指南来实现跨应用程序的一致体验。

1.  带有搜索按钮的应用程序栏：[https ://skydrive.live.com/redir?resid=1EBF644EEFCAD766!25155&authkey=!AB2pGcqFd9jo4JE](https://skydrive.live.com/redir?resid=1EBF644EEFCAD766!25155&authkey=!AB2pGcqFd9jo4JE)
2.  覆盖：[https ://skydrive.live.com/redir?resid=1EBF644EEFCAD766!25156&authkey=!ALmHpcgyqYyvBfU](https://skydrive.live.com/redir?resid=1EBF644EEFCAD766!25156&authkey=!ALmHpcgyqYyvBfU)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T21:17:16.463

没有官方控制可以为您做到这一点。在我的应用程序中，我执行以下操作来涵盖这种情况：

1 - 将搜索按钮添加到应用程序栏

2 - 单击按钮时，导航到新页面（例如 SearchPage.xaml）：

```
NavigationService.Navigate(new Uri("/SearchPage.xaml", UriKind.Relative)); 
```

3 - 将焦点设置到该页面上 Loaded 事件中的搜索框以打开键盘（例如在 OnNavigatedTo 中执行此操作将不起作用）：

```
mySearchTextbox.Focus(); 
```

4 - 使用[Silverlight Toolkit for Windows Phone](http://phone.codeplex.com/)[添加从/到页面的](http://www.geekchamp.com/articles/wp7-transitions-in-depth--key-concepts-and-api)转换。我使用以下动画，它创建了与内置搜索页面非常相似的动画样式：

```
<toolkit:TransitionService.NavigationInTransition>
    <toolkit:NavigationInTransition>
        <toolkit:NavigationInTransition.Forward>
             <toolkit:SlideTransition Mode="SlideUpFadeIn" />
        </toolkit:NavigationInTransition.Forward>
        <toolkit:NavigationInTransition.Backward>
            <toolkit:SlideTransition Mode="SlideUpFadeIn" />
        </toolkit:NavigationInTransition.Backward>
    </toolkit:NavigationInTransition>
</toolkit:TransitionService.NavigationInTransition>

<toolkit:TransitionService.NavigationOutTransition>
    <toolkit:NavigationOutTransition>
        <toolkit:NavigationOutTransition.Backward>
            <toolkit:SlideTransition Mode="SlideDownFadeOut" />
        </toolkit:NavigationOutTransition.Backward>
        <toolkit:NavigationOutTransition.Forward>
            <toolkit:SlideTransition Mode="SlideDownFadeOut" />
        </toolkit:NavigationOutTransition.Forward>
    </toolkit:NavigationOutTransition>
</toolkit:TransitionService.NavigationOutTransition> 
```

# entity-framework - 在同一个表中加入具有多个字段的表

> ID：15652927
> 
> 赞同：1
> 
> 时间：2013-03-27T06:17:08.150
> 
> 标签：entity-framework, linq-to-sql, nopcommerce

我尝试在 Linq 中创建一个连接查询。我想加入一个表多个相同的字段

桌子。请在下面查看我的代码。

```
var roles = (from ords in _orderRepository.Table 
                         join customers in _customerRepository.Table on ords.CustomerId equals customers.Id
                         join ordprvrnts in _orderProductVariantRepository.Table on ords.Id equals ordprvrnts.OrderId
                         join prdvrnts in _productVariantRepository .Table on ordprvrnts.ProductVariantId equals prdvrnts.Id
                         **join cstevntrle in _customerEventRoleRepository.Table on 
                             new{  customers.Id equals cstevntrle.CustomerId } && 
                             new { cstevntrle.EventId == model.Event}**
                         orderby customers.Email ascending
                         select new CustomerEventRolesModel
                         {

                             Customer = customers.Email,
                             CUstomerId =customers.Id

                         }); 
```

我尝试使用 CustomerId 和 EventId 过滤 customerEventRoleRepository.Table

我怎么能在这个连接查询中做到这一点。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T06:54:03.313

你的匿名类型定义中有布尔比较......

将您的 on 子句更改为以下内容：

```
join cstevntrle in _customerEventRoleRepository.Table on 
    new { CustomerId = customers.Id, EventId = model.Event.EventId } equals 
    new { CustomerId = cstevntrle.CustomerId, EventId = cstevntrle.EventId } 
```

我没有在任何地方看到“模型”定义，所以我不确定这是否会起作用，但它应该足以演示基于多个字段的连接是如何工作的——每个匿名类都包含来自一个“侧面”的字段加入。

# vba - VBA 最爱代码管理

> ID：15652929
> 
> 赞同：1
> 
> 时间：2013-03-27T06:17:14.790
> 
> 标签：vba, excel, toolbox

![在此处输入图像描述](../Images/a0cf5d6b516d6a40da8b1a0d8c9b550d.png)

就像 Visual Studio 允许我们将喜欢的代码拖到工具箱中，然后在以后的任何项目中使用它一样。VBA 是否允许这种功能。管理我可以在多个工作簿中使用的 favourtie/reptitive vba 代码的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:45:02.947

在 Excel 中，您可能会使用 Personal.XLSB 文件，该文件可能是您经常引用的所有子例程的一种容器。您可以在模块、类模块中创建和组织它们。一些用户表单也可以放在那里。每次打开 Excel Personal.XLSB 将是第一个打开的工作簿。

如果没有“Personal.XLSB”，如何创建？转到 excel，开始录制宏，但在按 OK 之前，在第二个列表中选择“个人宏工作簿”之类的内容。每次离开 Excel 时不要忘记保存它，以保留代码中的所有更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:31:34.063

VBA 没有类似的功能，没有。

您可以将类和模块导出为独立文件，并将它们导入其他 VBA 项目。一些应用程序，如 Microsoft Word，具有在文档之间共享宏的功能，在 Word 的情况下，通过将这些宏附加到 Normal 模板。但是没有重用小代码片段的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:51:37.227

看看 MZTools ... 有各种风格的 VB 和 VBA 的版本。我不确定它是否适合处理大量代码片段，但对于少量代码片段应该没问题。它是免费的，并且有许多其他非常有用的功能。

# android - 按下按钮获取加速度计值

> ID：15652933
> 
> 赞同：-1
> 
> 时间：2013-03-27T06:17:38.060
> 
> 标签：android, android-sensors

我正在尝试一个示例项目，用于在单击按钮时存储 android 加速度计值，它正在工作并且我得到了值，现在我想存储加速度计读数从按钮单击开始并在按钮释放时结束，我尝试使用**OnTouchListener**但我我无法控制加速度计，任何人之前都尝试过，任何类型的答案都会对我有帮助

```
layout.setOnTouchListener(new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if(event.getAction() == MotionEvent.ACTION_DOWN) {
            sensorMgr = (SensorManager) getSystemService(SENSOR_SERVICE);
            mAccelerometer = sensorMgr.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
            sensorMgr.registerListener((SensorEventListener) getApplicationContext(), mAccelerometer,SensorManager.SENSOR_DELAY_FASTEST);
        } else if (event.getAction() == MotionEvent.ACTION_UP) {
            sensorMgr.unregisterListener(this);
        }
        return true;
    }
}); 
```

这是我用来控制加速度计的代码，但是我的应用程序会强制关闭，在 logcat 中给出错误是

```
03-27 12:36:29.570: I/TextToSpeech.java(28968): initTts() successfully bound to service
03-27 12:36:29.578: D/SensorManager(28968): ====>>>>>Num Sensor: 1
03-27 12:36:29.578: D/SensorManager(28968): ====>>>>>Num Sensor: 2
03-27 12:36:29.578: D/SensorManager(28968): ====>>>>>Num Sensor: 3
03-27 12:36:29.578: D/SensorManager(28968): ====>>>>>Num Sensor: 4
03-27 12:36:29.578: D/SensorManager(28968): ====>>>>>Num Sensor: 5
03-27 12:36:29.578: D/SensorManager(28968): ====>>>>>Num Sensor: 6
03-27 12:36:29.578: D/SensorManager(28968): ====>>>>>Num Sensor: 7
03-27 12:36:29.578: D/SensorManager(28968): ====>>>>>Num Sensor: 0
03-27 12:36:30.570: W/dalvikvm(28968): threadid=1: thread exiting with uncaught exception (group=0x40015578)
03-27 12:36:30.578: E/AndroidRuntime(28968): FATAL EXCEPTION: main
03-27 12:36:30.578: E/AndroidRuntime(28968): java.lang.ClassCastException: android.app.Application
03-27 12:36:30.578: E/AndroidRuntime(28968):    at com.example.androidphonemotion.MainActivity$1.onTouch(MainActivity.java:59)
03-27 12:36:30.578: E/AndroidRuntime(28968):    at android.view.View.dispatchTouchEvent(View.java:3934)
03-27 12:36:30.578: E/AndroidRuntime(28968):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:903)
03-27 12:36:30.578: E/AndroidRuntime(28968):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
03-27 12:36:30.578: E/AndroidRuntime(28968):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
03-27 12:36:30.578: E/AndroidRuntime(28968):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
03-27 12:36:30.578: E/AndroidRuntime(28968):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
03-27 12:36:30.578: E/AndroidRuntime(28968):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1733)
03-27 12:36:30.578: E/AndroidRuntime(28968):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1151)
03-27 12:36:30.578: E/AndroidRuntime(28968):    at android.app.Activity.dispatchTouchEvent(Activity.java:2096)
03-27 12:36:30.578: E/AndroidRuntime(28968):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1717)
03-27 12:36:30.578: E/AndroidRuntime(28968):    at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2215)
03-27 12:36:30.578: E/AndroidRuntime(28968):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1886)
03-27 12:36:30.578: E/AndroidRuntime(28968):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-27 12:36:30.578: E/AndroidRuntime(28968):    at android.os.Looper.loop(Looper.java:130)
03-27 12:36:30.578: E/AndroidRuntime(28968):    at android.app.ActivityThread.main(ActivityThread.java:3689)
03-27 12:36:30.578: E/AndroidRuntime(28968):    at java.lang.reflect.Method.invokeNative(Native Method)
03-27 12:36:30.578: E/AndroidRuntime(28968):    at java.lang.reflect.Method.invoke(Method.java:507)
03-27 12:36:30.578: E/AndroidRuntime(28968):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
03-27 12:36:30.578: E/AndroidRuntime(28968):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
03-27 12:36:30.578: E/AndroidRuntime(28968):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:26:05.793

我会在按钮单击时注册和取消注册传感器侦听器，可以通过为传感器设置 onSensorChangedListener 来存储值。

```
mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
mSensorManager.registerListener(this, mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_NORMAL);

public void onSensorChanged(SensorEvent event) {
    //perform storing values of event
} 
```

或者，您可以在 中注册`onResume()`和取消注册`onPause()`。要开始/停止存储值，您可以在 onTouch （如果您想在按住按钮时记录）或 onClick （从第一个按钮触摸开始并在第二个按钮触摸停止）中设置一个标志。然后，您必须在您的中添加另一个 if 子句，`onSensorChanged(SensorEvent event)`这样它只会在标志为真时存储信息。这样，注册监听器就不会出现问题，但电池消耗可能会更高，因为只要应用程序正在运行，传感器就一直处于活动状态。

# python - 不需要的字母顺序的元组

> ID：15652948
> 
> 赞同：1
> 
> 时间：2013-03-27T06:19:31.457
> 
> 标签：python, python-3.x, tuples

在 Python 3 中，我有一个编码如下的程序。它基本上接受用户的输入，并根据元组列表（EXCHANGE_DATA）检查它并输出信息列表。问题是，数据在输出时已按字母顺序排序，这不是我想要的方式。我如何解决它？

```
from shares import EXCHANGE_DATA
portfolio_str=input("Please list portfolio: ")
portfolio_str= portfolio_str.replace(' ','')
portfolio_str= portfolio_str.upper()
portfolio_list= portfolio_str.split(',')
print()
print('{:<6} {:<20} {:>8}'.format('Code', 'Name', 'Price'))
for code, share_name, share_value in EXCHANGE_DATA:
  if code in portfolio_list:
        print('{:<6} {:<20} {:>8.2f}'.format(code, share_name, share_value)) 
```

示例输入： `GPG,HNZ,DIL,FRE`

输出应如下所示：

```
Please list portfolio: GPG,HNZ,DIL,FRE

Code  Name                   Price
GPG   Guinnesspeat            2.32
HNZ   Heartland Nz            3.85
DIL   Diligent                5.30
FRE   Freightway              6.71 
```

但我得到：

```
Please list portfolio: GPG,HNZ,DIL,FRE

Code   Name                    Price
DIL    Diligent                 5.30
FRE    Freightway               6.71
GPG    Guinnesspeat             2.32
HNZ    Heartland Nz             3.85 
```

**更新代码**

```
from shares import EXCHANGE_DATA
portfolio_str=input("Please list portfolio: ")
portfolio_str= portfolio_str.replace(' ','')
portfolio_str= portfolio_str.upper()
portfolio_list= portfolio_str.split(',')
print()
print('{:<6} {:<20} {:>8}'.format('Code', 'Name', 'Price'))
EXCHANGE_DATA = {code:(share_name,share_value) for code, share_name, share_value in EXCHANGE_DATA}
for code in portfolio_list:
     share_name, share_value = EXCHANGE_DATA[code]
     print('{:<6} {:<20} {:>8.2f}'.format(code, share_name, share_value)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:23:18.090

一种方法是`EXCHANGE_DATA`变成字典，`code`用作键。然后你就可以改变你的循环，如：

```
for code in portfolio_list:
    share_name, share_value = EXCHANGE_DATA[code]
    print('{:<6} {:<20} {:>8.2f}'.format(code, share_name, share_value)) 
```

# ios - 有什么办法可以防止 ios 杀死我的应用程序？

> ID：15652960
> 
> 赞同：3
> 
> 时间：2013-03-27T06:20:29.977
> 
> 标签：ios, objective-c, xcode, jailbreak

我的应用程序已越狱，我不必将其提交到应用程序商店。问题是 ios 在 2 或 3 小时后杀死了我的应用程序。我使用了来自 xcode 的静态分析器并删除了所有内存泄漏。我什至安装了内存监视器。当 ios 杀死我的应用程序时，至少有 300 mb 的可用内存。有没有办法防止 ios 杀死我的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:25:35.833

尝试使用 . 循环播放无声音频文件`AVAudioPlayer`。如果您的应用正在播放，iOS 不会关闭它。

请参阅：http: [//developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW24](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW24)

SO：[如何在 iOS 设备被锁定或在另一个应用程序上处理背景音频播放？](https://stackoverflow.com/questions/10429204/how-to-handle-background-audio-playing-while-ios-device-is-locked-or-on-another)

# jqxgrid - 在 jqxgrid 的页脚中显示列的总和

> ID：15652966
> 
> 赞同：2
> 
> 时间：2013-03-27T06:21:07.373
> 
> 标签：jqxgrid

我需要在 Jqxgrid 的最底部显示一个页脚行，其中网格中列的总和应该在列的值进入网格时动态计算。

我正在使用以下链接中存在的键盘导航 Jqxgrid ' [http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxgrid/index.htm#demos/jqxgrid/rowdetails.htm](http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxgrid/index.htm#demos/jqxgrid/rowdetails.htm) '。我检查了相同的 API 参考来尝试这一点，但是得到了任何富有成效的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:01:19.993

这是网格聚合的示例：[http ://www.jqwidgets.com/jquery-widgets-demo/demos/jqxgrid/aggregates.htm?classic](http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxgrid/aggregates.htm?classic)

# ruby - 如何在 Ruby 中覆盖常规的二元运算符，例如 +、-、*、/？

> ID：15652971
> 
> 赞同：3
> 
> 时间：2013-03-27T06:21:53.600
> 
> 标签：ruby

如何覆盖类的常见运算符，例如`+`, `-`, `*`, `/`, `<`, `==`,`>`等？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T06:34:36.450

根据它们被覆盖的方式，它们不一定是二进制的。

```
class Foo
  def +; :plus end
  def -; :minus end
  def *; :asterisk end
  def /; :slash end
  def <; :lt end
  def ==; :eq end
  def >; :gt end
end

Foo.new.+ # => :plus
Foo.new.- # => :minus
Foo.new.* # => :asterisk
Foo.new./ # => :slash
Foo.new.< # => :lt
Foo.new.== # => :eq
Foo.new.> # => :gt 
```

# java - Java 的正则表达式混淆

> ID：15652973
> 
> 赞同：2
> 
> 时间：2013-03-27T06:22:09.133
> 
> 标签：java, regex

基本上我想将文件名与 .json 扩展名匹配，但不是以 .json 开头的文件。并且不包括 list.json。

这就是我想出来的（没有java字符串转义）

```
(?i)^([^\.][^list].+|list.+)\.json$ 
```

我曾使用在线正则表达式测试器 Regexplanet 来尝试我的正则表达式 [http://fiddle.re/x9g86](http://fiddle.re/x9g86)

正则表达式测试器一切正常，但是当我在 Java 中尝试它时。包含字母 l,i,s,t 的所有内容都将被排除在外……这对我来说非常困惑。

谁能给我一些线索？

提前谢谢了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T06:27:07.280

> 我想将文件名与`.json`扩展名匹配，但不`.`匹配以`list.json`.

我不确定您是否需要正则表达式。我发现以下内容更容易：

```
boolean match = s.endsWith(".json") && !s.startsWith(".") && !s.equals("list.json"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T07:09:17.233

消极的前瞻将做到这一点。

```
(?i)(?!\.|list\.json$).*\.json 
```

`(?!\.|list\.json$)`是一个否定的先行检查，检查后面的字符不是`list.json`跟在字符串的末尾，还是跟在`.`.

代码：

```
String regex = "(?i)(?!\\.|list\\.json$).*\\.json";
System.out.println("list.json".matches(regex)); // false
System.out.println(".json".matches(regex));     // false
System.out.println("a.Json".matches(regex));    // true
System.out.println("abc.json".matches(regex));  // true 
```

但 NPE 更易读的解决方案可能是首选。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T06:28:22.327

您正在使用字符排除类 ，`[^list]`它忽略字符顺序，而不是 exclude ，排除, ,或`list`的任何情况。`l``i``s``t`

相反，您想使用负前瞻：

```
(?i)(?!^list\.json$)[^\.].*\.json 
```

# java - java.sql.SQLException: [Microsoft][ODBC Driver Manager] Data source name not found and no default driver

> ID：15652974
> 
> 赞同：1
> 
> 时间：2013-03-27T06:22:23.163
> 
> 标签：java, sql

我有java源代码，当我运行时，它会写

java.sql.SQLException: [Microsoft][ODBC Driver Manager] Data source name not found and no default driver 我认为它是需要 ODBC 驱动程序，但我看不到它。Java源代码：

```
 import java.awt.Image;
import java.io.File;
import java.io.FileInputStream;
import java.io.InputStream;

import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import java.sql.*;

import java.awt.*;
import java.io.*;
import javax.swing.*;

import java.awt.image.*;
import java.awt.event.*;

/**
* This code was edited or generated using CloudGarden's Jigloo
* SWT/Swing GUI Builder, which is free for non-commercial
* use. If Jigloo is being used commercially (ie, by a corporation,
* company or business for any purpose whatever) then you
* should purchase a license for each developer using Jigloo.
* Please visit www.cloudgarden.com for details.
* Use of Jigloo implies acceptance of these licensing terms.
* A COMMERCIAL LICENSE HAS NOT BEEN PURCHASED FOR
* THIS MACHINE, SO JIGLOO OR THIS CODE CANNOT BE USED
* LEGALLY FOR ANY CORPORATE OR COMMERCIAL PURPOSE.
*/
public class a extends javax.swing.JDialog {
    private JLabel jLabel1;
    private JLabel jLabel2;
    private JLabel jLabel3;
    private JLabel jLabel4;

    private JTextField txtPiradi;
    private JTextField txtSaxeli;
    private JTextField txtGvari;
    Image img;
    File file = null;
    String path = "";
    JTextField text = new JTextField(20);
    JButton browse, save;
     Connection conn = null;
     ResultSet rs = null;
     Statement stmt = null;

    /**
    * Auto-generated main method to display this JDialog
    */
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                JFrame frame = new JFrame();
                wevrtaDamateba inst = new wevrtaDamateba(frame);
                inst.setVisible(true);
            }
        });
    }

    public wevrtaDamateba(JFrame frame) {
        super(frame);
        initGUI();
    }

    private void initGUI() {
        try {
            {
                getContentPane().setLayout(null);
                this.setTitle("\u10d0\u10ee\u10d0\u10da\u10d8 \u10ec\u10d4\u10d5\u10e0\u10d8\u10e1 \u10d3\u10d0\u10db\u10d0\u10e2\u10d4\u10d1\u10d0");
                {
                    jLabel1 = new JLabel();
                    getContentPane().add(jLabel1);
                    jLabel1.setText("\u10e1\u10d0\u10ee\u10d4\u10da\u10d8:");
                    jLabel1.setFont(new java.awt.Font("Sylfaen",0,12));
                    jLabel1.setBounds(78, 21, 60, 40);
                }
                {
                    jLabel2 = new JLabel();
                    getContentPane().add(jLabel2);
                    jLabel2.setText("\u10d2\u10d5\u10d0\u10e0\u10d8:");
                    jLabel2.setFont(new java.awt.Font("Sylfaen",0,12));
                    jLabel2.setBounds(78, 67, 60, 40);
                }
                {
                    jLabel3 = new JLabel();
                    getContentPane().add(jLabel3);
                    jLabel3.setText("\u10de\u10d8\u10e0\u10d0\u10d3\u10d8 N:");
                    jLabel3.setFont(new java.awt.Font("Sylfaen",0,12));
                    jLabel3.setBounds(78, 112, 60, 40);
                }
                {
                    jLabel4 = new JLabel();
                    getContentPane().add(jLabel4);
                    jLabel4.setText("\u10e1\u10e3\u10e0\u10d0\u10d7\u10d8:");
                    jLabel4.setFont(new java.awt.Font("Sylfaen",0,12));
                    jLabel4.setBounds(78, 152, 60, 40);
                }
                {
                    txtSaxeli = new JTextField();
                    getContentPane().add(txtSaxeli);
                    txtSaxeli.setBounds(161, 28, 180, 23);
                }
                {
                    txtGvari = new JTextField();
                    getContentPane().add(txtGvari);
                    txtGvari.setBounds(161, 74, 180, 23);
                }
                {
                    txtPiradi = new JTextField();
                    getContentPane().add(txtPiradi);
                    txtPiradi.setBounds(161, 119, 180, 23);
                }
                {
                    browse = new JButton();
                    getContentPane().add(browse);
                    browse.setText("\u10e1\u10e3\u10e0\u10d0\u10d7\u10d8\u10e1 \u10d0\u10e0\u10e9\u10d4\u10d5\u10d0");
                    browse.setBounds(161, 159, 180, 23);
                    browse.setFont(new java.awt.Font("Sylfaen",0,12));
                    browse.addActionListener(new ActionListener() {
                        public void actionPerformed(ActionEvent e) {
                            JFileChooser chooser = new JFileChooser();
                            chooser.addChoosableFileFilter(new ImageFileFilter());
                            int returnVal = chooser.showOpenDialog(null);

                            if (returnVal == JFileChooser.APPROVE_OPTION) {
                                file = chooser.getSelectedFile();
                                path = file.getPath();
                                ImageIcon icon = new ImageIcon(path);
                                // label.setIcon(icon);
                                text.setText(path);
                                repaint();
                            }
                        }
                    });
                }
                {
                    save = new JButton();
                    getContentPane().add(save);
                    save.setText("\u10d3\u10d0\u10db\u10d0\u10e2\u10d4\u10d1\u10d0");
                    save.setBounds(173, 224, 123, 23);
                    save.setFont(new java.awt.Font("Sylfaen",0,12));
                    save.addActionListener(new ActionListener() {
                        public void actionPerformed(ActionEvent e) {
                            try {
                                File f = new File(path);
                                String saxeli = txtSaxeli.getText();
                                String gvari = txtGvari.getText();
                                int piradi = Integer.parseInt(txtPiradi.getText());
                                Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
                                conn = DriverManager.getConnection("jdbc:odbc:Base","","");
                                PreparedStatement psmnt = conn
                                        .prepareStatement("insert into user('saxeli','gvari','piradi','img') values (?,?,?,?)");
                                FileInputStream fis = new FileInputStream(f);
                                psmnt.setString(1, saxeli);
                                psmnt.setString(2, gvari);
                                psmnt.setInt(3, piradi);
                                psmnt.setBinaryStream(4, (InputStream) fis,
                                        (int) (f.length()));
                                int s = psmnt.executeUpdate();
                                JOptionPane.showMessageDialog(null,
                                        "Inserted successfully!");
                            } catch (Exception ex) {
                                System.out.print(ex);
                            }

                        }

                    });
                }
            }
            this.setSize(665, 346);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    protected void clear() {
        // TODO Auto-generated method stub

    }

    class ImageFileFilter extends javax.swing.filechooser.FileFilter {
        public boolean accept(File file) {
            if (file.isDirectory())
                return false;
            String name = file.getName().toLowerCase();
            return (name.endsWith(".jpg") || name.endsWith(".png") || name
                    .endsWith(".gif"));
        }

        public String getDescription() {
            return "Images (*.gif,*.bmp, *.jpg, *.png )";
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:25:54.117

`Base`检查您的 ODBC 数据源面板中是否有ODBC 数据源。

# java - 使用 Eclipse 调试 GWT 客户端

> ID：15652976
> 
> 赞同：1
> 
> 时间：2013-03-27T06:22:33.613
> 
> 标签：java, eclipse, gwt, eclipse-indigo

我有一个 GWT 应用程序，我需要调试客户端 Java 类 (GWT) 和服务器业务类。我可以成功调试服务请求过程中调试点命中的服务器端类。

但问题是在客户端 java 类中没有调试点被命中。原因是什么？我是否需要进一步的步骤或工具才能调试 GWT java 类？

我正在使用日食靛蓝和玻璃鱼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:31:03.167

如果要在开发模式下调试代码，[则必须将](https://stackoverflow.com/questions/7038322/why-gwt-codesvr-127-0-0-19997-is-appended-to-url)查询*参数添加到 url。*

**启动您的主机页面可能有两种方式。**

**如果您直接从 IDE`host page``appName.html`** (eclipse)启动**( )：**

浏览器中的网址应该是

```
http://localhost:8080/index.html?gwt.codesvr=127.0.0.1:9997

------^---------|appname.html?--------^--------- 
```

第一部分是`local host`

第二部分是您的主机页面

第三部分是调试查询参数。

**如果您从 servlet 分派页面：**

```
request.getRequestDispatcher("/appName.html?gwt.codesvr=127.0.0.1:9997")
                                                    .forward(request, response); 
```

并检查您的调试配置参数选项卡。

```
-remoteUI "${gwt_remote_ui_server_port}:${unique_id}" 
-startupUrl projectname.html -logLevel INFO 
-codeServerPort 9997 -port 8888 -war
E:\workspace\ProjectName\war com.test.Projectname 
```

[有关完整设置](http://ui-programming.blogspot.in/2010/02/gwt-configure-devmode-port-and.html)，请参阅链接。

# ios - 有没有像 google Place Search API 这样的 Apple API？

> ID：15652978
> 
> 赞同：11
> 
> 时间：2013-03-27T06:22:41.587
> 
> 标签：ios, iphone, google-places-api, apple-maps

在我的 iPhone 应用程序中，我使用的是 MKMapKit。目前我正在根据从 Google Place API 获得的结果在地图上绘制地点，但根据 Google 的文档，我必须仅在 google Maps 中使用此值。不幸的是，从 iOS 6 开始，MKMapKit 将转到 Apple Map 本身。

有没有像 google Place Search API 这样的 Apple API？

现在我正在使用这样的 URL：

```
https://maps.googleapis.com/maps/api/place/search/json?location=10.0036830,74.318723&rankby=distance&types=restaurant&sensor=false&key="my API Key" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T10:30:32.850

我相信这就是你要找的？ [iOS 开发者库：MKLocalSearchRequest 类参考](https://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKLocalSearchRequest_class/Reference/Reference.html#//apple_ref/doc/uid/TP40012892 "MKLocalSearchRequest 类参考")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-06T12:58:11.480

**您可以通过 MKLocalSearchRequest 和 MapKit 来实现这一点。**

它像谷歌地方 API 一样显示自动完成的地方，并且可以将注释点放在 Apple 的地图上（**不是在谷歌地图上，我希望只有你在寻找。**）

您可以从**[此处](https://github.com/ThornTechPublic/MapKitTutorial)****下载示例项目**，使用 MKLocalSearchRequest 获取 Places 并在自动完成的 tableview 控制器中显示。

[![在此处输入图像描述](../Images/05414e33cbd0108e1aafe1bd1f9834f7.png)](https://i.stack.imgur.com/TPzpl.png)

[![在此处输入图像描述](../Images/c10f68b3b05571c18a2e38fbea6ddb23.png)](https://i.stack.imgur.com/lRQ0n.png)

*但是，它显示的结果不如您从 Google Places API 获得的准确结果。问题在于地理编码数据库显然并不完整，而且苹果不是领导该领域的公司——谷歌才是。*

# javascript - Node.js/Express：防止直接从 URL 加载 AJAX HTML 片段

> ID：15652980
> 
> 赞同：1
> 
> 时间：2013-03-27T06:22:47.083
> 
> 标签：javascript, jquery, ajax, node.js, express

我正在用 Node.js、Express 和 MongoDB 构建一个博客。

在主页上，我有一个按钮来加载更多帖子。这工作正常，我用以下代码完成它：

**jQuery**

```
$("#load-more-posts").click(function() {
    $.ajax({
        url: '/load/posts/',
        type: 'get',
        dataType: 'html',
        success: function(data) {
            $("#primary").append(data);
        },
        data: {"passLastDate": lastDate}
    });

    return false;
}); 
```

**这是app.js**中的路线

 **```
app.get("/load/posts", routes.loadPosts); 
```

这是视图：

```
loadPosts: function(req, res) {
  var lastDate;
  lastDate = req.query.passLastDate;
  return Post.find({
    "published": true,
    "publish_date": {
      $lt: lastDate
    }
  }).sort('-publish_date').limit(1).execFind(function(err, posts) {
    if (posts === []) {
      console.log("thats it");
      return res.render("thats-it", {
        layout: false
      });
    } else {
      lastDate = posts.slice(-1)[0].publish_date;
      return res.render("more-posts", {
        layout: false,
        posts: posts,
        lastDate: lastDate
      });
    }
  });
} 
```

就像我说的，这一切都很好。但是，如果我从控制台复制 GET url 并将其直接粘贴到浏览器中，我会得到一个返回的 HTML 片段。我想这是应该的，但我不想退回它。我不认为这是一个安全隐患，只是看起来有点不雅。

**有没有办法阻止对该视图的直接请求？**

**奖金**

这里还有一些奇怪的东西，这使它成为一个由两部分组成的问题。当我在语句中检查一个空的 post 数组时`if`，Node 会忽略它。控制台输出显示`posts = []`但它直接跳过它，然后抛出一个错误`lastDate = posts.slice(-1)[0].publish_date;`我知道 JS 对空值（null、未定义、空字符串等）的行为很有趣，但我尝试了不同的结果相同。它似乎完全无视它。我在吃疯狂的药吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T07:32:43.220

> 有没有办法阻止对该视图的直接请求？

您可以通过检查`x-requested-with`标头（jQuery 发送的）来检查请求是否是使用 AJAX 调用执行的：

```
loadPosts: function(req, res) {
  if (req.headers['x-requested-with'] === 'XMLHttpRequest') {
    // AJAX request
  }
  else {
    // not an AJAX request
  }
} 
```

这不应该用作安全措施（因为它不是），而只是作为检查请求是否使用 AJAX 发出的一种方式。

至于您的其他问题，`[] === []`实际上是错误的（原样`[] == []`），因此这不是查看数组是否为空的好方法。我建议你使用：

```
if (!posts || posts.length === 0) {
  // empty
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T07:28:42.203

您可以使用会话（在主页中初始化）来保护您的片段。
在到片段的路由之前添加一个中间件，中间件检查会话令牌并在未找到会话时重定向。
它几乎与具有受登录保护的数据的系统相同，并且您的主页会自动为每个用户登录。

我可以为您获取一些示例，如果您需要，请发表评论。

[奖金]

您是否尝试过~~`posts == []`或~~ `posts.length === 0`代替`posts === []`？**

# opengl - 如何将 GPU 全局内存中的像素数组直接显示到屏幕上？

> ID：15652981
> 
> 赞同：5
> 
> 时间：2013-03-27T06:22:49.570
> 
> 标签：opengl, cuda, gpu

我在GPU上做一个路径跟踪器，我在GPU全局内存上得到了一些像素数据（这是一个float3数组）的跟踪结果，我在屏幕上显示数组的方法是将数组复制到CPU内存和调用 OpenGL `glTexImage2D`：

```
glTexImage2D (GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGB, GL_UNSIGNED_BYTE, pixelArray); 
```

然后显示纹理。`pixelArray`是要显示的像素数据数组。由于 GPU 是管理整个渲染过程的设备，有没有办法`pixelArray`在不将数据从 GPU 复制到 CPU 的情况下在屏幕上显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:53:52.130

使用 CUDA OpenGL 图形互操作将 OpenGL 纹理映射为 CUDA 全局内存。将数据直接写入纹理或使用 cudaMemcpy2D。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T06:56:51.790

[这是](http://pastebin.com/SYwhB4i4)我曾经做过的一个函数，用于渲染数据驻留在 GPU 全局内存中的图像。您将需要[`freeglut`](http://freeglut.sourceforge.net/)和 以及[`glew`](http://glew.sourceforge.net/)CUDA 来运行它。目前它仅适用于 Windows。

我仍然使用这个函数来渲染 GPU 图像。只需打电话`ShowRawImage`，你就完成了。

它的唯一开销是从全局内存到 OpenGL 设备缓冲区的内存副本。但它更好，因为它是一个设备到设备的复制。

# asp.net - 如何在 DropDownList ASP.Net 中换行文本

> ID：15652982
> 
> 赞同：0
> 
> 时间：2013-03-27T06:22:59.223
> 
> 标签：asp.net, drop-down-menu, word-wrap

我似乎无法在互联网上找到任何解决方案，将文本包装在 ASP.net 的下拉列表中。我不想在服务器端做，而是用 CSS 或 HTML 做。

# java - 如何将文件存储在客户端计算机中？

> ID：15652986
> 
> 赞同：0
> 
> 时间：2013-03-27T06:23:16.353
> 
> 标签：java, file, store

```
File dir = new File(System.getProperty("user.home")+"\\Desktop\\" + svc);
        dir.mkdir();
        File f;
        f = new File(System.getProperty("user.home")+"\\Desktop\\" + svc
                + "\\" + logFile + "_" + System.currentTimeMillis()
                + ".txt"); 
```

我正在使用此代码将文件存储在用户（客户端）机器中。但它将文件存储在服务器机器中。有人可以帮我吗？我已经在 unix 服务器上部署了我的 war 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:30:48.637

似乎此代码是 Web 应用程序服务器端的一部分。在这种情况下`System.getProperty("user.home")`将返回服务器的主目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:46:36.913

从服务器上运行的软件将文件保存在客户端计算机上并不是那么简单。

服务器不能直接访问任何客户端的文件系统——如果是这样的话，那将是非常不安全的。

最简单的方法是让服务器返回一个带有链接的网页，用户可以单击该链接下载文件。

您还可以做一些更复杂的事情，例如编写一个小程序来下载文件（使用某些文件传输协议）并将其保存在本地文件系统中。applet 需要具有适当的权限（默认情况下，applet 不能访问本地文件系统）。

# jquery - 如何在使用 xml-jquery 时动态出现/更改的文本字符串中添加下划线

> ID：15652989
> 
> 赞同：0
> 
> 时间：2013-03-27T06:23:34.227
> 
> 标签：jquery, jquery-ui, jquery-xml

我希望使用 Jquery 出现在页面上的 XML 属性值应该在特定字符处加下划线。

有人可以帮我吗？

先感谢您。

```
$(menuGroup).append('<a href="#" id="'+menuGroupName+'" onclick="SearchByDE(this.id)" title="'+menuTooltipNote+'" accesskey="'+menuAccessKey+'" class="hasSubMenu left_nav_menu">'+'<p style="padding-top:6px;">'+menuGroupName+'</p>'+'</a>'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:35:05.817

CSS：

```
.accesskey { text-decoration: underline; } 
```

JS：

```
var accessIndex = menuGroupName.indexOf(menuAccessKey);
menuID = menuGroupName;
if (accessIndex !== null) {
    menuGroupName = menuGroupName.substr(0, accessIndex-1) + '<span class="accesskey">' +
                    menuAccessKey + '</span>' + menuGroupName.substr(accessIndex+1);
}
$(menuGroup).append('<a href="#" id="'+menuID+'" onclick="SearchByDE(this.id)" title="'+menuTooltipNote+'" accesskey="'+menuAccessKey+'" class="hasSubMenu left_nav_menu">'+'<p style="padding-top:6px;">'+menuGroupName+'</p>'+'</a>'); 
```

我仍然没有看到任何对 XML 的依赖。也许菜单数据来自 XML，但我不明白这对格式有什么影响。

# android-dialog - Android Dialog 使用处理程序关闭

> ID：15652990
> 
> 赞同：1
> 
> 时间：2013-03-27T06:23:53.420
> 
> 标签：android-dialog

遇到一个奇怪的问题，在阅读android GlobalAction源码的时候，发现它会启动一个对话框，但是它添加了一个判断，判断这个对话框是否已经显示，如果之前显示过，它将被关闭并然后显示它。奇怪的是它关闭对话框，而不是使用处理程序发送消息来再次创建和显示对话框，我不明白为什么它需要发送处理程序消息，我认为它只是调用对话框关闭函数.然后调用show函数，没问题。评论说：“显示延迟，以便上一个对话框的关闭完成”，但我也无法理解含义，请有人帮我解释一下，非常感谢。

```
if (mDialog != null) {
            mDialog.dismiss();
            mDialog = null;
            // Show delayed, so that the dismiss of the previous dialog completes
            mHandler.sendEmptyMessage(MESSAGE_SHOW);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:27:02.063

许多 Android UI 功能本身是使用消息实现的，因此不会立即完成。当您调用 时`Dialog.dismiss()`，Android 会排队执行实际解除操作的消息。此代码的作者希望确保对话框在再次显示之前实际上已关闭，因此她发布了自己的消息，直到 Android 发布的消息之后才会运行。

# iphone - UIView 动画中的奇怪行为

> ID：15652992
> 
> 赞同：0
> 
> 时间：2013-03-27T06:23:57.963
> 
> 标签：iphone, ios, ipad

我在 UIView 动画中遇到了一个奇怪的行为。我正在开发一个使用一些 UIView 动画的 iPad 应用程序。

所有动画的持续时间设置为 0.5。最初在启动应用程序时，所有动画都运行良好。但是在一些连续使用后没有动画发生，所有 UIView 的变化都很快发生，就像动画中没有设置持续时间一样。

我不确定为什么会这样。有没有其他人遇到过这种问题？

以下是我正在使用的动画之一。像这样，我使用了很多动画，但一段时间后没有任何动画发生，但动画块内的所有代码都工作正常

```
[UIView animateWithDuration:0.5 animations:^{ 
    [tempLabel setFont:titleFont.font]; 
    [tempLabel setTransform: CGAffineTransformMakeRotation((-90 * M_PI / 180))]; 
    tempLabel.frame = CGRectMake(2,0,23,30);   
}]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:38:01.700

从[`UIView`类参考](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instp/UIView/frame)，框架属性：

> 对此属性的更改可以设置动画。但是，如果 transform 属性包含非恒等变换，则 frame 属性的值是未定义的，不应修改。在这种情况下，您可以使用 center 属性重新定位视图并使用 bounds 属性调整大小。

当您还设置了变换时，不要为帧设置动画。改为使用边界和中心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T07:54:31.080

您遇到的问题似乎是您每次都在转换控件，当您第一次应用转换时，控件没有转换，但接下来您有一个转换，在这种情况下，下一个转换可能无法按您的意愿工作..你有几个选项来解决这个问题，我没有尝试过它可能工作的代码

```
tempLabel.transform = CGAffineTransformIdentity; 
```

在应用任何转换之前放置上面的代码，这将重置应用的任何转换，并且您的新转换将被重新应用，或者，您可以这样做

```
tempLabel.transform = CGAffineTransformConcat(tempLabel.transform, YOUR TRANSFORM); 
```

以上将附加到您的最后一次转换..

希望能帮助到你。

谢谢。

# matlab - 'struct' 类型的输入参数的未定义函数或方法'mtimes'

> ID：15652993
> 
> 赞同：3
> 
> 时间：2013-03-27T06:24:09.107
> 
> 标签：matlab

我有一个大小为 550x128 的数组。我将它保存在一个 .mat 文件中并再次加载它以在另一个函数中使用它。

```
save('c:\\coeffs2.mat', 'descr2');
des2=load('c:\\coeffs2.mat'); 
```

我进一步使用这个值如下：

```
des2t = des2';                          
for i = 1 : size(des1,1)
dotprods = des1(i,:) * des2t; 
```

其中 des1 是另一个数组，我通过普通函数调用而不是使用保存和加载来传递它。使用它，对于“struct”类型的输入参数，我将错误作为未定义的函数或方法“mtimes”。有人可以帮我解决错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T07:00:40.307

当您使用`des2=load('c:\\coeffs2.mat');`then 时，它会使用`des2`其中的变量创建一个结构`'c:\\coeffs2.mat'`。这是一个例子：

```
>> a=rand(3);
>> save b a
>> c=load('b')

c = 

    a: [3x3 double]

>> c.a

ans =

    0.8147    0.9134    0.2785
    0.9058    0.6324    0.5469
    0.1270    0.0975    0.9575 
```

如果您不想使用该结构，则只需使用`load('c:\\coeffs2.mat');`. 然后会有一个`descr2`你可以使用的变量。这是一个使用我刚刚制作的文件的示例：

```
>> clear all
>> load('b')
>> whos
  Name      Size            Bytes  Class     Attributes

  a         3x3                72  double              

>> a

a =

    0.8147    0.9134    0.2785
    0.9058    0.6324    0.5469
    0.1270    0.0975    0.9575 
```

# java - java.net.ProtocolException：读取输入后无法写入输出

> ID：15652994
> 
> 赞同：1
> 
> 时间：2013-03-27T06:24:14.747
> 
> 标签：java, jakarta-ee, applet, struts

我正在尝试使用对象输出流将对象从小程序发送到 struts 动作类，但它给了我一个例外`java.net.ProtocolException`：读取输入后无法写入输出。

我创建了一个新的 URLConnection 实例来提供特定的 url，并尝试在 url 中写入对象以从 applet 发送 struts 动作类

## 我在小程序的保存按钮单击时调用此方法

公共保存设计（）{

```
 try
    {

        HttpURLConnection  urlConnection = getServletConnection(CallServletConnection.SAVE_DESIGN, null);
        // Pragma = no-cache; should be null

        if(urlConnection != null && urlConnection.getHeaderFields().get("Pragma") != null)
            return false;

OutputStream outstream = urlConnection.getOutputStream();//Exception occur here

        ObjectOutputStream objectoutstream = new ObjectOutputStream(outstream);

        objectoutstream.writeObject("abc");
        objectoutstream.flush();
        objectoutstream.close(); 
        System.out.println("vctObjectDetails is write ");

    }
     catch (MalformedURLException exception) {
        exception.printStackTrace();
    } 
     catch(ConnectException exception) {
            exception.printStackTrace();
     } 
     catch (IOException exception) {
        exception.printStackTrace();
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }

} 
```

但它不起作用。如果有人知道如何处理此异常，请给我一些提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:39:36.387

这一切都与 HTTP 请求的生命周期（这是 HttpURLConnection 抽象的内容）有关——一旦请求被发送，你就不能进一步修改它——如果你有更多数据要发送，你只需再做一个。下面发生的是，一旦您调用`getHeaderFields()`（响应标头字段），“HttpURLConnection”就会发送请求并使响应可用。

我不知道“getServletConnection()”中有什么，但您可以尝试使用[“doOutput()”](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLConnection.html#doOutput)而不是从响应中读取，直到您完成对请求的写入。