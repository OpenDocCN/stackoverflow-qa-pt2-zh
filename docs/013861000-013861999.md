# StackOverflow 问答 13861000-13861999

# php - Dreamweaver CS6 - 未打开 Header.php

> ID：13861001
> 
> 赞同：2
> 
> 时间：2012-12-13T13:37:12.363
> 
> 标签：php, dreamweaver

我在 Dreamweaver CS6 中遇到了一个奇怪而随机的问题，希望你们能够帮助我解决这个问题。

简而言之，我正在运行 WAMP 并安装了 Wordpress（最新）的测试版本。我也安装了一个我正在自定义的主题。我的问题是我无法让 Dreamweaver 打开 Header.php 文件，当我单击打开它时，整个事情都崩溃了。

在整个安装过程中打开任何其他 php 文件都没有问题。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:29:40.423

看起来像一个 Dreamweaver 错误。我为它提交了一个错误报告，但仍然没有看到修复。最新的 Dreamweaver 更新使程序不会完全崩溃，但仍会冻结至少 20 秒。

我已经在两个带有“inc.header.php”文件的单独项目中发生了这种情况。

编辑：看起来它可能与在标题中包含谷歌网络字体有关。我取出了指向[http://fonts.googleapis.com](http://fonts.googleapis.com)的 3 个链接，该文件现在正在打开。我正在为此专门添加另一个错误..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:21:59.123

试图重新保存但没有运气。我现在只是在记事本中编辑并以这种方式保存我的进度。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T16:07:54.877

如果您使用的是 Windows，请使用 Notepad++ 打开它。

现在我在 Mac 上，我完全想念它。

# c# - 转义转义字符不起作用 - SQL LIKE 运算符

> ID：13861004
> 
> 赞同：4
> 
> 时间：2012-12-13T13:37:23.283
> 
> 标签：c#, sql, sql-server, linq, ado.net

我用过`\`as运算`escape character`符`LIKE`。我正在逃避以下四个字符

1 `%`2 `[` 3 `]`4`_`

当我将转义字符作为输入传递时，查询不会返回值。我怎样才能让它工作？

**数据插入**

```
DECLARE @Text VARCHAR(MAX)
SET @Text = 'Error \\\ \\  C:\toolbox\line 180'

INSERT INTO Account (AccountNumber,AccountType,Duration,ModifiedTime) 
VALUES (198,@Text,1,GETDATE()) 
```

**代码**

```
 static void Main(string[] args)
    {

        string searchValue1 = @"Error \\\ \\  C:\toolbox\line 180";
        string searchValue2 = @"55555";

        string result1 = DisplayTest(searchValue1);
        string result2 =  DisplayTest(searchValue2);

        Console.WriteLine("result1:: " + result1);
        Console.WriteLine("result2:: " + result2);
        Console.ReadLine();

    }}

     private static string DisplayTest(string searchValue)
    {
        searchValue = CustomFormat(searchValue);

        string test = String.Empty;
        string connectionString = "Data Source=.;Initial Catalog=LibraryReservationSystem;Integrated Security=True;Connect Timeout=30";

        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            connection.Open();
            string commandText = @"SELECT AccountType,* 
                              FROM Account 
                              WHERE AccountType LIKE @input ESCAPE '\'";
            using (SqlCommand command = new SqlCommand(commandText, connection))
            {
                command.CommandType = System.Data.CommandType.Text;
                command.Parameters.AddWithValue("@input", "%" + searchValue + "%");

                using (SqlDataReader reader = command.ExecuteReader())
                {
                    if (reader.HasRows)
                    {
                        while (reader.Read())
                        {

                            test = reader.GetString(0);
                        }
                    }
                }
            }
        }

        return test;
    }

    private static string CustomFormat(string input)
    {
        input = input.Replace(@"%", @"\%");
        input = input.Replace(@"[", @"\[");
        input = input.Replace(@"]", @"\]");
        input = input.Replace(@"_", @"\_");
        //input = input.Replace(@"\", @"\\");
        return input;
    } 
```

参考：

1.  [如何在 LIKE 子句中转义方括号？](https://stackoverflow.com/questions/439495/how-can-i-escape-square-brackets-in-a-like-clause)
2.  [如何转义字符串以与 SQL Server 中的 LIKE 运算符一起使用？](https://stackoverflow.com/questions/1428197/how-to-escape-a-string-for-use-with-the-like-operator-in-sql-server)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-13T14:07:50.753

像这样修改你的`CustomFormat`方法：

```
private static string CustomFormat(string input)
{
    input = input.Replace(@"\", @"\\"); 
    input = input.Replace(@"%", @"\%");
    input = input.Replace(@"[", @"\[");
    input = input.Replace(@"]", @"\]");
    input = input.Replace(@"_", @"\_");
    return input;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T11:27:19.613

LIKE 处理的 C# 代码

```
 public static string WildcardFormatSpecialCharacter(string source)
    {
        string formattedResult = string.Empty;
        if (!String.IsNullOrEmpty(source))
        {
            //Escape the escape character
            formattedResult = source.Replace(DataLayerConstants.EscapeCharacter, DataLayerConstants.EscapeCharacterWithEscape);
            //The %
            formattedResult = formattedResult.Replace(DataLayerConstants.Percentage, DataLayerConstants.PercentageWithEscape);
            //The [
            formattedResult = formattedResult.Replace(DataLayerConstants.OpenSqaureBracket, DataLayerConstants.OpenSqaureBracketWithEscape);
            //The ]
            formattedResult = formattedResult.Replace(DataLayerConstants.CloseSqaureBracket, DataLayerConstants.CloseSqaureBracketWithEscape);
            //The _
            formattedResult = formattedResult.Replace(DataLayerConstants.Underscore, DataLayerConstants.UnderscoreWithEscape);
        }
        return formattedResult;
    }

    public const string EscapeCharacter = @"\";
    public const string EscapeCharacterWithEscape = @"\\";
    public const string Percentage = "%";
    public const string PercentageWithEscape = @"\%";
    public const string OpenSqaureBracket = "[";
    public const string OpenSqaureBracketWithEscape = @"\[";
    public const string CloseSqaureBracket = "]";
    public const string CloseSqaureBracketWithEscape = @"\]";
    public const string Underscore = "_";
    public const string UnderscoreWithEscape = @"\_"; 
```

其他要检查的事项[在 SQL 查询中使用 REPLACE 来获取换行符/回车符](https://stackoverflow.com/questions/14836054/use-of-replace-in-sql-query-for-newline-carriage-return-characters)

# java - Java 属性文件绑定到 Java 接口

> ID：13861005
> 
> 赞同：4
> 
> 时间：2012-12-13T13:37:22.830
> 
> 标签：java, api, properties, configuration

使用 GWT，您可以拥有以下内容：

```
public interface LoginConstants extends Constants {
   @DefaultStringValue("Wellcome to my super app")
   @Key("appDescription")
   String appDescription();

   @DefaultStringValue("Ok")
   @Key("okButtonLabel")
   String okButtonLabel();
} 
```

然后你可以从你的类中使用 GWT.create(LoginConstant.class)，这样接口是由动态实现支持的，当我调用 loginConstants.appDescription() 时，使用 @Key 注释返回属性文件中包含的值引用属性文件中的键。如果属性文件缺少该属性，则返回 de @DefaultStringValue。这用于国际化，但也可能用于配置。但是对于 GWT，这意味着在客户端使用（即转换为 JavaScript），对于 i18n，而不是用于配置。

但是，我发现这个想法对于配置处理也很方便。

我想知道是否有人知道一个框架可以在服务器端做类似的事情，而不必将你的代码绑定到 GWT。IE。如果有任何库实现了专门为配置处理设计的这种逻辑。我不知道这样的事情。

参考 GWT 中的功能：[https ://developers.google.com/web-toolkit/doc/latest/DevGuideI18nConstants](https://developers.google.com/web-toolkit/doc/latest/DevGuideI18nConstants)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T14:16:46.763

我对这个问题实施了自己的解决方案：

> **基本用法**
> 
> OWNER API 使用的方法是定义与属性文件关联的 Java 接口。
> 
> 假设您的属性文件定义为`ServerConfig.properties`：
> 
> ```
> port=80
> hostname=foobar.com
> maxThreads=100 
> ```
> 
> 要访问此属性，您需要在以下位置定义一个方便的 Java 接口`ServerConfig.java`：
> 
> ```
> public interface ServerConfig extends Config {
>     int port();
>     String hostname();
>     int maxThreads();
> } 
> ```
> 
> 我们将此接口称为属性映射接口或只是映射接口，因为它的目标是将属性映射到一段易于使用的代码中。
> 
> 然后，您可以在代码中使用它：
> 
> ```
> public class MyApp {
>     public static void main(String[] args) {
>         ServerConfig cfg = ConfigFactory.create(ServerConfig.class);
>         System.out.println("Server " + cfg.hostname() + ":" + cfg.port() +
>                            " will run " + cfg.maxThreads());
>     }
> } 
> ```
> 
> 但这只是冰山一角。

继续阅读：[基本用法](http://owner.aeonbits.org/docs/usage/)|| [网站](http://lviggiano.github.com/owner/)|| [Github](https://github.com/lviggiano/owner/)

我仍然想到了一些功能，但是当前的实现比问题中描述的基本功能要进步一些。

我需要添加示例和文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T16:18:19.750

我非常喜欢这个想法，因此我使用[Java 动态代理](http://www.javaworld.com/jw-11-2000/jw-1110-proxy.html)快速组装了一些代码。

所以基本上你创建一个带有相关方法的接口，并用@Key、@DefaultStringValue 注释对它们进行注释。

以下是示例 Java 代码：

**主.java**

```
package net.viralpatel;

import net.viralpatel.annotations.DefaultStringValue;
import net.viralpatel.annotations.Key;

interface LoginConstants extends Constants {
       @DefaultStringValue("Wellcome to my super app")
       @Key("appDescription")
       String appDescription();

       @DefaultStringValue("Ok")
       @Key("okButtonLabel")
       String okButtonLabel();
}

public class Main {
    public static void main(String[] args) {
        LoginConstants constants = DynamicProperty.create(LoginConstants.class);
        System.out.println(constants.appDescription());
        System.out.println(constants.okButtonLabel());
    }
} 
```

我们加载的后台属性文件也是

**配置属性**

```
okButtonLabel=This is OK 
```

只需执行 Main java 类，将显示以下输出：

**输出：**

```
Wellcome to my super app 
This is OK 
```

这是其余的代码：http: [//viralpatel.net/blogs/dynamic-property-loader-using-java-dynamic-proxy-pattern/](http://viralpatel.net/blogs/dynamic-property-loader-using-java-dynamic-proxy-pattern/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T13:43:32.213

你可以用 spring 来模仿它（但我不确定它是否值得）：

```
@Component
public class SomeBean {
   @Value("${appDescription:Wellcome to my super app}")
   private String appDescription;

   @Value("${okButtonLabel:Ok}")
   private String okButtonLabel;

   // accessors
} 
```

带一个[`PropertyPlaceHolderConfigurer`](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/beans/factory/config/PropertyPlaceholderConfigurer.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T09:58:30.027

我想将 CDI 视为以下内容：-

### 预选赛

```
@Qualifier
@Retention(RetentionPolicy.RUNTIME)
@Target({
    ElementType.METHOD,
    ElementType.FIELD,
    ElementType.PARAMETER,
    ElementType.TYPE
    })
@Documented
public @interface MessageTemplate {
    @Nonbinding
    String baseName();

    @Nonbinding
    Locale locale() default Locale.ENGLISH;

    @Nonbinding
    String key();
} 
```

### 制片人

```
public class CustomizedProducer {
    @Produces
    @MessageTemplate(baseName = "",
                     key      = "")
    public String createMessageTemplate(final InjectionPoint ip) {
        MessageTemplate configure = null;
        ResourceBundle  bundle    = null;
        try{
            configure = ip.getAnnotated().getAnnotation(MessageTemplate.class);
            bundle    = ResourceBundle.getBundle(configure.baseName(),
                                                 configure.locale());
            return bundle.getString(configure.key());
        } finally{
            configure = null;
            bundle    = null;
        }
    }
} 
```

### 服务配置

```
public class MyServiceConfigure {
    @Inject
    @MessageTemplate(baseName = "com.my.domain.MyProp",
                     key      = "appDescription")
    private String appDescription;

    @Inject
    @MessageTemplate(baseName = "com.my.domain.MyProp",
                     key      = "okButtonLabel")
    private String okButtonLabel;

    //Getter
} 
```

### 工人阶级

```
public class MyService {
    @Inject
    private MyServiceConfigure configure;

    public void doSomething() {
        System.out.println(configure.getAppDescription());
        System.out.println(configure.getOkButtonLabel());
    }
} 
```

关于上面的编码，您可以使用`java.util.Properties`代替`java.util.ResourceBundle`并为限定符提供默认成员。

如果您在 JavaEE 6 下运行这些，CDI 已经为您启用。只需将空 beans.xml 放入 META-INF 或 WEB-INF。如果您在 Java SE 下运行，您可能需要一些进一步的工作，如[Weld 网站](http://seamframework.org/Weld)及其[文档](http://docs.jboss.org/weld/reference/1.1.5.Final/en-US/html_single/)中所述。

我正在使用 CDI 作为我当前生产项目的主要部分，它运行良好。

编辑：-

使用 CDI 的好处是作用域，我们可以生成`@MessageTemplate`as `@ApplicationScope`、`@SessionScoped`、`@RequestScoped`或`@ConversationScoped`伪作用域为`@Singleton`or`@Depenendent`

如果您将 MyServiceConfigure 注释为`@Named`，那么它也可以在 JSF 中使用。

# loops - 循环遍历数组并添加一个分隔符，除了最后一个

> ID：13861007
> 
> 赞同：0
> 
> 时间：2012-12-13T13:37:36.170
> 
> 标签：loops, handlebars.js

使用 Handlebarjs，我想循环一个数组，并显示值，用分隔符分隔。如果我要显示的内容也不是模板，那将很容易；）

这是我的情况：

```
accounts = [
     {'name': 'John', 'email': 'john@example.com'},
     {'name': 'Malcolm', 'email': 'malcolm@example.com'},
     {'name': 'David', 'email': 'david@example.com'}
];

{{#each accounts}}
    <a href="mailto:{{ email }}" title="Send an email to {{ name }}">{{ name }}</a>,
{{/each}} 
```

这个实现的问题是我会有这个输出：

> 约翰、马尔科姆、大卫、

我希望它是：

> 约翰、马尔科姆、大卫

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T15:00:14.407

您可以使用 CSS 伪类`:after`，连同内容，来实现所需的“格式化”。（`:after`以及当今大多数浏览器和 IE8+ 中的内容支持。）

例如：

HTML：

```
<a href="mailto:xxx@xxxx.com" title="Send an email to Foo">Foo1</a>
<a href="mailto:xxx@xxxx.com" title="Send an email to Foo">Foo2</a>
<a href="mailto:xxx@xxxx.com" title="Send an email to Foo">Foo3</a> 
```

CSS：

```
a {
  color: red;
}
a:after {
  content: ", ";
}
a:last-child:after {
  content: "";
} 
```

结果：

```
Foo1, Foo2, Foo3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T13:41:31.403

我实现了一个新的 foreach 助手，可以做到这一点：

```
Handlebars.registerHelper('foreach', function (array, fn) {
    var total = array.length;
    var buffer = '';

    //Better performance: http://jsperf.com/for-vs-foreach/2
    for (var i = 0, j = total; i < j; i++) {
        var item = array[i];

        // stick an index property onto the item, starting with 1, may make configurable later
        item['_index'] = i+1;
        item['_total'] = total;
        item['_isFirst'] = (i === 0);
        item['_isLast'] = (i === (total - 1));

        // show the inside of the block
        buffer += fn.fn(item);
    }

    // return the finished buffer
    return buffer;
}); 
```

接着 ：

```
{{#foreach accounts}}
    <a href="mailto:{{ email }}" title="Send an email to {{ name }}">{{ name }}</a>{{#unless _isLast}}, {{/unless}}
{{/foreach}} 
```

# asp.net - 浏览器支持的 SSL/TLS 协议

> ID：13861009
> 
> 赞同：1
> 
> 时间：2012-12-13T13:37:39.620
> 
> 标签：asp.net, vb.net, browser

我想在我的 ASP.NET VB 页面中获得“浏览器支持的 SSL/TLS 协议”。

我将如何得到这个。

从 HTML 页面属性中，我可以查看：

![HTML 页面连接属性](../Images/c0819c88dfaac47fc0a49219a176908f.png)

我想在代码中获得突出显示的部分。

我可以使用 HttpWebRequest / BrowserCapabilities 对象来获得它吗？

# c# - 在类库项目中实现 IValueConverter

> ID：13861012
> 
> 赞同：6
> 
> 时间：2012-12-13T13:37:52.973
> 
> 标签：c#, wpf, ivalueconverter

我有一个包含大约 12 个项目的解决方案，其中一个设置为启动项目，其中包含主窗口。目前我所有`IValueConverter`的人都在这个项目中。

我现在想将它们移到一个单独的项目中，该项目仅包含转换器。这样我就可以在所有项目中重用它们，而不仅仅是主窗口。

*   我创建了一个新项目（类库）
*   我已经导入了 WindowsBase
*   我已包含对 System.Windows.Data 的引用
*   我正在使用带有 .NET 4 的 Visual Studio 2010 Express

我得到错误：

*“错误 3 找不到类型或命名空间名称‘IValueConverter’（是否缺少 using 指令或程序集引用？）* ”

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-13T13:40:36.140

您需要添加对 PresentationFramework.dll 的引用，这[`IValueConverter`](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)就是实际定义的位置。

查看[文档](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)，您可以在顶部找到该信息：

> 命名空间：System.Windows.Data
> 程序集：PresentationFramework（在 PresentationFramework.dll 中）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T13:40:09.840

请看[这里](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)。我确定您在`PresentationFramework.dll`项目中缺少该库。

# jquery - 响应式表

> ID：13861016
> 
> 赞同：3
> 
> 时间：2012-12-13T13:37:57.360
> 
> 标签：jquery, css, html-table, responsive

我试图让我正在处理的表格数据以一种我认为据我所知不可能的方式响应，除非这里的其他人认为它是？

基本上我有一个表格，它在最大尺寸下显示 TR 中的 3 个 TD 元素。当向下滚动到最小尺寸时，TR 仅显示 2 个 TD 元素，其中之前的第三个 TD 显示在 2 下。像这样的东西（或多或少的视觉表示）：

最大宽度：

```
<table>
    <tbody>
        <tr> 
            <td>First table data</td>  <td>Second table data</td>   <td>Third table data</td> 
            <td>Fourth table data</td> <td>Fifth table data</td>   <td>Sixth table data</td> 
        </tr>
    </tbody>
<table> 
```

最小宽度：

```
<table>
    <tbody>
        <tr> 
            <td>First table data</td>  <td>Second table data</td> 
            <td>Third table data</td>  <td>Fourth table data</td> 
            <td>Fifth table data</td>   <td>Sixth table data</td> 
        </tr>
    </tbody>
<table> 
```

这甚至可能吗？如果是这样，如何开始？这需要jQuery吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T13:41:31.233

是的，这是可能的。将`TD`元素设置为向左浮动并设置`min-width`

[http://jsfiddle.net/RnmLF/1/](http://jsfiddle.net/RnmLF/1/)

只需更改容器的大小即可查看它是否正常工作。

不过，我会研究您是否需要使用桌子。这些天表格仅用于显示表格数据（我们不再是 90 年代了）

**编辑**

我冒昧地为可访问性提供了一个非表版本（请参阅@timmied 了解原因）

[http://jsfiddle.net/nW2hx/](http://jsfiddle.net/nW2hx/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T13:41:40.653

如果您的所有数据单元格都在一行中，则可以这样做。（参见@webnoob 他的解决方案）如果没有，您可能还希望将数据放在 DIV 元素中。他们可以轻松做到这一点。

您没有行或列标题，所以我假设您可以轻松做到这一点，因为您的数据显然与其当前列或行无关。

正如我在下面的评论中所说，我之所以提到使用其他东西然后是 table 是因为它似乎不代表表格数据。在这里阅读更多：[为什么不在 HTML 中使用表格进行布局？](https://stackoverflow.com/questions/83073/why-not-use-tables-for-layout-in-html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-13T14:02:32.807

请在以下链接检查您的查询，在这里您可以解决您的响应表问题

[http://css-tricks.com/examples/ResponsiveTables/responsive.php](http://css-tricks.com/examples/ResponsiveTables/responsive.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-16T11:50:46.600

如果您不介意使用 div 代替 table/tr/td，这里有一个使用 flexbox 的不同选项的广泛示例：[Really Responsive tables using Flexbox](https://hashnode.com/post/really-responsive-tables-using-css3-flexbox-cijzbxd8n00pwvm53sl4l42cx)。在最复杂的级别上，您将获得如下内容：

```
First Second Third Fourth Fifth Sixth Seventh Eighth

First  Third  Fifth Seventh
Second Fourth Sixth Eighth

First   Fifth
Second  Sixth
Third   Seventh
Fourth  Eighth 
```

# cuda - CUDA 竞赛检查、共享内存数组和 cudaDeviceSynchronize()

> ID：13861017
> 
> 赞同：3
> 
> 时间：2012-12-13T13:38:04.970
> 
> 标签：cuda, race-condition, memcheck

我最近发现了CUDA 5.0 中可用的**cuda-memcheck****竞赛检查**工具（参见[NVIDIA 文档](http://docs.nvidia.com/cuda/cuda-memcheck/index.html#using-racecheck)）。该工具可以检测 CUDA 内核中共享内存的竞争条件。**`cuda-memcheck --tool racecheck`**

 **在调试模式下，这个工具没有检测到任何东西，这显然是正常的。但是，在发布模式 (-O3) 中，我会根据问题的参数得到错误。

这是一个错误示例（第 22 行共享内存的初始化，第 119 行的赋值）：

> > **========= 错误：在块 (35, 0, 0) 中的共享**0x0处检测到潜在的 WAW 危害：========== 在 0x00000890 处写入线程 (32, 0, 0)。 ...h:119:void kernel_test3(Data*) ========= 在 ....h:22:void kernel_test3(Data*)
> > ==的 0x00000048 处写入线程 (0, 0, 0) ======= 当前值：13，传入值：0

1.  让我惊讶的第一件事是线程ID。当我第一次遇到错误时，每个块包含 32 个线程（ids 0 到 31）。那么为什么线程 id 32 有问题呢？我什至在 上添加了一个额外的检查`threadIdx.x`，但这并没有改变。
2.  我使用共享内存作为临时缓冲区，每个线程处理自己的多维数组参数，例如`__shared__ float arr[SIZE_1][SIZE_2][NB_THREADS_PER_BLOCK]`. 我真的不明白怎么会有任何竞争条件，因为每个线程都处理自己的共享内存部分。
3.  将网格大小从 64 个块减少到 32 个块似乎解决了这个问题（每个块有 32 个线程）。我不明白为什么。

为了了解发生了什么，我用一些更简单的内核进行了测试。让我向您展示一个产生这种错误的内核示例。基本上，这个内核使用`SIZE_X*SIZE_Y*NTHREADS*sizeof(float)`B 的共享内存，我每个 SM 可以使用 48KB 的共享内存。

**测试.cu**

```
template <unsigned int NTHREADS>
__global__ void kernel_test()
{
    const int SIZE_X = 4;
    const int SIZE_Y = 4;

    __shared__ float tmp[SIZE_X][SIZE_Y][NTHREADS];

    for (unsigned int i = 0; i < SIZE_X; i++)
        for (unsigned int j = 0; j < SIZE_Y; j++)
            tmp[i][j][threadIdx.x] = threadIdx.x;
}

int main()
{
  const unsigned int NTHREADS = 32;

  //kernel_test<NTHREADS><<<32, NTHREADS>>>(); // ---> works fine
  kernel_test<NTHREADS><<<64, NTHREADS>>>();

  cudaDeviceSynchronize(); // ---> gives racecheck errors if NBLOCKS > 32
} 
```

**编译**：

`nvcc test.cu --ptxas-options=-v -o test`

**如果我们运行内核**：

`cuda-memcheck --tool racecheck test`

*   `kernel_test<32><<<32, 32>>>();`: 32 个块，32 个线程 => 不会导致任何明显的竞态检查错误。
*   `kernel_test<32><<<64, 32>>>();`：64 个块，32 个线程 => 导致 WAW 危害（threadId.x = 32？！）和错误。

> > **========= 错误：在块 (57, 0, 0) 中的共享**0x6处检测到潜在的 WAW 危害：
> > ========== 在 0x00000048 处写入线程 (0, 0, 0)。 ...h:403:void kernel_test(void)
> > ========= 在 ....h:403:void kernel_test(void)
> > ====的 0x00000048 处写入线程 (1, 0, 0) ===== 当前值：0，传入值：128
> > 
> > ========= 信息：（正在写入相同的数据）在块（47、0、0）中的**共享**0x0 处检测到潜在的 WAW 危害：
> > ========= 写入线程（32、0、 0) at 0x00000048 in ....h:403:void kernel_test(void)
> > ========= 在 ....h:403:void kernel_test( void)
> > ========= 当前值：0，传入值：0

那么我在这里错过了什么？我在共享内存方面做错了吗？（我仍然是这个的初学者）

# ** 更新 **

问题似乎来自`cudaDeviceSynchronize()`when `NBLOCKS > 32`。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T04:03:25.670

对于初学者来说， cudaDeviceSynchronize() 不是原因；你的内核是原因，但它是一个异步调用，所以在你调用 cudaDeviceSynchronize() 时会发现错误。

至于内核，您的共享内存大小为 SIZE_X*SIZE_Y*NTHREADS（在示例中转换为每个块 512 个元素）。在嵌套循环中，您使用 [i*blockDim.x*SIZE_Y + j*blockDim.x + threadIdx.x] 对其进行索引 - 这就是您的问题所在。

更具体地说，您的 i 和 j 值范围为 [0, 4)，您的 threadIdx.x 范围为 [0, 32)，您的 SIZE_{X | Y} 值为 4。当 blockDim.x 为 64 时，循环中使用的最大索引将为 991（从 3*64*4 + 3*64 + 31）。当您的 blockDim.x 为 32 时，您的最大索引将为 511。

根据您的代码，每当您的 NBLOCKS 超过您的 NTHREADS 时，您应该会收到错误

注意：我最初将此发布到[https://devtalk.nvidia.com/default/topic/527292/cuda-programming-and-performance/cuda-racecheck-shared-memory-array-and-cudadevicesynchronize-/](https://devtalk.nvidia.com/default/topic/527292/cuda-programming-and-performance/cuda-racecheck-shared-memory-array-and-cudadevicesynchronize-/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T09:59:57.917

这显然是适用于 Linux 的 NVIDIA 驱动程序中的一个错误。该错误在 313.18 发布后消失了。**

# xml - 解析 XML 时如何让 Apache Axiom 正确报告源数据行号

> ID：13861019
> 
> 赞同：0
> 
> 时间：2012-12-13T13:38:07.657
> 
> 标签：xml, apache, stax, axiom

这就是我正在做的事情，基本上是从 Axiom Quickstart 文档中复制/粘贴：

```
public GenericXmlParser(Reader input, String entryElementName, List<DciXmlMapping> dciXmlMappings) {
    this.input = OMXMLBuilderFactory.createOMBuilder(input).getDocument().getXMLStreamReader(false);
    this.dciXmlMappings = dciXmlMappings;
    this.entryElementName = new QName(entryElementName);
}

public FeedEntry next() {
    try {
        while (input.hasNext()) {
            if (input.getEventType() == XMLStreamReader.START_ELEMENT &&
                input.getName().equals(entryElementName)) {

                OMElement element =
                    OMXMLBuilderFactory.createStAXOMBuilder(input).getDocumentElement();
                // Make sure that all events belonging to the element are consumed so that
                // that the XMLStreamReader points to a well defined location (namely the
                // event immediately following the END_ELEMENT event).
                element.build();
                // Now process the element.
                return new FeedEntry(element.getLineNumber(), processEntryElement(element), ImmutableList.<String>of());
            }

            input.next();
        }

        return null;
    }
    catch (XMLStreamException e) {
        throw new ImpException(e);
    }
} 
```

这可行，但问题是 element.getLineNumber() 返回的行号似乎总是-1。关于 getLineNumber() 方法的文档并不多，而且在源代码中想要定义行号的地方也不容易找到。为了让 Axiom 跟踪行号，我需要做一些额外的配置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:42:52.663

我怀疑行号信息仅与底层 StAX 解析器所能提供的一样好。JRE 中的默认 StAX 实现在这方面做得不是很好，您可能想尝试[使用 Woodstox](http://woodstox.codehaus.org)（应该只是包含额外的 JAR 或 maven 依赖项的情况）。

# android - 通过蓝牙设备向平板电脑发送数据时出错

> ID：13861021
> 
> 赞同：0
> 
> 时间：2012-12-13T13:38:22.633
> 
> 标签：android, sockets, bluetooth

我面临以下问题：我正在通过蓝牙插座连接两台设备，一台平板电脑和一台蓝牙设备，如阅读器条形码，到目前为止还可以，问题是，当蓝牙设备读取条形码并发送它到平板电脑，条形码有时分两部分发送，例如，如果我读取内容为“212154521212”的条形码，平板电脑收到“2121”，在“54521212”之后，任何人都知道告诉我应该怎么做才能避免这个？

先谢谢了。

我从蓝牙设备读取数据的代码：

[代码] 私有类 ConnectedThread 扩展 Thread {

```
 private final InputStream mmInStream;
    private BluetoothSocket socket;

    public ConnectedThread(BluetoothSocket socket) {
        this.socket = socket;

        InputStream tmpIn = null;

        try {

            tmpIn = socket.getInputStream();

        } catch (IOException e) {
            new LogDeErrosRodesTablet(e);
            Log.e(TAG, e.getMessage());
            Log.e(TAG, "Erro no construtor da classe ConnectedThread.");

        }

        mmInStream = tmpIn;
    }

    public void run() {     
        // continua lendo o inputstream até ocorrer um erro

        while (true) {

            int read = 0;
            byte[] buffer = new byte[128];

            do {

                try {

                    read = mmInStream.read(buffer);
                    Log.e(TAG, "read: " + read);
                    final String data = new String(buffer, 0, read);
                    Log.e(TAG, "data: " + data);

                    //TODO
                    //send data only (bar code) only after read all
                    Bundle bundle = new Bundle();
                    bundle.putString(TelaInserirPedido.CODIGO_BARRAS, data);
                    Message message = new Message();
                    message.what = TelaInserirPedido.MSG_COD_BARRAS;
                    message.setData(bundle);

                    //Send a message with data
                    handler.sendMessage(message);

                } catch(Exception ex) {
                    read = -1;
                    return;
                }

                Log.e(TAG, "inside while.");

            } while (read > 0);

            Log.e(TAG, "outside of while.");
        }

    }

    public void cancel () {
        try {
            socket.close ();
        } catch ( IOException e) { }
    }

} 
```

[/代码]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-21T20:55:08.717

这不是蓝牙错误。蓝牙设备正在将所有数据发送到您的应用程序，但您在接收到所有数据之前正在读取流。如果您知道数据的确切长度，则可以在读取之前检查流上可用的字节数；您可以连接所有读取的结果，直到达到已知终点。或者您可以设置任意时间延迟，并希望在该时间完成传输。

您将在收集输入字符串的 while 循环之后创建 Bundle 和 Message，因为在该循环完成之前您不知道整个字符串。（除非您期望一个连接中有多个字符串，在这种情况下，您需要更复杂的代码来处理部分数字）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:48:23.777

使用 OutputStream.flush() 强制发送所有数据。

# java - 使用 runtime.getruntime.exec 从 Java 调用 python 脚本

> ID：13861024
> 
> 赞同：3
> 
> 时间：2012-12-13T13:38:28.570
> 
> 标签：java, python, servlets

我有一个java web开发项目，想调用一个python脚本在后台运行，然后继续java。

```
String command = "cmd.exe /c cd "C:\\path\\to\\py\\" && python script.py";
Process p = Runtime.getRuntime().exec(command); 
```

当我调用它时似乎没有发生任何事情，但我需要先更改目录，因为脚本访问其目录中的文件。

谢谢你的帮助

编辑：

正确答案是添加开始，这是我编辑的代码

```
String command = "cmd.exe /c cd "C:\\path\\to\\py\\" && start python script.py";
Process p = Runtime.getRuntime().exec(command); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T13:47:42.323

`cmd`您可以从 Java 端设置进程的工作目录，而不是使用来更改目录。例如

```
ProcessBuilder pb = new ProcessBuilder("python", "script.py");
pb.directory(new File("C:\\path\\to\\py"));
Process p = pb.start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:44:34.460

您是否将环境配置为支持“可执行”python 脚本？
如果没有，你应该这样称呼它：

```
String command = "cmd.exe /c start python path\to\script\script.py";
Process p = Runtime.getRuntime().exec(command); 
```

该`start`命令运行适当的可执行文件（在本例中为 python 解释器）及其提供的参数（在本例中为脚本本身）。

# image - Primefaces 打印动态图像

> ID：13861025
> 
> 赞同：1
> 
> 时间：2012-12-13T13:38:31.180
> 
> 标签：image, dynamic, printing, primefaces

我尝试动态加载图像，一切正常。我加载并以动态方式正确显示的图像，我添加了用于打印的标签。现在，如果我要求打印动态创建的图像，我将无法打印。

```
 <pou:commandButton value="Print" type="button" icon="ui-icon-print">  
                    <pou:printer target="image"  />  
       </pou:commandButton>     
       <pou:graphicImage id="image" value="#{printDynamicBean.graphicIMG}" /> 
```

我的豆子是这样的：

```
 public StreamedContent getGraphicIMG() {
        //Graphic   
        BufferedImage bufferedImg;
        try {
            bufferedImg = ImageIO.read(baseImage);
        } catch (IOException e) {

        }
        try {

          Graphics2D g2 = bufferedImg.createGraphics();
          g2.setColor(Color.black);
          int style = Font.BOLD | Font.ITALIC;
          Font f1 = new Font("TimesNewRoman", style , 60);
          g2.setFont(f1);
          g2.drawString("Hello Print", 80, 580);
          ByteArrayOutputStream os = new ByteArrayOutputStream();
          ImageIO.write(bufferedImg, "png", os);
          graphicIMG = new DefaultStreamedContent(new ByteArrayInputStream(os.toByteArray()), "image/png");
        } catch (IOException ex) {
          Logger.getLogger(PrintCartelliniBean.class.getName()).log(Level.SEVERE, null, ex);
        }
        return graphicIMG;

} 
```

就好像她忘记了创造的形象。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T19:14:36.583

```
using CDI bean you can do this : 

@Model
public class ImageBean {

    private StreamedContent image;

    @Produces
    @Named
    public StreamedContent getImage() {
        if (FacesContext.getCurrentInstance().getRenderResponse()) {
            // rendering the view, return a stub StreamedContent to generate right URL.
            image = new DefaultStreamedContent();
        } else {
            // requesting the image
            image = your dynamic image;
        }

        return image;
    }
} 
```

*   在你看来：`<pou:graphicImage id="image" value="#{image}" />`

# java - 静态变量++的Java赋值

> ID：13861027
> 
> 赞同：3
> 
> 时间：2012-12-13T13:38:33.690
> 
> 标签：java, variables, static, variable-assignment

当我将静态 int 的 value++ 分配给另一个 int 时，它执行分配的顺序似乎不遵循 Java 的操作顺序。它不应该在`++`之前做`=`吗？

```
public class Book
{
  private int id;
  private static int lastID = 0;

  public Book ()
  {
    id=lastID++;
  }
} 
```

在我构建的第一本书中，id 是 0。不应该是 1，因为`lastID++`应该首先发生吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T13:42:06.413

您正在使用后缀`++`运算符。这将在使用变量后递增（在您的情况下是赋值）。

如果你想在分配之前增加使用这个

```
id = ++lastID; 
```

这称为前缀`++`运算符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T13:54:41.323

> 它不应该在=之前做++吗？

--> Yes`++`首先评估如下：

你的表情：

```
id = lastID++; 
```

相当于下面的表达式

```
temp = lastId;    // temp is 0
lastID = lastID + 1;  // increament, lastId becomes 1
id = temp;   // assign old value i.e. 0 
```

因此`id as 0`，在这种情况下，您应该使用预增量运算符（++）：

```
public class Book
{
  private int id;
  private static int lastID = 0;

  public Book ()
  {
    id = ++lastID; // pre-increament
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T13:41:15.237

`lastID++;`使用**后自增**运算符，顾名思义，您`lastID`首先使用 的当前值（分配给`id`），然后将 的值`lastID`加 1。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T13:42:09.857

在大多数编程语言中，您可以使用 ++var 和 var++。

++var 立即增加变量的值，而 var++ while 增加变量的值，但返回**之前**的值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-13T13:39:14.900

`lastID++`返回`lastId`增量之前的值。

如果你想`id`也被递增，也就是得到`lastID`递增后的值，使用

```
id = ++lastID; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-13T13:39:57.097

编号`id = lastID++`会影响`lastID`到`id`，然后递增`lastID`。

尝试

```
id = ++lastID; 
```

这将做相反的事情（增加，并影响to`lastID`的新值）。`lastID``id`

# shell - 使用 Net::SSH Ruby 库远程执行需要 sudo su 的命令 - 另一个用户

> ID：13861028
> 
> 赞同：0
> 
> 时间：2012-12-13T13:38:42.600
> 
> 标签：shell, ssh, remote-access, net-ssh, rundeck

我的环境为节点服务器（Rundeck 服务器）和节点目标（远程 Solaris 主机）之间的用户“master”配置了 SSH 无密码身份验证。

在 Target 上，我想`/app/acme/stopApp.sh`用 user执行一个脚本`appmanager`。

通常，当我需要手动运行脚本时，我使用：

```
ssh master@server sudo su - appmanager 
```

或者简单地说：

```
ssh -t master@server 'sudo su - appmanager' 
```

它可以在没有密码的情况下运行并最终运行（作为 appmanager）：

```
/app/acme/stopApp.sh 
```

但我无法弄清楚如何使用 Net::SSH 重现这些步骤。当我执行`sudo su - appmanager`then`/app/acme/stopApp.sh`时，我是在子 shell 中执行的，对吗？

```
require 'rubygems'
require 'net/ssh'
require 'net/scp'
require 'crypt/blowfish'
require 'yaml'

#
# ...
#

Net::SSH.start( host, user, :password => password ) do |session|

  # It's possible to proceed in this way?
  cmd = 'sudo su - appmanager;/app/acme/stopApp.sh'  
  ses = session.exec!( cmd )

end 
```

我意识到，如果我尝试在目标服务器上执行类似的操作：

```
sudo su -c /app/acme/stopApp.sh appmanager 
```

我收到以下消息：

```
We trust you have received the usual lecture from the local System Administrator. 

It usually boils down to these three things: 

 #1) Respect the privacy of others. 
 #2) Think before you type. 
 #3) With great power comes great responsibility. Password:

Password: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:34:51.827

这有点像系统管理员的回答，但我认为您进行了两次身份验证：一次以“master”身份登录（使用 master 的密钥对），然后第二次“master”将 su sudo 到“appmanager”但是使用密码（因此是“讲座”消息）。但我认为你没有第二次回答密码挑战。有几种方法可以解决这个问题：

1) 使用该帐户的密钥对直接以 appmanager 身份登录。如果您担心 appmanager 帐户的安全性，您可以[限制 ssh 远程命令](http://www.wallix.org/2011/10/18/restricting-remote-commands-over-ssh/)等。

2）作为主人，调用一个二进制（[不是脚本！](http://www.faqs.org/faqs/unix-faq/faq/part4/section-7.html)），它是[setuid](http://en.wikipedia.org/wiki/Setuid)作为“appmanager”，它只是调用stopApp.sh脚本。一个[例子](http://qmail.jms1.net/djbdns/trigger-make.c)。

3)在 /etc/sudoers 中将master 所在的相应组设置为[NOPASSWD 。](http://www.ducea.com/2006/06/18/linux-tips-password-usage-in-sudo-passwd-nopasswd/)

# opengl - 立方体的 3D 纹理坐标

> ID：13861032
> 
> 赞同：0
> 
> 时间：2012-12-13T13:39:05.097
> 
> 标签：opengl, textures, opengl-3

我想将 glTexImage3D 与立方体一起使用。它的纹理坐标是什么？我使用 GL_TEXTURE_3D 作为目标。我尝试使用与 2d 纹理坐标相同的 uv 坐标，每个面的 z 分量为 0-depth。但这会出错。

这些是我使用的纹理坐标，似乎不正确。

```
 GLfloat texcoords[]={

        0.0, 0.0,0.0,
        1.0, 0.0,1.0,
        1.0, 1.0,1.0,
        0.0, 1.0,0.0,

        0.0, 0.0,0.0,
        1.0, 0.0,1.0,
        1.0, 1.0,1.0,
        0.0, 1.0,0.0,

        0.0, 0.0,0.0,
        1.0, 0.0,1.0,
        1.0, 1.0,1.0,
        0.0, 1.0,0.0,

        0.0, 0.0,0.0,
        1.0, 0.0,1.0,
        1.0, 1.0,1.0,
        0.0, 1.0,0.0,

        0.0, 0.0,0.0,
        1.0, 0.0,1.0,
        1.0, 1.0,1.0,
        0.0, 1.0,0.0,

        0.0, 0.0,0.0,
        1.0, 0.0,1.0,
        1.0, 1.0,1.0,
        0.0, 1.0,0.0
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:12:50.850

您可能不想仅将 3D 纹理用于纹理立方体的面。您更有可能想要使用*立方体贴图*——本质上是一组 6 个 2D 纹理，每个纹理对应一个立方体的每个面——就其本质而言，它与立方体的拓扑结构非常匹配。

# wpf - 自定义控件 - 将动画图像作为 xml

> ID：13861034
> 
> 赞同：0
> 
> 时间：2012-12-13T13:39:09.450
> 
> 标签：wpf, xaml, custom-controls

我们需要开发一个阀门自定义控件，该控件将根据 OPC 标签的值对阀门的打开/关闭位置进行动画处理。例如：如果 Valve Tag 的值为 1，则将阀门拉到打开位置。如果 Valve Tag 的值为 0，则将阀门拉到关闭位置。该控件将公开一个属性以提供 TAG 名称。

可以通过多种方式对阀门进行动画处理。所以我们需要让应用程序使用控件来指定图像来绘制打开阀门/关闭位置。是否可以将要绘制的图像作为 xaml 项而不是将图像作为文件（例如：png 或 jpg）提供？

我应该为此做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:54:15.713

[您可以使用不同的DrawingBrush](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingbrush.aspx)实例填充控制区域，具体取决于其状态。这些画笔可能在控件的资源中定义。

```
<UserControl.Resources>
    <DrawingBrush x:Key="valveOpen">
        ...
    </DrawingBrush>
    <DrawingBrush x:Key="valveClosed">
        ...
    </DrawingBrush>
</UserControl.Resources>
<!-- change Background when the state changes -->
<Grid x:Name="root" Background="{StaticResource valveOpen}">
    ...
</Grid> 
```

# javascript - onPropertyChange 仅适用于 IE 浏览器

> ID：13861035
> 
> 赞同：1
> 
> 时间：2012-12-13T13:39:10.650
> 
> 标签：javascript, javascript-events

`onPropertyChange`只在IE中工作。我曾经`onPropertyChange`在一个文本框中输入一些文本，同时在另一个文本框中显示相同的文本。有没有其他方法可以解决这个问题？

HTML：

```
<input type="text" id="firstName" name="firstName" value="" maxlength="64"size="30" class="controlStyle" onPropertyChange="displayName(this, document.frmSkills.EmpLn, document.frmSkills.EmpDn,displayFormat)"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:59:48.183

其他浏览器支持任何文本输入事件（oninput）上的事件。

您还需要处理这两个事件以涵盖 IE。

textelement.addEventListener('input',function,false)) 或 textelement.oninput=

这是来自： [http ://help.dottoro.com/ljhxklln.php](http://help.dottoro.com/ljhxklln.php)

> 从版本 9 开始，Internet Explorer 支持 oninput 事件，但 Internet Explorer 9 中的 oninput 事件有问题
> 
> 如果您想检测 textarea、input:text、input:password 或 input:search 元素的内容何时发生更改，oninput 很有用，因为这些元素上的 onchange 事件会在元素失去焦点时触发，而不是在修改后立即触发. 从版本 9 开始，Internet Explorer 支持 oninput 事件。如果您需要在版本 9 之前的 Internet Explorer 中修改这些元素的内容时触发的事件，请使用 onpropertychange 事件。
> 
> oninput 事件在 Internet Explorer 9 中存在缺陷。仅当插入字符时，才通过用户界面从文本字段中删除字符时不会触发该事件。虽然 Internet Explorer 9 支持 onpropertychange 事件，但与 oninput 事件类似，它也有问题，它不会在删除时触发。由于可以通过多种方式删除字符（Backspace 和 Delete 键、CTRL + X、上下文菜单中的 Cut 和 Delete 命令），因此没有很好的解决方案来检测所有更改。如果通过上下文菜单的 Delete 命令删除字符，则 Internet Explorer 9 中的 JavaScript 无法检测到修改。始终使用 Internet Explorer 9 中的 addEventListener 方法为 oninput 事件注册事件侦听器。attachEvent 方法不适用于 oninput 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T16:13:18.133

我得到了上述问题的解决方案，下面是代码。谢谢大家的友好回复。

```
window.onload=function() {
  document.getElementById("textarea_one").onkeyup=function() {     
      document.getElementById("textarea_three").value=this.value+ " "+document.getElementById("textarea_two").value;
  }
  document.getElementById("textarea_two").onkeyup=function() {     
      document.getElementById("textarea_three").value=document.getElementById("textarea_one").value+" "+this.value;
  }
} 
```

# c# - 如何在不依赖于客户端应用程序或 web.config 的 dll 中使用 log4net？

> ID：13861054
> 
> 赞同：3
> 
> 时间：2012-12-13T13:40:07.267
> 
> 标签：c#, logging, azure, log4net

我希望能够动态控制基于 Azure 云的应用程序执行的日志记录级别。为此，我正在创建一个基于 log4net 的共享 DLL。

关于 log4net 日志记录有很多问题，但几乎所有问题都涉及在配置文件或其他文本文件中输入和操作设置。在 Azure 云中，更改 web.config 意味着重新部署。我想通过从管理门户向应用程序调用 Web 服务来更改日志记录。

我还有几个应用程序，我希望每个应用程序都使用我新的基于 log4net 的 DLL，而不必在每个配置文件中存储相同的设置，例如 Appender 详细信息。应用程序记录相同的、一致的数据。

我不想使用 Azure 诊断，因为这会降低这个大型用户群应用程序的性能。此外，我想将日志记录和诊断减少到最低限度（或完全禁用），并且只在各个级别启用它们以调试生产问题或拍摄它们的性能快照。我不想重新部署我的应用程序。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T15:24:11.387

我建议不要将 log4net 配置存储在 web/app.config 文件中，而是存储在可以从外部更新的不同文件中（即：在 blob 存储中），其位置可以从服务配置中动态更改，或者其内容可以是无需重新部署即可更改。

查看 log4net.Config.XmlConfigurator.Configure 方法。您可以向它传递许多不同的参数，而不是只在没有参数的情况下调用它（无参数默认方法从 app.config 文件中读取）。

一种方法是向该 Configure 方法传递存储在 Azure 存储中的配置文件的公共 URL。配置文件的位置可以从服务配置中控制。

或者，如果您不想公开配置文件，您可以从存储中的某个私有位置实现您自己的 XML 配置阅读器，并将 XML 文档传递给 Configure() 方法。

在此处查看更多信息：http: [//logging.apache.org/log4net/release/manual/configuration.html](http://logging.apache.org/log4net/release/manual/configuration.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T13:46:26.927

我可以想到两种方法：

使用 Web Deploy，它只更新服务器上的文件，而无需执行完整的部署过程。

在您的 Azure 实例上启用 RDP，只需登录并就地更改配置文件，就像任何其他服务器一样

# php - pChart，如何设置轴名称或轴标签之间的边距？

> ID：13861055
> 
> 赞同：3
> 
> 时间：2012-12-13T13:40:08.113
> 
> 标签：php, pchart

我的图形结果如下所示，我需要在轴名称或轴标签之间留出空格，这里需要在“月”和 x 轴标签之间留出一些空间边距，对于“点击”和 y 轴标签也是如此。

![在此处输入图像描述](../Images/34cb94b71c726ef31b3e036d98271f60.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T15:28:55.947

尝试查找行号。2344 in`pDraw.class.php`并添加您想要的像素值作为轴值和描述之间的边距到行尾：

```
$TxtLeft = $XPos-$OuterTickWidth-2-($Bounds[1]["X"]-$Bounds[0]["X"]) 
```

例如：`$TxtLeft = $XPos-$OuterTickWidth-2-($Bounds[1]["X"]-$Bounds[0]["X"]) - 10;`

这会将文本向左移动 10 个像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:10:55.737

你可以试试这样的 -

```
 $scaleSettings = array("XMargin"=>10,
                           "YMargin"=>10,
                           "Floating"=>TRUE,
                           "GridR"=>200,
                           "GridG"=>200,
                           "GridB"=>200,
                           "DrawSubTicks"=>TRUE,
                           "CycleBackground"=>TRUE);
    $myPicture->drawScale($scaleSettings); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-07T07:51:45.707

您可以删除轴标签并使用[drawText](http://wiki.pchart.net/doc.draw.text.html)`TEXT_ALIGN_TOPMIDDLE`绘制它，并使用图形区域中的坐标对齐文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-23T07:35:51.373

我添加了两个参数（$XAxisTitleMargin 和 $YAxisTitleMargin）。您可以像传递其他参数一样传递。补丁位于：[https ://gist.github.com/hkjeffchan/4b89545f879bcdc9c638](https://gist.github.com/hkjeffchan/4b89545f879bcdc9c638)

```
$Settings = array('XAxisTitleMargin'=>10, 'YAxisTitleMargin' => 10);
$myPicture->drawScale($Settings); 
```

# java - 具有多个 @Test 方法的 Junit 测试类

> ID：13861057
> 
> 赞同：11
> 
> 时间：2012-12-13T13:40:09.667
> 
> 标签：java, junit, junit4

我有一个 Junit 测试类，其中包含多个 @Test 方法，我需要按顺序运行。如果方法中抛出异常，我想停止整个测试用例并出错，但所有其余的测试方法都在运行。

```
public class{

@Test{
 //Test1 method`enter code here`
}

@Test{
 //Test2 method
}

@Test{
 //Test3 method
}

} 
```

如果 Test1 方法失败，则不要运行其他测试

注：均为独立测试

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-13T16:29:44.363

单元测试应设计为彼此独立运行。无法保证执行顺序。您应该重新设计您的测试类，以便顺序不重要。

如果没有进一步的信息，很难具体建议您。但是有一个`@before`方法可能会有所帮助，该方法在运行每个测试之前检查一些先决条件。如果您包含[`Assume.assumeTrue(...)`](http://junit.sourceforge.net/javadoc/org/junit/Assume.html#assumeTrue%28boolean%29)方法调用，那么如果条件失败，您的测试可能会被跳过？

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-26T20:47:04.607

正如[这里](https://stackoverflow.com/a/13540131/1515052)所描述的，JUnit 4.11 支持使用 Annotation 的顺序执行`@FixMethodOrder`，但其他的都是正确的，所有测试都应该相互独立。

在测试结束时，您可以设置一个全局成功标志。该标志将在每次测试开始时进行测试。如果在一个测试结束时未设置标志（因为它在完成之前失败）所有其他测试也将失败。例子：

```
@FixMethodOrder(MethodSorters.NAME_ASCENDING)
public class ConsecutiveFail{
  private boolean success = true;

  @Test
  public void test1{
    //fist two statements in all tests
    assertTrue("other test failed first", success);
    success = false;
    //do your test
    //...

    //last statement
    success = true;
  }

  @Test
  public void test2{
    //fist two statements in all tests
    assertTrue("other test failed first", success);
    success = false;
    //do your test
    //...

    //last statement
    success = true;
  }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-09-04T09:55:45.023

我能够使用 intellij idea IDE 实现您正在寻找的东西，我正在使用社区版。

在测试方法可用的类中转到编辑配置。（运行->编辑配置）

选择测试类型为“**类**”，如下图所示。

[![在此处输入图像描述](../Images/0a824a878470092fb80368d2a08123ec.png)](https://i.stack.imgur.com/SfnP2.png)

当您运行 Class Test 时，它将执行`@Test`类内的所有 Annotated 方法，如下图所示。

[![在此处输入图像描述](../Images/7119191d5c943ced603cf907302ffe94.png)](https://i.stack.imgur.com/HcF41.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-13T20:53:46.893

如果您需要保留结果并且未通过测试而不会使整套测试失败，请将所有此类测试放在一起并通过假设进行测试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-29T18:39:54.260

以下是 TESTNG 如何指定测试运行顺序的示例：

```
@Test(priority = 1)
public void test1(){}

@Test(priority = 2)
public void test2(){}

@Test(priority = 3)
public void test3(){} 
```

# android - ListView 下方的工具栏

> ID：13861059
> 
> 赞同：3
> 
> 时间：2012-12-13T13:40:13.477
> 
> 标签：android, listview, user-interface, toolbar

我正在开发一个应用程序，该应用程序涉及我必须在每个活动的底部放置一个工具栏。工具栏上有 4 个按钮，每个按钮开始新的活动。

我只是想知道，对于这个问题的普遍性，我深表歉意，是否有适当的方法来实现这一点？我的计划是在每个水平方向的 xml 布局文件中添加一个线性布局元素。然后里面有四个按钮元素......

考虑到我会有很多活动，这似乎是一项巨大的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:31:07.317

你想要的听起来很像 Android 的 ActionBar。检查[此链接](https://developer.android.com/guide/topics/ui/actionbar.html)以获取其使用指南。如果您使用它，您的应用程序的外观和感觉将与操作系统更加一致，因为现在有很多应用程序使用 ActionBar（其中很多），并且您获得了很多想要在那里显示的功能，以及你想怎么做。

ActionBar 仅在 Android 版本 3 (Honeycomb) 中引入，但有一个兼容性库[ActionBarSherlock](http://www.actionbarsherlock.com)允许您在旧版本的 Android 中使用它。

希望对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:43:51.007

您可以为各种视图使用相同的 xml。所以我建议创建一个通用 xml，然后使用其他资源作为字符串、xmls 等，以便在加载`Inflaters`任何内容时准备通用 xml 。`Activity`所以你可以重用它的xml。

# cucumber - 在cucumber中指定特征文件位置

> ID：13861060
> 
> 赞同：9
> 
> 时间：2012-12-13T13:40:21.717
> 
> 标签：cucumber, cucumber-jvm, cucumber-junit

我创建了一些黄瓜测试步骤和一个小黄瓜测试用例，我使用 JUnit 运行，如下所示：

```
@RunWith(Cucumber.class)

public class FuelCarTest {
    //executs cucumber steps in the class FuelCarSteps
} 
```

Cucumber 功能文件现在自动从类路径位置加载，`src/main/resources/<package-name>/*.feature`

我想知道如何告诉黄瓜我的功能文件的位置，因为我需要它从类路径之外的位置（例如数据//）加载它们。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T22:45:16.797

我找到了解决方案，

有@Cucumber.Options 注解，在设置报告输出格式和位置的同时，它还允许设置特征文件的位置。

```
@Cucumber.Options(
    format = {
        "pretty",
        "html:target/cucumber-html-report",
        "json-pretty:target/cucumber- report.json"
    },
    features="features/"
) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-08-02T02:59:54.200

我已将所有功能文件放入`test/resources/features`并使用类路径添加了我的功能文件位置。这是我的黄瓜运行文件。

```
@RunWith(Cucumber.class)
@CucumberOptions(
    monochrome = true,
    features = "classpath:features",
    plugin = {"pretty", "html:target/cucumber-reports",
    "json:target/cucumber.json"
             }

)
public class MyTests 
{

} 
```

这将选择文件夹 features 中的所有功能文件。如果您想要一个子文件夹，您也可以通过替换行来添加它，如下所示。

`features = "classpath:features/DEV"`

如果只有一个特定的功能文件，它应该是这样的

`features = "classpath:features/DEV/SmokeTests.feature"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-14T19:37:26.103

在这里，您可以从文件夹、标签名称和测试输出中指定功能文件。

```
 @RunWith(Cucumber.class)
 @CucumberOptions(features="src/Login.feature",
    format = {"pretty", "html:target/report/",
    "json:target/report/cucu_json_report.json",
    "junit:target/report/cucumber_junit_report.xml",}
     tags ={"@ra1, @ra2"}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-20T16:58:15.457

您可以使用 @CucumberOptions 代替 @Cucumber.Options

```
@RunWith(Cucumber.class)
@CucumberOptions(
    format = "pretty",
    tags = {"~@Ignore"},
    features = "src/test/resources/com/"  //refer to Feature file
)
public class CucumberIT {  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-10T20:10:50.700

此处功能文件文件夹路径的功能关键字示例：位于桌面的我的功能文件文件夹

所以特性关键字值特性=“C:\Users\sanjay\Desktop\features”

```
@RunWith(Cucumber.class)
@CucumberOptions(
		features = "C:\\Users\\sanjay\\Desktop\\features"
		,glue={"com.stepDefination"}
		,monochrome = false,

				format = {"pretty", "html:target/Destination"} 

		)
public class TestRunner {

}
```

# rest - REST：PUT 以及如何处理部分实体

> ID：13861062
> 
> 赞同：2
> 
> 时间：2012-12-13T13:40:25.787
> 
> 标签：rest, partial, put

我已经阅读了有关 PUT 的同上效力的所有信息，而不是将其用于部分更新。我现在的问题是如何处理这种情况。

假设我的服务收到资源 A 的 PUT 请求。A 有 5 个属性。如果请求仅包含其中 4 个，我该怎么办？

*   将缺失的属性设置为 null
*   抛出错误，400 错误请求
*   其他？

创建新资源时设置为 null 似乎没问题，但在更新时似乎可能有问题或危险。

对于这种情况，哪个被认为是“最佳实践”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:52:13.780

如果缺少的参数是强制性参数，显然您应该返回`HTTP 400`. 如果参数不是强制性的，您可以使用传递的其他参数创建资源。

我认为这也适用于**更新**案例。如果缺少强制参数，则应返回`HTTP 400`. 否则，继续使用现有参数。

这就是我所做的，我认为这是一种合理的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:42:02.397

根据《实践中的 REST》一书：

*   PUT 期望整个资源表示
*   建议在某些情况下使用 PATCH — 通常涉及仅提供更改的大型资源表示

# ruby-on-rails - gmaps4rails 条件验证

> ID：13861065
> 
> 赞同：0
> 
> 时间：2012-12-13T13:40:33.850
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gmaps4rails

我在我的用户模型上使用 Gmaps4Rails。

我想使用验证功能，但我不想在注册期间进行验证。所以我这样做了：

```
acts_as_gmappable :validation => false 
```

然后我意识到我真的很想在注册后得到这个验证。

但我不确定如何为 gmaps4rails 实施条件验证？

欢迎任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T07:12:48.330

正如[文档中提到的](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Model-Customization)，您可以使用 Proc：

```
acts_as_gmappable :process_geocoding: lambda {|user| !user.new_record? } 
```

# asp.net - 如何在 asp.net 的 asp 菜单中禁用单击操作

> ID：13861068
> 
> 赞同：0
> 
> 时间：2012-12-13T13:40:38.357
> 
> 标签：asp.net, onclick, click, aspmenu

我有一个动态生成的菜单（C#），如下所示：

`MenuItem(string text, string value, string imageUrl, string navigateUrl, string target)`

`MenuItem AdminLevel1 = new MenuItem("Admin", "Admin"); MenuItem AdminPedidosRegisto = new MenuItem("Questions", "AdminQ"); NavigationMenu.Items.Add(new MenuItem("Messages Received", "AdminMessagesR", "", "./Admin/Messages.ascx", "ContainerIframe")); AdminPedidosRegisto.ChildItems.Add(new MenuItem("Pending", "AdminPending", "", "./Admin/Pedidos.ascx", "ContainerIframe"));`

其中“ContainerIframe”是 iFrame 的 ID，“NavigationMenu”是 (asp:Menu) 的 ID。

我想在没有设置 URL 的父项中禁用单击操作，因此当有人单击它时页面不会刷新。

有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:49:53.153

感谢@Manibhadra（这对于父项和子项来说已经足够了）

```
window.onload = function ()
{
    var menuTable = document.getElementById("<%=NavigationMenu.ClientID%>");
    var menuLinks = menuTable.getElementsByTagName("a");
    for (i = 0; i < menuLinks.length; i++)
    {
        menuLinks[i].onclick = function () {  }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:56:36.020

```
if (MenuItem.NavigateUrl == "")
{
 MenuItem.Selectable = false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T15:09:23.497

menuitem.NavigateUrl = "javascript:;";

# drupal - Drupal 模块代码重用

> ID：13861070
> 
> 赞同：3
> 
> 时间：2012-12-13T13:40:47.390
> 
> 标签：drupal, drupal-7, drupal-modules, code-reuse, include-path

我正在使用 node_clone 模块，效果很好，但我的项目需要使用我的自定义模块中的 node_clone 函数。所以我输入了以下代码：

```
module_load_include('inc', 'node_clone', 'clone.pages');

function mymodule_init(){
    clone_node_save(118);
} 
```

该代码返回`Fatal error: Call to undefined function clone_node_save()`.

我的模块按源分类到标记为**mine**和**contrib**的目录中。Node_save 在 contrib 中，而 myModule 在我的中。

因此，我相应地修改了代码如下：

```
module_load_include('inc', '../../contrib/node_clone', 'clone.pages'); 
```

但我得到同样的错误。

任何人都可以强调我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T14:39:30.747

采用：

```
require_once DRUPAL_ROOT . '/sites/all/modules/contrib/node_clone/clone.pages.inc'; 
```

从[module_load_include API](http://api.drupal.org/api/drupal/includes!module.inc/function/module_load_include/7)：

> 不要在全局上下文中使用此函数，因为它需要完全引导 Drupal，请`require_once DRUPAL_ROOT . '/path/file'`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:39:18.037

这有点误导，文件夹名为“node_clone”，但模块实际上被称为“克隆”，所以你想要：

```
module_load_include('inc', 'clone', 'clone.pages'); 
```

`hook_init()`很早就运行了，所以如果您事先不需要克隆模块的功能，最好将代码移动到钩子中：

```
function mymodule_init(){
  module_load_include('inc', 'clone', 'clone.pages');
  clone_node_save(118);
} 
```

# iphone - ui-widget 的奇怪 css 行为：在 iPhone 上处于活动状态

> ID：13861074
> 
> 赞同：1
> 
> 时间：2012-12-13T13:40:54.343
> 
> 标签：iphone, css, video-embedding

设想：

*   [用于嵌入Vimeo](http://developer.vimeo.com/player/embedding)和[YouTube](https://developers.google.com/youtube/player_parameters#Embedding_a_Player)的标准推荐 iframe
*   有人发现 iPhone 上的点击/触摸没有任何反应
*   禁用css和js，一切正常
*   经过一番挖掘发现，如果禁用 css`.ui-widget :active { outline: none; }`一切都按预期工作。

这些页面上没有 jquery-ui js，所以根本没有带有 .ui-* 的元素。如何删除一行甚至不应该被解析的 CSS 导致这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:38:05.510

这种确切的情况也发生在我身上。使用 iframe 嵌入 youtube 视频。例子：

```
<iframe class="media-youtube-player" width="510" height="290" src="{$url to youtube}" frameborder="0" allowfullscreen></iframe> 
```

在 ipad 上的 safari 中，点击视频没有任何反应。我还将我的代码一分为二，发现从以下行中删除了这一行`jquery.ui.theme.css`：

```
.ui-widget :active { outline: none; } 
```

解决了这个问题。

我还尝试将行修改为：

```
.ui-widget :active {  } 
```

这也导致了这个问题。这意味着选择器本身会破坏 ipad 中的视频。

我还尝试用`.ui-widget :active`just 替换选择器`:active`，这也会导致视频无法播放。

所以，这就是修复......删除那个选择器！

出现在`.ui-widget`您内部活动元素上的轮廓需要更具体地定位。

# java - 在图像上附加文本时指定行距

> ID：13861075
> 
> 赞同：0
> 
> 时间：2012-12-13T13:41:04.297
> 
> 标签：java, image, awt, java-2d

我[在图像上附加文本](https://stackoverflow.com/questions/8223640/appending-text-on-images)。如何在附加到图像上的文本时指定两行之间的行距？

**编辑：-**我想控制文本的行高。

```
final BufferedImage image = ImageIO.read(new File(Background));
Graphics g = image.getGraphics();
java.awt.Font a=new java.awt.Font("AndaleWTJ", java.awt.Font.PLAIN, 26);
g.setFont(a);
g.setColor(Color.RED);
FontMetrics fm = g.getFontMetrics();
drawString(g,Title,15, 84,402,199,171,1);
g.dispose();

public static void drawString(Graphics g, String s, int x, int y, int width,int red_val,int green_val, int blue_val)
{     FontMetrics fm = g.getFontMetrics();
      java.awt.Color c= new java.awt.Color(red_val, green_val, blue_val);
      g.setColor(c);
      int lineHeight = fm.getHeight();
      int curX = x;
      int curY = y;
  String[] words = s.split(" ");
        for (String word : words)
        {
                // Find out thw width of the word.
                int wordWidth = fm.stringWidth(word + " ");

                // If text exceeds the width, then move to next line.
                if (curX + wordWidth >= x + width)
                {
                        curY += lineHeight;
                        curX = x;
                }
                g.drawString(word, curX, curY);
                // Move over to the right for next word.
                curX += wordWidth;
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T07:41:28.357

现在我正在传递 lineHeight 的值而不是 **int lineHeight = fm.getHeight();**

```
 public static void drawString(Graphics g, String s, int x, int y, int width,int red_val,int green_val, int blue_val, int lineHeight )
    {     FontMetrics fm = g.getFontMetrics();
          java.awt.Color c= new java.awt.Color(red_val, green_val, blue_val);
          g.setColor(c);
          int curX = x;
          int curY = y;
      String[] words = s.split(" ");
            for (String word : words)
            {
                    // Find out thw width of the word.
                    int wordWidth = fm.stringWidth(word + " ");

                    // If text exceeds the width, then move to next line.
                    if (curX + wordWidth >= x + width)
                    {
                            curY += lineHeight;
                            curX = x;
                    }
                    g.drawString(word, curX, curY);
                    // Move over to the right for next word.
                    curX += wordWidth;
            }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:46:34.330

如果@Andrew Thompson 在评论中发布的更大的 y 对您来说不够灵活。这就是您正在寻找的[http://docs.oracle.com/javase/tutorial/2d/text/drawmulstring.html](http://docs.oracle.com/javase/tutorial/2d/text/drawmulstring.html)

# android - 如何将字节格式的字符串数据发布到服务器？

> ID：13861076
> 
> 赞同：-1
> 
> 时间：2012-12-13T13:41:05.907
> 
> 标签：android

我想以字节格式将字符串数据 "" 发送到 android 应用程序中的服务器。我使用 HttpClient 但我认为它不是正确的方法，请帮助我如何做到这一点？

在 .net 的情况下，我想要 java 中的类似代码。

```
 string boundary = Guid.NewGuid().ToString();
    HttpWebRequest request = HttpWebRequest.Create(url)
        as HttpWebRequest;
    request.Method = "POST";
    //request.ContentType = "application/json";
    request.PreAuthenticate = true;

    byte[] fulldata = Encoding.UTF8.GetBytes(data);
    request.ContentLength = fulldata.Length;
    using (Stream sw = request.GetRequestStream())
    {
        sw.Write(fulldata, 0, fulldata.Length);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:45:42.980

**首先将您的字符串数据转换为字节，然后使用 ByteArrayEntity 以字节格式将数据发送到服务器。**

试试这样

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://192.168.1.1/xxx");
HttpResponse response;
HttpParams hp = new BasicHttpParams();

//use ByteArrayEntity to send string data in byteformat
ByteArrayEntity byteEntity = new ByteArrayEntity(byte_data);
httppost.setEntity(byteEntity);
response = httpclient.execute(httppost); 
```

# php - 注意：使用未定义的常量 php - 假设 'php' 在修复后不会重置

> ID：13861080
> 
> 赞同：0
> 
> 时间：2012-12-13T13:41:21.070
> 
> 标签：php, webserver, error-logging

我正在使用 Eclipse 来处理我的 php 站点。它最初在 Linux 下运行良好，但后来我将它重新安装到基于 Windows 的服务器上。现在我得到了上面的错误。导致错误的原始行是：

```
php?> 
```

但我将其更改为：

```
?> 
```

我的问题是，无论我刷新或重新启动多少次，我访问的每个站点（它在我的 header.php 文件中）仍然遇到相同的错误。不知道为什么它不评估它是新鲜的，但我知道它不是，因为违规行中没有更多的“php”。

我在想我需要让我的 php 服务器重置错误日志或其他东西，但不知道该怎么做。欢迎任何建议。

-塔诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:56:51.157

好的，所以我弄清楚了问题所在，但仍然没有意义，但至少我知道在哪里看。

我正在使用 eclipse 来编辑我的 PHP 文件。在eclipse中，更改正在生效。即使我退出、重新启动并重新启动 Eclipse，那个该死的 'php' 也消失了。

![证明我修好了](../Images/41def354a8a3f80a4901a559da4623ee.png)

但是，当我在 Notepad++ 中实际加载“C:\xampp\www\MyLibraryAnywhere\scripts\header.php”文件时，我可以看到臭名昭著的“php”仍然存在！

所以，问题是在 eclipse 中所做的编辑没有被保存到有问题的实际文件中。我在记事本++中进行了修复，现在错误消失了。我将发布到 Eclipse 板，看看为什么会发生这种情况。

感谢所有花时间帮助我的人。

# mysql - 带条件的 Cakephp 模型

> ID：13861081
> 
> 赞同：0
> 
> 时间：2012-12-13T13:41:25.053
> 
> 标签：mysql, cakephp

是否可以在 cakephp 模型中与某些特定条件建立关系：例如：

```
var $belongsTo = array(
    'Parent' => array(
        'className' => 'Category', 
        'foreignKey' => 'parent_id', 
        'dependent' => true
    )
); 
```

`parent_id`我想要关于 where field is not的上述关系`0`。请概述如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:45:07.413

您可以像使用 find 一样在关系中添加条件。

```
var $belongsTo = array(
    'Parent' => array(
        'className' => 'Category', 
        'foreignKey' => 'parent_id', 
        'dependent' => true,
        'conditions' => array(
            ...
        )
    )
); 
```

# javascript - 单击时启用所有菜单下拉菜单

> ID：13861088
> 
> 赞同：1
> 
> 时间：2012-12-13T13:41:41.137
> 
> 标签：javascript, jquery, oop, drop-down-menu

## 解释

我已经四处寻找这个，但无法找到这个特定问题的解决方案和/或建议。

我有一个导航菜单，其中包含具有下拉列表的项目。当单击带有下拉菜单的任何一个菜单按钮时，将启用这些下拉列表，然后在悬停时显示/隐藏下拉列表。如果在启用下拉菜单时单击屏幕上的其他任何位置，则它们会立即被禁用并消失。

抱歉解释不好，这是我能说的最好的方式:-(

我在这里制作了一个基本示例***（下拉菜单不显示，它们只是登录控制台）***：

[http://jsfiddle.net/VFJA3/4/](http://jsfiddle.net/VFJA3/4/)

***请忽略所有 HTML 和 CSS，创建它的最简单方法是将所有代码都堆进去，这与此问题无关。***

## 我的问题

如您所见，我有一个名为`MN.dropDownsOn`. 此属性是一个布尔值，用于指示下拉菜单是否应显示在 上`mouseenter`。单击菜单项或未单击的任何内容时，布尔值将启用/禁用...

我想知道的是这是否可以以更好的方式实现？我真的不喜欢存储一个全局值来指示下拉菜单是否启用，但我想不出更好的方法。有什么建议么？

提前致谢

为了便于访问，这是我的 JS：

```
MN.dropDownsOn = false;

/**
 * Initialize the Drop Downs
 * Initialize the Drop Downs in the Navigation Menu
 */
MN.initializeDropDowns = initializeDropDowns;
function initializeDropDowns(){
    // THIS IS THE PART I AM UNSURE ABOUT
    $(document).on('click','.dropdown',function(e){
        // Enable all the drop downs
        MN.dropDownsOn = true;
        // Ensure this down is now visible
        $(this).trigger('mouseenter');
        // Stop jQuery from disabling the dropdowns
        e.stopPropagation();
    });
    $(document).click(function(){
        // Enable all the drop downs
        MN.dropDownsOn = false;
    });     
    // BELOW IS FINE, APART FROM THE MN.DROPDOWNSON MIGHT NEED TO GO
    // Set the hover functions
    $(document).on('mouseenter','.dropdown',function(){
        if(MN.dropDownsOn){
            // Show the dropdown    
        }
    });
    // Set the hover functions
    $(document).on('mouseleave','.dropdown',function(){
        if(MN.dropDownsOn){
            // Hide the dropdown    
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:34:52.437

由于没有其他建议通过，我将把我的意见作为建议：

1.  在函数 initializeDropDowns 中将 dropDownsOn 设为局部变量。这将可用于在函数中注册的所有事件处理程序。

2.  将 initializeDropDowns 转换为一个类，并将事件处理程序和 dropDownsOn 添加为成员变量。构造的对象可以作为数据绑定到 $(document) 并在事件处理期间检索。

# c# - MVVM 进度条和后台工作人员可见性

> ID：13861089
> 
> 赞同：1
> 
> 时间：2012-12-13T13:41:42.323
> 
> 标签：c#, wpf, mvvm, progress-bar, backgroundworker

我正在使用 WPF MVVM 并有一个进度条来报告任务的进度，使用后台工作人员。它可以工作，除非我在工作完成时让进度条折叠起来，如果我这样做，进度条永远不会结束。如果我让进度条可见，那很好，但我不希望在任务完成时进度条可见。有人可以告诉我哪里出错了吗？在下面的 GenerateOutput 只是一个创建一些文件并更新进度的函数。ShowSummary() 是任务完成后需要运行的东西。我尝试在 RunWorkerCompleted 中放置一个 Thread.Sleep，这样用户就可以在其折叠之前实际看到已完成的栏，但您仍然看不到它完整。

```
public void BackgroundWorkerGenerateOutputProgress()
    {
        ProgressVisibility = Visibility.Visible;
        BackgroundWorker worker = new BackgroundWorker();
        worker.DoWork += new DoWorkEventHandler(DoWork);
        worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(RunWorkerCompleted);
        worker.RunWorkerAsync();
    }

void DoWork(object sender, DoWorkEventArgs e)
    {
        if (IsInProgress)
            return;
        CurrentProgress = 0;
        IsInProgress = true;
        BackgroundWorker worker = sender as BackgroundWorker;
        GenerateOutput();
    }
void RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        IsInProgress = false;
        ProgressVisibility = Visibility.Collapsed;
        ShowSummary();
    } 
```

编辑：我已将其更改为以下内容，但我仍然没有看到进度条结束：

```
public void BackgroundWorkerGenerateOutputProgress()
    {
        ProgressVisibility = Visibility.Visible;
        CurrentProgress = 0;
        BackgroundWorker worker = new BackgroundWorker();
        worker.WorkerReportsProgress = true;
        worker.DoWork += new DoWorkEventHandler(DoWork);
        worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(RunWorkerCompleted);
        worker.ProgressChanged += new ProgressChangedEventHandler(ProgressChanged);
        worker.RunWorkerAsync();
    }

    private void ProgressChanged(object sender,
        ProgressChangedEventArgs e)
    {
        CurrentProgress = e.ProgressPercentage;
    }
 void DoWork(object sender, DoWorkEventArgs e)
    {
        if (IsInProgress)
            return;
        IsInProgress = true;
        BackgroundWorker worker = sender as BackgroundWorker;

        DoIt(worker);
    }
    void DoIt(BackgroundWorker worker)
    {
        worker.ReportProgress(20);
        Thread.Sleep(1000);
        worker.ReportProgress(40);
        Thread.Sleep(1000);
        worker.ReportProgress(60);
        Thread.Sleep(1000);
        worker.ReportProgress(80);
        Thread.Sleep(1000);
        worker.ReportProgress(100);

    }
    void RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {

        IsInProgress = false;
        ShowSummary();
        System.Threading.Thread.Sleep(2000);
        ProgressVisibility = Visibility.Collapsed;
    } 
```

xaml（抱歉无法格式化）：

```
<ProgressBar HorizontalAlignment="Left" Value="{Binding CurrentProgress, Mode=OneWay}" Height="20" Width="200" Visibility="{Binding Path=ProgressVisibility}" Minimum="0" Maximum="100" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:32:10.123

尝试 ReportProgress，如此链接所示。你没有 WorkerReportsProgress = true

[BackgroundWorker 类](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

如果您在 GenerateOutput() 的末尾设置它，那么它被设置为 Visibility.Collapsed; 在呈现 UI 之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:44:23.970

我没有尝试过，但逻辑上认为我会这样做。在隐藏之前将进度值设置为其最大值。

```
void RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    CurrentProgress = 0; //Set this to max value
    IsInProgress = false;
    ProgressVisibility = Visibility.Collapsed;
    ShowSummary();
} 
```

# embedded - 使用 SPI 总线将 .hex 文件写入 8051 微控制器的内部 FlashROM

> ID：13861091
> 
> 赞同：0
> 
> 时间：2012-12-13T13:41:59.017
> 
> 标签：embedded, 8051

我正在使用 EEPROM 上的 SPI 总线以及 8051 的内部 ROM 进行固件升级，基本上在这两个存储设备上都写了一个 .hex 文件。我可以看到那里写的 .hex 文件。我可以看到从机和主机通信正常，但无法在我的存储设备上写入任何内容。

如果您有建议并且遇到类似的问题，请告诉我实际问题在哪里。

欢迎任何意见。

问候，拉维

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:36:19.433

我认为可能需要更多信息。无论如何，我可以看到一些陷阱：

*   Hex 文件不一定是内存映像。我使用过的 8051 通常使用 Intel Hex，这是一种描述内存的 ASCII 格式。格式[在这里有很好的记录。](http://en.wikipedia.org/wiki/Intel_HEX)

*   如果您在写入 EEPROM 时遇到问题，您可能没有编写正确的指令。通常，SPI EEPROM 将被字节寻址，但内部仍然有分页。您应该在页面边界开始写入并写入整个页面，然后发出另一个写入命令等。按照惯例，如果您超出页面，或者从页面中间开始，它将循环。因此，如果您的页面长度为 8 个字节，并且您从索引 4 开始写入 0-7，您将得到：

    ```
    Page Start: Index 0 = 4
                Index 1 = 5
                Index 2 = 6
                Index 3 = 7
                Index 4 = 0
                Index 5 = 1
                Index 6 = 2
                Index 7 = 3 
    ```

    *   大多数 EEPROM 都有锁定机制，以防止在完成后意外写入。如果锁已设置，则需要编写解锁方法（如果有，数据手册中会详细说明）

为了进一步帮助您，请尽可能参考零件编号和更好的数据表。

# ios - 你能教 Siri 如何识别你的应用程序的名称吗？

> ID：13861093
> 
> 赞同：2
> 
> 时间：2012-12-13T13:42:00.730
> 
> 标签：ios, siri

只需说出应用程序的名称，就可以使用 Siri 打开应用程序。如果 Siri 不能正确识别该名称（例如，如果它不是英文单词，她不会），您可以在其前面加上“打开‘应用’”——Siri 将更自由地匹配应用名称。

**问题**来了：是否可以在您自己的应用程序中包含语音发音，以便 Siri 无需使用“open”关键字就能理解它？

有点像您可以定义联系人姓名的发音。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-12-13T20:38:06.347

现在可以在 iOS 11 中使用 Info.plist 中的 INAlternativeAppNames 键，如下所述：[https ://developer.apple.com/library/content/qa/qa1950/_index.html](https://developer.apple.com/library/content/qa/qa1950/_index.html)

```
<key>INAlternativeAppNames</key>
<array>
<dict>
    <key>INAlternativeAppName</key>
    <string>Unicorn Pay</string>
    <key>INAlternativeAppNamePronunciationHint</key>
    <string>you nee corn pay</string>
</dict>
</array> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:47:50.500

从 2012 年的 iOS 6 到 2015 年的 iOS 9，Apple 尚未发布任何适用于 Siri 的 API。

在 2012 年，您只能创建自己的 siri 代理，但它只能在放置代理的网络上工作。

* * *

**2016 年，Apple 允许在 iOS 10 中使用[SiriKit](https://developer.apple.com/sirikit/)与 Siri 进行交互。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-15T20:33:04.737

是的，添加一个带有应用程序名称的通讯录条目。给与应用发音对应的通讯录条目起一个拼音昵称。然后，当您说“打开 [应用程序]”时，Siri 应该会打开它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-03T13:54:26.683

不，你不能，因为它是。Siri 基于一个名为 Nuance 的语音识别引擎，它们为 iOS 和 Android 提供了一个非常不错的 SDK。Nuance 移动为您提供了一个模拟账户，该账户每 30 天到期，并允许您进行有限数量（5000 左右）的语音识别交易。如果您获得付费帐户，您可以向 Nuance 教授（添加自定义词汇）单词，并处理语音识别流量的生产级别。

# mysql - 如何在 MySQL 中为 event_name 添加灵活的名称？

> ID：13861099
> 
> 赞同：0
> 
> 时间：2012-12-13T13:42:20.743
> 
> 标签：mysql, events

当我在 mysql 中创建事件时，我想为 event_name 添加更灵活的名称。

```
 mysql> CREATE EVENT test
 ->     ON SCHEDULE AT '2006-02-10 23:59:00'
 ->     DO INSERT INTO test.totals VALUES (NOW());
 Query OK, 0 rows affected, 1 warning (0.00 sec) 
```

我也想添加这样的名称。

```
 mysql> CREATE EVENT 2sjoira42092ajdfj
 ->     ON SCHEDULE AT '2006-02-10 23:59:00'
 ->     DO INSERT INTO test.totals VALUES (NOW()); 
```

我有错误。

```
ERROR 1064 (42000): You have an error in your SQL syntax; 
```

我怎样才能做到这一点？谢谢。

# javascript - 带有ajax的vaadin

> ID：13861103
> 
> 赞同：1
> 
> 时间：2012-12-13T13:42:33.023
> 
> 标签：javascript, jquery, vaadin

任何人都可以帮助我如何将 Portletrequest 作为 AJAX 调用从 javascript 发送到 vaadin？

我需要在 vaadin portlet 弹出窗口中显示从 javaScript 中选择的值

我正在使用 AJAX 调用来获取选定的值。

但是 Ajax 发送 HTTP 请求，所以我的 portlet 上下文消失了。

任何人都可以帮助我如何portletrequest

我来自 JavaScript 的 Ajax 调用：

```
 $.ajax(
        {
            type : "POST",
            url  : "serveResource",
            data : {"tBPMNObject": JSON.stringify(chart.series.name)},
            dataType : "json"
        }
        ).done(function(responseData)
                {
                    console.log("Success#");
                    console.log(responseData);
                }
        ).fail(function(responseData)
                {
                    console.log("failed-->");
                    console.log(responseData);
                }); 
```

以及通过实现 HttpServletRequestListener 在 vaadin 中的请求

```
public void onRequestStart(HttpServletRequest request,
        HttpServletResponse response) {

      String name = request.getParameter("tBPMNObject");

}
@Override
public void onRequestEnd(HttpServletRequest request,
        HttpServletResponse response) {

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:23:19.117

我们可以通过在ajax中传递友好的url来将请求发送到handelRenderRequest

```
 $.ajax(
            {
                type : "POST",
                url  :"Friendly URL of the portlet",
                data : {"CHART_VALUE": JSON.stringify(chart.series.name)},
                dataType : "json"
            }
    ).done(function(responseData)
            {
        console.log("Success#");
        console.log(responseData);
        vaadin.forceSync();
            }
    ).fail(function(responseData)
            {
        console.log("failed-->");
        console.log(responseData);
        vaadin.forceSync();
            }); 
```

我们可以通过 request.getParameter("CHART_VALUE"); 获取 renderrequest 中的值。

```
 private class LiferayPortletListener implements PortletListener
    {
        public void handleRenderRequest(RenderRequest request, RenderResponse response, Window window)
        {
             system.out.println(request.getParameter("CHART_VALUE"));
             }} 
```

# kinect - 使用 Kinect SDK 渲染 3d 模型的简单方法

> ID：13861107
> 
> 赞同：0
> 
> 时间：2012-12-13T13:42:40.403
> 
> 标签：kinect, 3d-rendering

我已经习惯了 Kinect SDK 和 WPF 应用程序（这两个应用程序都是新手）。

我的应用程序现在获得了普通视频、深度生成的视频以及每个像素的深度和颜色值，用 kinect sdk 在短时间内完成 :) 现在我需要渲染我在 3d 空间中获得的每个点。对于我已经拥有 XYZ 坐标的每个点，我只需要一种简单的方法来渲染它。

这是我已经尝试过的：

*   使用D3DImage WPF组件和DirectX，结果：没时间掌握directX C++编码

*   使用 D3DImage WPF 组件和 SlimDX，结果：找不到任何有关 SlimDX 的有用文档或如何在 D3DImage 组件中编写渲染输出

*   使用 WPF 和 XNA，结果：无法在 Visual Studio 2012 中导入 XNA，无法使其在 2010 年工作。找到了几个示例，没有一个构建或编译

*   使用 Winforms 和 XNA，结果：工作，但很难从 KinectSDK 转换代码

*   使用 WPF 和 MonoGame，结果：没有关于如何在 WPF 中实现 Monogame 的示例或文档，只有一篇关于如何以不太有效的方式在 WPF 上实现 XNA 的博文

现在..我真的不知道该怎么做..所以我在这里寻求帮助。一个关于如何在 3D 环境中绘制点的小例子可能是一个很好的起点，如果可以通过鼠标交互来旋转模型，它可以是完全完美的 :)

任何想法？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T22:56:46.750

前段时间我遇到了同样的问题。最好的解决方案是使用 Winforms 和 XNA。没有将 XNA 和 WPF 结合起来的好方法，而且这种情况不会很快改变。您是在尝试创建窗口还是全屏应用程序？在使用 WinForms 时，您是否特别为任何事情而苦苦挣扎？

# multithreading - 如何使用 AsyncCalls 调用无参数类过程？

> ID：13861112
> 
> 赞同：2
> 
> 时间：2012-12-13T13:42:53.087
> 
> 标签：multithreading, delphi, delphi-7

试图将[AsyncCalls](http://andy.jgknet.de/blog/bugfix-units/asynccalls-29-asynchronous-function-calls/)集成到我的一个 Delphi 7 项目中，我还不能调用一个类的无参数过程。

**我想做的事：**

```
TMyForm = class(TForm)
private
    procedure TestCalculation;
    procedure RunTest;
end;

var
  TestCall: IAsyncCall;

procedure TMyForm.RunTest;
begin
  TestCall := AsyncCall(TestCalculation);
end; 
```

这是不可能的，导致错误 E2036 需要变量（当您尝试获取表达式或常量的地址时会出现此错误消息。）。

只要我的过程具有像`WaitForIt`本[例](https://stackoverflow.com/a/1830714/1303011)中的过程这样的参数，它就可以实现。
此外，a 是可能的，`LocalAsyncCall`但我并不总是想声明本地过程。

如果我将其设为静态（即`procedure TestCalculation`不是`procedure TMyForm.TesCalculation`），也可以调用此过程。然后我可以成功调用`RunTestCall := AsyncCall(@TestCalculation, []);`但这不适用于属于的过程`TMyForm`。

**问题**

如何在我的示例 ( `TestCalculation`) 中使用 AsyncCalls 从我的类中的另一个过程调用无参数类过程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T13:53:23.647

`AsyncCall`期望您将传递一个接收一个参数的过程。如果你不想传递参数，只需添加一个并忽略它。

```
procedure TestCalculation(IgnoreMe: Integer);
....
TestCall := AsyncCall(TestCalculation, 0); 
```

您可以编写一个适配器来使调用者的代码更清晰：

```
type
  TAsyncCallParameterlessProc = procedure of object;

function AsyncCall(Proc: TAsyncCallParameterlessProc): IAsyncCall; overload;

......

type
  TAsyncCallParameterlessProcAdapter = class
  private
    FProc: TAsyncCallParameterlessProc;
  public
    constructor Create(Proc: TAsyncCallParameterlessProc);
    procedure IntegerProc(IgnoreMe: Integer);
  end;

{ TAsyncCallParameterlessProcAdapter }

constructor TAsyncCallParameterlessProcAdapter.Create(
  Proc: TAsyncCallParameterlessProc);
begin
  inherited Create;
  FProc := Proc;
end;

procedure TAsyncCallParameterlessProcAdapter.IntegerProc(IgnoreMe: Integer);
begin
  try
    FProc;
  finally
    Free;
  end;
end;

function AsyncCall(Proc: TAsyncCallParameterlessProc): IAsyncCall;
var
  Adapter: TAsyncCallParameterlessProcAdapter;
begin
  Adapter := TAsyncCallParameterlessProcAdapter.Create(Proc);
  Result := AsyncCall(Adapter.IntegerProc, 0);
end; 
```

使用该适配器，您问题中的代码将编译并工作。

由于 AsyncCalls 已停止使用，并且不会再次修改，因此您可以轻松地修改该代码以支持您想要的用法。

我个人会修改`AsyncCalls`并添加另一个子类`TInternalAsyncCall`来完成这项工作。

作为一个非常肮脏的黑客，这将起作用：

```
type
  TAsyncCallParameterlessProc = procedure of object;

function AsyncCall(Proc: TAsyncCallParameterlessProc): IAsyncCall; overload;

.....

function AsyncCall(Proc: TAsyncCallParameterlessProc): IAsyncCall;
begin
  Result := AsyncCall(TAsyncCallArgIntegerEvent(Proc), 0);
end; 
```

`TAsyncCallArgIntegerEvent`这依赖于整数参数在易失性寄存器中传递的事实。因此，当框架通过`0`时，您的程序不会从寄存器中读取它。

# c# - 使用 asp.net 的 Cron 作业

> ID：13861114
> 
> 赞同：0
> 
> 时间：2012-12-13T13:42:56.470
> 
> 标签：c#, asp.net, .net, c#-4.0

是否可以在 asp.net 应用程序中进行 cron 作业。这是我想要实现的：

“如果有 50 个新用户，请根据他们的需要向我发送时事通讯”

我已经通过创建在服务器上运行的控制台应用程序来做到这一点，但我正在寻找是否有类似 cron 作业的方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:51:12.823

看看 Quartz.net，它可以轻松处理 cron 触发器

[http://www.quartz-scheduler.net/](http://www.quartz-scheduler.net/)

[http://quartznet.sourceforge.net/tutorial/index.html](http://quartznet.sourceforge.net/tutorial/index.html) <-- 对入门非常有用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T13:45:36.207

您可以运行 Windows 任务调度程序，该程序将采用类似于 cron 作业的命令。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa383614%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383614%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T15:19:33.283

windows 中 cron-jobs 的等价物要么是任务调度程序，要么是 windows 服务。

在我看来，您可以使用轮询数据库并发送时事通讯的 Windows 服务。

如果您已经构建了控制台应用程序，请在 BusinessLogic 类中提取相关代码，并创建一个新的 Windows 服务项目。请参阅[http://code.msdn.microsoft.com/windowsdesktop/CSWindowsService-9f2f568e](http://code.msdn.microsoft.com/windowsdesktop/CSWindowsService-9f2f568e) 我猜你已经有一个可以从服务器连接的工作 SMTP 服务器，对吧？

另请参阅 [此 StackOverflow 问题的答案](https://stackoverflow.com/q/12021013/1446608)

# sockets - 我应该在 Android 中选择 Boost Asio 还是 Aysnc Socket 线程？

> ID：13861115
> 
> 赞同：5
> 
> 时间：2012-12-13T13:43:00.137
> 
> 标签：sockets, android-asynctask, boost-asio, android-networking

我正在为 Android 开发一个基于网络的 UI 应用程序，该应用程序将执行以下类型的功能

1.  需要与在基于 n/w 的嵌入式设备上运行的 TCP 服务器通信（一次 >100 个）。
2.  定期轮询这些设备以获取更新信息
3.  从这些设备发送和接收信息
4.  以上所有信息都将由应用程序的 UI 控制和管理

考虑到上述情况，应用程序可能必须为多个连接生成多个线程并管理它们。所以我的查询是

1.  使用 Boost.Asio 库开发网络模块是一种好方法吗？或者可以打开多达 100 个套接字线程进行连接？

2.  如果使用Boost.Asio，那么网络模块会使用NDK单独开发，访问JNI会到位，进而导致响应缓慢？

或者，还有其他更好的选择吗？期待您的投入！

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:28:57.310

我建议看一下Android 支持的[New I/O](http://en.wikipedia.org/wiki/New_I/O)。使用它您可以在单个线程中处理多个连接，该 API 在原理上类似于 Posix`select()`调用。

如果您决定选择第二个选项（用 C/C++ 实现的网络代码），我认为您不必担心 JNI 性能。无论如何，Android API 的重要部分只是 C/C++ 之上的一个薄 JNI 包装器。

# java - Java中的嵌套枚举

> ID：13861119
> 
> 赞同：2
> 
> 时间：2012-12-13T13:43:14.617
> 
> 标签：java, enums, nested

我正在尝试在 Java 中实现嵌套枚举。以下接口可以很好地完成这项工作，但静态 valueOf() 方法不可用。有没有办法“重建”它？

感谢您的所有回答！

```
public static interface ANIMAL
{
    public static final ANIMAL UNKNOWN = _.UNKNOWN;

    public static enum _ implements ANIMAL
    {
        UNKNOWN,
    }

    public static enum MAMMAL implements ANIMAL
    {
        ;
        public static enum LAND implements ANIMAL
        {
            HORSE,
            COW;
        }
        public static enum SEA implements ANIMAL
        {
            WHALE;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:08:18.890

我不知道您提供的示例是[sscce](http://sscce.org)还是您的实际实现，但请记住，您不必成为哺乳动物即可成为陆地生物。此外，枚举是不可继承的，所以你最好不要这样：

```
public enum Type {
  MAMMAL, REPTILE, INSECT;
}

public enum Region {
  LAND, SEA, AIR;
}

public enum Animal {
  HORSE (Type.MAMMAL, Region.LAND),
  WHALE (Type.MAMMAL, Region.SEA),
  LIZARD (Type.REPTILE, Region.LAND),
  ANT (Type.INSECT, Region.LAND),
  WASP (Type.INSECT, Region.AIR);

  private Type t;
  private Region r;
  private Animal(Type t, Region r) {
    this.t = t;
    this.r = r;
  }
  public Type getType() { return t; }
  public Region getRegion() { return r; }
} 
```

这样您就不会被困在继承层次结构中，您可以随意更改不同的描述符。

* * *

好的，现在我明白你想要什么了。这是可能的，但您必须单独实现每个枚举。问题是你不能做`ANIMAL.valueOf("HORSE")`，但你可以做`ANIMAL.MAMMAL.LAND.valueOf("Horse")`。另一种选择是创建一个`HashMap<String, Enum>`, 并使用它来近似功能，但它很难使用，因为它很难转换为正确的子类。但它将具有`Enum`...的所有方法

# matlab - 如何最小化等值的函数

> ID：13861124
> 
> 赞同：-1
> 
> 时间：2012-12-13T13:43:23.883
> 
> 标签：matlab, mathematical-optimization

我正在尝试像这样最小化matlab中的函数：

```
function [c, ceq] = const_slot( x )
c = [];
% Nonlinear equality constraints
ceq = [sum(x)-1];
end

[x,fval] = fmincon(@func_slot, x0,[],[],[],[],lb,ub,@const_slot,options) 
```

但是，我需要评估`fval`在指定值内的值，或者是正值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:03:48.417

据我了解你的问题，你想对你的函数施加约束`@func_slot`（我假设它是非线性的）。

在[fmincon 的 Matlab 帮助中，](http://www.mathworks.se/help/optim/ug/fmincon.html)我们发现：

```
x = fmincon(fun,x0,A,b,Aeq,beq,lb,ub,nonlcon,options) 
```

`nonlcon`可以使用参数设置非线性约束（在您使用的问题中`@const_slot`）。这些约束应定义为：

```
function [c,ceq] = mycon(x)
c = ...     % # Compute nonlinear inequalities at x.
ceq = ...   % # Compute nonlinear equalities at x. 
```

因此，例如，当您希望函数`@func_slot`大于零时，可以将不等式约束定义`c`为`@const_slot`函数的负数。

**编辑**

如果我理解正确，您需要函数值大于零但小于指定的限制。在这种情况下，你可以试试这个。

```
function [c, ceq] = const_slot( x )

% # Nonlinear inequality constraints
upperLimit = 10;
c = [-func_slot(x);
     -upperLimit + func_slot(x)];

% # Nonlinear equality constraints
ceq = [sum(x)-1];

end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T14:23:06.133

从您的评论来看，您似乎正试图`func_slot`在域中找到所有零，`lb <= x <= ub`并且`sum(x) = 1`.
1\. 如果是这种情况，请重新表述你的问题以反映这一点——你会得到更好的答案。
2.约束`sum(x)=1`是**线性**约束，可以使用`Aeq = ones(1, size(x,1))`和`beq = 1`实现同样的事情。这样做，您现在可以`const_slot`用来反映您的非线性要求

```
function [c, ceq] = const_slot( x )
c = [];
ceq = func_slot(x) - desired_fval; 
```

# c++ - 由procexp（MS进程资源管理器）创建的VC10调试转储文件-只有堆栈信息没有变量值

> ID：13861128
> 
> 赞同：0
> 
> 时间：2012-12-13T13:43:39.640
> 
> 标签：c++, visual-studio-2010, debugging, windbg, dump

基本上我创建转储文件：

1.  调试下：VC10 Debug->Save dump as...
2.  正在发布：Procexp->右键单击->保存转储->创建完整转储...

通过1，我可以用VC10打开转储文件（符号路径，调试源文件都设置正确），我可以看到所有带有源代码的堆栈信息以及所有变量的值。

通过2，我可以用VC10打开转储文件（符号路径，调试源文件都设置正确），我可以看到所有带有源代码的堆栈信息**但是**所有变量的值都不存在。即使我将局部变量放入 Debug Watch 窗口，它也会显示错误：找不到符号“xxx”。我应该如何解决这个问题 2？

**我是如何设置转储调试的？**

**对于符号路径：**

操作->设置符号路径->为我的项目以及使用 Microsoft 符号服务器添加调试和发布文件夹的 pdb 路径。

**对于调试源路径：**

转储项目解决方案 -> 属性 -> 调试源文件 -> 添加我的项目文件夹

顺便说一句：对于同一个转储文件，我也使用了 WinDbg，我也可以看到所有的堆栈信息（在正确设置符号和源路径之后）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T16:19:18.130

调试版本是确保您获得最佳调试体验的版本。查看局部变量不是问题。

发布版本打开代码优化器。它对你的代码做*了很多*事情，但肯定是第一个受害者是局部变量。它们可能会被完全删除或存储在 CPU 寄存器中。如果您确实需要知道这样一个局部变量的值，那么您通常需要查看机器代码以找出 cpu 寄存器存储它的位置。但是，如果这是在隐藏在堆栈跟踪中的代码中，这将永远不会起作用，该值将被推入堆栈的某个地方。找出几乎不可能的地方。

调试优化代码很困难，没有两种方法。使用调试版本消除错误，Hail Mary 在发布版本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T12:07:22.517

感谢所有不错的输入，但我想我今天自己找到了原因！

**原因**：这是一个构建问题，exe需要使用的一些组件没有正确构建！

**注意**：在我的例子中，“ *mini dump* ”7M 和“ *full dump* ”112M 做同样的工作，都是从 procexp 创建的。一旦我将它们加载到 VS 中，我就可以访问：

1.  所有堆栈信息
2.  所有变量信息
3.  一旦我将堆栈从 kernel32.dll!_UnhandleExceptionFiler 切换到我的代码，它就会精确定位到确切的位置。

所以基本上只要你像我在上面和下面那样设置VC10，你应该没问题：

**对于符号路径：**

操作->设置符号路径->为我的项目以及使用 Microsoft 符号服务器添加调试和发布文件夹的 pdb 路径。

**对于调试源路径：**

转储项目解决方案 -> 属性 -> 调试源文件 -> 添加我的项目文件夹

# c# - 图分层布局算法

> ID：13861130
> 
> 赞同：6
> 
> 时间：2012-12-13T13:43:45.267
> 
> 标签：c#, java, c++, layout, graph

有许多工具和 SDK 可以布局图形。ogdf、GraphViz、mxGraph、yEd...

![在此处输入图像描述](../Images/97f56f16cb078125dfbf3fdbe78341cb.png)

一种有用的布局是“分层布局”。但是没有纯粹的算法或伪代码来描述它。甚至，这种类型的布局还没有一个明确的定义。有人知道算法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-13T14:09:44.077

[![在此处输入图像描述](../Images/25eb9a11afd448b7080a12c6fe812241.png)](https://i.stack.imgur.com/Pxib3.png)
[（来源：[yworks.com](http://docs.yworks.com/yfiles/doc/developers-guide/figures/hier-style-explanation-thumb.png)）]

简单的分层布局算法是 ASAP 调度算法的可视化（查看本讲座[[链接]](http://cas.ee.ic.ac.uk/people/gac1/Synthesis/Lecture9.pdf)），所以在我看来，阅读它会更好。

顺便说一句，您的图片并不完全正确 - 建议的可视化只是可能的可视化之一。

想象一下，您有节点列表并且您知道它们之间的依赖关系。

节点列表

```
node4
node2
node5
node1
node3
node6 
```

依赖列表

```
node1 -> node2
node2 -> node4
node3 -> node5
node1 -> node3
node3 -> node6 
```

*   作为您的第一步，您应该找到没有依赖关系的节点 - 这将是您的 layer#1 节点。画它们。
*   然后找到依赖于第 1 层节点的所有节点 - 这将是您的第 2 层节点。
*   对于第 2 层等也是如此。最后，你会得到：

    ```
     node1
            /     \
          node2  node3
           /     /   \
        node4 node5 node6 
    ```

这仅适用于非循环有向图。对于无向算法，您应该稍微修改一下算法（以随机节点为根），但我认为主要思想是可以理解的。

# sql-server - 批量插入块 nolock 查询

> ID：13861132
> 
> 赞同：2
> 
> 时间：2012-12-13T13:43:48.560
> 
> 标签：sql-server, locking, bulkinsert

我有一个 SSIS 包，它正在截断然后将整个表从 serverA 插入到 serverB，但是我试图通过在 serverB 上执行带有 NOLOCK 提示的选择来查看作业的进度，但它被“BULK INSERT”锁定由 SSIS 包执行。

我查看了“sys.dm_tran_locks”，发现“BULK INSERT”在表上持有“Sch-M”锁，我不明白为什么。

请问你能帮我解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:42:03.410

Sch-M 锁表示您在目标表上至少有一个索引。

请参阅“批量导入期间的表锁定和记录”：

[http://msdn.microsoft.com/en-us/library/ms177445%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-us/library/ms177445%28v=sql.105%29.aspx)

根据参考中的表格，当您批量插入时将使用 Sch-M：

1.  使用具有一个非聚集索引和表块的堆
2.  使用空的 B-Tree（聚集索引）和 tabblock

此外，如果加载正确完成，截断将在批量插入开始之前完成（并且它的 Sch-M 锁消失了）。

批量更新 (BU) 锁是最优化的锁，但不要指望在批量插入期间读取表：

*批量更新 (BU) 锁允许进程将数据同时批量复制到同一个表中，同时**阻止未批量复制数据的其他进程访问该表**。* [http://msdn.microsoft.com/en-us/library/aa213039%28v=sql.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa213039%28v=sql.80%29.aspx)

使用 Remus 建议 (sys.allocation_units) 检查进度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:37:55.687

截断需要 SCH-M 来解除分配表[分配单元](http://msdn.microsoft.com/en-us/library/ms189792.aspx)。除此之外，这个锁的目的是防止并发脏读。*如果在脏读扫描器在其中时*截断成功地解除分配表，这些扫描器会突然发现自己正在读取不属于任何人的页面（或者更糟糕的是，被重新分配给其他某个 AU）。与任何写锁一样，2PL 协议需要保持到事务结束。随后的脏扫描仪将按其应有的方式阻挡它。

如果您没有将 TRUNCATE/BULK INSERT 包装在事务中，那么还有其他情况可能导致 BULK INSERT 本身进入 SCH-M 而不是 X（我认为在空表上批量插入的表锁定提示（没有 AU 根页）将导致此）。

太偷看 BULK INSERT 的进度，检查在[`sys.allocation_units`](http://msdn.microsoft.com/en-us/library/ms189792.aspx). 这将为您提供完成百分比的粗略估计。

# git - 如何将带有颜色的 git pull --stat 输出读取到变量中

> ID：13861143
> 
> 赞同：1
> 
> 时间：2012-12-13T13:44:21.653
> 
> 标签：git, bash, colors, io-redirection

如何从`git pull` **颜色**中读取标准输出到 bash 变量中？

转义序列`ls --color=always`很容易读入`$output`：

```
$ output=$(ls --color=always)
$ echo -e "$output" 
```

但不是来自`git pull --stat`：

```
$ git config color.ui always
$ output=$(git pull --stat <repository> <refspec>)
$ echo -e "$output" 
```

换句话说，我怎样才能欺骗`git pull`认为它不会输出到变量中？这不起作用：`$ env TERM=xterm-color git pull --stat`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:18:25.780

您的配置变量中有错字，应该是`color.ui`单数，而不是单数`colors.ui`。在我的 git 版本 1.7.10 的系统上，它可以按预期工作。

**更新：**见截图： ![截屏](../Images/b65dfb35f0501c3f0052992c69b637df.png)

# ruby - 在每个数组元素上应用不同功能的最短方法是什么？

> ID：13861151
> 
> 赞同：2
> 
> 时间：2012-12-13T13:44:46.327
> 
> 标签：ruby

假设我有许多相同大小的数组，其中包含一些元素，例如其中一个可能是：

`arr = ['a', 'b', 'c', 'd']`

我想在每个元素上调用**不同**的函数，具体取决于它的索引，所以我可以这样做：

```
arr.each_with_index do do |el, idx| 
  case idx
  when 0
    functionA el
  when 1
    functionB el
  # and so on..
  end
end 
```

有没有更短的方法来做到这一点？类似于分配给变量的东西：

```
a, b, c, d = arr 
```

但我想调用函数，而不是做赋值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T13:55:31.223

您可以准备一组函数，然后将两者压缩在一起。像这样的东西：

```
# stabby lambdas instead of methods. Because methods aren't objects.
func_a = ->(el) { puts "1 for #{el}" }
func_b = ->(el) { puts "2 for #{el}" }
func_c = ->(el) { puts "3 for #{el}" }

arr = ['a', 'b', 'c', 'd']
funcs = [func_a, func_b, func_c, func_a] # reusing func_a

arr.zip(funcs) {|a, f| f.call(a) }

# >> 1 for a
# >> 2 for b
# >> 3 for c
# >> 1 for d 
```

## 但我的方法是方法，而不是 lambdas ......

这是如何将方法转换为 proc 对象的技巧，以便您可以将它们放入数组中并稍后调用。但是要小心，与常规方法相比，这些调用更昂贵（没关系，除非您已经从 CPU 中挤出周期）

```
def func_a el; puts "1 for #{el}"; end
def func_b el; puts "2 for #{el}"; end
def func_c el; puts "3 for #{el}"; end

arr = ['a', 'b', 'c', 'd']
funcs = [method(:func_a), method(:func_b), method(:func_c), method(:func_a)] # reusing func_a

arr.zip(funcs) {|a, f| f.call(a) }

# >> 1 for a
# >> 2 for b
# >> 3 for c
# >> 1 for d 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T14:15:22.710

要添加到 Sergio 的答案，如果您要调用的函数*是*方法，您可以执行以下操作：

```
arr = ['a', 'b', 'c', 'd']
funcs = [:method_a, :method_b, :method_c, :method_d]

arr.zip(funcs) {|a, f| send(f, a) }

# or if they are methods on some other object
arr.zip(funcs) {|a, f| that_other_object.send(f, a) } 
```

# android - Android中的意图过滤器是否可以识别http链接中的相对路径？

> ID：13861152
> 
> 赞同：1
> 
> 时间：2012-12-13T13:44:47.077
> 
> 标签：android, relative-path, intentfilter

我正在为我编写意图过滤器，`Activity`我想忽略网站内的相对路径。

这是默认行为还是不能忽略？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:09:07.810

> 我想忽略网站内的相对路径

当浏览器遇到相对路径时，浏览器会根据当前页面的URL和相对路径构造一个完整的资源URL。然后，浏览器将使用该完整 URL 来满足对该资源的需求（例如，加载图像、基于链接点击加载页面）。

这些完整的 URL 是否与您的 URL 匹配`<intent-filter>`取决于您和网站作者。

# apache-pig - 在 pigLatin 中加载 csv

> ID：13861153
> 
> 赞同：0
> 
> 时间：2012-12-13T13:44:47.623
> 
> 标签：apache-pig

我有一个具有以下格式的 csv 文件

```
TRAABRX12903CC4816,1548880,2:19,4:7,...
.
.
. 
```

我的问题是我想解释为

```
{(key:chararray,key2:int,{(id:int,cnt:int)})} 
```

到目前为止我的代码是

```
data = LOAD 'mxm_dataset_test_3.txt' using PigStorage(',');
data0 = foreach data generate $0 as key:chararray, {$2 ..} as bow; 
```

为此`data0`，`data0: {key: chararray,bow: {(NULL)}}` 当我尝试将其显式转换`(bag{tuple(chararray)})`为

```
data0 = foreach data generate $0 as key:chararray, {$2 ..} as bow; 
```

这给出了错误`Cannot cast bag with schema :bag{:tuple(:NULL)} to bag with schema :bag{:tuple(:chararray)}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:24:05.853

使用 TOBAG 内置函数来构建您的包：

```
$ cat input
TRAABRX12903CC4816,1548880,2:19,4:7
TRAABRX12903CC4816,1548881,2:19,4:7,5:23,7:3
TRAABRX12903CC4816,1548882
TRAABRX12903CC4816,1548883,17:33
$ cat test.pig
data = LOAD 'input' USING PigStorage(',');
data0 = FOREACH data GENERATE $0 AS key:chararray, $1 AS key2:chararray, TOBAG($2 ..) AS bow:{(pair)};
DESCRIBE data0;
DUMP data0;
$ pig -x local test.pig
...
data0: {key: chararray,key2: chararray,bow: {(pair: NULL)}}
...
(TRAABRX12903CC4816,1548880,{(2:19),(4:7)})
(TRAABRX12903CC4816,1548881,{(2:19),(4:7),(5:23),(7:3)})
(TRAABRX12903CC4816,1548882,{})
(TRAABRX12903CC4816,1548883,{(17:33)}) 
```

但是，如果您想拆分 id:cnt 对，这将变得更加棘手。因为没有办法将模式分配给任意数量的元素，并且`TOBAG`是 UDF，Pig 不能将 bytearray 转换为 chararray 或以后的任何其他内容。

我建议将整行加载为字符串 ( `USING PigStorage('\n')`)，使用`STRSPLIT`限制为 3 来获取您的`key`,`key2`和逗号分隔的字符串列表，然后`STRSPLIT`在逗号和冒号上迭代以获得您想要的对，使用`FLATTEN`和`TOBAG`如所须。我会为你演示这一点，但我被困在 Pig 0.9 上，根据[PIG-2311](https://issues.apache.org/jira/browse/PIG-2311?attachmentOrder=desc "猪2311")判断，这在 Pig 0.10 之前是不可能的。

最简单的解决方案可能就是编写自己的 UDF 来解释如下字符串`2:13,9:4,5:4`：

```
data = LOAD 'input' USING PigStorage('\n') AS (line:chararray);
data0 = FOREACH data GENERATE FLATTEN(STRSPLIT(line, ',', 3)) AS (key:chararray, key2:chararray, pairs:chararray);
data1 = FOREACH data0 GENERATE key, key2, myudfs.PARSE_PAIRS(pairs); 
```

where`myudfs.PARSE_PAIRS`返回一个包含你想要的元组的包。祝你好运。

# javascript - jQuery，延迟 ctrl+c 以聚焦和突出显示文本

> ID：13861156
> 
> 赞同：0
> 
> 时间：2012-12-13T13:44:52.943
> 
> 标签：javascript, jquery

我知道可以防止 ctrl+c 在带有`jQuery`. 所以这让我想到也许可以暂停或中断这个过程，这样你就可以集中注意力并突出显示一些文本，然后让它继续。

这个想法是指定按下 ctrl+c 时发送到剪贴板的内容。所以流程是：

1.  用户按 ctrl+c。
2.  jQuery 拦截按键。
3.  jQuery 添加然后突出显示页面上的一些文本。
4.  jQuery 然后让 ctrl+c 进程继续，因此现在复制突出显示的文本。

听起来可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:10:48.423

感谢所有的评论。最后我选择了一个按钮点击打开一个包含要复制的html的灯箱，然后自动突出显示它。然后用户只需按 ctrl+c。以下是我发现的执行此操作的代码，它突出显示指定元素、图像、链接、文本等中的所有内容。

```
function SelectText(element) {
var text = document.getElementById(element);
if ($.browser.msie) {
    var range = document.body.createTextRange();
    range.moveToElementText(text);
    range.select();
} else if ($.browser.mozilla || $.browser.opera) {
    var selection = window.getSelection();
    var range = document.createRange();
    range.selectNodeContents(text);
    selection.removeAllRanges();
    selection.addRange(range);
} else if ($.browser.safari) {
    var selection = window.getSelection();
    selection.selectAllChildren(text);
}
} 
```

谢谢

# java - Eclipse PMD 找不到 basic.xml

> ID：13861158
> 
> 赞同：7
> 
> 时间：2012-12-13T13:45:19.463
> 
> 标签：pmd时，出现此错误。, java, eclipse, eclipse-juno, pmd

尝试在 Eclipse/Juno 中为项目 运行[pmd时，出现此错误。](/questions/tagged/pmd "显示标记为“pmd”的问题")

```
An internal error occurred during: "ReviewCode".
Couldn't find the class Can't find resource rulesets/basic.xml.  Make sure the resource is a valid file or URL or is on the CLASSPATH.  Here's the current classpath: C:\eclipsejuno\eclipse\\plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar 
```

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T17:11:21.927

我也看到了命令行版本的这个问题。在最新版本中，类路径是`rulesets/java/basic.xml`

似乎他们更改了版本之间的默认路径。您要么需要手动更新 PMD 配置中的路径，要么更新到最新版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-15T04:34:17.960

如果您的项目中存在“.pmd”文件并使用 ruleset.xml 引用，您可以在上述解决方案之间进行选择来解决您的问题。

1.  删除 .pmd 文件
2.  打开您的 ruleset.xml，并根据此示例进行配置

```
<rule ref="rulesets/basic.xml" /> 
```

至

```
<rule ref="rulesets/java/basic.xml" /> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-04T06:26:24.113

将 rulesets/ 更改为 rulesets/java/ 的建议对我有所帮助，但我还必须更改一条规则：

```
<rule ref="rulesets/java/controversial.xml/UnusedModifier">
  <priority>5</priority>
</rule> 
```

至

```
<rule ref="rulesets/java/unusedcode.xml/UnusedModifier">
  <priority>5</priority>
</rule> 
```

这是我来自声纳的 PMD 配置文件，它适用于 PMD-plugin 4.0.2：

```
<?xml version="1.0" encoding="UTF-8"?>
<ruleset xmlns="http://pmd.sourceforge.net/ruleset/2.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         name="pmd-eclipse"
         xsi:schemaLocation="http://pmd.sourceforge.net/ruleset/2.0.0 http://pmd.sourceforge.net/ruleset_2_0_0.xsd">
  <rule ref="rulesets/java/basic.xml/UnusedNullCheckInEquals">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strings.xml/StringInstantiation">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/design.xml/ConstructorCallsOverridableMethod">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strictexception.xml/AvoidCatchingNPE">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strictexception.xml/AvoidRethrowingException">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/migrating.xml/ReplaceEnumerationWithIterator">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/optimizations.xml/AvoidArrayLoops">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/unusedcode.xml/UnusedFormalParameter">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/basic.xml/ClassCastExceptionWithToArray">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strictexception.xml/AvoidThrowingNullPointerException">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/unusedcode.xml/UnusedPrivateField">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/design.xml/CompareObjectsWithEquals">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strings.xml/UseIndexOfChar">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/basic.xml/BigIntegerInstantiation">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/design.xml/FinalFieldCouldBeStatic">
    <priority>4</priority>
  </rule>
  <rule ref="rulesets/java/naming.xml/SuspiciousEqualsMethodName">
    <priority>2</priority>
  </rule>
  <rule ref="rulesets/java/design.xml/InstantiationToGetClass">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/naming.xml/SuspiciousHashcodeMethodName">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/coupling.xml/LooseCoupling">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/unusedcode.xml/UnusedLocalVariable">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strings.xml/UnnecessaryCaseChange">
    <priority>4</priority>
  </rule>
  <rule ref="rulesets/java/design.xml/SingularField">
    <priority>4</priority>
  </rule>
  <rule ref="rulesets/java/design.xml/CloseResource">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strictexception.xml/AvoidCatchingThrowable">
    <priority>2</priority>
  </rule>
  <rule ref="rulesets/java/basic.xml/CollapsibleIfStatements">
    <priority>4</priority>
  </rule>
  <rule ref="rulesets/java/basic.xml/UselessOperationOnImmutable">
    <priority>2</priority>
  </rule>
  <rule ref="rulesets/java/clone.xml/CloneMethodMustImplementCloneable">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/basic.xml/UselessOverridingMethod">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/unusedcode.xml/UnusedModifier">
    <priority>5</priority>
  </rule>
  <rule ref="rulesets/java/design.xml/PreserveStackTrace">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/optimizations.xml/UseArraysAsList">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/design.xml/EqualsNull">
    <priority>2</priority>
  </rule>
  <rule ref="rulesets/java/basic.xml/BrokenNullCheck">
    <priority>2</priority>
  </rule>
  <rule ref="rulesets/java/logging-jakarta-commons.xml/UseCorrectExceptionLogging">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strings.xml/InefficientStringBuffering">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/sunsecure.xml/ArrayIsStoredDirectly">
    <priority>2</priority>
  </rule>
  <rule ref="rulesets/java/finalizers.xml/FinalizeOverloaded">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/controversial.xml/DontImportSun">
    <priority>4</priority>
  </rule>
  <rule ref="rulesets/java/imports.xml/DontImportJavaLang">
    <priority>4</priority>
  </rule>
  <rule ref="rulesets/java/design.xml/MissingStaticMethodInNonInstantiatableClass">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strings.xml/StringBufferInstantiationWithChar">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/optimizations.xml/UseArrayListInsteadOfVector">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strings.xml/StringToString">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/design.xml/SimplifyConditional">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/migrating.xml/ReplaceVectorWithList">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/codesize.xml/NcssMethodCount">
    <priority>3</priority>
    <properties>
      <property name="minimum" value="50" />
    </properties>
  </rule>
  <rule ref="rulesets/java/logging-java.xml/AvoidPrintStackTrace">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/naming.xml/MethodWithSameNameAsEnclosingClass">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/naming.xml/SuspiciousConstantFieldName">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/codesize.xml/NcssTypeCount">
    <priority>3</priority>
    <properties>
      <property name="minimum" value="800" />
    </properties>
  </rule>
  <rule ref="rulesets/java/design.xml/AvoidInstanceofChecksInCatchClause">
    <priority>4</priority>
  </rule>
  <rule ref="rulesets/java/migrating.xml/IntegerInstantiation">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/migrating.xml/AvoidAssertAsIdentifier">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/design.xml/UnnecessaryLocalBeforeReturn">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/finalizers.xml/AvoidCallingFinalize">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/basic.xml/BooleanInstantiation">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/basic.xml/UnconditionalIfStatement">
    <priority>2</priority>
  </rule>
  <rule ref="rulesets/java/clone.xml/CloneThrowsCloneNotSupportedException">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/migrating.xml/ReplaceHashtableWithMap">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/basic.xml/AvoidDecimalLiteralsInBigDecimalConstructor">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strictexception.xml/SignatureDeclareThrowsException">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/finalizers.xml/EmptyFinalizer">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/design.xml/IdempotentOperations">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strictexception.xml/ExceptionAsFlowControl">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/finalizers.xml/FinalizeDoesNotCallSuperFinalize">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strings.xml/UseStringBufferLength">
    <priority>4</priority>
  </rule>
  <rule ref="rulesets/java/migrating.xml/AvoidEnumAsIdentifier">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/logging-java.xml/SystemPrintln">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strings.xml/UselessStringValueOf">
    <priority>4</priority>
  </rule>
  <rule ref="rulesets/java/strings.xml/AvoidDuplicateLiterals">
    <priority>3</priority>
  </rule>
</ruleset> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-26T07:49:18.550

尝试在 Eclipse 中更新 Maven 项目时出现此错误。对我来说，问题是我使用了两种不同的 PMD，一种作为 Eclipse 插件安装，另一种由 Maven 从父项目的 pom.xml 文件中下载。所以我需要做的是卸载 Eclipse 的 PMD 插件，之后不再出现错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-18T11:14:54.283

就我而言，我有我的自定义 pmdRuleSet.xml，它看起来像：

```
<rule ref="pmd-rulesets/java/codesize.xml/ExcessiveMethodLength">
<properties>
    <property name="minimum" value="10"/>
</properties> 
```

它会抛出错误，如果我将“pmd-rulesets”更改为“ruleset”，并且显然 pmdRuleSet.xml 中的路径，那么一切正常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-09T23:38:17.690

如果您必须面对复杂的项目设置，您可以使用这一行来转换每个 .pmd 文件

```
find . -name .pmd -exec sed -i.bak 's/rulesets\/basic.xml/rulesets\/java\/basic.xml/g' {} \; 
```

# css - 以小分辨率居中网站

> ID：13861160
> 
> 赞同：0
> 
> 时间：2012-12-13T13:45:25.983
> 
> 标签：css, html, browser, center

我有以下问题。我有一个以所有元素为中心的网站。内容部分是一个宽度为 1060px 的 div，边距为 0 auto。到目前为止工作正常。

问题是当我将浏览器大小设置为 1024 时，这个 div 不居中，而是从左侧开始。这个 div 也有一个 40px 的内边距。在小分辨率下，您可以看到左侧的填充，但看不到右侧的填充。

长问题短...我该怎么做才能让网站始终居中，无论浏览器窗口大小如何..

Edit1：逻辑问题是每个浏览器在缩小浏览器窗口宽度时，都将网站放在窗口的左侧“边框”上。是否有解决方法来防止这种情况？让浏览器将页面“移动”到浏览器左侧之外？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:50:43.447

CSS：

```
body {
width: 99%;
max-width: 1060px;
min-width: 800px;
margin: auto 0;
} 
```

使用百分比更安全，但它可能会导致定位等问题。通过使用最小/最大来最小化风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:51:19.017

如果您的固定宽度大于您的屏幕，那么一旦您使用更小的浏览器，就会发生这种情况。

您是否考虑过使其具有响应性，也许有类似的东西

```
.container{
  width:100%;
  max-width:1060px

/* then any other styles, margin etc */
} 
```

这样你的主容器会随着浏览器调整大小吗？

Ethan Marcotte 的响应式设计是一本可以在响应式网站上了解更多信息的好书。

[这是一本书的链接](http://www.abookapart.com/products/responsive-web-design)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:00:14.010

```
html {
width:100%;
height:0 auto !important;
background: /* Any Background */;
}
body {
position:relative; // no need of wrapper if use this
top:0;
width:1060px;
// other properties here but no margin properties
}

$(document).ready( function() {
var q = $("html").width();
var w = $("body").width();
if (q <= w) {
q = w;
}
var e = q/2;
var r = w/2;
var left = e-r;
$("body").css({ "left":left+"px" });
}); 
```

或者如果你不喜欢它！

[http://css-tricks.com/snippets/css/centering-a-website/](http://css-tricks.com/snippets/css/centering-a-website/)

# c++ - C++ 标准是否对没有虚拟成员函数的类类型的大小做出任何保证？

> ID：13861161
> 
> 赞同：7
> 
> 时间：2012-12-13T13:45:28.547
> 
> 标签：c++

我使用 C++ 进行嵌入式编程。

假设我必须实现一个严格定义（即逐字节）的类类型，我可以向它添加一个构造函数和一些其他非虚拟方法，而不需要在字节级别更改该类型的对象吗？也就是说，我可以假设不会添加其他数据吗？

我假设 RTTI 已关闭。

我想确定 C++ 标准是否定义了这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T14:10:26.540

是的，如果您**只**添加构造函数和/或非虚拟方法，您将不会更改类的大小或布局，因为原始类和新类将是布局兼容的（9.2 类成员 [class.mem] #17 )，但**前提是它们是标准布局类**。

标准布局类定义为：

> **9类[类]**
> 
> *标准布局类*是这样的类：
> 
> — 没有非标准布局类（或此类类型的数组）或引用类型的非静态数据成员，
> 
> — 没有虚函数 (10.3) 和虚基类 (10.1)，
> 
> — 对所有非静态数据成员具有相同的访问控制（第 11 条），
> 
> — 没有非标准布局的基类，
> 
> — 要么在最派生类中没有非静态数据成员，并且最多有一个具有非静态数据成员的基类，要么没有具有非静态数据成员的基类，并且
> 
> — 没有与第一个非静态数据成员相同类型的基类。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-13T13:50:10.100

**不，不是。**

C++11 有这样的说法`sizeof`：

> `[C++11: 5.3.5/2]:`[..] 当应用于引用或引用类型时，结果是引用类型的大小。**当应用于一个类时，结果是该类的对象中的字节数，包括将该类型的对象放入数组中所需的任何填充。**最派生类的大小应大于零 (1.8)。应用于`sizeof`基类子对象的结果是基类类型的大小。当应用于数组时，结果是数组中的总字节数。*这意味着包含n 个*元素的数组的大小是元素大小的*n*倍。

......就是这样。它没有指定“将这种类型的对象放入数组中所需的内容”的含义，而是将其留给目标 ABI。

如果我没记错的话，最近[从其以前的主页](http://sourcery.mentor.com/public/cxx-abi/abi.html)(grr) 中消失的安腾 ABI 确实提供了您正在寻找的那种保证，但这与 C++ 保证不同。完全不一样。

您可以使用编译器特定的打包/对齐选项来处理数据成员。但是由于虚拟功能而导致的空间增加超出了您的控制范围。您不会期望为非虚拟功能添加任何空间，但这也不是“保证”。

您可以`static_assert(sizeof T == x, "T needs to be x bytes wide")`检测到何时通过代码更改破坏了某些假设。这是你能得到的最好的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-13T14:10:01.893

在 C++03 及之前版本中，没有。绝对不能保证布局。在 C++11 中，有布局兼容的概念，但我不确定它会走多远；我*希望*向类添加非虚拟函数不会破坏布局兼容性。另一方面，您提到嵌入式编程和关闭 RTTI；您可能指望编译器保证的许多其他事情，而不是标准。（例如，关闭 RTTI 的能力。）鉴于此，我建议寻找编译器的保证。我怀疑大多数针对嵌入式系统的编译器都提供了它们生成的布局的详细描述，您可以从那里开始。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T14:44:46.447

您可以从*工作草案 C++, n3242, 2011-02-28 中获得此保证*

> **9.2 类成员**
> **18** 如果两个标准布局结构（第 9 条）类型具有相同数量的非静态数据成员并且相应的非静态数据成员（按声明顺序）具有布局兼容类型，则它们是布局兼容的类型 (3.9) .

这里只讨论*数据成员*，所以有两个类

```
struct A {
int d1;
float d2;
void f();
};

struct B {
int e1;
float e2;
int g() const;
double h();
}; 
```

应该是布局兼容的。

什么是标准布局类

> **9 类**
> **7** 标准布局类是这样的类：
> — 没有非标准布局类（或此类类型的数组）或引用类型的非静态数据成员，
> — 没有虚函数 (10.3) 和虚函数基类 (10.1)，
> — 对所有非静态数据成员具有相同的访问控制（第 11 条），
> — 没有非标准布局的基类，
> — 在最派生类中没有非静态数据成员，并且最多有一个基类具有非静态数据成员，或没有具有非静态数据成员的基类，并且
> — 没有与第一个非静态数据成员相同类型的基类。 108

# android - 无法启动活动 ComponentInfo

> ID：13861165
> 
> 赞同：0
> 
> 时间：2012-12-13T13:45:39.713
> 
> 标签：android, android-layout

创建多列列表视图时出现以下错误在此之前在 main.xml 中解决了 nullpointer 异常之后此错误。

```
Error 
    12-13 19:04:00.524: E/AndroidRuntime(1588): FATAL EXCEPTION: main
        12-13 19:04:00.524: E/AndroidRuntime(1588): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.mysampleapp/com.example.mysampleapp.LabelUser}: java.lang.NullPointerException
        12-13 19:04:00.524: E/AndroidRuntime(1588):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
        12-13 19:04:00.524: E/AndroidRuntime(1588):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
        12-13 19:04:00.524: E/AndroidRuntime(1588):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
        12-13 19:04:00.524: E/AndroidRuntime(1588):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
        12-13 19:04:00.524: E/AndroidRuntime(1588):     at android.os.Handler.dispatchMessage(Handler.java:99)
        12-13 19:04:00.524: E/AndroidRuntime(1588):     at android.os.Looper.loop(Looper.java:123)
        12-13 19:04:00.524: E/AndroidRuntime(1588):     at android.app.ActivityThread.main(ActivityThread.java:4627)
        12-13 19:04:00.524: E/AndroidRuntime(1588):     at java.lang.reflect.Method.invokeNative(Native Method)
        12-13 19:04:00.524: E/AndroidRuntime(1588):     at java.lang.reflect.Method.invoke(Method.java:521)
        12-13 19:04:00.524: E/AndroidRuntime(1588):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
        12-13 19:04:00.524: E/AndroidRuntime(1588):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
        12-13 19:04:00.524: E/AndroidRuntime(1588):     at dalvik.system.NativeStart.main(Native Method)
        12-13 19:04:00.524: E/AndroidRuntime(1588): Caused by: java.lang.NullPointerException
        12-13 19:04:00.524: E/AndroidRuntime(1588):     at com.example.mysampleapp.LabelUser.onCreate(LabelUser.java:70)
        12-13 19:04:00.524: E/AndroidRuntime(1588):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
        12-13 19:04:00.524: E/AndroidRuntime(1588):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
        12-13 19:04:00.524: E/AndroidRuntime(1588):     ... 11 more 
```

我为双列列表视图编写的代码。

导入 java.util.ArrayList；导入 java.util.HashMap；

```
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class LabelUser extends ListActivity {
    String[] labelArray;
    String[] labelIdArray; 
    String[] labelRateArray;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.labeluser);
        ControlDashboard obj = new ControlDashboard();
        String url = "http://192.168.1.73:3000/labels/show_label_android/?user="+Constants.ID;
        JSONObject jobj = obj.getJSONFromUrl(url);

        try {
            JSONObject array = jobj.getJSONObject("list"); 
            JSONArray menuitemArr = array.getJSONArray("array");
            labelArray = new String[menuitemArr.length()];
            labelIdArray = new String[menuitemArr.length()];
            labelRateArray = new String[menuitemArr.length()];
             System.out.println(menuitemArr.length());
            for (int i = 0; i < menuitemArr.length(); i++) { 
                // printing the values to the logcat 
               labelRateArray[i] =  menuitemArr.getJSONObject(i).getString("current_royalty_rate").toString(); 
               labelIdArray[i] = menuitemArr.getJSONObject(i).getString("id").toString(); 
               labelArray[i] = menuitemArr.getJSONObject(i).getString("name").toString();       
               System.out.println(labelArray[i]);
            } 
            System.out.println();
            ListView list = (ListView) findViewById(R.id.listView1);
            ArrayList<HashMap<String, String>> mylistData = new ArrayList<HashMap<String, String>>();

            String[] columnTags = new String[] {"col1", "col2"};
            int[] columnIds = new int[] {R.id.column1, R.id.column2};
            for(int i=0; i<2; i++)
            {
             HashMap<String,String> map = new HashMap<String, String>();
             //initialize row data
             for(int j=0; j<3; j++)
             {

                map.put(columnTags[i], labelArray[j]);
                map.put(columnTags[i], labelRateArray[j]);

             }
             mylistData.add(map);
            }
            SimpleAdapter arrayAdapter = new SimpleAdapter(this, mylistData, R.layout.two_col_row,columnTags , columnIds);
list.setAdapter(arrayAdapter);

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
    //@Override
     // protected void onListItemClick(ListView l, View v, int position, long id) {
    //    String item = (String) getListAdapter().getItem(position);
    //    Constants.LABELID = labelIdArray[(int) id];
    //    startActivity(new Intent("com.example.mysampleapp.DASHBOARDTAB"));

    //  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:48:13.360

您在没有 setContentView 的情况下调用 findViewbyId

```
 ListView list = (ListView) findViewById(R.id.listView1); 
```

所以我猜 list 是 null 。所以

```
list.setAdapter(arrayAdapter); 
```

给出 NullPointerException

您应该取消注释 setContentView 并确保您的 xml 有一个名为 listView1 的 listView

# c++ - 从 Sharepoint 2010 服务器下载，在 Windows 客户端的本地应用程序中打开

> ID：13861170
> 
> 赞同：2
> 
> 时间：2012-12-13T13:45:45.403
> 
> 标签：c++, html

Sharepoint 2010 服务器（在 https-url 上）和 Windows 客户端上
的本地应用程序 本地应用程序是我们用 C++/C# 编写的可执行文件

在该站点上，我们有已映射到客户端计算机上的带有扩展名的文档，以便在我们的本地应用程序中打开
单击此类文档会显示一个弹出窗口，要求打开或保存
选择打开会导致下载文档，并且我们的应用程序由 windows 启动将所选文件作为命令行参数
问题是命令行参数设置为下载文件的本地路径

有没有办法获取原始url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:24:25.193

发现自己 - 使用 WinINet.lib：http: [//msdn.microsoft.com/en-gb/library/aa383928.aspx](http://msdn.microsoft.com/en-gb/library/aa383928.aspx)

在项目中包含 WinINet.lib，在源代码中包含 WinINet.h

```
#include <wininet.h>
class CCorrelateAxCtrl::findInCache
{
public:
    _bstr_t cachedUrl;
    findInCache(_bstr_t localName)
    {
        _findInCache(localName);
    }
    virtual ~findInCache() {}

private:
    int _continue;
    DWORD _dwEntrySize;
    static const DWORD MAX_CACHE_ENTRY_INFO_SIZE = 4096;
    LPINTERNET_CACHE_ENTRY_INFO _lpCacheEntry;
    HANDLE _hCacheDir;
    _bstr_t _localName;

    void _setCachEntry(DWORD dwEntrySize)
    {
        _dwEntrySize = dwEntrySize;
        _lpCacheEntry = (LPINTERNET_CACHE_ENTRY_INFO) new char[_dwEntrySize];
        _lpCacheEntry->dwStructSize = _dwEntrySize;
    }
    bool _checkFound() 
    {
        if ( _lpCacheEntry->lpszLocalFileName!=NULL && _localName.length() )
        {
            if ( !wcscmp(_lpCacheEntry->lpszLocalFileName, _localName) ) {
                cachedUrl = _lpCacheEntry->lpszSourceUrlName;
                delete[] _lpCacheEntry;
                return true;
            }
        }
        return false;
    }
    int _checkContinue(DWORD dwEntrySize) 
    {
        DWORD err = GetLastError();
        if (err)
        {
            if (err == ERROR_INSUFFICIENT_BUFFER)
            {
                delete[]_lpCacheEntry;
                _setCachEntry(dwEntrySize);
                return 2;
            }
            else
            {
                FindCloseUrlCache(_hCacheDir);
                return 0;
            }
        }
        return 1;
    }
    void _findInCache(_bstr_t &localName)
    {
        _localName = localName;
        cachedUrl = "";
        _setCachEntry(MAX_CACHE_ENTRY_INFO_SIZE);
        while(1)
        {
            _hCacheDir = FindFirstUrlCacheEntry(NULL, _lpCacheEntry, &_dwEntrySize);
            _continue = _hCacheDir ? 1 : _checkContinue(_dwEntrySize);
            if (_continue!=2)
                break;
        }
        if ( !_continue || _checkFound() ) 
            return;

        _setCachEntry(MAX_CACHE_ENTRY_INFO_SIZE);
try {
        while(1)
        {
            _continue = FindNextUrlCacheEntry(_hCacheDir, _lpCacheEntry, &_dwEntrySize);
                _continue = _continue ? 1 : _checkContinue(_dwEntrySize);
            if ( _continue==1 )
            {
                if ( _checkFound() )
                    break;
            }
            else if (_continue!=2)
                break;
        }
}
catch (char * error)
{
    _bstr_t test = error;
}

    }   
}; 
```

# c++ - 如何加载自定义字体以便在 DirectX 中使用它们？

> ID：13861171
> 
> 赞同：0
> 
> 时间：2012-12-13T13:45:45.593
> 
> 标签：c++, memory, fonts, directx, loading

您好，我目前正在使用 DirectX 开发游戏，我知道如何创建字体并使用该字体绘制文本，这就是我的做法。

在这里，我创建了我的字体。

```
D3DXCreateFont(D3DDevice, // The device
               20,                        // Font size
               0,                         // Default width
               FW_NORMAL,                 // Font weight
               1,                         // MipMap
               false,                     // Italic
               DEFAULT_CHARSET,           // Charset
               OUT_DEFAULT_PRECIS,        // Output precision
               DEFAULT_QUALITY,           // Quality
               DT_LEFT | DT_TOP,          // Default pitch & family
               "Arial",                   // Font name
               &ArialFont);               // Font object 
```

`RECT`当我显示我的字体时，这是我的。

```
RECT FontRect;
FontRect.left          = 50;         // xPos
FontRect.top           = 50;         // yPos
FontRect.right         = 800;        // maxX Cutoff
FontRect.bottom        = 600;        // maxY Cutoff 
```

在这里我显示我的字体。

```
ArialFont->DrawTextA(NULL,                                  // Sprite
                     "Test Text",                           // Text
                     strlen("Test Text"),                   // Text length
                     &FontRect,                             // The font RECT
                     DT_LEFT | DT_TOP,                      // Format
                     D3DXCOLOR_XRGB(255, 255, 255));        // Color 
```

但是您可以看到，当我创建字体时，倒数第二个参数只是字体名称，因为我只需要写下名称，这意味着该字体必须安装到我的计算机中，对吗？现在我的问题是我如何才能将文件中的字体加载到内存中，或者在我运行这个程序时如何加载，这样我就可以拥有一个“自定义字体”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T17:12:44.210

您可以在程序开始时临时安装自定义字体（例如 .ttf 文件）。因此，您可以使用 WinApi 方法`AddFontResourceEx()`( [msdn-doc](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183327%28v=vs.85%29.aspx) ) 将字体加载到系统中。如果你用 标记它`FR_PRIVATE`，它只能在你的进程中使用，并且会在进程终止时被自动删除。使用`RemoveFontResourceEx()`( [msdn-doc](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162923%28v=vs.85%29.aspx) ) 您可以手动删除它。DirectX 中安装字体的使用只是通过它的名称。

# javascript - 获取元素的结束位置。动画结束时的位置。在 OOP Javascript/jQuery 中

> ID：13861172
> 
> 赞同：1
> 
> 时间：2012-12-13T13:45:46.400
> 
> 标签：javascript, jquery, jquery-animate, position

我想得到我的对象的结束位置。所以动画完成时的顶部和左侧位置。我想在动画完成后直接获得那个位置。

我想做这个面向对象的。

这就是我得到的：

```
(function($) {

    Block = function() {

        this.el = $('<div></div>');
        this.el.css('position', 'relative');

        }

    Block.prototype.appendTo = function(parent) {

         this.el.appendTo(parent);
         return this;
    }

    Block.prototype.setSize = function(w, h) {

         this.el.css('width', w); 
         this.el.css('height', h);
         return this;    
    }

    Block.prototype.setPosition = function(x, y, speed) {

        speed = speed || 0;
        this.el.animate({'left': x+ 'px', 'top': y+ 'px'}, speed);
        return this;
    }

    Block.prototype.getPosition = function() {

        var left = this.el.position().left;
    var top = this.el.position().top;
    return [left, top];
    }

})(jQuery); 
```

当我用这个类和console.log创建一个块时，我得到了块起点的位置。我想获得最终位置。直接地

```
var block1 = new Block
block1.appendTo('body')
        .setSize(100,50)
        .setPosition(200, 300, 3000);

console.log(block1.getPosition()); 
```

所以 console.log =`[0, 0]`我希望它是`[200, 300]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:01:17.160

您可以使用`data()`来存储与元素相关的数据：

```
(function($) {
    Block = function() {
        this.el = $('<div></div>');
        this.el.css('position', 'relative');
    }

    Block.prototype.appendTo = function(parent) {
         this.el.appendTo(parent);
         return this;
    }

    Block.prototype.setSize = function(w, h) {
         this.el.css({width: w, height: h}); 
         return this;    
    }

    Block.prototype.setPosition = function(x, y, speed) {
        speed = speed || 0;
        this.el.data({top: y, left: x}).animate({'left': x+ 'px', 'top': y+ 'px'}, speed);     return this;
    }

    Block.prototype.getPosition = function() {
        return [this.el.data('left'), this.el.data('top')];
    }
})(jQuery); 
```

[**小提琴**](http://jsfiddle.net/xGXD8/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:56:28.213

调用时只能存储指定位置`setPosition`，取而代之。

```
Block = function() {
    this.el = $('<div></div>').css('position', 'relative');
    this.position = null;
};
Block.prototype.setPosition = function(x, y, speed) {
    this.position = {'left': x, 'top': y};
    this.el.animate(this.position, speed || 0);
    return this;
};
Block.prototype.getPosition = function() {
    var pos = this.position || this.el.position();
    return [pos.left, pos.top];
}; 
```

# android - 使用 AT 命令定位任何 android 设备的 GSM 小区信息

> ID：13861179
> 
> 赞同：0
> 
> 时间：2012-12-13T13:46:03.457
> 
> 标签：android, gsm, at-command, cdma

我想从任何 Android 设备检索网络信息。

我知道我可以将它用作调制解调器（当连接到 PC 时），然后调用`AT+KCELL`这正是我需要的 - 但我不知道如何在用户不操作时执行此操作（即设备已打开但没有在电话或浏览等任何用途中）该设备。

这是否可能，目的是对我的位置进行三角测量。

谢谢

艾登

**编辑**

```
<scan time="20120729232941" distance="50.175018457421366" >
    <gps time="20120729232922" lng="34.9510156" lat="50.49416856" alt="137.60000610351563"         hdg="308.5" spe="16.25" accuracy="4.2426405" />
    <gsmserving mcc="255" mnc="03" lac="53100" id="8512" ss="-93" act="EDGE" rxlev="10" />
    <gsmneighbour mcc="255" mnc="03" lac="53100" id="513" psc="-1" rxlev="16" act="EDGE" />
    <gsmneighbour mcc="255" mnc="03" lac="53100" id="122" psc="-1" rxlev="14" act="EDGE" />
    <gsmneighbour mcc="255" mnc="03" lac="53100" id="121" psc="-1" rxlev="17" act="EDGE" />
    <gsmneighbour mcc="255" mnc="03" lac="53100" id="8513" psc="-1" rxlev="10" act="EDGE" />
</scan> 
```

这样我就可以提取信号强度和相邻的塔/小区。

Market/Play Store 上的一个应用程序找到了一种方法，它是“Open Signal”

**编辑**

我在这里找到了一个类似的查询：[如何正确地对 GSM 蜂窝塔进行三角测量以获取位置？](https://stackoverflow.com/questions/10329877/how-to-properly-triangulate-gsm-cell-towers-to-get-a-location)

**编辑**

终于我到了某个地方

从我的 Galaxy SII 拨打：*#197328640#，在调试屏幕下，我得到了我想要的所有信息。

**有没有办法以编程方式做到这一点**

GT-I9100 基带处理器 (BP/CP) 规格： http: [//forum.xda-developers.com/showthread.php?t=1471241](http://forum.xda-developers.com/showthread.php?t=1471241)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:52:53.717

我不会向您发布完整代码，但我认为您可以在此示例项目[http://api.yandex.ru/locator/doc/dg/samples/android_sample.zip](http://api.yandex.ru/locator/doc/dg/samples/android_sample.zip)中找到您需要的内容。检查`WifiAndCellCollector.java`类，`collectCellInfo()`方法。我想你可以在那里找到很多有用的东西。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:19:56.000

设备制造商（我的意思是移动制造商）应该提供接口和支持AT命令以给出响应。（来自PC串行通信）

# azure - windows Azure 迁移错误

> ID：13861183
> 
> 赞同：0
> 
> 时间：2012-12-13T13:46:25.670
> 
> 标签：azure, asp.net-mvc-4, visual-studio-2012

我正在学习将 azure 与 asp.net 与 sql 数据库一起使用的教程，并且很难克服我收到的错误。我正在关注的教程是 - “http://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database/#aspnetwindowsazureinfo”

在包管理器控制台中，我输入了“enable-migrations -ContextTypeName ToDoListApp.Models.ToDoDb”，并且工作正常，如下图所示。

```
Checking if the context targets an existing database...
Code First Migrations enabled for project ToDoListApp. 
```

然后我输入了“add-migration Initial”，我收到了这个错误。

“无法构建下一次迁移，因为目标数据库是使用早于 EF 4.3 的 Code First 版本创建的，并且不包含迁移历史记录表。要开始对此数据库使用迁移，请确保当前模型与目标数据库兼容，并且执行迁移更新过程。（在 Visual Studio 中，您可以使用包管理器控制台中的 Update-Database 命令来执行迁移更新过程）。

我还使用了命令“-Verbose”-发现错误在目标数据库中。

```
Using StartUp project 'ToDoListApp'.
Using NuGet project 'ToDoListApp'.
Target database is: 'ToDoListApp.Models.ToDoDb' (DataSource: .\SQLEXPRESS, Provider: System.Data.SqlClient, Origin: Convention). 
```

*   注意：* 我已经在 azure 上建立了一个网站，以及 sql 数据库，并通过发布将其链接到这个项目。

我已将错误输入 Google，有人说“Add-Migration InitialMigration -IgnoreChanges”可以修复它，来自

“http://www.woohoo.uk.com/Blog/updating-entity-framework-4-1-with-code-first-migrations”

和其他人说只在包管理器控制台中更新数据库，这似乎都不起作用，我正在遵循微软提供的教程，并且一路上我收到了这个问题。

解决这种情况的任何帮助将不胜感激，我正在使用 Visual Studio 2012，c# asp.net mv3 framework 4.5。

在我的 web.config 文件中，我也输入了代码

```
 <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  <contexts>
      <context type="ToDoListApp.Models.ToDoDb, ToDoListApp">
        <databaseInitializer type="System.Data.Entity.MigrateDatabaseToLatestVersion">
        <parameters>
          <parameter value="ToDoDb_DatabasePublish"/>
        </parameters>
        </databaseInitializer>
      </context>
    </contexts>
  </entityFramework> 
```

我输入了“Add-Migration InitialMigration -IgnoreChanges”

输出的错误是..

```
 System.InvalidOperationException: Failed to set database initializer of type                 'System.Data.Entity.MigrateDatabaseToLatestVersion' for DbContext type 'ToDoListApp.Models.ToDoDb, ToDoListApp' specified in the application configuration. See inner exception for details. ---> System.TypeLoadException: Could not load type 'System.Data.Entity.MigrateDatabaseToLatestVersion' from assembly 'EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.
   at System.RuntimeTypeHandle.GetTypeByName(String name, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMarkHandle stackMark, IntPtr pPrivHostBinder, Boolean loadTypeFromPartialName, ObjectHandleOnStack type)
   at System.RuntimeTypeHandle.GetTypeByName(String name, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean loadTypeFromPartialName)
   at System.RuntimeType.GetType(String typeName, Boolean throwOnError, Boolean ignoreCase,  Boolean reflectionOnly, StackCrawlMark& stackMark)
   at System.Type.GetType(String typeName, Boolean throwOnError)
   at System.Data.Entity.Internal.ConfigFile.DatabaseInitializerElement.GetInitializerType()
   at System.Data.Entity.Internal.AppConfig.InternalApplyInitializers(Boolean force)
   --- End of inner exception stack trace ---
   at System.Data.Entity.Internal.AppConfig.InternalApplyInitializers(Boolean force)
   at System.Data.Entity.Internal.InternalContext.PerformDatabaseInitialization()
   at System.Data.Entity.Internal.LazyInternalContext.<InitializeDatabase>b__4(InternalContext c)
   at System.Data.Entity.Internal.RetryAction`1.PerformAction(TInput input)
   at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabaseAction(Action`1 action)
   at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabase()
   at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
   at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
   at System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext()
   at System.Data.Entity.Infrastructure.DbQuery`1.System.Linq.IQueryable.get_Provider()
   at System.Linq.Queryable.Count[TSource](IQueryable`1 source)
   at System.Data.Entity.Migrations.History.HistoryRepository.Exists[TContext](HistoryContextBase`1 context)
   at System.Data.Entity.Migrations.History.HistoryRepository.GetPendingMigrations(IEnumerable`1 localMigrations)
   at System.Data.Entity.Migrations.DbMigrator.GetPendingMigrations()
   at System.Data.Entity.Migrations.Infrastructure.MigratorBase.GetPendingMigrations()
   at System.Data.Entity.Migrations.Design.ToolingFacade.GetPendingMigrationsRunner.RunCore()
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.Run()
Failed to set database initializer of type 'System.Data.Entity.MigrateDatabaseToLatestVersion' for DbContext type 'ToDoListApp.Models.ToDoDb, ToDoListApp' specified in the application configuration. See inner exception for details. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T16:45:19.247

固定的 -

只需要我登录 sql server 对象资源管理器并删除表下的 EdmMetadata，然后在 web.config 中输入我的连接字符串，如果有人读过这篇文章并遇到同样的问题，这是一个例子..

```
<add name="DefaultConnection" connectionString="server=tcp:* insert server name*.database.windows.net,1433;Database=* insert database name *;User ID=*insert username *@* insert server name*;Password={*insert password here *};Trusted_Connection=False;Encrypt=True;Connection Timeout=30;"  /> 
```

# listbox - 如何在 ZK 中创建自定义分页

> ID：13861187
> 
> 赞同：0
> 
> 时间：2012-12-13T13:46:28.723
> 
> 标签：listbox, zk, zul

我在 zk 中找不到任何关于自定义分页的教程。ZK 提供了它的默认分页，它非常好，但我的客户需要不同的分页样式。那么，如何在 ZK 中创建自定义分页。请问有什么帮助吗？

我有一个这样的列表框：

```
<listbox id=”bidLbx” mold=”paging”&gt;
   <listitem>
     ...
   </listitem>
</listbox> 
```

它显示 ZK 的默认分页，如：`1 2 3 4 5 Next Last`但没有选择每页行号的选项。所以，我需要自己的按钮和每页下拉选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:37:06.577

1.  您可以使用[CSS](http://books.zkoss.org/wiki/ZK%20Style%20Guide/ZK%20Class%20Concept/Overwriting)来更改[`Paging`](http://books.zkoss.org/wiki/ZK_Style_Guide/XUL_Component_Specification/Paging/os)组件的样式或
2.  只需使用 zk 组件或纯 [html](http://books.zkoss.org/wiki/ZK_Component_Reference/Essential_Components/Html)
    创建您自己的分页组件 并监听[onClick 事件](http://books.zkoss.org/wiki/ZK_Essentials/Introduction_to_ZK/Event_Driven_Programming)，如果您使用 zk 组件，或者
    [使用 javascript 向服务器触发事件](http://books.zkoss.org/wiki/ZK_Client-side_Reference/Communication/AU_Requests/Client-side_Firing)​​，如果您使用 html，
    并自行处理分页逻辑。

有关样式，另请参阅：
[自定义外观 - 第 1 部分](http://books.zkoss.org/wiki/Small_Talks/2011/December/Customize_Look_and_Feel_of_ZK_Components_Using_CSS3)
[自定义外观 - 第 2 部分](http://books.zkoss.org/wiki/Small%20Talks/2012/March/Customize%20Look%20and%20Feel%20of%20ZK%20Components%20Using%20CSS3%20-%20Part%202)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:11:01.187

您必须根据我们的需要编写代码来控制分页按钮，即**`First` `Previous` `1` `2` `3` `4` `5` `Next` `Last`**.

我们只是参考那个 id 即`bidLbx`进行编码。我们需要获取某些值并使用这些值来控制按钮。

这给出了当前页面编号：`bidLbx.getPaginal().getActivePage();`

这给出了总行数：`bidLbx.getPaginal().getTotalSize();`

这将设置页面大小（即每页的行数）：`bidLbx.getPaginal().setPageSize();`

这给出了没有。页数：`bidLbx.getPaginal().getPageCount();`

并且不要忘记禁用默认分页。

```
<listbox id=”bidLbx” mold=”paging”&gt;
    ...
    <zscript>
            <![CDATA[
                bidLbx.getPagingChild().setVisible(false);
                ]]>
    </zscript>
</listbox> 
```

**第一个按钮示例：**

```
<button id="first" label="First" style="margin:10px; padding:5px;">
   <attribute name="onClick">
      <![CDATA[
          bidLbx.getPaginal().setActivePage(0);
      ]]>
   </attribute>
</button> 
```

**每页下拉组合框：**

```
<combobox id="pageSize" value="20" style="width:50px;" readonly="true">
    <comboitem label="5"></comboitem>
    <comboitem label="10"></comboitem>
        <attribute name="onCreate">
           <![CDATA[
             String ps = pageSize.getValue();
         int pSize = Integer.parseInt(ps);
         bidLbx.getPaginal().setPageSize(pSize);
      ]]>
        </attribute>
       <attribute name="onChange">
     <![CDATA[
           String ps = pageSize.getValue();
           int pSize = Integer.parseInt(ps);
       bidLbx.getPaginal().setPageSize(pSize);
     ]]>
      </attribute>
</combobox> 
```

如果您仍有问题，请发表评论。

# java - 无法从 MAC 上的脚本访问 jarfile

> ID：13861192
> 
> 赞同：4
> 
> 时间：2012-12-13T13:46:50.707
> 
> 标签：java, linux, macos, executable-jar

我正在尝试编写一个运行 .jar 文件的脚本。以下命令可从终端运行（来自 .jar 文件夹）：

```
java -jar "./myjavatest.jar" 
```

当我将此行放在一个文件中并从同一个文件夹中运行它（使用终端或在查找器中双击）时，我得到“无法访问 jarfile ./myjavatest.jar”。

我发现当我双击一个文件时，它实际上是从用户主目录运行的。是否可以从文件所在的文件夹中运行它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T11:19:52.310

> 我发现当我双击一个文件时，它实际上是从用户主目录运行的。是否可以从文件所在的文件夹中运行它？

就在这里：

```
SOURCE="${BASH_SOURCE[0]}"
DIR="$( dirname "$SOURCE" )"
while [ -h "$SOURCE" ]
do 
  SOURCE="$(readlink "$SOURCE")"
  [[ $SOURCE != /* ]] && SOURCE="$DIR/$SOURCE"
  DIR="$( cd -P "$( dirname "$SOURCE"  )" && pwd )"
done
DIR="$( cd -P "$( dirname "$SOURCE" )" && pwd )"

cd "$DIR"

java -jar myjavatest.jar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:29:47.907

您是否尝试过更改文件和目录的权限`chmod 755 javatest.jar`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T17:26:15.803

我在尝试执行包含以下内容的 .sh 文件时遇到了这个问题： java -Dlog4j.configuration=file:log4j.properties -jar -Dfile.encoding=ISO-8859-1 mainRPV.jar

问题是由于某种原因文件格式被更改为 DOS 而不是 UNIX，可能是因为它已被编辑并保存在 Windows 中。它与行尾有关

尝试用 vim 打开文件并运行这个命令：set ff=unix

问候！

# python - 比较两个文件中的文本并在字段中追加文本

> ID：13861202
> 
> 赞同：1
> 
> 时间：2012-12-13T13:48:03.797
> 
> 标签：python, r, compare, match

我有两个文件：文件 A 看起来像

```
ProbeID rsID    chr bp  strand  alleleA alleleB
SNP_A-1780270   rs987435    7   78599583    -   C   G
SNP_A-1780271   rs345783    15  33395779    -   C   G
SNP_A-1780272   rs955894    1   189807684   -   G   T
SNP_A-1780274   rs6088791   20  33907909    -   A   G
SNP_A-1780277   rs11180435  12  75664046    +   C   T
SNP_A-1780278   rs17571465  1   218890658   -   A   T
SNP_A-1780283   rs17011450  4   127630276   -   C   T
SNP_A-1780285   rs6919430   6   90919465    +   A   C
SNP_A-1780286   rs41528453  --- --- --- A   G
SNP_A-1780287   rs2342723   16  5748791 +   C   T 
```

和文件 B 看起来像

```
ProbeID call
SNP_A-1780270   2
SNP_A-1780271   0
SNP_A-1780272   2
SNP_A-1780274   1
SNP_A-1780277   0
SNP_A-1780278   2
SNP_A-1780283   2
SNP_A-1780285   2
SNP_A-1780286   0
SNP_A-1780287   0 
```

我想要一个看起来像这样的输出：

```
ProbeID call    genotype
SNP_A-1780270   2   G G
SNP_A-1780271   0   C C
SNP_A-1780272   2   T T 
SNP_A-1780274   1   A G
SNP_A-1780277   0   C C
SNP_A-1780278   2   T T
SNP_A-1780283   2   T T 
SNP_A-1780285   2   C C
SNP_A-1780286   0   A A
SNP_A-1780287   0   C C 
```

本质上，这与两个列表和文件 B 中的 ProbeID 匹配，检查调用列中相应的“调用”值。当 call = 0 时，在相邻列中打印 alleleA 的值两次。当 call = 1 时，打印 alleleA 和 alleleB 的值。当 call =2 时，打印 alleleB 的值两次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:55:43.143

您可以使用嵌套字典轻松完成此操作：

```
data = {}
with open(fileA) as fA:
    header = next(fA).split()
    attributes = header[1:]
    for line in fA:
        lst = line.split()
        data[lst[0]] = dict(zip(attributes,l[1:])

with open(fileB) as fB:
    header = next(fB).split()
    for line in fB:
        ID,call = line.split()
        data[ID]['call'] = int(call) 
```

现在您可以遍历您的数据并仅打印您需要的内容。

或者，如果这些行完全对应（或者如果使用 python 3 ，则`itertools.izip`只是简单） ，您可能一次处理 1 行：`zip`

```
import itertools as it:

with open(fileA) as fA,open(fileB) as fB:
    header_a = next(fA).split()
    header_b = next(fB).split()
    attrib_a = header_a[1:]
    attrib_b = header_b[1:]
    for line_a,line_b in it.izip(fA,fB):
        dat_a = line_a.split()
        dat_b = line_b.split()
        assert(dat_a[0] == dat_b[0])  #make sure they're the same ID
        dat = dict(zip(attrib_a,dat_a[1:]))
        dat.update(zip(attrib_b,dat_b[1:]))
        if (dat['call'] == '0'):
           print dat_a[0],dat['call'],dat['alleleA'],dat['alleleA']

        elif (dat['call'] == '1'):
           print dat_a[0],dat['call'],dat['alleleA'],dat['alleleB']

        elif (dat['call'] == '2'):
           print dat_a[0],dat['call'],dat['alleleB'],dat['alleleB']

        else:
             raise AssertionError("Unknown call") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:33:41.340

使用[熊猫](http://pandas.pydata.org/)：

```
import pandas as pd
import re

A = pd.read_csv('FileA', delimiter = r'\s+')
B = pd.read_csv('FileB', delimiter = r'\s+')
A = A.set_index(['ProbeID'])
B = B.set_index(['ProbeID'])
C = pd.concat([A,B], axis = 1)

idx = C['call'] == 0
C['alleleB'][idx]  = C['alleleA'][idx]
idx = C['call'] == 2
C['alleleA'][idx]  = C['alleleB'][idx]
print(C[['call', 'alleleA', 'alleleB']]) 
```

产量

```
 call alleleA alleleB
ProbeID                            
SNP_A-1780270     2       G       G
SNP_A-1780271     0       C       C
SNP_A-1780272     2       T       T
SNP_A-1780274     1       A       G
SNP_A-1780277     0       C       C
SNP_A-1780278     2       T       T
SNP_A-1780283     2       T       T
SNP_A-1780285     2       C       C
SNP_A-1780286     0       A       A
SNP_A-1780287     0       C       C 
```

* * *

如果你有很多 Bfile，你可能会使用这样的东西：

```
import pandas as pd
import re

A = pd.read_csv('FileA', delimiter = r'\s+')
A = A.set_index(['ProbeID'])

BFiles = ['FileB1', 'FileB2', 'FileB3']
for i, bfile in enumerate(BFiles):
    B = pd.read_csv('FileB', delimiter = r'\s+')
    B = B.set_index(['ProbeID'])
    C = pd.concat([A,B], axis = 1)

    idx = C['call'] == 0
    C['alleleB'][idx]  = C['alleleA'][idx]
    idx = C['call'] == 2
    C['alleleA'][idx]  = C['alleleB'][idx]
    cfile = 'FileC{i}'.format(i = i)
    with open(cfile, 'w') as f:
        f.write(C[['call', 'alleleA', 'alleleB']]) 
```

更改`cfile`为适当的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T13:55:51.813

这是一个 R 解决方案。

```
my.data <- merge(df1, df2, by = "ProbeID")

# select rows based on call
zero <- my.data$call == 0
one <- my.data$call == 1
two <- my.data$call == 2

# subset rows based on previous condition and calculate genotype
my.data[zero, "genotype"] <- paste(my.data$alleleA[zero], my.data$alleleA[zero], sep = " ")
my.data[one, "genotype"] <- paste(my.data$alleleA[one], my.data$alleleB[one], sep = " ")
my.data[two, "genotype"] <- paste(my.data$alleleB[two], my.data$alleleB[two], sep = " ")

my.data[, c("ProbeID", "call", "genotype")]

        ProbeID call genotype
1  SNP_A-1780270    2      G G
2  SNP_A-1780271    0      C C
3  SNP_A-1780272    2      T T
4  SNP_A-1780274    1      A G
5  SNP_A-1780277    0      C C
6  SNP_A-1780278    2      T T
7  SNP_A-1780283    2      T T
8  SNP_A-1780285    2      C C
9  SNP_A-1780286    0      A A
10 SNP_A-1780287    0      C C 
```

# ruby-on-rails - Rails 资产管道中的动态 CSS，即时编译

> ID：13861203
> 
> 赞同：8
> 
> 时间：2012-12-13T13:48:04.017
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, less, asset-pipeline

我正在 Rails 3.2 中建立一个站点。我接触 Rails 或 Ruby 已经 3 年了，所以我对两者都生疏了，而且我最后一次使用 Rails 是 Rails 2.3。不用说，请原谅下面的任何“简单”问题。

# 这是规格

*   多租户 CMS/商店站点
    *   [http://company1.mywebsite.com](http://company1.mywebsite.com)
    *   [http://company2.mywebsite.com](http://company2.mywebsite.com)
    *   等等
*   每个“商店”（又名子域）都可以通过 CSS 自定义拥有自己的外观、感觉等
    *   自定义可以在应用程序内的 UI 中执行，允许用户更改 Bootstrap 的基本变量（即`@textColor`，`@bodyBackground`等）
*   我正在将`less-rails-bootstrap`gem 用于 Twitter Bootstrap 外观/感觉等。

# 以下是挑战

1.  我需要能够将 CSS 的变量动态输出到混入 Bootstrap 的文件中，以便提取变量以创建最终的 CSS
2.  当用户更改 CSS 的变量时，现有样式基本上无效。我需要重新编译完整的 CSS 并将其写回磁盘、内存流或其他我可以得到它的位置（记住这是使用`less`）
3.  我需要不同的 CSS 来为每个子域吐出。关于如何解决这个问题的任何建议？

# 让事情变得更加复杂……

...鉴于我基本上必须找到某种方法来即时编译 CSS，这意味着我必须包含 GEMS，而我通常不会在生产环境中。性能将非常重要。有没有办法隔离这个？一旦 CSS 失效并重新生成，我可以获取内容并将其写入磁盘或存储在某些 memcached/redis/etc 中。例如性能。

任何评论，即使只是为了给我指出一个大致的方向，也将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:03:05.543

这是我最终找到的解决方案：

*   我最终切换[到](https://github.com/thomas-mcdonald/bootstrap-sass)`bootstrap-sass`https://github.com/thomas-mcdonald/bootstrap-sass
*   对我的`application.rb`文件进行了以下更改，以确保无论`:asset`环境如何都始终包含该组：

    ```
    if defined?(Bundler)
        # If you precompile assets before deploying to production, use this line
        # Bundler.require(*Rails.groups(:assets => %w(development test)))
        # If you want your assets lazily compiled in production, use this line
        Bundler.require(:default, :assets, Rails.env)
    end 
    ```

*   [使用了在http://www.krautcomputing.com/blog/2012/03/27/how-to-compile-custom-sass-stylesheets-dynamically-](http://www.krautcomputing.com/blog/2012/03/27/how-to-compile-custom-sass-stylesheets-dynamically-during-runtime/)找到的 Kraut Computing 的 Manuel Meure（谢谢 Manuel！）提供的概念[运行时/](http://www.krautcomputing.com/blog/2012/03/27/how-to-compile-custom-sass-stylesheets-dynamically-during-runtime/) .

    *   我根据自己的需要做了一些调整，但 Manuel 阐述的核心概念是我编译过程的基础。
*   在我的模型中（我们称之为“**站点**”），我有一段代码如下所示：

    ```
    # .../app/models/site.rb
    ...

    BASE_STYLE = "
      @import \"compass/css3\";

      <ADDITIONAL_STYLES>

      @import \"bootstrap\";
      @import \"bootstrap-responsive\";
    ".freeze

    # Provides the SASS/CSS content that would 
    # be included into your base SASS content before compilation
    def sass_content
      "
      $bodyBackground: #{self.body_background};
      $textColor: #{self.text_color};
      " + self.css # Any additional CSS/SASS you would want to add
    end

    def compile_css(test_only = false, force_recompile = false)

      # SassCompiler is a modification of the information made available at the Kraut Computing link
      compiler = SassCompiler.new("#{self.id}/site.css", {:syntax => :scss, :output_dir => Rails.root.join('app', 'assets', 'sites')})

      # Bail if we're already compiled and we're not forcing recompile
      return if compiler.compiled? && !force_recompile && !test_only

      # The block here yields the content that will be rendered
      compiler.compile(test_only) {
        # take our base styles, slap in there some vars that we make available to be customized by the user
        # and then finally add in our css/scss that the user updated... concat those and use it as
        # our raw sass to compile
        BASE_STYLE.gsub(/<ADDITIONAL_STYLES>/, self.sass_content)
      }
    end 
    ```

我希望这有帮助。我知道它与原始帖子有偏差，但它有所偏差，因为这似乎是解决该问题的最可行的解决方案。

如果我没有回答您的具体问题，请随时发表评论，以便我尽可能扩展。

谢谢！

# git - 读取 git diff 输出

> ID：13861205
> 
> 赞同：5
> 
> 时间：2012-12-13T13:48:15.327
> 
> 标签：git, github, diff

我刚刚开始学习如何使用 git 并在下面的文件上运行 git diff - 我对你如何阅读输出有点困惑 -

根据我目前的理解，以下是关于file01和file02的工作目录和索引之间的差异。有人能用英语解释一下你是如何阅读这部分输出的吗-->`@@ -1,4 +1 @@`

谢谢你的帮助

```
diff --git a/file01 b/file01
index cc17fa4..d0a432b 100644
--- a/file01
+++ b/file01
@@ -1,4 +1 @@
-datafiles
-file01
-file02
-file03
+This is a change
diff --git a/file02 b/file02
index e69de29..552c22e 100644
--- a/file02
+++ b/file02
@@ -0,0 +1 @@
+and this is another change 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T13:51:14.257

`@@ -1,4 +1 @@`手段：

`-1,4`：从第 1 行开始，这里有 4 行。

`+1`这是新版本的 1 行。

# javascript - 在最近的可点击父级上触发点击事件

> ID：13861207
> 
> 赞同：0
> 
> 时间：2012-12-13T13:48:23.673
> 
> 标签：javascript, gwt, dom, ui-automation, zombie.js

我必须重构一个现有的 GWT web 项目，没有现有的测试用例。在开始之前，我想为常见操作创建测试用例。我正在尝试用zombie.js 编写一个测试用例。但我的问题更多的是一般的 javascript 挑战。看看下面的例子。我需要一个模拟点击包含文本“点击我！”的 UI 元素的测试用例。但是单击处理程序之前已分配给某个元素，例如 c11 或 c1。知道如何实现吗？

```
<div id="c1">
    <div id="c11">
        <div id="c12"></div>
        <div id="c13"></div>
        <div id="c14"><nobr>Click me!</nobr></div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:14:41.543

不确定zombie.js 是在 GWT 应用程序中进行单元测试或集成测试的方法。避免使用 js 级别的东西的原因是，如果 GWT Widget 使用应用程序 DOM 层中的更改可能是不确定的，并且基于 js 的单元测试的东西变得不稳定。

**GWT 单元测试**方法记录在这里 - [https://developers.google.com/web-toolkit/doc/latest/tutorial/JUnit](https://developers.google.com/web-toolkit/doc/latest/tutorial/JUnit)

**GWT 应用程序的测试方法**- [https://developers.google.com/web-toolkit/articles/testing_methodologies_using_gwt](https://developers.google.com/web-toolkit/articles/testing_methodologies_using_gwt)

一些额外的资源 - [http://code.google.com/p/gwt-test-utils/wiki/SimpleUnitTest](http://code.google.com/p/gwt-test-utils/wiki/SimpleUnitTest)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:53:08.210

点击事件应该会自动冒泡，从而触发您的处理程序。有关如何手动触发点击事件的信息，请参阅此答案：[https ://stackoverflow.com/a/2490876/315482](https://stackoverflow.com/a/2490876/315482)

# android - 从 Marker 打开 URL，Android Google Maps V2

> ID：13861210
> 
> 赞同：4
> 
> 时间：2012-12-13T13:48:38.613
> 
> 标签：android, google-maps, google-maps-markers

我有一个带有 HTML 内容的标记，其中实际上有 2 个锚点 URL，我已经在 GoogleMap 上绘制了它，正如演示库所解释的那样。

问题是我如何点击标记内的 url，Google Maps API V2 只让我设置 OnInfoWindowClickListener 我只收到标记但没有办法获得对 URL 的实际点击。

使用膨胀视图的侦听器实现 InfoWindowsAdapter.getInfoWindow(Marker) 方法只是被忽略（从未调用过侦听器部分，看起来它只获取整个地球，而不是 URL）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T16:01:31.487

> 问题是我如何点击标记内的网址

根据[文档](https://developers.google.com/maps/documentation/android/marker)，您不能：

> 此外，信息窗口不会尊重任何普通视图的典型交互性，例如触摸或手势事件。但是，您可以在整个信息窗口上收听通用单击事件，如下节所述。

# python - 为什么捕获 StopIteration 时无法跳出循环？

> ID：13861214
> 
> 赞同：1
> 
> 时间：2012-12-13T13:48:43.937
> 
> 标签：python, exception, for-loop

我需要捕获引发的异常，`next(it)`因此在这种情况下我不能使用常规`for`循环。所以我写了这段代码：

```
it = iter(xrange(5))
while True:
    try:
        num = it.next()
        print(num)
    except Exception as e:
        print(e) # log and ignore
    except StopIteration:
        break
print('finished') 
```

这不起作用，在数字用完后我得到一个无限循环。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:48:43.937

事实证明，`StopIteration`它实际上是 的子类`Exception`，而不仅仅是另一个可抛出的类。因此，`StopIteration`处理程序从未被调用，因为`StopIteration`它已经由 for 处理`Exception`。我只需要把`StopIteration`处理程序放在上面：

```
it = iter(xrange(5))
while True:
    try:
        num = it.next()
        print(num)
    except StopIteration:
        break
    except Exception as e:
        print(e) # log and ignore
print('finished') 
```

# php - 登录Joomla时哪一段php代码加密密码？

> ID：13861215
> 
> 赞同：3
> 
> 时间：2012-12-13T13:48:43.657
> 
> 标签：php, encryption, joomla

如果我理解正确，在用户登录期间，Joomla 会使用盐将输入的明文密码加密为 md5 散列，然后将其与已存储在 db 中的散列进行比较。我只是找不到进行此类比较的 joomla 代码部分。在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:53:53.177

根据[此链接](http://docs.joomla.org/API15%3aJUser/bind)，您要查找的内容在`libraries/joomla/user/user.php`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T14:00:27.177

这是代码部分

```
 jimport('joomla.user.helper');
             $salt = JUserHelper::genRandomPassword(32);
             $crypt = JUserHelper::getCryptedPassword($password_choose, $salt);
             $password = $crypt.':'.$salt; 
```

[几乎一样](https://stackoverflow.com/questions/10428126/joomla-password-encryption/10428705#10428705)

# javascript - 使用struts 2迭代器迭代后如何为表中的元素设置唯一ID？

> ID：13861218
> 
> 赞同：0
> 
> 时间：2012-12-13T13:48:45.403
> 
> 标签：javascript, struts2

我正在使用 struts 迭代器标记迭代列表，如下所示。

```
<s:iterator var="listItem" value="userMasterActivityDTOList" status="userStatus">
<tr>
    <td width="10%"><s:textfield  name="regIns"  value="%{#listItem.regIn}" /></td>
    <td width="10%"><s:textfield name="regOuts"  value="%{#listItem.regOut}" /></td>
    <td width="10%"><s:textfield name="regDiffs"  value=""/></td> 
        </tr>
</s:iterator> 
```

迭代后，我希望每行的 regIns 和 regOuts 文本字段的值用于计算 regDiff。问题是我无法为每行中的这些文本字段设置唯一 ID，以便我可以在 javascript 中识别它们。

如何为每个行元素设置唯一 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:53:18.543

您可以使用迭代器状态的`index`or属性：`count`

对于您的代码：

```
<s:iterator var="listItem" value="userMasterActivityDTOList" status="userStatus">
<tr>
    <td width="10%"><s:textfield  name="regIns" id="in%{#userStatus.count}" value="%{#listItem.regIn}" /></td>
    <td width="10%"><s:textfield name="regOuts" id="out%{#userStatus.count}" value="%{#listItem.regOut}" /></td>
    <td width="10%"><s:textfield name="regDiffs" id="diff%{#userStatus.count}" value="" /></td> 
        </tr>
</s:iterator> 
```

我希望我在形式上是正确的，自从我做 JSP 以来已经有一段时间了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:40:15.207

使用迭代器的状态 COUNT 或 INDEX 方法。

计数从 1 开始，索引从 0 开始。

请参考：[http ://struts.apache.org/2.3.4/struts2-core/apidocs/org/apache/struts2/views/jsp/IteratorStatus.html#getCount%28%29](http://struts.apache.org/2.3.4/struts2-core/apidocs/org/apache/struts2/views/jsp/IteratorStatus.html#getCount%28%29)

```
 <s:iterator var="listItem" value="userMasterActivityDTOList" 
             status="userStatus">
    <tr>
        <td width="10%">
           <s:textfield  name="regIns" 
                  id="in_%{#userStatus.index}" value="%{#listItem.regIn}" />
        </td>
        <td width="10%">
           <s:textfield name="regOuts" 
                  id="out_%{#userStatus.index}" value="%{#listItem.regOut}" />
        </td>
        <td width="10%">
           <s:textfield name="regDiffs" 
                  id="diff_%{#userStatus.index}" value="" />
        </td> 
     </tr>
  </s:iterator> 
```

# nodes - 从 sge 下的 qsub 命令中排除节点

> ID：13861220
> 
> 赞同：19
> 
> 时间：2012-12-13T13:48:54.763
> 
> 标签：nodes, qsub, sungridengine

我有 200 多个工作需要提交到 sge 集群。我会将它们提交到两个问题中。其中一个问题有一台我不想提交作业的机器。我怎样才能排除那台机器？我发现唯一可能有用的是（假设 q1 可用的三个有效节点和 q2 的所有可用节点都是有效的）：

```
qsub -q q1.q@n1 q1.q@n2 q1.q@n3 q2.q 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-10-17T07:57:22.360

假设您不想在其上运行它称为 n4 然后将以下内容添加到您的脚本中应该可以工作。

```
#$ -l h=!n4 
```

如果您将 -l 选项添加到 qsub 命令行而不是将其嵌入到提交的脚本中，大多数 shell 将需要引用感叹号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T17:45:25.077

我为此找到的最佳方法是在要允许执行的节点上设置自定义资源，然后在提交作业时需要该资源。

在 qmon 中，转到“复杂”配置并添加一个新属性。将名称设置为“my_allowed”之类的名称，将快捷方式设置为“m_a”之类的名称，将类型设置为 BOOL，将关系设置为 ==，requestable 设置为 Yes，consumable 设置为 No，然后“添加”它。提交对复杂配置的更改。

从命令行执行下一步可能更容易，但您也可以在 qmon 中执行此操作。您需要将您的消耗品添加到您将允许您的工作在其上运行的每个主机。在 qmon 中，你可以进入主机配置，选择执行主机，依次打开每个主机，点击 consumables/fixed attributes 选项卡，添加刚才配置的新复合体，值为“True”。从命令行，您可以使用“qconf -sel”获取执行主机列表。此列表适用于传递给循环并找出您不希望包含的主机。做这样的事情：

```
qconf -sel | grep -v host_to_exclude | while read host; do
    EDITOR="ed" qconf -me $h <<EOL
/complex_values/s/$/,my_test=True/
w
q
EOL
done 
```

这允许您以编程方式编辑主机（qconf 通常不允许，因为它想为您启动编辑器）。它通过将编辑器设置为“ed”来做到这一点（您必须确保安装了 ed 编辑器...尝试先手动运行它...输入“q”退出）。ed 在它的标准输入上获取编辑命令列表，所以我们给它三个命令。第一个编辑带有 complex_values 的行以包含 my_test 值。第二个写出临时文件，第三个退出 ed。

完成此操作后，使用需要新综合体的限制选项提交您的作业：

```
qsub -q whatever -l my_test=True my_prog.sh 
```

-l 选项设置了一个限制，my_test=True 表示该作业只能在具有复杂 my_test 值为 True 的主机上运行。由于复合体不是消耗性的，它仍然可以在每台主机上运行任意数量的作业（直到主机的插槽限制），但它将避免任何未将 my_test 复合体设置为 True 的主机.

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-12-13T15:23:49.163

有一个很好的绕过方法。

生成一个简单的 bash 文件：

```
#!/bin/bash
sleep 6000 #replace 6000 with any long period of time that will be enough to submit your jobs 
```

将此作业提交到您希望排除的节点，直到它们完全占据它。

瞧，您的节点已排除。

# c# - 使用导航属性查询时出错？

> ID：13861224
> 
> 赞同：1
> 
> 时间：2012-12-13T13:49:12.207
> 
> 标签：c#, entity-framework

我有以下实体类：

```
using System;
using System.Collections.Generic;
using Facebook.Business.Domain.Accounts;

namespace Business.Domain.Posts
{
    /// <summary>
    /// This class defines a post.
    /// </summary>
    public class Post : Entity<Post>
    {
        #region Fields

        private UserAccount _author;
        private UserAccount _owner;
        private DateTime _date;
        private string _text;
        private IList<Comment> _comments; 

        #endregion

        #region Ctors

        protected Post()
        {
        }

        public Post(UserAccount author,
                    UserAccount owner,
                    DateTime date,
                    string text)
        {
            _author = author;
            _owner = owner;
            _date = date;
            _text = text;
            _comments = new List<Comment>();
        }

        #endregion

        /// <summary>
        /// Gets or sets the account that writes and sends the current post.
        /// </summary>
        public virtual UserAccount Author
        {
            get { return _author; }
            protected set { _author = value; }
        }

        /// <summary>
        /// Gets or sets the datetime of the current post.
        /// </summary>
        public virtual DateTime Date
        {
            get { return _date; }
            protected set { _date = value; }
        }

        /// <summary>
        /// Gets or sets the text of the current post.
        /// </summary>
        public virtual string Text
        {
            get { return _text; }
            protected set { _text = value; }
        }

        /// <summary>
        /// Gets or sets the user that receives the current post.
        /// </summary>
        public virtual UserAccount Owner
        {
            get { return _owner; }
            protected set { _owner = value; }
        }

        /// <summary>
        /// Gets or sets the comments for the current post.
        /// </summary>
        public virtual IList<Comment> Comments
        {
            get { return _comments; }
            protected set { _comments = value; }
        }

        public void Add(Comment comment)
        {
            _comments.Add(comment);
        }

        #region Implementation of ICommentable

        IEnumerable<Comment> ICommentable.Comments { get { return Comments; } }

        #endregion
    }
} 
```

UserAccount 类对 Post 类一无所知，UserAccount 也是一个实体。

那么我需要在各自的存储库类中实现这个方法：

```
/// <summary>
/// Retrieve the posts that were posted by a given account: <paramrefname="author"/>
/// </summary>
/// <param name="author">An account.</param>
/// <returns>The posts that were posted by <paramref name="author"/></returns>
public IQueryable<Post> FindPostsFrom(UserAccount author)
{
    ContractUtil.NotNull(author);

    return Set.Where(post => post.Author.Equals(author));
} 
```

但是当我运行测试时，我得到以下错误：

> System.NotSupportedException：无法创建类型为“Facebook.Business.Domain.Accounts.UserAccount”的常量值。此上下文仅支持原始类型或枚举类型。

...和堆栈...

> 在 System.Data.Objects.ELinq.ExpressionConverter.ConstantTranslator.TypedTranslate(ExpressionConverter parent, ConstantExpression linq) 在 System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq) 在 System.Data.Objects.ELinq.ExpressionConverter.EqualsTranslator。 TypedTranslate(ExpressionConverter parent, BinaryExpression linq) at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq) at System.Data.Objects.ELinq.ExpressionConverter.TranslateLambda(LambdaExpression lambda, DbExpression input) at System.Data.Objects。 ELinq.ExpressionConverter.MethodCallTranslator.OneLambdaTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, ref DbExpression source, ref DbExpressionBinding sourceBinding, ref DbExpression lambda) 在 System.Data.Objects.ELinq。ExpressionConverter.MethodCallTranslator.OneLambdaTranslator.Translate(ExpressionConverter parent, MethodCallExpression call) at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq) at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq ) 在 System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq) 在 System.Data 的 System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.UnarySequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call)。 Objects.ELinq.ExpressionConverter.Convert() 在 System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan(Nullable在 System.Data.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq) 在 System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq) 在 System.Data.Translate(ExpressionConverter parent, MethodCallExpression call)。 Objects.ELinq.ExpressionConverter.MethodCallTranslator.UnarySequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call) at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq) 在 System.Data.Objects.ELinq.ExpressionConverter。在 System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan (Nullable) 的 Convert()在 System.Data.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq) 在 System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq) 在 System.Data.Translate(ExpressionConverter parent, MethodCallExpression call)。 Objects.ELinq.ExpressionConverter.MethodCallTranslator.UnarySequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call) at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq) 在 System.Data.Objects.ELinq.ExpressionConverter。在 System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan (Nullable) 的 Convert()ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq) at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq) at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.UnarySequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call ) 在 System.Data.Objects.ELinq.ExpressionConverter.Convert() 在 System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan(Nullable) 在 System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq)ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq) at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq) at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.UnarySequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call ) 在 System.Data.Objects.ELinq.ExpressionConverter.Convert() 在 System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan(Nullable) 在 System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq)Objects.ELinq.ExpressionConverter.MethodCallTranslator.UnarySequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call) at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq) 在 System.Data.Objects.ELinq.ExpressionConverter。在 System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan (Nullable) 的 Convert()Objects.ELinq.ExpressionConverter.MethodCallTranslator.UnarySequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call) at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq) 在 System.Data.Objects.ELinq.ExpressionConverter。在 System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan (Nullable) 的 Convert()`1 forMergeOption) at System.Data.Objects.ObjectQuery`1.GetResults(Nullable `1 forMergeOption) at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable.GetEnumerator() at System.Linq.Enumerable.First(IEnumerable `1 source) at System.Linq.Queryable.First(IQueryable`1 source) at Data.EntityFramework.Tests.PostRepositoryTests.FindPostsFrom_FindingAPostGivenAnAuthor_ShouldRetrieveIt() 在 PostRepositoryTests.cs：第 136 行

到目前为止，谁能解释一下这里发生了什么？似乎是我不应该使用导航属性来查询。

谁能给我一个替代解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:48:59.250

在实体框架中，查询应始终在谓词中使用原始属性。所以你可以做

```
Set.Where(post => post.Author.Id == author.Id); 
```

或者（正如 dutzu 建议的那样）暴露`AuthorId`为`Post`. 如果你这样做，你必须告诉 EF`AuthorId`并且`Author`它们都是同一个外键的一部分。这取决于您使用的 API（ObjectContext 或 DbContext）如何做到这一点。

EF 如此严格的一个原因（可能还有更多）是它不能对值类型或类的相等性做出任何假设。由于 EF 允许使用 POCO，`Equals()`否则`==`操作员将不会自动评估键值的相等性。POCO 必须明确实施`IEquatable`以确保密钥平等。另一方面，原始值的相等性总是被定义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:00:00.233

因为它们是相关实体并且关系是一对多的（一个作者有很多帖子），这意味着每个帖子都有一个保留 authorId 值的字段。

您可以重写查询以搜索 post.authorId = author.Id 的帖子。

# c# - 使用 fluent nhibernate 配置自动收缩 sqlite 数据库文件

> ID：13861225
> 
> 赞同：1
> 
> 时间：2012-12-13T13:49:13.580
> 
> 标签：c#, sqlite, fluent-nhibernate

我在将 sqlite 数据库文件设置为自动收缩时遇到问题。我用来配置数据库的代码是：

```
Fluently.Configure()
            .Database(SQLiteConfiguration.Standard.ConnectionString("PRAGMA auto_vacuum=FULL").UsingFile("file.sqlite"))
            .Mappings(m => m.FluentMappings.AddFromAssemblyOf<Application.NHibernateSessionManager>())
            .ExposeConfiguration(BuildSchema)
            .BuildSessionFactory(); 
```

创建 ~15000 条记录后，数据库文件大小约为 1MB。当我删除所有内容时，数据库文件仍然是~1MB。

如何使用 fluent nhibernate 配置 sqlite 以使用 pragma "auto_vacuum"？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T16:39:04.847

我不确定这是否适用于 auto_vacuum，但是对于其他 pragma，我“通常”配置 db，然后将 pragma 作为更新执行，例如：

```
SessionManager.CurrentSession.CreateSQLQuery(String.Format("PRAGMA user_version = {0}", version)).ExecuteUpdate(); 
```

这是使用 FluentNHibernate 初始化的，如下所示：

```
Fluently.Configure().Database(SQLiteConfiguration.Standard.UsingFile(dbPath)... 
```

# php - 使用 wordpress 重写规则时忽略特定页面

> ID：13861228
> 
> 赞同：1
> 
> 时间：2012-12-13T13:49:21.707
> 
> 标签：php, wordpress, .htaccess, mod-rewrite, url-rewriting

我想知道如何告诉 wordpress 重写以忽略特定页面，例如：`index.php?p=15` 我尝试了几件事，例如：

```
RewriteCond %{REQUEST_FILENAME}!^/index.php?p=15 !-d 
```

或者尝试在 wordpress 规则等之前指定规则，但到目前为止还没有任何结果。

关于如何完成这项工作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:04:06.527

我试过下面的代码，它似乎工作正常：

```
RewriteCond %{REQUEST_URI}:::%{QUERY_STRING} !test\.php:::p=15$
RewriteRule . /index.php [L] 
```

一切都重定向到`/index.php`除了`test.php?p=15`.

# mysql - 计算多个连接

> ID：13861229
> 
> 赞同：0
> 
> 时间：2012-12-13T13:49:23.143
> 
> 标签：mysql, join

我需要在匹配**三 (3) 位或更多朋友的比赛中**获取已进行**实时签到**(checkins.ctype='live')**的用户 ID 的不同列表**。

 ****这是数据库设计：

![在此处输入图像描述](../Images/64ed9f2c9fc010d4c6bd8bff007981cf.png)

我成功检索了超过 3 个实时签到用户的匹配列表，但我需要确定他们是否是我的朋友。

到目前为止我的代码：

```
选择不同的
    f1.id
从
    粉丝f1

加入签到 c
开 c.fanuser_id = f1.id

在哪里
c.ctype = '直播'
和
c.match_id IN (
                                选择
                                    c1.match_id
                                从
                                    签到 c1
                                在哪里
                                    c1.ctype = '直播'
                                通过...分组
                                    c1.match_id
                                拥有
                                    计数（*）> 3
                            )

...并且他有 3 个或 3 个以上的朋友在同一场比赛中签到 (c.match_id)

```

任何想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:43:32.090

What about joining checkins to fanuser_friends on fanuser_id, then further join to checkins on friend_id, finding the number of relevant friends by grouping by fanuser_id and match_id, and then limiting the result on the number of friends?

I.e.

```
SELECT DISTINCT c.fanuser_id
FROM checkins c 
INNER JOIN fanuser_friends f on 
f.fanuser_id = c.fanuser_id 
INNER JOIN checkins c2
on c2.fanuser_id = f.friend_id
AND c2.match_id = c.match_id
WHERE c.ctype = 'live'
AND c2.ctype = 'live'
GROUP BY c.fanuser_id, c.match_id
HAVING COUNT(*) >= 3; 
```****

# css - 在 CSS 中隐藏父元素的内容而不隐藏子元素

> ID：13861230
> 
> 赞同：2
> 
> 时间：2012-12-13T13:49:24.327
> 
> 标签：css

我有以下 HTML：

```
<span class="parent">
    Hello world
    <a href="#">Link 1</a>
    <a href="#">Link 2</a>
</span> 
```

游戏规则：

*   我想使用 CSS 删除“Hello world”字符串
*   标签`<a>`应该仍然可见
*   我无法触摸 HTML 代码
*   没有 javascript

所以解决方案就像设置`display:none`一个`<span>`围绕“Hello world”字符串的元素。问题是没有这样的`<span>`，我无法创建一个。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-13T13:53:32.190

`display:none;`总是隐藏孩子并覆盖他们的`display`属性。

您可以尝试`visibility`改用：

```
.parent { visibility: hidden;}
.parent a { visibility: visible;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T13:54:01.313

这是不可能的。这就像你手里拿着一面旗帜，你希望当你坐在一个封闭的盒子里时，仍然有人能看到你手中的旗帜。实现该目标的唯一方法是将孩子从父母身边带走并将他们附加到其他地方。那将是dom-manipulation（javascript）。

编辑：在对可见性属性的技术定义和我想通的行为进行深入研究之后，这个答案是不正确的。 **jfrej**给出了正确的答案。

# extjs - 在 Sencha Touch 中访问静态属性

> ID：13861231
> 
> 赞同：6
> 
> 时间：2012-12-13T13:49:33.560
> 
> 标签：extjs, sencha-touch-2

如何在类中创建静态字段，然后在 Sencha Touch 2 中从该类外部访问它们？

例如，我创建了一个带有单个静态的简单单例：

```
Ext.define('App.util.Config', {
    singleton: true,
    statics: {
        url: {
            USER: 'http://localhost:3436/api/user'
        }
    },
    config: { },
    constructor: function (config) {
        this.initConfig(config);
        this.callParent([config]);
    }
}); 
```

我无法使用**App.util.Config.url.USER**但使用**App.util.Config.self.url.USER**访问 USER 字段。查看 Sencha 文档上的示例，看来我应该能够以前一种方式访问​​该字段：

[请参阅此链接中的静态部分以及它们如何访问 Computer.InstanceCount 字段](http://docs.sencha.com/touch/2-1/#!/guide/class_system-section-3)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T11:12:39.753

我想这就是你想要的

```
Ext.define('App.util.Config', {
    singleton: true,
    statics: {
        url: {
            USER: 'http://localhost:3436/api/user'
        }
    },
    config: { },
    constructor: function (config) {
        var user=this.self.url.User;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-10T17:29:06.687

我意识到这是一个古老的问题，但是在寻找其他东西时我偶然发现了它。

我认为问题在于使用`singleton:true`. 使用它时，一切都是静态的，无需将属性显式定义为静态。

以下应该是正确的用法：

```
Ext.define('App.util.Config', {
    singleton: true,
    url: {
        USER: 'http://localhost:3436/api/user'
    },
    config: { },
    constructor: function (config) {
        this.initConfig(config);
        this.callParent([config]);
    }
}); 
```

# mysql - 空间查询不显示结果

> ID：13861233
> 
> 赞同：0
> 
> 时间：2012-12-13T13:49:36.263
> 
> 标签：mysql, sql, spatial

我正在使用空间查询来查找给定纬度半径内的一些地方。并且很长。

```
select *, (3959 * ACOS(COS(radians(1.0)) * COS(radians(`lat`)) * COS(radians(`lng`) - radians(1.0)) + sin(radians(1.0)) * sin( radians(`lat`)))) AS distance
FROM table_name
HAVING distance <= 5
ORDER BY distance 
```

这不返回任何值。查询有问题吗？

TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:21:53.473

我怀疑问题是你没有`GROUP BY`条款。试试这个：

```
SELECT *
FROM (select *, (3959 * ACOS(COS(radians(1.0)) * COS(radians(`lat`)) * COS(radians(`lng`) - radians(1.0)) + sin(radians(1.0)) * sin( radians(`lat`)))) AS distance
      FROM table_name
     ) t
WHERE distance <= 5
ORDER BY distance 
```

如果您使用的是 MySQL，文档明确警告不要使用`HAVING`(http://dev.mysql.com/doc/refman/5.0/en/select.html)。我认为查询不会在任何其他查询引擎中解析，所以我猜你正在使用 MySQL（如果它在子句中，SQL 标准将要求它在`DISTINCT`子句中）。`GROUP BY``HAVING`

# c++ - 将类转换为字符串

> ID：13861235
> 
> 赞同：3
> 
> 时间：2012-12-13T13:49:47.637
> 
> 标签：c++

这源自 Herb Sutter 的 gotw3 (http://www.gotw.ca/gotw/003.htm)。

具有以下类和`FindAddr`功能...

```
using std::string;
using std::list;

class Employee
{
public:
    Employee(const string& n, const string& a) : name(n), addr(a) { }
    string name;
    string addr;
};

string FindAddr(const list<Employee>& l, const string& name)
{
    string addr;
    list<Employee>::const_iterator i = find(l.begin(), l.end(), name);

    if (i != l.end()) {
        addr = (*i).addr;
    }
    return addr;
} 
```

我收到编译错误，因为 Employee 类没有转换为字符串。我可以看到这样的转换不一定是明智的，但是为了练习的目的，我添加了一个幼稚的转换：

```
string::string(const Employee& e)
{
    return e.name;
} 
```

这给了我一个错误：

```
gotw3.cc:17:9: error: C++ requires a type specifier for all declarations
string::string(const Employee& e)
~~~~~~  ^ 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-13T14:03:23.690

两件事：首先，您不能在不修改类定义的情况下添加到现有类。如果您有一个想要转换为`std::string`（或转换为`double`或其他）的类，您应该定义一个转换运算符：在您的情况下：

```
class Employee
{
    //  ...
    operator std::string() const
    {
        return name;  //  Or whatever...
    }
}; 
```

其次，您的解决方案不是提供隐式转换，而是使用`std::find_if`适当的匹配器。在 C++11 中，这可以通过使用 lambda 来完成，但通常（以及在旧版本的 C++ 中），您始终可以定义函数类型。对于这样的情况，类具有自然的“键”，我可能会添加一些成员类，如下所示：

```
class Match : std::unary_function<Employee, bool>
{
    std::string myName;
public:
    explicit Match( std::string const& name )
        : myName( name )
    {
    }
    bool operator()( Employee const& toBeMatched ) const
    {
        return toBeMatched.name == myName;
    }
}; 
```

定义排序关系或键相等的其他功能类型也可能是有序的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T14:01:10.860

没有类字符串，有类模板std::basic_string。

您永远不应该修改 std 命名空间中的任何内容。

为了将类型转换为字符串，您可以添加

`Employee::operator std::string()`

或定义一个

`std::ostream& operator<<( const Employee& em, std::ostream& os );`- 这样您的类型将与`lexical_cast`.

..但你真正需要的是`std::find_if()`.

# php - 如何按 Propel 中另一个表中的值分组

> ID：13861242
> 
> 赞同：0
> 
> 时间：2012-12-13T13:50:03.377
> 
> 标签：php, propel

我有两张桌子。一张表有类别字段和一些来自数据仓库的聚合数据。第二个表有custom_category，可以通过对类别进行分组在应用程序中创建。例如：

自定义类别 ID 1：

1,2,7,33, 120, ... (category_id)

自定义类别 ID 2：

5,6,9,11,12,13,14...

……

而且我需要显示这些 custom_categories 的统计信息，因此我需要从一个表中获取数据，这些数据按另一个表中的值分组。如何使用推进来实现它？

可能你们中的一些人会建议创建不同的模型，其中有一个包含 custom_category 聚合数据的表。但是做不到！使用来自仓库的聚合数据创建表至少需要一个小时。创建自定义类别并为它们显示统计信息应该在应用程序中完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:46:09.557

您在这里想要的是`use`功能。假设您已经在架构中的这些表之间建立了正确的关系：

```
table1Query::create()
    ->joinWithTable2()
    ->useTable2Query()
        ->groupByTable2Column()
    ->endUse() 
```

抱歉，如果我误解了这个问题

# php - 将整个表加载到多维数组中

> ID：13861243
> 
> 赞同：0
> 
> 时间：2012-12-13T13:50:04.307
> 
> 标签：php, mysql

我有一张桌子，例如 col A col B col C col D

```
while ($result = mysql_fetch_assoc($query)) {
    // code here to echo all data you need 
    // for example echo $result['colA'], $result['colB'] 
} 
```

我需要的是以下内容：

```
while($this->result = mysql_fetch_assoc($this->query))   
 { 
    $i = 1; 
    foreach ($this->result as $k => $v) 
    {   
        $this->newarray = array ($i => ($this->result[$k]=>$this->result[$v], $this->result[$k]=>$this->result[$v], $this->result[$k]=>$this->result[$v], ....);
    }   
 $i++; 
 } 
```

所以我可以得到的最终数组是这样的：

```
$newarray = array( "first_row" =>   
   ("$result[colA]" => "$result[value]",
    "$result[colB]" => "$result[value]", 
    "$result[colC]" => "$result[value]"); 
```

所以我可以使用一次全部返回整个数组，我可以使用它：

```
echo $newarray[0]['colA'];  
echo $newarray[3]['colA']; 
```

我希望我能很好地解释我的问题。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:13:13.757

如果您使用 PDO 进行查询，您可以使用结果集元数据来获取列信息。然后循环这个来创建你的数组。

[http://php.net/manual/en/pdostatement.getcolumnmeta.php](http://php.net/manual/en/pdostatement.getcolumnmeta.php)

# asp.net-mvc - MvcSiteMapProvider 在 URL 中使用 - 和 _ 会导致问题。

> ID：13861245
> 
> 赞同：1
> 
> 时间：2012-12-13T13:50:11.943
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我们将 MvcSiteMapProvider 用于面包屑，我发现了一个我不知道如何解决的问题。我们使用了一个修复程序，以便我们可以在单词之间显示“-”而不是 URL 中的“_”，以获得用户体验。例子：

domain.com/page-with-fix

这就是我们的 URL 的显示方式。当您点击该 URL 时，MvcSiteMapProvider 不会将这些视为页面，因为它使用我理解的传统路由设置。{Controller} / {Action} 所以它正在寻找一个名为 page-with-fix 的控制器，但在我们的解决方案中它将是 page_with_fix。有没有办法扩展 MvcSiteMapProvider 以便它可以使用我的 HyphenatedRouteHandler 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:02:29.743

我找到了解决方案。在节点上的 Mvc.sitemap xml 文件中，您可以使用 url="" 属性来修复路由更改。示例： url="page-with-dash" 控制器="page_with_dash"

# vb.net - 在VB中对数组进行排序而不使用排序函数

> ID：13861249
> 
> 赞同：0
> 
> 时间：2012-12-13T13:50:18.130
> 
> 标签：vb.net

我正在开发一个排序程序，它将输入输入到一个数组中。我已经制作了最小值、最大值和平均值。现在我需要进行中位数、众数和排序（从最大值到最小值，从最小值到最大值）。

这是我得到的排序代码[更新的新代码]

```
 RichTextBox1.Text = RichTextBox1.Text.Replace(" ", ",")

    marks = RichTextBox1.Text.Split(New String() {","}, StringSplitOptions.RemoveEmptyEntries)
    Label3.Text = Nothing

    Dim z As Integer = marks.Length - 1
    Dim y As Integer
    Dim TEMP As Integer

    For X = 1 To z
        For y = 1 To (z - 1)

            If marks(y) > marks(y + 1) Then
                TEMP = marks(y)
                marks(y) = marks(y + 1)
                marks(y + 1) = TEMP

            End If
            Label3.Text = Label3.Text & vbCrLf & marks(y)
        Next y

    Next X 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T22:22:07.363

要对多维数组进行排序，您可以使用与对单维数组进行排序完全相同的过程。

你循环遍历数组，如果两个相邻的成员的顺序错误，那么你将它们左右交换。

想象一下，您有一个多维数组，例如

```
Dim Array(12, 4) String 
```

因此，例如，假设您想按最后一列对数组进行排序。

```
For index1 = 0 to Array.length - 1
For index2 = 0 to Array.length - 2
If Array(index2, 4) > Array(index2 + 1, 4) Then

// this sorts the last column

Temp4 = Array(index2, 4)
Array(index2, 4) = Array(index2 + 1, 4) 
Array(index2 + 1, 4) = Temp4

// and we repeat this swopping pattern for each of the other columns, so they are all sorted in  the same way

Temp3 = Array(index2, 3)
Array(index2, 3) = Array(index2 + 1, 3) 
Array(index2 + 1, 3) = Temp3

Temp2 = Array(index2, 2)
Array(index2, 2) = Array(index2 + 1, 2) 
Array(index2 + 1, 2) = Temp2

Temp1 = Array(index2, 1)
Array(index2, 1) = Array(index2 + 1, 1) 
Array(index2 + 1, 1) = Temp1

Temp0 = Array(index2, 0)
Array(index2, 0) = Array(index2 + 1, 0) 
Array(index2 + 1, 0) = Temp0

Next
Next 
```

所以现在所有的列都按最后一列排序。

您可能想知道如果 4 列是字符串而一列是数字，如何排序，并假设您想按数字列排序。

你可以这样做

```
For index1 = 0 to Array.length - 1
For index2 = 0 to Array.length - 2
If CSng(Array(index2, 4)) > CSng(Array(index2 + 1, 4)) Then

// this sorts the last column

Temp4 = Array(index2, 4)
Array(index2, 4) = Array(index2 + 1, 4) 
Array(index2 + 1, 4) = Temp4

// and we repeat this swopping pattern for each of the other columns, so they are all sorted in the same way

Temp3 = Array(index2, 3)
Array(index2, 3) = Array(index2 + 1, 3) 
Array(index2 + 1, 3) = Temp3

Temp2 = Array(index2, 2)
Array(index2, 2) = Array(index2 + 1, 2) 
Array(index2 + 1, 2) = Temp2

Temp1 = Array(index2, 1)
Array(index2, 1) = Array(index2 + 1, 1) 
Array(index2 + 1, 1) = Temp1

Temp0 = Array(index2, 0)
Array(index2, 0) = Array(index2 + 1, 0) 
Array(index2 + 1, 0) = Temp0

Next
Next 
```

我所做的只是将 Datatype 转换为从 String 到 Single 的最后一列，然后像以前一样比较相邻的值。

所以这是对多维数组进行排序的一种非常基本的方法，它也适用于包含字符串和数字的混合数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:26:21.323

**这是从维基百科**转换为 VB.net的选择排序算法

```
Public Shared Function Sort(ByVal a As Int32()) As Int32()
    Dim n As Int32 = a.Length ' a(n-1) is the last element
    Dim i As Integer, j As Integer
    Dim iMin As Integer

    ' Advance the position through the entire array 
    ' we could do "from j = 0 to n-2" (that is "for j < n-1")
    ' because single element is also min element
    For j = 0 To n - 2
        ' Find the min element in the unsorted a[j .. n-1] 

        ' Assume the min is the first element 
        iMin = j
        ' Test against elements after j to find the smallest 
        For i = j + 1 To n - 1
            ' If this element is less, then it is the new minimum 
            If a(i) < a(iMin) Then
                ' Found new minimum, remember its index 
                iMin = i
            End If
        Next

        ' iMin is the index of the minimum element,
        ' swap it with the current position 
        If iMin <> j Then
            Dim tmp As Int32 = a(j)
            a(j) = a(iMin)
            a(iMin) = tmp
        End If
    Next

    Return a
End Function 
```

一旦您完全理解了上述内容，将其反转以进行降序排序应该不难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T15:52:56.383

如果你不喜欢`Sort`，你可以使用`OrderBy`. LINQ 还允许您直接计算`Min`，`Max`因此`Average`您无需重新发明轮子。有关更多信息，请参阅这篇文章：

[使用 LINQ 计算基本统计信息](http://www.codeproject.com/Articles/42492/Using-LINQ-to-Calculate-Basic-Statistics)

（包括方差、标准偏差、中位数、众数等的代码）

注意：代码是 C#，但可以很容易地转换为 VB.NET，因为两者都是 .NET 语言。

# glassfish - Glassfish 几天后停止响应

> ID：13861251
> 
> 赞同：3
> 
> 时间：2012-12-13T13:50:33.350
> 
> 标签：glassfish

我有一个 EJB 应用程序，它由部署在 Glassfish 上的几个模块（核心、REST、2x JSF……）组成。几天后，整个应用程序停止工作。Glassfish 接受连接，但从不返回响应。

负载不高。出现这种情况时 glassfish 的 CPU 消耗较低，内存正常。我唯一能看到的是线程数量增加（数百个）。我认为这是因为 glassfish 接受并保持到超时的连接。

不幸的是，这只发生在生产服务器上。Glassfish 管理员正在工作。当我们重新启动 glassfish 时，再过几天一切正常。

Glassfish 3.1.2，Ubuntu 12.04

任何人都可以帮忙吗？

# javascript - JSON.stringify 深层对象

> ID：13861254
> 
> 赞同：57
> 
> 时间：2012-12-13T13:50:41.657
> 
> 标签：javascript, json, stringify

我需要一个从任何参数构建 JSON 有效字符串的函数，但是：

*   通过不添加两次对象来避免递归问题
*   通过截断给定深度来避免调用堆栈大小问题

一般来说，它应该能够处理大对象，但代价是截断它们。

作为参考，此代码失败：

```
var json = JSON.stringify(window); 
```

避免递归问题很简单：

```
var seen = [];
return JSON.stringify(o, function(_, value) {
    if (typeof value === 'object' && value !== null) {
        if (seen.indexOf(value) !== -1) return;
        else seen.push(value);
    }
    return value;
}); 
```

但就目前而言，除了复制和更改[Douglas Crockford 的代码](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)以跟踪深度之外，我没有找到任何方法来避免在非常深的对象（如`window`或 any ）上发生堆栈溢出`event`。有简单的解决方案吗？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-01-03T19:32:14.600

我做了我最初担心我必须做的事情：我采用了 Crockford 的代码并根据我的需要对其进行了修改。现在它构建 JSON 但处理

*   循环
*   太深的物体
*   数组太长
*   异常（不能合法访问的访问器）

如果有人需要，我创建了一个 GitHub 存储库：[GitHub 上的 JSON.prune](https://github.com/Canop/JSON.prune)

这是代码：

```
// JSON.pruned : a function to stringify any object without overflow
// example : var json = JSON.pruned({a:'e', c:[1,2,{d:{e:42, f:'deep'}}]})
// two additional optional parameters :
//   - the maximal depth (default : 6)
//   - the maximal length of arrays (default : 50)
// GitHub : https://github.com/Canop/JSON.prune
// This is based on Douglas Crockford's code ( https://github.com/douglascrockford/JSON-js/blob/master/json2.js )
(function () {
    'use strict';

    var DEFAULT_MAX_DEPTH = 6;
    var DEFAULT_ARRAY_MAX_LENGTH = 50;
    var seen; // Same variable used for all stringifications

    Date.prototype.toPrunedJSON = Date.prototype.toJSON;
    String.prototype.toPrunedJSON = String.prototype.toJSON;

    var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
        escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
        meta = {    // table of character substitutions
            '\b': '\\b',
            '\t': '\\t',
            '\n': '\\n',
            '\f': '\\f',
            '\r': '\\r',
            '"' : '\\"',
            '\\': '\\\\'
        };

    function quote(string) {
        escapable.lastIndex = 0;
        return escapable.test(string) ? '"' + string.replace(escapable, function (a) {
            var c = meta[a];
            return typeof c === 'string'
                ? c
                : '\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
        }) + '"' : '"' + string + '"';
    }

    function str(key, holder, depthDecr, arrayMaxLength) {
        var i,          // The loop counter.
            k,          // The member key.
            v,          // The member value.
            length,
            partial,
            value = holder[key];
        if (value && typeof value === 'object' && typeof value.toPrunedJSON === 'function') {
            value = value.toPrunedJSON(key);
        }

        switch (typeof value) {
        case 'string':
            return quote(value);
        case 'number':
            return isFinite(value) ? String(value) : 'null';
        case 'boolean':
        case 'null':
            return String(value);
        case 'object':
            if (!value) {
                return 'null';
            }
            if (depthDecr<=0 || seen.indexOf(value)!==-1) {
                return '"-pruned-"';
            }
            seen.push(value);
            partial = [];
            if (Object.prototype.toString.apply(value) === '[object Array]') {
                length = Math.min(value.length, arrayMaxLength);
                for (i = 0; i < length; i += 1) {
                    partial[i] = str(i, value, depthDecr-1, arrayMaxLength) || 'null';
                }
                v = partial.length === 0
                    ? '[]'
                    : '[' + partial.join(',') + ']';
                return v;
            }
            for (k in value) {
                if (Object.prototype.hasOwnProperty.call(value, k)) {
                    try {
                        v = str(k, value, depthDecr-1, arrayMaxLength);
                        if (v) partial.push(quote(k) + ':' + v);
                    } catch (e) { 
                        // this try/catch due to some "Accessing selectionEnd on an input element that cannot have a selection." on Chrome
                    }
                }
            }
            v = partial.length === 0
                ? '{}'
                : '{' + partial.join(',') + '}';
            return v;
        }
    }

    JSON.pruned = function (value, depthDecr, arrayMaxLength) {
        seen = [];
        depthDecr = depthDecr || DEFAULT_MAX_DEPTH;
        arrayMaxLength = arrayMaxLength || DEFAULT_ARRAY_MAX_LENGTH;
        return str('', {'': value}, depthDecr, arrayMaxLength);
    };

}()); 
```

可以做的一个例子：

```
var json = JSON.pruned(window); 
```

**注意：**与此答案中的代码相反，[GitHub 存储库](https://github.com/Canop/JSON.prune)会在需要时更新（文档、兼容性、在 commonjs 或节点中用作模块、特定序列化等）。如果您需要此修剪功能，最好从存储库开始。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-03-31T07:43:54.497

如果你使用的是 Node.js，你可以使用[`util.inspect`](https://nodejs.org/api/util.html#util_util_inspect_object_options)，它需要一个 depth 参数。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-10T18:13:22.307

我已经修改了@dystroy 的答案，并补充说：

*   子属性的缩进。
*   指示循环引用指向的位置。

```
/**
 * Returns the JSON representation of an object.
 *
 * @param {value} object the object
 * @param {number} objectMaxDepth for objects, the maximum number of times to recurse into descendants
 * @param {number} arrayMaxLength for arrays, the maximum number of elements to enumerate
 * @param {string} indent the string to use for indentation
 * @return {string} the JSON representation
 */
var toJSON = function(object, objectMaxDepth, arrayMaxLength, indent)
{
    "use strict";

    /**
     * Escapes control characters, quote characters, backslash characters and quotes the string.
     *
     * @param {string} string the string to quote
     * @returns {String} the quoted string
     */
    function quote(string)
    {
        escapable.lastIndex = 0;
        var escaped;
        if (escapable.test(string))
        {
            escaped = string.replace(escapable, function(a)
            {
                var replacement = replacements[a];
                if (typeof (replacement) === "string")
                    return replacement;
                // Pad the unicode representation with leading zeros, up to 4 characters.
                return "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4);
            });
        }
        else
            escaped = string;
        return "\"" + escaped + "\"";
    }

    /**
     * Returns the String representation of an object.
     * 
     * Based on <a href="https://github.com/Canop/JSON.prune/blob/master/JSON.prune.js">https://github.com/Canop/JSON.prune/blob/master/JSON.prune.js</a>
     *
     * @param {string} path the fully-qualified path of value in the JSON object
     * @param {type} value the value of the property
     * @param {string} cumulativeIndent the indentation to apply at this level
     * @param {number} depth the current recursion depth
     * @return {String} the JSON representation of the object, or "null" for values that aren't valid
     * in JSON (e.g. infinite numbers).
     */
    function toString(path, value, cumulativeIndent, depth)
    {
        switch (typeof (value))
        {
            case "string":
                return quote(value);
            case "number":
                {
                    // JSON numbers must be finite
                    if (isFinite(value))
                        return String(value);
                    return "null";
                }
            case "boolean":
                return String(value);
            case "object":
                {
                    if (!value)
                        return "null";
                    var valueIndex = values.indexOf(value);
                    if (valueIndex !== -1)
                        return "Reference => " + paths[valueIndex];
                    values.push(value);
                    paths.push(path);
                    if (depth > objectMaxDepth)
                        return "...";

                    // Make an array to hold the partial results of stringifying this object value.
                    var partial = [];

                    // Is the value an array?
                    var i;
                    if (Object.prototype.toString.apply(value) === "[object Array]")
                    {
                        // The value is an array. Stringify every element
                        var length = Math.min(value.length, arrayMaxLength);

                        // Whether a property has one or multiple values, they should be treated as the same
                        // object depth. As such, we do not increment the object depth when recursing into an
                        // array.
                        for (i = 0; i < length; ++i)
                        {
                            partial[i] = toString(path + "." + i, value[i], cumulativeIndent + indent, depth,
                                arrayMaxLength);
                        }
                        if (i < value.length)
                        {
                            // arrayMaxLength reached
                            partial[i] = "...";
                        }
                        return "\n" + cumulativeIndent + "[" + partial.join(", ") + "\n" + cumulativeIndent +
                            "]";
                    }

                    // Otherwise, iterate through all of the keys in the object.
                    for (var subKey in value)
                    {
                        if (Object.prototype.hasOwnProperty.call(value, subKey))
                        {
                            var subValue;
                            try
                            {
                                subValue = toString(path + "." + subKey, value[subKey], cumulativeIndent + indent,
                                    depth + 1);
                                partial.push(quote(subKey) + ": " + subValue);
                            }
                            catch (e)
                            {
                                // this try/catch due to forbidden accessors on some objects
                                if (e.message)
                                    subKey = e.message;
                                else
                                    subKey = "access denied";
                            }
                        }
                    }
                    var result = "\n" + cumulativeIndent + "{\n";
                    for (i = 0; i < partial.length; ++i)
                        result += cumulativeIndent + indent + partial[i] + ",\n";
                    if (partial.length > 0)
                    {
                        // Remove trailing comma
                        result = result.slice(0, result.length - 2) + "\n";
                    }
                    result += cumulativeIndent + "}";
                    return result;
                }
            default:
                return "null";
        }
    }

    if (indent === undefined)
        indent = "  ";
    if (objectMaxDepth === undefined)
        objectMaxDepth = 0;
    if (arrayMaxLength === undefined)
        arrayMaxLength = 50;
    // Matches characters that must be escaped
    var escapable =
        /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
    // The replacement characters
    var replacements =
        {
            "\b": "\\b",
            "\t": "\\t",
            "\n": "\\n",
            "\f": "\\f",
            "\r": "\\r",
            "\"": "\\\"",
            "\\": "\\\\"
        };
    // A list of all the objects that were seen (used to avoid recursion)
    var values = [];
    // The path of an object in the JSON object, with indexes corresponding to entries in the
    // "values" variable.
    var paths = [];
    return toString("root", object, "", 0);
}; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-07-25T02:09:52.997

这是一个尊重内置 JSON.stringify() 规则同时也限制深度的函数。此版本通过将循环引用设为 null 或使用可选回调来获取对象 ID（例如 GUID）来处理循环引用。

```
function stringify(val, depth, replacer, space, onGetObjID) {
    depth = isNaN(+depth) ? 1 : depth;
    var recursMap = new WeakMap();
    function _build(val, depth, o, a, r) { // (JSON.stringify() has it's own rules, which we respect here by using it for property iteration)
        return !val || typeof val != 'object' ? val
            : (r = recursMap.has(val), recursMap.set(val,true), a = Array.isArray(val),
               r ? (o=onGetObjID&&onGetObjID(val)||null) : JSON.stringify(val, function(k,v){ if (a || depth > 0) { if (replacer) v=replacer(k,v); if (!k) return (a=Array.isArray(v),val=v); !o && (o=a?[]:{}); o[k] = _build(v, a?depth:depth-1); } }),
               o===void 0 ? (a?[]:{}) : o);
    }
    return JSON.stringify(_build(val, depth), null, space);
}

var o = {id:'SOMEGUID',t:true};
var value={a:[12,2,{y:3,z:{o1:o}}],s:'!',b:{x:1,o2:o,o3:o}};

console.log(stringify(value, 0, (k,v)=>{console.log('key:'+k+';val:',v); return v}, 2));
console.log(stringify(value, 1, (k,v)=>{console.log('key:'+k+';val:',v); return v}, 2));
console.log(stringify(value, 2, (k,v)=>{console.log('key:'+k+';val:',v); return v}, 2));
console.log(stringify(value, 3, (k,v)=>{console.log('key:'+k+';val:',v); return v}, 2));
console.log(stringify(value, 4, (k,v)=>{console.log('key:'+k+';val:',v); return v}, 2, (v)=>{return v.id}));

{}

{
  "a": [
    12,
    2,
    {}
  ],
  "s": "!",
  "b": {}
}

{
  "a": [
    12,
    2,
    {
      "y": 3,
      "z": {}
    }
  ],
  "s": "!",
  "b": {
    "x": 1,
    "o2": {},
    "o3": null
  }
}

{
  "a": [
    12,
    2,
    {
      "y": 3,
      "z": {
        "o1": {}
      }
    }
  ],
  "s": "!",
  "b": {
    "x": 1,
    "o2": null,
    "o3": null
  }
}

{
  "a": [
    12,
    2,
    {
      "y": 3,
      "z": {
        "o1": {
          "id": "SOMEGUID",
          "t": true
        }
      }
    }
  ],
  "s": "!",
  "b": {
    "x": 1,
    "o2": "SOMEGUID",
    "o3": "SOMEGUID"
  } 
```

*（取自我在这里的帖子[https://stackoverflow.com/a/57193068/1236397](https://stackoverflow.com/a/57193068/1236397)）*

这是一个 TypeScript 版本：

```
/** A more powerful version of the built-in JSON.stringify() function that uses the same function to respect the
 * built-in rules while also limiting depth and supporting cyclical references.
 */
export function stringify(val: any, depth: number, replacer: (this: any, key: string, value: any) => any, space?: string | number, onGetObjID?: (val: object) => string): string {
    depth = isNaN(+depth) ? 1 : depth;
    var recursMap = new WeakMap();
    function _build(val: any, depth: number, o?: any, a?: boolean, r?: boolean) {
        return !val || typeof val != 'object' ? val
            : (r = recursMap.has(val),
                recursMap.set(val, true),
                a = Array.isArray(val),
                r ? (o = onGetObjID && onGetObjID(val) || null) : JSON.stringify(val, function (k, v) { if (a || depth > 0) { if (replacer) v = replacer(k, v); if (!k) return (a = Array.isArray(v), val = v); !o && (o = a ? [] : {}); o[k] = _build(v, a ? depth : depth - 1); } }),
                o === void 0 ? (a?[]:{}) : o);
    }
    return JSON.stringify(_build(val, depth), null, space);
} 
```

***注意：***数组被视为字符串 - 原始值数组；因此，任何嵌套对象项都被视为下一级而不是数组对象本身（很像字符串可以是字符数组，但它是一个实体）。

更新：修复了空数组呈现为空对象的错误。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-01-17T09:43:30.870

您可以简单地使用[Censor](https://developer.mozilla.org/en-US/docs/Using_native_JSON)函数，如下例所示：

```
function censor(key, value) {
  if (typeof(value) == "string") {
    return undefined;
  }
  return value;
}

var foo = {foundation: "Mozilla", model: "box", week: 45, transport: "car", month: 7};
var jsonString = JSON.stringify(foo, censor); 
```

输出是`{"week":45,"month":7}`。

因此，对于您的示例，如果您有一个值对象（即窗口），则必须返回 undefined。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-23T00:24:39.693

我认为您使用的格式不适合做您想做的事。将包含在窗口对象中的所有数据获取到单个 JSON 字符串假设您在构建她的过程中将此字符串保留在内存中，从而导致您遇到的问题。

您需要一种格式，让您能够在从窗口对象解析数据时发送数据，以便动态释放内存。就此而言，您应该使用 CSV、Text 或 VarStream ( [https://github.com/nfroidure/VarStream](https://github.com/nfroidure/VarStream) ) 之类的东西。

您还可以遍历对象并尝试 JSON.stringify 它们在 try ... catch 中。如果尝试成功，则发送 JSON 文件，如果失败，则使用相同的 try ... catch 等遍历对象属性...但这是一个丑陋的解决方法，我不鼓励您使用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-17T14:46:16.733

这是我的字符串化器，用于剥离 JSON 以安全记录具有循环引用、DOM 元素、角度范围或窗口的对象。

`TypeError: Converting circular structure to JSON`通过用 '' 替换循环引用来防止。

防止`RangeError: Maximum call stack size exceeded`. 但是，还是建议使用 maxDepth 或 filterObjects ，因为序列化非常深的对象会耗费时间和空间，这可能会降低其对一般日志记录的可用性，甚至在测试中使用时会导致测试浏览器断开连接。

可选：

*   限制对象检查深度（尚未实现），
*   过滤对象（如窗口、测试框架、测试运行器），
*   过滤 DOM 元素，
*   过滤角度对象 $attributes。

来源+评论：[https ://gist.github.com/iki/9371373](https://gist.github.com/iki/9371373)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-19T11:06:50.140

```
(function (input, level) {
    if (!input)
        return input;

    level = level || 4;

    var objectsAlreadySerialized = [input],
        objDepth = [input];

    return JSON.stringify(input, function (key, value) {
        if (key) {
            if (typeof value === 'object') {
                if (objectsAlreadySerialized.indexOf(value) !== -1)
                    return undefined;

                objectsAlreadySerialized.push(value);
            }

            if (objDepth.indexOf(this) === -1)
                objDepth.push(this);
            else while(objDepth[objDepth.length-1] !== this)
                objDepth.pop();

            if (objDepth.length > level)
                return undefined;
        }

        return value;
    });
})(window, 6) 
```

* * *

## 回答 #9

> 赞同：-6
> 
> 时间：2012-12-28T08:34:32.710

你可以保持你所处的深度：

```
function stringify(obj, currentDepth, maxDepth) {
  if (currentDepth == maxDepth) return '[Warning: max level reached]'
  var str = '{';
  for (var key in obj) {
    str += key + ': ' + typeof obj == 'object' ?
        stringify(obj[key], currentDepth + 1, maxDepth) :
        obj[key];
  }
  return str + '}'
} 
```

（只是一个例子——显然这个片段没有检测到递归）

# java - 具有 ScrollPane 行为异常的 JTable

> ID：13861263
> 
> 赞同：2
> 
> 时间：2012-12-13T13:51:18.990
> 
> 标签：java, swing, jtable, jscrollpane

我有一个内部`JPanel`组件`JTable`。当我运行下面编写的代码时，表格会正确呈现和更新。一旦我尝试使用该`scrollPane`方法，表格根本不会呈现。谁能向我解释这是为什么？

```
 private static class GameHistoryPanel extends JPanel {

        private DataModel model;
        private JTable table;
        private int currentRow;
        private int currentColumn;
        private final Dimension HISTORY_PANEL_DIMENSION = new Dimension(190,460);

        public GameHistoryPanel() {
            this.setLayout(new BorderLayout());
            this.model = new DataModel();
            this.table = new JTable(model);
            this.add(table.getTableHeader(), BorderLayout.NORTH);
            this.add(table, BorderLayout.CENTER);
//            JScrollPane scrollPane = new JScrollPane();
//            scrollPane.setViewportView(table);
//            this.add(scrollPane);
            setPreferredSize(HISTORY_PANEL_DIMENSION);
            this.currentRow = 0;
            this.currentColumn = 0;
        }

        public void increment(Board board, Move move) {
            model.setValueAt(move, currentRow, currentColumn);
            if(board.currentPlayer().getAlliance() == Alliance.WHITE) {
                currentColumn++;
            } else if (board.currentPlayer().getAlliance() == Alliance.BLACK) {
                currentRow++;
                currentColumn = 0;
            }
            validate();
            repaint();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:42:45.427

您似乎正在使用 a`JTable`作为 a 的视图，`TableModel`其中每个单元格都以两种状态之一存在。对单元格的可见更改应该*仅*由对模型的更改引起，这可以在准备单元格的[渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)时进行检查。特别是，调用方法`validate()`和*不*`repaint()`应该是必需的。它们的存在表明您在模型不知情的情况下改变了视图，这可以解释所看到的异常。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:52:46.913

尝试

```
JScrollPane scrollPane = new JScrollPane(table);
this.add(scrollPane); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T14:31:29.623

这可能是显而易见的，但请记住，您只能将 JComponent 添加到容器中**一次**。

后

```
this.setLayout(new BorderLayout());
this.model = new DataModel();
this.table = new JTable(model); 
```

要么你

```
this.add(table, BorderLayout.CENTER);
// note that table-headers should not be added explicitly
// commented out: this.add(table.getTableHeader(), BorderLayout.NORTH); 
```

或者您

```
JScrollPane scrollPane = new JScrollPane(table);
this.add(scrollPane); 
```

但同时尝试两者都会导致问题。

如果可能的话，我推荐使用 Swingx 的 JXTable。更灵活、开箱即用的列排序和隐藏/重新排序。*

# java - 编写查询删除3分钟未ping通服务器的节点

> ID：13861264
> 
> 赞同：0
> 
> 时间：2012-12-13T13:51:19.687
> 
> 标签：java, sql

每 5 秒后，一个节点 ping 服务器。如果 ping 成功，节点的时间戳会更新到服务器数据库中。每 3 分钟服务器检查是否有任何超过 3 分钟的时间戳。如果找到，它会从其数据库中删除该节点。

现在的问题。我无法实现此查询。例如，我希望它以一种相当简单的方式，例如：

```
// Get the server time-stamp in milliseconds

select LastPingedAt from JustPinged where LastPingedAt > 3 Minutes"

// If it finds any,delete each of them from the database. 
```

* * *

```
The logic :
Let the server's time stamp at the point of checking be 'serverStamp'
Let the node's time stamp (time in milliseconds when it last pinged) in the 
database's table be 'nodeStamp'.

If ( serverStamp - nodeStamp > 3 minutes)
// Delete those nodes
If( severStamp - nodeStamp < 3 minutes)
// retain those nodes 
```

我无法设计查询以进一步实施。

在任何时候，`JustPinged`表格看起来像：

```
--------------------------|----------------------
NodesThatJustPinged       |          LastPingedAt
--------------------------|-----------------------
 xxx.xxx.xxx.xxx          |          1355406367402
--------------------------|-----------------------
 yyy.yyy.yyy.yyy          |          1355406421277
--------------------------|----------------------- 
```

时间以毫秒为单位，从 开始`new GregorianCalendar().getTimeInMillis()`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:04:03.987

无需获取所有记录并在您的程序中处理它们。这可以通过一条 SQL 语句来完成。您只需要执行如下语句：

```
delete from JustPinged where CurrentTime - LastPingedAt > 180000; 
```

所以你只需要在 Java 中构建字符串，插入当前时间值，然后运行它：

```
String query = "delete from JustPinged where " +
     [your current time variable here] + " - LastPingedAt > 180000;";

your_statement_object.executeQuery(query); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:04:38.200

服务器知道它是当前时间戳（“现在”）。所以查询应该选择“LastPingedAt”值小于的所有行（现在 - 3*60*1000）。

就像是

```
diff := now-180000
select LastPingedAt from JustPinged where LastPingedAt < diff 
```

（伪代码）

# wso2 - WSO2 Identity Server 获取角色权限

> ID：13861266
> 
> 赞同：3
> 
> 时间：2012-12-13T13:51:33.020
> 
> 标签：wso2, wso2carbon, wso2is

我正在使用 org.wso2.carbon.user.core.UserStoreManager 加载用户声明。在声明信息中，我有当前用户的角色列表。有没有办法以编程方式获取每个角色的分配权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:28:53.687

UserAdmin 服务有一个方法 getRolePermissions 正是这样做的。

# c - 指向或不指向

> ID：13861270
> 
> 赞同：0
> 
> 时间：2012-12-13T13:51:50.987
> 
> 标签：c, string, pointers, types, struct

我有一种类型的字符串，它知道它们的大小，称为*pstring*（对 Pascal 字符串的眨眼）。而不是 struct `{size, p_bytes}`，大小只是在内存中以字节数组为前缀。（原因是在概念上和实践上都避免双重引用；以及结构和字节数组的双重堆分配。）我可以使用工具 func 来做到这一点，只是分配`sizeof(size_t)`更多字节，返回指向实际地址的指针字节数组，并提供一个宏来读取几个字节之前的大小。

*相反，我想通过使用灵活数组成员*的“灵活结构”在稍高的级别上做到这一点：

```
typedef struct {
    size_t   size;
    uint     hash;
    char     bytes[];
} PString;
// constructor:
PString * pstring (char * bytes, size_t size) {...} 
```

（那些 pstrings 也有一个散列，因为它们被困在一个池中。）但是现在，我有一个形而上学的问题来选择对 pstrings 的正确访问。问题在于 pstrings（就像普通字符串一样）只能通过指针进行操作。但是我应该如何提供接口，指向与否？

*   字符串通常是*隐式*指向的，其类型如`const char * string;`, 因此也“指向” pstring 类型似乎很自然，而且每个人都知道它是指针类型。
*   但是，在使用结构时，通常的做法是（我猜）*不要*隐式指向变量（通过指向类型），而是用 a 显式声明变量`*`（有时在它们的名称前面加上'p_'）。

那么，在这里我应该怎么做，让 pstrings 的用户在语义上清楚并且在实践中感到轻松？

在任何情况下，指向一个 var 并且字段访问通过`->`. 到目前为止，如您所见，我选择了第二个选项：人们将 pstring 声明为`PString * ps;`. 但我准备根据以下论点进行更改：

*   一个 pstring var 根本不能是无指向的（甚至比普通字符串还要少，因为通过 struct copy 我们会丢失字节 --> hello segfault）。
*   “pstring”中的“p”可以作为“pointed”的提醒。

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:05:31.100

我不喜欢灵活的数组成员，但既然你选择了这种方法，我会保持它的指针性质可见，只是因为它对使用它的人来说更诚实/更清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:03:26.750

在我看来，你最好采用第二种方法。

在隐式指针“C”字符串的情况下，它们的行为类似于字节数组，您可以在其中直接从字节 1 开始访问字符串内容。但是，在这种情况下，它是一种构造（用户定义）类型，并且要进行区分，我希望它是一个显式指针（即第二种方法）。

顺便说一句，您会提供对这些字符串执行比较、字符搜索等操作的功能吗？我建议您可以遵循 C++ 字符串类型的模型并提供一个 c_str 函数，该函数进一步提供指向“字节”的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T21:20:07.640

我建议坚持您当前的选项（使指针明确）。您的库的用户必须知道它无论如何都是一个指针（例如，使用`->`它，知道使用赋值只会创建一个浅拷贝），所以它只会混淆试图隐藏它的事情。

标准库还提供了这种方法的一个示例 -`FILE`类型必须始终用作`FILE *`.

# javascript - 应该如何转义 URL 的片段部分？

> ID：13861273
> 
> 赞同：9
> 
> 时间：2012-12-13T13:52:05.350
> 
> 标签：javascript, url, fragment

如果 URL 在片段部分（即 # 之后）有不寻常的字符，它们应该如何（百分比）转义？我找不到浏览器如何处理这个问题的一致答案，这可能是不拥有它们的一个很好的理由，但我想知道“正确”的答案是什么。

我的测试似乎表明根本不要转义，但这仅在跟随链接时才可靠，而不是在粘贴到浏览器的地址栏时。

我写了一个小网页作为附件。然后我将以下链接粘贴到各种浏览器中。页面中的“go”链接用于查看单击链接而不是粘贴链接时会发生什么（在某些浏览器中似乎有所不同）

[http://www.frankieandshadow.com/test.html/?new=1#](http://www.frankieandshadow.com/test.html/?new=1#) {# &}%7B%23%20%26%7D

（我注意到 stackoverlow 的 URL 模式匹配不喜欢这样 - 我打算整行；那里可能还有我的线索！）

**Chrome**似乎没有进行任何类型的转义，并且始终如一地产生：

#{# &}%7B%23%20%26%7D

**Firefox**用它们的非转义等价物替换了一些（但不是全部）粘贴的转义字符，然后生成

#{# &}{# &}

如果您点击链接，这也是一样的

**Safari**（在 PC 上）则相反：它在粘贴时对未编码的异常字符进行编码，然后生成

#%7B%23%20&%7D%7B%23%20%26%7D

但跟随链接不同，产生

#{# &}%7B%23%20%26%7D

**令人惊讶的是， IE9**的行为就像 Chrome

**IE7**在粘贴时用 %20 替换实际空间，但不保留 URL，并生成

#{#%20&}%7B%23%20%26%7D

如果你点击链接，它会给出

#{# &}%7B%23%20%26%7D

* * *

```
<html>
<head>
<title>test</title>
<script type="text/javascript">
function wibble() {
  document.getElementById("wobble").innerHTML = 
    location.hash.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
}
</script>
</head>
<body onload='wibble()'>
<div id='wobble'></div>
<a href='/test.html?new=1#{# &}%7B%23%20%26%7D'>go</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-05T21:46:03.610

RFC3986 中的 ABNF表示片段由 pchar 组成 - 即它们是百分比编码的[。](https://www.rfc-editor.org/rfc/rfc3986#section-3.5)

也就是说，片段标识符中的字符可以是任何字母数字或以下之一

-._~!$&'()*+,;=:@

所有其他字符都应进行百分比编码。

# python - Django 多对多关系 SQL 更新字段

> ID：13861274
> 
> 赞同：0
> 
> 时间：2012-12-13T13:52:07.537
> 
> 标签：python, django, django-models

我对 django 模型 sql 插入/更新有问题。我正在阅读官方教程，在第 5 章中有一个简单的数据库，其中包含 Authors、Books 和 Publisher 表。Author 表有 3 个字段：first_name、last_name、email Book 表也有一些字段，例如：name、publisher 等，以及与 Author 表具有多对多关系的 authors 字段。现在我正在尝试手动执行 django 管理应用程序在幕后所做的事情。我想添加或更新与给定书籍关联的作者。

我是这样开始的（在 shell 阶段）：

```
from mysite.models import Book, Author

new_author1 = 'John Doe' # that first_name and last_name exists in Author table
new_author2 = 'Jane Doe' # that first_name and last_name exists in Author table    
b = Book.objects.get(pk=2) # a book with id 2 exists in a Book table
b.authors = (new_author1,new_author2) # ?? trying to add/associate authors names with a selected book (pk=2)
b.save() 
```

这当然行不通，我不知道我错过了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:01:28.590

您不能仅使用字符串将作者与书籍相关联。您必须首先从数据库中检索实际的 Author 对象，然后才能将它们与 Book 相关联。Django ORM 不会根据字符串神奇地为您找到对象。它无法知道字符串的哪一部分是名字或姓氏，或者该字符串根本不是指作者姓名，而不是其他字段。您需要执行以下操作来获取 Author 对象：

```
new_author1 = Author.objects.get(first_name__exact='John', last_name__exact='Doe') 
```

这是假设已经创建了 John Doe，正如您在评论中所说的那样。如果没有，您需要使用以下内容创建 Author 对象：

```
new_author1 = Author.objects.create(first_name='John', last_name='Doe') 
```

（我没有模型代码，所以这是假设最合乎逻辑的设置）。

# c# - .Net NMS.ActiveMQ 我应该存储消息发送调用之间的会话和连接吗

> ID：13861278
> 
> 赞同：5
> 
> 时间：2012-12-13T13:52:20.113
> 
> 标签：c#, .net, activemq, apache-nms

我刚从 ActiveMQ 开始，遇到了几个问题。

我应该使用 ActiveMQ 发送消息

我现在做了什么：

```
public class ActiveMQSender
{
    private readonly Uri connectionUri;
    private readonly IConnectionFactory connectionFactory;

    private readonly string destinationName;

    public ActiveMQSender()
    {
        this.connectionUri = new Uri("activemq:tcp://localhost:61616");
        this.connectionFactory = new NMSConnectionFactory(this.connectionUri);
        this.destinationName = "queue://testQ";
    }

    public void Send(string msg)
    {
        using (var connection = this.connectionFactory.CreateConnection())
        using (var session = connection.CreateSession())
        {
            var destination = SessionUtil.GetDestination(session, this.destinationName);

            using (var producer = session.CreateProducer(destination))
            {
                connection.Start();
                var message = session.CreateTextMessage(msg);
                producer.Send(message);
            }
        }
    }
} 
```

只有一个此类的实例将作为构造函数参数注入。

我担心连接、会话和生产者创建的开销，因为消息会频繁发送（通常每 10 秒发送一条消息）我应该重用连接、会话或生产者实例，我应该如何应对连接失败？在这种情况下，常见的模式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:48:07.923

NMS.ActiveMQ 像 java 客户端一样提供故障转移传输，如果连接丢失，它将自动尝试重新连接到代理。您可以使用它来最小化您的故障处理代码。对 AMQ 中的故障转移传输主题进行一些 Google 搜索。

重新创建连接和相关资源不是轻量级操作，因此最好的办法是缓存它们并在需要该连接时重复使用它们。结合故障转移，您可以可靠地反复重用同一个 MessageProducer。

NMS 的模型与 JMS 非常相似，因此对 JMS 进行一些阅读应该会有所启发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:31:11.030

大概您为此使用NMS？作为一个建议，您可能需要考虑使用阻塞队列来限制消息，然后批量发送 n 条消息的块......然后您可以保留您的代码并发布批次，同时在处理您的连接、会话和生产者时你已经完成了你正在做的......

至于连接失败 - 您应该能够将异常侦听器连接到您的会话，以便您收到任何问题的通知。

# linux - 了解内核消息“没人关心（尝试使用“irqpoll”选项启动）”

> ID：13861282
> 
> 赞同：17
> 
> 时间：2012-12-13T13:52:46.740
> 
> 标签：linux, linux-kernel, linux-device-driver

我试图理解以下消息的含义：

```
irq N:nobody cared (try booting with the "irqpoll" option) 
```

这是否意味着 IRQ 处理程序即使收到中断也不处理响应？或者调度程序未能调用 irq 处理程序？

这是在什么情况下发生的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T14:27:49.803

这意味着要么没有为该 irq 注册处理程序，要么返回的状态表明 irq 不适合他（来自他支持的硬件），以防共享中断可能是有故障的硬件/固件或错误的驱动程序

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-19T02:21:31.823

理想情况下，上述消息后面应该有一个堆栈跟踪，它应该可以帮助您确定哪个子系统导致了问题。此消息意味着中断处理程序由于开销而被卡住，并且没有返回，从而导致系统禁用 IRQ#X。在固件有问题的情况下会出现这种情况。

该`irqpoll`选项需要添加到 grub.conf，这意味着，当未处理中断时，搜索所有已知的中断处理程序以查找适当的处理程序，并检查每个计时器中断的所有处理程序。这有时对于让固件损坏的系统运行很有用。grub.conf 中的内核命令行应如下所示：

> 内核 /vmlinuz-version ro root=/dev/sda1 quiet irqpoll

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-06-24T09:03:40.937

**最小可运行 QEMU 示例**

QEMU 有一个名为`edu`生成中断的教育设备，非常适合探索这一点。

首先，我为它创建[了一个最小的 Linux PCI 设备驱动程序，它可以正确处理中断](https://github.com/cirosantilli/linux-kernel-module-cheat/blob/a8e11e6de9092919ff833ed95dad02d173559564/kernel_module/pci.c)。

现在我们可以通过注释掉代码`request_irq`和`free_irq`从代码中轻松生成错误。

然后，如果我们运行生成 IRQ 的用户态程序，我们会得到：

```
irq 11: nobody cared (try booting with the "irqpoll" option) 
```

其次是堆栈跟踪。

正如其他人提到的：未处理的 IRQ。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-26T10:20:29.363

就我而言，在重新加载驱动程序后，因为网卡在短时间内出现了数十亿个错误。

```
modprobe -r ixgbe && modprobe ixgbe 
```

lspci 显示了一个未知设备，该设备曾经是“卡”

重新启动后，卡消失了，再也看不到了。

因此，该错误也可能显示硬件故障。

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2017-05-29T14:51:59.953

看这里：

```
static inline int bad_action_ret(irqreturn_t action_ret)
{
    if (likely(action_ret <= (IRQ_HANDLED | IRQ_WAKE_THREAD)))
        return 0;
    return 1;
} 
```

# mysql - 如何使用连接重写 MySQL NOT IN 查询？

> ID：13861283
> 
> 赞同：3
> 
> 时间：2012-12-13T13:52:45.910
> 
> 标签：mysql

我使用这样的 sql 查询来获得我需要的一些结果：

```
SELECT
    *
FROM
    pictures p
WHERE
    p.id NOT IN 
        (
            SELECT
                picture_id
            FROM
                guesses g
            WHERE 
                g.user_id = XXX 
        )
    AND
        p.user_id != XXX
; 
```

关系如下：一个用户有很多张图片，一张图片属于一个用户。一个用户有很多猜测，一个猜测属于一张图片。棘手的部分是用户只能对同一张图片进行一次猜测。

XXX = $user_id

我想有一种方法可以使用左连接重写这​​个子选择，但我无法让它工作。

任何人都可以帮忙吗？

安雅

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:57:41.717

因为这是`NOT IN`您应该使用的条件`LEFT OUTER JOIN`。这是查询左外连接的直接翻译：

```
SELECT
    distinct p.*
FROM
    pictures p
LEFT OUTER JOIN
   guesses g      ON g.picture_id = p.id and g.user_id = XXX
WHERE
   p.user_id != XXX
   and g.user_id is null
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:04:15.747

好的，我们开始吧。我想这是正确的答案：

```
SELECT DISTINCT
    p.*
FROM
    pictures p
LEFT OUTER JOIN
    guesses g      
ON 
    g.picture_id = p.id and g.user_id = 1
WHERE
    g.user_id is null
    and p.user_id != 1
; 
```

# format - xlsx 的剪贴板格式

> ID：13861284
> 
> 赞同：1
> 
> 时间：2012-12-13T13:52:49.500
> 
> 标签：format, clipboard, xlsx

我在 html 中有一个包含几列的表格。我需要制作一个脚本来复制剪贴板中该表中的行，以便稍后在 excel 中粘贴。我制作了将某些内容复制到剪贴板的脚本，但是当我将其粘贴到 Excel 中时，我不知道如何格式化/重新格式化 html 文本以保留列。希望你能理解我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:49:50.067

用于在 Excel 中粘贴文本的一种不错且简单的格式是制表符（Javascript 中的“\t”）作为单元格分隔符，换行符（Javascript 中的“\n”）作为行分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:56:27.463

我不是 100% 确定，但我认为这是正常`<td>`的，当然如果我正确理解了你的问题

# apache-camel - 保险丝上的 JMS 问题

> ID：13861286
> 
> 赞同：1
> 
> 时间：2012-12-13T13:52:51.280
> 
> 标签：apache-camel, jms, fuseesb

![1.png](../Images/430a4be48b6afb63aeee9b94952e213e.png) ![2.png](../Images/85963ace3131f587d9adbafdfd941f0a.png)我开发了一个示例代码来测试主题和保险丝上的持久主题，我遇到了一个问题。

示例代码说明 我的示例代码包含 3 个包，每个包都有自己的骆驼上下文和自己的路由，所以我在 3 个包中有 3 个路由，如下所示：

bundle1 路由：使用文件系统中的文件并将其发送到队列

```
<route id="producer-route">
    <from uri="file:D://camel_test"/>
    <to uri="activemq:queue:service.queue"/>
</route> 
```

bundle 2 路由：消费前一个队列中的消息并将其发送到主题

```
<route id="router-route">
    <from uri="activemq:queue:service.queue"/>
    <to uri="activemq:topic:router.topic"/>
</route> 
```

bundle3 路由：消费上一个主题的消息并将其发送到文件系统

```
<route id="consumer-route">
<from uri="activemq:topic:router.topic?clientId=consumer&amp;durableSubscriptionName=bar"/>
<to uri="file:D://camel_test2"/> 
```

当我将文件放入第一个文件夹 "D://camel_test" 时，示例代码在 95% 的情况下成功运行，文件从 "D://camel_test" 文件夹中消失并移动到第二个文件夹 "D ://camel_test2"

问题描述 • 有时，5% 的情况下，文件没有被第二条路由消费，当检查 jconsole 上的消费者和队列时，我发现队列的 oa 注册消费者，如随附的 jconsole 屏幕截图所示（2 .png）。o 队列的入队计数增加，而队列的出队计数为零，如附加的 jconsole 屏幕截图 (1.png) 所示。

• 该问题出现在许多情况下，但最可重现的情况是在重新启动 Fuse ESB 之后。

• 问题不出现在每次fuse 重启时，示例代码在fuse 重启后多次成功运行且没有问题。

**重要提示：刷新 bundle2 和 bundle3 后问题总是消失。**

您能否提一些建议？

# objective-c - NSData dataWithContentsOfURL 错误？

> ID：13861287
> 
> 赞同：0
> 
> 时间：2012-12-13T13:52:51.747
> 
> 标签：objective-c, nsdata

尝试使用 NSData 解析简单的 URL 但失败：

```
NSURL* url = [[NSURL alloc] initWithString:@"http://192.168.2.105:80"];
NSData* data = [NSData dataWithContentsOfURL:url options:NSDataReadingUncached error:&error]; 
```

结果是错误 = Cocoa 错误 256

什么理由？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:40:07.983

看看这个：

```
NSURL* URL=[NSURL URLWithString: @"http://www.google.com"];
NSURLRequest* req=[NSURLRequest requestWithURL: URL];
NSData* data=[NSURLConnection sendSynchronousRequest: req returningResponse: nil error: nil]; 
```

这是一个简短的示例，我建议检查响应和最终错误。

**编辑**

您使用 dataWithContentOfURL 是对的，我发布的代码也是如此。
但这是错误的 URL。您应该传递类似*http://www.site.org*的内容。

# jquery - Dojo 相当于 $(document).scrollTop？

> ID：13861289
> 
> 赞同：2
> 
> 时间：2012-12-13T13:52:56.670
> 
> 标签：jquery, dojo, scrolltop

如您所知，jQuery`$(document).scrollTop()`用于检查窗口的滚动位置。在dojo中可以使用相同的功能吗？我用了

```
dojo.query('html')[0].scrollTop() 
```

但是在 webkit 中存在错误 - 它总是返回`0`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:34:42.897

与`dojo`你必须做的：

```
dojo.query('body')[0].scrollTop 
```

并注意这`scrollTop`是一个属性而不是一个函数，否则你会得到错误：

```
TypeError: Property 'scrollTop' of object #<HTMLBodyElement> is not a function 
```

**更新**

上面的代码可以在 Ubuntu 11.10 上与 Dojo 1.8、Chromium 18.0、Rekonq 0.8 和 Firefox 17.0 一起正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-20T15:41:26.003

如果 2017 年仍有人对此感兴趣。你必须这样做：

```
dojo.query('body')[0].scrollTop = 0; 
```

在 IE11、Firefox 51.0.1 和 Chrome 56.0.xx 上测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-08T04:53:44.240

请尝试`query("html")[0].scrollTop || query("body")[0].scrollTop`。

# html - 对齐 HTML 表单域 - 转换为 CSS

> ID：13861294
> 
> 赞同：1
> 
> 时间：2012-12-13T13:53:20.957
> 
> 标签：html, css, forms

我已经开始设计一个表单，并且我已经以明显的方式（对我而言）完成了它，但这似乎真的是错误的方式。我不认为我应该使用表格，而是使用 CSS：

```
<form action="test.php">
    <table>
        <tr>
            <td>Name</td><td><input type="text" id="prjname" size="30"/></td>
            <td align="right">Design type</td><td align="right"><select id="prjdesigntype">
                <option value="0" selected="selected">- Select one -</option>
                </select></td>
        </tr>
        <tr>
            <td>Description</td><td colspan="3"><input type="text" size="80" id="prjdesc" /></td>
        </tr>
    </table>
</form> 
```

任何人都可以提出更好的方法或执行上述操作吗？具体来说，我希望它看起来不错，例如将“选择”框与上面的描述框末尾对齐。

我试过使用 DIV，但我不知道如何将一行上的文本框与前一行上的文本框对齐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:37:56.827

最好使用 textarea 标签来描述，因为 input 标签不适合长文本，而且看起来不太好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:14:13.733

可能你最好开始使用 div 和 css，因为这样你就可以更好地控制你的元素。试试这个代码。

```
<div style="width: 500px; height: auto; margin: auto;">
<form>
<input type="text" name="prjname" id="prjname" size="30" placeholder="Enter your name .." style="float:left; clear:none; padding-left: 15px;"/>
<select id="prjdesigntype"style="float: right; clear:none;" >
    <option value="0" selected="selected">- Select one -</option>
</select>
<input type="text" size="80" id="prjdesc" placeholder="Enter the description .." style="float:left; clear:both; width: 500px; padding-left: 15px;"/>

</form>
</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-13T14:02:49.367

试一试

```
 <form action="test.php">

    <div style="margin-bottom:5px;">
        <div style="float:right;">
            Design type
            <select id="prjdesigntype">
                <option value="0" selected="selected">
                    - Select one option
                </option>
            </select>
        </div>
        <div>
            Name
            <input type="text" id="prjname" size="30"/>
        </div>
    </div>

    <div>
        Description <input type="text" size="60" id="prjdesc" />
    </div>

</form> 
```

一旦你了解它，div 和 CSS 就比表格容易得多：)

此外，这可能更多地属于[http://ux.stackexchange.com](http://ux.stackexchange.com)，但是将所有表单元素放在一列而不是两列中往往会更好，因此您可能希望这样做。

# r - 如何进行循环以从多个列表中提取一列，然后将它们绑定在一起以创建一个新矩阵？

> ID：13861296
> 
> 赞同：0
> 
> 时间：2012-12-13T13:53:24.810
> 
> 标签：r, list, loops, vector, matrix

一般来说，我是循环和 R 的新手；我已经在这个问题上花费了很多时间，并且在接下来的两天里，我离手动完成这件事还有很长的路要走。

因此，有一个包可以在计算统计数据时在后台创建列表（看起来像矩阵）。每个项目（有 10 个项目）都有我需要从中提取数据的“矩阵查找列表”之一。该列表有 5 行代表 5 个组和 8 列。我需要为每个项目提取 3 列（'Lo Score'=[,2]、'Hi Score=[,3]' 和 'Mean'=[,7]）。然后，我想将提取的数据转换为 3 个矩阵（“Lo Score”、“Hi Score”和“Mean”），其中行是 5 个组，列是项目 1-10。

这就是我可以手动创建平均矩阵的方法。“MDD.mean.s10”是我最后想要的矩阵。（注意 $results 之后的第一个括号是唯一改变 1-10 的部分（表示 10 个项目），最后一个括号是 [,7] 表示位于第 7 列中的平均值）

```
m.1a <- MC_MDD.noNA$results[[1]][[2]][,7]
m.2b <- MC_MDD.noNA$results[[2]][[2]][,7]
m.3c <- MC_MDD.noNA$results[[3]][[2]][,7]
m.4d <- MC_MDD.noNA$results[[4]][[2]][,7]
m.5e <- MC_MDD.noNA$results[[5]][[2]][,7]
m.6f <- MC_MDD.noNA$results[[6]][[2]][,7]
m.7g <- MC_MDD.noNA$results[[7]][[2]][,7]
m.8h <- MC_MDD.noNA$results[[8]][[2]][,7]
m.9i <- MC_MDD.noNA$results[[9]][[2]][,7]
m.10j <- MC_MDD.noNA$results[[10]][[2]][,7]
MDD.mean.s10 <- cbind(m.1a, m.2b, m.3c, m.4d, m.5e, m.6f, m.7g, m.8h, m.9i, m.10j)

MDD.mean.s10   

         m.1a      m.2b      m.3c      m.4d      m.5e      m.6f      m.7g      m.8h      m.9i     m.10j
[1,] 0.8707865 0.7393939 0.7769231 0.7591241 0.8533333 0.7925926 0.8258065 0.8410596 0.8843931 0.5638298
[2,] 0.8323353 0.7302632 0.5913978 0.5868263 0.6923077 0.6182796 0.6964286 0.6839080 0.7911392 0.3212121
[3,] 0.8726115 0.7159763 0.7117647 0.6163522 0.7987805 0.7105263 0.7613636 0.7674419 0.8034682 0.4011299
[4,] 0.9024390 0.7894737 0.7795276 0.6530612 0.8593750 0.7112676 0.8672566 0.8629032 0.9152542 0.4834437
[5,] 0.9861111 0.9102564 0.8452381 0.8160920 0.9726027 0.8658537 0.8352941 0.9342105 0.9466667 0.6454545 
```

但我不能每次都手动执行此操作，因为这会在多个列表中一遍又一遍地出现。我已经想出了如何循环这个过程并命名向量：

```
for(i in 1:10){
assign(paste("m", i, sep = ""), MC_MDD.noNA$results[[i]][[2]][,7])
}

m1
[1] 0.8707865 0.8323353 0.8726115 0.9024390 0.9861111
m2
0.7393939 0.7302632 0.7159763 0.7894737 0.9102564
m3
[1] 0.7769231 0.5913978 0.7117647 0.7795276 0.8452381
m4
[1] 0.7591241 0.5868263 0.6163522 0.6530612 0.8160920
m5
[1] 0.8533333 0.6923077 0.7987805 0.8593750 0.9726027
m6
[1] 0.7925926 0.6182796 0.7105263 0.7112676 0.8658537
m7
[1] 0.8258065 0.6964286 0.7613636 0.8672566 0.8352941
m8
[1] 0.8410596 0.6839080 0.7674419 0.8629032 0.9342105
m9
[1] 0.8843931 0.7911392 0.8034682 0.9152542 0.9466667
m10
[1] 0.5638298 0.3212121 0.4011299 0.4834437 0.6454545 
```

现在我在这里卡住了……我如何在不明确输入的情况下绑定这些向量？IE。mean.MDD <- cbind(m1,m2,m3,m4,m5,m6,m7,m8,m9,10)

我尝试过的一切都会覆盖数据而不是构建矩阵。基本上，我从一个零矩阵（5x10）开始。然后我在开始时得到了一些值，但其余的仍然是零。糟糕的代码示例：

```
fo <- matrix(0,5,10)
colnames(fo) <- paste('f', 1:10, sep = "")
fo
      f1 f2 f3 f4 f5 f6 f7 f8 f9 f10
[1,]  0  0  0  0  0  0  0  0  0   0
[2,]  0  0  0  0  0  0  0  0  0   0
[3,]  0  0  0  0  0  0  0  0  0   0
[4,]  0  0  0  0  0  0  0  0  0   0
[5,]  0  0  0  0  0  0  0  0  0   0
for(i in 1:10){
fo <- assign(paste("f", i, sep = ""), MC_MDD.noNA$results[[i]][[2]][,7])
}
fo
[1] 0.5638298 0.3212121 0.4011299 0.4834437 0.6454545

fo <- matrix(0,5,10)
colnames(fo) <- paste('f', 1:10, sep = "")
fo
      f1 f2 f3 f4 f5 f6 f7 f8 f9 f10
[1,]  0  0  0  0  0  0  0  0  0   0
[2,]  0  0  0  0  0  0  0  0  0   0
[3,]  0  0  0  0  0  0  0  0  0   0
[4,]  0  0  0  0  0  0  0  0  0   0
[5,]  0  0  0  0  0  0  0  0  0   0
for(i in 1:10){
fo <- cbind(assign(paste("f", i, sep = ""), MC_MDD.noNA$results[[i]][[2]][,7]))
}
fo
[,1]
[1,] 0.5638298
[2,] 0.3212121
[3,] 0.4011299
[4,] 0.4834437
[5,] 0.6454545 
```

提前感谢您的帮助！！！（C：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:16:00.917

这应该会产生正确的结果：

```
sapply(MC_MDD.noNA$results, function(x) x[[2]][ , 7]) 
```

修改列号以生成高 ( `[ , 3]`) 和低 ( `[ , 2]`) 分数的矩阵。

# iphone - 如何将文件从一个文档文件夹获取到另一个文档文件夹？

> ID：13861297
> 
> 赞同：0
> 
> 时间：2012-12-13T13:53:27.757
> 
> 标签：iphone, xcode, uitableview, document

在我的应用程序中，我将记录文件保存在文档目录中。然后稍后从文档目录中获取所有这些文件，并在我的 mainClass 中显示所有这些文件，其中我有 UITableview。当我单击此 mainClass Tableview 的任何行时，它会转到下一个类，我在其中播放此文件，删除此文件并将此文件发送到我最喜欢的录音类，在那里我有 Tableview。现在我的播放按钮操作方法和删除按钮操作方法工作正常，但我不知道如何将此文件发送到我最喜欢的类 Tableview。现在我在这里显示我的删除按钮代码，通过它我们可以获得基本的想法。

```
 -(IBAction)deleteFile
 {
    NSArray *dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docsDir = [dirPaths objectAtIndex:0];
    NSString *documentPath = [docsDir stringByAppendingPathComponent:@"MyRecordings"];
    NSString *soundFilePath = [documentPath stringByAppendingPathComponent:fileToPlay];
    recordedTmpFile = [NSURL fileURLWithPath:soundFilePath];
    [[NSFileManager defaultManager] removeItemAtURL:recordedTmpFile error:nil];

} 
```

作为我的删除按钮代码显示我们如何删除我从 MainTableview 中选择的当前录制文件。现在如果用户想要将当前录制文件发送到我最喜欢的类 Tableview 而不是删除它那么我是否在此处使用另一个文档文件夹如果回答是是的？那么我们如何将当前文件（recordedTmpFile）保存在这个新的文档文件夹中。

```
 -(IBAction)AddToFavourite
{
NSArray *dirPaths1 = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docsDir1 = [dirPaths1 objectAtIndex:0];
NSString *documentPath1 = [docsDir1 stringByAppendingPathComponent:@"MyFovouriteRecordings"];

// How to pass here the Current Recording File (recordedTmpFile) to this new document Folder.
} 
```

当我 NSlog 记录的TmpFile 显示结果：file://localhost/Users/Umar/Library/Application%20Support/iPhone%20Simulator/4.2/Applications/9219677A-B0E3-4B78-B2E5-FEA49D689618/Documents/MyRecordings/06:Dec: 12_05:54:07%20PM+活动%20song

任何帮助都会得到帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:51:55.430

只需使用您的原始文件创建一个 NSData 实例。比把它写到另一个位置。

```
//write file to the other location
NSData *myData = [[NSData alloc] initWithContentsOfFile:originalPath];

[myData writeToFile:newDataPath options:NSDataWritingAtomic error:&error];

//delete file from original location
NSFileManager *fileManager = [[NSFileManager alloc] init];

[fileManager removeItemAtPath:originalPath error:&removeError]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:21:58.910

```
-(IBAction)AddToFavourite {
    NSArray *dirPaths1 = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,   NSUserDomainMask, YES);
    NSString *docsDir1 = [dirPaths1 objectAtIndex:0];
    NSString *documentPath1 = [docsDir1 stringByAppendingPathComponent:@"MyFovouriteRecordings"];
    NSString *soundFilePath1 = [documentPath1 stringByAppendingPathComponent:fileToPlay];
    // How to pass here the Current Recording File (recordedTmpFile) to this new document Folder.

    // First check if the directory existst
    if([[NSFileManager defaultManager] fileExistsAtPath:documentPath1]==NO) {
        NSLog(@"Creating content directory: %@",documentPath1);
        NSError *error=nil;
        if([[NSFileManager defaultManager] createDirectoryAtPath:documentPath1 withIntermediateDirectories:NO attributes:nil error:&error]==NO) {
            NSLog(@"There was an error in creating the directory: %@",error);   
        }
    }

    //then get the origin file path
    NSArray *dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docsDir = [dirPaths objectAtIndex:0];
    NSString *documentPath = [docsDir stringByAppendingPathComponent:@"MyRecordings"];
    NSString *soundFilePath = [documentPath stringByAppendingPathComponent:fileToPlay];

    //Then convert paths to URL
    NSURL* originURL = [NSURL fileURLWithPath:soundFilePath];
    NSURL* destinationURL = [NSURL fileURLWithPath:soundFilePath1];

    //Then, you have to copy the file
    [[NSFileManager defaultManager] copyItemAtURL:destinationURL toURL:originURL error:NULL];
} 
```

应该这样做，告诉我是否有任何错误。

# mysql - MySQL授权语法和通配符

> ID：13861301
> 
> 赞同：0
> 
> 时间：2012-12-13T13:53:37.553
> 
> 标签：mysql

为了允许`someuser`在 SELECTs 上`mydb`执行，我可以执行以下语句：

```
GRANT SELECT ON mydb.* TO 'someuser'@'somehost'; 
```

假设我只想在两个表上允许 SELECT：`event`和`event_detail`.

我想我可以做到以下几点：

```
GRANT SELECT ON mydb.event TO 'someuser'@'somehost';
GRANT SELECT ON mydb.event_detail TO 'someuser'@'somehost'; 
```

以下也可以吗？（假设没有其他表匹配）

```
GRANT SELECT ON mydb.event* TO 'someuser'@'somehost'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:55:40.577

否 - 通配符只能用于整个表或数据库名称。

您必须为每个表显式键入授权语句，或者编写脚本或程序来为您执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:59:34.573

基于`GRANT`语法：

```
GRANT
... priv_level ...

priv_level:
    *
  | *.*
  | db_name.*
  | db_name.tbl_name
  | tbl_name
  | db_name.routine_name 
```

所以我猜你不能。无论如何，您可以使用`INFORMATION_SCHEMA`查找具有您想要的名称前缀的那些表，然后遍历它们。

# .net - 如何找到 DragDrop 事件的来源

> ID：13861303
> 
> 赞同：0
> 
> 时间：2012-12-13T13:53:42.257
> 
> 标签：.net, drag-and-drop, outlook

我找到了这篇关于如何在将附件从 Microsoft Outlook 拖到 .net 控件时获取数据的[CodeProject 文章。](http://www.codeproject.com/Articles/28209/Outlook-Drag-and-Drop-in-C)

但是，在将其他类型的数据拖入控件时，代码会抛出异常，因此我只想在从Outlook中拖动数据的特定情况下使用此方法。

不幸的是，我看不到确定 DragDrop 事件来源的明显方法，因此实际上无法判断何时从 Outlook 中拖动文件。

我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:09:36.083

无法准确发现拖动数据的来源在很大程度上是 D+D 的设计特点。它有助于将拖动源与接收数据的进程完全隔离开来。在 Windows 中非常重要，它使得从 64 位进程拖入 32 位进程变得简单。它完全避免了让进程正确互操作的许多麻烦。只有数据很重要。

您需要在 DragEnter 事件处理程序中筛选拖动的数据，并确保它是您知道如何处理的数据。主要的协议是 e.Data.GetDataPresent()，它告诉你数据的格式是正确的。除非您对所看到的内容感到满意，否则不要设置 e.Effect。

然后 DragDrop 事件处理程序应该接受数据。出现异常并不完全出乎意料，特别是如果您在 DragEnter 中没有很好地筛选它。否则，这不会导致您的程序崩溃，异常被吞没并且没有任何反应。使用 Debug + Exceptions 调试您的代码，勾选 CLR 异常的 Throw 复选框。

# android - 以编程方式为部分标题 Listview 下的项目设置 textview 颜色

> ID：13861308
> 
> 赞同：0
> 
> 时间：2012-12-13T13:53:55.683
> 
> 标签：android

[我已经实现了一个部分标题列表视图，我在其中膨胀了一个布局，其中包含三个文本视图作为项目。我在这里](http://jsharkey.org/blog/2008/08/18/separating-lists-with-headers-in-android-09/)引用了这个例子来实现它。

我的代码是

```
adapter.addSection(monthitems2[l], new SimpleAdapter(this, security, R.layout.phone_row, 
                new String[] {"Title", "Caption","val1" }, new int[] { R.id.tvContact, R.id.tvMobile,R.id.tvMail })); 
```

我有一个条件，我需要更改 ID“R.id.tvContact”的文本颜色。我没有在布局中的任何地方定义文本视图。我只是将其称为简单适配器参数。如何更改文本视图颜色默认为白色。任何建议的答案都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:02:30.800

从参考教程中，您有

```
SeparatedListAdapter adapter = new SeparatedListAdapter(this);  
adapter.addSection("Array test", new ArrayAdapter<String>(this,  
        R.layout.list_item, new String[] { "First item", "Item two" }));  
adapter.addSection("Security", new SimpleAdapter(this, security, R.layout.list_complex,   
        new String[] { ITEM_TITLE, ITEM_CAPTION }, new int[] { R.id.list_complex_title, R.id.list_complex_caption }));  

ListView list = new ListView(this);  
list.setAdapter(adapter);  
this.setContentView(list); 
```

获取 TextView 的句柄，然后从该句柄设置其颜色。您需要在代码中以可运行的 b/c 将命令发布到消息队列中，此时 ListView 尚未呈现适配器指向的 TextView（这将在 OnCreate 退出后的某个时间发生）。

```
list.Post(() => 
{
    TextView tv = list.FindViewById<TextView>(R.id.tvContact);

    tv.SetTextColor(Color.Red);
}); 
```

我认为您不需要使用列表来限定 FindViewById。b/c 你设置内容视图

```
this.setContentView(list); 
```

（上面是 MonoDroid 的 C# 代码，可轻松转换为 Java）。

在 Java/Android 中发布可运行文件：[如何在 Android 中运行可运行线程？](https://stackoverflow.com/questions/1921514/how-to-run-a-runnable-thread-in-android)

在 runnables 中发布会将代码放入消息队列中，这是 Android 中一个关键的、未记录的构造。每当您在修改视图时从活动中获得空引用时，请尝试将此作为第一步。

# jquery - 如何使用 Phonegap 和 JqueryMobile 上传文件？

> ID：13861310
> 
> 赞同：12
> 
> 时间：2012-12-13T13:53:56.213
> 
> 标签：jquery, cordova, jquery-mobile

我正在使用 JQM 和 PhoneGap 为 Android 构建一个移动应用程序。我需要将文件（图像）上传到远程服务器（从画廊或用相机拍照）。基本上它可以使用 phonegap 文件 API 来完成，问题是服务器被编写为支持简单的 POST 提交。

我需要的是在我的应用程序请求中“模拟”，**就像**它从以下 html 表单发送一样。另外我需要得到服务器响应。

```
<form name="myWebForm" ENCTYPE="multipart/form-data" action="http://www.myurl.com/api/uploadImage "method="post">
    <input type="file" name="image" />
    <input type="submit" value="Submit"/>       
</form> 
```

我尝试使用 phonegap 文件 API，但在服务器端检索到的数据的结构与应有的不同。

我试图在我的应用程序中实现该表单，但“选择文件”按钮被禁用......

如何在不对服务器端进行任何更改的情况下实现它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-13T14:40:57.623

您不能在 Phonegap 上使用输入文件。不支持。你需要做这样的事情：

```
 function onDeviceReady() {

        // Retrieve image file location from specified source
        navigator.camera.getPicture(uploadPhoto,
                                    function(message) { alert('get picture failed'); },
                                    { quality: 50, 
                                    destinationType: navigator.camera.DestinationType.FILE_URI,
                                    sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY }
                                    );

    }

    function uploadPhoto(imageURI) {
        var options = new FileUploadOptions();
        options.fileKey="file";
        options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1)+'.png';
        options.mimeType="text/plain";

        var params = new Object();

        options.params = params;

        var ft = new FileTransfer();
        ft.upload(imageURI, encodeURI("http://some.server.com/upload.php"), win, fail, options);
    }

    function win(r) {
        console.log("Code = " + r.responseCode);
        console.log("Response = " + r.response);
        console.log("Sent = " + r.bytesSent);
    }

    function fail(error) {
        alert("An error has occurred: Code = " + error.code);
        console.log("upload error source " + error.source);
        console.log("upload error target " + error.target);
    } 
```

在 getPicture 方法上，您将选择您的文件源。查看更多信息：[http ://docs.phonegap.com/en/2.1.0/cordova_file_file.md.html#FileTransfer](http://docs.phonegap.com/en/2.1.0/cordova_file_file.md.html#FileTransfer)

**编辑：**

需要指定 fileName 扩展名以及以“text/plain”格式请求 mimeType 以发送文本格式的图像。至于参数，如果您不需要它们，为什么要使用它们？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-23T10:10:56.850

您不能在 Phonegap 上使用输入文件。不支持。你需要做这样的事情：

```
 <div ng-click="selectPicture()">selectPicture</div> // Put own HTML format but call the fuction

        // Angular fuction
             $scope.selectPicture = function () {
                var srcType = Camera.PictureSourceType.SAVEDPHOTOALBUM;
                var options = {
                    // Some common settings are 20, 50, and 100
                    quality: 50,
                    destinationType: Camera.DestinationType.FILE_URI,
                    // In this app, dynamically set the picture source, Camera or photo gallery
                    sourceType: srcType,
                    encodingType: Camera.EncodingType.JPEG,
                    mediaType: Camera.MediaType.PICTURE,
                    allowEdit: true,
                    correctOrientation: true  //Corrects Android orientation quirks
                }
                navigator.camera.getPicture(function cameraSuccess(imageUri) {
                    MobileUploadFile(imageUri);

                }, function cameraError(error) {
                    console.debug("Unable to obtain picture: " + error, "app");
                }, options);
            }

            function MobileUploadFile(imageURI) {
                //console.log(imageURI);   
                var options = new FileUploadOptions();
                options.fileKey = "file";
                options.fileName = imageURI.substr(imageURI.lastIndexOf('/') + 1);
                options.mimeType="image/jpeg";
                options.chunkedMode = false;

                var ft = new FileTransfer();
                ft.upload(imageURI, encodeURI("http://www.example.com/upload.php"), function(result){
                    //console.log(JSON.stringify(result));
                }, function(error){
                    //console.log(JSON.stringify(error));
                }, options);
            };

     // php file
     <?php 
       // Directory where uploaded images are saved
        $dirname = "uploads/"; 
        // If uploading file
         if ($_FILES) {
             print_r($_FILES);
             mkdir ($dirname, 0777, true);
             move_uploaded_file($_FILES["file"]{"tmp_name"],$dirname."/".$_FILES["file"]["name"]);
        }
      ?> 
```

# javascript - 带有嵌套属性的 Javascript 合并对象

> ID：13861312
> 
> 赞同：6
> 
> 时间：2012-12-13T13:53:57.943
> 
> 标签：javascript, object, merge

让我们看一下下面的例子：

```
var ref = {
    "fullName": {
        "rules": {
            "type": "string",
            "minLength": 4,
            "maxLength": 64
        },
        "description": "Full name of a user."
    }
};

var user = {
    "fullName": {
        "rules": {
            "required": true,
            "maxLength": 128
        },
        "message": "You have submitted a wrong full name."
    }
}; 
```

现在我想要的是：

1.  合并对象和属性。
2.  如果已经设置了第二个对象的属性，则保留它们（maxLength）

以下是我期望的结果：

```
var res = {
    "fullName": {
        "rules": {
            "required": true,
            "maxLength": 128
            "type": "string",
            "minLength": 4
        },
        "description": "Full name of a user.",
        "message": "You have submitted a wrong full name."
    }
}; 
```

我试过的：

```
function mergeNestedObjects(firstObject, secondObject) {
    var finalObject = {};

    for (var propertyKey in firstObject) {
        var propertyValue = firstObject[propertyKey];

        if (typeof(propertyValue) === "object") {
            finalObject[propertyKey] = mergeNestedObjects(firstObject[propertyKey], secondObject[propertyKey]);
        } else if (secondObject[propertyKey] === undefined) {
            finalObject[propertyKey] = firstObject[propertyKey];
        } else {
            finalObject[propertyKey] = secondObject[propertyKey];
        }
    }

    return finalObject;
} 
```

上面的函数合并但不知何故不嵌套属性。

**UPDATE & ANSWER**让它工作了，我忘了遍历第二个对象，多么愚蠢。感谢@AnthonyGrist

```
function mergeProperties(propertyKey, firstObject, secondObject) {
    var propertyValue = firstObject[propertyKey];

    if (typeof(propertyValue) === "object") {
        return mergeNestedObjects(firstObject[propertyKey], secondObject[propertyKey]);
    } else if (secondObject === undefined || secondObject[propertyKey] === undefined) {
        return firstObject[propertyKey];
    }

    return secondObject[propertyKey];
}

function mergeNestedObjects(firstObject, secondObject) {
    var finalObject = {};

    // Merge first object and its properties.
    for (var propertyKey in firstObject) {
        finalObject[propertyKey] = mergeProperties(propertyKey, firstObject, secondObject);
    }

    // Merge second object and its properties.
    for (var propertyKey in secondObject) {
        finalObject[propertyKey] = mergeProperties(propertyKey, secondObject, firstObject);
    }

    return finalObject;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T10:03:37.390

```
function mergeProperties(propertyKey, firstObject, secondObject) {
    var propertyValue = firstObject[propertyKey];

    if (typeof(propertyValue) === "object") {
        return mergeNestedObjects(firstObject[propertyKey], secondObject[propertyKey]);
    } else if (secondObject[propertyKey] === undefined) {
        return firstObject[propertyKey];
    }

    return secondObject[propertyKey];
}

function mergeNestedObjects(firstObject, secondObject) {
    var finalObject = {};

    // Merge first object and its properties.
    for (var propertyKey in firstObject) {
        finalObject[propertyKey] = mergeProperties(propertyKey, firstObject, secondObject);
    }

    // Merge second object and its properties.
    for (var propertyKey in secondObject) {
        finalObject[propertyKey] = mergeProperties(propertyKey, secondObject, firstObject);
    }

    return finalObject;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-27T04:58:25.183

很老的问题，但可能很有用。一点点递归。

```
function mergeObjects(og, so) {
    for (var key in so) {
        if (typeof (og[key]) === 'object') {
            mergeObjects(og[key], so[key]);
        } else {
            if (og[key] || typeof (og[key]) === 'boolean') {
                og[key] = so[key];
            }
        }
    }
    return og;
}

mergeObjects(ref, user); 
```

# windows-phone-7 - DatePicker NullReference 异常

> ID：13861314
> 
> 赞同：0
> 
> 时间：2012-12-13T13:54:03.140
> 
> 标签：windows-phone-7, animation, datepicker, nullreferenceexception

当我像这样为我的应用程序启用动画时`App.xaml.cs`：

```
RootFrame = new RadPhoneApplicationFrame { Transition = new RadContinuumAndSlideTransition() }; 
```

`NullReference`单击日期时间选择器时出现异常：

> 在 Microsoft.Phone.Controls.DataSource.GetPrevious(Object relativeTo)
> 在 Microsoft.Phone.Controls.Primitives.LoopingSelector.Balance()
> 在 Microsoft.Phone.Controls.Primitives.LoopingSelector.UpdateData()
> 在 Microsoft.Phone.Controls.Primitives .LoopingSelector.OnSizeChanged(Object sender, SizeChangedEventArgs e)
> at System.Windows.FrameworkElement.OnSizeChanged(Object sender, SizeChangedEventArgs e)
> at MS.Internal.JoltHelper.RaiseEvent(IntPtr target, UInt32 eventId, IntPtr coreEventArgs, UInt32 eventArgsTypeIndex)

正如我在各种网站上看到的，这是一个已知问题，但我没有找到解决方案。

我可以为单个页面禁用此动画吗？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:02:40.567

当您使用 Telerik 控件时，为什么不使用工具包`RadDatePicker`中的 代替`DatePicker`？

Telerik 控件没有工具包中的问题。（我刚刚检查过。）

如果您在使用 Telerik RadDatePicker（和 RadDateChooser）时需要帮助，请参阅[http://www.telerik.com/support/videos/windows-phone-videos/getting-started-with-raddatepicker.aspx](http://www.telerik.com/support/videos/windows-phone-videos/getting-started-with-raddatepicker.aspx)

# git - 为什么用现在时描述 git 提交被认为是一种好习惯？

> ID：13861318
> 
> 赞同：36
> 
> 时间：2012-12-13T13:54:12.907
> 
> 标签：git, commit, commit-message

我已经阅读了各种 Git 教程，包括官方的教程，它们似乎都告诉我用现在时编写 Git 提交注释是一种很好的惯例和习惯。

这是为什么？其背后的原因是什么？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-12-13T13:56:43.383

Git 是一个分布式 VCS（版本控制系统）。多人可以在同一个项目上工作。它将从许多来源获得变化。
而不是写消息来说明提交者做了什么。最好将这些消息视为在将提交应用于repo**后将要做什么的说明。**

所以写一个这样的消息

> 修复错误#1234

代替

> 修复错误 #1234

将 git log 视为不是您的操作历史记录，而是所有提交所做操作的序列描述。

[关于它的黑客新闻](http://news.ycombinator.com/item?id=2079612)有一个很大的话题。在那里你会得到这个约定背后的更多原因。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-13T14:07:42.720

这只是一个（相对）常见的约定，因此可以在项目中一致地提交消息。向 Git 提交补丁的建议（例如）来自[`Documentation/SubmittingPatches`](https://github.com/git/git/blob/47ae905ffb98cc4d4fd90083da6bc8dab55d9ecc/Documentation/SubmittingPatches#L136-L140).

> *   描述命令语气的变化，例如“make xyzzy do frotz”而不是“[This patch] makes xyzzy do frotz”或“[I] changed xyzzy to do frotz”，就好像你正在命令代码库改变它的行为.

从括号中的主语可以看出，该约定消除了对不提供任何有用好处的提交动词的重复（或暗示）主语的需要。

# design-patterns - 这是中介者设计模式的一个很好的实现吗？

> ID：13861320
> 
> 赞同：2
> 
> 时间：2012-12-13T13:54:20.113
> 
> 标签：design-patterns

我必须解释调解器设计模式，但我不确定我是否在正确的上下文中使用了它，所以我想问问你的意见。![在此处输入图像描述](../Images/5e096b5addaff2abddfd91f418c95b23.png)

我有四个对象，每个对象都需要与其他对象交互。因此，为了使代码更易于维护和重用， **我添加了中介者模式，因此重点是集中相关对象之间的复杂通信和控制。**

![在此处输入图像描述](../Images/d6ab9cfae30fde718f11a59ea8504a9f.png)

所以我的问题是：你认为它**是中介模式的一个很好的例子吗？**谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:55:54.080

这是一个很好的例子，我想......

中介者是集中通信的对象，以避免一起通信的每个对象之间的依赖关系。

对于您的示例，我将添加一个新类，例如，`WeatherStation`它的作用是提醒无人机和漫游者让它们回家，并解释说由于中介模式，只有`WeatherStation <-> Mediator`实现接口。

代替 ：

```
WeatherStation<->Scientists
WeatherStation<->Jedays
... 
```

# iphone - 使用操作表时隐藏键盘的问题

> ID：13861326
> 
> 赞同：0
> 
> 时间：2012-12-13T13:54:47.857
> 
> 标签：iphone, ios4, uiactionsheet

我正在显示操作表`textFieldDidBeginEditing`，这是我的代码：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField {
    // dept_label is my UITextField property
    if (textField == dept_label) {
        [textField setUserInteractionEnabled:YES]; // i also used dept_label instead textfield here...
        [textField resignFirstResponder];
        UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"Select"
                                                                 delegate:self
                                                        cancelButtonTitle:@"OK"
                                                   destructiveButtonTitle:nil
                                                        otherButtonTitles:@"Manpower", @"Admin",@"Research" ,nil];
        [actionSheet setActionSheetStyle:UIActionSheetStyleDefault];
        [actionSheet showInView:self.view];
    }
} 
```

问题是操作表被激活但键盘没有被隐藏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:16:27.383

像这样使用`UITextField`委托：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
    if (textField == dept_label) {
        // dept_label is my UITextField property
        [textField setUserInteractionEnabled:YES];
        UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"Select"
                                                                 delegate:self
                                                        cancelButtonTitle:@"OK"
                                                   destructiveButtonTitle:nil
                                                        otherButtonTitles:@"Manpower", @"Admin", @"Research", nil];
        [actionSheet setActionSheetStyle:UIActionSheetStyleDefault];
        [actionSheet showInView:self.view];
        return NO;
    }
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T05:39:45.690

```
finally this worked..

- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField{
    if(textField==dept_label){        
        [textField setUserInteractionEnabled:YES]; 
        [textField resignFirstResponder];

            UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"Select" delegate:self cancelButtonTitle:@"OK" destructiveButtonTitle:nil otherButtonTitles:@"Manpower", @"Admin",@"Research" ,nil];
    actionSheet.actionSheetStyle = UIActionSheetStyleDefault;
    [actionSheet showInView:self.view];        

    }       
    return YES;      
} 
```

# php - 当根目录中的 cookie 路径重新加载后，cookie-session 更改 ID

> ID：13861327
> 
> 赞同：1
> 
> 时间：2012-12-13T13:54:49.670
> 
> 标签：php, session, cookies, session-cookies

我有一个用 PHP 编写的网站，它通过 cookie 使用会话。当应用程序位于子目录中时，它可以完美运行，因为 cookie 路径设置为`/sub/`.

当我尝试在我的域的根目录 (http://domain.tld/index.php) 中设置我的网站时，我将 cookie 路径设置为“/”。根据 PHP 文档，这应该不是问题：

> session_set_cookie_params cookie 工作的域上的路径。**对域上的所有路径使用单斜杠 ('/')**。

[http://php.net/manual/en/function.session-set-cookie-params.php](http://php.net/manual/en/function.session-set-cookie-params.php)

不幸的是，在这种情况下，每次重新加载页面后 sessionID 似乎都会发生变化。它发生在 Chrome 和 Opera 中，但无论出于何种原因，它都适用于 Firefox。

顺便说一句，如果会话不是持久的，我就无法登录或做任何事情......

有没有人已经经历过这样的事情？或者有什么想法？

编辑：它发生在 Fedora 和 CentOS 上的 Apache 上。

# javascript - concat 比 push 快还是慢

> ID：13861329
> 
> 赞同：9
> 
> 时间：2012-12-13T13:55:04.903
> 
> 标签：javascript, performance

对于这段代码，我想知道 javascript 中最好的方法是什么？

```
var output = foo +";"+bar; 
```

或者

```
var output = new Array(foo,bar).join(";"); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-13T13:57:12.703

这并不重要。

根据他们的基准，有些博客会宣传第一个或第二个。

但事实是 javascript 引擎经过大量优化和更改，因此您不会发现可重现和跨浏览器的大差异。

选择最易读的。一般是第一个。

如果你真的做了 10000 次推送的循环，请在你的真实代码中的客户浏览器上对其进行基准测试，并选择最好的，但前提是存在显着差异。不要忘记 javascript 很快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:57:20.040

[http://jsperf.com/](http://jsperf.com/)中有很多测试用例（例如[http://jsperf.com/joint-vs-concat](http://jsperf.com/joint-vs-concat)）。在那里你可以检查哪个更慢。根据我的经验，取决于用户的浏览器（更准确地说是 JS 引擎）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:10:34.633

根据我的说法，字符串连接比数组连接更快。看到这些测试用例

[http://jsperf.com/array-join-vs-string-connect](http://jsperf.com/array-join-vs-string-connect)
[http://jsperf.com/join-concat/2](http://jsperf.com/join-concat/2)

# orchardcms - Orchard CMS 1.6 placement.info 订单不起作用

> ID：13861330
> 
> 赞同：0
> 
> 时间：2012-12-13T13:55:10.903
> 
> 标签：orchardcms, orchardcms-1.6

我刚刚将站点迁移到 1.6 - 表单 1.5，并且我的主题中的placement.info 文件遇到问题，

我有以下展示位置

```
<Match DisplayType="Detail">
    <Place Parts_Title="/BeforeMain:1.5"/>
</Match> 
```

我也有一个 Bred crumb 菜单小部件放置在 Main 之前，放置设置为 5

无论我对数字位置值做什么，标题总是出现在面包屑之前。

我还遇到了主题placement.info文件的其他问题，其他人得到这个。有任何想法吗 ？

这适用于 1.5

**更新**- 见评论

![在此处输入图像描述](../Images/cdee054982ea8ec52ba651aeb4767c7e.png)

![在此处输入图像描述](../Images/f615fe2104fe8c132ae84b9cf657c1e3.png)

**更新 2**

```
<Match ContentType="AlternateIndexPage">
    <Place Parts_Introduction="/BeforeMain:4"/>
    <Place Parts_Title="/BeforeMain:3"/>
    <Place Fields_Input__AltenateIndexPage_VideoUrl="/BeforeMain:2"/>
<Math> 
```

无论我在 palcement.info 文件中包含什么数字/顺序，视频总是首先出现，标题第二，介绍第三。如果我使用“-”，项目就会消失，所以我知道放置文件正在工作 - 有点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:28:48.077

不幸的是，小部件的位置和放置不是一回事。我怀疑如果这在 1.5 中有效，那是巧合。请提交一个错误，以便可以在未来的版本中使用。

一种（不理想的）解决方法是将该区域分成两部分并将小部件发送到一个，并将标题发送到另一个。

# php - ui 滑块上的值

> ID：13861332
> 
> 赞同：2
> 
> 时间：2012-12-13T13:55:18.273
> 
> 标签：php, javascript, html, jquery-ui, slider

我有一个滑块的代码并且结构显示正确但是当我移动幻灯片时，不要在输入框“数量”内显示答案的值，出现“未定义”，我不知道为什么，因为当你检查你可以看到 div 滑块在标签 name 中有一个值。我也尝试过使用 html 标签“值”，但也没有用。我能做些什么 ？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <title>  Questionnaire </title>
    <meta name="Description" content="Questionnaire on business model" />
    <script src="jquery-1.8.3.js" type="text/javascript"></script>
    <script src="jquery.validationEngine-en.js" type="text/javascript" charset="utf-8"></script>
    <script src="jquery.validationEngine.js" type="text/javascript" charset="utf-8"></script>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>    
    <script src="jquery-ui-1.9.2.js"></script>
    <script src="factaris.js"></script> 
    <link rel="stylesheet" href="STYLE.css" type="text/css" media="screen" />
    <script>
    jQuery(document).ready(function(){

        ///SLIDER !!!!!!!!!!!!!!!!!!!!!!!!!!!

        $( "#slider" ).slider({ 
        slide: function( event, ui ) {
            //$( "#amount" ).val( "$" + ui.value );  // show range 0-100 without ini values !!!!!
            // $( "#amount" ).val( "$" + this.value  ); //show undefined
            //   $( "#amount" ).val( "$" + 8); // show 8 all time
            $( "#amount" ).val( "$" + ui.name );    
        }
        });     
    });
    </script>
</head>
<body>
<div id="sizer">
    <form id= "formID"  name="formID" class="formular"   method="post" action= "<?= $url = "QUESTIONAREFINISHING.php"; ?>" accept-charset="utf-8">
    <div id="questionare" >
    <!--SLIDER-->   

    <?php if($row_questionset['Constructor']=="Slider"){?>
    <div>
        <label class="desc" value= "<?php $row_questionset['QuestionIDFKPK'];?>">
        <?php echo $row_questionset['QuestionValue']; ?>
        </label>
    </div>                                                          
    <?php while ($row_Answer=mysql_fetch_array($AnswersValue)){ ?>  
    <p>
        <label for="amount"><?php echo $row_questionset['QuestionValue']; ?></label>
        <input type="text" id="amount" name="amount"  />
    </p>

    <div id="slider" name="<?php echo $row_Answer['AnswerValue']; ?>" ></div>

    <?php } // End while loop ?>
    <?php } //End slider row ?> 
    <!--/SLIDER-->  
    </div>   
</form>
</div>   
</body>    
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:03:58.547

要读取 jQuery UI Slider 的值，您需要在有问题的元素上调用滑块方法，并使用“值”作为参数，如下所示：

```
$( "#slider" ).slider( "value" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:43:43.087

with the value slider argument, if you want read the value on change the slider or/and on slide use the event methods of the slider:

```
function outputValue(sliderDom) {
    alert($(sliderDom).slider('value'));
};

$( "#slider" ).slider({
    //... your init
    slide: function(){
        outputValue(this);
    },
    change: function(){
        outputValue(this);
    }
}); 
```

edit

to fix you value problem try this

```
$('#slider').slider({
    //..
    min: 0,
    max: 100000 //or more
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T15:34:41.697

如果您希望 m 设置初始值，则需要在调用`slider`方法时设置它（使用 JS - 而不是 HTML）。

```
$("#slider).slider({
    max: slideMax,
    min: slideMin,
    value: slideInit,

// To set the value to the `#amount` element, use the following `slide` event
    slide: function( event, ui ) {
        $( "#amount" ).val( ui.value );    
    }
}); 
```

# php - 在 SQL 语句中将参数传递给 LIMIT 的 PHP PDO 语句似乎不起作用

> ID：13861336
> 
> 赞同：1
> 
> 时间：2012-12-13T13:55:32.970
> 
> 标签：php, sql, parameters, pdo, int

出于某种原因，我无法让它工作。它返回正确数量的行，但数据似乎是空的，无论我尝试什么：

```
$page = intval(trim($_GET['p']));
if($page <= 0)
    $page = 1;
$showcount = 15;
$limit_start = (int)(($page-1)*$showcount);

$stmt_scorelist = $dbh->prepare("
    SELECT user_id,min_time 
    FROM scoretable 
    WHERE type_id = :type AND level_id = :level_id 
    GROUP BY user_id 
    ORDER BY MIN(min_time) ASC 
    LIMIT :limit_start, :showcount
");
$stmt_scorelist->bindParam(':type', $type);
$stmt_scorelist->bindParam(':level_id', $level_id);
$stmt_scorelist->bindValue(':limit_start', (int)$limit_start, PDO::PARAM_INT);
$stmt_scorelist->bindValue(':showcount', (int)$showcount, PDO::PARAM_INT); 
```

我试图像这样明确输入数字：

```
$stmt_scorelist->bindValue(':limit_start', 0, PDO::PARAM_INT);
$stmt_scorelist->bindValue(':showcount', 15, PDO::PARAM_INT); 
```

它总是返回正确数量的行，但数据似乎是空的。我也尝试过 (int)$var 和 intval(trim($var))，我尝试使用 bindParam() 而不是 bindValue()，但没有一个有效。

有效的一件事是，如果我在语句中注释绑定值并用纯数字替换它们，它会按预期工作，正确数量的行和数据返回：

```
$stmt_scorelist = $dbh->prepare("
    SELECT user_id,min_time 
    FROM scoretable 
    WHERE type_id = :type AND level_id = :level_id 
    GROUP BY user_id 
    ORDER BY MIN(min_time) ASC 
    LIMIT 0, 15
");
$stmt_scorelist->bindParam(':type', $type);
$stmt_scorelist->bindParam(':level_id', $level_id);
//$stmt_scorelist->bindValue(':limit_start', 0, PDO::PARAM_INT);
//$stmt_scorelist->bindValue(':showcount', 14, PDO::PARAM_INT); 
```

我究竟做错了什么？我见过很多人有同样的问题，但他们找到的解决方案似乎都不适合我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:21:07.873

这解决了这个问题：

```
$dbh->setAttribute( PDO::ATTR_EMULATE_PREPARES, false ); 
```

# sql - SQL sum by year report，寻找优雅的解决方案

> ID：13861337
> 
> 赞同：4
> 
> 时间：2012-12-13T13:55:35.997
> 
> 标签：sql, sql-server, sql-server-2008, tsql, pivot

我有一个包含 3 列的表：ItemCode、Quantity 和 DocDate。我想以更“优雅”的方式创建以下报告：

```
SELECT T0.ItemCode, 
       (SELECT SUM(QUANTITY) FROM MyTable T1 WHERE YEAR(T0.DocDate) = 2011 AND T0.ItemCode = T1.ItemCode) AS '2011',
       (SELECT SUM(QUANTITY) FROM MyTable T1 WHERE YEAR(T0.DocDate) = 2012 AND T0.ItemCode = T1.ItemCode) AS '2012'
FROM MyTable T0
GROUP BY T0.ItemCode, YEAR(T0.DocDate) 
```

我很确定有一种更好、更有效的方法来编写它，但我想不出正确的语法。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T14:03:32.150

这种类型的数据转换称为`PIVOT`. 您可以通过多种方式执行此操作。您可以使用该`PIVOT`函数，也可以使用带有`CASE`语句的聚合函数：

**静态数据透视版本：**这是您将所有值硬编码到查询中的地方

```
select ItemCode, [2011], [2012]
from
(
  SELECT ItemCode,
    QUANTITY,
    YEAR(DocDate) Year
  FROM MyTable 
) src
pivot
(
  sum(quantity)
  for year in ([2011], [2012])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/6839d/2)

**聚合案例：**

```
SELECT ItemCode, 
  SUM(CASE WHEN YEAR(DocDate) = 2011 THEN QUANTITY ELSE 0 END) AS '2011',
  SUM(CASE WHEN YEAR(DocDate) = 2012 THEN QUANTITY ELSE 0 END) AS '2012'
FROM    MyTable 
GROUP BY ItemCode; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/6839d/9)

**Dynamic Pivot：**如果您有已知数量的要转换的值，前两个版本会很好用`year`，但是如果您有未知数量的值，那么您可以使用动态 sql：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(YEAR(DocDate)) 
                    from mytable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT itemcode, ' + @cols + ' from 
             (
                select itemcode, quantity, year(docdate) year
                from mytable
            ) x
            pivot 
            (
                sum(quantity)
                for year in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/79996/1)

所有三个版本都将产生相同的结果：

```
| ITEMCODE | 2011 | 2012 |
--------------------------
|        1 |  200 |   45 |
|        2 |   89 |    0 |
|        3 |    0 |    7 | 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T14:01:02.497

你可以试试这个：

```
SELECT  T0.ItemCode, 
        SUM(CASE WHEN YEAR(T0.DocDate) = 2011 THEN QUANTITY ELSE 0 END) AS '2011',
        SUM(CASE WHEN YEAR(T0.DocDate) = 2012 THEN QUANTITY ELSE 0 END) AS '2012'
FROM    MyTable T0
GROUP BY 
        T0.ItemCode 
```

# asp.net - 如何在使用多线程时更新 aspx 页面

> ID：13861339
> 
> 赞同：0
> 
> 时间：2012-12-13T13:55:41.427
> 
> 标签：asp.net, .net, multithreading, webforms, asp.net-ajax

我正在使用多线程来更新/显示页面的内容。页面正在使用多个（和嵌套的）更新面板。现在，我正在使用以下**逻辑**来更新页面。

我有七个线程，每个线程通过查询数据库获取数据并将它们显示在页面的特定部分。我们启动线程并等待 2 分钟，如果某些线程仍在工作，则在通过 2 分钟后，我们会中断这些并在页面上显示填充的数据，这些对线程的调用正在页面加载事件中进行。

**这里的问题**是我们必须在页面加载之前等待特定时间，然后在该时间限制之后，页面将显示填充数据。用户需要等待很长时间才能看到该页面，这给人留下了非常糟糕的印象。

如果我们取消 2 mints 的限制，那么页面渲染速度很快，但它不会显示所有数据。

**我在这里想要的是**，当我们调用线程时，我们不需要等待所有线程，当一个线程完成时，它应该在页面上显示它的数据，并且一旦其他线程完成，它们应该相应地显示它们的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:00:05.650

在测试了许多技术后，我找到了这个问题的解决方案。

为了实现这一点，我们不需要使用线程。当我们调用页面时，服务器会创建该页面的对象并执行所有必需的执行，然后渲染该页面，在服务器上销毁其对象并将渲染的页面发送到客户端浏览器。所以渲染后我们无法接收线程的响应。要接收线程的响应，我们必须停止显式呈现页面（这会导致延迟，这是我们不希望的）。

所以我们的解决方案是使用带有 Web 方法的 JSON Ajax API（如果您正在处理复杂的对象，则使用序列化和反序列化）。

我们必须加载包含所有控件的页面，页面的 onload 事件，调用使用 JSON API 调用 Web Method 的 javascript 方法，在收到 Web Method 的响应后，我们必须使用 JavaScript/JQuery 手动更新相应的控件。

# java - 如何从 osgi 中的字节反序列化对象

> ID：13861342
> 
> 赞同：9
> 
> 时间：2012-12-13T13:55:57.417
> 
> 标签：java, osgi, apache-felix, bnd

在我的 osgi 应用程序中，我有三个包`travel.api`，`table.api`和`utils`. `travel.api`取决于`table.api`取决于`utils`。请注意，`travel.api`它不直接依赖于`utils`. 我使用 aQute Bnd 来生成清单，我相信它工作正常。清单如下所示。

有一个类叫做`PageData`，它有一个类型的字段`TableData`，而它又有一个类型的字段`TestObject`。`PageData`位于`travel.api`,`TableData`位于`table.api`,`TestObject`位于`utils`. 加载捆绑包时，这一切都可以正常工作。当我收到一个表示`PageData`对象的字节数组时，问题就来了。我必须在`travel.api`捆绑包中反序列化它。这不应该是一个问题，因为这是定义它的地方。我使用`org.jboss.netty.handler.codec.serialization.ObjectDecoderInputStream`并从`travel.api`包中传递类加载器。下面显示的异常被抛出，但基本上它说：

```
Caused by: java.lang.ClassNotFoundException: com.openaf.utils.TestObject not 
    found by travel.api [9]. 
```

现在这是有道理的，因为如果您查看`Import-Package`for`travel.api`您会看到（位于`com.openaf.utils`哪里）没有列出。`TestObject`如果我添加这个包，那么它会被正确反序列化。但是，这似乎不是一个好的通用解决方案，因为我必须遍历`PageData`使用的每个字段并确保它们都导入到此模块中，并递归地导入这些字段包含的每个字段等。

我在这里做错了什么吗？

使用 OSGi 时反序列化对象的最佳方法是什么？

如果我做得正确并且我必须指定所有“深度”导入，有没有办法让 Bnd 进行“深度”生成？

任何帮助将不胜感激！

我使用 felix v4 作为我的 osgi 库。

```
Manifest-Version: 1
Bnd-LastModified: 1355404320862
Bundle-ManifestVersion: 2
Bundle-Name: travel.api
Bundle-SymbolicName: travel.api
Bundle-Version: 0
Created-By: 1.7.0_07 (Oracle Corporation)
Export-Package: com.openaf.travel.api;uses:="scala.runtime,scala,scala.c
 ollection,com.openaf.pagemanager.api,scala.reflect,com.openaf.table.api
 ";version="0.0.0"
Import-Package: com.openaf.pagemanager.api,com.openaf.table.api,scala,sc
 ala.collection,scala.reflect,scala.runtime
Tool: Bnd-1.44.0

Manifest-Version: 1
Bnd-LastModified: 1355404158858
Bundle-ManifestVersion: 2
Bundle-Name: table.api
Bundle-SymbolicName: table.api
Bundle-Version: 0
Created-By: 1.7.0_07 (Oracle Corporation)
Export-Package: com.openaf.table.api;uses:="scala.runtime,scala,scala.co
 llection,scala.reflect,scala.collection.immutable,scala.collection.gene
 ric,com.openaf.utils";version="0.0.0"
Import-Package: com.openaf.utils,scala,scala.collection,scala.collection
 .generic,scala.collection.immutable,scala.reflect,scala.runtime
Tool: Bnd-1.44.0

Manifest-Version: 1
Bnd-LastModified: 1355404158801
Bundle-ManifestVersion: 2
Bundle-Name: utils
Bundle-SymbolicName: utils
Bundle-Version: 0
Created-By: 1.7.0_07 (Oracle Corporation)
Export-Package: com.openaf.utils;uses:="scala.runtime,scala,scala.collec
 tion,scala.reflect";version="0.0.0"
Import-Package: scala,scala.collection,scala.reflect,scala.runtime
Tool: Bnd-1.44.0

java.io.InvalidClassException: failed to read class descriptor
at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1585)
at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1514)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1750)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
at org.jboss.netty.handler.codec.serialization.ObjectDecoderInputStream.readObject(ObjectDecoderInputStream.java:115)
at com.openaf.rmi.common.DefaultObjectEncoder$.decode(RMICommon.scala:33)
at com.openaf.rmi.client.ClientHandler.messageReceived(ClientPipelineFactory.scala:43)
at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:363)
at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:345)
at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:211)
at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:94)
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:372)
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:246)
at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:38)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.ClassNotFoundException: com.openaf.utils.TestObject not found by travel.api [9]
at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1460)
at org.apache.felix.framework.BundleWiringImpl.access$400(BundleWiringImpl.java:72)
at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:1843)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:264)
at org.jboss.netty.handler.codec.serialization.ClassLoaderClassResolver.resolve(ClassLoaderClassResolver.java:30)
at org.jboss.netty.handler.codec.serialization.CachingClassResolver.resolve(CachingClassResolver.java:39)
at org.jboss.netty.handler.codec.serialization.CompactObjectInputStream.readClassDescriptor(CompactObjectInputStream.java:55)
at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1583)
... 28 more 
```

谢谢，尼克。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T09:42:57.033

这实际上听起来像是反序列化的严重缺陷？一个体面的反序列化器应该使用导致加载的类的类加载器。给定的类加载器应该只用于顶级对象，因为还没有父对象。

所以在这种情况下，给定的类加载器用于加载 PageData。PageData的loader是用来加载TableData的，TableData的loader是用来加载TestObject的。除非您使用的反序列化器确实脑部受损，否则没有逻辑原因会失败，因为这是 VM 用来加载类的模型。我很惊讶 Java 反序列化器会这样做，我认为这种行为是一个严重的错误，因为它使用与 VM 不同的规则。

序列化是 OSGi 中的一个问题，因为模块化是关于隐藏实现类；反序列化倾向于访问这些私有类，这是模块化的对立面。但是，对此有很好的解决方案（不包括 Dynamic-ImportPackage，它以一种比使用纯 Java 更复杂和更昂贵的方式恢复到 JAR 地狱）。基本技巧是从公共 API 中获得一个根对象，该对象可以访问私有/临时需要的类。嗯，这听起来不像是服务吗？

## 解决方案

看看人们对此有多么消极，一个小例子如何解决 Java 序列化（即 ObjectInputStream 和 ObjectOutputStream）的问题。在您的问题中，您提到了我不熟悉的类 ObjectDecoderInputStream。

设置是：

```
Bundle A:    class a.A { B b; }   (import b)
Bundle B:    class b.B { C c; }   (import c)
Bundle C:    class c.C { } 
```

所以让我们首先序列化一个对象：

```
ByteArrayOutputStream bous = new ByteArrayOutputStream();
ObjectOutputStream oos = new ObjectOutputStream(bous);

oos.writeObject(this);
oos.close(); 
```

现在是困难的部分。我们重写了 resolveObject 方法，这让我们有机会实际进行正确的类加载......

```
ObjectInputStream in = new ObjectInputStream(new ByteArrayInputStream(bous.toByteArray())) {
    Set<ClassLoader>    lhs = new LinkedHashSet<ClassLoader>();
    {
        // Keep a set if discovered class loaders
        lhs.add(getClass().getClassLoader());
    }

    @Override
    protected Class< ? > resolveClass(ObjectStreamClass desc) 
         throws ClassNotFoundException, IOException {

         for (ClassLoader cl : lhs) try {
             Class< ? > c = cl.loadClass(name);

             // we found the class, so we can use its class loader,
             // it is in the proper class space  if the uses constraints 
             // are set properly (and you're using bnd so you should be ok)

             lhs.add(c.getClassLoader());

             // The paranoid among us would check
             // the serial uuid here ...
             // long uuid = desc.getSerialVersionUID();
             // Field field = c.getField("serialVersionUID");
             // assert uuid == field.get(null)

             return c;
         } catch (Exception e) {
           // Ignore
         }

         // Fallback (for void and primitives)
         return super.resolveClass(desc);
     }
 };

 // And now we've successfully read the object ...

 A clone = (A) in.readObject(); 
```

请注意，这仅在正确导出瞬态图时才有效。即，如果你能做到，`new TableData`那么这也应该有效。一个不起作用的例子是，例如，如果您从接口获取实现。接口类未连接到 impl。班级。即，如果你有一个扩展 TableData 的 TableDataImpl，你会被搞砸的。在这些情况下，您需要一些服务来找到实现的“域”。

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T14:44:05.743

没有其他方法可以做到这一点。

您必须明确说明反序列化对象树包含在您尝试执行此操作的捆绑包中的所有依赖项。

您可以尝试将所有域对象放入一个包中，比如说*模型*，然后让所有其他包依赖它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T14:48:43.683

是的，这是一个棘手的问题。在许多情况下，问题甚至更糟，甚至可能不知道反序列化流需要哪些包。对于这些，编译时依赖与运行时依赖不同。

为了解决这些情况，我使用了[DynamicImports-Package](http://wiki.osgi.org/wiki/DynamicImport-Package)或使用[BundleWiring API](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/wiring/BundleWiring.html)。两者都很好，但动态导入更容易。

我会说将需要此类加载的部分尽可能多地隔离在一个单独的包中，并让该包使用 DynamicImport。

祝你好运，弗兰克

# c# - MvcSiteMapProvider - 菜单间歇性消失

> ID：13861343
> 
> 赞同：1
> 
> 时间：2012-12-13T13:56:01.323
> 
> 标签：c#, asp.net-mvc-3, mvcsitemapprovider

我正在使用 Maarten Balliauw 的[ASP.NET MVC SiteMapProvider](https://github.com/maartenba/MvcSiteMapProvider)。

**我使用助手显示主导航和面包屑。我不时注意到它们完全从呈现的页面中消失了。**

在本地环境中，我必须重建项目并离开浏览器中的当前页面才能将它们取回。在生产中，我发现我必须重新上传站点 DLL。这些“修复”本身只能取得好坏参半。

有一个“轻微”的模式，但未确认 - 当您编辑或上传视图时会出现问题。

任何帮助将不胜感激。这是我的一些代码：

站点地图文件的一部分：

```
 <mvcSiteMapNode title="Home" controller="Home" action="Index" key="home">
    <mvcSiteMapNode title="About us" controller="about" action="index" key="about">
      <mvcSiteMapNode title="Our Approach" controller="about" action="approach" url="/about/our-approach" imageUrl="/content/images/ourApproachNavImg.jpg" />
    </mvcSiteMapNode>

    <mvcSiteMapNode title="News" controller="news" action="index" key="news" showSubNav="false">
      <mvcSiteMapNode dynamicNodeProvider="XXX.Helpers.NewsItemDynamicNodeProvider, KDC" title="" />
    </mvcSiteMapNode>
  </mvcSiteMapNode> 
```

帮手：

```
@Html.MvcSiteMap().Menu(false, true, false)
@Html.MvcSiteMap().SiteMapPath() 
```

动态节点提供者：

```
public override IEnumerable<DynamicNode> GetDynamicNodeCollection()
        {
            var returnValue = new List<DynamicNode>();
            var newsItemService = DependencyResolver.Current.GetService<INewsItemService>();

            foreach (var item in newsItemService.GetAll(true, true))
            {
                DynamicNode node = new DynamicNode();
                node.Title = item.Title;
                node.Action = "detail";
                node.RouteValues.Add("url", item.Url);
                returnValue.Add(node); 
            }

            return returnValue;
        } 
```

web.config 中的 MvcSiteMapProvider 符合标准且未更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T21:54:18.517

MvcSiteMapProvider v3 有许多线程和缓存问题，会导致此类问题。[MvcSiteMapProvider v4](http://www.nuget.org/packages?q=mvcsitemapprovider)不再存在这些问题，因为它现在具有更好的线程安全性，并且缓存的站点地图是只读的，因此一个用户的导航不会影响其他用户。

# javascript - Jquery替换html，仅在更改的地方

> ID：13861350
> 
> 赞同：5
> 
> 时间：2012-12-13T13:56:36.433
> 
> 标签：javascript, jquery, dom, ace-editor

我正在克隆一个实时降价编辑器**[dillinger.io](http://dillinger.io)**，但与在 dillinger 中不同的是，当您在文档中嵌入视频时，但我不希望视频在每次更新文档时刷新和闪烁，这很常见。

DOM 的组织方式如下。

```
<div id='editor'></div>
<div id="viewer">
    <h2>title</h2>
    <iframe width="560" height="315" 
    src="http://www.youtube.com/embed/9bZkp7q19f0" frameborder="0" allowfullscreen>
    </iframe> <!-- Gangnam style youtube embed-->
    <p>What a dull video</p>
</div> 
```

本例中的编辑器是出色的[Ace 编辑器](http://ace.ajax.org/#nav=about)，它允许我通过`editor.getValue()`

有没有一种简单的方法可以做到这一点？我用谷歌搜索过，没有发现任何有用的东西。

这就是我目前所拥有的

```
function update(){
    var mk = editor.getValue();
    var updatedHtml = converter.makeHtml(mk);
    $('#viewer').html(updatedHtml); 
}

editor.getSession().on('change', function(e) {
    update();
}); 
```

但我想把它改成这样

```
function update(){
    var before = $('#viewer').html();   
    var mk = editor.getValue();
    var updateHtml = converter.makeHtml(mk);
    $('#viewer').replaceWhereDifferent(updateHtml, before); 
} 
```

这样做是在每次更新发生时阻止嵌入的 youtube 视频闪烁。

问题是我没有一个很好的函数形式

`replaceWhereDifferent(updateHtml, before)`

一些示例 html 字符串将是

```
<div id="viewer">
    <h2>title</h2>
    <iframe width="560" height="315" 
    src="http://www.youtube.com/embed/9bZkp7q19f0" frameborder="0" allowfullscreen>
    </iframe> <!-- Gangnam style youtube embed-->
    <p>comment</p>
</div> 
```

现在说用户将 p 评论更改为

```
<p>OMG thats the best video ever</p> 
```

我希望在不刷新视频的情况下进行更新

[所有这些都是由降价转换器从Ace 编辑器](http://ace.ajax.org/#nav=about)获取代码生成的代码。所以所有的降价都是一起转换的，我无法区分或标记降价的不同部分。我得到的只是更新的 html 字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-21T13:35:44.860

是的，这是可能的。您可以使用[Google 的 Incremental DOM](https://github.com/google/incremental-dom)，也可以查看 Flarum 使用的 s9e [TextFormatter](https://github.com/s9e/TextFormatter/blob/c79e98b41fd5517d79d29d0580f2411cce33d56e/src/render.js "s9e TextFormatter")并提取您需要的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:03:43.100

在您的 DOM 元素上放置一个属性，其中包含上次更新时间的时间戳。当进行实际更改时增加时间戳，仅当时间戳不同时才更新 DOM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:04:21.920

没有“简单”的方法。您必须区分 html 的两个位，然后用 delta 做一些花哨的事情。

我会对这个问题采取完全不同的方法：

1.  如果要更新 html，请使用 jQuery 将视频标记 HTML 放置在新的 DIV 中。
2.  使用简单的字符串替换或 .html() 或其他方式替换所有 HTML。
3.  将视频标记放回它应该在的位置。

例如

```
$('#placeholder').html($('#videodiv').html()); //1.
$('#divtoupdate').load("/URL/for/newdata");    //2
$('#videodiv').html($('#placeholder').html()); //3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T14:26:54.013

感谢您提供额外的信息。现在我们有了更清晰的画面。如果你只是想更换，`<p>`那很容易。

JS：

```
$('#add_comment').click(function(){ //User clicks add comment
  var comment = $('#comment_input').val(); //Get user's comment
  $('#viewer p').html(comment); //update viewer's <p>
}); 
```

我希望这能让您了解如何进行。

# sqlite - 用相机拍摄照片并存储在 DB Phonegap

> ID：13861352
> 
> 赞同：1
> 
> 时间：2012-12-13T13:56:49.667
> 
> 标签：sqlite, cordova

我正在尝试使用 Phonegap (Cordova 2.2) 构建一个应用程序。我对代码和 js 相当陌生，所以如果我的一些问题看起来很愚蠢，请耐心等待。我的问题有几个部分：我希望用户能够输入姓名和图像（使用设备摄像头）来创建他们的个人资料。我已经在模拟器上进行了测试，到目前为止他们可以输入他们的名字并用相机拍照。这些都在完成时显示在模拟器中。但是，显然我想保存那个细节，所以，我创建了一个数据库（从阅读来看，本地存储的大小是有限的）。1.数据库是否正确完成？我既没有收到错误也没有收到成功警报。2\. 我正在为如何将信息传递到数据库的逻辑而苦苦挣扎。我' 我猜测我在点击事件上调用 populate_UsersDB() 函数，并且需要编写某种 INSERT INTO userProfiles VALUE 的东西。另外，我可以直接从 onPhotoFileSuccess() 函数中获取 Imagedata 并将其从那里发送到数据库中。3\. 如果我不想有一个完成按钮（而是有一个“点击此处拍照”占位符），我如何测试操作是否完成并将信息发送到数据库。从阅读中，我认为我可以使用 onChange()，但不确定。另外，猜我必须使用邮政或去某个地方？如何测试操作是否完成并将信息发送到数据库。从阅读中，我认为我可以使用 onChange()，但不确定。另外，猜我必须使用邮政或去某个地方？如何测试操作是否完成并将信息发送到数据库。从阅读中，我认为我可以使用 onChange()，但不确定。另外，猜我必须使用邮政或去某个地方？

对不起，我知道这个问题中有很多问题。非常感谢任何建议或支持。谢谢。这是代码。

```
 //Use the device camera to capture an image of the user 
```

var 图片来源; // 图片源 var destinationType; // 设置返回值的格式

```
// Wait for PhoneGap to connect with the device
document.addEventListener("deviceready",onDeviceReady,false);

// PhoneGap is ready to be used!
function onDeviceReady() {
    pictureSource=navigator.camera.PictureSourceType;
    destinationType=navigator.camera.DestinationType;
}

// Called when a photo is successfully retrieved
function onPhotoDataSuccess(imageData) {
  // Get image handle
  var smallImage = document.getElementById('smallImage');

  // Unhide image elements
  //
  smallImage.style.display = 'block';

  // Show the captured photo
  // The inline CSS rules are used to resize the image
  //
  smallImage.src = "data:image/jpeg;base64," + imageData;
}

// Called when a photo is successfully retrieved
function onPhotoFileSuccess(imageData) {
  // Get image handle
  console.log(JSON.stringify(imageData));

  // Get image handle
  //
  var smallImage = document.getElementById('smallImage');

  // Unhide image elements
  //
  smallImage.style.display = 'block';

  // Show the captured photo
  // The inline CSS rules are used to resize the image
  //
  smallImage.src = imageData;
}

// A button will call this function
function capturePhotoWithData() {
  // Take picture using device camera and retrieve image as base64-encoded string
    navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality:50, destinationType:Camera.DestinationType.DATA_URL });
}
function getPhoto(source) {
  // Retrieve image file location from specified source
  navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50, 
    destinationType: destinationType.FILE_URI,
    sourceType: source });
}

// Called if something goes wrong.
function onFail(message) {
  alert('Failed because: ' + message);
}

//CREATE THE DATABASE
document.addEventListener("deviceready", onDeviceReady, false);
    var db = window.openDatabase("Users_DB", "1.0", "User Profiles DB", 200000); //will create database or open it

    //function will be called when device ready
    function onDeviceReady(){
        db.transaction(populateUsers_DB, errorCB, successCB);
    }
    //create table
    function populateUsers_DB(tx) {
        tx.executeSql('CREATE TABLE IF NOT EXISTS userProfiles (id INTEGER PRIMARY KEY AUTOINCREMENT, Name TEXT NOT NULL, Image BLOB)');
        tx.executeSql('INSERT INTO userProfiles(Name) VALUE ("")');
    }
    //function will be called when an error occurred
    function errorCB(err) {
        alert("Error processing SQL: "+err.code);
    }
    //function will be called when process succeed
    function successCB() {
        alert("success!");
        db.transaction(queryDB,errorCB);
    }
    //select all from userProfiles
    function queryDB(tx){
        tx.executeSql('SELECT * FROM userProfiles',[],querySuccess,errorCB);
    }
    function querySuccess(tx,result){
        $('#userList').empty();
        $.each(result.rows,function(index){
            var row = result.rows.item(index);
            $('#userList').append('<li><a href="#"><h3 class="ui-li-heading">'+row['Image']+'</h3><p class="ui-li-desc">Name '+row['Name']+'</p></a></li>');
        });
        $('#userList').listview();
    } 
```

# analysis - 如何指定先验分布

> ID：13861355
> 
> 赞同：1
> 
> 时间：2012-12-13T13:57:02.403
> 
> 标签：analysis, bayesian, winbugs

我正在 winbugs 中进行贝叶斯分析。这是我的模型：

```
 y[i] ~ dnorm( mu[i], tau )
 b[i] ~ dnorm(0.0, alpha)    

 mu_i = 1- (beta1*x1 + beta2*x2 + ... + beta20*x20) + b[i] 
```

其中 b[i] 是第 i 个随机效应。我想知道如何指定 tau、alpha 和 betas 的先前分布。考虑哪些点？任何帮助将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T11:48:13.507

通常，您`dgamma`用于精度参数的先验分布：

```
tau ~ dgamma(0.01, 0.01)
alpha ~ dgamma(0.01, 0.01) 
```

对于回归系数，我会使用类似平面法线的东西：

```
beta ~ dnorm(0, 1/(100000^2)) 
```

[有关回归系数的更多信息在这里](https://stats.stackexchange.com/a/40388/5509)。

# java - 如何在不使用列表的情况下使用 FragmentStatePagerSupport？

> ID：13861361
> 
> 赞同：0
> 
> 时间：2012-12-13T13:57:23.907
> 
> 标签：java, android

嗨，我在[这里](http://developer.android.com/reference/android/support/v13/app/FragmentPagerAdapter.html)按照示例进行操作，并且可以正常工作。但问题是我没有要显示的列表，所以我想知道如何修改函数以便它们不需要 xml 中的列表元素来工作？

我希望我的“R.layout.fragment_pager_list”看起来像这样

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:drawable/gallery_thumb">

    <TextView android:id="@+id/text"
        android:layout_width="match_parent" android:layout_height="wrap_content"
        android:gravity="center_vertical|center_horizontal"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:text="@string/hello_world"/>

    <!-- The frame layout is here since we will be showing either
    the empty view or the list view.  -->
    <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="1" >

        <!-- Here is the view to show if the list is emtpy -->
        <TextView android:id="@android:id/empty"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:text="No items."/>

    </FrameLayout>

</LinearLayout> 
```

IE不必有

```
<ListView android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:drawSelectorOnTop="false"/> 
```

在里面。我该如何修改

```
public static class ArrayListFragment extends ListFragment {
        int mNum;

        /**
         * Create a new instance of CountingFragment, providing "num"
         * as an argument.
         */
        static ArrayListFragment newInstance(int num) {
            ArrayListFragment f = new ArrayListFragment();

            // Supply num input as an argument.
            Bundle args = new Bundle();
            args.putInt("num", num);
            f.setArguments(args);

            return f;
        }

        /**
         * When creating, retrieve this instance's number from its arguments.
         */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            mNum = getArguments() != null ? getArguments().getInt("num") : 1;
        }

        /**
         * The Fragment's UI is just a simple text view showing its
         * instance number.
         */
        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View v = inflater.inflate(R.layout.fragment_pager_list, container, false);
            View tv = v.findViewById(R.id.text);
            ((TextView)tv).setText("Fragment #" + mNum);
            return v;
        }

        @Override
        public void onActivityCreated(Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);
            setListAdapter(new ArrayAdapter<String>(getActivity(),
                    android.R.layout.simple_list_item_1, Cheeses.sCheeseStrings));
        }

        @Override
        public void onListItemClick(ListView l, View v, int position, long id) {
            Log.i("FragmentList", "Item clicked: " + id);
        }
    }
} 
```

为了达到这个目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:05:17.310

如果您不想要列表，请不要将 a`ListFragment`用于页面。`Fragment`使用您自己的页面 UI创建您自己的。例如，[这是一个使用片段的示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/ViewPager/Fragments)，每个片段都托管一个`EditText`小部件。

# jmeter - 想要在 Jmeter 中本地保存相关变量

> ID：13861364
> 
> 赞同：1
> 
> 时间：2012-12-13T13:57:35.450
> 
> 标签：jmeter, correlation

我想在本地保存相关变量（localdrive），然后我可能需要用其他动态值编辑该变量，然后我应该将它发送到 Jmeter 中的后续请求。请建议我一种执行相同操作的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:48:39.463

JMeter 中的相关性工作如下：

*   在包含您要提取的数据的采样器上添加[正则表达式提取器，例如：](http://jmeter.apache.org/usermanual/component_reference.html#Regular_Expression_Extractor)

![在此处输入图像描述](../Images/a8793dd9bdc50642b7d6a22b23494c4f.png)

*   JMeter 将自动添加一个变量 QUANTITY 将包含提取的数据

*   如果要修改变量，您将使用[JSR223 采样器](http://jmeter.apache.org/usermanual/component_reference.html#JSR223_Sampler)

*   在下一个采样器中，您可以将数据用作 ${QUANTITY}

无需在磁盘上存储任何内容。

# python - 如何在numpy数组中找到切片对象

> ID：13861372
> 
> 赞同：1
> 
> 时间：2012-12-13T13:58:04.610
> 
> 标签：python, arrays, numpy, find, slice

我有一个包含整数和切片对象的 numpy 数组，例如：

```
x = np.array([0,slice(None)]) 
```

如何检索整数或切片对象的（逻辑）索引？我试过`np.isfinite(x)`（产生错误），`np.isreal(x)`（全部`True`）， `np.isscalar(x)`（不是元素方面），都是徒劳的。似乎有效的是

```
ind = x<np.Inf       # Out[1]: array([True, False], dtype=bool) 
```

但我不愿意对数值完全任意的对象使用数值比较（并且将来可能会改变？）。有没有更好的解决方案来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T16:15:28.740

你可以这样做：

```
import numpy as np
checker = np.vectorize( lambda x: isinstance(x,slice) )
x = np.array([0,slice(None),slice(None),0,0,slice(None)])
checker(x)
#array([False,  True,  True, False, False,  True], dtype=bool) 
```

# javascript - 获取详细的子字符串

> ID：13861376
> 
> 赞同：0
> 
> 时间：2012-12-13T13:58:21.380
> 
> 标签：javascript, jquery

我有一个要解决的问题，我有一个 javascript 字符串（是的，这是我拥有的字符串）

```
<div class="stories-title" onclick="fun(4,'this is test'); navigate(1) 
```

我想要实现的是以下几点：

1）从开始剪切字符直到第一个'字符（也剪切'）

* * *

2) 从第二个 ' 字符中剪切字符直到字符串的结尾

* * *

3）将剩余的内容放入变量中

例如，此示例的结果将是字符串“this is test”

如果有人有解决方案，我将不胜感激。尤其是一个简单的解决方案，所以我可以理解。

提前谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:01:40.623

```
var newstr = str.replace(/[^']+'([^']+).*/,'$1'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T14:02:51.973

您可以使用`split()`功能：

```
var mystr = str.split("'")[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:04:28.870

无需剪切任何内容，您只需要匹配第一个`'`和第二个之间的字符串`'`- 查看类似的问题，如[Javascript RegExp 以查找数组中引用的单词的所有出现](https://stackoverflow.com/q/13844105/1048572)

```
var string = "<div class=\"stories-title\" onclick=\"fun(4,'this is test'); navigate(1)";
var m = string.match(/'(.+?)'/);
if (m)
    return m[1]; // the matching group 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T14:04:47.513

您可以使用正则表达式

```
/\'(.+)\'/ 
```

[http://rubular.com/r/RcVmejJOmU](http://rubular.com/r/RcVmejJOmU)

[http://www.regular-expressions.info/javascript.html](http://www.regular-expressions.info/javascript.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T14:40:53.100

如果您想自己完成工作：

```
 var str = "<div class=\"stories-title\" onclick=\"fun(4,'this is test'); navigate(1)";

    var newstr = "";
    for (var i = 0; i < str.length; i++) {
        if (str[i] == '\'') {
            while (str[++i] != '\'') {
                newstr += str[i];
            }
            break;
        }
    } 
```

# python - Python MySQLdb：组合2个表，选择数据作为dict。我对字典的密钥感到困惑

> ID：13861377
> 
> 赞同：0
> 
> 时间：2012-12-13T13:58:29.757
> 
> 标签：python, mysql

我有两个表：用户和帖子

它们的结构是：

邮政：

```
+---------+----------+------+-----+---------+----------------+
| Field   | Type     | Null | Key | Default | Extra          |
+---------+----------+------+-----+---------+----------------+
| id      | int(11)  | NO   | PRI | NULL    | auto_increment |
| name    | char(30) | YES  |     | NULL    |                |
| user_id | int(11)  | YES  |     | NULL    |                |
+---------+----------+------+-----+---------+----------------+ 
```

用户：

```
+---------+----------+------+-----+---------+----------------+
| Field   | Type     | Null | Key | Default | Extra          |
+---------+----------+------+-----+---------+----------------+
| user_id | int(11)  | NO   | PRI | NULL    | auto_increment |
| name    | char(30) | YES  |     | NULL    |                |
| email   | char(30) | YES  |     | NULL    |                |
+---------+----------+------+-----+---------+----------------+ 
```

我明白了：（数据字典的键）

```
['post.user_id', 'user_id', 'name', 'email', 'post.name', 'id'] 
```

我的python代码是：

```
import MySQLdb

import MySQLdb.cursors

con = MySQLdb.connect(user = "root", passwd = "123456", db = "mydb",   cursorclass=MySQLdb.cursors.DictCursor)

cur = con.cursor()

cur.execute("select * from user, post where user.user_id = post.user_id")

print cur.fetchone().keys() 
```

但是，**为什么 data dict 的键是这样的**？谢谢。我的英语不太好，对不起

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:12:19.913

当您选择 * 时，您会询问用户和帖子中的所有列。由于 user 和 post 具有重叠名称的列，因此在其中一些之前添加 tablename，以创建唯一键。

我不确定你在期待什么，但你可以通过给列别名来明确控制你得到的键：

“选择 user.user_id 作为 user_id，post.name 作为 post_name，user.name 作为 user_name ...”

# android - 我的 IntentService 似乎没有返回答案，或者根本没有调用它？

> ID：13861379
> 
> 赞同：0
> 
> 时间：2012-12-13T13:58:34.290
> 
> 标签：android, android-intent, service, intentfilter, intentservice

我的 IntentService 有问题 - 我的目的是从活动中外包网络和处理（我之前使用了一个效果很好的 AsyncTask，但我也想将它扩展到一个小部件）。

问题是，我没有从服务中得到任何结果——它几乎似乎永远不会被调用（或者应该检索数据的代码中有问题）......

在使用服务方面比我更有经验的人可以看看并发现我犯的明显（或隐藏）错误吗？将不胜感激！

## 服务内容：

```
public class StateCheckerService extends IntentService {
public StateCheckerService() {
    super("StateCheckerService");
    // TODO Auto-generated constructor stub
}

String pageContent;
public static final String API_URL = "http://omegav.no/api/dooropen.php", INTENT_ACTION="omegavdoor.FETCH_COMPLETE", EXTRA_STATUS="status", EXTRA_TIME="time", KEY_STATUS="";
SharedPreferences settings;
private int timeMins = 0, timeoutMillis = 5000, resultCode;
int status_code = 0;

public void onCreate() {
    super.onCreate();
    // Declares the SharedPreferences object to use
    settings = PreferenceManager.getDefaultSharedPreferences(getBaseContext());

}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    super.onStartCommand(null, resultCode, resultCode);

    return START_FLAG_RETRY;
}

@Override
protected void onHandleIntent(Intent intent) {
    // TODO Auto-generated method stub
    if (checkConnection()) {
        // Start process of retrieving status
        try {
            getData();
        } catch (IOException e) {
            returnResult(11);
        } finally {
            returnResult(resultCode);
        }
    } else {
        // Notify the user of missing connection
        returnResult(0); // Error: connection unavailable
    }
}

private boolean checkConnection() {
    // Declare connection manager and NetworkInfo objects
    ConnectivityManager connMgr = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeInfo = connMgr.getActiveNetworkInfo();

    // Check network connection
    if (activeInfo != null && activeInfo.isConnected()) {
        return true;
    } else {
        return false;
    }
}

    /** Function to get data from the remote server */
    public void getData() throws IOException {
        // Create URL object to connect to
        URL url = new URL(API_URL);
        // Open new HTTP connection
        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
        // Set a connection timeout to prevent app lockup if it can't reach the server
        urlConnection.setConnectTimeout(timeoutMillis);

        // Attempt to connect and retrieve data
        try {   // Return exception if the stream is unreachable
            InputStream in = new BufferedInputStream(urlConnection.getInputStream());
            // Process the contents of the stream
            readStream(in);
        }
        finally {
            // Disconnect after retrieving data
            urlConnection.disconnect();
        }
    }

    public void readStream(InputStream input) throws IOException {
        // Reads the content of the page
        try {
            // String length varies with the time value - read some extra to avoid missing the end
            pageContent = readIt(input, 40);
            // Remove the extra white spaces at the end

        } catch (UnsupportedEncodingException e) {
            resultCode = 10;
        }
        if (pageContent == null) {
            // Stop further processing (and cause the UI to report error)
            resultCode = 13;
        } else {
            // Checks to see whether the "open" flag exists 
            if (pageContent.charAt(9) == '1') {
                // Find out how long it's been open
                int openTime = Integer.parseInt(pageContent.substring(20, pageContent.lastIndexOf("}")));
                // Convert from seconds to minutes
                timeMins = openTime / 60;
                if (timeMins > 0) {
                    resultCode = 1; // Display how long it's been open
                } else { 
                    resultCode = 2; // If it just opened
                    }                   
            } else {
                // Find out how long it's been closed
                int closedTime = Integer.parseInt(pageContent.substring(19, pageContent.lastIndexOf("}"))); // TODO: change 19 to 20 to support the API change
                // Convert from seconds to minutes
                timeMins = closedTime / 60;
                if (timeMins > 0) {
                    resultCode = 3; // Display how long it's been open
                } else {
                    resultCode = 4; // If it just closed
                }
            }
        }
    }

    // Reads an InputStream and converts it to a String.
    public String readIt(InputStream stream, int len) throws IOException, UnsupportedEncodingException {
        // Initialize reader object
        Reader reader = null;

        // Decode the input stream
        reader = new InputStreamReader(stream, "UTF-8");        
        char[] buffer = new char[len];
        reader.read(buffer);
        return new String(buffer);
    }

private void returnResult(int resultCode) {
    Intent resultIntent = new Intent();
    resultIntent.setAction(INTENT_ACTION);
    resultIntent.putExtra(EXTRA_STATUS, resultCode)
    .putExtra(EXTRA_TIME, timeMins);

}

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}
} 
```

## 调用活动的内容：

```
public class StateChecker extends Activity {
String pageContent;
boolean doorIsOpen = false, notFirstRun = false, error = false;
private static final int transitionDuration = 250;
private ResponseReceiver receiver;
TransitionDrawable transition;
TextView text_doorState;
Button button_getState;
ProgressBar door_progress;
LinearLayout background;
int timeMins;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Inflate the XML layout
    setContentView(R.layout.state_checker);

    // Declare the views to be adressed
    text_doorState = (TextView) findViewById(R.id.tv_doorState);
    button_getState = (Button) findViewById(R.id.button_refreshState);
    door_progress = (ProgressBar) findViewById(R.id.doorState_progressBar);
    background = (LinearLayout) findViewById(R.id.doorStateView);

    IntentFilter filter = new IntentFilter(ResponseReceiver.ACTION_RESP);
    filter.addCategory(Intent.CATEGORY_DEFAULT);
    receiver = new ResponseReceiver();
    registerReceiver(receiver, filter);

}

/** Receiver class to listen to and handle result from checker service */
public class ResponseReceiver extends BroadcastReceiver {
    public static final String ACTION_RESP = StateCheckerService.INTENT_ACTION;
    @Override
    public void onReceive(Context context, Intent intent) {
        int result = intent.getIntExtra(StateCheckerService.EXTRA_STATUS, 0);
        timeMins = intent.getIntExtra(StateCheckerService.EXTRA_TIME, 0);
        Toast.makeText(context, "Result received", Toast.LENGTH_SHORT).show();
        processResult(result);
    }
}

public void onStart() {
    super.onStart();
    // Checks the door status on app launch
    go();
}

public void onStop() {
    super.onStop();
    unregisterReceiver(receiver);
}

private void go() {
    // Update text and progress bar to indicate it's working
    text_doorState.setText(R.string.text_stateUpdating);
    door_progress.setVisibility(View.VISIBLE);
    // Fade the color back to grey if it is something else
    if (notFirstRun) {
        transition.reverseTransition(transitionDuration);
    }
    if (checkConnection()) {
        Intent intent = new Intent(this, StateCheckerService.class);
        startService(intent);
        notify("service started");
    } else {
        // Notify the user of missing connection
        notify(getString(R.string.error_connection_unavailable));
    }

}
private boolean checkConnection() {
    // Declare connection manager and NetworkInfo objects
    ConnectivityManager connMgr = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeInfo = connMgr.getActiveNetworkInfo();

    // Check network connection
    if (activeInfo != null && activeInfo.isConnected()) {
        return true;
    } else {
        return false;
    }
}

protected void processResult(Integer resultCode) {
    switch (resultCode) {
    case 1:
        if (timeMins < 60) {
            // Notify of open door and display minutes
            notify(getString(R.string.text_stateOpenMins, timeMins));
        } else {
            // If it's been more than an hour, display the time in hours
            int openTimeHours = timeMins / 60;
            int remainder = timeMins - (openTimeHours * 60);
            notify(getString(R.string.text_stateOpenHours, openTimeHours, remainder));
        }
        break;
    case 2:
        // Notify of open door (just opened)
        notify(getString(R.string.text_stateOpenNow));
        break;
    case 3:
        if (timeMins < 60) {
            // Notify of closed door and display minutes
            notify(getString(R.string.text_stateClosedMins, timeMins));
        } else {
            // If it's been more than an hour, display the time in hours
            int closedTimeHours = timeMins / 60;
            int remainder = timeMins - (closedTimeHours * 60);
            notify(getString(R.string.text_stateClosedHours, closedTimeHours, remainder));
        }
        break;
    case 4:
        // Notify of closed door (just closed
        notify(getString(R.string.text_stateClosedNow));
        break;
    case 10:
        // Error message: unsupported stream format
        notify(getString(R.string.error_stream_unsupported));
        break;
    case 11:
        // Error message: connection failed
        notify(getString(R.string.error_connection_failed));
        break;
    // Case 12 reserved
    case 13:
        // Error message: null data stream
        notify(getString(R.string.error_stream_retrieve));
        break;
    }
    if (resultCode >= 10) {
        error = true;
    } else {
        error = false;
    }
    updateDisplay();
}

protected void updateDisplay() {
    door_progress.setVisibility(View.GONE);
    if (!error) {
        /** Update the UI to reflect the door state */
        if(doorIsOpen) {
            // Update the text view to display an open door state
            text_doorState.setText(getString(R.string.text_stateOpen));
            // Change the background color
            background.setBackgroundResource(R.drawable.trans_open);
            transition = (TransitionDrawable) background.getBackground();
            transition.startTransition(transitionDuration);
        } else {
            // Update the text view to display a closed door state
            text_doorState.setText(getString(R.string.text_stateClosed));
            // Change the background color
            background.setBackgroundResource(R.drawable.trans_close);
            transition = (TransitionDrawable) background.getBackground();
            transition.startTransition(transitionDuration);
        }
        // Indicates that the app has gone through a successful execution
        notFirstRun = true; 
    } else {
        // If it failed to execute, display error message
        text_doorState.setText(R.string.text_stateFailed);
        // Revert to grey background
        background.setBackgroundResource(R.drawable.background);
    }

}

/** Helper class used to display toast notifications */
private void notify(String message) {
    Toast.makeText(this, message, Toast.LENGTH_LONG).show();        
}

} 
```

## 编辑（AndroidManifest）：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="tovine.omegavdoor.widget"
android:versionCode="5"
android:versionName="1.0.1" >

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="14" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".Settings"
        android:label="@string/title_activity_settings" >
    </activity>
    <activity
        android:name=".StateChecker"
        android:configChanges="orientation|screenSize"
        android:title="@string/app_name"
        android:windowSoftInputMode="stateAlwaysHidden" >

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name="com.google.ads.AdActivity"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" />

    <receiver
        android:name=".WidgetStateProvider" >
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            <action android:name="omegavdoor.FETCH_COMPLETE" />
        </intent-filter>

        <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/doorwidget" />
    </receiver>

    <service android:name="tovine.omegavdoor.widget.WidgetUpdateService">
        <intent-filter>
            <action android:name="omegavdoor.FETCH_COMPLETE" />
        </intent-filter>
    </service>

    <service android:name="tovine.omegavdoor.widget.StateCheckerService"
        android:process=":checker_process">

    </service>

    -->
   <!-- <activity
        android:name="Probability"
        android:label="@string/title_activity_probability" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="StateChecker" />
    </activity>
    <activity
        android:name=".LoadWebImg"
        android:label="TestClass" /> -->
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:32:34.763

对于**意图服务**，我们不需要实现/覆盖方法**onStartCommand**
所以删除以下代码

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    super.onStartCommand(null, resultCode, resultCode);

    return START_FLAG_RETRY;
} 
```

从**“服务内容”中**
再试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T04:48:16.657

我可能是错的，但您的 returnResult() 函数似乎没有发送任何内容。也许您忘记添加 sendBroadcst(resultIntent); 打电话给它？

# google-bigquery - HASH函数的一致性

> ID：13861380
> 
> 赞同：1
> 
> 时间：2012-12-13T13:58:35.167
> 
> 标签：google-bigquery

一个非常简单的问题：BigQuery 的功能背后隐藏了哪个版本的 CityHash `HASH`？它总是最新的（今天的 v1.1），还是固定版本？

现在，一点点背景。我计划严重依赖 BigQuery 来存储大量数据。从这些数据中，我第一次想计算一些哈希值并将其存储（类似于`hashed_value = HASH(CONCAT(column_0, column_1))`）。到目前为止，一切都很好。第二次，我想通过请求检索具有给定哈希值的行，例如`SELECT something FROM [mytable] WHERE hashed_value = HASH(CONCAT('12345', 'foobar'))`. 我在这里担心的是，在 CityHash 网页上指定这些功能不应该向后兼容。因此，如果 BigQuery 始终依赖于**最新**版本的 CityHash，我将无法在下一次 CityHash 更新后根据某些计算列的哈希值检索我的数据。对于我的应用程序，我的大型数据库基本上将变得毫无用处。

如果是这样，是否可以访问固定（或向后兼容）散列函数，除了`HASH`？上的一个`SHA`，`MD`等等，甚至是 CityHash 的固定版本。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T19:18:27.633

BigQuery 中使用的 CityHash 是来自 [http://code.google.com/p/cityhash/](http://code.google.com/p/cityhash/)的版本 从 历史来看，该值似乎会随着时间而变化。这可能是一个很好的问题： [https ://groups.google.com/forum/?fromgroups#!forum/cityhash-discuss](https://groups.google.com/forum/?fromgroups#!forum/cityhash-discuss)

BigQuery 应该支持一致的哈希。我们确实支持 sha1，但由于编码问题，现在结果无法使用。但是，您可以这样做`SELECT TO_BASE64(SHA1(CONCAT('12345', 'foobar')))`

请注意，我们可能会`SHA1`在不久的将来更改为自动对结果进行 base64 编码。我已经提交了一个内部错误来进行此更改。

# javascript - 价目表中的数字分配

> ID：13861383
> 
> 赞同：-2
> 
> 时间：2012-12-13T13:59:10.423
> 
> 标签：javascript, jquery

> **可能重复：**
> [在 javascript 中格式化数字](https://stackoverflow.com/questions/1068284/format-numbers-in-javascript)
> [如何在 JavaScript 中用逗号打印数字作为千位分隔符](https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript)

我想将价目表中差距的零点分开。

例如

当前：150000 通缉：**150 000**

当前：2730000 通缉：**2 730 000**

使用 jQuery 和所有浏览器（Chrome、Firefox、IE、Opera）

UPD我想在输入数字时动态添加空格

```
Step by step: user entered 10, in input 10
100 - 100
1000 - 1 000
10000 - 10 000
100000 - 100 000
1000000 - 1 000 000 
```

UPD 我使用了正则表达式 `val.replace(/(\S)(?=(\S\S\S)+(?!\S))/g, "$1 ");` 它只在 FF 中正确工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:05:51.960

如果`n`是您的号码，请使用以下正则表达式：

```
n.toString().replace( /\B(?=(\d{3})+(?!\d))/g, ' ' ); 
```

# excel - 使用 VBScript 计算行数据和列数据

> ID：13861388
> 
> 赞同：1
> 
> 时间：2012-12-13T13:59:37.850
> 
> 标签：excel, vbscript

如何使用 VBScript 我可以计算填充数据的行数以及有多少列具有特定行的值？

```
 Col1 Col2 Col3 ........ColN-1  ColN+1...ColN+2.......ColN+2

 Row1   A         B                             Null         Null
 Row2   1    2    Y                             .
 Row3        2                                  .
 Row4        P    Z 
  .                                             .
  .
  .
 RowN-2                                         .
 RowN-1                         T        L      Null.......Null
 RowN                     S
 RowN+1 Null ........(till the last column of the excel sheet that its version supprts.) 
```

所以在这里我需要的循环迭代，我将用于我的其他逻辑是 N 行和列，它将是 N+1 ***更新***

```
 Option Explicit

   Dim rg,CountBlank

   For C=0 to 10

    Set rg = Ob6.Range(Ob6.Columns(c),Ob6.Columns(c))
    CountBlank = objExcel1.Application.WorksheetFunction.CountBlank(rg)
    MsgBox("Column"&C": "&"Has"&(rg.rows.Count-CountBlank))
 Next 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:18:50.527

试试这个让你开始。它将为每行显示包含数据的列数，并为每列显示包含数据的行数。然后，您可以对其进行修改以更适合您的需求：

**编辑：**更新代码以捕获只有 1 列/行数据的第一行/列：

```
Option Explicit

Dim rg

'loop through columns
For C=0 to 10

    Set rg = Ob6.Columns(c)

    If objExcel1.Application.WorksheetFunction.CountA(rg) =1 Then

       Exit For

    End If

Next

MsgBox("Column" & C & " is first column with only 1 row")

'loop through rows
For C=0 to 10

    Set rg = Ob6.Rows(c)

    If objExcel1.Application.WorksheetFunction.CountA(rg) =1 Then

       Exit For

    End If

Next

MsgBox("Column" & C & " is first row with only 1 column") 
```

# c++ - 使用命令“make”时出现 libaws++ 错误

> ID：13861389
> 
> 赞同：3
> 
> 时间：2012-12-13T13:59:38.573
> 
> 标签：c++

我想在我的电脑上使用[FADE 。](http://ansrlab.cse.cuhk.edu.hk/software/fade/)所以，我必须使用 libaws++，这是一个允许与 Amazon Web Services 通信的 C++ 库。

好的，这是我的问题：

libaws++的[网站](http://aws.28msec.com/)不可用。我用谷歌搜索“libaws++”，只找到了libaws。我不知道 libaws 是否是 libaws++。他们都曾经与亚马逊网络服务通信。所以我从[sourceforge](http://sourceforge.net/projects/libaws/?source=dlp)下载 libaws 。

这是我安装 libaws 的过程：

1.  tar libaws-0.9.2.tar.gz
2.  cd libaws-0.9.2
3.  cp ~/libaws_patch_for_fade.patch libaws_patch_for_fade.patch（cp 到 libaws-0.9.2 的补丁）
4.  补丁 -p2 -i libaws_patch_for_fade.patch
5.  mkdir libawsbuild
6.  cd libawsbuild
7.  制作..
8.  制作

并出现错误：

```
 [ 28%] Building CXX object src/CMakeFiles/aws.dir/api/connectionpool.cpp.o
In file included from /home/lx/Nutstore/cloud/libaws-0.9.2/include/libaws/aws.h:                                                                                        26:0,
                 from /home/lx/Nutstore/cloud/libaws-0.9.2/include/libaws/connec                                                                                        tionpool.h:22,
                 from /home/lx/Nutstore/cloud/libaws-0.9.2/src/api/connectionpoo                                                                                        l.cpp:16:
/home/lx/Nutstore/cloud/libaws-0.9.2/include/libaws/sqsresponse.h:124:9: error:                                                                                         a€?uint64_ta€? does not name a type
In file included from /home/lx/Nutstore/cloud/libaws-0.9.2/include/libaws/aws.h:                                                                                 29:0,
                 from /home/lx/Nutstore/cloud/libaws-0.9.2/include/libaws/connec                                                                                        tionpool.h:22,
                 from /home/lx/Nutstore/cloud/libaws-0.9.2/src/api/connectionpoo  

/home/lx/Nutstore/cloud/libaws-0.9.2/include/libaws/sqsresponse.h:124:9: error:                                                                                         a€?uint64_ta€? does not name a type
In file included from /home/lx/Nutstore/cloud/libaws-0.9.2/include/libaws/aws.h:                                                                                        29:0,
                 from /home/lx/Nutstore/cloud/libaws-0.9.2/include/libaws/connec                                                                                        tionpool.h:22,
                 from /home/lx/Nutstore/cloud/libaws-0.9.2/src/api/connectionpoo                                                                                        l.cpp:16:
/home/lx/Nutstore/cloud/libaws-0.9.2/include/libaws/sdbresponse.h:105:20: warning: type qualifiers ignored on function return type [-Wignored-qualifiers]
.....
make[2]: *** [src/CMakeFiles/aws.dir/api/connectionpool.cpp.o] Error 1
make[1]: *** [src/CMakeFiles/aws.dir/all] Error 2
make: *** [all] Error 2 
```

我在谷歌和stackoverflow上搜索并没有得到任何有用的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:11:12.483

添加`#include <stdint.h>`到这些头文件的顶部。

uint64_t 是标准类型，应该可以正常工作。

（当然，除非你在一些不支持 64 位整数的奇怪平台上......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-18T17:08:45.093

刚刚用 gnu 编译器 4.9.x 编译了这个。使用较新版本的编译器，编译 libaws 需要更多步骤。

这是我必须做的：

1) 将以下行添加到 libaws-0.9.2/include/libaws/*.h 的头文件中，在所有其他包含语句之后：

```
#include <stdint.h> 
```

2) 在所有其他包含语句之后，将以下行添加到 libaws-0.9.2/include/libaws/aws.h：

```
#include <getopt.h> 
```

3) 如果您使用的是最新版本的 Gnu C++ 编译器，则需要修改 CMAKE 文件以向编译器添加一些标志，以便 libaws 中使用的旧 C++ 语法不会引发编译器错误。

将此行添加到 CMakeCompiler.txt，在所有其他 CMAKE_CXX_FLAGS 命令之后，在第 82 行附近（应该是空白行）：

```
SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -fpermissive -Wignored-qualifiers") 
```

仅供参考：如果您使用的是 Gnu C 编译器，则可能需要在其他 CMAKE 命令的末尾为 C 部分添加类似的行。文件末尾这样的东西可能会起作用，但我还没有尝试过：

```
SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -fpermissive -Wignored-qualifiers") 
```

完成后，以下是编译步骤：

```
cd libaws-0.9.2
mkdir libawsbuild
cd libawsbuild
cmake ..
make 
```

当这成功时，您可能还需要将 config.h 从 libawsbuild/include 复制到 libaws-0.9.2/include/libaws 以便编译器在编译任何代码时在它期望的位置找到 config.h '正在写作以实际使用 libaws。（尽管这可能只是我个人 makefile 的配置方式。不要引用我的话。）

# c# - 如何混合使用同一 FileStream 的 Pinvoke WriteFile 和 BinaryFormatter？

> ID：13861391
> 
> 赞同：1
> 
> 时间：2012-12-13T13:59:41.880
> 
> 标签：c#, file-io, pinvoke, filestream

我想使用WriteFile将大（〜500mb）多维数组写入文件（因为BinaryFormatter在写入大东西时非常慢，并且.Net框架中没有其他方法可以编写多维字节数组，只有单字节或一维数组, 并且进行 for 循环和逐字节写入速度很慢）。

然而，事实证明，这是被禁止的：

```
IOException
The OS handle's position is not what FileStream expected. Do not use a handle simultaneously in one FileStream and in Win32 code or another FileStream. This may cause data loss. 
```

除了在使用 WriteFile 编写后每次想使用 BinaryFormatter 编写时重新打开文件流之外，还有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-26T17:02:42.350

*（我知道这个问题已被放弃，很快就会被删除。）*

首先，`WriteFile`不要`BinaryFormatter`混合。`WriteFile`假设您知道文件格式，即写入文件的字节的解释。`BinaryFormatter`是一个序列化程序，基于 Microsoft .NET 实现内部的文件格式（有些人会说是专有的，即使信息可以在线找到）。[因此，您甚至无法`BinaryFormatter`在 Microsoft .NET 和 Mono C# 之间传递由序列化的文件。](https://stackoverflow.com/a/6809665/)

根据 OP 的描述，很明显 OP 一开始就不应该使用`BinaryFormatter`。否则 OP 将全权负责此类数据的丢失（不可恢复性）。

正如 Hans Passant 评论的那样，渐近地说， 的性能`FileStream.Write`应该能够与 Win32 调用相匹配。`WriteFile`这意味着*每次调用*的时间开销可以建模为`alpha * numberOfBytesWritten + beta`，其中`beta`是每次调用的纯常数开销。通过增加每次调用写入的字节数，可以使这种开销相对可以忽略不计。

鉴于我们不能直接将多维 C# 数组传递给`WriteFile`，这里是建议。根据 OP 的评论，假设多维数组将具有 size `byte[1024, 1024, 1024]`。

*   首先，分配一个足够大的临时一维数组。典型的建议范围从 4KB 到几 MB，但这只是一个优化细节。对于这个例子，我们使用 1MB =`byte[1048576]`因为它很好地划分了总数组大小。

*   然后，我们在最外层的维度上编写一个顶层 for 循环。

*   在下一步中，我们使用[`System.Array.Copy`实用函数](https://msdn.microsoft.com/en-us/library/z50k9bft%28v=vs.110%29.aspx)将字节从最里面的两个维度复制`1024 x 1024`到临时一维数组中。这依赖于多维数组的 C# 规范，如`System.Array.Copy`函数中所述：

> 在多维数组之间复制时，数组的行为类似于一个长的一维数组，其中行（或列）在概念上是首尾相连的。

*   一旦复制到临时 1D 数组中，就可以将其写入`FileStream.Write`.

# bash - Shell 脚本 tar 错误

> ID：13861396
> 
> 赞同：0
> 
> 时间：2012-12-13T14:00:02.593
> 
> 标签：bash, shell

在 shell 备份脚本上通过 tar 压缩文件夹时遇到问题。

```
# Path to backup directories
DIRS="/home/bob /var/www /root"

# Store todays date
NOW=$(date +"%F")

# Store backup path
BACKUP="/backup"
BACKUPDIR="$BACKUP/daily/calendar/$NOW"

# Backup file name hostname.time.tar.gz 
BFILE="dirs.tar.gz"

$TAR -zcvf ${BACKUPDIR}/${BFILE} "${DIRS}"
echo  $TAR -zcvf ${BACKUPDIR}/${BFILE} "${DIRS}" 
```

我不断收到的错误是

```
/bin/tar: Removing leading `/' from member names
/bin/tar: /home/bob /var/www /root: Cannot stat: No such file or directory
/bin/tar: Exiting with failure status due to previous errors
/bin/tar -zcvf /backup/daily/calendar/2012-12-13/dirs.tar.gz /home/bob /var/www /root 
```

如果我在终端上运行最后一个 echo 命令，它可以正常工作。在脚本中调用时不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:25:26.320

尝试删除双引号：

```
$TAR -zcvf ${BACKUPDIR}/${BFILE} ${DIRS} 
```

# python - 在对象矩阵中找到最大值的最佳pythonic方法

> ID：13861397
> 
> 赞同：0
> 
> 时间：2012-12-13T14:00:03.520
> 
> 标签：python, itertools

我有以下代码：

```
resdata = dict()
rows = result.rows.all()
for key, group in groupby(rows, lambda x: x.space):
    row = list()
    for item in group:
        cell = {
            'time': item.time,
            'value': item.value
        }
        row.append(cell)
    resdata[key] = row 
```

样本 resdata 将是：

```
 resdata = [
    {
      "skl": "nn_skl:5608", 
      "cols": [
        {
          "value": 115.396956868, 
          "time": "2012-06-02 00:00:00"
        }, 
        {
          "value": 112.501399874, 
          "time": "2012-06-03 00:00:00"
        }, 
        {
          "value": 106.528068506, 
          "time": "2012-06-18 00:00:00"
        }
      ], 
      "len": 226
    }, 
    {
      "skl": "nn_skl:5609", 
      "cols": [
        {
          "value": 114.541167284, 
          "time": "2012-06-02 00:00:00"
        }, 
      ], 
      "len": 226
    }, 
    {
      "skl": "nn_skl:5610", 
      "cols": [
        {
          "value": 105.887267189, 
          "time": "2012-06-18 00:00:00"
        }
      ], 
      "len": 225
    }
] 
```

我想要做的是在所有单元格中获得最大的“价值”和最大的“时间”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:07:16.233

假设你已经转换成一个 Python 对象，`json.loads`或者诸如此类，那么你想要类似的东西：

```
max(b["time"] for b in a["cols"] for a in data) 
```

# django - 使用 ForeignKey 类中的数据预填充表单中的字段

> ID：13861399
> 
> 赞同：3
> 
> 时间：2012-12-13T14:00:11.677
> 
> 标签：django, django-forms, django-views

我有一个

```
class SurveyAnswer(models.Model):
    rel = models.ForeignKey(Survey)
    answer = models.CharField(max_length=150)
    def __unicode__(self):
        return self.answer 
```

现在我想用这个“答案”预先填写表格：

```
survey = get_object_or_404(Survey, created_by=request.user, pk=question_id)
form_data = {"question": survey.question, "answer1":survey.surveyanswer_set.get(xxx)}
form = SurveyForm(form_data) 
```

我与 xxx 有什么关系，这样我才能得到例如与“调查”（ForeignKey）相关的第一个答案。使用 pk=1 我得到绝对数。

更新：

我现在已经完成了

```
{% for i in survey.surveyanswer_set.all %}
    <p><label>Answer {{ forloop.counter }}:</label> <textarea id="id_answer{{ forloop.counter }}" rows="6" placeholder="Type an answer option" cols="45" name="answer{{ forloop.counter }}">{{ i.answer }}</textarea></p>
{% endfor %} 
```

如果有人知道如何在视图中做得更好，请给我一个提示。

更新 2：

这在视图中更好一些（但我认为必须有一个更简单的解决方案）：

```
answers_part1 = []
for i in survey.surveyanswer_set.all():
    answers_part1.extend([i.answer])
answers_part2 = ["answer1", "answer2", "answer3", "answer4"]
answers = dict(zip(answers_part2, answers_part1))
form_data = {"question": survey.question}
form_data.update(answers)
form = SurveyForm(form_data) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T15:31:17.133

根据您的需要，有两种方法可以做到这一点：

[https://docs.djangoproject.com/en/dev/ref/forms/api/#dynamic-initial-values](https://docs.djangoproject.com/en/dev/ref/forms/api/#dynamic-initial-values)

或者，如果您的表单是 ModelForm，您可以使用实例参数：

[https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/)

# posix - 从文件描述符重命名？

> ID：13861400
> 
> 赞同：11
> 
> 时间：2012-12-13T14:00:12.297
> 
> 标签：posix, rename

[从 C 中的文件描述符获取文件名](https://stackoverflow.com/questions/1188757/getting-filename-from-file-descriptor-in-c)问题的变体。这是关于 Linux 的。

如果我有一个引用常规文件的文件描述符，我可以通过给它一个新的文件名来“保存”文件描述符（当然，在它所在的同一设备上）？我正在寻找类似于 rename(2) 或 link(2) 的东西，但它会接受文件描述符作为输入而不是文件名。

rename(2) 和 link(2) 的问题在于，即使您可以尝试从文件描述符转到文件名，这也可能会失败。我正在更准确地考虑打开的文件描述符引用已经取消链接的文件的情况——在这种情况下，文件没有更多的名称。当我们关闭（）文件描述符时，似乎没有办法阻止文件被删除。但我错了吗？我们可以使用 Posix 甚至 Linux API 重新命名吗？

*更新：我们实际上可以在 Linux 中看到已删除文件的内容`/proc/<pid>/fd/<fd>`，即使它看起来像一个损坏的符号链接。但是，我们不能使用 link(2) 或 ln(1) 来重新实现这样的文件，因为它认为我们正在尝试进行跨设备链接。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-08-06T07:25:06.223

如果问题是关于 linux 并且关于 linux > 2.6.39，您可以使用`linkat`带有`AT_EMPTY_PATH`标志的命令为文件描述符命名。请参阅手册页（[http://man7.org/linux/man-pages/man2/link.2.html](http://man7.org/linux/man-pages/man2/link.2.html)）

```
linkat(fd,"",destdirfd,"filename",AT_EMPTY_PATH); 
```

注意事项：

*   您需要定义`_GNU_SOURCE`以获取`AT_EMPTY_PATH`,
*   对于链接计数为零的文件，这不能保证有效。我不确定我是否理解手册页对此的说明。我的猜测是，当文件的链接计数为零时，文件系统上的 inode 已经被删除，以避免文件系统崩溃时出现不一致。
*   当然，如果旧文件不在目标目录的同一文件系统上，我不希望它起作用。

如果这失败了，您只能创建一个新文件并使用复制其内容`sendfile`（省略错误检查，请参阅每个函数的手册页以获取可能的错误值）：

```
struct stat s;
off_t offset = 0;
int targetfd = open("target/filename", O_WRONLY | O_CREAT | O_EXCL);
fstat(fd,&s);
sendfile(targetfd,fd,&offset, s.st_size); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T22:16:23.637

`frename`问题：存在一个采用文件描述符的假设系统调用，如果一个文件有多个名称（硬链接），当这个系统调用用于引用该文件的文件描述符时，这些名称中的哪些会被移动/重命名？

这个问题没有很好的答案，这也是这个系统调用不存在的原因之一。

`rename`处理目录条目，它们是指向文件（inode）的指针。打开的文件描述符不与任何特定的目录条目相关联，仅与文件本身（inode）相关联。从这个角度来看，您要求的系统调用实际上没有意义。没有可移植的方式来跟随一个 inode 返回指向它的目录条目（同样，它们可能不止一个）。某些操作系统可能会提供各种非便携式方法来查找此反向链接，这些方法可能会或可能不会保证总是提供结果（通常不保证），但这些方法不能回答返回哪个目录条目的问题当有多个时，据我所知，它们都没有像您正在寻找的那样扩展到系统调用。

# java - Java NoClassDefFoundError 由外部静态方法引起

> ID：13861404
> 
> 赞同：-1
> 
> 时间：2012-12-13T14:00:20.813
> 
> 标签：java, jar, noclassdeffounderror

我是一个长期的读者，第一次海报。

我使用 Netbeans 开发一个 Java 应用程序来运行一些关于项目管理的模拟。现在程序已经完成，我想制作一个 JAR 文件，以便其他团队成员可以在不安装 Netbeans 的情况下使用它。通常我只是按“构建和清理”来制作一个 JAR 文件，但这次这个技巧不起作用。当我运行 JAR 文件时，一切正常，直到我按下按钮开始模拟。在 cmd 的命令行上给出下一个错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: optimizat
ion/Lmder_fcn
        at umontreal.iro.lecuyer.randvar.BetaGen.nextDouble(BetaGen.java:109)
        at Scheduling.SimulationEngine.randomizeDurations(SimulationEngine.java:
122)
        at Scheduling.SimulationEngine.simulateNew(SimulationEngine.java:73)
        at IO.FileReader_GUI$GUIEventHandler.actionPerformed(FileReader_GUI.java
... blablabla 
```

给出的要点是该`umontreal.iro.lecuyer.randvar.BetaGen.nextDouble()`方法是从我添加到项目中的 JAR 文件中使用的静态方法。在 Netbeans 中它不会带来任何问题，但是当我在没有 Netbeans 的情况下使用“独立”运行它时会出现问题。

有人可以给我一个快速的解决方案吗？请记住，我不是专业程序员。如果您需要更多信息，请随时提出问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:20:10.957

很明显，您的 JAR 不在类路径中。请阅读本教程，它应该可以帮助您找出环境中的问题。

[PATH 和 CLASSPATH（Java™ 教程 > 基本类 > 平台环境）](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html)

此外，@Perception 在评论中包含了一个[很好的链接，它也可能对您有所帮助](https://stackoverflow.com/questions/9722257/building-jar-that-includes-all-its-dependencies)，我想确保您看到它。

# c# - Silverlight - 使用自定义方法序列化部分类

> ID：13861410
> 
> 赞同：0
> 
> 时间：2012-12-13T14:00:41.033
> 
> 标签：c#, silverlight, serialization

我有一个一直在开发的 Silverlight 应用程序。这个应用程序依赖于一个名为`Customer`. 此类的实例是从我的 Web 服务返回的。我需要添加一个调用`CalculateLoyalty()`这个类定义的方法。我希望`CalculateLoyalty`在服务器端和客户端（我的 Silverlight 应用程序）上都可用。

目前，我可以`CalculateLoyalty`在服务器上正常使用。不幸的是，该方法似乎没有通过网络传递。我有预感它的一些序列化的东西。如何在服务器端向我的类定义添加方法并确保它在客户端可用？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:04:02.130

方法不会序列化，只有数据（属性/字段值）会序列化，因此您必须在服务器上使用与客户端不同版本的 .cs 文件。您是否在 Web 服务和 silverlight 项目之间共享源代码？

如果您使用的是 .NET 4.5/VS2012，则可以创建一个“可移植类库”，其中包含您的类，可以从您的 .NET 和 Silverlight 项目中引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:38:36.150

当您生成服务引用时，它只复制公共属性和字段。您可以在服务器和客户端之间共享类并避免使用服务引用。我不会详细介绍如何执行此操作，但这里有一些相关的问题可以解释需要做什么。

[在没有自动生成代理的情况下创建 WCF 客户端](https://stackoverflow.com/questions/8361646/create-wcf-client-without-auto-generated-proxy)
[在 silverlight 上异步调用同步 WCF 操作合同方法](https://stackoverflow.com/questions/7648249/call-synchronous-wcf-operation-contract-methods-asynchronously-on-silverlight)

即使您这样做，我也必须建议不要将逻辑放在您的 DTO 上。我建议创建一个`LoyaltyCalculator`类并将 a 传递`Customer`给它。事实上，即使您通过**Add Service Reference**选项使用生成客户端，您也可以这样做。

您的默认 Silverlight 解决方案将有 2 个项目。

*   MyApp - 这是您的 Silverlight 项目。
*   MyApp.Web - 这是宿主 Web 项目。

您不需要这样做，但我建议添加 2 个新项目。

*   MyApp.Shared - 一个 .NET 类库
*   MyApp.Shared.Silverlight - Silverlight 类库。

此时，您需要向 Silverlight 项目和 Web 项目添加对适当类库的项目引用。

将类添加`LoyaltyCalculator`到`MpApp.Shared`，或者`MyApp.Web`如果您不想创建共享库。继续在这里实现这个类。

现在在 中`MyApp.Shared.Silverlight`，或者`MyApp`如果您不想创建共享库，请选择*Add -> Existing Item*。浏览并选择`LoyaltyCalculator.cs`。 **不要双击它！！！** 相反，单击“添加”按钮上的小向下/更多箭头。现在选择*Add As Link*。

`LoyaltyCalculator`现在您的服务器和客户端都可以使用，您只需维护一份副本。

# entity-framework - 从聚合根中删除子

> ID：13861412
> 
> 赞同：3
> 
> 时间：2012-12-13T14:00:45.073
> 
> 标签：entity-framework, repository, domain-driven-design, aggregateroot

我有一个带有*Add*、*Update*、*Delete*的公共存储库。我们将其命名为**CustomerRepository**。

我有一个名为**Customer**的实体（POCO） ，它是一个聚合根，带有**Addresses**。

```
public class Customer
{
     public Address Addresses { get; set; }
} 
```

我处于分离实体框架 5 场景中。

现在，假设在获得客户后，我选择删除客户地址。我通过*Update*方法将**Customer**聚合根提交到存储库。

 *如何保存对地址所做的修改？

1.  如果地址 id 为 0，我可以假设地址是新的。
2.  对于地址的其余部分，我可以选择附加所有地址，无论如何都将其标记为已更新。
3.  对于已删除的地址，我看不到任何解决方法...

我们可以说这个解决方案是不完整和低效的。

那么应该如何更新聚合根子节点呢？

我是否必须使用*AddAddress*、*UpdateAddress*、*DeleteAddress*等方法完成**CustomerRepository**？

 ***似乎它会打破这种模式......

我是否在每个 POCO 上设置了持久性状态：

```
public enum PersistanceState
{
     Unchanged,
     New,
     Updated,
     Deleted
} 
```

然后在我的**CustomerRepository**中只有一种方法*Save*？

在这种情况下，我似乎正在重新发明实体“非 POCO”对象，并将数据访问相关属性添加到业务对象......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T23:09:58.147

First, you should keep your repository with Add, Update, and Delete methods, although I personally prefer Add, indexer set, and Remove so that the repository looks like an in memory collection to the application code.

Secondly, the repository should be responsible for tracking persistence states. I don't even clutter up my domain objects with

```
object ID { get; } 
```

like some people do. Instead, my repositories look like this:

```
public class ConcreteRepository : List<AggregateRootDataModel>, IAggregateRootRepository 
```

The AggregateRootDataModel class is what I use to track the IDs of my in-memory objects as well as track any persistence information. In your case, I would put a property of

```
List<AddressDataModel> Addresses { get; } 
```

on my CustomerDataModel class which would also hold the Customer domain object as well as the database ID for the customer. Then, when a customer is updated, I would have code like:

```
public class ConcreteRepository : List<AggregateRootDataModel>, IAggregateRootRepository
{
    public Customer this[int index]
    {
        set
        {
            //Lookup the data model
            AggregateRootDataModel model = (from AggregateRootDataModel dm in this
                                           where dm.Customer == value
                                           select dm).SingleOrDefault();
            //Inside the setter for this property, run your comparison 
            //and mark addresses as needing to be added, updated, or deleted.
            model.Customer = value;
            SaveModel(model); //Run your EF code to save the model back to the database.
        }
    }
} 
```

The main caveat with this approach is that your Domain Model must be a reference type and you shouldn't be overriding GetHashCode(). The main reason for this is that when you perform the lookup for the matching data model, the hash code can't be dependent upon the values of any changeable properties because it needs to remain the same even if the application code has modified the values of properties on the instance of the domain model. Using this approach, the application code becomes:

```
IAggregateRootRepository rep = new ConcreteRepository([arguments that load the repository from the db]);
Customer customer = rep[0]; //or however you choose to select your Customer.
customer.Addresses = newAddresses;  //change the addresses
rep[0] = customer; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:54:42.127

最简单的方法是使用自我跟踪实体自我跟踪实体[的目的是什么？](https://stackoverflow.com/questions/5091974/what-is-the-purpose-of-self-tracking-entities/5092097#5092097)（我不喜欢它，因为跟踪是不同的责任）。

艰难的方式，你拿原来的收藏，然后比较：-/

[保存 EF4 POCO 对象的更改时更新关系](https://stackoverflow.com/questions/3635071/update-relationships-when-saving-changes-of-ef4-poco-objects/3635326#3635326)

其他方式可能是事件跟踪？****

# java - 如果 jar 已经在运行，是否阻止它运行？

> ID：13861413
> 
> 赞同：4
> 
> 时间：2012-12-13T14:00:44.800
> 
> 标签：java, jvm, locking

> **可能重复：**
> [java/shellscript 代码来确定 jar 文件是否已经在当前机器上运行](https://stackoverflow.com/questions/13857979/java-shellscript-code-to-find-out-if-a-jar-file-is-already-running-on-current-ma)

我很想为此获得一个跨平台的解决方案，但即使它只是 unix，也可以。

简单的解决方案是从 shell（伪代码）执行此操作（如果 ps -aux | grep myJar | print {awk 2}.contains myPID，请不要运行 myProgram。

现在不幸的是，我们的 linux 团队不希望这样的脚本在生产中运行，因为它可能（诚然）具有不良行为。

所以我需要的是能够运行一个文件，并在它运行时查看是否有另一个程序正在运行。如果程序已经在运行并且低于该时间限制，它应该阻止程序运行。

一个例子：

Myprog.jar -- 超时 5 分钟

Myprog.jar 位于每 4 分钟调用一次的 cron 中，

第一次调用它启动，第二次调用它仍在运行，但是由于它没有超过超时，所以很好。

如果在第三次检查通过时（在执行 8 分钟时）它仍在运行，它会被杀死，然后它的进程会被自己替换。

如果有人可以帮助我了解如何执行此操作（我们一直在尝试设置锁定文件，但成功有限）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:12:19.097

您可以让您的程序在程序启动时打开一个虚拟文件以使用[FileWriter](http://docs.oracle.com/javase/7/docs/api/java/io/FileWriter.html)进行写入，并保持文件打开直到程序完成。

当您现在启动程序的第二个实例时，它还将尝试打开此文件进行写入，这将引发[IOException](http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html)，因为只有一个进程可以同时拥有一个文件的写入句柄。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T14:16:23.537

您可以将端口用作信号量。有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/4883771/check-for-open-ports-with-java)。我认为移植将是一个很好的跨平台解决方案

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T14:55:47.587

您可以在固定位置创建临时文件。

```
private static final File LOCK_FILE = new File("app.lock");

public static boolean checkIfAlreadyRunning()
{
    return LOCK_FILE.exists();
}

public static void createLockFile()
{
    LOCK_FILE.createNewFile();
    Runnable shutDown = new Runnable()
    {
         public void run()
         {
             try
             {
                 LOCK_FILE.delete();
             } catch (Exception e) { /* Sad but true */ }
         }
    };

    Runtime.getRuntime().addShutdownHook(new Thread(shutDown));
    Thread.setUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler()
    {
         public void uncaughtException(Thread t, Exception e)
         {
              shutDown.run();
              System.exit(-1);
         }
    });
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T15:23:21.300

我遇到了完全相同的问题，解决起来可能非常棘手。基于文件和套接字的方法都可以工作，但它在某些操作系统上变得非常棘手（想想在多个终端服务器会话中具有多个用户的 Windows 等）。

首先，确定您只需要一个实例的*范围。*然后决定解决方案。

具有固定端口号的 ServerSocket 方法*将允许您**每台机器*一个实例（可能不完全是您想要的）。

可以定制锁定文件方法以在用户临时目录中创建锁定文件，因此它为*每个会话/用户*提供一个实例。

我个人使用一种组合方法，其中锁定文件指定一个*随机*端口，第二个实例连接到该端口以将命令行参数传递给正在运行的实例。

# iphone - 为 UINavigation Bar 设置提示

> ID：13861414
> 
> 赞同：0
> 
> 时间：2012-12-13T14:00:47.390
> 
> 标签：iphone, objective-c, ios

我试图搜索，但找不到适合我的正确答案。我尝试在导航栏中设置 PromptText，但它不起作用。不管我把这行代码放在哪里

```
self.navigationController.navigationBar.topItem.prompt = @"MyTitle"; 
```

这没用。我把它放在 Child 和 RootViewController 中。效果是RootViewController有提示但ChildViewController没有。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:04:05.060

我不知道你到底想做什么。但你不应该只改变`topItem`. 相反，像这样更改视图控制器的导航项：

```
self.navigationItem.prompt = @"MyTitle"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:05:58.747

根据调用的时间，它可能不会产生您期望的效果，因为它取决于当时的 topItem 是什么。相反，从每个视图控制器的`navigationItem.prompt`.

# android - Android 自定义形状按钮

> ID：13861416
> 
> 赞同：44
> 
> 时间：2012-12-13T14:00:53.530
> 
> 标签：android, android-layout, android-widget, onclicklistener, android-custom-view

如何在 Android 中制作自定义形状的可点击视图或按钮？

当我单击时，我想避免触摸空白区域。

![在此处输入图像描述](../Images/b8152e885820550483b16e9821514f7d.png)

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-14T13:20:52.837

有趣的问题。我尝试了一些解决方案，这就是我发现的与您想要实现的结果相同的结果。以下解决方案解决了 2 个问题：

1.  您呈现的自定义形状
2.  按钮的右上角不应该是可点击的

所以这是分三步解决的问题：

## 步骤1

创建两个形状。

*   按钮的第一个简单矩形形状：**shape_button_beer.xml**

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android" >

        <gradient
            android:angle="90"
            android:endColor="#C5D9F4"
            android:startColor="#DCE5FD" />

        <corners
            android:bottomLeftRadius="5dp"
            android:bottomRightRadius="5dp"
            android:topLeftRadius="5dp" >
        </corners>

    </shape> 
    ```

*   第二个形状用作按钮右上角的掩码：**shape_button_beer_mask.xml**。它是黑色纯色的简单圆圈。

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android"
        android:shape="oval" >

        <solid android:color="#000000" />

    </shape> 
    ```

## 第2步

在您的主布局中，通过下一种方法添加按钮：

*   RelativeLayout 是这个自定义按钮的容器
*   第一个 LinearLayout 是蓝色按钮，里面有啤酒图标和文本
*   第二个 ImageView 是蓝色按钮上方的掩码。这是肮脏的把戏：
    1.  边距为负，将掩码设置在正确的位置
    2.  我们将 id 定义为能够在点击时覆盖（参见步骤 3）
    3.  `android:soundEffectsEnabled="false"`- 这样用户就不会觉得他按下了什么东西。

XML：

```
 <!-- Custom Button -->
    <RelativeLayout
        android:layout_width="120dp"
        android:layout_height="80dp" >

        <LinearLayout
            android:id="@+id/custom_buttom"
            android:layout_width="100dp"
            android:layout_height="100dp"
            android:background="@drawable/shape_button_beer" >

            <!-- Beer icon and all other stuff -->

            <ImageView
                android:layout_width="40dp"
                android:layout_height="40dp"
                android:layout_marginLeft="5dp"
                android:layout_marginTop="15dp"
                android:src="@drawable/beer_icon" />
        </LinearLayout>

        <ImageView
            android:id="@+id/do_nothing"
            android:layout_width="120dp"
            android:layout_height="100dp"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_marginRight="-50dp"
            android:layout_marginTop="-50dp"
            android:background="@drawable/shape_button_beer_mask"
            android:soundEffectsEnabled="false" >
        </ImageView>
    </RelativeLayout>
    <!-- End Custom Button --> 
```

## 第 3 步

在您的主要活动中，您定义了两个：按钮和掩码的点击事件，如下所示：

```
LinearLayout customButton = (LinearLayout) findViewById(R.id.custom_buttom);
customButton.setOnClickListener(new View.OnClickListener()
{
    @Override
    public void onClick(View arg0)
    {
        Toast.makeText(getApplicationContext(), "Clicked", Toast.LENGTH_SHORT).show();
    }
});

// Mask on click will do nothing
ImageView doNothing = (ImageView) findViewById(R.id.do_nothing);
doNothing.setOnClickListener(new View.OnClickListener()
{
    @Override
    public void onClick(View arg0)
    {
        // DO NOTHING
    }
}); 
```

而已。我知道这不是一个完美的解决方案，但在您描述的用例中它可能会有所帮助。我已经在我的手机上对其进行了测试，当您单击蓝色区域时，它的外观是这样的，而其他区域则不会发生任何事情：

*   ![在此处输入图像描述](../Images/2b598f14e5c15737b1fcabf70ddc6605.png)

希望它以某种方式有所帮助:)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-25T06:32:44.497

使用 OnTouch 而不是 OnClick 并检查您在按钮中使用的图像的 alpha 值。如果它不等于零，请执行任何您想要的操作。检查以下代码，

```
final Bitmap bitmap;  //Declare bitmap     
bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.TheImage);

public boolean onTouch(View v, MotionEvent event) {

        int eventPadTouch = event.getAction();
        float iX=event.getX();
    float iY=event.getY();

        switch (eventPadTouch) {

            case MotionEvent.ACTION_DOWN:
                if (iX>=0 & iY>=0 & iX<bitmap.getWidth() & iY<bitmap.getHeight()) { //Makes sure that X and Y are not less than 0, and no more than the height and width of the image.                
                    if (bitmap.getPixel((int) iX, (int) iY)!=0) {
                        // actual image area is clicked(alpha not equal to 0), do something 
                    }               
                }
                return true;                
        }           
        return false;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-14T09:52:43.640

使用图层列表，您可以设计任何形状任何渐变按钮顶部这里是示例

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape xmlns:android="http://schemas.android.com/apk/res/android"
            android:shape="rectangle">
            <corners

                android:topLeftRadius="0dp"
                android:topRightRadius="0dp"
                android:bottomLeftRadius="2dp"
                android:bottomRightRadius="15dp"
                />            
            <!-- The border color -->
            <solid android:color="#ffffff" />
        </shape>
    </item>

    <item android:right="2dp"
        android:left="2dp"
        android:bottom="2dp">
            <shape>            
            <gradient                
                android:startColor="#002a36"
                android:centerColor="#457c8e"
                android:endColor="#e6ffff"               
                android:angle="90" 
                  android:centerY="1"
                android:centerX="0.5"           
                />          

            <corners

                android:topLeftRadius="0dp"
                android:topRightRadius="0dp"
                android:bottomLeftRadius="2dp"
                android:bottomRightRadius="15dp"
                />            
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" 
                />                        
        </shape>
    </item>
</layer-list> 
```

使用 -ve 半径值来制作你提到的按钮形状

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-13T14:10:57.463

你可以试试这个：

```
 <Button
        android:id="@+id/logout"
        android:layout_width="240dp"
        android:layout_height="28dp"
        android:layout_weight="1"
        android:gravity="center"
        android:text="ContactsDetails"
        android:textColor="#ffffff" android:layout_marginLeft="50dp" android:background="@drawable/round"/> 
```

并在 drawable 文件夹中创建 round.xml 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
      <shape xmlns:android="http://schemas.android.com/apk/res/android"
      android:shape="rectangle" android:padding="0dp" android:useLevel = "false">
    <!-- you can use any color you want I used here gray color-->
     <solid android:color="#ABABAB"/> 
       <corners
       android:bottomRightRadius="0dp"
         android:bottomLeftRadius="0dp"
       android:topLeftRadius="0dp"
      android:topRightRadius="70dp"/>
       </shape> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-04T14:33:40.437

我有一个类似的问题，但我不想依赖后面的代码来检查像素值。我想要一种简单的方法（不是类重载）将触摸事件限制为仅可绘制的子部分。下面我对可绘制对象使用 LinearLayout，然后在其中放置一个透明按钮（带文本）。我可以调整按钮的边距以定位可点击区域。

```
 <LinearLayout
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="match_parent"
        android:orientation="horizontal"
        android:background="@drawable/circle">
        <Button
            android:layout_height="match_parent"
            android:layout_width="match_parent"
            android:id="@+id/btnTimer1"
            android:text="0:00"
            android:textColor="#ffffff"
            android:textSize="22dp"
            android:layout_margin="20dp"
            android:background="@android:color/transparent"/>
    </LinearLayout> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-19T16:03:18.170

我在这里找到的最佳和最简单的解决方案 (as4me) [- 它是 Button 的子类](https://stackoverflow.com/questions/18074303/how-to-create-custom-shape-button-with-selector-in-android/19583072#19583072)，因此它支持选择器。因此，您需要做的就是为每个按钮状态绘制/添加相应的 png，以使用选择器并在 xml 中声明 onClick 或在代码中添加 OnClickListener，您就可以开始了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-31T05:35:59.387

我尝试了@Basim Sherif ([链接](https://stackoverflow.com/a/14516572/1321026)) 的答案，但只有当按钮大小与原始图像相同时，它才能很好地工作。如果按钮被拉伸，则可点击区域将更小，如果按钮设置为更小尺寸，则可点击区域将大于实际按钮。

解决方案很简单，即缩放 iX 和 iY 值以匹配原始位图。

这是我修改后的代码版本：

```
final Bitmap bitmap;  //Declare bitmap     
bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.TheImage);

public boolean onTouch(View v, MotionEvent event) {

    int eventPadTouch = event.getAction();
    float iX=event.getX();
    float iY=event.getY();

    // Get the dimensions used in the view
    int realW = this.getWidth();
    int realH = this.getHeight();

    // Get the dimensions of the actual image
    int bitmapW = bitmap.getWidth();
    int bitmapH = bitmap.getHeight();

    // Scale the coordinates from the view to match the actual image
    float scaledX = iX * bitmapW / realW;
    float scaledY = iY * bitmapH / realH;

    switch (eventPadTouch) {
        case MotionEvent.ACTION_DOWN:
            if (scaledX >= 0 & scaledY >= 0 & scaledX < bitmap.getWidth() & scaledY < bitmap.getHeight()) { //Makes sure that X and Y are not less than 0, and no more than the height and width of the image.                
                if (bitmap.getPixel((int) scaledX, (int) scaledY)!=0) {
                    // actual image area is clicked(alpha not equal to 0), do something 
                }
            }
            return true;
    }
    return false;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-24T00:10:55.893

与其做所有这些更改，不如在按钮周围的部分使用框架布局，并用一些东西（圆形，如圆形按钮）遮住右上角，并在该部分上不分配点击侦听器。这实际上隐藏了下框架（即您的原始按钮）并用非活动部分掩盖它。

# php - 使用 PDO 扩展插入

> ID：13861423
> 
> 赞同：0
> 
> 时间：2012-12-13T14:01:22.843
> 
> 标签：php, zend-framework, pdo

看来我在这部分有语法错误。它快把我逼疯了。也许插入语法不正确？

```
public static function saveUser($form)
{
  $connexion = new PDO("mysql:host=localhost;dbname=cdiscountdb", 'root', 'root'); // connexion à la BDD
  $connexion->setAttribute  (PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
  $connexion->exec("INSERT INTO ope_tartine_nl(first_name,last_name,email,created_date,updated_date) VALUES ($form['name'],$form['lastname'],$form['email'],date("Y-m-d H:i:s"),date("Y-m-d H:i:s"))");

} 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:25:25.663

您正在尝试在字符串中嵌入值。您应该阅读以下内容：

*   [PHP 手册，re：“双引号”字符串](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.double)
*   [Bobby Tables](http://bobby-tables.com/)，或者为什么不用 SQL 语句来做这件事
*   [PHP 手册，回复：PDO 准备好的语句](http://au1.php.net/manual/en/pdo.prepare.php)

然后看看这个版本的代码：

```
public static function saveUser($form)
{
  $connexion = new PDO("mysql:host=localhost;dbname=cdiscountdb", 'root', 'root'); // connexion à la BDD
  $connexion->setAttribute  (PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
  $sql = "INSERT INTO ope_tartine_nl(first_name,last_name,email,created_date,updated_date) VALUES (?,?,?,?,?)";
  $cmd = $connexion->prepare($sql);
  $result = $connexion->exec(array($form['name'], $form['lastname'], $form['email'], date("Y-m-d H:i:s"), date("Y-m-d H:i:s")));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:04:40.180

```
$connexion->exec("INSERT INTO ope_tartine_nl(first_name,last_name,email,created_date,updated_date) VALUES ('".$form['name']."','".$form['lastname']."','".$form['email']."','".date("Y-m-d H:i:s")."','".date("Y-m-d H:i:s"))."'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:36:47.757

由于您使用 Zend Framework 标记了您的问题，因此 ZF 执行此操作的方法是：

```
$db->insert('ope_tartine_nl', array(
    'first_name' => $form['name'],
    'last_name' => $form['lastname'],
    'email' => $form['email'],
    'created_date' => date("Y-m-d H:i:s"),
    'updated_date' => date("Y-m-d H:i:s")
)); 
```

（`$db`Zend_Db 适配器实例在哪里）

# php - 每次登录都更新哈希盐是个好主意吗？

> ID：13861427
> 
> 赞同：6
> 
> 时间：2012-12-13T14:01:36.000
> 
> 标签：php, security, hash, salt

我想做一个安全的网站。每次用户登录时更新密码盐是个好主意吗？

编辑：我另外使用硬编码的全局盐。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-13T14:03:10.333

不，这根本没有意义。

加盐哈希的目的是即使原始密码相同也使它们唯一。这避免了例如彩虹表攻击或在哈希足以登录的另一个网站上重新使用被盗的哈希（发生在糟糕的记住我实现中）。

假设攻击者从您的数据库中获取了存储的密码哈希。这通常意味着他知道盐和最终哈希。现在他已经可以暴力破解这个单一的密码了。假设没有冲突，当暴力攻击成功时，他最终会得到用户的实际密码。无论此时使用什么盐，那个都可以工作。

有关加盐的更多信息，我建议您阅读有关[IT 安全的](http://security.stackexchange.com)[出色答案](https://security.stackexchange.com/a/17435/427)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T14:04:39.637

应该为每个用户随机生成一个新的盐，并且每次他们**至少**更改密码。我不确定每次登录生成一个新的是否是一个好主意。这似乎有点矫枉过正，并没有提供任何显着的额外安全性。

您可以尝试使用额外的静态站点范围的密钥。

在这种情况下，即使您的数据库遭到破坏，哈希和盐也将可用。但是黑客需要访问本地文件才能获得您的静态密钥。

散列（散列（salt + secret_key）+ 密码）

# objective-c - 从 NSDate 对象中删除时间并将其保存在 NSDate 中而不是字符串中？

> ID：13861429
> 
> 赞同：4
> 
> 时间：2012-12-13T14:01:37.043
> 
> 标签：objective-c, ios, cocoa-touch, nsdate, nsdateformatter

关于日期和时间有很多问题，但我的问题有点不同。

为什么要`NSDate`加上时间呢？时间为什么不能去掉`NSDate`？我可以删除时间但它需要保存在String中，为什么不允许保存它`NSDate`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:17:41.557

`NSDate`实际上存储了从参考日期（2001 年 1 月 1 日）开始的秒数。剩下的一切都是基于这个秒数的日历计算。如果您截断时间组件并将结果存储为“NSDate”，您将在不同的时区拥有不同的日期。

您应该考虑使用`NSDateFormatter`将`NSDate`值转换为字符串。利用：

```
[formatter setDateStyle:NSDateFormatterMediumStyle];
[formatter setTimeStyle:NSDateFormatterNoStyle]; 
```

设置日期格式化程序以忽略时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-15T06:55:50.873

这是你要找的吗？

```
func dayOf(date: NSDate) -> NSDate {
    return NSCalendar.currentCalendar().dateBySettingHour(0, minute: 0, second: 0, ofDate: date, options: NSCalendarOptions())!
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-20T04:34:10.247

**快速**解决这个问题的一种可重用方法是在 NSDate 上编写一个扩展来修剪对象的时间。

```
import Foundation

extension NSDate {
  func trimTime() -> NSDate {
      let cal = NSCalendar(calendarIdentifier: NSCalendarIdentifierGregorian)!
      let components = cal.components([.Day, .Month, .Year], fromDate: self)
      return cal.dateFromComponents(components)!
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T14:07:28.023

这不可能从 NSDate 中删除 TimeStamp。NSDate 总是包含时间戳。

NSDate 基于 UTC 时区。如果在美国是凌晨 1 点，那么在其他国家/地区将是下午 12:30，并且日期会有所不同。如果有不同的日期，那么在何时输入谁将变得很麻烦。因此，要使日期一致，需要时间戳。

编辑：

Zaph 建议的 UTC 更新 :) Daij-Djan 建议的 tiemstamp

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-13T14:19:03.987

NSDate 是一种时间戳的表示方式，你可以在同一个 NSDate 对象的不同时区得到不同的日期，所以你不能只保存 NSDate 对象的“日期”部分，这不是 NSDate 的工作方式。

如果您不希望日期字符串中出现时间，只需在没有时间的情况下对其进行格式化。

我的建议是在您的数据库中保存时间戳，如果您需要查找某个日期，请使用范围查询，这样您就可以处理时区问题。

使用日期字段很难实现时区功能。

# c# - 更改控制台颜色在多线程应用程序中无法正常工作

> ID：13861431
> 
> 赞同：14
> 
> 时间：2012-12-13T14:01:41.950
> 
> 标签：c#, console, thread-safety

我正在开发基本上是控制台应用程序的多线程应用程序（服务器）。在其中，我将处理日志显示到控制台，默认情况下为白色。但是在成功的交易中，我以绿色显示文本，在不成功的交易中，我以红色显示文本。所以我在 Program.cs 中有三个单独的函数。

对于简单的日志

```
public static void Write(string text)
{
        try
        {
            Console.Out.Write(text);
        }
        catch (Exception)
        { }
    } 
```

对于不成功的交易，我将颜色更改为红色，然后打印，然后返回白色

```
 public static void WriteError(string text)
    {
        Console.ForegroundColor = ConsoleColor.Red;
        Console.WriteLine("\t" + text);
        Console.ForegroundColor = ConsoleColor.White;
    } 
```

对于成功的交易，我将颜色更改为绿色，然后打印，然后返回白色

```
 public static void WriteSuccess(string text)
    {
        Console.ForegroundColor = ConsoleColor.Green;
        Console.WriteLine("\t" + text);
        Console.ForegroundColor = ConsoleColor.White;

    } 
```

问题是当超过 200 个客户端连接并且每个客户端的事务日志都在控制台上打印时。当我将单行的颜色更改为绿色时，它也会导致许多其他正常日志行也变为绿色。所以请告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-08-14T14:01:09.870

如果你的类是唯一一个写入控制台的类，那么锁定一个私有对象，正如其他人提到的那样，将起作用。

但是如果有其他写入者，您还需要与他们同步，否则他们可能会在您处于锁内时进行写入。如果您查看 的实现`Console`，您会注意到它`Console.Out`是 a [`SyncTextWriter`](http://referencesource.microsoft.com/#mscorlib/system/io/textwriter.cs,9e3dd0323cf4ee8b)，它在自身上同步（使用`[MethodImplAttribute(MethodImplOptions.Synchronized)]`）。这意味着如果您将其用作同步对象，您将与其他编写器同步：

```
lock (Console.Out)
{
    Console.ForegroundColor = ConsoleColor.Green;
    Console.WriteLine("\t" + text);
    Console.ForegroundColor = ConsoleColor.White;
} 
```

如果其他编写者也设置颜色并使用他们自己的同步对象，这仍然无法正常工作。但如果其他作者也同步，它会起作用`Console.Out`。

这种方法的问题在于它依赖于实现细节，但我不知道有什么更好的解决方案。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-13T14:03:37.110

有你的问题：

```
 Console.ForegroundColor = ConsoleColor.Red;
    Console.WriteLine("\t" + text); 
```

您设置颜色，另一个线程中断，将颜色设置为其他颜色，然后打印文本（颜色错误）。

您需要用锁保护该部分：

```
 static object lockObj = new object();

 public static void WriteError(string text)
 {
    lock(lockObj)
    {
        Console.ForegroundColor = ConsoleColor.Red;
        Console.WriteLine("\t" + text);
        Console.ForegroundColor = ConsoleColor.White;
    }
 } 
```

你必须做同样的事情`WriteSuccess(...)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T14:07:39.977

使用 lock 语句使您的彩色写入原子：

```
// Only one thread can enter this section at a time
lock(_lockObj) 
{
   Console.ForegroundColor = ConsoleColor.Green;
   Console.WriteLine("\t" + text);
   Console.ForegroundColor = ConsoleColor.White;
} 
```

_lockObj 应该被声明为你的类的私有静态成员：

```
private static Object _lockObj = new Object(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T14:06:02.767

您应该使用 Mutex 或监视器同步对控制台的访问（`lock`在某些对象上会更容易）。

# iphone - 使用 v3.1 Facebook SDK for iOS 获取 FQL 查询以获取生日和电子邮件

> ID：13861432
> 
> 赞同：2
> 
> 时间：2012-12-13T14:01:42.190
> 
> 标签：iphone, ios, facebook-graph-api, facebook-fql

谁能帮我。我无法弄清楚如何使用适用于 iOS 的最新 Facebook SDK（v 3.1）进行单个 FQL 查询，以获取用户朋友的生日和电子邮件。当我查询名称等字段时，我得到正确的值，但电子邮件和生日字段为空。

这是我的代码

```
- (void)facebookViewControllerDoneWasPressed:(id)sender {

    // we pick up the users from the selection, and create a string that we use to update the text view
    // at the bottom of the display; note that self.selection is a property inherited from our base class
    for (id<FBGraphUser> user in _friendPickerController.selection) {
        _nameTxt.text = user.name;
        NSString *fql = [NSString stringWithFormat:@"SELECT email, birthday, name FROM user WHERE uid = %@ ",user.id];
        NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObject:fql forKey:@"q"];
        [FBRequestConnection startWithGraphPath:@"/fql"
                                     parameters:params
                                     HTTPMethod:@"GET"
                              completionHandler:^(FBRequestConnection *connection,
                                              id result,
                                                      NSError *error) {
                                  if (error) {
                                      NSLog(@"Error: %@", [error localizedDescription]);
                                  } else {
                                      NSLog(@"Result: %@", result);
                                  }
                              }];

    }
    [self.navigationController dismissModalViewControllerAnimated:YES];
} 
```

我得到了姓名的价值，但电子邮件和生日为空。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T01:53:42.693

在调用查询之前，您需要让用户登录并请求电子邮件和 user_birthday 权限。例如：

```
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
    NSArray *permissions = [[NSArray alloc] initWithObjects:
                        @"email",
                        @"user_birthday",
                        nil];
    return [FBSession openActiveSessionWithReadPermissions:permissions
                                          allowLoginUI:allowLoginUI
                                     completionHandler:^(FBSession *session,
                                                     FBSessionState state,
                                                     NSError *error) {
                                     [self sessionStateChanged:session
                                                         state:state
                                                         error:error];
                                 }];
} 
```

在本教程的上下文中使用了上述方法：

[https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)

另请查看 FQL 教程：

[https://developers.facebook.com/docs/howtos/run-fql-queries-ios-sdk/](https://developers.facebook.com/docs/howtos/run-fql-queries-ios-sdk/)

# json - 使用 RJSONIO 从 JSON http 源中提取变量的问题

> ID：13861435
> 
> 赞同：1
> 
> 时间：2012-12-13T14:01:52.983
> 
> 标签：json, r, null, openstreetmap, rjsonio

我正在尝试检索城市的经度和纬度。我通过 openstreetmap.org 创建了一个使用 JSON 的脚本。

```
library("RJSONIO")
CityName <- "Rotterdam"
CountryCode <- "NL"
CityName <- gsub(' ','%20',CityName)

url <- paste(
  "http://nominatim.openstreetmap.org/search?city="
      , CityName
      , "&countrycodes="
      , CountryCode
      , "&limit=1&format=json"
    , sep="")
x <- fromJSON(url,simplify=FALSE)

x
[[1]]
[[1]]$place_id
[1] "98036666"

[[1]]$licence
[1] "Data © OpenStreetMap contributors, ODbL 1.0\. http://www.openstreetmap.org/copyright"

[[1]]$osm_type
[1] "relation"

[[1]]$osm_id
[1] "324431"

[[1]]$boundingbox
[[1]]$boundingbox[[1]]
[1] "51.842113494873"

[[1]]$boundingbox[[2]]
[1] "52.0045318603516"

[[1]]$boundingbox[[3]]
[1] "3.94075202941895"

[[1]]$boundingbox[[4]]
[1] "4.60184574127197"

[[1]]$lat
[1] "51.9228958"

[[1]]$lon
[1] "4.4631727"

[[1]]$display_name
[1] "Rotterdam, Stadsregio Rotterdam, Zuid-Holland, Nederland"

[[1]]$class
[1] "boundary"

[[1]]$type
[1] "administrative"

[[1]]$icon
[1] "http://nominatim.openstreetmap.org/images/mapicons/poi_boundary_administrative.p.20.png" 
```

我想提取`$lon`and `$lat`，但是当我这样做时，我收到以下错误消息：

```
x$lon
NULL
x$lat
NULL 
```

有没有人知道我做错了什么，因此没有得到预期的结果，这看起来像：

```
x$lon
4.4631727
x$lat
51.9228958 
```

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:31:13.573

您需要先访问第一个列表：

```
> x[[1]]$lat
[1] "51.9228958"
> x[[1]]$lon
[1] "4.4631727" 
```

# c - 如何在 Windows 上为我的 GTK 应用程序使用 metacity 主题

> ID：13861440
> 
> 赞同：0
> 
> 时间：2012-12-13T14:02:15.540
> 
> 标签：c, gtk

我的操作系统是 Windows 7

我使用 minGW 和 GTK2

我有一个用 C 编写的 GTK 应用程序，如下所示：

![在此处输入图像描述](../Images/615107aebadb269361438deb7f548232.png)

我将 GTK 主题更改为 MAC 并获得关注：

![在此处输入图像描述](../Images/4d78f544459864fafd374a1b482019c9.png)

我的目标是**如何**为我的应用程序激活 metacity 以使我的主窗口边框像圆角一样：

![在此处输入图像描述](../Images/5ca47dcb1c0a9e0fb3b7fa1c2fa69798.png)

目前我有 Windows 默认视图。我有`metacity-theme-1.xml`我从 MAC 主题包中获取的，但不知道如何使用它。

任何和所有的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:11:21.173

如果我没有完全弄错的话，在 Windows 上，GTK 不处理“窗口装饰”。如果你想为你的应用程序修改它，你必须实现一段特定于平台的代码，它使用一些 Windows API。

# api - 超出谷歌博客 API 速率限制

> ID：13861441
> 
> 赞同：0
> 
> 时间：2012-12-13T14:02:20.380
> 
> 标签：api, blogger

我每天使用 API 发布 50 个帖子。我在谷歌 API 控制台页面中提到的所有限制都是有序的，没有被违反，但我无法发布，我得到的回复是 {

```
"domain": "usageLimits",
"reason": "rateLimitExceeded",
"message": "Rate Limit Exceeded" 
```

我应该怎么办 ？我已经发送了邮件，但没有回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:08:53.777

您可以[直接向 Google 员工发送电子邮件](https://groups.google.com/forum/?fromgroups=#!topic/bloggerdev/7xpbeC4TVJI)以请求提高 50 个 API 的限制。请求时在您的博客上包含有用内容的建议意味着限制是为了防止不断的垃圾邮件/尝试提高搜索排名等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-21T14:22:26.733

每个用户每 100 秒有 100 个请求的另一个限制。您也可以从中获得“超出用户速率限制”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-08T13:10:13.163

每个 API 密钥的配额与每个博客的帖子创建配额不同。一个 API 密钥可以跨多个用户发送大量请求（如您所说，超过 9000 个！），但博客每天只能创建一定数量的帖子。

# c# - Findcontrol 属性在 createUserWizard 中不起作用

> ID：13861442
> 
> 赞同：2
> 
> 时间：2012-12-13T14:02:29.910
> 
> 标签：c#, asp.net, createuserwizard

我正在使用 ASP 的 createUserWizard 控件来创建我的用户，并且我想添加一些额外的字段（带有关于用户的额外信息），我将它们保存在我自己的表中。

我尝试使用 findContol 属性在代码中访问这些自定义文本框（因为它们在 createUserWizard 中）

问题是我声明并初始化为控件的文本框为空。这是我的做法：

```
TextBox t_desc = (TextBox)(CreateUserWizard1.FindControl("txt_desc")); 
o.organisation_description = t_desc.Text; 
```

这就是控件的嵌套方式：

```
<asp:CreateUserWizard ID="CreateUserWizard1" runat="server"     
      oncreateduser="CreateUserWizard1_CreatedUser">
   <WizardSteps>
       <asp:CreateUserWizardStep ID="CreateUserWizardStep1" runat="server" 
                    Title="Registreer uw organisatie">
         <ContentTemplate>
            <div class="row">
               <div class="half">
                  <table>
                     <tr>
                        <td align="right">
                           <asp:Label ID="lbl_organisation_description" runat="server" AssociatedControlID="txt_desc">Beschrijf uw organisatie:</asp:Label>
                        </td>
                        <td>
                           <asp:TextBox ID="txt_desc" runat="server" ValidationGroup="CreateUserWizard1"></asp:TextBox>
                        </td>
                      </tr>
                    </table>
                  </div>
                </div>
              </ContentTemplate>
              </asp:CreateUserWizardStep>
          </WizardSteps>
</asp:CreateUserWizard> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T14:16:28.967

```
 CreateUserWizardStep step =   (CreateUserWizardStep)  CreateUserWizard1.FindControl("CreateUserWizardStep1"); 
 if (step!=null)
 {
     TextBox txt =  (TextBox)step.ContentTemplateContainer.FindControl("txt_desc");
 } 
```

或者如果您可以从服务器代码中看到您的步进控制

```
TextBox txt =  (TextBox)CreateUserWizardStep1.ContentTemplateContainer.FindControl("txt_desc"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:18:58.980

FindControl 仅检查直接子控件，在您的 CreateWizard1 中是 CreateUserWizardStep（使用 runat=server）。一个简单的解决方法是使用递归算法：

```
public static class ControlExtensions
{
    public static Control FindControlRecursive(this Control root, string id)
    {
        if (root.ID == id)
        {
            return root;
        }

        foreach (Control c in root.Controls)
        {
            Control t = c.FindControlRecursive(id);
            if (t != null)
            {
                return t;
            }
        }

        return null;
    }
} 
```

将此类添加到您的解决方案将允许您使用 control.FindControlRecursive("id")。

请记住，如果您使用的是大页面，这可能意味着相当多的开销！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:12:41.020

我认为 WizardStep 是一个命名容器，因此您需要针对它运行 findcontrol。

就像是

```
var step = CreateUserWizard1.CreateUserStep;
TextBox t_desc = (TextBox)(step.FindControl("txt_desc")); 
```

这是完全未经测试的代码，因此它可能无法正常工作，但我很确定问题的根源是您在错误的父控件上运行 FindControl。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-20T12:48:31.747

试试这个在 CreateUserWizard 中找到控件

文本框 txtCaptcha = (TextBox)CreateUserWizardStep1.CreateUserStep.ContentTemplateContainer.FindControl("txtCaptcha");

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-10T12:40:39.477

您的 CreateUserWizard 的 EnableViewState 属性必须设置为 True，您的 DropDownList 才能保持状态。

# c# - 我正在从保留曲线列表中运行 Plots，但颜色没有改变

> ID：13861446
> 
> 赞同：1
> 
> 时间：2012-12-13T14:02:37.103
> 
> 标签：c#, zedgraph

我试图用不同的颜色绘制几条曲线，但它不起作用。即使我验证了颜色部分已更改，我仍继续为所有人获得相同的颜色。我什至已经手动完成了。

我有另一个创建 PointPairList List 的类和另一个改变颜色的类。

```
myPane = zedGraphControl1.GraphPane;
int index = 0;
foreach (PointPairList item in cMasterGraph)
{
    myPane = zedGraphControl1.GraphPane;
    // GraphPane object holds one or more Curve objects (or plots)
    myPane.YAxis.Type = AxisType.Log;
    Color color = GetNextColor();
    // Add cruves to myPane object
    LineItem myCurve = myPane.AddCurve(cGraphname[index], item, color, SymbolType.None);
    LineItem myCurve2 = myPane.AddCurve(cGraphname[index], item, Color.Yellow, SymbolType.None );
    //myCurve.Add(tempcurve);
    myCurve.Line.Width = 1.0F;
    index++;
    //myCurve.IsSelected = true;
    // I add all three functions just to be sure it refeshes the plot.  
    zedGraphControl1.AxisChange();
    zedGraphControl1.Invalidate();
    zedGraphControl1.Refresh();
} 
```

我已经被困在这个问题上太久了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T00:27:07.597

```
LineItem myCurve = myPane.AddCurve(cGraphname[index], item, color, SymbolType.None);
LineItem myCurve2 = myPane.AddCurve(cGraphname[index], item, Color.Yellow, SymbolType.None ); 
```

我认为 ：

myCurve 和 myCurve2 具有相同的项目，因此当您绘制 myCurve 时，您将绘制 myCurve2，myCurve 被 myCurve2(Color.Yellow) 覆盖。

# xml - 是否有任何 Apache Solr schema.xml 生成器工具？

> ID：13861452
> 
> 赞同：2
> 
> 时间：2012-12-13T14:02:52.737
> 
> 标签：xml, user-interface, solr, schema

我刚开始使用 Solr，我很惊讶没有找到任何 Solr 管理界面，除了 solr 附带的管理 gui，特别是考虑到 Solr 的受欢迎程度

例如，我希望看到一个用于创建 schema.xml 的 gui 工具。

任何人都可以建议任何这样的工具吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-27T11:25:34.990

请将管理模式文件重命名为`schema.xml`.

示例文件位置：`C:\Bitnami\solr-5.5.0-1\apache-solr\solr\configsets\basic_configs\conf`

![重命名前后见附件。](../Images/bec84c18e4bd818b5d28cf020578dba6.png)

# objective-c - 弹出 ABAddressBook 模式，仅包含电子邮件联系人

> ID：13861454
> 
> 赞同：2
> 
> 时间：2012-12-13T14:03:10.747
> 
> 标签：objective-c, ios, xcode, contacts

我正在尝试显示仅包含已注册电子邮件的联系人的 ABAddressBook 模式。我如何实现这一目标？

我试过这段代码：

```
- (IBAction)getContact {
    // creating the picker
    ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];

    ABAddressBookRef addressBook = ABAddressBookCreate();
    CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople( addressBook );
    CFIndex nPeople = ABAddressBookGetPersonCount( addressBook );

    for( CFIndex emailIndex = 0; emailIndex < nPeople; emailIndex++ ) {
        ABRecordRef person = CFArrayGetValueAtIndex( allPeople, emailIndex );
        ABMutableMultiValueRef emailRef= ABRecordCopyValue(person, kABPersonEmailProperty);
        int emailCount = ABMultiValueGetCount(emailRef);
        if(!emailCount) {
            CFErrorRef error = nil;
            ABAddressBookRemoveRecord(addressBook, person, &error);
            if (error) NSLog(@"Error: %@", error);
        }
    }
    picker.addressBook = addressBook;
    picker.peoplePickerDelegate = self;
    [self presentModalViewController:picker animated:YES];
} 
```

该列表显示了我的所有联系人，但“已删除”的联系人显示为“无姓名”，而有姓名的联系人则拥有真实的电子邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T20:31:51.080

我设法创建了另一个解决方案......

我在数组中添加了至少有一封电子邮件的联系人......而不是查看当前地址簿并删除其中没有任何电子邮件的解决方案。这是代码：

```
 ABAddressBookRef addressBook = ABAddressBookCreate();
    CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople( addressBook );
    CFIndex nPeople = ABAddressBookGetPersonCount( addressBook );

    for( CFIndex emailIndex = 0; emailIndex < nPeople; emailIndex++ ) {
        ABRecordRef person = CFArrayGetValueAtIndex( allPeople, emailIndex );
        ABMutableMultiValueRef emailRef= ABRecordCopyValue(person, kABPersonEmailProperty);
        int emailCount = ABMultiValueGetCount(emailRef);
        if(!emailCount) {
            CFErrorRef error = nil;
            ABAddressBookRemoveRecord(addressBook, person, &error);
            if (error) NSLog(@"Error: %@", error);
        } else {
            ABMultiValueRef emails = ABRecordCopyValue(person, kABPersonEmailProperty);
            NSString *email = (__bridge NSString *)ABMultiValueCopyValueAtIndex(emails, 0);
            NSString *name = (__bridge NSString *)(ABRecordCopyValue(person, kABPersonFirstNameProperty));

            if (name) {
                NSMutableDictionary *contactDict = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                             name, @"name",
                                             email, @"email",
                                             nil];
                [self.contactsArray addObject:contactDict];
            }
        }
    } 
```

# git - Git：从一个项目中创建一个框架，并让项目基于框架

> ID：13861456
> 
> 赞同：1
> 
> 时间：2012-12-13T14:03:21.893
> 
> 标签：git

我创建了一个项目（[https://github.com/twaldecker/vim-cheat-sheet](https://github.com/twaldecker/vim-cheat-sheet)），现在我意识到我喜欢备忘单的风格，并想用它创建一个模板。

我所做的是：

```
git clone cheatsheet-vim cheatsheet-template
cd cheatsheet-template
# remove vim specific content, some additions
cd ../cheatsheet-vim #go back to vim project
git checkout -b testbranch #create a new branch
git remote add template ../cheatsheet-template
git fetch template
git merge template/master #now I got the template project as branch in the base project 
```

现在的问题是如何让 vim-cheatsheet 项目基于项目本身创建的模板。

我想拥有的：

*   有我可以更改的模板项目
*   有cheatsheet-vim项目，我可以从模板中提取canges

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:43:15.203

在您的情况下，由于您有两个没有共同祖先的分支，因此您可以尝试`rebase --onto`将当前的主控放在模板/主控之上（“模板”是指代模板存储库的远程名称）。

这是“[如何合并没有共同祖先的两个分支？](https://stackoverflow.com/a/4718411/6309) ”中提出的解决方案之一。

这样，两个分支将有一个共同的历史记录，`git pull --rebase`当您的模板更改时您将能够这样做（再次将您当前的工作重新定位在修改后的提取模板之上）

* * *

[OP Thomas](https://stackoverflow.com/users/605586/thomas)工具另一种方法并评论[说](https://stackoverflow.com/questions/13861456/git-create-a-framework-out-of-a-project-and-let-the-project-base-on-the-framew/13862201#comment19314966_13862201)：

> 我最终创建了一个新项目并复制了源代码。

# php - RabbitMQ 等待多个队列完成

> ID：13861459
> 
> 赞同：17
> 
> 时间：2012-12-13T14:03:27.743
> 
> 标签：php, symfony, queue, rabbitmq, messaging

好的，这是正在发生的事情的概述：

```
 M <-- Message with unique id of 1234
    |
    +-Start Queue
    |
    |
    | <-- Exchange
   /|\
  / | \
 /  |  \ <-- bind to multiple queues
Q1  Q2  Q3
\   |   / <-- start of the problem is here
 \  |  / 
  \ | /
   \|/
    |
    Q4 <-- Queues 1,2 and 3 must finish first before Queue 4 can start
    |
    C <-- Consumer 
```

所以我有一个推送到多个队列的交换器，每个队列都有一个任务，一旦所有任务都完成了，只有这样队列 4 才能启动。

因此，唯一 id 为 1234 的消息被发送到交换器，交换器将其路由到所有任务队列（Q1、Q2、Q3 等），当消息 id 为 1234 的所有任务都完成后，运行 Q4 获取消息编号 1234。

我该如何实施？

使用 Symfony2、RabbitMQBundle 和 RabbitMQ 3.x

资源：

*   [http://www.rabbitmq.com/tutorials/amqp-concepts.html](http://www.rabbitmq.com/tutorials/amqp-concepts.html)
*   [http://www.rabbitmq.com/tutorials/tutorial-six-python.html](http://www.rabbitmq.com/tutorials/tutorial-six-python.html)

更新#1

好的，我认为这就是我要寻找的：

*   [https://github.com/videlalvaro/Thumper/tree/master/examples/parallel_processing](https://github.com/videlalvaro/Thumper/tree/master/examples/parallel_processing)

带有并行处理的 RPC，但是如何将 Correlation Id 设置为我的唯一 id 来对消息进行分组并识别什么队列？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T21:50:16.927

你需要实现这个：[http](http://www.eaipatterns.com/Aggregator.html) ://www.eaipatterns.com/Aggregator.html但 Symfony 的 RabbitMQBundle 不支持，所以你必须使用底层的 php-amqplib。

来自捆绑包的普通消费者回调将获得 AMQPMessage。从那里您可以访问通道并手动发布到“管道和过滤器”实施中接下来出现的任何交换

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T14:36:44.927

在 RabbitMQ 站点的[RPC](http://www.rabbitmq.com/tutorials/tutorial-six-python.html)教程中，有一种方法可以传递一个“相关 id”，它可以识别您的消息给队列中的用户。

我建议您将某种 id 与您的消息一起使用到前 3 个队列中，然后有另一个过程将消息从 3 个队列中取出到某种类型的存储桶中。当这些桶收到我假设完成的 3 个任务时，将最终消息发送到第 4 个队列进行处理。

如果您为一个用户向每个队列发送超过 1 个工作项，您可能需要进行一些预处理以找出特定用户放入队列中的项目数量，以便在 4 之前出队的进程知道在排队之前预期有多少项目向上。

* * *

我在 C# 中做我的 rabbitmq，所以很抱歉我的伪代码不是 php 样式

```
// Client
byte[] body = new byte[size];
body[0] = uniqueUserId;
body[1] = howManyWorkItems;
body[2] = command;

// Setup your body here

Queue(body) 
```

* * *

```
// Server
// Process queue 1, 2, 3
Dequeue(message)

switch(message.body[2])
{
    // process however you see fit
}

processedMessages[message.body[0]]++;

if(processedMessages[message.body[0]] == message.body[1])
{
    // Send to queue 4
    Queue(newMessage)
} 
```

* * *

**对更新 #1 的响应**

与其将客户端视为终端，不如将客户端视为服务器上的进程。因此，如果您在这样的服务器上设置 RPC 客户端[，](https://github.com/rabbitmq/rabbitmq-tutorials/blob/master/php/rpc_client.php)那么您需要做的就是让服务器处理用户唯一 ID 的生成并将消息发送到适当的队列：

```
 public function call($uniqueUserId, $workItem) {
        $this->response = null;
        $this->corr_id = uniqid();

        $msg = new AMQPMessage(
            serialize(array($uniqueUserId, $workItem)),
            array('correlation_id' => $this->corr_id,
            'reply_to' => $this->callback_queue)
        );

        $this->channel->basic_publish($msg, '', 'rpc_queue');
        while(!$this->response) {
            $this->channel->wait();
        }

        // We assume that in the response we will get our id back
        return deserialize($this->response);
    }

$rpc = new Rpc();

// Get unique user information and work items here

// Pass even more information in here, like what queue to use or you could even loop over this to send all the work items to the queues they need.
$response = rpc->call($uniqueUserId, $workItem);

$responseBuckets[array[0]]++;

// Just like above code that sees if a bucket is full or not 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T14:30:51.817

我有点不清楚你想在这里实现什么。但我可能会稍微改变设计，以便一旦所有消息从您发布到发布到队列 4 的单独交换中的队列中清除。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-22T12:26:02.600

除了[基于 RPC 的答案](https://stackoverflow.com/a/44698639/579025)之外，我还想添加另一个基于[EIP 聚合器模式](http://www.enterpriseintegrationpatterns.com/patterns/messaging/Aggregator.html)的答案。

接下来的想法是：一切都是异步的，没有 RPC 或其他同步的东西。每个任务在完成后都会发送一个偶数，聚合器订阅该事件。它基本上计算任务并在计数器达到预期数量时发送 task4 消息（在我们的例子中为 3）。为了简单起见，我选择一个文件系统作为计数器的存储。您可以在那里使用数据库。

制作人看起来更简单。它只是开火然后忘记

```
<?php
use Enqueue\Client\Message;
use Enqueue\Client\ProducerInterface;
use Enqueue\Util\UUID;
use Symfony\Component\DependencyInjection\ContainerInterface;

/** @var ContainerInterface $container */

/** @var ProducerInterface $producer */
$producer = $container->get('enqueue.client.producer');

$message = new Message('the task data');
$message->setCorrelationId(UUID::generate());

$producer->sendCommand('task1', clone $message);
$producer->sendCommand('task2', clone $message);
$producer->sendCommand('task3', clone $message); 
```

任务处理器必须在其工作完成后发送一个事件：

```
<?php
use Enqueue\Client\CommandSubscriberInterface;
use Enqueue\Client\Message;
use Enqueue\Client\ProducerInterface;
use Enqueue\Psr\PsrContext;
use Enqueue\Psr\PsrMessage;
use Enqueue\Psr\PsrProcessor;

class Task1Processor implements PsrProcessor, CommandSubscriberInterface
{
    private $producer;

    public function __construct(ProducerInterface $producer)
    {
        $this->producer = $producer;
    }

    public function process(PsrMessage $message, PsrContext $context)
    {
        // do the job

        // same for other
        $eventMessage = new Message('the event data');
        $eventMessage->setCorrelationId($message->getCorrelationId());

        $this->producer->sendEvent('task_is_done', $eventMessage);

        return self::ACK;
    }

    public static function getSubscribedCommand()
    {
        return 'task1';
    }
} 
```

和聚合器处理器：

```
<?php

use Enqueue\Client\TopicSubscriberInterface;
use Enqueue\Psr\PsrContext;
use Enqueue\Psr\PsrMessage;
use Enqueue\Psr\PsrProcessor;
use Symfony\Component\Filesystem\LockHandler;

class AggregatorProcessor implements PsrProcessor, TopicSubscriberInterface
{
    private $producer;
    private $rootDir;

    /**
     * @param ProducerInterface $producer
     * @param string $rootDir
     */
    public function __construct(ProducerInterface $producer, $rootDir)
    {
        $this->producer = $producer;
        $this->rootDir = $rootDir;
    }

    public function process(PsrMessage $message, PsrContext $context)
    {
        $expectedNumberOfTasks = 3;

        if (false == $cId = $message->getCorrelationId()) {
            return self::REJECT;
        }

        try {
            $lockHandler = new LockHandler($cId, $this->rootDir.'/var/tasks');
            $lockHandler->lock(true);

            $currentNumberOfProcessedTasks = 0;
            if (file_exists($this->rootDir.'/var/tasks/'.$cId)) {
                $currentNumberOfProcessedTasks = file_get_contents($this->rootDir.'/var/tasks/'.$cId);

                if ($currentNumberOfProcessedTasks +1 == $expectedNumberOfTasks) {
                    unlink($this->rootDir.'/var/tasks/'.$cId);

                    $this->producer->sendCommand('task4', 'the task data');

                    return self::ACK;
                }
            }

            file_put_contents($this->rootDir.'/var/tasks/'.$cId, ++$currentNumberOfProcessedTasks);

            return self::ACK;
        } finally {
            $lockHandler->release();
        }
    }

    public static function getSubscribedTopics()
    {
        return 'task_is_done';
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-22T11:51:43.537

我可以向您展示如何使用[enqueue-bundle](https://github.com/php-enqueue/enqueue-dev/blob/master/docs/bundle/quick_tour.md)来做到这一点。

因此，使用 composer 安装它并注册为任何其他包。然后配置：

```
// app/config/config.yml

enqueue:
  transport:
    default: 'amnqp://'
  client: ~ 
```

这种方法基于 RPC。这是你如何做到的：

```
<?php
use Enqueue\Client\ProducerInterface;
use Symfony\Component\DependencyInjection\ContainerInterface;

/** @var ContainerInterface $container */

/** @var ProducerInterface $producer */
$producer = $container->get('enqueue.client.producer');

$promises = new SplObjectStorage();

$promises->attach($producer->sendCommand('task1', 'the task data', true));
$promises->attach($producer->sendCommand('task2', 'the task data', true));
$promises->attach($producer->sendCommand('task3', 'the task data', true));

while (count($promises)) {
    foreach ($promises as $promise) {
        if ($replyMessage = $promise->receiveNoWait()) {
            // you may want to check the response here
            $promises->detach($promise);
        }
    }
}

$producer->sendCommand('task4', 'the task data'); 
```

消费者处理器如下所示：

```
use Enqueue\Client\CommandSubscriberInterface;
use Enqueue\Consumption\Result;
use Enqueue\Psr\PsrContext;
use Enqueue\Psr\PsrMessage;
use Enqueue\Psr\PsrProcessor;

class Task1Processor implements PsrProcessor, CommandSubscriberInterface
{
    public function process(PsrMessage $message, PsrContext $context)
    {
        // do task job

        return Result::reply($context->createMessage('the reply data'));
    }

    public static function getSubscribedCommand()
    {
        // you can simply return 'task1'; if you do not need a custom queue, and you are fine to use what enqueue chooses. 

        return [
          'processorName' => 'task1',
          'queueName' => 'Q1',
          'queueNameHardcoded' => true,
          'exclusive' => true,
        ];
    }
} 
```

将其作为服务添加到您的容器中，并带有标签`enqueue.client.processor`并运行命令`bin/console enqueue:consume --setup-broker -vvv`

[这是普通的 PHP 版本](https://gist.github.com/makasim/92a82cddcc074c128470ca0e824f4b24)。

# html - 使用画布仅显示绘制的图像而不是整个画布

> ID：13861464
> 
> 赞同：0
> 
> 时间：2012-12-13T14:03:33.677
> 
> 标签：html, canvas, coordinates

使用我之前在 stackoverflow 上找到的插件。绘图变得流畅和漂亮。我想要的是只获取我从画布中裁剪出来的图像部分作为输出，而不是完整的画布。有人可以帮忙吗。这是我现在用于画布的代码：http: [//jsfiddle.net/sVsZL/1/](http://jsfiddle.net/sVsZL/1/)

```
function canvasDisplay() {
var c=document.getElementById("canvas");
canvasImage=c.toDataURL("image/png");
document.getElementById("SSMySelectedImage").src=canvasImage;   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:42:21.873

添加另一个答案，因为另一个答案完全关闭。

**[现场演示](http://jsfiddle.net/loktar/sVsZL/7/)**

您本质上需要的是跟踪边界框。我所做的是创建一个对象，该对象包含您绘制位置的最小值和最大值。这使您能够跟踪图像的大小以及开始/结束的位置。

```
this.dim = {minX : 9999, minY : 9999, maxX : 0, maxY : 0}; 
```

然后我创建了一个检查边界的函数。

```
this.setDimensions = function(x,y){
        if(x < this.dim.minX){
            this.dim.minX = x;   
        }

        if(y < this.dim.minY){
             this.dim.minY = y;   
        }

        if(x > this.dim.maxX){
             this.dim.maxX= x;   
        }

        if(y > this.dim.maxY){
             this.dim.maxY = y;   
        }
    } 
```

确保在单击或移动期间进行检查。

```
 this.mousedown = function(ev) {
        tool.setDimensions(ev._x,ev._y);
    };

    this.mousemove = function(ev) {
            tool.setDimensions(ev._x,ev._y);
    }; 
```

这只是一个示例函数，它将部分绘制到一个新的画布上，然后您可以使用它保存`toDataUrl`

```
var button = document.getElementsByTagName("input")[0];
        button.addEventListener("click", function(){
            var savedCanvas = document.createElement("canvas"),
                savedCtx = savedCanvas.getContext("2d"),
                minX = PEN.dim.minX,
                minY = PEN.dim.minY,
                maxX = PEN.dim.maxX,
                maxY = PEN.dim.maxY,
                width = maxX - minX,
                height = maxY - minY;

            savedCanvas.width = width;
            savedCanvas.height = height; 

           document.body.appendChild(savedCanvas);
           savedCtx.drawImage(canvas,minX,minY,width,height,0,0,width,height);  
        }); 
```

# sql - 派生表等效于 sybase 12.0 或如何进行批量更新

> ID：13861465
> 
> 赞同：1
> 
> 时间：2012-12-13T14:03:35.780
> 
> 标签：sql, batch-file, updates, sap-ase

我正在更新 Sybase 中的大表并有以下代码（已跳过声明）：

```
-- get minimum id 
set rowcount 1 
select @min_id = id from table1 where id matches_some_condition

set rowcount 10000 -- batch size

select @max_id = id from 
(select id from table1 where id >= @min_id and some_condition) a order by id

-- do updates
while (1 = 1)
 begin
   update table1
   set a = some_value
   where id >= @min_id and id <= @max_id and further_conditions

   waitfor delay '00:00:01'

   select @min_id = @max_id
   select @max_id = id from 
    (select id from table1 where id >= @min_id and further_conditions
    ) a order by id

   if @min_id >= @max_id
      break

 end 
```

因此，如您所见，这是通常的想法：获取一些有序列 (id) 并更新 id 介于 N 和 M 之间的行。循环直到所有行都更新。

如您所见，为了获得 @max_id 我使用了`set rowcount 10000`然后`select @max_id = id from (select id from table1 where id >= @min_id and further_conditions) a`. 现在我需要对运行 Sybase ASE 12.0 的数据库进行此类更新。问题是仅从 12.5 开始支持派生表，因此`select id from (select id from table1) a`无法正常工作。任何想法如何解决它，也许算法可以改变？当然，我可以在光标的帮助下进行所需的更新，但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:37:58.580

尝试更改代码：

```
 select @max_id = id from 
    (select id from table1 where id >= @min_id and further_conditions
    ) a order by id 
```

到：

```
 select @max_id = max(id) from 
 from table1 
 where id >= @min_id and further_conditions 
```

或者

```
 select @max_id =  id 
 from table1 
 where id >= @min_id 
 and further_conditions
 order by id 
```

# php - 在 html 选择标签中显示 mysql 数据

> ID：13861471
> 
> 赞同：-2
> 
> 时间：2012-12-13T14:03:55.047
> 
> 标签：php, html, select

> **可能重复：**
> [从 PHP 中的 mySQL 表填充下拉框](https://stackoverflow.com/questions/5189662/populate-a-drop-down-box-from-a-mysql-table-in-php)

我是 PHP/mySQL 的新手，但我正在学习它。我只是在创建一个简单的脚本来了解 mySQL，从数据库中检索数据等。我遇到了一些问题，希望你们能帮助我！

我想在 'select' html 标记中以 html 形式显示表 'leerlingen' 的数据。每个值都必须有自己的选项标签，如下所示：

```
 <select>
    <option value="VALUE 1">VALUE 1</option>
    <option value="VALUE 2">VALUE 2</option>
    <option value="VALUE 3">VALUE 3</option>
    <option value="VALUE 4">VALUE 4</option>
  </select> 
```

我在谷歌搜索了很多，尝试了很多东西，但似乎没有任何效果..

谢谢！

耶勒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:07:47.953

看来您需要编写一个`foreach`循环来解析查询中的每个数据库行。下面的示例（结果为多维数组）：

```
<select>
<?php
    foreach($rowset as $row) {
        echo '<option value="'.$row['id'].'">'.$row['value'].'</option>';
    }
?>
</select> 
```

# javascript - 如何在没有可用完整路径的情况下检查项目是否存在于本地存储中？

> ID：13861474
> 
> 赞同：1
> 
> 时间：2012-12-13T14:04:00.990
> 
> 标签：javascript, regex, path

我需要检查 localStorage 中是否存在文件。

文件路径包括

```
id.version 
```

我只有一个`id`要测试的值，它将是一个 10 个字符的字符串，后跟随机长度的版本。

我习惯于使用 Coldfusion 检查文件是否存在服务器端，我可以在其中执行以下操作：

```
fileExists(expandPath(../some/path/to/a/file.*) ) 
```

`*`任何字符在哪里。

**问题**：
是否可以使用正则表达式进行类似的操作，所以我可以测试是否存在包含`id`参数和 id 后面的任意数量字符的文件？我不需要检索文件本身，只需知道`id`路径中是否至少有一个匹配。

感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:13:41.590

您可以遍历每个本地存储项并使用该`.key()`方法获取密钥并检查它是否包含 id 字符串等，或者使用正则表达式执行类似的操作，弄清楚如何检查值而不是密钥，如果那是 ID居住，应该是微不足道的：

```
for (var i = 0; i < localStorage.length; i++){
    if ( localStorage.key(i).indexOf(id) != -1 ) {
        var item = localStorage.getItem(localStorage.key(i));
    }
} 
```

# ebean - 如何通过原始 sql 查询在 eBean 中使用 findIterate？

> ID：13861483
> 
> 赞同：1
> 
> 时间：2012-12-13T14:04:20.473
> 
> 标签：ebean

假设我有以下代码：

```
String sql = "select c.id, c.name from Company c left join Tag t on c.id=t.company_id where c.state='PUBLISHED'";

List<SqlRow> sqlRows =
                Ebean.createSqlQuery(sql).setMaxRows(4000000).findList();
for(SqlRow row : sqlRows) {
    // Do cool stuff
} 
```

`findList()`然后将所有内容加载到内存中，这不是我在这种情况下真正想要的。

我看到了`Query<T>`有`findIterate()`但`Ebean.createSqlQuery(sql)`返回`SqlQuery`并且没有`findIterate()`。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:10:43.547

我猜RFTM在这里已经到位，或者需要5分钟然后返回问题。我是这样做的：

**服务类：**

```
String sql = "Select c.id, c.name from Company c left join Tag t on c.id=t.company_id where c.state='PUBLISHED'";    

RawSql rawSql = RawSqlBuilder
            .parse(sql)
            .columnMapping("c.name", "word")
            .columnMappingIgnore("c.id")
            .create();

Query<SearchWord> query = Ebean.find(SearchWord.class);
QueryIterator<SearchWord> iterator = query
            .setMaxRows(4000000)
            .setRawSql(rawSql)
            .findIterate();
try {
    while (iterator.hasNext()) {
        iterator.next()
        // do magic stuff in here
    }
} finally {
    iterator.close();
} 
```

**搜索词**

```
@Entity
public class SearchWord {

    private String word;
    private String type;

    public SearchWord() {
    }

    public String getWord() {
        return word;
    }

    public void setWord(String word) {
        this.word = word;
    }

    public String getType() {
        return type;
    }

    public void setType(String type) {
        this.type = type;
    }
} 
```

# php - 如何使用 ipinfodb 仅查找国家代码

> ID：13861485
> 
> 赞同：0
> 
> 时间：2012-12-13T14:04:24.420
> 
> 标签：php, ip-geolocation

我想使用 ipinfodb API 查找网站访问者的国家代码。

当我尝试以下操作时`http://api.ipinfodb.com/v3/ip-country/?key=<My_API_Key>&ip=<Some_IP>`，它会给出以下输出：

```
OK;;<Some_IP>;US;UNITED STATES 
```

如何过滤此输出以使其仅显示国家代码？

问候，蒂莫西

编辑：

回复查尔斯，

在谷歌上搜索后，我知道可以给 API 一个“格式属性为 XML”，所以下面的工作。

```
$xml = simplexml_load_file('http://api.ipinfodb.com/v3/ip-country/?key=<My_API>&format=xml&ip=<Some_IP>);

echo $xml->countryCode; 
```

如何在没有 XML 参数的情况下获得相同的输出？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:55:01.933

> ```
> OK;;<Some_IP>;US;UNITED STATES 
> ```
> 
> 如何过滤此输出以使其仅显示国家代码？

我发现您能够调用 SimpleXML 感到很奇怪，但没有想到[`explode`](http://php.net/explode)，它会将字符串转换为数组，并在给定的分隔符上拆分。在这种情况下，我们需要爆炸`;`：

```
$string_data = 'OK;;127.0.0.1;US;UNITED STATES';
$sploded_data = explode(';', $string_data);
print_r($sploded_data);
echo "\nCountry code: ", $sploded_data[3], "\n"; 
```

这应该发出：

```
Array
(
    [0] => OK
    [1] =>
    [2] => 127.0.0.1
    [3] => US
    [4] => UNITED STATES
)
Country code: US 
```

您可能希望查看其余的[字符串操作函数](http://php.net/book.strings)，看看是否还有其他您可能遗漏的有趣内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-01T06:17:57.093

上面的答案并不是特别有用，因为如果您每次都明确指定相同的 IP 地址，服务器输出只是静态的。如果您对特定 IP 地址的位置请求进行硬编码，则每次都将是相同的。重点是什么？

改为这样做

*   为他们的 API 安装 PHP 类。[PHP 类](http://ipinfodb.com/downloads/ip2locationlite.zip)
*   [使用此处](http://ipinfodb.com/ip_location_api.php)找到的 PHP 示例；将其保存为自己的网页并观察结果。我们称之为“userlocation.php”。请注意，如果您从 localhost 加载，这些字段将为空。

好的，解析这个输出的技巧是 array_values()。我花了很长时间才想到这一点，但最终我偶然发现了[这一点](https://stackoverflow.com/a/6396316)。

所以...

```
$locations = array_values($locations);
echo $locations[n],"<br />\n";
echo $locations[n+1],"<br />\n";
etc. 
```

无论您需要什么元素，都可以通过这种方式获得——而且它是动态的。该代码将返回与用户 IP 地址相关的任何国家/地区。

最后一点。注意将您的 API 密钥粘贴到类文件中，而不是粘贴到 userlocation.php 中。类文件变量受到保护，这是一件好事。

无论如何，我不是专家；只是想我会分享我学到的东西。

# .net - 关闭表单后保留剪贴板项目

> ID：13861491
> 
> 赞同：1
> 
> 时间：2012-12-13T14:04:34.650
> 
> 标签：.net, vb.net

我注意到在我的表单关闭时，剪贴板被处理掉了。我将如何在表单关闭时不处理复制到剪贴板的任何项目？假设我想复制一些东西，关闭表单，然后将该信息粘贴到其他地方......谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T14:08:00.113

SetDataObject 有一个重载版本，可让您指定在应用关闭后数据是否应保留在剪贴板中：

```
Clipboard.SetDataObject(template, True) 
```

# coding-style - protobuf 的最佳文件命名风格是什么？

> ID：13861499
> 
> 赞同：8
> 
> 时间：2012-12-13T14:04:52.803
> 
> 标签：coding-style, naming-conventions, protocol-buffers, naming

[协议缓冲区](http://protobuf.googlecode.com)有一个[样式](https://developers.google.com/protocol-buffers/docs/style)指南。但它没有明确说明文件应该如何命名。`.proto`

`MyProtos.proto`,`my_protos.proto`或者`my-protos.proto`, 哪个名字更好听？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-25T13:50:46.273

除了为了一致性和清晰性之外，我不认为任何文件“应该被命名”有一个合适的答案。

一致性意味着遵循您的项目已经对源和标头进行的文件命名约定。如果您的源使用驼峰式命名，请对 proto 文件执行相同操作。在我看来，最常见的选择是`my_protos.proto`版本。

对我来说清晰意味着文件名应该提供一些关于内容的线索。我通常喜欢在它们实现的类之后命名文件，并且通常每个类都有一个单独的文件（对）。我会为 proto 文件推荐相同的方法。我更喜欢几个小的 proto 文件，每个文件定义一个`Message`或非常密切相关`Messages`的单个大型 proto 文件`Messages`，在一个地方定义所有你的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-12-11T07:57:49.033

由于这个问题已经有将近 8 年的历史了，对于那些在 2020 年代看这个的人来说，现在有一个由 google 发布的风格指南。

文件命名摘录

> 文件应命名为 lower_snake_case.proto

[https://developers.google.com/protocol-buffers/docs/style](https://developers.google.com/protocol-buffers/docs/style)

# python - 除了 open() 之外，python 中还有哪些命令可以编辑文件？

> ID：13861500
> 
> 赞同：-3
> 
> 时间：2012-12-13T14:04:52.423
> 
> 标签：python, python-3.x, python-3.2

除了 python 中的 open() 之外，是否还有其他命令可以编辑文件（在 Windows 或 *NIX 上）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:14:02.433

如果您使用[ipython](http://ipython.org/) ，您可以非常快速且交互地获取此类信息：

```
In [5]: file. #[tab pressed]
file.close       file.isatty      file.read        file.tell
file.closed      file.mode        file.readinto    file.truncate
file.encoding    file.mro         file.readline    file.write
file.errors      file.name        file.readlines   file.writelines
file.fileno      file.newlines    file.seek        file.xreadlines
file.flush       file.next        file.softspace   

In [5]: print file.flush.__doc__
flush() -> None.  Flush the internal I/O buffer.

In [6]: 
```

但我仍然建议检查[文档](http://docs.python.org/2/tutorial/inputoutput.html)，第 7.2 节。

另外，要构造一个文件对象（获取一个'file'类型的对象），“open”是python3中唯一的可能性（在python2中还有“file”，它是“open”的别名）

# css - CSS Div 的宽度自动填充整个父 Div

> ID：13861505
> 
> 赞同：0
> 
> 时间：2012-12-13T14:05:09.727
> 
> 标签：css, html, width

这是我的代码：

```
.divUserRepCont
{
    position: absolute;

    top: 0;
    left: 105px;

    width: 195px;
    height: 25px;   
}

.divUserContCon
{
    width: auto;
    height: 100%;

    background-color: red;
}

.divUserCon
{
    width: 50px;
    height: 20px;
} 
```

**HTML：**

```
<div class="divUserRepCont">
    <div class="divUserContCon">
        <div class="divUserCon">

        </div>
    </div>
</div> 
```

我期待一个宽度为 50px 的红色条，但自动宽度“divUserContCon”正在填满它的父 div 的整个 195px。为什么是这样？

**编辑：**

divUserContCon 具有自动宽度的目的是因为：

divUserCon 的大小将动态变化，并且它本身将具有背景颜色。

divUserContCon 将是 divUserCon 的容器，它本身将具有背景颜色和填充。

因此，如果 divUserCon 为 50px 宽，背景为绿色，则 divUserContCon 将是 50px 宽（自动）+一些填充和背景色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:08:18.643

```
width:50px; 
```

需要放在 divUserContCon 中。您不能依靠 auto 只占用任何子 div 的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:10:35.760

试试这个

```
<style type="text/css">
.divUserRepCont {
  position: absolute;
  top: 0;
  left: 105px;
  width: 195px;
  height: 25px;   
}
.divUserContCon {
    width: auto;
    height: 25px;
}
.divUserCon {
    width: 50px;
    height: 25px;
    background-color: red;
}
</style> 
```

如果你想要你`.divUserCon`的，`center`那么只需添加`margin: 0 auto;`css。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:26:00.893

这就是我解决它的方法：

```
.divUserRepCont
{
    position: absolute;

    top: 0;
    left: 105px;

    width: 195px;
    height: 25px;   

    background-color: orange;
}

.divUserContCon
{
    display: inline-block;

    height: 100%;

    padding-right: 20px;

    background-color: yellow;
}

.divUserCon
{
    display: inline-block;
    height: 20px;

    border-top: 5px solid rgb(62, 62, 62);

    background-color: red;
} 
```

**我用 display: inline-block; 替换了 width: auto**

# odata - 使用 JayData 或 Breeze 实现 OData 任何和所有

> ID：13861506
> 
> 赞同：2
> 
> 时间：2012-12-13T14:05:12.927
> 
> 标签：odata, breeze, jaydata

OData 支持[Any 和 All](http://www.odata.org/blog/2010/11/11/support-for-any-and-all)，这在我之前的项目中帮助了我很多。现在我使用 JayData 来避免编写 OData 查询字符串，但是通过搜索 any() 和 all() 没有找到结果。是否有任何现有的功能或计划来实现它？

我检查了 Breeze.js，但结果是一样的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T17:26:50.150

## 更新后的帖子：2013 年 11 月 25 日

从 Breeze 1.4.6 开始，现在支持“任何”和“所有”运算符。

请参阅：[http ://www.breezejs.com/documentation/query-examples](http://www.breezejs.com/documentation/query-examples)

## 较早的帖子

对于 Breeze，我们应该在接下来的两个月内同时支持我们的 WebApi 和 OData 提供程序的**any()**和**all() 。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T14:26:47.263

标准 JavaScript`array.some()`和`array.every()`函数被编译为 OData Any 和 All 操作，因此 API 遵循 JavaScript 术语，以隐藏不同数据源之间的差异。

详细博文 -[将 some() 和 every() 与 JayData OData 提供程序一起使用](http://jaydata.org/blog/using-some-and-every-with-jaydata-odata-provider)

提供[者能力矩阵](http://jaydata.org/tutorials/jaydata-api-features)显示这些操作仅由 OData 提供者支持。

# c++ - 10 秒后运行代码或按键

> ID：13861509
> 
> 赞同：1
> 
> 时间：2012-12-13T14:05:19.133
> 
> 标签：c++

我是 C++ 的初学者，我需要创建一个应用程序来在 10 秒后或按下一个键后打印一些东西，我尝试了这段代码但它不起作用（按下一个键后它会打印“a”很多而不是一个“a”）

```
int i;
while(1)
{
    i=1;

    while(!kbhit()||i<1000)
    {
        Sleep(10);
        i++;
    }

    cout<<"a";

}//while1 
```

你能建议我更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:11:28.020

问题是您没有从缓冲区中取出第一个键...

```
int i;
while(1)
{
    i = 0;
    while(!kbhit() && ++i<1000)
    {
        Sleep(10);
    }

    if (kbhit()) getch(); // to get the key out of the buffer, otherwise kbhit will keep getting true.
    cout<<"a";

}//while1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:55:22.300

首先，您的代码最大的问题是无论您是否按下某个键，它都会休眠 10 秒。这是我的建议。

```
#include <ctime>
#include <conio>
#include <iostream>
using namespace std;

inline int getTime()
{
    return static_cast<int>(static_cast<double>(clock())/CLOCKS_PER_SEC);
}

int main()
{
    int i = 1;
    int time, totaltime;

    cout << "hit q to quit\n";
    while(1)
    {
        i=1;
        totaltime = getTime();
        time = getTime() - totaltime;
        while(!_kbhit()&&time<5)
        {
            i++;
            time = getTime() - totaltime;
        }

        if (kbhit()) { 
            if(_getch() == 'q') return 0; cout << "you hit a key - hit q to quit\n"; 
        }
        else cout<<"you waited - hit q to quit\n";
    }

    return 0;
 } 
```

现在该代码所做的实际上是为您的代码计时...一旦达到 5 秒，它将显示您已等待。如果你按下 q 以外的键，它会告诉你。q 显然退出了。

# caching - ehcache 是否将所有键保存在物理内存中？

> ID：13861512
> 
> 赞同：0
> 
> 时间：2012-12-13T14:05:34.703
> 
> 标签：caching, memory-management, ehcache

当 Ehcache 配置为 overflowToDisk 模式时，是否所有的键都驻留在内存中，所有的值都被压入磁盘？如果密钥也被序列化到磁盘，ehcache maneger 将如何进行查找？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T18:09:22.283

看起来社区版的磁盘存储将所有密钥保存在内存中。企业版的 EhCache 磁盘存储声称使用 Bigmemory 解决了这个问题。请参考[http://forums.terracotta.org/forums/posts/list/5032.page](http://forums.terracotta.org/forums/posts/list/5032.page)

# .net - 数据模板不一致地解析 WPF 合并资源

> ID：13861515
> 
> 赞同：1
> 
> 时间：2012-12-13T14:05:37.060
> 
> 标签：.net, wpf, xaml

我有一种情况，两个本质上相同的数据模板在解决隐式样式资源的方式上表现完全不同。这种不一致使得在我正在处理的大型应用程序中处理应用程序范围的样式资源变得困难。

情景。

我在名为 AppStyles.xaml 的独立 xaml 文件中有一个 ResourceDictionary。它为 Button 和 TextBlock 类定义了一种隐式样式。

```
<!-- AppStyles.xaml -->
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Style TargetType="TextBlock" BasedOn="{StaticResource {x:Type TextBlock}}">
        <Setter Property="Padding" Value="10"/>
        <Setter Property="Background" Value="Red"/>
    </Style>

    <Style TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
        <Setter Property="Width" Value="300"/>
    </Style>

</ResourceDictionary> 
```

我的 MainWindow.xaml 文件将 AppStyles.xaml 合并到它自己的资源中。MainWindow.xaml 包含两个 ContentPresenter，每个都绑定到一个简单的 viewmodel 类。第一个 ContentPresenter 使用的数据模板是在 MainWindow.xaml 中内联声明的 UserControl，第二个 ContentPresenter 使用的数据模板也被声明为内联，但引用了在单独文件中定义的 UserControl。两个数据模板使用的 UserControl 的实际声明是相同的。

```
<!-- MainWindow.xaml -->
<Window x:Class="Demo2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:Demo2"
        Title="MainWindow" Height="350" Width="525"
        x:Name="_this">

    <Window.Resources>
        <ResourceDictionary>

            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/AppStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>

            <DataTemplate DataType="{x:Type local:TemplateVm1}">
                <UserControl>
                    <StackPanel>
                        <TextBlock Text="{Binding TextBlockValue}"/>
                        <Button Content="{Binding ButtonValue}"/>
                    </StackPanel>
                </UserControl>
            </DataTemplate>

            <DataTemplate DataType="{x:Type local:TemplateVm2}">
                <local:UserControl1/>
            </DataTemplate>

        </ResourceDictionary>
    </Window.Resources>

    <StackPanel>

        <ContentPresenter Content="{Binding ElementName=_this, Path=TemplateVm1}"/>

        <ContentPresenter Content="{Binding ElementName=_this, Path=TemplateVm2}"/>

    </StackPanel>
</Window> 
```

问题。

问题是两个 ContentPresenter 的呈现方式完全不同！两个 ContentPresenter 都使用 AppStyles.xaml 中的样式呈现 Button，但第一个 ContentPresenter 不应用隐式 TextBlock 样式，而第二个则应用。

我的期望是 TextBlock 样式不会应用于 ContentPresenter 显示的模板，因为 WPF 行为只有从 Control 派生的组件才会在当前模板之外查找资源来解析资源（并且 TextBlock 不是从 Control 派生的）。

那么这里发生了什么，我怎样才能让它表现得一致呢？

为了示例的完整性，这里是视图模型的实现和后面的 MainWindow 代码以及第二个模板中使用的 UserControl。

```
// TemplateVm.cs
namespace Demo2
{
    public class TemplateVm1
    {
        public TemplateVm1()
        {
            TextBlockValue = "TextBlock in ContentPresenter1.";
            ButtonValue = "Button in ContentPresenter1";
        }

        public string TextBlockValue { get; private set; }
        public string ButtonValue { get; private set; }
    }

    public class TemplateVm2
    {
        public TemplateVm2()
        {
            TextBlockValue = "TextBlock in ContentPresenter2.";
            ButtonValue = "Button in ContentPresenter2";
        }

        public string TextBlockValue { get; private set; }
        public string ButtonValue { get; private set; }
    }
} 
```

```
// MainWindow.xaml.cs
namespace Demo2
{
    using System.Windows;

    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            TemplateVm1 = new TemplateVm1();
            TemplateVm2 = new TemplateVm2();
            InitializeComponent();
        }

        public TemplateVm1 TemplateVm1 { get; private set; }
        public TemplateVm2 TemplateVm2 { get; private set; }
    }
} 
```

```
<!-- UserControl1.xaml -->
<UserControl x:Class="Demo2.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" d:DesignHeight="300" d:DesignWidth="300">

    <StackPanel>
        <TextBlock Text="{Binding TextBlockValue}"/>
        <Button Content="{Binding ButtonValue}"/>
    </StackPanel>

</UserControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:30:46.913

如果我没记错的话，WPF 认为`ControlTemplates`是一个边界，并且不会在模板内应用隐式样式。

但是这个规则有一个例外：任何继承自的东西都`Control`将应用隐式样式。

由于 a`Button`继承自`Control`，因此它应用隐式样式。但是 a`TextBlock`继承自`FrameworkElement`, not `Control`，因此它不会自动应用隐式样式，您必须手动添加它。

您应该会发现，如果您切换`TextBlock`到 a `Label`，将应用隐式样式，因为`Label`继承自`Control`

作为另一种选择，我认为您可以通过在您的内部`TextBlock`创建另一个隐式样式来手动应用隐式样式`TextBlock``UserControl.Resources`

```
<Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource {x:Type FrameworkElement}}" /> 
```

# ribbon - 文件中缺少自定义实体 -> Dynamics CRM 2011 中的新记录菜单

> ID：13861516
> 
> 赞同：1
> 
> 时间：2012-12-13T14:05:37.930
> 
> 标签：ribbon, crm, microsoft-dynamics

我们有 Dynamics CRM 2011 的本地版本。`File -> New Record`菜单中缺少我创建的自定义实体。知道如何到达那里吗？

我有权创建实体。我一直在使用[可视化功能区编辑器](http://crmvisualribbonedit.codeplex.com/)在许多不同的实体上隐藏和添加一些按钮。

# performance - 我的 Wordpress 网站上的高延迟

> ID：13861518
> 
> 赞同：1
> 
> 时间：2012-12-13T14:05:45.390
> 
> 标签：performance, wordpress, cloud-hosting, latency, yslow

我正在尝试减少网站 goldealers.co.uk 上的延迟

该站点的延迟似乎在 950 毫秒到 1500 毫秒之间。

我检查过：

*   流程
*   内存使用情况
*   HTTP 连接
*   平
*   删除所有插件

删除插件并没有丝毫区别。

该服务器是具有专用 1.5ghz 处理器和 1GB RAM 的 VPS 云服务器。

我的问题：

*   延迟是服务器/编程问题吗？
*   wordpress 网站通常有很高的延迟吗？
*   我在 Forbes.com（一个 wordpress 网站）上检查了延迟 - 这只有 151 毫秒的延迟！！！

我很快就会着手进行缓存、添加过期标头、可能使用 CDN 来存储图像等……但老实说，即使开始返回任何数据都需要超过 1 秒的时间，这是没有意义的。

非常感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T00:29:44.007

您的分析和优先级是正确的 - 首先从基本页面加载时间开始，然后再优化剩余的前端组件。

一般来说，默认情况下 WordPress 网站在交付 HTML 页面时可能会有点慢。您提到的 1-1.5 秒范围内的时间并不少见。（相比之下，我运行的未优化 WordPress 网站在 1-3 秒范围内。）

我会研究两个方面：

*   该主机上的基本速度
*   数据库查询速度

可能是您的虚拟主机没有非常快的连接。您可以通过获取静态文件来测试这一点（并消除等式中的 WordPress 部分）。例如，在您的网站上，我可以在大约 0.3 秒内下载[robots.txt文件。](http://goldealers.co.uk/robots.txt)提供静态文件的速度大约是您的最低基线。

接下来我会看看 MySQL 数据库的查询速度。MySQL 是在同一台主机上提供服务还是在不同的主机上提供服务？[Debug Queries 插件](http://wordpress.org/extend/plugins/debug-queries/)可以向您显示正在执行的确切查询和每个查询的性能。如果 DB 查询出现问题，[DB Cache Reloaded 插件](http://wordpress.org/extend/plugins/db-cache-reloaded-fix/)有时会有所帮助。它为频繁的数据库调用添加了额外的缓存层。

在这个 SO 问题的答案中也有一些很好的建议：[如何弄清楚为什么我的网站页面加载如此缓慢？](https://stackoverflow.com/a/12326958/9965)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T21:51:40.613

您的延迟几乎可以肯定是与服务器相关的问题。你说你有一个 VPS 并且大多数 VPS 安装都启用了所有 Apache 模块 - 所有这些你不需要 Wordpress。

消除所有不需要的模块可以减少每个 PHP 实例消耗的内存量。

我已经在堆栈溢出上回答了这个问题：[我怎样才能弄清楚为什么我的 Wordpress 页面加载如此缓慢？](https://stackoverflow.com/questions/12322217/how-can-i-figure-out-why-my-wordpress-pages-load-so-slowly)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T20:56:08.853

When I took a look at your site I saw that a lot of time is being killed on Facebook widgets. Testing from different locations around the world, looks like you are losing 2-3 seconds just for the facebook widgets. Drop those and you will have a much faster site.

# cakephp - 如何在 cakephp .ctp 文件中显示供应商图像文件

> ID：13861526
> 
> 赞同：1
> 
> 时间：2012-12-13T14:05:54.563
> 
> 标签：cakephp, components, captcha, vendor

我已经创建了组件secureimage验证码，现在我想显示位于 vendor/secureimage/images/refresh.png 和 vendor/secureimage/images/audio_icon.png 下的**“vendor files audio/refresh.png”文件**

代码 - - - - - -

```
<object type="application/x-shockwave-flash" data="/adminpanel_login/captcha/securimage_play.swf?bgcol=#ffffff&amp;icon_file=/adminpanel_login/captcha/audio_icon.png&amp;audio_file=<?php echo $captcha_hear;?>" height="32" width="32">
     <param name="movie" value="/adminpanel_login/captcha/securimage_play.swf?bgcol=#ffffff&amp;icon_file=/adminpanel_login/captcha/audio_icon.png&amp;audio_file=<?php echo $captcha_hear;?>" />
</object> 

<a tabindex="-1" style="border-style: none;" href="#" title="Refresh Image" onclick="document.getElementById('captcha').src ='<?php echo $this->webroot;?>admins/securimage/' + Math.random(); this.blur(); return false"><img src="<?php //echo $captcha_image_refresh;?>/adminpanel_login/captcha/refresh.png" alt="Reload Image" height="32" width="32" onclick="this.blur()" align="bottom" border="0" /></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:36:24.953

您应该将图像放在 webroot 中，这样它们可以直接由您的网络服务器提供，而不是由 php.ini 提供。

您可以通过将图像从符号链接`vendors`到`webroot/img`

# ruby-on-rails - TypeError（没有为 Proc 类定义 _dump_data）：

> ID：13861531
> 
> 赞同：11
> 
> 时间：2012-12-13T14:06:05.643
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试在我的 rails 应用程序中使用以下代码在会话中存储一个值

```
session[:key] = value 
```

我收到以下错误

```
TypeError (no _dump_data is defined for class Proc):
activesupport (3.2.9) lib/active_support/message_verifier.rb:53:in `dump'
 activesupport (3.2.9) lib/active_support/message_verifier.rb:53:in `generate'
 actionpack (3.2.9) lib/action_dispatch/middleware/cookies.rb:300:in `[]='
actionpack (3.2.9) lib/action_dispatch/middleware/session/cookie_store.rb:67:in    `set_cookie'
rack (1.4.1) lib/rack/session/abstract/id.rb:330:in `commit_session'
rack (1.4.1) lib/rack/session/abstract/id.rb:206:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/cookies.rb:341:in `call'
activerecord (3.2.9) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.9)    lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.9) lib/active_support/callbacks.rb:405:in ` 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-26T16:14:19.913

你`value`要么是一个 Proc，要么是在某个地方嵌套了 s Proc。Procs 和 lambdas 不能被序列化/编组/转储，因为它们是闭包。闭包取决于创建它们时内存中的内容，因此以后无法正确反序列化。

看到[这个答案](https://stackoverflow.com/questions/23970/how-do-i-marshal-a-lambda-proc-in-ruby%20this%20answer)。

我不确定在我的情况下我会做什么，看起来我必须想办法在不依赖 Procs 的情况下完成我的任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T01:03:36.510

这个值是多少？它是一个复杂的对象吗？一个活动的记录实例可能吗？

我在尝试将 FourSquare 客户端对象放入会话时遇到了同样的问题。我已经更改为每次都创建一个新实例，而不是从会话中恢复，它工作正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-17T15:43:42.070

在我的例子中，我们正在缓存一个 ActiveRecord 模型，并且该模型有一个包含 lambda 函数的 @ 变量。那是造成问题的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-25T01:05:11.037

你有没有考虑过`use Rack::Session::Pool`而不是平原`enable :sessions`？`Rack::Sessions::Pool`允许本地存储不可序列化的对象，同时将对象的 ID 存储在 cookie 中以便可以检索它。

我用它来跨 Sinatra 路由保留一个（n）（不可序列化的）数据库连接。

来自[http://www.getlaura.com/how-to-enable-sessions-with-sinatra/](http://www.getlaura.com/how-to-enable-sessions-with-sinatra/)

```
require 'sinatra/base'
require 'customer.rb'

class SinatraApp < Sinatra::Base

use Rack::Session::Pool

get '/welcome' do
  name = session[:customer].name
  "Hello, #{name}!"
end

post '/:name' do
  session[:customer] = Customer.new(params[:name])
  redirect '/welcome'
end
end 
```

# python - 嵌套列表到分层字典

> ID：13861532
> 
> 赞同：2
> 
> 时间：2012-12-13T14:06:08.513
> 
> 标签：python

我有一个嵌套列表，需要将其转换为分层字典。但是我有点困惑如何以干净的pythonic方式实现它。这是我想出的一个有点难看的示例代码。如何改进它？

```
from itertools import tee,izip
import json

L=[(1,2,3,4,5),(1,2,7),(2,3,5),(3,4,5,6)]

def pairs(iterable):
    a,b = tee(iterable)
    b.next()
    return izip(a,b)

def innerfunc(pairs,d):
    try:
        pair           = pairs.next()
        item, nextitem = pair        
    except StopIteration:       
        return 
    if item in d:        
        innerfunc(pairs,d[item])
    else:        
        d[item]= {}
        {nextitem : innerfunc(pairs,d[item])}

def outerfunc(matrix):
    result_dict={}
    for row in matrix:        
        iter_pairs = pairs(row+(0,))
        innerfunc(iter_pairs,result_dict)
    return result_dict

print json.dumps(outerfunc(L), sort_keys=True, indent=4) 
```

输出：

```
{
    "1": {
        "2": {
            "3": {
                "4": {
                    "5": {}
                }
            }, 
            "7": {}
        }
    }, 
    "2": {
        "3": {
            "5": {}
        }
    }, 
    "3": {
        "4": {
            "5": {
                "6": {}
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:14:45.047

您可以使用递归非常简洁地做到这一点：

```
def append_path(root, paths):
    if paths:
        child = root.setdefault(paths[0], {})
        append_path(child, paths[1:])

# Example usage
root = {}
for p in [(1,2,3,4,5),(1,2,7),(2,3,5),(3,4,5,6)]:
    append_path(root, p)

# Print results
import json
print json.dumps(root,  indent=4) 
```

输出：

```
{
    "1": {
        "2": {
            "3": {
                "4": {
                    "5": {}
                }
            }, 
            "7": {}
        }
    }, 
    "2": {
        "3": {
            "5": {}
        }
    }, 
    "3": {
        "4": {
            "5": {
                "6": {}
            }
        }
    }
} 
```

# python - 在python中转换unicode特殊符号

> ID：13861535
> 
> 赞同：0
> 
> 时间：2012-12-13T14:06:19.590
> 
> 标签：python, unicode, xlrd

`°C`我使用**xlrd**库读取了符号。我得到的 unicode 值为`u'\xb0C'`. 但是我想将它用作普通字符串。

我浏览了几篇文章，包括以下链接

[将 Unicode 字符串转换为 Python 中的字符串（包含额外符号）](https://stackoverflow.com/questions/1207457/convert-unicode-to-string-in-python-containing-extra-symbols)

它似乎适用于许多特殊信号。但在这种情况下，我只看到`C`没有`°`（度）。任何帮助将非常感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:28:40.823

也许我不明白一些事情，但是：

```
>>> print u'\xb0C'.encode("UTF-8")
°C 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T14:38:08.017

如果“普通字符串”是指 ASCII 编码的字符串，那么您不能完全按照您的意愿行事。度数符号不是 ASCII 字符集的一部分，因此您希望做的最好的事情是将其删除或将其转换为 ASCII 字符集中的最佳近似字符。您可以选择不同的编码，但是您必须确保与您交互的任何系统都可以使用您选择的编码。UTF-8 通常是一个安全的选择，并且几乎可以对您可能遇到的任何字符进行编码。

# python - Paramiko 模拟 ssh -t 选项

> ID：13861540
> 
> 赞同：4
> 
> 时间：2012-12-13T14:06:33.690
> 
> 标签：python, ssh, paramiko

我实例化一个 paramiko 通道，然后我执行一个命令并获得它的输出：

```
channel = transport.open_session()
channel.exec_command('service myservice restart')

stdout = channel.makefile('rb')

for line in stdout:
    print line, 
```

但是，在执行命令（完成）后，输出迭代被阻塞。

我用 ssh 测试过：

```
ssh myhost service myservice restart     # terminal gets blocked
ssh -t myhost service myservice restart  # OK 
```

所以我想模拟 paramiko 中的“-t”选项。到目前为止，我尝试过：

```
channel = transport.open_session()
channel.get_pty()
channel.invoke_shell()

stdin, stdout = channel.makefile('wb'), channel.makefile('rb')
stdin.write('service myservice restart\n')

for line in stdout:
    print line, 
```

但是现在，stdout 没有关闭，for 永远不会结束。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:29:16.127

看起来像`invoke_shell()`返回 a `Channel`，看起来像`Channel`s 要求你明确地关闭它们。我会尝试关闭您正在打开的一些频道，特别是由`invoke_shell()`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-14T19:24:08.317

查看您尝试运行的脚本 - 看看是否有这样的行

```
/dev/null 2>&1 
```

我和你有同样的问题——在我的例子中，我试图远程运行一个 bitnami 控制脚本。您帖子中的某些内容让我记忆犹新，并让我想起了控制脚本中的输出重定向（这些让我以前很头疼）。

通常他们习惯于忽略错误或者将它们记录在某个特定的地方——我还没有机会尝试，但也许要么在脚本末尾将它们传回，或者如果你不关心响应，甚至可以手动重定向一些创建的data out >&2 会起作用。

# linux - 删除带有嵌入空格的路径中的所有 .SVN 文件夹

> ID：13861542
> 
> 赞同：2
> 
> 时间：2012-12-13T14:06:43.033
> 
> 标签：linux, bash, svn

在[这个问题](https://stackoverflow.com/questions/5935776/how-to-delete-svn-folders-in-my-source-tree/13850323#13850323)和其他一百个地方，删除所有 .svn 目录的 Linux 解决方案大多相同。它工作得很好，直到路径碰巧包含空白。那么，是否有一种技术可以递归删除包含空格的目录中的 .svn 文件？也许是一种告诉**find**将其答案用引号括起来的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T14:41:45.083

您可以告诉`find`在操作中使用 null 作为输出分隔符而不是换行符`-print0`。

然后你可以告诉`xargs`使用 null 作为`-0`参数的输入分隔符。

例子：

```
find . -name '*.svn' -print0 | xargs -0 -I{} rm \'{}\' 
```

xargs的`-I{}`参数告诉它`{}`用标准输入中的当前行替换。就个人而言，我也喜欢在文件名周围包含反斜杠转义引号，以确保双重确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:09:39.920

```
find . -name '*.svn' | while read x; do rm -r "$x" ; done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:13:26.697

是的，用引号括起来似乎可以解决问题。

```
mkdir "x y"
mkdir x\ y/.svn
find . -name '.svn' | awk '{print "rm -rf \""$0"\""}' | bash 
```

最后：

```
ls x\ y
total 8
drwxrwxr-x 6 dylan dylan 4096 Dec 13 06:09 ..
drwxrwxr-x 2 dylan dylan 4096 Dec 13 06:11 . 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T14:52:14.283

```
find . -type d -name '.svn' -delete 
```

当前版本的[GNU find](http://www.gnu.org/software/findutils/manual/html_mono/find.html#Deleting-Files)已获得“-delete”操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T16:06:42.040

如果您需要的是存储库的干净副本，您是否设想过使用[SVN`export`命令](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.export.html)？

然后，您将获得存储库中所有目录的副本，包括名称中带有空格但没有任何`.svn`文件夹的目录。

# variables - 使用字典在两个嵌套的 foreach 中转义外部变量陷阱

> ID：13861544
> 
> 赞同：0
> 
> 时间：2012-12-13T14:06:49.917
> 
> 标签：variables, dictionary, foreach, nested, outer-join

我有两个像这样初始化的对象：

```
var series = new Dictionary<string,Dictionary<string,int>>()
{
   {"0", new Dictionary<string, int>() },
   {"1", new Dictionary<string, int>() },
   {"2", new Dictionary<string, int>() }
}

var periodValues = new Dictionary<string,int>();
{
   {"Jan", 0 },
   {"Feb", 0 },
   {"Mar", 0 }
} 
```

然后我有另一个填充值的对象：

```
 var target = new Dictionary<string,Dictionary<string,int>>()
 {
       { "0", 
         new Dictionary<string, int>()
         {
            {"Jan", 12 },
            {"Mar", 22 }
         } 
       },
       { "1", 
         new Dictionary<string, int>()
         {
            {"Mar", 37 }
         } 
       },
       { "2", 
         new Dictionary<string, int>()
         {
            {"Jan", 4 },
            {"Feb", 48 },
            {"Mar", 22 }
         } 
       }
 } 
```

`series`并且`target`总是相同的`Key`，而`target[key].Keys`（`key`类型`string`为 ） any`key`可以是 的**子集**（最多相同）`periodValues.Keys`。

现在我想`series.Values`根据中的键填写，`periodValues.Keys`但使用`target[key].Value`. 所以：

```
foreach (var numberValue in target.Keys)
{
    foreach (var period in target[numberValue].Keys)
    {
        periodValues[period] = target[numberValue][period];
    }
    series[numberValue] = periodValues;
} 
```

但是我陷入了**外部变量陷阱**……这意味着 all `series[key]`for any`series.Keys`都等于 last `periodValues`。根据[这篇文章](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)，我尝试了许多解决方案来逃避外部变量陷阱，但没有运气。有人知道解决方案或更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:50:38.463

`periodValues`如果有人感兴趣，我通过在第一个内部声明和初始化来解决问题`foreach`：

```
foreach (var numberValue in target.Keys)
{
    var periodValues = new Dictionary<string,int>();
    {
       {"Jan", 0 },
       {"Feb", 0 },
       {"Mar", 0 }
    }
    foreach (var period in target[numberValue].Keys)
    {
        periodValues[period] = target[numberValue][period];
    }
    series[numberValue] = periodValues;
} 
```

# c# - 将图层添加到嵌入 rdlc 报告文件中的图表

> ID：13861545
> 
> 赞同：1
> 
> 时间：2012-12-13T14:06:51.867
> 
> 标签：c#, asp.net, sql-server, web-applications, rdlc

我创建了一个名为（FullReport.rdlc）的报告文件，它包含图表控件。我想要做的是在图表区域添加文本框和矩形，但它并没有像我想要的那样出现。

我正在使用从视觉工作室栏发送到后面/带到前面，但它不会作为一个单元出现，而是一个接一个地出现。

谁能给我一个解决方案来做到这一点？

我尝试了图层概念，但我不知道如何使用 rdlc 报告文件来制作它。

# android - 检查应用程序是否正在运行并终止

> ID：13861548
> 
> 赞同：0
> 
> 时间：2012-12-13T14:07:11.393
> 
> 标签：android

我想知道我是否可以从其他应用程序中杀死应用程序。我的意思是我想创建应用程序，当我启动这个应用程序时，我会检查其他应用程序的状态，如果应用程序，例如“Startex”正在运行，那么我会杀死“Startex”应用程序并运行我的第二个应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:08:54.010

你不能。只有`Android`在需要内存时才能杀死应用程序。为此，您应该知道`PID`要杀死的应用程序并在内核级别调用系统调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:19:15.693

如果这两个应用程序都是由您设计的，那么您可以在这两个应用程序中共享[用户 ID ，那么您可以](http://developer.android.com/guide/topics/manifest/manifest-element.html)[在这里](https://stackoverflow.com/questions/12036895/kill-another-application-in-android)杀死另一个应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T16:52:07.133

这是不可能的，或者至少不应该这样做。Android 本身应该控制何时不再需要应用程序，通常基于需要为可能打开的另一个应用程序释放一些内存。谷歌不赞成开发者在不让 Android 处理的情况下自行杀死该应用程序，并且很可能永远不会在谷歌的 Play 商店中获得任何促销位置。

# c# - 从 string.Format 链接更改为链接类型

ID：13861549

赞同：0

时间：2012-12-13T14:07:13.040

标签：c#, asp.net-mvc

# html - 在正方形底部的标签中渲染

> ID：13861553
> 
> 赞同：0
> 
> 时间：2012-12-13T14:07:16.190
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:08:19.953

添加`position: relative`到块。

```
.block {
    display: block;
    width: 140px;
    height: 140px;
    position: relative;
} 
```

# html - 我需要像 option1 (10) 这样的选择框选项

> ID：13861554
> 
> 赞同：0
> 
> 时间：2012-12-13T14:07:16.630
> 
> 标签：html

我想在 <option> 中放置一个 span / div 标签。有可能做或有人发现过这种问题吗？这是代码：

```
<option>
  <span class="bla1">Bla...bla....</span>
  <span class="bla2">Bla...bla....</span>
  <span class="bla3">Bla...bla....</span>
</option> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:13:28.190

你的问题不完整。在 ??(what) 里面无论如何，你可以使用按钮的输入类型，然后是 span。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:17:05.753

是的，在您的选择/选项标签内插入一个 div/span 标签是没有问题的。你自己试试吧:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T16:40:03.747

我认为您正在尝试为每个选项指定某种细节。

像这样的东西：

`Language Courses:`

 ````
< select>

    < option>English < span>Basic</ span>< span>Advanced</ span>< span>Native</ span></ option> 

    < option>Spanish < span>Basic</ span>< span>Advanced</ span>< span>Native</ span></ option> 

    ... etc

</ select> 
````  `如果是这种情况，也许您想将一个`select`元素用于主选择，另一个用于子选择，如果需要，可能使用 javascript 动态更改子选项`

# php - 使用 Smarty 的模板模板

> ID：13861555
> 
> 赞同：0
> 
> 时间：2012-12-13T14:07:19.250
> 
> 标签：php, html, smarty

我最近开始使用[Smarty](http://www.smarty.net/)，它可以大大减少网页中的样板代码。

如何通过使用 Smarty 制作`.php`相关`.tpl`文件的模板来进一步扩展减少样板代码的想法？或者，有没有更简单的，如果更少的“元”，方法？

例如，考虑一个所有页面都具有相同菜单和侧边栏的网站。可以使用 Smarty 为给定页面的每个菜单项生成 HTML 代码。有没有办法生成`.tpl`文件，因为它们有很多共同点？（也许我的很多设计都可以在两个层面上实现自动化这一事实表明设计不佳？）

这就像使用一个 PHP 文件生成另一个文件一样简单吗？

为了提供一个更具体的例子，我使用 Smarty生成了[这个网站](http://tox.sinaiem.org/)的索引页面。如您所见，其他[一些](http://tox.sinaiem.org/projects.html)[页面](http://tox.sinaiem.org/about.html)[足够](http://tox.sinaiem.org/team.html)接近，我认为可以更简洁地生成 HTML。我认为为每个页面生成 Smarty 模板的机制是一种合理的方法，尽管我不确定如何进行。

**相关的问题**

这个问题，[Calling Smarties display() method multiple times vs using includes](https://stackoverflow.com/questions/8019093/calling-smarties-display-method-multiple-times-vs-using-includes)，指的是模板继承，这可能是我试图理解的 OOP 类似物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:58:21.557

我通常做的，可能不是最好的方法，但可能会帮助你，是拥有一个全局模板，其中包括用于`header`、`menu`、`footer`等的模板，并包括一个数据驱动的`content`模板。

```
{* Smarty Template *}
{* Core Template *}
{* Multi-lang - Loads all inner components of the page *}
<!DOCTYPE HTML>
<html>
    <head>
        {include file=$lang|cat:"/head.tpl"}
    </head>
    <body>
        {include file=$lang|cat:"/menu.tpl"}
        {include file=$lang|cat:"/body.tpl"}
        {include file=$lang|cat:"/footer.tpl"}
    </body>
</html> 
```

我将有一个简单`body.tpl`的，可以做的很少：

```
{* Smarty Template *}
{* Base Template for BODY *}
<div>
    {include file=$lang|cat:"/"|cat:$view|cat:".tpl"}
</div> 
```

Where`$view`代表`content`我想要显示的（另一个模板）。如您所见，我的设置是多语言的，`$lang|cat:`如果您不想处理一种以上的语言，可以删除该部分。

如果您想让某些页面覆盖`head`or `menu`，则可以很容易地执行以下操作：

```
{if isset($headerOverride) }
    {include file=$headerOverride}
{else}
    {include file=$lang|cat:"/head.tpl"}
{/if} 
```

通过将您的模板分解成更小的可覆盖的块，我认为您可以为您的模板保持一个相当稳固的结构，并且仍然允许异常加载自定义代码。

# jquery - jQuery编写ajax html响应

> ID：13861556
> 
> 赞同：1
> 
> 时间：2012-12-13T14:07:20.403
> 
> 标签：jquery, jquery-post

我有以下 jQuery 和文件 set-rank.php 只是更新了一个数据库，并且在文件中它还写入了我想要覆盖 #data 部分的新数据。我的控制台日志 html 响应显示了我需要它的内容，但我无法将它传递给 jquery 以实际将我的 html 响应写入我的页面。

**查询**

```
$('input.ranking').keyup(function(e) {
    var thisClass = $(this).attr('class');
    var catID = $('input[name=catid]').val();
    var substr = thisClass.split('-');
    var pdID = substr[1];
    var pdRank = $(this).val();
    qString = 'pdID='+pdID+'&pdRank='+pdRank+'&catID='+catID;
    //console.log(qString);
        $.post('/assets/inc/set-rank.php', qString, function (data) {
            console.log(data);

            $('#data').html(data);
        }, "json");
}); 
```

提前致谢

编辑控制台 .log 显示如下图像。它不会将此 html 写入我的页面 ![在此处输入图像描述](../Images/bf5419c62f3d86afb6801c8126be1391.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:26:53.373

删除`$.post`aka`json`字符串的最后一个参数。由于从我在您的屏幕截图中看到的内容，服务器返回 HTML 而不是 JSON 数据，因此导致它失败。

另外：您可以将对象传递给 jquery 的`data`参数，而不是自己创建字符串，如下所示`{rank: pdRank, catId: id}`

# joomla - Joomla 2.5 在组件布局中加载自定义字段致命错误

> ID：13861563
> 
> 赞同：1
> 
> 时间：2012-12-13T14:07:42.830
> 
> 标签：joomla, joomla2.5

我试图在我的后端组件默认视图（default.php）中加载自定义字段：

```
JFormHelper::addFieldPath(JPATH_COMPONENT . '/models/fields');
$productType = JFormHelper::loadFieldType('ProductType',false);

$productTypeOptions = $productType->getOptions(); 
```

但我收到一个致命错误：

```
Fatal error: Call to a member function children() on a non-object in xxx\libraries\joomla\form\fields\list.php on line 89 
```

当我将此自定义字段加载到表单中时，一切正常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:53:00.753

确保向字段添加正确的路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:42:26.437

在您的`$productType->getOptions()`功能中，尝试删除：
`$options = array_merge(parent::getOptions(), $options);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:31:55.423

好吧，我试图扩展我的伙伴上述想法，但它似乎是一个不恰当的编辑，然后我把它放在这里：

这对我有用。在您的 getOptions 中，如果您有类似此处找到的 getOptions ( [http://docs.joomla.org/How_to_add_custom_filters_to_component_admin](http://docs.joomla.org/How_to_add_custom_filters_to_component_admin) )，您将拥有这一行：

$options = array_merge(parent::getOptions(), $options);

这是导致错误的原因。为什么？好吧，我不确定。如果您看到相关文件，您会发现：

foreach ($this->element->children() as $option)

所以问题是你在模型父级上调用 children() 似乎没有初始化。为什么需要array_merge？在这里讨论（[http://forum.joomla.org/viewtopic.php?f=626&t=782877](http://forum.joomla.org/viewtopic.php?f=626&t=782877)）

我的解释更像是一个肮脏的盲区，但希望它有助于向前发展。

# javascript - 扩展阅读更多/阅读更少的 jQuery 脚本

> ID：13861566
> 
> 赞同：0
> 
> 时间：2012-12-13T14:07:49.727
> 
> 标签：javascript, jquery

我有这个很棒的脚本，它使用 jQuery**显示一小部分内容并允许用户阅读更多/阅读更少**的内容。这是我目前的**小提琴**：http: [//jsfiddle.net/Tqwdh/1/](http://jsfiddle.net/Tqwdh/1/)

**摘要：当您单击图像时，它需要显示附加文本。**

我很想知道如何更新此脚本以允许用户单击关联的图像，它会显示更多的文本（以及保持文本链接到位）。

有人可以告诉我如何实现这一目标吗？

这是我的示例**HTML**：

```
<article id="post-5" >

            <div class="more-less">    
                <div class="more-block">
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed diam purus, lacinia eget placerat sit amet, bibendum nec nisl. Curabitur a mattis ipsum. Praesent quis nisi in purus malesuada rhoncus. Pellentesque ut quam eget libero congue lobortis. Nunc sed quam ac erat lobortis eleifend. Donec elementum sodales cursus. Aliquam porttitor massa nisi, in laoreet turpis. Sed consequat condimentum lorem ut dignissim. Sed hendrerit mauris ut massa fermentum laoreet. Pellentesque a leo vitae enim dictum lobortis. Praesent commodo feugiat velit iaculis malesuada.</p>
                    <p>Phasellus id elit ac lacus faucibus ullamcorper. Etiam ullamcorper pretium tellus, ut pharetra ante pulvinar vel. Sed neque diam, semper vel rhoncus non, congue ut sapien. Integer a mi eget libero elementum lobortis. Donec hendrerit egestas ligula sit amet eleifend. Curabitur pharetra venenatis tempor. Quisque pulvinar malesuada justo, ut euismod arcu pharetra vitae. Cras lobortis, ligula id euismod euismod, ipsum risus varius urna, faucibus gravida lectus mi nec nulla. Fusce eleifend fringilla nibh ut vulputate. Vivamus sagittis leo metus. Etiam facilisis convallis lacus adipiscing hendrerit. Duis ultricies euismod libero, nec blandit est semper a. Phasellus sit amet justo sed quam elementum lobortis. Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                </div>
            </div>

            <p>
                <a href="#" title="News Item 1"><img src="http://placehold.it/300x187" alt="News Item 1" width="300" height="187" /></a>
            </p>            

        </article><!-- #post-## --> 
```

和我的**jQuery**：

```
$(function(){
        // The height of the content block when it's not expanded
        var adjustheight = 130;
        // The "more" link text
        var moreText = "Click to read more...";
        // The "less" link text
        var lessText = "Click to read less...";
        // Sets the .more-block div to the specified height and hides any content that overflows
        $(".more-less .more-block").css('height', adjustheight).css('overflow', 'hidden');
        // The section added to the bottom of the "more-less" div
        $(".more-less").append('<p style="display:block;margin-top:8px"><a href="#" class="adjust"></a></p>');
        $("a.adjust").text(moreText);
        $(".adjust").toggle(function() {
                $(this).parents("div:first").find(".more-block").css('height', 'auto').css('overflow', 'visible');
                // Hide the [...] when expanded
                $(this).parents("div:first").find("p.continued").css('display', 'none');
                $(this).text(lessText);
            }, function() {
                $(this).parents("div:first").find(".more-block").css('height', adjustheight).css('overflow', 'hidden');
                $(this).parents("div:first").find("p.continued").css('display', 'block');
                $(this).text(moreText);
        });
        }); 
```

谢谢 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:20:06.210

你可以像这样向 img 添加一个点击处理程序： [DEMO](http://jsfiddle.net/Tqwdh/3/)

```
$(function(){
    $('img').click(function(){
        $(this).closest('article').find('.adjust').click();
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:37:02.473

只需将“单击以阅读更多”元素的相同行为添加到图像元素。

当您像这样设置切换处理程序时：

```
$(".adjust").toggle(function() {
        $(this).parents("div:first").find(".more-block").css('height', 'auto').css('overflow', 'visible');
        // Hide the [...] when expanded
        $(this).parents("div:first").find("p.continued").css('display', 'none');
        $(this).text(lessText);
    }, function() {
        $(this).parents("div:first").find(".more-block").css('height', adjustheight).css('overflow', 'hidden');
        $(this).parents("div:first").find("p.continued").css('display', 'block');
        $(this).text(moreText);
    }); 
```

只需使用 jQuery 的[多重选择器](http://api.jquery.com/multiple-selector/)来选择图像元素，就像在这个例子中一样：

```
$(".adjust, #img1, #img2").toggle(function() {
        $(this).parents("div:first").find(".more-block").css('height', 'auto').css('overflow', 'visible');
        // Hide the [...] when expanded
        $(this).parents("div:first").find("p.continued").css('display', 'none');
        $(this).text(lessText);
    }, function() {
        $(this).parents("div:first").find(".more-block").css('height', adjustheight).css('overflow', 'hidden');
        $(this).parents("div:first").find("p.continued").css('display', 'block');
        $(this).text(moreText);
    }); 
```

[演示](http://jsfiddle.net/a0viedo/yHMMQ/)

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T14:27:47.720

您需要将逻辑从[`toggle`处理程序](http://api.jquery.com/toggle-event/)移至您自己的实现，因为您有多个事件源。

```
<article id="post-5" >
    <div class="more-less">    
        <div class="more-block">…&lt;/div>
    </div>
    <p>
         <a href="#post-5" class="adjust" title="News Item 1">…&lt;/a>
    </p>            
</article> 
```

```
$(function(){
    var adjustheight = 130; // The height of the content block when it's not expanded
    var texts = {
        more: "Click to read more…",
        less: "Click to read less…"
    };
    $("article").each(function() {
        var block = $(".more-block", this).css({height:adjustheight, overflow:'hidden'}),
            cont = $("p.continue", this),
            toggle = $('<a href="#'+this.id+'" class="adjust">').text(texts.more),
            open = false;
        $(".more-less", this).append($('<p style="display:block;margin-top:8px">').append(link));
        $("a.adjust", this).click(function() {
            open = !open;
            block.css("height", open ? "auto" : adjustheight);
            link.text(texts[open ? "less" : "more"]);
            cont[open ? "show" : "hide"]();
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-09T08:50:09.867

```
 var maxLength = 50;
    $('.N_DESC').each( function (e) { 
        const thisVal = $(this).text();
        const thisLength = $.trim(thisVal).length;
        const noticeStr = thisVal.substring(0, maxLength);
        const removedStr = thisVal.substring(maxLength, thisLength);
        if(thisLength > maxLength){
            $(this).empty().html(noticeStr);
            $(this).append('<span class="more-text">'+ removedStr +'</span>');
            $(this).append(`<a href="javascript:void(0);" class="read-more" style="padding-left: 8px;">Read More..</a>`);
        }
    }); 
    $(document).on('click', '.read-more', function (e) { 
        $(this).closest('span').find('.more-text').show();
        $(this).addClass('read-less');
        $(this).removeClass('read-more');
        $(this).html('Read Less..');
    });
    $(document).on('click', '.read-less', function (e) { 
        $(this).closest('span').find('.more-text').hide();
        $(this).addClass('read-more');
        $(this).removeClass('read-less');
        $(this).html('Read More..');
    });
```

```
 .N_DESC .more-text{
        display: none;
    }
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<span class="N_DESC">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas porttitor congue massa. Fusce posuere, magna sed pulvinar ultricies, purus lectus malesuada libero, sit amet commodo magna eros quis urna. Nunc viverra imperdiet enim. Fusce est. Vivamus a tellus. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Proin pharetra nonummy pede. Mauris et orci. Aenean nec lorem. In porttitor.</span>
<br>
<span class="N_DESC">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas porttitor congue massa. Fusce posuere, magna sed pulvinar ultricies, purus lectus malesuada libero, sit amet commodo magna eros quis urna. Nunc viverra imperdiet enim.</span>
<br>
<span class="N_DESC">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas porttitor congue massa. Fusce posuere, magna sed pulvinar ultricies, purus lectus malesuada libero</span>
```

# php - PHP 和 XML - 解析没有结果

> ID：13861569
> 
> 赞同：0
> 
> 时间：2012-12-13T14:07:54.833
> 
> 标签：php, xml, parsing

在我的 php 脚本中，我尝试解析一个在线的 xml 文件。

这就是我将它加载到我的脚本中的方式：

```
$xml = simplexml_load_file($filename); 
```

现在，我想做一个测试输出。我试试

```
echo $xml->title; 
```

但没有结果。当我尝试 print_r($xml) 时，我得到了正确的 XML 文件。它看起来像这样：

```
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
<channel>
<title>testtitle</title>

and so on 
```

为什么没有结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:17:05.597

这是因为元素的嵌套。

```
<rss>
-> $xml
<channel>
-> $xml->channel
<title>
-> $xml->channel->title 
```

所以如果你使用：

```
<?php
echo  $xml->channel->title;
?> 
```

这将输出你的标题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:24:40.883

//test.xml

```
<?xml version="1.0"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>testtitle</title>
    </channel>
</rss> 
```

//test.php

```
<?php 
$xml = simplexml_load_file('test.xml');
echo $xml->channel->title;
?> 
```

# apache-pig - 通过不同字段连接多个关系

> ID：13861570
> 
> 赞同：1
> 
> 时间：2012-12-13T14:07:57.003
> 
> 标签：apache-pig

假设我有三个文件`data1`，`data2`并且`assocs`：

```
$ cat data1
key1,foo
key2,bar
$ cat data2
key3,braz
key4,froz
$ cat assoc 
key1,key3
key2,key4 
```

我通过加载这些文件

```
$ pig -b -p debug=WARN -x local
Warning: $HADOOP_HOME is deprecated.

Apache Pig version 0.10.0 (r1328203) compiled Apr 19 2012, 22:54:12
Logging error messages to: /home/vince/tmp/pig_1355407390166.log
Connecting to hadoop file system at: file:///
grunt> data1 = load 'data1' using PigStorage(',') as (key: chararray, val: chararray);  
grunt> data2 = load 'data2' using PigStorage(',') as (key: chararray, val: chararray);  
grunt> assoc = load 'assoc' using PigStorage(',') as (key1: chararray, key2: chararray); 
```

我想要的是一个看起来像这样的关系：

```
(foo, braz)
(bar, froz) 
```

那是

```
data1_val, data1_key <-> assoc_key1, assoc_key2 <-> data2_key, data2_val 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T16:24:59.047

```
A = join data1 by key, assoc by key1;
B = join A by assoc::key2, data2 by key;
RES = foreach B generate A::data1::val, data2::val; 
```

# matlab - 您如何编辑 x 轴，但不更改 Matlab 上图形/2D 图像的比例？

> ID：13861573
> 
> 赞同：1
> 
> 时间：2012-12-13T14:08:06.270
> 
> 标签：matlab, graph, axis

我有一个时间空间二维图，目前轴是 1-101。但是我需要将这些值更改为 -0.0005 到 0.0005；但是，当我将这些值更改为 X 限制时，图表会变为 -0.0005-0.0005 并删除所有数据。

我只想更改与图表无关的 x 轴数据值。如果这有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:10:17.953

您应该更改轴的刻度标签（即为刻度显示的字符串），而不是轴值。

或者，您可以重新缩放图像（例如，在 imagesc() 命令中指定 x 和 y 向量。

编辑：见这里的例子： http: [//www.mathworks.nl/help/matlab/creating_plots/setting-axis-parameters.html#f6-27790](http://www.mathworks.nl/help/matlab/creating_plots/setting-axis-parameters.html#f6-27790)

在页面中搜索：“您可以调整轴刻度线位置和出现在每个刻度线处的标签。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T01:47:02.143

您需要更改当前轴的 XTickLabels。您可以通过修改 XTickLabel 来做到这一点，如下例所示：

```
plot(1:5)
set(gca,'Xtick',1:5,'XTickLabel',{'7', '8', '9', '10', '11'}) 
```

# c - 存储整数和算术运算符的数据类型？

> ID：13861578
> 
> 赞同：-2
> 
> 时间：2012-12-13T14:08:26.127
> 
> 标签：c, rpn

当用户想要输入时，有什么方法可以让我输入用户的数字以及用户选择的任何算术运算符。我基本上是在尝试制作一种计算器，用户将首先输入数字，最后将运算符应用于它。但是没有任何固定限制，用户将首先输入多少个数字。它的用户愿望。我的程序应该自己猜测它是字符输入还是整数输入。可能吗 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:14:41.567

这只是对简单算术类编程问题的概述。

将输入作为字符并存储在 char 数组缓冲区中。然后使用`strtol`您可以将其转换为`long int`.

[有关 strtol() 的更多信息](http://linux.die.net/man/3/strtol)

还将运算符作为字符数组，其中每个索引处的字符将表示运算符。

应用`switch - case`并根据这些情况（将是操作员`+`等`-`）执行您的操作。

另一种方法是转换`infix arithmetic notations`为`postfix notations`并使用`stacks`它并简单地解决。在这种情况下，运算符优先级不会有问题，因为您已经应用该逻辑将运算符存储到堆栈中，只需一个一个弹出并执行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:09:19.767

假设用户只能输入以下操作格式之一：

```
x + y
x * y
x - y
x / y 
```

在此之后，您将如何做到这一点：

```
#include<stdio.h>
#include<stdlib.h>

int main () {
    int x, y;
    char op;

    printf ("Enter your Expression The Format should be One of the following:\nx + y\nx - y\nx * y\nx / y\n");
    if (scanf("%d %c %d",&x,&op,&y)<3) {
        printf("Wrong Expression\n");
        return 0;
    }
    switch (op) {
        case '+':
            printf("%d + %d = %d\n",x,y,x+y );
            break;
        case '-':
            printf("%d - %d = %d\n",x,y,x-y );
            break;
        case '*':
            printf("%d * %d = %d\n",x,y,x*y );
            break;
        case '/':
            printf("%d / %d = %d\n",x,y,x/y );
            break;
        default:
            printf("Invalid operator %c\n",op);
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:15:41.713

整数应以 0~9 或减号开头。

运算符应该是一个字符减号或不是 0~9 字符。

将您的输入作为字符串，判断它是运算符还是整数，然后使用 atoi 将字符串转换为整数。

如果你有能力写一个计算器，那对你来说应该是简单的任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T14:33:08.197

我的建议是构建一个 OPP（对象优先级解析器）来对用户输入的字符串进行操作。当您将输入作为字符串时，用户有权输入整个代数方程以及算术运算符，因为它们仅被视为字符。然后，您可以将其转换为 char 数组，对其执行 OPP 操作。 [http://code.google.com/p/expressionparser/](http://code.google.com/p/expressionparser/)

或者您可以做的是逐步输入数字，然后是运算符，然后是数字:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T14:40:44.803

你并没有真正列出很多细节或任何你想如何处理的例子，所以我不能给你更好的建议。由于您不知道输入的顺序或数量（数字/字符），因此建议将其作为字符串：

```
char *expression_buf = NULL;
scanf("%m[^\n]", expression_buf); // grab any number of characters/digits with spaces
//do some postfix stuff
free(expression_buf); 
```

然后你可以通过以下方式找出什么是数字，什么不是：

```
#include <ctype.h>
isdigit(expression_buf[index]) 
```

这几乎就是您需要的所有工具。然后弹出数字/运算符并按顺序应用它们。将它们放在堆栈上会有所帮助，这样您就可以按正确的顺序将它们弹出。

# c# - NHibernate Fluent Sqlite 强制使用“插入或替换”

> ID：13861579
> 
> 赞同：3
> 
> 时间：2012-12-13T14:08:28.347
> 
> 标签：c#, sqlite, nhibernate

我需要强制 NHibernate 不使用典型`INSERT`的语句，而是使用 sqlite 的`INSERT OR REPLACE`语句

我知道在`ClassMap<>`我将使用时是可能的`SqlInsert("INSERT OR REPLACE...")`，但我有超过 100 个实体，我不会为每个映射类添加它。

有谁知道如何以另一种简单的方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:12:20.520

INSERT OR REPLACE 需要哪些列是唯一的信息并决定是否应该使用插入或替换。NHibernate 中没有内置的机制，因为它太特殊了。最简单的方法是在保存或处理重复键异常之前进行查询（ISqlExceptionConverter 在这里有帮助）

# python - 在不下载整个图像的情况下获取 EXIF 数据 - Python

> ID：13861581
> 
> 赞同：6
> 
> 时间：2012-12-13T14:08:33.603
> 
> 标签：python, image, download, client-server, exif

是否可以远程获取图像的 EXIF 信息并且只下载 EXIF 数据？

根据我对[图像文件中 EXIF 字节的](http://www.media.mit.edu/pia/Research/deepview/exif.html)了解，EXIF 数据位于图像的前几个字节中。

所以问题是如何用 Python 只下载远程文件的前几个字节？（编辑：依赖 HTTP Range Header 不够好，因为并非所有远程主机都支持它，在这种情况下会发生完整下载。）

例如，我可以在 x 个字节的进度后取消下载吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T15:09:13.007

[您可以通过设置HTTP 范围标头](http://www.greenbytes.de/tech/webdav/draft-ietf-httpbis-p5-range-latest.html)告诉 Web 服务器只向您发送文件的一部分。有关用于部分下载文件的示例，请参阅[此答案。](https://stackoverflow.com/a/7944711/1110381)`urllib`所以你可以下载一块例如1000字节的块，检查exif数据是否包含在块中，如果找不到exif app1头或exif数据不完整，则下载更多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T15:14:28.387

这在很大程度上取决于图像格式。例如，如果您有一个 TIFF 文件，则无法事先知道 EXIF 数据（如果有）在文件中的位置。它可能就在标题之后和第一个 IFD 之前，但这不太可能。它可能在图像数据之后。很有可能它在中间的某个地方。

如果您想要 EXIF 信息，请在服务器上提取它（可能是缓存）并将其打包发送出去，而不是要求客户端代码执行此操作。

# c# - 在记事本中拉出打印对话框

> ID：13861583
> 
> 赞同：0
> 
> 时间：2012-12-13T14:08:36.557
> 
> 标签：c#

我要做的是从 .txt 创建一个 Windows Journal (.jrn) 文件。这种转换可以通过打印到虚拟的“Journal Note Writer”打印机来完成。我一直在努力使用几种不同的方法来让它工作一段时间，所以我决定尝试简化事情（我希望如此）。

**我目前拥有的**

```
Process p = new Process();
p.StartInfo = new ProcessStartInfo()
{
    FileName = fileToOpen, // My .txt file I'd like to convert to a .jrn
    CreateNoWindow = true,
    Arguments = "-print-dialog -exit-on-print"
};
p.Start(); 
```

这会在记事本中打开文件，但不会打开打印对话框。我希望打开打印对话框，并且理想情况下能够在打印对话框中指定一些默认选项。

我尝试过的另一件事是（在另一个 SO 问题中找到）：

```
Process p = new Process( );
p.StartInfo = new ProcessStartInfo( )
{
    CreateNoWindow = true,
    Verb = "print",
    FileName = fileToOpen
};
p.Start( ); 
```

这样做的问题是它只是自动将文件打印到默认打印机（物理打印机）而不给我更改它的选项。

**我在寻找什么**

在这一点上，我只是在寻找将 .txt 打印到“Windows Note Writer”的任何方法。我尝试在不通过外部应用程序的情况下进行打印，但也遇到了一些麻烦。我找不到任何其他关于转换为 .jrn 文件的参考资料，所以我愿意接受任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:43:21.093

To get `Journal Note Writer` as printer you would have to add it into the printer preferences -> Add Printer (I wonder whether it could be done programmatically).

Anyways you can always get a print of a plain .txt file as described here at [`MSDN`](http://msdn.microsoft.com/en-us/library/aa287530(v=vs.71).aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:10:58.510

在为这个问题挣扎了一段时间后，我决定回去尝试直接通过应用程序处理打印，而不通过记事本。我之前尝试这个时遇到的问题是更改纸张大小会破坏生成的 .jrn 文件（打印输出将为空白）。事实证明，更改某些纸张尺寸设置对于在非本地纸张尺寸上打印是必要的。

以下是最终代码，以防其他人遇到此问题。感谢大家的帮助。

```
private void btnOpenAsJRN_Click(object sender, EventArgs e) {
    string fileToOpen = this.localDownloadPath + "\\" + this.filenameToDownload;
    //Create a StreamReader object
    reader = new StreamReader(fileToOpen);
    //Create a Verdana font with size 10
    lucida10Font = new Font("Lucida Console", 10);
    //Create a PrintDocument object
    PrintDocument pd = new PrintDocument();

    PaperSize paperSize = new PaperSize("Custom", 400, 1097);
    paperSize.RawKind = (int)PaperKind.Custom;
    pd.DefaultPageSettings.PaperSize = paperSize;
    pd.DefaultPageSettings.Margins = new Margins(20, 20, 30, 30);

    pd.PrinterSettings.PrinterName = ConfigurationManager.AppSettings["journalNotePrinter"];
    pd.DocumentName = this.filenameToDownload;
    //Add PrintPage event handler
    pd.PrintPage += new PrintPageEventHandler(this.PrintTextFileHandler);

    //Call Print Method
    try {
        pd.Print();
    }
    finally {
        //Close the reader
        if (reader != null) {
            reader.Close();
        }
        this.savedJnt = fileToOpen.Replace("txt", "jnt");
        System.Threading.Thread.Sleep(1000);
        if (File.Exists(this.savedJnt)) {
            lblJntSaved.Visible = true;
            lblJntSaved.ForeColor = Color.Green;
            lblJntSaved.Text = "File successfully located.";
            // If the file can be found, show all of the buttons for completing 
            // the final steps.
            lblFinalStep.Visible = true;
            btnMoveToSmoketown.Visible = true;
            btnEmail.Visible = true;
            txbEmailAddress.Visible = true;
        }
        else {
            lblJntSaved.Visible = true;
            lblJntSaved.ForeColor = Color.Red;
            lblJntSaved.Text = "File could not be located. Please check your .jnt location.";
        }
    }
}

private void PrintTextFileHandler(object sender, PrintPageEventArgs ppeArgs) {
    //Get the Graphics object
    Graphics g = ppeArgs.Graphics;
    float linesPerPage = 0;
    float yPos = 0;
    int count = 0;
    //Read margins from PrintPageEventArgs
    float leftMargin = ppeArgs.MarginBounds.Left;
    float topMargin = ppeArgs.MarginBounds.Top;
    string line = null;
    //Calculate the lines per page on the basis of the height of the page and the height of the font
    linesPerPage = ppeArgs.MarginBounds.Height /
    lucida10Font.GetHeight(g);
    //Now read lines one by one, using StreamReader
    while (count < linesPerPage &&
    ((line = reader.ReadLine()) != null)) {
        //Calculate the starting position
        yPos = topMargin + (count *
        lucida10Font.GetHeight(g));
        //Draw text
        g.DrawString(line, lucida10Font, Brushes.Black,
        leftMargin, yPos, new StringFormat());
        //Move to next line
        count++;
    }
    //If PrintPageEventArgs has more pages to print
    if (line != null) {
        ppeArgs.HasMorePages = true;
    }
    else {
        ppeArgs.HasMorePages = false;
    }
} 
```

# mercurial - 仅本地分行

> ID：13861584
> 
> 赞同：2
> 
> 时间：2012-12-13T14:08:37.427
> 
> 标签：mercurial

我想在我的克隆存储库中有本地分支，而主存储库中不存在。为此，我创建了名为“new_branch”的分支，开发并提交给它。有时我对默认分支进行提交，然后我使“push -b default”分支“new_branch”没有出现在主存储库中。在“new_branch”中的开发完成后，我合并到默认分支，我想为默认分支“push -b default”进行推送。我收到消息“中止：推送创建新的远程分支：new_branch！（使用'hg push --new-branch'创建新的远程分支）”。我可以在 Mercurial 开设唯一的本地分店吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T15:11:02.017

你可以试试：

*   [LocalBranch Extension](http://mercurial.selenic.com/wiki/LocalbranchExtension)（只有[Tim Lee 叉子](https://bitbucket.org/timlee/mercurial-extensions-localbranch)似乎可以与当前的 Mercurial 一起使用）
*   MQ（**无** `--mq`选项推送）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:56:57.130

使用 创建分支[`hg branch`](http://www.selenic.com/hg/help/branch)后，它就是变更集的永久部分。它总是要求您使用该`--new-branch`选项进行推送。您不能在不修改历史记录的情况下剥离分支名称。

如果您想为推送时不会传播的分支提供本地名称，那么您应该[`hg bookmark`](http://www.selenic.com/hg/help/bookmarks)改用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T11:27:52.923

在现代 Mercurial 中可以为此使用[阶段：](http://mercurial.selenic.com/wiki/Phases)

```
# hg phase --secret -r 7::10 
```

将更改 7 到 10 标记为秘密，因此它们不会被推送、拉取、克隆等。

# sql - 左连接到两个内连接表

> ID：13861589
> 
> 赞同：2
> 
> 时间：2012-12-13T14:09:03.917
> 
> 标签：sql, sql-server

我确定我可能只是健忘或过于复杂......但这是我的场景：

## 日历表（记录每年的每一天）

```
iso_date
01/01/01
02/01/01
03/01/01
04/01/01 
```

## 场地表（每个场地的记录）

```
venue
All London
London Tower
London Bridge
Millenium Bridge 
```

## 综合场地表（参考链接场地）

```
master_venue,     child_venue
All London,       All London
All London,       London Tower
All London,       London Bridge
All London,       Millenium Bridge
London Tower,     London Tower
London Bridge,    London Bridge
Millenium Bridge, Millenium Bridge 
```

## 预订表（记录每次预订，包括日期和地点）

```
iso_date, venue,            event
01/01/01, All London,       1
02/01/01, London Tower,     2
02/01/01, Millenium Bridge, 3
04/01/01, London Bridge,    4 
```

## 事件表

```
event, status
1,     1
2,     0
3,     1
4,     1 
```

现在我想加入表格，这样我就可以得到每天每个场地的记录，无论它是否已被预订。如果场地有预订，我只想在活动状态为 1 时查看它。

## 输出

```
iso_date, venue,            booked
01/01/01, All London,       1
01/01/01, London Tower,     1
01/01/01, London Bridge,    1
01/01/01, Millenium Bridge, 1
02/01/01, All London,       0
02/01/01, London Tower,     0
02/01/01, London Bridge,    0
02/01/01, Millenium Bridge, 1
03/01/01, All London,       0
03/01/01, London Tower,     0
03/01/01, London Bridge,    0
03/01/01, Millenium Bridge, 0
04/01/01, All London,       0
04/01/01, London Tower,     0
04/01/01, London Bridge,    1
04/01/01, Millenium Bridge, 0 
```

我不能在 where 子句中使用事件状态，因为它会完全删除记录。

我知道我可以使用子查询或一些复杂的案例语句，但是我可以智能地加入表来解决我的问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T14:14:49.437

你应该能够写：

```
SELECT Calendar.iso_date AS iso_date,
       Venues.venue AS venue,
       COALESCE(Events.status, 0) AS booked
  FROM Calendar
 CROSS
  JOIN Venues
  LEFT
 OUTER
  JOIN (      Bookings
         JOIN Events
           ON Events.event = Bookings.event
          AND Events.status = 1
       )
    ON Bookings.iso_date = Calendar.iso_date
   AND Bookings.venue = Venues.venue
; 
```

（免责声明：未经测试。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:14:10.677

您需要从一个驱动表开始，它是日历和场地的交叉连接。然后，加入预订以获取预订信息：

```
select c.iso_date, v.venue,
       (case when b.event is NULL then 0 else 1 end) as Booked
from calendar c cross join
     venues v left outer join
     bookings b
     on b.iso_date = c.iso_date and
        b.venue = v.venue 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:17:17.593

```
select iso_date, 
       venue,
       max(case when events.event is not null then 1 else 0 end) as booked
    from calendar
    cross join venue
    left outer join bookings on
        bookings.date  = iso_date and
        bookings.venue = venue.venue
    left outer join events on 
        events.status = 1 and 
        events.event = bookings.event
    group by iso_date, venue 
```

更新：用两个外连接重写了查询，这样即使只获取记录的一小部分，它也会很有效。

以下是您最有效地获得单一日期和地点的方法：

```
select iso_date, 
       venue,
       max(case when events.event is not null then 1 else 0 end) as booked
    from calendar
    inner join venue on
        calendar.iso_date = '01/01/01' and
        venue.venue = 'my front lawn'
    left outer join bookings on
        bookings.date  = iso_date and
        bookings.venue = venue.venue
    left outer join events on 
        events.status = 1 and 
        events.event = bookings.event
    group by iso_date, venue 
```

# django - 检查占位符内容存在的条件

> ID：13861593
> 
> 赞同：1
> 
> 时间：2012-12-13T14:09:14.290
> 
> 标签：django, django-templates, django-cms

如何检查占位符内容的存在并制作下一个技巧？：

```
{% if placeholder 'Head_text' %} <--check here
   <div class="in">
      ...
         ...
             <h2 class="title">{% placeholder 'Head_text' %}</h2>
         ...
      ...
   </div>
{% endif %} 
```

我想知道，在为它渲染一些特殊的 HTML 结构之前，占位符是否有一些内容。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:30:00.303

我以前遇到过这个问题，当我研究它时（这可能已经改变了），没有内置的方法可以做到这一点，所以你必须编写自己的模板标签来将占位符加载到变量中。

以下是关于 django-cms 邮件列表的一些讨论：

*   [https://groups.google.com/forum/?fromgroups=#!topic/django-cms/QeTlmxQnn3E](https://groups.google.com/forum/?fromgroups=#!topic/django-cms/QeTlmxQnn3E)
*   [https://groups.google.com/forum/#!topic/django-cms/2mWvEpTH0ns/discussion](https://groups.google.com/forum/#!topic/django-cms/2mWvEpTH0ns/discussion)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T02:07:56.320

我一直在为此寻找解决方案，但我找到了一些替代方案，而不是检查占位符是否存在。基本上，这个想法是使用不同的插件来添加额外的 html。您可以使用 pip 安装一些软件包。现在，**在尝试了它们之后，我自己做了，它比使用包要容易得多**。

1.  [cmsplugin-text-wrapper](https://pypi.python.org/pypi/cmsplugin-text-wrapper/0.6)：它集成到现有的 django-cms 默认文本插件中，保留编辑器，但在顶部添加了一个选择器，因此您可以选择`wrapper`. `wrapper`包含您要添加的额外 html 。它还有一个不错的 CSS 系统来添加类。*不利的一面是，我不想让编辑器使用额外的模板选择器变得更加困难。*

2.  [cmsplugin-text-ng](https://pypi.python.org/pypi/cmsplugin-text-ng)：这基本上添加了一个新插件。当您将插件添加到占位符时，它会显示一个带有可用模板的选择器（包含您的额外 HTML）。我真正喜欢的是您可以添加可以在自定义 HTML 中使用的额外字段。例如，您可以添加一个标题，以便插件为其显示一个额外的文本字段。*不利的一面是，模板通过管理员存储在数据库中！这对数据库来说是一个额外的打击，我真的不想为了太简单的事情而牺牲它。*

3.  使用现有的文本模型[做你自己的插件。](http://docs.django-cms.org/en/2.1.3/extending_cms/custom_plugins.html)四个非常简单的步骤：

    3.1基本上将此添加到您的`cms_plugins.py`：

    ```
    from cms.plugin_pool import plugin_pool
    from cms.plugins.text.models import Text
    from cms.plugins.text.cms_plugins import TextPlugin

    class WidgetPlugin(TextPlugin):
        model = Text
        name = _("Widget")
        render_template = "widget.html"

        def render(self, context, instance, placeholder):
            context['instance'] = instance
            return context

    plugin_pool.register_plugin(WidgetPlugin) 
    ```

    3.2`widget.html`在您的文件夹中创建您的模板`templates`：

    ```
    <div class="in">
       ...
          ...
              {{ instance.body|safe }}
          ...
       ...
    </div> 
    ```

    3.3 将占位符放置在您想要的任何位置：

    ```
     {% placeholder 'Head_text' %} 
    ```

    3.4 让用户使用新插件添加`Head_text`配置插件`settings.py`：

    ```
    CMS_PLACEHOLDER_CONF = {
        #...
        'Head_text': {
            'plugins': {'WidgetPlugin'}
        },
    } 
    ```

# python - ValueError：以 10 为底的 int () 的无效文字

> ID：13861594
> 
> 赞同：82
> 
> 时间：2012-12-13T14:09:27.447
> 
> 标签：python, python-3.x

我编写了一个程序来解决`y = a^x`，然后将其投影到图表上。问题是每当`a < 1`我收到错误时：

> ValueError：以 10 为底的 int () 的无效文字。

有什么建议么？

这是回溯：

```
Traceback (most recent call last): 
   File "C:\Users\kasutaja\Desktop\EksponentfunktsioonTEST - koopia.py", line 13, in <module> 
   if int(a) < 0: 
ValueError: invalid literal for int() with base 10: '0.3' 
```

每次我输入一个小于 1 但大于 0 的数字时，都会出现问题。对于这个例子，它是 0.3 。

这是我的代码：

```
#  y = a^x

import time
import math
import sys
import os
import subprocess
import matplotlib.pyplot as plt
print ("y = a^x")
print ("")
a = input ("Enter 'a' ")
print ("")
if int(a) < 0:
    print ("'a' is negative, no solution")
elif int(a) == 1:
    print ("'a' is equal with 1, no solution")
else:
    fig = plt.figure ()
    x = [-2,-1.75,-1.5,-1.25,-1,-0.75,-0.5,-0.25,0,0.25,0.5,0.75,1,1.25,1.5,1.75,2]
    y = [int(a)**(-2),int(a)**(-1.75),int(a)**(-1.5),int(a)**(-1.25),
            int(a)**(-1),int(a)**(-0.75),int(a)**(-0.5),int(a)**(-0.25),
            int(a)**(0),int(a)**(0.25),int(a)**(0.5),int(a)**(0.75),
            int(a)**1,int(a)**(1.25),int(a)**(1.5),int(a)**(1.75), int(a)**(2)]

    ax = fig.add_subplot(1,1,1)
    ax.set_title('y = a**x')
    ax.plot(x,y)
    ax.spines['left'].set_position('zero')
    ax.spines['right'].set_color('none')
    ax.spines['bottom'].set_position('zero')
    ax.spines['top'].set_color('none')
    ax.spines['left'].set_smart_bounds(True)
    ax.spines['bottom'].set_smart_bounds(True)
    ax.xaxis.set_ticks_position('bottom')
    ax.yaxis.set_ticks_position('left')

    plt.savefig("graph.png")
    subprocess.Popen('explorer "C:\\Users\\kasutaja\\desktop\\graph.png"')

def restart_program(): 
    python = sys.executable
    os.execl(python, python, * sys.argv)

if __name__ == "__main__":
    answer = input("Restart program? ")
    if answer.strip() in "YES yes Yes y Y".split():
        restart_program()
    else:
        os.remove("C:\\Users\\kasutaja\\desktop\\graph.png") 
```

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-12-13T14:12:47.697

# 回答：

您的回溯告诉您`int()`需要整数，您正在尝试给出小数，因此您需要使用`float()`：

```
a = float(a) 
```

这应该按预期工作：

```
>>> int(input("Type a number: "))
Type a number: 0.3
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: invalid literal for int() with base 10: '0.3'
>>> float(input("Type a number: "))
Type a number: 0.3
0.3 
```

计算机以各种不同的方式存储数字。Python有两个主要的。存储整数 (ℤ) 的整数和存储实数 (ℝ) 的浮点数。您需要根据需要使用正确的。

（请注意，Python 非常擅长从您那里抽象出来，例如，大多数其他语言也有双精度浮点数，但您不必担心。从 3.0 开始，Python 也会自动转换整数如果将它们分开，则浮动，因此实际上很容易使用。）

# 在我们进行回溯之前对答案的先前猜测：

您的问题是您输入的任何内容都无法转换为数字。这可能是由很多事情引起的，例如：

```
>>> int(input("Type a number: "))
Type a number: -1
-1
>>> int(input("Type a number: "))
Type a number: - 1
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: invalid literal for int() with base 10: '- 1' 
```

`-`在和之间添加空格`1`将导致字符串无法正确解析为数字。当然，这只是一个示例，您必须告诉我们您提供了哪些意见，以便我们能够确定问题所在。

# 关于代码风格的建议：

```
y = [int(a)**(-2),int(a)**(-1.75),int(a)**(-1.5),int(a)**(-1.25),
            int(a)**(-1),int(a)**(-0.75),int(a)**(-0.5),int(a)**(-0.25),
            int(a)**(0),int(a)**(0.25),int(a)**(0.5),int(a)**(0.75),
            int(a)**1,int(a)**(1.25),int(a)**(1.5),int(a)**(1.75), int(a)**(2)] 
```

这是一个非常糟糕的编码习惯的例子。你一次又一次地复制一些东西是错误的。首先，您使用`int(a)`了很多次，无论您在哪里执行此操作，都应该将值分配给一个变量，并使用它来代替，避免一次又一次地键入（并强制计算机计算）该值：

```
a = int(a) 
```

在此示例中，我将值分配回`a`，用我们要使用的新值覆盖旧值。

```
y = [a**i for i in x] 
```

这段代码产生了与上面的怪物相同的结果，而不需要大量地一次又一次地写出同样的东西。这是一个简单的[列表理解](http://www.youtube.com/watch?v=pShL9DCSIUw)。这也意味着，如果你编辑`x`，你不需要做任何事情`y`，它自然会更新以适应。

另请注意，Python[风格指南 PEP-8](http://www.python.org/dev/peps/pep-0008/)[强烈建议在进行函数调用时不要在标识符和括号之间留有空格](http://www.python.org/dev/peps/pep-0008/#pet-peeves)。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-11-07T20:20:35.930

正如 Lattyware 所说，Python2 和 Python3 之间存在导致此错误的差异：

使用 Python2，`int(str(5/2))`给你 2。使用 Python3，同样给你：*ValueError: invalid literal for int() with base 10: '2.5'*

如果您需要转换一些可能包含 float 而不是 int 的字符串，则应始终使用以下丑陋的公式：

```
int(float(myStr)) 
```

As`float('3.0')`并`float('3')`给你 3.0，但`int('3.0')`给你错误。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-13T14:11:54.370

`a`在输入时验证正确可能会更好。

```
try:
  a = int(input("Enter 'a' "))
except ValueError:
  print('PLease input a valid integer') 
```

这要么转换`a`为一个 int，因此您可以确保它是一个供以后使用的整数，或者它[处理](http://docs.python.org/3/tutorial/errors.html#handling-exceptions)异常并提醒用户

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-13T22:40:31.837

**int() 转换无法处理有小数点的字符串数字**

**- 示例 --> int('13.5') 会给你错误，但是 int('13') 会将字符串转换为整数**

**为什么：这被认为是用户需要的显式转换，因为如果您读取数据集并且不知道它有浮点数，它可以防止您丢失 0.5 之类的信息**

```
Work Around >

int(Float("13.5")) 
```

我遇到的一个真实示例：我希望将数字作为 int 而 int(I["mpg"]) 直接不起作用，所以我使用 float() 然后 int()

```
sum([int(float(i["mpg"])) for i in file])//len(file) 
```

# heroku - 在heroku工作者中获取超时::错误异常

> ID：13861597
> 
> 赞同：0
> 
> 时间：2012-12-13T14:09:46.060
> 
> 标签：heroku

我知道 heroku 对测功机有 30 秒的超时限制。但是对于工人来说，过去我已经执行了很多任务，而且我没有遇到任何问题。现在在应用程序的一个新功能中，如果任务花费的时间超过 30 秒，我看到工作人员中的进程被删除（延迟作业）并引发 Timeout::Error 异常。

我想确认 heroku 中工作人员的最大执行时间。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T17:38:25.380

工作人员（或测功机）没有请求超时。用户的请求超时由路由网格处理。

# unity3d - 跟踪距离。统一2D游戏

> ID：13861598
> 
> 赞同：1
> 
> 时间：2012-12-13T14:09:57.827
> 
> 标签：unity3d, 2d, unityscript

如果我有一个在 x 轴上从 0 开始的对象，并在 x+ 轴上移动它。有没有办法可以跟踪距离并使用它来计算？

我不知道我在做什么，但在想像

```
var distance = orgpos -> currentpos;
for each x10{
score += 1;  } 
```

这个动作在移动的同时进行了现场表演。

编辑：

```
calculatedDistance += (transform.position - previousPosition).magnitude;
previousPosition = transform.position; 
```

我有这个脚本可以让我保持距离，如果那有帮助的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T16:21:02.750

在我发布问题后找到了一种方法。生病只是发布我做的方式供其他人使用。

```
//Score
static var score : int = 0; 
static var distanceScore : int = 0; 
static var starScore : int = 0;

//Adding point and removing star for each collision
function OnCollisionEnter(collision : Collision)
{
if (collision.gameObject.tag == "StarPickup")
{
    Destroy(collision.gameObject);
    starScore += 10;   
}}    

// Checking distance
var previousPosition : Vector3; 
var calculatedDistance : float;

function Awake()
{
previousPosition = transform.position;
}

function Update()
{
calculatedDistance += (transform.position - previousPosition).magnitude;
previousPosition = transform.position;
distanceScore = Mathf.Round(calculatedDistance/10);   
score = distanceScore + starScore;
print("The score is: " + score);
} 
```

# gwt - 扩展 GUI，但现在事件不再起作用

> ID：13861601
> 
> 赞同：0
> 
> 时间：2012-12-13T14:10:12.140
> 
> 标签：gwt

所以我有很多使用 UIBinder 进行布局的类。但是，这些类中的每一个都有很多附加功能，所以它开始变得有点混乱。我的想法是创建一个 GUI 类，我将在其中初始化 UiField，并让一个类扩展该类，并处理子类中的所有事件。

我的问题是，ClickHandlers 不再工作了。有谁知道为什么？

这样做也是不好的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T02:42:09.580

您可能必须实现[HasHandlers](http://google-web-toolkit.googlecode.com/svn/javadoc/1.6/com/google/gwt/event/shared/HasHandlers.html)接口并确保您的 GUI 扩展[复合](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/Composite.html)

# html - 将 CSS 属性应用于类，但前提是元素具有另一个特定类

> ID：13861602
> 
> 赞同：0
> 
> 时间：2012-12-13T14:10:14.853
> 
> 标签：html, css

我有这个html：

```
 <li class="arrow branches"></li>
 <li class="arrow branches"></li>
 <li class="arrow branches"></li>

 <li class="arrow"></li>
 <li class="arrow"></li>
 <li class="arrow"></li> 
```

我只想为“箭头分支”类提供css命令，我怎样才能给它们不会影响“箭头”类的css？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T14:11:14.373

创建类`.branches`：

```
.branches{
    color:#f00;
} 
```

如果您只想将它​​应用于那些具有分支和箭头的元素，请将它们放在一起：

```
.arrow.branches{
    color:#f00;
} 
```

但是，如果您想将其应用于多个课程，那也很容易：

```
.branches, .otherClass{
    color:#f00;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T14:11:39.057

这非常简单：

```
li.arrow.branches
{...styles...} 
```

这将选择具有类分支 AND 箭头的 LI 元素，而不是单独的箭头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:11:32.580

```
.arrow.branches { // your css } 
```

仅适用于具有这两个类的元素。

# jakarta-ee - 在单耳内与来自单例守护进程、MDB 和 Web 控制器的 EJB（和 EntityManager）交互

> ID：13861607
> 
> 赞同：0
> 
> 时间：2012-12-13T14:10:18.490
> 
> 标签：jakarta-ee, singleton, ejb, entitymanager, object-lifetime

有一个技术栈：Java EE（WebSpere）、JPA、EJB3、JMS（MDB）、JSF。

架构：JMS 消息到达（通过 MDB）并注册为持久实体 - （使用 EntityManager）。有一个具有无限循环的 Singleton 类负责处理这些实体。Singleton 由 MDB 通知有关创建的实体。最初，实体存储在 Singleton 内的队列中。创建的实体最多可以处理几分钟。不能同时处理超过一定数量的实体（Singleton 中的多个并行进程）。Singleton 不是 EJB，但它使用了 EJB 服务。有一个类表示给定实体的执行上下文（简单 DTO）。

问题是：实体的处理已启动，但 EntityManager 在某个时间点（几秒钟后）开始为搜索请求返回空值，但它不应该，因为就在一秒钟前，实体已更新。

看起来架构不太好。我怀疑 EM 的行为表明，在 MDB 和 Singleton 之间的交互完成后，持久性上下文已经消失了一段时间。单例的生命周期比系统中任何托管 bean 的生命周期长得多。因此，向此类组件注入 EJB 实例（和 EM 实例）似乎根本不是解决方案（将注入的 EJB 实例的引用从 MDB 传递到 Singleton 可能是最糟糕的决定）。

每次需要 EJB 和 EM 时，Singleton 都应该使用 JNDI 查找它们吗？在这种情况下，我是否应该为每个调用锁定 EJB？

您将采用哪种方式设计系统：如果 MDB 仅注册消息（作为实体）。实体的处理可能会稍后开始。而且您必须使用一些 EJB 服务（本地接口）。还有实体管理器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:23:53.967

如果 Singleton 使用的实体管理器是事务范围的，那么 Singleton 的生命周期无关紧要。在某种程度上，无状态会话 bean 一旦创建也有无限的生命周期（它们的范围本质上是“无”，但它们的实例被池化并不断被重用）。

每次单例中的方法为请求提供服务时，都会启动一个新事务并附带一个新的持久性上下文，即使实体管理器实例在这些请求中似乎都是相同的。这是正常行为，不应“突然”返回空值。

如果您的单例正在使用适当的锁，则可能值得检查。如果同时访问实体管理器，则这可能是未定义行为的原因。

# ios - 如何动画更改按钮标题？

> ID：13861608
> 
> 赞同：2
> 
> 时间：2012-12-13T14:10:20.607
> 
> 标签：ios, animation

我想动画更改按钮标题。例如，按钮的标题是“one”，单击该按钮后，淡出“one”，然后淡入“NewTitle”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:53:00.540

可以使用[`CATransition`](https://developer.apple.com/library/ios/#documentation/graphicsimaging/reference/CATransition_class/Introduction/Introduction.html)类进行简单的淡入淡出转换，而不是弄乱重复的视图。

```
// CATransition defaults to fade
CATransition *fade = [CATransition animation];
// fade.duration = ...
[button.layer addAnimation:fade];

[button setTitle:@"New title" forControlState:UIControlStateNormal]; 
```

该按钮将淡出到它的新状态。这适用于标签、整个视图层次结构等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:44:24.590

所以创建两个按钮不是一个好主意，所以我创建了一个简单的项目来测试你的问题的代码，这就是我想出的

视图控制器.h

```
 #import <UIKit/UIKit.h>

    @interface ViewController : UIViewController{

        IBOutlet UIButton *myButton;
    }

    @property(nonatomic,strong) IBOutlet UIButton *myButton;

    -(IBAction)animateFadeOutButtonTitle:(id)sender;
    -(void)animateFadeInButtonTitle;

    @end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize myButton=_myButton;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [_myButton setTitle:@"One" forState:UIControlStateNormal];

}

-(IBAction)animateFadeOutButtonTitle:(id)sender
{
    [UIView animateWithDuration:0.25 animations:^{_myButton.titleLabel.alpha = 0.0;}];

    [self performSelector:@selector(animateFadeInButtonTitle) withObject:self afterDelay:1.0];
}

-(void)animateFadeInButtonTitle;
{

    [_myButton setTitle:@"New Title" forState:UIControlStateNormal];
    [UIView animateWithDuration:2.0
                          delay:0.0
                        options: UIViewAnimationCurveEaseInOut
                     animations:^{_myButton.titleLabel.alpha = 1.0;}
                     completion:nil];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.

}

@end 
```

# security - 通过将复合组件放置在 /WEB-INF 中来防止直接访问它们

> ID：13861612
> 
> 赞同：3
> 
> 时间：2012-12-13T14:10:30.893
> 
> 标签：security, jsf, jsf-2, composite-component, web-inf

我正在尝试在我的 Web 应用程序中定义一些复合组件。根据我阅读的教程，我必须将 xhtml 文件放在 webcontent 中的资源文件夹中。这个解决方案是有问题的，因为它会使这些文件可用于从 url 进行公共访问。有没有办法把这些组件放在 web-inf 文件夹中，让 jsf 在那里查找文件？如果没有，是否有另一种方法可以避免直接访问？

谢谢。

PS：我已经研究了[这个答案](https://stackoverflow.com/questions/7059420/where-to-put-composition-componentsjsf-2-0)，如果我正确理解了 BalusC 的答案，我打算做的事情是可能的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T15:09:05.323

“复合组件”与您找到的问题/答案中的“组合”不完全相同。OP 显然在谈论包含内容的`<ui:include>`文件中的组合。`<ui:componsition>`

您实际上想要阻止直接访问`/resources`. 这可以通过添加以下安全约束条目来实现`web.xml`：

```
<security-constraint>
    <display-name>Restrict direct access to JSF resources</display-name>
    <web-resource-collection>
        <web-resource-name>JSF resources</web-resource-name>
        <url-pattern>/resources/*</url-pattern>
    </web-resource-collection>
    <auth-constraint /><!-- Empty auth constraint! -->
</security-constraint> 
```

根据即将发布的 JSF 2.2，这将不再是必需的，因为它允许您通过以下配置条目将整个`/resources`文件夹移动到：`/WEB-INF``web.xml`

```
<context-param>
    <param-name>javax.faces.WEBAPP_RESOURCES_DIRECTORY</param-name>
    <param-value>WEB-INF/resources</param-value> 
</context-param> 
```

# javascript - 使用 jquery addClass() 方法的 javascript 函数不添加类

> ID：13861613
> 
> 赞同：1
> 
> 时间：2012-12-13T14:10:31.703
> 
> 标签：javascript, jquery, addclass

该脚本可以正常工作，正确创建所有内容等，但是 jquery addClass 方法没有添加该类。我是在 javascript 函数中使用 jquery 方法的新手，感谢任何帮助，包括在不使用 jquery 的情况下添加适当类的替代方法。

```
function thumbnail(Img, Element, Modal, ModalTitle) {
"use strict";
/*jslint browser:true*/
/*global $, jQuery*/
//this function will append an anchor tag with the appropriate functionality, accepting inputs on the image filename, attaching element, and modal
//Img = full filename in format of foo.png
//Element = the ID of the element within which the thumbnail anchor will be placed
//Modal = the ID of the modal
//ModalTitle = Text used for title of the modal and title of the caption
var image, element, modal, loc, output, iUrl, modal_loc, modal_output, mtitle;
image = Img;
element = Element;
modal = Modal;
mtitle = ModalTitle;
iUrl = "/design-library/images/thumbs/" + image;
output = "<a href='#' data-reveal-id='" + modal + "'>";
output += "<img class='sample_img' src='" + iUrl + "' alt='" + mtitle + "' />";
output += "</a>";
output += "<p class='caption'>" + mtitle + "</p>";
modal_output = "<h1>" + mtitle + "</h1>";
modal_output += "<img src='" + iUrl + "' alt='" + image + "' /><a class='close-reveal-modal'>&#215;</a>";
//create the modal container
$(modal).addClass('reveal-modal');
modal_loc = document.getElementById(modal);
modal_loc.innerHTML = modal_output;
//the end of the script gets the element and adds the anchor tag that exists in output
$(element).addClass('samples');
loc = document.getElementById(element);
loc.innerHTML = output;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T14:13:42.547

由于`modal`和`element`是 ID，您应该更正选择器以将它们用作 ID：

```
$('#' + modal).addClass('reveal-modal');
$('#' + element).addClass('samples'); 
```

边注。使用 jQuery 找到 DOM 元素后，无需使用以下命令执行第二次搜索`getElementById`：

```
var modal_loc = $('#' + modal);
modal_loc.addClass('reveal-modal');
modal_loc.html(modal_output); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T14:13:43.577

如果`modal`是 ID 字符串，则需要执行以下操作：

```
$('#'+modal).addClass('reveal-modal'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T14:13:31.860

尝试改变：

```
$(element).addClass('samples'); 
```

至

```
$('#' + element).addClass('samples'); 
```

# c# - 围绕经纬度点画一个正方形

> ID：13861616
> 
> 赞同：4
> 
> 时间：2012-12-13T14:10:35.117
> 
> 标签：c#, geometry, polygon

我试图在地球表面上的给定点周围**画一个正方形。**

我正在使用从[这里](https://stackoverflow.com/questions/4000886/gps-coordinates-1km-square-around-a-point)和[这里](https://math.stackexchange.com/q/256931/52743)检索到的信息并最终想出了这个：-

```
 // Converting degrees to radians
        double latInDecimals = (Math.PI / 180) * latitude;
        double longInDecimals = (Math.PI / 180) * longitude;

        List<string> lstStrCoords = new List<string>();

        double changeInLat;
        double changeInLong;
        double lineOfLat;      

        // Calculating change in latitude for square of side 
        changeInLong = (side / 1000) * (360.0 / 40075);

        // Calculating length of longitude at that point of latitude
        lineOfLat = Math.Cos(longitude) * 40075;

        // Calculating change in longitude for square of side 'side'
        changeInLat = (side / 1000) * (360.0 / lineOfLat);

        // Converting changes into radians
        changeInLat = changeInLat * (Math.PI / 180);
        changeInLong = changeInLong * (Math.PI / 180);

        double nLat = changeInLat * (Math.Sqrt(2) / 2);
        double nLong = changeInLong * (Math.Sqrt(2) / 2);

        double coordLat1 = latInDecimals + nLat;
        double coordLong1 = longInDecimals + nLong;

        double coordLat2 = latInDecimals + nLat;
        double coordLong2 = longInDecimals - nLong;

        double coordLat3 = latInDecimals - nLat;
        double coordLong3 = longInDecimals - nLong;

        double coordLat4 = latInDecimals - nLat;
        double coordLong4 = longInDecimals + nLong;

        // Converting coords back to degrees

        coordLat1 = coordLat1 * (180 / Math.PI);
        coordLat2 = coordLat2 * (180 / Math.PI);
        coordLat3 = coordLat3 * (180 / Math.PI);
        coordLat4 = coordLat4 * (180 / Math.PI);

        coordLong1 = coordLong1 * (180 / Math.PI);
        coordLong2 = coordLong2 * (180 / Math.PI);
        coordLong3 = coordLong3 * (180 / Math.PI);
        coordLong4 = coordLong4 * (180 / Math.PI); 
```

现在，即使这可行，我从加入这些得到的多边形是一个矩形。

![在此处输入图像描述](../Images/9bac8182e9041cdcc2b15a3a25e324ea.png)

我对我的代码有什么问题感到困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T14:41:24.207

除非它位于赤道上，否则球体上一个纬度和经度的矩形的长度以千米为单位不同。它向两极变窄。如果你想让两边的大小相同，你必须进行修正

```
longitudinal_length = latitudinal_length / cos(latitude) 
```

因此，您需要将正方形的纵向长度除以`cos(latitude)`。

现在，您的广场可能仍然是弯曲的，但这取决于地图的投影方式，这是一个完全不同的故事。您需要知道 Google 使用的投影公式才能进行更正。

您可能会发现考虑到地球不是完美球体这一事实的更复杂的公式，但我认为这对于您的位置标记应该足够了。另请注意，您将在 +/-90 度处除以零。所以在杆子上放置一个矩形需要另一种方法。

[![在此处输入图像描述](../Images/e73e6667f3e0dc1d5c1d87b6ac0de3da.png)](https://i.stack.imgur.com/ihxvU.gif)
*来自：[IBM Knowledge Center](https://www.ibm.com/support/knowledgecenter/en/) /[地理坐标系](https://www.ibm.com/support/knowledgecenter/en/SSEPEK_10.0.0/spatl/src/tpc/spatl_csb3022a.html)/ 图 4\. 刻度上位置之间的不同维度*

# android - 将值传递给 AsyncTask

> ID：13861619
> 
> 赞同：0
> 
> 时间：2012-12-13T14:10:43.040
> 
> 标签：android, android-asynctask

我正在开发一个 android 应用程序，但我有点卡在这个问题上，并且我无法正确传递变量 AsyncTask。那是从表单的主要系列执行（值），但我不知道如何在 AsyncTask （doInBackground）中获取该值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:17:43.470

**String... urls**这是你的方法参数。

**Excute**运行 doInBackground 方法，你可以像下面这样传递它们

**新的 Conexion().Execute("tip","tip1"...)**

然后你可以在 doInBackground 中使用它

```
ArrayList<NameValuePair> categoria = new ArrayList<NameValuePair>();
    categoria.add(new BasicNameValuePair("tipo", urls[0]));
    categoria.add(new BasicNameValuePair("tipo1", urls[1]));
    .
    . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:15:58.407

创建您的 asyncTask 的构造函数并在构造函数中传递您的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:17:38.293

你为什么不创建一个新的`Object`（即`AsyncTaskParameters`）为你想要服务的所有信息提供 getter 和 setter？

你会得到类似的东西： `public class Conexion extends AsyncTask<AsyncTaskParameters, Void, JSONArray>`

# android - 寻求让 TextView 的文本以不同颜色着色的最简单方法

> ID：13861622
> 
> 赞同：0
> 
> 时间：2012-12-13T14:10:48.727
> 
> 标签：android

我想让一些由文本视图显示的字符串是红色的，还有一些是黑色的，我该怎么做？

有没有办法简单地在 XML 文件中提及它？（字符串.xml）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:17:58.487

我认为您可以使用跨度。[文字样式](http://developer.android.com/reference/android/text/style/package-summary.html)

例如，

```
 final SpannableStringBuilder sb = new SpannableStringBuilder(" text must be here ");
   final ForegroundColorSpan fc1 = new ForegroundColorSpan(Color.rgb(255, 0, 0)); 
   final ForegroundColorSpan fc2 = new ForegroundColorSpan(Color.rgb(255, 255, 255)); 
   sb.setSpan(fc1 , 0, 4, Spannable.SPAN_INCLUSIVE_INCLUSIVE); 
   sb.setSpan(fc2, 5, 8, Spannable.SPAN_INCLUSIVE_INCLUSIVE); 
   yourTextView.setText(sb); 
```

（或者）

在样式 XML 中，声明颜色值，如下所示

```
<color name="redColor">#ff0000</color> 
```

并在布局 xml 中使用它，作为 textColor 属性，

```
android:textColor="@color/redColor" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:14:14.887

你可以试试这个

```
String.replaceAll(textToHighlight,<font color="red">textToHighlight</font>);

Textview.setText(Html.fromHtml(String)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:25:47.163

我相信这样做的唯一方法是使用如下跨越的类型。

```
TextView textview = (TextView)findViewById(R.id.myTextview);
String firstName = "FirstName";
String lastName = "LastName";
Spanned details = Html.fromHtml(firstName + "<br />" + "<small><font color=\"#767676\">" + lastName + "</b></small>");
textview.setText(details); 
```

希望这可以帮助

# php - 在组件中使用模型

> ID：13861623
> 
> 赞同：22
> 
> 时间：2012-12-13T14:10:49.980
> 
> 标签：php, cakephp

如何在 CakePHP 的组件中使用模型？

在控制器中，您可以使用

```
public $uses = array(...); 
```

但这在组件中不起作用。

有什么作用？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-13T14:13:44.997

试试这个代码：

```
$model = ClassRegistry::init('Yourmodel'); 
```

将您的模型简单查询到您的组件中

```
$result= $model->find('all'); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-13T14:13:57.703

你可以这样做：

```
$this->ModelName = ClassRegistry::init('ModelName'); 
```

但假设您不在组件内部使用模型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-11T18:27:51.753

如果您需要当前模型，您可以使用组件的[initialize()](http://book.cakephp.org/2.0/en/controllers/components.html#Component::initialize)或[startup()](http://book.cakephp.org/2.0/en/controllers/components.html#Component::startup)回调。

```
public function initialize(Controller $controller) {
    $this->Controller = $controller;
    $this->Model = $this->Controller->{$this->Controller->modelClass};
    $this->modelAlias = $this->Model->alias;
    parent::initialize($controller);
} 
```

现在您可以在组件中的任何位置访问模型。

```
public function countAllItems() {
    return $this->Model->find('count');
} 
```

# android - In-App Billing v3 - 不检测退款

> ID：13861625
> 
> 赞同：34
> 
> 时间：2012-12-13T14:10:56.733
> 
> 标签：android, in-app-billing, google-checkout

我参加了 Google 的“In-App Billing v3”培训。我要买一件东西，但我有问题。

[https://developer.android.com/training/in-app-billing/index.html](https://developer.android.com/training/in-app-billing/index.html)

我已经取消并退款了购买，但应用程序检测到购买是真实的。我无法继续测试我的应用程序，因为我总是检测到该商品是购买的。

我在 logCat 中发现的唯一错误是下一个：

[3687] InAppBillingService.logResponseBundle：捆绑包不包含响应代码

在启动 mHelper.queryInventoryAsync(mGotInventoryListener) 后出现。

任何想法？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-16T20:32:43.157

ps - 这表明更新退款需要时间

[http://code.google.com/p/marketbilling/issues/detail?id=88#makechanges](http://code.google.com/p/marketbilling/issues/detail?id=88#makechanges)

但我不相信 - 我意识到他们正在设备上缓存购买数据，但 24 小时是很长的时间......

更新后添加了在我取消“测试”交易超过 24 小时后，这些帐户仍然获得许可！！

再次更新 - 36 小时后，该应用仍获得许可。我卸载并重新安装它仍然是许可的！

再次更新！- 我将设备恢复出厂设置，登录，安装了应用程序，但它是未经许可的......

还有另一个更新——谷歌的回复表明退款是“自动”处理的，但可能需要“长达 72 小时”才能在设备上刷新——没有其他途径可以检测到退款，因此玩家最多可以得到 3 天的退款。”免费”如果他们退款 - 呃，好吧，这是应用内购买，而不是应用内购买，但仍然，这似乎有点过分？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-27T02:40:03.313

在等待了大约 12 个小时并尝试了这里和类似线程上建议的所有内容后，我仍然面临同样的问题。对我来说诀窍是以下 adb 命令：

adb shell pm clear com.android.vending

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-12T20:51:06.380

您可以通过消费该项目轻松否定购买以进行测试。

使用 Trivial Drive 示例，我在 MainActivity.java 中添加了以下代码，这将在应用程序启动时“消耗”高级升级：

```
 // Do we have the premium upgrade?
        Purchase premiumPurchase = inventory.getPurchase(SKU_PREMIUM);
        mIsPremium = (premiumPurchase != null && verifyDeveloperPayload(premiumPurchase));
        Log.d(TAG, "User is " + (mIsPremium ? "PREMIUM" : "NOT PREMIUM"));

        // dss added for test: Consume the premium upgrade for test purposes.
        boolean testConsume = true;
        if (mIsPremium && testConsume) {
            Log.d(TAG, "NOT FOR PRODUCTION: We have a premium upgrade. Consuming it.");
            mHelper.consumeAsync(inventory.getPurchase(SKU_PREMIUM), mConsumeFinishedListener);
            mIsPremium = false;
        } //dss end add 
```

作为奖励，当您消费升级时，您将获得免费的四分之一油箱，因为样本将所有消费视为其他地方的汽油。在 MainActivity 中搜索“Provisioning”以查找位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T19:22:28.933

我解决它的方法是使用忽略我所做的特定购买的代码块。我在打印出购买信息的代码中有一个日志语句，然后我在我的 purchaseTimes 应用程序中硬编码一个列表以忽略。这是一团糟，每次我想测试时都必须重新编译，但我还没有找到更好的方法。

# windows-phone-7 - 如何在 WP7 中集成 Shoutcast MediaStreamSource？

> ID：13861628
> 
> 赞同：2
> 
> 时间：2012-12-13T14:11:00.350
> 
> 标签：windows-phone-7, shoutcast

我从**[http://shoutcastmss.codeplex.com/](http://shoutcastmss.codeplex.com/)**下载了**“Shoutcast MediaStreamSource”** ，并使用 Icecast 流运行示例项目。它工作得很好。我只是不知道如何将它与我的 Windows Phone 项目集成。我应该从 bin 文件夹或项目中添加 dll 文件作为参考吗？

我都试过了，但它给出了错误。另外，如何将 URL 传递给音频播放代理。

# c++ - 为什么是 numeric_limits ::max() > numeric_limits ：：无穷（）？

> ID：13861629
> 
> 赞同：28
> 
> 时间：2012-12-13T14:11:04.577
> 
> 标签：c++, integer, numeric, limits, integral

我正在阅读[Setting an int to Infinity in C++](https://stackoverflow.com/questions/8690567/setting-an-int-to-infinity-in-c)。我知道当一个人需要真正的无限时，一个人应该使用`numeric_limits<float>::infinity()`; 我猜它背后的基本原理是，通常整数类型没有指定用于表示特殊状态的值，如*NaN*、*Inf*等，就像 IEEE 754 浮点数一样（同样，C++ 也没有强制要求 - `int`& `float`used 留给实现）；`max > infinity`但对于给定的类型，它仍然具有误导性。我试图理解标准中这个调用背后的基本原理。如果`infinity`对类型没有意义，那么不应该禁止它而不是检查其有效性的标志吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-13T14:16:57.420

该函数对那些 返回 `numeric_limits<T>::infinity()`的人有意义。`T``numeric_limits<T>::has_infinity``true`

如果是`T=int`，则返回`false`。所以这种比较没有意义，因为`numeric_limits<int>::infinity()`没有返回任何*有意义的*值来比较。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-13T14:17:23.053

如果您阅读例如[this reference](http://en.cppreference.com/w/cpp/types/numeric_limits/infinity)，您将看到一个表格，其中显示整数类型的无穷大为零。这是因为根据定义，C++ 中的整数类型不能是无限的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-13T14:41:50.870

相反，假设该标准*确实*保留了一些值来表示无限性，那么`numeric_limits<int>::infinity() > numeric_limits<int>::max()`. 这意味着会有某个值`int`大于`max()`，即 的某个可表示值`int`大于 int 的最大可表示值。

显然，无论标准指定何种方式，都违反了一些自然的理解。要么`inifinity() <= max()`，要么存在 x 使得`int(x) > max()`。标准必须选择要违反的自然规则。

我相信他们的选择是明智的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T14:19:17.380

`numeric_limits<int>::infinity()`如果可用，则返回正无穷大的表示。

对于整数，不存在正无穷大：

```
cout << "int has infinity: " << numeric_limits<int>::has_infinity << endl; 
```

印刷

```
int has infinity: false 
```

# git - 具有多个网站的 git 结构

> ID：13861630
> 
> 赞同：13
> 
> 时间：2012-12-13T14:11:06.790
> 
> 标签：git

我有一个网站，我保存在 git 中。这是一个 asp.net webforms 网站（但这对于这个问题可能并不重要）。

该网站被我们的客户用于 2 个（未来为 4 个）网站。大多数功能是共享的。但是像 web.config 和带有 css 的文件夹之类的一些东西对于每个网站都是独一无二的。

这是代码的简化版本

```
|--后台
| \--用户界面
|--BackOffice.UI
| \--Web 控件
|--BackOfficeTests
|--部署
| \ - D b
|--业务逻辑层
| |--斌
| |--对象
| \ - 特性
|--脚本
|--网站
| |--管理员
| |--App_Browsers
| |--应用程序代码
| |--应用数据
| |--款式
| |--web.config

```

在 Git 中有什么好的结构呢？

例如，BackOffice 代码将完全共享。除 Styles 文件夹和 web.config 文件外，网站将被共享。

对于不会使合并和分支过长的结构，您有什么好的建议吗？

我试图制作这样的结构：

```
掌握
|--Site1
|--Site2

```

但是我预见到在将代码从一个分支移动到另一个分支时会出现太多的挑剔子模块会好吗还是会使事情复杂化？

编辑：我真正的大问题是我想直接从我的 git repo 部署。如果我留在这些目录/文件中，它们将在合并期间合并，除非我做一些复杂的事情（那么我不能让团队中的每个人都这样做）。或者我将不得不忽略这些文件并从其他地方获取它们......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-24T03:30:57.647

假设您的主分支包含您的整个项目：

```
|--BackOffice
|  \--UI
|--BackOffice.UI
|  \--WebControls
|--BackOfficeTests
|--Deployment
|  \--db
|--BusinessLogicLayer
|  |--bin
|  |--obj
|  \--Properties
|--scripts
|--Website
|  |--admin
|  |--App_Browsers
|  |--App_Code
|  |--App_Data
|  |--Styles
|  |--web.config 
```

现在，所有网站共有的任何更改都将提交给该分支。

为不同的站点建立单独的分支。例子：

从主分支，

```
git checkout -b site1
git checkout -b site2
git checkout -b site3
git checkout -b site4 
```

现在，只要您想更改任何特定于站点的文件，即 Styles 文件夹或 web.config，请在这些分支中进行。

现在是部署部分。假设您要部署site1，在本地系统上基于master创建一个临时分支，将site1分支合并到其中并部署它。最后删除临时分支。

```
git checkout -b temp
git merge site1 
```

tar 或 zip 您的代码并部署它。在那之后，

```
git checkout master
git branch -D temp 
```

如果您不想公开部署的完成方式，您甚至可以制作一个小的 shell 脚本来执行此操作。让我们将此脚本称为**deploy.sh**例如：

```
#!/bin/bash

if [ ! $1 ]; then
        echo "Please pass in the name of the site you want to deploy."
        exit 1
fi

#Check if we are on master branch
git status | grep "On branch master"
if [ $? -ne 0 ]; then
        echo "You are not on master. Please execute 'git checkout master'"
        exit 1
fi

#Check if the entered site for deployment actually exists
git branch | grep $1 || { echo "No branch $1 exists for deployment."; exit 1; }

#Update from remote
git checkout -b temp
git merge $1
tar -cvf deploy-$1.tar ./deploy.sh *
[ $? -ne 0 ] && echo "Some problem archiving the files..." && exit 1
git checkout master
git branch -D temp

echo "Please use deploy-$1.tar file to deploy the site. Thanks."

exit 0 
```

现在，当您说 ./deploy.sh site2 时，该脚本将在幕后完成所有脏活，并为您提供一个 tar 文件，您可以将其部署在生产服务器上。

我希望这是有帮助的...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-13T14:36:36.163

子[模块](http://git-scm.com/book/en/Git-Tools-Submodules)是共享 BackOffice 代码的一个很好的解决方案，每个站点都充当父存储库。

但这并没有解决配置文件。

对于那些，一种可能性是[**内容过滤器**](https://stackoverflow.com/a/6236130/6309)，但这将涉及为不同的客户端存储和推送变量的值。

最好将这些配置文件保存在特定于客户端的分支中的父 repo 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T16:08:07.197

我可能会创建单独的“Site”和“Common”目录，其中“Common”在战略点包含符号链接以及一个或两个子模块，如下所示：

```
 Project
 |==.git
 |--Site
 |  |--.git
 |  \--Website
 |     |--Styles
 |     \--web.config
 \--Common
    |--.git
    |--BackOffice
    |  \--UI
    |--BackOffice.UI
    |  \--WebControls
    |--BackOfficeTests
    |--Deployment
    |  \--db
    |--BusinessLogicLayer
    |  |--bin
    |  |--obj
    |  \--Properties
    |--scripts
    \--Website
       |--admin
       |--App_Browsers
       |--App_Code
       |--App_Data
       |--Styles -> ../../Site/Website/Styles
       \--web.config -> ../../Site/Website/web.config 
```

这不是唯一可以服务的布局 - 例如，如果应该很容易让不同的站点选择并选择调整的内容，您可以保留当前布局，添加“通用”子项目并符号链接您使用的任何内容不变，像这样：

```
 Site
 |==.git
 |--BackOffice -> Common/BackOffice
 |--BackOffice.UI -> Common/BackOffice.UI
 |--BackOfficeTests -> Common/BackOfficeTests
 |  [...]
 |--Website
 |  |--admin -> ../Common/Website/admin
 |  |--App_Browsers -> ../Common/Website/App_Browsers
 |  [...]
 |  |--Styles
 |  \--web.config
 \--Common
    |--.git
    |--BackOffice
    |  \--UI
    |--BackOffice.UI
    |  \--WebControls
    |--BackOfficeTests
    |--Deployment
    |  \--db
    |--BusinessLogicLayer
    |  |--bin
    |  |--obj
    |  \--Properties
    |--scripts
    \--Website
       |--admin
       |--App_Browsers
       |--App_Code
       |--App_Data
       |--Styles.example
       \--web.config.example 
```

我越看越喜欢最后一张。

# javascript - 如何将可点击的链接/对话框添加到 Backbone.js JST EJS 文件

> ID：13861638
> 
> 赞同：1
> 
> 时间：2012-12-13T14:11:51.817
> 
> 标签：javascript, backbone.js

我需要在 Backbone.js 模板文件中创建一个模式对话框（只需单击确定）。它在这样的循环中，在 show_template.jst.ejs 中：

```
<% for(var i = 0... all words %>
<% var word = get the ith word %>
<td><span class="synonyms"><%= I18n.t("Synonyms") %></span></td> 
```

我希望用户能够单击“同义词”（以她选择的语言）并弹出一个模式对话框，并以她的语言显示数据库中的同义词。总而言之，我希望同义词是可点击的。

有人能指出我正确的方向吗？（我是 Javascript/Backbone.js 菜鸟）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T09:54:23.830

基本上我看到了两个选项可以让同义词可点击并知道哪个被点击了

**一个视图选项**- 将您的数据放在 dom 上并在单击操作时读取它：（**注意 data-kind 属性**）

```
<% for(var i = 0... all words %>
<% var word = get the ith word %>
<td>
    <span class="synonyms" data-kind='<%= I18n.t("Synonyms") %>' >
        <%= I18n.t("Synonyms") %>
    </span>
</td> 
```

视图的事件部分将如下所示

```
events: {
   "click .synonums" : "synonyms_event"
},

synonyms_event: function(e) {
    var kind =  $(e.target).data("kind");
    alert(kind + " was pressed");
} 
```

另一种选择是**为每个单词创建视图**并让它处理点击事件

# smartgwt - 如何在 SmartGwt 中的 ListGrid 之间移动拖放

> ID：13861643
> 
> 赞同：2
> 
> 时间：2012-12-13T14:12:08.297
> 
> 标签：smartgwt, listgrid

我正在编写 SmartGWT 应用程序，里面有两个列表网格和一些记录。我已将 setDragDataAction 设置为 MOVE。但是出现了问题，当我拖放记录时，它们总是复制而不是移动，但是如果我使用 transferSelectedData 方法就可以了。当我拖放到同一个 ListGrid 中时，出现同样的问题，记录被复制，而不是移动。

有没有办法将拖放操作设置为移动，而不是复制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-29T13:34:32.070

我遇到了同样的问题，经过一些测试，得出的结论是：**只要有数据绑定的记录列表，setDragDataAction(DragDataAction.MOVE) 就不起作用**。如果它不是数据绑定的，它可以工作。任何解决方法的建议？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:01:03.387

方法 setDragDataAction(DragDataAction.MOVE) 将为您解决问题。

# objective-c - 应用内购买 - 恢复购买

> ID：13861645
> 
> 赞同：0
> 
> 时间：2012-12-13T14:12:15.433
> 
> 标签：objective-c, xcode, macos, in-app-purchase, mac-app-store

我在提交设置了应用内购买的 macOS 应用程序时遇到了一些问题，他们拒绝了我的应用程序，因为我没有恢复购买按钮。

我需要一个关于在哪里放置该按钮的建议。我在想的是，我应该在重新安装应用程序时添加该功能，并在应用程序名称所在的菜单栏中（退出应用程序所在的位置）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:55:45.703

有一部关于在何处以及如何放置恢复按钮的精彩电影。这是由 Apple 为 WWDC 制作的，因此很清楚他们想要什么。这适用于 iOS，但想法是一样的。

[https://developer.apple.com/videos/ios/?id=3](https://developer.apple.com/videos/ios/?id=3) <- 给你。移动到**27:30**

# java - 从 Java 中的 RTMP 流中获取 AudioInputStream？或者如何混合多个 RTMP 流的音频

> ID：13861646
> 
> 赞同：3
> 
> 时间：2012-12-13T14:12:15.713
> 
> 标签：java, audio, stream, rtmp, javasound

我需要混合来自多个 RTMP 流的音频流。我想使用 Java Sound API，因为它适用于混音（如上一个问题[Combining multiple sound streams in Java](https://stackoverflow.com/questions/3373628/combining-multiple-sound-streams-in-java?answertab=active#tab-top)中所讨论的） - 我已经成功地尝试了它的文件。

我很确定 AudioInputStream 应该能够进行实时流，如本常见问题解答中所示：http: [//www.jsresources.org/faq_audio.html#ais_length_unknown](http://www.jsresources.org/faq_audio.html#ais_length_unknown)

我不知道如何获取 RTMP 流的音频部分并从中获取 AudioInputStream。是否有任何（RTMP）库可以做到这一点，或者我可以为此目的进行扩展？

关于如何混合 rtmp 流的音频还有其他建议吗？

提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-19T07:30:07.113

ffmpeg library may help you. look in to [http://ffmpeg.org](http://ffmpeg.org). It supports rtmp protocol and also can extract/merge audio streams. You may only need to invoke ffmpeg from your java code.

# javascript - D3强制布局中的对象自动缩放

> ID：13861657
> 
> 赞同：3
> 
> 时间：2012-12-13T14:12:52.680
> 
> 标签：javascript, d3.js, zooming, selection, force-layout

我有一个力导向图，我实现了一个自动完成功能以突出显示一个节点。基本上，一旦你选择了一个节点，它就会变成红色。我现在想在这个节点上“缩放”，这就是将我的窗口更改为节点大小的 400%，并且节点应该居中。

以下是我的代码的相关示例：（或者您可以直接转到我设置的[jsFiddle](http://jsfiddle.net/wRXsK/2/)。）

首先是用于创建`svg`元素的代码：

```
var w = 4000,
    h = 3000;
var vis = d3.select("#mysvg")
    .append("svg:svg")
    .attr("width", "100%")
    .attr("height", "100%")
    .attr("id","svg")
    .attr("pointer-events", "all")
    .attr("viewBox","0 0 "+w+" "+h)
    .attr("perserveAspectRatio","xMinYMid")
    .append('svg:g')
    .call(d3.behavior.zoom().on("zoom", redraw))
    .append('svg:g'); 
```

然后，作为示例，该函数用于在“正常”缩放时重绘有向图。

```
function redraw() {
    trans=d3.event.translate;
    scale=d3.event.scale;
    vis.attr("transform",
        "translate(" + trans + ")"
            + " scale(" + scale + ")");
} 
```

这是我的图表的节点：

```
vis.selectAll("g.node")
    .data(nodes, function(d) {return d.id;})
    .enter().append("g")
    .append("circle")
        .attr("id", function(d){return "circle-node-"+ d.id})
        .attr("fill","white")
        .attr("r","50px")
        .attr("stroke", "black")
        .attr("stroke-width","2px"); 
```

最后是我的自动完成。

```
$(function() {
    $( "#tags" ).autocomplete({
        source: nodes; //...
        select: function( event, ui){
            // ...
            vis.selectAll("#circle-node-"+ui.item.value)
                .transition()
                .attr("fill", "red")
        }

    })
}); 
```

我试图尽可能少地输入代码，如果我忘记了什么，对不起。

**Update** Here is a [jsFiddle](http://jsfiddle.net/wRXsK/2/) illustrating where I am for now.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T16:17:42.457

The scaling and translation should be handled in the same function where you color the node red. You haven't really described how exactly you want the zoom to behave, but probably the easiest way is to apply `translate` and `scale` to the `g` element containing the graph.

I've changed your jsfiddle to do this; result [here](http://jsfiddle.net/wRXsK/10/). I've assumed that by "400% the size of the node" you mean that the node should be magnified 400%? I've introduced a variable for the zoom factor if you want to change it.

# iphone - 是否可以搜索所有 xcodes 日志

> ID：13861658
> 
> 赞同：14
> 
> 时间：2012-12-13T14:13:00.723
> 
> 标签：iphone, ios, xcode

XCode 现在可以方便地保存以前运行的日志，这很棒。

![在此处输入图像描述](../Images/c04f8f81603711c98b0985b81a708c53.png)

有没有办法搜索所有日志。

我的用例是我看到了一个特定的错误，但不记得它在哪个运行中。我需要从日志中找到错误 URL。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-13T15:38:43.763

Xcode 将调试日志存储在

```
~/Library/Developer/Xcode/DerivedData/<YOURAPP>/Logs/Debug/ 
```

这些`.xcactivitylog`文件实际上只是`gz`档案。解压它们：

```
cd ~/Library/Developer/Xcode/DerivedData/<YOURAPP>/Logs/Debug/
EXT=".xcactivitylog"
for LOG in *.xcactivitylog; do
    NAME=`basename $LOG $EXT`
    gunzip -c -S $EXT "${NAME}${EXT}" > "${NAME}.log"
done 
```

`grep`现在，您可以使用或`Spotlight`或您喜欢的内容轻松搜索它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T17:56:46.277

添加到@DrummerB 答案。解压缩文件后，您可以在 XCode 中使用自定义范围进行搜索。我更喜欢这个而不是 grep 或聚光灯。

![在此处输入图像描述](../Images/4d88829904c712239fef2954e00a9398.png)

![在此处输入图像描述](../Images/2003419780a0c52cb064a4e6bb201407.png)

![在此处输入图像描述](../Images/0500aa333b37a0128b0a04efc12bf1f3.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T14:59:11.973

这些日志所在的文件夹是

```
~/Library/Developer/Xcode/DerivedData/[YOURAPPID]/Logs/Debug/ 
```

[例如，您可以在TextWrangler](http://www.barebones.com/products/textwrangler/)中打开/阅读/搜索它们。

# javascript - javascript数组中xml的子元素

> ID：13861668
> 
> 赞同：-1
> 
> 时间：2012-12-13T14:13:23.783
> 
> 标签：javascript, jquery, xml, arrays

我有一个关于将 xml 子文件放入 javascript 数组的问题。我有以下 xml 文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
<questionaire>
    <title>Festival enquete</title>
    <author>Lars Groot </author>
        <description>Demografische vragen</description>
        <question id="0">
            <subject>demografie</subject>
            <note>Deze vraag is eigenlijk bedoeld om mensen op het verkeerde been te zetten</note>
            <text>Wat is uw leeftijd?</text>
            <answertype>meerkeuze</answertype>
            <answers>
             <q>100</q>
             <q>200</q>
             <q>300</q>
            </answers>  
        </question>
        <question id="1">
                <text>Waar komt u vandaan</text>
                <answertype>openbox</answertype>
        </question>
        <question id="2">
                <text>Wat is uw geslacht</text>
                <answertype>meerkeuze</answertype>
                    <answers>
                        <q>Vrouwtje<q>
                        <q>Mannetje<q>
                    </answers>
        </question>
                <question id="3">
                <text>Waarom stel ik deze vraag</text>
                <answertype>meerkeuze</answertype>
        </question>
</questionaire> 
```

我想在 javascript 数组中推送由 q 标记的答案。我已经使用下一个代码来获取孩子：

```
function vraag(){
    string = "questions.xml";
        $.get(string,{},function(xml){
        $('question',xml).each(function(){
    question = $(this).find("text").text();
    id = $(this).attr('id');
    subject = $(this).find("subject").text();
    answertype = $(this).find("answertype").text();
    answer = $(this).children("answers").text(); 
```

现在我想把答案放在一个 javascript 数组中。所以 q 100 是 answer[0]，q 200 是 answer[1] 并且 q 300 是 answer[2]

我的问题是如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:07:27.620

谢谢你的答案。我已经这样做了：

```
var vragenArray = []        

$(this).find("q").each(function() {
                vragenArray.push($(this).text())

    }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:22:40.690

我猜一个数组将是开始的地方？

```
function vraag() {
    var string = "questions.xml";
    $.get(string, {}, function(xml) {
        $('question', xml).each(function() {
            var question = $(this).find("text").text(),
                id = $(this).attr('id'),
                subject = $(this).find("subject").text(),
                answertype = $(this).find("answertype").text(),
                answers = [];

            $(this).children("answers").each(function(i, ele) {
                answers[i] = $(ele).text();
            });
        });
    });
}​ 
```

# ios - CGPDFObject 获取 ID

> ID：13861672
> 
> 赞同：5
> 
> 时间：2012-12-13T14:13:35.643
> 
> 标签：ios, pdf, cgpdf

如何获取 CGPDFObject 的 ID？

我的 PDF 中有这本字典：

```
3 0 obj
<< /Type /Pages /MediaBox [0 0 612 792] /Count 5 /Kids [ 2 0 R 9 0 R 15 0 R
21 0 R 27 0 R ] >>
endobj 
```

我使用以下方法获得：

```
CGPDFDictionaryRef pdfPagesObjectRef;
CGPDFDictionaryGetDictionary(pdfCatalogueRef, "Pages", &pdfPagesObjectRef); 
```

现在我知道`CGPDFDictionaryApplyFunction`要在字典中获取键/值对。但是我怎样才能得到自己的对象 ID 和代号呢？（在本例中为 3 和 0）。

编辑：为什么我需要这些信息？我正在尝试向文件添加文本注释。据我了解，在 iOS 中没有“高级”方法可以做到这一点。您必须手动添加一个新部分（外部参照表、覆盖的对象、预告片等）。因此，不可避免地要获取我想要覆盖的对象的 ID 和代号，以及那些在我覆盖的对象中引用的对象（例如，/Resources、/Contents 在被覆盖的页面中）。

# jquery - IE9 正在克隆文本区域

> ID：13861675
> 
> 赞同：0
> 
> 时间：2012-12-13T14:13:42.760
> 
> 标签：jquery, internet-explorer, internet-explorer-9, textarea

我注意到一些奇怪的 IE9 行为。对于页面上的每个现有文本区域，它都会创建没有 id 但名称设置为“defaultvalue-clone-*”的克隆版本。由于这种行为，我无法在 textarea 上正确应用 tinyMCE，因为我只看到克隆的 textarea。这种行为可以被覆盖吗？或者也许一些图书馆克隆了我这个对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:50:40.990

这是[DefaultValue](http://unwrongest.com/projects/defaultvalue/)插件的工作方式 - 它克隆输入字段作为`placeholder`不完全支持 HTML5 的浏览器中属性的后备。

[我可以在他们的演示页面](http://unwrongest.com/projects/defaultvalue/)上看到同样的事情。

您是否在您的网站上使用此插件或类似插件？要禁用 DefaultValue，要么完全删除它，要么寻找这样的行：`$(' [placeholder] ').defaultValue();`然后删除它。

# c# - 多个 AppDomain 的 - 什么域“AppDomain.CurrentDomain”返回？

> ID：13861680
> 
> 赞同：1
> 
> 时间：2012-12-13T14:13:51.787
> 
> 标签：c#, multithreading, process, assemblies, .net-assembly

如果我们调用`AppDomain.CurrentDomain`加载到不同域中的内部代码，我们会得到什么域引用？加载当前代码的主域引用或域引用？

假设，我们在域中加载程序集，并且我们需要在事件中探测程序集`AssemblyResolve`：我们可以使用`AppDomain.CurrentDomain`获取当前域引用，或者我们需要创建一种将域引用传递给它的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T16:11:25.950

AppDomain.CurrentDomain 返回运行代码的域。是的，在 AssemblyResolve 事件处理程序中使用它始终是安全且正确的。该事件特定于每个 AppDomain，并且当 AppDomain 需要一个它无法找到自己的程序集时将被触发。

事件处理程序的`e`参数是 ResolveEventArgs 类型。它只告诉你程序集的名称，而不是需要它的 AppDomain。假设您已经知道。如果您忘记了，请使用 CurrentDomain。

支持使用 AppDomainSetup，因此您不需要此事件处理程序。

# iphone - Xcode 包括流氓文件

> ID：13861683
> 
> 赞同：1
> 
> 时间：2012-12-13T14:14:03.063
> 
> 标签：iphone, objective-c, xcode, sqlite

我目前正在制作一个应用程序，但在从 sqlite 数据库中选择数据时遇到问题。虽然这是目前的一个问题，但我正在询问其他事情。

在调查为什么我无法选择数据时，我正在查看应用程序的 iphone 上的文件，以确保数据库文件确实存在，但是我发现另一个 sqlite 文件也存在。

我认出了文件的名称，因为它是我在另一个项目中创建的文件。

我试图搜索文件名以确保我没有复制导致它的代码，并且我根本无法在我的代码中找到该文件名。

有谁知道为什么这个文件可能出现在这个项目中？

- - - 更新 - - -

自从最初发布此内容以来，我提出了一些想法。iCloud 最初是打开的。我已将其关闭。我最初复制并粘贴了引用其他数据库的代码。我试图删除该文件，但失败了。我还从 iPhone 中删除了该应用程序，发现该应用程序的文件夹仍然存在，但声称它是空的并且其中包含 0 个字节（流氓数据库为 116 KB）。我认为这可能与 iCloud 问题有关。我将恢复内容和设置作为测试。

- - - 更新 - - -

重置内容和设置后，文件仍然返回，因此不确定目前发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:43:03.970

转到 Target 的 Build Phase 选项卡并查看 Copy Bundle Resources 部分。最有可能的是，另一个 sqlite 文件在那里并作为包的一部分分发/安装。

# contiki - 用于 Sky/Telos 的 Contiki-OS 传输图像 (25 KB)

> ID：13861684
> 
> 赞同：1
> 
> 时间：2012-12-13T14:14:03.273
> 
> 标签：contiki

我在我的一个项目中使用 Sky/Telos 和 Contiki-OS 来传输图像。我正在尝试从节点（与 PC 连接）广播图像，以便其他节点（与 PC 连接）能够捕获图像并重建它。

任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:44:57.873

您可以尝试 CoAP 块传输。试一试`examples/er-rest-example`；专门研究“块”资源。

# sql - SQL 数据库到大

> ID：13861693
> 
> 赞同：0
> 
> 时间：2012-12-13T14:14:21.800
> 
> 标签：sql, database, cut

我有一个关于 SQL 2005 Database 的问题`.mdf`。我有一个数据库，它超过 290 GB。我需要剪切这个数据库，但我不知道怎么做。例如，按日期剪切，在 2011-12-31 或更早的单独部分中脱机

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:21:06.537

您确定 290G 不是需要备份或截断的大型事务文件吗？

如何选择修剪此数据库完全取决于您。如果合适的话，您可以将其作为表格中的日期列。这实际上取决于存储在表中的数据类型。

# excel - Excel 从两列创建超链接数据

> ID：13861694
> 
> 赞同：0
> 
> 时间：2012-12-13T14:14:32.347
> 
> 标签：excel, vba

在 Excel 中，我有两列说 ID 和 Link 都是文本，我使用了下面的宏。

```
Sub HyperAdd()

    'Converts each text hyperlink selected into a working hyperlink

    For Each xCell In Selection
        ActiveSheet.Hyperlinks.Add Anchor:=xCell, Address:=xCell.Formula
    Next xCell

End Sub 
```

但是上面的宏使当前选择单元格的地址与其单元格值相同。

那么如何在“ID”列中获取链接，其中包含来自“链接”列的超链接地址详细信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:23:30.467

我想这是你想要的...

假设该`link`列是`ID`... 右侧的 1 个单元格

`ActiveSheet.Hyperlinks.Add Anchor:=xCell, Address:=xCell.Offset(,1)`

您可以根据需要调整偏移量，以了解您距离的列数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-10T17:22:46.883

A 列 - B 列 - C 列

ABCCompany - 威廉史密斯 - wsmith@abcco.com

=HYPERLINK(C2, B2) William Smith 将是一个超链接，链接为 wsmith@....

看看这个链接。容易得多。 [https://www.ablebits.com/office-addins-blog/2017/03/23/excel-hyperlink-function/](https://www.ablebits.com/office-addins-blog/2017/03/23/excel-hyperlink-function/)

# jquery - jQuery 文件下载永远挂起

> ID：13861699
> 
> 赞同：0
> 
> 时间：2012-12-13T14:14:43.633
> 
> 标签：jquery, download

这是我的 HTML 的一部分：

```
<input type="button" onclick="downloadFile()" value="Download">
<a href="http://i.imgur.com/CqIpg.jpg" id="fileLink">Link to file</a> 
```

这是下载文件代码：

```
function downloadFile(){
 $.fileDownload($('#fileLink').attr('href'), {
   preparingMessageHtml: "We are preparing your report, please wait...",
   failMessageHtml: "There was a problem generating your report, please try again."
 });
 return false;
} 
```

我正在使用 jQuery 的[fileDownload 插件](https://github.com/johnculviner/jquery.fileDownload)。当我点击按钮时，“我们正在准备您的报告，请稍候...”通知弹出。但它永远保持这种状态，并且文件不会下载。

为确保链接有效，我单击链接并在浏览器中打开文件。有什么我忘记注意的地方吗？

这是[它的JSFiddle](http://jsfiddle.net/MikeJM/zvxyv/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-24T13:59:56.117

尝试对您的演示进行此更新：http: [//jsfiddle.net/revive/zvxyv/14/](http://jsfiddle.net/revive/zvxyv/14/)

我已经更新了您的代码以包含点击功能并通过 jsfiddle 加载 JS 资产，加载到 Dom Ready

```
$(function() {
    $(document).on("click", ".button", function() {
        var href = $(this).next('a').prop('href');
        // alert to verify/check href value
        //alert(href);
        $.fileDownload(href, {
            preparingMessageHtml: "We are preparing your report, please wait...",
            failMessageHtml: "There was a problem generating your report, please try again."
        });
        return false;
    });
}); 
```

它现在可以工作了.. 显然您使用的 img URL 阻止了跨域 cookie，或者？

祝你好运

# c# - 如何从字符串变量创建 const 字符串

> ID：13861704
> 
> 赞同：5
> 
> 时间：2012-12-13T14:15:00.693
> 
> 标签：c#, string, constants

我想从另一个字符串变量创建 const 字符串。例如接下来的两个代码片段无法编译

1)

```
string str = "111";
const string str2 = str; 
```

2)

```
string str = "111";
const string str2 = new string(str.ToCharArray()); 
```

这导致

```
Error: The expression being assigned to 'str2' must be constant 
```

有没有办法从字符串变量创建一个 const 字符串？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T14:16:41.207

简而言之 - 不。

分配给 a 的值`const`必须是编译时间常数。

您可以使用`readonly`而不是`const`，这将让您更改变量的值 - 您将只能更改构造函数中的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T14:17:58.310

使用*只读*关键字。

```
string str = "111";
readonly string str2 = str.ToCharArray(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T14:18:50.880

常量是在编译时评估的，所以你想要的是不可能的。但是，您可以用 readonly 替换常量，例如：

```
string s = "Hello";
readonly string t = s + " World"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T14:18:18.623

没有。因为`const`变量在编译时起作用。

大家同意使用`readonly`；

```
readonly string t = s + " World"; 
```

# c# - 我什么时候会遇到 C# 中 Double 类型的问题，比特币有 8 位小数？

> ID：13861707
> 
> 赞同：0
> 
> 时间：2012-12-13T14:15:03.897
> 
> 标签：c#, floating-point, double, floating-accuracy, bitcoin

我记得读过有关某些数学运算和 type 的问题`double`，但我忘记了它们何时会发生，或者我需要如何处理它们。

“比特币”是一个小数点后 8 位的浮点数。我假设我使用它们键入`double`它，而不是任何其他类型（十进制等）。它是否正确？

在编写、调试和测试使用 8 个小数点的应用程序时，我还应该考虑哪些其他问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T14:20:28.197

如果你用钱做任何事情，你应该使用[`decimal`](http://msdn.microsoft.com/en-us/library/364x0z75%28v=vs.80%29.aspx). 根据数字的大小，您将在小数点后 8 位之前遇到准确性问题。

由于有固定数量的空间（有效数字的数量）`float`可以更准确地表示 -1 到 +1 范围内的数字，而不是 9,000 到 10,000 范围内的数字（比如说）。

[浮点数只有 7 位精度](http://msdn.microsoft.com/en-US/library/b1e65aza%28v=vs.80%29.aspx)，这意味着它不能表示小数点后 8 位的数字。

[Double 具有 15-16 位的精度](http://msdn.microsoft.com/en-US/library/678hzkk9%28v=vs.80%29.aspx)，因此更准确，但对于货币计算仍然不够准确 - 特别是对于较大的值。

如果他们称它为a，`float`那么它会产生误导。它们可能意味着“浮点类型”，`float`它只是一种。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T14:19:56.510

如果您担心小数位数和准确性，特别是在处理货币时，您应该使用[`decimal`](http://msdn.microsoft.com/en-us/library/system.decimal.aspx)not`float`或`double`.

# javascript - jQuery 对话框同时显示

> ID：13861708
> 
> 赞同：0
> 
> 时间：2012-12-13T14:15:05.203
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

我正在整理一个团队页面，`div`每个团队成员都有一个包含照片和一些员工信息的页面。当我单击图片时，我希望弹出一个对话框并使用`$this`上下文在其中查找员工数据`div`。我找不到办法做到这一点。

我让它以一种方式工作，但在这种情况下，对话框只会弹出一次。我现在拥有它的方式，默认情况下会显示所有框，一旦我完成单击 x，我就可以单击照片并再次打开它们。我也尝试过替换`.employee .employeeData`并`$(this)`没有运气。

编辑：我发现`autoOpen: false`对话框不会自动打开，但仍然不能解决我的问题。

**更新**：http : [//jsfiddle.net/eTBS5/1/](http://jsfiddle.net/eTBS5/1/)

```
var $dialog = $('.employee .employeeData').dialog({
    width: 600,    
    height: 400,
    modal: true,
    close: function() {
        $(this).dialog("close");
    }
});

$('.employee').click(function(){
    $dialog.dialog('open');
});​ 
```

```
<div class="employee">
    <img src="http://static.ddmcdn.com/gif/how-elmo-works-1.jpg" />
    <div class="employeeData">
        <p>EMPLOYEE 1 - This is a paragraph about this person.</p>
    </div> 
</div>

<div class="employee">
    <img src="http://static.ddmcdn.com/gif/how-elmo-works-1.jpg" />
    <div class="employeeData">
        <p>EMPLOYEE 2 - This is a paragraph about this person.</p>
    </div> 
</div>

<div class="employee">
    <img src="http://static.ddmcdn.com/gif/how-elmo-works-1.jpg" />
    <div class="employeeData">
        <p>EMPLOYEE 3 - This is a paragraph about this person.</p>
    </div> 
</div>

<div class="employee">
    <img src="http://static.ddmcdn.com/gif/how-elmo-works-1.jpg" /> 
    <div class="employeeData">
        <p>EMPLOYEE 4 - This is a paragraph about this person.</p>
    </div> 
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:23:09.207

问题是因为您一次分配了所有 4 个对话框。试试这个：

```
var dialogs = [];

$('.employee .employeeData').each(function() {
    dialogs.push($(this).dialog({
        width: 600,
        height: 400,
        modal: true,
        autoOpen: false,
        close: function() {
            $(this).dialog("close");
        }
    }));
});

$('.employee').click(function() {
    dialogs[$(this).index()].dialog('open');
}); 
```

[**示例小提琴**](http://jsfiddle.net/eTBS5/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:30:10.530

也可以这样做： [DEMO](http://jsfiddle.net/eTBS5/8/)

```
var $dialog = $('#dial').dialog({
              width: 600,    
              height: 400,
              modal: true,
              autoOpen: false,
              open: function() {
                $(this).html($(this).data('sender'));
              }
        });

        $('.employee').click(function(){
            $dialog.data('sender',$('.employeeData',this).html()).dialog('open');
        });​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T15:05:46.163

也可以这样做：

**[jsFiddle](http://jsfiddle.net/eTBS5/10/)**

```
var diagOpts = {
      width: 600,    
      height: 400,
      modal: true,
      autoOpen: false
};

$('.employee').each(function() {

   var $this = $(this),
       $dialog = $this.find('.employeeData').dialog(diagOpts);

    $this.on('click', function(){
        $dialog.dialog('open');
    });
});​ 
```

该`.each()`调用将创建一个私有范围，您可以使用它来缓存`$dialog`变量，然后可以直接在点击处理程序中引用该变量。您也不需要关闭处理程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T14:26:34.490

您的 jQuery 选择器将找到所有“employee”和“employeeData”对象。您应该像这样使用特定触发的点击事件附加到的对象：

```
 $('.employee').click(function(){
            var empData = $(this).find('employeeData');
            ... get data from empData and open dialog with just that data
 });​ 
```

# c# - PostgreSQL 连接随机错误

> ID：13861716
> 
> 赞同：0
> 
> 时间：2012-12-13T14:15:47.820
> 
> 标签：c#, unit-testing, postgresql, devart

我正在使用 NUnit 运行一组测试。每个测试都连接到 PostgreSQL 数据库并在那里做一些事情。

有时我会通过此堆栈跟踪获得 NullReferenceException：

```
 at Devart.Data.PostgreSql.o.a(Byte[] A_0, Int32 A_1, Int32 A_2, Int32 A_3)
   at Devart.Data.PostgreSql.o.b(Byte[] A_0, Int32 A_1, Int32 A_2)
   at Devart.Data.PostgreSql.o.a(Char A_0)
   at Devart.Data.PostgreSql.r.b(Char A_0)
   at Devart.Data.PostgreSql.r.d(af A_0)
   at Devart.Data.PostgreSql.i.a(af A_0, Boolean A_1, Boolean A_2, Boolean A_3)
   at Devart.Data.PostgreSql.i.a(af A_0, Boolean A_1, Boolean A_2)
   at Devart.Data.PostgreSql.i.a(af A_0, Boolean A_1)
   at Devart.Data.PostgreSql.af.n()
   at Devart.Data.PostgreSql.ag.a(af A_0, Boolean A_1)
   at Devart.Data.PostgreSql.ag.a(af A_0)
   at Devart.Data.PostgreSql.ag.o()
   at Devart.Data.PostgreSql.ag.a()
   at Devart.Common.DbConnectionInternal.ao()
   at Devart.Common.DbConnectionFactory.a(DbConnectionBase A_0)
   at Devart.Common.DbConnectionClosed.Open(DbConnectionBase outerConnection)
   at Devart.Common.DbConnectionBase.Open()
   at Devart.Data.PostgreSql.PgSqlConnection.Open()
   at SAserviceTest.ScriptInvocations.ScriptInvoker.ExecuteSqlScript(String sqlFileName, Object[] parameters) in 
```

在 PostgreSQL 日志中，我发现以下条目：

```
2012-12-13 15:04:41 CET DZIENNIK:  Could not receive data from client: Unknown winsock error 10061
2012-12-13 15:04:41 CET DZIENNIK:  Unexpected EOF on client connection 
```

我不知道是什么导致了这些随机错误。在我的机器上使用本地 PostgreSQL 服务器和在远程构建服务器上使用远程 PostgreSQL 服务器也是如此。

错误是真正随机的，并且在运行单个测试时永远不会发生 - 我必须一个接一个地运行一堆测试才能发生此错误。不涉及 RAM/磁盘空间/硬件问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:47:47.483

从服务器的角度来看，这显然是 TCP 连接意外关闭的问题。问题是为什么。听起来好像有什么东西正在关闭 TCP 连接或状态正在损坏。无论哪种方式，这听起来都发生在比您自己的代码更低的级别上。

阅读堆栈转储，我想知道 devart 是否在内部实现某种连接池并且连接关闭得太早。鉴于这永远不会在您的代码中的同一位置发生，我的想法是，在这种情况下，向 Devart 开发人员提交的错误报告可能是解决此问题的最有效方法。

# javascript - Facebook“Likebox”插件在 IE8 上无法正常工作

> ID：13861717
> 
> 赞同：1
> 
> 时间：2012-12-13T14:15:51.457
> 
> 标签：javascript, facebook, internet-explorer-8

我在 IE8 浏览器中遇到 Facebook“Likebox”插件的问题。

当在 IE8 上加载具有 Facebook 数据的新页面时，它会显示所有业务提要，但缺少垂直滚动条。因此，用户无法阅读所有业务提要。如果我在侧选项卡中打开 Facebook 网站并刷新我的页面，则滚动条会正确显示。

但是，如果我再次清除浏览器缓存并刷新页面，则会出现同样的问题。有时正确数量的个人资料图片也不会出现在类似的部分。

代码：

```
 <div id="fb-root">
  </div>
  <script type="text/javascript">        
  (function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
    fjs.parentNode.insertBefore(js, fjs);
} (document, 'script', 'facebook-jssdk'));</script>
 <div class="cbox width5 facebook">
<h3 id="headerFacebook" runat="server">
    Join us on Facebook</h3>
<div class="cbox-content divfacebook" style="padding: 0; border: 0;">
    <ul class="feedlist">
        <div class="fb-like-box" data-href="<%=FacebookPageUrl %>" data-width="383" data-height="480"
            data-show-faces="true" data-stream="true" data-header="false">
        </div>
    </ul>
</div> 
```

早期的回应将受到高度赞赏。

# android - 测试 Android IAP/应用内购买订阅

> ID：13861718
> 
> 赞同：8
> 
> 时间：2012-12-13T14:15:56.453
> 
> 标签：android, testing, google-play, subscription, in-app-purchase

我正在实现几个要在 Google Play 上启动的 Android 应用程序，它们都有使用 Google IAP 自动续订订阅产品类型的订阅。

为了测试应用程序，我执行了以下操作：

*   已将草稿二进制文件上传到 Google Play，但未发布。

*   在开发者控制台中创建并发布了订阅产品。

*   将我的 Google 帐户添加到开发者控制台的测试帐户列表中

*   从 Eclipse 导出我的 APK（与上传到 Google Play 的包名称和版本名称/代码相同）

*   在我使用测试帐户登录的测试设备上安装了这个导出的 APK。

我现在能够成功测试我的购买并且一切正常。但是，据我所知，这次购买是真实的，订阅实际上是整个月的有效期。

有没有办法做任何类型的“沙盒”测试，或者至少有办法提前取消这个订阅？

如何测试我的订阅已过期而无需等待一个月的场景？！

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-05T08:03:00.067

谷歌终于增加了一种测试订阅的方法。他们的文件现在说：

> 测试购买，让您选择的许可测试用户购买您的应用内产品，而无需向用户收取任何费用。测试购买可用于 alpha/beta 版本或已发布的应用程序。
> 
> 注意：无论产品的订阅期如何，每天都会重复进行测试订阅购买。

[http://developer.android.com/google/play/billing/billing_testing.html](http://developer.android.com/google/play/billing/billing_testing.html)

但我不知道 Google 何时更新此文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T03:32:40.940

不适用于订阅。新的 (v3) 应用内计费 API 已发布，但目前不支持订阅。当它发生时，它可能会带来一种更简单的测试方法（尽管似乎不太可能）。完成测试后，您只需在商家控制台中取消订阅/购买即可。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-11-16T10:54:56.217

正如他们所说，您可以按照 de goolge 文档进行操作：

[http://developer.android.com/google/play/billing/billing_testing.html](http://developer.android.com/google/play/billing/billing_testing.html)

您唯一需要的是添加一个测试帐户：

> Luego crea cuentas de prueba de licencias para los usuarios autorizados。En la Developer Console, ve a **Settings > Account details** y luego, en la sección **License Testing** , agrega las direcciones en el campo**具有测试访问权限的 Gmail 帐户**。Para obtener más informationación，consulta Configuración para compras de prueba。块引用

# click - 单击带有边框半径的 div 下的链接

> ID：13861725
> 
> 赞同：4
> 
> 时间：2012-12-13T14:16:25.267
> 
> 标签：click, css

所以我有一个显示在 div 下的链接。这是一个使用border-radius 属性的圆。但是，当我将光标移到这个链接上时，它的行为就像那个 div 仍然是一个正方形，我无法点击。

我可以监听 JavaScript 点击事件并做一些数学运算来做到这一点，但我希望还有另一种我看不到的方法。

```
a {
    display: block;
    width: 600px;
    height: 150px;
    background: yellow;
}

a:hover {
    color: yellow;
    background: blue;
}

div {
    width: 250px;
    height: 250px;
    margin-top: -100px;
    overflow: hidden;
    background: red;
    border-radius: 125px;
} 
```

演示：http: [//jsfiddle.net/D4R9C/1/](http://jsfiddle.net/D4R9C/1/)

在 Firefox 和 IE9 中按预期工作。
在 Chrome 23、Safari 5 和 Opera 11.5 中按上述方式工作。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:23:07.180

单击 DIV 到底层元素在浏览器中的工作方式不同。Opera 需要手动事件转发，Firefox 和 Chrome 理解 CSS pointer-events:none；并且 IE 不需要任何具有透明背景的东西；例如背景：白色；不透明度：0；过滤器：Alpha（不透明度=0）；IE 需要像 Opera 一样转发。

[请参阅http://caniuse.com/pointer-events](http://caniuse.com/pointer-events)上的转发测试。Pointer-events CSS 属性已从 CSS3-UI 移至 CSS4-UI。

# java - CheckedTreeSelectionDialog 最初检查元素

> ID：13861727
> 
> 赞同：4
> 
> 时间：2012-12-13T14:16:28.263
> 
> 标签：java, eclipse, dialog, swt

我正在使用**CheckedTreeSelectionDialog**，我想最初选择一些项目。

如何使用**setInitialSelections**方法选择子项（level2 项）而不是 level1。

```
CheckedTreeSelectionDialog dialog = new CheckedTreeSelectionDialog(
    this.containerComposite.getShell(), new myLabelProvider(), new
    myContentProvider());

dialog.setContainerMode(true);
dialog.setInput(new MyModel());

Parent p = new Parent("I am a parent");
p.getChildren.add(new Child("I am a child"));
dialog.setInitialSelection(p); 
```

当 containerMode 为 false 并且为 true 时，不选择子项，例如它选择所有子项的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T09:01:09.953

确保在打开对话框
`dialog.setInitialElementSelections(model.getAllElements());`
*之前*`dialog.open();`
完成您的操作： 否则它将无法正常工作。

我有同样的问题 - 我只能标记第一级元素。解决方案是确保这些方法在`ITreeContentProvider`实现类中工作：

```
// this is the object that would get passed into setInput()
private MyModelProvider model; 

@Override
public void inputChanged(Viewer viewer, Object oldInput, Object newInput) 
    this.model = (MyModelProvider ) newInput;
}

@Override
public Object getParent(Object element) {
    if (element instanceof Child)
        return model.getCategories().get(0);    // I only have one category 
    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:33:03.897

只需使用该方法[`SelectionDialog#setInitialElementSelections(List elements)`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/dialogs/SelectionDialog.html#setInitialElementSelections%28java.util.List%29)并传递要在 a 中选择的元素`List`：

```
CheckedTreeSelectionDialog dialog = new CheckedTreeSelectionDialog(
this.containerComposite.getShell(), new myLabelProvider(), new myContentProvider());

dialog.setContainerMode(true);
dialog.setInput(new MyModel());

List<Child> list = new ArrayList<Child>();

/* fill your list */

dialog.setInitialElementSelections(list); 
```

# android - 从第一个应用程序 android 运行第二个应用程序

> ID：13861731
> 
> 赞同：2
> 
> 时间：2012-12-13T14:16:34.580
> 
> 标签：android

我的手机上有两个应用程序。我首先运行，我想首先运行我的第二个应用程序。这是我的第一个应用程序的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    PackageManager pm = getPackageManager();
    Intent intent = pm.getLaunchIntentForPackage("com.example.p2a");
    intent.putExtra("application_id", 2);
    getApplicationContext().startActivity(intent);
    finish();
} 
```

一切都很好，但是当我再次启动我的第一个应用程序并且我的第二个应用程序隐藏时我想从头开始我的第二个应用程序。我想当我运行第一个应用程序时，我会检查第二个应用程序是否正在运行，我想杀死那个应用程序，但我不能这样做。如何再次启动应用程序，而不是从“onResume”方法运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:18:50.797

检查意图标志：http: [//developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

我认为[FLAG_ACTIVITY_NO_HISTORY](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NO_HISTORY)是你想要的

# sql - SQL 查询以提取当前月份的数据

> ID：13861736
> 
> 赞同：2
> 
> 时间：2012-12-13T14:16:47.017
> 
> 标签：sql, sql-server

我想对处置进行计数，并且只计算当月的处置，这是我拥有的代码：

```
SELECT        Disposition, COUNT(Disposition) AS Count, Date
FROM            CSLogs.dbo.Logs
GROUP BY Disposition, Date
HAVING        (DATEPART(month, GETDATE()) = DATEPART(month, Date)) AND (DATEPART(year, GETDATE()) = DATEPART(year, Date)) 
```

但我得到的结果是：

```
Disposition Count   Date
LOC         1       2012-12-10
Save        3       2012-12-11
LOC         1       2012-12-12
Sale        1       2012-12-12
Save        3       2012-12-12 
```

如您所见，我有重复项，但我不是在寻找那个，我正在寻找例如 LOC 说计数为 2 并且没有显示日期列。

希望我已经提供了足够的信息并提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:20:44.983

```
DECLARE @FirstDayOfMonth datetime, @LastDayOfMonth datetime
--You can create scalar functions dbo.GetFirstDayOfMonth and dbo.GetLastDayOfMonth
-- try this from December 2012
SELECT @FirstDayOfMonth = '20121201', @LastDayOfMonth = '20121231'

    SELECT Disposition, COUNT(Disposition) AS Count
    FROM CSLogs.dbo.Logs
    WHERE Date BETWEEN @FirstDayOfMonth AND @LastDayOfMonth
    GROUP BY Disposition 
```

这样效率更高，引擎可以在 Date 上使用索引（如果存在）。

**编辑**

我想澄清这个技巧。这是面向日期的数据库中始终需要的辅助函数。

```
IF(OBJECT_ID('dbo.ufn_FisrtDayOfMonth') IS NOT NULL)
    DROP FUNCTION dbo.ufn_FisrtDayOfMonth
GO
CREATE FUNCTION dbo.ufn_FisrtDayOfMonth(@DATE DATE)
RETURNS DATETIME
BEGIN
    RETURN CAST(DATEADD(d, - DATEPART(d, @DATE) + 1, @DATE) as DATETIME)
END
GO

IF(OBJECT_ID('dbo.ufn_FisrtDayOfNextMonth') IS NOT NULL)
    DROP FUNCTION dbo.ufn_FisrtDayOfNextMonth
GO
CREATE FUNCTION dbo.ufn_FisrtDayOfNextMonth(@DATE DATE)
RETURNS DATETIME
BEGIN
    RETURN CAST(DATEADD(d, - DATEPART(d, @DATE) + 1, DATEADD(m, 1, @DATE)) as DATETIME)
END
GO 
```

现在你可以试试这个：

```
DECLARE @FirstDayOfMonth datetime, @FirstDayOfNextMonth datetime
SELECT @FirstDayOfMonth = dbo.ufn_FisrtDayOfMonth(GETDATE()), @FirstDayOfNextMonth = dbo.ufn_FisrtDayOfNextMonth(GETDATE())

    SELECT Disposition, COUNT(Disposition) AS Count
    FROM CSLogs.dbo.Logs
    WHERE Date >= @FirstDayOfMonth
      AND Date < @FirstDayOfNextMonth
    GROUP BY Disposition 
```

# css - 点击动画

> ID：13861751
> 
> 赞同：1
> 
> 时间：2012-12-13T14:17:54.827
> 
> 标签：css

我刚开始玩CSS。我正在尝试制作一个应该在单击按钮时触发的动画（下拉菜单）。我找到了一个很好的例子，但是在 hoover 事件的触发器中并改变了几个 div 的样式。

我想我需要在单击按钮时设置样式，然后在再次单击时将其更改回来。但我无法让它工作。

这是CSS：

```
 /* Static state */
            #container  { 
                width: 400px; 
                height: 400px; 
                position: relative; 
                border: 1px solid #ccc; 
            }
            .parent1    { 
                /* overall animation container */
                height: 0; 
                overflow: hidden;

                -webkit-transition-property: height;
                -webkit-transition-duration: .5s; 
                -webkit-perspective: 1000px; 
                -webkit-transform-style: preserve-3d; 

                -moz-transition-property:height; 
                -moz-transition-duration: .5s; 
                -moz-perspective: 1000px; 
                -moz-transform-style: preserve-3d; 

                -o-transition-property: all; 
                -o-transition-duration: .5s;
                -o-transform: rotateX(-90deg);
                -o-transform-origin: top;

                transition-property: height;
                transition-duration: .5s;
                perspective: 1000px;
                transform-style: preserve-3d;
            }
            .parent2    { 
                /* full content during animation *can* go here */ 
            }
            .parent3    { 
                /* animated, "folded" block */
                height: 56px; 

                -webkit-transition-property: all; 
                -webkit-transition-duration: .5s;
                -webkit-transform: rotateX(-90deg);
                -webkit-transform-origin: top; 

                -moz-transition-property: all; 
                -moz-transition-duration: .5s;
                -moz-transform: rotateX(-90deg);
                -moz-transform-origin: top; 

                -o-transition-property: all; 
                -o-transition-duration: .5s;
                -o-transform: rotateX(-90deg);
                -o-transform-origin: top;

                transition-property: all; 
                transition-duration: .5s;
                transform: rotateX(-90deg);
                transform-origin: top; 
            }

            /* Hover states to trigger animations */
            #container:hover .parent1   { height: 111px; }
            #container:hover .parent3   { 
                -webkit-transform: rotateX(0deg); 
                -moz-transform: rotateX(0deg); 
                -o-transform: rotateX(0deg); 
                transform: rotateX(0deg); 
                height: 111px; 
            } 
```

这就是我一直在做的事情......

```
 <script>
            function fold()
            {
                var element = document.getElementById('parent1');
                element.style.height= 111;

                element = document.getElementById('parent3');
                var prop = getTransformProperty(element);
                element.style[prop] = 'rotateX(0deg)';
                element.style.height= 111;
            }

            function getTransformProperty(element) 
            {
                // Note that in some versions of IE9 it is critical that
                // msTransform appear in this list before MozTransform
                var properties = [
                    'transform',
                    'WebkitTransform',
                    'msTransform',
                    'MozTransform',
                    'OTransform'
                ];
                var p;
                while (p = properties.shift()) {
                    if (typeof element.style[p] != 'undefined') {
                        return p;
                    }
                }
                return false;
            }
        </script> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:06:06.083

[使用jQuery UI 手风琴](http://jqueryui.com/accordion/#collapsible)可以节省大量时间和精力

```
<script>
$(function() {
            $(".accordion").show().accordion({
                heightStyle: "content",
                collapsible: true,
                active: false,
                animate: {
                    duration: 1000,
                    easing: 'easeOutBounce'
                },
            });
        })
</script> 
```

请注意，您可以随意设置此插件的样式，

```
.accordion {/* some style*/}

.ui-accordion-content {/* some style*/}

.accordion h6 {/* some style*/} 
```

这是一个[小提琴](http://jsfiddle.net/apaul34208/M3mEX/)，显示了我如何滥用手风琴小部件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-02T13:44:40.880

这里很简单：[JSFiddle](http://jsfiddle.net/amirm3hdi/5mKra/embedded/result/)

**HTML**

```
<ul>
    <li>Something</li>
    <li>Something Else</li>
    <li>Another Thing</li>
    <li>Or This</li>
</ul>
<br>
<br>

<h3>
    Dropdown Example -
    <a href="#">Amir Mehdi</a>
</h3> 
```

**Javascript**

```
$("div , li").click(function () {
    $("ul").slideToggle(120);
}); 
```

# json - 我将如何正确地将这些数据存储在 redis 中？

> ID：13861754
> 
> 赞同：2
> 
> 时间：2012-12-13T14:18:11.087
> 
> 标签：json, mongodb, redis, schema

# 收藏：年

## 条目 1

```
{
  _id: ObjectId("4f2fd2ee4516ed6ceebbe17c"),
  shows: [
    {
      day: 1,
      hasVideos: false,
      month: 1,
      showid: 1252187000,
      venue: "Someplace"
    },
    {
      day: 2,
      hasVideos: false,
      month: 2,
      showid: 1252188010,
      venue: "Philly"
    }
  ],
  year: 1988
} 
```

## 条目 2

```
{
  _id: ObjectId("4f2fd2ee4516ed6ceebbe17c"),
  shows: [
    {
      day: 19,
      hasVideos: false,
      month: 1,
      showid: 1252187999,
      venue: "Hunt's"
    },
    {
      day: 21,
      hasVideos: false,
      month: 1,
      showid: 1252188030,
      venue: "Hunt's"
    }
  ],
  year: 1987
} 
```

`years`现在，我在我的 redis 存储中创建了一个集合。这是用 . 形式的字符串填充的`year:1988`。我创建了一个名为`year:1988`. 但这是错误的。我想嵌套这些显示哈希的数组。

如何将哈希嵌套两个集合？`1988:01:01`我是否应该继续该模式并以and的形式创建一个集合`1988:02:02`来存储第一个条目？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T16:01:32.477

如果您只想按日期（或年份）查询，则应使用排序集作为查找。

[redis.io 上的排序集](http://redis.io/commands#sorted_set)

您要做的是使用节目的 ID 或连载节目作为**成员**，并使用节目播出或发生的日期作为**得分**。

请注意，如果您只存储节目 ID，则需要执行另一次查找以获取节目的详细信息。

现在您可以执行似乎是您想要的范围查询：

[ZRANGEBYSCORE](http://redis.io/commands/zrangebyscore)

[ZREVRANGEBYSCORE](http://redis.io/commands/zrevrangebyscore)

# c# - 循环编译器优化

> ID：13861756
> 
> 赞同：5
> 
> 时间：2012-12-13T14:18:22.790
> 
> 标签：c#, optimization, compiler-construction

我需要优化广泛使用 linq 的大型应用程序。许多 linq 语句在 linq 扩展方法中创建匿名对象。一个例子 ：-

```
// custom sort order
var sortedData = data.OrderBy(x => (new List<string>() {"Orange", "Apple", "Pear" }).IndexOf(x.Name));
foreach (var d in sortedData) {
    .... 
```

问题是每次迭代都会创建一个新列表。

是否可以设置一个编译器标志来让编译器进行一些静态分析并将循环不变代码提取到循环之外？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:25:27.257

为什么不能自己拔出来？

```
var fruits = new [] {"Orange", "Apple", "Pear" };
var sortedData = data.OrderBy(x => fruits.IndexOf(x.Name));
foreach (var d in sortedData) { 
```

此外，如果这些循环都在同一个类中，则使之成为该类`fruits`的`static readonly`成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:07:04.133

我想很多人都被你的例子所吸引而错过了你真正的问题。

不，Visual Studio 中没有内置的简单工具可以静态地执行此操作（无需运行程序）。如果您可以运行程序并执行有问题的代码，有两个工具可以帮助您（您确实有具有 100% 代码覆盖率的单元测试，不是吗；））。一种是[Visual Studio 中内置的分析器](http://msdn.microsoft.com/en-us/magazine/cc337887.aspx)，另一种是[CLR 分析器](http://msdn.microsoft.com/en-us/library/ff650691.aspx)。

我从未使用过 CLR 分析器，它可能只是 Visual Studio 中的旧版本。Visual Studio Profiler 可以向您显示是否正在创建大量对象（在您的示例中为列表），并查看在代码中创建这些对象的位置。它还可以向您显示哪些代码行执行时间最长，以便您知道将精力集中在哪里来加快程序速度。

如果您在运行分析器时遇到特定问题，我建议您针对该问题提出一个新问题，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:20:48.400

您可以将 LINQ 更改为：

```
// Note the call to ToArray()
var sortedData = data.OrderBy(...).ToArray(); 
```

在这种情况下，该语句应该执行一次，并且循环的源是不变的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T14:25:37.263

您无法设置任何内容来自动为您解决此问题；您必须手动取出匿名对象：

```
var orderingList = new List<string>() { "Orange", "Apple", "Pear" };
var sortedData = data.OrderBy(x => orderingList.IndexOf(x.Name));
foreach (var d in sortedData) {
    ...
} 
```

请注意，这不是订购列表的最有效方式，因为您必须遍历列表中的每个项目`data`；你最好用字典：

```
var ordering = new Dictionary<string, int> {
    {"Orange", 0}, {"Apple", 1}, {"Pear", 2} };
var sortedData = data.OrderBy(x => ordering.ContainsKey(x) ? ordering[x] : -1); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-13T14:30:52.933

检查 FxCop 的规则，也许你可以做些什么。

# iphone - Xcode 4.5 中的 UIviewcontroller

> ID：13861757
> 
> 赞同：0
> 
> 时间：2012-12-13T14:18:35.373
> 
> 标签：iphone, objective-c, xcode, ipad

我想在我的 Project 中添加一个 UIViewController 子类，但是当我点击“添加新文件”时我没有找到它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:23:21.313

**Xcode** -> **File** -> **New** -> **File...** -> 然后选择 Cocoa Touch 下的 Objective-C Class 然后 -> **Next** -> 输入你的类名并`UIViewController`从下拉菜单中选择

![在此处输入图像描述](../Images/570717e1b30b86e2aefc10d08c29204e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:20:24.173

选择 Cocoa Touch 下的 Objective-C 类，然后在“Subclass of”的文本字段中输入 UIViewController。

# java - 在 JSF Bean 中找不到方法

> ID：13861758
> 
> 赞同：1
> 
> 时间：2012-12-13T14:18:40.693
> 
> 标签：java, jsf, button, user-interface, jsf-1.2

我已经使用 JSF 1.x 完成了一个应用程序，该应用程序已启动并正在运行。

该应用程序有两个部分，一个是调用一个动作事件并显示同一页面，第二个是调用一个方法并导航到下一页。典型的 Hello world 示例。

但是应用程序的第二部分不起作用，因为它没有在 bean 类中找到方法。

中的“再见”按钮`hello.jsp`不起作用。

我调用了`http://localhost:8090/balaji/faces/JSP/hello.jsp`正确执行的 Url，向我显示了 hello.jsp 页面。

但是 hello.jsp 页面中的再见按钮不起作用，单击该按钮不会更改 URL。但是我在堆栈跟踪上得到了错误，如下所示。Method 存在且公开，EL 表达式正确，导航规则已设置，JSP 页面存在，但方法无响应。

我的堆栈跟踪显示以下错误：

**堆栈跟踪：**

```
13 Dec, 2012 7:17:19 PM javax.faces.event.MethodExpressionActionListener processAction
SEVERE: Received 'org.apache.jasper.el.JspMethodNotFoundException' when invoking action listener '#{helloBean.goodbye}' for component 'goodbyeCommand'
13 Dec, 2012 7:17:19 PM javax.faces.event.MethodExpressionActionListener processAction
SEVERE: org.apache.jasper.el.JspMethodNotFoundException: /JSP/hello.jsp(40,2) '#{helloBean.goodbye}' Method not found: com.achutha.bean.HelloBean@46a5c4.goodbye(javax.faces.event.ActionEvent)
    at org.apache.jasper.el.JspMethodExpression.invoke(JspMethodExpression.java:73)
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:99)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:771)
    at javax.faces.component.UICommand.broadcast(UICommand.java:372)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:475)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:756)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:82)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:100)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:265)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1822)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

我的应用程序结构如下：

**封装结构：**

![poc](../Images/8fd0278d82322ee45cd453c4427b2836.png)

**Maven依赖：**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.achutha.labs</groupId>
    <artifactId>02JsfExample</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>war</packaging>
    <name>02JsfExample</name>

    <dependencies>

        <dependency>
            <groupId>javax.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>1.2_14</version>
        </dependency>
        <dependency>
            <groupId>javax.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>1.2_14</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
        </dependency>

        <!-- EL -->
        <dependency>
            <groupId>org.glassfish.web</groupId>
            <artifactId>el-impl</artifactId>
            <version>2.2</version>
        </dependency>

    </dependencies>

    <build>
        <finalName>JavaServerFaces</finalName>

        <plugins>

            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>tomcat-maven-plugin</artifactId>
                <configuration>
                    <url>http://localhost:8090/manager/text</url>
                    <server>TomcatServer</server>
                    <path>/balaji</path>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

**人脸配置：**

```
<?xml version="1.0"?>
<!DOCTYPE faces-config PUBLIC
     "-//Sun Microsystems, Inc.//DTD JavaServer Faces Config 1.0//EN"
     "http://java.sun.com/dtd/web-facesconfig_1_0.dtd">

<faces-config>
    <managed-bean>
        <description> The one and only HelloBean.</description>
        <managed-bean-name>helloBean</managed-bean-name>
        <managed-bean-class>com.achutha.bean.HelloBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>

    <navigation-rule>
        <description>Navigation From the Hello Page.</description>
        <from-view-id>/JSP/hello.jsp</from-view-id>
        <navigation-case>
            <from-outcome>success</from-outcome>
            <to-view-id>/JSP/goodbye.jsp</to-view-id>
        </navigation-case>
    </navigation-rule>

</faces-config> 
```

**部署描述符（web.xml）：**

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE web-app
        PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
        "http://java.sun.com/dtd/web-app_2_3.dtd">

   <web-app version="2.5"
      xmlns="http://java.sun.com/xml/ns/javaee"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
      http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

        <display-name>Hello, World!</display-name>
        <description>Welcome to JavaServer Faces</description>

        <servlet>
            <servlet-name>Faces Servlet</servlet-name>
            <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
            <load-on-startup>1</load-on-startup>
        </servlet>

        <servlet-mapping>
            <servlet-name>Faces Servlet</servlet-name>
            <url-pattern>/faces/*</url-pattern>
        </servlet-mapping>

        <welcome-file-list>
            <welcome-file>faces/JSP/hello.jsp</welcome-file>
        </welcome-file-list>

    </web-app> 
```

**你好.jsp**

```
<%@ taglib uri="http://java.sun.com/jsf/core" prefix="f"%>
<%@ taglib uri="http://java.sun.com/jsf/html" prefix="h"%>

<f:view>
    <html>
<head>
<title>JSF In Action - Hello, world!</title>
</head>
<body>
    <h:form id="welcomeForm">
        <h:outputText id="welcomeOutput" value="Welcome to JavaServer Faces !"
            style="font-family: Arial, sans-serif; font-size: 23; color: green;" />

        <p>
            <h:message id="errors" for="helloInput" style="color: red" />
        </p>

        <p>
            <h:outputLabel for="helloInput">
                <h:outputText id="helloInputLabel"
                    value="Enter Number of controls to display: ">

                </h:outputText>

                <h:inputText id="helloInput" value="#{helloBean.numControls}"
                    required="true">
                    <f:validateLongRange minimum="1" maximum="500" />
                </h:inputText>
            </h:outputLabel>
        </p>

        <p>
            <h:panelGrid id="controlPanel" binding="#{helloBean.controlPanel}"
                columns="20" border="1" cellspacing="0" />
        </p>

        <h:commandButton id="redisplayCommand" type="submit" value="Redisplay"
            actionListener="#{helloBean.addControls}" />

        <h:commandButton id="goodbyeCommand" type="submit" value="Goodbye"
            actionListener="#{helloBean.goodbye}" immediate="true"/>

    </h:form>

</body>

    </html>

</f:view> 
```

**再见.jsp：**

```
<%@ taglib uri="http://java.sun.com/jsf/html" prefix="h"%>
<%@ taglib uri="http://java.sun.com/jsf/core" prefix="f"%>
<f:view>
    <html>
<head>
<title>Jsf in Action - Hello World!</title>
</head>
<body>
    <h:form id="goodbyeForm">
        <p>
            <h:outputText id="welcomeOutput" value="Good Bye"
                style="font-family: Arial, sans-serif; font-size: 24; font-style: bold; color: green;" />

        </p>
        <p>
            <h:outputText id="helloBeanOutputLabel"
                value="Number of controls displayed: " />
            <h:outputText id="helloBeanOutputLabel"
                value="#{helloBean.numControls}" />
        </p>
    </h:form>

</body>
    </html>
</f:view> 
```

**豆类：**

```
package com.achutha.bean;

import java.util.List;

import javax.faces.application.Application;
import javax.faces.component.UIComponent;
import javax.faces.component.html.HtmlOutputText;
import javax.faces.component.html.HtmlPanelGrid;
import javax.faces.context.FacesContext;
import javax.faces.event.ActionEvent;

public class HelloBean {

    private int numControls;
    private HtmlPanelGrid controlPanel;

    public int getNumControls() {
        return numControls;
    }

    public void setNumControls(int numControls) {
        this.numControls = numControls;
    }

    public HtmlPanelGrid getControlPanel() {
        return controlPanel;
    }

    public void setControlPanel(HtmlPanelGrid controlPanel) {
        this.controlPanel = controlPanel;
    }

    public void addControls(ActionEvent actionEvent) {
        Application application = FacesContext.getCurrentInstance()
                .getApplication();

        List<UIComponent> children = controlPanel.getChildren();

        children.clear();

        for (int count = 0; count < numControls; count++) {
            HtmlOutputText output = (HtmlOutputText) application
                    .createComponent(HtmlOutputText.COMPONENT_TYPE);
            output.setValue(" " + count + " ");
            output.setStyle("color: blue");
            children.add(output);
        }
    }

    public String goodbye() {
        return "success";
    }

} 
```

**干净部署：**应用程序在 Tomcat 7 上自行部署良好。我检查了 &tomcat_home%/webapps 上部署的包结构，所有 JSP 文件都按预期完好无损地放置在适当的位置。

我无法找出错误，是什么让“再见”按钮触发？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:20:43.573

你的`goodbye`方法没有完整的`ActionListener`

```
public String goodbye() {
    return "success";
} 
```

`ActionEvent`如果我没记错的话，它必须像您的其他方法一样接收一个作为参数并返回 void。事实上，你可能真的想把它作为一个`action`而不是`actionListener`你的`commandButton`，改变

```
<h:commandButton id="goodbyeCommand" type="submit" value="Goodbye"
        actionListener="#{helloBean.goodbye}" immediate="true"/> 
```

到

```
<h:commandButton id="goodbyeCommand" type="submit" value="Goodbye"
        action="#{helloBean.goodbye}" immediate="true"/> 
```

并保持`goodbye`方法不变。

# r - 从 CD-ROM 运行 R

> ID：13861759
> 
> 赞同：2
> 
> 时间：2012-12-13T14:08:56.740
> 
> 标签：r

可以从 CD-ROM 驱动器运行 R 吗？这台电脑是独立的（没有网络或互联网连接），我不能在上面安装任何东西，也不能使用闪存驱动器。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T17:19:26.107

“无法安装”是什么意思？

你不需要安装 R，你可以从其他地方复制的文件夹中运行它。如果您在 PC 上有硬盘存储，那么您可以`C:\Program Files\R`从一台机器复制到 CD-ROM，然后将 CD-ROM 带到 cripplebox，将其复制到您存储文件的任何位置并从那里运行它。最坏的情况是您必须更改 R_HOME 环境变量。适用于 Linux 和 Windows（您没有说您使用的是什么操作系统）。

...除非您的系统管理员禁用了您的硬盘存储的可执行权限。这是真正的 BOFH 要做的事情。

...但如果他们这样做了，我也会怀疑他们也禁用了 CD-ROM 中的可执行文件。

...如果您没有任何可写的硬盘存储，您将如何进行任何分析？

...真正的解决方法可能是踢系统管理员，直到您告诉他们如果没有在机器上安装 R 就无法完成工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:36:45.053

您可能在使用软件包时遇到问题，但除此之外，在[USB 密钥上安装 R](http://personal.bgsu.edu/~mrizzo/Rmisc/usbR.htm)的说明应该是相关的。

# javascript - 在 Javascript 中调用方法

> ID：13861762
> 
> 赞同：0
> 
> 时间：2012-12-13T14:18:51.393
> 
> 标签：javascript, object, methods

我对 Javascript 完全陌生，这看起来应该很简单，但我不明白为什么我的代码不起作用。这是我遇到的问题的一个例子：

```
//Thing constructor
function Thing() {
    function thingAlert() {
        alert("THING ALERT!");
    }
}

//Make a Thing
var myThing = new Thing();

//Call thingAlert method
myThing.thingAlert(); 
```

创建了一个对象，但我不能调用它的任何方法。为什么在这个例子中，thingAlert() 没有被调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:21:07.103

```
//Thing constructor
function Thing() {
    this.thingAlert = function() {
        alert("THING ALERT!");
    };
};
// you need to explicitly assign the thingAlert property to the class.
//Make a Thing
var myThing = new Thing();

//Call thingAlert method
myThing.thingAlert(); 
```

# android - 在 Android NDK 中使用一个简单的 c++ 类

> ID：13861769
> 
> 赞同：7
> 
> 时间：2012-12-13T14:19:24.967
> 
> 标签：android, c++, class, android-ndk, java-native-interface

我正在尝试学习 Android NDK 的基础知识，但是当我必须将它与 c++ 类一起使用时我被困住了。

我了解如何将它与一个简单的函数一起使用，但我应该怎么做才能操作 c++ 类的字段和方法？

我正在尝试使用这个简单的 c++ 类来做到这一点：

```
#include <cstdlib>
#include <jni.h>
using namespace std;

class Point {
   int x, y; // coordonnées du point

   public:
      Point() {
         this->x = 0;
         this->y = 0;
      }

      Point(int x, int y) {
         this->x = x;
         this->y = y;
      }

      int getX() const {
         return x;
      }

      int getY() const {
         return y;
      }

      Point symetrique() const {
         return Point(-x, -y);
      }

      bool operator ==(const Point &p) const {
         return this->x == p.getX() && this->y == p.getY();
      }
};

extern "C" {
    JNIEXPORT jlong JNICALL Java_com_example_jnipoint_JPoint_createPoint__
      (JNIEnv *, jobject);

    JNIEXPORT jlong JNICALL Java_com_example_jnipoint_JPoint_createPoint__II
      (JNIEnv *, jobject, jint, jint);

    JNIEXPORT jint JNICALL Java_com_example_jnipoint_JPoint_nativeGetX
      (JNIEnv *, jobject, jlong);

    JNIEXPORT jint JNICALL Java_com_example_jnipoint_JPoint_nativeGetY
      (JNIEnv *, jobject, jlong);

    JNIEXPORT jlong JNICALL Java_com_example_jnipoint_JPoint_nativeSymetrique
      (JNIEnv *, jobject, jlong);
};

JNIEXPORT jlong JNICALL Java_com_example_jnipoint_JPoint_createPoint__(JNIEnv* env, jobject thiz) {
    return (jlong)(new Point());
}

JNIEXPORT jlong JNICALL Java_com_example_jnipoint_JPoint_createPoint__II(JNIEnv* env, jobject thiz, jint x, jint y) {
    return (jlong)(new Point(x, y));
}

JNIEXPORT jint JNICALL Java_com_example_jnipoint_JPoint_nativeGetX(JNIEnv* env, jobject thiz, jlong nativePointer) {
    return ((Point*)nativePointer)->getX();
}

JNIEXPORT jint JNICALL Java_com_example_jnipoint_JPoint_nativeGetY(JNIEnv* env, jobject thiz, jlong nativePointer) {
    return ((Point*)nativePointer)->getY();
}

jlong Java_com_example_jnipoint_JPoint_nativeSymetrique(JNIEnv* env, jobject thiz, jlong nativePointer) {
    return ((Point*)nativePointer)->symetrique();
} 
```

我试图找到样本，但到目前为止什么都没有……也许我没有使用正确的关键字

*****更新*******

 **我为 c++ Point 类创建了一个 Java 包装器，并将 JNI 方法添加到 c++ 文件中。代码如下：

```
public class JPoint {

    private long nativePointer;

    public JPoint() {
        nativePointer = createPoint();
    }

    public JPoint(int x, int y) {
        nativePointer = createPoint(x, y);
    }

    public int getX() {
        return nativeGetX(nativePointer);
    }

    public int getY() {
        return nativeGetY(nativePointer);
    }

    public JPoint symetrique() {
        JPoint tmp = new JPoint();
        tmp.nativePointer = nativeSymetrique(nativePointer);
        return tmp;
    }

    // TODO
    /*public boolean equals(Object o) {
        return nativeEquals(o);
    }*/

    private native long createPoint(); // Void constructor
    private native long createPoint(int x, int y);
    private native int nativeGetX(long nativePointer);
    private native int nativeGetY(long nativePointer);
    private native long nativeSymetrique(long nativePointer);
    //private native boolean nativeEquals(Object p); TODO
} 
```

现在我坚持使用 nativeSymetrique 函数，它说我无法将“Point”转换为“jlong​​”。谁可以帮我这个事 ？谢谢

***** 更新 2 *******

 **SWIG 解决了我的问题，您不必手写包装器，它似乎是大型库的不错选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:57:38.570

看看[JNA](https://github.com/twall/jna#readme)。

JNI 旨在从 C 访问 Java 类/对象。这意味着 JNI 为您提供了用于访问 JVM 的 C 函数。但反之亦然：从 JVM 访问 C 结构（C++ 类）。Java 没有这样的方法。所以如果你想在 C++ 和 Java 之间有一个“类反射”，你唯一能做的就是让 Java 端的类和一组 JNI C 调用来访问、修改和调用 Java 对象上的方法。Java 端的 JNI 本机方法对您没有用处，因为它可以采用（输入或输出）的唯一参数也只能是 Java 对象（或原语或数组）。根本没有办法将 C(++) 结构/对象传递给 Java 端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:30:39.203

您可以根据需要使用 C 代码进行操作并通过 JNI 传递\返回值，您可以在 androidndk/samples - helloJni 中找到 JNI 示例。

例如：

```
JNIEXPORT jfloat JNICALL Java_com_opengl_glworld_GLWorldRenderer_changeCurrentArea(JNIEnv *env, jobject obj, jfloat curArea)
{
    area = curArea;
    return area;
    // here you can execude you C code, you can access to methods of class,
    // or method  that use your classes.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T10:13:45.680

正如我在第二次更新中所说，[SWIG](http://www.swig.org/)非常适合我的需求。****

# sql - 带有比较但不删除而没有子查询的sql查询

> ID：13861774
> 
> 赞同：0
> 
> 时间：2012-12-13T14:19:46.267
> 
> 标签：sql

我的问题是，是否可以根据比较规则选择表中的某些行而不从结果中删除任何内容。为了澄清我想想象的下面的例子。

我有一个有两个值的表，

```
 A | B | C
 1   0   hey
 1   1   there
 2   1   this
 3   0   is
 3   1   a
 4   0   test 
```

现在我想选择在 B 列中具有 0 和在 C 列中具有 a 的行，而不删除在 B 列中没有 0 但在 A 列中具有相同值的结果。为此我可以这样做一个

```
 select C from T where A in (select A from T where B = 0); 
```

但是是否可以选择 B 列包含 0 并且与 A 列匹配的所有 C 值？

如果需要更多信息，我很乐意等待，因为这是一个非常模糊的问题，但 SQL 有时会令人困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:51:55.533

我想你只想要一个`or`条件：

```
select C
from MyTable
where b = 0 or A in (select A from T where B = 0) 
```

这是你想要的版本吗：

```
select C
from MyTable
where C = 'a' or A in (select A from T where B = 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:34:36.277

没有你的示例结果集很难说；但也许是这样的：

```
SELECT A, B, C
FROM myTable
WHERE (B = 0 AND C LIKE '%A%')
OR (B <> 0 AND B = A) 
```

# javascript - Rhino 中的 Unicode

> ID：13861775
> 
> 赞同：7
> 
> 时间：2012-12-13T14:19:53.943
> 
> 标签：javascript, unicode, character-encoding, rhino

[由于某种原因，Unicode 字符串在Mozilla 的 JavaScript 引擎](https://developer.mozilla.org/en-US/docs/Rhino)[**Rhino**](https://developer.mozilla.org/en-US/docs/Rhino)中无法正常运行。如果我在 REPL 中输入 Unicode 文本，或者对其进行操作，它会返回乱码。

```
js> 'тотальная киборгизация'
B>B0;L=0O :81>@3870F8O 
```

ASCII 字符工作得很好。

```
js> 'reprap for everyone'
reprap for everyone 
```

Unix 命令也可以正常工作：

```
$ echo 'тотальная киборгизация'
тотальная киборгизация 
```

JVM 输出也很好，`class Test { public static void main(String[] args) { System.out.println("тотальная киборгизация"); } }`正确运行输出 Cyrillic。

Java 和 Rhino 版本是：

```
$ java -version
java version "1.7.0_09"
OpenJDK Runtime Environment (IcedTea7 2.3.3) (7u9-2.3.3-0ubuntu1~12.10.1)
OpenJDK 64-Bit Server VM (build 23.2-b09, mixed mode)
$ rhino
Rhino 1.7 release 3 2012 05 18 
```

语言环境：

```
$ echo $LC_TYPE

$ echo $LANG
en_US.UTF-8 
```

更改`LC_ALL`为`en_US.UTF-8`没有帮助。

这个问题是否与这个 StackOverflow 问题有关，[*Javascript using UCS-2*](https://stackoverflow.com/a/9109335/596361)？

**有什么问题，如何在 Rhino REPL 中使用正确的 Unicode？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T14:36:30.530

确实应该注意，JavaScript 并不能真正正确地处理 Unicode，因为它早于 UTF16。（它确实使用了另一个类似的 16 位编码系统，但肯定不一样。）

这篇 [文章很好地解释了这个问题，并提供了库和解决方法](http://mathiasbynens.be/notes/javascript-unicode)。

# java - Struts 2, JasperReports plugin: How to set file name for generated report

> ID：13861776
> 
> 赞同：1
> 
> 时间：2012-12-13T14:19:54.390
> 
> 标签：java, http, struts2, jasper-reports, jasper-plugin

The plugin does not seem to work properly.

This is my action declared in the *struts.xml*:

```
<action name="actionName" class="isa.presentation.jasper.MyClass">
    <result name="success" type="jasper">
        <param name="location">jasper/courriers/mutuelle.jasper</param>
        <param name="dataSource">resultats</param>
        <param name="format">HTML</param>
        <param name="documentName">xxx</param>
    </result>
</action> 
```

So for some format (HTML, XML), the name of the output file is not what it should be (xxx.[format]) but (the name of the action).action !!

Why? Can something be done?

Question 2 : For some format (PDF, HTML, XML) the file appears directly in the good application, for the others there is a prompt asking if you want to open it or record it. The problem with the HTML et XML formats is that they open directly in the browser instead of the site... So is it possible that the prompt box appears all the time (whatever the format). If not, is it possible to ask to open the file in another tab of the browser?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:47:10.397

I've never used Jasper result, but [according to the documentation](http://struts.apache.org/2.3.4/struts2-plugins/struts2-jasperreports-plugin/apidocs/org/apache/struts2/views/jasperreports/JasperReportsResult.html),

1) `format` must be one of the [JasperReportConstants](http://struts.apache.org/2.3.4/struts2-plugins/struts2-jasperreports-plugin/apidocs/org/apache/struts2/views/jasperreports/JasperReportConstants.html#FORMAT_HTML),

then `FORMAT_HTML` instead of `HTML`

2) You missed the `contentDisposition` param, that specifies both the filename AND the type of disposition (default inline):

```
<param name="contentDisposition">inline; filename="yourFileName.html"</param> 
```

or

```
<param name="contentDisposition">attachment; filename="yourFileName.html"</param> 
```

`Inline` means you want to open it in browser (if a plugin is found), `Attachment` that you want to ask if download it or open it with a program from your computer.

I can't understand what `documentName` param stand for, but you can try and update your question with the results ;)

Summarizing:

```
<action name="actionName" class="isa.presentation.jasper.MyClass">
    <result name="success" type="jasper">
            <param name="location">jasper/courriers/mutuelle.jasper</param>
            <param name="dataSource">resultats</param>
            <param name="format">FORMAT_HTML</param>
            <param name="contentDisposition">
                        attachment; filename="yourFileName.html"</param>
            <param name="documentName">yourFileName</param>
    </result>
</action> 
```

# svg - SVG：基于文本的动态大小，合并对象

> ID：13861780
> 
> 赞同：3
> 
> 时间：2012-12-13T14:20:02.387
> 
> 标签：svg

```
<div style="float: left; padding: 10px; border: 1px solid; 
background: #ccc">random text</div> 
```

有没有办法在 SVG 中实现这样的功能？我的意思是有一个矩形和一个文本，并且：

a) 矩形的宽度和高度是动态的，所以当我更改文本时，矩形会调整其大小
b) 当我移动矩形时，文本会随之变化

在 中实现这样的事情会更容易`<canvas>`吗？

**编辑：**

```
<defs>       
    <text id="text1" x="90" y="100" style="text-anchor:start;font-size:30px;">
    THIS IS MY HEADER</text>
</defs>

<filter x="0" y="0" width="1" height="1" id="background">
    <feFlood flood-color="gray"/>
    <feComposite in="SourceGraphic"/>
</filter>

<use xlink:href="#text1" fill="black" filter="url(#background)"/> 
```

Erik Dahlström 提出了这样的建议。如何将填充放在背景中，如何添加例如。矩形的阴影或边框？而且，这在 IE9 中不起作用，所以我不能接受。`<foreignObject>`如果 IE 支持它，我可以使用它。

我刚刚找到了**我的问题的 b) 点的答案**。您必须将两个元素都放在组中：

```
<g>
    <rect x="0" y="0" width="100" height="100" fill="red"></rect>
    <text x="50" y="50" font-size="14" fill="blue" text-anchor="middle">Hello</text>
</g> 
```

然后您可以使用`transform`参数移动组：

```
<g transform="translate(x, y)"> 
```

似乎在每个浏览器中都能正常工作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-14T06:14:45.467

您可以使用 JavaScript 来调整框：

```
<svg xmlns="http:/www.w3.org/2000/svg" onload="init()" height="100" width="200">
      <style type="text/css">
        rect {
          stroke:black;
          stroke-width:1;
          fill:#ccc;
        }
      </style>
      <script type="text/javascript">
        var text, rect
        var padding = 10
        function init() {
          text = document.getElementsByTagName("text")[0]
          rect = document.getElementsByTagName("rect")[0]
          adjustRect()
        }

        function adjustRect() {
          var bbox = text.getBBox()
          rect.setAttribute("x",bbox.x - padding)
          rect.setAttribute("y",bbox.y - padding )
          rect.setAttribute("width",bbox.width + 2*padding)
          rect.setAttribute("height",bbox.height + 2*padding)
        }

      </script>
      <g>
        <rect x="0" y="0" width="100" height="100" fill="red"></rect>
        <text x="50" y="50" font-size="14" fill="blue" text-anchor="middle">Hello</text>
      </g>
    </svg>
    <div>
      <button onclick="text.textContent='Goodbye';adjustRect()">change text</button>
    </div>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:05:28.127

使用 svg 过滤器绘制背景，这将适应文本的大小和位置。有关完整示例，请参[见此答案](https://stackoverflow.com/a/12263962/109374)。

# html - 您如何在列表中定位列表项项目符号？

> ID：13861781
> 
> 赞同：3
> 
> 时间：2012-12-13T14:20:03.017
> 
> 标签：html, css

您会看到我的 HTML 生成的数字/项目符号使左侧的元素看起来很难看

[http://i.stack.imgur.com/nAb8C.jpg](http://i.stack.imgur.com/nAb8C.jpg)

我试图在我的 CSS 中使用边距和填充都不起作用。帮助。

我希望数字显示距离图像左侧至少 5 像素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:21:51.350

添加`list-style-position: inside`到`ol`CSS 样式表中的标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:24:12.670

这就是默认浏览器样式表具有列表填充的原因。

我认为您删除了 OL 标签的填充。或者两个边距相邻（来自图像和 ol）。

你有代码吗？

# facebook - 使用 Facebook PHP SDK 作为链接发布到 Facebook，而不是作为 Facebook 对象发布

> ID：13861783
> 
> 赞同：2
> 
> 时间：2012-12-13T14:20:05.790
> 
> 标签：facebook, object, hyperlink

我正在尝试使用 Graph API 在经过身份验证的用户的墙上发帖。

我面临的问题是当我尝试分享帖子时，例如

[http://www.facebook.com/surendrakumar.in/posts/486644641373819](http://www.facebook.com/surendrakumar.in/posts/486644641373819)

对用户提要使用 Graph API

```
$story_url = "http://www.facebook.com/surendrakumar.in/posts/486644641373819"
$ret_obj = $facebook->api('/me/feed', 'POST',
array(
 'access_token' => $fb_access_token,
 'link' => $story_url,
 'message' => ($msg != "" ? $msg : "")
)); 
```

然后，在 Facebook 上分享的帖子只是一个链接，这不是预期的。

预期的 ：

[使用http://www.facebook.com/surendrakumar.in/posts/486644641373819](http://www.facebook.com/surendrakumar.in/posts/486644641373819)链接和帖子、预览等详细信息在墙上发布。

实际的：

只发布了一个链接。没有预览和任何其他信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:03:08.870

将链接放在消息文本中。

IE：

```
$story_url = "http://www.facebook.com/surendrakumar.in/posts/486644641373819"
$ret_obj = $facebook->api('/me/feed', 'POST',
array(
 'access_token' => $fb_access_token,
 'message' => ($msg != "" ? $msg."\n".$story_url : "".$story_url)
)); 
```

# opencl - 将 C 代码转换为 OpenCL

> ID：13861793
> 
> 赞同：1
> 
> 时间：2012-12-13T14:20:46.700
> 
> 标签：opencl

我正在尝试将用 C 编写的较小程序翻译成 openCL。我应该将一些输入数据传输到 GPU，然后使用连续的内核调用在设备上执行所有计算。

但是，由于使用的数据量很大，我必须避免在 CPU 和 GPU 之间来回传输数据，因此我在处理不适合并行化的部分代码时遇到了困难。

有没有办法在没有并行处理的情况下执行一些内核，所以我可以用它们替换这些代码部分？这是通过将全局工作大小设置为 1 来实现的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:44:58.723

是的，您可以在 OpenCL 设备上串行执行代码。为此，请像在 C 中一样编写内核代码，然后使用[clEnqueueTask()](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/clEnqueueTask.html)函数执行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:47:36.920

您可以管理两个**设备**：

*   用于高度并行化代码的**GPU**
*   用于顺序代码的**CPU**

这有点复杂，因为您必须按设备管理一个**命令队列**以在适当的设备上调度每个内核。

如果设备是同一**平台**的一部分（通常是 AMD），您可以使用相同的**context**，否则您将不得不为 CPU 创建一个更多的 context。

此外，如果您想要更细粒度的 CPU**任务并行化**，如果您的 CPU 支持，您可以使用**device-fission 。**

# apache-flex - 测试用例中的 UIComponent 为空

> ID：13861799
> 
> 赞同：1
> 
> 时间：2012-12-13T14:21:10.977
> 
> 标签：apache-flex, flexunit

我有这个 App.mxml：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx">
    <s:Button id="bt" label="click me"/>
</s:Application> 
```

而这个测试用例：

```
package flexUnitTests
{
    import flexunit.framework.Assert;

    public class AppTest
    {       
        [Test]
        public function testApp():void
        {
            var app:App = new App();
            Assert.assertNotNull(app.bt);
        }
    }
} 
```

但`app.bt`为空。我想访问按钮:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:50:13.217

简短的回答：

生命周期方法尚未在应用程序上运行；所以没有执行 createChildren() 方法来创建 bt 的子组件。

更长的答案：

主应用程序文件的情况稍微复杂一些，因为在显示层次结构中没有更高级别的 Flex 组件。我不清楚所有细节，但是..

我认为 Flex 编译器在设置这个组件（以及 Flex 框架）方面发挥了一些作用，这有助于使整个应用程序正常工作。本质上，您通过创建自己的组件实例来绕过这项工作。

# ios - 2个完全相同的iOS应用程序，只是数据库不同

> ID：13861800
> 
> 赞同：0
> 
> 时间：2012-12-13T14:21:17.710
> 
> 标签：ios, xcode

我实际上有一个在数据库上运行的应用程序，我想制作第二个应用程序，就像第一个应用程序一样，但数据库会有所不同。最好的事情是什么？重复的 xCode 项目是最好的解决方案吗？

谢谢大家，

本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:35:10.407

初始化一个 git 存储库并创建一个不同的分支，然后如果您在主存储库中有修改，您不必更改两个不同的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T16:45:39.570

只需有两个目标，并在运行时检查捆绑标识符以切换数据（基础）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:30:54.480

如果应用程序完全相同但数据库中的数据会不同，那么您应该只使用相同的代码库但具有不同的包标识符。为此，您可以复制 Xcode 项目，或者为了使事情更简单，您可以使用一个项目，但仅在为 App Store 构建之前更改包标识符。

# c# - YouTube 直接上传 - 内存不足异常

> ID：13861802
> 
> 赞同：6
> 
> 时间：2012-12-13T14:21:20.907
> 
> 标签：c#, windows-services, youtube-api

每当我尝试使用 YouTube API 通过直接上传上传大型视频时。我收到 OutOfMemory 异常。我能做些什么来摆脱这个吗？YouTube API 没有说明使用直接上传的视频大小限制。

我放弃了直接上传。现在我尝试了可恢复的上传方式。我的代码如下。

```
YouTubeRequest request;
YouTubeRequestSettings settings = new YouTubeRequestSettings("YouTube Upload", Client Key, "Username", "Password");
request = new YouTubeRequest(settings);
Video newVideo = new Video();

ResumableUploader m_ResumableUploader = null;
Authenticator YouTubeAuthenticator;

m_ResumableUploader = new ResumableUploader(256); //chunksize 256 kilobyte
m_ResumableUploader.AsyncOperationCompleted += new AsyncOperationCompletedEventHandler(m_ResumableUploader_AsyncOperationCompleted);
m_ResumableUploader.AsyncOperationProgress += new AsyncOperationProgressEventHandler(m_ResumableUploader_AsyncOperationProgress);

YouTubeAuthenticator = new ClientLoginAuthenticator("YouTubeUploader", ServiceNames.YouTube, "kjohnson@resoluteinnovations.com", "password");

//AtomLink link = new AtomLink("http://uploads.gdata.youtube.com/resumable/feeds/api/users/uploads");
//link.Rel = ResumableUploader.CreateMediaRelation;
//newVideo.YouTubeEntry.Links.Add(link);

System.IO.FileStream stream = new System.IO.FileStream(filePath, System.IO.FileMode.Open, System.IO.FileAccess.Read);

byte[] chunk = new byte[256000];int count = 1;
while (true) {
    int index = 0;
    while (index < chunk.Length) {
        int bytesRead = stream.Read(chunk, index, chunk.Length - index);
        if (bytesRead == 0) {
            break;
        }
        index += bytesRead;
    }
    if (index != 0) { // Our previous chunk may have been the last one
        newVideo.MediaSource = new MediaFileSource(new MemoryStream(chunk), filePath, "video/quicktime");
        if (count == 1) {
            m_ResumableUploader.InsertAsync(YouTubeAuthenticator, newVideo.YouTubeEntry, new MemoryStream(chunk));
            count++;
        }
        else
            m_ResumableUploader.ResumeAsync(YouTubeAuthenticator, new Uri("http://uploads.gdata.youtube.com/resumable/feeds/api/users/uploads"), "POST", new MemoryStream(chunk), "video/quicktime", new object());
    }
    if (index != chunk.Length) { // We didn't read a full chunk: we're done
        break;
    }
} 
```

谁能告诉我出了什么问题？我的 2 GB 视频没有上传。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T17:13:04.027

我收到 403 Forbidden 错误的原因是因为我没有传入：

1.  用户名密码
2.  开发者密钥

上面代码中的请求变量没有在上传中使用/发送。因此，我进行了未经授权的上传。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T14:28:31.233

很有可能你没有处理你的对象。确保所有一次性对象都在 using 语句中。

例如，这段代码会将一个大的 zip 文件上传到服务器：

```
try
{
    using (Stream ftpStream = FTPRequest.GetRequestStream())
    {
        using (FileStream file = File.OpenRead(ImagesZipFile))
        {
            // set up variables we'll use to read the file
            int length = 1024;
            byte[] buffer = new byte[length];
            int bytesRead = 0;

            // write the file to the request stream
            do
            {
                bytesRead = file.Read(buffer, 0, length);
                ftpStream.Write(buffer, 0, bytesRead);
            }
            while (bytesRead != 0);
        }
    }
}
catch (Exception e)
{
    // throw the exception
    throw e;
} 
```

# php - 检查 PHP cURL 服务器响应中的标头

> ID：13861804
> 
> 赞同：2
> 
> 时间：2012-12-13T14:21:26.337
> 
> 标签：php, curl

我一直在使用 PHP curl 从远程网站获取我需要的数据。这是我使用的 cURL 函数：

```
function get_content($adr)  
    {  
       $ch = curl_init();  

       curl_setopt ($ch, CURLOPT_URL, $adr);  
       curl_setopt($ch,CURLOPT_USERAGENT,'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.13) Gecko/20080311 Firefox/2.0.0.13');
       curl_setopt ($ch, CURLOPT_HEADER, 0);  

       ob_start();  

       curl_exec ($ch);  
       curl_close ($ch);  
       $string = ob_get_contents();  

       ob_end_clean();  

       return $string;      

    }  
$myrul = "http://remoteurl.com";
$result = get_content($myrul); 
```

但是如何获取响应的标头？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:25:30.743

如果我上面的评论是正确的，请更改：

```
curl_setopt($ch, CURLOPT_HEADER, 0); 
```

到：

```
curl_setopt($ch, CURLOPT_HEADER, 1); 
```

并根据您认为合适的方式解析返回的标头。请注意，仅在函数中更改上述内容将返回标头**和**内容，因此如果您只想**返回**标头：

```
function http_head_curl($url,$timeout=10)
{
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_TIMEOUT, $timeout); // in seconds
    curl_setopt($ch, CURLOPT_HEADER, 1);
    curl_setopt($ch, CURLOPT_NOBODY, 1);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $res = curl_exec($ch);
    if ($res === false) {
        throw new RuntimeException("cURL exception: ".curl_errno($ch).": ".curl_error($ch));
    }
    return trim($res);
} 
```

# c++ - 类中静态对象的重要性以及它们与一般对象的不同之处

> ID：13861814
> 
> 赞同：0
> 
> 时间：2012-12-13T14:22:11.597
> 
> 标签：c++, object, static

```
#include "B.h"

class A
{
    public :
        A()
        {
            s_b = new B();
            b = new B();
        }

       static B *s_b;

        B *b;
};

#include<iostream>

using namespace std;

#include "A.h"

int main()
{
    cout<<"hello";
} 
```

在我的项目中，我看到了上面的静态对象。但无法知道它的确切用途以及它们与一般对象有何不同。请帮助我找出我可以用 s_b 做什么，而 b 没有这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:23:31.780

一方面，`s_b`不会为每个创建的实例占用内存`A`，而`b`确实如此。`sizeof(A)`增加，`b`但不增加`s_b`。

A`static`在类的所有实例之间共享，因此它的作用类似于全局。你不需要一个对象来访问它，你可以`A::s_b`直接使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T14:26:08.467

静态成员和在命名空间范围内定义的对象或函数之间唯一真正的区别是访问。例如，静态数据成员可以是私有的，在这种情况下，它不能在类之外访问；静态函数成员可以访问私有数据成员，而命名空间范围内的函数则不能。

访问语法也不同：如果在类之外，您必须使用`ClassName::memberName`（或`classInstance.memberName`）访问成员。没有`using`其他方法可以使其可访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T14:42:22.367

generally speaking static members have to be initialized outside the declaration of the class except for constant int type if you are not using C++11.

So your code posted above is flawed. you need a statement like

```
 A::s_b = B(); 
```

outside the class A { ... }; To initialize an static member inside an non static constructor is wrong because the constructor is used to construct an object but the static member does not belong to the object but belong to the class. So these static members can not be modified through static member functions.

Think "class" as "human being" and an object of that "class" as a specific person, like "John Smith". So if you have a field, "salary". That should be a non-static field since each person has a different salary. But if you have field, "total_population", which should be a static member because this field semantically does not belong to one specific person but to the whole "human being".

# c# - 使用异步/等待，设置内容后 UI 冻结

> ID：13861815
> 
> 赞同：1
> 
> 时间：2012-12-13T14:22:12.470
> 
> 标签：c#, wpf, asynchronous, user-controls, async-await

有一些问题，不明白为什么会出现。我正在使用 .net 4.5 / C# 并尝试在异步函数成功后将 Content 设置为 ContentControl。我想在程序的那一部分中做的主要重点是在自己的 WPF 加载动画（Usercontrol IsLoading）和 PDF 内容（Usercontrol PDFDokument）之间切换。PDF 是在“PDFDokument”内部加载和呈现的，并且运行良好。如果需要更多信息，欢迎提出任何问题。为了让你知道，我会说我仍处于发展的初级阶段。（三年中的第一年:)）

```
 public ucPDFDocument PDFDokument = new ucPDFDocument();
    public ucLoading IsLoading = new ucLoading();

    protected async void lstSuchergebnis_DoubleClickItem(object sender, MouseButtonEventArgs e)
    {
        var tempAkte = ((ListViewItem)sender).Content as Akten;

        tbctrlResultPanel.SelectedIndex = 1;
        PDFDokument.IsDataChangeAllowed(false);
        contSwapControls.Content = IsLoading;

        await PDF(tempAkte);
        contSwapControls.Content = PDFDokument; **<-- after executing this line, the ui freezes**
    }

    private Task PDF(Akten paramAkte)
    {
        Akten _tempAkte = paramAkte;
        return Task.Run(() => { PDFDokument.LoadPDFDokument(_tempAkte.akt_ID, ref _DaKsManger); });
    } 
```

我尝试了使用异步加载的不同方法，但没有解决这个问题。

希望有人知道如何解决这个问题:)

非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:30:30.377

唯一的 async 是`PDF(...)`，你在等待。设置内容不是以异步方式执行的。您设置的内容发生在 UI 线程上。（这是唯一的方法，因为您正在修改 UI，这只能在创建它的线程上发生）

# ruby-on-rails - Rails 和渲染嵌套资源

> ID：13861816
> 
> 赞同：-1
> 
> 时间：2012-12-13T14:22:27.023
> 
> 标签：ruby-on-rails, ruby-on-rails-3

例如：我可以渲染 '/tags/:id/posts' 吗？

如果我尝试渲染 tag_posts_path(@tag) 或其他方式，我会收到此错误或类似错误：

```
Missing partial /tags/1/posts... 
```

在我的 routes.rb 我有这个：

```
resources :tags do
  resources :posts
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-11T14:59:51.933

我有点像你这样的东西

我实现了渲染正确的页面

```
 def create
    @project = Project.find(params[:project_id])
    @comment = @project.comments.build(comment_params)
    if @comment.save
      flash[:success] = "Chingon!"
      redirect_to @project
    else
      render 'projects/show'
    end
  end 
```

我的路线看起来像：

```
resources :projects do
    resources :comments, only: [:create, :destroy]
end 
```

Rails 期望您呈现的不是路径而是某些页面（例如“新”或“显示”）我只在渲染“项目/显示”的 ELSE 时遇到了问题。它似乎不是很正确的模板，因为它以原始形式呈现，没有任何 CSS，但我预计会出现错误。这是目前我可以为空注释呈现错误消息的唯一方法。

我只是通过绕过默认方式来显示错误并将其放在简单的 Flash 中，如下所示：

```
def create
    @project = Project.find(params[:project_id])
    @comment = @project.comments.build(comment_params)
    if @comment.save
        flash[:success] = "New comment here, bro"
        redirect_to @project
    else
        redirect_to @project
        flash[:error] = flash_error_message(@comment)
    end
end

def flash_error_message(arg)
    "The form contains #{arg.errors.count} error: #{arg.errors.full_messages.join(', ')}"       
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:21:51.737

如果我是正确的，我认为你正在寻找的是这样的

```
resources :tags do
  resources :posts
end 
```

您可以通过输入来查看生成的 URL 或路由类型`rake routes`

我不太确定，但是，重新阅读您的问题，我认为您的意思是说

`render 'some nested route'`

我提供的上述路线将允许你做这样的事情......

`render tag_posts_path(@tag)`这将在术语中寻找索引操作，因为它的帖子路径。再次，`rake routes`展示了这一切。

在谷歌上快速搜索嵌套路线会引导你到这个。

[嵌套路由](http://guides.rubyonrails.org/routing.html#nested-resources)

# jquery - jQuery 链接性能

> ID：13861817
> 
> 赞同：13
> 
> 时间：2012-12-13T14:22:28.490
> 
> 标签：jquery, performance, chaining

这些在速度方面是否相等？

```
$(this).attr("date",date);
$(this).attr("date_start",date_start);
$(this).attr("heure_start",heure_start); 
```

或者

```
$(this).attr("date",date).attr("date_start",date_start).attr("heure_start",heure_start); 
```

即使第二个更快，是否最好单独编写以使代码更具可读性？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-13T14:23:09.877

不，两者在速度上不相等。

`$(this)`每次构建一个新的 jQuery 对象。取决于是什么`this`，这可能是一个复杂的操作。

所以第二种形式更快。

请注意，为了便于阅读，您可以将其写为

```
$(this)
    .attr("date",date)
    .attr("date_start",date_start)
    .attr("heure_start",heure_start); 
```

如果由于中间有其他代码行而无法链接操作，则还可以缓存该对象。这是通常的：

```
var $this = $(this);
$this.attr("date", date);
$this.attr("date_start", date_start);
$this.attr("heure_start", heure_start); 
```

还要注意[attr](http://api.jquery.com/attr/)可以将地图作为参数：

```
$(this).attr({
    date: date,
    date_start: date_start,
    heure_start: heure_start
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T14:24:25.250

出于可读性目的，您可以将行拆分为

```
$(this)
    .attr("date",date)
    .attr("date_start",date_start)
    .attr("heure_start",heure_start); 
```

我知道这应该是一个评论，但间距作为一个没有意义。

# xcode - 不完整的实现视图控制器

> ID：13861820
> 
> 赞同：-1
> 
> 时间：2012-12-13T14:22:40.517
> 
> 标签：xcode, uiviewcontroller, implementation, incomplete-type

我正在 Xcode 中制作应用程序。这是我的第一个应用程序，我在 ViewController.m 文件中收到一条错误消息，显示“不完整的实现”。这是我收到错误的代码行：

```
@implementation ViewController : UIViewController; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:27:39.200

删除该行末尾的分号：

```
@implementation ViewController : UIViewController 
```

还要检查你的实现块中是否实现了类接口和协议中声明的所有方法，你的类符合

# sql - 如何处理 SQLite 查询中的计算列值？

> ID：13861825
> 
> 赞同：0
> 
> 时间：2012-12-13T14:22:56.353
> 
> 标签：sql, sqlite

有一个下表：

```
CREATE TABLE `foo`(
  `year` INT NOT NULL,
  `month` INT NOT NULL,
  `day` INT NOT NULL,
  `hour` INT NOT NULL,
  `minute` INT NOT NULL,
  `value` INT NOT NULL,
  PRIMARY KEY(`year`, `month`, `day`, `hour`, `minute`)
); 
```

我想编写一个查询，它将为每条记录添加 2 列：`date`用于标准的单列数据表示并`weekday`指示一周中的日期数。

我努力了

```
SELECT
    `year`, `month`, `day`, `hour`, `minute`, `value`,
    substr('000' || year, -4) || '-' || substr('0' || month, -2) || '-' || substr('0' || day, -2) AS `date`,
    strftime('%w', `date`) AS `weekday`
FROM
    `foo`; 
```

但这说

```
Error: no such column: date 
```

这是一个插图。实际上，我在计算其他列时有更复杂的逻辑，并且需要重用这些计算的列来计算其他列，并且只需在每个需要它的值的地方复制整个代码看起来很可怕。

有没有办法可以在计算另一个列值时解决计算列值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:24:18.470

使用子查询：

```
select f.*, strftime('%w', `date`) AS `weekday`
from (SELECT `year`, `month`, `day`, `hour`, `minute`, `value`,
             substr('000' || year, -4) || '-' || substr('0' || month, -2) || '-' || substr('0' || day, -2) AS `date`
      from foo
     ) t 
```

# mysql - MYSQL 循环只显示第一条记录

> ID：13861828
> 
> 赞同：0
> 
> 时间：2012-12-13T14:23:01.260
> 
> 标签：mysql, sequelpro

我正在尝试创建一个内部带有循环的过程，但是当我调用它时，只显示第一条记录并且不交互。

```
delimiter //
create procedure load_foo_test_data()
begin

declare v_max int unsigned default 10;
declare v_counter int unsigned default 1;

select COUNT(*) into v_max FROM emp;

start transaction;
while v_counter < v_max do
    select * from emp where emp_id = v_counter;
    set v_counter=v_counter+1;
end while;
commit;
end 
//
delimiter ; 
```

当我调用该程序时，它只显示第一条记录（ID 为 1）。

我尝试使用“select v_counter”，也只显示 1。

并尝试使用循环而不是 while 和相同的东西。

我正在使用 mysql 5.5 中的 sequel pro

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-13T14:48:19.087

我认为你应该使用

```
while ( ) {

    // do this

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-09-07T23:37:47.617

尝试使用

```
SET v_counter = 0;    
REPEAT
IF v_counter < v_max do THEN
    select * from emp where emp_id = v_counter;
    set v_counter=v_counter+1;
END IF;
UNTIL v_counter END REPEAT; 
```

# macos - 在 MacOS 上使用 gcc 4.5 从 src 构建 Qt 4.8.1

> ID：13861833
> 
> 赞同：0
> 
> 时间：2012-12-13T14:23:07.973
> 
> 标签：macos, qt, gcc, makefile

我有一个关于在 Mac 上使用 gcc 构建 Qt SDK 4.8.1 的问题。我需要使用 gcc 4.5 或更高版本，所以我使用 macports 安装了 mp-gcc45 包（所以尝试使用 mp-gcc47），选择了这个版本的 gcc，所以

```
gcc -v 
```

我说 gcc 版本 4.5.4 (MacPorts gcc45 4.5.4_6)

于是我从官网下载了QtSDK src，进行配置，第一步报错：

```
cc1plus: error: unrecognized command line option "-fconstant-cfstrings" 
```

也许它的愚蠢解决方案，但我从配置文件中删除了这个标志，所以我在拨打电话后收到错误：

```
g++: unrecognized option '-Xarch_x86_64' 
```

你能给我一个建议，如何使用这个版本的 gcc 构建 Qt？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:44:25.697

非 Apple gcc 将永远无法与任何版本的 Qt 一起使用。只有 Apple gcc 可以识别那些 Apple 风格的编译器选项。

你在 Mac 上被 gcc 4.2 卡住了。没有办法解决它。

# c# - linq 查询从 var B 的 y 列中共享 var A 中的 x 列

> ID：13861837
> 
> 赞同：0
> 
> 时间：2012-12-13T14:23:15.383
> 
> 标签：c#, linq

我想在 2 个`IQueryable`变量中共享 2 列。

我有以下两个变量：

```
var leavingDays = resourcePlanningsInWeek.Where(rp => rp.Project.IsLeave);

var employeeRostersInWeek = employeeRostersExcludedHolidays
                .Where(rp => rp.RosterDate >= startDate &&
                             rp.RosterDate <= endDate); 
```

我想做这样的事情：

> leaveDays.RosterHours / employeeRostersInWeek.DeploymentPlanned where leaveDays.PlanDate 等于employeeRostersInWeek.RosterDate

最后，我想总结所有的价值。

9/9 = 1

9/9 = 1

4,5/9 = 0,5

linq 查询的结果（所有值之和）= 2,5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:35:35.497

我认为应该这样做：

```
var result =
    (from l in leavingDays
        from r in employeeRostersInWeek
        where l.PlanDate == r.RosterDate
        select l.RosterHours / r.DeploymentPlanned
    ).Sum(); 
```

但是，如果`RosterHours`和`DeploymentPlanned`被定义为`int`s 并且您期望小数结果，那么您应该首先将其中一个转换为小数数据类型，如下所示：

```
var result =
    (from l in leavingDays
        from r in employeeRostersInWeek
        where l.PlanDate == r.RosterDate
        select Convert.ToDouble(l.RosterHours) / r.DeploymentPlanned
    ).Sum(); 
```

# php - 影响 JS 的 HTTP 与 HTML 字符集包含

> ID：13861847
> 
> 赞同：3
> 
> 时间：2012-12-13T14:23:38.270
> 
> 标签：php, http, character-encoding, header

我正在更改一个网站以使用来自 iso-8859-1 的 UTF-8 字符集。

当我改变这个：

`<meta http-equiv='content-type' content='text/html; charset=iso-8859-1' />`

至

`<meta http-equiv='content-type' content='text/html; charset=utf-8' />`

一切似乎都可以正常工作，并且发布表单以 UTF-8 格式发送数据。完美的。

但是当我设置这个

```
<?php header('Content-Type: text/html; charset=utf-8'); ?> 
```

javascript 包括我没想到的中断。显然，他们中有一些第 3 方代码使用 iso-8859-1 编码中的字符，这些字符不会正确更改为 utf-8。所以修复 javascript 代码本身很容易。

**HTTP 标头设置为 UTF-8 + HTML 内容类型设置为 UTF-8**

*   中断 javascript 包括
*   影响发布表单数据的编码

正如预期的那样，它暗示一切都在使用 UTF-8，但是，它破坏了 javascript 包含......它也只破坏了 FireFox 上的 js 包含。我在 IE、Chrome 和 Opera 上测试了这个配置，它运行良好。出于这个原因，我开始认为可能是 FireFox 有问题，这是浏览器中的一个错误（尽管 FireFox 的一个简单修复是将 chartset='iso-8859-1' 添加到脚本标签）。

**HTTP 标头设置为 iso-8859-1 + HTML 内容类型设置为 UTF-8**

*   不影响 javascript 包含
*   但确实会影响发布表单数据的编码

我一直认为 HTTP 标头应该覆盖 HTML 标头中定义的任何不一致的字符集。但是，似乎 JS 包括侦听 HTTP 字符集...而发布数据时忽略 HTTP 标头并侦听 HTML 字符集！？

**任何人都可以解释为什么以及它应该以这种方式发生还是可能是 FireFox 17.0.1 中的错误？**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-13T14:34:35.490

如果您可以控制缓冲，请使用[http://php.net/manual/en/function.utf8-encode.php](http://php.net/manual/en/function.utf8-encode.php)否则，只需更改 Javascript 并使其成为 UFT-8。

关于问题... php 标头控制服务器发送的输出，因此 PHP 将更改内容。该 META 标记只是浏览器的信息“小心，这是 UTF-8”。

# java - 提交后选择中的默认值仍然存在

> ID：13861848
> 
> 赞同：8
> 
> 时间：2012-12-13T14:23:38.630
> 
> 标签：java, spring, spring-mvc

我在创建一个包含在当前对象中的默认值时遇到问题。

该值已在字段中正确设置，但是当我提交表单时，默认值仍然存在，即使用户在列表中选择了另一个值...

这是我的控制器：

```
@RequestMapping(method = RequestMethod.GET)
public String createForm(final ModelMap modelMap){

    User user;

    user = new User();

    user.setGroup("HelpDesk");
    user.setName("John");

    ArrayList<String> groupList = new ArrayList<>();

    groupList.add("Admin");
    groupList.add("HelpDesk");
    groupList.add("GroupManager");
    groupList.add("Others");

    modelMap.addAttribute("user", user);
    modelMap.addAttribute("groupList", groupList);

    return "/user/user-add"; 
}

@RequestMapping(method = RequestMethod.POST)
public String createUser(@ModelAttribute("user") final User user, BindingResult result) {

    userValidator.validate(user, result, groupList);

    logger.info(user.getGroup()); //Will print "HelpDesk,Admin" for instance

    return "...";

} 
```

这是我的 JSP：

```
<table>
    <form:form method="POST" modelAttribute="user">

        <tr>
                <td>Name:</td>
                <td><form:input path="name"/></td>
                <td><form:errors path="name" cssClass="error" /></td>
            </tr>

            <tr>
                <td>Group:</td>
                <td><form:select path="group" items="${groupList}" multiple="single"/></td>
                <td><form:errors path="group" cssClass="error" /></td>
            </tr>

            <tr>
                <td colspan="3"><input type="submit" /></td>
            </tr>

        </form:form>
    </table> 
```

例如，如果我在选择列表中选择“管理员”，则在提交表单后，我将在用户的“组”属性中获得“帮助台，管理员”...

我究竟做错了什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:38:23.297

我可以看到您的“POST”方法或“onSubmit”方法吗？在您的 post 方法中，您必须将 User 对象指定为您的模型属性或命令。

# python - 导入语句导致缩进错误

> ID：13861849
> 
> 赞同：0
> 
> 时间：2012-12-13T14:23:40.893
> 
> 标签：python

相关代码很短：

```
class Gameserver:

def __init__(self):

    import modules.logic.game

        game.initGame()
        game.initGameInstance()
        game.start()
        game.myShowBase.run() 
```

然而，无论我做什么，我要么得到一个糟糕的缩进错误（仅在第一行调用游戏中的函数），要么根本没有调用某些函数。任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T14:26:58.653

我认为您需要按如下方式输入

```
class Gameserver:

    def __init__(self):
        import modules.logic.game
        game.initGame()
        game.initGameInstance()
        game.start()
        game.myShowBase.run() 
```

这不应该给你任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:28:37.123

Sam 的代码是正确的，但忽略了后续错误（未找到游戏）。

```
from modules.logic import game

class Gameserver:
    def __init__(self):
        game.initGame()
        game.initGameInstance()
        game.start()
        game.myShowBase.run() 
```

# java - 通过java从Web服务器下载文件

> ID：13861850
> 
> 赞同：0
> 
> 时间：2012-12-13T14:23:40.953
> 
> 标签：java

1.  我想从网络服务器下载临时文件
2.  我尝试的代码如下，但我只得到了写入输出文件的 HTML 内容
3.  但是url路径包含712个.gz格式的文件

这是我正在使用的代码：

```
import java.io.*;

public class SampleFile{
    public static void main(String args[]) throws IOException{
        BufferedInputStream in = new BufferedInputStream(new java.net.URL("http://xxx:9080/xxx/xxx/xxx/xxx/xxx.jsp?file=/apps/WasApps/xxx/templogs/xxx.log.xxx_Server1.2012-04-01.gz").openStream());
        FileOutputStream fos = new FileOutputStream("LocalPath\\koushik.txt");
        BufferedOutputStream bout = new BufferedOutputStream(fos,1024);

        int x=0;
        byte[] data = new byte[1024];
        while((x=in.read(data,0,1024))>=0) {
            bout.write(data,0,x);
        }

        bout.close();
        in.close();
    }
} 
```

# php - BBCodes 的正则表达式，如果 BB 代码在其内部（PHP）则不起作用

> ID：13861851
> 
> 赞同：0
> 
> 时间：2012-12-13T14:23:45.083
> 
> 标签：php, regex, bbcode

所以，对于基本的东西，我的正则表达式工作正常。

例如

`[b]text[/b]`变成`<b>text</b>`

但

`[b]te[b]x[/b]t[/b]`理想`<b>te[b]x</b>t[/b]` 情况下我想要它：`<b>te<b>x</b>t</b>`

如果我做一个不同的 bbcode，它可以工作：

`[b]te[i]x[/i]t[/b]`变成`<b>te<i>x</i>t</b>`

这是一个问题的原因，是因为我有一个引用 bbcode，有时人们最终会引用某人的帖子，而该帖子本身已经引用了其他人。

正则表达式如下所示：

```
$str = preg_replace("/\[b\](.*?)\[\/b\]/misS", "<b>$1</b>", $str); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:29:15.863

使用`\[(/?b)\]`并替换为`<$1>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:30:49.643

只要您愿意变得相当愚蠢，您就可以使用正则表达式轻松地做到这一点：不要担心找到匹配的对，只需替换任何看起来像开始或结束标签的东西：

```
$str = preg_replace("|\[(/?\w+)\]|iS", "<$1>", $str); 
```

如果这样的东西还不够好，那么正则表达式不是您的解决方案。它不能正确处理嵌套元素，因为它不是真正的解析器。

有一个[用于解析 BBCode 的 PHP 扩展](http://php.net/manual/en/book.bbcode.php)。如果您对健壮、正确的解析感兴趣，这可能是您要走的路（警告：我自己没有使用过）。

# r - 如何使用 R 中的网格图形绘制直方图？

> ID：13861854
> 
> 赞同：3
> 
> 时间：2012-12-13T14:23:53.003
> 
> 标签：r, r-grid

我想制作一个类似于`beanplot`或`violin`绘图的绘图，但不是对称形状，而是我想在中心线的不同侧绘制两个不同的分布。本文 [pdf] [http://www.jstatsoft.org/v28/c01/paper](http://www.jstatsoft.org/v28/c01/paper)中的图 4 类似。

我想`grid`在`R`. 任何指针都会很有用。我查看了`lattice`包和包中的`histogram`功能`lattice`，但这不是我想要做的。

任何帮助/指针表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T15:24:35.883

`panel.violin`在 Sarkar 的 lattice 包中，通过对函数进行相当简单的修改，您可以相当容易地获得半小提琴图。该函数中有四行可以在`grid.polygon`调用中更改，以从“双面”密度绘图更改为单面密度绘图。首先`require(lattice)`和`require(grid)`。然后键入`panel.violin`。我将向您展示“水平”更改：

```
require(grid)
panel.violin2  <-  
    # snipped all the arguments and processing

       grid.polygon(x = c(dx.list[[i]] ), 
   # Notice I removed: ... ,rev(dx.list[[i]]) 
               y = c(2*dy.list[[i]]    ), default.units = "native", 
   # Removed: ...  , -rev(dy.list[[i]])
               name = trellis.grobname(identifier, type = "panel", 
                 group = group), gp = gpar(fill = col, col = border, 
                 lty = lty, lwd = lwd, alpha = alpha)) 
```

也将其从 else{ ...} 子句的相应部分中删除。现在您可以使用 help(panel.violin) 中的示例运行它

```
bwplot(voice.part ~ height, singer,
       panel = function(..., box.ratio) {
           panel.violin2(..., col = "transparent",
                        varwidth = FALSE, box.ratio = box.ratio)
           panel.bwplot(..., fill = NULL, box.ratio = .1)
       } ) 
```

![在此处输入图像描述](../Images/ae3996590e4c1258c4ab507f084f0725.png)

如果您想要另一边的密度，您需要做的就是删除 dx.list[[i]] 和 dy.list[[i]] 并留在`rev(dx.list[[i]])`and中`-rev(dy.list[[i]])`。

# delphi - 指向数组中数据的指针。德尔福

> ID：13861855
> 
> 赞同：-2
> 
> 时间：2012-12-13T14:23:55.100
> 
> 标签：delphi

我想比较两个字节数组。 `byInputBuffer`是我由外部设备填充的数组。每次主循环迭代都有 256 个字节，并且总是放在`byInputBuffer`. 它是这样声明的：

```
byInputBuffer: array [0..1023] of byte; 
```

`DataArray`是一个动态声明大小的数组。所以数组声明如下：

```
DataArray  : Array of Byte; 
```

然后在代码大小中声明如下：

```
 SetLength(DataArray, DataLengthInt); 
```

其中 DataLengthInt 为 130952。

主循环从 0 迭代到 511，但是当 i=0 时，我在下面的代码中得到 BoolToStr(verify)=-1：

```
leftBytes := 256;

verify := CompareMem(@byInputBuffer, @DataArray[(i*256)], leftBytes); 
```

但是我检查了两个数组的内容，当 i=0 与前 256 个元素相等时。

我的问题是为什么 CompareMem 返回 -1？

其他使用的声明：

```
 leftBytes : Integer;
  verify : Boolean; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T15:25:34.547

您正在调用`CompareMem`将 的前 256 个字节与 .`byInputBuffer`的前 256 个字节进行比较`DataArray`。

然后，您将获取 的返回值`CompareMem`并将其传递给`BoolToStr`. 映射`False`到`'0'`和`True`到`'-1'`。

因此得出的结论是两个数组的前 256 个字节是相等的。因为`CompareMem`回来了`True`。

请注意，您在`CompareMem`返回的问题中的陈述`-1`显然是不正确的。这是我们困惑的很大一部分。编程时精度和准确性至关重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T15:15:45.157

> 我的问题是为什么 CompareMem 返回 -1？
> 
> 其他使用的声明：

```
leftBytes : Integer;
verify : Boolean; 
```

这很奇怪，因为布尔值是`True`or `False`，而不是数字。你如何得到 -1 值？

需要时，`False`始终转换/转换为零。其他所有值都不为假，因此为真。

所以，我怀疑你误解了你的调试，而 CompareMem 的结果很好。

# caching - 加速自动完成：使用什么数据结构将数据存储在缓存中

> ID：13861857
> 
> 赞同：0
> 
> 时间：2012-12-13T14:23:58.967
> 
> 标签：caching, data-structures, memcached

我想设计一个自动完成功能，而不是在数据库上搜索，我想预先进入缓存并搜索它。在 Java.util 包上执行此操作的最佳数据结构是什么？看起来 LinkedList 很适合它。有人设计过这样的系统吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T17:08:15.530

Java`LinkedHashMap`和`LinkedHashSet`类型对于构建缓存非常有用。它们的行为与常规散列容器一样，但如果您愿意，它们支持 LRU 缓存驱逐。这些容器的“链接”部分指的是有一个链接列表穿过它们，所以希望它们是您正在寻找的东西。

希望这可以帮助！

# user-interface - 仅调整纹理的一部分，OpenGL

> ID：13861858
> 
> 赞同：3
> 
> 时间：2012-12-13T14:23:59.097
> 
> 标签：user-interface, opengl, graphics, 2d, textures

我正在使用 OpenGL 开发 GUI。我正在使用这张图片来纹理我的按钮： ![在此处输入图像描述](../Images/e096f25c12670a55d8fecf7cde6dcfb1.png)

你不能很好地看到它，但它周围有一个浅色边框（2 像素宽）。

我想要实现的是拥有可调整大小的按钮，使其边界保持不变。根据这里给我的提示，在 StackOverflow 上我决定使用 9-cell-pattern，所以我将四边形分成 9 个部分，如下所示：

![在此处输入图像描述](../Images/0d6906d15b54d060069a42999c681471.png)

我真的很喜欢我在边界附近实现的效果，但问题在于中心（第 9 个）的四边形：

![在此处输入图像描述](../Images/1f44513e8fc71e1296ab9f7795c45aba.png)

我想像我一样重复或包裹纹理，但忽略边框。

所以我的问题是 - 有没有办法只用我现在使用的一种纹理来做到这一点？或者我应该创建第二个纹理，它会减少一个边框宽度并用这个纹理在中间渲染这个四边形？

另外我不知道是否有必要，但我在这里放了我的代码片段：

这是我用于平铺/包装纹理的代码：

```
switch(m_bTiling)
{
case true:
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S,
                     GL_REPEAT );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T,
                     GL_REPEAT );
    break;
case false:
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S,
                     GL_CLAMP );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T,
                     GL_CLAMP );
    break;
} 
```

这是绘制四边形的代码：

```
// Top left quad [1]
glBegin(GL_QUADS);
    // Bottom left
    glTexCoord2f(0.0f, 1.0-maxTexCoordBorderY);                     
    glVertex2i(pos.x, pos.y + m_borderWidth);

    // Top left
    glTexCoord2f(0.0f, 1.0);    
    glVertex2i(pos.x, pos.y);

    // Top right
    glTexCoord2f(maxTexCoordBorderX, 1.0);  
    glVertex2i(pos.x + m_borderWidth, pos.y);

    // Bottom right
    glTexCoord2f(maxTexCoordBorderX, 1.0-maxTexCoordBorderY);
    glVertex2i(pos.x + m_borderWidth, pos.y + m_borderWidth);
glEnd();

// Top middle quad [2]
glBegin(GL_QUADS);
    // Bottom left
    glTexCoord2f(maxTexCoordBorderX, 1.0 - maxTexCoordBorderY);             
    glVertex2i(pos.x + m_borderWidth, pos.y + m_borderWidth);

    // Top left
    glTexCoord2f(maxTexCoordBorderX, 1.0);
    glVertex2i(pos.x + m_borderWidth, pos.y);

    // Top right
    glTexCoord2f(maxTexCoordWidth - maxTexCoordBorderX, 1.0);   
    glVertex2i(pos.x + width - m_borderWidth, pos.y);

    // Bottom right
    glTexCoord2f(maxTexCoordWidth - maxTexCoordBorderX, 1.0 - maxTexCoordBorderY);
    glVertex2i(pos.x + width - m_borderWidth, pos.y + m_borderWidth);
glEnd();

// Top right quad [3]
glBegin(GL_QUADS);
    // Bottom left
    glTexCoord2f(1.0 - maxTexCoordBorderX, 1.0 - maxTexCoordBorderY);                   
    glVertex2i(pos.x + width - m_borderWidth, pos.y + m_borderWidth);

    // Top left
    glTexCoord2f(1.0 - maxTexCoordBorderX, 1.0);
    glVertex2i(pos.x + width - m_borderWidth, pos.y);

    // Top right
    glTexCoord2f(1.0, 1.0); 
    glVertex2i(pos.x + width, pos.y);

    // Bottom right
    glTexCoord2f(1.0, 1.0 - maxTexCoordBorderY);    
    glVertex2i(pos.x + width, pos.y + m_borderWidth);
glEnd();

// Middle left quad [4]
glBegin(GL_QUADS);
    // Bottom left
    glTexCoord2f(0.0, maxTexCoordBorderY);              
    glVertex2i(pos.x, pos.y + height - m_borderWidth);

    // Top left
    glTexCoord2f(0.0, maxTexCoordHeight - maxTexCoordBorderY);
    glVertex2i(pos.x, pos.y + m_borderWidth);

    // Top right
    glTexCoord2f(maxTexCoordBorderX, maxTexCoordHeight - maxTexCoordBorderY);           
    glVertex2i(pos.x + m_borderWidth, pos.y + m_borderWidth);

    // Bottom right
    glTexCoord2f(maxTexCoordBorderX, maxTexCoordBorderY);
    glVertex2i(pos.x + m_borderWidth, pos.y + height - m_borderWidth);
glEnd();

// Middle right quad [5] 
glBegin(GL_QUADS);
    // Bottom left
    glTexCoord2f(1.0 - maxTexCoordBorderX, maxTexCoordBorderY);                     
    glVertex2i(pos.x + width - m_borderWidth, pos.y + height - m_borderWidth);

    // Top left
    glTexCoord2f(1.0 - maxTexCoordBorderX, maxTexCoordHeight - maxTexCoordBorderY);
    glVertex2i(pos.x + width - m_borderWidth, pos.y + m_borderWidth);

    // Top right
    glTexCoord2f(1.0, maxTexCoordHeight - maxTexCoordBorderY);  
    glVertex2i(pos.x + width, pos.y + m_borderWidth);

    // Bottom right 
    glTexCoord2f(1.0, maxTexCoordBorderY);  
    glVertex2i(pos.x + width, pos.y + height - m_borderWidth);
glEnd();

// Bottom left quad [6]
glBegin(GL_QUADS);
    // Bottom left
    glTexCoord2f(0.0, 0.0);                     
    glVertex2i(pos.x, pos.y + height);

    // Top left
    glTexCoord2f(0.0, maxTexCoordBorderY);  
    glVertex2i(pos.x, pos.y + height - m_borderWidth);

    // Top right
    glTexCoord2f(maxTexCoordBorderX, maxTexCoordBorderY);   
    glVertex2i(pos.x + m_borderWidth, pos.y + height - m_borderWidth);

    // Bottom right
    glTexCoord2f(maxTexCoordBorderX, 0.0);  
    glVertex2i(pos.x + m_borderWidth, pos.y + height);
glEnd();

// Bottom middle quad [7]
glBegin(GL_QUADS);
    // Bottom left
    glTexCoord2f(maxTexCoordBorderX, 0.0);                          
    glVertex2i(pos.x + m_borderWidth, pos.y + height);

    // Top left
    glTexCoord2f(maxTexCoordBorderX, maxTexCoordBorderY);
    glVertex2i(pos.x + m_borderWidth, pos.y + height - m_borderWidth);

    // Top right
    glTexCoord2f(maxTexCoordWidth - maxTexCoordBorderX, maxTexCoordBorderY);    
    glVertex2i(pos.x + width - m_borderWidth, pos.y + height - m_borderWidth);

    // Bottom right
    glTexCoord2f(maxTexCoordWidth - maxTexCoordBorderX, 0.0);   
    glVertex2i(pos.x + width - m_borderWidth, pos.y + height);
glEnd();

// Bottom right quad [8]
glBegin(GL_QUADS);
    // Bottom left
    glTexCoord2f(1.0 - maxTexCoordBorderX, 0.0);                        
    glVertex2i(pos.x + width - m_borderWidth, pos.y + height);

    // Top left
    glTexCoord2f(1.0 - maxTexCoordBorderX, maxTexCoordBorderY);
    glVertex2i(pos.x + width - m_borderWidth, pos.y + height - m_borderWidth);

    // Top right
    glTexCoord2f(1.0, maxTexCoordBorderY);  
    glVertex2i(pos.x + width, pos.y + height - m_borderWidth);

    // Bottom right 
    glTexCoord2f(1.0, 0.0);
    glVertex2i(pos.x + width, pos.y + height);
glEnd();

// Middle middle quad [9]
glBegin(GL_QUADS);
    // Bottom left
    glTexCoord2f(maxTexCoordBorderX, maxTexCoordBorderY);                   
    glVertex2i(pos.x + m_borderWidth, pos.y + height - m_borderWidth);

    // Top left
    glTexCoord2f(maxTexCoordBorderX, maxTexCoordHeight - maxTexCoordBorderY);   
    glVertex2i(pos.x + m_borderWidth, pos.y + m_borderWidth);

    // Top right
    glTexCoord2f(maxTexCoordWidth - maxTexCoordBorderX, maxTexCoordHeight - maxTexCoordBorderY);        
    glVertex2i(pos.x + width - m_borderWidth, pos.y + m_borderWidth);

    // Bottom right 
    glTexCoord2f(maxTexCoordWidth - maxTexCoordBorderX, maxTexCoordBorderY);
    glVertex2i(pos.x + width - m_borderWidth, pos.y + height - m_borderWidth);
glEnd(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:24:09.530

好吧 - 我看到了你的问题。您正在为“中间中间”四边形使用 maxTexCoordBorderX（和 Y）的常量值。您需要随着尺寸的变化重新计算中心四边形的 UV 坐标（例如：width / (currWidth - 2 * borderWidth)），然后您可以将该纹理设置为始终重复，但是由于您将纹理坐标修改为 ui 元素调整大小，中心部分永远不会重复。

当然 - 如果您打算在未来某个时间点使用 VBO 或更高性能的东西，您可以简单地为每个片段定义两个片段着色器（每个都有自己的[sampler2D](http://www.opengl.org/wiki/Sampler_%28GLSL%29)对象；一个重复，另一个拉伸）平铺模式并使用“重复”着色器渲染所有角四边形和中间中间四边形，使用拉伸着色器渲染所有边缘四边形。这不需要重新计算并且应该非常快。

注意：您在这里绘制多个四边形，这不是一个好主意。我建议使用具有共享顶点的索引网格。这将最大限度地减少四边形边缘“撕裂”的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:34:08.163

如果你拉伸边缘/中心，你会没事的，但由于你是平铺的，你将不得不创建一个只有中心部分的第二个纹理。

请注意，如果您有边框的大小，这可以通过编程方式完成。您将中心的内容复制到一个新的二维数组中，然后将其上传到另一个纹理。

另一种解决方案（正如我在评论中所说）是将中间中间四边形的纹理坐标设置为与角的内部顶点相同的坐标。这样，中心四边形的纹理就被拉伸了。请注意，除非整个东西都包含在右上角的四边形中，否则这会在右上角的光亮上产生一些奇怪的拉伸。如果您想使用重复解决方案，您仍然会遇到问题。

如果您仍想重复中心部分并且不介意将整个渲染管道移动到未弃用的 OpenGL，那么 ananthonline 的答案会更好。如果您不想/不能将渲染代码移动到更现代的 OpenGL，那么纹理副本几乎是唯一的解决方案。

# c# - 在 'System.Windows.StaticResourceExtension 上提供值

> ID：13861866
> 
> 赞同：4
> 
> 时间：2012-12-13T14:24:19.963
> 
> 标签：c#, wpf, xaml

在`XAML`我尝试使用的页面内`IValueConverter`，它会引发错误。

*   在`IValueConverter`另一个程序集中，我添加了一个参考
*   没有设计时错误
*   我已经为 StaticResource 分配了 ResourceKey

在我的页面顶部，我有这个：

`xmlns:converters="clr-namespace:Converters;assembly=Converters"`

```
<Page.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="Styles/DialogStyles.xaml" />
        </ResourceDictionary.MergedDictionaries>
        <converters:NoWhiteSpaceConverter x:Key="NoWhiteSpaceConverter" />
    </ResourceDictionary>
</Page.Resources> 
```

然后我尝试稍后像这样使用它：

```
<TextBox Text="{Binding SomeText, Converter={StaticResource NoWhiteSpaceConverter}}" /> 
```

任何人都可以看到问题是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-13T19:03:23.090

确保在使用之前定义资源（按 Xaml 解析顺序）。最简单的方法是将其放入 App.xaml

另请参阅此处了解类似问题： http: [//www.paulkiddie.com/2011/10/the-importance-of-the-position-of-window-resources-element-in-wpf-xaml-markup/](http://www.paulkiddie.com/2011/10/the-importance-of-the-position-of-window-resources-element-in-wpf-xaml-markup/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-25T09:57:49.180

在我的情况下，资源在使用之前已正确定义，但对转换器的引用错误。

有问题的行是

```
...{Binding MyProperty, Converter={StaticResource local:MyConverter}} 
```

它应该没有命名空间别名

```
...{Binding MyProperty, Converter={StaticResource MyConverter}} 
```

其中`local`是包含转换器类的命名空间别名，并且`MyConverter`是在 XAML 中的资源中定义的键。

# android - 改变 android.graphics.Path 在画布上的位置

> ID：13861867
> 
> 赞同：2
> 
> 时间：2012-12-13T14:24:20.940
> 
> 标签：android, android-canvas, graphicspath

我已经浏览了几天，但我似乎无法找到一种方法来做到这一点。我希望你们中的一些人可能比我对 Android SDK 及其能力更有经验 :)

假设您在画布上绘制路径，其中最上方和最左侧的控制点 x=300 和 y=500（下图中的涂鸦）。我希望能够将其“矩形”的位置设置为画布坐标，例如 x=10 和 y=10

![在此处输入图像描述](../Images/195693de0a7c632ccfeba301313f0b08.png) 所以基本上，它是我感兴趣的路径的矩形*。*这个想法是“切割”这个区域并将其移动到给定位置（但我不想包括已经在画布上的底层绘图）。

**我试过的：**

将 Path 转换为[PathShape](http://developer.android.com/reference/android/graphics/drawable/shapes/PathShape.html)，然后转换为[ShapeDrawable](http://developer.android.com/reference/android/graphics/drawable/ShapeDrawable.html)。我可以倾斜 Drawable 的位置，但它太不精确，无法用来定位它。

```
ShapeDrawable sd = new ShapeDrawable(new PathShape(path, getWidth(), getHeight());
sd.getPaint().set(p);           
sd.setBounds(0, 0, getWidth(), getHeight()); 
```

getWidth() 和 getHeight() 分别获取*画布*的宽度和高度。

你能帮我想出一个新想法或纠正我的 ShapeDrawable 想法的方法吗？非常感谢您提前提供的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:35:48.123

[路径变换](http://developer.android.com/reference/android/graphics/Path.html#transform%28android.graphics.Matrix%29)看起来正是您所需要的。

# android - 如何在 Android 中使用 Zulu 时间解析 XML 日期？

> ID：13861868
> 
> 赞同：3
> 
> 时间：2012-12-13T14:24:22.920
> 
> 标签：android, datetime, xml-parsing, iso8601

如何在 Android 中解析根据 ISO 标准格式化的标准 XML 日期？例子：

```
2012-12-13T12:34:56.678Z 
```

请注意时区如何以“Z”（祖鲁时间）给出。

`SimpleDateFormat`不识别`Z`，当我尝试使用 XML 包时，我得到一个例外，即它们不包括在内。

> DatatypeConfigurationException：未找到提供程序 org.apache.xerces.jaxp.datatype.DatatypeFactoryImpl

我错过了什么吗？我假设解析和格式化 ISO 日期应该非常简单明了。

在 JavaScript 中，我们会这样写：

```
var isoDateString = new Date().toISOString(); //2012-12-13T12:34:56.678Z
var isoDate = new Date(isoDateString); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-13T18:48:05.007

请参阅 Android 参考：http: [//developer.android.com/reference/java/text/SimpleDateFormat.html](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

也可以始终使用 java 正则表达式解析来获取 DTG 的组件，但如果 Android API 提供此功能，则不建议这样做。

# mysql - 在数据库mysql中记录有限制

> ID：13861872
> 
> 赞同：0
> 
> 时间：2012-12-13T14:24:30.983
> 
> 标签：mysql, sql, syntax

我需要更改数据库中的记录，例如：

" `player ID`" 正好是 11 位数字，我做了`decimal(11,0)`，但我可以添加 3 或 4 位数字。

对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:28:09.180

尝试这个

```
alter table tablename modify playerID decimal(20,0) 
```

如果你想换成新的类型，试试这个

```
ALTER TABLE mytable ALTER COLUMN mycolumn newtype 
```

# c# - 带有 linq 查询错误的 gridview 数据绑定

> ID：13861873
> 
> 赞同：0
> 
> 时间：2012-12-13T14:24:32.233
> 
> 标签：c#, asp.net, linq, list, object

我正在尝试通过 linq 使用对象列表填充网格视图（我只想显示具有特定属性的某些对象）。

我得到错误...

> 异常详细信息：System.ArgumentNullException：值不能为空。参数名称：来源
> 
> 源错误：
> 
> 第 1364 行：returnInvoices = (List)Session["Invoices"]; 第 1365 行：第 1366 行：var partInvoices = from i in returnInvoices 第 1367 行：其中 i.PartNo == partNo 第 1368 行：选择新的源文件：c:\inetpub\wwwroot...\Form.aspx.cs 行：1366

```
protected void DoInvoicePopUp(string partNo)
{
    List<Invoice> returnInvoices = (List<Invoice>)Session["Invoices"];

    var partInvoices = from i in returnInvoices
                       where i.PartNo == partNo
                       select new
                       {
                           i.InvoiceID,
                           i.InvoiceNo,
                           i.InvoiceLine,
                           i.InvoiceDate,
                           i.OrderNo,
                           i.OrderLine,
                           i.OrderRel,
                           i.OrderLineItem,
                           i.OrderLineQty,
                           i.CustomerPO,
                           i.Serialized
                       };

    GridView3.DataSource = partInvoices;
    GridView3.DataBind();

    pnlBlanket.Visible = pnlInvoiceSearch.Visible = true;
} 
```

我不确定我做错了什么。List 中有 200 多个对象，那么它怎么可能是 null 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:30:12.913

看起来 Session["Invoices"] 是空的，如果它永远不应该是空的，你需要看看为什么会这样，如果它可以是空的，只需使用 as 关键字而不是强制转换，例如

```
List<Invoice> returnInvoices = Session["Invoices"] as List<Invoice>; 
```

Session["Invoices"] 可能仍然为 null，但它不会在强制转换时抛出 null ref 异常，它只会让您看到 returnInvoices 为 null，然后您可以检查并处理它。

**编辑**

我会将上述内容作为一般建议，但实际上从堆栈跟踪来看，partNo 为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:32:31.107

```
GridView3.DataSource = partInvoices.ToList() 
```

# php - 来自 textarea 和 mysql 的换行符不会出现在 html 中

> ID：13861877
> 
> 赞同：2
> 
> 时间：2012-12-13T14:24:41.963
> 
> 标签：php, html, mysql, textarea, line-breaks

如何使文本出现在 html 的差异行上？！当从 mysql 输出时，它们出现在我的文本区域的差异行上，也出现在 mysql 内的差异行上。但在网页中，它全部集中在一条线上。如何解决？

![在此处输入图像描述](../Images/1230c19422e177a01440fe57166e0ddb.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T14:25:35.370

使用[PHP nl2br](http://uk1.php.net/nl2br)函数：

```
$string = "hello \n world";
$string = nl2br($string); 
```

这是不言自明的：`\n`被替换为`<br />`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T14:25:35.650

采用：

```
string nl2br ( string $string [, bool $is_xhtml = true ] ) 
```

它可以处理`\n`, `\r`,`\r\n`或`\n\r`换行符并将它们替换为`<br />`

例子：

```
$yourText = "This is line one.\nThis is line two.";
$yourText = nl2br($yourText);
echo $yourText; 
```

这将导致：

```
This is line one.<br />This is line two. 
```

[链接到手册以获取更多信息。](http://php.net/nl2br)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T14:26:04.133

替换`Linebreaks`为`<br>`

```
str_replace(.N, '<br>', [element]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T14:26:47.037

您可以`<pre>..Your text..</pre>`为此使用标签。

# jquery - 如果 cookie 存在，则设置天气位置，如果不询问位置并将其保存在 cookie 中

> ID：13861878
> 
> 赞同：0
> 
> 时间：2012-12-13T14:24:43.263
> 
> 标签：jquery, cookies

```
//minimize latest news
window.document.querySelector("#ncWrapper > #nc > #action_ncMinMax").click();

//select location in weather
// $("a:contains('München')").click();

// check if variable is stored in cookie
var loc = $.cookie('loc_cookie');
if ( loc != null) {
    alert('loc existiert');
    var loc_exists = 1;
}
else { var loc_exists = 0; };

// only ask for location if no location is saved yet [functions inside if work]
if ( !loc_exists ) {
    var loc = prompt("Wählen Sie den Ort für den Wetterbericht?");
    alert('Sie haben ' + loc + ' als Ort für den Wetterbericht gewählt.');
};

    $("a:contains('" + loc + "')").click();

// save to cookie
$.cookie('loc_cookie', loc);
alert('loc in Cookie gespeichert'); 
```

谁能帮我？`var loc = $.cookie('loc_cookie');`似乎不起作用。我只是复制/粘贴它，希望你知道，我想让 js 做什么。

1.  查找 cookie -> 获取 cookie 并保存（如果存在）
2.  如果不存在，请询问位置 || 如果 if 什么都不做。
3.  获取位置。
4.  在 cookie 中保存位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:30:38.600

删除 if/else 块中的“var”关键字。通过添加它，您将创建一个新的局部变量。

```
// check if variable is stored in cookie
var loc = $.cookie('loc_cookie');
if ( loc != null) {
    alert('loc existiert');
    var loc_exists = 1;                 <- new instance of loc_exists
}
else { var loc_exists = 0; };           <- new instance of loc_exists 
```

应该

```
// check if variable is stored in cookie
var loc = $.cookie('loc_cookie');
var loc_exists;
if ( loc != null) {
    alert('loc existiert');
    loc_exists = 1;
}
else { loc_exists = 0; }; 
```

最后，使用布尔值可能更清楚：

```
if ( loc != null) {
    alert('loc existiert');
    loc_exists = true;
}
else { loc_exists = false; }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:30:21.803

您需要在页面中包含 jQuery Cookie 插件才能使用 $.cookie。默认情况下，它不包含在 jQuery 中。

[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:31:24.830

约翰尼莫普是对的。

你的问题是你已经声明了`loc_exists`你的声明里面`if`。

为了解决这个问题，将声明移到外面并在语句中设置它的值：

```
var loc = $.cookie('loc_cookie');
var loc_exists = 0;
if ( loc != null) {
    alert('loc existiert');
    loc_exists = 1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T01:24:45.953

这是我的代码。似乎工作得很好。不幸的是，网站在此期间添加了该功能^_^

```
// check if variable is stored in cookie
var loc = $.cookies.get('loc_cookie');
if ( loc != null) {
    alert('loc existiert');
    var loc_exists = 1;
}
else { var loc_exists = 0; };

// only ask for location if no location is saved yet [functions inside if work]
if ( !loc_exists ) {
    var loc = prompt("Wählen Sie den Ort für den Wetterbericht?");
    alert('Sie haben ' + loc + ' als Ort für den Wetterbericht gewählt.');
};

$("a:contains('" + loc + "')").click();

// save to cookie
$.cookies.set('loc_cookie', loc);
alert('loc in Cookie gespeichert'); 
```

# java - 如何从 netbeans 中的给定 WSDL（在 Axis2 中创建）创建 Metro WSIT 客户端？

> ID：13861895
> 
> 赞同：1
> 
> 时间：2012-12-13T14:25:41.220
> 
> 标签：java, netbeans, axis2, java-metro-framework, wsit

我有一个由 Axis 2 生成并声明安全策略的 WSDL 文件：

我按照 Metro 站点上的教程从 WSDL 中生成了 netbeans 中的 Web 服务客户端。该教程说要编辑 Web 服务属性以声明 KeyStore 等。但在我的情况下，我不能编辑任何安全选项，只有传输选项。

有人可以帮我解决这个问题吗？将 Axis2 用于客户端会更好吗？这有多难？对于安全通信，我们将使用密钥库。

WSDL 文件：

```
 <wsp:ExactlyOne>
            <wsp:All>
                <sp:AsymmetricBinding xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
                    <wsp:Policy>
                        <sp:InitiatorToken>
                            <wsp:Policy>
                                <sp:X509Token sp:IncludeToken="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy/IncludeToken/AlwaysToRecipient">
                                    <wsp:Policy>
                                        <sp:WssX509V3Token10/>
                                    </wsp:Policy>
                                </sp:X509Token>
                            </wsp:Policy>
                        </sp:InitiatorToken>
                        <sp:RecipientToken>
                            <wsp:Policy>
                                <sp:X509Token sp:IncludeToken="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy/IncludeToken/Never">
                                    <wsp:Policy>
                                        <sp:WssX509V3Token10/>
                                    </wsp:Policy>
                                </sp:X509Token>
                            </wsp:Policy>
                        </sp:RecipientToken>
                        <sp:AlgorithmSuite>
                            <wsp:Policy>
                                <sp:Basic128Rsa15/>
                            </wsp:Policy>
                        </sp:AlgorithmSuite>
                        <sp:Layout>
                            <wsp:Policy>
                                <sp:Strict/>
                            </wsp:Policy>
                        </sp:Layout>
                        <sp:OnlySignEntireHeadersAndBody/>
                    </wsp:Policy>
                </sp:AsymmetricBinding>
                <sp:Wss10 xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
                    <sp:Policy>
                        <sp:MustSupportRefKeyIdentifier/>
                        <sp:MustSupportRefIssuerSerial/>
                    </sp:Policy>
                </sp:Wss10>
                <sp:SignedParts xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
                    <sp:Body/>
                </sp:SignedParts>
                <sp:EncryptedParts xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
                    <sp:Body/>
                </sp:EncryptedParts>
            </wsp:All>
        </wsp:ExactlyOne>
    </wsp:Policy> 
```

# jersey - Dropwizard/Jersey - 运行测试时缺少公共方法的依赖项

> ID：13861897
> 
> 赞同：6
> 
> 时间：2012-12-13T14:25:54.747
> 
> 标签：jersey, dropwizard

我在使用 Dropwizard: 0.6.1 (jersey 1.15) 运行 resourceTest 时遇到了“缺少依赖项”异常，有没有人有过这种情况的经验？

**我的测试文件**：

```
public class MyResourceImplTest extends ResourceTest {
   ........
    @Override
    protected void setUpResources() throws Exception {
        addResource(new MyResourceImpl(new myConfiguration()));
    }
} 
```

**例外**：

```
Dec 13, 2012 2:10:41 PM com.sun.jersey.test.framework.spi.container.inmemory.InMemoryTestContainerFactory$InMemoryTestContainer <init>
INFO: Creating low level InMemory test container configured at the base URI http://localhost:9998/
Dec 13, 2012 2:10:42 PM com.sun.jersey.test.framework.spi.container.inmemory.InMemoryTestContainerFactory$InMemoryTestContainer start
INFO: Starting low level InMemory test container
Dec 13, 2012 2:10:42 PM com.sun.jersey.server.impl.application.WebApplicationImpl _initiate
INFO: Initiating Jersey application, version 'Jersey: 1.15 10/30/2012 02:40 PM'
Dec 13, 2012 2:10:42 PM com.sun.jersey.spi.inject.Errors processErrorMessages
SEVERE: The following errors and warnings have been detected with resource and/or provider classes:
  SEVERE: Missing dependency for method public javax.ws.rs.core.StreamingOutput com.****************.********(javax.servlet.http.HttpServletRequest,java.lang.String,java.lang.String) at parameter at index 0
Dec 13, 2012 2:10:42 PM com.sun.jersey.test.framework.spi.container.inmemory.InMemoryTestContainerFactory$InMemoryTestContainer stop
INFO: Stopping low level InMemory test container 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:09:32.153

**看起来泽西岛无法注入`HttpServletRequest`**

您的端点之一是这样配置的吗？

```
public StreamingOutput something(@Context HttpServletRequest request, String a, String b) {} 
```

如果是这样，您可能需要重新考虑您的设计，并选择

```
@Context
private HttpContext context;

public StreamingOutput something(String a, String b) {

  System.out.println("Request info "+context.getRequest().getAbsolutePath());

} 
```

这可能会产生更清洁的方法。只要您依赖`Class`资源注册，就可以保证每个请求都有一个新实例，这应该避免线程问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T09:24:00.970

我的问题是，我注入了一个 InMemory 容器支持的 HttpServletRequest，在这种情况下，我需要使用 jetty grizzlyWebTestContainer 或 jetty 作为测试容器。我也没有完全做到这一点，因为引入 jersey-test-framework-grizzly 确实给 dropwizard 本身带来了很多依赖冲突。我认为尝试解决所有冲突是不值得的，因为当我将来升级 dropwizard 时，这可能会再次发生。

在一天结束的时候，我最终得到了一份 jenkins 的工作，其中包含一些集成测试（在 python 中）来测试我的 Web 服务。例如。部署后，触发一些http请求，检查响应代码和响应内容。事实证明要容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-19T14:34:42.417

我解决这个问题的方法是定义一个不注入上下文的抽象基类资源，然后为您的实际服务实现一个小型派生类。

```
@Path("/contextMethod")
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public class MyResourceWithContext extends BaseResource {
    @Context
    private HttpServletRequest request;

    protected String getUserID()
    {
        return request.getRemoteUser();
    }
} 
```

当您运行测试时，您将实现一个备用派生类，仅用于测试，它不使用 HttpServletRequest。这里的额外优势是您的派生可测试类可以为上下文注入（例如）硬编码值以创建一些合适的测试场景。

# java - 无法通过循环运行到 getAllPassengers

> ID：13861898
> 
> 赞同：-4
> 
> 时间：2012-12-13T14:25:57.477
> 
> 标签：java, count

嘿，我想遍历飞机以获取所有乘客并将它们添加到计数中以显示所有飞机的所有乘客。但我收到一个错误：无法迭代数组或实例。

**这是方法：**

```
public int getAllPassengers()
    {
        int passengers = 0;
        for(Plane plane : plane.getPassengerNumber())
        {
            passengers += plane.getPassengerNumber();
        }
        return passengers;
    } 
```

**飞机**

```
import java.util.LinkedList;

public class Plane implements Comparable
{   
    private String flightNumber;
    public String airlineName;
    private double fuelRemaining;
    private int overdue;
    private int passengerNumber;
    private AIRPLANETYPE planeType;
    private boolean isLanded = false;

    public enum AIRPLANETYPE
    {
        AIRBUS("1"), CORPORATE("2"), PRIVATE("3");

        private String planeName;

        private AIRPLANETYPE(String planeName)
        {
            this.planeName = planeName;
        }

        public String getPlaneName()
        {
            return this.planeName;
        }
    }

    public Plane(String flightNumber, String airlineName,
           double fuelRemaining, int overdue, int passengerNumber, 
           AIRPLANETYPE planeType, boolean isLanded) 
    {
        this.flightNumber = flightNumber;
        this.airlineName = airlineName;
        this.fuelRemaining = fuelRemaining;
        this.passengerNumber = passengerNumber;
        this.overdue = overdue;
        this.planeType = planeType;
        this.isLanded = isLanded;
    }

    public Plane() 
    {

    }

    public String getAirlineName() {
        return airlineName;
    }

    public void setAirlineName(String airlineName) {
        this.airlineName = airlineName;
    }

    public void setOverdue(int overdue) {
        this.overdue = overdue;
    }

    public int getOverdue(){
        return overdue;
    }

    public String getFlightNumber() {
        return flightNumber;
    }

    public void setFlightNumber(String flightNumber) {
        this.flightNumber = flightNumber;
    }

    public double getFuelRemaining() {
        return fuelRemaining;
    }

    public void setFuelRemaining(double fuelRemaining) {
        this.fuelRemaining = fuelRemaining;
    }

    public int getPassengerNumber() {
        return passengerNumber;
    }

    public void setPassengerNumber(int passengerNumber) {
        this.passengerNumber = passengerNumber;
    }

    public AIRPLANETYPE getPlaneType() {
        return planeType;
    }

    public void setPlaneType(AIRPLANETYPE planeType) {
        this.planeType = planeType;
    }

    public boolean isLanded() {
        return isLanded;
    }

    public void setLanded(boolean isLanded) {
        this.isLanded = isLanded;
    }

    public int compareTo(Object arg0) {
        if((arg0 != null) && (arg0 instanceof Plane))
        {
            Plane p = (Plane) arg0;
            return (int)Math.ceil(this.overdue - p.getOverdue());
        }
        return 0;
    }
    public String toString() {
        return "Plane: flightNumber=" + flightNumber + "."
                + " airlineName=" + airlineName + "."
                + " fuelRemaining=" + fuelRemaining + " litres."
                + " overdue=" + overdue + " minutes."
                + " passengerNumber="+ passengerNumber + "."
                + " airplaneType=" + planeType +
                "hasLanded=" + isLanded+ ".\n";
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T14:28:53.100

`passengerNumber`是一个`int`。您需要遍历`Iterable`诸如`ArrayList`：

```
for (Plane plane: myPlaneList) {
  passengers += plane.getPassengerNumber();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T14:30:31.673

您正在尝试遍历 Plane 对象，但您的集合只是一个 int。您需要一组平面对象

```
int passengers = 0;
for(Plane plane : myPlanes)
{
    passengers += plane.getPassengerNumber();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-13T14:29:18.347

您正在尝试迭代 a `int`，您需要迭代 an[`java.util.Iterable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Iterable.html)

您发布的代码不包含回答此问题所需的信息。

您正在向我们展示 class `Plane`，但是为了拥有多个平面，您可能在代码中的其他位置有 a`List<Plane>`或 a 。`Plane[]`这是一个可行的示例：

```
public class Main {
  List<Plane> allPlanes; // Load in the omitted code somewhere else

  public int getAllPassengers()
  {
    int passengers = 0;
    for(Plane plane : allPlanes) // note the change
    {
        passengers += plane.getPassengerNumber();
    }
    return passengers;
  }
} 
```

# objective-c - 在自定义视图中调用方法

> ID：13861902
> 
> 赞同：0
> 
> 时间：2012-12-13T14:26:04.310
> 
> 标签：objective-c, ios, xcode

我正在创建一个简单的绘图应用程序，它带有一个在屏幕上绘制线条的自定义视图。我正在从我的视图控制器文件中调用我的自定义视图 .m 文件中的一个方法。我已经设置好了，所以它会自动完成我的方法，这意味着它知道它存在，但没有触发。

在我的自定义视图 BezierSigCapView.m

```
- (void)erase {
    path = [UIBezierPath bezierPath];
    [pointsArray removeAllObjects];
    [self setNeedsDisplay];
    NSLog(@"ERASE!");
} 
```

在我的 View Controller.h 文件中

```
@property (weak, nonatomic) BezierSigCapView *myView; 
```

在我的 View Controller.m 文件中

```
/// in viewDidLoad
BezierSigCapView *theView = [[BezierSigCapView alloc] init];
self.myView = theView;

/// my button code
- (IBAction)ClearButton:(UIBarButtonItem *)sender {
    [self.myView erase];
    NSLog(@"Should Erase");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:42:19.157

Kindly check if you have connected the `- (IBAction)ClearButton:(UIBarButtonItem *)sender;` to the button.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:46:50.753

@hermann 为我指明了正确的方向。我正在以编程方式和在界面生成器中创建视图。我删除了以编程方式创建的视图，并将 Outlet 作为属性连接到界面构建器上的视图。我还去掉了多余的“theView”。

```
//In view controller.h file
@property (strong, nonatomic) IBOutlet BezierSigCapView *myView;

//In view controller.m file
//in the implementation
@synthesize myView;

//I also removed the code below from the view controller.m file that was causing another issue
self.myView = [[BezierSigCapView alloc] init]; 
```

# row - 删除相邻重复替代代码而不删除

> ID：13861907
> 
> 赞同：0
> 
> 时间：2012-12-13T14:26:36.303
> 
> 标签：row, unique, abap, duplicate-removal

我想编辑程序，从而在`gt_ugtyt`由数据库表创建的表上循环。但是我有一个问题。

STDATE-STTIME-ENDDATE-ENDTIME（字段名称）

![在此处输入图像描述](../Images/4aefdd21b2926d11c05458b81a09b1ab.png)

我想求和（ENDTIME-STTIME）。它的意思是“工作时间”。但是您可以看到与 (STDATE-STTIME-ENDDATE-ENDTIME) 相同的行。因为我们在我们的多重生产过程中给出了两次确认（这并不重要。请注意）。我必须使用独特的变量。

我定义了一个临时表`gt_ugtyt_temp`并编写了以下代码

```
SORT gt_ugtyt_temp BY endat stdat sttim entim.

DELETE ADJACENT DUPLICATES FROM gt_ugtyt_temp COMPARING endat stdat sttim entim. 
```

但我想循环`gt_ugtyt`。我想读取和计算唯一行作为（STDATE-STTIME-ENDDATE-ENDTIME）。但我不想写

```
DELETE ADJACENT DUPLICATES FROM gt_ugtyt COMPARING endat stdat sttim entim. 
```

因为其他代码正在使用 gt_ugtyt 上的所有行。

有没有类似的代码（这不是真正的代码:)）：

```
READ UNIQUE ROWS FROM FROM gt_ugtyt COMPARING endat stdat sttim entim. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:00:25.113

我不清楚您想做什么，但是，您不能将行从本地临时表复制`gt_ugtyt`到本地临时表`lt_ugtyt_unique_rows`，然后对其进行所需的操作吗？

```
DATA:
  lt_ugtyt_unique_rows LIKE gt_ugtyt.

INSERT LINES OF gt_ugtyt INTO lt_ugtyt_unique_rows.

DELETE ADJACENT DUPLICATES FROM lt_ugtyt_unique_rows COMPARING endat stdat sttim entim.

*Sum what you need with lt_ugtyt_unique_rows 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T06:54:23.960

所以`gt_ugtyt_temp`包含唯一记录，并且`gt_ugtyt`包含所有记录，并且您想要汇总所有唯一记录`gt_ugtyt`？

这个伪代码怎么样：

```
loop at gt_ugtyt_temp assigning [line]
    loop at gt_ugtyt where stdate = [line]-stdate sttime = [line]-sttime (etc)
        [sum all values either changing [line] or put them in a new table]
    endloop.
endloop 
```

# forms - 在 Symfony2 中处理大型表单集合的最佳方法

> ID：13861908
> 
> 赞同：5
> 
> 时间：2012-12-13T14:26:43.467
> 
> 标签：forms, symfony

**将我的帖子编辑为类似于 Symfony Cookbook 并添加了一些代码。**

[http://symfony.com/doc/current/cookbook/form/form_collections.html](http://symfony.com/doc/current/cookbook/form/form_collections.html)

请注意，该部分中发布的实体/表单代码与上面链接的文档中的代码相同。

我有一个“任务”实体，它链接到一个“标签”实体。为简单起见，“任务”有一个字段“描述”，“标签”有一个字段“名称”。一个“标签” ”链接到一个“Task”，一个“Task”链接到多个“Tags”。

**实体：**

```
class Task
{
    protected $description;
    protected $tags;

    public function __construct()
    { $this->tags = new ArrayCollection(); }

    public function getDescription()
    { return $this->description;}

    public function setDescription($description)
    { $this->description = $description; }

    public function getTags()
    { return $this->tags; }

    public function setTags(ArrayCollection $tags)
    { $this->tags = $tags; }
}

class Tag
{
    public $name;
} 
```

目前，我使用“任务”表单中的“标签”集合来一次编辑所有标签，如 Symfony CookBook 中所述：

**形式：**

```
class TagType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('name');
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Acme\TaskBundle\Entity\Tag',
        ));
    }

    public function getName()
    {
        return 'tag';
    }
}

class TaskType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('description');

        $builder->add('tags', 'collection', array('type' => new TagType()));
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Acme\TaskBundle\Entity\Task',
        ));
    }

    public function getName()
    {
        return 'task';
    }
} 
```

但是当我创建一个大于一千个元素的“标签”集合时出现了一个问题。这时候，表单加载需要几秒钟的时间，有时会因为内存而崩溃。

```
$task = new Task();

$tag1 = new Tag();
$tag1->name = 'tag1';
$task->getTags()->add($tag1);
$tag2 = new Tag();
$tag2->name = 'tag2';
$task->getTags()->add($tag2);
//Create a couple thousand more item here ...

//The script crashes here, when the form is being created
$form = $this->createForm(new TaskType(), $task); 
```

错误不是来自 Doctrine，它可以很好地处理整个事情，而是来自 Symfony Form。

在这种情况下，使用 Symfony2 内置表单系统（带有集合）处理我的表单是个好主意，还是应该像过去一样使用原始 html 输入和服务器端验证/保存来处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:32:19.670

我想知道您的问题是否与表单部分无关，而是与标签对象的水合有关。如果您要求学说为大量对象补充水分，它将使用大量内存。您可能想研究另一种水合标签的方法，可能是 HYDRATE_ARRAY 而不是 HYDRATE_OBJECT。

# excel - 通过 VBA 使用 Excel 数据填充 Word 组合框

> ID：13861914
> 
> 赞同：0
> 
> 时间：2012-12-13T14:26:55.087
> 
> 标签：excel, vba, ms-word

我是 VBA 的新手，所以我已经为此苦苦挣扎了几天。

我在 Word 中有一个带有联系人的组合框，我还有一个带有一列（所有联系人的名称）的 excel 文件（contacts.xls）。当我打开 Word 文档时，宏必须用 excel 文件中的所有名称填写组合框。

是否可以向我发送一个适用于 2007 年单词的工作示例？看起来很简单，但就是不能让它工作......

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:33:51.777

如果您打算在 Word 中读取 Excel 文件，则必须打开它。它将使用如下代码：

```
 Dim oExcel As Object
   Dim oBook As Object
   Dim oSheet As Object

   'Start a new workbook in Excel
   Set oExcel = CreateObject("Excel.Application")
   Set oBook = oExcel.Workbooks.Open("FileName.xlsx") 
```

您可能还想去 VB 项目中的 Tools->References 并找到您机器上的任何 Excel 库（当然要检查它）。如果需要，有一些方法可以解决这个问题，但它更容易。

然后，您可以从工作簿中读取值：

```
oBook.Worksheets(1).cells(1,1) 
```

我不完全确定将其放入组合框中的语法是什么。在 word 中的 vbe 中查找“组合框对象成员”。会有一个列表属性，或类似的东西。

对不起，我现在在一台 linux 机器上，所以我不能为你调试确切的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:42:58.230

我现在有更完整的代码给你：

```
Option Explicit

Sub TestDropDownFromExcel()

    Dim counter As Long
    Dim xlApp As Excel.Application
    Dim xlBook As Workbook
    Dim oCC As ContentControl

    Set oCC = ActiveDocument.ContentControls(1)

    Set xlApp = CreateObject("Excel.Application")
    Set xlBook = xlApp.Workbooks.Open("C:\Path\To\MyFile.xlsx")

    If xlBook Is Nothing Then
        Exit Sub
    End If

    oCC.DropdownListEntries.Clear

    For counter = 1 To 10
        oCC.DropdownListEntries.Add Text:=xlBook.Worksheets(1).Cells(counter, 1), Value:=CStr(counter)
    Next counter

    xlApp.Visible = True

    Set xlBook = Nothing
    Set xlApp = Nothing 

End Sub 
```

请注意，这里几乎没有进行错误检查。此外，如果您不希望用户看到它，而不是最后调用 .Visible ，您可以简单地调用 .Close （对于最终项目，这可能是更可取的。deferencing (= Nothing) 是一个很好的做法有,但VBA会在执行结束时自动清理.显然我假设你想要第一个下拉菜单(ContentCONtrols(1)),但这可能不是真的.

# c# - 如何使用带有反射的递归来研究具有循环依赖关系的类实例？

> ID：13861916
> 
> 赞同：2
> 
> 时间：2012-12-13T14:27:00.777
> 
> 标签：c#, serialization, reflection, recursion

考虑您有以下课程：

```
Class P  
{  
     string m_Name;  
     P m_spouse;  
} 
```

和 P
的两个实例：汤姆的配偶是安妮
b。安妮的配偶是汤姆

现在我正在尝试通过反射来调查 Tom 的实例以进行序列化。当我注意到值类型时，我会以 Xml 格式写出它们的名称和值。问题是当我到达调查引用类型（例如汤姆的配偶）时，因为随后对 Annie 进行了递归调用，但在调查 Annie 时，我很快就会再次调查她的配偶 Tom，这是不正常的，因为这永远不会结束。

**问题**

1.  任何想法如何实现这种最终会停止的递归？
2.  考虑我需要自己实现序列化功能。
    你认为我可以序列化一个实例而不使用反射来调查它吗？
    有没有办法在没有反射的情况下序列化实例？

非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:56:05.747

这是一个基本算法......（伪代码）

```
function examine(m,examined_so_far=[])
{
    result_stuff = something_special
    i = get_unique_identifier(m)
    if i in examined_so_far
        return result_stuff?
    examined_so_far.append(i)

    attributes = get_attributes(m)

    for att in attributes:
        result_stuff.add(examine(att, examined_so_far))
    do_processing(result_stuff)
    return result_stuff
} 
```

用英语：

维护一份你已经看过的东西的清单。这可以通过使用唯一标识符初始化每个 M 实例，或者通过使用实例的内存位置来完成。

说乔和苏是共同的配偶，你打电话给`examine(joe)`

级别 1：result_stuff 被初始化（我不知道你想要什么），joe 的标识符被添加到列表中

级别 2：检查 sue 并将她的标识符添加到列表中

级别 3：检查 joe 并且他的标识符已经在列表中，因此返回了一些结果内容

级别2：从级别3获取结果，进行一些处理并返回相关结果

级别 1：从级别 2 等获取结果

关于你的第二个问题...

我对 C# 非常生疏，所以我不确定是否有更好的方法来做到这一点，但这是我的第一个想法：为什么不维护一个应该为每个类序列化的属性名称数组？我确定您可以通过名称访问属性。就像在 Python 中一样，以下两个语句是等价的：`a = some_object.foo`和`a=some_object.__getattribute__('foo')`

然后你要做的是让 M 的 serailize-array 包含一个带有信息的条目，`'spouse'`然后在序列化它时你将遍历数组。像这样的东西（也是伪代码......）：

```
serial_rep = '{'
for att in self.serialize_array:
    serial_representation += att + ':'
    serial_representation = serialize(obj.__getattribute__(att))
    serial_representation += ','
remove_last_comma(serial_representation)
serial_rep += '}' 
```

那么当调用`serialise`一个属性时，你只需要检查它是否有一个 serialise_array 或者它是否是一个基本类型。

例如：

```
if type(obj) == int:
    return obj
if type(obj) == str:
    return '"'obj+'"'
if obj.has_attribute(serialise_array):
    serial_rep = '{'
        for att in self.serialize_array:
            etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:01:37.577

这里不需要反思。你所拥有的不是循环依赖（在 c# 中很难拥有它们）。你所拥有的是一个循环的类结构。

解决序列化问题的几种方法，最好的方法可能是标记配偶属性 [XmlIgnore] 并添加另一个配偶 ID（或姓名或任何用于识别配偶数据的方法）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:33:35.250

你可以主张一些统治地位..

```
Class M : P
{
W m_spouse
}
Class W : P
{
M m_spouseof
} 
```

# asp.net-mvc-4 - 自定义错误在我的 MVC 4 应用程序中不起作用

> ID：13861919
> 
> 赞同：4
> 
> 时间：2012-12-13T14:27:13.693
> 
> 标签：asp.net-mvc-4

我在我的应用程序中启用了自定义错误。网络配置有一个条目如下：

```
<customErrors mode="On" defaultRedirect="~/Views/Shared/Error.cshtml">
  <error statusCode="403" redirect="~/Views/Shared/UnauthorizedAccess.cshtml"/>
  <error statusCode="404" redirect="~/Views/Shared/FileNotFound.cshtml"/>
</customErrors> 
```

我也将该`HandleError`属性应用为全局操作过滤器。我的`FilterConfig`内容如下：

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
        {
            filters.Add(new HandleErrorAttribute());
        } 
```

此外，文件夹`Error.cshtml`中定义了默认值。`~/Views/Shared`

然而，我的应用程序显示了丑陋的 IE 默认错误页面。

**更新**

我检查了自定义错误页面在除 IE 之外的所有其他浏览器中都显示正常。这是怎么回事？

**进一步更新**

刚找到这篇文章。[http://perishablepress.com/important-note-for-your-custom-error-pages/](http://perishablepress.com/important-note-for-your-custom-error-pages/)

它说 IE 希望自定义错误页面的大小至少为 512 字节。如果您的自定义错误页面小于该大小，它将抛出自己的丑陋错误页面。

**最新更新** 现在一切正常，因为我增加了错误页面的有效负载。但是，对于未处理的异常，只会显示默认的 Error.cshtml 页面。对于其他状态代码，我得到一个 ASP.NET 404 说它无法在我在 web.config 文件中指定的位置找到我的自定义错误页面。我确实有自定义错误页面，并且它们具有我在 web.config 中指定的确切名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-01T22:57:05.253

您需要提供通过控制器和操作的路由，而不是设置 (*.cshtml) 剃须刀文件的路径。

这是我按预期工作的方式

```
<customErrors mode="Off" defaultRedirect="/home/error">
  <error statusCode="404" redirect="/home/notfound" />
</customErrors> 
```

在我的家庭控制器中，我有一个名为 Error 的动作和另一个名为 NotFound 的动作

```
[AllowAnonymous]
public class HomeController : Controller
{   
  public ActionResult Error()
  {
    var qs = HttpUtility.ParseQueryString(Request.Url.Query);
    var errorPath = qs["aspxerrorpath"];

    return View(model: errorPath);
  }

  public ActionResult NotFound()
  {
     return View();
  }

...
} 
```

# javascript - 输入占位符脚本适用于没有 JQuery 的 IE 8 密码字段？

> ID：13861921
> 
> 赞同：0
> 
> 时间：2012-12-13T14:27:26.177
> 
> 标签：javascript, html, internet-explorer, placeholder

IE问题中的另一个占位符......

我目前正在使用这个 Placeholders.js 脚本：[https ://github.com/jamesallardice/Placeholders.js](https://github.com/jamesallardice/Placeholders.js)

不幸的是，与所有其他“更新输入字段的值”占位符 polyfill 一样，它在密码字段上失败，因为密码字段的值显示为星号。我需要它在密码字段上工作，所以这是一个交易破坏者。

这是针对 JSP 应用程序，而不是 Javascript 应用程序，并且 Javascript 的使用很少。如果可以的话，我宁愿没有 JQuery 依赖项。然而，我能找到的几乎所有占位符 polyfill 都是 JQuery 插件。

有没有人找到一个没有 JQuery 的情况下处理这种情况的脚本？我宁愿不自己写，因为有很多边缘情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:34:30.020

您可以在 SO 上找到许多示例，这是一个似乎适用于许多人的示例。对于所有输入类型：

[在 IE 中显示密码字段的占位符文本](https://stackoverflow.com/questions/6052544/showing-placeholder-text-for-password-field-in-ie)

# mongodb - MongoDB 会丢失数据而 CouchDB 不会？

> ID：13861924
> 
> 赞同：2
> 
> 时间：2012-12-13T14:27:46.947
> 
> 标签：mongodb, security, couchdb, database, nosql

我正在阅读一篇关于 MongoDB 和 CouchDB 的文章，发现 MongoDB 可能会丢失数据，但 CouchDB 在某种程度上是稳定的，不可能丢失任何数据。

> Redis 和 mongodb 用户可能会惊讶地发现，默认情况下，如果进程崩溃或关闭，他们可能会丢失您的数据。

[http://java.dzone.com/articles/should-i-use-mongodb-couchdb](http://java.dzone.com/articles/should-i-use-mongodb-couchdb)

在 MongoDB 中有解决这个问题的方法，但我是否正确理解：CouchDB 无需任何配置就更耐用、更稳定？因此，如果 CouchDB 崩溃，或者说在 CouchDB 系统的更新过程中炸弹会爆炸 => 永远不会丢失数据？

我只是想知道为什么。是因为 CouchDB 是用 Erlang 编写的吗？还是因为 CouchDB 使用了 MVCC？有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T14:48:32.777

> 在 MongoDB 中有解决这个问题的方法，但我是否正确理解：CouchDB 无需任何配置就更耐用、更稳定？因此，如果 CouchDB 崩溃，或者说在 CouchDB 系统的更新过程中炸弹会爆炸 => 永远不会丢失数据？

我不确定 CouchDB 的细节，但是快速的 Google 搜索显示，默认情况下 CouchDB 实际上是最终一致[的](http://en.wikipedia.org/wiki/Eventual_consistency)（[http://guide.couchdb.org/draft/consistency.html，http://en.wikipedia.org/wiki](http://guide.couchdb.org/draft/consistency.html) [/Eventual_consistency](http://en.wikipedia.org/wiki/Eventual_consistency) ) 其中 MongoDB 被描述为具有强一致性。非 ACID 技术（包括 MongoDB）没有大多数属性来确保数据的完全持久性，即直接写入磁盘和立即复制。

但是，您必须记住，MongoDB 可能会丢失数据，因为它不直接写入磁盘（这就是使 MySQL 之类的技术“慢”的原因，尽管从技术上讲，SQL 技术也可能由于磁盘写入的执行方式而丢失数据；您可以'不写入未通电的磁盘），但窗口就像 60 毫秒或在完全失败的情况下可能会丢失的东西，如果您将命令发送到多个节点，则该 60 毫秒窗口发生的机会相同数据中心，变得相当远程，因此 MongoDB 不像写入`/dev/null`.

所以 CouchDB 永远不会丢失数据？不，它可以。

基本上你所说的链接对我来说似乎有点偏见，它没有考虑最终的一致性实际上是什么，也许它是由同一个人在这个视频上写的：[http ://www.youtube.com/watch?v =b2F-DItXtZs](http://www.youtube.com/watch?v=b2F-DItXtZs)

### 编辑

如果您想对此进行测试，我可以为您炸毁您的服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:00:13.513

MongoDB 旨在设置在至少两个节点的[副本集中。](http://www.mongodb.org/display/DOCS/Replica+Sets)只应在开发环境中运行单个节点。

当您有一个副本集并且其中一个节点崩溃时，其他节点将继续记录所有数据更改。当崩溃的节点恢复时，节点将自动同步。崩溃的节点将从其他节点接收所有丢失的更改，包括那些在崩溃之前无法写入磁盘的更改。

当您设置运行在不同物理服务器上的多个节点的副本集时，MongoDB 变得非常耐用。

# php - 在同一个文件中将变量从按钮传递给 js

> ID：13861931
> 
> 赞同：0
> 
> 时间：2012-12-13T14:27:56.003
> 
> 标签：php, unlink

此代码应该将按钮 delFunction 中的变量传递给 delFunction 脚本并删除与按钮关联的文件。它没有传递变量。我在脚本下方插入两个警报语句，它们在结果页面上显示为命令中没有变量名的文本。我搜索了stackoverflow，但我尝试过的每一种技术都不起作用。请帮助...大卫

```
<!DOCTYPE html>
<html>
<head>
<title>Mark Nutt</title>
<script>
function delFunction(source)
{
    window.location = "?source="+source;
}
</script>
<?php
////////////////////////////////////
      echo "alert('copy({$_GET['source']},{$_GET['source']})');";
      echo "alert('unlink({$_GET['source']})');";
if(isset($_GET['source'])){
   if(unlink($_GET['source'])){
      echo '<script language="javascript">';
      echo "alert('{$_GET['source']} detached from email!');";
      echo'</script>';
   }

}
?>
</head>
<body>
<a href="#" onclick="MyWindow=window.open('http://www.davidsdomaindesign.com/marknutt/emails/emails.php','_self'); return true;"><font size="2" color="white"><input type="button" value="I'm Done" /></font></a><br />
<?php
 $files = glob("/home/davidsdo/public_html/marknutt/emails/attach/*.*");
 asort($files);
 for ($i=0; $i<count($files); $i++)
 {$num = $files[$i];
  $file = substr($num,50);
?>
<button onclick="delFunction('<?php echo $source='/home/davidsdo/public_html/marknutt/emails/attach/'; echo $file; ?>')" >
<input type="button" value="<?php echo $file ?>" /><br /><img src="http://www.davidsdomaindesign.com/marknutt/emails/attach/<?php echo $file ?>" alt="<?php echo $file ?>" width="125" height="125">
</button>
<?php
 }
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:32:20.663

不要在 echo 语句中设置变量，而是尝试将按钮的定义更改为此。

```
$source = '/home/davidsdo/public_html/marknutt/emails/attach/' . $file;
<button onclick="delFunction('<?php echo $source; ?>')" > 
```

# javascript - 如何使用 Metro 应用程序 (Windows 8) 在 Facebook 用户的墙上发帖？

> ID：13861932
> 
> 赞同：5
> 
> 时间：2012-12-13T14:27:58.300
> 
> 标签：javascript, facebook, facebook-graph-api, windows-8, facebook-javascript-sdk

我正在使用 HTML5 和 JavaScript 创建一个适用于 Windows 8 的 Metro 应用程序，它需要在用户的墙上贴一张图片。

我正在使用 Windows 身份验证代理来获取访问令牌，这样我就可以获取用户数据。

问题是我不能在 Metro 应用程序中使用 Facebook SDK for Javascript，其中包括调用 Graph Api 来发布帖子。

那么，没有这个，我怎么能发布一些东西呢？我可以使用 Windows 建议的共享数据的方式吗？那是使用数据包（[http://msdn.microsoft.com/en-us/library/windows/apps/hh465261.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465261.aspx)）

如果可能的话......我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T17:55:25.460

您不需要使用 Facebook Javascript SDK。如果您已经获得令牌，那么您已经成功了一半。

您应该使用访问令牌将 HTTP POST 发送到“https://graph.facebook.com/USER_ID/photos”（您必须具有 publish_stream 权限）。[Facebook API 文档 > 照片](https://developers.facebook.com/docs/reference/api/photo/#create)

要发送 HTTP 帖子，您可以使用[WinJS.xhr()](http://msdn.microsoft.com/en-us/library/windows/apps/br229787)或 jQuery.ajax() 如果您使用的是 jQuery。

# c# - 根据数组中的随机项分配按钮标签

> ID：13861935
> 
> 赞同：2
> 
> 时间：2012-12-13T14:28:17.270
> 
> 标签：c#, arrays, button, random, tags

```
{
  var buttonnameString = new List<string> { "button1", ... , "button12" };
  for(int i = 0; i < 12; i++)
  {
    // Random car assignment to button 
    Random myRandom = new Random();
    var carString = new List<string> { "Camaro", ... , "Model T" };
    int index = myRandom.Next(carString.Count);
    var name = carString[index];
    carString.RemoveAt(index);
    Tag = name.ToString(); 
  }
} 
```

在此先感谢您提供的任何帮助。我是 C# 一年级的学生，所以我知道我有很多东西要学，但我已经用尽了我的谷歌技能，试图让它发挥作用。我正在尝试做的是制作一个匹配的程序。该程序将有 12 个按钮，分别标记为“button1”、“button2”……等。单击按钮时，它将显示它的标签，该标签是从随机数组中提供的。我已经获得了随机功能来仅分配一个按钮标签。我挂断的地方是对组框中的所有按钮重复此操作。我已经尝试过 foreach 场地，但无法成功运行。最后我也尝试了其他方法。下面是我停下来的地方，因为我不确定要去哪里。我的两个主要问题是

1.  如何将随机字符串分配给通配符按钮标签？
2.  将 12 个汽车名称随机分配给 12 个按钮的最佳方法是什么？使用两个数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:49:37.573

试试这个：

```
{
  var numOfButtons = 12;
  var matchingButtonIndex = 0;
  // Random car assignment to button 
  Random myRandom = new Random();
  var buttons = new List<Button> { button1, ... , button12 };
  var carString = new List<string> { "Camaro", ... , "Model T" };
  while (matchingButtonIndex < numOfButtons)
  {
    int index = myRandom.Next(carString.Count);
    var name = carString[index];
    if (name != null)
    {
      buttons[matchingButtonIndex].Tag = name;
      carString[index] = null;
      matchingButtonIndex = matchingButtonIndex + 1;
    }
  }
} 
```

请注意，我已将按钮名称数组更改为按钮数组。`carString`当我发现未使用的汽车名称时，我也清空了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:33:34.703

当您遍历表单的控件时，遍历按钮很容易

```
var carString = new List<string> { "Camaro", "Mini Cooper", "Porsche 944", "Ford Focus", "Chevy Blazer", "Model T", "Camaro", "Mini Cooper", "Porsche 944", "Ford Focus", "Chevy Blazer", "Model T" };

    foreach(Control c in Controls)
    {
        if (c is Button)
        {
            Random myRandom = new Random();
            int index = myRandom.Next(carString.Count);
            c.Tag = carString[index];
        }
    } 
```

# android - 在非 UI 线程上对 Java 的 JNI 回调

> ID：13861936
> 
> 赞同：1
> 
> 时间：2012-12-13T14:28:19.277
> 
> 标签：android, multithreading, android-ndk, java-native-interface

我在 java 中创建了一个线程，它使用 JNI 将数据传递给旧版 C++。C++ 代码在单独的线程上执行一些任务然后返回，此时我想从 JNI 回调到 Java 线程而不是主接口线程。代码似乎可以毫无错误地构建和运行，但是当调用 CallVoidMethod 以回调 Java 时，什么都没有发生，没有异常或错误，它似乎确实调用了 Java 代码。

我正在调用 AttachCurrentThread，它似乎工作并在最后分离，查找方法的调用似乎都成功了。有没有人有任何想法或我有错误的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:19:59.450

没有解决此类问题的灵丹妙药；你可能会让任何一个小事情出错。我建议从一些不起作用的代码开始违反直觉。故意设置方法ID错误；看看系统的行为有何不同。将对象引用（或类引用，如果是静态方法）设置为意外对象，或不存在的对象；看看当对象引用没有全球化时会发生什么......你已经明白了。

# php - JQuery AJAX问题没有错误

> ID：13861938
> 
> 赞同：1
> 
> 时间：2012-12-13T14:28:24.067
> 
> 标签：php, jquery, ajax

因此，我通过 jQuery AJAX 请求将商店列表添加到网页。这个小工具不是动态的，只是数据库驱动的。我决定使用 jQuery/AJAX 来传输数据，因为当我尝试在我们当前的 PHP CMS 中嵌入 PHP 时，我得到了一堆相互冲突的错误。

我遇到的问题是在尝试向 PHP 脚本发出请求时遇到 jQuery AJAX 错误，我不知道为什么。

这是我的 AJAX 请求

```
$(document).ready(function(){
    $.ajax({
        type:"POST",
        url:"getStores.php",
        dataType: "json",
        success:function(data){
            results(data);
        },
        error: function(data) {
            console.log(data.error);    
        }
    });
}); 
```

我得到的神秘控制台错误是这个

```
function (){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this} 
```

如果有帮助，这是我的 PHP 代码：

```
//database connection
$return_arr = array();
$sql = mysql_query("SELECT * FROM where_to_buy");
while($row = mysql_fetch_array($sql, MYSQL_ASSOC))
{  
    $row_array['store_name'] = $row['store_name'];
    $row_array['store_url'] = $row['store_url'];
    array_push($return_arr,$row_array);
}
echo json_encode($return_arr); 
```

我认为问题可能是因为我将我的 JSON 包装在一个数组中？

编辑:: 根据要求从 php 脚本输出 JSON

```
[{"store_name":"Example 1","store_url":"http:\/\/www.example1.com"},{"store_name":"Example 2","store_url":"http:\/\/www.example2.com"}] 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:33:55.357

您收到奇怪错误消息的原因是 jQuery ajax 函数的错误回调采用 3 个参数而不是 1 个参数，如下面的文档中所述：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

第一个参数是一个 jQuery 特殊的 XMLHttpRequest 对象，它有一个名为的属性`error`，其中包含您看到的记录到控制台的函数。在执行 ajax 调用期间发生的实际错误是作为第三个参数传递给错误回调的。

要查看它，您应该执行以下操作：

```
$(document).ready(function(){
    $.ajax({
        type:"POST",
        url:"getStores.php",
        dataType: "json",
        success:function(data){
            results(data);
        },
        error: function(jqXHR, text, error) {
            console.log(error);    
        }
    });
}); 
```

这会让你更接近真正的问题。

更新：

请显示您的 php 脚本的输出。可能是它没有返回有效的 json。如 php 文档 ( [http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php) ) 中所述，`[json_encode] only works with UTF-8 encoded data.`

您还可以检查`json_last_error`( [http://php.net/manual/en/function.json-last-error.php](http://php.net/manual/en/function.json-last-error.php) ) 以查看编码是否由于某种原因而失败。

更新 3：

看来您的问题可能是 php 脚本的路径。

试试看：

```
$(document).ready(function(){
    $.ajax({
        type:"POST",
        url:"/getStores.php", // <-- notice the leading slash!!!
        //dataType: "json",
        success:function(data){
            //results(data);
            console.log(data);
        },
        error: function(jqXHR, text, error) {
            console.log(error);    
        }
    });
}); 
```

或者，如果上面将正确的 json 输出记录到控制台，则将它们重新组合在一起......

```
$(document).ready(function(){
    $.ajax({
        type:"POST",
        url:"/getStores.php",
        dataType: "json",
        success:function(data){
            results(data);
        },
        error: function(jqXHR, text, error) {
            console.log(error);    
        }
    });
}); 
```

# sql - 具有不同 WHERE 参数的 sqlite3 表上的条件更新

> ID：13861944
> 
> 赞同：0
> 
> 时间：2012-12-13T14:28:45.783
> 
> 标签：sql, database, sqlite

我是 SQL-fu 的白带，我需要一些帮助。是否可以对具有不同 WHERE 参数的 sqlite3 表进行条件更新？我正在尝试制作触发器，但无法使其正常工作。类似的东西：

```
CREATE TRIGGER IF NOT EXISTS table_reorder BEFORE UPDATE ON table FOR EACH ROW BEGIN 
*IF* new.index > index *THEN* index + 1 WHERE index > new.index END
*ELSE IF* new.index < index *THEN* index - 1 WHERE index < new.index END
END; 
```

或者，如果您有更好的想法来完成这项工作，请告诉我。我已经尝试过在[SQLite 上提出的解决方案： UPDATE column of multiple rows with continuous value](https://stackoverflow.com/questions/8537046/sqlite-update-column-of-multiple-rows-with-sequential-value)，但它也没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:46:45.030

您可以在触发器上使用[`WHEN`条件。](http://www.sqlite.org/lang_createtrigger.html)如果你想要更新，你必须实际执行它：

```
CREATE TRIGGER table_reorder_larger
BEFORE UPDATE OF index ON MyTable
FOR EACH ROW
WHEN NEW.index > OLD.index
BEGIN
    UPDATE MyTable SET index = index + 1 WHERE index > NEW.index;
END;

CREATE TRIGGER table_reorder_smaller
BEFORE UPDATE OF index ON MyTable
FOR EACH ROW
WHEN NEW.index < OLD.index
BEGIN
    UPDATE MyTable SET index = index - 1 WHERE index < NEW.index;
END; 
```

但是，这将递归运行相同的触发器，因此您最好禁用[递归触发器](http://www.sqlite.org/pragma.html#pragma_recursive_triggers)。

# android - 屏幕倒置

> ID：13861948
> 
> 赞同：5
> 
> 时间：2012-12-13T14:28:51.710
> 
> 标签：android, orientation, flip

我正在测试/调试一个 Android 应用程序，即使我已经设置

```
configChanges="keyboardHidden|orientation"
android:screenOrientation="portrait" 
```

并使用

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

屏幕倒转。这似乎出现在 WXGA 4.0、4.1、4.2 上。它与 API、模拟器或其他东西有关吗？我问这个问题是因为我没有找到任何官方和明确的东西。
谢谢你。

PS：作为解决方案，如果出现 API 问题，我应该检查它的版本并旋转屏幕还是有更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T13:17:24.423

嗨，我用这个来做风景

```
<activity
    android:name=".MainActivity"
    android:label="@string/title_activity_main"  android:configChanges="orientation" android:screenOrientation="landscape">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

和

```
<activity
    android:name=".MainActivity"
    android:label="@string/title_activity_main"  android:configChanges="orientation" android:screenOrientation="portrait">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

肖像及其对我的工作 android 4.1 模拟器

# c# - 第 2 部分：如何删除所有不需要的 TreeView 分支。自连接表

> ID：13861950
> 
> 赞同：1
> 
> 时间：2012-12-13T14:28:57.730
> 
> 标签：c#, asp.net, treeview, self-join

第 1 部分：在 C# Treeview 中，我需要删除叶子列表中不包含值的所有分支。例如，我有一个列表 { 10, 13 } 和一个树：数据源是一个自联接表。所以我不能轻易去除不需要的叶子和树枝。

--> 最佳答案
void TrimTree(TreeNodeCollection nodes, List l)
{
TreeNode node = null;
for (int ndx = nodes.Count; ndx > 0; ndx--)
{
node = nodes[ndx - 1];
TrimTree(node.ChildNodes, l);
if (node.ChildNodes.Count == 0 && !l.Contains(node.Value))
nodes.Remove(node);
}
}

如果我可以编写一个更好的 SELECT 查询，那么我就不需要 TrimTree() 函数：D 解决这个问题会很有帮助！太感谢了！

第 2 部分：其他人指出，简单地修改 UI 只是一种解决方法。那么如何更改 SELECT 查询，以便所有不需要的分支和叶子一开始就不会进入树中。

目前我只是这样做（它有效）：
DataTable dt = GetTable("select id, parent_id, name from tbl_self_join");
tvTree.DataSource = HierarchicalDataSet(dt, "id", parent_id");
tvTree.DataBind();

这是一个简单的自连接表示例：

ID Partent_ID 名称

```
1   null   Root
2   1   Branch1
9   2   Branch1-Sub1
10  2   Branch1-Sub2
11  2   Branch1-Sub3
12  11  Branch1-Sub3-Sub1
13  11  Branch1-Sub3-Sub2
14  1   Branch2
15  14  Branch2-Sub1
18  14  Branch2-Sub2
19  18  Branch2-Sub2-Sub1
20  19  Branch2-Sub2-Sub1-sub1 
```

所以如果我想删除除 ID 10,13 之外的所有叶子，我应该得到这个：

ID Parent_ID 名称

1 个空根

2 1 分行1

10 2 分支 1-子 2

11 2 分支 1-Sub3

13 11 分支 1-Sub3-Sub2

如果我只是删除我不想要的叶子，树枝会留下来。是否有 SELECT 语句可以做到这一点？那么就不需要轮回了。

感谢所有的帮助！

# css - 页面css不会在javascript函数中刷新

> ID：13861952
> 
> 赞同：2
> 
> 时间：2012-12-13T14:29:06.533
> 
> 标签：css, ajax, google-chrome, visibility

我在这里的第一个问题，所以要温柔:)。

我在更改元素的 css 及其刷新时遇到了这个问题。我正在使用 ajax 请求创建一个 webforms 应用程序。我的问题是，当某人从树视图中选择报告时，它应该显示一个带有加载符号的 gif，并且在收到数据后它应该显示它。它在 Firefox 和 Opera 上运行良好，但在 ie、chore 或 safari 上运行良好。这是代码：

这是当有人单击树节点时启动的方法 this.hideElements(); var id = node.getId().substr(2);

```
var client = new CAjaxClient();
var data;

client.addParameter(new CKeyValuePair('ReportID', id));

client.postCallBack('/ajaxpages/Reports.aspx', 'GetReportFilters', this.dataRecieved);

filterGenerator.setReportID(id); 
```

这个方法 hideElements()

```
$('#FiltersContainer').css('visibility', 'hidden');
$('#ActionsContainer').css('visibility', 'hidden');
$('#loadingDiv').css('visibility', 'visible');
$("input[id$='Date']").parent().css('visibility', 'hidden'); 
```

这是 ajax postBack 方法

```
if (this.readyState == 4 && this.status == 200) {
$('#FiltersContainer').css('visibility', 'visible');
$('#ActionsContainer').css('visibility', 'visible');
$('#loadingDiv').css('visibility', 'hidden');
var data = eval(this.responseText);
filterGenerator.processFiltersData(data); 
```

返回数据和所有内容的顺序只是在请求时浏览器就像冻结一样，而当数据返回 css 状态时是整个过程结束时的状态。加载 div 永远不会显示。我还尝试使用 domelement.style 更改强制重绘，但没有效果。当我在 chrome 调试器中逐行执行代码时，一切都很顺利。如果可以的话请帮忙。

html代码（vio:TreeView是我们自己的ASP控件）：

```
<div id="pageHeader" style="display:inline-block">

        <div id="headerImageDiv" style="float:left; margin-left:15px; margin-top:5px;">
            <img src="style/default/printerLarge.png" alt="" />
        </div>

        <div id="pageTitleDiv" style="float:left">
            <span style="display:block; margin-top:20px;margin-left:10px;color:#78b4bb; font-size:20px;">Reports And Analyses</span>
            <span style="display:block; margin-top:20px;margin-left:10px;font-size:18px;">Select a report</span>   
        </div>

    </div>
    <br />
    <div id="mainPane" style="display:inline-block;width:100%;">
        <div id="readerTreeContainer" style="float:left;border-top-style:solid;border-left-style:solid;border-bottom-style:solid;border-right:none; border-width:1px; overflow : auto;width:300px;height:auto; background-color:white;">
             <vio:TreeView ID="TreeView" runat="server"
                     Width="298" Height="500"
                     ActionListener="ReportsGeneralListener"
                     ActionListenerScript="ReportsGeneralTree.js"
                     GlobalTreeviewName="reportsTreeview">
             </vio:TreeView>

        </div>

        <div id="FiltersContainer" style="position:relative;visibility:hidden;float:left;border-top-style:solid;border-right-style:solid;border-bottom-style:solid;border-left:solid 1px; border-width:2px; overflow : auto;width:30%;height:500px; background-color:#dbdae4;">
            <div id="filterColumnOne" style="float:left;width:50%;height:100%;border-right:solid 1px;border-left:none;">

            </div>
                <div id="filterColumnTwo" style="float:left;width:49%;height:100%;">
            </div>
            <div id="loadingDiv" style="z-index:10;position:absolute;top:50%;left:50%;margin: -35% 0 0 -35%;z-index:100001;height:316px;width:396px;">
                <div  style="position:relative;display:block">
                     <img src="style/default/loading.gif" alt="" style="position:absolute;left:0px;top:0px;z-index:-1;"/>
                    <span style="display:block;text-align:center;padding-top:80px;font-size:25px;font-weight:bold;">Loading Report</span>
               </div>
            </div>
        </div>

        <div id="ActionsContainer" style="visibility:hidden;float:left;border-left-style:none;border-top-style:solid;border-right-style:solid;border-bottom-style:solid;border-width:2px; overflow : auto;width:200px;height:200px; background-color:#abe9e7;">
              <div style="display:block;border-bottom:solid 1px;height:50%">
                  <div style="position:relative; height:100%;">
                      <div style="position:absolute;top:50%;left:50%; height:72px;margin: -35px 0 0 -35%;">
                          <img src="style/default/document.png" alt="" style="float:left;margin-right:10px;"/>
                          <button type="button" style="margin-top:18%;height:30px;" onclick="print();">Print</button>
                      </div>
                  </div>

              </div>

              <div style="display:block;border:none;height:49%;">
                  <div style="position:relative; height:100%;">
                      <div style="position:absolute;top:50%;left:50%; height:72px;margin: -35px 0 0 -35%;">
                          <img src="style/default/application_pdf.png" alt="" style="float:left;margin-right:10px;height:72px;"/>
                          <button type="button" style="margin-top:18%;height:30px;">PDF</button>
                      </div>
                  </div>
              </div>
        </div>

    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:31:34.473

尝试 .hide 和 .show 代替。他们跨浏览器工作。

请参阅[jQuery API](http://api.jquery.com/hide/)

我认为你的问题是：

```
<div stuff I'm hiding>
    <div loading screen> 
```

有关您提供的内容的工作演示，请参见[此处。](http://jsfiddle.net/mL8eT/)我从样式中删除了内联可见性：隐藏（我建议您将其拆分为一个 CSS 文件，这会使它变得不可读）并从您隐藏的 div 内部获取加载 div。

# javadoc - Netbeans 7.2 在没有 css 的情况下生成错误的 Javadoc

> ID：13861953
> 
> 赞同：0
> 
> 时间：2012-12-13T14:29:12.587
> 
> 标签：javadoc, netbeans-7

升级到 Netbeans 7.2（64 位）后，我无法正确生成 javadocs。如图所示，没有 css 并且有非 ascii 字符：![javadoc的index.html](../Images/4c7cacb8e8a0e7bbc34b3d72bdaa3163.png)

我相信这与这`<html lang="tr">`条线有关。因为`ı`关键字中的字符`script`和`title`是土耳其字符。它的大写版本是`I`. 顺便说一句，我在 Windows 7 土耳其语上。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-21T22:52:57.740

浏览器无法理解标签，因为标签（脚本或标题）包含土耳其语字母。您是否尝试添加其他参数？

```
Projects > Properties > Build > Documenting > Additional Javadoc Options: -locale en_US 
```

然后重新生成 javadoc。

# c# - 加载collectionview源而不绑定它

> ID：13861956
> 
> 赞同：0
> 
> 时间：2012-12-13T14:29:17.863
> 
> 标签：c#, wpf, mvvm, collectionviewsource

当此属性处于焦点的选项卡中时，我需要加载一个属性。我尝试通过在 xaml 中创建一个 collectioview 源并将 itemsource 绑定到该属性

```
 <CollectionViewSource x:Key="Sequences_View" Source="{Binding Path=Sequences}"/>

 public BindingList<LNE_SEQUENCE> Sequences
 {
    get
    {....}
 } 
```

因为我不必将我的收藏绑定到我发现它从未加载过的任何东西上。我怎样才能加载我的财产？

我正在使用 c# 和 wpf 并且我在 MVVM 中，所以我不知道选项卡何时获得焦点，因为视图模型不知道 UI。

# windows-phone-7 - 如何在不在 Marketplace 中发布的情况下将 WP 应用交付给客户？

> ID：13861957
> 
> 赞同：1
> 
> 时间：2012-12-13T14:29:18.577
> 
> 标签：windows-phone-7, publishing, marketplace

现在，为了将每个构建交付给客户，我将其作为测试版发布在市场上，因此只有我和客户可以下载它。提交大约需要 24 小时。

有没有其他方法可以将构建安装到客户的手机上以避免这种时间延迟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:31:05.180

我相信可能做到这一点的唯一方法是在您的应用程序中心开发人员帐户下注册客户端的设备并手动部署它。

这并不理想。

不幸的是，没有允许您忽略应用商店的侧载概念（或者至少不是 WP 7.5 的一部分）。

[这个特定的链接](http://www.pocket-lint.com/news/46174/windows-phone-8-detailed-new-features)表明 WP8 中将存在侧加载，尽管我个人不知道它是否已启用。

# opencv - 调用 VideoCapture 析构函数后，相机保持活动状态

> ID：13861959
> 
> 赞同：0
> 
> 时间：2012-12-13T14:29:24.520
> 
> 标签：opencv

我已经运行了这个[示例代码](http://docs.opencv.org/modules/core/doc/intro.html#automatic-allocation-of-the-output-data)：

```
#include "cv.h"
#include "highgui.h"

using namespace cv;

int main(int, char**)
{
    VideoCapture cap(0);
    if(!cap.isOpened()) return -1;

    Mat frame, edges;
    namedWindow("edges",1);
    for(;;)
    {
        cap >> frame;
        cvtColor(frame, edges, CV_BGR2GRAY);
        GaussianBlur(edges, edges, Size(7,7), 1.5, 1.5);
        Canny(edges, edges, 0, 30, 3);
        imshow("edges", edges);
        if(waitKey(30) >= 0) break;
    }
    return 0;
} 
```

它工作正常，但在应用程序关闭后，相机仍然处于活动状态。我知道这一点，因为闪光灯 LED 一直亮着，直到我终止 HPMediaSmartWebcam.exe 进程。

使用完后如何关闭相机`VideoCapture`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T02:27:58.083

根据文档...[这里](http://opencv.willowgarage.com/documentation/cpp/reading_and_writing_images_and_video.html#videocapture)相机将在类析构函数中自动取消初始化...析构函数调用虚拟函数`cv::VideoCapture.release(`）...运行相机固定数量的帧，然后查看网络摄像头的 LED 是否亮起关不关。。

```
int frames = 0;

while(frames!=1000)
{
  //do frame capture from webcam and image processing...
  ++frames;
} 
```

# ruby-on-rails - 发动机厂红宝石版

> ID：13861961
> 
> 赞同：0
> 
> 时间：2012-12-13T14:29:30.960
> 
> 标签：ruby-on-rails, ruby-on-rails-3, engineyard

我正在将 rails 3.2.6 应用程序部署到 engineyard`CLI`

当我运行命令时

```
ey deploy -e staging 
```

发生以下错误

```
ERROR:  While executing gem ... (Gem::FilePermissionError)
You don't have write permissions into the /usr/lib/ruby/gems/1.8 directory. 
```

有什么办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T16:31:12.850

你在使用 RVM 吗？你是如何安装`engineyard`gem的？看来您可能正在尝试使用 Ruby 系统，在这种情况下您可能想尝试一下`sudo ey deploy`。

埃文

# node.js - 会话 cookie 过期后如何重定向到页面？

> ID：13861962
> 
> 赞同：1
> 
> 时间：2012-12-13T14:29:29.683
> 
> 标签：node.js, express, passport.js

我正在使用快递和护照模块进行身份验证。在会话 cookie 过期而没有结果后，我尝试以不同的方式进行重定向。目前我正在尝试登录操作后的计划功能。我有以下代码：

```
 var express = require('express')
  , passport = require('passport')
  , util = require('util')
  , LocalStrategy = require('passport-local').Strategy
  , schedule = require('node-schedule');

var users = [
    {id: 1, username: 'user', password: 'passwd'}
];

function findById(id, fn) {
  var idx = id - 1;
  if (users[idx]) {
    fn(null, users[idx]);
  } else {
    fn(new Error('User ' + id + ' does not exist'));
  }
}

function findByUsername(username, fn) {
  for (var i = 0, len = users.length; i < len; i++) {
    var user = users[i];
    if (user.username === username) {
      return fn(null, user);
    }
  }
  return fn(null, null);
}

passport.serializeUser(function(user, done) {
  done(null, user.id);
});

passport.deserializeUser(function(id, done) {
  findById(id, function (err, user) {
    done(err, user);
  });
});

passport.use(new LocalStrategy(
  function(username, password, done) {
    process.nextTick(function () {
      findByUsername(username, function(err, user) {
        if (err) { return done(err); }
        if (!user) { return done(null, false, { message: 'Unknown user ' + username }); }
        if (user.password != password) { return done(null, false, { message: 'Invalid password' }); }
        return done(null, user);
      })
    });
  }
));

var app = express.createServer();

app.configure(function() {
  app.set('views', __dirname + '/views');
  app.set('view engine', 'ejs');
  app.use(express.logger());
  app.use(express.cookieParser());
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.session({ secret: 'keyboard cat', cookie: {maxAge: 10000}}));
  app.use(passport.initialize());
  app.use(passport.session());
  app.use(app.router);
  app.use(express.static(__dirname + '/../../public'));
});

app.get('/', function(req, res){
  res.render('index', { user: req.user });
});

app.get('/login', function(req, res){
  res.render('login', { user: req.user, message: 'error' });
});

app.post('/login', 
  passport.authenticate('local', { failureRedirect: '/login', dfailureFlash: true }),
  function(req, res) {
    res.redirect('/');
    dateExpiration = new Date(Date.now() + 10000);
    var j = schedule.scheduleJob(dateExpiration, function(){
        console.log('Cookie expiration event');
        // How can I redirect to login page after cookie session expires?
        //redirect('/login')
    });
  });

app.get('/logout', function(req, res){
console.log('Logout');
  req.logout();
  res.redirect('/');
});

app.listen(3000);

function ensureAuthenticated(req, res, next) {
  if (req.isAuthenticated()) { return next(); }
  res.redirect('/login')
} 
```

是否有另一种方法来检测 node.js 中的会话 cookie 过期事件，以便我可以重定向到另一个页面？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:18:17.453

因此，如果我正确理解您的要求，您就无法真正“检测” cookie 过期本身。

如果一个cookie过期了，浏览器不会发送给服务器，也就是说cookie过期实际上是发生在浏览器端，而不是服务器端。

但是，如果您想“伪造”它，您可以尝试以下伪代码：

```
on "login":
    set a cookie that expires in 100x \
    the amount of time it takes your session to expire

on "ensureAuthenticated":
    check for req.user
    if i don't have req.user but have my other cookie
        Fire my expiration event, which unsets the other cookie
    if i don't have req.user or my other cookie
        Send the user to the login page
    if i've got req.user
        Re-set my other cookie so that i update the expiration 
```

可能不是您正在寻找的 100%，但应该接近。

# javascript - 使用 JavaScript (class.js) 动态加载 HTML

> ID：13861963
> 
> 赞同：0
> 
> 时间：2012-12-13T14:29:33.227
> 
> 标签：javascript, dom-events, javascript-framework

我正在构建一个包含一些 HTML 组件的应用程序。

### 用例：

我正在尝试实现类似于[这里](http://tantaman.github.com/Strut/web-dist/index.html#)存在的东西。我想在单击菜单时调用 HTML 组件并应用一些操作，例如**拖动和调整大小**等。

### 研究：

有人建议我采用面向对象的方法来构建应用程序，因此在浏览 Google 时遇到了用于 JavaScript 继承的[class.js 。](http://ejohn.org/blog/simple-javascript-inheritance/)

我浏览了最初的教程，但我不确定如何以及在哪里存储最初将保存 HTML 组件结构的 HTML？

在参考应用程序中，他们使用了backbone.js 和require.js，但是我学习这些的时间有点短。

### 到目前为止我的工作：

我尝试的是创建一个文件`components.js`并为这样的组件创建外部 HTML 结构：

```
var textBox = '<div class="structure-textBox">
               <div class="editable">
                <p><span style="font-size:20px;"><span style="font-family: arial,helvetica,sans-serif;"><strong>Text Box</strong></span></span></p>
                <ol>
      <li><span style="font-size:14px;">Double Click on the <strong>Text Box</strong> to Edit Text.</span></li>
      <li><span style="font-size:14px;">For easy use of the text editor click on the "i" (to the left of the x close) and watch a 30 sec video tutorial.</span></li>
    </ol>
    <p><span style="font-size:14px;"><span style="color:#7cba0c;">Enjoy web designing with GoBiggi.</span></span></p>
    <p><span style="font-size:14px;">Click on the <a href="#."><strong><u>Design Assistance</u></strong></a> link for further help.</span></p>
  </div>
</div>'; 
```

这是一个存储在 JavaScript 变量中的文本框，我想在用户单击菜单时添加它。但是如何使用 class.js 的继承模式来实现呢？

我为组件创建了一个画布页面和菜单。现在我被困在获取 html 内容并将其显示在画布上的这一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T16:03:23.410

我看不出您要问的与继承有关。

有几种简单的方法可以使用 JavaScript 在您的网页上添加内容。

例如，如果您的页面某处有以下内容`<div id='target'></div>`，您可以这样写：

```
var textBox = '<div class="structure-textBox">
               <div class="editable">
                <p><span style="font-size:20px;"><span style="font-family: arial,helvetica,sans-serif;"><strong>Text Box</strong></span></span></p>
                <ol>
      <li><span style="font-size:14px;">Double Click on the <strong>Text Box</strong> to Edit Text.</span></li>
      <li><span style="font-size:14px;">For easy use of the text editor click on the "i" (to the left of the x close) and watch a 30 sec video tutorial.</span></li>
    </ol>
    <p><span style="font-size:14px;"><span style="color:#7cba0c;">Enjoy web designing with GoBiggi.</span></span></p>
    <p><span style="font-size:14px;">Click on the <a href="#."><strong><u>Design Assistance</u></strong></a> link for further help.</span></p>
  </div>
    </div>';
document.getElementById('target').innerHTML = textBox; 
```

为了获得最佳效果，我建议学习使用像 jQuery 这样的库。这些工具旨在使操作页面的 HTML 变得更容易，等等。

# jenkins - 使用 nagios 自动发现和监控 jenkins master

> ID：13861966
> 
> 赞同：1
> 
> 时间：2012-12-13T14:29:39.653
> 
> 标签：jenkins, nagios

我想要一种自动发现 Jenkins 主服务器并自动监控这些 Jenkins 主服务器上作业的运行状况的方法，以便我可以查看单个控制台（使用 nagios 主机）来检测作业在集成中的任何位置失败时出现的问题。

有人可以帮我找到使用 nagios 的 Jenkins 主服务器吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T17:57:14.257

有一个用于从 Jenkins 检索作业健康信息的 nagios 插件，但看起来它需要为每个作业手动配置，请参阅[Nagios Jenkins 插件](https://github.com/jonlives/nagios-jenkins-plugin)。

我对 nagios 不够熟悉，不知道任何内置的自动发现是如何工作的，但看起来有几个示例脚本（[check_find_new_hosts](http://exchange.nagios.org/directory/Plugins/Network-and-Systems-Management/Nagios/check_find_new_hosts/details)和[设备发现](http://exchange.nagios.org/directory/Tutorials/Other-Tutorials-And-HOWTOs/Device-Auto-2DDiscovery-and-Printer-Monitoring-Configuration-for-Nagios/details)）用于从网络扫描生成必要的配置。您必须做一些工作才能将扫描结果集成到您的 nagios 实例中。（IIRC，写新配置后需要重启nagios吗？）

要获取 Jenkins 服务器列表，您可以在现有的 nagios 网络扫描脚本之一上构建。该脚本应扫描 IP 范围并识别响应`http://IP:8080/api/xml`. 生成的 XML 文档（也支持 JSON 结果）应该包含一个名为`<hudson>`（在我的实例中，可能在未来版本中将更改为“jenkins”）的根标记。如果服务器响应了这个请求，那么你会希望你的脚本生成 nagios 配置来监控它。

此外，XML 响应将包含一个作业列表，例如：

```
<job>
  <name>My Job</name>
  <url>http://jenkins:8080/job/My%20job/</url>
  <color>blue</color>
</job> 
```

通过遍历此列表，您可以获得作业名称、作业 url（了解更多详细信息或轮询状态）和当前状态（蓝色表示成功）。此作业列表可以为 Nagios Jenkins 插件配置提供输入。

[Jenkins 远程 API](https://wiki.jenkins-ci.org/display/JENKINS/Remote+access+API)记录在您的Jenkins 实例上，只需转到`http://jenkins:8080/api`.

# java - 在 ListView 中实现 admob SmartBanner

> ID：13861967
> 
> 赞同：1
> 
> 时间：2012-12-13T14:29:41.617
> 
> 标签：java, android, admob

最近我在我的 ListView 中集成了一个 AdMob 横幅。现在我想用智能横幅替换那个横幅，因为它看起来好多了。正常横幅的实现如本教程中所述： [教程](http://googleadsdeveloper.blogspot.de/2012/03/embedding-admob-ads-within-listview-on.html)

我对 SmartBanner 的问题是，在加载之前我无法获得它的高度，就像普通横幅一样：`int height = Math.round(AdSize.BANNER.getHeight() * density);`

我的问题：如何在 ListView 中正确实现 SmartBanner？我已经尝试了 90px 的固定高度，但这不是最好的解决方案，因为一些广告要小得多，这会导致广告周围的空间未使用。

# linux - 任何 errno 是否都是 read() 的有效 POSIX 返回值？

> ID：13861969
> 
> 赞同：1
> 
> 时间：2012-12-13T14:29:59.137
> 
> 标签：linux, linux-kernel, linux-device-driver

是 POSIX，要在设备驱动程序读取函数中返回 errno.h 中列出的任何可用 errno 值，还是应该只使用 read linux 手册页中列出的那些？

编辑：
我正在编写一个设备驱动程序，其中用户必须在调用读取函数之前使用 ioctl cmd 设置一些参数。因此，如果用户在设置这些参数之前尝试调用 read 函数，我正在寻找要返回的正确 errno 值。EPERM“不允许操作”似乎是正确的，但因为它没有在阅读的 linux 手册页中列出，我想知道这是否是一个正确的实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T17:16:34.660

POSIX 要求使用列出的错误代码来报告相应的错误情况。但是，它也允许将其他错误代码用于未列出的错误。

POSIX.1-2008 第 2 卷中的[文本](http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_03)：系统接口，第 2.3 节错误编号：

> 实现可能支持未包含在此列表中的其他错误，可能会在此处描述的情况以外的情况下生成此列表中包含的错误，或者可能包含防止某些错误发生的扩展或限制。
> 
> 每个参考页上的 ERRORS 部分指定了所有实现应检测到哪些错误条件（“将失败”），以及可以选择由实现检测哪些错误条件（“可能失败”）。如果未检测到错误条件，则请求的操作应成功。
> 
> 当且仅当所有这些错误条件始终与本卷 POSIX.1-2008 中描述的错误条件相同时，实现可能会在上述情况下生成此处列出的错误编号。对于本卷 POSIX.1-2008 中描述的错误情况，实现不应生成与本卷 POSIX.1-2008 要求的错误编号不同的错误编号，但可能会产生额外的错误，除非明确禁止特定功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:03:19.463

Linux 联机帮助页通常都很好，但它们并不权威。对于这样的问题，你需要去官方标准。[您应该只返回POSIX.1-2008 规范中`read`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/read.html)列出的错误代码之一（向下滚动到显示错误的位置）。如果您返回一些其他代码，应用程序软件将无法处理它并且可能会崩溃。

请注意，其中许多代码*只能*在为它们描述的条件下返回。例如，您的设备驱动程序没有业务返回`EBADF`, `EISDIR`, `EOVERFLOW`,`ESPIPE`或任何在其描述中带有“socket”一词的内容，因为在控制到达您之前处理了所有这些是适当故障代码的情况。这*可能*也是这种情况，`EINTR`但我不确定。

您还应该知道 Linux 没有实现 POSIX.1-2008 的一些可选功能（最重要的是，假设所有标记为 OB_XSR 的东西根本不存在）并且该标准所做的一些区别已经过时（比如`ENOMEM`对`ENOBUFS`)。

综上所述，除非您的设备驱动程序非常不寻常，否则我希望您只需要`EIO`, `EAGAIN`,`ENOMEM`和*也许* `ENXIO`（如果`EIO`/`ENXIO`区别对您的硬件有意义）。

# php - 比较 PHP 中的会话变量

> ID：13861973
> 
> 赞同：1
> 
> 时间：2012-12-13T14:30:16.397
> 
> 标签：php, if-statement, compare, session-variables

我正在尝试创建一个菜单，根据数据库中的用户访问级别，将向用户显示两个不同菜单之一。

现在我的代码如下：

```
if($_SESSION['acl'] == "Administrator"){
    echo $_SESSION['acl'];
    echo "You are an administrator";
}
{
    echo $_SESSION['acl'];
    echo "You are a basic user";
} 
```

我的问题是 if 语句的测试总是失败并直接进入 else 部分。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T14:31:36.877

问题是你没有一个`else`部分，你忘了写这个词`else`！结果，底部的代码块**总是**被执行，这就是你总是看到它的原因。

关于为什么`if()`永远不会调用检查用户是否为管理员的 top 语句：这可能是您在访问会话变量时没有先`session_start()`在代码顶部调用。如果不是这样，请确保您之前正确设置了该会话变量。

```
// start the session (required on all pages using session variables)
session_start();

// I assume that for debug, you print the session variable
echo $_SESSION['acl'];

if($_SESSION['acl'] == "Administrator"){
    echo "You are an administrator";
}
else
{
    echo "You are a basic user";
} 
```

只是一个建议：我假设代码`echo $_SESSION['acl'];`只是用于调试。我把它移到了，`session_start()`因为这样，它仍然总是被调用，但你不会写两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:36:42.213

使用相同的逻辑，它会是这样的：

```
if(isset($_SESSION['acl'])){
    if($_SESSION['acl'] == "Administrator"){
        echo 'You are an administrator';
        }
    else{
        echo 'You are a basic user';
        }
}else{
    echo 'Session "acl" was not set';
    } 
```

# mysql - MySQL 服务器配置失败

> ID：13861985
> 
> 赞同：0
> 
> 时间：2012-12-13T14:30:48.093
> 
> 标签：mysql, configuration, 64-bit

我想设置一个 MySQL 数据库，但它在服务器配置中失败。我正在使用 Win7 x64 和 MySQL 安装程序版本 5.5.28.3。我得到以下输出：

[http://s10.postimage.org/bgc2jjhqx/mysql.png](http://s10.postimage.org/bgc2jjhqx/mysql.png)

谢谢你的帮助；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:42:49.250

尝试 WAMP Server [http://www.wampserver.com/en/](http://www.wampserver.com/en/)最快最简单的方法来设置我发现的 MySQL 数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:53:02.110

我推荐你使用 USBWebserver。它带有使用 MySQL 的 PhpMyAdmin。随便搜一下

# java - 比较用户输入的浮点值 (Android)

> ID：13861997
> 
> 赞同：1
> 
> 时间：2012-12-13T14:31:13.700
> 
> 标签：java, android, floating-point

我在将用户输入的浮点值精确比较到我的应用程序中的可编辑文本字段时遇到了一些问题。这是示例：

```
if ((temp>=39.0)&&(temp<=40.9)) {
    ball=ball+3;
} 
```

例如，如果用户输入 ，`40.9`则不会调用循环中的代码。我只是一个初学者，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:19:25.613

您应该将您的文字值表示为`40.9f`. 如果省略 'f'，文字的类型将默认为`double`. 还要检查 `temp`变量的类型。你没有显示你是如何声明`temp`的。

**编辑**

如果您声明`temp`为 a`Float`或 a `float`，并且`40.9`是 a `double`，则您的表达式`(temp <= 40.9)`将 a`float`与 a进行比较`double`，因此编译器会自动将a 强制`double`转换为 a `float`。将 a 转换`double`为 a`float`意味着将变量的字节数减半，因此结果`float`可能与预期值有很大不同。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T14:33:42.900

尝试创建一个非常小的边距：

```
float epsilon = 0.0001f;

if (39.0f - epsilon <= temp && temp <= 40.9f + epsilon)
{

} 
```

并确保您正确解析用户输入。

```
float temp = Float.parseFloat(inputField.getText()); 
```

# grid - Kendo UI 网格日期时间列

> ID：13861998
> 
> 赞同：1
> 
> 时间：2012-12-13T14:31:16.393
> 
> 标签：grid, filtering, kendo-ui

我想`DateTime`在我的剑道 UI 网格中有一个列。我在论坛上搜索过，但没有找到解决此问题的方法。

我的 TimeStamp 列字段定义如下：

```
TimeStamp: { type: "date" }, 
```

记录根据模板中指定的格式显示数据。但我希望能够更精确地过滤我的数据源。但是，目前我的过滤器只能按日期过滤。有没有办法过滤`DateTime`而不是仅按日期过滤？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T11:34:20.207

我被告知，目前这在 Kendo UI 中是不可能的。我知道这是个坏消息，但这是我问题的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T10:43:01.937

您可以实现它以在剑道网格列上使用模板，再创建一个属性并将该属性传递到剑道网格列的模板中。

像

```
timeStamp: { type: "date" },
timeStamp1: { type: "String" }, 
```

在模板中传递时间戳1

```
 {
    title: "Last Login",
    width: 80,
    template: '<span>#= timeStamp1#</span>',
    field: "timeStamp",
    type: "date"                               
  }, 
```

它可以根据您的要求正常工作，并且排序将像数据库排序一样正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-19T23:04:32.223

它的可能：

```
DeliveredDate: {
                type: "datetime",
                editable: false,
                nullable: false
            } 
```

模板是：

```
 {
                field: "DeliveredDate",
                title: "Delivered Date",
                template: '#= kendo.toString(data.DeliveredDate,"dd/MM/yyyy") === null ? "--/--/----" : kendo.toString(data.DeliveredDate,"dd/MM/yyyy HH:mm") + " Hrs" #',
                width: 60,
                groupable: false,
                sortable: true,
                filterable: true
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-15T10:03:10.740

从您的 KendoGrid 数据库中使用 TimeStamp 格式数据的最简单方法。

在您的 HTML 文件中，使用来自 DB 的数据，如图所示。

```
<kendo-grid [data]="gridData"> 
    <kendo-grid-column class="CreatedAt" field="CreatedAt" title="title"
     [width]="120" [headerStyle]="{'background-color': '#36455a','color': '#fff'}"
     [style]="{'background-color': '#36455a','color': '#fff'}">
          <ng-template kendoGridCellTemplate let-dataItem>
             {{dataItem.CreatedAt | date:"yyyy/MM/dd HH:mm:ss"}}
          </ng-template>
    </kendo-grid-column>
</kendo-grid> 
```

PS：gridData 是我的 var 存储数据库中的数据。CreatedAt 是字段之一。