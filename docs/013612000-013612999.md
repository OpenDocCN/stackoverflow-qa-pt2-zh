# StackOverflow 问答 13612000-13612999

# html - 在 Wordpress 上内置列简码 - 不错的边框解决方案

> ID：13612000
> 
> 赞同：0
> 
> 时间：2012-11-28T18:31:13.430
> 
> 标签：html, css, wordpress, layout

我希望找到一种在此页面上编辑 css 的好方法：

[http://carbonbi.com/build/?page_id=46](http://carbonbi.com/build/?page_id=46)

我正在使用 wordpress 布局简码来创建三个单独的列。我想在第一列和第二列以及第二列和第三列之间添加一个边框。

我意识到使用内置的短代码可能不是最好的方法，可能需要创建我自己的类来处理这个问题，但如果有人有任何有效的方法来解决这个问题，我会很高兴看到。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:42:04.007

将以下 CSS 添加到您的`stylesheet.css`:

```
body .three_col {
    margin-right: 2%;
    border-right: 1px solid #CCCCCC;
    padding-right: 1.75%;
}
body .last {
    padding-right: 0px !important;
    border-right: none !important;
} 
```

这将在列之间添加一个 1px 纯灰色边框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:53:24.260

只是一个一般提示：通过使用 Firefox 的“Web Developer”之类的插件（我最喜欢）或简单地左键单击一个元素并选择“检查元素”（Firebug 是一个不错的选择，虽然大多数浏览器都有自己的，但 firefox 实际上有一个spacy 3d 可以派上用场）您可以获取插件使用的类名称和 id 等，然后将它们添加到您的 style.css 并进行编辑！

额外提示：Firebug 让您可以实时编辑 CSS 以预览它的外观，而无需刷新页面。

# php - 照片导入 facebook-php-sdk 不起作用

> ID：13612002
> 
> 赞同：0
> 
> 时间：2012-11-28T18:31:32.757
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

```
$facebook = new Facebook(array(

                'appId'  => '<key>',

                'secret' => '<secret code>',

                'cookie' => true

              ));

print_r($facebook);die; 
```

这个的输出是

```
Facebook Object
(
   [appId:protected] => <key>

   [apiSecret:protected] => <secret code>

   [session:protected] =>

   [signedRequest:protected] =>

   [sessionLoaded:protected] =>

   [cookieSupport:protected] => 1

   [baseDomain:protected] =>

   [fileUploadSupport:protected] =>
) 
```

这个问题只在10月底出现，和以前一样，它总是打印会话信息。然后我调用链接`https://api.facebook.com/method/photos.getAlbums?uid='.$session['uid'].'&access_token='.$session['access_token']`并用于获取专辑列表。

这工作正常超过 8 个月，突然从上个月停止工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:50:04.963

几个月前，我们的 Facebook API 也遇到了一些麻烦。

Facebook 已**弃用**您正在使用的 REST API。您尝试访问的功能很可能已更改并且不再受支持。

**来源：http:** [//developers.facebook.com/blog/post/616/](http://developers.facebook.com/blog/post/616/)

切换到新的 OAuth2.0 API 以恢复您的功能并在未来一段时间内证明您的应用程序..

这是新 API 文档的链接：http: [//developers.facebook.com/docs/reference/api](http://developers.facebook.com/docs/reference/api)

* * *

哦，将来……请务必从您的帖子中删除任何 API 密钥和密码。这些可能会允许其他人恶作剧地使用您的凭据。

# javascript - 以字符串形式获取对象属性名称

> ID：13612006
> 
> 赞同：86
> 
> 时间：2012-11-28T18:31:56.780
> 
> 标签：javascript, string, object, properties

是否可以将对象属性名称作为字符串获取

```
person = {};
person.first_name = 'Jack';
person.last_name = 'Trades';
person.address = {};
person.address.street = 'Factory 1';
person.address.country = 'USA'; 
```

我想这样使用它：

```
var pn = propName( person.address.country ); // should return 'country' or 'person.address.country'
var pn = propName( person.first_name );      // should return 'first_name' or 'person.first_name' 
```

**注意**：这段代码正是我正在寻找的。我知道这听起来很愚蠢，但事实并非如此。

这就是我想要做的。

HTML

```
person = {};
person.id_first_name = 'Jack';
person.id_last_name = 'Trades';
person.address = {};
person.address.id_address = 'Factory 1';
person.address.id_country = 'USA';

extPort.postMessage
(
  {
    message : MSG_ACTION,
    propName( person.first_name ): person.first_name
  }
}; 
```

----------------------**答案**-----------

感谢ibu。他指出了正确的方法，我使用了递归函数

```
var res = '';

function propName(prop, value) {
    for (var i in prop) {
        if (typeof prop[i] == 'object') {
            if (propName(prop[i], value)) {
                return res;
            }
        } else {
            if (prop[i] == value) {
                res = i;
                return res;
            }
        }
    }
    return undefined;
}

var pn = propName(person, person.first_name); // returns 'first_name'
var pn = propName(person, person.address.country); // returns 'country' 
```

演示：http: [//jsbin.com/iyabal/1/edit](http://jsbin.com/iyabal/1/edit)

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2016-06-09T08:33:51.517

我知道使用[Object.keys(your_object)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys)的最佳实践。它将为您解析为数组属性名称。例子：

```
var person = { firstName: 'John', lastName: 'Cena', age: '30' };
var listPropertyNames = Object.keys(person); //["firstName", "lastName", "age"] 
```

我希望这个例子对你有用。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2017-12-08T04:27:04.903

您可以通过将所有对象属性转换为将返回它们自己的名称的函数来完成此操作

```
var person = {};
person.firstname = 'Jack';
person.address = "123 Street";

function getPropertyName(obj, expression) {
    var res = {};
    Object.keys(obj).map(k => { res[k] = () => k; });
    return expression(res)();
}

let result = getPropertyName(person, o => o.address);
console.log(result); // Output: 'address' 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-09-12T18:38:03.617

您可以将属性包装在一个函数中，然后将该函数转换为字符串并从中获取该属性。

例如：

```
function getPropertyName(propertyFunction) {
    return /\.([^\.;]+);?\s*\}$/.exec(propertyFunction.toString())[1];
} 
```

然后使用它：

```
var myObj = {
    myProperty: "testing"
};

getPropertyName(function() { myObj.myProperty; }); // myProperty 
```

请注意，缩小器可能会破坏这一点。

**编辑：**我创建了一个可与 babel 和 typescript 编译器一起使用的编译器转换（请参阅[ts-nameof](https://github.com/dsherret/ts-nameof)）。这比在运行时做某事要可靠得多。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2021-03-27T23:05:58.867

如果有人在寻找 MarsRobot 答案的 TypeScript 版本，试试这个：

```
function nameof<T>(obj: T, expression: (x: { [Property in keyof T]: () => string }) => () => string): string
{
    const res: { [Property in keyof T]: () => string } = {} as { [Property in keyof T]: () => string };

    Object.keys(obj).map(k => res[k] = () => k);

    return expression(res)();
} 
```

用法：

```
const obj = { 
    property1: 'Jim',
    property2: 'Bloggs',
    property3: 'Bloggs',
    method: () => 'a string',
    child: { property4: 'child1' }
};

const test1 = nameof(obj, x => x.property1);
const test2 = nameof(obj, x => x.property2);
const test3 = nameof(obj, x => x.method);
const test4 = nameof(obj.child, x => x.property4);

console.log(test1);    // -> 'property1'
console.log(test2);    // -> 'property2'
console.log(test3);    // -> 'method'
console.log(test4);    // -> 'property4' 
```

即使对象具有具有相同值的多个属性（与上面的其他一些答案不同），此版本也可以工作，并且当您到达此处时，Visual Studio 等编辑器将为属性名称提供智能感知：`nameof(obj, x => x.`

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2019-09-01T15:03:33.220

我喜欢一个衬垫，这是一个通用的解决方案：

```
const propName = (obj,type) => Object.keys(obj).find(key => obj[key] === type)

propName(person, person.age) 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-11-28T18:38:21.687

是的，您可以，只需稍作改动。

```
function propName(prop, value){
   for(var i in prop) {
       if (prop[i] == value){
            return i;
       }
   }
   return false;
} 
```

现在您可以像这样获得值：

```
 var pn = propName(person,person.first_name);
 // pn = "first_name"; 
```

**注意**我不确定它可以用来做什么。

**其他注释**不适用于嵌套对象。但话又说回来，请参阅第一个注释。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2019-06-05T13:38:34.007

使用代理：

```
var propName = ( obj ) => new Proxy(obj, {
    get(_, key) {
        return key;
    } 
});

var person = {};
person.first_name = 'Jack';
person.last_name = 'Trades';
person.address = {};
person.address.street = 'Factory 1';
person.address.country = 'USA';

console.log(propName(person).first_name);
console.log(propName(person.address).country);
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-12-27T08:57:21.597

我在 TypeScript 中使用以下内容。这种方式保留类型信息并且不允许选择不存在的属性键。

```
export function getPropertyName<T extends object>(obj: T, selector: (x: Record<keyof T, keyof T>) => keyof T): keyof T {
  const keyRecord = Object.keys(obj).reduce((res, key) => {
    const typedKey = key as keyof T
    res[typedKey] = typedKey
    return res
  }, {} as Record<keyof T, keyof T>)
  return selector(keyRecord)
}

const obj = {
  name: 'test',
  address: {
    street: 'test',
  }
}

console.log(getPropertyName(obj, (x) => x.name)) // name
console.log(getPropertyName(obj.address, (x) => x.street)) // street 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-01-13T10:11:26.307

跟进@David Sherret 对 ES6 的回答，它可以变得非常简单：

```
propName = f => /\.([^\.;]+);?\s*\}$/.exec(f.toString())[1]
let prop = propName(() => {obj.name}); // myProperty 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-11-05T15:52:37.640

我更喜欢这样干净简单：

```
var obj = {
  sessionId: 123,
  branchId: 456,
  seasonId: 789
};

var keys = Object.keys(obj);

for (var i in keys) {
  console.log(keys[i]); //output of keys as string
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-11-28T18:40:12.310

不，这是不可能的。

想象一下：

```
person.age = 42;
person.favoriteNumber = 42;

var pn = propName(person.age)
// == propName(42)
// == propName(person.favoriteNumber); 
```

在该过程中，对属性名称的引用完全丢失了。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-11-28T19:17:48.337

您可以为对象创建命名空间方法。该方法将需要改变对象，以便字符串成为一个对象，而不是保存两个属性， a`value`和 a `_namespace`。

**演示：http: [//jsfiddle.net/y4Y8p/1/](http://jsfiddle.net/y4Y8p/1/)**

```
var namespace = function(root, name) {
    root._namespace = name;
    function ns(obj) {
        for( var i in obj ) {
            var a = obj._namespace.split('.')
            if ( a.length ) {
                a.push(i);
            }
            if( typeof obj[i] == 'object' ) {
                obj[i]._namespace = a.join('.');
                ns(obj[i]);
                return;
            }
            if( typeof obj[i] == 'string' ) {
                var str = obj[i].toString();
                obj[i] = {
                    _namespace: a.join('.'),
                    value: str
                };
            }
        }
    }
    ns(root);
};

namespace(person, 'person');

console.log(person.address.street._namespace) // person.address.street
console.log(person.address.street.value) // 'Factory 1' 
```

所以现在你可以这样做：

```
var o = { message: MSG_ACTION };
o[ person.first_name._namespace ] = person.first_name.value;

extPort.postMessage(o); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-07-07T11:20:32.717

我也有同样的情况。

[这是您使用Lodash](https://lodash.com/docs/4.17.4#findKey)或[UnderScore](http://underscorejs.org/#findKey)库完成它的方法，其中一个限制是唯一的值：

```
var myObject = {
'a': 1,
'b': 2,
'c': 3
}
_.findKey(myObject, function( curValue ) { return myObject.a === curValue }); 
```

纯 JavaScript

```
function getPropAsString( source, value ){
    var keys = Object.keys( source );

    var curIndex,
        total,
        foundKey;

    for(curIndex = 0, total = keys.length; curIndex < total; curIndex++){
        var curKey = keys[ curIndex ];
        if ( source[ curKey ] === value ){
            foundKey = curKey;
            break;
        }
    }

    return foundKey;
}

var myObject = {
'a': 1,
'b': 2,
'c': 3
}
getPropAsString( myObject, myObject.a ) 
```

但是，我更愿意将代码修复为解决方案。一个例子：

```
var myObject = {
'a': {key:'a', value:1},
'b': {key:'b', value:2},
'c': {key:'c', value:3}
}

console.log( myObject.a.key ) 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-01-05T20:26:51.767

我迟到了，但我采取了完全不同的方法，所以我会提出我的方法，看看社区的想法。

我曾经[`Function.prototype.name`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name)做我想做的事。我的属性是在调用时返回属性值的函数，我可以使用`.name`

这是一个例子：

```
person = {
    firstName(){
        return 'John';
    },
    address(){
        return '123 street'
    }
}

person.firstName.name // 'firstName'
person.address.name // 'address' 
```

**注意：**
在这种情况下，您不能在运行时轻松更改属性的值（例如名字）。您需要创建一个函数（`.name`在这种情况下是匿名的），并且该函数将返回一个新的命名函数，该函数返回新值：

```
// note the () at the end     
person.firstName = new Function('', 'return function firstName(){return "johny"}')(); 
person.firstName.name ; // 'firstName' 
person.firstName(); // 'johny' 
```

# php - var_export 到字符串

> ID：13612008
> 
> 赞同：7
> 
> 时间：2012-11-28T18:32:00.607
> 
> 标签：php, string, render-to-string

我在`$output`字符串中有一个 HTML 代码，此代码由两个术语分隔：`-startMiniPreview-`和`-endMiniPreview-`. 我需要将包裹在这两个术语之间的部分保存在另一个字符串变量中。这是我认为这样做的正确方法，但它根本不起作用。该`HTMLCODE`部分已成功导出，但未作为字符串导出

```
 $output="-startMiniPreview-HTMLCODE-endMiniPreview-EXTRA";
    preg_match( '/\-startMiniPreview-(.*?)\-endMiniPreview/', $output,$vt);
    $cutOut=strval(var_export($vt[1])); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T18:33:40.683

[文档](http://php.net/var-export)清楚地给出了答案：

```
$cutOut = var_export($vt[1],true); 
```

编辑：也就是说，你为什么要这样做？这就是`$cutOut = $vt[1];`你所需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T18:34:11.070

var_export 的第二个参数使它返回字符串而不是直接输出它[http://php.net/manual/en/function.var-export.php](http://php.net/manual/en/function.var-export.php)

```
mixed var_export ( mixed $expression [, bool $return = false ] ) 
```

所以你的代码应该看起来像

```
$cutOut=strval(var_export($vt[1]), TRUE); 
```

# eclipse - 如何一次在 eclipse 中运行多个输入？

> ID：13612014
> 
> 赞同：1
> 
> 时间：2012-11-28T18:32:18.940
> 
> 标签：eclipse, input

我正在尝试将一组数字和字母输入到 Eclipse 中，例如

n 5 x s v x s c a .6

米 5 3 50 4 2 3 0 -500 2 3 1 0 2 5 4 3 0 x p s c v a .7 s a

有没有一次运行所有这些输入？因为我是单独输入它们（例如：n“enter”5“enter”x“enter”等等）？我正在寻找在 Eclipse 上专门执行此操作的方法，以便我可以看到我的代码到底哪里出错了。

# java - Hibernate 不生成带有注释的表

> ID：13612021
> 
> 赞同：0
> 
> 时间：2012-11-28T18:32:42.833
> 
> 标签：java, mysql, spring, hibernate, hibernate-annotations

我将 Wicket 与 Spring 和 Hibernate 结合使用，至少这是我想要做的，问题在于自动生成带有 Hibernate 注释的表。

我一直在尝试对配置进行许多更改，但似乎无法弄清楚为什么我的配置没有生成任何表。而且我希望有人能指出我正确的方向，即使是关于我不确定的 Spring 配置。

我已经在链接中包含了我用来尝试使其工作的所有文件，因此它不会是一个很长的配置文件列表。

我正在使用以下带有注释的类[http://schrealex.com/downloads/User.java](http://schrealex.com/downloads/User.java)：

```
@Entity
@Table(name="user")
public class User {

    @Id
    @Column(name="user_id", unique=true, nullable=false)
    @GeneratedValue(strategy=GenerationType.AUTO)
    private Long id;

    @Column(name="username")
    private String username;

    @Column(name="password")
    private String password;

    @Column(name="firstname")
    private String firstname;

    @Column(name="lastname")
    private String lastname;

    @Column(name="birthDate")
    private Date birthDate;

    @Column(name="email")
    private String email;

    @Column(name="profile_image")
    private String profile_image;

    public User() {

    }

    public User(String username, String password, String email) {
        this.username = username;
        this.password = password;
        this.email = email;

    }

    // Getter and Setter methods

} 
```

我正在使用 pom.xml 中描述的以下依赖项：

[http://schrealex.com/downloads/pom.xml](http://schrealex.com/downloads/pom.xml)

我在 applicationContext.xml 和属性中使用以下配置：

[http://schrealex.com/downloads/application.properties](http://schrealex.com/downloads/application.properties)

[http://schrealex.com/downloads/applicationContext.xml](http://schrealex.com/downloads/applicationContext.xml)

最后是 web.xml：

[http://schrealex.com/downloads/web.xml](http://schrealex.com/downloads/web.xml)

如果我遗漏了您想查看的任何文件，请询问。

**编辑 ：-**

添加了启动日志记录：

```
SSL access to the quickstart has been enabled on port 8443
You can access the application using SSL on https://localhost:8443

>>> STARTING EMBEDDED JETTY SERVER, PRESS ANY KEY TO STOP
INFO  - Server                     - jetty-7.6.3.v20120416
INFO  - tandardDescriptorProcessor - NO JSP Support for /, did not find org.apache.jasper.servlet.JspServlet
INFO  - /                          - Initializing Spring root WebApplicationContext
INFO  - ContextLoader              - Root WebApplicationContext: initialization started
INFO  - XmlWebApplicationContext   - Refreshing org.springframework.web.context.support.XmlWebApplicationContext@1c35ce99: display name [Root WebApplicationContext]; startup date [Wed Nov 28 19:53:33 CET 2012]; root of context hierarchy
INFO  - XmlBeanDefinitionReader    - Loading XML bean definitions from class path resource [applicationContext.xml]
INFO  - XmlWebApplicationContext   - Bean factory for application context [org.springframework.web.context.support.XmlWebApplicationContext@1c35ce99]: org.springframework.beans.factory.support.DefaultListableBeanFactory@2a9b5441
INFO  - pertyPlaceholderConfigurer - Loading properties file from URL [file:/C:/Users/CE_REAL/Documents/Development/media-database/target/classes/application.properties]
INFO  - DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@2a9b5441: defining beans [wicketApplication,placeholderConfigurer,dataSource,transactionManager,transactionInterceptor,managerTemplate,sessionFactory]; root of factory hierarchy
INFO  - Version                    - Hibernate Annotations 3.4.0.GA
INFO  - Environment                - Hibernate 3.2.6
INFO  - Environment                - hibernate.properties not found
INFO  - Environment                - Bytecode provider name : cglib
INFO  - Environment                - using JDK 1.4 java.sql.Timestamp handling
INFO  - Version                    - Hibernate Commons Annotations 3.1.0.GA
INFO  - AnnotationConfiguration    - Hibernate Validator not found: ignoring
INFO  - notationSessionFactoryBean - Building new Hibernate SessionFactory
INFO  - earchEventListenerRegister - Unable to find org.hibernate.search.event.FullTextIndexEventListener on the classpath. Hibernate Search is not enabled.
INFO  - ConnectionProviderFactory  - Initializing connection provider: org.springframework.orm.hibernate3.LocalDataSourceConnectionProvider
INFO  - SettingsFactory            - RDBMS: MySQL, version: 5.5.16-log
INFO  - SettingsFactory            - JDBC driver: MySQL-AB JDBC Driver, version: mysql-connector-java-5.1.21 ( Revision: ${bzr.revision-id} )
INFO  - Dialect                    - Using dialect: org.hibernate.dialect.MySQLDialect
INFO  - TransactionFactoryFactory  - Transaction strategy: org.springframework.orm.hibernate3.SpringTransactionFactory
INFO  - actionManagerLookupFactory - No TransactionManagerLookup configured (in JTA environment, use of read-write or transactional second-level cache is not recommended)
INFO  - SettingsFactory            - Automatic flush during beforeCompletion(): disabled
INFO  - SettingsFactory            - Automatic session close at end of transaction: disabled
INFO  - SettingsFactory            - JDBC batch size: 15
INFO  - SettingsFactory            - JDBC batch updates for versioned data: disabled
INFO  - SettingsFactory            - Scrollable result sets: enabled
INFO  - SettingsFactory            - JDBC3 getGeneratedKeys(): enabled
INFO  - SettingsFactory            - Connection release mode: auto
INFO  - SettingsFactory            - Maximum outer join fetch depth: 2
INFO  - SettingsFactory            - Default batch fetch size: 1
INFO  - SettingsFactory            - Generate SQL with comments: disabled
INFO  - SettingsFactory            - Order SQL updates by primary key: disabled
INFO  - SettingsFactory            - Order SQL inserts for batching: disabled
INFO  - SettingsFactory            - Query translator: org.hibernate.hql.ast.ASTQueryTranslatorFactory
INFO  - ASTQueryTranslatorFactory  - Using ASTQueryTranslatorFactory
INFO  - SettingsFactory            - Query language substitutions: {}
INFO  - SettingsFactory            - JPA-QL strict compliance: disabled
INFO  - SettingsFactory            - Second-level cache: enabled
INFO  - SettingsFactory            - Query cache: disabled
INFO  - SettingsFactory            - Cache provider: org.hibernate.cache.EhCacheProvider
INFO  - SettingsFactory            - Optimize cache for minimal puts: disabled
INFO  - SettingsFactory            - Structured second-level cache entries: disabled
INFO  - SettingsFactory            - Echoing all SQL to stdout
INFO  - SettingsFactory            - Statistics: disabled
INFO  - SettingsFactory            - Deleted entity synthetic identifier rollback: disabled
INFO  - SettingsFactory            - Default entity-mode: pojo
INFO  - SettingsFactory            - Named query checking : enabled
INFO  - SessionFactoryImpl         - building session factory
WARN  - ConfigurationFactory       - No configuration found. Configuring ehcache from ehcache-failsafe.xml  found in the classpath: jar:file:/C:/Users/CE_REAL/.m2/repository/net/sf/ehcache/ehcache/1.2.3/ehcache-1.2.3.jar!/ehcache-failsafe.xml
INFO  - essionFactoryObjectFactory - Not binding factory to JNDI, no JNDI name configured
INFO  - SchemaExport               - Running hbm2ddl schema export
INFO  - SchemaExport               - exporting generated schema to database
INFO  - SchemaExport               - schema export complete
INFO  - ContextLoader              - Root WebApplicationContext: initialization completed in 671 ms
INFO  - ContextHandler             - started o.e.j.w.WebAppContext{/,file:/C:/Users/CE_REAL/Documents/Development/media-database/src/main/webapp/},src/main/webapp
WARN  - WebXmlFile                 - web.xml: No url-pattern found for 'filter' with name 'wicket-spring-hibernate'
INFO  - WebXmlFile                 - web.xml: url mapping found for filter with name wicket-spring-hibernate:
WARN  - WicketFilter               - Unable to determine filter path from filter init-param, web.xml, or servlet 3.0 annotations. Assuming user will set filter path manually by calling setFilterPath(String)
INFO  - Application                - [wicket-spring-hibernate] init: Wicket core library initializer
INFO  - RequestListenerInterface   - registered listener interface [RequestListenerInterface name=IBehaviorListener, method=public abstract void org.apache.wicket.behavior.IBehaviorListener.onRequest()]
INFO  - RequestListenerInterface   - registered listener interface [RequestListenerInterface name=IFormSubmitListener, method=public abstract void org.apache.wicket.markup.html.form.IFormSubmitListener.onFormSubmitted()]
INFO  - RequestListenerInterface   - registered listener interface [RequestListenerInterface name=ILinkListener, method=public abstract void org.apache.wicket.markup.html.link.ILinkListener.onLinkClicked()]
INFO  - RequestListenerInterface   - registered listener interface [RequestListenerInterface name=IOnChangeListener, method=public abstract void org.apache.wicket.markup.html.form.IOnChangeListener.onSelectionChanged()]
INFO  - RequestListenerInterface   - registered listener interface [RequestListenerInterface name=IRedirectListener, method=public abstract void org.apache.wicket.IRedirectListener.onRedirect()]
INFO  - RequestListenerInterface   - registered listener interface [RequestListenerInterface name=IResourceListener, method=public abstract void org.apache.wicket.IResourceListener.onResourceRequested()]
INFO  - Application                - [wicket-spring-hibernate] init: Wicket extensions initializer
INFO  - WebApplication             - [wicket-spring-hibernate] Started Wicket version 6.2.0 in DEVELOPMENT mode
********************************************************************
*** WARNING: Wicket is running in DEVELOPMENT mode.              ***
***                               ^^^^^^^^^^^                    ***
*** Do NOT deploy to your live server(s) without changing this.  ***
*** See Application#getConfigurationType() for more information. ***
********************************************************************
INFO  - WebXmlFile                 - web.xml: url mapping found for filter with name wicket.media-database: [/login/*]
INFO  - Application                - [wicket.media-database] init: Wicket core library initializer
INFO  - Application                - [wicket.media-database] init: Wicket extensions initializer
INFO  - WebApplication             - [wicket.media-database] Started Wicket version 6.2.0 in DEVELOPMENT mode
********************************************************************
*** WARNING: Wicket is running in DEVELOPMENT mode.              ***
***                               ^^^^^^^^^^^                    ***
*** Do NOT deploy to your live server(s) without changing this.  ***
*** See Application#getConfigurationType() for more information. ***
********************************************************************
INFO  - AbstractConnector          - Started SocketConnector@0.0.0.0:8080
INFO  - SslContextFactory          - Enabled Protocols [SSLv2Hello, SSLv3, TLSv1, TLSv1.1, TLSv1.2] of [SSLv2Hello, SSLv3, TLSv1, TLSv1.1, TLSv1.2]
INFO  - AbstractConnector          - Started SslSocketConnector@0.0.0.0:8443 
```

**编辑 ：-**

我尝试将我的 User 类重命名为 MediaUser 并将 @Table 注释重命名为 mediaUser 以避免为某些数据库保留 USER 字的问题。

如上所示，我从启动日志记录中发现，它确实说它正在运行导出：

```
INFO - SchemaExport - Running hbm2ddl schema export 
INFO - SchemaExport - exporting generated schema to database 
INFO - SchemaExport - schema export complete 
```

还尝试了 Hibernate 注释的不同方法，比如使用其他导入，@Table 现在通过导入 javax.persistence.Table 来使用，但我也尝试了 Hibernate org.hibernate.annotations.table，到目前为止还没有解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:06:33.743

我找到了问题的答案，注释需要在实例变量或类上设置，它的方法，它需要实现 Serializable，如：

```
@Entity
public class User implements Serializable {

    @Id
    @GeneratedValue
    private Long id;

    private String username;
    private String password;
    private String firstname;
    private String lastname;
    private Date birthDate;
    private String email;
    private String profileImage;

    public User() {

    }

    public User(String username, String password, String email) {
        this.username = username;
        this.password = password;
        this.email = email;

    }

    // Getter and Setter methods

    @Column
    public getUsername() {
        return username;
    }

    @Column
    public getPassword() {
        return password;
    }

    @Column
    public getFirstname() {
        return firstname;
    }

    @Column
    public getLastname() {
        return lastname;
    }

    @Column
    @Temporal(TemporalType.TIME)
    public getBirthDate() {
        return birthDate;
    }

    @Column
    public getEmail() {
        return email;
    }

    @Column
    public getProfileImage() {
        return profileImage;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:03:18.740

我有同样的问题......在我的情况下，问题是因为 USER 字是为某些数据库保留的。

因此，考虑到您的休眠配置文件是正确的，只需在所有表中添加前缀即可解决问题。

我希望这也能解决你的问题=）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-09T03:48:47.203

尝试使用

```
@EntityScan({" yourentitypackagehere "}) 
```

在你的 springboot 应用程序中

# asp.net-mvc - Asp.Net MVC3仅在首先浏览页面A时将未经身份验证的用户重定向到页面B

> ID：13612024
> 
> 赞同：0
> 
> 时间：2012-11-28T18:32:47.790
> 
> 标签：asp.net-mvc

我是 ASP.NET MVC 编程的新手。我的站点中有以下代码，它将所有未签名的用户重定向到位于文件夹 \content\ 的页面，具体取决于他们当前所在页面的结尾。如果用户已被重定向到此页面，我如何修改此代码以便不执行重定向？

```
using System.Globalization;
using System.Web;
using System.Web.Mvc;

namespace MYSITE.Web.Infrastructure
{
    public class CategoryRedirectAttribute : ActionFilterAttribute
    {
        public override void OnActionExecuted(ActionExecutedContext filterContext)
        {
            if (!HttpContext.Current.User.Identity.IsAuthenticated)
            {
                if (((ViewResult)filterContext.Result).ViewName.StartsWith("ProductList", true, CultureInfo.InvariantCulture))
                {
                    var categoryProductPath = filterContext.RouteData.Values["categoryProductPath"].ToString().Split('/');
                    if (categoryProductPath.Length > 0)
                    {
                        HttpContext.Current.Response.Redirect("/Content/" + categoryProductPath[categoryProductPath.Length - 1]);
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:16:25.393

你让自己的生活变得困难。您可以使用基于角色的 FormsAuthentication 来识别用户，并使用控制器或操作方法上的 [Authorize] 属性来控制谁可以做什么。

希望您会发现这很有用：http: [//msdn.microsoft.com/en-us/library/ff398049 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ff398049(v=vs.100).aspx)

# mongodb - 将 mongodb 聚合框架结果导出到新集合

> ID：13612028
> 
> 赞同：18
> 
> 时间：2012-11-28T18:32:54.720
> 
> 标签：mongodb, aggregation-framework

我想将聚合框架结果保存到新集合中。我知道目前使用命令本身的框架是不可能的。

shell中有解决方法吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-10-25T23:08:33.857

从**Mongo 2.6.0**开始，您可以在本地执行此操作而无需任何额外操作。

```
db.<collection>.aggregate( [
     { <operation> },
     { <operation> },
     ...,
     { $out : "<output-collection>" }
] ) 
```

检查新的聚合运算符[$out](http://docs.mongodb.org/master/reference/operator/aggregation/out/)以获得更详细的示例。

**使用这种方式的PS**将不受 16Mb 大小的限制。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-28T18:47:10.580

**更新：**有关在 MongoDB 2.6+ 中执行此操作的更有效方法，请参阅 Salvador 的[答案](https://stackoverflow.com/a/19600746/1259510)。

* * *

将聚合结果保存在变量中，然后将其`result`属性插入到新集合中：

```
var result = db.foo.aggregate(...);
db.bar.insert(result.result); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-13T08:57:11.813

result.result 不再起作用，请尝试 toArray()。

```
var result  = db.coll.aggregate(...);
db.bar.insert(result.toArray()); 
```

# c - 我们可以在创建进程后立即以编程方式将进程附加到 VS 吗？

> ID：13612029
> 
> 赞同：2
> 
> 时间：2012-11-28T18:32:54.563
> 
> 标签：c, debugging, visual-studio-2008, process, pid

> **可能重复：**
> [如何在程序执行的最开始设置断点](https://stackoverflow.com/questions/5513654/how-to-set-breakpoint-at-the-very-beginning-of-program-execution)

我有一个 C 应用程序。我正在使用 VS 2008 进行开发。我需要通过将进程附加到 Visual Studio 来调试 C 代码。在正常情况下，该过程可以简单地附加，但这里有点棘手。

以下是场景：

问题是一旦应用程序运行，应用程序就会给出一些不需要的消息，即创建了 PROCESS。获取 PID 并将其附加到 VS 的时间太短。

我现在的问题是：

我们可以做些什么（编写一些程序或有一些解决方法）以便我们可以在创建进程后立即附加它？

提前致谢。

问候， 阿布舍克·阿南德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:43:10.033

最简单的方法是在源代码的开头设置一个断点，然后使用 Visual Studio 开始调试应用程序。您可以使用 F5 或 Debug|Start Debugging 菜单项来执行此操作。

如果您必须等待另一个进程来启动您的错误程序，请下载并安装“Windows 调试工具”（如果您还没有的话）。可以在这里找到：http: [//msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)

它是 Microsoft 提供的免费调试工具，用于在所有受支持的 Windows 操作系统上进行调试。

它包括一个名为 GFlags 的实用程序。使用 GFlags 设置目标程序的自动调试选项。这是将系统设置为启动调试器的最简单方法，该调试器将在目标应用程序启动时自动启动。我更喜欢使用 WinDbg.exe（它包含在工具包中），但如果您愿意，可以将 Visual Studio 作为调试器启动。

上面的链接包括调试帮助的链接。

# winforms - 在设计视图中双击自定义控件时自动连接自定义事件

> ID：13612031
> 
> 赞同：0
> 
> 时间：2012-11-28T18:33:08.887
> 
> 标签：winforms, user-controls, event-handling

基本上，我在我的 TreeView 衍生品中添加了一个自定义事件。它旨在替换我禁用的 AfterSelected 事件，因为当人们单击树项目时，我需要不同的事件处理机制。

事件处理本身运作良好。但是我希望我的新事件是在设计视图中双击自定义控件时连接的事件。

自定义类称为 CustomTreeView，这就是它声明其新事件的方式。

```
public event EventHandler CustomSelect; 
```

所以基本上，当在设计视图中双击时，我希望它出现在 MyForm.Designer.cs

```
this.MyCustomTreeView.CustomSelect += new System.Windows.Forms.TreeViewEventHandler(this.MyCustomTreeView_CustomSelect); 
```

显然，应该将 MyCustomTreeView_CustomSelect() 函数添加到 MyForm.cs

那么如何在我的自定义控件中进行设置呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:19:19.000

你正在寻找[`DefaultEventAttribute`](http://msdn.microsoft.com/en-us/library/system.componentmodel.defaulteventattribute.aspx)

```
[DefaultEvent("CustomSelect")]
public class MyCustomTreeView : TreeView
{
    //...
} 
```

# sql - 使用 GROUP BY 对两个 SELECT COUNT 查询求和

> ID：13612034
> 
> 赞同：2
> 
> 时间：2012-11-28T18:33:16.077
> 
> 标签：sql, ms-access

我在链接数据库中有两个查询（链接来自两个不同项目数据库的表）。我需要组合查询以获得按 Interaction_Type1 分组的总计数。SQL代码如下：

查询#1：

```
SELECT Sum(Temp.cnt) AS SumOfcnt, Temp.Interaction_Type1
FROM (SELECT COUNT(*) as cnt, Interaction_Type1 from AMERILOCKMasterConversionTable 
GROUP BY Interaction_Type1

UNION ALL

SELECT COUNT(*), Interaction_Type2 from AMERILOCKMasterConversionTable
GROUP BY Interaction_Type2

UNION ALL

SELECT COUNT(*), Interaction_Type3 from AMERILOCKMasterConversionTable
GROUP BY Interaction_Type3
)  AS Temp
GROUP BY Temp.Interaction_Type1; 
```

和查询#2

```
SELECT Sum(Temp.cnt) AS SumOfcnt, Temp.Interaction_Type1
FROM (SELECT COUNT(*) as cnt, Interaction_Type1 from MARKETMasterConversionTable 
GROUP BY Interaction_Type1

UNION ALL

SELECT COUNT(*), Interaction_Type2 from MARKETMasterConversionTable 
GROUP BY Interaction_Type2

UNION ALL

SELECT COUNT(*), Interaction_Type3 from MARKETMasterConversionTable 
GROUP BY Interaction_Type3
)  AS Temp
GROUP BY Temp.Interaction_Type1; 
```

我希望查询产生以下结果：

```
Interaction_Type1          Total
Left_Message                23
Made_Contact                16
Bad_Phone_Number             8
No_Answer                   12 
```

我是 SQL 的新手，并且已经在线研究了所有这些，并且没有运气将这两个查询结合起来产生所需的结果。

任何帮助将不胜感激！！

谢谢！红色的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:44:51.560

你应该有类似的东西

```
SELECT  Integration_Type, SUM(*)
FROM    (  SELECT Integration_Type, SumOfcnt FROM VIEW1
           UNION ALL
           SELECT Integration_Type, SumOfcnt FROM VIEW2)
GROUP BY Integration_Type 
```

但在为您在此处提供的查询创建视图之前，或者只是在单个视图中收集所有查询。

# c - 评估数组的大小

> ID：13612040
> 
> 赞同：-1
> 
> 时间：2012-11-28T18:33:47.003
> 
> 标签：c, sizeof

> **可能重复：**
> [如何找到 sizeof（指向数组的指针）](https://stackoverflow.com/questions/492384/how-to-find-the-sizeofa-pointer-pointing-to-an-array)

编写的示例代码`c`

```
#include<stdio.h>

int main()
{
    char a[]="Visual C++";
    char b[] = "Visual\C++";
    printf("%d, %d\n", sizeof(a), sizeof(b));
    printf("%d, %d", sizeof(*a), sizeof(*b));
    return 0;
} 
```

**输出**

**`11,10`**

**`1,1`**

1.）为什么**`sizeof(a)`**显示`11`，虽然，它只有`10`字符。

2.）为什么**`sizeof(a)`**并**`sizeof(b)`**显示不同的输出，尽管它们具有相同数量的字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T18:37:14.283

因为字符串末尾有一个`null`( ) 并且被解释为单个字符。 `\0``\C`

如果您希望反斜杠显示在 C 字符串中，则必须使用另一个反斜杠对其进行转义。

```
char b[] = "Visual\C++";  \\ 10 characters including the null terminator
char b[] = "Visual\\C++"; \\ 11 characters including the null terminator 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:02:14.807

在 linux 内核中是宏：

```
#define ARRAY_SIZE(x) (sizeof(x) / sizeof((x)[0])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T18:45:13.810

**第 1 点：**

"Visual C++" 长度 = 11 /* 包括空字符 */

"Visual\C++" 长度 = 10 /* 包括空字符和 '\C' 被解释为一个字符。

**第 2 点：**

`*a`表示您正在访问第一个字符。

`*a`<=>`a[0]`两者都是一样的。

`a[0]`在你的情况下是'V'，它的长度是`1`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T18:37:23.573

1 - 因为字符串上有一个包含在 sizeof 中的 00 字节（又名空终止符）

2 *a 是字符串中的第一个字符 - 1 个字符的大小为 1

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T18:38:08.947

`a`包含 10 个字符，*加上终止的 null ( `'\0'`) 字符*；因此大小为 11。

和`a`不`b`包含相同数量的字符。在`b`中，该`\C`部分被视为转义序列，并计为一个字符。如果您希望`\`出现，请使用`"Visual\\C++"`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T18:51:44.713

从人物的角度来看：

```
char a[]="Visual C++";

printf("length = %d\n", strlen(a));
for(int i = 0; i<strlen(a); i++)
    printf("a[%d] = %c (ASCII %d)", i, a[i], a[i]); 
```

使用这样的代码，您将获得

```
length = 11
a[0] = V (86)
a[1] = i (105)
a[2] = s (115)
a[3] = u (117)
a[4] = a (97)
a[5] = l (108)
a[6] =   (32)
a[7] = C (67)
a[8] = + (43)
a[9] = + (43)
a[10] =  (0) 
```

[根据ASCII 表](http://www.asciitable.com/)检查这些值，您可以看到为什么它显示 11（`NULL`终止符）

```
char b[] = "Visual\C++"; 
```

你的第二个字符串中有一个转义字符`\`，有很多[列表](http://www.wilsonmar.com/1eschars.htm)，但它基本上告诉编译器忽略下一个字符，因为它不是要打印的，而是一些特殊的。就像换行符一样：`'\n'`

* * *

根据您对原始帖子的评论，我想我需要澄清两件事：

**额外说明 1：** 特殊字符，例如换行符`'\n'`或空终止符`'\0'`仅占用 1 个额外字节的空间。

**额外说明 2：** `sizeof(a)`将为您提供数组的大小（字符数），因为它充满了每个只需要 1 个字节的字符。当您在其他占用更多空间的类型上使用它时，您需要再执行一步：

```
int arr[4] = {0};
int size_of_arr = sizeof(arr/sizeof(int)); 
```

# android - 如何使服务定期执行多任务并从其他活动中获取数据？

> ID：13612041
> 
> 赞同：0
> 
> 时间：2012-11-28T18:33:57.997
> 
> 标签：android, service, android-activity, timertask

我喜欢让服务定期执行两个任务，可以吗？通过下面的结构，是真的吗？实际上我已经测试过它并且它给了我错误......或者我应该将所有任务嵌入到计时器任务中？

我想问的另一个问题是如何从服务中获取用户的用户名？这是因为我需要用户的用户名来检查和更新任务中的某些内容。用户的用户名可以在 login.java 中获得，它验证用户身份，但是服务在用户访问应用程序之前已经运行，那么我怎么能得到用户的用户名从服务？

运行 MyService.class 时，突然弹出 Timer.class 并给出错误..

![运行代码时的结果](../Images/da4bbbbc02455fc732600d6f449fea70.png)

错误日志：

```
 11-29 03:21:44.102: E/AndroidRuntime(15496): FATAL EXCEPTION: Timer-0
 11-29 03:21:44.102: E/AndroidRuntime(15496): java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
 11-29 03:21:44.102: E/AndroidRuntime(15496):   at android.os.Handler.<init>(Handler.java:121)
 11-29 03:21:44.102: E/AndroidRuntime(15496):   at android.location.LocationManager$ListenerTransport$1.<init>(LocationManager.java:173)
 11-29 03:21:44.102: E/AndroidRuntime(15496):   at android.location.LocationManager$ListenerTransport.<init>(LocationManager.java:173)
 11-29 03:21:44.102: E/AndroidRuntime(15496):   at android.location.LocationManager._requestLocationUpdates(LocationManager.java:579)
 11-29 03:21:44.102: E/AndroidRuntime(15496):   at android.location.LocationManager.requestLocationUpdates(LocationManager.java:446)
 11-29 03:21:44.102: E/AndroidRuntime(15496):   at com.example.android.project.MyService$2.run(MyService.java:107)
 11-29 03:21:44.102: E/AndroidRuntime(15496):   at java.util.Timer$TimerImpl.run(Timer.java:284) 
```

提前致谢..

这是我的代码：

```
public class MyService extends Service{

int counter = 0;
static final int UPDATE_INTERVAL = 15000;
private Timer timer = new Timer();
DefaultHttpClient httpclient;
HttpPost httppost;
String line,result;
HttpResponse response;
InputStream is;
BufferedReader reader;
StringBuilder sb;
final static String MY_ACTION = "MY_ACTION";
LocationManager lm;
LocationListener locationListener;

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

public int onStartCommand(Intent intent, int flags, int startId){
    doSomethingRepeatedly();
    doUpdateLocation();
    return START_STICKY;        
}

private void doSomethingRepeatedly(){
    timer.scheduleAtFixedRate(new TimerTask(){
        public void run(){
        //  Log.d("MyService", String.valueOf(++counter));
            try{
             httpclient = new DefaultHttpClient();
                httppost = new HttpPost("http://www.kryptoquest.com/testing/checking.php");
                response = httpclient.execute(httppost);
                is = response.getEntity().getContent();
        }catch(Exception e){
            Log.e("log_tag", "Error:"+e.toString());
        }

        //convert response to string
        try{
                    reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                sb = new StringBuilder();
                line = null;
                while ((line = reader.readLine()) != null) {

                        sb.append(line + "\n");

                }
                Log.d("test",sb.toString());
                is.close();

                result = sb.toString();

             Intent intent = new Intent();
             intent.setAction(MY_ACTION);

             intent.putExtra("DATAPASSED", result);

             sendBroadcast(intent);

        }catch(Exception e){
                Log.e("log_tag", "Error converting result "+e.toString());
        }
        }
    },10000,UPDATE_INTERVAL);
}

private void doUpdateLocation(){
    timer.scheduleAtFixedRate(new TimerTask(){
        public void run(){
         lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
            locationListener = new MyLocationListener();
            lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 60000, 1000, locationListener);   
        }
    },10000,UPDATE_INTERVAL);
}

 private class MyLocationListener implements LocationListener{

        @Override
        public void onLocationChanged(Location arg0) {
            if(arg0!=null){
                final String lat = String.valueOf(arg0.getLatitude());
                final String lon = String.valueOf(arg0.getLongitude());

                new Thread(){
                    public void run(){
                        try{ 
                            DefaultHttpClient httpclient = new DefaultHttpClient();
                            HttpPost httppost = new HttpPost("http://www.kryptoquest.com/tracker/getLocation.php");
                            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
                            nameValuePairs.add(new BasicNameValuePair("Latitude", lat));
                            nameValuePairs.add(new BasicNameValuePair("Longitude", lon));
                            Log.d("Latitude",lat);
                            Log.d("Longitude",lon);
                            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                            httpclient.execute(httppost);
                        }catch(Exception e){
                            Log.e("log_tag", "Error:"+e.toString());
                        }   
                    }
                }.start();

                lm.removeUpdates(locationListener);
            }       
        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

    }

public void onDestroy(){
    super.onDestroy();

    if(timer != null){
        timer.cancel();
    }

    Toast.makeText(this, "Service Destroyed", Toast.LENGTH_SHORT).show();
}

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:45:04.010

我们有两种方式在 Activity 或 Service 之间共享数据：

**1.** 使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)在 Service 中存储用户名或在 Activity 中读取它

**2.** 使用[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)进行服务和活动之间的通信（将用户名从服务发送到活动）

有关服务和活动之间的通信，请参阅本教程

[http://androidexpernz.wordpress.com/2012/02/14/communication-between-service-and-activity-part-1/](http://androidexperinz.wordpress.com/2012/02/14/communication-between-service-and-activity-part-1/)

[http://blog.philippheckel.com/2012/06/10/android-example-communication-between-activity-and-service-using-messaging/](http://blog.philippheckel.com/2012/06/10/android-example-communication-between-activity-and-service-using-messaging/)

如果您发布 logcat，您的第一个问题不清楚，那么很容易解决第一个问题。

# caching - 数组的缓存未命中率

> ID：13612046
> 
> 赞同：2
> 
> 时间：2012-11-28T18:34:19.230
> 
> 标签：caching, cpu-cache

我试图弄清楚如何计算数组的未命中率。我有答案，但我不明白答案是如何得出的。我有以下代码：

```
int C[N1][N2];
int A[N1][N3];
int B[N3][N2];

initialize_arrays(A, B, C, N1, N2, N3);

for(i=0; i<N1; ++i)
   for(j=0; j<N2; ++j)
      for(k=0; k<N3, ++k)
         C[i][j] += A[i][k] * B[k][j]; 
```

我还有以下信息：（`N1=N2=N3=2048`这是什么意思？？）。该处理器具有 32kB 的 L1 数据高速缓存，行大小为 64B（无 L2 高速缓存）。（什么是线条尺寸？）

我知道数组 C 的未命中率是`(N^2/16)/N^3`. 我知道公式是`(total misses)/(total accesses)`。我看到有`N^3`总访问，但他们是如何获得总未命中的？

`(N^3)/(N^3)`我也知道数组 B:和 A:的未命中率`(N^2/16)/N^3`。有人可以向我解释他们是如何在这里得到全部未命中的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-04T07:45:35.020

始终以行的粒度访问/管理缓存。这里的行大小是64B。这意味着在一个高速缓存行中，一个高速缓存行中将有 16 个元素（64B / 4B = 16）。接下来重要的是每 17 个元素都在一个新行中，一旦将一行放入缓存，它可能会产生 15 次命中。

解决了这个问题，让我们看看访问模式。A[0][0]、B[0][0]、C[0][0]、A[0][1]、B[1][0]、C[0][0]、A[ 0][2]、B[2][0]、C[0][0]、...... A[0][16]、B[16][0]、C[0][0 ]、A[0][17]、B[17][0]、C[0][0]、……等等

现在由于一行有 16 个元素，并且可以安全地假设内存中元素的行主要放置 A[0][0] - A[0][15] 将属于第一个缓存行（让我们调用这个 AL1) 并且类似地让 B[0][0] - B[0][15] 属于 BL1 行。根据这些信息，我们可以根据缓存行编写访问模式。AL1，BL1，CL1，AL1，BL129，CL1，AL1，BL257，CL1，...... AL1，BL2049，CL1，AL2，BL2176，CL1，......等等。

现在缓存大小为 32kB，这意味着缓存可以容纳 512 行。由于这是 L1，我们假设它是双向关联缓存。因此有 256 套。这意味着在数组的每 256 行之后，第 257 行映射到与第 1 行相同的集合。

访问映射到集合 1 的行时的缓存内容如下所示

第一次迭代 - 内部

```
Access to - AL1 - Miss
 AL1 
Access to - BL1 - Miss
 AL1
 BL1
Access to - CL1 - Miss
 CL1
 BL1 
```

第二次迭代 - 内部

```
Access to - AL1 - Miss
 CL1
 AL1
Access to - CL1 - Hit
 CL1
 AL1 
```

第三次迭代 - 内部

```
Access to - AL1 - Hit
 CL1
 AL1
Access to - BL257 - Miss
 BL257
 AL1
Access to - CL1 - Miss
 BL257
 CL1 
```

第 4 次迭代 - 内部

```
Access to - AL1 - Miss
 AL1
 CL1
Access to - CL1 - Hit
 AL1
 CL1 
```

第 5 次迭代 - 内部

```
Access to - AL1 - Hit
 CL1
 AL1
Access to - BL513 - Miss
 BL513
 AL1
Access to - CL1 - Miss
 BL513
 CL1 
```

. . .

第 16 次迭代 - 内部

```
Access to - AL1 - Miss
 AL1
 CL1
Access to - CL1 - Hit
 AL1
 CL1 
```

第 17 次迭代 - 内部

```
Access to - BL2049 - Miss
 BL2049
 CL1
Access to - CL1 - Hit
 BL2049
 CL1 
```

第 18 次迭代 - 内部

```
Access to - CL1 - Hit
 BL2049
 CL1 
```

对于中间循环的第一次迭代。我们有第 1 组，

```
A -> M, M, H, M, H, M, H, M, H, M, H, M, H , M, H, M, ~ , ~ , ~ , ~ , ....... 
=> after 2048 iterations - 7 hits 9 misses, 16 accesses

B -> M, ~ , M, ~ ,  M, ~ , ........
=> after 2048 iterations - 0 Hits, 1024 misses, 1024 accesses

C -> M, H, M, H, M, H, M, H, M, H, M, H, M, H, M, H, H , H, H , H, ......
=> after 2048 iterations - 2040 hits, 8 misses, 2048 accesses 
```

对于中间循环的第 2-16 次迭代，

```
Exact hit / miss / access pattern as before. 
```

对于中间循环的第 17 - 2048 次迭代，

```
A -> same as before
B -> No accesses
C -> No accesses 
```

总结一下 - 对于外循环的 1 次迭代，我们有集合 1，

```
A -> N*9 misses , N * 16 accesses
B -> N/2 * 16 Misses , N/2 * 16 accesses
C -> 8 * 16 Misses , N * 16 accesses 
```

在外循环中，我们可以看到，对于数组 C 和 A，每次交替迭代都将具有与第一次迭代（如上总结）相同的命中/未命中/访问模式。外循环的每次迭代都将具有相同的命中/未命中/访问模式。访问模式 a 数组 B 的第一次迭代。

因此，（终于！）

对于 Set 1，在程序结束时，我们有

```
A -> N^2 * 9 / 2 misses, N^2 * 8 accesses
B -> N^2 * 8 misses, N^2 * 8 accesses
C -> N * 64 misses, N^2 * 8 accesses 
```

访问模式在所有集合中都是相似的。因此，在程序结束时，我们拥有所有集合

```
A -> N^2 * 1152 misses, N^3 accesses
B -> N^3 misses, N^3 accesses
C -> N^2 * 8 misses, N^3 accesses 
```

我知道这与问题中指出的不同。我不知道怎么做。我会很高兴听到其他答复。

# xml - ANT在部署项目时似乎正在破坏汉字

> ID：13612048
> 
> 赞同：2
> 
> 时间：2012-11-28T18:34:22.800
> 
> 标签：xml, ant, utf-8, character-encoding

我有一个包含以下文本的 XSL 文件：

```
<xsl:variable name="orderName" select="'@ORDER_NAME@'"/> 
```

在 XSL 文件的顶部，编码设置为 UTF-8

```
<?xml version="1.0" encoding="UTF-8"?> 
```

如果我在 Eclipse 中检查文件属性，文本文件编码被列为： **默认（由内容类型确定：UTF-8）**

然后有一个ANT过滤器设置文件：

```
<project name="filterset" basedir=".">
    <property name="conn" value="TEST"/>
    <filterset id="conn_props">
        <filter token="ORDER_NAME" value="${ORDER_NAME}"/>
    </filterset>
</project> 
```

然后在 .properties 文件中定义**ORDER_NAME**的值

```
ORDER_NAME=电子客票 
```

这是为部署而运行的 ANT deploy.xml 的摘录

```
<copy todir="${working.dir}/config" failonerror="false" overwrite="true" encoding="UTF-8">
    <fileset dir="${supplier.dir}">
        <include name="Supplier/**/*.xsl"/>
        <include name="Supplier/**/*.xml"/>
    </fileset>
    <filterset refid="conn_props"/>
</copy> 
```

这应该将 XSL 文件从**供应商**目录复制到**配置**目录并替换**ORDER_NAME**令牌。但是，在部署项目并打开文件后，文本损坏为：

```
<xsl:variable name="orderName" select="'çµå­å®¢ç¥'"/> 
```

我在 Windows 7 64 位、Eclipse Juno 32 位和 ANT 1.7.1 上运行它（Ant 版本无法升级）。我见过类似的问题，但没有任何令人满意的答案（或任何似乎适用于这种特定情况的问题）。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-22T17:44:43.653

我自己解决了这个问题，但其他人可能无法复制我的问题，因为我为了简化而将信息从原始问题中删除（为了清楚起见，我已经编辑了问题）。

问题是属性文件的文件类型，其中包含：

```
ORDER_NAME=电子客票 
```

是**UTF-8**并且它需要是**ISO-8859-1**，因为这是 ANT 所期望的，请参阅： [Apache Ant Property](https://ant.apache.org/manual/Tasks/property.html)

因此将文件转换为 ISO-8859-1 并重新定义 ORDER_NAME：

```
ORDER_NAME=\u7535\u5B50\u5BA2\u7968 
```

结果在 XSL 文件中包含：

```
<xsl:variable name="orderName" select="'电子客票'"/> 
```

正如预期的那样。

# asp.net-mvc - JQuery UI 选项卡 - 始终在第一个 div 中呈现 html

> ID：13612061
> 
> 赞同：0
> 
> 时间：2012-11-28T18:35:08.797
> 
> 标签：asp.net-mvc, jquery-ui, tabs

我在我的 asp.net MVC(RAZOR) 应用程序中使用 jquery UI Tab。我发现的问题是每个选项卡单击都会在第一个 div 中呈现 html，即这里 div 的 id 为“tabs-1”。

# jQuery代码：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.0/jquery-ui.min.js"></script>

<script type="text/javascript">
    $(function ($) {
        $('#example').tabs().addClass("ui-tabs-vertical ui-helper-clearfix");
        $("#example li").removeClass("ui-corner-top").addClass("ui-corner-left");
    });
</script> 
```

# HTML：

```
<div id="example"  class="tabs"  style="width: 698px;">
                <ul style="list-style: none;">
                    <li><a href="/Details/Overview">Overview</a></li>
                    <li><a href="/Version/Details?ID=@ViewBag.versionId&grpId=5" >Specifications</a></li>
                    <li><a href="/Version/Details?ID=@ViewBag.versionId&grpId=1" >Exterior</a></li>
                    <li><a href="/Version/Details?ID=@ViewBag.versionId&grpId=2" >Interior</a></li>
                    <li><a href="/Version/Details?ID=@ViewBag.versionId&grpId=3" >Dimensions</a></li>
                    <li><a href="/Version/Details?ID=@ViewBag.versionId&grpId=4" >Feature</a></li>
                    <li><a href="/Version/Details?versionID=@ViewBag.versionId&grpId=6" >Instrument Panel</a></li>
                    <li><a href="#tabs-8">Color</a></li>
                </ul>
                <div id="tabs-1" style="width: 698px;">
                    This is Tab one
                </div>
                <div id="tabs-2">
                </div>
                <div id="tabs-3">
                </div>
                <div id="tabs-4">
                </div>
                <div id="tabs-5">
                </div>
                <div id="tabs-6">
                </div>
                <div id="tabs-7">
                </div>
                <div id="tabs-8">
                </div>
            </div> 
```

请指导我。

谢谢，

@保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:42:02.747

最后，我通过匹配标题属性和容器的 id 得到了解决方案，如下所示

```
<li><a href="/Details/Overview" title="tabs-1">OverView</a></li>
<li><a href="/Version/Details?ID=@ViewBag.versionId&grpId=5" title="tabs-2">Specifications</a></li>

<div id="tabs-1" style="width: 698px;">This is Tab one</div>
<div id="tabs-2"> </div> 
```

谢谢，

@保罗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:42:05.293

我认为 id="example" 应该与 class="tabs" div 一起下降一级。

```
 <div id="example" class="tabs" style="width: 698px;">
            <ul style="list-style: none;">
                <li><a href="/Details/Overview">This is Tab one</a></li>
                <li><a href="/Version/Details?ID=@ViewBag.versionId&grpId=5" >Specifications</a></li>
                <li><a href="/Version/Details?ID=@ViewBag.versionId&grpId=1" >Exterior</a></li>
                <li><a href="/Version/Details?ID=@ViewBag.versionId&grpId=2" >Interior</a></li>
                <li><a href="/Version/Details?ID=@ViewBag.versionId&grpId=3" >Dimensions</a></li>
                <li><a href="/Version/Details?ID=@ViewBag.versionId&grpId=4" >Feature</a></li>
                <li><a href="/Version/Details?versionID=@ViewBag.versionId&grpId=6" >Instrument Panel</a></li>
                <li><a href="#tabs-8">Color</a></li>
            </ul>
            <div id="tabs-1" style="width: 698px;">
                Overview
            </div>
            <div id="tabs-2">
            </div>
            <div id="tabs-3">
            </div>
            <div id="tabs-4">
            </div>
            <div id="tabs-5">
            </div>
            <div id="tabs-6">
            </div>
            <div id="tabs-7">
            </div>
            <div id="tabs-8">
            </div>
        </div>
   </div> 
```

**编辑：**

```
$('#example').tabs().addClass("ui-tabs-vertical ui-helper-clearfix");
$("#example li").removeClass("ui-corner-top").addClass("ui-corner-left");
$('#example') 
```

您的 jquery 中的第三行应该做什么？它是否会生成阻止选项卡正常运行的 javascript 错误？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:40:06.773

您的问题是您的锚标签中的href。您必须将它们格式化为“#tabs-number”。

这是一个 jsfiddle 向您展示它的工作原理（完全没有任何 CSS 样式，因为您的示例中也没有提供。但是单击的每个选项卡都会将您带到不同的选项卡内容。

[http://jsfiddle.net/UBxPJ/](http://jsfiddle.net/UBxPJ/)

但基本上，变化是：

```
 <li><a href="#tabs-1">Overview</a></li>
            <li><a href="#tabs-2" >Specifications</a></li>
            <li><a href="#tabs-3" >Exterior</a></li>
            <li><a href="#tabs-4" >Interior</a></li>
            <li><a href="#tabs-5" >Dimensions</a></li>
            <li><a href="#tabs-6" >Feature</a></li>
            <li><a href="#tabs-7" >Instrument Panel</a></li>
            <li><a href="#tabs-8">Color</a></li> 
```

# xml - XML 和 XSLT 表数据和描述移动

> ID：13612065
> 
> 赞同：0
> 
> 时间：2012-11-28T18:35:21.290
> 
> 标签：xml, xslt, dynamic, xmltable

作业完成。我通过反复试验弄清楚了一切。只有一件事困扰着我。在位于公司名称下方的每个表格下方，表格下方和下一个公司名称之前没有空格。它看起来很俗气。想在每张桌子下面加一个空格。有任何想法吗？

我正在研究一个使用 XML 和 XSLT 的项目，并且已经完成了相当多的工作。剩下的就是将描述文本放在表格的右侧，并用适当的信息填充表格的第二列。

我已经为描述性文本尝试了 float:right、text-align:right 和 align:right，但它不会移动到表格的右侧。关于如何做到这一点的任何想法？

此外，我需要在每一行的表格的第二列中填写一些与该公司直接相关的信息。我了解如何使用数据来填充表格，但这些信息不是数据。例如，表中的第一行和第一列是“类别”。我将“类别”一词硬编码到第一列。对于该行的第二列，我需要显示正确的类别类型，如“工业”，但“工业”这个词不是数据 - 它的设置如下：工业。我已将信息的去向留空。

这是我的网站的链接：

这是我的代码：

XML

```
<?xml version="1.0" encoding="UTF-8" ?>

<?xml-stylesheet type="text/xsl" href="stock2.xsl"?>

<portfolio>

<author>Kevin Summers</author>
<date>11/24/2008</date>
<time>14:54</time>

<stock>
  <sName symbol="AA">Aluminum Company of America</sName>
  <description>Alcoa Inc. is a producer of primary aluminum, fabricated aluminum, and 
               alumina, and is active in all major aspects of the industry, including 
               technology, mining, refining, smelting, fabricating, and recycling. 
               Alcoa serves customers worldwide in the packaging, consumer, automotive, 
               aerospace and other transportation, building and construction, industrial 
               products and distribution markets. Related businesses include packaging 
               machinery, precision castings, vinyl siding, plastic bottles and closures, 
               fiber-optic cables, and electrical distribution systems for cars and 
               trucks. Alcoa's operations consist of five worldwide segments: Alumina 
               and Chemicals, Primary Metals, Flat-Rolled Products, Engineered Products, 
               and Packaging and Consumer Goods.
  </description>
  <category>Industrials</category>
  <link>http://www.alcoa.com</link>
  <year_high>42.00</year_high>
  <year_low>27.36</year_low>
  <pe_ratio>39.40</pe_ratio>
  <earnings>0.73</earnings>
  <yield>2.09</yield>
  <today open="29.60" high="29.94" low="28.59" current="29.20" vol="2.94" />
</stock>

<stock>
  <sName symbol="UCL">Unocal Corporation</sName>
  <description>Unocal Corporation operates as the parent of Union Oil Company of 
               California. Virtually all operations are conducted by Union Oil and 
               its subsidiaries. Unocal is an independent oil and gas exploration 
               and production company, with principal operations in North America 
               and Asia. Unocal is also a producer of geothermal energy and a provider 
               of electrical power in Asia. Other activities include ownership in 
               proprietary and common carrier pipelines, natural gas storage facilities 
               and the marketing and trading of hydrocarbon commodities.
  </description>
  <category>Industrials</category>
  <link>http://www.unocal.com</link>
  <year_high>39.70</year_high>
  <year_low>29.51</year_low>
  <pe_ratio>24.57</pe_ratio>
  <earnings>1.34</earnings>
  <yield>2.43</yield>
  <today open="33.35" high="34.00" low="32.66" current="33.80" vol="1.01" />
</stock>

<stock>
  <sName symbol="GM">General Motors Corporation</sName>
  <description>General Motors Corp. is a diversified automotive business with 
               additional interests in communications services, locomotives, finance 
               and insurance. GM's automotive business designs, manufactures, and/or 
               markets vehicles primarily in North America under the Chevrolet, Pontiac, 
               GMC, Oldsmobile, Buick, Cadillac, Saturn and Hummer nameplates, and 
               outside North America under the Opel, Vauxhall, Holden, Isuzu, Saab, 
               Buick, Chevrolet, GMC and Cadillac nameplates. GM's communications 
               services relate to its Hughes Electronics Corporation subsidiary, 
               which includes digital entertainment, information and communications 
               services, and satellite-based private business networks. GM also is 
               engaged in the design, manufacturing and marketing of locomotives and 
               heavy-duty transmissions. GM's financing and insurance operations are 
               conducted primarily through General Motors Acceptance Corporation, which 
               provides a broad range of financial services.
  </description>
  <category>Industrials</category>
  <link>http://www.gm.com</link>
  <year_high>68.17</year_high>
  <year_low>39.17</year_low>
  <pe_ratio>11.29</pe_ratio>
  <earnings>4.06</earnings>
  <yield>4.36</yield>
  <today open="46.67" high="47.00" low="44.53" current="46.67" vol="6.08" />
</stock>

<stock>
  <sName symbol="EK">Eastman Kodak Company</sName>
  <description>Eastman Kodak Company (Kodak) is engaged primarily in developing, 
               manufacturing and marketing traditional and digital imaging products, 
               services and solutions for consumers, professionals, healthcare 
               providers, the entertainment industry and other commercial customers. 
               The Company is a major participant in the "infoimaging" industry, 
               which is composed of devices (digital cameras and personal data 
               assistants), infrastructure (online networks and delivery systems for 
               images) and services and media (software, film and paper enabling 
               people to access, analyze and print images). Kodak uses its technology, 
               market reach and a host of industry partnerships to provide products 
               and services for customers that need the information-rich content that 
               images contain.
  </description>
  <category>Industrials</category>
  <link>http://www.kodak.com</link>
  <year_high>47.30</year_high>
  <year_low>24.40</year_low>
  <pe_ratio>na</pe_ratio>
  <earnings>-0.13</earnings>
  <yield>6.29</yield>
  <today open="29.40" high="29.84" low="27.83" current="29.84" vol="3.16" />
</stock>

<stock>
  <sName symbol="R">Ryder Systems Incorporated</sName>
  <description>Ryder System, Inc. is a provider of logistics, supply chain and 
               transportation management solutions worldwide. The Company operates 
               in three reportable business segments: Fleet Management Solutions, 
               which provides full-service leasing, commercial rental and programmed 
               maintenance of trucks, tractors and trailers to customers, principally 
               in the United States, Canada and the United Kingdom; Supply Chain 
               Solutions, which provides comprehensive supply chain consulting and 
               lead logistics management solutions that support customers' entire 
               supply chains, from inbound raw materials through distribution of 
               finished goods throughout North America, in Latin America, Europe and 
               Asia, and Dedicated Contract Carriage, which provides vehicles and 
               drivers as part of a dedicated transportation solution, principally 
               in North America. 
  </description>
  <category>Transportation</category>
  <link>http://www.ryder.com</link>
  <year_high>31.09</year_high>
  <year_low>17.02</year_low>
  <pe_ratio>13.79</pe_ratio>
  <earnings>1.85</earnings>
  <yield>2.35</yield>
  <today open="25.62" high="26.29" low="24.93" current="25.23" vol="0.26" />
</stock>

<stock>
  <sName symbol="ABF">Airborne Freight Corporation</sName>
  <description>Airborne Freight Corporation is an air express company and air freight 
               forwarder that expedites shipments of all sizes to destinations 
               throughout the United States and most foreign countries. ABX Air, Inc., 
               the Company's principal wholly owned subsidiary, provides domestic 
               express cargo service and cargo service to Canada. The Company is the 
               sole customer of ABX for this service. ABX also offers limited charter 
               service. Airborne Express provides door-to-door express delivery of 
               small packages and documents throughout the United States and to and 
               from most foreign countries. The Company also acts as an international 
               and domestic freight forwarder for shipments of any size.
  </description>
  <category>Transportation</category>
  <link>http://www.airborne.com</link>
  <year_high>23.34</year_high>
  <year_low>7.00</year_low>
  <pe_ratio>207.67</pe_ratio>
  <earnings>0.06</earnings>
  <yield>1.28</yield>
  <today open="12.80" high="13.18" low="11.90" current="13.00" vol="1.00" />
</stock>

<stock>
  <sName symbol="LUV">Southwest Airlines Corporation</sName>
  <description>Southwest Airlines Co. is a domestic airline that provides primarily 
               short-haul, high-frequency, point-to-point, low-fare service. Southwest 
               focuses principally on point-to-point, rather than hub-and-spoke service 
               in markets with frequent, conveniently timed flights and low fares. 
               The Company serves many conveniently located satellite or downtown 
               airports such as Dallas Love Field, Houston Hobby, Chicago Midway, 
               Baltimore-Washington International, Burbank, Manchester, Oakland, 
               San Jose, Providence, Ft. Lauderdale/Hollywood and Long Island airports, 
               which are typically less congested than other airlines' hub airports.
  </description>
  <category>Transportation</category>
  <link>http://www.southwest.com</link>
  <year_high>22.00</year_high>
  <year_low>11.25</year_low>
  <pe_ratio>25.46</pe_ratio>
  <earnings>0.54</earnings>
  <yield>0.07</yield>
  <today open="14.00" high="14.59" low="13.53" current="14.00" vol="4.03" />
</stock>

<stock>
  <sName symbol="CNI">Canadian National Railway Corporation</sName>
  <description>Canadian National Railway is the only rail network on the continent 
               to connect three coasts: the Pacific, the Atlantic and the Gulf of 
               Mexico. The Company derives revenue from seven business units. The 
               Petroleum and Chemicals unit transports a wide range of commodities, 
               including chemicals, plastics, petroleum and gas products. The Metals 
               and Minerals unit primarily transports nonferrous base metals, steel, 
               equipment and parts. The Forest Products unit transports various types 
               of lumber, panels, wood chips, wood pulp, pulpwood, printing paper, 
               linerboard and newsprint. The Coal unit transports thermal and 
               metallurgical grades of coal. The Grain and Fertilizer primarily 
               transports commodities grown in western Canada and the United States 
               Midwest. The Intermodal unit consists of a domestic segment and an 
               international segment that transport consumer and manufactured goods. 
               The Automotive unit is a carrier of automotive products originating 
               in southwestern Ontario and Michigan.
  </description>
  <category>Transportation</category>
  <link>http://www.cnrail.com</link>
  <year_high>53.75</year_high>
  <year_low>33.00</year_low>
  <pe_ratio>9.17</pe_ratio>
  <earnings>5.16</earnings>
  <yield>1.73</yield>
  <today open="47.70" high="48.14" low="46.63" current="47.19" vol="0.35" />
</stock>

<stock>
  <sName symbol="UNP">Union Pacific Corporation</sName>
  <description>Union Pacific Corporation operates primarily in the areas of rail 
               transportation, through its indirect wholly owned subsidiary Union 
               Pacific Railroad Company, and trucking, through its indirect wholly owned 
               subsidiaries Overnite Transportation Company and Motor Cargo Industries, 
               Inc. Union Pacific Railroad Company is a Class I railroad that operates 
               in the United States, with over 33,000 route miles linking Pacific Coast 
               and Gulf Coast ports to the Midwest and eastern United States gateways 
               and several north/south corridors to key Mexican gateways. Overnite is 
               a major interstate trucking company specializing in less-than-truckload 
               (LTL) shipments. Motor Cargo is a western regional LTL carrier that 
               provides service throughout 10 western states. The Company's other product 
               lines are comprised of the corporate holding company, which largely 
               supports the Railroad, Fenix LLC, affiliated technology companies and 
               self-insurance activities.
  </description>
  <category>Transportation</category>
  <link>http://www.up.com</link>
  <year_high>59.70</year_high>
  <year_low>58.15</year_low>
  <pe_ratio>14.32</pe_ratio>
  <earnings>4.06</earnings>
  <yield>1.38</yield>
  <today open="59.00" high="59.70" low="58.20" current="59.32" vol="1.81" />
</stock>

<stock>
  <sName symbol="ED">Consolidated Edison Corporation</sName>
  <description>Consolidated Edison, Inc. (Con Edison) is the holding company of 
               Consolidated Edison Company of New York, Inc. (Con Edison of New York) 
               and Orange and Rockland Utilities, Inc. (OR). Con Edison's principal 
               business segments are the regulated electric, gas and steam businesses 
               of its utility subsidiaries, and the unregulated businesses of its other 
               subsidiaries. Con Edison of New York provides electric service in all 
               of New York City (except part of Queens) and most of Westchester County, 
               an approximately 660-square-mile service area with a population of more 
               than eight million. It also provides gas service in Manhattan, The Bronx 
               and parts of Queens and Westchester, and steam service in part of 
               Manhattan, and its utility subsidiaries provide electric service in 
               southeastern New York and in adjacent sections of New Jersey and 
               northeastern Pennsylvania, an approximately 1,350 square mile service 
               area.
  </description>
  <category>Utilities</category>
  <link>http://www.conedison.com</link>
  <year_high>45.40</year_high>
  <year_low>35.50</year_low>
  <pe_ratio>11.76</pe_ratio>
  <earnings>3.16</earnings>
  <yield>5.98</yield>
  <today open="37.17" high="37.50" low="36.43" current="37.05" vol="1.22" />
</stock>

<stock>
  <sName symbol="AEP">American Electrical Power Company, Incorporated</sName>
  <description>American Electric Power Company, Inc. (AEP) is a public utility holding 
               company that directly or indirectly owns domestic electric utility 
               subsidiaries and varying percentages of other subsidiaries. The operating 
               revenues of AEP and its subsidiaries are mostly derived from the marketing 
               and trading of power and gas and the furnishing of electric service. The 
               Company's operations are divided into three business segments: Wholesale, 
               Energy Delivery and Other. The Wholesale Segment involves the generation 
               of electricity for sale to retail and wholesale customers, the marketing 
               and trading of electricity and gas worldwide, gas pipeline and storage 
               services, and other energy supply related business. The Energy Delivery 
               Segment is engaged in domestic electricity transmission and distribution. 
               The Other Segment involves foreign electricity generation investments, 
               foreign electricity distribution and supply investments, and 
               telecommunication services.
  </description>
  <category>Utilities</category>
  <link>http://www.aep.com</link>
  <year_high>48.90</year_high>
  <year_low>33.02</year_low>
  <pe_ratio>12.98</pe_ratio>
  <earnings>2.74</earnings>
  <yield>6.75</yield>
  <today open="36.10" high="36.42" low="34.35" current="34.45" vol="2.67" />
</stock>

<stock>
  <sName symbol="PPL">PPL Corporation</sName>
  <description>PPL Corporation is an energy and utility holding company. Through its 
               subsidiaries, PPL generates electricity in power plants in the 
               northeastern and western United States, markets wholesale or retail 
               energy primarily in the northeastern and western portions of the 
               United States and in Canada; delivers electricity to nearly six million 
               customers in the United States, United Kingdom and Latin America, and 
               provides energy services for businesses in the mid-Atlantic and 
               northeastern United States. PPL is organized in segments consisting of 
               Supply, Delivery and International. In addition, certain corporate 
               service functionsare provided by PPL Services, an unregulated subsidiary 
               of PPL.
  </description>
  <category>Utilities</category>
  <link>http://www.pplresources.com</link>
  <year_high>53.45</year_high>
  <year_low>28.54</year_low>
  <pe_ratio>11.10</pe_ratio>
  <earnings>2.69</earnings>
  <yield>4.82</yield>
  <today open="30.05" high="30.62" low="29.40" current="30.50" vol="0.84" />
</stock>

<stock>
  <sName symbol="MRO">Marathon Oil Corporation</sName>
  <description>Marathon Oil Corporation is engaged in the worldwide exploration and 
               production of crude oil and natural gas; domestic refining, marketing 
               and transportation of crude oil and petroleum products, primarily 
               through its 62%-owned subsidiary, Marathon Ashland Petroleum LLC (MAP), 
               and other energy-related businesses. Marathon is conducting exploration 
               and development activities in 11 countries. Refining, marketing and 
               transportation operations are primarily conducted by MAP and its 
               subsidiaries, including its wholly owned subsidiaries, Speedway 
               SuperAmerica LLC and Marathon Ashland Pipe Line LLC. Marathon also owns 
               interest in various pipeline systems that were not contributed to MAP. 
               Marathon, through its wholly owned subsidiary, Marathon Power Company, 
               Ltd., pursues development, construction, ownership and operation of 
               integrated gas and electric power projects in the global electrical 
               power market.
  </description>
  <category>Industrials</category>
  <link>http://www.marathon.com</link>
  <year_high>32.75</year_high>
  <year_low>23.28</year_low>
  <pe_ratio>8.36</pe_ratio>
  <earnings>2.86</earnings>
  <yield>3.85</yield>
  <today open="24.15" high="24.63" low="23.70" current="24.08" vol="1.84" />
</stock>

<stock>
  <sName symbol="AZO">Autozone Corporation</sName>
  <description>AutoZone, Inc. is a specialty retailer of automotive parts and 
               accessories, primarily focusing on do-it-yourself customers. Each 
               auto parts store carries an extensive product line for cars, vans and 
               light trucks, including new and re-manufactured automotive hard parts, 
               maintenance items and accessories. The Company also has a commercial 
               sales program in the United States that provides commercial credit and 
               prompt delivery of parts and other products to local repair garages, 
               dealers and service stations. AutoZone does not sell tires or perform 
               automotive repair or installation. In addition, the Company sells 
               automotive diagnostic and repair information software through its ALLDATA 
               subsidiary, and diagnostic and repair information through 
               alldatadiy.com.
  </description>
  <category>Industrials</category>
  <link>http://www.autozone.com</link>
  <year_high>84.50</year_high>
  <year_low>38.07</year_low>
  <pe_ratio>22.12</pe_ratio>
  <earnings>3.04</earnings>
  <yield>na</yield>
  <today open="68.00" high="69.30" low="65.80" current="67.19" vol="1.59" />
</stock>

</portfolio> 
```

XSLT

```
<?xml version="1.0" encoding="UTF-8" ?>

<xsl:stylesheet version="1.0"
            xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output method="html" version="4.0" />

<xsl:template match="/">
<html>

    <head>
      <title>Hardin Financial</title>
    </head>
    <body>
      <h1 align="center">Current Stock Values</h1>

      <table border="2" align="center">
        <tr>
          <th>Stock</th>
          <th>Current</th>
          <th>Open</th>
          <th>High</th>
          <th>Low</th>
          <th>Volume</th>
        </tr>

          <xsl:for-each select="portfolio/stock">

            <tr>
            <td>
              <xsl:choose>
                <xsl:when test="today/@current &lt; today/@open">
                  <img src="down.gif" />
                </xsl:when>
                <xsl:when test="today/@current &gt; today/@open">
                  <img src="up.gif" />
                </xsl:when>
                <xsl:when test="today/@current &lt; today/@open">
                  <img src="down.gif" />
                </xsl:when>
                <xsl:otherwise>
                  <img src="same.gif" />
                </xsl:otherwise>
              </xsl:choose>

              <xsl:value-of select="sName/@symbol"/>
            </td>

            <xsl:apply-templates select="today/@open" />
            <xsl:apply-templates select="today/@high" />
            <xsl:apply-templates select="today/@low" />
            <xsl:apply-templates select="today/@current" />
            <xsl:apply-templates select="today/@vol" />
          </tr>

          </xsl:for-each>

      </table>

      <hr></hr>
      <hr></hr>

      <h1 align="center">Summary Information</h1>

      <xsl:for-each select="portfolio/stock">
      <xsl:apply-templates select="sName" />

      <table border="10" style="float:left" cellpadding="2" cellspacing="3">
        <tr>
          <td><b>Category</b></td>
          <td>
            <xsl:apply-templates select="category" />
          </td>
        </tr>
        <tr>
          <td><b>Year High</b></td>
          <td>
            <xsl:apply-templates select="year_high" />
          </td>
        </tr>
        <tr>
          <td><b>Year Low</b></td>
          <td>
            <xsl:apply-templates select="year_low" />
          </td>
        </tr>
        <tr>
          <td><b>P/E Ratio</b></td>
          <td>
            <xsl:apply-templates select="pe_ratio" />
          </td>
        </tr>
        <tr>
          <td><b>Earnings</b></td>
          <td>
            <xsl:apply-templates select="earnings" />
          </td>
        </tr>
        <tr>
          <td><b>Yield</b></td>
          <td>
            <xsl:apply-templates select="yield" />
          </td>
        </tr>

      </table>

      <xsl:apply-templates select="description" />

      </xsl:for-each>
      <br />
  </body>

</html>
</xsl:template>

<xsl:template match="@open|@high|@low|@current|@vol">
<td>
  <xsl:value-of select="." />
</td>
</xsl:template>

<xsl:template match="sName">
<h3 style="clear: left">
  <xsl:value-of select="." />
</h3>
</xsl:template>

<xsl:template match="description">
<p style="align: right">
  <xsl:value-of select="." />
</p>
</xsl:template>

<xsl:template match="category">
<td>
  <xsl:value-of select="." />
</td>
</xsl:template>

<xsl:template match="year_high">
<td>
  <xsl:value-of select="." />
</td>
</xsl:template>

<xsl:template match="year_low">
<td>
  <xsl:value-of select="." />
</td>
</xsl:template>

<xsl:template match="pe_ratio">
<td>
  <xsl:value-of select="." />
</td>
</xsl:template>

<xsl:template match="earnings">
<td>
  <xsl:value-of select="." />
</td>
</xsl:template>

<xsl:template match="yield">
<td>
  <xsl:value-of select="." />
</td>
</xsl:template>

</xsl:stylesheet> 
```

# wmi - 磁盘签名的随机值

> ID：13612067
> 
> 赞同：1
> 
> 时间：2012-11-28T18:35:29.713
> 
> 标签：wmi, disk, disk-partitioning, wql

作为机器识别系统的一部分，我正在寻找 Win32_DiskDrive 的签名。现在在两个客户的机器上，我看到这个字段有一个随机值。我认为这是由于没有检查随附代码中的 HRESULT。

什么会导致机器没有有效的签名？

WQL 查询：SELECT Caption、DeviceID、Signature、TotalSectors FROM Win32_DiskDrive

*更新：*

现在已经在 3 台机器上看到了这种情况，一台在中国，一台在东欧，一台在加拿大。当我说它返回一个随机值时，我的意思是它每次被查询时都会返回一个不同的随机值。等待客户尝试使用 diskpart 并查看请求 uniqueid 时显示的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:29:37.533

我找不到确定签名为空的方法。

我的解决方案是遍历磁盘驱动器的分区

```
wstring partionquery= L"ASSOCIATORS of {Win32_DiskDrive.DeviceID='";
partionquery += disk_deviceid;
partionquery += L"'} WHERE AssocClass = Win32_DiskDriveToDiskPartition"; 
```

检索 Type 值并查看它是否以“GPT”开头，如果是，则使用 IOCTL_DISK_GET_PARTITION_INFO_EX 调用 DeviceIoControl。这提供了 GPT 分区的 GUID 签名。

在我的测试中，每个分区在磁盘上都给出了相同的签名，并且它与 diskpart 中显示为 uniqueid 的签名相匹配。

# asp.net-mvc - 单击导航栏上的其他内容后，无法单击引导导航栏上的下拉菜单

> ID：13612073
> 
> 赞同：0
> 
> 时间：2012-11-28T18:35:52.457
> 
> 标签：asp.net-mvc, html, twitter-bootstrap

我有一个普通的引导导航栏，上面有一些下拉菜单。当我单击下拉菜单中的链接时，屏幕上会出现模式框，当我退出模式框然后尝试再次单击导航栏上的下拉菜单时，它将不起作用，下拉菜单周围会出现橙色方形边框好像它无法再次获得焦点或什么的。任何想法为什么会发生这种情况？

```
<div class="navbar navbar-inverse navbar-fixed-top ">

<div class="navbar-inner" id="background">
    <a class="brand" href="@Url.Action("RssIndex", "Home")">
        <img src="~/Images/iconnewzy.png" alt="Newzy" ></a>

         <ul class="nav">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-user"></i>
                            <label style="display: inline; cursor: pointer;" id="friendsId">Friends</label><b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <a href="#" class="btn btn-mini btn-primary" onclick="AddFriend()" style="width: 50%; white-space: nowrap; color: white; margin-left: 20px !important;">Add Friend</a>
                            <a href="#" class="btn btn-mini btn-primary" onclick="ViewFriends()" style="width: 50%; white-space: nowrap; color: white; margin-left: 20px !important;">View Friends</a>
                        </ul>

                    </li>
                    <b style="vertical-align: bottom !important; color: white">Hello, <a href="#" onclick="createManageModal()" style="color: white !important; vertical-align: bottom !important;">@User.Identity.Name</a>!</b>
                    @Html.ActionLink("Log off", "LogOff", "Account", routeValues: null, htmlAttributes: new { @class = "btn btn-mini btn-primary" })
         </ul>
 </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:46:33.637

我有同样的问题。我在[这篇文章](http://mifsud.me/adding-dropdown-login-form-bootstraps-navbar/)中找到了解决方法。基本上，您必须将此代码添加到您的页面：

```
$(function() {
  // Setup drop down menu
  $('.dropdown-toggle').dropdown();

  // Fix input element click problem
  $('.dropdown input, .dropdown label').click(function(e) {
    e.stopPropagation();
  });
}); 
```

# deployment - 为 QA 和生产执行 Presto 任务，但不在 Dev 中

> ID：13612075
> 
> 赞同：1
> 
> 时间：2012-11-28T18:35:55.813
> 
> 标签：deployment, automated-deploy, presto

我有一个任务需要在 QA 和 prod 中运行，但不是 dev。任务是停止集群应用程序。问题是开发服务器没有集群，停止集群的任务在这些服务器上失败。有没有办法处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:43:30.923

我们以前也有这个问题。当任务运行以停止集群时，它会在 dev 中失败：

> 系统找不到指定路径 C:\Windows\Sysnative\Cluster.exe /cluster:server resource "Company Name Product" /offline

为了让它工作，我们可以将集群命令移动到变量中，而不是直接在任务中。这样我们就可以让停止集群的开发版本只做一个 no-op: `cmd /exit`。QA 版本将运行真正的集群停止命令。

**任务：**

![在此处输入图像描述](../Images/fafe663266a6bb38dd457eb579665574.png)

**开发服务器变量组：**

![在此处输入图像描述](../Images/13397bf0a9b4b10e234bf3697625abde.png)

**QA 服务器变量组：**

![在此处输入图像描述](../Images/71d4e6f3db3c5d7a8d6dc2f92dedf557.png)

# erlang - Erlang：通过钢筋配置覆盖

> ID：13612076
> 
> 赞同：3
> 
> 时间：2012-11-28T18:35:57.420
> 
> 标签：erlang, rebar

我的项目正在使用 websocket 服务器。仅出于测试目的，我还有一个 erlang websocket 客户端实现，它`test/`与测试一起驻留在文件夹中。

现在，当我通过`rebar`with `{cover_enabled, true}`in my运行测试时`rebar.config`，我还得到了 websocket 客户端模块的覆盖率报告。我不想在我的报告中出现这种情况。

封面文档说我应该创建一个封面规范文件，其中包含`{excl_mods, [websocket_client]}.`

但是我如何说服钢筋使用这个文件呢？

封面文件：

*   [http://www.erlang.org/doc/apps/common_test/cover_chapter.html](http://www.erlang.org/doc/apps/common_test/cover_chapter.html)
*   [http://www.erlang.org/doc/man/cover.html](http://www.erlang.org/doc/man/cover.html)

钢筋：

*   [https://github.com/basho/rebar](https://github.com/basho/rebar)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:01:28.500

好的，我问了钢筋作者@dizzyd。

事实证明，我用来执行测试的 eunit 不支持此覆盖选项。

# java - 使用二进制信号量

> ID：13612081
> 
> 赞同：2
> 
> 时间：2012-11-28T18:36:15.060
> 
> 标签：java, multithreading, concurrency, java.util.concurrent

你好，我有一个小问题，不知道我哪里出了问题。

我有 2 个线程 X 重复打印 X 和 Y 重复打印 Y。Y 需要在 X 之后打印。

我从 Semaphore 类 BinarySemaphore 派生：

```
public class BinarySemaphore extends Semaphore {

public BinarySemaphore(int initial){
    value = (initial>0) ? 1 : 0;
}

public synchronized void P() throws InterruptedException{
    while (value==0){
    wait();
    }
value = 0;
    notify();
}

public synchronized void V(){

    value = 1;
    notify();
}
} 
```

X 线程类

```
public class xThread extends Thread implements Runnable{

private BinarySemaphore xSemaphore;
private BinarySemaphore ySemaphore;

public xThread(String myName, BinarySemaphore nSemaphoreX, BinarySemaphore nSemaphoreY ){
    super(myName);
    xSemaphore = nSemaphoreX;
    ySemaphore = nSemaphoreY;
}

public void run(){
    try{
    xSemaphore.P();
    System.out.println(getName());
    ySemaphore.V();
    }catch(InterruptedException E){
    System.out.println("Thread X was interrupted"); 
    }
}   
} 
```

Y 螺纹类

```
public class yThread extends Thread implements Runnable{

private BinarySemaphore xSemaphore;
private BinarySemaphore ySemaphore;

public yThread(String myName, BinarySemaphore nSemaphoreX, BinarySemaphore nSemaphoreY ){
    super(myName);
    xSemaphore = nSemaphoreX;
    ySemaphore = nSemaphoreY;
}

public void run(){
    try{
    ySemaphore.P();
    System.out.println(getName());
    xSemaphore.V();
    }catch(InterruptedException E){
    System.out.println("Thread Y was interrupted");
    }

}
} 
```

当我运行这些线程 10 秒时，我得到的只是

X Y

构建成功（总时间：10 秒）

我在这里想念什么？为什么不让它们交替 10 秒？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:43:52.857

这是因为您的线程只打印一次然后被终止，就像@reprogrammer 在他的评论中建议的那样。您应该插入一个循环，例如：

```
public void run(){
  while (needsToRun){
    try{
    xSemaphore.P();
    System.out.println(getName());
    ySemaphore.V();
    }catch(InterruptedException E){
    System.out.println("Thread X was interrupted"); 
    }
  }
} 
```

# symfony - Symfony2 Assetic 生成指向 CDN 的 URL

> ID：13612087
> 
> 赞同：4
> 
> 时间：2012-11-28T18:36:34.447
> 
> 标签：symfony, cdn, assetic

有没有一种方法可以扩展 Assetic，这样我就可以让它从我在其他地方配置的 CDN 加载我的图像。如果我可以编写一个允许细粒度控制的插件/扩展/事件侦听器/等，那就太棒了。

同样，我可以使用assetic:dump 控制台命令的任何钩子，因此当我执行转储时，我可以自动将图像从本地框推送到 CDN（因为我希望图像在本地加载到 dev 上）？

基本上，我希望能够在我的本地机器上的某个地方放置一个图像，比如：web/images/image.png

在开发中，当我执行以下操作时：

```
asset('images/image.png') 
```

它会在 dev 上吐出这样的 URL：

```
http://1.2.3.4/images/image.png 
```

在生产中它会吐出类似的东西：

```
http://my.cdn.net/images/image.png 
```

当我运行assetic:dump 时，图像会自动上传。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T10:39:51.770

查看此链接：[http ://symfony.com/doc/master/reference/configuration/framework.html#assets-base-urls](http://symfony.com/doc/master/reference/configuration/framework.html#assets-base-urls)

您可以在 config.yml 中添加一个基本 url，例如：

```
framework:
    templating:      
        assets_base_urls:
            http: my.cdn.net 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-03T09:27:12.680

从 Symfony 2.7 开始，配置发生了变化：

```
framework:
    assets:
        base_urls:
          - 'http://cdn.example.com/' 
```

退房： [http ://symfony.com/blog/new-in-symfony-2-7-the-new-asset-component](http://symfony.com/blog/new-in-symfony-2-7-the-new-asset-component)

# c++ - 使用 Mex 和 IT++ 编译问题

> ID：13612091
> 
> 赞同：0
> 
> 时间：2012-11-28T18:36:48.150
> 
> 标签：c++, matlab, mex

我在编译 It++ 库时遇到问题。我已经正确安装了它，并用一个没有 mex 的简单示例对其进行了测试。

mex it_mex_fkmigration.cpp -litpp

```
it_mex_fkmigration.cpp:1:25: error: itpp/itcomm.h: No such file or directory
it_mex_fkmigration.cpp:2:26: error: itpp/itmex.h: No such file or directory
it_mex_fkmigration.cpp:4: error: expected namespace-name before ';' token
it_mex_fkmigration.cpp:4: error: '<type error>' is not a namespace
it_mex_fkmigration.cpp:6: error: 'mxArray' has not been declared
it_mex_fkmigration.cpp:6: error: expected ',' or '...' before '*' token
it_mex_fkmigration.cpp:6: error: ISO C++ forbids declaration of 'mxArray' with no type
it_mex_fkmigration.cpp: In function 'void mexFunction(int, int**, int, int)':
it_mex_fkmigration.cpp:9: error: 'mexErrMsgTxt' was not declared in this scope
it_mex_fkmigration.cpp:10: error: 'mexErrMsgTxt' was not declared in this scope
it_mex_fkmigration.cpp:13: error: 'bvec' was not declared in this scope
it_mex_fkmigration.cpp:13: error: expected `;' before 'input_bits'  
it_mex_fkmigration.cpp:16: error: 'cvec' was not declared in this scope
it_mex_fkmigration.cpp:16: error: expected `;' before 'output_symbols'
it_mex_fkmigration.cpp:17: error: 'QPSK' was not declared in this scope
it_mex_fkmigration.cpp:17: error: expected `;' before 'qpsk'
it_mex_fkmigration.cpp:19: error: 'output_symbols' was not declared in this scope
it_mex_fkmigration.cpp:19: error: 'qpsk' was not declared in this scope
it_mex_fkmigration.cpp:19: error: 'input_bits' was not declared in this scope
it_mex_fkmigration.cpp:23: error: 'mxCOMPLEX' was not declared in this scope
it_mex_fkmigration.cpp:23: error: 'mxCreateDoubleMatrix' was not declared in this scope
it_mex_fkmigration.cpp:26: error: 'cvec2mxArray' was not declared in this scope 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:44:03.213

您需要知道`mex`It++ 库的位置。使用`-I`选项指定包含路径；以及`-L`指定库搜索路径的选项。

```
mex it_mex_fkmigration.cpp -litpp -Ipath/to/it++/library -Lpath/to/libitpp 
```

过去我在使用该`-L`选项时遇到过麻烦，不得不通过使用该选项指定库的整个路径来解决它`-l`。

```
mex it_mex_fkmigration.cpp -lpath/to/libitpp/libitpp.a -Ipath/to/it++/library 
```

可以传递给`mex`的其他选项列在[文档](http://www.mathworks.com/help/matlab/ref/mex.html)中（在*Mex 脚本开关*部分下）。

此外，关于 等的错误`mxArray`表明`mexErrMsgTxt`您没有包含`mex.h`在`it_mex_fkmigration.cpp`

# c# - 并发队列的使用 >

> ID：13612098
> 
> 赞同：11
> 
> 时间：2012-11-28T18:37:22.883
> 
> 标签：c#, concurrent-collections

我基本上是在寻找从线程中的相机获取的图像集合的容器。由于 ConcurrentQueue 是线程安全的，我想使用它。但是在调试我的代码时，我发现[这篇文章](http://blogs.msdn.com/b/pfxteam/archive/2012/05/08/concurrentqueue-lt-t-gt-holding-on-to-a-few-dequeued-elements.aspx)说

> 如果元素很小，您可能永远不会注意到这一点。但是，如果元素占用大量资源（例如，每个元素都是一个巨大的图像位图），您可能会看到这种影响（一种解决方法是将包装器对象排队，例如使用 a `ConcurrentQueue<StrongBox<T>>`而不是 a`ConcurrentQueue<T>`和 null在包装器出队后，包装器对 T 值的引用）。

据我所知，`StrongBox`是一种原始价值的包装。这是否意味着我必须存储另一个图像集合？

所以我正在寻找`ConcurrentQueue<StrongBox<T>>.`我从谷歌找到的唯一的东西就是[这个代码的用法或例子。](http://s.codeproject.com/script/Content/ViewAssociatedFile.aspx?rzp=/KB/Parallel_Programming/NET4ParallelIntro//sln.zip&zep=sln/ParallelExtensionsExtras/CoordinationDataStructures/ReductionVariable.cs&obid=71285&obtid=2&ovid=4)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T21:58:03.217

在评论中提醒了过早优化的危险，所以我将在这里讨论发生的事情的语义。

就像文章指出的那样，`ConcurrentQueue`可以保留一些已经经历过的事情的参考。我知道它是“几十个”，文章说它不超过 31 个，这似乎很好地凝结。如果队列正在跟踪大对象，例如 2000x2000 位图，理论上这可能会成为问题。当然，这取决于程序的其余部分在做什么。

将其包装在[`StrongBox<T>`](http://msdn.microsoft.com/en-us/library/bb549038.aspx)帮助中，因为唯一要做的`StrongBox`就是保持对其他事物的引用。因此，a`StrongBox`的占用空间非常小，它所拥有的任何东西都将超出范围并且（理论上）更快地获得 GC。

由于`StrongBox`含有无糖汽水的所有成分，因此您有点过度考虑了它的用法。您实际上只是在该`Value`字段中加载一些`T`内容，然后稍后再引用它。它看起来有点像这样：

```
var boxedBitmap = new StrongBox<Bitmap>(new Bitmap(1,1));
var bitmap = boxedBitmap.Value; 
```

或者：

```
var boxedBitmap = new StrongBox<Bitmap>();
boxedBitmap.Value = new Bitmap(1,1);
var bitmap = boxedBitmap.Value; 
```

说真的，如果你在 Reflector 中打开它，这个类的实现就像 5 行一样。

在这种情况下，您`ConcurrentQueue<T>`的使用与`ConcurrentQueue<StrongBox<T>>`. `.Value`在将资源发送到其目标线程之前，您只需执行此操作。这确实帮助我工作的一家公司通过简单地传递对确定性工具的引用而不是传递整个工具来减少大量多线程分析服务的内存印记，但你的里程可能会有所不同 - 我不清楚如果您传递要突变的东西然后被其他东西使用，将会产生什么后果。

# knockout.js - 在微风 js 查询完成后，knockout.js 应用绑定

> ID：13612101
> 
> 赞同：6
> 
> 时间：2012-11-28T18:37:28.950
> 
> 标签：knockout.js, breeze

**问题：** 如何构造我的代码，以便在执行 ViewModel 的所有查询之前不应用淘汰绑定？

**更新：** 经过一些进一步的研究和实验，我认为使用类似于 Deferred 函数的东西可能会起作用。我已经尝试了一些实现，但是它只推迟到调用查询，而不是直到处理完所有查询结果。我显然在这里做错了，但我的 javascript foo 很弱。

**使用的技术：** Entity Framework 5 w/Oracle、.Net 4 Web API、Knockout 2.2、Breeze 0.71.3

**情况：** Breeze 被用于调用 Web API 方法，该方法检索 POCO 的 Enumerable，填充可淘汰的可观察数组，并且该数组绑定到视图中的选择控件。

**问题：** 在将 ViewModel 绑定应用到 View 之前，微风查询尚未完成，并且剔除可观察对象尚未填充。返回查询结果时，UI 会在 5 - 7 秒内无响应，同时填充 ko observable 并因此更新选择控件。根据日志记录，这似乎是问题所在......

cshtml 文件：

```
<select data-bind="options: $root.brokers, value: 'id', optionsText: 'name'">
<script data-main="/BrokerCommission/Scripts/app/main" src="/BrokerCommission/Scripts/require.js"></script> 
```

主.js：

```
requirejs.config(
    {
        // well-know paths to selected scripts
        paths: {
            'breeze': '../breeze.debug', // debug version of breeze
            'text': '../text'// html loader plugin; see http://requirejs.org/docs/api.html#text
        }
    }
);

define(['logger', 'text', 'breeze'], function(logger) {

require(['vm.muni'],
function()
{
    logger.info('applying bindings');
    ko.applyBindings(my.vm);
}); 
```

vm.muni 是我的 ViewModel javascript 文件。这是一个公开给执行查询的方法：

```
getAllBrokers = function () {
        dataservice.getBrokers()
            .then(processBrokerQueryResults)
            .fail(handleQueryErrors);
    },

    processBrokerQueryResults = function (data) {
        logger.info("Start loading Brokers " + Math.round(new Date().getTime() / 1000));
        my.vm.brokers([]);
        $.each(data.results, function (i, d) {
            brokers.push(new my.Broker()
                .id(d.id)
                .name(d.name)
            );
        });
        logger.info("End loading Brokers " + Math.round(new Date().getTime() / 1000));
    }, 
```

这是来自 dataservice.js 文件的微风查询：

```
function getBrokers() {
    var query = new entityModel.EntityQuery()
            .from("GetBrokers")
            //.orderBy("name");
    return manager.executeQuery(query);
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T23:53:21.083

我有几个想法：

1.  我**很少将一项一项推入*observableArray***。DOM 更新太多。而是创建一个临时数组并用它更新*observableArray*。我相信这是您所询问的性能问题的答案。

2.  设置一个*初始化*方法，该方法在所有初始异步加载方法完成时返回一个承诺。

3.  延迟*ko.applyBindings*直到*初始化*承诺成功解决。

4.  考虑在等待初始化完成时显示启动画面 + 微调器。

5.  初始化时尽量不要做太多。

我无法在此答案中向您展示如何做所有这些事情。我将在这里向您展示#1，并在#2 的文档中向您介绍“ [Fetch on Launch](http://www.breezejs.com/documentation/lookup-lists#FetchOnLaunch "启动时获取") ”。网络搜索 + 实验是您其余的朋友。

用数组 更新*observableArray*

```
processBrokerQueryResults = 函数（数据）{
        ...
        var tempArray = []
        $.each(data.results, function (i, d) {
            tempArray.push(dtoToBroker(d));
        });
        经纪人（tempArray）；
        ...

        // 我更喜欢命名 fns 而不是长 lambdas
        函数 dtoToBroker(dto) {
           返回新的 my.Broker()
                  .id(d.id)
                  .name(d.name);
        }

```

我喜欢使用 ECMAScript 5 [Array.map](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map "数组.map")语法，它在将函数应用于源数组的每个元素后返回一个数组。所以我会写：

```
processBrokerQueryResults = 函数（数据）{
        ...
        经纪人（data.results.map（dtoToBroker））；
        ...
}

```

# php - 如何在单列 MySQL Query 中设置所有值

> ID：13612104
> 
> 赞同：13
> 
> 时间：2012-11-28T18:37:47.083
> 
> 标签：php, mysql, sql, sql-update

我在表格中创建了一个名为“description”的新元组。

只需要一个查询来将我已经创建的数据的所有“描述”元组设置为某个文本。

例如基本的“更新”查询，但不确定它是否不是正确的使用方法：

```
UPDATE suppliers SET name = 'HP'WHERE name = 'IBM'; 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-28T19:38:39.793

已排序

我刚用过：

```
UPDATE suppliers SET description = 'business' 
```

这会将我表中的所有描述字段设置为字符串“业务”。

感谢您的建议。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-28T18:45:02.230

您提供的查询格式正确。在运行`UPDATE`或之前运行该查询以确保这是您想要进行的更改`DELETE`总是明智的。`SELECT`

您的测试查询将是：

```
SELECT name FROM suppliers WHERE name = 'IBM'; 
```

但是，您提供的查询不会更新该`description`列。为此，您需要以下内容：

```
UPDATE suppliers SET description = 'HP' WHERE name = 'IBM'; 
```

执行此之后`UPDATE`，您可以运行此查询来验证您的结果：

```
SELECT name, description FROM suppliers WHERE name = 'IBM'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-18T07:15:32.170

这将更改归档状态 =“停用”，其中表名是：- 用户

```
 Session session=null;
    int rows=0;
     try {
           session =HibernateUtil.getSessionFactory().openSession();
           Query query = session.createQuery("UPDATE user  SET status = 'deactivate'");
           rows = query.executeUpdate();
         //  result = query.list();
        } catch (HibernateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }finally
    {
        session.close();
    } 
```

# objective-c - scrollToRowAtIndexPath 总是返回 0

> ID：13612109
> 
> 赞同：0
> 
> 时间：2012-11-28T18:38:07.277
> 
> 标签：objective-c, xcode, ipad

似乎有很多示例代码可以做到这一点，我发誓我已经尝试过每一个。我没有尝试得到被选中的行。

现在，我将告诉您，我有一个滚动视图，其中包含一个表格视图。表格视图充满了标签和文本框。显示键盘时，我试图将所选行移动到键盘上方。

关于我做错了什么的任何想法？此外，任何示例代码都会很棒！

先感谢您。

# eclipse - 如何使用 Maven 3 原型在 Eclipse 中创建新项目

> ID：13612111
> 
> 赞同：0
> 
> 时间：2012-11-28T18:38:15.073
> 
> 标签：eclipse, maven, eclipse-plugin, maven-3

是否有一些 Eclipse 插件允许我基于 Maven 3 原型创建新项目？我必须处理一堆原型（包括我们组织内部创建/使用的一些原型），并且想要一些插件，例如会问我

*   使用哪个原型
*   什么是组 id
*   工件 ID 是什么

并且将使用该信息创建一个项目。然而，这似乎是不可能的。

所以，有两个问题：

*   有这样的插件吗？如果是这样的话，
*   *如何以类似于我在下面描述的方式使用它？*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T20:11:21.820

[m2eclipse](http://eclipse.org/m2e/documentation/)呢？我相信它可以满足您的所有需求。安装后，您可以创建一个新的 maven 项目，向导会询问您原型、组和工件 ID。

只要去`File-> New -> Other -> Maven -> Maven Project`，它会指导你。

**注意**：m2eclipse 上的 2 不需要它使用 maven 2，您可以将其配置为使用您可能拥有的任何 maven 安装

# javascript - 如何使用spring MVC在组合框中选择一个选项

> ID：13612121
> 
> 赞同：1
> 
> 时间：2012-11-28T18:38:41.893
> 
> 标签：javascript, forms, spring, select, option

这是我的第一篇文章 :) 我想选择组合框的一个选项，并且取决于这个选项，你想打印一个标签或另一个标签。例如，如果我选择 option->dni，则标签将为 DNI：或者如果我选择 option->nombre，则标签将为 Nombre：

```
 <div class="campos">
    <div class="campo">
        <form:label path="buscarPor">Buscar Por:</form:label>
        <div>
            <select name="buscarPor" id="buscarPor">
                <option value="dni">DNI</option>
                <option value="nombre">Nombre</option>
                <option value="Departamento">Departamento</option>
                <option value="Área de Conocimiento">Área de Conocimiento</option>
            </select>
        </div>

    <script type="text/javascript">
    function cargarLabel(){
        var seleccionado = $(this).val();
        if(seleccionado == 'dni'){

            $('#seleccion').html('<div class="campo">'+'<form:label path="seleccion">DNI:</form:label>'+
                    '<div>'+'<form:input path="seleccion"/>'+'<form:errors path="seleccion"/>'+'</div>'+'</div>');
        }if(seleccionado == 'nombre'){

            $('#seleccion').html('<div class="campo">'+'<form:label path="seleccion">Nombre:</form:label>'+
                    '<div>'+'<form:input path="seleccion"/>'+'<form:errors path="seleccion"/>'+'</div>'+'</div>');
        }
    }

    $(function () {
        $('#buscarPor').change(cargarLabel);
    });

    </script>
    </div>

    <div class="campo">
    <form:label path="seleccion">??</form:label>
        <div>
            <form:input path="seleccion"/>
            <form:errors path="seleccion"/>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:14:51.880

首先，将您的`path`属性更改`<form:label path="buscarPor">Buscar Por:</form:label>`为其他内容。Spring标签库生成一个`id`相同值的属性，会直接和`id`你的select标签的属性冲突。这就是为什么在您当前的代码中，jquery 选择您的`label`标签而不是`select`标签并将`change`事件绑定到它的原因。

也就是说，还请查看此[JSFiddle](http://jsfiddle.net/ganesh/FpeFb/)以了解解决此问题的正确方法。我认为您的方法过于冗长，您可以通过避免所有这些 if/else 块来帮自己一个忙。

# ios - UITableView 中的 UIPickerView 对单元格下半部分的触摸没有反应

> ID：13612122
> 
> 赞同：0
> 
> 时间：2012-11-28T18:38:43.723
> 
> 标签：ios, uitableview, uipickerview

我有一个只有一个单元格的 UITableView（我稍后需要更多），其中只包含一个 UIPickerView。UIPickerView 中的单个组件只有在我开始在 UIPickerView 的上半部分触摸它时才会滚动。如果我的触摸从下半部分开始，它根本不会移动。

我在 UITableView 的界面生成器中设置了以下属性：

*   没有选择
*   滚动禁用
*   反弹：没有
*   反弹缩放：否
*   延迟内容触及：否
*   可取消的内容触摸：否

如何允许触摸从组件中的任何位置滚动 UIPicker？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:21:20.773

现在已经多次遇到这个问题，它通常是由于两个原因之一

1.  选择器的下半部分顶部有一个视图（尝试将选择器移动到视图层次结构的前面）

2.  父视图的内容大小不足以覆盖整个选取器。所以只有这个区域内的选择器部分处理触摸

# sql - 在 Oracle 中选择值

> ID：13612126
> 
> 赞同：1
> 
> 时间：2012-11-28T18:38:59.163
> 
> 标签：sql, oracle

我有这个 Oracle SQL 查询，我用它来检查数字：

```
SELECT * from MANAGEDSYSTEMGROUPS where MSYSTEMGROUPID = ? 
```

我想选择与 value 不同的所有值`12`。我必须如何编辑查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:40:22.087

Oracle 中有两个[不等于运算符。](http://www.dba-oracle.com/t_not_equal_operator.htm)`<>`运算符，它是 ANSI SQL 标准，以及`!=`大多数（如果不是全部）关系数据库都支持的运算符。从概念上讲，它们应该提供相同的结果，但是根据[这篇文章](http://www.freelists.org/post/oracle-l/Performance-Difference-Between-and)，它们可能会导致不同的执行计划影响性能。

您的查询可以表示为：

```
SELECT * from MANAGEDSYSTEMGROUPS where MSYSTEMGROUPID != 12 
```

或者：

```
SELECT * from MANAGEDSYSTEMGROUPS where MSYSTEMGROUPID <> 12 
```

如果您想支持多个值，也可以使用[NOT IN 运算符。](http://docs.oracle.com/html/A95915_01/sqopr.htm#i1004774)如果你想排除 12、15 和 20，你可以这样做：

```
SELECT * from MANAGEDSYSTEMGROUPS where MSYSTEMGROUPID NOT IN (12, 15, 20) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:05:25.270

Are you trying to return values that are not set at all?

```
SELECT * from MANAGEDSYSTEMGROUPS where MSYSTEMGROUPID != 12 
```

Will only return values that have MSYSTEMGROUPID set to a value.

If you want Both values not equal to 12 and values that are not set at all, use this:

```
SELECT * from MANAGEDSYSTEMGROUPS where MSYSTEMGROUPID  IS NULL OR MSYSTEMGROUPID != 12 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T18:40:41.210

试试这个：-

```
 SELECT * from MANAGEDSYSTEMGROUPS where MSYSTEMGROUPID != 12 
```

# d3.js - d3.js 简单面积图示例...出现“未定义”错误；我想我需要一份退货声明？

> ID：13612130
> 
> 赞同：1
> 
> 时间：2012-11-28T18:39:16.467
> 
> 标签：d3.js, undefined

我正在通过 d3.js.org 上的示例学习 d3.js

我从[http://bl.ocks.org/3883195的“面积图”开始](http://bl.ocks.org/3883195)

我试着自己输入它，这样我就能理解变量和函数。

该脚本调用 data.tsv 来制作图表。

好吧，在加载 data.tsv 时，我收到“'undefined' is not an object”错误。

所以我摆弄了一些，然后继续将 bl.ock 的原始代码复制并粘贴到我的编辑器中，将他的 d3.v3.js 更改为 d3.v2.js

同样的错误。

我觉得我的机器上正确的目录中有 data.tsv，与 d3.v2.js 相同的目录。

此处第二行引发的错误：

```
 d3.tsv("data.tsv", function(error, data) { 
      data.forEach(function(d) { 
         d.date = parseDate(d.date);
         d.close = +d.close;
      }); 
```

这是错误的图片： [https ://twitter.com/maggie_a_lee/status/273858397173080064/photo/1](https://twitter.com/maggie_a_lee/status/273858397173080064/photo/1)

谢谢大家！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T07:51:45.360

这与 D3 库的版本有关；目前它正在从 v2 过渡到 v3：[https ://github.com/mbostock/d3/wiki/Release-Notes](https://github.com/mbostock/d3/wiki/Release-Notes)

您正在使用的示例已针对 v3 进行了修改，但您仍在加载 v2 库。

对于 d3.tsv，两个版本之间的差异与回调签名有关：

v2：

```
d3.tsv("data.tsv", function(data) { 
  data.forEach(function(d) { 
     d.date = parseDate(d.date);
     d.close = +d.close;
  }); 
```

v3：

```
d3.tsv("data.tsv", function(error, data) { 
  data.forEach(function(d) { 
     d.date = parseDate(d.date);
     d.close = +d.close;
  }); 
```

这意味着在您的情况下，实际数据存储在错误参数中。

# entity-framework - LINQ to Entities 结果与 SQL 查询结果不一致（使用 ODP.net）

> ID：13612131
> 
> 赞同：1
> 
> 时间：2012-11-28T18:39:23.427
> 
> 标签：entity-framework, linq-to-entities, odp.net

我的 LINQ 查询返回了一些奇怪的结果。

LINQ 查询（返回不正确的结果）：

```
IEnumerable<PART_EVENTS> parts = db.PART_EVENTS
    .Where(p => p.OP == op.NCM_DB_NAME && p.Timestamp > tempBegin && p.Timestamp <= tempEnd)                
    .OrderBy(p => p.PART_ID_NUM)
    .ThenBy(p => p.Timestamp)
    .ToList(); 
```

在 Visual Studio 调试器中返回的结果为每个唯一的 Part ID 显示相同的时间戳，但在 SQL Developer 或查询窗口（在服务器资源管理器中）中的直接查询显示不同的时间戳（实际上，每一行的时间戳应该不同。）

SQL 查询（返回正确的结果）：

```
select * 
from PART_EVENTS
where OP = 'OP20B'
    AND "Timestamp" > to_date('11/28/2012 07:00 am', 'mm/dd/yyyy hh:mi am')
    AND "Timestamp" <= to_date('11/28/2012 10:58 am', 'mm/dd/yyyy hh:mi am')
order by part_id_num, "Timestamp" 
```

我已经尝试了很多方法来纠正这个问题并且已经解决了 2 天，但我不知道我做错了什么，或者 EF 生成的 SQL 是否有问题。

任何建议将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:39:23.427

就在发布我的问题之前，我决定再尝试一件事：将“时间戳”别名更改为 PART_TIMESTAMP。显然 LINQ 不喜欢引用的别名。这解决了问题。

# mysql - 删除重复的行？

> ID：13612134
> 
> 赞同：2
> 
> 时间：2012-11-28T18:39:35.140
> 
> 标签：mysql, sql

> **可能重复：**
> [如何使用 SQL 删除重复行？](https://stackoverflow.com/questions/1173963/how-to-delete-duplicate-rows-with-sql)

我有这个查询，它根据相同的名称和年份从表中返回重复的行。

如何删除重复记录，以便表中只有唯一值？

查询是：

```
SELECT movies.movie_name, movies.year 
FROM movies
INNER JOIN 
(
    SELECT movie_name, year 
    FROM movies
    GROUP BY movie_name,year 
    HAVING count(movie_id) > 1
) dup 
    ON movies.movie_name = dup.movie_name
    and movies.year = dup.year 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:42:34.287

DELETE 语句可以利用子查询来过滤要删除的项目。

通读此

[http://www.w3resource.com/sql/delete-statement/delete-with-subqueries.php](http://www.w3resource.com/sql/delete-statement/delete-with-subqueries.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T19:31:38.523

此查询显示所有重复项：

```
SELECT movie_name, year 
FROM movies
GROUP BY movie_name,year 
HAVING count(movie_id) > 1 
```

这仅显示每部电影（是否重复）的 movie_id，这些是要保留的行：

```
SELECT movie_name, year, min(movie_id) min_movie_id
FROM movies
GROUP BY movie_name,year 
```

要删除重复项，您可以使用以下命令：

```
DELETE movies
FROM
  movies inner join
  (SELECT movie_name, year, min(movie_id) min_movie_id
   FROM movies
   GROUP BY movie_name,year) keep
  on movies.movie_name = keep.movie_name
     and movies.year=keep.year
     and movies.movie_id<>keep.min_movie_id 
```

或者你也可以使用这个查询：

```
delete from movies
where
  (movie_name, year, movie_id) not in
  (select movie_name, year, min_movie_id from
    (SELECT movie_name, year, min(movie_id) min_movie_id
     FROM movies
     GROUP BY movie_name,year) keep) 
```

# sql-server - SQL SELECT 查询：“不明确的列名”

> ID：13612135
> 
> 赞同：-1
> 
> 时间：2012-11-28T18:39:35.737
> 
> 标签：sql-server

除了基本的 SQL 查询，我从来没有写过任何东西。我正在尝试加入两个表，但出现此错误：

> *消息 209，级别 16，状态 1，行 2
> 不明确的列名称“用户 ID”。*

这是我的 SQL 查询：

```
SELECT UserName, UserId
FROM aspnet_Users 
JOIN aspnet_UsersInRoles ON aspnet_Users.UserId = aspnet_UsersInRoles.UserId 
```

这是我的数据库图：

![在此处输入图像描述](../Images/51cc2dffb5b3223d4b5f2833ce2cbb71.png)

我的查询有什么问题？

还有谁能告诉我应该如何构造这个查询以获得`UserName`and `RoleName`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:40:24.453

使用多个表时必须指定表名，因为`UserId`这两个表中都会出现。

假设你想要`UserName`和`UserId`来自`aspnet_users`：

```
SELECT aspnet_Users.UserName, aspnet_Users.UserId
FROM aspnet_Users JOIN aspnet_UsersInRoles 
ON aspnet_Users.UserId = aspnet_UsersInRoles.UserId 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:45:31.527

`UserID`解析器与您要使用的表混淆。`UserID`来自两个表，您需要选择要显示的表

```
SELECT 
    au.UserName , 
    au.UserId
FROM aspnet_Users au 
     JOIN aspnet_UsersInRoles ur
     ON au.UserId = ur.UserId 
```

现在我们已经指定`aspnet_Users`应该选择来自的那个。您仍然可以使用表名代替我使用的别名（例如 au、ur）。我更喜欢它们，因为它们更短

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T18:41:32.387

```
SELECT UserName , aspnet_Users.UserId
FROM aspnet_Users JOIN aspnet_UsersInRoles 
ON aspnet_Users.UserId = aspnet_UsersInRoles.UserId 
```

# java - Java Slick：键盘输入

> ID：13612137
> 
> 赞同：0
> 
> 时间：2012-11-28T18:39:42.380
> 
> 标签：java, slick2d

我正在用光滑的方式做我自己的输入窗口，用户需要在其中输入一些内容。但是当我输入任何字母时，我会得到不止一个。我认为这取决于 CPU，我当前的旁路是在我输入时让线程休眠 100 毫秒。有没有其他方法可以做到这一点并且只收到一封信？

这是我的代码

```
 if (input.isKeyDown(Input.KEY_0)) {
        IPInput += "0";
        try {
            Thread.sleep(100);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:49:10.600

根据我的评论......

您可以替换`isKeyPressed()`为`isKeyDown()`.

KeyPress - 当用户按下一个键并释放它时触发（按下键然后向上键）

KeyDown - 当用户按下键时触发（key down）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-28T20:27:14.547

您始终可以使用键盘侦听器，他们可以更好地控制您使用键盘的目的。

在您的 BasicGameStates 之一中，您可以使用：

```
public class Game extends BasicGameState{

public String answer = "";

    public void keyPressed(int key, char c) {

            if (key == Input.KEY_0) {
                answer += "0";
            }

                super.keyPressed(key, c);
    }

    public void keyReleased(int key, char c) {

            if (key == Input.KEY_0) {
                answer += "0";
            }

                super.keyReleased(key, c);
    }
} 
```

keyPressed 响应是当键被按下时，而不是另一个在键被释放时做出反应。

# actionscript-3 - 调用/加载 AS3 到 AS2 和调用/加载 AS2 到 AS3

> ID：13612141
> 
> 赞同：2
> 
> 时间：2012-11-28T18:39:48.170
> 
> 标签：actionscript-3, flash, actionscript-2

我真的希望有人可以帮助我！我在 Flash AS3 中构建了一个项目并完成了我需要做的所有事情，但是在尝试构建游戏时，我无法在 AS3 中编写全局变量，所以我在 AS2 中编写它们，认为我可以做一个简单的代码将SWF（游戏）文件调用到AS3（主项目）中，然后在选择菜单按钮时将游戏文件中的代码反向返回主项目。我用过这段代码：

```
stop()
var ld:Loader = new Loader()
ld.load(new URLRequest("game.swf"))
addChild(ld) 
```

在 AS3 项目中调用 SWF 游戏文件。然而，当试图在 AS2 文件中扭转这一点时，它不会再次打开 AS3 项目吗？

请有人可以帮助我:( xxxx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:51:36.873

正如 Gone3D 所说，LocalConnection 可用于在主 AS3 swf 和加载的 AS2 swf 之间进行调用，为此我建议使用 Grant Skinners SWFBridge：

[http://gskinner.com/blog/archives/2007/07/swfbridge_easie.html](http://gskinner.com/blog/archives/2007/07/swfbridge_easie.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:51:29.923

这是 AVM1 与 AVM2（Adobe 虚拟机）的问题 AVM1 是 AS2，AVM2 是 AS3。不幸的是，您不能在 AS2 中运行 AS3，只能在 AS3 中运行 AS2。他们不交流（我试过）。要让它们相互交谈，您唯一能做的就是打开父 AS3 与加载的 AS2 之间的本地连接。您不会看到根或全局变量，只是您通过 localConnection 传递的内容。

您最好使用所有 AS3 并使用您想要在整个应用程序中公开的数据创建一个公共静态模型类。

祝你好运。

# javascript - Javascript 效果动态填充瓶子中的水位

> ID：13612143
> 
> 赞同：2
> 
> 时间：2012-11-28T18:39:56.107
> 
> 标签：javascript, jquery

是否可以在 javascript 中产生效果，当用户访问页面时，透明瓶中的水位从底部的 0 增加到指定的量，例如 800ml。我已经在 flash 中看到了这种效果，但我希望增加的水量可以由我在管理面板中指定

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T18:42:54.363

从瓶子的反面图像开始（里面是透明部分），然后在它后面有一个高度可变的元素，其中包含你的背景。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T18:41:54.270

嗯，当然咯。将它放在一个 div 中（您必须以某种方式使其适合瓶子的大小），将其着色为蓝色，然后使用 jQuery`animate()`函数之类的东西来扩展高度，从而产生瓶子正在装满的效果。

如果您希望“增加的高度”是可控的，只需让 jQuery 从您存储管理设置的任何位置拉入所需的高度。

# ruby-on-rails - 如何将标识属性添加到列？

> ID：13612144
> 
> 赞同：0
> 
> 时间：2012-11-28T18:40:02.443
> 
> 标签：ruby-on-rails

如何进行迁移以更改现有列以使其成为身份？意思是，我希望该整数列自动递增。

是不是像：

```
add_identity :tablename, [:columnname] 
```

它不是主键列。

# ruby-on-rails - gmaps4rails 从 1.4.8 更新到 1.5.6 地图不显示

> ID：13612152
> 
> 赞同：1
> 
> 时间：2012-11-28T18:40:19.477
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gmaps4rails

我有一个运行 gmaps4rails 1.4.2（和 1.4.8）的 rails 3.1 应用程序有一段时间了。一切都很好。

最近我尝试将 gmaps4rails 更新到 1.5.6。在我进行更新后，地图不再显示（也没有控件）。我验证了@json 已填充并且显示正确。我还在运行时检查了代码，我看到了这个错误：

**未捕获的类型错误：对象没有方法“triggerOldOnload”**

此错误发生在此行周围：

```
Gmaps.oldOnload = window.onload;
window.onload = function() { Gmaps.triggerOldOnload(); Gmaps.loadMaps(); };
Uncaught TypeError: Object #<Object> has no method 'triggerOldOnload'
</script> 
```

这个问题是可重复的：如果我使用 bundler 回到 1.4.8，地图会再次开始工作，如果我更新到 1.5.6，地图会再次消失。

我喜欢 gmaps4rails！如果有什么我可以帮助您解决此问题的，请告诉我！

谢谢，戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:04:14.170

这很烦人，我很清楚，但是您需要运行 rake gem 命令来获取最新的资产。

```
rails generate gmaps4rails:install 
```

我应该更新这个...

# python - Python if 语句，只显示一个选项

> ID：13612159
> 
> 赞同：1
> 
> 时间：2012-11-28T18:40:35.747
> 
> 标签：python, mongodb

我试图让这个代码块根据与恒星的距离来确定行星类型，唯一会打印出信息的是terraform行星。

如果我让它在第三个 if 语句之前打印行星类型，它将打印它选择的所有行星类型，但它似乎遵循的唯一 if 语句是“如果 planet_type 是“terraform”：

```
for distance in (a):
    while True:
        random_x = random.randint(-distance,distance)
        random_y = random.randint(-distance,distance)

        if(random_x <distance and random_x >-distance and random_y <distance and random_y >-distance):
            continue
        else:
            print "Creating planets"
            time.sleep(.5)
            print distance

       if star_size*100 >= distance:
           possible_planet_type = ('mineral' , 'gas', 'organic', 'terraform', 'ice')
           planet_type = random.choice(possible_planet_type)
       if planet_type is "mineral":
           planet_diameter = random.randint(3000,8000)
           iron = planet_diameter*random.randint(10,100)    
           carbon = planet_diameter*random.randint(5,50)
           oxygen = planet_diameter*random.randint(0,0)
           h2o = planet_diameter*random.randint(0,1)
           deuterium = planet_diameter*random.randint(0,5)
           helium_3 = planet_diameter*random.randint(0,2)
           print planet_type, planet_diameter, iron, carbon, oxygen, h2o, deuterium, helium_3
           # name = a[distance]

        elif planet_type is "organic":
            planet_diameter = random.randint(8000,10000)
            iron = planet_diameter*random.randint(10,20)
            carbon = planet_diameter*random.randint(5,10)
            oxygen = planet_diameter*random.randint(40,100)
            h2o = planet_diameter*random.randint(30,100)
            deuterium = planet_diameter*random.randint(0,3)
            helium_3 = planet_diameter*random.randint(0,2)
            print planet_type, planet_diameter, iron, carbon, oxygen, h2o, deuterium, helium_3
            # name = a[distance]

        elif planet_type is "terraform":
            planet_diameter = random.randint(8000,10000)
            iron = planet_diameter*random.randint(10,20)
            carbon = planet_diameter*random.randint(5,10)
            oxygen = planet_diameter*random.randint(40,100)
            h2o = planet_diameter*random.randint(30,100)
            deuterium = planet_diameter*random.randint(0,3)
            helium_3 = planet_diameter*random.randint(0,2)
            print planet_type, planet_diameter, iron, carbon, oxygen, h2o, deuterium, helium_3
            # name = a[distance]

        elif planet_type is "gas":
            planet_diameter = random.randint(20000,90000)
            iron = planet_diameter*random.randint(10,20)
            carbon = planet_diameter*random.randint(5,10)
            oxygen = planet_diameter*random.randint(40,100)
            h2o = planet_diameter*random.randint(30,100)
            deuterium = planet_diameter*random.randint(0,0)
            helium_3 = planet_diameter*random.randint(0,2)
            print planet_type, planet_diameter, iron, carbon, oxygen, h2o, deuterium, helium_3
            # name = a[distance]

       elif planet_type is "ice":
            planet_diameter = random.randint(2000,6000)
            iron = planet_diameter*random.randint(10,20)
            carbon = planet_diameter*random.randint(5,10)
            oxygen = planet_diameter*random.randint(40,100)
            h2o = planet_diameter*random.randint(30,100)
            deuterium = planet_diameter*random.randint(0,1)
            helium_3 = planet_diameter*random.randint(0,1)
            print planet_type, planet_diameter, iron, carbon, oxygen, h2o, deuterium, helium_3
            # name = a[distance] 
```

我得到以下输出：

```
Creating planets
6199
terraform 8578 162982 77202 737708 660506 17156 17156
Creating planets
4664
Creating planets
9844
Creating planets
4410
terraform 8280 99360 41400 819720 571320 0 0
Creating planets
7483
Creating planets
7882
Creating planets
2111
Creating planets
978
Creating planets
1857
terraform 9446 122798 94460 765126 425070 9446 9446
Creating planets
9155
Creating planets
1093
Creating planets
8646
Creating planets
5313 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T18:42:25.003

全部更改`is`为`==`，例如：

```
if planet_type == "mineral": 
```

虽然 using在某些情况下`is` *可能*有效，但比较字符串的正确方法是使用`==`.

为了提供更多背景信息，`is`比较对象*身份*而不是它们的内容。包含相同文本的两个字符串文字可能具有也可能不具有相同的标识。

# mongodb - 使用 MongoDB 聚合框架的自定义管道运算符

> ID：13612161
> 
> 赞同：6
> 
> 时间：2012-11-28T18:40:39.700
> 
> 标签：mongodb, aggregation-framework

实际上，我使用 map reduce 进行一些计算。我不能使用聚合框架来做到这一点，因为我的计算没有可用的管道运算符。

是否可以编写自定义管道运算符？

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T20:00:34.687

答案将取决于您对“可能”的定义：

1) 开箱即用：否。

与 MongoDB 2.2 一样，没有最终用户功能允许您添加新的管道运算符。聚合框架和管道运算符在 C++ 中实现，以提高性能和并发性，超过早期的聚合选项，例如 MapReduce（在 JavaScript 中实现）。

2）如果你想用 C++ 写一个：是的（但不是微不足道的）。

MongoDB 是一个开源项目，因此您可以选择深入研究 C++ 代码并自己实现其他功能（请参阅：[`src/mongo/db/pipeline`](https://github.com/mongodb/mongo/tree/master/src/mongo/db/pipeline)）。请注意，有关于[为 MongoDB 项目做出贡献的](https://github.com/mongodb/mongo/blob/master/CONTRIBUTING.rst)指南，并且正在进行的开发非常活跃。

如果您想编写自定义函数，目前最好的选择是继续使用[MapReduce](http://www.mongodb.org/display/DOCS/MapReduce)。

无论上述选项如何，如果您希望看到管道运算符或功能，请在[MongoDB Jira SERVER 项目](https://jira.mongodb.org/browse/SERVER)（组件：）中提出建议`Aggregation Framework`。这将允许其他人对功能请求进行评论、观看和投票......如果您最终自己实现了该功能，您可以在您的拉取请求中引用 Jira 功能描述。在提交新功能请求之前，您还应该搜索是否可能[已经建议了](https://jira.mongodb.org/secure/IssueNavigator.jspa?reset=true&jqlQuery=project+%3D+SERVER+AND+resolution+%3D+Unresolved+AND+component+%3D+%22Aggregation+Framework%22+ORDER+BY+priority+DESC&mode=hide)此功能。

例如，已经有如下请求：

*   [SERVER-4929：$group 应该有一个 $median 累加器](https://jira.mongodb.org/browse/SERVER-4929)

*   [SERVER-5044：标准差的 $stdDev 聚合运算符](https://jira.mongodb.org/browse/SERVER-5044)

*   [SERVER-7463：聚合框架的更多运算符（百分位数，顶部）](https://jira.mongodb.org/browse/SERVER-7463)

# java - 如何解决将 Android 项目从 Eclipse 3.5 导入 Eclipse 4.2 的问题？

> ID：13612162
> 
> 赞同：-4
> 
> 时间：2012-11-28T18:40:39.053
> 
> 标签：java, android, eclipse, import

我最近格式化了我的旧 Ubuntu 10.04 并升级到 Ubuntu 12.04，因为 Netbeans 3.5 太旧了，无法管理我正在处理的一些 Android 项目。[我按照本指南](http://blog.brunobraga.net/eclipse-42-in-ubuntu-1204)安装了 Eclipse 4.2 ，而不是安装了最新版本的 android Development Toolkit (ADT r21) 并更新了 android 包。由于我在所有 Android 项目上都遇到了相同的错误（“无法解析类型 java.lang.Object。它是从所需的 .class 文件中间接引用的 [...] Java 问题”），我搜索了一个解决方案并[在堆栈溢出](https://stackoverflow.com/questions/12073222/java-lang-object-cannot-be-resolved-in-eclipse)。除了在导入我的一个项目时遇到其他麻烦之外，我还阅读了其他问题，并[在 StackOverflow 中阅读了此解决方案](https://stackoverflow.com/questions/5493038/move-android-eclipse-project-into-workspace/6459478#6459478). 现在项目已导入，但我发现 645 错误，总是与未解决的类（例如 BluetootAdapter、Calendar、ContentProviderOperation）、不允许的类（例如 String）等有关。我在 Eclipse 3.5 的 Ubuntu 10.04 中从未遇到过这个问题. 我也许 oracle-java7 导致了这个？还是我有一些与 ADT 相关的 java o 配置错误？

希望在不重新安装java、elcipse和ADT的情况下解决。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:53:10.967

右键单击您的项目>构建路径>配置构建路径>从列表中选择android出现在您的左侧>然后检查android 4.xx（您的偏好）>按OK

# javascript - Javascript Google Maps v3 API - 无法添加标记

> ID：13612170
> 
> 赞同：1
> 
> 时间：2012-11-28T18:41:26.703
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

我是 Javascript 和 Google 地图的新手，我正在尝试使用 Google Developers 网站上提供的信息在我的地图上添加一个标记。尽管地图显示在当前位置上，并且我在 Javascript 控制台上没有收到任何错误，但由于某种原因，标记仍未显示。关于为什么会发生这种情况的任何想法？提前致谢。

这是我的代码：

```
 function initialize() {
              var myOptions = {
                zoom: 14,
                mapTypeId: google.maps.MapTypeId.ROADMAP
              };

              var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

              // Try W3C Geolocation (Preferred)
              if(navigator.geolocation) {
                browserSupportFlag = true;
                navigator.geolocation.getCurrentPosition(function(position) {
                  initialLocation = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
                  map.setCenter(initialLocation);
                }, function() {
                  handleNoGeolocation(browserSupportFlag);
                });
              }
              // Browser doesn't support Geolocation
              else {
                browserSupportFlag = false;
                handleNoGeolocation(browserSupportFlag);
              }

              function handleNoGeolocation(errorFlag) {
                if (errorFlag == true) {
                  alert("Geolocation service failed.");
                  initialLocation = newyork;
                } else {
                  alert("Your browser doesn't support geolocation. We've placed you in Siberia.");
                  initialLocation = siberia;
                }
                map.setCenter(initialLocation);
              }

                var marker = new google.maps.Marker({
                    position: initialLocation,
                    title:"You are here!"

                 });
                 // should add the marker to the map
                 marker.setMap(map);

            }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:42:01.860

地理位置服务是异步的。您需要在其回调函数中使用坐标。很难从您发布的内容中判断地理位置所采用的路径，如果成功，这里的代码将执行此操作。

```
 if(navigator.geolocation) {
            browserSupportFlag = true;
            navigator.geolocation.getCurrentPosition(function(position) {
              initialLocation = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
              map.setCenter(initialLocation);
              var marker = new google.maps.Marker({
                position: initialLocation,
                title:"You are here!"

                });
              // should add the marker to the map
              marker.setMap(map);
            }, function() {
              handleNoGeolocation(browserSupportFlag);
            }); 
```

# list - Prolog 列表位置

> ID：13612188
> 
> 赞同：0
> 
> 时间：2012-11-28T18:42:15.877
> 
> 标签：list, location, prolog

我一直在研究此代码以查找位置并告诉我该位置是否存在。代码是：

```
 location(C, L).
    location(C, [C,L]|_]).
    location(C, [_|T]):- location(C,T,L). 
```

如果 C 在位置 L 中显示为箱子，我希望它是真的。我输入以下代码：

```
 location(b,[(a, 1), (b,2)]). 
```

答案应该是肯定的，因为它发现胸部在该位置。这确实给了我一个肯定的答案，但是当我将代码更改为：

```
 location(e, [(a,1), (b,2)]). 
```

当它应该说“不”时，我仍然得到“是”。有谁知道我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:01:06.800

您好，我会尽力回答您的问题并指出您的错误。你的第一行说任何 C 都是 L 的元素。Prolog 中的统一是从上到下，从左到右完成的。因此 Prolog 将始终统一该行，因此它将始终返回 true。您的第二行和第三行包含语法错误。无论如何，这里是应该回答你的问题的代码：

**% 这里我们说没有箱子可以包含在一个空的位置**

```
 location(_,[]) :- fail. 
```

**% 如果我们以某种方式设法到达包含 C 的头部，那是真的**

```
location(C,[Head|_]) :- Head=(C,_). 
```

**% 这里我们说如果 C 不等于某事（从头部）尝试在尾部寻找 C**

```
location(C,[Head|Tail]):- Head=(Something,_),not(Something = C),location(C,Tail). 
```

也可以通过以下方式解决

**%基本上你会问 L 中是否有一个成员 Chest，使得 Chest=(C,_)。**

```
location1(C,L) :- member(Chest,L),Chest=(C,_). 
```

# sql - 创建层次结构 SQL Server OLAP 多维数据集时出现重复维度错误

> ID：13612190
> 
> 赞同：0
> 
> 时间：2012-11-28T18:42:22.180
> 
> 标签：sql, sql-server-2008, ssas

我是 OLAP 开发的新手。我面临以下问题。

我有一个发票维度和属性，如年、月、日期等。我想为年->月->日期创建层次结构。在创建invoiceid-->Year-->Month(created key as month+year)-->date之间的关系时

在处理我知道有重复年份的维度时，我收到了 2011 年的重复键错误。我想找到解决这个问题的正确方法有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:05:39.373

您是否尝试从中创建层次结构`InvoiceID -> Year -> Month -> Date`？如果是这样，难怪你弄错了，你应该创建你的层次结构`InvoiceID -> Date -> Month -> Year`

# matlab - 编译时diff函数不起作用

> ID：13612197
> 
> 赞同：1
> 
> 时间：2012-11-28T18:42:26.253
> 
> 标签：matlab

我编写了一个简单的程序来使用称为 Newton Raphson 方法的数值方法找到非线性方程的根，因此我需要计算函数在某些点的导数。我使用函数“diff”，它接受一个字符串并返回它的推导，然后我使用 eval 来计算切线的斜率：

```
func='sin(x^2)';
x=4.5;
slope=eval(diff(func)); 
```

该代码位于一个 .m 文件中，该文件与其他一些 .fig 文件一起。当我在 GUIDE 环境中或通过 MATLAB 的命令窗口调试/运行它时，一切似乎都很好，只有一个警告，该函数将在未来的版本中被弃用。但是当我使用以下命令编译文件时：“mcc -e file1 file2”，并运行.exe，当它到达带有“diff”的特定行并发出哔哔声时，它会引发运行时错误！是否有任何其他方法来计算应用程序文件中也支持的导数（符号/非数字）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:03:42.370

这将[在此处](http://blogs.mathworks.com/loren/2008/06/19/writing-deployable-code/#13)讨论。问题`func`不是`diff`。您不能使用将函数定义为字符串的替代方法吗？如果可能，将 func 设为普通函数文件，然后将其包含在已部署的包中。

# c - 如何在 MinGW 中获取用户名？

> ID：13612199
> 
> 赞同：0
> 
> 时间：2012-11-28T18:42:38.310
> 
> 标签：c, mingw

要使用 MinGW 从 Windows 获取用户名，我应该使用 unistd.h 中的函数 getlogin() 还是 Windows 函数 GetUserName？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:27:29.907

您可以检查`USERNAME`变量：

```
char *name = getenv("USERNAME"); // Get environmentvariable for Username

if( name == NULL )
    return -1; // Username not found ...
else
    printf("%s\n", name); // Output Username 
```

如果您完全使用 Windows，您也可以使用它的 API ( `GetUserName()`)：

```
#include <windows.h>
#include <Lmcons.h>

// ...

TCHAR name [ UNLEN + 1 ];
DWORD size = UNLEN + 1;

if( GetUserName((TCHAR*) name, &size) )
    printf("%s\n", name); // Output Username
else
    return -1; // Username not found ... 
```

## 一般来说：

*   **`getlogin()`**如果你在**linux / unix**上使用，因为它在 MinGW 中*不可用*
*   **`GetUserName()`**如果您在**Windows**上，请使用
***   使用**两者**（条件组预处理器）来保持**平台独立****

# wpf - 自定义 ComboBoxItem 有选择区域问题

> ID：13612205
> 
> 赞同：0
> 
> 时间：2012-11-28T18:42:55.963
> 
> 标签：wpf, wpf-controls

我抓住了组合框的整个模板进行一些修改。ComboBoxItem 的样式是这样的：

```
 <Style x:Key="ComboBoxItemStyle" TargetType="{x:Type ComboBoxItem}">
        <Setter Property="OverridesDefaultStyle" Value="True"></Setter>
        <Setter Property="Background" Value="{DynamicResource StandardBlackBrush}"></Setter>
        <Setter Property="FocusVisualStyle" Value="{x:Null}"></Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ComboBoxItem}">
                    <Border x:Name="Bd" BorderBrush="{DynamicResource StandardBlackBrush}" BorderThickness="3" SnapsToDevicePixels="true" >
                        <ContentPresenter x:Name="Cp" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Border>       
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsHighlighted" Value="true">
                            <Setter TargetName="Bd" Property="BorderBrush" Value="{DynamicResource StandardFocusRectangleBrush}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style > 
```

这会产生非常小的组合框项目，它们只是内容的高度/宽度，它只是一个文本字符串。为了使这些项目更大，我在 ContentPresenter 中添加了一个边距，它**看起来**很好：

```
<ContentPresenter Margin="20,10,20,10" x:Name="Cp" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/> 
```

但是，鼠标点击仍然必须在文本区域内。在文本之外但在边框内单击鼠标会关闭弹出窗口但不进行选择。这是我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:02:16.253

发生这种情况是因为边框在没有设置背景时不会对鼠标单击做出反应。

因此，要解决您的问题，您在 XAML 中的边框元素上设置以下内容：

```
Background="Transparent" 
```

# javascript - 在 Javascript 中执行动态命名的函数

> ID：13612206
> 
> 赞同：0
> 
> 时间：2012-11-28T18:42:58.187
> 
> 标签：javascript, function, dynamic

> **可能重复：**
> [当我将其名称作为字符串时如何执行 JavaScript 函数](https://stackoverflow.com/questions/359788/how-to-execute-a-javascript-function-when-i-have-its-name-as-a-string)

与这个苦苦挣扎，我似乎无法找到一个好的资源。

背景：我正在创建一个*步进*系统，并且我在一个属性中传递方向/顺序`data-step="1"`。这控制了将显示的 ID（这部分很容易），以及需要调用以获取正确信息的函数。

**问题基本上是**，如何**调用**我需要动态构建的函数？

**IE：** `step1(); step2();`除了我想在那里动态添加那个数字。

```
// In an essense, what I'm trying to achieve:
// It's always called step and then followed by a number

[step + directionNumber](); // which isn't working 
```

也尽量避免使用`eval`，因为我们都知道它是邪恶的:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T18:43:22.360

采用

```
window["step" + directionNumber](); 
```

当您在全局范围内编写时

```
function someName(){
} 
```

您正在使用函数`window`的名称`someName`和值定义全局对象 ( ) 的属性。

相当于

```
window.someName = function(){
} 
```

所以你可以把你的函数称为`window.someName();`或者，在这里更有用的是，`window['someName']();`

更好的解决方案可能是定义一个函数数组：

```
var stepFunctions = [];
stepFunctions[0] = function(){}; 
```

那么您可以使用`stepFunctions[directionNumber]();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:51:36.133

将您的函数存储在一个对象中，以便按名称动态访问它们。

```
var funcs = {};

funcs.step1 = function(){ console.log("foo"); };
funcs.step2 = function(){ console.log("bar"); }; 
```

* * *

```
var text = "step",
    number = 1;

funcs[text + number](); // foo

++number;

funcs[text + number](); // bar 
```

# asp.net-mvc - MVC 网格到 Excel

> ID：13612208
> 
> 赞同：1
> 
> 时间：2012-11-28T18:43:04.293
> 
> 标签：asp.net-mvc, linq-to-sql, gridview

我找到了这个项目/教程：

[http://www.codeproject.com/Articles/325103/MVC-Grid-to-Excel-file-download](http://www.codeproject.com/Articles/325103/MVC-Grid-to-Excel-file-download)

而且效果很好！但是，我只能让它与一个模型一起工作。所以，如果我只引入我的组织模型，它会很好用。但是，我需要通过运行 SQL 查询来填充 GridView。我在想 LINQ to SQL 会起作用，但我想不通。

这会使用我的组织模型中的数据加载 GridView 并将其发送到视图。

```
private VAGTCEntities db = new VAGTCEntities();
public ActionResult Index()
{
    ViewBag.Message = "Welcome to ASP.NET MVC!";
    List<Organization> model = db.Organizations.ToList();

    GridView gv = new GridView();
    gv.DataSource = model;
    gv.DataBind();
    Session["Organizations"] = gv;

    return View(model);
} 
```

该视图只是一个正常的视图：

```
@model IEnumerable<VAGTC.Models.Organization>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Download File", "Download")
</p>
<table>
    <tr>
        <th>
            Organization ID
        </th>
        <th>
            Organization Name
        </th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @item.OrganizationID
        </td>
        <td>
            @item.Name
        </td>
    </tr>
}

</table> 
```

单击下载链接时，它会调用 Actionresult，该 Actionresult 会调用一些 Javascript：

```
public ActionResult Download()
{
    if (Session["Organizations"] != null)
    {
        return new DownloadFileActionResult((GridView)Session["Organizations"], "Organizations.xls");
    }
    else
    {
        return new JavaScriptResult();
    }
} 
```

简单的！但是，我无法弄清楚如何使用 LINQ to SQL 查询。我需要能够引用多个表。例如，提取特定县和州的组织的所有地址（组织地址）以及组织名称（组织）。我想我必须使用 ViewModel，但是我仍然无法填充它。

组织模式：

```
namespace VAGTC.Models
{
    using System;
    using System.Collections.Generic;
    using System.ComponentModel.DataAnnotations;
    public partial class Organization
    {
        public Organization()
        {
            this.ContactMTMOrganizations = new HashSet<ContactMTMOrganization>();
            this.ContactTitles = new HashSet<ContactTitle>();
            this.OrganizationAddresses = new HashSet<OrganizationAddress>();
            this.OrganizationBusinessTypes = new HashSet<OrganizationBusinessType>();
            this.OrganizationCountries = new HashSet<OrganizationCountry>();
            this.OrganizationEmails = new HashSet<OrganizationEmail>();
            this.OrganizationIndustryCodes = new HashSet<OrganizationIndustryCode>();
            this.OrganizationMemberships = new HashSet<OrganizationMembership>();
            this.OrganizationNotes = new HashSet<OrganizationNote>();
            this.OrganizationPhones = new HashSet<OrganizationPhone>();
            this.OrganizationWebsites = new HashSet<OrganizationWebsite>();
        }

        [Display(Name = "Organization ID:")]
        public int OrganizationID { get; set; }
        [Display(Name = "Organization Name:")]
        public string Name { get; set; }

        public virtual ICollection<ContactMTMOrganization> ContactMTMOrganizations { get; set; }
        public virtual ICollection<ContactTitle> ContactTitles { get; set; }
        public virtual ICollection<OrganizationAddress> OrganizationAddresses { get; set; }
        public virtual ICollection<OrganizationBusinessType> OrganizationBusinessTypes { get; set; }
        public virtual ICollection<OrganizationCountry> OrganizationCountries { get; set; }
        public virtual ICollection<OrganizationEmail> OrganizationEmails { get; set; }
        public virtual ICollection<OrganizationIndustryCode> OrganizationIndustryCodes { get; set; }
        public virtual ICollection<OrganizationMembership> OrganizationMemberships { get; set; }
        public virtual ICollection<OrganizationNote> OrganizationNotes { get; set; }
        public virtual ICollection<OrganizationPhone> OrganizationPhones { get; set; }
        public virtual ICollection<OrganizationWebsite> OrganizationWebsites { get; set; }
    }
} 
```

组织地址模型：

```
namespace VAGTC.Models
{
    using System;
    using System.Collections.Generic;
    using System.ComponentModel.DataAnnotations;

    public partial class OrganizationAddress
    {
        [Display(Name = "Street:")]
        public string StreetID { get; set; }
        [Display(Name = "City:")]
        public string CityID { get; set; }
        [Display(Name = "Organization ID:")]
        public int OrganizationID { get; set; }
        [Display(Name = "Country:")]
        public string CountryNameID { get; set; }
        [Display(Name = "County:")]
        public string CountyNameID { get; set; }
        [Display(Name = "County State:")]
        public string CountyStateID { get; set; }
        [Display(Name = "State:")]
        public string State { get; set; }
        [Display(Name = "Zip-code:")]
        public string ZipCode { get; set; }
        [Display(Name = "Address Type:")]
        public string Type { get; set; }

        public virtual Country Country { get; set; }
        public virtual County County { get; set; }
        public virtual Organization Organization { get; set; }

        public string FullAddress
        {
            get
            {
                return StreetID + ", " + CityID + ", " + State + " " + ZipCode + ", " + CountryNameID;
            }
        }
        public string FullCounty
        {
            get
            {
                return CountyNameID + ", " + CountyStateID;
            }
        }

    }
} 
```

我将非常感谢朝着正确的方向踢球！

非常感谢你！

编辑*

我认为归结为能够填充如下列表：

```
List<Organization> model = db.Organizations.ToList(); 
```

但来自多个表。仍在玩 ViewModels 但它出现空白，因为我无法弄清楚如何使用 Linq to SQL 填充 ViewModel。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:11:38.537

本质上，您需要在实体之间执行相当于 SQL 连接的操作。如果您启用了延迟加载，您可以自动访问与您的主要组织实体相关的所有实体。如果没有，您可以使用预先加载来访问相同的数据（`db.Organizations.Include(o => o.OrganizationAddress).ToList()`例如使用）。

或者您可以使用 Linq to Entities Join 方法。如果您想使用 ViewModel，您可能需要创建一个类来存储您感兴趣的来自组织和相关实体的属性。您只需要从您的实体对象（在本例中为您的组织集合中的每个项目）填充它的属性。

# c# - 在 process.start 期间“仅完成了部分 readprocessmemory 或 writeprocessmemory 请求”

> ID：13612212
> 
> 赞同：2
> 
> 时间：2012-11-28T18:43:20.337
> 
> 标签：c#, process, process.start

> **可能重复：**
> [C# 在 Process.Kill() 期间仅完成了 ReadProcessMemory 或 WriteProcessMemory 请求的一部分](https://stackoverflow.com/questions/10986486/c-sharp-only-part-of-a-readprocessmemory-or-writeprocessmemory-request-was-compl)

我正在尝试从我当前的流程中启动一个新流程。我正在使用 processInfo 和 process.start 来执行此操作。新进程应该运行我之前构建的一个 exe，称为 newProc.exe，它可以从 cmd 行正常运行。

调用exe的代码

```
class Program
    {
        static void Main(string[] args)
        {
            StartNewProc();
        }

        public static void StartNewProc()
        {
            string pathToNewProc = @"c:\path\to\newproc.exe";

            ProcessStartInfo processInfo = new ProcessStartInfo();
            processInfo.FileName = pathToNewProc;
            processInfo.Arguments = "Some cmd line argument";
            processInfo.CreateNoWindow = false;
            processInfo.WindowStyle = ProcessWindowStyle.Hidden;

            Process proc = Process.Start(processInfo);
            proc.WaitForExit();
        }
    } 
```

当我在 Visual Studio 调试器或 cmd 行中运行它时，newProc.exe 不会启动。在调试器中查看它，如果我在 Process.Start 之后查看“proc”，我可以看到 MainModule 成员中引发了异常。异常消息是“仅完成了 ReadProcessMemory 或 WriteProcessMemory 请求的一部分”。

深入了解该异常的 stackTrace

> System.Diagnostics.NtProcessManager.GetModuleInfos(Int32 processId, Boolean firstModuleOnly) 在 System.Diagnostics.Process.get_MainModule()

对 32 位与 64 位问题的异常点进行了一些研究。两个 exe，newProc exe 和我提出的代码的调用 exe，都是 64 位应用程序。我通过应用程序属性和任务管理器（寻找“*32”标签）进行了检查。我尝试在 Visual Studio 中将平台设置为 x64 和 Any CPU，但没有运气。

关于为什么 Process.Start 在这些条件下无法阅读的任何想法？

注意：这是在 Win7 64 位上。两个 exe 都是 C# 应用程序。两者都使用 2.0 框架（我知道但有必要）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:49:40.390

我想到了。问题完全出在我的 newProc 应用程序中。由于 args.Len 检查，它提前退出。返回的异常只是误导性的，让我有点胡思乱想。

# android - 如何响应 Android 中的 HTTP 身份验证挑战

> ID：13612213
> 
> 赞同：7
> 
> 时间：2012-11-28T18:43:21.033
> 
> 标签：android, http, authentication, https

在我的应用程序中，我通过 HTTPS 对 Web 服务进行 HTTP 调用。我的愿望是设计我的客户端，使其仅在遇到身份验证挑战时询问用户的用户名和密码。我想要*被动反应*，而不是*先发制人*。由于我的应用程序的性质，在某些情况下它不需要进行身份验证。

在 iOS 中，这个过程通过[NSURLConnectionDelegateProtocol](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSURLConnectionDelegate)变得非常简单，它在我的应用程序的 iOS 版本中实现。使用此类建立连接，并且仅当提出挑战时，该类才会向其委托请求身份验证凭据。

如何在 Android 中做到这一点？使用[AuthenticationHandler](http://developer.android.com/reference/org/apache/http/client/AuthenticationHandler.html)？或者也许是[Authenticator](http://developer.android.com/reference/java/net/Authenticator.html)？如果是这样，是否可以提供示例或教程？

**编辑 1**：

使用 Authenticator 类（请参阅下面的答案），我现在能够响应身份验证挑战，但目前只能使用硬编码凭据。我想提示用户输入用户名和密码。根据[Android 文档](http://developer.android.com/reference/org/apache/http/client/AuthenticationHandler.html)，在该`getPasswordAuthentication`方法中，您“通常会提示用户输入所需的输入”。

这怎么可能？在不阻塞 UI 线程（我知道不能/不应该完成）的情况下，如何在该方法中显示对话框、等待用户输入、然后检索输入的凭据并返回它们？

**编辑 2**：

虽然很少或没有使用 Authenticator 类的示例，但我能够找到的结果表明，在单个方法中提示用户输入是不可能的，例如`getPasswordAuthentication`. 可能必须恢复到 Apache Http 客户端...

**最终编辑**：

我仍在使用 HttpURLConnection，但按照 Edward 下面的建议做一些事情。似乎没有任何可配置的类来处理身份验证挑战和提示用户输入，所以我手动执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T00:29:32.583

发送不带身份验证标头的请求。如果需要身份验证，连接将失败并出现 401 错误。让失败冒泡到任何代码发出初始请求。然后该代码应该向用户显示一个身份验证对话框。记住用户提供的用户名/密码，并在请求中添加必要的身份验证标头重试失败的请求。

记住会话其余部分的用户名/密码，这样您就不必一直询问用户。

对不起，我没有任何示例代码；我已经在 java.net 中实现了这个，但是如果你使用的是 apache，那对你没有任何好处。

该线程可能对您有所帮助：[Java 中的 Http Basic Authentication using HttpClient?](https://stackoverflow.com/questions/3283234/http-basic-authentication-in-java-using-httpclient)

编辑：

我已经在 java.net 中实现了这个，但这是我为雇用而做的工作，我无权访问源代码。一个问题是 java.net 不允许您在每个连接的基础上设置身份验证，而是让您实现单个全局身份验证器。因为我的应用只与一个特定的网站通信，所以这不是问题。

我所做的是创建一个[Authenticator](http://developer.android.com/reference/java/net/Authenticator.html)的子类，它缓存来自用户的用户名/密码数据。缓存的初始值为空。还有一个“尝试计数器”。当验证器被调用并且没有缓存的用户/密码信息时，会通过对话框提示用户。如果缓存的值存在，它们会在不打扰用户的情况下返回。

如果后续调用验证器，则假定用户/密码信息不正确，并再次提示用户。如果计数器达到 10，则验证器返回 null（失败）。

在每次新的互联网连接之前，计数器都会重置。

更智能的身份验证器会关注主机和/或领域（提示字符串）并相应地缓存用户/密码。

我不确定这对您在 Android 环境中是否有用，因为弹出对话框可能不是您的身份验证器可用的选项。但我可能错了。这取决于您的应用程序。

在 Android 环境中，您需要从线程执行 http 请求，然后在数据到达时向活动发出信号。如果您的线程检测到 401 错误，它将向 Activity 发出信号，然后该 Activity 会弹出一个对话框并重新启动该线程。然后，该线程将注册一个简单的身份验证器，该身份验证器仅返回用户/密码信息。或者，线程可以手动构建 Authorization 标头，尽管这需要更多工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T14:52:36.623

对于那些不知道的人，有两个主要的 Http 客户端 API 可用于 Android：

*   Apache HTTP 客户端
*   java.net HttpURLConnection

[这篇Android 开发者博客文章](http://android-developers.blogspot.com/2011/09/androids-http-clients.html)最近对这两者进行了概述。

我选择使用 java.net 实现，因为，引用博客：“*新应用程序应该使用 HttpURLConnection；这是我们今后将花费精力的地方。* ”此外，如果 Url 提供，HttpURLConnection 将使用 SSL 自动连接是Https。正如我在原始帖子中所说，我正在寻找 API 中的接口，以便在必要时自动处理身份验证挑战。我发现 Authenticator 类可以满足我的要求。

这是我到目前为止的代码，它可以工作：

```
URL Url = new URL(url);

Authenticator.setDefault(new Authenticator () {
    protected PasswordAuthentication getPasswordAuthentication() {
        return (new PasswordAuthentication("username", "password".toCharArray()));
    }
});

connection = (HttpURLConnection) Url.openConnection();
connection.setRequestProperty("Authorization", "Basic");

content = new BufferedInputStream(connection.getInputStream());
BufferedReader reader = new BufferedReader(new InputStreamReader(content));
String line;
while ((line = reader.readLine()) != null) {
    stringBuilder.append(line);
} 
```

（对我来说）真正调用 Authenticator 方法的关键是这一行：

```
connection.setRequestProperty("Authorization", "Basic"); 
```

否则，该请求实际上会返回 200（OK）的响应，并将我重定向到登录页面。

**下一步**：通过`getPasswordAuthentication`上述方法，提示用户输入用户名和密码，然后以某种方式返回。如果您对此有帮助，请发布答案！

# sql - 忽略查询两边的第一个“0”

> ID：13612215
> 
> 赞同：1
> 
> 时间：2012-11-28T18:43:29.440
> 
> 标签：sql, sql-server, sql-server-2012

我需要确定表 OtherItems 中的哪些项目也存在于 ItemMain 中，哪些不存在。

问题是有些 UPC 的开头是 0，有些则没有。

所以我尝试了这个查询，但结果看起来不太好。

```
SELECT * from OtherItems
WHERE UPC like '0%' and upc not in(select '0' + UPC from itemmain)
Or UPC not in(select UPC from itemmain)) 
```

有人可以指导我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T18:54:59.320

```
select * 
from OtherItems 
where not exists ( select * 
                   from itemmain 
                   where UPC=OtherItems.UPC or '0'+UPC=OtherItems.UPC ) 
```

也许：

```
select * 
from OtherItems 
where ( UPC like '0%' 
        and not exists (select * from itemmain where '0'+UPC=OtherItems.UPC) )
   or ( UPC not like '0%' 
        and not exists (select * from itemmain where UPC=OtherItems.UPC) ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T18:56:16.547

UPC 通常没有字母字符。为什么不将它们转换为一个数字，如果它存在于一个而不是另一个上，它会删除前导零？

```
SELECT *
FROM OtherItems A
WHERE NOT EXISTS
     (SELECT 1
      FROM ItemMain B
      WHERE CAST(A.UPC as DECIMAL(18)) = CAST(B.UPC) AS DECIMAL(18)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T18:55:36.630

您的逻辑需要在 OR 周围加上括号：

```
SELECT * from OtherItems
WHERE UPC like '0%' and 
    (upc not in(select '0' + UPC from itemmain)
    Or UPC not in(select UPC from itemmain)) 
```

使用括号， AND 优先，所以你有效地得到`(A AND B) OR C`

# shell - 使用 DOS，Brian Friesen 的 Tee32 3.2，捕获返回码

> ID：13612217
> 
> 赞同：1
> 
> 时间：2012-11-28T18:43:41.373
> 
> 标签：shell, ant, dos, tee

我正在使用管道来调用 apache ant

```
SET ERRORLEVEL=
call C:\ant\bin\ant.bat %* |TEE build-logs\build-log-%yyyy%%mm%%dd%.%hh%%nn%%ss%.txt
echo ERRORLEVEL %ERRORLEVEL% 
```

`ERRORLEVEL 4264624`当我使用带有或不带有测试任务的测试任务时，这给了我一个一致性`<fail/>`。

换句话说，我没有得到 ant.bat 的状态，而是其他的。

这是 DOS 而不是 BASH，所以我无权访问

```
echo ${PIPESTATUS[0]} 
```

有没有直接的解决方案，如果不是，我的目标是如图所示记录 ant 输出，并捕获返回代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:06:24.193

`-logger` [您可以使用命令行选项](http://ant.apache.org/manual/running.html)将 ant 输出定向到文件。

```
ant -l <logfile> 
```

但这也不会写入标准输出，我猜 TEE 正在为你做。

要将输出输出到文件和标准输出，您应该能够使用带有 log4j 配置的[Log4jListener](http://ant.apache.org/manual/listeners.html#Log4jListener)来写入控制台和文件。

# error-handling - 插入错误：选择与列的定义不匹配

> ID：13612219
> 
> 赞同：0
> 
> 时间：2012-11-28T18:43:53.030
> 
> 标签：error-handling, insert

我有一个查询，它根据几个性能指标对呼叫中心进行排名。我试图通过添加每个中心收到的调查数量来修改此查询。

在适当的位置添加“总计”或“调查”列后，我收到错误：

```
Insert Error: Column name or number of supplied values does not match table definition. 
```

你能告诉我我在哪里错误定义了列吗？我将发布代码的相关部分：

```
IF OBJECT_ID('tempdb..#ACSResults') 
IS NOT NULL DROP TABLE #ACSResults 
CREATE TABLE #ACSResults (AreaID VARCHAR(4), Location VARCHAR(50), Surveys VARCHAR(6), MonthName VARCHAR(6), RepResolve FLOAT, ERP FLOAT)
INSERT INTO #ACSResults 
      SELECT 
        a.area,
        a.location,
        COUNT(a.IVRCallID) as Surveys,
        a.monthname,
        CASE WHEN SUM(CASE WHEN a.RepResolve IN ('1','0') THEN 1 ELSE 0 END) = 0 THEN NULL ELSE CAST(SUM(CASE WHEN a.RepResolve = '1' THEN 1 ELSE 0 END)AS FLOAT) / CAST(SUM(CASE WHEN a.RepResolve IN ('1','0') THEN 1 ELSE 0 END) AS FLOAT) END AS REPRESOLVE,
        CASE WHEN SUM(CASE WHEN a.ERP IN ('0','1','2','3','4','5','6','7','8', '9', '10') THEN 1 ELSE 0 END) = 0 THEN NULL ELSE (CAST(SUM(CASE WHEN a.ERP IN ('8', '9', '10') THEN 1 ELSE 0 END) AS FLOAT) / CAST(SUM(CASE WHEN a.ERP in ('0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10') THEN 1 ELSE 0 END) AS FLOAT))END AS ERP

FROM (SELECT
... 
acs.IVRCallID, 
...

FROM dbCustomerSurvey.Detail.vwAfterCallSurvey acs 
LEFT JOIN dbEmployee.Summary.vwEmployeeHistory eh ON acs.EmployeeID = eh.EmployeeID AND acs.OfferDate BETWEEN eh.StartDate AND eh.EndDate 
LEFT JOIN dbEmployee.Config.vwName Rep ON eh.EmployeeID = Rep.EmployeeID 
LEFT JOIN dbEmployee.Config.vwName Sup ON eh.BottomUp01ID = Sup.EmployeeID
LEFT JOIN dbEmployee.Config.vwName Mgr ON eh.BottomUp02ID = Mgr.EmployeeID
LEFT JOIN dbEmployee.Config.vwName Dir ON eh.BottomUp03ID = Dir.EmployeeID
LEFT JOIN dbEmployee.Config.vwVirtualLocation vl ON eh.VirtualLocationID = vl.VirtualLocationID 
LEFT JOIN dbEmployee.Config.vwDepartment d ON eh.DepartmentID = d.DepartmentID 
LEFT JOIN dbEmployee.Config.vwPeopleSoftDepartment psd ON eh.PeopleSoftDepartmentID = psd.PeopleSoftDepartmentID
WHERE acs.CurrentStatus IN ('Completed', 'COMP') and acs.surveytype IN ('ACS_FCR_Rep_Perform', 'ACS_FCR_Rep_Perform-prepaid', 'ACS_Rep_Perform_BSC2', 'ACS_Rep_Perform_Gov') AND acs.OfferDate Between @StartDate AND @EndDate) a 

...

group by 
a.area,
a.location,
a.monthname

--------------------------------------------------------------------------------REPEAT TABLE------------------------------------------------------------------------------------------------------
IF OBJECT_ID('tempdb..#HRRep') 
IS NOT NULL DROP TABLE #HRRep 
CREATE TABLE #HRRep (AreaID VARCHAR(4), Location VARCHAR(50), Surveys VARCHAR(6), MonthName VARCHAR(6), HourRepeatPercent FLOAT)
INSERT INTO #HRRep (AreaID, Location, Surveys, MonthName, HourRepeatPercent) 
      Select eh.AreaID, vl.VirtualLocationDescription, COUNT(acs1.IVRCallID) as Surveys, Month (acs.statdate) AS MonthName,

Cast(Sum(acs.Repeats2Hr)as float) /nullif(Sum(acs.Calls2Hr), 0) as 'HourRepeatPercent'

From dbReportSummary.ReportSummary.vwRepeatCalls2Hr acs with (NoLOCK)
LEFT JOIN dbEmployee.Summary.vwEmployeeHistory eh with (NoLOCK) ON acs.EmployeeID = eh.EmployeeID AND acs.StatDate BETWEEN eh.StartDate AND eh.EndDate 
LEFT JOIN dbEmployee.Config.vwVirtualLocation vl ON eh.VirtualLocationID = vl.VirtualLocationID 
LEFT JOIN dbEmployee.Config.vwDepartment d ON eh.DepartmentID = d.DepartmentID 
LEFT JOIN dbEmployee.Config.vwPeopleSoftDepartment psd ON eh.PeopleSoftDepartmentID = psd.PeopleSoftDepartmentID
LEFT JOIN dbCustomerSurvey.Detail.vwAfterCallSurvey acs1 ON acs.EmployeeID=acs1.EmployeeID and acs1.OfferDate BETWEEN @StartDate and @EndDate

...

Group by eh.AreaID, vl.VirtualLocationDescription, Month (acs.statdate)

SELECT a.Location, a.Surveys, a.RepResolve, a.RRRank, a.ERP, a.ERPRank,a.HourRepeatPercent, a.RepeatRank, (a.RRRank + a.ERPRank+a.RepeatRank) as 'Total Rank Points', Rank() OVER(ORDER BY (a.RRRank + a.ERPRank+a.RepeatRank) ASC, a.RepResolve DESC) AS 'Overall Rank'
From(
            SELECT a.Location, a.Surveys, a.RepResolve, Rank() OVER(ORDER BY a.RepResolve DESC) AS RRRank, a.ERP, Rank() OVER(ORDER BY a.ERP DESC) AS ERPRank, b.HourRepeatPercent, Rank() OVER(ORDER BY b.HourRepeatPercent ASC) AS RepeatRank
            FROM #ACSResults AS A
            Left Join #HRRep AS B on a.areaid=b.areaid and a.monthname=b.monthname and a.location=b.location and a.Surveys=b.Surveys
) a
Group BY  a.Location, a.Surveys, a.RepResolve, a.RRRank, a.ERP, a.ERPRank,a.HourRepeatPercent, a.RepeatRank, (a.RRRank + a.ERPRank+a.RepeatRank) 
```

“...” 表示由于不相关而删除的一段代码。如果我发布的内容不够多，请告诉我。我可以发布更多信息，但听说过去发布过多的投诉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:10:35.557

执行此代码，然后重试：

```
DROP TABLE #ACSResults 
DROP TABLE #HRRep 
```

# r - 使用 Shiny 和 RStudio 导入数据

> ID：13612224
> 
> 赞同：5
> 
> 时间：2012-11-28T18:44:09.000
> 
> 标签：r, rstudio, shiny

是否可以从 Shiny（例如 csv 文件）中加载数据，或者是否所有相关数据都需要在源代码中？

我有兴趣开发一个闪亮的应用程序并分发它，但数据将来自用户的机器，我想从闪亮的内部加载。

如果无法直接从 Shiny App 加载，用户指定数据位置的最佳方式是什么？这适用于没有 R 经验的用户，所以我想让它尽可能简单。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T19:12:36.807

您可以`file.choose()`在应用程序启动时调用（例如在调用 之前在 server.R 中`shinyServer`）。这有帮助吗？

# python - 仅当用户不积极工作时，如何运行 python 脚本？

> ID：13612225
> 
> 赞同：1
> 
> 时间：2012-11-28T18:44:20.967
> 
> 标签：python, cpu, python-idle

我想运行一个很长的工作 python 脚本，它在 CPU 上很困难。有没有办法查明用户是否在积极工作？（移动鼠标和键盘？）

编辑：仅在 Windows 上运行。优先级不是个好主意，仍然占用大量CPU。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T18:47:58.627

如果您以低优先级 ( `nice 20 python foo.py`) 运行脚本，它将一直运行，但不会对较高优先级的进程产生太大影响（这将是所有进程，因为 20 是最低优先级）。

# php - 在 HTML 中重构 PHP 代码

> ID：13612226
> 
> 赞同：0
> 
> 时间：2012-11-28T18:44:30.970
> 
> 标签：php, html

如果这只是一个静态网站，我会有四个链接

```
<li><a href="javascript:void(0)">Action 1</a></li>
<li><a href="javascript:void(0)">Action 2</a></li>
<li><a href="javascript:void(0)">Action 3</a></li>
<li><a href="javascript:void(0)">Action 4</a></li> 
```

但在这种情况下，链接需要执行不同的回调、输出消息和操作，具体取决于点击者。现在，由于所有这些复杂性，我的页面非常混乱。我的代码是这样的；

```
<?php
 foreach ($var as $key) {
?>
  <div class="content">
     <li><a href="javascript:void(0)">Action 1</a></li>
     <li><a href="javascript:void(0)">Action 2</a></li>
       <?php
        if(session check){
             $var1 = the ouptut of some function
             $var2 = the output of another function
                  if(another check) {
           ?> 

                     <li><a href="javascript:void(0)">Action 3 type 1</a></li>

               <?php
                   } else{
                        if($var1 === something){
                  ?>
                            <li><a href="javascript:void(0)" onClick="somefunc()">Action 3 type 2</a></li>
                      <?php
                         } 
                         else {
                          ?>
                            <li><a href="javascript:void(0)" class ="colorlink" onClick="somefunc()">Action 3 type 3</a></li>
                        <?php
                            }
                         }
 /* we are done with action 3 and now moving to action 4\. Nb: still in the same session check */
        if($var2 == something){
       ?>
           <li><a href="javascript:void(0)" onClick="somefunc()">Action 4 type 1</a></li>

      <?php
        }else{
       ?>
           <li><a href="javascript:void(0)" style ="colorit"onClick="somefunc()">Action 4 type 2</a></li>
     <?php 
          }
/* Now thats the end of everthing in the session check */
/* This else is for session not active */
 } else{
     <li><a href="javascript:void(0)">Action 3</a></li>
     <li><a href="javascript:void(0)">Action 4</a></li>
     }
    ?> 
```

我真的很抱歉缩进有多糟糕，我真的不知道如何缩进。我想知道是否有更好的方法来重构代码，当它被正确缩进时它看起来并没有那么糟糕。我知道的选项是，首先，我将所有内容都包裹在一个 php 标记中并回显出 html，但问题是，所有下一个 if 语句看起来仍然很糟糕。

第二个选项是 if:,else:,endif; 构造，但这并没有使它变得更好。这就是我需要你聪明才智的地方，我还能如何重组这段代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:04:58.043

如果我正确理解了您的问题，您不能将 PHP 验证与 HTML 分开并根据验证功能显示和隐藏操作按钮吗？

检查下面的代码

**HTML 和 PHP**

```
<?php
    $username = 'somename';

    function getmyclass(i,user){
       //return active or inactive according to the conditions
    }
?>
<div class="content">
     <li><a href="javascript:void(0)" class="<?php echo getmyclass(1,$username) ?>" onClick="somefunc1()">Action 1</a></li>
     <li><a href="javascript:void(0)" class="<?php echo getmyclass(2,$username) ?>" onClick="somefunc2()">Action 2</a></li>
     <li><a href="javascript:void(0)" class="<?php echo getmyclass(3.1,$username) ?>" onClick="somefunc3()">Action 3</a></li>
     <li><a href="javascript:void(0)" class="<?php echo getmyclass(3.2,$username) ?>" onClick="somefunc4()">Action 3</a></li>
     <li><a href="javascript:void(0)" class="<?php echo getmyclass(4.1,$username) ?>" onClick="somefunc5()">Action 4</a></li>
     <li><a href="javascript:void(0)" class="<?php echo getmyclass(4.2,$username) ?>" onClick="somefunc6()">Action 4</a></li>
</div> 
```

获取类函数可以将类返回为`active`或`inactive`，如果它处于非活动状态，则不会显示操作按钮。

**CSS**

```
.active{
   display:block;
}

.inactive{
   display:none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:47:53.507

您可能想研究一个[PHP 模板引擎](http://www.webresourcesdepot.com/19-promising-php-template-engines/)。我在很多项目中使用 PHPTAL。我认为 Twig（未在此处列出）也很受欢迎，可能是因为 Symfony 很受欢迎。

目标是使 PHP 代码与 PHP 代码保持一致，并防止不断地闯入和闯出 php 标签。

# css - 在孩子的身高变化上更改父 DIV

> ID：13612227
> 
> 赞同：1
> 
> 时间：2012-11-28T18:44:38.737
> 
> 标签：css, html

我一直在探索这个几个小时无济于事。我基本上是将我的网站从过时的表格设置转换为 div 设置。

这是我在表格设置中的一种示例：http: [//jsfiddle.net/vxgqE/2/](http://jsfiddle.net/vxgqE/2/)

这是一个 div 设置：http: [//jsfiddle.net/G3bNh/](http://jsfiddle.net/G3bNh/)

我已经设法使用 float: left 和 position: relative 属性正确对齐 DIV，但我发现的问题是当右单元格（参见上面的链接）的高度增长时，左单元格会增长 - 这不会在 div 设置中发生类似情况。

如何确保这两个中间单元始终保持相同的高度？

我知道那里有大量的 JavaScript 和 jQuery 解决方案......但是有没有纯 HTML/CSS 解决方案？

感谢您的投入，非常感谢。

![在此处输入图像描述](../Images/b449b4d43668aac8fd6696703442d7cf.png) HTML 代码：

```
<table>
    <tr>
        <td class="top">
            <!-- image1 !-->
        </td>
    </tr>
    <tr>
        <td class="mid1">
            <p>
                exrc fdbodf nosdf ifd onsdfo nj dfnsn a fnl mfasn saf
            </p>
        </td>
        <td class="mid2">
            <p>
                exrc fdbodf nosdf ifd onsdfo nj dfnsn a fnl mfasn saf
            </p>
        </td>
    </tr>
    <tr>
        <td class="bot">
            <!-- image2 !-->            
        </td>
    </tr>
</table> 
```

分区代码：

```
<html>
<head>

<style type="text/css">
div {border: 1px solid;}

#arrowItem {
position: absolute;
float: left;
width: 100%;
}

#arrowItem-ArrowTop {
background-image: url('img/About-Process_ArrowsTop.png'); 
height: 70px;
width: 300px;
}

#arrowItem-ArrowCenter {
position: absolute;

}

#arrowItem-ArrowBot {
background-image: url('img/About-Process_ArrowsBot.png'); 
height: 70px;
width: 300px;
}

#arrowItem-RightText {
position: absolute;
float: left;
position: relative;
width: 600px;

}

#arrowItem-text1 {
position: relative;
float: left;
width: 300px;
background-color: #d4e0a9; 
border-right: 2px solid #a0b165; 
border-left: 2px solid #a0b165; 
}

#arrowItem-text2 {
position: relative;
float: left;
width: 300px;
}

</style>

</head>
<body>

<div id="arrowItem">
 <div id="arrowItem-ArrowTop">
 </div>
 <div id="arrowItem-ArrowCenter">
  <div id="arrowItem-text1">
   <p>
   1234567812345678
   </p>
  </div>
  <div id="arrowItem-text2">
   <p>
   23456723456789
   </p>
  </div>
 </div>
 <div id="arrowItem-ArrowBot">
 </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:31:19.443

经过一天的修修补补，我自己弄清楚了……我不敢相信花了这么长时间。

解决方案是使用 left:-300 负属性以及负边距属性使用几个小心放置的 div。我的特定项目的完整代码如下：

```
<html>
<head>

<style type="text/css">
div {border: 0px;}

#arrowItem {
position: relative;
float: left;
width: 100%;
}

#arrowItem-ArrowTop {
position: relative;
background-image: url('img/About-Process_ArrowsTop.png'); 
height: 70px;
width: 300px;
}

#arrowItem-ArrowBot {
position: relative;
background-image: url('img/About-Process_ArrowsBot.png'); 
height: 70px;
width: 300px;
left: -300px;
top: +70px;
margin-top: -70;
}

#arrowItem-RightText {
position: absolute;
float: left;
position: relative;
width: 600px;

}

#arrowItem-text1 {
position: relative;
left: 300px;
width: 500px;
}

#arrowItem-text2 {
position: relative;
top: -100px;
width: 300px;
height: 100px;
background-color: #d4e0a9; 
border-right: 2px solid #a0b165; 
border-left: 2px solid #a0b165; 
}

#test1 {
position: absolute;
top: 0px;
left: -300px;
width: 300px;
padding: 0px;
margin: 0px;
height: 100%;

border-right: 2px solid #a0b165; 
border-left: 2px solid #a0b165; 
}
</style>

</head>
<body>

<div id="arrowItem">
 <div id="arrowItem-ArrowTop">
 </div>

 <div id="arrowItem-ArrowCenter">
  <div id="arrowItem-text1">
   <p>
The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. 
   </p>
   <div id="test1">
   ddd
   </div>
   <div id="arrowItem-ArrowBot">
   </div>
  </div>

 </div>

</div>
</html> 
```

# android - 如何使我的应用程序仅在 android 4.03 和 4.04 版本的市场上不可见？

> ID：13612230
> 
> 赞同：0
> 
> 时间：2012-11-28T18:44:45.100
> 
> 标签：android, sdk, version

我需要使我的应用程序对 4.03 和 4.04 版本不可见，但我希望它对更低和更高版本可见（比如说从 2.1 到 4.0 以及从 4.1 JellyBean ->）

我知道我可以将 android maxsdkVersion 指定为 14，但这会排除我想要包含的 JellyBean。那么如何仅排除 4.03 和 4.04 版本呢？

# css - 如何更改浏览器持久蓝色选择所有突出显示颜色？

> ID：13612232
> 
> 赞同：0
> 
> 时间：2012-11-28T18:44:50.347
> 
> 标签：css, xcode, highlight, frontend

我知道如何更改突出显示的文本颜色，但是我无法在我的网站上更改持久的蓝色突出显示。

这是我的示例[http://i.imgur.com/d4HkP.png的屏幕截图](http://i.imgur.com/d4HkP.png)

要查看示例，请访问下面的 jsfiddle，然后使用 command + a 或 ctrl + a 突出显示所有文本...

此处的蓝色填充或边距是否突出显示？另外，我注意到我可以通过在 [p] 标签之外的 dom 中放置 [br] 标签来创建更多它

对此有什么想法吗？

**编辑：**

我创建了一个小提琴来解决这个问题并更好地说明它：

```
::selection doesn't work 
```

[http://jsfiddle.net/designaroni/UTd3E/](http://jsfiddle.net/designaroni/UTd3E/)

突出显示正在运行的内容，您会看到蓝色，这是这里的罪魁祸首。

这里还有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:58:53.787

无法更改浏览器突出显示您网站的方式。这个问题是特定于浏览器的，因为不同的浏览器以不同的方式突出显示。但是，您可以通过 CSS 设置网站的哪些部分可以或不能通过用户选择属性突出显示。

编辑：我以为你知道如何更改选择的颜色，但现在我明白你的意思是突出显示文本的颜色。下面的答案可能涵盖了这一点；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:00:14.850

您可以自定义`::selection`伪元素。请参阅[Mozilla 的文档](https://developer.mozilla.org/en-US/docs/CSS/%3a%3aselection)

从文档中的示例中，您可以从文档中自定义选择颜色，如下所示：

```
/* draw any selected text yellow on red background */
#myelem::-moz-selection { color: gold;  background: red; }  /* For Firefox */
#myelem::selection      { color: gold;  background: red; }  /* Other ::selection-compatible browsers */ 
```

要使其适用于页面上的所有可选元素：

```
*::-moz-selection { color: gold;  background: red; }  /* For Firefox */
*::selection      { color: gold;  background: red; }  /* Other ::selection-compatible browsers */ 
```

请注意，这是一个伪元素，并且没有标准化，因此它的行为是非常由实现定义的。

# c++ - C2653：不是没有预编译头文件的类或命名空间

> ID：13612233
> 
> 赞同：3
> 
> 时间：2012-11-28T18:44:51.480
> 
> 标签：c++, class, namespaces

我正在使用 VisualStudio 2010 使用 Qt 4.8.3 构建一个简单的程序，但我在使用简单的方法定义时遇到了问题：

这是我的代码：

GuiHelper.h

```
#ifndef GUIHELPER_H 
#define GUIHELPER_H

#include "GuiHelper.cpp"
#include <QString>
#include <QWidget>
#include <QFile>

class GuiHelper
{
private:
static void useStyleSheet(QString, QWidget*);  
};
#endif //GUIHELPER_H 
```

和 GuiHelper.cpp：

```
#include <QString>
#include <QWidget>
#include <QFile>
#include "GuiHelper.h"

void GuiHelper::useStyleSheet(QString filename, QWidget* widget)
{
// loads style file and apply style
QFile file(":/Resources/"+filename);
file.open(QFile::ReadOnly);
QString styleSheet = QLatin1String(file.readAll());
widget->setStyleSheet(styleSheet);
} 
```

我收到错误 C2653: GuiHelper is not a class or a namspace 但我真的看不出有什么问题...

在使用 QT 插件创建项目时，我还检查了“无预编译头文件”

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T18:46:39.780

**快速修复**- 删除

```
#include "GuiHelper.cpp" 
```

从标题。

**问题的原因**：编译器编译源 - 即`.cpp`文件。它开始解析 cpp 文件并到达

```
#include "GuiHelper.h" 
```

它告诉它处理标题并粘贴其内容 - 标题的第二行

```
#define GUIHELPER_H 
```

之后，你

```
#include "GuiHelper.cpp" 
```

它反过来尝试处理和粘贴`cpp`文件，它再次尝试处理标题。因为`GUIHELPER_H`已经定义，所以不再处理标头，但请记住该类尚未定义。所以它到达了这条线

```
void GuiHelper::useStyleSheet(QString filename, QWidget* widget) 
```

但是您收到错误，因为`GuiHelper`尚未定义。

# c# - 尝试使用 PcapDotNet 拆分数据包

> ID：13612234
> 
> 赞同：2
> 
> 时间：2012-11-28T18:44:56.160
> 
> 标签：c#, pcap.net

在我的应用程序中，我想添加拆分数据包的选项，我发现了这篇文章：

[使用 pcapdotnet 将数据包分成 2 个数据包](https://stackoverflow.com/questions/13272565/split-packet-into-2-packets-with-pcapdotnet)

我将 1 个 TCP 数据包分成 2 个数据包，收到的 2 个数据包是**TCP**和**Ipv4**，这是正常的还是我应该收到 2 个**TCP**数据包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:35:14.027

请参阅[http://pcapdotnet.codeplex.com/discussions/350211中的讨论和解决方案](http://pcapdotnet.codeplex.com/discussions/350211)

# java - Google Contacts API v3 Java Client Library 全文搜索不起作用

> ID：13612237
> 
> 赞同：3
> 
> 时间：2012-11-28T18:45:03.140
> 
> 标签：java, api

Contacts API v3，群组查询参数不支持'q'参数？？？在 Google Contacts API v3 中，它明确表示支持。但是，当我使用谷歌提供的 java 客户端库，通过 setFullTextQuery 在查询中搜索合同组时，我得到 HTTP 状态 403 Forbidden。抛出“线程“主”com.google.gdata.util.ServiceForbiddenException 中的异常：禁止此服务不支持“q”参数。”

我已经下载了最新的 Java 客户端库：GData-Java/1.47.1(gzip) for GDATA。尝试使用 setFullTextQuery 方法搜索联系人组。

**哪些步骤将重现该问题？**

1.  设置 Java 示例联系人
2.  在 ContactsExample.java 中的 queryEntries 方法中，添加一个新行。myQuery.setFullTextQuery("你的搜索词在这里");
3.  并运行它

我检查了版本是否正确，它使用的是 GData-Version: 3.0 如果按照提供的方式运行示例 java，一切运行正常。但是，我需要搜索联系人。并且使用 'q' 参数应该是正确的方法。

请帮忙。是图书馆出了什么问题，还是我需要采取不同的方法来搜索联系人？

**下面的日志：**

执行动作：QUERY

2012 年 11 月 28 日下午 12:38:48 com.google.gdata.client.http.HttpGDataRequest setPrivateHeader FINER：授权：

2012 年 11 月 28 日下午 12:38:48 com.google.gdata.client.http.HttpGDataRequest setHeader FINER：用户代理：Google-contactsExampleApp-3 GContacts-Java/3.1.0 GData-Java/1.47.1(gzip)

2012 年 11 月 28 日 12:38:48 PM com.google.gdata.client.http.HttpGDataRequest setHeader FINER: Accept-Encoding: gzip

2012 年 11 月 28 日下午 12:38:48 com.google.gdata.client.http.HttpGDataRequest setHeader FINER: GData-Version: 3.0

2012 年 11 月 28 日 12:38:48 PM com.google.gdata.client.http.HttpGDataRequest 执行 FINE：403 Forbidden

2012 年 11 月 28 日 12:38:48 PM com.google.gdata.client.http.HttpGDataRequest 执行 FINER: null: HTTP/1.1 403 Forbidden

2012 年 11 月 28 日 12:38:48 PM com.google.gdata.client.http.HttpGDataRequest 执行 FINER: X-Frame-Options: SAMEORIGIN

2012 年 11 月 28 日 12:38:48 PM com.google.gdata.client.http.HttpGDataRequest 执行 FINER: Transfer-Encoding: chunked

2012 年 11 月 28 日下午 12:38:48 com.google.gdata.client.http.HttpGDataRequest 执行更精细：日期：2012 年 11 月 28 日星期三 17:38:48 GMT

2012 年 11 月 28 日下午 12:38:48 com.google.gdata.client.http.HttpGDataRequest 执行 FINER: Expires: Wed, 28 Nov 2012 17:38:48 GMT

2012 年 11 月 28 日 12:38:48 PM com.google.gdata.client.http.HttpGDataRequest 执行 FINER: X-XSS-Protection: 1; 模式=块

2012 年 11 月 28 日 12:38:48 PM com.google.gdata.client.http.HttpGDataRequest 执行 FINER: Content-Encoding: gzip

2012 年 11 月 28 日 12:38:48 PM com.google.gdata.client.http.HttpGDataRequest 执行 FINER: Content-Type: text/html; 字符集=UTF-8

2012 年 11 月 28 日下午 12:38:48 com.google.gdata.client.http.HttpGDataRequest 执行更精细：服务器：GSE

2012 年 11 月 28 日 12:38:48 PM com.google.gdata.client.http.HttpGDataRequest 执行 FINER: Cache-Control: private, max-age=0

2012 年 11 月 28 日 12:38:48 PM com.google.gdata.client.http.HttpGDataRequest 执行 FINER: X-Content-Type-Options: nosniff

线程“main”中的异常 com.google.gdata.util.ServiceForbiddenException: Forbidden 此服务不支持“q”参数。

```
at com.google.gdata.client.http.HttpGDataRequest.handleErrorResponse(HttpGDataRequest.java:605)
at com.google.gdata.client.http.GoogleGDataRequest.handleErrorResponse(GoogleGDataRequest.java:564)
at com.google.gdata.client.http.HttpGDataRequest.checkResponse(HttpGDataRequest.java:560)
at com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:538)
at com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:536)
at com.google.gdata.client.Service.getFeed(Service.java:1135)
at com.google.gdata.client.Service.getFeed(Service.java:1077)
at com.google.gdata.client.GoogleService.getFeed(GoogleService.java:676)
at com.google.gdata.client.Service.query(Service.java:1237)
at com.google.gdata.client.Service.query(Service.java:1178)
at sample.contacts.ContactsExample.queryEntries(ContactsExample.java:406)
at sample.contacts.ContactsExample.processAction(ContactsExample.java:350)
at sample.contacts.ContactsExample.main(ContactsExample.java:626) 
```

Java 结果：1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:45:25.380

这里只是一个长镜头，因为你还没有发布任何代码......

似乎您尚未进行身份验证并设置执行查询的用户。

IE 您可能需要在查询中添加以下内容：

```
myQuery.addCustomParameter(
    new Query.CustomParameter("xoauth_requestor_id"
        , username)); //where username is the authenticated (probably by OAuth) user 
```

希望我帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-03T08:09:26.797

这有效：

`https://www.google.com/m8/feeds/contacts/default/full?v=3.0&alt=json&q=john&max-results=10&orderby=lastmodified&sortorder=descending`

请注意，这`v=3.0`是全文搜索的必备条件！

# c++ - C++ 中的子类型与派生类型

> ID：13612238
> 
> 赞同：1
> 
> 时间：2012-11-28T18:45:04.710
> 
> 标签：c++, subtype, derived-types

我最近听到我的一位同事声称 C++ 中没有定义“子类型”的概念。他声称“子类型”在 C++ 术语中被正确地称为“派生类型”。这是真的？如果我有：

`class A { }; class B : public A { };`

我可以称 B 为 A 的子类型吗？还是仅在 C++ 中将 B 称为 A 的“派生类型”才有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:47:57.693

子类型不是 C++ 中常用术语的一部分。Wikipedia 中的定义（感谢 Chad）非常广泛，在 C++ 中可以表示多种不同的事物，包括但不限于继承。例如，给定类别和指针的所有迭代器类型都可以是迭代器概念的*子类型*，因为它们可以在需要该概念的模板中替换（包括标准库算法）。

我一般会使用*派生*，其他相同的替代词（在不同的语言中）可以包括*extends*（类型 A 扩展 B）或*inherits*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:49:29.673

子类型是类型的特殊版本。在 C++ 中，派生类是基类类型的子类型（子类）。派生类型的变量可以出现在请求父类型变量的任何地方。另一种类型的子类型意味着您可以在可以使用父类型的所有情况下使用子类型。

来自[MSDN](http://msdn.microsoft.com/en-us/library/70hh8yzh%28v=vs.80%29.aspx)：

> 派生类型是可以在程序中使用的新类型，可以包括直接派生类型和组合派生类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T18:51:17.007

根据[维基百科](http://en.wikipedia.org/wiki/Subtyping)：

> 如果 S 是 T 的子类型，则子类型关系通常写作 S <: T，这意味着任何类型 S 的术语都可以安全地用于预期类型 T 的术语的上下文中。

此定义意味着公共继承适用于以下类：

```
class T {};
class S : public T {}; 
```

但是，C++ 也提供`private`和`protected`继承，并且这些没有模拟继承所做的“is-a”关系，`public`因此这些继承类型不符合子类型的定义（如维基百科提供的那样）。

子类型不是 C++ 中描述这些关系的常用方式，即使在定义看起来确实适合（`public`继承）的情况下也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T18:54:45.120

Stroustrup 似乎更喜欢“派生类”，但也将其称为“子类”：请参阅[此链接](https://www.google.com/search?q=site%3Astroustrup.com+subclass)。

在[http://www.stroustrup.com/hopl2.pdf](http://www.stroustrup.com/hopl2.pdf)他写道，

> 派生类概念是 Simula 的前缀类概念的 C++ 版本，因此是 Smalltalk 的子类概念的兄弟。选择派生类和基类的名称是因为我不记得什么是 sub 什么是 super 并且观察到我不是唯一一个遇到这个特殊问题的人。

# terminal - Hyperion Retrieve for Excel - Citrix 环境配置文件损坏

> ID：13612239
> 
> 赞同：0
> 
> 时间：2012-11-28T18:45:04.480
> 
> 标签：terminal, profile, citrix, corrupt, hyperion

我们遇到一个间歇性问题，有时当用户尝试通过 Citrix 访问 Hyperion Retrieve for Excel 时，在打开应用程序时没有提示他们提供凭据。我们可以看出，由于无法查看数据，因此忽略了身份验证过程。一旦我们删除了在终端服务器上创建的用户配置文件，一旦用户通过 Citrix 再次启动应用程序，问题就解决了（在 TS 上创建了一个新的 windows 配置文件）。我无法查明这些用户配置文件“损坏”的根本原因。这里有什么建议吗？

环境：citrix Xenapp 6.5 Windows Server 2008 R2 Roaming Profiles 选项被禁用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:13:33.173

时区重定向策略已成功解决此问题。

# java - 如何结束我的递归

> ID：13612242
> 
> 赞同：-2
> 
> 时间：2012-11-28T18:45:13.027
> 
> 标签：java, algorithm, recursion, maze

我需要编写一种方法来解决迷宫（二维数组）。我需要始终保持在墙的左侧，当我到达出口点（始终在同一位置）或没有解决方案时（并且，在穿过迷宫之后）我的方法应该结束我回到入口点）。

我能够做到这一切，没有问题，我可以直观地确保它正在做我想要它做的事情（我们的讲师提供了一些其他方法来输出视觉效果）并且我的控制台调试输出也是正确的。

这是相关代码：

```
public static void main(String[] args) {
    maze = generateMaze(10,10);
    walk(1,0,0);
}

public static void walk(int x, int y, int direction) {
    System.out.println("x = " + x + " y = " + y); //debug output
    draw(x,y,maze); //draws current position
    if (x == maze.length-1 && y == maze[1].length-2) { //terminate when reached exit
        System.out.println("Geschafft!");
        return;
    }
    if (x == 1 && y == 0 && direction == 3) { //terminate when at starting point again (no solution)
        System.out.println("Keine Lösung möglich.");
        return;
    }
    if (direction == 0) { //go down
        if (maze [x][y+1]) {
            walk(x,y,1);
        }
        walk(x,y+1,2);
    }
    if (direction == 1) { //go right
        if(maze [x+1][y]) {
            walk(x,y,3);
        }
        walk(x+1,y,0);
    }
    if (direction == 2) { //go left
        if(maze [x-1][y]) {
            walk(x,y,0);
        }
        walk(x-1,y,3);
    }
    if (direction == 3) { //go up
        if(maze[x][y-1]) {
            walk(x,y,2);
        }
        walk(x,y-1,1);
    }    
} 
```

只有一个问题：如何正确结束递归？这是我从控制台得到的：

```
x = 1 y = 0
x = 1 y = 1
x = 1 y = 1
x = 1 y = 2
and so on...
x = 8 y = 8
x = 9 y = 8
Geschafft!
x = 8 y = 9
x = 8 y = 9
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 10
at maze.MazeSolution.walk(MazeSolution.java:26)
at maze.MazeSolution.walk(MazeSolution.java:39)
and some more of that 
```

我确实理解错误，递归显然不会在我想要的地方结束，并且 x 或 y 会增加并尝试使用数组中不存在的索引。

当以下任何一种情况发生时，为什么递归不以 return 语句结束：

```
if (x == maze.length-1 && y == maze[1].length-2) { //terminate when reached exit
    System.out.println("Geschafft!");
    return;
}
if (x == 1 && y == 0 && direction == 3) { //terminate when at starting point again (no solution)
    System.out.println("Keine Lösung möglich.");
    return;
} 
```

我需要做什么才能正确结束它？

我非常感谢您的帮助，对初学者表现出一些爱并告诉我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:01:45.500

添加到开头

```
public static void walk(int x, int y, int direction) {
  System.out.println("x = " + x + " y = " + y); //debug output
  if (x >= 10 ||  x < 0 || y >= 10 || y < 0) return; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:49:43.823

查看您的回报以及您可能返回的地方。您可以在包含其他调用 walk 的封闭函数中间返回，而无需使用警卫来确保它们不被调用。

我建议重新实现你的逻辑；考虑使用 if/else 对来确保互斥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T18:50:01.083

为什么不简单地返回 true 或 false 并对其做出反应？

所以基本上你添加到你`return true;`的代码结束的两个结束案例。

```
if(walk(...)) return true; 
```

# c# - 省略通过 HttpWebRequest 请求的网页中的图像

> ID：13612244
> 
> 赞同：1
> 
> 时间：2012-11-28T18:45:27.940
> 
> 标签：c#, .net, http-headers, httpwebrequest

我获取网页以便将数据提供给我的应用程序。但是，这些页面包含很多我根本不需要的图像。我只需要文本数据。我的问题是网络请求花费了不可接受的时间。我认为图像也是在网络请求期间获取的。有没有办法消除图像并只下载文本数据？

以下是我目前正在使用的代码。

```
 var httpWebRequest = HttpWebRequest.Create(url) as HttpWebRequest;
        httpWebRequest.Method = "GET";
        httpWebRequest.ProtocolVersion = HttpVersion.Version11;
        httpWebRequest.Headers.Add(HttpRequestHeader.AcceptEncoding, "gzip,deflate");
        httpWebRequest.AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate;
        httpWebRequest.Proxy = null;
        httpWebRequest.KeepAlive = true;
        httpWebRequest.Accept = "text/html";

        string responseString = null;
        var httpWebResponse = httpWebRequest.GetResponse() as HttpWebResponse;

        using (var responseStream = httpWebResponse.GetResponseStream())
        {
            using (var streamReader = new StreamReader(responseStream))
            {
                responseString = streamReader.ReadToEnd();
            }
        } 
```

此外，欢迎任何其他优化建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T18:48:04.867

这是不正确的。
`HttpWebRequest`对 HTML 或图像一无所知；它只是发送原始 HTTP 请求。

您可以使用[Fiddler](http://fiddler2.com)来查看到底发生了什么。

# iphone - UITableView headerview 不断重复

> ID：13612245
> 
> 赞同：0
> 
> 时间：2012-11-28T18:45:29.607
> 
> 标签：iphone, objective-c, ios, uitableview

我正在制作一个 iPhone 应用程序。在这个应用程序中，我有一个 UITableView，它有一个 UITableView 标题。这就是我的代码的样子。

```
UIView *view = [[UIView alloc] initWithFrame:CGRectMake(30, 0, 308, 50)];
    view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"sx_home_tablehead.png"]];
    self.tableViewAppointments.tableHeaderView = view; 
```

这就是我的 iPhone 上的样子

![在此处输入图像描述](../Images/e545ea1b7f956ac5496a260800522516.png) 这就是我想要实现的

![在此处输入图像描述](../Images/5a05cfa83dd0c2e7b6a8b39a9b44c559.png)

希望任何人都可以帮助我！

亲切的问候 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:48:47.227

如果要将其添加为表格视图节标题，则需要按如下方式添加，

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
{

    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(30, 0, 308, 50)];
    view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"sx_home_tablehead.png"]];
 //or,
    UIImageView *view = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sx_home_tablehead.png"]];
    return view;
} 
```

您可以在中定义标题的高度

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return height;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:48:49.067

因为您明确指定了视图的框架。你不应该做这样可怕的黑客攻击。请改用这段代码：

```
UIImageView *imgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"header.png"]];
self.tableView.tableHeaderView = imgView; 
```

# types - OCaml 源代码中的类型推断

> ID：13612247
> 
> 赞同：1
> 
> 时间：2012-11-28T18:45:36.053
> 
> 标签：types, ocaml, unification

我想仔细看看OCaml中类型推断的实现，我的OCaml似乎安装在`/usr/local/lib/ocaml`，但`.ml`里面似乎没有包含类型推断的代码......

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:50:11.687

我怀疑你有 OCaml 的二进制版本。你需要资源。您可以从此页面获取来源：[OCaml 4.00.1 Release](http://caml.inria.fr/ocaml/release.en.html#id239715)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T07:33:24.207

除了查看源代码之外，您可能会发现[本文](http://www.cs.cmu.edu/~rwh/courses/refinements/papers/PottierRemy04/hmx.pdf)很有用。

# jquery - Rails 3：jQuery.get 正在接收 html 响应而不是 js

> ID：13612251
> 
> 赞同：0
> 
> 时间：2012-11-28T18:45:59.530
> 
> 标签：jquery, ruby-on-rails-3

我有一个动作叫做`action_1`。当用户输入`/action_1`时，会出现一个 html 响应。但是，我也有一个`jQuery.get('/action_1')`电话，应该会收到一个 js 响应。我有一个`action_1.js.erb`文件，但不知何故，我得到的响应是 html。我的操作中有以下 respond_to 块：

```
respond_to do |format|
  format.html
  format.js { render :layout => false }
end 
```

到底是怎么回事？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:21:08.293

我会用

```
jQuery.getJSON('/action_1') 
```

所以它请求`application/json`而不是`text/html`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:34:53.813

我发现了发生了什么：`jQuery.get()`默认情况下需要一个 html 响应。当操作中没有指定任何内容时，Rails 将使用`html.erb`文件应答调用，并且在给出我发布的两个选项时（`format.html`和`format.js`）。`js.erb`如果未指定任何内容且未找到，它将以 a 响应`html.erb`，并且当指定它应以`format.js`and not响应时`format.html`。在任何情况下，`jQuery.getJSON`默认情况下都需要一个 json（并且不运行任何 javascript）并`jQuery.getScript()`执行 javascript 代码

# c++ - C++ 中大量#ifndef 语句（没有值）的令人困惑的嵌套

> ID：13612253
> 
> 赞同：1
> 
> 时间：2012-11-28T18:46:04.403
> 
> 标签：c++, arduino, c-preprocessor

也许我遗漏了一些东西，但有人可以解释一下以下代码背后的“逻辑”吗？

```
#ifndef _PTRDIFF_T
#ifndef _T_PTRDIFF_
#ifndef _T_PTRDIFF
#ifndef __PTRDIFF_T
#ifndef _PTRDIFF_T_
#ifndef _BSD_PTRDIFF_T_
#ifndef ___int_ptrdiff_t_h
#ifndef _GCC_PTRDIFF_T
#define _PTRDIFF_T
#define _T_PTRDIFF_
#define _T_PTRDIFF
#define __PTRDIFF_T
#define _PTRDIFF_T_
#define _BSD_PTRDIFF_T_
#define ___int_ptrdiff_t_h
#define _GCC_PTRDIFF_T
#ifndef __PTRDIFF_TYPE__
#define __PTRDIFF_TYPE__ long int
#endif
typedef __PTRDIFF_TYPE__ ptrdiff_t;
#endif /* _GCC_PTRDIFF_T */
#endif /* ___int_ptrdiff_t_h */
#endif /* _BSD_PTRDIFF_T_ */
#endif /* _PTRDIFF_T_ */
#endif /* __PTRDIFF_T */
#endif /* _T_PTRDIFF */
#endif /* _T_PTRDIFF_ */
#endif /* _PTRDIFF_T */ 
```

为什么这比简单的更受欢迎：

```
#ifndef xyz
#define xyz
#endif 
```

？？？

我可以看到它们是嵌套的，但这很混乱。...顺便说一句，他们在定义什么，因为标识符后面没有值？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:33:32.260

逻辑是仅在没有一个宏被拒绝时才定义宏。但是，我肯定会将其重构为：

```
#if !defined(_PTRDIFF_T) && !defined(_T_PTRDIFF_) && //... well, you get the idea
  #define _PTRDIFF_T
  #define _T_PTRDIFF_
  //...
  #ifndef __PTRDIFF_TYPE__
    #define __PTRDIFF_TYPE__ long int
  #endif
  typedef __PTRDIFF_TYPE__ ptrdiff_t;
#endif 
```

至于第二个问题：您可以定义一个没有替换文本的宏（如果使用它只会扩展为空）。此类宏通常用于有条件地包含基于`#ifdef`or的代码`#ifndef`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:54:58.843

他们正在检查所有这些标识符是否已定义，这些标识符将在其他已包含的标头中。如果它们都被定义了，那么我们定义一些新的标识符。

你不需要给标识符赋值，例如你不会给你的#include 守卫赋值。

# c# - protobuf-net List<> 继承反序列化

> ID：13612256
> 
> 赞同：4
> 
> 时间：2012-11-28T18:46:30.700
> 
> 标签：c#, list, serialization, protocol-buffers, protobuf-net

我在使用 protobuf-net 进行反序列化时遇到问题。

我有以下课程：

```
[ProtoContract]
public class CrazyList : List<string>
{
    [ProtoMember(1)]
    private readonly string _foo;

    public CrazyList(string foo)
    {
        _foo = foo;
    }

    public CrazyList(){}

    public new void Add(string item)
    {
        Console.Write(item + foo); // Problem is here!

        base.Add(item);
    }

} 
```

并像这样使用它：

```
var list = new CrazyList("world!");
list.Add("Hello ");

using (var ms = new MemoryStream())
{
    Serializer.Serialize(ms, list);

    ms.Position = 0;

    var listDS = Serializer.Deserialize<CrazyList>(ms);
    listDS.Add("Goodbye ");
} 
```

该方法在字段反序列化完成`Add`之前触发。`_foo`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:45:46.130

与 XmlSerializer 一样，某些东西要么**是**列表，要么**是**叶子。没有“两者”。目前，它将检测“列表”，并且不会寻找叶子成员。您可以将其更改为叶子（请参阅 Fredou 的回答），但它不会序列化这些项目。

由于电线规范（由谷歌，而不是我），列表本身**没有**表示：重复序列只是：“项目，项目，项目，项目”。因此，如果某物是一个列表，那么我实际上无处可以存储与列表本身相关的数据。

坦率地说，最简单的选择是重构封装，例如（为简洁起见）：

```
class SomeWrapper {
    string Foo ...
    List<string> Items ... 
} 
```

如果需要，您*也可以作弊，方法是使用 Fredou 展示的方法，并添加：*

```
[ProtoMember(2)]
private IList<string> Items { get { return this; } } 
```

这将使它*看起来*像上面的最小示例，而不会以任何重要的方式实际更改模型。

顺便说一句：`List<T>`不建议为子类提供自定义 Add ，并且您**不应该**依赖反序列化的顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:28:29.830

您需要将其用于 CrazList 属性；

```
[ProtoBuf.ProtoContract(IgnoreListHandling=true)] 
```

# algorithm - 用尽可能少的矩形覆盖形状

> ID：13612263
> 
> 赞同：3
> 
> 时间：2012-11-28T18:46:56.583
> 
> 标签：algorithm, geometry, rectangles

> **可能重复：**
> [寻找最少矩形以覆盖一组矩形的算法](https://stackoverflow.com/questions/5919298/algorithm-for-finding-the-fewest-rectangles-to-cover-a-set-of-rectangles)

我需要一些帮助来找出算法。我在网格上布置了一个形状，如下所示。

[网格上的形状 http://www.benfillmore.com/shape.png](http://www.benfillmore.com/shape.png)

目标是将正方形组合成更大的矩形，如下所示：

[更大的矩形 http://www.benfillmore.com/boxes.png](http://www.benfillmore.com/boxes.png)

我试图用尽可能少的矩形覆盖形状中的每个正方形。如果矩形相互重叠也没关系：

[重叠 http://www.benfillmore.com/overlap.png](http://www.benfillmore.com/overlap.png)

我不是在寻找完整的解决方案，只是在寻找想法，或者有人为我指明正确的方向。我已经实现了几个想法，但它们甚至都没有接近最优。我不担心处理时间，只在形状创建时完成一次。我只需要尽可能少的矩形。

太感谢了

# c - Lua C API代码不调用__newindex函数而是调用其他函数

> ID：13612268
> 
> 赞同：0
> 
> 时间：2012-11-28T18:47:18.660
> 
> 标签：c, indexing, lua, metatable

我编写了一些代码来将注册自定义函数和`__newindex`and`__index`函数分离为 2 个单独的函数。我的代码的目标是让 Lua 脚本编写者可以看到函数和变量，这些函数和变量是根据特定的子级别组织的。例如，用户可以使用以下命令：

```
orc.chief.attack();
orc.chief.flee();
orc.chief.hp = 100;
orc.pawn.attack();
elf.wood.attack();
elf.wood.hp = 200; 
```

所以基本上是一个有 2 层的系统，然后是一个函数调用或一个变量。如果我正确理解 Lua，那是表中表中的元表。当用户设置变量时，它应该触发一次`__newindex`调用（不仅要处理设置值，还要访问将通过电机进行动画处理的物理对象）。我还假设表中的主表`orc`只看到分配给它的许多功能，无论它是`attack`还是`__newindex`。为了在代码开发过程中更容易添加新变量和函数，我创建了 2 个函数：一个用于*创建*函数，一个用于*创建*变量。该函数`create`只是注册函数和变量`create`只需创建一个新的表格元素并为 和 注册`__newindex`函数`__index`。下面是代码：

```
int orcChiefhp;

luaL_Reg Orc_Module[] = {
    {"attack", OrcAttack},
    {"flee", OrcFlee},
    {NULL, NULL}};

const luaL_Reg orcChief_metareg[] = {
    {"__index", orcChief__index},
    {"__newindex", orcChief__newindex},
    {NULL, NULL}};

int OrcAttack(lua_State *L)
{
  //code to cause the motors to swing the weapon...
  return 0;//0 parameters come back as the data
}

int orcChief__newindex(lua_State *L)
{
const char *idx;
    if(lua_isstring(L,2))
    {
        idx = lua_tostring(L,2);//gets the string so we can get the variable of the struct
        if(strcmp(idx, "hp")==0)
        {
            lua_pushnumber(L, orcChiefhp);
        }
        else
            lua_pushnil(L);
    }
    return 1;
}

void registerFunctions(lua_State *L, const char *libname, const char *sublibname, const luaL_Reg *funcs)
{
int isitnil;

    lua_getglobal(L, libname);
    isitnil = lua_isnil(L, -1);
    if(isitnil)
    {
        lua_pop(L, 1);
        lua_newtable(L);    // create 'libname' table
    }
    // no sublib: just import our library functions directly into lib and we're done
    if (sublibname == NULL)
    {
         luaL_setfuncs(L, funcs, 0);
    }
    // sublib: create a table for it, import functions to it, add to parent lib
    else
    {
         lua_newtable(L);
         luaL_setfuncs(L, funcs, 0);
         lua_setfield(L, -2, sublibname);
    }
    if(isitnil)
         lua_setglobal(L, libname);//this will pop off the global table.
    else
         lua_pop(L, 1);//the global table is still on the stack, pop it off
}

void registerIntegerVariable(lua_State *L, const char *libname, const char *sublibname, const char *variableName,
    const char *metatableName, const luaL_Reg *metatableFuncs, int defaultValue)
{
int isLibnameNil;
int isSubnameNil;
    lua_getglobal(L, libname);//get the libname
    isLibnameNil = lua_isnil(L, -1);//check to see if it exists
    if(isLibnameNil)//if it doesn't exist, create a new one
    {
        lua_pop(L, 1);//pop off the nil
        lua_newtable(L);    // create 'libname' table
    }

    // no sublib: just import our library functions directly into lib and we're done
    if (sublibname == NULL)//if we want the functions at the lib level then just set the functions
    {
        lua_pushstring(L, variableName);//push the variable name
        lua_pushnumber(L, defaultValue);//push the default value on the stack
        lua_rawset(L, -3);//add the variable to the table (rawset is like settable but doesn't call __index)
        luaL_newmetatable(L, metatableName);//create the metatable
        luaL_setfuncs(L, metatableFuncs, 0);//set the metatable functions for __newindex and __index
        lua_setmetatable(L, -2);//set the metatable to the libtable
    }
    // otherwise we need to create a table for the sublibname, import functions to it, add to parent lib.
    else
    {
        lua_getfield(L, -1, sublibname);//see if the sublibname is under the global libname
        isSubnameNil = lua_isnil(L, -1);//is it a nil
        if(isSubnameNil)//if it is, then we need to create the sublibname
        {
            lua_pop(L, 1);//pop off the nil
            lua_newtable(L);//creates the new sublibname table 
        }
        lua_pushstring(L, variableName);//push the variable name
        lua_pushnumber(L, defaultValue);//push the default value on the stack
        lua_rawset(L, -3);//add the variable to the table and push it (rawset is like settable but doesn't call __index)
        luaL_newmetatable(L, metatableName);//create the metatable
        luaL_setfuncs(L, metatableFuncs, 0);//add the metamethods
        lua_setmetatable(L, -2);//set the metatable to the sublibname
        if(isSubnameNil)
          lua_setfield(L, -2, sublibname);//now we need to add the sublibname to the libname
    }

    if(isLibnameNil)
        lua_setglobal(L, libname);//set the global name if it was new
    else
        lua_pop(L, 1);
} 
```

然后，在我的`main()`我调用这样的函数：

```
execContext = luaL_newstate();
//adding lua basic library
luaL_openlibs(execContext);

//now register all the functions with Lua
registerFunctions(execContext, "orc", "chief", Orc_Module);
registerFunctions(execContext, "orc", "pawn", Orc_Module);
registerFunctions(execContext, "elf", "wood", Elf_Module);
//now register all the variables with Lua
registerIntegerVariable(execContext, "orc", "chief", "hp", "chief_meta", orcChief_metareg, 0); 
```

当我在 Lua 脚本中运行代码和泵时，`orc.chief.attack()`调用我的`OrcAttack()`函数但从`orc.chief.hp = 100`不调用我的`orcChief__newindex()`函数。我什至已经注释掉了这些`registerFunctions`电话，以防它们以某种方式干扰，而仅仅是`registerIntegerVariable`它本身仍然不会触发`orcChief__newindex().` 任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:12:38.863

`__newindex`在表中设置字段时不会调用。当您在表中设置*新*字段时调用它。如果该字段已经存在，`__newindex`则不会被调用。

如果您想`__newindex`为表上的每个集合操作调用，则不能允许集合操作实际修改该表。这通常是通过创建一个用户使用的空表（称为代理表）来完成的。代理表实际上是空的，并且必须*始终*保持这样；您拦截所有的 get 和 set 调用，将它们传送到用户从未看到无权访问的内部表。

或者您使用一些用户数据而不是表。`__newindex`总是需要他们。

# uitableview - 将 UITable 单元连接到不同的故事板？

> ID：13612269
> 
> 赞同：0
> 
> 时间：2012-11-28T18:47:34.803
> 
> 标签：uitableview, uistoryboard, uistoryboardsegue

是否可以将 UITable 中的静态单元格链接到不同的故事板？

如果是这样..如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:31:07.227

我想到了。万一其他人遇到这个问题，这里的解决方案..

确保在您的主控制器上添加所有 .h 文件对我来说，它们将是

```
#import "tabbar26.h" 
```

现在这是我添加的使它工作的代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView
     cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell *cell = [super tableView:tableView
                   cellForRowAtIndexPath:indexPath];
cell.accessoryType = UITableViewCellAccessoryNone;

NSUInteger row = [indexPath row];

            if (row == 1)
        {
            NSLog(@"hi");

        }

        if (row == 27)
        {
        }
 }

return cell;
} 
```

上面这部分，真的不需要。我只是用它来记录。

下面是你真正需要的:)

```
 -(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath      {

NSUInteger row = [indexPath row];

if (row == 0)
{
    NSLog(@"hi2");
    }

if (row == 25)
{
    NSLog(@"bye2");
    UIStoryboard *tabbar26 = [UIStoryboard storyboardWithName:@"tabbar26" bundle:nil];
       UIViewController *Tab1_ViewController = [tabbar26 instantiateInitialViewController];
     [self.navigationController pushViewController:Tab1_ViewController animated:(YES)];
}

[self.tableView reloadData];
} 
```

# asp.net - 将回车和换行添加到 TableAdapter 的 CommandText 以在 ASP.Net GridView 中使用

> ID：13612270
> 
> 赞同：0
> 
> 时间：2012-11-28T18:47:43.840
> 
> 标签：asp.net, gridview, embed, carriage-return, linefeed

是否可以在 TableAdapter 的 CommandText 中添加回车和换行，以便查询结果在 ASP.Net GridView 中显示它们？

这是我使用 DataSet 设计器在 TableAdapter 中进行的查询的一部分：

```
SELECT AsthmaTreatment, 
       BookFee, ClinicWhenIll, DateOfBirth, Forename, GPA, Grade, HealthProblems, ID, 
       IllnessDetails, InjuryDetails, InsuranceCompany, InsurancePolicyNumber, 
       LanguagesSpoken, MedicinesTaken, ParentID, 

       (SELECT MotherName + ' *** ' + FatherName + '***' + CHAR(13) + CHAR(10) +
                AddressLine1 + CHAR(13) + CHAR(10) + 
                AddressLine2 + CHAR(13) + CHAR(10) +
                City + ', ' + State + ' ' + Zip AS Expr1 
           FROM Parents WHERE (ID = Students.ParentID)) AS ParentName, 

        PrimaryDoctor, PrimaryDoctorPhone, PrimaryPhone, SecondaryPhone,
        SurgeryDetails, Surname, TuitionFee, email 

   FROM Students 
   WHERE (Forename LIKE '%' + @SearchValue + '%') OR 
         (Surname LIKE '%' + @SearchValue + '%') OR 
         (@SearchValue = 'ALL') 
```

使用上述查询，显示 GridView 数据时没有回车符和换行符分隔数据行。

我们希望在 GridView 中显示这样的数据：

```
Ismail           Eva *** Emad-ud-deen *** 
                 123 Test St
                 Apt. 100
                 New York, NY 10021
Mustafa          Eva *** Emad-ud-deen ***
                 333 First Ave.
                 Unit 3-B
                 Lowell, MA 01852 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:09:31.523

问题是角色本身。(browsers, html) 不翻译 char 10 和 13。浏览器会理解 HTML 标记，因此您可以使用`<p>`、`<div>`或`<br>`标签来格式化文本。

我会在 HTML 标记中执行此操作，而不是在 sql 语句中执行此操作。

# javascript - iPad touchstart 事件

> ID：13612275
> 
> 赞同：0
> 
> 时间：2012-11-28T18:47:58.707
> 
> 标签：javascript, jquery, javascript-events

我正在使用 JS+jQuery 创建一个交互式菜单，该菜单应该适用于 pc 和移动设备。菜单是即时创建的，所以我需要使用`.on()`.

我正在用我的 iPad 测试移动端，我的代码是这样的：

```
jQuery(document).on('click touchstart','.button', function(){ /* Do... */ }); 
```

该`click`事件在我的 PC 上运行良好，但`touchstart`没有做任何事情。即使离开`click`或`touchstart`只有它在我的 iPad 上也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:53:01.837

我已经通过在方法中加入`touchstart`之前肯定解决了。`click``.on()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:52:08.240

如果这不起作用..尝试`event`将元素添加到`DOM`. 检查是否有帮助..

```
// Button appended to your DOM on the fly

$('.button').on('touchstart', function(){

}); 
```

# javascript - javascript 下拉菜单 - 在选择时转到 url

> ID：13612277
> 
> 赞同：2
> 
> 时间：2012-11-28T18:48:04.550
> 
> 标签：javascript, drop-down-menu

我正在使用[ddSlick](http://designwithpc.com/Plugins/ddSlick "ddSlick")下拉菜单，因为它也有图像。当您选择一个值时，没有任何反应。如果被选中，我如何将其转到 facebook.com 或 twitter.com？这是代码：

```
var ddData = [
 {
 text: "Facebook",
 value: "FB",
 description: "Description with Facebook",
 imageSrc: "http://dl.dropbox.com/u/40036711/Images/facebook-icon-32.png"
 },
 {
 text: "Twitter",
 value: "TWT",
 description: "Description with Twitter",
 imageSrc: "http://dl.dropbox.com/u/40036711/Images/twitter-icon-32.png"
 }
 ];

$('#demoBasic').ddslick({
data: ddData,
width: 300,
imagePosition: "left",
selectText: "Select your favorite social network",
onSelected: function (data) {
console.log(data);
}
}); 
```

它使用这些文件：[jquery 1.7.2。](https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js "jQuery 1.7.2")和 ddslick.js

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T09:07:06.613

有点快速和肮脏，但您可以向传递的对象添加其他属性：

```
var ddData = [
 {
     text: "Facebook",
     value: "FB",
     description: "Description with Facebook",
     imageSrc: "http://dl.dropbox.com/u/40036711/Images/facebook-icon-32.png",
     url:"http://www.facebook.com"
 },
 {
     text: "Twitter",
     value: "TWT",
     description: "Description with Twitter",
     imageSrc: "http://dl.dropbox.com/u/40036711/Images/twitter-icon-32.png",
     url:"http://www.twitter.com"
 }
 ];

$('#demoBasic').ddslick({
     data: ddData,
     width: 300,
     imagePosition: "left",
     selectText: "Select your favorite social network",
     onSelected: function (data) {
         window.location = data.selectedData.url;
}
});​ 
```

# javascript - 从 ASP.NET 中的更新面板引用内联脚本

> ID：13612281
> 
> 赞同：2
> 
> 时间：2012-11-28T18:48:25.427
> 
> 标签：javascript, asp.net, sharepoint, asp.net-ajax

我正在尝试解决在更新面板中使用内联脚本的问题。这个问题通常可以通过使用 Sys.Application.add_load() 或使用 ScriptManager 创建 RegisterStatupScript() 脚本来解决。但是，在这种情况下，这两种解决方案都不起作用。

这是问题所在。

asp.net（在本例中为 SharePoint）页面上的更新面板：

```
<asp:UpdatePanel ID="UpdatePanel1" UpdateMode="Conditional" runat="server">
    <ContentTemplate>
        <asp:Button ID="Button1" runat="server" Text="Load" />
        <asp:PlaceHolder ID="PlaceHolder1" runat="server"></asp:PlaceHolder>
    </ContentTemplate>
</asp:UpdatePanel> 
```

假设在后面的代码中，我们在单击按钮时将用户控件添加到占位符。

```
protected void Button1_Click(object sender, EventArgs e)
{
    MyControl ctrl = new MyControl();
    PlaceHolder1.Controls.Clear();
    PlaceHolder1.Controls.Add(ctrl);

    UpdatePanel1.Update();
} 
```

最后，假设我们的用户控件有一些内联脚本。

```
<script type="text/javascript">
    var myInt = 1;
    alert(typeof myInt);
</script> 
```

将上述内容放在一起并运行它会导致默认情况下为空的更新面板（按钮除外） - 获取单击按钮时添加的一些数据，类似于上面的 javascript。**问题是上面的 javascript 代码永远不会触发**。

在我的现实生活中，用户控件并不是非常复杂——它有一个转发器，在加载控件时填充，然后是一些内联 javascript，它会稍微转换转发器数据。数据通过，但 javascript 永远不会执行并且不会引发错误。

尝试的解决方案：将内联 javascript 包装在一个名为 initMyCode() 的函数中，然后使用：

```
ScriptManager.RegisterStartupScript(this, this.getType(), UniqueID, "initMyCode()", true); 
```

...在用户控制页面加载事件上。这会失败，因为在页面中找不到 initMyCode()。

有人对此问题有可行的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T07:20:41.493

```
if(!Page.ClientScript.IsStartupScriptRegistered("initMyCode")){ 
 string script =@"function initMyCode(){var myInt = 1;
   alert(typeof myInt);}
 Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(initMyCode);"
 ScriptManager.RegisterStartupScript(this, this.getType(), initMyCode, script, true);

} 
```

或者

```
<script type="text/javascript">
 function initMyCode(){
 var myInt = 1;
 alert(typeof myInt);}
 Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(initMyCode);
</script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-01T00:07:01.067

您是否已经尝试在jQuery的[“准备就绪”中添加您的代码？](http://api.jquery.com/ready/)

# arrays - 引用二维数组 - 行和列

> ID：13612282
> 
> 赞同：1
> 
> 时间：2012-11-28T18:48:30.080
> 
> 标签：arrays, actionscript-3, loops, multidimensional-array, matrix

*我有一个二维数组，我想知道如何引用其中的行和列。我使用 [row,column] 还是 [column,row]？我也有一些图形。我是用 (row*size,col*size) 还是 (col*size,row*size) 计算每个图形的 (x,y) 坐标集？*

整个二维数组是网格的构建指令。数组中的每个元素都指向网格的一部分。我知道如何构建这个网格及其片段，并且我知道如何访问和操作数组的元素。

问题是，当我构建网格时，我必须计算每个部分的 x 和 y 坐标，但我只是不知道我的变量 curRow 是否应该用于 x 或 y 坐标。与变量 curCol 类似。

我的代码正在运行，但它让我感到困惑。我认为它就像行控制 y 坐标和列控制 x 坐标，因为我刚刚了解了矩阵的引用方式。我问，因为我想到我不确定如何做到这一点。过去我使用 [row,column] 循环和 (row*size,col*size) 定位。

到目前为止的代码是：

```
function buildGrid(gridInfo:Array):Sprite {
    var displaySprite:Sprite = new Sprite();

    for(var curRow:uint=0;curRow<gridInfo.length;curRow++) {
        for(var curCol:uint=0;curCol<gridInfo[curRow].length;curCol++) {
            var infoRef:Object = gridInfo[curRow][curCol];//create reference for fast access

            var pieceGraphic:Shape = new Shape();
            pieceGraphic.graphics.beginFill(infoRef.fillColor);
            pieceGraphic.graphics.lineStyle(infoRef.borderThickness,infoRef.theBorderColor);
            pieceGraphic.graphics.drawRect(0,0,infoRef.sideLength,infoRef.sideLength);
            pieceGraphic.graphics.endFill();

            pieceGraphic.x = curRow*(infoRef.sideLength+infoRef.spaceX);//later use of graphic requires known x
            pieceGraphic.y = curCol*(infoRef.sideLength+infoRef.spaceY);//later use of graphic requires known y

            displaySprite.addChild(pieceGraphic);
        }
    }

    return displaySprite;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T10:17:43.053

使用 [row,column] 引用二维数组是正确的，但使用 curX 和 curY 等其他变量名称更容易。重要的是要在整个项目中保持一致的索引含义以及使用的索引。要访问数组中的第一个元素，请为行或 curX 创建一个循环，并为第二维中的元素为列或 curY 创建一个循环。

您可以使用 (row*size,col*size) 或 (curX*size,curY*size) 计算网格中图形的坐标集 (x,y)，因此您的代码是正确的并且不需要更改。

请记住，行是水平的，列是垂直的。

# php - 如何确保包含引号的属性值不会破坏格式？

> ID：13612284
> 
> 赞同：0
> 
> 时间：2012-11-28T18:48:42.107
> 
> 标签：php, html, encoding

在我的数据库中，我存储帖子的标题，当我在页面上创建链接时，我将帖子的标题作为标题属性。

```
<a title='here is the description'>bluah</a> 
```

但是页面上发生的事情是，在我的描述中，有一些字符正在破坏它。帖子标题中断的示例

```
<a title='I don't hanging out with friends, had a great time seeing Sarah again ;p '>bluah</a> 
```

我想我需要做一些 HTML 编码，但我不确定我应该在何时/何地这样做。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:55:32.080

用于`htmlspecialchars`输出您的字符串

```
htmlspecialchars("I don't",ENT_QUOTES); // returns I don&#039;t 
```

如手册中所述，这还将处理其他 HTML 字符，例如 < & >，

[http://php.net/manual/en/function.htmlentities.php](http://php.net/manual/en/function.htmlentities.php)

# matlab - 在matlab中扩展矩阵的智能方法

> ID：13612291
> 
> 赞同：0
> 
> 时间：2012-11-28T18:49:11.693
> 
> 标签：matlab, octave

例如我有 2x2 矩阵，现在我必须将其左侧和右侧各增加到 1 列，然后将顶部和底部各增加到 1 行，现在我将有一个 4x4 矩阵，旧矩阵位于中心新的一个。有什么方法可以快速完成，而不是创建新的并将价值从旧的转移到新的？
非常感谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T18:59:59.090

无论您做什么，都必须为新数组分配新内存。

此外，如果您的矩阵只有 2x2，那么任何方法的速度都足够好。还是您也想处理更大的矩阵？然后，考虑您可以使用的两种方法的以下测试：

```
A = rand(5000);

% explicitly add zero vectors on all sides of A
tic;
B = [zeros(1, size(A,1)+2);
    zeros(size(A, 2),1) A zeros(size(A, 2),1);
    zeros(1, size(A,1)+2)];
toc

Elapsed time is 0.204940 seconds.

% create the output array and assign the A array to correct sub-matrix
tic
B = zeros(size(A)+2);
B(2:end-1,2:end-1) = A;
toc

Elapsed time is 0.102501 seconds. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T21:19:20.190

另一种选择是

```
B = padarray(A,[1,1],'both'); 
```

对于速度（至少对于我的计算机而言），这是在 angainor 建议的两种方法之间，它的优点是如果您不想创建新变量，则不必创建新变量。

# wordpress - wordpress - 自定义帖子类型和永久链接的问题

> ID：13612295
> 
> 赞同：0
> 
> 时间：2012-11-28T18:49:25.657
> 
> 标签：wordpress

我第一次使用自定义帖子类型并遇到了一个棘手的问题：

我可以添加和查询帖子类型，但它们总是显示为：

domain.com/post-type-name/post-title

我没有重写，我的永久链接结构仅设置为 %postname%，我在添加帖子类型后立即刷新规则。

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:24:57.173

这可能有助于解决问题： [http ://www.ultimatewebtips.com/remove-slug-from-custom-post-type/](http://www.ultimatewebtips.com/remove-slug-from-custom-post-type/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:25:39.523

你可以尝试两件事

1.  只需`Permalink Settings`从`settings`菜单访问您的并再次保存页面。

或者你可以试试

```
register_post_type('post-type-name', array(
    //...
    'rewrite' => array('slug'=>'','with_front'=>false),
    //...
)); 
```

# ios - 继续更改destinationViewController

> ID：13612299
> 
> 赞同：4
> 
> 时间：2012-11-28T18:49:40.903
> 
> 标签：ios, uisegmentedcontrol, uistoryboard

有没有办法改变 segue 在准备 segue 时要调用的控制器？当使用嵌入式 segue 更改分段控件时，我正在尝试这样做。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T19:07:45.433

您可能已经注意到 segue 的`destinationViewController`is `readonly`。您更好的策略是在包含分段控件（不是视图或控件）的视图控制器和您想要选择的其他视图控制器之间定义 segues。根据所选段做出决定，并`performSegueWithIdentifier:sender:`使用与段匹配的标识符从控制器代码中调用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-29T17:13:47.310

如果你想切换哪个控制器是嵌入式控制器，那么我认为你需要使用 Apple 使用的自定义容器视图控制器范例。我下面的代码来自一个小型测试应用程序。这是使用单个控制器模板设置的，然后将容器视图添加到该控制器（称为 ViewController），并将分段控件添加到主视图。然后我添加了一个断开连接的视图控制器，将其大小更改为自由形式，然后将其视图大小调整为与嵌入式控制器的视图大小相同。这是 ViewController.h 中的代码：

```
@interface ViewController : UIViewController

@property (weak,nonatomic) IBOutlet UIView *container;
@property (strong,nonatomic) UIViewController *initialVC;
@property (strong,nonatomic) UIViewController *substituteVC;
@property (strong,nonatomic) UIViewController *currentVC;

@end 
```

这就是我在 ViewController.m 中的内容：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    self.initialVC = self.childViewControllers.lastObject;
    self.substituteVC = [self.storyboard instantiateViewControllerWithIdentifier:@"Substitute"];
    self.currentVC = self.initialVC;
}

-(IBAction)SwitchControllers:(UISegmentedControl *)sender {
    switch (sender.selectedSegmentIndex) {
        case 0:
            if (self.currentVC == self.substituteVC) {
                [self addChildViewController:self.initialVC];
                self.initialVC.view.frame = self.container.bounds;
                [self moveToNewController:self.initialVC];
            }
            break;
        case 1:
            if (self.currentVC == self.initialVC) {
                [self addChildViewController:self.substituteVC];
                self.substituteVC.view.frame = self.container.bounds;
                [self moveToNewController:self.substituteVC];
            }
            break;
        default:
            break;
    }
}

-(void)moveToNewController:(UIViewController *) newController {
    [self.currentVC willMoveToParentViewController:nil];
    [self transitionFromViewController:self.currentVC toViewController:newController duration:.6 options:UIViewAnimationOptionTransitionFlipFromLeft animations:^{}
                            completion:^(BOOL finished) {
                                [self.currentVC removeFromParentViewController];
                                [newController didMoveToParentViewController:self];
                                self.currentVC = newController;
                            }];
} 
```

# php - 需要帮助解决 mysql 和 odbc 查询问题

> ID：13612300
> 
> 赞同：0
> 
> 时间：2012-11-28T18:49:41.957
> 
> 标签：php, mysql, sql-server, odbc

您好，我正在开发一个数据来自 MSSQL 数据库的应用程序。在这里使用 php odbc 连接，我获得了使用应用程序所需的所有数据。但现在我有一个问题：

**我在找：**

来自 mssql（假设）mssql_Table_A 的所有数据将在此应用程序中列出，每一行都将带有复选框，因此用户可以检查所需的数据，在检查后当他点击保存检查数据将存储在本地 MySQL 数据库中（假设）mysql_table_A。

所以下次当他再次想要更多的数据时，这个应用程序将列出 mssql_table_A 中不存在于 mysql_table_A 中的所有数据。

**问题是：**

如果两个 dataflwo 都来自 MYSQL，我会通过使用 mysql 选择查询轻松地做到这一点

```
mysql_query("SELECT * FROM mysql_table_a WHERE NOT EXISTS (SELECT * FROM mysql_table_B WHERE thisID != thatID)") 
```

但是在这里我如何检查mysql表中是否存在数据并列出odbc mssql数据库中的数据。

请帮我解决这个问题。

谢谢你..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:53:05.680

您需要使用`mssql_`、`sqlsrv_`或`PDO`函数连接到 MSSQL。`mysql_`函数严格用于 MySQL。

*   [适用于 PHP 的 Microsoft SQL Server 驱动程序](http://php.net/manual/en/book.sqlsrv.php)
*   [微软 SQL 服务器](http://php.net/manual/en/book.mssql.php)
*   [Microsoft SQL Server 函数 (PDO_SQLSRV)](http://php.net/manual/en/ref.pdo-dblib.php)

如果要从两者中获取数据，则需要两个单独的连接。

或者，您可以使用 ODBC 连接从 MSSQL 连接到 MySQL，并在 MSSQL 端执行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T09:18:54.030

其他答案已经告诉您如何连接两个数据库，但根据您的评论，您仍然想知道如何进行比较。

我必须假设您至少有一列可以唯一标识 table_a 中不在 table_b 中的行。如果您像一个答案所说的那样在 MS SQL Server 中链接 mysql，您可以

```
select * from mssql.table_a where unique_column not in (select unique_column from mysql.table_b) 
```

但这很有效，因为 mssql 链接到 mssql 中的 mysql 即，您可以执行一个查询，mssql 将为您执行连接。

如果由于某种原因您不能或不想通过链接表将 mysql 链接到 ms sql，最简单的方法是在 table_a 中有某种时间戳。假设写入 table_a 的每条记录都有插入时间的时间戳：

```
mysql connection does select max(timestamp) into X from mysql.table_b
mssql connection does select * from mssql.table_a where timestamp > X 
```

如果我们对您的数据有更多了解，可能还有其他方法。

# android - 如何使用 DS5 以图形方式预览由不同工具捕获的数据？

> ID：13612310
> 
> 赞同：1
> 
> 时间：2012-11-28T18:50:07.893
> 
> 标签：android, eclipse, arm, ds-5, streamline

[DS-5 是 ARM 提供的一个工具，它提供了一个 Eclipse 用户界面，用于调试和执行分析分析。](http://www.omappedia.org/wiki/ARM_DS-5_Streamline)

我想在其流线的 Eclipse 中使用社区版本来执行我自己的开放社区视觉离线分析器。我要么为`rebase`源代码生成一个输入文件，要么为它生成一个输入文件。基本上想法是使用 DS-5 开放社区源代码或在 eclipse 中配置现有版本，因此以下内容将成立：

*   我可以生成一个离线日志`(tid, timestamp)`，其中包含系统何时处于空闲状态。所有这些都写在一个`.xml`或`.txt`文件中。
*   我将能够以图形方式查看带有流线的生成日志，如下所示：

[![替代文字](../Images/1d8301a207b113af8884d4d6616769e8.png)](https://i.stack.imgur.com/29dK8.png)
[（来源：[arm.com](http://www.arm.com/assets/images/Streamline_Annotations_large.png)）]

[![精简](../Images/1bb88f7e2d0f01c70746acf82b1cabde.png)](https://i.stack.imgur.com/jbsAr.jpg)
[（来源：[arm.com](http://www.arm.com/assets/images/streamline_2.jpg)）]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T09:05:23.627

DS-5 是 ARM 的“开发工作室”，它是 ARM 针对高端 Cortex-A 处理器的扩展工具链。根据您的需要，它有各种类型的包装，其中一种被推广为免费的社区。

DS-5 是一个混合软件包。虽然有些部件有*开放许可证*，但不幸的是，我坚信[Streamline](http://ds.arm.com/ds-5/optimize/)不属于这一类。它的源代码也不可用。

然而，在目标上运行的 Streamline 包的一部分是名为*gator的内核模块和名为**gatord*的用户级守护进程是 GPLv2。

现在回答你的问题；

ARM DS-5 Streamline 已经允许您以[离线方式](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0482j/CIHDJFDA.html)捕获计数器值，这意味着您可以从命令行开始捕获。

ARM DS-5 Streamline 已经提供了允许您[创建自定义性能计数器](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.subset.swdev.ds5/index.html)的机制，这是很有可能的，因为您必须做的所有更改都在于您的目标上运行的软件，该软件在 GPLv2 下获得许可，因此您应该能够重新分发那些. Streamline UI 将足够智能，以便稍后在您使用它打开捕获的文件时为您提供这些值的图表。

我应该承认我不知道社区许可的 Streamline 是否可以[显示自定义性能计数器](http://ds.arm.com/ds-5/compare-ds-5-editions/)，这是您应该尝试自己的东西。

# python - 如何创建一个网格来将精灵粘贴到上面？

> ID：13612313
> 
> 赞同：1
> 
> 时间：2012-11-28T18:50:18.680
> 
> 标签：python, grid, sprite, pygame, blit

这就是我现在正在做的事情，我知道必须有更好的方法，一直在寻找几天。我所做的基本上是通过 if/elif 强制检查新行的开始位置。“imgblock”是一个 16x16 像素的精灵，屏幕上有一个 16x10 的网格。在lolgrid() 部分的下面，我有图像名称的def，并且我希望它显示网格中的每个块。谁能给我一些关于如何使它更优雅的信息？我只在这里待了一个星期，我真的很感激它对我在这里的糟糕尝试的洞察力。

万分感谢

```
import pygame, sys, os, random
from pygame.locals import *

pygame.init()

#print help(pygame.transform)

resmulti=3
spritesize=16*resmulti
resolution=(256*resmulti,224*resmulti)
framerate=60

## OBJECTS ##
clock=pygame.time.Clock()
screen=pygame.display.set_mode(resolution)

## TEST STUFF ##  
test = [random.randint(1,10) for i in range(20)]
print test

## MAIN ##      
def pngLoad(imgloc, size, flipx, flipy):
    img = pygame.image.load(imgloc).convert_alpha()
    if size > 1:
        #pygame.transform.scale(Surface, (width, height), DestSurface = None): return Surface
        img = pygame.transform.scale(img, (img.get_width()*size, img.get_height()*size))
    if flipx == 1:
        #pygame.transform.flip(Surface, xbool, ybool)
        img = pygame.transform.flip(img, True, False)
    if flipy == 1:
        img = pygame.transform.flip(img, False, True)

    return img

################################################
# GRID = 16x16 pixel blocks. 16x10.5 block grid
################################################

def lolGrid(imgBlock,*gridz):
    #print list(gridz)
    Grid = range(177)

    for i in gridz:
        if i < 16:
            Grid[i] = screen.blit(imgBlock, (i*spritesize,resmulti*56))
        elif i > 15 and i < 32:
            Grid[i] = screen.blit(imgBlock, ((i-16)*spritesize,spritesize+resmulti*56))
        elif i > 31 and i < 48:
            Grid[i] = screen.blit(imgBlock, ((i-32)*spritesize,spritesize*2+resmulti*56))
        elif i > 47 and i < 64:
            Grid[i] = screen.blit(imgBlock, ((i-48)*spritesize,spritesize*3+resmulti*56))
        elif i > 63 and i < 80:
            Grid[i] = screen.blit(imgBlock, ((i-64)*spritesize,spritesize*4+resmulti*56))  
        elif i > 79 and i < 96:
            Grid[i] = screen.blit(imgBlock, ((i-80)*spritesize,spritesize*5+resmulti*56))
        elif i > 95 and i < 112:
            Grid[i] = screen.blit(imgBlock, ((i-96)*spritesize,spritesize*6+resmulti*56))            
        elif i > 111 and i < 128:
            Grid[i] = screen.blit(imgBlock, ((i-112)*spritesize,spritesize*7+resmulti*56))            
        elif i > 127 and i < 144:
            Grid[i] = screen.blit(imgBlock, ((i-128)*spritesize,spritesize*8+resmulti*56))            
        elif i > 143 and i < 160:
            Grid[i] = screen.blit(imgBlock, ((i-144)*spritesize,spritesize*9+resmulti*56))
        elif i > 159 and i < 176:
            Grid[i] = screen.blit(imgBlock, ((i-160)*spritesize,spritesize*10+resmulti*56))

############  
#LOL IMAGES
############        
tanback = pngLoad("tanback.png", resmulti,0,0)
longblackback = pngLoad("blackbacklong.png", resmulti,0,0)
link1 = pngLoad("link1.png", resmulti,1,0)
shrub1 = pngLoad("shrub_01.png", resmulti,0,0)
grnwall1 = pngLoad("greenwall_01.png", resmulti,0,0)
grnwall2 = pngLoad("greenwall_02.png", resmulti,0,0)
grnwall3 = pngLoad("greenwall_03.png", resmulti,0,0)

#background = pngLoad("back.png")
#mous = pngLoad("link001.png")

#bif="back.png"
#mif="link001.png"
#background=pygame.image.load(bif).convert_alpha()
#mous=pygame.image.load(mif).convert_alpha()

while True:
    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()

    screen.blit(tanback,(0,0))
    screen.blit(longblackback,(0,resmulti*3*-56))
    #screen.fill((255,218,144), rect=None, special_flags=0)

    lolGrid(grnwall1,0,1,16,17,32,33,48,112,128,129,144,145,160,161)
    lolGrid(grnwall2,49,64)
    lolGrid(grnwall3,96,113)
    lolGrid(shrub1,2, 4, 6, 9, 11, 13, 15,18,20,22,25,27,29,31,54,57,59,61, 66, 68,86,89,91,98,100,118,121,123,125,146,147,148,149,150,151,152,153,154,155,156,157,158,159,162,163,164,165,166,167,168,169,170,171,172,173,174,175)

    print clock.get_fps()
    clock.tick(framerate)

    pygame.display.update() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:17:44.153

啊？如何使用除法，乘法和模块？

代替：

```
for i in gridz:
    if i < 16:
        Grid[i] = screen.blit(imgBlock, (i*spritesize,resmulti*56))
    elif i > 15 and i < 32:
        Grid[i] = screen.blit(imgBlock, ((i-16)*spritesize,spritesize+resmulti*56))
    ... 
```

做就是了：

```
for i in gridz:
     Grid[1] = screen.blitimgBlock(imgBlock, (i % 16) * spritesize, spritesize+resmulti*56)) 
```

# save - 尝试将文档直接保存到服务器

> ID：13612314
> 
> 赞同：0
> 
> 时间：2012-11-28T18:50:19.657
> 
> 标签：save

您将如何将使用不在服务器上的程序（例如 Word）的文档保存到服务器上？使用不在服务器上的程序进行保存时，有没有办法授予对服务器上文件夹的访问权限。这一切都由同一家公司完成，因此我们将拥有访问服务器的所有权利。有没有一种方法可以授予对服务器上文件夹的读/写访问权限，而无需每次都登录？（很抱歉问了 3 次这个问题......只是想清楚）。

谢谢，

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-11-28T18:56:29.417

您可以尝试使用 Dropbox 或类似 Dropbox 的应用程序，然后使用它的 API 来编写您需要的一切。

# android - 如何使用动态数据库android？

> ID：13612321
> 
> 赞同：0
> 
> 时间：2012-11-28T18:51:04.277
> 
> 标签：android, database, sqlite

我想创建一个 android 应用程序，但我不知道如何使用我已经拥有的 sqlite 数据库。事实上，我有一个现有的 sqlite 数据库，由现有的计算机软件应用程序使用。数据库存储在服务器上。

我想知道如何在使用 android 应用程序时读取存储在服务器上的数据库以始终保持最新状态？

我不知道我是否清楚，我的英语不是很好，我尽力解释。

你可以把它想象成一家餐馆。主应用程序已经创建，但我想开发一个 android 应用程序，每个服务器都有一个带有该应用程序的 android 平板电脑，因此他们可以在需要时访问数据库。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:44:36.537

您必须具备以下条件：

*   从您的 android 应用程序调用 Webservice。
*   Webservice 具有与数据库服务器上的数据库交互所需的所有方法和功能。
*   Webservice 必须将您需要的数据从数据库服务器返回到您的 android 应用程序。

[这是](http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap/)一个很好的教程，您可以从它开始清楚地了解如何将 Webservice 与 android 应用程序一起使用。

# java - 过滤器无法正常工作 JSF

> ID：13612322
> 
> 赞同：1
> 
> 时间：2012-11-28T18:51:13.120
> 
> 标签：java, jsf, authentication, servlet-filters

当登录失败时，过滤器会将我重定向到`/users/indexLogueados.xhtml`. 这是不正确的。过滤器应该将我重定向到`/faces/index.xhtml`.

为什么会这样？

这是过滤器：

```
@WebFilter("/faces/usuarios/*")
public class FiltroUsuarios implements Filter {

    @Override
    public void init(FilterConfig filterConfig) {        
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws ServletException, IOException {    
        HttpServletRequest req = (HttpServletRequest) request;
        Autenticar auten = (Autenticar) req.getSession().getAttribute("aut");

        if (auten != null && auten.isLogueado()) {
            // User is logged in, so just continue request.
            chain.doFilter(request, response);
        } else {
            // User is not logged in, so redirect to index.
            HttpServletResponse res = (HttpServletResponse) response;
            res.sendRedirect(req.getContextPath() + "/faces/index.xhtml");
        }
    }

    @Override
    public void destroy() {        
    }

} 
```

这是具有托管 bean 名称的托管 bean的`login()`方法：`Autenticar``aut`

```
public String login() {
    RequestContext context = RequestContext.getCurrentInstance();
    FacesMessage msg;

    try {
        cl = ClienteService.getInstance().getClienteLogin(nombre);

        if (contrasenia.equals(cl.getClave())) {
            logueado = true;
            ruta = "usuarios/indexLogueados.xhtml";
            msg = new FacesMessage(FacesMessage.SEVERITY_INFO, "Bienvenido ", nombre);
            FacesContext.getCurrentInstance().addMessage(null, msg);
        } else {
            logueado = false;
            ruta = "index.xhtml";
            msg = new FacesMessage(FacesMessage.SEVERITY_WARN, "Error de usuario", "Credenciales erroneas");
            FacesContext.getCurrentInstance().addMessage(null, msg);
        }
    } catch (Exception ex) {
        msg = new FacesMessage(FacesMessage.SEVERITY_WARN, "Error de usuario", "Credenciales erroneas");
        ruta = "index.xhtml";
        logueado = false;
        FacesContext.getCurrentInstance().addMessage(null, msg);
    }

    FacesContext.getCurrentInstance().addMessage(null, msg);
    context.addCallbackParam("logueado", logueado);
    logueado = false;
    return ruta;
} 
```

这是登录表单：

```
<h:form id="formularioAltas">
    <div class="buttonBarItem">
        <p:commandButton id="basic" value="" style="background:url(css/images/backgroundL1.png) no-repeat; border: none" styleClass="clientes" onclick="dlg2.show();" type="button" />

        <h:panelGrid columns="2" cellpadding="5">  
            <h:outputLabel for="nombre" value="Usuario: " />  
            <p:inputText value="#{aut.nombre}"   
                         id="nombre" required="true" label="Usuario" />  

            <h:outputLabel for="contrasenia" value="Contraseña:" />  
            <h:inputSecret value="#{aut.contrasenia}"   
                           id="contrasenia" required="true" label="Contraseña" />  

            <f:facet name="footer">  
                <p:commandButton id="loginButton" value="Entrar" action="#{aut.login}" type="submit" styleClass="ui-state-default-formu" />
            </f:facet>   
        </h:panelGrid>  
    </div>
</h:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:38:29.183

`chain.doFilter(request, response);`每次都必须执行（即使在发送重定向之后），但它只在`if`部分执行。将其移出并更改您的评估条件。

```
@Override
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws ServletException, IOException {    
    HttpServletRequest req = (HttpServletRequest) request;
    Autenticar auten = (Autenticar) req.getSession().getAttribute("aut");

    if (auten == null || !auten.isLogueado()) {
        // User is not logged in, so redirect to index.
        HttpServletResponse res = (HttpServletResponse) response;
        res.sendRedirect(req.getContextPath() + "/faces/index.xhtml");
    }
    //Just continue request.
    chain.doFilter(request, response);
} 
```

更多信息：

*   [java过滤器中doFilter方法中的doFilter是做什么的？](https://stackoverflow.com/q/2057607/1065197)
*   [The Essentials of Filters](http://www.oracle.com/technetwork/java/filters-137243.html)，尤其是**Programming Filters**部分，仅引用该部分的第一部分：

> Filter 接口中最重要的方法是 doFilter 方法，它是过滤器的核心。

# report - Access 2003：报告中只显示一个结果，即使有几个正在查询中

> ID：13612330
> 
> 赞同：0
> 
> 时间：2012-11-28T18:51:33.660
> 
> 标签：report, ms-access-2003

我有一个 Access DB，它记录了数百个项目。每个人都有一个分配的优先级以及一个项目负责人。

我有一个查询，它从这个表和另一个表中提取，列出所有活动项目（不包括已关闭的项目）。

最后，报表使用查询。但是，该报告拒绝显示多个具有相同领导者和优先级的项目。也就是说，如果同一个领导者有两个优先级为“99”的项目（这意味着“在可预见的将来不要从事这个工作”），那么报告中只会显示第一个。（报告按领导者和优先级分组。）

Priority 字段是 Long Integer 并且通过使用对允许值表的查找来选择。它被设置为不允许不在列表中的值。

如何说服 Access 显示查询中的所有匹配值？看起来微不足道，但我很难过。

谢谢。

# c - 如何在 c 中解决这个 fork() 示例

> ID：13612333
> 
> 赞同：6
> 
> 时间：2012-11-28T18:51:48.270
> 
> 标签：c, unix, process, operating-system, fork

```
int x=0;
int main()
{
  for(i=0;i<2;i++)
  {
    fork();
    x=x+5;
  }
  return 0;
} 
```

![图表](../Images/a3b0992ce98a6a8461fc9b31b7412467.png)

我是这个`fork()`概念的新手。上面的树（带`x`值）是上面提到的 C 代码的正确解决方案吗？节点中的`x`值分别是其进程的值。

我们也可以将值从子进程返回给父进程吗？假设在上面的示例代码中，我可以`x`将子进程的值返回给父进程吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T19:13:36.730

你的意思是那是一个进程树，在气泡中是`x`? 那么不，那是不正确的。

当一个孩子被生成时，它会得到一个父母的精确副本......所以让我们“打印”一些值，以便我们可以看到事物的状态（我正在为所有东西制作 PID）

当我们开始时，它只是父级：

```
parent (11174) x = 0, i = 0 
```

然后我们点击`fork()`，现在我们有两个进程：

```
 +--parent (11174) x = 0, i = 0
 |
 +->child1 (11175) x = 0, i = 0 
```

接下来是数学：

```
 parent (11174) x = 5, i = 0

 child1 (11175) x = 5, i = 0 
```

当我们循环备份时，我们的 i 将递增，每个进程现在都运行循环并命中`fork()`：

```
 +--parent (11174) x = 5, i = 1
 |
 +->child2 (11176) x = 5, i = 1

 +--child1 (11175) x = 5, i = 1
 |
 +->child  (11177) x = 5, i = 1 
```

现在每个人都再次开始计算：

```
 parent (11174) x = 10, i = 1

 child2 (11176) x = 10, i = 1

 child1 (11175) x = 10, i = 1

 child  (11177) x = 10, i = 1 
```

最后，每个人都进入了循环，并`i`从中打破了增量。所以你的最终结果是：

```
 parent (10)----->child1(10)---->child(10)
           |
           +----->child2(10) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T19:02:12.323

如果您调用`fork()`then 代码，则它适用于两个进程`parent`，即`child`.

`fork`创建一个新进程（称为子进程），其地址空间与父进程不同。因此，它们之间没有任何共享。

你在循环中调用fork，实际上是2次，所以总共会有4个独立的进程。

如果您想在子进程中进行单独编码，请始终使用以下返回值`fork()`：

```
if(!fork())
{
 // child process
}
else 
{
 // parent process
} 
```

对于这个问题：

```
 And also can we return values to the parent process from the child process?
    Suppose lets say in the above example code can I return the x value of the 
    child to the parent process? 
```

答案是，你不能直接从一个进程返回一个值到另一个进程。两个或多个进程之间的通信是使用称为进程间通信（IPC）的概念实现的，您可以通过两种方式完成。

```
1\. shared memory 
2\. memssage passing (pipe, rpc) 
```

在解决这个问题之前，您还必须了解很多事情。特别是当您尝试使用`fork`并且还想要返回值时

你应该看到[这个](http://www.gnu.org/software/libc/manual/html_node/Creating-a-Process.html)

或者，这可能对您[有更多帮助](http://beej.us/guide/bgipc/output/html/multipage/fork.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T19:21:39.347

```
fork(); 
```

创建一个子进程并将父进程的所有变量复制到子变量。

**家长：**

正如您在 For-Loop 中提到的，您的主程序创建了 2 个子程序，当它创建时`child1`，值`i`是`0` 当它创建时`child2`，值`i`是`1`

**孩子1：**

`Child1`在 fork() 之后开始`i++`执行，在下一次迭代 ( `i = 1`) 中执行 - 条件为真 ( `1 < 2`)，在is的值中`Child1`分叉另一个子节点is 。`child3``child3``i``1`

**儿童 2 和儿童 3：**

`Child2`并在 fork() 执行后`Child3`开始执行，现在变为，条件为假，不再创建子项。`i = 1``i++``i``2`

`3`Total 中创建的流程。

**代码：**

```
int x=0;
int main()
{
  for(i=0;i<2;i++)
  {
    fork();
    x=x+5;
  }
  printf("x = %d\n", x);
 return 0;
} 
```

**输出：**

```
x = 10
x = 10
x = 10
x = 10 
```

# internet-explorer - Socket.io：为什么 htmlfile 比 XHR-Polling 更受欢迎？

> ID：13612337
> 
> 赞同：4
> 
> 时间：2012-11-28T18:52:11.243
> 
> 标签：internet-explorer, node.js, socket.io, comet

基于 socket.io 0.9.10 默认配置[1](https://github.com/LearnBoost/socket.io/blob/master/lib/manager.js#L38)，`htmlfile`优先级高于`xhr-polling`.

我有这样一个想法，即`xhr-polling`（又名长池化）在`websockets`不受支持时是一种自然选择。如果我保留`htmlfile`在列表中，它将是 IE6、7、8 和 9 的选定传输。

我的最低要求是 IE7+，所以我应该删除`htmlfile`吗？我`xhr-polling`在 IE7 和 9 上测试过，效果很好。

这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T22:10:30.847

htmlfile 流式传输数据，而 XHR-Polling 是基于请求的，因此 htmlfile 可能更高效。这个网站对每种交通工具都有很好的解释。

[http://showmetheco.de/articles/2011/8/socket-io-for-backend-developers.html](http://showmetheco.de/articles/2011/8/socket-io-for-backend-developers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:49:27.817

仅供参考，我在使用带有 IE9 和网络防病毒软件（例如 Avira Webguard）的 htmlfile 时遇到了问题。套接字大约需要 30 秒才能到达服务器。

切换到 XHR 解决了这个问题，所以我建议你考虑到这一点，因为很多用户都安装了各种互联网保护软件。

# wordpress - 为什么我的元框不会显示在首页？

> ID：13612338
> 
> 赞同：-1
> 
> 时间：2012-11-28T18:52:24.153
> 
> 标签：wordpress, custom-fields, posts, meta-boxes

我到处都能看到它：在单个帖子中，在类别档案中等，但在首页帖子中没有。

我以这种方式显示元框：

```
<?php if (get_post_meta($post->ID, 'test_1', true) != '' ) { ?><?php echo get_post_meta($post->ID, 'test_1', true);?><?php } ?> 
```

怎么了？我做错了什么？是否可以以不同的方式显示元框？

**这是代码：**

```
add_action( 'init', 'create_xy_taxonomies', 0 );
function create_pc_db_taxonomies() {
register_taxonomy( 'genre', 'post', array( 'hierarchical' => false, 'label' => __('Tests', 'series'), 'query_var' => 'test', 'rewrite' => array( 'slug' => 'tests' ) ) );

$prefix = 'xy_meta_';

$meta_box = array(
    'id' => 'xy-meta-box',
    'title' => 'Xy tests',
    'page' => 'post',
    'context' => 'normal',
    'priority' => 'high',
    'fields' => array(
        array(
            'name' => 'Test_1',
            'id' => 'test_1',
            'type' => 'text',
            'std' => ''
        ),
        array(
            'name' => 'Test_2',
            'id' => 'test_2',
            'type' => 'select',
            'options' => array('','1'),
            'std' => ''
        ),
    )
);

add_action('admin_menu', 'mytheme_add_box');

function mytheme_add_box() {
    global $meta_box;

    add_meta_box($meta_box['id'], $meta_box['title'], 'mytheme_show_box', $meta_box['page'], $meta_box['context'], $meta_box['priority']);
}

function mytheme_show_box() {
    global $meta_box, $post;

    echo '<input type="hidden" name="mytheme_meta_box_nonce" value="', wp_create_nonce(basename(__FILE__)), '" />';

    echo '<table class="form-table">';

    foreach ($meta_box['fields'] as $field) {

        $meta = get_post_meta($post->ID, $field['id'], true);

        echo '<tr>',
                '<th style="width:20%"><label for="', $field['id'], '">', $field['name'], '</label></th>',
                '<td>';
        switch ($field['type']) {
            case 'text':
                echo '<input type="text" name="', $field['id'], '" id="', $field['id'], '" value="', $meta ? $meta : $field['std'], '" size="30" style="width:97%" />',
                    '<br />', $field['desc'];
                break;
            case 'textarea':
                echo '<textarea name="', $field['id'], '" id="', $field['id'], '" cols="60" rows="4" style="width:97%">', $meta ? $meta : $field['std'], '</textarea>',
                    '<br />', $field['desc'];
                break;
            case 'select':
                echo '<select name="', $field['id'], '" id="', $field['id'], '">';
                foreach ($field['options'] as $option) {
                    echo '<option', $meta == $option ? ' selected="selected"' : '', '>', $option, '</option>';
                }
                echo '</select>';
                break;
            case 'radio':
                foreach ($field['options'] as $option) {
                    echo '<input type="radio" name="', $field['id'], '" value="', $option['value'], '"', $meta == $option['value'] ? ' checked="checked"' : '', ' />', $option['name'];
                }
                break;
            case 'checkbox':
                echo '<input type="checkbox" name="', $field['id'], '" id="', $field['id'], '"', $meta ? ' checked="checked"' : '', ' />';
                break;
        }
        echo    '<td>',
            '</tr>';
    }

    echo '</table>';
}

add_action('save_post', 'mytheme_save_data');

function mytheme_save_data($post_id) {
    global $meta_box;
    if (!wp_verify_nonce($_POST['mytheme_meta_box_nonce'], basename(__FILE__))) {
        return $post_id;
    }
    if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) {
        return $post_id;
    }
    if ('page' == $_POST['post_type']) {
        if (!current_user_can('edit_page', $post_id)) {
            return $post_id;
        }
    } elseif (!current_user_can('edit_post', $post_id)) {
        return $post_id;
    }
    foreach ($meta_box['fields'] as $field) {
        $old = get_post_meta($post_id, $field['id'], true);
        $new = $_POST[$field['id']];

        if ($new && $new != $old) {
            update_post_meta($post_id, $field['id'], $new);
        } elseif ('' == $new && $old) {
            delete_post_meta($post_id, $field['id'], $old);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:59:58.450

您的测试只会显示自定义字段键 test_1 的内容，是吗？

# wpf - 单击 WPF DataGrid 的行标题时的事件？

> ID：13612339
> 
> 赞同：2
> 
> 时间：2012-11-28T18:52:31.887
> 
> 标签：wpf, events, datagrid, datagridrowheader

在我的 WPF 项目中，我有一个`DataGrid`. 我想在用户单击时获得一个事件`RowHeader`，但我找不到。有任何想法吗？

提前致谢，
弗兰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:03:18.477

我认为您可以处理 DataGrid 的 OnLoadingRow 并设置 RowHeader。像这样的某事：

```
protected override void OnLoadingRow(DataGridRowEventArgs e)
{
    DataGridRow row = e.Row;
    if (e.Row.GetType() != typeof(DataGridRowHeader))
    {
        DataGridRowHeader header=new DataGridRowHeader();
        header.Click+=new System.Windows.RoutedEventHandler(header_Click);
        row.Header = header;
    }
     base.OnLoadingRow(e);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-14T13:21:39.180

或者，如果您正在操作 RowHeaderStyle，那么，

```
 <Setter Property="RowHeaderStyle">
            <Setter.Value>
                <Style TargetType="{x:Type DataGridRowHeader}">
                    <EventSetter Event="PreviewMouseDown"
                                 Handler="OnGridRowHeaderClick" />
                </Style>
            </Setter.Value>
        </Setter> 
```

# c++ - C++ fread() 转换为 std::string

> ID：13612340
> 
> 赞同：5
> 
> 时间：2012-11-28T18:52:33.197
> 
> 标签：c++, string, casting, std, fread

像往常一样，指针问题。这次我试图读取一个文件（以二进制模式打开）并将其中的一部分存储在 std::string 对象中。让我们来看看：

```
FILE* myfile = fopen("myfile.bin", "rb");
if (myfile != NULL) {
    short stringlength = 6;
    string mystring;
    fseek(myfile , 0, SEEK_SET);
    fread((char*)mystring.c_str(), sizeof(char), (size_t)stringlength, myfile);
    cout << mystring;
    fclose(myfile );
} 
```

这可能吗？我没有收到任何消息。我确定文件没问题当我尝试使用 char* 时它确实可以工作，但我想将它直接存储到字符串中。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T19:02:45.167

首先将字符串设置为足够大以避免缓冲区溢出，并访问字节数组以`&mystring[0]`满足.`const``std::string`

```
FILE* myfile = fopen("myfile.bin", "rb");
if (myfile != NULL) {
    short stringlength = 6;
    string mystring( stringlength, '\0' );
    fseek(myfile , 0, SEEK_SET);
    fread(&mystring[0], sizeof(char), (size_t)stringlength, myfile);
    cout << mystring;
    fclose(myfile );
} 
```

这段代码中有很多很多问题，但这是正确使用的最小调整`std::string`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-07-27T21:35:37.580

我会推荐这是做这件事的最佳方式。您还应该检查以确保已读取所有字节。

```
 FILE* sFile = fopen(this->file.c_str(), "r");

    // if unable to open file
    if (sFile == nullptr)
    {
        return false;
    }

    // seek to end of file
    fseek(sFile, 0, SEEK_END);

    // get current file position which is end from seek
    size_t size = ftell(sFile);

    std::string ss;

    // allocate string space and set length
    ss.resize(size);

    // go back to beginning of file for read
    rewind(sFile);

    // read 1*size bytes from sfile into ss
    fread(&ss[0], 1, size, sFile);

    // close the file
    fclose(sFile); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T18:59:54.100

`string::c_str()``const char*`您无法修改的返回值。

一种方法是首先使用 char* 并从中构造一个字符串。

例子

```
char buffer = malloc(stringlength * sizeof(char));
fread(buffer, sizeof(char), (size_t)stringlength, myfile);
string mystring(buffer);
free(buffer); 
```

但是话又说回来，如果你想要一个字符串，你也许应该问自己`Why am I using fopen and fread in the first place??`

`fstream`将是一个更好的选择。[你可以在这里](http://www.cplusplus.com/reference/fstream/fstream/)阅读更多关于它的信息

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T18:55:46.540

请查看以下有关 c_str 的内容，以了解您的程序有哪些问题。一些问题包括 c_str 不可修改，而且它返回一个指向您的字符串内容的指针，但您从未初始化字符串。

[http://www.cplusplus.com/reference/string/string/c_str/](http://www.cplusplus.com/reference/string/string/c_str/)

至于解决它......你可以尝试读入一个 char* ，然后从中初始化你的字符串。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T19:01:37.177

不它不是。`std::string::c_str()`方法不返回可修改的字符序列，您可以从[这里](http://www.cplusplus.com/reference/string/string/c_str/)验证。更好的解决方案是使用缓冲区`char`数组。这是一个例子：

```
FILE* myfile = fopen("myfile.bin", "rb");
    if (myfile != NULL) {
        char buffer[7]; //Or you can use malloc() / new instead.  
        short stringlength = 6;
        fseek(myfile , 0, SEEK_SET);
        fread(buffer, sizeof(char), (size_t)stringlength, myfile);
        string mystring(buffer);
        cout << mystring;
        fclose(myfile );
        //use free() or delete if buffer is allocated dynamically
} 
```

# c - 使用 openssl 库验证自签名/过期证书不会返回错误

> ID：13612343
> 
> 赞同：6
> 
> 时间：2012-11-28T18:52:37.910
> 
> 标签：c, openssl

我正在尝试使用 openssl 库在 C 中编写证书验证函数。由于我正在验证的证书是自签名且已过期，因此我希望 X509_verify_cert() 返回错误（返回值为 1，而 store_ctx->error 设置为 X509_V_OK）。' **openssl verify my_pem_cert_file** ' 输出：

```
error 18 at 0 depth lookup:self signed certificate
error 10 at 0 depth lookup:certificate has expired 
```

我做错了什么？这是我的代码：

```
static int cert_verify_callback(int ok, X509_STORE_CTX *ctx)
{
    /* Tolerate self-signed certificate */
    if (X509_STORE_CTX_get_error(ctx) == X509_V_ERR_DEPTH_ZERO_SELF_SIGNED_CERT) {
        return 1;
    }

    /* Otherwise don't override */
    return ok;
}

int cert_validate(const char* certFileName) 
{
    BIO *pBio = NULL;
    X509 *pX509 = NULL;
    X509 *CA = NULL;
    X509_STORE *cert_store = NULL;
    X509_STORE_CTX *store_ctx = NULL;
    STACK_OF(X509) *stack_of_x509 = NULL;
    time_t check_time;
    int store_ctx_error;
    int store_ctx_error_depth;

    pBio = BIO_new( BIO_s_file_internal() );
    if(pBio == NULL)
        /* error handling */

    if(BIO_read_filename(pBio, certFileName) <= 0)
        /* error handling */

    pX509 = PEM_read_bio_X509(pBio, NULL, NULL, NULL);
    if (pX509 == NULL)
        /* error handling */

    if( (cert_store= X509_STORE_new()) == NULL)
        /* error handling */

    if( (store_ctx= X509_STORE_CTX_new()) == NULL)
        /* error handling */

    /* edit1: this was wrong: don't add the certificate being verified to the trusted cert list */
    /* if( !X509_STORE_add_cert(cert_store, pX509) ) */
        /* error handling */

    if( !X509_STORE_CTX_init(store_ctx, cert_store, CA, stack_of_x509) )
        /* error handling */

    X509_STORE_CTX_set_cert(store_ctx, pX509);

    /* edit1: this was missing: set the verify time in order to check the certificate for expiry */
    time(&check_time);
    X509_STORE_CTX_set_time(store_ctx, 0, check_time);
    X509_STORE_CTX_set_flags(store_ctx, X509_V_FLAG_USE_CHECK_TIME);

    /* edit1: add callback function for ignoring self-signed error
     * now, I'd like the validation to fail because of the expiry */
    X509_STORE_set_verify_cb_func(store_ctx, cert_verify_callback);

    switch( X509_verify_cert(store_ctx) ) {
        /* the certificate is valid */
        case 1:
            printf("The certificate is valid\n");

            break;

        /* the certificate cannot be validated */
        case -1:
        case 0:
            printf("The certificate is not valid\n");

            store_ctx_error= X509_STORE_CTX_get_error(store_ctx);
            store_ctx_error_depth= X509_STORE_CTX_get_error_depth(store_ctx);
            printf("Error %d at %d depth: %s\n", store_ctx_error, store_ctx_error_depth, X509_verify_cert_error_string(store_ctx->error));

        default:
            break;
    }

    /* free data ... */
} 
```

验证自签名和过期证书时，我的函数打印：0 深度时的错误 0：ok

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T22:03:24.253

该函数`X509_STORE_add_cert()`将相应的证书添加为可信证书进行验证，所以这一行：

```
X509_STORE_add_cert(cert_store, pX509) 
```

表示您的`pX509`证书可用于验证 - 但这是您要测试的证书，这就是自签名证书通过验证的原因。

您也没有设置验证时间 - 这就是未检测到过期证书的原因。用 设置验证时间`X509_STORE_CTX_set_time()`。

# informix - 如何在informix中获取以前执行的sql

> ID：13612349
> 
> 赞同：3
> 
> 时间：2012-11-28T18:52:49.333
> 
> 标签：informix, embedded-sql, dbaccess

在我的 esql 程序上，当 sql 失败并生成异常时，我想打印生成异常的 SQL。为此，我需要了解如何获取先前执行的 SQL。我正在运行informix 11.5。我尝试了以下但没有任何效果

```
select * from sysmaster:sysconblock where cbl_sessionid in (select dbinfo('SessionId') from sysmaster:syssqlstat);

SELECT scs_sqlstatement FROM sysmaster:syssqlcurses WHERE scs_sessionid in (select dbinfo('SessionId') from sysmaster:syssqlstat); 
```

所有这些都得到了它自己的sql。例如，如果我运行`select * from sysmaster:sysconblock`它，则在上次执行时显示“select * from sysmaster:sysconblock”。有没有办法在informix中得到这个？并且 [可以在 ESQL 程序上进行吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:17:41.083

您走在正确的轨道上，但是如果您使用相同的连接来运行这些 SQL 语句，那么它们的成功执行当然会消除前一条语句中的信息。（事实上​​，它几乎是一个完美的海森虫示例。）

您需要做的是创建到数据库的第二个连接，并使用它来询问失败的主连接的 sysmaster 内容。

1.  连接到数据库进行主程序处理。
2.  识别 SessionID 并捕获到变量。
3.  使用新连接连接到 sysmaster 数据库。
4.  在主连接上开始处理。
5.  当主连接处理失败并报错时，使用以SessionID为参数的辅助连接获取SQL等。

希望这会有所帮助。

# iphone - 每部 iPhone 和 iPad 上的可用字体是否始终相同？

> ID：13612353
> 
> 赞同：2
> 
> 时间：2012-11-28T18:53:22.733
> 
> 标签：iphone, ios, ipad, fonts

查看[此列表](http://iosfonts.com/)，是否可以保证在 iOS 版本 >= 5.0 的所有 iPad 和 iPhone 上都可以使用“Baskerville SemiBold”字体？

我的意思是无论设备在哪个国家/地区销售或特定的硬件型号是什么，等等？

我想在我的应用程序中使用这些字体，并想知道我是否应该编写程序检查这些字体在主机操作系统上是否确实可用，或者我是否可以安全地假设它们的存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:11:40.693

是的，我们保证您将在所有运行 iOS 5.0 及更高版本的 iOS 设备上安装**Baskerville SemiBold 。**放心使用字体！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:47:39.750

除了官方的苹果文档，iosfonts 网站是不同操作系统版本上可用字体的好资源

[http://iosfonts.com/](http://iosfonts.com/)

# xcode - ios 6 支持的接口方向

> ID：13612362
> 
> 赞同：0
> 
> 时间：2012-11-28T18:54:00.080
> 
> 标签：xcode, uiview, ios6, uiinterfaceorientation

在我的apilicacion中使用以下方法旋转：

```
- (NSUInteger) {supportedInterfaceOrientations
    return UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight;
} 
```

但是当加载下一个视图时

```
 View2 *Cambio =[[View2 alloc]initWithNibName:Nil bundle:Nil];
 Cambio.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
 [self presentViewController:Cambio animated:NO completion:^{/* done */}]; 
```

但这会自动旋转到`UIInterfaceOrientationMaskLandscapeRight to UIInterfaceOrientationMaskLandscapeLeft`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:48:24.773

也许你可以试试

```
-(UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationLandscapeRight;
} 
```

# c#-4.0 - 在 Web APi 中的每个操作后触发特定方法

> ID：13612364
> 
> 赞同：3
> 
> 时间：2012-11-28T18:54:25.713
> 
> 标签：c#-4.0, asp.net-web-api

我正在编写一个 ASP.NET WEB API。

一旦执行了动作，我想调用一个方法。

例如：

```
 public string Action1(object a)
 {
     // ...
     // call method1();
     return "sample1";
 }

 public string Action2(object b)
 {
     // ...
     // call method1();
     return "sample2";
 } 
```

有没有一种方法可以调用`method1()`每一个动作而不在每一个动作中提及？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T19:19:09.457

您可以在内部实现自定义`System.Web.Http.Filters.ActionFilterAttribute`和调用：`method1()``OnActionExecuted(...)`

```
public class MyActionFilter : System.Web.Http.Filters.ActionFilterAttribute
{
    public override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
    {
        // call method1();
        // ...
        base.OnActionExecuted(actionExecutedContext);
    }
} 
```

然后，您可以`[MyActionFilter]`在操作、控制器上使用它，或将其添加到全局配置中`WebApiConfig.cs`：

```
 config.Filters.Add(new MyActionFilter()); 
```

# cordova - jQuery Mobile 中的疯狂对话框弹出

> ID：13612367
> 
> 赞同：0
> 
> 时间：2012-11-28T18:54:47.757
> 
> 标签：cordova, jquery-mobile, dialog

我需要一些帮助来解决让我发疯的问题......我正在尝试使用对话框弹出，我的所有页面都在一个 html 文件中。如果我使用以下代码调用弹出对话框：

```
<a href = "# page1" id = "lnk" data-inline = "true" style = "position: absolute; left: 5%; bottom: 5%" data-rel = "dialog" data-transition = "pop "> Click here </ a> </ td> 
```

由于我对所有 html 页面仅使用单一来源，因此我使用 .js 来处理事件等：

```
/ / Load all events 
document.addEventListener ("deviceready" onDeviceReady, false);

function onDeviceReady() {

   / / Index events is

   / / Events for page1
   $ (document). delegate ('# page1', 'pageInit', function() {
      / / ...
   }

   / / events pages is outher
   $(document).delegate('#page...', 'pageInit', function() {
      / / ...
   }
} 
```

对话框弹出，页眉和正文之间有巨大的空白。这将它们链接到相同的 html 中。我可以看到问题出现在以下行：

```
document.addEventListener ("deviceready" onDeviceReady, false); 
```

我看到的一种解决方案是仅将外部 html 文件用于对话框弹出，但是当在屏幕之间导航时，包含正在呈现的信息的页面会弹出并锁定应用程序。

索引脚本的数据：

```
<!--- STYLE --->
<link rel="stylesheet"
    href="style/jquery.mobile-1.2.0.min.css" />
<link rel="stylesheet" href="style/jquery.mobile.iscrollview.css" />
<link rel="stylesheet" href="style/jquery.mobile.iscrollview-pull.css" />
<link rel="stylesheet" href="style/smart_mobile_theme.css" />

<!--- JS --->
<script src="js/cordova-2.2.0.js" type="text/javascript"></script>
<script src="js/jquery-1.8.2.min.js" type="text/javascript"></script>
<script src="js/jquery.mobile-1.2.0.min.js" type="text/javascript"></script>
<script src="js/index.js" type="text/javascript"></script>
<script src="js/iscroll.js" type="text/javascript"></script>
<script src="js/jquery.mobile.iscrollview.js" type="text/javascript"></script> 
```

第1页

```
<div data-role="page" id="page1" data-theme="a" data-overlay-theme="g">
        <div data-role="header">
            <h4>Title</h4>
        </div>

        <div data-role="content">
           <div >
                <input id="mail" type="email" data-inline="true" placeholder="Mail" />
                <button id="btnMail" >Send</button> 
            </div>
        </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:05:44.090

您在 addEventListener 调用中缺少逗号。

# webbrowser-control - 是否可以随时在 AutoHotkey 中执行加载到 WebBrowser 控件中的 JavaScript 函数？

> ID：13612369
> 
> 赞同：1
> 
> 时间：2012-11-28T18:54:53.993
> 
> 标签：webbrowser-control, autohotkey

我认为[`InvokeScript`](http://www.codeproject.com/Tips/60924/Using-WebBrowser-Document-InvokeScript-to-mess-aro)可能有效，但没有。

```
strHTML =
(
<!DOCTYPE html>
<html>
    <head>
        <script> function displayDate() { document.getElementById("demo").innerHTML=Date(); }</script>
    </head>
    <body>
        <p id="demo" onclick="displayDate()">This is a paragraph. Click here.</p>
    </body>
</html> 
)

new WebBrowser(strHTML)

Class WebBrowser
{
    __New(strHTML) { 
        static WB
        Gui, New, Resize 
        Gui, Add, ActiveX, vWB w780 h580 , Shell.Explorer  
        Gui, show, w800 h600

        WB.Navigate("about:blank")
        Loop
           Sleep 10
        Until (WB.readyState=4 && WB.document.readyState="complete" && !WB.busy)    

        WB.Document.Write(strHtml)
        ; WB.Document.Close()

        WB.document.InvokeScript("displayDate")
        ; WB.document.parentWindow.document.InvokeScript("displayDate") ; does not work
        return this

        GuiClose:
        ExitApp
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T09:25:44.257

至少有两种方法可以调用该函数：

```
WB.document.parentWindow.execScript("displayDate()")
WB.document.parentWindow.displayDate() 
```

脚本中的所有全局函数都可以作为`window`对象的方法使用。

您链接到的文章中提到的 WebBrowser 控件是 .NET Framework 的一部分，与您使用的 WebBrowser 控件不同。这就是为什么尝试调用`InvokeScript`会引发“未知名称”错误消息的原因。

# c# - 作为实体框架的一部分的附加操作保存

> ID：13612370
> 
> 赞同：1
> 
> 时间：2012-11-28T18:54:55.463
> 
> 标签：c#, entity-framework, dbcontext

作为 DbContext 中保存操作的一部分，我需要序列化扩展信息以存储在数据库的二进制字段中。

我编写了以下方法来拦截所有已添加或修改的 Client 对象，以确保在保存之前进行序列化。我想知道是否有更好的方法可以做到这一点，或者这种方法是否会产生问题。

```
public int Save()
{
    foreach (Client client in this.Context.Local.Clients)
    {   
        EntityState state = this.Context.Entry(client).State;
        if (state == EntityState.Added || state == EntityState.Modified)
        {
            client.SerializeExtended();
        }   
    }
    return this.Context.SaveChanges();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:11:32.550

覆盖`DbContext.SaveChanges`方法。

```
protected override int SaveChanges()
{
     foreach (var entry in ChangeTracker.Entries<Clients())
     {
        var entity = entry.Entity;
        if (entry.State == EntityState.Added || entry.State == EntityState.Modified)
        {
            entry.Entity.SerializeExtended();
        }
     }
     base.SaveChanges();
} 
```

# java - 在java中的函数返回中应用强制转换？

> ID：13612371
> 
> 赞同：2
> 
> 时间：2012-11-28T18:54:55.570
> 
> 标签：java, type-conversion, return-type

我刚刚写了这个必须返回双精度值的简单方法。这是从银行帐户中提取资金的功能。该功能必须让用户只有在他输入的值小于他在他的帐户中的金额时才能拿到钱。有一个条件，如果他是特殊用户，即使尝试价值=余额+1000，他也可以拿钱。

由于我是 java 的初学者，我还不熟悉这种类型的东西（我是一名 php 程序员，所以我从来没有真正担心过这个问题，但是我很难让这段代码工作，因为我返回一个双精度，如果没问题，但返回一个错误，如果不是，我不能在 java 中这样做。这是我的方法。（变量“平衡”和“特殊”属于我的班级）。

```
public double getMoney (double value) {
    if (value <= balance) {
        balance = balance - value;
    } else {
        if (special == true && value < (balance+1000)) {
            return balance-value;
        } else {
            return false;
        }
    }
} 
```

我知道这是一个菜鸟问题，但我刚开始学习 java 并且习惯于使用 PHP 进行编码，我不需要担心变量的类型，所以我想知道你是否可以给我一些建议。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T19:17:03.310

您可以返回 Double.NEGATIVE_INFINITY，而不是 false。然后调用者明确检查该值，并检测 ist 为无效 withDrawn()。

调用者通过

```
double val = getMoney(5000000);
if (val == Double.NEGATIVE_INFINITY) {
   // money could not be withdran
   // print message
} else {
   // ok money could be withdrawn
} 
```

如果你想做得更专业，你必须重新调整一个事务信息：

```
TransActionInfo info = getMoney(500000);
if (info.getStatus == Status.LIMIT_EXCEEDED) {
   // could not withraw

} else {
   ...
} 
```

而不是 if 你可以使用 switch 语句：

```
TransActionInfo info = getMoney(500000);
switch (info.getStatus()) {
  case: Status.OK: 
     break;
  case Status.LIMIT_EXCEEDED:
    // inform on display of bankomat. or similar
     break;
  ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T19:16:19.243

请注意，对于**货币值**，使用双精度通常是个坏主意。您当然不希望发生精度损失，对吗？

尝试研究十进制类型，例如 BigDecimal，或考虑使用存储在足够大整数类型中的分（如果您不需要支持分值的小数）。

不要回来`false`。要么返回`0`（“没有取款”），要么使用**异常**处理错误。即使在 PHP 或 JavaScript 等松散类型的语言中，这通常也是一个坏主意，因为它会导致意外行为。尽可能**严格**！

另一位用户建议使用`Double.NEGATIVE_INFINITY`. 你也可以使用`Double.NaN`，但我强烈建议不要这样做。*它会以一种非常微妙的*方式使事情出错，这不是你想要的。你可能想要一个大胖例外。您**确实**希望该`getMoney`函数的用户处理这种情况，因此我建议使用实际上*必须*由调用`getMoney`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T19:18:04.743

我认为您应该将所有变量作为方法参数传递。因此，在方法范围内，您解决了您的问题并返回 true 或 false ...或不返回任何内容（void）。

```
public boolean hasMoney(double need, double balance, boolean special) {
    if( special ) {
        return balance+1000 >= need;
    } else {
        return balance >= need;
    }
} 
```

如果返回是真的，你知道客户有足够的钱

# android - 将图像更改为图库中的图片

> ID：13612376
> 
> 赞同：0
> 
> 时间：2012-11-28T18:55:23.843
> 
> 标签：android, imageview, gallery, android-imageview, image

我正在开发一个应用程序，该应用程序需要从 android 设备的内置图片库中获取随机图片，然后将其显示在屏幕上。这是我必须使用的：

- 一个名为图片的 ImageView 对象 - 我要显示的图片的 ID、TITLE、DATA、MIME_TYPE 和 SIZE

我认为问题是我不知道我需要在这一行中输入什么信息：

```
picture.setImageResource(???); 
```

这是我的所有代码，可让您了解我正在尝试做的事情：

```
public void generateImage() {
    // Get list of images accessible by cursor
    ContentResolver cr = getActivity().getContentResolver();
    String[] columns = new String[] {
                    ImageColumns._ID,
                    ImageColumns.TITLE,
                    ImageColumns.DATA,
                    ImageColumns.MIME_TYPE,
                    ImageColumns.SIZE };
    Cursor cursor = cr.query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                    columns, null, null, null);

    // Collect Picture IDs
    cursor.moveToFirst();
    ArrayList<Integer> picList = new ArrayList<Integer>();
    while (!cursor.isAfterLast()) {
        picList.add(cursor.getInt(0));
        cursor.moveToNext();
    }// end for

    // Generate random number
    int imageCount = picList.size() - 1;
    Log.d("NUMBER OF IMAGES", "Image Count = " + imageCount);
    Random random = new Random();
    int randomInt = random.nextInt(imageCount);

    // Extract the image
    int picID = picList.get(randomInt);
    picture.setImageResource(picID);

}// end Generate Image 
```

任何人都知道我需要做什么才能将图片对象设置为我从图库中获得的图片（最好使用我已经获得的信息）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:31:38.213

Looks like you are saving an array of the cursor position... that would probably not give you much to work with. I think you'd rather populate an ArrayList with ImageColumns._ID and then use that string as a URI to open the image.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T10:41:04.033

```
//Extracting the image
columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
cursor.moveToPosition(randomInt);
filePath = cursor.getString(columnIndex);
imageView.setImageBitmap(decodeSampledBitmapFromResource(filePath,width,height)); 
```

为了有效地使用位图，这样您就不会遇到 OutOfMemory 异常，这里有两个来自 androids 开发者页面的函数 [链接 [http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html) ]

```
public Bitmap decodeSampledBitmapFromResource(String path, int reqWidth, int reqHeight) {

        // First decode with inJustDecodeBounds = true to check dimensions
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(path,options);

        // Calculate inSampleSize
        options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

        // Decode bitmap with inSampleSize set
        options.inJustDecodeBounds = false;
        return BitmapFactory.decodeFile(path, options);
    }

    public static int calculateInSampleSize( BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;

    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {

        // Calculate ratios of height and width to requested height and width
        final int heightRatio = Math.round((float) height / (float) reqHeight);
        final int widthRatio = Math.round((float) width / (float) reqWidth);

        // Choose the smallest ratio as inSampleSize value, this will guarantee
        // a final image with both dimensions larger than or equal to the
        // requested height and width.
        inSampleSize = heightRatio < widthRatio ? heightRatio : widthRatio;
    }

    return inSampleSize;
} 
```

# nginx - 如何将 http_referer 添加到 cookie？

> ID：13612378
> 
> 赞同：0
> 
> 时间：2012-11-28T18:55:30.160
> 
> 标签：nginx

我正在尝试这样的事情：

```
map $http_referer $setCookie {
        default                "referrer={$http_referer};Domain=.verbalink.com";
        ~*test1\.com           "referrer=bl;Domain=.verbalink.com;Max-Age=31536000";

}

server{
    add_header Set-Cookie $setCookie;
} 
```

但是当创建 cookie 时，它`${http_referer}`​​的值不是实际的 http 引用。我也尝试过`{$http_referer}`，`$http_referer`但没有奏效。如何让推荐人进入我的 Cookie？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:10:52.677

如果您只有两个条目，我会将它们映射到一些关键字中，然后在服务器条目中，如果它们可以 :) 它应该可以工作。所以它看起来像：

```
 map $http_referer $setCookie {
            default                "def";
            ~*test1\.com           "test";
    }

    server{
if ($setCookie == "def"){
add_header Set-Cookie "referrer=$http_referer;Domain=.verbalink.com";
} 
if ($setCookie == "test"){
add_header Set-Cookie "referrer=bl;Domain=.verbalink.com;Max-Age=31536000";
} 

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:22:24.770

```
map $http_referer $setCookie {
    default       $http_referer;
    ~*test1\.com  "bl;Max-Age=31536000";
}

server{
    add_header Set-Cookie "referrer=$setCookie;Domain=.verbalink.com";
} 
```

*结果值可以是字符串或其他变量。*© [http://nginx.org/r/map](http://nginx.org/r/map)

对比

*值可以包含变量* © [http://nginx.org/r/add_header](http://nginx.org/r/add_header)

# rest - 使用 RESTful URL 识别集合子集

> ID：13612383
> 
> 赞同：1
> 
> 时间：2012-11-28T18:55:41.353
> 
> 标签：rest

假设我想获取我的公司在缅因州拥有的所有商店的列表。从概念上讲，这个请求可以被视为

```
/stores?state=Maine (All stores such that the state of the store is Maine) 
```

或者

```
/states/Maine/stores (All of Maine's stores) 
```

哪个更 RESTful，为什么？根据我的理解，两者似乎都有其优点和缺点。

编辑：

我最初的例子有一个问题，将商店作为状态的子资源可能没有直观的意义，所以这里有另一个更详细的例子：假设我可以通过 ISBN 来识别全球书籍，或者通过标题来识别每个作者（假设没有作者说出他们的两个自己的书一样）。所以，在这个方案下`/books/0-525-94892-9`，`/authors/Ayn_Rand/books/Atlas Shrugged`会参考同一本书。因此，如果我想要 Ayn Rand 的所有书籍，我会`GET /books?author=Ayn_Rand`还是`GET /authors/Ayn_Rand/books`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:04:59.853

除非`/states`并且`/states/Maine`也是您系统中的资源，否则我将使用第一个示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:57:54.553

在您给出的两个示例（州/商店和作者/书籍）中，我将使用后一种方案。

它允许您以直观的方式公开各种不同的资源。URI 清楚地表明了您期望哪些资源，并将使用中的约束表示为“路径”，而不是一团糟`?key=value&foo=bar&so=on...`

请允许我解释...

```
/authors/ 
```

将返回所有作者资源的列表。

```
/authors/Ayn_Rand/ 
```

将返回 Ayn Rand 资源，其中可能包含与 Rand 女士本人有关的信息。

```
/authors/Ayn_Rand/books 
```

将返回 Ayn Rand 的书籍列表。这可能看起来像一个“简单”的书籍列表：

```
[
{
    title: 'Atlas Shrugged',
    genre: 'Fiction'
    slug: 'atlas_shrugged'
},
{
    title: 'The Fountainhead',
    genre: 'Fiction',
    slug: 'the_fountainhead'
},
{
    title: 'Capitalism: The Unknown Ideal',
    genre: 'Non-fiction',
    slug: 'capitalism_the_unknown_ideal'
}
] 
```

您可能还希望使用超媒体来严格按其 ISBN 引用书籍：

```
...
{
    title: 'Atlas Shrugged',
    genre: 'Fiction',
    location: '/books/0-525-94892-9'
},
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T11:32:03.113

> 哪个更 RESTful，为什么？

两者都是 RESTful 的（尽管从技术上讲，REST URI 是不透明的，所以没关系）。哪个最适合您的用例取决于您的资源层次结构。

从您的书籍示例中，我将使用 ISBN，因为它是该书在其他地方使用的规范标识符。可能还有其他书籍称为“Atlas Shrugged”，可能还有其他作者称为“Ayn Rand”，或者同一作品的衍生版本可能会更改名称，或列出第二位作者，如果编辑充分的话。您需要提供至少两个数据，`{author-name, book-name}`甚至可能`{publication-year}`需要唯一标识这本书。使用 ISBN 编号，您只需使用一个数据来识别图书。

请求`/authors/{author-name}/books/{book-name}`可能返回`302 Found`响应或更好，返回带有`Content-Location`标题的书`/books/{isbn}`并在响应中使用`rel="canonnical self"`链接指向资源的 ISBN URI。

**编辑**
我将从我自己的 API 中提供一个示例：
我们有`jobs`,`contacts`和`sites`. 都是顶级资源。站点代表具有地址的物理位置。联系人通常代表公司，但有时是个人或学校等组织。一个站点有`owner`一个联系人。当你去那个地址时，所有者就是标志上的名字。作业是顶级资源。作业有 a `client`、 a`site`和 a`site_owner`. 作业的客户是联系人（并非所有联系人都是客户），作业的 site_owner 是作业时站点的所有者，因为站点的所有者可能会随着时间的推移而改变，因为前提易手等等。我们有时也会为非网站所有者的客户（即分包商工作）做工作。我们需要保留在站点上完成的所有工作的历史记录，无论客户是谁，当时谁拥有建筑物等。
因此，可以通过以下几种方式访问​​在站点上为特定客户完成的工作的工作清单URIs, `/contacts/{id}/sites/{id}/jobs`, `/sites/{id}/jobs?client={id}`, `/contacts/{id}/jobs?site={id}`, 但实际上它们只是作业列表中的过滤器，完全等同于`/jobs?client={id}&site={id}`事实上，所有 URI 都是有效的，最终会到达同一个 PHP 文件并将相同的变量设置为相同的值并运行相同的查询，有些只是采取更迂回的路线并进行更多的`include`调用。
我允许所有这些不同 URI的**原因**仅仅是因为它允许我的用户在他们的导航层次结构中“上升”一两个级别（变量“面包屑”取决于到达列表所采用的路径；这会稍微改变返回的表示)，并且由于数据集是实时的，对于您可能正在查看的事物来说是高度动态的，因此 HTML 结果是无法缓存的，因此不重用规范 URI 的权衡提供了比不利方面更多的好处。

从这一切中得出的结论是：

*   为您的资源使用一个唯一标识符，或者`id`如果您的资源本身没有一个唯一标识符（例如 ISBN），则创建一个 ( )

*   您选择的 URI 与您的 API 的 RESTful 程度无关

# perl - Perl substr 内存泄漏

> ID：13612389
> 
> 赞同：5
> 
> 时间：2012-11-28T18:55:53.627
> 
> 标签：perl, memory-leaks

嗨，我正在使用 Perl 变量中的大字符串数据（它的原始电子邮件正文，因此它可以包含附件）。**Perl 的substr**有一个有趣的问题。似乎它的泄漏或我做错了什么（如果是，是什么？）。考虑代码：

```
#!/usr/local/bin/perl
use strict;
my $str = 'a'x10_000_000;

system("ps up $$"); #22mb used (why?)
#USER   PID %CPU %MEM   VSZ   RSS  TT  STAT STARTED      TIME COMMAND
#alt  64398  0,0  0,2 33292 22700   7  S+J  22:41     0:00,03 /usr/local/bin/perl ./t.pl

substr($str, 0, 1)='';
system("ps up $$"); #No leak
#USER   PID %CPU %MEM   VSZ   RSS  TT  STAT STARTED      TIME COMMAND
#alt  64398  0,0  0,2 33292 22732   7  S+J  22:41     0:00,04 /usr/local/bin/perl ./t.pl

substr($str, 500);
system("ps up $$"); #Leaked 10Mb (why?!)
#USER   PID %CPU %MEM   VSZ   RSS  TT  STAT STARTED      TIME COMMAND
#alt  64398  0,0  0,3 43532 32520   7  S+J  22:41     0:00,05 /usr/local/bin/perl ./t.pl

my $a = substr($str, 500);
system("ps up $$"); #Leaked 10Mb + Copyed 10Mb
#USER   PID %CPU %MEM   VSZ   RSS  TT  STAT STARTED      TIME COMMAND
#alt  64398  0,0  0,5 64012 52096   7  S+J  22:41     0:00,09 /usr/local/bin/perl ./t.pl

undef $a; #Free scalar's memory
system("ps up $$"); #Free'd 10Mb
#USER   PID %CPU %MEM   VSZ   RSS  TT  STAT STARTED      TIME COMMAND
#alt  64398  0,0  0,4 53772 42308   7  S+J  22:41     0:00,09 /usr/local/bin/perl ./t.pl

# Total leaked 2 times for 10Mb each 
```

看`substr($str, 500);`命令。除了它的字符串的返回副本（没关系），它会泄漏相同数量的内存，所以如果你使用返回值它的两次内存，其中一个在整个时间脚本工作时丢失......另外，它似乎不是任何一种“内部缓冲区”，因为它会泄漏*每个*调用..

请注意，这种增加 10Mb 的情况不是“重用”内存，因为后续调用会获得越来越多的内存。

有什么建议可以解决或避免这种情况吗？

我的 Perl 版本 5.14.2；我在工作中遇到的相同行为（5.8.8）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:20:50.873

根据[perlglossary](https://metacpan.org/module/perlglossary)，深埋在 Perl 内部，有一个叫做**暂存器**的东西：

> 特定文件或子例程的特定调用保留其一些临时值的区域，包括任何词法范围的变量。

这是由生成的代码`perl -MO=Concise leak.pl`：

```
...
10    <;> nextstate(main 3 leak.pl:30) v:*,&,{,x*,x&,x$,$ ->11
15    <2> sassign vKS/2 ->16
13       <@> substr[t16] sK/2 ->14
-           <0> ex-pushmark s ->11
11          <0> padsv[$str:2,4] s ->12
12          <$> const(IV 500) s ->13
14       <0> padsv[$a:3,4] sRM*/LVINTRO ->15
16    <;> nextstate(main 4 leak.pl:35) v:*,&,{,x*,x&,x$,$ ->17
... 
```

观察`padsv[$str:2,4]`声明。现在，如果我使用一些调试标志 ( `perl -DmX leak.pl`) 运行代码，“泄漏”的来源就会变得更加清晰：

```
USER   PID  %CPU %MEM      VSZ    RSS   TT  STAT STARTED      TIME COMMAND
stas 55970   1.5  0.3  2454528  21548 s001  S+    6:11PM   0:00.04 perl -DmX leak.pl
...
Pad 0x7f8a328062c8[0x7f8a3240d040] sv:      16 sv=0x7f8a32833298
0x7f8a3240a2a0: (02222) free
0x10d013000: (02223) malloc 9999500 bytes
...
Pad 0x7f8a328062c8[0x7f8a3240d040] sv:      15 sv=0x7f8a328332c8
0x7f8a3240a560: (02231) free
0x10d99d000: (02232) malloc 9999500 bytes
...
USER   PID  %CPU %MEM      VSZ    RSS   TT  STAT STARTED      TIME COMMAND
stas 55970   1.5  0.5  2474064  41084 s001  S+    6:11PM   0:00.06 perl -DmX leak.pl 
```

所以，这只是 Perl 使用暂存器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T20:02:45.470

如果您`ps`在分配前检查一下，`$str`您会发现大约 2 megs 仅用于运行 perl。因此分配`$str`需要 20 兆，是创建字符串大小的两倍。如果我不得不猜测发生了什么，perl 必须制作一个 10 兆的字符串，然后将其复制到`$str`. 20 兆。它保留分配的内存以供以后使用。

`substr($str, 0, 1)=''`导致`$str`指向一个新的 C 字符串，您可以使用 Devel::Peek 看到这一点，但不会增加进程内存。它可能使用了从分配内存中释放出来的内存`'a' x 10_000_000`。

`my $a = substr($str, 500);`有类似的问题。制作一个新的`substr`10 meg 字符串，然后将其复制到`$a`需要 20 megs 中。为什么需要更多系统内存才能做到这一点我不确定。perl 可能从它从操作系统获得的前 10 兆块分配内存，因此不再是单个 10 兆块，它不得不向操作系统询问更多。

`undef $a`肯定会清除与 关联的 C 字符串`$a`，您可以使用 Devel::Peek 看到，但 perl 不一定会将内存释放回操作系统。

无论如何，这是我最好的猜测。

长话短说，当一个进程将内存释放回操作系统时，这很复杂，而且操作系统的做法也不同。这是[一个专门关于 perl 的讨论](http://www.perlmonks.org/?node_id=267209)和[一个关于 Linux](https://www.linuxquestions.org/questions/linux-newbie-8/releasing-memory-allocated-to-a-process-750035/)的讨论。

# java - 在 Java 中将 int 表示为 2 个字节

> ID：13612390
> 
> 赞同：6
> 
> 时间：2012-11-28T18:55:53.900
> 
> 标签：java, bit-manipulation

我需要将 0xFF00 的值表示为两个字节（在 Java 中）。我正在尝试这样做：

```
int val = 0xFF00;
bytearray[0] = (byte)((val >> 8) & 0xFF);
bytearray[1] = (byte)((val >> 0) & 0xFF); 
```

我知道 Java 中的字节可以保存 0-255 的值。所以我希望第一个数组元素的值是 255，第二个元素是零。但是我得到的是-1和0。我做错了什么？这个 -1 值是什么意思？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T18:57:36.000

java中的字节是从`-128`到`127`，而不是从`0`到`255`

`-1`是二进制[补码](http://en.wikipedia.org/wiki/Two%27s_Complement)`1111 1111`，等于无符号字节。`255`

您没有做错任何事情，您只需要知道如果看到`-1`，则表示字节代表位`1111 1111`。

# iis - 在 IIS 上启用 SSI

> ID：13612391
> 
> 赞同：0
> 
> 时间：2012-11-28T18:55:54.343
> 
> 标签：iis

根据[这个页面](http://msdn.microsoft.com/en-us/library/ms525940%28v=vs.90%29.aspx)，我应该能够：

```
<!-- #include file = "..\myfile.htm" --> 
```

问：如何在 IIS7 上启用 SSI？

编辑：哦，我明白了我的问题是什么：我在 VPS 上，他们禁用了“打开或关闭 Windows 功能”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:00:13.243

尝试这个：-

1) 在 IIS 管理器中，转到“Web 服务扩展”并将服务器端包含设置为“允许”。

2) 在 IIS 管理器中，展开本地计算机，右键单击“网站”文件夹（适用于所有站点）或右键单击特定网站，然后单击“属性”。

3) 在“文档”选项卡中，确保 index.shtml 包含在默认内容页面列表中。

# image-processing - 为空间过滤生成过滤器

> ID：13612392
> 
> 赞同：0
> 
> 时间：2012-11-28T18:56:00.297
> 
> 标签：image-processing

我在 Wikipedia 上阅读并看到如果我们需要对图像执行空间过滤，我们必须有一个过滤器，例如 3x3，我在这里不明白的是我们如何选择过滤器的值？假设原始图像是灰度的，因此其强度从 0 变为 255（8 位）。
另一个问题是，如果图像是 9x9，我们如何将过滤器应用于该图像的边界像素？如果我们选择填充图像以便过滤器可以处理所有边界像素，那么新填充像素的值是多少？
非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:19:12.257

过滤器的值取决于您希望通过过滤实现的目标。有很多过滤器设计可以执行特定任务。例如，最简单的滤波器 f=[-1 1 -1] 通过在水平方向（x 导数）上对每个像素执行一阶差分来执行图像推导，而 f' 在垂直方向（y 导数）执行相同的操作. 为此目的选择值 -1,1,-1。3*3 过滤器也是如此。通常，值的选择来自有限冲激响应 (FIR) 和无限冲激响应 (IIR) 滤波器的 2D（双向）设计。

您应该记住，边界上的过滤器操作的值并不是那么准确。边界像素的过滤操作通过称为边界插值的过程对超出范围的像素进行插值。在 OpenCV 和类似的图像处理/计算机视觉库中，有一些方法可以做到这一点。例如在opencv中如下

各种边框类型，图像边界用'|'表示

*   BORDER_REPLICATE: aaaaaa|abcdefgh|hhhhhhh
*   BORDER_REFLECT: fedcba|abcdefgh|hgfedcb
*   BORDER_REFLECT_101：gfedcb|abcdefgh|gfedcba
*   BORDER_WRAP: cdefgh|abcdefgh|abcdefg
*   BORDER_CONSTANT: iiiiii|abcdefgh|iiiiiii 带有一些指定的 'i'

因此，根据您的选择，您可以填充边界像素。

# php - 删除当前 _POST 数据以将表单提交到新页面

> ID：13612394
> 
> 赞同：0
> 
> 时间：2012-11-28T18:56:02.387
> 
> 标签：php, forms, post, submit

我有一个表单，我想在其中使用`_POST`数据提交复选框值。我的问题是我的当前页面中已经有帖子值。当我提交表单时，它返回的是当前的帖子值，而不是我想要的，这给了我`Notice: Undefined index`信息。

基本上这种形式是比较选定的产品，但在当前的帖子值中，它具有产品信息以及按值排序。有没有办法自己提交我的新表单信息？

谢谢

**编辑**

好吧，这就是我的代码，我正在使用一个名为 Virtuemart 的购物车。我添加了下面的代码，减去了所有其他不影响表单的内容。

**产品档案**

```
 // Code here for Template file for individual items in category
    //creating checkbox for comparison form
    echo "<input type =\"checkbox\" name=\"fruit[]\" value=\"".$product_sku."\" />
    <label for=\"".$product_name."\"> ".$product_name."</label>"; 
```

**分类文件**

```
//all other forms on this page 
<form action="items/index.php" method="get" name="results" target="_blank">
<input class="inputbox" name="search" id="item-search" type="text" value="Search"></td><td>
<input type="image" class="sub-button" src="/search.png" alt="submit" name="submit" value="search">
</form>

<form action="index.php" method="get" name="order">
Sort by:
<select class="inputbox" name="orderby" onchange="order.submit()">
<option value="product_list" >Select</option>
        <option value="product_name" selected="selected">Product Name</option>
        <option value="product_price" >Price</option>
        <option value="product_cdate" >Latest Products</option>
        </select>
<script type="text/javascript">//<![CDATA[
            document.write('&nbsp;<input type="hidden" name="DescOrderBy" value="ASC" /><a href="javascript: document.order.DescOrderBy.value=\'DESC\'; document.order.submit()"><img src="images/sort_asc.png" border="0" alt="Ascending order" title="Ascending order" width="12" height="12" /></a>');
            //]]></script>
<noscript>
        <select class="inputbox" name="DescOrderBy">
        <option  value="DESC">Descending order</option>
        <option selected="selected" value="ASC">Ascending order</option>
        </select>
        <input class="button" type="submit" value="Submit" />
    </noscript>
    <input type="hidden" name="Itemid" value="89" />
    <input type="hidden" name="option" value="com_virtuemart" />
    <input type="hidden" name="page" value="shop.browse" />
    <input type="hidden" name="category_id" value="0" />
    <input type="hidden" name="manufacturer_id" value="0" />
    <input type="hidden" name="keyword" value="" />
    <input type="hidden" name="keyword1" value="" />
    <input type="hidden" name="keyword2" value="" />

<div id='limitbox'> &nbsp;&nbsp;&nbsp;&nbsp;Display #&nbsp;&nbsp;

<select class="inputbox-reg" name="limit" size="1"  onchange="this.form.submit();">
<option value="6" >6</option>
<option value="18" >18</option>
<option value="30" >30</option>
</select>

<input type="hidden" name="limitstart" value="0" /></div>   <noscript><input type="submit" value="Submit" /></noscript> 
    <!-- PAGE NAVIGATION AT THE TOP <br/>
    <div style="text-align:center;">    </div>
    -->
</form>

// all other forms end 
```

**表单我想从中传递值**

```
echo"<form method=\"POST\" name=\"compare\" id=\"compare\" action=\"http://localhost/comparepage/\">";

//TEMPLATE FILE HERE THAT GENERATE PRODUCTS FROM PRODUCT FILE CODE ABOVE.
//Basically it has foreach statements to generate all products

echo "<input type=\"submit\" name=\"submit\" value=\"Compare\" onClick=\"document.compare.submit()\" >";

echo "</form>"; 
```

我已更改`POST`为`GET`仅获取正在传递的值，在下一页中，我在 url 中看到了一堆值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:06:36.393

尝试将第二个表单的字段放在单独的 <form> 标记中

表格一：

```
<form method='post' action='/process.php'>
    <input name='town' type='text'/>
    <input name='country' type='text'/>
    <input type='submit'/>
</form> 
```

表格 2：

```
<form method='post' action='/process.php'>
    <input name='gender' type='text'/>
    <input name='state' type='text'/>
    <input type='submit'/>
</form> 
```

如果您提交表格 1，$_POST 将包含城镇、国家如果您提交表格 2，$_POST 将包含性别和州

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:09:31.460

正如所建议的，一些代码和更多细节会有所帮助。但是，如果您在同一页面上有多个表单字段，并且根据操作，您希望提交这些字段的不同集合，那么只需将它们包装在不同的`<form></form>`元素中。POST 提交仅提交包含在该特定块中的表单字段。

所以你可以有：

```
<form name='form1' method='POST' action='#'>
   <input type='hidden' name='field1' value='true' />
   <input type='submit' name='submit' value='Submit' />
</form>
<form name='form2' method='POST' action='#'>
   <input type='hidden' name='field1' value='false' />
   <input type='submit' name='submit' value='Submit' />
</form> 
```

如果单击第一个提交按钮，`$_POST['field1'] = 'true', else = 'false'`

# tomcat - 将 Camel 与 tomcat、cxf 和 jax-ws/rs 一起使用

> ID：13612403
> 
> 赞同：1
> 
> 时间：2012-11-28T18:56:48.377
> 
> 标签：tomcat, jax-ws, cxf, jax-rs, apache-camel

我想我需要这样的东西：[http ://camel.apache.org/cxf-tomcat-example.html](http://camel.apache.org/cxf-tomcat-example.html)

我有一个带有 jax-ws 注释的 webservice 类，我想使用这个类来处理请求并产生响应而不是自定义处理器。像这样的东西：`from(cxf ws endpoit).to(my webservice implementation)`

这可能吗？我可以将我的消息路由到正确的 java 方法吗？这与我可以使用`cxf`and完全一样`jax-ws`，但我也想使用骆驼。我想使用代码优先的方法（生成的 WSDL）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:13:14.750

> 我可以将我的消息路由到正确的 java 方法吗？

如果您的意思是您手动创建的bean的特定方法，那么是的。

例如：

创建自定义bean：

```
public class CustomProcessor {

    public void processSomething(Exchange exchange) {
        Something smth = exchange.getIn().getBody(Something.class); //Your message's body              
    }

} 
```

使用`Spring`创建骆驼配置是这样的：

```
<bean id="processor" class="your.custom.CustomProcessor"/>

<camel:camelContext trace="true" id="camelContext" >

    <camel:route id="camelRoute">
        <camel:from uri="cxf:bean:yourWebServiceListenerEndpoint?dataFormat=POJO&amp;synchronous=true" />
        <camel:choice>
            <camel:when>
                <camel:simple>${headers.operationName} == 'DoSomething'</camel:simple>
                <camel:bean ref="processor" method="processSomething"/>
            </camel:when>
        </camel:choice>
        <camel:to uri="cxf:bean:yourWebServiceTargetEndpoint"/>
    </camel:route>

</camel:camelContext> 
```

根据操作名称骆驼将消息路由到相应的处理器。你可以用任何你喜欢的方式在 Camel 中发送你的消息。你只需要想想怎么做。从你的问题来看，这是我能给出的。如果您将其更新为更具体，也许我可以提供更多帮助。

**也可以看看：**

*   [使用 Spring 配置 CamelContext](http://camel.apache.org/spring.html)
*   [骆驼CXF组件](http://camel.apache.org/cxf.html)

# database - 具有公共基础的关系数据库设计表

> ID：13612405
> 
> 赞同：0
> 
> 时间：2012-11-28T18:57:01.933
> 
> 标签：database, relational

我很难找到适合这种情况的最佳设计解决方案。我有两张有共同基础的桌子。目前我的设计是这样的：我有一个订单表（公共基础）：

```
[order_table]
 order_id
 order_type
 company
 created 
```

我有另一个参考订单表的表：

```
[product_order]
 order_id fk
 product_id
 quantity
 price 
```

我有第二个参考订单表的表：

```
[special_order]
 order_id fk
 description
 price_estimate
 color
 size 
```

两个表共享我喜欢的相同 order_id。我经常需要使用该表中可用的信息对 order_table 进行大型查询，比如“company = 200”。但是对于每个结果，我还需要 product_order 或 special_order 中的数据，具体取决于它的类型。因此，我看到的唯一最佳解决方案是将查询与 order_id 上的两个表连接起来，然后过滤信息。我看到的唯一其他选择是将公共列添加到每个表中，但是之后我将进行大量重组以使它们按正确的顺序排列。

有没有更好的方法来组织数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:11:49.977

那么这些额外的表是特定订单ID（1：1）的额外属性吗？

我会考虑将所有字段添加到公用表中，或者至少将最常用的子表中的字段添加到公共表中。

如果不合适，您可能希望将“类型”添加到公用表中，并让触发器管理相关记录的插入/删除，以避免与孤儿等混淆。

使用带有左连接的视图（不是更好吗？）来获取不同的类型。

# javascript - 带有 FireFox 的 Webgl 给出了一个无效的参数错误

> ID：13612406
> 
> 赞同：2
> 
> 时间：2012-11-28T18:57:11.020
> 
> 标签：javascript, webgl

出于某种原因，这一行在 FireFox 中给出了一个无效的参数错误，但它在 Chrome 上运行得很好。

```
gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices0), gl.STATIC_DRAW); 
```

vertices0 是一个包含所有顶点的 javascript 数组。在调用 bufferdata 之前，我已经提醒了一些元素，并且 vertices0 数组肯定具有正确的数据。

# java - Java，将单元格内容更改为同一行中另一个单元格的函数

> ID：13612407
> 
> 赞同：3
> 
> 时间：2012-11-28T18:57:17.113
> 
> 标签：java, swing, jtable, tablemodel

我需要一些帮助来解决我的问题。我有一个表，例如一个双列和一个字符串列。如果双列中的值为负数，则字符串应为“负数”。反之，如果值为正，则字符串应为“正”。现在的问题是，如果我在 jTable 中编辑双精度值，字符串也应该被更新。

**更新我的问题，实际代码如下所示：** 但它不起作用，因为在我编辑第一列值后，第二列中的字符串不会更新。它仅在我第一次启动程序时才有效。

```
import java.util.Vector;
import javax.swing.*;
import javax.swing.event.TableModelEvent;
import javax.swing.event.TableModelListener;
import javax.swing.table.*;

public class ExampleRemoveAddRows extends JFrame {

    private Object[] columnNames = {"Double", "positiv / negativ"};
    private Object[][] data = {
        {new Double(10.0), "positiv"},
        {new Double(-10.0), "negativ"},
        {new Double(20.0), "positiv"},
        {new Double(-30.0), "negativ"}
    };
    private JTable table;
    private DefaultTableModel model;

    public ExampleRemoveAddRows() {
        model = new DefaultTableModel(data, columnNames) {
            @Override
            public Class getColumnClass(int column) {
                return getValueAt(0, column).getClass();
            }
            @Override
            public Object getValueAt(int row, int column) {  
                if (column == 1) {
                    double number = Double.parseDouble(this.getValueAt(row, 0).toString());
                    System.out.println(number);
                    System.out.println("good");
                    System.out.println((number < 0) ? "negativ" : "positiv");
                    return "C: "+ this.getValueAt(row, 0);//((number < 0) ? "negativ" : "positiv");
                } else {
                    return super.getValueAt(row, column);
                }
            }  
        };
        table = new JTable(model);        
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane scrollPane = new JScrollPane(table);
        add(scrollPane);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                ExampleRemoveAddRows frame = new ExampleRemoveAddRows();
                frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

谢谢你的帮助。

山姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T14:41:51.333

我已经修改了您的 sscce 以显示[此处](https://stackoverflow.com/a/7356518/230513)建议的替代方法。请注意获得`Double`常数的替代方法。我还重新考虑了`String`约束。

附录：在有用的评论中，@kleopatra 观察到直接查询模型总是会产生正确的结果，但是 a`TableModelListener`只会看到对第 0 列的更改，而不是第 1 列。简单的权宜之计是使第 1 列*不可*编辑，作为它的值完全取决于第 0 列。

```
@Override
public boolean isCellEditable(int row, int col) {
    return col == 0;
} 
```

下面的第一个示例使用`DefaultTableModel`：

```
import javax.swing.*;
import javax.swing.table.*;

/** @see https://stackoverflow.com/a/13628183/230513 */
public class ExampleRemoveAddRows extends JFrame {

    public static final String NEGATIVE = "negativ";
    public static final String POSITIVE = "positiv";
    private Object[] columnNames = {"Double", POSITIVE + " / " + NEGATIVE};
    private Object[][] data = {
        {10d, null},
        {-10.0, null},
        {Double.valueOf(30), null},
        {Double.valueOf("-30"), null}
    };
    private JTable table;
    private DefaultTableModel model;

    public ExampleRemoveAddRows() {
        model = new DefaultTableModel(data, columnNames) {

            @Override
            public Class getColumnClass(int column) {
                return getValueAt(0, column).getClass();
            }

            @Override
            public boolean isCellEditable(int row, int col) {
                return col == 0;
            }

            @Override
            public Object getValueAt(int row, int col) {
                if (col == 1) {
                    double number = (Double) this.getValueAt(row, 0);
                    return (number < 0) ? NEGATIVE : POSITIVE;
                } else {
                    return super.getValueAt(row, col);
                }
            }

            @Override
            public void setValueAt(Object aValue, int row, int col) {
                super.setValueAt(aValue, row, col);
                fireTableCellUpdated(row, 1); // may have changed
            }
        };
        table = new JTable(model);
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane scrollPane = new JScrollPane(table);
        add(scrollPane);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                ExampleRemoveAddRows frame = new ExampleRemoveAddRows();
                frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

这种变化`extends AbstractTableModel`：

```
import java.awt.EventQueue;
import java.util.ArrayList;
import java.util.List;
import javax.swing.*;
import javax.swing.table.*;

/**
* @see https://stackoverflow.com/a/13628183/230513
*/
public class ExampleRemoveAddRows extends JFrame {

    public static final String NEGATIVE = "negativ";
    public static final String POSITIVE = "positiv";

    public ExampleRemoveAddRows() {
        DoubleModel model = new DoubleModel();
        model.add(10.1);
        model.add(-10.2);
        model.add(Double.valueOf(30.1));
        model.add(Double.valueOf("-30.2"));
        JTable table = new JTable(model);
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane scrollPane = new JScrollPane(table);
        add(scrollPane);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                ExampleRemoveAddRows frame = new ExampleRemoveAddRows();
                frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    private class DoubleModel extends AbstractTableModel {

        List<Double> data = new ArrayList<Double>();

        public void add(Double d) {
            data.add(d);
        }

        @Override
        public int getRowCount() {
            return data.size();
        }

        @Override
        public int getColumnCount() {
            return 2;
        }

        @Override
        public String getColumnName(int col) {
            if (col == 0) {
                return "Double";
            } else {
                return POSITIVE + " / " + NEGATIVE;
            }
        }

        @Override
        public Class<?> getColumnClass(int col) {
            if (col == 0) {
                return Double.class;
            } else {
                return String.class;
            }
        }

        @Override
        public boolean isCellEditable(int row, int col) {
            return col == 0;
        }

        @Override
        public Object getValueAt(int row, int col) {
            if (col == 0) {
                return data.get(row);
            } else {
                double number = (Double) this.getValueAt(row, 0);
                return (number < 0) ? NEGATIVE : POSITIVE;
            }
        }

        @Override
        public void setValueAt(Object aValue, int row, int col) {
            if (col == 0) {
                data.set(row, (Double) aValue);
                fireTableRowsUpdated(row, row);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T19:14:33.353

如果我没记错的话，您确实可以通过`TableModelEvent.getSource()`.

只是为了提供一个基本的例子（主要是因为一个句子的答案似乎不太像一个答案）：

```
TableModel model = (TableModel)te.getSource();
Double number = model.getValueAt(te.firstRow, 0);
model.setValueAt(((number < 0) ? "negativ":"positiv"), te.firstRow, 1); 
```

# django - Django - 更改内联表单集 textInput 大小属性

> ID：13612408
> 
> 赞同：3
> 
> 时间：2012-11-28T18:57:30.793
> 
> 标签：django, django-forms, inline-formset

我有一个只有三个字段的内联表单集：

```
class Estimate_Product_Details(models.Model):
    proposalID = models.ForeignKey(Estimate_Construction, verbose_name='Proposal ID')
    CID = models.ForeignKey(Product, verbose_name = 'CID')
    qty = models.DecimalField(max_digits = 7, decimal_places = 2, verbose_name = 'Quantity')

    def __unicode__(self):
        return u'%s -- %s' % (self.proposalID, self.CID) 
```

然后我从该模型创建一个表单：

```
class Product_Form(ModelForm):
    class Meta:
        model = Estimate_Product_Details
        fields = ('CID', 'qty')
        widgets = {
            'qty' : forms.TextInput(attrs={'size':30})
            } 
```

我的目标是让`qty`输入字段非常小（我有 30 个用于测试）。但是，当我通过内联表单集呈现此表单时，根本没有设置该属性。在我看来，这是表单集的创建：

```
 pFormSet = inlineformset_factory(Estimate_Construction, Estimate_Product_Details, form = Product_Form) 
```

我哪里错了？为什么`qty`字段大小没有变化？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T19:16:52.650

编辑：它可能应该只为输入字段设置一个类并让 CSS 分配宽度。这样你就可以将它传递给不同的客户等单独的模板。

也许不是使用`.attrs['size'] = 30`use`.attrs['class'] = 'some_class'`然后在您的 HTML 模板中定义类并在那里处理不同的大小。

这应该有效：

```
class Product_Form(ModelForm):
    def __init__(self, *args, **kwargs):
        super(Product_Form, self).__init__(*args, **kwargs)
        self.fields['qty'].widget.attrs['size'] = 30

    class Meta:
        model = Estimate_Product_Details
        fields = ('CID', 'qty') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-22T21:39:03.420

@Furbeenator 的代码也有问题。但是，在检查生成的 HTML 时，我发现该`size`属性已正确附加到`<input>`标签。

问题：我使用的是第三方模板，`<input>`它用自己的 CSS 定义覆盖了宽度。

解决方案是将宽度作为`style`属性而不是`size`：

```
class UserProfileForm(ModelForm):
    def __init__(self, *args, **kwargs):
        super(UserProfileForm, self).__init__(*args, **kwargs)
        self.fields['company'].widget.attrs['style'] = "width:500px" 
```

此修改也适用于@Furbeenator 的视图修改。我没有尝试过 JQuery 变体（虽然模板使用了 JQuery，但我暂时没有）。

唯一的缺点是字段宽度现在是根据 CSS 单位定义的，例如像素或 em/ex。我将切换到 ex，但如果 CSS 有一个“平均字符宽度”单位会很好，这样您就可以定义这样的框来“容纳 20 个字符”等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-12T12:21:30.600

也可以为表单的每个输入添加一个 css 类名。为此，您应该将小部件 attr 添加到表单输入的定义中。像下面这样：

```
field_name = forms.CharField(label='label', max_length=100, widget=forms.TextInput(attrs={'class':'input-control'})) 
```

# javascript - 道场日历弹出

> ID：13612409
> 
> 赞同：1
> 
> 时间：2012-11-28T18:57:32.603
> 
> 标签：javascript, dojo

如何在 dojo 1.8 版中实现 dojo 日期选择器？在单击日历图标时显示下拉日历的方式应该与 dojo DateTextBox 不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:40:59.167

尝试`"dijit/CalendarLite"`通过 css 和一些 javascript 编码，您可以使 DatePicker 不同于`dijit/form/DateTextBox`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T03:37:40.693

您必须寻找[dijit/TooltipDialog](http://livedocs.dojotoolkit.org/dijit/TooltipDialog)并需要一些 dijit 之类的`"dijit/popup", "dijit/Calendar"`

或者`"dijit/form/DropDownButton" ,"dijit/Calendar"`

[看看这里会更容易。](http://jsfiddle.net/oamiamgod/sz7BX/7/)

# jquery - 在预加载器上使用 JQuery .css() 设置 CSS 背景图像

> ID：13612411
> 
> 赞同：-1
> 
> 时间：2012-11-28T18:57:41.240
> 
> 标签：jquery, css, background-image, preloader

我想设置：背景图像、背景大小和背景重复...这里的语法会怎样？

```
qLpercentage = $("<div id='qLpercentage'></div>").text("0%").css({
                    height: "40px",
                    width: "100px",
                    position: "absolute",
                    background: 'url(images/preload.gif)',
                    fontSize: "3em",
                    top: "50%",
                    left: "50%",
                    color: "#FFFFFF",
                    marginTop: "-" + (59 + qLoptions.barHeight) + "px",
                    textAlign: "center",
                    marginLeft: "-50px",
                }).appendTo(qLoverlay); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:03:18.033

当您的代码中有静态属性时，为什么要弄乱您的 javascript。

最好将它们放在一个单独的**类**中并将其添加到您的元素中。

那会干净很多。

这样你也可以指定`background image, background size, and background repeat`。

**CSS**

```
.overlay
{
    height: "40px";
    width: "100px";
    position: "absolute";
    background: 'url(images/preload.gif)' 50% 50% repeat-x ;
    background-size: 275px 125px;
    fontSize: "3em";
    top: "50%";
    left: "50%";
    color: "#FFFFFF";
    textAlign: "center";
    marginLeft: "-50px";
}​ 
```

**Javascript**

```
qLpercentage = 
    $("<div id='qLpercentage'></div>").text("0%")
    .css({
        marginTop: "-" + (59 + qLoptions.barHeight) + "px"
     })
    .addClass('overlay')
    .appendTo(qLoverlay);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:03:32.050

尝试添加这个：

```
 "background-image"  : "url(my-image.png)",
    "background-repeat" : "...",
    "background-size"   : "...", 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:04:18.480

我是正确的，它是这样的：

```
qLpercentage = $("<div id='qLpercentage'></div>").text("0%").css({
                    height: "40px",
                    width: "100px",
                    position: "absolute",
                    backgroundImage: 'url(images/preload.gif)',
                    backgroundRepeat: 'repeat-x',
                    backgroundSize: '10px 10px',
                    fontSize: "3em",
                    top: "50%",
                    left: "50%",
                    color: "#FFFFFF",
                    marginTop: "-" + (59 + qLoptions.barHeight) + "px",
                    textAlign: "center",
                    marginLeft: "-50px",
                }).appendTo(qLoverlay); 
```

# c - 为什么函数调用会导致分段错误？

> ID：13612412
> 
> 赞同：0
> 
> 时间：2012-11-28T18:57:53.057
> 
> 标签：c, segmentation-fault

请有人告诉我为什么这个函数调用会导致分段错误

**查看代码的第二部分，第一部分没有我已经调试过的错误**

**向下滚动到第二个代码片段**

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include"line.h"
main(int argc,char **argv,...)
{
  FILE *fp;
  char ch,**str=0;
  int length=0,maxlen=0,line=0;

  if(argc==2)
  fp=fopen(argv[1],"r");

  else
  {
   printf("Expexted Input Was:\"./linesort\" \"filename\"\n");
   return;
  }

  if(fp==NULL)
  {
   printf("Source file not found ,Please Check If It Really Exists in Expected path\n");
   return;
  }

   printf("%ld:",ftell(fp));

  while((ch=fgetc(fp))!=EOF)
  {
     length=0;
     while(ch!='\n')
     {
     printf("%c",ch);
     ch=fgetc(fp);
     length++;
     }

    printf("len:%d\n",length);
    if(maxlen<length)
    maxlen=length;
    line++;
  }

printf("maxlen:%d\n",maxlen);
printf("No.of lines:%d\n",line);
fseek(fp,0,0);
str=(char **)malloc(line*sizeof(char *));
printf("__%ld____\n",str);

for(length=0;length<line;length++)
{
 printf("%d\t",length);
 str[length]=malloc((maxlen+1)*sizeof(char));
 printf("__%ld____\n",str[length]);
 fgets(str[length],maxlen+1,fp);
 puts(str[length]);
}

fclose(fp);

while(1)
{
   printf(" \n'a':for alphabet wise \t'c':for character wise\t 'e':to exit:\t");
   ch=getchar();
   getchar(); 
```

**///////此部分导致段错误，以下代码是以前代码的延续**

**看看 alpha(str,maxlen,line);**

```
 switch(ch)
   {
      case 'a':  alpha(str,maxlen,line);///////////Causes Segmentation Fault?Why?
                 break;
    //case 'c':chara(str);
    //    break;
    case 'e':exit(0);
    default :;
   }
   }
 } 
```

//// **alpha.c(被调用的函数在这个文件中)不要介意这个部分是否有逻辑错误**

```
 #include"line.h"
   void alpha(char **p,int maxlen,int line)
    {
     int i=0;
     char *buffer;
     printf("in alpha");
     buffer = (char *)malloc((maxlen+1)*sizeof(char));
     while(i<line)
     {
      if(strcmp(p[i],p[i+1])==+1)
      {
        strcpy(buffer,p[i+1]);
         strcpy(p[i+1],p[i]);
         strcpy(p[i],buffer);
        }
      i++;
     }
      printf("%s\t",p[3]);
     } 
```

///////**我的头文件（line.h）包含这些声明**

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
void alpha(char **p,int maxlen,int line);
void chara(char **p,int maxlen,int line); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:29:21.430

在功能`alpha()`：

```
while(i < (line - 1))
{
    if(strcmp(p[i],p[i+1])==+1)
    {
        strcpy(buffer,p[i+1]);
        strcpy(p[i+1],p[i]);
        strcpy(p[i],buffer);
    }
    i++;
} 
```

最后一行与任何下一行都不匹配...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:21:54.797

在 eclipse 或 Visual Studio 中创建一个新的 C 项目并在其上运行调试器。查看执行的最后一行是什么。使用调试器查看变量，看看什么是无效的以及什么可能导致它。

此外，您还没有在应该打开的文件中发布任何示例输入。

# css - 当前上下文中不存在名称“媒体”

> ID：13612413
> 
> 赞同：56
> 
> 时间：2012-11-28T18:57:53.787
> 
> 标签：css, asp.net-mvc, html, asp.net-mvc-3

在 ASP.NET MVC 3 razor 视图中，我有代码：

```
<!DOCTYPE html>
<html>
<head>
 <style type="text/css">
    @media print
    {
    table { page-break-inside:auto; width: 100%; }
    tr    { page-break-inside:avoid; page-break-after:auto }
    thead { display:table-header-group }
    tfoot { display:table-footer-group }
    }
 </style>
</head>
<body>
<table> 
```

但是我得到了错误：

```
The name 'media' does not exist in the current context. 
```

谢谢。

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-11-28T19:01:02.647

The`@`是 Razor 中的保留字符。但是您可以使用以下方法逃避它`@@`：

```
@@media print 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-28T18:59:27.780

在剃刀看来，`@`是代码之前的神奇角色。

在您的情况下，请使用 2 `@@`。否则剃刀会认为它是一些代码/表达式。

```
@@media print. 
```

或者，您也可以使用`Html.Raw`方法。

```
@Html.Raw("@")media print 
```

您可以在打印其中包含 twitter 句柄名称时执行相同操作`@`。

[这](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3razor.aspx)是一个很好的 msdn 链接，可以了解有关剃刀语法的更多信息，[这](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx)是来自 phil hack的链接

# javascript - 将 span id 文本转换为链接并显示为文本

> ID：13612416
> 
> 赞同：-2
> 
> 时间：2012-11-28T18:58:18.453
> 
> 标签：javascript, html, jsp

场景是：用户从下拉列表中选择一个条目。参考相关条目，我将为现有的 webpath 创建一个新前缀。但我遇到的问题，不会解释为链接部分，所以不会生成链接！用例：如果用户从下拉列表中选择链接1，结果应该是：https://link1//web/sso/bw/ostrfer.jsp（作为链接和文本显示）

你能帮我怎么做到这一点吗？

非常感谢您的帮助！:)

JS：

```
function output (choice) {

 var index =  choice.selectedIndex;
 var prefix = "";

  if(index == 1) 
prefix = "https://link1";

   else if (index == 2) 
prefix = "https://link2;    

  else if (index == 3) 
prefix = "https://link3";   

  else if (index == 4) 
prefix = "https://link4";   

  else if (index == 5) 
prefix = ""https://link5";

document.getElementById("url").innerHTML = praefix;

} 
```

HTML：

```
 <body>

   <form>
    <p>
 <select id = "list" name = "list" onchange ='output(this.form.liste);' >

<option></option>
<option>link1</option>
<option>link2</option>
<option>link3</option>
<option>link4</option>
<option>link5</option>

</select>

</p>

</form>

<a href=<span id = "url"></span>/web/sso/bw/ostrfer.jsp> <span id = "url"></span>    /web/sso/bw/ostrfer.jsp</a>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:17:51.203

您可以存储此代码段：

```
/web/sso/bw/ostrfer.jsp 
```

作为一个常数，像这样：

```
var uri = "/web/sso/bw/ostrfer.jsp"; 
```

然后，当用户选择链接时，您可以像这样附加它：

```
var elem = document.getElementById("url");
elem.setAttribute('href', prefix + uri); 
```

这应该使用新的 url 更新锚标记的“href”属性。

[我设置了一个测试示例，以便您可以在此Fiddle](http://jsfiddle.net/brYdu/)中看到它的实际效果。如果您使用浏览器开发人员工具检查链接，您可以看到在执行代码后 href（最初为空字符串“”）已更新为“https://link1/web/sso/bw/ostrfer.jsp ”。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:04:51.763

您有多个导致问题的语法错误：

第一的

```
prefix = "https://link2;
                       ^ missing close quote here 
```

第二

```
prefix = ""https://link5";
          ^ remove the extra quote here 
```

第三

```
document.getElementById("url").innerHTML = praefix;
                                           ^ should be prefix 
```

第四

```
<select id = "list" name = "list" onchange ='output(this.form.liste);' >
                                                              ^ should be list or just 'this' 
```

即使存在语法错误，您的代码仍然不正确 -`<span>`在`href`.`<a>`

**[试试这个 jsFiddle Demo](http://jsfiddle.net/gG9bf/)** - 我改变了代码的工作方式，它不使用跨度。

**完整的固定代码：**

```
<script>
function output () {

 var index =  this.selectedIndex;
 var prefix = "";
 var suffix = "/web/sso/bw/ostrfer.jsp";

 prefix = "https://" + this.value;

var link = document.getElementById("url");

link.href = prefix + suffix;
link.innerHTML = prefix + suffix;

}

window.onload = function()
{
    document.getElementById("list").onchange = output;
}​
</script>

<form>
<p>
 <select id = "list" name = "list" >

<option></option>
<option>link1</option>
<option>link2</option>
<option>link3</option>
<option>link4</option>
<option>link5</option>

</select>
</p>

</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:05:00.610

这个问题很不清楚，这行得通吗？

```
document.getElementById("url").innerHTML = prefix + document.getElementById("url").innerHTML; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T19:13:45.793

看这个演示：http: [//jsfiddle.net/JFqrH/3/](http://jsfiddle.net/JFqrH/3/)

HTML：

```
<form>
    <p>
       <select id = "list" name = "list" onchange ='output(this);' >    
          <option></option>
          <option>link1</option>
          <option>link2</option>
          <option>link3</option>
          <option>link4</option>
          <option>link5</option>
       </select>
   </p>
   <a id="url" href="/web/sso/bw/ostrfer.jsp">/web/sso/bw/ostrfer.jsp</a>
   <a id="url1" href="/web/sso/bw/ostrfer.jsp">/web/sso/bw/ostrfer1.jsp</a>
   <a id="url2" href="/web/sso/bw/ostrfer.jsp">/web/sso/bw/ostrfer2.jsp</a>
</form>​ 
```

JS：

```
function output (choice) {
   var index =  choice.selectedIndex;
   var prefix = "";
   if(index == 1) 
     prefix = "https://link1";    
   else if (index == 2) 
     prefix = "https://link2";        
  else if (index == 3) 
    prefix = "https://link3";       
  else if (index == 4) 
    prefix = "https://link4";       
  else if (index == 5) 
    prefix = "https://link5";    

   updateLink(document.getElementById("url"), prefix);
   updateLink(document.getElementById("url1"), prefix);
   updateLink(document.getElementById("url2"), prefix);
}​
function updateLink(url, prefix) {
   if(!url.getAttribute("postfix")) {// need to save orignal href as it will be replaced later
        url.setAttribute("postfix", url.getAttribute("href"));                
   }
   var postfix = url.getAttribute("postfix");
   url.innerHTML = prefix + postfix;
   url.href = prefix + postfix;    

} 
```

您的代码中有多个语法错误。加`a href=<span id = "url"></span>`号是废话。它行不通。相反，您应该使用属性（请参阅[getAttribute](https://developer.mozilla.org/en-US/docs/DOM/element.getAttribute) / [setAttribute](https://developer.mozilla.org/en-US/docs/DOM/element.setAttribute)）。此外，使用 swithc 语句而不是 if/else 更简单。另一件事：`onchange=output(this.form.liste);`- 而不是这个，你可以使用`onchange=output(this);`它，因为它已经指向你的下拉元素。

# hadoop - 将 HUE 界面语言设置/强制为英语 (Hadoop/Cloudera)

> ID：13612418
> 
> 赞同：1
> 
> 时间：2012-11-28T18:58:28.730
> 
> 标签：hadoop, cloudera, hue

由于某种原因，当我从我的机器访问时，hue 界面语言是德语。

（德语设置，但英文浏览器和操作系统）

如何强制色相始终显示英文？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T01:56:48.140

Hue 采用浏览器发送的首选语言环境。您浏览器中的德语区域设置可能比英语区域设置的优先级更高。

[这篇文章](http://www.w3.org/International/questions/qa-lang-priorities.en.php#changing)解释了你可以在哪里改变它。

# servlets - Jetty Filter 修改响应 - java.lang.IllegalStateException: WRITER

> ID：13612420
> 
> 赞同：11
> 
> 时间：2012-11-28T18:58:40.590
> 
> 标签：servlets, jetty, servlet-filters

我正在尝试修改过滤器中的 http 响应并收到以下异常

> java.lang.IllegalStateException：org.eclipse.jetty.servlets 的 javax.servlet.ServletResponseWrapper.getOutputStream(ServletResponseWrapper.java:142) 的 org.eclipse.jetty.server.Response.getOutputStream(Response.java:657) 的 WRITER。 org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:643) 的 ProxyServlet.service(ProxyServlet.java:414) org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1331)在 com.cisco.vsx.node.proxy.http.RegexFilter.doFilter(RegexFilter.java:36)

我正在使用 SelectChannelSelector 和 ProxyServlet.Transparent 代理。

下面是测试类的片段

```
ServletContextHandler context = new ServletContextHandler(ServletContextHandler.SESSIONS);
context.setContextPath("/");

ProxyServlet.Transparent p1 = new ProxyServlet.Transparent("/proxy",
    "www.cisco.com", 80);
ServletHolder servletHolder = new ServletHolder(p1);
context.addServlet(servletHolder, "/proxy/*"); 
context.addFilter(new FilterHolder(RegexFilter.class), "/*", null);

server.setHandler(context);

server.start();
server.join(); 
```

这是过滤器类的代码

```
PrintWriter out = response.getWriter();
CharResponseWrapper wrapper = new CharResponseWrapper((HttpServletResponse) response);

chain.doFilter(request, wrapper);

String html = wrapper.toString();
if (regex != null && response.getContentType() != null 
        && response.getContentType().startsWith("text/html")) {
    Matcher matcher = regex.matcher(html);
    Map<Integer, Integer> matches = new LinkedHashMap<Integer, Integer>();
    while (matcher.find()) {
        int start = matcher.start(1);
        System.out.println("START" + start);
        int end = matcher.end(1);
        System.out.println("END" + end);
        matches.put(start, end - start);
    }
    StringBuffer sb = new StringBuffer();
    int start = 0;
    for (int startIndex : matches.keySet()) {
        String str = html.substring(start, startIndex) + "/proxy/";
        sb.append(str);
        start = startIndex + matches.get(startIndex);
    }
    html = sb.toString();
}

response.setContentLength(html.getBytes().length);
out.write(html); 
```

不知道哪里出了问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-07-09T08:03:31.283

您的 Jetty Response 可以采用两种（技术上是三种）不同的模式。一种是writer模式，一种是streaming模式（第三种基本是未定模式）。

如果您调用`getWriter()`“未决定”的响应，则将其置于编写器模式，这是无法逆转的。如果稍后尝试在流模式下使用此响应（通过调用`getOutputStream()`），则会抛出您看到的异常。

要解决此问题，请不要在编写器模式下使用此响应，而是在 OutputStream 上“做你的事”。如果您稍后（在 doChain 之后）访问作者，您会得到逆异常

> java.lang.IllegalStateException：流

反而。

# c# - 谁能解释什么是私有只读 IStudentRepository _studentRepository？为什么要采取？

> ID：13612421
> 
> 赞同：0
> 
> 时间：2012-11-28T18:58:42.740
> 
> 标签：c#, dependency-injection, asp.net-mvc-4, inversion-of-control

有两个文件：一个给出接口如下：

IStudentInterface.cs

```
 public interface IStudentService
{
    IEnumerable<Student> GetStudents();
    Student GetStudentById(int id);
    void CreateStudent(Student student);
    void UpdateStudent(Student student);
    void DeleteStudent(int id);
    void SaveStudent();
} 
```

学生服务.cs：

```
 public class StudentService : IStudentService
  {
    private readonly IStudentRepository _studentRepository;
    private readonly IUnitOfWork _unitOfWork;
    public StudentService(IStudentRepository studentRepository, IUnitOfWork unitOfWork)
    {
        this._studentRepository = studentRepository;
        this._unitOfWork = unitOfWork;
    }  
    #region IStudentService Members

    public IEnumerable<Student> GetStudents()
    {
        var students = _studentRepository.GetAll();
        return students;
    }

    public Student GetStudentById(int id)
    {
        var student = _studentRepository.GetById(id);
        return student;
    }

    public void CreateStudent(Student student)
    {
        _studentRepository.Add(student);
        _unitOfWork.Commit();
    }

    public void DeleteStudent(int id)
    {
        var student = _studentRepository.GetById(id);
        _studentRepository.Delete(student);
        _unitOfWork.Commit();
    }

    public void UpdateStudent(Student student)
    {
        _studentRepository.Update(student);
        _unitOfWork.Commit();
    }

    public void SaveStudent()
    {
        _unitOfWork.Commit();
    }

    #endregion
} 
```

请解释一下为什么要`_studentRepository`创建私有变量？我们也可以代替它来完成我们的任务。为什么所有这些事情都是这样完成的？请解释一下这个概念？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T20:58:53.277

`IStudentRepository``StudentService`是对象执行其工作所依赖的一组功能（合同、抽象、服务 - 它可以用各种术语来表示） 。这`StudentService`也取决于`IUnitOfWork`执行其工作。

`private readonly IStudentRepository _studentRepository;`是一个变量声明，用于存储实现合同的对象的实例。它是私有的，因为它只需要在`StudentService`类中访问，它是只读的，因为它是在类的构造函数中设置的，并且不需要在任何“StudentService”实例的生命周期后期修改。

控制反转的概念是，不是`StudentService`负责定位其依赖项的实现并实例化它们并管理它们的生命周期，而是由外部的一些其他代码`StudentService`承担这些责任。这是可取的，因为它减少了`StudentService`类的关注。

为了更容易应用控制反转，经常使用容器。容器提供了一种方式来说明哪些实现应该用于接口或契约，并且还提供了一种自动提供这些实现的机制。最常见的方式是通过构造函数注入。IoC 容器将创建`StudentService`该类，并且还将创建构造它所需的依赖项。在构造函数中，您可以将依赖对象存储在类级变量中，以便在调用方法时使用它们来执行工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T21:19:52.387

我觉得qes的答案很明确！

IStudentService 是一个接口，它不包含具体的方法，只是定义了实现必须具备和必须做的事情。

StudentService 类是实现，您已经知道需要有 Create、Update、Delete 和 Save 方法，因为它们在接口中。所以你会在这个类中找到这个具体的方法。

_studentRepository 是一个字段，而不是一个属性，因此您不希望其他人触摸它，这就是它是私有的原因。但也是只读的，因为它需要在初始化 StudentServices 类时定义，并且它需要保持与创建对象时一样。

我希望这个答案能补充上一个答案。

# c++ - 异常声明错误

> ID：13612427
> 
> 赞同：1
> 
> 时间：2012-11-28T18:59:03.087
> 
> 标签：c++

这似乎是一个非常容易解决的问题，但我无法理解它的来源。

任何帮助都非常感谢！

以下 2 行代码分别产生以下错误。

```
vector <spades::player> players(4, player());
vector <spades::card> deck(52,card());

error: 'player' was not declared in this scope
error: 'card' was not declared in this scope 
```

下面是我的card.cpp

```
#include <iostream>
#include <sys/ioctl.h>
#include <cstdio>
#include <unistd.h>
#include <locale.h>
#include <ncursesw/ncurses.h>

#include "card.h"
namespace spades {
card::card()
{
    cardSuit = 0;
    cardNum = 0;
}

card::card(int suit, int number)
{
    cardSuit = suit;
    cardNum = number;
}
} 
```

下面是我的 player.cpp

```
#include <iostream> // Stream declarations
#include <vector> //Vectors used to store deck and players hands
#include <string> //String declarations
#include <algorithm> //Shuffle Method
#include <sys/ioctl.h>
#include <cstdio>
#include <unistd.h>
#include <locale.h>
#include <ncursesw/ncurses.h>
#include "player.h"
namespace spades {
using namespace std;

player::player() {
    score =0; //total score
    bid = NULL; //bid for that round
    tricksTaken = 0; //score for thast round
    sandBag = 0; //the number of points you win, more than what you bid, every 10th bag = -100
    doubleNil = false;
    for(int i=0; i<13; i++)
        hand.push_back(card());
}

void player::addCard(spades::card b){
    for (int i=0; i<hand.size(); i++){
        //compare card being played to the ones in your hand to search and determine which one to erase
        if((hand.at(i).getCardNum() == 0) &&
            (hand.at(i).getSuit() == 0))
        {
            hand.at(i).setCardNum(b.getCardNum());
            hand.at(i).setSuit(b.getSuit());
            return;
        }
    }
}

void player::removeCard(spades::card a) {
    for (int i=0; i<hand.size(); i++){
        //compare card being played to the ones in your hand to search and determine which one to erase
        if((hand.at(i).getCardNum() == a.getCardNum()) &&
            (hand.at(i).getSuit() == a.getSuit()))
        {
            hand.at(i).setCardNum(0);
            hand.at(i).setSuit(0);
            return;
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T19:05:56.537

编译器实际上是在抱怨您传递给向量构造函数的参数。您在构造函数参数中指定了`player()`and `card()`，而很明显您的类型实际上被命名为`spades::player`and `spades::card`。`spades::`您在模板参数中正确指定了该部分。为什么你省略`spades::`了构造函数参数中的部分？

它应该是

```
vector <spades::player> players(4, spades::player());
vector <spades::card> deck(52, spades::card()); 
```

应该注意的是，显式参数是不必要的，所以你可以这样做

```
vector <spades::player> players(4);
vector <spades::card> deck(52); 
```

并得到相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:16:25.317

你也不需要

```
 namespace spades {

    } 
```

块在 player.cpp 中，仅围绕头文件中的类定义。也许你会

```
 using namespace spades; 
```

# mysql - MySQL 查询重新设计

> ID：13612428
> 
> 赞同：1
> 
> 时间：2012-11-28T18:59:07.920
> 
> 标签：mysql

我有以下查询从`notes`表中选择输入（例如：bob）不在`orders`表中的所有内容。

```
SELECT * FROM `notes` WHERE notes.customer_email NOT IN 
(SELECT customers_email_address FROM orders) 
AND ((customer_phone LIKE '%bob%') 
OR (customer_name LIKE '%bob%') 
OR (customer_email LIKE '%bob%')) 
AND customers_id IS NULL 
GROUP BY `customer_email` 
ORDER BY `customer_name` 
DESC LIMIT 50 
```

这个查询的胖男孩在我的开发机器上花费了大约 80 秒，在实时服务器上花费了大约 7 秒。

两个问题：

1.  我对这个查询做错了什么？（我需要从错误中吸取教训）
2.  如何改进此查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T19:21:16.497

尝试使用连接：

```
SELECT *
FROM
  `notes` left join orders
   on notes.customer_email=orders.customers_email_address
WHERE
  orders.customers_email_address is null
  AND notes.customers_id IS NULL 
  AND ((customer_phone LIKE '%bob%') 
        OR (customer_name LIKE '%bob%') 
        OR (customer_email LIKE '%bob%')) 
ORDER BY `customer_name` 
DESC LIMIT 50 
```

它们通常比 IN/NOT IN 子句快。而且，我不知道你为什么在这里放一个 group by 子句。

# jboss - 如何在 jboss 4.2.3 中的集群中的每个实例上调用方法？

> ID：13612430
> 
> 赞同：1
> 
> 时间：2012-11-28T18:59:20.853
> 
> 标签：jboss, cluster-computing, jboss-4.2.x

从带有@Service 和@Management 注释的pojo 中，我想在集群中的每个实例上调用一个方法。

```
@Service(objectName=myClass.OBJECT_NAME)
@Management(MyInterface.class)
public class MyClass implements myInterface
{
  @Override
  public void callEverywhere () throws Exception {
     final ArrayList results = partition.getHAPartition().callMethodOnCluster(OBJECT_NAME,"methodName", new Object[] {}, new Class[] {}, false);
  }
  public String myMethod() {
    return "Hello";
  }
} 
```

导致方法没有被调用。在引擎盖下，看起来我得到了 a`NoHandlerForRPC`而不是调用该方法。

我知道我可以使用`HAServiceMBeanSupport`但有理由想要使用 POJO。

我可以在 jboss 4.2.3 中使用 pojos 执行此操作吗？

# c# - Silverlight Datagrid 按选择值分组

> ID：13612432
> 
> 赞同：0
> 
> 时间：2012-11-28T18:59:29.297
> 
> 标签：c#, silverlight, xaml

假设我将以下值加载到数据网格中

```
ID  |  Desc
------------------------ 
32     Red Cat
33     Blue Dog
34     Red Dog
37     Green Zebra
42     Reddish Snake
47     Greenlike Gorilla 
```

我想按描述中指定的开始颜色对我的数据网格上的值进行分组。所以会是这样

```
ID  |  Desc
----------------------------
Red:
 32     Red Cat
 34     Red Dog
 42     Reddish Snake
Blue:
 33     Blue Dog
Green:
 37     Green Zebra
 47     Greenlike Gorilla 
```

我的代码后面有这个：

```
PagedCollectionView pageView = new PagedCollectionView(IEnumerable<MyClass> main);
pageView.GroupDescriptions.Add(new PropertyGroupDescription("")); //?????
this.MyGrid.ItemsSource = pageView; 
```

我将如何指定分组参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:12:31.033

[您可以向`IValueConverter`](http://msdn.microsoft.com/en-us/library/ms597591.aspx)GroupDescription 提供一个。所以使用：

```
new PropertyGroupDescription("Color", new StringToColorConverter()) 
```

其中**StringToColorConverter**将**Desc**属性转换为颜色字符串：

```
public class StringToColorConverter: IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if ((string)value == null) return null;
        return ((string)value).Split(new [] { ' ' }).FirstOrDefault();    
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

*替代方法*

如果您能够修改该类，那么您可以添加一个简单的派生属性`Color`。

```
class MyClass
{
    public string Desc { get; set; }
    public int ID { get; set; }

    public string Color
    {
        get
        {
            return Desc.Split(new [] { ' ' }).FirstOrDefault();    
        }
    }
} 
```

然后你就可以分组了。

```
new PropertyGroupDescription("Color") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:44:57.380

PropertyGroupDescription 只是[GroupDescription](http://msdn.microsoft.com/en-us/library/system.componentmodel.groupdescription%28v=vs.95%29.aspx)的一种实现。你可以自己滚动。事实上，我们可以为一般目的滚动一个：

```
public class LambdaGroupDescription<T> : GroupDescription
{
    public Func<T, object> GroupDelegate { get; set; }

    public LambdaGroupDescription(Func<T, object> groupDelegate)
    {
        this.GroupDelegate = groupDelegate;
    }

    public override object GroupNameFromItem(object item, int level, System.Globalization.CultureInfo culture)
    {
        return this.GroupDelegate((T)item);
    }
} 
```

然后将其添加到 PagedCollectionView：

```
var pageView = new PagedCollectionView(items);
        pageView.GroupDescriptions.Add(new LambdaGroupDescription<ViewModel>(
            vm => vm.Description.Split(' ').FirstOrDefault()    
        ));
        this.DataGrid.ItemsSource = pageView; 
```

**编辑**

看来您的分组逻辑比简单的拆分要复杂一些。您可以尝试以下方法：

```
public string FormatColor(string color)
    {
        if (string.IsNullOrWhiteSpace(color)) return null;

        if (color.ToUpperInvariant().StartsWith("RED"))
            return "Red";

        if (color.ToUpperInvariant().StartsWith("GREEN"))
            return "Green";

        return color;
    } 
```

进而：

```
pageView.GroupDescriptions.Add(new LambdaGroupDescription<ViewModel>(
            vm => FormatColor(vm.Description.Split(' ').FirstOrDefault() as string)
        )); 
```

在 FormatColor 方法中，您还可以使用 Dictionary 将“奇怪”颜色值映射到已知颜色值：

```
 private static readonly Dictionary<string, string> ColorMap = new Dictionary<string, string>(){
        {"Greenlike", "Green"},
        {"Reddish", "Red"},
    };

public string FormatColor(string color)
    {
        if (string.IsNullOrWhiteSpace(color)) return null;

        if (ColorMap.ContainsKey(color))
            return ColorMap[color];

        return color;
    } 
```

# python - 为什么方法 sys.exit()、exit()、raise SystemExit 不起作用？

> ID：13612434
> 
> 赞同：7
> 
> 时间：2012-11-28T18:59:43.993
> 
> 标签：python, multithreading, sockets, exit, sys

我需要一个替代方法来在线程函数中杀死 python 脚本。我的意图是在客户端输入 0 时终止服务器......这是否因为线程尚未终止而不起作用？这是我的代码：

```
socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM);
print 'Socket created'

try:
    socket.bind((HOST, PORT))
except socket.error, message:
    print 'Bind statement failed. ERROR: ' + str(message[0]) + ' Message: ' +    message[1]
    sys.exit()

print 'Socket Binding Successful'

socket.listen(10)
print 'Socket is currently listening'

def clientThread(connection):
    while 1:
        data = connect.recv(1024)
        try:
            quit = int(data)
        except:
            quit = 3
        if quit == 0:
            print 'Closing the connection and socket...'
            connect.close()
            socket.close()
            sys.exit(); //Alternative needed here...
            break
        reply = 'Ok....' + data
        if not data:
            break
        connect.sendall(reply)

while 1: #forever loop
    connect, address = socket.accept()
    print 'Just connected with ' + address[0] + ' : ' + str(address[1])
    start_new_thread(clientThread, (connect,))

socket.close() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T19:03:19.737

问题是，`sys.exit()`所做的就是提高`SystemExit`。由于这发生在工作线程中，因此效果是停止该线程（异常不会跨线程传播）。

您可以尝试向主线程发出脚本需要终止的信号，或者通过您自己的某种机制，或者通过调用[`thread.interrupt_main()`](http://docs.python.org/2/library/thread.html#thread.interrupt_main).

对于大锤方法，请调用[`os._exit()`](http://docs.python.org/2/library/os.html#os._exit).

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-11-28T19:05:13.910

你可以，`raise SystemExit`但这似乎真的很苛刻。也许某些协作线程的方法会起作用（即：带有哨兵的队列）

# python - 如何在python中实现man-like帮助页面（python shell已经有了）

> ID：13612437
> 
> 赞同：1
> 
> 时间：2012-11-28T18:59:49.030
> 
> 标签：python, manpage

在 python 交互式 shell 中，如果你这样做了

```
>>> import os
>>> help(os) 
```

你会得到一个类似`linux` `man`的帮助页面。有人知道如何在纯python中做到这一点吗？现在我已经实现了一个类似的 shell by`raw_input`和 python`readline`模块。但我完全不知道如何做帮助页面。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T19:05:47.910

查看 的代码`pydoc`，即：

```
 Python27\Lib\pydoc.py 
```

（这是针对 Windows 的，当然在其他任何地方斜线都是相反的。）

Helper 类的`help`成员函数调用`doc`函数调用`render_doc`，这可能是你想要的函数。

```
import sys
import pydoc

plainSysDoc = pydoc.plain((pydoc.render_doc(sys)))
print plainSysDoc 
```

pydoc.plain 是一个格式化函数（删除粗体格式）。

作为旁注，在事实检查这个答案时，我了解到可以从命令行调用 pydoc：

```
pydoc sys 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:20:27.430

好的，我有一个简单的方法。只需通过子流程调用'man'并将我的帮助文档分别制作到手册页

# java - 使用巨大的堆空间进行字符串替换

> ID：13612441
> 
> 赞同：5
> 
> 时间：2012-11-28T19:00:00.153
> 
> 标签：java

我正在做一个 xml 解析并做一些`replaceAll`使用大量内存空间的字符串，如下图所示。

代码如下：

```
private final String getText() {
  // special handling for apostrophe encoding
  // site will expect both &#39; , &apos; and %27.
  // change %27 or &#39;or &apos; to '
  return _text.toString().trim().replaceAll("&apos;", "'")
            .replaceAll("&#39;", "'").replaceAll("%27", "'");
} 
```

该`getText()`方法经常被`endElement()`SAXParser 的方法调用。

任何人都可以建议如何更改此功能以使用更少的堆空间

![踪迹][1]

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T19:04:08.663

使用[`replace()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(java.lang.CharSequence,%20java.lang.CharSequence))而不是[`replaceAll()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll(java.lang.String,%20java.lang.String)). [`replaceAll()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll(java.lang.String,%20java.lang.String))使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)，你不需要它们，而且它们是开销。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T19:05:08.957

像这样使用正则表达式进行简单的字符串替换太昂贵了。我会像这样简单地构建一个 StringBuilder 实例：

```
StringBuilder sb = new StringBuilder();

while (not end of _text) {
   find next '&'
   if the next substring is in (&apos; &#39;) etc.
     append the prev portion of _text to sb
     append replacement char
     set the beginning of the chunk to the next char
}
return sb.toString(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T19:09:42.880

由于`_text`已经是`StringBuffer`您可以使用的`indexOf(String str)`and `replace(int start, int end, String str)`。这样，您根本不会创建临时`String`对象。

使用如下函数：

```
private void replace(StringBuffer buff,String toReplace,String replaceTo){
 int start;
 while ((start=buff.indexOf(toReplace))>=0)
   buff.replace(start,start+toReplace.length(),replaceTo);
} 
```

并为每个组合调用 you 中的函数`getText()`，例如：

```
String replaceTo=",";
replace(_text,"&apos;",replaceTo);
replace(_text,"&#39;",replaceTo);
replace(_text,"%27",replaceTo);
return _text.toString(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T19:56:56.207

您可以一次性完成所有 3 次替换

```
text.replaceAll("(&apos;|&39;|%27)", "'"); 
```

它比 3 次连续替换效率高 3 倍，因为每次替换都可能创建一个新字符串

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T20:22:49.910

由于您在 SAX 中获取文本，因此它必须来自这里

```
characters(char[] ch, int start, int length) 
```

您必须将这些参数保存在字段中，并且在 endElement() 上您可以将替换为

```
 StringBuilder sb = new StringBuilder();
    for (int i = start; i < length; i++) {
               // %27
        if (ch[i] == '%' && length - i > 2 && ch[i + 1] == '2' && ch[i + 2] == '7') {
                         sb.append('\'');
            i += 2;
                // &apos;
                } else if (
                   ...
                // &#39;
                } else if (
                   ...
        } else {
            sb.append(ch[i]);
        }
    }
    String res = sb.toString(); 
```

代码很长但是效率很高，还可以加trimming

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-28T19:06:03.230

您的 replaceAll 方法在 a 上调​​用`String`，它是不可变的。因此，每次修改时都必须创建一个全新的字符串（在这种情况下为 3 次）。如果您使用 a`StringBuilder`代替，您的字符串将是可变的，并且每次替换某些内容时都不需要再次分配。

顺便说一句，在 StringBuilders 中没有您需要的“替换”，因此您必须`indexOf`反复使用才能找到有问题的字符串，并`replace`根据结果进行查找。修剪（）在那里。

# c++ - 字符串验证功能出错

> ID：13612445
> 
> 赞同：0
> 
> 时间：2012-11-28T19:00:15.520
> 
> 标签：c++, string, validation

嘿，我试图验证一个字符串。基本上我想要它做的是防止用户输入字符串以外的任何内容。这是我的代码：

```
**getString**

string getString(string str)
{
    string input;
    do
    {
        cout << str.c_str() << endl;
        cin >> input;
    }
    while(!isalpha(input));
    return input;
} 
```

**错误**

```
Error   2   error LNK2019: unresolved external symbol "public: bool __thiscall Validator::getString(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)" (?getString@Validator@@QAE_NV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z) referenced in function "public: void __thiscall Player::information(void)" (?information@Player@@QAEXXZ)    C:\Users\Conor\Documents\College\DKIT - Year 2 - Repeat\DKIT - Year 2 - Semester 1 - Repeat\Games Programming\MaroonedCA2\MaroonedCA2\Player.obj    MaroonedCA2
Error   3   error LNK1120: 1 unresolved externals   C:\Users\Conor\Documents\College\DKIT - Year 2 - Repeat\DKIT - Year 2 - Semester 1 - Repeat\Games Programming\MaroonedCA2\Debug\MaroonedCA2.exe MaroonedCA2
    4   IntelliSense: no suitable conversion function from "std::string" to "int" exists    c:\Users\Conor\Documents\College\DKIT - Year 2 - Repeat\DKIT - Year 2 - Semester 1 - Repeat\Games Programming\MaroonedCA2\MaroonedCA2\Validator.cpp 72  17  MaroonedCA2 
```

**主要的**

```
cout << "What is your name ?\n";
    name = validator.getString();<------This skips.

    cout << "\nWhat is your age? ";
    age = validator.getNum();

    string character = "What is your sex M/F?";
    sex = validator.getChar(character);

    cout <<"Name:\n"<< name<<" Age:\n" << age<< " Sex:\n"<< sex <<"\n"; 
```

**新的 getString 函数。**

```
string Validator :: getString()
{
   string input;
    do 
    {
    } 
    while (
    std::find_if_not( 
        std::begin(input), //from beginning
        std::end(input), //to end
        isalpha //check for non-alpha characters
    ) != std::end(input) //continue if non-alpha character is found
);
    return input;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:27:39.387

描述的第一个问题是该函数属于一个类，但您忘记指定：

```
string Validator::getString(string str)
       ^^^^^^^^^^^ 
```

接下来，`isalpha`需要一个`int`（由于 C 的原因），据我所知，没有`std::string`. 但是，您可以使用标准算法来执行此操作：

```
do {
    ...
} while (
    std::find_if_not( 
        std::begin(input), //from beginning
        std::end(input), //to end
        isalpha //check for non-alpha characters
    ) != std::end(input) //continue if non-alpha character is found
); 
```

此`find_if_not`调用将搜索字符串并通过将返回值与字符串的结束迭代器进行比较来检查是否找到任何非字母字符。如果它们相等，则字符串是干净的。您可能还需要强制转换，`isalpha`因为它需要一个谓词`char`，而不是一个`int`。

有关使用此算法的一些示例，请参见[此处](http://ideone.com/XjXWiI)。请注意，由于那里的 GCC 版本，`std::begin()`并且`std::end()`被替换，并且由于函数的反向逻辑而`!=`被更改为（你会像 一样使用它）。`==``do {} while (!ok(...));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:10:45.073

`isalpha`接受一个 int 而不是一个字符串。

确保字符串中的每个字符都是字母的一种方法是执行类似的操作。

```
bool isAlpha = false;
while (!isAlpha) {
// take in input blah blah

    isAlpha = true;
    for (unsigned i = 0; i < input.length(); ++i) {
      if (!isalpha(input[i]))
          isAlpha = false;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T20:51:07.750

`std::string`一种更有效的方法是使用以下函数 在字符串中搜索数字：

```
static const char digits[] = "0123456789";
isAlpha = text.find_first_of(digits, 0); // start from position 0. 
```

# php - PHP intl 扩展不起作用

> ID：13612448
> 
> 赞同：1
> 
> 时间：2012-11-28T19:00:35.480
> 
> 标签：php, apache, debian, intl

我已经在 Debian Squeeze 上通过 PECL 安装了 intl 扩展。但是当我放入`extension=intl.so`我的 php.ini 文件并重新启动 Apache 时，它​​会将 CP 加载到大约 99% 并且没有任何效果。使服务器再次工作的唯一方法是`extension=intl.so`从 php.ini 文件中删除该行。为什么？

Apache错误日志是：

> [Wed Nov 28 23:09:59 2012] [notice] suEXEC 机制已启用（包装器：/usr/lib/apache2/suexec）PHP 警告：函数注册失败 - 重复名称 - idn_to_ascii in Unknown on line 0 PHP 警告：函数注册失败 - 重复名称 - 第 0 行未知中的 idn_to_utf8 PHP 警告：idn：无法注册函数，无法在第 0 行的未知中加载

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T19:19:50.383

出于显而易见的原因，函数名称必须是唯一的。

（推荐的）扩展`intl`提供了功能`idn_to_ascii`和`idn_to_utf8`（以及其他有用的功能），以及 pecl 扩展`idn`（[source](http://svn.php.net/viewvc/pecl/idn/trunk/idn.c?revision=319831&view=markup)）

idn 自 2009 年以来处于（早期）测试阶段，不再开发。

**我该如何解决？**

你需要做的是卸载你的 idn 扩展

```
apt-get remove php-pecl-idn 
```

或（取决于它是如何安装的）

```
pecl uninstall idn 
```

或简单地在您的配置中评论扩展名

```
; extension=idn.so 
```

然后重新启动你的 apache

# sql - 如何计算一段时间内具有特定状态的用户数？

> ID：13612450
> 
> 赞同：1
> 
> 时间：2012-11-28T19:00:47.907
> 
> 标签：sql, sql-server

我有一个需要从 SQL Server 2008 R2 中的 UserHistory 表创建的报告。示例如下： ![报告](../Images/da2de808ec1d097e9c86b358bc029d55.png)

出于计费目的，我们需要计算在特定时期内有多少不同用户具有特定状态。这段时间可以低至 1 天，也可以长达 2 个月。因此，如果一个用户在一段时间内处于活动状态、不活动状态然后再次处于活动状态，那么这将被视为一个活动用户。

曲线球现在可以上场了。如果我在指定时间段内没有历史记录，则存储过程需要在该时间段开始之前寻找第一个历史记录条目，以查看它是否与状态匹配。显然，如果我在 10 月 20 日活跃，然后我的帐户在 11 月 15 日被暂停，如果这段时间是 11 月，我仍然活跃。

起初，我用一个游标遍历每个用户表来执行此操作，并对每个用户及其用户历史进行查询，但是即使使用相关索引，200000 个用户也需要大约 40 秒。在 9 个状态期间，每天 40 秒加起来非常快。

我和我的同事想出了这个最接近的方法：

```
ALTER PROCEDURE [dbo].[cpUserHistory_CountByStatus] @StartDate DATETIME2,
    @EndDate DATETIME2,
    @Status VARCHAR(50)
AS
SET NOCOUNT ON

SELECT SUM(CASE WHEN CurrentMonth.UserId IS NOT NULL OR PreviousTime.UserId IS NOT NULL THEN 1 ELSE 0 END)
FROM [User]
LEFT JOIN
       (SELECT UserId
       FROM
              UserHistory
              INNER JOIN
                     (SELECT MAX(UserHistoryId) AS UserHistoryId
                     FROM UserHistory
                     WHERE EditedDate BETWEEN @StartDate AND @EndDate
                     GROUP BY UserId) LastStatus ON UserHistory.UserHistoryId = LastStatus.UserHistoryId
       WHERE UserHistory.Status = @Status                                -- EDIT: Your status you're interested in
       ) CurrentMonth ON [User].UserId = CurrentMonth.UserId
LEFT JOIN
       (SELECT UserId
       FROM
              UserHistory
              INNER JOIN
                     (SELECT MAX(UserHistoryId) AS UserHistoryId
                     FROM UserHistory
                     WHERE EditedDate < @StartDate
                     GROUP BY UserId) LastStatus ON UserHistory.UserHistoryId = LastStatus.UserHistoryId
       WHERE UserHistory.Status = @Status                               -- EDIT: Your status you're interested in
       ) PreviousTime ON [User].UserId = PreviousTime.UserId 
```

但正如您在简化的报告示例中看到的那样，用户在当月 3 日被取消，然后在 5 日重新激活，但总数并未反映在此期间的某个时间点有 1 名用户被取消。

有没有人有任何想法或更好的方法来做到这一点？我真的可以使用一些输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:34:52.050

我决定为整个范围调用一次存储过程，这将带回所有符合我的条件的 UserHistory 条目，并且在代码中我可以随意计数和过滤它。

不理想，因为可能有相当多的数据从数据库传输到应用程序，并且一旦在应用程序中它可以使用一些内存 - 但它可以工作，速度快，更重要的是准确。

```
ALTER PROCEDURE [dbo].[cpUserHistory_SelectForBillingPeriod] @StartDate DATETIME2,
    @EndDate DATETIME2
AS
BEGIN
    DECLARE @Uh TABLE (
        UserHistoryId INT,
        UserId INT,
        UserStatus VARCHAR(50),
        EditedDate DATETIME2
        )

    INSERT INTO @Uh
    SELECT UserHistoryId,
        UserId,
        [Status],
        EditedDate
    FROM UserHistory
    WHERE EditedDate >= @StartDate
        AND EditedDate <= @EndDate

    INSERT INTO @Uh
    SELECT UserHistory.UserHistoryId,
        UserId,
        [Status],
        EditedDate
    FROM UserHistory
    INNER JOIN (
        SELECT MAX(UserHistoryId) AS UserHistoryId
        FROM UserHistory
        WHERE EditedDate < @StartDate
        GROUP BY UserId
        ) LastStatus ON UserHistory.UserHistoryId = LastStatus.UserHistoryId

    SELECT *
    FROM @Uh
    order by EditedDate desc 
```

# android - 如何在android中将文件集合作为单独的apk包分发？

> ID：13612451
> 
> 赞同：0
> 
> 时间：2012-11-28T19:00:53.273
> 
> 标签：android, package, apk, distribution

我有一个小型 Android 应用程序，它根据手头的特定任务使用不同的文件集（几个图像、一个小型 SQLite DB 和几个 XML 文件）。

我知道我可以使用资源或资产将我的文件包含到主应用程序 APK 中，但我很乐意将它们分发到单独的 APK 中。

如何创建纯数据 APK 文件？

我该如何分发它？特别是，我是否必须为纯数据包做任何特别的事情（例如，以某种方式将其与主应用程序包相关联）？

（我打算给用户一个数据包的链接，让他安装。不需要自动安装。）

如何将我的文件安装到应用程序的内部或外部存储区域？是否可以将文件安装到主应用程序安装程序创建的内部存储区域？我是否必须为此设置任何特定权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:14:02.613

我的方法是创建一个包装应用程序，它只是一个[内容提供者](http://developer.android.com/guide/topics/providers/content-providers.html)，并根据您的主应用程序的请求提供文件。这将允许您为用户提供不同的数据包——您甚至可以相对轻松地让您的主应用程序在这些数据包之间进行选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T16:50:08.257

看起来，让同一个应用程序具有不同内容（或样式或配置）的普遍接受的方式是使用 Android 库项目的公共代码（即：整个应用程序、“引擎”、“应用程序框架”）和内容的标准 Android 应用程序项目（即：实际上只包含数据的应用程序）。有点混乱，只是因为这里的“库”实际上是整个“应用程序”，但这似乎是要走的路。

更详细：

1.  创建一个 Android 库应用程序并在其中放入尽可能多的代码（所有不变的东西）。请注意，此库无法启动，也无法单独分发。它必须包含在托管应用程序中。
2.  创建一个标准的 Android 应用程序。将您的库包含到此项目中。将所有数据（文件、XML 等）放入 /res 和 /asset 中。
3.  编译一切并分发。

每次需要不同版本时重复此循环。由于数据、样式、配置或其他任何因素而有所不同。使用新名称发布生成的应用程序。

至于我，我对这种方法并不完全满意。

一种可能的替代方法是使用 Ruby、Python、Perl、GIT、bash、Ant、Maven、Rake 或任何其他能够从此处读取文件、在此处和此处进行一些更改并在此处写入文件的工具对源代码进行预处理.

大致的轮廓是这样的：

1.  制作一个“模板”应用程序。将您的 /res 和 /asset 留空。
2.  运行自定义脚本。该脚本读取配置文件，将 /res 和 /asset 文件从存储库复制到项目 /res 和 /asset 目录，更改一些 Java 源文件并创建/更改一些 XML 文件。
3.  编译和分发（当然用一个新名称）。

使用 GIT 或其他 SCM，您只需为每个新版本创建一个新分支并编译它。不是很优雅（因为它会强烈干扰 SCM 的正常使用）但是......

在网络上有一些这些方法的例子。我对他们也不完全满意。

坦率地说，为了解决这个问题，Android 生态系统应该提供某种“应用内包管理器”。类似于 Eclipse 更新管理器。这将允许我们使用相同的应用程序框架来处理不同的场景。

作为替代方案，一个可靠的、官方支持的、基于模板的代码生成机制会很好。本着“软件生产线”精神的东西：[https](https://en.wikipedia.org/wiki/Software_production_line) ://en.wikipedia.org/wiki/Software_production_line 。查看 fw4spl，例如：[http](http://code.google.com/p/fw4spl/) ://code.google.com/p/fw4spl/ 。

# jquery-ui - jQueryUI .sortable() 需要唤醒；不接受 droppable

> ID：13612453
> 
> 赞同：0
> 
> 时间：2012-11-28T19:00:59.573
> 
> 标签：jquery-ui, jquery-ui-sortable

这是一个对我来说是真实的、长期的噩梦的问题。我把它贴在这里，以免别人真正头疼。

有一个**sortable()**和可以放入其中的项目。一切都很顺利，除了最初**sortable()**不会接受项目。只有在用户更改了 sortable() 中项目的位置后，**sortable** **()**才会接受项目。

 **换句话说，看起来**.sortable()**需要被唤醒，然后才能接受任何内容。

（看来[这个可怜的灵魂](http://forum.jquery.com/topic/sortable-with-dragable)也在为同样的问题苦苦挣扎。他没有得到任何答复……）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:00:59.573

发生了以下事情。我的**.sortable()**被初始化为**div style="display:none"**。当我写它时，这很有意义。需要时，用户只需弹出包含**.sortable()的****div**。

 **但是，在隐藏的**div中绑定****.sortable()**显然会导致它进入休眠状态。

 **当我将**.sortable()**与可见的**div**绑定时，一切都很好。

希望这可以帮助某人...******

# sql - 计数小于关联的 ActiveRecord 条件

> ID：13612457
> 
> 赞同：2
> 
> 时间：2012-11-28T19:01:14.197
> 
> 标签：sql, ruby-on-rails, ruby, activerecord

我有`User`一个`has_many` `messages`。我需要创建一个查询

`'Get me all users who's (message.opened == false) count < 3'`

现在，我正在使用`User.all`，遍历所有用户，并手动计数。我知道这不是很有效，可以在一个查询中完成，但我是 SQL/ActiveRecord 的新手，所以在这里需要一些帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:09:13.510

尝试这个

```
User.includes(:messages).group('users.id').having('SUM(IFNULL(messages.opened = 0, 1)) < 3') 
```

它至少适用于 MySQL，**并且**假设您的布尔值 true 在数据库中为 1。

**编辑**我已经扭转了条件

**PS** `IFNULL`是否`messages.opened`可以处理`NULL`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:09:18.710

假设 Rails 3 语法。您可以执行以下操作：

```
User.joins(:messages).where(:messages => {:opened => false}).group(:user_id).having("COUNT(messages.id) < 3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:10:16.023

这应该有效：

```
User.includes(:messages).group("users.id").where("messages.opened = 0").having("count(messages.id) < 3") 
```

这将创建两个查询，一个用于分组查询，另一个用于通过连接预先加载结果用户和消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T19:13:59.553

这是您的问题的解决方案

```
User.includes(:messages).group("users.id").where("messages.opened = 0").having("count(messages.id) < 3") 
```

但你还能做的就是为此创建一个范围

```
scope :not_opened_less_three_count, includes(:messages).group("users.id").where("messages.opened = 0").having("count(messages.id) < 3") 
```

然后你可以在任何你需要的地方使用它，如下所示

```
User.not_opened_less_three_count 
```

# asp.net - 如何检测aspx中的设计时间

> ID：13612460
> 
> 赞同：2
> 
> 时间：2012-11-28T19:01:19.283
> 
> 标签：asp.net, visual-studio-2010

基本上我想在设计时修改我的 CSS 文件。我能想到的最简单的方法就是在我的 Master ASPX 页面中注释掉一段 CSS/JS 代码。我该怎么做呢？有没有办法检测 ASP.NET 中的设计时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T19:05:32.233

快速检测方法是：

```
if (HttpContext.Current == null)
// You're in design mode 
```

或者

```
 if (this.Site != null && this.Site.DesignMode == true)
  {
    // Design Mode
 }
 else
 {
    // Run-time
  } 
```

# sharepoint - 检索 SharePoint 组的创建者（用户）和创建日期

> ID：13612463
> 
> 赞同：1
> 
> 时间：2012-11-28T19:01:33.820
> 
> 标签：sharepoint, powershell, sharepoint-2010

我需要找到创建 SharePoint 2010 组的用户及其创建日期。我尝试使用“SharePoint Manager 2010”工具查找信息，但它似乎没有提供此类信息。我也尝试过 Powershell，但我似乎也无法从中获得它（在 Powershell 方面还不是很好）。

这甚至可能吗，或者我需要在某个地方打开审计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:59:28.550

据我所知，没有办法得到它。即使通过 C#，您也无法获得类似`siteGroup["Author"]`or的值`siteGroup[Created"]`。

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            using (SPSite spSite = new SPSite("http://DemoSP2010"))
            {
                using (SPWeb spWeb = spSite.RootWeb)
                {
                    Console.WriteLine(spWeb.Title);
                    SPGroupCollection collection = spWeb.SiteGroups;
                    foreach (SPGroup siteGroup in collection)
                    {
                        Console.WriteLine(siteGroup.Owner.ToString());
                        Console.WriteLine(siteGroup.Xml.ToString());
                    }
                }
            }
            Console.WriteLine("Done!");
            Console.ReadLine();
        }
    }
} 
```

XML 还仅提供以下信息：

*   ID
*   姓名
*   描述
*   所有者 ID
*   所有者是用户

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-08T20:14:41.267

（IDK 关于 2010 ...但是）在 SharePoint 2013 on-prem 中，以下 Powershell 将提供每个组（和站点用户）的创建者、创建日期、修改者和修改日期

```
Add-PSSnapin Microsoft.SharePoint.Powershell

$spWeb = Get-SPWeb 'http(s)://YourSite/'
$spList =$spWeb.SiteUserInfoList
$oColl = $spList.Items
$oColl | ForEach-Object {
    Write-Host $_['ID'] $_['Name'] $_['Author'] $_['Created'] $_['Editor'] $_['Modified']
} 
```

# coffeescript - CoffeeScript：为对象赋值

> ID：13612467
> 
> 赞同：1
> 
> 时间：2012-11-28T19:01:57.503
> 
> 标签：coffeescript

假设我有以下对象：

```
dict = { a: 1, b: 2, c: 3 } 
```

以下工作完美：

```
{a, b} = dict
// -> a = 1
// -> b = 2 
```

现在我想操纵这些数字并将其写回对象，显然以下行不起作用：

```
// some manipulations
dict = {a, b} 
```

显然我已经覆盖了`dict`对象。我本质上想做的是分配`dict.a = a`并`dict.b = b`保持`dict.c`原样。

**是否有可能用某种简短的符号来实现我的目标？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T20:29:26.520

您可以使用以下方法将对象的一部分提取到单独的局部变量中：

```
{a, b} = dict 
```

但没有办法分配给一个对象的切片，即你不能做这样的事情：

```
dict{a, b} = [ x, y ] 
```

作为快捷方式

```
dict.a = x
dict.b = y 
```

您甚至无法使用以下内容将对象切片提取到新对象中：

```
obj = dict{a, b} 
```

您必须分两步完成：

```
{ a, b } = dict
obj      = { a, b } 
```

[解构分配](http://coffeescript.org/#destructuring)可以很好地将事物从对象中提取出来，但它们对于将事物放回对象中并没有那么有用。我认为你能得到的最接近的是使用解构数组赋值：

```
[ dict.a, dict.b ] = [ a, b ] 
```

如果您正在使用多个键，那么您可以将键放在一个数组中并使用循环进行切片和合并（可能包含在辅助函数中）：

```
slice = (obj, keys...) ->
    s = { }
    s[k] = obj[k] for k in keys
    s

merge = (dest, src) ->
    dest[k] = src[k] for k of src
    return

keys = [ 'a', 'b' ]
dict = { a: 1, b: 2, c: 3 }
s = slice(dict, keys...)
s.a += 6
s.b += 6
merge(dict, s)
# dict is now { a: 7, b: 8, c: 3 } 
```

或者只是使用 Underscore、jQuery、... 实用程序函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:16:05.343

在纯咖啡脚本中：

```
extend = (a, others...) ->
  for o in others
    a[key] = val for key, val of o
  a

dict = { a: 1, b: 2, c: 3 }
{a, b} = dict

a = 5
b = 8

extend dict, {a, b}

console.log dict
#dict = { a: 5, b: 8, c: 3 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:44:55.607

假设您使用的是 underscore.js，我会这样做：

```
dict = { a: 1, b: 2, c: 3 }
{a, b} = dict
...
dict = _.extend dict, {a:a, b:b} 
```

正如 asawyer 指出的那样，jQuery 中也有类似的扩展函数。

# .net - EntityFramework 在 SaveChanges() 调用后停止响应

> ID：13612468
> 
> 赞同：1
> 
> 时间：2012-11-28T19:01:57.390
> 
> 标签：.net, sql, entity-framework

好的，需要我能得到的“任何”帮助/想法......

我的项目是一个 MVC4 网站，在某些时候，它正试图在数据库中插入一个新对象。对象正在被正确验证，数据被正确地从视图帖子解析到参数上，一切看起来都很好，除了当我调用 SaveChanges 时，应用程序停止响应并且永远不会回来。我在该语句之后有一个断点，它永远不会出现在 SaveChanges 中。

我已经将所有数据库更改为 SQL Server Express 的本地实例，以便将记录的 SQL 语句发送到数据库。它也没有任何问题（除了最后有一个 ROLLBACK，但 .NET 根本不采取任何行动 - 没有例外，没有什么），请查看由 SaveChanges 触发的操作的日志：

```
2012-11-28 16:46:43.10 spid52      ODS Event: Login connection 52
2012-11-28 16:46:43.10 spid52      ODS Event: Remote_ods : Xact 0 ORS#: 1, connId: 0
2012-11-28 16:46:43.10 spid52      Xact BEGIN for Desc: 3400000006
2012-11-28 16:46:43.10 spid52      Parameter# 0: Name=,Flags=0,Xvt=231,MaxLen=558,Len=558,Pxvar Value=insert [dbo].[Lote]([IDTipoEdificacao], [IDGleba], [IDOutorgante], [Numero], [FracaoIdeal], [AreaAntiga], [AreaNova], [Obs], [DocumentoExtra])
values (@0, @1, @2, @3, @4, @5, @6, @7, null)
select [IDLote]
from [dbo].[Lote]
where @@ROWCOUNT > 0 and [IDLote] = scope_identity()
2012-11-28 16:46:43.10 spid52      Parameter# 1: Name=,Flags=0,Xvt=231,MaxLen=156,Len=156,Pxvar Value=@0 int,@1 int,@2 int,@3 nvarchar(20),@4 real,@5 real,@6 real,@7 nvarchar(1000)
2012-11-28 16:46:43.10 spid52      Parameter# 2: Name=@0,Flags=0,Xvt=56,MaxLen=4,Len=4,Pxvar Value=3
2012-11-28 16:46:43.10 spid52      Parameter# 3: Name=@1,Flags=0,Xvt=56,MaxLen=4,Len=4,Pxvar Value=1
2012-11-28 16:46:43.10 spid52      Parameter# 4: Name=@2,Flags=0,Xvt=56,MaxLen=4,Len=4,Pxvar Value=0
2012-11-28 16:46:43.10 spid52      Parameter# 5: Name=@3,Flags=0,Xvt=231,MaxLen=40,Len=2,Pxvar Value=1
2012-11-28 16:46:43.10 spid52      Parameter# 6: Name=@4,Flags=0,Xvt=59,MaxLen=4,Len=4,Pxvar Value=0
2012-11-28 16:46:43.10 spid52      Parameter# 7: Name=@5,Flags=0,Xvt=59,MaxLen=4,Len=4,Pxvar Value=0
2012-11-28 16:46:43.10 spid52      Parameter# 8: Name=@6,Flags=0,Xvt=59,MaxLen=4,Len=4,Pxvar Value=0
2012-11-28 16:46:43.10 spid52      Parameter# 9: Name=@7,Flags=0,Xvt=231,MaxLen=2000,Len=8,Pxvar Value=Obs1
2012-11-28 16:46:43.10 spid52          IPC Name: sp_executesql
2012-11-28 16:46:43.10 spid52      ODS Event: execrpc : Xact 3400000006 ORS#: 1, connId: 0
2012-11-28 16:46:43.40 spid52      ODS Event: Remote_ods : Xact 3400000006 ORS#: 1, connId: 0
2012-11-28 16:46:43.40 spid52      Xact ROLLBACK for Desc: 3400000006 
```

# objective-c - 在 iPad 上运行仅 iPhone 应用程序时 UIBarButtonItem 纹理偏移

> ID：13612471
> 
> 赞同：1
> 
> 时间：2012-11-28T19:02:01.540
> 
> 标签：objective-c, ios, uibarbuttonitem, uitoolbar

在我的应用程序的主视图中，我`UIBarButtonItem`使用自定义图像（使用创建）实例化 3 个（2 个实际按钮和 1 个灵活间隔）`[UIImage imageNamed:]`，然后将它们设置为`UIToolBar`. 这是代码：

```
-(void)viewDidLoad{
    [super viewDidLoad];

    UIToolbar *menuBar = [UIToolbar new];
    menuBar.barStyle = UIBarStyleDefault;

    CGRect viewBounds = [UIScreen mainScreen].bounds;

    //menuBar is rotated to be viewed vertically along the right side of the device in portrait orientation, the app does not support device rotation
    menuBar.transform = CGAffineTransformRotate(menuBar.transform, M_PI * 0.5f);

    [menuBar setFrame:CGRectMake(viewBounds.size.width - menuBarHeight, 5, menuBarHeight, viewBounds.size.height)];

    [self.view addSubview:menuBar];

    [menuBar release];

    UIBarButtonItem
        *peekButton = [[UIBarButtonItem alloc]
                       initWithImage:[UIImage imageNamed:@"peekIcon.png"]
                       style:UIBarButtonItemStyleDone
                       target:self
                       action:@selector(peek:)],
        *pauseButton = [[UIBarButtonItem alloc]
                        initWithImage:[UIImage imageNamed:@"pauseIcon.png"]
                        style:UIBarButtonItemStyleDone
                        target:self
                        action:@selector(pauseGame:)],
        *flexSpace = [[UIBarButtonItem alloc]
                      initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace
                      target:nil
                      action:nil];

    menuBar.items = @[flexSpace, pauseButton, peekButton];

    [flexSpace release];
    [pauseButton release];
    [peekButton release];
} 
```

在运行 iOS 5.1 的 iPod touch 上运行时，工具栏和按钮按预期显示，如下所示：

![在此处输入图像描述](../Images/10acbb4b27fd555e4043edecad48129d.png)

但是在 iPad（iOS 4.3）上运行时，纹理看起来像这样：

![在此处输入图像描述](../Images/774879b2e8f877936fb08003a6bd3814.png)

我似乎无法辨别原因，但是，我相信它可能是操作系统或设备特定的错误，因为我一直遇到类似的模糊图形问题，其中 UI 元素的绘制完全无视底层对象的数据。不幸的是，我找不到任何相关文档（Apple 或其他明智的）来阐明这个问题。

非常感谢任何输入，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:00:22.520

问题似乎来自于调用 UINavigationController 的方法

`-(void)pushViewController:(UIViewController*)viewController animated:(BOOL)animated;`

由于屏幕转换最初不是为了动画，所以`animated`参数是`NO`. 将值更改为`YES`似乎是解决方案。

这似乎也解决了我遇到的其他一些图形问题。

# c++ - 使用鼠标作为输入设备c ++

> ID：13612473
> 
> 赞同：0
> 
> 时间：2012-11-28T19:02:10.000
> 
> 标签：c++, windows, dev-c++

我在 C++ 控制台中使用鼠标在网上浏览了一些信息，但我对这门语言仍然很陌生并且很困惑。

我在 Windows 7 上使用 Dev C++ 编译器，并且想使用鼠标单击并捕获来自控制台屏幕的输入，这可以通过标准库实现吗？我将如何使用鼠标进行 cin？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:12:45.090

是什么阻止您使用 Win32？在这里使用鼠标会容易得多，因为您需要做的就是处理消息。有关您尝试实现的目标的更多信息可能有助于我们为您找到最佳解决方案。

顺便说一句，我上次看到的 Dev C++ 已经很老了，我相信不再维护了。Eclipse 更好（即使有时无法忍受）。您还可以使用 Visual Studio 2010/2012 Express 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:19:43.233

这对于标准 C++ 输入/输出是不可能的。

您需要使用 Win32 控制台 API 并启用[`ENABLE_MOUSE_INPUT Low-Level Console Mode`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684205%28v=vs.85%29.aspx).

然后您将能够使用 Win32 API 函数读取鼠标[`ReadConsoleInput()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684961%28v=vs.85%29.aspx)事件[`PeekConsoleInput()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684344%28v=vs.85%29.aspx)。

请参阅[有关读取控制台输入事件的 MSDN 示例](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685035%28v=vs.85%29.aspx)。

请注意，鼠标光标位置是根据控制台屏幕缓冲区的字符单元坐标提供的，而不是像素坐标。

# java - Java Swing JOptionPane 按钮选项

> ID：13612483
> 
> 赞同：2
> 
> 时间：2012-11-28T19:03:03.480
> 
> 标签：java, swing, joptionpane

所以这是我第一次使用 JOptionPane，我想知道是否有人可以帮助解释我如何让我的两个按钮执行某些操作？出于所有意图和目的，只需打印出“嗨”。这是我的代码。到目前为止，如果我单击“Uhh ....”按钮，它只会打印出“Hi”，但我希望它在单击“w00t!!”时也能这样做。按钮。我知道它与参数“JOptionPane.YES_NO_OPTION”有关，但我不确定我到底要做什么。我在这里先向您的帮助表示感谢！

```
Object[] options = {"Uhh....", "w00t!!"};
int selection = winnerPopup.showOptionDialog(null,
    "You got within 8 steps of the goal! You win!!",
    "Congratulations!", JOptionPane.YES_NO_OPTION,
    JOptionPane.INFORMATION_MESSAGE, null,
    options, options[0]);
    if(selection == JOptionPane.YES_NO_OPTION)
    {
        System.out.println("Hi");
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T19:07:38.767

从[javadocs](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html)，

> 当 showXxxDialog 方法之一返回整数时，可能的值为：
> 
> ```
> YES_OPTION
> NO_OPTION
> CANCEL_OPTION
> OK_OPTION
> CLOSED_OPTION 
> ```

所以，你的代码应该看起来像，

```
if(selection == JOptionPane.YES_OPTION){
    System.out.println("Hi");
}
else if(selection == JOptionPane.NO_OPTION){
    System.out.println("wOOt!!");
} 
```

但无论如何，这个逻辑有点奇怪，所以我可能会推出我自己的对话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:11:42.593

在 JOPtionPane 类中有一些常量表示按钮的值。

```
 /** Return value from class method if YES is chosen. */
    public static final int         YES_OPTION = 0;
    /** Return value from class method if NO is chosen. */
    public static final int         NO_OPTION = 1;
    /** Return value from class method if CANCEL is chosen. */
    public static final int         CANCEL_OPTION = 2; 
```

您更改了按钮的名称，因此，您的第一个按钮“Uhh”的值为 0，其按钮为“w00t！” 假定值为 1。

所以，你可以使用这个：

```
if(selection == JOptionPane.YES_OPTION)
{
    System.out.println("Hi");
}
else if(selection == JOptionPane.NO_OPTION){
    // do stuff
} 
```

或者可能更好地使用 swicht/case 函数：

```
 switch (selection )
    {
        case 0:
        {

            break;
        }
        case 1:
        {

            break;
        }
        default:
        {
            break;
        }
    } 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-28T19:09:18.123

```
int selection = 0;
JOptionPane.showOptionDialog(null,
            "You got within 8 steps of the goal! You win!!",
            "Congratulations!", JOptionPane.YES_NO_OPTION,
            JOptionPane.INFORMATION_MESSAGE, null,
            options, options[0]);

if(selection == JOptionPane.YES_NO_OPTION)
{
    System.out.println("Hi");
} 
```

# jquery-ui - JQxGrid , Knockout.js 删除问题

> ID：13612484
> 
> 赞同：0
> 
> 时间：2012-11-28T19:03:06.720
> 
> 标签：jquery-ui, knockout.js, jqxgrid

我们将 JqxGrid 与 Knockout.js 一起使用。

“删除”按钮与网格中的每一行绑定。

并使用以下代码删除一行：

```
 var  DeleteReportRecord = function  () {
            var  rows = $('#jqxgrid').jqxGrid('getrows');

            var  selectedrowindex = $("#jqxgrid").jqxGrid('getselectedrowindex');
            var  dataRecord = $("#jqxgrid").jqxGrid('getrowdata', selectedrowindex);
            var  ReportId = dataRecord.ReportId;
            selectedRow = rows[selectedrowindex];
           $("#jqxgrid").jqxGrid('deleterow', selectedrowindex, selectedRow);
} 
```

问题是它工作正常并删除了该行，但它在 IE 中发出警告，因为“行数据未定义” 我的服务器使用的是 jquery 1.71，而 jqxgrid 使用的是 jquery 1.8.1，其中代码如下：

```
$("#jqxgrid").jqxGrid('deleterow', selectedrowindex); 
```

如果我可以使用上述行删除不起作用。有人可以帮忙吗？

感谢 Anirban Ghosh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:44:05.217

请看看这是否有帮助 [http://www.jqwidgets.com/community/topic/rowdata-is-undefined/](http://www.jqwidgets.com/community/topic/rowdata-is-undefined/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:50:06.737

'deleterow' 需要一个行 ID，而不是索引。见这里：[createremoveupdatedata.htm](http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxgrid/createremoveupdatedata.htm?classic)

# windows-8 - 如何在 Windows 8 应用程序中运行服务器上的视频

> ID：13612486
> 
> 赞同：1
> 
> 时间：2012-11-28T19:03:10.707
> 
> 标签：windows-8, winrt-xaml

我想知道如何在 Windows 8 应用程序的服务器上运行视频。

我正在使用带有特定 url 的媒体元素和绑定源。但是如果视频在可以播放的本地计算机上，则视频播放效果不佳。

提前感谢您的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:37:06.333

I'd suggest the [Player Framework](http://playerframework.codeplex.com), it works well from my usages with remote videos.

# ruby - ruby HTML5验证的validator.nu gem的替代品

> ID：13612492
> 
> 赞同：2
> 
> 时间：2012-11-28T19:03:25.480
> 
> 标签：ruby, validation, gem

validator.nu gem 会抛出 YAJL 弃用警告，并且有时会完全引用 HTTPStream 的问题而失败。是否有任何稳定的 ruby​​ gem 可以验证 HTML5 文档？

例如

```
req1.9.2p320 :001 > require 'validator.nu'
DEPRECATION WARNING: Yajl::HttpStream is going to be removed in 2.0
DEPRECATION WARNING: Yajl's Gzip support is going to be removed in 2.0
DEPRECATION WARNING: Yajl's Deflate support is going to be removed in 2.0
=> true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:03:25.480

`living-validator`gem 消除了对and的`YAJL`依赖。github 项目在这里：[https](https://github.com/DynamiX-Web-Design/living-validator) ://github.com/DynamiX-Web-Design/living-validator 。它还与托管您自己的实时验证器实例兼容。`HTTParty``JSON`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T11:21:37.793

试试我的新 HTML 验证 gem，html_validation。这是对我所做的另一个人们没有找到的重写/重新命名，因此它基于一些经过良好测试的代码。它在本地运行，而不是通过 Web api。它使用由 W3C 推出的 HTML Tidy。

[https://github.com/ericbeland/html_validation](https://github.com/ericbeland/html_validation)

# mysql - 如何查询相关实体但返回根实体？

> ID：13612496
> 
> 赞同：3
> 
> 时间：2012-11-28T19:03:31.063
> 
> 标签：mysql, symfony, doctrine, dql

这是一个假设性的问题，因为我试图了解 Doctrine ORM 并且很难复制我在普通 SQL 中所做的事情。

假设我在标签和帖子之间有一个简单的多对多关系。他们将映射，因此这`Post::tags`是拥有方并且`Tag::posts`是反向映射。

我知道使用 Doctrine 的 DQL，我可以选择包含其标签的帖子，或使用以下 2 个查询引用其帖子的标签

(1)`SELECT p, t FROM MyBundle:Post p JOIN p.tags t WHERE p.id = :id`

(2)`SELECT t, p FROM MyBundle:Tag t JOIN t.posts p WHERE t.id = :id`

但是当我想通过多个标签获取帖子时，我必须在这些之间进行选择：

(3)`SELECT p, t FROM MyBundle:Post p JOIN p.tags t WHERE t.value IN ('foo','bar')`

(4)`SELECT t, p FROM MyBundle:Tag t JOIN t.posts p WHERE t.value IN ('foo','bar')`

这两个似乎都是错误的。

使用（3）我想数据库会先扫描整个帖子表，然后再将集合减少到标记的那些

使用（4）我得到了一组标签对象，这与我所追求的相反。

我尝试了以下方法，因为从逻辑上讲，它似乎反映了我在 SQL 中所做的事情：

```
SELECT p, pt FROM MyBundle:Tag t JOIN t.posts p JOIN p.tags pt
                 WHERE t.value IN ('foo','bar') GROUP BY p.id 
```

它不起作用，因为 Doctrine 坚持我选择根实体

**在标签上选择但将唯一帖子作为完整对象取回的最佳方法是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:25:23.960

如果我很好地理解了这个问题，那么您想要的是选择所有至少有一个标签的值在定义的集合中的帖子（“foo”、“bar”、...）并忽略所有其他帖子。

让我们从（3）开始：

```
SELECT p, t FROM MyBundle:Post p JOIN p.tags t WHERE t.value IN ('foo','bar') 
```

在 MySQL 中，这大约意味着：“选择所有标签为 foo 或 bar 的帖子”。

但是在 DQL 中，这意味着“选择所有帖子并仅附加值为 foo 或 bar 的标签”。这意味着查询将返回所有帖子的集合，但标签已过滤。这种行为差异是由于学说必须使用数据库层返回的数组来创建对象。当您使用 JOIN 进行 MySQL 查询时，结果将是一个包含重复项的数组。但是，在对象世界中，必须将重复的帖子合并到一个 Post 对象中......

我相信您查询的解决方案是在进行连接时进行过滤：

```
SELECT p,t FROM MyBundle:Post p JOIN p.tags t WITH t.value IN ('foo', 'bar') 
```

您可以将 WITH DQL 子句理解为它在 ON MySQL 子句中添加了一个条件。即上面的查询类似于下面的MySQL查询：

```
SELECT p.*, t.* FROM posts AS p JOIN posts_tags AS pt ON pt.post_id = p.id JOIN tags AS t ON pt.tag_id = t.id AND t.value IN ("foo", "bar") 
```

注意没有更多的 WHERE 子句。条件在 JOIN 条件子句中移动...

希望这可以帮助 ;-）

# spring-security - Spring Security 和 OSGi

> ID：13612498
> 
> 赞同：3
> 
> 时间：2012-11-28T19:03:55.280
> 
> 标签：spring-security, osgi, eclipse-virgo

我正在尝试在 Virgo 3.6.0.M03 上使用 Spring Security 3.1.3 创建一个简单的示例。该示例由 3 个捆绑包组成：

*   配置和发布 AuthenticationManager 的安全包

    ```
    <security:authentication-manager id="authenticationManager">
       <security:authentication-provider>
          <security:user-service>
             <security:user name="Rigas" password="password" authorities="ROLE_MEMBER"/>
          </security:user-service>
       </security:authentication-provider>
    </security:authentication-manager>
    <service id="authenticationManagerOsgi" ref="authenticationManager" interface="org.springframework.security.authentication.AuthenticationManager"/> 
    ```

*   helloSecurity 捆绑发布一个安全的 helloWorld 方法。它引用 AuthenticationManager 并将其注入到 global-method-security 中。

    ```
    <security:global-method-security secured-annotations="enabled" authentication-manager-ref="authenticationManager"/>
    <reference id="authenticationManager" availability="mandatory" interface="org.springframework.security.authentication.AuthenticationManager"/>
    <service id="helloSpringSecurityOsgi" ref="helloSpringSecurity" interface="net.ansible.examples.hellospringsecurity.HelloSpringSecurity" /> 
    ```

*   helloSecurityConsumer 包引用 helloSecurity IF 并调用安全的 helloWorld 方法。

    ```
    <reference id="helloSpringSecurity" availability="mandatory" interface="net.ansible.examples.hellospringsecurity.HelloSpringSecurity"/> 
    ```

Bundle statup 和 Wiring 工作正常，但是一旦 helloSecurityConsumer 调用安全方法，就会引发以下异常：

```
Failed to call secure method org.springframework.beans.factory.BeanNotOfRequiredTypeException: Bean named 'authenticationManager' must be of type [org.springframework.security.authentication.ProviderManager], but was actually of type [$Proxy94]
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:360)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
at org.springframework.security.config.method.GlobalMethodSecurityBeanDefinitionParser$AuthenticationManagerDelegator.authenticate(GlobalMethodSecurityBeanDefinitionParser.java:386)
at org.springframework.security.access.intercept.AbstractSecurityInterceptor.authenticateIfRequired(AbstractSecurityInterceptor.java:316)
at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:202)
at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:60)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
at net.ansible.examples.hellospringsecurity.impl.HelloSpringSecurityImpl$$EnhancerByCGLIB$$99e49c75.sayHello(<generated>)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:319)
at org.eclipse.gemini.blueprint.service.importer.support.internal.aop.ServiceInvoker.doInvoke(ServiceInvoker.java:56)
at org.eclipse.gemini.blueprint.service.importer.support.internal.aop.ServiceInvoker.invoke(ServiceInvoker.java:60)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:131)
at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:119)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.eclipse.gemini.blueprint.service.importer.support.LocalBundleContextAdvice.invoke(LocalBundleContextAdvice.java:57)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:131)
at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:119)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy95.sayHello(Unknown Source)
at net.ansible.examples.hellospringsecurityconsumer.impl.HelloSpringSecurityConsumerImpl$MyRunnable.run(HelloSpringSecurityConsumerImpl.java:50)
at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
at java.util.concurrent.FutureTask$Sync.innerRunAndReset(Unknown Source)
at java.util.concurrent.FutureTask.runAndReset(Unknown Source)
at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(Unknown Source)
at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(Unknown Source)
at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

GlobalMethodSecurityBeanDefinitionParser 尝试使用引用的 AuthenticationManager 并将围绕 OSGi 引用的代理转换为 ProviderManager 时遇到问题。调试显示代理（一个 jdkDynamicAopProxy）确实是 ProviderManager 类周围的代理，并具有所有相关接口。是否有可行的配置来实现我想要做的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T21:09:10.980

这对我来说似乎是一个错误。引发错误的文件[GlobalMethodSecurityBeanDefinitionParser.java](https://fisheye.springsource.org/browse/spring-security/config/src/main/java/org/springframework/security/config/method/GlobalMethodSecurityBeanDefinitionParser.java?hb=true)的第 386 行是

```
delegate = beanFactory.getBean(authMgrBean, ProviderManager.class); 
```

它向 bean factory 请求具有具体 implementation 的 bean `ProviderManager`，但它应该只请求具有以下接口的 bean `AuthenticationManager`：

```
delegate = beanFactory.getBean(authMgrBean, AuthenticationManager.class); 
```

您可能想在[Spring Security 的 Jira](https://jira.springsource.org/browse/SEC)中提出请求。

BTW: We are also exporting the authenticationManager as an OSGI service and consume it in other bundles, which works really well.

# codeigniter - $this->db->在 Codeigniter 中选择

> ID：13612499
> 
> 赞同：0
> 
> 时间：2012-11-28T19:04:01.613
> 
> 标签：codeigniter, methods

当我尝试插入 Select detro example DATE_FORMAT (date_end, '% W% M% Y') AS dateend 的函数时遇到问题。

```
$ this-> db-> select (name, DATE_FORMAT (date_end, ‘% W% M% Y’) AS dateend) 
```

它说 '% W% M% Y' 方法未知

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T19:11:02.343

根据这篇[文章](https://stackoverflow.com/questions/6408059/codeigniter-select-query)和这个[论坛条目](http://ellislab.com/forums/viewthread/74206/)，添加`false`到您的查询中就可以了：

```
$this->db->select("DATE_FORMAT(your_date_field, 'Year: %Y Month: %m Day: %d') AS formated_date", FALSE ); 
```

# asp.net - ScriptManager 与 CustomValidator 客户端验证功能冲突

> ID：13612500
> 
> 赞同：0
> 
> 时间：2012-11-28T19:04:03.137
> 
> 标签：asp.net

为清楚起见，请考虑以下基于母版页文件的表单。

**表格**：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Test.aspx.cs" Inherits="Secured_Test" MasterPageFile="~/MasterPages/Test_SiteMaster.master" %>

<asp:Content runat="server" ContentPlaceHolderID="MainPageContent">

  <script type="text/javascript">
    function ClientValidate(source, args) 
    {
      alert('foo');
    }
  </script>

  <asp:DropDownList runat="server" id="ddl">
    <asp:ListItem Text="value 1" Value="1" />
    <asp:ListItem Text="value 2" Value="2" />
  </asp:DropDownList>

  <asp:CustomValidator ID="CustomValidator1" runat="server" Text="Error!" ClientValidationFunction="ClientValidate" />

  <asp:Button ID="Button1" runat="server" Text="Submit" CausesValidation="true" />

</asp:Content> 
```

**我的母版页包含以下代码：**

```
<asp:ScriptManager ID="ToolkitScriptManager1" runat="server">
  <Scripts>
    <asp:ScriptReference Name="jquery" />
  </Scripts>
</asp:ScriptManager> 
```

**问题/问题：**

照原样，`ClientValidate`函数永远不会触发。如果我删除 MasterPageFile 中的 ScriptManager 调用，代码将按预期工作（`ClientValidate`被调用并在单击按钮时发出警报）。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T07:33:30.557

```
if(!Page.ClientScript.IsClientScriptBlockRegistered("method")){
string script=@"
   function ClientValidate(source, args) 
   {
      alert('foo');
   }";
ScriptManager.RegisterClientScriptBlock(this.Page, this.GetType(),  "method", script, true)
} 
```

但首先你必须检查浏览器的错误控制台。可能由 scriptreferrence 加载的脚本会引发错误，并且所有其他脚本的执行都已停止。

# java - HeaderElements 必须是命名空间限定的

> ID：13612504
> 
> 赞同：4
> 
> 时间：2012-11-28T19:04:13.173
> 
> 标签：java, xml, soap

你好我有一个java代码来创建一个SOAP消息来发送一个WSDL服务。代码如下：

```
 SOAPConnectionFactory sfc = SOAPConnectionFactory.newInstance();
  SOAPConnection connection = sfc.createConnection();

  MessageFactory mf = MessageFactory.newInstance();
  SOAPMessage sm = mf.createMessage();

  SOAPHeader sh = sm.getSOAPHeader();
  SOAPBody sb = sm.getSOAPBody();

  QName bodyName = new QName("SendSMSInput");
  SOAPBodyElement bodyElement = sb.addBodyElement(bodyName);

  QName expiryDate = new QName("EXPIRY_DATE");
  SOAPElement node = bodyElement.addChildElement(expiryDate);
  node.addTextNode("TARIH GELECEK BURAYA");

  QName message_class = new QName("MESSAGE_CLASS");
  SOAPElement node2 = bodyElement.addChildElement(message_class);
  node2.addTextNode("MESSAGE_CLASS GELECEK BURAYA");

  QName s_date = new QName("S_DATE");
  SOAPElement node3 = bodyElement.addChildElement(s_date);
  node3.addTextNode("S_DATE GELECEK BURAYA");

  QName short_number = new QName("SHORT_NUMBER");
  SOAPElement node4 = bodyElement.addChildElement(short_number);
  node4.addTextNode("SHORT NUMBER GELECEK BURAYA");

  QName src_msisdn = new QName("SRC_MSISN");
  SOAPElement node5 = bodyElement.addChildElement(src_msisdn);
  node5.addTextNode("BOŞLUK");

  QName to_rec = new QName("TO_RECEIVERS");
  SOAPElement node6 = bodyElement.addChildElement(to_rec);

  QName msisdn = new QName("msisdn");
  SOAPElement node6_1 = node6.addChildElement(msisdn);
  node6_1.addTextNode("BOŞLUK");

  QName message_body = new QName("MESSAGE_BODY");
  SOAPElement node7 = bodyElement.addChildElement(message_body);

  QName message = new QName("message");
  SOAPElement node7_1 = node7.addChildElement(message);
  node7_1.addTextNode("BOŞLUK"); 
```

生成以下内容：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
<SOAP-ENV:Header/>
<SOAP-ENV:Body>
    <SendSMSInput>
        <EXPIRY_DATE>TARIH GELECEK BURAYA</EXPIRY_DATE>
        <MESSAGE_CLASS>MESSAGE_CLASS GELECEK BURAYA</MESSAGE_CLASS>
        <S_DATE>S_DATE GELECEK BURAYA</S_DATE>
        <SHORT_NUMBER>SHORT NUMBER GELECEK BURAYA</SHORT_NUMBER>
        <SRC_MSISN>BOŞLUK</SRC_MSISN>
        <TO_RECEIVERS>
            <msisdn>BOŞLUK</msisdn>
        </TO_RECEIVERS>
        <MESSAGE_BODY>
            <message>BOŞLUK</message>
        </MESSAGE_BODY>
    </SendSMSInput>
</SOAP-ENV:Body> 
```

我需要在标题下添加元素。当我尝试

```
QName tokenHeader = new QName("token");
  SOAPHeaderElement tokenElement = sh.addHeaderElement(tokenHeader); 
```

它说：

```
HeaderElements must be namespace qualified
Exception in thread "main" com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: HeaderElements must be namespace qualified
    at com.sun.xml.internal.messaging.saaj.soap.impl.HeaderImpl.addHeaderElement(HeaderImpl.java:96)
    at soapgenerator.SOAPGenerator.main(SOAPGenerator.java:34) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T19:32:39.420

使用`QName`具有命名空间部分的构造函数，而不是无命名空间的构造函数。

> QName(String namespaceURI, String localPart)
> 
> QName 构造函数指定命名空间 URI 和本地部分。

# java - 为什么 Struts2 将我的字符串转换为字符串数组？

> ID：13612506
> 
> 赞同：7
> 
> 时间：2012-11-28T19:04:31.063
> 
> 标签：java, struts2

我有一个 Struts 2（JDK 1.7、Struts 2.2.1）应用程序，其中包含一个过滤条件列表，作为字符串存储在映射中。

```
Map< String, String > m_filters = new HashMap< String, String >();

public Map< String, String > getFilters() {
    return m_filters;
} 
```

我传递了一个格式如下的 URL：

[http://myserver.com/myapp/GenerateReport.action?reportID=Whatever&filters.fromDate=0&filters.toDate=2000000000&filters.FcsType=piv_cardholder_3kp&detailed=true](http://myserver.com/myapp/GenerateReport.action?reportID=Whatever&filters.fromDate=0&filters.toDate=2000000000&filters.FcsType=piv_cardholder_3kp&detailed=true)

即使 Map 具有指定为 String 的键和值类型，尝试从中获取值

```
 Map< String, String > filters = getFilters();
    String value = filters.get( "fromDate" ); 
```

导致抛出此异常：

`java.lang.ClassCastException: [Ljava.lang.String; cannot be cast to java.lang.String`

我在单元测试中重现了这一点，并在调试器中确认 Struts 2 似乎正在为每个参数创建一个 String[1] 而不是一个 String。即它是一个长度为 1 的字符串数组，唯一的字符串是预期值（在本例中为“0”）。

**我的问题是：**这是 Struts2 中的错误，还是我做错了什么？

如果是错误，是否有已知的解决方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T03:47:22.697

如果您遵循 Java bean 约定，则没有问题。

以下是解决该问题的一些指导方针：

*   如果您将私有成员命名为“过滤器”并仅提供过滤器的吸气剂，则不会发生此问题。
*   如果除了 getter 之外还提供公共 setter（即使您为私有成员使用不同的名称，例如 m_filter），则不会发生此问题
*   仅当您不提供 setter 并且该属性与 getter 的名称不同时，才会出现此问题。

长话短说遵循惯例。以上行为用 Struts 2.3.4 测试

**我猜正在发生**的事情：getter 也允许设置（如果只有一个 setter，你只能在地图中设置一个项目，使用当前的参数拦截器就是这种情况）。检查 bean 的属性以查看它应该如何进行类型转换，可能首先它寻找一个失败的 setter，它查看该名称的属性的操作以确定失败的类型，它将需要使用默认值。默认参数类型是 String 到 String[] 的映射，这就是您所看到的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T20:37:50.633

你使用了错误的符号。`filters.fromDate`将相当于`getFilters().setFromDate()`，这实际上不是您想要的。点表示法适用于 JavaBeans。

尝试使用括号，例如`filters['fromDate']`.

参考：[http](http://struts.apache.org/2.2.1/docs/type-conversion.html#TypeConversion-RelationshiptoParameterNames) ://struts.apache.org/2.2.1/docs/type-conversion.html#TypeConversion-RelationshiptoParameterNames 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:14:10.280

试试这个：

```
 Object[] obj = (Object[]) filters.get( "fromDate" );
 String value = (String)obj[0]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T19:16:42.977

这不是一个错误，您可以认为它是一个功能。[访问请求参数](http://struts.apache.org/2.3.4/docs/how-can-we-access-request-parameters-passed-into-an-action.html)

[参数感知拦截器](https://struts.apache.org/2.3.4/struts2-core/apidocs/org/apache/struts2/interceptor/ParameterAware.html)

让我们假设 /http://localhost:8080/myApp/login.action?name=struts2&name=rocks

如果您尝试访问名称参数 string[0] = struts2, string [1](http://struts.apache.org/2.3.4/docs/how-can-we-access-request-parameters-passed-into-an-action.html) =rocks

# javascript - 用于移动触摸屏设备的 Ace 文本编辑器上的慢速滚动

> ID：13612507
> 
> 赞同：47
> 
> 时间：2012-11-28T19:04:35.500
> 
> 标签：javascript, mobile, ace-editor

我正在尝试让 JavaScript 代码编辑器[ACE](http://ace.ajax.org)在移动设备上工作。

```
var editor = ace.edit("editor");
editor.setTheme("ace/theme/twilight");
editor.getSession().setMode("ace/mode/css"); 
```

[你可以在这里](http://jsfiddle.net/GRNcN/)找到完整的代码

垂直滚动似乎对任何移动设备都没有响应，而且滞后很多。我怎样才能使它更具响应性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-08-01T08:24:57.633

据我所知，codemirror 多年来一直没有出现任何性能问题，因此请尝试使用它。这是您的 jsfiddle，但使用 codemirror：[https ://jsfiddle.net/DerpMarine/j54gfecL/16/](https://jsfiddle.net/DerpMarine/j54gfecL/16/)

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.39.2/codemirror.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.39.2/codemirror.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.39.2/mode/css/css.js"></script>
</body>
<script>

var myCodeMirror = CodeMirror(function(elt) {
  document.getElementById('editor').parentNode.replaceChild(elt, document.getElementById('editor'));
},{
  mode:  "css",
  theme: "custom", // https://codemirror.net/doc/manual.html#option_theme and https://codemirror.net/theme/
  value: document.getElementById('editor').value
});
</script> 
```

[https://codemirror.net/doc/manual.html](https://codemirror.net/doc/manual.html)

# cuda - 并发：短拷贝，长内核

> ID：13612510
> 
> 赞同：0
> 
> 时间：2012-11-28T19:04:48.417
> 
> 标签：cuda, cuda-streams

运行并发复制和内核操作时：
如果我的内核运行时间是 dataCopy 操作的两倍，每次内核运行我会得到 2 个副本吗？
我看到的流示例显示了 1:1 的关系。（复制时间=内核运行时间。）我想知道当有什么不同时会发生什么。每次内核启动总是有一个复制操作（最大）吗？或者复制操作是否独立于内核启动运行？即，如果运行和复制时间以这种方式运行，我可能会在每次内核启动时完成 5 次复制操作。
（我试图弄清楚在内核启动之前要排队多少次复制操作。）

一对一：（复制时间=内核运行时间）
<--stream1Copy--><--stream2Cop​​y-->
.......... .......<-stream1Kernel->

二比一：（复制时间 = 1/2 内核运行时间）
<-stream1Copy-><-stream2Cop​​y-><-stream3Copy->
.................... .........<---------stream1Kernel------------>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:37:07.627

每次内核启动可以有多个副本。只有一个副本（在具有双副本引擎的设备上的每个方向）可以在特定时间运行到特定 GPU，但是一旦该副本完成，可以立即启动另一个副本。假设 niether 流是流 0，在相关内核启动流之外的流中发布的异步副本将完全异步运行到该内核启动。（这也假设您使用固定内存，即 cudaHostAlloc 来创建相关的主机端缓冲区。）

您可能需要阅读最佳实践指南中的[相关部分](http://docs.nvidia.com/cuda/cuda-c-best-practices-guide/index.html#asynchronous-transfers-and-overlapping-transfers-with-computation)。

您经常看到计算和复制的 1:1 分析的原因是假设复制的数据将由内核调用消耗（或由内核调用生成），因此从逻辑上讲，我们可以这样考虑数据块。但是，如果将代码构造为一系列副本更容易，那应该没有问题。自然，如果您可以将所有数据批处理到单个 cudaMemcpy 调用中，那么这将比传输相同数据的一系列副本更有效。

[可视化分析器](http://docs.nvidia.com/cuda/profiler-users-guide/index.html)将帮助您以时间线方式准确了解数据复制操作与内核操作的比较。

# mysql - 两个表之间的多对多关系

> ID：13612516
> 
> 赞同：0
> 
> 时间：2012-11-28T19:05:06.157
> 
> 标签：mysql, database

我想创建一个关系数据库，其中有两个表用户和产品。每个表的每个项目都可以与第二个表的许多项目相关。

我目前的实现如下：

两张主桌——

```
->Users
User ID
UserInfo

->Products
Product ID 
ProductInfo 
```

两个不同的查找表

```
->UserToProduct
UserID
ProductID

->ProductToUSer
ProductID 
UserID 
```

每次添加用户与产品的关系时，我只需在第一个查找表中添加一个额外的行，反之亦然。

这是正确的方法吗？有没有我可以参考的此类场景的标准模型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T19:06:33.887

您不需要两个查找表，您只需要`users_products`. 就资源而言，有数以百万计的，只是谷歌*“数据库多对多”*。

**更新**

考虑以下数据：

```
products
------------
id     info
------------
1      car
2      flute
3      football

users
------------
id     info
------------
10     bob
20     tim
30     manning 
```

现在，举个简单的例子，假设*曼宁*拥有足球和汽车。假设*蒂姆*拥有一支长笛和一个足球。现在这是您的查找表：

```
users_products
----------------------
user_id    product_id
----------------------
  20           2
  20           3
  30           3
  30           1 
```

而已。现在您可以进行诸如“给我所有拥有汽车的用户”或“给我所有用户拥有的汽车”等查询。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:07:52.290

您真的不需要或想要两个不同的查找表。您应该只有一个（您的表 UserToProduct 或 ProductToUser 都可以）。查找表的主键应该是由 ProductID 和 UserID 组成的复合键。

# jquery - 当使用图像映射和链接时，我被委派给移动 safari。有没有办法通过图像地图链接保持独立模式

> ID：13612517
> 
> 赞同：1
> 
> 时间：2012-11-28T19:05:06.693
> 
> 标签：jquery, iphone, web

我试图简单地对设计进行用户测试，并将图像映射到原型图像。它们是应用程序外观的简单 PNG。我想在实现之前测试设计的某些属性。

现在我使用了答案：

```
 $(function() {
$('a').click(function() {
document.location = $(this).attr('href');
return false;
});

}); 
```

从上面将“a”更改为“img”。还尝试了“区域”和“地图”。这些都不起作用。有没有人知道让我在这个区域映射链接中保持独立模式？

非常感谢提前

# database - 如何在 Eclipse 上从 SQLite 数据库中读取数据

> ID：13612528
> 
> 赞同：1
> 
> 时间：2012-11-28T19:05:46.440
> 
> 标签：database, eclipse, sqlite

我正在使用使用 SQLite 数据库浏览器创建的静态数据库。我把它放在我的资产文件夹中并构建了一个代码来将数据库复制到一个数据库变量（这有意义吗？）所以我可以从中读取信息。问题是我不知道如何 - 主要是涉及的 SQL 查询 - 你建议的方法是什么？换句话说，例如，为了在列表视图中显示数据，我应该将哪些方法添加到我的数据库处理程序类（或数据适配器？）中。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:03:56.817

阅读[Android 数据库文档](http://developer.android.com/guide/topics/data/data-storage.html#db)。

从 assets 文件夹复制数据库通常在您的 -派生类的`onCreate`和/或`onUpgrade`函数中完成。`SQLiteOpenHelper`

本教程涵盖基础知识： [将 SQLite 数据库与 ListView 一起使用](http://kahdev.wordpress.com/2010/09/27/android-using-the-sqlite-database-with-listview/)

至于命名：使用在您的应用程序中有意义的任何名称。

# java - 在java中搜索没有循环的arraylist

> ID：13612529
> 
> 赞同：2
> 
> 时间：2012-11-28T19:05:51.743
> 
> 标签：java, loops

有没有什么方法可以在不使用循环的情况下`ArrayList`在*Java*中搜索，因为我有很多要搜索的集合，并且使用循环进行搜索需要很长时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T19:11:38.583

如果您保持列表排序，则可以使用以下方法更快地搜索它们

```
Collections.binarySearch(array, key); 
```

在你最喜欢的[java.util.Collections](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html)类中。

否则，您可能需要查看 TreeSet 和 HashSet。

但也许你可以改进你的整体算法？还是建立**索引**？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T19:09:52.767

如果您的数组列表的元素没有按任何特定顺序排列，那么您*必须*以一种或另一种方式遍历列表。

如果数组列表没有改变，一种可能性可能是对其进行预排序，然后重复使用[二分查找](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#binarySearch%28java.util.List,%20T%29)。

否则，您将需要使用不同的数据结构，例如[`Set`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html).

# java - 将文本文件中给定的两个数组合并为第三个数组

> ID：13612532
> 
> 赞同：0
> 
> 时间：2012-11-28T19:05:58.563
> 
> 标签：java, arrays, text, merge, int

是的，这是家庭作业。简单地说，因为我的教授不是最擅长措辞，

我得到了一个文本文件

```
11 -5 -4 -3 -2 -1 6 7 8 9 10 11
8 -33 -22 -11 44 55 66 77 88 
```

这是作为 SortedArrays.txt 给出的

第一行是数组 1，第二行是数组 2，每行的第一个 int 是数组的大小，所以：

```
int a[] = new int[11]
int b[] = new int[8] 
```

我的第一个问题是将它读入程序，我假设作为参数运行，但我的问题是在每一行之间解密并加载数组。

我相信我有一个比较 a 和 b 元素并加载到 c 中的好方法，但是有人可以看一下吗？

再次感谢这个网站，我四处搜索并看到了这个程序，但元素已经从文本文件中给出或没有给出。

```
// ************************************************************ 
// MergeArray.java 
// 
// Written by: Brandon Pham
//
// 
// 
//
// Homework 6
// ************************************************************

import java.io.*;
import java.util.*;

public class MergeArray { 
String arrayfile = "SortedArrays.txt"; 
    MergeArray(String arrayfile){
    try { 
     Scanner arrayload = new Scanner(File(arrayfile)); 
    }  
  catch (FileNotFoundException e) { 
     System.out.printf("File %s not found, exiting!",  
                       arrayfile); 
     System.exit(0); 
  } 
int[] a = new int[arrayload.nextint()];
int[] b = new int[arrayload.nextLine()];
int[] c = new int[a.length+b.length];
}
public static void merge(int[]a, int[]b, int[]c) {
int i=0,j=0,k=0;
 int alength = a.length;
 int blength = b.length;
while (k<c.length){
  if (a[i] < b[j]){
    c[k] = a[i];
      k++;
      i++;
        }
    if (a[i] == b[j]){
        c[k]=a[i];
        c[k++]=b[j];
        i++;
        j++;
    if (i+1>a.length){
        c[k]=b[j];
        k++;
        j++;
        }
    if (j+1>b.length){
        c[k]=a[i];
        k++;
        i++;
        }
  else{
    c[k] = b[j];
      k++;
      j++;
    }        
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:13:32.067

试试这个：一次读取一行，使用空格分割行以获取行中的数字数组，将所有条目添加到列表中，因为它具有开放式结尾。最后从列表中获取数组。

```
 String line;
   List<String> list = new ArrayList<String>();
   while(arrayload.hasNextLine()){
      line = arrayload.nextLine();
      String[] nums = line.split(" ");
      list.addAll(Arrays.asList(nums));
   }
   String[] finalNums = list.toArray(new String[]{}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:11:32.817

你的文件阅读很好。然而，输出的排序可能会更简单一些：

这是一些快速代码：

```
int[] result = new int[array1.length+array2.length]
int cursor1 = 0;
int cursor2 = 0;
for(int = 0; i < result.length; i++) {
    if(cursor1 > array1.length-1){
         result[i] = array2[cursor2++];
    } else if(cursor2 > array2.length-1){
         result[i] = array1[cursor1++];
    } else if(array1[cursor1] > array2[cursor2]){
        result[i] = array1[cursor1];
        cursor1++;
    } else {
        result[i] = array2[cursor2];
        cursor2++;
    }
} 
```

我只是在浏览器中编写了这个代码，所以我当然不保证语法正确；）

希望这对您有所帮助，请再次询问更多详细信息，并随时发布您的进度。

# tridion - 发布目标 Tridion 2011

> ID：13612536
> 
> 赞同：3
> 
> 时间：2012-11-28T19:06:04.727
> 
> 标签：tridion, publishing, tridion-2011

我们正在使用 Tridion 2011 SP1 和 DD4T 框架。

我们在暂存服务器和实时服务器中都有网站。我们已经使用不同的目标（Staging 和 Live）从 Tridion 2011 SP1 发布到两个服务器。现在我计划将登台服务器添加到 Live 目标中，因此在发布到 Live 时它也将发布到登台。在此之后我不会使用 Staging 目标。

我的问题是。它会在这方面产生任何问题或任何问题。它有什么缺点吗？

谢谢，贾加迪什。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T19:15:01.677

那么，您要做的就是在发布到 Live 时也*发布到 Staging？*

如果这就是您想要做的，那么最简单的方法是将两个发布目标链接到相同的目标类型。打开 Staging Publication Target 并在高级选项卡中，将其与 Live Target 类型链接（并从 Staging Target Type 取消链接）。

您可能还应该删除暂存目标类型，以免混淆您的编辑。

PS - 我在这里回答，但你的问题不是堆栈溢出/编程问题。你应该在[serverfault](http://www.serverfault.com/questions/tagged/tridion)中问这个问题。

问题的第二部分：它会引起问题吗？想一想你为什么要从一开始就进行分期，因为你现在会失去它。您可能正在删除实施 Experience Manager（ex-SiteEdit）的能力，但这可能不是必需的。暂存通常也是一个较小的环境。如果您这样做是因为您的 Live 服务器需要更多容量，那么您应该考虑购买一台新服务器，并将其链接到同一个数据库（因为您使用的是 DD4T，所以与文件系统复制或多个部署者）。

# oracle11g - Oracle中列数的设计决策

> ID：13612537
> 
> 赞同：2
> 
> 时间：2012-11-28T19:06:08.590
> 
> 标签：oracle11g

我的数据库中有第三级规范化（Unix 上的 Oracle 11g）

其中一张表有 80 列（仅限所有基本数据类型）。我的 DBA 询问为什么一张表中有这么多列。所有列都属于业务领域中的一个实体，并且是完全规范化的。

在限制 Oracle 数据库中的列数时应该考虑什么设计。

如何证明表格设计而不是规范化。是否真的需要仅仅因为 80 列而将表拆分为两个。

谢谢你，史密斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:09:05.787

特定表中的列数可能是非规范化结构的标志，但在您的情况下，这不是问题。您正在建模的实体需要 80 个字段，这就是您需要告诉您的 dba。他/她可能只是担心糟糕的设计。

此外，任意将表一分为二（它们之间具有一对一的关系）不会进行规范化。如果它优化了您的某些处理，您可能只会将表拆分为一对一。dba 是否建议拆分？

顺便说一句：在软件开发（和任何专业追求）中，你不能希望理解。你必须*沟通它。*

# shopify - Shopify API：文章网址

> ID：13612545
> 
> 赞同：3
> 
> 时间：2012-11-28T19:06:23.473
> 
> 标签：shopify

我目前正在开发 Shopify 应用程序，我希望能够从博客中获取和存储文章。但是，Shopify 'Article' API 不会为每个文章条目返回特定的 URL，我想知道是否有比以下格式更好的方法：

```
http://{shopUrl}.com/blogs/{blogName}/{articleId}-{articleTitle} 
```

其中 {articleTitle} 是文章标题的编码、URL 友好版本。

另外，只是出于好奇，为什么 Shopify 不返回获取的商品（如产品、文章等）的 URL？这是为了灵活性吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T04:44:05.200

有一个技巧可以让你的生活更轻松 - 你不需要 slug 文章标题，你可以这样做（编辑你的例子）：

```
http://{shopUrl}/blogs/{blogName}/{articleId} 
```

文章标题附加到 url 以提供更易读的 url，以及用于 SEO 目的。但是，如果您只是想构造 url，则没有必要。

至于为什么 Shopify 没有在 API 中提供资源的 url，这是因为像产品这样的资源可能有多个 url - 它可能是集合的一部分并通过集合访问，或者通过 /products/ 访问{{handle}} 等...所以您想根据上下文构建自己的 url。

# certificate - 具有 System.Data.Services.IRequestHandler 合同的数据服务端点抛出错误

> ID：13612546
> 
> 赞同：2
> 
> 时间：2012-11-28T19:06:27.780
> 
> 标签：certificate, wcf-data-services, wcf-endpoint, servicecontract

尝试使用 System.Data.Services.IRequestHandler 合同创建端点时收到以下错误

**无法加载操作“ProcessRequestForMessage”，因为它具有 System.ServiceModel.Channels.Message 类型的参数或返回类型，或者具有 MessageContractAttribute 和其他不同类型参数的类型。当使用 System.ServiceModel.Channels.Message 或带有 MessageContractAttribute 的类型时，该方法不得使用任何其他类型的参数。**

我发现了另外两个与此错误有关的问题（[此处](https://stackoverflow.com/questions/12674237/why-am-i-having-problems-with-ef5-with-wcf-service-application)和[此处](https://stackoverflow.com/questions/5816788/securing-an-ado-net-wcf-data-service-with-asp-net-membership)），但它们都没有令人满意的解决方案。我提取了[Northwind 示例](http://code.msdn.microsoft.com/windowsdesktop/WCF-Data-50-for-OData-v3-53074189)并能够重现该问题。

简化的 web.config 文件：

```
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
  </system.web>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer>
  <system.serviceModel>
    <services>
      <service  name="NorthwindService.Northwind">
        <endpoint address="http://localhost:12345/Northwind.svc" binding="basicHttpBinding" contract="System.Data.Services.IRequestHandler" />
      </service>
    </services>
  </system.serviceModel>
</configuration> 
```

.svc 文件：

```
<%@ ServiceHost Language="C#" Factory="System.Data.Services.DataServiceHostFactory, Microsoft.Data.Services, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" Service="NorthwindService.Northwind" %> 
```

我可以通过用我自己的合同替换 System.Data.Services.IRequestHandler 合同并删除错误消息所抱怨的参数来摆脱错误。

引发错误的内置 ServiceContract：

```
namespace System.Data.Services
{
  [ServiceContract]
  public interface IRequestHandler
  {
    [OperationContract]
    [WebInvoke(UriTemplate = "*", Method = "*")]
    Message ProcessRequestForMessage(Stream messageBody);
  }
} 
```

我的 ServiceContract，它不会抛出错误（但也没有真正起作用，因为我没有复制所有`DataService<T>`功能）：

```
namespace NorthwindService
{
  [ServiceContract]
  interface Interface1
  {
    [OperationContract]
    [WebInvoke(UriTemplate = "*", Method = "*")]
    Message ProcessRequestForMessage();
  }
} 
```

当我尝试在端点中使用内置 ServiceContract 时，我很困惑为什么会抛出此错误。我对数据服务相当陌生，所以我确信我错过了一些对其他人来说似乎很明显的东西。

谢谢

**编辑：**
归根结底，我的目标是使用证书身份验证，所以如果在解决这个问题时有办法做到这一点，我愿意接受。我一直在使用这个[例子](http://msdn.microsoft.com/en-us/library/ff648360.aspx)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:54:46.540

您正在使用`basicHttpBinding`. 将其更改为`webHttpBinding`.

# neo4j - 使用 get_or_create_indexed_node() 来保证 neo4j 中的属性唯一性是否安全？用作外键

> ID：13612550
> 
> 赞同：0
> 
> 时间：2012-11-28T19:06:47.593
> 
> 标签：neo4j, py2neo

我将 python+py2neo 与 neo4j 一起使用，我将我的 SQL db 的自动分配的记录 ID 分配为我的 neo4j 数据库中的外键。

如果 neo 数据库中尚不存在具有此 ID 的节点，我将使用 get_or_create_indexed_node() 创建一个具有唯一 ID 的新节点。

```
neo4jdb.get_or_create_indexed_node(index='Company', key='cid', value=self.id, properties={'cid' : self.id}) 
```

...使用 py2neo 对 neo REST 接口的包装。这安全吗？我认为它可能仍然重复了几次，创建了具有相同 ID 的新节点。有没有更好的方法来做到这一点，确保 id 外键在同一索引的节点之间的唯一性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:08:25.330

它应该是完全安全的，因为该方法是 API 调用的简单包装器；它不对客户端进行任何唯一性管理。你能展示一些产生这些重复的代码吗？

干杯，尼日

# java - 从 Android 创建新的 Google Drive 文档

> ID：13612555
> 
> 赞同：3
> 
> 时间：2012-11-28T19:07:31.573
> 
> 标签：java, android, google-drive-api

我正在尝试向我的应用添加创建新 Google Drive 文档（演示文稿、电子表格等）的功能。为此，我最初只想使用 URL 意图，但似乎无法通过 Android 浏览器创建新的 Google Drive 文档。我的下一个想法是以某种方式与 Google Drive 应用程序集成。无论如何可以从我的应用程序调用/打开 Google Drive 应用程序（例如，有意图）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:29:46.650

正如 Claudio 所说，当您深入了解 API [JavaDoc](https://google-api-client-libraries.appspot.com/documentation/drive/v2/java/latest/index.html)时，变化很小。

而不是使用

```
File insertedFile = service.files().insert(newFile, content).execute(); 
```

用这个：

```
Insert fileRequest = service.files().insert(newFile, content);
fileRequest.setConvert(true);
File insertedFile = fileRequest.execute(); 
```

转换表可以在这里找到：

[https://developers.google.com/drive/integrate-open?hl=en](https://developers.google.com/drive/integrate-open?hl=en)

很难找到这些信息，但现在一切都清楚了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:26:52.587

您可以使用 Google Drive API 将文件上传到 Drive 并自动将其转换为相应的 Google 格式。例如，您可以上传文本文件并将其转换为 Google 文档。

Drive的[Android 快速入门](https://developers.google.com/drive/quickstart-android)展示了如何上传照片，应该很容易更改代码以上传不同的文件并添加`?convert=true`参数：

[https://developers.google.com/drive/v2/reference/files/insert](https://developers.google.com/drive/v2/reference/files/insert)

# python - 添加一个循环，直到用户输入一个有效的答案？

> ID：13612557
> 
> 赞同：-3
> 
> 时间：2012-11-28T19:07:32.257
> 
> 标签：python, loops, if-statement

我想为此添加一个循环：

```
question = raw_input("Reboot Y/N ")
if len(question) > 0 and question.isalpha():
    answer = question.upper()
    if answer == "Y":
        print "Reboot"
    elif answer == "N":
        print "Reboot Cancled"
    else:
        print "/ERROR/" 
```

因此，如果用户输入其他任何内容，则会出现错误并将其发送回问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T19:09:01.633

在顶部添加一个 while True，如果用户输入了正确的输出，则中断循环：-

```
while True:
    question = raw_input("Reboot Y/N ")
    if len(question) > 0:
        answer = question.upper()
        if answer == "Y":
            print "Reboot"
            break
        elif answer == "N":
            print "Reboot Canceled"
            break
        else:
            print "/ERROR/" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:19:34.853

像这样的东西：

```
answer={"Y":"Reboot","N":"Reboot cancled"} #use a dictionary instead of if-else
inp=raw_input("Reboot Y/N: ")

while inp not in ('n','N','y','Y') :  #use a tuple to specify valid inputs
   print "invalid input"
   inp=raw_input("Reboot Y/N: ")

print answer[inp.upper()] 
```

**输出：**

```
$ python so27.py

Reboot Y/N: foo
invalid input
Reboot Y/N: bar
invalid input
Reboot Y/N: y
Reboot 
```

# android - 合成视图无法在 Eclipse 中以编辑模式呈现

> ID：13612559
> 
> 赞同：5
> 
> 时间：2012-11-28T19:07:41.743
> 
> 标签：android, eclipse, android-layout

我正在尝试构建一个由几个控件组合在一起的小部件。这是小部件：

```
public class VarioView extends RelativeLayout {

private int value;
private ImageView m_circle;
private TextView m_varioText;
private TextView m_units;
public VarioView(Context context)
{
    this(context,null);
}
public VarioView(Context context, AttributeSet attr)
{
    this(context,attr, 0);
}
public VarioView(Context context, AttributeSet attr, int defStyle)
{
    super(context, attr, defStyle);
    //View.inflate(context, R.layout.vario, this);
    LayoutInflater li = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    li.inflate(R.layout.vario, this, true);

    m_circle = (ImageView)this.findViewById(R.id.VarioCircle);
    m_varioText = (TextView)this.findViewById(R.id.VarioText);

    //m_circle.setColorFilter(Color.BLUE);
}
public int getValue() {
    return value;
}
public void setValue(int value) {
    m_varioText.setText(Integer.valueOf(value).toString());
    this.value = value;
}
} 
```

这是小部件 xml

```
<merge xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
 >

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/VarioCircle"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_centerInParent="true"
        android:contentDescription="Vario Circle"
        android:src="@drawable/circle3" />

    <TextView
        android:id="@+id/VarioText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="200"
        android:textColor="#FF0000"
        android:textSize="60sp"
        android:textStyle="bold"
        android:typeface="monospace" />

    <TextView
        android:id="@+id/VarioUnits"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/VarioText"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="100dp"
        android:text="fpm"
        android:textSize="20sp" />
</RelativeLayout>

</merge> 
```

这是圆形：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval"
    android:useLevel="false"
    android:color="#FF0000" >

    <size
    android:height="200dip"
    android:width="200dip" />

    <stroke
    android:width="10dp"
    android:color="#FF0000" />

</shape> 
```

在我的主要观点中，我只是像这样使用它：

```
 <com.proflite.VarioView

         android:layout_width="match_parent"
    android:layout_height="match_parent"
 /> 
```

我的问题是当我在模拟器（或真实设备）中运行它时它工作正常，但是当我尝试在 Eclipse 中进入图形编辑器时，它会在控件上绘制一个灰色框并给我这个：

```
The following classes could not be instantiated:
- com.proflite.VarioView (Open Class, Show Error Log)
See the Error Log (Window > Show View) for more details.
Tip: Use View.isInEditMode() in your custom views to skip code when shown in Eclipse

android.content.res.Resources$NotFoundException: Could not resolve resource value: 0x7F030001.
    at android.content.res.BridgeResources.throwException(BridgeResources.java:693)
    at android.content.res.BridgeResources.getLayout(BridgeResources.java:271)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:394)
    at com.proflite.VarioView.<init>(VarioView.java:30)
    at com.proflite.VarioView.<init>(VarioView.java:23)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(    at sun.reflect.NativeConstructorAccessorImpl.newInstance(    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(    at java.lang.reflect.Constructor.newInstance(    at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.instantiateClass(ProjectCallback.java:413)
    at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.loadView(ProjectCallback.java:170)
    at android.view.BridgeInflater.loadCustomView(BridgeInflater.java:207)
    at android.view.BridgeInflater.createViewFromTag(BridgeInflater.java:135)
    at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:746)
    at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:718)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:372) 
```

我检查的额外信息`0x7F030001`已映射到`R.layout.vario`并且错误来自此行：`li.inflate(R.layout.vario, this, true);`. 此外，如果我将其更改为`li.inflate(R.layout.vario, this);`它不会给出错误，但控件只显示“空白”，不会在编辑模式下呈现（实际运行时仍然有效）。

我真的希望能够在编辑器中可视化布局，因为需要很长时间才能进行小的布局更改并在模拟器中重新运行它们。

谢谢

**注意**错误来自放置控件的布局。如果我对控件本身进行图形编辑，它实际上会成功呈现。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T20:20:54.150

嗯，我觉得很愚蠢。重新启动 Eclipse 后一切正常。

# php - 将文件夹从测试文件夹移动到我的 public_html 活动文件夹后出现这些错误

> ID：13612561
> 
> 赞同：1
> 
> 时间：2012-11-28T19:07:44.107
> 
> 标签：php, database, magento

将文件夹从测试文件夹移动到我的 public_html 活动文件夹后，我收到了这些错误。

> **致命错误：**在第 67 行的 /.../Page.php 中的非对象上调用成员函数 getId()
> **致命错误：**在 /.../ 中的非对象上调用成员函数 checkIdentifier()第 90 行的 Router.php

这就是线条的样子

PAGE.PHP

```
$page = Mage::getSingleton('cms/page');
    if (!is_null($pageId) && $pageId!==$page->getIdentifier()) {
        $delimeterPosition = strrpos($pageId, '|');
        if ($delimeterPosition) {
            $pageId = substr($pageId, 0, $delimeterPosition); 
```

路由器.PHP

```
$page   = Mage::getModel('cms/page');
$pageId = $page->checkIdentifier($identifier, Mage::app()->getStore()->getId());
if (!$pageId) {
    return false; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:20:01.870

只是一个想法，但看起来你应该打电话`getIdentifier`而不是`getId`？-- 或重命名`getIdentifier`为`getID`

```
$page = Mage::getSingleton('cms/page');
if (!is_null($pageId) && $pageId!==$page->getId()) {
    $delimeterPosition = strrpos($pageId, '|');
    if ($delimeterPosition) {
        $pageId = substr($pageId, 0, $delimeterPosition); 
```

如果没有看到它是如何被调用的，很难判断它是什么类`getIndentifier`或`getId`来自什么......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:23:18.887

看起来 Mage 类所在的 w/e 文件未正确加载。检查您的 include_path 是否在您的实时环境中的 php.ini 文件中正确设置，并且如果您为它们提供绝对路径，这些文件是否位于您期望的目录中。

# jquery-ui - 无法让 jQuery-ui 自动完成功能在 Meteor 中工作

> ID：13612564
> 
> 赞同：3
> 
> 时间：2012-11-28T19:07:48.933
> 
> 标签：jquery-ui, meteor

我看到其他人在 Meteor 中成功使用了 jQuery-ui，但我第一次尝试使用自动完成功能失败了。这是我尝试过的：

我将下载的 jquery-ui 文件放在我的客户端目录中（我没有保留 jQuery 文件，因为 jquery 已经可用）。这失败了，因为 jQuery 使用相对路径查找 css 文件，而 Meteor 并没有以这种方式为它们提供服务——它使路径变平，当请求原始路径时，它返回应用程序的主页；Chrome 开发工具返回一个错误，表明它期待 css 但得到了 text/html。您可以让自动完成功能下拉，但只要您使用箭头键或鼠标悬停选项，它就会关闭。

然后我尝试[在 github 上使用 barisbalic 的 jQuery-ui 智能包](https://github.com/meteor/meteor/pull/48)。一旦您将 css 添加到项目中，这将导致自动完成功能几乎正常。但是，下拉菜单`<ul>`出现在窗口的左上角，而不是在`<input>`元素下的正确位置。

这样做的正确方法是什么？我查看了 Meteorite and Atmosphere 并没有找到包裹。我需要学习构建自己的智能包吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:12:58.160

使用表单的呈现事件开始自动完成。

您需要将数据源或集合展平为一个数组（如下面的 addr_book），这可以通过集合上的 Meteor.autorun() 来完成：

```
function split( val ) {
  return val.split( /,\s*/ );
}

function extractLast( term ) {
  return split( term ).pop();
}

Template.compose_to_cc_bcc_subject.rendered = function () {
  start_compose_autocomplete();
}

function start_compose_autocomplete() {
  $("#field1 #field2").autocomplete({
      minLength: 0,
      source: function( request, response ) {
        response( $.ui.autocomplete.filter(
         addr_book, extractLast( request.term ) ) );
      },
      focus:function() {
        return false;
      },
      select: function( event, ui ) {
        var terms = split( this.value );
        // remove the current input
        terms.pop();
        // add the selected item
        terms.push( ui.item.value );
        // add placeholder to get the comma-and-space at the end
        terms.push( "" );
        this.value = terms.join( ", " );
        return false;
    }
  });
} 
```

这使用[jQuery 自动完成小部件](http://jqueryui.com/autocomplete/#multiple)，具有多个值。

# .htaccess - 如何构建 Laravel .htaccess 以直接指向公共文件夹并删除 index.php

> ID：13612570
> 
> 赞同：3
> 
> 时间：2012-11-28T19:08:05.703
> 
> 标签：.htaccess, environment-variables, environment, laravel, clean-urls

我正在尝试创建可在开发和生产服务器上使用的 htaccess 文件。开发服务器的文件夹结构是这样的：

```
Server Root (www)
 -laravel
  -public
   -index.php
    -controller/method... etc 
```

生产服务器没有不可公开访问的文档根目录。我在 appfog 上部署它，它需要 .htaccess 来执行此操作。Appfog 的文档中提到了这一点：[https ://docs.appfog.com/languages/php#custom](https://docs.appfog.com/languages/php#custom)

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^domain.com$ [NC,OR]
RewriteCond %{HTTP_HOST} ^www.domain.com$
RewriteCond %{REQUEST_URI} !public/
RewriteRule (.*) /public/$1 [L] 
```

生产服务器的文件夹结构将是这样的（它只是删除了 laravel 文件夹）：

```
Server Root (www)
 -public
  -index.php
   -controller/method... etc 
```

我想在不使用 apache httpd 的情况下实现这一点，只使用 htaccess，因为开发环境会不断变化。

我希望能够做到这一点：

1.  访问`http://localhost/laravel/X/X`（其中 X 是任何东西）
2.  重定向到`http://localhost/laravel/public/index.php/X/X`（将 public/index.php 隐藏在 url 中以防止重复的 url）
3.  访问`http://example.com/X/X`（其中 X 是任何东西）
4.  重定向到`http://example.com/public/index.php/X/X`（将 public/index.php 隐藏在 url 中以防止重复的 url）
5.  防止访问公用文件夹之外的目录/文件，并防止访问公用文件夹中的目录，但不能访问文件。
6.  无需在生产和开发之间更改配置

问题是，我该怎么做以及需要多少个 .htaccess 文件？

到目前为止，我的进展一直是通过 laravel 文档和这个论坛帖子，但无论我做什么，当我去的时候，我总是收到 404 或 500 服务器错误`http://localhost/laravel/`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:29:06.470

[在这里](http://codehappy.daylerees.com/getting-started)查看一个可能的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T11:41:36.200

您将把它放在应用程序的根目录中。

```
- application/
- public/
  - .htaccess (already provided by laravel)
- index.php/
- .htaccess (the one specified by appfog) 
```

一切都应该正常工作。

# visual-studio-2010 - 在 Visual Studio 中禁用搜索选择

> ID：13612571
> 
> 赞同：32
> 
> 时间：2012-11-28T19:08:21.473
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2008, visual-studio-2012

有谁知道在 Visual Studio 中搜索时是否可以禁用“选择”选项中的搜索？

我发现搜索选择真的很混乱，我从不想在选择中搜索。曾经！我经常通过先选择来复制一些代码，然后搜索要粘贴代码的内容，但 Visual Studio 然后默认搜索所选文本，这不是我想要的。

我对至少适用于 Visual Studio 2010 和 2012 的解决方案感兴趣，但 2008 也会很好。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2016-04-30T13:08:00.487

它（终于！！！）已通过选项修复。按照[acarlon的](https://stackoverflow.com/users/746754/acarlon)[投票](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/4564453-provide-an-option-to-disable-search-selection)链接：

> 在 Visual Studio 2015 中，您可以通过取消选中以下工具选项来防止 Visual Studio 自动切换到选择范围内的搜索：
> 
> 工具-选项-环境-查找和替换-**自动限制搜索** **到选择**

太好了，该选项仅在*自动化*上。因此，在（对我而言极为罕见的）功能可能很方便的情况下，仍然可以通过显式选择范围“选择”

添加：正如[Lexikos](https://stackoverflow.com/users/894589/lexikos)在评论中指出的那样，“选择”选项实际上与“替换”非常方便，尤其是“全部替换”

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-10T03:17:16.973

目前没有选项，但您可以在[此处投票支持禁用它的选项](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/4564453-provide-an-option-to-disable-search-selection)

# php - 需要：.php 文件导致浏览器下载文件夹及其所有内容，无需存档

> ID：13612576
> 
> 赞同：0
> 
> 时间：2012-11-28T19:08:55.647
> 
> 标签：php, browser, download, directory, subdirectory

我希望我有一个 .php 文件，当链接到该文件时，会导致所有常用操作系统中的所有常用浏览器下载文件夹及其所有内容，包括其子文件夹和其中的文件（尤其是 . jpg 和 .tif）。例如：一个 .php 文件会导致下载我将其放在服务器旁边的任何文件夹（文件夹 x、文件夹 g、文件夹 d 等）：我希望 .php 文件在不被重写的情况下执行此操作每次我用它来指示它指向哪个文件夹。我希望它的位置进行指向以避免重写。因此，例如，.ph' 可能会导致下载它旁边的任何文件夹在我的服务器上。或者它可能导致下载它所在的文件夹，尽管不幸的是这可能需要导致自身被下载。

我希望它能够工作，例如，我可以（使用 ftp）将文件（以及文件夹和包含其他文件的子文件夹）放在我服务器上的文件夹 x 中，然后将文件夹 x 和这个 .php 文件放在里面文件夹 y，然后将一个人链接到 .php 文件，结果是，当他们单击链接时，他们的浏览器会打开一个保存对话框，让他们有机会选择文件夹 x 的位置以及要保存的所有内容. 或者，更好的是，当他们点击链接时，他们的浏览器只是开始将文件夹 x 及其所有内容下载到他们的驱动器，而无需打开保存对话框。无需压缩或其他即时存档：只需按原样下载文件夹 x 及其所有内容。

我（显然，到现在为止！）不是程序员——甚至没有接近。我从未编写过代码或脚本等；我不知道怎么写php。我知道如何在文本编辑器中将文本保存为 .php 文件，然后通过 ftp 将该文件放在我的服务器上，仅此而已。如果我的无知使这是一个不恰当的要求，那么我提前道歉。

谦虚，

标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:13:35.390

这是不可能的。Web 浏览器只能下载文件，不能下载文件夹——您需要使用某种形式的归档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:20:02.380

在此处使用此示例。

[http://www.travisberry.com/2010/09/use-php-to-zip-folders-for-download/](http://www.travisberry.com/2010/09/use-php-to-zip-folders-for-download/)

ZIP 档案比您解释的方式要干净得多。

# mysql - MySQL游标过早退出

> ID：13612584
> 
> 赞同：0
> 
> 时间：2012-11-28T19:09:23.067
> 
> 标签：mysql, sql, stored-procedures, cursor

我有一个 SP 游标，它适用于所有数据集，除了一个。该 SP 中有嵌套的游标。光标是这样的：

```
...
BLOCK1: begin
DECLARE cur1 CURSOR FOR select date, value1, value2 from excel.tc where date >= first_mov and id_fk = idz order by date DESC;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
OPEN cur1;

read_loop_1: LOOP

    FETCH cur1 into datez, value1z, value2z;  

    IF done THEN
        'exit loop
...lots of code

END LOOP;
end BLOCK1; 
```

我的嵌套游标遵循相同的模型，打开块并声明游标和处理程序。SP 的工作原理是使用一组特定的数据；游标不会遍历所有行，即使 CURSOR FOR SELECT 中的所有值都是正确的（我已经调试过了）。并且这些数据没有任何不同，除了行不是按**date**物理排序的。

有什么会导致这个问题吗？我正在使用 MySQL 5.0.26。

**编辑：一些数据来说明：

使用这组数据**不起作用**，光标停在第三行（按日期排序时，desc）：

```
date        value1     value2    id_fk     id
2006-02-17  0.920000   1.000000  12        25
2006-12-22  0.912000   1.000000  12        26
2007-04-24  0.818000   1.000000  12        27
2004-07-30  0.013650   1.000000  12        820
2004-10-30  0.012280   1.000000  12        821
2004-12-31  0.008960   1.000000  12        822
2005-04-16  0.006350   1.000000  12        823
2005-12-23  0.000000   -20.00000 12        824
2005-12-23  0.630000   1.000000  12        825
2003-12-31  0.020480   1.000000  12        826
2004-04-24  0.000850   1.000000  12        827 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:22:12.670

My problem was that I had a `select into var...` which returned `null`, and was considered a condition for `NOT FOUND` for the handler. This is well documented but I missed it somehow.

# xml - xslt 中的换行符

> ID：13612585
> 
> 赞同：1
> 
> 时间：2012-11-28T19:09:26.960
> 
> 标签：xml, xslt, newline

我在 xslt 文件中的两个字符串之间添加换行符''，如下所示：

```
test &#10; test1 
```

输出是这样的：

```
test
test1 
```

但我希望输出是这样的：

```
test &#10; test1 
```

这在xslt中可能吗？

我想我应该谈谈我为什么想要这个：

第一个输出在 excel 的 Alt + Enter 中不起作用。但是当我像 output2 这样手动编辑 xml 时，它可以工作。 也不起作用。

**额外说明**

让我们想象一下“test test1”写在一个 excel 单元格中。当我在其中使用 Alt + Enter 并使用 notpead++ 打开文件时，我看到这个单元格是这样的：

```
test&#10;test1 
```

在 xslt 文件中，我尝试用“”替换所有“换行符”文本以产生这种效果。但是当我在 notpead 中打开这个输出时，我看到：

```
test
test1 
```

但我希望输出是这样的：

```
test&#10;test1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T19:15:33.513

尝试这样的事情： -

```
<xsl:text>test &#10; test1 </xsl:text> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-26T11:19:39.907

如果我们通过模板操作一些 xml 节点，那么我们可以像...

```
 <xsl:template match="node">
                <xsl:text>Package: </xsl:text>
                <xsl:value-of select="childNode"/>
                <xsl:text> available from </xsl:text>
                <xsl:value-of select="OtherchildNOde"/>
                <xsl:text>&lt;br/&gt; </xsl:text>
        </xsl:template> 
```

所以主要的是[<br/>]。我们也可以使用 p 标签代替 br 标签。

# java - 在 LWGL 中获取当前法线

> ID：13612586
> 
> 赞同：1
> 
> 时间：2012-11-28T19:09:30.357
> 
> 标签：java, opengl, minecraft

我有一个简单的问题。

我正在开发一个 Minecraft mod，它要求我禁用通过 glOrtho() 设置的可怕缩放设置并指定我自己的，以便我可以绘制一个漂亮的、非像素化的字符串。如果你看过 Minecraft，字体看起来很可怕。

在我的模组中，我使用 Slick（一种 2D Java 游戏 API）来渲染字符串和加载字体。我已经正确设置了 Slick 并且看到了在菜单上正确绘制的字体。唯一的问题是在我重置矩阵时......

```
GL11.glMatrixMode(GL11.GL_PROJECTION);      // Select Projection
GL11.glPushMatrix();      // Push The Matrix
GL11.glLoadIdentity();        // Reset The Matrix
GL11.glOrtho(0, Minecraft.getMinecraft().displayWidth,                 Minecraft.getMinecraft().displayHeight, 0, 3000.0D, -3000.0D);
GL11.glMatrixMode(GL11.GL_MODELVIEW);  // Select Modelview Matrix
GL11.glPushMatrix();    // Push The Matrix
GL11.glLoadIdentity();    // Reset The Matrix 
```

我松开了以前函数中的平移和比例设置。（我没写过的）

我可以通过这个游戏的创造者 Mojang 已经编写的源代码很容易地获得当前的比例因子。如果我可以在重置矩阵之前获得比例和法线，我希望我可能有机会以 1 比 1 的像素比例正确渲染这些字符串（提供最佳显示分辨率）。

所以，底线：如何在 LWGL 中获取平移和比例信息？或者，鉴于我的情况，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:54:51.990

你在推动矩阵。这要求您使用相同数量的`glPopMatrix()`调用来平衡这一点，以便堆栈不会溢出。每`glPushMatrix` `glPopMatrix`对就像一组“大括号”。在关闭`glPopMatrix`堆栈的矩阵状态之后，恢复对相应的调用之前的状态`glPushMatrix`。

然而！OpenGL 不是场景图，矩阵堆栈没有定义“当前位置”或“当前缩放”。它定义了从模型空间到眼睛空间（模型视图矩阵）以及从眼睛空间到剪辑空间（投影）的转换。这就是矩阵的作用。没有场景，没有对象，在 OpenGL 中没有关于位置和类似内容的内部存储。所以我认为你必须稍微调整一下你对OpenGL的想法。

# javascript - 只显示 X 数量的 Div

> ID：13612590
> 
> 赞同：0
> 
> 时间：2012-11-28T19:09:34.587
> 
> 标签：javascript, html, css

如何只显示一定数量的 div？现在我使用下面的代码只显示 5 个 div .. 但它不能正常工作：

```
$('.categoryThumbnailList_item:lt(5)').show(); 
```

我创建了一个 JSFiddle 来展示这个问题：

[http://jsfiddle.net/gXxEs/](http://jsfiddle.net/gXxEs/)

我也不希望 div 加载和隐藏。我希望 div 根本不出现，也不必加载到屏幕上。

任何帮助，将不胜感激！:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:14:12.843

你必须隐藏所有然后显示你想要的：

```
$(document).ready(function() {
    $('.categorythumbnaillist_item').hide();
    $('.categorythumbnaillist_item:lt(5)').show();
}); 
```

更新小提琴：http: [//jsfiddle.net/gXxEs/9/](http://jsfiddle.net/gXxEs/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:15:27.757

为什么不在你的 CSS 中设置 div并在页面加载`display: none;`时用你的确切片段显示它们？`$('.categoryThumbnailList_item:lt(5)').show();`

小心，你的小提琴有问题。jsfiddle 会在 onload 事件中自动包装脚本块中的代码（在左侧可更改）。

我已经更新了小提琴，希望对您有所帮助：http: [//jsfiddle.net/7XneS/2/](http://jsfiddle.net/7XneS/2/)

**更新：** 如果你想完全**删除**div，你当然可以使用 jQuery 函数`.remove()`。如果您不希望 div 完全出现在页面上，则必须在服务器端处理此问题，而不是将它们排除在外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:16:08.100

然后删除所有索引大于 4 的 div：

```
$(document).ready(function() {
    $('.categorythumbnaillist_item:gt(4)').remove();
}); 
```

示例[**小提琴**](http://jsfiddle.net/gXxEs/14/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T19:17:03.583

或者，您可以创建一个函数来完成这项工作

```
function showLimit(selector, count) {
    $(selector).each(function() {
        if (count > 0) {
            $(this).show();
            count--;
        } else {
            $(this).hide();
        }
    });
} 
```

**更新**

或者

```
function showLimit(selector, count) {
    $(selector).hide();
    $(selector+':lt('+count+')').show();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T19:24:35.800

如果你想用 CSS 隐藏它们，试试这样的方法（给定你的选择器）：

```
.categorythumbnaillist_item {
    display: none;
}

.categorythumbnaillist_item:nth-of-type(-n+5) {
    display: block;
} 
```

这是一个[小提琴](http://jsfiddle.net/gXxEs/41/)。

**笔记：**

这仅[在浏览器支持 CSS3](http://caniuse.com/#search=css3%20selectors)时才有效。

# prolog - PROLOG - 子序列的出现次数

> ID：13612591
> 
> 赞同：1
> 
> 时间：2012-11-28T19:09:37.690
> 
> 标签：prolog

> 使用 Prolog 语言，我需要找出一个数字中子序列的出现次数。

我试图计算一个大文本文件中某个单词的出现次数，但也没有成功。虽然我有它的代码。

```
word_freq(W, Freq) :-
    word_count(W, 0, Total, 0, Match),
    Total > 0 -> Freq is Match / Total.

word_count(W, TotSoFar, Tot, MatchSoFar, Match) :-
    (  read_word(SoFar,W),
    N \= end_of_file
    -> T1 is TotSoFar + 1,
    (  N == W
    -> M1 is MatchSoFar+1
    ;  M1 is MatchSoFar
    ),
    word_count(W, T1, Tot, M1, Match)
    ; TotSoFar = Tot,
    MatchSoFar = Match
    ).

read_word(SoFar, W) :-
    get_code(C),
    (   C == -1
    ->  ( SoFar == [] -> W = end_of_file ; reverse(SoFar, W) )
    ;   code_type(C, alnum)
    ->  read_word([C|SoFar], W)
    ;   reverse(SoFar, W)
    ). 
```

我想出现/频率计数应该对两者或类似的工作相同。我不知道从哪里开始或如何继续，感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:44:46.690

让我知道您对此解决方案的看法。我假设子序列也必须是一个数字，因为我们正在寻找它在数字中的出现。

这个想法如下：

给定一个数字和另一个数字（子序列），从数字中减去子序列，看看最低有效位是否为零（最低有效位的数量由子序列的大小决定）。如果它们是零，那么我们有 subsequence ，否则我们没有。继续使用 NumberNew = Number div 10 获得的其余数字执行此操作，直到遇到 Number 小于 Subsequence 的情况。如果您在理解代码时遇到任何困难，我将编辑帖子并使用评论对其进行更新。

```
subsequence_size(Subsequence,1) :- Subsequence < 10,!.
subsequence_size(Subsequence,Size) :- SubNew is Subsequence div 10,subsequence_size(SubNew,N),Size is N+1\. 

is_subsequence(_,0).
is_subsequence(Number,SubSize) :-  Rem is Number mod 10,
                                   Rem=0,
                                   NumberNew is Number div 10,
                                   SubSizeNew is SubSize - 1,
                                   is_subsequence(NumberNew,SubSizeNew).

occurence_of_subsequence_in_number(Subsequence,Number,Occurences) :- subsequence_size(Subsequence,SubSize),
                                                                     count(Subsequence,SubSize,Number,0,Occurences).

count(0,_,0,Occurences,1) :- Occurences=0,!.
count(0,_,0,Occurences,Occurences) :- not(Occurences=0),!.
count(Subsequence,_,Number,Occurences,Occurences) :- Subsequence > Number,!.
count(Subsequence,SubSize,Number,Occurences,FinalOccurences) :- NumberToTest is Number-Subsequence,
                                                                (is_subsequence(NumberToTest,SubSize)),
                                                                OccurencesNew is Occurences+1,
                                                                NumberNew is Number div 10,
                                                                count(Subsequence,SubSize,NumberNew,OccurencesNew,FinalOccurences),!.

count(Subsequence,SubSize,Number,Occurences,FinalOccurences) :- NumberToTest is Number-Subsequence,
                                                                not(is_subsequence(NumberToTest,SubSize)),
                                                                NumberNew is Number div 10,
                                                                count(Subsequence,SubSize,NumberNew,Occurences,FinalOccurences),!. 
```

# gwt - 如何访问另一个JS文件中的函数

> ID：13612597
> 
> 赞同：0
> 
> 时间：2012-11-28T19:10:01.450
> 
> 标签：gwt

我在我的项目中添加了另一个 JS 文件：`test.js`

我有代码`test.js`：

```
var testObj = {
  hello : function(){
    alert("hello world");
  }
} 
```

我将此行添加到项目的主 HTML 文件中：

该脚本与 HTML 文件位于同一文件夹下。

在 Java 代码中，我通过以下方式调用此函数：

```
public static native void helloWorld()/*-{
    testObj.hello();
}-*/; 
```

但是当我运行它时，它告诉我`testObj is undefined`。但是在浏览器控制台中，当我这样做时：`testObj.hello()`并且它正在工作（因此加载了 JS 文件）。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:22:12.720

自己解决了。

将调用更改为：

```
public static native void helloWorld()/*-{
    $wnd.testObj.hello();
}-*/; 
```

`$wnd`必须是`$wnd`, `window`, `document`,`this`否则`$doc`将不起作用。

# flash - 我使用 11.5 flash player 版本时没有出现 Flex 内容

> ID：13612601
> 
> 赞同：1
> 
> 时间：2012-11-28T19:10:25.890
> 
> 标签：flash, apache-flex, google-chrome, version

出于某种原因，当我在 Chrome 中打开播放器版本的 11.5.31.2 时，但我关闭了其余部分，我的 Flex 内容不显示。我需要使用以前的版本，例如 11.2.202.197。

可能是播放器的错误还是我的播放器/chrome有问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:15:05.257

Chrome 正在使用他自己的 Flash 播放器插件版本。禁用它 chrome://plugins/ 并启用 adobe 版本.. 应该有帮助

# python - 启用 ipv6 时 socket.gethostbyname 失败

> ID：13612602
> 
> 赞同：1
> 
> 时间：2012-11-28T19:10:32.473
> 
> 标签：python, macos, sockets, ipv6

我在无法使用开关设备的办公室环境中遇到了最奇怪的行为。启用 IPv6 时，socket.gethostbyname() 失败，并且 socket.getaddrinfo() 在 10 秒的长时间超时后仅返回 IPv6 地址。如果我手动禁用 IPv6 并刷新租约，它们都会开始工作。

使用有线以太网的 MBP 上的最新 OS X Mountain Lion 10.8.2。我最近注意到您无法关闭 IPv6，只需设置为链接本地即可。您可以使用 networksetup 将其关闭，但这只会持续到重新启动。

关于如何追踪这一点的任何想法？我认为问题出在开关而不是我的机器上，但不知道下一步该往哪里看。

我的 v4 DHCP 服务设置为 8.8.8.8/8.8.4.4。

```
(nimbis)bschott@ironman:django-nimbis$ sudo dscacheutil -flushcache
(nimbis)bschott@ironman:django-nimbis$ host www.google.com
www.google.com has address 74.125.131.99
www.google.com has address 74.125.131.103
www.google.com has address 74.125.131.104
www.google.com has address 74.125.131.147
www.google.com has address 74.125.131.106
www.google.com has address 74.125.131.105
www.google.com has IPv6 address 2607:f8b0:400c:c03::63 
```

这里 gethostbyname 失败并且 getaddrinfo 在长时间超时后返回。

```
(nimbis)bschott@ironman:django-nimbis$ sudo dscacheutil -flushcache
(nimbis)bschott@ironman:django-nimbis$ python
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import socket
>>> socket.gethostbyname('www.google.com')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
socket.gaierror: [Errno 8] nodename nor servname provided, or not known
>>> socket.getaddrinfo('www.google.com', 80)
[(30, 2, 17, '', ('2607:f8b0:400c:c03::63', 80, 0, 0)), (30, 1, 6, '', ('2607:f8b0:400c:c03::63', 80, 0, 0)), (30, 2, 17, '', ('2607:f8b0:400c:c03::63', 80, 0, 0)), (30, 1, 6, '', ('2607:f8b0:400c:c03::63', 80, 0, 0)), (30, 2, 17, '', ('2607:f8b0:400c:c03::93', 80, 0, 0)), (30, 1, 6, '', ('2607:f8b0:400c:c03::93', 80, 0, 0))]
>>> ^D 
```

Ping 失败。

```
(nimbis)bschott@ironman:django-nimbis$ host www.google.com
www.google.com has address 173.194.75.103
www.google.com has address 173.194.75.99
www.google.com has address 173.194.75.104
www.google.com has address 173.194.75.106
www.google.com has address 173.194.75.105
www.google.com has address 173.194.75.147
www.google.com has IPv6 address 2607:f8b0:400c:c03::93
(nimbis)bschott@ironman:django-nimbis$ ping www.google.com
ping: cannot resolve www.google.com: Unknown host 
```

关闭 IPV6：

```
(nimbis)bschott@ironman:django-nimbis$ sudo networksetup -setv6off Ethernet
(nimbis)bschott@ironman:django-nimbis$ sudo dscacheutil -flushcache
(nimbis)bschott@ironman:django-nimbis$ ping www.google.com
ping: cannot resolve www.google.com: Unknown host
(nimbis)bschott@ironman:django-nimbis$ host www.google.com
www.google.com has address 173.194.75.103
www.google.com has address 173.194.75.99
www.google.com has address 173.194.75.104
www.google.com has address 173.194.75.106
www.google.com has address 173.194.75.105
www.google.com has address 173.194.75.147
www.google.com has IPv6 address 2607:f8b0:400c:c03::68 
```

强制 DHCP 租约更新，ping、gethostbyname、getaddrinfo 都可以正常工作。

```
(nimbis)bschott@ironman:django-nimbis$ ping www.google.com
PING www.google.com (173.194.75.103): 56 data bytes
64 bytes from 173.194.75.103: icmp_seq=0 ttl=46 time=25.218 ms
64 bytes from 173.194.75.103: icmp_seq=1 ttl=46 time=23.944 ms
64 bytes from 173.194.75.103: icmp_seq=2 ttl=46 time=24.213 ms
64 bytes from 173.194.75.103: icmp_seq=3 ttl=46 time=78.480 ms
64 bytes from 173.194.75.103: icmp_seq=4 ttl=46 time=24.502 ms
^C
--- www.google.com ping statistics ---
5 packets transmitted, 5 packets received, 0.0% packet loss
round-trip min/avg/max/stddev = 23.944/35.271/78.480/21.608 ms
bschott@ironman:django-nimbis$ python
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import socket
>>> socket.gethostbyname('www.google.com')
'173.194.75.147'
>>> socket.getaddrinfo('www.google.com', 80)
[(2, 1, 6, '', ('74.125.131.106', 80)), (2, 1, 6, '', ('74.125.131.147', 80)), (2, 2, 17, '', ('74.125.131.106', 80)), (2, 2, 17, '', ('74.125.131.99', 80)), (2, 1, 6, '',    ('74.125.131.99', 80)), (2, 2, 17, '', ('74.125.131.104', 80)), (2, 1, 6, '',  ('74.125.131.104', 80)), (2, 2, 17, '', ('74.125.131.105', 80)), (2, 1, 6, '', ('74.125.131.105', 80)), (2, 2, 17, '', ('74.125.131.103', 80)), (2, 1, 6, '', ('74.125.131.103', 80)), (2, 2, 17, '', ('74.125.131.147', 80)), (30, 1, 6, '', ('2607:f8b0:400c:c03::93', 80, 0, 0)), (30, 2, 17, '', ('2607:f8b0:400c:c03::93', 80, 0, 0))] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T20:28:50.260

如果您启用了 IPv6，您是否获得了正确的 IPv4 地址和默认路由？听起来你有一些奇怪的设置运行 NAT64。如果使用 AI_ADDRCONFIG 调用 getaddrinfo，则不会返回 IPv4 地址。

该`host`实用程序不使用系统查找例程，而是使用它自己的网络代码，因此`dscacheutil -flushcache`不会影响它。

# python - 在 matplotlib 中绘制具有固定限制的自动缩放子图

> ID：13612610
> 
> 赞同：2
> 
> 时间：2012-11-28T19:11:05.390
> 
> 标签：python, numpy, matplotlib, scipy

matplotlib 中制作一系列具有相同 X 和 Y 比例的子图的最佳方法是什么，但是这些子图是根据具有最极端数据的子图的最小/最大范围计算的？例如，如果您有一系列要绘制的直方图：

```
# my_data is a list of lists
for n, data in enumerate(my_data):
  # data is to be histogram plotted
  subplot(numplots, 1, n+1)
  # make histogram
  hist(data, bins=10) 
```

然后，每个直方图的 X 轴和 Y 轴将具有不同的范围/刻度。我希望这些都是相同的，并根据绘制的直方图的最极端直方图限制进行设置。一种笨拙的方法是记录每个图的 X/Y 轴的最小值/最大值，然后在绘制后遍历每个子图，并在绘制后仅遍历它们的轴，但必须有更好的方法在 matplotlib 中。

这可以通过某些轴共享变体来实现吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T19:20:07.517

[Matplotlib/Pyplot：如何将子图缩放在一起？](https://stackoverflow.com/questions/4200586/matplotlib-pyplot-how-to-zoom-subplots-together)

[http://matplotlib.org/examples/pylab_examples/shared_axis_demo.html](http://matplotlib.org/examples/pylab_examples/shared_axis_demo.html)

[http://matplotlib.org/users/recipes.html](http://matplotlib.org/users/recipes.html)

引用最后一个链接：

> Fernando Perez 提供了一个很好的顶级方法，可以一次在 subplots() 中创建所有内容（注意末尾的“s”），并关闭整个集合的 x 和 y 共享。您可以单独解压缩轴：
> 
> ```
> # new style method 1; unpack the axes
> fig, ((ax1, ax2), (ax3, ax4)) = plt.subplots(2, 2, sharex=True, sharey=True)
> ax1.plot(x) 
> ```
> 
> 或者将它们作为支持 numpy 索引的 numrows x numcolumns 对象数组返回：
> 
> ```
> # new style method 2; use an axes array
> fig, axs = plt.subplots(2, 2, sharex=True, sharey=True)
> axs[0,0].plot(x) 
> ```

如果您有`matplotlib`以下方法的旧版本应该可以工作（也引用最后一个链接）

> 轻松创建子图 在 matplotlib 的早期版本中，如果您想使用 pythonic API 并创建一个图形实例，并从中创建一个子图网格，可能带有共享轴，它涉及相当多的样板代码。例如
> 
> ```
> # old style
> fig = plt.figure()
> ax1 = fig.add_subplot(221)
> ax2 = fig.add_subplot(222, sharex=ax1, sharey=ax1)
> ax3 = fig.add_subplot(223, sharex=ax1, sharey=ax1)
> ax3 = fig.add_subplot(224, sharex=ax1, sharey=ax1) 
> ```

# java - javax.xml.transform.Source 对象的文件名/路径

> ID：13612611
> 
> 赞同：0
> 
> 时间：2012-11-28T19:11:07.053
> 
> 标签：java, inputstream

我有一个扩展 Source: 的输入供应商，`InputSupplier<? extends Source> supplier`我想获取源的文件名（和路径）。

目前 Source 始终是 StreamSource，所以我不知道这是否或多或少具有挑战性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:30:54.717

StreamSource.getSystemId 返回使用 setSystemId 设置的系统标识符，如果未调用 setSystemId，则返回 null。例子：

```
System.out.println(new StreamSource(new File("1.xml")).getSystemId());
System.out.println(new StreamSource(new FileReader("1.xml")).getSystemId());
System.out.println(new StreamSource(new FileReader("1.xml"), "d://workspace/x/1.xml").getSystemId()); 
```

印刷

```
file:/D:/workspace1/x/1.xml
null
d://workspace/x/1.xml 
```

所以这取决于 StreamSource 是如何创建的。

# windows - 无论如何要在 Windows 上覆盖 wxPython 中的空格键行为？

> ID：13612612
> 
> 赞同：0
> 
> 时间：2012-11-28T19:11:12.783
> 
> 标签：windows, wxpython, wxwidgets

我正在使用 wxPython。我有一个`wx.Dialog`带有一堆按钮的，还有一个`wx.TextCtrl`. 每个按钮都是一个`wx.Button`带有绑定事件的按钮`wx.EVT_BUTTON`。我按了几个按钮，他们就会做他们的事情。然后我想按空格键。有趣的是，我有一个标记为 SPC 的按钮，它对应于空格键的行为，以增加便利。我希望发生以下情况：

1.  您按下空格键按钮，它会识别空格键事件（有效）
2.  您按下键盘上的空格键，它会识别空格键事件

    一种。您按下键盘上的空格键，重点放在`wx.TextCtrl`...（作品）

    湾。您按下键盘上的空格键并专注于 a`wx.Button`因为这是您处理的最后一个事件并且空格键事件被识别（问题）

我已经做好了：

```
self.typingWindow.Bind(wx.EVT_KEY_DOWN, self.popup)
self.Bind(wx.EVT_KEY_DOWN, self.popup) 
```

第一行允许案例 2a 工作

第二行没有效果，但我认为应该？我看到了[这个旧链接](http://forums.wxwidgets.org/viewtopic.php?f=1&t=5997)，它解决了完全相同的问题，它似乎说像我的第二个代码行这样的事情将允许案例 2b 工作。无论如何，在情况 2b 中发生的情况是为最后按下的按钮生成命令事件。这应该是 Windows 的默认行为。

所以我的问题是我的案例 2b 可以工作吗？也就是说，即使焦点当前位于按下的最后一个按钮上，我是否可以生成一个按键事件但不是来自最后按下的按钮的命令事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:14:07.460

在对话框级别绑定到`wxEVT_KEY_DOWN`无法工作，因为对话框永远不会获得此事件，按键事件被发送到焦点窗口并且对话框永远不会，焦点总是在它的一个孩子身上。此外，请注意，与命令事件不同，键事件**不会**向上传播窗口层次结构。

因此，您可以在每个按钮级别处理此事件，也可以使用发送到顶级父级（即对话框）的特殊*事件*`wxEVT_CHAR_HOOK`来完全允许这种窗口全局键盘处理逻辑。

 *请注意，在任何情况下，如果按空格键除了激活当前聚焦的按钮之外还有其他任何操作，用户都会感到非常困惑，因为这是人们习惯的常见行为。所以我强烈建议首先避免这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:40:44.180

您可能必须将键事件绑定到每个单独的按钮并检查是否按下了空格按钮。如果是这样，请调用空格键按钮事件调用的方法。否则，忽略该事件。您也许可以使用 wx.AcceleratorTable，但我不确定。*

# node.js - 使用 OAuth 2 数据保护 API 调用

> ID：13612615
> 
> 赞同：0
> 
> 时间：2012-11-28T19:11:26.310
> 
> 标签：node.js, rest, oauth-2.0

我有 2 个节点应用程序。首先是用于 Mongo DB 的简单 RESTfull CRUD API。其次是在服务器中具有 Google OAuth 2 访问权限的 Backbone 应用程序（为此我使用 passport.js）。

我想在 Mongo DB 集合中存储经过身份验证的用户以及一些附加信息，例如角色或 grantAccess 字段。第一个应用程序必须检查用户是否有权访问数据。

问题是如何将有关用户的信息传递给我的 API，我需要发送哪些信息？我可以发送 oauth 令牌的散列副本，然后将其与来自 DB 或其他信息的散列文件进行比较吗？在这种情况下，最好的方法是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:56:05.043

有两种选择：

*   在您的服务器上实施 oauth2。

*   将您的谷歌访问令牌存储在您的主干上，然后在每次请求时将访问令牌发送到您的安静的 crud。在服务器上获取访问令牌所有者的 id，在 mongodb 中查询注册了 google id 的用户，并获取他们的权限。

我已经使用这种方法来验证我的应用程序（但使用 facebook），因为我认为你可以相信 facebook 或 google 的响应。

# javascript - 如何使用 jQuery 仅从内联样式中获取 css 属性？

> ID：13612616
> 
> 赞同：1
> 
> 时间：2012-11-28T19:11:26.483
> 
> 标签：javascript, jquery

我正在尝试计算具有隐藏父元素的元素的宽度。因为该元素不可见，所以它返回零宽度。所以我写了这个小函数：

```
/**
  * Compute the width of an element if it were to be visible.
  *
  * $element: The element you want to compute the width of
  * $hiddenParent: A parent (ancestor) of $element which is currently hidden
  *
  * Returns: the width of $element if it were to be visible.
  */
var getDisplayedWidth = function($element, $hiddenParent) {
    var oldDisplay = $hiddenParent.css("display");
    $hiddenParent.show();
    var displayedWidth = $element.width();
    $hiddenParent.css("display",oldDisplay);
    return displayedWidth;
}; 
```

它工作并返回显示的宽度。但问题是，“oldDisplay”的值并不是内联显示属性的真正旧值。它是显示属性的计算值。（这不是一个错误——这完全是我根据 jQuery 的文档所期望的。）

这种细微的差异意味着该方法在以下用例中失效 - 我们有一个元素，它最初`display:none`是通过类而不是内联样式控制的。所以`oldDisplay`设置为“无”。现在，当显示被放回时，`display:none`变成了内联样式。稍后在执行中，当其他一些 javascript 添加一个类以使其可见时，内联样式优先并且元素不会出现。

在这种情况下，我真正想做的是仅提取“显示”属性的内联样式版本。如果元素没有内联“显示”属性（如上例所示），那么我想`oldDisplay`将其设置为空字符串。

现在我已经解释了背景，简单地说就是这个问题 - 我如何仅从内联样式中获取 CSS 属性？

（PS：我知道我可以通过手动解析“style”属性来做到这一点。但我觉得必须有更好的方法，尤其是使用jQuery。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T06:34:35.770

这样做的问题是，如果父元素设置为 display:none，那么所有子元素也将显示 display:none 作为其计算样式。因此，除非您知道所有父母都是可见的，否则在相关元素上设置 display visible 可能不起作用。

此外，您不希望通过覆盖其先前的内联显示模式或覆盖其样式表声明来影响您的元素样式。

我写了这个小宝石来解决这两个问题：

```
jQuery.fn.locate = function() {
var o = this, a = [],
    n = o.filter(':hidden').parents(':hidden').addBack()
        .each(function(i){ a[i] = $(this).get(0).style.display || '' })
        .css('display','block'),
    xy = o.offset(), p = [ xy.left - parseInt(o.css('margin-left'),10), o.width(), xy.top - parseInt(o.css('margin-top'),10), o.height() ]
    n.each(function(i){ $(this).get(0).style.display = a[i] })
    return {'left':p[0], 'right':p[0] + p[1], 'width':p[1], 'top':p[2], 'bottom':p[2] + p[3], 'height':p[3]}
} 
```

这将搜索包括原始元素在内的所有父元素，记录它们的内联样式属性，将它们全部设置为 display:block，记录您的原始元素绝对定位信息，恢复所有受影响元素的内联样式，然后返回一个带有定位数据。您可以修改它以更改它返回的数据。

```
var t = $(elem).locate()
alert(t.width) 
```

这是一个更复杂的版本，它允许您存储包含多个元素的 jQuery 对象的定位数据。它将信息存储到每个元素的 .data() 属性中，并返回原始对象以维护链接。

```
jQuery.fn.markLocation = function() {
var o = this, a = [],
    n = o.filter(':hidden').parents(':hidden').addBack()
        .each(function(i){ a[i] = $(this).get(0).style.display || '' })
        .css('display','block')
    o.each(function(){
        var t = $(this), xy = t.offset(),
            p = [ xy.left - parseInt(t.css('margin-left'),10), t.width(), xy.top - parseInt(t.css('margin-top'),10), t.height() ]
        t.data({'left':p[0], 'right':p[0] + p[1], 'width':p[1], 'top':p[2], 'bottom':p[2] + p[3], 'height':p[3]})
    })
    n.each(function(i){ $(this).get(0).style.display = a[i] })
    return o
} 
```

要使用它：

```
var t = $('elems').markLocation()
var d = t.find(singleElement).data()
alert(d.width) 
```

是的，我故意以一种异端混乱的方式编码，并且从不打算改变:)

享受

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:28:18.200

如果样式`display: none`在样式表中设置为，你不能像这样获得宽度：

```
function getElWidth(el, elParent){
  elParent.show() // inline display: block
  var w = el.width();
  elParent.attr('style', '');
  return w;
} 
```

我想这使用了`style`属性，但只是一个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:29:02.913

一些代码可以在每个样式属性的 json 中获取单独的样式。

```
$(selector,this).each(function(index)
{
   var styletag=$(this).attr('style');
   var stylestemp=styletag.split(';');
   var styles={};
   var c='';
   for (var x in stylestemp) {
     c=stylestemp[x].split(':');
     styles[$.trim(c[0])]=$.trim(c[1]);
   }
   // do whatever with the styles json here.
}); 
```

或者也试试这个：

`$(".someSelector[style*=inline]").attr("myAttribute");`// 在方括号中给出任何带有条件的选择器，这将过滤掉具有内联样式的选择器。

# android - 自定义列表视图中的项目

> ID：13612620
> 
> 赞同：0
> 
> 时间：2012-11-28T19:11:33.687
> 
> 标签：android, android-layout, listview, android-listview

我有一个使用简单适配器构建的自定义列表视图。当我单击列表视图上的项目时，我想要该项目上的不同项目。示例：我的列表视图有两个文本字段和一个 ImageView 字段。因此，当我单击列表视图上的项目时，如何分别获取第一个文本和第二个文本。

```
 WeatherAdapter adapter = new WeatherAdapter(this,R.layout.listview_header_row, weather_data);
            listView1 = (ListView)findViewById(R.id.listView1);
            listView1.setAdapter(adapter);  

            listView1.setClickable(true);
            listView1.setOnItemClickListener(new AdapterView.OnItemClickListener() {

              @Override
              public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
                            //want to get the specific items...like R.id.txt1 and R.id.rtxt1

              }
            }); 
```

这是我定义的 Listview 和持有者......

```
 public View getView(int position, View convertView, ViewGroup parent) {
View row = convertView;
WeatherHolder holder = null;

if(row == null)
{
    LayoutInflater inflater = ((Activity)context).getLayoutInflater();
    row = inflater.inflate(layoutResourceId, parent, false);

    holder = new WeatherHolder();
    holder.imgIcon = (ImageView)row.findViewById(R.id.imageView1);
    holder.txtTitle = (TextView)row.findViewById(R.id.txt1);
    holder.txtRating=(TextView)row.findViewById(R.id.rtxt1);

    row.setTag(holder);
}
else
{
    holder = (WeatherHolder)row.getTag();
}

Weather weather = data[position];
holder.txtTitle.setText(weather.wtitle);
//holder.imgIcon.setImageResource(weather.wicon);
holder.imgIcon.setImageDrawable(weather.wicon);
holder.txtRating.setText(weather.wrating); 
return row;
} 

static class WeatherHolder
{
//Bitmap imgIcon;
ImageView imgIcon;
TextView txtTitle;
TextView txtRating;
}
} 
```

持有人的价值观是..

```
public class Weather {

public Drawable wicon;  
public String wtitle;
public String wrating;
public Weather(){
super();
}

public Weather(String icon, String title,String rating) {
    super();
    //this.wicon=LoadImageFromWeb(icon);

    this.wicon=LoadImageFromWebOperations(icon);
    this.wtitle = title;
    this.wrating=rating;
}

public static Drawable LoadImageFromWebOperations(String url) {
    try {
        InputStream is = (InputStream) new URL(url).getContent();
        Drawable d = Drawable.createFromStream(is, "src name");
        return d;
    } catch (Exception e) {
        return null;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:26:17.790

只需使用传递的视图（在您的情况下为 arg1）：

```
WeatherHolder holder = (WeatherHolder) arg1.getTag(); 
```

由于您尚未发布整个代码，因此很可能您也可以使用传递的位置。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:47:20.683

您可以在`View`表示第二个参数中查找所需的视图：

```
@Override
public void onItemClick(AdapterView<?> parent, View rowView, int position, long id) {
    String firsttext = ((TextView) rowView.findViewById(R.id.txt1)).getText().toString();
    String secondtext = ((TextView) rowView.findViewById(R.id.rtxt1)).getText().toString();
} 
```

或者，[`getItemAtPosition`](http://developer.android.com/reference/android/widget/AdapterView.html#getItemAtPosition%28int%29)如果您正确实现了适配器，则可以在第一个参数上使用该方法：

```
@Override
public void onItemClick(AdapterView<?> parent, View rowView, int position, long id) {
    Weather rowData = (Weather) parent.getItemAtPosition(position);    
    // get the data from rowData;
} 
```

# java - 选择正确的集合

> ID：13612623
> 
> 赞同：2
> 
> 时间：2012-11-28T19:11:41.287
> 
> 标签：java, collections

我正在设计一个需要特定集合的系统，它是用 Java 编写的。我需要存储股票价格的历史（日期和时间）。

一只股票可以有多个日期和时间，因为我想显示以前的价格。

我将使用哪个集合将股票 ID 映射到多个日期和时间？

我知道有 HashTable，但我看不出它们将如何工作，因为它们仍然只需要一个键和一个值。我有一个股票类，在其中我想要一个包含一个值和一个值的集合。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T19:13:47.463

一种选择是使用谷歌番石榴多地图（如果您可以包含第三方罐子）。

multi-map 允许您添加具有相同键的元素。

这是[简单的教程](http://tomjefferys.blogspot.com/2011/09/multimaps-google-guava.html)。

**编辑：**

如果不允许使用番石榴，那么另一种选择是：

```
HashMap<String, ArrayList<Stock>> map = HashMap<String, ArrayList<Stock>>() 
```

这`Stock`是带有时间戳和股票代码的简单 POJO 类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T19:13:57.830

假设你有一个`Price`对象，那么你可以使用这样的地图：

```
HashMap<String, ArrayList<Price>> map = HashMap<String, ArrayList<Price>>(); 
```

当然，您可以将密钥类型更改为您自己的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T19:14:06.467

您可以使用股票 ID 的映射作为键，使用价格列表作为值。

```
Map<Integer, List<Price>> stocks = new HashMap<Integer, List<Price>>(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T19:15:15.203

您可以使用 HashMap，其中键是 stockid，值是包含日期和时间的对象的数组列表。

`Map<Integer, ArrayList<Price>> anyname = new HashMap<Integer, ArrayList<Price>>();`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T19:24:19.110

您可以创建一个包含另一种类型的集合的哈希表。例如，如果您的股票 ID 是整数并且能够按时间顺序查看价格历史是您的主要用例，则创建一个数组列表的哈希表，并保持数组列表按日期排序：

```
HashMap< Integer, ArrayList<Stock> > stockCollection = new HashMap< Integer, ArrayList<Stock> >(); 
```

或者，如果您确实需要能够在 O(1) 时间内访问特定日期的股票价格，请创建一个哈希表的哈希表：

```
HashMap< Integer, HashMap<Date, Stock> > stockCollection = new HashMap< Integer, HashMap<Date, Integer> >(); 
```

# symfony - 检查用户是否在 Symfony 中访问了自己的个人资料

> ID：13612625
> 
> 赞同：0
> 
> 时间：2012-11-28T19:11:44.873
> 
> 标签：symfony, twig, symfony-2.1

我有一条通过 id 查找用户的路线。我想根据用户是访问自己的个人资料还是其他用户的个人资料，在个人资料上显示不同的内容。

控制器中的方法：

```
/**
 * @Route("/u/{id}", name="profile_show")
 * @ParamConverter("user", class="UserBundle:User")
 * @Template()
 */
public function showAction(User $user)
{
    $auth = $this->getUser();

    if ($user->getId() == $auth->getId()) {
        $auth->addRole('ROLE_PROFILE_OWNER');
    }

    return array(
        'user' => $user
    );
} 
```

Twig 中的输出：

```
 {% if is_granted('ROLE_PROFILE_OWNER') %}
            <p>This is my profile</p>
        {% else %}
            <p>This is not my profile</p>
        {% endif %} 
```

如果我执行 {{ dump(app.user) }}，该角色会显示在用户身上，但它会输出不是我的个人资料的文本。任何人都知道为什么这不起作用？

我也不知道这是否真的是做这样的事情的正确方法。我想遵循最佳实践，所以如果这完全错误，请赐教。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:02:56.957

凭据检查是在`showAction()`执行之前进行的，因此该`$auth->addRole('ROLE_PROFILE_OWNER');`行永远不会运行。这就是为什么您总是收到“这不是您的个人资料”消息的原因。

此外，您不应使用用户角色来执行此类配置文件所有权检查。相反，只需比较登录用户的`id`（存储在 Session 中）和 profile `user_id`。如果它们不相同，则抛出`AccessDeniedException()`.

查看文档[保护控制器](http://symfony.com/doc/current/book/security.html#securing-a-controller)和[会话管理](http://symfony.com/doc/master/components/http_foundation/sessions.html)页面。

# unicode - FoxPro、谷歌翻译和 Unicode

> ID：13612627
> 
> 赞同：1
> 
> 时间：2012-11-28T19:11:46.687
> 
> 标签：unicode, translate, visual-foxpro

我最近接到了写一段 FoxPro 来与谷歌翻译交互的任务，这样我们就可以将我们软件中的文本翻译成当前用户/机器的语言。

我找到/修改/编写的代码非常适合基于拉丁语的字符集，但如果你尝试像中文这样的代码，它会返回所有问号。

我已经尝试将 VFP 函数 STRCONV() 与每个可能的选项组合一起使用，但没有成功。我还尝试在以任何方式操作文本之前设置 LocaleID - 仍然没有运气。

在这一点上，我没有想法。作为一个老 DOS 程序员，我几乎没有处理 unicode 的经验。

我没有包含任何代码，因为正如我所说，除非您尝试将其与中文（或日语）一起使用，否则该代码可以正常工作。

请帮忙！

编辑：这是与谷歌通信的功能。还有其他支持功能，但它们与编码无关。

```
*   MODIFIED BY: MICHAEL COOLEY - 11/19/2012
*   PURPOSE: TRANSLATE TEXT FROM ONE LANGUAGE TO ANOTHER
*   EXPECTS: STRING (SOURCE LANGUAGE CODE)
*            STRING (DESTINATION LANGUAGE CODE)
*            STRING (THE TEXT TO TRANSLATE)
*   RETURNS: 
FUNCTION Translate(lcFrom,lcTo,lcText)
    LOCAL lcHttp AS MSXML2.XMLHTTP
    LOCAL lcRequest AS String

    lcRequest = "http://translate.google.com/translate_a/t?client=j" + ;
                "&"+"text="+this.EncodeURL(lcText)+"&"+"hl="+lcTo+"&"+"sl="+lcFrom+"&"+"tl="+lcTo

    lcHttp = CREATEOBJECT("MSXML2.XMLHTTP")
    lcHttp.open("GET",lcRequest,.f.)

    IF lcHttp.status == 200
        lcText = this.GetTranslationString("trans", lcHttp.responseText) + CHR(10)
    ELSE
        lcText = ""
    ENDIF

    RETURN lcText
ENDFUNC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:27:29.183

天哪，我不敢相信人们还在使用 FoxPro。中文的问题在于它可能使用 2 个字节来编码字符，而基于拉丁语的语言很可能是单字节，因此向后兼容 latin1 编码，这可能是 foxpro 使用的默认字符编码。

您的应用程序实际上在哪里中断？如，它只是一个渲染问题吗？或者您从用于与 Google 翻译服务进行通信的任何内容中获得的字符是否会返回乱码？

例如，如果您使用某种流表示（对不起，我不是 VBA 程序员，没有详细信息），该流对象应该具有设置字符编码的功能。

编辑：尝试像这样设置请求标头

`lcHttp.setRequestHeader "Content-Type", "text/html; charset=utf-8"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:24:18.830

Unicode 问题在 VFP 中并不新鲜，我建议阅读 Rick Strahl 的这篇文章：

--- 在 Visual FoxPro Web 和桌面应用程序中使用 Unicode ---

[http://www.west-wind.com/presentations/foxunicode/foxunicode.asp](http://www.west-wind.com/presentations/foxunicode/foxunicode.asp)

> 在本文中，我将介绍如何在同时支持多种语言的环境中将 Unicode 与您的应用程序一起使用。尽管 Visual FoxPro 不能直接显示 Unicode，但它可以通过使用 CodePages（一种特定于语言环境的字符映射）来显示不同的字符集，VFP 很容易支持它。这适用于仅显示来自单一语言/区域设置的内容的应用程序。但是如果您需要同时显示来自多种语言的字符串，这种方法有很大的局限性。我首先概述了问题以及如何使用 Unicode，然后向您展示如何检索和更新 Unicode 数据，最后向您展示如何让 Unicode 内容同时显示在您的 Web 和桌面用户界面中

# jquery - 确保鼠标在抽象形状的坐标内

> ID：13612628
> 
> 赞同：1
> 
> 时间：2012-11-28T19:11:48.153
> 
> 标签：jquery, html

我想不出一个过程或方法来做以下事情。任何建议都会很棒。解释我要做什么的最简单方法类似于美国各州的地图。移动时突出显示的州地图。

我不知道如何创建抽象对象的坐标并有一个激活（或触发）的鼠标悬停事件。

我已经尝试过到处寻找接近的东西，我发现了，但没有任何例子说明坐标是如何工作的。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:13:20.907

两个简单的解决方案是

*   好的旧[图像地图](http://en.wikipedia.org/wiki/Image_map)
*   [SVG](http://en.wikipedia.org/wiki/Scalable_Vector_Graphics)格式_

两者都允许您在 HTML 文档中的图像上定义形状并关联操作（通常是链接）。SVG 还允许在悬停形状时轻松定义样式更改（请参阅[教程](http://www.petercollingridge.co.uk/data-visualisation/mouseover-effects-svgs)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:19:33.903

此外，如果您不关心 IE8，您还可以使用绝对定位的 div 覆盖地图图像，并使用 [Transform 将它们倾斜成形状](https://developer.mozilla.org/en-US/docs/CSS/transform)

# phpmyadmin - phpMyAdmin：在全新安装 MAMP 时创建数据库时出错

> ID：13612636
> 
> 赞同：0
> 
> 时间：2012-11-28T19:12:36.493
> 
> 标签：phpmyadmin

刚刚在 OSX 10.6.8 上安装了 MAMP。Apache/MSQL 服务器都在运行。转到 phpMyAdmin，创建数据库，点击“创建”后，出现错误：db_create.php: Missing parameter: new_db

我把它全部扔掉，重新下载安装，重新安装和同样的事情。

我注意到在排序规则上设置了“排序规则”选择，我没有看到默认排序规则集，但我猜这是由于 Mac 版本/此版本的 phpMyAdmin。

由于我是通过 gui 执行此操作的，因此没有任何代码输入错误。

我会错过什么？我最终会安装 Drupal 进行本地测试。

哦，在 SQL 窗口中尝试标准 CREATE [dbname] 我得到：import.php：缺少参数：import_typeDocumentation import.php：缺少参数：formatDocumentation

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T23:53:02.747

重新安装了 Mamp 并删除了以前的别名。不知何故，在我的扩展坞中有一个别名到以前的安装搞砸了。将其丢弃，通过双击应用程序运行 MAMP，然后将新图标添加到停靠栏，一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T13:43:04.173

如果这对任何人都有帮助，我绕过块重新安装无济于事。检查了 apache 错误日志，出于某种原因 - 一台公司机器 - php-myadmin 在一个遥远的目录中寻找一堆 db_*.php 文件。我复制了它们，到目前为止一切都很好。

# google-apps-script - Google 站点中的 Google Apps 脚本小部件在新选项卡中打开链接

> ID：13612639
> 
> 赞同：1
> 
> 时间：2012-11-28T19:12:54.950
> 
> 标签：google-apps-script, google-sites

我有一个嵌入到 Google 站点中的 Google Apps Script UiApp。该应用程序包含锚点，其声明如下：

```
app.createAnchor("Back to Everyone", ScriptApp.getService().getUrl()+"?page=1").setTarget("_self"); 
```

将其作为独立的 Web 应用程序运行时，由于 setTarget("_self")，新页面将按预期在浏览器的同一选项卡中打开。但是，当从 Google 站点中运行应用程序时，链接会在新选项卡中打开，并且会看到 google 重定向“您确定”消息。

在 Google Site 中运行 Google Apps Script UiApp 时，有没有办法可以确保在同一选项卡中打开链接？

谢谢

# javascript - 为什么 parseInt(013) 返回 11？

> ID：13612640
> 
> 赞同：1
> 
> 时间：2012-11-28T19:12:59.320
> 
> 标签：javascript

> **可能重复：**
> [JavaScript parseInt 八进制错误的解决方法](https://stackoverflow.com/questions/850341/workarounds-for-javascript-parseint-octal-bug)

这是一个显示行为的[jsfiddle ：](http://jsfiddle.net/HjWsD/11/)

很简单的问题，有什么想法吗？

代码只是：

```
parseInt(013) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T19:15:03.893

因为如果你的数字以'0'开头，那么它被认为是八进制的，因此

```
'013' = 1 * 8 + 3 = 11 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-28T19:14:51.983

[parseInt()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)需要一个**字符串**。您提供了一个[八进制](http://www.diveintojavascript.com/core-javascript-reference/the-number-object), `013`。

**采用：**

```
parseInt('013', 10) 
```

**注意：**为了清楚起见，我也鼓励传递*radix*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T19:17:03.453

该数字`013`被解释为八进制。与它无关`parseInt`；事实上，`var a = 013;`会有。`a``11`

# mysql - 无法将浮点数或小数插入 mysql 数据库

> ID：13612641
> 
> 赞同：2
> 
> 时间：2012-11-28T19:13:19.047
> 
> 标签：mysql, sql

我想将值插入`33.55555`数据库。即使将 mysql 行更改为`float`or `decimal`，我也无法正确执行此操作。
mysql:

```
ALTER TABLE `test` CHANGE `test1` `test1` DECIMAL( 10,10 ) NOT NULL 
```

插入后通过此 sql 命令`33.55555`转换为`0.9999999999`

```
ALTER TABLE `test` CHANGE `test1` `test1` FLOAT( 10,10 ) NOT NULL 
```

`33.55555`被转换为`1.0000000000`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T19:26:02.660

您的 DECIMAL() 和 FLOAT() 声明已关闭。第一个参数是您希望数字的长度，第二个参数是其中有多少是小数。因此，当您说 FLOAT(10,10) 时，您是在说给我一个 10 位长的列，其中小数点后有 10 位。

Decimal 和 Float 在近似方面也不同。小数是定点值，而浮点数是浮点值。

.999999999 和 1.000000 是列的最大值。

试试这个插入 35.55555：

```
ALTER TABLE `test` CHANGE `test1` `test1` DECIMAL( 7,5 ) NOT NULL 
```

# javascript - 是否可以在 HTML5 中分别覆盖本地存储和会话存储？

> ID：13612643
> 
> 赞同：11
> 
> 时间：2012-11-28T19:13:28.350
> 
> 标签：javascript, html, local-storage, session-storage

我知道可以通过覆盖 Storage.prototype.getItem、setItem、removeItem 和 clear 来覆盖 HTML5 存储 API。但这将覆盖本地存储*和*会话存储的这些方法。

是否可以只覆盖一个而不覆盖另一个？还是分别覆盖两者？

一点背景：我有一个现有的应用程序，它大量使用本地存储和会话存储。我想添加一些临时代码以将本地存储中的内容镜像到另一种存储机制中，但我不想将会话存储内容与其一起拖动。

我可以更新对 localStorage 的每个引用以调用一些可以进行镜像的包装函数，但我真的不想更新所有这些调用。如果我可以通过覆盖一组存储方法来本地化这段代码，那会更干净。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-28T20:22:53.847

有几种可能性可以实现您想要的。但请记住，它们都不应该在生产环境中使用。

第一个选项检测`setItem`方法是否由`sessionStorage`或`localStorage`对象调用。你可以这样写：

```
var _setItem = Storage.prototype.setItem;

Storage.prototype.setItem = function(key, value) { 
    if (this === window.localStorage) {
         // do what you want if setItem is called on localStorage
    } else {
         // fallback to default action
         _setItem.apply(this, arguments);
    }
} 
```

第二个，替换原型`sessionStorage`或`localStorage`对象。它可能看起来像这样：

```
localStorage.__proto__ = Object.create(Storage.prototype);
localStorage.__proto__.setItem = function() {
    // your logic here
} 
```

请注意，我使用`__proto__`了非标准的伪属性，但在 Chrome 和 Firefox 中公开。（不了解 Opera、Safari 等）。但是，正如您所见，它在开发过程中可能会有所帮助。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2018-06-29T20:22:35.067

是的，本地存储和会话存储在 HTML5 中分别覆盖

```
localStorage.setItem('name', Krishna); //here local storege value is Krishna
sessionStorage.name = "Krishna"; //here Session storege value is Krishna 
```

在下面我们分别覆盖本地存储和会话存储值

```
localStorage.setItem('name', Sri); //here local storege value is Sri
sessionStorage.name = "Pal"; //here Session storege value is Pal 
```

# c# - AWS .NET 无法判断对象是否已成功删除

> ID：13612645
> 
> 赞同：0
> 
> 时间：2012-11-28T19:13:29.787
> 
> 标签：c#, .net, vb.net, amazon-s3, amazon-web-services

我试图研究这个，但我似乎找不到答案。在 .NET (VB.NET) 中，我有以下代码来删除 Amazon S3 中的对象：

```
client = Amazon.AWSClientFactory.CreateAmazonS3Client(accessKey, secretKey, RegionEndpoint.USEast1)
    Dim request As DeleteObjectRequest = New DeleteObjectRequest
    With request
        .BucketName = bucketName
        .Key = keyToDelete
    End With
    Try
        Dim resp As DeleteObjectResponse = client.DeleteObject(request)
        Dim headers As WebHeaderCollection = resp.Headers
        For Each key As String In headers.Keys
            Return "Response Header: " + key + "Value: " + headers.Get(key)
        Next
    Catch ex As AmazonS3Exception
        Return "Not Deleted"
    End Try
    Return "Deleted" 
```

我想不通的是我怎么知道该对象已成功删除？我以为它会抛出异常，但事实并非如此。我可以传递我想要的任何密钥，它不存在，它仍然可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:39:27.740

根据这个线程，[https://forums.aws.amazon.com/thread.jspa?threadID=60081](https://forums.aws.amazon.com/thread.jspa?threadID=60081)，除非函数抛出异常，否则对象被成功删除。但是，文档[http://docs.amazonwebservices.com/sdkfornet/latest/apidocs/html/M_Amazon_S3_AmazonS3_DeleteObject.htm](http://docs.amazonwebservices.com/sdkfornet/latest/apidocs/html/M_Amazon_S3_AmazonS3_DeleteObject.htm)确实确认了您看到的行为，如果对象不存在，它将成功返回。我猜这个理论是删除了一个不存在的对象。

在尝试删除之前，您可能必须检查对象是否存在。该线程[https://forums.aws.amazon.com/message.jspa?messageID=219046](https://forums.aws.amazon.com/message.jspa?messageID=219046)提供了几种方法。如果对象确实存在，则删除失败应引发异常。

# python - Python object.__new__() 在 main() 中没有参数

> ID：13612652
> 
> 赞同：0
> 
> 时间：2012-11-28T19:13:47.900
> 
> 标签：python, parameters

我尝试执行一些 python 代码，但我在传递参数时遇到了问题。我的python代码如下：

```
#!/usr/bin/python
import MySQLdb

class Sim(object):

    def print_db_parameters(self):
         print "Host = %s" %self.host
         print "User = %s" %self.user
         print "Password = %s" %self.password
         print "Database = %s" %self.database

def main():
    host = "localhost"
    user = "root"
    password = "root"
    database = "sim"
    sim_test = Sim(host,user,password,database)
    sim_test.print_db_parameters()

if __name__ == "__main__":
    main() 
```

当我运行它时，我收到以下错误：

```
Traceback (most recent call last):
  File "Sim.py", line 21, in <module>
    main()   
  File "Sim.py", line 17, in main
    sim_test = Sim(host,user,password,database)
  TypeError: object.__new__() takes no parameters 
```

你有什么主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T19:17:58.750

您的类没有`__init__`方法，但您将参数传递给构造函数。您应该创建一个`__init__`接受参数的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T19:22:12.500

您正在将参数传递给类构造函数

```
sim_test = Sim(host,user,password,database) 
```

但不接受他们。您必须创建一种`__init__`方法来处理它们。

```
#!/usr/bin/python
import MySQLdb

class Sim(object):
    def __init__(self, host, user, password, database):  #New method!!
        self.host = host
        self.user = user
        self.password = password
        self.database = database

    def print_db_parameters(self):
         print "Host = %s" %self.host
         print "User = %s" %self.user
         print "Password = %s" %self.password
         print "Database = %s" %self.database

def main():
    host = "localhost"
    user = "root"
    password = "root"
    database = "ARISTEIA_vax"
    sim_test = Sim(host,user,password,database)
    sim_test.print_db_parameters()

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T19:22:07.823

以示例跟进 mipadi：阅读一些关于 python 中面向对象编程的教程可能会非常有帮助[http://docs.python.org/2/tutorial/classes.html](http://docs.python.org/2/tutorial/classes.html)

```
class Sim(object):

    def __init__(self, host, user, password, database):
       self.host = host
       self.user = user
       self.password = password
       self.database = database

    def print_db_parameters(self):
         print "Host = %s" %self.host
         print "User = %s" %self.user
         print "Password = %s" %self.password
         print "Database = %s" %self.database 
```

# ajax - 让 ajax 将浏览器 cookie 呈现给另一个站点

> ID：13612653
> 
> 赞同：1
> 
> 时间：2012-11-28T19:13:50.287
> 
> 标签：ajax, authentication, cookies, cross-domain, client-side

我正在尝试发出 ajax 请求以获取另一个站点的 html，然后解析该 html 以获得特定链接。问题是，这个其他站点需要身份验证才能查看该页面。我在另一个选项卡中登录到这个站点，所以我认为执行获取 html 客户端的请求也会显示必要的 cookie 并会被验证，但每次我尝试请求时，它都会失败。我不确定 cookie 是否是 HttpOnly。

有什么方法可以请求获取页面的 html，即通过呈现浏览器每次向该站点发出 Http 请求时已经呈现的 cookie 来验证请求？

我的简单 ajax 请求可用于从不需要身份验证的站点获取 html，如下所示：

```
$.ajax({
       url: 'my url',
       success: function(data) {
            alert(data);
       } 
    }); 
```

使用 ajax 请求，我至少可以在使用`dataType: "jsonp"`. 通过这样做，我可以通过 javascript 控制台查看请求页面的 html，但返回的数据`{"readyState":4,"status":200,"statusText":"success"}`不是 html。有没有办法将响应 html 保存在 var 中进行解析？

这是我更新的请求：

```
$.ajax({
    url: 'my url',
    dataType: 'jsonp',
    success: function(data) {
       alert(JSON.stringify(data)+ " success");
    },
    error: function(data){
       alert(JSON.stringify(data)+" error")
    }
  }); 
```

返回的警报是错误警报，但 html 仍然可以从控制台看到作为注释。我认为可能发生的情况是该链接正在返回 html，但它需要 jsonp。想法？

# scala - 在 MongoDB / Casbah / Scala / 中增加嵌入对象值的更新

> ID：13612664
> 
> 赞同：1
> 
> 时间：2012-11-28T19:14:17.760
> 
> 标签：scala, mongodb, casbah

我需要增加嵌入对象的属性值的计数，或者如果它不存在则创建对象属性，或者如果不存在则创建整个记录，在 Scala 中使用 Casbah for MongoDB。如果可能的话，也有兴趣直接在 Mongo 中执行此操作。

例如，如果集合中没有对象，则首先添加一条带有给定的记录，并在属性的默认值中添加`_id`一个对象。此查询不起作用，但看起来像我期望的那样：`vals``1``a`

```
import com.mongodb.casbah.Imports._
coll.update(MongoDBObject("_id" -> "obj1"), $inc("vals" -> Map("a" -> 1)), true, false) 
```

这将导致以下记录：

```
{ "_id" : "obj1", "vals" : { "a" : 1} } 
```

现在将一个新对象插入到`vals`：

```
coll.update(MongoDBObject("_id" -> "obj1"), $inc("vals" -> Map("b" -> 1)), true, false) 
```

产量：

```
{ "_id" : "obj1", "vals" : { "a" : 1, "b" : 1 } } 
```

最后，使用与上一步完全相同的查询，更新/增加`b`属性的值：`vals`

```
coll.update(MongoDBObject("_id" -> "obj1"), $inc("vals" -> Map("b" -> 1)), true, false) 
```

产量：

```
{ "_id" : "obj1", "vals" : { "a" : 1, "b" : 2 } } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:14:17.760

结果很容易：

```
coll.update(MongoDBObject("_id" -> "obj1"), $inc("vals.a" -> 1), true, false) 
```

# java - 在功能上添加整数列表

> ID：13612666
> 
> 赞同：1
> 
> 时间：2012-11-28T19:14:27.223
> 
> 标签：java, recursion, functional-programming

正如标题所说，我正在尝试使用函数式编程范式添加一个整数列表。所以，根本没有突变。这是一个家庭作业，我的教授已经设置了方法定义，这就是我被卡住的部分原因，这就是我到目前为止所拥有的：

```
public static Integer sum(final List<Integer> values) {
     if(values.size() == 1) {
             return values.get(0);
     }
     else {
             List<Integer> tempList;
             tempList = values.subList(0, values.size() - 1);
             return sum(tempList);
     }
 } 
```

我只能返回一个 List，并且在创建后不能以任何方式对其进行修改，并且由于使用了泛型 List，因此无法访问构造函数。我可能会以错误的方式解决这个问题，我试图想办法将列表中的最后两个值相加，并将总和放在一个索引较短的新列表的最后一个位置。如果您看到更好的方法来做到这一点，或者可以将我推向答案，我将不胜感激，它的作业，所以不要寻找完整的代码块。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T19:16:33.753

您的`else`分支应包含列表中的第一个数字。此外，您应该在对 . 的调用中修复第二个参数`List.sublist`。的两个参数`List.sublist(fromIndex, toIndex)`指定一个子列表。`fromIndex`包含但`toIndex`排他。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:19:18.053

### 编辑：

哦，我明白了 - 你想要一个*递归*解决方案。试试这个单行，它在技术上甚至不使用`if`声明：

```
public static Integer sum(final List<Integer> values) {
     return values.isEmpty() ? 0 : values.get(0) + sum(subList(1, values.size());
} 
```

这可能会让你得到 9/10 的分数。对于满分，您需要添加 null 安全性：

```
public static Integer sum(final List<Integer> values) {
     return values == null || values.isEmpty() ? 0 : values.get(0) + sum(subList(1, values.size());
} 
```

* * *

完全披露，以前我有这个：

你的代码太多了！

```
public static Integer sum(final List<Integer> values) {
     int total = 0;
     for (int i : values) {
         total += i;
     }
     return total;
} 
```

仅供参考，自动装箱在`int`和之间平滑转换`Integer`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:34:48.477

您的原始答案非常接近。

提示：你得到一个由原始列表减去最后一个元素组成的子列表，但你只是把最后一个元素扔掉——你永远不会使用它的值。也许它应该包含在子列表的总和中？（答案=是）

另外，我可能会在方法的顶部投入：

```
if (values == null || values.isEmpty())
{
  return null;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T13:43:54.943

在 Haskell 中添加一个列表，作为查看明显解决方案的一种方式。sum 是一个加法的文件夹：

```
 sum xs = foldr (+) 0 xs 
```

内联文件夹

```
 sum xs = go (+) 0 xs
     where
         go _ z []     =  z
         go f z (x:xs) =  f x (go f z xs) 
```

专攻 (+)

```
 sum xs = go xs
     where
         go []     = 0
         go (x:xs) = x + (go xs) 
```

内联去得到我们的最终答案：

```
 sum []     = 0
 sum (x:xs) = x + sum xs 
```

这就是基本的递归解决方案。它同样适用于空列表或具有一个或多个元素的列表。你可以直接翻译成Java（我的Java超级生疏）：

```
 public static Integer sum(final List<Integer> xs) {
     if(xs.size() == 0) {
         return 0;
     } else {
         return xs.get(0) + sum(subList(1, xs.size());
     }
 } 
```

# jquery - 淘汰赛追加到类绑定

> ID：13612667
> 
> 赞同：0
> 
> 时间：2012-11-28T19:14:27.310
> 
> 标签：jquery, knockout.js, jquery-validate, wijmo

我正在使用 Knockout、wijmo 和 Jquery Validation。作为 jquery 验证正确工作要求的一部分，必须分配所需的类。当使用敲除完成此操作时，它会覆盖由 wijmo 分配的类。因此丢弃任何花哨的CSS。我想将所需的附加到课程中。

Knockout 使用模板从数据库中分配正确的输入。

```
<script type="text/html" id="WijmoTextAreaControl">
    <textarea  rows="5" data-bind="wijtextbox: {}, value: Value, wijtooltip: {title: 'Tooltip should be linked to an observable'}, attr: {placeholder: DatabaseName.PlaceholdText, class: DatabaseName.class}" />
</script> 
```

class: binding 将 wijmo 类替换为 required。无论如何要将类信息附加到绑定中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:20:30.633

您应该使用`css`绑定而不是`attr`分配类。

```
<textarea  rows="5" data-bind="wijtextbox: {}, value: Value, wijtooltip: {title: 'Tooltip should be linked to an observable'}, attr: {placeholder: DatabaseName.PlaceholdText}, css: {'Your class name': true}" /> 
```

# android - AdMob 与 AdSense 发布商政策和其他网络的政策

> ID：13612668
> 
> 赞同：-1
> 
> 时间：2012-11-28T19:14:30.693
> 
> 标签：android, admob, adsense

我想创建一个免费的应用程序，如果你想达到一个特定的活动，你需要点击一个广告才能到达那里。（假设一个用户玩了我的游戏，游戏结束了，他需要点击一个广告才能进入得分页面。）

我查看了 AdMob 政策，其中说：

> 广告不应放置在“死角”屏幕上。必须有一种方法可以在不点击广告的情况下退出屏幕（例如，“返回”或“菜单”按钮）。否则，应通知用户主页按钮将退出应用程序。

假设我在那个屏幕上创建一个菜单按钮，让用户回到开始，这样做可以吗？

因为 AdMob 正在运行 AdSense，它在其政策中规定：

> 您不得，也不得授权或鼓励任何第三方：(i) 直接或间接产生对任何广告、链接、搜索结果或推荐按钮的查询、推荐事件或印象或点击（包括但不限于点击任何视频广告的“播放”）通过任何自动、欺骗、欺诈或其他无效方式，包括但不限于通过重复手动点击、使用机器人或其他自动查询工具和/或计算机生成的搜索请求，和/或未经授权使用其他搜索引擎优化服务和/或软件；

这是否意味着我不允许这样做？（这两项政策均由 Google 创建。）

如果没有，您知道任何允许它的网络吗？

政策链接：

*   AdMob：[AdMob 发布商政策](http://support.google.com/adsense/bin/answer.py?hl=en&answer=48182)
*   AdSense：[AdSense 发布商政策](https://www.google.com/adsense/localized-terms)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:18:34.923

你不能强迫用户点击添加，或者以任何方式激励他们这样做。底线是，寻找不同的创收模式，也许是游戏内产品？

我真的怀疑任何广告网络都会允许您强迫用户点击广告来做任何事情。这完全违背了他们的模型。我很同情你，但你真的必须想出一个更好的商业计划来让事情顺利进行......

# c++ - 比较向量中元素的最有效和最快的方法？

> ID：13612677
> 
> 赞同：0
> 
> 时间：2012-11-28T19:14:51.670
> 
> 标签：c++, boost, vector, iterator

使用两个迭代器比较类向量中元素的最有效和最快的方法是什么？向量不是可排序的，我有一个重载的 ">" 类的运算符。我使用 boost foreach 进行简单的向量迭代。

我正在做类似于下面给出的事情。

```
vector<TestClass*> vec; 
vector<TestClass*>::iterator jIter;     
bool isErased=false;
vector<TestClass*>::iterator iIter = vec.begin();
if(!vec.empty()){
    while(iIter < vec.end()-1) {            
        isErased = false;
        for (jIter = iIter+1; jIter < vec.end();jIter++) {          
            if((*(*iIter))<=(*(*jIter))) {
                delete *jIter;
                jIter = vec.erase(jIter);               
                jIter--;
            }               
            else if((*(*iIter))>=(*(*jIter))) {                 
                delete *iIter;
                iIter = vec.erase(iIter);
                isErased = true;
                break;
            }               
        }
        if(!isErased) iIter++;
    } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:30:43.553

最棘手的部分是避免遇到无效的迭代器：

```
v.erase(std::remove_if(v.begin(), v.end(), [j](T const &i) { return i > j; }); 
```

您*也*可以使用循环，但在这种情况下使用反向迭代器

PS：我无法理解您在算法中*真正*想要实现的目标

你可能感兴趣

*   [is_sorted_until](http://en.cppreference.com/w/cpp/algorithm/is_sorted_until)
*   [分区点](http://en.cppreference.com/w/cpp/algorithm/partition_point)
*   [相邻查找](http://en.cppreference.com/w/cpp/algorithm/adjacent_find)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:30:14.763

未经测试，但类似这样的东西。

```
 for(auto it=vec.begin(), end=vec.end(); it!=end; ++it) {
   const auto&& val=*it;
   std::size_t count=0u;
   end=std::remove_if(
       it, end,
       [&](const TestClass& tc) -> bool {
           if(tc==val) ++count;
           return (count > 1);
       }
   );
 }
 vec.erase(end, vec.end()); 
```

# matlab - MATLAB - 需要找到一个统计量度

> ID：13612681
> 
> 赞同：-2
> 
> 时间：2012-11-28T19:15:04.360
> 
> 标签：matlab, octave

如果我们有一组数字的平均值，我们可以找到标准差。MATLAB中是否有一个命令，即一个参数，用于*将平均闭合曲线的数据与所有*原始闭合曲线的数据进行比较。我需要**像标准差这样的**统计量度。对于这种情况......想象一下我有

```
3 2 4 
2 3 7 
4 2 3 
```

均值

```
3
4
3 
```

然后是一些参数，如标准偏差，当然不适用于这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:53:07.407

您的问题的标题具有误导性。您似乎想要标准偏差，这很容易使用[`std`](http://www.mathworks.com/help/matlab/ref/std.html)

要获得行标准差，很简单

```
std(A, 0, 2) 
```

你的矩阵在哪里`A`，0 是计算 stdev 的方式，2 表示沿第二维，在 MATLAB 中是行维。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:23:57.970

本质上，该`mean`命令将执行此操作

```
> a=floor(rand(3)*9);   %This just creates a random matrix, it isn't important.
   a= 
     4  0  8
     7  8  0
     4  1  4
> mean(a)
ans =
     5  3  4
> mean(a,2)
ans =
    4
    5
    3 
```

注意第二个参数告诉系统在哪个维度上做平均值。同样的事情应该适用于标准偏差。

# objective-c - waitUntilAllOperationsAreFinished(NSOperationQueue)后面写了什么代码？

> ID：13612682
> 
> 赞同：0
> 
> 时间：2012-11-28T19:15:04.807
> 
> 标签：objective-c, ios, nsoperationqueue

[https://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html#//apple_ref/occ/instm/NSOperationQueue/waitUntilAllOperationsAreFinished](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html#//apple_ref/occ/instm/NSOperationQueue/waitUntilAllOperationsAreFinished)上对此方法的描述说：

*调用时，此方法会阻塞当前线程并等待接收者的当前和排队操作完成执行。当当前线程被阻塞时，接收器继续启动已经排队的操作并监视那些正在执行的操作。在此期间，当前线程无法向队列添加操作，但其他线程可以。一旦所有挂起的操作都完成了，这个方法就会返回。*

我想知道允许这种行为的*waitUntilAllOperationsAreFinished*背后的代码是什么（阻止当前线程，接收器继续......）？我有兴趣编写产生类似行为的代码，因此我会感谢任何以类似方式表现的等效代码（是的，Apple 对我来说是黑盒）。

更具体地说：NSOperationQueue 如何进行线程阻塞，同时允许接收器处理它的东西（我的猜测：在运行 currentRunLoop 时调度信号量）？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:23:37.363

正如你所说，实现是未知的。但它很容易实现这种行为：

```
- (void)waitUntilAllOperationsAreFinished
{
    while(self.operationCount != 0)
        [self _dispatchOperation];
} 
```

`_dispatchOperation`反过来会阻塞由队列管理的工作线程触发的信号量。当其中一个发出信号时，它将从其队列中分派下一个操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T03:06:24.490

意外地，我发现了这个：[How to implement an NSRunLoop inside an NSOperation](https://stackoverflow.com/questions/12285153/how-to-implement-an-nsrunloop-inside-an-nsoperation)，处理与我在这里提出的完全相同的问题：*“那么我如何在不锁定主线程的情况下完成与 waitUntilFinished:YES 相同的行为？”*

与我的另一个 SO 主题配对：[“块”主线程（dispatch_get_main_queue()）和（或不）定期运行 currentRunLoop - 有什么区别？](https://stackoverflow.com/questions/13620128/block-main-thread-dispatch-get-main-queue-and-or-not-run-currentrunloop)，它回答了我的问题。

稍后更新：有趣的源代码也与我的问题部分相关：[https ://github.com/gnustep/gnustep-base/blob/master/Source/NSOperation.m](https://github.com/gnustep/gnustep-base/blob/master/Source/NSOperation.m)

# perl - Perl HTTPS 443 错误

> ID：13612683
> 
> 赞同：0
> 
> 时间：2012-11-28T19:15:08.237
> 
> 标签：perl, https

我的 Perl 脚本适用于 PC。但是，当我在 Windows Server 2003 服务器上运行它时，它给了我：

> https 443 错误（500 无法连接到“网站”：443）。

我的脚本用于`LWP:UserAgent`从 HTTPS 地址下载文件。这是我到目前为止所做的：

1.  我测试了在该服务器上连接其他 HTTPS 地址，它们工作正常。
2.  我尝试设置`$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0`，但它不起作用。
3.  我尝试了`Mozilla::CA`and `CACertOrg::CA`，但它不起作用；我也试过设置`$ENV{HTTPS_CA_FILE}= "path to the downloaded CA file"`，但它不起作用。

这是我的部分原始脚本：

```
sub retrieveHTTPS {
    my ($url, $encrypted_file) = @_;
    use LWP::UserAgent;
    my $browser = LWP::UserAgent->new;
    my $response =
    $browser->get($url, ':content_file' => $encrypted_file);
    die "Error at $url\n ", $response->status_line, "\n Aborting"
            unless $response->is_success;} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:14:04.027

从 LWP::UserAgent 文档中：

> libwww-perl 核心不再为 SSL 捆绑协议插件。您将需要单独安装 LWP::Protocol::https 以启用对处理 https-URL 的支持。

您很可能没有在 Windows Server 2003 服务器上安装必要的模块来支持 HTTPS。

尝试安装 LWP::Protocol::https。

`use LWP::Protocol::https;`添加到您的脚本中以明确此依赖关系也是一个好主意。

# c# - 发布后路由不起作用

> ID：13612688
> 
> 赞同：2
> 
> 时间：2012-11-28T19:15:22.507
> 
> 标签：c#, asp.net, .net

我有一个 .NET 4.0“Web 应用程序”又名“Web 表单”。在这个应用程序中，我有一个“Web API 控制器类”和我的“Global.asax”

在 Global.asax 中，我的“Application_Start”方法中有以下代码。

```
var config = GlobalConfiguration.Configuration;

config.Routes.MapHttpRoute(
name: "DefaultApi"
, routeTemplate: "api/{controller}/{id}"
, defaults: new { id = System.Web.Http.RouteParameter.Optional }); 
```

当我启动本地调试会话时，我可以很好地使用我的路由。如果我输入“/api/ZipCodes”，我会得到预期的 JSON 响应。

当我将项目发布到我的远程 IIS 服务器（发布方法：文件系统）时，路由不再有效。我收到 404 错误。

我假设我需要在 IIS 上启用一个设置或某些东西，以便它识别和使用路由。

*   IIS 版本 7.0.6000.16386
*   .NET 应用程序池 4.0 版

*   我的网站与其他 7 个以上的网站都位于“C:\inetpub\hosts”中。没有人使用路由。

*   我有一个带有“Hello World”的 Default.aspx，我可以在远程 IIS 服务器和本地调试会话上正确访问它。
*   当我在本地机器上调试时，我可以输入“http://localhost:6358/api/ZipCodes”并获得我的 JSON 响应。如果我在远程机器“http://remoteserver.com/api/ZipCodes”上输入相同的 url，它会给我一个 404。

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:31:03.767

您的主文件夹设置正确吗？因为这就是今天发生在我身上的事。它应该指向应用程序的根文件夹，而不是服务器的根目录。

编辑：你能给我们你发布你的应用程序的文件夹吗？

此外，如果您想知道如何设置**“主文件夹”**（向服务器发出请求时服务器指向的文件夹，即：www.yoursite.com），请查看此链接： [https ://www.microsoft .com/technet/prodtechnol/WindowsServer2003/Library/IIS/a59a2665-9078-43ef-8b5a-5bf9bcacc95e.mspx?mfr=true](https://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/a59a2665-9078-43ef-8b5a-5bf9bcacc95e.mspx?mfr=true)

**总结一下：**

您必须将**“主文件夹”**设置为指向**应用程序的文件夹**，或将应用程序**文件放入****预设文件夹**（认为它的名称如下： **LocalDrive:\Inetpub\Wwwroot**）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:39:01.097

如果您的 IIS 是最新的（我假设是 7.0 或更高版本），并且应用程序池配置为用户框架 4.0，则应该可以使用任何其他操作或配置。

# ruby - Capistrano：require_relative 没有按预期工作

> ID：13612693
> 
> 赞同：4
> 
> 时间：2012-11-28T19:15:38.023
> 
> 标签：ruby, capistrano

假设以下 Rails 设置：

*   导轨 3.2.9
*   卡皮斯特拉诺 2.13.5
*   使用多级扩展（即 capistrano/ext/multistage）
*   定义的生产阶段，例如在`Rails.root/config/deploy/production.rb`.

在 production.rb 中，您似乎*无法*使用 require_relative — 您最终会收到“无法推断基本路径”错误。但是，如果您只是 plain `ruby production.rb`，则 require_relative 可以正常工作。

为什么会这样？Capistrano 似乎以一种使 require_relative 无法按预期工作的方式加载/执行代码。

我怀疑这类似于：[Passenger Rack app 'cannot infer basepath'](https://stackoverflow.com/questions/3811781/passenger-rack-app-cannot-infer-basepath)，这（粗略地说）表明 require_relative 可能会失败，具体取决于代码的最终加载/运行方式。

下面给出了分支 ruby​​_1_9_3 中 require_relative 的源代码，它显示了 require_relative 如何依赖于调用堆栈。然而，端到端的画面并不完整——Capistrano 如何查找和执行代码，以及它如何影响调用堆栈。

我不认为这里有什么是无法解决的，但是代替我自己深入研究这个问题的时间，任何关于正在发生的事情的专家见解都将不胜感激，不仅是为了具体问题，而且是为了洞察 Cap 和 Ruby工作。

```
// load.c
VALUE
rb_f_require_relative(VALUE obj, VALUE fname)
{
    VALUE base = rb_current_realfilepath();
    if (NIL_P(base)) {
        rb_raise(rb_eLoadError, "cannot infer basepath");
    }   
    base = rb_file_dirname(base);
    return rb_require_safe(rb_file_absolute_path(fname, base), rb_safe_level());
}

// vm_eval.c
VALUE
rb_current_realfilepath(void)
{
    rb_thread_t *th = GET_THREAD();
    rb_control_frame_t *cfp = th->cfp;
    cfp = vm_get_ruby_level_caller_cfp(th, RUBY_VM_PREVIOUS_CONTROL_FRAME(cfp));
    if (cfp != 0) return cfp->iseq->filepath;
    return Qnil;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:28:11.633

[http://pragprog.com/book/ruby3/programming-ruby-1-9](http://pragprog.com/book/ruby3/programming-ruby-1-9)说：

> 需要一个路径相对于包含调用的文件的库。因此，如果目录 /usr/local/mylib/bin 包含文件 myprog.rb 并且该程序包含以下行： require_relative "../lib/mylib" 那么 Ruby 将在 /usr/local/mylib/ 中查找 mylib库。

如果我有这样的目录结构：

```
a/b/c/d1
a/b/c/d2
a/b/c/d2/e/f1
a/b/c/d2/e/f2

$ pwd
a/b/c/d1
$ ruby -w ../d2/e/f1/test_req_rel 
```

文件`a/b/c/d2/e/f1/test_req_rel.rb`包含：

```
require_relative '../f2/req1' 
```

所以它会搜索 in `a/b/c/d2/e/f2`，因为调用是 in`a/b/c/d2/e/f1/test_req_rel.rb`并且 `'../f2/req1'`意味着从`f1`to `e`，然后转发 in `f2`，`req1.rb`必须存在的地方，否则你会得到错误“没有这样的文件要加载 - /a/b/c/c/d/ e (加载错误)"

（用 Ruby 1.9.2 测试）

# python - 使用龙卷风 RequestHandler 是否可以在不指定参数的情况下获取 POST 数据？

> ID：13612697
> 
> 赞同：5
> 
> 时间：2012-11-28T19:16:13.587
> 
> 标签：python, tornado

我正在尝试从此 CURL 语句中获取 POST 数据：

```
curl -d 'DATA HERE' http://localhost:8888/ 
```

我找不到执行此操作的方法，目前我在 POST 请求中使用了一个参数：

```
curl -d 'data=test' http://localhost:8888/ 
```

这是检索数据：

```
postData = self.get_argument('data', 'No data') 
```

这很好用，但我不想指定 POST 参数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T21:51:39.470

来自发布请求的原始正文在`self.request.body`

# qt - 在 Ubuntu 上无法进入 QT 源代码

> ID：13612703
> 
> 赞同：0
> 
> 时间：2012-11-28T19:16:29.497
> 
> 标签：qt, ubuntu

> **可能重复：**
> [需要进入 Qt 源代码（我的 IDE 是 Qt Creator）](https://stackoverflow.com/questions/5049578/need-to-step-into-qt-sources-my-ide-is-qt-creator)

我使用以下配置选项在 Ubuntu 12.04 LTS（64 位）上构建了 QT 4.8.3：

./configure -webkit-debug -debug-and-release -opensource -openssl -I ~/openssl-1.0.0d/include

当我调试和跟踪我自己使用 qt4.8.3 编译版本构建的应用程序时，我无法进入 QT 源代码。

我检查了 Qt 安装文件夹下的文件：/usr/local/Trolltech/Qt-4.8.3/lib，我只看到每个编译的 lib 都有一个 libXXXXX.so.4.8.3 文件。我期待看到用于发布和调试版本的单独库。

每当我在我的应用程序中创建 QScriptEngine 的新实例时，它都会立即崩溃。因此，我想进入 QT 源代码，看看发生了什么。请告知我可以做些什么来进入 ubuntu 上的 Qt 源代码。

# django - Django 模板启动

> ID：13612706
> 
> 赞同：1
> 
> 时间：2012-11-28T19:16:34.350
> 
> 标签：django, templates, include

我正在尝试创建一个包含一组块标签的文件，如下所示：

```
help.html
{% block help1 %} This is help1 {% endblock %}
{% block help2 %} This is help2 {% endblock %} 
```

我的意图是包含这个文件并让它由一个已经有`extends`标签的子模板呈现。

孩子的一个例子看起来像这样：

```
child.html
{% extends "base.html" %}
... some HTML ...
{% block help1 %}{% endblock %}
... some HTML ...
{% block help2 %}{% endblock %} 
```

我试过`{% include "help.html" %}`了，但它渲染了“help.html”中的块。但是，我只想让这些块在不同的文件中被*调用*，以便将它们全部组织起来。

关于我可能做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:24:17.193

让 help.html 从 base.html 扩展，然后让 child.html 从 help.html 扩展。更改`{% block help1 %}{% endblock %}`为`{% block help1 %}{{ block.super }}{% endblock %}`; 这样，您可以将块放在您想要的位置，但使用 help.html 中定义的块内容。

# php - 头页中的兼容性浏览器（悬停）与 firefox

> ID：13612708
> 
> 赞同：0
> 
> 时间：2012-11-28T19:16:43.897
> 
> 标签：php, javascript, css, firefox, browser

当我将 Firefox 更新到版本 17 时，我的网站的子菜单不再出现。当我安装旧版本（如 15）时，子菜单可以正常工作。

问题就像这个网站：[http ://www.terragon.net/](http://www.terragon.net/)

您必须拥有 17 或更高版本才能查看 Firefox 的问题。该问题仅出现在前 3 个菜单中；其他工作正常。

有什么问题？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:42:43.187

您没有很好地描述您的问题，但是如果您指的是菜单拉伸以填充空间，那么您的问题似乎源于`width:auto`您`.stctb`桌子上的 CSS 属性。如果您将该宽度设置为固定量（无论您希望菜单是多少像素宽，加上左侧 TD 的宽度），它应该可以解决这个问题。

# java - java.util.MissingResourceException：找不到 CS 的 3 个字母的国家/地区代码

> ID：13612710
> 
> 赞同：4
> 
> 时间：2012-11-28T19:16:54.470
> 
> 标签：java, swing, jcombobox, country-codes

我得到了例外：

```
Exception in thread "AWT-EventQueue-0" java.util.MissingResourceException: Couldn't find 3-letter country code for CS
    at java.util.Locale.getISO3Country(Locale.java:1521)
    at Business.CountryList.CountryList(CountryList.java:29) 
```

我这样调用函数：

```
countryJComboBox.removeAllItems();
countryJComboBox.addItem(CountryList.CountryList(new String[0])); 
```

CountryList 类如下：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package Business;

import java.text.Collator;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;
import java.util.Locale;

/**
 *
 * @author Vivek
 */
public class CountryList {
    public static Country CountryList(String[] args) {
        List<Country> countries = new ArrayList<>();

        Locale[] locales = Locale.getAvailableLocales();
        for (Locale locale : locales) {
            String iso = locale.getISO3Country();
            String code = locale.getCountry();
            String name = locale.getDisplayCountry();

            if (!"".equals(iso) && !"".equals(code) && !"".equals(name)) {
                countries.add(new Country(iso, code, name));
            }
        }
        Collections.sort(countries, new CountryComparator());
        Country returnCountry = null;
        for (Country country : countries) {
            returnCountry = country;
        }
        return returnCountry;
    }
}

class CountryComparator implements Comparator<Country> {
    private Comparator comparator;
    CountryComparator() {
        comparator = Collator.getInstance();
    }

    @Override
    public int compare(Country o1, Country o2) {
        return comparator.compare(o1.name, o2.name);
    }
}

class Country {
    private String iso;
    private String code;
    public String name;
    Country(String iso, String code, String name) {
        this.iso = iso;
        this.code = code;
        this.name = name;
    }

    @Override
    public String toString() {
        return iso + " - " + code + " - " + name.toUpperCase();
    }
} 
```

请帮我修复异常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T19:23:40.933

基本上，它所在的语言环境似乎没有 3 个字母的国家代码。由于您试图忽略无论如何都没有 3 个字母 iso 代码的国家/地区：

```
for (Locale locale : locales) {
   try {
     String iso = locale.getISO3Country();
     String code = locale.getCountry();
     String name = locale.getDisplayCountry();
     if (!"".equals(iso) && !"".equals(code) && !"".equals(name)) {
        countries.add(new Country(iso, code, name));
     }
   catch (MissingResourceException e){
     //do nothing
   }
} 
```

有关更多信息，请参阅[Java 文档](http://docs.oracle.com/javase/7/docs/api/java/util/Locale.html#getISO3Country%28%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-29T18:19:00.727

看，对我来说，那条线上的国家似乎没有被宣布......

```
for (Country country : countries) {
        returnCountry = country; 
```

只需声明该变量...可以吗？

# cakephp - 防止用户管理页面上的密码覆盖

> ID：13612712
> 
> 赞同：0
> 
> 时间：2012-11-28T19:16:56.650
> 
> 标签：cakephp, authentication

我正在为我的站点开发一些管理功能，具有管理员权限的用户能够为给定的用户 ID 打开表单。通过这种形式，他们可以更改用户权限、更改用户密码或其他方式。

但是，当从模型构造表单时，密码字段会从数据库中提取散列密码并填充密码字段。结果，当管理员保存表单时，散列密码被视为明文，因此再次散列，覆盖原始密码。

我需要的是某种方法来允许管理员用户更改表单，但只有在更改时才在数据库上散列和更新密码。

我的想法是将表单设置密码构造为空白：

查看/用户/edit.ctp：

```
echo $this->Form->input('User.password',array(
        'value' => '',
        'type' => 'password',
        'autocomplete' => 'off'
    )
); 
```

`save`并对跳过密码进行某种检查；但这就是我卡住的地方。

控制器/用户控制器.php

```
public function edit($id = null) 
{
    $this->User->id = $id;
    if ($this->request->is('get')) 
    {
        $this->request->data = $this->User->read();
    } else  {
        //Something here????
        if ($this->User->save($this->data))
        {
            $this->Session->setFlash('Your user has been updated.');
            $this->redirect(array('action' => 'index'));
        } else 
        {
            $this->Session->setFlash('Unable to update your user.');
        }
    }

    $this->set('groups',$this->User->Group->find('list'));//, array( 'fields' => array('id', 'name'))));
    $this->set('sites',$this->User->Site->find('list'));//, array( 'fields' => array('id', 'name'))));
} 
```

**如果没有更改，如何检查并防止密码更新？**

**决定的解决方案**：

根据提供的答案，我在同一页面上使用了第二个表单，该表单重新使用了用户通过的注册验证。更新站点/组权限时，用户通过一种形式发送，而密码通过另一种形式发送。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:21:45.783

我会构建两种管理表单，一种用于更改权限，另一种仅用于更新密码。当您使用它时，更改密码表单应该有第二个字段用于验证更改。

有一些 CakePHP 插件可以帮助管理用户，特别是密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:48:00.030

我总是创建一个专门用于更改密码的新表单。您应该将密码字段替换为更改密码的链接。

或者，您可以禁用输入字段并要求单击按钮并使用 javascript 删除`disabled`输入元素上的属性

```
echo $this->Form->input('User.password',array(
        'value' => '',
        'type' => 'password',
        'autocomplete' => 'off',
        'disabled' => true
    )
); 
```

Jquery，因为它很容易

```
$(function(){
   $('UsersPassword').click(function(){
      $(this).attr('disabled', '0');
   });
}); 
```

# javascript - 防止禁用按钮内的图标触发点击？

> ID：13612718
> 
> 赞同：2
> 
> 时间：2012-11-28T19:17:04.107
> 
> 标签：javascript, jquery

试图找出正确的方法来使单击事件不会在禁用链接的图标上触发。问题是当您单击图标时，它会触发单击事件。我需要选择器包含子对象（我认为），以便在启用链接时单击它们触发事件，但在禁用父对象时需要排除子对象。

**链接在页面加载后动态设置禁用属性。这就是我使用 .on 的原因**

此处演示：（**新链接，忘记将链接设置为禁用）**

[http://jsfiddle.net/f5Ytj/9/](http://jsfiddle.net/f5Ytj/9/)

```
<div class="container">
    <div class="hero-unit">
        <h1>Bootstrap jsFiddle Skeleton</h1>
        <p>Fork this fiddle to test your Bootstrap stuff.</p>
        <p>
            <a class="btn" disabled>
                <i class="icon-file"></i>
                Test
            </a>
        </p>
    </div>
</diV>​

$('.btn').on('click', ':not([disabled])', function () { alert("test"); });​ 
```

**更新：** 我觉得我没有正确使用 .on ，因为它没有考虑 $('.btn') ，只搜索子事件。所以我发现自己在做类似`$('someParentElement').on`or之类的事情`$('body').on`，因为它假设元素出现在特定上下文中（有人移动链接，现在 javascript 中断），所以更难维护，而我*认为*第二种方法效率低下。

这是第二个在启用/禁用情况下都能正常工作的示例，但我觉得必须首先选择父元素真的很糟糕，因为如果有人重新排列页面布局，事件将中断：

[http://jsfiddle.net/f5Ytj/32/](http://jsfiddle.net/f5Ytj/32/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:20:55.887

```
.on('click', ':not([disabled])' 
```

^ 这意味着，由于 icon 是 button 的子元素`".btn"`，并且它没有被禁用，因此该函数将执行。

也可以禁用图标，或者仅将事件侦听器应用于`<a>`您的按钮标签，或者使用`e.stopPropagation();`

~~我建议使用`e.stopPropagation();`，这应该可以防止图标响应点击。~~

这似乎对我不起作用^

但是，[禁用图标。](http://jsfiddle.net/YLKN7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:23:44.067

您没有正确使用选择器。

```
$('.btn').not('[disabled]').on('click', function () { 
    alert("test"); 
});​ 
```

[看到它住在这里。](http://jsfiddle.net/f5Ytj/34/)

**编辑：**

```
$('.container').on('click', '.btn:not([disabled])', function () { 
    alert("test"); 
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T19:27:32.457

我更愿意在此处使用委托添加事件，因为您尝试基于元素的属性来创建事件。

您可以添加检查条件以查看是否要运行代码。

```
$('.container').on('click', '.btn', function() {
    if( $(this).attr('disabled') !== 'disabled'){
        alert('test!!');
    }
});​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/f5Ytj/38/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T19:32:13.110

如果您只想监听`.btn`元素本身的点击，请不要使用事件委托：

```
$('.btn').on('click', function() { 
    if (!this.hasAttribute("disabled"))
        alert("test");
});​ 
```

如果您使用事件委托，则按钮需要是匹配元素：

```
$(someParent).on('click', '.btn:not([disabled])', function(e) {
    alert('test!!');
});​ 
```

*   [演示](http://jsfiddle.net/f5Ytj/68/)

或者使用`button`真正可以禁用的 true ：

```
<button class="btn" [disabled]><span class="file-icon" /> Test</button> 
```

*   [演示](http://jsfiddle.net/f5Ytj/35/)，[已禁用](http://jsfiddle.net/f5Ytj/36/)。

在这里，禁用时根本不会触发 click 事件，因为它是一个适当的表单元素，而不是一个简单的锚点。只需使用

```
$('.btn').on('click', function() { 
    if (!this.disabled) // check actually not needed
        this.diabled = true;
    var that = this;
    // async action:
    setTimeout(function() {
        that.disabled = false;
    }, 1000);
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T19:20:30.940

我认为你需要的是：

```
e.stopPropagation(); 
```

见：[http ://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T19:44:43.330

基本上像下面这样的东西应该工作

```
$('.icon-file').on('click', function(event){event.stopPropagation();}); 
```

您可能希望添加一些逻辑，以便仅在禁用按钮时停止冒泡事件。

**更新：**

不确定，但这个选择器应该可以工作：

```
$('.btn:disabled .icon-file') 
```

# ruby - Nokogiri::XML.parse 是否应该为换行创建单独的文本节点？

> ID：13612719
> 
> 赞同：1
> 
> 时间：2012-11-28T19:17:16.083
> 
> 标签：ruby, xml-parsing, nokogiri

我有一个由外部工具创建的 XML 文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<suite>
  <id>S1</id>
  <name>First Suite</name>
  <description></description>
  <sections>
    <section>
  <name>section 1</name>                    
      <cases>
        <case>
          <id>C1</id>
          <title>Test 1.1</title>
          <type>Other</type>
          <priority>4 - Must Test</priority>
          <estimate></estimate>
          <milestone></milestone> 
          <references></references> 
        </case>                             
        <case>
          <id>C2</id>
          <title>Test 1.2</title>
          <type>Other</type>
          <priority>4 - Must Test</priority>
          <estimate></estimate>
          <milestone></milestone> 
          <references></references> 
        </case>
      </cases>
    </section>
  </sections>
</suite> 
```

从 irb，我执行以下操作：（输出被抑制直到最终命令）

```
> require('nokogiri')
> doc = Nokogiri::XML.parse(open('./test.xml'))
> test_case = doc.search('case').first
=> #<Nokogiri::XML::Element:0x3ff75851bc44 name="case" children=[#<Nokogiri::XML::Text:0x3ff75851b8fc "\n          ">, #<Nokogiri::XML::Element:0x3ff75851b7bc name="id" children=[#<Nokogiri::XML::Text:0x3ff75851b474 "C1">]>, #<Nokogiri::XML::Text:0x3ff75851b1cc "\n          ">, #<Nokogiri::XML::Element:0x3ff75851b078 name="title" children=[#<Nokogiri::XML::Text:0x3ff75851ad58 "Test 1.1">]>, #<Nokogiri::XML::Text:0x3ff75851aa9c "\n          ">, #<Nokogiri::XML::Element:0x3ff75851a970 name="type" children=[#<Nokogiri::XML::Text:0x3ff75851a6c8 "Other">]>, #<Nokogiri::XML::Text:0x3ff7585191d8 "\n          ">, #<Nokogiri::XML::Element:0x3ff7585190d4 name="priority" children=[#<Nokogiri::XML::Text:0x3ff758518d64 "4 - Must Test">]>, #<Nokogiri::XML::Text:0x3ff758518ad0 "\n          ">, #<Nokogiri::XML::Element:0x3ff7585189a4 name="estimate">, #<Nokogiri::XML::Text:0x3ff758518670 "\n          ">, #<Nokogiri::XML::Element:0x3ff758518558 name="milestone">, #<Nokogiri::XML::Text:0x3ff7585182b0 "\n          ">, #<Nokogiri::XML::Element:0x3ff758518184 name="references">, #<Nokogiri::XML::Text:0x3ff758517ef0 "\n        ">]> 
```

这会产生一些如下所示的子级：

```
#<Nokogiri::XML::Text:0x3ff758517ef0 "\n        "> 
```

我想遍历这些 XML 节点，而不必执行以下操作：

```
> real_nodes = test_case.children.reject{|n| n.node_name == 'text' && n.content.strip!.empty?} 
```

我在 Nokogiri 文档中找不到 parse 参数来禁止将换行符视为单独的节点。有没有办法在解析期间而不是之后做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-18T15:25:17.543

检查[文档](http://nokogiri.org/Nokogiri/XML/ParseOptions.html "文件")。你可以这样做：

```
doc = Nokogiri::XML.parse(open('./test.xml')) do |config|
    config.noblanks
end 
```

这将加载没有任何空节点的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T06:57:24.103

文本节点是漂亮打印 XML 的结果。该规范不需要标签之间的空格，并且为了提高效率，一个巨大的 XML 文件可以去除标签间的空格以节省空间并减少传输时间，而不会牺牲数据内容。

这可能显示正在发生的事情：

```
require 'nokogiri'

xml = '<foo></foo>'
Nokogiri::XML(xml).at('foo').child
=> nil 
```

标签之间没有空格，也没有文本节点。

```
xml = '<foo>
</foo>'
Nokogiri::XML(xml).at('foo').child
=> #<Nokogiri::XML::Text:0x3fcee9436ff0 "\n">
doc.at('foo').child.class
=> Nokogiri::XML::Text 
```

使用空格进行漂亮打印，XML 在`foo`标签后面有一个文本节点。

# c# - 在 Windows 中挂起/恢复的套接字会发生什么

> ID：13612721
> 
> 赞同：10
> 
> 时间：2012-11-28T19:17:19.747
> 
> 标签：c#, .net, sockets, c#-4.0

我有 ac# .net4 应用程序，它使用 BeginReceiveFrom 和 EndRecieveFrom 侦听套接字。一切都按预期工作，直到我让机器进入睡眠状态然后恢复。

此时 EndReceieveFrom 执行并引发异常（无法访问已处置的对象）。看来，当机器暂停时，套接字已被处理，但我不知道如何处理这个问题。

我是否假定所有套接字都已被处理并从头开始重新创建它们？我在追踪确切问题时遇到问题，因为远程调试也会在暂停/恢复时中断。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:51:54.480

挂起/恢复期间发生的情况很大程度上取决于您的硬件和网络设置。如果您的网卡在挂起期间没有被禁用，并且挂起是短暂的，那么打开的连接将在挂起/恢复时没有任何问题（当然，打开的 TCP 连接可能会在另一端超时）。

但是，如果您的网络适配器在睡眠期间被禁用，或者是 USB 适配器因为连接到禁用的集线器而被禁用，或者您的计算机从 DHCP 获得了新的 IP 地址，或者您的无线适配器重新连接到不同的接入点等，那么所有当前连接都将被丢弃，监听套接字将不再有效等。

这**不是**特定于睡眠/恢复。网络接口可以随时启动和关闭，您的代码必须处理它。您可以使用 USB 网络适配器轻松模拟此操作，例如将其从计算机中拉出，您的代码必须处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T23:32:45.727

我在挂起/恢复和套接字方面遇到了类似的问题（在 .NET 4 和 Windows 8 下，但我怀疑不限于这些）。

具体来说，我有一个只接收数据的客户端套接字应用程序。阅读是通过 BeginReceive 和回调完成的。回调中的代码处理了典型的故障情况（例如，远程服务器是否正常关闭连接）。

当客户端机器进入睡眠状态时（这可能也适用于较新的 Windows 8 快速启动模式，这实际上只是一种睡眠/休眠），服务器将在几秒钟后关闭连接。但是，当客户端醒来时，没有调用异步读取回调（我希望会发生这种情况，因为它应该在套接字有错误条件/除了有数据之外关闭时被调用）。我在客户端上明确添加了计时器代码，以定期检查这种情况并恢复，但是即使在这里（并使用 Poll、Available 和 Connected 的组合来检查连接是否已启动）客户端上的套接字仍然出现已连接，因此恢复代码永远不会运行。我想如果我尝试发送数据，那么我会收到一个错误，但正如我所说，这严格来说是单向的。

我最终使用的解决方案是检测从睡眠状态恢复并在发生这种情况时关闭并重新建立我的套接字连接。检测简历的方法有很多种；在我的情况下，我正在编写一个 Windows 服务，所以我可以简单地覆盖 ServiceBase.OnPowerEvent 方法。

# html - 如何为 EaselJS DisplayObject 使用动态调整大小的 hitArea？

> ID：13612730
> 
> 赞同：0
> 
> 时间：2012-11-28T19:18:00.640
> 
> 标签：html, canvas, easeljs, createjs

我想在我的 EaselJS 项目中使用 hitArea 来捕获点击事件，但是我分配的 hitArea 形状似乎没有得到尊重。

[jsFiddle 示例](http://jsfiddle.net/AEDVW/)

```
var stage = new createjs.Stage($("#game")[0]);

// This will be a big button
var container = new createjs.Container();
stage.addChild(container);

// This defines the hit area of the button
var hitArea = new createjs.Shape();
var hitAreaGraphics = hitArea.graphics;
// A 1x1 black square, centered about the origin
hitAreaGraphics.beginFill("#000").drawRect(-0.5, -0.5, 1, 1).endFill();

// Assign the hitArea
container.hitArea = hitArea;
// container.addChild(hitArea);

container.onTick = function() {
    var canvas = container.getStage().canvas;
    container.x = canvas.width / 2;
    container.y = canvas.height / 2;
    container.scaleX = canvas.width;
    container.scaleY = canvas.height;
};
container.onPress = function() {
    alert("Eureka!");
};

// Run the simulation
updater = {
    tick: function() { stage.update(); }
};
createjs.Ticker.addListener(updater);
​ 
```

如果我将 hitArea 形状添加为容器对象的子对象，则单击事件可以正常工作。

# javascript - 如何使用 angularjs 设置虚拟属性？

> ID：13612732
> 
> 赞同：0
> 
> 时间：2012-11-28T19:18:05.653
> 
> 标签：javascript, ruby-on-rails, angularjs

我来自`Rails`背景，正在尝试使用`AngularJS with Rails`. 我被困在一件非常简单的事情上：如何在一个`Angularjs environment`? 让我举个例子吧。

我有一个名为 Medication 的 rails 模型，它有两个属性，dose 和 count。我想要一个返回剂量*计数的“总”虚拟属性。这在 Rails 中是微不足道的，因为它只是 Medication 类的一个实例方法。

那么，它是如何映射到`AngularJS`世界的呢？

澄清：我正在对我有一个`MedicationsController`. 对于每个 ng-repeat 循环，我得到一个“ `medication`”对象，我想在其中应用这个“实例方法”

```
total = function() { return dosage * count } 
```

那是怎么编码的？我把函数放在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T19:56:51.597

使用 AngularJS 非常简单，因为您可以在 AngularJS 视图中使用任何 JavaScript 函数。因此，只需在您的对象上（或直接在范围上）定义一个函数。例如，给一个这样的控制器：

```
var MedicationCtrl = function($scope) {    
    $scope.medication = {
        dosage : 0.5,
        count : 10,
        total : function() {
            return this.dosage * this.count;
        }
    };
}​ 
```

你可以简单地写：

```
Total: {{medication.total()}} 
```

这是一个 jsFiddle：http: [//jsfiddle.net/4r5g5/1/](http://jsfiddle.net/4r5g5/1/)

然后，如果您有一组项目并且不想在对象级别上放置任何逻辑，则可以在控制器上定义此方法，如下所示：

```
var MedicationCtrl = function($scope) {    
    $scope.total = function(medication) {
      return medication.dosage * medication.count;
    };
}; 
```

并从如下标记中使用此函数：

```
<ul ng-repeat="m in medications" ng-controller="MedicationCtrl">
    <li>{{m.dosage}} + {{m.count}} = {{total(m)}}</li>
</ul> 
```

而上面的jsFiddle中的代码：http: [//jsfiddle.net/4r5g5/3/](http://jsfiddle.net/4r5g5/3/)

# c# - Newtonsoft.Json：反序列化具有通用字段的对象时出错

> ID：13612733
> 
> 赞同：3
> 
> 时间：2012-11-28T19:18:20.573
> 
> 标签：c#, json, serialization, json.net

我有一个问题：Json.NET 是否可以正确使用泛型？我有下一个代码：

```
[TestClass]
public class TestClass1_Test
{
    [TestMethod]
    public void ToJson()
    {
        var mot = new TestClass1(1, "title");
        var result = mot.ToJson();
        Assert.IsNotNull(result);

        var pobject = TestClass1.FromJson(result);

        Assert.AreEqual(pobject.Id, mot.Id);
    }
}

public class TestClass1
{
    public TestClass1(int id, string name)
    {
        Id = new Field<int>(id);
        Name = new Field<string>(name);
    }

    public Field<int> Id { get; set; }
    public Field<string> Name { get; set; }

    public string ToJson()
    {
        var jobject = JObject.FromObject(this);
        return jobject.ToString();
    }

    public static TestClass1 FromJson(string json)
    {
        var obj = JObject.Parse(json).ToObject<TestClass1>();
        return obj;
    }
}

public class Field<T>
{
    public Field(T val)
    {
        Value = default(T);
    }
    public T Value { get; set; }
} 
```

但是当我打电话时，`var obj = JObject.Parse(json).ToObject<TestClass1>()`我得到下一个错误：

> Newtonsoft.Json.JsonReaderException：读取整数时出错。意外标记：StartObject。路径“Id”，第 2 行，位置 10。

我的错误在哪里？还是 Json.NET 不适用于泛型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T21:15:48.010

Json.NET 确实可以使用泛型 - 我能够`Field<int>`很好地序列化和反序列化您的一个对象。

我使用上述代码（使用 Json.NET 4.5 r10）得到的错误消息是：

```
Error reading integer. Unexpected token: StartObject. Path 'Id', line 2, position 10 
```

堆栈跟踪暗示它在遇到 a 时试图反序列化一个整数`{`，这是`Id`对象的开头。我认为这很可能是一个错误。

然而，这似乎在使用 Json.NET 3.5 r8 时按预期工作。我确实必须换掉后者`JsonConvert.DeserializeObject<TestClass1>(json)`，`JObject.Parse(json).ToObject<TestClass1>()`因为后者不在这个版本中。

因此，答案是尝试不同版本的 Json.NET。

构造函数中还有一个错误`Field`。

```
Value = default(T); 
```

应该：

```
Value = val; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-19T09:39:21.470

以供参考; 如果您将包含嵌套 JSON 对象作为字符串的对象反序列化，也会出现此错误。

如果您忘记对其进行字符串化，解析器会抛出此错误。

# python - 使用Elmer生成C代码然后创建dll

> ID：13612734
> 
> 赞同：1
> 
> 时间：2012-11-28T19:18:22.867
> 
> 标签：python, dll

我想看看是否有人尝试过这样的事情，并就是否追求这个想法获得一些建议。我有一个 Python 脚本，我想从中创建一个 dll。在做了一些研究之后，执行此任务的最佳方法是将 python 脚本嵌入到 C 中，然后从 C 代码生成一个 dll。

然后我找到了 Elmer Software Glue： [http](http://elmer.sourceforge.net/index.html) ://elmer.sourceforge.net/index.html ，它将 Python 模块嵌入到 C 中。我想我可以使用 Elmer 将我的 python 代码嵌入到 C 中，然后从那里创建一个 dll。

我任何人都会给我一些保证，这可能会奏效，如果不是的话，也许还有其他选择。我对任何和所有建议持开放态度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T13:52:56.127

因此，我联系了 ELmer 背后的个人，他们非常友好地创建了一个示例，说明如何从 Elmer 生成的代码创建 DLL。该示例可以在以下链接中找到： http: [//elmer.sourceforge.net/examples.html#WINDOWSDLL](http://elmer.sourceforge.net/examples.html#WINDOWSDLL)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-17T19:22:55.263

不知道你的结果如何，但我能够在 Windows 7 x64 上使用 Elmer 和 Python 2.7.8 和 Elmer 1.1.7a 创建一个 DLL，并想我会分享我的经验。

我的编译/构建环境是使用 NMAKE 的 VisualStudio2005

在此过程中我确实遇到了几个问题，尤其是与 -frozen 标志和我的旧版 Visual Studio 相关，但我现在得到的似乎是一个工作 DLL。

我的顶级笔记：

*   由于在加载 dll 期间与 python27.dll 包含的 MSVCRT90 发生冲突，我不得不将 elmer 与 MSVCRT80 静态链接。
*   链接步骤需要库 elmer.lib，但仅存在于 c:\elmer\src\build\temp.win32-2.7\Release\elmer 目录中，似乎应该在没有单词的情况下将其复制到某个地方名称中的 temp ，但我将我的 makefile 设置为从 temp 目录使用它。
*   使用-frozen时，可以生成几十个.c文件
*   PyImport_FrozenModules 和 Py_FrozenFlag 已由其他包含文件 (pydebug) 声明。
*   PyImport_FrozenModules 正在重新定义（由于 elPythonToC），而不仅仅是分配。
*   [根据http://bugs.python.org/issue566100](http://bugs.python.org/issue566100)不推荐使用 DL_IMPORT（在 elPythonToC.py 中使用）。我认为应该使用 PyApi_DATA 代替，但没有真正的区别。**编辑**没那么重要，因为我删除了整个块，因为它正在重新定义 PyImport_FrozenModules
*   最后，我不得不包含 python27.dll、elmer.dll。我相信 MSVCRT90.dll 也需要通过目标机器上的 MS 可再发行安装程序安装，因为 python27.dll 需要它。如果使用 freeze 可以让我们获得一个可分发的内容，那就太好了，但我会尽我所能。
*   我能够在 python 2.6.5 上运行该过程并稍作修改（例如，python 路径是 c:\python26 而不是 c:\python27）。
*   首先在 python 中测试你的脚本，elmer 会很高兴地打包一个包含畸形 python 的脚本。
*   要创建可调试的 dll，请添加`/Z7 /Od`到 CFLAGS 和`/incremental:no /debug`LINKFLAGS
*   如果 python 代码本身中的某种格式化注释或函数可以替换 .elm 文件，那就太好了。

现在这里是我所做的详细步骤（不保证其中任何一个都是正确的，它们当然不是最佳的，但它们似乎对我有用）：

*   安装埃尔默
    *   下载 elmer 并将其解压缩到某个目录（我选择了 C:\elmer，所以我将在整个示例中使用它）
    *   当我开始使用 2.7.2 时，我遇到了这个问题：[Compiling with cython and mingw generated gcc: error: unrecognized command line option '-mno-cygwin'](https://stackoverflow.com/questions/6034390/compiling-with-cython-and-mingw-produces-gcc-error-unrecognized-command-line-o/6035864#6035864)。我修补了 Lib/distutils/cygwinccompiler.py 以删除 -mno-cygwin 并安装它，但后来我安装了 2.7.8，我认为它解决了根本问题。
    *   我希望 Elmer.dll 静态链接到 MSVCRT 垃圾，因为我有旧版本的 MSVCRT，所以我修改了 setup.py 如下。（我知道我不应该静态链接，你可能不希望这样，但万一你这样做：
    *   在声明下方添加`extraCompileArgs = []`和`extraLinkArgs = []``libDirs = []`
    *   在 Windows 特定的构建选项中 if block add:`extraCompileArgs = ['/MT']`和`extraLinkArgs = ['/MANIFEST']`
    *   在里面`, extra_compile_args=extraCompileArgs, extra_link_args=extraLinkArgs`之后添加`libraries=libs``Setup(..., ext_modules=[Extension(`
    *   从命令提示符运行 C:\elmer\src>python setup.py build
    *   从命令提示符运行 C:\elmer\src>python setup.py install
*   修改 .py 和 .elm 文件以满足我的需要 - 这是最简单的部分
*   获取 makefrozen.py elmer 在使用 -frozen 选项时使用 makefrozen，但它似乎不包含在标准 win32 MSI 分发中。
    *   makefrozen 包含在 python 的源代码中，但不包含在 windows MSI 安装程序中，因此请从 www.python.org 下载源 tarball
    *   解压 \Tools\freeze\ 到 c:\python27\Tools\freeze
*   修改 buildAndRun
    *   将 ELMERDIR 更改为 C:\
    *   路径应该指向`SET PATH=%PATH%;%ELMERDIR%;%THISDIR%`
    *   将 ELMERDIR 设置为 C:\elmer\
*   更新 Make 文件以适用于我的配置（示例文件根本不适用于 nmake 或 freeze）。这是我的 MAKEFILE，可以使用 nmake 构建冻结或非冻结版本：

    ```
     PYTHONDIR=C:\Python27
        ELMERDIR=C:\elmer
        ELMERLIBDIR=$(ELMERDIR)\src\build\temp.win32-2.7\Release\elmer
        ELMER_OUTPUT_DIR=Generated

        CC=cl
        RM=del /F /Q
        ELMER=$(ELMERDIR)\elmer
        shell=call

        CFLAGS=/TC /LD
        INCLUDEFLAGS=/I$(ELMER_OUTPUT_DIR) /I$(PYTHONDIR)\include /I$(PYTHONDIR)\Lib\site-packages\elmer
        LINKFLAGS=/LIBPATH:$(PYTHONDIR)\libs python27.lib /LIBPATH:$(ELMERLIBDIR) elmer.lib

        .PHONY: generatedFiles generatedFrozen all allFrozen
        SRCS = Generated\*.c
        OBS = $(SRCS:.c=.obj)

        {Generated}.c{Generated}.obj::
            @echo Compiling...
            @$(CC) /nologo $(CFLAGS) $(INCLUDEFLAGS) /c /FoGenerated\ $<

        generatedFrozen:
            echo Elmering
            @$(shell) $(ELMER) -c -frozen -o $(ELMER_OUTPUT_DIR) -int MyDll.elm MyDll.py

        generatedFiles:
            echo Elmering
            @$(shell) $(ELMER) -c -o $(ELMER_OUTPUT_DIR) -int MyDll.elm MyDll.py

        showIncludeAndLinkFlags:
            @echo includeDirs: 
            @$(shell) $(ELMER) --printIncludeFlags
            @echo linkDirs: 
            @$(shell) $(ELMER) --printLinkFlags

        MyDll.dll: $(OBS)
            @echo Linking...
            @Link $(LINKFLAGS) /DLL $(OBS)

        all:
            @echo "Making All"
            @nmake  generatedFiles
            @nmake  showIncludeAndLinkFlags
            @nmake  MyDll.dll

        allFrozen:
            @echo "Making All"
            @nmake  generatedFrozen
            @nmake  showIncludeAndLinkFlags
            @nmake  MyDll.dll

        clean:
            @echo cleaning
            $(RM) .\Generated\*.* 2>nul || echo eatFailure >nul 
    ```

*   在调用 nmake 之前创建一个 Build.bat 以设置 Visual Studio 环境。这是我的构建批处理文件的内容：

    ```
     @ECHO OFF
        SETLOCAL
        SET THISDIR=%~dp0
        REM Setup Visual Studio build environment
        REM  Microsoft Visual Studio 8 == Visual Studio 2005
        CALL "C:\Program Files (x86)\Microsoft Visual Studio 8\VC\vcvarsall.bat"
        nmake clean
        nmake allFrozen
        pause
        ENDLOCAL 
    ```

*   修复编译/链接错误，这里有点难看，因为我必须修改 elmer 代码才能让它工作
    *   删除 Py_FrozenFlag 和 PyImport_FrozenModules 的重复声明和重新定义
        *   在文本或 python 编辑器中打开 C:\python27\Lib\site-packages\elmer\elPythonToC.py
        *   删除或注释掉`if( frozenFlag ) :`包含`retCode += "extern int Py_FrozenFlag;\n"`and的块`retCode += "DL_IMPORT(struct _frozen *) PyImport_FrozenModules;\n"`（大约第 145 行）
        *   添加行：`retCode += " PyImport_FrozenModules = _PyImport_FrozenModules;\n"`在包含的行上方`retCode += " retRunVal = PyImport_ImportFrozenModule( (char*)\"%s\" );\n"`（大约第 189 行）
*   将 DLL 复制到分发文件夹
    *   从包含 .elm 文件的工作目录中复制 MyDLL.dll。从 C:\elmer\src\build\lib.win32-2.6\elmer 复制 elmer.dll。从 C:\Windows\SysWOW64 复制 python27.dll。
    *   如有必要，在目标计算机上安装 Visual C++ Redistributable Package（或者可能只是在 Windows 并排配置中找到 MSVCRT90.dll 以及 DLL 旁边的内容。请参阅[http://msdn.microsoft.com/en-us/库/vstudio/ms235299.aspx](http://msdn.microsoft.com/en-us/library/vstudio/ms235299.aspx)。

* * *

**编辑** 当我在我的 dll 中添加一些肉时，我注意到冻结的导入内容无法正常工作并导致我的 DLL 退出。我最初的修改导致 Py_FrozenFlag 和 PyImport_FrozenModules 在本地定义，这导致 PyImport_ImportFrozenModule 在生成的 c 代码中失败。我对 makefile 进行了修改以消除 Py_NO_ENABLE_SHARED 定义，删除了这些变量的定义和声明，将 PyImport_FrozenModules 的定义更改为赋值，现在一切似乎都正常工作。我已经从一个简单的 c++ 应用程序成功连接并调试了我的 dll。

# c# - UploadFile：WCF 测试客户端不支持此操作，因为它使用类型 ClientFileInfo

> ID：13612735
> 
> 赞同：4
> 
> 时间：2012-11-28T19:18:28.023
> 
> 标签：c#, asp.net, wcf, wcf-binding, filestream

我对 WCF 服务相当陌生，希望能得到一些帮助。我正在尝试将 WCF 作为服务运行，并让另一台机器上的 ASP.net 客户端能够通过连接到 WCF 服务将文件上传到它。

我正在使用简单的上传设置（从[此处](http://www.seesharpdot.net/?p=214)）对其进行测试，如果我只是将 WCF 服务引用为“dll”，它可以正常工作，但是如果我尝试将其作为 WCF 服务运行，则会出现“UploadFile”错误" 方法，声明它不受支持。

方法名称上带有红色 X 的确切消息：WCF 测试客户端不支持此操作，因为它使用类型 FileUploadMessage。

我首先在 Visual Studio 2012 中创建 WCF 服务应用程序，并在我的界面 (IUploadService.cs) 中有以下内容：

```
[ServiceContract]
public interface IUploadService
{
    [OperationContract(IsOneWay = true)]
    void UploadFile(FileUploadMessage request);
}

[MessageContract]
public class FileUploadMessage
{
    [MessageBodyMember(Order = 1)]
    public Stream FileByteStream;
} 
```

它的实现方式如下（UploadService.svc.cs）：

```
public void UploadFile(FileUploadMessage request)
{
    Stream fileStream = null;
    Stream outputStream = null;

    try
    {
         fileStream = request.FileByteStream;

         string rootPath = ConfigurationManager.AppSettings["RootPath"].ToString();

         DirectoryInfo dirInfo = new DirectoryInfo(rootPath);
         if (!dirInfo.Exists)
         {
             dirInfo.Create();
         }

         // Create the file in the filesystem - change the extension if you wish, 
         // or use a passed in value from metadata ideally

         string newFileName = Path.Combine(rootPath, Guid.NewGuid() + ".jpg");

         outputStream = new FileInfo(newFileName).OpenWrite();
         const int bufferSize = 1024;
         byte[] buffer = new byte[bufferSize];

         int bytesRead = fileStream.Read(buffer, 0, bufferSize);

         while (bytesRead > 0)
         {
             outputStream.Write(buffer, 0, bufferSize);
             bytesRead = fileStream.Read(buffer, 0, bufferSize);
         }
     }
     catch (IOException ex)
     {
          throw new FaultException<IOException>(ex, new FaultReason(ex.Message));
     }
     finally
     {
         if (fileStream != null)
         {
             fileStream.Close();
         }
         if (outputStream != null)
         {
             outputStream.Close();
         }
     }
} // end UploadFile 
```

从外观上看它应该可以工作，但从我通过查看几个stackoverflow和其他论坛问题的理解来看，WCF 似乎不支持 Stream，即使我们可以拥有类型流的绑定。我对此感到困惑，我做错了什么。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:31:15.370

在他的[博客](http://www.seesharpdot.net/?p=214)上与亚当交流后，我从他那里得到了代码，我意识到我正在以错误的方式进行测试。一切都正确实施，但使用 WCF 测试客户端却把事情搞砸了。只需启动项目并通过将其添加为“Service.svc”的 Web 引用来使用它就可以完美地工作。

# php - 使用 PHP 和 Apache 路由 URL 路径

> ID：13612738
> 
> 赞同：3
> 
> 时间：2012-11-28T19:18:39.113
> 
> 标签：php, apache, .htaccess, url-routing, front-controller

我正在尝试为我的网站创建一个不错的 url 结构。

只有当 url 的样式为 ?something=value 时，我的路由器类才会起作用。

我如何得到它，所以它会像这样工作：

```
/something/value 
```

在我的 .htaccess 中，我有：

```
Options FollowSymLinks
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule !\.(js|txt|gif|jpg|png)$ index.php?$1 [L,QSA] 
```

在我的路由器类中，我正在制作：

```
class init {

    function __construct()
    {

    $URL = substr($_SERVER['REQUEST_URI'], 19) ;
    $URLElements = explode('/', $URL) ; // Adjust if needed.

    $class = $URLElements[0] ;
    $method = $URLElements[1] ;

    if(($t = substr_count($URL, '/')) > 1)
    {
        for($i=2;$i<$t+1;$i++) {
            echo $URLElements[$i].'<br />';
        }
    }
    } 
```

## }

感谢 Jason，我的 .htaccess 现在只是：

```
FallbackResource /t2013/public_html/index.php 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T19:23:16.977

要使用 Apache快速处理[前端控制器](http://en.wikipedia.org/wiki/Front_Controller_pattern)[`FallbackResource`](http://httpd.apache.org/docs/trunk/mod/mod_dir.html#fallbackresource)，请使用PHP 使用和解析 URL。

```
FallbackResource /index.php 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:29:05.463

htaccess 应该是这样的

```
RewriteEngine on
RewriteRule ^([^/\.]+)/([^/\.]+)/([^/\.]+)$ $1.php?$2=$3 [QSA] 
```

所以例如

/home/something/value 将被重定向到 /home.php?something=value

试一试，对此并不完全确定，但以前做过类似的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:28:26.937

从 PHP 的角度来看，您只需将 init 类调整为关闭`$_SERVER['REQUEST_URI']`而不是`$_SERVER['QUERY_STRING']`. 您没有在这里展示您的全部逻辑，但我的猜测是您只需修剪第一个`/`然后分解 URI`/`以获取组件部分。

从 .htaccess 的角度来看，您可以将最后一行更改为：

```
RewriteRule ^.*$ index.php [L,QSA] 
```

您不需要在这里专门检测 images/css/js，因为这`RewriteCond`已经对任何实际文件或目录的重写规则产生了例外。请注意，`RewriteRule`我确实保留了查询字符串附加 (QSA) 标志，以防您仍然想做类似的事情`/controller?some=string&of=data` 如果您完全不期望在新的 URI 中使用查询字符串，那么您可以省略此标志。

# .net - 我如何对参数做一个喜欢？

> ID：13612740
> 
> 赞同：0
> 
> 时间：2012-11-28T19:18:48.367
> 
> 标签：.net, mysql, database, ado.net, dapper

这是一个虚构的查询

```
"select * from tbl where name like '@foo%'"
...
cmd.addparam(foo, bar) //not actual code 
```

我得到 0 个结果。我尝试更改 where to`name like @foo`并写 bar+"%" 但是我怀疑这是不正确的（它应该转义 %？）并且我又得到了 0 行。

我如何使用参数？我的代码实际上使用 dapper.net 和 mysql 作为其数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:21:05.907

您需要按如下方式构建查询：

```
"select * from tbl where name like @foo" 
```

然后

```
cmd.addParam("@foo", bar + "%") 
```

# wordpress - IE8 Wordpress 缩略图 > 将 px 添加到 $hwstring

> ID：13612743
> 
> 赞同：2
> 
> 时间：2012-11-28T19:19:08.790
> 
> 标签：wordpress, internet-explorer-8

WordPress 使用以下属性呈现缩略图：

```
<img width="100" height="200" ... 
```

IE7\8 要求是这样的：

```
<img width="100px" height="200px" ... 
```

（确切的问题在这里：[Wordpress 特色图片没有出现在 IE8 中](https://stackoverflow.com/questions/10573458/wordpress-featured-images-not-showing-up-in-ie8)）

我深入研究了核心，找到了渲染高度\宽度的代码：http: [//core.trac.wordpress.org/browser/trunk/wp-includes/media.php#L223](http://core.trac.wordpress.org/browser/trunk/wp-includes/media.php#L223)

我的问题：你能帮我用一个自定义函数将**px**部分添加到 $hwstring 中吗（函数在这里：[http ://core.trac.wordpress.org/browser/trunk/wp-includes/media.php# L98](http://core.trac.wordpress.org/browser/trunk/wp-includes/media.php#L98) )

提前感谢每一个提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T02:51:26.267

尝试这个;

```
function custom_dimensions($html, $id, $alt, $title, $align, $size){
    $html = preg_replace('%(width|height)(="[0-9]{1,4})(")%', '$1$2px$3', $html);
    return $html;
}

add_filter('get_image_tag', 'custom_dimensions',1, 6); 
```

我只是在最后快速测试了它。

# unique - ExpressionEngine 需要唯一的用户名吗？

> ID：13612745
> 
> 赞同：0
> 
> 时间：2012-11-28T19:19:11.610
> 
> 标签：unique, expressionengine

我正在将数据从另一个应用程序导入到 ExpressionEngine。我知道 EE 预计 screen_names 在 2012 年 9 月是唯一的。

问题是我是否必须使用户名也唯一，或者我是否可以使用名字和姓氏的组合（例如“johndoe”），这可能会导致导入的数据中可能存在多个“john doe”。

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:07:34.097

是的，用户名必须是唯一的。总之，`username`、`screen_name`和`email`all 必须是唯一的，才能使用 EE 的成员导入实用程序成功导入。

这没有记录，但您可以通过查看`validate_xml()`.`system/expressionengine/controllers/cp/tools_utilities.php`

# java - 混合浮点和长计算产生错误的答案，没有编译器警告

> ID：13612747
> 
> 赞同：2
> 
> 时间：2012-11-28T19:19:22.077
> 
> 标签：java

以下代码为 startTime 输出错误值是否令人惊讶？

```
public class Temp {
    public static void main(String args[]){
       float duration = (float) 2.0;
       long endTime = 1353728995;
       long startTime = 0;
       startTime = (long) (endTime - duration);
       System.out.println(startTime);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T19:24:37.377

它不会输出*错误*的值。它只是输出一个您不期望的值。

重要的是这里发生了什么：

```
endTime - duration 
```

这*实际上*被评估为：

```
(float) endTime - duration; 
```

这就是数据丢失的地方。最接近`float`1353728995 的值是 1353729024，最接近`float`减 2 的结果*仍然*是1353729024。

这一切都遵循语言规范。[JLS 第 15.8.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.18.2)（加法运算符）指出二进制数字提升应用于操作数。

[第 5.6.2 节（二进制数字提升）](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.6.2)是这样开始的：

> 当运算符将二进制数值提升应用于一对操作数时，每个操作数都必须表示一个可转换为数值类型的值，以下规则按顺序适用：
> 
> *   如果任何操作数属于引用类型，则将对其进行拆箱转换（第 5.1.8 节）。
>     
>     
> *   加宽原语转换（第 5.1.2 节）适用于转换以下规则指定的一个或两个操作数：
>     
>     
>     *   如果任一操作数是 double 类型，则另一个操作数将转换为 double。
>         
>         
>     *   否则，如果任一操作数的类型为`float`，则将另一个转换为`float`。
>         
>         
>     *   ...

因此，按照这些规则，将 的`long`值`endTime`转换为`float`，然后在`float`算术中执行减法。

请记住，a`float`仅提供 7 个有效数字的准确度，我希望其余的都相当明显。

请注意，如果没有将结果转换为`long`，编译器会更清楚地说明发生了什么：

```
Test.java:8: error: possible loss of precision
    long startTime = endTime - duration;
                             ^
  required: long
  found:    float
1 error 
```

这清楚地表明，结果将是 a `float`，这应该对操作将如何执行以及预期的准确性提出警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:22:02.040

如果您希望结果为 long，则将浮点转换为 long。

```
 float duration = (float) 2.0;
    long endTime = 1353728995;
    long startTime = 0;
    startTime = endTime - (long)duration;
    System.out.println(startTime); 
```

输出：

1353728993

如果您不强制转换，它将被视为浮点值，结果将出乎意料。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:26:04.057

**这都是因为浮点表示法。**

当您使用`float`至少一个参数执行任何操作时，所有参与的数字都将提升为`float`。在这里，您将在减法之前`endTime`转换为浮点数，因为这使用了指数表示。**这种表示不是很精确，因此您会看到不同的结果。**`1.35372902E9``IEEE 754 notation`

 **好像你在哪里

```
 startTime =  (endTime - (long)duration); 
```

然后它的操作使用 long ，你应该得到预期的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T19:26:48.610

`double`并且`float`经常损失精度。这可能就是您在这里看到的。

请注意，您实际上是在计算：

```
startTime = (long) ((float)endTime - duration); 
```

因为编译器会自动将 long 转换为 float 以进行减法。这是有据可查的，一些好的代码检查器实际上会警告你这一点。

你可能想要的是这样的：

```
startTime = endTime - (long)duration; 
```

但是你应该这么说。

你也可以通过使用得到正确的

```
startTime = (long) (endTime - (double)duration); 
```

但这也不*安全*。**

# java - 如何重新映射某些键？

> ID：13612749
> 
> 赞同：0
> 
> 时间：2012-11-28T19:19:22.903
> 
> 标签：java, swing, keyboard, jtextfield, documentfilter

我想创建一个虚拟数字键盘，这样当我按下**U**时，我得到一个**4**，**我**产生一个**5**，**O**产生一个**6**，依此类推：

```
789            789
uio   becomes  456  
jkl            123
m              0 
```

但我需要键盘的其余部分才能继续照常工作。我已经尝试过[这个](https://stackoverflow.com/a/6366044/1716488)和其他一些解决方案，但它们对我没有用，因为在我的 JTextField 上我得到了**`4U5I6O`**（或**`U4I5O6`**取决于我实施的解决方案）。

我需要去掉这封信，只出示数字。

有人知道合适的解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T19:28:46.927

如果您直接输入到[`JTextField`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextField.html)，那么我建议使用[`DocumentFilter`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/DocumentFilter.html).

作为 的示例[`DocumentFilter`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/DocumentFilter.html)，请参见：

*   [只允许在 JTextField 中输入数字和符号 (-)](https://stackoverflow.com/a/8017847/597657)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T00:16:49.953

这是@Eng.Fouad 建议的一个示例（请全部归功于他）。

基本上，这将用随机字符替换输入到文本字段中的所有文本。

我不会很难更新代码以提供映射的更改（例如`a = 1`），甚至是加密过程。

```
public class TestPhasicDocumentFilter {

    public static void main(String[] args) {
        new TestPhasicDocumentFilter();
    }

    public TestPhasicDocumentFilter() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new PhasicPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class PhasicPane extends JPanel {

        public PhasicPane() {

            setLayout(new GridBagLayout());
            JTextField field = new JTextField(12);
            add(field);

            ((AbstractDocument)field.getDocument()).setDocumentFilter(new PhasicDocumentFilter());

        }

        public class PhasicDocumentFilter extends DocumentFilter {
            protected String phasic(String text) {

                StringBuilder sb = new StringBuilder(text);
                for (int index = 0; index < sb.length(); index++) {
                    sb.setCharAt(index, (char)(33 + (int)Math.round(Math.random() * 93)));
                }

                return sb.toString();
            }

            @Override
            public void insertString(FilterBypass fb, int offset, String text, AttributeSet attr) throws BadLocationException {
                super.insertString(fb, offset, phasic(text), attr);
            }

            @Override
            public void replace(FilterBypass fb, int offset, int length, String text, AttributeSet attrs) throws BadLocationException {
                super.replace(fb, offset, length, phasic(text), attrs);
            }

        }

    }

} 
```

# c++ - 如何移动具有相等距离间隔的线 - 三条平行线（3d）案例

> ID：13612752
> 
> 赞同：1
> 
> 时间：2012-11-28T19:19:36.580
> 
> 标签：c++, math, vector, geometry, computational-geometry

我有三条平行线（都是 3d 线）。说AB，CD，EF。中心线即 CD 由 AB、DE 所在的两个平面的交点给出。AB 和 CD 之间的最短距离（例如 d1）并不完全等于 CD 和 EF（例如 d2）。

与中心线距离较短的线应由第四条线代替，与另一条线等距。

我知道每条线的向量，也知道每条线上都有一个 3D 点。（对于 AB 和 EF，我知道在线上的另一个点；意思是 AB 和 EF 可以视为线段）

我试图做到这一点。但无法确切地弄清楚并得到了一些错误的答案。有时第四行会使分隔更短（可能是向量指向其他方向，或者我遵循了一些错误的方式）。我应该说 AB、CD 和 EF 线的向量没有指向同一个方向。

所以，我正在寻找一种具体的方法来做到这一点。我有 vector3 和 line 类在 C++ 中执行此操作。

请任何人告诉我如何做到这一点 b 移动一条线（即绘制第 4 行）。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T07:53:23.957

我在数学堆栈交换中[回答](https://math.stackexchange.com/a/247105/35416)了你的问题，因为那里的公式排版功能对这个答案非常有用。核心思想是建立两个向量，它们从中心线指向其他每条线，并且垂直于线的方向。然后您可以比较这些向量的长度，将较短的向量缩放为较长向量的长度，然后使用该缩放向量来获得新线。

# javascript - AngularJS + ChosenJS 更新模型

> ID：13612753
> 
> 赞同：1
> 
> 时间：2012-11-28T19:19:37.443
> 
> 标签：javascript, angularjs

我在这里根据本教程为 ChosenJS 插件创建一个角度指令：[https ://www.youtube.com/watch?v=8ozyXwLzFYs](https://www.youtube.com/watch?v=8ozyXwLzFYs)

我想要做的是在选择一个值时更新模型。

```
function Foo($scope) {
  $scope.legalEntitiesList = [
      { name: 'Foo' },
      { name: 'Bar' }      
  ];

  $scope.legalEntity = { name: 'Foo' };
}

myApp.directive('chosen', ['$timeout', function($timeout) {
  var linker = function(scope, element, attrs, ngModel) {
    if (!ngModel) return;

    element.addClass('chzn-select');

    $(element).chosen()
            .change(function(e) {
                console.log(ngModel.$viewValue);
            });

    scope.$watch(attrs.chosen, function() {
        $(element).trigger('liszt:updated');
    });
  }

  return {
    restrict: 'A',
    scope: true,
    require: '?ngModel',
    link: linker
  }
}]); 
```

这是一个小提琴：http: [//jsfiddle.net/dkrotts/MQzXq/7/](http://jsfiddle.net/dkrotts/MQzXq/7/)。如果您选择不同的选项，则不会更新模型值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-15T14:13:33.843

我想将此添加为评论，但我缺乏声誉点。但是，请注意，较新版本的 Chosen 使用该事件`chosen:updated`而不是`liszt:updated`-- 感谢 Dustin 的视频！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T20:34:03.423

如果您修改选择以绑定到，`legalEntity.name`而不仅仅是`legalEntity`您的小提琴作品。

```
<select id="legalEntityInput" chosen="legalEntitiesList" ng-model="legalEntity.name" ng-options="legalEntity.name for legalEntity in legalEntitiesList" data-placeholder="Select..."><option></option></select> 
```

有关示例，请参见此[更新的小提琴。](http://jsfiddle.net/MQzXq/8/)

# mysql - Mysql：将现有数据转储/导出到 .sql 文件

> ID：13612755
> 
> 赞同：2
> 
> 时间：2012-11-28T19:19:42.660
> 
> 标签：mysql, database, dump

我有一个数据库。我要做的就是将每个表中的所有现有数据转储到然后我可以使用它来简单地将 SQL 导入我的新数据库？

我假设转储将是一堆 MySQL`INSERT`语句

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T19:22:23.490

您也可以为此目的使用[mysqldump ，本机 mysql 工具。](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:21:19.813

您可以使用[mysql workbench](http://dev.mysql.com/downloads/workbench/)或[phpmyadmin](http://www.phpmyadmin.net/home_page/index.php)等工具来创建转储。它将是一堆插入以及其中的所有其他数据（例如过程）。

# google-apps-script - 有没有办法更改浏览器选项卡中显示的 GAS 名称？

> ID：13612766
> 
> 赞同：1
> 
> 时间：2012-11-28T19:20:40.433
> 
> 标签：google-apps-script

通常情况下，当 GAS 项目部署为 Web 应用程序时，运行应用程序时浏览器选项卡中显示的值为当前 Web 应用程序 url。有没有办法自定义这个值？我的应用程序基于 html 服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:29:13.713

您可以在 HtmlOutput 对象上使用 setTitle 来更改它。

# edit - MP4 文件编辑

> ID：13612769
> 
> 赞同：-1
> 
> 时间：2012-11-28T19:20:54.017
> 
> 标签：edit, mp4

我有一个包含大量移动图形（箭头、按钮等）的 mp4 视频演示文稿。我可以使用 MP4 文件修改/编辑这些图形还是需要用于创建视频的原始文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:21:51.380

如果要编辑它，您将需要原始源。

# ruby - Ruby：生成摩尔斯电码声音文件

> ID：13612773
> 
> 赞同：2
> 
> 时间：2012-11-28T19:21:03.000
> 
> 标签：ruby, audio, morse-code

我正在训练用耳朵阅读摩尔斯电码；）

为了训练自己，我编写了一个小红宝石脚本来使用命令行生成声音文件`sox`（见下文）。`dit`它基本上只需要s、`dah`s 和多个空格（在`dit`s 和s 之间，字母之间和单词之间）的预制声音文件`dah`并将它们粘合在一起。它可以工作，但是目标文件越大，速度就越慢。

有没有更聪明的方法可以用 ruby​​ 将声音生成到 wav 文件中？

* * *

```
#!/usr/bin/ruby

wordlength = 5
blocklength = 12
testlength = 5
alphabet = [ "G", "A", "S", "5", "D", "0", "R", "/", "2", "L", "9", "T", "V", "I", "O", "Q", "C", "4", "F", "X", "E", "N", "U" ]
playstring = ""
block = ""
page = ""

MORSE = {
        "!" => "---.", "\"" => ".-..-.", "$" => "...-..-", "'" => ".----.",
        "(" => "-.--.", ")" => "-.--.-", "+" => ".-.-.", "," => "--..--",
        "-" => "-....-", "." => ".-.-.-", "/" => "-..-.", "0" => "-----",
        "1" => ".----", "2" => "..---", "3" => "...--", "4" => "....-", "5" => ".....",
        "6" => "-....", "7" => "--...", "8" => "---..", "9" => "----.", ":" => "---...",
        ";" => "-.-.-.", "=" => "-...-", "?" => "..--..", "@" => ".--.-.", "A" => ".-",
        "B" => "-...", "C" => "-.-.", "D" => "-..", "E" => ".", "F" => "..-.",
        "G" => "--.", "H" => "....", "I" => "..", "J" => ".---", "K" => "-.-",
        "L" => ".-..", "M" => "--", "N" => "-.", "O" => "---", "P" => ".--.",
        "Q" => "--.-", "R" => ".-.", "S" => "...", "T" => "-", "U" => "..-",
        "V" => "...-", "W" => ".--", "X" => "-..-", "Y" => "-.--", "Z" => "--..",
        "[" => "-.--.", "]" => "-.--.-", "_" => "..--.-", 
        "ka" => "-.-.-.",
}

startblock = "dit.wav ditspace.wav dit.wav ditspace.wav dit.wav ditspace.wav dah.wav wordspace.wav dit.wav ditspace.wav dit.wav ditspace.wav dit.wav ditspace.wav dah.wav wordspace.wav dit.wav ditspace.wav dit.wav ditspace.wav dit.wav ditspace.wav dah.wav wordspace.wav dah.wav ditspace.wav dit.wav ditspace.wav dah.wav ditspace.wav dit.wav ditspace.wav dah.wav wordspace.wav wordspace.wav wordspace.wav "
endblock = "dit.wav ditspace.wav dah.wav ditspace.wav dit.wav ditspace.wav dah.wav ditspace.wav dit.wav blockspace.wav "

playstring << "uebungsanfang.wav wordspace.wav "
system ('/opt/local/bin/sox ' + playstring.to_s + ' tmp.wav 2>/dev/null')
system ('mv tmp.wav tmp2.wav')
playstring = ""

testlength.times do |line|
    printf line.to_s + " "
    playstring << "gruppe" + (line+1).to_s + ".wav wordspace.wav "
    playstring << startblock
    system ('/opt/local/bin/sox tmp2.wav ' + playstring.to_s + ' tmp.wav 2>/dev/null')
    system ('mv tmp.wav tmp2.wav')
    playstring = ""
    blocklength.times do |count|
        word = alphabet.sample.to_s + alphabet.sample.to_s + alphabet.sample.to_s + alphabet.sample.to_s + alphabet.sample.to_s
        word.each_char do |char|
            MORSE[char].each_char do |dahdit|
                case dahdit
                    when '.' then playstring << "dit.wav "
                    when '-' then playstring << "dah.wav "
                end
                playstring << "ditspace.wav "
            end
            playstring << "letterspace.wav "
            system ('/opt/local/bin/sox tmp2.wav ' + playstring.to_s + ' tmp.wav 2>/dev/null')
            system ('mv tmp.wav tmp2.wav')
            playstring = ""
        end
        playstring << "wordspace.wav "
        block << word.to_s + " "
    end
    playstring << endblock
    playstring << "blockspace.wav "
    system ('/opt/local/bin/sox tmp2.wav ' + playstring.to_s + ' tmp.wav')  #2>/dev/null
    system ('mv tmp.wav tmp2.wav')
    playstring = ""
    page << "%02d" %(line+1).to_s + ": VVV <ak> " + block + "+" + "\n"
    block = ""
end
playstring << "uebungsende.wav"
system ('/opt/local/bin/sox tmp2.wav ' + playstring.to_s + ' tmp.wav 2>/dev/null') #  &
system ('rm tmp2.wav')
system ('mv tmp.wav cw.wav')
system ('lame --cbr -b 128 cw.wav cw.mp3')
system ('rm cw.wav')
puts
puts page 
```

声音文件是使用 sox 预先生成的：

```
sox -e floating-point -r 22500 -n -t wav - synth 0.3 sin 0 > letterspace.wav 
```

包含`Übungsende`等（测试开始，测试结束，第一组，第二组，...）的文件是使用 MAC OS X 命令生成的`say`：

```
say -v Steffi --file-format=WAVE --data-format=LEF32@22500 -o uebungsanfang.wav "Anfang der Übung." 
```

我已经在这里上传了文件（直到“Gruppe 5”，即“group 5”）： `https://docs.google.com/open?id=0B4QwMfBGRCjVbE5iZHpHMHBKT3c`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:38:57.577

我不知道 ruby​​，所以我不完全确定我知道你在做什么，但似乎你正在生成代表点、破折号、空格等的音频文件，然后使用 sox 连接这些文件中的原始数据到一个新文件，然后使用 lame 将其转换为 mp3。

总而言之，这是非常低效的，主要是因为您使用可以动态生成的原始文件做了很多事情。也就是说，可能不值得以最有效的方式重写——毕竟，执行所有文件 IO 会使您的代码变得简单。所以我会重写代码，使文件 IO 尽可能快。在这种情况下，必须一遍又一遍地打开和解析 WAV 文件，尤其是 32 位浮点 WAV 文件，可能会减慢您的速度。对于你正在做的事情，你绝对不需要那个。我将从使用 16 位整数 WAV 文件开始。

要获得更高的速度，请尝试使用更简单的格式作为中间格式，例如[au](http://en.wikipedia.org/wiki/Au_file_format)（如果足够好则使用 u-law，否则使用 16 位线性）。您也可以尝试“原始”文件，即“无头”文件——只需告诉 sox 并蹩脚采样率、位深度、字节顺序和要使用的样本数。然后你不需要使用 sox 来连接原始数据，你可以使用 "cat" unix 工具，它会更快一点。

# elasticsearch - 如何禁用索引和搜索结果的词频？

> ID：13612776
> 
> 赞同：1
> 
> 时间：2012-11-28T19:21:13.127
> 
> 标签：elasticsearch

我希望以术语频率不是真正有用的方式使用 Elasticsearch。我正在运行 Elasticsearch 0.19。我尝试将一些特定字段的“omit_term_freq_and_positions”设置为 true，但这似乎没有任何影响。

```
tags: {
        type: "string",
        search_analyzer : "snowball", 
        index_analyzer : "snowball",
        boost : 4,
        omit_term_freq_and_positions : "true",
      } 
```

当 explain=true 时，搜索结果似乎仍会考虑频率。

这是我正在运行的示例查询：

```
{
"from": 0,
"size": 15,
"query": {
    "filtered": {
        "query": {
            "multi_match": {
                "query": "italian",
                "fields": [
                    "name",
                    "tags"
                ]
            }
        },
        "filter": {
            "geo_distance": {
                "distance": "5km",
                "location": {
                    "lat": 40.76405282025,
                    "lon": -73.972994269042
                }
            }
        }
    }
}
} 
```

所述查询的第一次命中：

```
"hits": [
        {
            "_shard": 0,
            "_node": "TtX90CDASk2wsHErdEe7BQ",
            "_index": "businesses",
            "_type": "business",
            "_id": "25385",
            "_score": 20.388601,
            "_source": {
                "_boost": "1.5",
                "bid": "25385",
                "name": "Donatella",
                "address": "184 8th Ave",
                "city": "New York",
                "state": "NY",
                "zip": "10011",
                "tags": "Restaurant,Italian",
                "location": [
                    {
                        "lat": 40.743015,
                        "lon": -73.99992
                    }
                ]
            },
            "_explanation": {
                "value": 20.3886,
                "description": "max of:",
                "details": [
                    {
                        "value": 20.3886,
                        "description": "weight(tags:italian in 14282), product of:",
                        "details": [
                            {
                                "value": 0.7244212,
                                "description": "queryWeight(tags:italian), product of:",
                                "details": [
                                    {
                                        "value": 5.6289353,
                                        "description": "idf(docFreq=399, maxDocs=40962)"
                                    },
                                    {
                                        "value": 0.12869595,
                                        "description": "queryNorm"
                                    }
                                ]
                            },
                            {
                                "value": 28.144676,
                                "description": "fieldWeight(tags:italian in 14282), product of:",
                                "details": [
                                    {
                                        "value": 1,
                                        "description": "tf(termFreq(tags:italian)=1)"
                                    },
                                    {
                                        "value": 5.6289353,
                                        "description": "idf(docFreq=399, maxDocs=40962)"
                                    },
                                    {
                                        "value": 5,
                                        "description": "fieldNorm(field=tags, doc=14282)"
                                    }
                                ]
                            }
                        ]
                    }
                ]
            }
        }, 
```

为了让搜索和索引忽略词频，您需要执行特殊的查询类型吗？我是否不正确地使用了 omit_term_freq_and_positions ？

帮助将不胜感激！

# sql-server-2008 - 如何更新 SQL Server 2008 中正在复制的数据

> ID：13612780
> 
> 赞同：0
> 
> 时间：2012-11-28T19:21:26.557
> 
> 标签：sql-server-2008, replication

我使用 SQL SERVER 2008 复制机制，该机制从服务器 A（主服务器）获取数据并将其复制到服务器 B、C 和 D。正在复制的表有一个 clientID 字段，我希望实际复制根据是否更新数据将转到 B、C 或 D。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:29:56.703

您可能希望查看[为合并文章实现业务逻辑处理程序](http://msdn.microsoft.com/en-us/library/ms147911.aspx)。

# css - 来自内容 div 的图像与粘性页脚重叠

> ID：13612781
> 
> 赞同：1
> 
> 时间：2012-11-28T19:21:28.963
> 
> 标签：css

我在这里有一个非常烦人的问题。我正在使用我在网上找到的粘性页脚，效果很好，但是我在主要内容区域中有一些与页脚重叠的大图像。

有任何想法吗？[链接到实例 - 点击界面查看](http://www.prodigy.org.za/footer_issue/index.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:23:25.677

您的 div的高度`#wrapper`应该`padding-bottom`等于 的高度`#footer`，在您的情况下似乎是 96px。当然，“在网络上找到的粘性页脚 [you]”应该提到这一点！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:26:26.183

在你的`#wrapper`你有一个负边距。把它拿出来，看起来还不错

```
#wrapper {
    width: 90%;
    padding: 10px;
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto; /** Removed the negative bottom margin **/
    overflow: hidden;
    background: white;
    overflow: hidden;
} 
```

# ios - 明显泄漏：png_malloc

> ID：13612782
> 
> 赞同：4
> 
> 时间：2012-11-28T19:21:30.723
> 
> 标签：ios, memory-leaks, png, malloc

我有一个包含各种动画和图像的应用程序。该应用程序可以正常运行大约 30 分钟，但随后崩溃。`png_malloc`我查看了这些工具，我注意到每次标记堆时都会构建一大堆 7kB 的分配（每几分钟大约 300kB）。

我在我的泄漏中注意到，每次动画或`png`第一次使用时，似乎都会出现数据“泄漏”（尽管我有点怀疑这是否是真正的泄漏）。

所有这些图像都已使用声明

```
frameName = [[NSString alloc] initWithFormat:@"image.png"];
UIImage * u = [UIImage cachelessImageNamed:frameName]; 
```

所以我不相信缓存图像应该有问题。

有没有其他人对这个`png_malloc`分配有同样的问题？

[仪器截图](http://imgur.com/lswzQ)

*注意：我正在使用 arc 并且动画被设置`nil`在释放函数中；但是，这些在应用程序退出之前不会被调用。如果动画只创建一次，这是否会在每次运行动画时产生问题？

**编辑**更多代码：

```
-(void) createSymbolAnimations
{
    if (symbolAnimations == nil)
    {
        symbolAnimations = [[NSMutableArray alloc]init];
    }
    NSString * frameName;

    if (thisAnimation == nil)
    {
         thisAnimation = [[NSMutableArray alloc] init];
    }
    for (int x= 0; x< 40; x++)
    {
        frameName = [[NSString alloc] initWithFormat:@"image%d%s",x,".png"];
        UIImage * u = [UIImage cachelessImageNamed:frameName];
        [thisAnimation addObject:u];
    } 
    [symbolAnimations addObject:thisAnimation];
} 
```

是动画的创作。想象一下，我有其中的一些，然后我更改了动画集并开始使用此片段制作动画：

```
UIImageView * aView = [frameArray objectAtIndex:x];        
aView.image = [[symbolAnimations objectAtIndex:x]objectAtIndex:0];
[aView startAnimating]; 
```

`x`我要制作动画的图像集在哪里，并且`0`是动画的第一帧。

所以图像改变了很多次，我开始担心每次动画图像改变时，RAM都没有被清除，而是被覆盖/重写。

**编辑**图像采集器

```
+(UIImage *) cachelessImageNamed: (NSString *) name
{
    return [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:name ofType:nil]];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T00:41:41.550

以防万一以后有人偶然发现这个问题，我发现了问题。

该项目中用于动画的 png 是在 Windows 中创建的（不确定这是否相关），并且文件格式似乎与 XCode 期望的 png 略有不同。这不允许任何 png 被释放。如果您将格式转换为 Mac 的 png，它似乎可以正常工作。我这样做是通过

```
 mogrify -type truecolormatte -format png *.png 
```

在调整了我所有的图像后，泄漏*大大*减少了，一切似乎都运行良好。

# spring - Spring Security 环境特定的拦截 URL

> ID：13612783
> 
> 赞同：1
> 
> 时间：2012-11-28T19:21:31.097
> 
> 标签：spring, spring-security

这是 Spring Security`intercept-url`配置：

```
<intercept-url pattern="/**.html"
                       access="ROLE_USER" requires-channel="https" /> 
```

我想`requires-channel="any"`为当地环境做点什么。是否可以在模式中添加绝对 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:10:13.557

您可以使用 Spring *bean 定义配置文件*来实现这一点。

```
<beans profile="local">

</beans> 
```

这是一个新功能。看一下Spring Source博客中的条目：http: [//blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/](http://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/)

# sql - MySQL RAND() 7 限制

> ID：13612789
> 
> 赞同：0
> 
> 时间：2012-11-28T19:21:45.767
> 
> 标签：sql, random, limit

我的数据库表有 15 条记录，我想在屏幕上随机显示 9 条。

```
SELECT * FROM tablename ORDER BY RAND() LIMIT 9 
```

这按预期工作，但如果表只有 9 条记录怎么办？我需要提取 15 条随机记录。

我知道这会复制一个或多个记录，但这是我的意图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:22:16.097

当您处理大型数据库时，RAND() 本身效率不高。

进行此类查询的更好方法是：

-1。查询最大的id（假设id为唯一键）

-2。使用 php 函数的 javascript 生成从 1 到 max_id 的 15 个随机数，推送到 -array

-3。内爆数组（例如 $id_list = "'".implode("', '", $id_list)."'"）

-4。Select * from tablename where id in ($id_list)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T21:02:04.707

即使您在表中只有 1 行，这也将起作用。如果您的行数少于 15（例如 11）行，则结果中将包含全部 11 行以及另外 4 个随机行：

```
SELECT col1, col2, ..., colN                -- the columns of `tablename` only
FROM
  ( SELECT a.i, b.j, t.*
    FROM
            ( SELECT *, RAND() AS rnd 
              FROM tablename 
              ORDER BY rnd LIMIT 15
            ) AS t 
        CROSS JOIN
            ( SELECT 1 AS i UNION ALL SELECT 2 UNION ALL 
              SELECT 3      UNION ALL SELECT 4 )
            AS a
        CROSS JOIN
            ( SELECT 1 AS j UNION ALL SELECT 2 UNION ALL 
              SELECT 3      UNION ALL SELECT 4 )
            AS b
    ORDER BY i, j, rnd
        LIMIT 15
  ) AS t15
ORDER BY RAND() ; 
```

如果您想要“更多”随机性，在结果中有重复或三次重复的行，可能有些行根本没有显示，请将最后五行替换为：

```
 AS b
    ORDER BY RAND()
        LIMIT 15
  ) AS t15 ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:27:42.757

`select`无论`order by`. _ 但是，在订购表格数据之前，您可以使用各种方法复制表格数据。例如，`union all`将行放在一起两次：

```
select * from
(
    select * from tablename
    union all
    select * from tablename
) as tmp
order by rand() limit 9 
```

# php - “设置已更新”消息停止显示

> ID：13612792
> 
> 赞同：0
> 
> 时间：2012-11-28T19:21:59.317
> 
> 标签：php, wordpress

我使用下面的代码作为插件来为 wordpress 创建一个“选项菜单页面”：

```
add_action('admin_init', 'cardin_options_init' );
add_action('admin_menu', 'cardin_options_add_page');

function cardin_options_init(){
    register_setting( 'cardin_options_options', 'cardin_options');
}

function cardin_options_add_page() {
    add_options_page('Cardin Options', 'Cardin Options', 'manage_options', 'cardin_options', 'cardin_options_do_page');
}

function cardin_options_do_page() {
    ?>
    <div class="wrap">
        <div id="icon-options-general" class="icon32"><br></div>
        <h2>Cardin Options</h2>
        <form method="post" action="options.php">
            <?php settings_fields('cardin_options_options'); ?>
            <?php $options = get_option('cardin_options'); ?>
            <table class="form-table">
                <tr valign="top"><th scope="row">Information</th>
                    <td><input type="text" name="cardin_options[information]" value="<?php echo $options['information']; ?>" /></td>
                </tr>
            </table>
            <input type="submit" class="button-primary" name="submit" value="<?php _e('Save Changes') ?>" />
        </form>
    </div>
    <?php   
} 
```

它正在按应有的方式工作，但是，后来我决定创建自己的插件菜单页面，而不是“设置”子菜单，然后，我更改了以下行：

```
add_options_page('Cardin Options', 'Cardin Options', 'manage_options', 'cardin_options', 'cardin_options_do_page'); 
```

至：

```
add_menu_page('Cardin Options', 'Cardin Options', 'manage_options', 'cardin_options', 'cardin_options_do_page'); 
```

它有效，但是当我单击“保存更改”时，“设置已更新”消息不再显示。我应该怎么做才能让它再次显示？

提前非常感谢，很抱歉英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:07:32.063

```
<?php if($_POST['oscimp_hidden'] == 'Y') {   ?>
<div id="message" class="updated">
    <p><strong><?php _e('Settings saved.') ?></strong></p>
</div> 
```

编辑：继承人指南： http: [//net.tutsplus.com/tutorials/wordpress/creating-a-custom-wordpress-plugin-from-scratch/](http://net.tutsplus.com/tutorials/wordpress/creating-a-custom-wordpress-plugin-from-scratch/) 搜索：`if($_POST['oscimp_hidden'] == 'Y') {`

# .net-4.5 - 异步存储库和 CancellationToken

> ID：13612794
> 
> 赞同：0
> 
> 时间：2012-11-28T19:22:02.437
> 
> 标签：.net-4.5, async-await, cancellation, cancellation-token

我们正在迁移到 .NET 4.5，我正在考虑将异步添加到我的存储库中：

```
interface IRepository<T>
{
    T Find(int id);
    Task<T> FindAsync(int id);
    IEnumerable<T> FindAll();
    Task<IEnumerable<T>> FindAllAsync();
    ...
} 
```

实现可能会调用 DB、WebServices 等。

我的问题是，我应该支持 CancellationToken 吗？

（别担心 - FindAllAsync() 可能是基于 Rx 的:)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:50:15.477

好吧，绝对添加`async`到您的存储库中。我完全`async`赞成接管世界。:)

`CancellationToken`支持是另一个问题。如果可能需要它*或者*底层实现（DB/Web 服务）支持它，我通常会提供它（在这种情况下，实现是如此简单，我宁愿只提供它）。

请注意，您可以提供重载，而无需`CancellationToken`调用主要实现传递`CancellationToken.None`。或者，您可以在其接口上给出一个默认值，该值`new CancellationToken()`相当于`CancellationToken.None`. 我过去一直使用默认值方法，但在某些情况下（例如将`Action`变量分配给`myRepository.FindAllAsync`），重载允许方法解析但默认值不允许。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:34:22.593

我正要问同样的问题。我开始认为答案是“只有当你认为取消是一个重要的场景时”。如果您认为某些存储库需要很长时间以致用户或基础设施服务想要取消正在进行的查询，那么您应该这样做。我可以想象对于查询，尽管人们会认为大多数更新和插入会很快发生。如果他们不这样做，很可能是由于异常情况导致任务失败（超时？）。

添加对 CancellationToken 的支持将要求所有调用者提供一个，这会产生有害的链接效应。

# java - 递归函数无法获取最里面的异常消息

> ID：13612795
> 
> 赞同：1
> 
> 时间：2012-11-28T19:22:04.663
> 
> 标签：java, recursion, exception-handling

我写了这个方法

```
 private string FindInnerExceptionMessage(Exception ex)
    {
        string exceptionMsg = string.Empty;
        if (ex.InnerException == null)
        {
            exceptionMsg = ex.Message;
        }
        else
        {
            ex = ex.InnerException;
            FindInnerExceptionMessage(ex);
        }
        return exceptionMsg;
    } 
```

但是，在 FindInnerExceptionMessage 之后，它正在逐步返回 exceptionMsg 并且没有记录确切的异常消息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:25:27.860

您实际上并没有将递归调用的返回值分配给任何东西。结果，您的第一次调用将返回`String.Empty`，因为 的值`FindInnerExceptionMessage(ex.InnerException)`从未分配为返回值（除非传递给第一次调用的异常没有内部异常，在这种情况下它将起作用）。尝试这样的事情：

```
private string FindInnerExceptionMessage(Exception ex)
{
    string exceptionMsg = string.Empty;
    if (ex.InnerException == null)
    {
        exceptionMsg = ex.Message;
    }
    else
    {
        exceptionMsg = FindInnerExceptionMessage(ex.InnerException);
    }
    return exceptionMsg;
} 
```

# dns - 捕获 DNS 泄漏

> ID：13612803
> 
> 赞同：7
> 
> 时间：2012-11-28T19:22:26.127
> 
> 标签：dns

我正在尝试记录 DNS“泄漏”，即访问者访问我的网站时使用的 DNS 服务器。

如何确定 Web 请求来自哪个 DNS 服务器到我的服务器（即获取 DNS 泄漏）。这个网站[dnsleaktest.com](http://dnsleaktest.com)做到了，它知道我来自哪个 DNS 服务器？如何？它应该只能知道关于我的浏览器的一些统计信息，也许还有 HTTP 引用。它如何知道我的 DNS 服务器？

什么被剥削、利用？或者从我的浏览器到此服务器的流量是多少，dnsleaktest 在该流量中的何处能够获取此信息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T10:49:50.503

那不是那么容易。

dnsleaks*可能会*做什么——他们有自己的权威 DNS 服务器，他们网站上的 javascript 查询其域的各种随机生成的子域，并在他们的 DNS 服务器上监控对这些随机生成的子域的请求来自何处。

为此，您需要在**您自己的 DNS 服务器**（不是您的注册商或托管服务提供商提供的服务器）上托管一些域。您需要监控对该服务器的查询 - 如果您解析 DNS 服务器日志或拥有自己的 DNS 服务器软件，或者您的 DNS 服务器提供一些 API 挂钩来查看传入请求，则可以完成此操作。然后，您为您的网站编写一个脚本来查询各种子域，并告诉您网站上的服务器端脚本应该监控哪些子域请求。服务器端脚本依次与 DNS 服务器对话。

以上都是未经证实的猜测。我认为没有其他方法可以做到这一点。

# android - 停止音乐应用播放音乐

> ID：13612804
> 
> 赞同：1
> 
> 时间：2012-11-28T19:22:31.553
> 
> 标签：android

我四处寻找，但没有找到任何答案。我想要我的应用程序，如果有音乐应用程序正在播放音乐（例如 Google 音乐），请停止从我的应用程序播放音乐。那可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T20:48:10.537

这取决于正在使用的音频播放器。您可能能够控制一些，但其他可能仍然免疫。使用内置的，您可以尝试此代码

```
public static final String SERVICECMD = "com.android.music.musicservicecommand";
public static final String CMDNAME = "command";
public static final String CMDSTOP = "stop";

AudioManager mAudioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);

if(mAudioManager.isMusicActive()) {
    Intent i = new Intent(SERVICECMD);
    i.putExtra(CMDNAME , CMDSTOP );
    YourApplicationClass.this.sendBroadcast(i);
} 
```

其他命令是

```
public static final String CMDTOGGLEPAUSE = "togglepause";
public static final String CMDPAUSE = "pause";
public static final String CMDPREVIOUS = "previous";
public static final String CMDNEXT = "next"; 
```

命令取自[android/music/MediaPlaybackService.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/1.5_r4/com/android/music/MediaPlaybackService.java)

# html - 如何在表格行中排序结果

> ID：13612805
> 
> 赞同：0
> 
> 时间：2012-11-28T19:22:33.900
> 
> 标签：html, html-table, prestashop, rows

我正在尝试做某事，但我做不到。我有一张表，结果如下：

```
+----------+
|Dressing 1|
+----------+
|Dressing 2|
+----------+
|Dressing 3|
+----------+
|Dressing 4|
+----------+
|Dressing 5|
+----------+
|Dressing 6|
+----------+
|Dressing 7|
+----------+
|Dressing 8|
+----------+
|Dressing 9|
+----------+ 
```

但我希望它像这样显示：

```
+----------+----------+----------+
|Dressing 1|Dressing 2|Dressing 3|
+----------+----------+----------+
|Dressing 4|Dressing 5|Dressing 6|
+----------+----------+----------+
|Dressing 7|Dressing 8|Dressing 9|
+----------+----------+----------+ 
```

现在，我有这样的代码：

```
<table cellpadding="6" border=0>

<tr style="height:20px">

{foreach from=$group.attributes name=awp_loop item=group_attribute}

{strip}

{assign var='id_attribute' value=$group_attribute.0}

<td align="center" {if $group.group_layout}valign="top"{/if}>
<div id="awp_checkbox_cell{$id_attribute}" style="{if !$group.group_layout}float:left;{else}width:100%;clear:left;{/if}">

{if $group.group_per_row > 1}<center>{/if}

<input style="border:none;margin:0;padding:0" type="checkbox" {if $group.attributes_quantity.$id_attribute == 0 && $awp_out_of_stock == 'disable'}disabled="disabled"{/if} class="awp_attribute_selected awp_group_class_{$group.id_group}" name="awp_group_{$group.id_group}" id="awp_checkbox_group_{$id_attribute}" onclick="awp_select('{$group.id_group|intval}',{$group_attribute.0|intval}, {$awp_currency.id_currency},false);" value="{$group_attribute.0|intval}" {if $group.default|is_array && $id_attribute|in_array:$group.default}checked{/if} />&nbsp;

{if $group.group_per_row > 1}</center>{/if}

</div>
</td>

{if $smarty.foreach.awp_loop.iteration < $group.attributes|@count && $smarty.foreach.awp_loop.iteration % $group.group_per_row == 0}

</tr>

<tr style="height:20px;">

{/if}

{/strip}

{/foreach}

</tr>

</table> 
```

但我不知道如何制作表格或代码以仅连续输入 3 个条目。如果有人可以提供帮助，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:24:56.943

我会使用一个列表并将每个`li`元素浮动。这会给你你想要的结果，它会更干净。

[http://jsfiddle.net/Zppya/](http://jsfiddle.net/Zppya/)

至于您的表格方法...添加一个计数器并使用 mod/remainder 函数来确定每三个元素，以便您可以创建一个新行。

# jquery - mouseenter mouseleave jquery 悬停并重新启动 simple.carousel.js 的问题

> ID：13612816
> 
> 赞同：4
> 
> 时间：2012-11-28T19:23:37.810
> 
> 标签：jquery, hover, carousel, mouseenter, mouseleave

我对 simple.carousel.js 创建了一个编辑，以在悬停时停止轮播，但是当鼠标离开时重新启动它时遇到问题。我添加到 simple.carousel.js 的代码是：

```
// hover stop
if(config.auto!=true)
    $(this).mouseenter(function() {
        config.auto=false;
    }).mouseleave( function() {
        config.auto=true;
    }); 
```

您可以在这里看到完整的代码/示例以及我从上面添加的内容：http: [//jsfiddle.net/6r6sC/2/](http://jsfiddle.net/6r6sC/2/)

我的 mouseleave 功能有问题吗？

不确定这是否会有所帮助，但我也尝试了以下方法，但这也不起作用：

```
// hover stop
if(config.auto!=true)
    $(this).mouseenter(function() {
        config.auto=false;
    }).mouseleave( function() {
        setTimeout(function() {
        slide('next');
    }, config.auto);
    }); 
```

任何帮助将不胜感激，因为这让我很难过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:43:24.070

使用 true 作为值是一个问题，导致 false boolean 或 int 预期来自 init 函数。

编辑 4：http: [//jsfiddle.net/6r6sC/44/](http://jsfiddle.net/6r6sC/44/)

在 slide() 中，添加了 startAuto()

```
if(config.auto!=false) {
startAuto();    
} 
```

EDIT3：修复了多个计时器的问题，并创建了两个函数来处理启动/停止自动滑块。

这里的解决方案：http: [//jsfiddle.net/6r6sC/41/](http://jsfiddle.net/6r6sC/41/)

```
var cachedAuto = config.auto;
var timer = "";

var startAuto = function() {

    config.auto = cachedAuto;
    clearTimeout(timer);

    timer = setTimeout(function() {
         slide('next');
    }, config.auto);   
}

var stopAuto = function() {
    clearTimeout(timer);
    config.auto = false;
}

if(config.auto!=false) {
    // start auto sliding
    startAuto();    

    // pause/start on mouse events            
    $(this).on("mouseenter", function(event){
        stopAuto();
    }).on("mouseleave", function(event){
        startAuto();
    });
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T20:27:02.327

好的，我已经做了一些研究和测试，并将“mouseleave”替换为“mouseout”，它可以工作！所以试试吧。

```
 // hover stop
 if(config.auto!=true)
$(this).mouseenter(function() {
    config.auto=false;
}).mouseout( function() {
    config.auto=true;
}); 
```

# database-design - 快速查找 100gb 数据

> ID：13612821
> 
> 赞同：3
> 
> 时间：2012-11-28T19:23:44.790
> 
> 标签：database-design

我在 ~10MB .csv 文件中保存了大约 100GB 的数据。如何优化对该数据的数千次查询的查找速度？具体来说，我不知道要考虑哪些技术或如何估计相对性能。

每个文件对于一个日期都是唯一的，并且包含多个人的数据，例如：

```
...
2005-07-03, "Daffy Duck", ...
2005-07-03, "Daffy Duck", ...
2005-07-03, "Mickey Mouse", ...
2005-07-03, "Mickey Mouse", ...
... 
```

我想为数千个日期/名称对提取与给定日期/名称对应的所有信息。等效的 SQL 查询将是`SELECT * FROM myDB WHERE Date='2005-07-03' AND Name='Mickey Mouse'`.

目前我还没有将数据加载到数据库中。为了执行我的“查询”，我找到了适当的日期文件并按我正在寻找的名称过滤这些行。将数据存储在关系数据库、noSQL 数据库或任何其他方式中是否会获得性能改进？如果是这样，为什么和多少？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T19:29:44.463

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T20:25:44.283

我要站在魔鬼的拥护者的立场上说，相对于将所有这些数据放入其中所需的工作，对于此特定操作，您可能无法使用关系数据库或任何其他数据库“系统”获得更好的性能一个数据库。

尽管我建议将数据加载到某种数据库（即成熟的编码数据管理系统）中，但您的文件很小。从您的问题来看，听起来您可以在恒定时间内识别出所需的文件，然后只需要读取和过滤（也许使用正则表达式？）最多 10MB 的数据，那么为什么需要关系数据库呢？

只需识别文件并通过 grep 管道它就完成了，对吗？这很有效。

具有适当索引（日期、名称）的关系数据库只会使第二步更有效率，即便如此，数据集也相当小——每个 10MB 文件中有几千行？

我知道通过将所有内容都保存在文本文件中，这听起来是一种非常粗略的解决问题的方法，但请保持简单。您必须管理数据的解析、验证和加载到数据库中，然后以数据库形式管理数据的额外存储等。

您没有提供任何信息，说明您需要执行此搜索的频率、您如何处理作为结果获得的数据或任何其他性能和操作要求。

如果您需要每秒多次执行此特定操作，或者想要灵活地以更具创造性的方式处理数据，或者对当前位于单独文件中的数据或类似的任何数量的数据执行任何类型的分析，那么关系数据库立即成为数据管理的最佳选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T21:15:39.510

其他人已经提供了一些好的观点，让我稍微谈谈物理数据库结构......

如果可以的话，选择一个支持[集群](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)^(1的 DBMS 并创建一个 PK 为)`{Date, Name, No}`²的集群（也称为索引组织）表。然后，您的 SELECT 可以满足于简单的索引范围扫描并且根本没有堆访问（表堆甚至不存在），因此您不必担心错误的[集群因子](http://oracle-online-help.blogspot.com/2006/11/clustering-factor_28.html)。实际性能应该非常出色，并且可以很好地扩展到比您目前拥有的更多数据。

如果您的 DBMS 支持[前沿索引压缩](http://richardfoote.wordpress.com/2008/02/17/index-compression-part-i-low/)，请将其打开以消除此复合主/集群索引的 B-Tree 结构中重复值的存储（和缓存）成本。

* * *

*¹例如 Oracle、MS SQL Server、MySQL/InnoDB...*

*² where`No`区分多行上的相同`Date`与相同`Name`。或者，只需`Date`更细化（例如精确到一秒），将查询修改为：`SELECT * FROM myDB WHERE Name='Mickey Mouse' AND Date >= '2005-07-03' AND Date < '2005-07-04')`，并将 PK 字段的顺序反转为`{Name, Date}`，以满足修改后的查询。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T19:35:32.673

我肯定会使用数据库，但是为问题选择正确的数据库需要更多信息，尤其是关于数据格式的信息。以下是我的建议，其中包含一些关于何时选择其中一个的详细信息：

**关系：**

如果您的所有数据都符合相同的模式（具有所有相同的字段），那么关系将是有意义的。从您的问题中，您提到您只需要 2 个索引，`date`并且`name`.

假设每个条目都有很多其他数据，那么 SQL 数据库会很有意义（使用类似于查询的东西）。

好处：

*   你似乎已经知道它是如何工作的
*   非常类似于 CSV 的做事风格
*   您可以使用 SELECT/JOIN（如果您以后需要）

缺点：

*   未使用字段的空间浪费
*   不能很好地扩展（如果您需要更多空间）
*   可能是矫枉过正，因为问题不是令人尴尬的关系

**NoSQL：**

如果您的数据不适合相同的模式（许多不同的键只有几个共享键），那么文档存储会更有意义。由于您的数据是一种关系数据，因此 MongoDB 会很有意义。

我会为您的数据库使用以下 JSON 指南：

```
{
    "name": "MickyMouse",
    "date": ...,
    other fields...
} 
```

我会设置`name`和`date`成为索引，就像在 SQL 示例中一样。MongoDB 速度很快，并且不会占用额外的键空间。

这种方法的好处：

*   扩展性非常好（您可以添加节点和分片）
*   使用起来真的很简单

缺点：

*   可能无法提供您需要的功能

**结论：**

两者都是很好的方法，但这实际上取决于数据的具体情况。一般来说，数据库非常擅长查询，而文件系统则不然，尤其是当数据变大时。

我个人会走 NoSQL 路线，但我真的需要更多关于数据集和使用模式的信息。如果数据需要扩展，那么这可能是最好的选择。

我不是真正的专家，但我只是不太喜欢使用 SQL。如果数据是令人尴尬的关系数据，那么 SQL 就很有意义，但您所做的一切似乎都适合一两个表。

# sql - SQL 语句，使用 AS 子句

> ID：13612823
> 
> 赞同：-3
> 
> 时间：2012-11-28T19:23:58.567
> 
> 标签：sql

好的，所以我试图弄清楚如何更改数据一旦显示在选择语句中就可以查看。所以表格看起来像这样

**假期_详情**

Holiday_Code - Holiday_Desc - Country_Visited

Country_Visited 可以是“美国”、“印度”、“中国”或“西班牙”。

我的问题是，在视图声明中，我将如何使用 AS 子句将“美国”更改为美国？ETC

我以为我可能不得不使用嵌套的 select 语句，但这不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T19:25:31.730

你不需要`AS`你需要一个案例：

```
select case
         when country_visited = 'USA' then 'America'
         when country_visited = 'India' THEN 'ASIA'
         when country_visited = 'CHINA' THEN 'ASIA'
         else country_visited 
       end as country_visited,
       ....
from holiday_details 
```

# vim - Vim：将 Shift-Cmd-Opt-Ctrl 重新映射为 Escape

> ID：13612825
> 
> 赞同：3
> 
> 时间：2012-11-28T19:24:02.387
> 
> 标签：vim

似乎Steve Losh 的[这篇文章](http://stevelosh.com/blog/2012/10/a-modern-space-cadet/)一直在流传，简而言之，它使我将 Caps Lock 重新映射到 F19，并在系统级别将 F19 重新映射到 Shift-Command-Ctrl-Alt，从而给了我一个我自己的键盘快捷键的整个命名空间。

问题是我喜欢在 Vim 中使用 Caps Lock 作为我的转义键。我试过`:map <M-C-D-S> <esc>`了，但在采购时，点击大写锁定没有任何作用。我猜这是因为 Vim 期望使用修饰符按下实际的键。

我的问题是：是否可以让 Vim 将 Shift-Cmd-Ctrl-Alt 读取为 Escape？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T20:11:52.293

不，您不能映射四个修饰符。连三个都没有，连两个都没有。而且，嗯……甚至没有。

“修饰符”被称为“修饰符”是有原因的：它们与普通键一起使用以“修改”它们的含义。Shift、Alt、Cmd 和 Ctrl 键本身不做任何事情，而 Vim 正确地什么也不做，只是在您按下它们时等待进一步的按键操作。

此外，Vim 的输入机制有点“老派”，很可能是为了在它可能运行的多个平台上保持一致。它不会使用普通键注册多个修饰符。这意味着，如果终端不吃掉它们（它确实吃掉了它们），你只能做`<C-…&gt;`or `<S-…&gt;`。Alt 键并不是一个真正可行的解决方案，因为有多少终端仿真器在处理它，而 Cmd 键仅适用于 Mac，并且无论如何只能在 MacVim 中使用。

那时，如果您准备将四个键组合在一起以模拟仅*一个*键的功能（这本身就很愚蠢），那么您不妨简单地使用`<C-c>`它，AFAIK，在任何地方都可以使用。你的左手会感谢你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T08:37:41.737

我最初的问题是[XY Problem](http://www.perlmonks.org/index.pl?node_id=542341)。

> 你想做 X，你认为 Y 是最好的方法。你不是问X，而是问Y。

我想让 Vim 被理解`Caps Lock`为`Esc`（同时仍然保持其他疯狂的系统级修改），所以我询问了 Vim 没有的功能。

事实证明，虽然上面提供的答案很棒，而且内容丰富，但我只是不喜欢被告知“不”。我在错误的问题空间中寻找答案。

OP 链接中讨论的应用程序之一 KeyRemap4MacBook 具有高度可扩展性。文档还有很多不足之处，但我能够根据我原来的问题拼凑出一个解决方案。这与“vim 中的地图内容”的原始主题大相径庭，为此我深表歉意，但我希望将其留给需要它的可怜灵魂。

简单来说，上一篇文章建议将这个添加到 KR4MB 的 'private.xml' 文件中：

```
<item>
    <name>Remap Caps Lock to Hyper</name>
    <appendix>OS X doesn't have a Hyper. This maps Left Control to Control + Shift + Option + Command.</appendix>

    <identifier>caps_lock_to_hyper</identifier>

    <autogen>
        --KeyToKey--
        KeyCode::F19,

        KeyCode::COMMAND_L,
        ModifierFlag::OPTION_L | ModifierFlag::SHIFT_L | ModifierFlag::CONTROL_L
    </autogen>
</item> 
```

（[稍作](http://www.leancrew.com/all-this/2012/11/shift-control-option-command-on-caps-lock/)修改`Caps Lock`）

这可以改为：

```
<item>
  <name>Caps Lock to Hyper OR Escape</name>
  <appendix>Caps Lock should be remapped to F19 (80) in PCKBH</appendix>
  <appendix>This remaps F19 to "Hyper" aka Cmd-Shift-Ctrl-Alt...</appendix>
  <appendix>...but, when pressed alone, F19 sends only escape</appendix>
  <identifier>remap.hyper2hyper_escape</identifier>
  <autogen>
      --KeyOverlaidModifier-- 
      KeyCode::F19, 

      KeyCode::COMMAND_L,
      ModifierFlag::OPTION_L | ModifierFlag::SHIFT_L | ModifierFlag::CONTROL_L, 

      KeyCode::ESCAPE
  </autogen>
</item> 
```

这告诉系统，无论何时`Caps Lock`单独按下，它实际上都是`Esc`，但如果它与任何其他键一起按下，它就是`F19`。

# javascript - 访问被拒绝 - IE8 Polyfills

> ID：13612831
> 
> 赞同：1
> 
> 时间：2012-11-28T19:24:24.583
> 
> 标签：javascript, html, internet-explorer, localhost, access-denied

我发现了与我遇到的问题类似的问题，但似乎没有一个可以解决我的特定问题。

我正在开发一个在本地托管的网站原型。我在头部引用 JQuery、Modernizr 和 Respond，以及 CSS 中的 PIE.htc 作为border-radius polyfill（代码如下）：

```
<!DOCTYPE html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Inquire - Home</title>
<link rel="stylesheet" href="css/normalize.css" />
<link rel="stylesheet" href="css/desktop.css" />
<script src="js/libs/jquery-1.8.2.min.js"></script>
<script src="js/libs/modernizr-2.0.6.min.js"></script>
<script src="js/respond.min.js"></script> 
```

CSS：

```
.button{
border-radius: 7px 7px 0 0;
border: 2px solid #00667A;
-moz-border-radius: 7px 7px 0 0;
-webkit-border-radius: 7px 7px 0 0;
background: #0CF;
background: -webkit-gradient(linear, left top, left bottom, from(#00d6ff), to(#00667A));
background: -moz-linear-gradient(top, #00d6FF, #00667A);
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#00D6FF endColorstr=#00667A);
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#00D6FF endColorstr=#00667A)";
behavior: url(PIE.htc);
} 
```

IE8 加载 JQuery 库，但后续脚本出现以下错误：

网页错误详情

用户代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 6.1；WOW64；Trident/4.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；InfoPath.3；MS -RTC LM 8；.NET4.0C；.NET4.0E) 时间戳：2012 年 11 月 28 日星期三 19:14:30 UTC

消息：访问被拒绝。

行：4 字符：12115 代码：0 URI：file:// **PATH** /prototype/js/libs/modernizr-2.0.6.min.js

消息：访问被拒绝。

行：6 字符：2747 代码：0 URI:file:// **PATH** /prototype/js/respond.min.js

消息：访问被拒绝：file:// **PATH** /prototype/PIE.htc Line: 0 Char: 0 Code: 0 URI: file:// **PATH** /prototype/index.html

知道如何解决这个问题，以便 IE 加载 Modernizr 并接受 PIE.htc 引用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:25:35.533

我暂时决定，我会让 IE 中的边界半径降级，因为我必须推进这个原型以赶上最后期限。我确实计划在下一次迭代中考虑 Diodeus 的建议，至少看看这是否是问题所在。

# c++ - 用于引用类本身而不是使用模板的类的模板

> ID：13612832
> 
> 赞同：0
> 
> 时间：2012-11-28T19:24:27.640
> 
> 标签：c++

所以我有一个不寻常的情况，我在模板和教程方面的经验似乎没有涵盖。

我正在编写一个程序，该程序会自动为另一个无法使用但 API 有限的程序签署消息。有一个配置文件包含一个字符串，告诉我的程序使用什么哈希来签署消息。该字符串存储在一个 signatureAlgorithm 对象中，该对象存储一个摘要、摘要的大小，并为摘要的编码提供一些选项。我将 Crypto++ 库用于散列函数。现在我有一大组 if/else if 语句和三个命令，具体取决于字符串所说的算法应该是什么，如下所示：

```
void signatureAlgorithm::createDigest(string input)
{
bool digestFail = false;

if (_algorithm == "md5")
{
    //byte digest[ CryptoPP::MD5::DIGESTSIZE ];
    _digestSize = (CryptoPP::MD5::DIGESTSIZE);
    _digest = new byte[ _digestSize ];
    CryptoPP::MD5().CalculateDigest( _digest, (byte*) input.c_str(), input.length() );
}

.....

else if (_algorithm == "sha256")
{
    _digestSize = (CryptoPP::SHA256::DIGESTSIZE);
    _digest = new byte[ _digestSize ];
    CryptoPP::SHA256().CalculateDigest( _digest, (byte*) input.c_str(), input.length() );
}
else if (_algorithm == "sha512")
{
    _digestSize = (CryptoPP::SHA512::DIGESTSIZE);
    _digest = new byte[ _digestSize ];
    CryptoPP::SHA512().CalculateDigest( _digest, (byte*) input.c_str(), input.length() );
}
else
    digestFail = true;

if (!digestFail)
    _ready = true;
else
    _ready = false;
} 
```

_digestSize 将摘要大小存储在对象中，就像 _digest 对摘要字节所做的那样（字节为 typedef const unsigned char*），而 _ready 在其他函数中用于确定在将其提供给调用程序之前已对其进行摘要，或者改为向程序返回错误。

我最终计划切换到地图以使事情更高效和更整洁，但是在此之前，我必须找到一种方法来使 _digestSize 的设置和 CreateDigest() 的调用更通用。我试图避免修改库，因为我想在最终版本中以编译形式维护 Crypto++ 的 FIPS 状态，但现在我只是在使用源代码进行测试，如果这会有所不同。

我考虑过模板，每个 if 语句的内部部分只是设置值，但我找不到以这种方式使用模板的示例。我发现它们用于创建有其他功能的类，但在这种情况下，如果我在这里思考，我只需要能够创建一个简单地指向另一个类的泛型类。

我正在尝试做的伪代码：

```
class tempClass {};

if (_algorithm == "md5")
{
  tempClass = CryptoPP::MD5
}
......
else
  digestFail = true;

_digestSize = (tempClass::DIGESTSIZE);
_digest = new byte[_digestSize];
tempClass().CalculateDigest( _digest, (byte*) input.c_str(), input.length() ); 
```

-吉米

编辑：虽然在评论中我说由于类树中的分叉而继承不起作用，但事实证明我一直在使用的文档是最新版本的。我用于测试的版本和 FIPS 版本较旧，从之前像 MD5 等功能被拆分成一个单独的“弱”结构。

编辑2：但是，我仍然很好奇是否有办法解决这个问题，即使这些类是分叉的并且没有从同一个地方继承CalculateDigest。

编辑 3：约翰班德拉回答了这个问题，但我只需要稍微改变他给我的东西。更改在答案的评论中。谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:35:04.537

这样做的另一种方法，但有更多的模板元编程

有关完整的可运行示例，请参见

[https://gist.github.com/4164700](https://gist.github.com/4164700)

```
template<class Digest, class... T>
struct DigestMatcher{
    template<class U, class ... V>
    static byte* doDigest(std::string input, int& digestSize,std::string algorithm,U firstalgorithm, U nextalgorithm, V... algorithms){
    if(algorithm==firstalgorithm){
        return doDigest(input,digestSize);
    }
    else{
        return DigestMatcher<T...>::doDigest(input,digestSize,algorithm,nextalgorithm,algorithms...);

    }
}

template<class U>
static byte* doDigest(std::string input, int& digestSize,std::string algorithm, U firstalgorithm){
    if(algorithm==firstalgorithm){
        return doDigest(input,digestSize);
    }
    else{
        std::cout << algorithm << " invalid" << std::endl;
        return 0;
    }
}

static byte* doDigest(std::string input, int& digestSize){

        // Cout for debug purposes
        std::cout << "using " << typeid(Digest).name() << std::endl;
        digestSize = Digest::DIGESTSIZE;
        byte* digest = new byte[ digestSize ];
        Digest().CalculateDigest( digest, (byte*) input.c_str(), input.length() );
        return digest;
}

}; 
```

然后为您的调用代码

```
void signatureAlgorithm::createDigest(std::string input)
{
    _digest = DigestMatcher<MD5,SHA256,SHA512>::doDigest(input,_digestSize,_algorithm,"md5","sha256","sha512");
    if(_digest)
        _ready = true;
    else
    _ready = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:01:18.550

将代码分解成这样的模板函数

// 假设 _digest 和 _digest size 是类成员；

```
template<class Digest>
byte* doDigest(string input, int& digestSize){
        int digestSize = (Digest::DIGESTSIZE);
        byte* digest = new byte[ digestSize ];
        Digest().CalculateDigest( digest, (byte*) input.c_str(), input.length() );
        return digest;
 } 
```

然后在您的 createDigest 函数中执行此操作

```
if (_algorithm == "md5")
{
    _digest = doDigest<CryptoPP::MD5>(input,_digestSize);
}

else if (_algorithm == "sha256")
{
    _digest = doDigest<CryptoPP::SHA256>(input,_digestSize);
}
... 
```

离题，但您可能需要考虑使用向量而不是字节*

# c# - 为什么我的代码没有进入我的函数

> ID：13612833
> 
> 赞同：-9
> 
> 时间：2012-11-28T19:24:31.807
> 
> 标签：c#

这是我的功能：

```
IEnumerable<Packet> packets = splitPacket(packet, 2);

public static IEnumerable<Packet> splitPacket(Packet packet, int numberOfFragments)
{
    //
} 
```

我正在调用这个函数，但由于某种原因我的代码没有进入我的函数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T19:25:59.173

我的心理调试技能告诉我，您的函数是一个[*迭代器函数*](http://msdn.microsoft.com/en-us/library/vstudio/dscyy5s0.aspx)，这意味着它包含`yield return;`语句。

迭代器函数中的代码仅在迭代结果时执行。
这称为[延迟执行](http://blogs.msdn.com/b/charlie/archive/2007/12/09/deferred-execution.aspx)。

# c++ - 如何检查用于匹配的匹配组（boost-regex）

> ID：13612837
> 
> 赞同：1
> 
> 时间：2012-11-28T19:24:44.863
> 
> 标签：c++, regex, parsing, c++11, boost-regex

我正在使用 boost::regex 解析一些格式字符串，其中 '%' 符号是转义字符。因为我在 boost::regex 方面没有太多经验，而且说实话，我对 regex 进行了一些试验和错误。这段代码是我想出的某种原型。

```
std::string regex_string = 
            "(?:%d\\{(.*)\\})|"                   //this group will catch string for formatting time
            "(?:%([hHmMsSqQtTlLcCxXmMnNpP]))|"    //symbols that have some meaning
            "(?:\\{(.*?)\\})|"                    //some other groups
            "(?:%(.*?)\\s)|"
            "(?:([^%]*))";

    boost::regex regex;
    boost::smatch match;

    try
    {
        regex.assign(regex_string, boost::regex_constants::icase);
        boost::sregex_iterator res(pattern.begin(), pattern.end(), regex);
        //pattern in line above is string which I'm parsing
        boost::sregex_iterator end;
        for(; res != end; ++res)
        {
            match = *res;
            output << match.get_last_closed_paren();
            //I want to know if the thing that was just written to output is from group describing time string
            output << "\n";
        }

    }
    catch(boost::regex_error &e)
    {
        output<<"regex error\n";
    } 
```

这很好用，在输出上我有我想要捕捉的东西。但我不知道它来自哪个组。我可以做类似`match[index_of_time_group]!=""`的事情，但这有点脆弱，看起来不太好。如果我更改`regex_string`指向组捕获字符串以格式化时间的索引也可能会更改。

有没有一种巧妙的方法来做到这一点？诸如命名组之类的东西？我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:48:41.013

您可以使用[`boost::sub_match::matched`](http://www.boost.org/doc/libs/release/libs/regex/doc/html/boost_regex/ref/sub_match.html#boost_regex.sub_match.matched)bool 成员：

```
if(match[index_of_time_group].matched) process_it(match); 
```

也可以在正则表达式中使用命名组，例如：`(?<name_of_group>.*)`，并且上面的行可以更改为：

```
if(match["name_of_group"].matched) process_it(match); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:52:46.157

从名称/模式对动态构建`regex_string`，并返回名称->索引映射以及正则表达式。然后编写一些代码来确定匹配是否来自给定的名称。

如果你疯了，你可以在编译时做（从标签到索引的映射）。这不值得。

# javascript - ASP.NET MVC4 + 下拉列表 + onChange js 事件

> ID：13612838
> 
> 赞同：3
> 
> 时间：2012-11-28T19:24:50.390
> 
> 标签：javascript, asp.net, drop-down-menu, onchange

所以我的查看历史中有一个下拉列表：

```
@Html.DropDownList("ddlAccounts", null,  new { @onchange="onChange(this.value);" }) 
```

我有这个 js 事件来替换 url ../History/ 到 ../History/2, ../History/5

```
function onChange(value) {
    window.location.href = value;
} 
```

相反，它总是将值添加到当前 url。因此，例如在更改下拉列表中的索引后，我得到了 History/2/5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:26:48.607

您没有正确获得选定的值：

```
@onchange="onChange(this.options[this.selectedIndex].value);" 
```

这是当前页面 url 的结构：

```
hash: "#13612872"
host: "stackoverflow.com"
hostname: "stackoverflow.com"
href: "http://stackoverflow.com/questions/13612838/asp-net-mvc4-dropdownlist-onchange-js-event/13612872#13612872"
origin: "http://stackoverflow.com"
pathname: "/questions/13612838/asp-net-mvc4-dropdownlist-onchange-js-event/13612872"
port: ""
protocol: "http:" 
```

# php - 在“for循环”之外显示PHP数组值

> ID：13612843
> 
> 赞同：1
> 
> 时间：2012-11-28T19:25:18.500
> 
> 标签：php, html, arrays, function

这是我的代码

```
for ($i=0; $i<$Percentile["Parameter_length"]; $i++)
{
  echo "Eqt_Param".$i."=".$Percentile["Eqt_Param".$i]; 
} 
```

上面的代码会显示

```
Eqt_Param0=2.00
Eqt_Param1=3.00
Eqt_Param2=1.00
Eqt_Param3=5.00 
```

如果我放在`echo()`for 循环之外，我需要相同的结果。请帮我解决这个问题...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T19:27:30.553

这个怎么样？只需将 foreach 的结果连接成一个可以回显的变量。

```
$output = "";
for ($i = 0; $i < $Percentile["Parameter_length"]; $i++)
{
    $output .= "Eqt_Param" . $i . "=" . $Percentile["Eqt_Param" . $i];
}

echo $output; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:27:52.880

您需要将您的值存储在一个存在于类似范围之外的 viarable 中`for` ：

```
$accumulatedString = '';
for ($i=0; $i<$Percentile["Parameter_length"]; $i++) { 
  echo "Eqt_Param".$i."=".$Percentile["Eqt_Param".$i]; 
  $accumulatedString .= "Eqt_Param".$i."=".$Percentile["Eqt_Param".$i];
}
echo $accumulatedString; 
```

那就是如果你想把它全部作为一个字符串。

# ruby-on-rails - 如何在 Rails 模型的回调中访问参数？

> ID：13612846
> 
> 赞同：12
> 
> 时间：2012-11-28T19:25:29.067
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.2, activemodel

我有一个模型的回调，该模型需要根据表单中输入的另一个字段创建依赖对象。但是`params`在回调方法中是未定义的。还有其他方法可以访问它吗？从表单传递回调方法参数的正确方法是什么？

```
class User < ActiveRecord::Base
  attr_accessible :name
  has_many :enrollments

  after_create :create_enrollment_log
  private
  def create_enrollment_log
    enrollments.create!(status: 'signed up', started: params[:sign_up_date])
  end
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T19:42:25.307

**模型中无法访问参数，即使您将它们作为参数传递，也会被视为不好的做法，也可能很危险。**

您可以做的是创建虚拟属性并在模型中使用它。

```
class User < ActiveRecord::Base
 attr_accessible :name, :sign_up_date
 has_many :enrollments

 after_create :create_enrollment_log
 private
 def create_enrollment_log
   enrollments.create!(status: 'signed up', started: sign_up_date)
 end
end 
```

其中 sign_up_date 是您的虚拟属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:37:46.137

params 在模型中将不可用。

一种可能的方法是在用户模型中定义一个虚拟属性并在回调中使用它

```
class User < ActiveRecord::Base
 attr_accessible :name,:sign_up_date
 has_many :enrollments

 after_create :create_enrollment_log
 private
 def create_enrollment_log
   enrollments.create!(status: 'signed up', started: sign_up_date)
 end
end 
```

您必须确保表单中的字段名称是 user[:sign_up_date]

# windows - Windows 8 Pro 拒绝 NAS 访问

> ID：13612849
> 
> 赞同：0
> 
> 时间：2012-11-28T19:25:39.663
> 
> 标签：windows, nas

我刚刚将我的系统升级到了 win8 pro（当然是全新安装），一切正常运行——除了 Windows 拒绝我访问我的 Netgear ReadyNAS Duo。我可以看到它已连接到我的网络，因为它已获得 IP。差不多就是这样。我在网络部分看不到驱动器，无法映射或访问它。

驱动器本身很好，因为我可以从另一台运行 win7 的机器上访问它。

在微软解决问题之前，是否有人经历过类似的事情和/或知道解决方法？

提前致谢！

# php - PHP正则表达式：字符串以开头和结尾

> ID：13612850
> 
> 赞同：1
> 
> 时间：2012-11-28T19:25:40.473
> 
> 标签：php, regex, expression

```
$ptn = "/^Response.+?[:] /";
$str = "Response from Moore Auto: Thanks for your feedback";
$rpltxt = "";
echo preg_replace($ptn, $rpltxt, $str); 
```

“Moore Auto”是一个变量名，所以我只需要冒号和空格后面的文本。在这种情况下，所需的最终结果将是字符串“感谢您的反馈”。非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T19:31:25.717

简单`substr()`，像这样：

```
$str = 'Response from Moore Auto: Thanks for your feedback';
echo substr($str, strpos($str,':')+2);  //echoes "Thanks for your feedback" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:33:08.927

如果有多个冒号，Damiens 解决方案不起作用。如果第一部分不包含冒号，这应该始终有效：

```
<?php 
$ptn = "/^Response[^:]+:\s*(.*)$/";
$str = "Response from Moore Auto: Thanks for your feedback";
if (preg_match($ptn, $str, $match)) {
    $text = $match[1];
    echo $text; //Thanks for your feedback
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:33:10.043

尝试

```
<?php 
$ptn = "/^(Response.+[:])(.*?)/";
$str = "Response from Moore Auto: Thanks for your feedback";
$rpltxt = "$2";
echo preg_replace($ptn, $rpltxt, $str);
?> 
```

# sql - Wordpress 帖子显示在 SQL 数据库中但不在仪表板中

> ID：13612855
> 
> 赞同：2
> 
> 时间：2012-11-28T19:25:55.797
> 
> 标签：sql, wordpress, posts

我转移了我的网站，但遇到了问题：

我看不到我拥有的任何 Worpdress 帖子，当我进入我的 phpMyAdmin 时，它们就在那里，在 wp-posts 表中。

所有的 URL 都是正确的，其余的 URL 路径和一切都很好。

有谁知道如何从 SQL 恢复这些帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:31:51.847

Did you change the database connection credentials in wp-config.php? If you transferred to another host, you would most likely need to change these credentials.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:00:01.957

我遇到了类似的问题，并通过使用 WP 中包含的导出/导入工具解决了这个问题（工具 > 从旧站点导出；工具 > 导入 > 安装 WPimporter > 在新站点上导入）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-11-29T07:14:56.497

老问题，但只是发生在我身上。在开发和生产之间。

Production 有很多内容更新，但 dev 有最新的代码，所以我只导入了帖子和 postmeta 以及分类等。帖子没有出现在 wp-admin 中，如果在前端访问会返回 404。

解决方案是遍历所有帖子并调用`wp_update_post(array('ID'=>$postID))`它，它起作用了。

# html - 下划线粗细

> ID：13612868
> 
> 赞同：3
> 
> 时间：2012-11-28T19:26:33.590
> 
> 标签：html, css

我试图控制下划线的粗细，但是，它似乎只是一条不符合文本的巨大水平线。如何使文本下划线与文本的粗细相同：

```
<!DOCTYPE>
<html>
<head>
<style type="text/css">
.title {

border-bottom: 2px solid red;

}
</style>
</head>
<body>
<div class="title">test</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T19:29:44.933

'border-bottom' 样式被添加到 'div' 标签中。因为默认'divs'设置为'display:block;' div 的宽度为 100%。要解决此问题，请在文本周围添加另一个标签并将类赋予该标签。

例如：`<div><span class="title">test</span></div>`

新代码：

```
<!DOCTYPE>
<html>
<head>
<style type="text/css">
.title {

border-bottom: 2px solid red;

}
</style>
</head>
<body>
<div><span class="title">test</span></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T19:35:57.533

你只需要插入`display:inline-block;`你的css或`float`元素；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T19:28:36.173

您遇到的问题是您使用的是`border`，而不是下划线。边框延伸了元素的全长，对于 a默认情况下`div`是这样。`width: 100%`

要改变它，你应该`div`明确限制宽度，或者使用`float`或改变它的`display`.

使用`width`：

```
div {
    width: 10em; /* or whatever... */
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/w3sVP/)。

使用`float`：

```
div {
    float: left; /* or 'right' */
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/w3sVP/1/)。

使用`display`：

```
div {
    display: inline-block; /* or 'inline' */
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/w3sVP/2)。

当然，假设您实际上希望下划线位于文本下方，并且可能用于“下划线”文本（请参阅演示的问题，如果[文本长于定义的宽度，则使用定义的宽度](http://jsfiddle.net/davidThomas/w3sVP/3/)），它' 会更容易简单地使用内联元素，例如 a [`span`](http://jsfiddle.net/davidThomas/w3sVP/4/)for this 而不是 a `div`，因为它的默认行为与您想要的行为相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T19:32:27.190

If you use `em` instead of `px`, the border adopts the font size.

```
span {
    font-size:5em;
    border: solid black;
    border-width:0 0 0.1em;
}​ 
```

Here is a fiddle: [Fiddle](http://jsfiddle.net/5K9CN/).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T19:59:24.453

似乎对于 IE7，只有一种方法可以使这项工作：

```
<!DOCTYPE html>
<html>

<head>

<style type="text/css">
h1 {
border-bottom: 3px solid red;
display: inline;
}
</style>

</head>

<body>
<div><h1>Hello, world</h1></div>

</body>

</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T19:28:13.620

将您的更改`div`为`span`.

`span`适用于单行的短文本。

看这里：

[例子](http://jsfiddle.net/fwZgs/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-01T03:06:16.430

尝试添加：边距：自动。这应该根据文本的长度缩放线条

# iphone - iphone中的GridView问题

> ID：13612870
> 
> 赞同：0
> 
> 时间：2012-11-28T19:26:47.360
> 
> 标签：iphone, objective-c, ios, xcode

我在 gridview 上显示图像。如果我有 4、8、12、16 等图像，它可以正常工作，但是当我的图像或多或少 4、8、12 时，我无法点击它们。如果我有 6 张图片，那么我可以点击 4 张图片，但我无法点击第 5 和第 6 张图片。

这是我的表格视图代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView_p cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *hlCellID = @"hlCellID";

    UITableViewCell *hlcell = [tableView_p dequeueReusableCellWithIdentifier:hlCellID];
    if(hlcell == nil) {
        hlcell =  [[[UITableViewCell alloc] 
                    initWithStyle:UITableViewCellStyleDefault reuseIdentifier:hlCellID] autorelease];
        hlcell.accessoryType = UITableViewCellAccessoryNone;
        hlcell.selectionStyle = UITableViewCellSelectionStyleNone;
    }

    int section = indexPath.section;
    NSMutableArray *sectionItems = [sections objectAtIndex:section];

    int n = [sectionItems count];
    int i=0,i1=0; 

    while(i<n){
        int yy = 4 +i1*74;
        int j=0;
        for(j=0; j<4;j++){

            if (i>=n) break;
            NSLog(@"Counter i %d , j %d , n %d ",i,j, n);
            Item *item = [sectionItems objectAtIndex:i];

            CGRect rect = CGRectMake(16+75*j, yy, 65, 65);
            UIButton *button=[[UIButton alloc] initWithFrame:rect];
            [button setFrame:rect];
            //UIImage *buttonImageNormal=[UIImage imageNamed:item.image];
            UIImage *buttonImageNormal = item.savedImage;
            [button setBackgroundImage:buttonImageNormal    forState:UIControlStateNormal];
            [button setContentMode:UIViewContentModeCenter];

            NSString *tagValue = [NSString stringWithFormat:@"%d%d", indexPath.section+1, i];
            button.tag = [tagValue intValue];
            //NSLog(@"....tag....%d", button.tag);

            [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
            [hlcell.contentView addSubview:button];
            [button release];

            /*UILabel *label = [[[UILabel alloc] initWithFrame:CGRectMake((75*j)-4, yy+44, 80, 12)] autorelease];
             label.text = item.title;
             label.textColor = [UIColor blackColor];
             label.backgroundColor = [UIColor clearColor];
             label.textAlignment = UITextAlignmentCenter;
             label.font = [UIFont fontWithName:@"ArialMT" size:12]; 
             [hlcell.contentView addSubview:label];
             */
            i++;
        }
        i1 = i1+1;
    }
    return hlcell;
} 
```

![在此处输入图像描述](../Images/ea64d73bbf4bbdd490d092364bf0447e.png)

```
- (void)loadView {

    [super loadView];
    sections = [[NSMutableArray alloc] init];
    imagesPath = [[NSMutableArray alloc] init];

    for(int s=0;s<1;s++) { // 4 sections
        sectionPattern = [[NSMutableArray alloc] init];

        for(int i=0;i<9+3;i++) {  // 12 items in each section 
            NSLog(@"Loop First %d",i);
           //Here i am allocating images to sectionPattern and than in sections and using it later in above code
            NSLog(@"Loop OUt %d",i);
        }
        [sections addObject:sectionPattern];

    }
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:43:49.517

如果没有更多代码，很难说，但是您应该确保返回正确的值`- (NSInteger)numberOfRowsInSection:(NSInteger)section`

# xml - 如何生成语义上有效的随机 xml 文件？

> ID：13612882
> 
> 赞同：3
> 
> 时间：2012-11-28T19:27:45.570
> 
> 标签：xml, xsd, random-testing, oxygenxml

我想使用随机 xml 生成器工具通过从 xsd 生成随机 xml 文件来执行随机测试。（我正在使用氧气工具）

随机生成器不会对生成的值应用语义限制。例如，我有一个元素“parameters”，它具有多个元素“parameter”，例如 p1 和 p2，另一方面，我有另一个元素“constraint”，它将使用“parameter”。我的意思是如果我有 P1, P2 ，它应该使用 p1 和 p2 的子集。我想强制随机生成器工具使用它们（p1 和 p2），而不是再次为约束随机生成一些其他参数。我使用了“key”、“keyref”和.. 但它仍然不起作用。它只是在没有任何限制的情况下在任何地方生成随机字符串，我不得不提到我选择了“元素和属性的值：随机（应用限制）”选项 所以它应该在生成随机值时考虑限制，但它没有！请帮忙..

有效 XML 的示例：

```
 <system>
         <parameters>
             <parameter id="1" name="p1" >
                  <value id="1" name="value1"/>
                  <value id="2" name="value2"/>
              </parameter>
              <parameter id="2" name="p2" >
                  <value id="1" name="value1"/>
                  <value id="2" name="value2"/>
              </parameter>
          </parameters>
          <constraint text="p1=p2">
               <parameter name="p1"/>
               <parameter name="p2"/> 
          </constraint>
       </system> 
```

所以我想要使用已经生成的参数子集（p1 和 p2），正如您在上面的示例中看到的那样，而不是生成其他一些随机参数，因为所有生成的 xml 都是无效的，我想要一个有效的。

无效 XML 的示例：

```
 <system>
         <parameters>
             <parameter id="1" name="p1" >
                  <value id="1" name="value1"/>
                  <value id="2" name="value2"/>
              </parameter>
              <parameter id="2" name="p2" >
                  <value id="1" name="value1"/>
                  <value id="2" name="value2"/>
              </parameter>
          </parameters>
          <constraint text="**p3**=**p5**">
               <parameter name="**p8**"/>
               <parameter name="**p9**"/> 
          </constraint>
       </system> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T01:21:32.690

通常，检查身份约束会使文档生成任务变得更加复杂。（我相信我曾经看到一个声称它使它成为 NP 完整的，但我可能误解了。）所以我怀疑你是否会很幸运地告诉 Oxygen 的示例文档生成器遵守你想到的约束；大多数生成器满足于生成满足内容模型的数据。

您可能会更幸运地编写一个过滤器来区分遵守您所考虑的约束的示例和不遵守约束的示例（因此您可以生成 100 个示例并运行过滤器以找到可用于您的目的的示例），或者采用任意示例并对其进行更改以满足您的约束的转换。

# javascript - jQuery 没有正确跟踪验证错误

> ID：13612883
> 
> 赞同：0
> 
> 时间：2012-11-28T19:27:46.110
> 
> 标签：javascript, jquery

我有一个小的 jQuery/AJAX 脚本，用于检查用户名是否已在使用中。它查询一个 PHP 脚本，然后输出具有指定用户名的用户数。我有一个错误计数器来跟踪表单上验证错误的数量，如果用户名已经在使用中，我会增加计数器。

```
//Keep track of number of errors
 var errors = 0;
 //Keep track of error messages
 var errorMsg = "";

//Check if the passwords match (this part works as expected)
 if($("#password").val() != $("#repeat").val()) {
     errors++;
     errorMsg += "<li>Passwords do not match!</li>";
 }

     //Now check if the user exists
     var userName = $("#user").val();
    $.ajax({   
        type: "POST",
        data : {'user': userName},
        cache: false,  
        url: "js/ajax/addUser.php?action=checkuser",   
        success: function(data){
            var result = parseInt(data);
            //For debugging purposes
            alert("Before checking the data, # of errors is: " + errors);
            if(result > 0) {
                errors++;
                errorMsg += "<li>A user with the name <strong>" + userName + "</strong> already exists!</li>";
            }
            //For debugging purposes
            alert("After checking the data, # of errors is: " + errors);

        }
    });
    //For debugging purposes
    alert("Before validating the form, # of errors is: " + errors);

     if(errors > 0) {
         //Output error message
     }
     else {
         //Send the form
     } 
```

正如评论中提到的，我有一些`alert()`用于调试的。前两个（在 AJAX 请求中）显示正确的错误数量。但是，当我到达第三个时，它完全忽略了 AJAX 请求中发生的任何错误。

我已将我的代码精简为基本要素，但如果在提供的代码段中错误不明确，我可以发布整个内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:30:10.220

ajax 是异步的。把你的逻辑放在成功里面。

```
//Keep track of number of errors
 var errors = 0;
 //Keep track of error messages
 var errorMsg = "";

//Check if the passwords match (this part works as expected)
 if($("#password").val() != $("#repeat").val()) {
     errors++;
     errorMsg += "<li>Passwords do not match!</li>";
 }

     //Now check if the user exists
     var userName = $("#user").val();
    $.ajax({   
        type: "POST",
        data : {'user': userName},
        cache: false,  
        url: "js/ajax/addUser.php?action=checkuser",   
        success: function(data){
            var result = parseInt(data);
            //For debugging purposes
            alert("Before checking the data, # of errors is: " + errors);
            if(result > 0) {
                errors++;
                errorMsg += "<li>A user with the name <strong>" + userName + "</strong> already exists!</li>";
            }
            //For debugging purposes
            alert("After checking the data, # of errors is: " + errors);

            if(errors > 0) {
                //Output error message
            }
            else {
                //Send the form
            }
        }
    });
    //For debugging purposes
    alert("Before validating the form, # of errors is: " + errors); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T19:30:52.737

ajax 请求的回调函数是异步执行的。因此，紧接在此请求之后的代码可能会在调用返回之前执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T19:38:27.880

据我了解，问题在于 AJAX 调用的方式。第三次警报

```
alert("Before validating the form, # of errors is: " + errors); 
```

与您进行的 $.ajax 调用同时调用。

由于您的意图是同步调用调用，您可能希望使用 jquery [Defered Object链接调用](http://api.jquery.com/category/deferred-object/)

如果您正在当前代码中寻找解决方案，则需要将以下代码移动到成功处理程序中。

```
alert("Before validating the form, # of errors is: " + errors);

     if(errors > 0) {
         //Output error message
     }
     else {
         //Send the form
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-08T12:09:56.053

您可以将**async:false**添加到您的函数中，一切都会为您工作。

```
type: "POST",
async:false 
```

# javascript - 使用 jQuery 将背景颜色应用于 Telerik MVC 组合框

> ID：13612888
> 
> 赞同：1
> 
> 时间：2012-11-28T19:28:11.933
> 
> 标签：javascript, jquery, telerik, telerik-combobox

您能帮我使用 jQuery 设置我的 MVC telerik 组合框的背景颜色吗？我尝试了一些，但没有奏效。任何帮助将不胜感激！！

```
if ($("#ComboID").hasClass("backgroundColorClass");) {    
 $("#ComboID").addClass("backgroundColorClass");    
}

$("#ComboID").css("border","border details");    
$("#ComboID").css("background-color","#color");` 
```

所以，基本上我的问题是，如何使用 jquery 设置 Telerik MVC 组合框的 InputHtmlAttributes/DropDownHtmlAttributes/HtmlAttributes？

在此先感谢，不断发展的技术人员

* * *

我能够使用以下代码解决问题：

```
if ($("#ComboID").hasClass("backgroundColorClass")) {
 $("#ComboID").removeClass("backgroundColorClass");
}

if (! $("#ComboID").hasClass("backgroundColorClass")) {
 $("#ComboID").addClass("backgroundColorClass");
} 
```

# c# - 请求来自 ajax asp net 的帖子

> ID：13612890
> 
> 赞同：-4
> 
> 时间：2012-11-28T19:28:15.267
> 
> 标签：c#, asp.net, ajax, asp.net-mvc, asp.net-mvc-4

如何检索控制器中发送的 post 参数：

**阿贾克斯功能：**

```
function ajaxCall(AjaxUrl, type, param1) {
var url = AjaxUrl;
var SendType = type;

if (param1 == null)
    var param1 = '';

$.ajax({
    url: url,
    type: SendType,
    data: {param1: param1},
    DataType: "html"
}); 
```

}

**控制器：**

```
string fullPath = request.POST['']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:30:43.567

您是否尝试过使用：`NameValueCollection nvc = Request.Form;`

然后你可以得到`nvc['param1]`

# asp.net - 无法找到或获取所请求证书的上下文

> ID：13612893
> 
> 赞同：2
> 
> 时间：2012-11-28T19:28:26.623
> 
> 标签：asp.net, visual-studio-2010, iis-7, windows-server-2008, winhttpcertcfg

一整天我都在尝试安装firstdata支付证书，我将证书插入到带有mmc的证书下的个人文件夹中。现在运行 winhttpcertcfg.exe 控制台应用程序，我收到一条错误消息：无法找到或获取所请求证书的上下文。

这是我正在使用的命令：

winhttpcertcfg.exe -g -c LOCAL_MACHINE\My -s WS101..1 -a IWAM_B3B

我现在浏览谷歌一段时间没有任何成功。每一条评论都更受欢迎。谢谢，拉齐尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:56:01.627

我遇到了类似的问题，最后我发现我的证书安装在 CURRENT_USER 存储中，而不是 LOCAL_MACHINE 中。

**winhttpcertcfg -l -c LOCAL_MACHINE\My -s "Issued To"**抛出“无法找到或获取所请求证书的上下文”错误，而
**winhttpcertcfg -l -c CURRENT_USER\My -s "Issued To"**返回了证书的详细信息。

在我通过 mmc.exe（计算机帐户的管理单元证书 - 本地计算机）将证书添加到正确的位置后，我能够授予所需帐户的私钥访问权限（在我的情况下为 NetworkService）。

# wpf - 在 WPF 桌面应用程序中使用 Google Web 字体的任何方式

> ID：13612895
> 
> 赞同：7
> 
> 时间：2012-11-28T19:28:32.367
> 
> 标签：wpf, webfonts

我正在创建一个 WPF 应用程序并尝试将用户界面的样式与现有网站相匹配。该站点使用[Lato](http://www.google.com/webfonts/specimen/Lato)作为其默认字体，默认情况下在 Windows 上不可用。我想使用 Lato，但我不能要求用户安装字体。有没有办法让 WPF 使用可通过 Google Web Font 服务获得的字体定义，或者以其他方式设置它以便不需要手动安装字体？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-28T19:45:29.233

当然可以，最简单的方法是将字体资源编译到应用程序中：

首先，从 google web fonts 下载 TTF。从您的示例链接中找到页面底部的“在 Google Web 字体中打开 Lato”链接。这会将字体添加到您的“收藏”中。在结果页面中，靠近顶部的是一个较小的链接，标题为“下载您的收藏”，它将为您提供 zip 文件中的 TTF 字体文件。

接下来，将字体作为资源嵌入到您的 WPF 应用程序中。将文件添加到您的项目中，并确保为编译操作选择“资源”。然后，您可以在 XAML 中使用您的字体，只需将`FontFamily`属性更改为资源名称而不是字体名称： `<TextBlock FontFamily="/Resources/#Lato">Lato Text Here</TextBlock>`。有关更多信息，请参阅[有关嵌入字体的 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms753303.aspx)。

`FontFamily`您还可以通过将所需的任何元素或容器的属性设置为新对象来在代码中按需下载字体`FontFamily`- 使用采用 URI 的构造函数并使用 TTF 的 URI。我不相信您可以使用 Google 网址直接执行此操作，因为 Google API 假定网页访问并提供脚本和/或 CSS 以及字体。另请注意，这可能需要您的应用程序已经要求的一些额外权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-06T07:14:45.733

WPF 需要字体名称（不是字体文件）。在上面的示例中，`<TextBlock FontFamily="/Resources/#Lato">Lato Text Here</TextBlock>` 如何在**“#Lato”中获取****“Lato”**至关重要。如果是 .ttf 字体，那么我们可以从 API GlyphTypeface [https://docs.microsoft.com/en-us/dotnet/api/system.windows.media.glyphtypeface.-ctor?view=net获取字体名称信息](https://docs.microsoft.com/en-us/dotnet/api/system.windows.media.glyphtypeface.-ctor?view=net-5.0#definition)[-5.0#定义](https://docs.microsoft.com/en-us/dotnet/api/system.windows.media.glyphtypeface.-ctor?view=net-5.0#definition)。但是 API GlyphTypeface 仅适用于 .ttf 文件。

 **当然，我们可以使用任何受支持的 .EOT/.SVG/.WOFF 在线查看器并获取字体名称，然后手动将其输入到 WPF XAML 的 FontFamily 属性。

有没有其他方法可以从字体文件中以编程方式获取字体名称（WPF 所期望的）？

例如在 CSS 中，我们可以使用 @font-face 来使用各种字体。

我相信 WPF 中没有这样的选择。**

# asp.net-mvc-4 - 在 MVC4 中的控制器之间传递模型

> ID：13612900
> 
> 赞同：3
> 
> 时间：2012-11-28T19:28:47.153
> 
> 标签：asp.net-mvc-4

我正在第一次尝试使用 MVC4 进行 Web 开发，但我遇到了一个问题，我只知道这是 Web 开发中的核心问题之一，但我似乎无法理解它。

所以我有两个模型： `Employee`和`Company`. `Employee`有一个`Company`，因此`/Employee/Create`包含一个字段，该字段要么是用于选择现有 的下拉列表，要么是`Company`一个`ActionLink`to （`/Company/Create`如果不存在）。但问题是：如果用户必须创建一个`Company`，我需要`Employee`在两个视图中保留现有模型——先到`/Company/Create`，然后再返回到`/Employee/Create`。

所以我的第一种方法是将`Employee`模型传递给`/Company/Create`with a `@Html.ActionLink("Add...", "Create", "Organization", Model , null)`，但是当我到达`Company`'s`Create(Employee emp)`时，所有`emp`'s 的值都是`null`.

第二个问题是，如果我尝试返回`/Employee/Create`，我会传回一个`Employee`，这将解析为`POST`Action。

基本上，整个想法是保存`/Employee/Create`页面的状态，跳转`/Company/Create`到创建`Company`记录，然后返回`/Employee/Create`完成创建`Employee`. 我知道有一个很好理解的解决方案，因为 ，但我似乎无法很好地分阶段来获得一个好的谷歌结果。

我虽然想使用 Session，但这样做似乎有点麻烦。我真的很想要一个优雅的解决方案。

*编辑：* 很难相信这个问题没有规范的解决方案。感觉这应该是使用 HTTP 的一个最基本的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T22:55:58.007

所以看起来你的主要问题是像四十二所说的那样缺乏数据源，或者更普遍地说是某种持久性。这可以通过将数据库作为数据源来支持您的模型来完成，这可能是您在永久解决方案中想要的。另一种选择是使用会话。如果这不是生产代码并且您需要一些东西来“工作”，那么会话将是一个快速的解决方案。我倾向于您研究 Entity Framework Code First 方法（因为它相对简单，并且可以根据您当前的模型创建数据库）。

您提到您是 MVC 的新手，所以我会推荐 [Intro to ASP.NET MVC 4][1] 这是一个非常易于初学者学习的教程。我什至从那个开始。

**编辑**

我同意在数据库中创建一种“临时”条目很奇怪，如果用户放弃该页面，以后需要对其进行清理。我的一个想法是使用 ajax（通常我喜欢在 jQuery 库的帮助下这样做）。我不确定您对图书馆的了解是什么，但我的基本前提如下......

1.  用户单击其中一个按钮。
2.  通过对控制器使用异步调用，您可以完成一些所需的工作，并返回结果。您的控制器方法可能需要返回 JSONResult。
3.  使用此结果，您可以更新视图。我的想法是使用结果来填充表单。
4.  现在用户可以点击“提交”并被发送到一个方法，然后更新/保存到数据库。

如果您不熟悉 jQuery，您可能想查看一下。

关于使用 jQuery 和 JsonResult 的帖子：[https ://stackoverflow.com/a/9463272/1200520](https://stackoverflow.com/a/9463272/1200520)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:53:20.487

您是否知道`<input type="submit" name"createEmployee" value="Create Employee" />`name 属性在 POST 请求中作为参数传递，并且默认的 ModelBinder 将绑定它？

这意味着，您可以在一个表单上拥有多个提交按钮。

假设您有一个 ViewModel，例如：

```
public class CreateCompanyWithEmployeeModel
{
public Employee Employee { get; set; }
public Company Company { get; set; }

public string createEmployee { get; set; }
public string createCompany { get; set; }

public string State { get { return (String.IsNullOrEmpty(createCompany)) ? "createEmployee" : "createCompany"; }}
} 
```

当然，您的员工和公司的那些自定义类型，例如：

```
public class Employee
{
   // Employee properties here
}

public class Company
{
   // Company properties here
} 
```

然后您可以执行以下操作：

```
 public ActionResult CreateCompanyWithEmployee(CreateCompanyWithEmployeeModel model)
    {
        switch (model.State)
        {
            case "createEmployee":
                // Do your createEmployee Stuff
                break;
            case "createCompany":
                // Do your createCompany Stuff
                break;
            default:
                throw new NotImplementedException(String.Format("State {0} not implemented", model.State));
        }
        return View();
    } 
```

在视图中，您将拥有如下形式：

```
<% using(Html.BeginForm()) { %>

    <%=(Model.State == "createEmployee") ? Html.EditorFor(Model.Employee) : Html.DisplayFor(Model.Employee) %>
    <%=(Model.State == "createCompany") ? Html.EditorFor(Model.Company) : Html.DisplayFor(Model.Company) %>

    <input type="submit" name="<%=Model.State%>" value="Submit" />

<% } %> 
```

然后，您只需要根据您的情况构建您的`EditorFor`和`DisplayFor`控件。如果您不想在创建公司期间显示员工，那么您只需`HiddenFor`将员工数据保存到表单中，直到公司编辑完成。与在员工完全有效之前不显示公司数据相同。

我知道这个例子并不完全干净，但为了方法的清晰，我需要让它保持简单。基本上，如果你经常使用这种方法，你会让 ViewModel 继承一个接口来处理 viewmodel 状态处理，并且你会有自定义的 Html Helpers 来根据状态等呈现表单。

我们经常使用这种方法。它适用于世界上的每个浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T20:14:40.260

您不能在 url 中传递对象（GET 请求），这就是为什么在您的第一种方法中这些值都是空的。通常，您将使用 EmployeeId 作为参数传递，然后从控制器中的数据源重新获取 Employee 对象。

所以你的链接是

```
@Html.ActionLink("Add...", "Create", "Organization", new { id = Model.EmployeeId }, null) 
```

以及动作方法

```
public ActionResult Create(int id)
{
  //hit the db to grab the Employee by id
} 
```

这是在 asp.net mvc 中处理这种情况的典型方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T22:53:54.960

实现这一目标的唯一方法是使用某种类型的持久性策略。采用哪种方法取决于您。如果卷是合规的，我会建议一个 InProc 会话。

这里有很多很好的建议.. [ASP.NET MVC 中的会话变量](https://stackoverflow.com/questions/560084/session-variables-in-asp-net-mvc)

这也是一个非常好的抽象实现示例。 [http://blogs.planetcloud.co.uk/mygreatdiscovery/post/Abstracting-session-in-ASPNET-MVC.aspx](http://blogs.planetcloud.co.uk/mygreatdiscovery/post/Abstracting-session-in-ASPNET-MVC.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T07:20:29.780

您可以使用 TempData 存储数据，直到下一个请求。[http://www.devcurry.com/2012/05/what-is-aspnet-mvc-tempdata.html](http://www.devcurry.com/2012/05/what-is-aspnet-mvc-tempdata.html)

您还可以使用 POST 请求，这也是非常好的和常见的解决方案。

您还可以考虑在 ajax 模式中添加公司并在之后刷新下拉值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T11:34:40.200

你必须做出这样的解决方法：

1.  向 Company 模型添加一个字符串属性，名为 EncodedEmployee
2.  以您现在的方式显示您的创建员工视图。用户可以单击“创建公司”链接。
3.  当用户选择“创建公司”时，请确保调用了一个名为“CreateCompanyFirst”的操作。此操作将如下所示：

    ```
    public ActionResult CreateCompanyFirst(Employee emp)
    {
        string jsonemp = Json(emp);

        Company emptyCompany = new Company{};

        emptyCompany.EncodedEmployee =  jsonemp ;

        return View(emptyCompany);
    } 
    ```

4.  当“创建公司视图”被渲染时，确保将 EncodedEmployee 属性保存在隐藏字段中。

5.  我猜你已经为创建公司实施了一项行动。现在这段代码需要稍微修改一下：

    ```
    public ActionResult CreateCompany(Company cmp)
    {
        // Save your company

        // if cmp.EncodedEmployee  is not null

            // De serialize the employee, return View(employee)

        // else return what you were returning before
        // (maybe "thanks for creating a company, come back soon")
    } 
    ```

6.  您将返回到您的员工屏幕，并像以前一样填写字段。

显然，这意味着视图/操作/路由是正常的，并且没有期待或做任何神奇的调整，否则它将无法工作。

# excel - 我的 FormulaLocal 语法有什么问题？

> ID：13612906
> 
> 赞同：1
> 
> 时间：2012-11-28T19:29:21.227
> 
> 标签：excel, vba

我正在尝试使用 vba 将公式插入到`A67`工作表上的单元格中。我相信可以使用下面的公式来完成，但不幸的是我不知道如何修复下面的语法。

我试图从中拉出的表是根据情况而定的`RD1`。`RD35`

i 是我的变量，定义为 1 到 35

你知道为什么 RD & i 没有正确定义我的工作表吗？我错过了引号吗？

`Range("A67").Select ActiveCell.FormulaLocal = "=Vlookup(large(RD & i!B2:B100,1),RD & i!B2:E100,4,false)"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:14:29.160

```
Range("A67").Select ActiveCell.FormulaLocal = "=Vlookup(large(RD & i!B2:B100,1),RD & i!B2:E100,4,false)" 
```

是一个字符串，因此要将变量插入字符串，您必须关闭引号插入变量然后继续字符串。

你的行应该是：应该是：

```
Range("A67").Select ActiveCell.FormulaLocal = "=Vlookup(large(RD" & i & "!B2:B100,1),RD" & i & "!B2:E100,4,false)" 
```

# myeclipse - com.mysql.jdbc.exceptions.jdbc4.CommunicationsException：通信链接失败（在 Windows 中）

> ID：13612908
> 
> 赞同：1
> 
> 时间：2012-11-28T19:29:25.610
> 
> 标签：myeclipse

当我在寡妇中运行我的应用程序时，当我想连接到 MySQL 数据库时，myeclipse IDE 给了我以下错误。端口没问题（3306），IP 127.0.0.1，我已经安装驱动了。

如何连接到 MySQL 数据库？

```
 `String driver = "com.mysql.jdbc.Driver";

        String url ="jdbc:mysql://locahost:3306/registrationdb";
        String dbusername = "root";
        String dbpassword = "root";
        try{
            Class.forName(driver);
        Connection con = DriverManager.getConnection(url, dbusername, dbpassword);

        System.out.println("dbconnected");

        String insert = "insert into registrationdetails values(?,?,?,?,?,?,?)";

        PreparedStatement pstmt=con.prepareStatement(insert);

        pstmt.setString(1,username);
        pstmt.setString(2,password);
        pstmt.setString(3,address);
        pstmt.setString(4,DateofBirth);
        pstmt.setString(5,civilstatus);
        pstmt.setString(6,sex);
        pstmt.setString(7,telephone);

            int i = pstmt.executeUpdate();

            if (i<0){
            out.println("Registration Success");
             }else{
            out.println("Registration Fail");
             }

        }catch (Exception e){
            e.printStackTrace();
            out.println("Some Exception occur please return to the    registration page");

com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1117)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:350)

    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2408)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2445)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2230)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:813)
    at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)

    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:399)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:334)
    at java.sql.DriverManager.getConnection(DriverManager.java:579)
    at java.sql.DriverManager.getConnection(DriverManager.java:221)

    at com.sqlite.registration.RegistrationServlet.doPost(RegistrationServlet.java:51)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)

    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)

    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.net.UnknownHostException: locahost
    at java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)
    at java.net.InetAddress$1.lookupAllHostAddr(InetAddress.java:866)
    at java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1258)
    at java.net.InetAddress.getAllByName0(InetAddress.java:1211)
    at java.net.InetAddress.getAllByName(InetAddress.java:1127)
    at java.net.InetAddress.getAllByName(InetAddress.java:1063)

    at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:249)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:300)
    ... 33 more 
```

# asp.net-mvc - 从另一个 jquery ui 对话框更新 jquery ui 对话框

> ID：13612909
> 
> 赞同：-2
> 
> 时间：2012-11-28T19:29:37.147
> 
> 标签：asp.net-mvc, jquery, jquery-ui-dialog

我有一个 jquery 对话框，从这个对话框中，我打开另一个对话框，用户在其中插入一些数据。如何在不关闭它们的情况下将此用户数据从第二个对话框更新到第一个对话框？

这可能吗？网络上有一些例子吗？

提前致谢

* * *

好的，这是我的脚本，它打开了第二个对话框。我用一个链接打开这个对话框，它调用我的 mvc 控制器中的一个函数，这将返回带有数据的部分视图......

```
 <script type="text/javascript">
       $(document).ready(function () {
           $("#dialog2").dialog({
                  bgiframe: false,
                  autoOpen: false,
                  height: 200,
                  resizable: false,
                  modal: true,
                  buttons: {
                  OK: function () {
                       $("#dialog2 > form").submit();
                       $(this).dialog('close');
                 },
                  Abbrechen: function () {
                       $(this).dialog('close');
                   }
                   }
                  });
                $('#changePW').click(function () {
            $('#dialog1').dialog('open')    
             });
           });
      </script> 
```

@Roysvork：那么我必须在按钮OK功能中这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:36:39.317

由于对话框只是下面的一个 html 元素，您仍然可以使用 jQuery 以通常的方式访问所述元素：

```
var dialog1 = $("#dialog1");
var dialog2 = $("#dialog2");

dialog1.dialog("show");
dialog2.dialog("show"); 
```

因此，在对话框 1 的事件处理程序中，您可以执行以下操作：

```
var value = dialog2.find("#inputbox").val();
dialog2.find("#textbox").val(value) ; 
```

ETC...

# java - JasperReports 使用 Barcode4j 生成条码 - 库依赖项

> ID：13612910
> 
> 赞同：2
> 
> 时间：2012-11-28T19:29:43.903
> 
> 标签：java, jasper-reports, barcode, barcode4j

我一直在搜索生成包含条码的报告所需的库，使用 JasperReports（版本 4.6.0）和barcode4j，在一个简单的设置/场景中（只是有一个报告设计，填写报告，导出到 pdf）所以没什么特别的. 在有些绝望的尝试中，我刚刚添加了（使用 Eclipse java 项目，在其构建路径中）iReport 4.6.0 使用的所有库，并尝试生成带有条形码的 pdf 报告。结果是一个不错的 pdf 报告，但没有条形码。

我对 JasperReports 的 Barcode4J 库依赖项（所以不是烧烤）感兴趣。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T11:16:06.503

最后，我发现了一种我认为更复杂的方法（我相信这可以做得更简单）

**首先**，我有一个包含条形码元素（带有barcode4j）的简单报告 - 在这里，根据这个[有点相关的答案](https://stackoverflow.com/questions/3624903/schema-reference-for-jasperreports-barcode-component)（我认为这实际上让我走上了正确的道路），我为元素添加了一个样式。我目前的风格和元素是这样的：

```
<style name="Barcode" mode="Opaque" forecolor="#000066" backcolor="#FFFFFF" fill="Solid" hAlign="Left" vAlign="Top" markup="styled" fontName="SansSerif" fontSize="11"/>
...
<componentElement>
<reportElement uuid="e70dd866-d0a9-4b34-8fb1-0f0b04c9dcf3" style="Barcode" x="453" y="0" width="78" height="38" isPrintInFirstWholeBand="true" isPrintWhenDetailOverflows="true"/>
<jr:Code128 xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
<jr:codeExpression><![CDATA["123456789"]]></jr:codeExpression>
</jr:Code128>
</componentElement> 
```

我确信可以删除几个样式的东西（但我认为从以前的经验标记样式很重要）。

**其次**，我有如下代码来生成使用 JasperReports 导出的 pdf 报告：

```
JasperReport jasperReport = JasperCompileManager.compileReport("report.jrxml");
JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, new HashMap(), new JREmptyDataSource());
JasperExportManager.exportReportToPdfFile(jasperPrint, "result.pdf"); 
```

**第三**，截图中我拥有的库如下（由于时间不够，添加图片）：

![eclipse 库依赖](../Images/9c8a9e19123043dd111df11feaf38873.png)

希望这对其他人也有帮助 - 最欢迎优化、更正、改进（以使其更简洁和最佳）。

**注意**：JasperReports 库的使用版本对应于它们的 4.6.0 版本，Barcode 相关库也适用于 Barcode4j-2.0。

问候， 安德烈

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:06:23.313

我看到您正在加载 iText 库。为什么不直接使用它来创建您的条形码。查看本页底部的解决方案 -[将 iText 条码图像从 CCITT 格式转换为 PNG](https://stackoverflow.com/questions/7078357/convert-itext-barcode-image-from-ccitt-format-to-png)

# java - java中的sql：WHERE名称=变量

> ID：13612917
> 
> 赞同：-2
> 
> 时间：2012-11-28T19:30:11.517
> 
> 标签：java, sql

这是我的代码：

```
public static List GetList(String myname) {
    .
    .
    ResultSet result = stmt.executeQuery("SELECT * FROM authors WHERE name = ?");
    result.setString(myname);
} 
```

我想选择其中 name = myname （myname 是函数的输入）。

我也尝试过类似的东西：

```
WHERE name = @myname 
```

但它不起作用：/

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T19:32:41.463

您没有在*结果*上设置值，而是在*语句*上设置值：

```
PreparedStatement pstmt = connection.prepareStatement("SELECT * FROM authors WHERE name = ?");
pstmt.setString(1, myname);
ResultSet result = pstmt.executeQuery(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T19:32:19.507

好吧，更好的方法是使用`PreparedStatement`, 来避免`SQL Injection`：-

```
PreparedStatement stmt = con.prepareStatement("SELECT * FROM authors WHERE name = ?");
stmt.setString(1, myname);
ResultSet res = stmt.executeQuery(); 
```

* * *

但是，为了解决您的问题，您可以使用字符串连接：-

```
stmt.executeQuery("SELECT * FROM authors WHERE name = '" + myname + "'"); 
```

* * *

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T19:36:19.913

如果我没记错的话，你最好在这里准备好声明：

```
PreparedStatement stmt = conn.prepareStatement("SELECT * FROM authors WHERE name = ?");
stmt.setString(1, myname);
ResultSet result = stmt.executeQuery(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-28T19:32:07.620

试试这个：

```
ResultSet result = stmt.executeQuery("SELECT * FROM authors WHERE name = " + myname); 
```

# gcc - 在 Windows 上构建 InstallJammer 的 installkit

> ID：13612920
> 
> 赞同：1
> 
> 时间：2012-11-28T19:30:19.537
> 
> 标签：gcc, makefile, mingw32

我正在使用 InstallJammer 为我的应用程序（Windows、Linux 和 Mac）构建跨平台安装程序。但是，InstallJammer 开发已经停止，官方论坛现已关闭。

我需要为 Windows 构建 installkit，因为我必须对 Windows 安装清单进行一些更改，以添加 Windows 7 支持（否则安装程序会显示消息“此程序可能未正确安装”）。

我从这里获取了最新的 installkit 资源：http: [//sourceforge.net/projects/installjammer/files/installkit/1.2.15/installkit-1.2.15.tar.gz/download](http://sourceforge.net/projects/installjammer/files/installkit/1.2.15/installkit-1.2.15.tar.gz/download)

我发现这个主题[http://www.installjammer.com/forums/viewtopic.php?f=3&p=9258](http://www.installjammer.com/forums/viewtopic.php?f=3&p=9258)帮助我入门。

我获取了最新版本的 MinGW 并输入了 ./configure && make。它启动了构建过程，但是在尝试编译 TCL 时出现了这个错误：

```
c:/installkit-1.2.15/src/tcl/win/tclWinReg.c:750:29: error: lvalue required as increment operand 
```

由于这些来源有点旧，我想我应该尝试使用旧的 GCC 版本（我使用的是 4.7.2）。于是我将MinGW的GCC降级到3.4.5版，又试了一次。

这一次，TCL建好了。一切进展顺利，直到它未能构建一个名为“miniarc”的东西（我不知道它是什么），并出现以下错误消息：

```
miniarc.o:miniarc.c:(.text+0x370c): undefined reference to `_imp__strtoull'
miniarc.o:miniarc.c:(.text+0x37c9): undefined reference to `_imp__strtoull'
miniarc.o:miniarc.c:(.text+0x3cb6): undefined reference to `_imp__strtoull'
miniarc.o:miniarc.c:(.text+0x3e78): undefined reference to `_imp__strtoull'
miniarc.o:miniarc.c:(.text+0x3e9f): undefined reference to `_imp__strtoull'
miniarc.o:miniarc.c:(.text+0x3ff5): more undefined references to `_imp__strtoull' follow
collect2: ld returned 1 exit status 
```

奇怪的是在 miniarc.c 中没有提到*imp* _strtoull。

继续前进，我尝试在 Ubuntu 中构建它，因为我不知道还能做什么，而且它成功了！GCC 版本是 4.4.3。所以我去为 MinGW 搜索 GCC 4.4.3，但最接近的版本是 4.4.0。我抓住这些并再次尝试。相同的 tcl 构建错误（关于 tclWinReg.c）。

然后我回到 GCC 4.7.2 并用最新的 (8.5) 替换 TCL & TK 源 (8.4) 并再次尝试。

TCL 和 TK 都构建得很好，其他一些库也是如此，但是当涉及到“miniarc”时，它又失败了。这次出现了不同的错误：

```
undefined reference to `TclIncrVar2' 
```

显然，该功能在 TCL 8.5 中不再存在。

所以，我没有想法。我什至尝试给最初的（也是唯一的）InstallJammer 开发人员发送电子邮件，但仍然没有得到答复（我什至不知道他的电子邮件是否相同）。

有没有人有什么建议？

编辑：我应该补充一点，我对 Makefiles 的经验很少，我最后一次用 C 编码是 8 年前的大学。所以，如果我没有注意到这一切有什么明显的地方，我深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:50:09.397

我不喜欢这个解决方案，但这是我如何让它工作的：

1.  使用 GCC 3.4.5，我通过键入 ./configure && make; 开始了制作过程。
2.  make 过程在到达 'miniarc' 时停止并出现错误（如上所述）；
3.  然后，我手动从文件 strtoull.o 构建了一个 DLL (strtoull.dll)（下面是我输入的确切命令行）；

    ```
    gcc -pipe -shared -o strtoull.dll strtoull.o -lz -L/c/installkit-1.2.15/Windows/lib /c/installkit-1.2.15/Windows/lib/libtclstub84s.a" 
    ```

4.  之后，我将 strtoull.dll 复制到 miniarc/build 和 windows/system32；

5.  然后我进入文件夹 miniarc/build 并输入：

    ```
    gcc -pipe -shared -o miniarc01.dll miniarc.o sha1.o md5.o -lz -L/c/installkit-1.2.15/Windows/lib  "/c/installkit-1.2.15/Windows/lib/libtclstub84s.a" strtoull.dll 
    ```

6.  最后，我再次输入 make 以便它可以继续构建其余的东西。

# javascript - 向使用 d3.svg.axis 的图表添加规则

> ID：13612923
> 
> 赞同：0
> 
> 时间：2012-11-28T19:30:42.707
> 
> 标签：javascript, d3.js

我使用的折线图本质上是[http://bl.ocks.org/3883245](http://bl.ocks.org/3883245)上的代码副本。我想在图表中添加水平规则，但是当我尝试通过 yAxis.tickValues() 访问计算的刻度值时，我只得到一个空响应。我这样做对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T23:35:42.933

tickValues 用于设置自定义的、外部确定的刻度位置。因此，如果您让轴选择值，那么此属性将正确地为空。

添加网格线最简单的方法实际上是添加另一个轴！在示例中，您紧跟以下行链接：

```
svg.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + height + ")")
    .call(xAxis); 
```

您可以添加以下内容以附加网格：

```
svg.append("g").attr("class", "xaxisgrid").call( xAxis.tickFormat("").tickSize(450) );

svg.select("g.xaxisgrid").selectAll(".tick")
    .style('stroke', "#000")
    .style('opacity', 0.4)
    .filter(function(d, i){ return d3.select(this).classed('minor');} )
        .style('opacity', 0.1);

svg.select("g.xaxisgrid .domain").style('fill', 'none'); 
```

代码有点粗糙，但应该可以帮助您入门。基本上，我稍微修改了轴生成函数（xAxis）以仅生成刻度，然后我使刻度变得非常长。

# actionscript-3 - 如何在 AS3 中将影片剪辑的恒定 3d 旋转放入 Y 轴上的循环中

> ID：13612927
> 
> 赞同：1
> 
> 时间：2012-11-28T19:30:46.263
> 
> 标签：actionscript-3, flash, syntax, 3d

首先的想法是让一个圆圈旋转

以下来自教程，它可以工作，但会引发一串错误。我将如何将光束函数中的代码放入功能循环而不是当前语法。

```
//Sets variable angle and speed
/*var angle3:Number = 0;*/
var speed3:Number = 5;
var angle3:Number = 0;
stage.addEventListener(Event.ENTER_FRAME, lightbeam);
//Function to let the glowing orb rotate in 3d 360 degrees.;
function lightbeam(e:Event)
{

    angle3 < 360 ? angle3 +=  speed3: angle3 = 0;
    glow_mc.rotationY = angle3;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:54:27.670

它是一个 flash 三元运算符

```
angle3 < 360 ? angle3 +=  speed3: angle3 = 0; 
```

是相同的

```
if(angle3 < 360) {
   angle3 +=  speed3;
} else {
   angle3 = 0;
} 
```

# weblogic - 将 weblogic config.xml 版本 8.1.6.0 升级到 10.3.5

> ID：13612932
> 
> 赞同：1
> 
> 时间：2012-11-28T19:31:13.320
> 
> 标签：weblogic, upgrade, config

我在实习期间获得了一项 weblogic 任务，但我之前从未使用过 weblogic。有人告诉我 config.xml 需要更新。关于如何将 8.1 配置更新到 10.3，是否有任何示例或建议？我一直在阅读一些oracle页面，但我仍然感到困惑。可以使用研讨会升级 config.xml 吗？感谢您的时间。

# c# - 使用 T4 从 wcf 服务引用生成对象

> ID：13612934
> 
> 赞同：1
> 
> 时间：2012-11-28T19:31:17.433
> 
> 标签：c#, wcf, t4, dto, service-reference

我正在将 MVC4 应用程序与 WCF 服务集成在一起。目前，我使用 svcutil 从 WCF 服务端点生成服务引用。

我有许多服务，例如。BooksServiceReference 和 CarsServiceReference。我遇到的一个问题是两个服务引用共享相同的实体，但我的代码对它们的处理方式不同，因为它们具有不同的命名空间。例如，两个引用都有一个相同的 Price 实体，只是命名空间不同。

我想做但不确定做的是以下内容。使用 T4 映射获取服务引用文件中的每个类并为其生成一个 DTO 对象。所以此时，我对服务引用中的所有类都有自己的 DTO 对象。

下一步，通过两个服务引用共有的 T4 配置文件排除公共实体。我相信这将是手动的，我对此很好。

对于通用实体，我创建了一个单独的 T4 配置文件，它将这些配置文件生成到一个 DTO 文件中。

我只对 T4 代做了一些简短的工作，所以对上述内容有任何帮助吗？

# iphone - UIButton 标记在 6 个单元格后未分配 indexPath.row

> ID：13612939
> 
> 赞同：2
> 
> 时间：2012-11-28T19:31:32.987
> 
> 标签：iphone, objective-c, ios

我在这里遇到了一个奇怪的问题。我有一个 TableView 并将 indexPath.row 分配给 UIButton 的标签，这样我就可以将该标签作为参数传递给 segue 并将对象提供给下一个视图控制器。一切正常，直到我通过 TableView 中的 6 个单元格，当按下按钮从数组中传递错误的对象时。我决定放入一些 NSLogs 来看看发生了什么，我发现结果很奇怪。赋值`buttonForApplyingTag.tag = indexPath.row;`发生在 NSLogs 之后，并且是之前的最后一条语句`return cell;`。由于 indexPath.row 的实际值是正确的，因此数组中的对象正在正确加载。这只是导致问题的按钮。这是我的输出：

```
2012-11-28 19:01:57.596  IndexPath.row: 0
2012-11-28 19:01:57.596  IndexPath.Row from Tag: 0
2012-11-28 19:01:57.597  SearchResults Count: 100
2012-11-28 19:01:57.598  IndexPath.row: 1
2012-11-28 19:01:57.598  IndexPath.Row from Tag: 1
2012-11-28 19:01:57.598  SearchResults Count: 100
2012-11-28 19:01:57.599  IndexPath.row: 2
2012-11-28 19:01:57.600  IndexPath.Row from Tag: 2
2012-11-28 19:01:57.600  SearchResults Count: 100
2012-11-28 19:01:57.601  IndexPath.row: 3
2012-11-28 19:01:57.601  IndexPath.Row from Tag: 3
2012-11-28 19:01:57.602  SearchResults Count: 100
2012-11-28 19:01:57.602  IndexPath.row: 4
2012-11-28 19:01:57.603  IndexPath.Row from Tag: 4
2012-11-28 19:01:57.603  SearchResults Count: 100
2012-11-28 19:01:57.604  IndexPath.row: 5
2012-11-28 19:01:57.605  IndexPath.Row from Tag: 5
2012-11-28 19:01:57.605  SearchResults Count: 100
2012-11-28 19:02:02.004  IndexPath.row: 6
2012-11-28 19:02:02.004  IndexPath.Row from Tag: 6
2012-11-28 19:02:02.005  SearchResults Count: 100
2012-11-28 19:02:03.993  IndexPath.row: 7
2012-11-28 19:02:03.993  IndexPath.Row from Tag: 0
2012-11-28 19:02:03.993  SearchResults Count: 100
2012-11-28 19:02:17.846  IndexPath.row: 8
2012-11-28 19:02:17.846  IndexPath.Row from Tag: 0
2012-11-28 19:02:17.846  SearchResults Count: 100
2012-11-28 19:02:18.482  IndexPath.row: 9
2012-11-28 19:02:18.482  IndexPath.Row from Tag: 0
2012-11-28 19:02:18.482  SearchResults Count: 100 
```

对不起，过多的线条，但你明白了。这种趋势一直持续到 100，这意味着按钮没有收到正确的标签。更奇怪的是，当在带有错误 indexPath.row 标记的单元格上单击按钮时，显然又组成了另一个标记，我得到了一个低值标记。此外，当单元格 6 部分出现在 TableView 的底部时，即使很明显单元格已实际加载，NSLogs 尚未发布到调试器，因此按钮失败并返回标签 5。所以这种做事方式实际上有3个问题。

真的，我想问的是为什么会发生这种奇怪的行为，我该如何解决？其次，由于这似乎是一场灾难，是否有更好的方法来传递 indexPath.row 值，以便在单击按钮时从数组中获取对象？

谢谢你的帮助。
问候，
迈克

PS我是一个完全的业余爱好者，所以如果你能用莱曼的话解释一下，我会很感激的。

编辑：这是我根据要求将标签实际分配给按钮的代码。

```
 UIButton *buttonForApplyingTag = (UIButton *)[cell viewWithTag:1004];

    NSLog(@"IndexPath.row: %d", indexPath.row);
    NSLog(@"IndexPath.Row from Tag: %d", buttonForApplyingTag.tag);
    NSLog(@"SearchResults Count: %d", [searchResults count]);
    buttonForApplyingTag.tag = indexPath.row;

    return cell; 
```

编辑 2：这是整个 cellForRowAtIndexPath 代码：

```
if (isLoading) {
    return [tableView dequeueReusableCellWithIdentifier:LoadingCellIdentifier];
} else if ([searchResults count] == 0) {
    return [tableView dequeueReusableCellWithIdentifier:NothingFoundCellIdentifier];
} else {

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:SearchResultCellIdentifier];
    [tableView setSeparatorStyle:UITableViewCellSeparatorStyleSingleLine];
    [tableView setSeparatorColor:[UIColor grayColor]];
    /* Then we do a load of assignments for labels in the cell, then we reach the tagging code. */ 
```

`SearchResultCellIdentifier`来自于此：`static NSString *const SearchResultCellIdentifier = @"SearchResultCellProto";`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T20:07:03.183

看起来您想要做的是在单元格中有按钮，然后知道在按钮动作发生时按下了哪个单元格的按钮。使用标签是一个合理的想法，但很难实现，因为标签需要在单元格被重用时更改（并以不同的索引路径结束）。

这是一种更好的方法：使用常量标签（或不使用标签）添加按钮，然后在点击操作上执行此操作...

```
- (IBAction)pressedButtonInMyCell:(id)sender {

    UIButton *button = (UIButton *)sender;

    // find the cell that contains the button, this might be one or two levels
    // up depending on how you created the button (one level in code, two in IB, probably)
    UIView *view = button.superview;
    while (view && ![view isKindOfClass:[UITableViewCell self]]) view = view.superview;

    UITableViewCell *cell = (UITableViewCell *)view;
    NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];
    NSLog(@"cell is in section %d, row %d", indexPath.section, indexPath.row);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T19:40:31.297

此行从单元格中获取按钮：

```
UIButton *buttonForApplyingTag = (UIButton *)[cell viewWithTag:1004]; 
```

但是，在重复使用的单元格中，标签不是 1004。它实际上是之前使用单元格时设置的标签。因此`buttonForApplyingTag`，在重复使用的单元上可能会为零，并且整个系统都会失败。

最好创建一个子类单元并将 UIButton 附加到实例变量。

**子类化：**

创建一个新的 UITableViewCell 子类，我们称之为`CustomCellView`。确保你实例化这个类`cellForRowAtIndexPath`而不是常规的`UITableViewCell`. 向它添加一个名为`theButton`. 然后创建并分配`buttonForApplyingTag`给这个实例变量。最好在`init`您的子类中执行此操作。然后在 中`cellForRowAtIndexPath`，您不必创建按钮，只需使用`cell.theButton`.

但是，更好的办法是将“标签”存储在子类的实例变量整数中。

# javascript - 如何使用贝塞尔曲线沿路径为图像设置动画

> ID：13612942
> 
> 赞同：10
> 
> 时间：2012-11-28T19:31:39.437
> 
> 标签：javascript, internet-explorer, jquery-animate, bezier

**我的目标：**

*   沿着如下图的路径移动/动画图像（可能是连接贝塞尔曲线）。
*   必须在 IE7+ 中工作，不要构建多个解决方案。
*   我可以暂停/恢复运动图像。
*   图像将继续沿路径移动（重复）。

[![路径](../Images/9b45c9d26dae8ad5b189d71ebd8ef67a.png)](https://i.stack.imgur.com/apiUj.jpg)

**我所考虑的**

*   CANVAS：IE7+8不支持，explorercanvas还没测试！预见一些 z-index 问题。
*   SVG，IE7+8 不支持。
*   jQuery.path，一个扩展 jQuery 动画功能的插件。无法弄清楚简历部分，我想在支持时使用 CSS 转换。

**我的计划**

*   使用 CSS 3D 变换、CSS 2d 变换或 jQuery.animate（支持的）和 requestAnimationFrame 对图像进行动画处理。
*   计算所有坐标并简单地逐像素移动图像。

**我的问题**

*   我的计划听起来很疯狂吗？更好的建议？
*   您是否预见到一些性能问题？我最终可能会得到 5K 或 10K 坐标。
*   你知道计算所有坐标的聪明方法、程序、函数或类似的东西吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-24T13:08:57.717

有一个很小的脚本（基于 SVG），仅用于不是直线的动画，
称为[**pathAnimator**](https://github.com/yairEO/pathAnimator/) (2kb)，它非常非常小而且非常高效。
不需要 jQuery。

### 例如：

```
var path = "M150 0 L75 200 L225 200 Z";         // an SVG path
    pathAnimator = new PathAnimator( path ),    // initiate a new pathAnimator object
    speed = 6,              // seconds that will take going through the whole path
    reverse = false,        // go back or forward along the path
    startOffset = 0,        // between 0% to 100%
    easing = function(t){ t*(2-t) };    // optional easing function

pathAnimator.start( speed, step, reverse, startOffset, finish, easing);

function step( point, angle ){
    // do something every "frame" with: point.x, point.y & angle
}

function finish(){
    // do something when animation is done
} 
```

* * *

[（使用fastdom](https://github.com/wilsonpage/fastdom)甚至可以提高效率）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-28T19:37:36.837

我建议您使用 GSAP：[http ://www.greensock.com/get-started-js/](http://www.greensock.com/get-started-js/)

有了它，您可以处理时间线，这是一个贝塞尔插件：[http ://api.greensock.com/js/com/greensock/plugins/BezierPlugin.html](http://api.greensock.com/js/com/greensock/plugins/BezierPlugin.html)

问候

# jquery - Get input file value to div

> ID：13612947
> 
> 赞同：3
> 
> 时间：2012-11-28T19:31:53.740
> 
> 标签：jquery, file-upload, input

**Hello** i have code below, and I need that i will get file value to `<span>` "filevalue" but i have no idea how to do that with jquery, so please give me some examples

```
<div id="file">
    <input type="file" id="ufile"/> 
    <div id="info">
        <span class="filevalue">file value goes here</span>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T19:33:35.407

```
$("#ufile").on("change​​​​​​​​", function() {
    $("#info .filevalue").text(this.value);
});​ 
```

**DEMO:** [http://jsfiddle.net/A6KEJ/](http://jsfiddle.net/A6KEJ/)

# java - java-如何使用循环验证函数检查文本字段列表

> ID：13612948
> 
> 赞同：2
> 
> 时间：2012-11-28T19:31:57.463
> 
> 标签：java, string, validation, textfield, isnullorempty

我想检查带有验证循环功能的文本字段列表

如果有人可以解释我如何做到这一点;）

我这样做：

```
 public void  validation()
    {
       List<String> list = new ArrayList<>();
       list.add("LastNameTextField");
       list.add("nameTextField");
       list.add("ageTextField"); 
       list.add("AdressTextField");        
       list.add("PhoneTextField1");        

       for(String check :list )
       {
          if(validator((check.toString()).toString()))
/*here i just want to get the field name and this value */
             JOptionPane.showMessageDialog(null, check+ " Empty value");
       }

    }

    public static boolean validator(String TextFieldTextToCheck)
    {
       if ((TextFieldTextToCheck== null) || (TextFieldTextToCheck.length() == 0)) {
            return true ;
        }
       else return false;
    } 
```

如果有人可以提供帮助，我找不到获取字段值的方法，
谢谢您的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T19:24:17.367

作为记录，我没有分配 Java 经验。如果我理解正确，您正在尝试验证 GUI 中几个 TextField 的内容。并且验证只确保文本字段为空。我建议不要使用文本字段名称的集合，而只需使用对要验证的文本字段的引用集合。

因此，您的 ArrayList 将填充文本字段引用：

```
ArrayList<TextField> textFields = new ArrayList<TextField>();
textFields.add(textbox1);
textFields.add(textbox2);
textFields.add(textbox3);
textFields.add(textbox4); 
```

您像以前一样遍历 ArrayList。我使用 System.Out 调用进行自己的测试。：

```
for(TextField textField : textFields) {
    if(validateTextField(textField)) {
        //JOptionPane.showMessageDialog(null, textField.getText() + " Empty value");
        System.out.println(textField.getName() + " has an Empty value");
    }
} 
```

验证函数现在看起来像这样。我为 NULL 引用添加了一个测试，但你可以忽略它。：

```
public static boolean validateTextField(TextField textField) {
    if(textField == null) throw new NullPointerException("The validate function received a null textfield reference. Check your loop.");
    return textField.getText().length() == 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:35:44.890

你的`if`条件不正确。

```
 if(validator((check.toString()).toString())) 
```

应更正为：

```
 if(YourClass.validator(check)) 
```

解释：

1.  `check`已经是字符串。没有必要调用`toString()`它。

2.  `validator`方法是一个静态方法，所以调用它的`static`方式是你的类名`YourClass.validator`在哪里。`YourClass`

3.  `validator`方法返回`boolean`并`if`期望`boolean`，因此无需再次获取字符串。

# r - 访问动态创建的对象中的列名

> ID：13612953
> 
> 赞同：0
> 
> 时间：2012-11-28T19:32:20.180
> 
> 标签：r

我动态创建了一些数据框来保存一些关于汽油价格的数据：

```
for(i in 1995:2007) {
   assign(paste("gas_data_", i, sep=""), 
          read.csv(paste("NaturalGasCash", i, ".txt", sep="")))
} 
```

现在我需要创建新变量来只保存这个数据框的一列，但我不知道该怎么做，我试过：

```
for(i in 1995:2007){
   assign(paste("yields_data_", i, sep=""), 
          as.value(paste("yields_data_", i, "$X6Mo", sep="")))
} 
```

但现在它只是创建了一个包含字符串的变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T19:46:02.317

一些（未经测试的）示例代码说明了我上面的评论：

```
#Store all data frames in a list
f <- paste0("NaturalGasCrash",1995:2007,".txt")
df_list <- lapply(f,read.csv)
names(df_list) <- paste0("gas_data_",1995:2007)

#Get just one of the data frames
df_list[["gas_data_2001"]]

#Get just a particular column from each
col <- lapply(df_list,'[[',"X6mo") 
```

# lisp - 删除列表中包含列表的元素

> ID：13612960
> 
> 赞同：1
> 
> 时间：2012-11-28T19:32:44.300
> 
> 标签：lisp

LISP 的初学者在这里。我正在为即将到来的 LISP 考试做准备，但遇到了一个我无法解决的问题，所以我希望有经验的人可以帮助我。

无论如何，这是我的问题：给您一个列表，其中可能包含列表作为元素。你的任务是删除给定位置的原子元素。

列表和位置作为输入参数给出。

示例： Position=5 ， List=(1 (2 3) ((4)) (5 (6))) ，应该返回 (1 (2 3) ((4)) ((6)))。

这是我到目前为止所得到的......（PS 下面的代码在 imMaw 的帮助下工作，您可以检查编辑以查看我之前的错误）。

```
(defun number_of_atoms(List)
 (atoms List 0)
)
(defun atoms(List Number)
 (cond
  ((null List) Number)
  ((atom (car List)) (atoms (cdr List) (+ 1 Number)))
  ((+ (atoms (car List) Number) (atoms (cdr List) 0)))
 )
)
(defun deleteElement(Pos List)
 (deleteElementAcc Pos 1 List)
)
(defun deleteElementAcc(Pos CurrPos List)
(cond 
  ((null List) nil)
  ((and (atom (car List)) (not(eql CurrPos Pos))) (cons (car List) (deleteElementAcc Pos (+ CurrPos 1) (cdr List))))
  ((and (atom (car List)) (eql CurrPos Pos)) (deleteElementAcc Pos (+ CurrPos 1) (cdr List)))
  ((cons (deleteElementAcc Pos CurrPos (car List))
         (deleteElementAcc Pos (+ CurrPos (number_of_atoms(car List))) (cdr List))))
)
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:31:54.197

为什么你在一半的地方用 z 拼写 Pos 和 CurrPos？

您的代码中的问题在于 cond 的最后一个分支。对List的cdr进行递归时，需要将CurrPos推进(car List)中的元素个数。一个简单的（长度列表）不起作用，因为它需要递归地计算子列表中的元素。

编辑：更详细说我们打电话

```
(deleteElement 3 '((1 2) (3 4))) 
```

你把它变成

```
(deleteElementPos 3 1 '((1 2) (3 4))), 
```

这属于 cond 的最后一种情况，你得到

```
(cons (deleteElementAcc 3 1 '(1 2))
      (deleteElementAcc 3 1 '((3 4)))) 
```

请注意 currPos 对于列表的 cdr 是错误的 - 它应该是 3，而不是 1。您实际上希望您的代码变成

```
(cons (deleteElementAcc 3 1 '(1 2))
      (deleteElementAcc 3 (+ 1 2) '((3 4)))) 
```

因为 (car List) 中有 2 个元素。

所以，你只需要改变

```
(deleteElementAcc Pos CurrPos (cdr List)) 
```

进入

```
(deleteElementAcc Pos (+ CurrPos (recursive-length (car List))) (cdr List)) 
```

和程序递归长度，这是一个非常简单的函数。它应该计算子列表中的元素，例如 (recursive-length '((1 2) ((3)))) 返回 3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:06:57.280

*虽然以任何*方式解决这个问题都不是特别困难，但要很好地解决它确实不是一件容易的事。我的意思是大 O 和代码复杂性，以及极端情况的处理。我不确定这段代码是否能处理不正确的列表，并且它的某些部分肯定可以减少冗长，但从技术上讲，它就在那里。它以 O(n) 精确地遍历树，其中 n 是树中元素的数量，并且它使用 O(n + 2 * (最大深度)) 空间，即它将使用树已经使用的内存此外，内存与树的最大深度成正比。

未尝试识别循环列表或重复项：

```
(defun remove-from-tree-linear (tree &rest positions)
  (loop with node = tree
     with nilcar = (gensym)
     with positions = (sort (remove-duplicates positions) #'<)
     with counter = 0
     with copy = nil
     with root = nil
     with stack = nil
     with backrefs = nil
     while (or node stack) do
       (cond
         ((null node)
          (setf backrefs (cdr backrefs))
          (when (car stack)
            (setf copy (car backrefs)))
          (setf node (car stack) stack (cdr stack)))
         ((consp (car node))
          (if copy
              (if (eq (car copy) nilcar)
                  (setf (car copy) (list nilcar)
                        copy (car copy)
                        (car backrefs) copy)
                  (setf (cdr copy) (list nilcar)
                        copy (cdr copy)
                        (car backrefs) copy))
              (setf copy (list nilcar)
                    root copy))
          (setf backrefs (cons copy backrefs))
          (setf stack (cons (cdr node) stack)
                node (car node)))
         (t (if (and positions (= counter (car positions)))
                (setf positions (cdr positions))
                (if copy
                    (progn
                      (if (eq (car copy) nilcar)
                          (setf (car copy) (list (car node))
                                copy (car copy))
                          (setf (cdr copy) (list (car node))
                                copy (cdr copy)))
                      (setf (car backrefs) copy))
                    (setf copy (list (car node))
                          root copy
                          backrefs (list copy))))
            (setf node (cdr node))))
       (incf counter)
     finally (return root))) 
```

# mule - Dynamic Timeout on Collection Aggregator

> ID：13612961
> 
> 赞同：0
> 
> 时间：2012-11-28T19:33:00.853
> 
> 标签：mule

I need to use the timeout value passed in the message header as the value for the collection aggregator.

```
<collection-aggregator timeout="#[new Integer(header:SESSION:TIMEOUT)]"    failOnTimeout="false" doc:name="Collection Aggregator"/> 
```

I tried to convert it to a number but it wouldn't take it. Can someone post an example of how I would do it?

**Mule Config**

```
<flow name="workIn">
    <http:inbound-endpoint exchange-pattern="request-response" address="http://localhost:5455/SQSearcher" doc:name="HTTP">
        <cxf:jaxws-service serviceClass="com.ace.st.tf.web.ws.sq.ISQSearcher" doc:name="SQ Searcher"/>
        <message-properties-transformer scope="session">
            <add-message-property value="1" key="DOBSearch" />
        </message-properties-transformer>
    </http:inbound-endpoint>

    <logger message="SQSearcher Inbound Payload-&gt; #[payload]" level="INFO" doc:name="Logger"/>       

    <message-properties-transformer scope="session">
        <add-message-property value="#[new Integer(payload.getTimeout())]" key="TIMEOUT" />                 
    </message-properties-transformer>

    <custom-transformer class="com.ace.st.tf.web.ws.sq.transformer.CCDMessageTransformer" doc:name="Java"/>

    <request-reply storePrefix="workStore" doc:name="Put message for processing">
        <vm:outbound-endpoint path="dispatchIn">
            <message-properties-transformer scope="outbound">
                <delete-message-property key="MULE_REPLYTO" />
                <add-message-property value="#[message:id]" key="MULE_CORRELATION_ID" />                    
            </message-properties-transformer>
        </vm:outbound-endpoint>

        <vm:inbound-endpoint path="dispatchOut" />
    </request-reply>

    <custom-transformer class="com.ace.st.tf.web.ws.sq.transformer.CcdSearchResultTransformer" doc:name="Java"/>

</flow>

<flow name="workDispatcher">
    <vm:inbound-endpoint path="dispatchIn" />
    <flow-ref name="workWorker" />
</flow>

<flow name="workWorker">        

    <message-properties-transformer scope="outbound" doc:name="Remember correlation">
        <add-message-property value="#[header:OUTBOUND:MULE_CORRELATION_ID]" key="MULE_CORRELATION_ID" />
        <add-message-property value="2" key="MULE_CORRELATION_GROUP_SIZE" />
    </message-properties-transformer>

    <all>
        <vm:outbound-endpoint path="vm.flow.1"/>
        <vm:outbound-endpoint path="vm.flow.2"/>
    </all>

</flow>

<flow name="workAggregator">
    <vm:inbound-endpoint path="vm.aggregate" />
    <logger message="payload to aggregate-&gt; #[payload]" level="INFO" doc:name="Logger"/>     
    <custom-aggregator class="com.ace.st.tf.web.ws.sq.aggregator.CustomAggregator" storePrefix="header:SESSION:TIMEOUT" failOnTimeout="false"/>
    <logger message="Aggregated Payload-&gt; #[payload]" level="INFO" doc:name="Logger"/>
    <vm:outbound-endpoint path="dispatchOut" />
</flow>

<flow name="CCDClient" doc:name="CCDClient">
    <vm:inbound-endpoint path="vm.flow.1" doc:name="VM"/>
    <logger message="CCDClient correlation id inbound-&gt; #[header:OUTBOUND:MULE_CORRELATION_GROUP_SIZE]" level="INFO" doc:name="Logger"/>

    <choice doc:name="Choice">
        <when expression="header:SESSION:DOBSearch=1">
            <outbound-endpoint address="http://localhost:4723/CcdSearcher" doc:name="Generic">
                <cxf:jaxws-client clientClass="com.ace.st.tf.web.ws.sq.ccd.client.CcdSearcher_Service" port="CcdSearcherPort" wsdlLocation="classpath:CcdSearcher.wsdl" operation="searchByNameDob"/>
            </outbound-endpoint>
        </when>
        <otherwise>
            <expression-component doc:name="set error message">payload="NOT A DOB SEARCH"</expression-component>
        </otherwise>
    </choice>
    <vm:outbound-endpoint path="vm.aggregate" doc:name="VM">
        <message-properties-transformer scope="outbound">
            <add-message-property value="#[header:INBOUND:MULE_CORRELATION_ID]" key="MULE_CORRELATION_ID" />
            <add-message-property value="#[header:INBOUND:MULE_CORRELATION_GROUP_SIZE]" key="MULE_CORRELATION_GROUP_SIZE" />
        </message-properties-transformer>
    </vm:outbound-endpoint>
</flow>

<flow name="ATspCisClient" doc:name="ATspCisClient">
    <vm:inbound-endpoint path="vm.flow.2" doc:name="VM"/>
    <choice doc:name="Choice">
        <when expression="header:SESSION:DOBSearch=1">
            <outbound-endpoint address="http://localhost:4724/ATspCisSearcher" doc:name="Generic">
                <cxf:jaxws-client clientClass="com.ace.st.tf.web.ws.sq.atspcis.client.AtspcisSearcher_Service" port="AtspcisSearcherPort" wsdlLocation="classpath:ATspCisSearcher.wsdl" operation="atspSearchByNameDob"/>
            </outbound-endpoint>
        </when>
        <otherwise>
            <expression-component doc:name="set error message">payload="NOT A DOB SEARCH"</expression-component>
        </otherwise>
    </choice>
    <vm:outbound-endpoint path="vm.aggregate" doc:name="VM">
        <message-properties-transformer scope="outbound">
            <add-message-property value="#[header:INBOUND:MULE_CORRELATION_ID]" key="MULE_CORRELATION_ID" />
            <add-message-property value="#[header:INBOUND:MULE_CORRELATION_GROUP_SIZE]" key="MULE_CORRELATION_GROUP_SIZE" />
        </message-properties-transformer>
    </vm:outbound-endpoint>
</flow> 
```

**CustomAggregator**

```
public class CustomAggregator extends SimpleCollectionAggregator 
{

public String getStorePrefix() {
    return super.getStorePrefix();
}

public void setStorePrefix(String storePrefix) {
    super.setStorePrefix(storePrefix);
}

@Override
protected EventCorrelatorCallback getCorrelatorCallback(MuleContext muleContext) {

    return new CollectionCorrelatorCallback(muleContext,false,storePrefix) {
        @Override
        public MuleEvent aggregateEvents(EventGroup events) throws AggregationException {
            try {
                for (Iterator<MuleEvent> iterator = events.iterator(); iterator.hasNext();) {
                    MuleEvent event = iterator.next();
                    Object result = muleContext.getExpressionManager().evaluate("header:SESSION:TIMEOUT",event.getMessage());
                    setTimeout((java.lang.Integer)result);
                }
            }
            catch (ObjectStoreException e) {
                throw new AggregationException(events,null,e);
            }
            //return new DefaultMuleEvent(new DefaultMuleMessage(buffer.toString(), muleContext), events.getMessageCollectionEvent());
            return super.aggregateEvents(events);
        }
    };
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:08:17.763

从我在代码库中看到的，`timeout`似乎不支持表达式。

您必须通过扩展`org.mule.routing.SimpleCollectionAggregator`、覆盖`getTimeout()`和引用它来创建自己的自定义聚合器`<custom-aggregator class="...">`。

不幸的是，尽管有激烈的骡夫行动，我无法让以下工作：

```
public class CustomAggregator extends SimpleCollectionAggregator
{
    private String timeoutExpression;

    public String getTimeoutExpression()
    {
        return timeoutExpression;
    }

    public void setTimeoutExpression(final String timeoutExpression)
    {
        this.timeoutExpression = timeoutExpression;
    }

    @Override
    public void initialise() throws InitialisationException
    {
        super.initialise();

        eventCorrelator = new EventCorrelator(getCorrelatorCallback(muleContext), next, messageInfoMapping,
            muleContext, flowConstruct.getName(), persistentStores, storePrefix)
        {
            @Override
            public long getTimeout()
            {
                return (Long) muleContext.getExpressionLanguage().evaluate(getTimeoutExpression(),
                    RequestContext.getEvent());
            }
        };
    }
} 
```

配置：

```
 <custom-aggregator class="com.helloworld.CustomAggregator" timeout="60000">
        <spring:property name="timeoutExpression" value="#[Integer.valueOf(sessionVars.TIMEOUT)]" />
    </custom-aggregator> 
```

原因是负责获取过期相关组的线程看不到当前的 Mule 事件上下文，因此无法根据动态属性计算任何内容。

因此，虽然可以彻底改革`ExpiringGroupMonitoringThread`使用动态值的机制，但我想说这是不切实际的，现在应该被认为是“不可能的”。

# c++ - 在 C++ 中调用基类构造函数

> ID：13612966
> 
> 赞同：3
> 
> 时间：2012-11-28T19:33:09.867
> 
> 标签：c++

这是调用基类构造函数的合法方式吗？

基类如下

```
class base_class
{
    public:
    base_class(int x, int y);    
    protected:
    int a;
    int b;
};

base_class::base_class(int x,int y)
{
    a=x;
    b=y;
} 
```

派生类如下

```
class derived_class: public base_class
{
    public:
    derived_class(int x,int y,int z);
    protected:
    int c;
};
derived_class:: derived_class(int x,int y,int z):base_class(x,y)  /*Edited and included the scope resolution operator*/
{
    c=z;
} 
```

这种在 C++ 中定义派生类构造函数的方式是否合法，如果是，如何调用基类构造函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T19:35:18.460

假设你的意思

```
derived_class::derived_class(int x,int y,int z):base_class(x,y)   
//            |
//     scope resolution operator 
```

好的。这不仅*是一种*合法的方式，而且是显式调用当前对象的基本构造函数*的唯一方式。*

除非您这样做，否则默认构造函数会被隐式调用。在您的情况下，基类没有默认构造函数，因此您会收到编译器错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T19:36:41.653

如果您正在调用非默认构造函数，这是初始化基类的正确（也是唯一）方法 - 当然，如果您将第二个冒号添加到范围解析运算符。

**在“初始化列表”（冒号和函数体之间的部分）中初始化所有**成员更为常见，如下所示：

```
derived_class::derived_class(int x,int y,int z):
    base_class(x, y),
    c(z)
{
} 
```

...在哪里将您的值`c(z)`初始化为.`int c``z`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:35:35.583

是的，这是正确的方法，实际上是在派生类之前调用​​基类构造函数的唯一方法。

# r - How to Reverse a string in R

> ID：13612967
> 
> 赞同：52
> 
> 时间：2012-11-28T19:33:18.167
> 
> 标签：r

I'm trying to teach myself R and in doing some sample problems I came across the need to reverse a string.

Here's what I've tried so far but the paste operation doesn't seem to have any effect.

There must be something I'm not understanding about lists? (I also don't understand why I need the [[1]] after strsplit.)

```
> test <- strsplit("greg", NULL)[[1]]
> test
[1] "g" "r" "e" "g"
> test_rev <- rev(test)
> test_rev
[1] "g" "e" "r" "g"
> paste(test_rev)
[1] "g" "e" "r" "g" 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-28T19:46:07.183

From `?strsplit`，一个将反转字符串向量中的每个字符串的函数：

```
## a useful function: rev() for strings
strReverse <- function(x)
        sapply(lapply(strsplit(x, NULL), rev), paste, collapse="")
strReverse(c("abc", "Statistics"))
# [1] "cba"        "scitsitatS" 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2016-06-14T14:09:45.713

`stringi`这个功能用了很久了：

```
stringi::stri_reverse("abcdef")
## [1] "fedcba" 
```

另请注意，它是矢量化的：

```
stringi::stri_reverse(c("a", "ab", "abc"))
## [1] "a"   "ba"  "cba" 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-11-28T19:43:08.613

正如@mplourde 指出的那样，您需要以下`collapse`论点：

```
paste(test_rev, collapse='') 
```

R 中的大多数命令都是矢量化的，但命令处理矢量的准确程度取决于命令。 `paste`将对多个向量进行操作，结合`i`每个向量的第 th 个元素：

```
> paste(letters[1:5],letters[1:5])
[1] "a a" "b b" "c c" "d d" "e e" 
```

`collapse`告诉它改为在向量内操作。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-12-25T08:31:43.333

以下可能是反转字符串向量的有用方法`x`，并且速度稍快（并且内存效率更高），因为它避免了生成列表（如 using `strsplit`）：

```
x <- rep( paste( collapse="", LETTERS ), 100 )
str_rev <- function(x) {
  sapply( x, function(xx) { 
    intToUtf8( rev( utf8ToInt( xx ) ) )
  } )
}
str_rev(x) 
```

如果您知道您将使用 ASCII 字符并且速度很重要，那么有一个快速的 C 实现用于反转内置的字符串向量`Kmisc`：

```
install.packages("Kmisc")
str_rev(x) 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-02-26T12:14:38.033

您也可以使用该`IRanges`软件包。

```
library(IRanges)
x <- "ATGCSDS"
reverse(x)
# [1] "SDSCGTA" 
```

您也可以使用该`Biostrings`软件包。

```
library(Biostrings)
x <- "ATGCSDS"
reverse(x)
# [1] "SDSCGTA" 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-11-29T08:38:39.040

如果您的数据在 a 中`data.frame`，您可以使用`sqldf`：

```
myStrings <- data.frame(forward = c("does", "this", "actually", "work"))
library(sqldf)
sqldf("select forward, reverse(forward) `reverse` from myStrings")
#    forward  reverse
# 1     does     seod
# 2     this     siht
# 3 actually yllautca
# 4     work     krow 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-06-29T23:14:52.513

这是一个返回整个反转字符串的函数，或者可选的反转字符串只保留由 指定的元素`index`，从最后一个字符开始倒数。

```
revString = function(string, index = 1:nchar(string)){
  paste(rev(unlist(strsplit(string, NULL)))[index], collapse = "")
} 
```

首先，定义一个易于识别的字符串作为示例：

`(myString <- paste(letters, collapse = ""))`

`[1] "abcdefghijklmnopqrstuvwxyz"`

现在尝试`revString`使用和不使用索引的函数：

`revString(myString)`

`[1] "zyxwvutsrqponmlkjihgfedcba"`

`revString(myString, 1:5)`

`[1] "zyxwv"`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-03-26T09:05:35.910

您可以使用前一篇文章中提到的 rev() 函数。

```
`X <- "MyString" 
```

`RevX <- paste(rev(unlist(strsplit(X,NULL))),collapse="")`

输出：“gnirtSyM”

谢谢，

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-11-29T07:26:49.783

这是一个解决方案`gsub`。尽管我同意使用`strsplit`and更容易`paste`（正如其他答案中所指出的那样），但看到它也适用于正则表达式可能会很有趣：

```
test <- "greg"

n <- nchar(test) # the number of characters in the string

gsub(paste(rep("(.)", n), collapse = ""),
     paste("", seq(n, 1), sep = "\\", collapse = ""),
     test)

# [1] "gerg" 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-05-06T04:41:19.963

```
##function to reverse the given word or sentence

reverse <- function(mystring){ 
n <- nchar(mystring)
revstring <- rep(NA, n)
b <- n:1
c <- rev(b)
for (i in 1:n) {
revstring[i] <- substr(mystring,c[(n+1)- i], b[i])
 }
newrevstring <- paste(revstring, sep = "", collapse = "")
return (cat("your string =", mystring, "\n",
("reverse letters = "), revstring, "\n", 
"reverse string =", newrevstring,"\n"))
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-07-09T22:13:07.683

这是另一种 base-R 解决方案：

```
# Define function
strrev <- function(x) {
  nc <- nchar(x)
  paste(substring(x, nc:1, nc:1), collapse = "")
}

# Example
strrev("Sore was I ere I saw Eros")
[1] "sorE was I ere I saw eroS" 
```

解决方案的灵感来自[这些 U.Auckland 幻灯片](https://www.stat.auckland.ac.nz/~stats380/downloads/02-Palindromes-handouts.pdf)。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-02-17T09:54:11.930

反转字符串的最简单方法：

```
#reverse string----------------------------------------------------------------
revString <- function(text){
  paste(rev(unlist(strsplit(text,NULL))),collapse="")
}

#example:
revString("abcdef") 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-10-16T15:14:04.023

以下代码将从用户那里获取输入并反转整个字符串-

```
revstring=function(s)
print(paste(rev(strsplit(s,"")[[1]]),collapse=""))

str=readline("Enter the string:")
revstring(str) 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-02-18T01:53:09.643

因此，显然前端 JS 开发人员被要求在 JS 中执行此操作（用于面试），而不使用内置的反向函数。我花了几分钟，但我想出了：

```
string <- 'hello'

foo <- vector()

for (i in nchar(string):1) foo <- append(foo,unlist(strsplit(string,''))[i])
paste0(foo,collapse='') 
```

这一切都可以包装在一个函数中......

那么高阶泛函呢？减少？

# delphi - How to search for a specific e-mail message in IMAP mailbox?

> ID：13612968
> 
> 赞同：5
> 
> 时间：2012-11-28T19:33:19.927
> 
> 标签：delphi, delphi-xe2, imap

How can I retrieve a specific e-mail based on a certain text contained in the message ? For example how Gmail search works. If you search for a specific text, which is in the e-mail, then the Gmail will retrieve the message that is associated with the text. Preferably without any looping.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T20:07:17.693

你正在寻找[`SearchMailBox`](http://www.indyproject.org/docsite/html/TIdIMAP4_SearchMailBox@array_of_TIdIMAP4SearchRec.html)方法。这是一个简单的示例，期望您的 IMAP 客户端（在本例`IMAPClient`中为类型的变量[`TIdIMAP4`](http://www.indyproject.org/docsite/html/TIdIMAP4.html)）已经连接到 Gmail 服务器。对于那些寻找如何做到这一点的人，请看一下[`this post`](https://stackoverflow.com/a/13605182/960757)并将此代码放在*and*附近的`try..finally`块中。`IMAPClient.Connect``IMAPClient.Disconnect`

```
var
  // in this example is not shown how to connect to Gmail IMAP server but
  // it's expected that the IMAPClient object is already connected there
  IMAPClient: TIdIMAP4;

procedure TForm1.Button1Click(Sender: TObject);
var
  I: Integer;
  MsgObject: TIdMessage;
  SearchInfo: array of TIdIMAP4SearchRec;
begin
  // if the mailbox selection succeed, then...
  if IMAPClient.SelectMailBox('INBOX') then
  begin
    // set length of the search criteria to 1
    SetLength(SearchInfo, 1);
    // the SearchKey set to skBody means to search only in message body texts
    // for more options and explanation, see comments at the TIdIMAP4SearchKey
    // enumeration in the IdIMAP4.pas unit
    SearchInfo[0].SearchKey := skBody;
    // term you want to search
    SearchInfo[0].Text := 'Search term';

    // if the search in the selected mailbox succeed, then...
    if IMAPClient.SearchMailBox(SearchInfo) then
    begin
      // iterate the search results
      for I := 0 to High(IMAPClient.MailBox.SearchResult) do
      begin
        // make an instance of the message object
        MsgObject := TIdMessage.Create(nil);
        try
          // try to retrieve currently iterated message from search results
          // and if this succeed you can work with the MsgObject
          if IMAPClient.Retrieve(IMAPClient.MailBox.SearchResult[I], 
            MsgObject) then
          begin
            // here you have retrieved message in the MsgObject variable, so
            // let's do what what you need with the >> MsgObject <<
          end;
        finally
          MsgObject.Free;
        end;
      end;
    end;
  end;
end; 
```

这是 UTF-8 字符集的 IMAP 搜索的快速实现。由于受保护的`ParseSearchResult`方法，它使用插入类：

```
type
  TBasicSearchKey = (bskBcc, bskBody, bskCc, bskFrom, bskHeader, bskKeyword,
    bskSubject, bskText, bskTo);
const
  IMAPSearchKeys: array [TBasicSearchKey] of string = ('BCC', 'BODY', 'CC',
    'FROM', 'HEADER', 'KEYWORD', 'SUBJECT', 'TEXT', 'TO');
type
  TIdIMAP4 = class(IdIMAP4.TIdIMAP4)
  public
    function SearchMailBoxUTF8(const ASearchText: string;
      ASearchKey: TBasicSearchKey): Boolean;
  end;

implementation

{ TIdIMAP4 }

function TIdIMAP4.SearchMailBoxUTF8(const ASearchText: string;
  ASearchKey: TBasicSearchKey): Boolean;
var
  SearchText: RawByteString;
begin
  Result := False;
  CheckConnectionState(csSelected);

  SearchText := UTF8Encode(ASearchText);
  SendCmd(Format('SEARCH CHARSET UTF-8 %s {%d}', [IMAPSearchKeys[ASearchKey],
    Length(SearchText)]), ['SEARCH']);
  if LastCmdResult.Code = IMAP_CONT then
    IOHandler.WriteLn(SearchText, TEncoding.UTF8);

  if GetInternalResponse(LastCmdCounter, ['SEARCH'], False) = IMAP_OK then
  begin
    ParseSearchResult(FMailBox, LastCmdResult.Text);
    Result := True;
  end;
end; 
```

以及用法：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  I: Integer;
  MsgObject: TIdMessage;
begin
  if IMAPClient.SelectMailBox('INBOX') and
    IMAPClient.SearchMailBoxUTF8('Search term', bskText) then
  begin
    for I := 0 to High(IMAPClient.MailBox.SearchResult) do
    begin
      MsgObject := TIdMessage.Create(nil);
      try
        if IMAPClient.Retrieve(IMAPClient.MailBox.SearchResult[I],
          MsgObject) then
        begin
          // here you have retrieved message in the MsgObject variable, so
          // let's do what what you need with the >> MsgObject <<
        end;
      finally
        MsgObject.Free;
      end;
    end;
  end;
end; 
```

# asp.net-mvc - SignalR 似乎正在减慢我的 MVC / Azure 应用程序的启动速度

> ID：13612970
> 
> 赞同：3
> 
> 时间：2012-11-28T19:33:29.900
> 
> 标签：asp.net-mvc, performance, azure, signalr

我在 Windows Azure 上的 WebRole 上运行在 .NET 4.5 下的 MVC 应用程序，使用 SignalR 1.0 -alpha2，并使用 ServiceBus 背板。在我的 App_Start 文件夹中，我有 RegisterHubs.cs，如下所示：

```
[assembly: PreApplicationStartMethod(typeof(pageengine.studio.RegisterHubs), "Start")]

namespace pageengine.studio
{
    public static class RegisterHubs
    {
        public static void Start()
        {
            // Register the default hubs route: ~/signalr/hubs
            RouteTable.Routes.MapHubs();
        }
    }
} 
```

在 Global.asax 中，我有以下内容：

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    String connectionString = "Endpoint=sb://MYNAMESPACE.servicebus.windows.net/;SharedSecretIssuer=MY_ISSUER;SharedSecretValue=MY_SECRET_VALUE";
    GlobalHost.DependencyResolver.UseWindowsAzureServiceBus(connectionString, 1);
} 
```

我已经按照上面的方法运行了测试（称为 MVC + SignalR + ServiceBus），`GlobalHost.DependencyResolver ...`Global.asax 中的行被注释掉了（MVC + SignalR），两行`[assembly: PreApplicationStartMethod ...`也`RouteTable.Routes.MapHubs();`被注释掉了（MVC Alone）。

在开始之前，我使用 Start without Debugging（并部署到 IIS Express）启动 Azure 模拟器，在每次注释/取消注释后，我重新构建应用程序，然后在 Google Chrome 中进行硬重新加载。我十次测试的平均加载时间如下：

> 单独的 MVC：1.33 秒
> 
> MVC + SignalR：31.95 秒
> 
> MVC + SignalR + ServiceBus：53.1 秒

我没有在我的实时 Azure 站点上运行相同的比较，但运行这些测试的原因是在实现 SignalR 之后，它的运行速度明显变慢。

我原以为这只是因为 SignalR 处于 alpha 状态，但其他地方的讨论（[signalR MVC 站点在 signalR 安装后无限期加载](https://stackoverflow.com/questions/13579598/signalr-mvc-site-loads-indefinitely-after-signalr-install)）表明这不应该是这样。我不确定上面的实现是否有问题，或者这是 Azure 特定的问题，还是其他问题。

还有其他人遇到类似的性能问题吗？我上面的代码有什么问题吗？有没有人有任何潜在的补救措施？

**更新**

我已经在 WebRole 的 Start 和 Run 方法、方法的开头和结尾以及`RegisterHubs`方法的开头和结尾添加了一个跟踪语句`Application_Start`，并注释掉了 ServiceBus 代码，所以我只是在测试 MVC + SignalR。

同样，经过多次测试，结果是一致的：

> Web 角色开始时间：20:55:17
> 
> 网络角色运行：20:55:17
> 
> RegisterHubs 开始时间：20:55:28
> 
> RegisterHubs 开始时间：20:56:10 // 42 秒。平均接近45。
> 
> 应用程序_开始时间：20:56:14
> 
> Application_Start Out: 20:56:21

作为参考，我的 RegisterHubs 方法现在如下所示：

```
public static void Start()
{
    System.Diagnostics.Debug.WriteLine("RegisterHubs Start In: " + DateTime.Now.ToLongTimeString());
    // Register the default hubs route: ~/signalr/hubs
    RouteTable.Routes.MapHubs();
    System.Diagnostics.Debug.WriteLine("RegisterHubs Start Out: " + DateTime.Now.ToLongTimeString());
} 
```

**进一步更新**

问题（讽刺的是）在`PerformaceCounterManager`课堂上，在`Microsoft.AspNet.SignalR.Core`大会上。

该函数`SetCounterProperties()`调用`LoadCounter`23 个不同的循环`_counterProperties`。这些调用中的每一个都失败并且异常被处理，导致返回`_noOpCounter`，但是失败需要一到两秒的时间，并且这会累积到四十秒的延迟（所有这些时间都在调试器打开的情况下 - 没有它会更快，当然，但仍然明显滞后）。

这是处理的异常的跟踪，以防有用：

`A first chance exception of type 'System.InvalidOperationException' occurred in System.dll InvalidOperation: SignalR - Errors: Hub Invocation Total - deployment18(966).Azure.Studio_IN_0_Web - System.InvalidOperationException: Cannot load Counter Name data because an invalid index '' was read from the registry. at System.Diagnostics.PerformanceCounterLib.GetStringTable(Boolean isHelp) at System.Diagnostics.PerformanceCounterLib.get_NameTable() at System.Diagnostics.PerformanceCounterLib.get_CategoryTable() at System.Diagnostics.PerformanceCounterLib.CategoryExists(String category) at System.Diagnostics.PerformanceCounterLib.CategoryExists(String machine, String category) at System.Diagnostics.PerformanceCounterCategory.Exists(String categoryName, String machineName) at System.Diagnostics.PerformanceCounterCategory.Exists(String categoryName) at Microsoft.AspNet.SignalR.Infrastructure.PerformanceCounterManager.LoadCounter(String categoryName, String counterName, String instanceName) in d:\Work\CLIENTS\PageEngine\Resources\SignalR-master\src\Microsoft.AspNet.SignalR.Core\Infrastructure\PerformanceCounterManager.cs:line 275`

我能找到的最简单的解决方法是没有 PerformanceCounters。~~暂时我已经修改`GetPropertyInfo()`为简单地返回`new PropertyInfo[0]`。~~我已修改`LoadCounter`为始终返回`_noOpCounter`。启动时间现在约为 5 秒，使用服务总线则为 10 秒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T13:26:57.250

这是 SignalR 1-alpha2 中的一个错误，现已在 github 上报告：[https ://github.com/SignalR/SignalR/issues/1063](https://github.com/SignalR/SignalR/issues/1063)

**更新**

...现在已修复：[https ://github.com/SignalR/SignalR/commit/fda3aa41a9250a072e8487882ae806ffe547f2bb](https://github.com/SignalR/SignalR/commit/fda3aa41a9250a072e8487882ae806ffe547f2bb)

# ios - iOS后台上传图片

> ID：13612974
> 
> 赞同：2
> 
> 时间：2012-11-28T19:33:37.800
> 
> 标签：ios, http, background-process, afnetworking

我制作了一个将一堆照片上传到网络服务器的应用程序。它通过重复的 html 调用，在操作队列中使用多个 AFNetworking 的 AFHTPRequestOperation 来实现。现在，用户退出应用程序，队列停止。但是，我想继续上传队列直到完成，然后让应用程序像往常一样进入睡眠状态。

我知道 iOS 使用 "beginBackgroundTaskWithExpirationHandler" 提供了一个后台过期处理程序。我也知道 AFURLConnectionOperation 是 AFNetworking 中每个 HTTP 操作类的超类，可以使用它

```
- (void)setShouldExecuteAsBackgroundTaskWithExpirationHandler:(void (^)(void))handler 
```

但是有什么方法可以使用操作队列来完成这项工作吗？如果我想上传，比如 10 张照片，设置每个操作的过期处理程序会正确完成这项工作吗？

如果有人对 AFNetworking 的后台任务提出任何意见，或者是否有人遇到与我相同的问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T19:42:16.930

当应用程序进入后台时，操作系统将决定是完全停止您的应用程序还是给它一些时间来完成它正在做的事情。如果它希望您的应用程序停止，则会调用到期处理程序。如果发生这种情况，您应该尽快暂停所有任务并准备完全终止应用程序，因为这将在很短的时间内（最多 5 秒）发生。看看[这里](http://developer.apple.com/library/ios/DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20)。

# ruby-on-rails - Ruby on Rails 与 Oracle 对象（以及一般面向对象的数据持久性）

> ID：13612975
> 
> 赞同：3
> 
> 时间：2012-11-28T19:33:38.673
> 
> 标签：ruby-on-rails, oracle, activerecord, orm, datamapper

我是 Ruby 和 Rails 的新手，但在为 Oracle 构建前端方面已经有一段时间了。我也是面向对象设计（OOD）的新手，所以我可能也错过了一些重要的细节。无论如何，我有机会用 Ruby 和 Oracle 从头开始​​构建一个新产品（是的，它必须是 Oracle）。鉴于 Ruby 的全部 OO 特性，我认为尝试构建一个 OO 数据模型（或者，在 Oracle 的情况下，一个对象关系模型）是有意义的。然而，在我对 Rails 和 Oracle 对象的研究中，我没有找到解决方案，而是发现了一个令人不安的悖论。所以，我的基本问题是：我错过了什么吗？

**更多细节**

我目前看到的基本问题是 Rails 的 ActiveRecord 模块与 Oracle 对象不兼容，即因为它不支持复杂的数据类型，例如 Oracle 的对象类型（或者，如果支持，我还没有找到描述如何的文档）。因此，ActiveRecord 无法轻松处理包含对象和/或对象引用集合的 Oracle 表。简而言之，Rails 想要与数据库无关，Oracle Objects 想要与应用程序无关，而这两种理念目前被证明是冲突的。

**论证要点的例子**

我想做的是在应用程序和数据库中使用相同的对象定义来减少或消除对象关系映射。然而，因为 Rails 似乎没有在 Oracle 中创建或读取对象类型的功能，所以在 Oracle 中创建对象关系模型并改为创建关系模型是不值得的。反过来，这将产生极大地减少 Rails 应用程序中的 OO 模型的副作用。这就是悖论——Rails 的特性通过强制使用关系数据模型来实现数据持久性，从而固有地降低了它自己的 OOP 能力。

例如，假设我有许多不同类型的小部件。为了在 Oracle Objects 中支持这一点，我可能会创建一个小部件对象类型和各种小部件子类型。然后，我可能会创建一个具有属性的小工具对象，该属性包含对组成小工具的各种小部件类型和子类型的小部件引用的集合。这个对象模型对我来说听起来既简单又优雅，并且应该在 Ruby 中也能很好地工作。然而，将 Rails 和 ActiveRecord 放入等式中，我突然发现自己将模型扁平化为关系表，其中我有一个小工具表和一个小部件表（带有一个小部件类型列和各种其他列，以支持一个表中的各种小部件类型) 和两者之间的 1:N 表，用于将小部件附加到小工具。最后，我在 Rails 中的对象最终看起来与这些表非常相似，只有一种小部件对象类型，没有小部件对象子类型（小部件对象将仅具有指示类型的属性）。尝试在 Rails 中构建与表不匹配的对象模型听起来像是查询犯罪和惩罚的未来。这种被迫背离OOD的做法让我觉得很悲惨。当然，另一种方法可能是尝试完全规范化表并创建各种小部件子类型表，但这种方法在关系世界中并不总是很有意义（由于缺乏继承），并且会导致我的主要表连接头痛当前的项目。尝试在 Rails 中构建与表不匹配的对象模型听起来像是查询犯罪和惩罚的未来。这种被迫背离OOD的做法让我觉得很悲惨。当然，另一种方法可能是尝试完全规范化表并创建各种小部件子类型表，但这种方法在关系世界中并不总是很有意义（由于缺乏继承），并且会导致我的主要表连接头痛当前的项目。尝试在 Rails 中构建与表不匹配的对象模型听起来像是查询犯罪和惩罚的未来。这种被迫背离OOD的做法让我觉得很悲惨。当然，另一种方法可能是尝试完全规范化表并创建各种小部件子类型表，但这种方法在关系世界中并不总是很有意义（由于缺乏继承），并且会导致我的主要表连接头痛当前的项目。

将 Rails 放在一边，只专注于 Ruby， OCI8 接口似乎*确实*能够处理 Oracle 对象类型。但是，我还没有找到任何关于如何使用它的支持文档。这很明显，放弃 Rails 以开辟自己的道路的成本太高了（许多人发现 Oracle 对象本身使用起来很笨拙）。对于像这样的小项目，将 Rails 与关系 Oracle 一起使用要简单得多。

当我试图想象尝试通过 ActiveRecord 或类似模块支持对象数据类型所涉及的复杂性时，可以理解为什么尚未构建此功能（特别是考虑到 Rails 的与数据库无关的哲学）。可以理解……但很不幸。

所以。我错过了什么？是否有一种低影响且支持良好的方式来支持来自 Ruby 和/或 Rails 的 Oracle 对象？如果不是 Oracle，Rails 是否为任何对象关系数据库管理系统提供良好的对象类型支持？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T23:36:24.963

Rails 在设计上对事情应该如何工作有非常强烈的“意见”。

以 ActiveRecord 为例：它提供了一个简单的 API 来处理传统的关系数据库，因为这是 Web 应用程序通常需要的。它确实将该数据库视为简单类型的哑存储，并在 ruby​​ 端定义所有关系和逻辑。

支持其他技术，例如对象数据库，会使正常用例更加复杂，因此 ActiveRecord 不会。

Rails 社区支持 NoSQL（文档和键值）存储，但我还没有看到任何对象数据库。

也就是说，Rails 3 已将大部分 ActiveRecord 功能转移到单独的模块中。您可以使用它们来推出您自己的 Oracle 对象存储层。但是，我想在大多数情况下，付出的努力会超过好处。

此外，如果您的特定问题是您需要子类型，请查看 Rails 的“单表继承”功能，它允许您拥有一个数据库表，其中每行都有自己的 ActiveRecord 类型。

所以，你没有特别错过任何东西。如果您喜欢 Rails，我建议您尝试使用现有的生态系统。如果你真的认为你需要一个对象数据库，也许你最好尝试找到一个已经支持该支持的框架。

# apache2 - Is there a plugin available to run IIS application on Apache HTTP Server?

> ID：13612977
> 
> 赞同：0
> 
> 时间：2012-11-28T19:33:43.773
> 
> 标签：apache2, iis-7.5, ibmhttpserver

My company is looking to set up a Sharepoint server for some of our internal users. We would like this to be accessible to external users using our current domain (www.companyname.com). The problem we are having is that www.companyname.com is set up using an IBM HTTP Server (basically Apache) and is based mostly around Java and Websphere. I was wondering if there was a plug-in available for Apache that would allow my to link up the Sharepoint server (running on IIS) with Apache, much like what is done with Websphere and Apache. Any help would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T13:21:32.593

您可能只使用 Apache 中的通用 HTTP 反向代理支持。如果您在 IHS 中将其用于前端共享点，则 IBM 将不支持它，并且在技术上违反了许可。

如果您收到 IBM 产品的 IHS，那么它仅在用于直接支持它随附的产品时才获得许可和支持。

# css - remove css image border on child page

> ID：13612978
> 
> 赞同：-1
> 
> 时间：2012-11-28T19:33:50.943
> 
> 标签：css, image

I'm using asp.net with themes, master and child pages. In the base css, I've got the img tag with a border. It's great in that I never have to place a border around my image. However, on one page where I'm using the Nivo slider, I want to remove the border. I know it's the base image, cause if I change the border to white, everything works fine - but every image on my website then is missing the border. I thought the inheritance went theme, page, inline css?

```
 img { margin:0 10px 10px 10px;border:1px solid #000000;}
 #imgNoLine { margin:0 0 0 0;border:0 #ffffff !important; }

 #maincontainer #contentwrapper #contentcolumn #contentInnerTube fieldset .nivoSlider img { position:absolute;margin:0 0 0 0; top:0px;left:0px; display:none;border:none 0 solid white !important; }

 <img src="image.jpg" alt="" style="border-width: 0 !important;" id="imgNoLine" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:51:03.583

将您的滑块放在一个 div 中并给该 div 一个 id。然后在 css 中使用它：

```
#div-id img{
    border:none;
} 
```

# magento - Magento Observer Destination

> ID：13612979
> 
> 赞同：1
> 
> 时间：2012-11-28T19:33:58.217
> 
> 标签：magento, observers

I have wrote 2 Magento observers and they both do exactly what I want with the exception that they end on the wrong page. In other words, they write the log files, modify the databases, and talk with other servers, but they modify the page to page routing. For example, I have an observer that I used at login that modifies a database, writes a cookie, and writes to a log, but it changes the post log-in page to

[http://www.my-web-site.com/index.php/customer/login/post/](http://www.my-web-site.com/index.php/customer/login/post/)

and then gives me a 404 error. If I hit "Ctrl" + 'r' then I am logged in at

[http://www.my-web-site.com/index.php/customer/account/index/](http://www.my-web-site.com/index.php/customer/account/index/)

which is correct. If I change, app/code/local/my_module/my_model/etc/config.xml to app/code/local/my_module/my_model/etc/config.xml.1 (in other words take out the observer), then Magento routes to the correct page,

I'm thinking that I need router information in config.xml. My current config.xml is:

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- The root node for Magento module configuration -->
<config>

  <!-- The module's node contains basic information about each Magento module -->
  <modules>

    <!-- This must exactly match the namespace and module's folder
      names, with directory separators replaced by underscores -->
    <MyCompany_LogIn>

      <!-- The version of our module, starting at 0.0.0 -->
      <version>0.0.0</version>

    </MyCompany_LogIn>
  </modules>

  <!-- Configure our module's behavior in the global scope -->
    <global>

        <!-- Defining models -->
        <models>

        <!-- Unique identifier in the model's node.
             By convention, we put the module's name in lowercase. -->
        <mycompany_login>

            <!-- The path to our models directory, 
             with directory separators replaced by underscores -->
          <class>MyCompany_LogIn_Model</class>

        </mycompany_login>
        </models>
    </global>

  <frontend>

    <!-- Defining an event observer -->
      <events>

        <!-- The code of the event we want to observe -->
        <customer_login>

            <!-- Defining an observer for this event -->
          <observers>

            <!-- Unique identifier within the catalog_product_save_after node.
                 By convention, we write the module's name in lowercase. -->
            <mycompany_login>

                <!-- The model to be instantiated -->
              <class>mycompany_login/observer</class>

              <!-- The method of the class to be called -->
              <method>wrtLogInCookie</method>

              <!-- The type of class to instantiate -->
              <type>singleton</type>

            </mycompany_login>
            </observers>
        </customer_login>
      </events>
  </frontend>
</config> 
```

I'm guessing that the login inside Magento uses an observer, and I'm interfering with it.

Besides the , I'm guessing that I could also accomplish a similar thing in the PHP Observer code. My observer is:

```
<?php

  /**
  * Our class name should follow the directory structure of
  * our Observer.php model, starting from the namespace,
  * replacing directory separators with underscores.
  * i.e. /www/app/code/local/MyCompany/LogIn/Model/Observer.php
  */

  class MyCompany_LogIn_Model_Observer extends Varien_Event_Observer
    {
    /**
    * Magento passes a Varien_Event_Observer object as
    * the first parameter of dispatched events.
    */
    public function wrtLogInCookie(Varien_Event_Observer $observer)
    {
      // Retrieve the product being updated from the event observer
      $customer = $observer->getEvent()->getCustomer();

      $email = $customer->getEmail();
      Mage::log('The E-mail is: ' . $email);

      $ran_nmbr = rand(); 
      Mage::log('The random number is: ' . $ran_nmbr);

      $crnt_dat = date("m-d-Y::H:i:s");
      Mage::log('The date is: ' . $crnt_dat);

      return $this;
    }
    }
?> 
```

I have read about routers, but the articles discussed it in terms of landing on some page before the extension is executed. As you can see, I need to land on the right page after the extension is executed.

Inside the PHP observer, I also tried redirects. For example,

```
Mage::app()->getResponse()->setRedirect(Mage::getUrl('customer/account/login')); 
```

Maybe I need a full URL address or something. I'm sure this is easy to fix, but my ignorance seems to be following me around. Please help if you know something about this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:27:30.030

不幸的是，它并不像简单的修复那么简单。你看，如果我们看`app/code/core/Mage/Customer/controllers/AccountController.php`, 在 中`loginPostAction()`，我们会看到`customer/session`单例触发了`customer_login`调用。但是，这里导致跳闸的原因是，在调用之后，回到控制器中，控制器调用`$this->_loginPostRedirect()`，因此您所做的所有重新路由工作都被覆盖了。

### 怎么修：

在说这不是那么简单之后，我确实碰巧看到了一个我们可以利用的作弊：

```
$session = Mage::getSingleton('customer/session');
$session->setBeforeAuthUrl($forwardToUrl); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T03:39:16.400

你说对了一部分。您遇到的问题是 Magento 的重定向机制适用于“最后一个说点什么”赢得哲学。如果您查看标准登录代码

```
app/code/core/Mage/Customer/controllers/AccountController.php 
```

您将看到该`loginPostAction`方法以调用结束

```
$this->_loginPostRedirect(); 
```

（最终）最终调用了一些看起来像这样的代码

```
$this->getResponse()->setRedirect($url); 
```

这可能是导致您出现问题的代码，也可能是其他问题。一般的问题是**最终**调用响应对象的`setRedirect`方法会赢。

我通常的解决方案是在我想执行重定向时设置某种全局标志（类上的静态变量，用 设置的标志`Mage::register`），然后为`controller_action_postdispatch`. 在这个观察者中，我寻找我设置的全局标志，如果找到，就在那里设置重定向。

这处理了 99% 的重定向情况，并且应该处理您的情况。在某些管理员登录案例以及 URL 重写的情况下，这将不起作用。

管理员登录包含一些**不**使用 Magento 响应对象的重定向代码

```
#File: app/code/core/Mage/Admin/Model/Session.php
...
header('Location: ' . $requestUri);
exit;    
... 
```

如果此重定向导致您出现问题，请在 Magento 之前创建一个`admin_session_user_login_success`使用 PHP 标头重定向的侦听器。

同样，如果 Magento 使用重写对象，则可能会运行以下代码

```
#File: app/code/core/Mage/Core/Model/Url/Rewrite.php
if ($isPermanent) {
    header('HTTP/1.1 301 Moved Permanently');
}

header('Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0');
header('Pragma: no-cache');
header('Location: ' . $url);
exit; 
```

（也就是说，重写代码很少会成为您的问题，因为标准 Magento 操作是在控制器调度**之前运行的）**

# r - text in plot from column, first argument of a ";" divided string

> ID：13612980
> 
> 赞同：0
> 
> 时间：2012-11-28T19:33:58.120
> 
> 标签：r

one quick question

picture a data frame like

```
data=data.frame(x=c(1,2,3), y=c(4,5,6), Genes=c("AHS;AKS;AHS","AHS;IO","HU")) 
```

so i want to plot x and y

```
plot(x,y) 
```

and do the label for the dots like this

```
text(data$x+0.2,data$y+0.2,labels=data$Genes) 
```

BUT i dont want to use all arguments from the genes column ONLY the first one (e.g. before the ";") Can u please help me with that? This is only an example, i have already read my data in with `read.delim`, so i cannot do a specific "read in" with string separation.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:08:40.063

根据我的评论，您可以使用`gsub`：

```
gsub('^([A-Z]+);.*$', '\\1', data$Genes) 
```

你也可以使用`strsplit`：

```
unlist(lapply(strsplit(data$Genes, ';'), '[', 1)) 
```

但这很恶心...

它还可能值得一提的是，该`stringr`包将大量这些字符串处理函数收集到一个具有可预测语法和名称的地方。

# java - Exception in thread "main" java.sql.SQLException: Missing IN or OUT parameter at index:: 25 What was this error meant

> ID：13612984
> 
> 赞同：0
> 
> 时间：2012-11-28T19:34:06.607
> 
> 标签：java, sql, oracle, jakarta-ee, jdbc

When I run the below program it producing the errors can any tell me the solution for this I need to pass the data to my database using the parameters in method InsTable :

```
 import java.io.*;
 import java.sql.*;
 import java.util.*;
public class InsertusrProf
{
public static Connection prepareConnection()throws ClassNotFoundException,SQLException
{
    String dcn="oracle.jdbc.driver.OracleDriver";
    String url="jdbc:oracle:thin:@JamesPJ-PC:1521:skypark";
    String usname="system";
    String pass="tiger";
    Class.forName(dcn);
    return DriverManager.getConnection(url,usname,pass);
}
public static void InsTable(String uname,String photo1,String video1,String    music1,String notes1,String messages1,String link,String frd,String cmt,String lik,String     ulik,String shrs,String qst,String answ,String updt,String thms,String wrd,String comm,String grp,String pgs,String ntfcn,String rqst,String tps,String tg)throws ClassNotFoundException,SQLException,FileNotFoundException
{
    StringBuilder sb=new StringBuilder(1024);;
    sb.append("insert into ").append(uname).append("(PHOTO,VIDEO,MUSIC,NOTES,MESSAGES,LINKS,FRIENDS,COMMENTS,LIKES,UNLIKES,SHARES,QSTNS,ANS,UPDATES,THEMS,WORDS,LANGUAGES,RELEGION,PRIVACY,HOBBIES,FAV,QULIFICATION,COMMUNITIES,GRPS,PAGES,NOTIFICATION,REQUESTS,TIPS,CITY,TAG)values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)");
    String stmnt=sb.toString();
    Connection con=prepareConnection();
    PreparedStatement ps=con.prepareStatement(stmnt);
    ps.setString(1,uname);

    File fl=new File(photo1);
    FileInputStream fis=new FileInputStream(fl);
    ps.setBinaryStream(2,fis,(int)fl.length());

    File fl1=new File(music1);
    FileInputStream fis1=new FileInputStream(fl1);
    ps.setBinaryStream(3,fis1,(int)fl1.length());

    File fl2=new File(video1);
    FileInputStream fis2=new FileInputStream(fl2);
    ps.setBinaryStream(4,fis2,(int)fl2.length());

    File fl3=new File(shrs);
    FileInputStream fis3=new FileInputStream(fl3);
    ps.setBinaryStream(12,fis3,(int)fl3.length());

    File fl4=new File(updt);
    FileInputStream fis4=new FileInputStream(fl4);
    ps.setBinaryStream(15,fis4,(int)fl4.length());

    File fl5=new File(notes1);
    FileReader fr=new FileReader(fl5);
    //BufferedReader r=new BufferedReader(notes1.getCharacterStream());
    ps.setCharacterStream(5,fr,(int)fl5.length());

    File fl6=new File(messages1);
    FileReader fr1=new FileReader(fl6);
    ps.setCharacterStream(6,fr1,(int)fl6.length());

    ps.setString(7,link);

    ps.setString(8,frd);

    File fl7=new File(cmt);
    FileReader fr2=new FileReader(fl7);
    ps.setCharacterStream(9,fr2,(int)fl7.length());

    ps.setString(10,lik);

    ps.setString(11,ulik);

    File fl8=new File(qst);
    FileReader fr3=new FileReader(fl8);
    ps.setCharacterStream(13,fr3,(int)fl8.length());

    File fl9=new File(answ);
    FileReader fr4=new FileReader(fl9);
    ps.setCharacterStream(14,fr4,(int)fl9.length());

    ps.setString(16,thms);

    File fl0=new File(wrd);
    FileReader fr5=new FileReader(fl0);
    ps.setCharacterStream(17,fr5,(int)fl0.length());

    ps.setString(18,comm);

    ps.setString(19,grp);

    ps.setString(20,pgs);

    File fls=new File(ntfcn);
    FileReader fr6=new FileReader(fls);
    ps.setCharacterStream(21,fr6,(int)fls.length());

    ps.setString(22,rqst);

    File fls1=new File(tps);
    FileReader fr7=new FileReader(fls1);
    //BufferedReader r=new BufferedReader(tps.getCharacterStream());
    ps.setCharacterStream(23,fr7,(int)fls1.length());

    ps.setString(24,tg);

    int i=ps.executeUpdate();

    System.out.println("<<<<<<<Record Inserted Successfully>>>>>>> Count :"+i);

    con.close();
}
public static void main(String args[])throws Exception
{
    String uname="james";
    String photo1="C:/Users/James P J/Documents/javaprog/img1.jpg";
    String video1="C:/Users/James P J/Documents/javaprog/How To Make 3D Text In Photoshop (ADOBE PHOTOSHOP CS6 TUTORIAL).flv";
    String music1="C:/Users/James P J/Documents/javaprog/Lelepadi.mp3";
    String notes1="C:/Users/James P J/Documents/javaprog/test.java";
    String messages1="C:/Users/James P J/Documents/javaprog/test.java";
    String link="aaaaa";
    String frd="bbbb";
    String cmt="C:/Users/James P J/Documents/javaprog/test.java";
    String lik="asadssfds";
    String ulik="zxzxxzcx";
    String shrs="C:/Users/James P J/Documents/javaprog/img1.jpg";
    String qst="C:/Users/James P J/Documents/javaprog/test.java";
    String answ="C:/Users/James P J/Documents/javaprog/test.java";
    String updt="C:/Users/James P J/Documents/javaprog/img1.jpg";
    String thms="bgfvdft";
    String wrd="C:/Users/James P J/Documents/javaprog/test.java";
    String langs="erdgdfgf";
    String rlgn="bngfhgfh";
    String prvc="zxcsdw";
    String hbs="bgnbvc";
    String fvt="tgfhfghjfgh";
    String qlf="mklkopi";
    String comm="mbnfchgeshgw";
    String grp="bgyeadb";
    String pgs="hfhfj";
    String ntfcn="C:/Users/James P J/Documents/javaprog/test.java";
    String rqst="ghfhgfh";
    String tps="C:/Users/James P J/Documents/javaprog/test.java";
    String cty="jjkhgjghjk";
    String tg="qwewr";
    InsTable(uname,photo1,video1,music1,notes1,messages1,link,frd,cmt,lik,ulik,shrs,qst,answ,updt,thms,wrd,comm,grp,pgs,ntfcn,rqst,tps,tg);
}
  } 
```

I tried to solve this error by making the mode as IN OUT in procedure what i created But the following error was not solved if any solution find please answer for it. The Error was :

```
 Exception in thread "main" java.sql.SQLException: Missing IN or OUT parameter at
 index:: 25
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java
:112)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java
:146)
    at oracle.jdbc.driver.OraclePreparedStatement.processCompletedBindRow(Or
 aclePreparedStatement.java:1681)
    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePrep
 aredStatement.java:3280)
    at oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePrepar
 edStatement.java:3368)
    at skypark.InsertusrProf.InsTable(InsertusrProf.java:99)
    at skypark.InsertusrProf.main(InsertusrProf.java:138)
 Press any key to continue . . . 
```

Please answer this if you know the solution.... Thanks in advance...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:35:29.157

```
java.sql.SQLException: Missing IN or OUT parameter at
 index:: 25 
```

意味着，你`ps.set....`不匹配的数量`?`

你总共有30个？但只有 24 ps.Set.... 语句。

# c# - 关闭浏览器后登录状态丢失

> ID：13612988
> 
> 赞同：1
> 
> 时间：2012-11-28T19:34:28.377
> 
> 标签：c#, asp.net

我有一个使用 FormsAuthentication 的登录系统，由于某种原因在关闭和打开浏览器时将我注销。这是我设置登录代码的方式：

```
 FormsAuthenticationTicket ticket;

                ticket = new FormsAuthenticationTicket(1, tbUsername.Text, DateTime.Now, DateTime.Now.AddYears(1), true, string.Empty, FormsAuthentication.FormsCookiePath);

            string encryptedTicket = FormsAuthentication.Encrypt(ticket);

            HttpCookie cookie = new HttpCookie(FormsAuthentication.FormsCookieName, encryptedTicket);
            cookie.HttpOnly = true;

            //Add the cookie to the request
            Context.Response.Cookies.Add(cookie); 
```

如您所见，我已将 cookie 设置为跨会话持久。这是我的 web.config 部分：

```
<authentication mode="Forms">
  <forms slidingExpiration="false" loginUrl="~/Login.aspx" name="BOIGAUTH" defaultUrl="~/Admin/Settings.aspx"/>
</authentication> 
```

此外，在此特定应用程序上禁用了 SessionState。有谁知道出了什么问题？

顺便说一句，即使我没有与网站交互，让应用程序浏览器打开超过 2 小时也让我保持登录状态。cookie 仅在关闭浏览器时丢失。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T19:39:21.797

如果您没有在 cookie 上设置过期时间，它将是仅浏览器会话 cookie，并在您关闭所有浏览器实例后消失。

您需要在 cookie 上设置一些过期时间，以使其与[Expires](http://msdn.microsoft.com/en-us/library/system.web.httpcookie.expires%28v=vs.100%29.aspx)属性保持一致。

```
HttpCookie cookie = new HttpCookie(
   FormsAuthentication.FormsCookieName, encryptedTicket);
cookie.HttpOnly = true;
cookie.Expires = DateTime.Now.AddMinutes(1000); 
```

旁注：确保您的浏览器未配置为在关闭时清除所有 cookie。

# android - Layout scroller issue in Android

> ID：13612989
> 
> 赞同：0
> 
> 时间：2012-11-28T19:34:36.043
> 
> 标签：android, android-layout, layout, scrollview

I have issue with my layout scroller. The layout below works fine. I have a gallery view which scrolls horizontally and below to that there is a list view scroller which scrolls vertically. Now, when I scroll down the list view at the bottom, the gallery view should scroll up so that the list view will occupy the whole screen with the list view alone. Again when I scroll up, the gallery view should come back at the top.Is there a way to handle this by hiding/showing the gallery view?

XML layout:

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="45dp"
        android:background="#c6c6c6"
        android:padding="10dp" >
        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            layout_alignParentLeft="true"
            android:text="Stores"
            android:textSize="20dp" />       
    </RelativeLayout>
    <Gallery
        android:id="@+id/gallery1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:drawSelectorOnTop="true"
        android:gravity="left"
        android:listSelector="@color/gridviewlistselector"
        android:paddingLeft="10dp"
        android:paddingRight="20dp"
        android:paddingTop="10dp"
        android:spacing="10dp" />
    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="45dp"
        android:background="#c6c6c6"
        android:padding="10dp" >
        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            layout_alignParentLeft="true"
            android:text="Products"
            android:textSize="20dp" />
    </RelativeLayout>
    <GridView
        android:id="@+id/product_grid"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/texture"
        android:drawSelectorOnTop="true"
        android:horizontalSpacing="5dp"
        android:listSelector="@color/gridviewlistselector"
        android:numColumns="2"
        android:stretchMode="columnWidth"
        android:verticalSpacing="5dp" />
</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:17:05.670

解决了滚动视图的问题。它工作正常。

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:focusableInTouchMode="true" >
<LinearLayout
        android:id="@+id/store"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="45dp"
        android:background="#c6c6c6"
        android:padding="10dp" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            layout_alignParentLeft="true"
            android:text="Stores"
            android:textSize="20dp" />
    </RelativeLayout>

    <Gallery
        android:id="@+id/gallery1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:drawSelectorOnTop="true"
        android:gravity="left"
        android:listSelector="@color/gridviewlistselector"
        android:paddingLeft="10dp"
        android:paddingRight="20dp"
        android:paddingTop="10dp"
        android:spacing="10dp" />

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="45dp"
        android:background="#c6c6c6"
        android:padding="10dp" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            layout_alignParentLeft="true"
            android:text="Products"
            android:textSize="20dp" />
    </RelativeLayout>

    <GridView
        android:id="@+id/product_grid"
        android:layout_width="wrap_content"
        android:layout_height="2000dp"
        android:background="@drawable/texture"
        android:drawSelectorOnTop="true"
        android:horizontalSpacing="5dp"
        android:listSelector="@color/gridviewlistselector"
        android:numColumns="2"
        android:stretchMode="columnWidth"
        android:verticalSpacing="5dp" />
</LinearLayout>

<LinearLayout>
</LinearLayout>

</ScrollView> 
```

# ruby-on-rails-3 - railscarrierwave上传图片或图片url错误

> ID：13612991
> 
> 赞同：0
> 
> 时间：2012-11-28T19:34:36.737
> 
> 标签：ruby-on-rails-3, carrierwave, image-uploading

我已经安装了carrierwave gem。我的模型是

```
class Rating < ActiveRecord::Base
  attr_accessible :pic_url, :rating

  mount_uploader :pic_url , ImageUploader
end 
```

我的看法是

```
<%= form_for @rating, :html => {:multipart=>true} do |f| %>

    <div class="field">
       <%= f.file_field :pic_url %>
    </div>

    <div class="field">
      <%= f.label :remote_pic_url_url, 'or image url' %>
      <br/>
      <%= f.text_field :remote_pic_url_url %>
    </div>

    <div class="actions">
      <%= f.submit 'Upload Picture', :class => 'btn btn-primary' %>
    </div>
<% end %> 
```

`Can't mass-assign protected attributes: remote_pic_url_url` 当我删除可选的图片 url 字段时，我收到一条错误消息，然后它可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:16:11.157

只需添加`remote_file_url`到`attr_accessible`.

# c++ - Getting USB device's iInterface from HidD_GetIndexedString in Visual C++?

> ID：13612993
> 
> 赞同：1
> 
> 时间：2012-11-28T19:34:41.300
> 
> 标签：c++, usb, hid

I need to get the iInterface of a USB Device, where I've located the device using it's Usage Page and Usage. We are using the HID classes of the WindowsDDK. If I know the index to use with HidD_GetIndexedString for iInterface, then I can easily get it. My problem is that I can't seem to find any way to programmatically figure out what index the iInterface will be at. Because we are limited to using a subset of the DDK, I can't go the route of using the UsbBuildGetDescriptorRequest. Is there a way to find this index via what's available in HidD... ?

For the record, I've also tried retrieving iProduct via the HidD_GetProductString - which often contains the iInterface, but it doesn't appear to be consistent - and some of the devices we've tried don't return the iInterface for that.

# dynamics-crm-2011 - MS CRM filtered view query works in management studio but not in SSRS report wizard

> ID：13612995
> 
> 赞同：0
> 
> 时间：2012-11-28T19:34:42.913
> 
> 标签：dynamics-crm-2011, reporting-services

I'm creating a report using SSRS BIDS. My query is not working in the report wizard although it is working in SQL Management Studio. I'm using SQL 2008 R2 and CRM 2011\. **Query** is below

```
SELECT     
FilteredBRE_licensee.bre_licensee AS Licensee, 
CONVERT(varchar, FilteredBRE_licensee.bre_agreementdate, 101) AS [Agreement Day],              
FilteredBRE_keyhistory.bre_keynumber_pk AS [Key], 
FilteredBRE_keyhistory.bre_numoflicenses AS [# of licenses], 
FilteredBRE_keyhistory.bre_billingdetailidname AS [Billing Detail], 
FilteredBRE_keyhistory.bre_sendtoaccountidname AS [Account Name], 
FilteredBRE_keyhistory.bre_assignedtocontactidname AS [Assigned To Contact], 
FilteredBRE_keyhistory.bre_sendtoaccountidname AS [Account Name], 
FilteredBRE_keyhistory.bre_sendtocontactidname AS [Send To Contact], 
FilteredBRE_keyhistory.bre_billingcyclename AS [Billing Cycle], 
FilteredBRE_licensee.bre_networkminimum AS [Network Minimum], 
FilteredBRE_licensee.bre_networkoption AS [Network Option], 
FilteredBRE_licensee.bre_pcoption AS [PC Option], 
FilteredBRE_licensee.bre_combinedminimum AS [Combined Minimum], 
FilteredBRE_licensee.bre_pcoptionname AS [PC Option Name], 
FilteredAccount.bre_billing_address_line1 AS [Account Address Line 1], 
FilteredAccount.bre_billing_address_line2 AS [Account Address Line 2], 
FilteredAccount.bre_billing_address_line3 AS [Account Address Line 3], 
FilteredAccount.bre_billing_address_city AS [Account Address City], 
FilteredAccount.bre_billing_address_stateorprovince AS [Account Address State], 
FilteredAccount.bre_billing_address_postalcode AS [Account Address Zip], 
FilteredAccount.bre_billing_address_countryname AS [Account Address Country], 
Billing_Contact.bre_billing_address_line1 AS [Billing Contact Address Line 1], 
Billing_Contact.bre_billing_address_line2 AS [Billing Contact Address Line 2], 
Billing_Contact.bre_billing_address_line3 AS [Billing Contact Address Line 3], 
Billing_Contact.bre_billing_address_city AS [Billing Contact Address City], 
Billing_Contact.bre_billing_address_stateorprovince AS [Billing Contact Address State], 
Billing_Contact.bre_billing_address_postalcode AS [Billing Contact Address Zip], 
Billing_Contact.bre_billing_address_countryname AS [Billing Contact Address Country], 
Send_To_Contact.bre_billing_address_line1 AS [Send To Contact Address Line 1], 
Send_To_Contact.bre_billing_address_line2 AS [Send To Contact Address Line 2], 
Send_To_Contact.bre_billing_address_line3 AS [Send To Contact Address Line 3], 
Send_To_Contact.bre_billing_address_city AS [Send To Contact Address City], 
Send_To_Contact.bre_billing_address_stateorprovince AS [Send To Contact Address State], 
Send_To_Contact.bre_billing_address_postalcode AS [Send To Contact Address Zip], 
Send_To_Contact.bre_billing_address_countryname AS [Send To Contact Address Country]

FROM
FilteredBRE_keyhistory 
INNER JOIN FilteredBRE_licensee ON FilteredBRE_keyhistory.bre_licenseeid =         FilteredBRE_licensee.bre_licenseeid 
INNER JOIN FilteredBRE_billingdetails ON FilteredBRE_licensee.organizationid =     FilteredBRE_billingdetails.organizationid 
INNER JOIN FilteredContact AS Billing_Contact ON FilteredBRE_billingdetails.bre_billingcontactid = Billing_Contact.contactid 
INNER JOIN FilteredAccount ON FilteredBRE_billingdetails.bre_customeraccountid = FilteredAccount.accountid 
INNER JOIN FilteredContact AS Send_To_Contact ON FilteredBRE_keyhistory.bre_sendtocontactid = Send_To_Contact.contactid
WHERE     (FilteredBRE_keyhistory.bre_iscurrent = 1) AND (FilteredBRE_keyhistory.bre_status = 1) 
```

**The error**

## TITLE: Microsoft SQL Server Report Designer

An error occurred while the query design method was being saved. An item with the same key has already been added.

* * *

BUTTONS:

## OK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:12:35.853

In Query Account Name is specified twice in select list
"FilteredBRE_keyhistory.bre_sendtoaccountidname AS [Account Name]". Please remove it or give different alias names. Then it will work fine... :)

# c# - 表单关闭时如何处理IE？

> ID：13612996
> 
> 赞同：3
> 
> 时间：2012-11-28T19:34:42.493
> 
> 标签：c#, watin, dispose

我一直在寻找这个问题的答案，但在任何地方都找不到。

我编写了一个使用 Watin 的应用程序。它工作正常，除了如果我在 Watin 完成所有操作之前单击“X”按钮关闭应用程序（我猜是在它被处理之前），它不会关闭。我的应用程序仍在运行（尽管表单不再存在），以及所有 IE 实例。

我想我应该使用 FormClosing 事件处理程序来杀死 Watin，但是由于我使用的是 using 语句，所以我不知道如何实现。这是我正在使用的一段代码：

```
using (var newBrowser = new IE("http://address.com"))
{
   AnalyzeTools FormActions = new AnalyzeTools(progressBar, labelProgress, labelProgressOutOf, richBoxKeywords.Lines.Count());

   Analyzer Analytic = new Analyzer(newBrowser, richBoxKeywords.Lines.ToList<string>(), FormActions);
   BeingAnalyzed = Analytic;

   Analytic.Initialize(textBoxLogin.Text, textBoxPass.Text);
   Analytic.HandleAnalysis();
} 
```

**编辑：** 好的，我做了更多的故障排除，这就是我想出的：该应用程序一直在工作，直到它完成，就这么简单。但是它并没有“正确”完成——它崩溃了，因为它无法访问不再存在的表单。

我相信我可以通过创建一个 FormClosing 或 FormClosed 事件来解决这个问题，当触发时，它会修改我的应用程序的行为。自定义“退出”方法。但是，我不会终止 Watin（我想做的事情），并且该应用程序仍将运行。

问题是，我真的不需要它来完成它应该做的所有动作。

我的终止想法是个好主意吗？有没有办法在不放弃使用语句的想法的情况下终止 Watin？

**编辑2：** 好的，我尝试了一些新东西。我创建了那个要求做出决定的消息框。我尝试使用 Application.Exit() 来终止，但它并没有像我希望的那样工作。该应用程序的 vshost 仍在运行（WatiN？）。所以我想我的问题是这样的：终止 WatiN 以删除 using 语句、使 IE 对象在类中的任何位置可用并在用户选择终止它时将其处置的唯一方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T12:02:52.827

您使用的是哪个版本的 WatIn

Watin 对这项工作有一个特定的处置方法

```
browser.Dispose(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T15:52:28.800

我认为您需要做的是创建一个 IE 实例，然后关闭该实例。当您再次需要它时，您可以重新创建实例。很久以前我在 Stackoverflow 上发现了这个，当时我遇到了一个类似的问题，但我再也找不到它来链接它了。

```
public sealed class BrowserIE
{

    static readonly IE _Instance = new IE();

    static BrowserIE()
    {}

    BrowserIE()
    { }

    public static IE Instance
    {
        get { return _Instance; }
    }
} 
```

使用上面的代码创建一个类。利用

```
var browser = BrowserIE.Instance("myUrl"); 
```

完成后使用：

```
browser.Close(); 
```

希望这可以帮助。如果您有任何其他问题，我会尽力提供帮助。

# actionscript-3 - 使用 AS3 编写角色动画

> ID：13612999
> 
> 赞同：2
> 
> 时间：2012-11-28T19:35:02.067
> 
> 标签：actionscript-3

我正在用 Flash 编写一个小游戏，

我正在编写角色的动画，

角色身体由不同的物体组成，例如，我有一个影片剪辑，它是头部、躯干、手臂、手、腿等。

我正在使用 AS3 制作动画，例如：

（仅编程 1 条腿运动）

```
public function walk(){
        if(_etapa==5){
            _etapa=1;
        }
        var etapa=_etapa;

        switch(etapa){

            case 1:
                Animar(musloDer,22,RetomarAnimacion);

            break;

            case 2:

                Animar(musloDer,0,RetomarAnimacion);
            break;

            case 3:
                Animar(musloDer,-22,RetomarAnimacion);
            break;

            case 4:
                Animar(musloDer,0,RetomarAnimacion);
            break;

        }

    } 
```

步行动画有 4 个阶段，

然后我有Animar功能：

```
private function Animar(parte, valor, callback){
        trace(direccion);
        if(direccion=="SE" || direccion=="NO"){

            valor=valor+45
            valor=Math.abs(valor);
            if(valor>180){
                valor=360-valor;
            }
            if(valor<0){

            }

            _scaleY = (1-(valor)/90);
            trace(_scaleY);
            _rotation = 0;

        }
        else if(direccion=="N"  || direccion=="S"){

            _scaleY = .5;
            _rotation = -valor;
        }

        _etapa++;
        TweenLite.to(parte, 2.5, {rotation:_rotation, scaleY:_scaleY,ease:Linear.easeNone, onComplete:caminar});

    } 
```

该功能将身体部位移动到我想要的程度，它还决定做什么，角色可以在 8 个方向上行走，前后左右，对角线，并且从等轴视图显示角色。所以动画功能根据角色的方向来决定做什么。

例如，如果角色是向右走，从侧面看，在这种情况下将一条腿旋转 22 度非常简单，只需 LeftLeg.rotation = 22; 很好，但是当角色面对镜头时，腿的旋转不是旋转，是 scaleY 属性的变化，例如，由于身体在等轴测视图中，正常位置的 1 条腿的 scaleY 为 0.5（或50%）当腿在 45º 时 scaleY 为 1，依此类推。

但我有一个问题，因为，例如，如果 LEG 初始位置是 0º（scaleY = 0.5）并且我想将它移动到 90º，90º 也将是 scaleY = 0.5，所以我的函数什么都不做，它从 0.5 补间到 0.5（无），它应该从 0.5 变为 0，然后再次变为 0.5。

我希望有人能理解我的问题。

最好的，

阿尔瓦罗

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-28T20:10:00.443

不知道这个有没有用...

[http://dragonbones.github.com/index.html#.ULZvXqUq54F](http://dragonbones.github.com/index.html#.ULZvXqUq54F)