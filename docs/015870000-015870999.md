# StackOverflow 问答 15870000-15870999

# .net - 播放框架和 WCF

> ID：15870002
> 
> 赞同：0
> 
> 时间：2013-04-08T01:42:15.137
> 
> 标签：.net, wcf, playframework, matlab-compiler

我有 2 个应用程序：一个播放应用程序和一个 WCF .net 应用程序。play应用需要WCF应用强大的计算能力（自带matlab编译器）。

我想知道实现这两个应用程序之间通信的最佳方式是什么。理想情况下，我希望播放应用程序将 JSON 对象发送到 WCF，WCF 进行计算并将结果发送回播放应用程序。

关于如何实施的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T07:13:57.147

我建议您使用 ASP.NET Web API 而不是 WCF 应用程序。REST 比 SOAP 具有更广泛的兼容性，在 .NET 中实现 RESTful 服务的最佳方式是 ASP.NET Web API。

您可以像这样在服务器中编写代码：

```
public class MathLabController : ApiController
{
    public MathResult Post(InputParam data)
    {
        // Do Calculation
        return new MathResult { Value = 3.14 };
    }
} 
```

然后使用 jQuery 从浏览器（在您的 Play Framework 应用程序中）调用它，如下所示：

```
$.ajax({
    url: 'http://localhost:8080/api/MathLab',
    type: 'POST',
    data:JSON.stringify(inputParam),            
    contentType: 'application/json;charset=utf-8',
    success: function (mathResult) {
        alert(mathResult.Value);
    }
}); 
```

您不需要在 Web API 中进行任何 JSON 序列化/反序列化。它是自动完成的。

# php - 使用 PHP Substr() 函数查询表

> ID：15870004
> 
> 赞同：0
> 
> 时间：2013-04-08T01:42:29.687
> 
> 标签：php, mysql

我有一个使用**WHERE**子句查询表的案例，其中我只想使用字段中的“一段字符串”来与我的字符串进行比较作为选择的条件。

在图片中，我只想使用**日期字段中的****月份**和**年份**来与. **`$indicator = 03/2013`**

 **知道如何执行查询，因此结果如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/KgVU5.png)

任何帮助将不胜感激。提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:45:30.183

在你的 mysql 查询中使用`LIKE`而不是`=`

参考：（[来源](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T01:51:54.127

最有可能的是，您没有处理表中的字符串，因为它最有可能是日期。如果你正在处理字符串，它是

```
SELECT * FROM table WHERE DATE LIKE '%03/2013'; 
```

其中 % 是过去 dos 时代中的 * 之类的通配符

对于实际的日期字段（最好使用），这是一个简单的

```
SELECT * FROM table WHERE DATE BETWEEN '01/03/2013' AND '31/03/2013' 
```

请注意，您需要为您的引擎遵循正确的日期格式，对于像 MySQL 这样的东西，您最好使用`'2013-03-01'`和`'2013-03-31'`

最困难的部分将是第一天和最后一天，但为此，我会查看[strtotime()](http://php.net/manual/en/function.strtotime.php)，它允许您放入诸如此类的东西`'Last day of the month'`。您必须正确格式化它并使用字符串，但是 strtotime() 可以做的事情相当简单。**

# jquery - 页面加载后如何增加页面上的所有字体大小？

> ID：15870005
> 
> 赞同：8
> 
> 时间：2013-04-08T01:42:29.813
> 
> 标签：jquery, css, font-size

页面加载后，有什么方法可以使用 JavaScript 或 jQuery 将页面上的所有字体大小增加一定百分比？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-06-26T04:48:55.867

缩放属性将影响所有其他属性，如尺寸。而且并非所有浏览器都支持它。最好的方法是减少使用一些 jQuery 代码，如下所示

```
$(document).ready(function(){
       $('*').each(function(){
       var k =  parseInt($(this).css('font-size')); 
       var redSize = ((k*90)/100) ; //here, you can give the percentage( now it is reduced to 90%)
           $(this).css('font-size',redSize);  

       });
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-08T01:56:50.970

缩放整个页面会产生预期的效果吗？（只是增加字体大小有点不同）。

[IE 5.5+、Opera、Safari 4 和 Chrome](http://www.fix-css.com/2011/05/css-zoom/)`zoom`支持CSS属性。对于 Firefox，您可以使用. 所以要缩放整个页面：`-moz-transform: scale(2)`

```
<body style="zoom:2; -moz-transform:scale(2);"> ... </body> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-08T01:45:48.103

您是否尝试过更改 body 元素的字体大小的 CSS？

```
// some_percent is the % increase... change accordingly
var current_size = $("body").css("font-size");
$("body").css("font-size", parseInt(current_size * some_percent) + "px"); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-08T03:09:44.223

另一种方法是在 em 中指定字体大小。然后在页面加载时显式或按百分比设置正文的字体大小。我在这里说明了这种方法 - [http://jsfiddle.net/uYjM5/](http://jsfiddle.net/uYjM5/) - 它使用以下 jQuery

```
$('body').css({'font-size':'16pt'}); 
```

和示例 CSS

```
body{font-size:12px;}
p{font-size:2em;} 
```

这通过设置基本字体大小来实现您所追求的效果。如果您使用的是 em，所有其他页面元素将已经具有基于 body 标记的相对字体大小。然而，Andy Jones 方法完全符合您的要求。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-25T12:46:19.677

我必须制作一个页面，它需要重新调整所有内容并保持比例（Adobe Edge Animate 中的交互式书籍类型网页）。这是我在文档准备好和调整大小时使用的函数。

```
function resizeWindow() {

     var h = $("#Stage_scene").height();
     var w = Math.floor(h*0.7685738684884714); //the number is the ratio
     var curentProcentege = (h/1170)*100; // 1170 is the page starting height
     $("#Stage_scene").width(w);
     $('body').css({'font-size':curentProcentege+'%'}); 

} 
```

# python - 阶乘不输出整数

> ID：15870007
> 
> 赞同：0
> 
> 时间：2013-04-08T01:42:38.010
> 
> 标签：python

我不是一个很有经验的程序员，但我只是用 Python 写了这个来尝试查找`e`，使用的定义`e`是 1/0 的总和！+ 1/1！+ 1/2！ETC...

我遇到的问题是`def factorial`不输出整数。我意识到它不会给出它是如何写的，但我不确定我怎么能做到。`total`是我希望从`def factorial`.

```
e = 0

def factorial(m):
    n = m - 1
    total = 1
    if n > 0:
        total = m
    while n > 0:
        total = total * n
        n = n - 1

for w in range(0,100):
    s = factorial(w)
    e = e + ( 1 / s )

print(e) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T01:44:25.710

```
def factorial(m):
    n = m - 1
    total = 1
    if n > 0:
        total = m
    while n > 0:
        total = total * n
        n = n - 1
    return total 
```

**编辑**：问题是，为了从中获取信息`factorial`，您必须使用 return 语句。之后的任何内容`return`都被评估，并用作`s`in的值`s = factorial(w)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T02:07:24.530

Feffernoose 的代码有效。但是为了提高您的情况下的性能，您最好使用“yield”语句来构建一个可迭代对象。

```
e = 0
def factorial(m):
    assert(m>1)
    current = 0
    total = 1
    while current<=m:
        yield total
        current += 1
        total *= current

for w in factorial(100):
    e = e + ( 1 / w )
print(e) 
```

更新：在带有“return”的解决方案中，您大约需要 O(n*n) 时间来计算阶乘值。但是有了“产量”，你只需要 O(n)。

# events - 鼠标事件不会在 kineticjs 形状上触发

> ID：15870009
> 
> 赞同：1
> 
> 时间：2013-04-08T01:42:52.073
> 
> 标签：events, kineticjs, shape

由于 Chrome 停止正确渲染，从 4.0.5 升级到 4.4.1。

但是，在 4.0.5 版本中，可以在 Kinetic.Shape 对象中绘制一条线并检测其上的鼠标事件。这似乎不再是这样了。即使使用推荐的 Canvas.fillStroke(this) 调用。

这是一些代码：

```
var myshape = new Kinetic.Shape({
    drawFunc: function(canvas) {
        var context = canvas.getContext();
        context.beginPath();
        context.setLineWidth(20);
        context.moveTo(100, 10);
        context.lineTo(100, 60);
        context.closePath();
        context.stroke(); //this does
        //canvas.fillStroke(this); //this doesn't bring the line on the screen
        //context.fill(); //this doesn't make the event work either
        context.beginPath();
        context.setLineWidth(10);
        context.moveTo(100, 60);
        context.lineTo(100, 120);
        context.closePath();
        //canvas.fillStroke(this); //this doesn't bring the line on the screen
        context.stroke(); //this does
        canvas.fillStroke(this);
    },
    draggable: true
});

myshape.on('mousedown', function(event){
    alert('mousedown');
}); 
```

这个小提琴中的一个例子：http: [//jsfiddle.net/GDQ6G/](http://jsfiddle.net/GDQ6G/)（似乎只在 Chrome 中呈现该行。不在 firefox 中）

此测试页面上的另一个示例：[http ://www.planetinaction.com/linetest.htm](http://www.planetinaction.com/linetest.htm)

很明显我做错了，因为这段代码没有在 Firefox 中呈现。有人可以告诉我这是在链接的小提琴中完成的吗？形状的文档显示了如何绘制单个项目。我需要绘制多个项目来形成我的自定义形状，如这个简化的两行示例所示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:37:05.423

事实证明，根据 Eric Rowells 的回答，一个形状只能包含一条路径。这是一个遗憾，因为 4.0.5 版本能够处理多个路径，直到谷歌在 Chrome 中改变了一些时髦的东西。

无论如何，我一直在寻找的答案在 KineticJS 小组中。代码变得更加复杂，但它可以工作。

```
var stage = new Kinetic.Stage({
                container: 'container',
                width: $('#container').width(),
                height: $('#container').height()
            });
            var layer = new Kinetic.Layer('spline');
            var group = new Kinetic.Group({
                draggable: true,
            });
            group.add(new Kinetic.Shape({
                drawFunc: function(canvas) {
                    var context = canvas.getContext();
                    context.beginPath();
                    context.moveTo(100, 10);
                    context.lineTo(100, 60);
                    context.closePath();
                    canvas.stroke(this);
                },
                strokeWidth: 6,
            }));

            group.add(new Kinetic.Shape({
                drawFunc: function(canvas) {
                    var context = canvas.getContext();
                    context.beginPath();
                    context.moveTo(100, 60);
                    context.lineTo(100, 120);
                    context.closePath();
                    canvas.stroke(this);
                },
                strokeWidth: 20,
            }));

            group.on('mousedown', function(event){
                    alert('mousedown');
            });

            group.on('mouseover', function(event){
                    alert('mouseover');
            });
            layer.add(group);   
            stage.add(layer); 
```

这是小提琴中的代码：http: [//jsfiddle.net/QcsBH/](http://jsfiddle.net/QcsBH/)

我在文档中找不到关于组事件处理的参考资料，但我惊喜地看到一个组处理其中所有成员的事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T04:04:28.350

每个 KineticJS 形状应该只有一个 beginPath() 和一个 closePath() 执行。您也不应该使用上下文直接描边或填充。您需要使用与 KineticJS 画布渲染器相关的方法：

canvas.stroke(这个); canvas.fill(这个); canvas.fillStroke(this);

这是绘制自定义形状的示例：

[http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shape-tutorial/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shape-tutorial/)

如果您在该教程中将一个简单的侦听器绑定到三角形，则事件会正确触发（您可以直接在页面上修改代码）

# c# - 编码 XML 属性中的十六进制字符

> ID：15870011
> 
> 赞同：1
> 
> 时间：2013-04-08T01:43:02.420
> 
> 标签：c#, xml, serialization, encryption

我正在使用以下方法在将数据存储到数据库之前对其进行加密。数据将在检索时转换为 XML，并传递给数据访问层以反序列化为已知的业务实体对象。

问题是由于编码，数据中有一些十六进制字符，这使得 xml 成为无效的 xml 文档，因此无法反序列化。

我应该如何解决这个问题？

```
public static string EncryptStringAES(string plainText, string sharedSecret)
{
    if (string.IsNullOrEmpty(plainText))
        throw new ArgumentNullException("plainText");
    if (string.IsNullOrEmpty(sharedSecret))
        throw new ArgumentNullException("sharedSecret");

    string outStr = null;                       // Encrypted string to return
    RijndaelManaged aesAlg = null;              // RijndaelManaged object used to encrypt the data.

    try
    {
        // generate the key from the shared secret and the salt
        Rfc2898DeriveBytes key = new Rfc2898DeriveBytes(sharedSecret, _salt);

        // Create a RijndaelManaged object
        aesAlg = new RijndaelManaged();
        aesAlg.Key = key.GetBytes(aesAlg.KeySize / 8);

        // Create a decryptor to perform the stream transform.
        ICryptoTransform encryptor = aesAlg.CreateEncryptor(aesAlg.Key, aesAlg.IV);

        // Create the streams used for encryption.
        using (MemoryStream msEncrypt = new MemoryStream())
        {
            // prepend the IV
            msEncrypt.Write(BitConverter.GetBytes(aesAlg.IV.Length), 0, sizeof(int));
            msEncrypt.Write(aesAlg.IV, 0, aesAlg.IV.Length);
            using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
            {
                using (StreamWriter swEncrypt = new StreamWriter(csEncrypt))
                {
                    //Write all data to the stream.
                    swEncrypt.Write(plainText);
                }
            }
            outStr = Convert.ToBase64String(msEncrypt.ToArray());
        }
    }
    finally
    {
        // Clear the RijndaelManaged object.
        if (aesAlg != null)
            aesAlg.Clear();
    }

    // Return the encrypted bytes from the memory stream.
    return outStr;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-08T02:11:59.717

我通常使用[HttpUtility.HtmlEncode](http://msdn.microsoft.com/en-us/library/73z22y6h.aspx)来转义 XML 的值。

# java - 为什么 eclipse 在我的 return 语句中给我一个错误？

> ID：15870014
> 
> 赞同：0
> 
> 时间：2013-04-08T01:43:10.973
> 
> 标签：java, eclipse, return

当密钥存在于 HashMap 中时，我试图让方法 selectVMwareServer 返回一个 VMwareServer 对象。但是 Eclipse 不喜欢我放置退货声明的位置。为什么是这样？是因为方法必须返回一个对象吗？

这是我的代码；

```
package configFS;

import java.util.HashMap;
import java.util.Map;

public class Config {

    private Map <String, Object> config;

    public Config() {

        /*
         * This will create a new configuration everytime we create a new instance of Config.class
         * By using the generics of String and Object I can link a name tag to any object needed.
         */
        config = new HashMap <String, Object> ();

    }

    public void addVMwareServer(String par1) {

        config.put(par1, new VMwareServer());

    }

    public void removeVMwareServer(String par1) {

        config.remove(par1);

    }

    public VMwareServer selectVMwareServer(String par1) {

        if (config.containsKey(par1)) {

            return (VMwareServer) config.get(par1);

        }

        return null;

    }

} 
```

**注意：**这是一项正在进行中的工作！

为了使 eclipse 静音，我让它添加“return null;”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T01:45:56.840

如果一个方法有一个返回类型，它应该总是有一个返回语句。根据您的代码，如果不满足“if”条件，那么它将永远不会进入该条件，并且该 return 语句将永远不会被执行。

这就是为什么你必须在“if”条件之外有 return 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T03:03:35.283

> 是因为方法必须返回一个对象吗？

基本上，是的。

或者更准确地说，程序的每个“正常终止”路径都必须返回一个可以分配给方法返回类型的值。

* * *

*请注意，实际上完全可以在没有*`return`语句的情况下实现非 void 方法；例如

```
 public int test() {
        throw new SomeUncheckedException(...);
    } 
```

...但这通常没有用。编译器的路径分析代码可以确定该`test`方法不能越过`throw`语句……因此，`return`它后面的语句是不必要的。（确实，添加一个会导致编译错误。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T02:21:30.033

如果您的 if 语句（包含密钥），您可以指定要返回的内容。考虑一下如果您的 if 语句不成立并被忽略时该怎么办。该方法必须返回一些东西，这就是您的“Null”返回语句派上用场的地方。例如：

公共布尔选择VMwareServer（字符串par1）{

```
 if (config.containsKey(par1)) {

        return true; //(VMwareServer) config.get(par1);

    }

    return false; // If I dont have this in place, Java has no idea what to do hence it HAS to return something.

} 
```

更好的解决方案可能是：

创建新字段说 X，

```
public void selectVMwareServer(String par1) {

    if (config.containsKey(par1)) {

        X =  (VMwareServer) config.get(par1);

    }
    else//do nothing, 

} 
```

在此之后，您可以使用 X 但是您需要解决您的问题。希望它有点清楚..

# ios - PickerView 小时并显示在标签中

> ID：15870017
> 
> 赞同：0
> 
> 时间：2013-04-08T01:44:00.537
> 
> 标签：ios, uilabel, uipickerview

我想知道如何创建选择器视图小时，然后我选择的内容出现在标签中....然后将这个小时置于条件（IF）中。？？

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:41:04.260

浏览这个示例项目------- [http://www.dosomethinghere.com/wp-content/uploads/2010/11/DatePickerExample.zip](http://www.dosomethinghere.com/wp-content/uploads/2010/11/DatePickerExample.zip)

检查你可以使用标签的 .text 例如 if(date label.text==.......) 希望这会有所帮助......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:09:32.853

试试这个：在 .h 文件中定义这些变量：

```
UIPickerView       *picker;
NSArray            *HOURS_24;
UILabel            *hourLabel; 
```

在 viewDidLoad 中：

```
HOURS_24=[[NSArray alloc]  initWithObjects: @" 8:00", @" 9:00", @" 10:00", @" 11:00",
          @" 12:00", @" 13:00", @" 14:00", @" 15:00", @" 16:00", @" 17:00", @" 18:00", nil];

//Add picker in XIB or add it using code like below.
picker=[[UIPickerView alloc]initWithFrame:CGRectMake:(100,100,100,100)];
picker.delegate=self;
[self.view addSubview:picker];

hourLabel=[[UILable alloc]initWithFrame:CGRectMake: (20,100,50,20)];
[self.view addSubview:hourLabel];
hourLabel.text=@"This is hour label"; 
```

添加这些功能

```
#pragma mark PickerView DataSource

- (NSInteger)numberOfComponentsInPickerView:
  (UIPickerView *)pickerView
 {
    return 1;
 }
 - (NSInteger)pickerView:(UIPickerView *)pickerView
  numberOfRowsInComponent:(NSInteger)component
 {
    return [HOURS_24 count];
 }
 - (NSString *)pickerView:(UIPickerView *)pickerView
    titleForRow:(NSInteger)row
    forComponent:(NSInteger)component
 {
    return [HOURS_24 objectAtIndex:row];
 } 
```

实现委托：

```
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
  inComponent:(NSInteger)component
{  
  hourLabel.text=[HOURS_24 objectAtIndex:row];
} 
```

# system - 什么是防止用户进程独立使用陷阱指令？

> ID：15870022
> 
> 赞同：5
> 
> 时间：2013-04-08T01:44:16.983
> 
> 标签：system, system-calls

系统调用的存根例程通过陷阱指令切换到内核模式。什么是防止用户进程独立使用trap指令切换到内核态，切换后执行恶意代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T02:06:08.587

陷阱指令不是简单地将 CPU 模式从用户切换到内核；它实际上做了以下事情：

它切换模式并将 CPU 指令指针跳转到内核中的指定中断处理程序，因此从技术上讲，一旦您调用陷阱指令，您的代码就不会被执行。

让我们以 x86 + FreeBSD 为例：
在所有操作系统中，都有一个叫做中断向量的东西，它基本上是一个中断处理程序列表，如果发生 IO，中断处理程序 0xwhatever 继续，如果你想将 CPU 陷入内核模式, 中断处理程序 0x80 应该被调用；它是如何被调用的？
`int 0x80`
完成此操作后，CPU 将执行处理程序#80（粗略地说），它会读取某些特定寄存器以确定下一步要做什么（通常，您设置希望内核为您执行的服务类型，然后寄存器中的参数）。

所以在这里，你可以切换到内核模式的唯一方法是通过`int`指令（也有指令切换，方式略有不同但概念成立），你必须指定一个特定的中断，以便 CPU 跳转到适当的代码，然后作为内核一部分的代码将完成它应该做的工作，并在将模式返回到用户模式后返回到您的代码；你可以`int`不带任何号码直接调用，但这不会只是将模式转移到内核中，默认情况下它会调用中断处理程序 0，不管它是什么。

其他操作系统/CPU 会使用不同的指令，但一般来说，机制是相同的。

# c++ - boost::smart_ptr 的 C++ 非侵入式 boost 序列化

> ID：15870024
> 
> 赞同：4
> 
> 时间：2013-04-08T01:44:31.950
> 
> 标签：c++, boost, shared-ptr, boost-serialization

我正在尝试序列化一个无法使用**boost::serialization**修改的自定义类，并且我需要将逻辑/计算代码与序列化部分分开。它有一些我必须序列化的受保护和私有字段，其中一些是其他类的**boost::shared_ptr**。

就像是：

```
// computational classes
class A
{
public:
   A(int a) : m_val(a) {}
private:
   int m_val
};

class B
{
public:
   B(a) : m_ptr(new A(a)) {}
private:
   boost::shared_ptr< A > m_ptr;
}; 
```

我发现一个简单的解决方法是序列化类 A，只在其定义中添加一个“朋友类”：

```
class A_ser;
class A
{
   friend class A_ser;
   //...
}; 
```

并添加一个代理类来序列化它，它引用了类 A 的字段：

```
class A_ser
{
public:
   A_ser(A & a) : m_val(A.m_val) {}
   template< class Archive >
   void serialize(Archive & ar, const unsigned int version)
   {
      ar & m_val;
   }
private:
   int & m_val;
};

namespace boost {
namespace serialization {
template< class Archive >
void serialize(Archive & ar, A & a, const unsigned int version)
{
   A_ser sa(a);
   ar & sa;
}
} // namespace serialization
} // namespace boost 
```

因此，当在 A 上调用序列化方法时，将使用 A_ser 的方法。

当我尝试对 B 类执行相同操作时会出现问题，因为在其反序列化中它尝试调用未定义的构造函数 A()：

> boost/serialization/access.hpp:132: 错误: 没有匹配函数调用'A::A()'

如果我尝试为 A 的构造函数添加一个默认参数，它只会初始化一个全新的空类。

哦，我正在使用 boost 1.53.0。

提前谢谢了。

**编辑：解决方案（它是如此简单..）**

只需修改 *_ser 引用

```
class A_ser
{
public:
   A_ser(A & a) : m_a(A) {}
   template< class Archive >
   void serialize(Archive & ar, const unsigned int version)
   {
      ar & m_a.m_val;
   }
private:
   A & m_a;
}; 
```

并添加

```
template< class Archive >
void load_construct_data(Archive & /*ar*/, A * t, unsigned /*v*/)
{
   ::new(t) A(0);
} 
```

问题已解决（感谢 Arun）！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T02:27:04.603

您可以使用[boost 方法使用序列化非默认可构造对象](http://levsblog.wordpress.com/2008/11/18/serializing-non-default-constructible/)来解决问题。谷歌搜索 save_construct_data 和 load_construct_data 使用示例。

另请查看[将序列化拆分为 Save/Load](http://www.boost.org/doc/libs/1_53_0/libs/serialization/doc/serialization.html#splitting)。

# c++ - 在 unordered_set 中重载 == 运算符

> ID：15870026
> 
> 赞同：3
> 
> 时间：2013-04-08T01:44:39.463
> 
> 标签：c++, c++11, operator-overloading, unordered-set

我正在尝试创建一个`unordered_set`如下`Intervals`定义的：

```
struct Interval {
  unsigned int b;  //begining index
  unsigned int e;  //end index
  bool updated;   //true if concat.  initially false
  int patternIndex;  //pattern index. valid for single pattern
  int proteinIndex;   //protein index.  for retrieving the pattern
};

struct Hash {
  size_t operator()(const Interval &interval) const;
};

struct IntervalEquality {
  bool operator == (Interval const &lhs, Interval const &rhs);
};

bool IntervalEquality::operator == (Interval const &lhs, Interval const &rhs){
  return ((lhs.b == rhs.b) && (lhs.e == rhs.e) && (lhs.proteinIndex == rhs.proteinIndex));
}

size_t Hash::operator()(const Interval &interval) const{
  string temp = to_string(interval.b) + to_string(interval.e) + to_string(interval.proteinIndex);
  return hash<string>()(temp);
}

unordered_set<Interval, Hash> test; 
```

在这里，我`==`在我的头文件中声明运算符并在我的 .cpp 文件中定义它（就像我成功为其他运算符所做的那样）。当我编译上面的代码时，我得到关于`==`只需要一个参数的运算符的错误。例如，`'bool IntervalEquality::operator==(const Interval&, const Interval&)' must take exactly one argument`

如果我尝试采用替代路线并在我的头文件中声明*和*定义，如下所示：`==`

```
bool operator == (Interval const& lhs, Interval const& rhs){
    return (lhs.b == rhs.b) && 
           (lhs.e == rhs.e) && 
           (lhs.proteinIndex == rhs.proteinIndex); 
} 
```

我收到关于多个定义的错误`==`

有谁知道我该如何解决这个问题？非常感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T01:52:37.973

将 更改`IntervalEquality::operator==`为`operator()`。然后像这样定义你的`unordered_set`：

```
unordered_set<Interval, Hash, IntervalEquality> test; 
```

问题是您将命名空间范围`operator==`定义为成员函数。命名空间范围相等运算符接受 2 个参数并比较它们。成员函数相等运算符采用 1 个参数并将其与所属的类进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T02:17:20.627

把它放在标题中：

```
bool operator== (Interval const& lhs, Interval const& rhs); 
```

将其放入 .cpp 文件中：

```
bool operator== (Interval const& lhs, Interval const& rhs)
{
  return (lhs.b == rhs.b) && 
         (lhs.e == rhs.e) && 
         (lhs.proteinIndex == rhs.proteinIndex); 
} 
```

虽然您可以创建一个等式 lambda，但在这种情况下，这种等式对于一般等式是有意义的。

我唯一要注意的是，你`==`不是完全平等的。如果一个`Interval`仅与另一个不同`updated`或`patternIndex`与另一个不同并且有哈希冲突，它们将默默地覆盖另一个。

# jquery - 此代码是 jQuery 选择器还是其他代码？

> ID：15870028
> 
> 赞同：1
> 
> 时间：2013-04-08T01:44:48.200
> 
> 标签：jquery, html, canvas

这段代码是什么意思？

```
var item=$("<canvas>").attr("width", width).attr("height", height)[0]; 
```

其实我很好奇这种语法：

```
$("<canvas>") 
```

这是否意味着创建一个画布元素？它似乎不是 jQuery 中的选择器，对吧？如果我想选择一个画布元素，我应该使用

```
$("canvas") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T01:46:54.400

正确，这意味着创建一个`canvas`元素。`jQuery`函数重载：

*   如果传递**了一个选择器**，它会选择那些元素。
*   *如果传递**一个 HTML 字符串**，它会创建一个元素。*
*   如果传递**了一个 jQuery 对象**，它会复制那个 jQuery 对象。
*   如果传递**一个数组**，它会创建一个代表这些对象的 jQuery 对象。
*   如果传递**了一个元素**，它会使用该元素创建一个 jQuery 对象。
*   如果传递**了一个函数**，它会注册以在页面加载时调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T01:48:23.087

`$("canvas")`确实意味着选择所有画布标签。

`$("<canvas>")`意味着创建一个画布标签并返回一个对已选择该新创建标签的 jQuery 对象的引用。值得注意的是，它还没有添加到文档中，因此您确实需要执行以下操作：

```
$('<canvas>').appendTo('body'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T01:48:31.170

是的，该[`jQuery()`方法可用于从原始 HTML 创建 DOM 元素](http://api.jquery.com/jQuery/#jQuery-element)。这也将宽度/高度属性分配给新创建的元素。您确实会选择它`$("canvas")`。请注意，此元素不会附加到 DOM。

# php - 查询似乎返回结果但具有空值

> ID：15870038
> 
> 赞同：0
> 
> 时间：2013-04-08T01:46:45.007
> 
> 标签：php, mysql

我有一个使用 MySQL 数据库进行用户注册和登录的 Android 项目。注册部分按预期工作。登录部分没有。事情是这样的，他们都使用相同的 EXACT 查询来检查电子邮件地址是否已经存在。注册检查以确保用户在存储用户之前尚未使用该电子邮件地址。登录使用相同的查询来提取加密密码 + salt 的哈希值，以与 POSTED 密码哈希值的哈希值进行比较。当登录部分进行查询时，它至少返回一行，但似乎所有值都为空。这是查询位置的代码：

```
// Check if user already exists.
$sql = sprintf("SELECT * FROM users WHERE email = '%s'", mysql_real_escape_string($email));
$result = mysql_query($sql) or die(mysql_error());
$no_of_rows = mysql_num_rows($result);
if ($no_of_rows > 0) {
    // User exists.
    $stored_salt = $result["salt"];
    $stored_password = $result["encrypted_password"];
    $hash = crypt($password_hash, '$2a$10$'.$stored_salt);
    // Check for password equality.
    if ($stored_password == $hash) {
        // User authentication details are correct.
        $response["success"] = 1;
        $response["uid"] = $result["unique_id"];
        $response["user"]["name"] = $result["name"];
        $response["user"]["email"] = $result["email"];
        $response["user"]["created_at"] = $result["created_at"];
        $response["user"]["updated_at"] = $result["updated_at"];
        echo json_encode($response);
    } else {
        // User authentication failed.
        // echo JSON with error = 1.
        $response["error"]     = 2;
        $response["error_msg"] = "Incorrect password!";
        echo json_encode($response);
    }
} else {
    // User does not exist.
    $response["error"] = 1;
    $response["error_msg"] = "Email address not found.";
} 
```

返回的 JSON 对象显示“密码不正确！”，所以我让它在 JSON 对象中包含正在检查的密码，并且该密码为空。我的假设是查询没有返回结果，但它通过了 no_of_rows > 0 测试，所以它返回了一些东西。所以我在返回的 JSON 对象中包含了结果的其他部分，它们也为空。我还通过我网站上的 phpmyadmin 检查了查询（它托管在 1and1 上），查询在那里工作。有人有任何见解吗？我是 PHP 和 MySQL 的新手，所以我在这里边学习边学习，但我有点碰壁了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T01:50:34.850

您需要调用`mysql_fetch_assoc`或`mysql_fetch_row`从行集中获取实际行。

```
$sql = sprintf("SELECT * FROM users WHERE email = '%s'", mysql_real_escape_string($email));
$result = mysql_query($sql) or die(mysql_error());
$no_of_rows = mysql_num_rows($result);
if ($no_of_rows > 0) {
    // User exists.
    $row = mysql_fetch_assoc($result);
    $salt = $row['salt']; 
```

# ruby-on-rails - Friendly_Id 错误，未初始化的常量

> ID：15870042
> 
> 赞同：3
> 
> 时间：2013-04-08T01:47:32.410
> 
> 标签：ruby-on-rails, ruby, friendly-id

我有一个 Rails 应用程序，它拥有拥有“项目”的 Devise 创建的用户。这些项目有显示视图，我希望这些显示视图具有更多对 SEO 友好的 URL。我观看了 Friendly_Id gem 的 railscast，实现了，但是当我去创建一个新的“项目”时，它给了我这个错误：

```
uninitialized constant Item::FriendlyId 
```

当我尝试单击一个项目时，它给了我这个错误：

```
undefined method `key?' for nil:NilClass 
```

我运行了捆绑安装。宝石不在宝石资产中。

这是我的项目模型：

```
 1 class Item < ActiveRecord::Base                                                 
 2 #  include Tire::Model::Search                                                  
 3 #  include Tire::Model::Callbacks                                               
 4                                                                             
 5   extend FriendlyId                                                             
 6   friendly_id :title, use: :slugged                                                                                        
 7                                                                                 
 8   attr_accessible :content, :user_id, :title, :price, :image                    
 9   validates :content, :length => { :maximum => 140 }                            
10   belongs_to :user                                                              
11   delegate :email, :city, :state, to: :user                                     
12                                                                                 
13   def self.search(search)                                                       
14     if search                                                                   
15       where('title ILIKE ? OR content ILIKE ?', "%#{search}%", "%#{search}%")   
16     else                                                                        
17       scoped                                                                    
18     end                                                                         
19   end                                                                           
20                                                                                 
21   def location                                                                  
22     [city.to_s.camelcase, state.to_s.upcase].reject(&:blank?).join(", ")        
23   end                                                                           
24                                                                                 
25   has_attached_file :image, styles: {                                           
26     thumb: '100x100>',                                                          
27     square: '200x200#',                                                         
28     medium: '300x300>',                                                         
29     large: '600x600#'                                                           
30   }
31 end 
```

这是我的用户模型：

```
1 class User < ActiveRecord::Base                                                 
2   # Include default devise modules. Others available are:                       
3   # :token_authenticatable, :confirmable,                                       
4   # :lockable, :timeoutable and :omniauthable                                   
5   devise :database_authenticatable, :registerable,                              
6          :recoverable, :rememberable, :trackable, :validatable                  
7                                                                                 
8   # Setup accessible (or protected) attributes for your model                   
9   attr_accessible :email, :password, :password_confirmation, :remember_me, :username,           :city, :state, :phone
10   has_many :items                                                               
11                                                                                 
12   validates_presence_of :username                                               
13   validates_uniqueness_of :username                                             
14                                                                                 
15   def to_param                                                                  
16     username                                                                    
17   end                                                                                                                        
18                                                                                 
19   after_create :send_welcome_email                                              
20                                                                                 
21   private                                                                       
22                                                                                 
23   def send_welcome_email                                                        
24     UserMailer.welcome_email(self).deliver                                      
25   end                                                                           
26                                                                                 
27 end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-26T20:00:56.770

我也遇到了这个问题。为了解决我写了一个 rake 任务......

```
require 'rake'
namespace :posts do
  desc "Save all posts"
  task :save => :environment do
    puts "--- Saving posts ---"
    Post.find_each(&:save)
    puts "All posts have been saved.\n"
  end
end 
```

...`rake posts:save`从 my_app/ 目录执行并`touch tmp/restart.txt`重新启动 Web 服务器。

**更新**：刚刚在我的生产网站上运行了这个。我必须使用，`rake posts:save RAILS_ENV=production`否则 rake 引发了它找不到数据库适配器的异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-31T22:14:43.583

我遇到过同样的问题。我尝试了`:require => 'friendly_id'`以及服务器重新启动。它似乎已经解决了这个问题。

谢谢@StuartM 和@fmendez

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T16:41:26.153

This is what worked:

Migrate DB to include Slugs on Items, INDEXED Run Migration Rails Console: Item.find_each(&:save)

Then pushed to Heroku and did the same. Worked.

# testing - 黄瓜功能写反馈

> ID：15870044
> 
> 赞同：0
> 
> 时间：2013-04-08T01:47:36.307
> 
> 标签：testing, ruby-on-rails-3.1, cucumber, bdd

所以我正在尝试使用 Ruby on Rails 开发一个网站，而我对 BDD 的概念并不陌生。我已经完成了 Ruby on Rails 教程和 RSpec 书，并开始自己尝试，但希望能获得一些关于初始功能的反馈。

```
Feature: User Signup

As a user (anyone who may use the system, to include persons outside the unit)
I want to sign up 
So that I can access the website

Scenario: sign up
    Given I have not yet signed up
    When I go the signup page
    Then I should be redirected to the signup page 
```

我在正确的轨道上吗..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:55:10.567

是的，如果这是用户访问表单的方式，我认为引用“我单击注册链接”是有意义的。这个场景提出的另一个问题与整个用户旅程有关——用户将在哪里点击该链接？对我来说，这个场景也应该记录这个方面。

我还建议将不相关的技术术语排除在场景之外。从用户故事关注的用户的角度来看，场景应该涵盖业务规则或用户旅程的最重要方面。因此，从用户的角度来看，“重定向”一词的意义并不大，如果页面被重定向或者他们只是跟随一个普通的链接，这对他们来说并不重要。

您可能希望考虑以下内容：

```
Scenario: sign up
   Given I have not yet signed up
     And I am on the homepage
    When I click the signup link
    Then I should be on the signup page 
```

# python - 从字符串中去除有序的字符序列

> ID：15870053
> 
> 赞同：12
> 
> 时间：2013-04-08T01:48:33.457
> 
> 标签：python, python-3.x, strip

我最近意识到`strip`Python 的内置函数（以及它的子元素`rstrip`and `lstrip`）不会将作为参数提供给它的字符串视为有序的字符序列，而是将其视为一种字符的“容器”：

```
>>> s = 'abcfooabc'
>>> s.strip('abc')
'foo'
>>> s.strip('cba')
'foo'
>>> s.strip('acb')
'foo' 
```

等等。

有没有办法从给定的字符串中去除*有序*的子字符串，以便在上面的示例中输出会有所不同？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T01:58:51.307

当我第一次开始时，我遇到了同样的问题。

试试[str.replace](http://docs.python.org/3.3/library/stdtypes.html#str.replace)吗？

```
>>> s = 'abcfooabc'
>>> s.replace("abc", "")
0: 'foo'
>>> s.replace("cba", "")
1: 'abcfooabc'
>>> s.replace("acb", "")
2: 'abcfooabc' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T01:52:57.193

我不知道内置的方式，不，但它很简单：

```
def strip_string(string, to_strip):
    if to_strip:
        while string.startswith(to_strip):
            string = string[len(to_strip):]
        while string.endswith(to_strip):
            string = string[:-len(to_strip)]
    return string 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-01-23T05:28:35.940

从 Python 3.9 开始，您可以使用[str.removeprefix](https://docs.python.org/3/library/stdtypes.html#str.removeprefix)和[str.removesuffix](https://docs.python.org/3/library/stdtypes.html#str.removesuffix)。

从文档：

```
'TestHook'.removeprefix('Test')  # >> 'Hook'
'MiscTests'.removesuffix('Tests')  # >> 'Misc' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-29T14:31:13.060

我很惊讶`re.sub`还没有提到：

```
>>> re.sub("^abc", "", "abcfooabc") # ^ regex operator matches the beginning of a string
'fooabc'
>>> re.sub("^abc|abc$", "", "abcfooabc") # | string begins with abc or (|) ends with abc
'foo'
>>> re.sub("abc$", "", "abcfooabc") # | string begins with abc or (|) ends with abc
'abcfoo' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T01:58:31.350

这个呢： `s.split('abc')`。

那返回：`['', 'foo', '']`。

因此，我们可以将其更改为：

`[i for i in s.split('abc') if i != '']`. 如果你只想要`'foo'`，而不是`['foo']`，你可以这样做`[i for i in s.split('abc') if i != ''][0]`：

全部一起：

```
def splitString(s, delimiter):
    return [i for i in s.split(delimiter) if i != ''][0] 
```

# xml - 使用 xmllint 进行验证时收到 XML 错误

> ID：15870054
> 
> 赞同：1
> 
> 时间：2013-04-08T01:48:38.320
> 
> 标签：xml, dtd, xml-validation

当我使用 xmllint 检查我的 DTD 文件时，我收到一条错误消息。请参阅下面的输出。我不确定这一切都出了什么问题。

```
book.dtd:1: parser error : StartTag: invalid element name
<!ELEMENT books_for_sale (book+)>
 ^
book.dtd:1: parser error : Extra content at the end of the document
<!ELEMENT books_for_sale (book+)>
 ^ 
```

这是我的 DTD 文件

```
<!ELEMENT books_for_sale (book+)>
<!ELEMENT book (book_id, title, author, co_author_name, editor_name, illustrator_name, language, ISBN, publisher, publisher_date, genre, subject, category, file_size, pages, price, payment_method)>
<!ELEMENT book_id (#PCDATA)>
<!ELEMENT title (#PCDATA)>
<!ELEMENT author (#PCDATA)>
<!ELEMENT co_author_name (#PCDATA)>
<!ELEMENT editor_name (#PCDATA)>
<!ELEMENT illustrator_name (#PCDATA)>
<!ELEMENT language (#PCDATA)>
<!ELEMENT ISBN (#PCDATA)>
<!ELEMENT publisher (#PCDATA)>
<!ELEMENT publisher_date (#PCDATA)>
<!ELEMENT genre (#PCDATA)>
<!ELEMENT subject (#PCDATA)>
<!ELEMENT category (#PCDATA)>
<!ELEMENT file_size (#PCDATA)>
<!ELEMENT pages (#PCDATA)>
<!ELEMENT price (#PCDATA)>
<!ELEMENT payment_method (#PCDATA)> 
```

不确定 html 和 xml 的组合是否正确完成。尝试使用命名空间来解决这个问题。但这对我来说是全新的，所以我不确定它是否写得正确。

```
<?xml version="1.0"  encoding="utf-8"?>

<!DOCTYPE books_for_sale SYSTEM "book.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:BO="http://resumator3000.com">

<!-- list book inventory -->

<head>
<title>Book Order</title>
<link rel="stylesheet" type="text/css" href="book.css"></link>
</head>
<body>

<div class="page-wrap">

<h3>Books for Sale</h3>
<h4>Great Prices! Limted Selection! No Delivery!</h4>

<!-- present books for sale -->
<BO:books_for_sale>

    <BO:book>
        <p>Book ID: <BO:book_id>BK12345</BO:book_id></p>
        <p>Book Title: <BO:title>Gray Geese Crying</BO:title></p>
        <p>Author: <BO:author>Bill Nedham</BO:author></p>
        <p>Co-Author: <BO:co_author_name>Surely Joking</BO:co_author_name></p>
        <p>Editor: <BO:editor_name>Fried Brian</BO:editor_name></p>
        <p>Illustrator: <BO:illustrator_name>Drew Sumthin</BO:illustrator_name></p>
        <p>Language: <BO:language>Orangatang</BO:language></p>
        <p>ISBN: <BO:ISBN>9912385748391</BO:ISBN></p>
        <p>Publisher: <BO:publisher>Random Random Homes</BO:publisher></p>
        <p>Publish Date: <BO:publisher_date>2001</BO:publisher_date></p>
        <p>Genre: <BO:genre>Poetry</BO:genre></p>
        <p>Subject: <BO:subject>Human Mind</BO:subject></p>
        <p>Category: <BO:category>Self-Help</BO:category></p>
        <p>File Size: <BO:file_size>122 MB</BO:file_size></p>
        <p>Pages: <BO:pages>3</BO:pages></p>
        <p>Price: <span id="dollar">$</span><BO:price>142.99</BO:price></p>
        <p>Payment Method: <BO:payment_method>Paypal</BO:payment_method></p>
    </BO:book>  

</BO:books_for_sale>
</div>

</body>
</html> 
```

不知道哪里出了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:05:05.297

你的 DTD 没问题，但你不能直接用`xmllint`; 您必须检查 XML 文件。

你的其他文件有问题。您应该拆分 XML，并且由于您使用的是 DTD，因此不要使用名称空间。（您可以重写 DTD，将命名空间声明视为属性，将前缀元素视为完整名称，但在 XML 中，命名空间声明不是属性，可以出现在任何元素上，并且前缀是任意的。因此，这些概念无法翻译好。）

另一个错误是 HTML 渲染将忽略任何非标准标签，从而取出整个文档正文。当您将数据从 XML 传输到 HTML（甚至是 XHTML）时，请务必将要呈现的数据放入 HTML 标记中。您可以使用 XSLT 做到这一点。

XML 文件...

```
<?xml version="1.0"  encoding="utf-8"?>
<!DOCTYPE books_for_sale SYSTEM "book.dtd">
<books_for_sale>
    <book>
        <book_id>BK12345</book_id>
        <title>Gray Geese Crying</title>
        <author>Bill Nedham</author>
        <co_author_name>Surely Joking</co_author_name>
        <editor_name>Fried Brian</editor_name>
        <illustrator_name>Drew Sumthin</illustrator_name>
        <language>Orangatang</language>
        <ISBN>9912385748391</ISBN>
        <publisher>Random Random Homes</publisher>
        <publisher_date>2001</publisher_date>
        <genre>Poetry</genre>
        <subject>Human Mind</subject>
        <category>Self-Help</category>
        <file_size>122 MB</file_size>
        <pages>3</pages>
        <price>142.99</price>
        <payment_method>Paypal</payment_method>
    </book>  
</books_for_sale> 
```

因此，当您想要生成 HTML 时，请使用如下样式表：XSLT 文件...

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
<html>
<head>
<title>Book Order</title>
<link rel="stylesheet" type="text/css" href="book.css"></link>
</head>
<body>

<div class="page-wrap">

<h3>Books for Sale</h3>
<h4>Great Prices! Limted Selection! No Delivery!</h4>

<!-- present books for sale -->
      <xsl:for-each select="books_for_sale/book">
        <div>
            <p>Book ID: <xsl:value-of select="book_id" /></p>
            <p>Price: <span id="dollar">$<xsl:value-of select="price" /></span></p>
            <p>Payment Method: <xsl:value-of select="payment_method" /></p>
        </div>
      </xsl:for-each>
    </div>
  </body>
  </html>
</xsl:template>

</xsl:stylesheet> 
```

# pandas - 使用 Pandas 获得基于时间的数据的最佳拟合线

> ID：15870058
> 
> 赞同：3
> 
> 时间：2013-04-08T01:49:30.180
> 
> 标签：pandas

我有一个数据文件，其中包含第一列中的日期和第 2 列到第 n 列中的一系列测量值。我喜欢 Pandas 理解日期，但我不知道如何做简单的最佳拟合线。使用 np.polyfit 很容易，但它不理解日期。下面是我的尝试示例。

```
from datetime import datetime
from StringIO import StringIO
import pandas as pd

zdata = '2013-01-01, 5.00, 100.0 \n 2013-01-02, 7.05, 98.2 \n 2013-01-03, 8.90, 128.0 \n 2013-01-04, 11.11, 127.2 \n 2013-01-05 13.08, 140.0'

unames = ['date', 'm1', 'm2']

df = pd.read_table(StringIO(zdata), sep="[ ,]*", header=None, names=unames, \
parse_dates=True, index_col=0)

Y = pd.Series(df['m1'])

model = pd.ols(y=Y, x=df, intercept=True)

In [232]: model.beta['m1']
Out[232]: 0.99999999999999822

In [233]: model.beta['intercept']
Out[233]: -7.1054273576010019e-15 
```

我如何解释这些数字？如果我使用 1,2..5 而不是日期 np.polyfit 给出 [ 2.024, 2.958] 这是我期望的斜率和截距。

我找了一些简单的例子，但没有找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:58:47.087

我相信您正在使用您提供的代码进行多元线性回归：

```
-------------------------Summary of Regression Analysis-------------------------

Formula: Y ~ <m1> + <m2> + <intercept>

Number of Observations:         5
Number of Degrees of Freedom:   3

R-squared:         1.0000
Adj R-squared:     1.0000

Rmse:              0.0000

F-stat (2, 2):        inf, p-value:     0.0000

Degrees of Freedom: model 2, resid 2

-----------------------Summary of Estimated Coefficients------------------------
      Variable       Coef    Std Err     t-stat    p-value    CI 2.5%   CI 97.5%
--------------------------------------------------------------------------------
            m1     1.0000     0.0000 271549416425785.53     0.0000     1.0000     1.0000
            m2    -0.0000     0.0000      -0.09     0.9382    -0.0000     0.0000
     intercept    -0.0000     0.0000      -0.02     0.9865    -0.0000     0.0000
---------------------------------End of Summary--------------------------------- 
```

注意回归公式：`Y ~ <m1> + <m2> + <intercept>`。如果您想分别对 m1 和 m2 进行简单的线性回归，那么您应该创建 Xs：

```
X = pd.Series(range(1, len(df) + 1), index=df.index) 
```

并进行回归：

```
model = pd.ols(y=Y, x=X, intercept=True) 
```

结果：

```
-------------------------Summary of Regression Analysis-------------------------

Formula: Y ~ <x> + <intercept>

Number of Observations:         5
Number of Degrees of Freedom:   2

R-squared:         0.9995
Adj R-squared:     0.9993

Rmse:              0.0861

F-stat (1, 3):  5515.0414, p-value:     0.0000

Degrees of Freedom: model 1, resid 3

-----------------------Summary of Estimated Coefficients------------------------
      Variable       Coef    Std Err     t-stat    p-value    CI 2.5%   CI 97.5%
--------------------------------------------------------------------------------
             x     2.0220     0.0272      74.26     0.0000     1.9686     2.0754
     intercept     2.9620     0.0903      32.80     0.0001     2.7850     3.1390
---------------------------------End of Summary--------------------------------- 
```

使用`np.polyfit`. 这是我的输出：

```
[ 2.022  2.962] 
```

这与熊猫的`ols`输出相同。我用 scipy's 检查了这个`linregress`并得到了相同的结果。

# asp.net - 使用函数插入sql数据库

> ID：15870063
> 
> 赞同：-2
> 
> 时间：2013-04-08T01:49:53.033
> 
> 标签：asp.net, sql-server-2008, function

我是编程新手，尤其是在使用 sql server 方面。我有一个带有文本框和提交按钮的用户页面。当用户在文本框中输入信息并按下按钮时，信息将被添加到数据库中。数据库中有一个 UserID 列，应在将所有信息添加到数据库后创建。UserID 应由 UserLastName 和 AutoIncrementNumber（自动分配给新行的数据库的列）组成我有此 UserID 的功能列，我不知道如何使一切正常。请帮我。谢谢！

这是代码：

```
 using (SqlConnection conn = new SqlConnection(@"Data Source=MyDataBase;Initial     Catalog=MyDataBase;Integrated Security=True;"))

        SqlCommand CmdSql = new SqlCommand
        ("INSERT INTO [tbluser] ([UserID],[UserLastName], [UserFirstName], [UserMiddleInitial] SELECT [dbo].[usernamehandle](@UserFirstName),@UserLastName, @UserFirstName, @UserMiddleInitial", conn);
        conn.Open();
        CmdSql.Parameters.AddWithValue("@UserLastName", txtNewUserLN.Text.ToString());
        CmdSql.Parameters.AddWithValue("@UserFirstName", txtNewUserFN.Text.ToString());
        CmdSql.Parameters.AddWithValue("@UserMiddleInitial", txtNewUserMI.Text.ToString());  
        CmdSql.Connection = conn;
        CmdSql.ExecuteNonQuery();
        conn.Close(); 
```

这是功能：

```
USE [MyDataBase]
GO
/****** Object:  UserDefinedFunction [dbo].[usernamehandle]    Script Date: 04/07/2013 17:25:23 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER FUNCTION [dbo].[usernamehandle]
(@newuserName nchar(10))returns nchar(10)

AS
BEGIN
DECLARE @s2 nchar(256)
SET @s2 = ''
DECLARE @p int
DECLARE @ULN char(256)
DECLARE @UNAI int
SELECT @ULN = UserLastName FROM tblUser 
SELECT @UNAI = UserNameAutoIncre FROM tbluser
SET @s2 = @UNAI
while @p <=6 begin
DECLARE @c int
SET @c = ascii(substring(@newUserName, @p, 1))
SET @s2 += char(@c) 
end
return @s2
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:59:59.027

尝试在 SQL 中直接调用您的函数：

注意：请检查该功能的参数。我假设参数是用户的名字。

```
SqlCommand CmdSql = new SqlCommand
        ("INSERT INTO [tbluser] ([UserID],[UserLastName], [UserFirstName], [UserMiddleInitial]) SELECT [dbo].[usernamehandle](@UserFirstName), @UserLastName, @UserFirstName, @UserMiddleInitial, conn); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:12:17.300

您不能使用函数插入数据，仅用于选择语句的函数意味着仅用于 DDL 而不是 DML，因此您必须使用存储过程。

# android - 带有边框和图像的地图视图上的Android自定义叠加层？

> ID：15870066
> 
> 赞同：0
> 
> 时间：2013-04-08T01:50:08.043
> 
> 标签：android, overlay, android-mapview

我需要在 mapview 上显示一组自定义叠加层，其中包含从 Internet 下载的图像。在过去，我扩展了 Overlay 并覆盖了 draw，通过在画布上绘制位图和形状来创建图钉。是否有另一种方法可以让我在指定的纬度/经度处用 ImageView 覆盖地图？我在问，因为我有一个自定义 ImageView 实现，可以下载和缓存图像，在这种情况下重新使用它会很好。

谢谢

# jquery - jQuery - 选择一个包含特定值的元素

> ID：15870069
> 
> 赞同：1
> 
> 时间：2013-04-08T01:50:26.953
> 
> 标签：jquery, select

我需要在这里做一些倒退的事情。

我正在使用以下内容禁用下拉列表中的值，效果很好。

```
$('*[id^="dd"] option[value=' + info.products_options_values_id_affected + ']').attr("disabled",vOut); 
```

问题是，如果用户在禁用之前选择了此选项，则需要将下拉列表重置为其默认（顶部）值。问题是，所有的 html 都是动态生成的，我不知道哪个下拉列表包含正在执行的值。

每个下拉列表中的每个值都有一个唯一的 id，所以我希望做的是确定哪个下拉列表包含与上面代码选择的**值**相同的条目，而不是文本，并将其重置回其顶部值. 是否可以通过这种方式进行选择？

谢谢！

编辑：这是我正在处理的生成 html 的示例：

```
<select name="id[11]" onchange="edComboFunc(11)" id="dd11">
    <option value="16">Choose Here</option>
    <option value="15">Color Changing</option>
    <option value="14">Amber</option>
    <option value="13">Blue</option>
    <option value="12">Green</option>
    <option value="20">White</option>
    <option value="21">Purple</option>
    <option value="22">Turquoise</option>
    <option value="27">Orange</option>
    <option value="11">Red</option>
    <option value="23">Pink</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T01:53:51.107

我没有对此进行测试，但是如果我正确理解了您的问题，这就是您要尝试做的吗？如果没有，请告诉我。

```
$("option[value*='23']").parent("select"); 
```

# homebrew - 如何通过自制软件安装 32 位应用程序

> ID：15870077
> 
> 赞同：13
> 
> 时间：2013-04-08T01:51:48.070
> 
> 标签：homebrew, 32-bit

我想通过自制软件安装 32 位 gettext：

```
brew install gettext --32-bit 
```

但是当还是x86_64版本的时候：

```
file /usr/local/Cellar/gettext/0.18.2/lib/libgettextlib-0.18.2.dylib 

/usr/local/Cellar/gettext/0.18.2/lib/libgettextlib-0.18.2.dylib: Mach-O 64-bit dynamically linked shared library x86_64 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-25T06:05:22.037

您可能想要使用`brew install gettext --universal`，它将构建一个包含 32 位和 64 位代码的通用（“胖”）二进制文件。没有`--32-bit`选择；查看`brew info gettext`支持哪些选项。

```
$ brew install gettext --universal
[...snip...]
$ file /usr/local/Cellar/gettext/0.18.2/lib/libgettextlib-0.18.2.dylib
/usr/local/Cellar/gettext/0.18.2/lib/libgettextlib-0.18.2.dylib: Mach-O universal binary with 2 architectures
/usr/local/Cellar/gettext/0.18.2/lib/libgettextlib-0.18.2.dylib (for architecture i386):    Mach-O dynamically linked shared library i386
/usr/local/Cellar/gettext/0.18.2/lib/libgettextlib-0.18.2.dylib (for architecture x86_64):  Mach-O 64-bit dynamically linked shared library x86_64 
```

# java - 非常奇怪的 Mouse Listener 和 If 语句

> ID：15870080
> 
> 赞同：0
> 
> 时间：2013-04-08T01:52:00.643
> 
> 标签：java, eclipse, swing, if-statement, mouseevent

在您阅读本文之前，我只想说任何帮助都会对我有很大帮助，现在。我很绝望。我花了至少一个星期的时间试图在 Eclipse 中完成这项工作，我想我遗漏了一些明显的东西，我真的需要你的帮助。

现在，我的鼠标侦听器包含每个“房间”的 if 语句和这些 if 语句中的双 for 循环，告诉 JFrame 是否在 JFrame 的某个区域内单击鼠标以重新绘制相应的“房间”。

现在假设房间#4 可以通向#5 或#6。从 #4 > #6 开始没有问题。现在从 #5 > #4 开始出现问题。出于某种原因，房间 #4 的事件区域显示在 #5 中（它不应该出现）所以现在我可以在单击以前的事件区域时转到 #4 或 #6。

我已经为其他“房间”尝试过这个问题，但问题并没有出现在其中。我得出的结论是，它可能需要在与多个路径相连的房间之间来回走动。我附加了一个可视化路径和隔离代码以使事情变得更容易（数字只是房间#）。

```
MouseAdapter mouseHandler = new MouseAdapter()
      {
          public void mouseClicked(MouseEvent e)
          {
             //System.out.println(e.getPoint());
            if(n==6)//R6
             {
                for(int i = 116;i<132;i++)//3a
              {
                  if(e.getX() == i)
                  {
                      for(int j = 388;j<404;j++)
                      {
                          if(e.getY() == j)
                          {
                            n = 7;//3b
                              return;
                          }
                      }
                  }
              }
                 for(int i = 116;i<132;i++)//2b
                  {
                      if(e.getX() == i)
                      {
                          for(int j = 308;j<324;j++)
                          {
                              if(e.getY() == j)
                              {
                                 n = 4;//2a
                                  return;
                              }
                          }
                      }
                  }
                 for(int i = 580;i<596;i++)//8a
              {
                  if(e.getX() == i)
                  {
                      for(int j = 372;j<388;j++)
                      {
                          if(e.getY() == j)
                          {
                             n = 2;//8b
                              return;
                          }
                      }
                  }
              }
             }
            if(n==5)//R5
             {
                 for(int i = 220;i<268;i++)//1b
                  {
                      if(e.getX() == i)
                      {
                          for(int j = 437;j<485;j++)
                          {
                              if(e.getY() == j)
                              {
                                  n = 4;//1a
                                  return;
                              }
                          }
                      }
                  }
             }
            if(n==4)//R4
             {
                 for(int i = 179;i<244;i++)//2a
                  {
                      if(e.getX() == i)
                      {
                          for(int j = 403;j<468;j++)
                          {
                              if(e.getY() == j)
                              {
                                 n = 6;//2b
                                  return;
                              }
                          }
                      }
                  }
                 for(int i = 436;i<500;i++)//1a
                      {
                          if(e.getX() == i)
                          {
                              for(int j = 403;j<468;j++)
                              {
                                  if(e.getY() == j)
                                  {
                                     n = 5;//1b
                                      return;
                                  }
                              }
                          }
                      }
                 for(int i = 274;i<406;i++)//A2
                  {
                      if(e.getX() == i)
                      {
                          for(int j = 193;j<276;j++)
                          {
                              if(e.getY() == j)
                              {
                                  n = 0;//A1
                                  return;
                              }
                          }
                      }
                  }
             }
            if(n==0)//R0
             {
                 for(int i = 459;i<493;i++)//A1
              {
                  if(e.getX() == i)
                  {
                      for(int j = 110;j<133;j++)
                      {
                          if(e.getY() == j)
                          {
                              n = 4;//A2
                              return;
                          }
                      }
                  }
              }
             }
            repaint();
             //http://stackoverflow.com/questions/5654208/making-a-jbutton-invisible-but-clickable
          }
          public void mouseMoved(MouseEvent e)
          {
              // = e.getPoint();
              //repaint();
          }
      };

      addMouseMotionListener(mouseHandler);
      addMouseListener(mouseHandler); 
```

![在此处输入图像描述](https://i.stack.imgur.com/1jG1U.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T03:51:58.137

这旨在`Rectangle`演示`Room`.

每个`Room`可以有 1 个或多个存在，每个出口通向另一个房间。这本质上是一种链表。

每个的`Rectangle`for 位置都是动态计算的，更容易渲染和控制。这个例子基本上只会显示活动房间和它的连接房间。每次单击房间时，该房间都会成为活动房间（在中心）并呈现它的链接存在。

![在此处输入图像描述](https://i.stack.imgur.com/4mlXl.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.HashMap;
import java.util.Map;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class Rooms {

    public static void main(String[] args) {
        new Rooms();
    }

    public Rooms() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new RoomsPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class RoomsPane extends JPanel {

        private Room currentRoom;

        public RoomsPane() {

            currentRoom = new Room("0", new Dimension(100, 100), null, null);
            currentRoom.addExit(ExitPoint.East, createRoom(1, currentRoom, ExitPoint.West));

            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    if (getBounds(currentRoom).contains(e.getPoint())) {
                        // current room
                    } else {
                        for (Room room : currentRoom.getRooms()) {
                            if (getBounds(room).contains(e.getPoint())) {
                                currentRoom = room;
                                repaint();
                                break;
                            }
                        }
                    }
                }
            });

        }

        protected boolean chance() {
            return Math.round(Math.random() * 1) == 0 ? false : true;
        }

        public Room createRoom(int count, Room parent, ExitPoint entryPoint) {
            int width = (int) Math.round(Math.random() * 90) + 10;
            int height = (int) Math.round(Math.random() * 90) + 10;
            Room room = new Room(String.valueOf(count), new Dimension(width, height), parent, entryPoint);
            if (count < 10) {
                count++;

                if (chance() && !room.hasExit(ExitPoint.North)) {
                    room.addExit(ExitPoint.North, createRoom(count, room, ExitPoint.South));
                }
                if (chance() && !room.hasExit(ExitPoint.East)) {
                    room.addExit(ExitPoint.East, createRoom(count, room, ExitPoint.West));
                }
                if (chance() && !room.hasExit(ExitPoint.South)) {
                    room.addExit(ExitPoint.South, createRoom(count, room, ExitPoint.North));
                }
                if (chance() && !room.hasExit(ExitPoint.West)) {
                    room.addExit(ExitPoint.West, createRoom(count, room, ExitPoint.West));
                }

            }
            return room;
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        public Rectangle getBounds(Room room) {

            Rectangle bounds = null;
            // Can't get the bounds for a room not linked to current room
            if (currentRoom.isLinkedTo(room) || currentRoom == room) {
                Dimension size = currentRoom.getSize();
                int width = getWidth() - 1;
                int height = getHeight() - 1;
                int x = (width - size.width) / 2;
                int y = (height - size.height) / 2;
                if (currentRoom != room) {

                    switch (currentRoom.getExit(room)) {
                        case North:
                            y -= room.getSize().height;
                            x = (width - room.getSize().width) / 2;
                            break;
                        case South:
                            y += size.height;
                            x = (width - room.getSize().width) / 2;
                            break;
                        case East:
                            x += size.width;
                            y = (height - room.getSize().height) / 2;
                            break;
                        case West:
                            x -= room.getSize().width;
                            y = (height - room.getSize().height) / 2;
                            break;
                    }

                    size = room.getSize();

                }
                bounds = new Rectangle(x, y, size.width, size.height);
            }
            return bounds;

        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();

            FontMetrics fm = g2d.getFontMetrics();

            g2d.setColor(Color.GRAY);
            for (Room room : currentRoom.getRooms()) {
                Rectangle bounds = getBounds(room);
                g2d.draw(bounds);
                g2d.drawString(
                        room.getName(),
                        bounds.x + ((bounds.width - fm.stringWidth(room.getName())) / 2),
                        bounds.y + ((bounds.height - fm.getHeight()) / 2) + fm.getAscent());
            }

            Rectangle bounds = getBounds(currentRoom);
            g2d.setColor(Color.BLUE);
            g2d.draw(bounds);
            g2d.drawString(
                    currentRoom.getName(),
                    bounds.x + ((bounds.width - fm.stringWidth(currentRoom.getName())) / 2),
                    bounds.y + ((bounds.height - fm.getHeight()) / 2) + fm.getAscent());

            g2d.dispose();
        }
    }

    public enum ExitPoint {

        North,
        South,
        East,
        West
    }

    public class Room {

        private Dimension size;
        private Map<ExitPoint, Room> exists;
        private String name;

        public Room(String name, Dimension dim, Room parent, ExitPoint entryPoint) {
            size = new Dimension(dim);
            exists = new HashMap<>(4);
            this.name = name;
            if (parent != null) {
                addExit(entryPoint, parent);
            }
        }

        public String getName() {
            return name;
        }

        public Dimension getSize() {
            return size;
        }

        public void addExit(ExitPoint point, Room room) {
            exists.put(point, room);
        }

        public boolean isLinkedTo(Room room) {
            return exists.values().contains(room);
        }

        public Room[] getRooms() {
            return exists.values().toArray(new Room[exists.size()]);
        }

        public boolean hasExit(ExitPoint ep) {
            return exists.containsKey(ep);
        }

        public ExitPoint getExit(Room room) {
            ExitPoint ep = null;
            for (ExitPoint exit : exists.keySet()) {
                if (exists.get(exit) == room) {
                    ep = exit;
                    break;
                }
            }
            return ep;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T02:02:20.413

您似乎正在尝试查看鼠标是否在区域内单击，并且您似乎正在尝试使用嵌套的 for 循环来执行此操作。不要为此目的使用 for 循环。而是使用 if 块。最简单的方法是创建矩形并查看鼠标是否使用其`contains(Point p)`方法在其中单击。

# java - Java内存不足

> ID：15870087
> 
> 赞同：0
> 
> 时间：2013-04-08T01:53:00.213
> 
> 标签：java, memory

好的，我有内存泄漏。它最有可能在 GUI 或 ExecutorCompletionService 中。监控程序内存的选项有哪些？

是的，我出现内存不足错误。我在 eclipse 的 vm 参数上设置了 -XX:+HeapDumpOnOutOfMemoryError 以生成转储文件。情况是有一个 ExecutorCompletionService 运行计算密集型任务的线程池。线程用中间结果向 gui 线程发出信号。

我正在审查 ExecutionController 类的单元测试，并且想知道是否可以将内存监控集成到单元测试中。

关于分析选项，我上个月成功地做到了这一点，但我不记得使用的程序或专业填充物。我打开了一个单独的窗口并从外部运行的监视器监视实时快照。我依稀记得在确定发生内存泄漏的确切类成员时有些困难，但提供了足够的信息来解决前面的问题。

我会在不久的将来尝试建议的监控选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:00:49.140

内存泄漏可能是由于超出了 JVM 的堆栈或堆大小。识别内存泄漏的第一步是确认是否存在。请尝试使用 JVM 命令行选项增加堆和堆栈空间。`-xmx`并且`-xss`是分别增加堆和堆栈大小的选项。

一旦确认，有多种工具可以帮助缩小到违规代码块以识别泄漏。我最喜欢的是在内存不足异常时对正在运行的线程进行转储，假设它发生了，然后检查转储。请尝试`java -Xrunhprof:help`了解更多详情。我使用 Memory Analyzer (MAT)，一个 Eclipse 插件来分析转储。

此外，[Java 内存扩展](http://www.oracle.com/technetwork/java/javase/tech/javamanagement-140525.html)提供了有关如何自省正在运行的 JVM 关于线程、堆和堆栈大小的详细信息。如果您使用的是 JDK 1.6 及更高版本，它附带了 [visual vm](http://blog.xebia.com/2008/09/15/loitering-objects-make-web-company-lose-money/)，这是一个有助于实现此目的的分析工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T01:56:02.883

从 JDK 6开始，目录`jvisualvm`中包含一个名为的分析工具。`\bin`您可以扫描CPU使用率，监控内存和线程等。

[你可以在这里](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jvisualvm.html)阅读更多关于它的信息。

# c++ - 河内之塔，一举一动

> ID：15870088
> 
> 赞同：-3
> 
> 时间：2013-04-08T01:53:03.790
> 
> 标签：c++, towers-of-hanoi

我需要编写一个递归的河内塔程序，我已经完成了，但是它需要输出由星星代表的圆盘的位置，这就是我遇到的麻烦。每次进行移动时，它都需要输出光盘位置的图片表示。我为 3 张光盘编写了代码，但我需要它更灵活并适用于 3、4 或 5 张光盘。这是我目前拥有的代码。

```
// This program displays a solution to the Towers of
// Hanoi game.
#include <iostream>
using namespace std;

// Function prototype
void moveDiscs(int, int, int, int, int);

int main()
{
   int count = 0;
   int NUM_DISCS = 3;   // Number of discs to move
   const int FROM_PEG = 1;    // Initial "from" peg
   const int TO_PEG = 3;      // Initial "to" peg
   const int TEMP_PEG = 2;    // Initial "temp" peg

   // Play the game.
   moveDiscs(NUM_DISCS, FROM_PEG, TO_PEG, TEMP_PEG, count);
   cout << "All the pegs are moved!\n";

   system("PAUSE");
   return 0;
}

//***************************************************
// The moveDiscs function displays a disc move in   *
// the Towers of Hanoi game.                        *
// The parameters are:                              *
//    num:     The number of discs to move.         *
//    fromPeg: The peg to move from.                *
//    toPeg:   The peg to move to.                  *
//    tempPeg: The temporary peg.                   *
//***************************************************

void moveDiscs(int num, int fromPeg, int toPeg, int tempPeg, int count)
{
   if (num > 0)
   {  
      moveDiscs(num - 1, fromPeg, tempPeg, toPeg, count);
      cout << "Move a disc from peg " <<fromPeg
           << " to peg " << toPeg <<endl;
           count++; 
           if (fromPeg == 1 && toPeg == 3)
           {
                       if (num == 1)
                       {
                          if(count == 3)
                          cout<<"       *"<<endl<< "       *"<<endl<< "       *"<<endl;
                          else 
                          cout << "*"<< endl <<"*      *"<<endl;
                       }
                       else
                       cout << "   *"<<endl <<"   *   *"<<endl;
           }
           if (fromPeg==1 && toPeg==2)
           cout << "*  *  *"<<endl;
           if (fromPeg ==3 && toPeg==2)
           cout << "   *"<<endl <<"*  *"<<endl; 
           if (fromPeg==2 && toPeg==1)
           cout << "*  *  *"<<endl;
           if (fromPeg==2 && toPeg==3)
           cout << "       *"<< endl <<"*      *"<<endl;
      moveDiscs(num - 1, tempPeg, toPeg, fromPeg, count);
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T03:15:43.733

虽然它不是您问题的直接答案 - 我想您可能会发现它很有帮助。我前段时间做**了河内塔的例子：**

[**现场演示**](http://coliru.stacked-crooked.com/a/85ddb60dd573e398)

```
#include <algorithm>
#include <iterator>
#include <iostream>
#include <ostream>
#include <vector>

using namespace std;

using HanoiPin = vector<unsigned>;

template<class PostAction>
void move_hanoi
(
    HanoiPin &from, HanoiPin &to, HanoiPin &temp,
    size_t count, PostAction post
)
{
    if(count>1)
    {
        move_hanoi(from, temp, to, count-1, post);
        move_hanoi(from, to, temp, 1, post);
        move_hanoi(temp, to, from, count-1, post);
    }
    else
    {
        to.push_back(from.back());
        from.pop_back();
        post();
    }
}

int main()
{
    auto count=5;
    HanoiPin a,b,c;
    generate_n(back_inserter(a), count, [=]() mutable
    {
        return count--;
    });
    auto print_hanoi=[](HanoiPin &h)
    {
        cout << "|";
        for(auto x : h)
            cout << x << "-";
        cout << endl;
    };
    auto printer=[&]
    {
        print_hanoi(a);
        print_hanoi(b);
        print_hanoi(c);
        cout << endl;
    };
    printer();
    move_hanoi(a,b,c,a.size(),printer);
} 
```

输出是：

```
|5-4-3-2-1-
|
|

|5-4-3-2-
|1-
|

|5-4-3-
|1-
|2-

|5-4-3-
|
|2-1-

|5-4-
|3-
|2-1-

|5-4-1-
|3-
|2-

|5-4-1-
|3-2-
|

|5-4-
|3-2-1-
|

|5-
|3-2-1-
|4-

|5-
|3-2-
|4-1-

|5-2-
|3-
|4-1-

|5-2-1-
|3-
|4-

|5-2-1-
|
|4-3-

|5-2-
|1-
|4-3-

|5-
|1-
|4-3-2-

|5-
|
|4-3-2-1-

|
|5-
|4-3-2-1-

|1-
|5-
|4-3-2-

|1-
|5-2-
|4-3-

|
|5-2-1-
|4-3-

|3-
|5-2-1-
|4-

|3-
|5-2-
|4-1-

|3-2-
|5-
|4-1-

|3-2-1-
|5-
|4-

|3-2-1-
|5-4-
|

|3-2-
|5-4-1-
|

|3-
|5-4-1-
|2-

|3-
|5-4-
|2-1-

|
|5-4-3-
|2-1-

|1-
|5-4-3-
|2-

|1-
|5-4-3-2-
|

|
|5-4-3-2-1-
| 
```

# jquery - jQuery动画在悬停效果上增加

> ID：15870091
> 
> 赞同：0
> 
> 时间：2013-04-08T01:53:47.860
> 
> 标签：jquery

当我不再悬停时，我希望我悬停的图像向上移动并再次向下移动。我可以使用 CSS3 来实现这种效果，但由于并非所有浏览器都支持它，我希望它也可以与 jQuery 一起使用。我为你创建了一个小提琴：http: [//jsfiddle.net/fSthA/2/](http://jsfiddle.net/fSthA/2/)

这是我的 jQuery 代码：

```
$('.full-circle').mouseOver(
    function(){
        $(this).stop().animate(
            {margin-top: '2'}, 500, 'swing'   
        );//end animate
    },//end function
    function(){
        $(this).stop().animate(
            {margin-top: '15'}, 500, 'swing'
        );//end animate
    }//end function
);//end hover 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:05:59.290

我不确定你的问题是什么，但我修改了你的小提琴以通过 jQuery 来完成。我只需要删除 css 过渡，`:hover`样式，将 jQuery 添加到小提琴中，将您的`animate`调用更改为使用`marginTop`而不是`margin-top`：

```
$('.full-circle').hover(
    function(){
        $(this).stop().animate(
            {marginTop: '2'}, 500, 'linear'   
        );//end animate
     },//end function
    function(){
        $(this).stop().animate(
            {marginTop: '15'}, 500, 'linear'
        );//end animate
    }//end function
);//end hover 
```

[http://jsfiddle.net/fSthA/5/](http://jsfiddle.net/fSthA/5/)

# algorithm - 尝试对有向图进行两种着色时，顶点顺序是否重要？

> ID：15870093
> 
> 赞同：0
> 
> 时间：2013-04-08T01:53:51.197
> 
> 标签：algorithm, data-structures, graph, bipartite, graph-coloring

在[The Algorithm Design Manual](https://rads.stackoverflow.com/amzn/click/com/0387948600)中，作者提供了一种对图进行两种着色的算法。它类似于计算组件数量的算法，因为它迭代所有可用顶点，然后仅在未发现该顶点时对该顶点着色并执行 BFS：

```
for(i = 1; i <= (g->nvertices); i++) {
    if(discovered[i] == FALSE) {
        color[i] = WHITE;
        bfs(g, i);
    }
} 
```

BFS在边缘没有被处理或者图是有向的`process_edge`时候调用一个函数。BFS 看起来像这样：`y``x -> y`

```
bfs(graph *g, int start) {

    queue q; //queue of vertices to visit
    int v; //current vertex
    int y; //successor vertex
    edgenode* p; //temporary pointer used to traverse adjacency list

    init_queue(&q);
    enqueue(&q, start);
    discovered[start] = TRUE;

    while(empty_queue(&q) == FALSE) {
        v = dequeue(&q);

        process_vertex_early(v); //function that handles early processing
        processed[v] = TRUE;
        p = g->edges[v];

        while(p != NULL) {
            y = p->y;

            //If the node hasn't already been processed, or if the graph is directed
            //process the edge. This part bothers me with undirected graphs
            //because how would you process an edge that was wrongly colored
            //in an earlier iteration when it will have processed[v] set to TRUE?
            if((processed[y] == FALSE) || g->directed) {
                process_edge(v, y); //coloring happens here
            }

            if(discovered[y] == FALSE) {
                enqueue(&q, y);
                discovered[y] = TRUE;
                parent[y] = v;
            }

            p = p->next;
        }

        process_vertex_late(v); //function that handles late processing
    }
} 
```

该`process_edge`函数如下所示：

```
process_edge(int x, int y) {
    if(color[x] == color[y]) {
        bipartite = FALSE;
        printf("Warning: not bipartite due to (%d, %d)\n", x, y);
    }

    color[y] = complement(color[x]);
} 
```

现在假设我们有一个这样的图表：

![在此处输入图像描述](https://i.stack.imgur.com/9ObPt.png)

我们可以像这样对它进行两种着色：

![在此处输入图像描述](https://i.stack.imgur.com/Cvs7L.png)

但是，如果我们按顶点顺序遍历它，那么我们最初将从 node 开始`1`，并将其着色为`WHITE`。然后我们将找到节点`13`并将其着色为`BLACK`. 在循环的下一次迭代中，我们正在查看`5`未发现的节点，因此我们将对其着色`WHITE`并在其上启动 BFS。在执行此操作时，我们会发现节点之间存在冲突`5`，`1`因为`1`应该是`BLACK`，但之前设置为`WHITE`。`1`然后我们会发现and之间的另一个冲突`13`，因为`13`应该是`WHITE`，但它被设置为`BLACK`。

当通过所有组件（连接或未连接）执行图的正常遍历时，顺序无关紧要，因为无论如何我们最终都会访问所有节点，但是在为图着色的情况下顺序似乎很重要。我没有在书中看到提到这一点，只是在我尝试对上面的随机生成的图形进行双色着色时才遇到这个问题。我能够对现有算法进行一些小改动，从而消除了这个问题：

```
for(i = 1; i <= (g->nvertices); i++) {
    //Only initiate a BFS on undiscovered vertices and vertices that don't
    //have parents.
    if(discovered[i] == FALSE && parent[i] == NULL) {
        color[i] = WHITE;
        bfs(g, i);
    }
} 
```

这种变化是否有意义，还是因为我不理解一些基本概念而造成的？

**更新**

根据 G. Bach 的[回答](https://stackoverflow.com/a/15870174/263004)，假设我们有以下图表：

![在此处输入图像描述](https://i.stack.imgur.com/xcko0.png)

我仍然对这将如何正确地变成双色感到困惑。使用原始算法，第一次迭代将启动一个带节点的 BFS，`1`为我们提供一个颜色如下的图：

![在此处输入图像描述](https://i.stack.imgur.com/pLxG8.png)

在下一次迭代中，我们将启动一个带节点的 BFS，`5`为我们提供一个颜色如下的图：

![在此处输入图像描述](https://i.stack.imgur.com/63jEL.png)

下一次迭代将启动一个带节点的 BFS，`6`为我们提供一个像这样着色的图：

![在此处输入图像描述](https://i.stack.imgur.com/fk0up.png)

但是现在我们不会重新着色`5`，因为我们已经访问过它，所以这给我们留下了一个没有正确着色的图表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-01T02:07:14.390

图形的有向性质与您提出的二分着色问题无关，除非您定义了一个不同的问题，其中方向确实开始很重要。因此，您可以将示例中使用的图转换为无向图并运行教科书中给出的算法。

虽然教科书没有明确提到图应该是无向的，但边缘方向与我们研究的常见着色问题无关。但是，您可以定义考虑边缘方向的问题（[http://www.labri.fr/perso/sopena/pmwiki/index.php?n=TheOrientedColoringPage.TheOrientedColoringPage](http://www.labri.fr/perso/sopena/pmwiki/index.php?n=TheOrientedColoringPage.TheOrientedColoringPage)）。

注意：我打算写这个作为评论，但是作为一个新手，我不允许这样做，直到我积累一些声望点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:05:29.160

使用 BFS 着色二分图不依赖于顶点顺序。调用构成二部图 A 和 B 的分区的两个顶点集；WLOG 从`a`A 的顶点开始，将其着色为白色；第一个 BFS 将找到邻居`N(a)`，它们都将被着色为黑色。对于每个`v in N(a)`with all `v in B`，这将启动一个 BFS（如果我没看错的话），找到`N(v)`它的子集`A`，将它们全部着色为白色等等。

如果您尝试使用它为非二分图着色，您将遇到一个奇数长度的循环（因为有这样一个循环作为子图相当于不是二分的）并且 BFS 将在某个时候遇到再次那个奇怪的循环，发现它已经有一种颜色，但不是它想要分配给它的颜色。

我假设您的图表会发生什么（因为您从 1 开始在 BFS 中不包括 5）是它是有向的；我假设您阅读的算法是为无向图编写的，否则您确实会遇到您描述的问题。此外，着色图通常在无向图上定义（当然可以转移到有向图）。

您的修复一般不会解决问题；添加一个新的顶点`6`和边`6->24`，你会遇到同样的问题。开始的 BFS`5`将要涂成`1`黑色，从 开始的 BFS`6`将要涂成白色。但是，该图仍然是 2-colorable。

# ruby-on-rails - 匿名设计问题：“[17] 不是符号”

> ID：15870094
> 
> 赞同：5
> 
> 时间：2013-04-08T01:53:54.137
> 
> 标签：ruby-on-rails, devise

设计提出了一个我不明白的问题。

使用更好的错误 gem；这是它被抓住的地方：

在 constantize(gem) activesupport-3.2.12/lib/active_support/inflector/methods.rb 中的块

```
 225         names = camel_cased_word.split('::')
  226         names.shift if names.empty? || names.first.empty?
  227 
  228         constant = Object
  229         names.each do |name|
  230           constant = constant.const_defined?(name, false) ? 
                  constant.const_get(name) : constant.const_missing(name)
  231         end
  232         constant
  233       end
  234     end 
```

更多详细信息：

```
Request info:
Request parameters {"controller"=>"devise/sessions", "action"=>"new"}
Rack session       {"session_id"=>"a2bcc708204fb5dce015439f6881f67d","_csrf_token"=>"TzIKUgPy8y4F6kFfkDG/xfgCm4vMqkgReLHbK+cjeFI=", "warden.user.user.key"=>[[17], "$2a$10$/WvxkLxIdgHOMxg8nus6cu"]}

Local Variables:
name      [17]
camel_cased_word [17]
names    [[17]]
constant Object 
```

有任何想法吗？什么进一步的信息会有用？

这是跟踪末尾的一部分：

```
block in ActiveSupport::Inflector.constantize
(gem) activesupport-3.2.12/lib/active_support/inflector/methods.rb, line 230
ActiveSupport::Inflector.constantize
(gem) activesupport-3.2.12/lib/active_support/inflector/methods.rb, line 229
Warden::SessionSerializer#deserialize
(gem) devise-2.2.3/lib/devise/rails/warden_compat.rb, line 27
Warden::SessionSerializer#fetch
(gem) warden-1.2.1/lib/warden/session_serializer.rb, line 35
Warden::Proxy#user
(gem) warden-1.2.1/lib/warden/proxy.rb, line 212
Warden::Proxy#_perform_authentication
(gem) warden-1.2.1/lib/warden/proxy.rb, line 318
Warden::Proxy#authenticate
(gem) warden-1.2.1/lib/warden/proxy.rb, line 104
Warden::Proxy#authenticate?
(gem) warden-1.2.1/lib/warden/proxy.rb, line 114
Devise::SessionsController#require_no_authentication
(gem) devise-2.2.3/app/controllers/devise_controller.rb, line 124
Devise::SessionsController#
_run__642094268016367352__process_action__582726832569976772__callbacks
(gem) activesupport-3.2.12/lib/active_support/callbacks.rb, line 418
Devise::SessionsController.__run_callback
(gem) activesupport-3.2.12/lib/active_support/callbacks.rb, line 405
Devise::SessionsController#_run_process_action_callbacks
(gem) activesupport-3.2.12/lib/active_support/callbacks.rb, line 385
Devise::SessionsController#run_callbacks
(gem) activesupport-3.2.12/lib/active_support/callbacks.rb, line 81
Devise::SessionsController#process_action
(gem) actionpack-3.2.12/lib/abstract_controller/callbacks.rb, line 17
Devise::SessionsController#process_action
(gem) actionpack-3.2.12/lib/action_controller/metal/rescue.rb, line 29
block in Devise::SessionsController#process_action
(gem) actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb, line 30
block in ActiveSupport::Notifications.instrument
(gem) activesupport-3.2.12/lib/active_support/notifications.rb, line 123
ActiveSupport::Notifications::Instrumenter#instrument
(gem) activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb, line 20
ActiveSupport::Notifications.instrument
(gem) activesupport-3.2.12/lib/active_support/notifications.rb, line 123
Devise::SessionsController#process_action
(gem) actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb, line 29
Devise::SessionsController#process_action 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-03T16:05:53.523

我从 2.0.4 更新到 2.2.4，当我使用旧版本更改为我的项目的稳定分支时发生了这种情况。解决方案是为我的本地主机清除浏览器中的所有 cookie。在您的情况下，将是您运行应用程序的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T21:08:59.293

这个问题是很久以前发布的，所以我想原来的人不再需要答案了。但可能有像我这样的人迫切需要一个答案，而不是炸毁所有会话。这是原因和我的解决方案：Devise 2.2.4 具有向后不兼容的更改，会破坏所有现有会话。请参阅 2.2.4 的更改日志 [https://github.com/plataformatec/devise/blob/master/CHANGELOG.md](https://github.com/plataformatec/devise/blob/master/CHANGELOG.md)

devise >=2.2.4 创建的会话不能被 devise <=2.2.3 正确处理。

问题来自使用的会话密钥设计。假设您已经设计了 Player 模型。对于设计<=2.2.3，会话在会话中具有以下内容

```
session["warden.user.player.key']=["Player", [player_id], "somehashhere"] 
```

对于 devise>=2.2.4，会话变为以下

```
session["warden.user.player.key']=[[player_id], "somehashhere"] 
```

我想设计作者不喜欢“播放器”，因为它已经在许多不同的地方以及密钥本身中指定。这是一个合理的更改，新代码确实可以正确处理升级，因为它可以理解旧会话并保持未完成的会话活动。

但这只能解决升级问题，而不是降级问题。如果您将您的设备升级到 2.2.4，登录然后降级到 2.2.3，您将看到类似这样的错误。显然在设计代码（<2.2.3）的某个地方，它将“播放”转换为符号：用户。但是“用户”不再存在，并且出现“不是符号”错误。

仅当您将数据库存储用于会话时，设计页面才指向解决方案。您需要迁移该 [https://gist.github.com/moll/6417606](https://gist.github.com/moll/6417606)

如果你使用 cookie store 存储（rails 长期默认），那么你从更高版本的设计降级时需要将以下代码添加到应用程序控制器

```
before_filter :fix_session
def fix_session
    key = session["warden.user.player.key"]
    if key && key.is_a?(Array) && key[0].is_a?(Array)
      session["warden.user.player.key"].unshift('Player')
    end
end 
```

至于为什么降级？如果您确定一切正常并且您永远不必回滚，那么这不是问题。但是，如果您不确定，您将需要这个。

# r - 如何连接 R 中的数据表（内、外、左、右）？

> ID：15870097
> 
> 赞同：1
> 
> 时间：2013-04-08T01:55:04.590
> 
> 标签：r, join, data.table, bigdata

这是对上一篇文章（[如何加入（合并）数据帧（内、外、左、右）？](https://stackoverflow.com/questions/1299871/how-to-join-data-frames-in-r-inner-outer-left-right)）的复制，使用`data.table()`而不是`data.frame()`.

假设我有两个数据表：

```
library(data.table)
dt1 = data.table(CustomerID=c(1:6),Product=c(rep("Toaster",3),rep("Radio",3)))
dt2 = data.table(CustomerID=c(2,4,6),State=c(rep("Alabama",2),rep("Ohio",1)))            

dt1
   CustomerID Product
1:          1 Toaster
2:          2 Toaster
3:          3 Toaster
4:          4   Radio
5:          5   Radio
6:          6   Radio
dt2
   CustomerID   State
1:          2 Alabama
2:          4 Alabama
3:          6    Ohio

setkey(dt1,CustomerID)
setkey(dt2, CustomerID) 
```

`merge()`在 a上使用的默认值`data.table`是右连接。其他的语法是什么？

```
#Outer join:

#Right outer (data.table default): 
dtro <- merge(dt1,dt2); dtro 

   CustomerID Product   State
1:          2 Toaster Alabama
2:          4   Radio Alabama
3:          6   Radio    Ohio

#Left outer:

#Cross join: 
```

# mysql - 为什么这个 SELECT ... IN 语句不起作用？

> ID：15870101
> 
> 赞同：0
> 
> 时间：2013-04-08T01:55:35.703
> 
> 标签：mysql

我的数据库中有两个 MySQL 表，它们的结构相同，SOURCE 和 TARGET。

我用来连接两者的外键是“电子邮件”列。

基本上，TARGET 仅包含经过验证的电子邮件列表，它是 SOURCE 中电子邮件的子集，其中还包含其他从电子邮件中键入的地址数据。我需要从 SOURCE 中提取所有具有有效电子邮件的记录。很简单吧？似乎无法让 MySQL 做到这一点......

这是我的查询：

```
SELECT
  email,
  firstname,
  lastname,
  address,
  city,
  state,
  zip,
  phone
FROM Source 
WHERE email IN
  (SELECT email FROM Target); 
```

当我这样做时，我得到零记录；但我知道这`SELECT email FROM Target`行得通，而且我知道 SOURCE 包含电子邮件。

我正在尝试在 MySQL Workbench 5.2.34 中执行此操作，其中查询运行没有错误......但不产生任何输出。（而且我知道服务器正在运行等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:59:25.347

你的代码工作得很好。如果没有看到任何数据，就不可能说出导致问题的原因，但可能还有其他问题您没有向我们展示。

工作小提琴：

[http://sqlfiddle.com/#!2/7d505/1](http://sqlfiddle.com/#!2/7d505/1)

架构：

```
Create table Source(
  email varchar(30),
  firstname varchar(30),
  lastname varchar(30),
  address varchar(30)
);

Create table Target(
  email varchar(30)
);

Insert into Source (email, firstname, lastname, address) VALUES('jack@gmail.com', 'jack', 'smith', '123 pine lane');
Insert into Source (email, firstname, lastname, address) VALUES('fake@gmail.com', 'fake', 'name', '456 pine street');

Insert into Target (email) VALUES('jack@gmail.com'); 
```

查询：

```
SELECT
  email,
  firstname,
  lastname,
  address
FROM Source 
WHERE email IN
  (SELECT email FROM Target); 
```

结果：

```
jack@gmail.com  jack    smith   123 pine lane 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T22:27:48.483

我实际上已经弄清楚了……对于这篇文章的红鲱鱼感到抱歉：问题是用于创建 TARGET 表的导入文件中的额外换行符 (\n) 字符。MySQL 中的 TRIM 函数对此没有任何作用，但这就是连接不起作用的原因。一旦我删除了导入文件中的额外换行符，并重新导入了表格，瞧！代码工作...

# c# - 如何在 WAL 模式下打开 SQLite 连接

> ID：15870104
> 
> 赞同：15
> 
> 时间：2013-04-08T01:55:59.803
> 
> 标签：c#, sqlite, wal

在 C# 中，如何[在 WAL 模式下](http://www.sqlite.org/wal.html)打开 SQLite 连接？

这是我在正常模式下打开的方式：

```
SQLiteConnection connection = new SQLiteConnection("Data Source=" + file);
connection.Open();
// (Perform my query) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-08T02:31:35.227

在 SQLiteConnection 连接字符串中指定工厂方法怎么样？

例如

```
public static class Connection
{
    public abstract SQLiteConnection NewConnection(String file);
}

public class NormalConnection : Connection 
{
  public override SQLiteConnection NewConnection(String file)
  {
     return new SQLiteConnection("Data Source=" + file);
  }
}

public class WALConnection : Connection 
{
  public override SQLiteConnection NewConnection(String file)
  {
    return new SQLiteConnection("Data Source=" + file + ";PRAGMA journal_mode=WAL;"
  }
} 
```

代码未经测试，但我希望你能明白，所以当你使用它时，你可以这样做。

```
 SQLiteConnection conWal = new WALConnection(file);
    conWAL.Open();

    SQLiteConnection conNormal = new NormalConnection(file);
    conNormal.Open(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-08T03:48:44.713

下面的行是我一直在寻找的，非常感谢 Turbot 的回答，其中包括：

```
new SQLiteConnection("Data Source=" + file + ";PRAGMA journal_mode=WAL;") 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-15T11:47:19.883

WAL模式的持久化

“与其他日志模式不同，PRAGMA journal_mode=WAL 是持久的。如果进程设置 WAL 模式，然后关闭并重新打开数据库，数据库将返回 WAL 模式。”

[http://www.sqlite.org/wal.html](http://www.sqlite.org/wal.html)

如果我理解正确，这意味着您可以为数据库设置一次 WAL 模式，无需在每个连接上都设置它。

您可以使用 SQLite 的命令行 shell 来执行此操作： [http ://www.sqlite.org/sqlite.html](http://www.sqlite.org/sqlite.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-08T02:02:54.093

这是我不太完美的解决方案：

```
SQLiteConnection connection = new SQLiteConnection("Data Source=" + file);
connection.Open();
using (var command = new SQLiteCommand(sqliteConnection))
{
    command.CommandText = "PRAGMA journal_mode=WAL";
    command.ExecuteNonQuery();
}
// (Perform my query) 
```

如果你知道一些不那么冗长的东西，我会很高兴听到它！

# jquery - ajax后选择框无法正常工作

> ID：15870106
> 
> 赞同：0
> 
> 时间：2013-04-08T01:56:15.883
> 
> 标签：jquery, html

我有这个选择框：

```
<div id="opcionesdiv"><div id="o1">
Filtrar por Ciudad
<select name="ciudad" id="ciudad">  
<option value="MEDELLIN">Medellin</option>  
<option value="MANIZALES">Manizales</option>  
</select>  
<br><input name="select_comprobar" id="select_comprobar" type="button" value="Comprobar"/>
</div></div> 
```

我有这样的功能：

```
$("#select_comprobar").on('click', function(event) {
    tacuba = $("#ciudad option:selected").val();
    if (event.originalEvent === undefined) {
        ca = "2";
    } else {
        ca = "3";
    }
    var page = "1";
    dan = "g";
    deb = tacuba;
    loadData(page, dan, deb);
    return false;
}); 
```

previos 代码工作正常 loadData() 进行一些 ajax 调用。

但我有另一个这样的功能：

```
$('#container .pagination li.active').live('click', function(e) {
    var page = $(this).attr('p');
    if (ca == "3") {
        dan = "g";
        loadData(page, dan, deb);
    } else {
        loadData(page);
    }
    return false;
}); 
```

如果单击“select_comprobar”按钮并调用第二个函数只工作一次然后我得到这个（列表出现在下面，我不能使用它）：

![在此处输入图像描述](https://i.stack.imgur.com/qOcFz.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:01:38.580

`jQuery.live`已弃用并已`on`在 jquery 1.9 中替换为。

尝试更换

```
$('#container .pagination li.active').live('click', function(e) { 
```

和

```
$(document).on('click', '#container .pagination li.active', function(e) { 
```

另外，在 AJAX 请求完成后检查是否`#container .pagination`有。`.active` `<li>`

# android - Android JsonReader 无法迭代 json 数组

> ID：15870114
> 
> 赞同：2
> 
> 时间：2013-04-08T01:56:48.900
> 
> 标签：android, json, jsonreader

我正在使用`JsonReader`哪个是 Android 中的流式 JSON 解析器，我遇到了一个问题，即解析器不会遍历 json 数组中的所有项目，它只会返回第一个项目。

这是我用来进行解析的代码：

```
private ArrayList<Result> readResultsArray(JsonReader reader) throws IOException {
    ArrayList<Result> results = new ArrayList<Result>();

    reader.beginObject();
    while (reader.hasNext()) {
        String name = reader.nextName();
        if (name.equals("results")){
            reader.beginArray();
            while (reader.hasNext()) {
                results.add(readResult(reader));
            }
            reader.endArray();
        } else {
            reader.skipValue();
        }
    }
    reader.endObject();

    return results;
} 
```

我确信该方法`readResult(reader)`会解析并返回数组中的第一个对象，没有任何问题。

但读者似乎只是“忽略”了数组中的第二个对象。

这是`readResult(reader)`方法：

```
 private Result readResult(JsonReader reader) throws IOException {

        String from_user = null, 
                from_user_id_str = null, 
                from_user_name = null,
                text = null;
        Geo geo = null;
        URL profile_image_url = null;

        reader.beginObject();
        while (reader.hasNext()) {
            String name = reader.nextName();
            if (name.equals("from_user")){

                from_user = reader.nextString();
                Log.i(TAG, from_user);
            } else if (name.equals("from_user_id_str")) {

                from_user_id_str = reader.nextString();
                Log.i(TAG, from_user_id_str);
            } else if (name.equals("from_user_name")) {

                from_user_name = reader.nextString();
                Log.i(TAG, from_user_name);
            } else if (name.equals("geo")) {

                reader.beginObject();

                while(reader.hasNext()) {
//                      String s = reader.nextName();
                        if (name.equals("coordinates")) {
                            reader.beginArray();
                            double latitude = 0;
                            double longitude = 0;
                            while (reader.hasNext()) {
                                latitude = reader.nextDouble();
                                longitude = reader.nextDouble();
                                Log.i(TAG, latitude + ", " + longitude);
                            geo = new Geo(latitude, longitude);
                        }
                        reader.endArray();
                    } else {
                        reader.skipValue();
                    }
                }
                reader.endObject();

            } else if (name.equals("profile_image_url")) {

                profile_image_url = new URL(reader.nextString());

            } else if (name.equals("text")) {

                text = reader.nextString();
                Log.i(TAG, text);
            } else {

                reader.skipValue();

            }

        }
        reader.endObject();

        return new Result(from_user, from_user_id_str, from_user_name, text, geo, profile_image_url);
    }

} 
```

这是我试图解析的 JSON：

（这是一个 Twitter 搜索响应，原始响应如下所示，[链接](http://search.twitter.com/search.json?q=%E5%90%83&geocode=51.483372,-3.190826,200mi)）

```
{
  "completed_in": 0.067,
  "max_id": 320160565840457730,
  "max_id_str": "320160565840457730",
  "page": 1,
  "query": "%E5%90%83",
  "refresh_url": "?since_id=320160565840457730&q=%E5%90%83&geocode=51.483372%2C-3.190826%2C200mi",
  "results": [
    {
      "created_at": "Fri, 05 Apr 2013 13:06:41 +0000",
      "from_user": "missmanchu",
      "from_user_id": 359296258,
      "from_user_id_str": "359296258",
      "from_user_name": "miss manchu ",
      "geo": null,
      "location": "London, United Kingdom",
      "id": 320160565840457730,
      "id_str": "320160565840457730",
      "iso_language_code": "ja",
      "metadata": {
        "result_type": "recent"
      },
      "profile_image_url": "http://a0.twimg.com/profile_images/3470783234/6ae4049d90a052c7a9c7f86ec804e523_normal.jpeg",
      "profile_image_url_https": "https://si0.twimg.com/profile_images/3470783234/6ae4049d90a052c7a9c7f86ec804e523_normal.jpeg",
      "source": "&lt;a href=&quot;http://twitter.com/download/iphone&quot;&gt;Twitter for iPhone&lt;/a&gt;",
      "text": "RT @lougirlie: Delish Taiwanese-style bao by @missmanchu for lunch. 好吃！ http://t.co/clRznskvqe"
    },
    {
      "created_at": "Fri, 05 Apr 2013 11:45:09 +0000",
      "from_user": "lougirlie",
      "from_user_id": 154974289,
      "from_user_id_str": "154974289",
      "from_user_name": "Louise Chow",
      "geo": {
        "coordinates": [
          51.5216788595,
          -0.1420583511
        ],
        "type": "Point"
      },
      "id": 320140044142772224,
      "id_str": "320140044142772224",
      "iso_language_code": "ja",
      "metadata": {
        "result_type": "recent"
      },
      "place": {
        "full_name": "Westminster",
        "id": "548c2b8e3921a85a",
        "type": "CITY"
      },
      "profile_image_url": "http://a0.twimg.com/profile_images/1750994903/photo_3__4__normal.JPG",
      "profile_image_url_https": "https://si0.twimg.com/profile_images/1750994903/photo_3__4__normal.JPG",
      "source": "&lt;a href=&quot;http://twitter.com&quot;&gt;Twitter for  iPhone&lt;/a&gt;",
      "text": "Delish Taiwanese-style bao by @missmanchu for lunch. 好吃！ http://t.co/clRznskvqe"
    },
    {
      "created_at": "Fri, 05 Apr 2013 10:09:25 +0000",
      "from_user": "geleikai",
      "from_user_id": 351512769,
      "from_user_id_str": "351512769",
      "from_user_name": "geleikai",
      "geo": null,
      "location": "53.762824,-2.707418",
      "id": 320115951339200512,
      "id_str": "320115951339200512",
      "iso_language_code": "zh",
      "metadata": {
        "result_type": "recent"
      },
      "profile_image_url": "http://a0.twimg.com/profile_images/3110335584/545b94d39e1628d747428c73a8052bf8_normal.jpeg",
      "profile_image_url_https": "https://si0.twimg.com/profile_images/3110335584/545b94d39e1628d747428c73a8052bf8_normal.jpeg",
      "source": "&lt;a href=&quot;http://www.wechatapp.com&quot;&gt;WeChat App&lt;/a&gt;",
      "text": "吃过午饭，前往阿姆斯特丹 http://t.co/LbQ0Jh7Mfp"
    },
    {
      "created_at": "Thu, 04 Apr 2013 10:15:05 +0000",
      "from_user": "hpfly",
      "from_user_id": 60939059,
      "from_user_id_str": "60939059",
      "from_user_name": "0C哈根达斯",
      "geo": null,
      "location": "53.805042,-1.544011",
      "id": 319754991692824576,
      "id_str": "319754991692824576",
      "iso_language_code": "zh",
      "metadata": {
        "result_type": "recent"
      },
      "profile_image_url": "http://a0.twimg.com/profile_images/3251267049/c56ca4cb888736299548e5454a9d923b_normal.jpeg",
      "profile_image_url_https": "https://si0.twimg.com/profile_images/3251267049/c56ca4cb888736299548e5454a9d923b_normal.jpeg",
      "source": "&lt;a href=&quot;http://fanfou.com&quot;&gt;fanfou2.0&lt;/a&gt;",
      "text": "现在对谈恋爱一点欲望都没有，更多的欲望是告诉我，我内心希望独享一个人的时光。现在特别希望晚睡，而且是晚上一个人吃着宵夜，看着电视。#如果生活可以这么单纯就好了##当然这也是晚睡的牵强理由#"
    },
    {
      "created_at": "Wed, 03 Apr 2013 15:47:50 +0000",
      "from_user": "cushingliu",
      "from_user_id": 87816289,
      "from_user_id_str": "87816289",
      "from_user_name": "Cushing",
      "geo": {
        "coordinates": [
          0.0,
          0.0
        ],
        "type": "Point"
      },
      "id": 319476345325359104,
      "id_str": "319476345325359104",
      "iso_language_code": "zh",
      "metadata": {
        "result_type": "recent"
      },
      "place": {
        "full_name": "Batu Ampar",
        "id": "ddc693317ed3f226",
        "type": "CITY"
      },
      "profile_image_url": "http://a0.twimg.com/profile_images/3269471232/f89db3764b70bada908ab340a9fb9c85_normal.jpeg",
      "profile_image_url_https": "https://si0.twimg.com/profile_images/3269471232/f89db3764b70bada908ab340a9fb9c85_normal.jpeg",
      "source": "&lt;a href=&quot;http://tapbots.com/tweetbot&quot;&gt;Tweetbot for iOS&lt;/a&gt;",
      "text": "有妈妈做饭吃的感觉真好"
    }
  ],
  "results_per_page": 15,
  "since_id": 0,
  "since_id_str": "0"
} 
```

我感兴趣的唯一部分是`"results"`，它是两个对象的数组。

在仔细查看了[Android Developers - JsonReader](http://developer.android.com/reference/android/util/JsonReader.html)中的示例以及这个[不错的教程](http://tech.xtremelabs.com/parsing-json-data-efficiently-on-android-jsonreader/)后，我发现我的与他们的基本没有区别。

那么我的代码有什么问题？为什么它不能遍历 json 数组？

# 更新

贴上代码`readResult(reader)`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T13:17:33.413

您没有考虑会导致原始代码异常的空地理类型。用于`peek()`检查是否为空。我修改了代码来处理这个问题，它打印了两个对象。

```
class MyReader
{
    public void readBegin(JsonReader reader)
    {
        try
        {
            reader.beginObject();
            while (reader.hasNext())
            {
                String name = reader.nextName();
                if (name.equals("results"))
                {
                    reader.beginArray();
                    while (reader.hasNext())
                    {
                        read(reader);
                    }
                    reader.endArray();
                }
                else
                {
                    reader.skipValue();
                }
            }
            reader.endObject();
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }

    public void read(JsonReader reader) throws Exception
    {

        String from_user = null, from_user_id_str = null, from_user_name = null, text = null;
        URL profile_image_url = null;

        reader.beginObject();
        while (reader.hasNext())
        {
            String name = reader.nextName();
            if (name.equals("from_user"))
            {
                from_user = reader.nextString();
                System.out.println(from_user);
            }
            else if (name.equals("from_user_id_str"))
            {

                from_user_id_str = reader.nextString();
            }
            else if (name.equals("from_user_name"))
            {

                from_user_name = reader.nextString();
            }
            else if (name.equals("geo"))
            {
                if (reader.hasNext())
                {
                    JsonToken peek = reader.peek();
                    if (peek == JsonToken.NULL)
                    {
                        reader.skipValue();
                    }
                    else
                    {
                        reader.beginObject();
                        while (reader.hasNext())
                        {
                            // String s = reader.nextName();
                            if (name.equals("coordinates"))
                            {
                                reader.beginArray();
                                double latitude = 0;
                                double longitude = 0;
                                while (reader.hasNext())
                                {
                                    latitude = reader.nextDouble();
                                    longitude = reader.nextDouble();
                                }
                                reader.endArray();
                            }
                            else
                            {
                                reader.skipValue();
                            }
                        }
                        reader.endObject();
                    }
                }

            }
            else if (name.equals("profile_image_url"))
            {

                profile_image_url = new URL(reader.nextString());

            }
            else if (name.equals("text"))
            {

                text = reader.nextString();
            }
            else
            {
                reader.skipValue();
            }
        }
        reader.endObject();
    } 
```

# mongodb - 验证 Mongoose 混合模式类型

> ID：15870120
> 
> 赞同：2
> 
> 时间：2013-04-08T01:57:22.437
> 
> 标签：mongodb, mongoose

我有一个架构：

```
// Schema
var Product = new Schema({
  data: {
    type: mongoose.Schema.Types.Mixed
  },
  created: {
    type: Date,
    'default' : Date.now
  }
}); 
```

'data' 字段用于存储会变化的 json 字符串。但是，我确实想执行一些基本验证，例如长度等。但是这样做：

```
// Validation
Product.path('data').validate(function (value) {
  console.log(value);
  return value.length > 0;
}, 'Data cannot be blank'); 
```

引发有关数据不存在的错误：

```
TypeError: Cannot read property 'length' of undefined 
```

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T01:26:14.917

您将“价值”视为一个对象，而不检查它是否真的是。试试这个：

```
if(typeof value !== "undefined" && value !== null)
{
  return value.length > 0
} 
```

# ruby - Ruby 的 Slim 模板语言中的 PHP 可能性

> ID：15870123
> 
> 赞同：0
> 
> 时间：2013-04-08T01:57:38.640
> 
> 标签：ruby, template-engine, slim-lang

在 PHP 中，我可以这样做：

```
<div class="foo <?php if($a) echo "bar"; ?>">
<?php if ($b) echo "</div>"; ?> 
```

这非常方便。我可以在任何地方、任何引号之间、任何 HTML 符号之间、在任何我想要的地方打断字符串。

我需要在 Ruby-HTML 中实现相同的功能。我正在尝试将 PHP 项目移植到 Ruby。我使用 Slim 模板语言。我试过这个但它不起作用，Slim 抛出错误：

```
<div class="foo
- if (x == 1)
  = bar
"></div> 
```

目前对于 Slim，我只知道一种方法：

```
- if (a == true)
   <div class="foo"></div>
- else
   <div class="foo bar"></div> 
```

首先，复制。其次，我的 HTML-PHP 部分代码相当复杂。它有两个循环（其中的`for`循环和`foreach`循环），我使用多个这样的嵌入来根据条件添加 div 的属性。只是无法想象如何用 Slim 实现它。即使为此它也会引发错误，我无法打破长 html 字符串：

```
- if(i != 5)
  <div class="foo bar" 
  id="item_#{i}" 
  style="background-color:red;" 
  data-im="baz">
  </div>
- else 
```

Slim 是否允许`if`在引号或元素属性之间使用条件 s 断开字符串？怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T04:58:29.523

如果您使用的是 Rails，您可以自由地以`ActionView::Helpers`这种方式提供便利：

```
= content_tag :li, class: ( a == true ? "foo bar" : "foo") do
  inside div 
```

否则，您可以自由创建一些辅助方法来为您涵盖此逻辑

然而，在视图中包含大量逻辑被认为是一种不良做法。考虑使用一些`Presenter pattern`

编辑。

查看一些[苗条的文档](http://rdoc.info/github/slim-template/slim#Attributes)发现您可以通过这种方式实现您的目标

```
div.foo class="#{'bar' if a == true}"
  | Text inside div 
```

# sql - 具有多个连接和分组依据的 SQL 嵌套总和

> ID：15870124
> 
> 赞同：4
> 
> 时间：2013-04-08T01:57:41.387
> 
> 标签：sql, oracle

我对 SQL 不是很熟悉。我正在使用甲骨文。我遇到了一个过度求和字段的问题。

以下是示例表：

```
A:
    A_ID
    A_NAME

B:
    B_ID
    A_ID
    B_NAME
    B_QTY
C:
    C_ID
    B_ID
    C_QTY 
```

所以数据结构就像 A -> *B -> *C

我需要获取按 B_NAME 和 A_ID 分组的 Bs 和 Cs 的总量。例如：

```
A:
    A_ID    A_NAME
    1       A1
B:
    B_ID    A_ID    B_NAME  B_QTY
    1       1       B1  20
    2       1       B1  5
    3       1       B1  5
    4       1       B2  5
C:
    C_ID    B_ID    C_QTY
    1       1       3
    2       1       4
    4       2       2
    5       2       1
    6       3       1
    7       4       1 
```

预期结果是：

```
A_ID    A_NAME  B_NAME  B_QTY   C_QTY
1       A1      B1      30      11
1       A1      B2      5       1 
```

第一行 B_QTY 的 30 是 20 + 5 + 5 的结果。

第一行 C_QTY 的 11 是 3 + 4 + 2 + 1 + 1 的结果。

这是我的sql：

```
select a.A_ID,
    a.A_NAME,
    b.B_NAME
    sum(b.B_QTY),
    sum(c.C_QTY)
from A a left outer join B b on b.A_ID = a.A_ID
left outer join C c on c.B_ID = b.B_ID
group by a.A_ID
order by a.A_ID, b.B_NAME
    where a.XXXX = XXXXX; 
```

所以问题是：

由于 B 映射到多个 C，因此 B_QTY 将被多次求和。我对 SQL 不是很熟悉，所以我不知道是否有任何简单的方法可以根据某些字段（在我的示例中为 B_ID）来区分求和。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T04:49:55.123

这也可以这样做：

```
WITH b2 AS
(SELECT b.*, sum(b.b_qty) over (partition BY b.a_id, b.b_name) b_qty_s
             FROM b)
SELECT a.a_id, a.a_name, b2.b_name, b2.b_qty_s, sum(c.c_qty) c_qty_s
FROM a JOIN b2 ON a.a_id = b2.a_id
JOIN c ON b2.b_id = c.b_id
GROUP BY a.a_id,a.a_name, b2.b_name, b2.b_qty_s 
```

[这是一个 sqlfiddle 演示](http://sqlfiddle.com/#!4/59066/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T02:35:46.490

我**[为这个问题创建了一个 SQL 小提琴](http://sqlfiddle.com/#!4/775c8/12)**。诀窍是 B_QTY 不止一次出现在您的结果中。总结它是人为地给出了一个高值。因此，改为运行子选择以仅使用 B_NAME 一次！好问题！:^D

ABCade 的回答很酷，但这个解决方案适用于许多数据库。我以前在 SQL Server、Oracle 和 Informix 中使用过这种技术。

数据/架构：

```
create table a (A_ID int, A_NAME char(10));
create table b (B_ID int, A_ID int, B_NAME char(10), B_QTY int);
create table c (C_ID int, B_ID int, C_QTY int);
-- One dude
insert into a values (1,'Xiezi');
-- 2 orders? of 4 and 3
insert into b values (1,1,'B1',20);
insert into b values (2,1,'B1',5);
insert into b values (3,1,'B1',5);
insert into b values (4,1,'B2',5);
-- 2 order with 2 lines each.
insert into c values (1,1,3);
insert into c values (2,1,4);
insert into c values (4,2,2);
insert into c values (5,2,1);
insert into c values (6,3,1);
insert into c values (7,4,1); 
```

SQL（答案）：

```
select a.A_ID,
    a.A_NAME,
    b.B_NAME,
    (select sum(b2.B_QTY) from b b2 where b2.B_NAME = b.B_NAME)
    as sum_b_qty,
    sum(c.C_QTY)
from a left outer join b on b.A_ID = a.A_ID
left outer join c on c.B_ID = b.B_ID
group by a.A_ID,
    a.A_NAME,
    b.B_NAME
order by a.A_ID
; 
```

输出：

```
A_ID A_NAME B_NAME  SUM_B_QTY SUM(C.C_QTY)
1    Xiezi  B1      30        11
1    Xiezi  B2      5         1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T05:41:59.677

你也可以这样做：

```
SELECT DISTINCT A_ID,A_NAME,B_NAME,B_SUM,SUM(C_QTY) OVER(PARTITION BY A_NAME,B_NAME) C_SUM
FROM (
SELECT A.A_ID,A_NAME,B_NAME,B_ID,SUM(B_QTY) OVER(PARTITION BY A_NAME,B_NAME) B_SUM
FROM A JOIN B
ON A.A_ID=B.A_ID) T1 
JOIN C
ON T1.B_ID=C.B_ID 
```

![在此处输入图像描述](https://i.stack.imgur.com/P42cW.png)

# mysql - 动态创建新列并按该列排序

> ID：15870126
> 
> 赞同：0
> 
> 时间：2013-04-08T01:57:57.643
> 
> 标签：mysql, sql, database

我有一张过去不同日期的物品价格表。这基本上是我所拥有的：

```
Item      Price   Date
----------------------------
Item 1    1.83    04-06
Item 1    1.56    04-07
Item 2    2.37    04-06
Item 2    2.94    04-07
Item 3    0.68    04-06
Item 3    0.54    04-07 
```

我想按价格变化对商品进行排序。我不知道如何使用 MySQL 来解决这个问题，这甚至可能只使用 MySQL 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:06:00.540

我假设您的表名为`Items`. 像这样的东西？

```
SELECT t1.Price - t2.Price as PriceDiff, t2.* 
FROM Items as t1, Items as t2 
WHERE TO_DAYS(t1.Date) - TO_DAYS(t2.Date) = 1 AND t1.Item = t2.Item 
ORDER BY PriceDiff ASC 
```

关键是根据项目名称和前一天的项目匹配项目...您可能需要将日期列更改为日期时间，不确定其当前类型。

```
TO_DAYS(t1.date) - TO_DAYS(t2.date) = 1 AND t1.Item = t2.Item 
```

如果您只想从特定日期开始更改价格，请添加`AND Date = 'yourdate'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:21:18.920

补充一下 Andy 所说的，一般来说，您每次想要将一个表与其自身进行比较时（即同一个表中两行之间的某个函数），您将需要对函数中的每个变量进行连接。

```
SELECT i1.price as 'i1', i2.price as 'i2', i1.price-i2.price as priceDiff, i1.id
FROM itemPrice i1
JOIN itemPrice i2 on i1.id = i2.id
WHERE DATE_ADD(i1.pdate, INTERVAL -1 DAY) = i2.pdate
ORDER BY PRICEDIFF desc 
```

[http://sqlfiddle.com/#!2/3eec6/4](http://sqlfiddle.com/#!2/3eec6/4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T04:11:39.520

下面的sql应该做

```
SELECT Item, MAX(Price) - MIN(Price) as PriceDiff
FROM Table
GROUP BY Item
ORDER BY MAX(Price) - MIN(Price) 
```

# linux - Linux Shell：如何获取 sshd 端口和 PID

> ID：15870129
> 
> 赞同：-2
> 
> 时间：2013-04-08T01:58:15.907
> 
> 标签：linux, shell, sed

我使用以下命令：

```
sudo netstat -tnp | grep sshd 
```

输出是：

```
tcp        0      0 192.201.0.8:22          192.201.0.90:2690       ESTABLISHED 1866/sshd: yang [pr 
```

比，我使用以下命令：

```
$ echo -n "sshd Port&&pid: " ; sudo netstat -tnp | grep sshd | awk '{print $4, $7}' | sed -r 's/^[^:]*:([a-z]*)/\1/g' 
```

输出是：

```
sshd Port&&pid: 22 1866/sshd: 
```

最后，使用以下命令：

```
$ echo -n "sshd Port&&pid: " ; sudo netstat -tnp | grep sshd | awk '{print $4, $7}' | sed -r 's/^[^:]*:([a-z]*)/\1/g; s/([0-9]*)\/sshd:$/\1/g' 
```

输出是：

```
sshd Port&&pid: 22 1866 
```

虽然我已经解决了我的问题，但有没有更好的方法呢？

另一个答案：

```
$ sudo netstat -anp | grep "sshd" | grep -v "\]" | sed -r 's/.*:([0-9]+).* ([0-9]*)\/.*$/sshd Port\&\&pid: \1 \2/' | sort | uniq 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:41:09.507

你想多了这个问题：

```
netstat -anp | awk -F"[: /]" '/sshd/{printf "sshd Port&&pid: %s %s\n", $5,$9 }'
sshd Port&&pid: 22 1866 
```

也就是说：这适用于我的机器，您的 netstats 输出可能会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T02:38:43.913

例如：

```
$ echo foo/bar | sed 's,/.*,,'
foo
$ 
```

# python - 如何将计划的操作排队

> ID：15870130
> 
> 赞同：0
> 
> 时间：2013-04-08T01:58:24.963
> 
> 标签：python, django, heroku, celery, django-celery

我正在尝试为托管在heroku上的带有芹菜的Django应用程序设置一些计划任务。除了不知道应该如何配置一切之外，解决这个问题的最佳方法是什么？

假设用户可以选择在他们选择的时间接收每日电子邮件。

我是否应该有一个每隔 5 分钟运行一次的预定作业。查找当时想要收到电子邮件的每个用户，然后关闭电子邮件？

或者

当每个用户设置他们的偏好时，为他们安排一个任务。（不确定我将如何实际实现这一点）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:59:28.370

这取决于您需要多少准确度。您是否希望用户选择精确到分钟的时间？第二？或者允许他们选择他们希望通过电子邮件发送的时间就足够了。

如果整点时间足够准确，则使用一项任务，该任务每小时轮询用户发送邮件。

如果您的用户需要邮件准确到秒，则为每个用户设置一个任务，定时在该秒完成。

两者之间的一切都归结为个人选择。你更喜欢做什么，甚至更重要的是：*什么产生最简单的代码和最少的故障模式*？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:06:11.390

我建议第一个选项（查找优秀工作的预定工作） - 更易于扩展和管理。如果您有 1000 多个用户怎么办 - 这就是发送电子邮件的大量任务。

如果您将数据库用作 celery 代理，则可以使用 django-celery 内置的类似 cron 的调度，这将允许您动态创建和销毁任务。不过，我不喜欢为我的经纪人使用数据库。

此外，您可能想查看[chronos](http://airbnb.github.io/chronos/)

# sql - MS Access：使用查询作为文本框的控制源

> ID：15870137
> 
> 赞同：0
> 
> 时间：2013-04-08T01:59:37.167
> 
> 标签：sql, ms-access

我有这个查询，它返回一个值：

```
SELECT Sum(Track.duration) AS [Run time]
FROM Track INNER JOIN ContainsTracks ON Track.trackName = ContainsTracks.tracks
WHERE (((ContainsTracks.albums) Like [Forms]![AlbumDuration Param Query]![Combo1])); 
```

我希望这个值出现在我从中获取专辑值的同一表单上的文本框中（AlbumDuration Param Query 是表单的名称，查询称为 AlbumDuration）。

我对此进行了搜索，发现将其放在文本框的控制源中应该可以：

```
=DLookUp("Run time","AlbumDuration") 
```

但这只是显示一个错误。

**如何在文本框中显示查询的内容？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:16:10.693

您需要用方括号将运行时间括起来，因为它包含一个空格：

```
[Run time] 
```

# c# - ASP.NET 高效聊天应用程序方法

> ID：15870138
> 
> 赞同：5
> 
> 时间：2013-04-08T01:59:39.800
> 
> 标签：c#, asp.net, ajax, web-services, chat

我有与 SQL SERVER 2005/2008 连接的 ASP.NET 4 Web 应用程序

我想为我的应用程序用户添加“聊天”功能。

假设该功能将从头开始构建，那么最有效的合理方法是什么：

1.  每 3 秒使用带有 Javascript 计时器的[WCF Web 服务](http://msdn.microsoft.com/en-us/library/dd456779%28v=vs.100%29.aspx)
2.  每 3 秒使用带有 javascript 计时器的 ASMX Web 服务
3.  使用来自 ASP.NET（更新面板）的 AJAX 控件并根据 ASP.NET 计时器（服务器端）每 3 秒执行一次部分回发。
4.  从数据库向应用程序发送请求，告诉他在有新消息时刷新自己（我不知道这种方法，但我认为该技术存在，但我什至不知道它的名称）
5.  Microsoft AJAX .NET Framework 之外的一些 JQuery AJAX 技术。这些技术应该能够与 SQL Server 通信并与 ASP.NET（不是 PHP）兼容。我不确定这种方法。
6.  任何其他方法或意见。

假设该功能将根据先前实现的库构建。有哪些可能的库是完全定制的并且很可能是开源的。如果该库将节省 25% 的工作时间，那就太好了，但如果隐藏代码（盲 DLL）非常关键，即使它节省了 80% 的工作时间，我也不能使用它。

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T02:03:53.170

您应该查看 SignalR - 它非常好，并且需要较少的配置。

SignalR 项目 - [http://signalr.net/](http://signalr.net/)

SignalR，简单实现 - [http://rizwanahmed.net/?p=227](http://rizwanahmed.net/?p=227)

如果您有更多问题，请告诉我...

谢谢， 里兹

# ios - #定义负数？

> ID：15870140
> 
> 赞同：2
> 
> 时间：2013-04-08T02:00:18.360
> 
> 标签：ios, objective-c, xcode, c-preprocessor

简单的问题，但我似乎找不到答案。是否可以使用`#define`定义负数，如：

```
#define kGravity -9.8 
```

XCode 将 9.8 更改为我设置的数字的颜色（紫色），但`-`显示为与定义语句相同的颜色（橙色）。

这合法吗？会编译吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T02:05:07.537

你试过了吗？它应该可以正常工作。

但是，我鼓励您不要使用预处理器宏，而是使用实常数。

```
static const float kGravity = -9.8f; 
```

一般来说，预处理器指令有点不受欢迎。以下是有关该主题的更多信息：[#define vs const in Objective-C](https://stackoverflow.com/questions/11153156/define-vs-const-in-objective-c)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T02:02:38.047

用 定义负常数是绝对合法的`#define`。您发现的很可能是 Xcode 代码着色中的一个错误，这可能会在未来的某个版本中得到修复。

# file - Hadoop重命名文件

> ID：15870143
> 
> 赞同：23
> 
> 时间：2013-04-08T02:00:58.890
> 
> 标签：file, hadoop, hdfs

是否有一个简单的 hadoop 命令可以将文件的名称（在 HDFS 中）从旧名称更改为新名称？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-08T06:49:34.780

使用以下内容：

```
hadoop fs -mv oldname newname 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-13T14:50:59.417

上面的效果很好。这个版本也一直对我有用。

```
hdfs dfs -mv oldname.txt newname.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-15T12:11:22.373

您可以编写以下查询来更改本地环境和 HDFS 环境中的文件名。

本地机器： mv '旧文件名连同路径' '新文件名连同路径'

例如：xyz.txt 是您要重命名为 new_xyz.txt 的用户文件夹下的文件

**mv 'user/Xyz.txt' 'user/new_xyz.txt';**

Hadoop 环境（HDFS 环境）：假设您已经将文件转储到 HDFS 环境中的文件夹下（例如）**test/Xyz.txt**

语法可以是：hadoop fs -mv 'old file with path' 'New file name with path'

**hadoop fs -mv 'test/Xyz.txt' 'test/new_xyz.txt'**

# asp.net - 如何 mklink 到文件共享，以便网络可以将上传的文件保存到其中？

> ID：15870150
> 
> 赞同：0
> 
> 时间：2013-04-08T02:01:54.427
> 
> 标签：asp.net, file-upload, security, fileshare

如何 mklink 到文件共享，以便网络可以将上传的文件保存到其中？

我的 Web 和文件服务器都属于工作组。我不关心安全性，也不想要域解决方案。最初，我有一个带有子文件夹的 AWeb：Work 文件夹，它的子文件夹具有 IIS_IUSRS 的修改权限，并且我的 AppPool Indentity 设置为 NetworkService ... 并且效果很好。现在，我想用指向文件共享的符号链接替换 ​​Files 文件夹。C:\inetpub\wwwroot\AWeb\Work\Files

从提升的提示： mklink /d “C:\inetpub\wwwroot\AWeb\Work\Files” “\\FileServer\Files”</p>

C:\inetpub\wwwroot\AWeb\Work\Files

这适用于我的帐户，但不适用于 NetworkService 帐户。我怎样才能让它工作？我在论坛中尝试了一些解决方案，例如将提示提升到管理员，然后使用 psexec.exe 提升到系统，但仍然没有成功。当我收到拒绝访问的错误时，如何记录或检查实际发生的情况？当我不知道密码是什么时，如何为 NetworkService 之类的帐户设置文件共享访问权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:57:59.237

看起来最好的方法是设置 iSCSI 目标和初始化程序。但是还是想试试没有。

# c# - 使用 c# 和 xna 在单独的类中加载纹理 2D

> ID：15870152
> 
> 赞同：2
> 
> 时间：2013-04-08T02:01:59.323
> 
> 标签：c#, xna, texture2d

我一直在 xna 中为我的游戏添加一堆纹理，所以我决定创建一个单独的类来加载和绘制纹理。

这就是我到目前为止所拥有的

```
using System.Text;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace Trolls_and_Towers
{

class Textures
{
    //Texture loading

        //Buttons
    public static Texture2D button;

    public static void Load()
    {
        Microsoft.Xna.Framework.Game game = new Microsoft.Xna.Framework.Game();
        button = game.Content.Load<Texture2D>("button");
    }

    public static void Draw()
    {
        Game1.spriteBatch.Draw(button, new Rectangle(20, Game1.screenHeight - 70, 100, 50), Color.White);
    }
}
} 
```

问题是它找不到按钮纹理，我知道它没有拼写错误，因为当我在游戏的 Load 方法中加载它时它可以工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:12:11.547

每当您创建一个新的 XNA 项目时，构造函数中都会有这个：

```
 public Game1()
    {
        _graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
    } 
```

或者，您可以执行以下操作：

```
 class Game
    {

    }

    class TextureManager
    {
        public TextureManager(Game game)
        {

        } 
    } 
```

请注意，[https://gamedev.stackexchange.com/](https://gamedev.stackexchange.com/)将是您提出游戏开发相关问题的更好地方。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T09:24:19.463

您还可以从 game1-loadcontent-void 和 gibe content-Manager 中调用您的加载方法作为参数。然后你也可以在另一个类中调用 Content.Loaf 。

# php - 列出目录上的文件并将结果打印为 JSON

> ID：15870159
> 
> 赞同：2
> 
> 时间：2013-04-08T02:03:14.000
> 
> 标签：php, json

对不起，如果我的问题是基本的，因为我不熟悉 php 和 json。我已经创建了一个 php 文件，其中列出了我的服务器上的一个目录，并且应该将结果打印为 JSON。那么，我该怎么做呢？

这是我列出目录中文件的代码：

```
<?php

$dir = "picture/";

if(is_dir($dir)){

    if($dh = opendir($dir)){
        while(($file = readdir($dh)) != false){

            if($file == "." or $file == ".."){

            } else {
                echo $file."<br />";
                //echo json_encode($file);
            }
        }
    }
}

?> 
```

谢谢您的答复....

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-05-27T17:01:54.037

我修改了弗朗西斯科的代码：

```
<?php
header('Content-Type: application/json');

$dir          = "./"; //path

$list = array(); //main array

if(is_dir($dir)){
    if($dh = opendir($dir)){
        while(($file = readdir($dh)) != false){

            if($file == "." or $file == ".."){
                //...
            } else { //create object with two fields
                $list3 = array(
                'file' => $file, 
                'size' => filesize($file));
                array_push($list, $list3);
            }
        }
    }

    $return_array = array('files'=> $list);

    echo json_encode($return_array);
}

?> 
```

结果：

```
{
    "files": [{
            "file": "element1.txt",
            "size": 10
        }, {
            "file": "element2.txt",
            "size": 10
        }
    ]
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T02:07:01.030

也许尝试这样的事情？

```
<?php

$dir          = "picture/";
$return_array = array();

if(is_dir($dir)){

    if($dh = opendir($dir)){
        while(($file = readdir($dh)) != false){

            if($file == "." or $file == ".."){

            } else {
                $return_array[] = $file; // Add the file to the array
            }
        }
    }

    echo json_encode($return_array);
}

?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-25T11:43:56.897

您可以使用此代码命名数组并设置相同的键：

```
<?php

$dir = "../uploads";
if(is_dir($dir)){
    if($dh = opendir($dir)){
        while(($file = readdir($dh)) != false){
            if($file != "." and $file != ".."){
                $files_array[] = array('file' => $file); // Add the file to the array
            } 
        }
    }
    $return_array =array('name_array' => $files_array);

    exit (json_encode($return_array));
}

?> 
```

# javascript - jQuery 1.7+ on(click..) 不起作用 动态添加

> ID：15870161
> 
> 赞同：0
> 
> 时间：2013-04-08T02:03:49.420
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

我有一个对话

```
<ul id="suggestions0">
    <li id="suggestion0-0" class="suggestion">BLO</li>
    <li id="suggestion0-1" class="suggestion">BLU</li>
    <li id="suggestion0-2" class="suggestion">BLL</li>
    <li id="suggestion0-3" class="suggestion">BOO</li>
    <li id="suggestion0-4" class="suggestion">CLA</li>
</ul> 
```

我想动态替换内容。

我用这个更改为 ul 内容

```
 $("#suggestions0").html("<li id='test0-1' class='suggestion'>BLO</li><li id='test0-2' class='suggestion'>BLO</li><li id='test0-3' class='suggestion'>BLO</li><li id='test0-4' class='suggestion'>BLO</li><li id='test0-5' class='suggestion'>BLO</li><li id='test0-6' class='suggestion'>BLO</li>"); 
```

我想要的是当我点击其中一个词时，我想做一些事情，假设一个警报。

我试着这样做

```
$(".suggestion").on("click", function() {
    alert(this.id);
}); 
```

但警报从未出现。

这里有一个显示问题的示例 [http://jsfiddle.net/survivant/cyFxp/1/](http://jsfiddle.net/survivant/cyFxp/1/)

在示例中，如果单击 OK，它不会更改为内容，因此如果单击 LI，它将起作用，但如果单击 NOTOK，则不会接收到事件。

我正在使用 jQuery 1.7+，live api 已被弃用或删除，API 建议使用 on()。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T02:08:07.813

你没有`on`正确使用。`live`用于将事件处理程序绑定到文档以侦听从特定选择器冒出的事件，但是通过`on`显式调用 on `.suggestion`，您只会将侦听器附加到现有建议。所以你需要使用`on`来绑定一个永远存在的元素，并传递一个选择器来挑选出动态创建的元素。

```
// With live like this:
$('.suggestion').live('click', ...

// Is equivalent to this:
$(document).on('click', '.suggestion', ...

// Not this:
$('.suggestion').on('click', ... 
```

在您的情况下`on`，`document`您可以使用您的`ul`.

```
$("#suggestions0").on('click', '.suggestion', function(){
  alert(this.id);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T02:10:14.450

我找到了一个解决方案，不确定这是最好的解决方案，但似乎可行。

```
$("#suggestions").on("click","li", function() {
    alert(this.id);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T02:27:20.133

下面的脚本仅将点击事件绑定到页面中当前存在的 DOM。

```
$(".suggestion").on("click", function() {
    alert(this.id);
}); 
```

将点击事件绑定到页面中已创建和将要创建的所有 DOM。将事件绑定到`document`。

```
$(document).on("click", ".suggestion", function() {
    alert(this.id);
}); 
```

有关代码，请参见[提琴手](http://jsfiddle.net/YpLmK/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T02:09:14.197

将选择器传递给`on()`它，它就像旧的一样工作`live()`：

```
$("#suggestions0").on("click", ".suggestion", function () { alert(this.id); }); 
```

请参阅更新的小提琴：http: [//jsfiddle.net/cyFxp/2/](http://jsfiddle.net/cyFxp/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T02:23:33.507

建议不是一个类，而是一个 id，因此它不应该是

```
$(".suggestion").on("click", function() {
alert(this.id);
}); 
```

但是像这样

```
$("#suggestion").on("click", function() {
    alert(this.id);
}); 
```

也就是说，不是点，而是在它前面加上井号#。

# android - HTML5 Android Phonegap Web 应用程序无法使用缓存清单脱机工作

> ID：15870163
> 
> 赞同：7
> 
> 时间：2013-04-08T02:04:09.723
> 
> 标签：android, html, cordova, cache-manifest

我有一个使用 Phonegap 和 Android 构建的简单 Web 应用程序，它从服务器调用外部资源（js、css、html），而不是将其存储在 Phonegap 资产文件夹中。我更喜欢使用外部资源，因为我的服务器可以提供负责国际化的 html 页面。

当 WIFI 打开时，这个网络应用程序在我的 android 设备上运行良好，但在停止 WIFI 时失败。我的服务器提供的 index.html 文件包含一个有效的清单文件，该**清单文件**具有正确的 mimetype（'text/cache-manifest'），其中列出了应用程序需要运行的每个文件。

我的 Android Activity 类应该启用缓存：

```
 this.appView.getSettings().setDomStorageEnabled(true);
    this.appView.getSettings().setAppCacheMaxSize(1024 * 1024 * 15);  

    String appCachePath = getApplicationContext().getCacheDir().getAbsolutePath();
    this.appView.getSettings().setAppCachePath(appCachePath);
    this.appView.getSettings().setAllowFileAccess(true);
    this.appView.getSettings().setAppCacheEnabled(true); 
```

值得一提的是，我的应用程序使用带有 /aaa/bbb/ 等 URL 的 ajax 调用从服务器调用网页，我不知道这是否是问题所在（我不会像 index.html 那样直接调用物理页面） ...但是，此 Web 应用程序在离线时在桌面浏览器 (Google Chrome) 中运行良好...

知道我还能做些什么来在我的 Phonegap 应用程序上启用此 HTML5 缓存功能吗？

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T14:38:40.520

玩了一段时间后，我开始工作了。当遇到此类缓存问题时，您应该验证以下几点：

*   注意使用 GET 方法传递的 url 参数...在我的应用程序页面之间导航时，我正在传递参数，这些参数使我的 url 与清单文件中的 url 不同，从而导致缓存失败。
*   在我的手机上测试离线模式时，我只是关闭了 WIFI，认为这足以触发我的应用程序的缓存版本，但事实并非如此......因为我正在测试我在本地网络 IP 下发布的应用程序（如 192.168.2.11 )，看来我的应用程序正试图通过仍处于开启状态的 3G 网络访问该 IP……所以在离线测试时使用飞行模式。
*   不确定这是否是必要的，因为我在其他一些线程上阅读它，但我将清单文件重命名为 cache.manifest。

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T01:12:29.987

显然，您需要“修复 Android Shell Native App 以启用 HTML5 缓存”。

如果您还没有，请查看：

[http://tmkmobile.wordpress.com/2012/03/04/html5-offline-solution/](http://tmkmobile.wordpress.com/2012/03/04/html5-offline-solution/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T18:58:57.950

我正在开发一个类似的系统。我所做的是我创建了 Phonegap 网页并将它们存储在我的 WAMP 服务器的 www 文件夹中。然后我所做的就是我在 onCreate 方法中基本上是 super.LoadURL("insert_ip_address_here/insert_name_of_folder_where_webpage_is_located") ，这会完美地加载 phonegap 应用程序（是的，您只需要 Android 应用程序本身中的一行代码）。但是，您仍然必须确保正确完成 phonegap 所需的 config.xml、清单和所有配置（有关此方面的说明，请参阅[https://www.adobe.com/devnet/archive/html5/articles/getting-started -with-phonegap-in-eclipse-for-android.html](https://www.adobe.com/devnet/archive/html5/articles/getting-started-with-phonegap-in-eclipse-for-android.html)）。

让我知道这是否是您选择追求的道路。我可以提供额外的支持，例如使用多播使本地系统的 ip 地址（在 super.loadurl(...) 行中）动态等。

# django - Django 1.5.1 - 运行 startapp 时缺少 Admin.py

> ID：15870164
> 
> 赞同：1
> 
> 时间：2013-04-08T02:04:32.987
> 
> 标签：django

我一直在关注 DjangoProject 教程。当我在与 manage.py 相同的目录中运行 python manage.py startapp newapp 时。在 newapp 目录中，我看到了 init.py、models.py、tests.py 和 views.py，但没有看到 admin.py 文件。admin.py 在哪里？

我在 Windows 8 中运行 Django 1.5.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T02:07:58.543

您必须**创建**一个`admin.py`文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T07:06:12.143

我想我在 DjangoProject 教程之后也有同样的挫败感 - 但是，当我将它与 DjangoBook 教程交叉引用时（我相信，对于相同的版本，1.5.1），我发现`admin.py`文件不一定是在之后创建的`python manage.py startapp xyz`命令——此外，我还取消了所有管理选项的注释`urls.py`,`views.py`和`settings.py`- 所以有点像 Neal 和 Ibrahim 所说的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T07:27:10.737

没有默认值的原因`admin.py`是因为您在创建新应用程序时还没有任何模型；所以没有什么可以添加到管理部分。

此外，您可能不想管理应用程序中的所有模型；或者您可能正在创建一个不需要任何管理员连接的应用程序；或者您可能根本没有在您的项目中使用管理应用程序。

由于 django 无法为您决定这一点，因此不会`admin.py`生成默认值。

要创建一个，如果您遵循本教程 - 只需继续阅读，在[第二部分](https://docs.djangoproject.com/en/1.5/intro/tutorial02/)`admin.py`中，您将在了解 admin contrib 应用程序以及如何将其与您的自定义模型集成时创建该文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-30T07:18:55.600

如果需要，您必须在应用程序中创建自己的 admin.py 文件。事实上，这个文件是可选的，不是由 startapp 创建的。

如果你想要一个默认模板来开始你的 admin.py，它应该是：

```
from django.contrib import admin
from models import Model1, Model2

class Model2Admin(admin.ModelAdmin):
    list_display   = ('title', 'content', 'date')
    # Just an example, chekc docs and tutorials for more info.

admin.site.register(Model1)
admin.site.register(Model2, Model2Admin) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T07:51:50.953

你不一定需要一个 admin.py 文件，

只需在您的 models.py 文件中导入管理模块，

```
from django.contrib import admin 
```

并对每个模型执行以下操作：

```
admin.site.register(model1)
admin.site.register(model2) 
```

但是，这不是最佳实践，但由于它只是一个教程，它会起作用。

您还需要取消注释 urls.py 文件中的相关行

# spring - 每次运行单元测试时都在擦除我的 H2 数据库是什么？

> ID：15870168
> 
> 赞同：1
> 
> 时间：2013-04-08T02:05:01.293
> 
> 标签：spring, hibernate, jpa, h2

我有一个 Spring+Hibernate+H2 项目，是根据我在 Internet 上找到的示例制作的。它工作得很好，除了每次我运行单元测试时，数据库都会被擦除。我不确定是什么原因造成的。测试通过了，但是我在测试之前放入数据库的任何东西在测试运行后都被清除了。

任何想法都会有所帮助！谢谢！

这是我的基础设施.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:jdbc="http://www.springframework.org/schema/jdbc"
xsi:schemaLocation="http://www.springframework.org/schema/jdbc     
    http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
                    http://www.springframework.org/schema/beans 

    http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="generateDdl" value="true" />
            <property name="database" value="H2" />
        </bean>
    </property>
    <property name="persistenceUnitName" value="booksrus" />

</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

<bean id="dataSource" 
  class="org.springframework.jdbc.datasource.DriverManagerDataSource">
  <property name="driverClassName" value="org.h2.Driver"/>
  <property name="url" value="jdbc:h2:tcp://localhost:9092/mydb"/>
  <property name="username" value=""/>
  <property name="password" value=""/> 
```

持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="booksrus">      
        <properties>
            <property name="hibernate.hbm2ddl.auto" value="create" /> 
        </properties>
    </persistence-unit>
</persistence> 
```

Junit 测试

```
package bookstore;

import static org.junit.Assert.*;

import java.util.List;

import org.apache.log4j.Logger;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.transaction.annotation.Transactional;
import static org.hamcrest.MatcherAssert.assertThat;
import static org.hamcrest.Matchers.*;

import stemen.entity.User;
import stemen.repository.UserRepository;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:simple-repository-context.xml")
@Transactional
public class TestUserRepository {
    private final Logger LOGGER = Logger.getLogger(TestUserRepository.class);

    @Autowired
    UserRepository repository;
    private User tom;
    private User patrick;
    private User john;

    @Before
    public void setUp() {
        tom = new User("123 California", "Apt 143", "LA", "Tom@gmail.com", "Tom", "Hanks", "Itsasecret", "CA","54221");
        patrick = new User("847 Mapple Dr.", "", "Washington", "Patrick@gmail.com", "Patrick", "Steward", "moneyMonkey", "MD","64541");
        john = new User("8484 Bristol", "", "Columbus", "john@gmail.com", "John", "Roberts", "pass", "OH","57963");
        repository.save(tom);
        repository.save(patrick);
        repository.save(john);
        assertThat(repository.count(), equalTo(3L));
    }

    /**
     * Tests inserting a user and asserts it can be loaded again.
     */
    @Test
    public void testThatTomCanBeInserted() {
        User retrievedUser = repository.save(tom);
        assertThat(retrievedUser, equalTo(tom));
        assertEquals(tom, repository.findOne(retrievedUser.getId()));
    }

    @Test
    public void testThatJohnCanBeFoundByEmailAndPassword(){
        User retreivedUser = repository.findUserByEmailIgnoreCaseAndPassword(john.getEmail(), john.getPassword());
        assertThat(retreivedUser, equalTo(john));
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T02:16:14.283

这是 **属性 name="hibernate.hbm2ddl.auto" value="create" />** 每次都在丢弃 n 重新创建模式。将其更改为更新，因此如果不存在，它只会第一次创建它。

有关详细说明，请参阅此链接： [链接](https://stackoverflow.com/questions/10633263/what-is-the-use-of-hibernate-hbm2ddl-auto-property-in-hibernate-config)

# joomla2.5 - 无法访问受保护的属性 JException::$code

> ID：15870170
> 
> 赞同：1
> 
> 时间：2013-04-08T02:05:06.340
> 
> 标签：joomla2.5

致命错误：无法访问第 14 行 /.../templates/abrax/error.php 中的受保护属性 JException::$code

第 14-17 行：

```
if (($this->error->code) == '404') {
header('Location: http://www.example.com/404');
exit;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T07:36:53.637

Use getters, you can't access property directly because it's visibility is not `public`

Like

```
if (($this->error->getCode()) == '404') {
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-14T10:17:55.350

尝试这个

```
if ($this->_error->get('code') == '404') {
header('Location: http://www.example.com/404');
exit;
}
```

# unit-testing - 如何忽略 prolog PL 单元测试中的选择点？

> ID：15870175
> 
> 赞同：4
> 
> 时间：2013-04-08T02:05:31.913
> 
> 标签：unit-testing, prolog

在 prolog PL 单元测试中，您如何忽略有关选择点的警告消息？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T06:54:21.107

在 SWI-Prolog[单元测试](http://www.swi-prolog.org/pldoc/doc_for?object=section%280,%270%27,swi%28%27/doc/packages/plunit.html%27%29%29)中有选项`nondet`

> 如果此关键字出现在选项列表中，则正文的非确定性成功不会被视为错误。

# python - Python 3.3 HTTPConnection 端头和发送数据

> ID：15870180
> 
> 赞同：1
> 
> 时间：2013-04-08T02:06:03.010
> 
> 标签：python, send, httpconnection

在`Python 3.3/Lib/urllib/request.py`课堂下`AbstractHTTPHandler(BaseHandler)`，第**1252行**

> h.request(req.get_method(), req.selector, req.data, headers)

在`Python 3.3/Lib/http/client.py`in class下`HTTPConnection`，在以下几行中：

**第 1047 行**

> def request(self, method, url, body=None, headers={}):

**1068行**

> def _send_request(self, method, url, body, headers):

**1087 号线**

> self.endheaders（正文）

上面的 body 和 req.data 将对应相同的字符串或其他数据，当`urllib.request.urlopen(req, data)`调用`request(method, url, body=None, headers={})`.`http.client.HTTPConnection`

这是否意味着以下两个相同？（他们在文档中似乎不一样）

1.  `HTTPConnection.endheaders(data)`
2.  `HTTPConnection.endheaders()`,`HTTPConnection.send(data)`

我完全糊涂了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:23:26.437

`endheaders`内部使用`send`（间接）。差异可能在于性能。如果`data`是字节对象，则`.endheaders(data)`尝试将标头和数据一起发送。请参阅[中的评论`_send_output()`](http://hg.python.org/cpython/file/8b793a946acb/Lib/http/client.py#l887)：

```
896         # If msg and message_body are sent in a single send() call,
897         # it will avoid performance problems caused by the interaction
898         # between delayed ack and the Nagle algorithm. 
```

# ember.js - 在 EmberJS 中获取父路由

> ID：15870181
> 
> 赞同：7
> 
> 时间：2013-04-08T02:06:03.510
> 
> 标签：ember.js

我正在制作一个可重用的（某种多态的）评论小部件。我想要一个使我能够返回父路由的按钮（例如，如果我在 /blog_posts/1/comments，我希望该按钮将我带回 /blog_posts/1）。

我目前正在使用`transitionToRoute('blog_post')`，但从长远来看这不会起作用，因为我希望这段代码可以在任何模型上通用运行（即它不会知道任何关于路线名称的信息，所以我不能调用'blog_post'） . 我想我正在寻找像 Rails'这样的东西`url_for`，或者是一种说法`router.get('parent_route')`（或`controller.get('parent_route')`）。

任何指示或想法？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-08T07:08:59.733

**这在 2013 年的 ember v0.9.8 或其他版本中得到了回答，从那时起该框架已经走了很长一段路。我认为当前版本的框架可能会有更好的解决方案。因为，我与 Ember 没有联系，所以无法真正更新这个答案！**

灵感来自源代码中的私有函数，将以下方法添加到返回名称的 Routes`parentRoute`

```
Ember.Route.reopen({
  getParentRoute: function(){
    var route = this;
    var handlerInfos = route.router.router.currentHandlerInfos;
    var parent, current;

    for (var i=0, l=handlerInfos.length; i<l; i++) {
      current = handlerInfos[i].handler;
      if((current.routeName == route.routeName)||(current.routeName.match(/./) && current.routeName.split('.')[1] == route.routeName )){
        return parent.routeName;
      }
      parent = current;
    }
  }
}) 
```

使用内部路由如下

```
App.SomeRoute = Ember.Route.extend({
  events: {
    goBack: function(){
      this.transitionTo(this.getParentRoute());
    }
  }
}) 
```

车把

```
<script type="text/x-handlebars" data-template-name="some">
  <a href="#" {{action goBack}}>Back</a>
</script> 
```

对于实际代码，打开[它](https://raw.github.com/emberjs/ember.js/release-builds/ember-1.0.0-rc.2.js)并按 CTRL+F `function parentRoute`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T02:45:25.817

您可以在模板中使用泛型`{{action }}`，但在路由器中实现“返回”的细节。这是有效的，因为 Ember首先将事件[冒泡](http://emberjs.com/guides/templates/actions/#toc_target-bubbling)`goBack`到控制器，然后是当前路由，然后是父路由等，直到找到一个动作处理程序。在这种情况下，控制器上没有匹配的动作，因此由当前路由处理。这使您的模板/视图/控制器与细节无关，但是当您连接小部件时，您可以指定应如何处理“返回”。

在示例中，相同的按钮会导致路由更改为不同的路由，具体取决于哪个路由是当前路由：

*   在路由`/posts`后退按钮过渡到`/`
*   在路由`/posts/new`后退按钮过渡到`/posts`

[JSBin 示例](http://jsbin.com/emakuh/1/edit)

Javascript：

```
App = Ember.Application.create({});

App.Router.map(function() {
  this.resource('posts', function() {
    this.route('new');
  });
});

App.PostsRoute = Ember.Route.extend({
  events: {
    goBack: function(){
      this.transitionTo('index'); 
    }
  }
});

App.PostsNewRoute = Ember.Route.extend({
  events: {
    goBack: function(){
      this.transitionTo('posts'); 
    }
  }
}); 
```

模板：

```
<script type="text/x-handlebars" data-template-name="index">
  <h2>Index Content:</h2>
  {{#linkTo posts}}Posts{{/linkTo}}
  {{outlet}}
</script>

  <script type="text/x-handlebars" data-template-name="posts">
    <h2>Posts</h2>
    <button {{action goBack}}>Go back</button>
    {{#linkTo posts.new}}New{{/linkTo}}
    {{outlet}}
  </script>

  <script type="text/x-handlebars" data-template-name="posts/new">
    <h2>Posts/New</h2>
  </script> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-09T04:11:04.730

基于 Mudasi Ali 的领导和审查 Ember v1.5 源，我使用以下内容：

Coffeescript（如果你想要 JS/ES，请使用 coffeescript.org 进行编译）：

```
Ember.Route.reopen
  parentRoute: Em.computed ->
    r = @router.router
    if r.currentTransition
      handlerInfos = r.currentTransition.state.handlerInfos
    else
       handlerInfos = r.state.handlerInfos

    handlerInfos = this.router.router.state.handlerInfos
    return unless handlerInfos

    parent = @
    for info in handlerInfos
      break if info.handler == @
      parent = info.handler
    parent

  parentRouteName: Em.computed.alias('parentRoute.routeName')

  parentController: ->
    @controllerFor @get('parentRouteName')

  parentModel: ->
    @modelFor @get('parentRouteName') 
```

上面提供了所有路由的属性`parentRoute`and和两个方便的函数，它们分别返回父控制器和模型，这在许多情况下都很有用，尤其是当您将资源编辑为嵌套路由时。`parentRouteName``parentController()``parentModel()`

您还可以定义一些操作以在视图/控制器等中用于取消/返回处理，如下所示：

```
Ember.Route.reopen
  actions:
    goBack: ->
      @transitionTo @get('parentRouteName') 
```

如果你有一个很深的路由层次并且想要跳过一个中间路由，你只需要覆盖 goBack 如下：

```
App.SomeIntermediateRouteToSkipOnBack = Em.Route.extend
  actions:
    goBack: ->
      # skip the immediate parent and use the grandparent route
      @transitionTo @get('parentRoute.parentRouteName) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-29T15:35:46.773

**在文件中**更新了 Ember 2.6**`app/initializers/parent_route.js`**

 **```
import Ember from 'ember';

var alreadyRun = false;

export default {
  name: 'parent-route',
  initialize: function() {
    if (alreadyRun) {
      return;
    } else {
      alreadyRun = true;
    }
    Ember.Route.reopen({
      parentRoute: Ember.computed(function() {
        let handlerInfos, i, info, len, parent, r;
        r = this.router.router;
        if (r.activeTransition) {
          handlerInfos = r.activeTransition.state.handlerInfos;
        } else {
          handlerInfos = r.state.handlerInfos;
        }
        if (!handlerInfos) {
          return;
        }
        parent = this;
        for (i = 0, len = handlerInfos.length; i < len; i++) {
          info = handlerInfos[i];
          if (info.handler === this) {
            break;
          }
          parent = info.handler;
        }
        return parent;
      }),
      parentRouteName: Ember.computed.alias('parentRoute.routeName'),

      parentController: Ember.computed(function() {
        return this.controllerFor(this.get('parentRouteName'));
      }),

      parentModel: Ember.computed(function() {
        return this.modelFor(this.get('parentRouteName'));
      })
    });

  }
}; 
```

在您的路线中，您可以访问父控制器`this.get('parentController')`和模型`this.get('parentModel')`**

# rvm - 如何在单个 tmuxinator 会话中使用多个 rvm gemset

> ID：15870184
> 
> 赞同：0
> 
> 时间：2013-04-08T02:06:19.820
> 
> 标签：rvm, tmux, tmuxinator

我设置了一个 tmuxinator 会话，其中一个选项卡（编辑器）正在使用具有自己的 rvm gemset（和 .rvmrc）的项目，另一个选项卡（rails）正在使用单独的 rvm gemset（和 .rvmrc）

```
project_root: .
tabs:
  - editor:
      layout: main-vertical
      panes:
        - vim
        - # 
  - rails: cd delivery/rails_app ; rails s 
```

这在 tmux 中运行良好，但是当我使用 tmuxinator 尝试它时，我在我的 rails 选项卡中收到此错误：

```
Using: /Users/stevejackson/.rvm/gems/ruby-2.0.0-p0@finances_rails
Could not find builder-3.2.0 in any of the sources
Run `bundle install` to install missing gems. 
```

奇怪的是，如果我从我的 rails 项目启动 tmuxinator，一切正常。

使用 rvm 选项指定 gemset 似乎没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:28:42.273

尝试：

```
- rails: $HOME/.rvm/bin/rvm in delivery/rails_app do rails s 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-05T00:06:46.950

以防万一其他人发现这个问题，我最终切换到 teamocil，它按我希望的那样工作 - 唯一的缺点是你必须在进入会话之前启动 tmux。

```
session:
  name: "my_session"
  windows:
    - name: "editor"
      root: "."
      layout: main-vertical
      panes:
        - cmd: "vim"
          focus: true
        - cmd: "pwd"
        - cmd: "guard"
    - name: "rails"
      root: "./delivery/rails_app"
      panes:
        - cmd: "RAILS_ENV=test shotgun" 
```

# vb.net - 计算winform中的特定控件发生

> ID：15870185
> 
> 赞同：-2
> 
> 时间：2013-04-08T02:06:39.717
> 
> 标签：vb.net, winforms, visual-studio-2010, tabs, textbox

一个winform包含多个放置在面板中的文本框，面板放置在选项卡控件的选项卡页中。所以，我想要的是我可以计算该 winform 中文本框控件的数量以及如何访问所有文本框。

欢迎提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T03:18:45.343

这是一段快速而肮脏的代码，演示了如何递归地遍历表单上的所有控件。它是递归的，这意味着它将深入挖掘其他容器控件。

```
 ' create a list of textboxes
    Dim allTextBoxes As New List(Of TextBox)

    ' call a recursive finction to get a list of all the textboxes
    ExamineControls(allTextBoxes, Me.Controls)

    ' run through the list and look at them
    For Each t As TextBox In allTextBoxes
        Debug.Print(t.Name)
    Next

Private Sub ExamineControls(allTextBoxes As List(Of TextBox), controlCollection As Control.ControlCollection)
    For Each c As Control In controlCollection
        If TypeOf c Is TextBox Then
            ' it's a textbox, add it to the collection
            allTextBoxes.Add(c)
        ElseIf c.Controls IsNot Nothing AndAlso c.Controls.Count > 0 Then
            ' it's some kind of container, recurse
            ExamineControls(allTextBoxes, c.Controls)
        End If
    Next
End Sub 
```

您显然希望将此逻辑移动到表单的不同部分并将结果存储在文本框类型的表单级列表中......

# web2py - 选择所有正确的字段

> ID：15870186
> 
> 赞同：1
> 
> 时间：2013-04-08T02:06:54.090
> 
> 标签：web2py

我有一个用户数据库和一个水果数据库，用户填写复选框以选择他们拥有的水果。

在配置文件中，我想反映此信息，但我不知道如何在 web2py 中查询数据库以显示所有设置为`True`.

可以通过 SQL 查询来完成，还是我需要通过选择用户水果记录来过滤结果？

这是我的数据库模型：

```
db.define_table('fruit',
    Field('id', 'reference auth_user'),
    Field('apple','boolean',label=T('Apple')),
    Field('apricot','boolean',label=T('Apricot')),
    Field('cherry','boolean',label=T('Cherry')),
    Field('fig','boolean', label=T('Fig')),
    Field('lychee','boolean', label=T('Lychee')),
    Field('peach','boolean', label=T('Peach')),
    Field('pear','boolean', label=T('Pear')),
    Field('plum','boolean', label=T('Plum'))) 
```

这是我的控制器（显然它不起作用。它只是返回`<Set 0>`）。

我已经尝试了一些来自谷歌搜索的不同组合，但没有一个达到预期的结果：

```
def profile():

    id = auth.user.id or redirect(URL('default', 'index'))
    user = db.auth_user[id]
    fruit = db.fruit(id=id)
    produce = db(fruit == True)
    return dict(user=user, produce=produce) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T05:50:23.050

```
fruit = db.fruit(id=id) 
```

上面`fruit`是一个 DAL Row 对象（其行为很像字典）。

```
produce = db(fruit == True) 
```

以上`db(fruit == True)`是指定 DAL 集的方式，该`fruit == True`部分将是 DAL 查询，但在查询中使用 Row 对象没有意义。在任何情况下，您都不需要 Set 对象，因为此类对象不包含任何数据——它们仅定义一组记录（不检索它们）。

目前尚不清楚您正在寻找哪种类型的数据结构，但如果您想要已检查的水果名称列表，您可以尝试：

```
produce = [field for field in fruit if fruit[field] is True] 
```

上面的列表理解遍历字段名称并保留与该字段关联的值的那些`True`（这将自动跳过任何非布尔字段，因为只有布尔字段存储实际值`True`和`False`）。

# matlab - 如何在没有最大函数的矩阵的每一行中找到最大值？

> ID：15870193
> 
> 赞同：0
> 
> 时间：2013-04-08T02:07:37.207
> 
> 标签：matlab

在 MATLAB 中，如果我有：

```
A = [1 2 3 4; 2 3 4 5; 4 8 9 10];
[N M] = size(A);
c = zeros(N,1);
for n=1:N;
    for m=1:M;
        c(n) = ?;
    end
end 
```

我要换什么？这样会在不使用 max 函数的情况下找到 A 的每一行中的最大值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:13:57.000

```
A = [1 2 3 4; 2 3 4 5; 4 8 9 10];
[N M] = size(A);
c = A(:,1); % modified per Eitan's suggestion
for n=1:N;
    % c(n) = A(n,1); % commented out per Eitan's suggestion.
    for m=1:M;
        c(n) = (c(n)<A(n,m))*A(n,m) + (c(n)>=A(n,m))*c(n);
    end
end 
```

只有一个逻辑语句为真，因此最小值将被更新或保持不变。超级尴尬……但多亏了 Eitan T，不再需要额外的线路。一个人想让内部循环从 2 开始，但不是该代码工作所必需的（并最大限度地减少给定原始代码所需的更改。）

不知道为什么你永远*不会*使用这个`min`功能，但我想你是有原因的......

# html - 如何使用 HTML 格式在 Jira On Demand 中创建问题？

> ID：15870196
> 
> 赞同：-1
> 
> 时间：2013-04-08T02:08:05.313
> 
> 标签：html, jira

我们的团队使用电子邮件在*Jira on Demand*中创建问题。我只是想知道我们是否可以在这些电子邮件中使用 HTML 格式？如果是，如何启用它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:44:14.923

传入 JIRA 的邮件可以是文本或 HTML。不需要启用。外发邮件在 JIRA Admin 中有一个默认设置，然后每个用户都可以在他们的个人资料中更改它。

# azure - H 264 基线配置文件 - Azure 媒体服务

> ID：15870198
> 
> 赞同：1
> 
> 时间：2013-04-08T02:08:24.050
> 
> 标签：azure, media, azure-media-services

全部，

我是天蓝色媒体服务和一般媒体编程的新手，所以可能是一个愚蠢的问题。

我需要从客户端上传视频并将它们流式传输到 Android（立即）和 iOS（稍后）。现在，我们为此选择了 azure 媒体服务，并浏览了无数帖子以找到适用于 Android 的最佳编码 - 众多设备。我认为 H.264 Baseline 配置文件虽然不是一流的质量，但它会做得很好。我们的客户会在低成本的安卓平板电脑上观看视频，所以我想我在那里很好。

参考：[http ://social.msdn.microsoft.com/Forums/en-US/MediaServices/thread/95ec8895-4a73-4a0c-8505-3ca5d8bbe13e](http://social.msdn.microsoft.com/Forums/en-US/MediaServices/thread/95ec8895-4a73-4a0c-8505-3ca5d8bbe13e)

现在，如果上述内容有意义，我在这里看不到“任务预设” [http://msdn.microsoft.com/en-us/library/windowsazure/jj129582.aspx#H264Encoding](http://msdn.microsoft.com/en-us/library/windowsazure/jj129582.aspx#H264Encoding)针对基线配置文件。

根据[http://msdn.microsoft.com/en-us/library/azure/dn535852.aspx](http://msdn.microsoft.com/en-us/library/azure/dn535852.aspx) Azure 支持基线配置文件，但基本配置文件的“任务预设”是什么，以便我可以以编程方式创建工作？

请帮忙

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T06:08:48.187

您引用的论坛帖子是Azure 媒体服务早期**预览版**中非常古老的帖子。那里提到的任务预设不再可用。从我在其余文档中可以看到的是，支持 H.264 基线配置文件，但目前没有将输入视频编码为 H.264 基线的任务预设。H.264 编解码器预设包括高和主要配置文件。

您正确地看到当前没有针对基线配置文件的单个任务预设。

但是 Windows Azure 媒体服务是一只隐藏的野兽！我写了一篇关于 Azure 媒体服务的文章，它没有记录也没有得到官方支持 -[剪辑或修剪你的视频文件](http://blogs.staykov.net/2013/04/bending-azure-media-services-clip-or.html)。

你的挑战有点有趣，因为它之前似乎得到了支持，但在 GA 之后退出了。关注我的博客，因为我可能很快就会为您的需求提供“任务预设”！

**更新**

您可以使用自定义任务预设创建 H.264 基线配置文件视频。将此 XML 字符串用作**Windows Azure 媒体编码器**的任务预设：

```
<?xml version="1.0" encoding="utf-16"?>
<!--Created with Expression Encoder version 4.0.4276.0-->
<Preset
  Version="4.0">
  <Job />
  <MediaFile
    WindowsMediaProfileLanguage="en-US"
    VideoResizeMode="Letterbox">
    <OutputFormat>
      <MP4OutputFormat
        StreamCompatibility="Standard">
        <VideoProfile>
          <BaselineH264VideoProfile
            RDOptimizationMode="Speed"
            HadamardTransform="False"
            SubBlockMotionSearchMode="Speed"
            MultiReferenceMotionSearchMode="Speed"
            ReferenceBFrames="True"
            AdaptiveBFrames="True"
            SceneChangeDetector="True"
            FastIntraDecisions="False"
            FastInterDecisions="False"
            SubPixelMode="Quarter"
            SliceCount="0"
            KeyFrameDistance="00:00:05"
            InLoopFilter="True"
            MEPartitionLevel="EightByEight"
            ReferenceFrames="4"
            SearchRange="32"
            AutoFit="True"
            Force16Pixels="False"
            FrameRate="0"
            SeparateFilesPerStream="True"
            SmoothStreaming="False"
            NumberOfEncoderThreads="0">
            <Streams
              AutoSize="False"
              FreezeSort="False">
              <StreamInfo>
                <Bitrate>
                  <ConstantBitrate
                    Bitrate="4000"
                    IsTwoPass="False"
                    BufferWindow="00:00:04" />
                </Bitrate>
              </StreamInfo>
            </Streams>
          </BaselineH264VideoProfile>
        </VideoProfile>
        <AudioProfile>
          <AacAudioProfile
            Level="AacLC"
            Codec="AAC"
            Channels="2"
            BitsPerSample="16"
            SamplesPerSecond="44100">
            <Bitrate>
              <ConstantBitrate
                Bitrate="160"
                IsTwoPass="False"
                BufferWindow="00:00:00" />
            </Bitrate>
          </AacAudioProfile>
        </AudioProfile>
      </MP4OutputFormat>
    </OutputFormat>
  </MediaFile>
</Preset> 
```

查看[此博客文章](http://bit.ly/12A8MEW)以获取更多信息。

# ruby-on-rails - PHP 数据之于 Ajax 就像 RoR 数据之于 X？

> ID：15870202
> 
> 赞同：0
> 
> 时间：2013-04-08T02:08:48.003
> 
> 标签：ruby-on-rails, database, jquery, database-design

我正在学习 RoR，在此之前，我正在研究 PHP 和 Ajax。

如果我有一个包含两个 div 的场景，并且用户可以单击其中一个（我已经做了一些 jquery 样式，因此当用户单击任一 div 时，它将显示他们单击 div 的样式，注意：这些不是按钮），那么我需要将一些数据放入数据库：

```
<div class="neat" id="customer">
 Customer
</div>

<div class="neat" id="developer>
 Developer
</div> 
```

当我使用 PHP 进行开发时，我可以设置某种 ajax/jquery，因此当用户单击任一 div 时，我可以将相应的 div id 发送到 ajax 并将某种数据（客户或开发人员）从 id 属性保存到我的数据库。

```
$('.neat').on('click',function(){
  $this = $(this);
  $.ajax({
   type: POST,
   url: save.php,
   data : cust_or_deve = $this.attr("id")
  });
}); 
```

**// 保存.php**

```
if($_POST['cust_or_deve']){
 $type = $_POST['cust_or_deve'];
 // store database syntax
} 
```

现在，学习 RoR，我想弄清楚他们将如何保存数据？我会做同样的方法还是有一些更简单的方法来存储我以前做的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:44:03.653

X = 阿贾克斯

RoR 是语言 ruby​​ 的后端框架。所以 ruby​​ 有点像 php，rails 是框架。就像 PHP 是语言一样，CodeIgniter 或 dJango 是框架。

AJAX 是一个客户端 http 请求（我猜是框架）。AJAX 可以向服务器发送信息，也可以从服务器获取信息，可以是 RoR 或 PHP。

**rails 不是唯一的 ruby​​ 框架**

虽然它更受欢迎，但还有其他的，比如 Sinatra。Rails 主要用作接收、处理、存储和表示数据的引擎。

因此，要回答您的问题，PHP 之于 AJAX 就像 RoR 之于 AJAX。更恰当的类比是 RoR 之于 PHP，就像 Java 之于 C++，目的相似，只是风格不同。

# openfire - 开火调试日志

> ID：15870205
> 
> 赞同：0
> 
> 时间：2013-04-08T02:09:29.140
> 
> 标签：openfire

我通过将 tar 存档解压缩到我的 Ubuntu 11.04 来安装 Openfire 3.8.1。

我使用[https://github.com/fritzy/SleekXMPP/blob/develop/examples/register_account.py](https://github.com/fritzy/SleekXMPP/blob/develop/examples/register_account.py)上的代码执行带内注册并获得 HTTP 500 错误。

为了进一步调查该错误，我检查了`logs`从 tar 存档中提取的文件夹中的目录。我只找到了两个文件：stderror.log 和 stdoutt.log

在 stderror.log 中：服务器停止

在 stdoutt.log 中：

Openfire 3.8.1 [Apr 7, 2013 8:43:15 PM] 管理控制台监听：

```
http://mymachine:9090
https://mymachine:9090 
```

似乎没有与 HTTP 500 错误相关的日志。

我还尝试通过服务器-> 服务器管理器-> 日志-> 日志查看器-> 调试-> 调试日志-> 在管理控制台中启用来启用调试日志，并再次重现 HTTP 500 错误。然而，没有与 HTTP 500 错误相关的日志。

我如何或在哪里可以找到日志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-18T02:03:32.783

这是 Openfire 的一个已知问题，请参阅此处的错误报告： [Openfire is turn off debugging mode on startup](http://issues.igniterealtime.org/browse/OF-429)

# php - 更改数组的键

> ID：15870210
> 
> 赞同：0
> 
> 时间：2013-04-08T02:10:33.637
> 
> 标签：php, arrays, multidimensional-array, replace, key

说我有这些：

```
$services = array();
$services["services0"];
$services["services1"];
$services["services2"];
$services["services3"]; 
```

我想创建某种循环来将它们更改为：

```
$services[0];
$services[1];
$services[2];
$services[3]; 
```

你会怎么做呢？不知道数组中有多少键：值对？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T02:19:12.513

执行此操作并丢弃原始键的最简单方法是通过以下方式运行数组[`array_values()`](http://php.net/array_values)：

```
$new_array = array_values( $old_array); 
```

您可以从[这个演示](http://viper-7.com/5JWiKz)中看到以下示例：

```
$services = array();
$services["services0"] = 's0';
$services["services1"] = 's1';
$services["services2"] = 's2';
$services["services3"] = 's3';

$services = array_values( $services);

print_r( $services); 
```

产生这个数组：

```
Array
(
    [0] => s0
    [1] => s1
    [2] => s2
    [3] => s3
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:18:25.177

尝试类似以下代码：

```
$dummy_array = $services;
$services = array();
foreach($dummy_array as $service) {
    $services[] = $service;

} 
```

这里发生的是您正在取消设置服务（但首先保存它）然后您循环浏览保存的版本，将值添加回数组中。这条线`$services[] = $service;`是这里的关键。这会将一个值附加到具有标准键的现有数组的末尾。即 0、1、2、3 等等。这将创建您想要删除字符串键并用标准数组键索引替换它们的结果。试试看，看看你会得到什么。祝你好运

# asp.net-mvc - ASP.NET MVC 4、Internet 应用程序模板、SimpleMembership - 帐户模型 - 强制执行唯一的用户名和电子邮件

> ID：15870211
> 
> 赞同：2
> 
> 时间：2013-04-08T02:10:46.803
> 
> 标签：asp.net-mvc, asp.net-mvc-4, code-first

如果您在 Visual Studio 2012 Express 中创建一个新的 ASP.net MVC 4 应用程序 - 并选择 Internet 应用程序模板 - 它会为您创建一个帐户模型来管理用户。

开箱即用，这使用户可以使用唯一的用户名和密码进行注册和登录。

您还可以将用户名更改为其他名称 - 例如电子邮件地址。

但是，要求用户输入唯一的用户名和电子邮件是很常见的。

如何更改开箱即用的功能来检查这一点？除了服务器端之外，客户端检查更可取。

我正在使用 Code First - 所以不想手动更改数据库和 SQL Server 2012 Express。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T05:03:06.760

如果您使用的是开箱即​​用的模板，您不必担心`Username`，`WebSecurity`会确保其独一无二。至于`Email`，这就是我在我目前正在处理的 Web 应用程序中所做的。

```
 [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            // Attempt to register the user
            using (EfDb db = new EfDb())
            {
                UserProfile userEmail = db.UserProfiles.FirstOrDefault(u => u.Email.ToLower() == model.Email.ToLower());
                try
                {
                    // Check if email already exists
                    if (userEmail == null)
                    {
                        var token = WebSecurity.CreateUserAndAccount(
                            model.UserName,
                            model.Password,
                                new
                                    {
                                        model.Email                                           
                                    },
                            true);
                        }
                    ModelState.AddModelError("", ErrorCodeToString(MembershipCreateStatus.DuplicateEmail));
                }
                catch (MembershipCreateUserException e)
                {
                    ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
                }
            }
        }
        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

如您所见，这里的数据库与验证无关。C# 代码负责处理它。只要确保在你的 ViewModel 中你有这个：

```
 [EmailAddress]
    [Required]
    [Display(Name = "Email")]
    public string Email { get; set; } 
```

在视图中

```
 <div class="editor-label">
        @Html.LabelFor(model => model.UserName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.UserName)
        @Html.ValidationMessageFor(model => model.UserName)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Email)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Email)
        @Html.ValidationMessageFor(model => model.Email)
    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:23:18.913

我不认为没有办法“自动”做到这一点。在您的帐户控制器中，在插入新用户名（创建新帐户）之前，您必须检查提交的新用户名是否已存在于数据库中，并在数据库中找到用户名时向视图发送适当的错误消息。

使用一些 JavaScript/jQuery，您可以实现“客户端”检查，这实际上会在后台（ajax 请求）将新用户名提交给服务器，以检查并显示错误，或者继续提交表单的其余部分，具体取决于结果。

# java - 不需要的多个实例java

> ID：15870212
> 
> 赞同：0
> 
> 时间：2013-04-08T02:10:52.277
> 
> 标签：java, user-interface, runnable

新问题。根据我之前的问题中的步骤调整我的程序后： [如何在不创建实际对象的情况下访问已经运行的类实例](https://stackoverflow.com/questions/15857984/how-to-access-already-running-instance-of-a-class-without-creating-an-actual-obj)

我想出了新的奇怪问题。我通过构造函数将 I 的引用传递给 G，然后使用该引用从 G 操作 I。我已将该函数映射到“后退按钮”。问题：如果我点击返回按钮并调整我的 I 框架然后单击完成按钮隐藏 I 界面并将 G 框架设置为可见。我有另一个按钮，它只是创建新的 I 清晰实例，按下它后，我会打开大量 I 实例（与我按下后退按钮的次数成正比）。经过大量调试后，我仍然感到困惑......也许这是我创建太多线程的问题......我不知道......这里有一些代码片段：

G 构造函数：

```
 public GUI(Intro i) {
    this.intro = i;
    make();
    layout();
    layout2();
    layout3();
    invalid();
    setEnable();
} 
```

返回按钮代码：

```
private class BackToSetUp implements ActionListener{

    @Override
    public void actionPerformed(ActionEvent arg0) {
        intro.frame.setVisible(true);
        frame.dispose();
    }

} 
```

重置按钮代码：

```
private class ResetProgram implements ActionListener{

    @Override
    public void actionPerformed(ActionEvent arg0) {
        frame.dispose();
        frame2.dispose();
        frame3.dispose();
        frame4.dispose();
        Runnable runnable = new Runnable() {
            public void run() {

                intro = new Intro(); 
                intro.setVisible(true);

            }
        };
        EventQueue.invokeLater(runnable);

    }

} 
```

完成按钮代码：

```
class Done implements ActionListener {
    GUI g = new GUI();
    @Override
    public void actionPerformed(ActionEvent e) {

        for (int i = 0; i < 9; i++) {
            System.out.println(array[i]);
        }

        g.setArray(array);
        System.out.println(array);
        setText();
        frame.setVisible(false);
        g.setVisible(true);
        g.setVisible2(false);
        //if (g.clear.isSelected()) {
        //  frame.setVisible(true);
        //}
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:30:54.713

将前一个 G 实例设置为 null 可以解决问题，因为垃圾收集器会处理它，因此每个类一次只有一个实例在运行。解决了

# android - 如何接受与 Android BluetoothServerSocket 的多个连接？

> ID：15870213
> 
> 赞同：2
> 
> 时间：2013-04-08T02:11:18.393
> 
> 标签：android, bluetooth

我正在制作一个 Android 应用程序，其中一个服务器必须与多个客户端共享数据，一个客户端访问来自多个服务器的数据。问题是客户端可以使用 connect() 连接到多个服务器，但服务器一次不会接受多个连接。我已经阅读了developers.android上的蓝牙页面并从那里获取了以下内容

> 与 TCP/IP 不同，RFCOMM 一次只允许每个通道连接一个客户端，因此在大多数情况下，在接受连接的套接字后立即在 BluetoothServerSocket 上调用 close() 是有意义的。

那么有没有办法在 BluetoothServerSocket 上接受多个客户端或从服务器端建立多个 RFCOMM 或解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T23:07:18.307

我想我遇到了类似的问题，并尝试通过为每个连接使用单独的 UUID 为我想要接受的每个连接创建单独的 ServerSocket。我猜这让每个 ServerSocket 都在不同的 RFCOMM 频道上监听。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-21T18:17:32.633

恕我直言，没有必要`BluetoothServerSocket`用不同的 UUID 创建多个 s。每当建立连接时，让另一个线程处理`socket.getOutputStream()`，但`BluetoothServerSocket`在主线程中继续接受/侦听。

[在此处](http://developer.android.com/reference/android/bluetooth/BluetoothServerSocket.html#accept())的 android 参考页面上：

> accept() 阻塞，直到建立连接。成功连接时返回已连接的 BluetoothSocket。
> 
> 一旦此调用返回，就可以再次调用它以接受后续传入连接。

我在[这里](https://stackoverflow.com/a/12940318/2073825)找到了一个很好的例子。

# c# - 如何在 WPF 中打开 Excel 文件并查看？

> ID：15870215
> 
> 赞同：6
> 
> 时间：2013-04-08T02:11:29.310
> 
> 标签：c#, wpf, excel

我使用我的 c# 应用程序创建了一些 excel 文件并将它们保存在我的电脑中。我想在我的应用程序中打开并查看它们我该怎么做？我的应用程序是使用 WPF C# 开发的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T02:57:28.427

您可以利用预览处理程序机制。这是我为托管预览处理程序所做的控件：

```
public class FilePreviewControl : HwndHost {
    private const int
        Child = 0x40000000,
        Visible = 0x10000000,
        HostId = 0x00000002,
        ClipChild = 0x02000000;

    public static readonly DependencyProperty PathProperty = DependencyProperty.Register(
        "Path", typeof (string), typeof (FilePreviewControl), new UIPropertyMetadata(Update));

    public static readonly DependencyProperty ExtensionProperty = DependencyProperty.Register(
        "Extension", typeof (string), typeof (FilePreviewControl), new UIPropertyMetadata(Update));

    public static readonly DependencyProperty SourceStreamProperty = DependencyProperty.Register(
        "SourceStream", typeof (Stream), typeof (FilePreviewControl), new UIPropertyMetadata(Update));

    private readonly PreviewManager manager;
    private IntPtr hwndHost;

    public FilePreviewControl() {
        this.manager = new PreviewManager();
    }

    public Stream SourceStream {
        get { return (Stream) this.GetValue(SourceStreamProperty); }
        set { this.SetValue(SourceStreamProperty, value); }
    }

    public string Extension {
        get { return (string) this.GetValue(ExtensionProperty); }
        set { this.SetValue(ExtensionProperty, value); }
    }

    public string Path {
        get { return (string) this.GetValue(PathProperty); }
        set { this.SetValue(PathProperty, value); }
    }

    private static void Update(DependencyObject d, DependencyPropertyChangedEventArgs e) {
        ((FilePreviewControl) d).RefreshPreview();
    }

    protected override HandleRef BuildWindowCore(HandleRef hwndParent) {
        this.hwndHost = IntPtr.Zero;

        this.hwndHost = CreateWindowEx(0, "static", "",
            Child | Visible | ClipChild,
            0, 0,
            (int) this.ActualWidth, (int) this.ActualHeight,
            hwndParent.Handle,
            (IntPtr) HostId,
            IntPtr.Zero,
            0);

        this.RefreshPreview();

        return new HandleRef(this, this.hwndHost);
    }

    protected override void DestroyWindowCore(HandleRef hwnd) {
        DestroyWindow(hwnd.Handle);
        this.manager.Dispose();
    }

    protected override void OnRenderSizeChanged(SizeChangedInfo sizeInfo) {
        base.OnRenderSizeChanged(sizeInfo);
        var rect = new Rect(new Size(this.ActualWidth, this.ActualHeight));
        this.manager.InvalidateAttachedPreview(rect);
    }

    protected override IntPtr WndProc(IntPtr hwnd, int msg, IntPtr wParam, IntPtr lParam, ref bool handled) {
        handled = false;
        return IntPtr.Zero;
    }

    [DllImport("user32.dll", EntryPoint = "CreateWindowEx", CharSet = CharSet.Unicode)]
    private static extern IntPtr CreateWindowEx(
        int dwExStyle,
        string lpszClassName,
        string lpszWindowName,
        int style,
        int x,
        int y,
        int width,
        int height,
        IntPtr hwndParent,
        IntPtr hMenu,
        IntPtr hInst,
        [MarshalAs(UnmanagedType.AsAny)] object pvParam);

    [DllImport("user32.dll", EntryPoint = "DestroyWindow", CharSet = CharSet.Unicode)]
    private static extern bool DestroyWindow(IntPtr hwnd);

    private void RefreshPreview() {
        if (this.hwndHost == IntPtr.Zero)
            return;

        var filePath = this.Path;
        var extension = this.Extension;

        if (string.IsNullOrEmpty(extension) && !string.IsNullOrEmpty(filePath))
            extension = System.IO.Path.GetExtension(filePath);

        var shouldBeDeactivated =
            this.Visibility != Visibility.Visible ||
            (string.IsNullOrEmpty(filePath) || !File.Exists(filePath)) && this.SourceStream == null ||
            string.IsNullOrEmpty(extension);

        if (shouldBeDeactivated) {
            this.manager.Detach();
            return;
        }

        var rect = new Rect(new Size(this.RenderSize.Width, this.RenderSize.Height));

        try {
            this.manager.AttachPreview(
                this.hwndHost,
                rect,
                extension,
                filePath,
                this.SourceStream);
        } catch (Exception exception) {
            Trace.TraceError(exception.ToString());
        }
    }

    public static bool CanPreview(string extension) {
        return PreviewManager.GetPreviewHandlerKey(extension) != null;
    }

    #region Nested type: InteropStream

    private sealed class InteropStream : IStream, IDisposable {
        private readonly Stream stream;
        private bool disposed;

        public InteropStream(Stream sourceStream) {
            if (sourceStream == null)
                throw new ArgumentNullException("sourceStream");

            this.stream = sourceStream;
        }

        #region IDisposable Members

        public void Dispose() {
            this.Dispose(true);
            GC.SuppressFinalize(this);
        }

        #endregion

        #region IStream Members

        public void Clone(out IStream ppstm) {
            throw new NotSupportedException();
        }

        public void Commit(int grfCommitFlags) {
            throw new NotSupportedException();
        }

        public void CopyTo(IStream pstm, long cb, IntPtr pcbRead, IntPtr pcbWritten) {
            throw new NotSupportedException();
        }

        public void LockRegion(long libOffset, long cb, int dwLockType) {
            throw new NotSupportedException();
        }

        [SecurityCritical]
        public void Read(byte[] pv, int cb, IntPtr pcbRead) {
            var count = this.stream.Read(pv, 0, cb);
            if (pcbRead != IntPtr.Zero)
                Marshal.WriteInt32(pcbRead, count);
        }

        public void Revert() {
            throw new NotSupportedException();
        }

        [SecurityCritical]
        public void Seek(long dlibMove, int dwOrigin, IntPtr plibNewPosition) {
            var origin = (SeekOrigin) dwOrigin;
            var pos = this.stream.Seek(dlibMove, origin);

            if (plibNewPosition != IntPtr.Zero)
                Marshal.WriteInt64(plibNewPosition, pos);
        }

        public void SetSize(long libNewSize) {
            this.stream.SetLength(libNewSize);
        }

        public void Stat(out STATSTG pstatstg, int grfStatFlag) {
            pstatstg = new STATSTG {
                type = 2,
                cbSize = this.stream.Length,
                grfMode = 0
            };

            if (this.stream.CanRead && this.stream.CanWrite)
                pstatstg.grfMode |= 2;

            else if (this.stream.CanWrite && !this.stream.CanRead)
                pstatstg.grfMode |= 1;

            else
                throw new IOException();
        }

        public void UnlockRegion(long libOffset, long cb, int dwLockType) {
            throw new NotSupportedException();
        }

        [SecurityCritical]
        public void Write(byte[] pv, int cb, IntPtr pcbWritten) {
            this.stream.Write(pv, 0, cb);

            if (pcbWritten != IntPtr.Zero)
                Marshal.WriteInt32(pcbWritten, cb);
        }

        #endregion

        private void Dispose(bool disposing) {
            if (this.disposed)
                return;

            if (disposing && this.stream != null)
                this.stream.Dispose();

            this.disposed = true;
        }

        ~InteropStream() {
            this.Dispose(false);
        }
    }

    #endregion

    private sealed class TempFile : IDisposable {
        private string path;

        public TempFile() : this(System.IO.Path.GetTempFileName()) {
        }

        private TempFile(string path) {
            if (string.IsNullOrEmpty(path))
                throw new ArgumentNullException("path");
            this.path = path;
        }

        public string Path {
            get {
                if (this.path == null)
                    throw new ObjectDisposedException(this.GetType().Name);
                return this.path;
            }
        }

        #region IDisposable Members

        public void Dispose() {
            this.Dispose(true);
        }

        #endregion

        private void Dispose(bool disposing) {
            if (disposing)
                GC.SuppressFinalize(this);
            if (this.path == null)
                return;

            try {
                File.Delete(this.path);
            } catch {
                Trace.TraceWarning("Can't delete file " + this.path);
            } // best effort
            this.path = null;
        }

        ~TempFile() {
            this.Dispose(false);
        }
    }

    #region Nested type: PreviewManager

    private sealed class PreviewManager : IDisposable {
        private IPreviewHandler currentHandler;
        private bool disposed;
        private InteropStream stream;

        #region IDisposable Members

        public void Dispose() {
            this.DisposeInternal();
            GC.SuppressFinalize(this);
        }

        #endregion

        public void AttachPreview(IntPtr handler, Rect viewRect, string extension, string filePath,
            Stream sourceStream) {
            this.Unload();

            var classKey = GetPreviewHandlerKey(extension);

            if (classKey == null)
                return;

            var guid = new Guid(classKey.GetValue(string.Empty).ToString());

            var type = Type.GetTypeFromCLSID(guid, true);
            var instance = Activator.CreateInstance(type);

            var fileInit = instance as IInitializeWithFile;
            var streamInit = instance as IInitializeWithStream;

            if (streamInit != null && sourceStream != null) {
                this.stream = new InteropStream(sourceStream);
                streamInit.Initialize(this.stream, 0);
            } else if (fileInit != null)
                if (filePath != null)
                    fileInit.Initialize(filePath, 0);

                else if (sourceStream != null)
                    using (var tempFile = new TempFile()) {
                        using (var fileStream = File.Create(tempFile.Path))
                            sourceStream.CopyTo(fileStream);

                        fileInit.Initialize(tempFile.Path, 0);
                    }
                else
                    return;
            else
                return;

            this.currentHandler = instance as IPreviewHandler;

            if (this.currentHandler == null) {
                this.Unload();
                return;
            }

            var rect = new ShellRect(viewRect);

            this.currentHandler.SetWindow(handler, ref rect);
            this.currentHandler.SetRect(ref rect);

            try {
                this.currentHandler.DoPreview();
            } catch {
                this.Unload();
                throw;
            }
        }

        internal static RegistryKey GetPreviewHandlerKey(string extension) {
            var commonGuid = new Guid("8895b1c6-b41f-4c1c-a562-0d564250836f");

            var classKey =
                Registry.ClassesRoot.OpenSubKey(string.Format(@"{0}\ShellEx\{1:B}", extension, commonGuid));
            return classKey;
        }

        public void Detach() {
            this.Unload();
        }

        public void InvalidateAttachedPreview(Rect viewRect) {
            if (this.currentHandler == null)
                return;

            var rect = new ShellRect(viewRect);
            this.currentHandler.SetRect(ref rect);
        }

        private void DisposeInternal() {
            if (this.disposed)
                return;

            this.Unload();

            this.disposed = true;
        }

        private void Unload() {
            if (this.currentHandler != null) {
                this.currentHandler.Unload();
                Marshal.FinalReleaseComObject(this.currentHandler);
                this.currentHandler = null;
            }

            if (this.stream != null) {
                this.stream.Dispose();
                this.stream = null;
            }
        }

        ~PreviewManager() {
            this.DisposeInternal();
        }

        #region Nested type: IInitializeWithFile

        [ComImport]
        [InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
        [Guid("b7d14566-0509-4cce-a71f-0a554233bd9b")]
        internal interface IInitializeWithFile {
            void Initialize([MarshalAs(UnmanagedType.LPWStr)] string pszFilePath, uint grfMode);
        }

        #endregion

        #region Nested type: IInitializeWithStream

        [ComImport]
        [InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
        [Guid("b824b49d-22ac-4161-ac8a-9916e8fa3f7f")]
        internal interface IInitializeWithStream {
            void Initialize(IStream pstream, uint grfMode);
        }

        #endregion

        #region Nested type: IPreviewHandler

        [ComImport]
        [InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
        [Guid("8895b1c6-b41f-4c1c-a562-0d564250836f")]
        internal interface IPreviewHandler {
            void SetWindow(IntPtr hwnd, ref ShellRect rect);
            void SetRect(ref ShellRect rect);
            void DoPreview();
            void Unload();
            void SetFocus();
            void QueryFocus(out IntPtr phwnd);

            [PreserveSig]
            uint TranslateAccelerator(ref MSG pmsg);
        }

        #endregion

        #region Nested type: ShellRect

        [StructLayout(LayoutKind.Sequential)]
        internal struct ShellRect {
            public readonly int left;
            public readonly int top;
            public readonly int right;
            public readonly int bottom;

            public ShellRect(Rect rect) {
                this.top = (int) rect.Top;
                this.bottom = (int) rect.Bottom;
                this.left = (int) rect.Left;
                this.right = (int) rect.Right;
            }
        }

        #endregion
    }

    #endregion
} 
```

以下是如何使用它：

```
<local:FilePreviewControl Path="Book1.xlsx" /> 
```

只有在您的计算机上安装了 Microsoft Office 时，它​​才会起作用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T04:17:32.213

您可以使用`DocumentViewer`WPF 控件。

首先，您应该将您的转换`office document`为`XPS`格式。请看这个[帖子](http://www.uhlme.ch/convert_office_to_xps)。

然后将其绑定到控件的`Document`属性上。`DocumentViewer`

**XAML**

```
<DocumentViewer Name="myDocumentViewer" Margin="0,0,0,59">

</DocumentViewer> 
```

**代码背后**

```
myDocumentViewer.Document = this.ConvertPptxDocToXPSDoc(this.FileName, this.newXPSDocumentName).GetFixedDocumentSequence(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-03-13T10:49:05.363

上海证券交易所的解决方案被低估了。它工作得很好，优点是：

*   没有 webBrowser 解决方案中的 activeX msgBox（打开、保存、取消）
*   无需 regsvr32 dsoframer.ocx 在客户端机器中使用 AxFramerControl 解决方案作为管理员
*   无需转换成XPS格式，保持Excel风格

缺点是：

*   办公室是必需的
*   当应用程序在 Windows 7 上关闭时，必须找到一种方法来终止 Excel 进程（在 Windows 10 上不需要，Excel 会自行终止）
*   该文档是只读的

您只需添加：

```
using System.Runtime.InteropServices;
using System.Runtime.InteropServices.ComTypes;
using System.Security;
using System.Security.AccessControl; 
```

并添加最新的 Microsoft.Office.Interop.Excel 参考

我只想添加评论，但我没有足够的声誉。但是，此解决方案可以节省您的时间！

# java - Android 源代码和 repo - 获取代码时到底发生了什么

> ID：15870217
> 
> 赞同：27
> 
> 时间：2013-04-08T02:11:40.107
> 
> 标签：java, android, git, android-source, repository

我遇到了很多关于使用`repo`获取 Android 源代码的最小方面的简短问题，或者关于做什么的非常广泛的定义，`repo`因此我并不真正理解使用`repo`. 我正在按照[Android Source 网站](http://source.android.com/source/downloading.html)上的说明进行操作。我一直在这样做，`repodir`所以所有提到的文件都与此相关。

## 初始化和同步 repo：

```
repo init -u https://android.googlesource.com/platform/manifest
repo sync 
```

完成后，我的文件夹中充满了 android 类型的文件夹（`bionic`、`bootable`等）和一个隐藏`.repo`文件夹。值得注意的是，有一个名为`ics-mr1`与特定版本相关的文件夹，它在我的`repodir`内部包含几乎相同的文件夹。

## 拉下一个特定的分支：

```
repo init -u https://android.googlesource.com/platform/manifest -b gingerbread
repo sync 
```

这相对较快地完成，我看到的主要变化是现在有一个名为的文件夹`gingerbread`（所有原始文件夹似乎都保留了）。

我现在试试这个，它需要 AGES：

```
repo init -u https://android.googlesource.com/platform/manifest -b android_4.2.2_r1
repo sync 
```

之后，它仍然包含相同的`gingerbread`和`ics-mr1`一些新的随机文件夹（如`abi`），但似乎没有新版本。

## 问题

从这个结果来看，我发现我真的不明白我的行为到底在做什么以及如何实现我想要达到的目标。

如何获取`master`源的整个分支的本地版本，然后在我认为合适的情况下在分支之间正确更改？我现在的方式似乎是错误的，因为分支更改后留下的文件似乎不合逻辑。

更进一步，是否有一种有效的方法可以同时拥有多个分支的本地副本，以便我可以比较每个分支的组件（显然无需每次都重新下载它们）？

我问这些问题时存在很大的理解漏洞（我一直无法找到明确一致的信息），因此任何关于答案的额外信息以帮助理解实际正在做的事情真的很有价值。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-08T04:16:44.133

## 回购初始化

既然你看起来很精明，你知道 repo 只是一个 python 脚本，对吧？您可以阅读它以了解它是如何工作的。我还没有通读整篇文章，但基本上，它包装`git`并提供了跨多个 git 存储库工作的支持。这个想法是有一个清单文件指定不同版本的 Android 的要求。当您`repo init`使用参数时，它会查看需要克隆哪些 git 存储库以及您已经同步了哪些 git 存储库，以及在获得正确的存储库后需要获取哪些分支。然后它处理将其管理的所有存储库保存在适当的分支上。将 repo 视为在标准 git 工作流程中添加了另一层（我假设您对此很熟悉）。

第一次使用repo，要获取master分支，需要使用

```
repo init -u https://android.googlesource.com/platform/manifest 
```

之后，您需要从服务器同步所有文件：

```
repo sync 
```

这会将您当前的工作目录更新为您下载的清单的主版本指定的确切状态。要签出不同版本的 AOSP，请使用：

```
repo init -b version_name 
```

这会将清单更新为包含您想要的 Android 版本信息的清单（也称为分支）。

不要忘记同步。

> 要切换到另一个清单分支，`repo init -b otherbranch`可以在现有客户端中使用。但是，由于这仅更新清单，因此需要后续`repo sync`（或`repo sync -d`）来更新工作目录文件。

您遇到的行为可能看起来很奇怪，因为您可能不习惯使用如此容易覆盖本地状态的系统。使用 git 时，您不应该*在同一个目录*`init`中多次。另一种选择是为每个项目创建新目录。.repo 目录的目的是存储与当前 repo 设置相关的所有信息（也像 .git 目录）。事实上，跑步做了很多事情：*`repo init`*

 *1.  从指定的 url 下载清单。
2.  尝试打开或创建 .repo 目录。
3.  确保您的 GPG 密钥已设置。
4.  **克隆**指定的分支（如果没有指定，则默认为 REPO_REV）。
5.  验证它。
6.  检查每个项目的适当分支。

我假设克隆操作会覆盖`.repo`文件夹中的信息。运行第一个命令后需要很长时间的原因：

```
repo init -u https://android.googlesource.com/platform/manifest
repo sync 
```

是因为它必须下载许多千兆字节的信息。现在，从`master`分支转到`gingerbread`repo 知道它只需要删除大约 68 次提交，这可以非常快速地完成。

```
$ repo init -u https://android.googlesource.com/platform/manifest -b gingerbread
$ repo sync
...
.repo/manifests/: discarding 68 commits
... 
```

回升`android_4.2.2_r1`意味着 repo 必须再次下载这些提交所需的任何信息，并更新所有引用项目的当前分支。这将需要很长时间；repo 是用磁盘使用来换取处理时间。

## 真的吗？

现在，这提出了一个问题：如果你想一次比较两个 repo 分支怎么办？这很困难，因为当`repo init && repo sync`您丢失您正在查看的旧信息时。答案是复制相关信息，然后`repo init && repo sync`再复制。这会很快变得烦人——谢天谢地，如果你有磁盘空间，repo 提供了一种加速这个过程的方法。

使事情变得更快的一种策略是在`workspace/master`目录中创建本地镜像。然后，从新目录中的镜像中签出所需的分支，例如`workspace/gingerbread`. 现在您只需切换到适当的目录即可在分支之间切换。

在本地镜像 AOSP：

```
cd workspace
mkdir master && cd master
repo init --mirror 
```

将导致 repo 镜像本地计算机上的远程服务器。然后，当你想切换到一个新的分支时，你可以：

```
mkdir ../gingerbread && cd ../gingerbread
repo init -b version_name --reference=../master 
```

结果是一个工作区，其中包含一个包含镜像的文件夹和一个包含姜饼分支的文件夹，该分支在可能的情况下引用镜像。

另一种选择是简单地初始化和同步您想要的分支，然后将文件夹复制到另一个位置并使用副本再次初始化和同步。回购应该只下载缺少的东西。

## 其他回购用途：

Beyond `init`, repo 提供了对传递命令的支持，例如`branch`, 到给定清单中的所有不同 git 存储库，这样您在使用代码时就不必担心这一点。它还通过使您可以轻松地将本地更改提交到 gerrit 代码审查系统来促进协作。我不确定将 AOSP 划分为多个 git 存储库的官方原因是什么，但我想这样做是为了管理版本控制的扩展问题并保持项目的健壮性和容错性（如果有人刹车一个 git repo 它不会破坏整个 AOSP）。还需要提供一种方式，让供应商可以回馈源代码，并让他们管理自己的 git 存储库，这些存储库可以简单地注册到总体清单中是有意义的。我没有回答你的问题行项目，*

# ruby-on-rails - Rails，Ruby 未显示未授权状态 - 语法问题

> ID：15870218
> 
> 赞同：0
> 
> 时间：2013-04-08T02:11:47.413
> 
> 标签：ruby-on-rails, ruby, api, rabl

当尝试从不属于用户的资源请求 JSON 时，尽管我在下面写了验证，但 JSON 显示为空括号，但状态返回 200 OK。我需要更改什么以响应 401 状态：

```
 @requested_resource = params[:resource_id].to_i
    @users_resources = Resource.owned_by(@current_user.id).collect {|s| s.id}
    if @users_resources.include?(@requested_resource)

    else
      respond_to do |format|
        format.json { render :json => [], :status => :unauthorized }
        format.html { render :file => "public/401.html", :status => :unauthorized }
      end
    end 
```

另外，我正在使用RABL ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:41:43.663

让 RoR 为你玩游戏，[`redirect_to`](http://api.rubyonrails.org/classes/ActionController/Redirecting.html)用`respond_to`. 例如：

```
redirect_to "public/401.html", :alert => "Please authorize", :status => :unauthorized 
```

# php - cURL 给出 400 作为响应

> ID：15870221
> 
> 赞同：1
> 
> 时间：2013-04-08T02:12:12.910
> 
> 标签：php, xml, http, curl

您好，任何愿意帮助的人.. 我不知道还能做什么。我正在尝试向 api 发送一个 xml 请求，它将返回一个 xml 格式的响应。我正在使用 curl 来实现它。但无论我以何种方式格式化我的请求，我总是得到 400 响应。url 格式正确。这是我的代码：

```
$ch1 = curl_init(); 
    $fp1 = fopen('poi.xml','w'); 
    curl_setopt($ch1, CURLOPT_URL, "http://api.ean.com/ean-services/rs/hotel/v3/geoSearch?cid=55505&minorRev=14&apiKey=xkr94zxbsjnzczryqajmjg3g&locale=en_US&currencyCode=USD&customerIpAddress=189.214.86.135&customerUserAgent=Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 Safari/537.31&xml=<LocationInfoRequest><destinationString>Dallas, TX</destinationString><type>2</type></LocationInfoRequest>");  
    curl_setopt($ch1, CURLOPT_RETURNTRANSFER, 1); 
    curl_setopt($ch1, CURLOPT_HTTPHEADER, array('Accept: application/xml'));
    curl_setopt($ch1, CURLOPT_HEADER, 0); 
    curl_setopt($ch1, CURLOPT_FILE, $fp1);
    curl_setopt($ch1, CURLOPT_CUSTOMREQUEST, 'GET');
    curl_setopt($ch1, CURLOPT_USERAGENT, 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.0.3705; .NET CLR 1.1.4322)'); 
    $val1 = curl_exec($ch1);
    $info = curl_getinfo($ch1);
    echo '<pre>';
      print_r($info);
      echo '</pre>';
    curl_close($ch1);//Close curl session 
    fclose($fp1); //Close file overwrite 
    $avail = simplexml_load_file('poi.xml'); 
```

这是我从 curl 获得的信息：

```
[url] => http://api.ean.com/ean-services/rs/hotel/v3/geoSearch?cid=55505&minorRev=14&apiKey=xkr94zxbsjnzczryqajmjg3g&locale=en_US¤cyCode=USD&customerIpAddress=189.214.86.135&customerUserAgent=Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 Safari/537.31&xml=Dallas, TX2
[content_type] => text/html
[http_code] => 400
[header_size] => 158
[request_size] => 558
[filetime] => -1
[ssl_verify_result] => 0
[redirect_count] => 0
[total_time] => 0.075402
[namelookup_time] => 0.038232
[connect_time] => 0.055687
[pretransfer_time] => 0.055787
[size_upload] => 0
[size_download] => 349
[speed_download] => 4628
[speed_upload] => 0
[download_content_length] => 349
[upload_content_length] => 0
[starttransfer_time] => 0.07531
[redirect_time] => 0 
```

我究竟做错了什么？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:42:12.647

您面临的问题与 curl 关系不大，而与您使用的 URL 关系更大：

> `http://api.ean.com/ean-services/rs/hotel/v3/geoSearch?cid=55505&minorRev=14&apiKey=xkr94zxbsjnzczryqajmjg3g&locale=en_US&currencyCode=USD&customerIpAddress=189.214.86.135&customerUserAgent=Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 Safari/537.31&xml=<LocationInfoRequest><destinationString>Dallas, TX</destinationString><type>2</type></LocationInfoRequest>`

URL 无效，它包含特殊字符，例如空格字符。

[`http_build_query()`](http://php.net/http_build_query)您需要正确构建它，PHP 可以通过为您正确编码所有内容的函数为 URL 查询参数使用一些变量和数组来帮助您：

```
// create api.ean.com request URL:
$url = 'http://api.ean.com/ean-services/rs/hotel/v3/geoSearch?' . http_build_query(array(
    'cid'               => '55505',
    'minorRev'          => '14',
    'apiKey'            => 'xkr94zxbsjnzczryqajmjg3g',
    'locale'            => 'en_US',
    'currencyCode'      => 'USD',
    'customerIpAddress' => '189.214.86.135',
    'customerUserAgent' => 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 Safari/537.31',
    'xml'               => '<LocationInfoRequest><destinationString>Dallas, TX</destinationString><type>2</type></LocationInfoRequest>',
)); 
```

然后你需要做的就是将它传递给 curl：

```
$ch1 = curl_init();
...
curl_setopt($ch1, $url);  

# or just:

$ch1 = curl_init($url); 
```

这应该可以解决您对请求 URL 的问题。请求可能还有更多问题/其他错误。当您使用 curl 时，您可能会发现***[Php - 调试 Curl](https://stackoverflow.com/q/3757071/367456)***或***[错误请求中列出的信息。也通过主机和系统上的 curl 连接到站点](https://stackoverflow.com/a/9571305/367456)***。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T03:04:14.317

不禁注意到您正在联系的 URL 中的 XML 代码。

你确定那应该在那里吗？

如果是，您可能需要对其进行正确的 URL 编码。代码 400 表示您尝试访问的 URL 不存在。由于返回的 url 与您发送的 url 不匹配，这将表明为真。

# opengl - 使用 GLSL 着色器时，亮度不起作用

> ID：15870224
> 
> 赞同：1
> 
> 时间：2013-04-08T02:12:38.100
> 
> 标签：opengl, glsl, shader, opengl-3, vertex-shader

我的程序的目标是使用 GLSL 着色器渲染一个由光点照亮的简单立方体。问题是我的立方体保持黑色，就好像照明属性被禁用一样。几个小时以来，我一直在寻找解决方案。我有两个缓冲区（一个用于位置顶点，另一个用于正常顶点）。这两个缓冲区是由 Blender 生成的。我以前在使用顶点数组的基本 OpenGL 程序中使用它们，它运行良好。现在我只想做同样的事情，但这次使用 GLSL 着色器。

这是我的 C++ 代码的一部分：

```
static GLfloat LightPosition[4] = {0.0f, 10.0f, 10.0f, 1.0f};
static GLfloat Kd[3] = {0.9f, 0.5f, 0.3f};
static GLfloat Ld[3] = {1.0f, 1.0f, 1.0f};

[...]

tatic GLuint            initShaders(char const *vertShaderSrc, char const *fragShaderSrc)
{
    GLuint              vertShaderID = 0, fragShaderID = 0;

    compileShader(vertShaderID, GL_VERTEX_SHADER, vertShaderSrc);
    compileShader(fragShaderID, GL_FRAGMENT_SHADER, fragShaderSrc);

    GLuint programID = glCreateProgram();

    glAttachShader(programID, vertShaderID);
    glAttachShader(programID, fragShaderID);

    glBindAttribLocation(programID, 0, "VertexPosition");
    glBindAttribLocation(programID, 1, "VertexNormal");

    glUniform3f(glGetUniformLocation(programID, "Kd"), Kd[0], Kd[1], Kd[2]);
    glUniform3f(glGetUniformLocation(programID, "Ld"), Ld[0], Ld[1], Ld[2]);

    glLinkProgram(programID);

    GLint errorLink = 0;
    glGetProgramiv(programID, GL_LINK_STATUS, &errorLink);
    if (errorLink != GL_TRUE)
    {
        GLint sizeError = 0;
        glGetProgramiv(programID, GL_INFO_LOG_LENGTH, &sizeError);
        char *erreur = new char[sizeError + 1];
        glGetShaderInfoLog(programID, sizeError, &sizeError, erreur);
        erreur[sizeError] = '\0';
        std::cout << erreur << std::endl;
        delete[] erreur;
        glDeleteProgram(programID);
    }
    return (programID);
}

int                 main(int ac, char **av)
{
    bool            continuer = true;
    SDL_Event       event;
    GLuint          vboID[2];
    GLuint          textureID = 0;
    GLuint          programID = 0;

    //SDL window initialization

    SDL_Init(SDL_INIT_VIDEO);
    SDL_WM_SetCaption("Test", NULL);
    SDL_SetVideoMode(WIDTH, HEIGHT, 32, SDL_OPENGL);

    glEnable(GL_DEPTH_TEST);
    glEnable(GL_LIGHTING);
    glEnable(GL_TEXTURE_2D);

    //Viewport initialization

    glViewport(0, 0, WIDTH, HEIGHT);

    //Glew init component

    glewInit();

    //VBO initialization

    initVBO(vboID);

    //Shaders initialization

    programID = initShaders("Box.vert", "Box.frag");

    //Main loop

    while (continuer)
    {
        eventListener(&event, &continuer);

        glClearDepth(1.0f);
        glClearColor(0.13f, 0.12f, 0.13f, 1.0f);
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

        glUseProgram(programID);

        //Projection matrix

        glm::mat4 ProjectionMatrix = glm::perspective(45.0f, 500.0f / 500.0f, 0.1f, 100.0f);

        //View matrix

        glm::mat4 ViewMatrix = glm::lookAt(glm::vec3(0.0f, 0.0f, 8.0f), glm::vec3(0.0f, 0.0f, 0.0f), glm::vec3(0.0f, 1.0f, 0.0f));

        //Model matrix

        glm::mat4 ModelMatrix = glm::mat4(1.0f);
        ModelMatrix = glm::translate(ModelMatrix, glm::vec3(0.0f, 0.0f, 0.0f));
        ModelMatrix = glm::rotate(ModelMatrix, angle, glm::vec3(1.0f, 1.0f, 1.0f));
        ModelMatrix = glm::scale(ModelMatrix, glm::vec3(1.0f, 1.0f, 1.0f));

        //Prepare matrix

        glm::mat4 ModelViewMatrix = ViewMatrix * ModelMatrix;
        glm::mat3 NormalMatrix = glm::mat3(glm::vec3(ModelViewMatrix[0]), glm::vec3(ModelViewMatrix[1]), glm::vec3(ModelViewMatrix[2]));
        glm::mat4 ModelViewProjectionMatrix = ProjectionMatrix * ModelViewMatrix;
        glm::vec4 LightPositionVec = ViewMatrix * glm::vec4(LightPosition[0], LightPosition[1], LightPosition[2], LightPosition[3]);

        //Send matrix

        glUniform4f(glGetUniformLocation(programID, "LightPosition"), LightPositionVec[0], LightPositionVec[1], LightPositionVec[2], LightPositionVec[3]);
        glUniformMatrix4fv(glGetUniformLocation(programID, "ProjectionMatrix"), 1, GL_FALSE, glm::value_ptr(ProjectionMatrix));
        glUniformMatrix3fv(glGetUniformLocation(programID, "NormalMatrix"), 1, GL_FALSE, glm::value_ptr(NormalMatrix));
        glUniformMatrix4fv(glGetUniformLocation(programID, "ModelViewMatrix"), 1, GL_FALSE, glm::value_ptr(ModelViewMatrix));
        glUniformMatrix4fv(glGetUniformLocation(programID, "MVP"), 1, GL_FALSE, glm::value_ptr(ModelViewProjectionMatrix));

        glEnableVertexAttribArray(0);
        glBindBuffer(GL_ARRAY_BUFFER, vboID[0]);
        glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, OFFSET_BUFFER(0));
        glBindBuffer(GL_ARRAY_BUFFER, 0);

        glEnableVertexAttribArray(1);
        glBindBuffer(GL_ARRAY_BUFFER, vboID[1]);
        glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 0, OFFSET_BUFFER(0));
        glBindBuffer(GL_ARRAY_BUFFER, 0);

        glDrawArrays(GL_TRIANGLES, 0, 36);

        glDisableVertexAttribArray(1);
        glDisableVertexAttribArray(0);

        glUseProgram(0);

        angle += 0.010f;

        glFlush();
        SDL_GL_SwapBuffers();
    }

    SDL_Quit();
    return (0);
} 
```

顶点着色器代码：

```
#version 330

layout (location = 0) in vec3 VertexPosition;
layout (location = 1) in vec3 VertexNormal;

uniform vec4 LightPosition;
uniform vec3 Kd;
uniform vec3 Ld;

uniform mat4 ProjectionMatrix;
uniform mat3 NormalMatrix;
uniform mat4 ModelViewMatrix;
uniform mat4 MVP;

out vec3 LightIntensity;

void main()
{
    vec3 tnorm = normalize( NormalMatrix * VertexNormal);
    vec4 eyeCoords = ModelViewMatrix * vec4(VertexPosition,1.0);
    vec3 s = normalize(vec3(LightPosition - eyeCoords));

    LightIntensity = Ld * Kd * max( dot( s, tnorm ), 0.0 );

    gl_Position = MVP * vec4(VertexPosition,1.0);
} 
```

片段着色器代码：

```
#version 330

in vec3 LightIntensity;

layout (location = 0) out vec4 FragColor;

void main() {
    FragColor = vec4(LightIntensity, 1.0f);
} 
```

这是我的应用程序的屏幕：

![在此处输入图像描述](https://i.stack.imgur.com/zvGCo.png)

如您所见，照明属性似乎被禁用。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T02:36:43.460

```
glUniform3f(glGetUniformLocation(programID, "Kd"), Kd[0], Kd[1], Kd[2]);
glUniform3f(glGetUniformLocation(programID, "Ld"), Ld[0], Ld[1], Ld[2]); 
```

这两行位于错误的位置，在链接和绑定着色器之前不能这样做。将它们移到所有其他 glUniform 调用的位置。

每次交换着色器或查看统一块时，您都需要重置制服。

# c# - DataType 枚举有效值

> ID：15870225
> 
> 赞同：0
> 
> 时间：2013-04-08T02:12:51.350
> 
> 标签：c#, asp.net-mvc-4, entity-framework-5, data-annotations

我试图找出应用`[DataType(DataType.Something)]`属性时 EF DataAnnotations 的有效选项。查看 MSDN 文档，我似乎只能找到有效的 ENUM 值，但找不到任何符合给定数据类型的定义。

具体来说，我正在查看`DataType.PhoneNumber`我不确定我当前的数据库规范是否支持这一点，因为如果应用它，我找不到任何关于它正在寻找的内容的输入。

所以我的具体问题是，`DataType.PhoneNumber`对于指定大多数/所有不同 DataType 枚举值的链接的奖励积分，可接受的值是多少。

为了澄清...

当我说可接受的值时，我想知道这三个 5555555555、555-555-5555 和 (555) 555-5555 都是有效的还是只是一个子集？还有其他可接受的值吗？只是不确定这里。（此外，这永远不会看到任何国际化的东西，所以我唯一担心的是美国标准的 10 位数字。

另外，只是为了避免一些（我相信）不必要的解释......我知道这`DataType.Something`是一个枚举并且本身不包含值......相反，我想知道使用枚举的代码认为什么是有效的。

[DataType 枚举的 MSDN 参考](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.datatype.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:31:00.770

我目前无法测试，但我假设注释在它们装饰的输入字段中声明了正则表达式模式，如果您检查输出 html，您可能会发现设置了模式属性，这应该可以帮助您确定什么可以通过。在线正则表达式测试器将帮助您测试什么是可能的。

我使用了[dataannotationsextentions](http://dataannotationsextensions.org/) nuget 包。它还扩展了当前可用的选项，因此如果您发现当前的电话号码注释不适合您的方式，您应该能够创建一个自定义验证器，该验证器应用适合您的条件的正则表达式。

干杯蒂姆

# ruby-on-rails - redirect_to 在生产中不工作，在开发中工作正常

> ID：15870231
> 
> 赞同：1
> 
> 时间：2013-04-08T02:13:24.317
> 
> 标签：ruby-on-rails, ruby-on-rails-3

新用户注册该网站后，他们应该被重定向到交易索引。这在开发环境中可以正常工作，但在生产环境中不起作用（在 Heroku 上）。在生产中，它重定向到用户索引（不存在）。

这是我的用户控制器：

```
class UsersController < ApplicationController

  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if valid_email? @user.email
      @user.save
      redirect_to deals_path
    else
      flash[:error] = "Please enter a valid email address"
      redirect_to root_path
    end
  end

  private
    def valid_email?(email)
      valid_email_regex = /\A.+@.+\..+\z/i
      email =~ valid_email_regex
   end
end 
```

这是routes.rb：

```
root to: 'users#new'

resources :deals, only: [:index]
resources :users, only: [:new, :create] 
```

这是 rake 路由和 RAILS_ENV=production rake 路由的结果（两者相同）：

```
 root      /                    users#new
   deals GET  /deals(.:format)     deals#index
   users POST /users(.:format)     users#create
new_user GET  /users/new(.:format) users#new 
```

在开发中一切正常，但在生产中它表现得好像用户控制器中的“redirect_to deal_path”行不存在。

该应用程序在开发中使用 SQLite，在生产中使用 PostgreSQL，这可能与它有关吗？

该应用程序位于 rails 3 并托管在 Heroku 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T03:35:56.247

原来问题是用户模型上的 before_save 过滤器用于发送无法正常工作的欢迎电子邮件。我删除了之前的过滤器，现在它工作正常。以下是任何感兴趣的人的服务器日志：

```
2013-04-08T03:14:07+00:00 app[web.1]: Started POST "/users" for xx.xxx.xx.xxx at 2013-04-08 03:14:07 +0000
2013-04-08T03:14:08+00:00 app[web.1]: Processing by UsersController#create as HTML
2013-04-08T03:14:08+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "authenticity_token"=>"b4ysVip3iTm8LZmeRxHX3EdX/pH7X6c6SpgF11IpQis=", "user"=>{"email"=>"user@example.com"}, "commit"=>"Sign up"}
2013-04-08T03:14:08+00:00 app[web.1]:   Rendered user_mailer/welcome_email.html.erb (10.9ms)
2013-04-08T03:14:08+00:00 app[web.1]: 
2013-04-08T03:14:08+00:00 app[web.1]: Sent mail to user@example.com (54ms)
2013-04-08T03:14:08+00:00 app[web.1]: Completed 500 Internal Server Error in 344ms
2013-04-08T03:14:08+00:00 app[web.1]: 
2013-04-08T03:14:08+00:00 app[web.1]: SocketError (getaddrinfo: Name or service not known):
2013-04-08T03:14:08+00:00 app[web.1]:   app/models/user.rb:24:in `welcome_email'
2013-04-08T03:14:08+00:00 app[web.1]:   app/models/user.rb:15:in `block in <class:User>'
2013-04-08T03:14:08+00:00 app[web.1]:   app/controllers/users_controller.rb:10:in `create'
2013-04-08T03:14:08+00:00 app[web.1]: 
2013-04-08T03:14:08+00:00 app[web.1]: 
2013-04-08T03:14:08+00:00 heroku[router]: at=info method=POST path=/users host=www.xxx.com fwd="xx.xxx.xx.xxx" dyno=web.1 connect=1ms service=555ms status=500 bytes=0
2013-04-08T03:14:06+00:00 heroku[web.1]: State changed from starting to up 
```

# mysql - 为什么我不能从 MySQL 查询中乘以 AND select *？

> ID：15870232
> 
> 赞同：0
> 
> 时间：2013-04-08T02:13:31.047
> 
> 标签：mysql

```
SELECT (price_int * amount_int) AS depth_value, *  FROM default_market_depth WHERE current=1 AND trade_type='ask' 
```

由于某种原因运行时出现此错误。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:14:36.077

将`.*`查询的其余部分放在前面

```
SELECT default_market_depth.*, (price_int * amount_int) AS depth_value  FROM default_market_depth WHERE current=1 AND trade_type='ask' 
```

# javascript - CodeMirror 可以改变一段代码的背景颜色吗？

> ID：15870233
> 
> 赞同：4
> 
> 时间：2013-04-08T02:13:32.887
> 
> 标签：javascript, html, css, codemirror

我有一种编程语言（称为 SPIN），它有一个自定义 IDE，它突出显示代码部分的背景（在行首用关键字标记），以帮助提高可见性。（高亮方案也随着不同颜色的背景而变化）

示例：http: [//i.stack.imgur.com/1bpsu.png](http://i.stack.imgur.com/1bpsu.png)

我正在尝试使用 CodeMirror 为这种语言开发一个在线 IDE。但是，我无法找到有关如何更改一段代码的背景颜色的任何信息。[在http://www.phipi.com/editspin/](http://www.phipi.com/editspin/)上有一个编辑器的部分实现，没有彩色突出显示或背景。CodeMirror 似乎将每一行都包装在一个`<pre>`标签中，没有任何区别。

我有什么方法可以在 CodeMirror 中实现这一点吗？或者我可以使用另一个编辑器框架来实现它吗？

# opencv - 如何使用opencv flann，尤其是设置距离算法？

> ID：15870237
> 
> 赞同：4
> 
> 时间：2013-04-08T02:14:42.927
> 
> 标签：opencv, knn

我正在使用 opencv 2.4.4 flann。

我参考：[http ://docs.opencv.org/2.4.4/modules/flann/doc/flann_fast_approximate_nearest_neighbor_search.html](http://docs.opencv.org/2.4.4/modules/flann/doc/flann_fast_approximate_nearest_neighbor_search.html)

做KNN。

我有一个矩阵（8000*32）flann_m。有 8000 个数据，每个数据有 32 个特征。

我写了这样的代码：

```
 flann::Index flann_index(flann_m, flann::LinearIndexParams());
    flann_index.save("flann_index.fln");

    Mat resps(ROW,K,CV_32F);
    Mat nresps(ROW,K,CV_16S);
    Mat dist(ROW,K,CV_32F);

    flann_index.knnSearch(flann_m,nresps,dist,K,flann::SearchParams(64)); 
```

我可以在 nreps 和 dist 中得到 KNN 结果，nresps 是 N 个邻居的索引，dist 是距离。

但我不知道如何在 opencv flann 中设置不同的距离算法（ChiSquare、Euclidean 等）。

我检查了 flann.cpp，似乎 set_distance() 函数已被弃用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-05T18:58:56.917

我注意到很少有人熟悉openCV，文档也很少。我终于通过使用 opencvflann 而不是 flann 来避免命名空间冲突。在检查了 opencv 源代码后，我发现“dist.h”是一个有用的文件，可以帮助您了解如何设置不同的 KNN 距离类型。

在我的代码中，我使用了曼哈顿距离，指的是 opencv 源代码中的 dist.h。

```
//// do indexing
    Matrix<float> samplesMatrix((float*)flann_m.data, flann_m.rows, flann_m.cols);
    //Index<cvflann::ChiSquareDistance<float>> flann_index(samplesMatrix, cvflann::LinearIndexParams());
    Index<cvflann::L1<float>> flann_index(samplesMatrix, cvflann::LinearIndexParams());
    flann_index.buildIndex();

    cv::Mat1i ind(flann_m.rows, K);
    CV_Assert(ind.isContinuous());
    cvflann::Matrix<int> nresps((int*) ind.data, ind.rows, ind.cols);
    cvflann::Matrix<float> dist(new float[flann_m.rows*K], flann_m.rows, K);

    flann_index.knnSearch(samplesMatrix,nresps,dist,K,SearchParams(64)); 
```

# javascript - javascript中具有相同值的代码的简写

> ID：15870238
> 
> 赞同：0
> 
> 时间：2013-04-08T02:14:49.640
> 
> 标签：javascript, jquery, mootools, shorthand

我有各种这样的代码：

```
 $(function() {

            $('#slider1').carouFredSel({
                auto: false,
                infinite:false,                 
                circular:false,
                prev:'#prev1',
                next:'#next1',
                pagination:"#pager1",
                mousewheel:true,
                swipe: {
                    onMouse: true,
                    onTouch: true
                }
            });

        $('#slider2').carouFredSel({
                auto: false,
                infinite:false,                 
                circular:false,
                prev:'#prev2',
                next:'#next2',
                pagination:"#pager2",
                mousewheel:true,
                swipe: {
                    onMouse: true,
                    onTouch: true
                }
            });         
        }); 
```

```
 window.addEvent('domready', function(){ `var container = document.id('container'),
    queuedElems = [];

    var sorter = new Fx.Sort($$('#container .sort'), {
    duration: '1000',
    transition: Fx.Transitions.Back.easeInOut,
    mode: 'vertical',
    onComplete: function(){
        displayDOM();
      }
   });

    displayDOM();

    document.id('swap').addEvent('click', function(event){
    event.stop();
    var elems = container.getChildren();
    sorter.swap(elems[0], elems[elems.length - 1]);
  });

    window.addEvent('domready', function(){

    var container = document.id('container2'),
    queuedElems = [];

    var sorter = new Fx.Sort($$('#container2 .sort'), {
    duration: '1000',
    transition: Fx.Transitions.Back.easeInOut,
    mode: 'vertical',
    onComplete: function(){
        displayDOM();
      }
  });

    displayDOM();

    document.id('swap2').addEvent('click', function(event){
    event.stop();
    var elems = container.getChildren();
    sorter.swap(elems[0], elems[elems.length - 1]);
  });` 

我希望它们以“速记”方式编写，因为每次每个代码中的设置都是相同的，只有 ID 名称会发生​​变化（ID1、ID2 ...）。我不知道如何在 javascript 中执行此操作（仅在 css 中）。我唯一知道的是你需要'var'标签。

我猜任何有一点知识的人都可以轻松做到。我自己尝试了很多组合，但总是失败。一个例子会很好。它困难吗？

            回答 #1

赞同：1

时间：2013-04-08T02:21:21.057

你可以做两件事：通过 ID 选择多个元素`,`或分配一个公共类 ( `.slider`)

```
 $('#slider1, #slider2').carouFredSel({
            auto: false,
            infinite:false,                 
            circular:false,
            prev:'#prev1',
            next:'#next1',
            pagination:"#pager1",
            mousewheel:true,
            swipe: {
                onMouse: true,
                onTouch: true
            }
        }); 
```

或将设置存储到变量中

```
 var mySettings =  {
            auto: false,
            infinite:false,                 
            circular:false,
            prev:'#prev1',
            next:'#next1',
            pagination:"#pager1",
            mousewheel:true,
            swipe: {
                onMouse: true,
                onTouch: true
            }
        };
    $('#slider1').carouFredSel(mySettings);

    $('#slider2').carouFredSel(mySettings); 
```

            回答 #2

赞同：1

时间：2013-04-08T02:21:44.950

只需为所有这些元素分配一个公共类，并同时为所有这些元素初始化一次插件 -`$('.slider')`而不是`$('#slider1')`例如。

```

# c# - 如何以编程方式添加和删除瓷砖？

> ID：15870239
> 
> 赞同：0
> 
> 时间：2013-04-08T02:15:00.103
> 
> 标签：c#, .net, xaml, windows-phone-8

是否可以在 Windows Phone 8 中以编程方式为另一个程序添加磁贴？

它不一定是同一个应用程序。

如果可能的话，如何从另一个程序中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T05:42:08.250

您正在寻找[ShellTile](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.shell.shelltile%28v=vs.105%29.aspx)。[此处](http://www.geekchamp.com/articles/how-to-add-and-remove-secondary-tiles-in-windows-phone-apps)提供了涵盖该主题基础知识的良好指南。使用游戏中的 Windows Phone 8，您有更多的选择——所有这些都在官方[文档](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202948%28v=vs.105%29.aspx)中介绍。

# iphone - 推送通知推送出现两次？

> ID：15870244
> 
> 赞同：0
> 
> 时间：2013-04-08T02:15:49.560
> 
> 标签：iphone, ios, push-notification, apple-push-notifications

我的应用程序的推送通知推送出现两次。但是我添加了一个只推送一次的代码，如下所示：-

我的应用代码

```
receive message:{
    aps =     {
        alert = "\U5b89\U7881\U63a8\U64ad\U6e2c\U8a66\U4e2d~~~";
        badge = 1;
        sound = default;
    };
}
receive message:{
    aps =     {
        alert = "";
        badge = 0;
        sound = "";
    };
} 
```

我应该怎么办 ？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T02:29:52.740

你确定你只发送一次通知吗？我的猜测是您多次注册了设备，或者发送代码运行了两次。苹果的服务器搞砸并发送两次消息是非常不正常的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-20T05:28:58.440

当同一设备有多个注册时，您可能会在您的设备上收到重复的推送消息。如果是这种情况，请检查发生设备注册的代码。

否则，我希望这会有所帮助：- [iOS 上的重复推送通知](https://stackoverflow.com/questions/18074529/duplicate-push-notifications-on-ios)

# vba - Imagebox 不会重绘

> ID：15870246
> 
> 赞同：0
> 
> 时间：2013-04-08T02:16:15.707
> 
> 标签：vba, powerpoint, userform

我有两个用户表单（Frm1，Frm2），每个都有一个图像框（Img1，Img2）和一个按钮（Btn1，Btn2），然后我有两个jpeg（jpg1，jpg2），请下载我的示例，一个PowerPoint 宏[在这里](http://goo.gl/X5PvI)

步骤：

1.  运行“main”并显示 Frm1（vbmodal）
2.  点击 Btn1 在 Img1 上切换 jpg1 和 jpg2
3.  点击 Img1 显示 Frm2 vbmodal，Img2 应该显示与 Img1 相同的 jpg
4.  点击 Btn2 卸载 Frm2
5.  （问题）点击btn1切换jpg但不能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:43:34.050

添加：

```
Me.Repaint 
```

`Me.Image1.Picture = LoadPicture(strpic)`在之后`UserForm1`>>`CommandButton1_Click()`

# asp.net - 插入和更新问题

> ID：15870247
> 
> 赞同：5
> 
> 时间：2013-04-08T02:16:35.347
> 
> 标签：asp.net, sql, sql-server, stored-procedures

我是 ASP.NET/C# 的菜鸟，但我会尽我所能描述我的问题。

现在我有一个附加了 sql 源的 gridview；它获取正确的信息。网格视图的信息将根据在网格外部的下拉列表中选择的内容而改变，这有效。问题在于更新和插入。

一旦尝试更新。（只要我单击其中一列上的编辑）我收到以下错误消息：**“DropDownList2”有一个无效的 SelectedValue，因为它不存在于项目列表中。参数名称：值**

我将列拆分为模板，如下所示，这样我可以更轻松地管理它们。“下拉列表 2”位于我的编辑模板中。它连接到数据源；这与我的第一个下拉菜单完全相同，可以完美运行。所以我不相信这将是该过程背后的 sql。但是，我确实将此下拉列表 2 绑定到了 Doctor。 **现在我被告知绑定它，所以我不知道绑定是如何工作的**

如果我取消绑定它，我至少可以在单击编辑后看到网格，但在更新后我收到错误消息：**Procedure or function uspPatientUpdate has too many arguments specified。**

现在我已经在网上寻找解决方案，但我无法将我的头脑围绕在绑定上。我将根据需要提供以下代码。

ASP：

```
<asp:SqlDataSource ID="sdPatient" runat="server" ConnectionString="<%$ ConnectionStrings:MedicalOfficeConnectionString %>" DeleteCommand="usp_PatientDelete" InsertCommand="uspPatientInsert" SelectCommand="uspPatientSelectByIDOrSelectAll" UpdateCommand="uspPatientUpdate" SelectCommandType="StoredProcedure" DeleteCommandType="StoredProcedure" InsertCommandType="StoredProcedure" UpdateCommandType="StoredProcedure">
                <DeleteParameters>
                    <asp:Parameter Name="ID" Type="Int32" />
                </DeleteParameters>
                <InsertParameters>
                    <asp:Parameter Name="OHIP" Type="String" />
                    <asp:Parameter Name="FirstName" Type="String" />
                    <asp:Parameter Name="LastName" Type="String" />
                    <asp:Parameter DbType="Date" Name="DOB" />
                    <asp:Parameter Name="VisitsPerYear" Type="Int32" />
                    <asp:Parameter Name="DoctorID" Type="Int32" />
                    <asp:Parameter Name="Timestamp" Type="Byte"></asp:Parameter>
                </InsertParameters>
                <SelectParameters>
                    <asp:ControlParameter ControlID="DropDownList1" Name="DoctorID" PropertyName="SelectedValue" Type="Int32" DefaultValue="0" />
                </SelectParameters>
                <UpdateParameters>
                    <asp:Parameter Name="ID" Type="Int32" />
                    <asp:Parameter Name="OHIP" Type="String" />
                    <asp:Parameter Name="FirstName" Type="String" />
                    <asp:Parameter Name="LastName" Type="String" />
                    <asp:Parameter DbType="Date" Name="DOB" />
                    <asp:Parameter Name="VisitsPerYear" Type="Int32" />
                    <asp:Parameter Name="DoctorID" Type="Int32" />
                    <asp:Parameter Name="ID" Type="Int32" />
                    <asp:Parameter Name="Timestamp" Type="Byte"></asp:Parameter>
                </UpdateParameters>
            </asp:SqlDataSource>
            <p>Select Patient By Doctor:<asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True" DataSourceID="sdDoctorList" DataTextField="Doctor" DataValueField="ID" AppendDataBoundItems="True">
                <asp:ListItem Value="0">All Doctors</asp:ListItem>
                </asp:DropDownList>
            <asp:GridView ID="GridView1" runat="server" AllowSorting="True" AutoGenerateColumns="False" BackColor="White" BorderColor="#336666" BorderStyle="Double" BorderWidth="3px" CellPadding="4" DataSourceID="sdPatient" GridLines="Horizontal">
                    <Columns>
                        <asp:CommandField ShowDeleteButton="True" ShowEditButton="True" />
                        <asp:TemplateField HeaderText="OHIP" SortExpression="OHIP">
                            <EditItemTemplate>
                                <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("OHIP") %>'></asp:TextBox>
                            </EditItemTemplate>
                            <ItemTemplate>
                                <asp:Label ID="Label1" runat="server" Text='<%# Bind("OHIP") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="First Name" SortExpression="FirstName">
                            <EditItemTemplate>
                                <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("FirstName") %>'></asp:TextBox>
                            </EditItemTemplate>
                            <ItemTemplate>
                                <asp:Label ID="Label2" runat="server" Text='<%# Bind("FirstName") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Last Name" SortExpression="LastName">
                            <EditItemTemplate>
                                <asp:TextBox ID="TextBox3" runat="server" Text='<%# Bind("LastName") %>'></asp:TextBox>
                            </EditItemTemplate>
                            <ItemTemplate>
                                <asp:Label ID="Label3" runat="server" Text='<%# Bind("LastName") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="DOB" SortExpression="DOB">
                            <EditItemTemplate>
                                <asp:TextBox ID="TextBox4" runat="server" Text='<%# Bind("DOB") %>'></asp:TextBox>
                            </EditItemTemplate>
                            <ItemTemplate>
                                <asp:Label ID="Label4" runat="server" Text='<%# Bind("DOB") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Visits Per Year" SortExpression="VisitsPerYear">
                            <EditItemTemplate>
                                <asp:TextBox ID="TextBox5" runat="server" Text='<%# Bind("VisitsPerYear") %>'></asp:TextBox>
                            </EditItemTemplate>
                            <ItemTemplate>
                                <asp:Label ID="Label5" runat="server" Text='<%# Bind("VisitsPerYear") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Doctor" SortExpression="Doctor">
                            <EditItemTemplate>
                                <asp:DropDownList ID="DropDownList2" runat="server" DataSourceID="sdDoctorList" DataTextField="Doctor" DataValueField="ID"  SelectedValue='<%# Bind("Doctor") %>'>
                                </asp:DropDownList>
                            </EditItemTemplate>
                            <ItemTemplate>
                                <asp:Label ID="Label6" runat="server" Text='<%# Bind("Doctor") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                    <FooterStyle BackColor="White" ForeColor="#333333" />
                    <HeaderStyle BackColor="#336666" Font-Bold="True" ForeColor="White" />
                    <PagerStyle BackColor="#336666" ForeColor="White" HorizontalAlign="Center" />
                    <RowStyle BackColor="White" ForeColor="#333333" />
                    <SelectedRowStyle BackColor="#339966" Font-Bold="True" ForeColor="White" />
                    <SortedAscendingCellStyle BackColor="#F7F7F7" />
                    <SortedAscendingHeaderStyle BackColor="#487575" />
                    <SortedDescendingCellStyle BackColor="#E5E5E5" />
                    <SortedDescendingHeaderStyle BackColor="#275353" />
                </asp:GridView> 
```

程序：

这适用于下拉列表。这给出了名称和值。*注意：此过程适用于第一个下拉列表，我想适用于第二个。

```
ALTER PROCEDURE dbo.uspDoctorList
AS
BEGIN
    SET NOCOUNT ON
    SELECT     ID, LastName +', ' + FirstName AS 'Doctor'
    FROM         Doctor
    ORDER BY 'Doctor'
END 
```

这是更新过程。不确定这是否是错误的，或者它是否只是我的 ASP

```
ALTER PROCEDURE dbo.uspPatientUpdate
    @ID int,
    @OHIP char(10),
    @FirstName nvarchar(20),
    @LastName nvarchar(40),
    @DOB date,
    @VisitsPerYear int,
    @DoctorID int,
    @Timestamp Timestamp

AS
BEGIN
    SET NOCOUNT OFF
    UPDATE Patient
    SET OHIP = @OHIP,
      FirstName = @FirstName, 
      LastName = @LastName,
      DOB = @DOB,
      VisitsPerYear = @VisitsPerYear,
      DoctorID = @DoctorID
    WHERE ID = @ID AND Timestamp = @Timestamp
END 
```

我会很感激任何帮助。顺便说一句，这些东西比我们所学的要先进一些（在 ASP 中使用存储过程），我会加倍努力获得奖励分数。提前谢谢。

**如果您需要更多信息，请询问**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:17:40.590

## 问题 1 - 在 gridview 中更新数据

1) 正如 Andriy 所指出的，您的第一个问题是 ID 在 中列出了两次 `<UpdateParameters>`，删除其中一个。

2）从参数列表中删除时间戳，[时间戳会自动更新](https://stackoverflow.com/questions/4592658/sql-server-updating-a-time-stamp-column)

```
 <UpdateParameters>
        <asp:Parameter Name="ID" Type="Int32" />
        <asp:Parameter Name="OHIP" Type="String" />
        <asp:Parameter Name="FirstName" Type="String" />
        <asp:Parameter Name="LastName" Type="String" />
        <asp:Parameter Name="DOB" DbType="DateTime" />
        <asp:Parameter Name="VisitsPerYear" Type="Int32" />
        <asp:Parameter Name="DoctorID" Type="Int32" />
    </UpdateParameters> 
```

**注意：**如果您需要保存**日期**时间戳，请在 SQL 中将*Timestamp*列的数据类型更改为 datetime 并将更新存储过程更改为 -`Patient.Timestamp = GETDATE()`

3）从更新存储过程中删除@Timestamp（作为参数和WHERE子句）

4）在gridview set的标记中`DataKeyNames="ID"`这**很重要**，使用[DataKeyNames](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.datakeynames.aspx)属性来指定代表数据源主键的字段，必须设置它才能使GridView控件的自动更新和删除功能起作用：

```
<asp:GridView
            ID="GridView1"
            DataKeyNames="ID" 
```

完成上述所有操作后，您的更新将起作用，我使用 SQL Server Express 2008 和 ASP.NET 4.0 为您创建了一个示例项目，您可以在 Google 驱动器上找到它[（](https://docs.google.com/file/d/0B0iPiW5jXDdPekdnZkZBZ2hRQXc/edit?usp=sharing)只需单击文件 -> 下载获取.zip项目）

## 问题 2 - 在 gridview 中插入数据并刷新

1）更改`<InsertParameters>`以从**控件**获取数据（我展示了一个只有四个参数的示例，您可以根据需要进行更改）

```
<InsertParameters>
    <asp:ControlParameter ControlID="txtOhip" Name="OHIP" />
    <asp:ControlParameter ControlID="txtFirstName" Name="FirstName" />
    <asp:ControlParameter ControlID="txtLastName" Name="LastName" />
    <asp:ControlParameter ControlID="ddlDoctorId" Name="DoctorID" PropertyName="SelectedValue" />
</InsertParameters> 
```

2）在页面中添加插入控件，并`Insert()`在用户单击添加按钮时调用您的sql数据源的方法：

```
<table>
    <tr>
        <td>
            OHIP
        </td>
        <td>
            <asp:TextBox ID="txtOhip" runat="server"></asp:TextBox>
        </td>
    </tr>
    <tr>
        <td>
            First name
        </td>
        <td>
            <asp:TextBox ID="txtFirstName" runat="server"></asp:TextBox>
        </td>
    </tr>
    <tr>
        <td>
            Last name
        </td>
        <td>
            <asp:TextBox ID="txtLastName" runat="server"></asp:TextBox>
        </td>
    </tr>
    <tr>
        <td>
            Doctor
        </td>
        <td>
            :<asp:DropDownList ID="ddlDoctorId" runat="server" AutoPostBack="True" DataSourceID="sdDoctorList"
                DataTextField="Doctor" DataValueField="DoctorID" AppendDataBoundItems="True">
                <asp:ListItem Value="0">All Doctors</asp:ListItem>
            </asp:DropDownList>
        </td>
    </tr>
    <tr>
        <td style="text-align: right" colspan="2">
            <asp:Button ID="btnAdd" OnClick="Add" runat="server" Text="Add" />
        </td>
    </tr>
</table>
<script runat="server">
protected void Add(object sender,EventArgs e)
    {
        sdPatient.Insert();
    } 
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T12:29:32.003

您的错误与下拉列表和与存储过程相关的参数有关，因此要将下拉列表与数据库中的数据绑定-（我正在编写此代码，因为您认为您具有使用三层的 asp.net 的基本知识）在 Appcode 文件夹中创建一个类并编写foll方法

```
**SqlConnection con;
SqlCommand cmd;
SqlDataAdapter da;
private void Openconnection()
{
    if (con == null)
    {
        con = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["Nameofconn_defin in web.config file"].ConnectionString);
        if (con.State == ConnectionState.Closed)
        {
            con.Open();
        }
        cmd = new SqlCommand();
        cmd.Connection = con;
    }
}
private void Closeconnection()
{
    if (con.State == ConnectionState.Open)
    {
        con.Close();
    }
}
private void Disposeconnection()
{
    if (con != null)
    {
        con.Dispose();
        con = null;
    }
} 
```

公共数据表 GetDatatable(string strsql) { Openconnection(); 数据表 dt = 新数据表（）；cmd.CommandType = CommandType.Text; cmd.CommandText = strsql; cmd.CommandTimeout = 1000; da = 新的 SqlDataAdapter(); da.SelectCommand = cmd; da.填充（dt）；关闭连接（）；处置连接（）；返回 dt；}

比在 ASPX.CS FILE 中写一个方法

```
public void BindBacecurrency()
    {
        try
        {
            string str = "select * from Currency_Master";
            DataTable dt = dut.GetDatatable(str);
            ddlbasecurrency.DataSource = dt;
            ddlbasecurrency.DataValueField = dt.Columns["Currency_Id"].ToString();
            ddlbasecurrency.DataTextField = dt.Columns["Currency_Name"].ToString();
            ddlbasecurrency.DataBind();
            ddlbasecurrency.Items.Insert(0, "-------Select-------");

        }
        catch (Exception ex)
        {
            Response.Write(ex.Message.ToString());
            ScriptManager.RegisterStartupScript(this, this.GetType(), "message", "<script> alert('System Error ! Contact Your Service Provider ');</script>", false);
        }
    } 
```

* * *

手动绑定它，即不是来自数据库，而不是在设计页面的 HTML 页面中写入

```
<asp:DropDownList ID="ddBalanceType" runat="server"  BackColor="#AFC7C7" class ="small-field size5" >
               <asp:ListItem  Text="-------------Select-------------"></asp:ListItem>
               <asp:ListItem Value="1" Text="CR"></asp:ListItem>
               <asp:ListItem Value="0" Text="DR"></asp:ListItem>
            </asp:DropDownList> 
```

我可以向您展示如何使用 3 层架构使用参数和代码进行更新，但首先我必须知道您正在理解我的代码或不以任何方式检查下面的代码以获取 gridview 和存储过程可能会对您有所帮助

```
 <asp:TemplateField HeaderText="Function" ItemStyle-HorizontalAlign="Center">
                        <ItemTemplate>
                            <asp:LinkButton ID="btnEdit" runat="server" ToolTip='<%# Eval("party_id") %>' onclick="btnEdit_Click" >Edit</asp:LinkButton>

                        </ItemTemplate>
                        <ItemStyle HorizontalAlign="Center" />
                    </asp:TemplateField> 
```

------对于编辑按钮单击---------

```
 protected void btnEdit_Click(object sender, EventArgs e)
        {
            try
            {
                Blank();
                GridViewRow gvrows = (GridViewRow)(((Control)sender).NamingContainer);
                LinkButton linkbtn = (LinkButton)gvrows.FindControl("btnEdit");
    string PartyId = linkbtn.ToolTip.ToString();
     string Com = "SELECT * FROM Transport_Mode WHERE party_id = '" + PartyId.ToString() + "' ORDER BY mode_id ASC ";
                DataTable dt2 = dut.GetDatatable(Com);--check above method in bal class
}
} 
```

--------存储过程的示例代码-----

```
 USE [Aesthetics1]
GO
/****** Object:  StoredProcedure [dbo].[OSP_InsUpdBankMaster]    Script Date: 04/08/2013 17:55:38 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[OSP_InsUpdBankMaster]
(
    @Bank_id int =null,
    @Bank_name varchar(30) =null,
    @account_no varchar(20) =null,
    @holder_name varchar(40) =null,
    @Branch varchar(25) =null,
    @status int =null,
    @add_user varchar(8) =null,
    @Result int = 0output
)
AS
BEGIN
BEGIN TRANSACTION
    IF NOT EXISTS (SELECT 1 FROM Bank_master WHERE Bank_id = @Bank_id)
    BEGIN
        INSERT INTO Bank_master (Bank_name,account_no,holder_name,Branch,status,add_date,add_user) 
        VALUES (@Bank_name,@account_no,@holder_name,@Branch,@status,GETDATE(),@add_user)

        SET @Result = 1
    END
    ELSE IF EXISTS (SELECT 1 FROM Bank_master WHERE Bank_id = @Bank_id)
    BEGIN
        UPDATE Bank_master SET Bank_name = @Bank_name,
                                account_no = @account_no,
                                holder_name = @holder_name,
                                Branch = @Branch,
                                status = @status
                    where Bank_id = @Bank_id    
                SET @Result = 2
    END
IF @@ERROR = 0
COMMIT TRANSACTION
ELSE
BEGIN
    SET @Result = -1
    ROLLBACK TRANSACTION
END
END 
```

# algorithm - 最大流量应用：重新排列矩阵

> ID：15870250
> 
> 赞同：4
> 
> 时间：2013-04-08T02:17:17.390
> 
> 标签：algorithm

有**M**，一个 nxn 矩阵，每个条目等于 0 或 1。 m [ij] 表示第 i 行和第 j 列中的条目。对角线条目是某些 i的 m [ii形式之一。]交换矩阵 M 的 i 和 j 行表示以下操作：我们交换值 m [ik]和 m [jk]，因为 k = 1, 2 ..... n。交换两列的定义类似。如果可以交换一些行对和一些列对（以任何顺序），那么我们说**M**是可重排的，使得在所有交换之后，M 的所有对角线条目都等于 1。

我需要找到一个多项式时间算法来确定具有 0-1 个条目的矩阵 M 是否可重新排列。

我知道我必须使用 max-flow/min-cut 范例来解决这个问题，但是我找不到将这个问题与 max-flow 问题联系起来的方法。

欢迎任何提示！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T02:29:43.990

很容易证明矩阵是可重排的当且仅当在 S [n]中存在一个置换 pi使得每个 i 的 M [i, pi(i)] = 1。

这样的排列只是二分图中的完美匹配，每行有一个顶点，每列有一个顶点，当 M [ij] = 1 时，第 i 行和第 j 列之间有一条边。

使用 max-flow 在二分图中找到最大匹配非常简单；当最大匹配是完美匹配时，您有一个可重新排列的矩阵。

# eclipse - 从 pom.xml 设置活动弹簧配置文件并与 IDE 集成

> ID：15870252
> 
> 赞同：1
> 
> 时间：2013-04-08T02:17:46.823
> 
> 标签：eclipse, spring, maven, testing, configuration-files

我从事 mavenized Java Spring Web 应用程序。我们在 Eclipse IDE 中广泛使用自动重启和热部署，但我注意到当您开始混合 maven 和 spring 配置时，Eclipse 中的集成并不好。我们希望在 web.xml 中有 maven 变量，这些变量将在项目构建期间由 maven-war-plugin 替换。

web.xml 中的 Maven 变量：

```
 <env-entry>
  <env-entry-name>spring.profiles.active</env-entry-name>
  <env-entry-type>java.lang.String</env-entry-type>
  <env-entry-value>${profileName}</env-entry-value>
 </env-entry> 
```

和 maven 变量在构建过程中被 maven-war-plugin 替换：

```
 <plugin>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.3</version>
            <configuration>    
            <filteringDeploymentDescriptors>true</filteringDeploymentDescriptors>
            </configuration>
        </plugin> 
```

此解决方案仅在我从命令行通过 maven 构建项目时才有效。Eclipse 热部署机制显然跳过了所有那些 maven 插件......

您认为这是一个好习惯吗，有什么方法可以在 eclipse 中使用这种配置无缝工作？

我将适当地使用例如 maven jetty 插件从 IDE 中运行它，但是我不喜欢在 shell 窗口中使用控制台 - eclipse 控制台它更舒服一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:55:19.513

通过 Maven 构建的令牌过滤不适用于 Eclipse 热部署。

一种选择是将 -Dspring.profiles.active="dev" 传递给 JVM/App 进程。

我更喜欢使用 env 变量来控制配置文件加载。例如，MY_PROJECT_ENV=dev。

以下代码读取变量并初始化配置文件。

```
public class ProfileInitializer implements ApplicationContextInitializer<ConfigurableApplicationContext> {
    public void initialize(ConfigurableApplicationContext applicationContext) {
        ConfigurableEnvironment environment = applicationContext.getEnvironment();
        environment.setActiveProfiles(System.getProperty("MY_PROJECT_ENV"));
    }
} 
```

# objective-c - 编辑 CoreData 值

> ID：15870253
> 
> 赞同：0
> 
> 时间：2013-04-08T02:18:06.067
> 
> 标签：objective-c, xcode, uitableview, core-data, nsmanagedobject

我一直在尝试将一些数据从 tableview 传递到 editviewcontroller，以便能够对其进行编辑和保存，但我并不走运

我不知道如何将这些值从所选行传递到编辑视图，然后保存新值

这是我的代码：

```
- (NSManagedObjectContext *)managedObjectContext{
NSManagedObjectContext *context = nil;
id delegate = [[UIApplication sharedApplication] delegate];
if ([delegate performSelector:@selector(managedObjectContext)]) {
    context = [delegate managedObjectContext];
}
return context;
}
-(IBAction)atras:(id)sender{
MenuViewController *m=[[MenuViewController alloc] initWithNibName:nil bundle:nil];
[self presentViewController:m animated:YES completion:nil];

}
-(IBAction)guardar:(id)sender{
NuevaTareaViewController *n=[[NuevaTareaViewController alloc] initWithNibName:nil bundle:nil];
[self presentViewController:n animated:YES completion:nil];

}
- (void)viewDidAppear:(BOOL)animated
{
[super viewDidAppear:animated];

// Fetch the devices from persistent data store
NSManagedObjectContext *managedObjectContext = [self managedObjectContext];
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] initWithEntityName:@"Tareas"];
self.tareas = [[managedObjectContext executeFetchRequest:fetchRequest error:nil] mutableCopy];

[tableView reloadData];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
// Return the number of sections.
return 1;
}

 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// Return the number of rows in the section.
return self.tareas.count;
}

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell;

cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
}

// Configure the cell...
NSManagedObject *materia = [self.tareas objectAtIndex:indexPath.row];
[cell.textLabel setText:[NSString stringWithFormat:@"%@", [materia valueForKey:@"nombre"]]];
cell.textLabel.textColor=[UIColor whiteColor];
cell.textLabel.font=[UIFont fontWithName:@"Chalkduster" size:(16)];

NSString *detalle=[NSString stringWithFormat:@"%@: Toca para ver los Detalles",[materia valueForKey:@"materia"]];
[cell.detailTextLabel setText:detalle];
cell.detailTextLabel.textColor=[UIColor whiteColor];
cell.detailTextLabel.font=[UIFont fontWithName:@"Chalkduster" size:(12)];

return cell;
}
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
// Return NO if you do not want the specified item to be editable.
return YES;
}

 - (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
NSManagedObjectContext *context = [self managedObjectContext];

if (editingStyle == UITableViewCellEditingStyleDelete) {
    // Delete object from database
    [context deleteObject:[self.tareas objectAtIndex:indexPath.row]];

    NSError *error = nil;
    if (![context save:&error]) {
        NSLog(@"Can't Delete! %@ %@", error, [error localizedDescription]);
        return;
    }

    // Remove device from table view
    [self.tareas removeObjectAtIndex:indexPath.row];
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
}
}
- (void)viewDidLoad
{
[super viewDidLoad];

// Uncomment the following line to preserve selection between presentations.
// self.clearsSelectionOnViewWillAppear = NO;

// Uncomment the following line to display an Edit button in the navigation bar for this view controller.
// self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

 - (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

NSManagedObject *materia = [self.tareas objectAtIndex:indexPath.row];

NSString *perfil_activo = [materia valueForKey:@"descripcion"];
NSUserDefaults *defs=[NSUserDefaults standardUserDefaults];
//[defs setObject:perfil_activo forKey:@"perfil_activo"];

[tableView deselectRowAtIndexPath:indexPath animated:YES];

UIAlertView *a=[[UIAlertView alloc] initWithTitle:@"texto" message:perfil_activo delegate:nil cancelButtonTitle:@"ok" otherButtonTitles:nil, nil];
[a show];

} 
```

谢谢圣地亚哥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:44:06.313

您想获取当前选定的对象。

`NSIndex selectedRow = self.tableView.selectedRow;`

在您的表格视图中使用此索引： `NSManagedObject *selectedObject = [self.tableView objectAtIndex:selectedRow]`

在你`NuevaTareaViewController`应该有一个属性： `NSManagoedObjectContext` `Tarea`

如果是这样，那么你可以这样做：

```
-(IBAction)guardar:(id)sender {

NSIndex selectedRow = self.tableView.selectedRow;
NSManagedObject *selectedObject = [self.tableView objectAtIndex:selectedRow];

NuevaTareaViewController *n=[[NuevaTareaViewController alloc] initWithNibName:nil     bundle:nil];

[n setManagedObjectContext:self.context];
[n setTarea:selectedObject];

[self presentViewController:n animated:YES completion:nil]; 
```

}

您可以将托管对象上下文保存在`NuevaTareaViewController`.

话虽如此，阅读`NSFetchedResultsController`and `Storyboard Segues`，您可能会发现它们非常有帮助。

# php - mysql_query 求和结果

> ID：15870257
> 
> 赞同：0
> 
> 时间：2013-04-08T02:18:56.647
> 
> 标签：php, mysql

我完全迷路了，需要帮助！我将是第一个承认我不是专家的人，所以如果你问我为什么要这样做，答案很简单，我会尝试一些东西直到它起作用。但是，我无法弄清楚这一点。我需要做的就是添加一个数组（猜测它是一个数组）。如果您看一下，您会发现我的代码从 url 中找到了订单 ID，`$_GET["id"]`然后将针对该订单订购的所有产品放入一个数组中。最后得到订单中每个产品的成本。使用代码，它列出了每个生产订单的成本。我想做的是获得订单中每个产品的成本总和。一个订单可能是 1 个产品，下一个订单可能是 10 个，因此它必须是动态的。！？！我猜！？！

在此先感谢，并为冗长的帖子感到抱歉。

```
$orderdetails = mysql_query("SELECT * FROM  cscart_order_details WHERE order_id='" . $_GET["id"] . "'") 
or die(mysql_error()); 
    while($odinfo = mysql_fetch_array( $orderdetails )) 
        {

            $products = mysql_query("SELECT * FROM  cscart_products WHERE product_id='" . $odinfo['product_id']  ."'") 
            or die(mysql_error()); 

                while($pinfo = mysql_fetch_array( $products ))
                    {   
                        echo "<tr class='table-rowwithouthover'><td>Product Cost: $" . $pinfo['cost'] . "</td>";
                    }   
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T02:27:33.357

仅通过查看您的代码，您就容易受到[sql injections](http://en.wikipedia.org/wiki/SQL_injection)的攻击。

如果你想把订单的总成本加起来，你不能只使用一个变量来做到这一点吗？还是我误解了这个问题？

```
 $totalCost = 0;
 while($pinfo = mysql_fetch_array( $products )){   
    $totalCost += $pinfo['cost'];
 }
 echo "The total cost of your order is: $".$totalCost; 
```

# php - 使用 PHP 从 ASP 页面获取数据

> ID：15870260
> 
> 赞同：0
> 
> 时间：2013-04-08T02:19:09.153
> 
> 标签：php, curl, asp-classic

我正在尝试从下面的 url 获取数据但我没有成功。我已经阅读了很多关于 Viewstate 的内容，但是我没有成功地让它工作。每当我执行这个时，我都没有得到任何数据，但我没有收到任何错误。

http://agmarkweb.dacnet.nic.in/SA_Pri_MonthRep.aspx'；

```
 $fields = array(
    'Year_list'=>urlencode("2013"),                     
    'Month_list'=>urlencode("2"),                       
    'Commodity_list'=>urlencode("40"),                  
    '__EVENTTARGET'=>(""),                          
    '__EVENTARGUMENT'=>(""),                        
    '__LASTFOCUS'=>(""),                            
    '__VIEWSTATE'=>(""));

    //url-ify the data for the POST

    foreach($fields as $key=>$value) { 
        $fields_string .= $key.'='.$value.'&'; }
        rtrim($fields_string,'&');
        //open connection

        $ch = curl_init();
            //set the url, number of POST vars, POST data
        curl_setopt($ch,CURLOPT_URL,$url);
        curl_setopt($ch,CURLOPT_POST,count($fields));
        curl_setopt($ch, CURLOPT_VERBOSE, false);
        curl_setopt($ch, CURLOPT_HEADER, CURLOPT_ENCODING);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);
        curl_setopt($ch,CURLOPT_USERAGENT,'Mozilla/5.0 (Windows; U;Windows NT 5.1; en-US; rv:1.8.1.13) Gecko/20080311 Firefox/2.0.0.13');
        //execute post
        $result = curl_exec($ch);
        echo $result;
        //close connection
        curl_close($ch); 
```

我阅读了很多关于视图状态的信息，但在这种情况下应该怎么做？我是否应该将 Viewstate 复制到我的代码中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:33:49.647

尝试这个：

```
$fields = array(
    'Year_list'=>2013,                     
    'Month_list'=> 2,                       
    'Commodity_list'=>40,                  
    '__EVENTTARGET'=>'',                          
    '__EVENTARGUMENT'=>'',                        
    '__LASTFOCUS'=>'',                            
    '__VIEWSTATE'=>''
);

//open connection

$ch = curl_init();
$url = 'http://agmarkweb.dacnet.nic.in/SA_Pri_MonthRep.aspx';
//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_POST,count($fields));
curl_setopt($ch, CURLOPT_VERBOSE, false);
curl_setopt($ch, CURLOPT_HEADER, CURLOPT_ENCODING);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch,CURLOPT_POSTFIELDS, http_build_query($fields));
curl_setopt($ch,CURLOPT_USERAGENT,'Mozilla/5.0 (Windows; U;Windows NT 5.1; en-US; rv:1.8.1.13) Gecko/20080311 Firefox/2.0.0.13');
//execute post
$result = curl_exec($ch);
echo $result;
//close connection
curl_close($ch); 
```

# python-2.7 - 如何使用带有通配符的python替换文件的一行

> ID：15870263
> 
> 赞同：0
> 
> 时间：2013-04-08T02:19:28.470
> 
> 标签：python-2.7, windows-7-x64

我是 python 新手，正在使用 2.7 版

我想使用填充该行其余部分的a 替换`string`文件内部。`wild card`这是我到目前为止...

这将起作用并将文件字符串更改为`second string`：

```
if line == 'This = first string':
    line = 'This = second string' 
```

这将不起作用，文件字符串将保持为`first string`：

```
if line == 'This = *':
    line = 'This = second string' 
```

完整脚本：

```
import sys
import shutil
import os
import re

#Assigns tf as a tmp file with the module for appending and writing, and creating the file if it does not exist.
tf = open('tmp', 'a+')

#Assigns f as test.txt
with open('test1.txt') as f:
#Reads the line in the test1.txt file
    for line in f.readlines():
#Checks for the line condition
        if line == 'This = *':
#Sets the new line condition
            line = 'This = second string'
#Replaces the line withe the new build path
        tf.write(line)
#Closes the test2.txt file
f.close()
tf.close()
#Copies the changes from the tmp file and replaces them into the test2.txt
shutil.copy('tmp', 'test2.txt')
#Removies the tmp file from the computer
os.remove('tmp') 
```

**JF 塞巴斯蒂安**的最新代码

 **test2.txt 内容：

```
blah
This = first string 
```

testing2.py 内容：

```
import os
from tempfile import NamedTemporaryFile

prefix = "This = "
path = 'test2.txt'  
dirpath = os.path.dirname(path)
with open(path) as input_file:
    with open(path+".tmp", mode="w") as tmp_file:
        for line in input_file:
            if line.startswith(prefix):
                line = prefix + "second string\n"
            tmp_file.write(line)
        tmp_file.delete = False
os.remove(path)
os.rename(tmp_file.name, path) 
```

错误信息：

```
C:\Users\james>testing2.py
Traceback (most recent call last):
  File "C:\Users\james\testing2.py", line 13, in <module>
    tmp_file.delete = False
AttributeError: 'file' object has no attribute 'delete' 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:42:27.540

要替换以前缀开头的行：

```
prefix = "This = "
if line.startswith(prefix):
    line = prefix + "second string" 
```

如果文件是带有`key = value`行的配置文件，那么您还可以使用[`line.partition()`方法、`ConfigParser`模块](https://stackoverflow.com/a/600195/4279)或正则表达式替换值（在更复杂的情况下）：

```
import re
# ...
line = re.sub(r"^This\s*=.*$", "This = second string", line) 
```

替换文件中的行；您可以使用[`fileinput`模块或只写入临时文件（`tempfile.NamedTemporaryFile`）并在最后重命名](https://stackoverflow.com/questions/39086/search-and-replace-a-line-in-a-file-in-python)：

```
#!/usr/bin/env python
import os
from tempfile import NamedTemporaryFile

prefix = "This = "
path = 'test1.txt'  
dirpath = os.path.dirname(path)
with open(path) as input_file:
    with NamedTemporaryFile(mode="w", dir=dirpath) as tmp_file:
        for line in input_file:
            if line.startswith(prefix):
                line = prefix + "second string\n"
            tmp_file.write(line)
        tmp_file.delete = False
os.remove(path)
os.rename(tmp_file.name, path) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T06:06:51.927

我终于找到了答案...

在 Nightly.py 执行之前的 test1.txt：

```
blah
blah
This is a first string
blah
blah 
```

顺便说一句，标签在 notepad++ 的代码中有所不同

```
import sys
import os
import re
import shutil

tf = open('tmp', 'a+')

with open('test1.txt') as f:
    for line in f.readlines():
        build = re.sub ('This is.*','This is a second string',line)
        tf.write(build)
tf.close()
f.close()
shutil.copy('tmp', 'test1.txt')
os.remove('tmp') 
```

Nightly.py 执行后的 test1.txt：

```
blah
blah
This is a second string
blah
blah 
```**

# scala - Scala List[Char] 为空但不返回 true

> ID：15870267
> 
> 赞同：0
> 
> 时间：2013-04-08T02:20:29.067
> 
> 标签：scala, recursion

我有以下代码（这是我的课程作业）

```
def balance(chars: List[Char]): Boolean = {
  def innerBalance(chars: List[Char], count: Int): Boolean = {
    if (chars.isEmpty) count == 0
    if (chars.head == '(') innerBalance(chars.tail, count+1)
    if (chars.head == ')') (count > 0) && innerBalance(chars.tail, count-1)
    innerBalance(chars.tail, count)
  }

  innerBalance(chars, 0)
} 
```

据我所知，这与炖菜对这种[Scala 方法的回答非常相似，以编程一堆 if，](https://stackoverflow.com/questions/12523788/scala-way-to-program-bunch-of-ifs) 但我不知道为什么该语句

```
if (chars.isEmpty) count == 0 
```

总是假的。

如果我运行这样的测试

```
balance("".toList) 
```

它只是抛出异常。

谢谢你的帮助。问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T03:56:28.313

在 Scala 中，您永远不应该使用`return`，而应该编写表达式。上面代码的主要问题是您没有使用`if`表达式，即您省略了该`else`部分，因此编译器正在推断`Unit`（Java 的 void，这意味着“没有”返回）。

由于您的情况有多种选择，我建议您使用匹配表达式：

```
chars match {
  case '(' :: Nil => ...
  case ')' :: Nil => ...
  case Nil        => count == 0
  case _          => innerBalance(chars.tail, count)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T03:17:32.440

添加到[Huw 的答案](https://stackoverflow.com/a/15870309/367649)中，您还可以使用模式匹配使其更优雅：

```
 def innerBalance(chars: List[Char], count: Int): Boolean = chars match {
          case _ if count < 0  => false
          case Nil             => count == 0
          case '(' :: rest     => innerBalance(rest, count + 1)
          case ')' :: rest     => innerBalance(rest, count - 1)
          case _ :: rest       => innerBalance(rest, count)
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T02:25:36.087

像块

```
{
  if (a) b
  c
} 
```

`b`如果是真的会做`a`，然后*总是*做`c`。如果您只想`c`在`a`为 false 时发生，您需要使用`else`：

```
{
  if (a) b
  else c
} 
```

# google-app-engine - 更改实体后，GAE 数据存储查询有时不起作用

> ID：15870268
> 
> 赞同：0
> 
> 时间：2013-04-08T02:20:55.037
> 
> 标签：google-app-engine, jpa, google-cloud-datastore, datanucleus

我试图找出我看到的一个问题。我注意到，当我通过添加一个新字段来更改实体对象定义时，有时我不再可以从数据存储中已经存在的先前记录中获取结果。例如，在下面的这个例子中，我可以在数据存储中看到实体，但是我得到了这个异常：

严重：没有查询结果：SELECT FROM com.alero.services.model.MyEntity myEntity WHERE myEntity.key = :key

我将 JPA 与 GAE 数据存储一起使用。

我似乎能够纠正问题并再次开始获得结果的唯一方法是删除 appengine 生成的目录，然后重新创建实体。它是否以某种方式被缓存，如果是这种情况，我应该做些什么来让数据存储知道它需要删除缓存？

```
 String queryString = "select from " + MyEntity.class.getName()
                + " myentity where myentity.key = :key";

        Key keySub = KeyFactory.createKey("MyEntity", myEntityId);

        Query query = em.createQuery(queryString);
        query.setParameter("key", KeyFactory.keyToString(keySub));

        try {
            MyEntity myEntity = (MyEntity) query.getSingleResult();
            em.close();
            return myEntity;
        } catch (Exception e) {         
            log.severe(e.getMessage());
            em.close();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:14:36.907

其实我发现了这个问题。这与我改变我的实体并没有真正的关系。这就是我坚持和合并我的实体的方式。我在无主双向关系中的两个实体之间有无主关系，我在持久化我的实体之前添加了对彼此的引用。这正在创建一种拥有的关系。因此，当我用我的键查询时，我没有找到它，因为当我尝试将实体上的实际键作为父键查询时，它是子键。

因此，在双向关系中相互添加关系之前，我需要保留我的两个实体。然后我可以合并它们。这将为每个实体创建一个父键，然后我可以在双向关系之间创建我的关系。

# r - 如何从融化的数据中提取矢量

> ID：15870284
> 
> 赞同：0
> 
> 时间：2013-04-08T02:22:54.627
> 
> 标签：r, casting, melt

原始数据如下所示：

```
 type value
1  a    10
2  a    20
3  a    30
4  b    50
5  b    10
6  b    20 
```

融化的数据如下所示：

```
1 a value 10
2 b value 10 
```

我想将 wilcox.test 应用于 a,b 来检查 a 是否大于 b。怎么做？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:26:32.533

我认为您不需要融化数据。

`raw`给定一个包含您的`raw`（未融化的）数据的 data.frame

```
wilcox.test(value ~ type, data = raw) 
```

应该管用。

# javascript - expressjs 静态文件未提供服务

> ID：15870285
> 
> 赞同：1
> 
> 时间：2013-04-08T02:22:56.043
> 
> 标签：javascript, node.js, express

我陷入了一个令人沮丧的问题。

我的静态文件没有由 express js 提供服务，而是我的全局 catch all get 处理程序被命中。

我的目录结构：

```
node/apps/web/app.js
-------------/public/
--------------------/css/site.css
--------------------/js/
--------------------/img/ 
```

我的开发配置

```
app.configure('development',function() {

console.log(__dirname);

// for development, serve static files via express
app.use(express.static(__dirname + '/public'));

app.use(express.errorHandler({dumpExceptions: true, showStack: true}));
});
//...later
app.get('*',route.r404); 
```

请求：

`http://192.168.1.101/css/site.css`

无法触发正确的 css 文件。

编辑添加：

看起来它与默认的全部捕获路线有关。如果我将其注释掉，它会正确解决...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T02:41:44.347

如果 app.use(app.router) 高于 app.use(express.static(...)) 线，那么路由将胜过静态。您的 app.get('*',...) 行是路线的一部分。

请参阅[Node.js / Express.js - app.router 是如何工作的？](https://stackoverflow.com/questions/12695591/node-js-express-js-how-does-app-router-work)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T10:31:12.960

```
 var express = require("D:/node/express/modules/express");
 var path=require("D:/node/express/modules/path");
 var app = new express();
 app.get('/',function(req,res){
     res.sendFile(path.join(__dirname,'/index.html'));
 });
 app.get('/about',function(req,res){
    res.sendFile(path.join(__dirname,'/about.html'));
 });
 app.listen(1000); 
```

这里是模块路径`var express`，`var path`你可以使用这个简单的代码来提供静态文件。

# java - 递归：二维网格

> ID：15870287
> 
> 赞同：0
> 
> 时间：2013-04-08T02:23:02.893
> 
> 标签：java

[http://tinyurl.com/dy4dwf9](http://tinyurl.com/dy4dwf9)（谷歌图书。原始链接很长。）

有人可以解释一下这个递归程序是如何工作的吗？我不明白这如何不会导致无限循环。当它到达“eraseBlob(row-1, col);”时，它不会一直循环回到同样的方法吗？因此，它将重复“eraseBlob(row-1, col);?” 最后，它说如果“image[row][col] = WHITE;” 移到最后会导致无限循环，但是，我不明白即使在开始时它也不会导致无限循环。我不完全确定代码试图完成什么，我已经读过很多遍了。我相信它正在尝试将 a 单元格以及原始单元格的下方、上方、左侧和右侧的单元格更改为白色。如果我不正确，请纠正我。

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:29:57.150

该算法依次查看每个单元的邻居。如果单元格是黑色的，它将变成白色，并查看邻居。对于每个黑人邻居，它将查看所​​有黑人邻居，然后重复。因此，通过在查看邻居之前将初始单元格设置为白色，它可以防止无限循环（因为如果 B 是 A 的邻居，并且两者都是黑色的，那么 A 将查看 B 将查看 A 将... -但是如果我们把A设置为白色，那么B看的时候就不会打扰A的邻居了，也就没有无限循环了）。

# php - 下载成功但只下载了部分文件

> ID：15870293
> 
> 赞同：0
> 
> 时间：2013-04-08T02:23:32.993
> 
> 标签：php, download, file-get-contents, readfile

我希望我的用户能够在单击下载按钮后下载视频。当他们点击下载时，它下载得很好，但它只下载了总共 40mb 的大约 200 字节。到底是怎么回事？

这是我正在使用的代码示例

```
header('Content-Type: video/mp4');
header("Content-Disposition: attachment; filename=$filename.mp4");
header('Pragma: no-cache');
$download = "$url/$filename.mp4";
readfile($download); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T03:58:23.963

这里一切正常。但也许路径不正确。试试下面的代码。你会得到什么是错的：

```
header('Content-Type: video/mp4');
//header("Content-Disposition: attachment; filename=$filename.mp4");
//header('Pragma: no-cache');
$download = "$url/$filename.mp4";
readfile($download); 
```

`file_exists`在允许您的下载脚本执行之前，请务必检查是否。

# intellij-idea - IntelliJ 版本 12.2 重新格式化文件保存

> ID：15870297
> 
> 赞同：0
> 
> 时间：2013-04-08T02:23:47.403
> 
> 标签：intellij-idea

如何在 IntelliJ 版本 12.2 中的文件保存（ `Ctrl`+ ）时设置重新格式化和删除未使用的导入？`S`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T08:26:39.860

在 IntelliJ IDEA 中工作时，文件始终由 IDE 自动保存。因此，无需按 Ctrl-S，因此 IntelliJ IDEA 不提供在保存文件时执行操作的方法。

在编辑文件时，可以直接自动删除未使用的导入：设置 | 编辑 | 自动导入 | 动态优化导入

可以在 VCS 提交之前自动重新格式化代码；“提交更改”对话框中有一个相应的复选框。

# jquery - 使用 jQuery addClass/removeClass 时如何返回默认样式/主题？

> ID：15870299
> 
> 赞同：0
> 
> 时间：2013-04-08T02:23:50.787
> 
> 标签：jquery, css, addclass, removeclass

我有这个小提琴：http: [//jsfiddle.net/UxVF9/](http://jsfiddle.net/UxVF9/)

```
$('#theme1').click(function() {
    $('.links a').removeClass().addClass('theme1');
}); 
```

如何通过按“主题 1”按钮回到默认的彩色状态（主题 1）？

我知道我使用“removeClass()”删除了所有类，并且我已经尝试了很多，但这仍然让我抓狂。

我很感激帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:30:41.500

最简单的方法就是删除不需要的类。

```
$('#theme1').click(function() {
    $('.links a').removeClass("theme2 theme3").addClass('theme1');
}); 
```

但是，这还不够，因为特定类具有优先级并且可以与 theme1 一起正常工作。你需要增加theme2和theme3的特异性，但这很简单：

```
.links .theme2 { background-color: #000; color: #fff; text-decoration:none; } 
```

将它放在 CSS 中的其他规则集*之后。*

* * *

您还可以通过在功能上删除所有以“主题”开头的类并使用单个类进行绑定来使这更简单/更灵活：http: [//jsfiddle.net/ExplosionPIlls/UxVF9/2/](http://jsfiddle.net/ExplosionPIlls/UxVF9/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:46:14.190

我会将所有初始主题存储在一个数组中。 [更新小提琴](http://jsfiddle.net/UxVF9/4/)

```
var initial = new Array (); //empty array
$('.links a').each(function(index) { //each element in the selector is returned in the same order and has an index.
    initial[index] = $(this).attr('class'); // add the starting class to the empty array positioned with the index
});
$('#theme1').click(function() {
    $('.links a').removeClass().each(function(index) { //same order and index 
        $(this).addClass(initial[index]); // add the classes back using the array and index
    });
}); 
```

# angularjs - 在我做 angular.bootstrap 之前我需要创建一个角度模块吗？

> ID：15870300
> 
> 赞同：2
> 
> 时间：2013-04-08T02:24:00.900
> 
> 标签：angularjs

我见过两种不同的方式来启动 AngularJS：

*   ng-app="TodoApp"
*   angular.bootstrap(angular.element("body")[0], ["TodoApp"]);

首先有人可以告诉我这两者是否相同吗？

我还看到以下代码：

```
var TodoApp = angular.module('TodoApp', ['ngResource']); 
```

在发出 angular.bootstrap 命令之前，是否必须加载上面的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T08:30:01.810

## ng:应用程序

Directive* ng:app 可用于自动引导应用程序。可以在 HTML 中放置多个 ng-app 指令，但只有第一个将用于引导应用程序，而其他指令将被忽略。找到第一个指令的元素`ng:app`成为 AngularJS 应用程序的“根”（这是`$rootScope`附加的位置）。

> [*使用 ng:app* ] Angular 在 DOMContentLoaded 事件时自动初始化...

[*尽管`ng:app`与其他指令类似地使用它，但它不是`ng`模块的一部分，并且它的定义方式与其他 Angular 指令的定义方式不同。]  

## angular.bootstrap

另一方面，通过手动引导，您可以在同一页面内初始化多个不同的 Angular 应用程序。

> 你需要这样做的例子包括使用脚本加载器或需要在 Angular 编译页面之前执行操作。

因此，如果您想使用 RequireJS 之类的脚本加载器，那么在 RequireJS 运行器方法中，您将需要通过调用`angular.bootstrap(...`.

Angular.bootstrap 命令允许您将模块依赖项指定为第二个参数。该函数的签名是：

```
angular.bootstrap(element[, modules]); 
```

当您想要手动引导应用程序时，您必须在依赖项数组中指定主角度模块的名称（angular.bootstrap 调用的第二个参数）：

```
// You define your app module:
angular.module('myApp', []);
// Then you specify your app module as a dependency to angular.bootstrap:
angular.bootstrap(element, ['myApp']); 
```

  此外，手动引导可让您在初始化 Angular 应用程序之前在 Angular 之外进行一些预处理和配置。  

## 加载顺序

要回答您问题的第二部分：是的，您需要先加载并执行您的模块，然后才能在调用`angular.bootstrap`.

```
angular.module('TodoApp', ['ngResource']);
angular.bootstrap(document, ['TodoApp']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T07:48:41.653

1.  这两行是相同的（假设您的`body`元素上有 ng-app）。

2.  你应该按这个顺序做：

    1.  包括 angular.js
    2.  包括您的所有代码（控制器等）
    3.  调用引导程序

注意，在调用 bootstrap 之后你不能定义新的模块（至少现在，因为没有动态模块加载和延迟加载）。这是因为加载 AngularJS 应用程序有几个步骤 - 配置和运行。并且运行后无法运行其他模块的配置步骤。

# html - 将 HTML 表格及其列从水平旋转到垂直的自动方式

> ID：15870301
> 
> 赞同：0
> 
> 时间：2013-04-08T02:24:06.193
> 
> 标签：html, css, html-table

我已经有一个 HTML 表格，如下所示：

```
<table border ="1">
        <tr>
            <td>Festival Name:</td>
            <td>Start Date:</td>
            <td>End Date:</td>
            <td>List of Trips to </td>
        </tr>

        <tr>      
            <td>Reading</td>
            <td>2013-04-03</td>
            <td>2013-04-07</td>
            <td>
                <a href="ControllerServlet?festivalProfileLink=2">View Profile and trips</a>
            </td>
        </tr>
</table> 
```

然而，它的问题是它不适合我的 HTML 网站，因为我在左侧和右侧放置了横幅。有什么方法可以自动垂直旋转表格，以便所有数据都适合页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:10:14.493

[我在这个jsFiddle](http://jsfiddle.net/apaul34208/YvRG7/2/)中放了两个选项

选项1

```
<table border="1">
    <tbody>
        <tr>
            <td>Festival Name:</td>
            <td>Reading</td>
        </tr>
        <tr>
            <td>Start Date:</td>
            <td>2013-04-03</td>
        </tr>
        <tr>
            <td>End Date:</td>
            <td>2013-04-07</td>
        </tr>
        <tr>
            <td>List of Trips to</td>
            <td><a href="http://fiddle.jshell.net/_display/ControllerServlet?festivalProfileLink=2">View Profile and trips</a>
            </td>
        </tr>
    </tbody>
</table> 
```

选项2

CSS：

```
 .box {
    position:absolute;
    left:30px;
    top:250px;
    transform-origin:left;
    transform:rotate(90deg); /* -webkit-, -moz-, etc. omitted for brevity */
} 
```

html:

```
<div class="box">
    <table border="1">
        <tr>
            <td>Festival Name:</td>
            <td>Start Date:</td>
            <td>End Date:</td>
            <td>List of Trips to</td>
        </tr>
        <tr>
            <td>Reading</td>
            <td>2013-04-03</td>
            <td>2013-04-07</td>
            <td> <a href="ControllerServlet?festivalProfileLink=2">View Profile and trips</a>

            </td>
        </tr>
    </table>
</div> 
```

我不确定你是否真的想旋转它。

# storyboard - 如何从随机初始控制器展开序列

> ID：15870302
> 
> 赞同：1
> 
> 时间：2013-04-08T02:24:06.513
> 
> 标签：storyboard, segue, stack-unwinding

我在情节提要中有一个托管容器视图。我有四个视图，用户可以左右滑动。

如果用户双击，双击，我将它们发送到新控制器。问题是，我如何把它们带回来？我想要双击双击将它们发送回它们的来源。

我不能使用转场，因为我不知道在情节提要级别链接回什么。如何更改 segue 的目的地以返回我们来自的地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:28:52.303

在这种情况下，最简单的方法是定义一个通用的“pop”展开segue，所有视图控制器都将像这样实现：

`- (void)pop:(UIStoryboardSegue *)segue;`

然后由于每个视图控制器都定义了这个展开转场，导航控制器将以相反的顺序查看导航堆栈并展开到第一个实现所需转场的栈。这将为您的导航堆栈提供完整的展开功能。

这种方法的缺点是，如果您想跳回特定的视图控制器，您可能需要额外的 segue。

**编辑：**

我只想注意这个方法也适用于 Storyboard，只需添加一个`exit`segue 并将每个视图控制器连接到`pop:`.

希望这可以帮助！

# javascript - 子类不起作用，为什么？

> ID：15870304
> 
> 赞同：1
> 
> 时间：2013-04-08T02:24:28.417
> 
> 标签：javascript, oop

```
 function inherit(p){
        if(p == null) throw TypeError();
        if(Object.create) return Object.create(p);
        var t = typeof p;
        if(t != "function" || t != "object") throw TypeError();
        function f(){};
        f.prototype = p;
        return new f;
    }

    function Super_class(){
        this.Sup_prop = "I'm superclass";
        this.Sup_prop2 = "I'm superclass2";
    }
    Super_class.prototype.Hello = function(){ alert("Hello"); };

    function Sub_class(){
        this.sub_prop = "I'm subclass";
        this.sub_prop2 = "I'm subclass 2";
    }
    Sub_class.prototype = inherit(Super_class);
    Sub_class.prototype.constructor = Sub_class;

    var x = new Sub_class;
    x.Hello(); 
```

这段代码来自 Javascript The Definitive Guide book，解释了如何创建子类，但它不起作用。

我曾经在这个网站上看到过关于如何创建子类的代码。

```
 function Super_class(){
        this.Sup_prop = "I'm superclass";
        this.Sup_prop2 = "I'm superclass2";
    }
    Super_class.prototype.Hello = function(){ alert("Hello"); };

    function Sub_class(){
        this.sub_prop = "I'm subclass";
        this.sub_prop2 = "I'm subclass 2";
    }
    Sub_class.prototype = new Super_class;

    var x = new Sub_class; // change here
    x.Hello();// It work!! 
```

我想知道为什么我书中的代码不起作用。我的书有错误或我错了。

PS我的英文写得不好，对不起。

**更新** 这是我上面的第一个例子。

```
 Sub_class.prototype = inherit(Super_class);
    Sub_class.prototype.constructor = Sub_class; //Why did set be Sub_class?? 
```

我想知道为什么“Sub_class.prototype.constructor”设置为Sub_class？我的书没有解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:53:00.267

你应该通过

```
Super_class.prototype 
```

而不是`Super_class`继承函数。它似乎期望一个原型对象，而不是函数本身

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T02:55:57.173

问题出在你的`inherit`函数中，特别是这一行：

```
if(Object.create) return Object.create(p); 
```

这将返回一个新对象，其原型设置为`p`。但是，`p`不是`Super_class`; 这是功能`Super_class`。我不确定`inherit`当它接收一个对象作为参数时你想做什么，但是当它接收一个函数时，你不想使用`Object.create`. 试试这个从 for 开始`inherit`：

```
function inherit(p) {
    if (typeof p === 'function') {
        return new p;
    }
    throw TypeError()
} 
```

# java - 伏地魔项目的对象映射

> ID：15870308
> 
> 赞同：1
> 
> 时间：2013-04-08T02:25:34.150
> 
> 标签：java, orm, voldemort

我一直在尝试找到一个对象映射库`Project Voldemort`；但是我似乎找不到一个。

*   是否有任何用 Java 编写的 Voldemort 对象映射库/框架
*   无论是成熟的项目还是刚刚起步

# xcode - 通过 MMS 传送 Apple Passbook Pass（.PKPass 文件）

> ID：15870310
> 
> 赞同：1
> 
> 时间：2013-04-08T02:25:53.070
> 
> 标签：xcode, sms, mms, passbook

在研究短信营销公司时，我发现了一些我不知道的独特的东西 ( [http://www.sumotext.com/passbook-MMS.html )。](http://www.sumotext.com/passbook-MMS.html)这是能够将 MMS 消息中的 .PKPass（Apple Passbook Passes）直接传送到 iPhone 的能力。

在他们的网站上，他们说“任何人都可以通过配套应用程序、移动登录页面或电子邮件中的链接传递通行证。但 Sumotext 可以通过彩信直接将通行证传递到移动设备！” 如果你尝试他们在侧边栏中的演示，它会让你回短信“B”，然后你会收到一条 MMS 消息，附件是 Passbook 通行证，这是我唯一一次看到的东西像这样完成。在我的 iPhone 上显示“附件：1 次通过”

这怎么可能？要将 PKPass 附加到 MMS 消息，将通过 SMS/MMS 发送 API（例如 Twilio/Mogreet）发送。我查看了 Apple 的 Passbook 文档等，没有看到任何内容表明它甚至可以通过 MMS 消息传递通行证。我所看到的只是通过电子邮件或网络链接传递的通行证。

我对 MMS 了解不多，但它是否必须将 MMS MIME 类型更改为 PKPass 格式，例如“application/vnd.apple.pkpass”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T03:26:30.347

您是对的 - 要通过 MMS 发送通行证，您只需将 .pkpass 捆绑包附加到 mime 类型为`application/vnd.apple.pkpass`.

# php - 控制台应用程序输出

> ID：15870311
> 
> 赞同：0
> 
> 时间：2013-04-08T02:25:55.023
> 
> 标签：php, matlab, console-application, executable

我已经编译了 matlab 文件，该文件以可执行形式显示大量数字作为基于控制台的应用程序。我需要对 php.ini 中的可执行文件的输出做进一步的计算。基于可执行控制台的应用程序的输出是 ASCII 还是数字格式？如何将 ASCII 输出转换为数字格式，以便在 php 中对其进行进一步计算？

我正在使用 disp(variable) 来显示输出。输出形式为。

```
 (1,1) 0.1424 
```

(2,1) 0.0117 (3,1) 0.0000 (4,1) 0.0000 (5,1) 0.0677 (6,1) 0.0000 (7,1) 0.5308 (8,1) 0.0077 (9,1) 0.0512 (10 ,1) 0.0118 (11,1) 0.0001 (12,1) 0.1764

(114,1) 0.4564 (203,1) 0.2962 (250,1) 0.2474

第 1 至 7 列

0.1373 0.0414 0.0541 0.1342 0.5606 0.5293 0.1652

第 8 至 14 列

0.0341 0.0396 0.0633 0.0778 0.0289 0.0654 0.0752

第 15 至 21 列

0.3055 0.4602 0.0631 0.0360 0.0188 0.0497 0.0228

第 22 至 28 列

0.0294 0.0373 0.0734 0.3148 0.1703 0.0294 0.0057

第 29 至 35 列

0.0263 0.0382 0.0977 0.0396 0.1056 0.0781 0.1085

第 36 至 42 列

0.1537 0.0239 0.0154 0.0046 0.0121 0.0700 0.0171

第 43 至 49 列

0.0304 0.0551 0.2174 0.2594 0.1179 0.0355 0.0103

第 50 至 56 列

0.0084 0.0188 0.0025 0.0019 0.0219 0.1391 0.1527

第 57 至 63 列

0.0471 0.0313 0.0170 0.0557 0.0016 0.0044 0.0184

第 64 至 70 列

0.0194 0.2053 0.3206 0.1394 0.0208 0.0332 0.0658

第 71 至 77 列

0.0193 0.0073 0.0026 0.0223 0.1996 0.3017 0.0207

第 78 至 84 列

0.0168 0.0076 0.0038 0.1666 0.0278 0.0167 0.1070

第 85 至 91 列

0.3269 0.2546 0.0270 0.0026 0.0053 0.0079 0.0132

第 92 至 98 列

0.0059 0.0141 0.0205 0.1327 0.2656 0.0300 0.0049

第 99 至 105 列

0.0066 0.0228 0 0.0253 0.0622 0.0107 0.0792

第 106 至 112 列

0.0754 0.0157 0 0.0097 0.0229 0.1128 0.0549

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:36:37.680

每当程序产生“文本”输出时，它将是 ASCII。您通常可以将此文本通过管道传输到文件或其他进程。根据平台的不同`> myfile.txt`，命令末尾的内容会生成一个文件`myfile.txt`，其中包含进程的所有输出（`matlab -nosplash myScript.m > myfile.txt`例如，可能是 .）。

现在问题变成了使用 Python 读取文本文件的问题。您可以参考[这个较早的问题](https://stackoverflow.com/questions/6583573/how-to-read-numbers-from-file-in-python)以了解如何做到这一点。

编辑请注意，让您的程序直接将数字写入文件（而不是通过控制台）非常容易。这是一个简单的例子：

```
A = 1:5;
fid = fopen('C:\mydir\mydata.dat', 'w');
fprintf(fid, '%d ', A);
fclose(fid); 
```

这将创建一个数组，打开一个文件进行写入，将值写入文件，然后关闭文件。对于测试，您可以使用

```
fid = 1; 
```

相反 - 这将产生输出到控制台。如果您这样做，我不确定该`fclose(fid)`语句是否会引起问题...

# html-agility-pack - Html Agility Pack 在现有的 html 表中附加 thead tbody tfoot

> ID：15870313
> 
> 赞同：0
> 
> 时间：2013-04-08T02:26:07.527
> 
> 标签：html-agility-pack

我一直在搜索谷歌但没有结果:(。我有一个如下所示的 HTML 表格

```
<table>
    <tr>
       <td>column1</td>
       <td>column2</td>
    </tr>
    <tr>
       <td>column1rowtext</td>
       <td>column2rowtext</td>
    </tr>
    <tr>
       <td>column1rowtext</td>
       <td>column2rowtext</td>
    </tr>
    <tr>
       <td>column1EndText</td>
       <td>column2EndText</td>
    </tr>
</table> 
```

我想像下面一样使用“Html Agility Pack”添加thead、tbody和tfoot

```
<table>
  <thead>
    <tr>
      <td>column1</td>
      <td>column2</td>
    </tr>
  </thead>
  <tbody>
   <tr>
     <td>column1rowtext</td>
     <td>column2rowtext</td>
   </tr>
   <tr>
     <td>column1rowtext</td>
     <td>column2rowtext</td>
   </tr>
 </tbody>
 <tfoot>
   <tr>
     <td>column1EndText</td>
     <td>column2EndText</td>
   </tr>
 </tfoot>
</table> 
```

有人可以指导我如何使用 html 敏捷包来修改现有的 html 表并添加更多标签。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:27:42.260

Html Agility Pack 构造了一个读/写 DOM，因此您可以按照您想要的方式重新构建它。这是一个似乎有效的示例代码：

```
 HtmlDocument doc = new HtmlDocument();
        doc.Load("MyTest.htm");

        // get the first TR
        CloneAsParentNode(doc.DocumentNode.SelectNodes("table/tr[1]"), "thead");

        // get all remaining TRs but the last
        CloneAsParentNode(doc.DocumentNode.SelectNodes("table/tr[position()<last()]"), "tbody");

        // get the first TR (it's also the last, since it's the only one at that level)
        CloneAsParentNode(doc.DocumentNode.SelectNodes("table/tr[1]"), "tfoot");

    static HtmlNode CloneAsParentNode(HtmlNodeCollection nodes, string name)
    {
        HtmlNode parent = nodes[0].ParentNode;

        // create a new parent with the given name
        HtmlNode newParent = nodes[0].OwnerDocument.CreateElement(name);

        // insert before the first node in the selection
        parent.InsertBefore(newParent, nodes[0]);

        // clone all sub nodes
        foreach (HtmlNode node in nodes)
        {
            HtmlNode clone = node.CloneNode(true);
            newParent.AppendChild(clone);
        }

        // remove all sub nodes
        foreach (HtmlNode node in nodes)
        {
            parent.RemoveChild(node);
        }
        return newParent;
    } 
```

# javascript - 如何计算节点的大小（以字节为单位）

> ID：15870315
> 
> 赞同：0
> 
> 时间：2013-04-08T02:26:10.533
> 
> 标签：javascript, html

我正在尝试从节点中找到节点的“位置”的参考，并且想知道如何才能做到这一点 - 我是否应该以某种方式获取 html 文本并计算文本的长度（或者这会让事情变得一团糟如果由于字符编码而在那里有一些中文等字符），或者我应该以某种方式计算节点的大小（以字节为单位）。我该怎么做呢？我希望遍历所有节点并计算每个节点的“大小”，但我在节点中看不到任何类似的属性。

对不起，我的业余解释，我刚刚开始使用 JS，你可能会说 :)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:29:30.567

如果您使用的是 jQuery，您可以使用

```
$("selector").innerHeight() 
```

和

```
$("selector").innerWidth() 
```

获取节点的当前宽度和高度。

# php - 如果列数据重复，mysql不计算行两次

> ID：15870319
> 
> 赞同：-2
> 
> 时间：2013-04-08T02:26:33.510
> 
> 标签：php, mysql

我正在计算名为 .mysql 的 mysql 表中的行数`ptb_profile_views`。

我的表如下所示：

```
id  |  profile_id   | viewed_profile_id  |  date_time  |

1          1                  6              
2          2                  6
3          2                  6
4          2                  6
5          3                  6 
```

目前我的查询计算了表中的所有行。但是，我只希望它计算不包含重复值的行`profile_id`。

因此，如果用户 2/profile_id 2 多次查看用户 6 的个人资料，在这种情况下他们会这样做，我只希望查询计算一次。我正在尝试使用 distinct 但它不起作用。有人可以告诉我哪里出错了吗？

```
function check_profile_views() {
    global $connection;
    global $_SESSION;
    $query = "SELECT DISTINCT COUNT(id) FROM ptb_profile_views WHERE viewed_profile_id=".$_SESSION['user_id']." AND profile_id='0'";
    $check_profile_views_set = mysql_query($query, $connection);
    confirm_query($check_profile_views_set);
    return $check_profile_views_set;        
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:59:01.963

尝试以下操作（假设viewed_profile_id 为6）：

```
SELECT COUNT(DISTINCT profile_id) FROM ptb_profile_views WHERE viewed_profile_id=6 
```

# r - 如何进行组间三路方差分析（类型 3 平方和）

> ID：15870328
> 
> 赞同：0
> 
> 时间：2013-04-08T02:27:37.117
> 
> 标签：r, anova

我想比较两组不平衡的受试者（G）：自变量是因子 A 和 B，因变量是 C。

我的教授告诉我使用类型 3 SS ANOVA，但我不确定以下是否正确。

```
Anova(lm(C ~ G * A * B + Error(Subject/(A*B)) + G, mydata, 
          contrasts=list(A=contr.sum, B=contr.sum)), type=3)) 
```

注意：`A`和`B`也在科目内，因为所有科目都完成了 A 和 B 的所有级别。`G`（组）在科目之间。`Subject`是主题ID。数据集为`mydata`。

# sql - oracle sql中的group by表达式内部连接

> ID：15870331
> 
> 赞同：16
> 
> 时间：2013-04-08T02:27:58.263
> 
> 标签：sql, oracle, group-by, inner-join

我是 sql 新手，不胜感激。

我有两张桌子，`employees`和`jobs`。`employees`包含一个变量`job_id`（多个员工可以有相同的 job_ID）。`jobs`包含变量`job_id`和`job_title`（一个job_ID对应一个job_title，如果你有兴趣，这是oracle中的hr模式）。

我希望查询返回：job_title、job_ID 和拥有相同 job_Id 的人数。

我尝试了以下代码：

```
select j.job_title, e.job_ID, count(e.job_ID)
from employees e, jobs j
where e.job_id=j.job_id
group by e.job_Id 
```

错误信息是：

> ORA-00979：不是 GROUP BY 表达式 00979\. 00000 - “不是 GROUP BY 表达式” *原因：
> *操作：
> 第 83 行错误：第 8 列

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-08T02:31:11.073

错误消息有点误导。当你`select`有一堆字段和一个聚合时，你必须对`group by`每个字段 you`select`并且只有字段 you `select`。所以你的查询必须是：

```
select j.job_title, e.job_ID, count(e.job_ID)
from employees e, jobs j
where e.job_id=j.job_id
group by e.job_Id, j.job_title 
```

# c# - 命名空间 System.Drawing 中不存在点

> ID：15870333
> 
> 赞同：7
> 
> 时间：2013-04-08T02:28:07.707
> 
> 标签：c#

我是 C# 的新手，并试图从教程中运行示例 C# 程序。

当我尝试运行以下代码时，出现以下错误：

> 错误 1 ​​命名空间“System.Drawing”中不存在类型或命名空间名称“Point”（您是否缺少程序集引用？） C:\Users\Documents\Visual Studio 2012\Projects\HelloWorld\HelloWorld\Class1.cs 20 28 你好世界

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Drawing;

namespace HelloWorld
{
    class Hello
    {
        static void Main()
        {
            Nullable<bool> b = false;
            if (b.HasValue) Console.WriteLine("b is {0}", b.Value);
            else Console.WriteLine("b is not set");

            System.Drawing.Point p = new System.Drawing.Point(20, 30);

            Console.WriteLine(b);
            Console.WriteLine("Hello World");
            Console.WriteLine("Press any key to exit");

            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-03T11:36:01.317

在您的解决方案资源管理器中右键单击 References 单击 Add Reference 单击 .NET 选项卡并滚动到`System.Drawing`. 它应该工作。

# java - 如何使用 SQL 设置“RecordSet”以连接到数据库

> ID：15870335
> 
> 赞同：0
> 
> 时间：2013-04-08T02:28:10.923
> 
> 标签：java, sql, database, recordset

我一直在使用教程来学习如何使用 Java 创建和连接到数据库。[链接到教程。](http://www.homeandlearn.co.uk/java/connecting_to_a_database_table.html)

在教程中它说我需要将“RecordSet”类型设置为 TYPE_SCROLL_SENSITIVE （或您要使用的任何类型。）

当我尝试调用 RecordSet 类时，我收到一条错误消息：

> 找不到标志。符号：变量 RecordSet。位置：类数据库

我尝试过修复导入（什么都不做），我也尝试过导入整个 SQL 包。我认为 RecordSet 类可能已更改，或者不在 SQL 中。

这是我的代码：

```
package database;

import java.sql.*;

public class DataBase {

    public static void main(String[] args) {

    try{
        String host = "jdbc:derby://localhost:1527/Employees";
        String SQL = "SELECT * FROM Workers";
        String uName = "nbur4556";
        String uPass = "95086733";

        Connection con = DriverManager.getConnection(host, uName, uPass);
        Statement stmt = con.createStatement(RecordSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);
        ResultSet rs = stmt.executeQuery(SQL);
    }catch(SQLException err){
        System.out.println(err.getMessage());
    }

}//End Method

}//End Class 
```

所以我的问题是，有谁知道如何设置“RecordSet”类以便我可以继续设置数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:35:29.717

我觉得这应该是ResultSet.TYPE_SCROLL_SENSITIVE，教程可能有问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T02:35:57.857

它是 ResultSet 而不是 RecordSet

改变

```
 Statement stmt = con.createStatement(RecordSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE); 
```

到

```
 Statement stmt = con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE); 
```

# android - 动态隐藏片段（Viewpager 和片段）

> ID：15870336
> 
> 赞同：1
> 
> 时间：2013-04-08T02:28:24.867
> 
> 标签：android, android-viewpager, fragment

我正在使用 viewpager 并滚动浏览片段。我想隐藏偏好更改的片段

```
package app.converto;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.OnSharedPreferenceChangeListener;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.FragmentTransaction;
import android.support.v4.view.ViewPager;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.Toast;
import app.converto.settings.SettingsActivity;
import app.converto.ui.LengthFragment;
import app.converto.ui.TemperatureFragment;

public class ConverTo extends FragmentActivity /*implements OnClickListener*/ implements OnSharedPreferenceChangeListener {

    SectionsPagerAdapter mSectionsPagerAdapter; //declaring pageradapter class 
    ViewPager mViewPager; // declaring viewpager class

    private TemperatureFragment fragment2;
    private LengthFragment fragment1;
    private static final int RESULT_SETTINGS = 1;

    @Override
    public void onCreate(Bundle savedInstanceState) { //methods to call on app launch 
        super.onCreate(savedInstanceState);

        mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());
        setContentView(R.layout.converto_home);  
        mViewPager = (ViewPager) findViewById(R.id.pager);  
        mViewPager.setAdapter(mSectionsPagerAdapter);

        PreferenceManager.setDefaultValues(this, R.xml.preferences, false);

        SharedPreferences sharedPref = PreferenceManager.getDefaultSharedPreferences(this);
        sharedPref.registerOnSharedPreferenceChangeListener(this);
        //boolean prefTemperature = sharedPref.getBoolean("prefTemperature", true);

    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {

        case R.id.menu_settings:
            Intent i = new Intent(this, SettingsActivity.class);
            startActivityForResult(i, RESULT_SETTINGS);
            break;

        }

        return true;
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        switch (requestCode) {
        case RESULT_SETTINGS:
            showUserSettings();
            break;

        }

    }

    private void showUserSettings() {
        SharedPreferences sharedPrefs = PreferenceManager
                .getDefaultSharedPreferences(this);

        StringBuilder builder = new StringBuilder();

        builder.append(
                sharedPrefs.getBoolean("pref_temperature", true));
        builder.append(
                sharedPrefs.getBoolean("pref_length", false));

        builder.append(
                sharedPrefs.getBoolean("pref_area", false));

    //  TextView settingsTextView = (TextView) findViewById(R.id.textUserSettings);

    //  settingsTextView.setText(builder.toString());
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.settings, menu);
        return true;
    }

    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int i) {
            switch(i){
            case 0:
                 fragment2 = new TemperatureFragment(ConverTo.this);  

                return fragment2;

            case 1:
                  fragment1 = new LengthFragment(ConverTo.this);  
                return fragment1;
            }
            return null;
        }

        @Override
        public int getCount() {
            return 2;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            switch (position) {
                case 0: return getString(R.string.heading_temperature);
                case 1: return getString(R.string.heading_length);
            }
            return null;
        }
    }

    public void onSharedPreferenceChanged(SharedPreferences arg0, String key) {
        if (key.equals("prefTemperature")) {
            Toast.makeText(this, "here!", Toast.LENGTH_LONG).show();  

            FragmentManager fM = getSupportFragmentManager();
            FragmentTransaction fT = fM.beginTransaction();
            fT.hide(fragment1);
            fT.commit();
        }
    }

    } 
```

这是我得到的错误 04-07 21:30:14.313: E/AndroidRuntime(15363): java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState

这是我的温度片段代码

```
package app.converto.ui;

import java.text.DecimalFormat;
import java.util.ArrayList;
import java.util.List;

import android.annotation.SuppressLint;
import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.Spinner;
import app.converto.R;
import app.converto.utils.Temperature;

@SuppressLint("ValidFragment")
public class TemperatureFragment extends Fragment implements OnClickListener, OnItemSelectedListener {

     EditText rInputTemp;
     public static String rSelectedUnit;
     Spinner spinner;
     List<String> rValues = new ArrayList<String>();
     Temperature rTemperature;
     Context rContext;
     ListView rResultsList;

     public TemperatureFragment(Context context) {
         rContext = context;

    }
     public TemperatureFragment(){

     }

     public Context getContext(){
         return rContext;
     }

    @Override  
    public void onCreate(Bundle savedInstanceState) {  
        super.onCreate(savedInstanceState);  
    } 
     @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

         View view = inflater.inflate(R.layout.view_temperature, container, false);  
         rInputTemp = (EditText) view.findViewById(R.id.inputTemp);

         rInputTemp.setText("1");

         rInputTemp.addTextChangedListener(new TextWatcher(){
                public void afterTextChanged(Editable s) {
                    if(s.toString().equals("")){

                    }
                    else{

                    rTemperature = new Temperature(spinner.getSelectedItemPosition(), Double.parseDouble(s.toString()));        
                    setDisplayText(rTemperature.getValues());
                    }
                }
                public void beforeTextChanged(CharSequence s, int start, int count, int after){}
                public void onTextChanged(CharSequence s, int start, int before, int count){}
            });

         rResultsList = (ListView) view.findViewById(R.id.results);
         spinner = (Spinner) view.findViewById(R.id.temp_units);

         spinner.setOnItemSelectedListener(this);
         ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(getActivity().getApplicationContext(), R.array.units_temperature,R.layout.spinner_layout);
         adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
         spinner.setAdapter(adapter);
         adapter.setDropDownViewResource(R.layout.spinner_layout);

        return view;
    }// end oncreate

    public void onClick(View v) {

    }
    public void onItemSelected(AdapterView<?> p, View arg1, int pos,
            long id) {
        rSelectedUnit = p.getItemAtPosition(pos).toString();

        rTemperature = new Temperature(spinner.getSelectedItemPosition(), Double.parseDouble(rInputTemp.getText().toString()));
        setDisplayText(rTemperature.getValues());

    }//spinneronItemSelected

    public void onNothingSelected(AdapterView<?> p) {

    }//spinner onNothingSelected

    double roundfourDecimals(double d) {
        DecimalFormat fourDForm = new DecimalFormat("#.####");
    return Double.valueOf(fourDForm.format(d));
    }

    private void setDisplayText(List<String> values){

        ArrayAdapter<String> adapter2 = new ArrayAdapter<String>(rContext, R.layout.result,R.id.result,values);
        rResultsList.setAdapter(adapter2);

    }

}//end fragment 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T03:02:38.570

将我的评论移至答案：

您必须更改`fT.commit()`为，`fT.commitAllowingStateLoss()`因为此代码可能`Activity`在后台运行时运行，在这种情况下，您不允许`commit()`.

# c - bash 一个班轮编译、执行和回显返回值？

> ID：15870338
> 
> 赞同：1
> 
> 时间：2013-04-08T02:28:25.967
> 
> 标签：c, linux, bash, unix, return-value

我不是 bash 高手，所以请原谅这个问题的简单性。

我想在 Linux shell 的一行中编译、执行和回显我的程序的返回值。就像是...

`~$ gcc -Wall -std=c99 program.c && ./a.out && echo $?`

这些都是单独工作的，这当然也有效：

```
~$ gcc -Wall -std=c99 program.c && ./a.out
...
~$ echo $?
5
~$ 
```

似乎问题在于知道何时/是否`./a.out`成功，因为`~$ ./a.out && echo $?`也不起作用！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T02:31:01.940

如果上一个命令成功，`&&`操作员只执行下一个命令。改为使用`;`。

```
gcc -Wall -std=c99 program.c && (./a.out ; echo $?) 
```

括号使它在失败时`echo $?`不会发生`gcc`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T02:31:12.887

```
$ gcc -Wall -std=c99 program.c && ./a.out ; echo $? 
```

应该这样做。分号只是分隔命令，所以回显总是会发生

# ios - ABMultiValueGetCount - kABPersonSocialProfileProperty 总是返回 0 吗？如何从通讯录中获取 Facebook 详细信息？

> ID：15870343
> 
> 赞同：1
> 
> 时间：2013-04-08T02:29:31.077
> 
> 标签：ios, objective-c, xcode, facebook

嗨，谁能告诉我为什么 ABMultiValueGetCount(social) 总是返回 0 count ？所有其他字段完美地从地址簿返回。

我正在尝试查看联系人是否有 Twitter 或 Facebook 活动？我的用户在 AB 中定义了 Twitter 和 Facebook。我可以在那里看到他们！

```
/* The table view controller ViewDidLoad opened the AddressBook and copied these details into addressBookArray then I closed the reference to the AddressBook */
ABRecordRef person = (__bridge ABRecordRef)[addressBookArray objectAtIndex:indexPath.section];

/*  Make sure AddressBook is currently open so we can look at things */
ABAddressBookRef addressBook;
addressBook = ABAddressBookCreateWithOptions(NULL, NULL);

if (addressBook != NULL)
{
    NSString *firstName = (__bridge_transfer NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty);
    NSString *lastName = (__bridge_transfer NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty);

    /* If I don't do this person always returns NULL for social */
    ABRecordRef who = ABRecordCopyValue(ABAddressBookGetPersonWithRecordID (addressBook, ABRecordGetRecordID(person));

    /* ABMultiValueRef social = ABRecordCopyValue(person, kABPersonSocialProfileProperty); - always returns NULL */
    ABMultiValueRef social = ABRecordCopyValue(who, kABPersonSocialProfileProperty); // always returns a value

    /* C is always 0 even if user has FB/Twitter etc why ? */
    CFIndex c = ABMultiValueGetCount(social);

    CFRelease (addressBook);
} 
```

我读过这个问题：

[ABRecordCopyValue 返回 0 ？](https://stackoverflow.com/questions/14605512/abrecordcopyvalue-return-0)

但是，如果我编辑 AB 联系人并实际添加 twitter，我仍然没有得到结果。还有另一种解决方法吗？显然，Apple 会这样做，正如联系人应用程序告诉您的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:44:56.720

好吧，取得了一些进展......

似乎这个属性确实有效 kABPersonInstantMessageProperty。

分享我到目前为止所做的事情，因为这似乎难倒了这么多用户。至少此代码可以用作查看您是否拥有 Skype、Yahoo、Facebook 等的基础......但我想获得 FBID，并且它保存在 kABPersonSocialProfileProperty 下。为什么 kABPersonSocialProfileProperty 不如 kABPersonInstantMessageProperty 工作？是iOS 6的问题吗....

****不，除非您手动转到 iOS 设备上的设置 - Facebook - 更新所有联系人，否则地址簿不知道 kABPersonSocialProfileProperty。为什么苹果与这两个属性不一致？此外，您必须选择作为主要联系人创建的链接联系人也没有这些详细信息！****

另外，为什么我必须分配“谁”而不能本地使用“人”？

还有其他人有更多想法吗？

```
/*  person is of type ABRecordRef loaded from an array thus:
    addressBookArray = (__bridge_transfer NSArray *)ABAddressBookCopyArrayOfAllPeople(addressBook);
    .....
    person = (__bridge ABRecordRef)[addressBookArray objectAtIndex:indexPath.section];
*/

ABAddressBookRef addressBook;
addressBook = ABAddressBookCreateWithOptions(NULL, NULL);

if (addressBook != Nil)
{
    int howManySocialApps;
    ABRecordRef who = ABAddressBookGetPersonWithRecordID (addressBook, ABRecordGetRecordID(person));

    NSArray *linkedPeople = (__bridge_transfer NSArray *)ABPersonCopyArrayOfAllLinkedPeople (who);

    for (int x = 0; x < [linkedPeople count]; x++)
    {
        ABMultiValueRef socialApps = ABRecordCopyValue((__bridge ABRecordRef)[linkedPeople objectAtIndex:x], kABPersonSocialProfileProperty);

        CFIndex thisSocialAppCount = ABMultiValueGetCount(socialApps);

        for (int i = 0; i < thisSocialAppCount; i++)
        {
            NSDictionary *socialItem = (__bridge_transfer NSDictionary*)ABMultiValueCopyValueAtIndex(socialApps, i);
            NSLog(@"Social Item of type %@", [socialItem objectForKey:(NSString *)kABPersonSocialProfileServiceKey]);
        }

        if (socialApps != Nil)
            CFRelease(socialApps);

        howManySocialApps += thisSocialAppCount;
    }

    NSLog (@"Number of SocialApps Found is %i", howManySocialApps);

    CFRelease(addressBook);
} 
```

# java - 如何以及何时在 AWS SES Java 开发工具包中使用“异步”

> ID：15870344
> 
> 赞同：2
> 
> 时间：2013-04-08T02:29:40.523
> 
> 标签：java, amazon-web-services, amazon-ses

我只是在使用 AWS Java SDK 中的 SES 包来发送电子邮件。我意识到这个类`[AmazonSimpleEmailServiceAsyncClient][1]`有很多带有`Async`标签的方法。

我只是好奇我们什么时候必须使用它，为什么以及如何使用它。我一直在环顾四周，但没有很好的资源。一些带有片段的概念性解释会很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T13:08:49.303

这些异步方法可用于[AWS SDK for Java](http://aws.amazon.com/sdkforjava/)中的大多数/所有服务，并且通常在开始时不使用，因为异步编程的复杂性略高，而仅在特定用例建议或要求时使用（因此，此答案解决了您的问题仅从概念的角度来看，不特定于[Amazon SES](http://aws.amazon.com/ses/)）。

您可以在 Jason Fulghum 最近的博客文章[Asynchronous Requests with the AWS SDK for Java](http://java.awsblog.com/post/TxLD9V4E1WQLCP/Asynchronous-Requests-with-the-AWS-SDK-for-Java)中找到一个很好的解释：

> 当您使用 SDK 中的标准同步客户端之一调用操作时，您的代码会在 SDK 发送您的请求、等待服务处理它并解析响应时被阻止。 **这是使用 SDK 的一种简单方法**，但在某些情况下，您只想启动请求并让代码继续执行。SDK 中的异步客户端允许您完全做到这一点。启动您的请求，稍后再回来查看它们是否已完成。*[强调我的]*

*Jason 还解释了在后台处理请求*的两个最常见用例：

1.  **用户界面响应性**——UI*应用程序非常适合异步客户端，因为您不想在 SDK 处理请求时锁定主 UI 线程，从而锁定整个 UI。网络问题可能会导致更长的处理时间，以及导致客户不满意的无响应 UI。*
2.  **批处理**-*异步客户端的另一个重要用途是当您想要启动大量请求时。如果请求不需要串行执行，那么您可以通过使用异步客户端启动许多请求，所有这些都来自单个线程，从而在应用程序中获得大量吞吐量。*

Jason 的帖子还链接到他关于该主题的更详细的早期文章，该文章*描述了使用适用于 Java 的 AWS 开发工具包发出请求的各种同步和异步方法，并在结尾提供了一些额外信息以帮助您成功使用异步功能*，请参阅[异步使用适用于 Java 的 AWS 开发工具包进行编程](http://aws.amazon.com/articles/5496117154196801)（其他大部分相同的代码示例还包括异常处理）。

# php - 无法连接以使用 php 类获取数据

> ID：15870349
> 
> 赞同：-1
> 
> 时间：2013-04-08T02:30:09.057
> 
> 标签：php

我在 Windows XP 上使用 XAMPP，当我尝试从表中获取数据时，我得到低于警告但不是数据。

> 警告：mysql_query() [function.mysql-query]：第 10 行 D:\xampp\htdocs\Chil\class.StudentDet.php 中的用户 'ODBC'@'localhost' 的访问被拒绝（使用密码：NO）
> 
> 警告：mysql_query() [function.mysql-query]：无法在第 10 行的 D:\xampp\htdocs\Chil\class.StudentDet.php 中建立到服务器的链接

请在下面找到代码。

代码：

```
class.DBConnection.php

   <?php

      class DBConnection //create a class for make connection
      {
         var $host='localhost';
         var $username='root';    // specify the sever details for mysql
         Var $password='';
         var $databaseName='test';
         var $connectionString;

function connectToDatabase() // create a function for connect database
{
$this -> connectionString = mysql_connect($this->host,$this->username,$this->password);             
    if(!$connectionString)// testing the connection
    {
        die ("Cannot connect to the database");
    }       
    mysql_select_db($this -> databaseName,$this -> connectionString);
    if(mysql_error()) // if error occured display the error message
    {
        echo "Cannot find the database ".$this->database;
    }
    return $this -> connectionString;
}
 function closeConnection() // close the connection
{
    mysql_close($this->connectionString);

    echo "Connection closed";
 }
 }
?> 
```

class.StudentDet.php

```
 <?php
    require_once('class.DBConnection.php');
    class StudentDet{   

    function getStudDet(){  
    $connection = new DBConnection();
    $connection->connectToDatabase();
    $ct="SELECT * FROM students where course='Testing'";        
    $result = mysql_query($ct); 
    return $result;  
 }
  }
 ?> 
```

在 PHP 页面中

学生信息.php

```
 <?php

      include ('class.StudentDet.php');
      $stud = new StudentDet;
      $fetch = $stud->getStudDet();
      print '$fetch';
    ?> 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:44:17.423

在哪里调用这个函数？

```
function connectToDatabase() // create a function for connect database
{
$this -> connectionString = mysql_connect($this->host,$this->username,$this->password);             
    if(!$connectionString)// testing the connection
    {
        die ("Cannot connect to the database");
    }       
    mysql_select_db($this -> databaseName,$this -> connectionString);
    if(mysql_error()) // if error occured display the error message
    {
        echo "Cannot find the database ".$this->database;
    }
    return $this -> connectionString;
} 
```

# java - 将子项目中的 @Configuration 引导到 app-context.xml

> ID：15870350
> 
> 赞同：1
> 
> 时间：2013-04-08T02:30:16.103
> 
> 标签：java, spring

我对春天很陌生；）

我有一个共享模块，我称之为“核心”和几个依赖于核心的项目。子项目有`spring/app-context.xml`文件，在它们执行的环境中，spring 由另一个框架初始化。

在“核心”项目中，我想使用 @Configuration 方法来定义一些单例服务：

```
@Configuration
public class AppConfig
{
    @Bean
    public MyService myService()
    {
        return new MyServiceImpl();
    }
} 
```

然后将核心打包在一个 jar 中，并包含在子项目的类路径中。

如何引导核心模块的服务，以便它们可用于子项目中的@Autowire？

**编辑：**

我遇到的错误是：

> org.springframework.beans.factory.NoSuchBeanDefinitionException：没有为依赖项找到类型为 [package.MyService] 的匹配 bean：预计至少有 1 个 bean 有资格作为此依赖项的自动装配候选者。依赖注解：{@org.springframework.beans.factory.annotation.Autowired(required=true)}

我已经尝试了以下每一项（独家）：

```
<context:component-scan base-package="package" />
<import resource="classpath*:spring/core-context.xml" /><!-- defined in core.jar with MyService as a bean -->
<bean class="package.AppConfig" /> 
```

但仅将其添加到子项目的 app-context.xml 似乎可以解决错误：

```
<bean id="MyService" class="package.MyServiceImpl" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:45:19.040

如果您看一下[JavaDoc](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/annotation/Configuration.html)，它说明了一切：

> ***通过 Spring XML***
> 
> 作为直接针对 AnnotationConfigApplicationContext 注册 @Configuration 类的替代方法，@Configuration 类可以在 Spring XML 文件中声明为普通定义：

```
<beans>
    <context:annotation-config/>
    <bean class="com.acme.AppConfig"/>
</beans> 
```

听起来就像简单地将`@Configuration`类作为 bean 包含到您的 xml 配置中一样。

除此之外，您还应该能够通过 来学习课程`component-scan`，就像`@Configuration`的元注释一样`@Component`。

# c - 我是 C 的新手，这个分段错误的东西正在杀死我

> ID：15870354
> 
> 赞同：2
> 
> 时间：2013-04-08T02:30:31.580
> 
> 标签：c, pointers, memory, segmentation-fault, malloc

我是c新手，我正在努力上网，吸收资源来帮助学习。

我从一个简单的命令提示符类型交易开始，即使这也给我带来了困难！我正在尽力学习指针，但这个想法对我来说很难掌握，所以这里是给我带来麻烦的代码。我希望这个麻烦代码的答案能帮助我了解指针的语法。

```
#include <stdio.h>
#include <stdlib.h>
#include "login.h"
#include "help.h"
#include <malloc.h>

main()
{
if(login())                /* Login runs fine. After the imported */ 
{                          /*login code runs, it takes me to the main screen */
    int prac;          /* (printf("Type help for a list of commands")) i input*/
    char inpt[255];    /* help, the imported help screen runs,then the core 
    int *ptr;          /*dumps. oh and i know the malloc() syntax is wront*/
    malloc(255) == ptr;   /*that's just the last thing i tried before i posted*/

    *ptr == printf("Continuing Program...\n\n");
    printf("---Type Help For a List of Commands----\n");
    gets(inpt);
    if (strcmp(inpt, help) == 1)
    {
        help();
        goto *ptr;
    }
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T02:35:24.157

您可能需要复习基本 C。

这是一个比较，而不是一个任务。该语句泄漏内存但没有其他影响。

```
malloc(255) == ptr; 
```

这将取消引用一个未初始化的变量，并将其与`printf()`. 大多数人只是忽略`printf()`. 但是，由于`ptr`未初始化，这*充其量*只会使您的程序因分段错误而崩溃，并且可能会做一些更糟的事情。

```
*ptr == printf("Continuing Program...\n\n"); 
```

这会将字符串与函数进行比较。这可能不会在大多数系统上崩溃，但无论哪种方式都是错误的。

```
strcmp(inpt, help) 
```

这是废话，不应该编译。你只能`goto`一个标签，而`*ptr`不是一个标签。

```
goto *ptr; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T02:36:17.643

刚刚修改为做我认为你想要的，我假设你想获得帮助，然后循环并从用户那里获得另一个命令。

```
int prac;          
char inpt[255];    
bool quit = false;
while(!quit)
{
printf("Continuing Program...\n\n");
printf("---Type Help For a List of Commands----\n");
gets(inpt);
if (strcmp(inpt, "help") == 0)
{
    help();     
}
if (strcmp(inpt, "quit") == 0)
{
    quit = true;
}

} 
```

指针不与 goto 一起使用，虽然在概念上与标签相似，但实际上它们在语言的工作方式方面完全不同。

# javascript - 使网页看起来完全加载，或 jQuery 到 MooTools 翻译

> ID：15870359
> 
> 赞同：0
> 
> 时间：2013-04-08T02:30:42.773
> 
> 标签：javascript, jquery, html, dom, mootools

我希望网页仅在加载完所有元素后才出现在浏览器中。

我通常的解决方案是延迟显示页面，直到所有元素完成加载。我在 CSS 中使用它：

```
body {
opacity: 0;
} 
```

– 并将这个 jQuery 片段放在`<head>`页面的

```
<script type="text/javascript">
$(window).load(function() {
        $('body').animate({opacity: 1}, 300);
}); 
</script> 
```

– 平滑地淡入整个页面。

但是，我正在处理的页面有链接到它的 MooTools 库。我也不想通过将 jQuery 链接到它来使页面变得更重，但是我不熟悉 MooTools，并且可以使用一些帮助。

**问题：**我在上面键入的 jQuery 片段的确切 MooTools 翻译是什么？

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T02:39:31.740

我相信你正在寻找这个：

```
window.addEvent('load', function() {
  $$('body').set('morph', {duration: 300}).morph({'opacity': '1'});
}); 
```

来源[**这里**](http://demos111.mootools.net/DomReadyVS.Load)

[**在此处**](http://mootools.net/docs/core/Fx/Fx.Morph)的 mootools 源中变形而不是动画[](http://mootools.net/docs/core/Fx/Fx.Morph)

 **### 更多信息

所以`$('block')`就像说`getElementById('block')`得到`<div id="block"></div>`

`$$('body')`就像`getElementsByTagName(body)`得到`<body></body>`

`$$('.block')`也会得到`<div class="block"></div>`

[**这里**](http://solutoire.com/2007/09/20/understanding-mootools-selectors-e-and-es/)的好来源[](http://solutoire.com/2007/09/20/understanding-mootools-selectors-e-and-es/)

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T02:40:26.270

```
window.addEvent('domready', function () {
    $("gallery").set('morph', {duration: 3000})
    .morph({opacity: 1});
}); 
```

[http://jsfiddle.net/ExplosionPIlls/9tqxr/](http://jsfiddle.net/ExplosionPIlls/9tqxr/)

`'load'`可能也会起作用，但从我所见`domready`似乎是首选。****

# android - 如何拆分字符串并为android中的每个按钮单击操作设置数据？

> ID：15870361
> 
> 赞同：0
> 
> 时间：2013-04-08T02:30:47.630
> 
> 标签：android

我正在研究安卓。我有一个包含“|”的字符串 和“@”符号。

```
str = |13651@This is testing1@4769@This is testing2@0@0@4769@1@0@|13652@This is again testing1@4766@This is again testing2@1@1@3245@0@2@|.................

First, I need to split the string upto '|' operator. So i will get data like 

str[0] = 13651@This is testing1@4769@This is testing2@0@0@4769@1@0@

str[1] = 13652@This is again testing1@4766@This is again testing2@1@1@3245@0@2@ 
```

我第一次需要设置 str[0] 数据。然后，当单击下一个按钮时，必须设置 str[1] 数据。如果再次单击下一个按钮，则必须设置 str[3]，依此类推。

我怎样才能做到这一点？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T02:47:32.980

如果您要询问如何拆分字符串，只需使用 split() 方法。这是一个[教程](http://javarevisited.blogspot.com/2011/09/string-split-example-in-java-tutorial.html)。

如果我正确理解了您问题的后半部分，您只需将 OnClickListener 添加到您的按钮，并将您的文本更改为下一部分。请参阅[Button](http://developer.android.com/reference/android/widget/Button.html)的文档。

```
private String[] parts;
private int index = 0;

public void onCreate(...) {
    parts = originalString.split("\\|"); //Escape the | with the \\
    showingText = parts[0];
    button.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v) {
             if (index < parts.length - 1) {
                 index++;
                 showingText = parts[index];
             }
         }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:49:14.347

以下是如何拆分。例如，你想用“|”分割，类似于“@”

```
 String str = "Hello|World";
    String[]token = str.split("\\|");
    // Result : token[0] = ""Hello", token[1] = "World" 
```

# vim - 为什么选项卡完成（wildmenu）不起作用？

> ID：15870365
> 
> 赞同：-3
> 
> 时间：2013-04-08T02:31:08.437
> 
> 标签：vim

我的`.vimrc`包含：

```
set wildmenu                    " show list instead of just completing
set wildmode=list:longest,full  " command <Tab> completion, list matches, then longest common part, then all.
set wildignore+=.cache,.gem,.ivy2,.extras.bash,.themes
set wildignore+=.subversion,.subversion_IDEA
set wildignore+=.Trash
set wildignore+=Desktop,Documents,Downloads
set wildignore+=Library,Movies,Pictures
set wildignore+=spf13vim2
set wildignore+=.CFUserTextEncoding,.DS_Store
set wildignore+=.bash_history,.extra.bash,.irb-history
set wildignore+=.lesshst,.mysql_history,.pry_history
set wildignore+=.reviewboard-cache,.rnd,.sbt.cache.lock
set wildignore+=.scala_history,.sqlite_history,.viminfo
set wildignore+=*.o,*.obj,.git,vendor/rails/**,vendor/gems/**
set wildignore+=*.swp 
```

[你可以在这里](https://github.com/roseperrone/dotfiles/blob/master/vimrc)找到我的完整 vimrc 。当我在 vim 中编辑文件时，点击`tab`会产生空格，但不会自动完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T05:05:56.733

什么？

wildmenu 是在命令行上尝试制表符补全时出现的菜单：

![在此处输入图像描述](https://i.stack.imgur.com/4AqFw.png)

它与插入模式完成*完全*无关，您问题中的设置*永远不会*帮助您在编辑文件时完成任何事情。

事实胜于推测：你应该养成阅读 Vim 内部文档的习惯。如果您花时间阅读它的第一句话`:h 'wildmenu'`就会消除您的困惑：

```
When 'wildmenu' is on, command-line completion operates in an enhanced mode. 
```

盲目地从随机的互联网来源复制设置会让你一事无成。阅读`:help`.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-08T02:58:04.513

我不知道这是否有必要，但是在我将它添加到我的之后，制表符完成工作`.vimrc`：

```
function! Smart_TabComplete()
  let line = getline('.')                         " current line

  let substr = strpart(line, -1, col('.')+1)      " from the start of the current
                                                  " line to one character right
                                                  " of the cursor
  let substr = matchstr(substr, "[^ \t]*$")       " word till cursor
  if (strlen(substr)==0)                          " nothing to match on empty string
    return "\<tab>"
  endif
  let has_period = match(substr, '\.') != -1      " position of period, if any
  let has_slash = match(substr, '\/') != -1       " position of slash, if any
  if (!has_period && !has_slash)
    return "\<C-X>\<C-P>"                         " existing text matching
  elseif ( has_slash )
    return "\<C-X>\<C-F>"                         " file matching
  else
    return "\<C-X>\<C-O>"                         " plugin matching
  endif
endfunction

inoremap <tab> <c-r>=Smart_TabComplete()<CR> 
```

# jquery - Flot 在 xaxis 中显示错误数据

> ID：15870372
> 
> 赞同：0
> 
> 时间：2013-04-08T02:31:54.337
> 
> 标签：jquery, jquery-plugins, flot

我使用 flot 在我的网站上显示图表。

我使用此代码，但我得到一个错误的 xaxis。表明：

4月4日 12:00 4月5日 0:00 4月5日 12:00 4月6日 0:00 4月6日 12:00 4月7日 0:00 4月7日 12:00 4月8日 0:00

但我只想拥有（4.4.2013 5.4.2013 6.4.2013 7.4 8.4.2013）。我想要它没有重复，没有时间。

你能帮我吗。我在谷歌上搜索了几个小时，但没有找到合适的解决方案。

```
<script>
$(function () {

    var     d1 = [],
            d2 = [];        

    var dt1 = [[1365041353000,3], [1365127753000,5], [1365214153000,9], [1365300553000,15], [1365386953000,2]], 
        dt2 = [[1365041353000,1], [1365127753000,2], [1365214153000,3], [1365300553000,5], [1365386953000,7]];

    for( var i = 0; i < d2.length; i++ ) {
        dt1.push([st + i * 3600000, parseFloat( (d1[i]).toFixed( 3 ) )]);
        dt2.push([st + i * 3600000, parseFloat( (d2[i]).toFixed( 3 ) )]);
    }

    var data = [{ 
        data: dt1,
        label: 'Test'       
     }, { 
        data: dt2, 
        label: 'Test1', 
        points: { show: false }, 
        lines: { lineWidth: 2, fill: false },   
     }];

    Charts.line ( '#line-chart', data, {yaxis: {
        },
  xaxis: {
    mode: "time",
    timeformat: "%d.%m.%y"
  }
});

});
</script> 
```

我试过这个：

```
 xaxis: {
    mode: 'time',
    timeformat: '%d.%m.%y',
    tickFormatter: function (val, axis) {
        var d = new Date(val);
        d.getUTCDate() + "." + d.getUTCMonth() + "." + d.getUTCFullYear();
        }

  } 
```

但是我得到相同的结果 Apr 4 12:00Apr 5 0:00Apr 5 12:00Apr 6 0:00Apr 6 12:00Apr 7 0:00Apr 7 12:00Apr 8 0:00

* * *

我试过这个：

```
 xaxis: {
    mode: 'time',
    timeformat: '%d.%m.%y',
    tickFormatter: function (val, axis) {
        var d = new Date(val);
        d.getUTCDate() + "." + d.getUTCMonth() + "." + d.getUTCFullYear();
        }

  } 
```

但是我得到相同的结果 Apr 4 12:00Apr 5 0:00Apr 5 12:00Apr 6 0:00Apr 6 12:00Apr 7 0:00Apr 7 12:00Apr 8 0:00

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:09:11.660

您可以通过这种方式在 xaxis 上使用 tickFormatter：

```
tickFormatter: function (val, axis) {
   var d = new Date(val);
   return d.getUTCDate() + "." + d.getUTCMonth() + "." + d.getUTCFullYear();
} 
```

对于重复项，这取决于您希望如何处理它的应用程序逻辑。您可以创建一个您已经处理过的值的映射，如果您再次遇到它，则返回 null 或空白值。

# python - 如何在 Django 模型管理器中保留变量？

> ID：15870373
> 
> 赞同：0
> 
> 时间：2013-04-08T02:31:55.923
> 
> 标签：python, django, django-models

在 django 模型管理器中，如果多个方法具有相同的参数，是否每次调用该方法时都必须传递它们？

```
class MyManager(model.Manager):
    def show(self,request,A,B)
        pass

    def hide(self,request,A,B,C)
        pass 
```

你可以看到`request` `A` `B`相同的参数，我可以有这样的东西：

```
 class MyManager(model.Manager):
    def __init__(self,request,A,B):
        self.request = request
        self.A= A
        self.B= B

    def show(self)
        pass

    def hide(self,C)
        pass 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:54:29.087

`__init__()`在服务器启动时构建关联的模型类时调用。你知道服务器启动时这些变量是什么吗？它们会在服务器运行时的整个生命周期中保持不变吗？

如果这两个问题的答案是肯定的，那么请继续使用此解决方案。

否则，您每次都需要通过它们。

# php - Wordpress 中的 Facebook PHP SDK 错误

> ID：15870375
> 
> 赞同：0
> 
> 时间：2013-04-08T02:32:17.180
> 
> 标签：php, facebook, sdk

大家好 :) 我希望我的 wordpress 博客在我的访问者时间轴上自动共享，所以我将此代码添加到 header.php 的顶部。问题在于`'link' => '<?php the_permalink(); ?>`which 变成了错误。每当我将 url 放在纯 txt 中时，它都会起作用，即[http://seoshqip.com](http://seoshqip.com)，但我希望将访问者正在浏览的永久链接张贴在他的墙上。演示站点是[http://seoshqip.com](http://seoshqip.com)。谁能帮帮我？

```
 <?php

  require_once('php-sdk/facebook.php');

  $config = array(
    'appId' => '137338253107187',
    'secret' => '13d3be5549ff2f2e1c793b5270a3a487',
  );

  $facebook = new Facebook($config);
  $user_id = $facebook->getUser();
  $access_token = $facebook->getAccessToken();

      if($user_id) {

      try {
        $ret_obj = $facebook->api('/me/feed', 'POST',
                                    array(
                                      'link' => '<?php the_permalink(); ?>' ,
                                      'message' => 'Posting with the PHP SDK!'
                                 ));

      } catch(FacebookApiException $e) {
        $login_url = $facebook->getLoginUrl( array(
                       'scope' => 'publish_stream'
                       )); 
        header("Location: $login_url");
        error_log($e->getType());
        error_log($e->getMessage());
      }   
    } else {
      $login_url = $facebook->getLoginUrl( array( 'scope' => 'publish_stream' ) );
      header("Location: $login_url");

    }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:03:55.247

试试`<?php echo post_permalink(); ?>`吧。如果这仍然不起作用，请参阅：[http ://codex.wordpress.org/Function_Reference/the_permalink](http://codex.wordpress.org/Function_Reference/the_permalink)

`<?php the_permalink(); ?>`必须在循环内，并且通常用于在显示帖子时显示每个帖子的永久链接。由于此模板标签仅限于显示正在处理的帖子的永久链接，因此您不能使用它来显示指向您博客上任意帖子的永久链接。`get_permalink()`如果您想获取帖子的永久链接，请参考它，因为它具有唯一的帖子 ID。

# python - Python：跨所有模块的自定义日志记录

> ID：15870380
> 
> 赞同：24
> 
> 时间：2013-04-08T02:32:52.623
> 
> 标签：python, logging, centralized

**任务**

我有一组脚本，我希望它们生成统一的日志消息，而对记录实际消息的模块的改动最少。

我编写了一个小模块“custom_logger”，我打算从主应用程序调用一次，让它返回一个记录器，然后我会继续使用它。

我要导入应用程序的子模块应该只（或者更确切地说我希望它们）

*   应该只“将日志导入为日志” - 这样，如果其他人发现它们有用，我的网站不需要任何特定的东西来让它们运行。
*   应该只使用 log.info/error('message') 记录消息，而不添加任何特定于它们的站点
*   应使用已配置的“根”记录器及其所有格式和处理程序，并且不影响根记录器的配置

*custom_logger.py*

```
import logging
import logging.handlers
import os
import sys

def getLogger(name='root', loglevel='INFO'):
  logger = logging.getLogger(name)

  # if logger 'name' already exists, return it to avoid logging duplicate
  # messages by attaching multiple handlers of the same type
  if logger.handlers:
    return logger
  # if logger 'name' does not already exist, create it and attach handlers
  else:
    # set logLevel to loglevel or to INFO if requested level is incorrect
    loglevel = getattr(logging, loglevel.upper(), logging.INFO)
    logger.setLevel(loglevel)
    fmt = '%(asctime)s %(filename)-18s %(levelname)-8s: %(message)s'
    fmt_date = '%Y-%m-%dT%T%Z'
    formatter = logging.Formatter(fmt, fmt_date)
    handler = logging.StreamHandler()
    handler.setFormatter(formatter)
    logger.addHandler(handler)

    if logger.name == 'root':
      logger.warning('Running: %s %s',
                     os.path.basename(sys.argv[0]),
                     ' '.join(sys.argv[1:]))
    return logger 
```

然后是子模块，它有一些测试消息，其中包含哪些有效和哪些无效的示例。

*子模块.py*

```
import sys
import custom_logger
import logging

class SubClass(object):

  def __init__(self):
    # NOK (no idea why since by default (no name parameter), it should return the root logger)
    #log = logging.getLogger()
    #log.info('message from SubClass / __init__')

    # OK (works as expected)
    #log = logging.getLogger('root')
    #log.info('message from SubClass / __init__')

    # OK (works as expected)
    log = custom_logger.getLogger('root')
    log.info('message from SubClass / __init__')

  def SomeMethod(self):
    # OK but I'd have to define `log` for every method, which is unacceptable
    # Please see question below all code snippets
    log = custom_logger.getLogger('root')
    log.info('message from SubClass / SomeMethod') 
```

和主应用程序：*app.py*这里没什么特别的：

```
#!/usr/bin/python

import custom_logger
import submodule

log = custom_logger.getLogger('root', loglevel='DEBUG')

log.debug('debug message')
log.info('info message')
log.warning('warning message')
log.error('error message')

a = submodule.SubClass() # this should produce a log message
a.SomeMethod()           # so should this 
```

我追求和得到的输出，只是以一种极其丑陋的方式：

```
% ./app.py 
2013-04-08T03:07:46BST custom_logger.py   WARNING : Running: app.py 
2013-04-08T03:07:46BST app.py             DEBUG   : debug message
2013-04-08T03:07:46BST app.py             INFO    : info message
2013-04-08T03:07:46BST app.py             WARNING : warning message
2013-04-08T03:07:46BST app.py             ERROR   : error message
2013-04-08T03:07:46BST submodule.py       INFO    : message from SubClass / __init__
2013-04-08T03:07:46BST submodule.py       INFO    : message from SubClass / SomeMethod 
```

我希望能够在 app.py 中定义一个记录器，然后在子模块中仅使用标准 Python 日志库来利用 app.py 中已配置的记录器。

另外，一个丑陋的解决方法：如果我在 submodule.py 中的导入之后放置以下代码：

```
log = custom_logger.getLogger('root') 
```

它将在我的记录器在 app.py 中配置之前执行，有效地制作子模块，而不是我的应用程序配置日志记录。

我考虑的另一种解决方法：在 SubClass 类的构造函数中，我可以定义

`self.log = custom_logger.getLogger('root')`

然后使用 self.log.error('some error')。必须有更好的方法 - 如果您能提出一些有用的建议或指出我误解了文档的地方，我将非常感激！

PS。我花了很多时间阅读 Python 日志记录方法（基本和高级）和食谱，所以如果我错过了那里有用的东西，请指出。

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-08T12:11:25.077

如果你想改变根记录器，你可以在`getLogger()`任何地方使用，没有参数。

关于仅在主模块中设置的实例，您可以实例化您的记录器，添加您自己的处理程序，并在所有其他子模块中使用它（就像我在下面所做的那样）。

我创建了一个继承 StreamHandler 的类`custom_logger.py`：

```
class MyHandler(logging.StreamHandler):

    def __init__(self):
        logging.StreamHandler.__init__(self)
        fmt = '%(asctime)s %(filename)-18s %(levelname)-8s: %(message)s'
        fmt_date = '%Y-%m-%dT%T%Z'
        formatter = logging.Formatter(fmt, fmt_date)
        self.setFormatter(formatter) 
```

然后，在 中`submodule.py`，我将 getLogger 放在导入之后，并在方法中对其进行了注释：

```
import sys
import logging

log = logging.getLogger('root')

class SubClass(object):

    def __init__(self):
         log.info('message from SubClass / __init__')

    def SomeMethod(self):
        log.info('message from SubClass / SomeMethod') 
```

然后，在 app.py 我创建了一个 Logger 实例（在所有模块中都是相同的）并添加了我的处理程序，它格式化输出：

```
#!/usr/bin/python

import logging
import custom_logger
import submodule

log = logging.getLogger('root')
log.setLevel('DEBUG')
log.addHandler(custom_logger.MyHandler())

log.debug('debug message') 
log.info('info message')
log.warning('warning message')
log.error('error message')

a = submodule.SubClass() # this should produce a log message
a.SomeMethod()           # so should this 
```

输出：

```
./app.py 
2013-04-08T15:20:05EEST app.py             DEBUG   : debug message
2013-04-08T15:20:05EEST app.py             INFO    : info message
2013-04-08T15:20:05EEST app.py             WARNING : warning message
2013-04-08T15:20:05EEST app.py             ERROR   : error message
2013-04-08T15:20:05EEST submodule.py       INFO    : message from SubClass / __init__
2013-04-08T15:20:05EEST submodule.py       INFO    : message from SubClass / SomeMethod 
```

# python - 我想调用 HDFS REST api 来上传文件

> ID：15870381
> 
> 赞同：1
> 
> 时间：2013-04-08T02:32:54.447
> 
> 标签：python, hadoop, hdfs, httplib

我想调用 HDFS REST api 来使用`httplib`.

我的程序创建了该文件，但其中没有内容。

==================================================== ===

这是我的代码：

```
import httplib

conn=httplib.HTTPConnection("localhost:50070")
conn.request("PUT","/webhdfs/v1/levi/4?op=CREATE")
res=conn.getresponse()
print res.status,res.reason
conn.close()

conn=httplib.HTTPConnection("localhost:50075")
conn.connect()
conn.putrequest("PUT","/webhdfs/v1/levi/4?op=CREATE&user.name=levi")
conn.endheaders()
a_file=open("/home/levi/4","rb")
a_file.seek(0)
data=a_file.read()
conn.send(data)
res=conn.getresponse()
print res.status,res.reason
conn.close() 
```

====================================================

这是回报：

> 307 TEMPORARY_REDIRECT 201 已创建

==================================================== =======

好的，文件已创建，但未发送任何内容。

当我评论时`#conn.send(data)`，结果是一样的，仍然没有内容。

也许文件读取或发送错误，不确定。

你知道这是怎么发生的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T00:45:46.450

看起来您的代码在第二个 PUT 请求中没有使用 307 中的“位置”标头。

我一直在研究可能有用的 python WebHDFS 包装器的分支，您可以在此处查看完整代码：[https ://github.com/carlosmarin/webhdfs-py/blob/master/webhdfs/webhdfs.py](https://github.com/carlosmarin/webhdfs-py/blob/master/webhdfs/webhdfs.py)

您感兴趣的方法是：

```
def copyfromlocal(self, source_path, target_path, replication=1, overwrite=True):
    url_path = WEBHDFS_CONTEXT_ROOT + target_path + '?op=CREATE&overwrite=' + 'true' if overwrite else 'false'

    with _NameNodeHTTPClient('PUT', url_path, self.namenode_host, self.namenode_port, self.username) as response:
        logger.debug("HTTP Response: %d, %s" % (response.status, response.reason))
        redirect_location = response.msg["location"]
        logger.debug("HTTP Location: %s" % redirect_location)
        (redirect_host, redirect_port, redirect_path, query) = self.parse_url(redirect_location)

        # Bug in WebHDFS 0.20.205 => requires param otherwise a NullPointerException is thrown
        redirect_path = redirect_path + "?" + query + "&replication=" + str(replication)

        logger.debug("Redirect: host: %s, port: %s, path: %s " % (redirect_host, redirect_port, redirect_path))
        fileUploadClient = HTTPConnection(redirect_host, redirect_port, timeout=600)

        # This requires currently Python 2.6 or higher
        fileUploadClient.request('PUT', redirect_path, open(source_path, "r").read(), headers={})
        response = fileUploadClient.getresponse()
        logger.debug("HTTP Response: %d, %s" % (response.status, response.reason))
        fileUploadClient.close()

        return json.loads(response.read()) 
```

# filepicker.io - filepicker.io 安全性

> ID：15870385
> 
> 赞同：1
> 
> 时间：2013-04-08T02:33:43.177
> 
> 标签：filepicker.io, filepicker

来自 jsfiddle，[http://jsfiddle.net/filepicker/BYF9t/](http://jsfiddle.net/filepicker/BYF9t/)

使用 api 密钥初始化文件选择器，并使用策略保护读/写操作。

```
filepicker.setKey('8PbzrhP9Tr2r6wPlSqzS');
filepicker.read(fpfile, {policy: policy, signature:signature}, function(contents)
    console.log(contents);  
})

filepicker.pick({policy: policy, signature:signature}, function(fpfile){
   console.log(fpfile);
}); 
```

但是我仍然不确定它是如何安全的，从某种意义上说，为什么没有人能够只使用 api 密钥并按如下方式使用它？

```
filepicker.pick(function(FPFile){
  console.log(FPFile.url);
}); 
```

此外，为什么没有人能够使用这些政策并从我的帐户上传/下载文件？

请帮助我理解这一点！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T06:03:05.150

为您的帐户启用安全性后，对 Filepicker.io API 的任何请求（无论是选择、读取等）都会被拒绝，除非它具有适当的策略和机密。

为防止人们复制您的策略并恶意使用它们，您应该设置一个适当短的到期时间以使其变得困难，并在您的端使用某种程度的指数退避或类似措施，以确保一个人不会不断地从您的策略中生成新策略。服务器。

# ios - iOS按钮固定在顶部

> ID：15870388
> 
> 赞同：0
> 
> 时间：2013-04-08T02:34:04.687
> 
> 标签：ios

我想做一些类似于 Facebook 新闻源的东西。如果你点击下面的图片：

![在此处输入图像描述](https://i.stack.imgur.com/B5kjN.jpg)

顶部状态、照片和签到附近有三个按钮。当我向下滚动提要时，三个按钮也会向上滚动并且不可见。但是当我向上滚动时，它们的按钮会重新出现。有没有如何做到这一点的例子？这个我找了好久，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:57:18.003

您可以将这些按钮添加到导航栏，以便将位置固定在顶部，并且背景通过本教程 [https://github.com/scelis/ExampleNavBarBackground](https://github.com/scelis/ExampleNavBarBackground)

# mongodb - 如何将数据附加到mongodb中现有键的值

> ID：15870390
> 
> 赞同：3
> 
> 时间：2013-04-08T02:34:17.107
> 
> 标签：mongodb, node-mongodb-native

例如我的数据是{'abc':'def'}，它有一个键值；

我要这个：

```
do something...//data has been changed to {'abc':'defghi'} or {'abc':'['def','ghi']'} 
```

我在nodejs中使用了这段代码：

```
 var tmp2 = {'userid:location:2013-01-02 15':['092030', '12122.11260E']};

            collection.insert(tmp2, {safe:true}, function (err, result) {
                var i = 0;
                var a = +new Date();
                while(i<300000){
                    tmp2['userid:location:2013-01-02 15'].push(i);
        collection.save(tmp2, function () { })      
                    i+=1;
                }
                var b = +new Date();
                console.log(b-a)
            }); 
```

保存 api 可以替换相同键的值，所以使用推送，我可以将数据**附加**到现有键的值；

但是有一些问题：

1.  推送操作性能很差。单次保存可以运行15000/s，但是使用推送时是1500/s。
2.  如果我有两个客户端，都想追加数据，后面的将覆盖前面的数据，而不是追加。这个问题怎么解决？有API吗？</li>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T03:13:47.787

问题是您正在使用`save`which 覆盖文档：最后一个获胜。您应该考虑使用[原子更新`$push`](http://docs.mongodb.org/manual/reference/operator/push/#op._S_push)，也许是通过[`findAndModify`](http://docs.mongodb.org/manual/reference/command/findAndModify/).

# uitableview - 如何在表格视图上访问本机应用程序并能够使用多个选择

> ID：15870391
> 
> 赞同：1
> 
> 时间：2013-04-08T02:34:40.627
> 
> 标签：uitableview, xcode4.5

我正在尝试在 xcode 上创建一个应用程序，我需要使用一个表格视图，我可以在其中选择多个应用程序来执行一个功能，我想知道如何执行此操作，如果可能的话，我想在故事板上执行此操作，但我会这样做如果不可能，则通过编程

# php - 指定要在 URL 中使用的外部 CSS 文件

> ID：15870393
> 
> 赞同：0
> 
> 时间：2013-04-08T02:35:07.673
> 
> 标签：php, css, printing

我有一个打印机友好的外部 CSS 文件，当用户单击链接时，我希望它使用打印机友好的 CSS 文件在新窗口/选项卡中打开。

有没有办法用 PHP 做到这一点？正在考虑使用 php 调用 URL，然后创建一个新链接供他们单击，该链接使用打印机 css。

当用户使用浏览器选择打印时，在网页上声明打印 CSS 文件。但我希望用户能够自己查看打印视图中的页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T03:01:20.720

带有***打印机不友好*** `CSS`文件的页面：

```
<a href="friendlycss.php?clicked=yes">Click me</a> 
```

带有***打印机友好*** `CSS`文件的页面：

```
if(isset($_GET['clicked']){
    echo '<link rel="stylesheet" href="link_to_sheet"></link>';
} 
```

或者，两个页面可以相同，您可以设置链接以调用当前页面：

```
<?php
    if(isset($_GET['clicked']){
        echo '<link rel="stylesheet" href="link_to_sheet"></link>';
    }
?>
<a href="<?php echo $_SERVER['PHP_SELF']; ?>?clicked=yes" /> 
```

这里的所有都是它的

# https - 从多个线程使用 libcurl - 如何获得最佳性能？

> ID：15870395
> 
> 赞同：2
> 
> 时间：2013-04-08T02:35:22.310
> 
> 标签：https, libcurl

我的程序使用 libcurl 通过 HTTPS 与服务器（总是同一个）通信。最简单的方法是始终为请求创建一个新的 curl 句柄。但是，如果我理解正确的话，这样做我并没有利用 curl 连接池/重用。

创建一个 curl 句柄池是否有意义，以便任何给定线程都可以从中借用句柄，执行请求，然后将其放回池中？

如果答案是肯定的，那么还有一个相关的问题：给定一个 curl 句柄，如何确定对于一个新请求它是否会重用连接，或者必须创建一个新连接（因此把它放在在上述场景中回到池中）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T09:47:52.627

您之前无法确定是否可以重新使用连接，因为没有 libcurl API。

原因很简单，在您要求转移发生之前，判断该决定的因素很多 - 而且它仍然可能失败，然后 libcurl 无论如何都会（透明地）创建一个新连接.

如果您确实必须使用多线程，那么我建议您根据您拥有或知道的某些逻辑拆分请求/线程，以便不同的线程处理不同的主机或类似主机，以提高每个句柄的连接重用机会。

如果您可以考虑另一种选择，使用运行 libcurl 多接口的单个​​线程可能是增加连接重用机会的一种方法。

# c# - C# 数组和列表

> ID：15870399
> 
> 赞同：-1
> 
> 时间：2013-04-08T02:35:46.693
> 
> 标签：c#

我想将列表框中的项目添加到字符串数组中

但是，当我运行代码时，我在变量声明中得到一个空引用异常。有任何想法吗？

列出项目；字符串[] 数组；

```
 public MainWindow()
    {
        InitializeComponent();

        items = new List<String>();
        listBox.Items.Add("Kevin");
        listBox.Items.Add("James");
        listBox.Items.Add("John");
        listBox.Items.Add("Mathew");
        listBox.Items.Add("George"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T03:32:09.677

您需要初始化数组，您只将其声明为类的成员：

```
private void Button_Click_2(object sender, RoutedEventArgs e)
{
    array = new string[listbox.Items.Count];

    ExchangeSort(array);
    listBox.Items.Clear();
    foreach (string i in array)
    {
        listBox.Items.Add(i);
    }
    MessageBox.Show("Done");

} 
```

# java - 作业概览说明

> ID：15870402
> 
> 赞同：0
> 
> 时间：2013-04-08T02:36:17.173
> 
> 标签：java, oop

我有一个学校作业。我发现描述很模糊......如果有人会阅读它并给我他们的解释或简单地用老师以外的语言解释每种方法，将不胜感激。作业要求如下... 注意：我只是觉得他的描述太模糊了。所以我不要求代码。谢谢。

```
The players will be children of the following (partially defined) class:

public abstract class Player implements Comparable{
   public String name;   // name of player
   public    int id;     // identifier for the player
   protected int wins;   
   protected int losses;
   protected int ties;

   public abstract String play(Player opponent);
   // returns one of "rock", "paper", or "scissors"

   public void update(String myGesture, 
                      String opponentGesture,
                      Player opponent);
   // this method will update the player's stats 
   // (wins, losses, ties) based on the gestures (inputs)
   // for a recent game played against opponent (also input)

   public Player(String name, int id){...}
   // constructor that initializes player's name and id
You will need to fill in the code for the constructor and the update methods for the Player class. You can add other "hidden" attributes and methods as you wish (Note: if you add things to Player, be sure it is something that ALL children classes will also use). You will also need to implement three classes that extend the Player class:

public class SimplePlayer extends Player{...}
// A SimplePlayer will always play the same 
// gesture (either rock, paper, or scissors)
// in every game it plays, regardless
// of who its opponent is.  The gesture is 
// randomly chosen when the SimplePlayer is created.

public class RandomPlayer extends Player{...}
// A RandomPlayer will always play a random
// gesture (rock, paper, or scissors) in 
// every game it plays, regardless of who 
// its opponent is.  

public class SmartPlayer extends Player{...}
// A SmartPlayer will try to use past knowledge
// of games played against a particular 
// opponent when playing them again.
You can add any hidden attributes and methods to the children classes as you wish. 
```

编辑：既然这个类实现了 Comparable，那么 play() 会是比较不同手势的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:01:15.550

我用我自己的话改写了他的要求，我们无能为力。

*   play() 返回玩家选择的任何手势。

*   update() 确定谁赢了，并根据手势为他们的赢、输或平加 + 1。

*   Player() 初始化玩家名字和id

*   SimplePlayer() 初始化要使用的手势。这将保持不变

*   RandomPLayer() 将手势初始化为在它玩的每个游戏中都是随机的。

*   SmartPlayer() 根据对方玩家通常使用的手势选择手势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T03:03:16.203

我会尝试在这里重述显而易见的（？）。老师为你提供了一个抽象类`Player`，并要求你实施`SimplePlayer`和`RandomPlayer`上课。您应该实现各自的构造函数，并实现 abstract 和 update 方法。

该类`SimplePlayer`需要使用随机手势进行引导。您需要随机选择一种手势，无论是石头、剪刀还是纸，并将其作为`play`方法的输出始终如一地返回。这意味着无论对手的策略是什么，都`SimplePlayer`需要保持不变。

相反`RandomPlayer`每次需要返回一个随机策略；具体来说，该`play`方法需要返回一个随机的。

该`update(...)`方法可能是有趣的方法。根据当前玩家和对手的策略，您需要更新结果。如果您不熟悉规则，请参阅[此处](http://en.wikipedia.org/wiki/Rock-paper-scissors)。简单地说，你可能需要一堆`if..else`块来比较当前和对手玩家的策略。

希望这会有所帮助，并祝您实施顺利。

# windows - 用户模式应用程序和内核模式驱动程序之间的双向交互？

> ID：15870405
> 
> 赞同：8
> 
> 时间：2013-04-08T02:36:41.193
> 
> 标签：windows, process, kernel, driver

我要写如下交互：

> *   当有一个进程即将启动时，驱动程序会通知用户应用程序，然后它会等待应用程序的响应。
>     
>     
> *   该应用程序将决定是否允许该进程正常创建或立即终止，并将其决定发送回驱动程序。
>     
>     
> *   基于用户应用程序的决定。然后驱动程序将允许或阻止进程执行。

我的问题是：从驱动程序通知用户模式应用程序然后让驱动程序等待响应的推荐方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T03:05:45.873

对于事件通知，您可以使用通知事件。即内核调用IoCreateNotificationEvent 和KeSetEvent。用户调用 KeWaitForSingleObject。对于用户内核消息通信，您可以使用 IOCTL。

或者，您可以将命名管道用于这两个目的。

PS您不能将 PsSetCreateProcessNotifyRoutine() 用于您的目的，因为它仅用于审核，而不用于预防/取消。

# cocos2d-iphone - 如何设置默认屏幕方向？

> ID：15870408
> 
> 赞同：0
> 
> 时间：2013-04-08T02:37:03.910
> 
> 标签：cocos2d-iphone, screen-orientation

不知何故与[Cocos2d - 设置设备/屏幕方向](https://stackoverflow.com/questions/5792706/cocos2d-setting-device-screen-orientation)有关，但是我想找到一种方法保留默认的“允许的方向”设置，但修改初始方向设置。

现在：

*   初始方向：横向左
*   允许的方向：任何景观

期望：

*   初始方向：横向右
*   允许的方向：任何景观

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:04:39.683

在这个旧帖子答案中提出了建议：http: [//www.cocos2d-iphone.org/forum/topic/32650](http://www.cocos2d-iphone.org/forum/topic/32650)

> 如果您同时支持横向方向但希望 UIInterfaceOrientationLandscapeLeft 作为初始方向，则将上面的代码更改为返回 UIInterfaceOrientationIsLandscape(interfaceOrientation) 并在 info.plist 文件中，将 UIInterfaceOrientation（初始界面方向）键设置为 UIInterfaceOrientationLandscapeLeft。

它对我不起作用。相反，我将 UISupportedInterfaceOrientations 中的方向顺序从“左、右”更改为“右、左”，现在我的游戏从右横向开始，但允许向左旋转。

# c# - 从 C# 应用程序调用 C++ 函数。试图读取或写入受保护的内存错误

> ID：15870409
> 
> 赞同：-1
> 
> 时间：2013-04-08T02:37:04.393
> 
> 标签：c#, c++, pinvoke

我正在尝试从 C# 控制台应用程序调用 C++ 函数。

这是C++函数

```
extern int mpsCheck(mpsHandlePtr handle); 
```

其中 mpsHandlePtr 定义为

```
typedef struct  mpsHandleRec *mpsHandlePtr; 
```

在我的 C# 中，我使用以下语法

```
[DllImport("test.dll", EntryPoint = "mpsCheck", CharSet = CharSet.Ansi, CallingConvention = CallingConvention.Cdecl)]
public static extern int mpsCheck(ref System.IntPtr handle); 
```

在调用该函数时出现以下错误：尝试读取或写入受保护的内存错误

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:44:04.033

您需要在 C# 中声明您的结构，然后将其传递给函数。像这样：

```
[StructLayout(LayoutKind.Sequential)]
struct mpsHandleRec 
{
     // fields go here
}

[DllImport("test.dll", CallingConvention = CallingConvention.Cdecl)]
public static extern int mpsCheck(ref mpsHandleRec handle); 
```

或者，如果您只有一个指向结构的不透明指针，则省略结构声明并传递不透明指针：

```
[DllImport("test.dll", CallingConvention = CallingConvention.Cdecl)]
public static extern int mpsCheck(IntPtr handle); 
```

# angularjs - $emit 在使用 testacular (karma) 时会产生错误

> ID：15870410
> 
> 赞同：0
> 
> 时间：2013-04-08T02:37:18.897
> 
> 标签：angularjs, karma-runner

这很可能是我不知道如何使用 Karma。假设我有一个像这样的 angularJS 样板测试

```
'使用严格';

describe('Controller: MainCtrl', function () {

  // 加载控制器模块
  beforeEach(module('testingApp'));

  var MainCtrl,
    范围;

  // 初始化控制器和模拟范围
  beforeEach(inject(function ($controller) {
    范围 = {};
    MainCtrl = $controller('MainCtrl', {
      $范围：范围
    });
  }));

  it('应该将 awesomeThings 列表附加到范围', function () {
    期望（范围.awesomeThings.length）.toBe（3）；
  });
});

```

如果我像这样在我的控制器中插入一个 $emit

```
'使用严格';

angular.module('testingApp')
  .controller('MainCtrl', function ($scope) {
    $scope.awesomeThings = [
      'HTML5 样板',
      'AngularJS',
      '业力'
    ];

    $scope.$emit('helloWorld');
  });

```

我的测试现在失败并说

```
TypeError: Object # has no method '$emit'
```

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T07:35:52.723

不要提供空对象作为范围，而是使用：

```
$scope = $rootScope.$new() 
```

所以你的代码是：

```
// Initialize the controller and a mock scope
  beforeEach(inject(function ($controller) {
    scope = $rootScope.$new();
    MainCtrl = $controller('MainCtrl', {
      $scope: scope
    });
  })); 
```

# cakephp - 如何在 cakephp 2.x 中自定义蛋糕烘焙

> ID：15870412
> 
> 赞同：1
> 
> 时间：2013-04-08T02:37:22.520
> 
> 标签：cakephp, customization, cakephp-bake

我是 cakephp 的新手。
我尝试了这个框架中的惊人功能，蛋糕烘焙
我想在蛋糕烘焙中自定义模型、视图和控制器中的输出

1.  如何在烘焙中创建新文件视图（视图、索引、添加、编辑 .ctp）示例 export_excel.ctp
2.  如何显示模式字段，在示例文件夹（“C:\xampp\htdocs\cake\lib\Cake\Console\Templates\default\actions\controller_actions”）中修改控制器输出。像“lib\Cake\Console\Templates\default\views\index.ctp”我发现了这个脚本：

```
foreach ($fields as $field): //但是我放在controller_task中的这段代码不起作用
```

对不起，糟糕的帖子，我的英语很糟糕..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:10:55.707

问题 1 - 是否希望能够使用烘焙创建自定义视图类型？我想你可以扩展 CakePHP 的 bake shell，像这样（app/Console/Command/MyBakeShell.php）：

```
App::uses('AppShell', 'Console/Command');
App::uses('BakeShell', 'Console/Command');

class MyBakeShell extends BakeShell {
public function startup() {
        parent::startup();
    }

    // Etc etc, your implementation here...in the main() method I guess you could add a call to new function for generating your custom view
} 
```

这就是你所追求的吗？我想这将是相当繁琐的，但你可能有一个用例证明这项工作是合理的。

问题 2 - 真的不明白吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:08:39.980

我自己是新手，希望能帮到你。

当您烘焙时，它会为您创建所有模型、控制器和视图。我发现通过回答有关字段、表中的关系和助手的问题，它会为您创建所有这些，我建议您创建一个包含 2 个表的 mysql 数据库并在 2 个表之间建立关系，然后开始烘烤并执行几次以查看正在发生的事情 [阅读 cakephp 手册] 当然也会有所帮助。

当您了解 mvc 之间的关系时，您就会知道您可以创建自己的控制器和视图来构建额外的页面。

在我找到这个关于变形器的网址之前，我在理解复数和其他方面遇到了一些麻烦，我也可以向你提出建议。[http://inflector.cakephp.org/](http://inflector.cakephp.org/)

如果你想创建一个新的视图，你需要先创建一个新的控制器。然后创建一个文件夹并将新视图 index.ctp 放入该文件夹

因此，假设您想在您的网站上创建一个名为 spain 的新页面，在文件夹 app/Controller/SpainController.php 中创建控制器西班牙手册

```
 <?php
 App::uses('AppController', 'Controller');
 /**
 * Spain Controller
 *
 */
 class SpainController extends AppController {
public $helpers = array('Html', 'Form');

public function index() {
$this->set('title_for_layout', 'Properties in Spain');
 }
 }
 ?> 
```

然后你在 /app/View/Spain/index.ctp 创建你的视图

```
 <!-- View for Spain -->
 <br /><h1 align="center">Put your text here...</h1><br />
 <div align="center"><hr><br /> 
```

这就是你自己的观点......不确定我是否理解你对这个 export.excel 的正确理解，但在我看来，你想创建一些东西来从你的数据库中导出数据。因此，您开始蛋糕烘烤，1 个控制器，选择包含要导出的数据的表并回答问题。整个过程完成后，您可以修改视图。

不确定你的其他问题。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-03T11:49:33.250

复制粘贴 lib/Cake/console/template 到 templates/your_name/views/3files

修改3个文件bake看看变化

# java - 如何从 Java 控制相机？

> ID：15870413
> 
> 赞同：2
> 
> 时间：2013-04-08T02:37:27.007
> 
> 标签：java, camera

当我正在为我正在从事的项目构建应用程序时，我正处于十字路口。我正在研究试图找到一个用于从 Java 控制相机功能的 API。JMF 已经死了，这不会在 Windows 平台上运行。我研究过 DSJ，但没有在 Windows 平台上运行它会否定运行它。我还看到了一些据称抓取相机输出的示例，但它抓取了桌面，并且无法正常工作，并且使用 Java AWT / Swing 也不是我想要做的。这也不是基于 android 的项目，或者我会为此使用 API。

我的想法是 #1 - 有人知道 Java 中有一个合适的框架可以允许对相机和伺服系统进行编程控制（可选）吗？和 #2 - 如果 java 是 java，我可以简单地导入用于控制手机摄像头的 android 包吗？

如果我尝试解释我要做什么，可能会更清楚一些。我有 2 块 ODroid-X 板，我正在尝试在其上运行 Ubuntu 并将它们聚集在一起。要么我想编写一个应用程序以在其上运行的 Apache Tomcat 集群上运行，要么使用 Open-MPI 编写一个深入的应用程序并将其设置在一个真正的集群中。

最终目标是将我的遥控飞机变成无人机。我知道有一些开箱即用的解决方案，但没有一个适合我的应用程序，我开始认为我理解为什么......

任何有关让相机与 Java 一起工作的信息将不胜感激。提前致谢！

温馨问候，

乔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:44:53.887

例如，[Jitsi](http://www.aosabook.org/en/jitsi.html)是这样做的：

> [...] Java 运行时环境 (JRE) 不支持或不按照我们希望的方式执行某些操作，例如从您的网络摄像头捕获视频。因此，我们需要在 Windows 上使用 DirectShow，在 Mac OS X 上使用 QTKit，在 Linux 上使用 Video for Linux 2。

不是很令人鼓舞，但由于它是开源的，你可以看看他们是如何做到的。

# ruby - Sinatra：/POST 被多次调用

> ID：15870415
> 
> 赞同：0
> 
> 时间：2013-04-08T02:37:38.007
> 
> 标签：ruby, post, sinatra

我有一个基本的 Sinatra 应用程序，它将文件上传到 S3，然后通过从 S3 下载文件、转换为哈希然后将其放入数据库来对文件进行一些分析。

目前我有脚本工作：文件上传，下载和分析但是，大约在分析的一半，再次调用 POST 方法，因此文件被重新下载并开始分析。

脚本如下所示：

```
require 'sinatra'
require 'aws'
require "./redo.rb"

get '/' do
  return %Q{
    <form action="upload" method="post" accept-charset="utf-8" enctype="multipart/form-data">
    Upload a file for processing:
      <div>
        <input type="file" name="file" value="" id="file">
      </div>
      <div>
        Email address: <input type="text" name="email" value="" id="email">
      </div>
      <div>
        Subscribe? <input type="checkbox" name="subscribe" checked="checked" id="sub">
      </div>
      <div>
        <input type="submit" value="Upload &uarr;">
      </div>
    </form>
  }
end

post '/upload' do

  customer_id = SecureRandom.uuid

  emailaddress = params[:email]
  subscribe    = params[:sub]
  file         = params[:file][:tempfile]
  filename     = params[:file][:filename]

       url = uploadtoS3(file, filename, customer_id)

      return url
    end 
```

使用 redo.rb 中的方法，如下所示：

```
def uploadtoS3(attr_file, attr_filename, attr_customerID)
  puts "in uploadtoS3"
  bucket = $s3.buckets.create("#{attr_customerID}")
  obj = bucket.objects["#{attr_filename}"]
  obj.write(Pathname.new(attr_file.path))

#Call analysis methods here...

urlpointer = "https://#{bucket.name}.s3.amazonaws.com/#{attr_filename}"
return urlpointer
end 
```

为什么多次调用 /POST 方法？

# python - XML - 单个 xmlns 定义中的双 URI，它有效吗？

> ID：15870417
> 
> 赞同：0
> 
> 时间：2013-04-08T02:37:44.280
> 
> 标签：python, xml, xml-namespaces, elementtree

我有一些具有 xmlns 声明的 XML，如下所示：

```
<dc:record xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mods="http://www.loc.gov/mods/v3 http://www.loc.gov/standards/mods/v3/mods-3-0.xsd"> 
```

这条线似乎在 Python 中触发了 eTree XML 解析器：

```
lxml.etree.XMLSyntaxError: xmlns:mods: 'http://www.loc.gov/mods/v3 http://www.loc.gov/standards/mods/v3/mods-3-0.xsd' is not a valid URI, line 6, column 63 
```

如果我删除在 xmlns:mods 声明中找到的两个 URI 之一，它解析得很好。

因此，知道 xmlns 元素是用来帮助人类解析的，并且并不意味着要特别尊重，这是对 XML 的真正约束（在 xmlns 命名空间声明中具有单个 URI），还是过度热心的强制执行lxml etree 解析器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T02:59:01.237

我认为 lxml.etree 在这里做的是正确的事情。

根据[规范](http://www.w3.org/TR/2006/REC-xml-names11-20060816/)，命名空间声明属性的值必须是“ [IRI](http://en.wikipedia.org/wiki/Internationalized_Resource_Identifier)引用——标识命名空间的命名空间名称——或空字符串”

您的示例具有属性 value `"http://www.loc.gov/mods/v3 http://www.loc.gov/standards/mods/v3/mods-3-0.xsd"`，它不是有效的 IRI（冒号在错误的位置，例如）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T07:23:47.363

命名空间名称是否必须是有效 URI 的问题是一个令人烦恼的问题。当然，您在这里所拥有的是错误的；但是您的解析器是否“过分热心”是另一回事。

命名空间 1.1 规范在第 8 节中说，“处理器必须报告命名空间格式良好的违规行为，但不需要检查命名空间名称是否为合法 IRI”。

在实践中，大多数解析器不做这个检查，一旦大多数软件产品对强制执行规范中的规定宽容，执行它的软件开始不受用户欢迎。

# xpages - XPages SSJS 将所 有用户置于一个角色下并放入组合框？

> ID：15870422
> 
> 赞同：1
> 
> 时间：2013-04-08T02:39:27.610
> 
> 标签：xpages, xpages-ssjs

我在我的组合框值中执行了以下代码，但它是空的，尽管我确实将一些用户放入具有“审阅者”角色的 ACL：

```
var arr=new Array();
var acl:NotesACL=database.getACL();
var acle:NotesACLEntry=acl.getFirstEntry();
while(acle.getRoles().contains('[Reviewer]')){
    arr.push(acle.getName());
    acle=acl.getNextEntry(acle);
}
return arr; 
```

我的数据库在服务器上。我正在使用 8.5.3 FP3 UP1。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T04:39:02.210

一旦遇到未启用指定角色的条目，您列出的代码将立即退出 while 循环。所以如果第一个条目没有角色，它永远不会进入循环。我建议对代码进行三处更改：

1.  首先，永远不要使用`new Array()`...`[ ]`改用。除了每次键入的字符更少之外，在浏览器中，[数组字面量的性能更好](http://jsperf.com/new-array-vs-literal/9)，因此即使在性能差异不太可能被注意到的 SSJS 中，养成这种习惯也是件好事。同样，虽然这与您的具体示例无关，但切勿使用`new Object()`; 只需使用`{ }`.
2.  而不是检查您的 while 条件中的角色，而是比较`acle`并`null`检查循环*内的角色。*这将确保返回具有指定角色的所有条目，无论它们在 ACL 中的顺序如何。
3.  为了[避免泄漏 C++ 句柄](http://nathantfreeman.wordpress.com/2013/03/21/recycle-and-the-retail-experience/)，您需要在检查下一个条目之前回收每个条目。

将三处更改放在一起，修改后的代码如下所示：

```
var arr = [ ];
var acl:NotesACL=database.getACL();
var acle:NotesACLEntry=acl.getFirstEntry();
var nextEntry:NotesACLEntry = null;
while(acle != null){
    if (acle.getRoles().contains('[Reviewer]')) {
        arr.push(acle.getName());
    }
    nextEntry = acl.getNextEntry(acle);
    acle.recycle();
    acle = nextEntry;
}
return arr; 
```

# matrix - 在 Fortran 中使用字符串连接的列矩阵的 SIGSEGV

> ID：15870424
> 
> 赞同：0
> 
> 时间：2013-04-08T02:39:57.023
> 
> 标签：matrix, fortran, string-concatenation, segmentation-fault

我正在尝试读取流场快照的列（uvw 堆叠，其中约 24k）并将多个快照（保存到单独的 .dat 文件中，如发布的代码中所示）组合成矩阵（列是速度timesteps, i=1 first timestep, ect) 用于 SVD/POD。我按照这里的一些教程进行了格式化（我认为），但现在我遇到了这个 sigsegv 错误，所以我被卡住了。非常感谢任何输入。谢谢！

```
 program matrix2       
!      Creates rectangular matrix by adding columns of individual
!      Timesteps for use in Singular Value Decomposition (in MatLAB)

!      Allocate
       double precision, dimension(:,:), allocatable :: POD
       integer, parameter :: tend = 700
       integer, parameter :: length = 23925
       character(:), allocatable :: fn, fm
       integer :: it, idt
       character(len=5) :: t, dt
       character(len=10) :: fmt
       character(len=40) :: fmm

!      Create format discriptors
       fmt = '(i5.5)'
       fmm = '(a19,i5.5,a4)'

!      Create data file to save matrix
       fn = 'POD_Data_Matrix.dat'
       open(unit=1,file=fn,status='unknown',form='formatted')

!      Loop to open column files and write data
       do j = 1,tend

!      Open corresponding column file, add to POD matrix
!      and close every timestep column
!      Convert integer to string using internal file
         it=00001
         idt=00001
         write(t,fmt) it
         write(dt,fmt) idt
         fm = 'U-Matrix-Column-Eq-'//trim(t)//'.dat'
         open(unit=11,file=fm,status='unknown',form='formatted')  
         do i = 0,length
           read (11,*) POD(j,i)
         enddo
         close(11)
         it = it + idt
       enddo

!      Write and close final POD matrix
       write(1,*) POD(j,i)
       close(1)

!      Deallocate
!       deallocate(POD)
!       deallocate(fn,fm)
       endprogram 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:33:47.993

`POD`被声明为可分配的，但它从未在 READ 语句中的尝试定义之前分配。`ALLOCATE(POD(tend,length))`也许你忘了在阅读循环之前给它分配一些东西 ？

# python - wx中如何同步两个网格的滚动条

> ID：15870426
> 
> 赞同：4
> 
> 时间：2013-04-08T02:40:03.450
> 
> 标签：python, grid, scrollbar, sync, wxwidgets

创建一个自定义 wx.frame 以包含一个拆分器窗口，其中包含两个网格控件。它用于比较每个网格中的数据。此时两个网格的滚动条需要支持同步滚动。

问题：

1.  如何获取这两个网格的滚动事件？我试图在框架上绑定 wx.EVT_SCROLL 事件但失败了。我也尝试在自定义网格控件中绑定滚动事件，它也失败了。
2.  如何同步滚动两个网格的滚动条？提到使用 gridInstance.Scroll(row, col) 滚动网格客户端窗口的相关[问题](https://stackoverflow.com/questions/8665633/how-to-make-auto-scrolling-wx-grid-table)的答案。但它不包含如何同步滚动条。

非常感谢您的任何建议。

自定义框架的init方法

```
 def __init__(self, parent):
        wx.Frame.__init__(self, parent, -1, title='', size=(640,480))
        main_panel = wx.Panel(self, -1)
        self.TBFLAGS = ( wx.TB_HORIZONTAL| wx.NO_BORDER| wx.TB_FLAT)
        self.controller = None
        self.isSyncScroll = True

        #hsizer = wx.BoxSizer(wx.VERTICAL)
        gsizer = wx.FlexGridSizer(rows = 1,
                                                    cols = 1,
                                                    vgap = 2,
                                                    hgap = 2)
        gsizer.AddGrowableRow(0)
        gsizer.AddGrowableCol(0)
        self.tb = self.init_toolbar()
        (sub_panel0, sub_panel1) = self.init_splitter(main_panel)
        self.grid0 = self.init_grid(sub_panel0)
        self.grid1 = self.init_grid(sub_panel1)
        self.init_status_bar()

        gsizer.Add(main_panel, 1, wx.EXPAND)
        self.SetSizer(gsizer)

        ico = wx.Icon(u'Compare.ico', wx.BITMAP_TYPE_ICO)
        self.SetIcon(ico)
        self.Maximize()

        #can't catch the scroll event at the frame
        self.Bind(wx.EVT_SCROLL, self.OnScroll, self.grid0)
        #self.Bind(wx.EVT_SCROLL, self.OnScroll)
        #self.Bind(wx.EVT_SCROLL, self.OnScroll, id=self.grid0.GetId()) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T17:28:34.693

当您抓住一个或另一个时，以下代码使 2 个滚动条一起移动。

Python 版本 2.7.3 & wxpython 2.9.4.0 & windows Xp。

```
import wx
import wx.grid as grid

class Frame(wx.Frame):
    def __init__(self, parent):
        wx.Frame.__init__(self, parent, -1, "Grid", size=(350, 250))
        self.grid = grid.Grid(self)
        self.grid.CreateGrid(20, 20)

class ScrollSync(object):
    def __init__(self, frame1, frame2):
        self.frame1 = frame1
        self.frame2 = frame2
        self.frame1.grid.Bind(wx.EVT_SCROLLWIN, self.onScrollWin1)
        self.frame2.grid.Bind(wx.EVT_SCROLLWIN, self.onScrollWin2)

    def onScrollWin1(self, event):
        if event.Orientation == wx.SB_HORIZONTAL:
            self.frame2.grid.Scroll(event.Position, -1)
        else:
            self.frame2.grid.Scroll(-1, event.Position)
        event.Skip()

    def onScrollWin2(self, event):
        if event.Orientation == wx.SB_HORIZONTAL:
            self.frame1.grid.Scroll(event.Position, -1)
        else:
            self.frame1.grid.Scroll(-1, event.Position)
        event.Skip()

if __name__ == '__main__':
    app = wx.App()
    frame1 = Frame(None)
    frame1.Show()
    frame2 = Frame(None)
    frame2.Show()
    ScrollSync(frame1, frame2)
    app.MainLoop() 
```

这是另一个使用计时器来检查和设置滚动位置的版本，因此它涵盖了任何类型的滚动更改。

```
import wx
import wx.grid as grid

class Frame(wx.Frame):
    def __init__(self, parent):
        wx.Frame.__init__(self, parent, -1, "Grid", size=(350, 250))
        self.grid = grid.Grid(self)
        self.grid.CreateGrid(20, 20)

class ScrollSync(wx.EvtHandler):
    def __init__(self, frame1, frame2):
        super(ScrollSync, self).__init__()
        self.frame1 = frame1
        self.frame2 = frame2
        self.frame1ScrollPos = self.getFrame1Pos()
        self.frame2ScrollPos = self.getFrame2Pos()
        self.Bind(wx.EVT_TIMER, self.onTimer)
        self.timer = wx.Timer(self)
        self.timer.Start(20)

    def onTimer(self, event):
        if not self.frame1 or not self.frame2:
            self.timer.Stop()
            return
        if self.frame1ScrollPos != self.getFrame1Pos():
            self.frame1ScrollPos = self.getFrame1Pos()
            self.frame2.grid.Scroll(self.frame1ScrollPos)
        elif self.frame2ScrollPos != self.getFrame2Pos():
            self.frame2ScrollPos = self.getFrame2Pos()
            self.frame1.grid.Scroll(self.frame2ScrollPos)

    def getFrame1Pos(self):
        horizontal = self.frame1.grid.GetScrollPos(wx.SB_HORIZONTAL)
        vertical = self.frame1.grid.GetScrollPos(wx.SB_VERTICAL)
        return horizontal, vertical

    def getFrame2Pos(self):
        horizontal = self.frame2.grid.GetScrollPos(wx.SB_HORIZONTAL)
        vertical = self.frame2.grid.GetScrollPos(wx.SB_VERTICAL)
        return horizontal, vertical

if __name__ == '__main__':
    app = wx.App()
    frame1 = Frame(None)
    frame1.Show()
    frame2 = Frame(None)
    frame2.Show()
    ScrollSync(frame1, frame2)
    app.MainLoop() 
```

# php - 如何在 php 中使用正则表达式匹配两个结束标签？

> ID：15870429
> 
> 赞同：0
> 
> 时间：2013-04-08T02:40:18.467
> 
> 标签：php, html, regex, html-parsing

我有一段 HTML（*不是*完整的 HTML 文档），其中包含以下几个实例：

```
 </div>

            some text is here

    </h3> 
```

我只想匹配 'some text is here' 但在使用 php 正则表达式时无法理解多行、换行符和空格。我得到的是：

```
 preg_match('/<\/div>[\s\r\n\t]*(.*)[\s\n\r\t]*<\/h3>/', $string, $matches); 
```

但这似乎不起作用。我也尝试过使用 DOMDocument() ，但它会引发各种错误，可能是因为这不是一个完整的 HTML 文档。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:43:01.573

使用类似的东西

```
preg_match("@</div>(.*?)</h3>@s", $html, $matches); 
```

`s`PCRE 修饰符（在 last 之后）`@`允许`.`匹配换行符。这样`.*?`做是为了让它只匹配*第一个* `</h3>`而不是最后一个。标签之间的数据将在`$matches[1]`

# jquery - 如何制作像 facebook 弹出照片这样的弹出窗口？

> ID：15870431
> 
> 赞同：0
> 
> 时间：2013-04-08T02:40:22.780
> 
> 标签：jquery, facebook, colorbox

像这样：http: [//i.stack.imgur.com/TE8et.jpg](http://i.stack.imgur.com/TE8et.jpg)

右侧是内容（固定宽度），左侧是照片，就像全屏一样。

我尝试使用彩盒，但失败了。

失效链接：[http ://www.novalab.com.hk/demo/homeda/photos](http://www.novalab.com.hk/demo/homeda/photos)

有滚动:(

有像 facebook 这样的开源吗？

谢谢！

# php - HTML / PHP - Textarea 显示代码中的制表符/空格

> ID：15870439
> 
> 赞同：0
> 
> 时间：2013-04-08T02:41:07.857
> 
> 标签：php, html, textarea, form-fields

出于可读性原因，我的代码如下所示：

```
 <textarea cols="50" rows="5"  id="k99_brsa_settings[brsa_keep_settings_exp]"  name="k99_brsa_settings[brsa_keep_settings_exp]" />
            <?php echo $export; ?>
        </textarea> 
```

我不知道如何在`tabs`这里表示/显示，但实际上是这样的：

```
[TAB][TAB][TAB][TAB]<textarea cols="50" rows="5" id="k99_brsa_settings[brsa_keep_settings_exp]"  name="k99_brsa_settings[brsa_keep_settings_exp]" />
[TAB][TAB][TAB][TAB][TAB]<?php echo $export; ?>
[TAB][TAB][TAB][TAB]</textarea> 
```

或者更好的是使用图像（代码编辑器）：

![编辑器中的代码选项卡](https://i.stack.imgur.com/bOVq4.jpg)

问题是，这些选项卡出现在输出中，如下所示：

![选项卡出现在 textarea 中](https://i.stack.imgur.com/L60Tq.jpg)

并且由于这些是数据库条目，因此当我保存时，它实际上会更改条目（添加制表符和空格）

我知道当我将代码更改为`one liner`：

```
<textarea cols="50" rows="5"  id="k99_brsa_settings[brsa_keep_settings_exp]" name="k99_brsa_settings[brsa_keep_settings_exp]" /><?php echo $export; ?></textarea> 
```

（图片来自下面的代码编辑器）

![带有一个衬里的图像](https://i.stack.imgur.com/JRvrl.jpg)

...没有问题，也没有制表符/空格。

有什么方法可以保持标签的可读性并消除那些输出标签和空格？`<textarea>`TAGS是否总是必须在没有空格的输出后结束

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T02:45:59.680

您仍然可以将其保留在多行

```
<textarea ...><?php

?></textarea> 
```

或者你可以这样做：

```
<?php
    echo "<textarea line1>"
        . $export
        . "</textarea>";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:47:18.780

我猜你可以尝试将额外的空格修剪成一个空格。或者更改您的标记以删除选项卡。

```
<?php
    // This will replace any double whitespace with a single whitespace
    $result = str_replace('  ', ' ', $result);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T02:54:03.880

一种替代方法是通过替换`<?php echo $export; ?>`为`<?= $export ?>`. 将所有内容放在一条线上可能会让您感觉更好。

我知道人们不建议使用短标签，但根据[http://php.net/manual/en/language.basic-syntax.phpmode.php](http://php.net/manual/en/language.basic-syntax.phpmode.php)，短标签语法将始终被 php 5.4 及更高版本识别。

# c - 为什么浮动会这样做？

> ID：15870442
> 
> 赞同：0
> 
> 时间：2013-04-08T02:41:27.750
> 
> 标签：c, floating-point

我正在玩普通的旧 C。我只是在计算一些便士，然后在一定次数的迭代中以指数方式增加数量。在该过程结束时，我有大量的美分/便士，我想在屏幕上显示为美元和美分。

我的输出电流如下所示：

```
"You have 805306365 pennies" 
```

我尝试通过将新变量定义为浮点数来将此数字转换为美元：

```
float totalD = total / 100.00; 
```

输出显示`8053063.50`。为什么这个 int 的除法会造成 15 美分的损失？如果有帮助，我正在尝试通过“printf”显示它：

```
printf("You have %.2f dollars", totalD); 
```

我知道我可以将我的美分转换为字符串并尝试按照我喜欢的方式对其进行格式化，但我对为什么浮点数会这样做感到困惑。谁能告诉我为什么会发生这种情况以及如何处理它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T02:49:29.053

**更新的准确性和完整性**

您遇到的是浮点数*精度的（相当常见的）问题。*在许多编译器上，浮点数只有 32 位长，它们使用一定数量的这些位 (23) 作为它们的“有效位”（有时称为“尾数”）、1 个符号位和 8 位作为“指数”（在像 1.23E45 这样的数字中，“1.23”是有效数，“45”是指数。在二进制中，您实际上只有相对较少 (24) 个可用的 1 和 0，因此您在大约数字 6 或 7 的十进制表示法）。

为了说明这种精度损失，我写了几行代码：

```
#include <stdio.h>

int main(){
  float fpennies;
  long lpennies, ii;

  lpennies = 805306360;
  for(ii = 0; ii< 100; ii++) {
      fpennies = lpennies + ii;
      printf("%ld pennies converted to float: %.0f fpennies\n",ii+ lpennies, fpennies);
  }
} 
```

这产生了许多类型的行

```
805306360 pennies converted to float: 805306368 fpennies 
805306361 pennies converted to float: 805306368 fpennies 
805306362 pennies converted to float: 805306368 fpennies 
... 
805306400 pennies converted to float: 805306368 fpennies 
805306401 pennies converted to float: 805306432 fpennies 
```

如您所见，就在 附近`805306400`，将 增加`long`1`float`会使数字的表示增加`64`！最好通过仔细查看浮点数的二进制表示来解释这一点。

首先，这里是一个 32 位浮点数的组织（来自[http://upload.wikimedia.org/wikipedia/commons/d/d2/Float_example.svg](http://upload.wikimedia.org/wikipedia/commons/d/d2/Float_example.svg)）：

![在此处输入图像描述](https://i.stack.imgur.com/GIkAl.png)

我们可以通过一些显式转换获得数字的十六进制表示：

```
printf("%.0f %08x", fpennies, *(unsigned int*)(&fpennies)); 
```

对于我们之前看到的跨越跳跃的两个值，这导致

```
805306368 4e400000
805306432 4e400001 
```

如您所见，有效数字的“最低有效位”增加了`1`，但指数意味着乘数为 64。为什么是 64？好吧，让我们扩展前几位：

```
0x4e40 = 0100 1110 0100 0000 in binary 
```

由于最高位是符号位（0 = 正），接下来的八位是指数，这使得指数

```
1001 1100 = 0x9c = 156 
```

现在，从浮点中的位到其值的规则（参见[http://en.wikipedia.org/wiki/Single-precision_floating-point_format](http://en.wikipedia.org/wiki/Single-precision_floating-point_format)）是

```
value = (-1)^(sign bit) * (1 + sum(i=1 to 23, bit(23-i)*2^(-i))) * 2^(exponent - 127) 
```

在这种情况下，`1`最低有效位（位 0）的变化增加了`2^(-23) * 2^( 156 - 127 ) = 2^6 = 64`

因此，对于这种数量级的数字，可以表示的最小步长是`64`，正如您在输出中看到的那样。

如果你想解决这个问题，你可以做 Vaughn 的回答中建议的事情 - 使用表示便士的长整数，并使用整数数学（除法，模数）来获得“整美元，整美分”的金额。

```
long int dollars, cents, pennies;
...
dollars = pennies / 100;
cents = pennies % 100; 
```

通过这种方式，您可以在不损失精度的情况下代表一些相当大的金额。

在实践中，当你写

```
float pennies = 805306365;
printf("you have %f pennies\n", pennies); 
```

你得到

```
You have 805306368 pennies 
```

如果你使用一种`double`类型，你会有更好的运气（在这种情况下）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T02:58:41.373

我认为这样做会更好：

```
printf("You have %d.%02d dollars", total/100,total%100); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T02:52:43.093

考虑使用 long int 或 long long 来表示便士。浮动或双打不适合您尝试做的事情。我建议阅读[有关 StackOverflow 的讨论](https://stackoverflow.com/questions/3730019/why-not-use-double-or-float-to-represent-currency)。

# python - 在 cronjob 期间执行 NDB 查询

> ID：15870443
> 
> 赞同：0
> 
> 时间：2013-04-08T02:41:32.737
> 
> 标签：python, google-app-engine, app-engine-ndb

我有一个 GAE（谷歌应用引擎）应用程序，它每隔 15 分钟解析一次网站。每 15 分钟，cron 将检查`BitData()`要加载的最旧数据（在这种情况下）的时间戳，并将从该点解析数据，直到`utc.now()`. 不幸的是，我无法通过查询 NDB 数据库以获取最新`BitData()`对象的第一部分。

代码示例：

```
def bitcoincharts_last():
    q = BitData.query()
    q = q.order(BitData.tstamp)
    if q == None:
        return '0'
    else:
        return q[0] 
```

这会在日志中显示错误：

```
TypeError: order() expects a Property or query Order; received <class 'google.appengine.ext.ndb.model.DateTimeProperty'> 
```

使用`q = q.order(-BitData.tsamp)`相反的顺序来代替响应给出：

```
TypeError: bad operand type for unary -: 'type' 
```

我已经根据示例[here](https://docs.google.com/document/d/1AefylbadN456_Z7BZOpZEXDq8cR8LYu7QgI7bt5V0Iw/mobilebasic)、[here](http://dylanv.org/2012/08/22/a-hitchhikers-guide-to-upgrading-app-engine-models-to-ndb/)和NDB Google Docs检查了我的代码，但我似乎无法找到查询无法运行的原因。

位数据：

```
class BitData(ndb.Model):
    key = ndb.KeyProperty
    tstamp = ndb.DateTimeProperty
    price = ndb.IntegerProperty
    amount = ndb.IntegerProperty 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T05:13:19.897

模型定义应该是：

```
class BitData(ndb.Model):
    key = ndb.KeyProperty()
    tstamp = ndb.DateTimeProperty()
    price = ndb.IntegerProperty()
    amount = ndb.IntegerProperty() 
```

您只是将 Class 字段定义为指向 ndb Property 类，实际上并没有实例化它们中的任何一个。

# html - html 中的 ol 内不能有 ul

> ID：15870444
> 
> 赞同：3
> 
> 时间：2013-04-08T02:41:37.730
> 
> 标签：html, css, list, html-lists

测试 HTML 时出现以下验证错误。

请查看 HTML 代码的附件图像。 ![在此处输入图像描述](https://i.stack.imgur.com/HjEIu.png) “在这种情况下`ul`，不允许元素作为元素的子元素。”`ol`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T02:48:30.970

这是因为`<ol>`（`<ul>`实际上）的内容模型是[零个或多个`li`元素](http://www.w3.org/TR/html5/grouping-content.html#the-ol-element)

这两个标签实际上不能包含除`<li>`标签以外的任何内容或根本不包含任何内容。如果你有`<ol><ul>`浏览器会在开始之前自动关闭`<ol>`标签`<ul>`（好吧，好的）。

我认为您的意图是：

```
<ol>
    <li>
        <ul> 
```

`<ul>`可以包含在作为的`<li>`子级的 中`<ol>`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T02:44:40.760

这是因为您应该将内部 <ul> 包装在列表 <li> 项中：

```
<ul><li>text</li>....</ul> 
```

变成：

```
<li><ul><li>text</li>....</ul></li> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T02:46:25.877

**你应该做这些**

```
<ol>
  ...
  <li>title</li>
  <li><!-- add this -->
    <ul><!-- your ul put here -->
    ...
    </ul>
  </li><!-- add this -->
  ...
</ol> 
```

**PS。在某些情况下，使用原始代码比使用图像更好。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T02:49:26.083

尝试将`<ul>`部分包装到`<li>`标签中。

# mysql - 安装的 MySQL 中 mysql 数据库（模式）的目的是什么

> ID：15870446
> 
> 赞同：-1
> 
> 时间：2013-04-08T02:41:56.137
> 
> 标签：mysql, database

在[MySQL 的手册](http://dev.mysql.com/doc/refman/5.5/en/)中，提到了 database information_schema 和 database performance_schema，它们都有专门的章节；但它似乎并没有过多地提及数据库mysql。这个数据库的目的是什么？它有什么样的信息？有官方文档来解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:47:39.420

这些数据库管理诸如您编写的存储过程的位置和您编写的数据库函数之类的事情。此外，您的权限信息也存储在那里。MySQL 使用这些 DB 来存储有关其自身和您的其他数据库的信息。值得查看这些数据库以更好地了解它们的用途，但我向您保证它们很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T07:55:04.740

`INFORMATION_SCHEMA`不是数据库，而是一组只读视图或系统映射，它们提供了以 ANSI SQL92 标准指定的供应商无关格式枚举数据库信息的能力。

每个数据库供应商都有自己的本地机制来查找表列表、列、类型、索引等信息。例如，对于 MySQL，它是`SHOW TABLES`，对于 PostgreSQL，它是`psql \d`等等。不幸的是，对于每种数据库类型，获取此信息的本地方法是不同的。

为了解决这个问题，所有已知的数据库供应商——MySQL、PostgreSQL、MSSQL、Oracle 等也都实现`INFORMATION_SCHEMA`了对 .相同的界面。

关于`PERFORMANCE_SCHEMA`- 它是 MySQL 扩展，用于查看服务器性能操作和调整，并且不是任何标准的一部分。其他供应商可能会提供类似的工具，但它们都是特定于供应商的。

# jquery - 从头开始制作图像滑块

> ID：15870448
> 
> 赞同：0
> 
> 时间：2013-04-08T02:42:05.660
> 
> 标签：jquery, css, html, slider, position

我正在研究图像滑块。我实际上想要做的是将图像放在另一个旁边，但我一直在尝试这样做`display: inline-block`，也`float:left`......但它们似乎都不起作用，我不知道为什么. 我会把 JS 小提琴留给你，看看是否有人可以帮助我。我想使用`display inline-block`而不是`float:left`.

## html代码

```
<body>
<div id='window'>
    <div id='slide-window'>
        <ul id='slides'>
            <li class='slide'><img src="http://files.chess.com/images_ads/chesscom_logo_on_dark-copy.png"></li>
            <li class='slide'><img src="http://i.stack.imgur.com/ykt9V.png"></li>
            <li class='slide'><img src="https://raw.github.com/andrew-yavtushenko/css-style-guide/master/dog.jpg"></li>
        </ul>
    </div>
</div>
</body> 
```

## CSS代码

```
#slide-window
{
margin: 0;
padding: 0;
position: relative;
/*overflow: hidden;*/
}

#slides
{
display: inline-block;
margin: 0;
padding: 0;
list-style: none;
position: relative;
}

#slides li
{   
float: left; 
position: relative;
left: 0;
top:0;
}

#window
{
width: 400px;
height: 400px;
background: black;
margin: 2em auto 0 auto;

} 
```

[http://jsfiddle.net/xtatanx/EbjWS/](http://jsfiddle.net/xtatanx/EbjWS/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:47:00.040

设置`overflow:hidden`并`#window`提供`#slide-window`与所有图像的总宽度相同的宽度。

# events - 如何将此 eventproc 代码与 checkdata 代码合并？

> ID：15870456
> 
> 赞同：0
> 
> 时间：2013-04-08T02:43:01.900
> 
> 标签：events, vba, excel

我最近帮助创建了一些检查数据代码，如下所示：

```
Private Sub Worksheet_Activate()
    CheckData Me.Range("C3:V65")
End Sub
Private Sub Worksheet_Change(ByVal Target As Range)
    CheckData Intersect(Target, Me.Range("C3:V65"))
End Sub
Sub CheckData(rng As Range)
    Dim icolor As Integer
    Dim cell As Range

    If rng Is Nothing Then Exit Sub

    For Each cell In rng.Cells
        icolor = 0
        Select Case cell
            Case "": icolor = 2
            Case Is <= Date + 30: icolor = 3
            Case Is <= Date + 60: icolor = 6
            Case Is > Date + 60: icolor = 2
        End Select
        If icolor <> 0 Then cell.Interior.ColorIndex = icolor
    Next cell
End Sub 
```

我在一个基本上只有一个宏需要在指定范围内运行的工作簿上使用它。但是，我在另一个工作簿中设置了以下代码，我需要对其进行修改，以便 checkdata 函数正常工作。

```
Private Sub Worksheet_Change(ByVal Target As Range)
        Application.ScreenUpdating = False
        Application.EnableEvents = False

        EventProc1 Target
        EventProc2 Target

        Application.EnableEvents = True
        Application.ScreenUpdating = True
    End Sub

    Private Sub EventProc1(ByVal Target As Range)
        Dim icolor As Integer
        Dim cell As Range

        If Intersect(Target, Range("L2:L55")) Is Nothing Then Exit Sub
        For Each cell In Target
            icolor = 0
            Select Case cell
                Case "": icolor = 2

                Case Is <= Date + 120: icolor = 3 
                Case Is <= Date + 180: icolor = 6 
                Case Is > Date + 180: icolor = 2

            End Select
            If icolor <> 0 Then cell.Interior.ColorIndex = icolor
        Next cell
    End Sub

    Private Sub EventProc2(ByVal Target As Range)
        Dim icolor As Integer
        Dim cell As Range

        If Intersect(Target, Range("O2:O55")) Is Nothing Then Exit Sub
        For Each cell In Target
            icolor = 0
            Select Case cell
                Case "": icolor = 2

                Case Is <= Date + 30: icolor = 3 
                Case Is <= Date + 60: icolor = 45
                Case Is <= Date + 90: icolor = 6 
                Case Is > Date + 90: icolor = 2 

            End Select
            If icolor <> 0 Then cell.Interior.ColorIndex = icolor
        Next cell
    End Sub 
```

我怀疑我可以像这样合并两个 Worksheet_Change 事件：

```
Private Sub Worksheet_Change(ByVal Target As Range)
        CheckData Intersect(Target, Me.Range("C3:V65"))

        Application.ScreenUpdating = False
        Application.EnableEvents = False

        EventProc1 Target
        EventProc2 Target

        Application.EnableEvents = True
        Application.ScreenUpdating = True
    End Sub 
```

但是从这里开始，我不知道如何将 Sub EventProc1/2 转换为新的 CheckData 格式。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:18:48.580

正如您所说，您的代码没有任何问题，但是我制作了一些模组以使它们的格式与 the 相同，`checkdata`并且我更喜欢这些，因为您强制颜色的范围不是硬编码的：

```
Private Sub Worksheet_Change(ByVal Target As Range)            
    Application.ScreenUpdating = False
    Application.EnableEvents = False

    CheckData Intersect(Target, Me.Range("C3:V65"))

    EventProc1 Intersect(Target, Me.Range("L2:L55"))
    EventProc2 Intersect(Target, Me.Range("O2:O55"))

    Application.EnableEvents = True
    Application.ScreenUpdating = True
End Sub 
```

**事件过程1：**

```
Sub EventProc1 (rng As Range)
    Dim icolor As Integer
    Dim cell As Range

    If rng Is Nothing Then Exit Sub

    For Each cell In rng.Cells
        icolor = 0
            Select Case cell
                Case "": icolor = 2                    
                Case Is <= Date + 120: icolor = 3 
                Case Is <= Date + 180: icolor = 6 
                Case Is > Date + 180: icolor = 2           
            End Select
        If icolor <> 0 Then cell.Interior.ColorIndex = icolor
    Next cell
End Sub 
```

**事件过程2：**

```
Sub EventProc2 (rng As Range)
    Dim icolor As Integer
    Dim cell As Range

    If rng Is Nothing Then Exit Sub

    For Each cell In rng.Cells
        icolor = 0
            Select Case cell
                Case "": icolor = 2                    
                Case Is <= Date + 30: icolor = 3 
                Case Is <= Date + 60: icolor = 45
                Case Is <= Date + 90: icolor = 6 
                Case Is > Date + 90: icolor = 2            
            End Select
        If icolor <> 0 Then cell.Interior.ColorIndex = icolor
    Next cell
End Sub 
```

# javascript - 运行 EventSources 对服务器的影响

> ID：15870457
> 
> 赞同：6
> 
> 时间：2013-04-08T02:43:37.833
> 
> 标签：javascript, server-sent-events

我目前正在建立一个聊天只是为了好玩。我以前从未这样做过，而且我一般都尝试过[`EventSource API (Server-Sent Events)`](http://www.html5rocks.com/en/tutorials/eventsource/basics/)in `JavaScript`。大约 3 天前我才听说它，我觉得它很有趣，而且比设置`WebSocket`.

我知道长轮询会占用大量资源。但是，由于我从未听说过 EventSource，它对服务器有何影响？它是否使用相同数量的资源？

我注意到在 中`Networks Tab`，`Google Chrome Developers Tool`EventSource 确实创建了一个内容大小很大的请求（随着时间的推移）。有 1 个内容大小较大的请求会更好吗？

我的聊天目前正在运行两个 EventSource。一个用于聊天本身（运行 every `2500ms`）和用于聊天的“正在输入..”机制（运行 every `250ms`）。

在聊天大约一分钟后，两个请求的合并内容大小约为`150kb`. 不过，这将增加更多的消息。

我担心我的主人会暂停我的帐户。这就是我的一个使用轮询或长轮询的朋友发生的事情（我忘了）。我不确定 EventSource 使用的资源是否与轮询或长轮询一样多。

## 主要问题：EventSource 如何影响服务器？

*   它如何使用资源？
*   除了使用网络套接字之外还有什么更好的方法吗？
*   有 1 个请求会创建大量内容还是有多个请求携带少量数据更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-13T01:31:34.477

长轮询比 EventSource 使用更多的资源，因为它不断地建立和破坏连接。使用 EventSource，只使用单个连接，客户端正在等待数据，而不是检查服务器是否有新数据。

使用长轮询时，客户端将在以下情况下断开连接：

*   客户不想要更多数据
*   客户端刚刚收到它的数据
*   客户端等待数据超时

当服务器没有数据时，客户端会一直等到超时，直到服务器有数据。如果有数据，客户端断开连接并创建另一个连接。如果客户端超时，客户端将断开连接并建立另一个连接。因此，您可以从许多地方看到开销。

**长轮询**

*   如果需要数据，客户端将建立新连接
*   如果客户端超时，它会重新创建另一个连接
*   如果客户端收到信息，它会重新创建一个连接

**事件源**

*   客户端在与服务器连接时创建单个套接字
*   当客户端接收到数据时，保持连接并重用
*   由客户端使用带有标头的`GET`请求发起`Accept: text/event-stream`
*   遵守同源限制

**网络套接字**

*   客户端在与服务器连接时创建单个套接字
*   当客户端或服务器接收到数据时，保持连接并重用
*   `HTTP GET`使用带有`Upgrade: websocket`标头的请求启动
*   可以制作到任何来源（跨域）

* * *

**资源消耗：**

EventSource 的开销主要只是连接的存在。从这个意义上讲，它类似于 websockets，建立和维护单个连接。因此，由于持续的建立/销毁周期，您将使用长轮询获得最多的开销，来自 websockets 的第二大开销（因为它们是双向的），而来自单向的 EventSource 的开销最少。

**更好的选择：**

对于客户端和服务器之间的实时和双向通信，没有什么比 websocket 更好的了。这是客户端和服务器相互侦听数据而不是相互刺激数据的一种解决方案。

**上证所要求**

我认为您是在假设您认为 Chrome 中显示的内容是个人请求的情况下提出这个问题的。由于 EventSource 与服务器建立了一个套接字，因此您实际上是在读取通过 EventSource 套接字发送的累积数据量。因此，当您发送数据时，您正在重用相同的连接，您无需担心请求大小。

* * *

总之，大多数主机暂停轮询的原因是短轮询和长轮询都需要大量请求。如果您使用 EventSource 或 websockets，您使用的是使用套接字的实时通信，它不会向 HTTP 服务器“发送垃圾邮件”请求。（如果我发送了 100 个数据负载，EventSource 和 websockets 将使用相同的连接，长轮询将至少重新连接 100 次）您唯一需要注意的是服务器可以处理的最大并发连接数，因为套接字使用比轮询更少的 CPU 和资源。

需要考虑的有关 EventSource/SSE 的事项：

*   使用传统的 HTTP 协议，websockets 不使用
*   与 websockets 相比，浏览器支持较少，但对不支持的浏览器有 polyfills
*   内置了对重新连接和事件的支持
*   与 websocket 相比，协议更简单

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-12T06:42:02.210

要了解 SSE 对您的服务器的影响，您需要了解它们是如何工作的。我将首先解释一下长轮询，因为它是最接近的选择。

**长轮询**

使用长轮询，客户端向服务器发送请求，服务器保持它；如果它无话可说，它不会发送响应。对于您的聊天示例，您可以使用您收到的最新消息的 ID 发送请求，服务器将延迟发送响应，直到有新消息需要向您发送，此时响应被释放。

缺点是即使没有使用连接并且脚本正在运行（可能轮询数据库以获取新消息），连接也会保持活动状态。每次服务器向客户端发送内容时，您仍然需要一个新连接。

与常规轮询相比，优势在于流量大大减少，因为只有在有话要说时才会给出响应。

**服务器发送事件**

SSE 的工作方式与长轮询非常相似，因为它需要来自客户端的连接，并且只有在有话要说时才发送消息，但最大的区别是连接不会随着第一条消息关闭。显然，不必为每条消息建立新连接是一种胜利，不幸的是，服务器上的负面影响是相似的：连接保持活动状态，服务器脚本保持运行。优点是客户端只发送一个请求。

**网络套接字**

Web 套接字提供了真正的双向通信，但保持连接打开的原理是相同的。您可以从这里获得的优势是您可以按照您的意愿打包您的信息。

需要注意的一件事是，不同的服务器可以不同地处理这些情况。由于它专注于异步事件，无论您使用长轮询、SSE 还是 Web Sockets，NodeJS 似乎更适合作为聊天系统的服务器组件。

至于您的最后一个问题，这在很大程度上取决于您所处的情况以及“更好”的含义。如果更好的意思是更少的网络流量，那么大响应的开销应该比多个短响应少得多。

所以总结一下：

*   就 CPU 而言，与长轮询或 Web 套接字相比不是很大的优势/劣势，但在网络使用方面比长轮询有一些优势
*   如果您有时间处理额外的复杂性，网络套接字仍然是最好的
*   可能1个请求会更好

# ios - 如何将monkeytalk应用程序连接到IDE

> ID：15870462
> 
> 赞同：0
> 
> 时间：2013-04-08T02:44:29.140
> 
> 标签：ios, ide, monkeytalk

我通过代理库构建了一个与 MonkeyTalk（来自 Gorilla Logic）集成的 GUI 应用程序。

在 IDE 中，我也可以创建 .mt 文件。

但是，我不知道如何将monkeytalk应用程序连接到monkeytalk IDE。

谁能建议**如何将monkeytalk应用程序连接到IDE？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T13:47:43.670

首先，不清楚你想说什么。请提供更多信息，您遵循了哪些步骤以及每个步骤的错误或结果是什么。

我认为您错过了连接步骤，请看这里[https://www.gorillalogic.com/monkeytalk-documentation/monkeytalk-getting-started/connect-your-app](https://www.gorillalogic.com/monkeytalk-documentation/monkeytalk-getting-started/connect-your-app)。

如果没有工作。重新开始 在大猩猩逻辑站点中有一个关于设置过程的非常清晰的文档。[https://www.gorillalogic.com/monkeytalk-documentation/monkeytalk-getting-started/install-ide](https://www.gorillalogic.com/monkeytalk-documentation/monkeytalk-getting-started/install-ide)

请非常仔细地执行每一步，您一定会成功。

# stream - 延迟评估期间的记忆

> ID：15870466
> 
> 赞同：6
> 
> 时间：2013-04-08T02:44:43.440
> 
> 标签：stream, scheme, memoization, sicp, delayed-execution

[《计算机程序的结构和解释](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-4.html)》一书介绍了如下的记忆过程：

```
(define (memo-proc proc)
  (let ((already-run? false) (result false))
    (lambda ()
      (if (not already-run?)
          (begin (set! result (proc))
                 (set! already-run? true)
                 result)
         result)))) 
```

在建议延迟执行的定义时，`(delay <exp>)`be `(memo-proc (lambda () <exp>))`。可以使用以下过程强制延迟对象：

```
(define (force delayed-object)
  (delayed-object)) 
```

在给出这些定义的章节中，计算是使用流完成的。每个流都是一对，有一个头和一个延迟的尾。

但是，如果不使用查找表或某种其他类型的累积先前调用的数据结构，我看不到如何实现记忆化。

包含这些定义的章节在[这里](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-24.html#%_sec_3.5.1s.mit.edu/sicp/full-text/book/book-Z-H-24.html#%_sec_3.5.1)。

当我们使用各种参数来记忆单个过程时，查找表会很有用。然后，我们将参数作为键，将过程的结果作为值。在这种情况下，我们有空程序，因此我们不需要查找表。我们所需要的只是我们迄今为止创建的一组延迟对象。但是，这里使用了闭包。

根据`memo-proc`上面的定义，每个延迟对象实际上都是一个带有值的闭包`already-run?`和`result`，它们都被初始化为`false`。但是，由于调用中的每个延迟对象`proc`都有自己的闭包和自己的本地`already-run?`and `result`，因此修改它们不会更改调用树中的其他对象。因此，我觉得任何其他程序都不会再读取一个记忆值。

所以我的问题是，我在想什么错误或者对一切如何运作的正确解释是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T03:17:47.947

每个延迟对象在第一次被强制后存储自己的值；该值存储在`result`变量中。它之所以起作用，是因为在两者上`memo-proc`创建了一个闭包*——promise*（一个等待评估的无参数过程）和变量。`proc`*`result`*

 *在第一次强制对象后`result`返回存储的对象，并且不再重新计算。所以*承诺*变成了*价值*本身。

> 如果不使用查找表或某种其他类型的累积先前调用的数据结构，我看不到如何实现记忆化。

数据结构是围绕每个 Promise 创建的闭包，它在变量中累积第一次调用的值，并将其`result`返回给所有后续调用。

> 因此，我觉得任何其他程序都不会再读取一个记忆值

是的，每次`force`在 promise 对象上调用时都会读取它。*

# ios - 从下到上移动 UIView

> ID：15870479
> 
> 赞同：6
> 
> 时间：2013-04-08T02:46:03.470
> 
> 标签：ios, xcode, animation, uiview, uistoryboard

如何在我的代码上从下到上移动视图：

```
colorView.hidden=NO;
colorView=[[UIView alloc]init];
colorView.frame=CGRectMake(0,480,320, 480);
colorView.bounds=CGRectMake(0,200,320, 280);
colorView.backgroundColor=[UIColor greenColor];
colorView.alpha=1.0f;
[webView addSubview:colorView];
[self.view addSubview:webView];
[self createTransparentView]; 
```

那么如何在这里添加动画呢？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-08T04:53:47.767

最初，添加您的视图：

```
self.postStatusView.frame = CGRectMake(0, 490, 320, 460); 
```

对于从下到上的动画，请添加以下内容：

```
[UIView animateWithDuration:0.5
                      delay:0.1
                    options: UIViewAnimationOptionCurveEaseIn
                 animations:^{
                     self.postStatusView.frame = CGRectMake(0, 0, 320, 460);
                 } 
                 completion:^(BOOL finished){
                 }];
[self.view addSubview:self.postStatusView]; 
```

用于移除视图

```
[UIView animateWithDuration:1.5
                              delay:0.5
                            options: UIViewAnimationOptionCurveEaseIn
                         animations:^{
    self.postStatusView.frame = CGRectMake(0, 490, 320, 460);
                         }
                         completion:^(BOOL finished){
                             if (finished)
                                 [self.postStatusView removeFromSuperview];
                         }]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-21T04:56:54.417

```
self.colorView.frame = CGRectMake(0, 490, 320, 460);

[UIView animateWithDuration:0.5
                 delay:0.1
                options: UIViewAnimationCurveEaseIn
             animations:^{
                 self.colorView.frame = CGRectMake(0, 0, 320, 460);
             } 
             completion:^(BOOL finished){
             }];
[self.view addSubview:self.colorView];

[UIView animateWithDuration:1.5
                          delay:0.5
                        options: UIViewAnimationCurveEaseIn
                     animations:^{
self.colorView.frame = CGRectMake(0, 490, 320, 460);
                     }
                     completion:^(BOOL finished){
                             [self.colorView removeFromSuperview];
                     }]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-31T07:46:45.913

```
self.tableView.frame = CGRectMake(0, 490, [[UIScreen mainScreen] bounds].size.width, [[UIScreen mainScreen] bounds].size.height);

[UIView animateWithDuration:.35
                      delay:0.0
                    options:  UIViewAnimationOptionCurveEaseInOut
                 animations:^{
                     self.tableView.frame = CGRectMake(0, -20, [[UIScreen mainScreen] bounds].size.width, [[UIScreen mainScreen] bounds].size.height);
                 }
                 completion:^(BOOL finished){
                     [UIView animateWithDuration:0.1   delay:0.0
                      options:  UIViewAnimationOptionCurveEaseInOut   animations:^{

                         self.tableView.frame = CGRectMake(0, 20, [[UIScreen mainScreen] bounds].size.width , [[UIScreen mainScreen] bounds].size.height);

                     } completion:^(BOOL finished){

                         [UIView animateWithDuration:0.1   delay:0.0
                          options:  UIViewAnimationOptionCurveEaseInOut animations:^{

                              self.tableView.frame = CGRectMake(0, 0, [[UIScreen mainScreen] bounds].size.width, [[UIScreen mainScreen] bounds].size.height);

                         } completion:^(BOOL finished){

                }];
        }];
 }]; 
```

# shell - 如何在 bash shell 中将日期时间字符串转换为整数

> ID：15870480
> 
> 赞同：2
> 
> 时间：2013-04-08T02:46:05.163
> 
> 标签：shell

给定一个像 '2013-04-06' 这样的字符串，我想像在 Java 中那样将它转换为整数。我不知道如何在 bash shell 中执行此操作。有人知道该怎么做吗？谢谢帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T02:52:46.870

```
date --date="Wed Mar 13 00:18:06 2013" '+%s'
date --date="2013-04-06" '+%s' 
```

仅适用于 gnu 日期。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T02:52:20.673

要获得秒和纳秒，您可以使用 date 命令。

```
date -d "2013-04-06" "+%s.%N"

1365224400.000000000 
```

您可以调整格式并截断输出，例如，省略小数并仅使用纳秒的前三个字符来提供毫秒。

```
date -d "2013-04-06" "+%s%N" | cut -b1-13

1365224400000 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T03:03:16.563

由于没有具体提及与 Java 的互操作性，您可以考虑简单地从您的值中删除破折号和其他字符以获得与您的值一致的整数。

假设在必要时存在前导零（并且它们在您的示例中），这将为您提供符合日期和时间总顺序关系的数字，并且可以说它比 Java 相当随意的“自 1970 年以来的毫秒数”更好. 此外，这是人类可读的，它实际上是[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)标准格式的日期。

而且，要获得完整的答案：

```
date_time="2013-04-06 00:00:01"
integer=$(echo "$date_time" | sed 's/[^0-9]//g') 
```

# php - 在 TYPO3 Fluid 中显示按年和月分组的元素列表

> ID：15870481
> 
> 赞同：2
> 
> 时间：2013-04-08T02:46:05.673
> 
> 标签：php, typo3, fluid, extbase

我有一个模型，其中一个字段是日期。我想显示该模型中的元素，按年份和月份分组，如下所示：

```
== 2013 ==
=== April ===
* Element 1
* Element 2
=== March ===
* Element 3
...
== 2012 ==
... 
```

如果实现这一目标的最佳方法是什么？我应该直接在控制器中构建一个嵌套数组吗？或者有没有办法只使用 Fluid 模板来显示年月标题？或者我应该编写一个自定义 ViewHelper 来提取和显示年份和月份标题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T03:12:46.740

最后，我通过使用自定义 ViewHelper 解决了这个问题，该 ViewHelper 源自 GroupedBy ViewHelper，灵感来自[https://gist.github.com/daKmoR/1287203](https://gist.github.com/daKmoR/1287203)，并适用于 extbase。

* * *

这是 ViewHelper 的完整代码，位于 MyExt/Classes/ViewHelpers/GropuedForDateTimeViewHelper.php

```
<?php
namespace vendor\MyExt\ViewHelpers;

/*                                                                        *
 * This script belongs to the FLOW3 package "Fluid".                      *
 *                                                                        *
 * It is free software; you can redistribute it and/or modify it under    *
 * the terms of the GNU Lesser General Public License as published by the *
 * Free Software Foundation, either version 3 of the License, or (at your *
 * option) any later version.                                             *
 *                                                                        *
 * This script is distributed in the hope that it will be useful, but     *
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHAN-    *
 * TABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser       *
 * General Public License for more details.                               *
 *                                                                        *
 * You should have received a copy of the GNU Lesser General Public       *
 * License along with the script.                                         *
 * If not, see http://www.gnu.org/licenses/lgpl.html                      *
 *                                                                        *
 * The TYPO3 project - inspiring people to share!                         *
 *                                                                        */

/**
 * Grouped loop view helper for Datetime values.
 * Loops through the specified values
 *
 * = Examples =
 *
 * <code title="Simple">
 * // $items = array(
 * //   array('name' => 'apple', 'start' => DateTimeObject[2011-10-13 00:15:00]), 
 * //   array('name' => 'orange', 'start' => DateTimeObject[2011-12-01 00:10:00]),
 * //   array('name' => 'banana', 'start' => DateTimeObject[2008-05-24 00:40:00])
 * // );
 * <a:groupedForDateTime each="{items}" as="itemsByYear" groupBy="start" format="Y" groupKey="year">
 *   {year -> f:format.date(format: 'Y')}
 *   <f:for each="{itemsByYear}" as="item">
 *     {item.name}
 *   </f:for>
 * </a:groupedForDateTime>
 * </code>
 *
 * Output:
 * 2011
 *   apple
 *   orange
 * 2010
 *   banana
 *
 * @license http://www.gnu.org/licenses/lgpl.html GNU Lesser General Public License, version 3 or later
 * @api
 */
class GroupedForDateTimeViewHelper extends \TYPO3\CMS\Fluid\Core\ViewHelper\AbstractViewHelper {

    /**
     * Iterates through elements of $each and renders child nodes
     *
     * @param array $each The array or Tx_Extbase_Persistence_ObjectStorage to iterated over
     * @param string $as The name of the iteration variable
     * @param string $groupBy Group by this property
     * @param string $groupKey The name of the variable to store the current group
     * @param string $format The format for the datetime
     * @param string $dateTimeKey The name of the variable to store the current datetime
     * @throws \TYPO3\CMS\Fluid\Core\ViewHelper\Exception
     * @return string Rendered string
     * @author Bastian Waidelich <bastian@typo3.org>
     * @author Thomas Allmer <at@delusionworld.com>
     * @api
     */
    public function render($each, $as, $groupBy, $groupKey = 'groupKey', $format = '', $dateTimeKey = 'dateTimeKey') {
        $output = '';
        if ($each === NULL) {
            return '';
        }

        if (is_object($each)) {
            if (!$each instanceof \Traversable) {
                throw new \TYPO3\CMS\Fluid\Core\ViewHelper\Exception('GroupedForViewHelper only supports arrays and objects implementing Traversable interface' , 1253108907);
            }
            $each = iterator_to_array($each);
        }

        $groups = $this->groupElements($each, $groupBy, $format);

        foreach ($groups['values'] as $currentGroupIndex => $group) {
            $this->templateVariableContainer->add($groupKey, $groups['keys'][$currentGroupIndex]);
            $this->templateVariableContainer->add($dateTimeKey, $groups['dateTimeKeys'][$currentGroupIndex]);
            $this->templateVariableContainer->add($as, $group);
            $output .= $this->renderChildren();
            $this->templateVariableContainer->remove($groupKey);
            $this->templateVariableContainer->remove($dateTimeKey);
            $this->templateVariableContainer->remove($as);
        }
        return $output;
    }

    /**
     * Groups the given array by the specified groupBy property and format for the datetime.
     *
     * @param array $elements The array / traversable object to be grouped
     * @param string $groupBy Group by this property
     * @param string $format The format for the datetime
     * @throws \TYPO3\CMS\Fluid\Core\ViewHelper\Exception
     * @return array The grouped array in the form array('keys' => array('key1' => [key1value], 'key2' => [key2value], ...), 'values' => array('key1' => array([key1value] => [element1]), ...), ...)
     * @author Bastian Waidelich <bastian@typo3.org>
     */
    protected function groupElements(array $elements, $groupBy, $format) {
        $groups = array('keys' => array(), 'values' => array());
        foreach ($elements as $key => $value) {
            if (is_array($value)) {
                $currentGroupIndex = isset($value[$groupBy]) ? $value[$groupBy] : NULL;
            } elseif (is_object($value)) {
                $currentGroupIndex = \TYPO3\CMS\Extbase\Reflection\ObjectAccess::getPropertyPath($value, $groupBy);
            } else {
                throw new \TYPO3\CMS\Fluid\Core\ViewHelper\Exception('GroupedForViewHelper only supports multi-dimensional arrays and objects' , 1253120365);
            }
            if (strpos($format, '%') !== FALSE) {
                $formatedDatetime = strftime($format, $currentGroupIndex->format('U'));
            } else {
                $formatedDatetime = $currentGroupIndex->format($format);
            }
            $groups['dateTimeKeys'][$formatedDatetime] = $currentGroupIndex;

            if (strpos($format, '%') !== FALSE) {
                $currentGroupIndex = strftime($format, $currentGroupIndex->format('U'));
            } else {
                $currentGroupIndex = $currentGroupIndex->format($format);
            }

            $currentGroupKeyValue = $currentGroupIndex;
            if (is_object($currentGroupIndex)) {
                $currentGroupIndex = spl_object_hash($currentGroupIndex);
            }
            $groups['keys'][$currentGroupIndex] = $currentGroupKeyValue;
            $groups['values'][$currentGroupIndex][$key] = $value;
        }
        return $groups;
    }
}

?> 
```

* * *

这是一个使用它的模板示例：

```
{namespace m=vendor\MyExt\ViewHelpers}
<f:layout name="Default" />
<f:section name="main">

    <m:groupedForDateTime each="{myitems}" as="myitemsyear" groupBy="date" format="%Y" groupKey="year" dateTimeKey="yearKey">
        <h2>{year}</h2>
        <m:groupedForDateTime each="{myitemsyear}" as="myitemsmonth" groupBy="date" format="%B" groupKey="month" dateTimeKey="monthKey">
            <h3>{month}</h3>
            <ul>
            <f:for each="{myitemsmonth}" as="myitem">
                <li>{myitem}</li>
            </f:for>
            </ul>
        </m:groupedForDateTime>
    </m:groupedForDateTime>
</f:section> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T04:16:48.963

首先，您需要在控制器中迭代您的结果集，将其保存到数组中，并确保每一行都提取了日期以分隔索引`year`和`month`。

在这种情况下，您将能够使用`<f:groupedFor ...>`视图助手。

其他选项是将这些字段（`year`和`month`）添加到您的模型中，并在保存/更新对象时设置适当的值。使用这种方法，您将避免上面提到的控制器迭代的需要，buuuutttt...如果您要使用常见的 TYPO3 后端访问这些记录，您将需要使用一些后处理钩子在数据库操作后设置这些字段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-21T10:09:02.137

此处未正确添加的简单解决方案是：

对于年份和月份分组，将字段作为瞬态添加到您的模型中：

```
...
/**
 * @var int
 * @transient
 */
protected $year;

/**
 * @var int
 * @transient
 */
protected $month;
/**
 * @return int
 */
public function getYear()
{
    if (!$this->year) {
        $this->year = $this->getDateTimeField()->format('Y');
    }
    return $this->year;
}

/**
 * @return int
 */
public function getMonth()
{
    if (!$this->month) {
       $this->month = $this->getDateTimeField('n');
    }
    return $this->month;
} 
```

然后在模板中：

```
<f:groupedFor each="{list}" as="groupedByYear" groupBy="year" groupKey="groupYear">
    <f:groupedFor each="{groupedByYear}" as="groupedByMonth" groupBy="month" groupKey="groupMonth" />
        ...
    </f:groupedFor>
</f:groupedFor> 
```

# ruby-on-rails - auto_explain_threshold_in_seconds

> ID：15870483
> 
> 赞同：7
> 
> 时间：2013-04-08T02:46:21.533
> 
> 标签：ruby-on-rails

我在运行 WEBrick 时收到以下消息。

> auto_explain_threshold_in_seconds 已设置但将被忽略，因为您的适配器不支持此功能。请取消设置配置以避免此警告。

我在用：

> 宝石'rails'，'3.2.13'
> 宝石'mysql'
> 
> WEBrick 1.3.1
> ruby​​ 1.9.3 (2013-02-22) [i386-mingw32]

有人可以帮助我知道 - 为什么我会得到这个以及如何解决它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T17:11:13.617

我今天在升级到 3.2 的 Rails 3 应用程序中遇到了这个错误消息。

> 配置/环境/development.rb

注释掉这一行，它将起作用：

```
config.active_record.auto_explain_threshold_in_seconds = 0.5 
```

在那条线上它说：

```
 # Log the query plan for queries taking more than this (works
  # with SQLite, MySQL, and PostgreSQL) 
```

我使用的是 MySQL，所以我真的不知道它为什么会抛出错误。希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T18:07:52.890

如前所述，您可以注释掉配置，错误就会消失，但它试图告诉您您的查询速度很慢，您可能想知道那里发生了什么。

如果您尝试使用 mysql2 gem 而不是 mysql gem，它应该可以工作。

这似乎是[#<ActiveRecord::ConnectionAdapters::MysqlAdapter 的未定义方法“解释”的副本](https://stackoverflow.com/questions/9057863/undefined-method-explain-for-activerecordconnectionadaptersmysqladapter)

更新：正如@twelve17 所指出的，日志中存在此消息并不意味着您的查询速度很慢，而是您的适配器不支持当您确实有一个慢速查询时用于告诉您的机制。我应该说“你不想只是关闭这个功能，你可能想使用 mysql2 gem，这样你就可以看到什么时候出现慢查询”

# ios - presentViewController 导致崩溃

> ID：15870484
> 
> 赞同：1
> 
> 时间：2013-04-08T02:46:22.493
> 
> 标签：ios, objective-c, ipad, ios6

我正在使用 cocos2d 开发一个 iPad 应用程序，我正在尝试从库中选择一张图片，或者使用相机拍照，以便在应用程序中使用。昨天和今天，我整天都在疯狂地搜索，试图拼凑一些东西来完成上述工作，但我可能应该首先承认我真的不知道自己在做什么。

我现在的工作方式是，您点击当前用户图像，它会弹出一个菜单，询问您是否要从相机或库上传不同的图片。选择相机调用如下（和库版本基本相同）：

```
- (void) onGetCameraImage
{
    UIImagePickerController* imagePicker = [[UIImagePickerController alloc] init];
    imagePicker.delegate = self;
    imagePicker.allowsEditing = NO;

    imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
    [imagePicker presentViewController:[CCDirector sharedDirector] animated:YES completion:NULL];
} 
```

当我尝试对此进行测试时（当然，选择库，因为模拟器不能做摄像头，是的，我确实打算实现对没有摄像头的检查），我得到以下崩溃：

```
2013-04-07 19:21:50.248 prototype1[20897:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Application tried to present modally an active controller <UIImagePickerController: 0x9e87ac0>.' 
```

我认为它在`presentViewController`调用时崩溃了，但是我很难找出我做错了什么，因为所有教程和 stackoverflow 答案都使用了已弃用的模态函数调用！我怀疑我只是在我以前的代码中做各种疯狂的 BS？无论哪种方式，我都不知道如何让我的代码工作。

很多代码都是从堆栈溢出中收集的，所以我不能保证其中任何一个的敏感性——我对 iOS 编码很陌生，基本上是被扔到这个项目中的，我们只是想让它工作. 请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:55:22.190

是的，这里似乎有些不对劲。为了在实例化时实现您的目标，`UIImagePickerController`您通常希望当前视图控制器呈现您的图像选择器实例。发生崩溃是因为：

1.  你是在告诉 imagepicker 展示来自 Cocos2D 的东西
2.  该`UIImagePickerController`视图甚至还没有出现在屏幕上

您可以访问视图控制器吗？

如果是这样，您可以简单地执行以下操作：

```
[self presentViewController:imagePicker animated:YES completion:nil]; 
```

`self`的某个子类在哪里`UIViewController`。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:09:10.153

只需更改最后一行如下所示

```
 [imagePicker presentViewController: imagePicker animated:YES completion:nil]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T03:59:10.487

还有一件事，在设置之前

```
imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera 
```

您必须检查源类型是否可用。

```
if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
UIImagePickerController *imagePicker =
[[UIImagePickerController alloc] init];

imagePicker.delegate = self;

imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;

imagePicker.allowsEditing = YES;

[self presentModalViewController:imagePicker animated:YES];

[imagePicker release];

 }

 else
 {
 //.....
 } 
```

# c# - 在 DevExpress C# 中跟踪 GridControl 中的行更改

> ID：15870488
> 
> 赞同：1
> 
> 时间：2013-04-08T02:46:46.620
> 
> 标签：c#, winforms, devexpress, devexpress-windows-ui

我有一个问题，我一直在努力解决这个问题太久了，我似乎无法找到解决方案。

我们正在使用 DevExpress，我们有一个基于消息的架构，它可以发送消息，让系统的其他组件知道特定的变化。

我们的大部分应用程序都围绕着对绑定到 DataTable 对象的网格控件所做的更改。

我们需要调度的更重要的消息之一是当我们的网格控件上的行发生更改时。因此，如果行上的任何值发生变化，我们希望发送一条带有旧行值和新行值的消息，这样我们就有了新旧记录。我们希望在行失去焦点时发生这种情况，而不是在任何值立即更改之后发生。这样有人可以在发送消息之前更改整行。

我正在使用的当前解决方案不起作用，甚至不值得解释。

本质上，我需要为旧行和新行获取行值和列名的键/值列表。

我不确定如何在 DevExpress 中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-20T20:41:47.103

一个想法是使用 DevExpress 网格提供的行索引。一旦你有了改变行的行索引，你可以使用它做任何你想做的事情（转换成一个对象，保存存储在行中的数据，突出显示行等）使用这个行索引。这是您访问网格中选定行的索引的方式：

```
List<int> rowHandles = gridView.GetSelectedRows().ToList(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T11:26:48.350

您可以使用 DataTable 中的数据创建一个 BindingList。然后，您需要一个新类，每个对象代表 DataTable 中的一个 Row。然后将每个对象添加到 BindingList 并将其用作 DataSource。现在 BindingList.ListChanged 事件将触发网格中的每个更改值。它使您可以访问旧值和新值。也许您必须在您的类中实现 INotifyPropertyChanged 接口才能知道单元格是否已更改。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-08T16:59:47.150

我认为您应该使用 aspxgridview.rowupdating 事件，该事件将通过属性 e.OldValues 和 e.NewValues 为您提供旧值和新值。

因此，您可以同时拥有记录的值。

有关更详细的说明，我建议您访问以下链接：（希望对您有所帮助）

[http://www.devexpress.com/Support/Center/Question/Details/Q314701](http://www.devexpress.com/Support/Center/Question/Details/Q314701)

[http://www.devexpress.com/Support/Center/Question/Details/Q261712](http://www.devexpress.com/Support/Center/Question/Details/Q261712)

[http://www.devexpress.com/Support/Center/Question/Details/Q293847](http://www.devexpress.com/Support/Center/Question/Details/Q293847)

[http://www.devexpress.com/Support/Center/Question/Details/Q350500](http://www.devexpress.com/Support/Center/Question/Details/Q350500)

[http://www.devexpress.com/Support/Center/Question/Details/B202180](http://www.devexpress.com/Support/Center/Question/Details/B202180)

# pygame - Pygame 不工作

> ID：15870490
> 
> 赞同：1
> 
> 时间：2013-04-08T02:47:00.607
> 
> 标签：pygame

```
while done == False:
    for event in py.event.get():
        if event.type == py.QUIT:
            done = True
        elif event.type == KEYDOWN:
            if event.key == K_UP:
                player_y += 1 
```

这是我的代码，我的调试器一直说 KEYDOWN 没有定义。请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T02:49:47.413

将其包含在代码的顶部：

```
from pygame import KEYDOWN, K_UP 
```

添加更多键，例如，`K_LEFT, K_RIGHT, K_UP, K_DOWN, K_e`如果您喜欢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T21:59:15.767

完整的通话是`pygame.KEYDOWN`等

而不是手动输入您需要的那些，只需将其添加到您的`import pygame`行下方`from pygame.locals import *`，这应该适用于您需要的所有键。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-11-17T17:27:53.090

将此包含在您的代码中，否则将无法正常工作

```
while done == False:
    for event in py.event.get():
        if event.type == py.QUIT:
            done = True
        if event.type == py.KEYDOWN:
            if event.key == py.K_UP:
                player_y += 1 
```

# java - Android 从 url.xml 拉解析器

> ID：15870491
> 
> 赞同：0
> 
> 时间：2013-04-08T02:47:08.810
> 
> 标签：java, android, xmlpullparser, android-pullparser

我已经搜索了两天，我可能已经看到了可以解决我的问题的解决方案，尽管我还没有找到我理解的解决方案。

我正在关注本教程 -[简单 XMLPullParser 教程](http://theopentutorials.com/tutorials/android/xml/android-simple-xmlpullparser-tutorial/)

我知道我需要改变的两个领域是

这里**1**

```
public List<Employee> parse(InputStream is) {
    XmlPullParserFactory factory = null;
    XmlPullParser parser = null;
    try {
        factory = XmlPullParserFactory.newInstance();
        factory.setNamespaceAware(true);
        parser = factory.newPullParser();

        parser.setInput(is, null);

        int eventType = parser.getEventType(); 
```

在这里**2**

```
 List<Employee> employees = null;
    try {
        XMLPullParserHandler parser = new XMLPullParserHandler();
        employees = parser.parse(getAssets().open("employees.xml")); 
```

这是来自工作示例，下面是我想要实现的，删除它

> 雇员 = parser.parse(getAssets().open("employees.xml"));

我试图得到类似的东西

> URL url=new URL(" [http://www.example.xml](http://www.example.xml) ");
> 
> URLConnection 连接 = url.openConnection();
> 
> InputStream in = connection.getInputStream();
> 
> 员工 = parser.parse(in);

第一部分我不太确定要更改什么，第二部分我知道我需要添加 url，并打开一个连接。然后更改 employees = parser... 行，但到目前为止还没有运气获得有效的响应。

我添加了 android.permission.INTERNET。

我还在 assets 文件夹中添加了自己的 XML 文件，这是我要解析的 url 的副本，效果很好。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:50:44.517

请在此处查看我的答案。[Android：XmlpullParser 异常](https://stackoverflow.com/questions/6411577/android-xmlpullparser-exception/14938461#14938461)

另外，请确保在

```
 XmlUtils.beginDocument(parser,"results"); 
```

“结果”是您的 xml 的第一个节点名称。在您的情况下，它可能是“员工”

此外，对于网络相关的服务，可能无法通过主 UI 线程访问。

请使用 AsyncTask 并在 doInBackground() 方法中添加您的方法。

```
 private class DownloadFilesTask extends AsyncTask<String, Void, String> {
 protected Long doInBackground(String... urls) {
   //put your xml parsing code here.
 }

 protected void onProgressUpdate(Integer... progress) {
     setProgressPercent(progress[0]);
 }

 protected void onPostExecute(Long result) {
     showDialog("Downloaded " + result + " bytes");
 }
} 
```

# python - 在 python 上使用 gnome-screensaver-command

> ID：15870493
> 
> 赞同：0
> 
> 时间：2013-04-08T02:47:14.683
> 
> 标签：python, ubuntu-12.04, gnome

我有以下代码来检查屏幕是否被锁定（使用 gnome-screensaver）

```
gnome-screensaver-command -q | grep "is active" 
```

在此链接中，[https://askubuntu.com/questions/17679/how-can-i-put-the-display-to-sleep-on-screen-lock](https://askubuntu.com/questions/17679/how-can-i-put-the-display-to-sleep-on-screen-lock)有一个关于在 shell 脚本上使用它的代码。但是如何在 python 中使用代码呢？并将其存储在一个变量中，无论它是否处于活动状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T21:29:20.540

你也可以通过[D-Bus](http://www.freedesktop.org/wiki/Software/dbus/)与 gnome-screensaver 对话：

```
import dbus

def screensaver_active():
    bus = dbus.SessionBus()
    screensaver = bus.get_object('org.gnome.ScreenSaver', '/')
    return bool(screensaver.GetActive())

variable = screensaver_active() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-12T05:18:42.783

```
import dbus

def screensaver_status():
    session_bus = dbus.SessionBus()
    screensaver_list = ['org.gnome.ScreenSaver',
                        'org.cinnamon.ScreenSaver',
                        'org.kde.screensaver',
                        'org.freedesktop.ScreenSaver']
    for each in screensaver_list:
        try:
            object_path = '/{0}'.format(each.replace('.', '/'))
            get_object = session_bus.get_object(each, object_path)
            get_interface = dbus.Interface(get_object, each)
            return bool(get_interface.GetActive())
        except dbus.exceptions.DBusException:
            pass

status = screensaver_status()
print(status) 
```

这会捕获所有屏幕保护程序，而不仅仅是 Gnome。它也不会通过使用类似的东西来阻止

```
*-screensaver-command 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T06:16:29.330

您可以使用 Python 在 Python 中执行 shell 命令[`subprocess`](http://docs.python.org/2/library/subprocess.html)，然后 grep 它的 stdout for `is active`line：

```
def isScreenLocked():
    import subprocess
    com = subprocess.Popen(['gnome-screensaver-command', '-q'], stdout = subprocess.PIPE, stderr = subprocess.PIPE)
    return "is active" in com.communicate()[0] 
```

# c - 如何从 C 中以“\n”分隔的数字的文件中读取

> ID：15870494
> 
> 赞同：-3
> 
> 时间：2013-04-08T02:47:16.917
> 
> 标签：c

我正在编写一个关于***现金管理系统***的程序，但我一直在处理文件。它是一个很长的程序，使用函数将其分解成小块。

问题是我正在创建一个文件，该文件将保留收到的现金记录，我已成功存储数据，并且已使用这些代码创建了文件，现在我想使用**函数**读取文件的数据**C**

```
#include<fstream.h>
#include<iostream.h>
#include<graphics.h>
#include<conio.h>
#include<stdio.h>
void main()
{
 unsigned long long amt=0;
 char ch;
 do
 {
  clrscr();
  int c=0,i=0,gd=DETECT, gm, x=10, y=52, font = 8;
  initgraph(&gd,&gm,"C:\\TC\\BGI");
  settextstyle(font, HORIZ_DIR, 1);
  for (i=0;i<158;i++)
  {
   printf("_");
  }
  outtextxy(x, y, "The amount of Cash Tendered : ");
  gotoxy(48,5);
  scanf("%llu",&amt);
  FILE *fp;
  fp=fopen("TRECIEPT.TXT","a+");
  while((c=getc(fp))!=EOF);
  fprintf(fp,"%llu",amt);
  fprintf(fp,"\n");
  cout<<"\n Do you want to enter more records: ";
  cin>>ch;
 }
 while (ch=='Y' || ch=='y');
 getch();
} 
```

**主要代码是**

```
#include<graphics.h>
#include<conio.h>
#include<stdio.h>
#include<stdlib.h>

static int den[9]={1000,500,100,50,20,10,5,2,1};

int ch=0;

void cash_management();
//void open_cash();
void transaction();
void total_reciept();
void total_payment();
//void closing_cash();
//void reciept();
//void payment();
//void exchange();

void main()
{
 clrscr();
 cash_management();
}

void cash_management()
{
 clrscr();
 int i=0, gd=DETECT, gm, x=33, y=33, font = 10;
 initgraph(&gd,&gm,"C:\\TC\\BGI");
 settextstyle(font, HORIZ_DIR, 1);
 for (i=0;i<160;i++)
 {
  printf("_");
 }
 outtextxy(x, y, "Welcome To Cash Management System");
 printf("\n\n\n");
 for (i=0;i<160;i++)
 {
  printf("_");
 }
 font=7;
 y=y+100;
 x=70;
 settextstyle(font, HORIZ_DIR, 1);
 outtextxy(x, y, "1). Opening Cash Denomination");
 y=y+30;
 outtextxy(x, y, "2). Transactions");
 y=y+30;
 outtextxy(x, y, "3). Total Recipts");
 y=y+30;
 outtextxy(x, y, "4). Total payments");
 y=y+30;
 outtextxy(x, y, "5). Closing Cash Denomination");
 y=y+30;
 outtextxy(x, y, "6). Exit");
 printf("\n\n\n\n\n\n\n\n\n\n\n\n\n");
 for (i=0;i<160;i++)
 {
  printf("_");
 }
 x=190;
 y=y+74;
 font=6;
 settextstyle(font, HORIZ_DIR, 1);
 outtextxy(x, y, "Enter option to perform => ");
 gotoxy (52,24);
 do
 {
  scanf("%d",&ch);
 }
 while (ch<1 || ch>6);
 switch (ch)
 {
  case 1:
     {
      printf("case 1"); //open_cash();}
      break;
     }
  case 2:
     {
      transaction();
     }
  case 3:
     {
      total_reciept();
      break;
     }
  case 4:
    {
     total_payment();
     break;
    }
  case 5:
    {
     printf("case 5");//closing_cash();
     break;
    }
  case 6:
    {
     exit(0);
    }
 }
}

void transaction()
{
 clrscr();
 int i=0, j=0, gd=DETECT, gm, x=200, y=33, font = 10;
 initgraph(&gd,&gm,"C:\\TC\\BGI");
 settextstyle(font, HORIZ_DIR, 1);
 for (i=0;i<2;i++)
 {
  printf("\t\t\t");
  for (j=0;j<24;j++)
  {
   printf("_");
  }
  printf("\n");
 }
 outtextxy(x, y, "Transactions");
 printf("\n\n\n");
 for (i=0;i<2;i++)
 {
  printf("\t\t\t");
  for (j=0;j<24;j++)
  {
   printf("_");
  }
  printf("\n");
 }
 x=33;
 font=8;
 settextstyle(font, HORIZ_DIR, 1);
 y=y+100;
 outtextxy(x, y, "1). Reciept");
 y=y+30;
 outtextxy(x, y, "2). Payment");
 y=y+30;
 outtextxy(x, y, "3). Exchange");
 y=y+30;
 outtextxy(x, y, "4). Back");
 printf("\n\n\n\n\n\n\n\n\n");
 for (i=0;i<160;i++)
 {
  printf("_");
 }
 y=y+73;
 outtextxy(x, y, "Enter option to perform =>  ");
 gotoxy(42,20);
 do
 {
  scanf("%d",&ch);
 }
 while(ch<1 || ch>6);
 switch (ch)
 {
  case 1:
     {
      printf("case 1");
//    reciept();
      break;
     }
   case 2:
     {
      printf("case 2");
   //     payment();
      break;
     }
   case 3:
     {
      printf("case 3");
   //     exchange();
      break;
     }
   case 4:
     {
      cash_management();
      break;
     }
  }
}

void total_reciept()
{
 unsigned long long amt=0,t_amt=0;
 clrscr();
 int c=0,i=0,gd=DETECT, gm, x=10, y=52, font = 8;
 initgraph(&gd,&gm,"C:\\TC\\BGI");
 settextstyle(font, HORIZ_DIR, 1);
 for (i=0;i<158;i++)
 {
  printf("_");
 }
 outtextxy(x, y, "The Amount of Cash Tendered are : ");
 gotoxy(48,6);
 FILE *fp;
 fp=fopen("TRECIEPT.TXT","a+");
 i=1;
 while((c=getc(fp))!=EOF)
 {
  fscanf(fp,"%llu",&amt);
  printf("\n %d",i);
  printf("   %llu",amt);
  t_amt=t_amt+amt;
  i++;
 }
 printf("\n\n The Total Amount of cash tendered is:  %llu",t_amt);
 getch();
 cash_management();
}

void total_payment()
{
 unsigned long long amt=0,t_amt=0;
 clrscr();
 int c=0,i=0,gd=DETECT, gm, x=10, y=52, font = 8;
 initgraph(&gd,&gm,"C:\\TC\\BGI");
 settextstyle(font, HORIZ_DIR, 1);
 for (i=0;i<158;i++)
 {
  printf("_");
 }
 outtextxy(x, y, "The Amount of Cash Paid are : ");
 gotoxy(48,6);
 FILE *fp;
 fp=fopen("TPAYMENT.TXT","a+");
 i=1;
 while((c=getc(fp))!=EOF)
 {
  fscanf(fp,"%llu",&amt);
  printf("\n %d",i);
  printf("   %llu",amt);
  t_amt=t_amt+amt;
  i++;
 }
 printf("\n\n The Total Amount of cash Paid is:  %llu",t_amt);
 getch();
 cash_management();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:04:05.473

`<fstream.h>`并且`<iostream.h>`在 C 中不存在。它们是旧式 C++ 头文件。如果您使用 C，请不要使用它们。

您所需要的只是`fscanf`函数，它是`<stdio.h>`. 就像是：

```
fscanf(fp, "%llu", &amt); 
```

格式化程序（或任何其他读取数字的`%u`格式化程序）将吃掉数字之前的任何行尾、制表符、空格和其他空格。

# greenfoot - 如何删除Greenfoot中的行？

> ID：15870498
> 
> 赞同：1
> 
> 时间：2013-04-08T02:47:34.180
> 
> 标签：greenfoot

我用drawLine()方法画线，现在想删除线，怎么办？我在Greenfoot API中找不到任何方法。请帮助！

```
import greenfoot.*;  // (World, Actor, GreenfootImage, Greenfoot and MouseInfo) 
import java.awt.Color;
import java.lang.Thread;
/**
 * Write a description of class pen here.
 * 
 * @author (your name) 
 * @version (a version number or a date)
 */
public class pen extends Actor
{
    /**
     * Act - do whatever the pen wants to do. This method is called whenever
     * the 'Act' or 'Run' button gets pressed in the environment.
     */
    private TestWorld world;
    private GreenfootImage image;
    public pen()
    {

    }
    public void act() 
    {
        // Add your action code here.
        try{
            Thread.sleep(5000);
           }catch(Exception e){}
        world=(TestWorld)this.getWorld();
        image=world.getBackground();
        image.setColor(Color.RED);
        image.drawLine(0,0,getX(),getY());
    }    

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-12-20T11:41:17.657

你可以这样做：

```
public int[][] lines = {
    {10,10,100,20},
    {10,10,40,40}
};

public void drawBackground(){
    world=(TestWorld)this.getWorld();

    GreenfootImage img = new GreenfootImage(world.getWidth(), world.getHeight());
    for(int[] x : lines){
        img.setColor(new Color(10,255,20));
        img.drawLine(x[0],x[1],x[2],x[3]);
    }
    world.setBackground(img);
} 
```

您每次都绘制一个新图像并将其设置为您的世界的背景。如果您现在想要更改某些内容，您可以调整行数组中的值并调用函数“drawBackground()”。更好的是：使用 List 而不是数组。使用和调整值更容易。

# jquery - jQuery Autocomplete 下拉菜单也显示正在输入的内容

> ID：15870500
> 
> 赞同：0
> 
> 时间：2013-04-08T02:47:51.030
> 
> 标签：jquery, autocomplete

只需为项目演示快速制作 jQuery 地址自动完成原型。

基本上，当用户在初始输入字段中键入地址时，它会自动显示可能地址的下拉列表（地址选择器样式）。

我只需要插入地址列表中的第一项“您输入：”以反映输入框中输入的内容。

看：

[http://jsfiddle.net/hotdiggity/NFeEH/](http://jsfiddle.net/hotdiggity/NFeEH/)

```
<!doctype html>

<html lang="en">
  <head>
  <meta charset="utf-8" />
  <title>Autocomplete</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
  <style>
#results { float: right; }
#address { float: left; }
</style>
  <script>
  $(function() {

    $("#results").hide();

    var addresses = [{
        value: "25/167 Smith",
        add1: "25/167 Smith Street",
        loc: "Brisbane",
        state: "Queensland",
        postcode: "4000"
    }, {
        value: "25/167 Smith",
        add1: "25/167 Smith Street",
        loc: "Mandaring",
        state: "WESTERN AUSTRALIA",
        postcode: "6073"
    }, {
        value: "25/167 Smith",
        add1: "25/167 Smith Creek Road",
        loc: "Werombi",
        state: "NEW SOUTH WALES",
        postcode: "2570"
    }, {
        value: "25/167 Smith",
        add1: "25/167 Smith Street",
        loc: "Collingwood Park",
        state: "QUEENSLAND",
        postcode: "4301"
    }, {
        value: "Level 25/167 Smith",
        add1: "25/167 Smith Terrace",
        loc: "Auchenflower",
        state: "QUEENSLAND",
        postcode: "4066"
    },
    ];

    $( "#address" ).autocomplete({
      minLength: 0,
      source: addresses,
      focus: function( event, ui ) {
//        $( "#address" ).val( ui.item.add1 + ", " + ui.item.loc + ", " + ui.item.state + " " + ui.item.postcode);
        return false;
      },
      select: function( event, ui ) {
        $( "#address" ).val( ui.item.label );
       // $( "#address-id" ).val( ui.item.value );
        $( "#address-add1" ).val( ui.item.add1 );
        $( "#address-loc" ).val( ui.item.loc );
        $( "#address-state" ).val( ui.item.state );
        $( "#address-postcode" ).val( ui.item.postcode );
        $("#results").show();
        return false;
      }

    })
    .data( "ui-autocomplete" )._renderItem = function( ul, item ) {
      return $( "<li>" )
        .append( "<a>" + item.add1 + ", " + item.loc + ", " + item.state + " " + item.postcode + "</a>" )
        .appendTo( ul );
    };
  });
  </script>
  </head>
  <body>
  <p>Start by typing "25"</p>
<input id="address" />
<div id="results">
    <p>
    <input id="address-add1" />
  </p>
    <p>
    <input id="address-loc" />
  </p>
    <p>
    <input id="address-state" />
  </p>
    <p>
    <input id="address-postcode" />
  </p>
  </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:01:51.970

尝试

```
var eladdress = $("#address").autocomplete({
            minLength : 0,
            source : addresses,
            focus : function(event, ui) {
                // $( "#address" ).val( ui.item.add1 + ", " +
                // ui.item.loc + ", " + ui.item.state + " " +
                // ui.item.postcode);
                return false;
            },
            select : function(event, ui) {
                $("#address").val(ui.item.label);
                // $( "#address-id" ).val( ui.item.value );
                $("#address-add1").val(ui.item.add1);
                $("#address-loc").val(ui.item.loc);
                $("#address-state").val(ui.item.state);
                $("#address-postcode").val(ui.item.postcode);
                $("#results").show();
                return false;
            }

        });

var _renderMenu = eladdress.data("ui-autocomplete")._renderMenu;
eladdress.data("ui-autocomplete")._renderMenu = function( ul, items ) {
    $('<li></li>').text('You Typed: ' + eladdress.val()).appendTo(ul);
    _renderMenu.apply(this, arguments);
}

eladdress.data("ui-autocomplete")._renderItem = function(ul,
        item) {
    return $("<li>").append("<a>" + item.add1 + ", " + item.loc
            + ", " + item.state + " " + item.postcode + "</a>")
            .appendTo(ul);
}; 
```

演示：[小提琴](http://jsfiddle.net/sPyX5/2/)

# google-app-engine - 如何使用 users.create_login_url 自定义主题谷歌登录屏幕

> ID：15870501
> 
> 赞同：0
> 
> 时间：2013-04-08T02:48:10.407
> 
> 标签：google-app-engine, authentication, google-account, google-signin

通常我只会让用户按如下方式登录：

```
class MainPage(webapp.RequestHandler):
    def get(self):
        user = users.get_current_user()

        if user:
            self.response.headers['Content-Type'] = 'text/plain'
            self.response.out.write('Hello, ' + user.nickname())
        else:
            self.redirect(users.create_login_url(self.request.uri)) 
```

这将打开以下登录屏幕： ![登录屏幕](https://i.stack.imgur.com/4ORpN.png)

但是，我们正在开发一款应用程序，旨在让**每个公司拥有一个帐户，而不是每个人拥有一个帐户**。然后，每位员工将代表公司通过**网站**前端或使用公司**安卓**平板电脑上的安卓应用程序登录。

一个明显的解决方案是为每家公司创建一个**gmail**帐户。但是，已经决定让他们使用 gmail 帐户（并看到 google 登录屏幕）并不能很好地反映我们的**品牌**。

有没有办法**自定义登录屏幕以配合我们公司的徽标和颜色**？或者以某种方式使登录过程不可见？

如果这不可能，我可能不得不使用自定义授权和会话，这不如包含谷歌登录的电池好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:38:12.187

我们最终在本[教程的帮助下推出了自己的身份验证](http://blog.abahgat.com/2013/01/07/user-authentication-with-webapp2-on-google-app-engine/)

谷歌不太可能让你自定义主题一个谷歌登录过程。

我还建议每个用户始终拥有一个帐户，即使他们总是代表公司执行操作。

# haskell - `-O99` 标志有什么作用？

> ID：15870512
> 
> 赞同：3
> 
> 时间：2013-04-08T02:49:39.110
> 
> 标签：haskell, ghc

标题是个小玩笑。

我今天才发现它`ghc`可以接受任何优化级别而不会抱怨。我知道这`-O2`应该是最大优化级别，并且这里有一个建议`-O3` [，](http://hackage.haskell.org/trac/ghc/ticket/1371)但我只是好奇当您错误地指定更高的优化级别时会发生什么。`ghc`是默认`-O2`还是根本不优化？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T03:01:50.103

看起来它被限制在 0 和 2 in 之间[`compiler/main/DynFlags.hs`](https://github.com/ghc/ghc/blob/460abd75c4f99d813ed226d2ff6aa592d62fafd4/compiler/main/DynFlags.hs#L1748)：

```
updOptLevel :: Int -> DynFlags -> DynFlags
-- ^ Sets the 'DynFlags' to be appropriate to the optimisation level
updOptLevel n dfs
  = dfs2{ optLevel = final_n }
  where
   final_n = max 0 (min 2 n)    -- Clamp to 0 <= n <= 2
   ... 
```

# c# - 重定向 cmd.exe 的输入和输出

> ID：15870516
> 
> 赞同：4
> 
> 时间：2013-04-08T02:49:56.830
> 
> 标签：c#, console, cmd, stdout, stdin

我想将 cmd.exe 输出重定向到某处，当命令为一行时，下面的代码有效：

```
Process p = new Process()
{
    StartInfo = new ProcessStartInfo("cmd")
    {
       UseShellExecute = false,
       RedirectStandardInput = true,
       RedirectStandardOutput = true,
       CreateNoWindow = true,
       Arguments = String.Format("/c \"{0}\"", command),
    }
};
p.OutputDataReceived += (s, e) => Messagebox.Show(e.Data);
p.Start();
p.BeginOutputReadLine();
p.WaitForExit(); 
```

但是像 WriteLine() 这样的一系列命令怎么样：

```
p.StandardInput.WriteLine("cd...");
p.StandardInput.WriteLine("dir"); 
```

在这种情况下如何获得输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T04:42:09.823

要实现这种行为，您应该使用`/k`switch`cmd.exe`在交互模式下运行。

问题是从不同的命令中分离输入。为此，您可以使用`prompt`以下命令更改标准提示：

```
prompt --Prompt_C2BCE8F8E2C24403A71CA4B7F7521F5B_F659E9F3F8574A72BE92206596C423D5 
```

所以现在很容易确定命令输出的结束。

这是完整的代码：

```
public static IEnumerable<string> RunCommands(params string[] commands) {
    var process = new Process {
        StartInfo = new ProcessStartInfo("cmd") {
            UseShellExecute = false,
            RedirectStandardInput = true,
            RedirectStandardOutput = true,
            CreateNoWindow = true,
            Arguments = "/k",
        }
    };

    process.Start();

    const string prompt = "--Prompt_C2BCE8F8E2C24403A71CA4B7F7521F5B_F659E9F3F8574A72BE92206596C423D5 ";

    // replacing standard prompt in order to determine end of command output
    process.StandardInput.WriteLine("prompt " + prompt);
    process.StandardInput.Flush();
    process.StandardOutput.ReadLine();
    process.StandardOutput.ReadLine();

    var result = new List<string>();

    try {
        var commandResult = new StringBuilder();

        foreach (var command in commands) {
            process.StandardInput.WriteLine(command);
            process.StandardInput.WriteLine();
            process.StandardInput.Flush();

            process.StandardOutput.ReadLine();

            while (true) {
                var line = process.StandardOutput.ReadLine();

                if (line == prompt) // end of command output
                    break;

                commandResult.AppendLine(line);
            }

            result.Add(commandResult.ToString());

            commandResult.Clear();

        }
    } finally {
        process.Kill();
    }

    return result;
} 
```

它运作良好，但看起来像一个大黑客。

我建议您改为使用每个命令的进程。

# ios - 使用 Windows Azure 媒体服务将 HLS 流式传输到 iOS 设备

> ID：15870526
> 
> 赞同：1
> 
> 时间：2013-04-08T02:50:53.587
> 
> 标签：ios, http-live-streaming, azure-media-services

我一直在探索 Azure 媒体服务，特别是转换为 HLS 的媒体。我使用类似于此[HLS 演练中概述的过程完成了创建 HLS 内容的过程](http://social.msdn.microsoft.com/Forums/en-US/MediaServices/thread/b6baf438-2702-418a-a774-3dad42bf8fa1)

现在我在 Azure 中有我的 HLS 内容，我希望像处理任何 m3u8 流一样流式传输它。我尝试了以下方法：

*   iPad 中的 WebView – 工作正常，它在跳跃并且不是很流畅

*   OS X 上的 Safari – 根本不工作

*   VLC 播放器 - 根本不工作。

当然，我并不详尽也不彻底（还），但在我继续之前，如果有人有任何反馈，我想获得反馈。关于适用于 iOS的 Smooth Player，我偶然发现了适用于 iOS 的[WAMS Media Player 。](http://www.windowsazure.com/en-us/develop/media-services/how-to-guides/ios-media-player-framework/)这里是否期望为 iOS 开发的 Smooth Player 是使用来自 WAMS 的 HLS 生成媒体的最佳方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T09:58:49.563

据我了解，Safari 对 HLS 的支持（或不支持）取决于 QuickTime——有些版本的 QuickTime 确实支持 HLS（QuickTime Pro），但默认情况下不支持。

我建议您同时转码为平滑流式处理和 HLS。通过 Flash 或 Silverlight 为 Windows/Mac 客户端提供平滑流式传输，通过 HTML5 为 iOS 客户端提供 HLS。

# java - 如何使用原型创建 Maven 插件

> ID：15870531
> 
> 赞同：2
> 
> 时间：2013-04-08T02:52:01.523
> 
> 标签：java, eclipse, maven

我是 Maven 的新手。我需要创建应该打印名称的 Maven 插件。

所以如果我想在我的其他项目中使用这个插件，我需要有以下插件配置

```
<configuration>
    <Team>
        <name>test1</name>
        <name>test2</name>
        <name>test3</name>
    </Team>
    <enabled>true</enabled>
</configuration> 
```

我试图寻找任何使用原型创建插件的教程。没有成功需要帮助，或者你可以提供关于 maven 插件的好资源

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T07:32:02.573

maven 插件是一个简单的 java 类扩展`AbstractMojo`。原型是一个抽象的通用 maven 项目，它允许生成一个具体的 maven 项目骨架。

请参阅[http://maven.apache.org/guides/plugin/guide-java-plugin-development.html](http://maven.apache.org/guides/plugin/guide-java-plugin-development.html)以创建自定义 maven 插件

# ant - Liquibase 不使用 Ant 提交 changeSet

> ID：15870533
> 
> 赞同：0
> 
> 时间：2013-04-08T02:52:09.250
> 
> 标签：ant, liquibase

我已经尝试过使用 Spring 的 liquibase 3.0 beta（顺便说一句，它不适用于 2.0）。进展顺利。

现在，在回滚所有更改并删除表 DATABASECHANGELOG 和 DATABASECHANGELOGLOCK 之后，我正在使用 Ant 使用相同的数据库和更改日志对其进行测试。

问题是 liquibase**记录了**表 DATABASECHANGELOG 中的所有变更集，这意味着我的配置中没有任何错误，但它**没有将更改提交**到数据库。

这是我的 changelog.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog  http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd">

  <preConditions>
    <dbms type="mysql"/>
  </preConditions>

  <changeSet id="1" author="bob" runAlways="true">
    <createTable tableName="department">
      <column name="id" type="int">
        <constraints primaryKey="true" nullable="false"/>
      </column>
      <column name="name" type="varchar(50)">
        <constraints nullable="false"/>
      </column>
      <column name="active" type="boolean" defaultValueBoolean="true"/>
    </createTable>
  </changeSet>

  <changeSet id="2" author="roger" runAlways="true">
    <comment>test add column</comment>
    <addColumn tableName="department">
      <column name="header" type="varchar(8)"/>
    </addColumn>
  </changeSet>

  <changeSet id="3" author="gabriel" runAlways="true">
    <createTable tableName="records">
      <column name="id" type="int" autoIncrement="true">
        <constraints primaryKey="true" nullable="false"/>
      </column>
      <column name="title" type="varchar(50)"/>
    </createTable>
  </changeSet>

  <changeSet id="4" author="gabriel" context="test" runAlways="true">
    <insert tableName="records">
      <column name="title" value="Liquibase 0.8 Released"/>
    </insert>
    <insert tableName="records">
      <column name="title" value="Liquibase 0.9 Released"/>
    </insert>
  </changeSet>

  <changeSet id="6" author="nvoxland" runAlways="true">
    <comment>test update eam_company</comment>
    <sql>update eam_company set companyName='haha' where companyId=15</sql>
  </changeSet>

</databaseChangeLog> 
```

Ant build.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<project name="ncpsys_v2" default="all">
  <!-- define time stamp -->
  <tstamp>
    <format property="current.time" pattern="yyyy_MM_dd_HH_mm_ss"/>
  </tstamp>

  <!-- define varibles and path -->
  <property file="liquibaseconf.properties"/>
  <path id="ant.classpath">
    <fileset dir="${ant.home}">
      <include name="**/*.jar"/>
    </fileset>
  </path>

  <target name="sync-database">
    <fail unless="db.changelog.file">db.changelog.file not set</fail>
    <fail unless="database.url">database.url not set</fail>
    <fail unless="database.username">database.username not set</fail>
    <fail unless="database.password">database.password not set</fail>
    <taskdef resource="liquibasetasks.properties">
      <classpath refid="ant.classpath"/>
    </taskdef>
    <changeLogSync changeLogFile="${db.changelog.file}" driver="${database.driver}" url="${database.url}" username="${database.username}" password="${database.password}" promptOnNonLocalDatabase="true" defaultSchemaName="root" classpathref="ant.classpath">
     </changeLogSync>
  </target>

  <target name="all" depends="sync-database"/>
</project> 
```

liquibasetasks.properties 文件

```
local.dir=.
#gwt.home=E:/work/libaray/gwt-2.3.0
jdk.home.1.6=C:/Program Files/Java/jdk1.6.0_10
ant_home=D:/software/apache-ant-1.8.3
tomcat.home=C:/Program Files/Apache Software Foundation/apache-tomcat-6.0.36

#liquibase config
database.driver=com.mysql.jdbc.Driver
database.url=jdbc:mysql://localhost:3306/ncpsys_v2?useUnicode=true&characterEncoding=UTF-8
database.username=root
database.password=1234
db.changelog.file=changelog.xml 
```

然后我运行 Ant 任务，liquibase 为我创建了表 DATABASECHANGELOG 和 DATABASECHANGELOGLOCK，并在 DATABASECHANGELOG 中插入了日志。

![Toad for MySQL 上显示的记录](https://i.stack.imgur.com/rFZ0j.png)

我的构建日志：

```
sync-database:
[changeLogSync] INFO 13-4-2 下午1:22:liquibase: Successfully acquired change log lock
[changeLogSync] INFO 13-4-2 下午1:22:liquibase: Creating database history table with name: `ncpsys_v2`.`DATABASECHANGELOG`
[changeLogSync] INFO 13-4-2 下午1:22:liquibase: Reading from `ncpsys_v2`.`DATABASECHANGELOG`
[changeLogSync] INFO 13-4-2 下午1:22:liquibase: Reading from `ncpsys_v2`.`DATABASECHANGELOG`
[changeLogSync] INFO 13-4-2 下午1:22:liquibase: Successfully released change log lock

all:

BUILD SUCCESSFUL

Total time: 2 seconds 
```

但是数据库中没有发生更改。我没有看到表 RECORDS 和 DEPARTMENT 已创建并插入数据。更新 sql 也不适用。

有什么我做错了吗？或者是不是3.0beta1版本下没有修复的bug（哦..我也试了beta2，不行，还有中文乱码问题）

我在 liquibase 论坛上发布了这个问题，但没有得到答案，所以我来找你们。

请帮我！我都糊涂了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:23:16.577

您正在运行[changeLogSync](http://www.liquibase.org/manual/changelogsync_ant_task) ANT 任务。描述如下：

> 将所有更改集标记为针对数据库运行。当您手动更新数据库时很有用。

这解释了为什么没有向您的数据库提交任何内容。我认为您应该改用[updateDatabase](http://www.liquibase.org/manual/updatedatabase_ant_task)任务

# jquery - Jquery UI 滑块不一致

> ID：15870541
> 
> 赞同：2
> 
> 时间：2013-04-08T02:53:51.113
> 
> 标签：jquery, jquery-ui

我遇到了这个 jquery UI Slider 没有正确显示所选选项标签的问题。滑块（下面是我当前的代码）首先显示第一个选项，这是我所期望的，但是在使用滑块选择另一个选项之后，然后返回第一个选项，它显示为第二个数组选项而不是比第一个。

它也没有在一次清晰的滑动中显示所有选项；相反，它显示前三个数组字符串，然后停止，然后当您返回一个选项时，它显示数组中的第四个，也是最后一个字符串。过去一个小时我一直在玩它，但还没有找到任何解决方案。有什么办法可以解决这个问题吗？

代码：

```
<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />

<style type="text/css">
#slider {
width: 300px;
}
#itemlabel {
text-align: center;
}
</style>

  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<script type="text/javascript">
$(function() {
    var valMap = [1.5, 2.5, 5.5, 10.5];
    $("#slider").slider({
        min: 0,
        max: 3,
        value: 0,
        slide: function(event, ui) {                        
            $("#amount").val('$' + valMap[$("#slider").slider("value")] + '0');            
        }       
    });
    $("#amount").val('$' + valMap[$("#slider").slider("value")] + '0');
});
</script>
</head>
<body>

<center><div id="planlabel"><p>
  <label for="amount">Item:</label>
  <input type="text" id="amount" style="border: 0; color: #f6931f; font-weight: bold;" />
</p></div>
<div id="slider"></div></center> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T02:57:33.487

只需将“幻灯片”更改为“更改”即可。

```
$(function() {
    var valMap = [1.5, 2.5, 5.5, 10.5];
    $("#slider").slider({
        min: 0,
        max: 3,
        value: 0,
        change: function(event, ui) {                        
            $("#amount").val('$' + valMap[$("#slider").slider("value")] + '0');
        }       
    });
    $("#amount").val('$' + valMap[$("#slider").slider("value")] + '0');
}); 
```

[**jsfiddle 演示**](http://jsfiddle.net/john_s/GmCt9/)

“change”回调是在滑块的值改变之后调用的，而“slide”回调是在鼠标移动时调用的，但可能是在值改变之前。

尽管滑块文档没有说明，但我相信您可以将回调中的一行缩短为：

```
$("#amount").val('$' + valMap[ui.value] + '0'); 
```

# android - 片段管理器上的空指针异常

> ID：15870542
> 
> 赞同：2
> 
> 时间：2013-04-08T02:54:00.933
> 
> 标签：android, android-fragments, android-button, android-fragmentactivity

我有一个`ActivityFragments`三个`Buttons`和`FragmentOne`, `FragmentTwo`,`FragmentThree`类。按下时`Button1`它必须显示`FragmentOne`和隐藏`FragmentTwo`和`FragmentThree`。如果`Button2`按下它必须显示`FragmentTwo`和隐藏`FragmentOne`和`FragmentThree`。同样，如果`Button3`按下它必须显示`FragmentThree`和隐藏`FragmentTwo`和`FragmentOne`。我的代码无法显示`NullPointerException E/AndroidRuntime(362): at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:656)`

**日志猫：**

```
04-08 08:10:31.830: E/AndroidRuntime(362): FATAL EXCEPTION: main
04-08 08:10:31.830: E/AndroidRuntime(362): java.lang.NullPointerException
04-08 08:10:31.830: E/AndroidRuntime(362):      at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:656)
04-08 08:10:31.830: E/AndroidRuntime(362):      at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
04-08 08:10:31.830: E/AndroidRuntime(362):      at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:429)
04-08 08:10:31.830: E/AndroidRuntime(362):      at android.os.Handler.handleCallback(Handler.java:587)
04-08 08:10:31.830: E/AndroidRuntime(362):      at android.os.Handler.dispatchMessage(Handler.java:92)
04-08 08:10:31.830: E/AndroidRuntime(362):      at android.os.Looper.loop(Looper.java:123)
04-08 08:10:31.830: E/AndroidRuntime(362):      at android.app.ActivityThread.main(ActivityThread.java:4627)
04-08 08:10:31.830: E/AndroidRuntime(362):      at java.lang.reflect.Method.invokeNative(Native Method)
04-08 08:10:31.830: E/AndroidRuntime(362):      at java.lang.reflect.Method.invoke(Method.java:521)
04-08 08:10:31.830: E/AndroidRuntime(362):      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-08 08:10:31.830: E/AndroidRuntime(362):      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-08 08:10:31.830: E/AndroidRuntime(362):      at dalvik.system.NativeStart.main(Native Method) 
```

[你也可以在这里找到](http://pastebin.com/0yRVfpjV)

这是代码：**MainActivity.java**

```
 public class MainActivity extends FragmentActivity implements OnClickListener {
    Button b1, b2, b3;
    Fragment f1, f2, f3;
    FragmentManager manager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        b1 = (Button) findViewById(R.id.button1);
        b2 = (Button) findViewById(R.id.button2);
        b3 = (Button) findViewById(R.id.button3);
        b1.setOnClickListener(this);
        b2.setOnClickListener(this);
        b3.setOnClickListener(this);
        manager = getSupportFragmentManager();

        f1 = manager.findFragmentById(R.id.first);
        f2 = manager.findFragmentById(R.id.second);
        f2 = manager.findFragmentById(R.id.third);

    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.button1:
            if(b1.isPressed()){
            FragmentTransaction transaction = getSupportFragmentManager()
                    .beginTransaction();
            transaction.hide(f2);
            transaction.hide(f3);
            transaction.show(f1);
            transaction.commit();
            }
            break;
        case R.id.button2:
            if(b2.isPressed()){
            FragmentTransaction transaction1 = getSupportFragmentManager()
                    .beginTransaction();
            transaction1.hide(f1);
            transaction1.hide(f3);
            transaction1.show(f2);
            transaction1.commit();
            }
            break;
        case R.id.button3:
            if(b3.isPressed()){
            FragmentTransaction transaction2 = getSupportFragmentManager()
                    .beginTransaction();
            transaction2.hide(f1);
            transaction2.hide(f2);
            transaction2.show(f3);
            transaction2.commit();
            }
            break;
        }

    }

    }

    public class FirstFragment extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.first, container, false);
        return view;
    }
    }
    public class SecondFragment extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.second, container, false);
        return view;
    }
    }
    public class Third extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.third, container, false);
        return view;
    }
    } 
```

布局文件：**main.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="Button 1" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/button1"
    android:layout_toRightOf="@+id/button1"
    android:text="Button 2" />

<Button
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/button2"
    android:layout_toRightOf="@+id/button2"
    android:text="Button 3" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button1"
    android:layout_below="@+id/button1"
    android:orientation="horizontal" >

    <fragment
        android:id="@+id/first"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        class="com.fragmentworks.FirstFragment" />

    <fragment
        android:id="@+id/second"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        class="com.fragmentworks.SecondFragment" />

    <fragment
        android:id="@+id/third"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        class="com.fragmentworks.Third" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T05:02:48.853

你有一个错字：

```
f1 = manager.findFragmentById(R.id.first);
f2 = manager.findFragmentById(R.id.second);
f2 = manager.findFragmentById(R.id.third); 
```

最后一行应该是`f3 =....`

阿里。

# c# - 将对象设置为空有什么作用？

> ID：15870548
> 
> 赞同：1
> 
> 时间：2013-04-08T02:54:31.540
> 
> 标签：c#

这行代码将堆上的内存空间分配给对象 foo

```
var foo =new object(); 
```

这行代码会释放它吗？

```
foo=null; 
```

或者它只是消除对堆上内存位置的引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T02:56:26.737

它只是删除了引用。当运行时认为合适时，对象本身会被垃圾收集，并且实际上与引用是否被擦除无关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T02:58:21.773

在 C# 中，所有对象都会被垃圾回收，您不能“删除”它们。

当对给定对象的最后一个引用超出范围时，该对象可能会被收集。您当然可以尽可能多地为空引用，但只要*任何*引用仍然持有该对象，该对象就会保持活动状态。

所以设置`foo=null;`它只是删除参考。

> 垃圾收集包括以下步骤：
> 
> 1.  垃圾收集器搜索托管代码中引用的托管对象。
> 2.  垃圾收集器尝试终结未引用的对象。
> 3.  垃圾收集器释放未被引用的对象并回收它们的内存。

了解垃圾收集器的工作原理很重要[GC 类](http://msdn.microsoft.com/en-us/library/system.gc.aspx)

## 例子

```
// Set a break-point here to see that foo = null. 
// However, the compiler considers it "unassigned." 
// and generates a compiler error if you try to 
// use the variable.
object foo;
// Now foo has a value.
foo = new object();
// Set foo to null again. The object it referenced 
// is no longer accessible and can now be garbage-collected.
foo = null; 
```

# perl - 为什么 Perl 中的 if/elsif 只执行第一个块？

> ID：15870552
> 
> 赞同：0
> 
> 时间：2013-04-08T02:54:52.407
> 
> 标签：perl, if-statement

我是 Perl 的新手。我有一个任务是编写一个 Perl 程序，该程序从命令行接受一个可数单词，然后生成它的复数形式。我在下面编写了以下代码，它没有显示编译错误。当我从命令行执行它时：（例如 perl 复数.pl），它会提示我输入一个名词，然后无论我输入什么名词，复数形式都是相同的。它不执行剩余的 if 语句。

例如，如果我输入单词“cat”，则复数生成为“cats”。但是当我输入单词“church”时，例如，复数生成为“churches”，“fly”生成为“flys”。

这是代码：

```
#!/usr/bin/perl

$suffix1 = 's';
$suffix2 = 'es';
$suffix3 = 'ies';

print "Enter a countable noun to get plural: ";
$word = <STDIN>;
chomp($word);

if(substr $word, -1 == 'b' or 'd' or 'c' or 'g' or 'r' or 'j' or 'k' or 'l' or 'm' or 'n' or 'p' or 'q' or 'r' or 't' or 'v' or 'w' or 'e' or 'i' or 'o' or 'u') {
    $temp = $word.$suffix1;
    print "The plural form of the word \"$word\" is: $temp \n";
}
elsif (substr $word, -1 == 's' or 'sh' or 'ch' or 'x' or 'z') {
    $temp = $word.$suffix2;
    print "The plural form of the word \"$word\" is: $temp \n";
}
elsif (substr $word, -1 == 'y') {
    chop($word);
    $temp = $word.$suffix3;
    print "The plural form of the word \"$word\" is: $temp \n";
} 
```

你能帮我让代码执行这三个语句吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T03:11:14.730

首先，始终使用`use strict; use warnings;`.

*   字符串比较使用`eq`，而不是`==`。

*   `substr $word, -1 eq 'b'`意味着`substr $word, (-1 eq 'b')`当你的意思`substr($word, -1) eq 'b'`。如果您在函数调用周围省略括号，您将面临很多问题。

*   `substr($word, -1) eq 'b' or 'd'`意思相同`(substr($word, -1) eq 'b') or ('d')`。`'d'`总是正确的。你需要使用`substr($word, -1) eq 'b' or substr($word, -1) eq 'd'`. （最好保存`substr $word, -1`在一个变量中以避免重复执行。）

*   `substr $word, -1`永远不会等于`ch`or `sh`。

匹配运算符使这很容易：

```
if ($word =~ /[bdcgrjklmnpqrtvweiou]\z/) {
   ...
}
elsif ($word =~ /(?:[sxz]|[sc]h)\z/) {
   ...
}
elsif ($word =~ /y\z/) {
   ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T02:58:45.077

1.  在 Perl 中，我们使用`eq`for 字符串比较而不是`==`.
2.  你不能这样使用`or`。应该是这样的`if (substr($word, -1) eq 'b' or substr ($word, -1) eq 'd')`。否则，您可以使用包含您想要比较的所有字符串的数组，并从该数组中 grep。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T03:15:32.917

黄昏是对的。Perl 使用符号进行数字比较，使用字符串进行字符串比较。

```
==   eq
!=   ne
<    lt
<=   le
>    gt
>=   ge
<=>  cmp 
```

此外，您对 的使用`or`虽然是一个很好的尝试，但不起作用。关键字`or` 的优先级较弱，因此表达式

```
substr $word, -1 == 'b' or 'd' or 'c' or
                    'g' or 'r' or 'j' or
                    'k' or 'l' or 'm' or
                    'n' or 'p' or 'q' or
                    'r' or 't' or 'v' or
                    'w' or 'e' or 'i' or
                    'o' or 'u' 
```

被解释为

```
substr ($word, (-1 == 'b')) or 'd' or 'c' or
                    'g' or 'r' or 'j' or
                    'k' or 'l' or 'm' or
                    'n' or 'p' or 'q' or
                    'r' or 't' or 'v' or
                    'w' or 'e' or 'i' or
                    'o' or 'u' 
```

我不确定 substr 的结果是什么，但如果它为假，则表达式继续到`or 'b'`，它被解释为`true`. 你见过正则表达式吗？这是更惯用的做法

```
if ($word =~ /[bdcgrjklmnpqrtvweiou]$/) {...} 
# Does $word match any of those characters followed by
# the end of the line or string? 
```

在 Perl 文档中查找字符串替换和 s/.../.../ 构造。

顺便说一句，如果您不是学生而是被付钱来做这件事，那么您会改用 Lingua 模块。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-08T03:55:06.270

首先，总是，总是包括`use strict;`and `use warnings;`。

其次，使用缩进。我在工作中教过 Perl 课程，并且拒绝接受任何没有正确缩进的作业。事实上，我对此非常非常严格，因为我希望用户学习按标准编写代码（4 个空格缩进等）。它使您的程序更易于阅读和支持。

当我们这样做的时候，打破过长的行——尤其是在 StackOverflow 上。当您必须来回滚动时，很难阅读程序。

快速查看您的程序：

在 Perl 中，字符串和数字使用两组不同的布尔运算。这是因为字符串只能包含数字，但仍然是字符串。想象一下库存项目编号，例如`1384`和`993`。如果我将这些排序为字符串，则该`1384`项目排在第一位。如果我按数字对它们进行排序，`993`应该排在第一位。除了您使用的布尔运算之外，您的程序无法知道这一点：

```
Boolean Operation   Numeric  String
=================   =======  ======
Equals              ==       eq
Not Equals          !=       ne
Greater Than        >        gt
Less Than           <        lt
Greater than/Equals >=       ge
Less than/Equals    <=       le 
```

另一个是`or`, `and`,`||`并且`&&`只能与两个布尔值一起使用。这不起作用：

```
if ( $a > $b or $c ) { 
```

这是在说什么：

```
if ( ( $a > $b ) or $c ) { 
```

因此，如果`$c`是一个非零值，那么`$c`将是*true*，并且整个语句都是正确的。你必须以这种方式做你的陈述：

```
if ( $a > $b or $a > $c ) { 
```

另一件事是，在引用包含引号的字符串时使用`qq(..)`and 。`q()`这样，您不必在它们前面加上反斜杠。

```
print "The word is \"swordfish\"\n";

print qq(The word is "swordfish"\n); 
```

而且，如果您`use feature qw(say);`在程序的顶部使用，您将获得`say`类似于的奖励命令`print`，除了假定结束新行：

```
say qq(The word is "swordfish"); 
```

使用 时`substr, $foo, -1`，您只查看最后一个字符。它不能是两个字符串：

```
if ( substr $word, -1 eq "ch" ) { 
```

永远是假的。

长的 if 很难维持。我会使用`for loop`（实际上不是，但让我们现在假装..）：

```
#! /usr/bin/env perl

#
# Use these in ALL of your programs
#
use strict;
use warnings;
use feature qw(say);

#
# Use better, more descriptive names
#
my $standard_plural_suffix = 's';
my $uncommon_plural_suffix = 'es';
my $y_ending_plural_suffix = 'ies';

print "Enter a countable noun to get plural: ";
chomp (my $word = <STDIN>);

my $plural_form;

#
# Instead of a long, long "if", use a for loop for testing. Easier to maintain
#
for my $last_letter qw( b d c g r j k l m n p q r t v w e i o u) {
    if ( substr($word, -1) eq $last_letter ) {
        $plural_form = $word . $standard_plural_suffix;
        last;
    }
}
#
# Is it an "uncommon plural" test (single character)
#
if ( not $plural_form ) {
    for my $last_letter qw(s x z) {
        if ( substr($word, -1) eq $last_letter ) {
            $plural_form = $word . $uncommon_plural_suffix;
            last;
        }
    }
}
#
# Is it an "uncommon plural" test (double character)
#
if ( not $plural_form ) {
    for my $last_two_letters qw(sh ch) {
        if ( substr($word, -2) eq $last_two_letters ) {
            $plural_form = $word . $uncommon_plural_suffix;
            last;
        }
    }
}
if ( not $plural_form ) {
    if ( substr($word, -1) eq 'y' ) {
        chop ( my $chopped_word = $word );
        $plural_form = $chopped_word . $y_ending_plural_suffix;
    }
}

if ( $plural_form ) {
    say qq(The plural of "$word" is "$plural_form");
}
else {
    say qq(Could not find plural form of "$word");
} 
```

你知道正则表达式吗？这些会比使用更好，`substr`因为你可以一次测试多个东西。另外，我不会使用`chop`，而是使用正则表达式替换：

```
#! /usr/bin/env perl

#
# Use these in ALL of your programs
#
use strict;
use warnings;
use feature qw(say);

#
# Use better, more descriptive names
#
my $standard_plural_suffix = 's';
my $uncommon_plural_suffix = 'es';
my $y_ending_plural_suffix = 'ies';

print "Enter a countable noun to get plural: ";
chomp (my $word = <STDIN>);

my $plural_form;

#
# Standard plural (adding plain ol' 's'
#
if ( $word =~ /[bdcgrjklmnpqrtvweiou]$/ ) {
    $plural_form = $word . $standard_plural_suffix;
}
#
# Uncommon plural (adding es)
#
elsif ( $word =~ /([sxz]|[sc]h)$/ ) {
    $plural_form = $word . $uncommon_plural_suffix;
}
#
# Final 'y' rule: Replace y with ies
#
elsif ( $word =~ /y$/ ) {
    $plural_form = $word;
    $plural_form =~ s/y$/ies/;
}

if ( $plural_form ) {
    say qq(The plural of "$word" is "$plural_form");
}
else {
    say qq(Could not find plural form of "$word");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T03:13:53.990

我已经稍微改变了你的代码。我正在使用正则表达式：

```
#!/usr/bin/perl

$suffix1 = 's';
$suffix2 = 'es';
$suffix3 = 'ies';

print "Enter a countable noun to get plural: ";
$word = <STDIN>;
chomp($word);

if ( $word =~ m/(s|sh|ch|x|z)$/) {
    $temp = $word . $suffix2;
}
elsif ( substr( $word, -1 ) eq 'y' ) {
    chop($word);
    $temp = $word . $suffix3;
}
else {
    $temp = $word . $suffix1;
}

print "The plural form of the word \"$word\" is: $temp \n"; 
```

我也建议你总是`use strict;`和`use warnings;`

# python - 针对 1d 列表绘制单行 2d numpy 数组

> ID：15870558
> 
> 赞同：3
> 
> 时间：2013-04-08T02:55:49.747
> 
> 标签：python, arrays, numpy, matplotlib

我想从二维 numpy 数组中针对 python 中的一维列表绘制单行。例如，我想使用 matplotlib 行 'i' 进行绘图，如下所示

```
 |0 0 0 0 0|
  |1 1 1 1 1|
i |2 2 2 2 2|
  |. . . . .|
  |n n n n n| 
```

反对

```
[0, 100, 200, 300, 400] 
```

我目前拥有的是：

```
plt.plot(list1, 2dimArray[i]) 
```

但这不起作用。当我针对 1d 列表绘制 1d 列表时，我使用了这个功能，但我不得不去多维并选择 numpy。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T03:15:26.073

使用下面您评论中的数据，这对我有用：

```
In [1]: import numpy as np

In [2]: x = np.arange(0,1100,100)

In [3]: y = np.random.rand(6,11)

In [4]: i = 2

In [5]: plt.plot(x, y[i])
Out[5]: [<matplotlib.lines.Line2D at 0x1043cc790>] 
```

![第 2 行的情节](https://i.stack.imgur.com/89sbl.png)

问题是`x`和`y`参数`plot`必须具有相同的形状（或至少相同的第一个形状条目）。

```
In [6]: x.shape
Out[6]: (11,)

In [7]: y.shape
Out[7]: (6, 11)

In [8]: y[i].shape
Out[8]: (11,) 
```

也许您的程序生成的项目之一*实际上并不*具有您认为的形状？

如果您将列表与 numpy 数组一起使用，这也应该有效（`plt.plot`可能会将列表转换为数组）：

```
In [9]: xl = range(0, 1100, 100)

In [10]: plt.plot(xl, y[i])
Out[10]: [<matplotlib.lines.Line2D at 0x10462aed0>] 
```

# mongodb - MongoDB中空数组的多键稀疏索引

> ID：15870559
> 
> 赞同：2
> 
> 时间：2013-04-08T02:55:51.850
> 
> 标签：mongodb

在这种情况下预期会有什么行为？mongo 会将空数组视为 null/undefined 并将其包含到稀疏索引中，或者如果数组为空，则不会索引文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:18:18.450

空数组的处理方式与`null`MongoDB 不同。正如您在 Mongo shell 的以下代码中看到的那样，稀疏索引将空数组查找为空数组，而不是 as `null`。

```
> c = db.docs
测试文档
> c.insert({a : []})
> c.ensureIndex({a : 1}, {sparse: true})
> c.find({a : []}).count()
1
> c.find({a : null}).count()
0

```

与有关 MongoDB 的最有趣的问题一样，使用`explain`将提供大量信息。例如，您可以看到测试实际上使用了索引，并且索引的边界是`null`和`[]`，展示了它们的独特处理方式。

```
> c.find({a : null}).explain()
{
    “光标”：“BtreeCursor a_1”，
    “isMultiKey”：假，
    “n”：0，
    “nscannedObjects”：0，
    “nscanned”：0，
    “nscannedObjectsAllPlans”：0，
    “nscannedAllPlans”：0，
    “scanAndOrder”：假，
    “indexOnly”：假，
    “nYields”：0，
    “nChunkSkips”：0，
    “毫”：0，
    “索引边界”：{
        “一个” ： [
            [
                无效的，
                无效的
            ]
        ]
    },
    “服务器”：“新主机.home:27017”
}
> c.find({a : []}).explain()
{
    "cursor" : "BtreeCursor a_1 multi",
    “isMultiKey”：假，
    “n”：1，
    “nscannedObjects”：1，
    “nscanned”：1，
    “nscannedObjectsAllPlans”：1，
    “nscannedAllPlans”：1，
    “scanAndOrder”：假，
    “indexOnly”：假，
    “nYields”：0，
    “nChunkSkips”：0，
    “毫”：0，
    “索引边界”：{
        “一个” ： [
            [
                无效的，
                无效的
            ],
            [
                [ ],
                [ ]
            ]
        ]
    },
    “服务器”：“新主机.home:27017”
}

```

# javascript - 获取过去几天的名称（例如：7 天前、8 天前 ...）

> ID：15870561
> 
> 赞同：0
> 
> 时间：2013-04-08T02:56:03.997
> 
> 标签：javascript, jquery

我试图找到过去几天的名字。我正在使用此脚本成功获取过去 7 天的名称，但是，如果我增加过去的天数，例如 7 天前、8 天前或更长时间，它将不起作用。

```
var dayOfWeek = new Array();  

dayOfWeek[0] = "Sun";  
dayOfWeek[1] = "Mon";  
dayOfWeek[2] = "Tue";  
dayOfWeek[3] = "Wed";  
dayOfWeek[4] = "Thu";  
dayOfWeek[5] = "Fri";  
dayOfWeek[6] = "Sat";  

var myDate = new Date();
myDate.setDate(myDate.getDate());
var myDate1 = new Date();
myDate1.setDate(myDate1.getDate() - 1);
var myDate2 = new Date();
myDate2.setDate(myDate2.getDate() - 2);
var myDate3 = new Date();
myDate3.setDate(myDate3.getDate() - 3);
var myDate4 = new Date();
myDate4.setDate(myDate4.getDate() - 4);
var myDate5 = new Date();
myDate5.setDate(myDate5.getDate() - 5);
var myDate6 = new Date();
myDate6.setDate(myDate6.getDate() - 6);

var on1 = dayOfWeek[myDate.getDay()];
var on2 = dayOfWeek[myDate1.getDay()];
var on3 = dayOfWeek[myDate2.getDay()];
var on4 = dayOfWeek[myDate3.getDay()];
var on5 = dayOfWeek[myDate4.getDay()];
var on6 = dayOfWeek[myDate5.getDay()];

document.write(on5); 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T03:01:12.360

如果我理解正确，您正在尝试做类似的事情（假设今天是星期三）：

*   2 天前是星期一
*   5 天前是星期五
*   8 天前是星期二

如果这是正确的，那么应该这样做：

```
function getDayOfWeekAgo(daysAgo) {
    var today = new Date().getDay(),
        days = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
    today = (today+daysAgo*6)%7; // adding 6 per day is the same as subtracting one
                              // due to the modulo, just without the complications
                              // that negative numbers would bring
    return days[today];
} 
```

或者，更有效地：

```
window.getDayOfWeekAgo = (function() {
    var today = new Date().getDay(),
        days = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
    return function(daysAgo) {return days[(today+daysAgo*6)%7];}
})(); 
```

# javascript - AngularJS 和 Bootstrap DatePicker 指令的工作示例？

> ID：15870563
> 
> 赞同：22
> 
> 时间：2013-04-08T02:56:22.110
> 
> 标签：javascript, twitter-bootstrap, angularjs

我看过各种 github 指令示例，但没有一个包含有效的 JSFiddle，而且我无法让它们中的任何一个工作。令人惊讶的是，此时这不在[Angular-UI](http://angular-ui.github.io/bootstrap/)中。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-08-14T22:28:36.937

请看这个指令，一个工作日历[小提琴](http://jsfiddle.net/nabeezy/HB7LU/209/)：http: [//jsfiddle.net/nabeezy/HB7LU/209/](http://jsfiddle.net/nabeezy/HB7LU/209/)

```
myApp.directive('calendar', function () {
            return {
                require: 'ngModel',
                link: function (scope, el, attr, ngModel) {
                    $(el).datepicker({
                        dateFormat: 'yy-mm-dd',
                        onSelect: function (dateText) {
                            scope.$apply(function () {
                                ngModel.$setViewValue(dateText);
                            });
                        }
                    });
                }
            };
        }) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-02T23:57:14.163

假设这是在您的 view.html 中：

```
 <script type="text/javascript" src="js/bootstrap-datepicker.js"></script>
        <div id="datepicker"></div>
        <script type="text/javascript">
        $('#datepicker').datepicker().on('changeDate', function(ev){
          var element = angular.element($('#datepicker'));
          var controller = element.controller();
          var scope = element.scope();

          scope.$apply(function(){
            scope.doSomethingWithDate(ev.date);
          });
        });
        </script> 
```

然后在你的 controller.js 中：

```
$scope.doSomethingWithDate = function (date){
  alert(date);
}; 
```

就是这样，它有效:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-18T15:28:46.370

我希望这会有所帮助，我正在寻找一个简单的示例，但我找不到它，我找到了一个但充满了代码和链接的示例，我清理了它，这是使用角度引导的 datepicker 最简单的工作示例：

--->[示例页面](http://lionfishtechnologies.com/developers/samples/angular_bootstrap_datepicker/datePicker.html)<---

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-27T07:16:28.773

请立即检查。你忘了在里面添加`jquery`和 `css`。

[**在这里提琴**](http://jsfiddle.net/HB7LU/24804/)

# sql - rails order through count on other table

> ID：15870564
> 
> 赞同：1
> 
> 时间：2013-04-08T02:56:26.460
> 
> 标签：sql, ruby-on-rails, ruby, ruby-on-rails-3, sorting

我正在向 Hartl 教程中的 twitter 应用程序添加测验功能，并拥有以下模型：

用户与教程几乎相同：

```
class User < ActiveRecord::Base

  has_many :followed_users, through: :relationships, source: :followed

  has_many :takens, dependent: :destroy
  has_many :questions, through: :takens
end 
```

采用的是用户 id 的问题 id 表：

```
class Taken < ActiveRecord::Base
  belongs_to :user
  belongs_to :question

end 
```

没有什么有趣的问题：

```
class Question < ActiveRecord::Base
  attr_accessible :category, :correct, :option1, :option2, :option3, :qn
end 
```

我希望能够按照他们进行的测试次数的顺序显示 follow_users 和 follower。在控制台中，这可以通过：

```
User.find_by_id(1).question_ids.count 
```

然后我可以做类似的事情：

```
User.find_by_id(1).followers.first.question_ids.count 
```

在控制台中获取单个追随者的计数。

我觉得我快到了。

如何通过“获取”计数对关注者和关注用户进行排序？（我也在查看 cache_count，起初看起来很有希望，但可能不是我需要的......）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T03:06:38.143

Ruby on Rails 不提供面向对象的机制来执行此操作。您必须自己编写 SQL。在您的情况下，我会说以下行应该有效：

```
User.find_by_sql("SELECT users.*, COUNT(questions.id)
 AS c FROM users, questions WHERE questions.user_id = users.id
 GROUP BY users.id ORDER BY c DESC") 
```

我面前没有实际的表，所以我不能确定这是实际有效的 SQL，但希望它应该可以工作。

**编辑**：我的 SQL 存在一些语法错误，但已修复。请注意，我假设您的表被称为`users`and `questions`。它们可能对您有所不同。

# javascript - 比较javascript中的静态函数相等性？

> ID：15870566
> 
> 赞同：1
> 
> 时间：2013-04-08T02:57:02.193
> 
> 标签：javascript, function, tostring, equality

我正在做一个小项目，该项目的一个对象可以包括更新函数，该函数被添加到作为对象属性的数组中。

例子，

```
/*
    Add an update function to the layer
    @param function {update} The update to add
*/
Layer.prototype.addUpdate = function (update) {

    // Add the update
    this.updates.push(update);
};

/*
    Remove an update from the layer
    @param function {update} The update to remove
*/
Layer.prototype.removeUpdate = function (update) {

    this.updates.forEach(function (element, index) {

        if (element.toString() === update.toString()) {
            this.updates.splice(index, 1);
        }
    }, this);
}; 
```

使用上面的代码，我可以像这样使用它；

```
var layer = new Layer();
var func = function () {
     x = 10;
};
layer.addUpdate(func);
layer.removeUpdate(func); 
```

在互联网上阅读有关以这种方式比较函数相等性之后，我读过的所有地方都说这样做真的很糟糕。

在函数上使用`toString()`真的那么糟糕吗？

在添加和删除更新时只为两个参数提供函数的同时，我还有其他方法可以做到这一点吗？

**UDPATE**

有没有办法检查 2 个变量是否指向同一个引用？示例（伪）；

```
var a = 10;
var b = a;
var c = a;

if (b and c point to a) // 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:01:17.897

当然。比较函数本身：

```
if(element === update) {
    // ... 
```

`forEach`但是，在循环遍历数组时，您可能会遇到修改数组的问题。

# c - 如何在 C99 模式下编译 C 项目？

> ID：15870567
> 
> 赞同：22
> 
> 时间：2013-04-08T02:57:03.613
> 
> 标签：c, c99

编译 C 代码时收到以下错误消息：

```
error: 'for' loop initial declarations are only allowed in C99 mode
note: use option -std=c99 or -std=gnu99 to compile your code 
```

这是什么意思？

如何解决？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-08T02:58:06.960

你已经这样做了：

```
for (int i=0;i<10;i++) { 
```

您需要将其更改为：

```
int i;
for (i=0;i<10;i++) { 
```

或者，正如错误所说，

> 使用选项 -std=c99 或 -std=gnu99 编译您的代码。

***从 Ryan Fox 的回答中复制的***更新**：**

 **```
gcc -std=c99 foo.c -o foo 
```

或者，如果您使用的是标准 makefile，请将其添加到 CFLAGS 变量中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-08T04:37:18.440

如果你想混合使用语句和变量声明，你仍然需要 C99。正如其他答案和错误消息本身所说，`-std=c99`在编译时添加到命令行以启用 C99 功能 [1]。

但是你总是被允许写一个复合语句（一个*“块”*，IOW，但标准从不使用这个词！）代替单个语句。

```
#include<stdio.h>
int main() {
    int i = 5;

    {   /* new block, new declarations. */
        int i;
        for (i=0;i<10;i++){
        }
    }
    printf("%d\n", i);  /* prints "5\n" */
} 
```

这在 K&R、C90（又名 C89，它是同一件事）*和*C99 中是合法的。

启用 C99 模式可以获得很多[很酷的东西](https://stackoverflow.com/a/10695234/733077)，但它也会禁用 gcc 默认允许的其他一些很酷的东西，例如结构和联合中的匿名结构和联合。

1.  `-std=gnu99`可能会启用“所有好东西”，但我提醒您避免这样做。如果您（或其他人）希望移植代码，这将造成不必要的困难。如果我没有做这件事，我可能会有我的宠物项目的 Windows 版本，由某人免费移植。它与您联系 gcc。你不想被束缚。这就是标准的全部血腥点。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-08T03:37:28.273

其他答案为您提供了处理 GCC 的默认模式的方法。如果您想使用 C99（我通常推荐），那么您必须添加该编译器标志：

```
gcc -std=c99 foo.c -o foo 
```

或者，如果您使用的是标准 makefile，请将其添加到 CFLAGS 变量中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-08T02:58:28.913

这意味着您不能在语句中声明变量`for`。

你应该做：

```
int i ;
for( i = 0 ; i < len ; i++ ) 
```

你可能在做什么

```
for( int i = 0 ; i < len ; i++ ) 
```**

# python - 编写一个删除第一次出现的字符串的函数

> ID：15870569
> 
> 赞同：0
> 
> 时间：2013-04-08T02:57:16.647
> 
> 标签：python

我想写一个函数`remove`，它接受一个列表（`word`）和一个字符串（`words`）。您的函数应该删除 in 的第一次`word`出现`words`。如果`word`在 中根本没有出现`words`，该函数应该`words`保持不变。

我努力了

```
def remove (item):
    try:    
        words.remove('')
    except ValueError: 
        pass
    return words 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:58:24.430

你很近。您需要将`''`文字替换为`item`并添加`words`参数。照原样，它试图从全局变量中删除一个空词`words`，并且做得很好。但是，您可能希望它`item`从传递的`words`.

此外，缩进搞砸了（除了第一行之外的所有行都需要缩进一点），但我猜这不是你的原始代码的样子。

# android - resultActivity 上的 IMAGE_CAPTURE 文件尚不存在

> ID：15870572
> 
> 赞同：2
> 
> 时间：2013-04-08T02:58:03.153
> 
> 标签：android, image, android-intent, camera, capture

这是一种罕见的情况，我正在尝试从我的三星 Galaxy s3 上的本机相机活动中捕获图像，并且 onActivityResult 该文件尚不存在以供读取。如果我断开电话并再次连接，那么我可以在我的资源管理器上看到图像。

它喜欢相机活动延迟写入文件或其他东西......

我已经阅读了所有问题和答案以及其他论坛，但这是我的问题；我的代码：

```
... onCreate
      File file = new File( _path );
      pathUri = Uri.fromFile( file );
...

  protected void startCameraActivity()
    {
        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, pathUri);
        startActivityForResult( intent, CAMERA_REQUEST_CODE );
    }    

  protected void onActivityResult(int requestCode, int resultCode, Intent data) 
    {   
        super.onActivityResult(requestCode, resultCode, data);
        if (requestCode == CAMERA_REQUEST_CODE && resultCode == RESULT_OK)
        {
        // test if exits image
        if((new File(_path)).exists())
            ... do something
        }
    ... continue 
```

if((new File(_path)).exists()) 总是返回 FALSE，这怎么可能？

提前比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T03:57:16.963

我从未在我的应用程序中看到过这种情况。但是，这*可能*是一种解决方法。

**注意：**全局声明`Uri`实例`initialURI`，以便您可以在整个 Activity 中使用它。您还可以将名称更改为适合您的命名约定的名称。

在此，在触发 Intent 之前，我传递了要存储的 Image 的特定路径以及`File`.

```
Intent getCameraImage = new Intent("android.media.action.IMAGE_CAPTURE");

File cameraFolder;

if (android.os.Environment.getExternalStorageState().equals
        (android.os.Environment.MEDIA_MOUNTED))
    cameraFolder = new File(android.os.Environment.getExternalStorageDirectory(),
            "SOME_FOLDER_NAME/");
else
    cameraFolder= StatusUpdate.this.getCacheDir();
if(!cameraFolder.exists())
    cameraFolder.mkdirs();

SimpleDateFormat dateFormat = new SimpleDateFormat("yyyyMMdd'T'HHmmss");
String timeStamp = dateFormat.format(new Date());
String imageFileName = "picture_" + timeStamp + ".jpg";

File photo = new File(Environment.getExternalStorageDirectory(), 
        "SOME_FOLDER_NAME/" + imageFileName);
getCameraImage.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));
initialURI = Uri.fromFile(photo);

startActivityForResult(getCameraImage, ACTION_REQUEST_CAMERA); 
```

最后，在`onActivityResult()`：

**注意：**我猜这应该可以。我的应用程序使用 Aviary SDK，其代码与在此方法中完成的常规工作大不相同。

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == CAMERA_REQUEST_CODE && resultCode == RESULT_OK) {

        // USE EITHER THIS
        imgView.setImageURI(initialURI);

        // OR USE THIS
        getContentResolver().notifyChange(initialURI, null);

        ContentResolver cr = getContentResolver();

        try {   
            // SET THE IMAGE FROM THE CAMERA TO THE IMAGEVIEW
            Bitmap bitmap = android.provider.MediaStore.Images.Media.getBitmap(cr, initialURI);

            // SET THE IMAGE USING THE BITMAP
            imgvwSelectedImage.setImageBitmap(bitmap);
        } catch (Exception e) {
            e.printStackTrace();
        }

    }
} 
```

如果您不需要存储在 SD 卡上的图像，您可以在完成后将其删除。我猜这个（*猜是因为我从来没有经历过OP面临的问题*）这应该为你做。

哦。差点忘了。您需要在 Manifest 文件中声明此权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# java - 可编辑的二维阵列

> ID：15870575
> 
> 赞同：0
> 
> 时间：2013-04-08T02:58:08.583
> 
> 标签：java, arrays, class, for-loop, nullpointerexception

我想创建一个 2D 数组来创建飞机的迷你座位图。到目前为止，我已经成功打印出如下所示的内容：

> 1A(0) || 1B(0) || 1C(0)
> 
> 2A(0) || 2B(0) || 2C(0)
> 
> 3A(0) || 3B(0) || 3C(0)
> 
> 4A(0) || 4B(0) || 4C(0)

零代表一个空座位，数字一代表一个被占用的座位。

我首先使用作为头等舱类变量的数组创建了程序，但我想让这个程序可用于经济舱部分。这两个部分之间的唯一区别是数组的大小，因此我将代码编辑为如下所示：

```
public class Seating
 { 
 private int FIRSTCLASS= 12; 
 private int ECONOMYCLASS= 240;
 private int occupied, column;
 private String[][] seatchart;
 private int[][] seatlist;
 private String[][] namelist;
 private String name; 
 public String customer;

public Seating(String seatclass) 
{ 
    seatclass.toUpperCase();
    if (seatclass.equals("FIRSTCLASS"))
    { 
      seatchart= new String[FIRSTCLASS/3][3];
      seatlist= new int[FIRSTCLASS/3][3];
      namelist= new String[FIRSTCLASS/3][3];
    }
    else 
    if (seatclass.equals("ECONOMY"))
    { 
      seatchart= new String[ECONOMYCLASS/3][3];
      seatlist= new int[ECONOMYCLASS/3][3];
      namelist= new String[ECONOMYCLASS/3][3];
    }   

}
public void Creation()
 {
   for (int i=0; i< seatlist.length; i++) 
    {  
        for (int j=0; j<seatlist[i].length; j++) 
        { 
            seatlist[i][j]= 0 ;

        }
    } 
```

我收到一个空指针异常错误， `for (int i=0; i< seatlist.length; i++)` 我该如何解决这个错误？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T03:05:55.827

代码行可以生成 NPE 的唯一方法是 if `seatlist`is `null`。除非您分配`null`给`seatlist`类中的其他位置，否则唯一的方法`null`是如果您传递给构造函数的参数与or`Seating`不匹配。检查您对构造函数的调用。此外，您可能只想使用.`"FIRSTCLASS"``"ECONOMY"``seatclass.equalsIgnoreCase()`

您应该修改您的构造函数以至少警告这种可能性，因为任何实例都`Seating`具有有效`seatlist`和`namelist`数组对于类的正确操作至关重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T03:09:47.827

问题在于这一行：

```
seatclass.toUpperCase(); 
```

将其替换为：

```
seatclass = seatclass.toUpperCase(); 
```

我认为您正在使用“firstclass”而不是“FIRSTCLASS”之类的字符串创建课程，对吗？这些不是相同的字符串，只是在字符串上调用 toUpperCase 方法而不将结果分配给要测试的变量意味着什么都不会发生。

然后，由于没有满足您的 if 条件，因此未初始化数组，并且在调用 Completion() 时会引发空指针异常。

我不确定您是否是 Java 编程新手，但我想向您的课程添加一些建议：

```
public class Seating {

 private static int FIRSTCLASS= 12;    // Make these constants static since they pertain to all 
 private static int ECONOMYCLASS= 240; // instances of your class. That way there is exactly on
                                       // copy of the variables, which is more memory efficient.
 private int occupied;
 private column;  // Okay but Java convention is to declare each member variable on its own line
                  // increases code readability.
 private String[][] seatchart;
 private int[][] seatlist;
 private String[][] namelist;
 private String locSeatClass;
 private String name;

 public String customer; // Okay but better to leave this private and then provide getter and
                         // setter methods to provide access to this string. Much easier to track
                         // down who is changing its value in your code.

public Seating(String seatclass) { // Java convention is to place the opening bracket here not
                                   // on the next line.  
    // Make sure that seatClass is not null or empty. NOTE: This is a neat trick for
    // simultaneously checking for both null and empty strings in one shot. Otherwise, you have
    // you have to check for null and then examine the string's length which is more code.
    if ("".equalsIgnoreCase(seatClass) {
        throw new IllegalArgumentException("Seat class undefined.");
    }

    // Store the seat class in a member variable for use. Could also be a local variable.
    // My original solution is problematic because it changes the original value of the seat
    // class that was passed into the constructor (you might want that information).
    locSeatClass = seatclass.toUpperCase();

    if (locSeatClass.equals("FIRSTCLASS"))
    { 
      seatchart= new String[FIRSTCLASS/3][3];
      seatlist= new int[FIRSTCLASS/3][3];
      namelist= new String[FIRSTCLASS/3][3];
    }
    else if (locSeatclass.equals("ECONOMY")) { 
      seatchart= new String[ECONOMYCLASS/3][3];
      seatlist= new int[ECONOMYCLASS/3][3];
      namelist= new String[ECONOMYCLASS/3][3];
    }
    else {
        // Throw an exception if someone passes in an unknown seat class string.
        throw new IllegalArgumentException("Unknown seat class detected.")
    }  

}

public void creation() { // NOTE: Java convention is to begin method names with a lower 
                         // case letter.

   // This method is unnecessary. Arrays of integers are initialized with an initial value
   // of zero by default. However, if you want to make your class reusable, you could change
   // change the name of the this method to clear, which would allow you to clear the arrays of
   // an existing object.
   for (int i=0; i< seatlist.length; i++) 
    {  
        for (int j=0; j<seatlist[i].length; j++) 
        { 
            seatlist[i][j]= 0 ;

        }
    } 
```

}

# android - 为什么我的基本/教程 android 应用程序崩溃？

> ID：15870578
> 
> 赞同：0
> 
> 时间：2013-04-08T02:58:24.773
> 
> 标签：android, launching-application

我只想创建一个应用程序，当用户单击启动器图标时，它会将他们带到我的网站。我在stackoverflow中找到了执行此操作的示例代码，它几乎可以工作。下面的代码确实成功地启动了一个网站，但在说“应用程序 John Project (process com.john.project) 已意外停止。请重试。”之后它还会显示一个弹出窗口。我猜我没有正确关闭我的应用程序？这是我的 MainActivity.java：

```
package com.john.project;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.content.Intent;
import android.net.Uri;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        String url = "http://project.john.com/";
        Intent i = new Intent(Intent.ACTION_VIEW);
        i.setData(Uri.parse(url));
        startActivity(i);

        //super.onCreate(savedInstanceState);
        //setContentView(R.layout.activity_main);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:00:03.060

你必须调用`super.onCreate()`onCreate()，否则你会因为`SuperNotCalledException`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T03:02:48.250

`super.onCreate()`在 onCreate() 的顶部添加。

# matlab - Matlab：从 Canny 边缘检测器中提取线段

> ID：15870582
> 
> 赞同：0
> 
> 时间：2013-04-08T02:58:37.850
> 
> 标签：matlab, lines, edge-detection

有没有办法从 Matlab 中内置的 Canny 边缘检测器中获取所有线段？

edgeImage = edge(image, 'canny') <-- Matlab 是否有方法使 edgeImage 中的线段可访问？

# java - DecimalFormat 千分位分隔符

> ID：15870587
> 
> 赞同：0
> 
> 时间：2013-04-08T02:59:23.703
> 
> 标签：java

我正在尝试为具有百万分之一位的小数设置十进制格式的撇号分隔符。我收到格式错误的模式错误。

```
String text = ".000'000";
DecimalFormat dformat = new DecimalFormat(text); 
```

使用的正确字符串是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T03:08:57.573

如[http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)所述，您需要两个单引号，一个接一个。第一个将被视为转义字符。

# sml - 如何重新创建解压缩

> ID：15870588
> 
> 赞同：1
> 
> 时间：2013-04-08T02:59:26.423
> 
> 标签：sml

我正在尝试重新创建解压缩，这就是我到目前为止所得到的，在遇到障碍之前。

```
fun myUnZip [] = []
  | myUnZip ((x1,x2)::tail) = (* x1 :: myUnZip tail and also do x2 :: tail *) 
```

现在，我知道第二行是不可能的，所以这就是为什么我把评论放在那里以显示我打算做什么。
关于我应该如何正确执行此操作的任何帮助？

这是我学习这门语言的第二天，我只是想学习模式匹配。我目前正在阅读 Elementary Standard ML 这本书，它在某种程度上涵盖了从列表中解压缩元组的主题。尽管这本书为我提供了一个解决方案，但我对此有点不知所措，并希望其他人对此有不同的解决方案，或者可能对本书的解压缩解决方案提供一些评论。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T03:04:32.547

```
fun unzip [] = ([], [])
  | unzip ((x,y)::xys)  =
      let val (xs,ys) = unzip xys in (x::xs,y::ys) end; 
```

# c++ - 为什么 CreateCompatibleBitmap 在大约一千次执行后会失败？

> ID：15870591
> 
> 赞同：4
> 
> 时间：2013-04-08T02:59:56.207
> 
> 标签：c++, bitmap

我正在尝试编写屏幕捕获/记录应用程序。这是捕获屏幕并保存它的代码部分：

```
width = GetSystemMetrics(SM_CXMAXTRACK)+8;
height = GetSystemMetrics(SM_CYMAXTRACK)-8;

hwindowDC=GetDC(GetDesktopWindow());
hwindowCompatibleDC=CreateCompatibleDC(hwindowDC);
SetStretchBltMode(hwindowCompatibleDC,COLORONCOLOR);  

// create a bitmap
hbwindow = CreateCompatibleBitmap( hwindowDC, width, height);
cout << " handle to newly created bitmap: " << hbwindow << "\n";

SelectObject(hwindowCompatibleDC, hbwindow); //copy from hwindowCompatibleDC to hbwindow
StretchBlt( hwindowCompatibleDC, 0,0, width, height, hwindowDC, 0, 0,width,height, SRCCOPY); //change SRCCOPY to NOTSRCCOPY for wacky colors !

src.create(height,width,CV_8UC4);   
src.empty();
GetDIBits(hwindowCompatibleDC,hbwindow,0,height,src.data,(BITMAPINFO *)&bi,DIB_RGB_COLORS); 

DeleteDC(hwindowCompatibleDC); 
DeleteObject(hbwindow); 
```

大约一千次重复后，我的 cout 语句将新创建的句柄显示为 000000000000000 aka。空值。在那之前，我的应用程序运行良好。
我每次都删除创建的 DC 和位图，因此没有内存泄漏。任务管理器还确认没有内存泄漏。那么发生了什么？

感谢任何可以为此提供帮助的人。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T03:26:09.923

正如评论中提到的，这两个问题是 1）您没有释放从桌面窗口获得的 DC，以及 2）您在删除之前没有将原始位图选择回兼容的 DC。这两者都会导致 GDI 资源泄漏，这将导致您描述的症状。

固定代码如下：

```
width = GetSystemMetrics(SM_CXMAXTRACK)+8;
height = GetSystemMetrics(SM_CYMAXTRACK)-8;

hwindowDC=GetDC(GetDesktopWindow());
hwindowCompatibleDC=CreateCompatibleDC(hwindowDC);
SetStretchBltMode(hwindowCompatibleDC,COLORONCOLOR);  

// create a bitmap
hbwindow = CreateCompatibleBitmap( hwindowDC, width, height);
cout << " handle to newly created bitmap: " << hbwindow << "\n";

// SAVE OLD BITMAP
HGDIOBJ hOldBmp = SelectObject(hwindowCompatibleDC, hbwindow); //copy from hwindowCompatibleDC to hbwindow
StretchBlt( hwindowCompatibleDC, 0,0, width, height, hwindowDC, 0, 0,width,height, SRCCOPY); //change SRCCOPY to NOTSRCCOPY for wacky colors !

src.create(height,width,CV_8UC4);   
src.empty();
GetDIBits(hwindowCompatibleDC,hbwindow,0,height,src.data,(BITMAPINFO *)&bi,DIB_RGB_COLORS); 

// RESTORE OLD BITMAP
SelectObject(hwindowCompatibleDC, hOldBmp);
DeleteDC(hwindowCompatibleDC); 
DeleteObject(hbwindow);

// RELEASE WINDOW DC
ReleaseDC(GetDesktopWindow(), hwindowDC); 
```

您还应该进行适当的错误检查（因为调用`GetDC`等`CreateCompatibleDC`可能会失败并返回 NULL）。

# android - android无法打开文件进行阅读

> ID：15870594
> 
> 赞同：3
> 
> 时间：2013-04-08T03:00:34.170
> 
> 标签：android, usb-debugging

嗨，我创建了我的第一个 Hello World 应用程序并按照 developer.android 上发布的说明进行操作，但是当我连接我的索尼 xperia 并启用调试并运行我的应用程序时，我在 logcat 错误中看到“E /（4446）：不能打开文件进行阅读”我正在使用 Eclipse 的 ADT 插件

```
package com.example.myfirstapp;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
public class MyMainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_my_main);
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_my_main, menu);
        return true;
    }
}
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.myfirstapp"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.myfirstapp.MyMainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MyMainActivity" >
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world" />

</RelativeLayout> 
```

任何想法请什么导致“无法打开文件”错误感谢您对完整 logcat 堆栈的支持

```
04-08 12:20:07.350: D/TextLayoutCache(4446): Using debug level: 0 - Debug Enabled: 0
04-08 12:20:07.420: D/libEGL(4446): loaded /system/lib/egl/libGLES_android.so
04-08 12:20:07.420: D/libEGL(4446): loaded /system/lib/egl/libEGL_adreno200.so
04-08 12:20:07.430: D/libEGL(4446): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
04-08 12:20:07.440: D/libEGL(4446): loaded /system/lib/egl/libGLESv2_adreno200.so
04-08 12:20:07.460: I/Adreno200-EGLSUB(4446): <ConfigWindowMatch:2078>: Format RGBA_8888.
04-08 12:20:07.470: D/memalloc(4446): /dev/pmem: Mapped buffer base:0x5c63d000 size:3768320 offset:0 fd:64
04-08 12:20:07.480: E/(4446): Can't open file for reading
04-08 12:20:07.480: E/(4446): Can't open file for reading
04-08 12:20:07.480: D/OpenGLRenderer(4446): Enabling debug mode 0
04-08 12:20:07.550: D/memalloc(4446): /dev/pmem: Mapped buffer base:0x5ce2c000 size:33538048 offset:29769728 fd:67
04-08 12:20:33.110: D/OpenGLRenderer(4446): Flushing caches (mode 0)
04-08 12:20:33.130: D/memalloc(4446): /dev/pmem: Unmapping buffer base:0x5c63d000 size:3768320 offset:0
04-08 12:20:33.130: D/memalloc(4446): /dev/pmem: Unmapping buffer base:0x5ce2c000 size:33538048 offset:29769728
04-08 12:20:33.140: D/OpenGLRenderer(4446): Flushing caches (mode 1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:29:31.847

当你运行你的应用程序时，你看到你的“hello world”字符串了吗？错误中没有任何内容表明它是由您的应用程序引发的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:41:04.353

确保您检查了使用 File 的权限（读取、写入、...）。

# .net - 概念：子类中的变量名是什么？他们有名字吗？

> ID：15870595
> 
> 赞同：1
> 
> 时间：2013-04-08T03:00:47.397
> 
> 标签：.net, oop, class, object

我正在使用.NET，但我想这会扩展到其他语言......

所以当一个子类继承一个类时，它会得到父类的成员变量和属性。假设有一个私有变量名称“mFirstName”，并且有一个名为 FirstName 的 ReadOnly 属性，它从对象中获取 FirstName 的值。

我创建了另一个继承这个父类的类，在子类中我可以使用 FirstName 属性来获取子类中变量的值......但是那个变量的名称是什么？

或者换句话说，在父类中有一个名为 mFirstName 的私有变量。您将子类中的等效变量称为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T03:05:52.430

子类将继承所有字段，包括私有变量，如`mFirstName`. 如果父类实现了`FirstName`读取和写入私有`mFirstName`变量的属性，那么子类也将如此，除非您覆盖它。 `mFirstName`但是，子类将看不到该属性，但该`FirstName`属性将 - 子类必须使用父类实现，`FirstName`或者如果允许，以某种其他方式实现它并覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T03:17:26.837

这实际上不是*名称*问题，而是*可访问性问题。*

私有字段仍然是派生类的成员状态，它只是碰巧是成员状态，除非派生类是基类的嵌套类，否则您将无法通过名称直接访问。

```
public class Foo
{
    private int bar;

    public virtual void Do()
    {
        this.bar = 1;
    }

    private class DerivedFoo : Foo
    {
        public override void Do()
        {
            this.bar = 2;
        }
    }
} 
```

在上面的示例中，该字段是私有的，但派生类仍然可以访问该字段。继承自的*外部*类`Foo`将不具有相同的能力。

所以字段名称相同，字段仍然是派生类的状态。*可访问性*完全取决于继承者。

# html - 在背景图像周围放置按钮

> ID：15870599
> 
> 赞同：0
> 
> 时间：2013-04-08T03:00:58.710
> 
> 标签：html, css

我想在背景图像周围放置多个链接按钮。这是HTML：

```
<body>
    <div id="background">
        <div id="abt"><a href="pages/about.html" class="button-link" id="aboutus">About Us</a></div>
        <div id="ofc"><a href="pages/office.html" class="button-link" id="office">Office</a></div>
        <div id="staf"><a href="pages/staff.html" class="button-link" id="staff">Staff</a></div>
        <div id="msg"><a href="pages/message.php" class="button-link" id="message">Message</a></div>
    </div>
</body> 
```

我想将它们放置在背景周围，以便它们保持固定。

示例：http: [//jsfiddle.net/kimonante/2cvz4/1/](http://jsfiddle.net/kimonante/2cvz4/1/)

```
body {
    background:url(http://www.factoryoutletstores.info/img/usa-map.gif) no-repeat;
    background-attachment:fixed;
    /*fix the shit*/
    background-position:center;
}
.button-link {
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    border: solid 1px #20538D;
    text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.4);
    -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4), 0 1px 1px rgba(0, 0, 0, 0.2);
    -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4), 0 1px 1px rgba(0, 0, 0, 0.2);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4), 0 1px 1px rgba(0, 0, 0, 0.2);
    padding: 10px 25px;
    background: #0d0f12;
    color: #FFF;
    font-family:arial;
    font-weight:600;
    display:block;
}
.button-link:hover, .button-link:focus {
    background: #356094;
    border: solid 1px #2A4E77;
    text-decoration: none;
}
.button-link:active {
    -webkit-box-shadow: inset 0 1px 4px rgba(0, 0, 0, 0.6);
    -moz-box-shadow: inset 0 1px 4px rgba(0, 0, 0, 0.6);
    box-shadow: inset 0 1px 4px rgba(0, 0, 0, 0.6);
    background: #2E5481;
    border: solid 1px #203E5F;
}
a {
    text-decoration:none;
    color:white;
    width:100px;
    text-transform:uppercase;
    padding-left:18px;
}
#abt {
    margin-left:540px;
    margin-top:200px;
}
#ofc {
    margin-left:160px;
    margin-top:105px;
}
#msg {
    margin-left:930px;
    margin-top:-240px;
}
#staf {
    margin-left:360px;
    margin-top:260px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T03:06:08.717

由于您的按钮是按像素定位的，因此您需要将您的按钮设置`div#background`为固定大小并将背景设置为`div#background`而不是正文。

同时删除背景附件。此版本有效：http: [//jsfiddle.net/BTVZz/](http://jsfiddle.net/BTVZz/)

# java - Listview 中的布局问题

> ID：15870602
> 
> 赞同：2
> 
> 时间：2013-04-08T03:01:23.757
> 
> 标签：java, android, xml, android-layout

我有问题设计明智。我希望在 listView 的一行内水平显示两张图片。像这样：

```
 TextView
  ImageView
  ImageView 
```

我想看看我是否可以只使用一个 xml，或者我是否必须考虑完全使用不同的视图。我通过 baseadapter 有 Listview 和自定义行 xml。详情见代码

```
 public class MyCustomBaseAdapter extends BaseAdapter {

        private Integer[] imgid = {
                R.drawable.up2,
                R.drawable.up3,
                R.drawable.up4,
                R.drawable.up5,
                R.drawable.up6,
                R.drawable.up7,
                R.drawable.up8,
                R.drawable.up9,
                R.drawable.down2,
                R.drawable.down3,
                R.drawable.down4,
                R.drawable.down5,
                R.drawable.down6,
                R.drawable.down7,
                R.drawable.down8,
                R.drawable.down9 };

        private static ArrayList<DisplayResults> searchArrayList;

        private LayoutInflater mInflater;

        public MyCustomBaseAdapter(Context context, List<DisplayResults> list) {
            searchArrayList = (ArrayList<DisplayResults>) list;
            mInflater = LayoutInflater.from(context);
        }

        public int getCount() {
            return searchArrayList.size();
        }

        public Object getItem(int position) {
            return searchArrayList.get(position);
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            ViewHolder holder;
            if (convertView == null) {
                convertView = mInflater.inflate(R.layout.list_row, null);
                holder = new ViewHolder();
                //holder.txtName = (TextView)                         `     

                        convertView.findViewById(R.id.ServiceName);
                holder.imgPhoto = (ImageView) convertView.findViewById(R.id.Up);

                //holder.imgPhoto2= (ImageView) convertView.findViewById(R.id.Down);

                convertView.setTag(holder);
            } else {
                holder = (ViewHolder) convertView.getTag();
            }

            //holder.txtName.setText(searchArrayList.get(position).getName());      

      holder.imgPhoto.setImageResource(imgid[searchArrayList.get(position).getImageNumber()]);
            System.out.println(searchArrayList.get(position).getImageNumber());
            //holder.imgPhoto2.setImageResource(imgid[searchArrayList.get(position).getImageNumber2()]);

            return convertView;
        }

        static class ViewHolder {
            TextView txtName;
            ImageView imgPhoto;
            //ImageView imgPhoto2;
        }
    }

    public class satDataFrag extends Fragment {

    Data datas;

    ListView listView;
    LayoutInflater inflaterT;

    public satDataFrag(Data data)
    {
        this.datas=data;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
    {   
        View view = inflater.inflate(R.layout.sat, container, false);
        inflaterT = inflater;
        listView = (ListView) view.findViewById(R.id.listSat);

        //ImageView imgView;
        //imgView = (ImageView) view.findViewById(R.id.icon);

        List<DisplayResults> List =  new ArrayList<DisplayResults>();

        DisplayResults temp= new DisplayResults();
        for(int i=0; i<datas.features.size(); i++)
        {

        if(datas.features.get(i).attributes.ServiceTyp.equalsIgnoreCase("Satellite"))
            {
                temp.setName(datas.features.get(i).attributes.dbANAME);

    temp.setImageNumber(upKey(datas.features.get(i).attributes.maxADUP));
    temp.setImageNumber2(downKey(datas.features.get(i).attributes.maxADDOWN));
                List.add(temp);
            }
        }

        //ArrayAdapter<Integer> adapter = new ArrayAdapter<Integer>(getActivity(),
            //    R.layout.list_row, List);

        listView.setAdapter(new MyCustomBaseAdapter(getActivity(), List)); 
        return view;    

        }

    public Integer upKey (String max)
    {

        if(max.equalsIgnoreCase("2"))
        {
            return 0;
        }
        else if(max.equalsIgnoreCase("3"))
        {
            return  1;
        }
        else if(max.equalsIgnoreCase("4"))
        {
            return 2;
        }
        else if(max.equalsIgnoreCase("5"))
        {
            return  3;
        }
        else if(max.equalsIgnoreCase("6"))
        {
            return  4;
        }
        else if(max.equalsIgnoreCase("7"))
        {
            return  5;
        }
        else if(max.equalsIgnoreCase("8"))
        {
            return  6;
        }
        else if(max.equalsIgnoreCase("9"))
        {
            return  7;
        }
        else 
        {
            return 7;
        }

    }

    public Integer downKey (String max)
    {

        if(max.equalsIgnoreCase("2"))
        {
            return 8;
        }
        else if(max.equalsIgnoreCase("3"))
        {
            return  9;
        }
        else if(max.equalsIgnoreCase("4"))
        {
            return 10;
        }
        else if(max.equalsIgnoreCase("5"))
        {
            return  11;
        }
        else if(max.equalsIgnoreCase("6"))
        {
            return  12;
        }
        else if(max.equalsIgnoreCase("7"))
        {
            return  13;
        }
        else if(max.equalsIgnoreCase("8"))
        {
            return  14;
        }
        else if(max.equalsIgnoreCase("9"))
        {
            return  15;
        }
        else 
        {
            return 7;
        }
    }

} 
```

* * *

```
 custom_row.xml 
```

* * *

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="match_parent">    

   <TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:id="@+id/ServiceName"
    android:text=""/>

    <ImageView
        android:id="@+id/Up"
        android:layout_gravity="left"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        />

    <ImageView 
        android:id="@+id/Down"
        android:layout_gravity="left"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    </LinearLayout> 
```

所以我的问题是：有没有办法在列表视图内的一行中显示两个图像和一个文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:56:43.587

正如您提供的 XML，我可以看到**TextView**和**ImageView**的**宽度**为“match_parent”。因此，删除该代码并替换为以下代码。

我正在向 TextView 提供“wrap_content”。这将为 TextView 在渲染后提供所需的空间。并且 ImageView 提供了“100dp”的宽度，所以它们不会超过它，因为可能是图像很大，如果我们将它们设置为“wrap_content”，它们会占据整个宽度和高度。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:id="@+id/ServiceName"
        android:text=""/>

    <ImageView
        android:id="@+id/Up"
        android:layout_gravity="left"
        android:layout_width="100dp"
        android:layout_height="wrap_content"/>

    <ImageView 
        android:id="@+id/Down"
        android:layout_gravity="left"
        android:layout_width="100dp"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

还有另一个选项可用，“重量”。

您可以为视图的内部线性布局提供**权重。**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content" 
        android:layout_weight="1"
        android:id="@+id/ServiceName"
        android:text=""/>

    <ImageView
        android:id="@+id/Up"
        android:layout_gravity="left"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"/>

    <ImageView 
        android:id="@+id/Down"
        android:layout_gravity="left"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T02:58:03.630

这是我创建的答案！

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_gravity="left">

        <TextView
            android:id="@+id/ServiceName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:layout_gravity="left" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_gravity="left">

        <ImageView
            android:id="@+id/Down"
            android:layout_weight="1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

    </LinearLayout>

    <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:layout_gravity="left">

        <ImageView
            android:id="@+id/Up"
            android:layout_weight="1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

    </LinearLayout>

</LinearLayout> 
```

# mobile - 使用移动数据连接进行基准测试

> ID：15870603
> 
> 赞同：0
> 
> 时间：2013-04-08T03:01:26.323
> 
> 标签：mobile, benchmarking

我有一个需要一些建议的基准测试情况。

这基本上是一个场景。我通常使用 Jmeter 来对网页加载进行基准测试。

但是，在这种情况下，我打算对将进行一些 API 调用的 URL 进行基准测试。基本上我有兴趣查看每个 API 调用的响应时间。

棘手的部分是其中一个 API 调用需要移动数据连接 (3G/4G)，因为该连接将被重定向到运营商以识别手机号码属于哪个运营商。如果每个运营商都不能识别手机号码，API调用就会失败。

我通过将我的机器连接到系留手机进行了手动基准测试（使用 Jmeter）。这行得通，但是，我发现让一台机器无线连接到手机只是为了运行基准测试是不切实际的。我无法想象将手机（适用于每个运营商）放在服务器机房中。

有没有人对需要 3g/4g 连接的 API 进行基准测试有任何想法或经验？那里有任何工具吗？

我试着用谷歌搜索，但没有找到任何有用的东西。任何建议表示赞赏。

# java - 在Java中为网格创建绘制矩形（填充黑色）函数

> ID：15870608
> 
> 赞同：10
> 
> 时间：2013-04-08T03:01:56.357
> 
> 标签：java, swing, graphics, grid, paint

我在我的程序中创建了一个网格。下面是用于创建网格的代码。

```
import java.awt.Graphics;

import javax.swing.JComponent;
import javax.swing.JFrame;

class Grid extends JComponent {
    public void paint(Graphics g) {
        g.drawRect (10, 10, 800, 500);    

        for (int i = 10; i <= 800; i+= 10)
            g.drawLine (i, 10, i, 510);

        for (int i = 10; i <= 500; i+= 10)
            g.drawLine (10, i, 810, i);
    }
}

public class CoreControl {

    public static void main(String[] a) {
        JFrame window = new JFrame();
        window.setSize(840,560);
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        window.getContentPane().add(new Grid());
        window.setVisible(true);
    }

} 
```

我想要做的是创建一个函数，它将根据我给它的坐标绘制一个矩形（用黑色填充）。基本上我想用黑色填充网格的某些单元格，我的想法是在单元格坐标上绘制黑色填充矩形。我如何实现这个功能？

我尝试制作另一个名为 drawRectangle 的类，并在主函数中调用它，例如 window.getContentPane().add(new drawRectangle()); 但是那不起作用（只显示drawRectangle而不显示网格）。

我还希望能够反复使用此功能来继续创建矩形。

如何创建此功能？

另外，如果您知道我应该构建这个程序的更好方法，请告诉我（我是 Java 新手，所以我愿意接受任何建议）。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-08T03:05:43.533

1.  不要使用`paint`，使用`paintComponent`并且不要忘记调用`super.paintComponent`
2.  `JComponent`可能不是最好的选择，`JPanel`可能是更好的选择
3.  有什么问题[`Graphics#fillRect(int, int, int, int)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#fillRect%28int,%20int,%20int,%20int%29)？

您可以查看[Performing Custom Painting](http://docs.oracle.com/javase/tutorial/uiswing/painting/) and [2D Graphics](http://docs.oracle.com/javase/tutorial/2d/)了解更多详细信息。

我建议不要尝试使用第二个组件来执行填充。只需在网格类中提供一个方法，该方法提供单元格的 x/y 位置（以网格形式）并在`paintComponent`方法中填充单元格

**更新了示例**

![在此处输入图像描述](https://i.stack.imgur.com/3EWmf.png)

```
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Point;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class CoreControl {

    public static class Grid extends JPanel {

        private List<Point> fillCells;

        public Grid() {
            fillCells = new ArrayList<>(25);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            for (Point fillCell : fillCells) {
                int cellX = 10 + (fillCell.x * 10);
                int cellY = 10 + (fillCell.y * 10);
                g.setColor(Color.RED);
                g.fillRect(cellX, cellY, 10, 10);
            }
            g.setColor(Color.BLACK);
            g.drawRect(10, 10, 800, 500);

            for (int i = 10; i <= 800; i += 10) {
                g.drawLine(i, 10, i, 510);
            }

            for (int i = 10; i <= 500; i += 10) {
                g.drawLine(10, i, 810, i);
            }
        }

        public void fillCell(int x, int y) {
            fillCells.add(new Point(x, y));
            repaint();
        }

    }

    public static void main(String[] a) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                Grid grid = new Grid();
                JFrame window = new JFrame();
                window.setSize(840, 560);
                window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                window.add(grid);
                window.setVisible(true);
                grid.fillCell(0, 0);
                grid.fillCell(79, 0);
                grid.fillCell(0, 49);
                grid.fillCell(79, 49);
                grid.fillCell(39, 24);
            }
        });
    }
} 
```

# opencv - 使用opencv2从视频中保存图像序列

> ID：15870612
> 
> 赞同：2
> 
> 时间：2013-04-08T03:02:47.203
> 
> 标签：opencv, video, sequences

新手问题，是的，我花了很多时间筛选类似的问题和答案，但没有运气。

我想要做的是按顺序保存视频文件中的帧。我已经设法使用 c 保存了一张图像，之后我似乎无法保存图像。我已经开始在 opencv 中使用 c++ 而不是 c，我所能做的就是查看视频而不是从中保存任何 jpg。

如果有帮助，我在 mac 上使用 opencv2.4.4a。下面是我的c示例

```
#include <stdio.h>
#include <stdlib.h>
#include <opencv/cv.h>
#include <opencv/highgui.h>
#include <iostream>

using namespace cv;
using namespace std;

int main (int argc, char** argv)
{
//initializing capture from file
CvCapture * capture = cvCaptureFromAVI ("/example/example.mov");

//Capturing a frame
IplImage* img = 0;
if(!cvGrabFrame(capture))      //capture a frame
{
printf)Could not grab a fram\n\7");
exit(0);
}
img=cvRerieveFrame(capture);    //retrieve the captured frame

//writing an image to a file
if (!cvSaveImage("/frames/test.jpg", img))
printf("Could not save: %s\n","test.jpg");

//free resources
cvReleaseCapture(&capture);

} 
```

先感谢您

对以上内容进行编辑。

我已经添加到上面的代码中，这会导致图像与 test.jpg 一起保存，然后用下一帧重写。我如何告诉opencv不要复制最后一张图像并将下一帧重命名为test_2.jpg，例如test_1.jpg、test_2.jpg等等？

```
double num_frames = cvGetCaptureProperty (capture, CV_CAP_PROP_FRAME_COUNT);

for (int i = 0; i < (int)num_frames; i++)
{
img = cvQueryFrame(capture);
cvSaveImage("frames/test.jpg", img);
}

cvReleaseCapture(&capture);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-06T18:51:37.270

这是我的代码...我尝试了很多，最后使用opencv 3使它成为c++ ...希望它有效

```
#include "opencv2/opencv.hpp"
#include <sstream>
#include <iostream>

using namespace cv;
using namespace std;

 Mat frame,img;
    int counter;

int main(int,char**)
   {
        VideoCapture vid("video3.avi");

while (!vid.isOpened())
{
    VideoCapture vid("video2.MOV");
    cout << "charging" << endl;
    waitKey(1000);

}

cout << "Video opened!" << endl;

while(1)
{
    stringstream file;

    vid.read(frame);
    if(frame.empty()) break;
    file << "/home/pedro/workspace/videoFrame/Debug/frames/image" << counter << ".jpg";
    counter++;
    imwrite(file.str(),frame);

    char key = waitKey(10);
 if ( key == 27)
 {break;}

}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:46:10.310

使用将跟踪文件名中的数字部分的索引。在图像捕获循环中，添加带有文件名的索引并构建最终文件名。

这是一个例子：

```
while(1)
{
     cap.read ( frame);
     if( frame.empty()) break;
     imshow("video", frame);
     char filename[80];
     sprintf(filename,"C:/Users/cssc/Desktop/testFolder/test_%d.png",i);
     imwrite(filename, frame);
     i++;
     char key = waitKey(10);
     if ( key == 27) break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-04T19:54:56.873

这是我在 Python3.0 中的做法。必须有 CV2 3+ 版本才能工作。此功能以给定的频率保存图像。

```
import cv2
import os
print(cv2.__version__)

# Function to extract frames 
def FrameCapture(path,frame_freq): 

    # Path to video file 
    video = cv2.VideoCapture(path) 
    success, image = video.read()

    # Number of frames in video
    fps = int(video.get(cv2.CAP_PROP_FPS))
    length = int(video.get(cv2.CAP_PROP_FRAME_COUNT))

    print('FPS:', fps)
    print('Extracting every {} frames'.format(frame_freq))
    print('Total Frames:', length)
    print('Number of Frames Saved:', (length // frame_freq) + 1)

    # Directory for saved frames
    try:
        frame_dir = path.split('.')[0]
        os.mkdir(frame_dir)
    except FileExistsError:
        print('Directory ({}) already exists'.format(frame_dir))

    # Used as counter variable 
    count = 0

    # checks whether frames were extracted 
    success = 1

    # vidObj object calls read 
    # function extract frames 

    while count < length :
        video.set(cv2.CAP_PROP_POS_FRAMES , count)
        success, image = video.read()
        # Saves the frames with frame-count 
        cv2.imwrite(frame_dir + "/frame%d.jpg" % count, image)
        count = count + frame_freq 
```

# python - Python，重新创建一个套接字并自动重新连接

> ID：15870614
> 
> 赞同：8
> 
> 时间：2013-04-08T03:02:57.927
> 
> 标签：python, irc

我正在用 Python 编写一个 IRC 机器人。

来源：[http://pastebin.com/gBrzMFmA](http://pastebin.com/gBrzMFmA)（对不起，pastebin，我不知道如何有效/正确地使用这里的代码标签）

当“irc”套接字死亡时，我是否可以检测它是否死亡然后自动重新连接？

我现在在谷歌上搜索了一段时间，发现我必须创建一个新的套接字。我正在尝试并添加一些东西，比如在 while True: 中捕获 socket.error：但它似乎只是挂起并且没有正确重新连接..

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-26T06:19:07.603

在这里回答：[Python：检查 IRC 连接是否丢失（PING PONG？）](https://stackoverflow.com/questions/6853071/python-check-if-irc-connection-is-lost-ping-pong)

虽然问题所有者接受的答案有效，但我更喜欢 John Ledbetter 的答案，因为它很简单：[https ://stackoverflow.com/a/6853352/625919](https://stackoverflow.com/a/6853352/625919)

所以，对我来说，我有一些类似的东西

```
def connect():
    global irc
    irc = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    irc.connect((server, port))
    #and nick, pass, and join stuffs
connect()
while True:
    data = irc.recv(4096)
    if len(data) == 0:
        print "Disconnected!"
        connect() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-28T06:08:25.260

这是重新连接套接字的代码

```
import socket
import time

username = "Manivannan"
host = socket.gethostname()    
port = 12345                   # The same port as used by the server
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
connected = False
print("Server not connected")
while True:
  if(not connected):
    try:
        s.connect((host, port))
        print("Server connected")
        connected = True
    except:
        pass
  else:
    try:
        s.sendall(username.encode('utf-8'))
    except:
        print("Server not connected")
        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        connected = False
        pass
    time.sleep(5)
s.close() 
```

# reporting-services - sql server 报告服务虚拟文件夹托管在哪里？

> ID：15870618
> 
> 赞同：7
> 
> 时间：2013-04-08T03:03:21.077
> 
> 标签：reporting-services, ssrs-2012

我安装了 SSRS 2012 并尝试访问 [http://mybox.org/Reports](http://mybox.org/Reports)，但收到一条错误消息：

> 用户 'mybox\xxx' 没有所需的权限。验证是否已授予足够的权限并且已解决 Windows 用户帐户控制 (UAC) 限制

所以我试图检查 IIS 设置。但惊奇地发现，在我的 IIS 8 管理控制台中，没有 Reports 站点或虚拟文件夹。那么，报告在哪里托管？以及如何解决此权限错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-02-25T21:15:32.490

报告服务器和报告管理器的物理目录可以在以下位置找到：

`\Program Files\Microsoft SQL Server\MSRS11.MSSQLSERVER\Reporting Services`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T04:41:59.943

[SSRS 2008 不再需要 IIS 才能工作。](http://technet.microsoft.com/en-us/library/bb630449%28v=sql.100%29.aspx)听起来该错误直接来自 SSRS，而不是 Web 服务器。您需要使用报告管理器界面授予您的帐户 (MYBOX\xxx) 访问权限。（SSMS 不能再用于授予报表管理员权限）。

您需要本地管理员访问安装 SSRS 的计算机，因为它在报表管理器中自动具有系统范围的管理员权限。然后您只需导航到`http://localhost/reports`\MYBOX\xxx 并授予您所需的任何安全权限。

[SSRS 中用户权限管理的 MSDN 教程。](http://msdn.microsoft.com/en-au/library/aa337491%28v=sql.105%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-14T18:11:35.687

对于**SQL Server 2017**，位置模式已更改，现在的*默认*物理目录`ReportServer`为：

`C:\Program Files\Microsoft SQL Server Reporting Services\SSRS\ReportServer`

# python - Python 网络摄像头 Http 流和图像捕获

> ID：15870619
> 
> 赞同：2
> 
> 时间：2013-04-08T03:03:21.097
> 
> 标签：python, webcam

使用 Python，我需要能够从网络摄像头创建一个 http 流视频并从该 http 源捕获静态图像。我以为我可以使用 VLC 播放器流式传输视频并使用 python 捕获一帧，但如果 VLC 正在使用网络摄像头，Python 无法使用它来获取静止图像。这导致我认为我可以使用 python 流式传输视频，并且我可以在需要时使用相同的脚本来获取静止图像。我将使用我们使用的专有软件使用http流显示视频，单击按钮时抓取静止图像。

请就最好的方法提出任何建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:40:41.120

这取决于网络摄像头主机是 Windows 还是 Linux：

```
#!/usr/bin/env python

import pygame, sys
import pygame.camera
from pygame.locals import *
pygame.init()
pygame.camera.init()
screen = pygame.display.set_mode((320,240))
cam = pygame.camera.Camera("/dev/video4",(320,240))

cam.start()
while 1:
    image = cam.get_image()
    screen.blit(image,(0,0))
    pygame.display.set_caption(str("TUX PLOT CAM"))
    pygame.display.update()
    for event in pygame.event.get():
      if event.type == pygame.QUIT:
         sys.exit() 
```

我在这里找到了这个片段：（[https://www.linuxquestions.org/questions/programming-9/how-to-stream-a-webcam-with-python-905968/](https://www.linuxquestions.org/questions/programming-9/how-to-stream-a-webcam-with-python-905968/)）

而且，似乎有一个适用于 Windows 的解决方案：http: [//videocapture.sourceforge.net/](http://videocapture.sourceforge.net/)

这是另一个片段（也使用 pygame）： [http ://www.jperla.com/blog/post/capturing-frames-from-a-webcam-on-linux](http://www.jperla.com/blog/post/capturing-frames-from-a-webcam-on-linux)

# json - 模式匹配任何到列表中

> ID：15870623
> 
> 赞同：0
> 
> 时间：2013-04-08T03:04:08.100
> 
> 标签：json, scala, design-patterns

由于使用 scala json 解析，我得到以下结果。

```
import scala.util.parsing.json.JSON._
val j: String = """["this",["a","b",["c","d"]]]"""
val parse_test=parseFull(j) 
```

现在从这里我得到 Option[Any] 的结果

我可以`get`用来获取结果（在这种情况下我不关心无效的 json 格式，所以这应该是安全的，对吧？）

```
parse_test.get
res26: Any = List(this, List(a, b, List(c, d))) 
```

现在，我应该如何从这个`Any`到`List`我所期望的？我想我应该使用模式匹配，但我想不通。任何帮助将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:19:05.610

您可以做的是带有模式匹配和强制转换的折叠：

```
test_result.fold[List[String]](Nil){
  case _ :: list :: _ => list.asInstanceOf[List[String]]
  case _ => Nil
} 
```

假设您试图丢弃第一个元素，而第二个元素是您想要的列表。

编辑：

请注意，如果第二个元素不是列表，则此强制转换会导致异常。处理 List[Any] 并试图解码其中的内容*真的很可怕......*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:02:29.313

这是我的解决方案：

```
scala> val Some(xs @ List(_*)) = parse_test
xs: List[Any] = List(this, List(a, b, List(c, d))) 
```

# linux - 安排作业从 ftp 下载文件

> ID：15870625
> 
> 赞同：0
> 
> 时间：2013-04-08T03:04:16.323
> 
> 标签：linux, debian, scheduled-tasks

我看到有很多关于作业调度的线程，似乎我需要很长时间才能找出我正在寻找的线程。所以让我描述一下我需要什么，如果有相关的线程，如果你指点我，我将不胜感激。

我打算在 debian 机器上创建一个计划任务，每隔 15 分钟运行一次，以将文件从 ftp 服务器下载到某个本地文件夹。

为此我需要什么工具/程序？

我想我需要使用一些编程语言来编写下载文件的逻辑，所以如何使这个程序作为计划任务运行的问题。

如果你觉得表达不好，请编辑我的帖子。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T03:09:17.983

使用[cron](http://www.pantz.org/software/cron/croninfo.html) 编辑你`/etc/crontab`的：

```
*/15 * * * * /path/to/file 
```

`/path/to/file`写下你的ftp[命令](http://www.cyberciti.biz/faq/linux-unix-ftp-commands/)：

```
ftp google.com 
```

# ios - iOS如何打开pdf，而不是从NSBundle

> ID：15870626
> 
> 赞同：0
> 
> 时间：2013-04-08T03:04:32.290
> 
> 标签：ios, pdf, annotations, directory, bundle

我有一个需要注释 pdf 的应用程序。我一直在使用[如何在objective-c中编辑PDF的代码？](https://stackoverflow.com/questions/1333710/how-to-edit-a-pdf-in-objective-c)它很棒，除了文件位置部分。我从使用中获取 pdf

```
NSString *newFilePath = [[NSBundle mainBundle] pathForResource:@"Untitled_4" ofType:@"pdf"]; 
```

这在模拟器中有效，但不适用于我的测试 iPad。

我收到了这个错误：

```
CGDataConsumerCreateWithFilename: failed to open 'long boring file path' for writing: Operation not permitted. 
```

我也玩过

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *newFilePath = [documentsDirectory stringByAppendingPathComponent:@"Untitled_4.pdf"]; 
```

我现在明白“您不允许写入应用程序包”。谢谢[操作无法完成。不允许操作](https://stackoverflow.com/questions/5600269/the-operation-couldnt-be-completed-operation-not-permitted)

当我稍后尝试打开新的带注释的 pdf 时，它无法正确打开。

任何帮助将不胜感激。你们真棒！

希望这将帮助其他需要在 iOS 中使用 pdf 注释的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:38:27.490

回答我自己的问题。

我最终使用

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *newFilePath = [documentsDirectory stringByAppendingPathComponent:@"Untitled_4.pdf"]; 
```

然后画出一切。

问题不存在，它稍后会获得完成的 pdf 以显示它。我需要稍后使用相同的代码。

谢谢你的帮助。

希望以后发现这一点的任何困惑的人也能解决他们的问题。

# java - 上传时EPIPE（断管）？

> ID：15870631
> 
> 赞同：4
> 
> 时间：2013-04-08T03:05:15.463
> 
> 标签：java, android, upload, httpurlconnection

我的代码有问题，但我不知道 E 日志报告在哪里

```
04-08 05:47:46.745: E/Upload Server(20080): Starting  : /storage/sdcard1/Music/Piano (my favourites)/11 Tchaikovsky - The Music Lovers.mp3
04-08 05:47:47.136: E/Upload Server(20080): Connection Error : sendto failed: EPIPE (Broken pipe) 
```

什么是（EPIPE）？，当我尝试上传图像时，它的上传成功，但任何其他文件 E Cat 报告（断管）为什么！

这是我的上传代码

```
 @Override
    protected String doInBackground(String... urls) {

    String upLoadServerUri = "http://test.com/test.php";
    String fileName = this.file_path;
    HttpURLConnection connection = null;
    DataOutputStream outputStream = null;
    String lineEnd = "\r\n";
    String twoHyphens = "--";
    String boundary = "*****";
    int bytesRead, bytesAvailable, bufferSize;
    byte[] buffer;
    int maxBufferSize =  1*1024*1024;
    File sourceFile = new File(fileName);
    int sentBytes = 0;
    long fileSize = sourceFile.length();
    connection = null;

    try
    {

    FileInputStream fileInputStream = new FileInputStream(sourceFile);

    Log.e("Upload Server ", "Starting  : "+ fileName );

    URL url = new URL(upLoadServerUri);
    connection = (HttpURLConnection) url.openConnection();

    connection.setDoInput(true);
    connection.setDoOutput(true);
    connection.setUseCaches(false);
    connection.setChunkedStreamingMode(1024);
    connection.setRequestMethod("POST");
    connection.setRequestProperty("Connection", "Keep-Alive");
    connection.setRequestProperty("Content-Type","multipart/form-data;boundary="+boundary);
    outputStream = new DataOutputStream(connection.getOutputStream() );
    outputStream.writeBytes(twoHyphens + boundary + lineEnd);
    outputStream.writeBytes("Content-Disposition: form-data; name=\"file[]\";filename=\""+ fileName + "\"" + lineEnd);

       outputStream.writeBytes(lineEnd);
       bytesAvailable = fileInputStream.available();
       bufferSize = Math.min(bytesAvailable, maxBufferSize);
       buffer = new byte[bufferSize];

bytesRead = fileInputStream.read(buffer, 0, bufferSize);

   while (bytesRead > 0)
   {

   if(isCancelled()){

   break;
   }

   sentBytes += bytesRead;

   double percentDone = (sentBytes * 1.0) / fileSize * 100;
   publishProgress((int)percentDone);

   outputStream.write(buffer, 0, bufferSize);

   bytesAvailable = fileInputStream.available();

   bufferSize = Math.min(bytesAvailable,     maxBufferSize);
   bytesRead = fileInputStream.read(buffer, 0,      bufferSize);
   }

   if(isCancelled()){

    fileInputStream.close();
   outputStream.flush();
   outputStream.close();
   Log.e("Upload Server ", "upload Canceled " );
   return "canceled";
   }

   outputStream.writeBytes(lineEnd);
   outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
   int serverResponseCode       = connection.getResponseCode();
    fileInputStream.close();
   outputStream.flush();
   outputStream.close();

   if(serverResponseCode == 200)
   {
   Scanner s;
   s = new Scanner(connection.getInputStream());
   s.useDelimiter("\\Z");
   final String response = s.next();
   Log.e("Upload Server ", "Message : " + response);
   return response;
   }else
   {
   Log.e("Upload Server ", "Server Code Error : " + serverResponseCode );
   return "faild";
   }
   }  catch (final Exception e) {

   Log.e("Upload Server ", "Error : " +  e.getMessage() );
   }

   return "falid";
} 
```

请注意在 android 应用程序中的目标仍然更新 :) 我用谷歌搜索了我的问题，我找不到解决方案，请帮忙！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T03:13:46.017

“Broken pipe”表示您已写入已被对等方关闭的连接。

可能您已超出上传大小限制。

您还应该注意，您的使用`available()`是无效的。*Javadoc 中有一个关于不要*以您使用它的方式使用它的特定警告。反正你不需要它：

```
while ((count = in.read(buffer)) > 0)
{
  out.write(buffer, 0, count);
} 
```

其中`buffer`是任何合理的大小，例如 8192 字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-19T23:57:12.707

我在使用`HttpURLConnection`. 只需添加：

```
conn.setRequestProperty("connection", "close"); // disables Keep Alive 
```

到您的连接或为所有连接禁用它：

```
System.setProperty("http.keepAlive", "false"); 
```

从关于disconnect()的API：

> 释放此连接，以便其资源可以被重用或关闭。与其他 Java 实现不同，这不一定会关闭可重用的套接字连接。您可以通过在发出任何 HTTP 请求之前将 http.keepAlive 系统属性设置为 false 来禁用所有连接重用。

因此，Android 将重用旧的套接字连接。使用上面的代码禁用它可以修复它。

# php - 表格单元格PHP中的换行符

> ID：15870634
> 
> 赞同：1
> 
> 时间：2013-04-08T03:05:23.073
> 
> 标签：php, html

我正在尝试在我的表格单元格中执行几个换行符 (br)。但我的语法有问题。

下面是我在单个单元格中执行换行符 (br) 的代码，但它不起作用。我该怎么做呢？

```
echo("<tr><td>".$row[0]. 
                <br/> 
                $row[1]. 
                <br/> $row[2]. 
                <br/> 
                "<img src=images/".$row["skuCode"]."_1.jpg>".
                <br/>
                <a href=viewProductItem.php?skuCode=".$row[0].">View</a>".
                 "</td></tr>"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T03:10:20.060

您没有正确使用引号，但我认为使用heredoc 会容易得多。

```
echo <<<HTML
    <tr><td>$row[0]<br/>$row[1]<br/>$row[2]<br/>
    <img src=images/$row[skuCode]_1.jpg<br/>
    <a href=viewProductItem.php?skuCode=$row[0]>View</a>
    </td></tr>
HTML; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T03:08:30.710

您忘记了 s 周围的引号`<br/>`，请尝试：

```
echo("<tr><td>".$row[0]. 
                "<br/>" .
                $row[1]. 
                "<br/>". $row[2]. 
                "<br/>" .
                "<img src=images/".$row["skuCode"]."_1.jpg>".
                "<br/>".
                "<a href=viewProductItem.php?skuCode=".$row[0].">View</a>".
                 "</td></tr>"); 
```

或者：

```
echo("<tr><td>{$row[0]} 
                <br/> 
                {$row[1]} 
                <br/> {$row[2]} 
                <br/> 
                <img src=images/.$row[skuCode]._1.jpg>
                <br/>
                <a href=viewProductItem.php?skuCode={$row[0]}>View</a>.
                 </td></tr>"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T03:11:14.950

您忘记打开和关闭字符串中的引号：

```
<?php

echo "<tr><td>".$row[0]."<br/>".$row[1]."<br/>".$row[2]."<br/><img src=images/".$row["skuCode"]."_1.jpg><br/><a href=viewProductItem.php?skuCode=".$row[0].">View</a></td></tr>";

?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T03:09:27.093

尝试这个：

```
echo "<tr><td>{$row[0]}<br/>{$row[1]}<br/>{$row[2]}<br/><img src=\"images/{$row['skuCode']}_1.jpg\"><br/><a href=viewProductItem.php?skuCode=\"{$row[0]}\">View</a></td></tr>"; 
```

你忘了用括号括起来 br 标签，你也可以使用花括号永远不必退出你的字符串并在 php 中连接它

```
echo "String with $variable works";
echo "String with {$array['key']} works with curly bracers." 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T03:28:15.557

如果你想让它的 HTML 输出格式正确，那么你可以检查这个：

```
echo "<tr>\n";
echo "  <td>" . $row[0] . "<br />\n";
echo "  " . $row[1] . "<br />\n";
echo "  " . $row[2] . "<br />\n";
echo '  <img src="images/' . $row["skuCode"] . '_1.jpg"><br />' . "\n";
echo '  <a href="viewProductItem.php?skuCode=' . $row[0] . '">View</a></td><br />' . "\n";
echo "</tr>\n"; 
```

或这个：

```
echo "<tr>\n";
echo "  <td>" . $row[0] . "<br />\n";
echo "  " . $row[1] . "<br />\n";
echo "  " . $row[2] . "<br />\n";
echo "  <img src=images/" . $row["skuCode"] . "_1.jpg><br />\n";
echo "  <a href=viewProductItem.php?skuCode=" . $row[0] . ">View</a></td><br />\n"
echo "</tr>\n"; 
```

或者，如果您不喜欢这些，请查看以下内容：

```
echo("<tr><td>" . $row[0] . "\n" .
                "<br />\n" .
                $row[1] . "\n" .
                "<br />" . $row[2] . "\n" .
                "<br />\n" .
                "<img src=images/" . $row["skuCode"] . "_1.jpg>\n" .
                "<br />\n" .
                "<a href=viewProductItem.php?skuCode=" . $row[0] . ">View</a>\n" .
                 "</td></tr>\n"); 
```

# highslide - Highslide 禁用右键单击

> ID：15870635
> 
> 赞同：0
> 
> 时间：2013-04-08T03:05:34.770
> 
> 标签：highslide

我似乎无法让 Highslide 禁用右键单击放大的图像。我已将此代码一次添加到 header.php 和 pageTemplate.php。

```
 <script type="text/javascript">
       hs.blockRightClick = true;
    </script> 
```

根据本网站[http://highslide.com/ref/hs.blockRightClick](http://highslide.com/ref/hs.blockRightClick)

在 Highslide 代码中，它有一个如下所示的语句：

```
imageCreate : function() {
    var exp = this;

    var img = document.createElement('img');
    this.content = img;
    img.onload = function () {
        if (hs.expanders[exp.key]) exp.contentLoaded(); 
    };
    if (hs.blockRightClick) img.oncontextmenu = function() { return false; };
    img.className = 'highslide-image';
    hs.setStyles(img, {
        visibility: 'hidden',
        display: 'block',
        position: 'absolute',
        maxWidth: '9999px',
        zIndex: 3
    }); 
```

我错过了什么？为什么它不起作用？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:37:57.557

请确保在加载 highslide.js 脚本*后添加该阻止脚本。*它正在更改默认值，因此如果您调用阻塞脚本，*然后*加载 highslide.js，您将恢复为默认值！

# android - 如何从 Android 执行 RESTful POST 请求

> ID：15870636
> 
> 赞同：5
> 
> 时间：2013-04-08T03:05:37.880
> 
> 标签：android

我第一次尝试执行 REST Post，但我不知道从哪里开始。

我正在与[WordPress REST API](http://developer.wordpress.com/docs/api/)交互，并尝试使用[此](http://developer.wordpress.com/docs/api/1/post/sites/%24site/posts/%24post_ID/replies/new/)端点：`/sites/$site/posts/$post_ID/replies/new`，用于向某个帖子提交新评论。

我认为我对处理 GET 请求有很好的把握，因为我已经成功处理了其中的几个。有了这些，我可以通过 URL 说出我需要对服务器说的所有内容，但似乎 POST 请求必须有另一个步骤。我的问题是：那是什么步骤？

我是否将要提交的内容包装到 JSONObject 中并发布？如果是这样，我该如何发布？我是否需要以某种方式构造语句，类似于构造语句以在数据库上执行的方式？或者确实可以通过 URL 传递我的内容作为请求参数？

我知道这个问题对于 SO 来说有点开放，但我一直无法找到一个很好的教程来回答这些问题。如果你知道一个，请推荐它。

（我在一个 Android 应用程序中做这一切）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T03:13:31.673

我的答案直接取自在此处看到的 SO 上的另一个答案[在 Android 中发送 POST 数据，](https://stackoverflow.com/questions/2938502/sending-post-data-in-android)但为了方便起见，我在此处剪切并过去了答案，希望这会有所帮助

来自 Apache Commons 的 Http Client 是必经之路。它已经包含在android中。这是一个如何使用它进行 HTTP Post 的简单示例。

```
public void postData() {
    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://www.yoursite.com/script.php");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("id", "12345"));
        nameValuePairs.add(new BasicNameValuePair("stringdata", "Hi"));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T03:46:53.457

您需要在服务器上实现一个脚本，您的 POST 与该脚本交互，然后该脚本与您的数据库一起使用。

一个典型的场景是：

Java HTTP POST~~~> PHP ~~~~> MySql。

学习 PHP 的一个很好的起点是在 youtube 上查看 PHPAcademy 教程。

[http://www.youtube.com/course?list=EC442FA2C127377F07](http://www.youtube.com/course?list=EC442FA2C127377F07)

PHP 还将帮助您将结果编码为 JSON 并将其发送回您的客户端。

# c - 在 unix 中清除提示

> ID：15870643
> 
> 赞同：1
> 
> 时间：2013-04-08T03:06:21.763
> 
> 标签：c, unix, command-prompt, text-formatting

使用以下代码，我正在擦除提示但不清除屏幕。应该是什么原因？

```
 printf("\033[7mHello how are you doing? press 'q' to quit\033[0m");
   fflush(stdout);
   ----
   doing some other stuff
   ----

   printf("\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\
           \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\033[0m");
           fflush(stdout); 
```

我正在擦除提示，但它的痕迹会出现，直到我输入那么长的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:16:05.730

`printf("\033[2J");`这将清除终端屏幕。

我看到您正在使用跳过字符`\b`，您是否尝试将终端光标重置为开头？因为这也可以这样做：
`printf("\033[1;1H");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T03:16:57.283

`\b`仅移动光标位置，不会删除提示。

擦除为每个退格写一个空格。

```
char * hello = "\033[7mHello how are you doing? press 'q' to quit\033[0m" ;
int len = strlen( hello ) ;
for( int i = 0 ; i < len ; i++ )
{
    printf("\b \b");
} 
```

# python - 如何在 Windows 通知气球中添加换行符？

> ID：15870647
> 
> 赞同：2
> 
> 时间：2013-04-08T03:07:51.070
> 
> 标签：python, windows, notifications, pywin32, system-tray

我有一个显示通知的托盘栏应用程序。这些是常规的 Windows 通知，作为应用程序图标上方的气球。

这是基本代码：

```
class TrayIconApplication:
    def __init__(self):
        [very long code to setup instance]

    def notify(self, message, title):
        Shell_NotifyIcon(NIM_MODIFY,
                         (self.hwnd, 0, NIF_INFO, WM_USER + 20,
                          self.hicon, 'Balloon Tooltip', message, 200,
                          title)) 
```

如何在消息中添加换行符，使其出现在多行中？我试过`\n`and `\r\n`，但它们似乎不会影响文本。`\r`单独显示为单个空格并按`\t`预期工作，但所有消息仍仅显示在一行中。

和的组合`\r`以及`\n`它们的重复没有产生任何结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T03:35:48.483

我正在更改标题，而不是消息。我混合了参数的顺序，并显示了一个带有标题但为空消息的通知。而且标题行不能被打破，所以它忽略了我所有的尝试。

不同的是，标题稍大，呈蓝色，与关闭按钮显示在同一行。

我一切换参数，`\n`就开始被接受为换行符并显示多行气球通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T03:17:10.203

你试过\n\r吗？（\r\n 的反面）。我知道这听起来很愚蠢，但我在使用 Windows Unicode 字符排序时得到了意想不到的结果。如果所有其他方法都失败了，请尝试 0x0D、0x0A 或相反的方法，看看它是如何响应的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T03:23:03.287

我认为系统托盘图标的文本不允许明确的换行符。如果文本太长，Windows 会根据行宽自动将文本移动到下一行。

# recursion - OCAML 递归函数没有停止

> ID：15870656
> 
> 赞同：0
> 
> 时间：2013-04-08T03:09:46.077
> 
> 标签：recursion, ocaml, ml

并感谢您的帮助。我目前正在处理一项任务，并且一直被错误的递归调用所困扰。我有一个简单的 CAML-Light 函数，它应该接受一个列表和一个大小（数字），并返回一个包含该列表的一部分、该大小的列表以及一个包含其余部分的列表。实际上真的很简单，它是过去 PLT-Scheme 项目的翻译。

但是，我在递归调用时遇到了麻烦。我只是不知道为什么它不起作用。函数是这样的：

```
let rec cortar texto longitud resultado = match texto, longitud with
            |  _::t,0 -> resultado::(t::[])
            |  c::t,x-> cortar t (longitud-1) (consderecha resultado c);; 
```

经度是定义大小的整数。恐怕我做错了什么，因为它似乎无限循环，因为“经度”永远不会达到 0。我（你可能猜到）是 ML 的新手，它是方言，所以任何帮助都会非常感激。

谢谢！

**编辑**：解决了它，实际上并不是真的......原来我在列表上用逗号而不是分号调用函数。是的。那谢谢啦！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:57:45.790

很难回答，因为我看到代码有很多问题。

你说你的函数需要一个列表和一个大小，但是你在这里定义的函数需要三个参数。看来该`resultado`参数是累积的结果。将此参数添加到您的外部函数中有点不整洁。通常，您希望将其添加到内部函数中，以便外部函数与您的描述相匹配（即，它需要两个参数）。

语句中的两种模式都`match`假定它`texto`是非空的。这意味着您的模式并非详尽无遗，即，如果`texto`最初或在递归调用中为 null，则该函数将失败。

您的函数使用了一个`consderecha`未在任何地方定义的函数。我将假设它有一个相反的缺点，即它在列表的末尾添加一个值。（这不是处理列表的好方法。在列表末尾添加值很慢。）

但是，如果您抛开所有这些问题，我认为您的递归没有任何问题。当我在定义它的情况下尝试您的功能时，它几乎可以工作。（它似乎缺少列表中间的一个值。）

```
# cortar [1;2;3;4;5] 2 [];;
- : int list list = [[1; 2]; [4; 5]] 
```

可能不是没有停止，而是您的功能没有启动。也许你忘记了第三个参数？

# c - PIC24H POT 输入控制 LED 闪烁延迟非线性

> ID：15870657
> 
> 赞同：2
> 
> 时间：2013-04-08T03:09:47.267
> 
> 标签：c, microcontroller, led, analog-digital-converter

您好，我使用的是 PIC24H 微处理器，我编写了一个简单的程序，该程序使用模拟输入从 POT 获取输入，然后将其设置为延迟的模值。它似乎确实设置了延迟，但从左到右的进展似乎是随机且不一致的。帮助会很棒！谢谢！

```
int main (void){
    AD1CON1bits.ADON=0;
    AD1CON1=0x00E0;
    AD1CON1bits.AD12B=1;
    AD1CON3=0x8000;
    AD1CON2=0x8000;
    AD1CHS0=0x0000;
    AD1CON1bits.ADON=1;

    int wtdState;
    int delay;
    int temp;

// Set Analog Input Pin
    _CN2PUE=0;
    _TRISA0=1;
    _PCFG0=0;

//Set Digital Output Pins
    _ODCB15=0;
    _TRISB15=0;
    _LATB15=0;

    _ODCB14=0;
    _TRISB14=0;
    _LATB14=1;

    while(1){

    wtdState = _SWDTEN;
    _SWDTEN=1;
    AD1CON1bits.SAMP=1;
    Nop();
    while(!AD1CON1bits.DONE){}

    _SWDTEN = wtdState;

    temp = ADC1BUF0;
    delay = temp%225+25;

    __delay_ms(delay);
    _LATB15=1;
    __delay_ms(delay);
    _LATB15=0;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T03:16:00.407

似乎通过使用 mod，您正在使噪音变得重要，也许您应该改为划分。

# php - 如何在没有索引的情况下提取数组的键和值

> ID：15870659
> 
> 赞同：11
> 
> 时间：2013-04-08T03:09:50.377
> 
> 标签：php, arrays, extract

我想从数组（带有键和值的原始数组）中提取数据。提取数组后，我想要两个新数组，第一个只有键，第二个只有值，并且都没有索引（参见代码示例）。

```
// original array 
$array = array(
    "name1"=>500
   ,"name2"=>400
   ,"name3"=>300
   ,"name4"=>200
   ,"name5"=>100
);

// after extraction
$array1 = array('name1','name2','name3','name4','name5');
$array2 = array(500,400,300,200,100);

// not like this
// $array1 = array(0=>'name1',1=>'name2',2=>'name3',3=>'name4',4=>'name5);
// $array2 = array(0=>500,1=>400,2=?300,3=>200,4=>100); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-08T03:39:17.047

```
$array1 = array_keys($array);
$array2 = array_values($array); 
```

好吧，你可以[在这里](http://en.wikipedia.org/wiki/Array_data_structure)阅读。

> 在计算机科学中，数组数据结构或简单**的数组是由一组元素（值或变量）组成的数据结构，每个元素由至少一个数组索引或键标识**。存储一个数组，以便可以通过数学公式从其索引元组计算每个元素的位置。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-08T03:15:00.937

```
$keys = array_keys($array);
$values = array_values($array); 
```

但是请注意，就PHP 而言，`array(0=>'item')`和*完全相同。*没有索引的 php 数组项是不存在的。如果您不提供索引，PHP 将默默地添加一个数字索引。`array('item')`

# php - 我如何在laravel中将数组转换为ol

> ID：15870660
> 
> 赞同：0
> 
> 时间：2013-04-08T03:09:58.910
> 
> 标签：php, laravel

现在我有一个具有 parent_id 的数组 & 我想我需要使用递归来完成我想做的事情

```
array
  0 => 
    object(Menu)[56]
      public 'attributes' => 
        array
          'id' => string '1' (length=1)
          'menu_id' => string '1' (length=1)
          'menu_name' => string 'home' (length=4)
          'menu_url' => string 'test' (length=4)
          'parent_id' => string '0' (length=1)
          'position' => string '0' (length=1)
          'group_id' => string '1' (length=1)
          'menu_items' => null
      public 'original' => 
        array
          'id' => string '1' (length=1)
          'menu_id' => string '1' (length=1)
          'menu_name' => string 'home' (length=4)
          'menu_url' => string 'test' (length=4)
          'parent_id' => string '0' (length=1)
          'position' => string '0' (length=1)
          'group_id' => string '1' (length=1)
          'menu_items' => null
      public 'relationships' => 
        array
          empty
      public 'exists' => boolean true
      public 'includes' => 
        array
          empty
  1 => 
    object(Menu)[60]
      public 'attributes' => 
        array
          'id' => string '2' (length=1)
          'menu_id' => string '1' (length=1)
          'menu_name' => string 'Contact Us' (length=10)
          'menu_url' => string 'contact' (length=7)
          'parent_id' => string '1' (length=1)
          'position' => string '0' (length=1)
          'group_id' => string '1' (length=1)
          'menu_items' => null
      public 'original' => 
        array
          'id' => string '2' (length=1)
          'menu_id' => string '1' (length=1)
          'menu_name' => string 'Contact Us' (length=10)
          'menu_url' => string 'contact' (length=7)
          'parent_id' => string '1' (length=1)
          'position' => string '0' (length=1)
          'group_id' => string '1' (length=1)
          'menu_items' => null
      public 'relationships' => 
        array
          empty
      public 'exists' => boolean true
      public 'includes' => 
        array
          empty
  2 => 
    object(Menu)[61]
      public 'attributes' => 
        array
          'id' => string '3' (length=1)
          'menu_id' => string '1' (length=1)
          'menu_name' => string 'Privacy Docs' (length=12)
          'menu_url' => string 'privacy' (length=7)
          'parent_id' => string '1' (length=1)
          'position' => string '0' (length=1)
          'group_id' => string '1' (length=1)
          'menu_items' => null
      public 'original' => 
        array
          'id' => string '3' (length=1)
          'menu_id' => string '1' (length=1)
          'menu_name' => string 'Privacy Docs' (length=12)
          'menu_url' => string 'privacy' (length=7)
          'parent_id' => string '1' (length=1)
          'position' => string '0' (length=1)
          'group_id' => string '1' (length=1)
          'menu_items' => null
      public 'relationships' => 
        array
          empty
      public 'exists' => boolean true
      public 'includes' => 
        array
          empty

array
  0 => 
    object(Menu)[56]
      public 'attributes' => 
        array
          'id' => string '1' (length=1)
          'menu_id' => string '1' (length=1)
          'menu_name' => string 'home' (length=4)
          'menu_url' => string 'test' (length=4)
          'parent_id' => string '0' (length=1)
          'position' => string '0' (length=1)
          'group_id' => string '1' (length=1)
          'menu_items' => null
      public 'original' => 
        array
          'id' => string '1' (length=1)
          'menu_id' => string '1' (length=1)
          'menu_name' => string 'home' (length=4)
          'menu_url' => string 'test' (length=4)
          'parent_id' => string '0' (length=1)
          'position' => string '0' (length=1)
          'group_id' => string '1' (length=1)
          'menu_items' => null
      public 'relationships' => 
        array
          empty
      public 'exists' => boolean true
      public 'includes' => 
        array
          empty
  1 => 
    object(Menu)[60]
      public 'attributes' => 
        array
          'id' => string '2' (length=1)
          'menu_id' => string '1' (length=1)
          'menu_name' => string 'Contact Us' (length=10)
          'menu_url' => string 'contact' (length=7)
          'parent_id' => string '1' (length=1)
          'position' => string '0' (length=1)
          'group_id' => string '1' (length=1)
          'menu_items' => null
      public 'original' => 
        array
          'id' => string '2' (length=1)
          'menu_id' => string '1' (length=1)
          'menu_name' => string 'Contact Us' (length=10)
          'menu_url' => string 'contact' (length=7)
          'parent_id' => string '1' (length=1)
          'position' => string '0' (length=1)
          'group_id' => string '1' (length=1)
          'menu_items' => null
      public 'relationships' => 
        array
          empty
      public 'exists' => boolean true
      public 'includes' => 
        array
          empty
  2 => 
    object(Menu)[61]
      public 'attributes' => 
        array
          'id' => string '3' (length=1)
          'menu_id' => string '1' (length=1)
          'menu_name' => string 'Privacy Docs' (length=12)
          'menu_url' => string 'privacy' (length=7)
          'parent_id' => string '1' (length=1)
          'position' => string '0' (length=1)
          'group_id' => string '1' (length=1)
          'menu_items' => null
      public 'original' => 
        array
          'id' => string '3' (length=1)
          'menu_id' => string '1' (length=1)
          'menu_name' => string 'Privacy Docs' (length=12)
          'menu_url' => string 'privacy' (length=7)
          'parent_id' => string '1' (length=1)
          'position' => string '0' (length=1)
          'group_id' => string '1' (length=1)
          'menu_items' => null
      public 'relationships' => 
        array
          empty
      public 'exists' => boolean true
      public 'includes' => 
        array
          empty

array
  0 => 
    object(Menu)[56]
      public 'attributes' => 
        array
          'id' => string '1' (length=1)
          'menu_id' => string '1' (length=1)
          'menu_name' => string 'home' (length=4)
          'menu_url' => string 'test' (length=4)
          'parent_id' => string '0' (length=1)
          'position' => string '0' (length=1)
          'group_id' => string '1' (length=1)
          'menu_items' => null
      public 'original' => 
        array
          'id' => string '1' (length=1)
          'menu_id' => string '1' (length=1)
          'menu_name' => string 'home' (length=4)
          'menu_url' => string 'test' (length=4)
          'parent_id' => string '0' (length=1)
          'position' => string '0' (length=1)
          'group_id' => string '1' (length=1)
          'menu_items' => null
      public 'relationships' => 
        array
          empty
      public 'exists' => boolean true
      public 'includes' => 
        array
          empty
  1 => 
    object(Menu)[60]
      public 'attributes' => 
        array
          'id' => string '2' (length=1)
          'menu_id' => string '1' (length=1)
          'menu_name' => string 'Contact Us' (length=10)
          'menu_url' => string 'contact' (length=7)
          'parent_id' => string '1' (length=1)
          'position' => string '0' (length=1)
          'group_id' => string '1' (length=1)
          'menu_items' => null
      public 'original' => 
        array
          'id' => string '2' (length=1)
          'menu_id' => string '1' (length=1)
          'menu_name' => string 'Contact Us' (length=10)
          'menu_url' => string 'contact' (length=7)
          'parent_id' => string '1' (length=1)
          'position' => string '0' (length=1)
          'group_id' => string '1' (length=1)
          'menu_items' => null
      public 'relationships' => 
        array
          empty
      public 'exists' => boolean true
      public 'includes' => 
        array
          empty
  2 => 
    object(Menu)[61]
      public 'attributes' => 
        array
          'id' => string '3' (length=1)
          'menu_id' => string '1' (length=1)
          'menu_name' => string 'Privacy Docs' (length=12)
          'menu_url' => string 'privacy' (length=7)
          'parent_id' => string '1' (length=1)
          'position' => string '0' (length=1)
          'group_id' => string '1' (length=1)
          'menu_items' => null
      public 'original' => 
        array
          'id' => string '3' (length=1)
          'menu_id' => string '1' (length=1)
          'menu_name' => string 'Privacy Docs' (length=12)
          'menu_url' => string 'privacy' (length=7)
          'parent_id' => string '1' (length=1)
          'position' => string '0' (length=1)
          'group_id' => string '1' (length=1)
          'menu_items' => null
      public 'relationships' => 
        array
          empty
      public 'exists' => boolean true
      public 'includes' => 
        array
          empty

array
  0 => 
    object(Menu)[56]
      public 'attributes' => 
        array
          'id' => string '1' (length=1)
          'menu_id' => string '1' (length=1)
          'menu_name' => string 'home' (length=4)
          'menu_url' => string 'test' (length=4)
          'parent_id' => string '0' (length=1)
          'position' => string '0' (length=1)
          'group_id' => string '1' (length=1)
          'menu_items' => null
      public 'original' => 
        array
          'id' => string '1' (length=1)
          'menu_id' => string '1' (length=1)
          'menu_name' => string 'home' (length=4)
          'menu_url' => string 'test' (length=4)
          'parent_id' => string '0' (length=1)
          'position' => string '0' (length=1)
          'group_id' => string '1' (length=1)
          'menu_items' => null
      public 'relationships' => 
        array
          empty
      public 'exists' => boolean true
      public 'includes' => 
        array
          empty
  1 => 
    object(Menu)[60]
      public 'attributes' => 
        array
          'id' => string '2' (length=1)
          'menu_id' => string '1' (length=1)
          'menu_name' => string 'Contact Us' (length=10)
          'menu_url' => string 'contact' (length=7)
          'parent_id' => string '1' (length=1)
          'position' => string '0' (length=1)
          'group_id' => string '1' (length=1)
          'menu_items' => null
      public 'original' => 
        array
          'id' => string '2' (length=1)
          'menu_id' => string '1' (length=1)
          'menu_name' => string 'Contact Us' (length=10)
          'menu_url' => string 'contact' (length=7)
          'parent_id' => string '1' (length=1)
          'position' => string '0' (length=1)
          'group_id' => string '1' (length=1)
          'menu_items' => null
      public 'relationships' => 
        array
          empty
      public 'exists' => boolean true
      public 'includes' => 
        array
          empty
  2 => 
    object(Menu)[61]
      public 'attributes' => 
        array
          'id' => string '3' (length=1)
          'menu_id' => string '1' (length=1)
          'menu_name' => string 'Privacy Docs' (length=12)
          'menu_url' => string 'privacy' (length=7)
          'parent_id' => string '1' (length=1)
          'position' => string '0' (length=1)
          'group_id' => string '1' (length=1)
          'menu_items' => null
      public 'original' => 
        array
          'id' => string '3' (length=1)
          'menu_id' => string '1' (length=1)
          'menu_name' => string 'Privacy Docs' (length=12)
          'menu_url' => string 'privacy' (length=7)
          'parent_id' => string '1' (length=1)
          'position' => string '0' (length=1)
          'group_id' => string '1' (length=1)
          'menu_items' => null
      public 'relationships' => 
        array
          empty
      public 'exists' => boolean true
      public 'includes' => 
        array
          empty 
```

现在我在一个名为 menuHelper 的类中有一个函数

```
public static function make(array $array, $no = 0) {
        var_dump($array);
        $child = self::hasChildren($array, $no);
        if (empty($child))
            return "";
        $content = "<li>\n";
        foreach ($child as $value) {
            $content = sprintf("\t<li><div>%s</div>" . self::make($array, $value->id) . "</li>\n", $value->menu_name);
            //$content .= self::make($array, $value->id);
        }
        $content .= "</li>\n";
        //return $content;
        return($content == '' ? '' : "<ol>" . $content . "</ol>");
    }
public static function hasChildren($array, $id) {
        return array_filter($array, function ($var) use($id) {
                    return $var->parent_id == $id;
                });
    } 
```

我希望这个输出这个

```
<ol class="sortable">
    <li>
        <div>parent</div>
        <ol>
            <div>Sub</div>
            <ol>
                <div>Sub 2</div>
            </ol>
        </ol>
    </li>
    <li>
        <div>parent 2</div>
        <ol>
            <div>Sub</div>
            <ol>
                <div>Sub 2</div>
            </ol>
        </ol>
    </li>
</ol> 
```

但这并没有继续输出父母，而是输出 1 个父母，然后是它的孩子。然后即使有另一个父母它也会退出输出所以我想我有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:19:44.703

这是一个非常粗略的答案，因为您的问题含糊不清且缺少细节。

您需要将主菜单项存储在一个数组中，然后遍历它们以绘制主菜单。然后，当您遍历每个主菜单项时，查找/加载父级可能拥有的任何子菜单项。如果有子菜单项 - 绘制子菜单。十分简单。

```
<ol class="sortable">
<?php
$main_menu_items = array( $first_menu_item, $second_menu_item );
foreach($main_menu_items as $menu_item)
{
    ?>
    <li>
    <div><?=$menu_item['menu_name']?></div>
    <?php
    $child_menu_items = get_child_menu_items($menu_item['menu_id']);
    if( count($child_menu_items) > 0 )
    {
        ?>
        <ol>
        <?php
        foreach($child_menu_items as $child_item)
        {
            ?>
            <li><div><?=$menu_item['menu_name']?></div></li>
            <?php
        }
        ?>
        </ol>
        <?php
    }
    ?>
    </li>
    <?php
}
?>
</ol> 
```

# ios - UIModalPresentationCurrentContext 不显示透明背景

> ID：15870661
> 
> 赞同：1
> 
> 时间：2013-04-08T03:10:05.593
> 
> 标签：ios, objective-c, cocoa-touch, uiviewcontroller

我有 UIViewController 称为 TestVC，其背景设置为 clearColor：

```
@implementation TestVC

- (void)viewDidLoad {
    [super viewDidLoad];
    self.view.backgroundColor = [UIColor clearColor];
}

@end 
```

我通过以下方式从另一个视图控制器呈现 TestVC：

```
self.modalPresentationStyle = UIModalPresentationCurrentContext;
[self presentViewController:[[TestVC alloc] init] animated:YES completion:NULL]; 
```

但是目前的 TestVC 是白色的，它会遮挡屏幕。有没有办法让它透明或部分遮盖底层视图控制器？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-10T10:39:02.320

抱歉......我的错......就像下面的评论一样，你必须设置你要呈现的视图控制器。将此行添加到您提供 TestVC 的控制器 `TestVCClass *TestVC =[[TestVCClass alloc]init]; TestVC.modalPresentationStyle = UIModalPresentationOverCurrentContext; [self presentViewController:TestVC animated:YES completion:nil];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-10T11:25:33.223

尝试`modalPresentationStyle`在 TestVC 上设置，而不是在进行演示的视图控制器上设置。

如果`UIModalPresentationCurrentContext`仍然不起作用，请尝试`UIModalPresentationCustom`.

# gradle - Gradle，从每个源集中创建一个新 jar

> ID：15870662
> 
> 赞同：1
> 
> 时间：2013-04-08T03:10:09.127
> 
> 标签：gradle

我有一个子项目，首先是我的文件

主要项目的gradle文件：

```
defaultTasks 'assemble'
apply plugin: 'idea'

allprojects {
    //this brings all the compiled entities to one directory
    archivesBaseName = "mybase"

    repositories {
        mavenCentral()
    }
}

subprojects {
    apply plugin: 'java'
    apply plugin: 'scala'

    compileJava {
        sourceCompatibility = JavaVersion.VERSION_1_7
        targetCompatibility = JavaVersion.VERSION_1_7
    }

    compileScala{
        sourceCompatibility = JavaVersion.VERSION_1_7
        targetCompatibility = JavaVersion.VERSION_1_7
    }

    jar {
        manifest.attributes provider: 'MyProcJar'
    }

    assemble{
        archivePath = file("${rootDir}/dist")
    }

    ext {
        springVersion = "3.2.1.RELEASE"
        springSecurityWebVersion = "3.1.3.RELEASE"
        springSecurityOauth2Version = "1.0.1.RELEASE"
        jacksonCoreVersion = "2.1.2"
    }

    dependencies {
        testCompile 'junit:junit:4.11'
    }

    tasks.withType(AbstractArchiveTask){
        destinationDir = project.rootProject.file("dists")
    }
} 
```

子项目 gradle 文件：

```
sourceSets {
    gwt-graphics {
        java {
            srcDirs = ["java"]
            compileClasspath += main.output
            runtimeClasspath += main.output
        }
    }

    login-controls {
        java {
            srcDirs = ["java"]
            compileClasspath += main.output
            runtimeClasspath += main.output
        }
    }

    sample-app {
        java {
            srcDirs = ["java"]
            compileClasspath += main.output
            runtimeClasspath += main.output
        }
    }

} 
```

我的项目布局

```
mainproj/gwt/src/gwt-graphics/java:
mainproj/gwt/src/login-controls/java:
mainproj/gwt/src/sample-app/java: 
```

在我的子项目中，我希望将源集的每个元素编译成一个单独的 jar 文件。我怎么做？目前我什至无法编译任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T05:56:17.720

您应该对源集使用有效的 (Groovy) 标识符，并且应该将它们指向正确的源目录：

```
sourceSets {
    gwtGraphics {
        srcDirs = ["gwt-graphics/java"]
    }
} 
```

该`java`插件只为源集添加一个`jar`任务。`main`您可以添加自己的，一个一个或一个“循环” `sourceSets.all`。有关更多信息，请参阅[Gradle 构建语言参考](http://gradle.org/docs/current/dsl/index.html)或完整的 Gradle 发行版中的示例。

其他一些提示：

*   而不是直接配置`sourceSet.compileClasspath`，`sourceSet.runtimeClasspath`你可以做`dependencies { gwtGraphicsCompile sourceSets.main.output }`等。然后你不需要为运行时类路径重复相同的配置。
*   您可以全局设置（例如`sourceCompatibility = 1.7`），而不是为每个编译任务设置源/目标兼容性。
*   由于继承了额外的属性，我会将`ext`块移出`subprojects`块。

# java - 计算麦克风音量（试图找到最大值）

> ID：15870666
> 
> 赞同：2
> 
> 时间：2013-04-08T03:10:37.510
> 
> 标签：java, audio, volume, microphone, rms

我试图找到麦克风输入的最大音量，因为我试图找出某个声音的平均音量，以便我的程序可以按音量识别它。RMS计算方法来自这个网站（[https://forums.oracle.com/forums/thread.jspa?threadID=1270831](https://forums.oracle.com/forums/thread.jspa?threadID=1270831)），我只是想弄清楚一切是如何工作的......

问题是，无论我发出多少噪音，RMS 电平每次都输出为 0！所以我要么将我的 targetDataLine 设置为完全错误并且它没有捕获音频......要么我在其他地方做错了什么。

这是我到目前为止所拥有的：

```
import javax.sound.sampled.AudioFormat;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.DataLine;
import javax.sound.sampled.LineUnavailableException;
import javax.sound.sampled.TargetDataLine;

public class MicrophoneTesting {

public MicrophoneTesting() {
    // TODO Auto-generated constructor stub
}

protected static int calculateRMSLevel(byte[] audioData)
{ // audioData might be buffered data read from a data line
    long lSum = 0;
    for(int i=0; i<audioData.length; i++)
        lSum = lSum + audioData[i];

    double dAvg = lSum / audioData.length;

    double sumMeanSquare = 0d;
    for(int j=0; j<audioData.length; j++)
        sumMeanSquare = sumMeanSquare + Math.pow(audioData[j] - dAvg, 2d);

    double averageMeanSquare = sumMeanSquare / audioData.length;
    return (int)(Math.pow(averageMeanSquare,0.5d) + 0.5);
}

public static void main(String[] args){

    // Open a TargetDataLine for getting microphone input & sound level
    TargetDataLine line = null;
    AudioFormat format = new AudioFormat(8000, 0, 1, true, true);
    DataLine.Info info = new DataLine.Info(TargetDataLine.class, format); //     format is an AudioFormat object
    if (!AudioSystem.isLineSupported(info)) {
        System.out.println("The line is not supported.");
    }
    // Obtain and open the line.
    try {
        line = (TargetDataLine) AudioSystem.getLine(info);
        line.open(format);
    } catch (LineUnavailableException ex) {
        System.out.println("The TargetDataLine is Unavailable.");
    }

    Timer t = new Timer(); // I used a timer here, code is below
    while(t.seconds < 2){
    byte[] bytes = new byte[line.getBufferSize() / 5];
    line.read(bytes, 0, bytes.length);
    System.out.println("RMS Level: " + calculateRMSLevel(bytes));
    }
}
} 
```

定时器代码：

```
public class Timer implements Runnable{
    int seconds;
    Thread t;

public Timer() {
    this.seconds = 0;
    t = new Thread(this, "Clap Timer");
    t.start(); // Start the thread
}

@Override
public void run() {
    // TODO Auto-generated method stub
    while(seconds < 2)
    {
        //Wait 1 second
        try {                                
            Thread.sleep(1000);
        }
        catch(Exception e) {
            System.out.println("Waiting interupted.");
        }

        seconds++;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:29:56.303

当我在`line.start()`之后添加时它起作用了`line.open()`。

# apache - 上传后Apache不提供文件

> ID：15870667
> 
> 赞同：0
> 
> 时间：2013-04-08T03:10:50.163
> 
> 标签：apache

我遇到了这个奇怪的问题。当我上传包含**index.php文件的文件夹****test**时，然后通过浏览器访问它：**mydoamain.com/test/index.php**，然后它显示文件未找到错误。

 ****但是，如果我创建名为**test1**的新目录，请在其中创建一个新文件**index.php并将****test/index.php**中的所有内容复制到**test1/index.php**并保存。然后我可以正常访问**mydomain.com/test1/index.php**。

其他文件类型也发生了同样的事情，这意味着我需要手动创建新文件并将上传文件中的内容复制到新创建的文件中，删除上传的文件并重命名新文件以匹配以前上传的文件。

你能告诉我这里发生了什么吗？****

# c# - 点网框架

> ID：15870673
> 
> 赞同：-3
> 
> 时间：2013-04-08T03:11:21.680
> 
> 标签：c#, asp.net, vb.net

我需要一个无需安装 dot net 框架即可运行 dot net 应用程序的代码。如果不可能，框架安装过程可以在程序执行的后端运行。

要求是，我们必须在客户端机器上运行我们的点网代码，而客户端不会在他的机器上安装点网框架。它应该会自动运行 .exe 文件。但是如果不安装框架，应用程序将无法运行。谁能帮我吗。谢谢。

问候，卡南

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T03:26:25.003

有一些应用程序被称为 .NET 链接器。这些实际上会将 .NET 库与您的应用程序打包在一起，以便在目标计算机上根本没有安装 .NET 的情况下运行。这存在一些问题，因为如果 Microsoft 为 .NET 框架中的某些内容提供修复程序，那么您将永远无法获得该修复程序。此外，由于框架嵌入到您的应用程序中，因此应用程序本身更大。另外，由于 .NET dll 已嵌入到您的应用程序中，因此您不会从内存中受益。

1.  [Salamander .NET 链接器](http://www.remotesoft.com/linker/)
2.  勺子工作室
3.  [最小点网](http://www.hanselman.com/smallestdotnet/)

谷歌申请并下载。

# java - 如何设置动态添加的 ListView 的宽度？

> ID：15870675
> 
> 赞同：0
> 
> 时间：2013-04-08T03:12:09.680
> 
> 标签：java, android, android-layout, user-interface

我正在尝试动态添加 ListView，但由于某种原因，它不允许我设置 ListView 的宽度。我想知道你们是否可以帮助我。

我正在尝试构建一个列设计（类似于 Plume）。这是最好的方法吗？

这是我所拥有的：

```
package com.reditr.column;

import java.util.HashMap;

import android.view.ViewGroup;
import android.widget.ListView;

import com.reditr.connection.Reddit;

public class ColumnManager {

//some pointers to important vars
private ViewGroup mContainer;
private Reddit mConnection;
private HashMap<String, Column> mColumns;

public ColumnManager(ViewGroup parent, Reddit connection) {

    mContainer = parent;
    mConnection = connection;   
    mColumns = new HashMap<String, Column>();

            //creates listview here
    mColumns.put("reditr", new Column("/r/reditr", null, mConnection, mContainer, "reditr", null));
    buildColumn(mColumns.get("reditr"));

            //.getColumnView() returns the ListView Object
    mContainer.addView(mColumns.get("reditr").getColumnView()); 
    mColumns.get("reditr").run();

    mColumns.put("gaming", new Column("/r/gaming", null, mConnection, mContainer, "gaming", null));
    buildColumn(mColumns.get("gaming"));
    mContainer.addView(mColumns.get("gaming").getColumnView()); 
    mColumns.get("gaming").run();

}

private void buildColumn(Column column) {

    ListView columnView = column.getColumnView();

    columnView.setMinimumWidth(400);
    columnView.setMinimumHeight(ViewGroup.LayoutParams.MATCH_PARENT);

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:31:27.217

您可以使用[LayoutParams](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html)在将 View 添加到其父级时设置其布局宽度和高度。将 LayoutParams 添加为`addView(View, LayoutParams)`.

# floating-point - Z3：浮点 FMA 语义

> ID：15870676
> 
> 赞同：4
> 
> 时间：2013-04-08T03:12:21.250
> 
> 标签：floating-point, z3, ieee-754, fma

Z3 为该基准返回了一个令人满意的模型：[http ://rise4fun.com/Z3/Bnv5m](http://rise4fun.com/Z3/Bnv5m)

但是，该查询本质上是断言`a*b+0`等同于`a*b`使用 FMA 指令，我相信它适用于 IEEE 浮点数。请注意，基准明确确保既不是`a`也不`b`是`NaN`。

我的 FMA 编码有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T04:53:11.353

看起来他们的`(fusedMA <mode> foo bar baz)`回报`foo*bar/2 + baz`。当参数或结果不正常时，无论是在定理证明器中还是在实际的融合乘加中，似乎都会发生一些奇怪的事情。

我运行它以查看它认为有问题的产品和 FMA 是什么：

```
(set-logic QF_FPA)
; s7 is equivalent to single-precision +0
(define-fun s7 () (_ FP  8 24) ((_ asFloat 8 24) roundNearestTiesToEven (/ 0 1)))
(declare-fun s0 () (_ FP  8 24))
(declare-fun s1 () (_ FP  8 24))
(declare-fun prod () (_ FP  8 24))
(declare-fun fma () (_ FP  8 24))
(assert
   (let ((s2 (== s0 s0)))     ; make sure s0 is not NaN
   (let ((s3 (== s1 s1)))     ; make sure s1 is not NaN
   (let ((s4 (and s2 s3)))
   (let ((s5 (not s4)))       ; s5 is True when either argument is NaN
   (let ((s6 (* roundNearestTiesToEven s0 s1)))            ; s6 = s0*s1
   (let ((s8 (fusedMA roundNearestTiesToEven s0 s1 s7)))   ; s8 = s0*s1 + s7 = s0*s1 since s7 is 0
   (let ((s9 (== s6 s8)))     ; s9 should always be true provided arguments are not NaN  
   (let ((s10 (or s5 s9)))    ; thus; s10 is true always
   (and (== fma s8) (== prod s6) (not s10)))))))))))         ; hence, the whole expression is unsatisfiable
(check-sat)
(get-model) 
```

得到了这个：

```
sat
(model
  (define-fun prod () (_ FP 8 24) (as -1.0572719573974609375p-9 (_ FP 8 24)))
  (define-fun fma () (_ FP 8 24) (as -1.0572719573974609375p-10 (_ FP 8 24)))
  (define-fun s1 () (_ FP 8 24) (as +1.62525212764739990234375p118 (_ FP 8 24)))
  (define-fun s0 () (_ FP 8 24) (as -0.0101644992828369140625p-126 (_ FP 8 24)))
) 
```

产品和 FMA 都没有真正符合 -2 ^(-14)的内容，这令人讨厌。

如果你限制`prod`和`fma`低于 2 ^(-125)，你可以得到这样的东西：

```
sat
(model
  (define-fun prod () (_ FP 8 24) (as +1.52807605266571044921875p-3 (_ FP 8 24))) 
  (define-fun fma () (_ FP 8 24) (as +1.528076171875p-3 (_ FP 8 24)))
  (define-fun s1 () (_ FP 8 24) (as -0.0002593994140625p-126 (_ FP 8 24)))
  (define-fun s0 () (_ FP 8 24) (as -1.4381892681121826171875p125 (_ FP 8 24)))
) 
```

如果您还限制`s0`和`s1`低于 2 ^(-125)，它会返回`unsat`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T10:14:24.153

是的，FMA 目前有问题。上周五，我对其他指令进行了一些修复，但还没有着手修复 FMA。感谢报告，尤其是测试用例，尤其是在 FMA 的情况下，这是非常宝贵的帮助！

# javascript - 创建和填充外部 Javascript 对象

> ID：15870677
> 
> 赞同：2
> 
> 时间：2013-04-08T03:12:29.047
> 
> 标签：javascript

我来自 C#/Java 背景，我正在努力学习如何用 HTML5 制作游戏。我遇到了一个令人难以置信的问题，虽然通常我会问一个朋友，但他一直是 MIA。我创建了一个帐户来向社区提问，我感到很难过，但我一直在寻找答案，但无济于事。

所以问题是......我想创建一个可以容纳塔实例的游戏对象。另外，我想创建一个塔的数组列表作为一种后端存储库。本质上，我希望这些是我能够在我的主游戏中引用的外部 js 文件。我不确定这在 js 中是否可行或如何工作。

我试图做的是......创建一个外部JS文件并声明一个塔对象。这就是我迷路的地方。我想创建另一个对象，它只是第一种类型的列表，即 towerList。在这个外部 JS 文件中，我打算用一堆塔属性填充列表。然后，在带有 canvas 元素的主文件中，我将遍历列表并绘制图形。我不知道该怎么做。

```
function Tower (type, texture, cost, damage, speed, range, health, Xpos, Ypos) 
{
this.type = type;
this.texture = new Image();
this.texture.src = texture;
this.cost = 0;
this.damage = 0;
this.speed = 0;
this.range = 0;
this.health = 0;
this.Xposition = 0;
this.Yposition = 0;
this.target = false;
}

var TowerList = [Tower("Basic", "tower.png", 0, 0, 0, 0, 0, 0, 0), Tower(), Tower()]; 
```

我怀疑我的工作是否正常，但我希望能够在主项目中创建 towerlist 的实例，像数组一样随机访问它，并按照我认为合适的方式打印它的内容。在 JS 中实现这一目标的最佳 OO 方式是什么？我希望稍后在主代码中能够从列表中分配一个塔

```
var tL = new TowerList();
var tower = new Tower();

tower = tL[0]; 
```

我今天才开始做这个，所以我意识到要学习很多东西。我想我需要将函数重新定义为 var 否则我可以实例化它（我确定我之前读过）。如果有人可以帮助我或为我指明一个资源的方向，其中包含我可以从中学习的示例，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:38:56.810

`TowerList`不必是新类型的对象，只需`Array`要做：

```
var towerList = [];
towerList.push(new Tower("Basic", "tower.png", 0, 0, 0, 0, 0, 0, 0));
//             ^^^
//            use 'new' to instantiate a new Tower
towerList.push(...); 
```

迭代`TowerList`：

```
var tower;

for (var i = 0, n = towerList.length; i < n; ++i) {
    tower = towerList[i];
    // do stuff with tower
} 
```

您也可以`TowerList`继承自`Array`：

```
function TowerList()
{
}

TowerList.prototype = [];

TowerList.prototype.yourFunction = function() {
}

var towerList = new TowerList();

towerList.push(new Tower(...));

towerList.yourFunction(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:00:25.383

我可能会让塔返回一个对象，然后创建它的实例。（避免“这个”）

考虑一种模块化方法：这对我有帮助：http: [//www.adequatelygood.com/JavaScript-Module-Pattern-In-Depth.html](http://www.adequatelygood.com/JavaScript-Module-Pattern-In-Depth.html)

粗略的想法：

```
function Tower(type, texture, cost, damage, speed, range, health, Xpos, Ypos)  {
    var obj = {};
        obj.type = type;
        obj.texture = new Image();
        obj.texture.src = texture;
        obj.cost = cost;
        obj.damage = 0;
        obj.speed = 0;
        obj.range = 0;
        obj.health = 0;
        obj.Xposition = 0;
        obj.Yposition = 0;
        obj.target = false;

    return obj;
}

var TowerList = [Tower("Basic", "r", 5, 0, 0, 0, 0, 0, 0), Tower(), Tower()];
var mytower = TowerList[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T03:31:11.280

```
//your towers should be called using new here, assuming you actually 
//want a list of towers
var TowerList = [Tower("Basic", "tower.png", 0, 0, 0, 0, 0, 0, 0), Tower(), Tower()];
//TowerList needs to be a function to be called with new.  This will error out.
var tL = new TowerList();
//This should work correctly
var tower = new Tower();

//this would overwrite the new Tower() with tl[0]
tower = tL[0]; 
```

如果您希望能够创建 TowerList 对象，您可能想要这样的东西

```
function TowerList(){
    this.list = [];

}

TowerList.prototype.addTower(tower){
  list.push(tower);

}

TowerList.prototype.getList(){
  return this.list;

} 
```

然后你可以这样做

```
var tL = new TowerList();
tL.addTower(new Tower("Basic", "tower.png", 0, 0, 0, 0, 0, 0, 0));
tL.addTower(new Tower());

var tower = tL[0]; 
```

# jquery - 如何从 json 文件中检索随机问题？

> ID：15870680
> 
> 赞同：0
> 
> 时间：2013-04-08T03:12:53.983
> 
> 标签：jquery

目前我在 json.file 中有几个问题，当单击“刷新”按钮时，如何按随机顺序从 json.file 中检索所有这些问题？到目前为止，我通过 for 循环检索它们，因此它按顺序显示所有问题。

```
 <script>
            var jsonfile='data.json';
            var qData=new Array();

    $.getJSON(jsonfile, function(data){
    for (var i=0;i<data.activity.length;i++)
        {
            qData[i]=data.activity[i].question;
        }

    for(var i=0;i<qData.length;i++)
        {
            append(qData[i],i);
            $('#text'+(i+1)).textinput();
                $('#submit'+(i+1)).button();
            $('#cancel'+(i+1)).button();
        }

    function append(data,i)
        {
            $('#list').append('<li><a href=#mypanel'+(i+1)+'  data-icon="arrow-l" data-iconpos="notext" data-shadow="false" data-iconshadow="false" class="ui-icon-nodisc" id="list">'+ data + '</a></li>'); //list item
            $('#mypanel'+(i+1)).append("<div align='center' style='margin-top:30px;'><font style='font-family:Helvetica, Arial, sans-serif ;color:white;' size='5px' ><b>Question Hint : </b></font></div><br/><label for=text"+(i+1)+" id=paneltitle"+(i+1)+" style='margin-top:10px;text-align:center;color:white;'>"+data+"</label>");//panel item
        $('#paneltitle'+(i+1)).append('<input type="text" id=text'+(i+1)+' >');
            $('#mypanel'+(i+1)).append('<a href="#header" data-role="button" id=submit'+(i+1)+' data-inline="true" data-rel="close" data-icon="check" style="margin-left:75px;">Submit</a>');
            $('#mypanel'+(i+1)).append('<a href=#mypanel'+(i+1)+' data-role="button" id=cancel'+(i+1)+' data-inline="true" data-rel="close" data-icon="delete2" style="margin-left:75px;">Cancel</a>');

        }
            $('#list').listview('refresh');

        });
        </script>

        <div data-theme="a" data-role="footer" data-position="fixed">
            <div data-role="navbar">
            <ul>
                <li><a id="PageRefresh" data-icon="refresh">Refresh</a></li>
            </ul>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T03:16:35.550

您需要自己随机化，获取对象中的总键并选择一个。

```
$.getJSON(jsonfile, function(data) {
    var max = data.activity.length;
    var min = 0;
    var random = Math.floor(Math.random() * (max - min + 1)) + min;

    console.log(data.activity[random]);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T03:17:36.947

尝试

```
while (data.activity.length) {
    var index = Math.floor(Math.random() * data.activity.length);
    qData.push(data.activity[index]);
    data.activity.splice(index, 1)
} 
```

完整代码

```
var jsonfile = 'data.json';
var qData = [];

$.getJSON(jsonfile, function(data) {

    while (data.activity.length) {
        var index = Math.floor(Math.random() * data.activity.length);
        qData.push(data.activity[index]);
        data.activity.splice(index, 1)
    }

    for (var i = 0; i < qData.length; i++) {
        append(qData[i], i);
        $('#text' + (i + 1)).textinput();
        $('#submit' + (i + 1)).button();
        $('#cancel' + (i + 1)).button();
    }

    function append(data, i) {
        $('#list')
                .append('<li><a href=#mypanel'
                        + (i + 1)
                        + '  data-icon="arrow-l" data-iconpos="notext" data-shadow="false" data-iconshadow="false" class="ui-icon-nodisc" id="list">'
                        + data + '</a></li>'); // list item
        $('#mypanel' + (i + 1))
                .append("<div align='center' style='margin-top:30px;'><font style='font-family:Helvetica, Arial, sans-serif ;color:white;' size='5px' ><b>Question Hint : </b></font></div><br/><label for=text"
                        + (i + 1)
                        + " id=paneltitle"
                        + (i + 1)
                        + " style='margin-top:10px;text-align:center;color:white;'>"
                        + data + "</label>");// panel item
        $('#paneltitle' + (i + 1)).append('<input type="text" id=text'
                + (i + 1) + ' >');
        $('#mypanel' + (i + 1))
                .append('<a href="#header" data-role="button" id=submit'
                        + (i + 1)
                        + ' data-inline="true" data-rel="close" data-icon="check" style="margin-left:75px;">Submit</a>');
        $('#mypanel' + (i + 1))
                .append('<a href=#mypanel'
                        + (i + 1)
                        + ' data-role="button" id=cancel'
                        + (i + 1)
                        + ' data-inline="true" data-rel="close" data-icon="delete2" style="margin-left:75px;">Cancel</a>');

    }
    $('#list').listview('refresh');

}); 
```

演示：[小提琴](http://plnkr.co/edit/LN78J8JvrbwpE7za6oCq?p=preview)

# oracle - Oracle 用游标循环创建程序

> ID：15870683
> 
> 赞同：0
> 
> 时间：2013-04-08T03:13:28.987
> 
> 标签：oracle, loops, stored-procedures, cursor

我正在 Oracle 中创建一个过程来搜索参数中指定的一些关键字并打印出该行。这是我下面的代码。它有效，但我不知道为什么它不断打印最后一行两次。请帮忙

```
 CREATE TABLE Testimonial( TestimonialID integer PRIMARY KEY,
                Content char(100));

INSERT INTO Testimonial VALUES (100,'Great website');
INSERT INTO Testimonial VALUES (101,'I like it');
INSERT INTO Testimonial VALUES (102,'I bought two items from here and I really like them');
INSERT INTO Testimonial VALUES (103,'My girlfriends likes my presents I bought here');
INSERT INTO Testimonial VALUES (104,'Nice products');
INSERT INTO Testimonial VALUES (105,'Friendly customer service');

COMMIT;

Create or replace procedure Search_Testimonials (search_string IN char)
IS
        Testimonial_record   Testimonial%ROWTYPE;

 cursor cur_Testimonial is 
    select *
    from Testimonial
    WHERE content LIKE '%' || search_string || '%';
BEGIN
    open cur_Testimonial;
    Loop
        Fetch cur_Testimonial into Testimonial_record;
        DBMS_OUTPUT.PUT_LINE( 'Content: ' || Testimonial_record.content );
        EXIT WHEN cur_Testimonial%NOTFOUND;
    END LOOP;
    close cur_Testimonial;
    COMMIT;
END;
/

set serveroutput on

exec Search_Testimonials('bought') 
```

输出

```
Content: I bought two items from here and I really like them
Content: My girlfriends likes my presents I bought here
Content: My girlfriends likes my presents I bought here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T03:28:32.813

这可能会更好一些。

```
Loop
    Fetch cur_Testimonial into Testimonial_record;
    EXIT WHEN cur_Testimonial%NOTFOUND;
    DBMS_OUTPUT.PUT_LINE( 'Content: ' || Testimonial_record.content );
END LOOP; 
```

# java - 获取静态 java 方法以返回最高变量值

> ID：15870691
> 
> 赞同：-1
> 
> 时间：2013-04-08T03:14:41.667
> 
> 标签：java, oop, object, methods, static

在我的程序中，我声明了一个静态变量：

```
private static int nextID = 0; 
```

在我的构造函数中使用

```
Vehicle() {

  idNum = nextID++

 } 
```

基本上，这样做是为了确保每次我制作一个新的 Vehicle 对象时，它都会有一个唯一的标识号。现在我想创建一个静态方法，该方法将返回迄今为止使用的最高 ID 号。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T03:19:15.957

`nextID`您可以只返回...的当前值

但是请注意，您的类不是线程安全的。换句话说，如果同时创建了两个不同的对象，它们都可以获得相同的“唯一”ID。为了防止这种情况，您需要某种锁定。

```
private static int nextID = 0;
private static Object lockObj = new Object();

public static int highestID()
{
    synchronized(lockObj)
    {
        return nextID-1;
    }
}

public Vehicle() {
    synchronized(lockObj)
    {
        idNum = nextID++;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T03:19:34.863

你自己很好地回答了这个问题。由于`nextID`每次创建对象时您的变量都会不断增加，因此每次获取该变量的值时，它始终是最高的。正如您所说，您所需要的只是创建一个返回当前值的静态方法`nextID`。简单地：

```
public static int getNextID(){
    return nextID;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T03:20:17.677

弄清楚了！

```
Public static int highestID() {

   return nextID;
 } 
```

# c# - 禁用收集

> ID：15870696
> 
> 赞同：2
> 
> 时间：2013-04-08T03:15:36.407
> 
> 标签：c#, propertygrid

我有一个包含一些公共字段的类，我想在表单上的 PropertyGrid 中显示这些字段：

```
public class FileInfo
{
     ...

     [DisplayName("Messages")]
     public Collection<MessageInfo> MessageInfos { get; set; }
} 
```

问题是我还想为此类的某些实例禁用 Collection，因此用户甚至无法进入其编辑器。而且我需要从代码中制作它，而不是从设计师那里。

即使我通过添加属性 [ReadOnly(true)] 使该字段为只读，它也将允许用户通过按 (...) 进入其编辑器：

![在此处输入图像描述](https://i.stack.imgur.com/pDdql.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T07:16:26.323

如果您定义一个覆盖标准[CollectionEditor的自定义](http://msdn.microsoft.com/library/system.componentmodel.design.collectioneditor.aspx)[UITypeEditor](http://msdn.microsoft.com/library/system.drawing.design.uitypeeditor.aspx) ，则可以这样做，如下所示：

```
 public class FileInfo
    {
        [DisplayName("Messages")]
        [Editor(typeof(MyCustomCollectionEditor), typeof(UITypeEditor))]
        public Collection<MessageInfo> MessageInfos { get; set; }
    }

    public class MyCustomCollectionEditor : CollectionEditor // needs a reference to System.Design.dll
    {
        public MyCustomCollectionEditor(Type type)
            : base(type)
        {
        }

        public override UITypeEditorEditStyle GetEditStyle(ITypeDescriptorContext context)
        {
            if (DontShowForSomeReason(context)) // you need to implement this
                return UITypeEditorEditStyle.None; // disallow edit (hide the small browser button)

            return base.GetEditStyle(context);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T03:36:13.500

添加一个布尔标志，指示该集合是否为只读：

```
public class FileInfo
{
    ...

    [DisplayName("Messages")]
    public Collection<MessageInfo> MessageInfos { get; set; }
    public bool IsReadOnly;
} 
```

为您要禁用的实例设置`IsReadOnly`为。`true`然后，您可以根据标志的状态启用/禁用您的 UI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T04:10:52.437

取决于您的程序的设计。您可以使用继承。您并没有真正提供有关谁可以访问您的对象的信息……等等。由于缺乏其他细节，因此它需要在代码中而不是设计器中，这是一个简单的解决方案。或者你可能需要更强大的东西。

```
public class FileInfo
{
     //...
}

public class FileInfoWithCollection : FileInfo {
     [DisplayName("Messages")]
     public Collection<MessageInfo> MessageInfos { 
          get; 
          set;
     }    
} 
```

另一种选择可能是滚动您自己的继承副本，`Collection`该副本覆盖任何可以修改集合的方法。如果没有更多信息，并且集合是 ref 类型，我怀疑你会得到一个肯定的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T04:11:28.750

在属性顶部添加 ReadOnly 属性。

```
[DisplayName("Messages")]
[ReadOnly(true)]
public Collection<MessageInfo> MessageInfos { get; set; } 
```

还没测试，希望能用。

取自[此链接](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/56e1a69a-84fd-4772-be92-dcf1ffc22493/)。

# c++ - 当我尝试在 c++ 中反转 cstring 时，我得到了一堆额外的字符

> ID：15870702
> 
> 赞同：1
> 
> 时间：2013-04-08T03:16:24.213
> 
> 标签：c++, reverse, cstring

用户输入的字符串似乎是颠倒的，但后面也跟着一堆垃圾字符。这是我的反向功能：

```
void reverse(char str[])
{
    char reversed[MAX_CHAR];

    for(int i = 0; i < strlen(str); i++)
    {
        reversed[i] = str[strlen(str) - i - 1];
    }

    cout << reversed << endl;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T03:18:12.350

您需要以`NULL`字符`'\0'`ASCII 值结束您的字符串`0`。

试试这个：

```
void reverse(char str[]) {
  char reversed[MAX_CHAR];
  int len = strlen(str);

  for(int i = 0; i < len; i++) {
    reversed[i] = str[len - i - 1];
  }

  reversed[len] = '\0'; // Add this

  cout << reversed << endl;
} 
```

这就是如何知道字符串的结尾在哪里`C`。`C++`

阅读有关空终止字符序列的更多信息：

*   [http://www.cplusplus.com/doc/tutorial/ntcs/](http://www.cplusplus.com/doc/tutorial/ntcs/)
*   [http://en.wikipedia.org/wiki/Null-terminated_string](http://en.wikipedia.org/wiki/Null-terminated_string)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T03:52:04.643

您可以通过以下两种方式解决此问题： a) 使用空字符初始化反转数组

```
char reversed[MAX_CHAR] = {0}; 
```

b）在反转字符串的末尾添加空字符。

```
reversed[strlen(str)] = '\0'; 
```

# javascript - 为什么nude.js html5canvas 演示不能在本地工作？

> ID：15870703
> 
> 赞同：1
> 
> 时间：2013-04-08T03:16:28.510
> 
> 标签：javascript, html, nude.js

试试这个漂亮的 JavaScript： http: [//www.patrick-wied.at/static/nudejs/demo/](http://www.patrick-wied.at/static/nudejs/demo/)
[**警告：**有点 NSFW。]

当我从本地计算机打开它时它不起作用。通过复制 3 个确切的源代码并使图片位置成为绝对位置（或者通过下载[https://github.com/pa7/nude.js/archive/master.zip](https://github.com/pa7/nude.js/archive/master.zip)）。

我迷路了为什么？这一定是一个愚蠢/简单[的原因，因为演示页面](http://www.patrick-wied.at/static/nudejs/demo/)显然可以工作并且仅 JavaScript，那么为什么它会在您存储它的地方有所不同呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T04:09:01.463

我认为这是因为浏览器的安全限制。您是从文件系统打开 html 文件，而不是从 localhost 提供它吗？或者您是否引用了另一个未启用 CORS 的域的资源？使用控制台进行调试应该会有所帮助。

# javascript - 带有 carouFredSel 的视频轮播

> ID：15870704
> 
> 赞同：0
> 
> 时间：2013-04-08T03:16:28.410
> 
> 标签：javascript, jquery, video, carousel, caroufredsel

单击上一个按钮时，视频不会停止播放。它仅适用于下一个按钮。

html代码：

```
<div id="arrow-up">&laquo;</div> 
<ul id="list">          
   <li><iframe width="420" height="315" src="http://www.youtube.com/embed/DylcJqqYKLU?rel=0" frameborder="0" allowfullscreen></iframe></li>
   <li><iframe width="420" height="315" src="http://www.youtube.com/embed/r1MN4pR5wXM?rel=0" frameborder="0" allowfullscreen></iframe></li>
   <li><iframe width="420" height="315" src="http://www.youtube.com/embed/PVzljDmoPVs?rel=0" frameborder="0" allowfullscreen></iframe></li>
</ul>                     
<div id="arrow-down">&raquo;</div> 
```

剧本：

```
$("#list").carouFredSel({
    direction: "up",
    auto : false,
    prev : "#arrow-up",
    next : "#arrow-down"
}); 
```

[这里有一个演示](http://jsfiddle.net/5Gk9s/10/)

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:56:29.283

它在这个页面上为我工作：http: [//ethosfactory.com/Branding/Projects/Videos.shtml](http://ethosfactory.com/Branding/Projects/Videos.shtml)

这是我在正文关闭标记之前使用的代码：

```
<script type="text/javascript">
    $(document).ready(function() {
    $('#gallery').nivoGallery({
        startPaused: true,
        beforeChange: function(index, slide, paused){
            $('#gallery video').get(index).pause();
            },
    });
    });
</script> 
```

一个问题：最后一张幻灯片的加载破坏了脚本，因此 Nivo 导航都不起作用。

# svn - 保持同一文件的多个副本同步的最佳方法是什么？

> ID：15870705
> 
> 赞同：3
> 
> 时间：2013-04-08T03:16:29.013
> 
> 标签：svn

我有一个目录`/dirA`，其中维护着一堆文件。它们由 SVN 版本控制。现在这些文件的一个子集被复制到多个其他目录（`/dirB`，，`/dirC` `/dirD`等）

每当我对 中的文件进行任何更改时，`/dirA`我都必须手动将更改复制到.`/dirB``/dirC` `/dirD`

我尝试对这些文件进行 SVN 签出`/dirB`，`/dirC` `/dirD`. 但是 SVN 不允许我检出特定文件。

我寻求帮助以解决此问题

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-08T08:46:05.120

`svn:externals`属性可以帮助您实现所需的解决方案。检查`svn:externals`SVNBook[和](http://svnbook.red-bean.com/en/1.7/svn.advanced.externals.html)TortoiseSVN[手册](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-externals.html)。

顺便说一句，您可以使用[`svn export`](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.export.html)它从存储库中获取文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T06:09:45.067

查看[SVN Externals](http://svnbook.red-bean.com/en/1.7/svn.advanced.externals.html)。

您可以将 Dir-A 的子集文件/文件夹作为外部添加到其他目录

# php - mysql不计算重复行

> ID：15870709
> 
> 赞同：-2
> 
> 时间：2013-04-08T03:16:39.063
> 
> 标签：php, mysql

我有一个名为 ptb_profile_views 的表；

```
id  |  profile_id  |  viewed_profile  |  date

1          1               5
2          1               5
3          1               5
4          2               5
5          3               5 
```

好的，所以在这个例子中，用户 1,2 和 3 正在检查用户 5 的个人资料，

我在这里得到的 mysql 是假设计算用户获得的查看次数，但是在用户 1 已经多次签出用户 5 的情况下，我不想返回重复的行，

因此，与其说用户 5 被查看了 5 次，不如说他们实际上只被查看了 3 次，因为我只想计算不同的值。

继承人我的mysql有人可以帮助我：

```
function check_profile_views() {
            global $connection;
            global $_SESSION;
            $query = "SELECT COUNT(profile_id) FROM ptb_profile_views WHERE viewed_profile_id=".$_SESSION['user_id']." AND profile_id!='0'";
            $check_profile_views_set = mysql_query($query, $connection);
            confirm_query($check_profile_views_set);
            return $check_profile_views_set;        
        } 
```

php：

```
$check_profile_views_set = check_profile_views();
while ($views = mysql_fetch_array($check_profile_views_set)) {  
?>
<? echo"". $views['COUNT(profile_id)'] ."";?> viewed your profile 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T03:18:48.793

只需添加`DISTINCT`

```
SELECT COUNT(DISTINCT profile_id) totalCOUNT FROM ptb_profile_views... 
```

并回显别名，

```
$views['totalCOUNT'] 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/1665b/2)

# android - 保存特定持续时间的状态 - android

> ID：15870711
> 
> 赞同：0
> 
> 时间：2013-04-08T03:16:58.610
> 
> 标签：android, savestate, android-framework

我有一个 android 要求，我创建了一个类似结构的表单，有单选按钮、编辑文本等。当用户在表单中输入一半并说通过后退按钮或电池关闭离开页面时。当他返回表格时，应该会重新出现半填表格的相同状态。请建议android是否具有保存表单状态并在用户重新访问时恢复的内部功能。此外，存储的内容应该只保存特定的持续时间，比如一小时，之后应该出现新的表格。请帮助我开始使用可能的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T03:47:41.123

I recommend reading the Android Activity [lifecycle](http://developer.android.com/reference/android/app/Activity.html). From the webpage:

"In addition, the method [onSaveInstanceState(Bundle)](http://developer.android.com/reference/android/view/View.html#onSaveInstanceState%28%29) is called before placing the activity in such a background state, allowing you to save away any dynamic instance state in your activity into the given Bundle, to be later received in onCreate(Bundle) if the activity needs to be re-created. See the Process Lifecycle section for more information on how the lifecycle of a process is tied to the activities it is hosting. Note that it is important to save persistent data in onPause() instead of onSaveInstanceState(Bundle) because the latter is not part of the lifecycle callbacks, so will not be called in every situation as described in its documentation."

# database - Wordpress：get_post_meta() 在循环中是否查询数据库？

> ID：15870715
> 
> 赞同：1
> 
> 时间：2013-04-08T03:17:32.633
> 
> 标签：database, wordpress, post, meta

get_post_meta() 在循环中是否查询数据库？

在搜索结果期间（在循环中），我有一系列值，我抓取了发布元数据。

例子：

```
<?php
$post_meta_array = array(
    'this',
    'that',
    'more',
    'stuff'
);

foreach ($post_meta_array as $get_meta) {

    $stuff_just_got = get_post_meta($get_meta, '');

}
?> 
```

我印象深刻的是 get_post_meta() 在循环中不需要查询数据库。我正在仔细检查是否是这种情况。如果不是这样的话……哎哟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:32:06.007

上面的好答案，偶然发现了这个：[http](http://wordpress.org/extend/plugins/debug-queries/) ://wordpress.org/extend/plugins/debug-queries/用于检查查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T07:58:16.350

```
echo get_post_meta($post->ID, 'ls_redirect', true); 
```

ls_redirect 是一个元键

# batch-file - 成对的数字或指数

> ID：15870727
> 
> 赞同：0
> 
> 时间：2013-04-08T03:18:51.567
> 
> 标签：batch-file, exponent

我正在制作一个批处理程序来解决一些方程，我希望我的最终结果可以给我二维码的二进制文件。无论如何，我刚开始用指数进行计算。**我的问题是我不知道如何批量执行此操作，因为我需要将指数与变量 x 一起使用：**

```
x^2 + x^3
x^4 + x^5
x^2 * x^4 + x^3 * x^5 
= x^6 + x^8 
```

然后我想**我可以使用几个数字，因为我只需要将一个指数加到另一个上。**

```
(2 , 3) +
(4 , 5)
= (6 , 8) 
```

我搜索了网络，但没有找到任何关于它的信息。
在这两种方法上获得帮助会很好，但（从头开始）我更喜欢夫妻方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:47:42.107

打扰一下。你的问题不清楚；也许如果您向我们解释什么是“二维码二进制”，我们可能会以更好的方式帮助您。无论如何，这是我可能的解决方案的版本。

这个程序：

```
@echo off
setlocal
for /F "tokens=1,2 delims=(,) " %%a in (file1.txt) do (
   echo (%%a , %%b^) +
   set /A a+=%%a, b+=%%b
)
echo = (%a% , %b%) 
```

...有了这些数据：

```
(2 , 3)
(4 , 5) 
```

...产生这个输出：

```
(2 , 3) +
(4 , 5) +
= (6 , 8) 
```

这个程序：

```
@echo off
setlocal EnableDelayedExpansion
rem Do multiplication of all 2-terms equations
for /F "delims=" %%e in (file2.txt) do (
   echo %%e
   set "equation=%%e"
   rem Eliminate "x^ and +" from equation
   for %%a in (x ^^ +) do set equation=!equation:%%a=!
   rem Add exponents
   for /F "tokens=1,2" %%a in ("!equation!") do (
      set /A a+=%%a, b+=%%b
   )
)
echo = x^^%a% + x^^%b%
rem Add similar terms
if %a% equ %b% (
   echo = 2x^^%a%
) 
```

...有了这些数据：

```
x^2 + x^3
x^4 + x^5 
```

...产生这个输出：

```
x^2 + x^3
x^4 + x^5
= x^6 + x^8 
```

...，但有了这些数据：

```
x^2 + x^3
x^4 + x^3 
```

...产生这个输出：

```
x^2 + x^3
x^4 + x^3
= x^6 + x^6
= 2x^6 
```

我希望它有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:57:12.607

**批处理算术中没有指数运算符**。但是，使用乘法很容易做到：

```
::x^2
set /a x*=x
::x^3
set /a x*=x*x
::x^4
set /a x*=x*x*x 
```

我不知道您所说的“一对数字”是什么意思，但是如果您解释一下，我会尽力提供帮助。

作为旁注，您可以使用 VBScript 来执行此操作。例如，`x = x ^ 2`将平方`x`。有关 VBScript 运算符的更多信息，请参见[此处](http://www.tizag.com/vbscriptTutorial/vbscriptoperators.php)。有关批处理运算符的信息，请参见[此处](http://balamohan.wordpress.com/2010/06/21/batch-operators/)。

# php - MP3 搜索结果到音频播放器

> ID：15870729
> 
> 赞同：0
> 
> 时间：2013-04-08T03:18:56.680
> 
> 标签：php, html

我经营一个在 soundcloud 中搜索音乐结果的网站，我正在尝试让音频播放器播放搜索结果，但是我遇到了一些麻烦。

对于每个搜索结果，我都使用`{$mp3_search[mp3].mp3_url}`它作为歌曲的直接链接。但是仅仅将那行代码放入标准的开源音频播放器是行不通的。

有任何想法吗？

# java - Java 索引越界异常

> ID：15870733
> 
> 赞同：1
> 
> 时间：2013-04-08T03:19:17.930
> 
> 标签：java, string, indexoutofboundsexception

我得到一个`IndexOutOfBoundsException`需要我的自定义功能的线路： `motCars = remplaceTirets(motAlea, motCars, lettreDon);`。如果给定的字母等于单词中的字母，则此函数应该将一个或多个破折号转换为字母）和实际函数中的一行，它说： `tempo += tirets.charAt(j);`

结果是： _ _ _ _ _ _ _ （这些破折号的数量取决于程序选择的单词，它有效，然后它要求给一封信，但是当我给一封信时，我得到：

> 线程“主”java.lang.String IndexOutOfBoundsException 中的异常。字符串索引超出范围：1。

部分是法语，因为我住在魁北克。但我希望没关系，因为法语单词只涉及字符串和单词，而不是 java 的逻辑。我是一个初学者，对 Java 论坛上的所有建议感到不知所措。欢迎任何具体建议。

提前感谢您抽出宝贵的时间来看看！

安妮塔

```
import java.util.Scanner; 

class Tp {

public static void main( String[] args ) throws Exception {

Scanner clavier = new Scanner(System.in);
String motAlea = "";                                
String motCars = "";                
char lettreDon = Character.UNASSIGNED;              
String tempo = "";                                  
String invite = "";
String tirets = "";
int l = 0;                                  
int m = 0;                              

final String ANNONCE  = "J'ai choisi un mot a deviner\n";
final String INSTRUCT = "Entrez une lettre a la fois. L'indice d'essais: 15.\n";
final String INVITE   = "\tEntrez une lettre: ";
final String BRAVO    = "BRAVO ! Le mot a deviner etait: ";
final String DESOLE   = "DESOLE...Vous avez perdu..."; 

String[] vingtMots = {  "WATTHEUREMETRE", "HELIOGRAPH", "GRENOUILLERE",     "CONTRAROTATIF", 
                        "CUISSARDE", "BRIGANTINE", "AVITAILLEUR", "ENTREDOUBLURE", 
                        "GALLETAGE", "OEUILLERE", "CREMAILLERE", "HALTEROPHILIE", 
                        "MARTINGALE", "EMPENNAGE", "ENCOCHAGE", "DECLENCHEUR", 
                        "BIMETALLIQUE", "PIVOTEMENT", "DECLINAISON", "CROISILLON"
                        }; // tableau string        

int indexAlea = 0; 
indexAlea = (int)(Math.random() * 20) + 1;

motAlea = vingtMots[indexAlea]; 

for (l = 0; l < motAlea.length(); l++) { 
    tempo += "_";
    motCars = tempo;
} // for

System.out.print(ANNONCE);
System.out.print(INSTRUCT);
l = 0;

do {
    if (motCars.equals(motAlea)) {
    System.out.print(BRAVO + motAlea + ", " + "devine en " + m + 
    " tentatives");
    System.exit(0);
    } // if

    if (l == 15) {
        System.out.print("\n" + DESOLE + "Le mot a devine etait: " + 
        motAlea + ". " + "Au revoir... "); 
        System.exit(0); 
    } // if

    for (int i = 0; i < motAlea.length(); i++) { 
    System.out.print(motCars.charAt(i) + " ");   
    } // for

    m = l + 1;
    invite = "\t" + INVITE + m + ">  :";

    lettreDon = lecture(invite); 

    motCars = remplaceTirets(motAlea, motCars, lettreDon);

    l++;    

 } // do
    while (l < 16); {
    System.out.print("\n" + DESOLE + "Le mot a devine etait: " + motAlea + ". " 
    + "Au revoir... "); 
    } // while

} //main(...)

public static char lecture(String invite1){

Scanner clavier = new Scanner(System.in);
final String ERREUR = "La valeur entree est erronnee !\nReprenez-vous...";
final String VIDE = " ";
String retour = "";

    do { 
        try {
        System.out.print(invite1);
        retour = clavier.nextLine().trim(); // Mise en forme;

            for (int k = 0; k < retour.length(); k++) {

                if(Character.isLetter(retour.charAt(k))) {
                return retour.toUpperCase().charAt(0);
                } // if
            } // for
        } // try
        catch (Exception e) {
        System.out.print(ERREUR);
        }               
    }// do
    while (!retour.equals(VIDE)); {
    retour = "X";
    return retour.charAt(0);
    } // while              
} // lecture(...)

public static String remplaceTirets(String motAlea1, String tirets, 
char lettre) {
String retour;  
String tempo = ""; 

    for (int j = 0; j < motAlea1.length(); j++) { 

        String lettre1 = Character.toString(lettre);
        if (motAlea1.charAt(j) != lettre1.charAt(0)) {
        tempo += tirets.charAt(j);
        } // if     
            else {
            tempo += lettre1.charAt(0); 
            } // else   
    tirets = tempo; 
    } // for    
    return retour = tirets;         
} //remplaceTirets(...)

}//Tp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:36:14.083

线

```
tirets = tempo; 
```

应该在for循环之外。

将您的代码更改为

```
for (int j = 0; j < motAlea1.length(); j++) { 
    String lettre1 = Character.toString(lettre);
    if (motAlea1.charAt(j) != lettre1.charAt(0)) {
        tempo += tirets.charAt(j);
    } // if     
        else {
        tempo += lettre1.charAt(0); 
    } // else   
    //tirets = tempo; //REMOVE THIS LINE
} // for 
tirets = tempo; //ADD THIS LINE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T03:37:33.787

您正在`tirets`根据 的长度访问一个位置`motAlea1`。我希望如此`motAlea1.length() > tirets.length()`。

```
for (int j = 0; j < motAlea1.length(); j++) { 

    String lettre1 = Character.toString(lettre);

    if (motAlea1.charAt(j) != lettre1.charAt(0)) {
        tempo += tirets.charAt(j); //THIS COULD FAIL!!!
    }else{
        tempo += lettre1.charAt(0); 
    }
    tirets = tempo; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T03:40:02.950

在这个循环中：

```
for (int j = 0; j < motAlea1.length(); j++) { 

    String lettre1 = Character.toString(lettre);
    if (motAlea1.charAt(j) != lettre1.charAt(0)) {
    tempo += tirets.charAt(j);
    } // if     
        else {
        tempo += lettre1.charAt(0); 
        } // else   
tirets = tempo; 
} // for 
```

String`tirets`比它短`motAlea1`，因此您试图检索**超出其 end**的字符。

# c# - 安装win服务时如何解决“无效服务帐户”问题？

> ID：15870734
> 
> 赞同：0
> 
> 时间：2013-04-08T03:19:33.390
> 
> 标签：c#, windows-services, setup-deployment, msbuildextensionpack

我正在使用 Msbuild Extension Pack 远程安装 windows 服务。每次我尝试部署我的应用程序时，我都会收到此有线错误：

```
Install Service failed with code: 'StatusInvalidServiceAccount' 
```

远程服务器中的帐户设置为作为服务登录，即使它不能解决问题。

注意：这是使用 Visual Studio 2010 创建的 Windows 服务。由于我的环境中的网络问题，我不希望 Powershell 安装它。

有关该主题的任何帮助都非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:33:52.047

在将服务部署到远程计算机时，您需要使用域帐户，并且该帐户需要设置为作为服务登录。

```
Under <user>

and under <Remote User> 
```

无论您使用什么，这个用户都需要是两台机器的管理员。

# mpi - mpirun 的自定义中断处理程序

> ID：15870738
> 
> 赞同：4
> 
> 时间：2013-04-08T03:20:16.480
> 
> 标签：mpi, interrupt, openmpi, interrupt-handling, keyboardinterrupt

显然，`mpirun`使用 SIGINT 处理程序将 SIGINT 信号“转发”到它产生的每个进程。

这意味着您可以为启用 mpi 的代码编写中断处理程序，执行`mpirun -np 3 my-mpi-enabled-executable`，然后将为三个进程中的每一个进程引发 SIGINT。不久之后，mpirun 退出。当您有一个仅打印错误消息然后退出的小型自定义处理程序时，这可以正常工作。**但是**，当您的自定义中断处理程序正在执行一项重要的工作（例如，进行严肃的计算或持久化数据）时，处理程序不会运行到完成。我假设这是因为 mpirun 决定过早退出。

这是执行后按下`ctrl-c`（即导致 SIGINT）时的标准错误`my-mpi-enabled-executable`。这是理想的预期行为：

```
interrupted by signal 2.
running viterbi... done.
persisting parameters... done.
the master process will now exit. 
```

这是`ctrl-c`执行后按下时的标准错误`mpirun -np 1 my-mpi-enabled-executable`。这是有问题的行为：

```
interrupted by signal 2.
running viterbi... mpirun: killing job...

--------------------------------------------------------------------------
mpirun noticed that process rank 0 with PID 8970 on node pharaoh exited on signal 0 (Unknown signal 0).
--------------------------------------------------------------------------
mpirun: clean termination accomplished 
```

**回答**以下任何问题将解决我的问题：

*   如何覆盖 mpirun SIGINT 处理程序（如果可能的话）？
*   如何避免在 mpirun 终止后立即终止生成的进程 mpirun？
*   在 mpirun 终止之前，mpirun 可能会向子进程发送另一个信号吗？
*   有没有办法“捕获”所谓的“信号0（未知信号0）”（参见上面的第二个stderr）？

我在 Linux 上运行 openmpi-1.6.3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:36:53.373

根据[OpenMPI 联机帮助页](http://www.open-mpi.org/doc/v1.6/man1/mpirun.1.php#sect14)，您可以发送一个`SIGUSR1`or`SIGUSR2`将`mpirun`其转发给它而不是自行关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-22T13:55:35.393

当遇到同样的问题时，我遇到了这个问题和@Zulan 的答案。

特别是我想`SIGINT`从用户那里得到一个（Ctrl+C），做一些事情，然后以有序的方式退出。因此，使用`SIGUSR1`不是一种选择。然而，阅读@Zulan 链接的手册页显示 mpirun（至少是 OpenMPI 版本）捕获 a`SIGINT`然后向`SIGTERM`子进程发送信号。因此，在我的代码中捕获`SIGTERM`允许我调用正确的退出例程。

请注意，信号处理不使用 MPI 保存，如此[处](https://stackoverflow.com/a/28030309/1174988)所述。

# c++ - 将当前 QWidget 替换为 QMainWindow 中的另一个 QWidget

> ID：15870739
> 
> 赞同：1
> 
> 时间：2013-04-08T03:20:16.477
> 
> 标签：c++, qt4

我有一些 QWidget 类，它的 ui 文件与 QMainWindow ui 文件是分开的。

如何从同一个 QMainWindow 上的不同类和 ui 文件将当前 QWidet 添加或替换到 QMainWindow 到其他 QWidget 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T06:53:51.033

如果我理解正确，您当前正在显示一个小部件，并且在执行某个操作时，您希望隐藏该小部件并在其位置显示另一个小部件。

如果这是正确的，您可能需要查看[QStackedLayout](http://qt-project.org/doc/qt-4.8/qstackedlayout.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T06:38:13.787

将您的小部件标题（注意您必须[从 ui 和继承生成标题](https://stackoverflow.com/questions/1948185/generate-h-and-cpp-from-ui-file)）添加到 QMainWindow.ui 中的提升小部件中。

然后，您只需根据小部件的基类插入一个 QWidget,QFrame, ...，然后右键单击它并从“Promote to..”子菜单中选择您的自定义小部件。

[这是QT手册的链接](http://qt-project.org/doc/qt-4.8/designer-using-custom-widgets.html)

# java - ListView 只有一个列表条目播放按钮有效

> ID：15870742
> 
> 赞同：2
> 
> 时间：2013-04-08T03:20:38.530
> 
> 标签：java, android, eclipse, listview

我正在尝试按照本网站的示例进行 ListView 活动

[http://cyrilmottier.com/2011/11/23/listview-tips-tricks-4-add-several-clickable-areas/](http://cyrilmottier.com/2011/11/23/listview-tips-tricks-4-add-several-clickable-areas/)

在其中我使用数据库中的数据并使用 BaseAdapter 一切似乎都工作正常（onListItemClick，加载我的数据的文本视图）但列表项右侧的“播放”按钮不起作用。我正在使用如果有帮助，我的列表项 xml 中的框架布局。

- -更新 - -

这些答案都没有解决我的问题，但是在摆弄之后，我得到了第一个入口播放按钮，但其他入口播放按钮不起作用，只有第一个起作用。这是我的列表活动和 xml 的新代码。

PlayAFriend 活动

```
 package com.fullfrontalgames.numberfighter;
import com.fullfrontalgames.numberfighter.DBAdapter;
import com.fullfrontalgames.numberfighter.R;

import android.app.ListActivity;
import android.content.Intent;
import android.database.Cursor;

import android.os.Bundle;

import android.support.v4.widget.SimpleCursorAdapter;

import android.view.View;

import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;

import android.widget.Button;
import android.widget.ListAdapter;
import android.widget.ListView;

import android.widget.Toast;

public class PlayAFriend extends ListActivity{
    DBAdapter DBAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.list_items);

        final DBAdapter db = new DBAdapter(this);
        DBAdapter = db.open();

        ListView FriendLV = (ListView) findViewById(android.R.id.list);
        Button playbutton = (Button) findViewById(R.id.playbutton);

        FriendLV.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                // TODO Auto-generated method stub
                Toast.makeText(getBaseContext(), "test", Toast.LENGTH_SHORT).show();
            }

        });
        playbutton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent("com.fullfrontalgames.numberfighter.Fightattacker"));
            }
        });

Cursor friendslist = db.GetAllFriends();

        String[] from = new String[] {"FRIENDS"};   // your column/columns here
        int[] to = new int[] {R.id.textview_friends};

        @SuppressWarnings("deprecation")
        ListAdapter cursorAdapter = new SimpleCursorAdapter(this, R.layout.list_items, friendslist, from, to,0);
          FriendLV.setAdapter(cursorAdapter);

    }

} 
```

list_items xml

```
 <?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:descendantFocusability="blocksDescendants"
android:orientation="vertical" >

    <ListView 
            android:id="@android:id/list"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:orientation="vertical" >

        </ListView>

    <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:background="@drawable/searchimageview"
        android:orientation="vertical" >

<TextView 
    android:id="@+id/textview_friends"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textColor="@color/black"
    android:textStyle="bold"
    android:textSize="40dp"
    android:layout_gravity="center" />

<Button
        android:id="@+id/playbutton"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:layout_gravity="right"
        android:background="@drawable/playbutton" />

    </FrameLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:49:59.720

可能是你的方式不对。你必须尝试这个`textView`你必须使用的链接`button`。 [http://wowjava.wordpress.com/2011/03/26/dynamic-listview-in-android/](http://wowjava.wordpress.com/2011/03/26/dynamic-listview-in-android/)

如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:56:33.600

试试下面

在 getView()

```
 Button b=(Button) convertView.findViewById(R.id.playbutton);
 b.setOnClickListener(new OnClickListener()
 {
       if (position != ListView.INVALID_POSITION) {
                        startActivity(newIntent("com.fullfrontalgames.numberfighter.Fightattacker"));
                }
 }); 
```

此外，您应该使用 ViewHolder 来实现平滑滚动和性能。详细信息可在下面的链接中找到。

[http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T02:52:29.420

更新

抱歉更新晚了，但我自己解决了这个问题，方法是向我的播放按钮添加一个 android:onClick 属性，然后在我的类中定义公共 onButtonClick 方法。

```
<Button
    android:id="@+id/playbutton"
    android:layout_width="60dp"
    android:layout_height="60dp"
    android:layout_gravity="right"
    android:onClick="OnButtonClick"
    android:background="@drawable/playbutton" /> 
```

班级

```
public void OnButtonClick(View view) {
    startActivity(new Intent(
            "com.fullfrontalgames.numberfighter.Fightattacker"));
} 
```

# nsstring - 将数据发送到 detailview 时遇到问题

> ID：15870744
> 
> 赞同：0
> 
> 时间：2013-04-08T03:21:01.063
> 
> 标签：nsstring, uitextview

我正在使用集合视图从我的服务器获取数据，在单元格中显示其中的一些数据，然后我对目标视图控制器有一个 segue 我得到了正确更新的图像，但由于某种原因，文本不会进入我的 UITextView

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
//DetailSegue

if ([segue.identifier isEqualToString:@"DetailSegue"]) {
    ICBCollectionViewCell *cell = (ICBCollectionViewCell *)sender;
    NSIndexPath *indexPath = [self.collectionView indexPathForCell:cell];
    ICBDetailViewController *dvc = (ICBDetailViewController *)[segue destinationViewController];

    path = [paths objectAtIndex:indexPath.row];
    Path = [path objectForKey:@"path"];
    title = [titles objectAtIndex:indexPath.row];
    Title = [title objectForKey:@"title"];
    sku = [SKUs objectAtIndex:indexPath.row];
    Sku = [sku objectForKey:@"SKU"];
    longDescrip = [longDescription objectAtIndex:indexPath.row];
    LongDescrip = [longDescrip objectForKey:@"longDescrip"];
    LongDescrip =@"Hello World";
    NSLog(@"Descrip =%@",LongDescrip);
    NSString *iconTitle =[NSString stringWithFormat:@"%@.png",Sku];
    NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *fullPath = [docDir stringByAppendingPathComponent:[NSString stringWithFormat:@"/%@",iconTitle]]; //add our image to the path

    dvc.img = [[UIImage alloc] initWithContentsOfFile:fullPath];
    dvc.title = Title;
    //UITextView *descrip = (UITextView *)[cell viewWithTag:120];
    [dvc.descrip setText:@"Hello"];
} 
```

}

我不确定它是否与发送到的对象是 UITextView 并且我正在向它发送 String 的事实有关

或者如果我有什么错误

这里也是 detailController 的 .m 和 .h

.h

```
#import <UIKit/UIKit.h>

   @interface ICBDetailViewController : UIViewController
   @property(weak) IBOutlet UIImageView *imageView;
   @property (strong) UIImage *img;
   @property(weak) IBOutlet UITextView *descrip;

@end 
```

他们

```
#import "ICBDetailViewController.h"

    @interface ICBDetailViewController ()

@end

@implementation ICBDetailViewController

@synthesize imageView, img, descrip;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
   self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
   if (self) {
    // Custom initialization
   }
   return self;
}

- (void)viewDidLoad
{
   [super viewDidLoad];
   self.imageView.image = self.img;
// Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
   [super didReceiveMemoryWarning];
   // Dispose of any resources that can be recreated.
}

@end 
```

希望有人能看到我两天错过的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:00:59.553

在再次查看它之后，我注意到我错过了 .h 中的插座并忘记在 .m 的 ViewDidLoad 中设置它显示我也错过了将引用插座连接到我的 txtView

# ios - 如何从方法返回 NSMutableArray

> ID：15870745
> 
> 赞同：0
> 
> 时间：2013-04-08T03:21:07.250
> 
> 标签：ios, nsmutablearray, nsobject

我在一个 NSObject 类中有一个方法，我正在从另一个 ViewController 类执行，我想重新调用一个 NSMutableArray 但是我不知道如何将它传递到 ViewController 类中的变量中。

更新代码：

NSObject 类被称为 Axis

Axis.h // 在此处声明我的方法，返回类型为 NSMutableArray

```
- (NSMutableArray *)assignAxes:(NSArray*)axesData; 
```

轴.m

```
- (NSMutableArray *)assignAxes:(NSArray*)axesData {
//..

//pass some NSDictionaries into a MutableArray called myMutableArray

return myMutableArray;
} 
```

现在我有一个名为 FinalViewViewController 的视图控制器，我想从这个视图控制器调用 assignAxes 方法，我想将返回的 myMutableArray 放入 FinalViewViewController 中的 mutableArray 变量中，但不知道如何......我只知道如何调用该方法不将返回值传递给要使用的变量。

FinalViewViewController.m

```
Axis *axis = [[Axis alloc] init];
    NSMutableArray *tempGetSeriesObjArray = [[NSMutableArray alloc] init]; // create holder variable for returning mutableArray
    tempGetSeriesObjArray = [axis assignAxes:series]; // gives an error 
```

这是我从最后一行代码中得到的错误

```
Incompatible pointer types assigning to 'NSMutableArray *__strong' from 'Axis *' 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:26:36.037

在您的 NSObject 类中，首先进入您的 .h 文件并声明数组并设置属性

```
@interface YourNSObjectClass : NSObject {
    NSMutableArray *_myArray;
}

@property (nonatomic, retain) NSMutableArray *_myArray;

- (NSMutableArray *) getMyArray; // declare method

@end 
```

所以现在，你必须同步你的变量并在 initMethod 中初始化它——如果你有一个自定义的 init 方法，你也必须声明它并让它在那里。

```
@synthesize _myArray;

- (id) init {
     if(self = [super init]) {
           _myArray = [[NSMutableArray alloc] init];
     }
     return self;
} 
```

getter 方法也应该有效

```
- (NSMutableArray *) getMyArray {
    return _myArray;
} 
```

# symfony - 将 Symfony 2.1 升级到 2.2：片段子框架和语言环境处理损坏

> ID：15870747
> 
> 赞同：0
> 
> 时间：2013-04-08T03:21:47.207
> 
> 标签：symfony, locale, symfony-2.1, symfony-2.2

我刚刚从 Symfony 2.1 升级到 2.2。我按照此处给出的说明进行操作：

```
http://symfony.com/blog/symfony-2-2-0
https://github.com/symfony/symfony/blob/2.2/UPGRADE-2.2.md 
```

我的所有代码之前都运行良好，但现在在我尝试在我的应用程序中执行某些操作后，框架将“_fragment”注入到 URL 中存在某种问题。这正在改变我的网址：

```
http://server/app_dev.php/en-GB/ 
```

到：

```
http://server/app_dev.php/_fragment/ 
```

然后，twig 将其作为区域设置，并导致它失败并出现以下错误：

```
An exception has been thrown during the rendering of a template
("Circular reference detected when adding a fallback catalogue for locale "".")
in "/var/....../HomeBundle/Resources/views/Home/index.html.twig".

2/2 Twig_Error_Runtime: An exception has been thrown during the rendering of a template 
("Circular reference detected when adding a fallback catalogue for locale "".") 
in "/var/...../HomeBundle/Resources/views/Home/index.html.twig"
1/2 LogicException: Circular reference detected when adding a fallback catalogue for locale "". 
```

部分回溯说：

```
DEBUG - Notified event "kernel.exception" to listener "Symfony\Component\HttpKernel\EventListener\ProfilerListener::onKernelException". 
DEBUG - Notified event "kernel.exception" to listener "Symfony\Component\HttpKernel\EventListener\ExceptionListener::onKernelException". 
CRITICAL - Uncaught PHP Exception Twig_Error_Runtime: "An exception has been thrown during the rendering of a template ("Circular reference detected when adding a fallback catalogue for locale "".") in "/var/...../HomeBundle/Resources/views/Home/index.html.twig"." at /var/...../app/cache/dev/classes.php line 6030 
DEBUG - Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\ProfilerListener::onKernelRequest". 
DEBUG - Notified event "kernel.request" to listener "Symfony\Bundle\FrameworkBundle\EventListener\SessionListener::onKernelRequest". 
```

当我第一次登录应用程序时，一切似乎都运行良好，请求列出了应该是的语言环境：

```
_locale     "en-GB"
_route      "_home_index"
_route_params   "Array(_locale => en-GB)" 
```

但是，如果我随后单击另一个链接（包括返回同一页面），则会因上述错误而失败并将请求更改为：

```
_locale     "_fragment"
_route      "_home_index"
_route_params   "Array(_locale => _fragment)" 
```

我的路由（对于上面的示例）如下所示：

```
Home_Home:
    resource:   "@HomeBundle/Controller/HomeController.php"
    type:       annotation
    prefix:     /{_locale}
    defaults:   { _locale: en } 
```

我的配置：

```
framework:
    translator:      { fallback: en }
    default_locale:  en 
```

我认为问题不在于语言环境处理，而在于添加到 Symfony 2.2 中的新片段子处理框架。可能它以某种方式被调用/激活？（或者我缺少某种配置）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:34:27.237

我想我至少发现了这个问题，只需在 config.yml 中添加一个片段配置项即可解决该特定问题：

```
framework:
    fragments:       { path: /_fragment } 
```

# android - 实施照片共享应用程序的最佳方式

> ID：15870749
> 
> 赞同：0
> 
> 时间：2013-04-08T03:21:53.030
> 
> 标签：android, jquery, ios, cordova

我正在使用 phonegap 做一个带有帐户身份验证的照片共享应用程序。

我们将使用 jquery（客户端）、CSS3（无图像和动画）/codeigniter（服务器），并且我们已经从服务器构建了我们的数据库。

从服务器中提取数据后，我无法决定如何检索我的数据以及如何处理它。

我应该从使用的登录名中检索数据库，它会像 instagram 一样拉出对图片发表评论的朋友/关注者/人，但它更像是 facebook 和 instagram 的组合。

每次照片、好友请求等有新评论时，数据应同步或自动更新。从服务器中提取数据时是否应该缓存数据？ CRUD 缓存数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:40:49.360

一般可以在用户登录时预取一些必要的数据，并且可以有后台服务来调度批量传输和批量更新数据。它不应该每次都自动同步数据（除非你真的需要它），因为互联网连接会很快缩短电池寿命。

你可以阅读这个很好的文档：http: [//developer.android.com/training/efficient-downloads/efficient-network-access.html#PrefetchData](http://developer.android.com/training/efficient-downloads/efficient-network-access.html#PrefetchData)

该文档适用于Android，但我认为它可以应用于其他平台。

希望它对你有所帮助:)

# c++ - OpenGL 纹理导致内存问题

> ID：15870753
> 
> 赞同：0
> 
> 时间：2013-04-08T03:22:51.223
> 
> 标签：c++, c, opengl

我正在编写的 C 程序中有一些奇怪的内存问题，我认为与我的纹理加载系统相关的原因是原因。

问题是，根据我制作的纹理数量，不同的问题开始出现。较少的纹理往往会稍微改变程序中的其他变量。如果我包含我想要包含的所有纹理，程序可能会吐出许多不同的“ *** glibc detected *** ”类型错误，偶尔还会出现分段错误。令人惊讶的是，有时，该程序可以完美运行。这都是抽签的运气。

在这一点上，我的代码相当繁重，所以我只发布我认为是它的相关部分的内容。

```
d_newTexture(d_loadBMP("resources/sprites/default.bmp"), &textures); 
```

是我调用的将纹理加载到 OpenGL 中的函数。"textures" 是一个 texMan_t 类型的变量，它是我制作的一个结构体。

```
typedef struct {
    GLuint texID[500];
    int texInc;
} texMan_t; 
```

这个想法是 texMan_t 包含所有纹理 ID，以便于使用。texInc 只是跟踪 texID 的下一个可用成员是什么。

这是 d_newTexture：

```
void d_newTexture(imgInfo_t info, texMan_t* tex) {

    glEnable(GL_TEXTURE_2D);

    glGenTextures(1, &tex->texID[tex->texInc]);
    glBindTexture(GL_TEXTURE_2D, tex->texID[tex->texInc]);
    glTexEnvf( GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL );

    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT );

    gluBuild2DMipmaps( GL_TEXTURE_2D, 4, info.width, info.height, GL_RGBA, GL_UNSIGNED_BYTE, info.data );

    tex->texInc++;
    glDisable(GL_TEXTURE_2D);
} 
```

我还使用了一个名为 d_newTextures 的函数，它与 d_newTexture 相同，只是它将一个简单的精灵表拆分为多个纹理。

```
void d_newTextures(imgInfo_t info, int count, texMan_t* tex) {
    glEnable(GL_TEXTURE_2D);

    glGenTextures(count, &tex->texID[tex->texInc]);
    for(int i=0; i<count; i++) {
        glBindTexture(GL_TEXTURE_2D, tex->texID[tex->texInc+i]);
        glTexEnvf( GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL );

        glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST );
        glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST );
        glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT );
        glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT );

        gluBuild2DMipmaps(  GL_TEXTURE_2D, 4, info.width, info.height/count, 
            GL_RGBA, GL_UNSIGNED_BYTE, &info.data[info.width*(info.height/count)*4*i] );
    }

    tex->texInc+=count;
    glDisable(GL_TEXTURE_2D);
} 
```

我看到的问题可能是什么原因？

编辑：最近，我也收到错误“ *** glibc detected****out/PokeEngine: free(): invalid pointer: 0x01010101 ** *" 关闭程序后，假设它能够正确开始。回溯如下所示：*

 *```
/lib/i386-linux-gnu/libc.so.6(+0x75ee2)[0xceeee2]
/usr/lib/nvidia-173/libGLcore.so.1(+0x277c7c)[0x109ac7c] 
```

编辑2：这也是代码`d_loadBMP`。希望能帮助到你！

```
imgInfo_t d_loadBMP(char* filename) {
    imgInfo_t out;

    FILE * bmpFile;
    bmpFile = fopen(filename, "r");
    if(bmpFile == NULL) {
        printf("ERROR: Texture file not found!\n");
    }

    bmp_sign bmpSig;
    bmp_fHeader bmpFileHeader;
    bmp_iHeader bmpInfoHeader;

    fread(&bmpSig, sizeof(bmp_sign), 1, bmpFile);
    fread(&bmpFileHeader, sizeof(bmp_fHeader), 1, bmpFile);
    fread(&bmpInfoHeader, sizeof(bmp_iHeader), 1, bmpFile);

    out.width = bmpInfoHeader.width;
    out.height = bmpInfoHeader.height;
    out.size = bmpInfoHeader.imageSize;

    out.data = (char*)malloc(sizeof(char)*out.width*out.height*4);

    // Loaded backwards because that's how BMPs are stored
    for(int i=out.width*out.height*4; i>0; i-=4) {
        fread(&out.data[i+2], sizeof(char), 1, bmpFile);
        fread(&out.data[i+1], sizeof(char), 1, bmpFile);
        fread(&out.data[i], sizeof(char), 1, bmpFile);

        out.data[i+3] = 255;
    }

    return out;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:29:57.177

您加载 BMP 文件的方式是错误的。您正在阅读结构，这是非常不可靠的，因为您的编译器为结构选择的内存布局可能与文件中的数据布局有很大不同。此外，您的代码包含零错误检查。如果我不得不做出有根据的猜测，我会说这就是你的问题所在。

顺便提一句。`glEnable(GL_TEXTURE_…)`启用纹理目标作为数据源进行渲染。仅仅生成和上传纹理是完全没有必要的。您可以在加载代码中省略支撑`glEnable(GL_TEXTURE_2D);`...`glDisable(GL_TEXTURE_2D)`块。我也不会使用`gluBuildMipmaps2D`——它不支持任意纹理尺寸，而且无论如何你都在禁用 mipmapping——直接使用`glTexImage2D`.

另外，我不知道您需要纹理管理器。或者至少不是为什么你的纹理管理器看起来像这样。更好的方法是使用*哈希映射* **文件路径 → 纹理 ID**和引用计数。*

# java - 如何通过 URL 将参数传递给使用 JSF 的 bean 类？

> ID：15870755
> 
> 赞同：5
> 
> 时间：2013-04-08T03:23:06.163
> 
> 标签：java, jsf

我为我的 JSF 应用程序创建了一个登录页面。我想通过 URL 将用户名和密码作为参数传递，以便稍后将它们作为 bean 类中的字段接收。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T05:21:39.960

您应该将其作为 POST 参数传递，这是 JSF 默认执行的操作，您可以在 Google 上搜索使用 JSF 的登录页面的快速示例，但是如果您想从 URL 读取请求参数，那么您可以这样做

```
 <a href="name.jsf?id=#{testBean.id}" /> 
```

你的 bean 中需要这样的东西

```
@ManagedBean
@RequestScoped
public class TestBean {

  @ManagedProperty(value = "#{param.id}")
  private String id;

  .....
} 
```

您也可以在您的 xhtml 中执行此操作以获得相同的结果，这将适用于 JSF 2.x，因为 viewParam 在 JSF 1.2 中不可用

```
<f:metadata>
    <f:viewParam name="id" value="#{testBean.id}" />
</f:metadata> 
```

上面的行将在创建 bean 时根据请求参数 id 设置 bean 中的参数 id。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T04:15:53.563

首先，如果您正在考虑将用户名和密码作为查询字符串的一部分附加。然后不要这样做，您正在使您的系统易受攻击。

关于你的问题的答案：

```
<h:commandLink action="#{ttt.goToViewPage()}" value="View">
    <!-- To access via f:param tag, this does not maps directly to bean. Hence using context fetch the request parameter from request map. -->
    <!-- <f:param name="selectedProfileToView" value="#{profile.id}" /> -->

    <!-- Using this to replace the f:param tag to avoid getting the request object -->
    <f:setPropertyActionListener target="#{ttt.selectedStudentProfile}" value="#{profile.id}" />

</h:commandLink> 
```

**f:param**（如评论中所述），这不会直接映射到 bean 属性，但您必须使用上下文来获取请求对象，您可以从中引用 requestparametermap 中的值。

```
FacesContext context = FacesContext.getCurrentInstance();
Map<String, String> requestMap = context.getExternalContext().getRequestParameterMap(); 
```

**f:setPropertyActionListener**，这是另一个属性，它将直接映射到托管 bean 的属性。

```
<h:commandLink action="#{ttt.goToEditPage(profile.id)}" value="Edit"> 
```

如果你看这里，我已经提到了函数中的参数。托管 bean 类中应存在具有相似签名的方法，该值将直接映射到函数参数。

# iphone - 对 UIScrollview 的子视图使用 UILongPressGestureRecognizer

> ID：15870756
> 
> 赞同：4
> 
> 时间：2013-04-08T03:23:33.790
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uiscrollview

在过去的四个小时里，我尝试了许多 Stack Overlow 解决方案，但没有一个能帮助解决我的问题。

这里是，

*   我有一个**UIScrollView**
*   在该 ScrollView 中有**一个自定义 UILabel 和 8 个自定义 UIImageViews**
*   我想检测**长按**
*   像这样的东西

    `UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPressDidFire:)];
    longPress.minimumPressDuration = 0.5; [scroll addGestureRecognizer:longPress]; //scroll defined elsewhere`

但是，如果我用滚动的任何子视图替换滚动，则长按事件永远不会触发。

> 1.  如何检测长按滚动视图的子视图？
> 2.  这是一个相当混乱的黑客，但是，因为我可以检测到滚动视图的长按，有没有什么方法可以检测到按下的位置，以便我可以看到正在按下哪个特定的子视图。

另外，`(insert subview here).userInteractionEnabled = YES`我为滚动视图的所有子视图设置了这个属性，所以这应该不是问题。

我也尝试过使用 Stack Overflow 其他地方建议的 touchesBegan 和 touchesEnded 方法。

此外，对于图像视图，我确实使用 for 循环为每个自定义图像视图设置了一个新的 UILongPressGestureRecognizer，因为我**知道每个手势识别**器规则 1 个视图。

来自第一次 iOS 开发者，

格雷厄姆

PS如果我能找到1的解决方案，我真的更喜欢。而不是凌乱的2。

* * *

根据要求提供更多代码：

在视图控制器的初始化中

```
 UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPressDidFire:)];
longPress.minimumPressDuration = 0.5;
[self.titleLabel addGestureRecognizer:longPress]; //titleLabel property initialized elsewhere
[mainView addSubview:self.titleLabel]; 
```

在“加载图像”方法中

```
for (NSData * dataImg in results) {
//Does some work turning data into an image, into an image view called img
        img.delegate = self;
        img.userInteractionEnabled = YES;
        UILongPressGestureRecognizer *aLongPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPressDidFire:)];
        aLongPress.minimumPressDuration = 0.5;
        [img addGestureRecognizer:aLongPress];
        [imgContainer addSubview:img];
} 
```

* * *

更多代码 + 注释

> self.view (UIView)
> 
> ->滚动（UIScrollView）
> 
> ->->主视图（UIView）
> 
> ->->->titleLabel (UILabel)
> 
> ->->->imgContainer (UIView)
> 
> ->->->->图像（UIImageViews）

```
[self.view addSubview:scroll];
[scroll addSubview:mainView];
[mainView addSubview:self.titleLabel];
[mainView addSubview:imgContainer];
[imgContainer addSubview:img]; //done 8x via for loop 
```

感谢@RegularExpression 的回答，我现在知道主视图被按下了，但不是它的子视图，所以我需要找到一种方法来在它上面显示主视图的子视图。:)

另一个更新，titleLabel 有效。ImageViews 仍然不起作用。:(

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-27T13:09:23.567

我知道这有点晚了，并且已经选择了答案，但如果你有 iOS7，如果其他人想要一个很好的简单解决方案。

在您的**UILongPressGestureRecognizer**代表中实现**gestureRecognizer:shouldRequireFailureOfGestureRecognizer:otherGestureRecognizer**选择器

检查**otherGestureRecognizer**是否为**UIPanGestureRecognizer**并返回 YES，否则返回 NO

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRequireFailureOfGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    if ([otherGestureRecognizer isKindOfClass:[UIPanGestureRecognizer class]]) {
        return YES;
    }

    return NO;
} 
```

滚动视图实际上会产生一个 UIScrollViewPanGestureRecognizer，它是私有 API 的一部分，但它是 UIPanGestureRecognizer 的子类，所以上面的工作正常。

要支持 iOS6 或更低版本，您需要遍历 UIScrollView 的手势识别器，检测哪个是**UIPanGestureRecognizer并在您的****UILongPressGestureRecogizer**上执行**requireGestureRecognizerToFail**选择器。

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T05:02:05.360

你的代码似乎很好，我认为它应该可以工作。我使用了下面的代码，它对我来说工作正常。

```
UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPress:)];
longPress.delegate = (id)self;
longPress.minimumPressDuration=0.05;
imageView.userInteractionEnabled = YES;
[imageView addGestureRecognizer:longPress]; 
```

及其方法，

```
- (IBAction)handleLongPress:(UILongPressGestureRecognizer *)sender {
   NSLog(@"detected");

if (sender.state == UIGestureRecognizerStateEnded){
     UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Alert" message:@"YES"    delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
     [alert show];
   } 
} 
```

正如你所说，在这里我将 imageView 作为滚动视图的子视图

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T04:09:46.427

由于您的 UIScrollView 是共同的父母，这可能是您的手势识别器需要的地方。您可以通过查看操作中提供的点的位置来确定正在按下哪个子视图。因此，各个子视图不需要手势识别器。

所以，你会做这样的事情：

```
- (void)longPressDidFire:(UILongPressGestureRecognizer *)sender
{
    if (sender.state == UIGestureRecognizerStateEnded)
        CGPoint point = [sender locationInView:scroll];
        UIView *tappedView = [scroll hitTest:point withEvent:nil]; 
```

所以，你有长期被压制的观点。

其他可能导致动作不触发的事情是委托问题，或者如果滚动包含在拦截触摸的另一个视图中。

高温高压

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T03:29:07.533

代替

```
 [scroll addGestureRecognizer:longPress]; 
```

在子视图上添加手势，在您声明它们之后和将它们添加到滚动视图之前

```
 [subview addGestureRecognizer:longPress]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T07:09:02.253

哇哦，它有效！

问题是：

imgContainer 是一个**带有空框架的 UIView，其中**有几个 UIImageViews 作为子视图

我*的印象是，当我向 imgContainer 添加子视图时，imgContainer 会展开*。

这*不是真的*。

我必须**将 imgContainer 的框架设置为与滚动视图相同的内容框架**，然后一切正常。

我希望这个答案可以帮助像我这样的任何其他未来的 iOS 第一计时器。**

# java - ArrayOutofBounds 带有可变数量单词的标记

> ID：15870761
> 
> 赞同：0
> 
> 时间：2013-04-08T03:24:18.307
> 
> 标签：java, token

我正在尝试从可能具有不同字数的文本文件中读取命令。我正在尝试使用 IF 语句，以免数组越界异常。谁能告诉我我做错了什么？谢谢你。这是它发生的代码部分。

```
 read = new Scanner(new File("Phone.txt"));

    //this will loop thru file until end of file
    while (read.hasNext())
    {

    whole = read.nextLine().trim();
    String[] tokens = whole.split(" ");//array to split up line
    command = tokens[0].toLowerCase();//all lines will have at least one word
    if (tokens.length > 0)//if more than one word, 2nd will be name
    {
        name1st.setFirst(tokens[1]);
    }

    if (tokens.length > 1)//if more than one word, 3rd will be phone #
    {
        phone = tokens[2];
    }
        switch (command)
        {
            case "add":
                nameList.add(name1st, phone);
                break;
            case "locate":
                nameList.getValue(name1st);
                break;
            case "remove":
                    nameList.remove(name1st);
                break;
            case "print":
                    nameList.display();
        }//end switch

    }//end while 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T03:30:46.303

数组索引从 0 开始。并且数组的长度等于数组中元素的数量。

```
 if (tokens.length > 1)//if more than one word, 2nd will be name
    {
        name1st.setFirst(tokens[1]);
    }

    if (tokens.length > 2)//if more than one word, 3rd will be phone #
    {
        phone = tokens[2];
    } 
```

您可以如上所述更正您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T03:33:01.933

好的，

弄清楚了。长度与索引不同。如果它的 idex 为 0，它的长度为 1，所以我必须将 if 中的条件提高 1。然后它运行了。感谢所有为此工作的人

# c - 分段错误（核心转储）

> ID：15870762
> 
> 赞同：0
> 
> 时间：2013-04-08T03:24:22.400
> 
> 标签：c, segmentation-fault

我是C新手，我现在正在学习结构。这试图创建一个完整的小程序来管理数据库。

```
#include <stdio.h>
#include <assert.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>

#define MAX_DATA 512
#define MAX_ROWS 100

struct Address {
    int id;
    int set;
    char name[MAX_DATA];
    char email[MAX_DATA];
};

struct Database {
    struct Address rows[MAX_ROWS];
};

struct Connection {
    FILE *file;
    struct Database *db;
};

void die(const char *message)
{
    if(errno) {
        perror(message);
    } else {
        printf("ERROR: %s\n", message);
    }

    exit(1);
}

void Address_print(struct Address *addr)
{
    printf("%d %s %s\n",
            addr->id, addr->name, addr->email);
}

void Database_load(struct Connection *conn)
{
    int rc = fread(conn->db, sizeof(struct Database), 1, conn->file);
    if(rc != 1) die("Failed to load database.");
}

struct Connection *Database_open(const char *filename, char mode)
{
    struct Connection *conn = malloc(sizeof(struct Connection));
    if(!conn) die("Memory error");

    conn->db = malloc(sizeof(struct Database));
    if(!conn->db) die("Memory error");

    if(mode == 'c') {
        conn->file = fopen(filename, "w");
    } else {
        conn->file = fopen(filename, "r+");

        if(conn->file) {
            Database_load(conn);
        }
    }

    if(!conn->file) die("Failed to open the file");

    return conn;
}

void Database_close(struct Connection *conn)
{
    if(conn) {
        if(conn->file) fclose(conn->file);
        if(conn->db) free(conn->db);
        free(conn);
    }
}

void Database_write(struct Connection *conn)
{
    rewind(conn->file);

    int rc = fwrite(conn->db, sizeof(struct Database), 1, conn->file);
    if(rc != 1) die("Failed to write database.");

    rc = fflush(conn->file);
    if(rc == -1) die("Cannot flush database.");
}

void Database_create(struct Connection *conn)
{
    int i = 0;

    for(i = 0; i < MAX_ROWS; i++) {
        // make a prototype to initialize it
        struct Address addr = {.id = i, .set = 0};
        // then just assign it
        conn->db->rows[i] = addr;
    }
}

void Database_set(struct Connection *conn, int id, const char *name, const char *email)
{
    addr->set = 1;

    char *res = strncpy(addr->name, name, MAX_DATA);

    addr->name[MAX_DATA] = '\n';
    if(!res) die("Name copy failed");

    res = strncpy(addr->email, email, MAX_DATA);
    addr->email[MAX_DATA] = '\n';
    if(!res) die("Email copy failed");

}

void Database_get(struct Connection *conn, int id)
{
    struct Address *addr = &conn->db->rows[id];

    if(addr->set) {
        Address_print(addr);
    } else {
        die("ID is not set");
    }
}

void Database_delete(struct Connection *conn, int id)
{
    struct Address addr = {.id = id, .set = 0};
    conn->db->rows[id] = addr;
}

void Database_list(struct Connection *conn)
{
    int i = 0;
    struct Database *db = conn->db;

    for(i = 0; i < MAX_ROWS; i++) {
        struct Address *cur = &db->rows[i];

        if(cur->set) {
            Address_print(cur);
        }
    }
}

int main(int argc, char *argv[])
{
    if(argc < 3) die("USAGE: ex17 <dbfile> <action> [action params]");

    char *filename = argv[1];
    char action = argv[2][0];
    struct Connection *conn = Database_open(filename, action);
    int id = 0;

    if(argc > 3) id = atoi(argv[3]);
    if(id >= MAX_ROWS) die("There's not that many records.");

    switch(action) {
        case 'c':
            Database_create(conn);
            Database_write(conn);
            break;

        case 'g':
            if(argc != 4) die("Need an id to get");

            Database_get(conn, id);
            break;

        case 's':
            if(argc != 6) die("Need id, name, email to set");

            Database_set(conn, id, argv[4], argv[5]);
            Database_write(conn);
            break;

        case 'd':
            if(argc != 4) die("Need id to delete");

            Database_delete(conn, id);
            Database_write(conn);
            break;

        case 'l':
            Database_list(conn);
            break;
        default:
            die("Invalid action, only: c=create, g=get, s=set, d=del, l=list");
    }

    Database_close(conn);

    return 0;
} 
```

它应该是这样的：

```
$ make ex17
cc -Wall -g    ex17.c   -o ex17
$ ./ex17 db.dat c
$ ./ex17 db.dat s 1 someone someemail
$
$ ./ex17 db.dat l
1 someone someemail 
```

但我收到此错误消息：分段错误（核心转储）。

```
$ make ex17
cc -Wall -g    ex17.c   -o ex17
$ ./ex17 db.dat c
$ ./ex17 db.dat s 1 someone someemail
Segmentation fault (core dumped) 
```

我认为我在“Database_set”中有问题。我想解决这个问题，但我不能。我想知道我做错了什么。感谢对此错误的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:34:06.930

在行

```
void Database_set(struct Connection *conn, int id, const char *name, const char *email)
{
    addr->set = 1; 
```

你在哪里定义的`addr`？我什至不明白这是如何编译的...

大概您需要记录数据库中有效记录的数量，并在`addr`添加新记录时指向第一个未使用的记录。这需要更新您的数据库结构以及用于添加和删除的函数。或者您通过数据库循环到不是的第一个地址`set`。无论哪种方式，您的函数都需要`addr`在将其用作指针之前声明并将其设置为有用的东西。

以下代码行可能会有所帮助（这些将是`Database_set`函数的第一行）：

```
struct Address *addr;
int ii=0;
while(conn->db->rows[ii].set) ii++;
addr = conn->db->rows + ii;
addr->set = 1;
addr->id = id; 
```

您还需要进行 craig65535 所示的更改。您的代码很可能还有其他问题，但是通过这些添加，我可以执行您在问题中给出的说明；它编译，它运行，它不会抱怨。这是一个开始。哦 - 它能够使用`l`命令列出数据库......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T03:41:42.313

假设`addr`是 type `struct Address *`，这是完全错误的：

```
addr->name[MAX_DATA] = '\n'; 
```

addr->name 仅包含 MAX_DATA 字节，因此您可以写入的最大索引是`addr->name[MAX_DATA-1]`. 此外，您希望该字符串以空值结尾，因此您希望：

```
addr->name[MAX_DATA-2] = '\n';
addr->name[MAX_DATA-1] = '\0'; 
```

也是如此`addr->email`。

# javascript - 如何使 javascript 不适用于 Rails 中的页面范围？

> ID：15870763
> 
> 赞同：0
> 
> 时间：2013-04-08T03:24:38.810
> 
> 标签：javascript, ruby-on-rails

我正在尝试在我的网站上应用第三方脚本。这是下面的格式

```
<script type="text/javascript" src="http://thirdpartysite.com/front.asp?id=xxxx"></script> 
```

在我的 Rails3 应用程序中，我希望此脚本仅应用于帖子中包含的某些图像（仅适用于值 copyright==true 的图像/帖子）。所以我尝试在这段代码中使用它：

```
<% if post.copyright == true %>      
<script type="text/javascript" src="http://thirdpartysite.com/front.asp?id=xxxx"></script>
<% else %>
<% end %> 
```

不幸的是，这个 javascript 会影响页面上的所有图像。每页有多个帖子，我正在尝试将此 javascript 个性化到每个帖子中。

有什么想法可以让它发挥作用吗？我可以使用`<div id ="%=post.id" %>`CSS 选择器或其他方式让它工作吗？（不太确定）

我无法访问 javascript 的源代码，因为它来自第三方站点。我无法自定义它。我所拥有的只是他们给我的这个脚本代码，我认为我只能将它应用于我网站上的某些图像/帖子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T03:56:03.803

该脚本将在整个文档的上下文中执行。听起来您在页面上列出了一堆帖子，并根据逻辑多次包含相同的脚本；您通常只包含一次脚本。

您必须检查第三方代码（或其文档）以查看它如何选择要操作的图像。它可能会揭示一种向图像或父元素添加类的方法，允许您过滤掉您不想被操纵的图像。

# php - 在不刷新的情况下限制以 HTML 格式归档的文本的输入

> ID：15870777
> 
> 赞同：0
> 
> 时间：2013-04-08T03:26:39.300
> 
> 标签：php, javascript, html, jquery

嘿，我正在使用表格

```
<form action="" method="post">
<p>Enter Roll Number:
<input type="text" name="roll" maxlength="6" placeholder="123456" size="7"/>
</p>
<p>
<input type="submit" value="Submit" />
</p>
</form> 
```

为了从用户那里获取输入（卷号），我希望在按键事件中，用户只能在 0-9 和 Delete 和 Backspace 和 TAB 按钮之间键入。必须限制所有其他键的键入。还有一件事，如果该字段为空，则不应发布该表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:38:40.177

假设您将使用 jQuery，因为它可能是实现此类事情的最简单的语法。

```
<script>
    $(document).ready(function() {
        $('input[name="roll"]').keypress(function(e) {
            // Check out which keys are pressed
            switch(e.keyCode) {
                case 8: //backspace
                case 9: // TAB
                case 46: // delete
                case 48: // 0
                case 49: // 1
                case 50: // 2
                case 51: // 3
                case 52: // 4
                case 53: // 5
                case 54: // 6
                case 55: // 7
                case 56: // 8
                case 57: // 9
                case 96: // numberpad = 0
                case 97: // numberpad = 1
                case 98: // numberpad = 2
                case 99: // numberpad = 3
                case 100: // numberpad = 4
                case 101: // numberpad = 5
                case 102: // numberpad = 6
                case 103: // numberpad = 7
                case 104: // numberpad = 8
                case 105: // numberpad = 9
                    break;
                default:
                    return false;
            }
        });
    });
</script> 
```

这是[工作示例](http://jsfiddle.net/c4Z6y/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T06:08:21.430

这里是你的按键和表单提交的 JS 代码

```
<script>
    $(document).ready(function() {
        $('input[name="roll"]').keypress(function(e) {
            // Check out which keys are pressed
            if(e.keyCode == 8 || e.keyCode == 8 || e.keyCode == 46 || (e.keyCode >= 48 && e.keyCode <= 57) || (e.keyCode >= 96 && e.keyCode <= 105)) {
                   return true;
            } else {
                   return false;
            }
        });

    });

    function checkvalid() {
        if($('#roll').val() != '') {
           $('#frmid').submit();
        } else {
           return false;
        }
    }
</script> 
```

这里是 HTML 代码

```
<form action="" method="post" id="frmid" name="frmid" onsubmit="checkvalid();">
<p>Enter Roll Number:
<input type="text" name="roll" id="roll" maxlength="6" placeholder="123456" size="7"/>
</p>
<p>
<input type="submit" value="Submit" id="submit_btn" />
</p>
</form> 
```

# php - 使用时间戳返回错误结果的 PHP DateTime 实例

> ID：15870778
> 
> 赞同：4
> 
> 时间：2013-04-08T03:26:48.833
> 
> 标签：php, datetime, timestamp, unix-timestamp

我一直使用 php DateTime，我刚刚在一个使用 date() 处理所有内容的旧应用程序上做了一些工作。我注意到我的 DateTime 时间与 date() 时间不匹配。这让我相当担心。

我最终在本地进行了一些测试，发现 DateTime 在使用 unix 时间戳（**格式为“@1365389490”**）实例化时在我的本地机器上给出了不正确的结果。他们落后 12 小时（或更多，取决于夏令时）。

请注意，我已经在我的 MAMP Pro 安装中使用 php 5.2.17、5.3.14 和 5.4.4 测试了这些（是的，我在每次尝试之前都重新启动了 apache）。我还在 php 5.3.6 上的开发服务器上进行了测试。它们都输出错误的值。

```
# To confirm date() uses the right timezone
date_default_timezone_set("Pacific/Auckland");

$ts = '1365389490'; # 02:51:30pm 08/04/2013

# This shows correctly (02:51:30pm 08/04/2013)
echo date("h:i:sa d/m/Y", $ts) . "<br /><br />";

# This shows incorrectly (02:51:30am 08/04/2013)
$dateTime = new DateTime("@".$ts, new DateTimeZone("Pacific/Auckland"));
echo $dateTime->format("h:i:sa d/m/Y"); 
```

奇怪的是，这种替代方式有效。这是旧的 PHP 5.2 和更早的方法。

```
$dateTime = new DateTime();
$dateTime->setTimestamp($ts);
echo $dateTime->format("h:i:sa d/m/Y"); 
```

这是基本的东西。我不知道为什么它不表现自己。任何帮助将非常感激。

# 解决

根据 php 文档，当您将时区传递给 DateTime 构造函数时，时区将被忽略。时间对我来说是 UTC（尽管我的应用程序时区设置为太平洋/奥克兰）。

来自文档： http: [//php.net/manual/en/datetime.construct.php](http://php.net/manual/en/datetime.construct.php)

```
// Using a UNIX timestamp.  Notice the result is in the UTC time zone.
$date = new DateTime('@946684800');
echo $date->format('Y-m-d H:i:sP') . "\n"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T03:31:13.057

实例化 a不`DateTime`使用`@`时区，因此您必须在之后设置时区：

```
$dateTime = new DateTime("@".$ts);
$dateTime->setTimezone(new DateTimeZone("Pacific/Auckland"));
echo $dateTime->format("h:i:sa d/m/Y");

// 02:51:30pm 08/04/2013 
```

# c# - 检查第三方应用程序安装

> ID：15870780
> 
> 赞同：0
> 
> 时间：2013-04-08T03:27:29.633
> 
> 标签：c#, silverlight, windows-phone-8

在我的应用**B**中，我需要检查是否安装了应用**A。**如果**A**已安装，**B**将调用**A**。

如果**A**尚未安装，**B**将去市场下载**A**。

如何实现这个？？？
任何建议都会很棒！<br> 谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T05:38:58.457

您目前无法检查设备上是否安装了第三方应用程序。但是，如果您是该应用程序的发布者，您可以使用：

```
IEnumerable<Package> apps = Windows.Phone.Management.Deployment.InstallationManager.FindPackagesForCurrentPublisher();
apps.First().Launch(string.Empty); 
```

[此处](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207014%28v=vs.105%29.aspx)记录了此功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T23:22:24.353

如果应用 A 和应用 B 不是来自同一个发布者，则没有直接的方法可以获取此信息。但是，如果您能够与应用 B 的开发人员合作注册自定义 URI 关联，则应用 A 可以通过启动自定义 URI 与应用交互。

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206987(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206987(v=vs.105).aspx)

# c# - 使用 ASP.NET Web 服务从 SQL Server 检索图像

> ID：15870781
> 
> 赞同：2
> 
> 时间：2013-04-08T03:27:41.273
> 
> 标签：c#, asp.net, asp.net-3.5

我有一个带有 Image 表的 SQL Server (2008 R2)，该表有一个带有 image 类型的列。我使用将我的图像插入此列

```
Stream fs = FileUpload1.PostedFile.InputStream;
BinaryReader br = new BinaryReader(fs);
Byte[] bytes = br.ReadBytes((Int32)fs.Length);

//insert the file into database
string strQuery = "insert into pm005.images(imageName, type, alt, img)" + " values (@Name, @ContentType, @Alt, @Data)";
SqlCommand cmd = new SqlCommand(strQuery);

cmd.Parameters.Add("@Name", SqlDbType.VarChar).Value = filename;
cmd.Parameters.Add("@ContentType", SqlDbType.VarChar).Value = contenttype;
cmd.Parameters.Add("@Alt", SqlDbType.VarChar).Value = TextBox1.Text;
cmd.Parameters.Add("@Data", SqlDbType.Binary).Value = bytes;
InsertUpdateData(cmd);
lblMessage.ForeColor = System.Drawing.Color.Green;
lblMessage.Text = "File Uploaded Successfully";

private Boolean InsertUpdateData(SqlCommand cmd)
{
    // Open a connection the the SQL Server
    SqlConnection con = new SqlConnection();
    con.ConnectionString = "server=sql-server;integrated security=SSPI;database=pm005";

    cmd.CommandType = CommandType.Text;
    cmd.Connection = con;
    try
    {
        con.Open();
        cmd.ExecuteNonQuery();
        return true;
    }
    catch (Exception ex)
    {
        Response.Write(ex.Message);
        return false;
    }
    finally
    {
        con.Close();
        con.Dispose();
    }
} 
```

我相信这很好用，因为插入返回 true，我可以看到数据库中的数据。

但是，我这辈子都看不到我应该如何恢复这张图片。具体来说，我想要的是能够调用我的网络服务，将 imageID 传递给它，并将图像（并且只有图像）返回给我。就像它用 PHP 完成的一样。这是我现在使用的代码。

```
[WebMethod]
[ScriptMethod(UseHttpGet = true)]
public System.Drawing.Image  getImage(int imageID, string uName, string pword)
{
    string str="";
 try
 {
     SqlCommand cmd = getSQLCommand("SELECT img FROM pm005.images WHERE id="+imageID);

 byte[] Img = (byte[])cmd.ExecuteScalar();

  // Convert the image record to file stream and display it to picture control
  str = Convert.ToString(DateTime.Now.ToFileTime());
  FileStream fs = new FileStream(str, FileMode.CreateNew, FileAccess.Write);
  fs.Write(Img, 0, Img.Length);
  fs.Flush();
  fs.Close();

 }
 catch
 {

 }
 finally
 {

 }

 System.Drawing.Image theImage = System.Drawing.Image.FromFile(str);
 return theImage;

} 
```

这给出了错误：

```
System.ArgumentException: The path is not of a legal form.
   at System.IO.Path.NormalizePath(String path, Boolean fullCheck, Int32 maxPathLength)
   at System.IO.Path.GetFullPathInternal(String path)
   at System.IO.Path.GetFullPath(String path)
   at System.Drawing.IntSecurity.UnsafeGetFullPath(String fileName)
   at System.Drawing.IntSecurity.DemandReadFileIO(String fileName)
   at System.Drawing.Image.FromFile(String filename, Boolean useEmbeddedColorManagement)
   at WebService2.Service1.getImage(Int32 imageID, String uName, String pword) 
```

我看了这么多教程，除了“使用 PHP”之外没有找到任何可靠的答案。如果我必须这样做，但肯定有办法在 ASP.NET 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T03:30:14.007

尝试指定完整的文件路径：

```
FileStream fs = new FileStream(@"C:\Temp\YourFile.jpg", FileMode.CreateNew, FileAccess.Write); 
```

**编辑：**

听起来您不想使用文件系统，而是想在内存中执行此操作：

```
public byte[] imageToByteArray(System.Drawing.Image imageIn)
{
    MemoryStream ms = new MemoryStream();
    imageIn.Save(ms,System.Drawing.Imaging.ImageFormat.Gif);
    return  ms.ToArray();
}

public Image byteArrayToImage(byte[] byteArrayIn)
{
     MemoryStream ms = new MemoryStream(byteArrayIn);
     Image returnImage = Image.FromStream(ms);
     return returnImage;
} 
```

...

```
 System.Drawing.Image theImage = null;
 try
 {
     SqlCommand cmd = getSQLCommand("SELECT img FROM pm005.images WHERE id="+imageID);
     byte[] Img = (byte[])cmd.ExecuteScalar();
     theImage = byteArrayToImage(Img);
 }
 catch
 {

 }
 finally
 {

 }    
 return theImage;    
} 
```

# java - 将 null 设置为字段时，覆盖协议缓冲区默认抛出 NPE 的行为

> ID：15870783
> 
> 赞同：3
> 
> 时间：2013-04-08T03:28:11.153
> 
> 标签：java, protocol-buffers

我使用协议缓冲区 maven 插件来编译`.proto`文件。我真的很喜欢协议缓冲区，除了它不接受空值作为默认值或不接受值的一件事。相反，只要`null`通过，它就会抛出 NPE。防止这种 NPE 不必要地使代码膨胀，太多了，我真的很想避免这种情况！

我已经看到这个请求/问题被社区强烈提出并被 PB 团队拒绝。现在，我正在寻找可以通过自己修改/实现任何类来覆盖此行为的任何方法，以便编译我的原型文件以生成不会在空值上抛出 NPE 的代码。任何人都可以建议如何？或者有没有更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:20:39.223

> 现在，我正在寻找可以通过自己修改/实现任何类来覆盖此行为的任何方法，以便编译我的原型文件以生成不会在空值上抛出 NPE 的代码。

简而言之，您想要更改消息生成器代码。这很复杂，但也没*那么*复杂。缺点是它在 C++ 中......当然你需要在未来维护你的 fork，或者被当前形式的 protobuf 卡住。

您可能想从查看[`java_string_field.cc`](https://code.google.com/p/protobuf/source/browse/trunk/src/google/protobuf/compiler/java/java_string_field.cc)and开始[`java_message_field.cc`](https://code.google.com/p/protobuf/source/browse/trunk/src/google/protobuf/compiler/java/java_message_field.cc)。

我估计这只是几天的工作，如果那样的话 - 但你将永远承担一个小而存在的维护负担。

当然，另一种选择是完全从头开始自己重写消息生成——这显然是一项更大的任务，但我最终为我的[protobuf-csharp-port](http://protobuf-csharp-port.googlecode.com)项目做了一个……在 C++ 版本工作之后。（不过，我的端口遵循相同的非无效方法。）

# overloading - 在 Isabelle 中定义重载常量

> ID：15870788
> 
> 赞同：6
> 
> 时间：2013-04-08T03:28:38.987
> 
> 标签：overloading, isabelle

如何在 Isabelle 中定义一个函数，该函数根据其参数的类型或使用它的上下文的类型而具有不同的定义？

例如，我可能想`is_default`用 type定义一个函数`'a ⇒ bool`，其中每种不同的类型`'a`都有一个可能不同的“默认值”。（为了论证，我还假设现有的概念如`zero`不合适。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T03:28:38.987

Isabelle 通过定义一个常量名称，然后为该常量提供不同类型的新定义来支持重载定义。这可以通过`consts`定义常量名的命令，然后`defs (overloaded)`提供部分定义的命令来完成。

例如：

```
consts is_default :: "'a ⇒ bool"

defs (overloaded) is_default_nat:
  "is_default a ≡ ((a::nat) = 0)"

defs (overloaded) is_default_option:
  "is_default a ≡ (a = None)" 
```

上面的方法在没有参数的情况下也可以工作`(overloaded)`，但会导致 Isabelle 发出警告。

该`defs`命令还被赋予了一个名称，它是由 Isabelle 生成的包含定义的定理的名称。然后可以在以后的证明中使用此名称：

```
lemma "¬ is_default (Some 3)"
  by (clarsimp simp: is_default_option) 
```

[Isablle/Isar 参考手册](http://isabelle.in.tum.de/doc/isar-ref.pdf#page=113)中的“常量和定义”部分提供了更多信息。此外，Obua的一篇论文[“Conservative Overloading in Higher-Order Logic”讨论了一些实现细节和在不牺牲可靠性的情况下拥有这样一个框架的问题。](http://mediatum.ub.tum.de/doc/1094433/1094433.pdf)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-04T10:37:38.087

这种重载看起来非常适合类型类。首先，您为所需的功能定义一个类型类`is_default`：

```
class is_default =
  fixes is_default :: "'a ⇒ bool" 
```

然后你引入任意实例。例如，对于布尔值

```
instantiation bool :: is_default
begin
definition "is_default (b::bool) ⟷ b"
instance ..
end 
```

并列出

```
instantiation list :: (type) is_default
begin
definition "is_default (xs::'a list) ⟷ xs = []"
instance ..
end 
```

# php - mysql时间戳不在时代

> ID：15870792
> 
> 赞同：1
> 
> 时间：2013-04-08T03:29:01.673
> 
> 标签：php, mysql

我已经在我的 mysql 数据库中将一个字段设置为“时间戳”，但它仍然在查询中返回时间为 yyyy:mm:dd:time。我将其设置为时间戳，因为我想要自 1970 年以来的毫秒数。我该如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T03:31:03.507

您使用什么语言？在 PHP 中，您可以使用函数将 MySQL 时间戳转换为从纪元开始的秒数`strtotime`。如果绝对绝望，您也可以使用字符串解析来获取时间戳的每个部分并自己计算从纪元开始的秒数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T07:39:45.123

只需将 Unix 时间戳存储为 INT。然后当你从数据库调用它时，你可以在服务器端处理它以获得你想要的。

# haskell - 将 show 映射到自定义数据类型的列表

> ID：15870794
> 
> 赞同：0
> 
> 时间：2013-04-08T03:29:23.073
> 
> 标签：haskell

作为大学里一个用 Haskell 为简单的自定义语言编写解释器的大型项目的一部分，我正在尝试打印一些东西来帮助我编写这个东西。

有一个自定义数据类型

```
data Prog = Prog [Func]
    deriving (Show, Read) 
```

当我尝试在这个函数的最后一行打印这个编的一个实例时

```
interpret :: Prog -> Vars -> String -> MaybeDebug -> IO ()
interpret prog vars entry _ = do
    putStrLn "The interpreter isn't written yet.  Better get onto that!"
    putStrLn "\n\n"
    putStrLn (show prog)
    putStrLn "\n\n"
    putStrLn (show vars)
    putStrLn "\n\n"
    putStrLn (show entry)
    putStrLn "\n\n"
    putStrLn (map show [func | func <- prog, (func_name func) == entry]) 
```

我收到一条错误消息“无法将预期类型 'Char' 与实际类型 'String' 匹配。

我已经尝试了一段时间来找出问题所在。当这个列表理解返回一个函数列表时，为什么会提到字符？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T03:34:40.667

```
map show [func | func <- prog, (func_name func) == entry] 
```

生成一个`String`s 列表，但`putStrLn`将单个`String`, 或`[Char]`, 作为参数。

所以列表元素的预期类型是`Char`，但实际类型是`String`。

根据您想要的输出，最后一行应该类似于

```
putStrLn (unlines $ map show [func | func <- prog, (func_name func) == entry]) 
```

或者

```
mapM_ putStrLn (map show [func | func <- prog, (func_name func) == entry]) 
```

（那会更好

```
mapM_ print [func | func <- prog, (func_name func) == entry] 
```

然而）。

然后，在列表推导中，当你写`func <- prog`,`prog`必须是一个列表，但参数`interpret`是 a `Prog`，一个包含在构造函数中的列表`Prog`。例如，您需要解开列表以在列表理解中使用它

```
interpret prog@(Prog functions) vars entry _ = do 
```

使用 as-pattern，然后

```
func <- functions 
```

在列表理解中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T03:44:02.640

正如丹尼尔所说，问题在于 putStrLn 需要一个字符串，而不是字符串列表。

我建议插入以打印逗号分隔的列表。

```
putStrLn (intercalate ", " (map show [func | func <- prog, (func_name func) == entry])) 
```

您需要导入 Data.List 以获取 intercalate 功能。

# java - 如何检查检查的 JCheckboxes 的数量？

> ID：15870795
> 
> 赞同：0
> 
> 时间：2013-04-08T03:29:45.663
> 
> 标签：java, swing, checkbox, jcheckbox

我想知道是否有办法检查 Java 中选中的复选框数量。我发现了大量关于如何在 javascript 中而不是 Java 中进行操作的说明。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:52:54.303

我能想到的几个选项——

1.  每次选中复选框时，在其侦听器中增加一个（全局）计数器。取消选中复选框时减少计数器。因此，在任何给定时间点，您都知道选中的复选框数量

2.  遍历所有复选框并检查其中有多少被选中。如果您创建将在代码中使用的复选框集合，那就太好了

3.  如果复选框位于不同的屏幕或不同的类中，那么您需要在所有位置进行主计数器并在您想知道应用程序中选中的复选框数量时对其进行汇总

# jquery - Chrome 扩展程序中的 jGrowl 问题

> ID：15870797
> 
> 赞同：0
> 
> 时间：2013-04-08T03:29:59.627
> 
> 标签：jquery, google-chrome, jgrowl

我已经搜索了一段时间，似乎找不到答案。

我正在开发一个 Chrome 扩展程序，它会在特定页面打开时提醒用户。我使用的是默认的 javascript 警报，但可以说，它不是最吸引人的 UI 选项。我还尝试了实验性的 chrome 信息栏。那些工作得很好，但是很遗憾，您不能使用实验性 api 发布扩展。

然后我找到了jGrowl。这真是棒极了。它完全符合我的要求。我可以设法让 jGrowl 在网页上工作，但不是扩展。我想这是 jQuery 没有加载到背景页面或 jGrowl 页面上的问题。我不知道，这个 Chromium 文件问题很时髦。无论如何，这是我的代码。

**清单.json**

```
{
  "name" : "jGrowl Test",
  "version" : "1.0",
  "description" : "Makes jGrowl work.",
  "background" : {
    "page": "background.html"
  },
  "permissions": [
"tabs",
"http://*/*",
"https://*/*",
    "<all_urls>",
  ],
  "content_scripts" : [
    {
      "matches" : [
        "http://*/*",
        "https://*/*"
      ],
      "js" : ["jquery.js"],
      "run_at" : "document_idle",
      "all_frames" : false
    }
  ]
  "manifest_version": 2    
} 
```

**背景.html**

jGrowl 样式是从 jGrowl 下载中复制的样式。除了将其粘贴到标签中之外，我没有对其进行编辑，`<stlye>`因为 Chrome 扩展程序无法读取`<link...>`标签。

这`jquery.js`只是本地文件中的 jQuery 东西。（第 1.9.1 节）

`jquery.jgrowl.js`是 jGrowl 代码。它没有被编辑。

```
<html>
  <head>
        <style>
           ...jGrowl styling...
        </style>
        <script src='jquery.js'></script>
        <script src="jquery.jgrowl.js"></script>
        <script src="background.js"></script>
  </head>
</html> 
```

**背景.js**

```
$(document).ready(function() 
{
   $.jGrowl("Hello world!");
}); 
```

我知道 jQuery 有效。我可以在部件中使用基本的 javascript 警报`document.ready`，它可以工作。我什至可以将警报放入`jquery.jgrowl.js`文件中。仍然有效。

当我将扩展文件上传到服务器或在我的计算机上运行它时，jGrowl 可以工作。（我跑`background.html`）

我的问题是：

我究竟做错了什么？当扩展程序调用它时，如何让 jGrowl 显示出来？在任何页面上？

PS。我是否应该同时包含`jquery.js`在该`content_scripts`部分和该部分中，`background.html`或者它是否矫枉过正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:42:34.300

你的清单上有一些语法错误，另外你似乎没有加载 jGrowl 或你的 background.js。您还需要包含样式表以使通知可见。纠正这些事情将使 jGrowl 正常工作。

请查看我准备的这个 github 存储库，它使用 jGrowl 的工作实例作为 Chrome 扩展： [https ://github.com/stanlemon/jgrowl-chrome-ext](https://github.com/stanlemon/jgrowl-chrome-ext)

您应该能够克隆它，然后使用克隆文件夹上的“加载解压扩展”选项开始。

如果您有任何问题，请随时直接给我发电子邮件，您可以在 GitHub 上找到我的联系信息。

# templates - 用于用户管理的 Spring Web 应用程序模板

> ID：15870802
> 
> 赞同：0
> 
> 时间：2013-04-08T03:30:55.697
> 
> 标签：templates, spring-mvc, spring-roo

Spring Roo 是一个非常有用的工具，我喜欢它——你可以在几分钟内设置 Spring 项目的基本结构。

我想知道您是否可以向我推荐一些基于 Spring 的项目，这些项目可以部分地用作新项目的模板，例如用于用户管理。

**我们想找到用于用户管理的 API，其中用户注册电子邮件和用户名，用户在哪里获得激活电子邮件，用户可以重置密码，验证码，会话超时等......**

当我在 github 上搜索“Spring bootstrap”或“Spring 模板”时，我得到的结果很少。

我觉得每次我们开始新项目时，我们都必须实施不是“应用程序核心”的东西，而是更多关于其他必须做的事情，但我相信我们可以从其他一些项目中重用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:52:27.000

现在，您可以看看 Spring Roo 的典型安全插件。

[https://code.google.com/p/spring-roo-addon-typical-security/](https://code.google.com/p/spring-roo-addon-typical-security/)

我还计划添加 RooStrap 的未来版本以包含安全功能。

[http://bhagyas.github.com/roostrap/](http://bhagyas.github.com/roostrap/)

干杯。

# java - 如何创建容量受限的队列实现？

> ID：15870804
> 
> 赞同：5
> 
> 时间：2013-04-08T03:31:05.050
> 
> 标签：java, concurrency

在Java API文档中，我试图从实现的角度来理解下面的解释。

[http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html](http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html)

> 除了基本的 Collection 操作之外，队列还提供了额外的插入、提取和检查操作。这些方法中的每一种都以两种形式存在：一种在操作失败时抛出异常，另一种返回一个特殊值（null 或 false，取决于操作）。后一种形式的插入操作是专门为与容量受限的队列实现一起使用而设计的；在大多数实现中，插入操作不会失败。

所以，我想写一个程序来验证，在什么情况下它会抛出异常。如何创建容量受限的队列实现并进行验证？

有人可以举个例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-25T06:11:40.497

您应该使用[`BlockingQueue`](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/BlockingQueue.html)例如[`ArrayBlockingQueue`](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ArrayBlockingQueue.html)，即：

> 由数组支持的有界[阻塞队列。](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/BlockingQueue.html)此队列对元素进行 FIFO（先进先出）排序。队列的*头部*是在队列中时间最长的元素。队列的*尾部*是在队列中时间最短的元素。新元素被插入到队列的尾部，队列检索操作获取队列头部的元素。
> 
> 这是一个经典的“有界缓冲区”，其中一个固定大小的数组保存由生产者插入并由消费者提取的元素。一旦创建，容量将无法更改。尝试将元素放入完整队列将导致操作阻塞；尝试从空队列中获取元素同样会阻塞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-25T11:16:55.740

ArrayBlockingQueue 不是 JDK 中唯一一个保持其内部容量的队列。接口 java.util.concurrent。**BlockingQueue**（它是 java.util.Queue 的子接口**）**具有方法**remainingCapacity** ()。所有 BlockingQueue 实现都必须实现 remainingCapacity()。

 **其中一些实现不想使用容量限制。他们只是带着整数返回。**MAX_VALUE**。他们是：

> java.util.concurrent.ScheduledThreadPoolExecutor.DelayedWorkQueue.remainingCapacity() java.util.concurrent.DelayQueue.remainingCapacity()
> java.util.concurrent.PriorityBlockingQueue.remainingCapacity()
> java.util.concurrent.LinkedTransferQueue.remainingCapacity()

有一个特殊的，因为它只有 0 容量：

> java.util.concurrent.SynchronousQueue.remainingCapacity()

并且容量限制实现正在使用像**容量计数器**这样的实现逻辑：

> java.util.concurrent.ArrayBlockingQueue.remainingCapacity()
> java.util.concurrent.LinkedBlockingQueue.remainingCapacity()
> java.util.concurrent.LinkedBlockingDeque.remainingCapacity()

容量限制队列实现正在阻止那些希望将内部**计数增加到内部****容量**之上的方法。**

# foursquare - 通过 Twitter Handle 检索 Fourquare 上的场地信息

> ID：15870808
> 
> 赞同：0
> 
> 时间：2013-04-08T03:31:21.457
> 
> 标签：foursquare

我知道如果您通过其 twitter 句柄搜索场地，Foursquare 的 /users/search 可以工作。有没有办法通过无用户访问来实现这一点？

谢谢你的帮助。

代尼兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:58:57.563

不，用户/搜索端点需要身份验证：[https ://developer.foursquare.com/docs/users/search](https://developer.foursquare.com/docs/users/search)

# javascript - 将 iFrame 的 OnSubmit 函数用于父窗口的按钮的 OnClick 事件

> ID：15870809
> 
> 赞同：0
> 
> 时间：2013-04-08T03:31:32.620
> 
> 标签：javascript, forms, iframe, submit

基本上，我想使用这个 HTML 表单（在父页面上的 iframe 中加载）使用父页面的按钮提交，单击该按钮将使用 iFrame 的内置 OnSubmit 函数提交。这里的问题是我可以将javascript代码与 document.getElementById('Cable_Extraction_Worksheet').contentWindow.uploaddata(); 这将触发 JS 中所需的函数，但我需要使用表单的 onsubmit 和 action 属性，因为表单需要正确重定向并仅在提交时发送会话变量，以加载到正在调用的 NEXT 表单上表单的动作。帮助？自从我被困在使用 iFrame 之后，有什么更好的方法来做到这一点吗？尝试使用 php include，但 HTML 和 CSS 在父窗口中被严重误解。

出于示例目的简化了代码。

IFRAME HTML

```
<form name="prepform" method="post" onsubmit="uploaddata();" action="http://gp21.idmyasset.com/mobile/prep_b/index.php">
HTML CODE HERE
</form> 
```

父 HTML

```
<div data-role="content">
            <iframe src="prep_new/index.html"
            frameborder="" name="prep_new" id="prep_new" class="contentiframe"></iframe>
</div>
<li>
            <a onclick="document.getElementById('prep_new').contentWindow.document.forms['prepform'].submit();" data-transition="flip" data-theme="" data-icon="check">
                  Continue
            </a>
</li> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-15T16:59:40.813

我找到了另一种方法来实现这个......

# .net - vb.net 通过 New 引用程序创建的表单

> ID：15870811
> 
> 赞同：4
> 
> 时间：2013-04-08T03:31:44.917
> 
> 标签：.net, vb.net, winforms

我在 vb.net 中有以下代码写在一个按钮中。

```
dim x as new frm_raw_infosheet 
```

每当我单击按钮时，程序都会创建一个我想要的表单的新实例。

我的问题是，我将如何引用这些新创建的表格中的每一个？例如，我单击了 3 次按钮，如何以编程方式隐藏使用按钮创建的第二个表单？

我试过

```
x.name = "Form" & incrementingvariable 
```

但是，我不完全确定我将如何引用它。

为了让我的问题更清楚，假设增量变量包含数字 2

```
incrementingvariable = 2 
```

x 现在包含名称“Form2”

但是，这会返回错误

```
Form2.enabled = false 
```

我不能参考 Form2，因为 .Net 说“Form2”不存在！

**编辑**

我知道我问这个问题已经有一段时间了，但这里有一个更新

列表框中是我使用存储的每个表单的文字名称`Listbox1.items.add(x.Name)`。

那么如何调用集合中的实例呢？假设我想让列表中的表单可见？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T06:10:12.840

这取决于您希望程序如何工作。

如果您只打算在任何时候打开表单的一个实例，您可以将返回的引用保存`new`在一个持久变量中，例如一个实例变量。然后，您可以参考旧表单并在以后随时关闭它。

如果您需要跟踪多个表单，则可以将返回的引用保存`new`在集合中，该集合也可以是实例变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-29T09:05:09.690

我指的是已编辑的问题：您可以自己添加 Form 对象，而不是将表单的名称添加到 ListBox：

```
Listbox1.Items.Add(x) 
```

如果`DisplayMember`将 ListBox 的属性设置为 Name，则表单的名称将显示在列表框中（与以前一样）。
现在您可以通过 ListBox 的 Items 集合直接访问表单对象并对其调用方法：

```
DirectCast(ListBox1.Items(2), Form).Enabled = False 
```

此示例访问 ListBox 中的第三种形式（当然，您需要确保不访问不存在的索引；Count 属性在这方面很有帮助）。
由于项目存储为对象，因此您必须先将它们转换为 Form 对象，然后才能访问 Form 类中定义的成员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-21T09:25:18.493

试试这个...

```
Dim frmMyForm As frm_raw_infosheet
Dim i as Integer = 0

For Each frm As Form in Application.OpenForms
    If frm.Name = "frm_raw_infosheet" Then
        i = i + 1
        If i = 2 Then
            frmMyForm = frm
            Exit For
        End If
    End If
Next

If i = 2 Then
    frmMyForm.Visible = False
End If 
```

# mysql - 查询表以从字段中获取其他表的名称以执行最终查询

> ID：15870820
> 
> 赞同：0
> 
> 时间：2013-04-08T03:32:54.777
> 
> 标签：mysql, sql

有没有办法做到这一点？一个查询，可以从另一个表的一个字段中获取一个表名，并将该表的所有列压缩为一行 key:val; 一对。（从关联表 ft_data_id 中只会确定一个）

小提琴：[http ://sqlfiddle.com/#!2/b0c27](http://sqlfiddle.com/#!2/b0c27)

```
ID  FT_ID   FT_DATA_ID  NAME        TABLE                   DATA
1   1       1           one         features_data_one       ro_one: A; ro_two: B
2   2       1           two         features_data_two       rt_two: C; rt_two: D

/****** list of features with the name and the table the data lies in */
CREATE TABLE features (
        id INT AUTO_INCREMENT PRIMARY KEY,
        name VARCHAR(20) NOT NULL,
        `table` VARCHAR(255) NOT NULL
);
INSERT INTO features(name, `table`) VALUES ('one', 'features_data_one');
INSERT INTO features(name, `table`) VALUES ('two', 'features_data_two');

/****** feature one */
CREATE TABLE features_data_one (
        id INT AUTO_INCREMENT PRIMARY KEY,
        ro_one VARCHAR(20) NOT NULL,
        ro_two VARCHAR(20) NOT NULL
);
INSERT INTO features_data_one (ro_one, ro_two) VALUES ('A', 'B');

/****** feature two */
CREATE TABLE features_data_two (
        id INT AUTO_INCREMENT PRIMARY KEY,
        rt_one VARCHAR(20) NOT NULL,
        rt_two VARCHAR(20) NOT NULL
);
INSERT INTO features_data_two (rt_one, rt_two) VALUES ('C', 'D');

/****** association table which links a feature with a feature_id. The feature_id is the id in a specific table. This table is specificed in the feature table. */
CREATE TABLE assoc (
        id INT AUTO_INCREMENT PRIMARY KEY,
        ft_id INT NOT NULL,
        ft_data_id INT NOT NULL
);
INSERT INTO assoc (ft_id, ft_data_id) VALUES (1, 1);
INSERT INTO assoc (ft_id, ft_data_id) VALUES (2, 1);

SELECT * 
FROM assoc a
INNER JOIN features as ft ON a.ft_id = ft.id; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:56:56.163

恕我直言，您正试图对 SQL 做出一些奇怪且非常不自然的事情。

为什么不尝试创建唯一的单表？

```
CREATE TABLE features_all (
        id INT AUTO_INCREMENT PRIMARY KEY,
        feature_name varchar(20) not null,
        ro_one VARCHAR(20) NOT NULL,
        ro_two VARCHAR(20) NOT NULL,
        index(feature_name)
);
INSERT INTO features_all (feature_name, ro_one, ro_two) values
('one', 'A', '1'),
('one', 'C', '31'),
('one', 'Z', '71'),
('two', 'A', '1'),
('two', 'S', '12'),
('two', 'D', '14'); 
```

这种风格有助于填充特征（添加第三个等）。只需插入新行！无需创建表！

我不知道你的情况，但有时更换是有用的

```
 index(feature_name) 
```

和

```
 unique(feature_name, ro_one) 
```

以确保您将获得所选功能中任何键的唯一值

# matlab - 从另一个矩阵中提取矩阵值

> ID：15870822
> 
> 赞同：0
> 
> 时间：2013-04-08T03:33:00.493
> 
> 标签：matlab

我有这样的问题；

`points`(size = 65,2) 是一个具有图像像素坐标的变量。在第一列中，有 x 坐标，在第二个 y 坐标中，我想从仅一个通道的像素坐标中获取矩阵的幅度值（大小 = 256,256,6），例如。3（三）。

我无法成功。

```
intensities = images(points(:,2), points(:,1), 3); 
```

制作一个 65x65 的矩阵。

谢谢

希门尼斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:48:56.343

You can convert your `x,y` indices to linear indices to get values you want from your image:

```
% some sample data    
list = round(256*rand(65,2));
im = rand(256,256);
% calculate linear indices
ind = sub2ind([256,256],list(:,1),list(:,2));
intensities = im(ind); 
```

This results in an `intensities` matrix that is 65x1 where each element corresponds to the `x,y` pair from your list.

# jquery - 为什么jCrop 0.9.12版本会在选择区域的左上角产生一个小黑框？

> ID：15870825
> 
> 赞同：2
> 
> 时间：2013-04-08T03:33:08.800
> 
> 标签：jquery, jcrop

我在 jcrop 中使用了以下脚本，在升级到 0.9.12 版本之前没有任何问题。现在，选择区域的左上角有一个小黑框。当我进行选择时，我无法抓住角落或边来调整我的选择。我需要做什么才能使其与新版本一起使用？

HTML：

```
<img id="cropbox" src="image/path" alt="image">
<form class="margin_top_10" action="my_file.php" method="post" onsubmit="return checkCoords();">
    <input type="hidden" id="x" name="x">
    <input type="hidden" id="y" name="y">
    <input type="hidden" id="w" name="w">
    <input type="hidden" id="h" name="h">
    <input type="hidden" id="pic_to_crop" name="pic_to_crop" value="some value">
    <input type="submit" name="submit" id="submit" value="Crop Image">
</form> 
```

查询：

```
<script type="text/javascript">

$(function(){
    $('#cropbox').Jcrop({
        aspectRatio: 1.5,
        onSelect: updateCoords, 
        setSelect:   [ 100, 100, 50, 50 ]
    });
});
function updateCoords(c)
{
    $('#x').val(c.x);
    $('#y').val(c.y);
    $('#w').val(c.w);
    $('#h').val(c.h);
};
function checkCoords()
{
    if (parseInt($('#w').val())) return true;
    alert('Please select a crop region then press submit.');
    return false;
};
</script> 
```

![在此处输入图像描述](https://i.stack.imgur.com/JkkXS.png)

我可以单击所选区域内的任意位置并在图像周围拖动选择，但是如您所见，我无法拉伸选择区域（除非我单击并拖动黑框）。此外，当我单击并“向上”拖动小黑框时，选择区域突然翻转（即，它围绕 x 轴旋转 180 度）。但是，如果我单击并“向下”拖动黑框，则不会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-04T17:59:47.037

我遇到了同样的问题，我花了一段时间才弄清楚发生了什么。在 0.9.12 版本中，jcrop 切换到使用 .css 文件来定义用于调整大小的句柄的位置，而不是在 .js 文件中设置它们。一旦我意识到这一点，快速检查我的 jquery.Jcrop.css 文件就会发现它不是最新的。特别是，缺少一个包含如下设置的部分：

```
.jcrop-handle.ord-w {
  left: 0;
  margin-left: -4px;
  margin-top: -4px;
  top: 50%;
} 
```

每个句柄 (n,e,s,w,ne,nw,se,sw) 都有一个这样的条目，如果没有这些，所有句柄的位置将默认为 0,0。如果你还没有，我建议你去这里：

[https://github.com/tapmodo/Jcrop/tree/master/css](https://github.com/tapmodo/Jcrop/tree/master/css)

并获取最新的 .css 文件来替换您现有的文件。当然，在测试之前清除缓存（我忘了这样做又花了十分钟没有结果）。

真的希望这可以帮助其他看到这个问题的人。

# django - 正确使用 Django assignment_tag 内置标签

> ID：15870828
> 
> 赞同：3
> 
> 时间：2013-04-08T03:33:31.317
> 
> 标签：django, django-models, django-templates, django-1.4

我正在用 Django 做一个项目。

今天早些时候，我发现了新的 (Django >= 1.4) `assignment_tag`。我立即决定这正是我在任何地方都需要的，并将一些逻辑放入一个对数据库执行非常简单的查询并返回结果查询集的逻辑中。我包装的函数接受一个参数，当我使用模板标签时，该参数允许调用上下文指定要抓取多少结果，直接在模板中。

这很方便——当我决定这个列表应该有 5 个项目而不是 3 个项目时，我不必更新我的视图——但这似乎是我们不应该涉足的灰色区域之一（即将应用程序逻辑推入模板）在编写良好的、可维护的 Django 代码时。

现在，与编写代码相隔几个小时，我想知道是否应该完全废弃 assignment_tag。

代码：

**模型.py**：

```
class SomeObject(models.Model):
    is_active = models.BooleanField(default=False)
    (...) 
```

**模板标签/myapp_tags.py**：

```
from django import template
from myapp.models import SomeObject

register = template.Library()

@register.assignment_tag
def get_someobjects_list(max_results=0):
    queryset = SomeObject.objects.filter(is_active=True)
    if max_results == 0:
        return queryset
    elif max_results > 0:
        return queryset[:min(max_results, queryset.count())]
    else:
        return None 
```

**模板/myapp/chunks/someobject_list.html**：

```
{% load myapp_tags %}

{% get_someobjects_list as someobjects_list %} 
# or {% get_some_objects_list 5 as someobjects_list %} ... flexible!
{% if someobjects_list %}
<ul>
  {% for someobject in someobjects_list %}
  <li>
    <a href="{{ someobject.get_absolute_url }}">
      {{ someobject.name }}
    </a>
  </li>
  {% endfor %}
</ul>
{% else %}
<span>No someobjects exist</span>
{% endif %} 
```

发现这些存在我真的很兴奋——在这种特殊情况下对我来说很方便。现在我对找到新功能的兴奋已经过去，很明显我在滥用它。Django 文档中给出的示例似乎是一个更好的应用程序 - 获取当前日期时间的字符串表示，不需要数据库查询。我担心如果我开始经常使用这种模式，我会让自己心痛。一路下滑：我最终甚至都懒得将上下文传递给我的模板，我所有的数据库查询都将隐藏在模板标签中，没有人会想到去寻找它们。

如果我在发现 assignment_tags 并创建自定义模型管理器时放弃了整个“好主意”，那么代码似乎会更简洁。

还有其他我想念的干净的方法来完成这个吗？管理器方法是 Django 开发人员达成共识的最佳方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-22T02:34:10.410

如果您需要将一些信息放入网站几页的模板上下文中，但不想（或不能）将信息放入网站的每个视图中，那么分配模板标签特别有用，并且不要'不想或不能依赖上下文处理器。

他们基本上保证您的信息将在模板中可用。

# java - 如何使用 Sikuli Java Standalone jar 键入特殊密钥？

> ID：15870829
> 
> 赞同：2
> 
> 时间：2013-04-08T03:33:33.120
> 
> 标签：java, sikuli

在[Sikuli X](http://www.sikuli.org)我可以使用类似的东西

```
type("x", KEY_CTRL) 
```

我怎样才能在[Sikuli API](http://code.google.com/p/sikuli-api/)中做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T13:04:16.927

我在我的项目中这样使用：

```
Screen screen = new Screen();

screen.click(<your texbox>); // click into textbox to have a cursor there

screen.type("a", KeyModifier.CTRL); // this sends Ctrl+"a" to select all text <- this is what you asked for !
screen.type(Key.BACKSPACE); // this sends Backspace key pressed, i.e. here deletes all selected text 
```

请注意，我同时使用了 KeyModifier 和 Key。这样它就起作用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-29T10:21:32.340

试试这个，

```
Screen screen = new Screen();
screen.type("x",Key.CTRL)
screen.type("\n"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T04:33:45.580

使用[KeyEvent](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyEvent.html)中的键码：

```
DesktopKeyboard keyboard = new DesktopKeyboard();
keyboard.keyDown(KeyEvent.VK_CONTROL);
keyboard.type("x");
keyboard.keyUp(KeyEvent.VK_CONTROL); 
```

# java - 使用 ImageIO 非小程序读取

> ID：15870836
> 
> 赞同：0
> 
> 时间：2013-04-08T03:34:29.300
> 
> 标签：java, javax.imageio

好的，所以我的所有类都在几个包中：Game/src/package1/Class.class

我想进入一个文件：Game/res/Terrain.png

我该怎么做？

```
public Screen(Game game){
    this.game=game;
    try {
        URL url = new URL("/res/Terrain.png");
        textures = ImageIO.read(url);
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

然后我得到这个错误：

```
java.net.MalformedURLException: no protocol: /res/Terrain.png
    at java.net.URL.<init>(URL.java:583)
    at java.net.URL.<init>(URL.java:480)
    at java.net.URL.<init>(URL.java:429)
    at kore.survival.Screen.<init>(Screen.java:25)
    at kore.survival.Game.<init>(Game.java:27)
    at kore.survival.Game.main1(Game.java:99)
    at kore.survival.LoginFrame.jButton1ActionPerformed(LoginFrame.java:201)
    at kore.survival.LoginFrame.access$200(LoginFrame.java:16)
    at kore.survival.LoginFrame$3.actionPerformed(LoginFrame.java:82)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:703)
    at java.awt.EventQueue.access$000(EventQueue.java:102)
    at java.awt.EventQueue$3.run(EventQueue.java:662)
    at java.awt.EventQueue$3.run(EventQueue.java:660)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:676)
    at java.awt.EventQueue$4.run(EventQueue.java:674)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:673)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:38:05.760

假设资源嵌入了 Jar ...

```
textures = ImageIO.read(getClass().getResource("/res/Terrain.png")); 
```

# java - 如何从 Java JNI 获取原始类型的类

> ID：15870839
> 
> 赞同：1
> 
> 时间：2013-04-08T03:34:51.583
> 
> 标签：java, java-native-interface

这个问题与这个问题及其答案有关：

[int.class 是否等于 Java 中的 Integer.class 或 Integer.TYPE？](https://stackoverflow.com/questions/7082997/does-int-class-equal-integer-class-or-integer-type-in-java)

由于 int.class 不等于 Integer.class 我如何通过 JNI 在本机级别获得 int.class Class 或其他原始类型？我需要指向 int.class 而不是 Integer.class 的 jclass 对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T04:35:26.420

本次测试

```
 System.out.println(Integer.TYPE == int.class); 
```

打印`true`。也就是说，Integer.TYPE 是你想要的，你可以从本机代码中读取 Integer.TYPE 字段。或`Class.getPrimitiveClass("int")`从本机代码调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:28:51.767

在 JNI 中，原始值作为实际机器值传递。一个 int 作为一个 jint 传递，该 jint 被 typedef'd 为一个 32 位有符号整数。

[http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/types.html#wp9502](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/types.html#wp9502)

# canvas - Kineticjs 画布 - 平滑拖动对象

> ID：15870841
> 
> 赞同：0
> 
> 时间：2013-04-08T03:35:40.493
> 
> 标签：canvas, html5-canvas, kineticjs

我试图让我的图像顺利拖动。我正在使用这个库： [http ://candrews.net/sandbox/spryMap/](http://candrews.net/sandbox/spryMap/)

这是我的尝试：http: [//jsfiddle.net/aUWY2/](http://jsfiddle.net/aUWY2/)

我像这样使用'dragend'：

```
stage.on('dragend', function(e) {
    stage.transitionTo({
        x: stage.getX() + stage.getAbsolutePosition().x,
        y: stage.getY() + stage.getAbsolutePosition().y,
        duration: 1,
        easing: 'ease-in-out'
     });
}); 
```

它运作不佳。当我向左拖动后再次向右拖动时，它不起作用。我该如何改进它？谢谢。

# javascript - 用 jquery 添加一个 div 似乎不起作用

> ID：15870842
> 
> 赞同：0
> 
> 时间：2013-04-08T03:35:46.570
> 
> 标签：javascript, jquery, html, css

[http://jsfiddle.net/uWUDP/](http://jsfiddle.net/uWUDP/)

的HTML：

```
<body></body> 
```

js：

```
var width = $(window).width,
    height = $(window).height;

$("body").append("<div>zz</div>");

$("div").attr("width", width);
$("div").attr("height", height);
$("div").style("background", "black"); 
```

我希望有一个创建页面大小的黑匣子。相反，什么都没有。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T03:39:25.940

*   您没有在小提琴中选择 jQuery 库
*   jQuery 没有`style`方法。采用`.css`
*   `div`s 没有宽度/高度属性。使用`.width`和`.height`方法。
*   `width = $(window).width`将 jQuery`.width`方法分配给宽度。您需要使用 调用该函数`()`。

[http://jsfiddle.net/ExplosionPIlls/uWUDP/3/](http://jsfiddle.net/ExplosionPIlls/uWUDP/3/)

# websphere - 部署在一个 WAS 实例上的 EAR 是否共享相同的堆空间

> ID：15870848
> 
> 赞同：1
> 
> 时间：2013-04-08T03:36:19.067
> 
> 标签：websphere, heap-memory, shared-memory, java-memory-model

当 wesbpher 应用程序服务器正在运行时。它基本上是在运行一个 JVM。现在，如果我在 WAS 上部署两个 EAR 项目，这两个 EARS 是否共享同一个 JVM。是的，我猜是的。

但后来我的问题变成了这两个 EAR 是否也共享相同的堆空间？我的猜测是否定的，但这怎么可能？一个 JVM 只能提供一个堆，对吗？

为简化起见，我们假设只有一个 WAS....没有节点和集群。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:38:52.833

是的，在同一个 Application Server 中运行的两个 EAR 共享同一个堆空间。正如您所说，因为它们共享相同的 JVM。

# redirect - 我可以通过我们的 htaccess 更改其他网站的链接吗？

> ID：15870852
> 
> 赞同：0
> 
> 时间：2013-04-08T03:36:36.223
> 
> 标签：redirect

设想：

第三方网站有指向我们主页的链接。我们想将其重定向到我们网站的另一部分，例如[http://website.com/about-us](http://website.com/about-us)而不是主页。这可以在我们自己的服务器上完成吗？假设我们与该第三方网站没有联系。如果是，您能否提供一个示例重定向规则？

另外，您能否验证我是否可以按照此示例[http://dmr.ath.cx/notes/rewrite.html](http://dmr.ath.cx/notes/rewrite.html)进行操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:06:01.890

实际上，您链接的信息对您的问题非常有用，您甚至可以通过该链接解决您想要的问题。但是，您仍然可以尝试这个*.htaccess*代码：

```
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{HTTP_REFERER} referrer\.com$ [NC]
RewriteRule ^/?$ /about-us [R] 
```

如果他们链接的主页基本名称是*home.php*，那么只需使用该基本名称更改`/?`重写规则中的代码，就像这样：

```
RewriteRule ^home.php$ /about-us [R] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:08:45.177

谢谢！

为了他人的利益，这对我们也有效。

```
RewriteCond %{HTTP_REFERER} ^http://website\.com.*
RewriteRule .* http://%{HTTP_HOST}/index.html 
```

# android - NDEV / Dragon Mobile SDK 需要上网吗？

> ID：15870854
> 
> 赞同：5
> 
> 时间：2013-04-08T03:37:09.573
> 
> 标签：android, speech-recognition

我正在寻找一种将有限词汇语音识别集成到我的 Android 应用程序中的方法（因为谷歌语音搜索依赖于用户并不总是可以访问的互联网访问）。

我发现了一个[Nuance 页面](http://dragonmobile.nuancemobiledeveloper.com/public/index.php?task=home)，诱使程序员下载 NDEV 或“Dragon Mobile SDK”，但如果它需要像谷歌语音搜索一样的互联网访问，我为什么还要对它感兴趣呢？

不幸的是，Nuance 的页面信息量不是很大，需要您注册（并签署龙协议......），然后您才有机会花时间下载和玩该套件，结果发现它不是您想要的...

你不知道NDEV的**语音识别部分**或者他的“Dragon Mobile SDK”需要上网吗？

您是否知道任何现成的不需要 Internet 访问的 Android SDK *（*即一些有限词汇的语音识别可以在 Android 设备上本地完成）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:54:14.137

是的，NDEV 确实需要访问 Internet。他们的 SDK 只是一个 API 包装器 + 带有麦克风按钮的 UI（以及正确捕获音频所需的代码）。

如果您需要本地语音识别，请查看[Sphinx](http://cmusphinx.sourceforge.net/)，这是一个很棒的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-27T14:29:01.770

在大多数手机（硬件足够强大）上，谷歌自己的语音识别可以设置为离线工作。只需转到设置-> 语言和输入-> 语音搜索-> 离线语音识别在那里您将能够下载您需要离线使用的任何语言的数据。

# python - 在python中移动数组的元素

> ID：15870856
> 
> 赞同：1
> 
> 时间：2013-04-08T03:37:21.140
> 
> 标签：python, arrays

我正在尝试循环移动数组的元素，以便所有元素都替换为前一个元素，最后一个元素旋转到第一个位置，如下所示： shift(1, [5, 6, 7])=>[7, 5、6]。

以下代码仅返回 [7,5]。有人可以告诉我是什么导致这种情况发生吗？我一步一步地浏览了代码，根本找不到解决方案。我还尝试了 3 种不同的口译员。

```
def shift(key, array):
    counter = range(len(array)-1)
    new = counter
    for i in counter:
        new[i] = array[i-key]
    return new

print shift(1, [5, 6, 7]) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-08T03:41:57.370

`range(5)`返回`[0, 1, 2, 3, 4]`。它不包括`5`.

只需删除`-1`from `range(len(array)-1)`，它应该可以工作。

您还可以使用列表切片：

```
def shift(key, array):
    return array[-key:] + array[:-key] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T03:46:42.733

Here is the python way:

```
def shift(key, array):
    return array[-key:]+array[:-key] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-08T03:44:37.927

您需要`-1`从您的范围中删除：

```
counter = range(len(array)) 
```

如果您想要更快的方法，您可以尝试使用双端队列吗？

```
from collections import deque

def shift(key, array):
    a = deque(array) # turn list into deque
    a.rotate(key)    # rotate deque by key
    return list(a)   # turn deque back into a list

print (shift(1, [5, 6, 7])) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T04:22:07.217

答案很好，但是如果键大于数组的长度，它就不起作用。如果您认为密钥会大于数组长度，请使用以下命令：

```
def shift(key, array):
    return array[key % len(array):] + array[:key % len(array)] 
```

正键将向左移动，负键将向右移动。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-16T13:40:42.533

**numpy**包包含用于执行此任务的**roll函数：**

```
import numpy as np
b=[5,6,7]
c=np.roll(b,1).tolist()

>>> c
[7, 5, 6] 
```

使用它并返回列表的函数是：

```
def shift(array,key):
    return np.roll(array,key).tolist() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T04:43:12.113

```
#!/usr/bin/env python

def ashift(key,array):
        newqueue = array[-key:]
        newqueue.extend( array[:-key] )
        return newqueue

print ashift( 1, [5,6,7] )
print ashift( 2, [5,6,7] ) 
```

结果是：

```
$ ./shift 
[7, 5, 6]
[6, 7, 5] 
```

唯一的潜在损失是如果数组足够大，您可能会遇到内存问题，因为此操作正在执行复制。使用绝对值大于数组长度的“键”将导致回绕，结果可能与预期不符，但不会出错。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-16T14:51:29.243

老式的 POP & APPEND

```
arr = [5, 6, 7]

for _ in range(0, 2):
    shift = arr.pop(0)
    arr.append(shift)

print(arr)

=>[7, 5, 6] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-02T19:25:26.393

你可以使用[numpy 卷](https://numpy.org/doc/stable/reference/generated/numpy.roll.html)

```
>>> x = np.arange(10)
>>> np.roll(x, 2)
array([8, 9, 0, 1, 2, 3, 4, 5, 6, 7])
>>> np.roll(x, -2)
array([2, 3, 4, 5, 6, 7, 8, 9, 0, 1]) 
```

# algorithm - 在布尔矩阵中查找 1 的区域填充

> ID：15870862
> 
> 赞同：0
> 
> 时间：2013-04-08T03:38:15.810
> 
> 标签：algorithm, matrix, polygon

![图片](https://i.stack.imgur.com/y6R4P.jpg)

我有一个布尔矩阵，我想找到填充为 1（真值）的区域。该区域表示为多边形（顺时针方向）。

有人可以给我一个想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:54:04.097

您可以使用**BFS 搜索方法**来解决问题，或者使用**Flood-Fill**算法来解决问题

或者，如果你喜欢使用 recurve ，你可以使用**DFS来解决这个问题**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:57:29.587

union-find 算法是查找连接子图（或本例中的区域）的绝佳方法。它也是一种线性复杂度算法，所以它基本上和 BFS 一样好 :)

[http://www.algorithmist.com/index.php/Union_Find](http://www.algorithmist.com/index.php/Union_Find)

# c# - 在 XNA 中点亮 2D 平铺地图

> ID：15870863
> 
> 赞同：0
> 
> 时间：2013-04-08T03:38:20.593
> 
> 标签：c#, colors, xna, 2d, lighting

对于那些非常了解计算机图形学中的 XNA 和色彩理论的人，我有一个简短的问题。我正在制作一个瓷砖游戏（有点像泰拉瑞亚），我想知道如何将每个瓷砖照明应用到场景中。对于这个游戏来说，彩色光照是必须的，而现在我通过 4 个 2D 字节数组、存储整体光照和 3 种不同的颜色量来解决这个问题。绘制瓷砖时，它会采用特定瓷砖的纹理，但我将如何根据 3 个颜色值和整体照明在同一个瓷砖上应用颜色？

现在，这是我的颜色生成函数：

```
public Color GetColorAt(int x, int y)
{
    byte r = _rMap[x, y]; //Red light
    byte g = _gMap[x, y]; //Green light
    byte b = _bMap[x, y]; //Blue light
    byte mul = _lightMap[x, y]; ///Overall light

    return new Color(r * mul, g * mul, b * mul, 1);
} 
```

作为色彩理论的新手，我根本不知道我是否以正确的方式处理这个问题。我的照明系统使用细胞算法，减少并扩散到所有相邻的瓷砖。如果它降低了每个图块的颜色值，我什至需要从整体光值开始吗？

此外，在混合瓷砖纹理和光线以获得结果时，我是否使用加法、乘法或其他一些计算？

TL;DR：1\. 考虑到每个瓷砖之间的光线减弱，上面的代码块是否有效？2\. 如何将光和纹理结合起来，以获得在光的颜色下看起来像它的纹理？

感谢您的帮助，我没有颜色组合的经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:32:33.253

您可能不需要整体/mul 值 - R、G 和 B 足以表示浅色和强度。

您使用的是“字节”，但在数学上使用 0.0 到 1.0 范围内的“浮点”值可能更容易。

在浮点表示中，`R=1, G=1, B=1`是白色、`R=0.5, G=0.5, B=0.5`中灰色、`R=0, G=0, B=0`黑色等。然后您可以直接将颜色相乘，而不必大惊小怪地转换为 0..255 字节范围。

当您绘制瓷砖时，您可以使用 SpriteBatch 的颜色参数 - 基本上将其设置为您的浅色，它应该在绘制瓷砖时自动进行颜色相乘。如果您想要比您的瓷砖更小的照明单元（如泰拉瑞亚），您可能需要编写一个自定义着色器，这涉及更多 - 但对于了解您是否准备进行一些学习很有用。

# r - R从apply访问向量的两个分量

> ID：15870873
> 
> 赞同：0
> 
> 时间：2013-04-08T03:39:29.297
> 
> 标签：r, apply

我有一个`xtabs`看起来像的对象

```
 Cust_ID
Date        01/33  01/94  01/38  02/114 ...
2011-01-01    3.1    1.7   -2.3     4.8
2011-01-02    1.7    4.5    0.0     3.2 
2011-01-03    0.1    2.2    0.1    -0.1 
```

然后我创建对象（我`sum`在原始对象中使用了不同的函数，所以不能使用 Rowsum）

```
SumR <- apply(cast1,1,sum) 
```

获取对象

```
2011-01-01  2011-01-02  2011-01-03
       7.3         9.4         2.3 
```

我的问题是：我如何“访问”日期字段？例如，如果我`plot(SumR)`得到一个图，`7.3 9.4 2.3`但我希望 x 轴对应于日期。我已经尝试过`SumR[1,]`，但出现“维度数不正确”的错误。

**编辑** 按照 Aditya 的建议，我可以通过 cast1 对象本身访问日期：

```
cast1.df <- as.data.frame(cast1)
cast1.df[,1] 
```

不过，这似乎很脏。我是 R 的初学者，所以我不确定这种方法是否好，或者是否存在更优雅的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T03:50:39.140

它们是名称，存储为字符串。

你需要做类似的事情

```
plot(x = as.Date(names(sumR), format = '%Y-%m-%d'), y = sumR) 
```

# java - 使用 for 循环创建一个方法来查找奇数丰富的 sigma 函数数

> ID：15870874
> 
> 赞同：0
> 
> 时间：2013-04-08T03:39:44.300
> 
> 标签：java, for-loop

我正在尝试创建一种方法，该方法将采用一个数字并使用 sigma 函数确定该数字是否为奇数、丰富的数字。丰富的数字是当放入 sigma 函数时产生的总和大于给定数字的任何数字。

比如 sigma(12) 很丰富，因为 sigma(12) = 1+2+3+4+6+12 = 28。但是，它并不奇怪，所以我的方法不会考虑它。我不知道为什么我的循环函数不起作用，因为当我尝试输入一个范围时，它会吐出一堆数字乱码。这是我到目前为止所拥有的：

```
import java.util.*;

public class OddAbundant {
static Scanner input = new Scanner(System.in);

public static void findOddAbundant(){
    System.out.println("Please enter the start of the range you want to test for odd abundant integers");
    int startRange = input.nextInt();
    System.out.println("Please enter the end of the range you want to test for odd abundant integers");
    int endRange = input.nextInt();
    for(int b = startRange; b <= endRange; b++) {
        if (Sigma.Sigma(b)<(b*2))   
            continue;
        else{
            if (b % 2 == 1)
                System.out.println(b);
        }

    }

}
public static void main(String[] args) {
    findOddAbundant();

    }

} 
```

我经历了循环，但我不知道出了什么问题。我已经测试了 sigma 方法，如果它对你们有帮助，我可以提供它，并且在给定整数时它确实会吐出正确的值。想法？

这是我的西格玛函数：

```
import java.util.*;

public class Sigma {

static Scanner input = new Scanner(System.in);

public static int Sigma(int s){
    int a = 0;
    for(int i=1;i<=s;i++){
        if(s%i==0)
            a = a + i;

    }
    System.out.print(a);
    return a;

}
public static void main(String[] args) {
    System.out.println("Please enter the number you want to perform the sigma function on");
    int s = input.nextInt();
    Sigma.Sigma(s);
    System.out.print(" is the sum of all the divisors of your input" ); 
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:13:10.563

这是个愚蠢的问题；从 Sigma 函数中删除 print 语句。

```
public static int Sigma(int s){
    int a = 0;
    for(int i=1;i<=s;i++){
        if(s%i==0)
            a = a + i;

    }
    System.out.print(a); //why do you have it here?
    return a;

} 
```

# javascript - 使用 Node / gm 将 SVG 字符串转换为 PNG 输出

> ID：15870882
> 
> 赞同：5
> 
> 时间：2013-04-08T03:40:26.750
> 
> 标签：javascript, node.js, imagemagick

我想获取一个 SVG 字符串并将 PNG 输出到浏览器。我看了几个帖子：

我可以输出 png 但不能输出 svg。我可以将 svg 写入文件就好了 - 只是不能流式传输它。

这是我所拥有的：

```
var gm = require('gm');
var im = gm.subClass({ imageMagick: true });

var inputsvg = 'public/test.svg';
var inputpng = 'public/test.png';

// works
im(inputsvg).write(output, function(err){
  if (!err) console.log('image converted.');
});

// works
im(inputpng).write(output, function(err){
  if (!err) console.log('image converted.');
});

res.set('Content-Type', 'image/png'); 

// works
im(inputpng).stream(function (err, stdout, stderr) {
  stdout.pipe(res);
});

// does not work - no errors given.
im(inputsvg).stream(function (err, stdout, stderr) {
  stdout.pipe(res);
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T22:34:06.190

好，知道了。

```
var svg = '<?xml version="1.0" encoding="UTF-8" standalone="yes"?><svg width="840" height="430"  xmlns="http://www.w3.org/2000/svg" version="1.1"><rect width="300" height="100" style="fill:rgb(0,0,255);stroke-width:1;stroke:rgb(0,0,0)" /></svg>';

var buf = new Buffer(svg);
res.set('Content-Type', 'image/png');
gm(buf, 'svg.svg').stream('png', function (err, stdout, stderr) {
  stdout.pipe(res);
}); 
```

一些重要的点：

*   xml 行必须在那里
*   必须在 svg 标签中提供宽度和高度
*   stream() 函数需要格式参数（'png'）

希望对某人有所帮助。

# java - 为什么我在更改 java 中的类时丢失了存储的数据

> ID：15870884
> 
> 赞同：0
> 
> 时间：2013-04-08T03:40:35.473
> 
> 标签：java, pointers, linked-list

我编写了一个简单的邮件系统。该系统由四类组成：

*   项目清单
*   用户
*   用户（主类）
*   电子邮件组

我的问题是关于高三班的。在我的代码中，将以`Users`class 开头并弹出一个菜单，您可以在其中添加、删除到系统作为`LinkedList`. 菜单中还有一个使用选项，它将从系统中选择现有用户并弹出另一个位于 User 类中的菜单。在此类`LinkedList`中，特定用户拥有另一封电子邮件。在新菜单中，您可以选择列出电子邮件、阅读电子邮件和发送电子邮件。我的问题从这里开始。我可以发送消息，但无法列出消息。如果我`look()`在类中调用该方法，`User`则显示 0 条消息，但如果在主类中调用该方法，则显示消息。请对此提出一些建议。谢谢你。

我的代码：用户类

```
public class Users 
{
public static void main(String[] args)
{
    new Users();
}

private LinkedList<User> users = new LinkedList<User>();
private User user;
private Email email;

public Users()
{   menu();}

private void menu()
{   char c = readChoice();
    while (!isEnd(c))
    {   execute(c);
        c = readChoice();}}

private char readChoice()
{   System.out.print("Choice (a/d/g/u/x): ");
    return In.nextChar();}  

private void execute(char c)
{   switch(c)
    {   case 'a': add(); break;
        case 'd': delete(); break;
        case 'g': break;
        case 'u': use(); break;
        default : System.out.println("    Invalid choice");}}

private void use()
{   User user = new User(this);
    if (exists(user.getName()))
        user.use();
    else
        System.out.println("    No such user"); }

public void send()
{   User user = user(readRecipient());
    String header = readHeader();
    String message = readMessage();
    if (user != null)
    {    user.add(new Email(user, header, message));}
        //user.look();this method is just for tes if it is included
                    // in the method above it lists the messages.
    else
        System.out.println("No such adress");}
} 
```

我的用户类

```
public class User 
{
private String name;
private Users users;
private LinkedList<Email> emails = new LinkedList<Email>();

public User(Users users)
{   this.users = users;
    this.name = readName();}

public void use()
{   char c = readChoice();
    while (!isEnd(c))
    {   execute(c);
        c = readChoice();}}

private char readChoice()
{   System.out.print("  Choice (l/r/s/d/x): ");
    return In.nextChar();}

private void execute(char c)
{   switch(c)
    {   case 'l': look(); break;
        case 'r': read(); break;
        case 's': send(); break;
        default : System.out.println("    Invalid choice");}}

public void look()
{   String s = "    ";
    s += name + " has " + emailSize() + " messages";
    System.out.println(s);}

public void add(Email email)
{   emails.add(email);}

private void send()
{   users.send();}

} 
```

最后一节课邮箱：

```
package assignment;

public class Email {

private String header;
private String message;
private User user;

public Email(User user, String header, String message)
{   this.user = user;
    this.header = header;
    this.message = message;} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:00:49.837

您的`send`方法将电子邮件归于**收件人**并采取相应措施：

```
public void send()
{   User user = user(readRecipient());
    String header = readHeader();
    String message = readMessage();
    if (user != null)
    {    user.add(new Email(user, header, message));
        user.look();}
    else
        System.out.println("No such adress");}
} 
```

你打电话`user.look()`，用户是`User user = user(readRecipient());`

因此，如果您想比较“ *apples to apples* ”，您还需要在使用“ **l** ”选项时选择**收件人。**

# ios - 缩小 iPhone 相机胶卷图像会导致意外伪影

> ID：15870885
> 
> 赞同：0
> 
> 时间：2013-04-08T03:40:38.957
> 
> 标签：ios, objective-c, uiimage, cgcontext

我正在缩小相机胶卷图像，它们正在显示伪影。

示例图像：

![前](https://imgur.com/qi20X5i.jpg)

![后](https://imgur.com/1pH28Pt.jpg)

```
 CGSize s = CGSizeMake(320, 320);
     UIImage *scaledImage = [picture resizedImageWithContentMode:contentMode
                                                     bounds:s
                                       interpolationQuality:kCGInterpolationHigh]; 
```

图像是 720x960 .. 发生这种情况是因为比例无关紧要吗？

这是我的 UIImage 类别类：

```
 /**
 * Returns a copy of this image that is cropped to the given bounds.
 * The bounds will be adjusted using CGRectIntegral.
 * This method ignores the image's imageOrientation setting.
 */

    - (UIImage *)croppedImage:(CGRect)bounds {

      CGImageRef imageRef   = CGImageCreateWithImageInRect([self CGImage], bounds);
      UIImage *croppedImage = [UIImage imageWithCGImage:imageRef];

      CGImageRelease(imageRef);

      return croppedImage;
    }

/**
 * Returns a rescaled copy of the image, taking into account its orientation
 * The image will be scaled disproportionately if necessary to fit the bounds specified by the parameter
 */

    - (UIImage *)resizedImage:(CGSize)newSize interpolationQuality:(CGInterpolationQuality)quality {

      BOOL drawTransposed;

      CGAffineTransform transform = CGAffineTransformIdentity;

      switch (self.imageOrientation) {
        case UIImageOrientationLeft:
        case UIImageOrientationLeftMirrored:
        case UIImageOrientationRight:
        case UIImageOrientationRightMirrored:
        drawTransposed = YES;
        break;
        default:
        drawTransposed = NO;
      }

      transform = [self transformForOrientation:newSize];

      return [self resizedImage:newSize
                      transform:transform
                 drawTransposed:drawTransposed
           interpolationQuality:quality];
    }

/**
 * Resizes the image according to the given content mode, taking into account 
 * the image's orientation
 */

    - (UIImage *)resizedImageWithContentMode:(UIViewContentMode)contentMode
                                      bounds:(CGSize)bounds
                        interpolationQuality:(CGInterpolationQuality)quality {

      CGFloat horizontalRatio = bounds.width / self.size.width;
      CGFloat verticalRatio   = bounds.height / self.size.height;
      CGFloat ratio;

      switch (contentMode) {
        case UIViewContentModeScaleAspectFill:
          ratio = MAX(horizontalRatio, verticalRatio);
          break;

        case UIViewContentModeScaleAspectFit:
          ratio = MIN(horizontalRatio, verticalRatio);
          break;

        default:
          [NSException raise:NSInvalidArgumentException format:@"Unsupported content mode: %d", contentMode];
      }

        ratio = MIN(horizontalRatio, verticalRatio);

      CGSize newSize = CGSizeMake(self.size.width * ratio, self.size.height * ratio);

      return [self resizedImage:newSize interpolationQuality:quality];
    }

    #pragma mark - Private helper methods

    /**
     * Returns a copy of the image that has been transformed using the given affine transform and scaled to the new size
     * The new image's orientation will be UIImageOrientationUp, regardless of the current image's orientation
     * If the new size is not integral, it will be rounded up
     */

    - (UIImage *)resizedImage:(CGSize)newSize
                    transform:(CGAffineTransform)transform
               drawTransposed:(BOOL)transpose
         interpolationQuality:(CGInterpolationQuality)quality {

      CGRect newRect        = CGRectIntegral(CGRectMake(0, 0, newSize.width, newSize.height));
      CGRect transposedRect = CGRectMake(0, 0, newRect.size.height, newRect.size.width);
      CGImageRef imageRef   = self.CGImage;

      /**
       * Fix for a colorspace / transparency issue that affects some types of
       * images. See here: http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/comment-page-2/#comment-39951
       */

      CGContextRef bitmap =CGBitmapContextCreate( NULL,
                                                 newRect.size.width,
                                                 newRect.size.height,
                                                 8,
                                                 0,
                                                 CGImageGetColorSpace( imageRef ),
                                                 kCGImageAlphaNoneSkipLast );

      // Rotate and/or flip the image if required by its orientation
      CGContextConcatCTM(bitmap, transform);

    //    CGContextSetShouldAntialias(bitmap,YES);

      // Set the quality level to use when rescaling
      CGContextSetInterpolationQuality(bitmap, quality);

      // Draw into the context; this scales the image
      CGContextDrawImage(bitmap, transpose ? transposedRect : newRect, imageRef);

      // Get the resized image from the context and a UIImage
      CGImageRef newImageRef = CGBitmapContextCreateImage(bitmap);
      UIImage *newImage = [UIImage imageWithCGImage:newImageRef];

      // Clean up
      CGContextRelease(bitmap);
      CGImageRelease(newImageRef);

      return newImage;
    }

    /**
     * Returns an affine transform that takes into account the image orientation 
     * when drawing a scaled image
     */

    - (CGAffineTransform)transformForOrientation:(CGSize)newSize {

      CGAffineTransform transform = CGAffineTransformIdentity;

      switch (self.imageOrientation) {
        case UIImageOrientationDown:           // EXIF = 3
        case UIImageOrientationDownMirrored:   // EXIF = 4
          transform = CGAffineTransformTranslate(transform, newSize.width, newSize.height);
          transform = CGAffineTransformRotate(transform, M_PI);
          break;

        case UIImageOrientationLeft:           // EXIF = 6
        case UIImageOrientationLeftMirrored:   // EXIF = 5
          transform = CGAffineTransformTranslate(transform, newSize.width, 0);
          transform = CGAffineTransformRotate(transform, M_PI_2);
          break;

        case UIImageOrientationRight:          // EXIF = 8
        case UIImageOrientationRightMirrored:  // EXIF = 7
          transform = CGAffineTransformTranslate(transform, 0, newSize.height);
          transform = CGAffineTransformRotate(transform, -M_PI_2);
          break;
        default:
          break;
      }

      switch (self.imageOrientation) {
        case UIImageOrientationUpMirrored:     // EXIF = 2
        case UIImageOrientationDownMirrored:   // EXIF = 4
          transform = CGAffineTransformTranslate(transform, newSize.width, 0);
          transform = CGAffineTransformScale(transform, -1, 1);
          break;

        case UIImageOrientationLeftMirrored:   // EXIF = 5
        case UIImageOrientationRightMirrored:  // EXIF = 7
          transform = CGAffineTransformTranslate(transform, newSize.height, 0);
          transform = CGAffineTransformScale(transform, -1, 1);
          break;
        default:
          break;
      }

      return transform;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:16:48.413

我不会`UIImage`自己处理调整大小，因为图像的元数据部分最终可能会处理不正确。有一篇很好的文章（尽管它已经很老了）关于调整大小可能会出现的意外工件。

[http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/)

我正在使用 CocoaPod 中的 UIImage-Resize 库，它运行良好。

可能这不是您想要的答案，但可能会从其他角度提供信息。

# go - 如何漂亮地打印字节数组和字符数组？

> ID：15870887
> 
> 赞同：2
> 
> 时间：2013-04-08T03:40:58.830
> 
> 标签：go

在下面的代码中，我正在尝试编写一个 Txt() 函数来漂亮地打印出我的结构。它在完整代码中包含以下小问题：

1.  如何编写一行通过字符串初始化 Char 数组（第 47 行）
2.  如何在没有字符串功能的情况下加快检查 Char 类型（第 29,30 行）
3.  如何将 Char 数组打印为字符串（第 32 行）
4.  如何将 Char 打印为字符串，可能使用 Sprintf("%c")，但速度很慢。（第 34 行）

完整代码在：[http ://play.golang.org/p/nUsg_qbufP](http://play.golang.org/p/nUsg_qbufP)

```
type Char byte
type THeader struct {
    Ver int8 // will show 1
    Tag Char // will show 'H'
}
type TBody struct {
    B1 [3]byte  // will show "[0,0,0]"
    B2 [4]Char // will show "ABCD"
}    
func Txt(t interface{}) (s string) {
  val := reflect.ValueOf(t)
  typ := val.Type()
  fields := typ.NumField()
  for i := 0; i < fields; i++ {
    sf := typ.Field(i)
    valfld := val.Field(i)
    vType := valfld.Type()
    s += sf.Name + ":" + vType.String() + ":"
    if strings.HasSuffix(vType.String(), "Char") {
      if strings.HasPrefix(vType.String(), "[") {
        v, ok := valfld.Interface().([4]Char)
        s += fmt.Sprint(ok, v) + "\n"
      } else {
        s += fmt.Sprint(valfld.Interface()) + "\n"
      }
    } else {
      s += fmt.Sprint(valfld.Interface()) + "\n"
    }
  }
  return
}

func main() {
    th := THeader{1, 'H'}
    fmt.Printf("%#v\n", th)
    //  tb := TBody{B2: [10]Char("ABCD")}
    tb := TBody{B2: [4]Char{'A', 'B', 'C', 'D'}}
    fmt.Printf("%#v\n", tb)
    fmt.Print("Txt(th):\n", Txt(th), "\n")
    fmt.Print("Txt(tb):\n", Txt(tb), "\n")

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T18:52:51.470

这段代码应该回答除了你的第一个问题之外的所有问题，这是不可能的，因为函数不能返回不同长度的数组，并且 Go 没有初始化动态派生大小数组的工具。你需要那些切片。其余代码可以使用带有 Stringer 接口的惯用 go 来解决，并且不需要反射。

```
package main

import (
    "fmt"
)

type Char byte
type CharSlice []Char
type ByteSlice []byte

func (s CharSlice) String() string {
    ret := "\""
    for _, b := range s {
        ret += fmt.Sprintf("%c", b)
    }
    ret += "\""
    return ret
}

func (s ByteSlice) String() string {
    return fmt.Sprintf("%v", []byte(s))
}

type THeader struct {
    Ver int8 // will show 1
    Tag Char // will show 'H'
}

func (t THeader) String() string {
    return fmt.Sprintf("{ Ver: %d, Tag: %c}", t.Ver, t.Tag)
}

type TBody struct {
    B1 [3]byte // will show "[0,0,0]"
    B2 [4]Char // will show "ABCD"
}

func (t TBody) String() string {
    return fmt.Sprintf("{ B1: %s, B2: %s", ByteSlice(t.B1[:]), CharSlice(t.B2[:]))
}

func main() {
    th := THeader{1, 'H'}
    fmt.Printf("%#v\n", th)
    tb := TBody{B2: [4]Char{'A', 'B', 'C', 'D'}}
    fmt.Printf("%#v\n", tb)
    fmt.Printf("Txt(th):\n%s\n", th)
    fmt.Printf("Txt(tb):\n%s\n", tb)

} 
```

# objective-c - 从一组线中查找多边形

> ID：15870888
> 
> 赞同：3
> 
> 时间：2013-04-08T03:41:01.250
> 
> 标签：objective-c, algorithm, geometry, 2d, polygon

我在**2D**工作。

我的用户可以绘制一些线和线段，我将它们存储在自定义对象类中，但基本上在 startX-Y 和 endX-Y 中。

现在我想找到，实际上只有球在里面的多边形，但是在阅读和研究了一些算法等之后。我想我必须找到所有的多边形，然后找到正确的多边形。

有没有人有一些示例代码，c#，java Objective-c！？我用一些伪代码解释尝试了几次，我不明白。

![例如我的情况是什么](https://i.stack.imgur.com/3NZuR.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:14:19.030

## 概述

这里有许多不同的有趣问题：

**1.给定屏幕上有一组线，用户将手指从任意点拖动到任意端点，我们需要形成一条不与线交叉的新线，起点和终点在哪里端点实际上位于现有线或边界上。**

**2\. 下一个问题是我们如何维护一组活动的“相关”线段，这些线段形成了球所在的凸包。**

**3\. 最后给定我们有一组活动的线段，我们如何找到这个形状的面积。**

现在看来您已经回答了第 1 部分。所以我们专注于第 2 部分和第 3 部分。

对于第 2 部分，我们还将有兴趣询问：

**4\. 如果我们有一个凸包和一个点，我们如何确定该点是否在凸包中。**

我们参考这里的解决方案 4[查找一个点是否在一组点的凸包内而不计算包本身](https://stackoverflow.com/questions/4901959/find-if-a-point-is-inside-a-convex-hull-for-a-set-of-points-without-computing-th)

如果您小心使用所使用的数据结构，则可以有效地完成完整的实现。这是一个简单的练习。如果我在这里做错了什么或者你不明白，请告诉我。我期待在您的游戏准备就绪时玩您的游戏！

## 第 3 部分的解决方案

实际上 3 比 2 容易，因为如果我们知道包含球的活动线段集（这是一个元组对列表 ((x_1start,y_1start), (x_1end, y1_end))），有两种方法可以计算面积。首先是做一个简单的算法来计算由这个元组列表中的所有起点和终点形成的凸包的面积。查找更复杂的面积算法，但如果找不到，请注意具有 n 边的船体有 n-2 个不重叠的三角形，三角形的面积很容易计算（[http://www.mathopenref.com /polygontriangles.html](http://www.mathopenref.com/polygontriangles.html)）。笔记：

```
area = abs((x1-x2)*(y1-y3)-(y1-y2)*(x1-x3)) for triangle (x1,y1)(x2,y2)(x3,y3) 
```

现在，如果您按所有 (x,y) 点围绕正 x 轴的角度对所有点进行排序，那么我们只需固定第一个点，然后连续遍历剩余的点对并找到这些三角形的面积。作为一个简单的练习，为什么需要这个排序步骤（提示：画一幅画）。

## 第 2 部分的解决方案

现在最困难的部分是 2。鉴于我们有一组活动的线段包围着球，我们如何添加一条新线，然后调整我们的活动组内的线段的大小和数量。请注意，在游戏开始时，活动集中恰好有 4 行是屏幕的边界（如果您喜欢归纳，这将是我们的基本情况）。

现在假设我们有一个包含球的任意活动集，并且用户添加了一条新线，我们假设它正好碰到两个现有的线段并且不跨越任何线段（通过第 1 部分算法）。现在我们需要修改活动集。通过算法 1，我们知道该点击中了哪些线段。所以活动集可以改变的唯一方法是，如果这点命中的两条线段都在活动集中（画一张图来看看这个事实）。

现在假设新的线段命中活动集中的两条线（这意味着它实质上将活动集分成两个凸包）。如果我们以旋转顺序维护我们的活动集（也就是说，我们确保它始终按关于正 x 轴的角度排序），我们只需以保持这种排序顺序的方式添加我们的新点。因此，例如假设我们的活动集点（将线段折叠为单线）是：

```
[(x1, y1), (x2, y2), (x3, y3), ..., (xn, yn), (x1, y1)] 
```

我们要添加新的线段 ((x', y'), (x'', y''))，我们的新集合看起来像：

```
[(x1, y1), (x2, y2), (x', y'), (x3, y3), ..., (xn, yn), (x'', y''), (x1, y1)] 
```

然后现在形成了两个凸包：

```
1\. [(x1, y1), (x2, y2), (x', y'), (x'', y''), (x1, y1)]
2\. [(x', y'), (x3, y3), ..., (xn, yn), (x'', y'')] 
```

所以剩下的唯一问题是哪个是我们的新活动集。只需使用算法 4。

## 第 2 部分的数据结构

首先，我们需要类线段和点（为了简单起见，我避免实现诸如等于、哈希码之类的东西）：

```
class Point {
    public int x;
    public int y;
}

class LineSegment {
    public Point lineStart;
    public Point lineEnd;
} 
```

现在我们可以表示我们的活动集数据结构：

```
class ActiveSet {
    public List<Line> thesortedlist;
} 
```

现在我们首先用四行初始化我们的活动集，并将屏幕中心表示为 (0,0)：

```
LineSegment TopBorder = new LineSegment(new Point(10, 10), new Point(-10, 10));
LineSegment LftBorder = new LineSegment(new Point(-10, 10), new Point(-10, -10));
LineSegment BtmBorder = new LineSegment(new Point(-10, -10), new Point(10, -10));
LineSegment RightBorder = new LineSegment(new Point(10, -10), new Point(10, 10));

ActiveSet activeset = new ActiveSet();
activeSet.theActiveLines.add(TopBorder);
activeSet.theActiveLines.add(LftBorder);
activeSet.theActiveLines.add(BtmBorder);
activeSet.theActiveLines.add(RightBorder); 
```

现在假设用户添加了一条从点 (0, 10) 到 (10, 0) 的线，所以这是一条对角线（称为 newSegment），新的活动集将如下所示：

```
------
-     -
-       -
-        -
-         -
-         -
-  B      -
-         -
----------- 
```

注意右上角的切口，B 表示球。现在通过算法 1，我们知道行 TopBorder 和 RightBorder 被命中。现在这两个都在活动集中（我们可以使用哈希图更快地测试成员资格）。现在我们需要形成两个活动集，如下所示：

```
ActiveSet activesetLeft = new ActiveSet();
ActiveSet activesetRight = new ActiveSet(); 
```

现在，为了构建这些集合，请执行以下操作：

```
List<LineSegment> leftsegments = activeset.GetSegmentsBetween(TopBorder,
                                                              RightBorder);

List<RightSegment> rightsegments = activeset.GetSegmentsBetween(RightBorder,
                                                                TopBorder); 
```

此函数 GetSegmentsBetween(LineSegment firstline, LineSegment secondline) 应该只定位列表中的第一行，然后返回所有元素，直到找到第二行（这可能需要两次遍历列表）。它不应在其返回值中包含这些第一行或第二行。现在假设我们有 activesetLeft 和 activesetright，我们需要执行以下操作：

```
activesetLeft.append(new Line(secondLine.lineStart, newSegment.lineStart));
activesetLeft.append(newSegment);
activesetLeft.append(new Line(newSegment.lineEnd, firstLine.lineEnd));

activesetRight.append(new Line(firstLine.lineStart, newSegment.lineEnd));
activesetRight.append(new Line(newSegment.lineEnd, newSegment.lineStart));
activesetRight.append(new Line(newSegment.lineStart, secondLine.lineEnd)); 
```

在代码中真的很难理解，但是上面所有内容的顺序很重要，因为我们希望保持按逆时针顺序排序。

留作练习如何加快速度（实际上，您不需要构建两个活动集，只需首先确定球是在新段的上方还是下方，然后相应地构建左侧或右侧的活动集）。

# ruby-on-rails - Heroku "at=error code=H10 desc="App crashed" method=GET path=/favicon.ico"

> ID：15870889
> 
> 赞同：5
> 
> 时间：2013-04-08T03:41:05.017
> 
> 标签：ruby-on-rails, ruby, heroku, deployment, nokogiri

我有一个在 localhost (Mac OS X) 上运行良好的简单 Rails 应用程序，但是当我将它部署到 Heroku 时，我看到一个页面出现此错误：

**应用程序错误 应用程序发生错误，无法提供您的页面。请稍后重试。如果您是应用程序所有者，请查看您的日志以获取详细信息。**

我真的不知道我在这里做什么；我对来自以下的输出没有任何意义`heroku logs`：

```
2013-04-08T03:25:02+00:00 app[web.1]: => Booting WEBrick
2013-04-08T03:25:02+00:00 app[web.1]: => Rails 3.2.12 application starting in production on http://0.0.0.0:15072
2013-04-08T03:25:02+00:00 app[web.1]: => Call with -d to detach
2013-04-08T03:25:02+00:00 app[web.1]: => Ctrl-C to shutdown server
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:438:in `each'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:438:in `block in eager_load!'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:436:in `each'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:436:in `eager_load!'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/application/finisher.rb:53:in `block in <module:Finisher>'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/initializable.rb:30:in `instance_exec'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/app/controllers/application_controller.rb:1:in `<top (required)>'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
2013-04-08T03:25:02+00:00 app[web.1]: /app/app/controllers/application_controller.rb:3:in `<class:ApplicationController>': uninitialized constant ApplicationController::SessionsHelper (NameError)
2013-04-08T03:25:02+00:00 app[web.1]: Exiting
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/initializable.rb:54:in `run_initializers'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/application.rb:136:in `initialize!'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/railtie/configurable.rb:30:in `method_missing'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/config.ru:3:in `require'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/initializable.rb:54:in `each'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/config.ru:3:in `block in <main>'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `initialize'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/initializable.rb:30:in `run'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/initializable.rb:55:in `block in run_initializers'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/config.ru:in `<main>'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:40:in `eval'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:40:in `parse_file'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:200:in `app'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `instance_eval'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/config.ru:in `new'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/commands/server.rb:46:in `app'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:304:in `wrapped_app'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:254:in `start'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/commands/server.rb:70:in `start'
2013-04-08T03:25:02+00
:00 app[web.1]:     from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/commands.rb:50:in `<top (required)>'
2013-04-08T03:25:02+00:00 app[web.1]:   from script/rails:6:in `require'
2013-04-08T03:25:02+00:00 app[web.1]:   from script/rails:6:in `<main>'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/commands.rb:55:in `block in <top (required)>'
2013-04-08T03:25:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/commands.rb:50:in `tap'
2013-04-08T03:25:03+00:00 heroku[web.1]: State changed from crashed to starting
2013-04-08T03:25:03+00:00 heroku[web.1]: State changed from starting to crashed
2013-04-08T03:25:03+00:00 heroku[web.1]: Process exited with status 1
2013-04-08T03:25:05+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 7369`
2013-04-08T03:25:09+00:00 heroku[web.1]: State changed from crashed to starting
2013-04-08T03:25:09+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-04-08T03:25:09+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-04-08T03:25:11+00:00 app[web.1]: Exiting
2013-04-08T03:25:11+00:00 app[web.1]: /app/app/controllers/application_controller.rb:3:in `<class:ApplicationController>': uninitialized constant ApplicationController::SessionsHelper (NameError)
2013-04-08T03:25:11+00:00 app[web.1]: => Ctrl-C to shutdown server
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
2013-04-08T03:25:11+00:00 app[web.1]: => Call with -d to detach
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/app/controllers/application_controller.rb:1:in `<top (required)>'
2013-04-08T03:25:11+00:00 app[web.1]: => Booting WEBrick
2013-04-08T03:25:11+00:00 app[web.1]: => Rails 3.2.12 application starting in production on http://0.0.0.0:7369
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:436:in `each'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/initializable.rb:54:in `each'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:436:in `eager_load!'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:438:in `block in eager_load!'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/initializable.rb:30:in `instance_exec'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/application/finisher.rb:53:in `block in <module:Finisher>'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/initializable.rb:55:in `block in run_initializers'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/application.rb:136:in `initialize!'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:438:in `each'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/config.ru:in `new'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `initialize'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/initializable.rb:30:in `run'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/railtie/configurable.rb:30:in `method_missing'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:40:in `eval'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/initializable.rb:54:in `run_initializers'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/config.ru:3:in `require'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/config.ru:3:in `block in <main>'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `instance_eval'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/commands/server.rb:46:in `app'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:254:in `start'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/config.ru:in `<main>'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:40:in `parse_file'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:200:in `app'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:304:in `wrapped_app'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/commands/server.rb:70:in `start'
2013-04-08T03:25:11+00:00 app[web.1]:   from script/rails:6:in `require'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/commands.rb:55:in `block in <top (required)>'
2013-04-08T03:25:11+00:00 app[web.1]:   from script/rails:6:in `<main>'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/commands.rb:50:in `tap'
2013-04-08T03:25:11+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/commands.rb:50:in `<top (required)>'
2013-04-08T03:25:13+00:00 heroku[web.1]: Process exited with status 1
2013-04-08T03:25:13+00:00 heroku[web.1]: State changed from starting to crashed
2013-04-08T03:30:49+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=********.herokuapp.com fwd="115.79.161.252" dyno= connect= service= status=503 bytes=
2013-04-08T03:30:49+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=********.herokuapp.com fwd="115.79.161.252" dyno= connect= service= status=503 bytes=
2013-04-08T03:30:50+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=********.herokuapp.com fwd="115.79.161.252" dyno= connect= service= status=503 bytes=
2013-04-08T03:30:51+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=********.herokuapp.com fwd="115.79.161.252" dyno= connect= service= status=503 bytes= 
```

我见过的一些类似问题建议运行`heroku run rake db:migrate`，这给了我这个输出：

```
Running `rake db:migrate` attached to terminal... up, run.5112
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
rake aborted!
no such file to load -- nokogiri
/app/lib/tasks/pivotal.rake:8:in `require'
/app/lib/tasks/pivotal.rake:8:in `<top (required)>'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:425:in `load'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:425:in `block in load_tasks'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:425:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/engine.rb:425:in `load_tasks'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/application.rb:145:in `load_tasks'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/railtie/configurable.rb:30:in `method_missing'
/app/Rakefile:7:in `<top (required)>'
(See full trace by running task with --trace) 
```

这条线`no such file to load -- nokogiri`看起来可能是罪魁祸首，但我不知道如何解决它；我已经尝试运行`bundle install`, `bundle update`, 重新启动 heroku`heroku restart`以及其他各种我现在不记得的基于猜测的解决方案，但它仍然无法正常工作！

这是我的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.12'
gem 'bootstrap-sass'
gem 'bcrypt-ruby', '3.0.1'
gem 'paperclip', '~> 3.4.1'
gem 'nokogiri'

gem "watu_table_builder", require: "table_builder"

group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.13.0'
  gem 'guard-rspec', '1.2.1'
  gem 'guard-spork', :github => 'guard/guard-spork'
  gem 'spork', '0.9.2'
  gem 'factory_girl_rails', '4.1.0', :require => false
end

group :development do
  gem 'annotate'
end

# Gems used only for assets and not required

# in production environments by default.

group :assets do
  gem 'sass-rails',   '3.2.5'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.2'

group :test do
  gem 'capybara', '1.1.2'
  # Gems specific to Mac OS X:
  gem 'capybara', '1.1.2'
  gem 'rb-fsevent', '0.9.1', :require => false
  gem 'growl', '1.0.3'
end

group :production do
  gem 'pg', '0.12.2'
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:58:08.447

应用程序控制器第 3 行，
/app/app/controllers/application_controller.rb:3:in `': 未初始化的常量 ApplicationController::SessionsHelper (NameError)

此外，你应该为 Heroku 离开 WEBrick，那是一个开发服务器。尝试使用独角兽[https://devcenter.heroku.com/articles/rails-unicorn](https://devcenter.heroku.com/articles/rails-unicorn)

# sql - Access SQL：获取表单列表

> ID：15870890
> 
> 赞同：0
> 
> 时间：2013-04-08T03:41:05.550
> 
> 标签：sql, ms-access

在访问列表框中的行源中，什么 SQL 可以获取数据库中的表单列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T06:15:08.220

Access 中的所有对象都存储在一个名为 MsysObjects 的隐藏系统表中。表单的对象类型是 -32768。所以你的查询是：

```
SELECT MSysObjects.Name
FROM MSysObjects
WHERE (((MSysObjects.Type)=-32768)); 
```

# uibutton - UIButton 在 setBackgroundImage 之后改变高度

> ID：15870892
> 
> 赞同：0
> 
> 时间：2013-04-08T03:41:15.803
> 
> 标签：uibutton

这适用于 ios 6.x、模拟器和设备端、xcode 4.6。

我在故事板中有一个 RoundRect 按钮，该按钮链接到我的代码中的插座。在`viewDidLoad`中，我执行以下操作：

```
UIImage *bgImage = [[UIImage imageNamed: @"bgButton.png"]
        resizableImageWithCapInsets: UIEdgeInsetsMake(8, 8, 8, 8)
                       resizingMode: UIImageResizingModeStretch];
[ButtonOutlet setBackgroundImage: bgImage
                        forState: UIControlStateNormal]; 
```

该按钮在情节提要中的高度为 44，并且没有更改它的代码，但是`setBackgroundImage`调用`viewDidAppear`报告按钮框架的高度为 52，没有调用它仍然是 44。背景图像是 36px 正方形（72 @2x）。插图的大小似乎没有区别。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T00:07:09.223

在界面生成器中为受影响按钮的高度添加约束解决了该问题。

# asp.net - 是什么使文本框控件即使在提交后也能保持值。

> ID：15870893
> 
> 赞同：0
> 
> 时间：2013-04-08T03:41:18.023
> 
> 标签：asp.net, controls

我的意思是说当我从文本框中传递一个值并点击提交按钮时..提交值在文本框中仍然可见之后，为什么我们需要自己清空文本框，为什么它没有消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:24:19.593

因为[PostBacks](https://stackoverflow.com/a/183481/1373170)和[ViewState](http://msdn.microsoft.com/en-us/library/ms972976.aspx)。

Webforms 试图模仿桌面 WinForms 应用程序的工作方式和处理事件的方式。因此，您的页面在访问服务器和返回时会记住其控件的状态。

如果您需要更改或重置值，只需在代码隐藏中的事件处理程序上手动更改它。

# c++ - 使用 getLine 在 C++ 中读取 CSV 文件中的分隔列

> ID：15870897
> 
> 赞同：1
> 
> 时间：2013-04-08T03:41:49.073
> 
> 标签：c++

我有一个可以成功读取 CSV 文件的程序。所述 CSV 文件是一个由 3 列分隔的列表。并且每一列在每一行之间都有一个逗号。例如

第 1 行 --- 艺术家、流派、歌曲 第 2 行 --- 迈克尔杰克逊、流行音乐、惊悚片

等等。我希望我的程序做的是读取第一行并获取艺术家、流派和歌曲，将它们作为选项打印给用户。例如

“选择一个选项” 1\. 艺术家 2\. 流派 3\. 歌曲

然后当他们选择一个选项时，它会向他们显示 CSV 文件中的所有艺术家、歌曲或流派。

到目前为止，我的程序正在读取 CSV 并将每一行放入一个向量中。到目前为止，这是我的代码...

```
#include <iostream>
#include <sstream>
#include <string>
#include <fstream>
#include <vector>
using namespace std;
int main()
{
    ifstream infile("music_list.csv");
    string line = "";
    vector<string> all_words;
    cout << "Hello";
    while (getline(infile, line))
    {
        stringstream strstr(line);
        string word = "";
        while (getline(strstr,word, ','))
        {
            all_words.push_back(word);
        }

        for (unsigned i = 0; i < all_words.size(); i++)
        {
            cout << all_words.at(i)<< "\n";
        }

    }
    system("pause");
    return 0;
} 
```

我只是无法弄清楚如何让它读取第一行，将第一行中已经用逗号分隔的每个字符串分开，然后将其作为选项输出给用户。所以本质上我可以将艺术家、流派、歌曲更改为 CSV 文件中的开胃菜、菜肴、饮料等内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:08:25.670

首先，您必须读取 csv 文件并将行存储在向量中，您可以使用此函数来执行此操作。

```
vector<string> readCsvFileContent(const string file)
{
        vector<string> buffer;
        ifstream configFile;
        configFile.exceptions(ifstream::badbit);
        try
        {
            configFile.open(file.c_str(),ifstream::in);
            if(configFile.is_open())
            {
                string line;                
                while (getline(configFile,line))
                {
                    buffer.push_back(line);
                }
                configFile.close();
            }           
        }
        catch (ifstream::failure e){            
            throw e;
        }
        return buffer;
} 
```

然后将每一行条目拆分为 2D 向量。为此，您可以使用此功能

```
vector<vector<string>> processCsvList(vector<string> csvList)
{
    #define SINGER_CONFIG_COUNT 3 //number of comma separated data suppose to be in one line.
    #define DELIMITED_CHAR ","
    #define EMPTY_STRING "";

    vector<vector<string>> tempList;
    string configCell ="";
    for(vector<string>::iterator it = csvList.begin(); it != csvList.end(); ++it)
    {
        if(*it == EMPTY_STRING)
        {
            continue;
        }
        stringstream  configLine(*it);
        vector<string> tempDevice;
        for(int i=0; i<SINGER_CONFIG_COUNT; i++)
        {
            if(getline(configLine,configCell,DELIMITED_CHAR))
            {               
                tempDevice.push_back(configCell);
            }else
            {
            tempDevice.push_back(EMPTY_STRING);
            }
        }
        tempList.push_back(tempDevice);
    }
    return tempList;
} 
```

**我没有尝试编译任何这些函数**，因为我在这里没有这样做的环境。但我认为这将有助于思考方向。

现在你的数据在一个二维向量中，比如 Excel 表。所以你可以通过内部向量的索引来访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:31:39.637

您可以创建一个`std::map<string,vector<string>>`，以便您可以将 CSV 文件的每一列从第 2 行开始存储在地图中作为字符串向量，由 CSV 文件第 1 行的列中出现的文本作为键控。

然后，您可以通过遍历 的键来显示字段的名称，这些键`std::map`按字母顺序方便地存储。

读取 CSV 文件第一行的任务可以由您已经拥有的代码执行，或者更复杂的代码执行，这些代码考虑到在功能齐全的 CSV 文件中找到的引用字段等。

# php - 如何格式化我使用 PHP 从两个表中获得的数据？

> ID：15870899
> 
> 赞同：0
> 
> 时间：2013-04-08T03:41:58.843
> 
> 标签：php, mysql, sql

我想从两个表中获取数据。我在一张表中有患者姓名和 ID，在另一张表中有预约时间。

```
Table1:
Name Id
Joe Wang 1234
Jack Steward 5555

Table2:
Id     Month Date
1234   Jan   15
1234   Jan   18
1234   Feb   5
1234   Mar   1
1234   Mar   3
5555   Jan   3
5555   Apr   4
5555   Apr   12 
```

...

我得到数据：

```
$stmt = $mysqli->prepare("SELECT Name, 
            Table1.Id, 
            Month, 
            Date
            FROM Table1 JOIN Table2 
            WHERE Table1.Id=Table2.Id"); 
```

我怎样才能得到这样的输出：

```
Joe Wang
1234
    Jan
        15
        18
    Feb
        5
    Mar
        1
        3
Jack Steward
5555
   Jan
        3 
```

...

我使用以下 php 代码，它会至少多次使用一个名称、ID、月份，

```
$stmt->execute();

$result = $stmt->get_result();

while($row = $result->fetch_assoc()){
printf("\t<p>Name: %s Id: %s %s %s</p>\n",
    htmlspecialchars( $row["Name"] ),
    htmlspecialchars( $row["Id"] ),
            htmlspecialchars( $row["Month"] ),
    htmlspecialchars( $row["Date"] )
    );
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:59:40.940

对分组很重要的第一列是`Id`。所以你在它上面做你的主数组，并为每个不同的 id 设置一次名称。第二个分组列是`Month`，因此您必须在 ids 的循环中为它们中的每一个创建一个数组，并为每个日期创建一个条目。

为了帮助您完成这项任务，我建议：

*   在查询中添加`ORDER BY Id, Month`子句，
*   在构造数组后执行一个`var_dump`数组以将其结构与所需结果进行比较。

# java - 如何通过 RESTful Web Services-JAX-RS 使用 JAXB 更新 XML 元素列表？

> ID：15870905
> 
> 赞同：0
> 
> 时间：2013-04-08T03:43:13.170
> 
> 标签：java, list, jaxb, jax-rs, crud

我有一个由 JAXB 生成的 XML 文件。我期望做的是将“添加和更新”操作放在单个方法中。“添加”操作可用于附加新条目/元素，但无法正确更新现有项目。

如果我想将“Damien”的 id 值更改为“P005”，它将创建具有相同名称但不同 id 的新元素（Damien，P005）。之前的值仍然存在（Damien，P004）。

有什么建议吗？之前谢谢。

这里是**XML**文件

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<getPersonsData>
   <person>
      <name>Alice</name>
      <id>P001</id>
   </person>
   <person>
      <name>Bob</name>
      <id>P002</id>
   </person>
   <person>
       <name>Charlie</name>
       <id>P003</id>
   </person>
    <person>
       <name>Damien</name>
       <id>P004</id>
    </person>

</getPersonsData> 
```

这里是**Person的****JAXB**类

 **```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
"name",
"id"
 })
 @XmlRootElement(name = "person")
 public class Person {

  @XmlElement(required = true)
  protected String name;
  @XmlElement(required = true)
  protected String id;

 public String getName() {
    return name;
 }

 public void setName(String value) {
    this.name= value;
 }

 public String getId() {
    return id;
 }

 public void setid(String value) {
    this.id = value;
 }

 } 
```

这里是**GetPersonsData的****JAXB**类

 **```
 @XmlAccessorType(XmlAccessType.FIELD)
  @XmlType(name = "", propOrder = {
  "person"
  })
  @XmlRootElement(name = "getPersonsData")
  public class GetPersonsData {

@XmlElement(name="person", required = true)
    protected List<Person> person;

    public List<Person> getPersons() {
    if (person == null) {
        person = new ArrayList<Person>();
    }
    return this.person;
    }
 } 
```

这里是**RESTFul Web Service (JAX-RS)**类

```
@Path("/rest")
@Consumes({ MediaType.APPLICATION_FORM_URLENCODED, MediaType.APPLICATION_JSON })
@Produces(MediaType.APPLICATION_JSON)
public class PersonConfig{        

     /**
 * POST Method to add/update name and id
 * 
 */
@POST
@Path("/saveperson")
@Consumes({ MediaType.APPLICATION_FORM_URLENCODED,
        MediaType.APPLICATION_JSON })
@Produces(MediaType.APPLICATION_JSON)
public void savePerson(@FormParam("name") String name,
        @FormParam("id") String id) {

    try {

        String tesfile = "root/data/person.xml";
        File file = new File(tesfile);

        JAXBContext jc = JAXBContext.newInstance(GetPersonsData.class);
        Unmarshaller unmarshaller = jc.createUnmarshaller();

        // unmarshalling xml file
        GetPersonsData getPersonsData = (GetPersonsData) unmarshaller
                .unmarshal(file);

        // get list of persons
        List<Person> listPerson = getPersonsData.getPersons();
        Iterator<Person> iter = listPerson.iterator();
        Person  person  = iter.next();

                 //if person not exist, append new entry (element) to xml
                 //this code works, but I failed to update the existing 
                 //element.
                 //If I want to update the id or name that already exist  
                 //it will create new person with same name but different id and 
                 //vice versa.
             if(!person.getName().equals(name)){
                Person p = new Person();
                p.setName(name);
                p.setId(id);
                listPerson.add(p);
         }else if (!person.getId().equals(id){
                     person.setId(id);
                 }

        // Marshalling Object to the xml file
        Marshaller m = jc.createMarshaller();
        m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        m.marshal(getConfigInputType, file);
        m.marshal(getConfigInputType, System.out);

    } catch (ParserConfigurationException e) {

        e.printStackTrace();
    } catch (SAXException e) {

        e.printStackTrace();
    } catch (IOException e) {

        e.printStackTrace();
    } catch (JAXBException e) {

        e.printStackTrace();
    } catch (TransformerFactoryConfigurationError e) {

        e.printStackTrace();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:28:42.030

问题可能是您没有循环`List`. 从您的以下来源中，您只是拿第一项进行比较。

```
Person  person  = iter.next(); 
```

您需要循环整个列表以进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T07:55:57.973

@Jayamohan

我已经放了一个这样的循环：但代码仅适用于更新，不适用于“添加”元素

```
 for (Iterator<Person> iterator = listPerson .iterator(); iterator.hasNext(); )
 {  
  Person person= iterator.next();
   //this peace of code works for update value
   if(person.getName().equals(name) && !person.getId().equals(id)){ 
    person.setId(id); 
   }else if (!person.getName().equals(name) && person.getId().equals(id)){  
     person.setName(name); 
    } 
  } 
```****

# android - 如何制作二维图像网格？

> ID：15870906
> 
> 赞同：1
> 
> 时间：2013-04-08T03:43:30.590
> 
> 标签：android, xml

我是 Android 开发的新手，我正在尝试制作一个应用程序，该应用程序的菜单由 3x3 图像网格组成。我无法让图像按比例缩放并占据屏幕宽度的 1/3。我觉得应该用`RelativeLayout`，但好像不支持`android:weight`。然后我尝试`LinearLayout`了，但它只是水平缩放。

我整天都在研究这个问题，但无法弄清楚。任何帮助，将不胜感激。

*编辑：我找到了一种可行的方法，使用`TableLayout`with`android:shrinkColumns="*"`表示宽度，并添加`android:layout_weight="1"`到所有`TableRows`高度。我用过`android:scaleType="fitCenter"`。但比例类型不是问题，让视图适合。此方法适用于太大的图像，但可能不适用于太小的图像。`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:02:29.130

第一次获取屏幕设备的高度和宽度第二次将您的图像缩放到图像的三分之一值并重新分配它

检查此代码

Main.xml

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.33"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.33"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.33"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/imageView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.33"
        android:src="@drawable/ic_launcher" />

</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.33"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imageView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.33"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/imageView5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.33"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/imageView6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.33"
        android:src="@drawable/ic_launcher" />

</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.33"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imageView7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.33"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/imageView8"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.33"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/imageView9"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.33"
        android:src="@drawable/ic_launcher" />

</LinearLayout>

</LinearLayout> 
```

这是 MainActivity.java 文件

```
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Matrix;
import android.os.Bundle;
import android.view.Display;
import android.widget.ImageView;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ImageView img[] = new ImageView[9];
    img[0] = (ImageView) findViewById(R.id.imageView1);
    img[1] = (ImageView) findViewById(R.id.imageView2);
    img[2] = (ImageView) findViewById(R.id.imageView3);
    img[3] = (ImageView) findViewById(R.id.imageView4);
    img[4] = (ImageView) findViewById(R.id.imageView5);
    img[5] = (ImageView) findViewById(R.id.imageView6);
    img[6] = (ImageView) findViewById(R.id.imageView7);
    img[7] = (ImageView) findViewById(R.id.imageView8);
    img[8] = (ImageView) findViewById(R.id.imageView9);

    Display mDisplay= getWindowManager().getDefaultDisplay();
    int Devicewidth= mDisplay.getWidth();
    int DeviceHeight= mDisplay.getHeight();
    for(int i=0; i<9 ; i++){
        //You can use different images here since i have only one I have used only one
        Bitmap oldBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
        Bitmap newBitmap = getResizedBitmap(oldBitmap, DeviceHeight/3, Devicewidth/3);
        img[i].setImageBitmap(newBitmap);
    }

}

public Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth) {
    int width = bm.getWidth();
    int height = bm.getHeight();
    float scaleWidth = ((float) newWidth) / width;
    float scaleHeight = ((float) newHeight) / height;
    Matrix matrix = new Matrix();
    matrix.postScale(scaleWidth, scaleHeight);
    Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, false);
    return resizedBitmap;
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:22:21.203

您可以使用 GridView（参见[http://developer.android.com/guide/topics/ui/layout/gridview.html](http://developer.android.com/guide/topics/ui/layout/gridview.html)和[http://developer.android.com/reference/android/widget/GridView.html](http://developer.android.com/reference/android/widget/GridView.html)）和将 numColumns 设置为 3。至于 ImageView，您可以使用 ScaleType 来查看哪个最适合您的情况，例如 FIT_XY 等。

希望这可以帮助。

# java - 如何将 byte[] 数组的内容从十六进制转换为十进制？

> ID：15870907
> 
> 赞同：1
> 
> 时间：2013-04-08T03:43:39.610
> 
> 标签：java, arrays, hex, decimal

我有一个 targetDataLine 打开...

```
byte[] bytes = new byte[line.getBufferSize() / 5];
line.read(bytes, 0, bytes.length); 
```

字节数组是十六进制的，我如何将它的内容表示为十进制值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:21:57.000

```
int decValue = Integer.parseInt(hexString, 16); 
```

资源：[http ://www.tutorialspoint.com/java/number_parseint.htm](http://www.tutorialspoint.com/java/number_parseint.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:33:58.693

不确定 OP 的发布语言。

在 Python 中，如果您有一个数组并且想要获取字节的十进制值，则可以循环并使用 ord() 来获取十进制表示。

如果您必须从包含十六进制值的实际数组进行转换，则可以按照此 StackOverflow 帖子进行转换：

[在 Python 中将十六进制字符串转换为 int](https://stackoverflow.com/questions/209513/convert-hex-string-to-int-in-python)

# matlab - 基于 2 列的唯一函数 [而不是行] < > MATLAB

> ID：15870908
> 
> 赞同：1
> 
> 时间：2013-04-08T03:43:43.647
> 
> 标签：matlab, unique

我有一个单元格数组 ，`a`其内容如下：

```
a{1}=[1 3 4 5;
      3 3 4 5;
      5 5 4 5;
      2 4 2 6;
      6 5 2 6;
      7 2 3 1;] 
```

如何`unique`在 2 列 [第 3 列和第 4 列] 上应用该函数，以便它们返回值“3”和“2”。[因为 4,5 对有 3 个重复项，2,6 对有 2 个重复项。]

非常感谢任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:08:58.587

你可以使用：

```
[B,I,J] = unique(a{1}(:,[3,4]),'rows');
N = hist(J,numel(unique(J)));
N(N~=1) 
```

这会给你：

```
ans =

     2     3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:09:16.050

你可以这样做：

```
desiredCol=3;
B=unique(a{1}(:,desiredCol));
count=histc(a{1}(:,desiredCol),B);
desiredMat(:,2)= count(count~=1);
multipleOccElm= (count~=1).*B;
desiredMat(:,1)=multipleOccElm(multipleOccElm~=0); 
```

这就是你解释的方式`desiredMat`：

以第一行为例。第一列将包含该元素。第二列将包含它在该特定列中出现的次数。请注意，不会显示单个事件。

第 4 列的`desiredMat`外观如下：

```
desiredMat =

     5     3
     6     2 
```

# javascript - esri javascript缩放到位置

> ID：15870910
> 
> 赞同：0
> 
> 时间：2013-04-08T03:43:56.330
> 
> 标签：javascript, maps, esri, arcgis-js-api

我有一个问题，我想使用 esri javascript api 缩放到位置

我有这个来自 esriGetStarted javascript 的课程

```
function zoomToPlace(lon, lat, scale) {
          mapDeferred.centerAndZoom([lon, lat], scale);
      } 
```

我尝试使用此 html 元素缩放到位置：

```
<a href="#place" class="buttonStyle" onclick="javascript:zoomToPlace('118.12', '-5.52', '9');">zoom to place </a> 
```

但它直到现在才起作用，请帮助我如何缩放到位置，或者可能有其他选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:34:14.227

您可能遇到空间参考问题（映射引擎出现任何错误的第一个呼叫端口:)）。我来自现有项目的代码在尝试缩放之前将坐标转换为 web 墨卡托：

```
var pt = esri.geometry.geographicToWebMercator(new esri.geometry.Point(lon, lat));
_map.centerAndZoom(pt, scale); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T14:06:59.863

不确定这是否有帮助，但 ESRI API 中有一个 Locate Widget：

```
require(["esri/dijit/LocateButton"],

geoLocate = new LocateButton({
            map: map
        }, "LocateButton");
        geoLocate.startup(); 
```

# c++ - v-usb 按钮按下和释放

> ID：15870914
> 
> 赞同：1
> 
> 时间：2013-04-08T03:44:11.177
> 
> 标签：c++, usb, arduino, avr

我正在尝试在[AVR](http://en.wikipedia.org/wiki/Atmel_AVR)[微控制器上使用](http://en.wikipedia.org/wiki/Microcontroller)[V-USB](http://www.obdev.at/products/vusb/index.html)来模拟[HID](http://en.wikipedia.org/wiki/Human_interface_device)键盘，我发现了如何发送键以及如何释放所有键，方法是调用 usbSetInterrupt()，键值为 0，但是是否有释放一个键而不是另一个键的方法？

我将它用于游戏控制器，例如，我按住与左箭头相对应的按钮，然后按下并释放 A 按钮。我希望它注册为：

*   左箭头按
*   新闻
*   发布
*   左箭头释放

但我现在能做的基本上就是对每一个进行短暂的按压。每次我按下一个按钮时，它都会在计算机上注册为按下和释放。有没有办法调用 usbSetInterrupt() 或其他方法告诉它现在只有一个先前按下的键已被释放？

# javascript - 使用 ng-repeat 添加/删除 DOM 元素

> ID：15870918
> 
> 赞同：2
> 
> 时间：2013-04-08T03:45:03.570
> 
> 标签：javascript, angularjs, angularjs-ng-repeat

我在 Angularjs 中有一个问题，我尝试使用 ng-repeat 为用户添加/删除 DOM 元素输入和按钮，因此他们可以使用按钮添加或删除输入元素。

事实上，我的代码就是为此做的。

这是html代码：

```
<a class="btn pull-right" ng-click="addInputRow()">add input</a>    
<p class="" ng-repeat="item in controlNumberOfInputRows">
 <span>NO.{{$index+1}}</span>
 name:<input name="name" type="text" class="span2" /> 
 phone:<input name="phone" type="text" class="span2" /> 
 ID:<input name="ID" type="text" class="span3" />
 <a class="class" ng-click="deleteThis($index)">X</a>
</p> 
```

javascript代码：

```
myModule.controller('MainCtrl', function($scope,$http){

$scope.controlNumberOfInputRows = [];

$scope.addInputRow = function(){

    $scope.controlNumberOfInputRows.push(0);

}

$scope.deleteThis = function(st){
    $scope.controlNumberOfInputRows.splice(st,1);

}; 
```

但是当用户删除该项目时，此代码有一个错误，Angulayjs 只删除最后一个。

如果我设置：

```
$scope.controlNumberOfInputRows = [0,1,2,3,4]; 
```

它在[0]~[4]中工作得很好，用户可以按索引删除项目，但在[5]~[X]中不行（删除最后一个）

为什么？

PS如果我设置：

```
$scope.controlNumberOfInputRows = [0,1,2,3,4]; 
```

它在[0]~[4]中工作得很好，用户可以按索引删除项目

```
name[Wells] Phone[123] ID[1] X
name[Wells] Phone[123] ID[2] X
name[Wells] Phone[123] ID[3] X   << delete this
name[Wells] Phone[123] ID[4] X
name[Wells] Phone[123] ID[5] X 
```

然后我们得到：

```
name[Wells] Phone[123] ID[1] X
name[Wells] Phone[123] ID[2] X
name[Wells] Phone[123] ID[4] X
name[Wells] Phone[123] ID[5] X 
```

如果我们使用添加输入

```
name[Wells] Phone[123] ID[1] X
name[Wells] Phone[123] ID[2] X
name[Wells] Phone[123] ID[3] X   
name[Wells] Phone[123] ID[4] X
name[Wells] Phone[123] ID[5] X
name[Wells] Phone[123] ID[6] X
name[Wells] Phone[123] ID[7] X
name[Wells] Phone[123] ID[8] X  << delete this
name[Wells] Phone[123] ID[9] X 
```

然后我们得到：

```
name[Wells] Phone[123] ID[1] X
name[Wells] Phone[123] ID[2] X
name[Wells] Phone[123] ID[3] X   
name[Wells] Phone[123] ID[4] X
name[Wells] Phone[123] ID[5] X
name[Wells] Phone[123] ID[6] X
name[Wells] Phone[123] ID[7] X
name[Wells] Phone[123] ID[8] X 
```

我想我通过杂技解决了我的问题：

```
 var index = 0;
    $scope.controlNumberOfInputRows = [];
    $scope.addInputRow = function(){
       index ++;
       $scope.controlNumberOfInputRows.push(index);      
    } 
```

这确实很好用，但为什么呢？不知道...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:22:35.217

试试这个：将执行删除：

```
<a class="btn pull-right" ng-click="addInputRow()">add input</a>    
<p class="" ng-repeat="(key,value) in controlNumberOfInputRows">
 <span>NO.{{value+1}}</span>
 name:<input name="name" type="text" class="span2" /> 
 phone:<input name="phone" type="text" class="span2" /> 
 ID:<input name="ID" type="text" class="span3" />
 <a class="class" ng-click="deleteThis($index)">X</a>
</p> 
```

要正确执行此操作，您应该使用指令，请参见此处：[处理 DOM 操作 - AngularJS](https://stackoverflow.com/questions/11699635/dealing-with-dom-manipulations-angularjs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:45:12.620

我想我通过杂技解决了我的问题

```
 $scope.addInputRow = function(){
       index ++;
       $scope.controlNumberOfInputRows.push(index);      
    } 
```

这句话做得很好，但为什么呢？不知道...

> ID：15870919
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# c++ - 区分 C++ 中的多态类型

> ID：15870921
> 
> 赞同：0
> 
> 时间：2013-04-08T03:45:30.303
> 
> 标签：c++, polymorphism, typeinfo

这是一些代码：

```
#include <typeinfo>
#include <assert.h>
#include <vector>

class Super {};

class Sub1 : public Super {};

class Sub2 : public Super {};

int main() {
    std::vector<Super*> vec;

    vec.push_back(new Sub1);
    vec.push_back(new Sub2);

    assert(typeid(vec[0]) == typeid(vec[1]));
    assert(typeid(vec[0]) != typeid(vec[1]));
} 
```

不幸的是，第一个断言通过了，而第二个没有。我对这个结果并不感到惊讶，但是能够以这种方式辨别类型会很好。

我的（有点骇人听闻的）解决方法：

```
#include <typeinfo>
#include <assert.h>
#include <vector>

enum SubTypeEnum {
    Sub1_T,
    Sub2_T
};

class Super {
    SubTypeEnum _type;
public:
    Super(SubTypeEnum __type) : _type(__type) {}
    SubTypeEnum type() { return _type; }
};

class Sub1 : public Super {
public:
    Sub1() : Super(Sub1_T) {}
};

class Sub2 : public Super {
public:
    Sub2() : Super(Sub2_T) {}
};

int main() {
    std::vector<Super*> vec;

    vec.push_back(new Sub1);
    vec.push_back(new Sub2);

    assert(vec[0]->type() != vec[1]->type());
    assert(vec[0]->type() == vec[1]->type());
} 
```

这会产生预期的结果，但看起来很混乱。有没有更好的方法来找出我正在处理的类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:56:24.517

首先，您使用`typeinfo`稍有错误，当应用于指针时，它返回指针的类型，但当应用于取消引用的指针时，它返回指向对象的实际类型，只要基类型至少有一个虚拟函数（通常是析构函数）。所以以下将起作用：

```
class Super {
  public:
  virtual ~Super() {}
};

class Sub1 : public Super {};

class Sub2 : public Super {};

int main() {
    std::vector<Super*> vec;

    vec.push_back(new Sub1);
    vec.push_back(new Sub2);

    assert(typeid(vec[0])  == typeid(vec[1]));
    assert(typeid(*vec[0]) != typeid(*vec[1]));
} 
```

其次，进行这种类型切换通常被认为是您做错了什么的标志。例如，而不是

```
void foo(Base* v) {
  //Here SOMETHING and SOMETHING_ELSE are constants we calculate elsewhere.
  if( typeid(*v)==SOMETHING ) { cout<<"Got a SOMETHING"<<endl; }
  else if (typeid(*v)==SOMETHING_ELSE ) { cout<<"Got a SOMETHING ELSE"<<endl; }
} 
```

或其大致等价的

```
void foo(Base* v) {
  if( dynamic_cast<Something*>(v) ) { cout<<"Got a SOMETHING"<<:endl; }
  else if ( dynamic_cast<SomethingElse*>(v) { cout<<"Got a SOMETHING ESLE"<<endl; } 
```

通常将功能添加到基类中：

```
class Base
{
  public:
    virtual void printMessage()=0;
};

class Something : public Base
{
   void printMessage() { cout<<"Got a SOMETHING"<<endl; }
}

class SomethingElse : public Base
{
   void printMessage() { cout<<"Got a SOMETHING ELSE"<<endl; }
}

void foo(Base * v)
{
  v->printMessage();
} 
```

# php - PHP pushing submit button takes two times to initiate code

> ID：15870924
> 
> 赞同：0
> 
> 时间：2013-04-08T03:45:54.623
> 
> 标签：php

Every time it takes two clicks on the submit button to get the code to go, also just randomly it was triggering different codes that are setup the same way but with different names for the input and inside the `$_POST`. Am I using the `$_POST` right by setting the name of the input to the same thing?

here is the code

```
<?php                       
//If submit form was clicked
if(isset($_POST['intro'])) {
    //Server side validation for security purposes
    if($userpoints >= 100 AND $intro == 0 AND $lifeonmarsalbum == 0) {
        mysqli_query($con,"UPDATE users SET points = points - 100 WHERE users.user_name = '$username' LIMIT 1");
        mysqli_query($con,"UPDATE users SET intro = 1 WHERE users.user_name = '$username' LIMIT 1");
    }
}
?>
<form method="post" action="index.php">
    <?php
    if ($userpoints >= 100 AND $intro == 0 AND $lifeonmarsalbum == 0) {
        echo '<input type="submit" name="intro" value="100pts">';
    } elseif ($intro == 1 OR $lifeonmarsalbum == 1) {
        echo '<input type="submit" name="submit" value="100pts" disabled title="You already earned this track!">';
    } else {
        echo '<input type="submit" name="submit" value="100pts" disabled title="You need at least 100 points for this download">';
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T03:53:24.880

`name="intro"`仅当满足第一行`if()`子句时才输出提交按钮。很可能在您第一次加载此页面时，不满足该条件，因此没有`intro`按钮。第一次提交后，条件满足，您进入`name="intro"`表单，然后提交“开始”工作。

# core-data - CoreData 不改变底层模型

> ID：15870925
> 
> 赞同：0
> 
> 时间：2013-04-08T03:46:18.093
> 
> 标签：core-data, migration

再会，

我在 Apps Store 中有一个带有 CoreData 的应用程序。我现在在界面中编写了一些外观更改，而没有更改 CoreData 模型中的任何内容。我没有添加/删除/或更改任何实体或属性。现在，我准备上传我的应用程序版本 2。我不确定我是否必须做任何事情，以便第一个版本中用户的旧数据不会被删除，而是会保存在新应用程序中（使用完全相同的 CoreData 模型）。请容忍这个菜鸟。

十分感谢，

罗密欧

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:53:58.437

当有人安装他们已经拥有的应用程序的新版本时，应用程序的所有数据都保留在原来的位置——它不会被删除。

此数据是否与新版本兼容是另一个问题。如果您没有对数据模型进行任何更改，那么应该没问题。但是*你应该确定*。测试升级过程是测试应用程序新版本的最重要部分之一。安装当前版本，生成一些数据，然后安装新版本并确保一切正常。正如您所描述的那样，不应该有任何问题，但您永远不应该只相信情况就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T12:31:09.197

在 iDeveloper TV 上的 Marcus Zarra 的核心数据迁移课程中，他建议手动锁定您的 xcdatamodel 文件，这样您就不会意外地对其进行更新并在您没有​​计划的情况下强制迁移。但我同意汤姆的观点，先测试一下。

[iDeveloper.TV 核心数据迁移](http://ideveloper.tv/video/coredatamigrationcourse.html)

# html - 使用 css 的动态布局

> ID：15870926
> 
> 赞同：1
> 
> 时间：2013-04-08T03:46:35.513
> 
> 标签：html, css, asp.net-mvc

我有一个带有标准页眉和页脚的 4 列布局。它是这样的

```
<div id="header"></div>
<div id="leftnav"></div>
<div id="maincontent"></div>
<div id="nextcontent"></div>
<div id="addtionalinfo"></div>
<div id="footer"></div> 
```

像这样[http://jsfiddle.net/gaby/mBuf9/](http://jsfiddle.net/gaby/mBuf9/)

但是当中心没有内容/数据时，我希望最右边的 div 跨越并占据整个内容空间。同样，如果最左边的 div 中没有内容，我希望 maincontent 跨越剩余空间。有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:52:46.200

您可以尝试以下方法。

这是内容的小提琴：

> [http://jsfiddle.net/mBuf9/27/](http://jsfiddle.net/mBuf9/27/)

同样没有内容的小提琴：

> [http://jsfiddle.net/mBuf9/28/](http://jsfiddle.net/mBuf9/28/)

主要的变化是 div 被放置在了 a`table`和 css 中的一些小变化。

希望这可以帮助...

# javascript - 将所有信息和标签从 div 传输到 CKEditor

> ID：15870928
> 
> 赞同：0
> 
> 时间：2013-04-08T03:46:45.233
> 
> 标签：javascript, html, ckeditor

正如标题所说的非常直截了当。

我只需要知道如何将所有内容从 div 传输到 CKEditor 而不传输 div 本身。

顺便说一句，它是 4.1 版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T05:08:15.523

如果您可以使用 jQuery，您只需读取内容并将其设置为数据即可。

```
var html = jQuery('#YourDivSelector').html();
CKEDITOR.instances.editor1.setData(html); 
```

# mediawiki - 如何从 MediaWiki wiki 中永久删除页面？

> ID：15870930
> 
> 赞同：13
> 
> 时间：2013-04-08T03:47:20.467
> 
> 标签：mediawiki, mediawiki-api

我管理着一个被大量垃圾邮件袭击的 MediaWiki wiki。我已经设法摆脱了通过使用扩展名添加到 wiki 的垃圾邮件页面，但页面的数据仍然存在于 wiki 的 MySQL 数据库中。这使数据库膨胀到超过 3GB。

有没有办法从 wiki 中永久删除垃圾邮件页面，从而将它们完全从数据库中删除？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-08T15:37:07.383

运行名为[deleteArchivedRevisions.php的](http://www.mediawiki.org/wiki/Manual%3aDeleteArchivedRevisions.php)[维护脚本](http://www.mediawiki.org/wiki/Manual%3aMaintenance_scripts)。

请注意，运行 MediaWiki 维护脚本通常需要对运行 MediaWiki 的服务器进行 shell 访问。如果你没有这个（在一些廉价的共享主机设置中可能就是这种情况），你可以尝试使用[MaintenanceShell 扩展](http://www.mediawiki.org/wiki/Extension%3aMaintenanceShell)。

# python - 为 qt 应用程序使用线程

> ID：15870931
> 
> 赞同：0
> 
> 时间：2013-04-08T03:47:23.250
> 
> 标签：python, pyqt, qthread

我有以下两个文件：

```
import sys
import time
from PyQt4 import QtGui, QtCore

import btnModule

class WindowClass(QtGui.QWidget):

    def __init__(self):
        super(WindowClass, self).__init__()
        self.dataLoaded = None

#       Widgets

#       Buttons
        thread = WorkerForLoop(self.runLoop)
#        thread.start()
        self.playBtn    = btnModule.playpauselBtnClass \
                            ('Play', thread.start)            
#       Layout
        layout = QtGui.QHBoxLayout()
        layout.addWidget(self.playBtn)
        self.setLayout(layout)

#       Window Geometry
        self.setGeometry(100, 100, 100, 100)

    def waitToContinue(self):
        print self.playBtn.text()
        while (self.playBtn.text() != 'Pause'):
            pass

    def runLoop(self):
        for ii in range(100):
            self.waitToContinue()
            print 'num so far: ', ii
            time.sleep(0.5)

class WorkerForLoop(QtCore.QThread):
    def __init__(self, function, *args, **kwargs):
        super(WorkerForLoop, self).__init__()
        self.function = function
        self.args = args
        self.kwargs = kwargs

    def __del__(self):
        self.wait()

    def run(self):
        print 'let"s run it'
        self.function(*self.args, **self.kwargs)
        return

if __name__ == '__main__':

    app = QtGui.QApplication(sys.argv)

    wmain = WindowClass()
    wmain.show()

    sys.exit(app.exec_()) 
```

和第二个文件 btnModule.py：

```
from PyQt4 import QtGui, QtCore

class playpauselBtnClass(QtGui.QPushButton):

    btnSgn = QtCore.pyqtSignal()

    def __init__(self, btnName, onClickFunction):
        super(playpauselBtnClass, self).__init__(btnName)

        self.clicked.connect(self.btnPressed)
        self.btnSgn.connect(onClickFunction)

    def btnPressed(self):
        if self.text() == 'Play':
            self.setText('Pause')
            self.btnSgn.emit()
            print 'Changed to pause and emited signal'
        elif self.text() == 'Pause':
            self.setText('Continue')
            print 'Changed to Continue'
        elif self.text() == 'Continue':
            self.setText('Pause')
            print 'Changed to Pause' 
```

如果在第一个文件中我删除了`thread.start()`它按预期工作的注释，它会启动线程然后挂起，直到我单击`Play`UI。但是，我认为即使我没有在那里启动它也应该可以工作，因为信号`btnSgn`连接到`onClickFunction`在这种情况下采用 value `thread.start`。

将此用作参考 [http://joplaete.wordpress.com/2010/07/21/threading-with-pyqt4/](http://joplaete.wordpress.com/2010/07/21/threading-with-pyqt4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T04:36:54.593

我认为当您尝试在第二个文件（通过 self.btnSgn.emit()）中调用 thread.start() 时它不起作用的原因是线程对象超出了您创建的**init**函数的范围它。所以你在一个已经删除的线程上调用 start() 。

当我尝试它时，只需更改线程 - > self.thread（即使线程对象成为 WindowClass 对象的成员）就可以正常工作，因为线程会一直保持活动状态直到程序结束。

# c# - 如何在下拉列表中默认显示当前日期？

> ID：15870934
> 
> 赞同：2
> 
> 时间：2013-04-08T03:47:41.517
> 
> 标签：c#, datetime, drop-down-menu

我想在下拉列表中显示一周的日期，默认为今天的日期。我怎样才能做到这一点？

我还被告知“使用类 DateTime.Now，并将数据值转换为字符串”。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T03:58:38.833

这适用于我的 asp.net 项目

```
DropDownList1.Items.Add(DateTime.Now.ToString()); 
```

这个在我的组合框中

```
comboBox1.Items.Add(DateTime.Now); 
```

我不完全确定你的问题。以下是你想做的吗？

```
for (int i = 0; i < 7; i++)
{
    DropDownList1.Items.Add(DateTime.Now.AddDays(-i).ToString());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T04:26:41.710

试试这个：

```
 //Get Start And End
            int delta = Convert.ToInt32(DateTime.Now.DayOfWeek);
            delta = delta == 0 ? delta + 7 : delta;
            DateTime moday = DateTime.Now.AddDays(1 - delta);
            DateTime sunday = DateTime.Now.AddDays(7 - delta);
            //Get Date Range
            List<DateTime> allDates = new List<DateTime>();
            //Add To Your List
            for (DateTime i = moday; i <= sunday; i = i.AddDays(1))
            {
                DropDownList1.Items.Add(i.Date.DayOfWeek);
            }
            //Select Today Name
            DropDownList1.SelectedItem = DateTime.Today.Date.DayOfWeek; 
```

**已编辑**

对于这种格式`(mm/dd/yyy)`

```
//Add To Your List
            for (DateTime i = moday; i <= sunday; i = i.AddDays(1))
            {
                comboBox1.Items.Add(i.Date.ToShortDateString());
            }
            //Select Today Date(dd/mm/yyy)
            comboBox1.SelectedItem = DateTime.Today.ToShortDateString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T04:19:38.283

你可以把它放在加载事件上

```
 protected void Page_Load(object sender, EventArgs e)
    {
        for (int i = 0; i < 7; i++)
        {
            DropDownList1.Items.Add(DateTime.Now.AddDays(-i).ToString());
        }

    } 
```

# jquery - 如何确保一个类总是用 jQuery 应用到一个元素上？

> ID：15870935
> 
> 赞同：0
> 
> 时间：2013-04-08T03:47:42.843
> 
> 标签：jquery, css, class

有时当我们使用 jQuery UI 之类的插件时，它会添加一个类并覆盖现有样式。但我想确保我自己的类始终应用于元素。

```
.red {color: red;}
.plugin_style {color: blue;} 
```

```
<p id="foo" class="red">foo</p>
<a href="#" id="doSomething">do something</a> 
```

```
$.fn.doSomething = function() {
    $(this).css("border", "1px solid #f00").addClass("plugin_style");
    return $(this);
};

$("#doSomething").on("click", function() {
    // this adds class "plugin_style"
    // generated source: class="red plugin_style"
    $("#foo").doSomething();

    // remove "red"
    // generated source: class="plugin_style"
    $("#foo").removeClass("red");

    // add "red"
    // generated source: class="plugin_style red"
    $("#foo").addClass("red");
}); 
```

通过删除和添加红色类，红色会在生成的源代码中的所有其他类之后出现，并且应该覆盖在 plugin_style 中定义的样式。但颜色仍然是蓝色的。

有人可以解释一下吗？

**更新**

通过添加`!important`可以始终保持 .red 应用。但是没有它， .red 也应该覆盖 .plugin_style ，因为它紧随其后。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T04:05:59.457

这种风格不太像那样。这是一个特异性问题，并且

```
“定义的最后一条规则会覆盖任何以前的冲突规则。”
```

*[来源](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)*

基本上，无论使用哪种顺序来应用这两种样式，`plugin_style`或者`red`，**最后一个定义**的都是优先的。你可以看到你已经定义`plugin_style`了 last ，因此 style 优先于`red`导致 text to保持`blue`。

如果您要切换它们的顺序，则红色优先（*[demo](http://jsfiddle.net/kJuJe/)*）：

```
.plugin_style {color: blue;}
.red {color: red;} 
```

# django - Django {% url %} 行为异常

> ID：15870948
> 
> 赞同：0
> 
> 时间：2013-04-08T03:49:40.433
> 
> 标签：django

有人可以解释为什么这样做：

```
<li><a href="/index/">HOME</a></li>
<li><a href="/project/">PROJECTS</a></li> 
```

虽然这不是：

```
 <li><a href="{% url projects.views.index %}">HOME</a></li>
 <li><a href="{% url projects.views.project %}">PROJECTS</a></li> 
```

*我在 /index/ No module named project 处*收到 ImportError 的 500 错误，但是我没有尝试在任何地方导入项目。（我正在导入 Project，它已经导入好几天了，当我不使用 {% url %} 样式链接时工作正常）。我在这里看到了许多答案和其他地方的博客文章表明 {% url %} 是个坏主意。如有必要，我很乐意停止使用它们，但对于我的生活，我无法看到错误来自哪里。

urls.py 的内容

```
from django.conf.urls import patterns, include, url
from django.conf import settings

from django.views.static import *

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^index/', 'projects.views.index', name='index'),
    url(r'^login/', 'project.views.login', name='login'),
    url(r'^project/(?P<project_id>\d+)/$', 'projects.views.project', name='project'),
    url(r'^project/', 'projects.views.project', name='project'),

    url(r'^sched/(?P<project_id>\d+)/$', 'projects.views.schedule'),
    url(r'^luminaires/(?P<project_id>\d+)/$', 'projects.views.luminaires'),
    url(r'^luminaire/(?P<project_id>\d+)/(?P<luminaire_id>\d+)/$', 'projects.views.luminaire'),
    url(r'^deleteproject/(?P<project_id>\d+)/$', 'projects.views.deleteproject', name = 'deleteproject'),

    url(r'^admin/', include(admin.site.urls)),
    # Examples:
    # url(r'^$', 'relume.views.home', name='home'),
    # url(r'^relume/', include('relume.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
    (r'^media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT, 'show_indexes':True}),
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T04:55:31.890

查看您的`urls.py`文件后，您似乎在登录的 url 行中有一个拼写错误，您使用`project`的不是`projects`.

# java - 事件处理问题 - Java

> ID：15870949
> 
> 赞同：0
> 
> 时间：2013-04-08T03:49:41.903
> 
> 标签：java, swing, jbutton, actionlistener

我的程序现在遇到了很大的麻烦。我不明白这条错误消息“MyEventA 不是抽象的，并且不会覆盖 java.awt.event.ActionListener 中的抽象方法 actionPerformed(java.awt.event.actionEvent)。” 我曾尝试在网上和教科书中查找，但仍然无法正常工作。

如果有人能帮助我找出我的代码有什么问题，我将不胜感激。我已经为此工作了一个半小时，但仍然没有解决它。：（ 提前致谢！

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class MyEventA extends JFrame implements ActionListener
{
    private JButton plus;
    private JButton minus;
    private JButton reset;
    private JButton quit;

    public MyEventA()
{
    add(new JLabel("Current Value", JLabel.LEFT), BorderLayout.NORTH);
    JTextField jtfCurrent = new JTextField("0");
    add(jtfCurrent, BorderLayout.EAST);
    JPanel jpSouth = new JPanel();
    plus = new JButton("+");
    minus = new JButton("-");
    reset = new JButton("Reset");
    quit = new JButton("Quit");
    ButtonListener b1 = new ButtonListener(jtfCurrent);
    jtfCurrent.addActionListener(b1);
    plus.addActionListener(this);
    minus.addActionListener(this);
    reset.addActionListener(this);
    quit.addActionListener(this);
    jpSouth.add(plus);
    jpSouth.add(minus);
    jpSouth.add(reset);
    jpSouth.add(quit);
    add(jpSouth, BorderLayout.SOUTH);
}

class ButtonListener implements ActionListener {
    private JTextField writeInto;   // text field reference
    private int count = 0;

    public ButtonListener(JTextField tf) {
        writeInto = tf;
        count = 0;
    }

    public void actionPerformed(ActionEvent ae){
        if(ae.getActionCommand().equals("+")){
            count++;
            writeInto.setText("" + count);
        }
        else if(ae.getActionCommand().equals("-")){
            count--;
            writeInto.setText("" + count);
        }
        else if(ae.getActionCommand().equals("Reset")){
            count = 0;
            writeInto.setText("" + count);
        }
        else {
            System.exit(0);    
        }
    }

    public static void main(String[] args){
        MyEventA events = new MyEventA();
        events.setTitle("Part 2 Using getSource");
        events.pack();
        events.setDefaultCloseOperation(EXIT_ON_CLOSE);
        events.setSize(300,100);
        events.setLocation(200,200);
        events.setVisible(true);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T03:52:29.393

一般来说，当一个（非抽象）类`implements`是一个接口时，会制定一个约定，建议这个类将实现接口中提供的所有方法。

你的类`MyEventA` `implements`接口`ActionListener`，它需要一个方法被覆盖（`void actionPerformed(ActionEvent)`）。由于`MyEventA`不是抽象的，编译器告诉您需要在此处实现该方法。

如果您想知道如何实现该方法，那么您在实现的子类 ( `ButtonListener`) 中有一个很好的示例。在这里您可以看到`ButtonListener`实现了相同的接口`ActionListener`，并实现了它的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T04:03:34.597

因为`MyEventA`已经实现`ActionListener`并且因为它不是抽象类，所以它必须`actionPeformed (ActionEvent)`以与您在`ButtonListener`

但是我认为您想要做的实际上是没有`MyEventA`实现`ActionListener`，而是将 a 传递`new ButtonListener ()`给您的按钮，例如

```
plus.addListener (new ButtonListener ()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T03:53:56.363

如果要实现 ActionListener 接口，则必须重写 actionPerformed(java.awt.event.ActionEvent) 方法。如果接口中的方法未被重写，编译器会要求将类声明为抽象类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T04:14:17.433

重写如下，它适用于我：

```
import javax.swing.*;

import java.awt.*;
import java.awt.event.*;

public class MyEventA extends JFrame implements ActionListener {
    private JButton plus;
    private JButton minus;
    private JButton reset;
    private JButton quit;

    public MyEventA() {
        add(new JLabel("Current Value", JLabel.LEFT), BorderLayout.NORTH);
        JTextField jtfCurrent = new JTextField("0");
        add(jtfCurrent, BorderLayout.EAST);
        JPanel jpSouth = new JPanel();
        plus = new JButton("+");
        minus = new JButton("-");
        reset = new JButton("Reset");
        quit = new JButton("Quit");
        ButtonListener b1 = new ButtonListener(jtfCurrent);
        jtfCurrent.addActionListener(b1);
        plus.addActionListener(this);
        minus.addActionListener(this);
        reset.addActionListener(this);
        quit.addActionListener(this);
        jpSouth.add(plus);
        jpSouth.add(minus);
        jpSouth.add(reset);
        jpSouth.add(quit);
        add(jpSouth, BorderLayout.SOUTH);
    }

    class ButtonListener implements ActionListener {
        private JTextField writeInto; // text field reference
        private int count = 0;

        public ButtonListener(JTextField tf) {
            writeInto = tf;
            count = 0;
        }

        public void actionPerformed(ActionEvent ae) {
            if (ae.getActionCommand().equals("+")) {
                count++;
                writeInto.setText("" + count);
            } else if (ae.getActionCommand().equals("-")) {
                count--;
                writeInto.setText("" + count);
            } else if (ae.getActionCommand().equals("Reset")) {
                count = 0;
                writeInto.setText("" + count);
            } else {
                System.exit(0);
            }
        }
    }

    @Override
    public void actionPerformed(ActionEvent e) {// was to be implemented

        javax.swing.JOptionPane.showMessageDialog(null, "clicked");

    }

    public static void main(String[] args) {// main method should be in the outer class
        MyEventA events = new MyEventA();
        events.setTitle("Part 2 Using getSource");
        events.pack();
        events.setDefaultCloseOperation(EXIT_ON_CLOSE);
        events.setSize(300, 100);
        events.setLocation(200, 200);
        events.setVisible(true);
    }

} 
```

如果要使用`actionPerformed`in`ButtonListener`类，请使用以下代码：

```
import javax.swing.*;

import java.awt.*;
import java.awt.event.*;

public class MyEventA extends JFrame implements ActionListener {
    private JButton plus;
    private JButton minus;
    private JButton reset;
    private JButton quit;   

    public MyEventA() {
        add(new JLabel("Current Value", JLabel.LEFT), BorderLayout.NORTH);
        JTextField jtfCurrent = new JTextField("0");
        add(jtfCurrent, BorderLayout.EAST);
        JPanel jpSouth = new JPanel();
        plus = new JButton("+");
        minus = new JButton("-");
        reset = new JButton("Reset");
        quit = new JButton("Quit");     

        ButtonListener b1 = new ButtonListener(jtfCurrent);
        jtfCurrent.addActionListener(b1);
        plus.addActionListener(new ButtonListener(jtfCurrent));
        minus.addActionListener(new ButtonListener(jtfCurrent));
        reset.addActionListener(new ButtonListener(jtfCurrent));
        quit.addActionListener(new ButtonListener(jtfCurrent));
        jpSouth.add(plus);
        jpSouth.add(minus);
        jpSouth.add(reset);
        jpSouth.add(quit);
        add(jpSouth, BorderLayout.SOUTH);
    }

    class ButtonListener implements ActionListener {
        private JTextField writeInto; // text field reference
        private int count = 0;
        public ButtonListener() {

        }
        public ButtonListener(JTextField tf) {
            writeInto = tf;
            count = 0;
        }

        public void actionPerformed(ActionEvent ae) {
            if (ae.getActionCommand().equals("+")) {
                count++;
                writeInto.setText("" + count);
            } else if (ae.getActionCommand().equals("-")) {
                count--;
                writeInto.setText("" + count);
            } else if (ae.getActionCommand().equals("Reset")) {
                count = 0;
                writeInto.setText("" + count);
            } else {
                System.exit(0);
            }
        }

    }

    @Override
    public void actionPerformed(ActionEvent e) {

        javax.swing.JOptionPane.showMessageDialog(null, "clicked");

    }

    public static void main(String[] args) {
        MyEventA events = new MyEventA();
        events.setTitle("Part 2 Using getSource");
        events.pack();
        events.setDefaultCloseOperation(EXIT_ON_CLOSE);
        events.setSize(300, 100);
        events.setLocation(200, 200);
        events.setVisible(true);
    }

} 
```

# xulrunner - xulrunner 应用程序中的自动区域设置检测

> ID：15870951
> 
> 赞同：2
> 
> 时间：2013-04-08T03:49:51.167
> 
> 标签：xulrunner

我有一个具有日语和英语语言环境的 xulrunner 应用程序。使用`-UILocale <locale>`切换语言环境可以正常工作，因此实际语言环境文件或代码没有问题，但在日本计算机上运行该应用程序，它仍然以英语显示。显然[“通常应用程序语言环境是从主机系统的操作系统环境继承的”](https://developer.mozilla.org/en-US/docs/How_to_enable_locale_switching_in_a_XULRunner_application)，但这似乎不会在 Windows 或 OS X 上发生。

`pref("intl.locale.matchOS", "true")`为了确定，我添加了默认值，但仍然没有骰子。我也尝试了几乎所有版本的 xulrunner。

*xulrunner 应该如何*检测系统区域设置，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-02T10:26:35.690

请参考这里

[https://developer.mozilla.org/en-US/docs/Make_your_xulrunner_app_match_the_system_locale](https://developer.mozilla.org/en-US/docs/Make_your_xulrunner_app_match_the_system_locale)

```
from xpcom import components
ps_cls = components.classes["@mozilla.org/preferences-service;1"]
ps = ps_cls.getService(components.interfaces.nsIPrefService)
branch = ps.getBranch("general.useragent.")
branch.setCharPref("locale", lang)

os.environ["LANGUAGE"] = lang 
```

根据语言环境设置语言。

# linux - 使用 ls 仅查找具有扩展名的文件

> ID：15870952
> 
> 赞同：0
> 
> 时间：2013-04-08T03:50:01.183
> 
> 标签：linux, bash, ls

我只需要使用 ls 查找具有扩展名的目录中的文件（不能使用 find）。

我试过 ls *.*，但如果 dir 不包含任何带扩展名的文件，它会返回“没有这样的文件或目录”。

如果有扩展名的文件，我不希望出现该错误并希望 ls 返回到 cmd 提示符。

我试图将 grep 与 ls 一起使用来实现相同的目的。

ls|grep "*.*" - 不起作用，但 ls | grep "\." 作品。

我不知道为什么 grep *.* 不起作用。任何帮助表示赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T04:04:30.637

我认为正确的解决方案是：

```
( shopt -s nullglob ; echo *.* ) 
```

这有点冗长，但无论您拥有什么样的时髦文件名，它都将始终有效。（管道传输的问题`ls`是`grep`典型的系统允许文件名中包含非常奇怪的字符，例如，包括换行符。）

该`shopt -s nullglob`部分启用（“ **s** ets”）`nullglob` **shell** opt选项，它告诉 Bash 如果没有文件名称匹配，则应该删除（即，应该扩展为**空**）而不是单独放置。`*.*``*.*`

括号`(...)`是设置一个子shell，所以这个`nullglob`选项只对脚本的这个小部分启用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-20T19:25:03.740

尝试

```
ls -1 | grep "\." 
```

仅列出具有扩展名的文件，如果没有文件，则不列出任何文件（空列表）：就像您需要的那样。

使用 Linux grep，您可以添加 -v 以获取没有扩展名的文件列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T03:58:33.160

了解 shell 模式和正则表达式之间的区别很重要。Shell 模式稍微简单一些，但灵活性较差。grep 使用正则表达式匹配。贝壳图案，如

```
*.* 
```

将使用正则表达式完成

```
.*\..* 
```

但是 grep 中的正则表达式没有锚定，这意味着它会在行的任何位置搜索匹配项，因此这两个`.*`部分是不必要的。

# meteor - 如何在 python numpy 中使用流星

> ID：15870954
> 
> 赞同：2
> 
> 时间：2013-04-08T03:50:14.380
> 
> 标签：meteor

由于javascript中没有python numpy，pandas的等价物。有没有办法将它们与流星一起使用。numpy 将完成繁重的工程和科学计算，meteor 将完成工程/科学 Web 应用程序所需的所有其他工作。

这是可行的还是只是疯狂的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T07:11:11.953

有趣的问题！

是的，应该可以使用[大量的 npm 模块](https://npmjs.org/)，可以进行科学计算，我知道有一些 matlab 和 mathematica。

如果你习惯了 numPy，你也可以使用 could ！您必须为流星构建一个自定义包。

[在https://github.com/avital/meteor-xml2js-npm-demo](https://github.com/avital/meteor-xml2js-npm-demo)`NPM`有一个使用模块的流星包的好例子。

一个很好的例子是`python`（npm 模块）：[https](https://npmjs.org/package/python) ://npmjs.org/package/python 。它可以让你运行 python 代码并让 node 与之对话。因此，您可以使用 numPy 进行繁重的计算工作，并让流星运行它/与之交谈/获取结果，因为它们正在发生变化。

# java - 为什么 InterruptedException 是已检查异常？

> ID：15870961
> 
> 赞同：6
> 
> 时间：2013-04-08T03:51:27.323
> 
> 标签：java, multithreading, interrupted-exception

当我们制作自己的线程时，这是关于旧 Java 的一个问题。一些方法，例如当它被另一个线程中断时`Thread.sleep(100)`抛出一个。`InterruptedException`现在据我了解，中断意味着另一个线程在说：让我现在接手。

当这种情况发生时，为什么Java要我们处理`InterruptedException`？

程序员甚至不需要关心线程何时相互中断。他应该能够在线程之间分配工作并在完成时收到通知。那么Java要我们处理的原因是什么`InteruptedException`呢？至少应该是`RuntimeException`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T03:57:15.297

> 程序员甚至不需要关心线程何时相互中断

这不是真的。在很多很多情况下，您都想知道有人请求了中断，但是您会忽略它一会儿以完成您正在做的工作。

例如，假设一个线程打开一个文件并开始写入一些数据。然后，该线程阻塞，等待计算其余数据。假设第二个线程试图中断第一个线程。它应该怎么做？简单地死去，也许你最终会得到一个损坏的、不完整的文件？它应该通过删除它开始写入的文件来清理吗？它是否应该忽略中断请求并等待它必须写入的数据结束？它是否应该写一些意思是“我在这里被打断了”，以便它可以在下一次从那个点继续它的工作？

在不同的场景中，假设您有一个 HTTP 服务器。假设用户正在访问您的服务器，并从其中下载一个大文件。您想停止服务器。然后应用程序将尝试中断所有工作线程。他们应该怎么做？只是停止下载？或者他们应该等待用户完成下载他们的文件，然后他们才应该死，而不接受任何更多的请求？这两种情况同样有效。

如您所见，有太多可能的情况，如果我们无法知道已请求中断，那将是可怕的。有时，你只会让线程死掉。有时，您必须清理环境。有时，您希望它完成正在处理的请求，但不再接受任何请求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T03:58:07.657

看来您在*线程调度程序*和中断之间混为一谈。

线程调度程序是一个本地系统，它将来自多个线程的作业划分为进程。如果太多线程处于活动状态，调度程序将异步工作。换句话说*，让我暂时接管*可能是完全正确的。

中断意味着，退出你当前正在做的事情，**不要再回去了**。实现这一点的最实用方法是有一个例外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T04:22:26.267

RuntimeExceptions 应该代表编程错误（请参阅[http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html)）。InterruptedException 更像是来自另一个线程的信号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T04:00:28.757

`InteruptedException`当线程被强制中断时抛出一个。这不是通常的情况（即当线程被调度程序切换出上下文时）。例如，当另一个线程[手动中断它](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#interrupt%28%29)~~或进程接收到`SIGINT`信号~~时。

# apple-push-notifications - 连接到 Apple 推送通知服务器

> ID：15870963
> 
> 赞同：0
> 
> 时间：2013-04-08T03:51:50.457
> 
> 标签：apple-push-notifications

我正在尝试使用我的密钥和证书连接到 Apple 的推送通知服务器

```
openssl s_client -connect gateway.sandbox.push.apple.com:2195 -cert MyApp.pem -key MyApp.pem 
```

我不断收到以下错误。有谁知道可能出了什么问题？

7495:error:20074002:BIOroutines:FILE_CTRL:system lib:/SourceCache/OpenSSL098/OpenSSL098-47/src/crypto/bio/bss_file.c:358: 无法加载客户端证书私钥文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:33:55.067

您可能输入了错误的密码短语。

# python - Windows Python 多播上的错误 10049

> ID：15870966
> 
> 赞同：6
> 
> 时间：2013-04-08T03:52:00.720
> 
> 标签：python, windows, multicast

这是一些用于设置多播接收器的 Python 代码。它在 mac 和 linux 上运行良好。

```
import socket, struct

ADDR='239.239.250.1'
PORT=8001

sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
sock.bind((ADDR, PORT))
mreq = struct.pack("4sl", socket.inet_aton(ADDR), socket.INADDR_ANY)
sock.setsockopt(socket.IPPROTO_IP, socket.IP_ADD_MEMBERSHIP, mreq) 
```

但在 Windows 上运行时在绑定上收到错误 10049。

```
Z:\winx>c:\Python27\python.exe q2.py
Traceback (most recent call last):
  File "q2.py", line 11, in <module>
    sock.bind((ADDR,PORT))
  File "c:\Python27\lib\socket.py", line 224, in meth
    return getattr(self._sock,name)(*args)
socket.error: [Errno 10049] The requested address is not valid in its context 
```

Windows 多播是否存在已知问题？如果不是，我可以采取哪些步骤来诊断？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-13T13:11:53.070

我有同样的问题，从[这里](http://www.nealc.com/blog/blog/2012/09/11/testing/)我了解到您需要绑定到本地主机。 `sock.bind(('', PORT))`为我工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-16T09:50:17.153

我认为您的地址错误，假设您的意思是众所周知的，例如站点本地多播。

根据[http://www.cisco.com/c/dam/en/us/support/docs/ip/ip-multicast/ipmlt_wp.pdf](http://www.cisco.com/c/dam/en/us/support/docs/ip/ip-multicast/ipmlt_wp.pdf)，此地址属于 [可能未使用的] 站点本地扩展。

也许 Windows 会为您验证地址？

# c++ - 提升错误：对“详细信息”的引用不明确

> ID：15870967
> 
> 赞同：1
> 
> 时间：2013-04-08T03:52:00.907
> 
> 标签：c++, boost, c++11, boost-date-time, boost-tuples

我正在用`gcc-4.4.7 --std=c++0x`boost-1.53​​ 中的几个库编译一个大型程序。编译器抱怨 boost 库中的一堆错误（如下），但不是我的代码。这是boost库中的错误吗？我将如何找出问题所在？任何建议表示赞赏！

```
 /usr/bin/g++  -O0 -ggdb -fno-inline  --std=c++0x -pedantic -Wall -fno-strict-aliasing -Wno-non-template-friend -Wno-long-long -Wno-deprecated -m64 -I /home/user1/pkg/boost-64bit  -I/data/home_local/user2/dev/bbb-onForge-trunk/src -I/data/home_local/user2/dev/bbb-onForge-trunk/src/util/containers -I/data/home_local/user2/dev/bbb-onForge-trunk/src/util/misc -I /usr/include      -c -o /data/home_local/user2/dev/bbb-onForge-trunk/obj/Linux/dbg/bbb/trainOne.o /data/home_local/user2/dev/bbb-onForge-trunk/src/bbb/trainOne.cpp
    In file included from /home/user1/pkg/boost-64bit/boost/filesystem/path_traits.hpp:23,
                     from /home/user1/pkg/boost-64bit/boost/filesystem/path.hpp:25,
                     from /home/user1/pkg/boost-64bit/boost/filesystem.hpp:16,
                     from /data/home_local/user2/dev/bbb-onForge-trunk/src/bbb/parameter.hpp:31,
                     from /data/home_local/user2/dev/bbb-onForge-trunk/src/bbb/trainOne.cpp:6:
    /home/user1/pkg/boost-64bit/boost/system/error_code.hpp: In function 'boost::system::error_code& boost::throws()':
    /home/user1/pkg/boost-64bit/boost/system/error_code.hpp:410: error: reference to 'detail' is ambiguous
    /home/user1/pkg/boost-64bit/boost/type_traits/is_reference.hpp:25: error: candidates are: namespace boost::detail { }
    /home/user1/pkg/boost-64bit/boost/tuple/detail/tuple_basic.hpp:51: error:                 namespace boost::tuples::detail { }
    In file included from /home/user1/pkg/boost-64bit/boost/tokenizer.hpp:20,
                     from /home/user1/pkg/boost-64bit/boost/date_time/date_parsing.hpp:15,
                     from /home/user1/pkg/boost-64bit/boost/date_time/gregorian/parsers.hpp:13,
                     from /home/user1/pkg/boost-64bit/boost/date_time/gregorian/gregorian.hpp:34,
                     from /home/user1/pkg/boost-64bit/boost/date_time/posix_time/time_formatters.hpp:12,
                     from /home/user1/pkg/boost-64bit/boost/date_time/posix_time/posix_time.hpp:24,
                     from /data/home_local/user2/dev/bbb-onForge-trunk/src/util/misc/ResourceUsage.hpp:4,
                     from /data/home_local/user2/dev/bbb-onForge-trunk/src/bbb/trainOne.cpp:6:
    /home/user1/pkg/boost-64bit/boost/token_iterator.hpp: At global scope:
    /home/user1/pkg/boost-64bit/boost/token_iterator.hpp:34: error: reference to 'detail' is ambiguous
    /home/user1/pkg/boost-64bit/boost/type_traits/is_reference.hpp:25: error: candidates are: namespace boost::detail { }
    /home/user1/pkg/boost-64bit/boost/tuple/detail/tuple_basic.hpp:51: error:                 namespace boost::tuples::detail { }
    /home/user1/pkg/boost-64bit/boost/token_iterator.hpp:39: error: template argument 3 is invalid
    In file included from /home/user1/pkg/boost-64bit/boost/date_time/gregorian/parsers.hpp:13,
                     from /home/user1/pkg/boost-64bit/boost/date_time/gregorian/gregorian.hpp:34,
                     from /home/user1/pkg/boost-64bit/boost/date_time/posix_time/time_formatters.hpp:12,
                     from /home/user1/pkg/boost-64bit/boost/date_time/posix_time/posix_time.hpp:24,
                     from /data/home_local/user2/dev/bbb-onForge-trunk/src/util/misc/ResourceUsage.hpp:4,
                     from /data/home_local/user2/dev/bbb-onForge-trunk/src/bbb/trainOne.cpp:6:
    /home/user1/pkg/boost-64bit/boost/date_time/date_parsing.hpp: In function 'date_type boost::date_time::parse_date(const std::string&, int)':
    /home/user1/pkg/boost-64bit/boost/date_time/date_parsing.hpp:133: error: no match for 'operator!=' in 'beg != tok.boost::tokenizer<TokenizerFunc, Iterator, Type>::end [with TokenizerFunc = boost::char_separator<char, std::char_traits<char> >, Iterator = __gnu_cxx::__normal_iterator<const char*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, Type = std::basic_string<char, std::char_traits<char>, std::allocator<char> >]()'
    /home/user1/pkg/boost-64bit/boost/tuple/tuple_comparison.hpp:41: note: candidates are: bool boost::tuples::operator!=(const boost::tuples::null_type&, const boost::tuples::null_type&)
    /home/user1/pkg/boost-64bit/boost/blank.hpp:73: note:                 bool boost::operator!=(const boost::blank&, const boost::blank&)
    /home/user1/pkg/boost-64bit/boost/function/function_base.hpp:764: note:                 bool boost::operator!=(boost::detail::function::useless_clear_type*, const boost::function_base&)
    /home/user1/pkg/boost-64bit/boost/function/function_base.hpp:752: note:                 bool boost::operator!=(const boost::function_base&, boost::detail::function::useless_clear_type*)
    /home/user1/pkg/boost-64bit/boost/date_time/date_parsing.hpp:134: error: no match for 'operator++' in '++beg'
    /home/user1/pkg/boost-64bit/boost/date_time/date_parsing.hpp:138: error: no match for 'operator*' in '*beg'
    /home/user1/pkg/boost-64bit/boost/date_time/date_parsing.hpp:143: error: no match for 'operator*' in '*beg'
    /home/user1/pkg/boost-64bit/boost/date_time/date_parsing.hpp:148: error: no match for 'operator*' in '*beg'
    /home/user1/pkg/boost-64bit/boost/date_time/date_parsing.hpp: In function 'date_type boost::date_time::parse_undelimited_date(const std::string&)':
    /home/user1/pkg/boost-64bit/boost/date_time/date_parsing.hpp:178: error: no match for 'operator!=' in 'ti != tok.boost::tokenizer<TokenizerFunc, Iterator, Type>::end [with TokenizerFunc = boost::offset_separator, Iterator = __gnu_cxx::__normal_iterator<const char*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, Type = std::basic_string<char, std::char_traits<char>, std::allocator<char> >]()'
    /home/user1/pkg/boost-64bit/boost/tuple/tuple_comparison.hpp:41: note: candidates are: bool boost::tuples::operator!=(const boost::tuples::null_type&, const boost::tuples::null_type&)
    /home/user1/pkg/boost-64bit/boost/blank.hpp:73: note:                 bool boost::operator!=(const boost::blank&, const boost::blank&)
    /home/user1/pkg/boost-64bit/boost/function/function_base.hpp:764: note:                 bool boost::operator!=(boost::detail::function::useless_clear_type*, const boost::function_base&)
    /home/user1/pkg/boost-64bit/boost/function/function_base.hpp:752: note:                 bool boost::operator!=(const boost::function_base&, boost::detail::function::useless_clear_type*)
    /home/user1/pkg/boost-64bit/boost/date_time/date_parsing.hpp:178: error: no match for 'operator++' in '++ti'
    /home/user1/pkg/boost-64bit/boost/date_time/date_parsing.hpp:179: error: no match for 'operator*' in '*ti'
    In file included from /home/user1/pkg/boost-64bit/boost/date_time/posix_time/time_formatters.hpp:19,
                     from /home/user1/pkg/boost-64bit/boost/date_time/posix_time/posix_time.hpp:24,
                     from /data/home_local/user2/dev/bbb-onForge-trunk/src/util/misc/ResourceUsage.hpp:4,
                     from /data/home_local/user2/dev/bbb-onForge-trunk/src/bbb/trainOne.cpp:6:
    /home/user1/pkg/boost-64bit/boost/date_time/time_parsing.hpp: In function 'time_duration boost::date_time::parse_undelimited_time_duration(const std::string&)':
    /home/user1/pkg/boost-64bit/boost/date_time/time_parsing.hpp:228: error: no match for 'operator!=' in 'ti != tok.boost::tokenizer<TokenizerFunc, Iterator, Type>::end [with TokenizerFunc = boost::offset_separator, Iterator = __gnu_cxx::__normal_iterator<const char*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, Type = std::basic_string<char, std::char_traits<char>, std::allocator<char> >]()'
    /home/user1/pkg/boost-64bit/boost/tuple/tuple_comparison.hpp:41: note: candidates are: bool boost::tuples::operator!=(const boost::tuples::null_type&, const boost::tuples::null_type&)
    /home/user1/pkg/boost-64bit/boost/blank.hpp:73: note:                 bool boost::operator!=(const boost::blank&, const boost::blank&)
    /home/user1/pkg/boost-64bit/boost/function/function_base.hpp:764: note:                 bool boost::operator!=(boost::detail::function::useless_clear_type*, const boost::function_base&)
    /home/user1/pkg/boost-64bit/boost/function/function_base.hpp:752: note:                 bool boost::operator!=(const boost::function_base&, boost::detail::function::useless_clear_type*)
    /home/user1/pkg/boost-64bit/boost/date_time/time_parsing.hpp:228: error: no match for 'operator++' in '++ti'
    /home/user1/pkg/boost-64bit/boost/date_time/time_parsing.hpp:232: error: no match for 'operator*' in '*ti'
    /home/user1/pkg/boost-64bit/boost/date_time/time_parsing.hpp:237: error: no match for 'operator*' in '*ti'
    /home/user1/pkg/boost-64bit/boost/date_time/time_parsing.hpp:242: error: no match for 'operator*' in '*ti'
    /home/user1/pkg/boost-64bit/boost/date_time/time_parsing.hpp:247: error: base operand of '->' has non-pointer type 'boost::date_time::parse_undelimited_time_duration(const std::string&)::tokenizer_iterator'
    In file included from /home/user1/pkg/boost-64bit/boost/date_time/gregorian/parsers.hpp:13,
                     from /home/user1/pkg/boost-64bit/boost/date_time/gregorian/gregorian.hpp:34,
                     from /home/user1/pkg/boost-64bit/boost/date_time/posix_time/time_formatters.hpp:12,
                     from /home/user1/pkg/boost-64bit/boost/date_time/posix_time/posix_time.hpp:24,
                     from /data/home_local/user2/dev/bbb-onForge-trunk/src/util/misc/ResourceUsage.hpp:4,
                     from /data/home_local/user2/dev/bbb-onForge-trunk/src/bbb/trainOne.cpp:6:
    /home/user1/pkg/boost-64bit/boost/date_time/date_parsing.hpp: In function 'boost::date_time::period<date_type, typename date_type::duration_type> boost::date_time::from_simple_string_type(const std::basic_string<charT, std::char_traits<_CharT>, std::allocator<_T2> >&) [with date_type = boost::gregorian::date, charT = char]':
    /home/user1/pkg/boost-64bit/boost/date_time/gregorian/parsers.hpp:79:   instantiated from here
    /home/user1/pkg/boost-64bit/boost/date_time/date_parsing.hpp:299: error: no match for 'operator*' in '*tok_it'
    /home/user1/pkg/boost-64bit/boost/date_time/gregorian/parsers.hpp:79:   instantiated from here
    /home/user1/pkg/boost-64bit/boost/date_time/date_parsing.hpp:305: error: no match for 'operator++' in '++tok_it'
    /home/user1/pkg/boost-64bit/boost/date_time/date_parsing.hpp: In function 'boost::date_time::period<date_type, typename date_type::duration_type> boost::date_time::from_simple_string_type(const std::basic_string<charT, std::char_traits<_CharT>, std::allocator<_T2> >&) [with date_type = boost::gregorian::date, charT = wchar_t]':
    /home/user1/pkg/boost-64bit/boost/date_time/gregorian/parsers.hpp:84:   instantiated from here
    /home/user1/pkg/boost-64bit/boost/date_time/date_parsing.hpp:299: error: no match for 'operator*' in '*tok_it'
    /home/user1/pkg/boost-64bit/boost/date_time/gregorian/parsers.hpp:84:   instantiated from here
    /home/user1/pkg/boost-64bit/boost/date_time/date_parsing.hpp:305: error: no match for 'operator++' in '++tok_it'
    In file included from /home/user1/pkg/boost-64bit/boost/date_time/posix_time/time_formatters.hpp:19,
                     from /home/user1/pkg/boost-64bit/boost/date_time/posix_time/posix_time.hpp:24,
                     from /data/home_local/user2/dev/bbb-onForge-trunk/src/util/misc/ResourceUsage.hpp:4,
                     from /data/home_local/user2/dev/bbb-onForge-trunk/src/bbb/trainOne.cpp:6:
    /home/user1/pkg/boost-64bit/boost/date_time/time_parsing.hpp: In function 'time_duration boost::date_time::str_from_delimited_time_duration(const std::basic_string<charT, std::char_traits<_CharT>, std::allocator<_T2> >&) [with time_duration = boost::posix_time::time_duration, char_type = char]':
    /home/user1/pkg/boost-64bit/boost/date_time/time_parsing.hpp:146:   instantiated from 'time_duration boost::date_time::parse_delimited_time_duration(const std::string&) [with time_duration = boost::posix_time::time_duration]'
    /home/user1/pkg/boost-64bit/boost/date_time/posix_time/time_parsers.hpp:27:   instantiated from here
    /home/user1/pkg/boost-64bit/boost/date_time/time_parsing.hpp:68: error: no match for 'operator!=' in 'beg != boost::tokenizer<TokenizerFunc, Iterator, Type>::end() const [with TokenizerFunc = boost::char_separator<char, std::char_traits<char> >, Iterator = __gnu_cxx::__normal_iterator<const char*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, Type = std::basic_string<char, std::char_traits<char>, std::allocator<char> >]()'
    /home/user1/pkg/boost-64bit/boost/tuple/tuple_comparison.hpp:41: note: candidates are: bool boost::tuples::operator!=(const boost::tuples::null_type&, const boost::tuples::null_type&)
    /home/user1/pkg/boost-64bit/boost/blank.hpp:73: note:                 bool boost::operator!=(const boost::blank&, const boost::blank&)
    /home/user1/pkg/boost-64bit/boost/function/function_base.hpp:764: note:                 bool boost::operator!=(boost::detail::function::useless_clear_type*, const boost::function_base&)
    /home/user1/pkg/boost-64bit/boost/function/function_base.hpp:752: note:                 bool boost::operator!=(const boost::function_base&, boost::detail::function::useless_clear_type*)
    /home/user1/pkg/boost-64bit/boost/date_time/time_parsing.hpp:68: error: no match for 'operator++' in '++beg'
    /home/user1/pkg/boost-64bit/boost/date_time/time_parsing.hpp:71: error: no match for 'operator*' in '*beg'
    /home/user1/pkg/boost-64bit/boost/date_time/time_parsing.hpp:75: error: no match for 'operator*' in '*beg'
    /home/user1/pkg/boost-64bit/boost/date_time/time_parsing.hpp:79: error: no match for 'operator*' in '*beg'
    /home/user1/pkg/boost-64bit/boost/date_time/time_parsing.hpp:83: error: base operand of '->' has non-pointer type 'boost::date_time::str_from_delimited_time_duration(const std::basic_string<charT, std::char_traits<_CharT>, std::allocator<_T2> >&) [with time_duration = boost::posix_time::time_duration, char_type = char]::tokenizer_iterator'
    /home/user1/pkg/boost-64bit/boost/date_time/time_parsing.hpp:104: error: base operand of '->' has non-pointer type 'boost::date_time::str_from_delimited_time_duration(const std::basic_string<charT, std::char_traits<_CharT>, std::allocator<_T2> >&) [with time_duration = boost::posix_time::time_duration, char_type = char]::tokenizer_iterator'
    /home/user1/pkg/boost-64bit/boost/date_time/time_parsing.hpp:107: error: no match for 'operator*' in '*beg' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T04:16:27.427

您是否在代码中执行以下操作？

`using namespace boost;
using namespace boost::tuples;`

如果是这样，编译器无法从以下文件中判断使用哪个**细节。**

**/home/user1/pkg/boost-64bit/boost/type_traits/is_reference.hpp**
**/home/user1/pkg/boost-64bit/boost/tuple/detail/tuple_basic.hpp**

# c# - 如何使用 AJAX 动态创建文本框并将其添加到占位符？

> ID：15870973
> 
> 赞同：2
> 
> 时间：2013-04-08T03:53:06.140
> 
> 标签：c#, asp.net

我正在尝试动态创建文本框。所以我通过 AJAX 函数调用它。

这是我的代码：

**阿贾克斯函数**

```
function ChangedAdults(noofAdults) {
    alert(noofAdults.value);
    $.ajax({

        type: 'POST',
        dataType: 'json',
        url: "/FlightBooking.aspx/Adults",

        data: "{noOfAdults:'" + noofAdults.value +  "'}",
        contentType: "application/json; charset=utf-8",
        success: function (result) {
                     $("#AdultsList").html(result.d);
                 },
        error: function (xhr, ajaxOptions, thrownError) {
                   alert(xhr.status);
                   alert(thrownError);
               }
    });
} 
```

**后面的代码**

```
[WebMethod]
public static string Adults(int noOfAdults)
{
    FlightBooking obj = new FlightBooking();
    obj.CreateAdultsList(noOfAdults);          

    string test= "";
    return test.ToString();
}
private void CreateAdultsList(int noOfAdults)
{
    int n = noOfAdults;
    for (int i = 0; i < n; i++)
    {
        TextBox MyTextBox = new TextBox();                      
        MyTextBox.ID = "tb" + "" + i;    
        AdultsListPlaceholder.Controls.Add(MyTextBox); //error coming here
        AdultsListPlaceholder.Controls.Add(new LiteralControl("<br />"));
    }
} 
```

但我收到一个错误：

> 你调用的对象是空的

什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T05:08:53.000

您不能使用 JQuery AJAX 向页面动态添加控件。请充分了解asp.net页面[生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)

简而言之，这就是 asp.net 页面的工作方式。

1.  浏览器向服务器发送请求。IE`http://localhost/test.aspx`
2.  服务器为页面类创建一个对象。在这种情况下，类是`Test`
3.  该对象呈现页面。这意味着它将`Controls`of转换为`test.aspx`浏览器可以理解的 HTML。
4.  服务器将呈现的 HTML 发送回浏览器并销毁该对象。
5.  浏览器显示页面。

所以服务器每次收到页面请求时都会创建一个新对象。

`WebMethods`但是，当使用 AJAX进行调用时，不会创建页面对象。这就是为什么`Webmethods`必须是静态的。

我可以看到您正在尝试自己创建一个对象并将动态控件添加到该对象。但这个对象与浏览器中显示的内容无关。因此，向该对象添加控件不会改变浏览器中显示的任何内容。为此，您必须将整个页面发回。如果你返回你创建的对象的渲染输出`Response.Write`，那将返回整个页面的 HTML 版本。这基本上与a相同`PostBack`

但是，您可以使用 UpdatePanel 实现基于 AJAX 的动态控件呈现。以下是一种方法

**ASPX 页面**

```
<form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:PlaceHolder ID="PlaceHolder1" runat="server"></asp:PlaceHolder>
             <asp:Button ID="btnCreate" runat="server" Text="Create" OnClick="btnCreate_Click" />
        </ContentTemplate>            
    </asp:UpdatePanel>
    <asp:Button ID="btnRead" runat="server" Text="Read" OnClick="btnRead_Click" />
    <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
</form> 
```

**代码背后**

```
protected int NumberOfControls
{
    get { return Convert.ToInt32(Session["noCon"]); }
    set { Session["noCon"] = value.ToString(); }
}

private void Page_Init(object sender, System.EventArgs e)
{
    if (!Page.IsPostBack)
        //Initiate the counter of dynamically added controls
        this.NumberOfControls = 0;
    else
        //Controls must be repeatedly be created on postback
        this.createControls();
}
private void Page_Load(object sender, System.EventArgs e)
{

}

protected void btnCreate_Click(object sender, EventArgs e)
{
    TextBox tbx = new TextBox();
    tbx.ID = "txtData"+NumberOfControls;
    NumberOfControls++;

    PlaceHolder1.Controls.Add(tbx);
}
protected void btnRead_Click(object sender, EventArgs e)
{
    int count = this.NumberOfControls;

    for (int i = 0; i < count; i++)
    {
        TextBox tx = (TextBox)PlaceHolder1.FindControl("txtData" + i.ToString());
        //Add the Controls to the container of your choice
        Label1.Text += tx.Text + ",";
    }
}

private void createControls()
{
    int count = this.NumberOfControls;

    for (int i = 0; i < count; i++)
    {
        TextBox tx = new TextBox();
        tx.ID = "txtData" + i.ToString();
        //Add the Controls to the container of your choice
        PlaceHolder1.Controls.Add(tx);
    }
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:07:16.430

`AdultsListPlaceholder`为 null，您需要重写其 onload 函数来创建该控件的子控件。例如

```
protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);
       CreateAdultsList(5);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T04:08:44.460

在 asp.net 中，您不能从 jQuery 或 java-script 创建服务器控件。
虽然你可以从 jQuery 调用 web-method，但是你不能从 web 方法中添加任何控件。
更多细节
[用 jQuery 添加新的 ASP.NET 服务器控件？](https://stackoverflow.com/questions/6514835/add-new-asp-net-server-controls-with-jquery)

它创建的一个想法`textbox`是创建 html`textbox`

```
<input type="text" id="text1" ></input> 
```

并通过 jQuery ajax 发布您的值进行操作。

## 编辑 1

另一种方法是在页面加载时创建所有控件（如果您知道最大数量）
最初隐藏它们
在按钮单击时一个一个显示
并在回发后在服务器上获取值。

示例：
[使用 jQuery 向 asp.net 文本框控件添加文本](https://stackoverflow.com/questions/8081469/add-text-to-an-asp-net-textbox-control-with-jquery)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T04:11:28.607

你正在混合你的范式。你希望这段代码做什么？您可以呈现控件以响应 AJAX 调用，但您必须手动将处理后的 HTML 插入 DOM。

1.  使用 AJAX 调用服务器
2.  [实例化一个虚拟页面容器](http://weblogs.asp.net/srkirkland/archive/2007/11/05/dynamically-render-a-web-user-control.aspx)
3.  渲染服务器控制
4.  返回标记
5.  插入 DOM

或者，您可以通过完整回发或异步回发（例如 ）添加新控件以响应服务器事件`UpdatePanel`。

# ios6 - 服务器如何响应设备更新通行证的 GET 请求

> ID：15870976
> 
> 赞同：0
> 
> 时间：2013-04-08T03:53:36.200
> 
> 标签：ios6, passbook, getresponse

为了获取 Pass 的最新版本，GET 请求到 webServiceURL/version/passes/passTypeIdentifier/serialNumber。什么服务器响应这个请求？这是我使用的代码：
`if (strtoupper($_SERVER['REQUEST_METHOD']) === "GET" && $request[3]==='passes'){ $passTypeID = $request[4]; $serial = $request[5]; $auth_key = str_replace('ApplePass ', '', $headers['Authorization']); }`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:13:04.843

来自[Apple 文档](https://developer.apple.com/library/ios/#documentation/PassKit/Reference/PassKit_WebService/WebService.html#//apple_ref/doc/uid/TP40011988)。

> *   如果请求被授权，则返回 HTTP 状态 200 以及传递数据的有效负载。
> *   如果请求未授权，则返回 HTTP 状态 401。
> *   否则，返回适当的标准 HTTP 状态。

“*通行证数据的有效载荷”*是指 .pkpass 包。

# android - 如何修复android中的webview错误？

> ID：15870977
> 
> 赞同：-1
> 
> 时间：2013-04-08T03:53:52.630
> 
> 标签：android, android-webview

我正在尝试创建一个简单的 Android 应用程序，它只是一个 webview。我一直在关注一个教程（[http://www.mkyong.com/android/android-webview-example/](http://www.mkyong.com/android/android-webview-example/)），但已经将它调整为只有一个 webview 而不是一个打开 webview 的按钮。

当我包含代码时，我在“webview 无法解析或不是字段”的行上收到错误消息。关于如何排除故障的任何想法？完整代码如下：

出现线路的错误：

```
 setContentView(R.layout.webview); 
```

MainActivity.java：

包 com.example.myfirstapp;

```
import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebView;

public class MainActivity extends Activity {

    private WebView webView;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.webview);

        webView = (WebView) findViewById(R.id.webView1);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.loadUrl("http://www.google.com");

    }

} 
```

活动主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<WebView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/webView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:01:06.027

更改`setContentView(R.layout.webview)`为`setContentView(R.layout.actvity_main)`，或将您的 xml 文件重命名为`webview.xml`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T04:46:45.940

您可以使用 xml 或以编程方式执行以下操作

```
public class MainActivity extends Activity {

private WebView webView;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main); //should be activity_main

    webView = (WebView) findViewById(R.id.webView1);//find id of the view defined in activity_main
    webView.getSettings().setJavaScriptEnabled(true);
    webView.loadUrl("http://www.google.com");

}
}

                      OR

public class MainActivity extends Activity {

private WebView webView;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    webView = new WebView(MainActivity.this);// webview in mainactivity
    setContentView(webView);// set the webview as the layout 
    webView.getSettings().setJavaScriptEnabled(true);
    webView.loadUrl("http://www.google.com");

}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T04:19:40.540

如果您按照您所说的示例进行操作，则在 android 清单文件中删除 android:theme="@android:style/Theme.NoTitleBar" /> 并尝试运行它。

# mysql - MYSQL 从 3 个具有 id 数组的表中选择结果

> ID：15870979
> 
> 赞同：0
> 
> 时间：2013-04-08T03:54:02.030
> 
> 标签：mysql

好的，所以我有 3 个需要从中提取数据的 mysql 表。任何与连接有关的事情都会让我陷入困境！

表 1 = 产品（productid、名称）

表 2 = 类别（类别 ID、名称）

表 3 = categoryproduct(categoryid, productid) - 我的连接表

我有一系列产品 ID，我需要随机选择与这些产品属于同一类别的产品。

这个想法是查询的结果将在我的购物车中显示客户可能喜欢的类似/相关产品的部分

所以像

```
SELECT name etc FROM table1
WHERE table2.categoryid of results of the query = table3.categoryid of current products
ORDER BY RAND()
LIMIT 3 
```

我怎么写？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:32:44.713

假设您使用的是 PHP，以下方法将从数据库中获取 10 个相关产品。

```
$productids = array(1002,789,999,203,321);

$sql = '
    SELECT * FROM 
    products p JOIN categoryproduct pc
        ON p.productid = pc.productid
    WHERE pc.categoryid IN(
        SELECT DISTINCT(categoryid) FROM 
        products inner_p JOIN categoryproduct inner_pc
            ON inner_p.productid = inner_pc.productid
        WHERE inner_p.productid IN('.implode(',',$productids).')
    )
    ORDER BY RAND()
    LIMIT 10'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:02:53.100

如果我正确理解了您的问题，那么此查询可能会有所帮助。在这里，您可以使用逗号分隔的字符串代替子查询，其中包含用户选择的不同产品的类别 ID。

```
 select p.name
    from products p,categoryproduct cp
    where p.productid=cp.productid
    and cp.categorid in(
    select categoryid 
    from cartitems)
    order by RAND() 
```

# messaging - EAI - 消息桥与消息翻译器

> ID：15870980
> 
> 赞同：1
> 
> 时间：2013-04-08T03:54:12.270
> 
> 标签：messaging, spring-integration, eai, enterprise-integration

我一直在阅读 Spring Integration 和 Enterprise Integration Patterns。

我被困在消息桥模式： http: [//enterpriseintegrationpatterns.com/MessagingBridge.html](http://enterpriseintegrationpatterns.com/MessagingBridge.html) [http://static.springsource.org/spring-integration/docs/2.0.0.M3/spring-integration-reference/html /bridge.html](http://static.springsource.org/spring-integration/docs/2.0.0.M3/spring-integration-reference/html/bridge.html)

在消息处理方面，消息传递桥和消息转换器有什么区别？难道它们都不能让两个需要不同格式的实体一起工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:56:22.417

从纯粹的 EIP 角度来看，翻译器用于在系统内转换消息，而桥梁可能包括不同系统之间的转换。

在 Spring Integration 中，`<bridge/>`实现只是用作通道之间的无操作组件。

例如，您可能有一个以通道开头的公共子流——假设只有少数组件最终形成一个出站适配器（例如 FTP）。您可能希望在多个应用程序中重用该子流程 - 您可以将其打包在一个 jar 中并记录其开头，例如`toFTPChannel`. 现在，可能想要使用此“组件”的其他应用程序可以简单地`<bridge/>`将其输出通道转换为`toFTPChannel`.

桥接器仅允许您将两个通道相互连接。

另一个用例是在单元/集成测试中——例如，您可以将应用程序的最终通道桥接到 a `QueueChannel`，以便测试可以使用输出消息并验证其内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-23T03:37:55.670

消息桥是连接两种不同类型的消息系统。前任。您组织的主要消息传递系统是您的大多数应用程序用来进行通信的 Tibco EMS。但是现在您的许多应用程序还需要一个特殊的消息提要，该提要只能从 IBM-MQ 获得。因此，将 MQ 提要桥接/复制到 EMS 主题是有意义的，这样用于与 EMS 对话的应用程序现在可以轻松地使用来自桥接 EMS 主题而不是 MQ 的消息。

消息转换器主要是同一消息系统中的数据格式映射器。它侧重于切换数据格式（例如，从 XML 到 JSon），而不是消息传输（例如，从 MQ 到 EMS）。

# android - 无法导入 google-play-services_lib，因为项目名称正在使用中

> ID：15870989
> 
> 赞同：1
> 
> 时间：2013-04-08T03:55:04.037
> 
> 标签：android, google-maps

我已经完成了一个显示参考本教程的谷歌地图的应用程序

[http://www.vogella.com/articles/AndroidGoogleMaps/article.html](http://www.vogella.com/articles/AndroidGoogleMaps/article.html)

该应用程序运行良好，它显示了一个谷歌地图，如教程中所示。但是现在，当我打开项目时，它显示了几个与导入**com.google**包有关的错误。我已经添加了`google_play_services_lib`. 但是现在，应用程序中没有显示。当我尝试再次导入 google_play_services_lib 时，出现此错误，

> “无法导入 google-play-services_lib，因为项目名称正在使用中”

问题是什么？请帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T04:07:29.567

如果您的工作区中存在同名的项目或文件夹，通常会发生这种情况。

一般来说，您可以通过使用“F2”快捷键更改现有文件夹的名称来解决它。但是，由于这是一个库，我建议您将现有文件夹“google_play_services_lib”从工作区目录转移到其他地方，然后再次尝试导入“google_play_services_lib”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T04:06:47.897

这意味着它`google-playservices.lib`正在被另一个项目使用，您可以通过它来解决它。

*   从正在使用它的项目中删除对它的引用。

*   或使用 eclipse->右键单击->关闭关闭该项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-08T23:13:45.330

从您的工作区中删除此项目，然后从您的 sdk 位置导入。[http://developer.android.com/google/play-services/setup.html#Install]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-18T22:17:53.757

似乎当您导入 google-play-services_lib 时，Eclipse 会创建一个同名的项目。即使我从工作区文件夹中手动删除了 google-play-services_lib 文件夹，我也必须在 Eclipse 中删除 google-play-services_lib 项目。完成后，我能够导入库，然后在我的项目中使用它。

# c# - 在 Windows 8 应用程序上显示 KPI

> ID：15870998
> 
> 赞同：0
> 
> 时间：2013-04-08T03:56:20.670
> 
> 标签：c#, sql-server, sql-server-2008, ssas

我想将 SQL Server 分析服务中的 KPI 显示到 Windows 应用程序。

我没有使用 SSAS 的经验。基本上我在问如何在任何外部应用程序中显示 BI KPI

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:58:34.053

我对 SSAS KPI 知之甚少，但似乎（至少）有两种选择：

*   KPI[直接](http://msdn.microsoft.com/en-us/library/microsoft.analysisservices.adomdclient.kpi%28v=sql.100%29.aspx)通过 ADOMD.NET 提供程序公开

*   可以[使用 MDX 查询它们](http://www.infotoad.com/blog/post/2012/12/16/Creating-a-simple-Key-Performance-Indicator-%28KPI%29-using-SQL-Server-Analysis-Services-%28SSAS%29-2012.aspx)

因此，您只需要编写一个可以发出 MDX 查询和/或使用 ADOMD.NET 提供程序的应用程序。