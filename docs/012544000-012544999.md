# StackOverflow 问答 12544000-12544999

# android - 将 textView 添加到 RadioGroup 时出错

> ID：12544003
> 
> 赞同：0
> 
> 时间：2012-09-22T13:03:01.763
> 
> 标签：android, radio-group

我会马上进入正题，这是我的代码：

```
 RadioButton[] rb=new RadioButton[n*3];

           RadioGroup[] rg=new RadioGroup[n];
           for(int i=0;i<n;i++)
           {
               rg[i] = new RadioGroup(MainActivity.this);
               rg[i].setOrientation(RadioGroup.HORIZONTAL);
               rg[i].setId(i);
               //rg[i].addView(textView); doesn't work with this
               for(int j=0;j<3;j++)
               {
                   rb[i*3+j]=new RadioButton(MainActivity.this);
                   rb[i*3+j].setId(i*3+j);
                   rb[i*3+j].setText("something");
                   rg[i].addView(rb[i*3+j]);
               }
               myLayout.addView(rg[i]);
           } 
```

没有这条线，代码可以正常工作`rg[i].addView(textView);`，但是当我把这条线放在应用程序力关闭时......有什么问题？我怎样才能把这个 textview 放到这个组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:29:00.310

我认为您的 textView 在您尝试添加它时为空。您能否提供完整的 logcat 跟踪。

# .net - 生成唯一 ID（检查与否）？

> ID：12544006
> 
> 赞同：2
> 
> 时间：2012-09-22T13:03:31.453
> 
> 标签：.net, performance, architecture

考虑 youtube 视频网址（例如）：

例如：

```
http://www.youtube.com/watch?v=-JVkaMqD5mI&feature=related 
```

我说的是`-JVkaMqD5mI`部分。（长度=11）

让我们计算选项：

```
a-z = 26     |
A-Z = 26     |_______ >    26+26+10+2 = 64 optional chars in 11 places  = 64^11 = 73786976294838206464
0-9 = 10     |
-_ = 2       | 
```

我仍然想知道，当他们为新视频生成新 ID 时，他们是否仍然检查是否*已经存在*？

我确定他们有一些“*已经生成的ID* ”的列表（数据库或缓存）......（如果他们这样做，他们每次都获取数据库吗？还是在缓存中？还是......？）

或者他们是否依赖于`1.355252...e-20`几乎`0`.( 但仍然 !=0)的机会

这种情况的最佳实践解决方案是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T13:25:42.700

好吧，仅仅因为他们在视频上使用字母数字 ID，并不意味着他们只是随机生成这些字符。仅仅因为该字符串对您来说看起来像是随机垃圾，我向您保证它不是随机的，并且其中隐藏了很多信息。

这么快的回答：不，生成一个随机的字母序列是不可行的，然后要么a）希望没有冲突，要么b）检查可能数十亿的记录，看看你是否已经有了。

更容易保持一个中央“使用的最后一个 ID”，并有一个算法从“使用的最后一个 ID”移动到“下一个要使用的 ID”，以数学上保证生成以前未使用的 ID 的方式。对于顺序 ID 编号，公式只是**f(n+1) = f(n)+1** （例如，最后使用的 ID 是 150，下一个将是 151.. 保证到目前为止未使用），但您可以设计您的自己的公式，以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T13:11:04.840

出于这些目的，通常使用称为散列函数的东西。它从一些其他数据创建固定长度的数据或字符串，这些数据可以是任何给定的长度或类型。它为此使用了一些算法。一个例子是你给出的那个，将字母编码为数字。

散列函数并不像看起来那么简单。它们背后可能有一种严肃的数学方法，您可以尝试证明它们是完美的或最小完美的（这对于这个例子并不重要）。

完美函数是一个散列函数，它不能为任何两个不同的输入生成相同的输出。如果您有这种散列函数，则不必检查重复项。如果你想这样做，你必须证明你的哈希函数是完美的。

# ios - iOS 6 在dismissModalViewController 后恢复方向

> ID：12544008
> 
> 赞同：3
> 
> 时间：2012-09-22T13:03:35.210
> 
> 标签：ios, ios6

我有一个`UITabBarViewController`纵向模式，我按`modalViewController`横向模式。当我推动模式时，旋转变为横向，但是当我关闭它时，方向保持在横向而不是恢复为纵向。

代码：

a`CustomUINavigationController`用于横向模式：

```
- (BOOL)shouldAutorotate
{
  return [[self.viewControllers lastObject] shouldAutorotate];
}

- (NSUInteger)supportedInterfaceOrientations
{
  return [[self.viewControllers lastObject] supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
  return [[self.viewControllers lastObject] preferredInterfaceOrientationForPresentation];
} 
```

uitabbar 控制器

```
- (BOOL)shouldAutorotate
{
  if ([self inModal]) {
    UINavigationController *nav = (UINavigationController *)self.modalViewController;
    return [[nav.viewControllers lastObject] shouldAutorotate];
  } else {
    return NO;
  }
}

-(NSUInteger)supportedInterfaceOrientations
{
  if ([self inModal]) {
    UINavigationController *nav = (UINavigationController *)self.modalViewController;
    return [[nav.viewControllers lastObject] supportedInterfaceOrientations];
  } else {
    return UIInterfaceOrientationPortrait;
  }    
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
  if ([self inModal]) {
    UINavigationController *nav = (UINavigationController *)self.modalViewController;
    return [[nav.viewControllers lastObject] preferredInterfaceOrientationForPresentation];
  } else {
    return UIInterfaceOrientationPortrait;
  }
}

- (BOOL)inModal
{
  if (self.modalViewController && [self.modalViewController isKindOfClass:[UINavigationController class]]) {
    return YES;
  } else {
    return NO;
  }    
} 
```

如果我将 shouldRotate 设置为 YES，我会收到错误消息：* 由于未捕获的异常“UIApplicationInvalidInterfaceOrientation”而终止应用程序，原因：“支持的方向与应用程序没有共同方向，并且 shouldAutorotate 返回 YES。即使我在 UISupportedDeviceOrientations 中设置了两个方向。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T18:58:50.013

我认为您的问题是由这一行引起的（您的代码中有两次）：

```
return UIInterfaceOrientationPortrait; 
```

我目前正在尝试做某事。类似于您尝试实现的目标，并在这里提出了我的问题：[iOS 6 auto rotation issue - supportedInterfaceOrientations return value not respected](https://stackoverflow.com/questions/12553754/ios-6-auto-rotation-issue-supportedinterfaceorientations-return-value-not-resp)

您的代码的问题在于这两种方法不返回接口方向，而是在其位中编码允许或首选方向的组合的掩码。

试试这个：

```
return UIInterfaceOrientationMaskPortrait; 
```

`UIInterfaceOrientationPortrait`据我所知，它被映射到 0，因此被解释为空的界面方向集（无）。

# css - 如何使用 CSS 在选择/选项列表框中垂直居中文本

> ID：12544013
> 
> 赞同：0
> 
> 时间：2012-09-22T13:03:55.333
> 
> 标签：css, forms, html

当我在选择列表框中设置选项的高度时，默认情况下选项中的文本顶部对齐。我怎样才能使它在中间对齐？（我尝试了明显的垂直对齐和行高，没有用）

测试：http: [//jsfiddle.net/uWszr/](http://jsfiddle.net/uWszr/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:31:16.400

```
select {
    width: 128px; height:150px;
    padding-top:6%;
}

option {
    height: 32px;
} 
```

选择的高度，选择的顶部填充 - 应该根据所有选项元素的整体高度计算。我认为为了通用性应该在 jQuery 上制作一个计算脚本并替换适当的值。至少意味着我看不到 css 通用解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T13:26:34.630

使用 padding for select 来对齐选项中的文本。

```
select {
width: 128px;
padding:10px 0;
} 
```

这不是将文本居中对齐的最佳解决方案。但它作为临时解决方案很有用。

# iphone - MKMapView 中的缩放级别

> ID：12544015
> 
> 赞同：3
> 
> 时间：2012-09-22T13:04:03.667
> 
> 标签：iphone, objective-c, ios, mapkit

我正在使用地图。我有个问题。我使用以下代码从 [stackOverFlow 中此链接的引用中缩放](https://stackoverflow.com/questions/2473706/how-do-i-zoom-an-mkmapview-to-the-users-current-location-without-cllocationmanag)

缩放地图很容易。
但是现在，我无法放大和缩小地图。这意味着我不能改变或找到另一个地方。它只关注当前位置。它的行为就像图像修复一样。我不明白该怎么办？请帮忙。我的代码如下。

```
- (void) viewDidLoad
{
[self.mapView.userLocation addObserver:self 
                            forKeyPath:@"location" 
                               options:(NSKeyValueObservingOptionNew|NSKeyValueObservingOptionOld) 
                               context:nil];
}

-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context 
{
MKCoordinateRegion region;
region.center = self.mapView.userLocation.coordinate;  

MKCoordinateSpan span; 
span.latitudeDelta  = 1; // Change these values to change the zoom
span.longitudeDelta = 1; 
region.span = span;

[self.mapView setRegion:region animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-30T13:30:17.703

我认为问题在于您正在收听用户位置更改（很可能每秒发生多次）并且您正在将地图区域设置为该区域。

您需要做的是在地图上添加一个按钮（如 Apple 地图的左上角），它将地图模式切换为自由外观或固定到用户位置。

当用户按下按钮时，您可以删除/添加 KVO。或在您的代码中切换布尔标志。当标志为真时，您不会更改地图区域。就像是：

```
@implementation YourController{
    BOOL _followUserLocation;
}

- (IBAction) toggleMapMode:(id)sender{
    _followUserLocation = !_followUserLocation;
}

-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary             *)change context:(void *)context{
   if(_followUserLocation){
        MKCoordinateRegion region;
        region.center = self.mapView.userLocation.coordinate;  

        MKCoordinateSpan span; 
        // retain the span so when the map is locked into user location they can still zoom
        span.latitudeDelta  = self.mapView.region.span.latitudeDelta;
        span.longitudeDelta = self.mapView.region.span.longitudeDelta; 

        region.span = span;

        [self.mapView setRegion:region animated:YES];
    }
}

@end 
```

也许您不想要这一切，而您所需要的只是：

```
 // retain the span so when the map is locked into user location they can still zoom
        span.latitudeDelta  = self.mapView.region.span.latitudeDelta;
        span.longitudeDelta = self.mapView.region.span.longitudeDelta; 
```

# twitter - Twitter v1.1：400 错误请求

> ID：12544018
> 
> 赞同：2
> 
> 时间：2012-09-22T13:04:33.130
> 
> 标签：twitter

我在使用新的 Twitter API 时遇到问题：v1.0 可以正常工作，但是如果我将 URL 更改为 v1.1，我总是会收到错误“400 Bad request”（在 Firebug 中可以看到）。

例子：

[https://api.twitter.com/1/statuses/user_timeline.json?screen_name=twitterapi](https://api.twitter.com/1/statuses/user_timeline.json?screen_name=twitterapi)

这就像一个魅力，一切都例外。只需将 URL 更改为`.../1.1/...`，我得到一个 Bad request 错误，甚至是 JSON 错误响应，甚至是一些内容。

[https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=twitterapi](https://api.twitter.com/1/statuses/user_timeline.json?screen_name=twitterapi)

注意：这不可能是速率限制，因为我是第一次访问该 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T13:06:10.433

[https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=twitterapi](https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=twitterapi)将我重定向到[https://api.twitter.com/1/statuses/user_timeline.json?screen_name=twitterapi](https://api.twitter.com/1/statuses/user_timeline.json?screen_name=twitterapi)

看起来`1.1`是一样的东西`1`

**UPD：** [看起来这是一个速率限制](https://stackoverflow.com/questions/7835067/twitter-api-always-saying-400-bad-request)（因为`1.1`链接在 2 小时前为我工作）。即使您是第一次点击 API 页面，您的某些应用程序（桌面或移动）也可以使用 API 方法。

**UPD2：**在**1.1** 400 错误请求中意味着您没有被自动化（[https://dev.twitter.com/docs/error-codes-responses](https://dev.twitter.com/docs/error-codes-responses)，[https://dev.twitter.com/docs/auth/oauth#user-context](https://dev.twitter.com/docs/auth/oauth#user-context)）。所以你需要获取用户上下文

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T19:09:46.423

在使用 v1.1 api 之前，您需要使用 oauth 进行身份验证和授权这是适用于 python tweepy 的东西 - 从用户时间轴获取状态

```
def twitter_fetch(screen_name = "BBCNews",maxnumtweets=10):
   'Fetch tweets from @BBCNews'
    # API described at https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline

    consumer_token = '' #substitute values from twitter website
    consumer_secret = ''
    access_token = ''
    access_secret = ''

    auth = tweepy.OAuthHandler(consumer_token,consumer_secret)
    auth.set_access_token(access_token,access_secret)

    api  = tweepy.API(auth)
    #print api.me().name
    #api.update_status('Hello -tweepy + oauth!')

    for status in tweepy.Cursor(api.user_timeline,id=screen_name).items(2):
        print status.text+'\n'

if __name__ == '__main__':
    twitter_fetch('BBCNews',10) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-18T08:11:16.163

对我来说，原因是附加到推文的媒体的大小。如果它小于 1.2MB，它就可以通过，但如果它结束了，我每次都会收到 400 错误。

奇怪的是 Twitter 说推文限制是 3MB [https://twittercommunity.com/t/getting-media-parameter-is-invalid-after-successfully-uploading-media/58354](https://twittercommunity.com/t/getting-media-parameter-is-invalid-after-successfully-uploading-media/58354)

# python - Python类继承（多个）：为什么属性是空的？即做对了

> ID：12544020
> 
> 赞同：0
> 
> 时间：2012-09-22T13:04:39.953
> 
> 标签：python, class, inheritance, mixins

我正在尝试创建一个中间对象以在其他地方使用，我可以将其传递给 sqlalchemy 模型进行创建：

从...开始：

```
class IntermediateObj(object):

    def __init__(self, raw):
        self.raw = raw
        self.sections = []
        self.fields = []
        self.elements = []
        super(IntermediateObj, self).__init__()

    def recurse(self, items):
        for k,v in items.iteritems():
            if isinstance(v, list):
                getattr(self, k).append(v)
                [self.recurse(i) for i in v]
            else:
                setattr(self, k, v) 
```

传递给：

```
class MyClass(IntermediateObj, Base):

    def __init__:(self, attribute=None):
         self.attribute = attribute 
         super(MyClass, self).__init__ 
```

例如

```
ii = IntermediateObj(raw={'large':'nested_dictionary', sections=[{}, {}, {}]})
ii.recurse(ii.raw) #any help smoothing this bit over appreciated as well, but another question...
tada = MyClass(ii)

tada.sections
---> [] /// this should not be, it should correspond to ii.sections 
```

部分在不应该的地方是空的，所以我还没有完全掌握这里的继承。这一定是一个常见的问题，但我目前还没有发现任何我能理解的东西，只是在各种策略中四处游荡。任何有关正确执行 python 类继承的输入都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:22:45.860

```
class IntermediateObj(object):

    def __init__(self, raw):
        self.raw = raw
        self.sections = []
        self.fields = []
        self.elements = []

    def recurse(self, items):
        # this works ok, but passing the same arguments to the recurse function
        # which were passed to the constructor as well ,and then stored as a class
        # attribute, why, seems like self.raw is not even needed?
        for k,v in items.iteritems():
            if isinstance(v, list):
                getattr(self, k).append(v)
                [self.recurse(i) for i in v]
            else:
                setattr(self, k, v)

class MyClass(IntermediateObj):

    def __init__(self, attribute=None):  
        self.attribute = attribute
        super(MyClass, self).__init__(attribute)

ii = IntermediateObj({'large': 'nested_dictionary',
                      'sections': [{}, {}, {}]
                    })
ii.recurse(ii.raw)
print ii.raw
print ii.sections

# passing an instance of IntermediateObj is not the same as passing a dict (logically)
# yet the constructor of MyClass just forwards that instance object to the
# baseclasses constructor, while you initially passed a dict to the IntermediateObj
# constructor. 
tada = MyClass(ii)
# MyClass inherits the recurse method, but it won't magically be executed unless
# you call it, so just instantiating MyClass won't copy those values recursively
tada.recurse(ii.raw)
# now tada, it copied everything, and notice, I called recurse with ii.raw, which is the
# source dictionary, but I'm not even sure if you wanted it that way, it's not clear
# define your question more precisely
print tada.sections 
```

我看到你已经接受了这个作为最佳答案，我对此感到很难过，因为它没有得到真正的回答，所以我做了一个更新，正如我们在评论中描述的那样，现在当 MyClass 的实例接收到 IntermediateObj 的实例时，它将使用传递对象的原始参数调用基类的构造函数。在 IntermediateObj 的构造函数中还调用了递归，因此它将在实例化时复制值：

```
class IntermediateObj(object):

    def __init__(self, raw):
        self.raw = raw
        self.sections = []
        self.fields = []
        self.elements = []
        self.recurse(raw)

    def recurse(self, items):
        for k,v in items.iteritems():
            if isinstance(v, list):
                getattr(self, k).append(v)
                [self.recurse(i) for i in v]
            else:
                setattr(self, k, v)

class MyClass(IntermediateObj):

    def __init__(self, intermediate_instance):  
        super(MyClass, self).__init__(intermediate_instance.raw)

ii = IntermediateObj({'large': 'nested_dictionary',
                      'sections': [{}, {}, {}]
                    })
print ii.raw
print ii.sections
tada = MyClass(ii)
print tada.sections
print tada.raw 
```

# php - 使用 AJAX 和简单的 HTML DOM 解析器自动填充

> ID：12544026
> 
> 赞同：0
> 
> 时间：2012-09-22T13:05:59.207
> 
> 标签：php, jquery, ajax, html-parsing

我正在尝试使用 AJAX 和 Simple HTML DOM Parser 创建一个自动填充脚本。这是我到目前为止所拥有的：

PHP 文件 (discogs.php)：

```
<?php

    ini_set('user_agent', 'TEST/1.0 +http://127.0.0.1/test/');

    require_once('simple_html_dom.php');

    // Create DOM from URL
    $html = file_get_html('http://www.discogs.com/release/'.$_POST["album_id"]);

    // Grab the Label
    $label = $html->find('.content > a', 0);
    echo $label;

    // Grab the Catalogue Number
    $catno = $html->find('.content', 0);
    echo $catno;

    // Grab the tracklist
    $tracklist = $html->find('div#tracklist', 0);     
    echo $tracklist; 

?> 
```

为了节省空间，我将 HTML 和 jQuery 放在这里：http: [//jsfiddle.net/Mobius1/cYGWs/](http://jsfiddle.net/Mobius1/cYGWs/)

我知道如何使用 填充单个文本区域/输入 ，但我不知道如何使用 PHP 文件中的三个变量（和）`$('element').val(data)`填充所有三个输入。`$label``$catno``$tracklist`

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:16:39.947

首先将脚本更改为如下

```
 jQuery.post('discogs.php', jQuery("#myform").serialize(), function(data) {

 $('element').val(data);

                 },"json"); 
```

然后，如下更改您的 php 脚本并删除您的 echo 变量语句

```
// New line of code for json
ini_set('user_agent', 'TEST/1.0 +http://127.0.0.1/test/');
require_once('simple_html_dom.php');

    // Create DOM from URL
    $html = file_get_html('http://www.discogs.com/release/3894873');

     // Grab the Label
     $label = $html->find('.content > a', 0);

    // Grab the Catalogue Number
    $catno = $html->find('.content', 0);

    // Grab the tracklist
    $tracklist = $html->find('div#tracklist', 0); 

$data =  array (
 "label" => (string) $label,
 "catno" => (string) $catno,
  "tracklist" => (string) $tracklist,
);

echo json_encode($data);
exit; 
```

然后，如下更改您的成功处理函数

```
function(data) {

 $('lable element id').val(data.label);
 $('catno element id').val(data.catno);
 $('tracklist element id').val(data.tracklist);

                 } 
```

# ruby-on-rails - Rails如何根据日期范围创建月份数组

> ID：12544032
> 
> 赞同：21
> 
> 时间：2012-09-22T13:06:34.027
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

示例我有：

```
 range = start.to_date..(end.to_date + 1.day) 
```

结束和开始是日期。

如何根据此范围创建月份数组？

例子：

我有日期 23/1/2012 和 15/3/2012

月份是 Januar、Februar 和 Marts。

我想得到一个像`["1/1/2012", "1/2/2012", "1/3/2012"]`

如果范围在 25/6/2012 到 10/10/2012 之间

数组将是：`["1/6/2012", "1/7/2012", "1/8/2012", "1/9/2012", "1/10/2012"]`

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-22T14:54:29.127

```
require 'date'

date_from  = Date.parse('2011-10-14')
date_to    = Date.parse('2012-04-30')
date_range = date_from..date_to

date_months = date_range.map {|d| Date.new(d.year, d.month, 1) }.uniq
date_months.map {|d| d.strftime "%d/%m/%Y" }
# => ["01/10/2011", "01/11/2011", "01/12/2011", "01/01/2012",
#     "01/02/2012", "01/03/2012", "01/04/2012"] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-22T13:55:42.393

Rails ActiveSupport 核心扩展包括一个日期方法：beginning_of_month。你的函数可以写成如下：

```
def beginning_of_month_date_list(start, finish)
  (start.to_date..finish.to_date).map(&:beginning_of_month).uniq.map(&:to_s)
end 
```

警告：这可以更有效地编写，假设开始和结束是在预期的顺序，但否则应该给你你正在寻找的月份。您还可以重写以将格式符号传递给 #to_s 方法以获取预期的月份格式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-08T05:40:12.710

我对这里的性能很好奇，所以我测试了一些变化。这是一个更好地优化性能的解决方案（在我的基准测试中比公认的解决方案快大约 8 倍）。通过一次增加一个月，我们可以删除`uniq`节省大量时间的调用。

```
start_date = 1.year.ago.to_date
end_date = Date.today

dates = []
date = start_date.beginning_of_month

while date <= end_date.beginning_of_month
  dates << date.to_date.to_s
  date += 1.month
end

dates

#=> ["2019-02-01", "2019-03-01", "2019-04-01", "2019-05-01", "2019-06-01", "2019-07-01", "2019-08-01", "2019-09-01", "2019-10-01", "2019-11-01", "2019-12-01", "2020-01-01", "2020-02-01"] 
```

基准测试结果：

```
Comparison:
month increment loop:    17788.3 i/s
accepted solution:     2140.1 i/s - 8.31x  slower 
```

[基准代码的要点](https://gist.github.com/jaredmoody/521fd0e33bbcc690c2de16f6cde6e696)

# ruby-on-rails - RedCloth 动态标签

> ID：12544033
> 
> 赞同：1
> 
> 时间：2012-09-22T13:06:57.287
> 
> 标签：ruby-on-rails, module, controller, redcloth

我正在尝试为 RedCloth 制作自定义标签。但是，我需要从数据库中获取一些数据并以此为基础标记。即当写入“image.1”时，它应该从数据库中获取用户上传的图片，ID 为#1。

但我不知道如何将 current_user （或控制器中的其他关键实例变量）传递给模块。我想代码可能看起来像这样：

```
module RedclothExtension
  def image(opts)
    @image = User.find(current_user.id).images.where(id: opts[:text])
    "#{@image.title}"    
  end 
end 
```

在我看来，有两种方法：

1.  将所需的变量传递给模块。
2.  从控制器获取实例变量。

但是我该怎么做呢？还是有更聪明的方法？

# c# - C#中的异步编程

> ID：12544038
> 
> 赞同：-1
> 
> 时间：2012-09-22T13:07:29.000
> 
> 标签：c#, async-await, async-ctp

最近我尝试了解新的 C# 特性，异步编程的 async/await 关键字。当我在网上搜索时，我遇到了这个例子：

```
 static void Main(string[] args)
    {
        Console.WriteLine("Task based APM demo");

        // Call Exponnent() asynchronously.
        // And immediately return the control flow.
        // If I don't put a Task here, the program will sometimes
        // terminate immediately.
        Task t = new Task(async () =>
        {
            int result = await Program.Exponent(10);

            // After the operation is completed, the control flow will go here.
            Console.WriteLine(result);
        });

        t.Start();
        Console.ReadKey();
    }

    static async Task<int> Exponent(int n)
    {
        Console.WriteLine("Task started");
        return await TaskEx.Run<int>(() => 2 << (n - 1));
    }
} 
```

我对此以及这些陈述的行为方式有疑问。首先，据我了解，当我们想要释放该进程并返回调用者上下文时使用的等待表达式。但是为什么这个表达式在 Exponent 方法调用它的那一行使用 this 呢？事实上，当编译器面对这行程序时会发生什么？字母问题是，为什么程序使用“TaskEx.Run”在 Exponent 方法的主体中返回结果？是否可以使用“return await (() => 2 << (n - 1));” 只要？编译器如何处理这一行？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:25:28.603

> 但是为什么这个表达式在指数调用它的那一行使用这个呢？

我不确定你这个问题是什么意思。 `await Task.Run<int>(() => 2 << (n - 1));`告诉编译器暂停当前方法的执行，直到任务完成。在任务方面，这类似于：

```
Task.Run<int>(() => 2 << (n - 1)).ContinueWith(t=>return t.Result); 
```

但是，当然，你不能`return`继续。该`async`关键字不仅告诉编译器`await`该方法中可能有一个或多个运算符，而且还设置了一个状态机来管理从异步操作开始和返回的不同状态转换。同样，这可能会影响与调用者异步相关的方法执行方式。

As to the `Task` used in `Main`: you can't `await` a method call in `Main`, so, I assume the `Task` is used to still use the `await` operator. But, it seems redundant. I would probably simply have another method to use `await`:

```
 static async void Method()
    {
        Console.WriteLine(await Exponent(10));
    } 
```

Then re-write `Main`:

```
 static void Main(string[] args)
    {
        Method();
        Console.ReadLine();
    } 
```

But, I don't know the reasons behind why the code was originally written that way or even if there was a real purpose.

> Is it possible to use "return await (() => 2 << (n - 1));"

It is not possible to write this line of code because nothing asynchronous is being performed. `() => 2 << (n - 1)` neither returns a Task object not has an `GetAwaiter` method associated with it; so, it can be executed asynchronously. thus, it can't be "awaited".

# c++ - 在 dll 中解析外部符号

> ID：12544041
> 
> 赞同：1
> 
> 时间：2012-09-22T13:07:51.757
> 
> 标签：c++, dll, symbols, shared-libraries

我正在开发一个带有插件系统的跨平台 c++/qt 项目，我们在 linux 上使用 so 文件，在 windows 上使用 dll。我们通过 cmake 在 Linux 上使用 gcc，在 Windows 上使用 Visual Studio 2010。问题是我们的插件有时需要从应用程序源代码中调用一个函数，这在使用 gcc 的 Linux 上运行良好，只需包含头文件。但是在 Visual Studio 上，我们得到了未解决的外部符号错误。

是因为so和dll文件的工作方式不同吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T13:38:35.237

在 Windows 上从 dll 导出符号的默认行为完全相反：默认情况下，符号是不可见的，您需要显式导出它们。使用 VC++，这是由`__declspec(dllexport)` [声明符](http://msdn.microsoft.com/en-us/library/3y1sfaz2%28v=vs.110%29.aspx)完成的。

编辑（添加的信息）：您正在进入一个非标准化的、系统特定行为的区域......在 C++ 中编写跨平台“可插拔”组件系统的问题比您预期的要多得多。在 Windows 上有所谓的导入库，它定义了从 dll 导出的所有符号。您必须链接这些库才能解析这些符号。这称为[隐式链接](http://msdn.microsoft.com/en-us/library/253b8k2c%28v=vs.110%29.aspx)。您还可以显式链接，这意味着在运行时加载 dll 及其导出的符号。然而，与所谓的二进制兼容性问题相比，所有这些都只是技术细节，如果在组件系统的设计过程中没有考虑到，这几乎肯定会杀死你。

我想知道一件事：你说你正在使用 Qt。Qt 应用程序框架有自己的跨平台约定和规则，用于编写和构建可插入组件。你为什么不坚持这些......？

# c++ - Geany 类似 C++ 的智能感知功能

> ID：12544043
> 
> 赞同：5
> 
> 时间：2012-09-22T13:08:01.553
> 
> 标签：c++, geany

是否有 Geany 插件可以为 C++ 提供类似 Intellisense 的功能？就像当您按 ctrl + 空格键时，所包含库的所有函数/成员都会显示或列为提示？或者当您键入几个字母时，会列出所有以这些字母开头的方法或变量？

我知道 Geany 中有代码完成，但它不像 VS 的 Intellisense，当您按下 ctrl + 空格键时，链接库的所有成员/函数都会显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T20:08:06.927

你有几个选择。

如果您在声明类的位置打开了文件，则代码完成开箱即用。所以假设你在 Patient 类中，它调用 Treatment->getActivitiesForPatient(this)，如果你打开了 Treatment 类，它就可以工作。

还可以选择在 Geany 中创建标签文件，请参阅 [http://www.geany.org/Download/Extras#tags](http://www.geany.org/Download/Extras#tags)。（请注意，对于 Windows 7，放置标签文件的目录是 AppData/Roaming/geany/tags。）

如何创建标签文件的示例：

```
$ your/application/root>geany -g /tmp/mytagsfile.tags $(find . -type f -name '*.php') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:15:24.353

我使用 Geany，但我真的不知道这样的事情，尽管我可能错了。但是如果你在 Linux 上工作，你可能想要检查像 MonoDevelop（我在 Linux 上将它用于 C#，但它也支持 C++，就像 MS Visual Studio）或 Eclipse，它主要用于 Java，但有一个 C /C++ 和 Fortran 扩展。我知道它们存在，但同样，我从未使用过 C++ 的，就是这个：

[www.eclipse.org/cdt/](http://www.eclipse.org/cdt/ "日食 CDT")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T20:16:30.580

在我看来，有史以来最快的代码完成（如智能感知）是 QtCreator 之一。在大型代码库中也非常快

# javascript - className null 或不再是对象

> ID：12544046
> 
> 赞同：0
> 
> 时间：2012-09-22T13:09:07.847
> 
> 标签：javascript, arrays, internet-explorer, error-handling

IE的问题。这是代码：

```
if (($.browser.msie)) {
    var first_el = 0;
    var targie = document.getElementById(targId).getElementsByTagName("div");
    for (var i = 0; i < targie.length, first_el < 1; i++) {
        if ((typeof targie[i].className != 'undefined') && (targie[i].className != null)) {
            if ((targie[i].className == "category list even") || (targie[i].className == "category list") || (targie[i].className == "good list even") || (targie[i].className == "good list")) {
                var targ = targie[i];
                first_el += 1;
            }
        }
    }
} 
```

并且错误 -`className null or not an object` 找到了类似的主题，但解决方案对我没有帮助。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:22:02.080

我不认为这是实际的错误信息。更像`cannot access property "classname", targie[i] is null or not an object`是，不是吗？

您的问题似乎是循环的条件部分：`i < targie.length, first_el < 1`它使用[逗号运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator)。这意味着只要没有找到元素，您的循环就会运行 - 即使没有更多元素。将其更改为`i < targie.length && first_el < 1`，它应该可以工作。

顺便说一句，你似乎使用 jQuery。为什么不使用 DOM 选择器`$("#"+targid+" div.list")`？然后，您可以使用 each 循环来设置变量，或者只需添加一个`:first`选择器并继续使用 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T13:18:06.403

`getAttribute('class');`如果用户的兄弟是 IE，我认为你应该使用

# html - 新元素出现时 HTML 元素位置发生变化

> ID：12544049
> 
> 赞同：0
> 
> 时间：2012-09-22T13:09:31.500
> 
> 标签：html, css, css-float

我有一个最初看起来像这样的网页。

![在此处输入图像描述](../Images/2a56fb59a0dec9c859d4abc57c95fbce.png)

单击链接时，页面右侧会出现一个小表单。

![在此处输入图像描述](../Images/9be81fc7019b478c0753c69602c2d769.png)

![在此处输入图像描述](../Images/455b490ad385dff35e1732844a4fdbe9.png)

问题是当发生这种情况时，读取**Record added**的行也会移动到中间。

这些是我为定位它们而编写的 CSS 规则。

```
#frmAddService { float:right; padding-right:250px; padding-top:150px; }   //the form

#msg { float:right; padding-right:250px; padding-top:300px; }   //the 'Record Added' line 
```

当表单出现时，如何使该行的位置固定？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:21:36.340

很酷，感谢链接，帮助:)

我创建了一个新的 div 并在其中添加了您的表单和您的消息。这样，如果一个移动，两个移动。我把id，formContainer。

这是CSS

```
#formContainer{width:350px; float:right;padding-right:250px;}
#frmAddService {position: relative; float:right;padding-top:300px;}

#msg { position:relative; float:right; padding-top:300px; }

#tasks { float:left; padding-left:40px; padding-top:100px; }​ 
```

我还修改了您的 Jquery 以更改您的 #msg 的值

```
$(function()
{
    $("#frmAddService").hide();

    $("#add").click(function()
    {
        $("#frmAddService").fadeIn("slow");
        $("#msg").css("padding-top","0px");
        $("#msg").css("margin-top","10px");
        $("#msg").css("padding-right","100px");
        return false;
    });
}); 
```

正如您在[http://jsfiddle.net/PJVu6/29/](http://jsfiddle.net/PJVu6/29/)中看到的那样，这主要是它工作正常。

```
​ 
```

# sql - 随机分配工作地点，每个地点不得超过指定员工人数

> ID：12544051
> 
> 赞同：8
> 
> 时间：2012-09-22T13:09:40.593
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

我正在尝试在地点列表中选择员工的唯一随机发布/招聘地点，所有员工都已在这些地点发布，我正在尝试为他们生成一个新的随机发布地点，其中“位置”条件为“员工新随机位置将不等于他们的家乡，并且随机选择的员工及其指定必须小于或等于 Places 表中的 Place wise 指定编号“

员工表是：

```
EmpNo   EmpName           CurrentPosting    Home        Designation   RandomPosting
1       Mac               Alabama           Missouri      Manager       
2       Peter             California        Montana       Manager       
3       Prasad            Delaware          Nebraska      PO       
4       Kumar             Indiana           Nevada        PO       
5       Roy               Iowa              New Jersey    Clerk 
```

等等...

并且 Places 表（具有员工数量的 PlaceNames - 指定明智）是： -

```
PlaceID  PlaceName      Manager     PO    Clerk
1        Alabama           2        0     1
2        Alaska            1        1     1
3        Arizona           1        0     2
4        Arkansas          2        1     1
5        California        1        1     1
6        Colorado          1        1     2
7        Connecticut       0        2     0 
```

等等...

尝试使用 newid() 如下所示，并且能够选择具有 RandomPosting 地名的员工，

```
WITH cteCrossJoin AS (
SELECT e.*, p.PlaceName AS RandomPosting,
       ROW_NUMBER() OVER(PARTITION BY e.EmpNo ORDER BY NEWID()) AS RowNum
    FROM Employee e
        CROSS JOIN  Place p
    WHERE e.Home <> p.PlaceName
)
SELECT *
FROM cteCrossJoin
WHERE RowNum = 1; 
```

另外，我需要根据指定编号（在 Places 表中）限制随机选择...即为每个员工随机分配一个 PlaceName（来自 Places），这不等于 CurrentPosting 和 Home（在 Employee 中）和 Place wise 指定将不超过给定的数字。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:30:19.247

也许是这样的：

```
select C.* from 
(
    select *, ROW_NUMBER() OVER(PARTITION BY P.PlaceID, E.Designation ORDER BY NEWID()) AS RandPosition
        from Place as P cross join Employee E
    where P.PlaceName != E.Home AND P.PlaceName != E.CurrentPosting
) as C
where 
    (C.Designation = 'Manager' AND C.RandPosition <= C.Manager) OR
    (C.Designation = 'PO' AND C.RandPosition <= C.PO) OR
    (C.Designation = 'Clerk' AND C.RandPosition <= C.Clerk) 
```

这应该尝试根据员工的指定随机匹配员工，丢弃相同的 currentPosting 和 home，并且不要分配超过每列指定的指定内容。但是，这可能会为多个地方返回同一员工，因为根据该标准，它们可以匹配多个。

* * *

**编辑：** 在看到您关于不需要高性能单个查询来解决此问题的评论后（我什至不确定这是否可能），并且因为它似乎更像是您的“一次性”过程将调用，我使用游标和一个临时表编写了以下代码来解决您的分配问题：

```
select *, null NewPlaceID into #Employee from Employee

declare @empNo int
DECLARE emp_cursor CURSOR FOR  
SELECT EmpNo from Employee order by newid()

OPEN emp_cursor   
FETCH NEXT FROM emp_cursor INTO @empNo

WHILE @@FETCH_STATUS = 0   
BEGIN
    update #Employee 
    set NewPlaceID = 
        (
        select top 1 p.PlaceID from Place p 
        where 
            p.PlaceName != #Employee.Home AND 
            p.PlaceName != #Employee.CurrentPosting AND
            (
                CASE #Employee.Designation 
                WHEN 'Manager' THEN p.Manager
                WHEN 'PO' THEN p.PO
                WHEN 'Clerk' THEN p.Clerk
                END
            ) > (select count(*) from #Employee e2 where e2.NewPlaceID = p.PlaceID AND e2.Designation = #Employee.Designation)
        order by newid()
        ) 
    where #Employee.EmpNo = @empNo
    FETCH NEXT FROM emp_cursor INTO @empNo   
END

CLOSE emp_cursor
DEALLOCATE emp_cursor

select e.*, p.PlaceName as RandomPosting from Employee e
inner join #Employee e2 on (e.EmpNo = e2.EmpNo)
inner join Place p on (e2.NewPlaceID = p.PlaceID)

drop table #Employee 
```

基本思想是，它以随机顺序对员工进行迭代，并为每个员工分配一个符合不同家庭和当前职位标准的随机地点，并控制为每个指定分配给每个地点的数量以确保不会为每个角色“过度分配”位置。

这个片段实际上**并没有改变你的数据。**最后的`SELECT`语句只返回建议的分配。`Employee`但是，您可以很容易地更改它以相应地对您的表进行实际更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T16:06:51.520

我假设约束是：

*   员工不能去他/她目前所在的同一地点。
*   所有站点必须在每个类别中至少有一名员工，其中需要一名员工。

最重要的想法是意识到您不是在寻找“随机”分配。您正在寻找位置的排列，但前提是每个人都移动到其他地方。

我将为管理者描述一个答案。您可能需要对每种类型的员工进行三个查询。

关键思想是一个 ManagerPositions 表。这有一个地点、一个序号和一个地点内的序号。下面是一个例子：

```
Araria     1    1
Araria     2    2
Arwal      1    3
Arungabad  1    4 
```

该查询通过使用 row_number() 函数连接到 INFORMATION_SCHEMA.columns 以分配序列来创建此表。这是在 SQL Server 中获取序列的一种快速而肮脏的方法——但只要您需要的最大数量（即任何一个位置的最大管理器数量）小于数据库。还有其他方法可以处理更一般的情况。

下一个关键思想是旋转位置，而不是随机选择它们。这使用了模算术的思想——添加一个偏移量并在总位置数上取余数。最终查询如下所示：

```
with ManagerPositions as (
     select p.*,
            row_number() over (order by placerand, posseqnum) as seqnum,
            nums.posseqnum
     from (select p.*, newid() as placerand
           from places p
          ) p join
          (select row_number() over (order by (select NULL)) as posseqnum
           from INFORMATION_SCHEMA.COLUMNS c
          ) nums
          on p.Manager <= nums.posseqnum
    ),
   managers as (
    select e.*, mp.seqnum
    from (select e.*,
                 row_number() over (partition by currentposting order by newid()
                                   ) as posseqnum
          from Employees e              
          where e.Designation = 'Manager'
         ) e join
         ManagerPositions mp
         on e.CurrentPosting = mp.PlaceName and
            e.posseqnum = mp.posseqnum
  )
select m.*, mp.PlaceId, mp.PlaceName
from managers m cross join
     (select max(seqnum) as maxseqnum, max(posseqnum) as maxposseqnum
      from managerPositions mp
     ) const join
     managerPositions mp
     on (m.seqnum+maxposseqnum+1) % maxseqnum + 1 = mp.seqnum 
```

好的，我意识到这很复杂。每个经理职位都有一个表格（不像您的声明中那样计数，每个职位都有一行很重要）。有两种方法可以确定位置。第一个是按位置和按位置内的计数（posseqnum）。第二个是行上的增量 id。

找到每个经理在表中的当前位置。这应该是唯一的，因为我考虑到了每个地方的经理人数。然后，为该位置添加一个偏移量，并分配该位置。通过使偏移量大于 maxseqnum，可以保证管理器移动到另一个位置（除非在一个位置拥有超过一半管理器的异常边界情况下）。

如果所有当前的经理职位都被填补，那么这保证了所有人都将搬到下一个位置。因为 ManagerPositions 使用随机 id 来分配 seqnum，所以“下一个”位置是随机的，而不是按 id 或字母顺序排列的下一个位置。

该解决方案确实让许多员工一起前往同一个新地点。您可以通过在表达式中尝试“1”以外的值来解决这个问题`(m.seqnum+maxposseqnum+1)`。

我意识到有一种方法可以修改它，以防止当前位置和下一个位置之间的关联。这将执行以下操作：

1.  将 seqnum 随机分配给 ManagerPosition
2.  比较表中的不同偏移量，根据表中由该偏移量分隔的两个位置相同的次数对每个位置进行评级。
3.  选择具有最小额定值的偏移量（最好是 0）。
4.  Use that offset in the final matching clause.

I don't have enough time right now to write the SQL for this.

# linux - 测量流量生成器的吞吐量

> ID：12544053
> 
> 赞同：0
> 
> 时间：2012-09-22T13:09:44.617
> 
> 标签：linux, networking, traffic-measurement

我如何衡量基于软件的流量生成器的吞吐量？

linux中是否有任何工具可以极大地帮助我测量确切的吞吐量。

我正在尝试测量软件生成器通过 1Gbps 网卡生成流量的速率。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T14:46:10.340

`netperf`是测量网络吞吐量和延迟的适当解决方案。`iperf`是另一种选择。

# python - 如何获取当前的 IPython / Jupyter Notebook 名称

> ID：12544056
> 
> 赞同：100
> 
> 时间：2012-09-22T13:09:59.643
> 
> 标签：python, jupyter-notebook, ipython, jupyter, jupyter-lab

我试图在运行 IPython 笔记本时获取当前的笔记本名称。我知道我可以在笔记本顶部看到它。我追求的是什么

```
currentNotebook = IPython.foo.bar.notebookname() 
```

我需要在变量中获取名称。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2017-06-16T12:17:24.643

*添加到以前的答案，*

要获取笔记本名称，请在单元格中运行以下命令：

```
%%javascript
IPython.notebook.kernel.execute('nb_name = "' + IPython.notebook.notebook_name + '"') 
```

这将为您提供 nb_name 中的文件名

然后要获得完整路径，您可以在单独的单元格中使用以下内容：

```
import os
nb_full_path = os.path.join(os.getcwd(), nb_name) 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2014-05-12T21:54:21.440

我有以下适用于 IPython 2.0 的内容。我观察到笔记本的名称存储为页面标签中`'data-notebook-name'`的属性值。`<body>`因此，想法是首先要求 Javascript 检索属性--javascripts 可以从代码单元中调用，这要归功于`%%javascript`魔术。然后可以通过调用 Python 内核访问 Javascript 变量，使用设置 Python 变量的命令。由于最后一个变量是从内核中知道的，因此也可以在其他单元中访问它。

```
%%javascript
var kernel = IPython.notebook.kernel;
var body = document.body,  
    attribs = body.attributes;
var command = "theNotebook = " + "'"+attribs['data-notebook-name'].value+"'";
kernel.execute(command); 
```

来自 Python 代码单元

```
print(theNotebook) 
```

Out[ ]: HowToGetTheNameOfTheNoteBook.ipynb

该解决方案的一个缺陷是，当更改笔记本的标题（名称）时，该名称似乎不会立即更新（可能存在某种缓存），因此需要重新加载笔记本才能访问新名字。

**[编辑]**经过反思，一个更有效的解决方案是寻找笔记本名称的输入字段而不是`<body>`标签。查看源代码，该字段的 id 似乎为“notebook_name”。然后可以通过 a 捕获该值`document.getElementById()`，然后遵循与上述相同的方法。代码变成了，仍然使用 javascript 魔法

```
%%javascript
var kernel = IPython.notebook.kernel;
var thename = window.document.getElementById("notebook_name").innerHTML;
var command = "theNotebook = " + "'"+thename+"'";
kernel.execute(command); 
```

然后，从 ipython 单元格中，

```
In [11]: print(theNotebook)
Out [11]: HowToGetTheNameOfTheNoteBookSolBis 
```

与第一种解决方案相反，笔记本名称的修改会立即更新，无需刷新笔记本。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-10-24T18:35:29.157

如前所述，您可能不应该真正做到这一点，但我确实找到了一种方法。这是一个燃烧的黑客，所以不要依赖这个：

```
import json
import os
import urllib2
import IPython
from IPython.lib import kernel
connection_file_path = kernel.get_connection_file()
connection_file = os.path.basename(connection_file_path)
kernel_id = connection_file.split('-', 1)[1].split('.')[0]

# Updated answer with semi-solutions for both IPython 2.x and IPython < 2.x
if IPython.version_info[0] < 2:
    ## Not sure if it's even possible to get the port for the
    ## notebook app; so just using the default...
    notebooks = json.load(urllib2.urlopen('http://127.0.0.1:8888/notebooks'))
    for nb in notebooks:
        if nb['kernel_id'] == kernel_id:
            print nb['name']
            break
else:
    sessions = json.load(urllib2.urlopen('http://127.0.0.1:8888/api/sessions'))
    for sess in sessions:
        if sess['kernel']['id'] == kernel_id:
            print sess['notebook']['name']
            break 
```

我更新了我的答案，以包含一个在 IPython 2.0 中“有效”的解决方案，至少通过一个简单的测试。如果有多个笔记本连接到同一个内核等，则可能无法保证给出正确答案。

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2018-09-05T14:16:18.617

看来我无法发表评论，所以我必须将其发布为答案。

@iguananaut 接受的解决方案和@mbdevpl 的更新似乎不适用于笔记本的最新版本。我修复了它，如下所示。我在 Python v3.6.1 + Notebook v5.0.0 以及 Python v3.6.5 和 Notebook v5.5.0 上检查了它。

```
import jupyterlab
if jupyterlab.__version__.split(".")[0] == "3":
    from jupyter_server import serverapp as app
    key_srv_directory = 'root_dir'
else : 
    from notebook import notebookapp as app
    key_srv_directory = 'notebook_dir'
import urllib
import json
import os
import ipykernel

def notebook_path(key_srv_directory, ):
    """Returns the absolute path of the Notebook or None if it cannot be determined
    NOTE: works only when the security is token-based or there is also no password
    """
    connection_file = os.path.basename(ipykernel.get_connection_file())
    kernel_id = connection_file.split('-', 1)[1].split('.')[0]

    for srv in app.list_running_servers():
        try:
            if srv['token']=='' and not srv['password']:  # No token and no password, ahem...
                req = urllib.request.urlopen(srv['url']+'api/sessions')
            else:
                req = urllib.request.urlopen(srv['url']+'api/sessions?token='+srv['token'])
            sessions = json.load(req)
            for sess in sessions:
                if sess['kernel']['id'] == kernel_id:
                    return os.path.join(srv[key_srv_directory],sess['notebook']['path'])
        except:
            pass  # There may be stale entries in the runtime directory 
    return None 
```

如文档字符串中所述，这仅在没有身份验证或身份验证是基于令牌的情况下才有效。

请注意，正如其他人所报告的那样，基于 Javascript 的方法在执行“运行所有单元格”时似乎不起作用（但在“手动”执行单元格时起作用），这对我来说是一个交易破坏者。

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2015-06-19T15:55:59.043

在 Jupyter 3.0 上，以下工作。在这里，我显示了 Jupyter 服务器上的整个路径，而不仅仅是笔记本名称：

将 存储`NOTEBOOK_FULL_PATH`在当前笔记本前端：

```
%%javascript
var nb = IPython.notebook;
var kernel = IPython.notebook.kernel;
var command = "NOTEBOOK_FULL_PATH = '" + nb.base_url + nb.notebook_path + "'";
kernel.execute(command); 
```

然后显示它：

```
print("NOTEBOOK_FULL_PATH:\n", NOTEBOOK_FULL_PATH) 
```

运行第一个**Javascript**单元不会产生任何输出。运行第二个**Python**单元会产生如下内容：

```
NOTEBOOK_FULL_PATH:
 /user/zeph/GetNotebookName.ipynb 
```

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2020-03-19T12:10:36.520

ipyparams包可以很容易地做到这一点[。](https://pypi.org/project/ipyparams/)

```
import ipyparams
currentNotebook = ipyparams.notebook_name 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-07-28T13:03:15.090

另一个 hacky 解决方案，因为我的笔记本服务器可以更改。基本上，您打印一个随机字符串，保存它，然后在工作目录中搜索包含该字符串的文件。while 是必需的，因为 save_checkpoint 是异步的。

```
from time import sleep
from IPython.display import display, Javascript
import subprocess
import os
import uuid

def get_notebook_path_and_save():
    magic = str(uuid.uuid1()).replace('-', '')
    print(magic)
    # saves it (ctrl+S)
    display(Javascript('IPython.notebook.save_checkpoint();'))
    nb_name = None
    while nb_name is None:
        try:
            sleep(0.1)
            nb_name = subprocess.check_output(f'grep -l {magic} *.ipynb', shell=True).decode().strip()
        except:
            pass
    return os.path.join(os.getcwd(), nb_name) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-10-22T17:36:19.280

假设您拥有 Jupyter Notebook 服务器的主机、端口和身份验证令牌，这应该适合您。它基于[这个答案](https://stackoverflow.com/a/44936664/3987765)。

```
import os
import json
import posixpath
import subprocess
import urllib.request
import psutil

def get_notebook_path(host, port, token):
    process_id = os.getpid();
    notebooks = get_running_notebooks(host, port, token)
    for notebook in notebooks:
        if process_id in notebook['process_ids']:
            return notebook['path']

def get_running_notebooks(host, port, token):
    sessions_url = posixpath.join('http://%s:%d' % (host, port), 'api', 'sessions')
    sessions_url += f'?token={token}'
    response = urllib.request.urlopen(sessions_url).read()
    res = json.loads(response)
    notebooks = [{'kernel_id': notebook['kernel']['id'],
                  'path': notebook['notebook']['path'],
                  'process_ids': get_process_ids(notebook['kernel']['id'])} for notebook in res]
    return notebooks

def get_process_ids(name):
    child = subprocess.Popen(['pgrep', '-f', name], stdout=subprocess.PIPE, shell=False)
    response = child.communicate()[0]
    return [int(pid) for pid in response.split()] 
```

示例用法：

```
get_notebook_path('127.0.0.1', 17004, '344eb91bee5742a8501cc8ee84043d0af07d42e7135bed90') 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-03-17T11:53:32.027

要了解为什么使用这些基于 JS 的解决方案无法获取笔记本名称，请运行此代码并注意在 python 完成单元/整个笔记本执行后消息框出现的延迟：

```
%%javascript

function sayHello() {
    alert('Hello world!');
}

setTimeout(sayHello, 1000); 
```

*   更多信息

Javascript调用是异步的，因此不能保证在python开始运行另一个单元格之前完成，该单元格包含期望这个笔记本名称变量已经创建的代码......导致`NameError`尝试访问应该包含笔记本名称的不存在变量时。

我怀疑这个页面上的一些赞成票在选民发现所有`%%javascript`基于解决方案最终都不起作用之前就被锁定了……当生产者和消费者笔记本单元一起执行（或快速连续）时。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-09-08T03:46:54.240

在 Jupyterlab 中还没有真正的方法可以做到这一点。但截至 2021 年 8 月，目前正在积极讨论/开发一种官方方式：

[https://github.com/jupyter/jupyter_client/pull/656](https://github.com/jupyter/jupyter_client/pull/656)

与此同时，达到`api/sessions`REST 端点`jupyter_server`似乎是最好的选择。这是该方法的清理版本：

```
from jupyter_server import serverapp
from jupyter_server.utils import url_path_join
from pathlib import Path
import re
import requests

kernelIdRegex = re.compile(r"(?<=kernel-)[\w\d\-]+(?=\.json)")

def getNotebookPath():
    kernelId = kernelIdRegex.search(get_ipython().config["IPKernelApp"]["connection_file"])[0]

    for jupServ in serverapp.list_running_servers():
        for session in requests.get(url_path_join(jupServ["url"], "api/sessions"), params={"token": jupServ["token"]}).json():
            if kernelId == session["kernel"]["id"]:
                return Path(jupServ["root_dir"]) / session["notebook"]['path'] 
```

经测试与

```
python==3.9
jupyter_server==1.8.0
jupyterlab==4.0.0a7 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-11-24T20:10:26.190

修改@jfb 方法，给出以下在 ipykernel-5.3.4 上运行良好的函数。

```
def getNotebookName():
    display(Javascript('IPython.notebook.kernel.execute("NotebookName = " + "\'"+window.document.getElementById("notebook_name").innerHTML+"\'");'))
    try:
        _ = type(NotebookName)
        return NotebookName
    except:
        return None 
```

**请注意**，显示的javascript需要一些时间才能到达浏览器，执行JS并返回内核也需要一些时间。我知道这听起来可能很愚蠢，但最好在两个单元格中运行该函数，如下所示：

```
nb_name = getNotebookName() 
```

并在以下单元格中：

```
for i in range(10):
    nb_name = getNotebookName()
    if nb_name is not None:
        break 
```

但是，如果您不需要定义函数，明智的方法是在一个单元格中运行`display(Javascript(..))`，并在另一个单元格中检查笔记本名称。这样，浏览器就有足够的时间执行代码并返回笔记本名称。

如果您不介意使用库，最可靠的方法是：

```
import ipynbname
nb_name = ipynbname.name() 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-09-24T05:25:10.563

如果我们一次执行多个单元格，所有基于 Json 的解决方案都会失败，因为直到执行结束后结果才会准备好（这不是使用睡眠或等待任何时间的问题，请自行检查，但请记住重新启动内核并运行所有测试）

基于以前的解决方案，这避免了使用 %% 魔法，以防您需要将它放在其他一些代码的中间：

```
from IPython.display import display, Javascript

# can have comments here :)
js_cmd = 'IPython.notebook.kernel.execute(\'nb_name = "\' + IPython.notebook.notebook_name + \'"\')'
display(Javascript(js_cmd)) 
```

对于python 3，以下基于@Iguananaut 的回答并针对最新的python 进行了更新，并且可能多个服务器都可以工作：

```
import os
import json
try:
    from urllib2 import urlopen
except:
    from urllib.request import urlopen
import ipykernel

connection_file_path = ipykernel.get_connection_file()
connection_file = os.path.basename(connection_file_path)
kernel_id = connection_file.split('-', 1)[1].split('.')[0]    

running_servers = !jupyter notebook list
running_servers = [s.split('::')[0].strip() for s in running_servers[1:]]
nb_name = '???'
for serv in running_servers:
    uri_parts = serv.split('?')
    uri_parts[0] += 'api/sessions'
    sessions = json.load(urlopen('?'.join(uri_parts)))
    for sess in sessions:
        if sess['kernel']['id'] == kernel_id:
            nb_name = os.path.basename(sess['notebook']['path'])
            break
    if nb_name != '???':
        break
print (f'[{nb_name}]') 
```

# django - django - 如何检查模型是否为空

> ID：12544061
> 
> 赞同：2
> 
> 时间：2012-09-22T13:10:48.803
> 
> 标签：django, django-models, django-views

我有设置表单页面。如果用户填写了一次表格；它必须显示这些值。但是如果没有数据 [第一次] 我得到查询错误。我需要那个查询，因为表单数据必须写成与当前用户[登录]相关。

这是我的观点部分：

```
@login_required(login_url='/login/')
def profile_page(request,username):
    query = Profile.objects.get(owner__username = username) ##error!
    if request.method == 'POST':
        form = profile_form(request.POST,instance=query)
        form.save()
        return HttpResponseRedirect('/admin/')
    else:
        form = profile_form(instance=query)

    return render_to_response('profile_save.html',{'form':form},context_instance = RequestContext(request)) 
```

我想我需要检查模型，如果它是空的，我应该做一些不同的事情。

我被困住了。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T13:22:14.000

您想使用`.exists()`queryset 选项

```
@login_required(login_url='/login/')
def profile_page(request,username):
    form = profile_form()
    if Profile.objects.get(owner__username = username).exists():
        query = Profile.objects.get(owner__username = username)
        if request.method == 'POST':
            form = profile_form(request.POST,instance=query)
            form.save()
            return HttpResponseRedirect('/admin/')
        else:
            form = profile_form(instance=query)

    return render_to_response('profile_save.html',{'form':form},context_instance = RequestContext(request)) 
```

有关详细信息，请参阅[QuerytSet API 参考](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.exists)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T13:23:05.223

您只需要将该`get`查询包装起来`try ... except`并将实例设置为无，就像这样。

```
from django.core.exceptions import ObjectDoesNotExist
@login_required(login_url='/login/')
def profile_page(request,username):
    try:
        query = Profile.objects.get(owner__username = username)

    #to be more specific you can except ProfileObjectDoesNotExist
    except ObjectDoesNotExist: 
        query = None  #Doesn't exist, set to None

    if request.method == 'POST':
        form = profile_form(request.POST,instance=query)
        form.save()
        return HttpResponseRedirect('/admin/')
    else:
        form = profile_form(instance=query)

    return render_to_response('profile_save.html',{'form':form},
                              context_instance = RequestContext(request)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T16:00:30.190

我想我可能为此目的使用了 get_or_create 。

```
Profile.objects.get_or_create(owner__username = username) 
```

# c# - 如何在 asp.net 的 smtp 配置中使用与凭据不同的发件人

> ID：12544062
> 
> 赞同：0
> 
> 时间：2012-09-22T13:10:49.007
> 
> 标签：c#, asp.net

嗨，在我的 Web 应用程序中，我们正在向不希望发件人作为电子邮件 ID 的人发送邮件，该`s birthday is in current week, so while sending mail i don`电子邮件 ID 用于 smtp 配置，我想使用不同的电子邮件 ID 作为发件人，

谁能告诉我如何实现这一目标，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:23:30.463

```
 /// <summary>
    /// Sends mail with authentification
    /// </summary>
    /// <param name="recipients"></param>
    /// <param name="from"></param>
    /// <param name="subject"></param>
    /// <param name="body"></param>
    /// <param name="isHTMLbody"></param>
    /// <param name="SMTPhost"></param>
    /// <param name="priority"></param>
    /// <param name="credentials"></param>
    /// <param name="port"></param>
    /// <param name="enableSsl"></param>
    public static void SendMailWithAuthentication(List<string> recipients, string from, string subject, string body, bool isHTMLbody,
        string SMTPhost, System.Net.Mail.MailPriority priority, System.Net.NetworkCredential credentials, int? port, bool enableSsl)
    {
        System.Net.Mail.MailMessage message = new System.Net.Mail.MailMessage();
        foreach (string recipient in recipients)
        {
            message.To.Add(recipient);
        }
        message.SubjectEncoding = Encoding.UTF8;
        message.BodyEncoding = Encoding.UTF8;
        message.Subject = subject;
        message.From = new System.Net.Mail.MailAddress(from);
        message.IsBodyHtml = isHTMLbody;
        message.Body = body;
        message.Priority = priority;
        System.Net.Mail.SmtpClient client = new System.Net.Mail.SmtpClient();
        client.Credentials = credentials;
        client.Host = SMTPhost;
        if (port != null)
        {
            client.Port = (int)port;
        }
        client.EnableSsl = enableSsl;
        client.Send(message);
        message.Dispose();
    } 
```

对于“发件人”参数，您可以根据需要使用任何电子邮件，因为它是有效的电子邮件地址。只是一个示例，它可能是“bill.gates2@microsoft.com”，它会起作用。

如果这不起作用，您应该联系您的电子邮件提供商，因为他们阻止您这样做。

# actionscript-3 - 在 Flex 中绘制实时视频 - 快照问题

> ID：12544065
> 
> 赞同：0
> 
> 时间：2012-09-22T13:11:05.567
> 
> 标签：actionscript-3, flash, flex4, video-capture

我正在做一个项目，我必须制作一个注释视频播放器！

基本上，我遵循本教程 [1]，其中作者介绍了如何使用 Flex 在自己的网络摄像头上绘制（在本例中只是一个矩形）。

一切都很顺利，但现在我想添加一个侦听器来获取图像的快照（我绘制的内容 + 网络摄像头图像），然后将其保存在我的计算机上。

我已经创建了监听器，但问题是这个监听器只保存来自网络摄像头的图像而没有我的绘图（即使我将该绘图添加到摄像头）。

```
private function save():void {

    var bitmapData:BitmapData = new BitmapData(videoDisplay.width,videoDisplay.height);
    bitmapData.draw(videoDisplay);

    var ba:ByteArray = (new PNGEncoder()).encode(bitmapData);
    (new FileReference()).save(ba, "doodle.png");       
} 
```

我根本没有使用 Flex/Flash 的经验，所以也许我做错了。

你能帮我么？

[1]http://narinderkumar.wordpress.com/2012/02/16/drawing-on-live-video-in-flex/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T14:22:22.960

这个例子工作正常 - 我没有看到你的代码片段中的问题，但也许你只是在视频上绘制可见图形，在这种情况下图形层在相机后面......希望帽子有帮助;）

```
package
{
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.display.Sprite;
    import flash.display.StageAlign;
    import flash.display.StageScaleMode;
    import flash.events.Event;
    import flash.events.MouseEvent;
    import flash.media.Camera;
    import flash.media.Video;

    public class cameratest extends Sprite
    {
        private var holder:Sprite;
        private var layover:Sprite;
        private var display:Sprite;

        public function cameratest()
        {
            stage.scaleMode = StageScaleMode.NO_SCALE;
            stage.align     = StageAlign.TOP_LEFT;

            var cam:Camera = Camera.getCamera();
            var video:Video     =new Video(cam.width, cam.height);
            video.attachCamera(cam);

                    //holder hollds the video and on top the layover to draw on
            holder = new Sprite();
            stage.addChild(holder);
            holder.addChild(video);

            //layover to draw on                
            layover = new Sprite();
            holder.addChild(layover);

            //will show the snapshot
            display = new Sprite();
            display.x= 350;
            stage.addChild(display);

            //listener for onclick do snapshot
            stage.addEventListener(MouseEvent.CLICK, drawAndSave);
        }
        private function drawAndSave(E:Event=null):void{
            layover.graphics.beginFill(0xff0000,1);
            layover.graphics.drawCircle(10,10,10);

            var bmd:BitmapData=new BitmapData(holder.width,holder.height);
            bmd.draw(holder);

            var bmp:Bitmap = new Bitmap(bmd,'auto',true);
            display.addChild(bmp);
        }
    }
} 
```

# iphone - iPhone xcode 4.5 armv 6 通用应用

> ID：12544067
> 
> 赞同：1
> 
> 时间：2012-09-22T13:11:11.683
> 
> 标签：iphone, xcode, armv7, ios-universal-app, armv6

我有一个通用应用程序，现在我为 iphone 5 创建了一个更新但我无法通过苹果 bc 发送我的应用程序警告：必须至少存在以下架构之一：armv6 我在目标中添加了 armv 6 armv 7 i389 -> 建筑师但不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:28:45.323

Apple 放弃了对带有 iOS 6 SDK 的 armv6 的支持，并且 XCode 4.5 不支持为 armv6 架构构建二进制文件，您必须将其从目标中删除。

# c++ - 需要澄清 getchar() 和换行符

> ID：12544068
> 
> 赞同：5
> 
> 时间：2012-09-22T13:11:32.397
> 
> 标签：c++, c, getchar

`getchar()`我对使用读取用户输入的字符有疑问。

```
char char1, char2;
char1 = getchar();
char2 = getchar(); 
```

我需要`2`从用户那里获取字符作为输入。在这种情况下，如果用户输入字符`'A'`后跟 a `newline`，然后是字符`'B'`，将存储什么`char2`- 是换行符还是字符`'B'`？

我在 Windows 上的 CodeBlocks 上尝试过，`char2`实际上存储了换行符，但我打算存储字符`'B'`.

我只想知道预期的行为是什么，以及它是否依赖于编译器？如果是这样，turbo C和mingW之间有什么区别？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-22T13:19:35.127

是的，您必须在每次输入后使用换行符：

```
char1 = getchar();
getchar(); // To consume `\n`
char2 = getchar();
getchar(); // To consume `\n` 
```

这不依赖于编译器。这适用于所有平台，因为每个输入行的末尾都会有回车（尽管实际换行可能因平台而异）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T13:18:42.777

> 我只想知道预期的行为是什么，以及它是否取决于编译器？

这是预期的行为，与编译器无关。

您可以使用`scanf`读取 A 后跟换行符，然后读取 B 后跟换行符。如果您想坚持使用`getchar()`，则只需将输入输入为`AB`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T15:55:05.923

您可以通过显式测试来防止读取换行符。而不是简单地使用

```
getchar(): 
```

你可以使用这样的东西

```
while((char1 = getchar()) == '\n'); 
```

如果您在 Windows 上，您可能还想测试 '\r' 。所以代码稍作改动。

```
while((char1 = getchar()) == '\n' || char1 == '\r'); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-22T13:43:58.903

在语句之间添加`fflush(stdin);`语句。看这个

```
ch1=getchar();

fflush(stdin);
ch2=getchar(); 
```

# algorithm - 数组中对象的所有组合

> ID：12544069
> 
> 赞同：-1
> 
> 时间：2012-09-22T13:11:46.203
> 
> 标签：algorithm, loops, combinations, minimum

我有一个包含数字的数组，并希望遍历它们的所有组合以计算所选数字与其余数字之间的最小差异。这样的循环会是什么样子？我试图找到一个解决方案，但不知何故，找到这样的算法似乎并不容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:18:25.367

解决您的实际问题，即

> 计算所选数字与其余数字之间的最小差异

或者换句话说

> 选择数字，使选择的总和最接近总和的一半

或者换句话说

> 背包问题的变体

现在，您可以快速搜索，因为那里有各种解决方案。

# php - 递归查询字符串解析器

> ID：12544070
> 
> 赞同：1
> 
> 时间：2012-09-22T13:12:05.723
> 
> 标签：php, parsing, query-string

我需要一个将查询字符串解析为多维数组的函数。查询字符串可能看起来像这样：

```
?fields=incidents:(id,shortdescription,action,request);people:(unid,name)&format=json 
```

返回的数组应该是这样的：

```
array(
   'fields' => array(
      'incidents' => array(
         'id',
         'shortdescription',
         'action',
         'request'
      ),
      'people' => array(
         'unid',
         'name'
      ),
   ),
   'format' => 'json'
); 
```

我希望分隔符是动态的，因此它们将驻留在这样的数组中：

```
$separators = array(';', ':', ','); 
```

此数组中分隔符的顺序将决定查询字符串的解析顺序。

有人有这样的方便吗？？？

问候，

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T14:54:04.120

我自己，我想出了这个：

```
protected static function split( $value, $sep = ',' )
{   
    if ( str_contains( $value, $sep ) ) 
        $value = explode( $sep, $value );

    return $value;
} 

protected static function multi_split( $value )
    {
        $arr = array();

        // Do we have multiple models?
        $parts = static::split( $value, '+' );        
        if ( count( $parts ) > 1 ) {
            foreach( $parts as $part ) {
                $models = static::split( $part, ':' ); 
                if ( count( $models ) > 1 ) {
                    $fields = static::split( trim($models[1], '()'), ',' );                   
                    $arr[$models[0]] = $fields;   
                }   
            }             

            return $arr;  
        } 

        // Do we have a single model?
        $parts = static::split( $value, ':' ); 
        if ( count( $parts ) > 1 ) {
            $fields = static::split( trim($parts[1], '()'), ',' );               
            $arr[$parts[0]] = $fields;

            return $arr;  
        } 

        // Do we have a comma-separated param?
        $parts = static::split( $value, ',' );
        if ( count( $parts ) > 1 ) 
            return $parts; 

        // Do we have a string param?
        return $value;

    } 
```

我想摆脱很多重复。而且，它还不是很动态！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T13:32:35.467

为了让你开始：

```
$final = array();
$keys = explode("&", $_SERVER['QUERY_STRING']);
foreach ($keys as $key => $value) {

    $final[$key] = $value;

    $child = explode(";", $value);
    foreach ($child as $key2 => $value2) {
        $final[$key][$key2] = array();

        $subchild = explode(":", $value2);
        foreach ($subchild as $key3 => $value3) {
            $subsubchild = explode(",", $value3);
            $final[$key][$key2][$key3] = $subsubchild;
        }
    }
} 
```

我没有对此进行测试，但希望能知道我要去哪里......

这可以更新以创建一个接受分隔符的函数以使其真正递归，这样您就可以调用该函数，而不是在循环内的循环内有一个循环......

# php - 如何使用 android 中的 HTTP 将存储在 android 中的 SQLite db 上的数据发送到 PHP 网络服务器

> ID：12544072
> 
> 赞同：3
> 
> 时间：2012-09-22T13:12:18.913
> 
> 标签：php, android, http

有没有办法以格式提交存储在 android SQLite 数据库中的数据

```
------------------------------------------
ID PRODUCT_ID AMOUNT
------------------------------------------
1 001 4
2 008 5
3 006 2

```

在 android 中使用 HTTP 到 PHP Web 服务器。我正在为特定交易维护一个本地数据库，在用户完成交易后，我想将这些数据提交到网络系统。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T13:21:51.277

1.  将数据库的每一行转换为[JSONObject](http://developer.android.com/reference/org/json/JSONObject.html)并将所有行存储到[JSONArray](http://developer.android.com/reference/org/json/JSONArray.html)

2.  使用 jsonArray.toString() 将 JSONArray 转换为 json 字符串并发出[HTTP POST 请求](http://digitallibraryworld.com/?p=189)。确保将 Content-Type 参数设置为 application/json

3.  在服务器端，相应地处理请求并将其存储到数据库中。

注意：如果您有大量数据，最好批量传输 JSON 对象。您可以在重建数据库时向请求添加参数以表示批次 ID。

编辑：我假设您知道如何将游标提取到数据库。

您可以使用以下代码

```
JSONObject jObject;
JSONArray jArray = new JSONArray()

while(cursor.moveToNext()) {

    jObject = new JSONObject();
    jObject.put("id", cursor.getInt("ID"));
    jObject.put("product_id", cursor.getString("PRODUCT_ID"));
    jObject.put("amount", cursor.getInt("AMOUNT"));
    jArray.put(jObject);

} 
```

在构建 HTTP POST 请求时，请`jArray.toString()`获取表示数组的 JSON 字符串。希望这可以帮助。

# php - 在类文件中使用 PHP 常量

> ID：12544076
> 
> 赞同：0
> 
> 时间：2012-09-22T13:12:38.580
> 
> 标签：php, oop, constants

我正在尝试构建一个连接到单个数据库的简单脚本。我想将类文件放到我的许多网站上，并希望能够在我的数据库中“注册”该网站。

为了避免必须为类的每个实例运行 SQL 查询，我想使用 PHP 常量“注册”域。

在我的方法中，我定义了常量并检查了它 - 它可以工作，但是当我在构造函数中检查常量时，不再定义常量。

这是我的类文件，我确定这只是我对常量不了解的东西。

```
 <?php

/** 
 * @author bailz777
 * 
 * 
 */
class db_interface {

    public $ServerName = 'localhost:3306'; //hostname:port
    public $UserName = '******'; //mysql user
    public $Password = '******'; //mysql password
    public $DataBase = '******'; //database name
    public $Domain = 'test.com'; //Full domain name (no host)
    public $con = '';

    function __construct() {

        //on construction, we must ensure that the domain is registered in our system
        //first check if it was defined locally to avoid extra DataBase Work
        var_dump(defined('DOMAIN_REGISTERED'));
        if(!defined('DOMAIN_REGISTERED')) {
            $this->db_connect();
            $result = $this->validate_domain();
            if($result) {
                echo "<p>Domain Validated!!</p>";
            }
            $this->db_disconnect();     
        }
        else {
            echo "<p>Domain Validated!!</p>";
        }
    }

    /**
     * 
     */
    function __destruct() {

    }

    /**
     * 
     * @param unknown_type $domain
     * @return boolean
     */
    private function validate_domain() {
        $constants = get_defined_constants();
//      return $this->con;
//      print_r($constants);
var_dump(defined('DOMAIN_REGISTERED'));
        if(defined('DOMAIN_REGISTERED')) {//Check DOMAIN_REGISTERED to avoid unnecessary db work
            return TRUE;
        }
        elseif (!defined('DOMAIN_REGISTERED')) {//Check the domain is in the db
            echo '<p>Domain was not locally registered, checking DataBase</p>';
            $query = "SELECT `name` FROM `$this->DataBase`.`registered_domains` WHERE `name` = '$this->Domain'";
            $result = mysql_query($query,$this->con);
            //var_dump($result);
            if(!$result) {
                die('No result found : ' . mysql_error());
            }
            elseif (mysql_num_rows($result)==0) { //if no rows returned, then domain is not in DataBase 
                $domain_exists = FALSE;
            }
            elseif (mysql_num_rows($result)>0) { //if rows returned, then domain is in DataBase
                $domain_exists = TRUE;
                //If a domain does not exist, a mysql will be passed, use @ to suppress the error
                //The domain will be written to the db and on the next run of this function, the 
                //constant will be defined
            }
            if($domain_exists) {//If it exists Then assign CONSTANT DOMAIN_REGISTERED to TRUE
                echo '<p>Domain Found in DataBase</p>';
                echo '<p>Registering domain locally</p>';
                define("DOMAIN_REGISTERED", TRUE);
                if(DOMAIN_REGISTERED) {
                    echo '<p>Successfully registered domain locally</p>';
                }
                //var_dump(defined('DOMAIN_REGISTERED'));
                //echo DOMAIN_REGISTERED;
                return TRUE;
            }
            elseif(!$domain_exists) {//If it does not exist then add it to the registered_domains table, and assign CONSTANT __DOMAIN_TRUE__ to TRUE
                echo '<p>Domain not found in DataBase</p>';
                echo '<p>Now Registering Domain</p>';
                $query = "INSERT INTO `$this->DataBase`.`registered_domains` (`name`) VALUES ('$this->Domain')";
                $result = mysql_query($query);
                if(!$result) {
                    die('Domain not added : ' . mysql_error());
                }
                else{
                    define("DOMAIN_REGISTERED", TRUE);
                    return TRUE;
                }
            }
        }       
    }

    //Connect to mysql and define the active database
    private function db_connect() {
        $this->con = $con = mysql_connect($this->ServerName,$this->UserName,$this->Password);
        if (!$con) {
            die('Could not connect: ' . mysql_error());
        }
        else {
            echo 'Successfully connected to MySQL<br />';
            //define active database
            $this->db = mysql_select_db($this->DataBase);
            if(!$this->db) {
                die('Could not connect to Database : ' . mysql_error());
            }
            else {
                echo 'Successfully connected to DataBase<br />';
            }
        }
    }

    //disconnect from mysql
    private function db_disconnect() {
        $close =  mysql_close($this->con);
        if($close) {
            echo 'Successfully disconnected from MySQL<br />';
        }
    }

    public function add_record($fname,$lname,$email) {
        $ip = $_SERVER['REMOTE_ADDR'];
        $authorized_date = time();

    }
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:21:45.560

您可以尝试使用静态类变量来保存该值。一方面，这会将你的常量值限制在你的类中，这比将值暴露给整个应用程序更好。另一方面，常量的目的是它们永远不会改变，看起来你正试图将它用作标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T13:27:22.377

构造函数是创建对象后立即调用的第一个函数。

如果您在类中的某个其他函数中定义一个常量，则不能期望它在构造函数中定义。原因如下：

*   当你创建一个对象 - 构造函数被调用
    *   在构造函数中，您正在检查是否定义了一个常量：当然不是，您在哪里定义的？
*   您正在类中调用某个函数并定义一个常量
*   下次创建对象时（即页面刷新） - 不再定义常量

这是完全正常的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T13:33:09.060

我认为您可能没有按照预期的方式使用常量。首先，常量值在代码执行期间不能改变（因此是常量）。

我们使用它们来分配我们可以在整个代码中使用的硬编码值（只有非常简单的值）。关键是你最终可以知道它们永远不会不同。

除此之外，您不必知道常量本身的实际值，因为您只需引用变量名称，允许在任何时候更改这些值而不会破坏您的代码。

考虑以下示例：

```
<?php

class pizza
{
  const SIZE_SMALL  = 1;
  const SIZE_MEDIUM = 2;
  const SIZE_LARGE  = 3;

  public function getCookingTime($size)
  {
    if ($size == self::SIZE_SMALL) {
      $time = 10;
    } else if ($size == self::SIZE_MEDIUM || $size == self::SIZE_LARGE) {
      $time = 15;
    }
    return $size;
  }
}

$pizza = new pizza();
$time  = $pizza->getCookingTime(3);

// or more usefull:

$time = $pizza->getCookingTime(pizza::SIZE_SMALL);

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T13:23:53.173

我找不到您`define('DOMAIN_REGISTERED', '...');`在代码中调用的任何地方。
无论如何，正如monitorjbl所提到的，考虑`static`为您的数据库连接使用保留字，这样您就可以避免重新定义连接、重新注册您的域等。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-22T13:24:21.680

你想掌握OO编程是一件好事。一个（众多）优点是您可以构建可重用和可测试的代码。

如果您想构建一个连接到数据库的类，并且可以在许多站点中重用，那么您要避免的一件事是**依赖**项。对常量或其他类的依赖使重用代码变得更加困难。或者**测试**和**调试**您的代码。

这么说意味着您要避免使用预定义的常量和预初始化的公共。

你的类的结构应该是这样的：

```
class mydb
{
   private $host;
   private $database;
   ..

   public function __construct($host, $database ..)
   {
     $this->host = $host;
     $this->database = $database;
   }
} 
```

你可以像这样使用你的类：

```
$mydb = new mydb('localhost', 'mydatabase', ..); 
```

如果您希望能够将站点注册到您的数据库，请编写一个 Register 方法：

```
class mydb
{
   private $host;
   private $database;
   ..

   public function __construct($host, $database ..)
   {
     $this->host = $host;
     $this->database = $database;
   }

   public function Register( $domainname )
   {
      //connect to the database and do register stuff
   }
} 
```

并像这样使用它：

```
 $mydb = new mydb('localhost', 'mydatabase', ..);
 $mydb->Register('MyDomain'); 
```

# math - 哪个程序解决变量的积分= 0？

> ID：12544077
> 
> 赞同：0
> 
> 时间：2012-09-22T13:12:44.117
> 
> 标签：math, wolfram-mathematica, calculus

我想知道如何在 Mathematica 中求解定积分。

![截屏](../Images/227a4acd9b77ac03d6d0237cf341b64d.png)

我确实知道除 b 之外的所有变量，并且需要求解 F(b)=0。

我如何在 Mathematica 中解决它？

这是我的尝试：

```
 NSolve[Integrate[1/(8*(1 - ff) (2 Pi)^0.5) E^(-0.5*((x - 1.1)/(1 - ff)/8)^2), {x, 0, 9999}] == -0.44531779637243296, ff] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T13:56:30.890

这些积分可以用误差函数简单地表示：[Wiki](http://en.wikipedia.org/wiki/Error_function)、[Mathworld](http://mathworld.wolfram.com/Erf.html)。因此，您需要一个库来 (i) 计算误差函数，(ii) 数值求解非线性方程。几乎任何语言都有此功能，因此请选择您熟悉的任何语言。在 Mathematica 中，查找`Erf`和`NSolve`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T13:18:19.190

我首先将它插入 Wolfram Alpha，然后看看它会给你什么。

Mathematica 应该可以做到。当 R 出现时，我首先想到统计；我不知道它的微积分能力。Excel 不是首选。

如果我是你，我会少担心软件，多担心解决方案本身。这种形式的功能可能是众所周知的。绘制每一个并直观地检查函数的外观以及它们集成的难易程度。

像这样：

[http://www.wolframalpha.com/input/?i=graph+exp%28-%28%28x%2B5%29%2F1.5%29%5E2%29](http://www.wolframalpha.com/input/?i=graph+exp%28-%28%28x%2B5%29%2F1.5%29%5E2%29)

你应该想知道为什么它是三个看起来相似的积分。情节中的那些奇点告诉你原因。

如果没有封闭形式的解决方案，您将不得不使用数字解决方案。您必须选择一种算法（简单的 Euler 或 Runga Kutta 或其他）、区间大小等。您需要了解奇异点以及如何最好地解决它们。

选择套餐只是开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T13:20:07.477

您可能会发现[http://r.789695.n4.nabble.com/calculus-using-R-td1676727.html](http://r.789695.n4.nabble.com/calculus-using-R-td1676727.html)很有帮助。

# javascript - 安装 phantomjs 的建议

> ID：12544078
> 
> 赞同：0
> 
> 时间：2012-09-22T13:12:50.983
> 
> 标签：javascript, phantomjs

我第一次尝试使用 phantomjs，虽然我很努力将它安装在 Windows 7 上。我使用[http://phantomjs.org/build.html上的安装指南](http://phantomjs.org/build.html)

在我的 DOS 命令提示符中，我导航到了我的 `D:\openssl\openssl-1.0.0-beta1`文件夹并输入了以下命令：

```
perl Configure VC-WIN32 no-asm --prefix=C:\openssl 
```

但它不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T13:22:00.893

如果您只想“安装”（使用）它，那么只需从[http://phantomjs.org/download.html获取 exe（在 zip 中）](http://phantomjs.org/download.html)

# android - 什么样的手机会更新到Android 4.0.3或4.1版本？

> ID：12544079
> 
> 赞同：0
> 
> 时间：2012-09-22T13:12:53.987
> 
> 标签：android, android-layout, mobile, android-emulator, screen

我在 Android 模拟器下制作了一个应用程序，提供的所有类型的处置（小、正常、大、xlarge）（-ldpi、-mdpi、-hdpi、-xhdpi）都可以完美运行。但是最近几天我看到，在一些最新版本的 android 手机中（这些手机像平板电脑一样具有较低的栏）看起来不正常。

所以我的问题是：什么样的手机有或者可以升级到这些版本的安卓？(small-HDPI, normal-HDPI, normal-xhdpi???)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:18:57.197

从理论上讲，没有什么能阻止制造商制造能够运行 ICS 或 JB 的 ldpi 设备。然而，在实践中，大多数具有 ldpi 甚至 mdpi 的设备在某种程度上在 CPU 和 GPU 部门都没有足够好的处理器来运行更新版本的 Android。

迄今为止，我见过的最低屏幕显示 ICS 设备是正常 mdpi 显示。但是，我不知道存在的每个设备的详细信息，并且可能还有更低的设备。

您应该在设计应用时牢记所有设备配置，最多只排除 ldpi 和小型显示器。

# javascript - 警报 javascript 生成的 div id

> ID：12544080
> 
> 赞同：1
> 
> 时间：2012-09-22T13:12:54.647
> 
> 标签：javascript, jquery, html

我用 .append() 方法生成了一些 div。

代码如下所示：

```
$("#someDiv").prepend("<div id='someId' class='myClass'></div>"):
$("#someDiv").prepend("<div id='someId2' class='myClass'></div>"): 
```

这很好用，现在，我想使用那个 div id。

我正在尝试这样做：

```
$(".myClass").click(function(){
    alert($(this).attr('id'));
}) 
```

但是，它不起作用，请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T13:14:32.687

如果元素是动态生成的，您可能需要将事件委托给绑定处理程序时实际存在的元素，例如：

```
$(function() {
    $("#someDiv").on("click", ".myClass", function(){
        alert(this.id);
    });
}); 
```

你需要用分号替换你末尾的冒号才能使这些工作。

[**小提琴**](http://jsfiddle.net/XZVgT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T13:22:17.423

问题可能是因为您在实际添加 div 之前将单击事件绑定到“myClass”。尝试在添加新 div 的代码之后放置单击事件代码，如下所示

```
$("#someDiv").prepend("<div id='someId' class='myClass'></div>"):
$("#someDiv").prepend("<div id='someId2' class='myClass'></div>"):

$(".myClass").click(function(){
    alert($(this).attr('id'));
}) 
```

# objective-c - drawRect：在自定义 NSView 中忽略自己的实例变量

> ID：12544082
> 
> 赞同：0
> 
> 时间：2012-09-22T13:13:38.527
> 
> 标签：objective-c, macos, cocoa, class

我有一个名为“testClass”的自定义 NSView 类。我在我的主应用程序控制器类中创建了这个类的一个实例。testClass 包含一个 4 元素浮点数组作为实例变量，用于保存 NSView 的背景颜色。我想从主控制器类中设置这些值，然后 drawRect: 应该使用它们来绘制背景。但是，当我设置值时，drawRect 拒绝查看它们。它们始终为 0.0。

在 Interface Builder 中，我将自定义视图放在应用程序 MainMenu.xib 的主窗口中。然后我将它分配给 testClass。

这是我的代码：

```
@interface testClass : NSView
{
    @public
    float colors[4];
}
@end

@implementation testClass
-(void)drawRect:(NSRect)dirtyRect
{
    //The colors are ALWAYS 0.0, 0.0, 0.0:
    fprintf(stderr,"colors: %.2f %.2f %.2f\n",colors[0],colors[1],colors[2]);

    NSColor *c = [NSColor colorWithCalibratedRed:colors[0] green:colors[1] blue:colors[2] alpha:1.0];
    [c setFill];

    NSRectFill(dirtyRect);
}
@end

//Now, in the main app controller:
testClass *test = [[testClass alloc] init];
test->colors[0] = 1.00; //r
test->colors[1] = 0.75; //g
test->colors[2] = 0.25; //b
test->colors[3] = 1.00; //a

[test setNeedsDisplay:YES];

//This prints the colors as they should be:
fprintf(stderr,"colors: %.2f %.2f %.2f\n",
    test->colors[0],
    test->colors[1],
    test->colors[2]); 
```

为什么即使我从创建自定义类的类中调用 setNeedsDisplay:YES，自定义视图也无法识别自己的变量？如果我试图做的事情不起作用，那么正确的方法是什么？

**更新：**

正如 user1118321 所指出的，我使用 [[testClass alloc] init] 行创建的 testClass 实例不是我应该做的。由于我已经在 Interface Builder 中以自定义视图的形式拥有了一个 testClass 实例（我为其分配了“testClass”），因此我只需要在主控制器类中创建一个指向它的指针作为 IBOutlet。一旦我这样做了，它就起作用了！

# php - 将一个测试代码的动态生成的文本框和下拉列表数据保存到数据库中

> ID：12544083
> 
> 赞同：0
> 
> 时间：2012-09-22T13:13:40.087
> 
> 标签：php, javascript, html

我创建了一个表单，其中包含测试代码、测试名称、测试参数是文本框和仪器代码是下拉列表并且还包含单击添加另一个按钮为新测试参数添加另一个按钮文本框和新仪器的下拉列表将生成代码我想保存新生成的测试参数文本框数据和新生成的单个测试代码的仪器代码下拉列表数据的数据..

我已经创建但它无法保存动态生成的新的多个文本框数据和生成的仪器代码下拉列表数据请指导我。这是我的PHP代码：

```
<?php
    global $Hostname;   
    global $Username;   
    global $Password;           
    global $Database_name;  

function getConnection()    
{
    $Hostname = "localhost";    
    $Username ="root";
    $Password ="";
    $Database_name="labdata";

    $oMysqli = new mysqli($Hostname,$Username,$Password,$Database_name);    

    return($oMysqli);
}
    include_once "dTestCreation.php";   
    if(isset($_POST['submit'])) 
    {

    $Testcode = $_POST['testcode'];
    $TestName = $_POST['testname'];
    $Testparameter = $_POST['testparameters'];
    $Instrumentcode = $_POST['instrument_code'];

    $InsertQuery = "INSERT INTO demo_test(testcode,testname) VALUES('$Testcode','$TestName')";  //query for insert data into table
    $oMysqli=getConnection();       //establish connection
    $oMysqli->query($InsertQuery);

    $InsertQuery1 = "INSERT INTO test_table(testcode,testparameters,instrument_code) VALUES('$Testcode','$Testparameter','$Instrumentcode')";    
    $oMysqli=getConnection();       //establish connection
    $oMysqli->query($InsertQuery1);
    }
?>
<html>
<head>
<title>TestData</title>
<script type="text/javascript"> 
function create_row()   //create function create_row
{
    var newtr=document.createElement("tr");  //variable for tr
    var newtd=document.createElement("td");  //variable for  td 
    var newtd1=document.createElement("td"); //variable f 
    var output="<input type=\"text\" name=\"testparameters[]\">";
    /*var output1="<select name=\"instrument_name\"><option value='$tResult[$kkk]'>tResult[$kkk]</option></select>";*/
    var output1="<select id=\"instrument_code\"><?php include_once "dTestCreation.php"; //include file dTestCreation.php 
    $tResult = getIname();  
    for($kkk=0;$kkk<count($tResult);$kkk++)
    {
        echo "<option value=".$tResult[$kkk].">".$tResult[$kkk]."</option>";    
    }//display values of instrument into list.
?></select>";
      newtd.innerHTML=output;  //display first td
      newtd1.innerHTML=output1; //display second td
      newtr.appendChild(newtd); //increment no of rows.
      newtr.appendChild(newtd1);
      document.getElementById("table1body").appendChild(newtr);
   }
</script>
</head>
<body>

<form name="testdetails" method="post" target="_self" action="<?php $_PHP_SELF ?>">

<label for='Testcode'>Testcode</label>
<input type="text" name="testcode"></input>

<label for='TestName'>TestName</label>
<input type="text" name="testname"></input><br></br>

<label for='Testparameter'>Testparameter</label>
<input type="text" name="testparameters"></input>

<label for='Instrumentcode'>Instrumentcode</label>
<select name="instrument_code">
    <?php 
    $tResult = getIname();                      for($kkk=0;$kkk<count($tResult);$kkk++) //loop for incremenet code hereted value display in listbox.
{
    echo "<option value=".$tResult[$kkk].">".$tResult[$kkk]."</option>";    
}`enter code here`
?>
    </select>

    <table>
      <tbody id="table1body">
           <tr>
    <!--<td><input type="textfield" name="testparameters"></td>-->
         <td> <input type="button" name="button" value="Add Test Parameter" onclick="create_row()"> <!--call function create_row() for onclik add new row-->
      </tr>
    </tbody>
   </table>
   <input type="submit" name="submit" value="submit"></input>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:33:19.143

1）您在自动生成的下拉列表中错过了名称属性，因此如果没有名称属性，您将无法将数据输入 php 脚本。

2）您新生成的文本框名称 = testparameters[] 哪个数组，因此您无法仅使用 $_POST['testparameters'] 获取值。要获得价值，您必须遍历数组。

```
foreach($_POST['testparameters'] as $value) {
 // here , you get dynamically added texbox values.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:02:55.150

再次尝试循环，但仍然无法将值存储到无法计数下拉列表值&&测试参数文本框保存数组关键字我尝试的内容这是我的代码：

```
<?php
    include_once "dTestCreation.php";   
    if(isset($_POST['submit'])) //when clikc on submit button
    {

    $Testcode = $_POST['testcode'];
    $TestName = $_POST['testname'];
    $Testparameter = $_POST['testparameters'];
    $Instrumentcode = $_POST['instrument_code'];

    $InsertQuery = "INSERT INTO demo_test(testcode,testname) VALUES('$Testcode','$TestName')";  //query for insert data into table
    $oMysqli=getConnection();       //establish connection
    $oMysqli->query($InsertQuery);
    //print_r($InsertQuery);exit();

    $length = count($_POST['testparameters']);
    for($i=0;$i<$length;$i++)
         {
            //echo $_POST['testparameters'][$i];
            $a =  $_POST['testparameters'][$i];

            $na = array('testparameters' => $a['testparameters']);
            foreach($na as $k => $v)
            {
                $na[$k] = mysql_real_escape_string($v);
            }
            $TestParameters = $na['testparameters'];

            //$TestParameters = $_POST['testparameters'][$i];
            $InsertQuery1 = "INSERT INTO test_table(testcode,testparameters,instrument_code) VALUES('$Testcode','$Testparameter','$Instrumentcode')";   //query for insert data into table
            $oMysqli=getConnection();       //establish connection
            $oMysqli->query($InsertQuery1);

        }

    }   
?>
<html>
<head>
<title>TestData</title>
<script type="text/javascript"> 
function create_row()   //create function create_row
{
    var newtr=document.createElement("tr");  //variable for tr
    var newtd=document.createElement("td");  //variable for  td 
    var newtd1=document.createElement("td"); //variable f 
    var output="<input type=\"text\" name=\"testparameters[]\">";
    /*var output1="<select name=\"instrument_name\"><option value='$tResult[$kkk]'>tResult[$kkk]</option></select>";*/
    var output1="<select id=\"instrument_code\" name=\"instrument_code\"><?php include_once "dTestCreation.php";    //include file dTestCreation.php 
    $tResult = getIname();  
    for($kkk=0;$kkk<count($tResult);$kkk++)
    {
        echo "<option value=".$tResult[$kkk].">".$tResult[$kkk]."</option>";    
    }//display values of instrument into list.
?></select>";
      newtd.innerHTML=output;  //display first td
      newtd1.innerHTML=output1; //display second td
      newtr.appendChild(newtd); //increment no of rows.
      newtr.appendChild(newtd1);
      document.getElementById("table1body").appendChild(newtr);
   }
</script>
</head>
<body>

<form name="testdetails" method="post" target="_self" action="<?php $_PHP_SELF ?>">

<label for='Testcode'>Testcode</label>
<input type="text" name="testcode"></input>

<label for='TestName'>TestName</label>
<input type="text" name="testname"></input><br></br>

<label for='Testparameter'>Testparameter</label>
<input type="text" name="testparameters"></input>

<label for='Instrumentcode'>Instrumentcode</label>
<select name="instrument_code">
                    <?php 
                        $tResult = getIname(); //call function getIname() included in file dTestCreation.php
                        for($kkk=0;$kkk<count($tResult);$kkk++) //loop for incremented value display in listbox.
                        {
                            echo "<option value=".$tResult[$kkk].">".$tResult[$kkk]."</option>";    //Instrument values display in listbox
                        }
                    ?>
    </select>

    <table>
      <tbody id="table1body">
           <tr>
    <!--<td><input type="textfield" name="testparameters"></td>-->
         <td> <input type="button" name="button" value="Add Test Parameter" onclick="create_row()"> <!--call function create_row() for onclik add new row-->
      </tr>
    </tbody>
   </table>
   <input type="submit" name="submit" value="submit"></input>
</form>
</body>
</html> 
```

# python - 在 Python 中使用递归函数计算扩展 gcd

> ID：12544086
> 
> 赞同：2
> 
> 时间：2012-09-22T13:14:31.110
> 
> 标签：python, recursion

给我函数gcd，定义如下：

```
def gcd(a, b):
    if (0 == a % b):
        return b
    return gcd(b, a%b) 
```

现在我被要求编写一个递归函数`gcd2(a,b)`，它返回一个包含三个数字的列表`(g, s, t)`where`g = gcd(a, b)`和`g = s*a + t*b`.

这意味着您将`(a and b)`在`gcd(a, b)`函数中输入两个值。`g`它返回的值在下一个函数中相等。

然后将这些相同的`a`和`b`值调用到`gcd2(a, b)`. 然后使用递归部分来查找 s 和 t 的值，以便`g = s*a + t*b`。

我不确定如何解决这个问题，因为我无法真正想象*“停止条件”*会是什么，或者我将递归地循环到底是什么来实际找到`s`and `t`。谁能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T14:37:02.493

关键的见解是我们可以向后工作，在递归中找到and for `s`each `t`。所以说我们有和。我们需要使用几个值—— 、、和where*来*完成每次迭代。首先，让我们考虑基本 GCD 算法的每一步：`a``b``a = 21``b = 15``a``b``b % a` *`c``a = c * b + a % b`*

 *```
21 = 1 * 15 + 6
15 = 2 * 6  + 3
6  = 2 * 3  + 0 -> end recursion 
```

所以我们的 gcd ( `g`) 是 3。一旦有了它，我们就确定6`s`和`t`3 的 和。为此，我们从 开始，用`g`表示`(a, b, s, t = 3, 0, 1, -1)`：

```
3  = 1 * 3 + -1 * 0 
```

现在我们要消除 0 项。从基本算法的最后一行，我们知道 0 = 6 - 2 * 3：

```
3 = 1 * 3 + -1 * (6 - 2 * 3) 
```

简化，我们得到

```
3 = 1 * 3 + -1 * 6 + 2 * 3
3 = 3 * 3 + -1 * 6 
```

现在我们交换条款：

```
3 = -1 * 6 + 3 * 3 
```

所以我们有`s == -1`和`t == 3`为`a = 6`和`b = 3`。因此，鉴于 and 的这些值`a`，`b`应该`gcd2`返回`(3, -1, 3)`。

现在我们通过递归退一步，我们想要消除第 3 项。从基本算法的倒数第二行，我们知道3 = 15 - 2 * 6。再次简化和交换（慢慢来，这样你可以清楚地看到步骤......）：

```
3 = -1 * 6 + 3 * (15 - 2 * 6)
3 = -1 * 6 + 3 * 15 - 6 * 6
3 = -7 * 6 + 3 * 15
3 = 3 * 15 + -7 * 6 
```

所以对于这个级别的递归，我们返回`(3, 3, -7)`. 现在我们要消除 6 项。

```
3 = 3 * 15 + -7 * (21 - 1 * 15)
3 = 3 * 15 + 7 * 15 - 7 * 21
3 = 10 * 15 - 7 * 21
3 = -7 * 21 + 10 * 15 
```

瞧，我们已经计算了 21`s`和`t`15。

如此示意性地，递归函数将如下所示：

```
def gcd2(a, b):
    if (0 == a % b):
        # calculate s and t
        return b, s, t
    else:
        g, s, t = gcd2(b, a % b)
        # calculate new_s and new_t
        return g, new_s, new_t 
```

请注意，出于我们的目的，使用稍微不同的基本情况可以简化事情：

```
def gcd2(a, b):
    if (0 == b):
        return a, 1, -1
    else:
        g, s, t = gcd2(b, a % b)
        # calculate new_s and new_t
        return g, new_s, new_t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T14:05:57.960

基本情况（停止条件）是：

```
if a%b == 0:
    # a = b*k for the integer k=a/b
    # rearranges to b = -1*a + (k+1)*b
    #             ( g =  s*a + t*b )
    return (b, -1, a/b+1) # (g, s, t) 
```

然而，练习是重写递归部分：

```
g1, s1, t1 = gcd(b, a%b) # where g1 = s1*b + t1*(a%b)
g, s, t = ???            # where g = s*a + t*b
return (g, s, t) 
```

*根据`g1`,`s1`和`t1`...*归结为`a%b`根据`a`和重写`b`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T14:40:16.263

*“在 Python 中编写递归函数”*，至少在 CPython 中，为此而哭泣：请注意[http://docs.python.org/library/sys.html#sys.getrecursionlimit](http://docs.python.org/library/sys.html#sys.getrecursionlimit)。在我看来，这是对这个问题最重要的答案之一。请自己对此主题进行一些研究。此外，这个线程可能很有见地：[Python：Linux、Mac 和 Windows 的硬递归限制是什么？](https://stackoverflow.com/questions/2917210/python-what-is-the-hard-recursion-limit-for-linux-mac-and-windows)

总之，尽可能在 Python 中尝试使用迭代而不是递归方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-20T02:27:49.793

它基于欧几里得算法，使用更好的while循环继续递归甚至更好，更少执行

```
def gcd(m,n):
#assume m>= n
if m <n:
    (m,n) = (n,m)
if (m%n) == 0:
    return(n)
else:
    diff =m-n
    #diff >n ?Possible!
    return(gcd(max(n,diff),min(n,diff))) 
```

可以通过while循环更好

```
def gcd(m,n):
if m<n :
    (m,n) =(n,m)
while (m%n) !=0:
    diff =m-n
    (m,n) =(max(n,diff),min(n,diff))
return(n) 
```*

# r - R中的Predict.lm（） - 如何获得拟合值周围的非常量预测带

> ID：12544090
> 
> 赞同：15
> 
> 时间：2012-09-22T13:14:40.437
> 
> 标签：r, regression

所以我目前正在尝试绘制线性模型的置信区间。我发现我应该为此使用 predict.lm() ，但是我在真正理解该函数时遇到了一些问题，而且我不喜欢在不知道发生了什么的情况下使用函数。我找到了几个关于这个主题的方法，但只有相应的 R 代码，没有真正的解释。这是函数本身：

```
## S3 method for class 'lm'
predict(object, newdata, se.fit = FALSE, scale = NULL, df = Inf,
        interval = c("none", "confidence", "prediction"),
        level = 0.95, type = c("response", "terms"),
        terms = NULL, na.action = na.pass,
        pred.var = res.var/weights, weights = 1, ...) 
```

现在，我很难理解：

```
 1) newdata  
    An optional data frame in which to look for variables 
    with which to predict. If omitted, the fitted values are used. 
```

*   每个人似乎都为此使用 newdata，但我不太明白为什么。为了计算置信区间，我显然需要这个区间所针对的数据（比如观察次数、x 的平均值等），所以不能是它的意思。但后来：这是什么意思？

    `2) interval
    Type of interval calculation.`

*   好吧..但是什么是“无”？

    `3a) type
    Type of prediction (response or model term).`

    `3b) terms
    If type="terms", which terms (default is all terms)`

*   3a：我可以由此获得模型中一个特定变量的置信区间吗？如果是这样，那么 3b 是什么？如果我可以在 3a 中指定该术语，那么在 3b 中再次执行它就没有意义了。所以我想我又错了，但我不知道为什么。

我想你们中的一些人可能会想：为什么不试试这个呢？我会（即使它可能无法解决这里的所有问题），但我现在不知道该怎么做。因为我现在不知道 newdata 的用途，所以我不知道如何使用它，如果我尝试，我没有得到正确的置信区间。不知何故，如何选择数据非常重要，但我就是不明白！

编辑：我想补充一点，我的目的是了解 predict.lm 的工作原理。我的意思是我不明白它是否按我认为的方式工作。也就是说，它计算 y-hat（预测值），然后使用间隔的 upr/lwr 边界的每个加/减来计算几个数据点（看起来像一条置信线）？然后我会不明白为什么新数据中的长度必须与线性模型中的长度相同。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-22T14:31:34.117

补一些数据：

```
d <- data.frame(x=c(1,4,5,7),
                y=c(0.8,4.2,4.7,8)) 
```

拟合模型：

```
lm1 <- lm(y~x,data=d) 
```

具有原始 x 值的置信区间和预测区间：

```
p_conf1 <- predict(lm1,interval="confidence")
p_pred1 <- predict(lm1,interval="prediction") 
```

会议。和预测。具有新 x 值的区间（外推和比原始数据更精细/均匀的间隔）：

```
nd <- data.frame(x=seq(0,8,length=51))
p_conf2 <- predict(lm1,interval="confidence",newdata=nd)
p_pred2 <- predict(lm1,interval="prediction",newdata=nd) 
```

将所有内容绘制在一起：

```
par(las=1,bty="l") ## cosmetics
plot(y~x,data=d,ylim=c(-5,12),xlim=c(0,8)) ## data
abline(lm1) ## fit
matlines(d$x,p_conf1[,c("lwr","upr")],col=2,lty=1,type="b",pch="+")
matlines(d$x,p_pred1[,c("lwr","upr")],col=2,lty=2,type="b",pch=1)
matlines(nd$x,p_conf2[,c("lwr","upr")],col=4,lty=1,type="b",pch="+")
matlines(nd$x,p_pred2[,c("lwr","upr")],col=4,lty=2,type="b",pch=1) 
```

[![在此处输入图像描述](../Images/78ee4bfa6db01733088f43680348dfb6.png)](https://i.stack.imgur.com/dSttR.png)

使用新数据可以在原始数据之外进行外推；此外，如果原始数据稀疏或不均匀分布，则预测区间（不是直线）可能无法通过原始 x 值之间的线性插值很好地近似...

我不太确定“我的模型中一个特定变量的置信区间”是什么意思；如果你想要一个*参数*的置信区间，那么你应该使用`confint`. 如果您希望仅基于某些参数变化（忽略其他参数引起的不确定性）来预测变化，那么您确实想要使用`type="terms"`.

`interval="none"`（默认值）只是告诉 R 不要费心计算任何置信区间或预测区间，并且只返回预测值。

# regex - 关系运算符和引用值的正则表达式

> ID：12544093
> 
> 赞同：0
> 
> 时间：2012-09-22T13:15:30.413
> 
> 标签：regex

我有一个 sql 查询。我想允许用户只修改单引号内的关系运算符或值

我的输入字符串是。

```
Select * from defect where Quantity < '9' and Date <= curdate() and Date >=
date_sub(curdate(), interval '3' month) 
```

我正在尝试遵循模式来匹配上面的字符串。我还尝试了 ^ 开头和 $ 结尾。但无论如何都没有阳性结果

```
1\. Select * from defect where Quantity [<|(>)|(=)|(<=)|(>=)|(like)] '.*' and
Date [<|(>)|(=)|(<=)|(>=)|(!=)|(like)] curdate() and Date [<|(>)|(=)|(<=)|(>=)
|(!=)|(like)] date_sub(curdate(), interval '.*' month)

2\. Select * from defect where Quantity (<|(>)|(=)|(<=)|(>=)|(like)) '.*' and
Date (<|(>)|(=)|(<=)|(>=)|(!=)|(like)) curdate() and Date (<|(>)|(=)|(<=)|(>=)
|(!=)|(like)) date_sub(curdate(), interval '.*' month) 
```

**更新**需要指导为什么我的模式与我的输入字符串不匹配。可能是什么错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T16:21:18.450

还有更多问题：您错误地使用了方括号：

```
[<|(>)|(=)|(<=)|(>=)|(like)] 
```

意思是“下列字符中的一个：`<>()|=eikl`”。

使用括号而不是方括号，并合理分组：

```
([<>=]|[<>]=|like) 
```

此外，您应该更具体：使用`'[^']*'`而不是`'.*'`.

最后，如果你想匹配一个文字括号，你需要在你的正则表达式中转义它：

```
date_sub\(curdate\(\), interval '[^']*' month\) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T16:19:36.500

我找到了解决方案

我的模式 1 没问题，只是我必须在 '*' 之前放一个反斜杠，因为它在正则表达式中有特殊含义。反斜杠使其成为普通字符

```
Select \* from defect where Quantity [<|(>)|(=)|(<=)|(>=)|(like)] '.*' and
Date [<|(>)|(=)|(<=)|(>=)|(!=)|(like)] curdate() and Date [<|(>)|(=)|(<=)|(>=)
|(!=)|(like)] date_sub(curdate(), interval '.*' month) 
```

这是一个简单的问题。我已经知道这条规则，但可以在几个小时后解决它。

**更正**`[]`用括号替换方括号`()`和反斜杠放在常量括号之前`\(`和`\)`

```
Select \* from defect where Quantity (<|(>)|(=)|(<=)|(>=)|(like)) '.*' and
Date (<|(>)|(=)|(<=)|(>=)|(!=)|(like)) curdate\(\) and Date (<|(>)|(=)|(<=)|(>=)
|(!=)|(like)) date_sub\(curdate\(\), interval '.*' month\) 
```

# javascript - 如何从其 url 获取动态页面

> ID：12544096
> 
> 赞同：1
> 
> 时间：2012-09-22T13:15:49.243
> 
> 标签：javascript, jquery, html, url-routing

我有一个页面，可以找到一些动态问题。当我单击其中一个问题时，它会在另一个页面中打开问题内容。当该问题页面打开时，该问题的 URL 不是特定的，它只是“viewquestion.html”，但如果我打开该链接，它不会将我引导至该问题。

当我点击问题时，我会将问题 ID 附加到 url。

```
function getQuestionData(data) {
var myurl="ViewPost.html";
myurl+= "?QuestionId='" +localStorage["QuestionID"]+"'"; 
window.location.replace(myurl); 
```

}

& 在“viewquestion”页面，我应该检查 url 上的 id 并从数据库中获取该问题。但我不知道我该怎么做？

我想知道这是否是一个正确的想法，以及我是否能找到更好的想法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:26:53.617

没有正确或错误的方法可以做到这一点。您需要查看您的用户需求并决定是否需要直接链接到新页面。如果有，那么最好将所需的信息放在 URL 中，以便用户可以共享链接。

请记住 URL 的长度是有限制的，因此请确保您只需要几个查询字符串参数即可获取所需的数据。

# php - 类别中的页码

> ID：12544106
> 
> 赞同：0
> 
> 时间：2012-09-22T13:17:47.350
> 
> 标签：php, wordpress, webpage

我有一个函数，它命名`kriesi_pagination`为在 php 中显示页码的函数。我在 function.php 中为我的网站编写了代码。我在 index.php 中调用这个函数来显示索引中的页码。我在索引中使用此代码：`<?php kriesi_pagination(); ?>`

现在的问题是，如果我想在类别等其他地方显示页码，我该怎么办。它只显示网站主页中的页码，而不是任何其他地方。

我想为体育、音乐、技术等类别提供页码......

顺便说一句，我在我的网站上使用 wordpress cms。

请帮我解决这个问题

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:35:56.643

您应该能够使用 paged 的​​查询 var 值来获取当前页码：

```
function echo_page_number(){
    $page_number = isset($wp_query->query_vars["paged"])?
        $wp_query->query_vars["paged"] : // page number
        1; // not set, default to 1
    echo $page_number;
} 
```

# java - 基于键盘输入的返回值？

> ID：12544118
> 
> 赞同：1
> 
> 时间：2012-09-22T13:19:24.417
> 
> 标签：java, input

如果用户键入“C”，我只希望输出为 12.0，与键入“H”相同。问题是输入被存储为正确的字符串吗？我试图通过 Double.parseDouble 将字符串转换为双精度

* * *

```
import java.util.Scanner;

public class Elements {

    Scanner input=new Scanner(System.in);   
    public static final double H = 1.0; 
    public static final double Li = 6.9;
    public static final double Be = 9;
    public static final double B = 10.8;
    public static final double C = 12.0;

    public double output() {
        return C ; // I want the user to choose the variable to return
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T13:25:39.763

与其将值存储为字段，不如将它们存储在地图中：

```
private static final Map<String, Double> values = new HashMap<String, Double>();
static {
    values.put("H", 1.0);
    values.put("Li", 6.9);
    // and so on...
} 
```

然后，在输出（）中：

```
return values.get(input.nextLine()); 
```

使用您目前拥有的常量字段的唯一方法涉及反射，您真的不想去那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T13:41:51.440

您是否考虑过使用输入的 Switch/case 语句？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T13:30:08.960

一张地图就能解决你的问题。映射返回特定键的值。

```
java.util.HashMap<String, Double> map = new java.util.HashMap<String, Double>();
map.put("C", 12.0);
map.put("H", 1.0);
map.put("B", 10.8); 
```

您可以获得用户输入的值：

```
Double value = map.get(inputString); 
```

# jquery - 这是文件的路径

> ID：12544120
> 
> 赞同：1
> 
> 时间：2012-09-22T13:19:31.073
> 
> 标签：jquery, file, path

嗨，我必须从移动应用程序（html5、Phonegap）中读取一些文件。

如何将我的应用程序指向我设备的根目录。使用 root 是指打开“我的文件”应用程序时看到的目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:27:07.790

我认为您正在寻找的是`window.requestFileSystem`：

```
 window.requestFileSystem  = window.requestFileSystem || window.webkitRequestFileSystem;
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail); 
```

和：

```
 fileSystem.root.getDirectory(window.appRootDirName, {
        create : true,
        exclusive : false
    }, dirReady, fail); 
```

这个要点应该对你有帮助：[https ://gist.github.com/2894564](https://gist.github.com/2894564)

# jquery - 使用 Wp_deregister Jquery 禁用 WordPress 中的特色图片上传器？

> ID：12544123
> 
> 赞同：0
> 
> 时间：2012-09-22T13:19:52.860
> 
> 标签：jquery

有人可以告诉我为什么（以及如何纠正这个问题）`wp_deregister_script( 'jquery' )`在 functions.php 中使用会禁用管理员中的图像上传器。

我正在使用 wp_register_script 为我的主题加载大量脚本，如果我不取消注册 jQuery，我的主题就有问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:28:29.607

假设您有充分的理由不想在站点的前端使用 jQuery，您可以通过将调用包装到以下位置使其仅在前端被注销，而不是在管理员中注销`wp_deregister_script()`：

```
// Only deregister jQuery if it is not the admin section
if (!is_admin()){
     wp_deregister_script( 'jquery' );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T13:25:04.333

问题是，通过在您的主题中注销 jQuery，您还将在所有 WordPress 代码（包括管理面板）中注销它。

为什么不能在主题中使用 jQuery？您是否尝试过在 jQuery 中激活[noConflict](http://api.jquery.com/jQuery.noConflict/)？？？

# c# - 确认消息框 asp.net

> ID：12544124
> 
> 赞同：0
> 
> 时间：2012-09-22T13:19:58.810
> 
> 标签：c#, asp.net

确认按钮后如何将数据存储到数据库如果单击是，则数据将保存到数据库，如果取消则不会发生任何事情。

这是代码

```
Page.ClientScript.RegisterStartupScript(
    this.GetType(), 
    "ConfirmBox", 
    "if(confirm('Are you sure?') == true){window.location='../MyReservation.aspx';};", 
     true); 
```

它只指向另一个页面，但不将数据保存到数据库。

提前感谢那些将回答我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:36:15.597

设置`window.location`只是加载一个新页面。

我假设您有一个要保存数据的表单，使用 jQuery[提交](http://api.jquery.com/submit/)该表单：`$('#myForm').submit()`而不是设置`window.location`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T13:36:58.933

以会话状态存储数据，并在 MyReservation.aspx 的 Load 方法中，从会话中检索它并存储在数据库中。转移到新页面而不是加载新窗口。

# javascript - 如何使用 Angularjs 检查模块中的指令或控制器是否可用

> ID：12544125
> 
> 赞同：14
> 
> 时间：2012-09-22T13:19:58.110
> 
> 标签：javascript, angularjs

在 angularjs 中，给定一个模块，如何检查给定模块是否存在指令/控制器。

我有一个模块，我想知道是否已加载某些特定指令。下面是一些示例代码：

```
var module = angular.module('myModule');
//check if controller exists
if (module.hasController('my.first.controller')){
   //do something
}
if (module.hasDirective('my.first.directive')){
   //do something
} 
```

我已经以某种方式实现了这一点。如果默认情况下可用，则寻找更好的方法。

这可能吗？如果是这样，你如何做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-03-29T19:13:28.470

使用此代码检查服务是否存在。

`$injector.has('myServiceName')`

要检查指令是否存在，必须`Directive`在指令名称后添加后缀：

`$injector.has('myDirectiveNameDirective')`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-24T23:30:09.867

[我在这里](http://www.tech.theplayhub.com/how_to_check_if_an_angularjs_controller_has_been_defined/)找到了一些工作代码

```
angular.service('ControllerChecker', ['$controller', function($controller) {
    return {
        exists: function(controllerName) {
            if(typeof window[controllerName] == 'function') {
                return true;
            }
            try {
                $controller(controllerName);
                return true;
            } catch (error) {
                return !(error instanceof TypeError);
            }
        }
    };
}]); 
```

JSFiddle：http: [//jsfiddle.net/fracz/HB7LU/6780/](http://jsfiddle.net/fracz/HB7LU/6780/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-24T20:42:45.287

```
 var controllers = [];

    _.each(app._invokeQueue, function(value, index) {
        if (value[0] !== '$controllerProvider') {
            return;
        }

        controllers.push(value[2][0]);
    });

    if (controllers.indexOf('controller-i-want') === - 1) {
        // controller is undefined
    } 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-29T01:24:41.263

通过编写一个包装函数来解决这个问题，该函数被调用来加载控制器和东西，这样我就可以知道每个指令何时加载。

# c# - 如果字符串与格式不匹配，如何在 C# 中引发异常？

> ID：12544126
> 
> 赞同：2
> 
> 时间：2012-09-22T13:20:01.980
> 
> 标签：c#

如果我在 vm.TempRowKey 为空时执行以下分配，那么 newRowKey 的值是否会为空？

```
var newRowKey = vm.TempRowKey.DotFormatToRowKey(); 
```

如果 dotFormatRowKey 不具有 x 是数字的 xx 格式，还有一种方法可以使以下内容引发异常吗？

```
public static string DotFormatToRowKey(this string dotFormatRowKey) {
    var splits = dotFormatRowKey.Split('.')
                 .Select(x => String.Format("{0:d2}", Int32.Parse(x)))
                 .ToList();
    return String.Join(String.Empty, splits.ToArray());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T13:24:05.060

> 当 vm.TempRowKey 为空时

然后`TempRowKey.DotFormatToRowKey();`会抛出一个空引用异常。

> 如果 dotFormatRowKey 不具有格式 xx 其中 x 是数字，则抛出异常？

```
public static string DotFormatToRowKey(this string dotFormatRowKey) 
{
    if (dotFormatRowKey == null)
        throw new ArgumentNullException("dotFormatRowKey");    

    // maybe @"^\d\d?\.\d\d?$" is a beter regex. 
    // accept only 1|2 digits and nothing before|after
    if (! Regex.IsMatch(dotFormatRowKey, @"\d+\.\d+"))  
       throw new ArgumentException("Expected ##.##, was " + dotFormatRowKey);

    var splits = dotFormatRowKey.Split('.')
                 .Select(x => String.Format("{0:d2}", Int32.Parse(x)))
                 .ToList();  // ToList() is never needed

    // ToArray() not needed in Fx >= 4.0
    return String.Join(String.Empty, splits.ToArray()); 
} 
```

小细节：您同时使用`ToList()`和`ToArray()`。`splits`这是双重工作，在 .NET 4 中您也不需要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T13:29:20.537

不，结果不会为空。您可以使用 null 引用调用扩展方法，但扩展方法不是为处理 null 值而编写的，因此当您尝试`Split`在 null 引用上使用该方法时，您会收到一个错误。

要检查格式“xx”，您可以检查 的结果的长度`Split`，然后用于`TryParse`检查这些值是否可以解析：

```
public static string DotFormatToRowKey(this string dotFormatRowKey) {
  var splits = dotFormatRowKey.Split('.');
  if (splits.Length != 2) {
    throw new FormatException("The string should contain one period.");
  }
  var s = splits.Select(x => {
    int y;
    if (!Int32.TryParse(x, out y)){
      throw new FormatException("A part of the string was not numerical");
    }
    if (y < 0 || y > 99) {
      throw new FormatExcetpion("A number was outside the 0..99 range.");
    }
    return y.ToString("d2");
  }).ToArray();
  return String.Concat(s);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T13:22:57.283

对于您的第一个问题.. 尝试看看会发生什么。

第二个问题，您可以使用`TryParse`, 如果简单地失败了.. 抛出异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T13:24:43.827

你必须检查它是否为空，否则你会得到一个异常。

```
if (null == dotFormatRowKey)
    return null; 
```

您可以使用 Regex 验证模式。

```
Regex.IsMatch(input, "^\d+\.\d+$"); 
```

看

*   [MSDN 正则表达式](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)
*   [MSDN NullReferenceException](http://msdn.microsoft.com/en-us/library/system.nullreferenceexception.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T13:28:51.443

> 如果我在 vm.TempRowKey 为空时执行以下分配，那么 newRowKey 的值是否会为空？

这应该会导致 NullReferenceException，因为 dotFormatRowKey 将为 null，然后您将对 null 值调用 Split()（它不是扩展方法）。

> 如果 dotFormatRowKey 不具有 x 是数字的 xx 格式，还有一种方法可以使以下内容引发异常吗？

目前，使用 int.Parse() 强制您只有整数值和“.”。它不强制所有整数值都相同，也不强制只有 1 个“。” （例如，这不会在 1.2.3 上抛出）。如果您想添加额外的错误检查，这很容易做到：

```
// test that all int values were the same (not sure if you want this but you said x.x)
if (splits.Distinct().Count() > 1) { throw new ExceptionOfSomeSort("error"); }

// test that you have exactly two values
if (splits.Count != 2) { throw new ExceptionOfSomeSort("error"); } 
```

另一种选择是使用正则表达式预先验证整个字符串，例如：

```
@"\d+\.\d+" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-22T13:33:09.513

```
public static string DotFormatToRowKey(this string dotFormatRowKey)
        {
            Regex validationRegex = new Regex(@"\d.\d");
            if (!validationRegex.Match(dotFormatRowKey).Length.Equals(dotFormatRowKey.Length)) throw new FormatException("Input string does not support format x.x where x is number");

            var splits = dotFormatRowKey.Split('.')
                .Select(x => String.Format("{0:d2}", Int32.Parse(x)))
                .ToList();
            return String.Join(String.Empty, splits.ToArray());
        } 
```

# ruby-on-rails - rails 命令重置 rspec 的默认路径

> ID：12544127
> 
> 赞同：0
> 
> 时间：2012-09-22T13:20:05.690
> 
> 标签：ruby-on-rails, rspec

我正在阅读关于铁路[http://ruby.railstutorial.org/](http://ruby.railstutorial.org/)的教程 我输入了命令“Rails”而不是“Rails s”，因为那时使用 Rspec 进行测试失败并出现错误：

```
D:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\gems\rspec-core-2.11.1\lib\rspec\core\configuration.rb:780:in 'load': cannot load such file --**D:/spec** 
```

虽然我从 app 文件夹本身运行我的 rspec /spec 命令，但它以某种方式指向根目录而不是应用程序目录的错误路径。我的“Rails”命令是否重置了一些与 rpsec 路径相关的配置？现在我必须编写完整路径才能使测试正常工作

```
D:\rails_projects\sample_app>rsepc /rails_projects\sample_app\spec 
```

发生了什么变化，如何修复 rsepc 路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:38:48.330

确保您在 Rails 项目根目录中运行“rsepc spec”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T21:10:33.877

我使用命令恢复了 rspec 的默认路径

```
rspec --default_path (the path) 
```

但不幸的是，当我关闭 Rails 服务器或关闭 spork 服务器时。默认路径被尊崇为 D：

# python - Zope：无法在属性装饰器下访问 REQUEST

> ID：12544129
> 
> 赞同：6
> 
> 时间：2012-09-22T13:20:11.200
> 
> 标签：python, properties, request, zope

我正在尝试在类中使用属​​性装饰器。虽然它本身运行良好，但我不能使用任何必须访问`REQUEST`.

```
class SomeClass():
   #Zope magic code
   _properties=({'id':'someValue', 'type':'ustring', 'mode':'r'},)

  def get_someValue(self):
    return self.REQUEST

  @property
  def someValue(self):
    return self.REQUEST 
```

尽管调用`get_someValue`可以让我得到想要的结果，但尝试访问`someValue`会引发`AttributeError`.

这种行为背后的逻辑是什么？有没有办法绕过这个限制？

（我使用的是 Zope 2.13.16，Python 2.7.3）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T15:52:35.540

[`property`装饰器](http://docs.python.org/library/functions.html#property)只适用于*新式*类；也就是说，继承自`object`. `REQUEST`另一方面，获取（它使您可以通过属性访问访问全局对象）是非常“老派”的python，两者不能很好地协同工作，因为`property` *忽略*了获取对象所需的获取包装器`REQUEST`。

Zope 有它自己的`property`类似方法，它早于新式类和`property`装饰器，称为[`ComputedAttribute`](http://wiki.zope.org/zope2/ComputedAttribute)，它实际上早于`property`装饰器和新式类很多年。但是，一个`ComputedAttribute`-wrapped 函数确实知道如何处理一个`Acquisition`-wrapped 对象。

你可以`ComputedAttibute`像`property`装饰器一样使用：

```
from ComputedAttribute import ComputedAttribute

class SomeClass():   
    @ComputedAttribute
    def someProperty(self):
        return 'somevalue' 
```

包装函数也可以配置一个`ComputedAttribute`包装级别，这是我们在处理 Acquisition 包装时需要的。在这种情况下，您不能将`ComputedAttribute`用作装饰器：

```
class SomeClass():   
    def someValue(self):
        return self.REQUEST
    someValue = ComputedAttribute(someValue, 1) 
```

定义一个新函数来为我们做装饰很容易：

```
from ComputedAttribute import ComputedAttribute

def computed_attribute_decorator(level=0):
    def computed_attribute_wrapper(func):
        return ComputedAttribute(func, level)
    return computed_attribute_wrapper 
```

将其粘贴在某个实用程序模块中，然后您可以将其用作可调用装饰器以将某些内容标记为 Acquisition-aware 属性：

```
class SomeClass(): 
    @computed_attribute_decorator(level=1)
    def someValue(self):
        return self.REQUEST 
```

注意，不像`property`,`ComputedAttribute`只能用于 getter；不支持设置器或删除器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T21:10:12.117

如果您想绕过需要获取的路由并且无法在类的构造函数中显式设置调用代码的请求，请使用 zope.globalrequest。否则，您可能需要考虑浏览器视图（它总是多适应某些上下文和请求）。

# go - 可变参数函数是可选参数的合适解决方案吗？

> ID：12544131
> 
> 赞同：2
> 
> 时间：2012-09-22T13:20:22.423
> 
> 标签：go, optional-parameters

如果我有一个函数，其中最后一个参数是可选的，那么使用它`...`来允许参数是可选的是否合适，或者它是否被认为是错误的形式？

例子：

```
func Foo(s ...string) {
    switch len(s) {
        case 0:
            fmt.Println("You didn't pass an argument")
        case 1:
            fallthrough
        default:
            fmt.Printf("You passed %s\n", s[0])
    }
}

Foo("bar")        // "You passed bar"
Foo()             // "You didn't pass an argument"
Foo("bar", "baz") // "You passed bar" 
```

在此示例中，我不在乎是否传递了太多参数，但我可以`default:`在需要时处理它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-23T04:29:49.097

如果你*真的*需要可选参数（从 Go 标准库中可以看出，这种情况很少见），惯用的方法是为每个可选参数定义一个带有字段的结构，然后调用者可以传递一个带有字段的结构文字他们想要填写。

更常见的是提供替代函数或方法，当它只有一个或两个“可选”参数时，这应该是大多数时候。

像 Python 这样的语言中的可选参数通常意味着 API 会不断增长，直到函数和方法的参数比任何人都记得的多，并且永远不清楚各种参数组合如何交互（而且它们的测试更少）。

强制您为各种参数组合定义显式函数和方法需要对您的 API 进行更多的考虑，但从长远来看，它会变得更加可用和可维护。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-22T15:04:59.563

我不会推荐这个。(ab) 使用可变参数来传递可选参数存在不同的问题。其中最重要的可能是最后一种形式`arg ...T)`只允许一种类型。对于具有多种类型的多个可选参数，可以使用`...interface{}`但会产生不必要的运行时（取消）装箱成本，并且缺少任何（有用的）编译时类型检查。

另一个可能反对的论点是，我认为您不会在标准库中的任何地方找到此示例/先例，标准库被某些人认为是非正式的 Go 编码风格指南。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T13:29:20.583

这完全取决于您的项目要求，如果您的项目处于这种情况，那么没有任何不好的形式

仅针对这种情况提供了可选参数工具。

# java - 使用 Jena 库从 Java 中的 RDF 网页中提取 URI

> ID：12544134
> 
> 赞同：0
> 
> 时间：2012-09-22T13:21:01.763
> 
> 标签：java, xml-parsing, web-crawler, rdf, jena

`application/rdf-xml`我编写了以下代码，用于从内容类型为链接数据应用程序的网页中提取 URI 。

```
public static void test(String url) {
    try {
        Model read = ModelFactory.createDefaultModel().read(url);
        System.out.println("to go");
        StmtIterator si;
        si = read.listStatements();
        System.out.println("to go");
        while(si.hasNext()) {
            Statement s=si.nextStatement();
            Resource r=s.getSubject();
            Property p=s.getPredicate();
            RDFNode o=s.getObject();
            System.out.println(r.getURI());
            System.out.println(p.getURI());
            System.out.println(o.asResource().getURI());
        }
    }
    catch(JenaException | NoSuchElementException c) {}
} 
```

但是对于输入

```
<?xml version="1.0"?>
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:ex="http://example.org/stuff/1.0/">
    <rdf:Description rdf:about="http://www.w3.org/TR/rdf-syntax-grammar"
        dc:title="RDF/XML Syntax Specification (Revised)">
        <ex:editor>
            <rdf:Description ex:fullName="Dave Beckett">
                <ex:homePage rdf:resource="http://purl.org/net/dajobe/" />
            </rdf:Description>
        </ex:editor>
    </rdf:Description>
</rdf:RDF> 
```

输出是：

```
Subject URI is http://www.w3.org/TR/rdf-syntax-grammar
Predicate  URI is http://example.org/stuff/1.0/editor
Object URI is null
Subject URI is http://www.w3.org/TR/rdf-syntax-grammar
Predicate  URI is http://purl.org/dc/elements/1.1/title
Website is read 
```

我需要在输出中包含该页面上存在的所有 URI，以便为 RDF 页面构建网络爬虫。我需要输出中的所有以下链接：

```
 http://www.w3.org/TR/rdf-syntax-grammar
       http://example.org/stuff/1.0/editor
       http://purl.org/net/dajobe
       http://example.org/stuff/1.0/fullName
       http://www.w3.org/TR/rdf-syntax-grammar
       http://purl.org/dc/elements/1.1/title 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T17:15:26.063

小错误：你的意思是`application/rdf+xml`（注意加号）。

无论如何，你的问题很简单：

```
catch(JenaException | NoSuchElementException c) {} 
```

坏的！您错过了此处引发的错误，并且输出被截断：

```
System.out.println(o.asResource().getURI()); 
```

`o` *并不*总是一种资源，这将打破三重奏

```
<http://www.w3.org/TR/rdf-syntax-grammar> dc:title "RDF/XML Syntax ..." 
```

所以你需要提防：

```
if (o.isResource()) System.out.println(o.asResource().getURI()); 
```

甚至更具体：

```
if (o.isURIResource()) System.out.println(o.asResource().getURI()); 
```

这将跳过`null`您看到的输出`ex:editor`。

现在写一千遍*我不会吞下异常*:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T16:32:30.610

不，您不了解 RDF 的用途。爬虫是一种旨在检索在线内容并将其编入索引的程序。一个简单的爬虫可以输入一个 HTML 文档，它会下载（可能是递归的）元素`href`属性中提到的所有文档。`<a>`

RDF 中充满了 URL，因此您可能认为提供爬虫是完美的，但不幸的是，RDF 文档中的 URL 并非旨在检索其他文档。例子：

*   [http://example.org/stuff/1.0/editor](http://example.org/stuff/1.0/editor) 404 未找到
*   [http://purl.org/net/dajobe](http://purl.org/net/dajobe) 302 临时移动
*   [http://example.org/stuff/1.0/fullName](http://example.org/stuff/1.0/fullName) 404 未找到
*   [http://www.w3.org/TR/rdf-syntax-grammar](http://www.w3.org/TR/rdf-syntax-grammar) 301 永久移动
*   [http://purl.org/dc/elements/1.1/title](http://purl.org/dc/elements/1.1/title) 302 暂时移动

会不会是巧合？我不这么认为。事实上，RDF 旨在*描述现实世界*，并且碰巧它可以以 XML 形式序列化，但 XML 并不是[唯一可用的序列化](http://jena.apache.org/tutorials/sparql_data.html)。

那么，文档中的 URL 是做什么用的呢？它们用来**命名事物**。你认识几个约翰？可能有几十个，但仍然存在数千个 John... 但是，如果我拥有该域，`example.com`我可以使用 URL`http://example.com/friends/John`来引用我的朋友 John。RDF可以用来描述你的朋友John在Abc Avenue 123工作，通过两个URL和一个字符串

```
"http://me.com/John"   "http://me.com/works_at"   "123, Abc avenue" 
```

这被称为*三元组*，其中包含的 URL 并不意味着可以通过 TCP 套接字和理解 HTTP 协议的客户端检索某些内容。请注意，您的朋友 (John)**和谓词**(works at) 都是通过 URL 在三元组中引用的。但是，如果您在浏览器中尝试这些 URL，您将一无所获。

我不知道您为什么要构建您的爬虫以及它应该做什么，但 RDF 肯定不是您完成工作所需要的。

# git - Git - 错误：RPC 失败；result=22, HTTP code = 401 fatal: 远端意外挂断

> ID：12544142
> 
> 赞同：24
> 
> 时间：2012-09-22T13:21:46.543
> 
> 标签：git, git-remote

我正在使用 ubuntu 11.10 机器。我已经安装了 1.7.7.1 版本的 git。我正在使用 git-cola 推送和拉取我的代码，并且我能够成功提交和推送我的更改。

现在，我已经更换了我的机器，我的新系统具有与上述相同的配置。（Ubuntu 11.10 机器和 git 版本 1.7.7.1）。

在新机器上，我在**git push**上有问题。尝试推送代码时收到以下错误消息：

```
error: RPC failed; result=22, HTTP code = 401
fatal: The remote end hung up unexpectedly
fatal: The remote end hung up unexpectedly 
```

在互联网上，我发现它可能是由于以下任何一种原因：

*   错误的 git 用户密码（在我的情况下，我觉得我使用正确的密码来推送代码。因为即使现在我成功了，当我从旧系统推送工作区代码时（使用相同的密码！）。但是问题仅来自我的新系统。
*   使用以下命令增加缓冲区大小：

    git config --system http.postBuffer 52428800

我试过这个，但没有运气。甚至试图将我的缓冲区大小增加到 52428800 以上，但仍然是同样的错误。

卡在这个问题上。谁能给我建议一个解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-22T13:57:07.463

您一定是在远程 URL 中犯了错误，请仔细检查输出`git remote -v`并使用

```
 git remote set-url origin <new-url> 
```

假设远程名称是`origin`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-19T08:54:40.617

对于在 Windows 上使用 TFS git 存储库的人。我最近更改了我的 Windows 密码，因此我有

```
error RPC failed; result=22, HTTP code = 401 fatal: The remote end hung up unexpectedly 
```

当做不同的事情时，比如取、推或拉。我们使用 TFS git repo。**我修复了通过控制面板从 Windows 凭据管理器中删除我的 tfs 密码的问题。** [https://support.microsoft.com/help/4026814/windows-accessing-credential-manager](https://support.microsoft.com/help/4026814/windows-accessing-credential-manager)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-18T10:22:53.633

更新到 git 版本 1.8.x 后问题立即解决

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-11-12T11:52:04.900

就我而言，用户权限是问题所在。我将自己添加为存储库的有效用户，之后“推送”工作。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-10-24T15:03:47.993

FWIW，我遇到了同样的问题，并通过删除并重新添加遥控器来解决它：

```
git remote remove origin
git remote add origin http://host:port/my/repo
git branch --set-upstream master origin/master 
```

这假设您在 master 分支上，并且您唯一的远程是`origin`.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-12-09T20:53:11.753

我遇到了同样的错误，对我来说这是因为我没有存储库的提交权限。401 错误代码是 HTTP 401（未经授权）错误。一旦我获得权限，问题就解决了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-08-20T23:00:33.523

这可能不是您正在寻找的答案，但我的公司代理（默默地）未能提交或其他上传到 github.com。针对 git.com 的所有其他操作都可以正常工作，从而混淆了问题。

唯一的解决方案是创建补丁并通过电子邮件将它们发送到网络之外。笨拙但有效。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-17T18:06:36.613

确保您的网址具有正确的用户名和密码

```
git remote set-url origin http : //username:password.. 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-12-12T15:52:39.430

唯一对我有用的是在提交之前删除所有“.gitignore”文件，因为我有一些嵌套的 Git 根

请注意，我刚开始使用新的存储库，所以我不必处理反向提交

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-01-02T15:04:17.797

我为我的 Windows 10 机器**重新安装了 git。**魔术发生了！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-03-19T20:27:26.600

我的问题 - `error: RPC failed; result=22, HTTP code = 401`- 通过发布`git repack -a -d`之前解决了`git push`。

# asp.net-web-api - ASP.NET Web API RTM 和子域路由

> ID：12544150
> 
> 赞同：4
> 
> 时间：2012-09-22T13:22:44.287
> 
> 标签：asp.net-web-api, asp.net-mvc-routing

我在让 Web API 处理基于子域的路由时遇到问题。简而言之，我找到了正确的控制器和方法，但是 WebAPI 没有提取子域中的数据令牌。

我在我的场景中有这个：

```
contoso.myapp.com
fabrikam.myapp.com
{tenant}.myapp.com 
```

所有解析到同一个 ApiController 并且我希望能够提取`{tenant}`令牌。

我使用了本文中的代码[http://blog.maartenballiauw.be/post/2012/06/18/Domain-based-routing-with-ASPNET-Web-API.aspx](http://blog.maartenballiauw.be/post/2012/06/18/Domain-based-routing-with-ASPNET-Web-API.aspx)

但是在撰写本文和 ASP.NET Web Api 退出测试版之间似乎发生了一些变化。文章中的代码依赖于`RouteTable.Routes`Web API 路由配置，`HttpConfiguration.Routes`这是一个`HttpRouteCollection`而不是通常的`RouteCollection`（它实际上是派生的`RouteCollection`）。

所以我将代码更改为从而`HttpRoute`不是`Route`. 这是代码：

[https://gist.github.com/3766125](https://gist.github.com/3766125)

我配置这样的路线

```
 config.Routes.Add(new HttpDomainRoute(
            name: "test",
            domain: "{tenant}.myapp.com",
            routeTemplate: "test",
            defaults: new { controller = "SomeController", action = "Test" }
        )); 
```

我的请求被路由到正确的控制器。但是，租户数据令牌永远不会被填充（如果我这样做`this.Request.GetRouteData()`了，我会看到控制器和操作令牌，但看不到租户）。如果我在其上放置断点，`GetRouteData`则永远不会调用它。

我尝试使用反射器跟踪代码路径，并查看在 HttpRouteCollection 级别调用 GetRouteData 的位置，但似乎枚举的集合为空。不确定常规 ASP.NET 路由和 WEB API 路由之间的集成是如何桥接的，但这让我很困惑。

**有任何想法吗？**

我现在使用的解决方法是显式调用 GetRouteData`Route`

`this.Request.GetRouteData().Route.GetRouteData(this.Request.RequestUri.ToString(), this.Request)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:20:32.937

感谢您报告问题。我在[https://github.com/woloski/AspNetWebApiWithSubdomains](https://github.com/woloski/AspNetWebApiWithSubdomains)使用了您的复制品并进行了一些调试。

这就是它发生的原因。没有被调用，因为它被Web API 中`HttpDomainRoute.GetRouteData`调用的内部类包装。`HttpWebRoute`当您使用`config.Routes.Add`方法添加自定义路由时`HttpDomainRoute.GetRouteData`，它不会调用 ，而是简单地调用 的`System.Web.Routing.Route's`实现`GetRouteData`。这就是为什么您会看到除租户之外的其余参数被正确映射的原因。

我想不出任何简单的解决方法。[我可以在http://aspnetwebstack.codeplex.com/](http://aspnetwebstack.codeplex.com/)上的 codeplex 站点提交问题以跟踪此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:47:36.820

在考虑了更多之后，我有一个解决方法给你。变通方法的基本思想是使用从 Route 派生的路由并将其直接添加到 RouteCollection。这样，我们通过的路由将不再被包裹在 HttpWebRoute 中。

RouteByPassing 处理程序用于解决另一个已知问题。希望这可以帮助。

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        RouteTable.Routes.Add("test", new HttpDomainRoute(
            domain: "{tenant}.auth10.com",
            routeTemplate: "test",
            defaults: new { controller = "Values", action = "GetTenant" }
        ));

        config.MessageHandlers.Add(new RouteByPassingHandler());
    }
}

public class RouteByPassingHandler : DelegatingHandler
{
    protected override System.Threading.Tasks.Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, System.Threading.CancellationToken cancellationToken)
    {
        HttpMessageInvoker invoker = new HttpMessageInvoker(new HttpControllerDispatcher(request.GetConfiguration()));
        return invoker.SendAsync(request, cancellationToken);
    }
}

public class HttpDomainRoute
    : Route
{
    private Regex domainRegex;
    private Regex pathRegex;

    public HttpDomainRoute(string domain, string routeTemplate, object defaults, object constraints = null)
        : base(routeTemplate, new RouteValueDictionary(defaults), new RouteValueDictionary(constraints), new RouteValueDictionary(), HttpControllerRouteHandler.Instance)
    {
        this.Domain = domain;
    }

    public string Domain { get; set; }

    public override RouteData GetRouteData(HttpContextBase context) 
    {   
        // Build regex
        domainRegex = CreateRegex(this.Domain);
        pathRegex = CreateRegex(this.Url);

        // Request information
        string requestDomain = context.Request.Headers["Host"];
        if (!string.IsNullOrEmpty(requestDomain))
        {
            if (requestDomain.IndexOf(":") > 0)
            {
                requestDomain = requestDomain.Substring(0, requestDomain.IndexOf(":"));
            }
        }
        else
        {
            requestDomain = context.Request.Url.Host;
        }

        string requestPath = context.Request.AppRelativeCurrentExecutionFilePath.Substring(2) + context.Request.PathInfo;

        // Match domain and route
        Match domainMatch = domainRegex.Match(requestDomain);
        Match pathMatch = pathRegex.Match(requestPath);

        // Route data
        RouteData data = null;
        if (domainMatch.Success && pathMatch.Success)
        {
            data = base.GetRouteData(context);

            // Add defaults first
            if (Defaults != null)
            {
                foreach (KeyValuePair<string, object> item in Defaults)
                {
                    data.Values[item.Key] = item.Value;
                }
            }

            // Iterate matching domain groups
            for (int i = 1; i < domainMatch.Groups.Count; i++)
            {
                Group group = domainMatch.Groups[i];
                if (group.Success)
                {
                    string key = domainRegex.GroupNameFromNumber(i);

                    if (!string.IsNullOrEmpty(key) && !char.IsNumber(key, 0))
                    {
                        if (!string.IsNullOrEmpty(group.Value))
                        {
                            data.Values[key] = group.Value;
                        }
                    }
                }
            }

            // Iterate matching path groups
            for (int i = 1; i < pathMatch.Groups.Count; i++)
            {
                Group group = pathMatch.Groups[i];
                if (group.Success)
                {
                    string key = pathRegex.GroupNameFromNumber(i);

                    if (!string.IsNullOrEmpty(key) && !char.IsNumber(key, 0))
                    {
                        if (!string.IsNullOrEmpty(group.Value))
                        {
                            data.Values[key] = group.Value;
                        }
                    }
                }
            }
        }

        return data;
    }

    public override VirtualPathData GetVirtualPath(RequestContext requestContext, RouteValueDictionary values) 
    {
        return base.GetVirtualPath(requestContext, RemoveDomainTokens(values));
    }

    private Regex CreateRegex(string source)
    {
        // Perform replacements
        source = source.Replace("/", @"\/?");
        source = source.Replace(".", @"\.?");
        source = source.Replace("-", @"\-?");
        source = source.Replace("{", @"(?<");
        source = source.Replace("}", @">([a-zA-Z0-9_-]*))");

        return new Regex("^" + source + "$");
    }

    private RouteValueDictionary RemoveDomainTokens(RouteValueDictionary values)
    {
        Regex tokenRegex = new Regex(@"({[a-zA-Z0-9_-]*})*-?\.?\/?({[a-zA-Z0-9_-]*})*-?\.?\/?({[a-zA-Z0-9_-]*})*-?\.?\/?({[a-zA-Z0-9_-]*})*-?\.?\/?({[a-zA-Z0-9_-]*})*-?\.?\/?({[a-zA-Z0-9_-]*})*-?\.?\/?({[a-zA-Z0-9_-]*})*-?\.?\/?({[a-zA-Z0-9_-]*})*-?\.?\/?({[a-zA-Z0-9_-]*})*-?\.?\/?({[a-zA-Z0-9_-]*})*-?\.?\/?({[a-zA-Z0-9_-]*})*-?\.?\/?({[a-zA-Z0-9_-]*})*-?\.?\/?");
        Match tokenMatch = tokenRegex.Match(Domain);
        for (int i = 0; i < tokenMatch.Groups.Count; i++)
        {
            Group group = tokenMatch.Groups[i];
            if (group.Success)
            {
                string key = group.Value.Replace("{", "").Replace("}", "");
                if (values.ContainsKey(key))
                    values.Remove(key);
            }
        }

        return values;
    }
} 
```

}

# ruby - Ubuntu上的Ruby安装真的一团糟

> ID：12544156
> 
> 赞同：1
> 
> 时间：2012-09-22T13:23:48.840
> 
> 标签：ruby, ruby-on-rails-3, ubuntu, rubygems

我在联想 G580 Intel i5 笔记本电脑上运行 Ubuntu 12.04 64 位。

几个小时前，我开始学习 Ruby 和 RoR。然后在教程中，我检查了 Ruby 和 RubyGems，它们已安装。

然后我尝试安装 Rails，但无法构建原生扩展。然后我更新了RubyGems，它仍然没有工作。

然后我从源代码安装了 Ruby，最新版本。这搞砸了 RubyGems。

现在：

根据命令，我的 Ruby 版本`ruby -v`是：

```
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux] 
```

根据命令，我的 RubyGems 版本`gem -v`是：

```
1.8.23 
```

另外，当我运行时`gem -v`，我会收到一些警告：

```
It seems your ruby installation is missing psych (for YAML output).
To eliminate this warning, please install libyaml and reinstall your ruby. 
```

这发生在我从源代码安装之后。注意：我没有先卸载已经安装的 ruby​​。

现在这给我带来了太多问题。

如何删除与 Ruby 相关的**所有内容？**

另外，RubyGems 在安装 Rails 时给了我一个错误，所以我在互联网上查找并安装了一些包，如`build-essential`,`libyaml-ruby`和`libzlib-ruby`. 这仍然给了我一个错误。

所以现在我想删除所有 Ruby 的东西，重新安装 Ruby 和 RubyGems，然后安装 Rails 3。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T14:39:36.920

尝试安装 RVM。

不确定这是否有帮助：

[http://www.andrehonsberg.com/article/install-rvm-ubuntu-1204-linux-for-ruby-193](http://www.andrehonsberg.com/article/install-rvm-ubuntu-1204-linux-for-ruby-193) http://mattslay.com/installing-rails-on-ubuntu-12-04-with-rvm -支持/

上次我使用 Ubuntu (2007) - 也是一样，OSX 并没有让它变得更容易，但 RVM 解决了大部分问题。

# utf-8 - PHP (windows), virtuoso, SPARQL, UTF-8 (Russian) 不工作

> ID：12544157
> 
> 赞同：1
> 
> 时间：2012-09-22T13:23:48.687
> 
> 标签：utf-8, sparql

目前我正在处理一个关于 virtuoso 和 php (windows7 (64)) 的项目，

Virtuoso 中三元组的“插入”（sparql 查询）不适用于俄语（UTF-8）

```
 $iquery = "sparql INSERT DATA INTO <http://example.net/Empl> {<http://example.net/empl1> <http://example.net/firstname> 'Русский язык'.}"; 
```

以下查询在英语中有效，但是当一行出现在俄语 (UTF-8) 中时，PHP 会返回错误

```
 *Warning*: odbc_exec() [function.odbc-exec <http://localhost:8890/test/admin/function.odbc-exec>]: SQL error:  [OpenLink][Virtuoso ODBC Driver][Virtuoso Server]SQ074: Line 1: Bad  escape sequence in a SPARQL short single-quoted string at '\', SQL state  37000 in SQLExecDirect in*C:\virtuoso-opensource\vsp\test\admin\index.php*on line*164* 
```

你能为我做什么？

谢谢，谢尔盖

PS sparql 查询“插入”适用于 isql 中的俄语 (UTF-8)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T03:01:14.607

Have you set `SQL_UTF8_EXECS = 1` as detailed at [http://docs.openlinksw.com/virtuoso/dbadm.html#ini_Client](http://docs.openlinksw.com/virtuoso/dbadm.html#ini_Client)?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T00:58:31.167

您需要正确配置 ODBC 连接字符串，以便 Virtuoso 正确接受 UTF-8

您是否`Charset=utf-8`在连接字符串中包含了参数？

如果您有并且仍然遇到此问题，那么您可能应该联系 Virtuoso 开发人员以获得进一步的帮助

# cocos2d-iphone - 将 cocos2d 项目升级到 OpenGL ES 2.0

> ID：12544168
> 
> 赞同：1
> 
> 时间：2012-09-22T13:25:37.337
> 
> 标签：cocos2d-iphone, opengl-es-2.0

我在 cocos2d 1.0 项目中有这个代码，它是从这里重新制作的小翅膀的一部分：[https ://github.com/haqu/tiny-wings](https://github.com/haqu/tiny-wings)

```
- (void) draw {

#ifdef DRAW_BOX2D_WORLD

glDisable(GL_TEXTURE_2D);
glDisableClientState(GL_TEXTURE_COORD_ARRAY);
glDisableClientState(GL_COLOR_ARRAY);

glPushMatrix();
glScalef(CC_CONTENT_SCALE_FACTOR(), CC_CONTENT_SCALE_FACTOR(), 1.0f);
world->DrawDebugData();
glPopMatrix();

glEnableClientState(GL_COLOR_ARRAY);
glEnableClientState(GL_TEXTURE_COORD_ARRAY);
glEnable(GL_TEXTURE_2D);    

#else

glBindTexture(GL_TEXTURE_2D, _stripes.texture.name);

glDisableClientState(GL_COLOR_ARRAY);

glColor4f(1, 1, 1, 1);
glVertexPointer(2, GL_FLOAT, 0, hillVertices);
glTexCoordPointer(2, GL_FLOAT, 0, hillTexCoords);
glDrawArrays(GL_TRIANGLE_STRIP, 0, (GLsizei)nHillVertices);

glEnableClientState(GL_COLOR_ARRAY);

#endif
} 
```

我很难将其转换为 OpenGL ES 2.0。我发现文档非常模糊。

它应该是什么样子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:39:19.713

使用此绘图功能而不是您上面的绘图功能。

```
-(void) draw
{
    [super draw];
    ccGLEnableVertexAttribs( kCCVertexAttribFlag_Position );
    kmGLPushMatrix();
    self.world->DrawDebugData();    
    kmGLPopMatrix();
} 
```

也使用来自 Cocos2D 2.0 的 GLES-Render.h 和 GLES-Render.m

# ninject - 即使使用 Copy Local=true，Microsoft.Web.Infrastructure 也无法输出目录

> ID：12544173
> 
> 赞同：0
> 
> 时间：2012-09-22T13:26:01.710
> 
> 标签：ninject, ninject.web

在我的本地开发 PC 上安装 Ninject.web 并编译该站点后，它就可以工作了。但是当它被编译时，在提交后，服务器以发布模式构建，bin 文件夹中只缺少 microsoft.web.infrastructure。

也不会为 Ninject 运行注册 HttpModule。

我不知道该怎么办！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:29:13.017

我有类似的问题。我在类库中引用了 Microsoft.Web.Infrastructure。我还必须在我的 Web 应用程序项目中引用它才能发布发布版本。

# ios - UITableView 的一部分不响应触摸/任何事件

> ID：12544174
> 
> 赞同：4
> 
> 时间：2012-09-22T13:26:14.097
> 
> 标签：ios, uitableview

这个问题有点难以用代码来传达，所以我将最好地描述它，也许有人可以猜到这个问题。

我有一个已旋转 90 度的 UITableView，有效地使其成为水平表格视图。每个单元格都包含图表的一部分，如下所示：

![在此处输入图像描述](../Images/9511fd85d5e174c228338ebfddd0ddca.png)

这非常适合我的需求，并允许我们使用 UITableView 的一些功能，特别是单元格重用。

在 iPhone<5 上，一切都运行良好，因为 UITableView 是方形的 (320x320)，因此很容易旋转和修改框架。

但是，我刚刚开始添加 iPhone 5 支持，这意味着将宽度（最终旋转后的高度）扩展到 320+88 左右。这可以在上面的屏幕截图中看到。我发现在旋转桌子后获得正确的边界/中心非常棘手/棘手。也许这是一个由此产生的问题。

问题（终于！）是现在（在 iPhone5 上），无法选择底部 30ish 点（在月份选择部分附近）。UIButton 按下未在月份注册，didSelectCell 未在单元格上注册，并且无法滑动。

*   UITableViewCell 框架大小是正确的。我已经设置了 UITableViewCell 的背景颜色，并确认这 30 个点在框架内。
*   表格的这一部分前面没有子视图或任何其他内容。
*   一切都在 iPhone<5 上完美运行

有任何想法吗？我已经花了太多时间试图弄清楚我已经非常愿意用第三方“Horizo​​ntalTable”或自写的 ScrollView 替换我的实现。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T07:16:15.003

好吧，在浪费了无数个小时之后，确实发现问题出在 UITableView 之外。我没有包括的是这个 UITableView 实际上嵌套在另一个 UITableView 中。并且该表的 heightForRowAtIndex 没有足够的高度，因此所有触摸事件都被丢弃（即使该表没有超出其范围）。

谢谢大家，对不起，我没有从一开始就提供足够的信息。

# html - CSS 样式不影响 PHP 中的段落

> ID：12544184
> 
> 赞同：0
> 
> 时间：2012-09-22T13:27:52.690
> 
> 标签：html, css

我的 PHP 代码中有一段，它不受我的 CSS 样式的影响，我不知道为什么......我没有使用 PHP 的经验，所以我不明白为什么这不起作用，它如果有人能花时间回答我，那就太好了。。代码：

```
<html>
<style>
    h1 {
        font-family:"Arial";
        padding: 5px;
        color: #1e90ff;
    }
    p {
        font-family:"Arial";
        padding-left: 15px;
        color: #000;
    }
    span {
        font-family:"Arial";
        padding: 15px;
        color: #000;
    }
    #contentwrapper {
        width: 750px;
        border: 2px solid #666666;
        border-radius: 5px;
        background-color: #808080;
        text-align: center;
    }
</style>
<div id="contentwrapper">
<?php

//connect
I REMOVED THE CONNECTION INFO

//query the db
$getnews = mysql_query("SELECT * FROM page_index") or die(mysql_error());

while ($row = mysql_fetch_assoc($getnews))

{
//get data
$title = $row['title'];
$header = $row['header'];
$content= $row['content'];
echo "
<title>$title</title>
";
echo "
<center><h1>$header</h1></center>
";
echo "
<p>$content</p><br><br>
";
}
?>
</div>
</html> 
```

我知道我可以只使用跨度，但我想使用 p 标签是有原因的。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:41:18.357

将此内容保存为 test.html 并检查它是否是您的预期输出？如果没有相应地修改您的 css 并将 css 粘贴回您的 php.ini。添加了头部和身体标签。

```
<html>
<head>
<style>
    h1 {
        font-family:"Arial";
        padding: 5px;
        color: #1e90ff;
    }
    p {
        font-family:"Arial";
        padding-left: 15px;
        color: #000;
    }
    span {
        font-family:"Arial";
        padding: 15px;
        color: #000;
    }
    #contentwrapper {
        width: 750px;
        border: 2px solid #666666;
        border-radius: 5px;
        background-color: #808080;
        text-align: center;
    }
</style>
</head>
<body>
<div id="contentwrapper">
<title>title</title>
<center><h1>header</h1></center>
<p>paragraph</p><br><br>
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T13:38:19.680

您的 HTML 看起来不完整。

尝试在`<head>`标签后添加`<html>`标签。然后在`</head>`标签之后关闭`<title>`标签。

在内容之前创建一个标签并在最终标签之前`<body>`关闭该标签。`</body>``</html>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T13:32:01.120

1.  只需为没有 PHP 内容的网页构建一个模板 - 只是原始 HTML
2.  将 CSS 放入另一个文件中。只需包括它。添加 1\. 并确保它是它应该的样子。
3.  修改 1 以添加数据库中的内容。

# c - C中的常量指针

> ID：12544198
> 
> 赞同：4
> 
> 时间：2012-09-22T13:29:49.357
> 
> 标签：c, pointers

> **可能重复：**
> [C 中的 char s[] 和 char *s 有什么区别？](https://stackoverflow.com/questions/1704407/what-is-the-difference-between-char-s-and-char-s-in-c)

有一个程序：

```
#include<stdio.h>

int main()
{
    char str[20] = "Hello";
    char *const p=str;
    *p='M';
    printf("%s\n", str);
    return 0;
} 
```

这会将 Mello 作为答案打印出来。但是由于 p 是一个常量指针，它不应该给出错误吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-22T13:32:57.060

确切地说，它是一个常量指针。你不能改变**它指向**的地方。你可以改变**它的点**。

```
const char *p;  // a pointer to const char
char * const p; // a const pointer to char
const char * const p; //combined... 
```

记住语法的最简单方法是根本不记住它。**只需从右到左阅读声明**:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T13:31:53.147

`char *const p;`是一个指向 char 的常量指针。所以修改 指向的值`p`是完全合法的。

有详细解释：[const *char vs. char* const vs const *char const](https://stackoverflow.com/questions/890535/what-is-the-difference-between-char-const-and-const-char)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T13:31:57.017

您无法更改 的值`p`，但*可以*更改 的值`*p`。

如果您写了`char const *p=str`or `const char *p=str`，那么您将无法修改`*p`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T13:32:42.180

常量指针和指向常量数据的指针是有区别的。考虑这四个：

```
const char * p=str;  // p[0] is const
char const * p=str;  // same
char *const p=str;   // p is const. *p is not
char const *const p=str; // p is const, p[0] also 
```

# java - PDFdictionary 和 unicode（和 Java）

> ID：12544204
> 
> 赞同：2
> 
> 时间：2012-09-22T13:30:36.627
> 
> 标签：java, pdf, unicode, itext

我有一个文本编辑程序。它将创建的文档导出为 PDF。

它还将一系列字符串保存到 PDFDictionary 中，使其能够重新打开它创建的文档。

对于 PDF 和我的程序中的字体，我使用 BookAntiqua，从我的 Win7 系统中提取 .ttf。它可以毫无问题地显示软管字体。

但是，我有一个问题。我的用户将使用的字符通常是 šđčćž 和 ŠĐČĆŽ。

当我第一次在我的程序中输入它们时，它们会正确显示。当我将其保存为 PDF 并使用 Adob​​e Reader 打开时，它们会正确显示。但是，当我将该 PDF 加载回我的程序时，它们要么显示为⎕，要么根本不显示。

我想问题出在我填充 PDFDictionary 的方式上。我试图做类似`string.replace("Ž", "/u017D");`and的事情`string.replace("Đ", "\u017D");`，但没有帮助。从eclipse打开我的PDF，我注意到不是像这样保存“Ž”：“/u0017D”它仍然像“Ž”一样保存，并且缺少一些其他有问题的字母（在PDFDictionary中，所有这些）。

我想知道的是如何将例如字符“Ž”打印到PDFDictionary 中，这样一旦我的程序读取就会在例如JTextArea 中显示为字符“Ž”。

编辑：所有 PDF 处理都是用 iText 完成的！

代码：

保存时：

```
PDFobject = new PdfString("šđčćž ŠĐČĆŽ");
PDFName index =  new PdfName("1");

dictionary.put(index, object); 
```

打开（加载）时：

```
PDFName index = new PdfName("1");
PDFObject line = dictionary.get(index);
String string = line.toString();

JTextArea abc= new JTextArea();
abc.setText(string); 
```

如果将一行更改为：`PDFobject = new PdfString("šđčćž ŠĐČĆŽ", "UTF-8");`，我仍然会得到一些随机的乱码作为输出......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T13:41:20.317

您需要正确编码您的字符。 [Unicode](http://docs.oracle.com/javase/tutorial/i18n/text/unicode.html)是 Java 和 PDF 共享的标准。我建议将您的文本显式编码为 UTF-8，以便两者都能处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T14:28:43.813

(IDE) 编辑器使用编码，Java 编译器使用编码。两者都必须设置为相同的编码。我使用 UTF-8 来提供国际支持。然后编译的 java (.class, .jar) 在内部使用 Unicode。

确保正确编码的另一种方法是使用 Unicode 转义符，例如`\u017D`.

iText 有自己的编码。然后是必须能够显示字符的字体。iText 可以使用 PDF 自己的字体之一，或嵌入的字体（使用子集增加 PDF 的大小）。

没有答案，但我认为您需要查看[iText](http://api.itextpdf.com/itext/) API、DocumentFont，`charExists`例如，使用字符编码`createFont`等。

# git - 在 Github 中提交

> ID：12544205
> 
> 赞同：2
> 
> 时间：2012-09-22T13:31:03.413
> 
> 标签：git, github, add, git-commit

我使用以下命令：

```
git add *
git commit -am 'updating' 
```

我在下面遇到：

```
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#   (commit or discard the untracked or modified content in submodules)
#
#   modified:   webkomiks (modified content)
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

我应该怎么做？

我继续说：

```
git push myrep master 
```

我只看到了 github 中的文件夹，而不是文件夹中的文件。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T13:33:09.083

您没有递归提交到子目录。

尝试`git add .`代替`git add *`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T22:15:10.480

webkomiks 是目录还是文件或其他东西？

如果你想添加 webkomiks，正如 Johan Paul 所说，运行 'git add webkomiks'

尝试一下`git clean -n`，它应该会为您提供更多信息。如果它是一个目录，它会说“不会删除”。当然，您可以通过添加 ' `-d`' 选项来删除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T13:52:53.057

这可能`webcomiks`是一个子模块吗？

如果是这样，那么您需要进入子模块目录，提交并推送该子模块中的更改，然后转到主存储库并从那里提交。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-22T13:35:58.420

正如错误消息所述：

```
 Changes not staged for commit:
 ...
 modified:   webkomiks (modified content) 
```

这可能是一个目录？这不包括在提交中。这样做`git add webkomiks`，然后再试一次。

# java - Java socketRead0 问题

> ID：12544212
> 
> 赞同：10
> 
> 时间：2012-09-22T13:31:54.010
> 
> 标签：java, sockets

我正在使用 htmlunit 开发一个网络爬虫，我已经添加了所有必需的超时，但是我注意到当我使用 Java VisualVM 进行线程转储时，当某个网站的服务器被爬网时应用程序挂起：

```
java.lang.Thread.State: RUNNABLE
at java.net.SocketInputStream.socketRead0(Native Method)
at java.net.SocketInputStream.read(SocketInputStream.java:129)
at java.net.SocksSocketImpl.readSocksReply(SocksSocketImpl.java:88)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:429)
at java.net.Socket.connect(Socket.java:525)
at com.gargoylesoftware.htmlunit.SocksSocketFactory.connectSocket(SocksSocketFactory.java:89)
at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148)
at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)
at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)
at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:573)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:425)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:776)
at com.gargoylesoftware.htmlunit.HttpWebConnection.getResponse(HttpWebConnection.java:152)
at app.plugin.core.net.QHttpWebConnection.getResponse(QHttpWebConnection.java:30)
at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseFromWebConnection(WebClient.java:1439)
at com.gargoylesoftware.htmlunit.WebClient.loadWebResponse(WebClient.java:1358)
at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:307)
at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:373)
at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:358) 
```

这真的很令人沮丧，因为我无法控制这些服务器。这个问题严重影响了我的应用程序的性能。

问题：

1.  我该如何解决这个问题？
2.  有没有办法获取Java应用程序打开的套接字连接列表并使用它来终止套接字，例如模拟服务器关闭连接？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-22T17:50:22.473

我相信，当您使用 Java 本机方法时，即使调用实际上被阻塞等待某个事件，堆栈跟踪也会说 RUNNABLE。从本质上讲，我不相信 Java 有任何方法知道本地方法实际上在做什么，因此它将这些调用标记为 RUNNABLE。我已经在 socketRead0() 和 socketAccept() 中看到了这一点——它们通常都会阻塞。

您需要将超时设置为合理的时间长度，以便在服务器没有响应时您的请求将超时，但在服务器很忙的情况下也不会太短。您的应用程序应该被编写为使用多个线程。我会尝试运行十几个或更多线程，并让每个线程等待长达五到十秒的响应。让少数线程等待几乎没有开销。在编写网络爬虫时，您还应该注意不要用大量请求轰炸服务器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-25T09:59:05.347

这是一篇可能相关的博客文章：http: [//javaeesupportpatterns.blogspot.fi/2011/04/javanetsocketinputstreamsocketread0.html](http://javaeesupportpatterns.blogspot.fi/2011/04/javanetsocketinputstreamsocketread0.html)

简而言之，解决方案是确保定义了套接字超时。默认值为 0，表示没有超时。究竟如何，这取决于图书馆，在这种情况下显然是`com.gargoylesoftware.htmlunit`. 快速浏览一下正确的方法*可能*是[com.gargoylesoftware.htmlunit.WebClient.setTimeout](http://www.jarvana.com/jarvana/view/htmlunit/htmlunit/1.13/htmlunit-1.13-javadoc.jar!/com/gargoylesoftware/htmlunit/WebClient.html#setTimeout(int))。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-25T03:31:43.133

如果您的 Java 服务器在 Windows 上，您最后的选择是 SysInternals TCPView。

[http://technet.microsoft.com/en-us/sysinternals/bb897437.aspx](http://technet.microsoft.com/en-us/sysinternals/bb897437.aspx)

从中您将看到所有进程以及所有本地和远程端口的列表，其中将包括您的 Java 应用程序。您必须选择正确的连接来关闭，然后，Java 线程将抛出异常并结束。

当然存在关闭错误连接的风险。毕竟，这种方法是最后的手段。

2019 年 8 月 23 日更新：

当有大量连接时，TCPView 很慢。

更快的替代方案是 CurrPorts（来自 NirSoft）：[https ://www.nirsoft.net/utils/cports.html](https://www.nirsoft.net/utils/cports.html)

# javascript - 从JS中的JSON字符串解析特殊字符

> ID：12544214
> 
> 赞同：2
> 
> 时间：2012-09-22T13:31:56.680
> 
> 标签：javascript, json, parsing, special-characters

今天，当我处理一些 ajax 请求时，我遇到了非常奇怪的问题。发送简单请求后，JSON 格式的服务器响应如下所示：

```
{
coach_id: "172"
email: "foo@bar.com"
focus_area: "Ke da\nMetrics"
id: "433"
success_metrics: "\"Calm\""
user_id: "809"
} 
```

我想将此对象用作 pure.js 模板的数据（没关系，因为它本身就是问题，而不是在模板系统中）。

```
$('#new-client').directives({
    '#client-email@value' : 'email',
    '#client-focus' : 'focus_area',
    '#client-success' : 'success_metrics'
}).render(myObject); 
```

电子邮件作为简单输入，focus_area 和 success_metrics 作为文本区域。

但是，我无法正确解析我的对象特殊字符。

例如“Ke da\nMetrics”应该看起来：“Ke da Metrics”

我已经尝试过对其进行编码、替换字符等，但没有任何效果。

有什么提示吗？

字符串化后的整个对象：

```
{
    "id": "433",
    "coach_id": "172",
    "organization_id": "33",
    "user_id": "809",
    "start_date": "0202-02-02",
    "sessions_allotment": "5",
    "sessions_frequency": "TwiceAMonth",
    "sessions_frequency_other": "None",
    "tags": "KeTag,SanJose",
    "focus_area": "\\' \\\" Ke da\\nMetrics",
    "success_metrics": "\\\"Calm\\\"",
    "organization_level": "Grand P",
    "bill_rate": "34",
    "first_name": "Ke",
    "last_name": "Da",
    "email": "keda@mailinator.com",
    "coach_first_name": "Dawn",
    "coach_last_name": "Gilbert"
} 
```

这是控制台日志[http://screenshu.com/static/uploads/temporary/6n/0n/f2/2vt72y.jpg](http://screenshu.com/static/uploads/temporary/6n/0n/f2/2vt72y.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:39:21.010

\n 是 Unix 行结尾。

我不确定行尾是否是您想要的，但很像 \"Calm\" 会打印：

```
"Calm" 
```

然后 "Ke da\nMetrics" 将打印：

```
Ke da
Metrics 
```

所以-在您的情况下-无需进行人员搜寻以找出为什么值中有行尾-您可以使用以下代码：

```
myObject.focus_area = myObject.focus_area.replace(/\n/g, '');
$('#new-client').directives({
    '#client-email@value' : 'email',
    '#client-focus' : 'focus_area',
    '#client-success' : 'success_metrics'
}).render(myObject); 
```

正如我所说 - 问题在于您的值的服务器编码 - 理想情况下 JSON 不会包含 \n。

* * *

考虑到上面 - 这可能是一个 UTF8 问题 - 对不起上面的错误答案......

如果您尝试使用 utf8 作为编码加载 JSON，换行符是否仍然显示？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:39:39.900

一种解决方案是使用[带有指令的 JavaScript 函数](http://beebole.com/pure/documentation/using-js-functions-with-directives/)并使用一些过滤方法从输入 JSON 对象中删除/替换/ ...所有不需要的字符（例如，删除`\n`或替换`\n`为空格；这可以使用正则表达式来完成）

您可以拥有更多*过滤*功能（每个功能都执行特定类型的过滤）并将它们链接到带有指令的功能中。

假设您的过滤器方法将被调用`filter(arg)`and `otherFilter(arg)`，您的指令可能如下：

```
$('#new-client').directives({
    '#client-email@value' : function(arg) { 
         return filter(arg.context.email); 
    },
    '#client-focus' : function(arg) { 
         return filter(arg.context.focus_area); 
    },
    '#client-success' : function(arg) { 
         return otherFitler(filter(arg.context.success_metrics)); 
    }
}).render(myObject); 
```

我希望这会有所帮助。

# android - 我有 2 个 startActivityForResult 和 2 个 onActivityResult，第二个正确启动但尝试返回第一个数据？

> ID：12544234
> 
> 赞同：0
> 
> 时间：2012-09-22T13:35:00.030
> 
> 标签：android, android-intent, android-activity

我有 2 个按钮，它们分别调用 startActivityForResult 和 onActivityResult。第一个是联系人选择器，第二个是图片选择器。第一个操作正确，并按应有的方式将适当的联系电话返回给我的 eddittext。第二个按应有的方式开始，并允许我从我的画廊中选择一张图片，但不会按应有的方式将图片返回到我的 imagview。我认为它试图从第一个返回数据并且无法弄清楚如何区分第一个和第二个。我是 android 新手，仍在学习，犯错误，如果我在哪里以及如何出错，我将不胜感激。我有问题的代码如下。

```
Button.OnClickListener buttonClickListener3 = new Button.OnClickListener() {
    public void onClick(View contact) {
            Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
            startActivityForResult(intent, 1);
        }};

@Override
public void onActivityResult(int reqCode, int resultCode, Intent data) {
    super.onActivityResult(reqCode, resultCode, data);

          if (resultCode == Activity.RESULT_OK) {
                Uri contactData = data.getData();
                Cursor cur = managedQuery(contactData, null, null, null, null);
                ContentResolver contect_resolver = getContentResolver();

                if (cur.moveToFirst()) {
                    String id = cur.getString(cur.getColumnIndexOrThrow(BaseColumns._ID));
                    String name = "";
                    String no = "";

                    Cursor phoneCur = contect_resolver.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,
                            ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?", new String[] { id }, null);

                    if (phoneCur.moveToFirst()) {
                        name = phoneCur.getString(phoneCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                        no = phoneCur.getString(phoneCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                    }

                    Log.e("Phone no & name :***: ", name + " : " + no);
                    txt.append(name + " : " + no + "/n");

                    id = null;
                    name = null;
                    no = null;
                    phoneCur = null;
                }
                contect_resolver = null;
                cur = null;

            }
    }

    Button.OnClickListener buttonClickListener4 = new Button.OnClickListener() {
      public void onClick(View ChoosePictureButton) {
          Intent choosePictureIntent = new Intent(Intent.ACTION_PICK,android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI); 
          startActivityForResult(choosePictureIntent, 2);

        }};

        public void onActivityResult2(int requestCode2, int resultCode2, Intent intent) {
          super.onActivityResult(requestCode2, resultCode2, intent);

          if (resultCode2 == RESULT_OK) {
            Uri imageFileUri = intent.getData();

            try {
              BitmapFactory.Options bmpFactoryOptions = new BitmapFactory.Options();
              bmpFactoryOptions.inJustDecodeBounds = true;
              Bitmap bmp = BitmapFactory.decodeStream(getContentResolver().openInputStream(imageFileUri), null, bmpFactoryOptions);
              bmpFactoryOptions.inSampleSize = 2;
              bmpFactoryOptions.inJustDecodeBounds = false;
              bmp = BitmapFactory.decodeStream(getContentResolver().openInputStream(
                      imageFileUri), null, bmpFactoryOptions);

              ChosenImageView.setImageBitmap(bmp);
            } catch (FileNotFoundException e) {
              Log.v("ERROR", e.toString());
            }
          }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:40:07.877

尝试使用单个 onActivityResult() 如下所示

```
public void onActivityResult(int reqCode, int resultCode, Intent data) {
super.onActivityResult(reqCode, resultCode, data);

      if (resultCode == Activity.RESULT_OK) {
switch(reqCode)
{
 case 1:
            Uri contactData = data.getData();
            Cursor cur = managedQuery(contactData, null, null, null, null);
            ContentResolver contect_resolver = getContentResolver();

            if (cur.moveToFirst()) {
                String id = cur.getString(cur.getColumnIndexOrThrow(BaseColumns._ID));
                String name = "";
                String no = "";

                Cursor phoneCur = contect_resolver.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,
                        ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?", new String[] { id }, null);

                if (phoneCur.moveToFirst()) {
                    name = phoneCur.getString(phoneCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                    no = phoneCur.getString(phoneCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                }

                Log.e("Phone no & name :***: ", name + " : " + no);
                txt.append(name + " : " + no + "/n");

                id = null;
                name = null;
                no = null;
                phoneCur = null;
            }
            contect_resolver = null;
            cur = null;

        }
}
break ;

case 2:
        Uri imageFileUri = intent.getData();

        try {
          BitmapFactory.Options bmpFactoryOptions = new BitmapFactory.Options();
          bmpFactoryOptions.inJustDecodeBounds = true;
              Bitmap bmp =  
   BitmapFactory.decodeStream(getContentResolver().openInputStream(imageFileUri), null,  
 bmpFactoryOptions);
          bmpFactoryOptions.inSampleSize = 2;
          bmpFactoryOptions.inJustDecodeBounds = false;
          bmp = BitmapFactory.decodeStream(getContentResolver().openInputStream(
                  imageFileUri), null, bmpFactoryOptions);

          ChosenImageView.setImageBitmap(bmp);
        } catch (FileNotFoundException e) {
          Log.v("ERROR", e.toString());
        }
      }
    }
} 
```

尝试使用类似上面的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:19:28.807

在您的 onClickListener 中，在传入的视图上调用 getId，并使用不同的请求代码调用 startActivityForResult，具体取决于按钮的 id。然后在你的 onActivityResult 中，根据它收到的请求代码进行切换。

# xcode - xcodebuild 不依赖于 Mountain Lion，Xcode 4.5

> ID：12544235
> 
> 赞同：3
> 
> 时间：2012-09-22T13:35:12.160
> 
> 标签：xcode, dependencies, osx-mountain-lion, xcodebuild, xcode4.5

升级到 Mountain Lion 和 XCode 4.5 后，我的构建服务器（用于自动构建我的 iOS 应用程序）出现问题。问题是命令行实用程序“xcodebuild”不再构建我的项目的依赖项。基本上我有一个包含我的应用程序源的目录/项目和一个包含公共库代码的目录/项目，后一个目录是通过 XCode 首选项中的源树变量设置的。

我的笔记本电脑安装了 Lion，它可以完美运行（xcodebuild 首先从库项目中构建所有依赖项，然后再构建应用程序项目源）。但是，如果我将这两个目录复制到构建服务器，为库项目设置正确的源位置并执行 xcodebuild，它不会构建库依赖项。它可以选择库源目录，因为标题搜索路径很好，它只是跳过构建依赖项。在 XCode GUI 中它可以正常工作，只是命令行不起作用。XCode 版本相同（由 xcodebuild -version 打印的 Xcode 4.5 Build 版本 4G182），唯一的区别是操作系统版本。

有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:29:27.530

在我这样做之前我遇到了类似的问题

rm ~/Library/Preferences/xcodebuild.plist

有关更多信息，请参阅此线程

[http://lists.apple.com/archives/xcode-users/2010/Mar/msg00040.html](http://lists.apple.com/archives/xcode-users/2010/Mar/msg00040.html)

# ios - xcode 4.5 和 UIScrollview 有什么问题？

> ID：12544236
> 
> 赞同：3
> 
> 时间：2012-09-22T13:35:13.383
> 
> 标签：ios, ipad, uiscrollview, xcode4.5

我最近下载了 xcode 4.5 的最新稳定版本，但是当我尝试编译我的项目时，一切正常，除了我所有的滚动视图停止滚动！（使用 ios 6.0、ios 5.1 和 ios 5.0）

我下载了以前版本的 xcode 以查看它是否与我的代码有关，但它与 xcode_4.4.1 一起使用。

当我想访问任何滚动视图的属性时，我的应用程序崩溃了！我检查了僵尸检查员，似乎它们已被释放。怎么会这样 ？它以前工作过。

xcode 4.5 关于这个主题有什么变化？

我的滚动视图是使用故事板创建的，并与 IBOutlets 链接。你对我可以看的地方有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T14:03:54.943

您是否在情节提要的该场景中设置了手势识别器？如果是这样，请尝试在情节提要中删除它们并以编程方式添加它们。看到这个问题：[iphone - UIGestureRecognizer 阻止 UITableView 在 Xcode 4.5 中滚动](https://stackoverflow.com/questions/12423253/iphone-uigesturerecognizer-prevents-uitableview-from-scrolling-in-xcode-4-5)

# matlab - 模条件 MATLAB 描述的最小可能值

> ID：12544240
> 
> 赞同：0
> 
> 时间：2012-09-22T13:36:12.370
> 
> 标签：matlab, modulo, modulus

我即将在 matlab 中创建一个函数，它将接受多个模数及其相应的余数，然后它将确定适合给定模数条件的最小可能值。主要问题是我不允许在 matlab 中使用 mod() 和 rem() 内置函数。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:53:43.297

无需使用and即可轻松创建自定义`my_mod`和`my_rem`函数，并且可以像使用and一样使用这些函数。`mod``rem``mod``rem`

```
function modulus = my_mod(X, Y)
if isequal(Y, 0)
    modulus = X;
elseif isequal(X, Y)
    modulus = 0;
elseif (isequal(abs(X), Inf) || isequal(abs(Y), Inf))
    modulus = NaN;
else
    modulus = X - floor(X./Y) .* Y;
end
return

function remainder = my_rem(X, Y)
if isequal(Y, 0)
    remainder = NaN;
elseif isequal(X, Y)
    remainder = 0;
elseif (isequal(abs(X), Inf) || isequal(abs(Y), Inf))
    remainder = NaN;
else
    remainder = X - fix(X./Y) .* Y;
end
return 
```

# windows-8 - JavaScript 运行时错误：NotFoundError - Metro

> ID：12544243
> 
> 赞同：2
> 
> 时间：2012-09-22T13:36:28.043
> 
> 标签：windows-8, microsoft-metro

我使用 WinJS.Navigation.navigate 加载新页面。我使用这个代码行，它从 Metro 库中抛出了一个奇怪的异常。当我将其注释掉时，它运行良好。为什么？

代码：

```
WinJS.Navigation.navigate("/pages/about/about.html"); 
```

例外：

```
'WWAHost.exe' (Script): Loaded 'Script Code (MSAppHost/1.0)'. 
Exception was thrown at line 5200, column 4 in ms-appx://tiponspackage/js/jquery.js
0x800a139e - JavaScript runtime error: SyntaxError
Exception was thrown but not handled in user code at line 84, column 29 in ms-appx://tiponspackage/js/navigator.js
0x800a139e - JavaScript runtime error: NotFoundError
The program '[5864] WWAHost.exe' has exited with code -1 (0xffffffff). 
```

# sql - PostgreSQL：如何构造和索引与时间相关的数据以获得最佳查询性能？

> ID：12544247
> 
> 赞同：16
> 
> 时间：2012-09-22T13:36:57.670
> 
> 标签：sql, performance, postgresql, database-design, indexing

**问题：**

我的数据库中有与时间相关的数据，我正在努力以某种方式组织、构造和索引这些数据，以便用户可以有效地检索它；即使是简单的数据库查询也需要比可接受的更长的时间。

**项目背景：**

虽然这是一个纯粹的数据库问题，但一些上下文可能有助于理解数据模型：

该项目围绕对大型复杂机器进行研究。我对机器本身不太了解，但实验室里有传言说那里的某个地方有一个[磁通电容器](http://en.wikipedia.org/wiki/DeLorean_time_machine#Flux_capacitor)——我想昨天，我发现[薛定谔猫](http://en.wikipedia.org/wiki/Schr%C3%B6dinger%27s_cat)的尾巴挂在旁边;-)

我们在机器运行时使用传感器测量许多不同的*参数*，这些传感器位于机器各处的不同测量点（所谓的*点*），在一段时间内以一定的间隔。我们不仅使用一种*设备*来测量这些参数，而且使用它们的整个范围；它们的测量数据质量不同（我认为这涉及采样率、传感器质量、价格和我不关心的许多其他方面）；该项目的一个目标实际上是在这些设备之间进行比较。您可以将这些测量设备想象成一堆实验室手推车，每个手推车都有许多连接到机器的电缆，每个都提供测量数据。

**数据模型：**

有来自每个地点和每个设备的每个参数的测量数据，例如每分钟一次，为期 6 天。我的工作是将这些数据存储在数据库中并提供对它的有效访问。

简而言之：

*   设备具有唯一名称
*   参数也有名称；它们不是唯一的，所以它也有一个 ID
*   一个点有一个 ID

项目数据库当然更复杂，但这些细节似乎与问题无关。

*   测量数据*索引*具有 ID、测量完成时间的时间戳以及对设备的引用以及进行测量的地点
*   测量数据*值*引用参数和实际测量的值

最初，我将测量数据值建模为具有自己的 ID 作为主键；测量数据索引和值之间的`n:m`关系是一个单独的表，只存储`index:value`ID对，但是由于该表本身占用了相当多的硬盘空间，我们将其删除并将值ID更改为一个简单的整数，存储该ID的ID所属的测量数据指标；测量数据值的主键现在由该 ID 和参数 ID 组成。

*附带说明*：当我创建数据模型时，我仔细遵循了常见的设计准则，如[3NF](http://en.wikipedia.org/wiki/Third_normal_form)和适当的表约束（如唯一键）；另一个经验法则是为每个外键创建一个索引。我怀疑测量数据索引/值表与“严格”3NF 的偏差可能是我现在正在查看的性能问题的原因之一，但是将数据模型改回来并没有解决问题。

**DDL 中的数据模型：**

**注意：**下面有此代码的更新。

下面的脚本创建数据库和所有涉及的表。请注意，目前还没有明确的索引。在你运行这个之前，请确保你没有碰巧已经有一个数据库调用`so_test`了任何有价值的数据......

```
\c postgres
DROP DATABASE IF EXISTS so_test;
CREATE DATABASE so_test;
\c so_test

CREATE TABLE device
(
  name VARCHAR(16) NOT NULL,
  CONSTRAINT device_pk PRIMARY KEY (name)
);

CREATE TABLE parameter
(
  -- must have ID as names are not unique
  id SERIAL,
  name VARCHAR(64) NOT NULL,
  CONSTRAINT parameter_pk PRIMARY KEY (id)
);

CREATE TABLE spot
(
  id SERIAL,
  CONSTRAINT spot_pk PRIMARY KEY (id)
);

CREATE TABLE measurement_data_index
(
  id SERIAL,
  fk_device_name VARCHAR(16) NOT NULL,
  fk_spot_id INTEGER NOT NULL,
  t_stamp TIMESTAMP NOT NULL,
  CONSTRAINT measurement_pk PRIMARY KEY (id),
  CONSTRAINT measurement_data_index_fk_2_device FOREIGN KEY (fk_device_name)
    REFERENCES device (name) MATCH FULL
    ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT measurement_data_index_fk_2_spot FOREIGN KEY (fk_spot_id)
    REFERENCES spot (id) MATCH FULL
    ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT measurement_data_index_uk_all_cols UNIQUE (fk_device_name, fk_spot_id, t_stamp)
);

CREATE TABLE measurement_data_value
(
  id INTEGER NOT NULL,
  fk_parameter_id INTEGER NOT NULL,
  value VARCHAR(16) NOT NULL,
  CONSTRAINT measurement_data_value_pk PRIMARY KEY (id, fk_parameter_id),
  CONSTRAINT measurement_data_value_fk_2_parameter FOREIGN KEY (fk_parameter_id)
    REFERENCES parameter (id) MATCH FULL
    ON UPDATE NO ACTION ON DELETE NO ACTION
); 
```

我还创建了一个脚本来用一些测试数据填充表格：

```
CREATE OR REPLACE FUNCTION insert_data()
RETURNS VOID
LANGUAGE plpgsql
AS
$BODY$
  DECLARE
    t_stamp  TIMESTAMP := '2012-01-01 00:00:00';
    index_id INTEGER;
    param_id INTEGER;
    dev_name VARCHAR(16);
    value    VARCHAR(16);
  BEGIN
    FOR dev IN 1..5
    LOOP
      INSERT INTO device (name) VALUES ('dev_' || to_char(dev, 'FM00'));
    END LOOP;
    FOR param IN 1..20
    LOOP
      INSERT INTO parameter (name) VALUES ('param_' || to_char(param, 'FM00'));
    END LOOP;
    FOR spot IN 1..10
    LOOP
      INSERT INTO spot (id) VALUES (spot);
    END LOOP;

    WHILE t_stamp < '2012-01-07 00:00:00'
    LOOP
      FOR dev IN 1..5
      LOOP
        dev_name := 'dev_' || to_char(dev, 'FM00');
        FOR spot IN 1..10
        LOOP
          INSERT INTO measurement_data_index
            (fk_device_name, fk_spot_id, t_stamp)
            VALUES (dev_name, spot, t_stamp) RETURNING id INTO index_id;
          FOR param IN 1..20
          LOOP
            SELECT id INTO param_id FROM parameter
              WHERE name = 'param_' || to_char(param, 'FM00');
            value := 'd'  || to_char(dev,   'FM00')
                  || '_s' || to_char(spot,  'FM00')
                  || '_p' || to_char(param, 'FM00');
            INSERT INTO measurement_data_value (id, fk_parameter_id, value)
              VALUES (index_id, param_id, value);
          END LOOP;
        END LOOP;
      END LOOP;
      t_stamp := t_stamp + '1 minute'::INTERVAL;
    END LOOP;

  END;
$BODY$;

SELECT insert_data(); 
```

PostgreSQL 查询计划器需要最新的统计信息，因此请分析所有表。可能不需要吸尘，但无论如何都要这样做：

```
VACUUM ANALYZE device;
VACUUM ANALYZE measurement_data_index;
VACUUM ANALYZE measurement_data_value;
VACUUM ANALYZE parameter;
VACUUM ANALYZE spot; 
```

**示例查询：**

如果我现在运行一个非常简单的查询来例如获取某个参数的所有值，它已经需要几秒钟，尽管数据库还不是很大：

```
EXPLAIN (ANALYZE ON, BUFFERS ON)
SELECT measurement_data_value.value
  FROM measurement_data_value, parameter
 WHERE measurement_data_value.fk_parameter_id = parameter.id
   AND parameter.name = 'param_01'; 
```

我的开发机器上的示例结果（有关我的环境的一些详细信息，请参见下文）：

```
 QUERY PLAN                                                                
------------------------------------------------------------------------------------------------------------------------------------------
 Hash Join  (cost=1.26..178153.26 rows=432000 width=12) (actual time=0.046..2281.281 rows=432000 loops=1)
   Hash Cond: (measurement_data_value.fk_parameter_id = parameter.id)
   Buffers: shared hit=55035
   ->  Seq Scan on measurement_data_value  (cost=0.00..141432.00 rows=8640000 width=16) (actual time=0.004..963.999 rows=8640000 loops=1)
         Buffers: shared hit=55032
   ->  Hash  (cost=1.25..1.25 rows=1 width=4) (actual time=0.010..0.010 rows=1 loops=1)
         Buckets: 1024  Batches: 1  Memory Usage: 1kB
         Buffers: shared hit=1
         ->  Seq Scan on parameter  (cost=0.00..1.25 rows=1 width=4) (actual time=0.004..0.008 rows=1 loops=1)
               Filter: ((name)::text = 'param_01'::text)
               Buffers: shared hit=1
 Total runtime: 2313.615 ms
(12 rows) 
```

除了隐式索引之外，数据库中没有索引，因此规划器仅执行顺序扫描也就不足为奇了。如果我遵循似乎是经验法则并为每个外键添加 btree 索引，例如

```
CREATE INDEX measurement_data_index_idx_fk_device_name
    ON measurement_data_index (fk_device_name);
CREATE INDEX measurement_data_index_idx_fk_spot_id
    ON measurement_data_index (fk_spot_id);
CREATE INDEX measurement_data_value_idx_fk_parameter_id
    ON measurement_data_value (fk_parameter_id); 
```

然后再做一次真空分析（为了安全起见）并重新运行查询，规划器使用位图堆和位图索引扫描，总查询时间有所改善：

```
 QUERY PLAN                                                                                   
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Nested Loop  (cost=8089.19..72842.42 rows=431999 width=12) (actual time=66.773..1336.517 rows=432000 loops=1)
   Buffers: shared hit=55033 read=1184
   ->  Seq Scan on parameter  (cost=0.00..1.25 rows=1 width=4) (actual time=0.005..0.012 rows=1 loops=1)
         Filter: ((name)::text = 'param_01'::text)
         Buffers: shared hit=1
   ->  Bitmap Heap Scan on measurement_data_value  (cost=8089.19..67441.18 rows=431999 width=16) (actual time=66.762..1237.488 rows=432000 loops=1)
         Recheck Cond: (fk_parameter_id = parameter.id)
         Buffers: shared hit=55032 read=1184
         ->  Bitmap Index Scan on measurement_data_value_idx_fk_parameter_id  (cost=0.00..7981.19 rows=431999 width=0) (actual time=65.222..65.222 rows=432000 loops=1)
               Index Cond: (fk_parameter_id = parameter.id)
               Buffers: shared read=1184
 Total runtime: 1371.716 ms
(12 rows) 
```

但是，对于一个非常简单的查询，这仍然是超过一秒的执行时间。

**到目前为止我做了什么：**

*   给自己买了一本[PostgreSQL 9.0 High Performance](http://www.packtpub.com/postgresql-90-high-performance/book) - 好书！
*   做了一些基本的 PostgreSQL 服务器配置，见下面的环境
*   创建了一个框架来使用项目中的真实查询运行一系列性能测试并以图形方式显示结果；这些查询使用设备、点、参数和时间间隔作为输入参数，并且测试系列运行例如 5、10 个设备、5、10 个点、5、10、15、20 个参数和 1..7 天。基本结果是它们都太慢了，但是它们的查询计划太复杂了，我无法理解，所以我回到上面使用的非常简单的查询。

我已经研究过对值表进行[分区。](http://www.postgresql.org/docs/current/interactive/ddl-partitioning.html)数据与时间相关，分区似乎是组织此类数据的合适方法；甚至 PostgreSQL 文档中的[示例](http://www.postgresql.org/docs/current/interactive/ddl-partitioning.html#DDL-PARTITIONING-IMPLEMENTATION)也使用了类似的东西。但是，我在[同一篇文章](http://www.postgresql.org/docs/current/interactive/ddl-partitioning.html#DDL-PARTITIONING-OVERVIEW)中读到：

> 这些好处通常只有在表格非常大的情况下才值得。表从分区中受益的确切点取决于应用程序，但经验法则是表的大小应该超过数据库服务器的物理内存。

整个测试数据库的大小小于 1GB，我在具有 8GB RAM 的开发机器和具有 1GB 的虚拟机上运行测试（另请参见下面的环境），因此该表远非很大甚至超过物理内存。无论如何，我可能会在某个阶段实现分区，但我觉得这种方法并不针对性能问题本身。

此外，我正在考虑对值表进行[聚类。](http://www.postgresql.org/docs/current/interactive/sql-cluster.html)我不喜欢这样一个事实，即每当插入新数据时都必须重新进行集群，而且它还需要一个独占的读/写锁，但是看看[这个](https://stackoverflow.com/a/9436055/217844)SO question，它似乎无论如何都有它的好处，并且可能是一种选择。但是，集群是在索引上完成的，由于查询中最多有 4 个选择条件（设备、点、参数和时间），我必须为所有这些条件创建集群——这反过来给我的印象是我只是没有创建正确的索引......

**我的环境：**

*   正在开发具有双核 CPU 和 8GB RAM 的 MacBook Pro（2009 年中）
*   我正在 MBP 上托管的具有 1GB RAM 的虚拟 Debian 6.0 机器上运行数据库性能测试
*   PostgreSQL 版本是 9.1，因为这是我安装时的最新版本，可以升级到 9.2
*   [按照PostgreSQL 文档](http://wiki.postgresql.org/wiki/Tuning_Your_PostgreSQL_Server#shared_buffers)中的建议，我已将`shared_buffers`两台机器上的默认 1600kB 更改为 25% 的 RAM （这涉及扩大SHMALL、SHMMAX 等[内核设置）](http://www.postgresql.org/docs/current/interactive/kernel-resources.html)
*   同样，我已将[有效](http://wiki.postgresql.org/wiki/Tuning_Your_PostgreSQL_Server#effective_cache_size)缓存大小从默认的 128MB 更改为可用 RAM 的 50%
*   我使用不同的[work_mem](http://wiki.postgresql.org/wiki/Tuning_Your_PostgreSQL_Server#work_mem)设置进行了性能测试，但没有发现性能上有任何重大差异

**注意：**我认为重要的一个方面是，具有来自项目的真实查询的性能测试系列在 8GB 的​​ MacBook 和 1GB 的虚拟机之间在性能方面没有差异；即，如果在 MacBook 上查询需要 10 秒，那么在 VM 上也需要 10 秒。此外，我在更改前后进行了相同的性能测试`shared_buffers`，`effective_cache_size`并且`work_mem`配置更改并没有将性能提高 10% 以上；实际上，有些结果甚至变得更糟，因此似乎任何差异都是由测试变化而不是由配置更改引起的。这些观察让我相信 RAM 和`postgres.conf`设置还不是这里的限制因素。

**我的问题：**

我不知道不同的或额外的索引是否会加快查询速度，如果有的话，要创建哪些。查看数据库的大小和查询的简单程度，我的印象是我的数据模型或到目前为止我选择索引的方式存在根本性错误。

有没有人对我如何构建和索引与时间相关的我以提高查询性能有一些建议？

更广泛地问，是调优查询性能

*   通常是“在事件基础上”完成的，即一旦查询不能令人满意地执行？看来我*所有*的查询都太慢了......
*   主要是查看（和理解）查询计划的问题，然后添加索引并衡量情况是否有所改善，可能会通过应用自己的经验来加速流程？

我如何让这个数据库飞起来？

* * *

**更新01：**

看看到目前为止的回复，我想我没有正确解释测量数据索引/值表的必要性，所以让我再试一次。**存储空间**是这里的问题。

**笔记：**

*   此处使用的数字更多地用于说明目的，仅用于比较，即数字本身不相关，重要的是使用单个表与使用索引和值表之间存储要求的百分比差异
*   [本章](http://www.postgresql.org/docs/current/interactive/datatype.html)记录了PostgreSQL数据类型存储大小
*   这并没有声称在科学上是正确的，例如，这些单位可能是数学假的；这些数字应该加起来

假设

*   1天的测量
*   每分钟 1 组测量
*   10 台设备
*   10个参数
*   10个点

这加起来

```
1 测量/分钟 x 60 分钟/小时 x 24 小时/天 = 1440 测量/天

```

每次测量都有来自每个地点和每个设备的每个参数的数据，所以

```
10 个点 x 10 个设备 x 10 个参数 = 1000 个数据集/测量

```

所以总的来说

```
1440 个测量值/天 x 1000 个数据集/测量值 = 1 440 000 个数据集/天

```

[如果我们按照Catcall 的建议](https://stackoverflow.com/a/12545542/217844)将所有测量值存储在一个表中，例如

```
CREATE TABLE measurement_data
(
  device_name character varying(16) NOT NULL,
  spot_id integer NOT NULL,
  parameter_id integer NOT NULL,
  t_stamp timestamp without time zone NOT NULL,
  value character varying(16) NOT NULL,
  -- constraints...
); 
```

单行加起来

```
17 + 4 + 4 + 8 + 17 = 50 字节/行

```

在最坏的情况下，所有 varchar 字段都已完全填充。这相当于

```
50 字节/行 x 1 440 000 行/天 = 72 000 000 字节/天

```

或每天约 69 MB。

虽然这听起来并不多，但真实数据库中的存储空间要求会令人望而却步（再次重申，此处使用的数字仅用于说明）。因此，我们将测量数据拆分为索引和值表，如问题前面所述：

```
CREATE TABLE measurement_data_index
(
  id SERIAL,
  fk_device_name VARCHAR(16) NOT NULL,
  fk_spot_id INTEGER NOT NULL,
  t_stamp TIMESTAMP NOT NULL,
  -- constraints...
);

CREATE TABLE measurement_data_value
(
  id INTEGER NOT NULL,
  fk_parameter_id INTEGER NOT NULL,
  value VARCHAR(16) NOT NULL,
  -- constraints...
); 
```

其中**值行的 ID 等于它所属的索引的 ID**。

索引表和值表中一行的大小是

```
索引：4 + 17 + 4 + 8 = 33 字节
值：4 + 4 + 17 = 25 个字节

```

（再次，最坏的情况）。总行数为

```
索引：10 个设备 x 10 个点 x 1440 次测量/天 = 144 000 行/天
值：10 个参数 x 144 000 行/天 = 1 440 000 行/天

```

所以总数是

```
索引：33 字节/行 x 144 000 行/天 = 4 752 000 字节/天
值：25 字节/行 x 1 440 000 行/天 = 36 000 000 字节/天
总计：= 40 752 000 字节/天

```

或每天约 39 MB - 而单表解决方案约 69 MB。

* * *

**更新 02（回复：[wildplassers 响应](https://stackoverflow.com/a/12553459/217844)）：**

这个问题已经很长了，所以我正在考虑更新上面原始问题中的代码，但我认为在这里同时拥有第一个和改进的解决方案可能有助于更好地看到差异。

与原始方法相比的变化（按重要性排序）：

*   交换时间戳和参数，即将`t_stamp`字段从`measurement_data_index`表移到`measurement_data_value`和`fk_parameter_id`从值移到索引表：通过这种更改，索引表中的所有字段都是不变的，新的测量数据只写入值表。我没想到这会带来任何重大的查询性能改进（我错了），但我觉得它使测量数据索引的概念更加清晰。虽然它需要更多的存储空间（根据一些相当粗略的估计），但当根据读/写要求将[表空间移动到不同的硬盘驱动器时，拥有一个“静态”索引表也可能有助于部署。](http://www.postgresql.org/docs/current/interactive/manage-ag-tablespaces.html)
*   在设备表中使用代理键：据我了解，代理键是从数据库设计的角度来看并非严格要求的主键（例如，设备名称已经是唯一的，因此它也可以用作 PK），但是可能有助于提高查询性能。我再次添加它是因为，如果索引表仅引用 ID（而不是某些名称和某些 ID），我觉得它会使概念更清晰。
*   rewrite `insert_data()`：使用`generate_series()`而不是嵌套`FOR`循环；使代码更加“活泼”。
*   作为这些更改的副作用，插入测试数据只需要第一个解决方案所需时间的大约 50%。
*   我没有按照 wildplasser 的建议添加视图；不需要向后兼容。
*   查询计划器似乎忽略了索引表中 FK 的附加索引，并且对查询计划或性能没有影响。

（似乎没有这一行，下面的代码没有正确显示为SO页面上的代码......）

```
\c postgres
DROP DATABASE IF EXISTS so_test_03;
CREATE DATABASE so_test_03;
\c so_test_03

CREATE TABLE device
(
  id SERIAL,
  name VARCHAR(16) NOT NULL,
  CONSTRAINT device_pk PRIMARY KEY (id),
  CONSTRAINT device_uk_name UNIQUE (name)
);

CREATE TABLE parameter
(
  id SERIAL,
  name VARCHAR(64) NOT NULL,
  CONSTRAINT parameter_pk PRIMARY KEY (id)
);

CREATE TABLE spot
(
  id SERIAL,
  name VARCHAR(16) NOT NULL,
  CONSTRAINT spot_pk PRIMARY KEY (id)
);

CREATE TABLE measurement_data_index
(
  id SERIAL,
  fk_device_id    INTEGER NOT NULL,
  fk_parameter_id INTEGER NOT NULL,
  fk_spot_id      INTEGER NOT NULL,
  CONSTRAINT measurement_pk PRIMARY KEY (id),
  CONSTRAINT measurement_data_index_fk_2_device FOREIGN KEY (fk_device_id)
    REFERENCES device (id) MATCH FULL
    ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT measurement_data_index_fk_2_parameter FOREIGN KEY (fk_parameter_id)
    REFERENCES parameter (id) MATCH FULL
    ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT measurement_data_index_fk_2_spot FOREIGN KEY (fk_spot_id)
    REFERENCES spot (id) MATCH FULL
    ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT measurement_data_index_uk_all_cols UNIQUE (fk_device_id, fk_parameter_id, fk_spot_id)
);

CREATE TABLE measurement_data_value
(
  id INTEGER NOT NULL,
  t_stamp TIMESTAMP NOT NULL,
  value VARCHAR(16) NOT NULL,
  -- NOTE: inverse field order compared to wildplassers version
  CONSTRAINT measurement_data_value_pk PRIMARY KEY (id, t_stamp),
  CONSTRAINT measurement_data_value_fk_2_index FOREIGN KEY (id)
    REFERENCES measurement_data_index (id) MATCH FULL
    ON UPDATE NO ACTION ON DELETE NO ACTION
);

CREATE OR REPLACE FUNCTION insert_data()
RETURNS VOID
LANGUAGE plpgsql
AS
$BODY$
  BEGIN
    INSERT INTO device (name)
    SELECT 'dev_' || to_char(item, 'FM00')
    FROM generate_series(1, 5) item;

    INSERT INTO parameter (name)
    SELECT 'param_' || to_char(item, 'FM00')
    FROM generate_series(1, 20) item;

    INSERT INTO spot (name)
    SELECT 'spot_' || to_char(item, 'FM00')
    FROM generate_series(1, 10) item;

    INSERT INTO measurement_data_index (fk_device_id, fk_parameter_id, fk_spot_id)
    SELECT device.id, parameter.id, spot.id
    FROM device, parameter, spot;

    INSERT INTO measurement_data_value(id, t_stamp, value)
    SELECT index.id,
           item,
           'd'  || to_char(index.fk_device_id,    'FM00') ||
           '_s' || to_char(index.fk_spot_id,      'FM00') ||
           '_p' || to_char(index.fk_parameter_id, 'FM00')
    FROM measurement_data_index index,
         generate_series('2012-01-01 00:00:00', '2012-01-06 23:59:59', interval '1 min') item;
  END;
$BODY$;

SELECT insert_data(); 
```

在某个阶段，我将改变我自己的约定，使用内联`PRIMARY KEY`和`REFERENCES`语句而不是显式`CONSTRAINT`s；目前，我认为保持这种方式可以更容易地比较两种解决方案。

不要忘记更新查询计划器的统计信息：

```
VACUUM ANALYZE device;
VACUUM ANALYZE measurement_data_index;
VACUUM ANALYZE measurement_data_value;
VACUUM ANALYZE parameter;
VACUUM ANALYZE spot; 
```

运行一个查询，它应该产生与第一种方法中的结果相同的结果：

```
EXPLAIN (ANALYZE ON, BUFFERS ON)
SELECT measurement_data_value.value
  FROM measurement_data_index,
       measurement_data_value,
       parameter
 WHERE measurement_data_index.fk_parameter_id = parameter.id
   AND measurement_data_index.id = measurement_data_value.id
   AND parameter.name = 'param_01'; 
```

结果：

```
Nested Loop  (cost=0.00..34218.28 rows=431998 width=12) (actual time=0.026..696.349 rows=432000 loops=1)
  Buffers: shared hit=435332
  ->  Nested Loop  (cost=0.00..29.75 rows=50 width=4) (actual time=0.012..0.453 rows=50 loops=1)
        Join Filter: (measurement_data_index.fk_parameter_id = parameter.id)
        Buffers: shared hit=7
        ->  Seq Scan on parameter  (cost=0.00..1.25 rows=1 width=4) (actual time=0.005..0.010 rows=1 loops=1)
              Filter: ((name)::text = 'param_01'::text)
              Buffers: shared hit=1
        ->  Seq Scan on measurement_data_index  (cost=0.00..16.00 rows=1000 width=8) (actual time=0.003..0.187 rows=1000 loops=1)
              Buffers: shared hit=6
  ->  Index Scan using measurement_data_value_pk on measurement_data_value  (cost=0.00..575.77 rows=8640 width=16) (actual time=0.013..12.157 rows=8640 loops=50)
        Index Cond: (id = measurement_data_index.id)
        Buffers: shared hit=435325
Total runtime: 726.125 ms 
```

这几乎是第一种方法所需的约 1.3 秒的一半；考虑到我正在加载 432K 行，这是我目前可以接受的结果。

**注意：**值表 PK 中的字段顺序为`id, t_stamp`; wildplassers 响应的顺序是`t_stamp, whw_id`. 我这样做是因为我觉得“常规”字段顺序是在表声明中列出字段的顺序（而“反向”则是另一种方式），但这只是我自己的约定，让我无法获得使困惑。无论哪种方式，正如[Erwin Brandstetter](https://stackoverflow.com/a/12545427/217844)所指出的，这个顺序对于性能提升绝对是**至关重要的；**如果是错误的方法（并且缺少 wildplassers 解决方案中的反向索引），查询计划如下所示，性能会差 3 倍以上：

```
Hash Join  (cost=22.14..186671.54 rows=431998 width=12) (actual time=0.460..2570.941 rows=432000 loops=1)
  Hash Cond: (measurement_data_value.id = measurement_data_index.id)
  Buffers: shared hit=63537
  ->  Seq Scan on measurement_data_value  (cost=0.00..149929.58 rows=8639958 width=16) (actual time=0.004..1095.606 rows=8640000 loops=1)
        Buffers: shared hit=63530
  ->  Hash  (cost=21.51..21.51 rows=50 width=4) (actual time=0.446..0.446 rows=50 loops=1)
        Buckets: 1024  Batches: 1  Memory Usage: 2kB
        Buffers: shared hit=7
        ->  Hash Join  (cost=1.26..21.51 rows=50 width=4) (actual time=0.015..0.359 rows=50 loops=1)
              Hash Cond: (measurement_data_index.fk_parameter_id = parameter.id)
              Buffers: shared hit=7
              ->  Seq Scan on measurement_data_index  (cost=0.00..16.00 rows=1000 width=8) (actual time=0.002..0.135 rows=1000 loops=1)
                    Buffers: shared hit=6
              ->  Hash  (cost=1.25..1.25 rows=1 width=4) (actual time=0.008..0.008 rows=1 loops=1)
                    Buckets: 1024  Batches: 1  Memory Usage: 1kB
                    Buffers: shared hit=1
                    ->  Seq Scan on parameter  (cost=0.00..1.25 rows=1 width=4) (actual time=0.004..0.007 rows=1 loops=1)
                          Filter: ((name)::text = 'param_01'::text)
                          Buffers: shared hit=1
Total runtime: 2605.277 ms 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T16:08:30.850

我基本上修改了你的整个设置。在 PostgreSQL 9.1.5 下测试。

### 数据库模式

*   我认为您的表格布局有一个重大的逻辑缺陷（@Catcall 也指出了这一点）。我按照我怀疑应该是的方式对其进行了更改：
    您的最后一个表`measurement_data_value`（我将其重命名为）应该为（现在：）中的每一行`measure_val`保存一个值（现在：） 。见下文。`parameter``param``measurement_data_index``measure`

*   即使“设备具有唯一名称”，仍然使用整数代理主键。文本字符串在大表中用作外键本质上更庞大且更慢。它们也受**collat​​ion**的约束，这会显着减慢查询速度。

    [在这个相关问题下](https://stackoverflow.com/q/9888096/939860)，我们发现在中等大小的`text`列上连接和排序是主要的减速。如果您坚持使用文本字符串作为主键，请阅读 PostgreSQL 9.1 或更高版本中的[排序规则支持](http://www.postgresql.org/docs/current/interactive/collation.html)。

*   不要相信使用`id`作为主键名称的反模式。当你加入几个表时（就像你必须做很多事情一样！）你最终会得到几个列名`id`- 真是一团糟！（遗憾的是，一些 ORM 使用它。）

    取而代之的是，以某种方式在表之后命名一个代理主键列，以使其本身有意义。然后你可以让引用它的外键具有相同的名称（这很好，因为它们包含相同的数据）。

    ```
    CREATE TABLE spot
    ( **spot_id** SERIAL PRIMARY KEY);
    ```

*   不要使用超长标识符。它们很难打字，也很难阅读。经验法则：要清楚，越短越好。

*   `varchar(n)`如果没有令人信服的理由，请勿使用。只需使用[`varchar`，或更简单：just`text`](http://www.postgresql.org/docs/current/interactive/datatype-character.html)。

所有这些以及更多内容都包含在我关于更好的数据库架构的建议中：

```
CREATE TABLE device
( device_id serial PRIMARY KEY 
 ,device text NOT NULL
);

CREATE TABLE param
( param_id serial PRIMARY KEY
 ,param text NOT NULL
);
CREATE INDEX param_param_idx ON param (param); -- you are looking up by name!

CREATE TABLE spot
( spot_id  serial PRIMARY KEY);

CREATE TABLE measure
( measure_id serial PRIMARY KEY
 ,device_id int NOT NULL REFERENCES device (device_id) ON UPDATE CASCADE
 ,spot_id int NOT NULL REFERENCES spot (spot_id) ON UPDATE CASCADE
 ,t_stamp timestamp NOT NULL
 ,CONSTRAINT measure_uni UNIQUE (device_id, spot_id, t_stamp)
);

CREATE TABLE measure_val   -- better name? 
( measure_id int NOT NULL REFERENCES measure (measure_id)
                 ON UPDATE CASCADE ON DELETE CASCADE  -- guessing it fits
 ,param_id int NOT NULL REFERENCES param (param_id)
                 ON UPDATE CASCADE ON DELETE CASCADE  -- guessing it fits
 ,value text NOT NULL
 ,CONSTRAINT measure_val_pk PRIMARY KEY (measure_id, param_id)
);
CREATE INDEX measure_val_param_id_idx ON measure_val (param_id);  -- !crucial! 
```

我将 bulky 重命名`measurement_data_value`为`measure_val`，因为这就是表格中的内容：测量的参数值。现在，**多列 pk**也很有意义。

但我**在`param_id`**. 按照您的方式，column`param_id`是多列索引中的第二列，这导致`param_id`. [在 dba.SE 上的相关问题下](https://dba.stackexchange.com/q/6115/3684)阅读所有关于此的血腥细节。

单独实施后，您的查询应该更快。但你可以做的还有更多。

### 测试数据

**这会更快地**填充数据。关键是我使用基于集合的 DML 命令，执行批量插入而不是执行单个插入的循环，这需要很长时间。对您要插入的大量测试数据产生很大影响。它也更短更简单。

为了提高效率，我使用了[数据修改 CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)（Postgres 9.1 中的新功能），它可以立即重用最后一步中的大量行。

```
CREATE OR REPLACE FUNCTION insert_data()
RETURNS void LANGUAGE plpgsql AS
$BODY$
BEGIN
   INSERT INTO device (device)
   SELECT 'dev_' || to_char(g, 'FM00')
   FROM generate_series(1,5) g;

   INSERT INTO param (param)
   SELECT 'param_' || to_char(g, 'FM00')
   FROM generate_series(1,20) g;

   INSERT INTO spot (spot_id)
   SELECT nextval('spot_spot_id_seq'::regclass)
   FROM generate_series(1,10) g; -- to set sequence, too

   WITH x AS (
      INSERT INTO measure (device_id, spot_id, t_stamp)
      SELECT d.device_id, s.spot_id, g
      FROM   device    d
      CROSS  JOIN spot s
      CROSS  JOIN generate_series('2012-01-06 23:00:00' -- smaller set
                                 ,'2012-01-07 00:00:00' -- for quick tests
                                 ,interval '1 min') g
      RETURNING *
      )
   INSERT INTO measure_val (measure_id, param_id, value)
   SELECT x.measure_id
         ,p.param_id
         ,x.device_id || '_' || x.spot_id || '_' || p.param
   FROM  x
   CROSS JOIN param p;
END
$BODY$; 
```

称呼：

```
SELECT insert_data(); 
```

### 询问

*   使用显式`JOIN`语法和表别名使您的查询更易于阅读和调试：

```
SELECT v.value
FROM   param **p**
JOIN   measure_val **v USING (param_id)**
WHERE  p.param = 'param_01'; 
```

该`USING`子句仅用于简化语法，但不优于`ON`其他。

这现在应该**快得多**，原因有两个：

*   `param_param_idx`上的索引`param.param`。
*   索引`measure_val_param_id_idx`上`measure_val.param_id`，喜欢在[这里](https://dba.stackexchange.com/q/6115/3684)详细解释。

### 反馈后编辑

我的主要疏忽是你已经`measurement_data_value_idx_fk_parameter_id`在你的问题中以进一步的形式添加了关键索引。（我责怪你的名字太神秘了！:p）仔细观察，你的测试设置中有超过 10M (7 * 24 * 60 * 5 * 10 * 20) 行，并且查询检索到 > 500K。我只测试了一个小得多的子集。

此外，当您检索整个表的 5% 时，索引只会到此为止。我当时是乐观的，这么大的数据量肯定需要一些时间。查询 500k 行是否符合实际要求？我会假设您在现实生活中的应用程序中进行聚合？

### 更多选项

*   [分区](http://www.postgresql.org/docs/current/interactive/ddl-partitioning.html)。
*   更多的 RAM 和使用它的设置。

    > 具有 1GB RAM 的虚拟 Debian 6.0 机器

    远低于你所需要的。

*   [部分索引](http://www.postgresql.org/docs/current/interactive/indexes-partial.html)，特别是与PostgreSQL 9.2**的仅索引扫描有关。**

*   [**聚合数据的物化视图**](http://en.wikipedia.org/wiki/Materialized_view)。显然，您不会显示 500K 行，而是某种聚合。您可以计算一次并将结果保存在物化视图中，从那里您可以更快地检索数据。
*   如果您的查询主要是通过参数（如示例），您可以使用[**`CLUSTER`**](http://www.postgresql.org/docs/current/interactive/sql-cluster.html)根据索引物理重写表：

    ```
    CLUSTER measure_val USING measure_val_param_id_idx 
    ```

    这样，一个参数的所有行都将连续存储。意味着更少的块读取和更容易缓存。应该使手头的查询更快。或者`INSERT`以有利的顺序开始的行，达到同样的效果。
    分区将与 很好地混合`CLUSTER`，因为您不必每次都重写整个（巨大的）表。由于您的数据显然只是插入而不更新，因此分区将在`CLUSTER`.

*   一般来说，**PostgreSQL 9.2**应该非常适合您，因为它的[改进侧重于大数据的性能](http://www.postgresql.org/docs/current/interactive/release-9-2.html#AEN110346)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-23T15:09:36.587

这个“解决方案”背后的想法是：避免 {device,spot,paramater} 使用单独的关键域。这三者只有 1000 种可能的组合。（可能被视为违反 BCNF 的坏案例）。所以我将它们组合成一个 what_how_where 表，它指的是树分离域。测量（数据）表中的关键元素数量从 4 个减少到 2 个，并且省略了代理键（因为未使用） what_how_where 表*确实*有一个代理键。I 的含义可以表示为：如果此表中存在元组：参数 'what' 可以通过设备 'how' 在位置 'where' 上测量。

```
-- temp schema for scratch
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp;
SET search_path=tmp;

        -- tables for the three "key domain"s
CREATE TABLE device
        ( id SERIAL NOT NULL PRIMARY KEY
        , dname VARCHAR NOT NULL -- 'name' might be a reserve word
        , CONSTRAINT device_name UNIQUE (dname)
        );

CREATE TABLE parameter
        ( id SERIAL PRIMARY KEY -- must have ID as names are not unique
        , pname VARCHAR NOT NULL
        );

CREATE TABLE spot
        ( id SERIAL PRIMARY KEY
        , sname VARCHAR NOT NULL
        );
        -- One table to combine the three "key domain"s
CREATE TABLE what_how_where
        ( id SERIAL NOT NULL PRIMARY KEY
        , device_id INTEGER NOT NULL REFERENCES device(id)
        , spot_id INTEGER NOT NULL REFERENCES spot(id)
        , parameter_id INTEGER NOT NULL REFERENCES parameter(id)
        , CONSTRAINT what_natural UNIQUE (device_id,spot_id,parameter_id)
        );

CREATE TABLE measurement
        ( whw_id INTEGER NOT NULL REFERENCES what_how_where(id)
        , t_stamp TIMESTAMP NOT NULL
        , value VARCHAR(32) NOT NULL
        , CONSTRAINT measurement_natural PRIMARY KEY (t_stamp,whw_id)
        );

INSERT INTO device (dname)
SELECT 'dev_' || d::text
FROM generate_series(1,10) d;

INSERT INTO parameter (pname)
SELECT 'param_' || p::text
FROM generate_series(1,10) p;

INSERT INTO spot (sname)
SELECT 'spot_' || s::text
FROM generate_series(1,10) s;

INSERT INTO what_how_where (device_id,spot_id,parameter_id)
SELECT d.id,s.id,p.id
FROM device d
JOIN spot s ON(1=1)
JOIN parameter p ON(1=1)
        ;
ANALYSE what_how_where;

INSERT INTO measurement(whw_id, t_stamp, value)
SELECT w.id
        , g
        , random()::text
FROM what_how_where w
JOIN generate_series('2012-01-01'::date, '2012-09-23'::date, '1 day'::interval) g
        ON (1=1)
        ;

CREATE UNIQUE INDEX measurement_natural_reversed ON measurement(whw_id,t_stamp);
ANALYSE measurement;

        -- A view to *more or less* emulate the original behaviour
DROP VIEW measurement_data ;
CREATE VIEW measurement_data AS (
        SELECT d.dname AS dname
        , p.pname AS pname
        , w.spot_id AS spot_id
        , w.parameter_id AS parameter_id
        , m.t_stamp AS t_stamp
        , m.value AS value
        FROM measurement m
        JOIN what_how_where w ON m.whw_id = w.id
        JOIN device d ON w.device_id = d.id
        JOIN parameter p ON w.parameter_id = p.id
        );

EXPLAIN (ANALYZE ON, BUFFERS ON)
SELECT md.value
  FROM measurement_data md
 WHERE md.pname = 'param_8'
   AND md.t_stamp >= '2012-07-01'
   AND md.t_stamp < '2012-08-01'
        ; 
```

更新：有一个实际问题，只能通过某种聚类来解决：

*   给定 50 字节的估计行大小
*   并且只需要 5% (1/20) 的参数的查询*特异性*
*   这意味着大约 4 个“想要的”元组存在于 OS 磁盘页面上（+76 个不需要的元组）

如果没有集群，这意味着*所有*页面都必须被拉入+检查。索引在这里没有帮助（它们只有在*可以避免*页面被拉入时才有帮助，这*可能*是在第一个键列上进行（范围）搜索的情况）索引可能有助于扫描内存获取这些*之后*的页面。

因此，这意味着（一旦查询的占用空间大于可用缓冲区空间）您的查询实际上测量了您机器的 I/O 速度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T16:21:29.367

我看不出您如何将特定的测量值与设备、地点和时间的特定组合联系起来。我错过了一些明显的东西吗？

让我们以不同的方式来看待它。

```
CREATE TABLE measurement_data
(
  device_name character varying(16) NOT NULL,
  spot_id integer NOT NULL,
  parameter_id integer NOT NULL,
  t_stamp timestamp without time zone NOT NULL,
  value character varying(16) NOT NULL,
  CONSTRAINT measurement_data_pk PRIMARY KEY (device_name , spot_id , t_stamp , parameter_id ),
  CONSTRAINT measurement_data_fk_device FOREIGN KEY (device_name)
      REFERENCES device (name) MATCH FULL
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT measurement_data_fk_parameter FOREIGN KEY (parameter_id)
      REFERENCES parameter (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT measurement_data_fk_spot FOREIGN KEY (spot_id)
      REFERENCES spot (id) MATCH FULL
      ON UPDATE NO ACTION ON DELETE NO ACTION
); 
```

（此表的更好名称是“测量”。每个表都包含数据。）

我希望在这种桌子上有更好的表现。但我也希望任何返回许多行的查询都会与性能作斗争。（除非硬件和网络与任务相匹配。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T14:07:37.910

从数字看来，您正受到计时开销的影响。您可以通过使用[pg_test_timing](http://www.postgresql.org/docs/9.2/static/pgtesttiming.html)或添加`timing off`到您的说明参数来验证这一点（两者都在 PostgreSQL 版本 9.2 中引入）。我可以通过将时钟源设置为 HPET 而不是 TSC 来大致复制您的结果。

使用 HPET：

```
 Nested Loop  (cost=8097.73..72850.98 rows=432000 width=12) (actual time=29.188..905.765 rows=432000 loops=1)
   Buffers: shared hit=56216
   ->  Seq Scan on parameter  (cost=0.00..1.25 rows=1 width=4) (actual time=0.004..0.008 rows=1 loops=1)
         Filter: ((name)::text = 'param_01'::text)
         Rows Removed by Filter: 19
         Buffers: shared hit=1
   ->  Bitmap Heap Scan on measurement_data_value  (cost=8097.73..68529.73 rows=432000 width=16) (actual time=29.180..357.848 rows=432000 loops=1)
         Recheck Cond: (fk_parameter_id = parameter.id)
         Buffers: shared hit=56215
         ->  Bitmap Index Scan on measurement_data_value_idx_fk_parameter_id  (cost=0.00..7989.73 rows=432000 width=0) (actual time=21.710..21.710 rows=432000 loops=1)
               Index Cond: (fk_parameter_id = parameter.id)
               Buffers: shared hit=1183
 Total runtime: 1170.409 ms 
```

使用 HPET 和定时关闭：

```
 Nested Loop  (cost=8097.73..72850.98 rows=432000 width=12) (actual rows=432000 loops=1)
   Buffers: shared hit=56216
   ->  Seq Scan on parameter  (cost=0.00..1.25 rows=1 width=4) (actual rows=1 loops=1)
         Filter: ((name)::text = 'param_01'::text)
         Rows Removed by Filter: 19
         Buffers: shared hit=1
   ->  Bitmap Heap Scan on measurement_data_value  (cost=8097.73..68529.73 rows=432000 width=16) (actual rows=432000 loops=1)
         Recheck Cond: (fk_parameter_id = parameter.id)
         Buffers: shared hit=56215
         ->  Bitmap Index Scan on measurement_data_value_idx_fk_parameter_id  (cost=0.00..7989.73 rows=432000 width=0) (actual rows=432000 loops=1)
               Index Cond: (fk_parameter_id = parameter.id)
               Buffers: shared hit=1183
 Total runtime: 156.537 ms 
```

使用 TSC：

```
 Nested Loop  (cost=8097.73..72850.98 rows=432000 width=12) (actual time=29.090..156.233 rows=432000 loops=1)
   Buffers: shared hit=56216
   ->  Seq Scan on parameter  (cost=0.00..1.25 rows=1 width=4) (actual time=0.004..0.008 rows=1 loops=1)
         Filter: ((name)::text = 'param_01'::text)
         Rows Removed by Filter: 19
         Buffers: shared hit=1
   ->  Bitmap Heap Scan on measurement_data_value  (cost=8097.73..68529.73 rows=432000 width=16) (actual time=29.083..114.908 rows=432000 loops=1)
         Recheck Cond: (fk_parameter_id = parameter.id)
         Buffers: shared hit=56215
         ->  Bitmap Index Scan on measurement_data_value_idx_fk_parameter_id  (cost=0.00..7989.73 rows=432000 width=0) (actual time=21.667..21.667 rows=432000 loops=1)
               Index Cond: (fk_parameter_id = parameter.id)
               Buffers: shared hit=1183
 Total runtime: 168.869 ms 
```

所以你的缓慢似乎主要是由仪器开销引起的。但是，在 PostgreSQL 中选择大量行不会非常快。如果您需要对大量数据进行数字运算，那么结构化数据可能是一个好主意，以便您可以以更大的块获取它。（例如，如果您需要始终处理至少一天的数据，请将一天的所有测量值汇总到一个数组中）

一般来说，您必须了解您的工作负载将是什么来进行调优。一种情况下的胜利在另一种情况下可能是巨大的损失。我建议检查[pg_stat_statements](http://www.postgresql.org/docs/9.2/static/pgstatstatements.html)以确定您的瓶颈在哪里。

# php - Mysql菜单到xml

> ID：12544248
> 
> 赞同：0
> 
> 时间：2012-09-22T13:36:59.777
> 
> 标签：php, zend-framework

我有数据库。我使用 Zend Navigation 来生成菜单。但我希望我的菜单可以从面板动态编辑。我的菜单也有子菜单。

我的数据库：

```
id title        parent
1  First        0
2  sub_first    1
3\. sub_first_2  1 
4\. second       0
5\. sub_second   4 
```

我**想**以这种方式将其导出为 XML：

```
<first>

 <sub_first>
 </sub_first>

 <sub_first_2>
 </sub_first_2>

</first> 
```

**如何从 DB 生成看起来像我写的那个的 xml？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T19:38:27.397

我会用 a 封装迭代，`RecursiveIterator`这样你就可以轻松地创建你想要的任何输出。

```
class RecursiveMenuIterator implements RecursiveIterator {
    private $_data;
    private $_root;
    private $_position = 0;

    public function __construct(array $data, $root_id = 0) {
        $this->_data = $data;
        $this->_root = $root_id;
    }

    public function valid() {
        return isset($this->_data[$this->_root][$this->_position]);
    }

    public function hasChildren() {
        $subid = $this->_data[$this->_root][$this->_position]['id'];
        return isset($this->_data[$subid])
            && is_array($this->_data[$subid]);
    }

    public function next() {
        $this->_position++;
    }

    public function current() {
        return $this->_data[$this->_root][$this->_position];
    }

    public function getChildren() {
        return new self($this->_data,
            $this->_data[$this->_root][$this->_position]['id']);
    }

    public function rewind() {
        $this->_position = 0;
    }

    public function key() {
        return $this->_position;
    }

    public static function createFromSelect($select) {
        $menu_array = array();
        foreach($select->query()->fetchAll() as $row) {
            $menu_array[$row['parent_id']][] = $row;
        }

        return new self($menu_array);
    }
} 
```

您可以使用它来创建 XML：

```
function iterator_to_xml($iterator, $element) {
    foreach($iterator as $child) {
        $childElem = $element->addChild($child['title']);
        foreach($child as $key => $val) {
            $childElem->addAttribute($key, $val);
        }

        if($iterator->hasChildren()) {
            iterator_to_xml($iterator->getChildren(), $childElem);
        }
    }
} 
```

或`Zend_Navigation`：

```
function iterator_to_navigation($iterator, $container) {
    foreach($iterator as $child) {
        $child['label'] = $child['title'];
        $page = new Zend_Navigation_Page_Uri($child);
        $container->addPage($page);

        if($iterator->hasChildren()) {
            iterator_to_navigation($iterator->getChildren(), $page);
        }
    }
} 
```

用法：

```
$select = $db->select()
    ->from("tblMenu");

$menuIterator = RecursiveMenuIterator::createFromSelect($select);

$navi = new Zend_Navigation();
iterator_to_navigation($menuIterator, $navi);

$xml = new SimpleXMLElement("<menu/>");

iterator_to_xml($menuIterator, $xml); 
```

# javascript - 使用 Node 作为 *client* 的长轮询流数据

> ID：12544249
> 
> 赞同：2
> 
> 时间：2012-09-22T13:37:30.807
> 
> 标签：javascript, node.js

长期倾听者，第一次来电者。

我需要使用 Node 作为*客户端*来连接到使用长轮询的实时数据流，并在接收到数据时对每个项目进行处理。

我发现了很多关于使用 Node 作为长轮询服务器的信息，但不是作为客户端。

我知道如何使用“请求”模块来加载 URL，但我的问题是我所知道的唯一回调是“oncomplete”回调，它仅在连接关闭后触发。它不允许我在连接保持打开状态时访问实时接收的数据。我只有在连接终止时才能使用它。

Node 有没有办法打开到远程服务器的 HTTP 连接，然后在收到数据时触发事件？

或者我想另一个问题是……有没有办法在 HTTP 连接进行时访问所有数据进入的任何缓冲区？

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T13:49:21.977

不要使用请求模块。如果你使用 node 内置的东西，那就很简单了。

[http://nodejs.org/api/http.html#http_event_data](http://nodejs.org/api/http.html#http_event_data)

```
response.on('data', function (chunk) {
    // chunk is the data just received
}) 
```

请求模块本身确实有类似的方法，但我不知道它是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T13:49:39.770

[http.request()](http://nodejs.org/api/http.html#http_http_request_options_callback)中的示例是否有效？

```
var req = http.request(options, function(res) {
  console.log('STATUS: ' + res.statusCode);
  console.log('HEADERS: ' + JSON.stringify(res.headers));
  res.setEncoding('utf8');
  res.on('data', function (chunk) {
    console.log('BODY: ' + chunk);
  });
});
req.end(); 
```

# maven - 使用 Maven 从开源项目生成 JAR，供对 Maven 一无所知的人使用

> ID：12544254
> 
> 赞同：0
> 
> 时间：2012-09-22T13:38:20.227
> 
> 标签：maven, jar, release

我正在开发一个 Android 项目，我想将一些开源代码集成到这个项目中，特别是：[https](https://github.com/tenaciousRas/android-plist-parser) ://github.com/tenaciousRas/android-plist-parser 。我希望能够像图书馆一样对待作者的代码，并且只需要一个`.JAR`我可以调用的代码。直接来自作者的readme，部署说明如下：

> ## 部署
> 
> 该项目的主要目标是为您的应用程序提供可消耗的源代码。签出源代码并将其添加到您的 Android 项目中，或者考虑使用 maven 构建生成 JAR 以在您的应用程序中使用（为此，请使用发布配置文件或注释掉测试模块）。

好的，所以听起来我想使用 Maven 构建来使用发布配置文件生成 JAR。问题是，我以前从未使用过 Maven，所以我实际上并不知道这意味着什么。我可以花很长时间阅读 Maven 文档并掌握另一个构建系统，但 Maven 真的只是我真正想要实现的目标。

*我可以采取任何快速步骤来实现我想要实现的目标，而无需在此过程中成为 Maven 专家（或业余爱好者）？* 我已经开始阅读有关 Maven 的文章，但看起来这不会是一个简单的 5 分钟转移。我完全愿意学习新的构建/管理工具，而不是我集成到项目中的每个小型库都需要一个新工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T04:39:00.517

该项目未设置为易于重用。它使用 Maven 构建一个进行解析的 Android 应用程序。然而，为了易于重用，它必须将任何解析代码作为单独的 jar 提供，甚至在 apklib 中提供更好。

您可以直接获取源代码并将其复制到您的应用程序中，也可以重组上游项目以构建 apklib。如果作者想这样做，请将它们发送到 Maven Android 开发者邮件列表，我可以在那里帮助他解决问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-22T17:56:07.447

如果项目已经包含一个 pom.xml 文件，只需 cd 到该目录并运行`mvn package`. 这将在目标文件夹中生成一个 jar，然后您可以将其导入到您的项目中

# android - 如何从堆栈中删除特定活动？

> ID：12544257
> 
> 赞同：1
> 
> 时间：2012-09-22T13:38:38.717
> 
> 标签：android, android-activity

假设我有一堆活动：

```
A -> B -> C -> D 
```

活动`D`有一个`Save`按钮。单击该按钮后，我想取回堆栈中的两个活动（`C`并且`D`是某种*向导*的一部分，因此我想将它们都删除）：

```
A -> B 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T13:42:25.773

使用标志从 D 启动活动 B `FLAG_ACTIVITY_CLEAR_TOP` ..

```
Intent a = new Intent(this, B.class);
a.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(a); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T13:42:36.600

尝试在 onPause() 中完成它们。我认为他们会从堆栈中删除活动，然后单击按钮调用您要开始使用意图的活动

# android - Robolectric 1.2：“警告：无法找到 Android SDK 的路径”

> ID：12544262
> 
> 赞同：2
> 
> 时间：2012-09-22T13:39:22.100
> 
> 标签：android, unit-testing, robolectric

我用了

> Robolectric 1.1 jar-with-dependencies

在我的项目中并成功使其工作，但是当我将 jar 更改为

> 1.2-SNAPSHOT jar-with-dependencies

我收到以下警告：

> 警告：无法找到 Android SDK 的路径

1.  两个罐子都是从[Sonatype](https://oss.sonatype.org/index.html#nexus-search;quick~robolectric)下载的（我没有使用 maven）。
2.  我尝试了[这个](https://stackoverflow.com/questions/9352903/robolectric-warning-unable-to-find-path-to-android-sdk)问题的解决方案，但仍然收到警告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:20:26.717

在我遵循本[教程](http://pivotal.github.com/robolectric/eclipse-quick-start.html)之后，我遇到了同样的问题。这就是我在我的mac上解决它的方法：

1-将Android sdk dir添加到bash_profile，首先打开文件：

```
sudo vim ~/.bash_profile 
```

然后添加以下行：（请记住将 YOUR_ANDROID_SDK_PATH_HERE' 替换为 android SDK 文件路径（例如 /Users/xxx/development/android-sdk-mac_x86））

```
export ANDROID_HOME=YOUR_ANDROID_SDK_PATH_HERE 
```

2- 在你的 Android 项目的根目录中创建一个名为 local.properties 的文件，并添加以下行：（记住将 YOUR_ANDROID_SDK_PATH_HERE 替换为 android SDK 文件路径（例如 /Users/xxx/development/android-sdk-mac_x86 ))

```
 sdk.dir=YOUR_ANDROID_SDK_PATH_HERE 
```

# javascript - jQuery .load() 错误状态？

> ID：12544264
> 
> 赞同：1
> 
> 时间：2012-09-22T13:39:36.857
> 
> 标签：javascript, jquery

我似乎无法让这个解决方案为我工作。

[如何在 jQuery 的 load() 方法中捕获错误](https://stackoverflow.com/questions/753300/how-to-catch-error-in-jquerys-load-method)

这是我正在尝试的代码。

```
$("#a").load("load.html", function(responseText, textStatus, XMLHttpRequest) {
        if (textStatus == "error") { alert("fail"); }
        else { alert("success"); }
}); 
```

当 load.html 存在时，它工作正常，但当它不存在时，什么都没有发生。这是有道理的，因为如果失败，它不应该进入回调。

有人可以指出我哪里出错了吗？当 URL 不存在时，我试图让它抛出一个错误。

如果这会影响任何事情，我正在尝试使用 jQuery 1.3.2。

**更新** 问题似乎是因为我在本地而不是在服务器上工作。在线上传了我的文件，它似乎工作正常，jQuery 的某些部分是否需要服务器才能运行？

**更新** 是否进行了更多测试并使用带有错误回调的 .load() 无法离线工作，但 .ajax() 可以。对为什么感到困惑，但我们走了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:43:42.990

试试这个

```
$.ajax({

    url: 'load.html',
    dataType: 'html',
    success: function(data) {
         //handle data object containing the html
         $('#a').html(data);
    },
    error: function(xhr, error){
        //generic error callback, you'll end up here when your file doesnt exist
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-04T02:52:27.577

你可以在这里试试：

```
<div id="div1"><h2>Let jQuery AJAX Change This Text</h2></div>
<button>Get External Content</button>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

<script>
    $(document).ready(function(){
        $("button").click(function(){
            $("#div1").load("demo_tes.txt", function(responseTxt, statusTxt, xhr){
                if(statusTxt === "success")
                    alert("External content loaded successfully!");
                if(statusTxt === "error")
                    alert("Error: " + xhr.status + ": " + xhr.statusText);
            });
        });
    });
</script>
```

# git - github/egit/git：将 master 与较早的提交进行比较，并将选定的更改合并到一个新的分支中。如何？

> ID：12544265
> 
> 赞同：1
> 
> 时间：2012-09-22T13:39:43.977
> 
> 标签：git, github, merge, egit, git-merge

期望的

我是唯一的开发人员（也是初学者）。我目前只有一个主分支。在其中，我有一些具有不同实现类型的不同版本的提交。所以，我想把它们变成新的分支。但是我在主分支中也有一些功能，我想合并到这些新分支中。这些功能是次要的，我希望准确地查看和选择更改。

尝试过

在 Egit 中，如果我创建一个新分支，则主文件将在本地删除。所以，我不明白如何比较版本。我可以在本地开设多个分支机构吗？这是可取的吗？如何？

如果我要求将我的 master 合并到我的新分支中，Egit 会快进显示没有冲突或比较，这不是我想要的。

要求

什么是实现我想要的结果的好过程？如有必要，我很乐意将 Egit 与 GitBash 混合（假设它们可以毫无问题地混合）。

背景

很多类似的讨论（例如[这里](https://stackoverflow.com/questions/4556467/git-pull-or-git-merge-between-master-and-development-branches)和[这里](https://stackoverflow.com/questions/5916329/cleanup-git-master-branch-and-move-some-commit-to-new-branch)）或相关教程（例如[这里](http://eclipsesource.com/blogs/2011/05/30/merging-branches-in-eclipse-git-egit/)）但没有精确匹配。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T18:45:48.560

你需要的是一个叫做**cherry-picking**的设施。

如果你安装了 Git：

1.  创建一个分支
2.  使用该`gitk --all`命令显示有关您拥有的所有分支的提交的漂亮 GUI。
3.  您可以轻松选择所需的提交，只需右键单击它并选择*“Cherry-pick this commit”*。

就这样。

# ruby-on-rails - Rails 3：延迟加载如何在生产中真正发挥作用

> ID：12544268
> 
> 赞同：2
> 
> 时间：2012-09-22T13:40:13.440
> 
> 标签：ruby-on-rails, ruby-on-rails-3, lazy-loading

我的应用程序上有以下用户模型（简化）

> 类用户 < ActiveRecord::Base
> 
> ```
> attr_accessible :username, :email, :password, :company_id, :role_id  
> belongs_to :company  
> belongs_to :role 
> ```
> 
> 结尾

我的问题是：我的用户是在他的会话期间还是仅在执行 user.company 时携带所有 Company 模型属性？

我相信公司方法在会话期间作为关系存在，但我不确定。

如果我的用户确实携带着他的 Company 对象，有没有办法防止这种情况发生并仅在实际调用时才进行 que 数据库查询？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T14:15:47.953

答案是它取决于您如何实例化您的用户对象和/或您是否已经访问过关联。你可以使用#loaded？做一些自省。以下是一些示例以及根据您提供的代码我期望的结果：

```
user = User.last
user.company.loaded?
=> false
user.company   # loads the association
user.company.loaded?
=> true

user = User.includes(:company).last # eager loads the association
user.company.loaded?
=> true 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T16:48:38.380

延迟加载（默认情况下）意味着仅在需要时才调用关联方法。

所以你的用户对象有`company_id`但没有`company`对象。每当它找到 user.company 时，它就会执行数据库查询。

但是，您可以`eager load`使用`includes`方法。

当您加载多个时，急切加载通常很有帮助`users`，并且`view`您将通过迭代调用 user.company `users`，这将为 user.company 的每次调用运行数据库查询（即每次对同一个表进行数据库查询）。为了避免这种急切的加载是有帮助的，因此它会加载所有`users`它获取的所有公司数据。

# ruby - Object#method 和动态响应者

> ID：12544270
> 
> 赞同：5
> 
> 时间：2012-09-22T13:40:45.560
> 
> 标签：ruby, method-missing

我有一个名为`User`. 它响应 , 等方法`find_by_id`。`find_by_auth_token`但是，这些不是通过`def`or定义的方法`define_method`。相反，它们是通过 处理的动态方法`method_missing`。

我想通过 获得对这些方法之一的引用[`Object#method`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-method)，例如：

```
User.method(:find_by_auth_token) 
```

不过看起来这行不通。我想出的最佳解决方案是：

```
proc { |token| User.find_by_auth_token(token) } 
```

有没有其他方法可以使用这样的包装方法？我真的不能`Object#method`用于动态方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T14:59:35.903

*最简单的答案是“否”——通常*保证`Object#method(:foo)`返回实例的唯一方法`Method`是定义`foo`在对象上命名的方法。

更复杂的答案是，您可以通过在给定时覆盖它返回的 st来强制`Object#method(:foo)`返回一个实例。例如：`Method``Object#respond_to_missing?``true``:foo`

```
class User
  def respond_to_missing?(method_name, include_private = false)
    method_name.to_s.start_with?('find_by_')
  end
end

m = User.new.method(:find_by_hackish_means)
# => #<Method: User#find_by_hackish_means> 
```

（由您确保实际定义了该方法）：

```
m.call
# => NoMethodError: undefined method `find_by_hackish_means' for #<User:0x123> 
```

# html - Firefox 15：div 内容溢出到边框图像

> ID：12544271
> 
> 赞同：2
> 
> 时间：2012-09-22T13:40:52.727
> 
> 标签：html, css, firefox

首先，我知道 Firefox 15 中的 -moz-border-image 没有前缀，如下所述：http: [//dbaron.org/log/20120612-border-image](http://dbaron.org/log/20120612-border-image)。在这方面，我修复了我的 CSS 以与 Firefox 15 一起使用。我的问题是不同的（尽管可能是切线的）。

简而言之，在 Firefox 15 中，带有边框图像的 div 的内容现在与所述边框图像重叠，就好像边框是 div 内部的一部分一样。其他浏览器不显示该问题并按预期运行，这使我无法简单地使用填充来补偿边框（其他浏览器将有过多的填充）。

我该如何解决这个问题？谢谢！

查看[示例](http://games4e.com/tests/borderimage.php)页面

我的代码：

```
<style type="text/css">

    body { background: yellow; }

    .borderbox {
    -moz-border-image: url(border_sprite.png) 31 25 25 20 / 31px 25px 25px 20px repeat stretch;
    -webkit-border-image: url(border_sprite.png) 31 25 25 20 fill repeat stretch;
    -o-border-image: url(border_sprite.png) 31 25 25 20 repeat stretch;
    border-image: url(border_sprite.png) 31 25 25 20 fill repeat stretch;
    border-width: 31px 25px 25px 20px;
    border-image-width: 31px 25px 25px 20px;
    padding: 0 10px 20px 0;
    text-align: right;
    overflow: auto;
    width: 400px;
    height: 400px;
    color: purple;
    font-size: 20px;
 }

</style>

<!DOCTYPE html>
<head></head>
<body>

<div class="borderbox">
    the content should be bound to the inner white box. Why does it also cover the blue border in Firefox 15?
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T21:09:38.957

Finally found the answer - so simple (yet seemingly arbitrary). Add the following property to the div's style:

```
border-style: solid; 
```

# mpi - MPI_Type_vector 在不同的进程中有不同的维度吗？

> ID：12544272
> 
> 赞同：1
> 
> 时间：2012-09-22T13:41:04.130
> 
> 标签：mpi

我想用来将`MPI_Type_vector`矩阵的子域分散到每个进程。例如，矩阵为 5x5，由 2x2 个子域分解。所以子域的维度是：

```
 _____________________
 |         |         |
 |    0    |    1    |
 |  (2,2)  |  (3,2)  |
 |         |         |
 |_________|_________|   5
 |         |         |
 |    2    |    3    |
 |  (2,3)  |  (3,3)  |
 |         |         |
 |_________|_________|

           5 
```

我`MPI_Type_vector`在每个具有自己维度的流程上定义了一个。我预计进程 0 和 1 上定义的向量的大小是不同的。但是它们的手柄是一样的。看起来 MPI 只使用了这些定义的向量之一。

谢谢！

李

PS：我已经通过手动打包和解包数据实现了这个功能，但是我想使用一些更方便的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:58:07.957

MPI 句柄对于注册它们的进程是**本地**的，并且只应被视为不透明类型 - 您永远不应该根据句柄的实际值来决定任何事情，您应该只使用 MPI 的比较函数比较句柄后面的对象提供（例如`MPI_Comm_compare`）。例如，在 Open MPI 中，`MPI_Datatype`是指向`ompi_datatype_t`C 绑定的结构的指针和`INTEGER`用于 Fortran 绑定的指针表中的索引。

如果您的子域大小相同（例如全部都是`2x2`），那么使用调整大小的 MPI 数据类型的一个[不错的 hack](https://stackoverflow.com/a/7587133/1374437)将允许您使用`MPI_Scatterv`/`MPI_Gatherv`来分散/收集它们。因为您的子域具有不同的大小，如果您想使用单个集体 MPI 调用来分散/收集它们，那么`MPI_Alltoallw`您需要仔细提供参数。您还可以使用它来实现聚集操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T06:04:37.023

`MPI_Datatype`只是一个您可以传递的句柄，它不直接包含有关您制作的类型的任何信息。查看该句柄的值也不会告诉您类型。我见过的大多数实现都使用`int`s 作为这个句柄，对于每个用户定义的数据类型递增 1。因此，如果您的两个向量数据类型句柄在不同的内核上具有相同的值，我并不感到惊讶，如果它们都是在该内核上声明的第一个数据类型。

回到关于域分解的主要问题，如果内核之间使用不同声明的向量类型进行任何通信，那将失败——发送内核和接收内核将需要处理相同长度的向量。因此，发送核心需要使用与接收核心期望接收的数据量相对应的类型。

在干净的域分解方面，我建议使用这些函数（[这里](http://www.nccs.nasa.gov/tutorials/mpi_tutorial2/page20.html)`MPI_Cart`有一个 Web 1.0 教程）。

# php - 将函数值作为 Mysql 结果返回

> ID：12544277
> 
> 赞同：-1
> 
> 时间：2012-09-22T13:41:26.813
> 
> 标签：php, sql

我有个问题。我想将函数的值作为 mysql 结果返回

```
function Gets_comments_array_from_db($type, $thread_comment_id) {
# Sets variable for Query
    $The_TYPE = $type;
    $Thread = mysql_real_escape_string(intval($thread_comment_id));

# return array query for Further working
    return mysql_query("SELECT * FROM `site_comments` WHERE `type`='".$The_TYPE."' AND `thread_comment_id`='".$Thread."'"); 
```

}

和

```
while($comment = mysql_fetch_array(Gets_comments_array_from_db('news', $id)){
                                                    echo '11';
                                                } 
```

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T18:58:25.010

正如**dbf**所说，您在 while 循环的每次迭代中都执行查询。您需要像这样更改代码：

```
$rs = Gets_comments_array_from_db('news', $id);

while($comment = mysql_fetch_assoc($rs)) {
     echo '11';
} 
```

现在您将获得一次结果，然后在 while 循环中遍历它们。同样在循环内，您将能够使用列名作为数组键来处理值。

```
while($comment = mysql_fetch_assoc($rs)) {
     $field1 = $comment['field1'];
     $field2 = $comment['field2'];
     $field3 = $comment['field3'];
} 
```

如果你像这样构造你的 mysql 查询

```
SELECT Field1, Field2, Field3, Field4 FROM {table} WHERE {where_clause} 
```

您将能够像这样在 while 循环中设置变量

```
$rs = Gets_comments_array_from_db('news', $id);

while(list($field1, $filed2, $filed3, $field4) = myslq_fetch_row($rs)) {
    // use variables here
} 
```

# android - 是否可以专门为最新版本的 Android（ICS 和 JB）做布局？

> ID：12544280
> 
> 赞同：0
> 
> 时间：2012-09-22T13:42:24.647
> 
> 标签：android, android-layout, android-emulator, screen, android-4.0-ice-cream-sandwich

使用最新版本的 android，已将移动设备添加为平板电脑的较低栏。这使得我的应用程序在这些特定版本中可能无法正确显示，因为它被设计为在没有栏的情况下可见。

所以我的问题是：有没有办法让这些版本独有的布局版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T14:01:52.663

要么像“西蒙”所写的那样以编程方式进行，要么使用正确的资源文件夹（使用限定符），例如：

res/layout-v11/ 将用于蜂窝及以上。

res/layout/ 将用于其余部分。

欲了解更多信息，请阅读此处：

[http://developer.android.com/guide/topics/resources/providing-resources.html](http://developer.android.com/guide/topics/resources/providing-resources.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T13:57:13.697

您可以对任何您喜欢的布局进行充气，并将其设置为 Activity 内容。

```
if (Build.VERSION.SDK_INT < Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
     this.setContentView(R.layout.layout_pre_ics);
} else {
     this.setContentView(R.layout.layout_post_froyo);
} 
```

[编辑] Android 开发者的解决方案比我的好。

# .htaccess - htaccess 和 codeigniter，使文件夹可访问

> ID：12544285
> 
> 赞同：0
> 
> 时间：2012-09-22T13:43:04.613
> 
> 标签：.htaccess, codeigniter

我的 Codegniter 应用程序结构是

```
- root
---- application 
---- system
---- includes
---- .htaccess
---- index.php 
```

我会让所有人都可以访问“包含”文件夹，实际上我的文件夹 /includes 是不可访问的。只有我的 index.php 是可访问的。我只想让所有子目录都可以访问“包含”目录。

这是我的 htaccess：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#When your application folder isn't in the system folder
#This snippet prevents user access to the application folder
#Submitted by: Fabdrol
#Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L]

</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
# Submitted by: ElliotHaughin

ErrorDocument 404 /index.php

</IfModule> 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T14:58:01.817

插入这一行如下

```
#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(includes)
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

# android - 水平列表视图标题文本动画

> ID：12544291
> 
> 赞同：0
> 
> 时间：2012-09-22T13:44:03.737
> 
> 标签：android, listview, scrollview

有什么方法可以创建带有标题的水平列表视图。我认为可以通过 Horizo​​ntalScrollView 组件创建水平列表视图。如我提供的任务应用程序 (http://i.stack.imgur.com/qWZPh.jpg) 中所示，杂货清单和工作标题都可以在杂货清单中查看。当我从 Grocery List 转到 Work 时，标题也应该无缝移动。如何为这样的标题设置动画（以便在我们滚动列表时放置它们）？

谢谢

这是免费任务应用程序的链接：http: [//i.stack.imgur.com/qWZPh.jpg](http://i.stack.imgur.com/qWZPh.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:58:47.640

`Tasks`应用程序（您发布的屏幕截图，实际上我每天都在使用它）使用 ViewPager 和 PagerTitleStrip。

如果您使用 Eclipse，则有一个默认选项可以创建此类活动。

![在此处输入图像描述](../Images/ae905d5e808ec49c0276f32fe9a30948.png)

当我选择`Swipe Views + Title Strip`.

```
<android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity">

<!--
This title strip will display the currently visible page title, as well as the page
titles for adjacent pages.
-->
<android.support.v4.view.PagerTitleStrip android:id="@+id/pager_title_strip"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="top"
    android:background="#33b5e5"
    android:textColor="#fff"
    android:paddingTop="4dp"
    android:paddingBottom="4dp" /> 
```

也尝试检查那些：

[http://developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

[http://developer.android.com/reference/android/support/v4/view/PagerTitleStrip.html](http://developer.android.com/reference/android/support/v4/view/PagerTitleStrip.html)

**添加**

自动生成`MainActivity.java`

```
package com.example.test;

import android.app.ActionBar;
import android.app.FragmentTransaction;
import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.NavUtils;
import android.support.v4.view.ViewPager;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

public class MainActivity extends FragmentActivity {

    /**
     * The {@link android.support.v4.view.PagerAdapter} that will provide fragments for each of the
     * sections. We use a {@link android.support.v4.app.FragmentPagerAdapter} derivative, which will
     * keep every loaded fragment in memory. If this becomes too memory intensive, it may be best
     * to switch to a {@link android.support.v4.app.FragmentStatePagerAdapter}.
     */
    SectionsPagerAdapter mSectionsPagerAdapter;

    /**
     * The {@link ViewPager} that will host the section contents.
     */
    ViewPager mViewPager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // Create the adapter that will return a fragment for each of the three primary sections
        // of the app.
        mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

        // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }        

    /**
     * A {@link FragmentPagerAdapter} that returns a fragment corresponding to one of the primary
     * sections of the app.
     */
    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int i) {
            Fragment fragment = new DummySectionFragment();
            Bundle args = new Bundle();
            args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, i + 1);
            fragment.setArguments(args);
            return fragment;
        }

        @Override
        public int getCount() {
            return 3;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            switch (position) {
                case 0: return getString(R.string.title_section1).toUpperCase();
                case 1: return getString(R.string.title_section2).toUpperCase();
                case 2: return getString(R.string.title_section3).toUpperCase();
            }
            return null;
        }
    }

    /**
     * A dummy fragment representing a section of the app, but that simply displays dummy text.
     */
    public static class DummySectionFragment extends Fragment {
        public DummySectionFragment() {
        }

        public static final String ARG_SECTION_NUMBER = "section_number";

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            TextView textView = new TextView(getActivity());
            textView.setGravity(Gravity.CENTER);
            Bundle args = getArguments();
            textView.setText(Integer.toString(args.getInt(ARG_SECTION_NUMBER)));
            return textView;
        }
    }
} 
```

# javascript - 带有空格的 JQuery / Javascript 问题

> ID：12544293
> 
> 赞同：3
> 
> 时间：2012-09-22T13:44:21.827
> 
> 标签：javascript, jquery

我在使用 javascript 时遇到问题，不允许我使用空格，因此我不得不压缩所有代码，使其难以阅读。

```
Sample A: - Working:

output += '<li><a href="#">test here</a><li>';

Sample B: - Not Working:

output += '<li>
           <a href="#">test here</a>
           </li>'; 
```

有没有一种方法可以让我得到上述工作而不必先将它们全部压缩在一起？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T13:46:46.077

你可以做这样的事情。我发现它更容易阅读，但更难维护。

```
output += '<li>' + 
           '<a href="#">test here</a>' + 
           '</li>'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T13:46:16.300

您可能想检查 javascript 中的多行字符串。像这样： [http ://www.electrictoolbox.com/javascript-multi-line-strings/](http://www.electrictoolbox.com/javascript-multi-line-strings/)

对于一些代码示例，请尝试：

```
 output += '<li>\
               <a href="#">test here</a>\
               </li>' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T13:48:01.913

解决方案是退格：

```
output += '<li>\
           <a href="#">test here</a>\
           </li>'; 
```

**编辑**
如果您确实想保留换行符，请`\n`放在`\`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-22T13:52:25.140

不要在 JS 中编写标记，除非它只是几个标记。

考虑在 jQuery 中创建元素：

```
var output = $('<li>').append(
                $('<a>').attr('href', '#dalink')
            ); 
```

或者更好，使用[模板](https://stackoverflow.com/questions/7180582/templates-in-js)，即带有占位符的标记模板和用于填充列表的循环之类的小表示逻辑。

# python - Python 字符串和列表

> ID：12544302
> 
> 赞同：3
> 
> 时间：2012-09-22T13:45:35.283
> 
> 标签：python, string, list

几天来一直坐在这个小问题上，我不知道是我错了还是错过了一些东西。

**目标：**从句子中的每个单词 - 找到第一个元音，从单词中删除该元音后面的字母并将剩余的字母乘以 3。

**示例：**如果我有句子：“Hello World”，想要的输出应该是“HeHeHe WoWoWo”。

**我的代码：**

```
def bebis(inrad):
    utrad = ""
    inrad = inrad.split()
    for tkn in inrad:
        for tkn1 in tkn: #Eftersom tkn ar ordlista nu.
            if tkn1 in vokaler:
                count = len(tkn1)
                utrad += tkn1
            elif tkn1 in konsonanter:
                utrad += tkn1
    return utrad[:count+1]*3

print("Bebisspraket:",bebis(inrad)) 
```

**我的想法：**我使用 split() 将句子拆分为单词列表。然后我使用两个 for 循环，一个应该遍历每个单词，另一个应该遍历每个单词中的每个字母。如果它找到一个元音，计算它在哪里，然后将字母返回到单词的第一个元音。

**我的问题：**输出只给了我一个句子中的第一个单词并从那里中断。所以“Hello World”产生“HeHeHe”让我非常沮丧。为什么它没有通过其余的句子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T14:06:50.243

像这样的东西怎么样：

```
import re

def bebis_word(word):
    first_vowel = re.search("[aeiou]", word, re.IGNORECASE)

    if first_vowel:
        return word[0:first_vowel.start() + 1] * 3
    else:
        return ''    

def bebis(sentence):
    words = [bebis_word(word) for word in sentence.split()]

    return " ".join(words)

print bebis("Hello World") 
```

输出：

> 嘿嘿嘿哇哇哇

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:48:27.807

作为正则表达式方法的替代方法，我做了：

```
def find_vowel_index(word):
    vows = set(["a", "e", "i", "o", "u"])
    for i, letter in enumerate(word):
            if letter in vows:
                    return i
    return -1 

def bebis(s, repeat=3):
    return " ".join([word[0:find_vowel_index(word)+1] * repeat for word in s.split() if find_vowel_index(word) >= 0]) 
```

想法：

*   我为元音做了一个集合，因为集合上的“in”测试是一个恒定时间操作`(O(1))`
*   为 bebis 添加了一个可选的重复参数，因此如果您希望单词重复 3 次以外的次数，很容易做到这一点。
*   我不喜欢对`find_vowel_index`in的多次调用`bebis`，它的结构可以更好。
*   对正则表达式版本的权衡是，随着单词变长（并且单词中的元音“更深”），它会变慢。OTOH，我猜用简短的话来说，正则表达式的开销可能有点高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T13:59:54.813

您的方法似乎是正确的（将句子分成单词并迭代单词以找到第一个元音）。

问题是你的`tkn1`变量是一个字母，所以`len(tkn1)`总是1，`so count=1`

这是一个潜在的解决方案：

```
def bebis(inrad):
    utrad = ""
    inrad = inrad.split()
    # Loop on words 
    for tkn in inrad:
        # Loop on letters in the word
        for (i,tkn1) in enumerate(tkn): #Eftersom tkn ar ordlista nu.
            if tkn1 in vokaler:
                utrad += tkn[:i+1] * 3
                break
        utrad += " "
    return utrad 
```

在这里，我们使用`enumerate`将给出元组列表的函数`(index,letter)`。一旦我们测试了当前字母是元音，我们就取单词 ( `tkn[:i+1]`) 的第一个字母，重复它们 3 次，将它们存入`utrad`并移动到下一个单词（使用`break`离开当前循环的语句）。我们只需要在单词之间添加一个额外的空格。

# c# - 大纲在 VS2010 中存储在哪里？

> ID：12544305
> 
> 赞同：0
> 
> 时间：2012-09-22T13:45:41.383
> 
> 标签：c#, visual-studio-2010, visual-studio

我已经开始在 C# 中使用大纲，如下所示：

```
Edit > Outlining > Hide Selection 
```

每个隐藏区域的轮廓和状态是否存储在某个地方？如果是这样，如果我升级 Visual Studion 或将我的代码移动到另一个 VS2010 项目中，所有这些信息会丢失吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:19:39.600

在 VS2010 和 VS2012 中，大纲存储在解决方案的`.suo`文件中。在我的脑海中，一些东西存储在`.suo`文件中：

*   VS中打开的文件
*   显示文件的位置（选项卡组、选项卡顺序）
*   概要信息

该`.suo`文件不存储任何影响构建解决方案的内容。它可以被删除而不会产生不良影响（除了丢失显示信息）。通常，此文件不包含在源代码管理中。TFS 不会自动添加此文件。我总是确保 *.suo 在我的 .hgingore 文件（Mercurial）中。

回答所提出的具体问题： 是的，如果您将代码移动到另一个解决方案中，则此信息会丢失（即不会自动移动）。升级 Visual Studio 也会丢失此信息。不过，这真的没什么好担心的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:17:34.780

它存储在`*.suo`or`*.csproj.user`文件中。这些是二进制文件，在每个开发人员（或者更确切地说，每台机器）的基础上存储每个解决方案和每个项目的元数据，这就是默认情况下它们被排除在源代码控制之外的原因。它们包括 VS 窗口布局和折叠/展开区域的状态等设置。

因为`*.suo`文件绑定到相应的`*.sln`文件，这意味着它们不会在 VS 版本之间共享。我认为VS可以升级一些SUO文件，但我不知道`csproj.user`文件（因为`csproj`文件在VS版本之间是可移植的）。

# php - Slim 框架在 PHPFog 中找不到包含文件

> ID：12544307
> 
> 赞同：1
> 
> 时间：2012-09-22T13:45:52.180
> 
> 标签：php, slim, phpfog

我有这样的结构：

```
---index.php (Slim index file)
---view
   ------css
   ------js
   ------img
   ------header.php
   ------footer.php
   ------index.php 
   ------student
         -----index.php
         -----enrolment.php
   -----course
        ------index.php
        ------exam.php 
```

学生和课程文件夹中的所有视图文件都使用 header.php 和 footer.php。我可以将它们很好地包含在我的本地机器中，只需使用： include "/view/header.php"; 并包括“/view/footer.php”；

但是当部署在 PHPFog 云上时它似乎不起作用。这是出现的错误：

```
Code: 2
Message: include(/view/header.php): failed to open stream: No such file or directory
File: /var/fog/apps/app58082/calert.phpfogapp.com/view/student/index.php 
```

有什么想法该怎么做？

# python - 如何自定义排序 Django 查询集

> ID：12544310
> 
> 赞同：0
> 
> 时间：2012-09-22T13:46:21.777
> 
> 标签：python, django, django-queryset

给定一个带有标题字符串的数据模型，比如说：

```
class DVD(models.Model):
    title = models.CharField(max_length=100)
class DVDAdmin(admin.ModelAdmin):
    ordering = ('title',)

sample_titles = {"A Fish Called Wanda", "The Good, the Bad, and the Unsorted",
                 "A River Runs Upstream", "The Incredibles",} 
```

我想生成一个按标题排序的查询集，但将标题视为减去列表中的任何前导词，例如（“a”，“an”，“the”，）。因此，“The Incredibles”将排在“A River Runs Upstream”等之前。我不想只*截断*数据库或结果视图中的数据。我想为查询集创建一个内部自定义排序。

一种似乎可行的方法是创建一个自定义更改列表，然后在那里*对*查询集进行排序，如下所示：

```
from django.contrib.admin.views.main import Changelist
class title_sortlist(Changelist):
    def apply_special_ordering(self, queryset):
        qs_desc = self.models.objects.all().order_by('-title')
        return qs_desc
    def get_query_set(self, request, *args, **kwargs):
        queryset = super(title_sortlist, self).get_query_set(request)
        queryset = self.apply_special_ordering(queryset)
        return queryset

class DVDAdmin(admin.ModelAdmin):
    ordering = ('title',)
    def get_changelist(self, request, **kwargs):
        return title_sortlist 
```

这适用于标准排序 - 降序排序会覆盖模型的升序排序。但是，我还没有弄清楚如何获取查询集并对其进行自定义排序。

另一种可能性可能是向模型*动态*添加一个字段，将其命名为*cut_title*，进行适当编辑，然后按该字段排序。但是，我刚刚开始阅读有关动态模型更改的内容，并且不清楚如何去做（更不用说，它似乎有点不稳定，比常规的猴子修补更严重）。

第三个选项，我读到 Django 有一个`extra`查询集选项，您可以在其中添加其他 SQL，包括新字段。不过，我不知道如何添加一个代表已编辑标题的新 SQL 字段 - Django SQL 可以调用 Python 函数吗？

那么什么方法（如果有的话）最适合按（修改的）标题对查询集进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-04T09:11:50.407

评论中的@bebraw 实际上是正确的。

创建一个特殊的排序字段就是这样做的。这也是 SOLR 等搜索框架的自定义。您甚至可以应用特殊的文本分析来根据语言进行排序。

在您的情况下，如果就像删除停用词（文章的简短列表）一样简单，您将创建一个常规模型字段，从另一个字段复制数据并删除停用词。

使用常规 DB 字段的好处：您可以创建一个 DB 索引（例如，在 UPPER(value) 上）并能够对 DB 索引支持的不区分大小写进行排序（您必须使用 QuerySet.extra 添加一个额外的字段来排序上（值））。

这将允许快速排序和分页结果。如果你在 Django 中做所有事情，你将不得不检索整个数据。对于数百行来说，这可能足够快，但如果数据增加，则根本无法扩展。

但是：根据您的数据小心停用词。停用词的反例是标题“To Be or Not To Be”，它完全由您可能很容易归类为停用词的内容组成，并且在通过这样的过滤器时会被简单地消灭。

# linux - 如何在 Ubuntu Linux 上安装 MonoGame 模板

> ID：12544312
> 
> 赞同：0
> 
> 时间：2012-09-22T13:46:30.807
> 
> 标签：linux, ubuntu, monodevelop, monogame

自述文件说我应该将 MonoDevelop.MonoGame.2.5 目录复制到 ~/.config/MonoDevelop/addins 目录中。当我这样做时，我没有看到新的模板，也没有看到任何新的插件。我正在运行 MonoDevelop 3.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T02:20:36.807

关闭 MonoDevelop，转到你的包管理器并安装 monodevelop-monogame。

# php - 从 Javascript 调用 PHP 函数 - PHP 在单独的文件中

> ID：12544315
> 
> 赞同：-1
> 
> 时间：2012-09-22T13:46:47.687
> 
> 标签：php, javascript, function, variables

我无法从 PHP 填充 Javascript 变量。

我的 index.php 文件是典型的形式，即

```
 <?php
  function blah () {}
  function doThis ($sUserID) {}
 ?>

 <HTML>
   <head>
     <script src="test.js"></script>  
   </head>

   show results
 </HTML> 
```

问题是我需要使用从 PHP 函数（位于 php 文件中）调用的值填充 Javascript 变量（在“test.js”文件中）。

我试过了：

```
 var jsVar = '<?php echo doThis(sUserID)?>';
document.write("jsVar: ", jsVar); 
```

但没有结果。

那么如何从 test.js 调用 PHP 函数（在另一个 PHP 文件中）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:49:34.863

`test.js`只需在加载之前声明一个全局变量，这应该可以

```
 <head>
     <script type="text/javascript>
       var jsVar = '<?php echo doThis(sUserID) ?>';
     </script>
     <script src="test.js"></script>  
   </head> 
```

如果`doThis(sUserID);`返回一个有效的字符串，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T13:49:47.123

您`doThis()`不返回任何内容，因此`echo`不会显示任何内容。但这还不是全部。您不能从 JS 脚本调用 PHP 函数，除非您首先通过 PHP 解释器传递 JS 文件（这不是默认行为）。你可以通过将你的重命名`test.js`为`test.php`

# javascript - 如果字符串作为数组起作用，那么 .charAt() 的意义何在？

> ID：12544316
> 
> 赞同：0
> 
> 时间：2012-09-22T13:46:54.870
> 
> 标签：javascript, arrays, string

> **可能重复：**
> [string.charAt(x) 或 string[x]？](https://stackoverflow.com/questions/5943726/string-charatx-or-stringx)

似乎`"asdf"[0]`产生`"a"`. 那么为什么有人会打字`"asdf".charAt(0)`呢？

这种较短的语法可以安全使用吗？

跨浏览器兼容性？这就是我能想到的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T13:51:21.357

您只能在较新的浏览器中将字符串作为数组访问。要支持较旧的浏览器（即 IE7），您必须使用`charAt`.

相关：[string.charAt(x) 还是 string[x]？](https://stackoverflow.com/questions/5943726/string-charatx-or-stringx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T13:50:36.627

我认为它使代码更清晰、更易读。如果你使用

```
foo.charAt(0) 
```

代替

```
foo[0] 
```

（数组索引），你说清楚这`foo`是一个字符串，而不是一个数组。此外，您不太可能使用其他可能失败的数组方法。

**附录**

因为有些人不清楚我的意思，让我再说一遍：**其他数组方法在`String`**.

自己试试：

```
var foo = "This is a string.";
foo.push(" A string is not an array."); 
```

你会得到一个类型错误。

**对于那些可能将**数组表示法与括号表示法混淆的人，请尝试以下实验。打开浏览器的控制台并输入以下内容：

```
foo = {bar:'ass',fub:'tree',mip:0}; 
```

现在尝试使用括号表示法访问第一个元素：

`foo['bar']`返回“屁股”；

`foo[0]`返回`undefined`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T13:51:33.820

跨浏览器兼容性是个问题。当我打开 IE9 的控制台并将其设置为 IE7 标准时，“a”[0] 产生 undefined 而“a”.charAt(0) 按预期工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T13:55:15.433

大多数浏览器确实允许您将字符串视为字符数组（就像它在许多其他编程语言中一样）。

另一方面，IE 没有。在那里，您必须使用`"asdf".charAt(0)`.

现在我想说，允许`[]`符号只是浏览器允许您的一个额外选项，使字符串的行为类似于 C、Pascal 等语言。但是，Javascript 中的字符串实际上不是数组，因此按标准不应与`[]`. 字符串是内置类，因此要访问它们的属性，您必须使用它们的公共方法，就像在 Java 中一样。

# git - 为什么 git svn 不能克隆一个裸仓库？

> ID：12544318
> 
> 赞同：12
> 
> 时间：2012-09-22T13:47:33.557
> 
> 标签：git, svn, version-control, git-svn

[这个问题与this](https://stackoverflow.com/questions/10307142/merge-svn-repo-with-git-repo)或[this](https://stackoverflow.com/questions/2923859/how-can-i-push-to-a-git-svn-repo)不一样。

```
git svn clone -s --bare https://ctags.svn.sourceforge.net/svnroot/ctags
Unknown option: bare 
```

怎么了？

我可以使用 git svn 克隆一个裸仓库吗？

我已阅读 man git-svn，但找不到克隆裸仓库的方法。

**编辑 1**

**我在 git svn repo 上的标签：**

```
git branch -r
  origin/master
  tags/Ctags-5_1
  tags/Ctags-5_1_1
  tags/Ctags-5_2
  tags/Ctags-5_2_1
  tags/Ctags-5_2_2
  tags/Ctags-5_2_3
  tags/Ctags-5_3
  tags/Ctags-5_3_1
  tags/Ctags-5_4
  tags/Ctags-5_5
  tags/Ctags-5_5_1
  tags/Ctags-5_5_2
  tags/Ctags-5_5_3
  tags/Ctags-5_5_4
  tags/Ctags-5_6
  tags/ctags-5.7
  tags/ctags-5.8
  tags/test
  trunk 
```

为什么我不能将这些标签推送到 git 存储库中？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-23T13:08:27.720

找到了更好的解决方案

```
$ git svn init https://ctags.svn.sourceforge.net/svnroot/ctags repo-git --stdlayout 
$ #edit  repo-git/.git/config to contain:
[svn-remote "svn"]
        url = https://ctags.svn.sourceforge.net/svnroot/ctags
        fetch = trunk:refs/heads/master
        branches = branches/*:refs/heads/*
        tags = tags/*:refs/tags/*
$ cd repo-git
$ git svn fetch 
```

毕竟你可以设置 core.bare=true。生成的裸存储库将位于 repo/.git

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-22T14:16:40.523

git-svn 是一个 Perl 脚本，如果你打开它，你会发现它根本不包含“bare”这个词。不支持选项“--bare”。

作为一种解决方法，您可以使用简单的“git svn clone”，然后将生成的存储库转换为裸存储库。

# r - 将 r 输出写入 r 对象并在下一个代码中使用它们

> ID：12544320
> 
> 赞同：-1
> 
> 时间：2012-09-22T13:47:52.327
> 
> 标签：r

我仍在学习 R，并且在 R 中写入和读取文件时遇到问题。我要做的是在重新采样时检索我得到共线性的迭代，然后将它们保存到向量中。在第二个代码中使用这个向量来忽略这些迭代并进入下一个迭代。

我的代码中几乎没有错误，请您帮忙并给我更好的方法来做到这一点。但请记住，我需要将 iter 向量保存到文件中，以便以后使用。

这是代码：

```
a0=rep(1,40)
a=rep(0:1,20)
b=c(rep(1,20),rep(0,20))
c0=c(rep(0,12),rep(1,28))
c1=c(rep(1,5),rep(0,35))
c2=c(rep(1,8),rep(0,32))
c3=c(rep(1,23),rep(0,17))
c4=c(rep(1,6),rep(0,34))
x=matrix(cbind(a0,a,b,c0,c1,c2,c3,c4),nrow=40,ncol=8)

sam <- function(n){
iterlist <- NULL
for(i in 1:n){
set.seed(i)
indx <- sample(1:nrow(x),nrow(x),replace=T)
samx <- x[indx,]
e <- crossprod(samx)
ee <- eigen(e)
evals <- ee$values
Zeval <- which(ifelse(abs(evals)<=1e-7,TRUE,FALSE))
if(length(Zeval)!=0) iterlist <- c(iterlist,i)
}
return(iterlist)
}
iter <- sam(20)
setwd("C:/Users/Sam/Desktop/R")
writeLines(iter)
readLines(iter)
fit <- function(dat,n){
for(i in 1:n){
if(i==iter) next
set.seed(i)
indx <- sample(1:nrow(x),nrow(x),replace=T)
samx <- x[indx,]
fit <- lm(rnorm(nrow(x),i,2*i)~samx-1)
bhat <- coef(fit)
}
return(bhat)
}
fit(x,20) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T14:39:18.283

为什么不将两个函数合二为一，避免重复相同的代码呢？这样你就不必写出任何东西，读回来，或者做一堆其他的房子清洁项目？

`fit()`这行代码的函数中也有错误`norm(20,i,2*i)`

1.  `norm`只需要两个参数，第一个是数字矩阵，第二个是指定要计算的矩阵类型的字符向量
2.  也许你的意思是`rnorm()`相反？如果是这种情况 - 仍然存在错误，因为您创建了 20 个随机数，而`samx`长度为 40

由于您没有告诉我们，我不知道您真正想做什么，所以我将由您自行解决。

最后 - 这是我将你的两个函数重写为一个的方法。我还重新设计了它们以使用`*apply`函数而不是你的 for 循环。通过迭代地制作更大的对象，你会让 R 非常快速地爬行。然后你会回来抱怨性能不佳，所以一开始就不要迭代地增长对象！要么预先分配你的存储向量，要么`*apply`像我在这里做的那样使用一个函数。

```
sam <- function(i){
    set.seed(i)
    indx <- sample(1:nrow(x),nrow(x),replace=T)
    samx <- x[indx,]
    e <- crossprod(samx)
    ee <- eigen(e)
    evals <- ee$values
    Zeval <- which(ifelse(abs(evals)<=1e-7,TRUE,FALSE))
    if(length(Zeval)==0)  {
      fit <- lm(norm(nrow(samx),i,2*i)~samx-1) #Note the assumption I had to make here
      bhat <- coef(fit)
    } else {
      bhat <- NA
    }
    return(list(bhat = bhat, iter = i))
} 
```

并且在使用中

```
> lapply(1:4, sam, 20)
[[1]]
[[1]]$bhat
      samx1       samx2       samx3       samx4       samx5       samx6       samx7 
 1.14857203  0.46875434  0.06780226 -0.56521389 -0.81897946 -2.48305129  0.56577183 
      samx8 
 2.34547722 

[[1]]$iter
[1] 1

...
...

[[4]]
[[4]]$bhat
[1] NA

[[4]]$iter
[1] 4 
```

另请注意，`n`当您定义它时，我从您的 fit 函数中删除了该参数，但后来没有在任何地方使用它。

# sql-server-2008 - ssas维度处理键未找到错误

> ID：12544323
> 
> 赞同：3
> 
> 时间：2012-09-22T13:48:02.100
> 
> 标签：sql-server-2008, ssas, business-intelligence, dimension

我有一个奇怪的情况，我试图处理一个维度，数据源是 MSSQL，当我尝试处理这个维度时，我收到了这个错误

> OLAP 存储引擎中的错误：处理时找不到属性键：表：'application'，列：'Full_Name'，值：'Mr Peter McDonald'。该属性是“申请人全名”。

因为我*认为*我知道问题出在哪里，所以我为此列设置了区分大小写的属性，然后我再次尝试处理，它给了我相同的结果。

当我使用like查询列时，我得到两条记录

> 彼得麦克唐纳
> 
> 彼得麦克唐纳

我通常认为设置大小写敏感性会解决问题，但在这种情况下它不起作用，所以我想知道是否有人知道如何解决这个问题。

非常感谢您提前提供的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:13:52.227

抱歉各位回来晚了。我很久没有登录stackoverflow了。

简短版：这基本上是由于 SQL server 默认比较不区分大小写造成的。因此，如果您想防止此问题，您必须使表或数据库区分大小写 - 将排序规则设置为 ASCS

稍长的版本：即使 MSSQL 匹配不区分大小写的内容，它仍然以不同的方式存储值，当 SSAS 尝试对特定列执行不同的操作时，这将成为一个问题。已经有一段时间了，所以我记不清了，但是对于 1 个索引它会有两个值，它会像我发布的问题一样抱怨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T02:26:02.270

更改区分大小写的设置后，您需要重新部署多维数据集。

# emacs - 样式模式线：如何删除边框？

> ID：12544325
> 
> 赞同：5
> 
> 时间：2012-09-22T13:48:21.850
> 
> 标签：emacs, customization

我一直在徒劳地想出一种可以删除模式线周围边框的样式，但是不行……脸看起来像这样：

```
(mode-line-inactive ((,class
  (:box (:line-width <??> :style none)
   :background ,tron-berlin-darkest :foreground ,tron-gray-light)))) 
```

它可以接受的值是 1..N 和 -1..-N，其中 N 是一个很大的数字，但 0 或`nil`不被接受。它会出于某种原因划清界限......知道如何摆脱它吗？或者，如果由于某种原因不可能，如何将线条涂上其他颜色？

顺便说一句，如果我不指定任何值，则默认值为 1... 非常有用：/

另外，如果我不指定`:box`，则默认创建该框:(

**编辑**

对不起，没关系，不得不放`:box nil`- 这取消了框和它周围的线。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T14:43:06.893

必须添加到面部`:box nil`以覆盖默认框设置。

# python - 我可以用 Python 在 Xcode 中开发 Qt GUI 吗？

> ID：12544328
> 
> 赞同：3
> 
> 时间：2012-09-22T13:48:33.270
> 
> 标签：python, xcode, qt, pyqt4

我是一个新手 Python 程序员。我已经在 Python 中开发了我的逻辑，我想使用 PyQt4 开发带有 Qt 的 GUI。我该如何开始？我可以从 XCode 开始吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T14:50:56.600

首先，您选择了与 GUI 编程的完美结合。Python + PyQt 有助于快速有效地进行 GUI 设计

1.  ~~Eclipse + PyDev(extension) 完善python环境。调试、自动完成、Pep8、PyLint、PyDev 控制台、代码分析、PyUnit ... [http://pydev.org/](http://pydev.org/)~~ 编辑：见下文

2.  Qt-Designer 和 Qt-Assistant，非常棒！[http://www.riverbankcomputing.com/static/Docs/PyQt4/html/](http://www.riverbankcomputing.com/static/Docs/PyQt4/html/) [http://www.qtrac.eu/pyqtbook.html](http://www.qtrac.eu/pyqtbook.html) [http://wiki.python.org/moin/JonathanGardnerPyQtTutorial](http://wiki.python.org/moin/JonathanGardnerPyQtTutorial)

3.  Pyuic4、Pyrrc4 和其他控制台工具的关键优势。您可以使用 qtdesigner 设计 aui，并且可以将其用于任何 qt 平台或语言。

4.  奖金，py 安装程序；跨平台的python分发工具。它支持几乎所有的内置库，包括 pyqt、lxml...

PS：我正是在使用这个环境，我们从零开始在 2 个月内完成了一个服务器客户端

编辑：随着[pycharm-community 版本的](http://www.jetbrains.com/pycharm/)发布，我们迁移到它。对于任何类型的 python 开发环境来说，它都非常棒。

# php - Node.js + Socket.IO 和 CodeIgniter

> ID：12544337
> 
> 赞同：2
> 
> 时间：2012-09-22T13:50:06.477
> 
> 标签：php, node.js, socket.io

我正在开发一个使用 CodeIgniter 框架开发的项目。我的项目有很多用户交互，比如帖子、评论和其他应该实时的通知。

到目前为止，我已经尝试通过两种方式获取这些通知：
1\. 我尝试使用 AJAX 构建一种数据拉取系统，但我认为这会在我的服务器上造成大量带宽浪费
2\. 我已经设置一个带有 socket.io 服务器的 node.js，它只监听一些套接字事件并将通知推送回用户。例如，当添加评论时，我有一个将所有新评论从 5 秒拉到 5 秒的函数，我有一个 socket.emit(); 将评论信息推送到 node.js 和 node.js 将通知推送到所有连接的套接字。

我不确定 node.js + PHP 是否是一份好工作（但是，到目前为止我了解到的是 node.js 有利于长轮询和更少的资源成本）。

你认为女巫建筑更好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T13:55:19.717

使用带有 Socket.IO 的 Node.js 将任何实时数据发送给您的客户。

是的，您可以将它与基于 CodeIgniter 的站点结合使用...输出动态页面和获取客户端数据不必彼此有任何关系。

Socket.IO 的问题不在于 Socket.IO 本身……而在于您构建应用程序的方式。根据需要发送消息。如果您在连接时需要带有 5 条评论的初始发出，请执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-16T09:57:49.623

一旦你完成了所有的 Nodejs + CI 设置，接下来你要担心的是验证 Nodejs 中已经在 CI 端进行身份验证的用户。通过使用 CI 和 Nodejs 都可以访问的自定义会话存储来克服这个问题的一种方法。

我选择 Redis 而不是 Memcache 用于自定义会话存储，因为您不想在服务器重新启动时丢失所有现有会话数据。对于 CI [https://gist.github.com/zhouming/3672207](https://gist.github.com/zhouming/3672207)和 Nodejs，您可以轻松搜索、安装和配置 Redis。

请参阅此处了解更多有用信息[http://ericterpstra.com/2013/03/use-redis-instead-of-mysql-for-codeigniter-session-data](http://ericterpstra.com/2013/03/use-redis-instead-of-mysql-for-codeigniter-session-data)

# c - 为什么这个移植函数适用于二叉搜索树？

> ID：12544341
> 
> 赞同：0
> 
> 时间：2012-09-22T13:50:30.470
> 
> 标签：c, binary-search-tree

在 CLRS 中关于二叉搜索树的章节中，我遇到了移植功能，它用在父元素中进行适当更改的节点替换`u`节点。`v`这是我为移植功能编写的代码：

```
void transplant(Node* root, Node* u, Node* v)
{
    if(u->parent == NULL)
        root = v;
    else if(u == u->parent->left)
        u->parent->left = v;
    else
        u->parent->right = v;
    if(v != NULL)
        v->parent = u->parent;
} 
```

并不是我不明白它是如何工作的，而是为什么它会起作用。当我进行函数调用时，我基本上是在向函数发送指针副本，`root`对吗？所以函数中所做的更改实际上不应该反映在根上，除非我返回它或使用指向指针类型的指针，但它实际上改变了原始根。我将 root 定义为全局变量，这会改变什么吗？`u``v`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T14:14:39.303

`u->parent`如果is ，则该函数将不起作用`NULL`，在这种情况下，只有局部变量`root`设置为`v`，从函数外部访问的任何内容都不会更改。

如果`u->parent != NULL`, 那么`u->parent->left`和`u->parent->right`是 所`Node`指向的成员`u->parent`, 并且那些被覆盖, 所以更改在 中是可见的`main`。

# android - Android：NoClassDefFound 错误

> ID：12544343
> 
> 赞同：0
> 
> 时间：2012-09-22T13:51:05.303
> 
> 标签：android

我的设置如下：

我有一个 android 项目 A 和一个 java 项目 B。项目 A 使用项目 B 中的一些文件。

我的开发环境是eclipse，我已经在构建路径中包含了Project B，并将其标记为“Order and export”。

该项目构建良好，但在运行时我得到一个

java.lang.NoClassDefFound 错误，当我试图从项目 B 中引用一个类时。

我该如何解决这个问题？

我正在使用 eclipse Juno 和 ADT 20.0.3。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-03T12:50:56.760

当我尝试使用同一个项目本身引用另一个类时，我遇到了同样的问题。就我而言，当我重新检查 android 依赖项时，问题得到了解决。我为一个需要的文件添加了两个 jar 文件。我的项目中需要 android-support-v4.jar 文件。我错误地添加了两次库。当我删除其中一个时，错误得到了解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-05T10:43:31.507

对我来说，这是在使用 AIDE 开发环境时发生的。在过去的一年里，这种情况已经发生了几次。

当 Java 菱形运算符用于指定函数的泛型类型时，程序将编译，但 Dalvic 引擎因 NoClassDefFound 异常而崩溃。

为了解决这个问题，我必须明确定义泛型类型。

顺便说一句，这种崩溃可能发生在与实际问题完全不同的地方。例如，我们有 A 类和 B 类。错误代码位于 A.myMethod()。当 B 类尝试访问 A 类的任何部分，甚至是不相关的东西，例如 A.myOther() 方法时，就会发生崩溃。

这是因为 Java/Dalvic 仅在首次访问时才在运行时加载类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:37:25.397

您还可以尝试将所需的 java 类导出到 jar 中，并将该 jar 包含在您的 Android 项目中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T10:10:22.677

当您谈到更新了 Eclipse 和 ADT 时，也许您也将环境更改为 Java 7？如果是这种情况，答案将是：切换回 Java 1.6.x，因为 Android 不（还？）支持 Java 7。

您需要在以下位置更改“**编译器合规性级别**”：

*窗口 - 首选项 - Java - 编译器 - 编译器合规级别*

希望有效，至少它对我有用： [NoClassDefFoundError when references from an Android-Project to a standard Java-Project](https://stackoverflow.com/questions/14963835/noclassdeffounderror-when-referencing-from-an-android-project-to-a-standard-java)

# c# - 每个派生表都必须有自己的别名？

> ID：12544344
> 
> 赞同：-2
> 
> 时间：2012-09-22T13:51:14.010
> 
> 标签：c#, mysql

> **可能重复：**
> [每个派生表都必须有自己的别名](https://stackoverflow.com/questions/1888779/every-derived-table-must-have-its-own-alias)

我有两个具有相同列的 MYSQL 表我正在尝试获取 sum qtd，其中 produto 相同但我有错误“每个派生表必须有自己的别名”请帮助

```
MySqlCommand cmd = cnn.CreateCommand();
                    StringBuilder query = new StringBuilder();
                    query.Append("select produto,sum(qtd) from ( ");
                    query.AppendFormat(" select x.produto,x.qtd from itens_venda x where x.data='{0:MM/dd/yyyy}'", new object[] { data1 });
                    query.Append(" Union all ");
                    query.AppendFormat(" select y.produto,y.qtd from itens_venda_fiscal y where y.data='{0:MM/dd/yyyy}'", new object[] { data1 });
                    query.Append(" )  group by produto order by sum(qtd) desc  ");
                    cmd.CommandText = query.ToString();
                    MySqlDataReader reader = cmd.ExecuteReader();
                    while ( reader.Read() )
                    {
                        Codigo.Add(reader.GetString(0));
                        Quantidade.Add(reader.GetString(1));
                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:54:11.590

是的，每个派生表都必须有自己的别名。添加别名，如下所示。

```
query.Append(" ) as t group by produto order by sum(qtd) desc  "); 
```

# php - PHP连接数据库成功后也找不到表

> ID：12544347
> 
> 赞同：1
> 
> 时间：2012-09-22T13:52:04.897
> 
> 标签：php, mysql, database

下面的代码重新创建了我无法解决的问题。我似乎无法弄清楚问题出在哪里 - 在代码中？MySQL 设置？或者别的地方？任何正确方向的指针将不胜感激。

```
<html>
<head></head>
<body>
<?php 
$db_name = "UserDB";
$open = mysql_connect("localhost", "root", "");
if($open)
    echo "1\. Successfully connected to MySQL";
echo "</br>";
$db = mysql_select_db($db_name, $open);
if($db)
    echo "2\. Successfully selected {$db_name} database";
echo "</br>";
$sql = "SHOW TABLES FROM `{$db_name}`";
$result = mysql_query($sql);
$print = mysql_num_rows($result);
if($result)
    echo "3\. {$print} tables found in {$db_name}";
?> 
</body>
</html>

Here's my output:
1\. Successfully connected to MySQL
2\. Successfully selected UserDB database
3\. 0 tables found in UserDB 
```

问题出在输出的第 3 行。它说“0”表，这是不正确的。我在选定的数据库中创建了“3”个 InnoDB 表。如果我在 phpmyadmin 中复制/粘贴并运行相同的 SHOW TABLES 查询，它会完美运行。

知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:56:16.353

尝试使用包装函数[mysql_list_tables](http://il.php.net/manual/en/function.mysql-list-tables.php)。由于一些奇怪的权限定义，我发现一次不可能使用 SHOW TABLES，尽管我可以使用 mysql_list_tables。

# ssis - SSIS：设置（1）inventorycountNr和（2）StoreNr的列表变量，然后在where子句中使用它们

> ID：12544348
> 
> 赞同：0
> 
> 时间：2012-09-22T13:52:22.597
> 
> 标签：ssis

1.脚本任务：设置（A）库存计数和（B）StoreNr的数组 2.数据流任务：在where子句中使用列表变量（过滤，从而提高性能）

*脚本任务必须从服务器 A 读取，数据流任务必须从服务器 B 读取。我不想使用链接服务器，也不想过滤下游数据流，而是想通过数据流源 (OLE DB) 中的 where 子句进行过滤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T16:07:47.677

您可以在两个数据流中执行此操作。

在第一：

1.  从源表中选择要在 where 中使用的值
2.  将此值存储在字符串变量`ListToBeFetched`中作为逗号分隔的列表，使用 Srcipt 组件作为目标女巫代码，类似于：

```
 using System.Text;
[Microsoft.SqlServer.Dts.Pipeline.SSISScriptComponentEntryPointAttribute]
public class ScriptMain : UserComponent
{
    StringBuilder sb;
    public override void PreExecute()
    {
        base.PreExecute();
        sb = new StringBuilder();
    }

    public override void PostExecute()
    {
        base.PostExecute();
        Variables.IdListToBeFetched = sb.ToString().TrimEnd(',');
    }

    public override void Input0_ProcessInputRow(Input0Buffer Row)
    {
        if (!Row.Value_IsNull)
        {
            sb.AppendFormat("{0},", Row.Value);
        }
    }
} 
```

对第二个列表执行相同操作。

在第二个数据流中，将动态生成的查询设置为 sql 命令`OLE DB Source`（取自[Jamie Thomson 博客](http://consultingblogs.emc.com/jamiethomson/archive/2005/12/09/SSIS_3A00_-Using-dynamic-SQL-in-an-OLE-DB-Source-component.aspx)）：

1.  创建一个名为 SourceSQL 的新变量
2.  打开 SourceSQL 变量的属性窗格（按 F4）
3.  设置 EvaluateAsExpression=TRUE
4.  设置`Expression`为`"select * from table where columnToBeSearched in (" + @[User::ListToBeFetched] + ")"`
5.  对于您的 OLE DB 源组件，打开编辑器
6.  设置数据访问模式="来自变量的 SQL 命令"
7.  设置变量名 = "SourceSQL"

# .htaccess - 使用图像。带有 cmsms 的子域以增加加载时间

> ID：12544352
> 
> 赞同：1
> 
> 时间：2012-09-22T13:52:43.883
> 
> 标签：.htaccess, content-management-system, subdomain

我目前正在使用 CMS Made Simple 1.11.2。我创建了 img.domain.com 的子域，并希望将其用于站点上使用的所有图像。使用 cmsms 图像通常存储在 domain.com/cms/uploads/images/ 中*。*.

换句话说，对 url 中图像的任何引用都应转换为使用新的子域，例如 img.domain.com/cms/example.jpg。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T04:22:08.470

第 1 步。在您的 CMS 和您的 CMS 生成的所有内容中，将链接更改为`http://img.domain.com/image_filename.jpg`. 如果您不这样做，您仍将使用旧链接。

第2步。将这些规则添加到`img.domain.com`文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{DOCUMENT_ROOT}/cms/uploads/images%{REQUEST_URI} -f
RewriteRule ^ /cms/uploads/images%{REQUEST_URI} [L] 
```

如果 img 子域和你的主域有不同的文档根，或者在不同的服务器上，你需要使用 mod_proxy：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ http://domain.com/cms/uploads/images/$1 [L,P] 
```

# c# - 在 RadioButtonList 中选择一个项目，如何在 asp.net c# 中从数据库中获取项目列表到 ListBox

> ID：12544354
> 
> 赞同：0
> 
> 时间：2012-09-22T13:53:21.030
> 
> 标签：c#, asp.net

我有一个`RadioButtonList`和一个`ListBox`。我已经绑定`RadioButtonList`到数据库。因此，在 中选择一个项目后`RadioButtonList`，我想将一些数据检索到`ListBox`. 我试过的代码是：

```
protected void Page_Load(object sender, EventArgs e)
{
   RadioFill();
}

public void RadioFill()
    {
        SqlDataAdapter mydata = new SqlDataAdapter("SELECT DISTINCT Param_Name FROM Parameter_Value_Master", con);
        DataSet dset = new DataSet();
        mydata.Fill(dset, "Table");
        RadioButtonList1.Items.Clear();
        RadioButtonList1.DataSource = dset.Tables[0];
        RadioButtonList1.DataTextField = dset.Tables[0].Columns["Param_Name"].ColumnName;
        RadioButtonList1.DataBind();
    }

protected void RadioButtonList1_SelectedIndexChanged(object sender, EventArgs e)
{
SqlDataAdapter mydata = new SqlDataAdapter("SELECT Value_Option FROM   Parameter_Value_Master", con);
DataSet dset = new DataSet();
mydata.Fill(dset, "Table");
ListBox1.Items.Clear();
ListBox1.DataSource = dset.Tables[0];
ListBox1.DataTextField = dset.Tables[0].Columns["Value_Option"].ColumnName;
ListBox1.DataBind();
} 
```

我在这里面临的问题是在选择一个项目时，我放置了我的整个面板`RadioButtonList`并且`ListBox`不可见。

请帮助...！谢谢...！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:18:19.897

首先，将 Page_Load 方法更改为：

```
protected void Page_Load(object sender, EventArgs e)¨
{
   if (!Page.IsPostBack)
   {
          RadioFill();
   }
} 
```

如果它没有帮助而不是从您的 *.aspx 文件中发布代码。

备注：RadioButtonList1_SelectedIndexChanged(object sender, EventArgs e)方法，不存在基于单选按钮列表选择值的选择。

# jquery - 在 jquery 的 ajax 调用中使用什么路径

> ID：12544358
> 
> 赞同：-1
> 
> 时间：2012-09-22T13:53:48.207
> 
> 标签：jquery, ajax, file, path

我必须阅读位于内部的文本文件

```
/mnt/sdcard/koinoxrista 
```

我的android设备的目录。

我必须在里面使用的路径是什么

```
jQuery.get('--------path_to_file-------',function(data){...} 
```

在我的应用程序中调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T14:00:24.517

与您在浏览器中打开文件的路径相同。（如果您想要相对路径，请减去域）。如果您无法在浏览器中打开它，则无法通过 Internet 访问它，您必须将其移动到可通过 Internet 访问的目录*（*通常位于 Web 服务器的公共目录中的某个位置。

# svd - 在 svd 分解中寻找朋友

> ID：12544359
> 
> 赞同：3
> 
> 时间：2012-09-22T13:53:50.083
> 
> 标签：svd

我正在尝试使用 svd 实现协同过滤推荐系统。我有所有的矩阵`Uk`, `Sk`, `Vkt`. 并且还有评级矩阵。

```
Uk
−0.4312452 0.4931501
−0.5327375 −0.5305257
−0.5237456 −0.4052007
−0.5058743 0.5578152

sqrt.Sk
12.2215 0
0 4.9282

Vkt
−0.3593326 0.36767659
−0.5675075 0.08799758
−0.4428526 0.56862492
−0.5938829 −0.73057242 
```

我也有`user A vector: {5, 3, 4, 4}`和`user B: {2, 5, 1, 3}`

我需要帮助来查找用户 A 和 B 之间的相似性。

# android - android os 及其内核是用什么编程语言编写的？

> ID：12544360
> 
> 赞同：13
> 
> 时间：2012-09-22T13:54:04.640
> 
> 标签：android, kernel

我只想知道***android*操作系统**是什么编程语言，它的**内核**是写的..

* * *

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-22T13:56:49.507

Android 构建在 Linux 之上，其中很大一部分是用 C 编写的。不过，也有很多代码是用 C++ 编写的。此外，大多数应用程序框架（您称为 android 的东西，以及您在屏幕上看到的几乎所有东西）都是用 Java 编写的。

# python - 如何在 pandas 数据框中组织结构化数据

> ID：12544361
> 
> 赞同：2
> 
> 时间：2012-09-22T13:54:10.140
> 
> 标签：python, pandas, pivot-table

假设我有一个 DataFrame，它的子索引结构如下所示，带有“date”、“tenor”、“mat”和“strike”，并且要观察的字段存储在“vol”列中：

```
date     tenor   mat strike    vol                                      
20120903 3m      1y  0.25      52.
                     0.50      51.
                     1.00      49.
20120903 3m      5y  0.25      32.
                     0.50      55.
                     1.00      23.
20120903 3m      10y 0.25      65.
                     0.50      55.
                     1.00      19.
20120904 3m      1y  0.25      32.
                     0.50      57.
                     1.00      44.
20120904 3m      5y  0.25      54.
                     0.50      50.
                     1.00      69.
20120904 3m      10y 0.25      42.
                     0.50      81.
                     1.00      99. 
```

假设我想通过获取一个新的数据帧来重组这些数据，该数据帧具有子索引“日期”+“男高音”，并且“值”由原始数据帧中的“垫”、“罢工”和“卷”组成的 3d 数组给出像这样的方式：

```
date     tenor   values                                                       
20120903 3m      [[1y,5y,10y],[0.25, 0.50, 1.00], [52., 51., 49.],
                                                  [32., 55., 23.],
                                                  [65., 55., 19.]]
20120904 3m      [[1y,5y,10y],[0.25, 0.50, 1.00], [32., 57., 44.],
                                                  [54., 50., 69.],
                                                  [42., 81., 99.]] 
```

我尝试了“unstack”、“groupby”和“pivot”的各种尝试，但没有成功。我只能通过使用大量 python 矢量操作来实现我的目标，但这是一个缓慢且低效的过程。为了获得相同的结果，是否有任何特定的、更有效的 pandas 程序？我迷路了……谢谢你的帮助，毛里齐奥

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T02:38:01.123

像这样的东西怎么样：

```
In [111]: df
Out[111]: 
                mat  strike  vol
date     tenor                  
20120903 3m      1y    0.25   52
         3m      1y    0.50   51
         3m      1y    1.00   49
         3m      5y    0.25   32
         3m      5y    0.50   55
         3m      5y    1.00   23
         3m     10y    0.25   65
         3m     10y    0.50   55
         3m     10y    1.00   19
20120904 3m      1y    0.25   32
         3m      1y    0.50   57
         3m      1y    1.00   44
         3m      5y    0.25   54
         3m      5y    0.50   50
         3m      5y    1.00   69
         3m     10y    0.25   42
         3m     10y    0.50   81
         3m     10y    1.00   99

In [112]: def agg_func(x):
    mats = list(x.mat.unique())
    strikes = list(x.strike.unique())
    vols = x.pivot('mat', 'strike', 'vol').reindex(mats, columns=strikes)
    return [mats, strikes, vols.values.tolist()]
   .....: 

In [113]: rs = df.groupby(level=['date', 'tenor']).apply(agg_func)

In [114]: rs
Out[114]: 
date      tenor
20120903  3m       [['1y', '5y', '10y'], [0.25, 0.5, 1.0], [[52.0...
20120904  3m       [['1y', '5y', '10y'], [0.25, 0.5, 1.0], [[32.0...

In [115]: rs.values[0]
Out[115]: 
[['1y', '5y', '10y'],
 [0.25, 0.5, 1.0],
 [[52.0, 51.0, 49.0], [32.0, 55.0, 23.0], [65.0, 55.0, 19.0]]] 
```

# php - 导入大量数据的最佳方式（Csv vs xls vs xlsx vs ?）

> ID：12544363
> 
> 赞同：0
> 
> 时间：2012-09-22T13:54:35.943
> 
> 标签：php, import

我有一个 php 应用程序，它需要在代码点火器框架之外尽可能少地处理许多 php 配置。

我现在有一个使用 .csv 文件的导入功能。csv 很好，好像是跨平台的。但是人们在使用excel时遇到了麻烦。它也无法正确显示中文字符。

然后是 .xls 和 .xlsx 文件。有这些库，但通常需要 php_zip

我应该选择哪个选项适用于许多 php 安装并且有利于显示和导入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:13:51.500

There's no way you'll read an .xlsx file without unzipping it, which means you'll need a zip lib.

PHPExcel handles several formats of excel files, but it can be a bit resource hungry.

[http://phpexcel.codeplex.com/](http://phpexcel.codeplex.com/)

XLSX2CSV is less resource intensive, but only reads one page of multi-page worksheets, doesn't read parse formulas and doesn't handle .xls files.

[http://davidacollins.com/weblog/xlsx2csv](http://davidacollins.com/weblog/xlsx2csv)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:02:18.143

导出到 CSV 时可能会丢失信息。
它只会保存单元格的值 - 而不是它们的格式信息。

# javascript - 在 ASP.NET MVC3 中使用 jQuery 禁用控件

> ID：12544371
> 
> 赞同：1
> 
> 时间：2012-09-22T13:55:53.537
> 
> 标签：javascript, jquery, asp.net-mvc-3

我有一些行的下表，并希望禁用每行内的所有控件。

下面是我的 HTML 代码：

```
<table id="tblChildData">
    <tr id="trChild2">
        <td>
            2
        </td>
        <td style="height: 30px;">
            <%:Html.TextBoxFor(m=>m.childName2) %><%--<br />
                <%: Html.ValidationMessageFor(m=>m.SpouseName,null,new{@Class="field-validation-message"}) %>--%>
        </td>
        <td style="height: 30px; text-align: center;">
            &nbsp;M<%: Html.RadioButtonFor(m=>m.genderIdChild2,1) %>
            &nbsp;F<%:Html.RadioButtonFor(m=>m.genderIdChild2,2) %>
        </td>
        <td style="height: 30px; text-align: center;">
            <%:Html.TextBoxFor(m=>m.ageChild2,new{Style="width:30px;",maxlength=3}) %><%--<br />
                <%:Html.ValidationMessageFor(m=>m.SpouseAge,null,new{@Class="field-validation-message"}) %>--%>
        </td>
        <td style="height: 30px; text-align: center;">
            &nbsp;&nbsp;&nbsp;Married<%: Html.RadioButtonFor(m=>m.maritialStatusChild2,1) %>
            UnMarried<%:Html.RadioButtonFor(m=>m.maritialStatusChild2,2) %>
        </td>
    </tr>
</table> 
```

下面是我用来禁用每个表行内的控件的 jQuery 代码：

```
$("#trChild2").find("input,button,textarea").attr("disabled", true);
$("#trChild2").hide();
$("#trChild3").find("input,button,textarea").attr("disabled", true);
$("#trChild3").hide();
$("#trChild4").find("input,button,textarea").attr("disabled", true);
$("#trChild4").hide();
$("#trChild5").find("input,button,textarea").attr("disabled", true);
$("#trChild5").hide();
$("#trChild6").find("input,button,textarea").attr("disabled", true);
$("#trChild6").hide();
$("#trChild7").find("input,button,textarea").attr("disabled", true);
$("#trChild7").hide();
$("#trChild8").find("input,button,textarea").attr("disabled", true);
$("#trChild8").hide();
$("#trChild9").find("input,button,textarea").attr("disabled", true);
$("#trChild9").hide();
$("#trChild10").find("input,button,textarea").attr("disabled", true);
$("#trChild10").hide();
$("#trChild11").find("input,button,textarea").attr("disabled", true);
$("#trChild11").hide();
$("#trChild12").find("input,button,textarea").attr("disabled", true);
$("#trChild12").hide(); 
```

但我不知道为什么它只隐藏表格行而不禁用行内的控件......

我也在 jsfiddle 上试过这个，但它似乎工作正常：http: [//jsfiddle.net/3QuT4/1/](http://jsfiddle.net/3QuT4/1/)

请帮我..

谢谢，

阿曼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T14:42:18.593

您不需要为`<tr>`表的每一行分配唯一的 ID。您可以使用以下选择器来禁用表中的所有输入字段：

```
$('table :input').prop('disabled', true); 
```

请注意，如果您使用[`.prop()`](http://api.jquery.com/prop/)的是 jQuery 1.6 或更高版本，建议使用 using 来禁用字段。[`.attr()`](http://api.jquery.com/attr/)

如果您只想禁用某些行，则将这些行应用到同一类，然后：

```
$('table tr.someClassName :input').prop('disabled', true); 
```

使用 id 并为每个 id 重复相同的 jQuery 选择器似乎是解决问题的一种非常幼稚的方法。

# r - 将数据从 R 导出到电子表格

> ID：12544381
> 
> 赞同：1
> 
> 时间：2012-09-22T13:56:58.293
> 
> 标签：r, quantmod

我正在尝试将股票价格从 R 导出到电子表格。除日期外，一切都正常导出。这些是我正在使用的命令。

编辑：只是为了确认日期没有被导出。

```
library(quantmod)
library(dataframes2xls)
getSymbols("GOOG", from = "2010-01-01", to = "2012-06-30")
write.xls(GOOG, "C:/goog.xls") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T14:04:54.167

你只需要`row.names=TRUE`在你的`write.xls`电话中加入

```
write.xls(GOOG, "C:/goog.xls", row.names=TRUE) 
```

# php - PHP分页计算

> ID：12544386
> 
> 赞同：2
> 
> 时间：2012-09-22T13:57:33.147
> 
> 标签：php, mysql

试图自学如何计算分页索引的概念，我发现了以下文本：

> 例如，我们每页有 10 个，所以每页有 10 个项目。再一次，我们的偏移量计算是每页，即 10，乘以当前页，减 1。如果当前页为 1，则计算结果为偏移量为 0，这意味着记录 1 到 10 将是10，这意味着将返回记录 11 到 20

也许我看错了，但我不明白。

文本指出，使用每页 10 个项目的示例，我们在第一页，公式应该是：

10 * 1 - 1 -> 我的脑筋急转弯应该等于 9，但文字说是 0

他们使用的下一个示例是：10 * 2 - 1 = 10，使用普通数学，那不是 19 吗？

显然我在这里缺少一些东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T13:58:59.063

他们的意思是

```
10 * (1-1) = 0 
```

和

```
10 * (2-1) = 10 
```

最后，这归结为人们从 1 开始计数（第一页是第 1 页），但偏移量从 0 开始。因此，如果您有页码，则需要将其降低一个以获得偏移量number （第一页为 1，第一个偏移量为 0 ）。

这意味着您首先减去（因此是括号）然后乘以。文字有点混乱。

# iphone - 从具有多对多关系核心数据iOS的上下文中删除nsmanagedboject

> ID：12544387
> 
> 赞同：1
> 
> 时间：2012-09-22T13:57:39.517
> 
> 标签：iphone, objective-c, ios, core-data, object-graph

我的模型有 2 个具有多对多关系的实体（类别和新闻）：（这意味着一个类别可能有很多新闻，而一篇新闻文章可能属于一个或多个类别）。

下面是我的设计：

*   **实体 1：**

**类别（属性：categoryID、title、show、position）**以及*与 News Entity 的关系称为“news”。*

“新闻”关系有目的地是“新闻”，反向关系是“类别”，类型对多关系和删除规则是级联的。

*   **实体 2：**

**新闻（属性：newsID、报价、内容、链接）**以及*与称为“类别”的类别实体的关系。*

“类别”关系有目的地是“类别”，反向关系是“新闻”，类型对多关系和删除规则无效。

对象图如下所示：

**新闻 <<------------->> 分类**

**我的问题是：**

**1>** ***我设计的模型好不好？***

**2>**编码到我设计的模型，如果我从它的上下文示例中删除新闻对象，例如：

id newsObjectToDelete = .... [managedObjectContext deleteObject:newsObjectToDelete];

newsObjectToDelete 所属的 Category 对象是否会自动从关系“News”的 NSSet 中移除 newsObjectToDelete。

**3>**如果我想限制一个“新闻”必须属于至少一个“类别”。如何实现该约束

预先感谢。对不起英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:09:44.407

1.  很难说这是否适合您的应用程序，但它看起来是一种非常标准的关系。

2.  如果您删除一个对象，它会自动从所有 Core Data 关系中删除。不要担心对某些已删除对象的悬空引用，Core Data 会为您处理。

3.  Core Data 实际上只能生成错误（并阻止保存）或在保存期间采取一些自动操作。您可以执行以下任一操作：

    *   **在您的数据模型**中：使用数据模型编辑器，取消选中此关系的“可选”，和/或将“最小”计数设置为 1：

        ![核心数据“数据模型检查器”截图](../Images/782f645e4d2248474aace3ad7af50ed2.png)

    *   **在您的“新闻”子类**中：如果您需要更细粒度的控制和/或错误报告，您可以在[验证](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreData/Articles/cdValidation.html#//apple_ref/doc/uid/TP40004807-SW3)期间检查（以生成错误），或者[在保存过程中](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html#//apple_ref/occ/instm/NSManagedObject/willSave)采取一些自动操作。

    请注意，使用验证（在模型或代码中）只会在开发和调试过程中有所帮助 - 调用`-save:`托管对象上下文将失败，返回`NO`并生成错误。这应该是最后的手段，实际上只是为了防止不良数据进入您的持久存储。像这样的验证失败会告诉您代码的某些其他部分是错误的并生成了错误的对象。

# php - 是否可以使用 load() 函数将当前页面变量的值放入 div 内的加载文件中？

> ID：12544388
> 
> 赞同：0
> 
> 时间：2012-09-22T13:57:39.543
> 
> 标签：php, javascript, load

我想使用 load() 函数将我的 search_result.php 文件加载到我的主 php 页面的 div 中。我写了一个解析json代码的函数

```
json_parsing(document.getElementById('start_val').value, <?php echo $jsoncode;?>); 
```

现在我想使用以下代码加载 search_result.php 文件

```
$("#search_result_cont").load("search_result.php"); 
```

它内部的函数从当前网页元素#start_value 和php 变量$jsoncode 中获取值。

可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T15:15:09.260

```
$.get( 'search_result.php'.function(text){
     eval(text); // text is without the script tags
},'text'); 
```

或者

```
$.get( 'search_result.php'.function(json_text){
     json_parsing(document.getElementById('start_val').value, json_text); 
     // json_text is just $jsoncode
},'text'); 
```

另外，当您可以使用 $.parseJSON(text) 和 $.getJSON(); 时，为什么要自己解析 json；通常，像这样的问题表明您正在尝试以一种不好的编程设计方式做某事。

# php - 在 jquery ajax 响应上下载文件

> ID：12544389
> 
> 赞同：0
> 
> 时间：2012-09-22T13:57:40.050
> 
> 标签：php, jquery, ajax, download

我在 ajax 事件的服务器端创建一个 word 文档，如果没有错误，我想将其推送下载作为响应。jquery ajax可以吗？我的代码如下所示

```
 $.ajax({
                       type: "POST",
                       url: 'docsx.php',
                       data: $("#edit_form").serialize(), // serializes the form's elements.
                       success: function(data)
                       {
                        **here should be fired the download** // show response from the php script.
                       },
                       error:function(){

                           alert('Es gibt ein Fehler bei Daten übetragung!');

                        }
                     }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:40:34.900

```
 <div id="Status_Update" title="Update your Status Here">
    <form method="post" action="update_status.php?<?php echo(SID); ?>" name="Status_form" id="Status_form">
      <span id="sprytextfield1">
      <label for="text1"></label>
      <label for="textfield6"></label>
      <textarea class="ns_tb" name="status_update_box" cols="60" placeholder="What is on your mind" style="font-family:'Lucida Sans Unicode', 'Lucida Grande', sans-serif; border: thin solid #0C0; border-radius:9px;"></textarea>
<span class="textfieldRequiredMsg">A value is required.</span></span>
      <input type="submit" name="status_update_button" id="button" value="Post" style=" background-color:#0C0; border-radius:9px;)"/>
      <a href="#" id="hide_status_box" tittle="Hide the Status Comment Box">hide</a>
    </form>
  </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:21:26.963

我自己做过一次：您可以在 php 中生成文件，将其放在服务器上的某个位置，然后返回脚本的路径。接下来，创建一个隐藏的 iframe 并调用一个简单的脚本，该脚本只读取文件并返回它并设置适当的标头以强制下载。结果将是没有页面刷新的强制下载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T14:23:18.213

您不能使用 javascript 触发下载。只是不要为此目的使用 AJAX。使用标准表单提交到`docsx.php`脚本：

```
<form action="docsx.php" method="post">
    ... some input fields

    <input type="submit" value="Download" />
</form> 
```

# wordpress - 将 Wordpress 管理员选项限制为管理员

> ID：12544390
> 
> 赞同：0
> 
> 时间：2012-09-22T13:57:52.633
> 
> 标签：wordpress

我认为这将是一件容易的事情，但许多小时过去了，仍然没有结果。

我正在创建一个 Wordpress 插件，如果用户是管理员，它应该只出现在仪表板中。我将钩子包裹在 is_admin() 方法中，但是当我以订阅者身份登录时，我仍然可以看到菜单。

难道就这么简单吗？？？

这是一个代码，除了从评论部分的正下方开始注册插件......所有没有显示的只是功能在做他们的工作......

```
if( is_admin ){ 

add_action('admin_menu', 'ppm_talentexpo_add_page');
add_action('admin_menu', 'ppm_expos_submenu');

} // end is_admin

function ppm_talentexpo_add_page() {
    $mypage = add_menu_page('Talent Expo', 'Talent Expos', 2, 'ppmtalentexpo', 'jwg_talentexpo_options_main_page', '/wp-admin/images/media-button-music.gif' , 21);
    add_action( "admin_print_scripts-$mypage", 'jwg_ppmtalentexpo_admin_head' );
} // end function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:26:22.473

在条件中调用 is_admin 时，您似乎省略了括号。
尝试

```
if( is_admin() ){
    add_action('admin_menu', 'ppm_talentexpo_add_page');
    add_action('admin_menu', 'ppm_expos_submenu');
} 
```

此外，如果您没有使用较旧的 WordPress 安装，则`add_menu_page`允许您指定 WordPress 将检查的功能。这让 WordPress 可以管理是否显示该项目。
因此，您可以定义自定义功能（或重用现有功能），菜单应自行处理。

```
add_action('admin_menu', 'ppm_talentexpo_add_page');
add_action('admin_menu', 'ppm_expos_submenu');

function ppm_talentexpo_add_page() {
    $mypage = add_menu_page('Talent Expo', 'Talent Expos', 'my_custom_talent_expos_capability', 'ppmtalentexpo', 'jwg_talentexpo_options_main_page', '/wp-admin/images/media-button-music.gif' , 21);
    add_action( "admin_print_scripts-$mypage", 'jwg_ppmtalentexpo_admin_head' );
} 
```

# actionscript - ActionScript 在 iOS 上获取崩溃调用堆栈

> ID：12544391
> 
> 赞同：0
> 
> 时间：2012-09-22T13:57:56.727
> 
> 标签：actionscript, air

我正在使用 Adob​​e Air3.4 在 iOS 上开发应用程序。但是，我只在发布版本上遇到了崩溃，并且在调试版本上不会发生这种崩溃。但我无法从 iOS 获取任何崩溃信息，例如调用堆栈。你有什么方法来处理这种问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:02:55.603

您可以将有问题的代码包装在 try/catch 语句中。在 catch 代码块中，您会获得一个[Error](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Error.html)对象，您可以使用它来获取堆栈跟踪：

```
try
{
    // some code that throws an exception
}
catch (e:Error)
{
    trace(e.getStackTrace())
} 
```

如果您不知道哪个代码导致了错误，因此不知道在哪里添加 try/catch 语句，您可能会对[UncaughtErrorEvent](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/UncaughtErrorEvent.html)`UncaughtErrorEvent`感到幸运——请参阅我链接到的文档底部的示例.

事实上，如果您只需要一般的堆栈跟踪，请创建一个新`Error`对象并`getStackTrace()`在代码中的任何位置使用它的方法。

除了检查上述错误之外，您还应该[检查设备上的崩溃日志](http://www.ondemandworld.com/how-to-find-crash-logs/)，看看是否提供了任何其他详细信息。

# php - Wordpress：单击标题时仅自动显示一篇文章

> ID：12544401
> 
> 赞同：0
> 
> 时间：2012-09-22T13:59:41.923
> 
> 标签：php, wordpress

我正在寻找大约 4 个小时的解决方案，我不能（不想）在这个特定问题上投入更多时间。我的问题是我想让 wordpress 完全正常工作。（几乎）一切都很好：我可以显示所有帖子或只显示一个定义的数字，但我无法弄清楚如何只显示用户点击的帖子（在标题或阅读更多内容上）$_GET-显示的数据是 'p' => 显示后 ID（例如 35,11 等）

这是一个简单的例子：（我参加了没有成功的部分）

```
echo $_GET['p'].'<br>';
                if(!isset($_GET['p'])) :
                    $myposts = get_posts();
                else :
                    $args = array( 'numberposts' => 1, 'offset'=> $_GET["p"]);
                    $myposts = query_posts($args);
                endif;
                $index = 0;
                foreach($myposts as $post) :
                    setup_postdata($post);
                    ?>
                    <div class="article">
                        <p class="title">
                            <?php the_title(); ?>
                        </p>
                        <span class="date-block">
                            <p class="day"><?php the_time('j'); ?></p>
                            <p class="year"><?php the_time('Y'); ?></p>             
                            <p class="month"><?php the_time('F'); ?></p>
                        </span>
                        <p>
                            <?php the_content(); ?>
                        </p>
                    </div>
                <?php
                    endforeach; wp_reset_postdata();
                ?> 
```

请帮助我，我想我给了你所有需要的信息。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:43:18.157

最后我得到了它的工作：它实际上很简单（总是更难找到..）对于其他有同样问题的人，这里是解决方案：

```
$post_id = $_GET['p'];
$queried_post = get_post($post_id);
the_title();
echo $queried_post->post_content;
$posttags = get_the_tags($post_id);
if ($posttags)
foreach($posttags as $tag)
echo $tag->name; 
```

# java - Java swing UI 布局名称

> ID：12544405
> 
> 赞同：2
> 
> 时间：2012-09-22T14:00:02.400
> 
> 标签：java, swing, user-interface

你好，这让我发疯了！我正在使用 java swing，但我不知道列表和文本区域之间的滑动事物的名称！

一个名称和一些关于如何实现它的信息将不胜感激。

![在此处输入图像描述](../Images/92f3d5673152189dae96a23de83569d6.png)

# wpf - 无法让双向绑定工作:)

> ID：12544408
> 
> 赞同：0
> 
> 时间：2012-09-22T14:00:40.650
> 
> 标签：wpf, data-binding, two-way

我有一个项目，它设置了用于监视的动态选项卡，因此托管了几个“身份”对象，这些对象是 INotifyPropertyChanged 并且在虚拟应用程序中测试时单独工作。但是，我无法让绑定在我正在处理的应用程序中正常工作。它们已设置，即：

```
(Configuration.Identities is an ObservableCollection<Identity>)
foreach (Identity id in Configuration.Identities)
{

   workTab = new TabItem();
   workSettingsTab = new SettingsTabItem();

   workTab.DataContext = id;
   Binding workTabHeaderBinding = new Binding("Username");
   workTabHeaderBinding.Converter = new ToLowerConverter();
   workTab.SetBinding(TabItem.HeaderProperty, workTabHeaderBinding);

   workSettingsTab.DataContext = id;
   Binding workSettingsTabHeaderBinding = new Binding("Username");
   workSettingsTabHeaderBinding.Converter = new ToUpperConverter();
   workSettingsTab.SetBinding(TabItem.HeaderProperty, workSettingsTabHeaderBinding); 
```

上面的这个东西很好用，大概是因为它是单向的。但是这两个只能单向工作：

```
workSettingsTab.txtUsername.DataContext = id;
Binding usernameBinding = new Binding("Username");
usernameBinding.Mode = BindingMode.TwoWay;
workSettingsTab.txtUsername.SetBinding(TextBox.TextProperty, usernameBinding);

Binding getJournals = new Binding("LoadJournals");
scrapeJournals.Mode = BindingMode.TwoWay;
workSettingsTab.chkScrapeJournals.DataContext = id;

workSettingsTab.chkScrapeJournals.SetBinding(CheckBox.IsCheckedProperty, scrapeJournals); 
```

我注意到在调试我的保存例程时，上述控件中 DataContext 中引用的 Identity 对象确实包含更改的值，但是我在上面的 foreach 中使用的 ObservableCollection 中的那个没有更新。因此，不知何故，Identity 对象是从最初用于在 foreach 期间设置 DataContext 属性的对象中复制而来的。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T00:33:38.557

正确的。我无法理解这一点，但到目前为止：

```
 ObservableCollection<SwitchClass> col2 = new ObservableCollection<SwitchClass>();
        col2.Add(new SwitchClass{theSwitch=false});
        col2.Add(new SwitchClass{theSwitch=true});
        col2.Add(new SwitchClass{theSwitch=false});
        col2.Add(new SwitchClass{theSwitch=true});

        customTab cTab;
        Int32 z = 0;
        Binding b;
        foreach (SwitchClass s in col2)
        {
            cTab = new customTab();
            cTab.theCheckbox.DataContext = s;
            b = new Binding("theSwitch");
            b.Mode = BindingMode.TwoWay;
            cTab.SetBinding(CheckBox.IsCheckedProperty, b);
            cTab.Header = "Tab " + z.ToString();
            z++;
            tabControl.Items.Add(cTab);
        } 
```

不起作用，但是：

```
 ObservableCollection<SwitchClass> col2 = new ObservableCollection<SwitchClass>();
        col2.Add(new SwitchClass{theSwitch=false});
        col2.Add(new SwitchClass{theSwitch=true});
        col2.Add(new SwitchClass{theSwitch=false});
        col2.Add(new SwitchClass{theSwitch=true});

        customTab cTab;
        Int32 z = 0;
        foreach (SwitchClass s in col2)
        {
            cTab = new customTab();
            cTab.DataContext = s;
            cTab.Header = "Tab " + z.ToString();
            z++;
            tabControl.Items.Add(cTab);
        } 
```

和

```
<CheckBox Name="theCheckbox" Width="200" Height="50" Content="Checkbox" IsChecked="{Binding theSwitch}" /> 
```

完美运行。我想这只是 WPF 的一个限制？

# eclipse - 升级到 Eclipse Juno 后，Facelets 页面中的更改在项目重新启动之前不会反映

> ID：12544409
> 
> 赞同：0
> 
> 时间：2012-09-22T14:00:58.700
> 
> 标签：eclipse, jsf, facelets

升级到 Eclipse Juno 后，当我修改 Facelets 页面时，我必须重新运行项目才能看到修改。这是如何引起的，我该如何解决？

# asp.net-mvc - 如何在 mvc3 中使用数据列表

> ID：12544413
> 
> 赞同：-1
> 
> 时间：2012-09-22T14:01:50.603
> 
> 标签：asp.net-mvc, asp.net-mvc-3, data-binding

我是 mvc 的新手。我正在使用 mvc 项目。这是一个购物车项目。在 asp.net web 表单中，我们使用了数据列表控件，并且我们还设置了一个 RepeatColumns 属性，例如 5、10、20。MVC 中的替代方法是什么？我也可以在 MVC 中使用相同的控件吗？

那么谁能告诉我如何在数据列表控件中显示我的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:10:24.617

要在一行中有五个产品图像，您可以使用两个循环并以剃刀语法执行此操作....

```
<div>
<table>
@for(int i = 0; i <= (Model.Count - 1) / 5; ++i)  /*Five is no of product record count per row*/
{
 <tr>
 for(int j = 0; j < 5 && i + j < Model.Count; ++j) {
  <td style="width:240px;margin-left:30px; margin-right:30px;"> /*Adjust based on your HTML and CSS requeirment*/
   <img src="@Product.ImageSource" alt="drawing" />
   <Div>@Product.Title</Div>     
  </td>
 }
 </tr>
}
</table>
</div> 
```

以上可用于每行生成 5 个产品图像....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:04:16.867

well theoretically there are no server controls available in asp.net MVC.. For learning you can check what are the [other differences in asp.net web form and MVC](http://codebetter.com/karlseguin/2010/03/11/webforms-vs-mvc-again/) peradigm and must read [this link](http://ofps.oreilly.com/titles/9781449320317/ch_MvcForWebFormsDevs.html). So you get overview what you can do and can't in MVC.

Now to display repeatable data in MVC you need to use LOOP and presant usign HTML helpers. You can adopt RAZOR syntax or Asp.net Syntax to show the data.

E.g in Razor you can have something like following to mimic the Repeater requirements.

```
<div class="container">
    <header>
        <h3>Auctions</h3>
    </header>

    <ul id="auctions">

    @foreach(var auction in Model.Auctions) {
        <li>
            <h4 class="title">
                <a href="@auction.Url">@auction.Title</a>
            </h4>
        </li>
    }

    </ul>
</div> 
```

TO quickly learn what is MVC and how to do Bookbinding you can refer [Music Store tutorial](http://www.asp.net/mvc/tutorials/mvc-music-store) by Microsoft that explains basic necessarily things for MVC learner.

You question is little off topic but I love to answer them. ;) Happy coding

# actionscript-3 - ActionScript 框架元数据不起作用

> ID：12544415
> 
> 赞同：1
> 
> 时间：2012-09-22T14:01:52.443
> 
> 标签：actionscript-3, flash-builder

我知道有很多关于 ActionScript 中 Frame 元数据标签的帖子，但我仍然没有找到我的问题的答案。

问题是，我在 Main 类标题上方指定了一个 Frame 元数据标记：

```
package gameUI {
...
    [Frame(factoryClass="gameUI.MyPreloader")]
    public class Main extends Sprite { 

        public function Main()
        {
            if (stage)
                init();
            else
                addEventListener(Event.ADDED_TO_STAGE, init);
        }

        private function init(e:Event = null):void
        { ... 
```

我在同一个包（gameUI）中还有一个预加载器类，名为 MyPreloader.as

```
package gameUI
{
    // imports..

    public class MyPreloader extends MovieClip 
    {
        // private vars ..

        public function MyPreloader() 
        {
            trace('preloader START');
            ... 
```

在我的 IDE 中，我没有收到任何错误或警告。它编译没有问题。但是当我运行它时，它只是跳过 Frame 元标记并运行 Main 类的代码。（MyPreloader 的构造函数中的跟踪永远不会打印出来）。

我在想它可能与编译器设置中指定的一些参数有关。我已经尝试了一些东西，额外的编译器参数，但它从来没有奏效。

有谁知道他为什么忽略 Frame 元标记？我现在真的很沮丧。。

我正在使用 Flash Builder 4.6。使用 Flex SDK 4.6 编译。

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-22T15:48:57.403

你的主类是一个精灵，所以它不能有两个框架。这可能是您问题的一部分。

但是，您可能可以使用更易于调试的流程来实现最终目标。例如，这是[一种方法](http://www.8bitrocket.com/2008/04/22/tutorial-preloading-actionscript-3-as3-games-in-flash-cs3/)。我个人通常只是将我的默认导出帧设置为 10，在第 1 帧上放置一个微调器并发出一个 play()。

唯一需要在第 1 帧上编译的资源位于微调器中。然后它会在微调器旋转和资产加载时暂停（因为它必须加载那里编译的所有内容才能继续）。加载完所有资源后，它自然会前进到第 10 帧。我将在第 10 帧的时间线上有一个实例，它具有关联的 getter 和 setter，因此当 setter 触发时，我知道加载已完成。

我只检查“在第 10 帧中导出”以获取绝对必须在启动时加载的资产（例如，在时间线上从未使用过的声音或视觉对象）。

这种方法的优点是您可以更早地获得真实内容（因为只有在默认框架上编译的资产必须加载才能显示任何内容），但缺点是显示 % 进度没有意义，因为您不知道电影在第 10 帧上编译的百分比是多少，需要在开始之前加载。

所以，总结一下：

1.  尝试为您的 fla 制作基类作为 MovieClip
2.  如果这不起作用，请考虑改变方法

# objective-c - 从 NSInteger 之间的除法中获取浮点数

> ID：12544417
> 
> 赞同：2
> 
> 时间：2012-09-22T14:02:16.977
> 
> 标签：objective-c, floating-point, nsinteger

我有两个名为“domande”和“corrette”的 NSInteger 变量。我必须和他们一起执行这个操作：corrette*10/domande。我希望结果是一个浮点变量，所以我声明了一个“voto”变量：“float voto = corrette*10/domande;” . 当我用 NSLog 输出“voto”的值时，我得到了结果的近似值，后跟“.000000”。

这是代码：

```
NSInteger domande = [numDomande integerValue];
NSInteger corrette = [numRisposteCorrette integerValue];
float voto = corrette*10/domande;
NSLog(@"float value is: %f", voto); 
```

当我为“domande”分配值 7 并为“corrette”分配 4 值时： voto=5.000000 相反，它应该是 voto=5.71 ...

如何让除法返回不是转换为浮点的整数类型，而是直接返回浮点类型？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-22T14:14:55.767

最简单的方法是：

```
float voto = 10.0f * corrette / domande; 
```

通过使第一个参数 a `float`，您可以保证其他参数也将被提升，并且中间和最终结果不会被截断。

`corrette`您可以通过转换为 a来获得类似的结果，`float`但我倾向于尽可能简单。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-22T14:15:32.173

与其将整数转换为浮点数，不如一开始就得到浮点数：

```
CGFloat domandeFloat = [numDomande floatValue];
CGFloat corretteFloat = [numRisposteCorrette floatValue];
CGFloat voto = (corretteFloat / domandeFloat) * 10.0f
NSLog(@"float value is: %f", voto); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-08T13:25:57.620

NSInteger 没有称为 floatValue 的方法。NSInteger 只是一个整数。相反，解决方案是：

```
CGFloat domandeFloat = [[NSNumber numberWithInt: numDomande] floatValue];
CGFloat domandeFloat = [[NSNumber numberWithInt: numRisposteCorrette] floatValue];
CGFloat voto = (corretteFloat / domandeFloat) * 10.0f; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-22T14:05:42.500

尝试先将 NSIntegers 转换为浮点类型：

```
float voto = (float)corrette*10/(float)domande; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T14:05:59.163

您可以将“10”从 int 转换为 float，方法是将其写为“10.0”

```
 float voto = corrette*10.0/domande; 
```

或者

```
float voto = ((float)corrette*10) / (float)domande; 
```

操作“/”返回它的操作数类型 - 5/4 将返回 int 结果 1，因为 5 和 4 是 int，而 5.0/4.0 将返回 1.25，因为 5.0 和 4.0 被解释为浮点值。所以你应该手动转换输入变量的类型`corrette`并`domande`浮动

# jquery - Jquery多个Slidetoggle导致页面抖动

> ID：12544419
> 
> 赞同：0
> 
> 时间：2012-09-22T14:02:25.003
> 
> 标签：jquery, html, css

我制作了一个网页，其中有 5 个 div 堆叠在一起。有 5 个隐藏的 div，当单击 div 时，我会使其可见。问题是，当溢出时，浏览器窗口中会出现一个滚动条，并且整个内容会闪烁并向左移动。当溢出无效时，内容再次移回其原始位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T14:34:37.937

如果将body标签的overflow设置为滚动，会一直显示滚动条。这样当你越过折叠时滚动条就不会出现，它已经在那里了......

```
body{
   overflow-y: scroll;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T17:30:12.580

当您的页面高度增加并且您的浏览器显示垂直滚动条时，就会出现此问题。解决此问题的最佳方法是在页面加载时扩展您的一项技能 div 以使浏览器滚动条可见

# plist - Xcode：部分中的行数

> ID：12544422
> 
> 赞同：-1
> 
> 时间：2012-09-22T14:03:36.080
> 
> 标签：plist, nstableview

我有一个 plist 字典，里面有几个这样的数组：

```
<dict>
    <key>DebtA</key>
    <array>
        <dict>
            <key>name</key>
            <string>NameA</string>
            <key>tel</key>
            <string>11111111</string>
            <key>email</key>
            <string>namea@abc.com</string>
        </dict>
    </array>
    <key>DebtB</key>
    <array>
        <dict>
            <key>name</key>
            <string>NameB1</string>
            <key>tel</key>
            <string>22222222</string>
            <key>email</key>
            <string>nameb1@abc.com</string>
        </dict>
        <dict>
            <key>name</key>
            <string>NameB2</string>
            <key>tel</key>
            <string>22222223</string>
            <key>email</key>
            <string>nameb2@abc.com</string>
        </dict>
    </array>

.. more arrays

</dict> 
```

我想要实现的是，在表格视图中，部分中的行数等于辅助数组的项目数。

我尝试了以下方法，但没有成功。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [[[afdDict allKeys]objectAtIndex:section]numberOfItems];
} 
```

我如何获得给定数组的项目数（例如，在 DebtA 中，一个。在 DebtB 中，两个）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T14:25:49.607

```
return [[[afdDict allValues] objectAtIndex:section] count]; 
```

# iphone - pickerview selectedRowInComponent 总是返回 0

> ID：12544425
> 
> 赞同：0
> 
> 时间：2012-09-22T14:03:39.393
> 
> 标签：iphone, ios, uipickerview

我正在使用 selectedRowInComponent 方法获取索引为 0 的组件上当前选定的行，但它始终返回 0。我已将其签入

```
 NSLog("%d",[pickerview selectedRowInComponent:0]); 
```

当我以编程方式使用选择器视图时，我已经初始化了选择器。请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T22:56:19.563

我希望这段代码对你有帮助。我在我的项目中使用它，它工作得很好。

将此函数称为 ViewDidLoad

```
[self loadFirstPicker]; 
```

下面是制作 UIpicker 的函数，它只显示时间。（并保存在文本字段中）

```
-(void)loadFirstPicker
{
    UIDatePicker *picker = [[UIDatePicker alloc] init];
    picker.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    picker.datePickerMode = UIDatePickerModeTime;

    [picker addTarget:self action:@selector(dueDateChanged:) forControlEvents:UIControlEventValueChanged];
    CGSize pickerSize = [picker sizeThatFits:CGSizeZero];
    picker.frame = CGRectMake(0.0, 250, pickerSize.width, 460);
    picker.backgroundColor = [UIColor blackColor];
    checkEveryTextFeild.inputView = picker;

    //[self.view addSubview:picker];
    //[picker release];

    // Create done button in UIPickerView
    UIToolbar*  mypickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 220, 56)];
    mypickerToolbar.barStyle = UIBarStyleBlackOpaque;
    [mypickerToolbar sizeToFit];

    NSMutableArray *barItems = [[NSMutableArray alloc] init];

    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
    [barItems addObject:flexSpace];

    UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(pickerDoneClicked)];
    [barItems addObject:doneBtn];

    [mypickerToolbar setItems:barItems animated:YES];
    checkEveryTextFeild.inputAccessoryView = mypickerToolbar;
} 
```

此函数从选择器获取时间并将其设置为 textFeild

```
-(void) dueDateChanged:(UIDatePicker *)sender {

    NSDateFormatter* dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
    [dateFormatter setDateFormat:@"HH:mm:ss"];
    //[dateFormatter setTimeStyle:NSDateFormatterNoStyle];

    checkEveryTextFeild.text = [dateFormatter stringFromDate:[sender date]];
    NSDate *currentDate = [NSDate date]; 
    NSLog(@"%@",currentDate);
    NSLog(@"Picked the date %@", [dateFormatter stringFromDate:[sender date]]);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T20:28:17.340

您可能想尝试同时设置它们。第二行将检索该类检测到的pickerview：

```
[filterPicker selectRow:selectedPickerIndex inComponent:0 animated:NO];

[self pickerView:filterPicker didSelectRow:selectedPickerIndex inComponent:0];

self.personInfoPicker.delegate = self;
self.personInfoPicker.dataSource = self;
[self.personInfoPicker reloadAllComponents]; 
```

# java - 卡尺：解释基准测试结果

> ID：12544426
> 
> 赞同：3
> 
> 时间：2012-09-22T14:03:43.480
> 
> 标签：java, caliper

谁能帮我解决这个问题。我用单一方法编写简单的基准测试

```
public void timeIntArrayBlockingQueue(int reps) {
  for (int i = 0; i < reps; i++) {
    for (int j = 0; j < length; j++)
       queue.add(data[j]);
       Integer value;
       while ((value = queue.poll()) != 101) {}
    }
} 
```

对于 ArrayBlockingQueue 并获得结果：

```
0% Scenario{vm=java, trial=0, benchmark=IntArrayBlockingQueue, length=100} 5480.41 ns; σ=311.51 ns @ 10 trials

33% Scenario{vm=java, trial=0, benchmark=IntArrayBlockingQueue, length=1000} 56579.97 ns; σ=5530.23 ns @ 10 trials

67% Scenario{vm=java, trial=0, benchmark=IntArrayBlockingQueue, length=10000} 553782.25 ns; σ=27212.56 ns @ 10 trials

length     us linear runtime
   100   5.48 =
  1000  56.58 ===
 10000 553.78 ==============================

vm: java
trial: 0
benchmark: IntArrayBlockingQueue 
```

这个数字（5480.41ns 56579.97ns 553782.25ns）的确切含义。

0% 场景方法 timeIntArrayBlockingQueue 被调用 10 次，参数长度 = 100。
(timeIntArrayBlockingQueue(100) - 10 次)

33% 场景方法 timeIntArrayBlockingQueue 被调用 10 次，参数长度 = 1000。(timeIntArrayBlockingQueue(1000) - 10 次)。.

如何解释这个基准的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T21:46:56.480

百分比只是进度，即之后没有什么有趣的。

> 这个数字（5480.41ns 56579.97ns 553782.25ns）的确切含义。

这是单次迭代的平均持续时间，即`timeXXX`除以的持续时间`rep`。

是[标准](http://en.wikipedia.org/wiki/Standard_deviation)`σ=311.51 ns`差。绝对错误，如果接近一个，你可以确定那是错误的。`σ/measured_time`

> 基准=IntArrayBlockingQueue，长度=100

这就是基准的名称是给定的参数，例如 via `@Param`。

* * *

### 重要的部分

不要让你`timeXXX`的方法什么都不返回，而是计算并返回一些结果，这样你就可以确定不是整个计算都被优化了。你方法的主体应该是这样的

```
...
while ((value = queue.poll()) != 101) {
    result += value;
} 
```

单次加法`Integer.getValue()`几乎不能使它变慢。它确实有点，但基准测试以这种方式变得更加现实（你使用轮询值，不是吗）。通常，您希望运行多个基准测试并比较它们的结果，以便您可以选择最快的变体（实际上，通常您不需要任何基准测试）。

你的循环很奇怪，无论如何，队列中通常只有一个元素......

# php - 如何使用查询在 mysql 表中插入 html 代码

> ID：12544427
> 
> 赞同：0
> 
> 时间：2012-09-22T14:03:42.413
> 
> 标签：php, mysql

```
 INSERT INTO Products  (Backorderable , CategoryID , Cost , CostExTax , DetPage , Enabled , FreightMode , ImageFile , Inventory , LongDescription , LongDescriptionMode , PerUnitShippingCharge1 , PerUnitShippingCharge2 , PerUnitShippingCharge3 , PerUnitWeight , ProductCode , ProductColor , ProductName , ProductSize , QBModified , Service , ShortCode , ShortDescription , ShortDescriptionMode , UseColor , UseSize , PageTitle , MetaDescription , MetaKeywordList , UseDefaultPageTitle , UseGlobalMetaDesc , UseGlobalMetaKeywords , SortOrder , PlainTextDescription , IncludeInFeeds , Available , HidePrice , HideBuyButton , UnavailableMessage , dtModified , ProductID , RRP ) VALUES (0, NULL, 199, 0, -1, -1, NULL, N'images/stories/virtuemart/product/slice.jpg', 0, N'<P class=MsoNormal><SPAN style="FONT-FAMILY: Arial; FONT-SIZE: 10pt">The SLICE™ Fabrique is a revolutionary fabric-cutting tool that makes quilting easier. </SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: Arial; FONT-SIZE: 10pt">Don't spend hours cutting intricate designs with scissors when you can save time by allowing the </SPAN><SPAN style="FONT-FAMILY: Arial; FONT-SIZE: 10pt">SLICE™&lt;/SPAN><SPAN style="FONT-FAMILY: Arial; FONT-SIZE: 10pt"> Fabrique to do all the work for you. The </SPAN><SPAN style="FONT-FAMILY: Arial; FONT-SIZE: 10pt">SLICE™&lt;/SPAN><SPAN style="FONT-FAMILY: Arial; FONT-SIZE: 10pt"> Fabrique works with design cards specifically customized for fabric so you can cut alphabets, numbers, flowers, icons, basic shapes, and more.</SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: Arial; FONT-SIZE: 10pt">Apply a fusible web to your cotton fabric, felt or flannel and you are ready to start Slicing. If you can imagine it, you can </SPAN><SPAN style="FONT-FAMILY: Arial; FONT-SIZE: 10pt">SLICE™&lt;/SPAN><SPAN style="FONT-FAMILY: Arial; FONT-SIZE: 10pt"> it.<SPAN>&nbsp; </SPAN></SPAN></P>
<P class=MsoNormal><SPAN style="FONT-FAMILY: Arial; FONT-SIZE: 10pt">The </SPAN><SPAN style="FONT-FAMILY: Arial; FONT-SIZE: 10pt">SLICE™&lt;/SPAN><SPAN style="FONT-FAMILY: Arial; FONT-SIZE: 10pt"> Fabrique is unlike anything you have ever seen. It's a one-of-a-kind tool that fits within everybody's budget. Save time and money while creating projects that will last a lifetime. </SPAN></P><SPAN style="FONT-FAMILY: Arial; FONT-SIZE: 10pt">
<DIV><FONT size=2 face=Arial>The Machine comes with 3 replacement blades, blade adjustment wrench, 6x6" glass cutting mat, repostitionable adhesive, foam brush, 3- 6x6" fusable web sheets, quick start guide, apllique basics SD design card, design card book.</FONT></DIV></SPAN>
<P class=MsoNormal><SPAN style="FONT-FAMILY: Arial; FONT-SIZE: 10pt"></SPAN>&nbsp;</P>', NULL, 0, 0, 0, 0, N'37013', NULL, N'Slice Fabrique RRP $250.00', NULL, 0, 0, N'', NULL, NULL, 0, 0, N'', NULL, NULL, -1, -1, -1, NULL, NULL, -1, -1, 0, 0, NULL, NULL, 51, NULL); 
```

我想将此记录插入到 mysql 表中，但由于斜线问题，它没有插入问题是我不能使用 mysql_real_escape_string 我必须手动删除每个引号**mysql 中可以为我做的任何函数......我有成千上万条这样的记录**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:11:34.110

不要——我再说一遍不要把那些东西放到数据库中。只需将数据放入其中。然后在提取它时，您可以在它周围放置 HTML/CSS 的花里胡哨。

# php - 获取位置的纬度和经度

> ID：12544428
> 
> 赞同：0
> 
> 时间：2012-09-22T14:04:13.223
> 
> 标签：php, curl, geomap

我正在使用 curl 来获取特定位置的纬度和经度。即使到今天早上，我也得到了正确的回应。但现在我得到了一些状态，比如“OVER_QUERY_LIMIT”。如果我从不同的文件运行相同的代码，那么它就可以工作。我的代码是这样的：

```
$last_url = "http://maps.google.com/maps/api/geocode/json?     address=44+Church+st++Parramatta+2150+Australia&sensor=false";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $last_url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
/*curl_setopt($ch, CURLOPT_PROXYPORT, 3128);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);*/
$response = curl_exec($ch);
//echo "++++++++++";
echo $response;
curl_close($ch);

$output = json_decode($response);
echo $lat = $output->results[0]->geometry->location->lat;
echo  $long = $output->results[0]->geometry->location->lng; 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:05:30.033

问题很明显，不是吗？您每天只能进行一定数量的查询。还有一个速率限制。你超越了这些限制之一。如果它在一个脚本而不是另一个脚本中工作，您可能会达到速率限制。等待几分钟，然后重试。

[https://developers.google.com/maps/documentation/geocoding/#Limits](https://developers.google.com/maps/documentation/geocoding/#Limits)

# bash - bash 输入/输出重定向不起作用

> ID：12544429
> 
> 赞同：0
> 
> 时间：2012-09-22T14:04:19.097
> 
> 标签：bash, cut, io-redirection

谁能告诉我以下 bash 代码有什么问题

```
for f in $FILES
do
  cut -d, f1-7 < $f > $f.tmp
done 
```

当我在循环中运行时

```
echo "cut -d, f1-7 < $f > $f.tmp" 
```

我得到了正确的命令输出，当我自己运行该命令时，它运行良好。但是当我在 bash 循环中运行它时，它不起作用，我收到以下错误：

```
cut: you must specify a list of bytes, characters, or fields
Try `cut --help' for more information. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T14:10:17.007

我认为您在 cut 命令中遗漏了一个减号：

```
cut -d, -f1-7 < $f > $f.tmp 
```

# ios - 在显示之前获取 UITableViewCell 的 contentView 的实际宽度

> ID：12544432
> 
> 赞同：0
> 
> 时间：2012-09-22T14:04:48.727
> 
> 标签：ios, uitableview

我有一个带有自定义单元格的分组表视图（通过子类化以编程方式创建，而不是使用 IB）。为了正确定位自定义单元格的子视图（例如标签和文本字段），我需要在`contentView`单元格显示之前知道单元格的当前宽度（考虑到表格视图中的实际单元格宽度可以改变（根据屏幕方向，模态演示风格等））。

如果我在自定义单元格类中重写该`layoutSubviews`方法，它可以完美运行，但可以经常调用，因此每次调用它时我都必须重新定位我的子视图，即使没有必要这样做。

请推荐我更优雅的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T14:33:15.280

推荐的方法是设置`autoresizingMask`表格单元格的 。如果您需要对布局进行更多控制，可以将最后使用的视图宽度存储在成员变量中，并且仅在与当前视图宽度不同时才布局子视图。

# java - 在java中解析mbox文件

> ID：12544433
> 
> 赞同：2
> 
> 时间：2012-09-22T14:04:49.757
> 
> 标签：java, email, parsing, mbox, mime4j

我从 下载了一个邮件列表存档`SourceForge`。每个邮件列表都会自动归档到 mbox 文件中。所以现在我需要从`mbox file`using中提取身体`Java`。里面有`mailbox parser`吗`Java`？

谢谢

# c# - Underyling 表单消失但仅在显示对话框时

> ID：12544436
> 
> 赞同：2
> 
> 时间：2012-09-22T14:05:00.187
> 
> 标签：c#, winforms, vb6, com-interop, z-order

这与通过互操作显示 C# 表单的 VB6 应用程序有关。

C# 窗体中的事件会导致显示其中一个 VB6 应用程序窗体。

通常，当这个 VB6 表单被隐藏（`Form.Hide`）时，底层的 C# 表单被带到前面。

但是，如果 VB6 窗体在其生命周期内导致 a`MsgBox`被显示，那么当 VB6 窗体被隐藏时，底层 C# 窗体将不会位于最前面。

为什么会这样？就像`MsgBox`正在改变表格的 Z 顺序一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T04:11:19.347

*“如何在隐藏 VB6 后使 C# 窗体显示？我必须使用窗口句柄吗？”*

假设您对孤立的 msgbox 保持打开状态感到满意。当 VB6 窗体被隐藏时，您需要触发一个事件来获取窗口句柄：

```
public static int FindWindow(string windowName, bool wait)
{
    int hWnd = FindWindow(null, windowName);
    while (wait && hWnd == 0)
    {
         System.Threading.Thread.Sleep(500);
         hWnd = FindWindow(null, windowName);
    }

    return hWnd;
} 
```

然后将 C# 窗口置于顶部：

```
[DllImport("user32.dll", SetLastError = true)]
public static extern uint GetWindowThreadProcessId(IntPtr hWnd, out uint lpdwProcessId);

// When you don't want the ProcessId, use this overload and pass IntPtr.Zero for the second parameter
[DllImport("user32.dll")]
public static extern uint GetWindowThreadProcessId(IntPtr hWnd, IntPtr ProcessId);

[DllImport("kernel32.dll")]
public static extern uint GetCurrentThreadId();

/// <summary>The GetForegroundWindow function returns a handle to the foreground window.</summary>
[DllImport("user32.dll")]
public static extern IntPtr GetForegroundWindow();

[DllImport("user32.dll")]
public static extern bool AttachThreadInput(uint idAttach, uint idAttachTo, bool fAttach);

[DllImport("user32.dll", SetLastError = true)]
public static extern bool BringWindowToTop(IntPtr hWnd);

[DllImport("user32.dll", SetLastError = true)]
public static extern bool BringWindowToTop(HandleRef hWnd);

[DllImport("user32.dll")]
public static extern bool ShowWindow(IntPtr hWnd, uint nCmdShow);

private static void ForceForegroundWindow(IntPtr hWnd)
{
    uint foreThread = GetWindowThreadProcessId(GetForegroundWindow(), IntPtr.Zero);
    uint appThread = GetCurrentThreadId();
    const uint SW_SHOW = 5;

    if (foreThread != appThread)
    {
        AttachThreadInput(foreThread, appThread, true);
        BringWindowToTop(hWnd);
        ShowWindow(hWnd, SW_SHOW);
        AttachThreadInput(foreThread, appThread, false);
    }
    else
    {
        BringWindowToTop(hWnd);
        ShowWindow(hWnd, SW_SHOW);
    }
} 
```

参考：[SetForegroundWindow Win32-API 并不总是适用于 Windows-7](http://www.shloemi.com/2012/09/solved-setforegroundwindow-win32-api-not-always-works/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-18T06:51:58.133

我通过使用[NativeWindow](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28%22SYSTEM.WINDOWS.FORMS.NATIVEWINDOW.#CTOR%22%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)类使其工作，遵循此线程中的最后一个答案：http: [//social.msdn.microsoft.com/Forums/en-US/2692df26-317c-4415-816b-d08fe6854df8/vbnet-vb6 -win32-api-problems?forum=vbinterop](http://social.msdn.microsoft.com/Forums/en-US/2692df26-317c-4415-816b-d08fe6854df8/vbnet-vb6-win32-api-problems?forum=vbinterop)

该代码用于`FindWindowEx`获取`VB6`窗口的句柄，这是不必要的，因为您可以简单地将`VB6`窗口的句柄传递给`.NET`表单：

```
public void ShowDotNetForm(IntPtr hwndMain) 
{
    NativeWindow vb6Window = new NativeWindow();
    vb6Window.AssignHandle(hwndMain);
    f.Show(vb6Window);
} 
```

表格中的代码`VB6`是：

```
dotNetObj.ShowDotNetForm Me.hWnd 
```

传递窗口句柄从`VB6`更好，因为`FindWindowEx`需要您知道窗口标题的文本才能获取句柄。

# c# - 使用 BeginTransaction() 的实体框架

> ID：12544441
> 
> 赞同：3
> 
> 时间：2012-09-22T14:05:29.393
> 
> 标签：c#, entity-framework

我正在尝试在我的应用程序中实现实体框架，我应该能够手动提交和回滚更改。

第一次执行更新语句时，它成功更新了表并且我能够回滚更改。**这是对的**

但是当我第二次执行更新语句时，它成功更新了表并提交了更改。所以我无法手动回滚。**这是错误的**

请让我知道为什么会发生这种情况以及如何解决此问题。

下面的代码只是重现我的问题的示例。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.Common;
using System.Data;

namespace EFTest
{
    public class DBOperations
    {
        NorthwindEntities NorthwindContext;
        DbTransaction transObject;

        public DBOperations()
        {
        }

        public void ConnectDB()
        {
            try
            {
                if (NorthwindContext == null)
                {
                    NorthwindContext = new NorthwindEntities();
                    if (NorthwindContext != null && NorthwindContext.Connection.State != ConnectionState.Open)
                    {
                        NorthwindContext.Connection.Open();
                        transObject = NorthwindContext.Connection.BeginTransaction(IsolationLevel.ReadUncommitted);
                    }
                }
            }
            catch (Exception ex)
            {
                throw new Exception("Database Error " + ex.Message);
            }
        }

        public int disconnect()
        {
            if (NorthwindContext != null && transObject != null)
            {
                try
                {
                    transObject.Rollback();
                }
                catch (Exception)
                {
                }
                transObject.Dispose();
                NorthwindContext.Connection.Close();
                NorthwindContext.Dispose();
            }

            return 0;
        }

        public void CommitTransaction()
        {
            if (NorthwindContext != null && transObject != null)
            {
                try
                {
                    transObject.Commit();
                }
                catch (Exception)
                {
                }
            }
        }

        public void RollbackTransaction()
        {
            if (NorthwindContext != null && transObject != null)
            {
                try
                {
                    transObject.Rollback();
                }
                catch (Exception)
                {
                }
            }
        }

        public int UpdateDB()
        {
            int _returnVal = 0;

            try
            {
                NorthwindContext.ExecuteStoreCommand("UPDATE Orders SET OrderDate = GETDATE() WHERE OrderID = '10248'");
            }
            catch (Exception ex)
            {
                throw new Exception("Database Error " + ex.Message);
            }

            return _returnVal;
        }
    }

    public class program
    {
        public program()
        {
            //Establishing the connection.
            DBOperations _DBOperations = new DBOperations();
            _DBOperations.ConnectDB();

            //Update the datebase
            _DBOperations.UpdateDB();                           //Update the database but it doesn't commit the changes.                       

            //Issue Rollback to rollback the transaction.
            _DBOperations.RollbackTransaction();                //Successfully Rollbacks the database changes.

            //Again Update the datebase
            _DBOperations.UpdateDB();                           //Update the database it commits the changes. 

            //Issue Rollback to rollback the transaction.
            _DBOperations.RollbackTransaction();                //Rollback fails.

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:46:18.250

使用[`TransactionScope`](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)您的 DbOperations 可能如下所示：

```
public class DBOperations : IDisposable
{
    NorthwindEntities _context;
    private TransactionScope _transactionScope;

    public DBOperations()
    {
        this.Initialize();
    }

    private void Initialize()
    {
        try
        {
            this.Dispose();
            this._transactionScope = new TransactionScope();
            this._context = new NorthwindEntities();
            // no need to open connection. Let EF manage that.
        }
        catch (Exception ex)
        {
            throw new Exception("Database Error " + ex.Message);
        }
    }

    public void RollbackTransaction()
    {
            try
            {
                this._transactionScope.Dispose();
                this._transactionScope = null;
                this.Dispose();
                this.Initialize();
            }
            catch (Exception)
            {
                // TODO
            }
    }

    public int UpdateDB()
    {
        int _returnVal = 0;
        try
        {
            this._context.ExecuteStoreCommand("UPDATE Orders SET OrderDate = GETDATE() WHERE OrderID = '10248'");
        }
        catch (Exception ex)
        {
            throw new Exception("Database Error " + ex.Message);
        }
        return _returnVal;
    }

    public void Dispose()
    {
        if (this._transactionScope != null)
        {
            this._transactionScope.Complete();
            this._transactionScope.Dispose();
        }
        if (this._context != null) this._context.Dispose();
    }
} 
```

和程序：

```
public class program
{
    public program()
    {
        using (DBOperations dbOperations = new DBOperations())
        {
            dbOperations.UpdateDB(); // Update the database no commit.

            dbOperations.RollbackTransaction(); // Rollback.

            dbOperations.UpdateDB(); // Update the database no commit.

            dbOperations.RollbackTransaction(); // Rollback.
        } // Commit on Dispose.
    }
} 
```

在 TransactionScope 范围内打开的连接会自动加入事务。事务*仅*通过调用提交`Commplete()`。处置或未处理的异常将导致回滚。

如果您不仅仅执行存储命令，例如更改对象并依赖上下文的更改跟踪，您可以实现重试机制，而不是仅仅丢弃上下文和更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T16:47:11.437

您需要在事务提交或回滚后分配新事务。

```
public program()
{
    //Establishing the connection.
    DBOperations _DBOperations = new DBOperations();
    _DBOperations.ConnectDB();

    //Update the datebase
    _DBOperations.UpdateDB();    //Update the database but it doesn't commit the changes.

    //Issue Rollback to rollback the transaction.
    _DBOperations.RollbackTransaction();    //Successfully Rollbacks the database changes.

    _DBOperations.ConnectDB(); //you need to assign new transaction because your last 
                               //transaction is over when you commit or roll back 

    _DBOperations.UpdateDB();    //Update the database it commits the changes.

    //Issue Rollback to rollback the transaction.
    _DBOperations.RollbackTransaction();    //Rollback fails.
} 
```

# jquery - 为什么 jquery .html() 不接受 jquery 效果，我该如何解决

> ID：12544442
> 
> 赞同：0
> 
> 时间：2012-09-22T14:05:37.687
> 
> 标签：jquery, html

我有 3 个带有 jquery 效果的框和一个在单击“单击以创建 Jquery 框”时创建的框

演示 [http://jsfiddle.net/afshinprofe/f9s6X/](http://jsfiddle.net/afshinprofe/f9s6X/)

HTML

```
 <h2>Click to Add JQuery Box</h2>
<div class="box">Html Box 1</div>
<div class="box">Html Box 2</div>
<div class="box">Html Box 3</div>
<div id="res"></div> 
```

CSS

```
 .box{
    width:50px;
    height:50px;
    background-color:gray;
    color:white;
    float:left;
    border:medium blue solid;
    margin:10px;
   } 
```

jQuery

```
$("h2").click(function(){
    $("#res").html('<div class="box">JQuery Box 4</div>');
});
$(".box").hover(function () {
$(this).css("color","red");},
function(){
$(this).css("color","white");
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T14:08:34.247

你必须打电话`.hover`给新盒子。最初调用它时，那个新盒子并不存在。

或者，您可以使用[`.on`和委托事件](http://api.jquery.com/on/#direct-and-delegated-events)。

最好的替代方法是，如果您的用例确实如您的问题中所述，请[使用`:hover`CSS 伪类](http://www.yourhtmlsource.com/stylesheets/csslinks.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T14:11:16.130

如果您只是将悬停事件绑定到 box 类的元素上，那么它将作用于当时 DOM 中的元素。但是，它不是实时绑定。您需要为此使用[.on()](http://api.jquery.com/on/)。

例子：

```
$("body").on('mouseenter', '.box', function () {
    $(this).css("color","red");
}).on('mouseleave', '.box', function(){
    $(this).css("color","white");
}); 
```

[固定小提琴](http://jsfiddle.net/f9s6X/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T14:13:56.143

那么你可以这样做:) 诀窍是将你的代码放在“点击”函数中。

```
$("h2").click(function(){
$("#res").html('<div class="box">JQuery Box 4</div>');

$(".box").hover(function () {
$(this).css("color","red");},
function(){
$(this).css("color","white");
});
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T14:24:12.033

可以试试类似的

```
$("h2").click(function(){
    var $box = $('<div class="box">JQuery Box 4</div>')
      .hover(function () {
        $(this).css("color","red");},
      function(){
        $(this).css("color","white");
    });
    $("#res").empty().append($box);
}); 
```

# actionscript-3 - AS3中的跨域，想显示谷歌图片搜索结果

> ID：12544447
> 
> 赞同：1
> 
> 时间：2012-09-22T14:06:33.203
> 
> 标签：actionscript-3, cross-domain

我正在尝试制作一个显示谷歌图片搜索结果的 Flash 程序。由于结果都在我不拥有的不同域上，因此我无法通过正常的 crossdomain.xml 过程来做到这一点。

这是否意味着我正在尝试做的事情是不可能的？当您将其作为独立应用程序运行时，它可以工作，而不是在网站上运行。

我尝试使用谷歌搜索并找到了一些如何绕过它的方法，但它们都不起作用。我应该继续寻找吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:57:55.380

您可以在没有 crossdomain.xml 文件的情况下从另一个域加载图像。当您尝试访问位图数据或尝试以任何方式修改位图时，您将收到错误消息。

以下代码在网络上运行良好。

```
public class Main extends Sprite 
{

    public function Main():void 
    {
        if (stage) init();
        else addEventListener(Event.ADDED_TO_STAGE, init);
    }

    private function init(e:Event = null):void 
    {
        removeEventListener(Event.ADDED_TO_STAGE, init);

        var loader:Loader = new Loader();
        loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onComplete);
        loader.load(new URLRequest("https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcTg2aSe9QhKeZrwNNM3Uyfstmsh24DWgH-Uhr-Xn-0lltyqhgvLRw"));
        addChild(loader);
    }

    private function onComplete(e:Event):void 
    {
        try {
            var bmp:Bitmap = e.target.content;  
        }
        catch (err:Error)
        {
            trace(err.message);
        }

    }

}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T23:38:26.887

正如 Baris 所提到的，如果您只显示数据，则不需要在托管图像的服务器上使用 crossdomain.xml。如果您确实需要访问像素数据（复制/更改/等），您可以尝试以下方法之一：

1.  首先使用服务器端脚本将图像缓存在本地服务器上，然后加载到闪存中。
2.  使用 URLLoader 将图像作为二进制数据加载，然后将字节传递给加载器类。看看[凯塔的文章](http://labs.hellokeita.com/2011/12/02/editing-bitmapdata-from-different-domain/)。

以下是帖子中的片段以供参考：

```
var urlLoader:URLLoader = new URLLoader();
urlLoader.dataFormat = URLLoaderDataFormat.BINARY;
urlLoader.addEventListener(Event.COMPLETE, urlLoaderComplete);

var url:String = "http://www.adobe.com/images/shared/product_mnemonics/50x50/flash_player_50x50.gif";
urlLoader.load(new URLRequest(url));

function urlLoaderComplete(e:Event):void
{
  var loader:Loader = new Loader();
  loader.contentLoaderInfo.addEventListener(Event.COMPLETE, loaderComplete);
  loader.loadBytes(urlLoader.data as ByteArray);
}

function loaderComplete(e:Event):void
{
  var bmp:Bitmap = e.currentTarget.content as Bitmap;
  addChild(bmp);
  var bitmapData:BitmapData = bmp.bitmapData
  bitmapData.applyFilter(bitmapData, bitmapData.rect, new Point(0, 0),
    new ColorMatrixFilter([
      0, 0, 0, 0, 0,
      1, 1, 0, 0, 0,
      0, 0, 1, 0, 0,
      0, -1, -1, 1, 0
  ]));
} 
```

# c# - 如何正确记录 C# 中的扩展方法？

> ID：12544450
> 
> 赞同：2
> 
> 时间：2012-09-22T14:06:59.667
> 
> 标签：c#, visual-studio-2010, visual-studio

我刚刚开始查看 C# 文档标准。这是我拥有的一种方法：

```
/// <summary>
/// Reformats a key in x.x format to 0x0x format
/// </summary>
/// <param name="dotFormatRowKey">key in ##.## format</param>
public static string DotFormatToRowKey(this string dotFormatRowKey) 
{

    if (! Regex.IsMatch(dotFormatRowKey, @"\d+\.\d+"))
       throw new ArgumentException("Expected ##.##, was " + dotFormatRowKey);

    var splits = dotFormatRowKey.Split('.')
                 .Select(x => String.Format("{0:d2}", Int32.Parse(x)))
                 .ToList();
    var joined = String.Join(String.Empty, splits.ToArray())

    return joined;
} 
```

有人可以就如何记录此方法的输入和返回参数给我建议。另外，当我这样做时，如果某人使用 VS2010 智能感知，他们是否可以使用记录在案的评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:11:52.067

至于你应该如何记录参数：我认为这很主观，但你现在这样做的方式对我来说还不错。尽管如此，您可能会将您的返回变量更改`joined`为更详细的内容，例如`"keyFormattedString"`或其他内容。

至于你问题的第二部分：

> 另外，当我这样做时，如果某人使用 VS2010 智能感知，他们是否可以使用记录在案的评论？

引用自 msdn：

> 仅当您使用 using 指令将命名空间显式导入源代码时，扩展方法才在范围内。

如果该方法位于类库中的某个类中，那么他们必须将该库引用到他们当前的解决方案中，以便使用/查看该方法和记录的注释。您基本上可以创建一个包含所有扩展方法的新类库，然后将该 DLL 导入您正在处理的任何解决方案。

假设您有一个类库，那么您只需添加

```
using ExtensionMethodsLib; // or whatever you'll call it 
```

到您的 using 语句，在您可能需要的任何页面上。

[扩展方法 (msdn)](http://msdn.microsoft.com/en-us/library/bb383977.aspx)

# c# - 无法从另一个类中设置值

> ID：12544453
> 
> 赞同：0
> 
> 时间：2012-09-22T14:08:10.813
> 
> 标签：c#, class, variables

我试图将 LabelStatus 的文本设置为类中的一条消息，但它不起作用。这是我的代码：

班级：

```
public bool openConnection()
{
    SetStatus("Connecting to " + Server);       
    //Mysql code
}

private void SetStatus(string msg)
{
    Form1 form = new Form1();
    form.SetStatus(msg);
} 
```

表格1：

```
public void SetStatus(string status)
{
    labelStatus.Text = _status;
} 
```

我对 C#（php 人）相当陌生，而且我一生都无法弄清楚我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:20:21.047

尝试在表单上调用[`ShowDialog`](http://msdn.microsoft.com/en-us/library/swcta4hh.aspx)or[`Show`](http://msdn.microsoft.com/en-us/library/y7c7daaw.aspx)方法

```
private void SetStatus(string msg) 
{ 
    Form1 form = new Form1(); 
    form.SetStatus(msg); 
    form.ShowDialog(this);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:44:20.990

从您的代码中，我认为您的课程正在更改表单标签的状态标签。要更改表单标签文本，您需要已打开表单的对象。在您的类中为表单定义变量。

```
public class ConnectionCheck
{
  private Form myForm;

   public void   ConnectionCheck(Form form)
  {
    myForm = form;
  }

  public bool openConnection()
  {
    SetStatus("Connecting to " + Server);       
    //Mysql code
  }

  private void SetStatus(string msg)
  {
     //Call method to change label text
      myForm .SetStatus(msg);
  }

} 
```

在从 from1 代码隐藏（form1.cs）创建 ConnectionCheck 对象时传递 form1 对象。

```
ConnectionCheck connection = new ConnectionCheck(this); 
```

此外，将 _status 更改为参数变量。

```
public void SetStatus(string status)
{
    labelStatus.Text = status;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T14:12:58.563

看起来您正在设置成员变量而不是函数的参数。

```
 //try something like this
this._status = status;
this.labelStatus.Text = this._status; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T14:51:12.163

查看名称：尝试使它们相同，请参阅

```
labelStatus.Text = **status**; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T14:15:46.157

设置时`labelStatus.Text`，您没有使用传递给的参数进行设置`SetStatus(string)`。似乎您不小心使用了数据成员。

# php - 带有消息和非零退出状态的 exit()

> ID：12544455
> 
> 赞同：8
> 
> 时间：2012-09-22T14:08:24.317
> 
> 标签：php

我有两个文件：first.php：

```
#!/usr/bin/php
<?php
 exit("Unable"); //1
 #exit(1);  //2
 #exit(); //or exit(0) //3
?> 
```

第二个.php：

```
#!/usr/bin/php
<?php
 exec("./first.php",$out,$err);
 var_dump($out);
 echo "\n".$err;
?> 
```

现在，当我在 first.php 中使用第 1 行运行 second.php 时，我在 $out 中有“Unable”，在 $err 中有 0。但是在另外两个出口中，我在 $err 中有那个数字。
当我使用字符串消息执行退出时，如何在 $err 中有非零值？
我已经测试了 2>&1 但它没用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-22T14:15:45.153

```
exit("hi"); 
```

是相同的：

```
echo "hi";
exit(0); 
```

所以只是回应声明:)

```
echo "Unable";
exit(2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:12:07.350

您不能有字符串退出代码。退出代码只是整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T14:15:37.850

您可以使用字符串消息退出，并将其打印在标准输出上，但至于退出代码，这是一个整数，字符串将转换为 0，即成功退出代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T14:19:34.137

您甚至可以在退出时调用函数。

```
 function execute() { echo "whatever"; }
  exit(execute()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T14:57:53.200

你也可以使用`die("Unable");`

# c++ - 从 Windows 为 OSX 编译 C++

> ID：12544457
> 
> 赞同：2
> 
> 时间：2012-09-22T14:08:32.083
> 
> 标签：c++, macos, cross-platform, visual-studio-2012

我有一个基于小型控制台、符合标准的 C++ 程序，它是在 Windows 上的 Visual Studio 中开发的。由于它是标准 C++，我需要做的就是为 OSX 编译它吗？还是我过于乐观了？

我正在寻找最简单和最直接的方法来做到这一点。是否可以从 Visual Studio 2012 Professional 执行？如有必要，我可以使用 Mac。但是，由于我的开发平台是 Windows，如果我能从这里开始，那就太好了。

我根本没有mac开发经验。当您为 OSX 编译应用程序时，您会得到什么而不是 .exe？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T14:21:10.143

如果您不介意在 Windows 机器上安装 MinGW 或 Cygwin，您可以按照此处的说明构建 Windows 到 OS X 交叉工具链：[https ://github.com/Tatsh/xchain](https://github.com/Tatsh/xchain)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T14:16:59.927

我会得到一个 OSX 系统（VM 很好），安装 XCode，然后使用它编译你的代码。如果您的 C++ 代码是以跨平台方式编写的，那么应该是微不足道的。

# highcharts - valueSuffix 中的变量？

> ID：12544461
> 
> 赞同：0
> 
> 时间：2012-09-22T14:08:40.447
> 
> 标签：highcharts

是否可以从 valueSuffix 参数中的系列中引用一个点？

我想通过将系列 1 列的高度除以系列 2 列的高度来在后缀中包含一个百分比值。

所以类似于以下内容：

valueSuffix: ( series[1].max / series[2].max ) + ' %'

这可能吗？

提前致谢！

阿明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:38:43.453

API 说明了这一点： 这意味着 valueSuffix 只能是字符串。如果您想要比字符串更复杂的东西，请考虑使用[`valueSuffix: String`](http://api.highcharts.com/highcharts#tooltip.valueSuffix)
[`tooltip.formatter`](http://api.highcharts.com/highcharts#tooltip.formatter)

在格式化程序中，您将可以访问图表，`this.series.chart`然后从图表中您可以访问您可能希望访问的任何系列或任何点

# powershell - Powershell - 如何获取没有子文件的目录列表并且只列出前 5 个文件？

> ID：12544464
> 
> 赞同：0
> 
> 时间：2012-09-22T14:08:55.077
> 
> 标签：powershell

我了解`dir`(Get-ChildItem) 和`Sort-Object`command-let，但我需要将前**x 个**文件输出到一个文件。

例如，如果我按 排序`LastWriteTime`，如何将输出限制为仅前 5 个文件？

（无需访问子文件。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T14:29:57.060

听起来你想要：

```
ls | ?{! $_.psiscontainer} | sort -property lastwritetime | select -first 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T16:51:05.320

使用 PS3：

```
 PS III> ls -file | sort lastwritetime | select -first 5 
```

另外的选择：

```
 PS III> (ls -file | sort lastwritetime)[0..4] 
```

# grails-orm - 为什么这些 Gradle 测试会抛出异常？

> ID：12544466
> 
> 赞同：0
> 
> 时间：2012-09-22T14:09:22.543
> 
> 标签：grails-orm, gradle

我有以下测试

```
answer = Author.withCriteria {
            books {
                gt 'price', new DetachedCriteria(Book).build {
                    projections {
                        avg 'price'
                    }
                }
            }
        }

assert answer.size() == 1 
```

Intellij IDEA 毫无例外地执行此测试。如果我运行`gradle build`这个测试会引发`org.hibernate.exception.SQLGrammarException: could not execute query`异常。

Intellij 生成以下 SQL：
`select this_.id as id2_1_, this_.version as version2_1_, this_.age as age2_1_, this_.email as email2_1_, this_.first_name as first5_2_1_, this_.home_page as home6_2_1_, this_.last_name as last7_2_1_, this_.login as login2_1_, this_.salary as salary2_1_, this_.sex as sex2_1_, (SELECT count(*) FROM BOOK b WHERE b.author_id = this_.id) as formula0_1_, books_alia1_.id as id1_0_, books_alia1_.version as version1_0_, books_alia1_.author_id as author3_1_0_, books_alia1_.date_created as date4_1_0_, books_alia1_.last_updated as last5_1_0_, books_alia1_.price as price1_0_, books_alia1_.title as title1_0_ from author this_ inner join book books_alia1_ on this_.id=books_alia1_.author_id where (books_alia1_.price > (select avg(cast(this_.price as double)) as y0_ from book this_))`

摇篮SQL：
`select this_.id as id2_1_, this_.version as version2_1_, this_.age as age2_1_, this_.email as email2_1_, this_.first_name as first5_2_1_, this_.home_page as home6_2_1_, this_.last_name as last7_2_1_, this_.login as login2_1_, this_.salary as salary2_1_, this_.sex as sex2_1_, (SELECT count(*) FROM BOOK b WHERE b.author_id = this_.id) as formula0_1_, books_alia1_.id as id0_0_, books_alia1_.version as version0_0_, books_alia1_.author_id as author3_0_0_, books_alia1_.date_created as date4_0_0_, books_alia1_.last_updated as last5_0_0_, books_alia1_.price as price0_0_, books_alia1_.title as title0_0_ from author this_ inner join book books_alia1_ on this_.id=books_alia1_.author_id where (books_alia1_.price > (select from book this_)`

您可以看到`avg 'price'`零件的问题。

问题是一样的：为什么 Gradle 执行的测试有异常？

ps Intellij 依赖项是通过`gradle idea`命令安装的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T14:48:42.730

只有你能发现。也许类路径不同（请记住，IDEA 没有像 Gradle 那样严格的类路径分离），或者资源不同（与 Gradle 相比，这在 IDEA 中的工作方式也不同）。首先要做的是分析堆栈跟踪。在 Gradle ( `-Dtest.debug=true`) 中调试测试也有帮助。

# django - 配置 Django/Pinax 电子邮件

> ID：12544468
> 
> 赞同：0
> 
> 时间：2012-09-22T14:09:25.853
> 
> 标签：django, pinax

我正在尝试为我的 Pinax 应用程序配置自动电子邮件。

在 shell ( `python manage.py shell`) 中，我正在执行以下操作来测试我的电子邮件设置：

`>>> send_mail ('Test','Test','myemail@myemail.com',['myemail@myemail.com'])`

但是我得到了以下回溯：

```
Traceback (most recent call last):
File "<console>", line 1, in <module>
  File "/Users/myname/Desktop/myenv2/lib/python2.7/site-packages/django/core/mail/__init__.py", line 61, in send_mail
    connection=connection).send()
  File "/Users/myname/Desktop/myenv2/lib/python2.7/site-packages/django/core/mail/message.py", line 175, in send
    return self.get_connection(fail_silently).send_messages([self])
  File "/Users/myname/Desktop/myenv2/lib/python2.7/site-packages/django/core/mail/backends/smtp.py", line 78, in send_messages
    new_conn_created = self.open()
  File "/Users/myname/Desktop/myenv2/lib/python2.7/site-packages/django/core/mail/backends/smtp.py", line 41, in open
    local_hostname=DNS_NAME.get_fqdn())
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/smtplib.py", line 242, in __init__
    (code, msg) = self.connect(host, port)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/smtplib.py", line 302, in connect
    self.sock = self._get_socket(host, port, self.timeout)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/smtplib.py", line 277, in _get_socket
    return socket.create_connection((port, host), timeout)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 571, in create_connection
    raise err
error: [Errno 60] Operation timed out 
```

我的邮箱设置`settings.py`如下：

```
# These are the email settings for sending out confirmation emails, alerts,etc.
DEFAULT_FROM_EMAIL = 'Mysite <myemail@myemal.com>'
EMAIL_USE_TLS = True
EMAIL_HOST = 'box401.bluehost.com'
EMAIL_HOST_USER = 'myemail@myemal.com'
EMAIL_HOST_PASSWORD = 'password'
EMAIL_PORT = 587
EMAIL_SUBJECT_PREFIX = '[Your Site] ' 
```

对可能出什么问题有任何见解吗？我检查了我的密码和主机的设置，它们看起来很好。

# coq - 在 coq 中编写隐式证明对象的不可能模式

> ID：12544469
> 
> 赞同：3
> 
> 时间：2012-09-22T14:09:33.627
> 
> 标签：coq

我试图将 coq 用作具有依赖类型的编程语言。我创建了以下小程序：

```
Inductive Good : list nat -> Set := 
  | GoodNonEmpty : forall h t, Good (h :: t).

Definition get_first(l : list nat)(good : Good l) : nat := 
  match l with
    | h :: t => h
    | nil => 
      match good with 
      end
  end. 
```

我为非空列表定义了一个类型，并创建了一个函数，该函数获取此类列表的第一个元素，前提是有证据证明它不为空。我很好地处理了头项目由两个项目组成的情况，但我无法处理空列表的不可能情况。我怎样才能在 coq 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T18:48:35.163

一种比您尝试更简单的方法是：

```
Definition get_first (l : list nat) (good : Good l) : nat :=
  match good with
  | GoodNonEmpty h _ => h
  end. 
```

这是一种按照您想要的方式进行操作的方法。你会注意到证明“Good nil”不存在是非常冗长的，内联。

```
Definition get_first (l : list nat) (good : Good l) : nat :=
  (
    match l as l' return (Good l' -> nat) with
    | nil =>
      fun (goodnil : Good nil) =>
        (
          match goodnil in (Good l'') return (nil = l'' -> nat) with
          | GoodNonEmpty h t =>
            fun H => False_rect _ (nil_cons H)
          end
        )
        (@eq_refl _ nil)
    | h :: _ => fun _ => h
    end
  ) good. 
```

您当然可以在外部定义一些内容并重用它。不过，我不知道最佳实践。也许有人可以用更短的方法来做同样的事情。

* * *

编辑：

顺便说一句，您可以在证明模式下以更简单的方式获得几乎相同的结果：

```
Definition get_first' (l : list nat) (good : Good l) : nat.
Proof.
  destruct l. inversion good. exact n.
Defined. 
```

然后您可以：

```
Print get_first'. 
```

看看 Coq 是如何定义它的。但是，对于更多涉及的事情，您最好遵循 #coq IRC 频道中提出的 gdsfhl 作为解决方案：

[http://paste.in.ua/4782/](http://paste.in.ua/4782/)

您可以看到他使用该`refine`策略来提供术语的部分骨架来编写，并推迟缺少的证明。

# python - GtkTextView：如何更改当前活动闪烁光标线的背景颜色？

> ID：12544471
> 
> 赞同：1
> 
> 时间：2012-09-22T14:09:44.877
> 
> 标签：python, gtk, pygtk

根据闪烁光标的位置，我希望当前活动行具有不同的背景颜色，以明确我当前正在编辑哪一行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:06:21.747

使用 GtkSourceView 代替 GtkTextView 并设置[`highlight-current-line`](http://developer.gnome.org/gtksourceview/stable/GtkSourceView.html#GtkSourceView--highlight-current-line)属性。

# sql - 如何在 Oracle 数据库中创建链接/连接表

> ID：12544472
> 
> 赞同：1
> 
> 时间：2012-09-22T14:09:48.693
> 
> 标签：sql, oracle, database-design, data-modeling, intersection

我是第一次创建模型数据库。我创建了由多对多关系组成的关系模型。在关系模型中，它有一个单独的链接/连接表。创建数据库时，我还需要将此链接表创建为单独的表吗？或者我可以将每个外键放在多对多表中吗？

如果我需要一个单独的表，如何通过语法将这些表链接在一起？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T16:27:31.277

我们只能以一对多的方式构建外键。所以你需要这个交集表。这是我们在将逻辑数据模型转换为物理模型时引入的一种附加结构。

交集表通常只有两列，即要以 M:N 方式链接的两个表的引用键（可能还有一些元数据列来保存链接的属性）。它通常在两列上有一个复合主键，以避免冗余。它在每个被引用的表上都有一个外键，它必须在被引用的列上定义了主键。

语法很明显；此示例构建两个主表和一个仅定义键的交集。

```
create table m1 (
   id number not null
   , constraint m1_pk primary key (id) );

create table m2 (
   id number not null
   , constraint m2_pk primary key (id) );

create table intersection_t (
   m1_id number not null
   , m2_id number not null
   , constraint int_pk primary key (m1_id, m2_id)
   , constraint int_m1_fk foreign key (m1_id)
         references m1 (id)
   , constraint int_m2_fk foreign key (m2_id)
         references m2 (id)
 ); 
```

# .net - 缺少异步重载？

> ID：12544473
> 
> 赞同：4
> 
> 时间：2012-09-22T14:09:49.503
> 
> 标签：.net, .net-4.5, async-await

例如，查看 System.IO.File 类，我看到了静态方法[，](http://msdn.microsoft.com/en-us/library/system.io.file.aspx)`Exists`但没有看到任何`ExistsAsync`对应物。`File.Exists`如果有问题的文件位于网络共享上，我怀疑可能会阻塞很长一段时间。当然，我总是可以使用`Task.Run`，但这不会使用 I/O 完成端口。

我可以对`File`类的许多其他静态方法提出同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T14:40:11.583

我不知道为什么没有`File.ExistsAsync`方法。可能是“另一个进程可能会在您调用`Exists`方法和对文件执行另一个操作（例如删除）之间对文件执行某些操作”，并且仍然需要捕获异常以确保访问的应用程序的正常功能现有文件。

在任何情况下，您都可以自己编写。

```
public static async Task<bool> FileExistsAsync(string file)
{
    return await Task.Factory.StartNew(() => File.Exists(file));
} 
```

...当然不使用 IO Completion 来获取异步 IO ...

更新：我认为 File 通常是一个方便的包装器。`File`您可以使用其他提供异步功能的 API完成几乎所有提供的操作。在 的情况下`Exists`，它不使用任何可以使用 IO 完成端口的东西，它只是调用[FindFirstFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364418%28v=vs.85%29.aspx)并检查错误。

# android - Eclipse 调试坚持使用过时的应用程序

> ID：12544477
> 
> 赞同：0
> 
> 时间：2012-09-22T14:10:42.047
> 
> 标签：android, eclipse, adt, libgdx

每当我在硬件设备上调试应用程序时，它都会使用旧副本运行。

我试过 ：

*   重启 Eclipse
*   使用 Android 工具修复项目
*   检查清单文件
*   拔下电缆

唯一有用的是清理项目。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:00:27.980

最新的 ADT 中存在“库项目”的错误，因此对间接依赖库的更改不会导致 Android 项目重新构建。请参阅[Eclipse 中的 Android 构建未获取对链接项目的更改](https://stackoverflow.com/questions/11620745/android-build-in-eclipse-not-picking-up-changes-to-linked-project)

解决方法是在应用程序的 Android 部分中进行任何单一更改（而不是在不会触发重建的公共部分中进行更改）。

请在 Google 上“加注”关于此的错误：

*   [http://code.google.com/p/android/issues/detail?id=34305](http://code.google.com/p/android/issues/detail?id=34305)
*   [http://code.google.com/p/android/issues/detail?id=36174](http://code.google.com/p/android/issues/detail?id=36174)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T15:39:23.013

尝试运行应用程序而不是调试它。如果 Eclipse 认为设备上的版本是最新的，您将在控制台上收到一条消息。这本身并不能解决您的问题，但它应该为您提供一些额外的信息来使用。调试应用程序时不会出现该消息。

# java - Spring MVC 类型转换：PropertyEditor 还是 Converter？

> ID：12544479
> 
> 赞同：136
> 
> 时间：2012-09-22T14:11:02.587
> 
> 标签：java, spring, data-binding, spring-mvc, type-conversion

我正在寻找在 Spring MVC 中绑定和转换数据的最简单和最简单的方法。如果可能，不做任何 xml 配置。

到目前为止，我一直在使用[PropertyEditors](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/validation.html#beans-beans-conversion-customeditor-registration)：

```
public class CategoryEditor extends PropertyEditorSupport {

    // Converts a String to a Category (when submitting form)
    @Override
    public void setAsText(String text) {
        Category c = new Category(text);
        this.setValue(c);
    }

    // Converts a Category to a String (when displaying form)
    @Override
    public String getAsText() {
        Category c = (Category) this.getValue();
        return c.getName();
    }

} 
```

和

```
...
public class MyController {

    @InitBinder
    public void initBinder(WebDataBinder binder) {
        binder.registerCustomEditor(Category.class, new CategoryEditor());
    }

    ...

} 
```

很简单：两种转换都定义在同一个类中，并且绑定很简单。如果我想对所有控制器进行通用绑定，我仍然可以[在我的 xml 配置中添加 3 行](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-ann-webdatabinder)。

* * *

但是 Spring 3.x 引入了一种新方法，使用[Converters](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/validation.html#core-convert)：

> 在 Spring 容器中，该系统可以用作 PropertyEditors 的替代品

因此，假设我想使用 Converters，因为它是“最新的替代方案”。我将不得不创建**两个**转换器：

```
public class StringToCategory implements Converter<String, Category> {

    @Override
    public Category convert(String source) {
        Category c = new Category(source);
        return c;
    }

}

public class CategoryToString implements Converter<Category, String> {

    @Override
    public String convert(Category source) {
        return source.getName();
    }

} 
```

**第一个缺点：**我必须上两节课。好处：由于通用性，无需转换。

那么，我如何简单地对转换器进行数据绑定？

**第二个缺点：**我还没有找到任何简单的方法（注释或其他编程工具）在控制器中执行此操作：与`someSpringObject.registerCustomConverter(...);`.

我发现的唯一方法是乏味的，并不简单，而且只涉及一般的跨控制器绑定：

*   [XML配置](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/validation.html#core-convert-Spring-config)：

    ```
    <bean id="conversionService"
      class="org.springframework.context.support.ConversionServiceFactoryBean">
        <property name="converters">
            <set>
                <bean class="somepackage.StringToCategory"/>
                <bean class="somepackage.CategoryToString"/>
            </set>
        </property>
    </bean> 
    ```

*   [Java 配置](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-config-customize)（**仅在 Spring 3.1+ 中**）：

    ```
    @EnableWebMvc
    @Configuration
    public class WebConfig extends WebMvcConfigurerAdapter {

        @Override
        protected void addFormatters(FormatterRegistry registry) {
            registry.addConverter(new StringToCategory());
            registry.addConverter(new CategoryToString());
        }

    } 
    ```

有了所有这些缺点，为什么要使用 Converters ？我错过了什么吗？还有其他我不知道的技巧吗？

我很想继续使用 PropertyEditors... 绑定更容易和更快。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-09-22T20:26:45.303

> 有了所有这些缺点，为什么要使用 Converters ？我错过了什么吗？还有其他我不知道的技巧吗？

不，我认为您已经非常全面地描述了 PropertyEditor 和 Converter，以及如何声明和注册每一个。

在我看来，PropertyEditor 的范围是有限的——它们有助于将 String 转换为一种类型，而这个字符串通常来自 UI，因此使用 @InitBinder 和 WebDataBinder 注册 PropertyEditor 是有意义的。

另一方面，转换器更通用，它适用于系统中的任何转换 - 不仅仅是 UI 相关的转换（字符串到目标类型）。例如，Spring Integration 广泛使用转换器将消息负载转换为所需的类型。

我认为对于 UI 相关的流程，PropertyEditors 仍然适用，特别是在您需要为特定命令属性进行自定义操作的情况下。对于其他情况，我会从 Spring 参考中获取建议并改为编写转换器（例如，将 Long id 转换为实体，例如）。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-04-10T08:16:54.673

1.  对于 to/from 字符串转换使用格式化程序（实现***org.springframework.format.Formatter***）而不是转换器。它有***print(...)***和***parse(...)***方法，所以你只需要一个类而不是两个。要注册它们，请使用***FormattingConversionServiceFactoryBean***，它可以注册转换器和格式化程序，而不是*ConversionServiceFactoryBean*。
2.  新的 Formatter 东西有几个额外的好处：
    *   Formatter 接口在其*print(...)*和*parse(...)*方法中提供 Locale 对象，因此您的字符串转换可以是区域敏感的
    *   除了预先注册的格式化程序之外，*FormattingConversionServiceFactoryBean*还附带了几个方便的预先注册的***AnnotationFormatterFactory***对象，允许您通过注释指定其他格式化参数。例如： *@RequestParam*****@DateTimeFormat(pattern="MM-dd-yy")****LocalDate baseDate ...* 创建自己的*AnnotationFormatterFactory*类并不难，简单的例子见 Spring 的***NumberFormatAnnotationFormatterFactory***。我认为这消除了对特定于控制器的格式化程序/编辑器的需求。为所有控制器使用一个*ConversionService*并通过注释自定义格式。***

****   我同意如果您仍然需要一些特定于控制器的字符串转换，最简单的方法仍然是使用自定义属性编辑器。（我试图在我的*@InitBinder方法中调用'* *binder.setConversionService(...)* ' ，但它失败了，因为binder 对象已经设置了'全局'转换服务。似乎不鼓励每个控制器的转换类弹簧 3)。***

 ***** * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-22T15:14:53.330

最简单（假设您使用的是持久性框架）但不是完美的方法是通过`ConditionalGenericConverter`接口实现通用实体转换器，该接口将使用其元数据转换实体。

例如，如果您使用 JPA，此转换器可能会查看指定的类是否具有`@Entity`注释，并使用`@Id`带注释的字段来提取信息并使用提供的字符串值作为查找的 Id 自动执行查找。

```
public interface ConditionalGenericConverter extends GenericConverter {
    boolean matches(TypeDescriptor sourceType, TypeDescriptor targetType);
} 
```

`ConditionalGenericConverter`是 Spring 转换 API 的“终极武器”，但一旦实现就可以处理大部分实体转换，从而节省开发人员的时间——当您只是将实体类指定为控制器的参数而从不考虑实现时，这是一种极大的解脱一个新的转换器（当然除了自定义和非实体类型）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-25T03:16:23.347

您可以通过将两个转换器实现为静态内部类来解决拥有两个单独的转换器类的需要。

```
public class FooConverter {
    public static class BarToBaz implements Converter<Bar, Baz> {
        @Override public Baz convert(Bar bar) { ... }
    }
    public static class BazToBar implements Converter<Baz, Bar> {
        @Override public Bar convert(Baz baz) { ... }
    }
} 
```

您仍然需要分别注册它们，但如果您进行任何更改，至少这会减少您需要修改的文件数量。****

# c# - Console.WriteLine 在 ASP.net 生产环境中去哪里了？

> ID：12544480
> 
> 赞同：6
> 
> 时间：2012-09-22T14:11:05.997
> 
> 标签：c#, asp.net, console, trace, console.writeline

在 IIS 中部署我的 asp.net Web 应用程序后，我是否有机会看到 Console.WriteLine 命令的输出？（不再有 Visual Studio）

我检查了这个问题：

[Console.WriteLine 在 ASP.NET 中的位置在哪里？](https://stackoverflow.com/questions/137660/where-does-console-writeline-go-in-asp-net)

但问题是他们都在谈论调试/开发环境，Visual Studio 的输出窗口可以用来检查那些行的输出。

真的有办法在不安装额外的日志工具（例如 log4net）的情况下查看这些行的输出吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-22T14:26:21.927

Console.WriteLine （默认重定向到 Console.Out.WrlteLine ）被写入[Stream.Null](http://msdn.microsoft.com/en-us/library/system.io.stream.null.aspx)，这意味着写入它们的东西会丢失，根据您提到的[问题。](https://stackoverflow.com/questions/137660/where-does-console-writeline-go-in-asp-net)

[要将Console.Out](http://msdn.microsoft.com/en-us/library/system.console.out.aspx)重定向到另一个流，例如文件，请使用[Console.SetOut](http://msdn.microsoft.com/en-us/library/system.console.setout.aspx)，例如在 global.asax 文件[BeginRequest 处理程序](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.beginrequest.aspx)中。这会将任何 Console.WriteLine 调用重定向到输出文件。请记住在 EndRequest 处理程序或类似位置关闭流。

正如其他人在这里所说，出于这个原因，通常应在 Web 应用程序或通用库中避免使用 Console.WriteLine。考虑使用日志库，例如[log4net](http://logging.apache.org/log4net/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T14:28:40.133

`Console.Out`默认情况下对应于宿主进程的`stdout`流。在 Windows 上，只有标记为控制台类型的可执行文件将其 stdout 流定向到控制台窗口 - 对于所有其他可执行类型（GUI 和服务进程），然后 stdout 无处可去。

ASP.NET 在`w3wp.exe`其中运行的是一个没有 GUI 的服务进程。正如@akton 指出的那样，它进入了一个空流，所以任何写入的内容都会丢失。

如果您想跟踪调试操作（或者更确切地说，事后调试），请使用`Debug.WriteLine`或使用类似`log4net`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T20:11:28.860

接受的答案是正确的。但是如果你想用你的鞋子把钉子钉在咖啡桌上（一个错误的目标和一个错误的工具），那么你需要停止 iis，并从控制台交互地运行它，通过远程桌面登录服务器并启动inetinfo.exe 带有来自 cmd.exe 提示符的适当开关。这是一个 MSDN 页面，它说明了旧版本 IIS 的技术：http: [//msdn.microsoft.com/en-us/library/aa291261](http://msdn.microsoft.com/en-us/library/aa291261(v=vs.71).aspx) (v=vs.71).aspx我想它原则上仍然适用于较新版本IIS 的版本。

如果您不想使用库，则始终可以使用 System.Diagnostics TraceSource，然后将跟踪重定向到开发中的 ConsoleTraceListeners（[不要忘记附加控制台](https://stackoverflow.com/questions/8004853/attaching-console-to-running-asp-net-app)），然后再重定向到服务器环境中的文件或数据库侦听器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T14:17:21.207

我不认为你可以。一个负责任的开发人员可能会从他的代码中编写信息来帮助调试，但总是`Trace.Write`或`Debug.Write`永远不会`Console.Write`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-08T15:36:55.643

您可以`Console.WriteLine()`使用 DebugView 从那里获取运行在 IIS 上的 C#/.Net 编译应用程序的输出：[https ://technet.microsoft.com/en-us/sysinternals/bb896647](https://technet.microsoft.com/en-us/sysinternals/bb896647)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-22T14:22:26.200

使用 MessageBox，它有很大帮助。
无论你想观察什么都放在消息框里

# php - 通讯表格进入数据库

> ID：12544481
> 
> 赞同：0
> 
> 时间：2012-09-22T14:11:10.300
> 
> 标签：php, javascript, mysql, ajax, database

我从 YouTube 教程中获取了以下代码（来源：pbj746）。除了提交的数据没有出现在数据库中之外，一切似乎都在工作！我检查了 $dbhost、$db、$dbuser 和 $dbpassword，它们都匹配，但数据没有被拉入。

如果有人可以提供帮助，那就太好了！

```
 <?php
    $dbServer = "localhost";
    $db = "quizsoft_newsletter";
    $dbUser = "admin_newsletter";
    $dbPassword = "password";

    $conn = mysql_connect($dbhost,$dbuser,$dbpass);
    mysql_select_db($db);

    $email = $_POST['email'];

    mysql_query("INSERT INTO emails ('ID', 'Email')
        VALUES(NULL, '$email')") or die(mysql_error());
    ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Form</title>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(e) {
    $("div#msgbox").hide();
    $("#addEmail").click(function() {
        $.post('process.php', {
            email:$("#email").val()
        },
        function(response) {
            $("div#msgbox #msg").html("Email Submitted Successfully!")
            $("div#msgbox").slideDown("normal");
        }
        );
        return false;
    });
    $("div#msgbox").click(function() {
        $(this).slideUp("normal");
    })
});
</script>

<style>
body { font:Verdana, Geneva, sans-serif; font-size:13px; }
div#msgbox { background:#999; border-bottom:1px solid #CCC; color:#FFF; width:100%; height:30px; top:0; left:0; cursor:pointer; }
div#msgbix #msg { line-height:30px; padding-left:10px; }
form#newsletter { margin-top:35px; }
</style>

</head>
<body>

    <div id="msgbox"><span id="msg"> </span></div>
    <form id="newsletter">
        Email:<input type="text" id="email" />
        <input type="submit" id="addEmail" value="Submit" />
    </form>

</body>
</html> 
```

感谢：D！

**编辑**：此外，我运行了一个简单的 PHP 脚本来确认数据库连接：http: [//quizsoft.co.uk/ajaxform/test.php](http://quizsoft.co.uk/ajaxform/test.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:17:18.737

除了下面列出的内容之外，还有一些语法错误。`$dbServer`应重命名为，`$dbhost`反之亦然。

另外，从您的评论中，我知道您正在使用 ID 自动递增，所以我建议您更改此设置

```
INSERT INTO emails ('ID', 'Email') VALUES(NULL, '$email') 
```

对此

```
INSERT INTO emails (`Email`) VALUES ('$email') 
```

因为 ID 不能为空，并且需要使用反引号来封装列名。

另外，请注意，您的 sql 容易受到 sql 注入的影响，您可能希望研究使用 pdo（这里是一个[教程](http://net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/)）而不是已弃用的 mysql 函数。如果没有，您至少应该更换

```
$email = $_POST['email']; 
```

经过

```
$email = mysql_real_escape_string($_POST['email']); 
```

# mongodb - Mongodb 中的 Read-your-own-writes 一致性

> ID：12544487
> 
> 赞同：11
> 
> 时间：2012-09-22T14:11:46.817
> 
> 标签：mongodb, asynchronous, tornado, pymongo, eventual-consistency

首先，这是[Pymongo 文档中所说的](http://api.mongodb.org/python/current/examples/requests.html?highlight=read%20you%20own%20write)

> 默认情况下，当线程第一次在 MongoDB 上运行操作时，PyMongo 会为每个线程启动一个请求。这保证**了 **read-your-writes 的一致性**。在一个请求中，线程将继续独占使用同一个套接字，并且没有其他线程将使用这个套接字，直到线程调用 end_request() 或它终止。此时，套接字将返回到连接池以供其他线程使用。

因此，当对 Mongodb 使用异步库（如 Asyncmongo、Motor）时，用户是否会具有类似于阻塞调用或最终一致性的一致性？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T19:11:27.770

关于这个问题有几点。

1.  除非您使用`"safe=true"`, `"w=1"`（或更高版本）或`"j=true"`与您的 write 一起使用，否则不能保证您具有 read-after-write 一致性。您可以将这些作为 insert() 或`update()`命令的一部分包含在内，或者`set_lasterror_options()`用于为您正在使用的连接、数据库或集合设置这些选项。

2.  如果您允许从辅助节点读取（例如，除了 PRIMARY 之外的 ReadPreference），那么您将不会获得 read-after-write 语义，而只会获得最终一致性。

3.  如果您使用 PRIMARY 的 ReadPreference 并且您正在设置适当的 lasterror 选项，那么您可以保证在使用相同套接字（即相同线程）的所有操作上获得 read-after-write 语义。

4.  如果您使用多个线程，并且您不是从辅助节点读取，那么只要您在第一个线程中完成写入后在第二个线程中发出读取，就可以保证获得写入后读取的一致性。您可以使用标准线程同步原语来确保这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T01:09:43.647

我是 Motor 的作者，对 AsyncMongo 也略知一二。这是 Motor 关于安全写入的文档：

[http://emptysquare.net/motor/pymongo/api/motor/differences.html#acknowledged-writes](http://emptysquare.net/motor/pymongo/api/motor/differences.html#acknowledged-writes)

Short answer: Whatever code you execute in a callback to insert(), update(), etc., if those inserts or updates are **safe**, will see the data in MongoDB **after** the change has been applied. Any code you execute not in such a callback may run before or after MongoDB has applied the change.

# linux - avconv 帧率未编码

> ID：12544495
> 
> 赞同：1
> 
> 时间：2012-09-22T14:12:36.503
> 
> 标签：linux, video, encoding, ffmpeg, frame-rate

我正在尝试使用 avconv 对 .png 文件夹中的视频进行编码。我有 480 张图像，我希望视频以 240 fps 的帧速率进行编码。我正在输入以下代码。我认为我应该得到的是一个 2 秒的视频。相反，我得到了一个 19 秒的视频，这表明它在其默认设置 25 fps 下进行编码。

```
avconv -f image2 -i %04d.png -c:v libx264 -r 240 -s hd720 -crf 21 video03.mkv 
```

我错过了什么？

# javascript - 检索 POST 方法表单传递的值

> ID：12544496
> 
> 赞同：1
> 
> 时间：2012-09-22T14:12:48.187
> 
> 标签：javascript, html, forms, post, ibm-midrange

我在表单中**遇到 POST**方法的一些问题。我有一个带有**POST**方法的表单的页面 A ，当我提交表单时它转到页面 b 。

现在的问题是，当我进行刷新时，它会弹出一个我不想出现的警报。我正在使用 HTML 和 Javascript。

有没有办法处理这个刷新？

我能想到的一种方法是在页面 b 上动态创建一个隐藏表单，并在字段中填充值，并且每次刷新它只提交该隐藏表单。

请建议并让我知道是否还有其他巧妙的工作。提前致谢！基本上我在 AS400 平台上使用 CGIDEV2。因此，当提交页面 a 上的输入表单时，它会调用 abc.pgm 来写入页面 b。Cgidev2 在部分中写入 html。它将写入 /TOP 部分，然后写入 /REFRESHFORM。这些值将填充到 abc.pgm 中。

```
PAGE a
    /FORM
        <form name="input" action="abc.pgm" method="POST">
    Username: <input type="text" name="user"><input type="submit" value="Submit"></form>
Page b 
    /TOP
    -----------------
    -------------- 
    /REFRESHFORM
    <form name="refreshinput" action="abc.pgm" method="POST">
    Username: <input type="text" name="user"><input type="submit" value="Submit"></form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:15:00.617

您想避免“确认表单重新提交”警报吗？通常的方法是使用[POST/Redirect/GET](http://en.wikipedia.org/wiki/Post/Redirect/Get)模式：页面 A 会将表单 POST 到服务器，服务器处理数据，然后向用户发出 3xx 重定向，触发对页面 B 的 GET 请求。因此，随后重新加载页面 B 将只是通常的练习，即没有警报消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:08:16.457

没有简单的方法可以避免此问题，但您可以尝试使用 XMLHttpRequest 对象而不是表单。您将需要编写一些 javascript 代码，但您的服务器代码将保持不变。

请参阅以下[文档](http://www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp)和[示例](http://www.w3schools.com/ajax/tryit.asp?filename=tryajax_post2)。

```
<!DOCTYPE html>
<html>
<head>
<script>
function Submit()
{
var form = document.getElementById("data-form");
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    form.innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("POST","abc.pgm",true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send("userName=" + form["userName"].value + "&userPass=" + form["userPass"].value);
}
</script>
</head>
<body>

<form id="data-form">
    Username: <input type="text" name="userName">
    Userpass: <input type="text" name="userPass">
    <input id="submit" onclick="Submit()" type="button" value="Submit">
</form>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T14:25:20.227

如果您对提交按钮使用单击事件处理程序，则只需要阻止单击时的默认操作。

```
$('#Submit').click(function(e){
  e.preventDefault();
  // submit the form using ajax
  // on success go to the page B
  ...
} 
```

# ruby-on-rails - 为什么我的 i18n 不工作？

> ID：12544500
> 
> 赞同：0
> 
> 时间：2012-09-22T14:13:42.847
> 
> 标签：ruby-on-rails, ruby, internationalization, devise

locales/devise.zh-CN.yml

应用程序.rb

```
config.i18n.load_path += Dir[Rails.root.join('my', 'locales', '*.{rb,yml}').to_s]
config.i18n.default_locale = "zh-CN"
I18n.locale = 'zh-CN' 
```

我重新启动服务器，但它不起作用？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:44:33.147

我相信语言环境应该只有主要语言（在你的情况下`zh`）没有区域。

重命名您的文件`locales/devise.zh.yml`并设置您的语言环境`I18n.locale = 'zh'`

还要确保您的语言环境文件以 开头`zh:`，即：

```
zh:
  hello: "Hello world localized" 
```

# amazon-ec2 - Error when mounting drive

> ID：12544502
> 
> 赞同：12
> 
> 时间：2012-09-22T14:13:55.223
> 
> 标签：amazon-ec2

I created an EC2 amazon instance (ubuntu) and created a volume from an available snapshot. The volume has been successfully attached to my instance as `/dev/sdf`.

I executed the following command: performed: `mkdir /space`

When I try to execute the following command: `sudo mount /dev/sdf1 /space`

I get this message: `mount: special device /dev/sdf1` does not exist

How can I solve this issue ?

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-22T17:23:05.987

Try mounting the device "/dev/sdf" instead of "/dev/sdf1".

If that still doesn't work, try mounting it as "/dev/xvdf" or "/dev/xvda1", e.g.:

```
sudo mount /dev/xvda1 /space 
```

The explanation for this name mismatch can be found in the "Attach Volume" dialog of the EC2 management screen:

> Note: Newer linux kernels may rename your devices to /dev/xvdf through /dev/xvdp internally, even when the device name entered here (and shown in the details) is /dev/sdf through /dev/sdp.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-08-08T05:19:25.523

Complementing David Levesque answer.

You can check which volumes have been mounted with. The following will list them all:

```
$ sudo lsblk --output NAME,TYPE,SIZE,FSTYPE,MOUNTPOINT,LABEL 
```

You will get something like that

```
NAME    TYPE SIZE FSTYPE MOUNTPOINT LABEL
xvda    disk   8G                   
└─xvda1 part   8G ext4   /          cloudimg-rootfs
xvdf    disk  30G                   
└─xvdf1 part  30G ext4              cloudimg-rootfs 
```

Then you can mount it with

```
$ sudo mount /dev/xvdf1 /space -t ext4 
```

I hope it helps

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-11T00:40:09.517

In my CloudFormation UserData section I had the `attach-volume` command and `mount` command execute sequentially without a delay. I introduced a 5 second delay between the attach-volume command and mount command and it solved the problem.

```
aws ec2 attach-volume --volume-id $volumeId --instance-id $instanceId --device /dev/xvdf
sleep 5
mount /dev/xvdf /db -t ext4 
```

# sql - 选择进入，创建没有身份属性的表

> ID：12544504
> 
> 赞同：4
> 
> 时间：2012-09-22T14:14:22.540
> 
> 标签：sql, sql-server

我有这样的存储过程，在任何表的插入命令之后执行

```
Create Procedure [dbo].[HistoryInsert](
@TableName  nVarchar(500),
@RecordId   bigInt
)
As

    declare @Query  nVarChar(max)
    if Not Exists (Select   Top 1 1
                From    Information_schema.tables
                Where   Table_Name  = @TableName + 'History')
        Set @Query  = 'Select  *  Into ' + @TableName + 'History FROM ' + @TableName

    Else
        Set @Query  = 'Insert Into ' + @TableName  + 'History Select *   FROM ' + @TableName
        Exec(@Query)

    Exec(@Query) 
```

首次执行此过程时，会创建历史记录表。并且当此过程第二次执行时，插入失败，因为创建的表具有标识列。如何从表中选择所有列而不增加列的标识属性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2019-08-15T11:54:31.813

有一些救生窍门

```
select *
into #tmp_table
from Table

union all

select *
from Table 
where 1<>1 
```

使用 union all 也弃用 SQL Endgine 来继承约束和标识。

> ```
>  When an existing identity column is selected into a new table, the new column inherits the IDENTITY property, unless one of the following conditions is true:
>             - The SELECT statement contains a join, GROUP BY clause, or aggregate function.
>             - Multiple SELECT statements are joined by using UNION.
>             - The identity column is listed more than one time in the select list.
>             - The identity column is part of an expression.
>             - The identity column is from a remote data source. 
> ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T14:35:24.333

您的代码看起来像是试图保留数据更改的历史记录。考虑使用[变更数据捕获](http://msdn.microsoft.com/en-us/library/bb522489%28v=sql.105%29.aspx)而不是滚动您自己的解决方案。

允许插入`identity`指定列的一种方法是[identity_insert](http://msdn.microsoft.com/en-us/library/aa259221%28v=sql.80%29.aspx)：

```
SET IDENTITY_INSERT TableName ON 
```

你可以在你的第二个执行官中打开它。由于您要复制整个表，因此您必须在复制之前清除历史记录表，例如使用`truncate`：

```
Set @Query  = 
    'truncate table ' + @TableName  + 'History; ' +
    'set identity_insert ' + @TableName 'History on; ' +
    'Insert Into ' + @TableName  + 'History Select *   FROM ' + @TableName '; ' +
    'set identity_insert ' + @TableName 'History off; ' 
```

一个更好的解决方案是修改第一个 exec 以创建一个没有`identity`列的表。我还没有找到一种实用的方法来做到这一点。SQL Server 要求您删除该列并重新创建它，这将使动态 SQL 变得非常繁琐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-13T07:07:50.553

Andomar 是对的，如果您可以使用[变更数据捕获](http://technet.microsoft.com/en-us/library/bb522489(v=sql.105).aspx)，您应该这样做。但是，如果您遇到不支持它的版本，您仍然可以解决此问题。

根据[微软](http://msdn.microsoft.com/en-us/library/ms188029.aspx)...

> 将现有标识列选择到新表中时，新列将继承 IDENTITY 属性，除非以下条件之一为真：
> 
> *   SELECT 语句包含连接、GROUP BY 子句或聚合函数。
> *   使用 UNION 连接多个 SELECT 语句。
> *   标识列在选择列表中多次列出。
> *   标识列是表达式的一部分。
> *   标识列来自远程数据源。

因此，例如，如果您知道标识列的名称，则可以执行以下操作而无需知道任何其他列：

```
Exec('select ' + @identityColName + ' as id_temp123, * into ' + @TableName  + 'History from ' + @TableName)
Exec('alter table ' + @TableName  + ' drop column id_temp123') 
```

这也保留了列顺序。

您可以通过查看信息架构以编程方式找到标识列（如果有的话）。例如：

```
select TABLE_NAME + '.' + COLUMN_NAME
from INFORMATION_SCHEMA.COLUMNS 
where 
    TABLE_SCHEMA = 'dbo' and 
    TABLE_NAME = 'MyTable' and 
    columnProperty(object_id(TABLE_NAME), COLUMN_NAME, 'IsIdentity') = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-22T17:03:09.690

试试下面的查询：我发现这个工作正常。这将选择没有标识 = 1 的列中的数据

```
DECLARE @Temp NVARCHAR(MAX); 
DECLARE @SQL NVARCHAR(MAX);

SET @Temp = '';
SELECT @Temp = @Temp + COLUMN_NAME + ', ' FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME ='Person' AND  columnProperty(object_id(TABLE_NAME), COLUMN_NAME, 'IsIdentity') != 1 

SET @SQL = 'SELECT ' + SUBSTRING(@Temp, 0, LEN(@Temp)) +' FROM [Person]';
EXECUTE SP_EXECUTESQL @SQL; 
```

您可以从 sys.columns 表中获取列名详细信息

尝试以下查询：

```
SELECT * FROM SYS.COLUMNS 
WHERE object_id = OBJECT_ID('dbo.TableName') 
AND [Name] <> 'ColumnName'

DECLARE @sql as VARCHAR(8000)
SET @sql = 'SELECT '

SELECT @sql += [Name] + ', ' FROM SYS.COLUMNS 
WHERE object_id = OBJECT_ID('dbo.TableName') 
AND [Name] <> 'ColumnName'

SELECT @sql += ' FROM Dbo.TableName'

EXEC(@sql) 
```

# php - 住搜索城市？

> ID：12544509
> 
> 赞同：0
> 
> 时间：2012-09-22T14:15:29.187
> 
> 标签：php, iphone, performance, api, geolocation

我正在开发一个 iPhone 应用程序，在一个部分中，用户应该能够搜索城市。我想这样做就像天气应用程序在 iPhone 上运行一样，用户可以开始输入并立即获得“匹配”城市名称的响应。对于我需要得到的结果中的每个城市；城市、县/州、国家、经度和纬度的名称。

1.  是否有任何免费的 API 可以用于商业 iphone 应用程序（可能要花钱）？

2.  实际执行实时搜索的最佳方式是什么？我的意思是，不要对服务器施加太大压力。如果用户输入 2 个字符，然后继续输入一个字符，以此类推，那么对服务器的请求会很多吗？（我想在我的服务器上有一个“代理”脚本来调用地理信息的 API ......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T15:47:38.270

看看[MaxMind 的这个免费数据库](http://www.maxmind.com/app/worldcities)。它包含以下字段：

*   国家代码
*   ASCII 城市名称
*   城市名称
*   地区
*   人口
*   纬度
*   经度

我建议最好的做法是将其加载到您自己的数据库中，并按照您的建议提供一个简单的 Web 服务进行查找。如果您在数据库上放置适当的索引，查找将相当快。它足够小，您甚至可以将整个表加载到内存中。

# python - 解析apache日志文件

> ID：12544510
> 
> 赞同：37
> 
> 时间：2012-09-22T14:15:29.340
> 
> 标签：python, file-io

我刚开始学习 Python，想阅读 Apache 日志文件并将每行的部分内容放入不同的列表中。

文件中的行

> 172.16.0.3 - - [25/Sep/2002:14:04:19 +0200] "GET / HTTP/1.1" 401 - "" "Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.1 ) 壁虎/20020827"

根据[Apache 网站](http://httpd.apache.org/docs/1.3/logs.html)，格式为

> %h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\

我可以打开文件并按原样读取它，但我不知道如何让它以这种格式读取，所以我可以将每个部分放在一个列表中。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-22T14:25:18.050

这是[正则表达式](http://docs.python.org/howto/regex.html)的工作。

例如：

```
line = '172.16.0.3 - - [25/Sep/2002:14:04:19 +0200] "GET / HTTP/1.1" 401 - "" "Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.1) Gecko/20020827"'
regex = '([(\d\.)]+) - - \[(.*?)\] "(.*?)" (\d+) - "(.*?)" "(.*?)"'

import re
print re.match(regex, line).groups() 
```

输出将是一个元组，其中包含来自该行的 6 条信息（特别是该模式中括号内的组）：

```
('172.16.0.3', '25/Sep/2002:14:04:19 +0200', 'GET / HTTP/1.1', '401', '', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.1) Gecko/20020827') 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-22T14:54:36.950

使用正则表达式将一行拆分为单独的“标记”：

```
>>> row = """172.16.0.3 - - [25/Sep/2002:14:04:19 +0200] "GET / HTTP/1.1" 401 - "" "Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.1) Gecko/20020827" """
>>> import re
>>> map(''.join, re.findall(r'\"(.*?)\"|\[(.*?)\]|(\S+)', row))
['172.16.0.3', '-', '-', '25/Sep/2002:14:04:19 +0200', 'GET / HTTP/1.1', '401', '-', '', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.1) Gecko/20020827'] 
```

另一种解决方案是使用专用工具，例如[http://pypi.python.org/pypi/pylogsparser/0.4](http://pypi.python.org/pypi/pylogsparser/0.4)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-11-05T09:27:36.440

我创建了一个 python 库，它就是这样做的：[apa​​che-log-parser](https://github.com/rory/apache-log-parser)。

```
>>> import apache_log_parser
 >>> line_parser = apache_log_parser.make_parser("%h <<%P>> %t %Dus \"%r\" %>s %b  \"%{Referer}i\" \"%{User-Agent}i\" %l %u")
>>> log_line_data = line_parser('127.0.0.1 <<6113>> [16/Aug/2013:15:45:34 +0000] 1966093us "GET / HTTP/1.1" 200 3478  "https://example.com/" "Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.18)" - -')
>>> pprint(log_line_data)
{'pid': '6113',
 'remote_host': '127.0.0.1',
 'remote_logname': '-',
 'remote_user': '',
 'request_first_line': 'GET / HTTP/1.1',
 'request_header_referer': 'https://example.com/',
 'request_header_user_agent': 'Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.18)',
 'response_bytes_clf': '3478',
 'status': '200',
 'time_received': '[16/Aug/2013:15:45:34 +0000]',
 'time_us': '1966093'} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-03-31T18:54:00.647

考虑到格式的简单性，RegEx 似乎极端且有问题，所以我写了这个小拆分器，其他人可能也会觉得它有用：

```
def apache2_logrow(s):
    ''' Fast split on Apache2 log lines

    http://httpd.apache.org/docs/trunk/logs.html
    '''
    row = [ ]
    qe = qp = None # quote end character (qe) and quote parts (qp)
    for s in s.replace('\r','').replace('\n','').split(' '):
        if qp:
            qp.append(s)
        elif '' == s: # blanks
            row.append('')
        elif '"' == s[0]: # begin " quote "
            qp = [ s ]
            qe = '"'
        elif '[' == s[0]: # begin [ quote ]
            qp = [ s ]
            qe = ']'
        else:
            row.append(s)

        l = len(s)
        if l and qe == s[-1]: # end quote
            if l == 1 or s[-2] != '\\': # don't end on escaped quotes
                row.append(' '.join(qp)[1:-1].replace('\\'+qe, qe))
                qp = qe = None
    return row 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-11-03T11:57:03.027

```
import re

HOST = r'^(?P<host>.*?)'
SPACE = r'\s'
IDENTITY = r'\S+'
USER = r'\S+'
TIME = r'(?P<time>\[.*?\])'
REQUEST = r'\"(?P<request>.*?)\"'
STATUS = r'(?P<status>\d{3})'
SIZE = r'(?P<size>\S+)'

REGEX = HOST+SPACE+IDENTITY+SPACE+USER+SPACE+TIME+SPACE+REQUEST+SPACE+STATUS+SPACE+SIZE+SPACE

def parser(log_line):
    match = re.search(REGEX,log_line)
    return ( (match.group('host'),
            match.group('time'), 
                      match.group('request') , 
                      match.group('status') ,
                      match.group('size')
                     )
                   )

logLine = """180.76.15.30 - - [24/Mar/2017:19:37:57 +0000] "GET /shop/page/32/?count=15&orderby=title&add_to_wishlist=4846 HTTP/1.1" 404 10202 "-" "Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.html)"""
result = parser(logLine)
print(result) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-01-09T22:35:44.033

在 httpd.conf 中添加它以将 apache 日志转换为 json。

```
LogFormat "{\"time\":\"%t\", \"remoteIP\" :\"%a\", \"host\": \"%V\", \"request_id\": \"%L\", \"request\":\"%U\", \"query\" : \"%q\", \"method\":\"%m\", \"status\":\"%>s\", \"userAgent\":\"%{User-agent}i\", \"referer\":\"%{Referer}i\" }" json_log

CustomLog /var/log/apache_access_log json_log
CustomLog "|/usr/bin/python -u apacheLogHandler.py" json_log 
```

现在您看到了 json 格式的 access_logs。使用下面的 python 代码来解析不断更新的 json 日志。

apacheLogHandler.py

```
import time
f = open('apache_access_log.log', 'r')
for line in f: # read all lines already in the file
  print line.strip()

# keep waiting forever for more lines.
while True:
  line = f.readline() # just read more
  if line: # if you got something...
    print 'got data:', line.strip()
  time.sleep(1) 
```

# git - 如何将 git 文件状态添加到 vim 的状态行？

> ID：12544512
> 
> 赞同：8
> 
> 时间：2012-09-22T14:15:36.300
> 
> 标签：git, vim

我正在使用 vim-fugitive 并添加`%{fugitive#statusline()}`到状态行很好地显示了当前的 git 分支。

但是 git 文件状态指示器（如在`git status`输出中）呢？

例如，当打开的文件未被跟踪、暂存、清理等时，指示器将通过“[?]”、“[M]”、“[C]”或类似的方式将其显示在状态行中。

如何添加这样的指标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T16:04:33.187

你可以试试我的[aurum](https://bitbucket.org/ZyX_I/aurum)插件，它的单字符状态指示器是`%{Powerline#Functions#aurum#GetStatus()}`. 但请注意，aurum 的目标之一是将 VCS 差异隐藏在插件界面后面，因此有六种状态：添加、未知、修改、删除、删除、忽略、清理：均源自 mercurial；并且没有像“在索引中修改”这样的状态（它只是“修改”）。

对于除“clean”之外的所有状态，都会显示大写的第一个字母，对于“clean”，则根本不显示任何内容。`aurum#status()`如果您想更改它，请使用它，它`Powerline#Functions#aurum#GetStatus()`只是`aurum#status()`用于电力线的函数的两行包装器，如果您想更改行为，则无需为包装器创建包装器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T03:32:55.063

`+`如果当前文件被修改，这将显示：

```
system("[[ -n \"$(git status --porcelain " . shellescape(expand("%")) . ")\" ]] && echo -n +") 
```

作为 vim-powerline 段：

[https://github.com/twe4ked/dotfiles/blob/bd0f98531d3467e041af1b8f17556e0052389735/vim/plugin_config/powerline.vim#L1](https://github.com/twe4ked/dotfiles/blob/bd0f98531d3467e041af1b8f17556e0052389735/vim/plugin_config/powerline.vim#L1)

# facebook - Facebook API：是否允许透露用户删除了“喜欢”？

> ID：12544517
> 
> 赞同：-1
> 
> 时间：2012-09-22T14:15:52.757
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我知道“[禁止的功能](https://developers.facebook.com/docs/guides/policy/examples_and_explanations/Prohibited_Functionality/)”页面，并且应用程序不能，例如，显示好友删除。

但是，如果用户授予“user_likes”权限，是否允许跟踪他喜欢的内容（例如通过将这些喜欢存储在本地数据库中）并显示用户删除了喜欢的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:01:42.910

我不知道如何评论，因为我发布了评论的答案，但我在[禁止功能上看到了这个](https://developers.facebook.com/docs/guides/policy/examples_and_explanations/Prohibited_Functionality/)

**揭示朋友的删除**

您不得包含无视或规避 Facebook 产品限制的特性或功能。例如，如果有人将用户删除为好友，您不得通知用户，因为 Facebook 不会向用户发布此信息（单击此处了解更多信息），但您可以通过用户的新闻提要。您必须始终尊重用户隐私设置。

![在此处输入图像描述](../Images/0c6fe3439e31b0ae862534428fadd7ec.png)

例如，Facebook 的页面不允许您查看特定用户是否不喜欢您的内容，并且因为这不是 Facebook 通过逻辑（和规范）实现的，所以不允许您尝试这样做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T20:03:52.507

不，这不对！您可以在[Facebook 平台政策 II.2中找到](https://developers.facebook.com/policy/)

> 您可以缓存通过使用 Facebook API 接收到的数据，以改善您的应用程序的用户体验，但您应该尽量使数据保持最新。此许可不授予您对此类数据的任何权利。

# ruby-on-rails - PHP 到 Ruby on Rails

> ID：12544518
> 
> 赞同：-4
> 
> 时间：2012-09-22T14:16:05.080
> 
> 标签：ruby-on-rails

我在使用 PHP 方面有 4 年以上的经验！（Zend、CI、CakePHP）

但我正在查找 RoR 是否很难采用 RoR 或

它有点类似于 PHP 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:36:07.320

*坦率地说，我并没有真正回答 rails 是否比 PHP 更难。但我在这里所做的只是收集可能有助于某人开始使用 ROR 的东西。我喜欢 ROR，并且真的很想帮助想要开始使用它的人。*

### 红宝石

纯面向对象的语言。您在这里所做的一切（*调用函数、分配变量等*）实际上是在调用对象的函数。所以需要先抓住那种感觉。

### 导轨

一个纯 MVC 框架。由于您曾在**Cake**工作过，您可能会发现该`activerecord`部分很熟悉。使用**Codeigniter**将帮助您了解**MVC**层。

但是，要开始使用，我建议执行以下步骤：

### 1\. 一瞥 Ruby

*   得到一个非常简短的红宝石概念。[**这是**](http://www.troubleshooters.com/codecorn/ruby/basictutorial.htm)基本概念的链接。
*   尝试了解`Hash`, `Array`, `Symbol`,的概念`Number`。
*   了解 ruby​​ 分发。就像在 ruby​​ 发行版中一样，插件被称为**gem**。甚至`rails`您将要学习的内容`gem`也是 ruby​​ 中的 :)

### 2\. 从 Rails 开始

*   您需要学习 Rails 的术语。[**这是一个链接**](http://www.troubleshooters.com/codecorn/ruby/rails/rapidlearning_rails.htm)和[**另一个综合**](http://technikhil.wordpress.com/2011/12/31/rails_glossary/)链接。
*   在我看来，最简单的入门方法是**创建一个脚手架**=>**运行服务器内置的 rails** =>**看看它是如何工作的**。开始[**ruby​​OnRails 指南**](http://guides.rubyonrails.org/getting_started.html)很棒。
*   一旦你成功运行了你的脚手架应用程序，你就可以在 Rails 的轨道上运行了 :)
*   以下两个链接是您在 ROR 之旅中最好的朋友。
    *   [http://apidock.com/rails](http://apidock.com/rails)
    *   [http://guides.rubyonrails.org](http://guides.rubyonrails.org)

讨论和建议不是很快就能完成的。所以开始吧，在这个地方分享你所有的问题，即使是最愚蠢的问题。永远记住你的铁路朋友。当然 Stack Overflow 总是在你身边，但在这种情况下，最好提出具体的问题。

# c - AES_set_encrypt_key 分段错误

> ID：12544520
> 
> 赞同：0
> 
> 时间：2012-09-22T14:16:28.007
> 
> 标签：c, openssl, aes

我正在尝试使用 openssl 设置密钥。此代码正在生成分段错误。有人可以帮忙吗？

```
AES_KEY *aes_key;
unsigned char key[] = {
0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,
0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F,
};
unsigned char iv[] = {
0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,
0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F,
};

AES_set_encrypt_key(key, 128, aes_key); 
```

我还收到一个编译器错误，aes_key 可能没有被初始化，但是从我看到的其他代码来看，初始化似乎没有必要。?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T14:27:50.743

只是一个随机的猜测。试试这个：

```
AES_KEY aes_key;
unsigned char key[] = {
0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,
0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F,
};
unsigned char iv[] = {
0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,
0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F,
};

AES_set_encrypt_key(key, 128, &aes_key); 
```

我从未使用过 OpenSSL，但可能需要初始化 AES_KEY 的内存（我猜它是一个结构）。您只声明了一个指针。

# javascript - getElementsByClassName 不是 Firefox 中的函数

> ID：12544521
> 
> 赞同：2
> 
> 时间：2012-09-22T14:16:31.133
> 
> 标签：javascript, firefox, greasemonkey

我在 GoodReads 上的阅读书架混合了已出版和未出版的书籍，因此很难找到已出版的内容可供阅读。我想我可以组合一个 GreaseMonkey 脚本来更改尚未出版的书籍的条目背景。

到目前为止，这是我整理的：

```
// ==UserScript==
// @name        Unpublished Lowlighter
// @description Makes the background of books not yet published on the Goodreads to-read shelf grey.
// @include     http://www.goodreads.com/*
// ==/UserScript==

function dateColor() {
    var books = document.getElementsByClassName('bookalike review');
    for (var book in books) {
        var dateString = book
                        .getElementsByClassName('field date_pub')
                        .getElementsByClassName('value')
                        .textContent;
        var date = new Date(dateString);
        var today = new Date();
        if (date > today) {
            book.style.backgroundColor('Lightgrey');
        }
    }
}

dateColor(); 
```

问题是它不起作用。当我尝试在暂存器中运行脚本时，它给了我错误：`Exception: book.getElementsByClassName is not a function`

我的印象是 Firefox 支持`getElementsByClassName`并且您可以在结果上运行它`getElementsByClassName`以获取子元素。我哪里错了？

`<tr>`编辑：这是表格中一个的 HTML 片段。我没有发布这个开始的原因是它真的很冗长：

```
<tr id="review_265364012" class="bookalike review">
  <td class="field checkbox" style="display: none"><label>checkbox</label><div class="value">      <input id="checkbox_review_265364012" name="reviews[265364012]" value="265364012" type="checkbox">
</div></td>  <td class="field position"><label>position</label><div class="value">        <div class="reorderControls">
            <a class="actionLink" href="#" id="loading_link_434018960" method="post" onclick="$(this).hide(); $('loading_anim_434018960').show(); $('hidden_link_434018960').simulate('click');; return false;"><img alt="up" src="http://www.goodreads.com/assets/up_arrow-7957f2bae9c3456ec7359ad79b000652.gif" title="move book up"></a><img alt="Loading-trans" class="loading" id="loading_anim_434018960" src="http://www.goodreads.com/assets/loading-trans-3e04cd6ed6ad31063972e688820d7866.gif" style="display:none"><a href="/shelf/move_up/174788201?redirect_url=%2Freview%2Flist%2F4111865%3Fformat%3Dhtml%26page%3D1%26shelf%3Dto-read" class="actionLink" data-method="post" id="hidden_link_434018960" rel="nofollow" style="display: none"><img alt="up" src="http://www.goodreads.com/assets/up_arrow-7957f2bae9c3456ec7359ad79b000652.gif" title="move book up"></a>
          <img src="/assets/loading.gif" class="position_loading" style="display: none">
          <input id="positions_174788201" name="positions[174788201]" value="5" type="text">
          <script type="text/javascript">
//<![CDATA[
      var newTip = new Tip($('positions_174788201'), "            <nobr>\n              <a class=\"button\" href=\"#\" onclick=\"savePositionChanges(4111865); return false;\">Save position changes<\/a> &nbsp;\n              <a href=\"#\" onclick=\"$(\'positions_174788201\').prototip.hide(); return false;\">close<\/a>\n            <\/nobr>\n", { style: 'creamy', stem: 'leftMiddle', hook: { tip: 'leftMiddle', target: 'rightMiddle' }, offset: { x: 5, y: 5 }, hideOn: 'imaginaryelement', showOn: 'click', width: 'auto', hideOthers: true });
      $('positions_174788201').observe('prototip:shown', function() {
        if (this.up('#box')) {
          $$('div.prototip')[0].setStyle({zIndex: $('box').getStyle('z-index')});
        } else {
          $$('div.prototip')[0].setStyle({zIndex: 6000});
        }
      });

//]]>
</script>            <a class="actionLink" href="#" id="loading_link_434206980" method="post" onclick="$(this).hide(); $('loading_anim_434206980').show(); $('hidden_link_434206980').simulate('click');; return false;"><img alt="down" src="http://www.goodreads.com/assets/down_arrow-61b0e7292c02b1dcfd3f75a7f9b6b7ad.gif" title="move book down"></a><img alt="Loading-trans" class="loading" id="loading_anim_434206980" src="http://www.goodreads.com/assets/loading-trans-3e04cd6ed6ad31063972e688820d7866.gif" style="display:none"><a href="/shelf/move_down/174788201?redirect_url=%2Freview%2Flist%2F4111865%3Fformat%3Dhtml%26page%3D1%26shelf%3Dto-read" class="actionLink" data-method="post" id="hidden_link_434206980" rel="nofollow" style="display: none"><img alt="down" src="http://www.goodreads.com/assets/down_arrow-61b0e7292c02b1dcfd3f75a7f9b6b7ad.gif" title="move book down"></a>
        </div>
</div></td>  <td class="field cover"><label>cover</label><div class="value">      <a href="/book/show/12074927-the-fractal-prince"><img alt="The Fractal Prince (The Quantum Thief Trilogy #2)" src="http://photo.goodreads.com/books/1311105989s/12074927.jpg" title="The Fractal Prince (The Quantum Thief Trilogy #2)"></a>
</div></td>  <td class="field title"><label>title</label><div class="value">    <a href="/book/show/12074927-the-fractal-prince" title="The Fractal Prince (The Quantum Thief Trilogy #2)">
      The Fractal Prince
        <span class="darkGreyText">(The Quantum Thief Trilogy #2)</span>
</a></div></td>  <td class="field author"><label>author</label><div class="value">      <a href="/author/show/2768002.Hannu_Rajaniemi">Rajaniemi, Hannu</a>
</div></td>  <td class="field isbn" style="display: none"><label>isbn</label><div class="value">    
</div></td>  <td class="field isbn13" style="display: none"><label>isbn13</label><div class="value">    
</div></td>  <td class="field asin" style="display: none"><label>asin</label><div class="value">    
</div></td>  <td class="field num_pages" style="display: none"><label>num pages</label><div class="value">      <span class="greyText">unknown</span>
</div></td>  <td class="field avg_rating"><label>avg rating</label><div class="value">    3.67
</div></td>  <td class="field num_ratings" style="display: none"><label>num ratings</label><div class="value">    9
</div></td>  <td class="field date_pub"><label>date pub</label><div style="background: none repeat scroll 0% 0% Lightgrey;" class="value">      Sep 27, 2012
</div></td>  <td class="field date_pub_edition" style="display: none"><label>date pub edition</label><div class="value">      <span class="greyText">unknown</span>
</div></td>    <td class="field rating"><label>my rating</label><div class="value">
    <span class="stars" id="stars12074927_4111865" onmouseout="mouseOutStars('12074927')"><a rel="nofollow"><img alt="didn't like it " class="star" id="star12074927_0" onclick="submitStars('12074927', 0, '/review/rate/12074927?rating=1', 4111865);  return false;" onmouseover="checkStars('12074927', 0)" src="/assets/layout/gr_orange_star_inactive.png" title="didn't like it" height="15" width="15"></a><a rel="nofollow"><img alt="it was ok " class="star" id="star12074927_1" onclick="submitStars('12074927', 1, '/review/rate/12074927?rating=2', 4111865);  return false;" onmouseover="checkStars('12074927', 1)" src="/assets/layout/gr_orange_star_inactive.png" title="it was ok" height="15" width="15"></a><a rel="nofollow"><img alt="liked it " class="star" id="star12074927_2" onclick="submitStars('12074927', 2, '/review/rate/12074927?rating=3', 4111865);  return false;" onmouseover="checkStars('12074927', 2)" src="/assets/layout/gr_orange_star_inactive.png" title="liked it" height="15" width="15"></a><a rel="nofollow"><img alt="really liked it " class="star" id="star12074927_3" onclick="submitStars('12074927', 3, '/review/rate/12074927?rating=4', 4111865);  return false;" onmouseover="checkStars('12074927', 3)" src="/assets/layout/gr_orange_star_inactive.png" title="really liked it" height="15" width="15"></a><a rel="nofollow"><img alt="it was amazing " class="star" id="star12074927_4" onclick="submitStars('12074927', 4, '/review/rate/12074927?rating=5', 4111865);  return false;" onmouseover="checkStars('12074927', 4)" src="/assets/layout/gr_orange_star_inactive.png" title="it was amazing" height="15" width="15"></a></span><script language="javascript" type="text/javascript">starRatings[ratingIndex++] = [ '12074927', -1]; checkStars('12074927', -1);</script>
    <span id="reviewMessage12074927_4111865"></span>
    <span id="successMessage12074927_4111865"></span>
</div></td><td class="field shelves"><label>shelves</label><div class="value">    <span id="shelfList4111865_12074927"><span id="shelf_174788201"><a href="http://www.goodreads.com/review/list/4111865?shelf=to-read" class="shelfLink" title="View all books in Johan's to-read shelf.">to-read</a></span></span><br><a class="shelfChooserLink smallText" href="#" onclick="window.shelfChooser.summon(event, {bookId: 12074927, chosen: [&quot;to-read&quot;]}); return false;">[edit]</a>
</div></td><td class="field review" style="display: none"><label>review</label><div class="value">    <span class="greyText">None</span>
    <a class="floatingBoxLink smallText" href="#" onclick="reviewEditor.summon(this, 12074927, 'review', {value: null}); return false;">[edit]</a>
  <div class="clear"></div>
</div></td><td class="field notes" style="display: none"><label>notes</label><div class="value">      <span class="greyText">None</span>
      <a class="floatingBoxLink smallText" href="#" onclick="reviewEditor.summon(this, 12074927, 'notes', {value: null}); return false;">[edit]</a>
</div></td><td class="field recommender" style="display: none"><label>recommender</label><div class="value">    <span class="greyText">none</span>
</div></td><td class="field comments" style="display: none"><label>comments</label><div class="value">  <a href="/review/show/265364012">0</a>
</div></td><td class="field votes" style="display: none"><label>votes</label><div class="value">  <a href="/rating/voters/265364012?resource_type=Review">0</a>
</div></td><td class="field read_count" style="display: none"><label># times read</label><div class="value">    0
</div></td><td class="field date_started" style="display: none"><label>date started</label><div class="value">    <span class="greyText">not set</span>
    <a class="floatingBoxLink smallText" href="#" onclick="reviewEditor.summon(this, 12074927, 'started_at', {value: null}); return false;">[edit]</a>
</div></td><td class="field date_read"><label>date read</label><div class="value">    <span class="greyText">not set</span>
    <a class="floatingBoxLink smallText" href="#" onclick="reviewEditor.summon(this, 12074927, 'read_at', {value: null}); return false;">[edit]</a>
</div></td><td class="field date_added" style="display: none"><label>date added</label><div class="value">  <span title="January 21, 2012">
    Jan 21, 2012
  </span>
</div></td><td class="field date_purchased" style="display: none"><label>date purchased</label><div class="value">    <a class="smallText" href="#" id="add_for_date_purchased" onclick="new Ajax.Request('/review/update/12074927?format=json', {asynchronous:true, evalScripts:true, onFailure:function(request){Element.hide('loading_anim_206609');$('add_for_date_purchased').innerHTML = '<span class=&quot;error&quot;>ERROR</span>try again';$('add_for_date_purchased').show();}, onLoading:function(request){;Element.show('loading_anim_206609');Element.hide('add_for_date_purchased')}, onSuccess:function(request){Element.hide('loading_anim_206609');Element.show('add_for_date_purchased');var json = eval('(' + request.responseText + ')');$('review_265364012').replace(json.html);if (typeof(toggleFieldsToMatchHeader) == 'function') {toggleFieldsToMatchHeader();}}, parameters:'owned_book[book_id]=12074927&amp;partial=bookalike&amp;view=table' + '&amp;authenticity_token=' + encodeURIComponent('J5JjYi/D31hPm9w3u8hM35umQTh8bK3md4dVzpi4eKQ=')}); return false;">(add)</a><img alt="Loading-trans" class="loading" id="loading_anim_206609" src="http://www.goodreads.com/assets/loading-trans-3e04cd6ed6ad31063972e688820d7866.gif" style="display:none">
</div></td><td class="field owned" style="display: none"><label>owned</label><div class="value"></div></td><td class="field purchase_location" style="display: none"><label>purchase location</label><div class="value">    <a class="smallText" href="#" id="add_for_purchase_location" onclick="new Ajax.Request('/review/update/12074927?format=json', {asynchronous:true, evalScripts:true, onFailure:function(request){Element.hide('loading_anim_953979');$('add_for_purchase_location').innerHTML = '<span class=&quot;error&quot;>ERROR</span>try again';$('add_for_purchase_location').show();}, onLoading:function(request){;Element.show('loading_anim_953979');Element.hide('add_for_purchase_location')}, onSuccess:function(request){Element.hide('loading_anim_953979');Element.show('add_for_purchase_location');var json = eval('(' + request.responseText + ')');$('review_265364012').replace(json.html);if (typeof(toggleFieldsToMatchHeader) == 'function') {toggleFieldsToMatchHeader();}}, parameters:'owned_book[book_id]=12074927&amp;partial=bookalike&amp;view=table' + '&amp;authenticity_token=' + encodeURIComponent('J5JjYi/D31hPm9w3u8hM35umQTh8bK3md4dVzpi4eKQ=')}); return false;">(add)</a><img alt="Loading-trans" class="loading" id="loading_anim_953979" src="http://www.goodreads.com/assets/loading-trans-3e04cd6ed6ad31063972e688820d7866.gif" style="display:none">
</div></td><td class="field condition" style="display: none"><label>condition</label><div class="value">    <a class="smallText" href="#" id="add_for_condition" onclick="new Ajax.Request('/review/update/12074927?format=json', {asynchronous:true, evalScripts:true, onFailure:function(request){Element.hide('loading_anim_990684');$('add_for_condition').innerHTML = '<span class=&quot;error&quot;>ERROR</span>try again';$('add_for_condition').show();}, onLoading:function(request){;Element.show('loading_anim_990684');Element.hide('add_for_condition')}, onSuccess:function(request){Element.hide('loading_anim_990684');Element.show('add_for_condition');var json = eval('(' + request.responseText + ')');$('review_265364012').replace(json.html);if (typeof(toggleFieldsToMatchHeader) == 'function') {toggleFieldsToMatchHeader();}}, parameters:'owned_book[book_id]=12074927&amp;partial=bookalike&amp;view=table' + '&amp;authenticity_token=' + encodeURIComponent('J5JjYi/D31hPm9w3u8hM35umQTh8bK3md4dVzpi4eKQ=')}); return false;">(add)</a><img alt="Loading-trans" class="loading" id="loading_anim_990684" src="http://www.goodreads.com/assets/loading-trans-3e04cd6ed6ad31063972e688820d7866.gif" style="display:none">
</div></td><td class="field format"><label>format</label><div class="value"></div></td><td class="field actions"><label>actions</label><div class="value">    <div class="actionsWrapper greyText smallText">
      <div class="editLinkWrapper"><a class="actionLinkLite editLink" href="#" id="loading_link_818479" onclick="new Ajax.Request('/review/edit/12074927', {asynchronous:true, evalScripts:true, onFailure:function(request){Element.hide('loading_anim_818479');$('loading_link_818479').innerHTML = '<span class=&quot;error&quot;>ERROR</span>try again';$('loading_link_818479').show();}, onLoading:function(request){;Element.show('loading_anim_818479');Element.hide('loading_link_818479')}, onSuccess:function(request){Element.hide('loading_anim_818479');Element.show('loading_link_818479');}, parameters:'authenticity_token=' + encodeURIComponent('J5JjYi/D31hPm9w3u8hM35umQTh8bK3md4dVzpi4eKQ=')}); return false;">edit</a><img alt="Loading-trans" class="loading" id="loading_anim_818479" src="http://www.goodreads.com/assets/loading-trans-3e04cd6ed6ad31063972e688820d7866.gif" style="display:none"></div>
      <div class="viewLinkWrapper"><a href="/review/show/265364012" class="actionLinkLite viewLink nobreak">view »</a></div>
      <a href="/review/destroy/12074927?return_url=http%3A%2F%2Fwww.goodreads.com%2Freview%2Flist%2F4111865%3Fshelf%3Dto-read" class="actionLinkLite smallText deleteLink" data-confirm="Are you sure you want to remove The Fractal Prince from your books? This will permanently remove this book from your shelves, including any review, rating, tags, or notes you have added. To change the shelf this book appears on please edit the shelves." data-method="post" rel="nofollow">        <img alt="Remove from my books" src="http://www.goodreads.com/assets/layout/delete.gif" title="Remove from my books">
        <span class="label">remove book</span>
</a>    </div>
</div></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T20:42:57.857

该代码**中至少有3个问题**：

1.  你不能那样锁链`getElementsByClassName`。该函数对***DOM 元素****进行操作*，但*返回*一个***对象***。

****   `for (var book in books)`将循环未考虑的对象属性，并使此代码崩溃。 `books`是一个***对象***，而不是一个***数组***。

    *   `book.style.backgroundColor`不是函数，也不是如何设置样式。

    *   如今，`getElementsByClassName`很少有这种事情的最佳方法；使用`querySelectorAll`更多：灵活性/功率/精度​​。*** 

 **解决所有问题，这里的代码*应该可以*工作——假设页面结构确实与问题中的代码结构相匹配。如果没有，请发布相关的 HTML 片段和/或指向确切页面的链接。

```
// ==UserScript==
// @name        Unpublished Lowlighter
// @description Makes the background of books not yet published on the Goodreads to-read shelf grey.
// @include     http://www.goodreads.com/*
// ==/UserScript==

function dateColor() {
    var books = document.querySelectorAll (
        ".bookalike.review .field.date_pub .value"
    );
    var today = new Date(); // More efficient, outside the loop.

    for (var J = books.length - 1;  J >= 0;  --J) {
        var book        = books[J];
        var dateString  = book.textContent;
        var date        = new Date(dateString);
        if (date > today) {
            book.parentNode.parentNode.style.setProperty ("background", "Lightgrey");
        }
    }
}

dateColor(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T14:24:45.967

还有一个问题（除了试图调用`getElementsByClassName`NodeList 之外）`for (var book in books)`不会做你想做的事。`in`没有`foreach`像你期望的那样做；它从目标对象获取所有属性。由于 Javascript 对象的工作方式，对于数组，这将是数组索引；对于 NodeList，它是 NodeList 的属性（将是数组索引，**加上**字符串“length”和字符串“item”），这对您的循环没有用处。

你需要类似的东西

```
for (var i = 0; i < books.length; ++i) {
    var book = books[i];
    ...
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-22T14:20:39.753

这不起作用：

```
book
    .getElementsByClassName('field date_pub')
    .getElementsByClassName('value') 
```

`getElementsByClassName`返回适当元素的类数组对象（给定类可以有多个）。您将不得不遍历每一个并在每一个上执行`getElementsByClassName`。`getElementsByClassName`默认情况下不合并嵌套。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-22T14:20:00.457

您只能在单个 Element 对象上使用 getElementsByClassName，而不能像 getElementsByClassName 返回的那样使用 NodeList 或 HTMLCollection。也就是说，问题可能出在您的链接调用中，您在其中再次调用该函数本身。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-22T14:21:34.423

问题是您正在从`getElementsByClassName`.

假设您只是在寻找具有类名的第一个元素，这应该有效：

```
var dateString = book
                    .getElementsByClassName('field date_pub')[0]
                    .getElementsByClassName('value')[0]
                    .textContent; 
```**

# jquery - 适用于所有浏览器的自定义滚动条

> ID：12544528
> 
> 赞同：3
> 
> 时间：2012-09-22T14:18:12.007
> 
> 标签：jquery, html, css

我需要将自定义滚动条集成到我的 html 页面中的表格标记中。滚动条的主要要求是跨浏览器兼容并满足以下条件

1.  如果行数低于 50 且列数超过 30，则只会出现水平滚动条
2.  如果列不超过 30 行且行数超过 50，则只会出现垂直滚动条。

3.  在其余情况下，两个滚动条都会出现。

4.  在一个页面中，我们可以有多个表格标签。

我尝试了以下插件，它们都没有满足上述所有条件

1.  Flexcroll : www.hesido.com/web.php?page=customscrollbar 当我们放置两个表格时滚动条不起作用

2.  rocha.la/jQuery-slimScroll 两个滚动条都不起作用

3.  www.baijs.nl/tinyscrollbar/ 滚动条都不起作用

请为此建议一个插件或css脚本

# ruby-on-rails - Rails如何为2个日期之间的每个月创建图表数据？

> ID：12544533
> 
> 赞同：0
> 
> 时间：2012-09-22T14:18:33.793
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

在我的模型中，我有：

```
 def self.chart_data(start, slut)
  if start.nil?
  start = 2.weeks.ago
  end

  if slut.nil?
  slut = Date.today
  end

    range = start.to_date..(slut.to_date + 1.day)

  if start.to_date.beginning_of_month.to_s != slut.to_date.beginning_of_month.to_s

kliks = count(
  :group => 'date(month)',
  :conditions => { :created_at => range }
)
  # CREATE JSON DATA FOR EACH MONTH - PROBLEM HERE
  (range).map(&:beginning_of_month).uniq.map(&:to_s).each do |month|
    {
      created_at: month,
      clicks: kliks[month] || 0
    }
  end

  else

  kliks = count(
  :group => 'date(created_at)',
  :conditions => { :created_at => range }
)

  #WORKS FINE DATA FOR EACH DAY
  (start.to_date..slut.to_date).map do |date|
    {
      created_at: date.strftime("%F"),
      clicks: kliks[date] || 0
    }
  end
 end
end 
```

我在我的表中添加了一个列月。那是 created_at 列的开始时间。所以很容易按月分组。但是如何为每个月创建 JSON 数据呢？目前它不起作用。但是每天的数据都很好。

结果为`Klik.chart_data("1/8/2012", "22/9/2012")`

```
 <div data-clicks="[{&quot;created_at&quot;:&quot;2012-09-08&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-09&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-10&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-11&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-12&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-13&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-14&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-15&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-16&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-17&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-18&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-19&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-20&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-21&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-22&quot;,&quot;clicks&quot;:11}]" id="click_chart"> 
```

第一个答案结果：

```
<div data-clicks="[{&quot;created_at&quot;:&quot;2012-09-08&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-09&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-10&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-11&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-12&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-13&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-14&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-15&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-16&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-17&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-18&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-19&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-20&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-21&quot;,&quot;clicks&quot;:0},{&quot;created_at&quot;:&quot;2012-09-22&quot;,&quot;clicks&quot;:11}]" id="click_chart"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:35:03.863

尝试使用

```
(start.to_date..slut.to_date).map(&:beginning_of_month).uniq.map do |date|
  {
    created_at: date.strftime("%F"),
    clicks: kliks[date] || 0
  }
end 
```

或者

```
(start.to_date.beginning_of_month..slut.to_date).reject{|date| date.day !=1}.map do |date|
  {
    created_at: date.strftime("%F"),
    clicks: kliks[date] || 0
  }
end 
```

# android - 从另一个视图滚动视图

> ID：12544537
> 
> 赞同：1
> 
> 时间：2012-09-22T14:18:54.277
> 
> 标签：android

我的布局中有一个水平滚动视图。它包含一个线性布局（垂直方向），它又包含按钮。在这个区域中，我可以水平滚动（在大多数手机中，按钮一次无法在一个屏幕中组合在一起）。Android 为我提供了这种舒适感。现在在这个水平滚动视图下方，有一个相对布局。
现在我想要的是，当我在相对布局中水平滑动时，我希望水平滚动视图中的按钮滚动。
我试图通过覆盖`onTouchEvent()`. 问题在于，按钮无限滚动（它们离开屏幕）。我无法设置限制。我试图设定一个限制。但是有些它如何超过限制 1 并停止。然后我无法滚动。
**这是我的布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:focusableInTouchMode="true" >

    <HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content" android:layout_height="wrap_content">
    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"  
        android:id="@+id/llt"
        >

        <Button
        android:id="@+id/login"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:background="@drawable/button1"
        style="@style/ButtonText"
       android:text="Groups" />

        <Button 
            android:id="@+id/login1"
            android:layout_width="wrap_content"
            android:layout_height="50dp"
            android:background="@drawable/button1"
        style="@style/ButtonText"
            android:text="QandA"/>
                <Button 
            android:id="@+id/login2"
            android:layout_width="wrap_content"
            android:layout_height="50dp"
            android:background="@drawable/button1"
            style="@style/ButtonText" 
            android:text="Pending Requests"/>
            <Button
            android:id="@+id/login3"
            android:layout_width="wrap_content"
            android:layout_height="50dp"
            android:background="@drawable/button1"
            style="@style/ButtonText"
            android:text="Settings"
            ></Button>
                        <Button 
            android:id="@+id/login4"
            android:layout_width="wrap_content"
            android:layout_height="50dp"
            android:background="@drawable/button1"
        style="@style/ButtonText" 
            android:text="Help"/>
    </LinearLayout>        
        </HorizontalScrollView>

    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/rl1"
     android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
   >
    .
    .
    . 
```

**这是我尝试过的：**

```
@Override 
 public boolean onTouchEvent(MotionEvent event) {
   switch (event.getAction()) {
       case MotionEvent.ACTION_DOWN: {
           currentX = (int) event.getRawX();
           currentY = (int) event.getRawY();
           break;
       }

       case MotionEvent.ACTION_MOVE: {
           int x2 = (int) event.getRawX();
           int y2 = (int) event.getRawY();
           if(location1[0]<=leftconst&&(location2[0]+rightmost.getWidth())>=rightconst)
           {
           llt.scrollBy(currentX - x2 ,0);
           }
           currentX = x2;
           currentY = y2;
           break;
       }   
       case MotionEvent.ACTION_UP: {
           break;
       }
   }
     return true; 
 } 
```

`leftconst`和`rightconst`分别等于 3 和`screenwidth`。但是当滚动它时它会停止两端。然后在那之后滚动是不可能的。`leftmost`是带有 id 的按钮`login`，`rightmost`是带有 id 的按钮`login4`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:40:45.343

而不是`scrollBy`use `scrollTo(x2)`，这将更准确地滚动。在您的代码中使用 scrollBy 会让人感到困惑。

`scrollTo`可以这样计算的参数

```
final float ratio = horizontalscrollView_width/relativelayout_width; 
```

然后在 onTouch

```
scrollTo( x2 * ratio, 0); 
```

`VelocityTracker`成功完成滚动后，您可以使用来实现投掷功能..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T16:21:54.517

在更深入地分析了我自己的代码之后，我发现限制使滚动永远停止（如果用户以另一种方式滚动，它不应该停止）。所以我在 if 语句中添加了另一个检查来检查**滚动方向**（通过存储前一个位置）。

```
case MotionEvent.ACTION_MOVE: {
           int x2 = (int) event.getRawX();
           int y2 = (int) event.getRawY();
           int location1[] = new int[2];
           int location2[]=new int[2];
           leftmost.getLocationOnScreen(location1);
           rightmost.getLocationOnScreen(location2);
          Toast.LENGTH_SHORT).show();
           if((x2-currentX<0||location1[0]+1<leftconst)&&((location2[0]+rightmost.getWidth())+1>rightconst||x2-currentX>0))
           {
           llt.scrollBy(currentX - x2 ,0);
           }
           currentX = x2;
           currentY = y2;
           break;
       } 
```

**编辑**
没有 if 语句本身的更好和更简单的解决方案。而不是滚动`LinearLayout`（llt），只需滚动它`**HorizontalScrollView**`本身！无需指定任何限制，因为它`HorizontalScrollView`会照顾到这一点。

```
case MotionEvent.ACTION_MOVE: {
           int x2 = (int) event.getRawX();
           int y2 = (int) event.getRawY();
           hscrv.scrollBy(currentX - x2 ,0);
           currentX = x2;
           currentY = y2;
           break;
       } 
```

`hscrv`是包含线性布局和按钮的水平滚动视图。

# jquery - 如何在 jquery 中用数组填充表？

> ID：12544538
> 
> 赞同：1
> 
> 时间：2012-09-22T14:18:56.890
> 
> 标签：jquery, ajax, arrays, multidimensional-array

我有一个我无法弄清楚的问题。我有一个 ajax 成功函数，它遍历一个多维数组，如下所示：

```
function onSuccessClientCustomerData(data) {
    // Count length of object
    var count = 0;
    for (i in data) {
        if (data.hasOwnProperty(i)) {
            count++;
        }
    }

    // Fetch data
    var arr = new Array(data.variable0, data.variable1, data.variable2, data.variable3, data.variable4);
    for(var i = 0; i< count; i++) {
        var variable = $.parseJSON(arr[i]);

    }
} 
```

我每个数组都有三个键，我想在每一行上填充 td:eq(1) 到 td:eq(2)：

```
<table id="test">
<tr>
    <td><input type="text"></td>
<td class="outputName">-</td>
    <td class="outputRating">-</td>
<td class="outputTurnover">-</td>
</tr>
<tr>
    <td><input type="text"></td>
<td class="outputName">-</td>
    <td class="outputRating">-</td>
<td class="outputTurnover">-</td>
</tr>
</table> 
```

我怎么做。我已经尝试了每个功能，但无法让它工作！

将不胜感激任何帮助或参考阅读！

谢谢！

**编辑/这是我的解决方案**

```
function onSuccessClientCustomerData(data) {
    // Count length of object
    var count = 0;
    for (i in data) {
        if (data.hasOwnProperty(i)) {
            count++;
        }
    }

    // Fetch data
    var arr = new Array(data.variable0, data.variable1, data.variable2, data.variable3, data.variable4);
    for (var i = 0; i < count; i++) {
        var arr_j = $.parseJSON(arr[i]);
        $("#row" + i + " .key0").html(arr_j.name);
        $("#row" + i + " .key1").html(arr_j.rating);
        $("#row" + i + " .key2").html(arr_j.percentOfTotalIncome);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T14:37:43.130

您在必须插入值的部分需要帮助吗？如果是这样：

# jQuery 代码

```
function onSuccessClientCustomerData(data) {
    // Count length of object
    var count = 0;
    for (i in data) {
        if (data.hasOwnProperty(i)) {
            count++;
        }
    }

    // Fetch data
    var arr_i = new Array(data.variable0, data.variable1, data.variable2, data.variable3, data.variable4);
    for (var i = 0; i < count; i++) {
        var arr_j = arr_i[i];
        for (var j = 0; j < arr_j. length; j++) {
            $("#row" + i + " .key" + j).html(arr_j[j]);
        }
    }
} 
```

# HTML 代码

```
<table id="test">
  <tr id="row0">
    <td><input type="text"></td>
    <td class="key0" class="outputName">...</td>
    <td class="key1" class="outputRating">...</td>
    <td class="key2" class="outputTurnover">...</td>
  </tr>
  <tr id="row1">
    <td><input type="text"></td>
    <td class="key0" class="outputName">...</td>
    <td class="key1" class="outputRating">...</td>
    <td class="key2" class="outputTurnover">...</td>
  </tr>
</table> 
```

# 测试代码

我用 Chrome 测试了代码，它运行良好。以下是重现它的步骤：-

*   使用打开元素窗格`F12`并执行以下操作：

    1.  将 HTML 部分添加到网页中；
    2.  可以选择添加边框和一些边距以使其更清晰；

*   `Ctrl`使用++打开 Web 控制台并执行以下操作`Shift`：`J`

    1.  给`arr_i`（我们将使用它而不是`data`）一个占位符值：

        ```
        var arr_i = new Array([00, 01, 02], [10, 12, 13]); 
        ```

    2.  运行代码进行设置`count`：

        ```
        // Count length of object
                var count = 0;
                for (i in data) {
                    if (data.hasOwnProperty(i)) {
                        count++;
                    }
               } 
        ```

    3.  使用我的函数添加值（确保在使用 jQuery 的页面上运行代码！否则，使用[此书签](http://marklets.com/jQuerify.aspx)）：

        ```
        for (var i = 0; i < count; i++) {
            var arr_j = arr_i[i];
            for (var j = 0; j < arr_j. length; j++) {
                $("#row" + i + " .key" + j).html(arr_j[j]);
            }
        } 
        ```

瞧！这应该能给我带来大约 20 到 30 票~~今天之前~~ ~~明天~~ ~~本星期~~明年（希望）...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:22:20.563

```
function onSuccessClientCustomerData(data) {
    var data = $.parseJSON(data);
    ....
} 
```

您需要先解析数据。

# javascript - fancybox 中的两个标题？

> ID：12544539
> 
> 赞同：0
> 
> 时间：2012-09-22T14:19:22.030
> 
> 标签：javascript, jquery, css, fancybox

我正在尝试为fancybox iframe 设置两个标题框。我使用的是1.3.4 版，这是我目前得到的。

![在此处输入图像描述](../Images/5f8c960fdb5c478857949ec83ce799f2.png)

这是相关的源代码：

```
$(document).ready(function() {
        $("a.group").fancybox({
            'zoomSpeedIn'           : 600,
            'zoomSpeedOut'          : 500,
            'easingIn'              : 'easeOutBack',
            'easingOut'             : 'easeInBack'

        });

$("a.iframe").fancybox({
        'titlePosition' : 'over',
            'showCloseButton'   : false,
            'titleShow'         : true,
            'scrolling'         :'no',
            'width'        : 650,
            'height'       : 660,
            'autoScale'         : false,
            'transitionIn'      : 'none',
            'transitionOut'     : 'none',
            'type'              : 'iframe',
            'hideOnOverlayClick': false,
            'hideOnContentClick': false,
            'enableEscapeButton': false
        });
    }); 
```

但我想在我的灯箱底部有相同的标题框，而不删除它顶部的标题框。所以我在 fancybox css 中创建了另一个属性：

```
.fancybox-title-over1 {
    position: absolute;
    bottom: 0;
    left: 0;
    color: #FFF;
    text-align: left;
}

#fancybox-title-over1 {
    padding: 10px;
    background-image: url('mybottomtitlebackground.png');
    display: block;
} 
```

但我不知道如何在我的灯箱上显示它。

预先感谢您的协助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T19:10:52.933

如果我正确理解您的问题，您可以克隆标题，然后将其放在底部：

```
var title = $(".fancybox-title-over");
title.css({'top':'0px', 'bottom':'auto'});
var p = $(".fancybox-title-over").parent();
var x = $(".fancybox-title-over").clone();
p.append(x);
x.css({"top":"auto","bottom":"0", "position":"absolute"}); 
```

更新小提琴：http: [//jsfiddle.net/a65ZN/11/](http://jsfiddle.net/a65ZN/11/)

# doctrine-orm - Doctrine2 避免 SET NAME UTF8

> ID：12544546
> 
> 赞同：1
> 
> 时间：2012-09-22T14:20:33.187
> 
> 标签：doctrine-orm

我的数据库和所有表都有 UTF8 字符集。然而，Doctrine2 向每个连接（即网页）添加了额外的不同命令，正如我在 Symfony2 的调试器中看到的那样（例如显示对 DB 的所有查询）：

```
SET NAMES UTF8 
```

这是不必要的。有可能避免吗？怎么做？谢谢。

# java - 如何实现我自己的 XBRL 转换器？

> ID：12544548
> 
> 赞同：0
> 
> 时间：2012-09-22T14:20:46.477
> 
> 标签：java, xml, xbrl

我想开发一个 XBRL 转换器，它可以将文档/报告从 .doc/.xml/.txt/.csv 转换为标准的 XBRL 格式。我试图搜索它，但只能从建议使用已开发软件的业务角度获取信息，但我想要一些可以指导我自己构建应用程序的东西。因此，我需要有关转换器/标记过程架构的任何资源/帮助。我想在 JAVA 中实现应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T17:07:06.973

我开发了一个 XBRL 转换器来从 Excel 工作表创建一个实例。我使用了 VBA 和一些常用组件。该转换器与荷兰分类法的法定报告兼容。它包括分类学的发现和超立方体的创建。基本版本的 Excel 电子表格发布在我的网站上。代码不受保护。那里也有解释。它是荷兰语的，所以你应该使用谷歌翻译之类的东西。也许这是让你开始。

这是链接： http: [//www.dexbrlsite.nl/wiki/index.php/MSXML_oplossing](http://www.dexbrlsite.nl/wiki/index.php/MSXML_oplossing)

问候， 雅克

# python - 网页解析内容的 lxml 长度

> ID：12544549
> 
> 赞同：0
> 
> 时间：2012-09-22T14:20:52.297
> 
> 标签：python, lxml, scrape

`lxml`我用Python抓取网页。然而，要获取表格行数，我首先将它们全部获取，然后使用`len()`函数。我觉得这很浪费，还有其他方法可以让他们的号码（动态号码）进一步刮吗？

```
import lxml.html
doc = ''
try:
    doc = lxml.html.parse('url')
except SkipException: pass 

if doc: 
    buf = ''
    #get the total number of rows in table
    tr = doc.xpath("/html/body/div[1]/div[1]/table[1]/tbody/tr")
    table = []
    # iterate over the table rows limited to max number
    for i in range(3, len(tr)):
            # get the rows content                                              
            table += doc.xpath("body/div[1]/div[1]/table[1]/tbody/tr[%s]/td" % i) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T14:45:15.873

您是否尝试使用迭代器方法，如本节所述：http: [//lxml.de/api.html#iteration](http://lxml.de/api.html#iteration)？我很确定有这样的方法。找到某个东西的长度，然后用 (x)range 对其进行迭代从来都不是一个优雅的解决方案，我很确定 lxml 背后的人为您提供了正确的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T15:00:50.923

您可以使用`tr`匹配的元素作为起点，您可以像使用 python 列表一样简单地迭代它们：

```
tr = doc.xpath("/html/body/div[1]/div[1]/table[1]/tbody/tr")
for row in tr[3:]:
    table += row.findall('td') 
```

以上用于`.findall()`获取所有包含的`td`元素，但`.xpath()`如果您需要更多控制，可以使用进一步的调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T14:37:09.437

```
from itertools import islice

trs = doc.xpath("/html/body/div[1]/div[1]/table[1]/tbody/tr")
for tr in islice(trs, 3):
   for td in tr.xpath('td'):
      ...whatever... 
```

# ruby-on-rails - 如何在 Ruby 中创建一个新的 Date 实例

> ID：12544552
> 
> 赞同：42
> 
> 时间：2012-09-22T14:21:05.530
> 
> 标签：ruby-on-rails, ruby, date, datetime, activesupport

如何在给定日期的 IRB 中创建一个新的 Date 对象。以下没有奏效。

```
1.9.3p194 :053 > require 'active_support'
 => true 
1.9.3p194 :054 > Date.new
 => #<Date:0x9d80730> 
1.9.3p194 :055 > Date.parse('12/01/2012')
NoMethodError: undefined method `parse' for Date:Class
        from (irb):55

1.9.3p194 :055 > Date.new('12/01/2012')
ArgumentError: wrong number of arguments(1 for 0) 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-22T14:30:53.717

根据[日期文档](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html)：

```
require 'date'

Date.new(2001,2,25)           #=> #<Date: 2001-02-25 
Date.jd(2451966)             #=> #<Date: 2001-02-25 
Date.ordinal(2001,56)        #=> #<Date: 2001-02-25 
Date.commercial(2001,8,7)    #=> #<Date: 2001-02-25 
Date.parse('2001-02-25')     #=> #<Date: 2001-02-25 
Date.strptime('25-02-2001', '%d-%m-%Y') #=> #<Date: 2001-02-25 
Time.new(2001,2,25).to_date   #=> #<Date: 2001-02-25 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-22T14:28:35.400

```
1.9.3-p125 :012 > require 'date'
 => true 
1.9.3-p125 :013 > Date::new(2012,02,03)
 => #<Date: 2012-02-03 ((2455961j,0s,0n),+0s,2299161j)> 
1.9.3-p125 :014 > 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-03-06T21:12:43.707

我发现以下内容比以下更容易记住`Date.new`：

```
require 'active_support/core_ext/string'
'2019-03-31'.to_date
=> #<Date: 2019-03-21 ((2458564j,0s,0n),+0s,2299161j)> 
```

请参阅[https://apidock.com/rails/String/to_date](https://apidock.com/rails/String/to_date)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T14:36:27.070

如果您尝试在 Rails 之外获取对 Date 的 active_support 扩展，则必须使用 core_ext 模块：

```
require 'active_support/core_ext/date/calculations'
Date.parse('12/01/2012')
=> #<Date: 2012-01-12 ((2455939j,0s,0n),+0s,2299161j)> 
```

此 Rails 指南中的更多信息：http: [//edgeguides.rubyonrails.org/active_support_core_extensions.html](http://edgeguides.rubyonrails.org/active_support_core_extensions.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T14:30:51.497

```
Date.strptime("2012-09-21 19:45:48","%Y-%m-%d %H:%M:%S") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-09T17:44:21.280

您需要使用 Ruby 标准库中的日期扩展名。文档中的大多数示例并不总是显示您需要它。

```
require 'date' 
```

是你需要的。它不是一组内置的类或模块。

你得到两个类加上那个，

```
Date
DateTime 
```

有了它，您现在可以使用[文档中的信息](http://ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-29T06:31:54.000

```
require 'date'
Date::strptime("29-05-2017", "%d-%m-%Y") 
```

因此，您需要在代码中包含此*日期*模块，然后使用*strptime*方法，您可能会注意到其中的年份，我使用了大写**Y**，因为全年作为 strptime 方法的第一个参数输入。如果日期类似于“29-05-17”，您可以使用小**y 。**

# javascript - javascript对象的成员可以完全迭代吗？

> ID：12544554
> 
> 赞同：2
> 
> 时间：2012-09-22T14:21:14.167
> 
> 标签：javascript, object, reflection

我希望能够遍历对象的**所有**成员。像这样的东西：

```
 function reflect(obj) {
 var str = "";
 for (member in obj) { str += (member + "\n"); }
 return str;
 } 
```

但是*Enumerable*标志会阻止许多成员出现在*for in*循环中。我的问题是：

1.  是否有另一种方法可以遍历一个对象的**所有**成员？

2.  如果没有，是否可以访问这些标志？（**我**可以将*Enumerable*设置为 true 吗？）

3.  有没有办法暴露原型链并确定哪个成员属于哪个祖先？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:23:59.803

你可以使用`getOwnPropertyNames`它。无论可枚举选项如何，它都会返回所有属性。

```
var objectProperties = Object.getOwnPropertyNames(obj); 
```

**更新**这仅适用于 Javascript 1.8.5 和更新版本！（感谢@Kiyura）

# assembly - 这个 asm 代码是什么意思？我如何检查这些值？

> ID：12544561
> 
> 赞同：1
> 
> 时间：2012-09-22T14:22:22.013
> 
> 标签：assembly, gdb

```
Dump of assembler code for function main:
0x0000000100000de6 <main+0>:    push   %rbp
0x0000000100000de7 <main+1>:    mov    %rsp,%rbp
0x0000000100000dea <main+4>:    sub    $0x30,%rsp
0x0000000100000dee <main+8>:    mov    %edi,-0x14(%rbp)
0x0000000100000df1 <main+11>:   mov    %rsi,-0x20(%rbp)
0x0000000100000df5 <main+15>:   movq   $0x0,-0x8(%rbp)
0x0000000100000dfd <main+23>:   cmpl   $0x2,-0x14(%rbp) 
```

我想了解第三行。

$0x30 ?(constant 0x30? or the value of address 0x30 ? , if then, 如何访问该值？如果我键入 'p *0x30'，则会发生错误。（这可以更改堆栈指针的值吗？？<- - 目标是 rsp？不是 '$0x30'？）

和

-0x14(%rbp) 是什么？

（我使用 OSX）
谢谢你的提前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T14:33:27.797

前两条指令是设置*堆栈帧*。然后按出场顺序：

```
<main+0>:    push   %rbp
<main+1>:    mov    %rsp,%rbp
<main+4>:    sub    $0x30,%rsp       ;reserves 48 bytes on the stack for local variables
<main+8>:    mov    %edi,-0x14(%rbp) ;stores %edi at the address that is less than %rbp by 20 bytes 
<main+11>:   mov    %rsi,-0x20(%rbp) ; stores %rdi at the address that is less than %rbp by 32 bytes
<main+15>:   movq   $0x0,-0x8(%rbp) ; clears the qword at -0x8(%rbp) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:27:07.797

`$0x30`是恒定的十六进制值 30（十进制为 48）。该行的作用是从堆栈指针中减去 48 `%esp`- 有效地将 48 个字节推入堆栈（请记住，堆栈向下增长）。

`-0x14(%rbp)`是地址的值`%rbp - 0x14`- 在 C 术语中，它大致是

```
unisigned char *rbp; // this is the rbp register
unsidned long edi;
edi = *(unsigned long *)(rbp - 0x14) // this is the actual value. 
```

请注意转换为字长 - CPU 寄存器通常保存一个字的数据。

# java - 为什么在将 args[0] 与字符串进行比较时会出现此输出？

> ID：12544564
> 
> 赞同：-1
> 
> 时间：2012-09-22T14:22:51.550
> 
> 标签：java, string, comparison

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

当我将以下代码作为“java XYZ BOY”运行时，输出为“无效类型”，如何？

```
public class XYZ 
{
    public static void main(String args[])
    {

        if(args[0]=="BOY")
            System.out.println("He is boy");

        else if(args[0]=="Girl")
            System.out.println("She is girl");

        else
        System.out.println("Invalid type");

    }
} 
```

但是，当我使用 时`args[0].equals("BOY")`，它会提供所需的输出。我想知道为什么我不使用时会出现问题`String.equals()`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T14:24:13.717

运算符`==`测试两个变量是否引用了您不感兴趣的同一个对象。相反，您想知道两个 String 变量是否引用了以相同顺序和相同大小写保存相同字符的 String 对象，这是做什么`equals(...)`的，或者不管大小写，这是做什么`equalsIgnoreCase(...)`的。

`equals(...)`所有类都从最终的父类[Object](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html)中获得一个默认方法，如果没有被覆盖，它将执行与`==`API 相同的操作：

> Object 类的 equals 方法实现了对象上最有区别的可能等价关系；也就是说，对于任何非空引用值 x 和 y，当且仅当 x 和 y 引用同一个对象（x == y 的值为 true）时，此方法才返回 true。

许多类都重写了这个方法，以使用他们自己的对类有意义的相等性测试。String 就是这样一个类。有关 String 如何执行此操作的更多详细信息，请查看其[API](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)，其中指出：

> 将此字符串与指定对象进行比较。当且仅当参数不为 null 并且是表示与此对象相同的字符序列的 String 对象时，结果才为真。

说了这么多——投票结束这个问题作为重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T14:31:58.180

您看到“无效类型”是因为您使用的是 == 运算符。== 运算符用于比较两个具有相同值的对象及其引用是否应该相同。尽管在您的第一个条件下您使用的是 == 运算符，但它会返回 false。因为即使值相同但对象也不相同。接下来在第二种情况下，您正在检查 BOY==GIRL 这将返回 false。因此它将打印“无效类型”，即

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T14:34:12.820

如果某些对象具有相同的内容，则认为它们是相同的。对于那些，用于`.equals(Object)`比较对象内容。

如果某些对象是相同的实例，则它们被认为是相同的。对于那些，用于`==`比较对象实例。

您可以通过覆盖来更改对象的内容比较`public boolean equals(Object)`，但如果这样做，请记住您必须遵守三个规则，Java 框架的其余部分才能正常工作。

1.  自反：a.equals(a) 必须为真。
2.  对称：如果 a.equals(b)，则 b.equals(a) 必须为真。
3.  传递：如果 a.equals(b) 和 b.equals(c) 则 a.equals(c) 必须为真。

此外，相等操作应该是一致的，这样如果 a.equals(b) 并且没有对 a 或 b 进行更新，那么 a.equals(b) 应该保持为真。

`public int hashcode()`一旦你覆盖了equals，你可以通过覆盖返回相同的值来获得哈希相关集合的性能改进，只要`equals(...)`会返回true。`equals(...)`此外，如果返回 false ，它返回相同值的机会应该非常低。不需要进行“完美”哈希，`hashcode(...)`如果返回 false，则保证返回不同的值`equals(...)`，因为所有 Java 集合例程`equals(...)`在检查*可能*与`hashcode(...)`.

# javascript - 简单的 if else 结构。具有不同的 lang 属性

> ID：12544565
> 
> 赞同：0
> 
> 时间：2012-09-22T14:23:03.063
> 
> 标签：javascript, jquery, if-statement

我做了一个简单的 if 和 else 结构。但它不起作用。我得到了错误。EN 未定义。

我该如何解决？

谢谢，

```
var theLanguage = $('html').attr('lang');
// Diferent language
if ($(theLanguage) == "en") {

} else {

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:25:56.107

您正在将存储的值传递`theLanguage`给 jQuery 函数。为什么？这将返回一个 jQuery 对象，因此它永远不会`== "en"`.

如果你想看看是否`"en"`是值，你会做一个直接的比较。

```
if (theLanguage == "en") { 
```

如果您收到*ReferenceError: en is not defined*，那么您`en`缺少引号`"en"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T14:26:14.233

```
var theLanguage = $('html').attr("lang"); 
```

theLanguage 变量是一个字符串文字值。

$(theLanguage) 不是一个 jquery 对象，这就是它抛出错误的原因。

你可以检查为

```
if(theLanguage == ""en){
} 
```

就这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T14:25:35.167

`theLanguage``lang`是您可能想要比较的属性的字符串值，`"en"`所以您不这样做`$(theLanguage)`，您只需`theLanguage`像这样直接比较：

```
var theLanguage = $('html').attr('lang');
// Diferent language
if (theLanguage == "en") {

} else {

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T14:25:45.890

该`.attr()`函数已经返回一个字符串。不要将其包装在另一个中`$()`，而是直接将其值：

```
var theLanguage = $('html').attr('lang');
// Diferent language
if (theLanguage == "en") {

} else {

} 
```

# c++ - 队列的同步问题

> ID：12544566
> 
> 赞同：1
> 
> 时间：2012-09-22T14:23:09.680
> 
> 标签：c++, concurrency, synchronization, queue

我有以下代码可以访问 c++ 队列（responseQueue）并在进行一些处理后发送响应：

```
void sendRelpyToClient(){    
    if (responseQueue.empty())
       return;

    static int count = 0;
    Result result;

    SYNCHRONIZE() { //start of synchronization (pseudo-code)

       result = responseQueue.front();
       responseQueue.pop();

    } //end of synchronization

    if(count++ % 9 == 0)
    {
        //simulate some processing with a sleep
        sleep for 15 seconds

    }

    result.sendResult();
} 
```

的`responseQueue`包含实例`Result`。该`sendResult()`方法可能需要一些处理时间，因此对于存储在队列中的某些结果，该方法可能需要相对较长的时间才能返回。该方法`sendRelpyToClient()`被多个线程访问，如果`result.sendResult()`也在`SYNCHRONIZED()`块中，则任何其他进入的线程都可能因`sendResult()`方法返回时间长而被阻塞。这就是我选择这种方法的原因。

我对此实现的逻辑是任何访问 responseQueue 的线程都将首先检查队列是否为空并返回。由于任何访问该块的线程`SYNCHRONIZE()`都会在队列中只有一个项目时使队列为空，因此无需将此检查放在`SYNCHRONIZE()`块内。如果正在访问队列的一个线程在`SYNCHRONIZE()`块之后立即被取消（由线程调度程序），则第二个线程再次将获取队列中的下一项并调用，当第一个线程再次恢复时，`result.sendResult()`它将继续调用`result.sendResult()`result 的线程本地值（该线程在被阻塞之前从队列中获得）。静态计数变量在那里，以便我可以使用睡眠模拟随机线程的长时间处理，因为正如我在上面解释的那样`sendResult()`某些呼叫可能需要很长时间。

我用这段代码运行了一组测试，到目前为止一切正常。但是我只是想在这里问这个问题，以便如果这种方法有任何问题，我可以得到你们的所有想法。我不是并发编程方面的专家。如果有更好、更高效、更干净的方法来做到这一点，也许不是在队列级别而是在单个数据项级别的并发，请也让我知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T15:07:59.187

一般来说，您的方法是正确的，但我想注意两点：

1.  正如 Xeo 已经提出的那样，您应该检查同步块内的队列是否为空。

2.  您有一个全局变量的静态变量`count`，并且您从多个线程读取/写入它而没有同步。这不是那么危险，但可能会导致算法的错误工作。请记住，增量不是原子操作。当 2 个线程同时为计数写入新值时，您可能会遇到这种情况。

UPD：修复很简单：

```
 void sendRelpyToClient(){    
        static int count = 0;
        Result result;

        bool execute = false;

        SYNCHRONIZE() { //start of synchronization (pseudo-code)
            if (responseQueue.empty())
               return;
           result = responseQueue.front();
           responseQueue.pop();

           execute = (count++ % 9 == 0);
        } //end of synchronization

        if (execute)
        {
            //simulate some processing with a sleep
            sleep for 15 seconds
        }
        result.sendResult();
    } 
```

# javascript - 属性的直接访问显示与对象控制台输出不同的值

> ID：12544568
> 
> 赞同：2
> 
> 时间：2012-09-22T14:23:33.343
> 
> 标签：javascript, object, browser, console, d3.js

关于我的 js 脚本的奇怪行为，我已经绞尽脑汁很久了。当我将值输出`d.parent.x`到控制台并显示不同的值时，与我打印`d.parent`到控制台并通过控制台浏览值时不同。

在屏幕截图中，您看到对象本身的 x 值为 525.5，而 d.parent.x 的输出为我提供 148。

我不确定这是 js 行为还是使用过的[D3.js](https://github.com/mbostock/d3/blob/master/d3.v2.js)的行为。

我为它创建了一个 jsfiddle（[source](http://jsfiddle.net/xbxyM/12/)，[result](http://jsfiddle.net/xbxyM/12/embedded/result/)）。在 Chrome 或 Safari 中打开控制台时，您可以看到屏幕截图中的输出。

![控制台截图](../Images/f066d079a0670763d238474b087bfc82.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T20:05:34.453

这是 console.log 的一个已知问题 - 它是基于引用的，并且在记录对象时基本上会在某些情况下最终缓存结果。

要解决它，您通常可以这样做`console.log(JSON.stringify(d.parent))`，但由于循环引用，这在您的情况下不起作用。我只是在您的脚本中设置了一个断点并查看了`d.parent`and `d.parent.x`。

![在此处输入图像描述](../Images/42d52fa49f791aedabf525ebbb9ca842.png)

它们确实会产生与`console.log(d.parent.x)`原始代码中显示的值相同的值。

# android - 某些帧未在帧动画中显示

> ID：12544570
> 
> 赞同：0
> 
> 时间：2012-09-22T14:23:40.217
> 
> 标签：android, android-animation

我正在做一个帧到帧的动画。我的问题是我在我的动画 xml 中给出了大约 10 个可绘制图像。但只有前两个和后两个显示并非所有图像。我也在对这张图片进行翻译。翻译后只有帧动画开始。翻译正在发生，帧动画也在发生，但它没有显示所有帧。这是我的动画 xml。只有 frog_01 和 frog_02 显示。

```
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"
android:oneshot="true" >

<item
    android:drawable="@drawable/frog_01"
    android:duration="70"/>
<item
    android:drawable="@drawable/frog_02"
    android:duration="70"/>
<item
    android:drawable="@drawable/frog_03"
    android:duration="70"/>
<item
    android:drawable="@drawable/frog_04"
    android:duration="70"/>
<item
    android:drawable="@drawable/frog_05"
    android:duration="70"/>
<item
    android:drawable="@drawable/frog_04"
    android:duration="70"/>
<item
    android:drawable="@drawable/frog_03"
    android:duration="70"/>
<item
    android:drawable="@drawable/frog_02"
    android:duration="70"/>
<item
    android:drawable="@drawable/frog_01"
    android:duration="70"/>

</animation-list> 
```

这是我用于翻译和帧动画的代码...

```
public void frogAnim() {

    frogView.clearAnimation();
    final TranslateAnimation fslide2 = new TranslateAnimation(10, 65, 0, 0);
    fslide2.setDuration(400);
    fslide2.setFillAfter(true);
    fslide2.setAnimationListener(fanimationListener1);
    frogView.startAnimation(fslide2);
    c = false;
}

AnimationListener fanimationListener1 = new AnimationListener() {

    public void onAnimationEnd(Animation arg0) {
        c = true;

        frogView.setBackgroundResource(R.drawable.frog_movement);
        frogFrameAnimation = (AnimationDrawable) frogView.getBackground();
        frogFrameAnimation.start();
        playAudioFileListener(R.raw.frog, player);

        CountDownTimer count = new CountDownTimer(200, 700) {

            @Override
            public void onTick(long millisUntilFinished) {

            }

            @Override
            public void onFinish() {
                frogFrameAnimation.stop();
                titileAnimMusic(R.drawable.frog_title,
                        R.anim.alpha_fade_in1, R.raw.vo_child_frog, player);

            }
        };
        count.start();
    }

    public void onAnimationRepeat(Animation animation) {
        // TODO Auto-generated method stub
    }

    public void onAnimationStart(Animation animation) {
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:01:28.517

你试试这个代码....

[http://www.coderzheaven.com/2011/04/23/android-frame-animation/](http://www.coderzheaven.com/2011/04/23/android-frame-animation/)

======================

在班上

```
 final ImageView img =(ImageView) findViewById(R.id.imageView1);
    img.setBackgroundResource(R.layout.animation);
    img.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            AnimationDrawable anim=(AnimationDrawable) img.getBackground();
            anim.start();
        }
    }); 
```

布局文件夹中的动画.xml

```
<animation-list android:oneshot="false"   
<item android:drawable="@drawable/animation_00031" android:duration="30"/>
<item android:drawable="@drawable/animation_00032" android:duration="30"/>
<item android:drawable="@drawable/animation_00033" android:duration="30"/>
<item android:drawable="@drawable/animation_00034" android:duration="30"/>
<item android:drawable="@drawable/animation_00035" android:duration="30"/>
<item android:drawable="@drawable/animation_00036" android:duration="30"/>
<item android:drawable="@drawable/animation_00037" android:duration="30"/>
<item android:drawable="@drawable/animation_00038" android:duration="30"/>
<item android:drawable="@drawable/animation_00039" android:duration="30"/>
<item android:drawable="@drawable/animation_00040" android:duration="30"/>
<item android:drawable="@drawable/animation_00041" android:duration="30"/>
<item android:drawable="@drawable/animation_00042" android:duration="30"/>
<item android:drawable="@drawable/animation_00043" android:duration="30"/>
<item android:drawable="@drawable/animation_00044" android:duration="30"/>
<item android:drawable="@drawable/animation_00045" android:duration="30"/>
<item android:drawable="@drawable/animation_00046" android:duration="30"/>
<item android:drawable="@drawable/animation_00047" android:duration="30"/>
<item android:drawable="@drawable/animation_00048" android:duration="30"/>
<item android:drawable="@drawable/animation_00049" android:duration="30"/>
<item android:drawable="@drawable/animation_00050" android:duration="30"/>
<item android:drawable="@drawable/animation_00051" android:duration="30"/>
<item android:drawable="@drawable/animation_00052" android:duration="30"/>
<item android:drawable="@drawable/animation_00053" android:duration="30"/>
<item android:drawable="@drawable/animation_00054" android:duration="30"/>
<item android:drawable="@drawable/animation_00055" android:duration="30"/>
<item android:drawable="@drawable/animation_00056" android:duration="30"/>
<item android:drawable="@drawable/animation_00057" android:duration="30"/>
<item android:drawable="@drawable/animation_00058" android:duration="30"/>
<item android:drawable="@drawable/animation_00059" android:duration="30"/>
<item android:drawable="@drawable/animation_00060" android:duration="30"/>
<item android:drawable="@drawable/animation_00061" android:duration="30"/>
<item android:drawable="@drawable/animation_00062" android:duration="30"/>
<item android:drawable="@drawable/animation_00063" android:duration="30"/> 
```

在 main.xml

```
 <ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    /> 
```

我试过这个，它对我来说非常有用......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:05:08.867

这个也试试。。。。。。

```
 img=(ImageView) findViewById(R.id.imageView1);
    img.setBackgroundResource(R.layout.animation);

    Animation animation =AnimationUtils.loadAnimation(this,R.anim.translate);
    img.startAnimation(animation);//calling translate animation

    CallDelay(1000);

public void CallDelay(long time)
{
        Handler handler = new Handler(); 
        handler.postDelayed(new Runnable()
        {           
            public void run() 
            { 

                myanimation();    
            }
        },  time); 
 }

public void myanimation()
{
  //calling frame animation
    AnimationDrawable anim=(AnimationDrawable) img.getBackground();
    anim.start();
} 
```

在一个动画之后尝试像这样调用延迟..

# c++ - 他们是如何编写 MSVC++ 调试器的？

> ID：12544571
> 
> 赞同：0
> 
> 时间：2012-09-22T14:23:41.950
> 
> 标签：c++, visual-studio

> **可能重复：**
> [“C or gcc”就像“Chicken or the egg”？:(](https://stackoverflow.com/questions/11798506/c-or-gcc-is-like-chicken-or-the-egg)

如果 Visual c++ 调试器是用于调试正在运行的程序的工具，那么在开发调试器时是什么调试器？鸡蛋困境？他们是如何调试 Visual C++ Debugger 的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T14:26:08.037

他们使用以前已知的良好的调试器版本来调试它。这就像 Visual C++ 编译器是用 Visual C++ 编写的——他们使用 VC++9 开发 VC++10。这种工具引导并不罕见。

# java - 使用 DatagramSocket 时端口不可达

> ID：12544576
> 
> 赞同：1
> 
> 时间：2012-09-22T14:24:00.333
> 
> 标签：java, networking, udp, datagram, icmp

我创建了使用 UDP 传输数据的客户端和服务器软件（由于 TCP 带宽限制，我们需要使用 UDP）。当我在 localhost 上运行它时，它会像我想要的那样运行，所以我将服务器应用程序移到了实际的服务器上，这就是出现问题的时候。

经过一个小时的调试和跟踪后，会发生以下情况：

*   客户端通过 DatagramSocket 发送 DatagramPacket。
*   服务器（计算机）接收它。
*   应用程序永远不会收到它，也永远不会发回正确的数据包。
*   我的操作系统发回一条 ICMP 消息：destination unreachable (Port unreachable)

客户端在端口 25055 上运行，服务器在 25056-25060 上运行。在我所做的 Wireshark 跟踪中，我可以看到数据包从正确的端口发送到正确的端口。我已经禁用了防火墙并授予了该软件的 topuser 权限。

重要的代码片段：

```
socket = new DatagramSocket(clientPort);
socket = new DatagramSocket(serverPort);

private void sendPacket() throws Exception
{
packet = new DatagramPacket(data, data.length, address, serverPort);
socket.send(packet);
}

private void receivePacket(int packetSize) throws Exception
{
if(data == null || data.length != packetSize)
    data = new byte[packetSize];
packet = new DatagramPacket(data, packetSize);
socket.receive(packet);
} 
```

有谁知道为什么会这样？任何想法都会非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T21:43:16.297

“端口不可达”表示该端口没有接收任何内容。你在某个地方弄错了端口。

顺便说一句，第一行打算完成什么？因为它没有。

# java - 插入查询仅插入数据库表中结果集中的第一行

> ID：12544581
> 
> 赞同：0
> 
> 时间：2012-09-22T14:24:32.957
> 
> 标签：java

我正在从表 EmployeeLeave 中获取记录并将其存储在结果集中。然后我将此结果集插入到数据库表中，但我只能插入结果集的第一行而不是所有行。
如何插入结果集的所有行？

```
r = stmt.executeQuery("select * from EmployeeLeave where EmployeeNo='"+empno+"'");
while(r.next())
{
    for(int i=0;i<=r.getRow();i++)
    {
        int empid = r.getInt(1);
        String leave = r.getString(2);
        r = stmt.executeQuery("insert into ApprovedLeave values('"+empid+"','"+leave+"','True')");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:30:13.457

在`executeQuery`遍历`ResultSet` `r`. 这将有效地重置您的第一个`ResultSet`以及您的`Statement`，从而只制作一个插入。要修复，请创建一个新的`Statement`.

对于插入`executeUpdate`应该使用：

```
stmt2.executeUpdate("insert into ApprovedLeave values('"+empid+"','"+leave+"','True')"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T14:36:45.063

当您第一次执行内部查询时，它会关闭外部查询的结果集，因为您正在重新使用相同的 jdbc 语句。为此，您需要使用两个不同的语句对象实例。

但是，实际上没有理由将所有这些数据拉回应用程序，而只是将其发送回数据库。您可以执行以下操作（语法可能因数据库供应商而略有不同）：

```
"insert into ApprovedLeave select EmployeeNo, leave, 'True' from EmployeeLeave where EmployeeNo = '" + empno + "'" 
```

甚至更好的是 PreparedStatement ：

```
"insert into ApprovedLeave select EmployeeNo, leave, 'True' from EmployeeLeave where EmployeeNo = ?" 
```

然后将 empno 变量绑定到语句

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T14:39:33.167

可能是因为调用第二种方法时 r 指向最后一行。你需要在下一次操作之前重置 r 吗？

# opengl - OpenGL：使用 z 缓冲区获取距离信息

> ID：12544586
> 
> 赞同：0
> 
> 时间：2012-09-22T14:25:13.923
> 
> 标签：opengl, distance, depth

我想知道如何以这种方式从 z 缓冲区（或深度缓冲区）获取距离信息：根据我的观点，我想将距离提取为视平面前面对象的 3x3 距离矩阵。是否可以？

即使我在完全不同的警察中进行渲染，是否也可以从另一个警察那里获得相同的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T14:51:36.907

您无法以其他方式从深度缓冲区获取信息，因为它存储在其中 - 作为每个目标缓冲区（屏幕）像素的深度值。如果您想计算从给定点到其他对象的距离，您可以提取数据并将其重新加载到另一个着色器（或仅加载到内存中的 CPU 可用数组），计算长度。

# algorithm - C# 中 DCT、DFT 的简明实现？

> ID：12544591
> 
> 赞同：4
> 
> 时间：2012-09-22T14:25:36.637
> 
> 标签：algorithm, c#-3.0, signals, dft, dct

我一直在研究用 C# 实现的[离散余弦变换](http://en.wikipedia.org/wiki/Discrete_cosine_transform)和[离散傅里叶变换](http://en.wikipedia.org/wiki/Discrete_Fourier_transform)的各种实现，但没有一个像我想要的那样简洁。

*   一个奖励点是，代码源自一个更大的**开源**项目（即*久经考验*的）。

*   具有*最佳指针*的答案将是*公认的答案*。

**目前**发现****

 ***   [C# 中的 DCT 实现](http://www.codeproject.com/Articles/43782/DCT-Implementation-in-C-DCT-of-Image)
*   [DCT & IDCT](http://www.az3749.narod.ru/dct_cs.htm)（受版权保护，“未经测试”，速度慢）
*   [Aforge](http://code.google.com/p/aforge/)（优化良好）

**PS：**原则上我正在寻找一维实现，但是“*矢量化*”输入数据是微不足道的，所以经典的二维实现同样受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T01:13:54.573

用 C# 实现库是否重要，或者 C 是否适合您？

如果可以接受 C 而不是 C#，那么您可以使用[GNU Scientific Library (GSL)](https://www.gnu.org/software/gsl/manual/html_node/Fast-Fourier-Transforms.html)。在那里实现了快速傅里叶变换 (FFT)，[它为您提供了 DFT](https://en.wikipedia.org/wiki/Fast_Fourier_transform#Definition_and_speed)。GSL 还提供[仅限于真实数据的 FFT](https://www.gnu.org/software/gsl/manual/html_node/Overview-of-real-data-FFTs.html)，我认为这正是您提到的离散余弦变换。**

# java - 检测参数字符串的代码行

> ID：12544603
> 
> 赞同：0
> 
> 时间：2012-09-22T14:26:23.363
> 
> 标签：java, logging, metaprogramming, meta, line-numbers

我想要一种快速将详细信息转储到日志的方法。它会是这样的：

```
public static void log(String message, Class<?> sourceClass){
    dump(formattedTime+sourceClass.getName()+"line"+lineNumberfromwhichthemessagecomes 
    (if several occurences are found, show all of them if there's no other way to
    detectwhere has the method been called from).
} 
```

我已经知道关于创建一个新的异常对象并获取其堆栈跟踪的第一行的行号的技巧，但是通过使用它，我必须将行号作为参数添加，因为如果你在**log**方法中执行这个技巧，您将始终获得相同的行号（您制作技巧的行之一）。

有没有办法实现这一点）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T14:33:12.910

您可以使用 Exception 的 getStackTrace() 方法来获取堆栈帧的列表。然后，您可以将堆栈向上移动 1 个元素或使用某些逻辑（例如，直到您获得不在日志记录类中的方法）并使用该 StackTraceElement 中的行号进行日志记录。

# ios - ios 6.0 上 uisplitview 主视图中的工具栏隐藏/取消隐藏问题，纵向模式

> ID：12544605
> 
> 赞同：0
> 
> 时间：2012-09-22T14:26:46.123
> 
> 标签：ios, uinavigationcontroller, uisplitviewcontroller, uitoolbar, ios6

一个奇怪的问题只出现在 iOS 6.0 上。在基于 UISplitViewController 的应用的 iPad 纵向模式下，主视图是基于导航控制器的。主视图的第一个视图控制器显示了工具栏按钮，如果我按下第二个视图控制器并隐藏工具栏，然后在弹出第二个视图控制器后，第一个视图控制器的工具栏上的按钮将永远丢失。（即，显示一个空白工具栏）。工具栏按钮在第一个视图控制器的 viewDidLoad 中初始化。在第二个视图控制器的 viewDidLoad 中调用 [self.navigationController setToolbarHidden:YES] 隐藏工具栏，在第一个视图控制器的 viewWillAppear 中调用 [self.navigationController setToolbarHidden:NO] 再次显示工具栏。

有什么建议吗？在导航控制器中隐藏/取消隐藏工具栏的正确方法是什么？

顺便说一句，它在 iOS 4.3、5.1.1 上很好，在 iPad 上的 iOS 6.0 横向模式下也很好。此问题仅在 iPad 的 iOS 6.0 纵向模式下出现。

编辑：在 iPhone、ios 6.0 上，同样的问题。但是，在装有 iOS 6.0 的 iPad 的横向模式下很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T02:21:45.843

由于 iOS 6.0 的 iPhone 也会出现此问题，因此可能与 UISplitView 纵向模式无关。（虽然 UISplitView 横向模式很好）。

所以我专注于 UINavigationController 的工具栏显示/隐藏，这个线程（[导航控制器中的工具栏](https://stackoverflow.com/questions/8303811/toolbar-in-navigation-controller)）解决了我的问题。

我删除了 viewDiDLoad 和 viewWillAppear 中的 setToolBarHidden 代码，并实现了 UINavigationController 委托协议：

```
- (void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated
{
    BOOL shouldHide = [viewController.toolbarItems count] == 0;
    [navigationController setToolbarHidden:shouldHide animated:animated];
} 
```

现在它起作用了。但是，我仍然不知道为什么原始代码在 iPhone 和 iPad 纵向模式下的 iOS 6.0 上不起作用。

# html - Pixel Perfect CSS 已关闭

> ID：12544606
> 
> 赞同：0
> 
> 时间：2012-09-22T14:26:55.670
> 
> 标签：html, css

我正在运行以下设置。它应该如下所述。 [http://jsfiddle.net/maxjs/3Wk9F/7/](http://jsfiddle.net/maxjs/3Wk9F/7/)

一个 780px 的主容器包含一些选项卡，悬停时它们会改变颜色。

左边的填充物应该是 29px 右边的填充物应该是 30px 4 个盒子每个应该是 179px，应该有 5 个 1px 的边框。1 在每个部分之间。

但是当我悬停一个框时，它变成了 178 像素，你可以看到右边有一个永久的 1 像素。

有人可以告诉我是否忽略了一些非常简单的事情。

**HTML**

```
<div id="maincontainer">
<div class="tab-container">
    <div class="leftfiller"></div>
    <div class="tab"></div>
    <div class="tab"></div>
    <div class="tab"></div>
    <div class="tab"></div>
    <div class="rightfiller"></div>
</div>
<div style="clear:both"></div>​ 
```

**CSS**

```
#maincontainer{
    padding-top:20px;
    width: 780px;
    margin: 0 auto;
    background-color:#000;
    height:600px;
}
.tab-container {
    border-bottom: 1px #BCC0C3 solid;
    border-top: 1px #BCC0C3 solid;
    height:110px;
}
.tab{
    float:left;
    width:180px;
    height:110px;
    background-color:#E5E5E5;
    border-left: 1px #fff solid;
    box-sizing: border-box;
}

.tab:hover {
    background:#fff;
    border-left:1px #BDC0C5 solid;
    border-right:1px #BDC0C5 solid;
    height:111px;
}

.tab:hover + .tab {
    border-left-width: 0;
}
.leftfiller{
float:left;
width:29px;
height:110px;
background-color:#E5E5E5;
}
.rightfiller{
float:right;
width:30px;
height:110px;
background-color:#E5E5E5;
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:36:46.577

`.tag`开始时没有边框，但是通过悬停，您添加了额外的边框，使其成为额外的像素。将宽度推到少 1 px。我认为这是你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:40:32.433

[http://jsfiddle.net/joopmicroop/3Wk9F/4/](http://jsfiddle.net/joopmicroop/3Wk9F/4/) 是这样的吗？它不再跳了。

*更新了评论建议：http:* [//jsfiddle.net/joopmicroop/3Wk9F/10/](http://jsfiddle.net/joopmicroop/3Wk9F/10/)

# ipad - splitViewController 在 iOS 6 中无法正常工作

> ID：12544608
> 
> 赞同：0
> 
> 时间：2012-09-22T14:26:57.453
> 
> 标签：ipad, uisplitviewcontroller, ios6

我在 ios 6 中遇到问题。它仅在纵向模式下显示 splitviewcontroller。

所以，我收到了这个警告信息：

> 应用程序窗口应该在应用程序启动结束时有一个根视图控制器

我变了 `window addSubview:splitViewController.view`；

至

```
self.window.rootViewController = self.splitViewController ; 
```

它现在显示横向模式，但不是全屏。

有人可以指导我或帮助解决问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:05:25.270

你有没有看到这个问题[改变 DetailViewController on btn click in RootViewController 在 iOS6 上的 iPad Portrait Orientation 上](https://stackoverflow.com/questions/12997051/changing-detailviewcontroller-on-btn-click-in-rootviewcontroller-fails-on-ios6)也失败了？它与您的原始问题有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T13:54:01.983

[窗口 setRootViewController:splitViewController];

[并在https://github.com/ArtSabintsev/MGSplitViewController/commit/a63c963ac56f597b90b7ef9fbe06f5082d8da851](https://github.com/ArtSabintsev/MGSplitViewController/commit/a63c963ac56f597b90b7ef9fbe06f5082d8da851)上查看解决方案

# visual-studio-2012 - 在 Visual Studio 中创建 Office 2013 应用

> ID：12544611
> 
> 赞同：14
> 
> 时间：2012-09-22T14:27:09.617
> 
> 标签：visual-studio-2012, office-2013

我正在尝试在 Visual Studio 2013 中创建 Office 2013 应用程序，但是我可以在“Office”选项卡中为我的项目选择的唯一选项是：Office 2010 工作簿/模板/加载项。

我听说对于某些人来说，即使安装的 Office 版本是 2013，它也可以工作。

但在我的情况下，它不起作用 - 当我尝试运行 Office 2010 加载项/模板项目时，我收到一个错误，指出此计算机上未安装正确版本的应用程序。

（我已经安装了 2013 版，我想为其开发，项目适用于 2010 版）

我知道**SOMEWHERE**，但我不知道在哪里，有 Visual Studio 的 Office 2013 模板..

也许那些可以帮助。

任何帮助，将不胜感激。

我现在的目标只是在 Visual Studio 中创建 HelloWorld office 2013 项目。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-22T14:38:27.637

当然存在。我们已经在为它开发了:)

在这里您可以找到[适用于 Visual Studio 2012 的 Microsoft Office 开发人员工具](http://aka.ms/OfficeDevToolsForVS2012)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T14:12:20.033

您还可以通过 Web 平台安装程序获取 Office 开发工具。

更多信息[在这里](http://blogs.msdn.com/b/chaks/archive/2012/08/17/10340229.aspx)。

# node.js - 从 zmq 套接字返回值

> ID：12544612
> 
> 赞同：3
> 
> 时间：2012-09-22T14:27:19.413
> 
> 标签：node.js, socket.io, zeromq, pyzmq

我正在使用 Socket.IO 让客户端网页从我的 Node.JS 服务器动态获取数据。在服务器端，我使用 zeromq 套接字库（REQ/REP 结构，参见 zguide 的 rrclient.js 示例）将请求转发到 Python 后端。

但是，由于我的服务器充当 socket.io 服务器，我必须按如下方式包装我的响应，以便将其发送回特定的客户端：

```
socket.on('app_request',function(appRequest){
      //route this request to the backend.
      var results = fetch_data(appRequest);
      //return it to the client
      socket.emit('app_results',results);
  }); 
```

因此 fetch_data 函数使用 zmq 套接字 (socket.send) 将请求推送到服务器。

但是 Node ZMQ 套接字使用 socket.on('message',function(){}); 响应请求。侦听器，实际上并没有返回任何东西。

*如何使用 socket.on('message',function(){}); 向发起 socket.send() 请求的特定函数返回一个值？*

换句话说，如何让客户端的 socket.io 请求让 Node.JS 使用 ZMQ 从 python 后端获取相关数据，然后将其返回给 socket.io 客户端？（当然是以非阻塞方式）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:06:35.257

我做过类似的事情，你会想像这样重做它；

```
socket.on('app_request',function(appRequest){
  //route this request to the backend.
  fetch_data(appRequest, function(err, results) {
       socket.emit('app_results',results);
  });
}); 
```

zmq 是非阻塞的，因此在将响应发送到 socket.io 之前不会收到响应，使用此方法您可以调整 fetch_data 方法以存储回调，直到响应返回然后触发它。

粗略的 fetch_data 仅供参考，未经测试；

```
var zmq = require('zmq'),
    req = zmq.socket('req'),
    count = 0,
    jobs = {};

req.on('message', function(response) {
    var args  = JSON.parse(response),
        reply = args[0],
        id    = args[i];

    if (id && jobs[id]) {
         jobs[id].apply(null, Array.isArray(reply) ? reply : [reply]);

         delete jobs[id];
    }
}

function fetch_data(appRequest, callback) {
    var data = JSON.stringify([appRequest, count]);

    jobs[count] = callback;

    req.send(data);

    ++count;
} 
```

然后在另一端解析 json 并保留 id 并将其与响应一起发回。

# xpages - Xpages - 问题：'context.getUser().getCommonName()' 为空

> ID：12544615
> 
> 赞同：0
> 
> 时间：2012-09-22T14:27:39.387
> 
> 标签：xpages, xpages-ssjs

有没有其他人注意到这个问题：

'context.getUser().getCommonName()' 为空

我在一台特定服务器上遇到此问题，但无法在其他服务器上重现此问题。

任何帮助，将不胜感激。

这是问题的堆栈跟踪：

```
com.ibm.xsp.exception.EvaluationExceptionEx: Error while executing JavaScript computed expression
    com.ibm.xsp.binding.javascript.JavaScriptValueBinding.getValue(JavaScriptValueBinding.java:132)
    javax.faces.component.UIComponentBase.isRendered(UIComponentBase.java:451)
    com.ibm.xsp.component.UIDataPanelBase.isRenderedProp(UIDataPanelBase.java:81)
    com.ibm.xsp.component.UIDataPanelBase.fillShadowedFlags(UIDataPanelBase.java:231)
    com.ibm.xsp.component.UIDataPanelBase.encodeBegin(UIDataPanelBase.java:240)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:840)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.component.UIViewRootEx._renderView(UIViewRootEx.java:1317)
    com.ibm.xsp.component.UIViewRootEx.renderView(UIViewRootEx.java:1255)
    com.ibm.xsp.application.ViewHandlerExImpl.doRender(ViewHandlerExImpl.java:641)
    com.ibm.xsp.application.ViewHandlerExImpl._renderView(ViewHandlerExImpl.java:320)
    com.ibm.xsp.application.ViewHandlerExImpl.renderView(ViewHandlerExImpl.java:335)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:103)
    com.sun.faces.lifecycle.LifecycleImpl.phase(LifecycleImpl.java:210)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:120)
    com.ibm.xsp.controller.FacesControllerImpl.render(FacesControllerImpl.java:264)
    com.ibm.xsp.webapp.FacesServlet.serviceView(FacesServlet.java:248)
    com.ibm.xsp.webapp.FacesServletEx.serviceView(FacesServletEx.java:200)
    com.ibm.xsp.webapp.FacesServlet.service(FacesServlet.java:160)
    com.ibm.xsp.webapp.FacesServletEx.service(FacesServletEx.java:137)
    com.ibm.xsp.webapp.DesignerFacesServlet.service(DesignerFacesServlet.java:103)
    com.ibm.designer.runtime.domino.adapter.ComponentModule.invokeServlet(ComponentModule.java:576)
    com.ibm.domino.xsp.module.nsf.NSFComponentModule.invokeServlet(NSFComponentModule.java:1267)
    com.ibm.designer.runtime.domino.adapter.ComponentModule$AdapterInvoker.invokeServlet(ComponentModule.java:847)
    com.ibm.designer.runtime.domino.adapter.ComponentModule$ServletInvoker.doService(ComponentModule.java:796)
    com.ibm.designer.runtime.domino.adapter.ComponentModule.doService(ComponentModule.java:565)
    com.ibm.domino.xsp.module.nsf.NSFComponentModule.doService(NSFComponentModule.java:1251)
    com.ibm.domino.xsp.module.nsf.NSFService.doServiceInternal(NSFService.java:598)
    com.ibm.domino.xsp.module.nsf.NSFService.doService(NSFService.java:421)
    com.ibm.designer.runtime.domino.adapter.LCDEnvironment.doService(LCDEnvironment.java:341)
    com.ibm.designer.runtime.domino.adapter.LCDEnvironment.service(LCDEnvironment.java:297)
    com.ibm.domino.xsp.bridge.http.engine.XspCmdManager.service(XspCmdManager.java:272)
com.ibm.jscript.InterpretException: Script interpreter error, line=1, col=35: 'context.getUser().getCommonName()' is null
    com.ibm.jscript.InterpretException.<init>(InterpretException.java:123)
    com.ibm.jscript.ASTTree.ASTMember.interpret(ASTMember.java:97)
    com.ibm.jscript.ASTTree.ASTCall.interpret(ASTCall.java:88)
    com.ibm.jscript.ASTTree.binaryop.ASTBinaryDefaultOp.interpret(ASTBinaryDefaultOp.java:49)
    com.ibm.jscript.ASTTree.ASTProgram.interpret(ASTProgram.java:119)
    com.ibm.jscript.ASTTree.ASTProgram.interpretEx(ASTProgram.java:139)
    com.ibm.jscript.JSExpression._interpretExpression(JSExpression.java:435)
    com.ibm.jscript.JSExpression.access$1(JSExpression.java:424)
    com.ibm.jscript.JSExpression$2.run(JSExpression.java:414)
    java.security.AccessController.doPrivileged(AccessController.java:284)
    com.ibm.jscript.JSExpression.interpretExpression(JSExpression.java:410)
    com.ibm.jscript.JSExpression.evaluateValue(JSExpression.java:251)
    com.ibm.jscript.JSExpression.evaluateValue(JSExpression.java:234)
    com.ibm.xsp.javascript.JavaScriptInterpreter.interpret(JavaScriptInterpreter.java:221)
    com.ibm.xsp.javascript.JavaScriptInterpreter.interpret(JavaScriptInterpreter.java:193)
    com.ibm.xsp.binding.javascript.JavaScriptValueBinding.getValue(JavaScriptValueBinding.java:78)
    javax.faces.component.UIComponentBase.isRendered(UIComponentBase.java:451)
    com.ibm.xsp.component.UIDataPanelBase.isRenderedProp(UIDataPanelBase.java:81)
    com.ibm.xsp.component.UIDataPanelBase.fillShadowedFlags(UIDataPanelBase.java:231)
    com.ibm.xsp.component.UIDataPanelBase.encodeBegin(UIDataPanelBase.java:240)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:840)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
    com.ibm.xsp.component.UIViewRootEx._renderView(UIViewRootEx.java:1317)
    com.ibm.xsp.component.UIViewRootEx.renderView(UIViewRootEx.java:1255)
    com.ibm.xsp.application.ViewHandlerExImpl.doRender(ViewHandlerExImpl.java:641)
    com.ibm.xsp.application.ViewHandlerExImpl._renderView(ViewHandlerExImpl.java:320)
    com.ibm.xsp.application.ViewHandlerExImpl.renderView(ViewHandlerExImpl.java:335)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:103)
    com.sun.faces.lifecycle.LifecycleImpl.phase(LifecycleImpl.java:210)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:120)
    com.ibm.xsp.controller.FacesControllerImpl.render(FacesControllerImpl.java:264)
    com.ibm.xsp.webapp.FacesServlet.serviceView(FacesServlet.java:248)
    com.ibm.xsp.webapp.FacesServletEx.serviceView(FacesServletEx.java:200)
    com.ibm.xsp.webapp.FacesServlet.service(FacesServlet.java:160)
    com.ibm.xsp.webapp.FacesServletEx.service(FacesServletEx.java:137)
    com.ibm.xsp.webapp.DesignerFacesServlet.service(DesignerFacesServlet.java:103)
    com.ibm.designer.runtime.domino.adapter.ComponentModule.invokeServlet(ComponentModule.java:576)
    com.ibm.domino.xsp.module.nsf.NSFComponentModule.invokeServlet(NSFComponentModule.java:1267)
    com.ibm.designer.runtime.domino.adapter.ComponentModule$AdapterInvoker.invokeServlet(ComponentModule.java:847)
    com.ibm.designer.runtime.domino.adapter.ComponentModule$ServletInvoker.doService(ComponentModule.java:796)
    com.ibm.designer.runtime.domino.adapter.ComponentModule.doService(ComponentModule.java:565)
    com.ibm.domino.xsp.module.nsf.NSFComponentModule.doService(NSFComponentModule.java:1251)
    com.ibm.domino.xsp.module.nsf.NSFService.doServiceInternal(NSFService.java:598)
    com.ibm.domino.xsp.module.nsf.NSFService.doService(NSFService.java:421)
    com.ibm.designer.runtime.domino.adapter.LCDEnvironment.doService(LCDEnvironment.java:341)
    com.ibm.designer.runtime.domino.adapter.LCDEnvironment.service(LCDEnvironment.java:297)
    com.ibm.domino.xsp.bridge.http.engine.XspCmdManager.service(XspCmdManager.java:272) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-06-19T06:43:42.970

我们也遇到了这个问题，对于从辅助多米诺地址簿（通过目录帮助知道）认证的用户我们决定不再使用“context.getUser()”：

*   用 database.queryAccessRoles(session.getEffectiveUserName()) 替换 context.getUser().getRoles()
*   用 userBean.commonName 替换 context.getUser().getFullName()
*   用 userBean.commonName 替换 context.getUser().getCommonName()
*   （即使这个有效）将 context.getUser().getDistinguishedName() 替换为 session.getEffectiveUserName()
*   将 context.getUser().getGroups() 替换为 _getUserGroupNameList() （不是 session.getUserGroupNameList()，NotesName 列表而不是字符串）

    ```
    function _getUserGroupNameList() {
        var lNotesName:java.util.Vector = session.getUserGroupNameList(); // list of NotesName
        var lString:java.util.Vector = new java.util.Vector();
        for (var i = 0; i < lNotesName.size(); i++) lString.add(lNotesName.get(i).getCanonical());
        return lString;
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T04:25:31.407

我构建了一个快速示例，但无法重现错误

```
<xp:text escape="true" id="computedField1"
    value="#{javascript:context.getUser().getCommonName()}" /> 
```

你到底在做什么？

顺便说一句，你也可以使用 EL

```
 <xp:text escape="true" id="computedField1"
    value="#{context.user.commonName}" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T10:16:12.573

我仍然不确定为什么这会导致一台特定服务器而不是其他服务器出现错误。我决定同时使用 session.getEffectiveUserName() 来解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-18T06:47:28.867

我目前有这个问题。这与此服务器上的用户 ID 和 NAB 有关。我不知道到底是什么，但我的 id 密码摘要有问题。这意味着我在此特定服务器上的个人文档（姓名）中的密码未与我的 ID 上的 psw 同步。所以在笔记客户端中，我收到了“对不起，你被锁定了”的消息。我现在已经刷新了密码并且可以登录了，但是之后就开始发生这种情况了。我无法获取用户名。既不是来自上下文，也不是会话。基本上它很有趣。

# ruby-on-rails - Rails 私有视图和控制器

> ID：12544616
> 
> 赞同：0
> 
> 时间：2012-09-22T14:27:40.477
> 
> 标签：ruby-on-rails

是否可以创建一个私有的`view`and `controller`，以便我只能从代码中以某种方式调用它？

我希望能够`widgets`在我的应用程序的不同部分显示动态。我考虑过为他们创建一个`controller`and`view`然后在我想要的地方渲染它们，但是人们只需输入正确的 URL 就可以看到它们。

或者也许我可以通过一些规则来防止这种情况`routes.rb`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:10:17.937

我认为您的问题将使用[部分视图](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)来解决，您需要像部分视图一样创建每个小部件，并在您想要拥有小部件的视图中调用每个部分。

此外，您可能需要像普通视图一样加载变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T15:06:45.857

您可以将[过滤](http://guides.rubyonrails.org/action_controller_overview.html#filters)器放入控制器中以执行特定操作。这样只有具有特定权限的人（管理员？）才能访问它：

```
before_filter :require_login

private     
def require_login
    unless logged_in?
      flash[:error] = "You must be logged in to access this section"
      redirect_to new_login_url # halts request cycle
    end
end 
```

# php - Facebook 使用 ApplicationAccessToken()

> ID：12544617
> 
> 赞同：0
> 
> 时间：2012-09-22T14:27:48.433
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我正在发布到 Open Graph，我希望我的 $facebook->api() 调用仅使用应用程序访问令牌，但它会尝试使用用户访问令牌，这在一段时间内可以正常工作，直到他们的代码过期。

我不想处理过期的令牌，那么如何将我的代码设置为只使用应用程序令牌？

```
<?php
....
$accessToken = $facebook->getApplicationAccessToken();
$facebook->setAccessToken($accessToken);

$facebook->api();
?> 
```

但是 getApplicationAccessToken() 受到保护，所以我不能那样使用它：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:04:54.660

应用程序访问令牌不提供与用户访问令牌相同的访问权限，它们不能直接互换 - 用户访问令牌应该在 60 天后过期（如果您没有延长它，则为 2 小时）

如果您出于某种原因只需要使用应用程序访问令牌，只需修改 PHP SDK 代码以允许该用例，代码是可编辑的。

# asp.net - 为什么在Firefox中按下后退按钮会导致回发？

> ID：12544619
> 
> 赞同：3
> 
> 时间：2012-09-22T14:28:06.793
> 
> 标签：asp.net, firefox

我有一个简单的网站，有两个页面，第一页有一个按钮并重定向到第二页。

在第二页中，当我按下后退按钮`page_Load`时，第一页会再次运行，而不是从缓存中读取。

但是在 IE 和 Chrome 中，当我按下返回按钮时，`page_load`它不会再次运行并从缓存中读取页面。

我在 Firefox 7 和 Firefox 15 中对其进行了测试。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T06:30:10.113

我找到了解决方案。我有一个图像，当我在 Firefox 中按下浏览器上的后退按钮时`Src=""`，它导致了两次运行`Page_Load`和运行。`Page_Load`根据[此链接](http://geekswithblogs.net/bcaraway/archive/2007/08/24/114945.aspx)firefox 替换`scr=""`为`page Url`但 IE 替换为`/null`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T01:38:43.090

如果`page_Load`是 onload 事件，那么如果从 HTTP 缓存中读取页面，它*应该在返回时运行。*如果它是从对象缓存中读取的，它不应该运行。

也就是说，我上次检查时 Chrome 没有这样的对象缓存。所以奇怪的是你说它没有在那里运行......你可以发布一个链接到你的页面吗？

# mysql - MySQL 的日期返回 NULL

> ID：12544620
> 
> 赞同：3
> 
> 时间：2012-09-22T14:28:19.650
> 
> 标签：mysql, date, null

这是我的表结构：

```
Datum (Timestamp)     |IP   |X (times visited)
2012-09-08 14:09:44    *      10
2012-09-08 13:20:01    *      34 
```

我正在使用以下方法从 mySQL 获取数据：

```
$Darray=array();
$q="SELECT FROM Datum from ips ORDER BY X DESC";
$rs=mysql_query($q) or die(mysql_error());
while($rd=mysql_fetch_object($rs))
{
$Darray[]=$rd->X;
} 
```

但是当我尝试

```
var_dump($Darray[1]); 
```

我得到NULL。

我也尝试过使用

```
SELECT FROM_UNIXTIME(Datum) from ips ORDER BY X DESC 
```

但这并没有改变任何东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T14:40:16.137

您将`X`列放入数组而不是`Datum`，并且它可能为 null 因为您的 SQL 错误。

```
// Create array to hold date values
$date_array = array();

// Get all dates from ips table ordered by X column
$q = "SELECT `Datum` FROM `ips` ORDER BY `X` DESC";

// Query mysql
$rs = mysql_query($q) or die(mysql_error());

// Loop through results as PHP objects
while( $rd = mysql_fetch_object($rs) ) {
    // put the Datum value into array
    $date_array[] = $rd->Datum;
}

// Dump the contents of the $date_array
var_dump($date_array); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T14:30:33.557

您的 sql 错误，您有两个 FROM 子句（`FROM Datum from ips`）：

```
$q="SELECT FROM Datum from ips ORDER BY X DESC"; 
```

# jquery-ui - 为什么我不能转到特定链接。我正在使用 Jquery Ui 的标签

> ID：12544632
> 
> 赞同：0
> 
> 时间：2012-09-22T14:30:16.620
> 
> 标签：jquery-ui

为什么我登出后无法转到特定链接？我正在使用 jquery 的 ui 选项卡。以及对这种情况的解决方案或建议？还是不可能？

JS代码：`$('#tabs').tabs();`

```
<div id="tabs" class="login-tabs">
        <ul>
            <li><a href="#Home">Home</a></li>
            <li><a href="#Profile"></a></li>
            <li><a href="#Messages">Messages</a></li>
            <li><a href="#Notifications">Notifications</a></li>
            <li><a href="#Find">Find Friends</a></li>
            <li><a href="destroy.php">Sign out</a></li>
        </ul>
        <div id="Home">

        </div>
        <div id="Profile">

        </div>
        <div id="Messages">

        </div>
        <div id="Notifications">

        </div>
        <div id="Find">

        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:38:40.803

您可以为锚点提供真正的 href 属性，如下所示：

```
<div id="tabs"> 
<ul> 
    <li><a href="home.php">Home</a></li> 
    <li><a href="profile.php">Profile</a></li> 
    <li><a href="messages.php">Messages</a></li> 
</ul> 
```

默认情况下，这将尝试通过 AJAX 将这些页面加载到相应的选项卡中。要防止这种行为，只需在 select 事件中自己更改 window.location ，如下所示：

```
$("#tabs").tabs({
select: function(event, ui) {
   window.location = $.data(ui.tab, 'href.tabs');
}
});​​​​​​​ 
```

仅针对一个链接，您可以尝试此...

```
if(parentID == '#ui-tabs-3') //The value of var parentID
{
 $('#tabs').each(function() {
      if($(this).attr('href') == parentID)
      {
          $(this).bind('select', function() {  
              window.location = $.data(ui.tab, 'href.tabs');
          });
      }
     });
} 
```

# java - Apache daemons procrun prunsrv Windows exe 模式不工作

> ID：12544633
> 
> 赞同：3
> 
> 时间：2012-09-22T14:30:22.510
> 
> 标签：java, windows, service, native, procrun

几年来，我们一直在使用 Procrun 将 Java 应用程序转变为服务（并且没有问题）。
我们还有一些作为服务运行的原生 Windows 可执行文件。到目前为止，我们使用 Windows Management Instrumentation (WMI) 来定义这些，但我现在正尝试将 Procrun 用于这些本机 exe ......不幸的是，我无法启动服务（或至少保持跑步）。
服务似乎正确创建；Prunsrvlog/stdout/stderr 不包含错误；Apache/procrun 和 system/Services 下的注册表项似乎都可以创建；我可以使用 Windows 服务小程序或 Prunmgr 监视器查看服务；但是...服务从未显示为已启动。当我尝试从 Prunmgr 手动启动服务时，我收到“...正在尝试启动”弹出窗口几秒钟，但服务仍然停止。
当我尝试从 Win Services 小程序启动它时，我还得到一个弹出窗口：服务启动和停止。如果不使用某些服务会自动停止”。

**我自己找到了大部分解决方案：**
我不知何故弄乱了我的本机测试程序，它总是与 Windows 服务控制器交互......***使用 Procrun 时，您的本机程序不得（取消）向 Windows 服务控制器注册自己***，因为这是由 Procrun 自己处理的。更正我的测试服务后，我可以使用 Procrun 服务启动和停止它。

...**但仍有几个问题：**

1.  我发现一些命中说明`serviceName`不能包含空格，但我也（痛苦地）发现`displayName`在将 Procrun 用于本机可执行文件时不能包含空格。如果`displayName`包含空格， Windows 服务小程序中的“**属性”页面**将拒绝打开。我不知道这可能是什么原因，这在使用 Java 应用程序时不适用。

2.  即使您将服务设置为自动启动（例如 via `set PR_STARTUP=auto`），“本机”服务也不会在您启动时启动`install`，它需要明确的启动命令（例如`bin\TestService start`）（但“本机”服务将在每次重新启动时自动启动） ...这在包装 Java 应用程序时再次不适用...这些在安装时自动启动。

最后一点建议：当使用`set PR_xxx=`格式来定义服务的参数时，通常不能引用包含空格的值......对于一些更有经验的人来说这可能不言而喻，但我遭受了相当多的痛苦这个 ：-（

这篇长文的其余部分主要是为了历史（或罕见的感兴趣的个人）

定义服务的代码：

```
set MY_HOME=c:\program files (x86)\testProgs\
cd /d "%MY_HOME%"
set PR_INSTALL=c:\program files (x86)\testProgs\bin\TestService
set PR_DISPLAYNAME=TestProg_Shared_Memory_Service
set PR_DESCRIPTION=Shared Memory Server for Testing Purposes
set PR_STARTUP=auto
set PR_LOGPATH=c:\program files (x86)\testProgs\logs
set PR_STDOUTPUT=auto
set PR_STDERROR=auto
set PR_STARTMODE=exe
set PR_STARTPATH=c:\program files (x86)\testProgs
set PR_STARTIMAGE=c:\program files (x86)\testProgs\bin\TPShmSrvD.exe
set PR_STARTPARAMS=PORT=9088;PATH=c:\program files (x86)\testProgs
set PR_STOPMODE=exe
set PR_STOPIMAGE=%MY_HOME%bin\TPCommand.exe
set PR_STOPPARAMS=PORT=9088;STOP;SHMSRV
set PR_LOGLEVEL=DEBUG
bin\TestService install 
```

正如我后来发现的那样，不要忘记添加：

```
bin\TestService start 
```

commons-daemon.log 中的结果：

```
[2012-09-22 15:26:32] [debug] ( prunsrv.c:1644) Commons Daemon procrun log initialized
[2012-09-22 15:26:32] [info]  ( prunsrv.c:1648) Commons Daemon procrun (1.0.10.0 32-bit) started
[2012-09-22 15:26:32] [debug] ( prunsrv.c:559 ) Installing service...
[2012-09-22 15:26:32] [info]  ( prunsrv.c:595 ) Service TestService name TestProg_Shared_Memory_Service
[2012-09-22 15:26:32] [debug] ( prunsrv.c:611 ) Setting service description Shared Memory Server for Testing Purposes
[2012-09-22 15:26:32] [info]  ( prunsrv.c:629 ) Service 'TestService' installed
[2012-09-22 15:26:32] [info]  ( prunsrv.c:1729) Commons Daemon procrun finished
[2012-09-22 15:27:00] [debug] ( prunsrv.c:1644) Commons Daemon procrun log initialized
[2012-09-22 15:27:00] [info]  ( prunsrv.c:1648) Commons Daemon procrun (1.0.10.0 32-bit) started
[2012-09-22 15:27:00] [info]  ( prunsrv.c:1561) Running 'TestService' Service...
[2012-09-22 15:27:00] [debug] ( prunsrv.c:1345) Inside ServiceMain...
[2012-09-22 15:27:00] [info]  ( prunsrv.c:1089) Starting service...
[2012-09-22 15:27:00] [info]  ( prunsrv.c:1244) Service started in 15 ms.
[2012-09-22 15:27:00] [debug] ( prunsrv.c:1496) Waiting for worker to finish...
[2012-09-22 15:27:01] [debug] ( prunsrv.c:1501) Worker finished.
[2012-09-22 15:27:01] [debug] ( prunsrv.c:1524) Waiting for all threads to exit
[2012-09-22 15:27:01] [debug] ( prunsrv.c:1528) JVM destroyed.
[2012-09-22 15:27:01] [info]  ( prunsrv.c:1563) Run service finished.
[2012-09-22 15:27:01] [info]  ( prunsrv.c:1729) Commons Daemon procrun finished 
```

TestService stdout/stderr 都只包含一行“stdout/stderr initialised”
ProcRun 下的注册表项：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Apache Software Foundation\Procrun 2.0\TestService]

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Apache Software Foundation\Procrun 2.0\TestService\Parameters]

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Apache Software Foundation\Procrun 2.0\TestService\Parameters\Log]
"Path"="c:\\program files (x86)\\testProgs\\logs"
"Level"="DEBUG"
"StdError"="auto"
"StdOutput"="auto"

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Apache Software Foundation\Procrun 2.0\TestService\Parameters\Start]
"Image"="c:\\program files (x86)\\testProgs\\bin\\TPShmSrvD.exe"
"WorkingPath"="c:\\program files (x86)\\testProgs"
"Params"=hex(7):50,00,4f,00,52,00,54,00,3d,00,39,00,30,00,38,00,38,00,00,00,50,\
  00,41,00,54,00,48,00,3d,00,63,00,3a,00,5c,00,70,00,72,00,6f,00,67,00,72,00,\
  61,00,6d,00,20,00,66,00,69,00,6c,00,65,00,73,00,20,00,28,00,78,00,38,00,36,\
  00,29,00,5c,00,74,00,65,00,73,00,74,00,50,00,72,00,6f,00,67,00,73,00,00,00,\
  00,00
"Mode"="exe"

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Apache Software Foundation\Procrun 2.0\TestService\Parameters\Stop]
"Image"="c:\\program files (x86)\\testProgs\\bin\\TPCommand.exe"
"Params"=hex(7):50,00,4f,00,52,00,54,00,3d,00,39,00,30,00,38,00,38,00,00,00,53,\
  00,54,00,4f,00,50,00,00,00,53,00,48,00,4d,00,53,00,52,00,56,00,00,00,00,00
"Mode"="exe" 
```

在 SYSTEM\Services 下：

```
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\TestService]
"Type"=dword:00000010
"Start"=dword:00000002
"ErrorControl"=dword:00000001
"ImagePath"=hex(2):22,00,63,00,3a,00,5c,00,70,00,72,00,6f,00,67,00,72,00,61,00,\
  6d,00,20,00,66,00,69,00,6c,00,65,00,73,00,20,00,28,00,78,00,38,00,36,00,29,\
  00,5c,00,74,00,65,00,73,00,74,00,50,00,72,00,6f,00,67,00,73,00,5c,00,62,00,\
  69,00,6e,00,5c,00,54,00,65,00,73,00,74,00,53,00,65,00,72,00,76,00,69,00,63,\
  00,65,00,22,00,20,00,2f,00,2f,00,52,00,53,00,2f,00,2f,00,54,00,65,00,73,00,\
  74,00,53,00,65,00,72,00,76,00,69,00,63,00,65,00,00,00
"DisplayName"="TestProg_Shared_Memory_Service"
"DependOnService"=hex(7):54,00,63,00,70,00,69,00,70,00,00,00,41,00,66,00,64,00,\
  00,00,00,00
"WOW64"=dword:00000001
"ObjectName"="LocalSystem"
"Description"="Shared Memory Server for Testing Purposes"

[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\TestService\Parameters] 
```

我已经尝试了几乎所有我能想到的东西，但我无法让服务运行:-(
还有两个评论：
1.我最初在**DisplayName**中有空格。直到我用下划线替换它们之前，我无法在 Windows 服务小程序中打开“**属性”页面**!!!

2\. 本机 exe 具有向**Windows 服务控制器**注册的代码（主要是在 Windows 关闭时启用干净终止）。如果名称为可执行文件以“ **d.exe** ”结尾（不区分大小写）。我尝试对 StartImage 使用两种形式（即 TPShmSrvD.exe 和 TPShmSrv.exe）**，**但无济于事......

任何帮助将不胜感激，

尤尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-16T08:50:53.523

这可能不是最终答案，但在命令下方运行

```
c:\Temp>prunsrv.exe //IS//VIJAY 
```

创建名为 VIJAY 的服务

```
c:\temp\prunmgr.exe //ES//VIJAY 
```

启动 UI 以编辑服务 VIJAY

从 UI 编辑参数很容易

# javascript - Facebook like Messenger 启动脚本

> ID：12544634
> 
> 赞同：2
> 
> 时间：2012-09-22T14:30:27.543
> 
> 标签：javascript, facebook

我不确定你们中的许多人是否已经注意到它，但 facebook 会在屏幕右下方（靠近聊天列表）弹出一个对话框，如果它已安装在您的系统上但现在没有运行，它会要求您启动 facebook messenger。如果单击它，则信使会启动。我想知道 facebook 上的脚本如何访问我们的文件系统来启动 messenger 进程？对于检测过程，我们假设它必须通过 cookie 跟踪它，但也不确定。

操作系统：Microsoft Windows 7 浏览器：Mozilla Firefox 14

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T14:34:34.847

该脚本未访问您的文件系统。相反，它正在访问具有唯一协议的 URL，如果它被识别，则会出现提示。

例如，在 iTunes 预览中，“*在 iTunes 中查看”*链接以`itms://`

如果`itms://`被您的计算机（或网络浏览器）识别，则会在您的网络浏览器（很可能是 Firefox）中出现一个提示，询问您是否要在 iTunes 中打开该站点。

你所要做的就是为你的计算机程序制定你自己的协议，就像`skype://`有一个一样。

# map - 如何计算围棋地图中的项目？

> ID：12544641
> 
> 赞同：104
> 
> 时间：2012-09-22T14:31:27.600
> 
> 标签：map, go

如果我想统计地图结构中的项目，我应该使用什么语句？我试着用

```
for _, _ := range m {...} 
```

但似乎语法是错误的。

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2012-09-22T14:52:19.387

使用`len(m)`. 来自[http://golang.org/ref/spec#Length_and_capacity](http://golang.org/ref/spec#Length_and_capacity)

```
len(s)    string type      string length in bytes
          [n]T, *[n]T      array length (== n)
          []T              slice length
          map[K]T          map length (number of defined keys)
          chan T           number of elements queued in channel buffer 
```

以下是从现已停用的 SO 文档中移植的几个示例：

```
m := map[string]int{}
len(m) // 0

m["foo"] = 1
len(m) // 1 
```

如果变量指向`nil`映射，则`len`返回 0。

```
var m map[string]int
len(m) // 0 
```

> 摘自[Maps-Counting map elements](https://web.archive.org/web/20171006194004/https://stackoverflow.com/documentation/go/732/maps/2528/counting-map-elements)。原作者是[西蒙娜·卡莱蒂](https://stackoverflow.com/users/123527/simone-carletti)。可以在[贡献者页面](https://web.archive.org/web/2/https://stackoverflow.com/documentation/contributors/example/2528)上找到归属详细信息。[源代码在CC BY-SA 3.0](https://creativecommons.org/licenses/by-sa/3.0/)下获得许可，可以在[文档存档](https://archive.org/details/documentation-dump.7z)中找到。参考主题 ID：732 和示例 ID：2528。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-02-11T16:29:58.170

对于任何想要计算嵌套地图中元素数量的人：

```
 var count int
  m := map[string][]int{}
  for _, t := range m {
    count += len(t)
  } 
```

# linux - 使用 Grep 解析 Openssl 输出

> ID：12544644
> 
> 赞同：-1
> 
> 时间：2012-09-22T14:32:08.833
> 
> 标签：linux, parsing, grep

嗨，我知道还有一些关于 grep 和解析的其他线程，但我尝试了其他问题中描述的大多数其他方法，但对我没有用，我想将 openssl 日志解析为 .csv 并使其变得正常；解析列。

输出解析：

```
Signature Algorithm: sha1WithRSAEncryption

Issuer: C=PT, L=Jersey, O=UFO - UFO Solutions,
CN=UFO Software ROOT Primary CA/emailAddress=ufo@wtf.us

Validity
Not Before: Jan 24 11:10:13 2011 GMT
Not After : Jan 21 11:10:13 2021 GMT

Subject: C=US, L=Jersey, O=UFO - UFO Solutions,OU=CER, CN=UFO PSS Intermediate CA/emailAddress=ufo@wtf.us

Subject Public Key Info:
Public Key Algorithm: rsaEncryption
RSA Public Key: (2048 bit) 
```

我想解析“=”之后的每个单词并获取下一个具有“=”的单词并将结果保存在 .csv 文件中

我得到的最大值是这个 grep -E '\=' result.txt > teste.csv 我得到了：

```
Issuer: C=PT, CN=Teste
Subject: C=PT, CN=Teste 
```

所需的结果将是一个只有结果的 csv。喜欢：

```
sha1WithRSAEncryption, Jan 24 11:10:13 2011 GMT, Jan 21 11:10:13 2021 GMT, PT, Jersey, UFO, 
```

等等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T19:58:03.120

```
grep -oP '(?<==)\w*' result.txt 
```

几乎可以满足您的需求（如果您的`grep`版本支持 Perl 正则表达式）。

输出是

```
PT
Teste
PT
Teste 
```

因为这是值出现在输入中的顺序。

# php - mysqli 查询没有结果 做别的事 做别的事

> ID：12544655
> 
> 赞同：3
> 
> 时间：2012-09-22T14:34:13.537
> 
> 标签：php, mysqli

我正在运行 mysqli 查询。

这是我的代码

```
<?php
    $SM_pro_info="SELECT * FROM special_marketing_ads ORDER BY id desc LIMIT 4";
    $QSM_pro_info = $db->query($SM_pro_info)or die($db->error);
        if($QSM_pro_info->num_rows > 0){
        while($SM_pro=$QSM_pro_info->fetch_object()){

    ?>
      <table width="208" border="0">
        <tr>
          <td width="129" height="35" align="right"><span style="color:#361800; font-size:14px; font-weight:bold;"><?php echo $SM_pro->pro_title; ?></span></td>
          <td width="69" rowspan="2" align="center"><a rel="lightbox" href="includes/Cpanel/projectImages//images.jpg" ><img src="<?php echo $SM_pro->image_1; ?>" alt="" width="60" height="60" border="0" /></a></td>
        </tr>
        <tr align="right">
          <td><span style="color:#361800; font-size:14px; font-weight:bold;">الغرض</span> : <span style="color:#da6e19; font-size:15px; font-weight:bold;"><?php echo $SM_pro->pro_purpose; ?></span></td>
        </tr>
      </table>
      <?php
        }
        }else{
            for ($x=0; $x<(4 - $QSM_pro_info->num_rows); $x++) {
            echo 'Your ad here'; // or, whatever your ad text is
            }
            }
      ?>
    </div> 
```

现在我要做的就是如果 mysqli 有任何结果，则回显它如果没有结果，它应该回显在此处添加您的广告的图像。关键是我有 4 个广告，所以如果 mysqli 行中有 1 个广告而其他广告为空，那么我希望它呼应这个单个广告，而其他 3 个广告应该是这张图片，在此处添加您的广告。请对此有任何帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T15:58:11.063

改变这个：

```
if($QSM_pro_info->num_rows ==1){ 
```

对此：

```
if ($QSM_pro_info->num_rows > 0) { 
```

问题是您正在检查一个结果。你想要的不仅仅是零结果。

现在，在您显示“您的广告在这里”的部分，试试这个：

```
for ($x=0; $x<(4 - $QSM_pro_info->num_rows); $x++) {
    echo 'Your ad here'; // or, whatever your ad text is
} 
```

还要确保[`htmlspecialchars()`](http://php.net/manual/en/function.htmlspecialchars.php)在 HTML 中使用可变数据，以避免损坏的 HTML（以及潜在的 XSS 攻击，具体取决于您的数据源）。

# php - 检查一行中的特定整数 WHERE user = $name

> ID：12544658
> 
> 赞同：0
> 
> 时间：2012-09-22T14:34:36.773
> 
> 标签：php, mysql, database, integer, compare

这是我想做的：用户一天最多可以评论五次（在代码中我使用 60 秒来更快地查看结果）。但是我似乎做了一个错误的比较，因为现在它总是让我回到真实的状态。因此，即使计数器高于 5，它仍然会计数而不是停在那里（60 秒）。任何输入表示赞赏。下面是我使用的代码。

```
<?php
$DB_HostName = "";
$DB_Name = "";
$DB_User = "";
$DB_Pass = "";
$DB_Table = "";

$name = mysql_escape_string($_GET['name']);
set_time_limit(0);

$con = mysql_connect($DB_HostName,$DB_User,$DB_Pass) or die (mysql_error()); 
mysql_select_db($DB_Name,$con) or die(mysql_error()); 

 if ($name[CommentCounterReset] === 5) //or if ("CommentCounterReset === 5 WHERE Name = $name)? {
   echo "You already wrote five comments.";
   set_time_limit(60);  
   $sql = "UPDATE table SET CommentCounterReset = CommentCounterReset-5 WHERE Name = '$name'";
}  else {
 $sql = "UPDATE table SET CommentCounterReset = CommentCounterReset+1 WHERE Name = '$name'";
        echo "Comment accepted.";

 }

$res = mysql_query($sql,$con) or die(mysql_error());

   mysql_close($con);
if ($res) {
}else{
}// end else
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T15:43:12.153

看起来您正在尝试使用以下命令在等待一段时间后运行查询：

```
 set_time_limit(60); 
```

这使得脚本的最大运行时间为 60 秒，但实际上并没有做更多的事情。它更改了一个设置，因此您的脚本最多*可以*运行 1 分钟，但实际上并没有让它运行。

你可以这样做，`sleep`但你不应该这样做 如果你想这样做一天，这意味着你的脚本将运行一天（它可以，睡眠不“计数”，因为它是一个系统调用）。

最好将某个时间写入您的数据库并进行检查。如果用户想评论你检查

检查用户是否有 5 条评论。

1.  是的？检查时间
    1.如果是过去，发表评论并重置计数器。

    1.  如果是将来，请不要发表评论。
2.  不？增加计数器并发表评论
    1.  你把它增加到5了吗？然后将日期设置为 +60 秒（或 +1 天）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:46:03.820

在这里修正，必须大于等于

```
if ($name[CommentCounterReset] >= 5) 
```

# iphone - 将 CGPath 转换为 UIImage

> ID：12544660
> 
> 赞同：1
> 
> 时间：2012-09-22T14:34:43.163
> 
> 标签：iphone, objective-c, ios, uiimage, cgpath

有没有办法将 CGPath 转换为 UIImage？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T14:54:01.113

```
UIGraphicsBeginImageContext(size);
// draw your path here
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();    
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:54:35.900

如果您要问的意思是您在上下文中绘制路径，然后希望将其转换为图像，那么`UIGraphicsGetImageFromCurrentImageContext`可能就是您需要的。

# google-chrome - 通过命令行在不使用缓存的情况下在 Chrome 中打开一个 url

> ID：12544664
> 
> 赞同：5
> 
> 时间：2012-09-22T14:35:12.833
> 
> 标签：google-chrome, command-line, browser-cache

我使用该命令`chrome --new-window htp://www.example.com/`打开一个 url，但是页面是使用缓存中保存的最后一个打开的。

有没有办法从命令行打开 URL 强制加载忽略缓存？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T15:46:02.637

添加开关`--disable-application-cache`应该可以工作。以隐身方式启动它 ( `--incognito`) 也可能有效。另请参阅[此处](http://peter.sh/experiments/chromium-command-line-switches/)了解更多命令行开关。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-07-29T07:29:14.413

尝试以下命令：

```
/usr/bin/google-chrome-stable --new-window --aggressive-cache-discard --disable-notifications --disable-remote-fonts --disable-reading-from-canvas --disable-remote-playback-api --disable-shared-workers --disable-voice-input --enable-aggressive-domstorage-flushing https://stackoverflow.com/questions/12544664/open-an-url-in-chrome-without-using-the-cache-via-command-line#12545236 %U & 
```

这适用**于 Linux Mint Qana 上的 Chrome 版本 54.0.2840.100（64 位）**

但除非我先退出浏览器，否则它不会让我退出任何网站。

# objective-c - 为什么 removeObjectsinArray 需要哈希？

> ID：12544665
> 
> 赞同：0
> 
> 时间：2012-09-22T14:35:18.403
> 
> 标签：objective-c, xcode, nsmutablearray

```
- (void)removeObjectsInArray:(NSArray *)otherArray 
```

> 从接收数组中删除另一个给定数组中的对象。此方法类似于 removeObject:，但允许您通过单个操作有效地删除大量对象。如果接收数组不包含 otherArray 中的对象，则该方法无效（尽管它确实会产生搜索内容的开销）。此方法假定 otherArray 中的所有元素都响应**hash**和 isEqual:。

我知道 removeObjectsinArray 需要 isEqual

为什么它也需要实现对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T14:49:58.117

从[NSObject 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html)：

> 如果两个对象相等，则它们必须具有相同的哈希值。如果您在子类中定义 isEqual: 并打算将该子类的实例放入集合中，那么最后一点尤其重要。确保您还在子类中定义哈希。

如果您覆盖`-isEqual:`，建议也覆盖`-hash`。所以这是第一个原因 - 他们不在文档中提出相同的建议是不一致的`-removeObjectsInArray:`。

第二个原因更微妙。作为经验丰富的开发人员，您可以假设`-hash`不会用于实现`-removeObjectsInArray:`（或通过实验发现），并且您可以不在对象上实现它而侥幸逃脱。但是，Apple 明确表示，如果他们认为值得优化，他们*保留*在实施中使用的权利，并且您应该实施它以防万一。`-hash`

（我不知道他们是否在当前的实现中使用它）

# html - 将形状从 HTML5 画布拖放到另一个

> ID：12544668
> 
> 赞同：0
> 
> 时间：2012-09-22T14:35:55.733
> 
> 标签：html, canvas, drag-and-drop, html5-canvas

考虑有两个画布。我想拖动画布中的形状并将其放到另一个画布上。有可能吗？

感谢理解我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T03:22:30.923

我可能不理解您的问题，但形状不会在您绘制的任何上下文中吗？

**例子：**

```
context1.drawImage(...);
context2.drawImage(...); 
```

简单地改变上下文？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:01:34.570

最简单的做法是使用 DOM 代理对象，捕捉鼠标事件，覆盖画布。因为考虑使用库，问题中的代码非常复杂：

[http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-tutorial/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-tutorial/)

从画布到画布仍然是您需要自己弄清楚的事情，因为用例非常罕见，并且您需要在画布上没有拖动时为对象设置动画。绝对可能，但极其复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T15:22:29.807

这绝对是可能的。不过，这不会特别容易。我会给你基本的想法。您需要自己进行数学计算和实施：

1.  找出源形状边界。
2.  获取该像素数据并使用它在旧的画布元素之上构造一个新的画布元素。您将使用它来处理拖动。
3.  为这个临时画布实现拖动逻辑。
4.  检测目标画布上的“跌落”，找出边界击中它的位置。将目标像素数据替换为可拖动对象上的数据。
5.  摆脱可拖动的画布。

我希望这有帮助！

# javascript - 在 Javascript 中解析简单的时间长度字符串

> ID：12544669
> 
> 赞同：1
> 
> 时间：2012-09-22T14:35:56.270
> 
> 标签：javascript, jira

不想重新发明轮子，是否有一些 JavaScript 代码可以将“4h 3m”之类的字符串解析为几分钟，就像 Jira 一样。

有人对 ruby​​ 提出了同样的问题： [How to parse days/hours/minutes/seconds in ruby​​?](https://stackoverflow.com/questions/657309/how-to-parse-days-hours-minutes-seconds-in-ruby)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T14:39:01.510

我在 Date.js 上取得了很大的成功： [http ://www.datejs.com/](http://www.datejs.com/)

Moment.js 也可能有用：http: [//momentjs.com/](http://momentjs.com/)

# git - Git获取旧子模块

> ID：12544670
> 
> 赞同：1
> 
> 时间：2012-09-22T14:36:19.987
> 
> 标签：git, git-submodules

我正在开发一个 GIT 存储库（`A`在此处调用）。它包括一个子模块（`B`这里称为）。`A`克隆by的新副本时

```
git clone --recursive <repository url for A> 
```

`A`并被`B`克隆，但版本`B`已过时！不管我如何更新它

```
git submodule update 
```

当我只克隆时`B`，它是最新的。

怎么了？我的 git 版本是`git version 1.7.7.5 (Apple Git-26)`，我的存储库是`bitbucket`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T15:08:25.653

在 A 内部时，`cd`到 B 所在的目录。

```
cd path/to/B/inside/A 
```

现在您可以`checkout`在 A 中进行任何您想要的提交。

```
git checkout <branch or commit> 
```

（您可能需要`fetch`/`pull`在此之前的最新更改`checkout`。）

现在回到 A 的根目录，并提交更改。

```
cd -
git add path/to/B/inside/A
git commit -m "Update submodule B pointer." 
```

从现在开始，`git clone`或者`git submodule update`将`checkout`提交。

请注意，B 独立于 A，因此 B 在分支方面可以具有任何状态，但作为 A 的子模块，它将指向 A 想要的提交。这允许独立开发两个存储库。

# image - sobel算子还是canny算子，哪一个效果更好

> ID：12544678
> 
> 赞同：3
> 
> 时间：2012-09-22T14:37:10.370
> 
> 标签：image, matlab, image-processing, feature-detection, edge-detection

我正在 C#.net 中进行人脸检测项目，在某些情况下，我从 sobel 获得了更好的结果，而在其他一些情况下，我从 canny 获得了更好的结果。但实际上哪个更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T15:13:17.980

Canny 建立在 Sobel 算子之上。基本上，它是对 Sobel 算子的改进。

所以我会说Canny。

# image - 位图匹配（或二维数组）的高效算法？

> ID：12544682
> 
> 赞同：1
> 
> 时间：2012-09-22T14:37:34.410
> 
> 标签：image, algorithm

下图显示了算法必须执行的操作。

![在此处输入图像描述](../Images/571581ceda5584e992903b0bdb28ba62.png)

对于一维数组，例如字符串匹配，我们可以使用[字符串搜索算法](http://en.wikipedia.org/wiki/String_searching_algorithm)。

我们如何有效地在位图或二维数组中找到这样的匹配？

PS 给出的示例仅用于说明目的。实现 Bejeweled 求解器不需要复杂的算法，只需将游戏板拆分并制作 N x N 表，然后从每个单元格中采样一个像素，并通过检查其 RGB 值来确定每个单元格中的项目，然后我们就完成了。我想知道将在例如一个宏程序中使用的**通用图像区域匹配算法，该宏程序不断单击匹配的位图区域。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T14:54:55.970

这不是一件简单的事情。大多数游戏通过使用区域（正如您对宝石示例所推测的那样）或颜色映射来解决该问题，它们保持第二次绘图，按颜色将位置映射到特定项目。

在游戏之外，例程使用[矩阵变换来尝试识别边缘和顶点](http://tavmjong.free.fr/INKSCAPE/MANUAL/html/Filters-Pixel.html)，这往往会减少考虑可能匹配的数据量。一个简单的例子是使用带有内核的过滤器

```
 kernel = [ -1 -1 -1 ]
          [ -1  8 -1 ]
          [ -1 -1 -1 ] 
```

强调任何与其邻国不平衡的地区。从中您可以尝试检测线和顶点，从而大大减少匹配中要考虑的项目数量。如果要检测“近”匹配，则尝试使用线性变换通过测量顶点的位移来描述匹配的距离，并设置一些标准来确定匹配是否与相同的距离太远。

一个微不足道的解决方案，但仅适用于“完美”数据的解决方案是`xor`针对每个可能的偏移量仅针对原始位图进行位图。如果已知图像是用精确的位图构造的，那么`xor`应该产生一个与位图大小相同的零字段。通过在尝试更昂贵的计算和验证计算之前检查几个选定的像素是否完全匹配，可以在一定程度上提高这种技术的性能`xor`，但是它的性能会随着更大的空间而降低，以非常不合需要的方式考虑。

# objective-c - 如何捕捉作为 UITableView 子视图的 UIButton 上的任何触摸事件

> ID：12544684
> 
> 赞同：3
> 
> 时间：2012-09-22T14:37:44.363
> 
> 标签：objective-c, ios, uitableview, uibutton, touch

在我的应用程序中，我使用叠加样式来呈现帮助信息。点击工具栏中的信息按钮会覆盖`UIButton`在我当前主视图的任何视图之上。它绘制带有帮助文本和箭头的图像，指向当前导航栏和工具栏中的各种用户界面元素。

再次点击 Info-button 会处理`UIButton`，但如果用户触摸这个覆盖的按钮，我也想摆脱它。除了我的主视图控制器，它是一个`UITableViewController`.

我所做的是创建`UIButton`并将其添加为`UITableView`我的主视图控制器中唯一的视图的子视图。然后我将其设置为处理所有触摸事件：

```
[[self masterInfoView] addTarget:self action:@selector(toggleMasterInfo:) forControlEvents:UIControlEventAllTouchEvents]; 
```

与它现在覆盖的`UIButton`表格视图具有相同的大小，并且它会在我点击它时消失，但是如果我做出滚动手势（在其中点击并按住我的手指），按钮不会将此视为触摸事件，相反，底层表视图处理它并滚动其行，同时移动按钮。

在转到 a 之前，`UIButton`我使用 a`UIView`和各种手势识别器来实现相同的目标，并捕获诸如 之`UIResponder`类的事件`touchesBegan:withEvent:`，所有这些都具有合理的结果，但并不完美。

完成这项工作并不难，我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:02:52.510

要访问表格单元格的任何子视图，请按照以下步骤操作。

```
1.Use the TableView delegate function of "didSelectRowAtIndexPath".
2.By above function you can get the particular index path of tabelcell.
3.Create a local object of any subview using tag value like below.

 UIButton *mybutton=(UIButton *)[[tableView cellForRowAtIndexPath:indexPath] viewWithTag:222]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T15:04:22.200

我试图这样做，最后我发现您需要在将单元格返回给表数据源委托时设置操作。

```
[customButton addTarget:self action:@selector(/*functio name*/:) forControlEvents:/*event name*/] 
```

;

我希望这对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T17:12:53.260

我决定，因为我的主要问题是由于我的帮助文本覆盖视图下方的表格视图会持续滚动，即使我不想要它，我不妨使用它：

```
[[self tableView] setScrollEnabled:NO]; 
```

只要帮助覆盖视图 (my `UIButton`) 处于活动状态。一旦覆盖消失，我重新启用我的表格视图的滚动。

它现在确实解决了我的问题，但它仍然没有告诉我如何防止滚动事件通过我的叠加层并进入表格视图。这可能是因为我将叠加层添加为表格视图的子视图。我可能应该制作一个包含表格视图的容器视图，以避免将来发生这种情况（正如 Mahmoud Fayez 以某种方式建议的那样）。

# java - Unicode 代码字符串

> ID：12544686
> 
> 赞同：0
> 
> 时间：2012-09-22T14:38:00.520
> 
> 标签：java, string, unicode

我想创建一个包含 unicode 代码的字符串，但不会在使用时转换它。

```
String s = new String("\u010C");
System.out.println(s); 
```

我希望这是输出：

```
\u010C 
```

而不是这个：

```
Č 
```

我希望字符串实际上包含这组六个字符。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T14:39:15.617

如果您希望输出为

```
\u010C 
```

您需要转义反斜杠：

```
String s = new String("\\u010C");
System.out.println(s); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:53:26.110

Keppil 的答案显然是正确的。要显示给定字符的 4 位十六进制数字，您还可以执行以下操作：

```
System.out.println(String.format("\\u%04x", (int)'Č')); 
```

# javascript - Javascript 或 HTML 中的新行？

> ID：12544687
> 
> 赞同：2
> 
> 时间：2012-09-22T14:38:03.813
> 
> 标签：javascript, html

```
var symbol = prompt("Please choose a symbol");
var side = prompt("Choose the length of the square");
var count1 = 1;
var count2 = 1;
while (count1 <= side) {
    while (count2 <= side) {
        document.write(symbol);
        var count2 = count2 + 1;
    }
    document.writeln()
    var count2 = 1;
    var count1 = count1 + 1;
} 
```

[http://jsfiddle.net/kjQB9/36/](http://jsfiddle.net/kjQB9/36/)

我正在使用上面的代码。我试图让 JS 从给定的输入中绘制一个框。我已阅读有关 \n\r 和
代码的信息，但我无法将它们放置在某处以使线条形成正方形。例如，如果我输入 * 和 3。我希望输出为：

```
***
***
*** 
```

但它显示为`*** *** ***`.

我在哪里可以包含这些标签，应该在 HTML 或 JS 中完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T14:39:35.950

使用`<br>`标签休息一下。`\r`or`\n`是换行符，但 HTML 会忽略大部分空格。

# php - php date strtotime +3 day 给我一个从一开始就在 2 到 3 天之间的日期？

> ID：12544697
> 
> 赞同：0
> 
> 时间：2012-09-22T14:39:26.033
> 
> 标签：php, time

我需要从日期转换并添加 +3 天。当我使用 strtotime("last wed +3 day"); 它给了我 2 到 3 天的日期。它不适用于我的服务器和我用键盘测试过的互联网： http: [//codepad.org/MhL77CVC](http://codepad.org/MhL77CVC)和[http://www.unixtimestamp.com/index.php](http://www.unixtimestamp.com/index.php)。它给了我从上一个星期三开始的 2 到 3 天的时间，现在是美国东部标准时间晚上 7:00:00。我住的地方是+1 Utc。我需要的是 00:00 的东西，我认为这是可能的？我的客户对他的回答不是很有帮助。他认为一切都适用于 +1 UTC 时区吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:45:14.853

使用[DateTime](http://php.net/manual/en/class.datetime.php)类将字符串转换为时间。第二个参数接受时区，使用[DateTimeZone](http://php.net/manual/en/class.datetimezone.php)。

```
$z = new DateTimeZone("Europe/Berlin");
$d = new DateTime("last wed +3 day", $z);
echo $d->format("d.m.Y H:i");
echo $d->format("U"); # or echo $d->getTimestamp(); on PHP > 5.3.0 
```

[DateTime::format()](http://php.net/manual/en/datetime.format.php)方法接受类似于[date()](http://php.net/manual/en/function.date.php)函数的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:54:40.680

如果您需要转换时区，您可以使用`date_default_timezone_set()`

```
 $date = new DateTime("last wed +3 day", new DateTimeZone('Europe/Rome')); 

    date_default_timezone_set('Europe/Rome'); 
    echo date("Y-m-d h:iA", $date->format('U')); 
    echo "<br/>";
    date_default_timezone_set('America/New_York'); 
    echo date("Y-m-d h:iA", $date->format('U')); 
```

您还可以通过在脚本开头设置 rigt 时区来解决问题

# java - 想要将值从弹出窗口保存到 jqgrid/table

> ID：12544707
> 
> 赞同：0
> 
> 时间：2012-09-22T14:40:24.990
> 
> 标签：java, jquery-ui, jquery, jqgrid

我有一个要求，当用户在弹出窗口上单击提交时，值应保存到页面上默认网格的单元格中。我该如何执行此功能？是否可以使用 jquery？任何机构都可以为我提供一个工作示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T15:05:34.340

看看 jQuery UI 对话框。这里有一个很好的[例子](http://jqueryui.com/demos/dialog/#modal-form)。基本上它就是你所需要的。

# matlab - 在 MATLAB 中映射数值。

> ID：12544712
> 
> 赞同：1
> 
> 时间：2012-09-22T14:40:46.170
> 
> 标签：matlab, map, hashmap

我想以每个值都映射到 1 或 0 的方式存储值。例如：

```
3 => 0
6 => 1
9 => 1
7 => 1 
```

对于给定的值，我希望能够找到具有相同映射值的所有其他值。在此示例中，值 6 也将产生值 9 和 7。

matlab中最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T14:55:57.650

如果您唯一需要的是将一些值分配给其他一些实数（这至少是您的问题中的样子），您应该简单地使用数组：

```
idx = [3 6 9 7];
val = [0 1 1 1]; 
```

现在您可以使用 find 提取所有带有 1 或 0 的索引

```
idx(find(val==1))

ans =

 6
 7
 9

idx(find(val==0))

ans =

 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T14:44:56.430

看看[这个](http://www.mathworks.com/help/matlab/ref/containers.mapclass.html)。您描述的数据结构称为 a`hashmap`或 a `map`。

**例如**

```
keySet =   {'Jan', 'Feb', 'Mar', 'Apr'};
valueSet = [327.2, 368.2, 197.6, 178.4];
mapObj = containers.Map(keySet,valueSet) 
```

此代码返回地图的描述，包括属性值：

```
mapObj = 

  containers.Map handle
  Package: containers

  Properties:
        Count: 4
      KeyType: 'char'
    ValueType: 'double'

  Methods, Events, Superclasses 
```

# visual-studio-2010 - 如何根据解决方案配置生成具有日志级别的 NLog.config

> ID：12544713
> 
> 赞同：0
> 
> 时间：2012-09-22T14:41:25.780
> 
> 标签：visual-studio-2010, visual-studio, logging, msbuild, nlog

生成/配置日志级别取决于解决方案配置（例如调试与发布）的[NLog配置文件 (NLog.config) 的良好/典型策略是什么？](http://nlog-project.org/)是否有任何内置的 NLog 支持，或者像[SlowCheetah](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)这样的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:05:41.517

我已将 NLog 配置移至 web.config 和 app.config 部分。假设您有一个依赖于发布的配置部署，这就是它的全部内容。

```
<section name="nlog" type="NLog.Config.ConfigSectionHandler, NLog"/> 
```

# android - Phonegap 错误：“因为我们正在等待 WebCore 对着陆的响应，所以错过了一次拖累。”

> ID：12544714
> 
> 赞同：3
> 
> 时间：2012-09-22T14:41:29.380
> 
> 标签：android, iphone, html, cordova, jquery-mobile

为什么？我做了一个应用程序，我添加了一个水平图像库，它从左到右移动，反之亦然。我使用 touchslider.js 滑动它。但是当我从画廊的位置上下移动我的页面时被放置，，，，我遇到一个错误---（（（“错过拖累，因为我们正在等待WebCore在logcat中着陆的响应。”“，.，..，，.））），和我的页面没有上下移动，除了画廊没有经过的其他地方，.,.,。

实际的错误是为什么我的页面没有从画廊经过的地方上下移动..？

我的页面从画廊没有通过的剩余空间上下移动？但它并没有从画廊使用空间的地方上下移动并且错误来了（“错过了拖动，因为我们正在等待 WebCore 对着陆的响应”），在日志猫中。我该怎么解决？？？？建议紧急？？？

# c# - 包含在自定义类中的 WebBrowser 控件

> ID：12544717
> 
> 赞同：0
> 
> 时间：2012-09-22T14:41:47.447
> 
> 标签：c#, wpf, class

一般来说，我对 C# 和 .NET 很陌生，所以这似乎是一个愚蠢的问题？我在[这里尝试遵循此建议](http://css.dzone.com/news/disable-javascript-error-wpf)

我需要一些帮助，以了解语句“首先，我将 WebBrowser 控件包装在自定义类中以添加功能，在该类中我声明此常量.....”

目前我手动添加了 WPF Webbrowser Control，如下面的 XAML

```
<Window x:Class="ProjectX.WebbrowserWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="WebbrowserWindow" Height="378" Width="632">
    <Grid>
        <WebBrowser HorizontalAlignment="Stretch" Margin="0,32,0,0" Name="webBrowser1" VerticalAlignment="Stretch" Navigated="webBrowser1_Navigated" />
        <Button Content="Go!" Height="22" HorizontalAlignment="Left" Margin="507,3,0,0" Name="button1" VerticalAlignment="Top" Width="78" Click="button1_Click" />
        <TextBox Height="23" HorizontalAlignment="Left" Margin="4,2,0,0" Name="textBox1" VerticalAlignment="Top" Width="497" />
    </Grid>
</Window> 
```

我假设我只需要创建一个新类（比如 WebBrowserCustom.cs）并添加这些事件？但是我很难理解如何将它添加到 WPF 窗口中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:51:50.483

> 我需要一些帮助，以了解语句“首先，我将 WebBrowser 控件包装在自定义类中以添加功能，在该类中我声明此常量.....”

它只是一个用户控件。在您的代码中，它将继承自`UserControl`. 那里有无数的例子。您可以从[MSDN](http://msdn.microsoft.com/en-us/library/bb514641%28v=vs.100%29.aspx)开始，这是一个很好的资源。我什至在[这里](http://windowsclient.net/learn/video.aspx?v=76360)找到了一个可以帮助您入门的视频。一旦你创建了你的控件，它本质上是包装一个`WebBrowser`控件，你可以从你的`UserControl`. 我建议你先从基础开始，这样你就可以理解发生了什么。

# javascript - 从主站点在 iframe 中启动的 FancyBox 画廊仅影响 iframe？

> ID：12544718
> 
> 赞同：1
> 
> 时间：2012-09-22T14:41:50.817
> 
> 标签：javascript, css, iframe, fancybox

我有一个网站，其基本结构由六个主要站点组成，每个站点都有许多子菜单。这些子站点通过 iframe 和 javascript 加载到当前主页。我在这些子菜单网站上有很多图片，我想试试 Fancybox。

我将 css 和 javascript 文件加载到子菜单站点中，按说明定义图片：

```
<a class="fancybox-systa" data-fancybox-group="wat" href="pics/big/b1.jpg" title="Lorem ipsum dolor sit amet"><img src="pics/small/s1.jpg" alt="" /></a> 
```

并在网站上包含了启动脚本：

```
<script type="text/javascript">
            $(document.ready(function() {
            $('.fancybox-systa').fancybox({
                helpers: {
                    title : {
                        type : 'inside'
                    }}});   
        });
    </script>
    <style type="text/css">
        .fancybox-custom .fancybox-skin {
            box-shadow: 0 0 50px #222;
        }
    </style> 
```

它工作正常，但它只影响 iframe，我希望我的画廊影响整个父窗口，以便整个窗口淡出，而不仅仅是小的 iframe 隔间。

我试图这样调用函数：

```
$(parent.document.ready(function() { 
```

和许多其他类似的形式，但不幸的是，这些都没有成功。

我真的很感激这方面的任何提示。

最好的问候，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:09:01.707

是的。FancyBox 在加载到 IFRAME 的文档中可用。帧也是如此。所以你需要在任何地方初始化它。

# c# - 为什么我被迫使用完整的命名空间？

> ID：12544720
> 
> 赞同：1
> 
> 时间：2012-09-22T14:42:09.773
> 
> 标签：c#, class, namespaces

我创建了以下类：

```
using System.Windows;
using System.Windows.Input;
using MyUtils.MyArgParser;

namespace MyUtils.MyImplement
{
    public static class ImplementExitOnEscape
    {
        #region ImplementExitOnEscape

        public static void Implement(Window window)
        {
            window.KeyDown += Window_KeyDown;
        }

        private static void Window_KeyDown(object sender, KeyEventArgs e)
        {
            var window = sender as Window;
            // Close window when pressing the escape key.
            if (e.Key == Key.Escape) if (window != null) window.Close();

            var optionX = MyArgParser.MyArgParser.GetOptionValue("optionX");
        }

        #endregion //ImplementExitOnEscape
    }
} 
```

为什么我被迫使用`MyArgParser`类的全名空间`var optionX = MyArgParser.MyArgParser.GetOptionValue("optionX");`而不是 just `MyArgParser.GetOptionValue("optionX");`？

`using MyUtils.MyArgParser;`被忽略。有没有它不会有任何区别，编译器仍然强迫我使用完整的命名空间。

我觉得这很奇怪，因为它并非无处不在。例如，我不需要在定义了我的应用程序入口点的文件中使用完整的命名空间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T14:46:13.993

```
var optionX = MyArgParser.MyArgParser.GetOptionValue("optionX"); 
```

您的类被命名为您的命名空间，因此要区分它们，您需要显式地完全引用它。

要解决它，请将您的 MyArgParser 命名空间更改为（例如）MyArgParserNS，您可以直接使用它

```
using MyUtils.MyArgParserNS 
```

进而：

```
var optionX = MyArgParser.GetOptionValue("optionX"); 
```

或者，好吧，完全参考它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-22T14:46:13.080

问题是您有一个与其命名空间同名的类，这意味着编译器无法区分 MyArgParser.GetOptionValue 中的 MyArgParser 是命名空间还是类。

由于每个文件顶部的不同 using 语句或名称与类名冲突的字段或变量，它可能会也可能不会强制您使用完整的命名空间。有关该主题的更多信息，请参阅[Eric Lippert 的博客文章](http://blogs.msdn.com/b/ericlippert/archive/2010/03/09/do-not-name-a-class-the-same-as-its-namespace-part-one.aspx)（以及[第 2、3](http://blogs.msdn.com/b/ericlippert/archive/2010/03/15/do-not-name-a-class-the-same-as-its-namespace-part-three.aspx)[和](http://blogs.msdn.com/b/ericlippert/archive/2010/03/11/do-not-name-a-class-the-same-as-its-namespace-part-two.aspx)4[部分）。](http://blogs.msdn.com/b/ericlippert/archive/2010/03/18/do-not-name-a-class-the-same-as-its-namespace-part-four.aspx)

请参阅[如何避免类及其名称空间具有相同的名称，例如 Technology.Technology？](https://stackoverflow.com/questions/1158092/how-to-avoid-having-the-same-name-for-a-class-and-its-namespace-such-as-techno)对此进行更多讨论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-18T19:33:32.410

您在声明之外有您的`using`指令。编译器按以下顺序在这些位置`namespace`搜索类型***或命名空间：***

1.  `MyUtils.MyImplement.ImplementExitOnEscape`（当前类型内的嵌套类型）
2.  `MyUtils.MyImplement`（当前命名空间中的类型或命名空间）
3.  `MyUtils`（“下一个”外层的类型或命名空间）
4.  空命名空间或全局命名空间（类型或命名空间）
5.  `System.Windows`, `System.Windows.Input`, 并且`MyUtils.MyArgParser`你有`using`s for (类型或命名空间)

您输入`MyArgParser.`了 <something>。

在***(3.)***中找到了一个匹配项，那就是*namespace*。只有在 (5.) 中你的`using`问题。所以`MyArgParser`指的是命名空间，而不是类型。

如果您将`using`s 放入`namespace`块中，情况会有所不同，请[在另一个线程中查看我的答案](https://stackoverflow.com/a/16092975/1336654)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T14:46:59.590

可能有几个原因：

1.  与其他名称冲突

2.  你的班级可能是另一个名字。

使用 Ctrl+J+K，然后搜索您的班级。看看 VS 有没有找到。如果不是，那么可能是因为参考问题。您需要添加对该库的引用吗？

# r - 使用 ggdendro 选择树状图的子部分

> ID：12544721
> 
> 赞同：1
> 
> 时间：2012-09-22T14:42:13.530
> 
> 标签：r, plot, ggplot2, dendrogram

是否可以使用 ggdendro 仅绘制直方图的一部分。例如，如何在以下示例中仅绘制最左边的集群：

```
require(ggplot2)

hc <- hclust(dist(USArrests), "ave")
dhc <- as.dendrogram(hc)

ddata <- dendro_data(dhc, type="rectangle")

ggplot(segment(ddata),labels=rownames(USArrests))+ 
geom_segment(aes(x=x, y=y, xend=xend, yend=yend))+ 
theme_dendro() 
```

![在此处输入图像描述](../Images/4f2f5a958f8f560223d3fd08c7284ed0.png)

额外问题：为什么在上面的示例中没有显示状态标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T10:16:17.937

数据：

```
hc <- hclust(dist(USArrests), "ave")
dhc <- as.dendrogram(hc)
library(ggdendro)
ddata <- dendro_data(dhc, type="rectangle") 
```

为应该绘制的数据创建一个索引（左簇）：

```
index <- seq(3, which(ddata$segment$y[-c(1, 2)] == ddata$segment$y[1])[2]) 
```

绘图（包括 x 轴标签）：

```
library(ggplot2)

ggplot(segment(ddata)[index, ]) + 
  geom_segment(aes(x = x, y = y, xend = xend, yend = yend)) + 
  scale_x_discrete(labels = ddata$label$label[seq(sum(ddata$segment$yend == 0))]) 
```

![在此处输入图像描述](../Images/050be9702462c8df54e6dce09becbcb8.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T13:13:25.270

@Elizabeth：您的原始代码可以修改如下以查看 x 标签：

```
require(ggplot2)
hc <- hclust(dist(USArrests), "ave")
ddata <- dendro_data(hc, type="rectangle")
ggplot() + 
geom_segment(data=segment(ddata), aes(x=x, y=y, xend=xend, yend=yend)) + 
geom_text(data=label(ddata), aes(x=x, y=y, label=label, hjust=0), size=3) +
coord_flip() + scale_y_reverse(expand=c(0.2, 0)) 
```

# php - 如何过滤视图中的空字段？

> ID：12544722
> 
> 赞同：0
> 
> 时间：2012-09-22T14:42:13.907
> 
> 标签：php, javascript

我需要显示一个包含产品详细信息的页面。例如

```
 <ul>
 <li>Product: <?php echo $product['Product']['name'] ?></li>
 <li>Features: <?php echo $product['Product']['Features'] ?></li> 
```

等（可能是 20-30 个字段）

问题是每个产品可能有也可能没有空白字段，我只需要向用户显示非空白字段。

如何正确过滤结果以仅生成和显示

```
<li> 
```

包含信息？

我看到了 3 种方法。

1.  很多很多的

    ```
    <?php if (!empty($product['Product']['name']) echo "<li>Product: ".$product['Product']['name']."</li>"?> 
    ```

2.  添加某种JS过滤（我不懂JS所以可能无法实现）
3.  使用“li”字段描述向数据库添加另一列

    ```
    (<li>Product:) 
    ```

    然后以某种方式仅使用 While 循环输出非空字段...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:49:11.107

试试这个：

```
 echo '<ul>';
    foreach($product['Product'] as $key => $value) {
        if ($product['Product'][$key] != '') {
            if ($key == 'Info') {
                echo '<li>Some text that describes information for a user: ' . $value . '</li>';
            }
            else {
                echo '<li>' . $key . ': ' . $value . '</li>';
            }
        }
    }
    echo '</ul>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:49:41.480

我会考虑将选项 1 包装在辅助函数中：

```
function printProductListItem($value)
{
    if (!empty($value) 
        echo "<li>Product: " . $value . "</li>";
} 
```

并这样称呼它：

```
printProductListItem($product['Product']['name']); 
```

# java - Eclipse 运行配置中的“具有此名称的配置已存在”错误

> ID：12544725
> 
> 赞同：32
> 
> 时间：2012-09-22T14:42:58.057
> 
> 标签：java, eclipse

我同步了 mercurial 项目，并尝试设置运行配置。

![在此处输入图像描述](../Images/f055a12e0fe4dc34b07909eebdec045b.png)

我发现名称已`(1)`附加，我试图将其删除。

![在此处输入图像描述](../Images/7c1b614844e70bfc1edfc1b5e58cb808.png)

但是，我得到了`A configuration with this name already exists`错误。我检查了其他配置，但 Name 没有重复`Equivalence Checker`。

![在此处输入图像描述](../Images/01513bb3725a9fa9dc114f511b90b632.png)

![在此处输入图像描述](../Images/6ba6237884e212423d622a984c6b0ded.png)

如何找到现有配置以将其删除？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-02-21T08:21:36.697

取消选中过滤器：过滤已删除/不可用的项目

![调试配置](../Images/8112784baacd5ae34282a28c03bb408e.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T16:17:38.437

您有可能将启动配置作为文件存储在工作区中。用于`Ctrl``Shift``R`打开“打开资源”对话框。开始输入“EquivalenceChecker”并查看它是否在您的工作区中找到具有该名称的 .launch 文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-27T20:07:53.583

取消选中“过滤器启动配置”下拉菜单下的所有过滤器；它在那里。如果重命名项目，则会更新启动配置。但是当一个项目被删除时，启动配置不会被删除。似乎是一个有用的功能。

# google-app-engine - 在 Google AppEngine 中部署 Grails 应用程序

> ID：12544730
> 
> 赞同：1
> 
> 时间：2012-09-22T14:43:24.310
> 
> 标签：google-app-engine, grails, grails-plugin, cloud-hosting

您好，我是一名使用 Grails 框架 2 年的开发人员。

目前我工作的公司正在推动 Google App Engine 的开发。我们是一家非常大的零售商，并且已经与谷歌产品建立了联系。

我仍然对 Google App Engine 开发知之甚少。据我了解，您似乎必须使用他们的 Java SDK 进行开发。这意味着您的应用程序必须专门为其托管平台开发。我不打算放弃 Grails，所以很犹豫。

所以问题：

1.  我想知道是否有人尝试将 Grails 应用程序集成到 Google AppEngine 中？
2.  是否可以简单地将打包为战争的 Grails 项目推送到 Google AppEngine 中？
3.  我找到了这个[Grails AppEngine 插件](http://www.grails.org/plugin/app-engine)。但是我不希望我的项目依赖于插件。有人用过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-14T02:51:21.307

[重复的问题](https://stackoverflow.com/questions/12430706/grails-on-google-app-engine-is-it-dead)很好地涵盖了这一点。

归根结底，GAE 对您可以使用 Java 应用程序执行的操作设置了某些限制，所以是的，您必须专门为他们的平台开发应用程序是正确的。这本身并不是一件坏事。Google 的平台专为可扩展性而设计，因此需要一些限制。

如果你真的与谷歌的云平台绑定，你可能会考虑在谷歌[计算引擎](https://cloud.google.com/products/compute-engine/)上部署 Grails ，这是一个更传统的虚拟 Linux 服务器环境。

# security - Base64 网址更安全？

> ID：12544731
> 
> 赞同：1
> 
> 时间：2012-09-22T14:43:36.290
> 
> 标签：security, encryption, base64

Base64 网址是否比普通网址更安全。例如，像这样的休息 url：“/user/12?status=true”不如“34kalist4u9mF0aWdhYmxlIGdlbmVyYXRpb24leGNlZWRzIHRo”安全？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T14:46:28.757

并不真地。Base64 无论如何都不是加密。它只是一种用于以 ASCII 表示二进制数据的编码。

如果您希望您的请求更安全，请改用 SSL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T14:48:55.420

Shannon 的 Maxim 声明“攻击者知道系统”，这意味着开发人员不能依赖“无密钥加密”（如 Base64，它根本不是加密）或其他容易破解的机制。

如果您想要更好的安全性，请考虑使用强身份验证的 SSL。您可以在日志和浏览器地址栏中使用完整且正确的 URL 获得真正的加密。

# android - View.post() 没有被调用？

> ID：12544732
> 
> 赞同：15
> 
> 时间：2012-09-22T14:43:54.620
> 
> 标签：android

我正在制作一个用于将图像加载到列表中的图像加载器 - 因此，为了使其流畅，除了将图像设置为视图之外，一切都需要在后台线程中运行。问题是下面代码中的 Runnable 有时没有执行。我从后台线程调用 setImage 方法。

```
protected void setImage(final ImageView img, final Bitmap bm, String hash) {
    img.setTag(TAG_RESPONSE, hash);
    Log.v(TAG, "setting image bitmap1");
    //TODO: here is the bug - sometimes the runnable below is not called
    img.post(new Runnable() {

        @Override
        public void run() {
            Log.v(TAG, "setting image bitmap2");
            img.setImageBitmap(bm);
            img.invalidate();
        }
    });

} 
```

任何人有任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-22T14:58:31.630

根据[文档](http://developer.android.com/reference/android/view/View.html#post%28java.lang.Runnable%29)，只有当视图附加到窗口时，才应该从非 UI 线程调用 post(...) 。这可能是问题所在。

# javascript - 是否可以定义已执行 AJAX 查询（清除 JS）？

> ID：12544734
> 
> 赞同：0
> 
> 时间：2012-09-22T14:44:02.173
> 
> 标签：javascript, ajax, dom-events, actionlistener

问题是我需要隐藏一些带有特定类的标签，而这个内容是通过 AJAX 动态生成的。

在不使用 jQuery 或其他库的情况下 - 是否可以定义 AJAX 已完成，DOM-tree 已更改并且需要标签似乎可以通过 找到他`getElementsByClassName`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:47:38.717

如果只需要隐藏某些特定类的元素，则不需要任何 JS 编码。只需为此使用 CSS。

```
.myclass { display: none; } 
```

# android - 单击从 html 页面加载到 Android 中的 web 视图的按钮的操作

> ID：12544735
> 
> 赞同：0
> 
> 时间：2012-09-22T14:44:09.087
> 
> 标签：android, html, webview

```
webView=(WebView) findViewById(R.id.webView1);
webView.loadUrl("file:///android_asset/hello.html"); 
```

我得到了显示的按钮，但我不知道该按钮的点击操作。请帮助我一些代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T15:18:07.343

在 html 中，标签`<input>` `onclick`属性用于在我们单击特定按钮时执行某些操作。并且动作将用 JavaScript 语言编写。

```
<html>
<script type = "text/javascript">
 function myfunction(){ 
    // your action 
}
</script>
<body>
<input type = "button" value = "Click" onClick = "myfunction()">
</body></html> 
```

浏览一些在线教程，如[W3schools](http://www.w3schools.com/html/html_forms.asp)

# java - 备份 mysql 数据库而不丢失 java 的可移植性

> ID：12544736
> 
> 赞同：0
> 
> 时间：2012-09-22T14:44:13.493
> 
> 标签：java, mysql, netbeans

我正在尝试在我由 java 开发的桌面应用程序之一上添加“创建备份”选项。我对此进行了很多搜索，并找到了一些解决此问题的方法，但它们都破坏了一个重要的概念“可移植性”。许多人建议使用 mysqldump.exe（在 Windows 中）来执行此操作，但我想我需要知道 mysql 安装文件夹才能采用这种方法。以下是推荐的代码，顺便说一下无法正常运行（我不知道为什么，如果您注意到原因，请告诉我）

```
private static String dbName = "shams";
private static String dbUserName = "root";
private static String dbPassword = "";

public static boolean backupDB(File file) {
    String path = file.getPath();
    if (!path.contains(".sql")) {
        file = new File(path +".sql");
    }

    String executeCmd = "mysqldump -u " + dbUserName + " -p" + dbPassword + " --add-drop-database -B " + dbName + " -r " + file.getPath();
    Process runtimeProcess;
    try {

        runtimeProcess = Runtime.getRuntime().exec(executeCmd);
        int processComplete = runtimeProcess.waitFor();

        if (processComplete == 0) {
            System.out.println("Backup created successfully");
            runtimeProcess.destroy();
            return true;
        } else {

            System.out.println("Could not create the backup");
        }

    } catch (Exception ex) {
        ex.printStackTrace();

    }

    return false;
} 
```

有些人建议简单地将数据库复制到某个位置。

所以..我应该以一种简洁的方式对此做些什么？有可用的第三方 jar 吗？

- 编辑 - -

给定代码的问题在于，当您没有用户（在本例中为 root 用户）的密码时，您不应在命令中提及密码。命令应该是这样的： `String executeCmd = "mysqldump -u " + dbUserName + " --add-drop-database -B " + dbName + " -r " + file.getPath();`

而且您毕竟不需要指定mysql安装文件夹。上面的代码按原样工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:57:53.673

首先，需要知道 mysqldump 可执行文件的位置并不一定意味着失去可移植性 - 只需将其作为配置参数 - 作为程序的命令行选项，或在配置文件中。

其次，您运行 mysqldump 命令的问题可能与您使用 Runtime.exec() 有关。ProcessBuilder 对象为您提供了更多的控制权。SO 和整个网络上有很多关于正确使用 ProcessBuilder 的问题/答案 - 您可能会发现其中一些很有用。

据我所知，在不实际运行 mysqldump 可执行文件的情况下，没有全 java 方式来执行 mysqldump。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T15:07:07.670

这个问题有纯Java解决方案；例如

*   [http://code.google.com/p/java-sqldump/](http://code.google.com/p/java-sqldump/)
*   [http://www.isocra.com/2004/10/dumptosql/](http://www.isocra.com/2004/10/dumptosql/)

（我还没有检查其中任何一个，看看他们是否做得不错...... YMMV。）

但是，我对使用 3rd-party 转储程序持谨慎态度，因为您最终可能会遇到无法正确恢复的转储的风险。

是的，您确实需要知道`mysqldump`程序的路径。但这可以使用合理的默认值和/或配置文件中的条目来处理。您的“破坏可移植性”评论正在使一座小山变成一座山。

* * *

我看不出您的代码有任何明显错误。我建议您从中捕获“标准错误”和“标准输出”`mysqldump`并查看它的内容。

*   也许它类似于不正确的凭据或不存在的输出目录。
*   也许您的选项之一不正确。（这真的是你应该如何使用该`-B`选项吗？？）

# windows-8 - Windows 8 Metro Bing 地图测试版图像

> ID：12544739
> 
> 赞同：1
> 
> 时间：2012-09-22T14:44:23.110
> 
> 标签：windows-8, microsoft-metro, windows-runtime, bing-maps

我的 XAML / C# 应用程序在我的地图上有一个 beta 图像：

![在此处输入图像描述](../Images/4a10c0ce3daac17edb8f8444bf907692.png)

我是否使用了错误的 SDK？我尝试使用这个：

[http://visualstudiogallery.msdn.microsoft.com/0c341dfb-4584-4738-949c-daf55b82df58](http://visualstudiogallery.msdn.microsoft.com/0c341dfb-4584-4738-949c-daf55b82df58)

我收到一个 WinRT 异常，说它无法创建 Bing 地图的实例。我现在正在使用这个：

[http://visualstudiogallery.msdn.microsoft.com/bb764f67-6b2c-4e14-b2d3-17477ae1eaca](http://visualstudiogallery.msdn.microsoft.com/bb764f67-6b2c-4e14-b2d3-17477ae1eaca)

我将 Windows 8 Pro 与 VS 2012 Ultimate 版本 11.05 与 Windows 8 pro 一起使用。我正在使用模拟器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T15:02:02.970

从您提供的第二个链接：

> 此版本旨在开发和测试 Windows 8 RTM 版本上的应用程序。*当我们在 9 月底发布最终版本时，它将不受支持。* **此版本在地图上包含一个水印，以表示其预发布状态。**使用此版本提交的应用将无法通过 WACK 认证。

添加了斜体和粗体。

总结一下：

您正在使用包含水印的 sdk 测试版。要解决此问题，您需要等到他们在月底发布 sdk 的“发布”版本。

# php - MySQL 数据库命名

> ID：12544740
> 
> 赞同：1
> 
> 时间：2012-09-22T14:44:39.687
> 
> 标签：php, mysql

这可能是一个愚蠢的问题，但我真的没有在网上找到答案。多年来，我总是将新的 mysql 数据库命名为神秘的东西。通常每个站点只有一个数据库，使用一种神秘的命名实践并不难——“x7s9u3or8wj”。我一直担心安全性，但从来没有任何具体数据表明有必要以隐秘的方式命名数据库。

现在我正在构建一个需要多个数据库的网站。与使用像 _users _content _common 这样的命名方案相比，使用隐晦的命名会使事情变得更难。

用常用词命名我的数据库会带来安全风险吗？我的用户名和密码总是神秘而安全的。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T14:49:42.790

用有意义的名称命名您的数据库。隐秘的名称不会解决您可能遇到的任何安全问题，也不会使糟糕的代码不易受到 SQL 注入的影响。一旦我可以注入您的 SQL 调用，我就可以找到您的数据库名称，无论您多么愚蠢。

使用非常广泛传播的 CMS 系统的人有时会重命名 DMS 和表，以尝试和混淆尝试众所周知的漏洞的爬虫，但这对于您的一次性系统来说不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:00:53.107

我将在主数据库中拥有一个表（masterDB），其中包含所有单个数据库的 ID、名称和其他数据。每次设置新数据库时，主数据库表都会使用新记录进行更新。然后将该记录 ID 附加到新的数据库名称。

```
 masterDB.acct_id=1
 masterDB.acct_id=2
 etc, this table would hold the account name as well as the ID which is auto_incremented with each new record. 
```

然后每个新的帐户数据库名称都使用标准前缀动态命名，并附加主数据库 ID。

```
acctDBName_1, acctDBName_2 etc.. 
```

查找subs的数据时可以参考Master DB；并且 subs 可以只包含与每个子目的相关的数据。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T14:56:15.460

隐秘地命名您的数据库只能*通过混淆来提高安全性*，并且由于这不是一个可靠的安全功能，所以它没有多大帮助。

无论如何，正如雷所说，如果您的代码有任何漏洞可能会授予您访问数据库的权限，那么数据库名称仍然是已知的。

您的*安全措施*仅适用于您与其他用户共享您的 MySQL 服务器并且您不希望他们知道您在那里存储的内容的情况。

使用安全密码非常好。

请注意，您的脚本将以明文形式存储数据库密码。因此，如果您与其他用户共享您的应用程序空间，请确保他们无法访问存储数据库密码的文件。此外，您可以尝试其他安全措施，例如在建立数据库连接后在运行时删除密码信息。

即，在 PHP 中：

```
$db = "someCrypticPassword";
$conn = mysql_connect($host, $user, $pass, ...);
$db = "no-real-password"; 
```

# c++ - C++ 运行时错误：operator< 用 ??? 接收 rhs 价值..我肯定错过了愚蠢的错误

> ID：12544746
> 
> 赞同：1
> 
> 时间：2012-09-22T14:45:26.087
> 
> 标签：c++, debugging, insert, std

我正在尝试映射：：插入我定义的关键数据类型（miniVec2ui）..它在比较期间中断（比较时它有虚假数据）..它使用标准的 less 仿函数（我自己尝试过，但同样的问题) - 它正在传递 rhs.x = ??? 和 rhs.y = ??? 基本上。代码如下

```
miniVec2ui v233 = miniVec2ui(x,y);

m_pIdMap->insert(std::pair<miniVec2ui,uint>(v233,(uint)tmpPF.id));// std::pair<const miniVec2ui,uint>(v233, (uint)tmpPF.id) );
//////in other files I defined miniVec2ui,etc. (uint = unsigned int), tmpPF.id unimportant here, uint x; uint y;

typedef std::map<miniVec2ui,uint>       eIdMap;
eIdMap  *m_pIdMap;
m_pIdMap =      new eIdMap;//new std::map<miniVec2ui, uint >;
struct miniVec2ui {
    uint x;
    uint y;
    miniVec2ui(uint inx, uint iny):
                x(inx)
                ,y(iny) { }

    bool operator==(const miniVec2ui& rhs) const {
        return ((x == rhs.x) && (y == rhs.y));
    }
    bool operator!=(const miniVec2ui& rhs) const {
        return ( (x != rhs.x) || (y != rhs.y) );
    }

    bool operator< (const miniVec2ui& rhs) const {
        return ((x < rhs.x) && (y < rhs.y));

   }
    bool operator> (const miniVec2ui& rhs) const {
        return ((x > rhs.x) && (y > rhs.y));
    }

}; 
```

具体来说 - 使用 __y 打破 _function_base.h 是 {x=???,y=???}... 这是反汇编：

```
...stuff...
#endif

{
  bool operator()(const _Tp& __x, const _Tp& __y) const { return __x < __y; }
200439C0 55                   push        ebp  
200439C1 8B EC                mov         ebp,esp  
200439C3 81 EC CC 00 00 00    sub         esp,0CCh  
200439C9 53                   push        ebx  
200439CA 56                   push        esi  
200439CB 57                   push        edi  
200439CC 51                   push        ecx  
200439CD 8D BD 34 FF FF FF    lea         edi,[ebp-0CCh]  
200439D3 B9 33 00 00 00       mov         ecx,33h  
200439D8 B8 CC CC CC CC       mov         eax,0CCCCCCCCh  
200439DD F3 AB                rep stos    dword ptr es:[edi]  
200439DF 59                   pop         ecx  
200439E0 89 4D F8             mov         dword ptr [ebp-8],ecx  
200439E3 8B 45 0C             mov         eax,dword ptr [__y]  
200439E6 50                   push        eax  
200439E7 8B 4D 08             mov         ecx,dword ptr [__x]  
200439EA E8 67 84 F1 FF       call        miniVec2ui::operator< (1FF5BE56h)  
200439EF 5F                   pop         edi   <--------------------- HERE ---------- << 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T14:54:51.450

我不知道它是否与您发现的错误有关，但您的小于比较应该实现[严格的弱排序](http://www.sgi.com/tech/stl/StrictWeakOrdering.html)，它不会：

```
bool operator< (const miniVec2ui& rhs) const {
    return ((x < rhs.x) && (y < rhs.y));
} 
```

按照这个逻辑，`m1`不小于`m2`，并且`m2`不小于`m1`：

```
miniVec2ui m1(5,5);
miniVec2ui m2(6,5);
std::cout << std::boolalpha;
std::cout << m1 < m2 << "\n";
std::cout << m2 < m1 << "\n"; 
```

[std::map](http://en.cppreference.com/w/cpp/container/map)使用此条件来确定两个元素是否相等。你可能需要类似的东西

```
bool operator< (const miniVec2ui& rhs) const {
    if (x == rhs.x) return y < rhs.y;
    return x < rhs.x;
} 
```

您应该尝试`operator>`根据.`operator<``operator!=``operator==`

# ruby-on-rails - 在 Rails 应用程序中扩展核心的正确方法是什么？

> ID：12544748
> 
> 赞同：0
> 
> 时间：2012-09-22T14:45:33.150
> 
> 标签：ruby-on-rails, ruby

我总是觉得扩展 ruby​​ 的核心很有用，比如`Object`or`String`类。

扩展核心的正确和最有组织的方式是什么？我应该为我在`initializers`or`libs`目录中扩展的每个类制作文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:17:34.740

对于这类事情，我会将扩展的代码视为位于您的 lib/ 目录中的本地 gem，但需要一个名为“core_extensions.rb”之类的初始化程序。

# css - internetexplorer @font-face（缓存？）

> ID：12544749
> 
> 赞同：1
> 
> 时间：2012-09-22T14:45:41.957
> 
> 标签：css, internet-explorer, internet-explorer-9, refresh, font-face

我使用了字体松鼠字体生成器，并将所有字体和样式表放入项目文件夹中名为 _webfonts 的文件夹中。

```
@font-face {
    font-family: 'homesteadreg';
    src: url('homestead-regular-webfont.eot'); 
    src: url('homestead-regular-webfont.eot?#iefix') format('embedded-opentype'),
        url('homestead-regular-webfont.woff') format('woff'),
        url('homestead-regular-webfont.ttf') format('truetype'),
        url('homestead-regular-webfont.svg') format('svg');

} 
```

在我的主要 css 中，我使用以下代码导入 css

```
@import url("_webfonts/homesteadreg/stylesheet.css"); 
```

并且还为body标签定义了一个规则

```
body {
    font-family: Helvetica, Arial, sans-serif;} 
```

和 h1 标签的规则

```
 h1 {
    font-size: 68px;
    color: #c8c8c8;
    line-height: 58px;
    font-family: homesteadreg, Helvetica, Arial;
    text-align: center;
} 
```

在我的标题中，我有一个链接到我的 index.html 的徽标

```
<div id="header"><a href="index.html" target="_self"><img src="bilder/logo4.png" border=0 alt="alternativer text" width="192" height="40" /></a></div> 
```

在 Firefox 中，一切都呈现得很好

在 Internetexplorer 9 中，我有一个奇怪的错误。在第一次加载时，一切看起来都很好，但是当我点击我的徽标以重定向到我的 index.html 时，整个页面都使用我的自定义字体呈现（不仅仅是 h1 标签）。当我再次单击我的徽标时，一切都会再次呈现正常并且即使我再次单击我的徽标时也会保持这种状态。似乎是一些缓存问题。

我希望任何人都可以提供帮助！

非常感谢您提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:23:44.267

它可能归结为`@import`在您的主 css 中使用以包含您的字体。这种方法的性能很差。

您是否尝试过从文档头部链接到您的字体 css？

# javascript - Actionscript 重新设置 Canvas 等效项

> ID：12544750
> 
> 赞同：0
> 
> 时间：2012-09-22T14:45:42.060
> 
> 标签：javascript, actionscript-3, html, canvas

我一直在尝试自学一些游戏物理学，因此推荐了一本名为 Foundation ActionScript 3 的书。我认为数学原理也适用于其他技术，尤其是 html5 画布。因此，出于好奇，我开始将 ActionScript 转换为 JavaScript，并在此过程中进行一些心理比较。到目前为止，原则和语法与我的眼睛非常相似，但后来我想到了这个名为“Reparenting”的概念。我在 ActionScript 中有以下代码：

```
 parent1 = new Sprite();
        addChild(parent1);
        parent1.graphics.lineStyle(1, 0);
        parent1.graphics.drawRect(-50, -50, 100, 100);
        parent1.x = 60;
        parent1.y = 60;

        parent2 = new Sprite();
        addChild(parent2);
        parent2.graphics.lineStyle(1, 0);
        parent2.graphics.drawRect(-50, -50, 100, 100);
        parent2.x = 170;
        parent2.y = 60;

        ball = new Sprite();
        parent1.addChild(ball);
        ball.graphics.beginFill(0xff0000);
        ball.graphics.drawCircle(0, 0, 50);
        ball.graphics.endFill();
        ball.addEventListener(MouseEvent.CLICK, onBallClick);

private function onBallClick(event:MouseEvent):void
        {
            if (parent1.contains(ball)) {
                parent2.addChild(ball);
            }else if (parent2.contains(ball)) {
                parent1.addChild(ball);
            }

        } 
```

所以每次点击球时，它都会转移到另一个矩形，成为那个矩形的“子”。现在我想知道 JavaScript 是否有一个类似的概念，它可以让我以最小的努力获得类似的效果，就像 ActionScript 重设父项一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:23:51.770

你可以换个角度看。每个父母都是一个“原点”位置，这意味着它是您定位其他项目（孩子）的区域。

你不需要任何花哨的东西来伪造这种行为。

```
function parent(x, y) {
    this.x = x;
    this.y = y;
    this.addChild = function(child) {
        child.parent = this;
    }
}

function child(x, y) {
    this.x = x;
    this.y = y;
    this.parent = 0;
    this.getXPos = function() {
        if(parent != 0)
            return this.x + parent.x;
        else
            return this.x;
    }

    this.getYPos = function() {
        if(parent != 0)
            return this.y + parent.y;
        else
            return this.y;
    }
}

daddy = new parent(60, 60);
mommy = new parent(60, 170);
sonny = new child(0, 0);
//add mouse click condition//
if(sonny.parent != daddy) daddy.addChild(sonny);
else mommy.addChild(sonny); 
```

这应该让你开始（我有一段时间没有接触过 JS，也没有检查语法）。除非目的是学习，否则我建议坚持制作游戏（用一种语言）。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T15:11:20.080

好吧，这没那么简单……把画布想象成一个 BitmapData 而不是一个 MovieClip……如果你画了一些东西并且想要移动它，你首先必须擦除它并在下一个位置再次绘制它……画布中没有容器或任何花哨的显示列表内容。
但是，您可以构建自己的显示列表（如结构），也可以使用[EaselJS 之](http://www.createjs.com/#!/EaselJS)类的库。另一种选择是使用 DOM，在某些情况下，这可能比使用画布元素更好（尽管对于游戏开发来说，这可能不是要走的路）。在这种情况下，您可以将 DOM 元素用作容器，因此重新设置父级变得非常简单：

```
var parent1 = document.getElementById('parent1');
var parent2 = document.getElementById('parent2');
var myDiv = document.getElementById('myDiv');
myDiv.onclick = function() {
    if(myDiv.parentNode === parent1) {
        parent2.appendChild(myDiv);
    }else if(myDiv.parentNode === parent2){
        parent1.appendChild(myDiv);
    }
} 
```

（[jsfiddle](http://jsfiddle.net/3Dnbc/1/)）

# jquery - jQuery根据一个的数据属性替换两个表行

> ID：12544751
> 
> 赞同：0
> 
> 时间：2012-09-22T14:45:45.833
> 
> 标签：jquery, jquery-selectors

我有一个表格，其中有可编辑的数据。每个“可编辑”部分涵盖两个表格行。

```
<table>
    <tr data-doc_id2='doc_id2'>
    </tr>
    <tr></tr>
    <tr data-doc_id2='doc_id2'>
    </tr>
    <tr></tr>
    <tr data-doc_id2='doc_id2'>
    </tr>
    <tr></tr>
    <tr data-doc_id2='doc_id2'>
    </tr>
    <tr></tr>
</table> 
```

（请注意，我还没有放入`<td></td>`....）

到目前为止，我的 jQuery 如下。这将用相关 ID 替换第一行。我无法选择第二行...`next()`似乎正在寻找具有 ID 的下一行。

```
 var new_row="<tr data-doc_id2='"+doc_id+"'>
    <td>"+doc_name+"</td>
    <td>"+first_ins4+"</td>
    <td>"+job_price4+"</td>
    <td>"+tender4+"</td>
    <td><a class='edit_docs' href='javascript:void(0);'>Edit</a> | <a class='del_doc' href='javascript:void(0);'>Delete</a></td>
 </tr>";
    var new_row2="<tr><td colspan='4'>"+second_ins4+"</td><td></td></tr>";

    var row_to_change=$("tr:[data-doc_id2='"+doc_id+"']");
    $(row_to_change).replaceWith(new_row); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T15:23:40.850

```
 var row_to_change=$("tr:[data-doc_id2='"+doc_id+"']");
 $(row_to_change).closest('tr').next('tr').remove();
 $(row_to_change).replaceWith(new_row); 
```

我没有使用 new_row 和 new_row2 ，而是将 HTML 放在 new_row 变量中，用两个新行替换其中一个行，然后使用标准选择器删除下一行。笨拙但有效。

# windows-7 - 使用 FFMPEG 将 .mp4 转换为 .webm

> ID：12544754
> 
> 赞同：3
> 
> 时间：2012-09-22T14:45:54.937
> 
> 标签：windows-7, ffmpeg

任何人都可以帮助我将其设置为 2 或 3 遍命令：

*在 Windows7（x64）的命令提示符中使用“FFmpeg Win64 Static build by Kyle Schwarz，编译于：2012 年 9 月 19 日 16:31:43”。我是 FFMPEG 的新手，并试图将我的网站的视频从**.mp4**转换为**.webm**（在 Adob​​ePremiereProCS6 中编辑和混合的视频，然后从**.mts** Canon HXG10 录音编码为**.mp4 ）。**原始视频文件为**1080p**质量。*

 ****> c:\ff/ffmpeg -ic:\ff/xxx.mp4 -codec:v libvpx -quality good -cpu-used 0 -b:v 7000k -qmin 10 -qmax 42 -maxrate 500k -bufsize 1500k -threads 8 -vf scale=-1:1080 -codec:a libvorbis -b:a 192k -f webm c:\ff/xxx.webm

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:46:34.383

作为'1 pass'，我在构建包括vorbis，libvpx ......

有关 2 pass libvpx 的提示，请参见[此处](http://snipplr.com/view/55804/merge-one-slide--audio-using-ffmpeg--output-is-audio-only--in-video-container--one-slide-in-vid-track/)

```
rob@ Pictures$ ffmpeg -y -i me939371029.mp4 -r 30  out3.webm

ffmpeg version git-2012-08-29-85c8303 Copyright (c) 2000-2012 the FFmpeg developers
  built on Aug 29 2012 08:59:14 with gcc 4.6 (Ubuntu/Linaro 4.6.3-1ubuntu5)
  configuration: --enable-gpl --enable-libfaac --enable-libfdk-aac --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-librtmp --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libx264 --enable-nonfree --enable-version3
  libavutil      51\. 70.100 / 51\. 70.100
  libavcodec     54\. 54.100 / 54\. 54.100
  libavformat    54\. 25.104 / 54\. 25.104
  libavdevice    54\.  2.100 / 54\.  2.100
  libavfilter     3\. 14.100 /  3\. 14.100
  libswscale      2\.  1.101 /  2\.  1.101
  libswresample   0\. 15.100 /  0\. 15.100
  libpostproc    52\.  0.100 / 52\.  0.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'me939371029.mp4':
  Metadata:
    major_brand     : isom
    minor_version   : 512
    compatible_brands: isomiso2avc1mp41
    encoder         : Lavf54.22.100
  Duration: 00:00:08.01, start: 0.000000, bitrate: 343 kb/s
    Stream #0:0(und): Video: h264 (High) (avc1 / 0x31637661), yuvj420p, 1296x972 [SAR 1:1 DAR 4:3], 316 kb/s, 0.57 fps, 0.50 tbr, 1 tbn, 1 tbc
    Metadata:
      handler_name    : VideoHandler
    Stream #0:1(eng): Audio: aac (mp4a / 0x6134706D), 44100 Hz, mono, s16, 64 kb/s
    Metadata:
      handler_name    : SoundHandler
[libvpx @ 0x1e7f500] v1.1.0
Output #0, webm, to 'out3.webm':
  Metadata:
    major_brand     : isom
    minor_version   : 512
    compatible_brands: isomiso2avc1mp41
    encoder         : Lavf54.25.104
    Stream #0:0(und): Video: vp8, yuv420p, 1296x972 [SAR 1:1 DAR 4:3], q=-1--1, 200 kb/s, 1k tbn, 30 tbc
    Metadata:
      handler_name    : VideoHandler
    Stream #0:1(eng): Audio: vorbis, 44100 Hz, mono, flt
    Metadata:
      handler_name    : SoundHandler
Stream mapping:
  Stream #0:0 -> #0:0 (h264 -> libvpx)
  Stream #0:1 -> #0:1 (aac -> libvorbis)
Press [q] to stop, [?] for help
[libvorbis @ 0x1e67060] Que input is backward in time
frame=    4 fps=0.0 q=0.0 Lsize=     122kB time=00:00:07.99 bitrate= 124.6kbits/s    
video:51kB audio:63kB subtitle:0 global headers:3kB muxing overhead 3.241658% 
```****

# c4 - C4 Xcode 项目从不识别 ios 设备

> ID：12544755
> 
> 赞同：1
> 
> 时间：2012-09-22T14:45:57.493
> 
> 标签：c4

我发现 C4 项目，只有 C4 项目，不能识别连接的 iOS 设备。

运行菜单仅显示“iOS 设备”。

这对我的任何其他 Xcode 项目都不是问题。

我正在使用运行 ios 5.1.1 的 iphone4s，并且我意识到基本 sdk 设置为 iOS 6。不过，其他项目就是这种情况，我在那里没有遇到这个问题。

* * *

好的，问题是我为 5.1.1 设备设置了项目构建设置“部署目标”= 6.0.. 直到现在我才知道“基本 sdk”:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:39:57.347

这可能是项目部署目标的问题。

我相信当前的安装程序不考虑特定的 iOS 目标，而是使用“最新”部署目标选项创建。因此，对于 iOS6 环境，这将需要更改以便为 iOS5 设备构建。

您可以按照以下步骤执行此操作：

1.  单击导航器窗格顶部的项目（在 Xcode 窗口的左侧）
2.  单击出现在主要内容区域中的构建设置选项卡。
3.  在构建设置区域中，搜索术语“部署目标”
4.  将目标选项更改为与您的设备相同

# php - 如何找到随机选择图像的表名

> ID：12544758
> 
> 赞同：1
> 
> 时间：2012-09-22T14:46:11.203
> 
> 标签：php, mysql

我有一个查询从同一数据库中的 3 个 SQL 表中随机选择 6 个图像，一旦有人单击该图像，我想根据从哪个表中选择该图像将它们发送到单独的页面。为此，我想通过查询找出选择了该随机图像的表名。

我的 SQL 查询是

```
$sql="SELECT *
FROM   salehotel
UNION ALL
SELECT *
FROM   saleland
UNION ALL
SELECT *
FROM   salehouse
ORDER BY RAND()
LIMIT 6
";
$result=mysql_query($sql)or die(mysql_error());
?>
<?php
        while($row = mysql_fetch_array($result))
        {?>
    <div style="float: left; margin-left: 10px;">
        <a href="sale_house_detail.php?id=<?php echo $row['property_id'];  ?>">
            <img src=<?= '"admin/uploads/'.$row['image1'].'"'; ?> width="172px" height="149px" style='border:5px solid  #CCC' />
        </a>
    <p><?php  echo $row['Type']; ?></p>
    <p><?php  echo $row['Location']; ?></p>
  </div>

    <?php   }
    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T14:48:59.553

在 SQL 中创建一个指示源表的新字段：

```
$sql="SELECT salehotel.*, 'salehotel' as source
FROM   salehotel
UNION ALL
SELECT saleland.*, 'saleland' as source
FROM   saleland
UNION ALL
SELECT salehouse.*, 'salehouse' as source
FROM   salehouse
ORDER BY RAND()
LIMIT 6
"; 
```

然后，您的 PHP 可以将此列显示为：

```
<?php  echo $row['source']; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T14:48:51.587

在查询中包含表名：

```
SELECT 'salehotel' as which, sh.*
FROM   salehotel sh
UNION ALL
SELECT 'saleland' as which, sl.*
FROM   saleland sl
UNION ALL
SELECT 'salehouse' as which, sho.*
FROM   salehouse sho
ORDER BY RAND()
LIMIT 6 
```

然后适当地更改 php 代码以处理额外的列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T14:50:23.230

怎么样`select *, 'table_name'`作为一个字段，然后使用该列将它们发送到适当的位置。

# gwt - 在嵌入式 Web 服务器上使用压缩的 GWT 应用程序部署

> ID：12544764
> 
> 赞同：1
> 
> 时间：2012-09-22T14:46:34.260
> 
> 标签：gwt, embedded, compression

我正在尝试在自定义 Web 服务器上部署 GWT 客户端应用程序。我在我的 .gwt.xml 文件中使用这样的 GWT 预压缩链接器：

`<inherits name="com.google.gwt.precompress.Precompress"/>`

`<set-configuration-property name="precompress.leave.originals" value="false" />`

`<add-linker name="xsiframe" />`

在我的 html 文件中，我加载了引用 nocache.js.gz 的 javascript：

`<script type="text/javascript" src="app/app.nocache.js.gz"></script>`

编译器按预期生成压缩的 javascript 文件。但是，当我运行该应用程序时，该应用程序正在从 Web 服务器请求 *.cache.js 文件，而不是我期望的 *.cache.js.gz 文件。

我正在使用一个不能即时处理压缩的自定义 Web 服务器，所以我想知道是否有一种方法可以配置 GWT 编译器以生成请求 *.cache.js.gz 文件而不是 *.cache 的代码。 .js 文件？我似乎找不到任何文档，但如果我错过了文档中的某些内容，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T01:33:41.643

> 如果有办法配置 GWT 编译器来生成请求 *.cache.js.gz 文件的代码

不。

让我们做一个思想实验。假设我们可以让 GWT 从您的自定义服务器请求 gzip 文件。

谁来解压？GWT 浏览器客户端？不，您必须编写自己的浏览器。GWT 客户端中的所有 Java 都被翻译/编译成 Javascript。出于安全原因，浏览器上的 Javascript 无法调用浏览器的主机 JVM 来解压缩它。

谁来解压？服务器？然后您的自定义服务器必须处理它。您需要扩展自定义服务器的功能。

对不起，我很抱歉，但我希望您仔细考虑 Javascript 客户端和您的自定义服务器之间的数据交换。有人必须在某处解压缩文件 - 我确信它不会是集线器或路由器或传输电缆/媒体。

我建议人们在沉迷于 GWT 之前，先熟练掌握 JSP/JEE 编程。使用 JSP 生成 javascript 和 HTML 供浏览器显示。当您在 JSP 生成的内容方面获得了合理的经验时，您会倾向于了解 GWT 客户端-服务器的约束、优势和要求。如果不是 JSP，那么至少是 PHP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:21:26.497

[PrecompressLinker](http://code.google.com/p/google-web-toolkit/wiki/PrecompressLinker)将生成 .gz 文件。
然而，并非所有浏览器都支持预压缩资源，因此默认情况下不会加载它们。

您必须配置您的网络服务器/后端服务器，以便它检查是否有可用的预压缩资源以及客户端是否支持压缩，然后重写请求以检索 *.gz 文件而不是非压缩文件。

# java - 小部件的 Eclipse e4 图像图标以及如何使它们方便使用

> ID：12544765
> 
> 赞同：2
> 
> 时间：2012-09-22T14:46:46.680
> 
> 标签：java, eclipse, user-interface, swt, eclipse-rcp

我想知道 eclipse e4 是否带有一些已经提供用于各种 swt 小部件（按钮、标签等）的图像图标？
如果没有：
有没有地方可以找到提供的图标？
eclipse e4 开发的标准做法是什么？即，我希望我收集的图标能够以某种方式集中用于我的所有项目。这是可能的还是我唯一的选择是将所有内容保存在文件系统的中央文件中？

**更新：**
我发现这个[链接](http://www.eclipse.org/forums/index.php?t=msg&th=148108/)说有一些标准图标在`org.eclipse.ui.jar`
任何想法我将如何将它用于我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:51:02.783

Benjamion Cabé 发布了一种获取所有 Eclipse 图标的方法。在此处查看他的[博客文章](http://blog.benjamin-cabe.com/2009/06/02/icones-eclipse)。生成的图标 zip 文件的链接已失效，但我猜该脚本可能仍然有效。

# matlab - 在 Matlab 中检测外部浏览器的 URL？

> ID：12544767
> 
> 赞同：1
> 
> 时间：2012-09-22T14:47:03.117
> 
> 标签：matlab, url, browser, external

我通常使用`Matlab's internal browser`（例如，通过“web”命令），但它给我带来了一个问题，因为有时无法检测到用户何时单击我通过 Matlab 管理的在线调查的下一步。我从来没有遇到过任何外部浏览器（Firefox、Chrome、IE）的问题。我想在用户完成调查时自动关闭浏览器。我知道用户在完成调查后将访问的 URL，因此可以查看他们浏览器的 URL 是否是他们在完成调查后将访问的 URL。现在使用内部的 Matlab 浏览器，我使用：

```
[s,bwser] = web(url2, '-new', '-notoolbar', '-noaddressbox'); 
cloc = get(bwser, 'currentLocation'); 
```

然后检查*cloc*是否等于给定的 URL。我很想用外部浏览器做同样的事情。我知道如何调用外部浏览器并为其分配一个 URL。但是，在参与者单击链接后，如何从该浏览器中检索当前 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:43:17.603

你可以试试这个：

```
function RunSurvey( startURL, finalURL )
    finalURL = lower(finalURL);
    hfig = figure( 'Menu','none','Name','Survey',...
        'ResizeFcn',@reSize,...
        'DeleteFcn',@figDelete);
    hExp = actxcontrol('Shell.Explorer.2',calcSize,hfig);
    Navigate(hExp,startURL);
    while (true)
        pause(1);
        current = lower(get(hExp,'LocationURL'));
        if ~isempty(strfind(current,finalURL))
            break;
        end
    end
    close( hfig )

% Figure delete function
function figDelete(src,evnt)
    hExp.delete;
end

function [size]=calcSize()
        pos = get(hfig,'Position');
    size = [2 2 pos(3)-5 pos(4)-20];
end

function reSize(src,evnt)
  if ~exist('hExp','var')
     return
  end
  move(hExp,calcSize);
end % reSize

end % RunSurvey 
```

调用使用：

```
RunSurvey('www.google.com','www.mathworks.com') 
```

# c# - 确定最佳图像保存格式的算法

> ID：12544768
> 
> 赞同：3
> 
> 时间：2012-09-22T14:47:28.457
> 
> 标签：c#, performance, image, algorithm, math

我有一张可以是照片或屏幕截图的图像。我想确保图像以适当的格式保存。在这一点上，我正在谈论 jpeg 和 png。

我如何确定将图像保存为 .jpeg 是否更好，因为它是/包含照片？此外，如果图像包含**使用过**的alpha 通道，则显然使用 png。

最简单的方法是将不同图像格式的图像两次保存到内存流中，并比较相应的数据大小。显然，这是非常耗费资源的，而且 - 在我看来 - 不是要走的路。

有人有建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T14:53:05.973

您可以寻找相同颜色的连续运行的出现，因为这些在照片中非常罕见。当然，在现代 UI 中，渐变效果使这些在屏幕截图中变得不那么常见。具有纯色区域（尤其是灰色或白色）仍然是相当典型的，因此如果您想要快速的东西，这是一种合理的启发式方法。您可能希望排除最大强度的白色或最小强度的黑色，因为曝光过度或曝光不足的照片可能包含这些颜色的大块。

# php - PHP 内存限制 - 在不编辑 php.ini 的情况下更改？

> ID：12544771
> 
> 赞同：2
> 
> 时间：2012-09-22T14:48:04.680
> 
> 标签：php, symfony

我正在使用 Symfony2 并且在我支付的托管服务器上，我可以看到耗尽内存的错误。是否可以在不编辑 php.ini 的情况下设置新限制（无法访问）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T14:54:22.320

[您可以使用ini_set()](http://php.net/manual/en/function.ini-set.php)函数在 PHP 脚本中设置它。

[memory-limit](http://php.net/manual/en/ini.core.php#ini.memory-limit)指令是 PHP_INI_ALL 可更改的，这意味着它可以在任何地方更改。

```
ini_set('memory_limit','256M'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T14:49:29.360

你可以通过`.htaccess`文件来做

```
php_value memory_limit 100M ; #Change the100M/your need 
```

*注意：*此方法仅在 PHP 作为 Apache 模块运行时才有效。

您也可能会从阅读这篇文章中受益：[增加 PHP 内存限制的 3 种方法](http://www.hostucan.com/webmaster-tutorials/increase-php-memory-limit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T14:50:05.877

您可以使用`.htaccess`文件并放置：

```
php_value memory_limit 16M # Change 16M with whatever value 
```

但它可能会被您的托管服务提供商禁用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T14:51:09.960

您可以使用更改 PHP 脚本中的内存限制`ini_set()`

```
ini_set('memory_limit','16M'); 
```

更多信息在这里： http: [//php.net/manual/en/function.ini-set.php](http://php.net/manual/en/function.ini-set.php)

# javascript - 将字符串表示法转换为递归对象指针

> ID：12544780
> 
> 赞同：0
> 
> 时间：2012-09-22T14:49:19.157
> 
> 标签：javascript, object, for-loop, error-handling

我需要将符号（例如'main:message:new'）转换为引用的对象属性（resource[main][message][new]）。

```
var notation = 'main:message:new';

var ressource = {
    message: { new: 'something' }
};

var splitKeys = function(keys, object) {
    var keys, pointer;
    pointer = object;
    keys = keys.split(':');
    for (i = 0; i < keys.length; i++) {
        // here is the error
        if (pointer[keys[i]] === undefined) break;
        pointer = pointer[keys[i]];
    }
    return pointer;
};

console.log(splitKeys(notation, ressource)); 
```

如您所见，我在错误处理方面遇到了问题。如果有与具体资源不匹配的资源符号，我不想返回任何内容。不幸的是，我总是抛出一个错误'无法读取未定义的未定义属性'......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T14:54:49.120

第一个名为 的属性名称`main`不存在于您的资源对象中，因此您的方法将始终返回整个对象而不是您所针对的属性值，即`{ new: 'something' }`：

```
var splitKeys = function(keys, object) {
    var pointer = object;
    var parent = pointer;
    keys = keys.split(':').slice(1); // exclude `main`
    for (var i = 0; i < keys.length; i++) {
        if (pointer[keys[i]] === undefined) break;
        parent = pointer;
        pointer = pointer[keys[i]];
    }
    return parent;
}; 
```

这将返回`new`对象，即`{ new: 'something' }`. 如果要改为返回属性值，请返回`pointer`而不是`parent`.

**[演示](http://jsfiddle.net/pBuEL/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T14:57:01.583

您的代码没有给我任何错误，因此可能存在其他问题。

但是，如果您想在资源不匹配时不返回任何内容，那么您应该使用`return`而不是`break`.

```
var notation = 'main:message:new';

var ressource = {
    message: { new: 'something' }
};

var splitKeys = function(keys, object) {
    var keys, pointer;
    pointer = object;
    keys = keys.split(':');
    for (i = 0; i < keys.length; i++) {

        if (pointer[keys[i]] === undefined) 
            return null;

        pointer = pointer[keys[i]];
    }
    return pointer;
};

console.log(splitKeys(notation, ressource)); 
```

此外，如果`pointer[keys[i]]`是`null`，循环将继续，因此您可能需要更改您的测试。

```
if (pointer[keys[i]] == null) 
```

这将检查`null`和`undefined`。

# c - 结构的大小不等于其内容的大小

> ID：12544783
> 
> 赞同：0
> 
> 时间：2012-09-22T14:49:37.087
> 
> 标签：c, memory, struct, byte, sizeof

> **可能重复：**
> [为什么结构的 sizeof 不等于每个成员的 sizeof 之和？](https://stackoverflow.com/questions/119123/why-isnt-sizeof-for-a-struct-equal-to-the-sum-of-sizeof-of-each-member)

我有下一个代码：

[http://ideone.com/brmRy](http://ideone.com/brmRy)

```
#include <stdio.h>
#include <stdlib.h>

typedef struct Test
{
        int a;
        int b;
        char c;
} Test;

int main(void)
{
        Test *obj = (Test*)malloc(sizeof(Test));

        printf("Size results:\r\n\r\nstruct: %i\r\nint #1: %i\r\nint #2: %i\r\nchar #1: %i\r\n", 
                sizeof(Test), sizeof(obj->a), sizeof(obj->b), sizeof(obj->c));

        return 0;
} 
```

结果是：

> 尺寸结果：
> 
> 结构：12
> 
> 诠释#1：4
> 
> 诠释#2：4
> 
> 字符 #1: 1

为什么结构大小为 12 字节？？？int - 4 个字节 char - 1 个字节

2 个整数 + 1 个字符 = 2 * 4 个字节 + 1 个字节 = 9 个字节。

为什么是 12 ？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T14:51:29.900

内存通常在 4 字节边界上对齐，因此即使 char 仅占用 1 个字节，它也会被填充 3 个字节以满足此分段要求。值得注意的是，结构的各个元素不必对齐，因此如果您将其中一个整数设为短整数，则可以将结构大小从 12 个字节减少到 8 个字节。不过，我相信您必须在 struct 声明中的 char 旁边放置 short 才能获得此奖励。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T15:16:12.120

如果您使用 gcc，则可以强制“打包”。这意味着没有对齐，并且结构条目彼此相邻。尝试

```
typedef struct Test
{
    int a;
    int b;
    char c;
} __attribute__((packed)) Test; 
```

# asp.net - 使用 SimpleMembershipProvider 时使用盐

> ID：12544790
> 
> 赞同：18
> 
> 时间：2012-09-22T14:50:03.960
> 
> 标签：asp.net, asp.net-mvc-4, membership-provider, simplemembership

> **可能重复：**
> [WebMatrix WebSecurity PasswordSalt](https://stackoverflow.com/questions/5117464/webmatrix-websecurity-passwordsalt)

有没有办法让 simpleMembershipProvider 使用盐？

当我创建我的 mvc4 web 项目并将默认连接设置为 sqlexpress，然后注册时，我的用户没有密码 salt

![在此处输入图像描述](../Images/82b51e317fc02f2db77319b72eecf9d5.png)

我希望它尽可能安全而不会带来太多麻烦。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-22T15:37:57.163

PasswordSalt 列未使用，但在创建存储在 Password 字段中的散列密码时使用加盐。如果您查看 SimpleMembershipProvider 的源代码，您可以看到这一点：http: [//aspnetwebstack.codeplex.com/SourceControl/changeset/view/3a669e7112e7#src%2fWebMatrix.WebData%2fSimpleMembershipProvider.cs](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/3a669e7112e7#src%2fWebMatrix.WebData%2fSimpleMembershipProvider.cs)

检查 CreateUserAndAccount 方法。它使用[Crypto.HashPassword](http://msdn.microsoft.com/en-us/library/system.web.helpers.crypto.hashpassword%28v=vs.111%29.aspx)方法：

```
 /* =======================
     * HASHED PASSWORD FORMATS
     * =======================
     * 
     * Version 0:
     * PBKDF2 with HMAC-SHA1, 128-bit salt, 256-bit subkey, 1000 iterations.
     * (See also: SDL crypto guidelines v5.1, Part III)
     * Format: { 0x00, salt, subkey }
     */

    public static string HashPassword(string password)
    {
        if (password == null)
        {
            throw new ArgumentNullException("password");
        }

        // Produce a version 0 (see comment above) password hash.
        byte[] salt;
        byte[] subkey;
        using (var deriveBytes = new Rfc2898DeriveBytes(password, SaltSize, PBKDF2IterCount))
        {
            salt = deriveBytes.Salt;
            subkey = deriveBytes.GetBytes(PBKDF2SubkeyLength);
        }

        byte[] outputBytes = new byte[1 + SaltSize + PBKDF2SubkeyLength];
        Buffer.BlockCopy(salt, 0, outputBytes, 1, SaltSize);
        Buffer.BlockCopy(subkey, 0, outputBytes, 1 + SaltSize, PBKDF2SubkeyLength);
        return Convert.ToBase64String(outputBytes);
    } 
```

基本上，为了解决您的顾虑，它既安全又安全，您不必再遇到任何额外的麻烦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T15:38:33.133

从[文档](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.simplemembershipprovider.aspx)中引用：

> 按照设计，SimpleMembershipProvider 类没有实现 ASP.NET 成员资格提供程序中可能的全部功能，正如所有 ASP.NET 成员资格提供程序使用的 MembershipProvider 类中所定义的那样。类中的某些成员是可用的，因为它们是从基类继承的，但如果您访问它们会抛出异常。
> 
> 如果您的网站需要完整的成员资格提供程序功能，您可以跳过网页成员资格系统的初始化（即不要调用 WebSecurity.InitializeDatabaseConnection()），而是确保启用标准成员资格和角色提供程序。在这种情况下，您对 SimpleMembershipProvider 类的调用将传递给标准提供者（在 SimpleMembershipProvider 类文档中称为先前的提供者）。有关详细信息，请参阅配置 ASP.NET 应用程序以使用成员资格。

该`PasswordSalt`字段是这些列之一。如果您查看 SimpleMembershipProvider 的源代码，您会注意到 PasswordSalt 列被简单地设置为`string.Empty`：

```
if (database.Execute("INSERT INTO [" + MembershipTableName + "] (UserId, [Password], PasswordSalt, IsConfirmed, ConfirmationToken, CreateDate, PasswordChangedDate, PasswordFailuresSinceLastSuccess) VALUES (@0, @1, @2, @3, @4, @5, @5, @6)", new object[] { num, str, string.Empty, !requireConfirmationToken, obj3, DateTime.UtcNow, num2 }) != 1)
{
    throw new MembershipCreateUserException(MembershipCreateStatus.ProviderError);
} 
```

因此，如果您想使用它，您可以编写一个自定义成员资格提供程序来覆盖默认提供程序并自己生成 PasswordSalt。您可以覆盖该`CreateAccount`方法。

# .net - WCF 命名空间最佳实践

> ID：12544793
> 
> 赞同：0
> 
> 时间：2012-09-22T14:50:33.263
> 
> 标签：.net, wcf, namespaces

我试图获得这个结果：

在 WCF 项目中，拥有多个 servicecontract 接口（由 , 等实体`Product`分隔`Order`）

但是，在 Web 项目中，我想要一个服务客户端实例，并且我想像这样调用我的方法：

`myServiceClient.Products.GetFirst();`或者 `myServiceClient.Orders.GetAllByStatus(5)`

我如何实现这一目标？我尝试了一些东西，但它们都远非我想要的。

# c - C中的静态数组和动态数组有什么区别？

> ID：12544796
> 
> 赞同：2
> 
> 时间：2012-09-22T14:51:02.843
> 
> 标签：c, arrays

> **可能重复：**
> [数组名称是 C 中的指针吗？](https://stackoverflow.com/questions/1641957/is-array-name-a-pointer-in-c)
> [C++ 静态数组与动态数组？](https://stackoverflow.com/questions/2672085/c-static-array-vs-dynamic-array)

我正在学习 C，但我对以下两个数组之间的区别感到困惑：

```
int a[10]; 
```

和

```
int *b = (int *) malloc(10 * sizeof(int)); 
```

只是在最基本的层面上，这两者有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-22T14:55:49.953

```
int a[10]; 
```

在堆栈上分配，并在作用域结束后立即解除分配。

```
int *b = (int *) malloc(10 * sizeof(int)); 
```

分配在堆上并且在程序的整个生命周期中都是活动的，除非它是明确[释放](http://linux.die.net/man/3/free)的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T14:56:13.720

一旦您离开当前堆栈帧（基本上，当您所在的函数返回时），静态数组就会被销毁。动态数组会一直存在，直到你 free() 它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T14:56:46.730

The first lives on the stack (= lives as long as the scope of the variable), the second lives on the heap (= lives until freed). The first has a fixed size, whereas the second can be re-sized.

# compilation - 如何编译 Mach 3？

> ID：12544799
> 
> 赞同：0
> 
> 时间：2012-09-22T14:51:15.643
> 
> 标签：compilation, operating-system, mach, microkernel

这些天我对[mach 操作系统很感兴趣。](http://www.cs.cmu.edu/afs/cs/project/mach/public/www/mach.html)然而，我发现在现代 Linux 系统上构建它似乎相当困难，比如 Debian Wheezy。

所以我想知道是否有任何方法可以构建并启动它？

欢迎任何想法和建议:-)

顺便说一句：似乎 Mach 操作系统是由 ODETools（odemake 和其他东西）构建的。那是什么？我很难找到这种 odetools 的任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T11:30:51.807

试试[GNU Mach 构建页面](http://www.gnu.org/software/hurd/microkernel/mach/gnumach/building.html)。它是运行 GNU Hurd 的微内核；我不知道它是否与您想要的一样，但无论如何它都会有所帮助。

# haskell - 如何查看“and”的实现代码？

> ID：12544800
> 
> 赞同：7
> 
> 时间：2012-09-22T14:51:20.667
> 
> 标签：haskell

我在互联网上找到了 and 的定义，但我找不到 and 的实际实现。我确实在我的计算机上搜索了某种 prelude haskell 文件，但它没有返回任何可以在文本编辑器中打开的内容。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-22T14:57:19.990

您可以使用[Hoogle](http://www.haskell.org/hoogle/)搜索 Haskell 函数，如下所示：

[http://www.haskell.org/hoogle/?hoogle=and](http://www.haskell.org/hoogle/?hoogle=and)

函数链接将您带到定义函数的库模块，在这种情况下，链接`and`将我们带到这里：

[http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:and](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:and)

然后单击`Source`函数名称右侧的链接，它会将您带到该函数的源代码。对于它的情况，`and`我们链接到这里：

[http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/GHC-List.html#and](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/GHC-List.html#and)

```
and                     :: [Bool] -> Bool
or                      :: [Bool] -> Bool
#ifdef USE_REPORT_PRELUDE
and                     =  foldr (&&) True
or                      =  foldr (||) False
#else
and []          =  True
and (x:xs)      =  x && and xs
or []           =  False
or (x:xs)       =  x || or xs
#endif 
```

你会看到它`and`实际上有两个定义。一种是标准 Prelude 定义，只有在使用标志编译时才启用`USE_REPORT_PRELUDE`，另一种是 Prelude 通常编译时使用的定义，通常更优化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T14:57:56.917

You can't expect to find the source code in your local distribution of Haskell - which is probably Haskell Platform. Instead, go to [Hoogle](http://www.haskell.org/hoogle/) and search for the function. One way, which is what you want, is to search by its name, `and`, go to its Haddock, and then click "source."

On Hoogle, you can also search by type signature, ie. `[Bool] -> Bool` which you'll probably find yourself doing quite often.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T14:54:47.183

看看[http://www.haskell.org/onlinereport/standard-prelude.html](http://www.haskell.org/onlinereport/standard-prelude.html)

`and`定义为`foldr (&&) True`。

# objective-c - 单例模式实现

> ID：12544808
> 
> 赞同：4
> 
> 时间：2012-09-22T14:52:07.280
> 
> 标签：objective-c, ios, singleton

我到处都看到了*单例模式的这种特殊实现：*

```
+ (CargoBay *)sharedManager {
   static CargoBay *_sharedManager = nil;
   static dispatch_once_t onceToken;
   dispatch_once(&onceToken, ^{
      _sharedManager = [[CargoBay alloc] init];
   });
   return _sharedManager;
} 
```

并且它似乎被接受为良好做法（尤其是来自[CargoBay](https://github.com/mattt/CargoBay)）。

我不明白的唯一部分是第一行`static CargoBay *_sharedManager = nil;`。

你为什么要把这个`static`变量设置为`nil`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T15:03:13.053

这只是可读性、惯例和实践的问题。它并不是真正需要的，因为：

一。它的价值永远不会被检查。在较旧的单例实现中，曾经有著名的

```
+ (id)sharedInstance
{
    static SomeClass *shared = nil;
    if (shared == nil)
        shared = [[SomeClass alloc] init];

    return shared;
} 
```

代码 - 要使此方法起作用，必须将支持变量初始化为 nil，因为如果它不是第一次不是 nil，它将错误地省略 if 部分中的 alloc-init 并返回一个垃圾指针。但是，使用 GCD 解决方案，不再需要 nil-check - GCD 处理“仅执行此代码一次”编译指示。

二。但是尽管如此：静态变量被隐式初始化为零。所以即使你只是写`static id shared;`它最初也会是`nil`.

三。为什么这可能是一个好习惯？因为，尽管我提到了前两个原因，但让源代码的读者知道某些东西被显式初始化为零仍然更具可读性。或者甚至可能存在一些不符合要求的实现，其中静态变量没有正确地自动初始化，然后应该采取这个行动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T15:08:20.933

您将其设置为 nil 以确保您获得一个干净的实例。

这是您想要做的更易读的版本：

```
+ (GlobalVariables *)sharedInstance {
    // the instance of this class is stored here
    static GlobalVariables *myInstance = nil;

    // check to see if an instance already exists
    if (nil == myInstance) {
        myInstance  = [[[self class] alloc] init];
    }
    // return the instance of this class
    return myInstance;
} 
```

但是有很多帖子展示了这可能不是线程安全的，所以转向你上面的方法和我发布的方法的混合，你会得到这个：

```
// Declared outside Singleton Manager    
static SingletonClass *myInstance = nil;
+ (GlobalVariables *)sharedInstance {
    if (nil != myInstance) {
        return myInstance;
    }

    static dispatch_once_t pred;        // Lock
    dispatch_once(&pred, ^{             // This code is called at most once per app
        myInstance = [[GlobalVariables alloc] init];
    });

    return myInstance;
} 
```

# wpf - Canvas ItemsControl 的问题

> ID：12544810
> 
> 赞同：2
> 
> 时间：2012-09-22T14:52:27.053
> 
> 标签：wpf, mvvm, observablecollection, itemscontrol

我正在尝试实现此处显示的示例 [ [WPF Canvas, how to add children dynamic with MVVM code behind](https://stackoverflow.com/questions/5913792/wpf-canvas-how-to-add-children-dynamically-with-mvvm-code-behind) ]，但是当我启动我的程序时没有显示任何内容（即使 Canvas 的 IsItemHost 设置为 True。

我的应用程序由实体类型组成：

```
public class Entity
{
    public Entity(int x, int y, int width, int height)
    {
        X = x;
        Y = y;
        Width = width;
        Height = height;
    }

    public int X { get; set; }
    public int Y { get; set; }
    public int Width { get; set; }
    public int Height { get; set; }
} 
```

实体存储在 EntitiesCollection 中：

```
public class EntitiesCollection : ObservableCollection<Entity>
{
    public EntitiesCollection()
    {
        Add(new Entity(10, 10, 10, 10));
        Add(new Entity(50, 20, 25, 25));
    }
} 
```

Wich 是一个 DrawingViewModel 类的成员：

```
public class DrawingViewModel
{
    public DrawingViewModel()
    {
        Entities = new EntitiesCollection();
    }

    public EntitiesCollection Entities;
} 
```

我的应用程序的 DataContext 在 MainWindow.xaml.cs 中设置：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        this.DataContext = new DrawingViewModel();
    }
} 
```

MainWindow.xaml 文件本身看起来像这样：

```
<Window x:Class="Test.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Test" Height="350" Width="525" Icon="Graphics/Icons/paint.png">
    <Grid>
        <ItemsControl ItemsSource="{Binding Entities}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <Canvas IsItemsHost="True"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemContainerStyle>
                <Style>
                    <Setter Property="Canvas.Left" Value="{Binding X}"/>
                    <Setter Property="Canvas.Top" Value="{Binding Y}"/>
                </Style>
            </ItemsControl.ItemContainerStyle>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Border BorderBrush="Red" BorderThickness="1" Width="{Binding Width}" Height="{Binding Height}"/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </Grid>
</Window> 
```

怎么了 ？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T14:55:21.717

`Entities`必须是属性而不是字段。（应该有各自的[绑定错误](http://blogs.msdn.com/b/wpfsldesigner/archive/2010/06/30/debugging-data-bindings-in-a-wpf-or-silverlight-application.aspx)。）

# php - 重定向回来并保留以前输入的值

> ID：12544812
> 
> 赞同：1
> 
> 时间：2012-09-22T14:53:00.023
> 
> 标签：php

我想重定向回表单并保留我以前输入的值，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T15:06:05.187

你必须使用 seeions 来做到这一点，所以在你的 process.php 文件中：

```
 session_start();
    //assign all posted values to a session
    if (!empty($_POST)) {
        foreach($_POST as $key => $value) {
            $_SESSION['your_form'][$key] = $value;
        }
    }
    header('Location: your_form.php'); 
```

现在在 your_form.php 中：

```
 <?php
    session_start();
    if (isset($_SESSION['your_form']) && !empty($_SESSION['your_form'])) {
        $form_data = $_SESSION['your_form'];
        unset($_SESSION['your_form']);
    }
    ?>
    <form method="POST" action="process.php">
        <input type="text" name="txt1" value="<?=$form_data['your_form']['txt1']?>" />
        <input type="text" name="txt2" value="<?=$form_data['your_form']['txt2']?>" />
        <input type="submit" name="Submit Form" />
    </form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T15:19:56.373

```
<form method='POST' action='back_to_your_form.php' name='thisForm'>

<?php foreach ($_POST as $key => $value) { ?>

  <input name='<?php echo $key; ?>' value='<?php echo $value; ?>' type='hidden'>

<?php } ?>

  <input name='redirected' type='hidden'>
</form>

<script language='javascript'>
  document.thisForm.submit();
</script> 
```

在 Manolis 答案中，您将所需的数据存储在会话中，工作正常，但在将数据插入表单后取消设置。在这里，您生成一个新表单，填写输入隐藏输入字段，然后通过 POST 方法提交到您的页面。在你的页面上，试试这个：

```
<?php
if (isset($_POST['redirected'])) {
?>
  <input name="key1" value="<?php echo $_POST['key1']; ?>" >
  <input name="key2" value="<?php echo $_POST['key2']; ?>" >
  <button>Submit</button>
<?php
}
?> 
```

在这里，您将值填回表单中，如果您返回此页面，您可以通过检查是否设置了 $_POST['redirected'] 来获取此信息。您可以将此检查设为全局，就像我在此处或在每个输入字段上所做的那样。

```
<input name="key" value="<?php if (isset($_POST['redirected')) { echo $_POST['key']; } ?>" > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T14:57:18.113

您在表单中使用哪种方法 GET 或

PHP 不能只是重定向回来，生成一个表单，输入带有名称和值的隐藏输入字段，然后：

```
document.nameOfForm.submit(); 
```

# java - Java Swing 拆分窗格视图布局

> ID：12544816
> 
> 赞同：3
> 
> 时间：2012-09-22T14:53:10.237
> 
> 标签：java, swing, view, split, pane

您好，我正在实现我的第一个拆分窗格视图，它似乎对我不起作用，我得到以下输出......

![在此处输入图像描述](../Images/2d72fb949a57bb20a85773e57ffb66c6.png)

这是代码。

```
//Create Album Panel
    albumPanel.setLayout(new FlowLayout());

    //Add List view
    albumList.setMinimumSize (new Dimension(150,150));
    albumPanel.add(new JScrollPane(albumList));

    //Add Text Area
    textArea.setLineWrap(true);
    textArea.setWrapStyleWord(true);
    textArea.setEditable(false);
    textArea.setMinimumSize (new Dimension(150,150));
    albumPanel.add(textArea);

    //Split Pane
    JSplitPane splitpane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, albumList, textArea);

    albumPanel.add(splitpane, BorderLayout.CENTER); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T14:57:42.720

您需要将组件、保存列表和文本区域的 JScrollPanes 添加到 JSplitPane 以使其显示它们。是的，正如 David 所说（对他来说是 1+），你的容器容纳 JSplitPane 需要能够让它扩展，而 BorderLayout 可以很好地解决这个问题。

此外，不要多次将组件添加到容器中。将组件添加到 JScrollPanes，然后将 JScrollPanes 添加到 JSplitPane。不要也将组件添加到albumPanel 容器中。在这方面，您的代码有点精神分裂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T14:57:55.047

您已将`albumPanel`布局设置为，`FlowLayout`但在添加时尝试使用`BorderLayout`常量`JSplitPane`：

`albumPanel.add(splitpane, BorderLayout.CENTER);`

您应该将`albumPanel`布局设置为`BorderLayout`通过`new BorderLayout()`

此外，设置组件的大小也不是一个好主意，让`LayoutManager`'s 为您完成。

# jakarta-ee - Vaadin：让 CDI 和 ThreadLocal 成为朋友

> ID：12544824
> 
> 赞同：0
> 
> 时间：2012-09-22T14:54:14.510
> 
> 标签：jakarta-ee, vaadin, cdi

`@Inject`使用ThreadLocal 变量时是否可以使用 CDI 的注释？有一个片段：

```
@VaadinScoped(VaadinScope.APPLICATION)
 public class AdminApplication extends AbstractCdiApplication implements HttpServletRequestListener {

 private static ThreadLocal<AdminApplication> threadLocal = new ThreadLocal<AdminApplication>();

 @Inject
 private Instance<Lang> lang;

 @Override
 public void init() {
    setInstance(this);
    setLocale(Lang.RU_RU);
    setMainWindow(new LoginWindow());
 }

 @Override
 public final void setLocale(Locale locale) {
    getInstance().lang.get().setLocale(locale);
    super.setLocale(locale);
 }

    public static AdminApplication getInstance() {
    return threadLocal.get();
 }

 public static void setInstance(AdminApplication application) {
       threadLocal.set(application);
 }

 @Override
 public void onRequestStart(HttpServletRequest request, HttpServletResponse response)  {
    AdminApplication.setInstance(this);
 } 
```

当我尝试调用这些方法时：

```
public void authenticate(String login, String password) throws Exception {
    if ("user".equals(login) && "querty".equals(password)) {
        loadProtectedResources();
        return;
    }

    throw new Exception("Login failed!");
}

private void loadProtectedResources() {
    String mainWindowCaption = getInstance().lang.get().getText("mainwindow-name");
    setMainWindow(new Window(mainWindowCaption));
} 
```

我通常会得到一个 NullPointerException ，因为它`getInstance().lang.get()`是空的。

朗是：

```
@VaadinScoped(VaadinScope.APPLICATION)
public class Lang implements Serializable, TextBundle {...} 
```

有趣的是，如果我使用`@EJB`注解，注入的 ejb 就在那里（不为空）。另一件事是`getInstance().lang`默认实例（在调试中看到这个），但是当我调用`getInstance().lang.get()`它时它是空的。

我尝试使用直接引用`@Inject private Lang lang;`，但似乎 CDI 与 HttpServletRequestListener 一起添加不适用于它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:50:16.130

'ThreadLocal 模式' 最初用于使 HTTP 请求数据和 Vaadin 应用程序实例易于用于 Vaadin 应用程序的其余部分 - 无需传递变量引用。

也就是说，如果使用 CDI，我认为没有任何 ThreadLocal 变量应该没问题。只需在需要的地方使用 RequestScoped 和 VaadinScoped 变量。

# java - 如何动态更改 JTextbox 中文本的大小

> ID：12544841
> 
> 赞同：3
> 
> 时间：2012-09-22T14:55:30.133
> 
> 标签：java, swing, jakarta-ee

我有以下运行良好的代码，但我想知道是否有任何方法可以更改字体大小以填充 JTextBox 中的最大区域。当我在三个不同的主题上运行代码时，它给了我不同的结果。

```
import java.awt.BorderLayout;
import java.awt.FlowLayout;
import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JPanel;
import javax.swing.Box;
import javax.swing.BoxLayout;
import javax.swing.JLabel;
import java.awt.GridLayout;
import javax.swing.JTextField;
import javax.swing.border.TitledBorder;
import javax.swing.SwingConstants;
import javax.swing.JPasswordField;
import java.awt.Component;
public class NewLoginBox extends JDialog {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    private final JPanel contentPanel = new JPanel();
    private JTextField userID;
    private JPasswordField passwordField;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        try {
            NewLoginBox dialog = new NewLoginBox();
            dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
            dialog.setVisible(true);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Create the dialog.
     */
    public NewLoginBox() {
        setBounds(100, 100, 350, 220);
        getContentPane().setLayout(new BorderLayout());
        contentPanel.setBorder(new TitledBorder(null, "Sign In", TitledBorder.LEADING, TitledBorder.TOP, null, null));
        getContentPane().add(contentPanel, BorderLayout.CENTER);
        contentPanel.setLayout(new BoxLayout(contentPanel, BoxLayout.Y_AXIS));
        {
            JPanel titlePanel = new JPanel();
            contentPanel.add(titlePanel);
            titlePanel.setLayout(new BoxLayout(titlePanel, BoxLayout.Y_AXIS));
            {
                JLabel lblPleaseEnterYour = new JLabel("Welcome to Application. Please Sign In ");
                lblPleaseEnterYour.setAlignmentX(Component.CENTER_ALIGNMENT);
                lblPleaseEnterYour.setAlignmentY(Component.BOTTOM_ALIGNMENT);
                lblPleaseEnterYour.setHorizontalAlignment(SwingConstants.LEFT);
                titlePanel.add(lblPleaseEnterYour);
                titlePanel.add(Box.createVerticalStrut(15));
            }
        }
        {
            JPanel formPanel = new JPanel();
            contentPanel.add(formPanel);
            formPanel.setLayout(new GridLayout(0, 2, 5, 5));
            {
                JLabel lblUserId = new JLabel("User ID");
                formPanel.add(lblUserId);
            }
            {
                userID = new JTextField("", 15);
                formPanel.add(userID);
                userID.setColumns(10);
            }
            {
                JLabel lblPassword = new JLabel("Password");
                formPanel.add(lblPassword);
            }
            {
                passwordField = new JPasswordField();
                formPanel.add(passwordField);
            }
        }
        {
            JPanel buttonPane = new JPanel();
            buttonPane.setLayout(new FlowLayout(FlowLayout.RIGHT));
            getContentPane().add(buttonPane, BorderLayout.SOUTH);
            {
                JButton okButton = new JButton("OK");
                okButton.setActionCommand("OK");
                buttonPane.add(okButton);
                getRootPane().setDefaultButton(okButton);
            }
            {
                JButton cancelButton = new JButton("Cancel");
                cancelButton.setActionCommand("Cancel");
                buttonPane.add(cancelButton);
            }
            {
                JButton btnHelp = new JButton("Help");
                buttonPane.add(btnHelp);
            }
        }
    }

} 
```

![Nimbus 外观和感觉](../Images/0788af083e70052d0b160d2339b9a69a.png)- 这是最好的外观和感觉。

![窗口外观](../Images/ad21bce0667570603614bece5a53c127.png)

![摇摆外观](../Images/87f239fc6cc46c0d81226f3d4c9d28ad.png)

现在我想要 Jtextbox 的大小应该根据里面的文本动态改变。这样我们就可以拥有一致的外观和感觉。
谢谢 Ashish Tyagi

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T15:07:11.870

*   不要将 GridLayout 用于您的 formPanel。而是使用 GridBagLayout。
*   或者考虑使用第 3 方布局，例如[MigLayout](http://www.miglayout.com/)。
*   不要设置 GUI 的边界。而是让布局管理器为您执行此操作。
*   不要忘记`pack()`在用组件填充它们之后以及在显示它们之前调用您的顶级窗口。

例如，

新登录框.java：

```
import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.FlowLayout;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JDialog;
import javax.swing.JPanel;
import javax.swing.Box;
import javax.swing.BoxLayout;
import javax.swing.JLabel;
import java.awt.GridLayout;
import javax.swing.JTextField;
import javax.swing.border.Border;
import javax.swing.border.CompoundBorder;
import javax.swing.border.EmptyBorder;
import javax.swing.border.TitledBorder;
import javax.swing.SwingConstants;
import javax.swing.JPasswordField;
import java.awt.Component;

public class NewLoginBox extends JDialog {
   private static final long serialVersionUID = 1L;
   private final JPanel contentPanel = new JPanel();
   private JTextField userID;
   private JPasswordField passwordField;

   public static void main(String[] args) {
      try {
         NewLoginBox dialog = new NewLoginBox();
         dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
         dialog.pack();
         dialog.setLocationRelativeTo(null);
         dialog.setVisible(true);
      } catch (Exception e) {
         e.printStackTrace();
      }
   }

   public NewLoginBox() {
      //setBounds(100, 100, 350, 220);
      // getContentPane().setLayout(new BorderLayout());
      TitledBorder titledBorder = new TitledBorder(null, "Sign In",
            TitledBorder.LEADING, TitledBorder.TOP, null, null);
      int ebGap = 10;
      EmptyBorder emptyBorder = new EmptyBorder(ebGap, ebGap, ebGap, ebGap);
      Border compoundBorder = new CompoundBorder(titledBorder, emptyBorder);
      contentPanel.setBorder(compoundBorder );
      getContentPane().add(contentPanel, BorderLayout.CENTER);
      contentPanel.setLayout(new BoxLayout(contentPanel, BoxLayout.Y_AXIS));
      JPanel titlePanel = new JPanel();
      contentPanel.add(titlePanel);
      titlePanel.setLayout(new BoxLayout(titlePanel, BoxLayout.Y_AXIS));
      JLabel lblPleaseEnterYour = new JLabel(
            "Welcome to Application. Please Sign In ");
      lblPleaseEnterYour.setAlignmentX(Component.CENTER_ALIGNMENT);
      lblPleaseEnterYour.setAlignmentY(Component.BOTTOM_ALIGNMENT);
      lblPleaseEnterYour.setHorizontalAlignment(SwingConstants.LEFT);
      titlePanel.add(lblPleaseEnterYour);
      titlePanel.add(Box.createVerticalStrut(15));

      JPanel formPanel = new JPanel();
      contentPanel.add(formPanel);

      // formPanel.setLayout(new GridLayout(0, 2, 5, 5));
      ebGap = 7;
      formPanel.setBorder(BorderFactory.createEmptyBorder(ebGap, ebGap, ebGap, ebGap));
      formPanel.setLayout(new GridBagLayout());
      JLabel lblUserId = new JLabel("User ID");
      addWithGbc(formPanel, lblUserId, 0, 0);
      userID = new JTextField("", 15);
      addWithGbc(formPanel, userID, 1, 0);
      userID.setColumns(10);
      JLabel lblPassword = new JLabel("Password");
      addWithGbc(formPanel, lblPassword, 0, 1);
      passwordField = new JPasswordField();
      addWithGbc(formPanel, passwordField, 1, 1);
      JPanel buttonPane = new JPanel();
      buttonPane.setLayout(new FlowLayout(FlowLayout.RIGHT));
      getContentPane().add(buttonPane, BorderLayout.SOUTH);
      JButton okButton = new JButton("OK");
      okButton.setActionCommand("OK");
      buttonPane.add(okButton);
      getRootPane().setDefaultButton(okButton);
      JButton cancelButton = new JButton("Cancel");
      cancelButton.setActionCommand("Cancel");
      buttonPane.add(cancelButton);
      JButton btnHelp = new JButton("Help");
      buttonPane.add(btnHelp);
   }

   private void addWithGbc(Container container, JComponent component, int x,
         int y) {
      int hGap = 5;

      GridBagConstraints gbc = new GridBagConstraints();
      gbc.gridx = x;
      gbc.gridy = y;
      if (x % 2 == 0) {
         gbc.anchor = GridBagConstraints.WEST;
         gbc.insets = new Insets(hGap, 0, hGap, 20); // magic number!
         gbc.weightx = 1.0;
         gbc.weighty = 1.0;
         gbc.fill = GridBagConstraints.BOTH;
      } else {
         gbc.anchor = GridBagConstraints.EAST;
         gbc.insets = new Insets(hGap, 0, hGap, 0);
         gbc.weightx = 1.0;
         gbc.weighty = 0.0;
         gbc.fill = GridBagConstraints.HORIZONTAL;
      }
      container.add(component, gbc);
   }
} 
```

# cassandra - 拥有多个数据中心时的 Cassandra 复制因子

> ID：12544844
> 
> 赞同：10
> 
> 时间：2012-09-22T14:55:54.420
> 
> 标签：cassandra

我无法理解 Cassandra 中的复制因子。在文档中它说：“整个集群的副本总数通常被称为复制因子”。另一方面，在同一文档中，它说“NetworkTopologyStrategy 允许您指定每个数据中心需要多少个副本”。那么，如果我有 2 个具有 NetworkTopologyStrategy 的数据中心，复制因子为 2 意味着我将在每个数据中心有 2 个副本，或者在集群中总共有 2 个副本？

谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-22T17:23:28.250

`strategy_options:{data-center-name}={rep-factor-value}`使用 NetworkTopologyStrategy 时，您可以使用而不是 global指定基于每个数据中心的复制因子`strategy_options:replication_factor={rep-factor-value}`。

这是改编自[http://www.datastax.com/docs/1.0/references/cql/CREATE_KEYSPACE的具体示例](http://www.datastax.com/docs/1.0/references/cql/CREATE_KEYSPACE)

```
CREATE KEYSPACE Excalibur WITH strategy_class = 'NetworkTopologyStrategy'
  AND strategy_options:DC1 = 2 AND strategy_options:DC2 = 2; 
```

在该示例中，任何给定的列将存储在总共 4 个节点上，每个数据中心有 2 个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T20:06:49.993

复制因子基本上是您想要拥有的副本数（额外副本）。

要记住的一件事是它总是声明“副本数不应超过节点数”。所以我有 2 个节点，你不应该有 3 个作为复制因子。

# python - 如何找出要在 Ironpython 中导入的 Windows 窗体模块？

> ID：12544855
> 
> 赞同：0
> 
> 时间：2012-09-22T14:57:08.337
> 
> 标签：python, ironpython, windowsformsintegration

我正在尝试复制[此页面中包含的示例中的一些代码，并](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.autosize.aspx)[使用这些教程中的一些帮助](http://www.voidspace.org.uk/ironpython/winforms/)对其进行修改以在 Iron python 上运行。但是当我走出教程时，我被困住了，我不知道我需要导入哪些模块。

目前我有以下代码

```
import clr
clr.AddReference("System.Drawing")
clr.AddReference("System.Windows.Forms")

from System.Windows.Forms import Application, Form, Button, Label, DockStyle, AnchorStyles, Panel, Screen, FlowLayoutPanel

class OKWindow(Form):
   def __init__(self,InfoTXT):
      newlines = 0
      screenSize = Screen.GetWorkingArea(self)
      STRwidth = 200
      STRheight = 30
      FORMheight = 160 
      FORMwidth = 300
      self.Text = 'Information'
      self.Height = FORMheight
      self.Width = FORMwidth

      self.flowPanel = FlowLayoutPanel()
      #self.flowPanel.AutoSize = true
      #self.flowPanel.AutoSizeMode = AutoSizeMode.GrowAndShrink
      self.Controls.Add(flowPanel)

      label = Label()
      label.Text = InfoTXT
      label.Top = 30
      label.Left = 50
      label.Height = STRheight
      label.Width = STRwidth

      button = Button()
      button.Text = "OK"
      button.Width = 100
      button.Top = FORMheight - 80
      button.Left = (FORMwidth / 2) - 50
      print button.Anchor
      button.Anchor = AnchorStyles.Bottom

      button.Click += self.buttonPressed

      self.Controls.Add(label)
      self.Controls.Add(button)

   def buttonPressed(self, sender, args):
      Application.Exit()

def information(Message):
   Application.EnableVisualStyles()
   form = OKWindow(Message)
   Application.Run(form) 
```

（注意：代码不准确，因为它当前在 OCTGN 的 Iron python 脚本引擎中运行。我从其他地方调用 information() 函数，并带有一些文本，例如`information('Important Announcement')`。）

因此，一旦我尝试执行此代码，代码就会中止`self.flowPanel = FlowLayoutPanel()`。如果我注释掉 flowPanel 行，windows 窗体会正常显示。

所以在我看来，我没有正确导入需要的模块。不幸的是，我不知道要加载什么。我尝试加载我认为合适的任何内容，但似乎没有一个对我有用。

如何确定要从哪个模块导入`System.Windows.Forms`以便在我的代码中创建 FlowLayoutPanel？一般来说，如何确定要导入什么以获得相关功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T16:41:58.410

答案似乎是第三个点“。”之后的任何内容。在 System.Windows.Forms

所以要使用System.Windows.Forms.Form，需要导入Form。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-21T14:08:43.897

所有的答案都错了。导入中缺少 AutoSizeMode，然后代码有效

```
import clr
clr.AddReference("System.Drawing")
clr.AddReference("System.Windows.Forms")

from System.Windows.Forms import Application, Form, Button, Label, DockStyle, AnchorStyles, Panel, Screen, FlowLayoutPanel,AutoSizeMode

#from System.Windows.Forms import *

class OKWindow(Form):
    def __init__(self,InfoTXT):
        newlines = 0
        screenSize = Screen.GetWorkingArea(self)
        STRwidth = 200
        STRheight = 30
        FORMheight = 160 
        FORMwidth = 300
        self.Text = 'Information'
        self.Height = FORMheight
        self.Width = FORMwidth

        flowPanel = FlowLayoutPanel()
        flowPanel.AutoSize = True
        flowPanel.AutoSizeMode = AutoSizeMode.GrowAndShrink

        print(AutoSizeMode)
        self.Controls.Add(flowPanel)

        label = Label()
        label.Text = InfoTXT
        label.Top = 30
        label.Left = 50
        label.Height = STRheight
        label.Width = STRwidth

        button = Button()
        button.Text = "OK"
        button.Width = 100
        button.Top = FORMheight - 80
        button.Left = (FORMwidth / 2) - 50
        #print( button.Anchor)
        button.Anchor = AnchorStyles.Bottom

        button.Click += self.buttonPressed

        self.Controls.Add(label)
        self.Controls.Add(button)

    def buttonPressed(self, sender, args):
        Application.Exit()

def information(Message):
    Application.EnableVisualStyles()
    form = OKWindow(Message)
    Application.Run(form)

information('laber') 
```

# jquery - Can not write in later added sortable input fields

> ID：12544856
> 
> 赞同：1
> 
> 时间：2012-09-22T14:57:13.907
> 
> 标签：jquery, jquery-ui, input, html-table, jquery-ui-sortable

I have a `<table id="table">` inside the table are input fields that needs to be sortable. With a button you can add new inputfields. Unfortunately in the later added input fields can not be written.

Unfortunately I haven't found a solution.

Can you give me tips or help me?

I have the Problem in FireFox 15.0.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:30:36.273

It's because of `.disableSelection()` if you remove it then text is editable.

# html - 如何验证 HTML5（例如未封闭 标签）

> ID：12544859
> 
> 赞同：4
> 
> 时间：2012-09-22T14:57:22.560
> 
> 标签：html, validation

我习惯于通过强迫他们使用[http://validator.w3.org](http://validator.w3.org)来检查他们是否忘记关闭标签来教其他人编写好的 html 代码的重要性。

这在使用 xHTML1 Strict 时效果很好，但我想尽可能使用 HTML5 文档类型和标签。

验证器不会报告打开`<p>`标签而不关闭标签是错误的。

这在 HTML5 中是正常的还是验证器无法正常工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T15:03:39.247

验证器可能正常工作：

> 如果 p 元素后面紧跟地址、文章、aside、blockquote、dir、div、dl、fieldset、footer、form、h1、h2、h3、h4、h5、h6、header，则可以省略 p 元素的结束标记、hr、menu、nav、ol、p、pre、section、table 或 ul 元素，或者如果父元素中没有更多内容且父元素不是 a 元素。

来自：[http ://www.w3.org/TR/html-markup/p.html](http://www.w3.org/TR/html-markup/p.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T15:00:44.793

Validator.nu 将提供 HTML5 验证，您可以在此处阅读更多信息[http://about.validator.nu/](http://about.validator.nu/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-02T15:06:46.047

我刚刚发现这完全符合您的要求……迟到总比没有好！

[http://jona.ca/blog/unclosed-tag-finder](http://jona.ca/blog/unclosed-tag-finder)

我还在 Windows 中使用了 tidy 和 xml 编辑器，但它们真的很旧（不懂 html5），而且我不再在 Windows 上运行 Web 开发，只有 Mac/Linux。

# android - 安装应用程序后小部件停止工作

> ID：12544860
> 
> 赞同：1
> 
> 时间：2012-09-22T14:57:23.467
> 
> 标签：android, android-appwidget, onclicklistener

这是我的第一个应用小部件。我有一个问题。当我在设备上设置小部件时，它工作正常，但是，当我从市场上安装另一个应用程序时，它停止了。我按它，没有任何反应。

这是我的`onUpdate`：

```
@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    super.onUpdate(context, appWidgetManager, appWidgetIds);
    final int N = appWidgetIds.length;
    for (int i = 0; i < N; i++) {
        int appWidgetId = appWidgetIds[i];

        SharedPreferences prefs = context.getSharedPreferences("prefs", 0);
        SharedPreferences.Editor editor = prefs.edit();
        editor.putInt("appWidgetId", appWidgetId).commit();

        Intent intent = new Intent();
        intent.setAction(WidgetIntent.WIDGET_INTENT);
        intent.setClassName(WidgetIntent.class.getPackage().getName(),
                WidgetIntent.class.getName());

        PendingIntent pendingIntent = PendingIntent.getBroadcast(
                context.getApplicationContext(), 0, intent, PendingIntent.FLAG_CANCEL_CURRENT);
        RemoteViews view = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
        view.setOnClickPendingIntent(R.id.widget_button, pendingIntent);

        appWidgetManager.updateAppWidget(appWidgetId, view);
    } 
```

我正在另一个扩展的类中收看广播`BroadcastReceiver`。

我看到一个答案说我也应该设置`onClickPendingIntent on the onRecive`。但是，我试过了，它不起作用。也许我不知道该怎么做。

有人知道这里发生了什么吗？

谢谢！

更新：我刚刚注意到它在 android 2.3 上运行良好，但在 4.1 上停止，为什么会这样？4.1有什么区别让它停止？

# csrf - 在作为响应传递的每个请求上更新 CSRF 令牌是否安全？（阿贾克斯）

> ID：12544865
> 
> 赞同：1
> 
> 时间：2012-09-22T14:57:45.057
> 
> 标签：csrf

我正在考虑如何在我们的 Web 应用程序中实现 CSRF 令牌。我知道如何使用简单的 HTTP 来做到这一点`POST`。当我们谈论 AJAX 时，我们的问题就出现了，我知道我必须将令牌附加到我们的请求中，但是......然后我应该使用新令牌进行更新。

这只会在请求有效时发生，因此如果它有效，它将返回一个新的 CSRF 令牌作为 JSON 中返回的数据的一部分。

是这样的吗？或者有更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-14T09:51:17.147

如果您这样做，您将面临大量失败请求的风险，具体取决于您的应用程序。例如，如果用户在多个选项卡中打开您的网站。

我建议在一段时间内保持 CSRF 令牌相同，就像您使用会话令牌一样。不必每次请求都更改它。

# java - Java jButton 需要在开始活动之前单击两次

> ID：12544866
> 
> 赞同：5
> 
> 时间：2012-09-22T14:57:48.037
> 
> 标签：java, swing, jbutton, netbeans-7

我正在 Netbeans 7.1 中构建一个 GUI，它代表医院设备项目的输液泵。按 jButton1 应显示某个 jLabel，指示输液正在运行。再次按下 jButton1 应该会停止它。我唯一的问题是该按钮需要在第一次工作之前单击两次。之后，它完全按照我想要的方式工作。我已经在这个问题上搜索了多个线程，但其他解决方案似乎不起作用。谁能帮我？提前致谢！

```
 package infusion;
  public class Infusion {
    static Interface screen;

    public Infusion(){

        screen = new Interface();
        screen.setVisible(true);
        screen.jLabel3.setVisible(true);
        screen.jButton1.setVisible(true);
    }    

    public static void main(String[] args) {
        // TODO code application logic here
        Infusion infusion = new Infusion();
    }
   } 
```

这是用户界面的代码（主要由 Netbeans 生成）。jButton1ActionPerformed 的实现是我改编的唯一代码。

```
package infusion;

    public class Interface extends javax.swing.JFrame {
        boolean pump1Running = false;
        /**
         * Creates new form Interface
         */
        public Interface() {
            initComponents();
        }

        /**
         * This method is called from within the constructor to initialize the form.
         * WARNING: Do NOT modify this code. The content of this method is always
         * regenerated by the Form Editor.
         */
        @SuppressWarnings("unchecked")
        // <editor-fold defaultstate="collapsed" desc="Generated Code">
        private void initComponents() {

            jPanel1 = new javax.swing.JPanel();
            jLabel3 = new javax.swing.JLabel();
            jSeparator1 = new javax.swing.JSeparator();
            jButton1 = new javax.swing.JButton();

            setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
            setBackground(new java.awt.Color(255, 255, 255));
            setPreferredSize(new java.awt.Dimension(800, 562));
            setResizable(false);

            jPanel1.setPreferredSize(new java.awt.Dimension(800, 540));

            javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
            jPanel1.setLayout(jPanel1Layout);
            jPanel1Layout.setHorizontalGroup(
                jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGap(0, 800, Short.MAX_VALUE)
            );
            jPanel1Layout.setVerticalGroup(
                jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGap(0, 540, Short.MAX_VALUE)
            );

            jLabel3.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Pauze.png"))); // NOI18N
            jLabel3.setText("Infusion Paused");

            jButton1.setText("Start infusion");
            jButton1.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
            jButton1.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent evt) {
                    jButton1ActionPerformed(evt);
                }
            });

            javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
            getContentPane().setLayout(layout);
            layout.setHorizontalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                    .addContainerGap(36, Short.MAX_VALUE)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                            .addComponent(jButton1)
                            .addGap(18, 18, 18)
                            .addComponent(jLabel3, javax.swing.GroupLayout.PREFERRED_SIZE, 189, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addComponent(jSeparator1, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, 649, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addContainerGap())
            );
            layout.setVerticalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                    .addGap(0, 22, Short.MAX_VALUE)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(layout.createSequentialGroup()
                            .addGap(51, 51, 51)
                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 64, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(jLabel3, javax.swing.GroupLayout.PREFERRED_SIZE, 59, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGap(18, 18, 18)
                            .addComponent(jSeparator1, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
            );

            pack();
        }// </editor-fold>

            //Booleans

        private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
            if (pump1Running == false){
                jLabel3.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Pauze.png")));
                jLabel3.setText("Infusion Paused");
                jButton1.setText("Start Infusion");
                pump1Running = true;
            }
            else {//if (pump1Running == true){
                jLabel3.setIcon(new javax.swing.ImageIcon(getClass().getResource("/arrows64.gif")));
                jLabel3.setText("Running infusion");
                jButton1.setText("Stop Infusion");
                pump1Running = false;
            }     
            // TODO add your handling code here:
        }                                        

        /**
         * @param args the command line arguments
         */
        public static void main(String args[]) {
            /*
             * Set the Nimbus look and feel
             */
            //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
            /*
             * If Nimbus (introduced in Java SE 6) is not available, stay with the
             * default look and feel. For details see
             * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
             */
            try {
                for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                    if ("Nimbus".equals(info.getName())) {
                        javax.swing.UIManager.setLookAndFeel(info.getClassName());
                        break;
                    }
                }
            } catch (ClassNotFoundException ex) {
                java.util.logging.Logger.getLogger(Interface.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
            } catch (InstantiationException ex) {
                java.util.logging.Logger.getLogger(Interface.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
            } catch (IllegalAccessException ex) {
                java.util.logging.Logger.getLogger(Interface.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
            } catch (javax.swing.UnsupportedLookAndFeelException ex) {
                java.util.logging.Logger.getLogger(Interface.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
            }
            //</editor-fold>
            /*
             * Create and display the form
             */
            java.awt.EventQueue.invokeLater(new Runnable() {

                public void run() {
                    new Interface().setVisible(true);
                }
            });
        }
        // Variables declaration - do not modify
        public static javax.swing.JButton jButton1;
        public javax.swing.JLabel jLabel3;
        public javax.swing.JPanel jPanel1;
        private javax.swing.JSeparator jSeparator1;
        // End of variables declaration

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T15:23:46.943

问题：pump1Running = false，因此当您单击按钮时，它会将标签和图像设置为与开始时相同的内容。然后它将其切换为 true，然后它可以切换到另一个标签/图像。

```
 if (pump1Running){
            jLabel3.setIcon(new ImageIcon(getClass().getResource("/Pauze.png")));
            jLabel3.setText("Infusion Paused");
            jButton1.setText("Start Infusion");
            pump1Running = !pump1Running;
        }
        else {//if (pump1Running == true){
            jLabel3.setIcon(new ImageIcon(getClass().getResource("/Pauze.png")));
            jLabel3.setText("Running infusion");
            jButton1.setText("Stop Infusion");
            pump1Running = !pump1Running;
        } 
```

这会切换 pump1 来回运行并解决问题。

# ruby-on-rails - Rails 生成错误

> ID：12544867
> 
> 赞同：0
> 
> 时间：2012-09-22T14:57:48.693
> 
> 标签：ruby-on-rails, ruby, model, rails-generate

每次我尝试使用 rails generate 时，都会收到以下错误消息。不知道我做错了什么：

```
rails generate controller Say hello goodbye
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:251:in `block in default_middleware_stack': uniniti
alized constant Rails::Rack::Logger (NameError)
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:232:in `tap'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:232:in `default_middleware_stack'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:469:in `app'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/application/finisher.rb:31:in `block in <module:Finis
her>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `instance_exec'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `run'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:55:in `block in run_initializers'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `each'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `run_initializers'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:136:in `initialize!'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/railtie/configurable.rb:30:in `method_missing'
        from E:/AptanaWorkspace/depot/config/environment.rb:5:in `<top (required)>'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:103:in `require'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:103:in `require_environment!'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:25:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

红宝石版本 1.9.3 轨道版本 3.2.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-14T18:36:34.320

从您的日志中：

```
uninitialized constant Rails::Rack::Logger 
```

这意味着某些东西正在寻找 Rails::Rack:Logger 但找不到它。执行以下命令查看是否安装了 Rack。

```
bundle show rack
/home/nrowegt/.rvm/gems/ruby-2.2.2/gems/rack-1.6.1 
```

如果没有显示，重新运行“bundle install”或“gem install rack”

# jqplot - 如何将一些线条放在前景中，而将其他线条放在背景中？

> ID：12544877
> 
> 赞同：0
> 
> 时间：2012-09-22T14:58:30.733
> 
> 标签：jqplot

我需要一些数据线覆盖其他数据线而不改变 jqplot 中的顺序。我怎样才能做到这一点？

```
plot1 = $.jqplot("chart1", [line1foreground,line2background,line3foreground, line4background,line5background], plotOptions) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T15:13:40.047

您正在寻找[`moveSeriesToFront`](http://www.jqplot.com/docs/files/jqplot-core-js.html#jqPlot.moveSeriesToFront)方法。

# android - 按返回键无法完成我的应用程序。但是从最近的应用程序列表中删除它可以

> ID：12544879
> 
> 赞同：0
> 
> 时间：2012-09-22T14:58:51.910
> 
> 标签：android

我正在使用 android:launchMode="singleTask" 创建一个 Activity。在应用程序中，还有另一个类，未在活动中声明，它保持自己的静态最终实例和一些日志以显示在活动中。当我尝试按返回键完成活动时。正如我所说，日志显示活动已被破坏

```
@Override
public void onDestroy() {
    super.onDestroy();
    Log.d("I am destroyed", ".");
} 
```

活动中的代码。但是，当我再次启动应用程序时，我发现活动仍然与我离开时相同。然后，我按返回键，手动将其从最近的应用程序列表中删除。并再次运行该应用程序。这一次，应用程序按原样显示。

按返回键完成一个应用程序并在最近的应用程序列表中删除它有什么区别？如果我想像普通应用一样完成应用，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T15:06:26.807

每个 android 应用程序都有自己的[进程](http://en.wikipedia.org/wiki/Process_%28computing%29)，并且在该进程中，还有一个活动可以多次启动和完成而不会结束进程。

静态变量不会在 Activity 结束时超出范围，但仅在进程最终结束时才会超出范围。

您可以通过调用来结束整个过程，`System.exit(0)`但是通常不鼓励这种事情，更好的解决方案是在活动被销毁时重新初始化相关值。

**编辑：**有关关闭 Android 应用程序的更多详细信息，请参阅此帖子：

[如何关闭安卓应用程序？](https://stackoverflow.com/questions/2092951/how-to-close-android-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T15:09:04.670

“退出”您的应用程序并不意味着它已完成。Android 决定何时完成，如果有的话。这是设计使然，旨在提供应用程序的快速启动并且运行良好。您没有显示任何代码，所以这只是一个猜测，但您可能在 onCreate() 中做的太多而忽略了 onResume()。看一下 Android 活动生命周期：

[http://developer.android.com/reference/android/app/Activity.html#Lifecycle](http://developer.android.com/reference/android/app/Activity.html#Lifecycle)

# excel - 如何同时保持 Cell IndentLevel 和 AutoFit RowHeight？

> ID：12544882
> 
> 赞同：0
> 
> 时间：2012-09-22T14:59:05.420
> 
> 标签：excel, vba

再一次关于单元格格式

```
cell.EntireRow.WrapText = True
cell.EntireRow.AutoFit
cell.IndentLevel = 1   ' AutoFit is discarded 
```

或反向

```
cell.IndentLevel = 1
cell.EntireRow.WrapText = True
cell.EntireRow.AutoFit    ' IndentLevel is discarded 
```

那么，是否可以将单元格 IndentLevel 和 RowHeight AutoFit 保持在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T21:09:23.397

您可能想要同时设置`RowHeight`和`ColumnWidth`。

出于某种原因，如果列宽开始比您需要的宽，那么列自动调整似乎有效，所以试试这个

```
With cell
    .WrapText = True
    .IndentLevel = 1
    .ColumnWidth = 255
    .EntireRow.AutoFit
    .EntireColumn.AutoFit
End With 
```

# asp.net - 如何在asp.net的同一解决方案中重定向不同项目中的页面

> ID：12544884
> 
> 赞同：0
> 
> 时间：2012-09-22T14:59:27.223
> 
> 标签：asp.net

我有一个名为 MainProject 的解决方案：-在解决方案中有 6 个项目，

我想从第 6 个项目 aspx 链接 5 个项目的起始页，我该怎么做？

```
from 6th project(as solution starting project) , default.aspx page 

Link1 : open 1st project starting page
Link2 : open 2st project starting page
Link3 : open 3rd project starting page
Link4 : open 4th project starting page
Link5 : open 5th project starting page 
```

更多说明：我在 asp.net 中有很多小项目，我把它们放在一个解决方案中，现在从一个 default.aspx 页面，我需要查看所有项目的起始页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T16:06:32.533

*   您的每个项目都是其自己的网站或 Web 应用程序
*   当您发布任何/全部时，它们将是不同的网站/应用程序
*   您可以链接和/或重定向到他们的任何页面，就像在不同的网站之间一样

如果您在开发时询问如何简单地运行所有项目**，**那么您可以右键单击每个项目的任何页面并“在浏览器中查看”。请注意 Visual Studio 为每个页面分配的端口 (`http://localhost: **12345** ) - 这是 Visual Studio 模拟不同网站的方式。

您还可以将它们全部移动到 IIS，为每个分配它自己的 IP 并这样做。

关键是它们是不同的网站/应用程序（我不想让你感到困惑，但这不是一个硬性规则——你的项目之一也可以是其他项目中的子*应用程序*）。

# c# - 您可以在 webform aspx 中调用 MVC 操作吗？

> ID：12544886
> 
> 赞同：1
> 
> 时间：2012-09-22T14:59:37.290
> 
> 标签：c#, asp.net-mvc-3, webforms

是否可以从 Web 表单页面调用 MVC 控制器/操作？

所以这是一个网络表单页面：

```
<html>
<body>
<asp:label runat="server" id="lbl1">Hi, I'm a label.</asp:Label>

<%=Html.Action("Controller","Action")%>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T15:05:16.320

如果您有可用的[HTML 帮助](http://msdn.microsoft.com/en-us/library/system.web.mvc.htmlhelper%28v=vs.108%29.aspx)程序，请按照您尝试的方式进行操作：

```
Html.Action("Controller","Action"); 
```

否则，只需使用普通链接：

```
<a href="www.domain.com/controller/action/params">Link</a> 
```

设置控制器和动作名称，以及可选的参数。MVC 控制器响应纯 HTTP 请求，因此这将起作用。现在，请记住*www.domain.com/controller/action/params*在使用默认[MVC 默认路由机制](http://weblogs.asp.net/scottgu/archive/2007/12/03/asp-net-mvc-framework-part-2-url-routing.aspx)时有效。如果您的 MVC 实现使用不同的，那么您需要适当地更改地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-08T20:29:36.770

我已经分叉并创建了 MvcInteropX 来帮助将 MVC 集成到现有的 webforms 应用程序中

看看：[www.nuget.org/packages/MvcInteropX](https://www.nuget.org/packages/MvcInteropX "Nuget MvcInteropX")

# php - MySQL - 如何在更复杂的查询中替换 ORDER BY？

> ID：12544887
> 
> 赞同：1
> 
> 时间：2012-09-22T14:59:41.670
> 
> 标签：php, mysql, sql, random, sql-order-by

为了从表中获取记录，我使用这个 mysql 查询：

```
SELECT 
    a.id as aid, a.data1 as adata1, a.data2 as adata2
    b.id as bid, b.data1 as bdata1, b.data2 as bdata2
FROM table AS a
JOIN table AS b ON ( a.id <> b.id ) 
WHERE (a.data1=1 AND b.data1=1) AND ABS( a.rating - b.rating ) <100
ORDER BY RAND() 
LIMIT 1 
```

这个查询准确地获取了我需要的记录，但不幸的`RAND()`是因为这个查询很慢。

我找到了一些方法，如何避免使用`RAND()`函数，例如[这里](http://www.titov.net/2005/09/21/do-not-use-order-by-rand-or-how-to-get-random-rows-from-table/)。但我的问题是，我仍然找不到方法，如何替换`RAND()`此查询中的函数。在一些简单的查询中替换是没有问题的`RAND()`，但我不知道，如何在上面的例子中做到这一点......因为`WHERE`子句中有更多的条件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:17:19.150

由于您使用的是 MySQL，您可以尝试使用以下 SQL 查询，首先从表中获取计数，然后根据该计数选择随机偏移量。然后它准备一个语句，以便可以使用计算的偏移量并执行该语句。

```
SELECT @count := COUNT(*) FROM table AS a JOIN table AS b ON ( a.id <> b.id ) WHERE (a.data1=1 AND b.data1=1) AND ABS( a.rating - b.rating ) <100;
SET @offset = CONVERT(FLOOR(RAND() * @count), SIGNED);
PREPARE mystatement FROM "SELECT 
                          a.id as aid, a.data1 as adata1, a.data2 as adata2
                          b.id as bid, b.data1 as bdata1, b.data2 as bdata2
                          FROM table AS a
                          JOIN table AS b ON ( a.id <> b.id ) 
                          WHERE (a.data1=1 AND b.data1=1) AND ABS( a.rating - b.rating ) <100 LIMIT ?, 1";
EXECUTE mystatement USING @offset;
DEALLOCATE PREPARE mystatement; 
```

在大型数据集上的执行速度应该比 快`ORDER BY RAND()`，请尝试让我知道... ;-)

**编辑**

查询将无法在 phpmyadmin 上使用，因此请使用 MySQL 控制台运行它们或编写一个 php 脚本，其中有两个选项，第一个是让 mysql 完成工作：

```
mysql_query('SELECT @count := COUNT(*) FROM table AS a JOIN table AS b ON ( a.id <> b.id ) WHERE (a.data1=1 AND b.data1=1) AND ABS( a.rating - b.rating ) <100');
mysql_query('SET @offset = CONVERT(FLOOR(RAND() * @count), SIGNED)');
mysql_query('PREPARE mystatement FROM "SELECT 
                          a.id as aid, a.data1 as adata1, a.data2 as adata2
                          b.id as bid, b.data1 as bdata1, b.data2 as bdata2
                          FROM table AS a
                          JOIN table AS b ON ( a.id <> b.id ) 
                          WHERE (a.data1=1 AND b.data1=1) AND ABS( a.rating - b.rating ) <100 LIMIT ?, 1"');
$res = mysql_query('EXECUTE mystatement USING @offset');
$row = mysql_fetch_assoc($res);
print_r($row); 
```

第二个可能更快的选择包括使用 MySQL 完成一部分工作，而另一部分使用编程语言（在我们的例子中是 PHP）：

```
$res = mysql_query("SELECT COUNT(*) FROM table AS a JOIN table AS b ON ( a.id <> b.id ) WHERE (a.data1=1 AND b.data1=1) AND ABS( a.rating - b.rating ) <100')");
$row = mysql_fetch_array($res);
$offset = rand(0, $row[0]-1);

$res = mysql_query("SELECT 
                              a.id as aid, a.data1 as adata1, a.data2 as adata2
                              b.id as bid, b.data1 as bdata1, b.data2 as bdata2
                              FROM table AS a
                              JOIN table AS b ON ( a.id <> b.id ) 
                              WHERE (a.data1=1 AND b.data1=1) AND ABS( a.rating - b.rating ) <100 LIMIT $offset, 1");
$row = mysql_fetch_assoc($res); 
```

我发现的另一种加快 ORDER BY RAND() 的替代方法包括如下查询：

```
SELECT 
    a.id as aid, a.data1 as adata1, a.data2 as adata2
    b.id as bid, b.data1 as bdata1, b.data2 as bdata2
FROM table AS a
JOIN table AS b ON ( a.id <> b.id ) 
WHERE (RAND() < (SELECT ((1/COUNT(*))*10) FROM table AS a JOIN table AS b ON ( a.id <> b.id ) ) )
 AND (a.data1=1 AND b.data1=1) AND ABS( a.rating - b.rating ) <100
ORDER BY RAND() 
LIMIT 1 
```

不要忘记告诉我你得到的结果;-)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T15:22:42.663

你的问题不是很具体。. . 桌子有多大？究竟什么是“相当慢”？您正在尝试查找表中的所有记录对，其中 data1 = 1 并且评级差异小于 100。在以下版本中，我将所有条件移至“ON”子句，因此它们更清楚地放在一起：

```
SELECT a.id as aid, a.data1 as adata1, a.data2 as adata2
       b.id as bid, b.data1 as bdata1, b.data2 as bdata2
FROM table AS a join
     table AS b
     ON a.id <> b.id and
        a.data1 = b.data1 and
        a.data1 = 1 and b.data1 = 1 and
        ABS( a.rating - b.rating ) < 100
ORDER BY RAND() 
LIMIT 1 
```

我还添加了附加条件`a.data1 = b.data1`，因为这有助于 SQL 引擎将其识别为等值连接，这应该有助于连接性能。

假设 data1 是选择性的（意味着相对较少的记录有 data1），那么您应该能够使用 (data1, id) 或 (data1, rating) 上的索引来加快速度。

如果您知道每条记录至少有一个匹配项（即，每条记录都有另一条具有相似评级的记录），那么以下变体应该会更好：

```
SELECT a.id as aid, a.data1 as adata1, a.data2 as adata2
       b.id as bid, b.data1 as bdata1, b.data2 as bdata2
FROM (select *
      from table AS a
      where a.data1 = 1
      order by rand()
      limit 1
     ) a join
     table AS b
     ON a.id <> b.id and
        a.data1 = b.data1 and
        a.data1 = 1 and b.data1 = 1 and
        ABS( a.rating - b.rating ) < 100
ORDER BY RAND() 
LIMIT 1 
```

这首先选择一个随机记录，然后进行自连接。

这给了我一个想法，你可以采取不同的方法来解决这个问题，如下所示。首先计算您正在查看的数据的评级。然后选择差值小于 100 的随机评分对，然后找到与这些评分匹配的随机记录。使用 data1 和 rating 的索引，这种方法可能是最快的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T15:21:06.387

如果您对问题空间的分布不太均匀感到满意，您可以尝试：

```
SELECT a.id as aid, a.data1 as adata1, a.data2 as adata2
       b.id as bid, b.data1 as bdata1, b.data2 as bdata2
  FROM ( SELECT *
           FROM table
          WHERE data1 = 1
          ORDER
             BY RAND()
          LIMIT 1
       ) a
  JOIN table b
    ON b.data1 = 1
   AND b.rating BETWEEN a.rating - 100 AND a.rating + 100
 ORDER
    BY RAND()
 LIMIT 1
; 
```

以上将随机选择一条记录`a`，然后随机选择一条记录`b`。因此，要订购和加入的记录要少得多。这不太统一，因为这意味着 的所有选择的可能性都是`a`相等的，而不是与 的可能对应选择的数量成正比`b`，但也许它对您的目的来说已经足够了？

# r - 是否有与 Stata 'order' 命令等效的 R 函数？

> ID：12544888
> 
> 赞同：5
> 
> 时间：2012-09-22T14:59:53.030
> 
> 标签：r, stata

R 中的“顺序”看起来像 Stata 中的“排序”。例如，这是一个数据集（仅列出了变量名称）：

v1 v2 v3 v4 v5 v6 v7 v8 v9 v10 v11 v12 v13 v14 v15 v16 v17 v18

这是我期望的输出：

v1 v2 v3 v4 v5 v7 v8 v9 v10 v11 v12 v17 v18 v13 v14 v15 v6 v16

在 R 中，我有两种方法：

```
data <- data[,c(1:5,7:12,17:18,13:15,6,16)] 
```

或者

```
names <- c("v1", "v2", "v3", "v4", "v5", "v7", "v8", "v9", "v10", "v11", "v12",  "v17", "v18", "v13", "v14", "v15", "v6", "v16")
data <- data[names] 
```

为了在 Stata 中获得相同的输出，我可以运行 2 行：

```
order v17 v18, before(v13)
order v6 v16, last 
```

在上面的理想数据中，我们可以知道我们要处理的变量的位置。但在大多数实际情况下，我们有像“年龄”“性别”这样没有位置指示符的变量，而且我们在一个数据集中可能有超过 50 个变量。那么Stata中“订单”的优势可能会更加明显。我们不需要知道变量的确切位置，只需输入它的名称：

```
order age, after(gender) 
```

R 中是否有一个基本函数来处理这个问题，或者我可以得到一个包吗？提前致谢。

```
tweetinfo <- data.frame(uid=1:50, mid=2:51, annotations=3:52, bmiddle_pic=4:53, created_at=5:54, favorited=6:55, geo=7:56, in_reply_to_screen_name=8:57, in_reply_to_status_id=9:58, in_reply_to_user_id=10:59, original_pic=11:60, reTweetId=12:61, reUserId=13:62, source=14:63, thumbnail_pic=15:64, truncated=16:65)
noretweetinfo <- data.frame(uid=21:50, mid=22:51, annotations=23:52, bmiddle_pic=24:53, created_at=25:54, favorited=26:55, geo=27:56, in_reply_to_screen_name=28:57, in_reply_to_status_id=29:58, in_reply_to_user_id=30:59, original_pic=31:60, reTweetId=32:61, reUserId=33:62, source=34:63, thumbnail_pic=35:64, truncated=36:65)
retweetinfo <- data.frame(uid=41:50, mid=42:51, annotations=43:52, bmiddle_pic=44:53, created_at=45:54, deleted=46:55, favorited=47:56, geo=48:57, in_reply_to_screen_name=49:58, in_reply_to_status_id=50:59, in_reply_to_user_id=51:60, original_pic=52:61, source=53:62, thumbnail_pic=54:63, truncated=55:64)
tweetinfo$type <- "ti"
noretweetinfo$type <- "nr"
retweetinfo$type <- "rt"
gtinfo <- rbind(tweetinfo, noretweetinfo)
gtinfo$deleted=""
gtinfo <- gtinfo[,c(1:16,18,17)]
retweetinfo <- transform(retweetinfo, reTweetId="", reUserId="")
retweetinfo <- retweetinfo[,c(1:5,7:12,17:18,13:15,6,16)]
gtinfo <- rbind(gtinfo, retweetinfo)
write.table(gtinfo, file="C:/gtinfo.txt", row.names=F, col.names=T, sep="\t", quote=F)
# rm(list=ls(all=T)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-24T16:29:44.917

因为我在拖延和尝试不同的事情，所以这是我掀起的一个功能。最终，它取决于`append`：

```
moveme <- function(invec, movecommand) {
  movecommand <- lapply(strsplit(strsplit(movecommand, ";")[[1]], ",|\\s+"), 
                        function(x) x[x != ""])
  movelist <- lapply(movecommand, function(x) {
    Where <- x[which(x %in% c("before", "after", "first", "last")):length(x)]
    ToMove <- setdiff(x, Where)
    list(ToMove, Where)
  })
  myVec <- invec
  for (i in seq_along(movelist)) {
    temp <- setdiff(myVec, movelist[[i]][[1]])
    A <- movelist[[i]][[2]][1]
    if (A %in% c("before", "after")) {
      ba <- movelist[[i]][[2]][2]
      if (A == "before") {
        after <- match(ba, temp)-1
      } else if (A == "after") {
        after <- match(ba, temp)
      }    
    } else if (A == "first") {
      after <- 0
    } else if (A == "last") {
      after <- length(myVec)
    }
    myVec <- append(temp, values = movelist[[i]][[1]], after = after)
  }
  myVec
} 
```

以下是一些代表数据集名称的示例数据：

```
x <- paste0("v", 1:18) 
```

现在想象一下，我们想要“v17”和“v18”在“v3”之前，最后是“v6”和“v16”，开头是“v5”：

```
moveme(x, "v17, v18 before v3; v6, v16 last; v5 first")
#  [1] "v5"  "v1"  "v2"  "v17" "v18" "v3"  "v4"  "v7"  "v8"  "v9"  "v10" "v11" "v12"
# [14] "v13" "v14" "v15" "v6"  "v16" 
```

因此，对于`data.frame`名为“df”的明显用法是：

```
df[moveme(names(df), "how you want to move the columns")] 
```

而且，对于一个`data.table`名为“DT”（正如@mnel 指出的那样，它的内存效率会更高）：

```
setcolorder(DT, moveme(names(DT), "how you want to move the columns")) 
```

* * *

请注意，复合移动由分号指定。

公认的动作是：

*   `before`（将指定的列移动到另一个命名列之前）
*   `after`（将指定的列移动到另一个命名列之后）
*   `first`（将指定的列移动到第一个位置）
*   `last`（将指定的列移动到最后一个位置）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T20:20:18.177

我明白你的问题。我现在可以提供代码：

```
move <- function(data,variable,before) {
  m <- data[variable]
  r <- data[names(data)!=variable]
  i <- match(before,names(data))
  pre <- r[1:i-1]
  post <- r[i:length(names(r))]
  cbind(pre,m,post)
}

# Example.
library(MASS)
data(painters)
str(painters)

# Move 'Expression' variable before 'Drawing' variable.
new <- move(painters,"Expression","Drawing")
View(new) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T04:55:22.967

您可以编写自己的函数来执行此操作。

以下将使用与 stata 类似的语法为您提供列名的新顺序

*   `where`是一个有 4 种可能性的命名列表

    *   `list(last = T)`
    *   `list(first = T)`
    *   `list(before = x)``x`有问题的变量名称在 哪里
    *   `list(after = x)``x`有问题的变量名称在 哪里
*   `sorted = T``var_list`将按字典顺序排序（命令`alphabetic`和命令`sequential`的组合）`stata`

该函数仅适用于名称，（一旦您将`data.frame`对象传递为`data`，并返回重新排序的名称列表

例如

```
stata.order <- function(var_list, where, sorted = F, data) {
    all_names = names(data)
    # are all the variable names in
    check <- var_list %in% all_names
    if (any(!check)) {
        stop("Not all variables in var_list exist within  data")
    }
    if (names(where) == "before") {
        if (!(where %in% all_names)) {
            stop("before variable not in the data set")
        }
    }
    if (names(where) == "after") {
        if (!(where %in% all_names)) {
            stop("after variable not in the data set")
        }
    }

    if (sorted) {
        var_list <- sort(var_list)
    }
    where_in <- which(all_names %in% var_list)
    full_list <- seq_along(data)
    others <- full_list[-c(where_in)]

    .nwhere <- names(where)
    if (!(.nwhere %in% c("last", "first", "before", "after"))) {
        stop("where must be a list of a named element first, last, before or after")
    }

    do_what <- switch(names(where), last = length(others), first = 0, before = which(all_names[others] == 
        where) - 1, after = which(all_names[others] == where))

    new_order <- append(others, where_in, do_what)
    return(all_names[new_order])
}

tmp <- as.data.frame(matrix(1:100, ncol = 10))

stata.order(var_list = c("V2", "V5"), where = list(last = T), data = tmp)

##  [1] "V1"  "V3"  "V4"  "V6"  "V7"  "V8"  "V9"  "V10" "V2"  "V5" 

stata.order(var_list = c("V2", "V5"), where = list(first = T), data = tmp)

##  [1] "V2"  "V5"  "V1"  "V3"  "V4"  "V6"  "V7"  "V8"  "V9"  "V10"

stata.order(var_list = c("V2", "V5"), where = list(before = "V6"), data = tmp)

##  [1] "V1"  "V3"  "V4"  "V2"  "V5"  "V6"  "V7"  "V8"  "V9"  "V10"

stata.order(var_list = c("V2", "V5"), where = list(after = "V4"), data = tmp)

##  [1] "V1"  "V3"  "V4"  "V2"  "V5"  "V6"  "V7"  "V8"  "V9"  "V10"

# throws an error
stata.order(var_list = c("V2", "V5"), where = list(before = "v11"), data = tmp)

## Error: before variable not in the data set 
```

如果您想有效地进行内存重新排序（通过引用，无需复制），请使用`data.table`

```
DT <- data.table(tmp)
# sets by reference, no copying
setcolorder(DT, stata.order(var_list = c("V2", "V5"), where = list(after = "V4"), 
    data = DT))

DT

##     V1 V3 V4 V2 V5 V6 V7 V8 V9 V10
##  1:  1 21 31 11 41 51 61 71 81  91
##  2:  2 22 32 12 42 52 62 72 82  92
##  3:  3 23 33 13 43 53 63 73 83  93
##  4:  4 24 34 14 44 54 64 74 84  94
##  5:  5 25 35 15 45 55 65 75 85  95
##  6:  6 26 36 16 46 56 66 76 86  96
##  7:  7 27 37 17 47 57 67 77 87  97
##  8:  8 28 38 18 48 58 68 78 88  98
##  9:  9 29 39 19 49 59 69 79 89  99
## 10: 10 30 40 20 50 60 70 80 90 100 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T09:48:41.160

这应该给你相同的文件：

```
#snip
gtinfo <- rbind(tweetinfo, noretweetinfo)
gtinfo$deleted=""
retweetinfo <- transform(retweetinfo, reTweetId="", reUserId="")
gtinfo <- rbind(gtinfo, retweetinfo)
gtinfo <-gtinfo[,c(1:16,18,17)]
#snip 
```

可以在 R 中实现像 Strata 的 order 函数这样的函数，但我认为对此的需求并不大。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T18:34:52.940

目前还不清楚你想做什么，但你的第一句话让我假设你想对数据集进行排序。

实际上，有一个内置`order`函数，它返回有序序列的索引。你在找这个吗？

```
> x <- c(3,2,1)

> order(x)
[1] 3 2 1

> x[order(x)]
[1] 1 2 3 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-20T07:00:28.310

package`dplyr`和 function`dplyr::relocate`是 中引入的一个新动词`dplyr 1.0.0`，完全符合您的要求。

`library(dplyr)`

`data %>% relocate(v17, v18, .before = v13)`

`data %>% relocate(v6, v16, .after = last_col())`

`data %>% relocate(age, .after = gender)`

# android - 两部安卓手机之间的远距离通信

> ID：12544891
> 
> 赞同：0
> 
> 时间：2012-09-22T15:00:32.033
> 
> 标签：android, sockets, geolocation, gps

我正在寻找一个Android应用程序，它驻留在两部手机上，发送位置数据并接收相同的信息以了解另一台设备的距离和绝对方向，并显示用户是否朝着正确的方向前进（即距离减少）或不。

设备如何通信？2G/3G 互联网或短信会是一个不错的选择吗？这个想法很难实现吗？任何的意见都将会有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:30:06.407

您有三种选择来自动获取设备位置：GPS、蜂窝信号三角测量和 WiFi 定向定位。您可以在本指南中了解他们的个人优势和劣势：[位置策略](http://developer.android.com/guide/topics/location/strategies.html)

至于长距离通信，您有 2-3 个选项从设备推送和提取数据：移动数据、WiFi 以及在适当情况下的蓝牙。这是一篇关于[WiFi Direct](http://developer.android.com/guide/topics/connectivity/wifip2p.html)的文章。

这些都是涉及的主题，对于一个问题来说太复杂了，在常见问题解答下：

> 你的问题应该有合理的范围。如果你能想象一本书可以回答你的问题，那你就问得太多了。

但是，您可以通过一次完成目标来实现目标。

# asp.net - 更改 QueryString 参数/值

> ID：12544893
> 
> 赞同：0
> 
> 时间：2012-09-22T15:00:40.983
> 
> 标签：asp.net, c#-4.0, request, query-string, asp.net-4.0

我想更好地理解为 url 设置新参数并通过检索它的问题

`var ParaValue = Request.QueryString["parameterName"];`

所以如果我有一个 URL：“http://www.myWebsite.aspx?UserName=Alice”

我将通过上面的示例检索它

`string uName = Request.QueryString["UserName"].ToString();`

但是如果我想改变值怎么办，例如 make UserName = "Ralf"

*   重新编辑

当按下按钮时，有一个参数“state”包含对按下的按钮的引用 state 的值是 =“none”，现在我想将其设置为 img_button1。

我什至没有发送实际的 imgbutton id

我只是为了测试/参考而对其进行硬编码

所以我可以知道我正处于按钮1给定事件的过程所要求的事件阶段

当事件由`img_button2`

然后我想将状态设置为“img_button2”等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:25:14.377

在我进行研究之后（我无法在我的帖子中标记任何答案）然后我测试了我在[这个 Stack Overflow Page](https://stackoverflow.com/questions/3813934/change-single-url-query-string-value)中遇到的两个选项：

第一个选项（由 Ahmad Mageed 提供）我已经测试过可以正常工作。并且可读性很容易理解（因为我对 asp.net 'tricks'仍然很陌生）

然后跟着 annakata 的回答，这是一种显着改进的方法，您实际上不必重定向即可获得结果 - 查询字符串已修改

在玩耍之后，我决定遵循[annakata](https://stackoverflow.com/users/13018/annakata)的方法并制作一个辅助方法，该方法也使用带有修改后的 QueryString 参数和值的 redirerion 选项。

```
public void QuerStrModify(string CurrQS_ParamName, string NewQs_paramName, string NewPar_Value, bool redirectWithNewQuerySettings = false)
{

    // reflect to readonly property 
    PropertyInfo isReadOnly = typeof(System.Collections.Specialized.NameValueCollection).GetProperty("IsReadOnly", BindingFlags.Instance | BindingFlags.NonPublic);

    // make collection editable 
    isReadOnly.SetValue(this.Request.QueryString, false, null);

    // remove 
    this.Request.QueryString.Remove(CurrQS_ParamName);

    // modify 
    this.Request.QueryString.Set(NewQs_paramName, NewPar_Value);

    // make collection readonly again 
    isReadOnly.SetValue(this.Request.QueryString, true, null);
    string FullUrl = Request.Url.AbsolutePath;
    if (redirectWithNewQuerySettings)
    {
        Response.Redirect(string.Join("?", FullUrl, this.Request.QueryString));
    }

} 
```

我发现它对那些在 asp.net developmentmet 方面经验相当少的人很有帮助，所以我将它作为我的正确答案版本发布，正如我所见。我希望它能帮助寻求相同解决方案的其他人。

随意进一步改进它，正如我提到的那样，我还不是一个成熟的人才。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T15:04:07.530

您可以使用`HttpModule`

```
public class SimpleRewriter : System.Web.IHttpModule
{

    HttpApplication _application = null;

    public void Init(HttpApplication context)
    {
        context.BeginRequest += new System.EventHandler(context_BeginRequest);
        _application = context;
    }

    public void Dispose()
    {
    }

    private void context_BeginRequest(object sender, System.EventArgs e)
    {
        string requesturl =
            _application.Context.Request.Path.Substring(0,
                _application.Context.Request.Path.LastIndexOf("//")
            );

        string[] parameters = requesturl.Split(new char[] { '/' });

        if (parameters.Length > 1)
        {
            string firstname = parameters[1];
            string lastname = parameters[2];

            //Here you can modify your parameters or your url

            _application.Context.RewritePath("~/unfriendly.aspx?firstname=" +
                firstname + "&lastname=" + lastname);

        }
    }
} 
```

链接：http: [//msdn.microsoft.com/en-us/library/ms972974.aspx](http://msdn.microsoft.com/en-us/library/ms972974.aspx)

注册：

```
<configuration>
  <system.web>
    <httpModules>
      <add name="SimpleRewriter" type="SimpleRewriter"/>
     </httpModules>
  </system.web>
</configuration> 
```

链接：http: [//msdn.microsoft.com/en-us/library/ms227673%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms227673%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T15:05:30.113

这里的问题是“真相的来源”问题。[HttpRequest.QueryString](http://msdn.microsoft.com/en-us/library/system.web.httprequest.querystring.aspx)公开的[NameValueCollection](http://msdn.microsoft.com/en-us/library/system.collections.specialized.namevaluecollection.aspx)公开了查询字符串，不应修改，因为查询字符串是由调用方提供的。如果应用程序有一个 UserName 查询字符串参数，但可能需要更改它（例如为了测试），请将其包装在一个方法中，以便在需要时将其从备用源中获取。例如：

```
// A very simple container
public static class SystemInfo
{
    // This would be an instance of QueryStringUserInfo
    // by default but could be changed for testing.
    public IUserInfo UserInfo
    {
        get;
        private set;
    }
}

// An interface that contains the user operations 
public interface IUserInfo
{
    string UserName { get; }
}

// Get the user name from the query string. This would
// be the default.
public class QueryStringUserInfo: IUserInfo
{
    public string UserName
    {
        get
        {
            return Request.QueryString["UserName"].ToString();
        }
    }
}

// Get the user name from the query string. This would
// be the default.
public class TestUserInfo: IUserInfo
{
    public string UserName
    {
        get
        {
            return "Foo";
        }
    }
} 
```

因此，不要直接为用户名（或任何一条信息）调用 QueryString，而是调用 SystemInfo 上的属性（可怕的名字，但你明白了）。它允许更改设置的来源，例如代码是否用于网页之外或用于测试。

# jquery - 如何将类添加到变化的链接

> ID：12544897
> 
> 赞同：0
> 
> 时间：2012-09-22T15:00:50.670
> 
> 标签：jquery

我使用免费的 punBB 脚本，指向用户个人资料的链接如下所示：`/u1`、`/u2`等`/u3`。

当有人将光标移到用户链接时，我试图创建一个工具提示，但首先，我需要向这些链接添加一个类，我不知道如何，因为它对每个用户都不同。

对于我使用的单个链接：

```
$(function() {

    jQuery('a').each(function() {
        if(jQuery(this).attr("href") == "/u1") {
            $(this).addClass('profile');
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T15:04:21.300

尝试这个：

```
$('a[href^="u/"]').addClass('profile') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T15:14:52.853

正如其他答案中提到的，我假设您不能首先将类添加到 HTML 输出中。如果您可以修改脚本，我建议您这样做，否则上述一般方法将起作用，尽管我认为这将是性能和精度的更好组合：

```
 $(function() {
        // Only fetch link elements with HREF beginning with "/u"
        $('a[href^="/u"]').each(function() {
            // For each of these elements, make sure its HREF actually matches the pattern
            // "/u" + <digits> before adding class
            if (/^\/u\d+$/.test($(this).attr('href'))) {
                $(this).addClass('profile');
            }
        });
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T15:04:00.057

尝试 indexOf，并将 /u1 更改为更具体的，例如 /usr1、/usr2

```
$(function() {

jQuery('a').each(function() {
    if(jQuery(this).attr("href").indexOf("/usr") != -1) {
        $(this).addClass('profile');
    }
});

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T15:05:44.420

您可以使用正则表达式来模式匹配用户链接

```
// pattern match /u999
var uregex = /\/u\d+/;

$(function() {
    jQuery('a').each(function() {
        // get href value
        var href = jQuery(this).attr("href");
        // test to see if it matches the user profile pattern
        if(uregex.test(href)) {
            $(this).addClass('profile');
        }
    });
}); 
```

# iphone - 在 ViewController 中使用时 TableView 为空

> ID：12544907
> 
> 赞同：0
> 
> 时间：2012-09-22T15:02:45.370
> 
> 标签：iphone, objective-c, cocoa-touch, ios5, xcode4.2

我有一个名为

```
@interface Appointment : UIViewController <UITableViewDelegate, UITextFieldDelegate, UIActionSheetDelegate>

{
    IBOutlet UITableViewCell *cellName;
    IBOutlet UITableViewCell *cellPhone;
    IBOutlet UITableViewCell *cellEmail;
    IBOutlet UITableViewCell *cellType;

    IBOutlet UITextField* txtName;
    IBOutlet UITextField* txtPhone;
    IBOutlet UITextField* txtEmail;
    IBOutlet UITextField* txtType;

    IBOutlet UITableView *tableView;

} 
```

在我的故事板中，视图控制器顶部有一个图像，一个条形图，下面是 tableView。我也连接了tableView。tableview 的 tableViewCells 显示得很好，但是当我运行代码时，整个屏幕都是空白的

1-为什么我的 TableView 不显示单元格 2-如何将图像设置为 TableView 的背景而不是默认

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:08:03.613

我敢打赌，您没有将`tableView`'s`delegate`和`dataSource`outlets 绑定到您的`Appointment`视图控制器以让 tableview 知道哪个对象将提供它（使用单元格`tableView:cellForRowAtIndexPath:`和其他`UITableViewDataSource`方法）。

# python - Hoare Partitioning算法说明

> ID：12544908
> 
> 赞同：4
> 
> 时间：2012-09-22T15:02:53.483
> 
> 标签：python, partitioning, hoare-logic

根据许多网站给出的伪代码，我编写了这个`Hoare`分区算法，它采用一个数组，子数组的开始和结束索引根据给定的枢轴进行分区。它工作正常，但有人可以解释逻辑，它是如何做的吗？这里的代码：

```
def hoare(arr,start,end):
     pivot = 4
     i,j = start,end
     while i < j:
        while i < j and arr[i] <= pivot:
            i += 1
        while j >= i and arr[j] > pivot:
            j -= 1
        if i < j:
            arr[i],arr[j] = arr[j],arr[i]
     return j 
```

分区还有另一种变体，即`Lomuto`算法。它做了类似的事情，虽然因为我一开始不理解`Hoare`算法，所以我看不出区别。任何人都可以解释算法中发生了什么，以及在哪种情况下哪个提供更好的性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T19:51:35.457

我建议使用一副纸牌和两个棋子/硬币来模拟它来表示`i`和`j`。基本上，该算法同时完成了这两件事：

*   找到应该拆分数组的位置，以便在该位置的左侧和右侧拥有正确数量的“桶” *。*这是由分区“中间”的值`i`和会议完成的。`j`
*   将数组元素移动到中间的左侧或右侧，具体取决于它们是否小于和大于枢轴。

这意味着在任何时候，`i`要么在它的中间，要么在它的左边。反之亦然`j`。知道了这一点，我们可以看到`while`循环所做的就是找到一个位于中间左侧但应该在右侧的元素，反之亦然。也就是说，找到*两个*在错误一半的元素。然后交换这些。

When`i`和`j`meet 在中间，在左边你有被 跳过的元素`while`，因为它们小于`pivot`; 或从另一侧交换的元素，因此也小于`pivot`. （对于中间右侧的元素，反之亦然。）

一个可能的混淆来源是，从零开始的数组索引可以被认为是指向一个元素，或者指向两个元素*之间。*例如，索引`0`基本上意味着“在'第零'和数组中的第一个元素之间”，当你访问一个元素时，你会在这个位置*之后*`array[0]`取一个 -导致*直观*上是数组的第一个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-09T14:53:48.347

[Hoare](https://en.wikipedia.org/wiki/Quicksort#Hoare_partition_scheme)和Lamuto[都是](https://en.wikipedia.org/wiki/Quicksort#Lomuto_partition_scheme)分区算法。分区算法在数组中移动事物，以便小于某个元素的所有内容都位于一侧，而所有大于某个元素的内容都位于另一侧。这可用于快速排序数组或查找中位数。

霍尔通过将两个边界移向中间来工作，一个从左侧，一个从右侧。以下步骤在循环中完成：

1.  左边界移动直到它到达比所选元素更大的东西。
2.  右边界移动，直到它到达比所选元素更小的东西。
3.  如果边界尚未跨越，则将两者交换。

重复此过程，直到边界在中间相遇。结果是一个分区，左边的东西少，右边的东西大。

Lomuto 是一个类似的过程，但只使用一个边界（通常从左侧向上）。这使它更容易实现，但速度稍慢（具有相同渐近复杂度的较大常数项）。

# python - 生成有序整数集

> ID：12544911
> 
> 赞同：1
> 
> 时间：2012-09-22T15:03:47.157
> 
> 标签：python, itertools

我正在尝试生成所有`N+1`整数集，`n_j`使得 `n_0 < n_1 < ... < n_N`每个整数集`n_j`在某个时间间隔内运行：`n_min <= n_j < n_max`.

我目前的解决方案：

```
def generate_partitions(nmin, nmax,N):
    n0 = range(nmin, nmax)
    return  (x for x in itertools.product(n0, repeat=N+1)
             if len(set(x)) == N+1 and list(x) == sorted(x)) 
```

虽然它有效，但显然相当愚蠢。我觉得应该有一个`itertools`基于更好的解决方案，但到目前为止我无法弄清楚，并且希望得到任何提示或指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T15:08:48.460

怎么样`itertools.combinations(range(nmin, nmax), N + 1)`？

# internet-explorer - IE输入背景图片问题

> ID：12544915
> 
> 赞同：5
> 
> 时间：2012-09-22T15:04:20.497
> 
> 标签：internet-explorer, input, background

IE 是唯一需要额外维护的浏览器（有人应该为此付费）这是我的问题：我创建了一些带有背景图像的输入，它们可与 FF、Chorme、IE9（未测试 Opera、Safari）一起使用，但不适用于 IE7 和 IE8通过忽略填充或滚动图像（IE7），文本溢出图像。

代码：http: [//jsfiddle.net/CEjXe/12/](http://jsfiddle.net/CEjXe/12/)

我知道我可以用 div 包装输入，并用填充和背景图像设置 div 的样式。我正在寻找一个不同的解决方案 css/js （如果有 1）。

谢谢

PS：减少最大长度不是一个选项，因为许多用户的电子邮件地址或密码很长，而且我正在使用更多字段的输入。

# automation - 在 Oracle11g 中自动执行任务

> ID：12544936
> 
> 赞同：2
> 
> 时间：2012-09-22T15:06:36.593
> 
> 标签：automation, oracle11g

我正在为拍卖创建一个数据库，其中有一个表，用于存储要拍卖的项目的条目。

```
create table items(
item_ID number(5) PRIMARY KEY,
SDate DATE NOT NULL,
EDate DATE NOT NULL, //end date for auction
minBid number(5,2) NOT NULL,
bidInc number(2,2) NOT NULL,
title varchar2(20) NOT NULL,
descr varchar2(255),
currentBid number(5,2)
) 
```

现在结束日期过去后，我希望数据库自动从表中删除该条目。
我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T15:11:24.870

好吧，您可以在数据库中编写一个作业，它将删除早于 X 时间的行，但是由于您将其标记为 C#，我猜您希望它在您的拍卖应用程序中完成。

在这种情况下，您可以创建一个`Timer`将在`DELETE FROM items WHERE EDate > XXX`每次运行时运行查询。

编辑：在这种情况下，您可以定义一个将删除旧行的存储过程，然后您需要使用`DBMS_JOB`. 我手头没有 Oracle DB 来测试它，但你可以尝试运行它：

创建一个存储过程：

```
create or replace procedure delete_old_auctions
as
begin
    delete from items where edate < sysdate
end; 
```

然后您需要创建一个作业，该作业将每 X 次执行此存储过程。

```
dbms_job.submit(
    what=>'your_db.delete_old_auctions',
    next_date=>sysdate+1/24,    -- start next hour
    interval=>'sysdate+1/24');  -- Run every hour 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T17:32:34.570

所有那些陷入类似解决方案的人都是这样做的。

第 1 步：创建程序

```
create procedure item_delete as
begin
delete from items where edate<sysdate
end; 
```

第 2 步：使用 DBMS_SCHEDULER 自动化

```
DBMS_SCHEDULER.create_job (
job_name        => 'delete_old_items',
job_type        => 'STORED_PROCEDURE',
job_action      => 'exec item_delete',
start_date      => sysdate,
repeat_interval => 'freq=daily; byhour=0;byminute=0;bysecond=0;',
end_date        => NULL,
enabled         => TRUE
);
END; 
```

参考
http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_sched.htm#i1000363

# php - PHP 与 Oracle - 错误 12537（TNS：连接已关闭）

> ID：12544938
> 
> 赞同：1
> 
> 时间：2012-09-22T15:06:42.593
> 
> 标签：php, oracle, oracle-call-interface

我正在尝试将 PHP 与 Oracle 11g 一起使用。我已经配置了 php.ini 文件（启用了 php_oci8.dll、php_oci8_11g.dll）

这是我正在使用的测试代码：

```
if ($conn = oci_connect('system', 'pass', '//localhost:1158/em')) {
    print 'Successfully connected to Oracle Database XE!';
    oci_close($conn);
} else {
    $errmsg = oci_error();
    print 'Oracle connect error: ' . $errmsg['message'];
}
?> 
```

但我收到此错误：Oracle 连接错误：

```
ORA-12537: TNS:connection closed 
```

有什么解决办法吗？

# javascript - 在 D3 中构建地图

> ID：12544941
> 
> 赞同：0
> 
> 时间：2012-09-22T15:06:45.863
> 
> 标签：javascript, map, d3.js

我想构建一个可视化，例如：

[http://bl.ocks.org/2206590](http://bl.ocks.org/2206590)

但是这个例子显示了美国。我可以为另一个国家做这个可视化吗？如果是，我该怎么做？

# javascript - Google Maps API - 弹跳标记问题

> ID：12544943
> 
> 赞同：2
> 
> 时间：2012-09-22T15:06:55.157
> 
> 标签：javascript, google-maps, google-maps-api-3

选择标记后，我希望它反弹。当我点击另一个标记时，我希望第一个停止弹跳，然后另一个开始弹跳。我认为这是可以通过简单地做到这一点来实现的

```
function bindInfoWindow(marker, map, infoWindow, html) {
google.maps.event.addListener(marker, 'click', function() {
 document.getElementById('loc-info').innerHTML = html;
 if (marker.getAnimation() != null) {
marker.setAnimation(null);
} else {
marker.setAnimation(google.maps.Animation.BOUNCE);
}
});
} 
```

相反，第一个标记将继续弹跳，直到再次单击它，我不希望发生这种情况。有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T15:09:58.833

在反弹新标记并将其设置为“当前”标记之前，您需要跟踪“当前”标记并将其动画设置为 null。

```
// track marker that is currently bouncing
var currentMarker = null;

function bindInfoWindow(marker, map, infoWindow, html) {
    google.maps.event.addListener(marker, 'click', function() {
        document.getElementById('loc-info').innerHTML = html;
        // remove the bounce from the "old" marker
        if (currentMarker) currentMarker.setAnimation(null);
        // set this marker to the currentMarker
        currentMarker = marker;
        // add a bounce to this marker
        marker.setAnimation(google.maps.Animation.BOUNCE);

    });
} 
```

您之前的代码只查看刚刚单击的标记 - 如果它没有单击（开始状态），那么您会使其反弹。下一次单击检查它是否正在弹跳（它是），并停止它。如果您想再次单击以停止弹跳，您可以将相同的逻辑添加到上面的代码中。

# html - Modernizr 在 IE8 上测试拖放

> ID：12544944
> 
> 赞同：3
> 
> 时间：2012-09-22T15:07:06.073
> 
> 标签：html, internet-explorer, internet-explorer-8, drag-and-drop, modernizr

我正在测试支持的拖放 API

```
 if (!Modernizr.draganddrop) {
    alert('No!');
}
else { 
    alert('Yes');
     } 
```

但不知何故，它在 IE8 中显示“是”，当然不支持 html5 D&D API。

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T20:22:39.020

阅读其他一些地方，似乎这可能是一个相当普遍的问题。

问题是，在浏览器上下文中“拖放”有不同的含义。

事实上，IE8 支持一组拖放事件处理程序*（*实际上一直到 IE5），这可能是 Modernizr 在本次测试中报告的真实情况。它们在旧版本的 IE 中与较新的浏览器中的事件相同，因为 HTML5 标准基本上形式化了 IE 已经在做的事情。参考：[Quirksmode](http://www.quirksmode.org/blog/archives/2009/09/the_html5_drag.html)（请原谅那里的亵渎！他显然不喜欢拖放 api。但重要的是他很清楚：拖放确实存在于旧 IE 版本中，实际上是微软发明的）

然而，这些拖放事件并不是全部。还有从浏览器窗口外部拖动文件并将其放入浏览器的概念。这完全是一个不同的拖放操作，并且是一个更新的功能。它目前列在[Modernizr 的“不可检测”页面](https://github.com/Modernizr/Modernizr/wiki/Undetectables)中，因为它无法准确检测。

据我所知，最接近检测它的人是将 Modernizr 拖放检查与 FileReader API 上的辅助检查相结合，如下所示：

```
if (!!window.FileReader && Modernizr.draganddrop) {
    ....
} 
```

但是，我也在阅读有关此技术对 Safari 造成假阴性的报告，因此请谨慎对待。

参考：

*   [SO：如何确定 HTML5 拖放文件上传 API 的存在](https://stackoverflow.com/questions/2311887/how-to-determine-presence-of-html5-dragndrop-file-upload-api-like-the-one-fro)
*   [SO：确定浏览器是否支持拖放功能？](https://stackoverflow.com/questions/5290861/determine-if-browser-is-drag-and-drop-capable)
*   [如何检测浏览器对文件 API 和拖放的支持](http://www.mattburns.co.uk/blog/2011/04/17/how-to-detect-browser-support-for-file-api-and-drag-and-drop-with-javascript/)

希望这有助于解释事情，即使它不一定使解决方案更清晰。

# html - jQuery Mobile 水平选择 - 最小宽度

> ID：12544949
> 
> 赞同：1
> 
> 时间：2012-09-22T15:07:55.037
> 
> 标签：html, css, jquery-mobile

我无法弄清楚 CSS 为每个选择按钮提供最小或固定宽度。默认情况下，宽度会根据内容调整，但我希望有一个最小值。我有几行，我希望它们在选择更改时保持对齐。

对于非 jqm 选择框也有类似的问题，其中解决方案只是设置宽度属性，但这在这里不起作用。

这是jsfiddle：

[http://jsfiddle.net/btppS/](http://jsfiddle.net/btppS/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:19:50.153

如果要更改标签的宽度，则必须在 css 内更改此行：

```
.ui-btn-text{
   width:300px; //example
} 
```

相反，如果您想在单击它时更改选择，您可以使用 jquery 尝试此代码：

```
$(document).ready(function() {
 $('#select-choice-month').css('width', '200px');//insert your width this is only for the month
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:37:27.827

有时 $(document).ready(..) 在 JQMobile 中并不是真正的正确位置（请参阅[Mark Dalgleish](http://markdalgleish.com/2011/04/document-ready-for-jquery-mobile/)的这个好链接）。但是要回答您的问题并且因为我有类似的问题，我使用了“pagebeforeshow”事件来做到这一点，因为在我的情况下，事件树中的“pagecreate”还不够。

所以我做了一些事情：

```
$('div[data-role=page]').live('pagebeforeshow',function(){ 
    $('.ui-select .ui-btn-text').css({'width':'60px'});
}); 
```

# sql - 如何编写数据库查询以使用地址搜索客户

> ID：12544953
> 
> 赞同：2
> 
> 时间：2012-09-22T15:08:19.700
> 
> 标签：sql, oracle

> **可能重复：**
> [使用地址搜索的数据库查询](https://stackoverflow.com/questions/12538926/database-query-to-search-using-address)

我正在开发一种搜索功能，通过他们的地址（即按邮政编码（zip）或按名称或按城市）为我的项目搜索经销商。将只为用户提供一个 html 输入字段来输入搜索词（用户一次只能输入一个搜索词，即邮政编码或姓名或城市（不允许组合））。

开发查询的条件如下

*   当用户按邮政编码搜索时，匹配的结果应按降序显示
*   当用户按名称搜索时，匹配结果应按字母顺序显示与城市名称相同

有时，名称也可能包含邮政编码，在这种情况下，结果应该用邮政编码缩短。

我试过这样

```
select city, postcode, name 
from dealers 
where name ='xyz' 
 OR postcode ='xyz' 
 OR city='XYZ' 
ORDER BY postcode desc 
```

但我想要`ORDER BY`每一个条件。例如 'xyz' 匹配名字我想按升序对结果进行排序。

我怎样才能做到这一点？任何建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:16:12.460

尝试这个：

```
SELECT 
  city, postcode, name 
FROM 
  dealers
WHERE 
...
ORDER BY
  CASE WHEN @postcodeParam IS NOT NULL THEN postcode END DESC,
  CASE WHEN @nameParam     IS NOT NULL THEN name     END, 
  CASE WHEN @citynameParam IS NOT NULL THEN cityname END 
```

# jquery - 如何在保持比例的同时将 div 扩展到浏览器的高度或宽度？[内图]

> ID：12544955
> 
> 赞同：1
> 
> 时间：2012-09-22T15:08:19.287
> 
> 标签：jquery, html, css, ios, responsive-design

如果浏览器窗口缩小了，那么我希望 div 和其中的图像也缩小。但它必须保持在中间，并且始终保持相同的比例。这可能吗？我已经尝试了很长时间没有运气。如有必要，我愿意使用 jQuery 或 JS。

![在此处输入图像描述](../Images/2f944de22fc61938fb8113f15d3ec3b7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T16:41:27.037

你可以使用这样的东西（使用 jQuery）：

```
<script language="jscript">
    $(function(){
        ratio=$('#centerdiv').width()/$('#centerdiv').height();
        rePos=function(){
            if($('#container').innerHeight()*ratio>$('#container').innerWidth()){
                $('#centerdiv').width($('#container').innerWidth());
                $('#centerdiv').height($('#centerdiv').width()/ratio);
                $('#centerdiv').offset({left:0,top:($('#container').innerHeight()-$('#centerdiv').outerHeight(true))/2});
            }
            else{
                $('#centerdiv').height($('#container').innerHeight());
                $('#centerdiv').width($('#centerdiv').height()*ratio);
                $('#centerdiv').offset({left:($('#container').innerWidth()-$('#centerdiv').outerWidth(true))/2,top:0});
            }
        };
        $(window).resize(rePos);
        rePos();
    });
    </script>
    <div id="container" style="position:absolute;top:0;bottom:0;left:0;right:0">
    <div id="centerdiv" style="position:absolute;width:150px;height:100px;background-color:red;padding:0;border:0;margin:0"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:11:40.137

一般的想法是这样的

**HTML**头：

```
<meta name="viewport" content="width=device-width"> 
```

和身体：

```
<div class="container">
  <img src="whatever.jpg"/>
  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
</div> 
```

和**CSS**：

```
.container {
  width: 90%;
  max-width: 480px; 
  background: #900;
  margin: 1em auto;    
}
.container img {
  display: block;
  width: 100%;
  margin: 1em auto;    
} 
```

基本上，容器 div 占据了可用宽度的 90%，最大为 480px，容器内的 img 占据了它所有可用的空间，并相应地调整大小。显然，所有细节都是任意的，完全取决于您的特定设计。我设置了一个[小提琴](http://jsfiddle.net/ultranaut/QjQge/embedded/result/)，您可以在其中看到它的运行情况。

**编辑**：忘记了在移动设备上保持洁净的视口元标记。

# assembly - nasm 64位推送qword？

> ID：12544957
> 
> 赞同：3
> 
> 时间：2012-09-22T15:08:40.067
> 
> 标签：assembly, x86-64, nasm, shellcode

我似乎有一个有趣的问题，尽管我可能做错了什么。

我的问题是我试图将 AAAABBBBCCCC 推入堆栈，然后通过标准输出打印它们。但是，在我的 x86_64 环境中，似乎是`push 0x41414141`pushes `4141414100000000`。

所以下面的代码块：

```
 global _start
    section .text
    _start:
    push 0x43434343  ; CCCC
    push 0x42424242  ; BBBB
    push 0x41414141  ; AAAA
    xor rax,rax      ; Zero RAX
    mov byte al,0x1  ; 1 for sys_write
    mov rdi,rax      ; 1 for stdout
    mov rsi,rsp      ; RSP for source
    mov byte dl,0xC  ; 12
    syscall          

    xor rax,rax      ; Zero RAX
    mov al, 0x3C     ; 60 for sys_edxit
    cdq              ; 0 for clean exit.
    syscall 
```

Outputs `AAAABBBB`，我认为只有 8 个字节，实际上是我要求的 12 个字节。当通过管道传输到输出文件并在 hexedit 中查看时，我注意到它正在显示`414141410000000042424242`.

我认为`push`指令推动了一个`dword`价值。到一个`qword`大小的堆栈上？我这样想对吗？

这可以通过考虑额外的字节，并将我的长度更改为 20 来避免。但这会导致诸如`sys_open`.

所以我的问题是，我做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-22T15:20:52.797

对于 64 位代码，堆栈 (RSP) 始终在 8 字节边界上对齐。也没有“push qword imm64”指令（见注）。

我的建议是将字符串“AAAABBBBCCCC”存储在它所属的数据部分（或“.rodata”）中，而不是弄乱堆栈。或者在 shellcode 中，

```
push   'CCCC'                  ; push qword, including 4 bytes of zeros
mov    rax, 'AAAABBBB'         ; mov reg, imm64; pick any register
push   rax                     ; push qword 
```

保留您的变态的替代方法可能是：

```
sub rsp,16
mov dword [rsp],'AAAA'
mov dword [rsp+4],'BBBB'
mov dword [rsp+8],'CCCC'
....
add rsp,16 
```

*注意：AMD 的手册说有一个“push imm64”指令。AMD 的手册是错误的——这条指令实际上是推动一个 32 位立即数（符号扩展为 64 位）。*

英特尔的手册没有这个问题：[https](https://www.felixcloutier.com/x86/push)
://www.felixcloutier.com/x86/push 还相关：[当我没有指定操作数大小时，push 指令将多少字节推入堆栈？](https://stackoverflow.com/questions/45127993/how-many-bytes-does-the-push-instruction-push-onto-the-stack-when-i-dont-specif)- 你绝对不能在 64 位模式下进行双字推送。

# java - 如何从头到尾逐渐显示字符串（可见性）？

> ID：12544964
> 
> 赞同：1
> 
> 时间：2012-09-22T15:09:12.387
> 
> 标签：java, android, visibility, arrays

我是 android 开发新手，在 Hang-Man 游戏中遇到了一些问题。

这就是我希望它工作的方式： 1\. 当应用程序启动时，打开数据库 (db.open()) 并从数据库 (db.random()) 中获取一个随机单词并放入生成的单词字符串。然后将 generatedWord 制作成 Spannablestring 文本 (SpannableString text = new SpannableString(generatedWord);) 并将整个文本制作成白色/不可见的颜色。

1.  当用户在 textview userInput 中输入一个字符时，我想通过使用 onKeyListener 将它保存到 lastInput 变量：lastInput = (char)event.getUnicodeChar();

2.  然后当按下 Enter 按钮时，应该调用 guess() 来发送 lastInput 的参数。在那里它检查 lastInput 是否在 indexOf generatedWord 中，如果是，它将使字符的文本再次变黑并再次可见，如果不是，它应该调用 showImages() 从而使图像可见。

事情是这样的！数据库正在工作，我刚刚让应用程序与 gui 和所有东西一起运行，然后我做了一些小改动，现在我无法再次启动应用程序，只会出现致命错误。我做错了什么，我能想到什么？

非常感谢

// 主要活动

```
 package com.emanuelolsson.simplehangman;

import database.DBAdapter;
import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.text.SpannableString;
import android.text.style.ForegroundColorSpan;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;

public class HangMan extends Activity {

    // DECLARE NEEDED VARIABLES
    private String generatedWord = "";
    private char lastInput = '\0';  
    private Button newGameButton, enterLetterButton;
    private EditText wordHolder, userInput;
    private ImageView imageOne, imageTwo, imageThree, imageFour, imageFive, imageSix, imageSeven, imageEight, winner, hanged;
    private SpannableString text = new SpannableString(generatedWord);
    private int count = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_hang_man);
        DBAdapter db = new DBAdapter(this);

        // ASSIGN OBJECTS
        newGameButton = (Button) findViewById(R.id.newGame);
        enterLetterButton = (Button) findViewById(R.id.enter);
        wordHolder = (EditText) findViewById(R.id.wordHolder);
        userInput = (EditText) findViewById(R.id.userInput);
        imageOne = (ImageView) findViewById(R.id.imageView1);
        imageTwo = (ImageView) findViewById(R.id.imageView2);
        imageThree = (ImageView) findViewById(R.id.imageView3);
        imageFour = (ImageView) findViewById(R.id.imageView4);
        imageFive = (ImageView) findViewById(R.id.imageView5);
        imageSix = (ImageView) findViewById(R.id.imageView6);
        imageSeven = (ImageView) findViewById(R.id.imageView7);
        imageEight = (ImageView) findViewById(R.id.imageView8);
        winner = (ImageView) findViewById(R.id.winner);
        hanged = (ImageView) findViewById(R.id.hanged);
        imageOne.setVisibility(View.INVISIBLE);
        imageTwo.setVisibility(View.INVISIBLE);
        imageThree.setVisibility(View.INVISIBLE);
        imageFour.setVisibility(View.INVISIBLE);
        imageFive.setVisibility(View.INVISIBLE);
        imageSix.setVisibility(View.INVISIBLE);
        imageSeven.setVisibility(View.INVISIBLE);
        imageEight.setVisibility(View.INVISIBLE);
        winner.setVisibility(View.INVISIBLE);
        hanged.setVisibility(View.INVISIBLE);

        // ADD LISTENERS
        newGameButton.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0) {

            }
        });

        enterLetterButton.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0) {

                guess(lastInput);
            }
        });

        userInput.setOnKeyListener(new View.OnKeyListener(){
            @Override
            public boolean onKey(View v, int keyCode, KeyEvent event) {
                lastInput = (char)event.getUnicodeChar();
                return false;
            }
        });

        db.open();
        db.randomize(generatedWord);
                SpannableString text = new SpannableString(generatedWord);
        text.setSpan(new ForegroundColorSpan(Color.WHITE), 0, text.length(), 0);  
        wordHolder.setText(text);
        db.close();
    }

// What happens when user clicks Enter
    // If the guess (char) is in the index of generated word and not -1 it will span back hopefully to all char
    public void guess(char guess) {
        guess = Character.toUpperCase(guess);
        if (generatedWord.indexOf(lastInput) != -1) {
            text.setSpan(new ForegroundColorSpan(Color.BLACK), text.charAt(lastInput), text.charAt(lastInput), 0);
            //guessedChars.add(guess);   
        } else {
            showImages();
        }
    }

    private void showImages() {

        count ++;

        if (count == 1) 
        {
            imageOne.setVisibility(View.INVISIBLE);
        }
        else if (count == 2)
        {
            imageTwo.setVisibility(View.INVISIBLE);
        }
        else if (count == 3) 
        {
            imageThree.setVisibility(View.INVISIBLE);
        }
        else if (count == 4)
        {
            imageFour.setVisibility(View.INVISIBLE);
        }
        else if (count == 5) 
        {
            imageFive.setVisibility(View.INVISIBLE);
        }
        else if (count == 6)
        {
            imageSix.setVisibility(View.INVISIBLE);
        }
        else if (count == 7) 
        {
            imageSeven.setVisibility(View.INVISIBLE);
        }
        else if (count == 8)
        {
            gameEnd();
        }

    }

    private void gameEnd() {
        if (count == 8)
        {
            hanged.setVisibility(View.VISIBLE);
        }
        else
        {
            winner.setVisibility(View.VISIBLE);
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_hang_man, menu);
        return true;
    }
} 
```

// 数据库适配器

```
 package database;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBAdapter 
{
    public static final String KEY_ROWID = "_id";
    public static final String KEY_WORDS = "words";  
    private static final String TAG = "DBAdapter";

    private static final String DATABASE_NAME = "dbnames";
    private static final String DATABASE_TABLE = "tblnames";
    private static final int DATABASE_VERSION = 1;

    private static final String DATABASE_CREATE =
        "create table tblnames (_id integer primary key autoincrement, "
        + "words text not null);";

    private final Context context; 

    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public DBAdapter(Context ctx) 
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper 
    {
        DatabaseHelper(Context context) 
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) 
        {
            db.execSQL(DATABASE_CREATE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, 
        int newVersion) 
        {
            Log.w(TAG, "Upgrading database from version " + oldVersion 
                    + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS tblnames");
            onCreate(db);
        }
    }    

    // Open DB
    public DBAdapter open() throws SQLException 
    {
        db = DBHelper.getWritableDatabase();
        return this;
    }

    // Close DB  
    public void close() 
    {
        DBHelper.close();
    }

    // INsert name
    public long insertWord(String word) 
    {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_WORDS, word);
        return db.insert(DATABASE_TABLE, null, initialValues);
    }

    // Delete a name
    public boolean deleteWord(long rowId) 
    {
        return db.delete(DATABASE_TABLE, KEY_ROWID + 
                "=" + rowId, null) > 0;
    }

    // Get all names
    public Cursor getAllWords() 
    {
        return db.query(DATABASE_TABLE, new String[] {
                KEY_ROWID, 
                KEY_WORDS}, 
                null, 
                null, 
                null, 
                null, 
                null);
    }

    // Get a certain name
    public Cursor getWord(long rowId) throws SQLException 
    {
        Cursor mCursor =
                db.query(true, DATABASE_TABLE, new String[] {
                        KEY_ROWID,
                        KEY_WORDS}, 
                        KEY_ROWID + "=" + rowId, 
                        null,
                        null, 
                        null, 
                        null, 
                        null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    // Update name
    public boolean updateWord(long rowId, String word) 
    {
        ContentValues args = new ContentValues();
        args.put(KEY_WORDS, word);

        return db.update(DATABASE_TABLE, args, 
                         KEY_ROWID + "=" + rowId, null) > 0;
    }

    // Clears DB
    public void clear() {

        db.delete(DATABASE_TABLE, "1", null);

    }

    public void randomize(String word) {
        @SuppressWarnings("unused")
        Cursor cursor;
        cursor =  this.db.query("tblnames ORDER BY RANDOM() LIMIT 1", new String[] { "*" }, null, null, null, null, null);
    }
} 
```

// 布局

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:src="@drawable/one"
        android:contentDescription="@string/picOne" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:src="@drawable/two" 
        android:contentDescription="@string/picTwo" />

    <ImageView
        android:id="@+id/imageView3"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:contentDescription="@string/picThree"
        android:src="@drawable/three" />

    <ImageView
        android:id="@+id/imageView4"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:src="@drawable/four" 
        android:contentDescription="@string/picFour" />

    <ImageView
        android:id="@+id/imageView5"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:src="@drawable/five"
        android:contentDescription="@string/picFive" />

    <ImageView
        android:id="@+id/imageView6"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:src="@drawable/six"
        android:contentDescription="@string/picSix" />

    <ImageView
        android:id="@+id/imageView7"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:src="@drawable/seven"
        android:contentDescription="@string/picSeven" />

    <ImageView
        android:id="@+id/imageView8"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:src="@drawable/eight"
        android:contentDescription="@string/picEight" />

    <EditText
        android:id="@+id/wordHolder"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:ems="10"
        android:inputType="text" >
        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/enter"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/imageView1"
        android:layout_below="@+id/wordHolder"
        android:layout_marginTop="28dp"
        android:text="@string/enter" />

    <EditText
        android:id="@+id/userInput"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/enter"
        android:layout_alignLeft="@+id/wordHolder"
        android:layout_alignTop="@+id/enter"
        android:layout_toLeftOf="@+id/enter"
        android:ems="10"
        android:inputType="text" />

    <ImageView
        android:id="@+id/winner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/imageView1"
        android:layout_centerHorizontal="true"
        android:src="@drawable/winner"
        android:contentDescription="@string/winner" />

    <ImageView
        android:id="@+id/hanged"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/imageView1"
        android:layout_centerHorizontal="true"
        android:src="@drawable/hanged"
        android:contentDescription="@string/hanged" />

    <Button
        android:id="@+id/newGame"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/enter"
        android:layout_alignBottom="@+id/enter"
        android:layout_toRightOf="@+id/enter"
        android:text="@string/newGame" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:08:08.123

解决方案：再次检查猜测是否显示正确的字母猜测，从 _ 到适当的字母。

// MainActivity.java

```
 package com.emanuelolsson.simplehangman;

import database.DBAdapter;
import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

public class HangMan extends Activity {

    // DECLARE NEEDED VARIABLES  
    private Button newGameButton, enterLetterButton;
    private EditText userInput;
    private TextView wordHolder;
    private ImageView imageOne, imageTwo, imageThree, imageFour, imageFive, imageSix, imageSeven, imageEight, winner, hanged;
    private String hiddenWord, randomedWord;
    private int count = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_hang_man);
        DBAdapter db = new DBAdapter(this);

        // ASSIGN OBJECTS
        newGameButton = (Button) findViewById(R.id.newGame);
        enterLetterButton = (Button) findViewById(R.id.enter);
        wordHolder = (TextView) findViewById(R.id.wordHolder);
        userInput = (EditText) findViewById(R.id.userInput);
        imageOne = (ImageView) findViewById(R.id.imageView1);
        imageTwo = (ImageView) findViewById(R.id.imageView2);
        imageThree = (ImageView) findViewById(R.id.imageView3);
        imageFour = (ImageView) findViewById(R.id.imageView4);
        imageFive = (ImageView) findViewById(R.id.imageView5);
        imageSix = (ImageView) findViewById(R.id.imageView6);
        imageSeven = (ImageView) findViewById(R.id.imageView7);
        imageEight = (ImageView) findViewById(R.id.imageView8);
        winner = (ImageView) findViewById(R.id.winner);
        hanged = (ImageView) findViewById(R.id.hanged);
        imageOne.setVisibility(View.INVISIBLE);
        imageTwo.setVisibility(View.INVISIBLE);
        imageThree.setVisibility(View.INVISIBLE);
        imageFour.setVisibility(View.INVISIBLE);
        imageFive.setVisibility(View.INVISIBLE);
        imageSix.setVisibility(View.INVISIBLE);
        imageSeven.setVisibility(View.INVISIBLE);
        imageEight.setVisibility(View.INVISIBLE);
        winner.setVisibility(View.INVISIBLE);
        hanged.setVisibility(View.INVISIBLE);
        wordHolder.setVisibility(View.VISIBLE);

        // ADD LISTENERS
        newGameButton.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0) {

                newGame();

            }
        });

        enterLetterButton.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0) {

                if (!(userInput.getText().toString().isEmpty()) )
                {
                    guess();
                } else if (userInput.getText().toString().isEmpty())
                {
                    Toast toast = Toast.makeText(getApplicationContext(), "You need to insert a letter", Toast.LENGTH_SHORT);
                    toast.show();
                }
            }
        });
        db.open();
        db.fill();
        randomedWord = db.randomize();
        invWord();
        wordHolder.setText(hiddenWord);
        db.clear();
        db.close();
    }

    public void newGame() {
        DBAdapter db = new DBAdapter(this);
        count = 0;
        imageOne.setVisibility(View.INVISIBLE);
        imageTwo.setVisibility(View.INVISIBLE);
        imageThree.setVisibility(View.INVISIBLE);
        imageFour.setVisibility(View.INVISIBLE);
        imageFive.setVisibility(View.INVISIBLE);
        imageSix.setVisibility(View.INVISIBLE);
        imageSeven.setVisibility(View.INVISIBLE);
        imageEight.setVisibility(View.INVISIBLE);
        winner.setVisibility(View.INVISIBLE);
        hanged.setVisibility(View.INVISIBLE);

        db.open();
        db.fill();
        randomedWord = db.randomize();
        invWord();
        wordHolder.setText(hiddenWord);
        db.clear();
        db.close();
    }

    public void invWord() 
    {
        hiddenWord = randomedWord;
        hiddenWord = hiddenWord.replaceAll(".", "_" +" ");
    }

    public void guess()
    {
        char guess = userInput.getText().charAt(0);
        StringBuilder builder = new StringBuilder(hiddenWord);
        String j = ""+guess;
        int index = randomedWord.indexOf(guess);

        if (randomedWord.contains(j))
        {
            while (index >= 0) 
            {
                builder.setCharAt(index*2, guess);
                index = randomedWord.indexOf(guess, index + 1);
                hiddenWord = builder.toString().trim();
                wordHolder.setText(hiddenWord);
                if (!(hiddenWord.toString().contains("_".toString())) )
                {
                    winner();
                }
            }   
        }
        else 
        {
            showImages();
        }
    }

    private void winner()
    {
        imageOne.setVisibility(View.INVISIBLE);
        imageTwo.setVisibility(View.INVISIBLE);
        imageThree.setVisibility(View.INVISIBLE);
        imageFour.setVisibility(View.INVISIBLE);
        imageFive.setVisibility(View.INVISIBLE);
        imageSix.setVisibility(View.INVISIBLE);
        imageSeven.setVisibility(View.INVISIBLE);
        imageEight.setVisibility(View.INVISIBLE);
        winner.setVisibility(View.VISIBLE);
    }
    private void showImages() {

        count ++;

        if (count == 1) 
        {
            imageOne.setVisibility(View.VISIBLE);
        }
        else if (count == 2)
        {
            imageTwo.setVisibility(View.VISIBLE);
        }
        else if (count == 3) 
        {
            imageThree.setVisibility(View.VISIBLE);
        }
        else if (count == 4)
        {
            imageFour.setVisibility(View.VISIBLE);
        }
        else if (count == 5) 
        {
            imageFive.setVisibility(View.VISIBLE);
        }
        else if (count == 6)
        {
            imageSix.setVisibility(View.VISIBLE);
        }
        else if (count == 7) 
        {
            imageSeven.setVisibility(View.VISIBLE);
        }
        else if (count == 8)
        {   
            gameEnd();
        }

    }

    private void gameEnd() 
    {

        imageOne.setVisibility(View.INVISIBLE);
        imageTwo.setVisibility(View.INVISIBLE);
        imageThree.setVisibility(View.INVISIBLE);
        imageFour.setVisibility(View.INVISIBLE);
        imageFive.setVisibility(View.INVISIBLE);
        imageSix.setVisibility(View.INVISIBLE);
        imageSeven.setVisibility(View.INVISIBLE);
        imageEight.setVisibility(View.VISIBLE);
        hanged.setVisibility(View.VISIBLE);
        wordHolder.setText(randomedWord);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_hang_man, menu);
        return true;
    }
} 
```

// XML

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:contentDescription="@string/picOne"
        android:src="@drawable/one" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:contentDescription="@string/picTwo"
        android:src="@drawable/two" />

    <ImageView
        android:id="@+id/imageView3"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:contentDescription="@string/picThree"
        android:src="@drawable/three" />

    <ImageView
        android:id="@+id/imageView4"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:contentDescription="@string/picFour"
        android:src="@drawable/four" />

    <ImageView
        android:id="@+id/imageView5"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:contentDescription="@string/picFive"
        android:src="@drawable/five" />

    <ImageView
        android:id="@+id/imageView6"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:contentDescription="@string/picSix"
        android:src="@drawable/six" />

    <ImageView
        android:id="@+id/imageView7"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:contentDescription="@string/picSeven"
        android:src="@drawable/seven" />

    <ImageView
        android:id="@+id/imageView8"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="43dp"
        android:contentDescription="@string/picEight"
        android:src="@drawable/eight" />

    <ImageView
        android:id="@+id/winner"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignTop="@+id/imageView1"
        android:layout_centerHorizontal="true"
        android:contentDescription="@string/winner"
        android:src="@drawable/winner" />

    <ImageView
        android:id="@+id/hanged"
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_alignTop="@+id/imageView1"
        android:layout_centerHorizontal="true"
        android:contentDescription="@string/hanged"
        android:src="@drawable/hanged" />

    <TextView
        android:id="@+id/wordHolder"
        android:layout_width="175dp"
        android:layout_height="40dp"
        android:layout_centerInParent="true"
        android:layout_alignTop="@+id/imageView1"
        android:layout_marginTop="134dp"
        android:layout_marginLeft="50dp"
        android:ems="10"
        android:textSize="30dp" />

    <Button
        android:id="@+id/newGame"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/wordHolder"
        android:layout_centerVertical="true"
        android:text="@string/newGame" />

    <Button
        android:id="@+id/enter"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/newGame"
        android:layout_alignBottom="@+id/newGame"
        android:layout_toLeftOf="@+id/newGame"
        android:text="@string/enter" />

    <EditText
        android:id="@+id/userInput"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_alignBaseline="@+id/enter"
        android:layout_alignBottom="@+id/enter"
        android:layout_toLeftOf="@+id/enter"
        android:ems="10"
        android:inputType="text"
        android:textSize="20dp" >

        <requestFocus />
    </EditText>

    <ImageView
        android:id="@+id/imageView9"
        android:layout_width="250dp"
        android:layout_height="60dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:contentDescription="@+id/header"
        android:src="@drawable/header" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T16:12:59.287

为什么不这样做呢？

```
String wordToGuess = "ANDROID";
Set<Character> guessedChars = new HashSet<Character>();

// call this with the user-input
//
public void guess(char guess) {
    guess = Character.toUpperCase(guess);
    if (wordToGuess.indexOf(guess) != -1) {
        guessedChars.add(guess);
    }
}

// call this afterwards to get string with chars guessed so far and dots for not-yet-guessed characters
//
public String guessedSoFar() {
    String result = "";
    for (char ch: wordToGuess.toCharArray()) {
        if (guessedChars.contains(ch)) {
            result += ch;
        } else {
            result += ".";   // . for not yet guessed words
        }
    }
    return result;
} 
```

# algorithm - PAQ 压缩

> ID：12544968
> 
> 赞同：0
> 
> 时间：2012-09-22T15:09:58.053
> 
> 标签：algorithm, compression

我一直在努力完全理解 PAQ 算法。维基百科似乎足够复杂。尽管我目前正在学习神经网络和人工智能课程，但仍有一些术语和断言难以理解，尤其是算法的[算术编码](http://en.wikipedia.org/wiki/PAQ#Arithmetic_coding)部分。

我可以找到[另一个链接](http://cs.fit.edu/~mmahoney/compression/paq.html)，但其中包含 PAQ 的版本及其各自的基准。

有人可以推荐一个很好的页面（文本，视频，音频，任何东西都可以！），它提供了一个清晰的解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:49:31.363

上下文混合和部分预测匹配的一个简单解释是当您使用特定模型进行压缩时。例如，某些字母的概率高于其他字母，并且也与其他语言共享。不同的模型导致熵压缩更好地压缩。paq 压缩使用它来选择最佳可用模型和压缩。当您在理解算术压缩方面遇到问题时，请查找范围压缩，基本上是相同的，但更容易理解：[http](http://en.m.wikipedia.org/wiki/Range_encoding#section_1) ://en.m.wikipedia.org/wiki/Range_encoding#section_1 。

# java - 获取来自 JSONP 请求的域名以确保安全

> ID：12544971
> 
> 赞同：1
> 
> 时间：2012-09-22T15:10:19.630
> 
> 标签：java, javascript, ajax, jsonp, xss

我想让我的应用程序的用户能够在他们的网站上放置一些代码，并通过 jsonp 请求与我的服务器进行最少的交互。但是，我只希望远程请求能够来自我特别允许的远程站点。基本上，用户必须拥有我的应用程序的帐户。

为了安全起见，我的计划是：

1.  在允许将代码放置在站点上之前，要存储请求将来自的域。
2.  当服务器接收到远程请求时，它会从请求中获取域名并将其与数据库进行匹配。
3.  如果域匹配，则验证请求并返回数据等。如果它不同，我将假设它是某种 XSS 攻击并拒绝请求，向远程返回错误。

如何获取请求来自的域？为了在我的开发盒上进行测试，我设置了一个在不同端口上运行的单独静态网站

```
Server domain: localhost:8090
Remote domain: localhost:8095 
```

使用 getRemoteHost 似乎返回 127.0.0.1。在现实世界的情况下，这是否是远程域的 ip，然后是否有可能从该 ip 中找到人类可读的域名版本？存储和匹配 ip 可能不是一个好主意，因为我不知道尝试连接到我的服务的远程站点是否是从动态 ip 提供的......

也许我在这里采取了错误的方法，所以如果我错了，请纠正我。无法向远程站点的用户请求用户名和密码，因为他们没有实际帐户。

也许更好的方法是将某种加密令牌存储在数据库中而不是域中，当我向用户提供代码片段以放置在他们的站点上时，它可能包含一个隐藏的输入，其中包含此加密版本每个请求都传递的令牌？但是，在这种情况下，是否任何人都无法通过查看页面源来复制隐藏元素并具有对服务器的相同访问权限？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T16:07:00.040

一方面，您说“我只希望远程请求能够来自我特别允许的远程站点”，但使用 JSONP 意味着您不会看到来自远程站点的请求——您将看到请求来自访问远程站点的浏览器。这种区别很微妙但很重要，因为它严重限制了您的选择。

如果您想知道哪个站点发起了 JSONP 请求，可以查看 Referer 标头。除了......你不能依赖它被设置，尤其是在 HTTP/HTTPS 转换中。然后您可能会想“嘿，我将使用[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) ”，但是当然，任何人都可以使用他们想要的任何标头创建请求。我可以编写一个声称是您的远程站点之一的 HTTP 客户端，并使用它们的凭据访问您的界面——因此，如果标头是您限制访问的唯一方法，请知道它很容易被击败。

Referer 标头上方的下一步是颁发令牌并使用这些令牌进行识别。但是，正如您所指出的，远程站点必须将其提供给浏览器，以便浏览器创建请求。因此，有人可以复制它并在任何地方使用它。回到同一个问题。

您可以做的下一件事是发布令牌（用于识别）以及共享秘密（用于授权）。然后，您可以要求远程站点使用共享密钥对请求进行签名——说“是的，实际上是我，远程站点”。这样，远程站点给用户的浏览器*签名*，而不是秘密本身。您需要确保您签署的内容足以验证远程站点的意图（即站点希望用户浏览器执行的任何操作），并且它应该包含一个时间戳以防止重放攻击。这需要来自远程站点的一些服务器端计算，但会阻止用户采取任何操作，除非远程站点明确允许。

但是...您提到这些远程站点上的用户将没有帐户。如果这意味着它们可供公众使用，那么任何人都可以获取这些远程站点之一，提取签名，然后自己使用它来执行远程站点用户可以执行的相同操作。这不是实现的问题，而是架构的问题：您的设计要求随机的 Web 浏览器与您的服务交互，根本没有办法阻止[man-in-the-middle](http://en.wikipedia.org/wiki/Man-in-the-middle_attack)。使用共享密钥可以让您在一定程度上进行控制，但您无法阻止它。

在这一点上，我建议您退后一步，考虑一下您实际上要解决的问题。这个界面有什么作用？这些远程站点上的浏览器是否需要直接与您交互？你想阻止谁，为什么？如果他们绕过你的检查会发生什么？

# browser - All.js 从 21/9/2012 开始突然出现错误，它工作了两年

> ID：12544972
> 
> 赞同：1
> 
> 时间：2012-09-22T15:10:26.370
> 
> 标签：browser, facebook-javascript-sdk

Chrome 工作，IE 不工作，Safari 和 Firefox 有时刷新后工作。此错误会阻止我网站上的所有 javascript 工作！我的网站现在被 facebook javascript sdk 瘫痪了。它只是从昨天开始的，过去 2 年在我的高流量生产站点中运行良好。

在 IE、Safari 中：SCRIPT5022：错误 all.js，第 43 行字符 128

这是

__d("Assert",["AssertionError","sprintf"],function(a,b,c,d,e,f){var g=b('AssertionError'),h=b('sprintf');函数 i(p,q){if(!p)throw new g(q);return p;}function j(p,q,r){var s=Object.prototype.toString.call(q),t= /\s(\w*)/.exec(s)[1].toLowerCase();i(~ES5(p,'indexOf',true,t),r||h('表达式是%s类型, not %s',t,p));return q;}function k(p,q,r){i(q instanceof p,r||'Expression not instance of type');return q;}var l ={isInstanceOf:k,isTrue:i,type:j,define:function(p,q){l.isString(p);l.isFunction(q);p=p.substring(0,1).toUpperCase( )+p.substring(1).toLowerCase();l['is'+p]=function(r,s){i(q(r),s);};}},m=['Array' ,'Boolean','Date','Function','Null','Number','Object','Regexp','String','Undefined'],n=m。长度;while(n--){var o=m[n];l['is'+o]=ES5(j,'bind',true,null,o.toLowerCase());}e.exports= l;});

使用 IE 的调试功能，错误似乎来自：这段代码：

抛出新的 g(q)

由于 facebook 只需将其压缩并直接从 facebook 下载。我无法调试或更改它。请告知我可以收集哪些信息让您了解更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:47:48.070

我在使用 Drupal for Facebook 的 Drupal 站点上遇到了这个问题，我的解决方法是在 fb.js 的第 38 行放置`try{}catch(e){}`一个`FB.XFBML.parse(elem);`。问题似乎源于`elem`不是 HTMLDocument 类型，但你不能检查这个，因为 IE9 没有这种类型。

如果您不使用 Drupal，请查找对 FB.XFBML.parse 的函数调用。

# java - Jtable 没有在带有 NetBeans 的 JDialog 中滚动

> ID：12544973
> 
> 赞同：1
> 
> 时间：2012-09-22T15:10:32.773
> 
> 标签：java, swing, netbeans, jtable

我在 JDialog 中使用 jTable，当我需要使用滚动条时，它会拖动 JDialgo 而不是行。我正在使用 NetBeans 表单设计。

PD 当然，任何 JTable 都在 JScrollPane 中。

![拖动滚动窗格之前的窗口](../Images/5261e01872c5d779b6af392e701e3a70.png)

![拖动后](../Images/f357bbae273abcc1f21694dfe736f0c8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T15:49:18.127

已编辑：在 Mac OS X 上，这是您指定时的一项功能`setUndecorated(true)`，如本[示例](https://stackoverflow.com/a/2166500/230513)所示。改为使用`setUndecorated(false)`。只要您使用布局管理器和`pack()`对话框，就`JTable`应该采用合理的大小。如果需要，您可以使用[此处](https://stackoverflow.com/a/10809454/230513)`setPreferredScrollableViewportSize()`提到的 。另请参阅这些[警告](https://stackoverflow.com/q/7229226/230513)。

# jquery - 创建 jQuery 插件，然后使用它的上下文

> ID：12544975
> 
> 赞同：1
> 
> 时间：2012-09-22T15:10:49.953
> 
> 标签：jquery, jquery-plugins

例如，我想创建 Slider。

```
jQuery.fn.Slider = function(){ 
    var reset = function(){};
    var setValue = function(){};
}; 
```

比使用它

`var slider = $('#slider').Slider();`

但我需要稍后使用它，例如。`slider.reset(); slider.setValue(50);...`

但我无法返回对象上下文`fn.Slider`，我认为还有另一种方法可以解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T15:15:45.347

您需要将方法附加到对象，而不是将它们声明为私有作用域变量。

```
jQuery.fn.Slider = function(){ 
    this.reset = function(){};
    this.setValue = function(){};
}; 
```

# ajax - javascript/html/php：是否可以使用 Ajax 将值插入到表单中？

> ID：12544979
> 
> 赞同：0
> 
> 时间：2012-09-22T15:11:37.540
> 
> 标签：ajax, forms

我有一个表单，用户可以在其中手动输入一些文本。然后我想让用户通过 AJAX 从数据库中选择一个标签，这与标签建议在 SO 问题表单中的显示方式不同。虽然 ajax 调用放置标签的 div 位于表单内，但它似乎没有注册，并且表单没有拾取标签。我是否在我的代码中遗漏了一些东西，这是不可能的，或者，如果不可能，有更好的方法来做到这一点？感谢您的任何建议。

这是代码：

html

```
<form method="post" action="enterdata.php">
<input type="text" name="text">Enter text here.
<div id="inserttags"></div><a href="javascript:void(0);" onclick="getTags()";>Get tags</a>
<form type="button" name="submit" value="Enter Text and Tag">
</form> 
```

javascript

```
getTags() { 
various Ajax goes here, then
//following line inserts value into div of html
    document.getElementById("inserttags").innerHTML=xmlhttp.responseText;
// a bit more ajax, then following pulls tag from db 
xmlhttp.open("GET","findtags.php",true);
xmlhttp.send();
} //end function 
```

php

```
//gettags.php
//first pull tag from db.  Then:
echo 'input type="text" name="tag" value= "html">Enter tag';
//above output gets inserted in div and is visible on page. 
```

虽然上面的输出在页面上可见，但当您单击“输入文本和标签”提交表单时，表单似乎没有拾取它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:16:15.397

输入标签看起来不完整。试试`<input type="text" name="tag" value= "html" />Enter tag`。此外，单击事件附加到链接标记`Get tags`，因此您需要单击该链接以进行 ajax 函数调用。

编辑：

```
 $('#inserttags').append(xmlhttp.responseText)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T23:55:28.157

经过更多的研究和深思熟虑，我不认为你可以做我想做的事......使用原生 html 表单来捕获 javascript 输出，即使表单内有 div。相反，执行此操作的方法是使用 javascript 捕获文本字段，然后将其放置在 ajax 内的表单中，作为隐藏值与标签一起输出到浏览器。然后用户提交带有文本和标签的表单，而不是使用原始 html，而是使用 ajax 输出中的按钮或链接。如果有人知道更好的方法，我会更正，但这种方法会起作用，并且 html 表单似乎无法识别 javascript 插入的 div 中的值。

# php - if in_array 在 php 和 xml

> ID：12544985
> 
> 赞同：1
> 
> 时间：2012-09-22T15:12:18.870
> 
> 标签：php, xml, arrays

我有一个包含 500 多个项目的长 xml 数据文件，它采用以下形式：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<CATALOG>
<ITEM>
    <TITLE>ITEM name</TITLE>
    <TYPE>"T1", "T2", "T3" </TYPE>
    <DESCIPTION>DESCIPTIONiliate Page CPM</DESCIPTION>
    <PRICE>PRICE</PRICE>
    <ITEM>http://mysite.com/item-link</ITEM>
</ITEM>
</CATALOG> 
```

我在 php 页面中使用以下代码从 xml 文件中导入数据：

```
<?php
$ITEMSS = new SimpleXMLElement('ITEMS.xml', null, true);

echo <<<EOF
<table width="100%" align="center" border="1" bordercolor="#0099ff" cellpadding="1" cellspacing="0">

    <tr>
            <th bgcolor="#66ccff"><span class="style4">ITEM Name</span></th>
            <th bgcolor="#66ccff"><span class="style4">item TYPE </span></th>
            <th bgcolor="#66ccff"><span class="style4">item DESCIPTION </span></th>
            <th bgcolor="#66ccff"><span class="style4">item PRICE</span></th>
            <th bgcolor="#66ccff"><span class="style4">link to item</span></th>
    </tr>

EOF;
foreach($ITEMSS as $ITEMS) // loop through our DATAS
{
    echo <<<EOF
    <tr height="30" align=middle>
            <td><a href="{$ITEMS->ITEM}" target="_blank"><span class="STYLE7">{$ITEMS->TITLE}</span></a></td>
            <td><span class="STYLE8">{$ITEMS->TYPE}</span></td>
            <td><span class="STYLE8">{$ITEMS->DESCIPTION}</span></td>
            <td><span class="STYLE8">{$ITEMS->PRICE}</span></td>
            <td><a href="{$ITEMS->ITEM}" target="_blank"><B><span class="STYLE7">cHECK IT OUT</span></B></a></td>
    </tr>

EOF;
}
echo '</table>';
?> 
```

在 TYPE 我有不同的值，如：

```
 <TYPE>"T1", "T2", "T3" </TYPE>
    <TYPE>"T1", "T4", "T6" </TYPE>
    <TYPE>"T1", "T8", "T1" </TYPE> 
```

每个项目可能有不同的 TYPE 值

如果值在 TYPE 数组中，我需要在循环中添加一个“if”语句以仅选择一些数据，例如：

```
foreach($ITEMSS as $ITEMS) // loop through our DATAS
{
$options = array($ITEMS->TYPE);

if (in_array("T1", $options))

   { echo <<<EOF
    <tr height="30" align=middle>
            <td><a href="{$ITEMS->ITEM}" target="_blank"><span class="STYLE7">{$ITEMS->TITLE}</span></a></td>
            <td><span class="STYLE8">{$ITEMS->TYPE}</span></td>
            <td><span class="STYLE8">{$ITEMS->DESCIPTION}</span></td>
            <td><span class="STYLE8">{$ITEMS->PRICE}</span></td>
            <td><a href="{$ITEMS->ITEM}" target="_blank"><B><span class="STYLE7">cHECK IT OUT</span></B></a></td>
    </tr>

EOF;
}

} 
```

但即使我要查找的值在数组中，它什么也没有显示！

那么在这种情况下如何在数组语句中使用 if 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:44:12.917

问题来自您准备 $options 变量，尝试像这样启动它；

PHP >= 5.3

```
$options = array_map(function($type) {
    return str_replace('"', '', trim($type));
}, explode(',', $ITEMS->TYPE)); 
```

PHP < 5.3（将函数置于循环之外：D）

```
function parseTypes($type) {
    return str_replace('"', '', trim($type));
}

$options = array_map(parseTypes, explode(',', $ITEMS->TYPE)); 
```

这应该将类型分解为一个数组，删除引号并修剪多余的空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T16:47:47.257

无需在循环中放置`if`子句，您只需将另一个列表传递给，该列表仅包含您要查找的元素。像魔术一样工作，实际上这被称为*xpath*：`foreach``foreach`

 *```
$value = 'T1';
$list  = $ITEMSS->xpath('/CATALOG/ITEM[contains(TYPE, \'"' . $value . '"\')]');
foreach($list as $ITEMS)
{
    ... 
```

就是这样。这是可行的，因为您可能要查找的每个值都用双引号括起来`"`，这是一个常见的原则。

顺便说一句，我认为您的代码将从简单的模板引擎中受益匪浅，例如[Mustache](http://mustache.github.com/)。它也适用于迭代器（您使用 迭代的值列表`foreach`）。*

# c - 在没有外部 DLL 的情况下使用 C 中的 PGP 公钥加密字符串？

> ID：12544986
> 
> 赞同：0
> 
> 时间：2012-09-22T15:12:28.620
> 
> 标签：c, visual-studio-2010, encryption, pgp

我看到了大量关于 C++ 和 C# 的示例，但 C 没有运气。我正在尝试在不引用外部 DLL 的情况下对字符串进行简单加密。我开始尝试 cryptlib（只是在转到 PGP 之前进行基本加密）并使用以下 .c 文件：

```
#include "include/cryptlib/cryptlib.h"

void PGPEncrypt(char* input, char* output) {
    CRYPT_ENVELOPE cryptEnvelope;
    int bytesCopied;

    cryptCreateEnvelope(&cryptEnvelope, CRYPT_UNUSED, CRYPT_FORMAT_CRYPTLIB);

    // Below line makes things more efficient if you know the data size
    cryptSetAttribute(cryptEnvelope, CRYPT_ENVINFO_DATASIZE, strlen(input));

    // Push unencrypted, pop encrypted. 4000 is the size of output
    cryptPushData(cryptEnvelope, input, strlen(input), &bytesCopied);
    cryptFlushData(cryptEnvelope);
    cryptPopData(cryptEnvelope, output, 4000, &bytesCopied);

    cryptDestroyEnvelope(cryptEnvelope);
} 
```

然而，在编译这个工作时，我在运行应用程序时意识到 cl32.lib 只是一个头库，需要在系统上安装 cl32.dll 文件。我还没有弄清楚如何创建一个静态 cl32.lib 文件，我可以将其包含在不需要 DLL 的项目中。那会起作用，或者其他非 cryptlib 解决方案。

我也看过 Crypto++，但不幸的是，可下载的 chm 用户指南已损坏，而且该手册太详细了，我无法在没有某种指南的情况下遵循。

我应该指出，虽然我对整个 C 相当熟悉，但我的大部分经验都是旧的并且在 Linux 中，而不是使用我现在正在做的 Visual Studio 2010。

谢谢，本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:26:47.590

如果您只想删除依赖项，则可以通过静态编译程序来包含外部依赖项。

如果您担心 windows 系统上缺少 DLL，您可以使用 windows 加密 API，它存在于所有 windows 系统上。

[密码学参考](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380256%28v=vs.85%29.aspx)

[示例 C 程序：使用 CryptAcquireContext](http://msdn.microsoft.com/en-us/library/windows/desktop/aa382375%28v=vs.85%29.aspx)

如果您不想要这些，您仍然可以实现自己的加密库。但我不建议这样做，因为它充满了潜在的陷阱，即使你是加密专家。

# c# - 如何尽可能简单地使用 Linq 从字典中选择多个值

> ID：12544987
> 
> 赞同：38
> 
> 时间：2012-09-22T15:12:28.423
> 
> 标签：c#, linq, dictionary

我需要根据键的子集从字典中选择多个值（到列表中）。

我正在尝试使用 Linq 在一行代码中执行此操作，但到目前为止我发现的内容似乎很长而且很笨拙。最短（最干净）的方法是什么？

这就是我现在拥有的（键是字符串，keysToSelect 是要选择的键列表）：

```
List<ValueType> selectedValues = dictionary1.Where(x => keysToSelect.Contains(x.Key))
                                            .ToDictionary<String, valueType>(x => x.Key,
                                                                             x => x.Value)
                                            .Values.ToList; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-09-22T15:16:01.520

那么你可以从列表而不是字典开始：

```
var selectedValues = keysToSelect.Where(dictionary1.ContainsKey)
                     .Select(x => dictionary1[x])
                     .ToList(); 
```

如果保证所有键都在字典中，则可以省略第一个`Where`：

```
var selectedValues = keysToSelect.Select(x => dictionary1[x]).ToList(); 
```

请注意，此解决方案比迭代字典更快，特别是如果要选择的键列表与字典的大小相比较小，因为`Dictionary.ContainsKey`它比`List.Contains`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-22T15:15:43.750

A`Dictionary<TKey,TValue>`是`IEnumerable<KeyValuePair<TKey,TValue>>`，所以你可以简单`Select`的`Value`属性：

```
 List<ValueType> selectedValues = dictionary1
           .Where(x => keysToSelect.Contains(x.Key))
           .Select(x => x.Value)
           .ToList(); 
```

或者

```
 var selectValues = (from keyValuePair in dictionary1
                     where keysToSelect.Contains(keyValuePair.Key)
                     select keyValuePair.Value).ToList() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-22T15:22:10.863

如果您知道要选择的所有值都在字典中，则可以遍历键而不是遍历字典：

```
List<ValueType> selectedValues = keysToSelect.Select(k => dictionary1[k]).ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-13T00:22:02.457

从查找的角度来看，公认的解决方案仍然不是最有效的选择，因为您仍然必须检查键是否在字典中两次：一次用于过滤键，一次用于查找对象。

此解决方案没有该问题：

```
var selectedValues = keysToSelect
  .Select(_ => {
     var found = dict.TryGetValue(_, out TValue? result);
     return (found, result);
  })
  .Where(_ => _.found)
  .Select(_ => _.result!)
  .ToList(); 
```

# java - 从同一个包中打开一个文件

> ID：12544988
> 
> 赞同：3
> 
> 时间：2012-09-22T15:12:55.023
> 
> 标签：java

单击帮助按钮时，我想打开 help.chm 文件。目前，点击帮助按钮从桌面打开。我将文件复制并粘贴到我项目中的一个包中。有没有办法从这个包中打开这个文件？

这就是我从桌面打开文件所做的

```
private void helpActionPerformed(java.awt.event.ActionEvent evt)    
{                                            
    try
    {

         Runtime.getRuntime().exec("hh.exe C:/Users/toshiba/Desktop/help2.chm");
    }    
    catch (Exception ex)
    {
        ex.printStackTrace();
        System.out.println(ex.getMessage());
    }            
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T15:16:50.323

如果您的文件在 jar 包中，您可以通过以下方式获取 url：

```
URL resource = getClass().getResource("yourFile.chm");
System.out.println("URL to resource: " + resource ); 
```

或者您可以尝试以下方法：

```
//it return the relative path 

ResourcesLoader.class.getClassLoader().getResource("package1/resources/repository/yourFile.chm").toString(); // if file is inside package 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T15:18:27.687

使用[`getResourceAsStream(String name)`](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)or`getResources(String name)`并提供包名称和资源名称，并以“/”为前缀。

例如，如果资源在包 Test 中：

> /Test/help.chm：

在您想要访问资源的类中（`getResourceAsStream(String name)`）：

```
InputStream is=getClass().getResourceAsStream("/Test/help.chm"); 
```

或使用`getResources(String name)`：

```
URL file=getClass().getResource("/Test/help.chm"); 
```

如需进一步帮助，请查看[这个](http://docs.oracle.com/javase/1.5.0/docs/guide/lang/resources.html)很棒的教程。

# php - cakephp2 控制器变得太大

> ID：12544990
> 
> 赞同：0
> 
> 时间：2012-09-22T15:13:35.297
> 
> 标签：php, cakephp, cakephp-2.0

我有一个 cakephp2 应用程序，控制器变得非常大。是否有将代码分解为不应该是动作的其他功能的最佳实践？

*对不起，自从我用 cakephp1.0 做这件事以来已经很久了，当时我想我称它们为 _functionname，这几天似乎是错误的。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:49:12.840

如果您的控制器一直在不受控制地增长，那么它已经积累了域业务逻辑和/或表示逻辑。

解决方案是将域逻辑移回模型层。要么将该功能放在`AppModel`类中（这可能是有问题的，因为它使用 Active Record（反）模式），或者创建*更高阶的*结构，这些结构不会扩展`AppModel`，而是充当来自适当[模型层](https://stackoverflow.com/a/5864000/727208)实现的服务。

并且表示逻辑应该回到视图中（或者因为您使用的是 MVC 的 Rails 模仿 - 在[视图助手](http://book.cakephp.org/2.0/en/views/helpers.html)中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:11:06.493

使用以下链接作为参考，它将为您提供更好的服务。

[http://www.sanisoft.com/blog/2010/05/31/cakephp-fat-models-and-skinny-controllers/](http://www.sanisoft.com/blog/2010/05/31/cakephp-fat-models-and-skinny-controllers/)