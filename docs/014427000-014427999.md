# StackOverflow 问答 14427000-14427999

# android - 使用 ViewPager 设置操作栏标题

> ID：14427005
> 
> 赞同：2
> 
> 时间：2013-01-20T17:10:47.130
> 
> 标签：android, android-viewpager

我的应用程序有一个`ListView`启动。用户可以手动选择一个项目`ListView`以进入详细信息屏幕，也可以`ViewPager`在不同的详细信息屏幕之间滑动。`ViewPager's`片段设置如下：

```
清单
细节 1
细节 2
细节 3
细节 4
...

```

我的理解是，当加载清单片段时，`ViewPager`将执行 Detail 1 的代码，以提高性能。同样，当加载细节 1 时，细节 2 的代码将执行。

我遇到的问题是我在 中设置每个细节片段的标题`onActivityCreated`，但是，当列表片段被加载时，它显示细节 1 的标题。因此，我将代码移至`onPageSelected`的`ViewPager`，如果用户正在滑动，则该代码有效，但如果用户手动选择`ListView`标题中的项目，则永远不会设置。

我不确定是否有一个事件仅在用户手动选择项目时触发，`ListView`而不是在他们滑动时触发，或者我是否需要重新考虑我的应用程序的设置。例如，不要在列表片段的`onListItemClick`事件中使用此代码：

```
final Intent listing = new Intent(getActivity().getApplicationContext(), Details.class);
startActivity(listing); 
```

我需要以某种方式使用`ViewPager`.

```
mViewPager = (ViewPager)findViewById(R.id.viewpager);  
mMyFragmentPagerAdapter = new MyFragmentPagerAdapter(getSupportFragmentManager());  
mViewPager.setAdapter(mMyFragmentPagerAdapter);
mViewPager.setSaveEnabled(false);
mViewPager.setOnPageChangeListener(new OnPageChangeListener() {

    @Override
    public void onPageSelected(int position) {      
        String title = GetTitle(position);
        getSupportActionBar().setTitle(title);                  
    }

    @Override
    public void onPageScrolled(int position, float offset, int offsetPixel) {
    }

    @Override
    public void onPageScrollStateChanged(int state) {

    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T18:25:47.930

您可能希望覆盖类中的[`getPageTitle(int)`](http://developer.android.com/reference/android/support/v4/view/PagerAdapter.html#getPageTitle%28int%29)方法`MyFragmentPagerAdapter`。该文档指出：

> ViewPager 可以调用该方法来获取标题字符串来描述指定的页面。此方法可能返回 null，表示此页面没有标题。默认实现返回 null。

因此，不要返回`null`，而是要确保返回实际的页面标题。您获得了请求标题的页面的位置/索引，因此一个简单的 switch-case 语句就足够了。或者，您可以为您的页面设置一个界面并查询相关页面的标题。

# javascript - 用于检测“.com.com”的电子邮件验证的正则表达式

> ID：14427006
> 
> 赞同：1
> 
> 时间：2013-01-20T17:10:47.490
> 
> 标签：javascript, regex

> **可能重复：**
> [在 Javascript 中验证电子邮件地址？](https://stackoverflow.com/questions/46155/validate-email-address-in-javascript)

我在使用 Javascript 验证电子邮件地址客户端时遇到了一些麻烦。经过大量搜索，我找到了一个正则表达式，如下所示：-

```
/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$ 
```

它适用于我测试过的大多数电子邮件 ID。但是突然间我发现它也说带有`.com.com`类似扩展名的电子邮件，这对我来说是一个严重的错误。

我的问题是如何修改上述也将无效的正则表达式`.com.com`。

我还应该提到，我也尝试过许多其他正则表达式，但它们似乎都有同样提到的问题......

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:16:25.550

试试这个正则表达式：

```
function verifyEmail(){
var status = false;     
var emailRegEx = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;
     if (document.myform.email1.value.search(emailRegEx) == -1) {
          alert("Please enter a valid email address.");
     }
     else{
         status = true;
     }
     return status;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T17:56:25.127

这将使任何以 结尾的地址无效`.com.com`：

`/^([A-Za-z0-9_\-\.])+\@(?![A-Za-z0-9_\-\.]+\.com\.com)([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$`

这也将使那些以 结尾的无效`@com.com`：

`/^([A-Za-z0-9_\-\.])+\@(?!(?:[A-Za-z0-9_\-\.]+\.)?com\.com)([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$`

最后，这将使那些以*任何*重复结尾的文件无效，例如 .net.net、.au.au 等：

`/^([A-Za-z0-9_\-\.])+\@(?!(?:[A-Za-z0-9_\-\.]+\.)?([A-Za-z]{2,4})\.\2)([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T17:21:27.330

```
function emailCheck (emailStr) {
 var checkTLD=1;
   var knownDomsPat=/^(com|net|org|edu|int|mil|gov|arpa|biz|aero|name|coop|info|pro|museum)$/;
  var emailPat=/^(.+)@(.+)$/;
  var specialChars="\\(\\)><@,;:\\\\\\\"\\.\\[\\]";
  var validChars="\[^\\s" + specialChars + "\]";
  var quotedUser="(\"[^\"]*\")";
  var ipDomainPat=/^\[(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})\]$/;
  var atom=validChars + '+';

  var word="(" + atom + "|" + quotedUser + ")";
  var userPat=new RegExp("^" + word + "(\\." + word + ")*$");
  var domainPat=new RegExp("^" + atom + "(\\." + atom +")*$");
 var matchArray=emailStr.match(emailPat);
  if (matchArray==null) {
  alert("Email address seems incorrect (check @ and .'s)");
return false;
} 
```

我的ISP网站的官方邮箱查收方法。这没有版权。所以你可以使用它。

# ruby - 如何多次分叉，运行异步并一次处理所有结果？

> ID：14427011
> 
> 赞同：1
> 
> 时间：2013-01-20T17:11:25.017
> 
> 标签：ruby, process, fork

我有以下代码：

```
data_set = [1,2,3,4,5,6]

results  = []

data_set.each do |ds|
  puts "Before fork #{ds}"
  r,w = IO.pipe
  if pid = Process.fork
    w.close
    child_result = r.read
    results << child_result
  else
    puts "Child worker for #{ds}"
    sleep(ds * 5)
    r.close
    w.write(ds * 2)
    exit
  end
end

Process.waitall
puts "Ended everything #{results}" 
```

基本上，我希望每个孩子都做一些工作，然后将结果传递给父母。我的代码现在没有并行运行，我不知道我的问题到底出在哪里，可能是因为我正在读取父级，但我不确定。我需要做什么才能让它异步运行？

编辑：我将代码更改为此，它似乎工作正常。有什么我没有看到的问题吗？

```
data_set = [1,2,3,4,5,6]

child_pipes = []
results     = []

data_set.each do |ds|
  puts "Before fork #{ds}"
  r,w = IO.pipe
  if pid = Process.fork
    w.close
    child_pipes << r
  else
    puts "Child worker for #{ds}"
    sleep(ds * 5)
    r.close
    w.write(ds * 2)
    exit
  end
end

Process.waitall
puts child_pipes.map(&:read) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:41:29.240

如果子节点的输出大于管道容量，则子节点可能会[阻止将管道写入父节点。](http://linux.die.net/man/7/pipe)理想情况下，父级将在子管道上执行选择循环或生成从子管道读取的线程，以便在数据可用时消耗数据，以防止子管道在满管道上停滞和失败。在实践中，如果子输出很小，只需执行`waitall`and read 即可。

其他人已经以可重用的方式解决了这些问题，您可以尝试[并行 gem](https://github.com/grosser/parallel)以避免编写一堆不必要的代码。

# php - 以我自己的方式制作 joomla 扩展

> ID：14427022
> 
> 赞同：2
> 
> 时间：2013-01-20T17:12:10.590
> 
> 标签：php, joomla, joomla2.5, joomla-extensions

我试图了解 joomla 的结构。我已经阅读了许多关于如何在 joomla 中进行扩展的文档和教程。我无法完全理解它。我对此还是有些疑惑。我通过使用`MVC`概念和使用一些 joomla 核心文件在 joomla 中制作了一个简单的组件。我不会说它和专业人士制作的一样。我已经使用了*30%*的 joomla 喜欢使用`MVC`概念，扩展joomla的核心文件并使用joomla语法和其他一些方式与数据库连接。其余的百分比，我通过使用 oops 概念使用了我自己的代码。所以你认为做这样的扩展是否足够好，或者我必须做这样的扩展，或者我真的必须学习和理解官方的 joomla 扩展方式。我想知道它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:34:22.500

首先，joomla 给出了开发其扩展的简要细节。

您可以查看以下 url 以了解 joomla 的组件结构。

[http://docs.joomla.org/Developing_a_Model-View-Controller_Component/1.5/Introduction](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/1.5/Introduction)

在最后的这个文档中，您可以找到下载链接下载组件并浏览代码，您将全面了解 joomla MVC 概念。它非常简单。

我认为没有人可以用您的期望来解释您的要求。

在开发 joomla 的扩展时请记住这一点。

1）不要为你的组件任务成就编辑核心文件。

2）尝试使用 jRequest 类来获取提交的值。

3）对于新任务，使用您的控制器覆盖功能。

4）仅在模型内进行所有 sql 查询。

5）并为以后的版本制作一个紧凑的扩展。

这些是我可以给你的提示。只需浏览一些好的扩展的代码并尝试遵循它。

希望这可以帮助你..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T09:24:55.303

为了便于维护和将来的开发，我绝对建议您以正确的方式开发组件。如果您要发布该组件，我会说这是一项要求。

who MVC 结构一开始可能会令人困惑，但一旦你了解它，它就会非常好。

我建议使用 Joomla 组件创建器 [http://www.notwebdesign.com/joomla-component-creator/](http://www.notwebdesign.com/joomla-component-creator/)制作 MVC 骨架，然后自己添加自定义代码。

# javascript - Javascript 文字嵌套对象 - 引用顶级属性

> ID：14427027
> 
> 赞同：0
> 
> 时间：2013-01-20T17:12:47.827
> 
> 标签：javascript

我正在为使用宁静风格的 Web 服务的移动应用程序编写客户端。

```
var globApp = {
    sessionId : "",
    lastActionName: "",
    userName : "2victor",
    md5Pwd : "1234",
    hostApiPath : "http://host/api",
    action : {
        login : {
            scriptPath : "/acc/login",
            method : "PUT",
            requestParams : {
                user : this.userName,
                pwd : this.md5pwd
            },
            responseParams : {

            }
        },
        register : {
            scriptPath : "/acc/reg",
            method : "POST",
            requestParams : {
                user : "myUserName",
                fname : "myFirstName" ,
                lname : "myLastName" ,
                email : "mail@mail.com" ,
                age : "28" ,
                gender : "male" ,
                pwd : "1234" ,
                priv : "good"
            },
            responseParams : {

            }
        }
    }
} 
```

属性 userName 和 md5pwd 将在应用程序启动时分配。我想要实现的是，将此值分配给每个操作的 requestParams 对象下的 user 和 pwd 属性。当然，使用 this 不起作用并返回 undefined 原因，如果我理解正确的话，在这种情况下 this 指的是嵌套对象。

此 requestParams 对象由 AJAX 作为 JSON 发送。

我可以从这个对象中定义几个变量并使用它们，但我不想这样做。

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:16:40.223

这是不可能的。该对象在完全定义之前无法以任何方式使用。所以你不能一步完成。

# php - paypal - notify_url 在两个个人账户之间转移

> ID：14427029
> 
> 赞同：2
> 
> 时间：2013-01-20T17:12:58.963
> 
> 标签：php, paypal, paypal-ipn

[使用phpprobid](http://www.phpprobid.com/)软件在拍卖网站上工作，并最终为买家整合贝宝付款以向卖家支付物品。表格就像下面的代码，我可以看到钱从买家转移到卖家，但`notify_url`回调没有运行。`notify_url`（用于将项目标记为已付费和其他数据库操作）是可访问的，而不是 在`localhost`. 是`notify_url`在两个个人帐户之间调用的吗？所有文件仅涉及个人对企业的交易；这是否意味着允许用户通过贝宝销售商品并接受他们需要企业帐户的付款？

这个过程在沙箱中工作，所以我知道脚本中没有错误`notify_url`，但是你需要一个模拟的商业帐户，所以这不是问题。我已经向`mail()`通知脚本添加了一些调用，所以我可以看到它实际上并没有运行。转移工作，并且`return`网址出现在之后，因此也可以工作。

```
 <form action="https://www.paypal.com/cgi-bin/webscr/" method="post" id="form_paypal">
     <input name="submit" type="submit">
     <input type="hidden" name="cmd" value="_xclick">
     <input type="hidden" name="bn" value="wa_dw_2.0.4">
     <input type="hidden" name="business" value="Business Name">
     <input type="hidden" name="receiver_email" value="paypal@SELLERSBUSINESS.com">
     <input type="hidden" name="amount" value="SOME_AMOUNT">
     <input type="hidden" name="currency_code" value="A_VALID_CURR_CODE">
     <input type="hidden" name="return" value="OURSITE/RETURN_URL">
     <input type="hidden" name="cancel_return" value="OURSITE/FAILED_URL">
     <input type="hidden" name="item_name" value="DESCRIPTION_OF_ITEM">
     <input type="hidden" name="custom" value="VALUE_TO_BE_SPLIT_FOR_SPECIFIC_DATA">
     <input type="hidden" name="notify_url" value="OURSITE/CALLBACK_SCRIPT_URL">
  </form> 
```

tl;博士...如果贝宝交易是在两个个人帐户之间进行的，被`notify_url`调用了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T00:40:11.357

IPN 可用于任何类型的帐户。您是否绝对确定它实际上并没有被 POST，但您的脚本有问题，所以您看不到结果？

您需要通过检查您的 PayPal IPN 历史记录和您的网络服务器日志来确认这一点。

如果 PayPal IPN 历史没有显示任何内容，那么您就知道 IPN 根本没有被发送。如果它显示 200 OK，您就知道它正在被发送，并且您的服务器正在返回一个成功的响应，即脚本已完成且没有错误。如果您看到 200 OK 以外的任何内容，您就知道您的脚本发生了错误。您可以检查您的 Web 服务器日志以找到确切的错误。

您还可以自己构建一个简单的测试表单，其中包含与您期望从 PayPal 获得的内容相匹配的隐藏变量。将此表单的操作设置为您的 IPN 侦听器并直接发布。这样您就可以在屏幕上看到结果，这有助于解决您的问题。

请记住，以这种方式进行测试时，数据不是来自 PayPal，因此验证将失败。您可以调整代码以相应地处理此问题以进行测试。

# objective-c - 测试一个已经重构的方法（拆分成多个方法）？

> ID：14427030
> 
> 赞同：4
> 
> 时间：2013-01-20T17:13:07.690
> 
> 标签：objective-c, unit-testing, tdd, ocmock

正如我之前听到和最近在[Jon Reid 的非常好的截屏视频](http://qualitycoding.org/objective-c-tdd/)中了解到的，一些`init`方法或在 iOS 应用程序中，`viewDidLoad`方法往往会变得越来越大。我试图重构这个方法：

```
- (void)viewDidLoad {
    // 10+ lines of setting default property

    // 20+ lines of setting up the navigation bar

    // 20+ lines of resetting the view hierarchy
} 
```

这被一个非常漂亮且简短的方法所取代，该方法包含对其他具有说话名称的方法的调用：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    [self setDefaultResourceNames];
    [self setupRightBarButtonItems];
    [self restoreNavigationControllerHierarchy];

    [[NSNotificationCenter defaultCenter] addObserver: (...)];

} 
```

现在这三种方法都在进行单元测试，比以前好多了。现在我的问题是，是否也应该`viewDidLoad`测试该方法？

为此，我在我的测试类中做了一个部分模拟，并编写了以下测试：

```
- (void)testViewDidLoadShouldInstantiateControllerCorrectly {
    NewsItemDetailsViewController *sut = [[NewsItemDetailsViewController alloc] init];
    id mockSut = [OCMockObject partialMockForObject:sut];
    [[mockSut expect] setDefaultResourceNames];
    [[mockSut expect] setupRightBarButtonItems];
    [[mockSut expect] restoreNavigationControllerHierarchy];

    [mockSut viewDidLoad];

    [mockSut verify];
} 
```

这有什么好处吗？这似乎在很大程度上与实际的源代码和方法执行有关，而不是与调用方法引起的影响有关（据我所知，这实际上是单元测试的内容）。但是调用方法的效果其实都覆盖在三个单元测试中，测试子方法。

进行此测试是好事，还是在所有其他呼叫都在测试中时没有必要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:20:44.157

这取决于您要测试的内容。这里没有通用的解决方案；您需要根据自己的专业判断做出决定。

在这种情况下，测试控制流或为其提供回归安全网是否有益？收益是否大于成本？

为了一致性而进行模拟在很大程度上是不鼓励的。在大多数情况下，它已被证明是有害的。在您真正需要它的地方使用它作为工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T20:20:51.090

这是一个完全合理的方法。你想测试两种类型的东西：1）你不想破坏的东西，2）你想要记录的东西。如果这种方法适合您的其中一个或两个标准，那很好。

我认为像这样的测试的主要缺点是它们会给不言而喻的东西增加大量的编码开销。查看设置代码通常非常易读——您可以浏览它并了解发生了什么，因此测试不会增加太多文档价值。如果视图是您每次使用应用程序时使用的视图，那么当您进行 QA 时，如果任何视图设置被破坏，可能会立即清楚，因此测试不会增加太多防御性编码价值。

In the end, you're the one who will maintain this code and be responsible for fixing it when it breaks, so it's up to you to determine whether the testing effort now outweighs the risks later.

# html - 圆角纯 CSS 技术

> ID：14427034
> 
> 赞同：0
> 
> 时间：2013-01-20T17:14:03.570
> 
> 标签：html, css, select

我一直在查看堆栈上的这个问题 - [How to style a <select> dropdown with CSS only without JavaScript?](https://stackoverflow.com/questions/1895476/how-to-style-a-select-dropdown-with-css-only-without-javascript) 并想知道是否可以使用这种技术使用圆角。

在我作为测试敲出的示例中，这是不可能的，因为选择框似乎在背景中突出。我认为该技术对于获得对盒子样式的合理控制水平是不错的，同时仍然保持本机操作系统支持，这是我在这种情况下所追求的。如果证明在这种技术中使用圆角太难了，那么我就放弃它。

这是一个不错的 jsfiddle - [http://jsfiddle.net/danield770/YvCHW/6/](http://jsfiddle.net/danield770/YvCHW/6/)

我的CSS目前是这样的。

```
.styled-select select {
    background: transparent;
    width: 268px;
    font-size: 16px;
    line-height: 1;
    border: 0;
    height: 28px;
}

.styled-select{
    padding: 0;
    width: 240px;
    height: 28px;
    overflow: hidden;
    background: url(images/drop.png) no-repeat right #fff;
    border: 1px solid #ccc;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:18:22.627

如果我只是申请[`border-radius`](https://developer.mozilla.org/en-US/docs/CSS/border-radius)它，对我有用。

```
.styled-select{
    border-radius: 10px;
} 
```

[jsFiddle 演示](http://jsfiddle.net/YvCHW/261/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T17:19:40.297

您可以使用`border-radius`添加圆角。[参考](http://www.w3.org/TR/css3-background/#border-radius)

```
.styled{
   width: 120px;
   height: 34px;
   overflow: hidden;
   background: url(http://www.stackoverflow.com/favicon.ico) no-repeat 96% #ddd;
   border-radius: 10px;
} 
```

[**小提琴**](http://jsfiddle.net/YvCHW/262/)

# c# - Host 在 azure 上开发了 wcf 服务

> ID：14427037
> 
> 赞同：1
> 
> 时间：2013-01-20T17:14:29.013
> 
> 标签：c#, .net, wcf, silverlight, azure

我在 Silverlight 中有现成的项目，它正在使用 wcf 服务。我有一个用于 silverlight 应用程序的项目和另一个用于 wcf 服务的项目。我可以将此 wcf 服务从项目移动到简单的 azure 吗？或者我必须重建所有项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T04:15:12.723

有 2 个选项。

1.  将项目作为 IIS 项目托管在 Azure 中的 Windows Server 虚拟机上。不需要编码，但您必须将项目移动到 IIS。

2.  将您的项目重新编码为 Azure 云服务。这并不难。我在下面的视频中展示了如何使用 ASMX 服务执行此操作的示例，但是移动 WCF 服务应该比这更容易。

视频位于： [http ://www.youtube.com/watch?v=oQbMnoG56lk](http://www.youtube.com/watch?v=oQbMnoG56lk)

# magento - 相关产品部分中的可定制产品（显示选项）

> ID：14427040
> 
> 赞同：0
> 
> 时间：2013-01-20T17:15:14.143
> 
> 标签：magento, magento-1.7

使用磁电机，在“产品 A”的产品页面上，可以在相关产品部分有“产品 B”和“产品 C” - 设置为可配置产品 - 并允许选择它们各自的选项 - 全部来自产品“产品A”的页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:24:03.390

对的，这是可能的。

# c# - SOAP 服务响应为空

> ID：14427044
> 
> 赞同：0
> 
> 时间：2013-01-20T17:15:18.863
> 
> 标签：c#, wcf, soap

我没有收到来自 Web 服务的任何返回响应，正在接收输入消息 XML 好的。

尝试获取并返回符合集成标准的自定义 XML，这就是我使用 SSCMessage 作为参数的原因。

```
using System.ServiceModel.Channels;

[ServiceContract(Namespace = "urn:hl7-org:v3")]
public interface IHL7v3
{
    [OperationContract(Name = "PRPA_IN201301UV02", Action = "urn:hl7-org:v3:PRPA_IN201301UV02")]
    Message PIXManager_PRPA_IN201301UV02(Message input);
}

public class PIXService : IHL7v3
{
    public Message PIXManager_PRPA_IN201301UV02(Message input)
    {
         // this code is being reached and executing fine
         return Message.CreateMessage(MessageVersion.Soap12, "Op", "Content"); // will be replaced by an actual XML text
    }
} 
```

服务设置代码：

```
 Uri baseAddress = new Uri("http://192.168.2.120:31002/HL7Service");
        ServiceHost selfHost = new ServiceHost(typeof(PIXService), baseAddress);

        selfHost.Description.Name = "PIXManager";
        selfHost.Description.Namespace = "urn:hl7-org:v3";

        try
        {
            System.ServiceModel.Channels.Binding binder = new WSHttpBinding(SecurityMode.None);

            binder.Name = "PIXManager_Binding_Soap12";
            selfHost.AddServiceEndpoint(
                typeof(IHL7v3),
                binder,
                "PIX");

            ServiceMetadataBehavior smb = new ServiceMetadataBehavior();
            smb.HttpGetEnabled = true;
            Console.WriteLine(smb.HttpGetUrl);
            selfHost.Description.Behaviors.Add(smb);
            selfHost.AddServiceEndpoint(
              ServiceMetadataBehavior.MexContractName,
              MetadataExchangeBindings.CreateMexHttpBinding(),
              "mex"
            );

            selfHost.Open(); 
```

想法为什么？

**编辑**：添加了ReplyAction，仍然没有回复

```
[OperationContract(Name = "PRPA_IN201301UV02", Action = "urn:hl7-org:v3:PRPA_IN201301UV02", ReplyAction = "urn:hl7-org:v3:MCCI_IN000002UV01")]
// ..
return Message.CreateMessage(MessageVersion.Soap12, "urn:hl7-org:v3:MCCI_IN000002UV01", "Something"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:45:07.050

更改`MessageVersion`为`MessageVersion.Soap12WSAddressing10`

```
return Message.CreateMessage(MessageVersion.Soap12WSAddressing10, "Op", "Content"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:31:50.953

您的`ReplyAction`操作设置为一个值（我不记得确切是哪个值，但它是默认值），并且您正在创建具有.`Action`属性的响应消息`Op`。尝试在 中设置`ReplyAction`属性`OperationContract`，并在创建响应消息时使用相同的值。

# python - python readline 奇怪的行为

> ID：14427047
> 
> 赞同：0
> 
> 时间：2013-01-20T17:16:03.473
> 
> 标签：python, readline

文本文件 dummy.txt 包含以下几行：

```
Line 1
Line 2
Line 3 
```

下面的程序应该将每一行附加到行列表中。

```
f1 = open('c:\Python33\dummy.txt')
lines = []
for line in f1:
    lines.append(f1.readline())
f1.close()
print(lines) 
```

但它的输出是：

> > > ['第 2 行\n', '']

当我使用 IDLE 时，然后打开文件并键入`lines.append(f1.readline())`三遍然后打印行，我得到了我想要的，即`['Line 1\n', 'Line 2\n', 'Line 3\n']`.

程序出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T17:18:02.207

`open`将返回一个生成器，您将正确获取下一行，但您将获得两次循环。所以这就是你正在做的......你`f1`在循环中调用然后在追加`f1`被再次调用拉第二行。最后你在循环头中调用它再次调用第三行然后当你在应用程序中再次调用它时你得到文件的结尾。结束生成器。

做这个：

```
f1 = open('c:\Python33\dummy.txt')
lines = []
for line in f1:
    lines.append(line)
f1.close()
print(lines) 
```

或者

```
lines = [line for line in f1] 
```

或者

```
lines = f1.readlines() 
```

# dojo - dojo 选择字段显示值

> ID：14427048
> 
> 赞同：0
> 
> 时间：2013-01-20T17:16:13.737
> 
> 标签：dojo, dgrid

我将 dijit.form.select 与网格编辑器一起使用，如下所示：

```
editor({    
    label: 'status',
    field: 'status_name',
    editorArgs: {
        style: "width:75px;",
        options: task_status
    },
    className: 'style8'
}, Select, "dblclick"), 
```

当我打开选择字段并从列表中选择一个选项时，这将返回所选选项的“值”而不是它的名称。
如何获取价值而不是价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T19:54:40.053

检查选项列表中的对象。每个对象都应该有一个标签和值属性。标签是选择时将显示的内容。

# php - PHP中的不可变对象？

> ID：14427050
> 
> 赞同：18
> 
> 时间：2013-01-20T17:16:21.993
> 
> 标签：php, class, immutability

创建无法在 PHP 中更改的对象是个好主意吗？

例如具有 setter 方法的日期对象，但它们将始终返回对象的新实例（具有修改的日期）。

这些对象是否会让其他使用该类的人感到困惑，因为在 PHP 中您通常希望对象发生变化？

例子

```
$obj = new Object(2);

$x = $obj->add(5); // 7
$y = $obj->add(2); // 4 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-20T17:19:51.993

不可变对象没有 setter 方法。时期。

每个人都会期望一个`setXyz()`方法有一个 void 返回类型（或者在松散类型的语言中什么都不返回）。如果您确实将 setter 方法添加到您的不可变对象，它将使人们感到困惑并导致丑陋的错误。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-11-25T02:52:00.243

在我看来，对象对于值对象应该是不可变的。除此之外，除非您在整个应用程序中共享您的对象，否则它并没有太多好处。

这里有一些错误的答案，**一个不可变的对象可以有 setters**。这是 PHP 中不可变对象的一些实现。

示例#1。

```
class ImmutableValueObject
{
    private $val1;
    private $val2;

    public function __construct($val1, $val2)
    {
        $this->val1 = $val1;
        $this->val2 = $val2;
    }

    public function getVal1()
    {
        return $this->val1;
    }

    public function getVal2()
    {
        return $this->val2;
    }
} 
```

正如您所看到的，一旦实例化，您就无法更改任何值。

示例 2：使用`setters`：

```
class ImmutableValueObject
{
    private $val1;
    private $val2;

    public function __construct($val1, $val2)
    {
        $this->val1 = $val1;
        $this->val2 = $val2;
    }

    public function getVal1()
    {
        return $this->val1;
    }

    public function withVal1($val1)
    {
        $copy = clone $this;
        $copy->val1 = $val1;

        return $copy;    // here's the trick: you return a new instance!
    }

    public function getVal2()
    {
        return $this->val2;
    }

    public function withVal2($val2)
    {
        $copy = clone $this;
        $copy->val2 = $val2;

        return $copy;
    }
} 
```

有几种可能的实现方式，这绝不是一个排他性的列表。请记住，使用反射总是有办法在 PHP 中解决这个问题，所以最终不变性完全在你的脑海中！

将不可变对象作为最终对象通常也是一种好习惯。

编辑：

*   将 setX 更改为 withX
*   添加了关于最终的评论

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-20T18:02:35.327

不可变对象在初始创建后无法更改，因此使用 setter 方法毫无意义，因为它违反了该基本原则。

您可以通过操纵类成员的可见性和覆盖魔术`__set()`方法来实现一些变通方法来模拟 PHP 中的不变性，但它不能保证不可变，因为不变性不是 PHP 语言的特性。

我相信有人曾经写过一个扩展来在 PHP 中提供一个不可变的值类型，所以你可以用谷歌搜索。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-05T11:05:28.823

我做了一个小特征，避免使用反射来简化不变性的实现：[https ://github.com/jclaveau/php-immutable-trait](https://github.com/jclaveau/php-immutable-trait)

显然，由于它不是一种语言特性，它不会通过魔法弹劾突变，而是减轻在应用之前必须克隆当前实例的突变器的代码。应用于马西米利亚诺的例子，它会产生

```
class ImmutableValueObject
{
    use JClaveau\Traits\Immutable;

    private $val1;
    private $val2;

    public function __construct($val1, $val2)
    {
        $this->val1 = $val1;
        $this->val2 = $val2;
    }

    public function getVal1()
    {
        return $this->val1;
    }

    public function withVal1($val1)
    {
        // Just add these lines at the really beginning of methods supporting
        // immutability ("setters" mostly)
        if ($this->callOnCloneIfImmutable($result))
            return $result;

        // Write your method's body as if you weren't in an Immutable class
        $this->val1 = $val1;
        return $this;
    }

    public function getVal2()
    {
        return $this->val2;
    }

    public function withVal2($val2)
    {
        if ($this->callOnCloneIfImmutable($result))
            return $result;

        $this->val2 = $val2;

        return $this;
    }
} 
```

*   您可以看到您没有在此处返回 $copy，而是在 Kanstantsin K 注意到的情况下返回 $this。
*   在原生 PHP中[https://secure.php.net/manual/en/class.datetimeimmutable.php](https://secure.php.net/manual/en/class.datetimeimmutable.php)具有将返回新实例并应用修改的变异器。因此，复制粘贴语句说不可变对象不应该有 mutators 似乎不是很有趣。
*   用“withXXX”代替“setXXX”的做法超级有趣，谢谢建议！我个人将“becomesXXX”用于链接实例可变性的 api（特征 SwitchableMutability 中的可选 API）。

希望它可以帮助这里的一些人！

PS：非常欢迎对这个小功能提出建议:)：[https ://github.com/jclaveau/php-immutable-trait/issues](https://github.com/jclaveau/php-immutable-trait/issues)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-16T12:50:58.793

从不可变对象中，您可以获取其值，但无法修改它们。在这里你可以看到一个不可变类的例子：

```
<?php 

declare(strict_types=1);

final class Immutable 
{
    /** @var string */
    private $value;

    public static function withValue(string $value): self
    {
        return new self($value);
    }

    public function __construct(string $value) 
    {
        $this->value = $value;
    }

    public function value(): string 
    { 
        return $this->value;
    }
}

// Example of usage:
$immutable = Immutable::withValue("my value");
$immutable->value(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-26T21:25:19.013

如果你想要一个类和对象的设置器，这很好，我们一直这样做，因为我们需要设置对象数据。只是不要称它为不可变的。

开发世界中的许多事情都是主观的——我们的方法、方法论等——但“不可变”是一个非常可靠的定义：

> “不可变”：
> - 随着时间的推移不变或无法更改。

如果您想要一个不可变对象，则意味着它在实例化后无法更改。这对于需要在循环期间保持不变的数据库等数据非常有用。

如果您需要在实例化后调用对象并在其上设置或更改数据，这不是不可变对象。

您会从汽车上取下两个轮子并称其为摩托车吗？

有一些关于“不可变”类的方法被命名为没有“set”一词的讨论，但这并不能阻止它们作为设置数据的方法的功能。您可以调用它`thisDoesNotSetAnything(int $id)`并允许传递更改对象的数据。它将是一个 setter，因此该对象是可变的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-27T16:39:18.723

使对象不可变非常容易。这是一种优雅而方便的方法。

您需要做的就是创建具有特定`__get()`和`__set()`魔术方法的基本抽象类，并在子对象中扩展这个基类。

如果您使用值对象（例如，对于 DDD），这非常适用。

这是基类：

```
abstract class BaseValueObject
{
    public function __get(string $propertyName)
    {
        return $this->$propertyName;
    }

    public function __set(string $propertyName, $value): void
    {
        throw new \Exception("Cannot set property {$propertyName}. The object is immutable.");
    }
} 
```

现在是一个子对象（好吧，它的类）。

```
class CategoryVO extends BaseValueObject
{

    public $id;
    public $name;

    public function __construct(array $data)
    {
        $this->id = $data['id'];
        $this->name = $data['name'];
    }
} 
```

就是这个。

它会在尝试设置某个值时抛出异常。基本上它是不可变的。

然而，它将方便地将其所有属性公开为只读（对于某种序列化等），这与我们将它们设为私有不同。

最后，不能错误地实例化`BaseValueObject`，因为它是一个抽象类。从各个角度来看都是不错的优雅解决方案。

# c++ - Qt XmlQuery 子查询属性

> ID：14427052
> 
> 赞同：1
> 
> 时间：2013-01-20T17:16:27.807
> 
> 标签：c++, qt, xquery, qml

我正在尝试使用 QXmlQuery (Qt 5.0) 解析 gpx 文件。

这个想法是收集所有 trkpt 元素，然后子查询每个元素以提取纬度、经度、高度......

问题是它似乎无法识别属性名称，因为此代码有效：

```
query.setQuery
        (
            "declare default element namespace \"http://www.topografix.com/GPX/1/1\";"
            "declare variable $gpxFile external;"
            "doc($gpxFile)//trkpt"
        );

if(query.isValid())
{
    QXmlResultItems trkpts;
    query.evaluateTo(&trkpts);
    for(QXmlItem trkpt = trkpts.next(); !trkpt.isNull(); trkpt = trkpts.next())
    {
        QXmlQuery childQuery;
        QStringList res;

        childQuery.setFocus(trkpt);
        childQuery.setQuery
                (
                    "@*/string()"
                ); // <------------------------- this prints out all the attributes

        childQuery.evaluateTo(&res);
        qDebug() << res << "\n";
    }
} 
```

而这个没有：

```
 // ... same code as above
        childQuery.setQuery
                (
                    "@lat/string()"
                ); // <------------------------- this prints out only a \n
        // ... same code as above 
```

有什么想法吗？

请注意，如果我尝试使用“外部”查询收集所有 @lat 属性，它会按预期工作：

```
query.setQuery
        (
            "declare default element namespace \"http://www.topografix.com/GPX/1/1\";"
            "declare variable $gpxFile external;"
            "doc($gpxFile)//trkpt/@lat/string()"
        ); 
```

**编辑**

这是一个 gpx 示例文件：

```
<?xml version="1.0" encoding="ISO-8859-1" standalone="yes"?>
<gpx
    version="1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://www.topografix.com/GPX/1/0"
    xmlns:topografix="http://www.topografix.com/GPX/Private/TopoGrafix/0/2"
    xsi:schemaLocation="http://www.topografix.com/GPX/1/0 http://www.topografix.com/GPX/1/0/gpx.xsd http://www.topografix.com/GPX/Private/TopoGrafix/0/2 http://www.topografix.com/GPX/Private/TopoGrafix/0/2/topografix.xsd">
    <trk>
        <name>My track</name>
        <desc>My track description</desc>
        <trkseg>
            <trkpt lat="38.919839863" lon="-121.020112049">
                <ele>265.447754</ele>
                <time>2003-02-05T18:19:20Z</time>
            </trkpt>
            <trkpt lat="38.919796947" lon="-121.020240795">
                <ele>264.967041</ele>
                <time>2003-02-05T18:19:20Z</time>
            </trkpt>
            <trkpt lat="38.919861320" lon="-121.020498287">
                <ele>263.044434</ele>
                <time>2003-02-05T18:19:20Z</time>
            </trkpt>
            <trkpt lat="38.919990066" lon="-121.020798694">
                <ele>263.525146</ele>
                <time>2003-02-05T18:19:20Z</time>
            </trkpt>
        </trkseg>
    </trk>
</gpx> 
```

**编辑**

我通过使用 QDomDocument 而不是 QXmlQuery 找到了解决此问题的方法。结果类似于下面的代码（**为简洁起见，删除了所有错误检查**）：

```
QFile file = ("mytrack.gpx");
file.open(QIODevice::ReadOnly);

QDomDocument doc("mydoc");
doc.setContent(&file);

QDomElement root = doc.documentElement();
QDomNodeList trkpts = root.elementsByTagName("trkpt");

for(int i = 0; i < trkpts.length(); i++)
{
    QDomElement e = trkpts.at(i).toElement();

    QString latitude = e.attribute("lat");
    QString longitude = e.attribute("lon");

    QDomNodeList elevation_list = e.elementsByTagName("ele");
    QString elevation = elevation_list.at(0).toElement().text();

    // ... and so on
} 
```

我想通过使用 QXmlQuery 找到解决此问题的方法，但与此同时，这只是可行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:12:18.340

我不确定，因为我不知道 QXmlQuery 以及它如何处理查询解析和执行。但我想这可能是命名空间问题。在第一个查询中，您定义了一个默认命名空间，而在第二个查询中您没有。也许这个默认命名空间没有在第二个查询（childQuery）中使用。至少它适合`@*/String()`打印一些东西。`@*:lat/string`如果按预期工作，也许您可​​以尝试。

否则，一些示例数据将非常有价值。

# ruby-on-rails - 使用CanCan，我如何根据关联/子属性限制能力

> ID：14427053
> 
> 赞同：1
> 
> 时间：2013-01-20T17:16:36.123
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, cancan, rails-activerecord

我有一个数据库设置，其中有很多用户，这些用户具有成员或管理员的角色。每个用户有许多汽车。每辆车都有很多时间片

那么，只有当他是母车的所有者时，我才如何限制用户编辑 Timeslip 的能力。

在康康：

```
class Ability
    include CanCan::Ability

    def initialize(user)
        user ||= User.new # guest user (not logged in)
        if user.has_role? :admin
            can :manage, :all
        elsif user.has_role? :member
            can :manage, Car, :user_id => user.id
            can :manage, Timeslip, :car => {:user_id => user.id}
        end
    end
end 
```

所以这条线`can :manage, Timeslip, :car => {:user_id => user.id}`是我需要帮助的地方。

因为 Timeslip 是 Car 的关联/子项，所以我需要检查其父 car.user_id = Cancan user.id

我认为我写这篇文章的方式与 CanCan 文档一致，但我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T17:47:24.467

可能有更短的方法来编写它，但这会起作用：

```
can :manage, Timeslip do |timeslip|
     timeslip.car.user_id == user.id
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-29T16:22:27.927

这对我有用：`can :manage, Timeslip, car: { roles: { id: user.role_ids } }`

# spring - 是否可以在需要存储会话数据的 Web 应用程序中使用 twitter Bootstrap->front-end + Spring-Hibernate->Backend

> ID：14427056
> 
> 赞同：0
> 
> 时间：2013-01-20T17:16:54.157
> 
> 标签：spring, hibernate, twitter-bootstrap, angularjs

我想创建一个前端使用 Twitter Bootstrap，后端使用 Spring+Hibernate 的 Web 应用程序。

现在，一些数据必须存储在每个用户的会话中——我如何存储/管理这些数据？为此，我是否必须使用 Angular（由 Google 提供）或其他一些框架之类的第 3 方 JS 框架？

另外，在这样的混合应用程序中，我是否应该使用 JS 框架（如 Jquery 或 Angular JS）来存储数据，然后将其发送到 Spring + Hibernate API？我的意思是，我也可以将对象-> 关系数据库映射存储在 js 框架中，并将 Spring 仅用于基本的数据库插入/更新/选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T19:08:33.213

Twitter bootstrap 是一个带有一些 javascript 插件的 CSS 框架，它本身并不是一种语言。使用或不使用它不会影响您在后端可以/不能使用的内容。

至于会话；会话应始终存储在服务器端...因此使用 Bootstrap 不会影响会话的实现。

最后，关于将任何数据库逻辑客户端保留在 javascript 中，永远不要这样做。Javascript 代码可以非常容易地被用户修改，所以任何客户端都应该被认为是不安全的。永远不要在数据库中放置任何不安全的东西。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-20T20:00:49.380

我们可以将 Twitter Bootstrap 用于前端，并将 Spring MVC -> REST API 用于后端......

对于简单的应用程序，例如仅搜索应用程序，我们可以直接创建 API 并使用 JQuery 连接到 API 并获取数据。

对于更复杂的应用程序，问题在于 REST API 不存储会话数据……但是，我们可以使用 Spring MVC-> REST API，因为它专门支持处理会话。

参考[http://tedyoung.me/2011/10/19/practical-spring-mvc-part-5-sessions/](http://tedyoung.me/2011/10/19/practical-spring-mvc-part-5-sessions/)解释如何使用 Spring MVC 存储会话数据 - 前端是一个简单的 HTML/CSS 网页.

# django - Django 表单地理编码 - 在哪里进行地理编码，如何验证，如何传递地理编码结果

> ID：14427059
> 
> 赞同：1
> 
> 时间：2013-01-20T17:17:16.670
> 
> 标签：django, forms, validation, geocode

我有一个非常简单的 Django 表单，它包含一个字段 - “地址”：

```
class AddressSearchForm(forms.Form):
    """
        A form that allows a user to enter an address to be geocoded
    """
    address = forms.CharField() 
```

我可能甚至不需要使用表格，因为我没有保存这些数据——我只是收集它以用于搜索。但是，我想执行验证：

```
def clean_address():
    data = self.cleaned_data
    g = geocoders.Google()
    try:
        place, (lat,lng) = g.geocode(data['address'])
    except (GQueryError):
        raise forms.ValidationError('Please enter a valid address')
    except (GeocoderResultError, GBadKeyError, GTooManyQueriesError):
        raise forms.ValidationError('There was an error geocoding your address. Please      try again')
    except:
        raise forms.ValidationError('An unknown error occured. Please try again') 
```

此外，我想使用此地理编码结果将 Point 对象传递给我的视图：

```
from django.contrib.gis.geos import Point
point = Point(lng, lat) 
```

我的问题是，如何将地址和点数据都传递给我的视图？我可以只传递地址，然后在视图中重新进行地理编码，但这将是重复代码。那么，如何从表单中传递点对象呢？我应该使用隐藏字段吗？其他建议？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T18:07:44.427

我不是 django 专家，但这就是我所做的：

```
 def clean_homeaddress(self):
        in_address = self.cleaned_data['homeaddress']        
        place, self.cleaned_data['homelocation'] = address_to_latlng(in_address, True)
        return place 
```

哦，顺便说一下，看看下面的包装。geocoders.Google 无法正确处理 unicode 字符串。下面有一个简单的 hack，可以删除所有非 ascii 字符。我还没有时间想出更好的解决方案。

```
def address_to_latlng(address, return_address = False):
    """ returns GoeDjango POINT string value for given location (address)
        if return_address is true, it'll return 2-tuple: (address, point)
        otherwise it returns point
    """ 
    g = geocoders.Google()
    try:
        #TODO: not really replace, geocode should use unicode strings
        address = address.encode('ascii', 'replace')            
        place, latlng = g.geocode(address)            
    except Exception as e:            
        raise ValidationError(_(u"Incorrect location provided"))
    point = 'POINT(%f %f)' % tuple(reversed(latlng))
    if return_address:
        return (place, point)    
    return point 
```

* * *

根据要求，有完整的代码。这会将位置打印到输出控制台，并将在会话中保留“已清理”（由 Google 返回）地址，以便在每次显示表单时将其显示给用户。

```
class GeoForm(forms.Form):
    address = forms.CharField()    

    def clean_address(self):
        in_address = self.cleaned_data['address']        
        place, self.cleaned_data['location'] = address_to_latlng(in_address, True)
        return place

class GeoView(FormView):
    form_class = GeoForm
    template_name = 'geoview.html'
    success_url = '/sandbox/geo'
    def get_initial(self):
        if '_address' in self.request.session:
            return {'address': self.request.session['_address']}
        return {}
    def form_valid(self,form):
        print form.cleaned_data['location']
        self.request.session['_address'] = form.cleaned_data['address']
        return super(GeoView, self).form_valid(form) 
```

# jquery - 仅填写两个必填字段中的一个时如何验证表单

> ID：14427062
> 
> 赞同：-3
> 
> 时间：2013-01-20T17:17:29.793
> 
> 标签：jquery, forms, jquery-validate

我有一个联系表格。它会询问您的姓名，然后询问您是否希望通过电话或电子邮件与您联系。除非用户选择电话或电子邮件的单选按钮，否则电话和电子邮件字段将被隐藏。一旦您点击电话或电子邮件，我会验证他们是否输入了正确的电话或电子邮件地址。

我的问题是如果用户没有点击任何一个单选按钮，如何检查 JQuery Validation 并打印出错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:42:03.737

您只是在问如何验证一组单选按钮吗？由于您没有显示任何代码，所以我只能向您展示如何`radio` `input`使用插件验证一组 '。

[然后，您将使用内置`rules`方法](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)从相应的输入中动态添加/删除规则。同样，我需要在自定义解决方案之前查看您的代码。

**工作演示**：http: [//jsfiddle.net/PbHwX/](http://jsfiddle.net/PbHwX/)

**jQuery** :

```
$(document).ready(function () {

    $('#myform').validate({
        rules: {
            radiotest: {
                required: true
            }
        },
        messages: {
            radiotest: {
                required: "please select at least one option"
            }
        }
    });

}); 
```

**HTML**：

```
<input type="radio" name="radiotest" value="0" />
<input type="radio" name="radiotest" value="1" /> 
```

**文档**： [http ://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T17:28:42.413

**更新 (2012-01-20 19:38)**：我想我理解你在寻找什么，并注意到你想使用 jQuery 的验证插件。

这是一个关于 JSFiddle的[工作演示](http://jsfiddle.net/KCXSL/)*（注意：我从 Sparky 的小提琴中分叉）*

默认情况下，仅设置有关单选按钮的规则。所有的消息都是预先设置好的，表单的特定字段是隐藏的。现在，每当单击单选按钮时，我都会隐藏无用的字段，删除相应的规则。我还显示了正确的字段并添加了相应的规则。

您要查找的特定代码必须类似于：

```
 /* Toggle fields */
    $('#mailfields').hide();
    $('#phonefields').show();

    /* Remove email rule */
    $('input:text[name=emailadress]').rules('remove');

    /* Add a requirement rule for phone */
    $('input:text[name=phonenumber]').rules('add', { required: true }); 
```

* * *

**第一个答案：**您说当用户选择两个收音机（电子邮件或电话）中的一个时，您会显示一个或另一个相应的字段。因此，我假设您已经有一些 jQuery 代码，每次用户单击一个单选按钮时都会运行这些代码。

此代码可以添加一个类或隐藏字段或您喜欢的任何内容（或任何这种情况下的最佳常见做法，遗憾的是我没有足够的经验知道这一点......）这让您稍后知道用户确实选择了一个选项。

如果您可以显示更多代码（例如[jsFiddle](http://jsfiddle.net/)），我可以给您一个更具体的答案。不过，这就是我要做的：

1.  使表单的所有字段都已在 HTML 文档中
2.  使用 jQuery 和 CSS 根据需要隐藏/显示字段
3.  测试总是一样的：

    ```
    (phoneRadio.selected && phoneField.filled)
    || (mailRadio.selected && mailField.filled) 
    ```

让我知道这有什么帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-20T17:43:24.003

如果您有多种形式并使用 ASP.NET MVC 等，则可以使用 jquery unobtrusive。或者您可以执行以下操作：

[演示](http://jsfiddle.net/OlivierAlbertini/9ma3u/)

```
$('#form').click(function (e) { // or $form.submit handler
    if ($('#email').val() == "") // or you can use an regex validation
    {
       e.preventDefault();
        // set message here
        $('#message').css('color', 'red').append('email invalid !');
    }
});

$('form').submit(function (e) {
    alert('submited :' + $('#email').val());
}); 
```

# bash - awk 更新记录

> ID：14427063
> 
> 赞同：0
> 
> 时间：2013-01-20T17:17:35.983
> 
> 标签：bash, awk

我在文本文件中有数据：

```
Customer:HDB:Price:Left:total
Ted 1:rm4:34:197:101 
```

我正在尝试将 left 和 total 的最新记录更新到数据库中。为什么这个表达式不起作用？

```
awk -F : -v OFS=: -v customer=$customer-v hdb=$hdb \
   -v left=$left -v total=$total \
   '$1==customer && $2==hdb {`$4=left $5=total;`}1' file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:28:25.757

1）你在这里忘记`;`了：

`$4=left; $5=total;`

2) 这里需要的空间：

`customer=$customer -v`

3) ``这里不需要：

`{$4=left; $5=total;}`

**这应该有效：**

```
awk -F : -v OFS=: -v customer="$customer" -v hdb="$hdb" -v left="$left" \
  -v total="$total" '$1==customer && $2==hdb { $4=left; $5=total } 1' file 
```

# javascript - Javascript 通过转换更改 innerHTML

> ID：14427064
> 
> 赞同：1
> 
> 时间：2013-01-20T17:17:38.527
> 
> 标签：javascript, hover, transition, innerhtml

我有这个功能，当某个其他 div 悬停时，它将使该文本出现在某个 div 上：

```
 function description(x){
    if(x=="tabuweb"){
        document.getElementById("description_box").innerHTML = "TabuWeb is a game designed for primary school children " +
                "to learn mathematics<br>" +
                "The main goal of the game is to get to the finish line by answering math questions<br>" +
                "Give it a try!";
    }
    if(x=="squares"){
        document.getElementById("description_box").innerHTML = "Squares is a maze game that focus on memory<br>" +
                "Click the squares around the white one. You must find a route to the blue square<br>" +
                "It's all about trial and error<br>"+
                "Good Luck!";
    }
} 
```

它在我的网页 ( [cmfproject](http://cmfproject.info/) ) 上，如果您将鼠标悬停在我那里的两个游戏。

问题是：如何使该文本看起来像图像上的悬停效果一样平滑以使其更大，或者不是立即弹出那里的东西？

# spring - 定义 bean 以获取 enum construtor-arg

> ID：14427065
> 
> 赞同：3
> 
> 时间：2013-01-20T17:17:38.893
> 
> 标签：spring, enums

用于所有数据源连接的连接池类。它有一个静态枚举来指示连接类型。

```
class ConnectionPool {

   public static enum Type {
     t1,
     t2,
     t3;
   }
…
} 
```

另一个类没有默认承包商，构造函数将 Type 作为承包商参数

```
class Update {
   public Update(Type type) {
      this.type = type;
   }
...
} 
```

在applicationContext.xml中，定义了一个bean

```
<bean id="update" class="package.Update">
    <contructor-arg type="package.ConnectionPool.Type">
        <value>Type.t1</value>
    </contructor-arg>
</bean> 
```

但我得到了

```
Error creating bean with name 'update' defined in class path resource [applicationContext.xml]: Unsatisfied dependency expressed through constructor argument with index 0 of type [package.ConnectionPools$PoolType]: Ambiguous constructor argument types - did you specify the correct bean references as constructor arguments? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T17:22:43.390

这应该有效：

```
<bean id="update" class="package.Update">
    <contructor-arg type="package.ConnectionPool.Type">
        <value>t1</value>
    </contructor-arg>
</bean> 
```

甚至：

```
<bean id="update" class="package.Update">
    <contructor-arg type="package.ConnectionPool.Type" value="t1"/>
</bean> 
```

或我最喜欢的：

```
@Configuration
public class Config {

    @Bean
    public Update update() {
        return new Update(t1);
    }

} 
```

# sql-server - 从命令行安装 SQL Server

> ID：14427066
> 
> 赞同：1
> 
> 时间：2013-01-20T17:17:56.533
> 
> 标签：sql-server

有人可以告诉我什么是命令行参数：

1.  设置状态，设置自动完成，因为“授予连接数据库引擎的权限”并且“登录”已启用（默认情况下已禁用）

2.  仅使用 TCP / IP 设置“本地和远程连接”授予

谢谢

# jquery - 我如何将使用 jQuery 实时计算的变量传递给 PayPal 输入表单

> ID：14427067
> 
> 赞同：0
> 
> 时间：2013-01-20T17:18:00.297
> 
> 标签：jquery, paypal

我有一个简单的脚本，用户输入一个值，网页输出添加 2.9% 的值。到目前为止，一切都很好。我正在努力将该值传递给同一页面上的 PayPal（输入名称“金额”）表单。尝试了几件事，但到目前为止没有运气。

```
 <script src="http://code.jquery.com/jquery-latest.min.js"
                type="text/javascript"></script>  
        <label>payment amount:</label><input name="payment" id="payment" type="text" />
                   <br />
                  Above payment + convenience fee: $ <span id="result"></span>

    <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
    <input type="hidden" name="cmd" value="_xclick">

    <input type="hidden" name="business" value="test@test.com">
    <input type="hidden" name="item_name" value="example description">
    <input type="hidden" name="item_number" value="1">
<!--NEED HELP HERE W/ AMOUNT:--> <input type="text" name="amount" id="amount">
    <input type="hidden" name="no_shipping" value="1">
    <input type="hidden" name="return" value="http://www.yoursite.com/returnpage.php">
    <input type="hidden" name="currency_code" value="USD">
    <input type="hidden" name="lc" value="US">
    <input type="hidden" name="bn" value="PP-BuyNowBF">
    <input type="image" src="https://www.paypal.com/en_US/i/btn/x-click-but02.gif" border="0" name="submit" alt="Make your payments with PayPal. It is free, secure, effective.">
    <img alt="" border="0" src="https://www.paypal.com/it_IT/i/scr/pixel.gif" width="1" height="1">
    </form>

    <script>

        $(document).ready(function(){
        $('#payment').keyup(function(){
            $('#result').text($('#payment').val() * 1.029)

        });

        });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:20:26.773

做就是了：

```
var amt = $("#pament").val() * 1.029;
$('#result').text(amt);
$('#amount').val(amt); 
```

# node.js - 如何使节点 child_process 连续执行

> ID：14427075
> 
> 赞同：8
> 
> 时间：2013-01-20T17:18:37.740
> 
> 标签：node.js, child-process

如何`exec`连续？例如`ls`之后`cd`？

我试过

```
exec = require('child_process').exec;
exec('cd ~/', 
  function(){
    exec('ls'),
    function(err, stdout, stderr){
      console.log(stdout); // this logs current dir but not ~/'s
    }
  }
)

exec('cd ~/').exec('ls', function(err, stdout, stderr){
  console.log(stdout);
})//this also fails because first exec returns a ChildProcess Object but not itself. 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-21T08:47:35.153

这是不可能的，因为 exec 和 spawn 创建了一个新进程。但是有一种方法可以模拟这一点。您可以使用 exec 启动一个进程并同时执行多个命令：在命令行中，如果您想在同一行上执行 3 个命令，您可以编写：

```
cmd1 & cmd2 & cmd3 
```

因此，所有 3 个命令都在同一个进程中运行，并且可以访问由先前执行的命令修改的上下文。让我们以您的示例为例，您要执行 cd ../ 之后执行 dir 并查看以前的目录列表。在 cmd 你应该写：

```
cd../ & dir 
```

从节点 js 中，您可以使用 exec 启动一个进程，并告诉它启动另一个将评估内联脚本的节点实例：

```
var exec = require('child_process').exec;
var script = "var exec = require('child_process').exec;exec('dir',function(e,d,er){console.log(d);});";
script = '"'+script+'"';//enclose the inline script with "" because it contains spaces
var cmd2 = 'node -e '+script;
var cd = exec('cd ../ &'+cmd2,function(err,stdout,strerr)
{
    console.log(stdout);//this would work
}) 
```

如果您只想更改当前目录，您应该查看有关它的文档[http://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback](http://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-11-17T18:58:56.123

您可以使用 nodejs promisify 和 async/await：

```
const { promisify } = require('util');
const exec = promisify(require('child_process').exec);

export default async function () {
  const cpu = await exec('top -bn1');
  const disk = await exec('df -h');
  const memory = await exec('free -m');

  const payload = {
    cpu,
    disk,
    memory,
  };

 return payload
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-03T11:31:49.303

如果您想先使用`cd`，最好使用`process.chdir('~/')`. 然后单身`exec()`将完成这项工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-07T15:45:23.417

您可以使用 cwd 参数调用 exec，如下所示：

```
exec('ls -a', {
    cwd: '/Users/user'
}, (err, stdout) => {
    if (err) {
        console.log(err);           
    } else {
        console.log(stdout);
    }
}) 
```

但请注意，cwd 不理解 '~'。您可以改用 process.env.HOME。

# javascript - 函数声明不应放在块中。使用函数表达式或将语句移动到外部函数的顶部

> ID：14427077
> 
> 赞同：17
> 
> 时间：2013-01-20T17:18:58.303
> 
> 标签：javascript, jslint, jshint

我有以下代码：

```
if (typeof console === "object" && typeof console.error === "function") {
    function e(msg) {"use strict"; console.info(msg);}
} 
```

对于哪个 jsLint 给出以下错误：

> 函数语句不应放在块中。使用函数表达式或将语句移动到外部函数的顶部。

为什么会出现此错误，这是什么意思？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2014-11-05T22:18:30.140

## 解释

从关于警告[功能语句的 jsLintErrors 页面不应将其放在块中](https://github.com/jamesallardice/jslint-error-explanations/blob/master/message-articles/function-in-block.md)：

> 引发此错误是为了突出显示**可能无法按预期工作的代码**。在大多数环境中，您的代码将毫无错误地运行，但可能不会以您期望的方式运行。在某些环境中，它可能会导致**致命的语法错误**。
> 
> 这是因为`Function`声明被提升到它们出现*的范围的顶部。*
> 
> ### 因此，不可能使用块语句*有条件*地声明函数。

## 例子

让我们通过一个简单的例子来探讨这个问题引发的问题：

```
if (true) {
    function example() {
        console.log('hello');
    }
} 
```

**最好的情况**是您的代码令人困惑。在上面的例子中，看起来你想做的只是在条件为真时声明对函数*的*访问。然而，当函数被提升到作用域的顶部时，它实际上会被解释为：

```
function example() {
    console.log('hello');
}
if (true) {} 
```

这是危险的，因为它看起来不像您根据原始代码所期望的那样。条件块实际上是空的（并且是不必要的），并且每个人都可以访问该函数，无论条件评估为真还是假。

**最坏的情况**是浏览器不明白如何处理嵌套函数，并在尝试使用它时抛出语法错误。这取决于运行 JavaScript 的引擎。Firefox 似乎就是这样一种引擎。如果在 Firefox 中运行以下代码，在执行以下代码时会抛出错误：

```
if (true) {
    example();
    function example() {
        console.log('hello');
    }
}
```

如果您打开控制台，您应该会看到以下错误：

![ReferenceError：未定义示例](../Images/3c67b40cf5fd9e5ddd895339edd2dee2.png)

## 解决方案

那么你怎么能解决这个问题呢？

### 使用函数赋值而不是函数声明

这是一个快速细分：

```
// Declaration
function declarationFunction() {}

// Assignment
var assignmentFunction = function() {} 
```

**函数分配**不会提升到范围的顶部*。*
**函数声明**被提升到范围的顶部。

因此，要有条件地设置示例函数，只需在块中分配它，如下所示：

```
var example;
if (true) {
    example = function() {
        console.log('hello');
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-20T17:25:02.540

您不应该在 if 块内创建函数。你最好这样做：

```
var e = function(){};

if(typeof console === "object" && typeof console.error === "function"){
    e = function (msg){ ... };
} 
```

# .htaccess - .htaccess 规则优先级

> ID：14427090
> 
> 赞同：1
> 
> 时间：2013-01-20T17:20:01.473
> 
> 标签：.htaccess, mod-rewrite, operator-precedence

我有以下规则：

```
RewriteRule ^app ?page=app [QSA]
RewriteRule ^app/([0-9]+) ?page=app&id=$1 [QSA]
RewriteRule ^app/([0-9]+)/edit ?page=edit&id=$1 [QSA] 
```

我的页面打印 GET 参数。当我调用 /app 时，会打印以下内容：

```
Array ( [page] => app ) 
```

当我调用 /app/123 或 /app/123/edit 时，打印内容保持不变。但是，当我颠倒命令的顺序时，会得到不同的结果。

对于 /app/123/edit：

```
Array ( [page] => edit [id] => 123 ) 
```

对于 /app/123：

```
Array ( [page] => app [id] => 123 ) 
```

这是为什么？此外，有没有办法改变这种情况，因为以从上到下的层次顺序执行命令似乎更容易，而不是相反。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T17:23:42.740

在这种情况下，您必须使用“字符串结尾”符号`$`：

```
RewriteRule ^app$ ?page=app [QSA]
RewriteRule ^app/([0-9]+)$ ?page=app&id=$1 [QSA]
RewriteRule ^app/([0-9]+)/edit$ ?page=edit&id=$1 [QSA] 
```

否则，由于你的第一个 exp 匹配你所有的 URL 形式，它总是被使用，并且规则检查永远不会进入第 2 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T17:53:56.687

这是一个非常方便的资源：

[http://martinmelin.se/rewrite-rule-tester/](http://martinmelin.se/rewrite-rule-tester/)

第二个和第三个不匹配的原因是您的第一个规则的输出消除了初始 URI。

您想要的实际规则是：

```
RewriteRule ^(app/?.*) $1?page=app [QSA]
RewriteRule ^(app/([0-9]+)/?.*) $1?page=app&id=$2 [QSA]
RewriteRule ^(app/([0-9]+)/edit) $1?page=edit&id=$2 [QSA] 
```

在上面的测试页面上使用 app/123/edit 测试这些显示规则都匹配并应用为：

```
#   Match?  Rule    Resulting URL
1   yes RewriteRule ^(app/?.*) $1?page=app [QSA]    app/123/edit?page=app
2   yes RewriteRule ^(app/([0-9]+)/?.*) $1?page=app&id=$2 [QSA] app/123/edit?page=app?page=app&id=123
3   yes RewriteRule ^(app/([0-9]+)/edit) $1?page=edit&id=$2 [QSA]   app/123/edit?page=edit&id=123 
```

我认为测试人员没有正确处理 QSA 标志。我应该只需要在每个规则中指定新的键/值对，而不必重述之前的键/值对。QSA 应该合并它们。您的规则中的真正错误是不保留 URI。

# java - GridWorld 自定义 UnboundedGrid (2、无限)

> ID：14427094
> 
> 赞同：0
> 
> 时间：2013-01-20T17:20:27.210
> 
> 标签：java, object, gridworld

用于创建 UnboundedGrid 并显示它：

```
ActorWorld world = new ActorWorld(new UnboundedGrid<Actor>());
world.show(); 
```

用于创建 BoundedGrid（比如说 10x10）并显示它：

```
ActorWorld world = new ActorWorld(new BoundedGrid<Actor>(10, 10));
world.show(); 
```

有什么方法可以创建自定义 UnboundedGrid？通过自定义，我的意思是参数之一（列或行）不是无界的。

我检查了 UnboundedGrid 的 GridWorld 源代码，它扩展了实现 Grid 的 AbstactGrid，但我不认为有任何方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:48:31.037

最好的想法是通过扩展 AbstractGrid 自己实现它。我建议使用一个 Maps 数组，将表示列的整数与参与者映射，数组的长度表示行数。（记住，你不能有泛型数组，所以你必须使用原始类型。）像这样：

```
public class CustomUnboundedGrid<E> extends AbstractGrid<E>
{
    private Map[] data;
    private int cols;

    public CustomUnboundedGrid(int rows, int cols)
    {
        if(cols <= 0)
            throw new IllegalArgumentException();
        try
        {
            data = new Map[rows];
            for(int i = 0; i < rows; ++i)
            {
                data[i] = new HashMap();
            }
        }
        catch(NegativeArraySizeException e)
        {
            throw new IllegalArgumentException();
        }
    }
    //override methods from AbstractGrid
} 
```

# php - preg_match_all 如何找到仅指定 以结尾的标签

> ID：14427100
> 
> 赞同：0
> 
> 时间：2013-01-20T17:21:11.230
> 
> 标签：php, regex, html-parsing

我一直在玩这个，我只剩下这个......

```
preg_match_all('/<p>(.*?)<br>(.*?)<p>/s', $offices, $district); 
```

哪个工作正常......但当然有一个记录会导致问题。如何指定和获取`<p>`标签中包含`<br>`的所有文本？最好在 Eddy Lite 标签`<br>`内指定一个以上，但不包括在内？`<p>`

该字符串是一个地址，例如：

```
 <h3>District Offices:</h3>
<p>
317 Dun Avenue<br>Suite 17<br>Port Samson, AK 32675<br>
(XXX) XXX-XXXX<br> 
VOIP: 40800<br> 
FAX (888) xxx-38xx<br> 

</p>

<h4>Staff Assistants:</h4>
<p>Beth Booger and Ly Sweet</p>

<h4>Secretary:</h4>
<p>Eddy Lite </p>

<p>
OK City Hall<br>110 S.E. Five Avenue<br>3rd Floor<br>Corpse, AK 33371<br>
(xxx) 694-xxxx<br> 

</p>

<h4>Staff Assistant:</h4>
<p>Con Sims </p>

    <br />

<h3>Home Office:</h3> 
```

这就是我要返回的内容： Array ( [0] => Array ( [0] => 317 Dun Avenue Suite 17 Port Samson, AK 32675 (XXX) XXX-XXXX

```
Staff Assistants:

[1] =>

Eddy Lite 

OK City Hall
110 S.E. Five Avenue
3rd Floor
Corpse, AK 33371
(xxx) 694-xxxx
Staff Assistant:

) ) 
```

任何帮助将不胜感激。我试过：preg_match_all('/

(.*?)

/s', $offices, $district); preg_match_all('/

(.*)

/s', $offices, $district); preg_match_all('/

(. *?)
(.* ?)

/', $offices, $district); preg_match_all('/

(. *?)
(.* ?)
(.*?)

/s', $offices, $district); preg_match_all('/

(. *?)
(.* )
(.*)

/s', $offices, $district);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:36:52.667

试试这个

```
'~<p>(?=((?!</p>).)*<br>)((?!Eddy Lite).)*?</p>~s' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T17:37:05.707

一个简单的解决方法是只允许纯文本和`<br>`标签：

```
preg_match_all('#<p>([^<>]*<br\s*/?>[^<>]*)+</p>#s', $offices, $district); 
```

通常的注释：这样的正则表达式仅适用于连贯且众所周知的输入。

# orm - Laravel 为关系添加/查找关系

> ID：14427105
> 
> 赞同：1
> 
> 时间：2013-01-20T17:22:09.777
> 
> 标签：orm, laravel, relationships, eloquent

如何找到与 Eloquent ORM 的关系的关系？目前我有这样的东西。简单的关系。我可以找到图片，它是摄影师。现在我需要做一些更复杂的事情，我还需要找到摄影师标签。

**转储看起来像这样**

```
object(Image) {
    ["attributes"] => [],
    ["relationships"] =>
        ["photographer"] =>
            ["attributes"] => [],
            ["relationships"] =>
} 
```

**但我需要添加标签关系，所以它看起来像这样**

```
object(Image) {
    ["attributes"] => [],
    ["relationships"] =>
        ["photographer"] =>
            ["attributes"] => [],
            ["relationships"] =>
                ["tags"] =>
                    ["attributes"] => [],
                    ["relationships"] =>
} 
```

**这怎么可能？**

*/图像模型*

```
public function photographer()
{
    return $this->belongs_to('Photographer');
}

public function tags()
{
    return $this->has_many_and_belongs_to('Tag', 'tag_relationships');
} 
```

*/控制器*

```
$images = Image::with(['photographer'])->order_by('updated_at', 'desc')->get(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T19:32:55.203

你只需使用 laravel 的点语法：

```
Image::with(['photographer', 'photographer.tags', 'photographer.tags.categories]) .... 
```

# javascript - 通过 ID 获取选择元素的值

> ID：14427107
> 
> 赞同：0
> 
> 时间：2013-01-20T17:22:16.753
> 
> 标签：javascript, html

> **可能重复：**
> [为什么 jQuery 或诸如 `getElementById` 之类的 DOM 方法找不到元素？](https://stackoverflow.com/questions/14028959/why-does-jquery-or-a-dom-method-such-as-getelementbyid-not-find-the-element)

我确信这很明显，但是 2 小时的头部撞击。试图从我的每个选择框中获取值：

```
<table>
<tr><td>Team</td><td>Games</td><td>Players</td></tr>
<tr><td><div id="selTeam">
<select name="teams" id="teams" onChange="sndReq(this)"  >
  <option value="-1">-- Not Set --</option>
</select>
</div></td>
<td><div id="selGames">
<select name="games" id="games" onChange="sndReq(this)" )" >
  <option value="-1">-- Not Set --</option>
</select>
</div></td>
<td><div id="selPlayers">
<select name="players" id="players" onChange="sndReq(this)" )" >
  <option value="-1">-- Not Set --</option>
</select>
</div></td></tr>
</table> 
```

这是我正在使用的 javascript，getElementById 一直返回 null。

```
 var selbox = document.getElementById("teams");
        var idx = selbox.selectedIndex;
        var teamValue = selbox.options[idx].value;

        var selbox = document.getElementById("games");
        var idx = selbox.selectedIndex;
        var gameValue = selbox.options[idx].value;

        var selbox = document.getElementById("players");
        var idx = selbox.selectedIndex;
        var playerValue = selbox.options[idx].value; 
```

我试图不使用 JQuery。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:29:27.000

这些是`document.getElementById("teams");`可能返回的一些原因`null`：

1.  文档中没有带有 的对象`id="teams"`。
2.  在加载内容之前，您在文档加载过程中过早地运行代码。`<body>`您可以在相关内容的末尾运行此代码。您无法从该`<head>`部分运行此代码。
3.  您有某种 HTML 错误导致`id="teams"`无法正确解释。
4.  HTML 正在页面中动态插入（通过其他一些 javascript），因此在您运行代码时它不存在。在这种情况下，您必须等到将其插入文档后才能查找它。
5.  HTML 在一个框架中，因此您在错误的文档中查找它。

最常见的错误是您过早地运行代码，您必须在运行代码之前等待 DOM 加载，或者您必须在`<body>`之前从标记末尾触发代码`</body>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T17:31:45.760

你的代码很好。这是一个[工作示例](http://jsfiddle.net/daAFs/1/)。确保在呈现 HTML 后运行 JS。要么把它放在身体的底部，要么把它跑进去`window.onload`。

这应该可以正常工作：

```
<table>
<tr><td>Team</td><td>Games</td><td>Players</td></tr>
<tr><td><div id="selTeam">
<select name="teams" id="teams" onChange="sndReq(this)"  >
  <option value="-1">-- Not Set --</option>
</select>
</div></td>
<td><div id="selGames">
<select name="games" id="games" onChange="sndReq(this)" )" >
  <option value="-1">-- Not Set --</option>
</select>
</div></td>
<td><div id="selPlayers">
<select name="players" id="players" onChange="sndReq(this)" )" >
  <option value="-1">-- Not Set --</option>
</select>
</div></td></tr>
</table>
<script type="text/javascript" language="javascript">
        var selbox = document.getElementById("teams");
        var idx = selbox.selectedIndex;
        var teamValue = selbox.options[idx].value;

        var selbox = document.getElementById("games");
        var idx = selbox.selectedIndex;
        var gameValue = selbox.options[idx].value;

        var selbox = document.getElementById("players");
        var idx = selbox.selectedIndex;
        var playerValue = selbox.options[idx].value;
</script> 
```

# cocoa - 应用程序许可证生成器

> ID：14427111
> 
> 赞同：12
> 
> 时间：2013-01-20T14:57:30.553
> 
> 标签：cocoa, licensing

我正在使用 XCode 和 Objective C (Cocoa) 为 OSX 开发一个应用程序，我需要一个系统来为每个销售的应用程序生成许可证。

系统必须

*   生成无过期序列号
*   生成过期的序列号（试用版）
*   处理黑名单
*   包含用于从 OSX 应用程序输入和检查许可证号的 API

有什么可以做的还是我应该自己实现？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-20T18:10:42.443

我会以三种方式中的一种来实现这一点，这取决于我有多偏执。

您使用的语言无关紧要。

## 方法 1：RSA 签名的许可证

如果您对有人对您的许可证生成器进行逆向工程感到偏执，这就是您使用的方法。您生成一个 RSA 密钥对，并将公钥与应用程序捆绑在一起。每个许可证号都使用私钥签名，应用程序使用公钥验证签名。由于您是唯一拥有私钥的人，因此有人能够为您的应用程序制作许可证生成器的危险几乎为零。

缺点：许可证密钥*很长，*可能至少有 200 个字符长（四行文本）。用户不想输入这些，他们将不得不复制和粘贴。

好处：任何人编写许可证生成器的可能性几乎为零。没有经常性费用。

## 方法 2：HMAC 签名的许可证

如果您不那么偏执，这就是您使用的方法。使用 HMAC 和私钥对许可证进行签名，但私钥必须与您的应用程序捆绑在一起。您可以对其进行混淆处理，但聪明人总是可以*从*您的应用程序中提取密钥。

缺点：许可证生成器是可能的。

优点：快捷键。您可以选择使用截断的 HMAC；64 位签名可能“足够好”，并且只有 16 个以 16 为基数的字符。没有经常性成本。

## 方法三：在线验证

这种方法既偏执又方便，但它需要用户有互联网连接，并且需要运行服务器。每个许可证只是一个随机字符串。您服务器上的数据库将随机字符串映射到许可证。当用户注册应用程序时，它会向您的服务器发出 HTTP 请求以获取与指定字符串对应的许可证信息。服务器使用 RSA 签名的许可证进行回复。

缺点：服务器的经常性成本。没有互联网连接无法注册。方便您检测盗版密钥。

优点：快捷键。没有许可证生成器。许可证撤销很容易。那些担心你会倒闭的人的销售损失。

## 临时许可证

临时许可证也可以通过三种方式完成。

1.  在线的

2.  签署的到期日

3.  签署的许可条款

显然，如果您使用已签署的许可条款，那么如果用户不道德，他们将能够清除他们的偏好以重新启动许可条款。 **不要**试图在用户找不到的地方隐藏许可条款信息，这违背了用户对您的应用程序不会做任何恶意的信任。如果我在我的计算机上发现任何隐藏数据的应用程序，我会删除该应用程序并拒绝从开发人员那里购买任何东西，我相信其他一些用户也会有同样的感觉。

## 黑名单

如果您是在线许可证服务器，这很容易——黑名单在服务器上。否则，您将不得不将您的黑名单与应用程序捆绑在一起，并且它只会在您每次发布新版本时更新。

有一个问题是是否阻止那些使用盗版许可证的人。这个问题没有一个明显的答案：您可能认为直接阻止盗版许可证会更好，但接受带有警告消息的盗版许可证实际上是出售新许可证的机会。

## 编码

我相信您可以想出自己的编码许可证的方式。我见过使用 Base 32，这很好，因为它很难被误读（与 Base 64 不同）。我还看到使用交替的字母和数字组的方案，这很好，因为在读取长键时很容易记住你的位置。

## 许可证密钥剖析

以下是使用 HMAC 的离线许可证密钥的示例方案：

```
AAXX-XXXX-YYYY-ZZZZ-ZZZZ-ZZZZ-ZZZZ

```

*   `AA`：产品名称，缩写为两个字母
*   `XXXXXX`: 一个随机数
*   `YYYY`：到期日期，自 2013 年 1 月 1 日以来的天数，或 0 表示无限制
*   `ZZZZZZZZZZZZZZZZ`: 密钥第一部分的签名

对于 RSA 密钥，该`ZZZ...`部分会*很长*。

使用在线密钥服务器时，密钥只需`ZZZ...`而且不必很长（12 或 16 个字符）。

## 关于开裂的注意事项

无论您选择何种方案，都**无法阻止他人破解您的应用程序。**聪明的工程师可以反汇编您的应用程序并禁用许可检查。你用来阻碍他们的任何技术只会减慢他们的速度，而不是阻止他们。

# c# - 在实体框架中保存实体的通用方法

> ID：14427113
> 
> 赞同：2
> 
> 时间：2013-01-20T17:23:09.653
> 
> 标签：c#, entity-framework, repository-pattern

我正在尝试编写一个将由其他存储库使用的 GenericEFRepository。我有一个保存方法如下。

```
public virtual void Save(T entity) // where T : class, IEntity, new() And IEntity enforces long Id { get; set; }
{
    var entry = _dbContext.Entry(entity);

    if (entry.State != EntityState.Detached)
        return; // context already knows about entity, don't do anything

    if (entity.Id < 1)
    {
        _dbSet.Add(entity);
        return;
    }

    var attachedEntity = _dbSet.Local.SingleOrDefault(e => e.Id == entity.Id);
    if (attachedEntity != null)
        _dbContext.Entry(attachedEntity).State = EntityState.Detached;
    entry.State = EntityState.Modified;
} 
```

您可以在以下代码的注释中找到问题

```
 using (var uow = ObjectFactory.GetInstance<IUnitOfWork>()) // uow is implemented like EFUnitOfWork which gives the DbContext instance to repositories in GetRepository
 {
    var userRepo = uow.GetRepository<IUserRepository>();

    var user = userRepo.Get(1);
    user.Name += " Updated";

    userRepo.Save(user);
    uow.Save(); // OK only the Name of User is Updated 
 }

 using (var uow = ObjectFactory.GetInstance<IUnitOfWork>())
 {
    var userRepo = uow.GetRepository<IUserRepository>();

    var user = new User 
    {
        Id = 1,
        Name = "Brand New Name"
    };

    userRepo.Save(user);
    uow.Save();

    // NOT OK
    // All fields (Name, Surname, BirthDate etc.) in User are updated
    // which causes unassigned fields to be cleared on db
 } 
```

我能想到的唯一解决方案是通过存储库创建实体，存储`userRepo.CreateEntity(id: 1)`库将返回一个附加到 DbContext 的实体。但这似乎很容易出错，任何开发人员仍然可以使用`new`关键字创建实体。

您对这个特定问题有什么解决方案建议？

注意：我已经知道使用 GenericRepository 和 IEntity 接口的优缺点。所以，“不要使用 GenericRepository，不要使用 IEntity，不要在每个实体中放一个长 Id，不要做你想做的事情”评论将无济于事。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T20:51:52.697

是的，它很容易出错，但这就是 EF 和存储库的问题。您必须在设置要更新的任何数据（`Name`在您的情况下）之前创建实体并附加它，或者您必须为要保留的每个属性而不是整个实体设置修改状态（正如您再次想象的那样，开发人员可能会忘记这样做那）。

第一个解决方案导致您的存储库上的特殊方法这样做：

```
public T Create(long id) {
    T entity = _dbContext.Set<T>().Create();
    entity.Id = id;
    _dbContext.Set<T>().Attach(entity);
    return entity;
} 
```

第二种解决方案需要类似

```
public void Save(T entity, params Expression<Func<T, TProperty>>[] properties) {

    ...

    _dbContext.Set<T>().Attach(entity);
    if (properties.Length > 0) {
        foreach (var propertyAccessor in properties) {
            _dbContext.Entry(entity).Property(propertyAccessor).IsModified = true;
        }
    } else {
        _dbContext.Entry(entity).State = EntityState.Modified;
    }
} 
```

你会这样称呼它：

```
userRepository(user, u => u.Name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T20:49:42.093

这是这种方法的一个基本问题，因为您希望存储库神奇地知道您更改了哪些字段以及您没有更改哪些字段。如果是有效值，则`null`用作“未更改”的信号不起作用`null`。

您需要告诉存储库您想要写入哪些字段，例如发送`string[]`带有字段名称的 a 。或者每个字段一个布尔值。我认为这不是一个好的解决方案。

也许您可以像这样反转控制流：

```
var entity = repo.Get(1);
entity.Name += "x";
repo.SaveChanges(); 
```

这将允许更改跟踪工作。它更接近 EF**的**使用方式。

选择：

```
var entity = repo.Get(1);
entity.Name += "x";
repo.Save(entity); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T07:36:14.983

虽然其他两个答案很好地了解了如何避免这个问题，但我认为值得指出几件事。

*   您正在尝试做的事情（即代理实体更新）以 EF 为中心，而 IMO 实际上在 EF 上下文之外没有意义，因此期望通用存储库以这种方式运行是没有意义的。
*   实际上，您甚至还没有完全正确地获得 EF 的流程，如果您附加一个已设置几个字段的对象，除非您修改值或设置修改标志，否则 EF 将简化您告诉它的当前数据库状态。要在没有选择的情况下执行您正在尝试的操作，您通常会附加一个*没有*名称的对象，然后在附加 ID 对象后设置名称
*   您的方法通常用于性能原因，我建议通过在现有框架的顶部进行抽象，您几乎总是会遭受一些逻辑性能下降。如果这很重要，也许您不应该使用存储库？您添加到存储库中以满足性能问题的次数越多，它变得越复杂和限制越多，并且提供多个实现变得越困难。

话虽如此，我确实认为您可以在一般情况下处理这种特殊情况。

这是你可以做到的一种可能的方式

```
public void UpdateProperty(Expression<Func<T,bool>> selector, FunctionToSetAProperty setter/*not quite sure of the correct syntax off the top of my head*/)
{
   // look in local graph for T and see if you have an already attached version
   // if not attach it with your selector value set
   // set the property of the setter
} 
```

希望这是有道理的，我不在我的开发箱 atm 旁边，所以我不能真正做一个工作样本。

我认为对于通用存储库来说这是一种更好的方法，因为它允许您以多种不同的方式实现相同的行为，abovc 可能适用于 EF，但如果您有一个内存存储库（例如），则会有不同的方法。这种方法允许您实现不同的实现来满足意图，而不是将您的存储库限制为仅像 EF 一样工作。

# sql-server - Access 中的 SQL 存储过程超时

> ID：14427115
> 
> 赞同：3
> 
> 时间：2013-01-20T17:23:15.403
> 
> 标签：sql-server, ms-access, stored-procedures, vba

从 Access VBA 执行时，以下 SP 超时。从管理控制台执行时它工作正常。如果相关，服务器确实有很长的 ping 时间：

```
Dim cnn As ADODB.Connection
Dim cmd As New ADODB.Command, rs As New ADODB.Recordset, param As New ADODB.Parameter
Dim fld As ADODB.Field
Dim stMessage As String

Set cnn = New ADODB.Connection
cnn.ConnectionString = "DRIVER=SQL Server;SERVER=server01;DATABASE=db_a;Trusted_Connection=Yes"

cnn.Open cnn.ConnectionString

Set cmd = New ADODB.Command
cmd.ActiveConnection = cnn
cmd.CommandType = adCmdStoredProc

    cmd.CommandText = "we_ci_db.stprUpdateValuesInitial_A"

    Set param = cmd.CreateParameter("@DataSet", adInteger, adParamInput, , stDataSet)
    cmd.Parameters.Append param

    rs.CursorType = adOpenStatic
    rs.CursorLocation = adUseClient
    rs.LockType = adLockOptimistic

    Set rs = cmd.Execute

exit1:
Set cmd = Nothing
Set rs = Nothing
Exit Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T17:53:32.877

`CommandTimeout`您可以使用对象的属性设置超时`ADODB.Command`：

```
// set a very high number of seconds before timeout
cmd.CommandTimeout = 9999999 
```

# c# - 为什么我不断收到：无法将类型字符串隐式转换为布尔类型？

> ID：14427117
> 
> 赞同：0
> 
> 时间：2013-01-20T17:23:38.907
> 
> 标签：c#

我是 C# 新手，我无法弄清楚这段代码有什么问题。我正在创建一个测验，如果答案是正确的，我试图说做得好，但它不断提出不能隐式地将类型字符串转换为类型 bool。

这是我的代码：

```
{
    int score = 0;
    Console.WriteLine(" What is your name?");
    string name = "";
    name = Console.ReadLine();

    Console.WriteLine("Hello " +name+ " and welcome to the Formula 1 quiz.");
    Console.ReadLine();

    Console.WriteLine("Question 1: How many races has Michael Schumacher won.");
    Console.ReadLine();

    Console.WriteLine("a) 91");
    Console.WriteLine("b) 51");
    Console.WriteLine("c) 41");
    Console.WriteLine("d) 31");

    Console.ReadLine();
    string answer = Console.ReadLine();

    if (answer = a) Console.WriteLine("Well done");
    else Console.WriteLine("Wrong answer");
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T17:24:43.647

改变：

```
if (answer =  a) 
```

至

```
if (answer ==  "a") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T17:26:26.737

您在此处的语句中使用了赋值运算符 ( `=`) `if`：

```
if (answer =  a) 
```

从外观上看，您想将他们输入的内容与 字符串进行比较`a`，因此您需要首先使用比较运算符 ( `==`)，然后将其与字符串进行实际比较：

```
if (answer == "a")
    Console.WriteLine("Well done");
else
    Console.WriteLine("Wrong answer"); 
```

Visual Studio（或您正在使用的任何 IDE）应该已经真正了解了这一点，因为`a`它是未声明的（或 a `bool`）。

* * *

在一个不相关的注释中，因为上述问题已经得到解答，您可以在此处将变量声明和赋值更改为在同一行，因为不需要将声明和赋值分开。

```
string name = "";
name = Console.ReadLine(); 
```

至：

```
string name = Console.ReadLine(); 
```

# scheme - 编写一个由 car 和 cdr 组成的表达式，它将从列表中返回 c '(a (bc) (d))

> ID：14427123
> 
> 赞同：1
> 
> 时间：2013-01-20T17:24:18.733
> 
> 标签：scheme, racket

编写一个由 car 和 cdr 组成的表达式，它将从列表中返回 c `'(a (b c) (d))`。

我正在使用名为 Dr Racket 的程序

我试过了

```
(car (car (car (cdr '(a (b c) (d)))))) 
```

自己获得 c 但它不起作用。

错误指出：

```
mcar: contract violation
expected: mpair?
given: b 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T17:33:16.153

您的代码中有一个小错误：请注意，您需要外部列表中的第二个元素（这是一个内部列表）的第二个元素。您的代码说明：检索列表第二个元素的第一个元素的第一个元素：

```
(car (car (car (cdr '(a (b c) (d)))))) 
```

...这会导致错误。你的意图是这样的：

```
(car (cdr (car (cdr '(a (b c) (d)))))) 
```

让我们一步一步看：

```
(cdr '(a (b c) (d))) ; => '((b c) (d)) : rest of the outer list
(car (cdr '(a (b c) (d)))) ; =>  '(b c) : second element of the outer list
(cdr (car (cdr '(a (b c) (d))))) ; => '(c) : rest of the inner list
(car (cdr (car (cdr '(a (b c) (d)))))) ; => 'c : second element of the inner list 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T06:59:07.750

```
(cadadr '(a (b c) (d))) 
```

`cadadr`是语法糖`(car (cdr (car (cdr ...)))`

# jquery - IE 问题 - Ajax 在 PRE 标记中加载内容

> ID：14427127
> 
> 赞同：1
> 
> 时间：2013-01-20T17:24:47.250
> 
> 标签：jquery, css, ajax, internet-explorer, pre

我在使用 IE8 时遇到以下问题：我像这样进行简单的 ajax 调用

```
 $.ajax({
            type: "POST",
            cache: false,
            url: "UpdateMessage.php",
            data: {msgID : msgID} ,     
            success:function(RETdata)
                   {    
                       pre.html(RETdata);
                   }                                    
         }); 
```

接收到的数据只是来自 MySQL 数据库的普通文本。文本加载到 pre 标记中，这引发了问题。PRE 标记不会按应有的方式处理新加载的文本。例如，如果文本中有新行 ('\r\n')，它们都会消失。

重新加载整个网页后，完全相同的文本在 pre 标记中看起来正确。另外我提供了 pre 标签的 css 代码

```
 pre{
     word-wrap: break-word;
     outline-width:0;
     MIN-HEIGHT: 50px; 
     OVERFLOW-Y: hidden;
     OVERFLOW-X:auto; 
    } 
```

但我认为，我的 css 代码不是实际问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:28:03.350

我相信你最好使用：

```
pre.text(data); 
```

# javascript - 在表中添加 n 删除具有唯一 id 元素的行

> ID：14427129
> 
> 赞同：1
> 
> 时间：2013-01-20T17:25:12.417
> 
> 标签：javascript, jquery, html, jquery-ui

这是一个演示表

```
<table id="table1">
<tr>
<td><label>name</label><input type="text" id= "name1"/></td>
<td><label>age</label><input type="text" id= "age1"/></td>
<td><input type="button" id= "addRow"style="background-image:url("images/addicon.png");"/></td>
</tr> 
```

和 jquery 代码 m 尝试是

```
 $("#addRow").live("click", function (e, index) {
 var val = ("#table1 tr").length();
 val++;
    $('#table1  tbody > tr:last').after('<tr><td><label>name</label><input type="text" id= "name"'+val+'/></td><td><label>age</label><input type="text" id= "age"'+val+'/></td><td><input type="button" id= "addRow"style="background-image:url("images/addicon.png");"/></td><td><input type=button  id="deleteRow" style="background-image:url("images/removeicon.png");"></td>');
  });
  $("#deleteRow").live("click",function(e,index){
     $(this).parent().closest("tr").remove();
  }); 
```

现在问题来了，当有人添加一行 2 次并删除一行时，即 val 将是 name2，name3 假设 name2 被删除然后再次添加行号。行数为 2，因此 val++ 结果为 3，新行将 name3 作为 id，这对我来说是个问题。我真正想要的是，我应该保持行数 1 2 3 ... 像这样，不管删除什么行。任何人都可以帮我解决这个问题，我已经阅读了大量教程，但没有一个人保持统一的行数，这是你提出的这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:29:56.177

您可以使用输入名称，例如`name[]`在表单中有一个值数组。这比使用 , 等更容易`name1`。`name2`如果您关心的是标签，您可以将输入包装在标签中并跳过`for`，如下所示：

```
<label>String: <input></label> 
```

单击`String:`聚焦输入。

如果您想坚持现有的，只需`val`在外部存储一个范围`.click`并每次增加它。不要依赖长度。

* * *

顺便说一句，您还应该切换`.live`到`.on`假设它可用。

# java - 应用服务器上的jar部署

> ID：14427135
> 
> 赞同：4
> 
> 时间：2013-01-20T17:25:55.940
> 
> 标签：java, deployment, java-ee-6, jboss7.x

我有一个可执行的 jar，想将它部署到应用服务器（jBoss AS 7.X）。

我不能直接选择企业应用程序项目结构，因为此应用程序不需要任何 Web 容器。此外，它也不需要任何接口并通过消息代理进行内部通信。
我已将其开发为普通的 java 应用程序。对于与其他模块的通信，它使用 AMQP 服务器，例如 RabbitMQ。

```
Benefits for deploying on server
  - Centralization of all modules
  - Deployment is easy
  - Scalable 
```

将其作为独立应用程序运行需要单独启动和管理所有模块，这对于业务用户来说并不容易。

另一个问题是它在文件系统中有一些配置文件，并且不能将它们放在 jar 中，因为它们可能需要在运行时更新。

我也不能拥有企业应用程序结构，因为 EE 容器中的所有模块都不是基于 Java 的（具有不同的平台，例如 .NET）并且具有不同的架构。
我是Java平台的新手，所以建议我出路。还为此建议任何更好的架构，如果 jBoss 不是解决方案。

# mysql - MySQL中的临时表定义

> ID：14427138
> 
> 赞同：0
> 
> 时间：2013-01-20T17:26:21.410
> 
> 标签：mysql, sql, stored-procedures, temp-tables

我有一个使用临时表的存储过程，以便我可以总结某个产品类别中所有产品的销售情况。当我尝试运行代码时它失败了。我在 google 和 stackoverflow 上搜索，但找不到我做错了什么。我在 Windows Server 上使用 MySQL 服务器 5.5。

```
CREATE PROCEDURE `getStatistics`(IN `startDate` date,IN `endDate` date,IN  `categoryName` varchar)
BEGIN
    CREATE TEMPORARY TABLE procResult(productName VARCHAR, amount INT);
    CREATE TEMPORARY TABLE tblProductID(SELECT ID, `name` FROM product WHERE categoryID = (SELECT ID FROM category WHERE `name` = categoryName));
    DECLARE done_amt, done_PID INT DEFAULT FALSE;
    DECLARE amount, productID INT DEFAULT 0;
    DECLARE pidCursor CURSOR FOR SELECT ID, `name` FROM tblProductID;
    DECLARE amtCursor CURSOR FOR SELECT orderlines.amount FROM orderlines WHERE orderlines.productID = productID;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done_amt = TRUE;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done_PID = TRUE;

    OPEN pidCursor;

    pid_loop:LOOP
        DECLARE productName VARCHAR;
        FETCH pidCursor INTO productID, productName;

        IF done_PID THEN
            LEAVE pid_LOOP;
        END IF;

        OPEN amtCursor;

        amt_loop:LOOP
            DECLARE tmpAmount INT DEFAULT 0;
            FETCH amtCursor INTO tmpAmount;

            IF done_amt THEN
                LEAVE amt_loop;
            END IF;

            amount = amount + tmpAmount;
        END LOOP;

        CLOSE amtCursor;

        IF amount > 0 THEN
            INSERT INTO procResult VALUES (productName, amount);
            amount = 0;
        END IF;
    END LOOP;

    CLOSE pidCursor;
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:12:13.497

1.  您必须定义类型变量的长度[`VARCHAR`](http://dev.mysql.com/doc/en/char.html)，例如`categoryName`存储过程的参数；

2.  您必须在[复合语句块](http://dev.mysql.com/doc/en/begin-end.html)的最开始，在任何其他命令之前[`DECLARE`](http://dev.mysql.com/doc/en/declare.html)使用所有局部变量；[`BEGIN ... END`](http://dev.mysql.com/doc/en/begin-end.html)

3.  您的 for 语法[`CREATE TABLE ... SELECT`](http://dev.mysql.com/doc/en/create-table-select.html)不正确；

4.  您已经为同一个 SQL 条件声明了两个处理程序，其中只有一个将被执行（[不确定](http://dev.mysql.com/doc/refman/5.6/en/handler-scope.html)）；

5.  您需要更改客户的语句分隔符，以便它了解出现在过程主体中的分号不会终止[`CREATE PROCEDURE`](http://dev.mysql.com/doc/en/create-procedure.html)语句；

6.  您的整个过程是在 SQL 中执行一项相当简单的任务的极其复杂的方法：

    ```
    CREATE TEMPORARY TABLE procResult
      SELECT   product.name, SUM(orderlines.amount) AS amount
      FROM     orderlines
          JOIN product  ON  product.ID = orderlines.productID
          JOIN category ON category.ID = product.categoryID
      WHERE    category.name = ?
      GROUP BY product.ID
      HAVING   amount > 0 
    ```

# c - 将现有 C 代码移植到 ARMv7

> ID：14427139
> 
> 赞同：0
> 
> 时间：2013-01-20T17:26:23.423
> 
> 标签：c, embedded, arm

我最近获得了一个音频解码器的源代码，当使用 MSVC 编译时，它可以在 Windows 上正常执行。

我被分配了将这个解码器（用 c 编写）移植到 ARMv7 平台的工作。

由于我对这个领域完全陌生，我不知道该怎么做。我已经用谷歌搜索了很多，但找不到很多适用于我的特定案例的内容。

任何有关如何关闭这样一个端口的建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T17:47:47.680

编译它，看看什么中断是一个很好的起点。

ARM 是 32 位目标，现成的基于 ARM 的微控制器总是像 x86 一样小端，因此移植代码通常很少出现问题。

如果代码对 Win32 进行操作系统调用，或使用未移植到 ARM 的第三方库，那么您当然需要删除这些依赖项或移植到目标环境。同样，如果代码使用基于 PC 的硬件，例如声卡，那肯定需要进行调整。

如果代码质量在第一个实例中具有足够的可移植性，那么简单处理数据的代码和算法应该直接移植。然而，需要避免未定义或实现定义的编译器行为，因为这可能会在编译器和目标之间有所不同。

# routing - Vanet B-MFR路由协议在ns2上的实现

> ID：14427140
> 
> 赞同：0
> 
> 时间：2013-01-20T17:26:23.310
> 
> 标签：routing, ns2

无论如何用ns2实现VANET的B-MFR路由协议？我在互联网上搜索了几天，但一无所获。我找到了讨论带有 ns2 实现的协议的论文/期刊，这是[链接](http://research.ijcaonline.org/volume48/number10/pxc3880153.pdf)。但是，我仍然对如何用 ns2 实现它一无所知

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:52:11.827

由于您找不到任何 ns2 的实现，您可以尝试从头开始实现它。

例如[，本文档](http://imtl.skku.ac.kr/~hjlim99/ns2/%5b%BB%F5%B7%CE%BF%EE%20%B6%F3%BF%EC%C6%C3%20%C7%C1%B7%CE%C5%E4%C4%DD%20%B1%B8%C7%F6%5d/Implementing%20a%20New%20Manet%20Unicast%20Routing%20Protocol%20in%20ns2.pdf)详细说明了您将如何进行。

总之，您必须为协议定义数据包类型，然后定义路由代理（包括挂钩、计时器和代理）和路由表。

否则，您可以要求论文的作者与您分享他们的代码。他们可能会这样做。

# javascript - 如何在 document.write 中动态更改 iframe 的大小

> ID：14427142
> 
> 赞同：0
> 
> 时间：2013-01-20T17:26:27.830
> 
> 标签：javascript, html, css

这是我的代码。我也想知道为什么我的搜索只需要一个词。例如，如果我输入“blue sky”，它只会使用 blue 这个词。

```
</script>

        document.write("<iframe src=\http://www.bing.com/search?q="  + decodeURIComponent(search) + "\"        width=\"100\%\" height=\"500\">");
        document.write("</iframe>");

         </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:39:07.597

只需向 iframe 添加一个类，您就可以使用 Javascript、使用 jQuery 的 JS、CSS 等来操作它...

# matrix - 如何在 GLKit 场景图中实现原点/锚点？

> ID：14427149
> 
> 赞同：1
> 
> 时间：2013-01-20T17:27:34.693
> 
> 标签：matrix, glkit, scenegraph

我正在尝试使用 GLKit 在 iOS 上实现一个简单的场景图，但处理原点/锚点让我很适应。要求非常简单：

*   有一个节点图，每个节点都有平移、旋转、比例和原点。
*   每个节点将上面的属性组合成一个矩阵（如果它有父节点，则乘以它的父矩阵）。
*   节点需要尊重其父级的坐标系，包括原点（即禁止平移等。子级的原点应与父级的原点对齐）

所以问题是：

需要执行哪些操作（例如translationMatrix * rotationMatrix * scaleMatrix 等）以及以什么顺序来实现对原点/锚点的正确处理？

PS - 如果您愿意发布答案，请提及您的答案是基于列还是行主要矩阵 - 这对我来说是一个常年的困惑来源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-23T17:16:28.227

看看**SpriteKit**和**SceneKit**。这两个 API 都提供了在 iOS 上创建场景图的构建块。

# excel - VB Excel - 查找匹配项

> ID：14427150
> 
> 赞同：0
> 
> 时间：2013-01-20T17:27:34.980
> 
> 标签：excel, vba

我想创建一个宏来执行以下操作：在 Excel 表中

```
A B C
------
a
b
c
d 
```

`C`例如，我将在列中粘贴数据

```
A B C
------
a   b
b   b
c   f
d 
```

我正在寻找的结果是找到匹配的数量，`A`如果`B`不匹配，则将元素添加到列`A`中，如下所示：

```
A B C
-----
a   b
b 2 b
c   f
d
f 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T06:00:01.643

该子例程将计算 C 列中匹配项的数量，并在 B 列中打印结果。

```
Sub MatchColumnAtoColumnC()
Dim rngA as Range
Dim rngC as Range
Dim cl as Range

Set rngA = Range("A1",Range("A1").End(Xldown))
Set rngC = rngA.Offset(0,2)

For Each cl in rngA
    cl.Offset(0,1).Value = CountIf(cl,rngC)
Next

End Sub 
```

# android - 如何在 Andengine Base 游戏活动中使用比率分辨率策略时覆盖 onSetContentView

> ID：14427152
> 
> 赞同：7
> 
> 时间：2013-01-20T17:27:45.100
> 
> 标签：android, andengine, andengine-gles-2

我正在开发（学习构建 :) 一款带有`andengine GLES2`. 我正在使用**Base game activity**，并覆盖`setContent`视图以放置我的 admob 广告。
一切正常，除了分辨率策略。
**比率分辨率政策**是我正在使用的政策`CAMERA_WIDTH = 800; and CAMERA_HEIGHT = 480;`

问题是，无论何时被覆盖，`onsetContentView`场景都不会与中心对齐，并且边距仅显示在底部而不是两者：顶部和底部。水平对齐时也会发生同样的情况：边距将仅显示在右侧，而不是两侧。我该如何纠正这个？我在下面给出我的代码：

```
@Override
protected void onSetContentView() {

    System.out.println("Content setting");
    this.mRenderSurfaceView = new RenderSurfaceView(this);

    final LayoutParams layoutParams = new LayoutParams(
            android.view.ViewGroup.LayoutParams.MATCH_PARENT,
            android.view.ViewGroup.LayoutParams.MATCH_PARENT);

    layoutParams.gravity = Gravity.LEFT ;

    final android.widget.FrameLayout.LayoutParams surfaceViewLayoutParams = new FrameLayout.LayoutParams(
            layoutParams);

    adView = new AdView(this, AdSize.BANNER, "xxxxxxxxxxxxx");

    final FrameLayout.LayoutParams adViewLayoutParams = new FrameLayout.LayoutParams(
            FrameLayout.LayoutParams.WRAP_CONTENT,
            FrameLayout.LayoutParams.WRAP_CONTENT, Gravity.LEFT
                    );

    final FrameLayout frameLayout = new FrameLayout(this);
    final FrameLayout.LayoutParams frameLayoutLayoutParams = new FrameLayout.LayoutParams(
            FrameLayout.LayoutParams.FILL_PARENT,
            FrameLayout.LayoutParams.FILL_PARENT,Gravity.CENTER);

    frameLayout.addView(this.mRenderSurfaceView, surfaceViewLayoutParams);
    frameLayout.addView(adView, adViewLayoutParams);

    this.setContentView(frameLayout, frameLayoutLayoutParams);
    this.mRenderSurfaceView.setRenderer(this.mEngine, this);

} 
```

这是我得到的图像，如果您选择图像，您可以看到场景下方的白边（由于堆栈溢出，它没有引起注意也有白色背景）

![在此处输入图像描述](../Images/a8444c8e819f969379941e8e79dd11ab.png)

任何建议都会对我很有帮助

我该如何解决这个问题请帮助我

谢谢大家，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:49:25.607

固定的：

在与布局的游戏之后，我能够解决这个问题。

现在我的表面视图与中心对齐，并且广告以所需的方式显示。

这是我的代码

```
@Override
protected void onSetContentView() {

    final RelativeLayout relativeLayout = new RelativeLayout(this);
    final FrameLayout.LayoutParams relativeLayoutLayoutParams = new FrameLayout.LayoutParams(
            RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.FILL_PARENT);

    this.mRenderSurfaceView = new RenderSurfaceView(this);
    this.mRenderSurfaceView.setRenderer(this.mEngine, this);

    final android.widget.RelativeLayout.LayoutParams surfaceViewLayoutParams = new RelativeLayout.LayoutParams(BaseGameActivity.createSurfaceViewLayoutParams());
    surfaceViewLayoutParams.addRule(RelativeLayout.CENTER_IN_PARENT);

    relativeLayout.addView(this.mRenderSurfaceView, surfaceViewLayoutParams);

    FrameLayout frameLayout = new FrameLayout(this);
    adView = new AdView(this, AdSize.BANNER, "xxxxxxx");
    adView.refreshDrawableState();
    frameLayout.addView(adView);
    relativeLayout.addView(frameLayout);

    this.setContentView(relativeLayout, relativeLayoutLayoutParams);

} 
```

# java - getPreferredPreviewSizeForVideo() API 级别 10

> ID：14427157
> 
> 赞同：1
> 
> 时间：2013-01-20T17:28:14.490
> 
> 标签：java, android, mobile

我需要建立摄像机的最高记录输出，通常我会为 > 3.0 执行 getPreferredPreviewSizeForVideo() 但是我需要在 api 10 中支持这一点。

是否有其他方法可以获取此信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:18:21.070

~~`getPreferredPreviewSizeForVideo()`只是一种便利方法，其结果取决于`getSupportedVideoSizes()`，自 API 级别 5 以来一直存在。文档指出：~~

 ~~> 如果 getSupportedVideoSizes() 不返回 null，则视频录制的首选预览大小（宽度和高度）（以像素为单位）；否则，返回 null。~~ 

~~因此，作为替代方案，只需调用`getSupportedVideoSizes()`，检查结果不是`null`，按最高像素数对结果进行排序，你应该得到你想要的。对于排序部分，您需要设置 a`Comparator<Camera.Size>`并使用`Collections.sort(...)`.~~

* * *

**编辑：**好像我在查看错误方法的 API 级别！:(不幸的是，上面不会有任何进一步的帮助......

# sql-server - 安装 SQL Server Express 2008 R2 时出错

> ID：14427158
> 
> 赞同：1
> 
> 时间：2013-01-20T17:28:21.440
> 
> 标签：sql-server

我正在尝试使用命令行参数安装 SQL Server 2008 R2 Express。

命令是

```
E:\UnInstall\SQLServer\SQLServerExpress2008\SQLEXPR_x64_ENU.exe 
       / SQ/SAPWD="testpwd123" /security=SQL /BROWSERSVCSTARTUPTYPE="Enabled"
       /TCPENABLED="1" /NPENABLED="0" /INDICATEPROGRESS="True"
       /INSTANCENAME="CBEInstance" /IACCEPTSQLSERVERLICENSETERMS="True" 
```

但解压文件后，开始安装时，返回以下错误：

> *SQL Server 安装程序遇到以下错误：*
> 
> *参数“//”的语法不正确。请用 /？检查使用情况。*
> 
> *错误代码 0x84B40001。*

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T17:36:13.040

```
_x64_ENU.exe / SQ/SAPWD=
              ^___________ Correct this.No need space. 
```

你的意思是 /QS 而不是 /SQ？

# python - echoprint - 停止服务 Solr，我丢失了数据库

> ID：14427160
> 
> 赞同：0
> 
> 时间：2013-01-20T17:28:27.390
> 
> 标签：python, solr, audio-fingerprinting, echoprint

正如我可以正确停止服务和 tt solr 一样。我所做的是重新启动 PC，然后唤醒服务，但要执行歌曲验证，我会收到一条消息，好像数据库已损坏。我想知道关闭服务以运行和测试歌曲而不是数据库损坏的正确方法是什么。问候和感谢。

1.  启动tts /usr/local/tokyotyrant-1.1.33/bin/ttservercd echoprint-server/solr/solr
2.  java -Dsolr.solr.home=/home/user01/echoprint-server/solr/solr/solr/ -Djava.awt.headless=true -DSTOP.PORT=8079 -DSTOP.KEY=mykey -jar start.jar
3.  收录新歌
4.  我停止 Solr java -DSTOP.PORT=8079 -DSTOP.KEY=mykey -jar start.jar --stop

现在，当我启动服务并且我想制作一首歌曲压缩时，我在数据库中拥有的一些会向我发送一个错误。

Traceback（最近一次调用最后一次）：文件“lookup.py”，第 51 行，在查找（sys.argv [1]）文件“lookup.py”，第 35 行，在查找结果 = fp.best_match_for_query（解码）文件“ ../API/fp.py"，第 194 行，在 best_match_for_query get_tyrant tcodes = () 中。multi_get (trackids) File"../API/pytyrant.py", line 296, in multi_get raise KeyError("Missing a result, unusable response in 1.1.10") KeyError: 'Missing a result, unusable response in 1.1.10 '

应该如何在不丢失任何信息的情况下启动和终止服务。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:23:17.547

好吧，我发现了我的错误，如果 ttserver. 感谢 Alexandre 提供的数据。那么让它工作的正确方法就是这样

/usr/local/tokyotyrant-1.1.33/bin/ttserver casket.tch

那里指出了磁盘哈希的名称，这将使持久化。然后正常启动Solr，我可以毫无问题地输入和查看歌曲:)

# java - Java 应用程序崩溃 (NullPointerException)

> ID：14427172
> 
> 赞同：-1
> 
> 时间：2013-01-20T17:29:59.360
> 
> 标签：java, android, nullpointerexception

我只是在编写密码管理器，但每次我运行它时，它都会因 NullPointerException 而崩溃。我检查了代码，但我是新开发人员。这里有人知道为什么吗？:(

MainActivity.java 的代码：

```
package de.lennartschoch.passwordmanager;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity extends Activity {

Button login;
EditText masterpassfield;
static String masterpass;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    login = (Button) findViewById(R.id.login);
    masterpass = "";
    masterpassfield = (EditText) findViewById(R.id.masterpass);

    if(masterpass.equals("")) {

        Intent intent = new Intent(this,NewMasterpass.class);
        startActivity(intent);
        return;
    }

    login.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View view) {

            if(masterpassfield.getText().toString().equals(masterpass)) {

                Intent success = new Intent(view.getContext(), Passwords.class);
                startActivityForResult(success, 0);

            }

        }});
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

NewMasterpass.java 的代码：

```
package de.lennartschoch.passwordmanager;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Color;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class NewMasterpass extends Activity {

EditText masterpasscreate;
EditText repeat;
Button finish;
TextView mistake;

/** Called when the activity is first created. */
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_new_masterpass);

    masterpasscreate = (EditText) findViewById(R.id.masterpasscreate);
    repeat = (EditText) findViewById(R.id.repeatcreate);
    finish = (Button) findViewById(R.id.finish);
    mistake = (TextView) findViewById(R.id.mistake);

    finish.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View view) {

            if(!masterpasscreate.getText().toString().equals(repeat.getText().toString())) {

                mistake.setText("The passwords are different.");
                mistake.setTextColor(Color.RED);

            }
            else if(masterpasscreate.getText().toString().equals("") || repeat.getText().toString().equals("")) {

                mistake.setText("Both textfields must be filled in");
                mistake.setTextColor(Color.RED);

            }
            else {

                MainActivity.masterpass = masterpasscreate.getText().toString();
                Intent myIntent = new Intent(view.getContext(), MainActivity.class);
                startActivityForResult(myIntent, 0);
            }

        }});

}
} 
```

LogCat 错误：

```
01-20 17:17:52.629: D/AndroidRuntime(561): Shutting down VM
01-20 17:17:52.629: W/dalvikvm(561): threadid=1: thread exiting with uncaught exception         (group=0x409961f8)
01-20 17:17:52.639: E/AndroidRuntime(561): FATAL EXCEPTION: main
01-20 17:17:52.639: E/AndroidRuntime(561): java.lang.RuntimeException: Unable to start activity         ComponentInfo{de.lennartschoch.passwordmanager/de.lennartschoch.passwordmanager.MainActivit    y}: java.lang.NullPointerException
01-20 17:17:52.639: E/AndroidRuntime(561):  at     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
01-20 17:17:52.639: E/AndroidRuntime(561):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
01-20 17:17:52.639: E/AndroidRuntime(561):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
01-20 17:17:52.639: E/AndroidRuntime(561):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
01-20 17:17:52.639: E/AndroidRuntime(561):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-20 17:17:52.639: E/AndroidRuntime(561):  at android.os.Looper.loop(Looper.java:137)
01-20 17:17:52.639: E/AndroidRuntime(561):  at android.app.ActivityThread.main(ActivityThread.java:4340)
01-20 17:17:52.639: E/AndroidRuntime(561):  at java.lang.reflect.Method.invokeNative(Native Method)
01-20 17:17:52.639: E/AndroidRuntime(561):  at java.lang.reflect.Method.invoke(Method.java:511)
01-20 17:17:52.639: E/AndroidRuntime(561):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-20 17:17:52.639: E/AndroidRuntime(561):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-20 17:17:52.639: E/AndroidRuntime(561):  at dalvik.system.NativeStart.main(Native Method)
01-20 17:17:52.639: E/AndroidRuntime(561): Caused by: java.lang.NullPointerException
01-20 17:17:52.639: E/AndroidRuntime(561):  at de.lennartschoch.passwordmanager.MainActivity.onCreate(MainActivity.java:26)
01-20 17:17:52.639: E/AndroidRuntime(561):  at android.app.Activity.performCreate(Activity.java:4465)
01-20 17:17:52.639: E/AndroidRuntime(561):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-20 17:17:52.639: E/AndroidRuntime(561):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
01-20 17:17:52.639: E/AndroidRuntime(561):  ... 11 more
01-20 17:17:57.129: I/Process(561): Sending signal. PID: 561 SIG: 9
01-20 17:21:37.499: D/AndroidRuntime(608): Shutting down VM
01-20 17:21:37.499: W/dalvikvm(608): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
01-20 17:21:37.511: E/AndroidRuntime(608): FATAL EXCEPTION: main
01-20 17:21:37.511: E/AndroidRuntime(608): java.lang.RuntimeException: Unable to start activity ComponentInfo{de.lennartschoch.passwordmanager/de.lennartschoch.passwordmanager.MainActivity}: android.content.ActivityNotFoundException: Unable to find explicit activity class {de.lennartschoch.passwordmanager/de.lennartschoch.passwordmanager.NewMasterpass}; have you declared this activity in your AndroidManifest.xml?
01-20 17:21:37.511: E/AndroidRuntime(608):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
01-20 17:21:37.511: E/AndroidRuntime(608):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
01-20 17:21:37.511: E/AndroidRuntime(608):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
01-20 17:21:37.511: E/AndroidRuntime(608):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
01-20 17:21:37.511: E/AndroidRuntime(608):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-20 17:21:37.511: E/AndroidRuntime(608):  at android.os.Looper.loop(Looper.java:137)
01-20 17:21:37.511: E/AndroidRuntime(608):  at android.app.ActivityThread.main(ActivityThread.java:4340)
01-20 17:21:37.511: E/AndroidRuntime(608):  at java.lang.reflect.Method.invokeNative(Native Method)
01-20 17:21:37.511: E/AndroidRuntime(608):  at java.lang.reflect.Method.invoke(Method.java:511)
01-20 17:21:37.511: E/AndroidRuntime(608):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-20 17:21:37.511: E/AndroidRuntime(608):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-20 17:21:37.511: E/AndroidRuntime(608):  at dalvik.system.NativeStart.main(Native Method)
01-20 17:21:37.511: E/AndroidRuntime(608): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {de.lennartschoch.passwordmanager/de.lennartschoch.passwordmanager.NewMasterpass}; have you declared this activity in your AndroidManifest.xml?
01-20 17:21:37.511: E/AndroidRuntime(608):  at  android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1508)
01-20 17:21:37.511: E/AndroidRuntime(608):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1384)
01-20 17:21:37.511: E/AndroidRuntime(608):  at android.app.Activity.startActivityForResult(Activity.java:3190)
01-20 17:21:37.511: E/AndroidRuntime(608):  at android.app.Activity.startActivity(Activity.java:3297)
01-20 17:21:37.511: E/AndroidRuntime(608):  at de.lennartschoch.passwordmanager.MainActivity.onCreate(MainActivity.java:30)
01-20 17:21:37.511: E/AndroidRuntime(608):  at android.app.Activity.performCreate(Activity.java:4465)
01-20 17:21:37.511: E/AndroidRuntime(608):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-20 17:21:37.511: E/AndroidRuntime(608):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
01-20 17:21:37.511: E/AndroidRuntime(608):  ... 11 more
01-20 17:22:30.769: D/AndroidRuntime(655): Shutting down VM
01-20 17:22:30.769: W/dalvikvm(655): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
01-20 17:22:30.779: E/AndroidRuntime(655): FATAL EXCEPTION: main
01-20 17:22:30.779: E/AndroidRuntime(655): java.lang.RuntimeException: Unable to start activity ComponentInfo{de.lennartschoch.passwordmanager/de.lennartschoch.passwordmanager.MainActivity}: android.content.ActivityNotFoundException: Unable to find explicit activity class {de.lennartschoch.passwordmanager/de.lennartschoch.passwordmanager.NewMasterpass}; have you declared this activity in your AndroidManifest.xml?
01-20 17:22:30.779: E/AndroidRuntime(655):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
01-20 17:22:30.779: E/AndroidRuntime(655):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
01-20 17:22:30.779: E/AndroidRuntime(655):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
01-20 17:22:30.779: E/AndroidRuntime(655):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
01-20 17:22:30.779: E/AndroidRuntime(655):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-20 17:22:30.779: E/AndroidRuntime(655):  at android.os.Looper.loop(Looper.java:137)
01-20 17:22:30.779: E/AndroidRuntime(655):  at android.app.ActivityThread.main(ActivityThread.java:4340)
01-20 17:22:30.779: E/AndroidRuntime(655):  at java.lang.reflect.Method.invokeNative(Native Method)
01-20 17:22:30.779: E/AndroidRuntime(655):  at java.lang.reflect.Method.invoke(Method.java:511)
01-20 17:22:30.779: E/AndroidRuntime(655):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-20 17:22:30.779: E/AndroidRuntime(655):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-20 17:22:30.779: E/AndroidRuntime(655):  at dalvik.system.NativeStart.main(Native Method)
01-20 17:22:30.779: E/AndroidRuntime(655): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {de.lennartschoch.passwordmanager/de.lennartschoch.passwordmanager.NewMasterpass}; have you declared this activity in your AndroidManifest.xml?
01-20 17:22:30.779: E/AndroidRuntime(655):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1508)
01-20 17:22:30.779: E/AndroidRuntime(655):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1384)
01-20 17:22:30.779: E/AndroidRuntime(655):  at android.app.Activity.startActivityForResult(Activity.java:3190)
01-20 17:22:30.779: E/AndroidRuntime(655):  at android.app.Activity.startActivity(Activity.java:3297)
01-20 17:22:30.779: E/AndroidRuntime(655):  at de.lennartschoch.passwordmanager.MainActivity.onCreate(MainActivity.java:30)
01-20 17:22:30.779: E/AndroidRuntime(655):  at android.app.Activity.performCreate(Activity.java:4465)
01-20 17:22:30.779: E/AndroidRuntime(655):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-20 17:22:30.779: E/AndroidRuntime(655):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
01-20 17:22:30.779: E/AndroidRuntime(655):  ... 11 more
01-20 17:22:33.180: I/Process(655): Sending signal. PID: 655 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:41:08.770

它问：

```
01-20 17:22:30.779: E/AndroidRuntime(655): java.lang.RuntimeException: Unable to start activity ComponentInfo{de.lennartschoch.passwordmanager/de.lennartschoch.passwordmanager.MainActivity}: android.content.ActivityNotFoundException: Unable to find explicit activity class {de.lennartschoch.passwordmanager/de.lennartschoch.passwordmanager.NewMasterpass}; 

have you declared this activity in your AndroidManifest.xml? 
```

你？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T17:39:38.643

在您的清单 xml 中声明`NewMasterPass`活动，如 logcat 中明确提到的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T17:41:28.697

尝试将此添加到您的 AndroidManifest.xml

```
<activity android:name="de.lennartschoch.passwordmanager.NewMasterpass" /> 
```

# java - 我无法使用 Java 代码接收网站的所有 HTML 内容

> ID：14427173
> 
> 赞同：0
> 
> 时间：2013-01-20T17:30:00.647
> 
> 标签：java, html

我使用 Java 接收网站的 HTML 内容。但我无法收到它的所有内容。有时，我收到以“...”结尾的内容，而不是内容的结尾。你能告诉我什么是错误。下面是我的代码：

```
public static String requestHtmlContent(String sUrl){
        URL url;
        URLConnection connection;
        StringBuilder strBuilder = new StringBuilder();
        BufferedReader reader;
        try {
            url = new URL( sUrl );
            connection = url.openConnection();
            connection.setRequestProperty("User-Agent", "Mozilla/6.0 (Windows NT 6.2; WOW64; rv:16.0.1) Gecko/20121011 Firefox/16.0.1");
            InputStream is = url.openConnection().getInputStream();
            reader = new BufferedReader( new InputStreamReader( is )  );

            String line = null;
            while((line = reader.readLine())!= null);  {
                line = reader.readLine();
                strBuilder.append(line +"\n");
            }
            reader.close();

            return strBuilder.toString();

        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return strBuilder.toString();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T17:36:28.330

如果没有实际测试您的代码，我可以说这个`while`循环绝对是可疑的：

```
while((line = reader.readLine())!= null);  {
    line = reader.readLine();
    strBuilder.append(line +"\n");
} 
```

while 条件消耗来自阅读器的一行，该行永远不会被处理。

# node.js - Node.io 没有抛出错误？

> ID：14427176
> 
> 赞同：2
> 
> 时间：2013-01-20T17:30:54.707
> 
> 标签：node.js, node.io

我注意到与 nodejs 相比，node.io 没有抛出任何错误，如果有错字的话。不知道为什么。例如：

运行此脚本包含带有节点的“Util2”错字。

```
var Util = require('./lib/util.js');

console.log(Util2.parseFloat('$123.00')); 
```

将抛出以下错误：

```
console.log(Util2.parseFloat('$123.00'));
        ^
ReferenceError: Util2 is not defined. 
```

但是，使用具有完全相同错字的 node.io 运行此脚本不会引发任何错误。

```
var nodeio = require('node.io');
var Util = require('./lib/util.js');

exports.job = new nodeio.Job({
    input: false,
    run: function () {
        console.log(Util2.parseFloat('$123.00'));
    }
}); 
```

不确定 node.io 是否抑制错误消息，因为没有错误消息很难调试。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:53:49.890

感谢 node.io chriso 花时间回答这个问题。这是解决方案：

语法错误确实应该被过滤掉，但现在你有两个选择

```
exports.job = new nodeio.Job({
    input: false,
    run: function () {
        console.log(Util2.parseFloat('$123.00'));
    }
  , fail: function (input, err) {
        // handle error here
    }
}); 
or

exports.job = new nodeio.Job({
    input: false,
    run: function () {
        try {
            console.log(Util2.parseFloat('$123.00'));
        } catch (e) {
            //Handle the error here
        }
    }
}); 
```

[完整答案](https://github.com/chriso/node.io/issues/136)

# vb.net - 在 vb.net 中延迟执行进程

> ID：14427177
> 
> 赞同：0
> 
> 时间：2013-01-20T17:30:54.680
> 
> 标签：vb.net, process

我正在尝试从列表视图执行多个进程，尽管我需要它们之间的延迟。

我的vb.net知识有限，

```
 For Each ListView1 As ListViewItem In Me.ListView1.Items

                If ListView1.Checked = True Then
                    Dim targetName As String = ListView1.SubItems(5).Text.ToString
                    Dim fileExists As Boolean

                    fileExists = My.Computer.FileSystem.FileExists(targetName)
                    If fileExists = True Then
                        Dim p As System.Diagnostics.Process
                        p = New System.Diagnostics.Process()
                        p.StartInfo.WorkingDirectory = "c:\"
                        p.StartInfo.FileName = URLDecode(targetName)
                        p.StartInfo.WindowStyle = ProcessWindowStyle.Hidden
                        p.Start()
                        p.Close()
                    Else 
```

这将在大多数情况下正常执行进程，这实际上是一个 mp3 文件，并将其添加到 winamps 播放列表中。有时它启动得太快，导致winamp在处理mp3时崩溃，我怎样才能在不锁定ui的情况下延迟执行每个进程？此外，任何关于我如何改进整体代码并使其更稳定的建议都将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:35:30.510

```
Imports System.Threading

Thread.Sleep(5000) 
```

`Thread.Sleep()`需要等待数毫秒，因此上述将等待 5 秒。

# ruby-on-rails - 如何获得几列中值的总汇总数？

> ID：14427178
> 
> 赞同：1
> 
> 时间：2013-01-20T17:30:57.453
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

假设，有表称为`User`，和`Community`

社区是由用户创建的，它有 user_id。
社区也有喜欢社区的用户数量。

比方说

有这些社区。() 里面的数字是点赞社区的用户数。

*   社区 A (17)，社区所有者是 user_id '2'
*   社区 B (35)，社区所有者是 user_id '1'
*   社区 C (8)，社区所有者是 user_id '2'

我想汇总喜欢用户“2”他的社区的用户数量。这里应该是 25 (17 + 8)。

我怎样才能得到这个？

应该是这样的吗？`cached_votes_up`拥有喜欢社区的用户数量。

```
@user = User.find(2)
@communities = Community.find(@user).
@user.summarized_number = @communities.cached_votes_up.count
@user.save 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:37:50.060

您可以使用[ActiveRecord::Calculations#sum](http://api.rubyonrails.org/classes/ActiveRecord/Calculations.html#method-i-sum)方法：

```
@user.summarized_number = Community.sum(:cached_votes_up, :conditions => ["user_id = ?", @user.id]) 
```

# magento - 如何向其中添加产品？

> ID：14427184
> 
> 赞同：-1
> 
> 时间：2013-01-20T17:31:50.447
> 
> 标签：magento

```
 <?php foreach($this->getItems() as $_item): ?>
                    <?php echo $this->getItemHtml($_item) ?>
                <?php endforeach ?> 
```

如果我想`$this->getItems()`从指定的类别中添加一个产品然后输出它，代码是表单 cart.phtml？我该怎么办？谢谢你

我应该知道产品的哪些信息，然后我可以将它放入 $this->getItems() 然后循环输出信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T21:20:47.970

完成此操作的方法是使用以下任一方法将商品添加到您的购物车。

1.  通过查询字符串将产品添加到购物车[阅读更多](http://www.magentocommerce.com/wiki/4_-_themes_and_template_customization/catalog/adding_a_product_to_the_cart_via_querystring)

    > /path/to/app/checkout/cart/add?product=[id]&qty=[qty]

2.  以编程方式将产品添加到购物车（[阅读更多](http://gzchauhan.blogspot.com/2012/03/programmatically-add-product-in-cart-in.html)）

`

```
$params = array(
    'product' => 23,
    'qty' => 2,
);
$cart = Mage::getSingleton('checkout/cart'); 
$product = Mage::getModel('catalog/product');
$product->load(23); // load product id 23
$cart->addProduct($product, $params);
$cart->save(); 
Mage::getSingleton('checkout/session')->setCartWasUpdated(true); 
```

`

# objective-c - ARC Objective-C：如何释放自我？

> ID：14427185
> 
> 赞同：2
> 
> 时间：2013-01-20T17:31:52.700
> 
> 标签：objective-c, cocoa, automatic-ref-counting, memory-management

我正在创建一个工作流来浏览网站，工作流的每一步都必须加载 n 帧，然后知道它准备好了（我必须实现超时）。

我不明白为什么 [self next] 给我这个错误： *** -[WebWorkflow next]: message sent to deallocated instance 0x105796ef0**

考虑到这个委托函数：

```
- (void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)frame {
    frameCounter++;
    NSInteger frames = [(WebWorkflowStep *)[steps objectAtIndex:index] frames];
    NSLog(@"Frame counter %ld of %ld", frameCounter, frames);
    [self next];
} 
```

下一个方法：

```
-(void) next
{
    if ( index < [steps count])
    {
        frameCounter = 0;
        index = index + 1;
        WebWorkflowStep *step = [steps objectAtIndex:index-1];
        NSDictionary *userInfo = [NSDictionary dictionaryWithObject:step forKey:@"selector"];
        [[NSNotificationCenter defaultCenter] postNotificationName:EVENT_WORKFLOW_NEXT object:nil userInfo:userInfo];

    }
} 
```

笔记：

**- WebWorflow aka 'self' 已由另一个强大的类创建/绑定**

像这样：

```
@interface AController : NSObject <APIProtocol>
{
    WebView *webview;
    NSMutableArray *accounts;

    WebWorkflow *workflow;
}

@property (strong) WebWorkflow *workflow;

... 
```

我确实创建了这样的工作流程：

```
workflow = [[WebWorkflow alloc] initWithWebView:webview];
    NSArray *getPicturesWorkflow = [NSArray arrayWithObjects:
                                            [[WebWorkflowStep alloc] initWithSelector:@"open" andLoadFrames:0],
                                            [[WebWorkflowStep alloc] initWithSelector:@"login" andLoadFrames:2],
                                            [[WebWorkflowStep alloc] initWithSelector:@"getPictures" andLoadFrames:8],
                                             nil];
            [workflow setSteps:getPicturesWorkflow]; 
```

它被初始化为：

```
-(id)initWithWebView:(WebView *)webview
{
    self = [ super init];
    if(self) {
        timeout = 10;
        index = 0;
        web = webview;
        frameCounter = 0;
        [web setFrameLoadDelegate:self];
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T18:03:43.190

AController 实例拥有一个 Web 视图并且是 Web 视图的委托。AController 实例正在被释放（出于某种原因......我们需要看看*它的*所有者是如何管理它的）。由于它可能会在加载过程中被释放，因此它应该自行清理，如下所示：

```
- (void)dealloc {
    [web stopLoading:self];  // or webView, not sure what you call it
} 
```

这将防止崩溃。它也会放弃负载。如果您不想这样做，则需要弄清楚为什么要释放 AController 实例。

这样做的第一步是在 dealloc 方法中设置断点。

# linux - 在 AWK 脚本输出中的字段周围添加双引号？

> ID：14427188
> 
> 赞同：25
> 
> 时间：2013-01-20T17:31:58.150
> 
> 标签：linux, shell, magento, awk

我编写了一个 awk 脚本，将分发器平面文件转换为可导入 Magento 的 CSV。此文件以分号分隔。

它没有像进口商要求的那样在每个字段周围加上引号。它工作得很好，但是在没有封闭双引号的情况下导致数据导入出现一些问题。我花了几个小时试图弄清楚如何将其添加到现有脚本中，但运气不佳。任何帮助将不胜感激 - 我对 AWK 很陌生。

**电流输出**

```
store;websites;attribute_set;type;category_ids;sku;has_options;name;meta_title;meta_description;image;small_image;thumbnail;url_key;url_path;config_attributes;custom_design;page_layout;options_container;country_of_manufacture;msrp_enabled;msrp_display_actual_price_type;gift_message_available;rsr_pn;manufacturer_pn;price;special_price;cost;weight;msrp;status;visibility;manufacturer;enable_googlecheckout;tax_class_id;is_recurring;description;short_description;meta_keyword;custom_layout_update;news_from_date;news_to_date;special_from_date;special_to_date;custom_design_from;custom_design_to;qty;min_qty;use_config_min_qty;is_qty_decimal;backorders;use_config_backorders;min_sale_qty;use_config_min_sale_qty;max_sale_qty;use_config_max_sale_qty;is_in_stock;low_stock_date;notify_stock_qty;use_config_notify_stock_qty;manage_stock;use_config_manage_stock;stock_status_changed_auto;use_config_qty_increments;qty_increments;use_config_enable_qty_inc;enable_qty_increments;is_decimal_divided;stock_status_changed_automatically;use_config_enable_qty_increments;product_name;store_id;product_type_id;product_status_changed;product_changed_websites;gallery;related;upsell;crosssell;tier_prices;associated;bundle_options;grouped;group_price_price;downloadable_options;super_attribute_pricing;product_tags
admin;base;Default;simple;2,35,36;844802016148;0;5.11 HOLSTER SHIRT L WHITE;;;/5/1/511-40011-010-L_1.jpg;/5/1/511-40011-010-L_1.jpg;/5/1/511-40011-010-L_1.jpg;511-40011-010-L;511-40011-010-L.html;;;No layout updates;Block after Info Column;;Use config;Use config;No;511-40011-010-L;40011;74.99;;48.00;5;74.99;Enabled;Catalog, Search;5.11 Tactical;Yes;Taxable Goods;No;5.11 Tactical Short Sleeve Shirt L White Holster Shirt Crew 40011;5.11 Tactical Short Sleeve Shirt L White Holster Shirt Crew 40011;;;;;;;;;0;0;1;0;0;1;1;1;0;1;1;;;1;0;1;0;1;0;1;0;0;0;1;5.11 HOLSTER SHIRT L WHITE;0;simple;;;;;;;;;;;;;; 
```

**期望的输出**

```
"store";"websites";"attribute_set";"type";"category_ids";"sku";"has_options";"name";"meta_title";"meta_description";"image";"small_image";"thumbnail";"url_key";"url_path";"config_attributes";"custom_design";"page_layout";"options_container";"country_of_manufacture";"msrp_enabled";"msrp_display_actual_price_type";"gift_message_available";"rsr_pn";"manufacturer_pn";"price";"special_price";"cost";"weight";"msrp";"status";"visibility";"manufacturer";"enable_googlecheckout";"tax_class_id";"is_recurring";"description";"short_description";"meta_keyword";"custom_layout_update";"news_from_date";"news_to_date";"special_from_date";"special_to_date";"custom_design_from";"custom_design_to";"qty";"min_qty";"use_config_min_qty";"is_qty_decimal";"backorders";"use_config_backorders";"min_sale_qty";"use_config_min_sale_qty";"max_sale_qty";"use_config_max_sale_qty";"is_in_stock";"low_stock_date";"notify_stock_qty";"use_config_notify_stock_qty";"manage_stock";"use_config_manage_stock";"stock_status_changed_auto";"use_config_qty_increments";"qty_increments";"use_config_enable_qty_inc";"enable_qty_increments";"is_decimal_divided";"stock_status_changed_automatically";"use_config_enable_qty_increments";"product_name";"store_id";"product_type_id";"product_status_changed";"product_changed_websites";"gallery";"related";"upsell";"crosssell";"tier_prices";"associated";"bundle_options";"grouped";"group_price_price";"downloadable_options";"super_attribute_pricing";"product_tags"
"admin";"base";"Default";"simple";"2,35,36";"844802016148";"0";"5.11 HOLSTER SHIRT L WHITE";"";"";"/5/1/511-40011-010-L_1.jpg";"/5/1/511-40011-010-L_1.jpg";"/5/1/511-40011-010-L_1.jpg";"511-40011-010-L";"511-40011-010-L.html";"";"";"No layout updates";"Block after Info Column";"";"Use config";"Use config";"No";"511-40011-010-L";"40011";"74.99";"";"48.00";"5";"74.99";"Enabled";"Catalog, Search";"5.11 Tactical";"Yes";"Taxable Goods";"No";"5.11 Tactical Short Sleeve Shirt L White Holster Shirt Crew 40011";"5.11 Tactical Short Sleeve Shirt L White Holster Shirt Crew 40011";"";"";"";"";"";"";"";"";"0";"0";"1";"0";"0";"1";"1";"1";"0";"1";"1";"";"";"1";"0";"1";"0";"1";"0";"1";"0";"0";"0";"1";"5.11 HOLSTER SHIRT L WHITE";"0";"simple";"";"";"";"";"";"";"";"";"";"";"";"";"";" 
```

**脚本 - rsrimport.awk**

```
#!/bin/awk -f
# ----------------------------------------------------------------------------------------
# Copyright (c) 2012 - 2013 John Steensen <john.steensen@live.com>
# All rights reserved. No warranty, explicit or implicit, provided.
# ----------------------------------------------------------------------------------------
# AWK Processing
# Updated 03DEC2012@1552 MST
# ----------------------------------------------------------------------------------------
# Warnings/Dependancy Notes
# AWK
# ----------------------------------------------------------------------------------------
BEGIN {
FS=";";
OFS=";";
CATEGORY="47";
IMAGE="imagepathfail";
URLKEY="urlkeyfail";
URLPATH="urlpathfail";
print "store", "websites", "attribute_set", "type", "category_ids", "sku", "has_options", "name", "image", "small_image", "thumbnail", "url_key", "url_path", "page_layout", "options_container", "msrp_enabled", "msrp_display_actual_price_type", "gift_message_available", "rsr_pn", "manufacturer_pn", "price", "cost", "weight", "msrp", "manufacturer", "status", "is_recurring", "visibility", "enable_googlecheckout", "tax_class_id", "description", "short_description", "qty", "min_qty", "use_config_min_qty", "is_qty_decimal", "backorders", "use_config_backorders", "min_sale_qty", "use_config_min_sale_qty", "max_sale_qty", "use_config_max_sale_qty", "is_in_stock", "notify_stock_qty", "use_config_notify_stock_qty", "manage_stock", "use_config_manage_stock", "stock_status_changed_auto", "use_config_qty_increments", "qty_increments", "use_config_enable_qty_inc", "enable_qty_increments", "is_decimal_divided", "stock_status_changed_automatically", "use_config_enable_qty_increments", "product_name", "store_id", "product_type_id";
}
{
# DEFINE CATEGORY
if ($4=="1") CATEGORY="2,3,4";
else if ($4=="2") CATEGORY="2,3,7";
else if ($4=="3") CATEGORY="2,3,8";
else if ($4=="4") CATEGORY="2,3,22,23";
else if ($4=="5") CATEGORY="2,3,5";
else if ($4=="7") CATEGORY="2,3,6";
else if ($4=="8") CATEGORY="2,27,28";
else if ($4=="9") CATEGORY="2,27,29";
else if ($4=="10") CATEGORY="2,9,13";
else if ($4=="11") CATEGORY="2,9,14";
else if ($4=="12") CATEGORY="2,35,38";
else if ($4=="13") CATEGORY="2,9,16";
else if ($4=="14") CATEGORY="2,35,37";
else if ($4=="15") CATEGORY="2,19,21";
else if ($4=="16") CATEGORY="2,9,15";
else if ($4=="17") CATEGORY="2,9,16";
else if ($4=="18") CATEGORY="2,19,20";
else if ($4=="20") CATEGORY="2,27,33";
else if ($4=="21") CATEGORY="2,9,17";
else if ($4=="22") CATEGORY="2,3,22,24";
else if ($4=="23") CATEGORY="2,3,22,25";
else if ($4=="24") CATEGORY="2,9,13";
else if ($4=="25") CATEGORY="2,40,43";
else if ($4=="26") CATEGORY="2,40,44";
else if ($4=="27") CATEGORY="2,3,22,26";
else if ($4=="28") CATEGORY="2,27,31";
else if ($4=="29") CATEGORY="2,27,32";
else if ($4=="30") CATEGORY="2,27,30";
else if ($4=="31") CATEGORY="2,27,34";
else if ($4=="32") CATEGORY="2,9,11";
else if ($4=="33") CATEGORY="2,35,36";
else if ($4=="34") CATEGORY="2,9,10";
else if ($4=="35") CATEGORY="2,9,18";
else if ($4=="36") CATEGORY="2,40,42";
else if ($4=="38") CATEGORY="2,40,41";
else if ($4=="39") CATEGORY="2,40,45";
else if ($4=="40") CATEGORY="2,35,39";
else if ($4=="41") CATEGORY="2,9,12";
else if ($4=="43") CATEGORY="2,9,12";
else if ($4=="01") CATEGORY="2,3,4";
else if ($4=="02") CATEGORY="2,3,7";
else if ($4=="03") CATEGORY="2,3,8";
else if ($4=="04") CATEGORY="2,3,22,23";
else if ($4=="05") CATEGORY="2,3,5";
else if ($4=="07") CATEGORY="2,3,6";
else if ($4=="08") CATEGORY="2,27,28";
else if ($4=="09") CATEGORY="2,27,29";
else CATEGORY="47";
# DEFINE IMAGE WITH PATH.
IMAGE="/5/1/"$1"_1.jpg";
# DEFINE URL KEY
URLKEY=$1;
# DEFINE URL PATH
URLPATH=$1".html";
print "admin", "base", "Default", "simple", CATEGORY, $1, "0", $3, IMAGE, IMAGE, IMAGE, URLKEY, URLPATH, "No layout updates", "Block after Info Column", "Use config", "Use config", "No", $1, $12, $6, $7, $8, $6, $11, "Enabled", "No", "Catalog, Search", "Yes", "Taxable Goods", $14, $14, $9, "0", "1", "0", "0", "1", "1", "1", "0", "1", "1", "0", "1", "0", "1", "0", "1", "0", "1", "0", "0", "0", "1", $3, "0", "simple";
}
END {} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-20T17:51:31.407

如果你想：

> 将此添加到现有脚本中。

`\"\"`您可以在每个参数中插入额外的内容，`print`如下所示：

`print "\"admin\"", "\"base\"", ...`

**编辑：**

是的，也许设置 OFS 是更好的解决方案：

`BEGIN { OFS="\";\""; } ... print "\"admin", ...., "simple\"";`

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-06-16T07:47:20.807

```
awk '{for (i=1;i<=NF;i++) $i="\""$i"\""}1' FS=";" OFS=";" input 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-20T17:43:16.530

要在条目周围添加引号，您可以使用简单的 AWK 循环：

**脚本 - simple_loop.awk**

```
BEGIN {FS=";"}
{
  for(i=1;i<NF;i++){
       printf("\"%s\";", $i); 
  }
  printf("\"%s\"\n",$NF);
} 
```

例如

```
echo "admin;base;5.11 HOLSTER SHIRT L WHITE;;" | awk -f simple_loop.awk 
```

应该输出

```
"admin";"base";"5.11 HOLSTER SHIRT L WHITE";"";"" 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-20T17:53:57.137

在这种情况下，我将使用`sed`表达式而不是 AWK。

如果您的数据在一个名为 的文件中`data.txt`，您可以将其写入：

```
sed "s/;/\";\"/g;s/^/\"/;s/$/\"/" data.txt 
```

这会将结果打印到 std 输出，但如果要替换文件的内容，只需使用`sed -i`以下方式：

```
sed -i "s/;/\";\"/g;s/^/\"/;s/$/\"/" data.txt 
```

仅此而已！

**说明：** 表达式`sed`由三个`sed`命令组成，用“;”分隔 您可以单独运行：

```
sed "s/;/\";\"/g 
```

它进行替换（即第一个“s”的含义），然后是“/”（默认分隔符），“;” 这就是我们想要替换的。然后是第二个分隔符“/”和替换：`\";\"`它是一个序列：转义引号、分号和转义引号。`;`因此，使用此命令，我们将用.替换分号`";"`。最后一个`/g`意味着每个都`;`将被替换（不仅是第一个分号）。

如果输入是`a;b;c`在此运行第一个命令之后，它将是`a";"b";"c`.

现在我们需要在开头（`^`在正则表达式中）和结尾（`$`）添加引号。这就是它的意思：

```
sed "s/^/\"/" // the first quote 
```

和

```
sed "s/$/\"/" // the last quote 
```

获得所需的输出：

```
"a";"b";"c" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-16T18:54:19.933

让我稍微重构一下您的程序：

```
/#!/bin/awk -f
BEGIN {
    FS=";";
    OFS="\";\"";
    IMAGE="imagepathfail";
    URLKEY="urlkeyfail";
    URLPATH="urlpathfail";
    # DEFINE CATEGORY
    CATEGORY["1"] ="2,3,4";
    CATEGORY["2"] ="2,3,7";
    CATEGORY["3"] ="2,3,8";
    CATEGORY["4"] ="2,3,22,23";
    CATEGORY["5"] ="2,3,5";
    CATEGORY["7"] ="2,3,6";
    CATEGORY["8"] ="2,27,28";
    CATEGORY["9"] ="2,27,29";
    CATEGORY["10"]="2,9,13";
    CATEGORY["11"]="2,9,14";
    CATEGORY["12"]="2,35,38";
    CATEGORY["13"]="2,9,16";
    CATEGORY["14"]="2,35,37";
    CATEGORY["15"]="2,19,21";
    CATEGORY["16"]="2,9,15";
    CATEGORY["17"]="2,9,16";
    CATEGORY["18"]="2,19,20";
    CATEGORY["20"]="2,27,33";
    CATEGORY["21"]="2,9,17";
    CATEGORY["22"]="2,3,22,24";
    CATEGORY["23"]="2,3,22,25";
    CATEGORY["24"]="2,9,13";
    CATEGORY["25"]="2,40,43";
    CATEGORY["26"]="2,40,44";
    CATEGORY["27"]="2,3,22,26";
    CATEGORY["28"]="2,27,31";
    CATEGORY["29"]="2,27,32";
    CATEGORY["30"]="2,27,30";
    CATEGORY["31"]="2,27,34";
    CATEGORY["32"]="2,9,11";
    CATEGORY["33"]="2,35,36";
    CATEGORY["34"]="2,9,10";
    CATEGORY["35"]="2,9,18";
    CATEGORY["36"]="2,40,42";
    CATEGORY["38"]="2,40,41";
    CATEGORY["39"]="2,40,45";
    CATEGORY["40"]="2,35,39";
    CATEGORY["41"]="2,9,12";
    CATEGORY["43"]="2,9,12";
    CATEGORY["01"]="2,3,4";
    CATEGORY["02"]="2,3,7";
    CATEGORY["03"]="2,3,8";
    CATEGORY["04"]="2,3,22,23";
    CATEGORY["05"]="2,3,5";
    CATEGORY["07"]="2,3,6";
    CATEGORY["08"]="2,27,28";
    CATEGORY["09"]="2,27,29";
    # header
    print "store", "websites", "attribute_set", "type", "category_ids", "sku", "has_options", "name", "image", "small_image", "thumbnail", "url_key", "url_path", "page_layout", "options_container", "msrp_enabled", "msrp_display_actual_price_type", "gift_message_available", "rsr_pn", "manufacturer_pn", "price", "cost", "weight", "msrp", "manufacturer", "status", "is_recurring", "visibility", "enable_googlecheckout", "tax_class_id", "description", "short_description", "qty", "min_qty", "use_config_min_qty", "is_qty_decimal", "backorders", "use_config_backorders", "min_sale_qty", "use_config_min_sale_qty", "max_sale_qty", "use_config_max_sale_qty", "is_in_stock", "notify_stock_qty", "use_config_notify_stock_qty", "manage_stock", "use_config_manage_stock", "stock_status_changed_auto", "use_config_qty_increments", "qty_increments", "use_config_enable_qty_inc", "enable_qty_increments", "is_decimal_divided", "stock_status_changed_automatically", "use_config_enable_qty_increments", "product_name", "store_id", "product_type_id";
}

function getCategory(val) {
    return (val in CATEGORY) ? CATEGORY[val] : "47";
}

{
    # DEFINE IMAGE WITH PATH.
    IMAGE="/5/1/"$1"_1.jpg";
    # DEFINE URL KEY
    URLKEY=$1;
    # DEFINE URL PATH
    URLPATH=$1".html";
    print "\" "admin", "base", "Default", "simple", getCategory($4), $1, "0", $3, IMAGE, IMAGE, IMAGE, URLKEY, URLPATH, "No layout updates", "Block after Info Column", "Use config", "Use config", "No", $1, $12, $6, $7, $8, $6, $11, "Enabled", "No", "Catalog, Search", "Yes", "Taxable Goods", $14, $14, $9, "0", "1", "0", "0", "1", "1", "1", "0", "1", "1", "0", "1", "0", "1", "0", "1", "0", "1", "0", "0", "0", "1", $3, "0", "simple" "\"";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-16T19:15:26.940

在我看来，我们可以使用 printf （格式化输出）和双引号是用 \" 获得格式字符串。

例如

gawk 'BEGIN{print "WKT,punto";}{printf "\"LINESTRING Z (%f %f 0,%f %f 0)\",\"%d"\n",$3,$2,$4, $5,$1}' Frecce_geoloc_12-24.txt

输出：

```
 $3         $2           $4         $5            $1 
```

"线串 Z (-72.319686 -50.609328 0,-50.609309 -72.319499 0)","6582"

"线串 Z (-72.319245 -50.609215 0,-50.609195 -72.319052 0)","6583"

"线串 Z (-72.318799 -50.609101 0,-50.609081 -72.318607 0)","6584"

"线串 Z (-72.318366 -50.608990 0,-50.608969 -72.318169 0)","6585"

# scala - 为什么 null.asInstanceOf[ ] 失败？

> ID：14427191
> 
> 赞同：4
> 
> 时间：2013-01-20T17:32:21.800
> 
> 标签：scala, continuations, scala-2.10, continuation-passing

`null.asInstanceOf[<some CPS annotated type>]`编译失败有什么合乎逻辑的原因吗？

有关上下文，请参阅[此 github 问题线程](https://github.com/paulbutcher/ScalaMock/issues/29)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:18:12.077

我想知道即使编译了 scala 2.9 版本是否在做正确的事情（有机会我会尝试）。无论如何，在 2.10.0 中，它可以编译并工作：

```
import scala.util.continuations._
object NullCPS extends App {
  def f[A,C] = shiftUnit[A,C,C](null.asInstanceOf[A])
  println(reset{"got " + f[Object, String]})  // prints: got null
  println(reset{"got " + f[Int, String]})     // got 0
  println(reset{"got " + f[Boolean, String]}) // got false   
} 
```

`shitUnit[A,B,C]`是[continuations 包](http://www.scala-lang.org/api/current/index.html#scala.util.continuations.package)中的一个库方法，它使用 type 的值`A`来创建一个平凡的值，`ControlContext[A,B,C]`期望由 type 的 continuation k 使用，`A=>B`最终返回 type 的结果`C`。

在我上面`"got " + f[Object, String]`的示例中，延续插件进一步将平凡的`null`值与`(x:Object) => "got " + x`函数组合在一起。

继续讨论[问题的上下文](https://github.com/paulbutcher/ScalaMock/blob/master/core/src/main/scala/org/scalamock/Defaultable.scala#L25)，我看不出如何`Defaultable[T]`表示 ，`T@cps[U]`因为它只有一个类型参数。但是，如果您增强`Defaultable`：

```
import scala.util.continuations._
trait DefCPS[A,C] { def default: A@cps[C] }
object NullCPS extends App {
  implicit def defaultCPS[A,C] = new DefCPS[A,C] {
    def default: A@cps[C] = shiftUnit[A,C,C](null.asInstanceOf[A])
  }
  println(reset{"got " + implicitly[DefCPS[Object,String]].default})
  println(reset{"got " + implicitly[DefCPS[Int,String]].default})
  println(reset{"got " + implicitly[DefCPS[Boolean,String]].default})
}
// prints got null
//        got 0
//        got false 
```

注意：我必须使特征使用 a`def`而不是，`val`否则将无法编译。我也尝试实现 a`A@cpsParam[B,C]`但无法实现。

# java - 解码编码图像Java的输出中的奇怪Ascii字符

> ID：14427196
> 
> 赞同：1
> 
> 时间：2013-01-20T17:33:03.827
> 
> 标签：java, image, encoding, steganography

我正在编写一个图像加密程序，其中我在图像中编码一个字符串。

我正在处理`.png`图像。

编码通过以下步骤执行：

*   使用 getRGB() 将图像的像素存储在 2D 数组中。
*   字符串中的每个字符都被转换为二进制形式并存储在一个数组中。
*   像素的每个字节的 LSB`4byte`根据字符的二进制形式的每一位而改变。第一个字节的 LSB 在第 0 位，第二个字节的 LSB 在第 8 位，第三个字节在第 16 位，第四个字节在第 24 位。
*   编码后，使用 setRGB() 方法将修改后的像素写入原始图像。

对于解码：

*   使用 getRGB() 读取图像的像素；
*   使用反向编码方法来检索数据。
*   在每 8 位之后，包含解码位的 int 被转换为字符。然后为另一个字符初始化为零。

    ```
     if((pixels[i][j] & change)==1)  
                {
                    tempText|=1 ;
                }

                tempText<<=1; 
    ```

变化为 1,256,65536,16777216，具体取决于迭代。第 0、8、16 和 24 位为 1。

代码编译得很好。但解码后，我在输出中得到奇怪的 ascii 字符。我找不到原因。所以我在这里咨询专家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:46:29.733

*（评论太长了）*

你写了：

诠释改变=0；

```
 for(int k=0;k<4;k++)
                            {
                                    if(k==0)
                                    {
                                            change=1;
                                    }
                                    else
                                            if(k==1)
                                            {
                                                    change=256;
                                            }
                                            else
                                                    if(k==2)
                                                    {
                                                            change=65536;
                                                    }
                                                    else
                                                            if(k==3)
                                                            {
                                                                    change = 16777216;
                                                            } 
```

那里有很多重复。通常，计算机非常擅长消除重复。

如果我没有被这一个班轮弄错，这可以重写：

```
final int change = 1 << 8 * k; 
```

# javascript - 如何在客户端的 RadTreeView 中获取所有检查的项目和值？

> ID：14427200
> 
> 赞同：1
> 
> 时间：2013-01-20T17:33:31.680
> 
> 标签：javascript, radcombobox, radtreeview

我在 RadCombobox 中有 RadTreeView。我需要使用 javascipt 创建函数，因为我想在关闭 RadComboBox 后读取所有选中的项目及其值。

如何使用 javascript 获取所有选中的项目和值？

这是我的源代码：

```
function OnClientDropDownClosed()
        {
            //Foreach all checked items and save to array 
            //I want to need for example: Text: John Black, Value: 1
        }

<telerik:RadComboBox ID="RadComboBox1" OnClientDropDownClosed="OnClientDropDownClosed" runat="server" Width="500px" ShowToggleImage="True"
                ExpandAnimation-Type="None"
                CollapseAnimation-Type="None">
                <ItemTemplate>
                    <div id="div1">
                        <telerik:RadTreeView runat="server" ID="RadTreeView1" CheckBoxes="true" Width="100%"
                            Height="140px" TriStateCheckBoxes="true">
                            <Nodes>
                                <telerik:RadTreeNode runat="server" Text="Company" Value="9" Expanded="true">
                                    <Nodes>
                                        <telerik:RadTreeNode runat="server" Text="Employees A" Value="10" Expanded="true">
                                            <Nodes>
                                                <telerik:RadTreeNode runat="server" Value="1" Text="John Black">
                                                </telerik:RadTreeNode>

                                                <telerik:RadTreeNode runat="server" Value="2" Text="Peter Snopy">
                                                </telerik:RadTreeNode>

                                                <telerik:RadTreeNode runat="server" Value="3" Text="George New">
                                                </telerik:RadTreeNode>

                                                <telerik:RadTreeNode runat="server" Value="4" Text="William Wall">
                                                </telerik:RadTreeNode>
                                            </Nodes>
                                        </telerik:RadTreeNode>

                                        <telerik:RadTreeNode runat="server" Text="Employees B" Value="11" Expanded="true">
                                            <Nodes>
                                                <telerik:RadTreeNode runat="server" Value="5" Text="John Black">
                                                </telerik:RadTreeNode>

                                                <telerik:RadTreeNode runat="server" Value="6" Text="Peter Snopy">
                                                </telerik:RadTreeNode>

                                                <telerik:RadTreeNode runat="server" Value="7" Text="George New">
                                                </telerik:RadTreeNode>

                                                <telerik:RadTreeNode runat="server" Value="8" Text="William Wall">
                                                </telerik:RadTreeNode>
                                            </Nodes>
                                        </telerik:RadTreeNode>
                                    </Nodes>
                                </telerik:RadTreeNode>
                            </Nodes>
                        </telerik:RadTreeView>
                    </div>
                </ItemTemplate>
                <Items>
                    <telerik:RadComboBoxItem Text="" />
                </Items>
            </telerik:RadComboBox> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T15:40:13.190

如果我正确理解了您的问题，您想将选中的节点文本和值添加到 javacript 中的数组中，这是解决方案：

```
function OnClientDropDownClosed(sender, eventArgs)
{ 
var arr_of_nodes = new Array();

 var tree=sender.get_items().getItem(0).findControl("RadTreeView1");
 var treenodes=tree.get_nodes(); 
  for (i=0; i<treenodes.get_count(); i++) 
   { 

       if (treenodes.getNode(i).get_checked()) 
       { 
        var _nodeText=treenodes.getNode(i).get_text();
        var _nodeValue=treenodes.getNode(i).get_value();
       arr_of_nodes.push(_nodeText+":"+_nodeValue);

       } 
   } 
 //do something with the array arr
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-19T05:16:33.007

您可以使用`TreeView.get_nodes()`and`TreeNode.get_nodes()`但这些仅给您直接节点，而不是它们的完整后代。

因此，对于具有不同级别节点的 RadTreeView，我们需要有一个递归函数来深入了解整个节点层次结构。

这个答案改编自 wizpert 的答案和 Telerik 博客： [http ://www.telerik.com/blogs/how-to-get-the-checked-items-from-a-treeview-with-checkboxes](http://www.telerik.com/blogs/how-to-get-the-checked-items-from-a-treeview-with-checkboxes)

```
function OnClientDropDownClosed(sender, eventArgs) 
{
    // first let's get hold of the treeview (sender is the combobox)
    var tree = sender.get_items().getItem(0).findControl("RadTreeView1");

    // pass the treeview nodes to another function to find the checked nodes
    var items = getCheckedNodes(tree.get_nodes());

    var text = 'None selected'; // default text

    if (items.length > 0)
    {
        var texts = [];
        for (var i = 0; i < items.length; i++) 
        {
            // extract the text only of the checked nodes
            texts.push(items[i].get_text());
        }
        text = texts.join(', '); // comma separated text
    }

    sender.set_text(text); // set the combobox text
}

function getCheckedNodes(nodes) {
    var node, childCheckedNodes;
    var checkedNodes = []; // array of the checked nodes

    for (var i = 0; i < nodes.get_count(); i++) {
        node = nodes.getNode(i);
        if (node.get_checked()) {
            checkedNodes.push(node); // add to array if checked
        }

        // to understand recursion, first you must understand recursion
        if (node.get_nodes().get_count() > 0)
        {
            // recursive function call
            childCheckedNodes = getCheckedNodes(node.get_nodes());

            if (childCheckedNodes.length > 0)
            {
                // append array with results from recursive call
                checkedNodes = checkedNodes.concat(childCheckedNodes);
            }
        }
    }

    return checkedNodes;
} 
```

# javascript - Jquery - Window.open 使用按钮但不返回按钮

> ID：14427201
> 
> 赞同：0
> 
> 时间：2013-01-20T17:33:36.993
> 
> 标签：javascript, jquery, html

这是我正在使用的当前代码：

```
<script type="text/javascript">

      var win = window.open("URL...", "thePopUp", "");

var pollTimer = window.setInterval(function() {
if (win==null || win.closed !==false || navigator.appName=="Microsoft Internet Explorer"){
    window.clearInterval(pollTimer);
    pause();
    alert("Oh No!  Something has gone wrong, please check the requirements before continuing.");
}
}, 10);
</script> 
```

这基本上会在另一个窗口中打开一个页面，用户需要打开该页面才能在网站上赚取积分。显示的弹出窗口每 20 秒更改一次 URL。

但是，当他们打开页面时它会自动打开，我想使用一个按钮来启动上面的代码。但是当我尝试这个时，除非他们再次按下按钮，否则弹出窗口不会更改 URL。

所以我所追求的是一种用按钮打开这个弹出窗口的方法，但之后不必一次又一次地使用按钮，这样它就不会再通过按钮了。

# asp.net - 对象引用错误 - 取消选中优化代码选项

> ID：14427206
> 
> 赞同：0
> 
> 时间：2013-01-20T17:34:06.847
> 
> 标签：asp.net, .net, exception

我们在我们的应用程序中得到了很多未处理的空引用异常，如下所示。

> System.Web.HttpUnhandledException：引发了“System.Web.HttpUnhandledException”类型的异常。---> System.NullReferenceException：对象引用未设置为对象的实例。在

为了在错误日志中获得准确的行号，我们在生产环境中部署了 PDB 文件，并在发布模式下启用了 PDB only 选项。

现在我们得到了行号错误描述，但是行号总是指向 finally 块，这是不可能发生错误的。

在项目属性中，当在发布模式下进行构建时，将检查优化代码，我们发现由于此选项，行号不正确。

现在我们计划在未选中此选项的情况下在生产中进行部署，以便我们获得正确的行号。如果我们在未选中此选项的情况下部署到生产环境，想要检查这是否会对应用程序的性能产生任何影响。

如果您尝试过此操作或遇到过此类情况，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:42:07.277

是的，它当然可能会对性能产生影响，这就是该选项的用途。

基本上，您有两种选择：

1.  检查优化。这样，您的代码将更容易调试，但效率可能会降低。
2.  不要检查优化。这样，您的代码很可能会更高效，但也更难调试。

不同的是，如果你开启优化，编译器会进行更多的优化，可能会转换你的代码，导致行号不准确，你无法获取局部变量的值等等。

# notepad++ - 无法在记事本++中插入当前文件名

> ID：14427208
> 
> 赞同：0
> 
> 时间：2013-01-20T17:34:10.537
> 
> 标签：notepad++

使用记事本++ v6.2.3

当我尝试使用 TextFx->TexFx Insert->I:Current Full Path 时，它只会在编辑器中插入一个字符。插入“当前文件名”或“当前目录”的问题相同。如何解决这个问题？

我可以使用编辑->复制到剪贴板，它只需要更多的击键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T18:16:16.500

您不能在宏中记录该命令，而必须使用编辑>复制到剪贴板。见[https://superuser.com/questions/299796/](https://superuser.com/questions/299796/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T17:49:52.960

您总是可以右键单击选项卡并从那里获取文件路径？更快..

# html - 嵌入式谷歌翻译绕过 标签

> ID：14427214
> 
> 赞同：1
> 
> 时间：2013-01-20T17:35:09.983
> 
> 标签：html, google-translate

我正在开发一个嵌入谷歌翻译选项的网站。当用户更改语言时，翻译器会绕过`<br/>`并显示不带段落的翻译文本。HTML中的原始文本有一个换行符，没有翻译，布局应该是这样，但翻译时`<br/>`似乎不存在。

如何编写正确的代码`<br/>`以使用嵌入式翻译器？

例如：我有一个简单的 HTML 文本，例如：`hello world!<br/> Hello Google translator<br/>`等。

*   没有翻译：

你好世界！
你好谷歌翻译

*   带翻译：

你好世界！你好谷歌翻译

# java - Shiro Authenticating Realm 应该是事务性的吗？

> ID：14427216
> 
> 赞同：1
> 
> 时间：2013-01-20T17:35:17.403
> 
> 标签：java, hibernate, spring-mvc, shiro

我正在使用 Shiro 来保护我的 Spring MVC webapp。我使用 Hibernate 进行持久性，所以我有一个 HibernateRealm 来获取和填充一个 AuthenticationInfo 对象。

```
@Override
@Transactional
protected AuthenticationInfo doGetAuthenticationInfo(
        AuthenticationToken token) throws AuthenticationException {
    Account account = accountDao.findByUsername((String)token.getPrincipal());

    SimplePrincipalCollection principals = new SimplePrincipalCollection(account, getName());

    SimpleAccount info = new SimpleAccount(principals, account.getPassword());

    return info;
} 
```

`Account`是我的自定义用户类。我使用 DAO`Account`按用户名检索。我想知道制作这种方法是否有任何意义`@Transactional`。毕竟这是一个只读操作。

我也遇到了以下问题：DAO 确实`sessionFactory.getCurrentSession()`会获得一个会话，但我得到了一个

```
HibernateException: No Session found for current thread 
```

当方法被调用时。我在我的应用程序上下文中有这些：

```
<tx:annotation-driven transaction-manager = "transactionManager" />
<bean id="transactionManager"
    class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

我不明白为什么 Spring 不为我打开会话。

**编辑：**要登录，我们`@Controller`使用 Shiro 的 Spring 方法执行此操作`Subject`

```
@RequestMapping(value = "/account/login", method = RequestMethod.POST)
public String login(@RequestParam("username") String username, @RequestParam("password") String password) {
    Subject currentUser = SecurityUtils.getSubject(); 
    if (!currentUser.isAuthenticated) {
        UsernamePasswordToken token = new UsernamePasswordToken(username, password);
        currentUser.login(token);
        return "profile";
    } 
    return "home";
} 
```

在内部，Shiro 使用我上面的领域方法来获取存储的用户名/密码信息。它使用`@Autowired`DAO 检查我的数据库中是否有正确的帐户。然后它将密码与`CredentialsMatcher`实现进行匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:57:26.040

所以你有两个问题。通常最好将这些问题一分为二，因为这些问题之间并没有真正的联系。

1.  No Session found for current thread 似乎`@Transactional`注释不起作用。为了确保您可以在调试模式下运行代码或测试并在堆栈中查找 JdkDynamicAopProxy 或类似的东西 - 如果它存在，那么您的领域将通过事务拦截代理调用，但我想目前没有代理. 为了让它工作，你需要从 SpringContext 中获取，而不是直接从 HibernateRealm 中获取，而是从这个领域正在实现的接口中获取。这是因为内置的标准 java 库代理只能处理接口。
2.  至于使只读服务方法具有事务性。这样做有几个正当的理由：
    *   由于您使用的是 Hibernate，因此您实际上可能使用多个查询来获取您的 Account 对象。如果同时修改此帐户，可能会导致状态不一致：
        *   帐户检索的第一个查询
        *   帐号被修改或删除
        *   用于帐户检索的第二个查询 - 此查询将看到修改结果与第一个查询的结果一起可能导致不一致的行为，但如果第一个和第二个查询在同一事务中且具有适当的事务隔离级别，则第二个查询将看不到修改。
    *   对数据库的统一访问——当你的所有数据库连接层以一种相同的方式访问数据库时，这真的很有帮助——我大大简化了应用程序的维护和扩展。
    *   使用一些事务提示，如`@Transactional(readOnly=true)`通过适当的配置可能会提高您的性能（例如，对于真正高负载的应用程序，只读查询可能会使用数据库服务器的辅助副本）。`java.sql.Connection.setReadOnly()`将方法设置为 Spring 事务的一部分确实比其他方式更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T17:17:37.743

Spring 似乎没有为您的 Realm bean 创建事务代理。这是我可以看到为什么 Hibernate Session 不可用的唯一原因 - 因为支持基础设施不存在（在线程上）准备好使用。

至于您的问题，如果您确实想标记它`@Transactional`，您可以考虑指定`@Transactional(readOnly=true)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T15:57:52.200

Shiro 创建了它自己的 Realm 实例，因此 Spring 无权将其包装在代理中。这就是为什么它不能添加事务行为。

# mysql - 如何使用基于数据包含表的视图删除行？

> ID：14427221
> 
> 赞同：0
> 
> 时间：2013-01-20T17:35:57.560
> 
> 标签：mysql, view, constraints

我现在有 2 个表，已经定义，
第一个称为`wrote`秒是`publication`

在出版物中，我有 2 个领域：

```
title1, title2 
```

在写我有3个领域：

```
Serial number, title1, title2 
```

第二个表外键`title1,title2`是对第一个表主键（两个字段）的约束。现在，我想
从第二个表（`title1,title2`

我成功接收了数据，但是每当我尝试删除时，我都会收到一条错误消息，说我没有通过约束，所以我必须先从“写”中删除该行，然后才能从中删除`publication`，但是每当我删除行时从`publication`查询返回空（因为它基于已删除的信息）

有没有一种方法可以创建像不是“视图”的“临时表”，并且即使我会从我用来查询的表中删除信息，其中的数据也会被保存？

这是完整的查询：（没有像我在评论中提到的那样创建一个新表）

```
create or replace view WritersPerPub as
select wrote.ven_title as v2, wrote.pub_title as p2, count(pub_title) as NumOfWriters
from wrote
group by pub_title,ven_title;

create or replace view NathanWrote as
select publication.ven_title as v1 , publication.pub_title as p1
from publication,wrote
where wrote.ven_title = publication.ven_title AND
      wrote.pub_title = publication.pub_title AND
      wrote.serial_number = (   select serial_number
                                from researcher as r
                                where r.firstname = 'Nathan' AND r.surname = 'Keller');

create or replace view WrittenOnlyByNathan as
select NathanWrote.v1, NathanWrote.p1
from WritersPerPub, NathanWrote
where WritersPerPub.p2 = NathanWrote.p1 AND
      WritersPerPub.v2 = NathanWrote.v1 AND
      WritersPerPub.NumOfWriters = 1;

# Delete Nathan Keller from 'Wrote' table
delete from wrote
where serial_number = (select r.serial_number as rf1
                        from  researcher as r
                        where r.firstname = 'Nathan' AND r.surname = 'Keller');

delete from publication USING publication INNER JOIN WrittenOnlyByNathan 
where publication.pub_title = WrittenOnlyByNathan.p1 AND
  publication.ven_title = WrittenOnlyByNathan.v1; 
```

# firebase - 对按时间顺序排列的 Firebase 子级分页

> ID：14427222
> 
> 赞同：5
> 
> 时间：2013-01-20T17:35:57.643
> 
> 标签：firebase

**tl;dr**在 Firebase 中通过 执行基本分页，`startAt`非常复杂`endAt`，`limit`必须有更简单的方法。

我正在为大量用户提交构建一个管理界面。我最初（和当前）的想法是简单地获取所有内容并在客户端上执行分页。然而，在获取 2000 多条记录（每条记录包含 5-6 个小数字/字符串字段）时存在明显的延迟，我将其归因于超过 1.5mb 的数据有效负载。

目前所有条目都是通过添加的，[`push`](https://www.firebase.com/docs/javascript/firebase/push.html)但我对如何通过巨大的列表进行分页有点迷茫。

要获取我正在使用的第一页数据[`endAt`](https://www.firebase.com/docs/javascript/firebase/endat.html)，其中 a[`limit`](https://www.firebase.com/docs/javascript/firebase/limit.html)为 5：

```
ref.endAt().limit(10).on('child_added', function(snapshot) {
    console.log(snapshot.name(), snapshot.val().name)
}) 
```

结果如下：

```
-IlNo79stfiYZ61fFkx3 #46 John
-IlNo7AmMk0iXp98oKh5 #47 Robert
-IlNo7BeDXbEe7rB6IQ3 #48 Andrew
-IlNo7CX-WzM0caCS0Xp #49 Frank
-IlNo7DNA0SzEe8Sua16 #50 Jimmmy 
```

首先要弄清楚有多少页，我会保留一个单独的计数器，每当有人添加或删除记录时该计数器就会更新。

其次，由于我正在使用`push`我无法导航到特定页面，因为我不知道特定页面的最后一条记录的名称，这意味着目前无法使用这样的界面：

![标准分页控件](../Images/14e090980daf692b17bde2c92ce5e924.png)

为了简单起见，我决定简单地使用下一个/上一个按钮，但这也带来了一个新问题；如果我使用上一个结果集中第一条记录的名称，我可以使用以下命令分页到下一页：

```
ref.endAt(null, '-IlNo79stfiYZ61fFkx3').limit(5).on('child_added', function(snapshot) {
    console.log(snapshot.name(), snapshot.val().name)
}) 
```

该操作的结果如下：

```
-IlNo76KDsN53rB1xb-K #42 William
-IlNo77CtgQvjuonF2nH #43 Christian
-IlNo7857XWfMipCa8bv #44 Jim
-IlNo78z11Bkj-XJjbg_ #45 Richard
-IlNo79stfiYZ61fFkx3 #46 John 
```

现在我有了下一页，只是它移动了一个位置，这意味着我必须调整我的限制并忽略最后一条记录。

要后退一页，我必须在客户端上保留到目前为止我收到的每条记录的单独列表，并找出要传递给的名称`startAt`。

有没有更简单的方法可以做到这一点，还是我应该回去取所有东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T18:15:37.140

我们正在努力添加一个“offset()”查询以方便分页。我们还将添加一个特殊端点，以允许您读取某个位置的子节点数量，而无需实际从服务器加载它们。

不过，这两者都需要一点时间。同时，您描述的方法（或在客户端上完成）可能是您最好的选择。

如果您有一个仅追加的数据结构，则在写入数据时也可能会进行分页。例如：将前 50 个放在 /page1 中，将后 50 个放在 /page2 中，等等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T21:45:51.617

实现此目的的另一种方法是使用两棵树：

ids 树：{ id1: id1, id2: id2, id3: id3 }

数据树：{ id1: ..., id2: ..., id3: ... }

然后，您可以将整个 id 树（或其中的一大块）加载到客户端，并使用该 id 树进行精美的分页。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-30T21:33:52.390

这是每个方向的分页技巧。

```
// get 1-5
ref.startAt().limit(5)

// get 6-10 from 5
ref.startAt(null, '5th-firebase-id' + 1).limit(5)

// get 11-15 from 10
ref.startAt(null, '10th-firebase-id' + 1).limit(5) 
```

基本上它是`startAtExclusive()`. 你可以在 id 的末尾做任何事情。

还想通了`endAtExclusive()`倒退。

```
// get 6-10 from 11
ref.endAt(null, '11th-firebase-id'.slice(0, -1)).limit(5)... 

// get 1-5 from 6
ref.endAt(null, '6th-firebase-id'.slice(0, -1)).limit(5)... 
```

会再玩一些，但似乎可以使用推送 ID。如果使用 firebase 查询，则将limit 替换为`limitToFirst`或。`limitToLast`

# css - css @font-face Steelfish 不适用于 IE 7 和 8

> ID：14427223
> 
> 赞同：0
> 
> 时间：2013-01-20T17:35:58.707
> 
> 标签：css, internet-explorer-8, internet-explorer-7

我有一个问题，我`@font-face`在我的 css 上实现了一个 css，在 Internet Explorer 9、FireFox 和 Chrome 中都可以，但是当我使用 Internet Explorer 7 和 Internet Explorer 8 访问我的网站时，它无法正常工作。看看我下面的代码，有人对我有任何建议代码吗？

```
@font-face {
  font-family: "Steelfish";
  src: url('../fonts/steelfish/steelfish_eb-webfont.eot');
  src: url('../fonts/steelfish/steelfish_eb-webfont.eot?#iefix') format('eot'), url('../fonts/steelfish/steelfish_eb-webfont.woff') format('woff');
  font-weight: 800;
}

@font-face {
  font-family: "Steelfish";
  src: url('../fonts/steelfish/steelfish_bd-webfont.eot');
  src: url('../fonts/steelfish/steelfish_bd-webfont.eot?#iefix') format('eot'), url('../fonts/steelfish/steelfish_bd-webfont.woff') format('woff');
  font-weight: bold;} 
```

# iphone - NSStreamDelegate 读取异步数据

> ID：14427230
> 
> 赞同：0
> 
> 时间：2013-01-20T17:36:32.147
> 
> 标签：iphone, ios, asynchronous, stream

好的。因此，对于 NSStreamDelegate 实现，我必须处理一个例外情况。

过程如下：

1-将COMMAND数据写入输出流以触发另一端

2-另一端，开始异步输入输入流的数据，这意味着数据的第一部分在开始时被接收，然后几秒钟后，其余数据进入。

3- 收到所有数据后，服务器不会发送任何数据，但连接保持打开状态。（输入流状态 = 打开 (2)）

4- 几分钟后，服务器结束连接（输入流状态 = 5）并触发 NSStreamEventEndEncountered。

**发送请求类**

```
- (void)sendSecondRequest {
    CFReadStreamRef readStream = nil;
    CFWriteStreamRef writeStream = nil;
    CFStreamCreatePairWithSocketToHost(NULL, (__bridge CFStringRef)self.SOMEServer, self.SOMEPort, &readStream, &writeStream);
    self.inputStream = (__bridge NSInputStream *)readStream;
    self.outputStream = (__bridge NSOutputStream *)writeStream;
    [self.inputStream setDelegate:self];
    [self.outputStream setDelegate:self];
    NSData *data = [NSData dataWithData:[kSecondCall dataUsingEncoding:NSASCIIStringEncoding]];
    [self.inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [self.outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [self.inputStream open];
    [self.outputStream open];
    [self.outputStream write:[data bytes] maxLength:[data length]];
}

- (void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode {
    switch (eventCode) {
        case NSStreamEventOpenCompleted:
            break;
        case NSStreamEventHasBytesAvailable:
            if (aStream == self.inputStream) {
                uint8_t buffer[1024];
                NSInteger len = [self.inputStream read:buffer maxLength:sizeof(buffer)];
                if (len > 0) {
                    NSString *output = [[NSString alloc] initWithBytes:buffer length:len encoding:NSASCIIStringEncoding];
                    [gOutput appendString:output];
                }
            }
            break;
        case NSStreamEventEndEncountered:
            NSLog(@"Can not connect to the host");
            [aStream close];
            [aStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
            aStream = nil;
            break;
        default:
            break;
    }
}

- (void)disconnectSocket {
    [self.inputStream close];
    [self.inputStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [self.outputStream close];
    [self.outputStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [self.inputStream setDelegate:nil];
    [self.outputStream setDelegate:nil];
    self.inputStream = nil;
    self.outputStream = nil;
} 
```

gOutput变量是我用来读取和存储输入流的全局变量**。**

问题是，由于数据的第一部分立即到来，然后其余部分异步进入，我无法处理没有更多可用数据的时刻。

换句话说，我怎么知道服务器是否已经完成发送数据并且我应该开始处理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:46:00.297

服务器在最后发送一个终止序列。当客户端检测到这个终止符时，它开始处理....

# python - 如何在 Python 中的数字中存储数字列表？

> ID：14427244
> 
> 赞同：2
> 
> 时间：2013-01-20T17:38:06.763
> 
> 标签：python

我需要在只接受数字（整数或浮点数）的列中保存 4 个数字的元组

我有一个包含 4 个数字的列表，例如 -0.0123445552、-29394.2393339、0.299393333、0.00002345556。

如何将所有这些数字“存储”在一个数字中并能够在 Python 中检索原始元组？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T19:06:36.777

跟进@YevgenYampolskiy 使用[numpy](http://www.numpy.org/)的想法：

您可以使用 numpy 将数字转换为 16 位浮点数，然后将数组视为一个 64 位整数：

```
import numpy as np

data = np.array((-0.0123445552, -29394.2393339, 0.299393333, 0.00002345556))

stored_int = data.astype('float16').view('int64')[0]
print(stored_int)
# 110959187158999634

recovered = np.array([stored_int], dtype='int64').view('float16')
print(recovered)
# [ -1.23443604e-02  -2.93920000e+04   2.99316406e-01   2.34842300e-05] 
```

注意：这需要 numpy 版本 1.6 或更高版本，因为这是第一个支持 16 位浮点数的版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T18:07:30.527

如果`int`您的意思是 Python 中的数据类型 int （从当前版本开始没有限制），您可以使用以下解决方案

```
>>> x
(-0.0123445552, -29394.2393339, 0.299393333, 2.345556e-05)
>>> def encode(data):
    sz_data = str(data)
    import base64
    b64_data = base64.b16encode(sz_data)
    int_data = int(b64_data, 16)
    return int_data

>>> encode(x)
7475673073900173755504583442986834619410853148159171975880377161427327210207077083318036472388282266880288275998775936614297529315947984169L
>>> def decode(data):
    int_data = data
    import base64
    hex_data = hex(int_data)[2:].upper()
    if hex_data[-1] == 'L':
        hex_data = hex_data[:-1]
    b64_data = base64.b16decode(hex_data)
    import ast
    sz_data = ast.literal_eval(b64_data)
    return sz_data

>>> decode(encode(x))
(-0.0123445552, -29394.2393339, 0.299393333, 2.345556e-05) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T18:37:17.893

您可以使用模块将 4 个整数组合成一个整数，或者将两个浮点数组合成一个双`struct`精度：

```
from struct import *
s = pack('hhhh', 1, -2, 3,-4)
i = unpack('Q', pack('Q', i[0]))
print i
print unpack('hhhh', s)

s = pack('ff', 1.12, -2.32)
f = unpack('d', s)
print f
print unpack('ff', pack('d', f[0])) 
```

印刷

```
(18445618190982447105L,)
(1, -2, 3, -4)
(-5.119999879002571,)
(1.1200000047683716, -2.319999933242798) 
```

基本上在这个例子中，元组 (1,-2,3,-4) 被打包成整数 18445618190982447105，元组 (1.12, -2.32) 被打包成 -5.119999879002571

要将 4 个浮点数打包成一个浮点数，您需要使用半浮点数，但这是一个问题：

使用半浮点，到目前为止，python 中似乎没有本机支持：http: [//bugs.python.org/issue11734](http://bugs.python.org/issue11734)

但是`numpy`模块确实支持半浮点数（[http://docs.scipy.org/doc/numpy/user/basics.types.html](http://docs.scipy.org/doc/numpy/user/basics.types.html)）。也许您可以以某种方式使用它将 4 个浮点数打包成一个浮点数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T17:59:09.773

我的想法很奇怪；但它会工作吗？

```
In [31]: nk="-0.0123445552, -29394.2393339, 0.299393333, 0.00002345556"

In [32]: nk1="".join(str(ord(x)) for x in nk)

In [33]: nk1
Out[33]: '454846484950515252535353504432455057515752465051575151515744324846505757515751515151443248464848484850515253535354'

In [34]: import math

In [35]: math.log(long(nk1), 1000)
Out[36]: 37.885954947611985

In [37]: math.pow(1000,_)
Out[37]: 4.548464849505043e+113 
```

你可以很容易地解压这个字符串（`Out[33]`）；例如将其拆分为`32`; 其为`space`。
这个字符串也很长；我们可以通过`math.log`; 当我们进去的时候`Out[36]`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T18:14:43.863

这并不能真正回答您的问题，但是您尝试做的事情违反了[1NF](http://en.wikipedia.org/wiki/First_normal_form)。更改数据库模式以引入交集表真的不是一种选择吗？

# html - css中偶数/奇数行选择器后的颜色行

> ID：14427248
> 
> 赞同：0
> 
> 时间：2013-01-20T17:38:22.670
> 
> 标签：html, css

给定一张桌子

```
<table>
<tr class="sechead">...
<tr>...
<tr>... 
<tr class="sechead">...
<tr>...
<tr>...
</table> 
```

我尝试了以下方法。我希望它为 sechead 之后的行交替颜色。

```
table tr.sechead:nth-child(even) ~ tr{background-color:rgb(75,172,198);}
table tr.sechead:nth-child(odd) ~ tr{background-color:rgb(153,129,189);} 
```

它用相同的颜色为所有行着色。有什么可能的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:08:38.277

`.sechead`问题是第一行之后的所有行`.sechead`

如果调整 HTML 没问题，你可以试试这个：

```
<table>
  <tbody>
    <tr class="sechead">...</tr>
    <tr>...</tr>
    <tr>...</tr>
  </tbody>
  <tbody>
    <tr class="sechead">...</tr>
    <tr>...</tr>
    <tr>...</tr>
  </tbody>
  ...
</table> 
```

那么你的风格可以是：

```
tbody > tr {background-color:rgb(75,175,198);}
tbody:nth-child(even) > tr {background-color:rgb(153,129,189);} 
```

请注意，我删除了“奇数”选择器，因此不支持的浏览器`nth-child`仍然定义了回退。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T03:43:19.530

如果您确定`<tr>`每个`class="sechead"`. 然后你可以试试这个

```
<table>
<tr class="sechead"><td>Hello</td></tr>
<tr><td>content1</td></tr>
<tr><td>content2</td></tr>
<tr class="sechead"><td>welcome</td></tr>
<tr><td>content4</td></tr>
<tr><td>content5</td></tr>
</table> 
```

CSS

```
<style>
tr{width:50px;height:30px;}
table tr.sechead + tr{background-color:rgb(75,172,198);}
table tr.sechead + tr+tr{background-color:rgb(153,129,189);}
</style> 
```

# umbraco - Umbraco - 安装包

> ID：14427249
> 
> 赞同：1
> 
> 时间：2013-01-20T17:38:23.017
> 
> 标签：umbraco

我是 Umbraco 的新手，我正在尝试从 Umbraco 包存储库安装一些包。我在尝试浏览包时收到 500 - Umbraco CMS 中的内部服务器错误。首先，我认为我在安装 Umbraco 时做错了，但是当我查看源代码时，看起来 packages.umbraco.org 有问题。谁能确认他们是否有同样的问题？

![在此处输入图像描述](../Images/d878b808a1c27e0b333d1e2514e60939.png)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T04:16:15.287

从 our.umbraco.org 下载包并安装为本地包。如果这不起作用，那么它可能是权限。如果您无法在 our.umbraco.org 上下载包，则包服务器可能已关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:10:31.510

First of all either check the logs or change the customErrors section of your web.config so that you can see more details on the error.

```
<customErrors mode="Off" /> 
```

I have on a few rare occasions installed a version of Umbraco where I think the installedPackages.config file was empty and without at least an empty `<packages />` node it generates an error. Check the file looks like this as a minimum:

```
<?xml version="1.0" encoding="utf-8"?>
<packages /> 
```

You will usually find the file located in **App_Data\packages\installed\installedPackages.config** however I think this may have changed in more recent versions of Umbraco.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T09:23:26.623

已经有一些很好的提示，所以我将添加一个不太可能的提示！

我在第一次安装时看到了这个错误，由于某种原因，.net 工作进程已经崩溃，所以内部错误只是站点找不到 cassini（或 IIS，具体取决于您的设置）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T12:11:54.037

或者也许没有什么问题，实际上与 Umbraco 服务器的当前问题有关：

> ICYMI：我们的 ISP 的虚拟化平台存在问题，它影响 > [http](http://umbraco.com) ://umbraco.com、umbraco.tv、我们的 Umbraco 和软件包 repo。

[https://twitter.com/umbraco/statuses/293297374271533056](https://twitter.com/umbraco/statuses/293297374271533056)

# c++ - C++：函数在数组的第 4 个元素处折叠

> ID：14427252
> 
> 赞同：0
> 
> 时间：2013-01-20T17:38:38.343
> 
> 标签：c++

你能看看我所面临的：[http ://sdrv.ms/WgafvN](http://sdrv.ms/WgafvN)

另一个截图：[http ://sdrv.ms/UZIp6H](http://sdrv.ms/UZIp6H)

我的函数的文本是：

```
bool print_all_points(POINT** pointer)
{

    if (pointer == NULL||is_array_empty(pointer)) 
    {
        cout << "The array of points is empty." << endl << endl;
        return false;
    }
    else
    {
        int n = _msize(pointer)/sizeof(pointer[0]);
        cout << "The list of points: " << endl<< endl;
        cout << "id (x, y)" << endl;
        cout << "----------" << endl;
        for (int i = 0; i < n; i++)
        {
            cout << (*pointer[i]).id << " (" << (*pointer[i]).x << ", " << (*pointer[i]).y << ")" << endl;      
        }
    }
    return true;
} 
```

该函数预计会打印出数组中的所有点。我的问题是它完美地打印了 3 个点的数组而不是 4 个点的数组。在第四点，它咬住了灰尘。

我不明白是什么问题。从图中可以看出： 1\. 数组的所有 4 个元素都存在。2.正确判断有4个。

问题是什么？你能在这里踢我一脚吗？

稍后添加。

调用它的函数：

```
POINT**  new_point(POINT** pointer, int occup)
{
    char x;
    char y;
    system("cls");
    cout << "INPUT A NEW POINT" << endl << endl;
    cout << "Input x: ";
    cin >> x;
    cout << "Input y: ";
    cin >> y;
    size_t m;
    if (pointer != NULL)
    {
        m = _msize(pointer);
    }

    POINT * tmp_point = new POINT();
    (*tmp_point).id = occup;
    (*tmp_point).x = x-48;
    (*tmp_point).y = y-48;  

    POINT** pn = new POINT * [occup];
    int necessary_memory = occup * 4; // ???? 4 is the size of a pointer.
    if (occup !=1)
    {
        memcpy(pn, pointer, necessary_memory);      
    }
    POINT ** tmp = new POINT * [occup];
    pn[occup - 1] = tmp_point;
    memcpy(tmp, pn, occup * sizeof(POINT)); 
    delete[] pn;
    pn = tmp;   
    size_t n = _msize(pn);
    cout << endl;
    print_all_points(pn);
    return pn;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:07:07.723

几个问题：

*   没有以 64 位复制足够的数据

    ```
    int necessary_memory = occup * 4; 
    ```

    应该

    ```
    int necessary_memory = occup * sizeof(POINT*); 
    ```

*   复制太多数据

    ```
    memcpy(tmp, pn, occup * sizeof(POINT)); 
    ```

    应该：

    ```
    memcpy(tmp, pn, occup * sizeof(POINT*)); 
    ```

*   其他人可以插话，但我不确定 _msize 是否应该用于 new 分配的内存。是对的吗？ [http://msdn.microsoft.com/en-us/library/z2s077bc(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/z2s077bc(v=vs.80).aspx)

*   *标题*中的功能应该是*功能*

别客气。你欠我一杯啤酒。

哦，是的，我找到了我的鞋子……你想要它在哪里？

# r - 将几个参数传递给 lapply 的 FUN（和其他 *apply）

> ID：14427253
> 
> 赞同：127
> 
> 时间：2013-01-20T17:38:41.697
> 
> 标签：r, lapply

`lapply`在使用in时，我有一个关于将多个参数传递给函数的问题`R`。

当我将 lapply 与`lapply(input, myfun);`- 的语法一起使用时，这很容易理解，我可以这样定义 myfun：

```
myfun <- function(x) {
 # doing something here with x
}

lapply(input, myfun); 
```

和元素`input`作为`x`参数传递给`myfun`.

但是，如果我需要向 传递更多参数`myfunc`怎么办？例如，它是这样定义的：

```
myfun <- function(x, arg1) {
 # doing something here with x and arg1
} 
```

如何通过传递两个`input`元素（作为`x`参数）和其他一些参数来使用这个函数？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2013-01-20T17:41:29.617

如果您查看帮助页面，其中一个参数`lapply`是神秘的`...`. 当我们查看帮助页面的参数部分时，我们发现以下行：

```
...: optional arguments to ‘FUN’. 
```

因此，您所要做的就是在`lapply`调用中包含您的其他参数作为参数，如下所示：

```
lapply(input, myfun, arg1=6) 
```

并且`lapply`，认识到这`arg1`不是一个它知道如何处理的论点，将自动将其传递给`myfun`。所有其他`apply`功能都可以做同样的事情。

*附录：*您也可以`...`在编写自己的函数时使用。例如，假设您编写了一个`plot`在某个时间点调用的函数，并且您希望能够从函数调用中更改绘图参数。您可以将每个参数作为参数包含在函数中，但这很烦人。相反，您可以使用`...`（作为您的函数和在其中进行绘图的调用的参数），并将您的函数无法识别的任何参数自动传递给`plot`.

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-09-30T15:59:14.307

正如 Alan 所建议的，函数 'mapply' 将一个函数应用于多个多个列表或向量参数：

```
mapply(myfun, arg1, arg2) 
```

参见手册页： [https ://stat.ethz.ch/R-manual/R-devel/library/base/html/mapply.html](https://stat.ethz.ch/R-manual/R-devel/library/base/html/mapply.html)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-04-17T01:32:30.843

您可以通过以下方式执行此操作：

```
 myfxn <- function(var1,var2,var3){
      var1*var2*var3

    }

    lapply(1:3,myfxn,var2=2,var3=100) 
```

你会得到答案：

[[1]] [1] 200

[[2]] [1] 400

[[3]] [1] 600

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-11-03T12:23:47.473

```
myfun <- function(x, arg1) {
 # doing something here with x and arg1
} 
```

`x`是一个向量或一个列表，并且为 的每个元素分别调用`myfun`in 。`lapply(x, myfun)``x`

**选项1**

如果您想`arg1`在每次`myfun`调用（`myfun(x[1], arg1)`等`myfun(x[2], arg1)`）中使用整体，请使用`lapply(x, myfun, arg1)`（如上所述）。

**选项 2**

但是，如果您想在(等) 的元素旁边分别调用`myfun`的每个元素，则无法使用. 相反，使用（如上所述）或：`arg1``x``myfun(x[1], arg1[1])``myfun(x[2], arg1[2])``lapply``mapply(myfun, x, arg1)``apply`

```
 apply(cbind(x,arg1), 1, myfun) 
```

或者

```
 apply(rbind(x,arg1), 2, myfun). 
```

# extjs4 - ExtJS4 直接表单提交

> ID：14427256
> 
> 赞同：1
> 
> 时间：2013-01-20T17:38:59.007
> 
> 标签：extjs4

Ext.direct 的普通表单提交 n 加载，加载正常，但提交返回错误，因为在未定义的 post 数据中

```
 var _form = Ext.create('Ext.form.Panel', {
 api: {
   submit: submit, //actions I took from code that going above, and never mind what I ll write here. Its not a problem
   load: load           
    },
    baseParams: {
        st_id: st_id,
        id: id
    },
    paramsAsHash: true,
    defaultType: 'textfield',
    buttons: [{
        text: 'Cancel',
        handler: function() {
            this.up('form').getForm().reset();
        }
    }, {
        text: 'Save',
        handler: function() {
            var values = this.up('form').getForm().getValues();
            this.up('form').getForm().submit({
                success: function() {
                    grid.getStore().load();
                }
            });
            this.up('form').getForm().reset();
        }
    }]
}); 
```

在标题中写道，内容类型是“application/json;” 但在其他情况下，它的“application/x-www-form-urlencoded”最后才有意义，对吧？它工作，但以其他形式。所有这些都在 Kohana 下，所以当我清楚地看到控制器中发生了什么时，在 Extdirect 路由器中我看到这个表单没有关于提交方法的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:27:22.380

这是一个愚蠢的错误：我在定义中忘记了@formHandler

# javascript - jsfiddle 代码工作，但在演示页面中时不是

> ID：14427258
> 
> 赞同：0
> 
> 时间：2013-01-20T17:39:04.537
> 
> 标签：javascript, html, css, jsfiddle

我正在测试[@Ilan Biala](https://stackoverflow.com/users/1536154/ilan-biala)写的[这个小提琴](http://jsfiddle.net/nbatothemax/mhJXt/242/)

**它使用jquery 1.9.0**、**onDomReady**和**Normalized css**在菜单中添加子菜单，正如您在 jsfiddle 上看到的那样。例如html是：

```
<nav>
    <ul>
        <li><a href="#" >Sec1</a></li>
        <li><a href="#" >Sec2</a></li>
        <li><a href="#" class="current">Sec3</a></li>
        <li><a href="contacto.html" >Sec4</a></li>
        <ul class="menu">
            <li><a href="#" class="documents" data-icon="&#xe000">Documents</a></li>
            <br>
            <li><a href="#" class="messages" data-icon="&#xe001">Messages</a></li>
            <br>
            <li><a href="#" class="signout" data-icon="&#xe002">Sign Out</a></li>
        </ul>
    </ul>
</nav> 
```

结果是：

![在此处输入图像描述](../Images/3db6bff58a5b1a2c74cc5e1137fc5d78.png)

但是有一个问题，我将代码添加到[我可以访问的服务器](http://eurekavi.com/example.html)，并添加了以下行：

```
<link rel="stylesheet" type="text/css" href="css/menu.css"  />
<script type="text/javascript" src="js/jquery-1.9.0.min.js"></script>
<script type="text/javascript" src="js/menu.js"></script> 
```

模仿 jsfiddle 中的那些。html是：

```
 <!doctype html>
<head>
<title>Example</title>
<link rel="stylesheet" type="text/css" href="css/menu.css"  />
<script type="text/javascript" src="js/jquery-1.9.0.min.js"></script>
<script type="text/javascript" src="js/menu.js"></script>
</head>
<body>
<nav>
    <ul>
        <li><a href="#" >Sec1</a></li>
        <li><a href="#" >Sec2</a></li>
        <li><a href="#" class="current">Sec3</a></li>
        <li><a href="contacto.html" >Sec4</a></li>
        <ul class="menu">
            <li><a href="#" class="documents" data-icon="&#xe000">Documents</a></li>
            <br>
            <li><a href="#" class="messages" data-icon="&#xe001">Messages</a></li>
            <br>
            <li><a href="#" class="signout" data-icon="&#xe002">Sign Out</a></li>
        </ul>
    </ul>
</nav>
</body>
</html> 
```

那么，正如您所看到的，子菜单不起作用，是什么导致了故障？

我怀疑不同的问题：

1.  也许是包装代码的**onDomReady**属性，因此它将在 onDomReady 窗口事件中运行，如果是这样，我该如何在代码上指出这一点：

    $(document).ready(function() { //在 menu.js 中添加所有 JS 代码 });

2.  规范化的 css，但应该进行重置....

3.  jQuery 1.9.0 中存在问题，可能是使用 js 的放置顺序...

你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T17:41:43.677

你是对的;

onDomReadycode 是：

```
$(document).ready(function(){
//your code
}) 
```

就好像您将 jsfiddle 中的事件更改为 body wrap 它不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T18:13:35.523

请参阅此处修改为使用您想要的相同的小提琴：[**JS Fiddle Link**](http://jsfiddle.net/OMS_/mhJXt/258/)

它与您发布的小提琴完全相同，只是**将 onDomReady**设置为“ **no wrap (head)** ”并将 JavaScript 代码包装在`ready`函数中。这使它与您发布的 HTML 一起工作。

```
// jQuery(document).ready(function($) {
jQuery(function($) {
 ....
 // your code
}); 
```

因此，作为答案，当您在文档的`head`标记中加载 jQuery 时`html`，您需要使用`.ready()`jQuery 的 API 并将所有代码包装在`ready` `function`

# xcode - Xcode sqlite3 似乎没有任何工作正常

> ID：14427267
> 
> 赞同：0
> 
> 时间：2013-01-20T17:40:15.343
> 
> 标签：xcode, sqlite

我现在使用最新的 Xcode 和 sqlite3 工作了 4 天，我对它有点疯狂，因为我的行为令人毛骨悚然。

我这样做：

```
NSString *selectWPIDQuery = [NSString stringWithFormat:@"SELECT ID FROM WORKOUTPLANS WHERE NAME = '%s';", [[aWorkoutPlan name] UTF8String]];
//NSLog(@"%@", [aWorkoutPlan name]);
const char *select_wp_id_query = [selectWPIDQuery UTF8String];

if(sqlite3_open([dbPathString UTF8String], &workoutPlansDB) == SQLITE_OK) {

    int index = sqlite3_exec(workoutPlansDB, select_wp_id_query, NULL, NULL, &error);
    NSLog(@"Der Index %d", index);
} 
```

这里的索引是 0 但 0 不存在。如果我使用 firefox 插件 sqlite 管理器（完全相同的查询）执行此查询，它会为我提供索引 1 并且索引 1 是正确的。

为什么xcode中的地狱sqlite3给我一个0？？？那是不正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T17:50:31.910

您使用`sqlite3_exec`不正确。它返回结果代码，而不是索引。结果代码 0 是`SQLITE_OK`，而结果代码 1 是`SQLITE_ERROR`。

请参阅[`sqlite3_exec`文档](http://www.sqlite.org/c3ref/exec.html)。您必须提供回调以获取查询结果，或使用通用`sqlite3_prepare_v2()`、`sqlite3_step()`和`sqlite3_finalize()`API。

# python - 如何在 Python 中遍历 JSON 对象（twitter api 搜索的结果）并保存到 CSV 文件？

> ID：14427281
> 
> 赞同：0
> 
> 时间：2013-01-20T17:41:41.407
> 
> 标签：python, twitter, python-2.7

目标：需要了解如何将下面 api 搜索中的数据解析为 CSV 文件。搜索以以下格式返回结果：

```
[(u'Bertille Maciag', 10), (u'Peter Prior', 5), (u'Chris OverPar Duguid', 4), (u
'Selby Dhliwayo', 4), (u'FakeBitch!', 4), (u'Django Unchianed UK', 4), (u'Padrai
g Lynch ', 4), (u'Jessica Gunn', 4), (u'harvey.', 4), (u'Wowphotography', 3)] 
```

我是 python 的新手，任何帮助将不胜感激

```
import twitter, json, operator
#Construct Twitter API object
searchApi = twitter.Twitter(domain="search.twitter.com")
#Get trends
query = "#snow"
tweeters = dict()

for i in range(1,16):
    response = searchApi.search(q=query, rpp=100, page=i)
    tweets = response['results']
    for item in tweets:
        tweet = json.loads(json.dumps(item))
        user = tweet['from_user_name']
        #print user
        if user in tweeters:
            # print "list already contains", user
            tweeters[user] += 1
        else:
           tweeters[user] = 1

sorted_tweeters = sorted(tweeters.iteritems(), key=operator.itemgetter(1),     reverse=True)  

print len(tweeters)
print tweeters

print sorted_tweeters[0:10]
print 'Done!' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T18:32:09.483

看起来您已经完成了所有艰苦的工作，只是缺少“保存到 csv”部分。

```
import collections
import twitter, json, operator
#Construct Twitter API object
searchApi = twitter.Twitter(domain="search.twitter.com")
#Get trends
query = "#snow"
tweeters = collections.defaultdict(lambda: 0)

for i in range(1,16):
    response = searchApi.search(q=query, rpp=100, page=i)
    tweets = response['results']
    for item in tweets:
        user = item['from_user_name']
        #print user
        tweeters[user] += 1

sorted_tweeters = sorted(tweeters.iteritems(), key=operator.itemgetter(1), reverse=True)  

str_fmt = u'%s\u200E, %d \n'
with open('test_so.csv','w') as f_out:
    for twiters in sorted_tweeters:
        f_out.write((str_fmt % twiters).encode('utf8')) 
```

您需要格式字符串上的“u”，`encode`因为用户名中有非 ascii 字符。 `u'\200E`是 ltr 标记，以便 csv 文件使用 rtl 语言用户名看起来正确。

我还稍微清理了迭代代码，通过使用`defaultdict`你不需要检查键是否存在，如果它不存在，则调用生成器函数并返回它的值（在本例中为 0）。

`item`已经是 a 了`dict`，不需要再转成 json 字符串再转回 a`dict`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T18:29:31.543

你看过[python CSV](http://docs.python.org/2/library/csv.html)模块吗？使用您的输出：

```
import csv, os

x = [(u'Bertille Maciag', 10), (u'Peter Prior', 5), (u'Chris OverPar Duguid', 4), (u'Selby Dhliwayo', 4), (u'FakeBitch!', 4), (u'Django Unchianed UK', 4), (u'Padraig Lynch ', 4), (u'Jessica Gunn', 4), (u'harvey.', 4), (u'Wowphotography', 3)]

f = open("/tmp/yourfile.csv", "w")
writer = csv.writer(f, quoting=csv.QUOTE_ALL)
for i in x:
    writer.writerow(i)

f.close() 
```

# javascript - 使用 Jquery 在单击事件上将新属性附加到现有 JSON 对象

> ID：14427283
> 
> 赞同：0
> 
> 时间：2013-01-20T17:41:47.027
> 
> 标签：javascript, jquery, json, object

我正在尝试将输入字段中的值附加到现有的 JSON 对象中，但我不断收到错误消息。

这是我的代码：

```
$('#addObjectBtn').click(function() {
            //Inject Property into current object
            var newObjName = $('#newObjectName').val();
            var newObjType = $('#newObjectType').val();
            objStr.View[newObjType + "_100"] = {"BackgroundImage":'""' + newObjName + '""'};
            $('#newObjectPrompt').dialog('close');
        }) 
```

编辑：添加 JSON 对象。我正在尝试添加例如另一个按钮。在我的示例中，这将是“Button_100”

```
{
    "View": {
        "Name": "Untitled3",
        "ImportWidth": 320,
        "ImportHeight": 480,
        "Image_1": {
            "BackgroundImage": "Image.png",
            "Position": [0, 0],
            "Width": 320,
            "Height": 480
        },
        "Button_1": {
            "BackgroundImage": "ButtonTop.png",
            "Position": [61, 83],
            "Width": 217,
            "Height": 58
        },
        "Button_2": {
            "BackgroundImage": "ButtonBottom.png",
            "Position": [81, 114],
            "Width": 205,
            "Height": 73
        },
        "TextField_1": {
            "BackgroundImage": "TextFieldLogin.png",
            "Position": [102, 336],
            "Width": 189,
            "Height": 31
        },
        "Label_1": {
            "Position": [137, 100],
            "Width": 54,
            "Height": 20,
            "Text": "HiRob",
            "FontSize": 18,
            "Color": [0, 0, 0, 1]
        },
        "Label_2": {
            "Position": [43, 342],
            "Width": 72,
            "Height": 20,
            "Text": "LogOut:",
            "FontSize": 18,
            "Color": [0, 0, 0, 1]
        },
        "Label_3": {
            "Position": [115, 234],
            "Width": 126,
            "Height": 20,
            "Text": "AnotherButton",
            "FontSize": 18,
            "Color": [0, 0, 0, 1]
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T17:43:11.943

`newObjType`已经是一个字符串，您不需要所有这些引号。试试这样：

```
objStr.View[newObjName + "_100"] = {BackgroundImage: newObjType}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T18:47:02.350

尝试

```
objStr.View[newObjName + "_100"] = JQuery.phraseJSON('{"BackgroundImage":"' + newObjType +'"}'); 
```

使用phraseJSON有点绕，但它肯定会完成工作，它将JSON字符串转换为JS对象。

编辑： newObjType 已经是一个字符串

或者，可以使用没有 JQuery JSON.parse(string)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T18:26:15.437

**更新**：

在移动设备上没有调试工具的情况下，我会推荐[**WINERE**](http://people.apache.org/~pmuellr/weinre/docs/latest/)。它为您在桌面上为在移动设备上运行的应用程序提供了相同的控制台和其他东西

此外，查看您的评论，似乎错误在其他地方。您可以选择尝试这种分配方式

```
var newObjName = $('#newObjectName').val();
var newObjType = $('#newObjectType').val();
var tempObj = {"BackgroundImage": newObjName };
objStr.View[newObjType + "_100"] = tempObj; 
```

* * *

**老答案**：

我想错误是`SyntaxError: Unexpected token :`
我想这是由`{"BackgroundImage":'""' + newObjName + '""'};`
你在代码中设置属性的方式也是错误的

作为更正，我认为您需要进行 2 处更改

更改您的代码：

```
{"BackgroundImage":'""' + newObjName + '""'} 
```

到

```
{ BackgroundImage : newObjName } 
```

酷，不是吗？？

# c++ - 执行 python 脚本的 Python/C API 问题

> ID：14427284
> 
> 赞同：0
> 
> 时间：2013-01-20T17:41:50.750
> 
> 标签：c++, python

我正在使用 python 3.3 c API，但我一直无法找到加载脚本并执行它的方法。如果我从命令提示符运行脚本 test.py，它会执行得很好，但是当我尝试从 C++ 代码运行它时，会遇到以下错误： NameError: name 'x' is not defined 打印到我的应用程序的控制台窗口. 我尝试使用以运行 python 脚本的代码如下。我几乎想知道这是否是某种类型的字符编码问题。

```
 Py_Initialize();
 FILE* PythonScriptFile = fopen("test.py", "r");
 PyRun_SimpleFile(PythonScriptFile, "test.py");
 fclose(PythonScriptFile);
 Py_Finalize(); 
```

另外，python 测试文件。

```
print("test") 
```

有谁知道这可能是什么原因造成的？

# html - 使溢出忽略特定的子元素

> ID：14427288
> 
> 赞同：0
> 
> 时间：2013-01-20T17:42:10.560
> 
> 标签：html, css

我需要在页面顶部放置一个大封面图片。它比我的 960px 内容包装器更宽，所以我将它放在外面，但我不希望它因为它的宽度而导致页面水平滚动。是否有一种既定的方法可以使容器在滚动时忽略特定的子项？

我的第一个想法是让它成为 100% 宽度的 div 的居中背景，但图像是动态的，不应该由 CSS 分配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:47:30.220

您可以`max-width:100%`在图像上进行设置，如果它在全尺寸时太大，这将缩小以适合（只要确保`height`未设置或`auto`）

或者，您可以使用背景图像，但将“图像”部分`none`放在外部 CSS 中。然后，你应该`src="path/to/image.png"`在你的地方`<img />`，而不是把`style="background-image:url('path/to/image.png');"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T17:52:19.447

您可以缩放图像以适合容器的宽度 ( `max-width: 100%;`)，或者`overflow-x: hidden;`在图像的父元素上设置以隐藏任何水平溢出的内容（避免滚动条）。

# hide - 如何仅在 Internet Explorer 上隐藏网站的元素或 div？

> ID：14427299
> 
> 赞同：0
> 
> 时间：2013-01-20T17:44:18.217
> 
> 标签：hide, element

我的网站上有一个元素，该元素在除 Internet Explorer 之外的所有其他网站中都显示良好，我只想在 Internet Explorer 上隐藏它。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:51:34.407

您可以使用[window.navigator](https://developer.mozilla.org/en-US/docs/DOM/window.navigator)来识别您的站点用户正在使用的浏览器。然后您可以在检测到浏览器后在javascript中使用[可见性](http://www.w3schools.com/jsref/prop_style_visibility.asp)属性或[显示属性来隐藏它。](http://www.w3schools.com/jsref/prop_style_display.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:41:29.673

您可以使用

```
$(document).ready(function(){
  if($.browser.msie == true)
  {
    alert(1);
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T18:06:14.993

您可以使用 IE 条件注释来包装元素。由于只有 IE 理解条件注释，所以只有 IE 会隐藏元素。

```
<!--[if !IE]><!-->
    <element>
    </element>
<!--<![endif]--> 
```

# jqgrid - 从子窗口调用父窗口函数

> ID：14427300
> 
> 赞同：1
> 
> 时间：2013-01-20T17:44:20.060
> 
> 标签：jqgrid, dynamics-crm-2011

我正在尝试从弹出窗口调用父页面上的函数。我不断收到错误`Object doesn't support property or method 'GetValueFromChild'.`，我相信错误出现在弹出窗口的这一行 - `window.top.opener.parent.Xrm.Page.GetValueFromChild(person);`。我尝试使用`window.opener.GetValueFromChild(person);`但仍然得到相同的错误。任何帮助深表感谢。这是代码 -

```
 //parent
    $(document).ready(function () {
        // This needs to be called from Child window
        function GetValueFromChild(person) {
            alert(person.Id);
            alert(person.Name);
            alert(person.Market);
        }    
    });

//parent - jqgrid

    colModel: [
                            {
                                name: 'Person', index: 'PersonName', width: 70, editable: true, edittype: 'button',
                                editoptions: {
                                    value: 'Select',
                                    dataEvents: [{
                                        type: 'click',
                                        fn: function (elem) {
                                            var left = (screen.width / 2) - (700 / 2);
                                            var top = (screen.height / 2) - (550 / 2);

                                            var popup = window.open("popup.htm", "popup", "resizable=1,copyhistory=0,menubar=0,width=700,height=550,left='+left+',top='+top");
                                            popup.focus();
                                        }
                                    }]
                                }
                            }, 
```

//弹出窗口。这个页面有另一个 jqgrid 和一个 OK 按钮。

```
 $('#btnOK').click(function() {
                        var person= {
                            Id: grid.jqGrid('getCell', grid.getGridParam('selrow'), 'Id'),
                            Name: grid.jqGrid('getCell', grid.getGridParam('selrow'), 'Name'),
                            Market: grid.jqGrid('getCell', grid.getGridParam('selrow'), 'Market')
                        };

                        window.top.opener.parent.Xrm.Page.GetValueFromChild(person); //Error is on this line.
                        window.close();
                    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:01:24.433

您`GetValueFromChild`的范围仅限于您的`ready`回调。如果它不需要访问其他作用域函数和变量，那么只需在顶层声明它即可。如果它确实需要访问它们，您需要在回调中创建对它的全局引用。

1.  在顶层声明：

    ```
    // This needs to be called from Child window
    function GetValueFromChild(person) {
        alert(person.Id);
        alert(person.Name);
        alert(person.Market);
    } 
    ```

2.  从范围导出：

    ```
    $(document).ready(function () {
        // This needs to be called from Child window
        function GetValueFromChild(person) {
            alert(person.Id);
            alert(person.Name);
            alert(person.Market);
        }
        window.GetValueFromChild = GetValueFromChild;
    }); 
    ```

# algorithm - 如何将树形成通向每片叶子的单独路径

> ID：14427301
> 
> 赞同：1
> 
> 时间：2013-01-20T17:44:36.827
> 
> 标签：algorithm, data-structures, tree, common-lisp

我有一棵树：

```
(A . ((C . ((D . nil)(E . nil)))
      (B . ((F . nil)(G . nil))))) 
```

我想把这棵树变成：

```
((A C D) (A C E) (A B F) (A B G)) 
```

我已经为此实现了这个功能：

```
(defun tree->paths (tree &optional buff)
  (labels ((recurse (follow-ups extended-list)
             (if follow-ups
                 (append (list (tree->paths (car follow-ups) extended-list))
                         (recurse (cdr follow-ups) extended-list))
               nil)))
    (rstyu:aif (cdr tree)
               (recurse it (append buff (list (car tree))))
               (append buff (list (car tree)))))) 
```

但应用它会导致：

```
(tree->paths '(A . ((C . ((D . nil) (E . nil)))
                    (B . ((F . nil) (G . nil))))))
=>
(((A C D) (A C E)) ((A B F) (A B G))) 
```

我必须在递归中缺少某种附加/合并，但我没有看到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:09:55.977

`list`您必须删除`(append (list (tree->paths`

`tree->paths`返回路径列表；也是如此`recurse`。因此，它们可以在不包含在`list`调用中的情况下被附加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:55:54.587

正如我在问题中尝试的那样，我重新开始并选择了相反的方法，即从叶到根而不是从根到叶：

```
(defun tree->paths2 (tree)
  (labels ((recurse (follow-ups)
         (if follow-ups
         (append (tree->paths2 (car follow-ups))
             (recurse (cdr follow-ups)))
         nil)))
    (rstyu:aif (cdr tree)
           (mapcar #'(lambda(arg)
               (cons (car tree) arg))
               (recurse it))
           (list tree))))

(tree->paths2 '(A . ((C . ((D . nil) (E . nil)))
                     (B . ((F . nil) (G . nil))))))
=>
((A C D) (A C E) (A B F) (A B G)) 
```

但是，如果有办法解决我的第一种方法，我更愿意接受这样的修复作为答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:53:11.070

在这里，我尝试重写它以使其线性工作（因为您的原始函数会耗尽堆栈空间）。但是，在这样做的同时，我发现了一些东西，您通常会认为这是您最初的想法：

```
(defun tree-to-paths (tree)
  (loop with node = tree
       with trackback = nil
       with result = nil
       with head = nil
       with head-trackback = nil
       while (or node trackback) do
       (cond
         ((null node)
          (setf node (car trackback)
                trackback (cdr trackback)
                result (cons head result)
                head (car head-trackback)
                head-trackback (cdr head-trackback)))
         ((consp (car node))
          (setf trackback (cons (cdr node) trackback)
                head-trackback (cons head head-trackback)
                head (copy-list head)
                node (car node)))
         (t (setf head (cons (car node) head)
                  node (cdr node))))
       finally (return (nreverse (mapcar #'nreverse result))))) 
```

在您的示例数据中，您想要接收的结果在直觉上似乎是正确的，但您也可以将其视为有更多路径，例如：

`A -> C -> NIL`- 从查看您的数据来看，此结果似乎是多余的，但总的来说，您可能也希望获得这些结果/通常很难将它们全部过滤掉。

# android - 自动完成文本框不会显示建议

> ID：14427306
> 
> 赞同：0
> 
> 时间：2013-01-20T17:45:08.517
> 
> 标签：android, android-layout

logcat 没有错误，但是建议列表不会显示我不确定我哪里出错了。我在警报对话框中夸大了自动完成视图。这是我下面的代码

```
reg_btn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

                final String[] devplatforms =
                     {
                     "C",
                     "C++",
                     "Java",
                     "iPhone",
                     "Android",
                     "ASP.NET",
                     "PHP",
                     "Python",
                     };

                AlertDialog.Builder adb = new AlertDialog.Builder(SettingsMain.this);
                LayoutInflater inflater = SettingsMain.this.getLayoutInflater(); 
                final View searchlayout = inflater.inflate(R.layout.search_friend, null);

               adb.setView(searchlayout)

               .setPositiveButton("Ok", new DialogInterface.OnClickListener() {  
                    public void onClick(DialogInterface dialog, int whichButton) {  
                        AutoCompleteTextView friend_name;
                        friend_name = (AutoCompleteTextView) searchlayout.findViewById(R.id.friend_name);
                        friend_name.setThreshold(1);
                        friend_name.setAdapter(new ArrayAdapter<String>(getApplicationContext(),android.R.layout.simple_dropdown_item_1line,devplatforms));

                        String name = friend_name.getText().toString();
                        Log.d( "ECHO" , "Pin Value : " + name);
                        return;                  
                       }  
                  })
               .setNegativeButton("Done", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {

                        dialog.cancel(); 
                    }
                }); 

                    adb.show();  

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T17:51:07.453

看起来这段代码放错了地方：

```
AutoCompleteTextView friend_name;
friend_name = (AutoCompleteTextView) searchlayout.findViewById(R.id.friend_name);
friend_name.setThreshold(1);
friend_name.setAdapter(new ArrayAdapter<String>(getApplicationContext(),android.R.layout.simple_dropdown_item_1line,devplatforms)); 
```

将其移至此行上方：

```
adb.setView(searchlayout) 
```

您夸大了布局，但您只是在“确定”按钮中将 AutoCompleteTextView 传递给适配器......在显示对话框*之前设置 AutoCompleteTextView。*

# php - 为什么我在这段代码中得到一个未捕获的异常？

> ID：14427309
> 
> 赞同：0
> 
> 时间：2013-01-20T17:45:16.580
> 
> 标签：php, exception, try-catch

所以在我下面的代码中，我不确定我哪里出错了。语法使用不当，变量使用不当？请帮忙！

出于某种原因，我在浏览器中运行它并返回

`"Fatal error: Uncaught exception 'numexception' with message 'The numbers are not set' in C:\xampp\htdocs\php_testing\test.php:29 Stack trace: #0 {main} thrown in C:\xampp\htdocs\php_testing\test.php on line 29"`.

我不明白我的代码哪里出错了？？？

```
class numexception extends Exception{}

function multiply($a,$b){
     echo $a*$b;
}

$var1 = 5;
//$var2 = 2; as you can see variable 2 is not set as I commented it out to test
//the exception

if(!isset($var1) or !isset($var2)){
  throw new numexception("The numbers are not set");
}

try{
    multiply($var1,$var2);
}
catch(numexception $e){
    echo "This exception was caught:".$e->getMessage();
}

echo "The script then continues"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T17:48:46.367

`throw`不在 中，因此`try`无法`catch`编辑。

您的代码所做的就像用高尔夫球击打某人，*然后*大喊“Fore！”。

# javascript - javascript设置高度

> ID：14427311
> 
> 赞同：0
> 
> 时间：2013-01-20T17:45:30.540
> 
> 标签：javascript, jquery, css, height

我正在尝试做非常简单的事情，设置 div 的高度取决于高度。所以当网站加载时高度是45px，点击按钮后高度是100px。下次单击后，我希望我的高度回到 45 像素。我正在使用 jQuery，代码如下： [http](http://codepen.io/zlyfenek/pen/pAcaw) ://codepen.io/zlyfenek/pen/pAcaw 感谢您的帮助，因为我是 jQuery 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:53:29.197

您可以使用`.toggleClass()`jQuery 的功能。

```
$(function(){
    $('.yourButton').click(function(){
       $('.yourDiv').toggleClass('big');
    });
}); 
```

演示：http: [//jsfiddle.net/FYyU6/](http://jsfiddle.net/FYyU6/)

# 笔记：

你的`big`css 类应该在你的小类之后`Order Matters`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T17:54:02.533

更改`$("button").one`为`$("button").on`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T17:53:50.817

您应该只有一个将高度设置为 100px 的类，然后在单击按钮时切换它：

```
.opened { height: 100px; }

$("button").on("click", function() {
    $(".con_b").toggleClass("opened");
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T17:54:01.073

```
 function showHeight(ele, h) {
$("div").text("The height for the " + ele +
" is " + h + "px.");
}

// use .on instead of .one, .one will online listen for a click one time, 
// so your second click will not be seen
$("button").on('click', function () {
  if ($(".con_b").height() == 45)
  {
    $(".con_b").height(100);
  }
  else
  {
    // show height and change height should be two different actions
    $('.con_b').height(45);
    showHeight(".con_b",$(".con_b").height());
  }

 }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T17:59:56.257

```
 function showHeight(ele, h) {
$("div").text("The height for the " + ele +
" is " + h + "px.");
}
$("button").on('click', function () {

  if ($(".con_b").height() == 45)
  {
    $(".con_b").height(100);
  }
  else
  {
    $(".con_b").height(45);
  } 
```

它`$("button").on`不是`$("button").one`

# c - 使用 c 字符串发送多个空字符。ASCII 装甲

> ID：14427312
> 
> 赞同：3
> 
> 时间：2013-01-20T17:45:38.247
> 
> 标签：c, ascii

如何使用 C 字符串包含多个空字符 \x00。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T17:51:56.840

C 的字符串函数（例如`strlen()`,`printf()`等）假定缓冲区将以空值结尾。如果您有一个包含多个 0x00 字符的缓冲区，那么您不能使用任何将 0x00 视为空字符的函数。

因此，您可以使用- 将内存字节从一个地方移动到另一个地方，而不是使用例如`strcpy()`（或），而不是依赖于这种以空值终止的行为。`strncpy()``memcpy()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T17:51:24.037

AC 字符串只是一个以空字符结尾的字符数组。但是，如果将其视为数组，则它可以包含内部空字符：

```
char data[4] = { 'x', '\0', 'y', '\0' }; 
```

但是，您必须小心，因为大多数标准库函数都不起作用，因为它们期望 C 字符串以第一个空字符结尾。

例如，`strlen(data)`将在上面的示例中返回 1，因为它在第一个空字符之后停止。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T17:48:42.673

你所要做的就是像

```
char* data = (char*)malloc( 8 ) ; // allocate space for 8 bytes
memset( data, 0, 8 ) ; // set all 8 bytes to 0's 
```

# php - PHP 和 HTML：获取所有 GET 值

> ID：14427314
> 
> 赞同：0
> 
> 时间：2013-01-20T17:45:39.263
> 
> 标签：php, html, get

我需要一个 PHP 程序，它将从 HTML 链接（使用 GET）中获取所有值，无论地址栏中的内容有多少更改，然后在页面上打印出来。我现在的代码是这样的：

HTML：

```
<a href="test.php?a=value1&amp;b=value2& amp;c=value3">Link</a> 
```

PHP：

```
<?php 

Echo "Value1: "; Echo $_GET["a"]; Echo "\n";
Echo "Value2: "; Echo $_GET["b"]; Echo "\n";
Echo "Value3: "; Echo $_GET ["c"];

?> 
```

它仅适用于这些值，但它无法处理例如在地址栏中添加的另一个变量。我需要某种 PHP 函数，它可以通过 GET 函数查找各种变量。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T17:47:17.587

使用循环（根据需要修改）：

```
foreach ($_GET as $num => $value)
{
    echo 'Value ' . $num . ': ' . htmlentities($value). "<br>" . PHP_EOL;
} 
```

参考：

*   [控制结构](http://php.net/manual/en/language.control-structures.php)
*   [`htmlentities()`](http://php.net/manual/en/function.htmlentities.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T17:47:39.307

您使用 print_r($GET) 获得所有 $_GET 值...

否则你可以这样

```
foreach(array_keys($_GET) as $key) {

echo htmlspecialchars($_GET[$key]);

} 
```

***后来编辑：考虑到评论中暴露的安全问题***

使用这种方法很好，因为你知道你有什么样的变量，然后你可以做一些很酷的事情，比如：

```
if ($key == 'a') do this
if ($key == 'b' && $_GET[$key] == 'bar') do that 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T17:48:12.613

```
<?php
    print_r($_GET);
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T17:48:12.503

像这样的东西：

```
<?php
foreach ($_GET as $key => $value) {
  echo htmlspecialchars($key) . " - " . htmlspecialchars($value) . "<br>";
}
?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-20T17:48:43.170

使用 foreach 循环

```
foreach ($_GET as $key => $val){
  echo htmlentities($key).": ".htmlentities($val)."<br />\n";
 } 
```

或者干脆——

```
echo "<pre>".print_r($_GET,1)."</pre>"; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-20T17:49:21.110

要获取所有值及其对应的名称：

```
foreach($_GET as $key => $value)
{
     echo $key . ' - ' . $value;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-20T17:49:36.183

```
$my_get = array(); // store $_GET vars

if ('GET' == $_SERVER['REQUEST_METHOD']) // check that request method is "get"
    foreach ($_GET as $key => $val)
    {
        $my_get[$key] = $val; // store
    } 
```

输出 $my_get:

```
array (
  'a' => 'value1',
  'b' => 'value2',
  'c' => 'value3',
) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-20T17:52:48.460

由于 $_GET 只是一个数组，因此您可以使用 for 每个循环来获取它的元素。

# batch-file - Windows Batch Lame 编码语法

> ID：14427315
> 
> 赞同：2
> 
> 时间：2013-01-20T17:45:40.230
> 
> 标签：batch-file, mp3, lame

我需要让一个很小的 ​​Windows 批处理文件 (convert.cmd) 正常工作，它可以更改指定文件夹中所有 MP3 文件的比特率。我需要将 2 个参数传递给批处理文件：

*   包含 MP3 文件的文件夹的路径
*   比特率我想把它们改成。

我正在使用 Lame.exe 编码器。lame.exe在一个地方，convert.cmd可以和lame.exe在同一个文件夹，但是MP3文件的文件夹可以在任何地方。原始版本（不带参数）是（如果我将 convert.cmd 放在带有 MP3 文件的文件夹中，它工作正常）：

```
@ECHO OFF
FOR %%f IN (*.mp3) DO (
    D:\Apps\Lame\lame.exe -h -b 128 "%%f" "%%f.temp"
    DEL "%%f"
    REN "%%f.temp" "%%f"
)
PAUSE 
```

我需要传递“%2”而不是 128，它将是第二个命令行参数，比特率，对于 MP3 文件的文件夹路径，我需要传递“%1”。**所以，我得到了这个，但它不起作用。**

```
@ECHO OFF
FOR %%f IN (%1\*.mp3) DO (
    D:\Apps\Lame\lame.exe -h -b %2 "%%f" "%%f.temp"
    DEL "%%f"
    REN "%%f.temp" "%%f"
)
PAUSE 
```

如何使其按描述工作？

如何确保我的批处理文件转换现有文件，而不是在某处创建它们的新转换副本？非常感谢；）干杯。

**更新**

convert.cmd 的位置是：

d:\Apps\Lame\convert.cmd，与 lame.exe 相同的文件夹

MP3文件的位置是：

d:\温度\xxx\

*   文件1.mp3
*   文件2.mp3

当我像这样从命令行执行 convert.cmd 时：

转换.cmd d:\temp\xxx\ 64

我在 d:\temp\xxx\ 中得到的是：

*   文件 1.mp3.temp
*   文件2.mp3.temp

转换后的文件去哪了？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:33:06.730

谢谢，我已经想出了如何编写这个脚本。

如果有人需要这种类型的转换，我们在这里： 1 参数 - 包含 mp3 文件的文件夹的完整路径 2 参数 - 要转换为的比特率

（记住，lame.exe 不保留 mp3 标签） ps 谁需要 mp3 标签？:)

```
@ECHO OFF
ECHO.
ECHO BEGIN CONVERSION
ECHO.
CD %1
DIR *.mp3
ECHO -------------------------------------------------------------------------------
ECHO THESE MP3 FILES WILL BE CONVERTED TO BITRATE %2 KBPS
ECHO -------------------------------------------------------------------------------
PAUSE
FOR %%f IN (*.mp3) DO (
    ECHO -------------------------------------------------------------------------------
    ECHO CONVERTING: %%f
    ECHO -------------------------------------------------------------------------------
    D:\Apps\Lame\lame.exe -h -b %2 "%%f" "%%~nf.wav"
    DEL "%%f"
    REN "%%~nf.wav" "%%f"
)
ECHO.
ECHO END CONVERSION
ECHO.
PAUSE 
```

# servlets - 如何从代码中访问漂亮的 URL

> ID：14427316
> 
> 赞同：0
> 
> 时间：2013-01-20T17:45:40.947
> 
> 标签：servlets, struts2, tuckey-urlrewrite-filter

我`UrlRewriteFilter`用来使我的网址*漂亮*。在我的应用程序中，我经常需要访问当前 URL。我这样做：

```
ServletActionContext.getRequest().getRequestURI(); 
```

然而，这给了我 URL 的*丑陋*版本。如何在漂亮的 URL 变成丑陋的 URL 之前访问它`UrlRewriteFilter`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:03:33.167

您可以扩展 URLRewriteFilter 类并覆盖 doFilter 方法以将请求路径存储在请求属性中（使用此属性访问漂亮的 url）。稍后调用 super.doFilter 方法让 URLRewriteFilter 完成它的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:06:19.110

我在[这里](https://stackoverflow.com/questions/5391899/print-the-access-logs-before-urlrewritefilter)找到了这个解决方案。

这对我有用：

```
ServletActionContext.getRequest().getAttribute(
            "javax.servlet.forward.request_uri"); 
```

# c++ - C++ 和 OpenCV：将图像转换为灰度的问题

> ID：14427323
> 
> 赞同：3
> 
> 时间：2013-01-20T17:46:34.347
> 
> 标签：c++, opencv, rgb, grayscale

这是我的代码。这很简单。

```
Mat image  = imread("filename.png");

imshow("image", image);
waitKey();

//Image looks great.

Mat image_gray;
image.convertTo(image_gray, CV_RGB2GRAY);

imshow("image", image_gray);
waitKey(); 
```

但是当我拨打该`image.convertTo(image_gray, CV_RGB2GRAY);`线路时，我收到以下错误消息：

```
OpenCV Error: Assertion failed (func != 0) in unknown function, file ..\..\..\sr
c\opencv\modules\core\src\convert.cpp, line 1020 
```

使用 OpenCV 2.4.3

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T17:51:08.857

该方法[`convertTo`](http://docs.opencv.org/modules/core/doc/basic_structures.html?#void%20Mat%3a%3aconvertTo%28OutputArray%20m,%20int%20rtype,%20double%20alpha,%20double%20beta%29%20const)不进行颜色转换。

如果要从 BGR 转换为 GREY，可以使用函数[cvtColor](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html?#void%20cvtColor%28InputArray%20src,%20OutputArray%20dst,%20int%20code,%20int%20dstCn%29)：

```
Mat image_gray;
cvtColor(image, image_gray, CV_BGR2GRAY); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T17:51:11.900

该功能[`cv::Mat::convertTo`](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat-convertto)不适用于颜色转换。它用于类型转换。目标图像应具有与源图像相同的大小和通道数。

要将 RGB 转换为灰色，请使用函数[`cv::cvtColor`](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html#cvtcolor).

```
cv::cvtColor(image,image_gray,CV_RGB2GRAY); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T02:18:42.223

如果您需要以灰度方式获取视频（例如来自网络摄像头），您还可以将视频源的饱和度设置为零。（例如在 Python 语法中）

```
 capture = cv.CaptureFromCAM(camera_index) 
```

`...` `cv.SetCaptureProperty(capture, cv.CV_CAP_PROP_SATURATION,0)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-21T04:47:15.750

**image.convertTo(image_gray, CV_RGB2GRAY);** 这是错误的。正确的是，

```
 Mat gray_image;
 cvtColor(image, gray_image, CV_BGR2GRAY); 
```

试试这个。

# windows-phone-8 - 从可移植类库更新 UI 线程

> ID：14427340
> 
> 赞同：8
> 
> 时间：2013-01-20T17:48:02.537
> 
> 标签：windows-phone-8, mvvmcross, portable-class-library

我有一个在 Windows Phone 8 上运行的 MVVM Cross 应用程序，我最近移植到使用可移植类库。

视图模型位于可移植类库中，其中一个公开了一个属性，该属性通过数据绑定启用和禁用 Silverlight for WP 工具包中的 PerformanceProgressBar。

当用户按下按钮时，RelayCommand 会启动一个后台进程，该进程将属性设置为 true，这应该启用进度条并进行后台处理。

在将其移植到 PCL 之前，我能够从 UI 线程调用更改以确保启用进度条，但 Dispatcher 对象在 PCL 中不可用。我该如何解决这个问题？

谢谢

担

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-20T21:37:17.377

所有 MvvmCross 平台都要求将 UI 操作编组回 UI 线程/单元 - 但每个平台的执行方式不同......

为了解决这个问题，MvvmCross 提供了一种跨平台的方法——使用`IMvxViewDispatcherProvider`注入的对象。

例如，在 WindowsPhone上`IMvxViewDispatcherProvider`最终由[https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.WindowsPhone/Views/MvxMainThreadDispatcher.cs提供](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.WindowsPhone/Views/MvxMainThreadDispatcher.cs)`MvxMainThreadDispatcher`

这实现了`InvokeOnMainThread`使用：

```
 private bool InvokeOrBeginInvoke(Action action)
    {
        if (_uiDispatcher.CheckAccess())
            action();
        else
            _uiDispatcher.BeginInvoke(action);

        return true;
    } 
```

* * *

对于 ViewModel 中的代码：

*   你的`ViewModel`继承自`MvxViewModel`
*   继承`MvxViewModel`自`MvxApplicationObject`
*   继承`MvxApplicationObject`自`MvxNotifyPropertyChanged`
*   `MvxNotifyPropertyChanged`对象继承自`MvxMainThreadDispatchingObject`

`MvxMainThreadDispatchingObject`是[https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross/ViewModels/MvxMainThreadDispatchingObject.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross/ViewModels/MvxMainThreadDispatchingObject.cs)

```
public abstract class MvxMainThreadDispatchingObject
    : IMvxServiceConsumer<IMvxViewDispatcherProvider>
{
    protected IMvxViewDispatcher ViewDispatcher
    {
        get { return this.GetService().Dispatcher; }
    }

    protected void InvokeOnMainThread(Action action)
    {
        if (ViewDispatcher != null)
            ViewDispatcher.RequestMainThreadAction(action);
    }
} 
```

所以...您的 ViewModel 可以调用`InvokeOnMainThread(() => DoStuff());`

* * *

还有一点需要注意的是，MvvmCross 自动为属性更新进行 UI 线程转换，这些属性更新通过方法在`MvxViewModel`（或实际上在任何`MvxNotifyPropertyChanged`对象中）发出信号`RaisePropertyChanged()`- 请参阅：

```
 protected void RaisePropertyChanged(string whichProperty)
    {
        // check for subscription before going multithreaded
        if (PropertyChanged == null)
            return;

        InvokeOnMainThread(
            () =>
                {
                    var handler = PropertyChanged;

                    if (handler != null)
                        handler(this, new PropertyChangedEventArgs(whichProperty));
                });
    } 
```

在[https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross/ViewModels/MvxNotifyPropertyChanged.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross/ViewModels/MvxNotifyPropertyChanged.cs)

* * *

这种自动编组`RaisePropertyChanged()`调用适用于大多数情况，但如果您从后台线程引发大量更改的属性，则可能会有点低效 - 它可能导致大量线程上下文切换。这不是您在大多数代码中需要注意的事情 - 但如果您确实发现这是一个问题，那么它可以帮助更改代码，例如：

```
 MyProperty1 = newValue1;
 MyProperty2 = newValue2;
 // ...
 MyProperty10 = newValue10; 
```

到：

```
 InvokeOnMainThread(() => {
      MyProperty1 = newValue1;
      MyProperty2 = newValue2;
      // ...
      MyProperty10 = newValue10;
 }); 
```

* * *

如果您曾经使用过`ObservableCollection`，请注意 MvvmCross 不会*对*`INotifyPropertyChanged`这些类触发的or事件进行任何线程编组`INotifyCollectionChanged`- 因此，作为开发人员，您可以编组这些更改。

原因：`ObservableCollection`存在于 MS 和 Mono 代码库中——因此 MvvmCross 无法更改这些现有实现。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-20T18:24:32.540

如果您无权访问 Dispatcher，则只需将 BeginInvoke 方法的委托传递给您的类：

```
public class YourViewModel
{
    public YourViewModel(Action<Action> beginInvoke)
    {
        this.BeginInvoke = beginInvoke;
    }

    protected Action<Action> BeginInvoke { get; private set; }

    private void SomeMethod()
    {
        this.BeginInvoke(() => DoSomething());
    }
} 
```

然后实例化它（从有权访问调度程序的类）：

```
var dispatcherDelegate = action => Dispatcher.BeginInvoke(action);

var viewModel = new YourViewModel(dispatcherDelegate); 
```

* * *

或者，您也可以在调度程序周围创建一个包装器。

首先，在可移植类库中定义 IDispatcher 接口：

```
public interface IDispatcher
{
    void BeginInvoke(Action action);
} 
```

然后，在可以访问调度程序的项目中，实现接口：

```
public class DispatcherWrapper : IDispatcher
{
    public DispatcherWrapper(Dispatcher dispatcher)
    {
        this.Dispatcher = dispatcher;
    }

    protected Dispatcher Dispatcher { get; private set; }

    public void BeginInvoke(Action action)
    {
        this.Dispatcher.BeginInvoke(action);
    }
} 
```

然后，您可以将此对象作为 IDispatcher 实例传递给您的可移植类库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T00:53:18.660

另一个可能更容易的选择是将 SynchronizationContext.Current 的引用存储在类的构造函数中。然后，稍后，您可以使用 _context.Post(() => ...) 在上下文上调用 - 这是 WPF/WinRT/SL 中的 UI 线程。

```
class MyViewModel
{
   private readonly SynchronizationContext _context;
   public MyViewModel()
   {
      _context = SynchronizationContext.Current.
   }

   private void MyCallbackOnAnotherThread()
   {
      _context.Post(() => UpdateTheUi());
   }
} 
```

# jqgrid - 编辑模式下的链接，普通模式下的纯文本

> ID：14427348
> 
> 赞同：0
> 
> 时间：2013-01-20T17:49:03.180
> 
> 标签：jqgrid

是否可以在网格列的编辑选项中有超链接？网格在绑定时显示纯文本。但是当它处于编辑/添加模式时，需要将此文本转换为超链接（打开一个弹出窗口）。我找不到在编辑选项中有超链接的选项。我可以将其作为按钮进行，但我需要一个链接。有没有办法做到这一点？我有以下代码 -

```
colModel: [
           { name: 'Person', index: 'PersonName', width: 70, editable: true, edittype: 'button',
                                editoptions: {
                                    value: 'Select',
                                    dataEvents: [{
                                        type: 'click',
                                        fn: function (elem) {
                                            var left = (screen.width / 2) - (700 / 2);
                                            var top = (screen.height / 2) - (550 / 2);

                                            var popup = window.open("popup.htm", "popup", "resizable=1,copyhistory=0,menubar=0,width=700,height=550,left='+left+',top='+top");
                                            popup.focus();
                                        }
                                    }]
                                }
                            }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:11:42.250

可能您应该查看`custom`edittype，您需要在其中定义自己的函数 `custom_element`并`custom_value`构建表单元素。

[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#edittype](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#edittype)

# maven - 由于http响应405，无法执行mvn tomcat：部署

> ID：14427351
> 
> 赞同：5
> 
> 时间：2013-01-20T17:49:21.600
> 
> 标签：maven, tomcat, tomcat7, maven-plugin

我将 Tomcat 7 作为 Windows 服务运行。我想在我的项目根目录中执行 mvn:tomcat deploy 。

但是这个错误一直出现，你能帮我解决这个问题吗？

```
[INFO] Deploying war to http://localhost:8080/opendata
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.493s
[INFO] Finished at: Sun Jan 20 18:48:30 CET 2013
[INFO] Final Memory: 15M/39M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.codehaus.mojo:tomcat-maven-plugin:1.1:deploy
(default-cli) on project opendata: Cannot invoke Tomcat manager: Server returned
 HTTP response code: 405 for URL: http://localhost:8080/manager/deploy?path=%2Fo
pendata&war= -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e swit
ch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please rea
d the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionE
xception 
```

我的 pom 文件中有以下部分：

```
<build>
        <finalName>opendata</finalName>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>tomcat-maven-plugin</artifactId>
                <configuration>
                    <server>myserver</server>
                </configuration>
                <version>1.1</version>
            </plugin>

            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.0.2</version>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                </configuration>
            </plugin>
        </plugins>
    </build> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-26T12:23:22.873

要让它发挥作用，需要做两件事；

*   在 tomcat-users.xml 中具有角色 manager-script 的 tomcat 用户
*   将用于部署的 url 指定为以 manager/text 结尾的内容。

而已。请参阅下面的 pom.xml 示例 conf。并且不要忘记使用 tomcat7:redeploy 这样您就不必循环取消部署/部署。

```
<plugin>
    <groupId>org.apache.tomcat.maven</groupId>
    <artifactId>tomcat7-maven-plugin</artifactId>
    <version>2.2</version>
    <configuration>
        <url>http://your-server:8080/manager/text</url>
        <username>a-username</username>
        <password>a-password</password>
        <path>/a-path</path>
    </configuration>
</plugin> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-31T13:05:42.007

我今天遇到了类似的问题 - 405 错误可能是由于 Tomcat 不接受 PUT 请求引起的。这可以通过配置 Tomcat 的 web.xml（通常在 中找到`%TOMCAT%\conf\web.xml`）并添加以下 init-param 来实现：

```
<init-param>
    <param-name>readonly</param-name>
    <param-value>false</param-value>
</init-param> 
```

您可能还需要将管理员用户添加到 tomcat-users.xml。有关更多详细信息，请参见[此处](http://www.codereye.com/2010/12/configure-tomcat-to-accept-http-put.html)。

# sql - 如何在这么多表上执行 SQL？里面的细节

> ID：14427355
> 
> 赞同：-2
> 
> 时间：2013-01-20T17:49:44.330
> 
> 标签：sql

我有一个使用 MS Visual Studio 2010 C# 的学校项目。该项目是一个项目管理软件。基本上管理了许多项目，根据您工作的班次向员工提供津贴。我的项目共有 4 张桌子，它们是；

1.  *员工：*您可以在其中管理所有员工的详细信息
2.  *AssignProject：*它说明哪个员工分配到哪个项目
3.  *班次：*它说明员工在哪个班次上工作
4.  *项目：*您可以在其中管理所有项目详细信息

我想计算总津贴`employee`。例如。*项目 A*上不同*班次*的`EmployeeA`工作日。我如何对它执行 SQL？`3`*`3`*

 **更新：我尝试了以下操作，它设法获得了 EmployeeA 工作日，但它显示了为该项目提供的津贴。现在，我如何从该代码中筛选出仅显示员工工作的班次。

```
con = new SqlConnection(ConfigurationManager
                          .ConnectionStrings["projectshift"].ConnectionString);
da = new SqlDataAdapter(@"
        SELECT 
            Shift.date, 
            Projects.AGeneral, 
            Projects.AMorning, 
            Projects.AEvening, 
            Projects.ANight 
        FROM Projects  
        INNER JOIN Shift ON Projects.ProjectId = Shift.ProjectId 
        WHERE Shift.EmployeeId='" + Session["CurrentUser"] + "'", con);
ds = new DataSet();
da.Fill(ds, "AssignProject");
GridView1.DataSource = ds;
GridView1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:06:52.507

我首先建议您使用参数化查询——这很容易受到 SQL 注入的影响。

话虽如此，假设您使用的是 SQL Server（未经测试）并假设您希望将 shift.date 中的不同天数视为工作天数以及 shift.date 中的所有记录用于轮班工作：

```
SELECT Count(DISTINCT CONVERT(varchar(10), Shift.Date, 111)) as DaysWorked, 
   COUNT(Shift.date) as ShiftsWorked,
   Projects.AGeneral, Projects.AMorning, Projects.AEvening, Projects.ANight 
FROM Projects 
   INNER JOIN Shift ON Projects.ProjectId = Shift.ProjectId 
WHERE ...
GROUP BY Projects.AGeneral, Projects.AMorning, Projects.AEvening, Projects.ANight 
```

祝你好运。**

# c# - 剃刀块内的asp.net mvc 4 javascript抛出错误

> ID：14427364
> 
> 赞同：7
> 
> 时间：2013-01-20T17:50:33.563
> 
> 标签：c#, javascript, jquery, asp.net-mvc, asp.net-mvc-4

这是我的剃刀代码，它会引发错误：

```
@section script
{
    <script type="text/javascript">
        $(document).ready(function () {
            @if (TempData["Message"] != null)
            {
                showNotification("'" + TempData["Message"].ToString() + "'");
            }
        });
    </script>
} 
```

它说不`showNotification`存在。它认为这是一个 C# 代码，它是一个 javascript 函数。有人可以让我知道如何解决此错误吗？谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-20T18:54:17.440

在它周围加上一个`text`标签，因为编译器认为你的 JavaScript 是 Razor 语法。执行此操作时，您需要向`@`TempData 调用添加一个。

```
@section script
{
    <script type="text/javascript">
        $(document).ready(function () {
            @if (TempData["Message"] != null)
            {
                <text>showNotification('@TempData["Message"].ToString()');</text>
            }
        });
    </script>
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-21T01:35:51.463

除了@Martin 的回答，您还可以将@: 放在 showNotification 调用的前面。@: 语法告诉 Razor 将该单行视为 HTML，其中告诉 Razor 将文本标记中的任何内容视为 HTML（对多行有用，其中 @: 适用于单行）。

# django - GeoDjango 边界框过滤器使用

> ID：14427365
> 
> 赞同：1
> 
> 时间：2013-01-20T17:50:38.487
> 
> 标签：django, postgis, geodjango

我无法弄清楚如何进行边界框查询以查找包含在由（swLat、swLon、neLat、neLon）指定的边界框内的所有 UserProfile 对象。尽管将点设置为在边界框内居中，但仍返回一个空数组。下面是我的模型和查询代码。

```
from django.contrib.gis.db import models
from django.contrib.gis.geos import GEOSGeometry
class UserProfile(models.Model):
    location = models.PointField(srid=4326, blank=True, null=True)
    objects = models.GeoManager()

    def setLocation(self, lat, lon):
        if not self.location:
            self.location = GEOSGeometry('POINT(%s %s)' % (lat, lon))
        else:
            self.location.set_x(float(lat))
            self.location.set_y(float(lon))
        self.save()

from models import UserProfile
from django.contrib.gis.geos import Polygon
class SomeView:
    def getUserProfilesWithinBBox(swMapBoundsLat, swMapBoundsLon, neMapBoundsLat, neMapBoundsLon, userProfileLocationLat, userProfileLocationLon, userProfile):
        '''neMapBoundsLat=38.908254,neMapBoundsLon=-77.002034
           swMapBoundsLat=38.888515,seMapBoundsLon-77.070698
           userProfileLocationLat=38.89838500999149, userProfileLocationLon=-77.03636580000001
        '''
        userProfile.setLocation(userProfileLat, userProfileLon)
        geom = Polygon.from_bbox((swMapBoundsLat, swMapBoundsLon, neMapBoundsLat, neMapBoundsLon))
        matchingUserProfiles = UserProfile.objects.filter(location__bbcontains=geom)
        # matchingUserProfiles should contain the userProfile that was just saved, but is always an empty list. what am I doing wrong?
        return matchingUserProfiles 
```

背景资料：

*   数据库后端：Postgresql-8.4 & PostGIS 1.5.8
*   Django 1.4.3
*   操作系统：Ubuntu 12.04x32

任何帮助将非常感激。

谢谢大家，马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T22:14:57.877

如果您想通过它们与边界框中心的接近程度对配置文件进行排序。

```
center = Point(float(lat), float(lng)) # lat/lng of the center of the bounding box
geo_query = Q(point__within=geom)
UserProfile.objects.filter(geo_query).distance(center).order_by('distance') 
```

# php - PHP 中的原生 RSA 函数

> ID：14427367
> 
> 赞同：0
> 
> 时间：2013-01-20T17:50:49.720
> 
> 标签：php, rsa

我知道可以使用编码过程为 RSA 制作密钥，但是 PHP 是否有任何有助于密钥生成的本机函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T17:56:38.207

使用 openssl_public_encrypt，为此请查看[openssl_public_encrypt 的页面文档](http://php.net/manual/en/function.openssl-public-encrypt.php)。

# php - CSS inline-block 不起作用，但在设置 PHP 元素样式时 float 会起作用

> ID：14427376
> 
> 赞同：0
> 
> 时间：2013-01-20T17:51:17.683
> 
> 标签：php, html, css

我正在尝试对使用 App Gini 生成的页面进行样式设置。到目前为止，我已经能够编辑大部分内容，但是我似乎无法让 inline-block 工作，float:left 会工作。但是我尝试了很多方法并且无法浮动到中心，我更喜欢使用内联块。我没有 PHP 编码的背景，主要是 CSS 和 HTML。我正在尝试设置 PHP 元素的样式，但我不相信它们是原因。

PHP 生成指向数据库中表的链接，并根据用户访问进行更改。现在它返回大约 8 个链接，正如我所说，float 允许我将它们格式化为水平显示而不居中，但是当我使用 inline-block 时，它会垂直显示它们并居中。我想要完成的是一个水平居中的菜单，它适应屏幕大小。如果我在这篇文章中缺少任何信息，请告诉我。

CSS：

```
#headingstyles{font-family: "Ubuntu","Segoe UI Light","Helvetica Neue",'RobotoLight',"Segoe UI","Segoe WP",sans-serif;font-weight:100;margin-top:5px;margin-bottom:0px;}
body{font-family:"Ubuntu","Segoe UI","Segoe WP","Helvetica Neue",'RobotoRegular',sans-serif;font-size:20px}
h1,h2,h3,h4,h5,h6{font-family:"Ubuntu","Segoe UI Light","Helvetica Neue",'RobotoLight',"Segoe UI","Segoe WP",sans-serif;font-weight:100;margin-top:0px;margin-bottom:0px;}

.content a:link {color:#DDD; text-decoration:none;}      
.content a:visited {color:#DDD;text-decoration:none;}  
.content a:hover {color:#FFF;text-decoration:none;}  
.content a:active {color:#FFF;text-decoration:none;} 

.content {
    position:absolute;
    width:99%;
    min-height: 20%;
    padding-top:6%;
    padding: auto;
    background-color: #1569C7;
    color: #FFF;
    text-align: center;
    border-bottom: #111 1px solid;
    margin:0 auto;

}

.content a:link {
    padding: 15px;
    /*display: inline-block;*//*doesn't work*/
    float:left;/*works*/
}
.content a:hover {
    background-color: #479BF9;
} 
```

HTML/PHP：

```
<div class="content">
<?php
    if(is_array($arrTables)){
        $i=0;
        foreach($arrTables as $tn=>$tc){
            $tChk=array_search($tn, array());
            $searchFirst = (($tChk!==false && $tChk!==null) ? '?Filter_x=1' : '');
            ?>
            <div onclick="window.location='<?php echo $tn; ?>_view.php<?php echo $searchFirst; ?>';" id="<?php echo $tn; ?>">
                <a  title="<?php echo htmlspecialchars($tc[1]); ?>" href="<?php echo $tn; ?>_view.php<?php echo $searchFirst; ?>">
                    <?php echo (!$i ? "<h2>{$tc[0]}</h2>" : "<h2>{$tc[0]}</h2>"); ?>
                    <?php echo $tc[1]; ?>
                </a>
            </div>

        <?php
            $i++;
        }

        // custom home links, as defined in "hooks/links-home.php"
        if(is_array($homeLinks)){
            $memberInfo = getMemberInfo();
            foreach($homeLinks as $link){
                if(!isset($link['url']) || !isset($link['title'])) continue;
                if($memberInfo['admin'] || @in_array($memberInfo['group'], $link['groups']) || @in_array('*', $link['groups'])){
                    ?>

                    <div onclick="window.location='<?php echo $link['url']; ?>';">
                        <a title="<?php echo htmlspecialchars($link['description']); ?>" href="<?php echo $link['url']; ?>">
                            <h1><?php echo $link['title']; ?></h1>
                            <?php echo $link['description']; ?>
                        </a>
                    </div>

                    <?php
                }
            }
        }

        if(getLoggedAdmin()){
            ?><div onclick="window.location='admin/';"><a href="admin/"><h2><?php echo $Translation['admin area']; ?></h2></a></div><?php
        }
    }else{
        ?><div id="error-no-access"><?php echo $Translation['no table access']; ?><script language="javaScript">setInterval("window.location='index.php?signOut=1'", 2000);</script></div><?php
    }
?>

</div> 
```

生成的 HTML：

```
<div class="content">

                <div onclick="window.location='t1.php';">
                <a  title="" href="t1.php">
                    <h2>t1</h2>                                         </a>
            </div>

                        <div onclick="window.location='t2.php';">
                <a  title="" href="t2.php">
                    <h2>t2</h2>                                         </a>
            </div>

                        <div onclick="window.location='t3.php';">
                <a  title="" href="t3.php">
                    <h2>t3</h2>                                         </a>
            </div>

                        <div onclick="window.location='t4.php';">
                <a  title="" href="t4.php">
                    <h2>t4</h2>                                         </a>
            </div>

                        <div onclick="window.location='t5.php';">
                <a  title="" href="t5.php">
                    <h2>t5</h2>                                         </a>
            </div>

                        <div onclick="window.location='t6.php';">
                <a  title="" href="t6.php">
                    <h2>t6</h2>                                         </a>
            </div>

                        <div onclick="window.location='t7.php';">
                <a  title="" href="t7.php">
                    <h2>t7</h2>                                         </a>
            </div>

                        <div onclick="window.location='t8.php';">
                <a  title="" href="t8.php">
                    <h2>t8</h2>                                         </a>
            </div>

        <div onclick="window.location='admin/';"><a href="admin/"><h2>Admin Area</h2></a></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:36:29.053

不要将 inline-block 放在链接上，而是将其放在包含 div 上：

```
.content div{
  padding: 15px;
  display: inline-block;
} 
```

在上面的代码中，包含的 div 是块，因此将它们的链接设置为 inline-block 没有效果。

# c++ - 显示在按键回调函数中的 opengl 函数

> ID：14427381
> 
> 赞同：1
> 
> 时间：2013-01-20T17:51:43.203
> 
> 标签：c++, function, opengl, header, glu

我正在使用 GLUT 使用 openGL。我正在使用一些功能制作自己的头文件。其中之一是一个矩形，您可以在其中输入数字并保存它们。这里的问题是，如果我想知道按下了哪个键，我需要把函数放在 de keyboardFunc 回调中，但我也想显示矩形，所以我还需要把它放在显示回调中，因为你可以'不要在键盘回调函数中绘制任何东西。

我可以创建两个功能：一个用于显示矩形，一个用于按键，但我想要一个用于两者的功能。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:54:04.177

你不能，就像你自己说的那样。您必须使用一种函数来处理键盘事件，而另一种函数用于绘图。

您可以做的是将所有有效的按键保存在一个全局变量中，并在显示函数中简单地绘制它们。

如果你想告诉 GLUT 尽快重新显示，你可以`glutPostRedisplay`在键盘回调函数中调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T01:36:18.607

对于你想要的一切，GLFW 几乎与 GLUT 相同，但它不会像 GLUT 那样让一切都成为一场噩梦。你可以控制你的显示功能！在 GLFW 中，您可以定义自己的按键被按下时的回调。如果它的长度固定，则该回调可以将按下的字符保存到向量或字符数组中。然后，您将能够在显示循环中呈现文本。访问文本数组时要小心，您可能需要对其进行一些控制。

# iphone - TableView addGesture 到 UIImageView 以了解点击了哪个单元格

> ID：14427382
> 
> 赞同：0
> 
> 时间：2013-01-20T17:51:52.537
> 
> 标签：iphone, ios, uitableview, uigesturerecognizer

我用部分创建tableView，我使用自定义单元格并以这种方式用图像定义复选框（UIImageView）：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"cellIdentifier";
    StandardCellWithImage *cell = (StandardCellWithImage *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell == nil) {
        cell = [[StandardCellWithImage alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.selectionStyle = UITableViewCellSeparatorStyleNone;
    }

    cell.checkbox.tag = indexPath.row;
    UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(didSelectedImageAtIndexPath:)];
    tapGesture.numberOfTapsRequired = 1;
    tapGesture.delegate = self;
    [cell.checkbox addGestureRecognizer:tapGesture];
    cell.checkbox.userInteractionEnabled = YES;

    return cell;
} 
```

在 didSelectedImageAtIndexPath 方法中我使用：

```
- (void) didSelectedImageAtIndexPath:(id) sender {
    UITapGestureRecognizer *gesture = (UITapGestureRecognizer *) sender;
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:gesture.view.tag inSection:0];
} 
```

但是我在这里只有一行，不知道用户在哪个部分点击了这一行。有没有可能认出来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T18:12:10.657

如果您像这样在 view.tag 中编码项目/部分会怎样：

```
view.tag = indexPath.section * kMAX_SECTION_SIZE + indexPath.item; 
```

那么你可以这样做：

```
- (void) didSelectedImageAtIndexPath:(id) sender {
  UITapGestureRecognizer *gesture = (UITapGestureRecognizer *) sender;

  NSIndexPath *indexPath = [NSIndexPath indexPathForRow:gesture.view.tag % kMAX_SECTION_SIZE
                                        inSection:int(gesture.view.tag / kMAX_SECTION_SIZE)];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T18:19:38.027

不要在 cellForRowAtIndexPath 中的复选框（单元格中的按钮）上添加手势，而是在单元格（StandardCellWithImage）本身中实现按钮操作并从那里调用委托。

1.  将操作设置为单元格中的按钮并在那里自行实现。
2.  在单元格中声明一个协议并在其中声明您想要的方法作为 didSelectedImageAtIndexPath：
3.  在你的视图控制器中实现这个协议
4.  将 cellForRowAtIndexPath 中的单元格委托设置为 selt（视图控制器）
5.  当您点击单元格中的复选框方法时，将调用您设置为复选框按钮的操作。
6.  从那里调用委托方法 didSelectedImageAtIndexPath:。当然，您可以使用 [(UITableView *)self.superview indexPathForCell:self] 从那里返回 indexPath 对象。// 这里 self = 自定义单元对象

**笔记：**

您可以在单元格中存储对 tableView 的弱引用，您可以在表格数据源的 -tableView:cellForRowAtIndexPath: 中设置该引用。这更好，因为依靠 self.superview 始终完全是 tableView 是脆弱的。谁知道苹果未来会如何重新组织 UITableView 的视图层次结构。

# jquery - jQuery函数链

> ID：14427383
> 
> 赞同：0
> 
> 时间：2013-01-20T17:51:53.487
> 
> 标签：jquery, function, asynchronous, chaining

我有这样的html

```
<div class='mydiv expanded' id='1'>aaa</div>
<div class='mydiv ' id='2'>bbb</div>
<div class='mydiv ' id='3'>ccc</div>
<div class='mydiv ' id='4'>ddd</div> 
```

和两个功能：

```
function collapse(){
$(document).find('.expanded').removeClass('expanded')
}

function expand(itemid){
$(document).find('.mydiv[id="'+itemid+'"]').addClass('expanded');
} 
```

从我调用的其他函数

collapse() //我想删除所有“扩展”的类

expand(3) //我想将类“扩展”添加到 id 为 3 的元素

我怎样才能一个接一个地调用这些函数 - 首先折叠，然后展开。

我看过 defered 和 $.when.then 方法，但据我了解，它们可以与 ajax 调用一起使用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:00:10.250

JavaScript 是逐行解释和执行的。只需按照您希望它们发生的顺序调用您的方法。

处理事件时需要 $.when.then，例如 DOM 或 AJAX。

# php - 获取 Facebook 活动场地经纬度

> ID：14427390
> 
> 赞同：0
> 
> 时间：2013-01-20T17:52:41.913
> 
> 标签：php, facebook

您好，我使用以下代码根据提供的 url 从 facebook 检索事件信息。

代码是这样的：

```
function importEvent($url) 
{
    $facebook = new Facebook(array(
          'appId'  => 'someAppId',
          'secret' => 'someSecret',
          'cookie' => true, // enable optional cookie support
        )); 

    if(checkLogin()==true)
    {   
        //get rid of hash if exists
        $hash = explode('#',$url);

        if(!empty($hash[1]))
            $array = parse_url($hash[1]);
        else
            $array = parse_url($hash[0]);

        parse_str($array['query'],$output);
        $eid = $output['eid'];

        if(empty($eid))//new url think http://www.facebook.com/events/2323423423423/
        {
            $url = str_replace('http://www.facebook.com/events/','',$url);
            $url = str_replace('https://www.facebook.com/events/','',$url);
            $hash = explode('/?',$url);

            if(!empty($hash[1]))
                $url = $hash[0];

            $eid =   str_replace('?','',$url);  
            $eid =   str_replace('/','',$url);
            //print_r($eid);
        }
            //Calling users.getinfo legacy api call example
            try{
                $param  =   array(
                    'method'  => 'events.get',
                    'eids'    => $eid,
                    'access_token' => $_SESSION['access_token']

                );
                $events   =   $facebook->api($param);
            }
            catch(Exception $o){
                error_log($o);
                echo $o; 
            }

        print_r($events);   
        return $events;
    }
} 
```

我得到的输出是这样的：

```
Array
(
    [0] => Array
        (
            [eid] => 410474065693887
            [name] => Sunday Night Fever Vol.4  Disco Special @Legacy Rock Area
            [pic_small] => http://profile.ak.fbcdn.net/hprofile-ak-snc6/276862_410474065693887_714884848_t.jpg
            [pic_big] => http://profile.ak.fbcdn.net/hprofile-ak-snc6/276862_410474065693887_714884848_n.jpg
            [pic] => http://profile.ak.fbcdn.net/hprofile-ak-snc6/276862_410474065693887_714884848_s.jpg
            [pic_square] => http://profile.ak.fbcdn.net/hprofile-ak-snc6/276862_410474065693887_714884848_q.jpg
            [has_profile_pic] => 1
            [host] => Legacy Rock Area
            [version] => 2
            [description] => Αφου μας το ζητησατε "παρτε" το..!!!

Μετα το τελευταιο απιστευτο killer Disco Party εχουμε την ευκαιρια να κανουμε προθερμανση για τον Super Αποκριατικο Φεβρουαριο που θα ακολουθησει στο Legacy Rock Area μεμια βραδυα γεματη Disco,Dance,Pop και οπου μας βγαλει...!!

Κυριακη 20 Ιανουαριου λοιπον..Sunday Night Fever Disco Special!!!

That night the DJ saves our lives...!!!
            [start_time] => 2013-01-20
            [end_time] => 
            [timezone] => 
            [is_date_only] => 1
            [creator] => 1732432279
            [update_time] => 1357737066
            [location] => Legacy Rock Area
            [hide_guest_list] => 
            [can_invite_friends] => 
            [privacy] => OPEN
            [venue] => Array
                (
                    [id] => 244479685665743
                )

            [all_members_count] => 7175
            [attending_count] => 74
            [unsure_count] => 144
            [declined_count] => 509
            [not_replied_count] => 6957
        )

) 
```

但是，在 api 文档中，它提到该场所包含以下内容：

此事件的位置通用 access_token、user_events 或 friends_events 对象，包含以下一个或多个字段：id、street、city、state、zip、country、latitude 和 longitude 字段。

但我得到的只是场地ID。

我找不到有关如何检索场地地点的 lat + lng 的特定信息，如果我没记错的话，我认为这段代码是可以的。

我是否需要仅针对场地信息执行另一个查询，如果需要，您能否提供任何参考或代码示例？或者有没有办法让这段代码也返回 lat + lng，所以我不必为 1 个事件进行 2 次查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:05:36.233

经过一些研究，我发现这可以用 fql.multiquery 来完成，现在它似乎工作正常。这是源代码。

```
function importEventFQL($url)
{
    $facebook = new Facebook(array(
          'appId'  => 'someApddID',
          'secret' => 'someSecret',
          'cookie' => true, // enable optional cookie support
        )); 

    if(checkLogin()==true)
    {   

        list($url_static,$url_URI) = explode('/events',$url);

        $url_URI = ltrim($url_URI,'/');
        list($eid, $trash) = explode('/?',$url_URI);

        $fql = '{';

        $fql .= '"event_info":"SELECT name, description, pic_small, pic_big, eid, venue, location, start_time, end_time, host from event WHERE eid=\'' . $eid . '\'",';
        $fql .= '"event_venue":"SELECT name, username, page_id, location FROM page WHERE page_id IN (SELECT venue.id FROM #event_info)"';

        $fql .= '}';

        $param = array(
            'method'   => 'fql.multiquery',
            'queries'  => $fql,
            'callback' => ''
        );

        $result = $facebook->api($param);

        print_r($result);
    }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T21:20:54.103

如果您只希望 FQL 执行此操作：

```
{
    "events" : "SELECT privacy, name, description, start_time, venue.id, pic_cover FROM event WHERE eid IN (SELECT eid FROM event_member WHERE uid = me())",
    "venues" : "SELECT latitude, longitude, name, page_id FROM place WHERE page_id IN (SELECT  venue.id FROM #events)"
} 
```

# cakephp - CakePHP 2.x i18n 路由

> ID：14427391
> 
> 赞同：0
> 
> 时间：2013-01-20T17:52:47.643
> 
> 标签：cakephp, internationalization

只有在不为空时才使用带有参数的 CakePHP 路由有一些解决方案吗？

现在我在下面编码，但我想要一些更好的：

```
if(Configure::read('Config.language') !== 'en') { // en is default language
    $language = '/:language';
} else {
    $language = '';
}

Router::connect($language .'/'. __('register', true), array(
    'controller' => 'users',
    'action' => 'register')); 
```

此代码完美运行，但我仍然必须通过 url() 方法在 AppHelper 中设置语言。

在较旧的应用程序中，我总是重复 Router::connect:

```
Router::connect('/:language/'. __('register', true), array(
    'controller' => 'users',
    'action' => 'register')); // for all languages without default language
Router::connect('/'. __('register', true), array(
    'controller' => 'users',
    'action' => 'register')); // only for default language (en) 
```

也许有最简单的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T18:02:23.750

您需要使用 2 条路线，但为基于语言的路线添加“持久”选项。添加 'persist' 将避免每次生成 url 时都必须指定 'language' 键。

```
// for all languages without default language. 
Router::connect(
    '/:lang/'. __('register', true),
    array(
        'controller' => 'users', 
        'action' => 'register'
    ), 
    array(
        'persist' => array('lang')
    )
);

// only for default language (en)
Router::connect(
    '/'. __('register', true),
    array(
        'controller' => 'users', 
        'action' => 'register'
    )
); 
```

您可能还想查看[CakeDC 的 I18n](https://github.com/CakeDC/i18n)插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T07:54:26.733

好的，这些东西效果更好，但我还有其他问题。

我在 bootstrap.php 中将默认语言设置`Configure::write('Config.language');`为 en

接下来我为这样的 url 写了 shema：

```
Router::connect('/:language/'. __('register', true), array('controller' => 'users', 'action' => 'register'), array('persist' => array('lang')));
Router::connect('/'. __('register', true), array('controller' => 'users', 'action' => 'register')); 
```

当用户通过 AppController 中的 beforeFilter 更改语言（设置新的 Config.language）时，静态 .po 和 db 中的内容将正常工作，但链接未翻译。参数有效，`:language`但魔术功能无效。`__()``Router:connect()`

因为首先加载的是 bootstrap.php，接下来是 router.php，最后是 AppController.php

我的问题是，如何强制 router.php 翻译链接（`__()`）？

对不起，但还是要学英语...

# android - 如何创建评论，但如果相同，删除旧的，在sqlite数据库中？

> ID：14427394
> 
> 赞同：0
> 
> 时间：2013-01-20T17:53:01.070
> 
> 标签：android, sqlite, android-arrayadapter

我在 listView 有评论`"www.google.lv"`。
如果我想再次输入相同的评论（`"www.google.lv"`），它应该创建这个评论，但是应该从数据库中删除之前的相同评论。它们不应重复，而是作为最新评论创建。

是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:57:11.140

> 如何创建评论，但如果相同，它会删除旧的，在sqlite数据库中？

只需使用命令[`INSERT OR REPLACE ...`](https://www.sqlite.org/lang_insert.html)。

*   如果该条目不存在，它将被插入到数据库中。
*   如果确实存在，则旧条目将被新条目替换。

* * *

**添加**
由于您使用 ContentValues 将数据插入数据库。调用[`database.insertWithOnConflict()`](https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insertWithOnConflict%28java.lang.String,%20java.lang.String,%20android.content.ContentValues,%20int%29)，而不是`database.insert()`. 尝试：

```
database.insertWithOnConflict(MySQLiteHelper.TABLE_COMMENTS, null, values, SQLiteDatabase.CONFLICT_REPLACE); 
```

（这假设您`UNIQUE`对数据库有适当的约束......）

# java - 如何在 ebean 中急切加载集合？

> ID：14427396
> 
> 赞同：6
> 
> 时间：2013-01-20T17:53:17.230
> 
> 标签：java, playframework, playframework-2.0, eager-loading, ebean

在 ebean 和 Play Framework 2 中急切获取嵌套集合的正确方法是什么？我试过这个：

```
Registration registration = find
    .fetch("participants")
    .fetch("participants.fieldValues")
    .fetch("participants.fieldValues.field")
    .where().eq("token", token).findUnique(); 
```

由于某种原因`registration.participants.fieldValues.field`，对象只有一个 id。其余`field`属性为空。例如`field.name`，当它应该有一个值时为空。

编辑：如果我将 Field.name 设为私有并为其添加一个 getter/setter，那么我可以获得它的值。但是由于我使用的是`fetch("participants.fieldValues.field")`不应该让它在不需要 getter/setter 的情况下急切地获取吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T13:22:51.440

无效的魔法对每个人来说都是浪费时间。我在生成的 getter 和 setter 方面遇到了很多问题。有些还与在模板中引用模型有关。我创建了 getter 和 setter，并为我的 ebean 模型保留了私有字段，并且从未回头。

# css - Javascript将样式标签添加到头部

> ID：14427400
> 
> 赞同：2
> 
> 时间：2013-01-20T17:53:37.203
> 
> 标签：css, dom, styles

我正在尝试使用 javascript 将一些 css 添加到内部样式表中。这是我使用的代码：

```
function googleJS(){
    var iframe = document.getElementsByTagName('iframe')[0];
    var doc = iframe.contentWindow.document;
    var newScript = doc.createElement('style');
    newScript.setAttribute('.skiptranslate { display: none; }');
    var bodyClass = doc.getElementsByTagName('head')[0];         
    bodyClass.insertBefore(newScript, bodyClass.childNodes[2]);
} 
```

然而，这会导致：

```
<style .skiptranslate {display: none};></style> 
```

使用 javascript 在 DOM 中插入带有必要 CSS 的样式标签的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T17:59:10.887

顾名思义（[和文档说](https://developer.mozilla.org/en-US/docs/DOM/Element.setAttribute)）`Element.setAttribute`：

> 添加新属性或更改指定元素上现有属性的值。

这正是`<style>`元素上发生的事情。要解决此问题，请使用[`.textContent`/`.innerText`](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)或[文本元素](https://developer.mozilla.org/en-US/docs/DOM/document.createTextNode)而不是`.setAttribute()`.

```
function googleJS(){
    var iframe = document.getElementsByTagName('iframe')[0];
    var doc = iframe.contentWindow.document;
    var newScript = doc.createElement('style');
    var content = doc.createTextNode('.skiptranslate { display: none; }');
    newScript.appendChild(content);
    var bodyClass = doc.getElementsByTagName('head')[0];         
    bodyClass.insertBefore(newScript, bodyClass.childNodes[2]);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-20T17:56:03.640

如果可以使用 JQuery： $().css('Property-Name', 'Value');

# vb.net - 组合优于继承 2

> ID：14427421
> 
> 赞同：0
> 
> 时间：2013-01-20T17:55:38.700
> 
> 标签：vb.net, design-patterns

请看以下问题：[Favour composition over inheritance](https://stackoverflow.com/questions/11343840/favor-composition-over-inheritence)

接受的回答者说：“它扩展了 Hashtable，以便重用其方法并避免使用委托重新实现其中一些方法”。我不确定回答者的意思是：使用委托重新实现其中一些。回答者是什么意思？

我熟悉 Delegates 和 Observer 设计模式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T18:03:56.790

使用组合时，如果要支持底层类具有的方法，则必须定义自己的实现，该实现只是在底层类上委托（或使用）相同的方法。在这种情况下使用继承来避免编写那种简单的（委托）方法可能很诱人，但实际上应该只在存在 IS-A 关系时才使用继承。

例如，

```
 public class Foo
 {
     public virtual void Bar()
     {
         // do something
     }
 }

 public class InheritedFromFoo : Foo
 {
      // we get Bar() for free!!!
 }

 public class ComposedWithFoo
 {
      private Foo _foo;

      public void Bar()
      {
          _foo.Bar();  // delegated to the Foo instance
      }
 } 
```

# jquery - Meteor 的 Session.set 导致 JQuery 代码出现问题？

> ID：14427422
> 
> 赞同：2
> 
> 时间：2013-01-20T17:55:49.540
> 
> 标签：jquery, meteor

我正在使用 Meteor 0.5.4 我刚刚遇到了 Meteor 的 Session.set() 的一个奇怪问题。

当用户单击模板实例时，我想显示一个简单的模态对话。

当用户单击模板实例时，我正在使用模板的事件映射将一些信息设置到会话中。

```
Template.Orders.events({
'click' : function () {
    Session.set("OrderName", this.name);
}
}); 
```

模态对话模板然后在 Session 中显示数据集：

```
Template.OrderDialogue.OrderName = function() {
    return Session.get("OrderName");
} 
```

最后是我的 JQuery 代码

```
Template.Orders.rendered = function() {
    jQuery('a[rel*=leanModal]').leanModal();
} 
```

当我使用 Session.set() 时 - 如上 Template.orders 的点击事件处理程序中所示 - JQuery 插件不会在第一次点击模板实例时显示模态对话框，而只会在第二次点击该确切实例时显示模式对话框。在模板实例上单击两次即可获得模态对话。

当我删除 Session.set() 一切工作正常 - 模态对话在第一次点击时显示，因为它应该工作。

调试输出显示第一次单击时正确设置了会话值。

Session.set() 如何干扰我的 JQuery 插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T20:41:50.563

`leanModal``OrderDialogue`在 Meteor 引擎反应性地将新内容注入其中之前显示 HTML 内容，因此关键是将`leanModal`单击包装在 a`setTimeout`中以确保发生反应。

假设你有：

```
<template name="OrderDialogue">
    <div id="overlay_content">
       <h1>{{OrderName}}</h1>
    </div>
</template>

<template name="Orders">
    {{#each order}}
        <a href="#overlay_content" rel="leanModal">{{name}}</a>
    {{/each}}
</template> 
```

还有你的 javascript：

```
Template.Orders.events({
   'click' : function () {
      Session.set("OrderName", this.name);
   }
});

Template.OrderDialogue.OrderName = function() {
   return Session.get("OrderName");
}

Template.Orders.rendered = function() {
   $("a[rel*=leanModal]").leanModal();
} 
```

然后，您必须在 click 事件处理程序上使用 a 来破解leanermodal 小部件，以便在事件冒泡之前`setTimeout`给反应性一点时间来呈现内容。`OrderName`

假设[这是 script](https://raw.github.com/FinelySliced/leanModal.js/master/jquery.leanModal.js)，将 click 处理程序包装在此脚本中（从第 23 行开始），如下所示：

```
$(this).click(function(e) {
    setTimeout(function() {
        var modal_id = $(this).attr("href");
        ...
    }, 1);
}); 
```

# php - PHP 语法的东西（不能使用（引用）字符串中以 $ 开头的东西）

> ID：14427430
> 
> 赞同：0
> 
> 时间：2013-01-20T17:56:23.423
> 
> 标签：php, file, syntax

我想将一些变量写入文件以将它们包含在另一个脚本中。但是我在运行脚本时遇到了这些错误：

```
Notice: Undefined variable: host in I:\xampp\htdocs\contact\install\writeconfig.php on line 2

Notice: Undefined variable: database in I:\xampp\htdocs\contact\install\writeconfig.php on line 2

Notice: Undefined variable: user in I:\xampp\htdocs\contact\install\writeconfig.php on line 2

Notice: Undefined variable: password in I:\xampp\htdocs\contact\install\writeconfig.php on line 2 
```

HTML 表单：

```
<html>
<head>
<title>Contact installatie</title>
</head>
<body>
<h1>Contact installatie</h1>
<h2>Database gegevens:</h2>
<form name="databasesettings" action="writeconfig.php" method="post">
Host: <input type="text" name="host"> <br>
Database: <input type="text" name="database"> <br>
User: <input type="text" name="user"> <br>
Password: <input type="password" name="password"> <br>
<input type="submit" value="Generate config">
</form>
</body>
</html> 
```

和PHP代码：

```
<?php
$config = "$host = " . $_POST["host"] . "\n$database = " . $_POST["database"] . "\n$user = " . $_POST["user"] . "\n$password = " . $_POST["password"];

$configfile=fopen("config.txt","w+");

fwrite($configfile, $config);

fclose($configfile);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:58:48.430

当使用双引号 ( " ) 包裹字符串时，PHP 将尝试将字符串中的任何变量名 ($variable) 替换为其值。如果您不希望 PHP 这样做，请使用单引号 ( ' ) 包裹字符串。

有关更多信息，请阅读 PHP 手册中的字符串：

[http://php.net/manual/en/language.types.string.php#language.types.string.syntax.double](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.double)

[http://php.net/manual/en/language.types.string.php#language.types.string.parsing](http://php.net/manual/en/language.types.string.php#language.types.string.parsing)

附带说明，PHP 不会对使用单引号的字符串进行任何解释。所以`\n`在单引号字符串中不起作用，它需要在双引号字符串中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T17:59:08.140

对文字字符串使用单引号。或者逃离他们`"\"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T17:59:34.970

选项：

1.  `$`用反斜杠转义`\`
2.  改用单引号

例子：

```
$config = "\$host = " . $_POST["host"] . "\n\$database = " . $_POST["database"] . "\n\$user = " . $_POST["user"] . "\n\$password = " . $_POST["password"];

$config = '$host = ' . $_POST["host"] . "\n" . '$database = " . $_POST["database"] . "\n" . '$user = " . $_POST["user"] . "\n" . '$password = " . $_POST["password"]; 
```

使用单引号时，特殊字符之类的`\n`也需要特别考虑。在我的示例中，我只是将它们放在双引号中，但您也可以将它们转义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T18:01:28.090

您有两种选择来解决这个问题。

PHP 中的双引号字符串执行[变量名替换](http://php.net/manual/en/language.types.string.php#language.types.string.parsing)（以及用花括号括起来的更高级的替换）。您可以改为使用单引号字符串以便能够在`$`其中使用，如下所示：

```
$config = '$host = ' . $_POST["host"] . "\n" . '$database = ' . $_POST["database"] . "\n" . '$user = ' . $_POST["user"] . "\n" . '$password = ' . $_POST["password"]; 
```

请注意，您必须将`\n`s 放入双引号字符串中，否则将无法正确替换。

另一种选择是逃避（使用`\`）你`$`的 s，像这样：

```
$config = "\$host = " . $_POST["host"] . "\n\$database = " . $_POST["database"] . "\n\$user = " . $_POST["user"] . "\n\$password = " . $_POST["password"]; 
```

* * *

作为奖励，如果你想使用我上面提到的大括号，你可以这样写你的字符串：

```
$config = "\$host = {$_POST['host']}\n\$database = {$_POST['database']}\n\$user = {$_POST['user']}\n\$password = {$_POST['password']}"; 
```

不过，这并不意味着我会建议您这样做:)

做到这一点的最好方法可能是使用[sprintf](http://php.net/sprintf)，这使它更具可读性，如下所示：

```
$config = sprintf("\$host = %s\r\n\$database = %s\r\n\$user = %s\r\n\$password = %s",
              $_POST['host'], $_POST['database'], $_POST['user'], $_POST['password']); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T17:59:31.950

"$var" 将尝试查找变量 $var; 尝试阅读此[http://php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-20T18:10:22.077

当您在双引号字符串中使用 '$' 时，php 将其假定为变量并将其替换为它的值。因此，您的选项是在它之前使用 '\' 转义它们或使用单引号字符串。

我建议使用“\”，因为您不能总是选择第二个选项。

我在这里将回复作为答案移动。也许它会帮助别人。

# java - OOP 设计：静态字段

> ID：14427433
> 
> 赞同：2
> 
> 时间：2013-01-20T17:56:24.967
> 
> 标签：java, oop, static

目前我声明我的所有静态字段如下：

```
public static final int EXAMPLE_OF_STATIC_FIELD = 0; 
```

假设我有一个基类，其中的字段代表类内可能发生的所有错误：

```
public class Base {

    public static final int ERROR_1 = 0;
    public static final int ERROR_2 = 1;
    public static final int ERROR_3 = 2;

} 
```

如果我扩展这个基类并且我想向`Error types`该类添加更多内容，我将执行以下操作：

```
public class OffSpring extends Base {

        public static final int NEW_ERROR_1 = 3;

    } 
```

为了让我声明 new `Error types`，我需要知道`Error types`基类中的值，这（在我看来）不是很方便，因为我可能不小心`Error Type`在 的后代类中声明了与from`Base class`相同的值. 例如：`Error type``Base class`

```
public static final int NEW_ERROR_1 = 0; 
```

这将与

```
public static final int ERROR_1 = 0; 
```

这会冲突...

我想也许可以使用一个`Enum Class`，但事实证明你不能扩展它。 [可以对枚举进行子类化以添加新元素吗？](https://stackoverflow.com/questions/1414755/java-extend-enum)

另一种选择是对所有静态字段使用 String 值类型而不是 int 值类型，但这不是一个非常有效的解决方案......

*如何在不与超类冲突的情况下向类的后代添加更多字段？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T18:06:27.350

我会质疑你是否真的想这样做。如果常量对于它们的声明类来说是私有的，那么它们是否重用相同的值又有什么关系呢？如果在上下文中不同的错误不使用相同的值很重要，那么这强烈表明它们实际上不应该是私有的。

如果你真的想这样做，你可以这样做：

```
public class Base {
    private static final int ERROR_1 = 0;
    private static final int ERROR_2 = 1;
    private static final int ERROR_3 = 2;
    protected static final int LAST_ERROR = ERROR_3;
}

public class OffSpring extends Base {
    private static final int NEW_ERROR_1 = Base.LAST_ERROR + 1;
} 
```

但是，如果您想拥有多个子类`Base`，每个子类都定义自己的错误代码，那么您就有麻烦了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T18:05:38.457

我看不到您的问题，因为`private static final`不是继承的属性。你将无法访问`OffSpring.ERROR_1`它不存在。因此，如果您想使用错误，您可以选择使用枚举并以正确的方式使用它们。如果您确实喜欢整数，那是因为您想使用诸如错误组合之类的技巧，因此您不能使用 value `3`。

我叫什么错误组合？想象一下，您的脚本由于两个错误而失败，ERROR_1 和 Error_2 如果 ERROR_1 为 1 并且 ERROR_2 为 2 如果您说代码 3 有错误您说您有 ERROR_1 和 ERROR_2 因为 1 是二进制编码为 01 和 2 为10\. 3 是他们两个的组合： 11.

如果您想要所有自定义错误的唯一标识，请使用 GUID 生成器，例如

```
public class GUIDGenerator{
    private int id = 1;
    public int getId(){
          return id++; 
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T18:05:36.353

为什么不将错误类型存储在映射中，以便检查错误类型是否已声明，因为这是您想要做的。

有一个`Map<String, int> error_types`。当您继续添加更多内容时，您可以检查基类并避免冲突。

# android - Android有效地使用光标？

> ID：14427436
> 
> 赞同：0
> 
> 时间：2013-01-20T17:57:11.023
> 
> 标签：android, cursor, android-sqlite

在我的 Android 活动中，我多次使用 rawquery。我为那个 rawquery 使用了一个静态游标。我的问题是：我应该在执行另一个 rawquery 之前关闭我的光标，还是让它保持打开状态，直到所有 rawqueries 都被执行（只关闭一次）。

我都尝试了，结果是一样的。但就性能/调试而言，哪一个更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:34:17.813

您**应该**在完成后关闭光标。否则，您将消耗应用程序的所有允许游标资源（它是有限的）并且会出现异常。

制作静态并不会使其成为所有人的开放游标。请记住，它在 java 端是静态的；这里有一个本地端，它为每个打开的游标使用新资源。你需要释放这些资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:38:14.390

如果您在每次使用后不关闭光标，那么您的内存泄漏非常严重。您实际上在做的是为每个查询创建一个新游标，但使用单个静态引用仅引用最新的。（对旧游标的引用丢失。）

如果（例如）运行时尝试进行一些垃圾收集，未关闭的游标也可能导致致命错误。如果 SQLiteDatabase 的`finalize()`方法（在垃圾收集上调用）会抛出异常，如果它注意到一些游标仍然打开，这可能会杀死你的应用程序。

# c# - 不可数 列出

> ID：14427447
> 
> 赞同：0
> 
> 时间：2013-01-20T17:58:01.393
> 
> 标签：c#, list, compiler-errors, compare

我有以下代码片段

```
 string[] lines = objects.Split(new string[] { "\r\n", "\n" }, StringSplitOptions.None);  
        //convert the array into a list for easier comparison
        List<string> StringtoList = lines.OfType<string>().ToList();

        //get the database list here
        List<string> sensitiveApps = testConnection.SelectSensitive();

        //compare the 2 lists to get the difference
        List<string> except = sensitiveApps.Except(StringtoList,StringComparer.OrdinalIgnoreCase); 
```

但是，我不断收到上述错误，有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T18:00:13.567

我猜最后一行是抛出异常。尝试改变：

```
List<string> except = sensitiveApps.Except(StringtoList,StringComparer.OrdinalIgnoreCase); 
```

到：

```
List<string> except = sensitiveApps.Except(StringtoList,StringComparer.OrdinalIgnoreCase).ToList(); 
```

此异常正在发生，因为`Except`将返回一个`IEnumerable<string>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T18:21:36.693

虽然 Daniel 的建议肯定是正确的，但我想提出一个替代方案：使用`HashSet<string>`它更好地设计用于除之外的基于集合的操作。

```
var set = new HashSet<string>(sensitiveApps, StringComparer.OrdinalIgnoreCase);
set.ExceptWith(lines); 
```

没有必要做`lines.OfType<string>().ToList()`as lines is `IEnumerable<string>`。然后，如果您确实需要将结果集作为列表，只需调用`set.ToList()`.

希望这可以帮助！

**编辑：**这假设sensitiveApps 的顺序无关紧要。

# java - 在 String line = x.readLine(); 中出现错误

> ID：14427451
> 
> 赞同：-1
> 
> 时间：2013-01-20T17:58:43.193
> 
> 标签：java, netbeans, io, filereader

我在文件读取中遇到了一点问题

这是代码

```
FileReader fr = new FileReader ("products.txt"); {
String line = fr.readLine();

while(line != null){
    System.out.println(line);
} 
```

NetBeans 给我一个错误

> 字符串线 = fr.readLine();

特别是在 readLine();

我尝试了 nextLine，但也没有用。

感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T18:00:00.227

因为，[**FileReader**](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileReader.html)没有`readLine()`方法，你应该使用[**BufferedReader**](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html#readLine%28%29)代替。

```
FileReader fr = new FileReader ("products.txt"); 
Bufferedreader br = new BufferedReader(fr);
String line = null;

while((line = br.readLine()) != null){
    System.out.println(line);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T18:03:32.813

错误是因为 FileReader 没有 readLine() 函数

试试这个 ：

```
BufferedReader bufferedReader = null;
bufferedReader = new BufferedReader(new FileReader("products.txt"));

String line = null;
while ((line = bufferedReader.readLine()) != null) {
    System.out.println(line);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T18:00:30.770

`FileReader`没有办法`readLine`。

您可能想要使用`BufferedReader`.

# android - android：我想要一个（n）（图像）按钮，上面有两个图像

> ID：14427463
> 
> 赞同：-2
> 
> 时间：2013-01-20T17:59:52.007
> 
> 标签：android, xml, button, drawable, imagebutton

我正在用 android 设计一个计算器，为此我需要带有两个图像的按钮，一个图像用于按钮主要功能，另一个图像用于按钮第二功能。我不能将它们折叠成一个图像，因为按钮的这两个功能必须单独替换。目前，我通过编写图层列表并将其用作 ImageButton 的 android:src 来“解决”此问题，但这似乎很笨拙，并且在调整大小时会出现问题。

有更好的解决方案吗？

顺便说一句，我正在尝试坚持使用 xml

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:21:11.610

我找到了一种解决方法/更好的 ansatz。我现在不是使用带有两个图像的 ImageButton，而是使用包含矢量图像作为字符的自定义字体，并将该字体写入普通 Button。

# windows-phone-8 - 在 Windows Phone 7/8 上的新页面上查找元素

> ID：14427467
> 
> 赞同：0
> 
> 时间：2013-01-20T18:00:07.897
> 
> 标签：windows-phone-8

我尝试实例化新页面并通过名称获取该页面上的对象（例如 LongListSelector）。

但是当我这样做时

```
 var currentPage = (PhoneApplicationPage)((PhoneApplicationFrame)App.Current.RootVisual).Content;
        currentPage.NavigationService.Navigate(new Uri(pageUri, UriKind.Relative)); 
```

我无法获取新页面的实例。var currentPage = (PhoneApplicationPage)((PhoneApplicationFrame)App.Current.RootVisual).Content 的第二次调用让我得到了相同的 currentPage。

如何访问新页面的实例及其上的项目？我需要它来实现自定义项目选择器。当从 page1 中点击列表 item_header 时，显示 page2，我可以在其中选择正确的 item_kind 并导航回 list1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:17:47.797

您实际上正在寻找的是在页面之间传递数据或拥有可以从不同页面访问并在它们之间共享数据的 ViewModel。[请在此处](https://stackoverflow.com/questions/4953491/passing-data-from-page-to-page)查看该问题的答案

它描述了在页面之间共享数据的不同方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T15:53:00.963

通过将 OnNavigateTo 事件中的页面实例保存到全局数组中来完成。

# xilinx - 内存中的纵横比是什么意思？

> ID：14427471
> 
> 赞同：2
> 
> 时间：2013-01-20T18:00:23.193
> 
> 标签：xilinx

有谁知道记忆中的纵横比是什么意思？Xilinx FPGA中的block ram和distributed ram有什么不同？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T18:04:24.947

“纵横比”是指访问内存时地址位和数据位的数量。

例如，假设您有 65,536 位的内存。如果每个地址使用 8 个数据位，则有 8,192 个地址 (65,536 / 8 = 8,192)，这意味着 13 个地址位 (2^13 = 8,192)。所以访问 65,536 位的一个纵横比是 8 个数据位和 13 个地址位。

但是假设您希望每个地址有 16 个数据位。那么你只能有 4,096 个地址，因为 4,096 * 16 是 65,536，这就是你拥有的所有内存。在这种情况下，您只能有 12 个地址位。所以访问 65,536 位内存的另一个纵横比是 16 个数据位和 12 个地址位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T18:10:17.653

纵横比是用于 RAM 块的数据组织的另一个术语。

在赛灵思 FPGA 中，块 RAM 是包含数千位 RAM 的专用双端口存储器。FPGA 包含几个（或许多）这些模块。

每个小逻辑块内部都有一个可配置的查找表。它通常用于逻辑功能，但您可以将其重新配置为几位 RAM。您可以将其中的几个（或多个）组合成一个更大的 RAM。这是分布式 RAM。

两种类型的 RAM 都可以用数据初始化，或用作 ROM。

更多信息可以在这里找到： [http ://www.xilinx.com/support/index.htm#nav=sd-nav-link-182711&tab=tab-sd](http://www.xilinx.com/support/index.htm#nav=sd-nav-link-182711&tab=tab-sd)

# java - 如何添加 ActionListener 来自定义组件

> ID：14427474
> 
> 赞同：3
> 
> 时间：2013-01-20T18:00:32.333
> 
> 标签：java, swing, events, dialog, actionlistener

我创建了一个组件并想添加`ActionListener`到自定义组件。
我想在设计视图的对话框中创建一个组件`JButton`并显示`actionPerformed`事件。`Events`

`JBaseComponent`类将派生自`JComponent`.

**代码：**

```
public class JCButton extends JBaseComponent implements ActionListener,ItemSelectable,ChangeListener{

private JButton _button=new JButton();
private ActionEvent _actevent=new ActionEvent(this,ActionEvent.ACTION_PERFORMED,"");

public JCButton() {
    super();
    _button.setPreferredSize(new Dimension(105, 25));
    _button.setFocusTraversalKeysEnabled(false);

     _button.addMouseListener(new MouseAdapter() {

        public void mousePressed(MouseEvent e) {
            JComponent c = (JComponent) e.getSource();
            TransferHandler handler = c.getTransferHandler();
            handler.exportAsDrag(c, e, TransferHandler.COPY);
        }
    });

    _button.setTransferHandler(new TransferHandler("btn"));

    setColorFocus(false);

    _button.addActionListener(this);
    actionPerformed(_actevent);
    addActionListener(this);
   revalidate();
   repaint();
    add(_button);
}

public void setText(String txt){
    _button.setText(txt);
}

public void setIcon(Icon ico){
    _button.setIcon(ico);
}

public void addActionListener(ActionListener act){
    _button.addActionListener(act);
}

@Override
public void actionPerformed(ActionEvent e) {
}

@Override
public Object[] getSelectedObjects() {
    return null;
}

@Override
public void addItemListener(ItemListener l) {

}

@Override
public void removeItemListener(ItemListener l) {

}

@Override
public void stateChanged(ChangeEvent e) {

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:12:24.693

该[线程](https://stackoverflow.com/questions/2167751/what-addactionlistener-does)可以帮助您了解`ActionListener`示例的目的如何使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T18:16:41.020

实现`ActionListener`接口，你要做的就是将监听器委托给`_button`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T21:04:25.360

如果您*真的*不能`JButton`为此使用 a，那么您的下一个最佳选择是扩展`AbstractButton`，其中包括[此处](https://stackoverflow.com/a/2168061/230513)`EventListenerList`提到的管道。例如，

[![图片](../Images/3bb38c2b4432e2fb198201db4ff2b15e.png)](https://i.stack.imgur.com/oC5Dk.png)

```
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.AbstractButton;
import javax.swing.Action;
import javax.swing.DefaultButtonModel;
import javax.swing.JFrame;
import javax.swing.UIManager;
import javax.swing.plaf.ButtonUI;

/** @see https://stackoverflow.com/a/14429304/230513 */
public class JCButtonTest {

    private void display() {
        JFrame f = new JFrame("JCButtonTest");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(new JCButton(new AbstractAction("JCButton") {

            @Override
            public void actionPerformed(ActionEvent e) {
                System.out.println(e);
            }
        }));
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    private static class JCButton extends AbstractButton {

        public static final int SIZE = 32;

        public JCButton(Action action) {
            this.setModel(new DefaultButtonModel());
            System.out.println(action.getValue(Action.NAME));
            this.init((String) action.getValue(Action.NAME), null);
            this.addActionListener(action);
        }

        @Override
        public void updateUI() {
            setUI((ButtonUI) UIManager.getUI(this));
        }

        @Override
        public String getUIClassID() {
            return "ButtonUI";
        }
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new JCButtonTest().display();
            }
        });
    }
} 
```

# python - crontab 中的子脚本执行

> ID：14427475
> 
> 赞同：1
> 
> 时间：2013-01-20T18:00:44.070
> 
> 标签：python, shell, cron

我有一个 shell 脚本，它启动许多不同的 python 脚本。

shell 脚本导出了许多变量，这些变量又被 python 脚本使用。

这在命令行中运行时运行良好，但在 crontab 中执行时不起作用。

在 cron 日志中，我可以看到 shell 脚本正在运行，但 python 脚本似乎没有运行。

1.  python 脚本能否从 cron 中的 shell 脚本运行？

2.  python 脚本是否能够从 cron 访问父 shell 脚本设置的环境变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-14T15:16:35.833

如果您遇到问题，最好在从 cron 调用的任何脚本中使用命令的完整路径，以避免调用 cron 的基本环境出现 PATH 和环境变量问题。

# vba - Windows 8 应用程序错误：仅尝试打开 Outlook 时使用 Visual Studio 的“类未注册”（Visual Basic）

> ID：14427478
> 
> 赞同：1
> 
> 时间：2013-01-20T18:00:57.070
> 
> 标签：vba, outlook, com, windows-8

我对使用 Visual Studio/Visual Basic 进行编程相当陌生。

我正在尝试使用适用于 Windows 8 的 Visual Studio 2012 编写 Windows 8 Metro 应用程序。我使用 Outlook 2007。它应该打开一个 Outlook 应用程序，但由于以下错误而崩溃（希望没有翻译错误）：

**附加信息：无法创建具有 CLSID {0006F03A-0000-0000-C000-000000000046} 的 COM 组件的实例，因为 CoCreateInstanceFromApp 的以下错误：80040154 未注册类（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)） . 确保您的 COM 对象位于 CoCreateInstanceFromApp 列表中。**

这是我输入的所有代码，除了visual studio提供的标准代码：

> 在一开始就导入 Microsoft.Office.Interop '
> Dim oOutlook As New Microsoft.Office.Interop.Outlook.Application ' in Sub

我也试过：

> 将 oOutlook 调暗为 Outlook.Application = 新的 Outlook.Application

如其他地方所见。

我试图在网上查找信息，但它们只与服务器和未经批准的 COM 有关。不过，微软应该批准 Outlook。

我做错了什么，如何解决这个问题，以便打开 Outlook 窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T21:45:36.483

不允许您尝试完成的场景。您不能在现代 UI 中调用专门为桌面编写的代码。这包括 Microsoft 产品，甚至 Outlook。如果您需要共享代码，您可以在编写新代码时使用[可移植类库](http://msdn.microsoft.com/en-us/library/gg597391%28v=VS.110%29.aspx)，但这不会帮助您通过 COM 或其他机制调用遗留代码。

# android - 我的业务逻辑应该在片段还是上面的活动中？

> ID：14427482
> 
> 赞同：6
> 
> 时间：2013-01-20T18:01:21.863
> 
> 标签：android

我正在尝试将片段和列表视图与数组适配器一起使用，并且无法从数组适配器中的 onClickListener 调用我的方法。

如果我正确理解模式，片段应该是自给自足的，所以我想把我的业务逻辑放在那里。但我无法从阵列适配器调用它。如果我把它放在主要活动中，我可以调用它，但这不妨碍我在另一个活动中使用片段并打破范式吗？

我的业务逻辑是在错误的地方，还是我没有正确调用它？

这是我的 ArrayAdapter；

```
public class RecipientsListAdapter extends ArrayAdapter<Recipient>{

    Context context;
    int layoutResourceId;   
    Recipient data[] = null;

    public RecipientsListAdapter(Context context, int layoutResourceId, Recipient[] data) {
        super(context, layoutResourceId, data);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = data;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        View row = convertView;
        RecipientHolder holder = null;

        final boolean isLastRow = (position == data.length-1);

        if(row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new RecipientHolder();
            holder.imgIcon = (ImageView)row.findViewById(R.id.imgIcon);
            holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);

            row.setTag(holder);
        }
        else
        {
            holder = (RecipientHolder)row.getTag();
        }

        final Recipient recipient = data[position];
        holder.txtTitle.setText(recipient.displayName);
        holder.imgIcon.setImageResource(recipient.icon);

        row.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                ((MainActivity)context).onChildItemSelected(position);
                if(isLastRow){
                //((RecipientsFragment).getContext()).launchContactPicker();

                    ((MainActivity)context)).launchContactPicker();

                }
                else{
                    Toast.makeText(getContext(), recipient.displayName, Toast.LENGTH_SHORT).show();
                }
            }
        });

        return row;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-25T18:16:17.250

不要向上转换给定的上下文，这会将适配器隐式耦合到该特定 Activity 而不在构造函数签名中宣布它。

由于您具有如此强的耦合，因此要么将`RecipientsFragment`其作为参数添加到构造函数中，要么按照 Joe 的建议并`onListItemClick`在 Fragment 本身的 ListView 上使用。然而，在适配器中使用`OnClickListener`s 通常是合法的（例如，多个可点击的项目），因此在这些情况下，您必须只传递 Fragment 本身。

如果您发现超过 2 个不同的事物将使用该适配器（例如，3 个不同的 Fragment），请引入一个回调接口并让 Fragments 实现它（并将该接口作为参数传递给构造函数）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-25T18:09:04.147

`Adapter`不应调用任何点击侦听器，也不应在方法中附加点击侦听器`getView()`。相反，您应该使用, 并在片段中`ListFragment`简单地覆盖。[`onListItemClick()`](http://developer.android.com/reference/android/app/ListFragment.html#onListItemClick%28android.widget.ListView,%20android.view.View,%20int,%20long%29)然后，您可以`Activity`通过调用侦听器接口回调将该事件分派给 ，或者直接在 Fragment 中处理它。如果您想支持 SDK 11 发布之前的 Android 版本，也可以使用[支持库。](http://developer.android.com/reference/android/support/v4/app/ListFragment.html)

# macos - 使用 Cocoa (OS X) 的 OpenGL 上下文

> ID：14427487
> 
> 赞同：1
> 
> 时间：2013-01-20T18:01:37.197
> 
> 标签：macos, cocoa, opengl

我正在尝试以编程方式为 OS X 应用程序创建一个带有 OpenGL 上下文的 Cocoa 窗口。我一直无法在网上找到一个不使用 Interface Builder 来创建窗口和 OpenGL 视图的示例。

我想要的只是`glClear`让我的窗口变成洋红色（0xFF00FF）。但是，窗口仍然是白色的。

这是我的项目：

### AppDelegate.h

```
#import <Cocoa/Cocoa.h>

@interface AppDelegate : NSObject <NSApplicationDelegate> {
    NSWindow *window;
    NSOpenGLContext *openGLContext;
}

@property (assign) NSWindow *window;
@property (assign) NSOpenGLContext *openGLContext;

- (void)draw;

@end 
```

### AppDelegate.m

```
#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window;
@synthesize openGLContext;

static NSOpenGLPixelFormatAttribute glAttributes[] = {
    0
};

- (void)draw {
    NSLog(@"Drawing...");

    [self.openGLContext makeCurrentContext];

    glClearColor(1, 0, 1, 1);
    glClear(GL_COLOR_BUFFER_BIT);

    [self.openGLContext flushBuffer];
}

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    NSRect frame = NSMakeRect(0, 0, 200, 200);

    self.window = [[[NSWindow alloc]
        initWithContentRect:frame
        styleMask:NSBorderlessWindowMask
        backing:NSBackingStoreBuffered
        defer:NO] autorelease];
    [self.window makeKeyAndOrderFront:nil];

    NSOpenGLPixelFormat *pixelFormat
        = [[NSOpenGLPixelFormat alloc] initWithAttributes:glAttributes];
    self.openGLContext = [[NSOpenGLContext alloc]
        initWithFormat:pixelFormat shareContext:nil];
    [self.openGLContext setView:[self.window contentView]];

    [NSTimer
        scheduledTimerWithTimeInterval:.1
        target:self
        selector:@selector(draw)
        userInfo:nil
        repeats:YES];
}

- (BOOL)applicationShouldTerminateAfterLastWindowClosed:(NSApplication *)_app {
    return YES;
}

@end 
```

### 主文件

```
#import "AppDelegate.h"

#import <Cocoa/Cocoa.h>

int main(int argc, char **argv) {
    AppDelegate *appDelegate = [[AppDelegate alloc] init];
    return NSApplicationMain(argc, (const char **) argv);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T20:41:22.823

的文档`-[NSOpenGLContext flushBuffer]`说：

> **讨论**
> 
> 如果接收者不是双缓冲上下文，则此调用不执行任何操作。

`NSOpenGLPFADoubleBuffer`您可以通过在像素格式属性中包含您的上下文来双缓冲。或者，您可以调用`glFlush()`而不是`-[NSOpenGLContext flushBuffer]`让您的上下文保持单缓冲。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-27T05:40:59.827

将此代码用于像素格式属性。

```
NSOpenGLPixelFormatAttribute glAttributes[] =
{
    NSOpenGLPFAColorSize, 24,
    NSOpenGLPFAAlphaSize, 8,
    NSOpenGLPFADoubleBuffer,
    NSOpenGLPFAAccelerated,
    0
}; 
```

我已经对其进行了测试，你得到了你正在寻找的洋红色屏幕。

# java - 尝试使用 jcifs smbFile

> ID：14427488
> 
> 赞同：1
> 
> 时间：2013-01-20T18:01:48.510
> 
> 标签：java, android, smb, jcifs

这是我上个月发布的一个问题的重复，我还没有解决。我正在尝试在 Android 应用程序中使用 jcifs 与我的 Windows 计算机通信，但是当它尝试连接到网络时，应用程序中止且没有错误消息。我的代码和网络参数都没有问题，经过一个月的挖掘，我发现的唯一提示是以下两个想法。

有人可以验证以下是否属实： 1\. Java SMB 无法在 Android 中运行。如果这是真的，那么我有哪个以及如何获得 Android 版本？2\. 将jcifs.jar 放在libs 文件夹中，对jcifs 不起作用。如果我的程序编译正确，那是否意味着 jar 没问题？

[尝试使用 SmbFileInputStream](https://stackoverflow.com/questions/13871198/trying-to-use-smbfileinputstream)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:56:08.820

1.  它适用于 Android，我使用的是 jcifs-1.3.17.jar
2.  将它放入 libs 文件夹对我有用

确保您不是在 GUI 线程中执行网络代码。Android 不喜欢这样，您的应用程序将在运行时崩溃。作为现在的解决方法，您可以在 GUI 线程中执行网络操作之前​​添加以下内容：

```
ThreadPolicy tp = ThreadPolicy.LAX;
StrictMode.setThreadPolicy(tp); 
```

但我强烈建议仅将其用于测试目的。

# batch-file - 检索后如何从cmd设置日期

> ID：14427490
> 
> 赞同：1
> 
> 时间：2013-01-20T18:01:53.347
> 
> 标签：batch-file, cmd

我有以下代码

```
set x=%date /T %
date 16/12/2012
date 15/12/2012

some stuff goes here    
echo set your date

date %x%       <--- getting error in that line.
pause 
```

那么我怎样才能以 dd/mm/yy 格式获取日期

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T09:36:20.603

`wmic`您可以使用命令获取 dd/mm/yy 的日期格式。此命令允许您获取当前日期而不受区域设置的影响。

```
 @echo off
    SETLOCAL EnableDelayedExpansion

    for /f "skip=1 tokens=1-6 delims= " %%a in ('wmic path Win32_LocalTime Get Day^,Hour^,Minute^,Month^,Second^,Year /Format:table') do (
        IF NOT "%%~f"=="" (
            set /a FormattedDate=10000 * %%f + 100 * %%d + %%a
            set FormattedDate=!FormattedDate:~-2,2!/!FormattedDate:~-4,2!/!FormattedDate:~-6,2!
        )
    )

    echo %FormattedDate%
    PAUSE 
```

`date.bat`您可以通过在命令提示符下执行以下命令将其另存为并运行此批处理文件：

```
C:\>date.bat
21/01/13
Press any key to continue... 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-31T11:03:48.007

另外两种不依赖于时间设置的方法（均取自[：如何独立于本地化获取数据/时间](http://www.dostips.com/forum/viewtopic.php?f=3&t=4555)：）。两者都获得星期几，而且都不需要管理员权限！：

1\. **MAKECAB** - 可在每个 Windows 系统上运行（速度快但会创建一个小临时文件）（foxidrive 脚本）：

```
@echo off
pushd "%temp%"
makecab /D RptFileName=~.rpt /D InfFileName=~.inf /f nul >nul
for /f "tokens=3-7" %%a in ('find /i "makecab"^<~.rpt') do (
   set "current-date=%%e-%%b-%%c"
   set "current-time=%%d"
   set "weekday=%%a"
)
del ~.*
popd
echo %weekday% %current-date% %current-time%
pause 
```

2\. **ROBOCOPY** - 它不是 windows xp 和 win 2003 的本机命令，但可以[从 microsoft 网站下载](http://www.microsoft.com/en-us/download/details.aspx?id=17657) 。但内置于 Vista 及更高版本的所有内容中：

```
 @echo off
setlocal 
for /f "skip=8 tokens=2,3,4,5,6,7,8 delims=: " %%D in ('robocopy /l * \ \ /ns /nc /ndl /nfl /np /njh /XF * /XD *') do (
 set "dow=%%D"
 set "month=%%E"
 set "day=%%F"
 set "HH=%%G"
 set "MM=%%H"
 set "SS=%%I"
 set "year=%%J"
)

echo Day of the week: %dow%
echo Day of the month : %day%
echo Month : %month%
echo hour : %HH%
echo minutes : %MM%
echo seconds : %SS%
echo year : %year%
endlocal 
```

还有另外三种使用其他 Windows 脚本语言的方法。它们会给您更多的灵活性，例如，您可以获得一年中的星期、以毫秒为单位的时间等等。

3\. **JSCRIPT/BATCH**混合（需要另存为`.bat`）。Jscript 在 NT 及更高版本的每个系统上都可用，作为 windows 脚本主机的一部分（[虽然可以通过注册表禁用，但很少见](http://technet.microsoft.com/en-us/library/ee198684.aspx)）：

```
@if (@X)==(@Y) @end /* ---Harmless hybrid line that begins a JScript comment

@echo off
cscript //E:JScript //nologo "%~f0"
exit /b 0
*------------------------------------------------------------------------------*/

function GetCurrentDate() {
        // Today date time which will used to set as default date.
        var todayDate = new Date();
        todayDate = todayDate.getFullYear() + "-" +
                       ("0" + (todayDate.getMonth() + 1)).slice(-2) + "-" +
                       ("0" + todayDate.getDate()).slice(-2) + " " + ("0" + todayDate.getHours()).slice(-2) + ":" +
                       ("0" + todayDate.getMinutes()).slice(-2);

        return todayDate;
    }

WScript.Echo(GetCurrentDate()); 
```

4\. **VSCRIPT/BATCH**混合（[是否可以在不使用临时文件的情况下在批处理文件中嵌入和执行 VBScript？](https://stackoverflow.com/questions/9074476/is-it-possible-to-embed-and-execute-vbscript-within-a-batch-file-without-using-a)）与 jscript 相同的情况，但混合不是那么完美：

```
:sub echo(str) :end sub
echo off
'>nul 2>&1|| copy /Y %windir%\System32\doskey.exe %windir%\System32\'.exe >nul
'& echo current date:
'& cscript /nologo /E:vbscript "%~f0"
'& exit /b

'0 = vbGeneralDate - Default. Returns date: mm/dd/yy and time if specified: hh:mm:ss PM/AM.
'1 = vbLongDate - Returns date: weekday, monthname, year
'2 = vbShortDate - Returns date: mm/dd/yy
'3 = vbLongTime - Returns time: hh:mm:ss PM/AM
'4 = vbShortTime - Return time: hh:mm

WScript.echo  Replace(FormatDateTime(Date,1),", ","-") 
```

5\. **POWERSHELL** - 可以安装在每台具有 .net 的机器上 - 从 Microsoft 下载（[v1](http://www.microsoft.com/en-us/download/details.aspx?id=7217)、[v2](http://support.microsoft.com/kb/968929/bg)、[v3](http://www.microsoft.com/en-us/download/details.aspx?id=34595)（仅适用于 win7 及更高版本））。默认安装在 Win7/Win2008 及更高版本的所有计算机上：

```
C:\>powershell get-date -format "{dd-MMM-yyyy HH:mm}" 
```

6.**自编译jscript.net/batch**（从来没有见过没有.net的windows机器，所以我认为这是一个非常便携的）：

```
@if (@X)==(@Y) @end /****** silent line that start jscript comment ******

@echo off
::::::::::::::::::::::::::::::::::::
:::       compile the script    ::::
::::::::::::::::::::::::::::::::::::
setlocal
if exist "%~n0.exe" goto :skip_compilation

set "frm=%SystemRoot%\Microsoft.NET\Framework\"
:: searching the latest installed .net framework
for /f "tokens=* delims=" %%v in ('dir /b /s /a:d /o:-n "%SystemRoot%\Microsoft.NET\Framework\v*"') do (
    if exist "%%v\jsc.exe" (
        rem :: the javascript.net compiler
        set "jsc=%%~dpsnfxv\jsc.exe"
        goto :break_loop
    )
)
echo jsc.exe not found && exit /b 0
:break_loop

call %jsc% /nologo /out:"%~n0.exe" "%~dpsfnx0"
::::::::::::::::::::::::::::::::::::
:::       end of compilation    ::::
::::::::::::::::::::::::::::::::::::
:skip_compilation

"%~n0.exe" 

exit /b 0

****** end of jscript comment ******/
import System;
import System.IO;

var dt=DateTime.Now;
 Console.WriteLine(dt.ToString("yyyy-MM-dd hh:mm:ss")); 
```

7\. **Logman**这无法获取星期几。它比较慢，还创建一个临时文件，并且基于 logman 在其日志文件上放置的时间戳。将适用于 XP 及更高版本的所有内容。可能永远不会任何人都使用过 - 包括我 - 但这是另一种方式......

```
@echo off
setlocal
del /q /f %temp%\timestampfile_*

Logman.exe stop ts-CPU 1>nul 2>&1
Logman.exe delete ts-CPU 1>nul 2>&1

Logman.exe create counter ts-CPU  -sc 2 -v mmddhhmm -max 250 -c "\Processor(_Total)\%% Processor Time" -o %temp%\timestampfile_ >nul
Logman.exe start ts-CPU 1>nul 2>&1

Logman.exe stop ts-CPU >nul 2>&1
Logman.exe delete ts-CPU >nul 2>&1
for /f "tokens=2 delims=_." %%t in  ('dir /b %temp%\timestampfile_*^&del /q/f %temp%\timestampfile_*') do set timestamp=%%t

echo %timestamp%
echo MM: %timestamp:~0,2%
echo dd: %timestamp:~2,2%
echo hh: %timestamp:~4,2%
echo mm: %timestamp:~6,2%

endlocal
exit /b 0 
```

[有关获取日期功能的更多信息](http://ss64.com/ps/get-date.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T10:01:35.743

这是在我的系统上测试的，它将日期设置为所需的格式。如果出现“所需权限不足或客户端未持有所需权限”的错误消息，请尝试以管理员身份运行脚本。这应该可以正常工作。

```
@echo off
set x=%DATE:~0,2%/%DATE:~3,2%/%DATE:~6,4%
echo %x%
set date=%x%
echo %date% 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-21T03:54:02.473

您是否尝试过 SET x=%date:~-10%，我知道它适用于 Windows 7。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-19T16:06:21.367

戴尔的回答对我帮助很大。我修改了他的解决方案以获取**hhmmdd**格式的时间：

```
@echo off
SETLOCAL EnableDelayedExpansion
rem Fill variables: %%a=Day %%b=Hour %%c=Minute %%d=Month %%e=Second %%f=Year
for /f "skip=1 tokens=1-6 delims= " %%a in ('wmic path Win32_LocalTime Get Day^,Hour^,Minute^,Month^,Second^,Year /Format:table') do (
    IF NOT "%%~f"=="" (
    rem Adding leading zeros:
        set /a FormattedTime=1000000 + 10000 * %%b + 100 * %%c + %%e
    rem reading from the right to left: 
        set FormattedTime=!FormattedTime:~-6,2!!FormattedTime:~-4,2!!FormattedTime:~-2,2!
    )
)
echo %FormattedTime% 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-20T21:41:24.380

你的任务`set x=%date /T %`是错误的。百分号扩展变量，它们不提供命令替换功能。

Windows 已经提供了一个带有当前日期的自动环境变量`%DATE%`（也是一个`%TIME%`带有当前时间的变量），所以你可以简单地这样做：

```
set x=%DATE%
date 16/12/2012
date 15/12/2012

rem stuff

date %x%
pause 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-11T18:52:24.003

我知道这是一篇旧帖子，但我找到了一种无需 wmic 的方法：

起初，我找到了一种答案并使用它：

> 你可以试试这个！这应该适用于 Windows 机器。
> 
> for /F "usebackq tokens=1,2,3 delims=-" %%I IN ( `echo %date%`) do echo "%%I" "%%J" "%%K" [https://stackoverflow.com/a/14820126 /3735825](https://stackoverflow.com/a/14820126/3735825)

然后我使用这个并做了这个：

```
for /F "usebackq tokens=1,2,3,4 delims=/, " %%I IN (`echo %date%`) do ECHO %%L-%%K-%%J 
```

它从 %date% 命令中删除空格和分隔符，并允许您使用日期的任何部分作为变量；例如，如果我想将日期设置为 YYYYMMDD 代码应该是这样的：

```
for /F "usebackq tokens=1,2,3,4 delims=/, " %%I IN (`echo %date%`) do ECHO %%L%%K%%J 
```

如果您需要单独的变量并且需要根据需要使用它们，那么您可以使用以下变量：

```
%%I = Day of Week
%%J = Day
%%K = Month
%%L = Year 
```

我希望它可以帮助任何人。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-02T08:29:39.417

以下代码适用于我：

```
set DATE_NOW=!date:~6,4!!date:~0,2!!date:~3,2!   
set TIME_NOW=!time:~0,2!!time:~3,2!!time:~6,2!   

echo %DATE_NOW%                                  
echo %TIME_NOW% 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-11T01:21:22.410

就我而言，我需要格式为 YYYY-MM-DD 的日期，而不是 2019 年 5 月 9 日。所以我用 make cab修改了**npocmaka的通用决策：**

```
@echo off
pushd "%temp%"
makecab /D RptFileName=~.rpt /D InfFileName=~.inf /f nul >nul
for /f "tokens=3-7" %%a in ('find /i "makecab"^<~.rpt') do (
    set "current-year=%%e"
    set "current-month=%%b"
    set "current-day=%%c"
    set "current-time=%%d"
    set "weekday=%%a"
)
del ~.*
popd

CALL :CASE_%current-month% 
IF ERRORLEVEL 1 CALL :DEFAULT_CASE 

ECHO Done.
GOTO NEXT

:CASE_Jan
    set "current-month=01"
    GOTO END_CASE
:CASE_Feb
    set "current-month=02"
    GOTO END_CASE
:CASE_Mar
    set "current-month=03"
    GOTO END_CASE
:CASE_Apr
    set "current-month=04"
    GOTO END_CASE
:CASE_May
    set "current-month=05"
    GOTO END_CASE
:CASE_Jun
    set "current-month=06"
    GOTO END_CASE
:CASE_Jul
    set "current-month=07"
    GOTO END_CASE
:CASE_Aug
    set "current-month=08"
    GOTO END_CASE
:CASE_Sep
    set "current-month=09"
    GOTO END_CASE
:CASE_Oct
    set "current-month=10"
    GOTO END_CASE
:CASE_Nov
    set "current-month=11"
    GOTO END_CASE
:CASE_Dec
    set "current-month=12"
    GOTO END_CASE

:DEFAULT_CASE
  set "current-month=xx"
  echo "Month is not in the English language! Fix it!"  
  GOTO END_CASE
:END_CASE
  VER > NUL # reset ERRORLEVEL
  GOTO :EOF # return from CALL

:NEXT
echo %weekday% %current-year%-%current-month%-%current-day% %current-time%
pause 
```

在 Windows XP SP3 和 Server 2008 R2 SP1 上测试。

# actionscript-3 - 参数错误：错误 #2025

> ID：14427491
> 
> 赞同：0
> 
> 时间：2013-01-20T18:01:53.390
> 
> 标签：actionscript-3

尝试我的代码时出现此错误：

> ArgumentError：错误 #2025：提供的 DisplayObject 必须是调用者的子对象。在 Flash.display::DisplayObjectContainer/removeChild() 在 Main_MouseFollow/onEnterFrame()[C:\Users\Ida\Documents\flash kursen\Space shooter del2\Main_MouseFollow.as:120]

第 120 行是 `removeChild(_bullets[j]);`

这是整个代码。我是 Flash 新手，如何解决此错误？

```
package
{
    import flash.display.MovieClip;
    import flash.events.Event;
    import flash.events.MouseEvent;

    public class Main_MouseFollow extends MovieClip
    {
        private var _bullets:Array;
        private var _robotScore:Number;
        private var _playerScore:Number;

        public function Main_MouseFollow()
        {

            //Add event listeners
            addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
            stage.addEventListener("bulletCreated", onBulletCreated);

            _bullets = new Array();
            _robotScore = 0;
            _playerScore = 0;
        }
        private function onAddedToStage(event:Event):void
        {
            addEventListener(Event.ENTER_FRAME, onEnterFrame);
            addEventListener(Event.REMOVED_FROM_STAGE, onRemovedFromStage);
        }
        private function onRemovedFromStage(event:Event):void
        {
            removeEventListener(Event.ENTER_FRAME, onEnterFrame);
            removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
            removeEventListener(Event.REMOVED_FROM_STAGE, onRemovedFromStage);
        }
        private function onBulletCreated(event:Event)
        {
            _bullets.push(MovieClip(event.target));
        }
        private function onEnterFrame(event:Event):void
        {
            bulletDisplay.text = "Bullets on the stage: " + String(_bullets.length);
            for (var i:int = 0; i < _bullets.length; i++)
            {
                switch (_bullets[i].bulletType)
                {
                    case "circle" :

                        //Check for a collision with the player
                        if (player.hitTestPoint(_bullets[i].x,_bullets[i].y,true))
                        {
                            //Remove the bullet from the stage
                            removeChild(_bullets[i]);

                            //Remove bullet from array
                            _bullets.splice(i,1);

                            //Subtract 1 from the counter to compensate
                            //for the removed element
                            i--;

                            //Update the robot's score
                            _robotScore++;

                            //Update the robot's score display on the stage
                            robotScoreDisplay.text = String(_robotScore);
                        }
                        break;

                    case "star" :

                        //Check for a collision with the robot
                        if (robot.hitTestPoint(_bullets[i].x,_bullets[i].y,true))
                        {
                            //Remove the bullet from the stage
                            removeChild(_bullets[i]);

                            //Remove bullet from array
                            _bullets.splice(i, 1);

                            //Subtract 1 from the counter to compensate
                            //for the removed element
                            i--;

                            //Update the enemy's score
                            _playerScore++;

                            //Update the player's score display on the stage
                            playerScoreDisplay.text = String(_playerScore);
                        }
                        break;
                    }
                }
                //Bullet stage Boundaries:
                for (var j:int = 0; j < _bullets.length; j++)
                {
                    //Top
                    if (_bullets[j].y + _bullets[j].height / 2 < 0)
                    {
                        removeChild(_bullets[j]);
                        _bullets.splice(j, 1);
                        j--;
                    }
                    //Bottom
                    else if (_bullets[j].y - _bullets[j].height / 2 > stage.stageHeight)
                    {
                        removeChild(_bullets[j]);
                        _bullets.splice(j, 1);
                        j--;
                    }
                    //Left
                    else if (_bullets[j].x + _bullets[j].width / 2 < 0)
                    {
                        removeChild(_bullets[j]);
                        _bullets.splice(j, 1);
                        j--;
                    }
                    //Right
                    else if (_bullets[j].x - _bullets[j].width / 2 > stage.stageWidth)
                    {
                        removeChild(_bullets[j]);
                        _bullets.splice(j, 1);
                        j--;
                    }
                }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:39:44.467

尝试以更安全的方式移除孩子：

替换（在所有 4 种情况下）：

```
removeChild(_bullets[j]); 
```

和：

```
if(_bullets[j].parent)
    _bullets[j].parent.removeChild(_bullets[j]); 
```

这将消除错误。如果逻辑上没有任何其他问题，这将解决整个问题。

# php - 将刻度转换为 unix 时间戳

> ID：14427493
> 
> 赞同：6
> 
> 时间：2013-01-20T18:02:18.667
> 
> 标签：php, mysql, datetime

我得到开始时间`634942626000000000`和结束时间`634942638000000000`。如何将其转换为 Unix 时间戳？我想在 PHP 中显示格式化的日期/时间？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T18:42:55.973

C# ticks 是自午夜以来的刻度数`0001-01-01 00:00:00`（每个刻度是秒的 1/10000000），而 UNIX 时间戳是自 UNIX 纪元 ( `1970-01-01 01:00:00`) 开始以来的秒数，因此所需的结果是`$seconds = 634942626000000000/10000000 - $number_of_seconds`，其中和`$number_of_seconds`之间的秒数。所以，你现在需要的就是确定什么是平等的。`0001-00-01 00:00:00``1970-01-01 01:00:00``$number_of_seconds`

**更新：**这是在 C# 中的操作方法：[如何将 Unix 时间戳转换为 DateTime，反之亦然？](https://stackoverflow.com/questions/249760/how-to-convert-unix-timestamp-to-datetime-and-vice-versa)

**更新 2**使用这个简单的脚本[http://hastebin.com/lefiyiheju.mel](http://hastebin.com/lefiyiheju.mel)确定`$number_of_seconds`是 62136892800，但我不知道它是否准确

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T18:05:43.727

这应该这样做：

```
$seconds = 634942626000000000 / 1000000000;
echo date("Y-m-d H:i:s", $seconds); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-03T18:52:18.407

在 Python 中，你会做

```
In [53]: import datetime

In [54]: ticks = 634942626000000000

In [55]: start = datetime.datetime(1, 1, 1)

In [56]: delta = datetime.timedelta(seconds=ticks/10000000)

In [57]: the_actual_date = start + delta

In [58]: the_actual_date.timestamp()
Out[58]: 1358665800.0

In [59]: the_actual_date
Out[59]: datetime.datetime(2013, 1, 20, 7, 10) 
```

# java - Android EditText 中的对齐问题

> ID：14427501
> 
> 赞同：1
> 
> 时间：2013-01-20T18:02:51.960
> 
> 标签：java, android, eclipse, android-edittext

请看下面的代码

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Form" >

    <RelativeLayout 
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        >

       <TextView
           android:id="@+id/heightLabel"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text="@string/height"
           /> 

       <EditText 
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_toRightOf="@+id/heightLabel"
           android:layout_marginLeft="5dp"
           android:hint=""
           />

    </RelativeLayout>

</ScrollView> 
```

我需要`EditText`将其显示在 旁边`TextView`，并具有适当的大小。但相反，它无处显示。我什至没有看到它！请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:59:50.550

您正在使用`wrap_content`但没有默认文本。因此，如果 EditText 可见，它将非常小。您需要自己定义合适的尺寸。尝试`match_parent`用作宽度或添加属性，如`minWidth`or `ems`。

# php - 将 PHP 变量传递给 JavaScript

> ID：14427506
> 
> 赞同：0
> 
> 时间：2013-01-20T18:03:25.337
> 
> 标签：php, javascript, html, web-applications

我是一名业余 Web 开发人员，我正在开发一个主要使用 JavaScript 但需要使用 PHP/MySQL 的应用程序，因为它是一个测验应用程序，我不希望人们通过转到“查看源代码”来查看所有测验答案。相关页面有：index.html、problems.php、functions.js。index.html 是主要的测验页面。questions.php 是用于连接到服务器并获取测验页面上问题答案的页面。functions.js 用于检查答案是否正确以及提示应用程序执行某些操作的其他事项。

索引.html：

```
<?php
    include ("problems.php");                                    
?>
... 
```

问题.php

```
<?php
    // Connect to server
    $con = mysql_connect("XXXXXXXXXXXXX", "XXXXXXXXXXX", "XXXXXXXXXXXX");
    mysql_select_db("problems", $con);
    if (!$con) {
         die("Didn't connect");
    }
    $question_num = $_GET["num"];
    $sql = "SELECT question FROM questions WHERE num='" . $question_num . "';";
    $answer = mysql_fetch_array(mysql_query($sql))['question'];
?> 
```

函数.js

```
function checkAnswer(ans, input) {
    if (ans == input) {
        alert("Correct!");
    }
} 
```

我不是 PHP 开发人员，对 PHP 知之甚少（这就是我选择在应用程序中使用 JavaScript 的原因）。但是我想使用 GET 方法来获取测验问题的答案（当用户单击“提交”时传入？num=1,2,3,4,5）。然后将从数据库中获取的测验答案传递给functions.js的checkAnswer函数以检查答案。我的问题是对 JavaScript 函数的问题的答案传递。此外，我的服务器似乎甚至没有连接到我的代码中的数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:10:25.073

我建议不要将答案存储在 javascript 中，因为任何人都可以打开 javascript 文件并查看一下。我建议做所有的答案检查服务器端。

将答案作为 GET 或 POST 请求中的参数传递给服务器，捕获答案，然后使用 mysqli_* 或 PDO 创建准备好的语句来检查您的答案是否正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:11:10.943

您可以按如下方式实现

**脚步**

1.  将用户输入的问题 ID 和答案传递给 PHP 页面
2.  在 php 页面上验证答案
3.  然后根据答案返回真/假

我会建议你为此使用[jQuery ajax](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
   url: "GetAnswerStatus.PHP?questionid=4&input=3"
}).done(function ( data ) {
   // data = true/ false
   console.log("Answer:" + data);
}); 
```

或者使用[jQuery .get](http://api.jquery.com/jQuery.get/)

```
$.get('GetAnswerStatus.PHP?questionid=4&input=3', function(data) {
    console.log("Answer:" + data);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T18:13:40.237

如果您使用 javascript 向客户端获取答案，用户将能够看到它。将答案发送到服务器（例如使用 ajax）并在那里检查（只返回是否正确）。

同样将 GET 值直接插入 mysql 查询也不是很安全。使用类似[mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)的东西。

# php - 如何强制主题使用 Wordpress 的 jQuery？

> ID：14427507
> 
> 赞同：0
> 
> 时间：2013-01-20T18:03:31.237
> 
> 标签：php, jquery, wordpress

我安装了一个新的很棒的主题，并在努力工作后让它工作。一切运行良好，除了“添加媒体”、“添加链接”和“HTML 编辑器”。

我阅读了如何根据官方诊断说明诊断问题，并按照他们的要求将其发布在 Wordpress.org 论坛上，但我还没有收到任何回复，而且我想我也不会收到回复。

我用这个：

```
define('SCRIPT_DEBUG', true); 
```

它确实解决了“添加媒体”和“HTML 编辑器”的问题，但没有解决“添加链接”的问题。当我单击它时，它确实打开了，但是屏幕变灰，并且该框在左下角很远，并且我无法使用“取消”按钮将其关闭（[请参见此处](http://i.imgur.com/SgwisDX.png)）。

我确实尝试禁用所有插件，但它不起作用（[见这里](http://i.imgur.com/dQn06Kf.png)）。

总而言之，问题在于主题可能有自己的 jQuery 版本，而 Wordpress 3.5 也有自己的版本。如何强制主题使用 Wordpress 的 jQuery？还是强制 Wordpress 使用主题的 jQuery？任何可以修复编辑器的东西，我都想要。

编辑：只是为了让它更清楚。与插件没有冲突。冲突发生在 Wordpress 的 jQuery 和主题的 jQuery 之间。

如果有帮助，这在头文件中。

```
 <?php
    wp_enqueue_style("jqueryui_css", get_stylesheet_directory_uri()."/css/jqueryui/custom.css", false, $pp_theme_version, "all");
    wp_enqueue_style("screen_css", get_stylesheet_directory_uri()."/css/screen.css", false, $pp_theme_version, "all");
    wp_enqueue_style("tipsy_css", get_stylesheet_directory_uri()."/css/tipsy.css", false, $pp_theme_version, "all");
    wp_enqueue_style("fancybox_css", get_stylesheet_directory_uri()."/js/fancybox/jquery.fancybox.css", false, $pp_theme_version, "all");
    wp_enqueue_style("flexslider_css", get_stylesheet_directory_uri()."/js/flexslider/flexslider.css", false, $pp_theme_version, "all");

    $pp_advance_enable_responsive = get_option('pp_advance_enable_responsive');

    if(!empty($pp_advance_enable_responsive))
    {
        wp_enqueue_style("grid_css", get_stylesheet_directory_uri()."/css/grid.css", false, $pp_theme_version, "all");
    }

    if(isset($_SESSION['pp_slider_style']))
    {
        $pp_slider_style = $_SESSION['pp_slider_style'];
    }
    else
    {
        $pp_slider_style = get_option('pp_slider_style');
    }

    if($pp_slider_style=='full')
    {
        wp_enqueue_style("pp_slider_style", get_stylesheet_directory_uri()."/css/fullslide.css", false, $pp_theme_version, "all");
    }
    wp_enqueue_style("colorpicker.css", get_stylesheet_directory_uri()."/js/colorpicker/css/colorpicker.css", false, $pp_theme_version, "all");
?>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

<?php   
    wp_enqueue_script("jquery", get_stylesheet_directory_uri()."/js/jquery.js", false, $pp_theme_version);
    wp_enqueue_script("jQuery_UI_js", get_stylesheet_directory_uri()."/js/jquery-ui.js", false, $pp_theme_version);
    wp_enqueue_script("swfobject.js", get_stylesheet_directory_uri()."/swfobject/swfobject.js", false, $pp_theme_version);
    wp_enqueue_script("colorpicker.js", get_stylesheet_directory_uri()."/js/colorpicker.js", false, $pp_theme_version);
    wp_enqueue_script("eye.js", get_stylesheet_directory_uri()."/js/eye.js", false, $pp_theme_version);
    wp_enqueue_script("utils.js", get_stylesheet_directory_uri()."/js/utils.js", false, $pp_theme_version);
    wp_enqueue_script("fancybox_js", get_stylesheet_directory_uri()."/js/fancybox/jquery.fancybox.pack.js", false, $pp_theme_version);
    wp_enqueue_script("jQuery_easing", get_stylesheet_directory_uri()."/js/jquery.easing.js", false, $pp_theme_version);
    wp_enqueue_script("jQuery_hint", get_stylesheet_directory_uri()."/js/hint.js", false, $pp_theme_version);
    wp_enqueue_script("jQuery_validate", get_stylesheet_directory_uri()."/js/jquery.validate.js", false, $pp_theme_version);
    wp_enqueue_script("jQuery_tipsy", get_stylesheet_directory_uri()."/js/jquery.tipsy.js", false, $pp_theme_version);
    wp_enqueue_script("reflection_js", get_stylesheet_directory_uri()."/js/reflection.js", false, $pp_theme_version);
    wp_enqueue_script("browser_js", get_stylesheet_directory_uri()."/js/browser.js", false, $pp_theme_version);
    wp_enqueue_script("flexslider_js", get_stylesheet_directory_uri()."/js/flexslider/jquery.flexslider-min.js", false, $pp_theme_version);
    wp_enqueue_script("marquee_js", get_stylesheet_directory_uri()."/js/jquery.marquee.js", false, $pp_theme_version);
    wp_enqueue_script("jwplayer_js", get_stylesheet_directory_uri()."/js/jwplayer.js", false, $pp_theme_version);
    wp_enqueue_script("gmap_js", get_stylesheet_directory_uri()."/js/gmap.js", false, $pp_theme_version);
    wp_enqueue_script("custom_js", get_stylesheet_directory_uri()."/js/custom.js", false, $pp_theme_version);

    /* Always have wp_head() just before the closing </head>
     * tag of your theme, or you will break many plugins, which
     * generally use this hook to add elements to <head> such
     * as styles, scripts, and meta tags.
     */
    wp_head();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:15:34.757

请参阅wordpress 论坛上的[讨论](http://wordpress.org/support/topic/i-want-to-disable-jquery-included-in-wordpress)，探讨原因、这样做的原因以及可用的解决方法。

这对我有用：

```
 // Include this in functions.php or the theme
if( !is_admin()){
    wp_deregister_script('jquery');
    wp_register_script('jquery', ("http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"), false, '1.9.0');
    wp_enqueue_script('jquery');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:01:06.123

```
// only for Themes since WordPress 3.0
function jquery_190() {
    if ( !is_admin() ) { // actually not necessary, because the Hook only get used in the Theme
        wp_deregister_script( 'jquery' ); // unregistered key jQuery
        wp_register_script( 'jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js', false, '1.9.0'); // register key jQuery with URL of Google CDN
        wp_enqueue_script( 'jquery' ); // include jQuery
    }
}
add_action( 'after_setup_theme', 'jquery_190' ); // Theme active, include function 
```

[更多信息](http://wpengineer.com/2028/small-tips-using-wordpress-and-jquery/)

# ios - 使用静默 APNS 推送通知在没有用户通知的情况下发送令牌？

> ID：14427512
> 
> 赞同：3
> 
> 时间：2013-01-20T18:03:50.680
> 
> 标签：ios, xcode, push-notification, apple-push-notifications

我在 StackOverflow 上检查了其他问题和回复，但看不到完全一样的东西；我希望能够通过 APNS 推送令牌。这样做的目的是验证对 RESTful Web 服务的后续用户请求是否来自 iPhone 设备，而不是来自非 iPhone 源（将 HTTP 标头更改为假冒 iPhone 请求是微不足道的）。

几个问题：

1.  Apple 指南是否允许坚持启用推送通知？
2.  是否可以发送带有一些小文本有效负载的 SILENT 推送通知？
3.  有谁知道这是否会通过苹果的审查或违反他们的指导方针

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T20:44:19.170

1.  您不能强制用户接受推送。用户始终可以选择拒绝。
2.  是的，您可以发送没有声音/文本的通知，并添加元数据。
3.  是的，发送令牌似乎是 Apple 可以接受的用途。

但是，我个人认为这个用例根本不适合推送用例。您将需要许多边缘案例以使其足够可靠（交货延迟和不保证交货等）

使用其他机制更容易（例如应用程序在 URL 中的秘密 + 签名）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-27T14:58:36.967

我看到人们仍在关注这个问题。仅供参考，对于我主要工作的领域的企业开发，您只需将 iOS 应用程序注册为 VOIP 应用程序，它将接受静默通知，而无需用户批准。

# shell - 如何在 shebang 行中动态选择解释器？

> ID：14427516
> 
> 赞同：2
> 
> 时间：2013-01-20T18:04:55.523
> 
> 标签：shell, scripting, exec, shebang

我正在尝试编写一个从 shebang 行调用的脚本，并根据条件（在我的情况下，基于操作系统版本）返回正确的解释器，但我不明白为什么它不起作用。
我将尝试通过一个示例来澄清：
**可执行文件 1：/home/orens/dynamically_select_interpreter/select_interpreter.sh：**

```
#!/usr/bin/env bash
echoerr() { echo "$@" 1>&2; }

interpreter=`cat /home/orens/dynamically_select_interpreter/interpreter`
if [ -z "$interpreter" ]; then
  echoerr "Could not find interpreter!"
  exit 1
fi

echoerr "Found interpreter: $interpreter"

exec "$interpreter" "$@" 
```

该脚本根据某些文件的内容选择解释器（在这种情况下，内容是：）`/usr/bin/python`。然后，它通过调用将自己替换为正确的解释器`exec`。
从命令行调用它，这就是我得到的：

```
$ /home/orens/dynamically_select_interpreter/select_interpreter.sh
Found interpreter: /usr/bin/python
Python 2.4.3 (#1, Dec 10 2010, 17:24:35)
[GCC 4.1.2 20080704 (Red Hat 4.1.2-50)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> 
```

但是，当我尝试在 shebang 行中使用它时，如下所示：

```
#!/home/orens/dynamically_select_interpreter/select_interpreter.sh

echo $SHELL # should be an error # LINE 1
import sys; print "HERE"; print sys.version # this is the actual error # LINE 2 
```

该脚本作为 shell 脚本而不是 python 脚本执行。LINE 1 正确执行，而 LINE 2 引发错误。看起来 shebang 行被默默地忽略了（甚至打印到 stderr 也没有显示在屏幕上）。

基本上，我正在尝试做与 相同的操作`env`，但来自脚本。我想如果我用 C/C++ 编写并编译它，我会得到我想要的，但是由于这个脚本将被用作克服多内核版本情况的工具，我真的希望我的可执行文件是 OS-独立的，我实现这一目标的唯一方法是通过脚本。

任何人都可以解释这种行为或帮助我解决它吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:10:13.337

检查[`execve`手册页](http://manpages.ubuntu.com/manpages/precise/en/man2/execve.2.html)：

> 解释器必须是*本身不是脚本*的可执行文件的有效路径名。

（强调我的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T18:31:36.373

额外的重定向是否有效取决于您的操作系统。您的示例（略微简化，但想法保持不变）适用于我的 Debian 安装。但是某些操作系统在解释 shebang 行的方式上存在限制，包括对命令长度、命令可能采用的参数数量等的限制。查看[此讨论](http://www.perlmonks.org/?node_id=666330)以获取一些示例——它们使用 PERL，但基本上尝试执行和你一样。sourceforge 上有一个名为[shebang-wrapper](http://sourceforge.net/projects/shebangwrapper/)的项目，它可能会有所帮助，但我还没有在实践中对其进行测试，它仍处于 pre-alpha 阶段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T02:51:24.057

您的行： exec "$interpreter" "$@" 不包括要执行的脚本，只包括参数。

试试： exec "$interpreter" $0 $@

```
#!/bin/bash
echo "PRE:$0 $@"
if [ "$1" != "--" ]; then
  i=$1
  exec $i $0 -- $@
else
  shift; shift
fi
echo "POST:$0 $@"

bll-desktop:bll$ ./t.sh /bin/sh b c
PRE:./t.sh /bin/sh b c
PRE:./t.sh -- /bin/sh b c
POST:./t.sh b c
bll-desktop:bll$ ./t.sh /bin/bash b c
PRE:./t.sh /bin/bash b c
PRE:./t.sh -- /bin/bash b c
POST:./t.sh b c
bll-desktop:bll$ 
```

# javascript - Sublime Text 2 中的 Node.js 构建系统

> ID：14427520
> 
> 赞同：29
> 
> 时间：2013-01-20T18:05:31.657
> 
> 标签：javascript, node.js, sublimetext2

我刚开始学习 JavaScript。这样做时，我厌倦了将 JavaScript 代码嵌入 HTML 文档以便在浏览器中运行。我认为直接在 Sublime 的控制台中运行我的脚本会很好，所以我不必离开编辑器。因此我试图创建一个 JavaScript 构建系统，因为 Sublime 没有自带。

我的想法是使用 Node.js 作为 JavaScript 解释器。我用 Linux Mint 的包管理器安装了它。据我所知，它工作得很好。假设我有一个包含以下 JavaScript 代码行的*test.js文件：*

```
console.log("Hello World");
```

当我跑

```
nodejs /path/to/test.js
```

在我的控制台中，我得到：

```
你好世界
```

但是，我不能让它与 Sublime 一起使用。我通过单击*Tools / Build System / New Build System*创建了一个新的构建系统。然后我输入了以下几行：

```
{
    "cmd": ["nodejs", "$file"]
}
```

据我所知，这一行是以下命令的 JSON 表示：

```
nodejs /path/to/current/file.ext
```

就像我说的，如果我在控制台中手动运行它，它工作得很好。如果我在 Sublime 中按 F7，这是*Build*的快捷方式，Sublime 的控制台就会出现。虽然是空​​的。

还有一件很奇怪的事情。尽管 Sublime 控制台的（不存在的）输出表明构建系统未配置为正确使用 Node.js，但当我不小心尝试运行非 JS 文件（例如*Node.sublime 构建*文件。这是 Sublime 控制台中显示的输出：

```
/home/baerenfaenger/.config/sublime-text-2/Packages/User/Node.sublime-build:2
    "cmd": ["nodejs", "$file"]
      ^模块.js:434
  var compiledWrapper = runInThisContext(wrapper, 文件名, true);
                        ^
SyntaxError：意外的令牌：
    在 Module._compile (module.js:434:25)
    在 Object..js (module.js:464:10)
    在 Module.load (module.js:353:32)
    在 Function._load (module.js:311:12)
    在 Array.0 (module.js:484:10)
    在 EventEmitter._tickCallback (node.js:190:39)
[在 0.1 秒内完成，退出代码为 1]
```

那么为什么在执行实际的 JavaScript 代码时没有得到任何输出呢？先感谢您！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-21T17:41:03.830

```
{
    "cmd": ["node","$file"]
} 
```

在 Windows 中非常适合我，它在 sublime 窗口中显示输出。虽然我不知道如何在 sublime 之后停止服务器，但我必须搜索并杀死节点进程。

此外，检查节点是否在您的 PATH 中；）

希望对你有效。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2014-01-06T05:41:33.003

Mac 用户，输入`which node`终端。它输出节点可执行文件的路径，在大多数情况下是`/usr/local/bin/node`. `Tools > Build System > New Build System`现在在 Sublime Text 中使用以下设置 创建一个新的构建系统 ( )。

```
{   
  "cmd": ["/usr/local/bin/node", "$file"],   
  "selector": "source.js"   
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-12-16T15:40:13.417

在 Ubuntu Linux 上测试。使用如下文件选择器：

```
{
  "cmd": ["node", "$file"],
  "selector": "*.js"
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-02T19:23:54.387

这是Windows的提示，

该线程的大多数答案都是正确的，但没有一个是完整的，并且至少没有答案说明如何杀死现有的 Node 进程，即使您能够在 sublime 中运行节点。因此，最终如果上述任何一种方法对您有用，您最终将始终手动杀死 Node。

这是我为“Windows”所做的：

1.  打开 Sublime Text，转到“工具”->“构建系统”->“新构建系统”
2.  上面将打开一个新文件，将下面的内容粘贴到那里，并将其保存为 nodejs.xxx （使用默认扩展名）： { "cmd": ["c:/test.bat","$file"] }
3.  创建一个文件（ c:/test.bat ）并将此内容（两行）粘贴到那里：

taskkill /F /IM "node.exe" "c:/Program Files/nodejs/node.exe" %1

1.  保存，切换到 Sublime Text 并选择“工具”->“构建系统”->“nodejs”
2.  打开任何 Nodejs 可执行文件并按 CTRL+B。
3.  你可以走了。:)

享受点头。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-12-19T06:52:24.757

下面链接的方法#2为我解决了：

[http://www.wikihow.com/Create-a-Javascript-Console-in-Sublime-Text](http://www.wikihow.com/Create-a-Javascript-Console-in-Sublime-Text)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-01-19T20:18:44.403

这在 Windows7 中适合我

1) 打开 Sublime Text，转到“工具”->“构建系统”->“新建构建系统”

2) 粘贴此文本

{

```
"cmd": ["C:\\Program Files (x86)\\nodejs\\node","$file"] 
```

}

> \\ 转义字符

3) 另存为 Node.sublime-build

4) 新建一个js文件，按CTRL+B构建。

单击[此处](http://i.stack.imgur.com/iLEOq.jpg)查看图像示例。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-03-05T15:22:01.247

一般

```
"cmd":["node",$file] 
```

会工作。但是，没有办法停止服务器。我找到了在新控制台中打开服务器并自动关闭它的最佳解决方案。我也可以与主管或节点检查员一起工作

```
"cmd" : ["start", "cmd.exe", "/C", "node", "$file"] 
```

我希望它会有所帮助

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-11-03T12:25:31.700

只有当文件存在/保存在磁盘上时，我才能看到控制台输出。（对于匿名文件，我也看不到输出）

希望这可以帮助

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-10-10T01:53:57.160

在 Windows 上，以下配置有效：

```
{
    "cmd": ["C:\\Program Files\\nodejs\\node.exe", "$file"],
    "selector": "source.js"
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-11-30T21:31:01.727

我正在使用 Windows，并使用以下内容创建了一个新的构建系统：

```
{
"cmd": ["node", "$file"],
"selector": "source.js",
"working_dir": "${project_path:${folder}}",
"path": "C:\\Program Files\\nodejs"
} 
```

然后在 Sublime 中运行一个带有 sucessul 的 JavaScript 文件。

我的 JavaScript 文件包含以下内容：

```
var a = 10;
var b = 20;

var resultado = a + b;

console.log('resultado:', resultado);
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-03-14T20:10:46.157

可能取决于环境变量——尝试使用节点的完整路径而不仅仅是“nodejs”。它在 Mac OS 上对我有用（例如 /usr/local/node 而不仅仅是节点）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-04-25T09:56:27.950

如果一切都失败了，请检查 Node Supervisor.......您只需要更改代码，服务器将自行重新启动，这样您就可以实时看到更改 =)

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2016-03-13T14:24:55.963

在 linux 上我使用这个，只要确保你在你的主文件上

```
{
    "shell_cmd": "pkill node ; node $file"
} 
```

# php - 使用 404 页面移动网页并重定向到旧页面

> ID：14427521
> 
> 赞同：0
> 
> 时间：2013-01-20T18:05:34.730
> 
> 标签：php, apache

我正在寻找一种将文件从我的根文件夹移动`/`到指定文件夹的方法`/newFolder`，同时对用户隐藏此更改，例如，当去

```
http://site.com/ABC 
```

我希望浏览器显示来自

```
http://site.com/customerPages/ABC 
```

但客户会在他的浏览器中看到以下 URL：

```
http://site.com/ABC 
```

我尝试过使用`RewriteRule`，但由于文件夹名称不是预先定义的，所以我没有这样做。然后我尝试`file_get_contents()`在我的 404 页面中使用，但它破坏了所有相对路径。

最后我在我的 404 页面中使用了以下代码：

```
// Redirect customers to customers landing pages under /newFolder
if (strpos($message,'newFolder') === false) {
    $url = 'http://'.$_SERVER['HTTP_HOST'].'/newFolder'.$message;
    echo '<frameset><frame src="/newFolder'.$message.'"></frameset>';
    exit();
} else {
    // correct the URL - remove the `/newFolder` bit
    $message = str_replace('/newFolder','',$message);
} 
```

*$message - 请求的 URI*

我知道这个解决方案很脏，我很想改进它。有谁知道怎么做？

我的设计有问题吗？`frameset`使用显示网页有什么问题吗？

**编辑**

我最终还是使用了我最初的解决方案（使用带有框架集的 404 页面）以避免为所有页面创建规则，从而使页面变得`.htaccess`更重。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:03:35.703

如果您想为您的客户提供不同的 URL

您可以在 htaccess 中使用此代码

```
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase   /
RewriteCond %{REQUEST_URI} ^(.*)/ABC/(.*?)/(.*)
RewriteRule ^ customerPages/%3 [L] 
```

我在我的网络主机中测试它工作正常

示例：虚拟 URL

[http://sepidarcms.ir/ABC/Client1/image/logo.png](http://sepidarcms.ir/ABC/Client1/image/logo.png)

[http://sepidarcms.ir/ABC/Client2/image/logo.png](http://sepidarcms.ir/ABC/Client2/image/logo.png)

[http://sepidarcms.ir/ABC/Client3/image/logo.png](http://sepidarcms.ir/ABC/Client3/image/logo.png)

所有人的真实网址：

[http://sepidarcms.ir/customerPages/image/logo.png](http://sepidarcms.ir/customerPages/image/logo.png)

如果您想可以在此代码中稍作更改即可删除 ABC

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T21:34:32.757

实际上，我从未使用过 cakePHP，但这对我有用；

文件/文件夹；

```
./
    index.php
    images/
        so-logo.png
    newfolder/
        abc.php 
```

内容;

```
// .htaccess
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ newfolder/$1.php [L]

// index.php
<? echo __file__; ?>
<br>
<img src="images/so-logo.png" width="100">

// abc.php
<? echo __file__; ?> 
```

URL的输出；

```
// index.php - http://localhost/rewrite/
D:\LAMP\www\rewrite\index.php
[logo]

// abc.php - http://localhost/rewrite/abc
D:\LAMP\www\rewrite\newfolder\abc.php 
```

# caliburn.micro - 协程的“最终”操作

> ID：14427525
> 
> 赞同：1
> 
> 时间：2013-01-20T18:05:44.013
> 
> 标签：caliburn.micro, coroutine, cancellation

想象一下，我有一个协程，它使用`Loader`CM 文档中包含的实现，我用它在我的页面上显示一个繁忙的指示器

现在想象一下，用户试图将一个已经存在的对象添加到数据存储中——在协程期间，“保存”操作自然会失败，这意味着协程将取消执行

如果发生这种情况，枚举器永远不会到达我`Loader.Hide()`隐藏忙碌指示器的调用 - 我想知道是否已经有一种机制允许`IResult`即使协程失败也可以执行某些实现？

例子：

```
 public IEnumerator<IResult> SaveData()
    {
        yield return Framework.Coroutines.Loader.Show("Saving Data");
        yield return new Framework.Coroutines.SaveOperation(SomeObject);
        yield return Framework.Coroutines.Loader.Hide();
    } 
```

如果协程在第二步中正常失败，忙碌指示符将保留在屏幕上，让用户没有机会更正错误并尝试重新保存（并停止与底层 UI 的任何交互！）

我可以扩展协程的实现，并让迭代器有一个标志，表明是否允许在出现错误时执行它们 - 只是想知道是否有人已经这样做了，或者它是否是我缺少的框架的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:25:03.743

您还可以使用 Caliburn.Micro [Action Filters](http://marcoamendola.wordpress.com/2010/08/10/a-caliburn-micro-recipe-filters/)。见`SetBusyAttribute`。属性的声明式风格是透明的，使代码更易于管理。

# sql - 特定应用的最佳隔离级别

> ID：14427526
> 
> 赞同：0
> 
> 时间：2013-01-20T18:05:45.487
> 
> 标签：sql, sql-server, entity-framework, transactionscope, isolation-level

尝试更好地理解隔离级别 - 使用实体框架和 sql server

对于以下情况，推荐的隔离级别是什么 -

在线预订系统说**机票或活动门票**

设想 -

让我们假设事件的容量是 100 - 伪代码如下

```
 Begin transaction
   If SeatCount < 100 
   SeatCount  = SeatCount + 1
   End transaction 
```

**编辑**- 回应这里的评论是我的伪代码在实际代码中的样子。我没有代码，我只是想更好地理解这个场景。假设您有两张桌子“事件”，其中有两列 - “姓名，已预订座位”和一张桌子票，其中您有个人票的详细信息。

```
 bool tSuccess = false;
        //this transactionscope resolves to serializable 
        using (TransactionScope transaction = new TransactionScope()            
        {                
            try{
            if(objectcontext.event.SeatsBooked < 100)
            {
                objectcontext.event.SeatsBooked = objectcontext.event.SeatsBooked + 1;
                ticket newTicket = new ticket{
                };
                objectcontext.tickets.AddObject(newTicket);
                objectcontext.SaveChanges();
            }
           }
           catch(Exception e)
           {
              //log and return 
           }
        }
        if (tSuccess)
        {
            bd.AcceptAllChanges();
        } 
```

在这种情况下，可以假设读取已提交或可重复读取会导致超额预订或更新丢失，因为两个事务可以竞争同一个席位。

**推荐使用可序列化的方法吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T20:26:59.080

需要可重复读取，不需要可序列化。可重复读取确保更新将看到与先前选择相同的座位数。

不过，您`TransactionScope`需要跨越整个逻辑工作单元。不只是写。

在原始 SQL 中使用起来会更优雅，`WITH (UPDLOCK, HOLDLOCK)`但 EF 不提供。

如果发生冲突，很容易出现死锁。重试整个逻辑事务或使用 选择`UPDLOCK`。`UPDLOCK`将完全避免这种僵局。

# c++ - Linux CentOS 5：非阻塞套接字发送无限挂起

> ID：14427527
> 
> 赞同：0
> 
> 时间：2013-01-20T18:05:51.467
> 
> 标签：c++, linux, sockets, linux-kernel, nonblocking

我在 linux 中有以下 C++ 代码：

```
if (epoll_wait(hEvent,&netEvents,1,0))
{
        // check FIRST for disconnection to avoid send() to a closed socket (halts on centos on my server!)
        if ((netEvents.events & EPOLLERR)||(netEvents.events & EPOLLHUP)||(netEvents.events & EPOLLRDHUP)) {
            save_log("> client terminated connection");
            goto connection_ended;              // ---[ if its a CLOSE event .. close :)
        }
        if (netEvents.events & EPOLLOUT)                 // ---[ if socket is available for write
        {
            if (send_len) {
                result = send(s,buffer,send_len,MSG_NOSIGNAL);
                save_slogf("1112:send (s=%d,len=%d,ret=%d,errno=%d,epoll=%d,events=%d)",s,send_len,result,errno,hEvent,netEvents.events);
                if (result > 0) {
                    send_len = 0;
                    current_stage = CL_STAGE_USE_LINK_BRIDGE;
                    if (close_after_send_response) {
                        save_log("> destination machine closed connection");
                        close_after_send_response = false;
                        goto connection_ended;
                    }
                } else {
                    if (errno == EAGAIN) return;
                    else if (errno == EWOULDBLOCK) return;
                    else {
                        save_log("> unexpected error on socket, terminating");
        connection_ended:
                        close_client();
                        reset();
                        return;
                    }
                }
            }
        }
    }
} 
```

hEvent: epoll 创建监听 EPOLLIN,EPOLLOUT,EPOLLERR,EPOLLHUP,EPOLLRDHUP

s: NON-BLOCKING (!!!) 套接字从非阻塞侦听套接字上的接受创建

基本上，此代码试图将数据包发送回连接到服务器的已连接用户。它通常可以正常工作，但在随机情况下（也许当一些奇怪的网络事件发生时）程序无限期地挂在“result = send(s,buffer,send_len,MSG_NOSIGNAL) 行上。

我不知道这可能是什么原因，我试图监视套接字操作，但似乎没有任何线索告诉我为什么会发生这种情况。我不得不假设这是一个内核错误或非常奇怪的东西，因为我在 Windows 下编写了相同的程序并且它在那里完美运行。

# javascript - 方形和宽瓷砖的推送通知

> ID：14427528
> 
> 赞同：2
> 
> 时间：2013-01-20T18:05:56.223
> 
> 标签：javascript, windows-8, push-notification, azure-mobile-services

我正在使用[Azure 移动服务](http://msdn.microsoft.com/en-us/library/windowsazure/jj860484.aspx)向我的客户端应用程序发送推送通知。我使用 push.wns 对象（第一个正方形，然后是宽）发送正方形和平铺通知。下面是发送推送通知的服务器端代码的样子（基本上每当我的数据库表中的记录更新时都会调用它）：

```
function update(item, user, request) {
request.execute({
    success: function() {
        request.respond();
        sendNotifications();
    }
});

function sendNotifications() {
    var channelTable = tables.getTable('channel');

    channelTable.read({
        success: function(channels) {
            channels.forEach(function(channel) {
                push.wns.sendTileSquarePeekImageAndText02(channel.pushuri, 
                {image1src: '<imgPath>', 
                text1: 'New Game',
                text2: item.playername  }, 
                    { 
                     success: function(pushResponse) { console.log("Sent Square:", pushResponse); },
                     error: function(error) {
                                console.log("error sending push notification to ", channel.pushuri);
                                if (error.statusCode == 410) {
                                    console.log("Deleting ", channel);
                                    channelTable.del(channel.id);               
                                }
                            }  
                    });

                push.wns.sendTileWidePeekImage01(channel.pushuri, 
                {image1src: <imgPath>, 
                text1: 'New Game',
                text2: item.playername  }, 
                    { 
                     success: function(pushResponse) { console.log("Sent Square:", pushResponse); },
                     error: function(error) {
                                console.log("error sending push notification to ", channel.pushuri);
                                if (error.statusCode == 410) {
                                    console.log("Deleting ", channel);
                                    channelTable.del(channel.id);               
                                }
                            }  
                    });
            });
        }
    });
} 
```

}

我注意到当我的应用程序磁贴很宽时，宽通知会正确显示。但是，当我将应用程序的磁贴大小设置为方形时，不会显示方形通知。我该如何纠正？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T13:40:21.777

这是您可以用来一次发送一个更新和更新两种磁贴的示例。

```
push.wns.send(item.channel,
'<tile><visual>' +
'<binding template="TileSquarePeekImageAndText02">' + 
    '<image id="1" src="imageUri" />' + 
    '<text id="1">Template: TileSquarePeekImageAndText02</text>' + 
    '<text id="2">' + item.text + '</text>' + 
'</binding>' + 
'<binding template="TileWidePeekImage01">' + 
    '<image id="1" src="imageUri" />' + 
    '<text id="1">Template: TileWidePeekImage01</text>' + 
    '<text id="2">' + item.text + '</text>' + 
'</binding>' + 
'</visual></tile>',
"wns/toast", {
    success: function(pushResponse) {
        console.log("Sent push:", pushResponse);
    }
}
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T21:03:07.823

具有宽内容的磁贴通知正在替换包含方形内容的磁贴通知。应发送[包含方形和宽磁贴内容](https://stackoverflow.com/a/12605685/1656796)的单个通知。

# python - 如何将列表拆分为 N 个随机但最小大小的块

> ID：14427531
> 
> 赞同：1
> 
> 时间：2013-01-20T18:06:22.480
> 
> 标签：python

例如：我想分成块`range(37)`，`n=5`每个块都有
`len(chunk) >= 4`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T18:58:04.903

```
>>> def divide(lst, min_size, split_size):
    it = iter(lst)
    from itertools import islice
    size = len(lst)
    for i in range(split_size - 1,0,-1):
        s = random.randint(min_size, size -  min_size * i)
        yield list(islice(it,0,s))
        size -= s
    yield list(it)

>>> list(divide(range(37), 4, 5))
[[0, 1, 2, 3], [4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22], [23, 24, 25, 26, 27], [28, 29, 30, 31], [32, 33, 34, 35, 36]]
>>> list(divide(range(37), 4, 5))
[[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16], [17, 18, 19, 20, 21, 22], [23, 24, 25, 26], [27, 28, 29, 30, 31], [32, 33, 34, 35, 36]]
>>> list(divide(range(37), 4, 5))
[[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], [12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23], [24, 25, 26, 27, 28], [29, 30, 31, 32], [33, 34, 35, 36]]
>>> list(divide(range(37), 4, 5))
[[0, 1, 2, 3, 4, 5, 6], [7, 8, 9, 10, 11, 12, 13, 14, 15, 16], [17, 18, 19, 20, 21, 22, 23, 24], [25, 26, 27, 28, 29, 30, 31], [32, 33, 34, 35, 36]]
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T18:13:39.310

例如，您可以将 n 个块中的每个块的大小初始设置为 4，然后计算：r = (m=37 mod n)，如果 m>=20。然后只需将 1 添加到第一个块并减少 r，1 到第二个块并减少 r....并重复直到 r = 0。然后你有了你的块，你可以填充它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T18:30:09.537

```
 def divide(val, num=5, minSize=4):
     ''' Divides val into # num chunks with each being at least of size minSize.
         It limits max size of a chunk using math.ceil(val/(num-len(chunks)))'''
     import random
     import math
     chunks = []
     for i in xrange(num-1):
         maxSize = math.ceil(val/(num-len(chunks)))
         newSize = random.randint(minSize, maxSize)
         val = val - newSize
         chunks.append(newSize)
     chunks.append(val)
     return chunks 
```

`divide`使用不同的参数调用：

```
>>> divide(37,5,4)
>>> [7, 5, 4, 10, 11]
>>> divide(37,5,4)
>>> [4, 5, 4, 10, 14]
>>> divide(50,6,5)
>>> [6, 8, 8, 5, 9, 14] 
```

# android - 在android中发送带有附件的电子邮件

> ID：14427533
> 
> 赞同：2
> 
> 时间：2013-01-20T18:06:36.100
> 
> 标签：android, email, android-intent, email-attachments

我正在尝试发送一封带有附件的电子邮件，该附件保存在模拟器上的 SDCard 上，但问题是它发送的电子邮件没有附件。请告诉我我哪里出错了

这是代码

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND); 
                emailIntent.setType("text/plain");
                emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[] 
                {"djkgotsod@gmail.com"}); 
                emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, 
                "Dear Sir"); 
                emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, 
                "Im doing Android");                 
                Log.v(getClass().getSimpleName(), "sPhotoUri=" + Uri.parse("/mnt/sdcard/../.."+getFilesDir()+"/"+myfile));

                emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("/mnt/sdcard/../.."+getFilesDir()+"/"+myfile));
                startActivity(Intent.createChooser(emailIntent, "Send mail...")); 
```

* * *

这是我的日志猫

```
01-20 17:59:04.927: E/Trace(31078): error opening trace file: No such file or directory (2)
01-20 17:59:06.117: D/gralloc_goldfish(31078): Emulator without GPU emulation detected.
01-20 17:59:08.917: V/Main(31078): sPhotoUri=/mnt/sdcard/../../data/data/com.example.emailandroid/files//mnt/sdcard/myfile.csv
01-20 17:59:10.077: I/Choreographer(31078): Skipped 112 frames!  The application may be doing too much work on its main thread.
01-20 17:59:15.267: I/Choreographer(31078): Skipped 30 frames!  The application may be doing too much work on its main thread. 
```

* * *

将感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:12:07.213

这是因为您的附件路径不正确。您的日志清楚地指出了您做错了什么：

```
/mnt/sdcard/../../data/data/com.example.emailandroid/files//mnt/sdcard/myfile.csv 
```

**永远不要**使用硬编码的路径，**永远不要**假设你在根目录下 2 层，**永远**不要像在显示的代码中那样遍历目录。使用[Environment.getExternalStorageDirectory()](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)获取外部存储（根本不需要是 SD 卡）根并附加您的**相对**路径以获得正确和有效的位置。

# javascript - 将 JavaScript 函数分配给变量的效果

> ID：14427536
> 
> 赞同：0
> 
> 时间：2013-01-20T18:06:53.537
> 
> 标签：javascript

> **可能重复：**
> [JavaScript：var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)

在 JavaScript 中，我可以定义一个函数并将其分配给一个变量：

`var myVar = function myFunc(){};`

或独立定义函数：

`function myFunc(){};`

第一种方法的用例是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T18:10:12.980

声明为变量的函数不会提升到作用域的顶部

```
function run() {

   fn1(); // logs "hi"
   fn2(); // error

   function fn1 () { console.log("hi"); }
   var fn2 = function () { console.log("hi again"); };    

} 
```

请参阅此先前的相关答案。[JavaScript 中首选命名函数还是匿名函数？](https://stackoverflow.com/questions/10081593/are-named-functions-or-anonymous-functions-preferred-in-javascript/10081753#10081753)

在解析通过它之后，这最终看起来与此类似

```
function run() {

       function fn1 () { console.log("hi"); }
       var fn2;

       fn1(); // logs "hi"
       fn2(); // error

       fn2 = function () { console.log("hi again"); };    

    } 
```

# ruby-on-rails - Ruby：干出 Active Record 关系对象的创建

> ID：14427543
> 
> 赞同：0
> 
> 时间：2013-01-20T18:07:38.297
> 
> 标签：ruby-on-rails, ruby

我正在逐步建立一个 Active Record Relation 对象，允许用户按汽车的品牌和型号过滤汽车零件列表：

```
parts = Part.where(:listed => (start_date..end_date))

unless filters[:make_id].nil? || filters[:make_id] == 0    
  parts = parts.joins(:car).
      where("cars.make_id = ?", filters[:make_id] ) 
end

unless filters[:model_id].nil? || filters[:model_id] == 0      
  parts = parts.joins(:car).
      where("cars.model_id = ?", filters[:model_id] ) 
end

etc... 
```

这是重复的，我想把它提取到一个以“make_id”和“model_id”为参数的方法中。要保留的一个重要特性是，如果过滤器为 nil（例如，用户未指定模型），则返回所有模型的部件。

我不知道如何解决这个问题，我不确定谷歌该怎么做。你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:16:16.983

```
parts = Part.where(:listed => (start_date..end_date))

[:make_id, :model_id].each do |k|
  filters[k]
  .tap{|f| parts = parts.joins(:car).where("cars.#{k} = ?", f) unless f.to_i.zero?}
end 
```

# c# - 在不加载到内存的情况下降低图像质量/大小？

> ID：14427546
> 
> 赞同：0
> 
> 时间：2013-01-20T18:07:59.200
> 
> 标签：c#, image, out-of-memory

我完全坚持图像调整大小，因为我正在`OutOfMemoryException`使用图像调整大小的典型示例，这些示例可以在具有 OOM 的许多问题中找到。

我什至尝试了可以​​在 Nuget 上找到的 DynamicImage，这也抛出了一个`OutOfMemoryException`.

谁能告诉我如何降低 C# 中图像的质量/大小，而不将其加载到内存中？

[编辑：我想要与此等效](https://stackoverflow.com/questions/6024963/how-to-resize-an-image-without-loading-into-memory)的 c# ，如果有的话？

编辑：我放弃了调整大小的典型方法，因为我无法避免在旧服务器上运行的实时站点上出现 OutOfMemoryExceptions。

**进一步编辑：**我的服务器的操作系统是 Microsoft Server 2003 标准版

我可以发布我的代码示例，但我正在尝试找到解决 OutOfMemoryExceptions 的方法。

```
public static void ResizeImage(string imagePath, int imageWidth, int imageHeight, bool upscaleImage) {
      using (Image image = Image.FromFile(imagePath, false)) {
        int width = image.Width;
        int height = image.Height;
        if (width > imageWidth || height > imageHeight || upscaleImage) {

          image.RotateFlip(System.Drawing.RotateFlipType.Rotate180FlipX);
          image.RotateFlip(System.Drawing.RotateFlipType.Rotate180FlipX);

          float ratio = 0;
          if (width > height) {
            ratio = (float)width / (float)height;
            width = imageWidth;
            height = Convert.ToInt32(Math.Round((float)width / ratio));
          }
          else {
            ratio = (float)height / (float)width;
            height = imageHeight;
            width = Convert.ToInt32(Math.Round((float)height / ratio));
          }

          using (Bitmap bitmap = new Bitmap(width, height)) {
            bitmap.SetResolution(image.HorizontalResolution, image.VerticalResolution);
            using (Graphics graphic = Graphics.FromImage(bitmap)) {

              graphic.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
              graphic.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;
              graphic.PixelOffsetMode = System.Drawing.Drawing2D.PixelOffsetMode.HighQuality;
              graphic.CompositingQuality = System.Drawing.Drawing2D.CompositingQuality.HighQuality;
              graphic.DrawImage(image, 0, 0, width, height);

              string extension = ".jpg"; // Path.GetExtension(originalFilePath);

              using (EncoderParameters encoderParameters = new EncoderParameters(1)) {
                encoderParameters.Param[0] = new EncoderParameter(Encoder.Quality, 100L);
                using (MemoryStream imageMemoryStream = new MemoryStream()) {
                  bitmap.Save(imageMemoryStream, GetImageCodec(extension), encoderParameters);
                  using (Image result = Image.FromStream(imageMemoryStream, true, false)) {
                    string newFullPathName = //path;
                    result.Save(newFullPathName);
                  }
                }
              }
            }
          }
        }
      }
        } 
```

我也尝试了这段代码，因为我希望 GetThumbnailImage 会降低我的图片质量/大小，但这也会引发 OOM 异常：

```
viewModel.File.SaveAs(path);
        Image image = Image.FromFile(path);
        Image thumbnail = image.GetThumbnailImage(600, 600, null, new IntPtr());
        image.Dispose();
        File.Delete(path);
        thumbnail.Save(path);
        thumbnail.Dispose(); 
```

同样，我的两个代码示例都适用于我的本地机器，所以我不想在代码中查找错误/修复，因为它们应该没问题。我正在寻找任何解决方案来避免 OOM 异常，我想以某种方式减小 fize 大小而不将图像加载到内存中，但是任何可以帮助我的替代想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:31:31.370

您可以尝试通过[命令行](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start.aspx)或[.NET 绑定使用](http://imagemagick.codeplex.com/)[ImageMagick](http://www.imagemagick.org/Usage/resize/#resize)。ImageMagick 有[一些选项](http://www.imagemagick.org/Usage/files/)可以在读取文件时调整大小，这应该会减少内存消耗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:26:15.640

您使用的“图像”可能不是受支持的格式或已损坏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T18:08:19.733

我没有提到我继承了没有正确处理图像的遗留代码，因为我认为自从修复它以来它并不相关。奇怪的是，重新启动网站和 AppPool 后，我能够再次上传图片而没有出现 OutOfMemoryExcepiton。我很难理解为什么会发生这种情况，因为我已经更改了代码以正确处理图像并且已经进行了几次部署，所以我希望这能从内存中清除任何未处理的图像？图片调整大小和上传的所有代码都在一个静态类中，我相信 GC.collect() 不适用于静态变量？

我的理论是，未处理的图像已经在内存中建立起来，并且即使我重新部署到该站点时仍然存在，因为这是我可以得出的唯一结论，因为在重新启动应用程序池后代码再次开始工作。

我会删除我的问题，但现在已经回答了，如果有人可以帮助解释这里发生的事情，很高兴重新分配答案。

# c++ - 如何开发跨平台的 C++ 项目？

> ID：14427547
> 
> 赞同：6
> 
> 时间：2013-01-20T18:08:01.180
> 
> 标签：c++, visual-studio-2012, cross-platform, cmake, kdevelop

我是 C++ 初学者，我开始开发我的第一个跨平台 C++ 项目。我需要使用特定于平台的调用（Win32 和 POSIX），所以我需要在 Windows 和 Linux 中经常编译。

到目前为止，我使用的 Whit 单平台项目是 Linux 中的 KDevelop 和 Windows 中的 Visual Studio 2012。

如何在同一个项目的两个不同操作系统中使用两个不同的 IDE？

1.  我应该使用单一的跨平台 IDE 吗？
2.  我应该学习 CMake（或类似的）并将其配置为与两个 IDE 一起使用吗？
3.  我可以/应该在网络上托管我的代码并自动与离线项目同步吗？
4.  备择方案？

在此先感谢大家。

编辑：

只是为了澄清，该项目将是一个用于学术协议的简单服务器。将有一个客户端要求向/从服务器上传/检索一些文件。对于*学术*，我的意思是，例如，我必须使用 pthreads/win32 线程而不是更高级别的 C++ 线程库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T18:37:31.470

1.  也许——真的取决于你觉得最舒服的东西。由于该项目是非图形化的，因此 IDE 为您提供的只是文件编辑和编译。因此，您可以在一台装有 IDE 的机器上构建项目，然后将源代码移到另一台机器上进行编译。

2.  我个人只有两个 makefile，一个用于 Linux，一个用于 Widnows。让生活变得相当简单[你可以有一个“外部”makefile，它可以根据一些聪明的方法选择正确的makefile]。

3.  是的，您应该找到适用于 Windows 和 Linux（git、mercurial、subversion、bazaar 和其他几个）的版本控制系统。这样，您不仅有一个中央存储库[您可以将任何一台机器用作其中任何一台的“服务器”]，而且它还允许您跟踪您的更改。绝对值得做！

4.  有数百种不同的选择。但是你保持它越简单，你的工具越不复杂，你花在实际编程项目上的时间就越多，而不是弄清楚为什么 CMake 没有按照你想要的方式构建。

此外，请确保将所有特定于系统的代码分离到每个体系结构的一个文件中。这样，以后很容易移植到另一个体系结构，并且它使您的大部分代码在两个系统上都可以编译。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T18:30:59.707

1.  通常，很容易将特定于 IDE 的项目/构建文件调整为添加/移动/删除的源文件。因此，使用跨平台 IDE 并不那么重要。
2.  你可以这样做，我认为 CMake 还可以为一些 IDE 创建项目文件，然后可以用来构建项目。
3.  咳咳，是否要在线托管是您的选择。您绝对应该做的是使用某种版本控制。错误跟踪系统也很有帮助。如果您无论如何都想开源代码，那么使用现有的托管设施之一是肯定的。
4.  并不真地。

不过有一条评论：使 C++ 代码可移植会遇到更多麻烦。在像 Qt 这样的工具包之上构建是一个巨大的帮助。如果您想更接近标准 C++，至少考虑将 Boost 用于线程、智能指针、文件系统访问等内容。祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T18:26:56.080

我最近的经验建议看一下Qt。IDE (QtCreator) 非常好，可在所有主要平台上使用。

我用过一个相当简单的项目，它使用相当复杂的组件，比如 OpenCV 和 ZBar。我在 Linux 上开发，将源代码复制到 Windows，然后重新编译。

我在两个平台上设置 OpenCV 都遇到了一些麻烦，所以我不能说它超级简单，但它确实有效。既然您已经了解 KDevelop，那么您应该已经了解 Qt。

我也非常看重最近的趋势，将 Qt5 视为智能手机上的 Ubuntu 平台。我真的希望看到这种发展。

高温高压

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T18:49:34.160

1.  它会有所帮助，您很可能需要在许多平台上进行调试……想到 Qt Creator、Netbeans 和 Eclipse。

2.  是的。cmake，或者 Qt 的 qmake 可能

3.  不是技术问题。只需使用版本控制！github 和 gitorious 是开源项目的简单选择。

4.  Qt 是跨平台 C++ GUI 应用程序的明智选择，也是没有 GUI 的网络应用程序的不错选择。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-20T18:43:09.033

> 如何在同一个项目的两个不同操作系统中使用两个不同的 IDE？
> 
> 我应该使用单一的跨平台 IDE 吗？

不，我认为这是一个问错问题的例子。要制作跨平台项目，重要的是您的构建脚本和代码的系统中立性质。有时，为首选 IDE 提供项目文件可能会有所帮助，但为多个 IDE 维护多个项目文件只会让事情变得更加困难和复杂。相反，您应该专注于寻找一个能够最大限度地减少您花费在项目维护上的时间的构建系统。

为此，CMake 和 PreMake 似乎是实现这一目标的两个最佳工具。

有几十种替代方案（如 SCons、Cook、kbuild、Jam 和 Boost Jam 等），但由于 CMake 和 PreMake 都生成项目文件和构建脚本，它们可能是最好的解决方案。

您的里程会有所不同。

> 我可以/应该在网络上托管我的代码并与离线项目自动同步吗？

您应该拥有可以在任何地方工作的强大源代码控制。如果您使用某种“云”托管（如 Github 或 BitBucket），Git 和 Mercurial 似乎效果最好，但它们绝不需要它。根据您的工作环境和团队规模，您可能更喜欢 Subversion 或 PerForce 或其他东西，但这取决于您和您的团队。

# ruby-on-rails - Postgres 无法连接到 Unix 域套接字 5432 上的服务器

> ID：14427551
> 
> 赞同：1
> 
> 时间：2013-01-20T18:08:23.520
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, postgresql, unix

使用 Postgres 9.2.2，当我尝试启动 rails 服务器或运行时，我不断收到此错误`psql`

```
could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/tmp/.s.PGSQL.5432"? 
```

此命令在运行时：

```
pg_ctl -D /usr/local/var/postgres -l /usr/local/var/postgres/server.log start 
```

说服务器正在启动，但是当我去检查进程时，没有运行 postgres 进程

我的路径是正确的

```
$ which psql
/usr/local/bin/psql
$ which pg_ctl
/usr/local/bin/pg_ctl 
```

如果我运行这个命令：

```
initdb /usr/local/var/postgres -E utf8 
```

它将连接到套接字....但它也需要我删除我的数据库，这非常令人沮丧。每次我重新启动时似乎都会发生这种情况。

使用

*   Postgres 9.2.2
*   酿造
*   OSX 山狮

我在堆栈溢出时发现了类似的线程，但似乎没有一个解决方案有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T04:33:41.177

算了。我刚刚安装了 Heroku 的 Postgres.app。没有更多的混乱问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-19T06:25:42.497

我看到这个问题再次出现在实际安装了 Postgres.app 的人身上。不过，目前还不清楚他为什么会抛出这个错误，因为我以前从未在 Postgres.app 上见过它。

解决方案是从以下位置更改`database.yml`文件：

```
development: &default
  adapter: postgresql
  database: myapp_development
  encoding: utf8
  min_messages: warning
  pool: 5
  timeout: 5000

test:
  <<: *default
  database: myapp_test 
```

到：

```
development: &default
  adapter: postgresql
  database: myapp_development
  encoding: utf8
  min_messages: warning
  pool: 5
  timeout: 5000
  host: localhost

test:
  <<: *default
  database: myapp_test 
```

唯一的区别是“主机”行

# sockets - 带有 select 的 TCP 客户端，连接后等待输入

> ID：14427553
> 
> 赞同：1
> 
> 时间：2013-01-20T18:08:25.463
> 
> 标签：sockets, select, connect, wait, tcpclient

我遇到了一个使用 select 实现的简单 TCP 客户端的问题。

问题是，在第二个 printf 中，它只在到达 connect() 函数之前显示，然后等待用户输入。连接会阻止程序的其余部分，直到我发送一些东西？（TCP 服务器也是使用 select 实现的，但我没有发现任何问题）我在网上搜索并找不到原因，或者我没有搜索到正确的东西..

```
#include <includes.h>
int main()
{
int sfd;
fd_set rset;
char buff[1024]=" ";
char playerName[20]="";
int nameSet=0;
struct sockaddr_in server;
sfd= socket(AF_INET,SOCK_STREAM,0);

if(sfd<0)
 { printf("socket not created\n");   return 0; }
bzero(&server,sizeof(struct sockaddr_in));
server.sin_family=AF_INET;
server.sin_port=htons(2020);
inet_aton("127.0.0.1",&server.sin_addr);
  //here is the problem after %d which calls the connect() function
printf("Conexion returned:%d \n  Name:",connect(sfd,(struct sockaddr *)&server,sizeof(server)));
 for(;;)
 {
 bzero(buff,1024);

 FD_ZERO(&rset);
 FD_SET(0,&rset);
 FD_SET(sfd,&rset);
     if(select(sfd+1,&rset,NULL,NULL,NULL)<0)
     {
         printf("con-lost!\n");
         break;
     }

     if(FD_ISSET(0,&rset))
     {
     printf("Talk: \n");
     scanf("%s",buff);
     if(nameSet==0)
     {
         strcpy(playerName,buff);
         nameSet=1;
         printf("Hi:%s\n",playerName);
     }
         if(write(sfd,buff,strlen(buff)+10)<0)
         {
             break;
         }
     }

      if(FD_ISSET(sfd,&rset)>0)
     {
         if(read(sfd,buff,1024)<=0)
         {
         printf("con is off!\n");
         break;
         }
     printf("msg rcd %s\n",buff);
     }

   } //endfor
   close(sfd);
   return 0;
 } //endmain 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:25:32.337

该`connect`函数在阻塞套接字上阻塞，直到连接操作成功或失败。

应该警告您，使用`select`阻塞套接字（这是您的程序所做的）并不能确保您的程序不会阻塞。当您受到`select`打击时，这并不能保证*将来*的操作不会阻塞。

```
strlen(buff)+10 
```

背后的原因是`+10`什么？

# django - DJANGO_SETTINGS_MODULE 未使用 pycharm 定义

> ID：14427554
> 
> 赞同：5
> 
> 时间：2013-01-20T18:08:27.457
> 
> 标签：django, pycharm

我有 DJANGO_SETTINGS_MODULE 问题。我正在使用 Pycharm 并在 Project Settings -> Django Support 下设置并启用所有内容。不过，在尝试在 models.py 中导入时出现以下错误：

```
from django.db import models

C:\Python27\python.exe C:/Users/Grimbo/PycharmProjects/Muspy/poll/models.py
Traceback (most recent call last):
  File "C:/Users/Grimbo/PycharmProjects/Mus/poll/models.py", line 1, in <module>
    from django.db import models
  File "C:\Python27\lib\site-packages\django\db\__init__.py", line 11, in <module>
    if DEFAULT_DB_ALIAS not in settings.DATABASES:
  File "C:\Python27\lib\site-packages\django\utils\functional.py", line 184, in inner
    self._setup()
  File "C:\Python27\lib\site-packages\django\conf\__init__.py", line 40, in _setup
    raise ImportError("Settings cannot be imported, because environment variable %s is undefined." % ENVIRONMENT_VARIABLE)
ImportError: Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined. 
```

打印（系统路径）：

```
['C:\\Program Files (x86)\\JetBrains\\PyCharm 2.6.3\\helpers\\pydev', 'C:\\WINDOWS\\SYSTEM32\\python27.zip', 'C:\\Python27\\DLLs', 'C:\\Python27\\lib', 'C:\\Python27\\lib\\plat-win', 'C:\\Python27\\lib\\lib-tk', 'C:\\Python27', 'C:\\Python27\\lib\\site-packages', 'C:\\Users\\Grimbo\\PycharmProjects\\Mus'] 
```

有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T20:31:56.667

[看看这个链接](http://www.jetbrains.com/pycharm/webhelp/run-debug-configuration-django-server.html)。具体来说，您要`Environmental Variable`在配置中设置。默认情况下，您会看到`PYTHONBUFFERED = 1`，并且您会想要添加`DJANGO_SETTINGS_MODULE = project.settings`- 显然替换`project`为您的项目的实际名称。

另一件好事是去`File-> Settings -> Django Support ->`确保你的 Django Root、Settings.py 和 Manage.py 字段是正确的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-16T18:04:50.153

遵循 Dan Hoerst 的回答对我有用，但不清楚在哪里设置环境变量。您可以在菜单选项下找到设置：

`Run -> Edit Configurations...`

展开`Django Server`左侧的选项，然后选择您的项目。在那里你会找到`Environment Variables:`设置。请记住使用虚线路径`Muspy.settings`而不是文件路径。

丹，我会回复你的回答，但没有代表。

# variables - 将文件的时间戳放入 CLI 中的变量中

> ID：14427562
> 
> 赞同：0
> 
> 时间：2013-01-20T18:09:09.327
> 
> 标签：variables, timestamp, command-line-interface

我需要将文件的时间戳转换为变量，以便可以在 Windows 操作系统的命令行环境中使用它（以确定文件是否超过 7 天）。

不幸的是，我遇到了将文件时间戳转换为变量的第一个障碍。

任何人都可以帮助如何将文件时间和日期转换为变量吗？

提前致谢。

# php - 为什么我的 Symfony 路由不起作用？

> ID：14427563
> 
> 赞同：6
> 
> 时间：2013-01-20T18:09:30.943
> 
> 标签：php, symfony

我制作了一个新的 Symfony2 包并删除了 Acme 包。

然后我创建了一个新的控制器（`MainController.php`）：

```
<?php
namespace My\BlogBundle\Controller;

class MainController extends Controller
{
    /**
     * @Route("/", name="index")
     * @Template()
     */
    public function indexAction()
    {

        return array();
    } 
```

和一个简单的观点： ( `Main/index.html.twig`) 其中只包含一个`hello`. 我的 routing.yml 是空的。当我运行整个项目时，我得到：

```
No route found for "GET /"
404 Not Found - NotFoundHttpException
1 linked Exception: ResourceNotFoundException » 
```

这里有什么问题以及如何解决？

这是我的路由调试：

```
\Symfony>php app/console router:debug
[router] Current routes
Name                     Method Pattern
_wdt                     ANY    /_wdt/{token}
_profiler_search         ANY    /_profiler/search
_profiler_purge          ANY    /_profiler/purge
_profiler_info           ANY    /_profiler/info/{about}
_profiler_import         ANY    /_profiler/import
_profiler_export         ANY    /_profiler/export/{token}.txt
_profiler_phpinfo        ANY    /_profiler/phpinfo
_profiler_search_results ANY    /_profiler/{token}/search/results
_profiler                ANY    /_profiler/{token}
_profiler_redirect       ANY    /_profiler/
_configurator_home       ANY    /_configurator/
_configurator_step       ANY    /_configurator/step/{index}
_configurator_final      ANY    /_configurator/final 
```

我也清除了缓存，但没有成功。

这是 routes.yml：

```
my_blog:
    resource: "@MyBlogBundle/Resources/config/routing.yml"
    prefix:   / 
```

而且里面的 routing.yml`MyBlogBundle/Resources/config/routing.yml`是空的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-20T21:17:35.793

您`routes.yml`的设置方式是从捆绑包中请求`routing.yml`文件。

如果你想使用注解来管理你的bundle中的路由，你必须这样写`routes.yml`：

```
my_blog:
    resource: "@MyBlogBundle/Controller/MainController.php"
    prefix:   /
    type:     annotation 
```

并且您的控制器需要包含以下`Route`类中的类`FrameworkExtraBundle`：

```
<?php
namespace My\BlogBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;

class MainController extends Controller
{
    /**
     * @Route("/", name="index")
     * @Template()
     */
    public function indexAction()
    {
        return array();
    }
} 
```

这假设您已经安装了`SensioFrameworkExtraBundle`（[http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/index.html#installation](http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/index.html#installation)）。

有关路由注释的更多信息：http: [//symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/annotations/routing.html](http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/annotations/routing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-01T07:48:50.803

您还可以使用以下命令声明注释的路由：

```
blog_index:
    path: /
    defaults: {_controller:BlogBundle:index} 
```

在您的 BlogBu​​ndle/config/routing.yml

在根目录下，设置

```
blog:
    resource: "@BlogBundle/Resources/config/routing.yml"
    prefix:   / 
```

然后在您的 MainController 中，注释应该可以工作：

```
..use Symfony\Component\Routing\Annotation\Route;

       /**
         * @Route("/", name="blogindex")
         */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T18:12:19.017

为类添加以下注释`MainController`：

```
/**
 * @Route("/")
 */
class MainController extends Controller
{
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-01T08:54:58.027

您的问题是您已将路由引用为 yml 而不是注释，如果您想使用注释，则必须在应用文件夹的前端路由中声明为

```
post:
    resource: "@AcmeBlogBundle/Controller/PostController.php"
    type:     annotation 
```

在您定义的 PostController 类中

```
use Symfony\Component\Routing\Annotation\Route;

    /**
     * @Route("/")
     */
    class MainController extends Controller
    {
    } 
```

和功能

```
 /**
     * @Route("/add", name="article_add")
     */
     public function add(){
        ...
     } 
```

请参阅[文档中的参考](http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/annotations/routing.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-27T11:45:34.883

对于其他故障排除路由器注释正确安装但路由不起作用的情况，您可能需要安装

```
composer require symfony/apache-pack 
```

# vim - VIM：如何在正常模式下从行尾删除 3 个单词？

> ID：14427579
> 
> 赞同：12
> 
> 时间：2013-01-20T18:11:25.717
> 
> 标签：vim

什么是最短的组合？

PS我通常这样做`A``Ctrl+w``Ctrl+w``Ctrl+w``Esc`。
换句话说，我必须跳入插入模式。

PPS`d``3``b`不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-20T18:19:12.627

这一系列命令，

```
$3bD 
```

是我目前能想到的最短的方法，但它留下了一个丑陋的尾随空间。

```
$3gelD 
```

是摆脱尾随空格的另一种方法。

您还可以跳出框框思考并使用空格而不是单词：

```
$3F D 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-20T18:39:15.663

`$` `3``b` `D`这[转化](http://rc3.org/2012/05/12/the-grammar-of-vim/)为

*   `$`到行尾
*   `3`接下来的三个
*   `b`后退三个[一个不带修饰语]词
*   `D` 删除光标下的字符直到行尾

另外，你也可以在ex模式下使用[普通](http://vimdoc.sourceforge.net/htmldoc/various.html#:normal)的命令来实现同样的效果

```
:norm! $3bD 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-20T18:14:37.683

$3bD

或者

$3bDx

...如果您还想删除尾随空格。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-20T18:14:38.780

到行尾，回退3个字，然后删除到行尾：`$` `3``b` `D`

或者

到行尾，删除后面的3个单词，然后删除多余的字符：`$` `3``d``b` `x`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-20T21:22:51.363

正如其他人所提到的，`$3bD`它是最短的，并且`$3bDx`足以删除剩余的空格，假设它恰好是一个空格或制表符。

为了占所有空白，`$3gelD`可以使用。在大多数情况下，此选项具有正确清理的好处，但当一行正好包含 3 个单词时它会失败，因为`3ge`动作会跳回前一行。

另一种方法是基于`daw`. 由于`3daw`向前行动，要么`$daw..`或`$3b3daw`必须使用。对于 3 个单词，`$daw..`更短，可能更理想，但`$3b3daw`更 Vim-esque，可以轻松扩展到更多单词。

`b`, `ge`, and`w`可以替换为`B`, `gE`, and`W`以便删除 WORDs 而不是单词。

# php - 调整日期格式，更改似乎隐藏代码？

> ID：14427581
> 
> 赞同：0
> 
> 时间：2013-01-20T18:11:45.057
> 
> 标签：php, wordpress, date, datetime

我正在尝试将我的 Wordpress 主题上的日期格式调整为读取例如“1 月 20 日”而不是完整日期。

我已经根据[Wordpress codex](http://codex.wordpress.org/Formatting_Date_and_Time)调整了代码：

```
<time datetime="<?php the_date( 'j, S, M' ); ?>" pubdate><?php the_date(); ?> </time> 
```

根据法典，这应该给出 17, th, Jan.

奇怪的是，当我查看页面源代码或检查时，这确实出现在代码中，但没有出现在任何地方的视图中。检查的代码如下所示：

```
<time datetime="17, th, Jan" pubdate=""> </time> 
```

所以它似乎生成了正确的代码，但没有输出它。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:15:19.667

```
<time datetime="<?php the_date( 'j, S, M' ); ?>" pubdate><?php the_date(); ?> </time> 
```

应该是这样的：

```
<time datetime="<?php the_date( 'j, S, M' ); ?>" pubdate><?php the_date( 'j, S, M' ); ?> </time> 
```

您没有将参数传递给第二次调用`the_date()`，即将显示在视图中的参数，另一个作为不会显示可见性的属性输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:18:23.653

除了在 the_date() 的秒调用中传递参数以按照您的要求格式化日期

```
the_date('jS, M'); // output 20th, Jan

<time datetime="<?php the_date( 'jS, M' ); ?>" pubdate><?php the_date('jS, M'); ?> </time> 
```

# c++ - 在C中分离分数和整数

> ID：14427587
> 
> 赞同：-3
> 
> 时间：2013-01-20T18:12:19.303
> 
> 标签：c++, c

我需要将整数和小数部分与小数分开，如 4.343。

我们在 C/C++ 中有没有给出小数点位置的函数。得到之后，我想我们可以使用 atoi 函数转换为数字。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T18:13:31.543

如果`4.343`是字符串，请查看[`strchr`](http://en.cppreference.com/w/c/string/byte/strchr).

```
#include <string.h>

char src[] = "4.343";

char *p = strchr(src, "."); 
```

然后你可以使用[`atoi`](http://en.cppreference.com/w/c/string/byte/atoi)如下。

```
#include <stdlib.h>

if (p != NULL)
{
  *p = '\0';
  res = atoi(src);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T18:14:33.690

您可以使用该[`floor()`](http://www.cplusplus.com/reference/cmath/floor/)函数获取整数部分，然后对于分数只需从原始值中减去整数部分...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T18:21:22.430

您还可以使用 scanf 或其亲属 fscanf 和 sscanf 提取数据

```
scanf("%d.%d",&a,&b); 
```

那么 a 的位数等于 .Fraction 的位置，整数部分也被存储以备将来使用

# javascript - Javascript前端Web开发中递归函数的用例

> ID：14427591
> 
> 赞同：1
> 
> 时间：2013-01-20T18:12:47.300
> 
> 标签：javascript, recursion

我正在尝试了解有关 JavaScript 递归函数的更多信息，但找不到将其用于前端 Web 开发的示例。（我只找到阶乘示例，这对我来说不是很有用）。

我应该在前端 Web 开发中使用递归函数的常见情况有哪些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T18:23:34.297

客户端javascript中递归的#1用例是树遍历。由于 DOM 和 JSON 都是树结构，因此大多数时候您使用递归来遍历它们，遵循“对节点执行操作并对其后代节点重复相同操作”的模式，例如：

```
 uppercase_text_nodes(node):  // pseudocode
       if node.type == TEXT
           node.value = node.text.toUpperCase
       else for each child in node.children
           uppercase_text_nodes(child) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-04T04:37:27.903

一个例子可能是：

```
var walkDOM = function (node) {
  var func = function (node) {
    console.log(node);
  };

  func(node);
  node = node.firstElementChild;

  while (node) {
    walkDOM(node);
    node = node.nextSibling;
  }
};

const parentEl = document.getElementById('parent');
walkDOM(parentEl); 
```

# php - Phalocn中的可变输出

> ID：14427593
> 
> 赞同：0
> 
> 时间：2013-01-20T18:12:57.800
> 
> 标签：php, phalcon

当我使用 mongo 扩展的 findFirst 时，我可以`var_dump`在其输出中使用并轻松查看实际的 mongo 文档。

但是当我在输出`\Phalcon\Mvc\Collection::findFirst`数十个属性和方法时这样做时，我无法轻易找到所需的数据。

`var_dump`在此类和其他类上使用时，有什么方法可以只获取主要数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T20:56:07.457

一种方法是向您的集合添加一个方法，该方法使用反射并仅过滤公共属性：

```
class MyCollection extends \Phalcon\Mvc\Collection {
    public function getProperties() {
        $reflector = new \ReflectionObject($this);
        ob_start();
        foreach($reflector->getProperties(\ReflectionProperty::IS_PUBLIC) as $property) {
            echo "Property: ";
            var_dump($property->getName());
            echo "Value: ";
            var_dump($property->getValue($this));
        }
        $output = ob_get_contents();
        ob_end_clean();

        return $output;
    }
} 
```

可能需要更好的格式。为了查看文档：

```
$collection = MyCollection::findFirst();
echo $collection->getProperties(); 
```

# batch-file - FTP BAT 脚本不起作用。自己进入一个循环

> ID：14427595
> 
> 赞同：2
> 
> 时间：2013-01-20T18:13:15.587
> 
> 标签：batch-file, ftp, echo

我有一个带有以下命令的 FTP 脚本

```
FTP -v -i -s: ftpscr.txt 
```

文本文件 ftpscr.txt 包含以下内容：

```
open 10.195.8.165
ftp-user
ftpuser
cd reports/APSummary

@echo off
setlocal
for /f "tokens=2-7 delims=_.-" %%A in ('dir /B TACO_*') do (
  setlocal enabledelayedexpansion
  call :getmonth %%B
  ren TACO*_*%%A-%%B-%%C*_*%%D-%%E-%%F_UTC.csv TACO_%%A!mon!%%C_%%D%%E%%F.csv
  endlocal
)

:getmonth
if "%1" equ "Jan" set mon=01
if "%1" equ "Feb" set mon=02
if "%1" equ "Mar" set mon=03
if "%1" equ "Apr" set mon=04
if "%1" equ "May" set mon=05
if "%1" equ "Jun" set mon=06
if "%1" equ "Jul" set mon=07
if "%1" equ "Aug" set mon=08
if "%1" equ "Sep" set mon=09
if "%1" equ "Oct" set mon=10
if "%1" equ "Nov" set mon=11
if "%1" equ "Dec" set mon=12
goto :eof
endlocal 
```

当我执行包含 ftp 脚本的文件 ftp.bat 时，命令提示符不断重复，没有结果...请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:46:03.250

您必须将 ftp.bat 重命名为 myftp.bat

并且您的 ftp 命令在 -s 参数之后有一个错误的空格

```
FTP -v -i -s:ftpscr.txt 
```

# c#-4.0 - 使用 Json.Net 将 int 转换为 bool

> ID：14427596
> 
> 赞同：49
> 
> 时间：2013-01-20T18:13:18.850
> 
> 标签：c#-4.0, json.net, deserialization

我正在调用 Web 服务，返回的 bool 字段数据为 0 或 1，但是对于我的模型，我使用的是 System.Bool

使用 Json.Net 是否可以将 0/1 转换为我的模型的布尔值？

目前我收到一个错误

> Newtonsoft.Json.JsonSerializationException：将值“0”转换为类型“System.Boolean”时出错

任何帮助都是极好的！！

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-01-20T19:07:33.700

最终创建了一个转换器

```
 public class BoolConverter : JsonConverter
{
    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        writer.WriteValue(((bool)value) ? 1 : 0);
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        return reader.Value.ToString() == "1";
    }

    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(bool);
    }
} 
```

然后在我的模型中

```
 [JsonConverter(typeof(BoolConverter))]
    public bool active { get; set; } 
```

希望这对其他人有帮助

# dart - Dart：如何通过 Web UI 绑定到用 int 注释的变量？

> ID：14427600
> 
> 赞同：1
> 
> 时间：2013-01-20T18:13:33.903
> 
> 标签：dart, dart-webui

将类作为数据记录处理时，Dart 的最佳实践是什么？

详细说明：在编写应用程序时，很可能会为表格行创建一个类。如在

```
 class Item {  int itemid, String itemName, double score   }
    Item item = new Item(); 
```

这允许编译时捕获 Dart 中的任何拼写错误等。（与使用依赖于 NoSuchMethod 的类不同。）

它还需要一个相应的字符串结构来绑定到 HTML，例如

```
 <input id="itemname" type="text" bind-value="itemEdit.itemName"> 
```

所以飞镖将是：

```
 class ItemEdit { String itemId, String itemName, String score }
    ItemEdit itemEdit = new ItemEdit(); 
```

接下来我们需要一种从一个到另一个的方法，所以我们给 Item 添加一个方法

```
 fromStrings(ItemEdit ie) {
      itemid = ie.itemId == null ? null : int.parse(ie.itemId);
      itemName = ie.ItemName;
      score = ie.score == null ? null : double.parse(ie.score);
    } 
```

反之亦然：

```
 toStrings(ItemEdit ie) {
      ie.itemid = itemId == null ? '' : ie.itemId.toString();
      ie. itemName = itemName == null ? '' : itemname; // Web_ui objects to nulls
      ie.score = score == null ? null : score.toStringAsFixed(2);
    } 
```

另外，我们从数据库中获取 jason 数据，所以我们需要在 Item 中添加另一个方法：

```
 fromJson(final String j) {
      Map v = JSON.parse(j);
      itemid = v['itemid']; 
      itemname = v['itemname'];
      score = v['score'];
    } 
```

我们需要能够恢复为默认值：

```
 setDefaults() { itemId = 0; itemName = "New item"; score = 0; } 
```

这种冗长让我觉得我又在写 COBOL 了！

这里缺少一些基本的东西——无论是在我的理解中，还是在 Dart/WebUI 库中。

我想写的是

```
 class Item extends DataRecord {
      int itemid = 0,
      String itemName = 'New item',
      double score = 0.0;
    } 
```

然后，无需进一步编码，就可以编写诸如

```
 item.toStrings();
    ...
    item.fromStrings();
    ...
    item.fromJson(json);
    ...
    item.setDefaults(); // results in {0,'New item',0.0} 
```

并且能够在 HTML 中编写：

```
 value="{{item.strings.score}}" 
```

如果这是可能的，它会比我现在编写的代码更快、更简单、更清晰、更不容易出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:32:19.927

（完全公开，这个答案是在假设至少一个错误将被修复的情况下编写的。见下文）

三个可能有帮助的建议。

1.  使用命名构造函数来解析和创建对象。
2.  在编码为 JSON 时利用 toJson()。
3.  从 Web UI 使用 bind-value-as-number

1) 命名构造函数

```
import 'dart:json' as json;

class Item {
  int itemid;
  String itemName;
  double score;

  Item.fromJson(String json) {
    Map data = json.parse(json);
    itemid = data['itemid'];
    itemName = data['itemName'];
    score = data['score'];
  }
} 
```

2) 编码为 JSON

该`dart:json`库具有`stringify`将对象转换为 JSON 字符串的功能。如果算法遇到一个不是字符串、null、数字、布尔值或这些对象的集合的对象，它将调用该对象的 toJson() 并期望一些可 JSON 编码的内容。

```
class Item {
  int itemid;
  String itemName;
  double score;

  Map toJson() {
    return {'itemid':itemid, 'itemName':itemName, 'score':score};
  }
} 
```

3) 现在，话虽如此，听起来您想轻松绑定到 HTML 字段并获取原始值，而不仅仅是字符串。尝试这个：

```
<input type="number" min="1" bind-value-as-number="myInt" /> 
```

（请注意，此功能似乎存在错误。请参阅[https://github.com/dart-lang/web-ui/issues/317](https://github.com/dart-lang/web-ui/issues/317)）（来自[https://groups.google.com/a/dartlang。 org/forum/#!topic/web-ui/8JEAA5OxJOc](https://groups.google.com/a/dartlang.org/forum/#!topic/web-ui/8JEAA5OxJOc)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T13:48:01.990

刚刚找到了一种可能在这种情况下有所帮助的方法：

```
 class obj {
        int gapX;
        String get gapXStr => gapX.toString();
               set gapXStr(String s) => gapX = int.Parse(s);
      ... 
```

现在，从您可以使用的 HTML 中，例如

```
 bind-value="gapXStr" 
```

在代码中你可以使用

```
 x += ob.gapX; 
```

# c# - 使用 WebRequest 和 Stream 执行请求

> ID：14427602
> 
> 赞同：0
> 
> 时间：2013-01-20T18:13:38.827
> 
> 标签：c#, stream, webrequest

```
public class MyWebRequest
{
    private WebRequest request;
    private Stream dataStream;

    private string status;

    public String Status
    {
        get
        {
            return status;
        }
        set
        {
            status = value;
        }
    }

    public MyWebRequest(string url)
    {
        // Create a request using a URL that can receive a post.

        request = WebRequest.Create(url);
    }

    public MyWebRequest(string url, string method)
        : this(url)
    {
        if (method.Equals("GET") || method.Equals("POST"))
        {
            // Set the Method property of the request to POST.
            request.Method = method;
        }
        else
        {
            throw new Exception("Invalid Method Type");
        }
    }

    public MyWebRequest(string url, string method, string data)
        : this(url, method)
    {
        // Create POST data and convert it to a byte array.
        string postData = data;
        byte[] byteArray = Encoding.UTF8.GetBytes(postData);

        // Set the ContentType property of the WebRequest.
        request.ContentType = "application/x-www-form-urlencoded";

        // Set the ContentLength property of the WebRequest.
        request.ContentLength = byteArray.Length;

        // Get the request stream.
        dataStream = request.GetRequestStream();

        // Write the data to the request stream.
        dataStream.Write(byteArray, 0, byteArray.Length);

        // Close the Stream object.
        dataStream.Close();
    }

    public string GetResponse()
    {
        // Get the original response.
        WebResponse response = request.GetResponse();

        this.Status = ((HttpWebResponse)response).StatusDescription;

        // Get the stream containing all content returned by the requested server.
        dataStream = response.GetResponseStream();

        // Open the stream using a StreamReader for easy access.
        StreamReader reader = new StreamReader(dataStream);

        // Read the content fully up to the end.
        string responseFromServer = reader.ReadToEnd();

        // Clean up the streams.
        reader.Close();
        dataStream.Close();
        response.Close();

        return responseFromServer;
    }
} 
```

我看到了这段代码并正在分析它。我在 at 搜索`WebRequest`类`msdn`并理解它，但我不明白为什么我必须使用 a`Stream`来执行请求。我不知道什么是流，以及为什么需要它。有人可以帮助我吗？另外，有人可以向我解释以下两行吗？

```
 // Get the request stream.
            dataStream = request.GetRequestStream();

            // Write the data to the request stream.
            dataStream.Write(byteArray, 0, byteArray.Length); 
```

流获取数据，然后我将数据写入流，而不是`WebRequest`对象？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:21:35.067

GetRequestStream 用于启动向 Internet 资源发送数据。它还用于返回流实例以将数据发送到 Internet 资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T18:27:46.883

要与 HTTP 服务器通信，您需要发出 HTTP 请求（[示例](http://www.jmarshall.com/easy/http/)）。[现在，您实际上通过Stream](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx)将该请求作为一系列字节发送。流实际上只是一系列字节。

大多数 I/O 操作（包括文件或网络套接字）都是缓冲的。这意味着您将字节反复放入缓冲区，当该缓冲区足够满时，它实际上会被发送。流实际上只是一个抽象。所以实际上你只是在这两行中通过网络发送字节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T18:28:23.623

来自[MSDN“提供字节序列的通用视图”](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx)。I Stream 是您可能想要从中读取或写入数据的各种对象的抽象。具体示例[`FileStream`](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx)用于读取和写入磁盘，以及[`MemoryStream`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx). [看看从 Stream 继承的其他类型](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx#inheritanceContinued)。

您突出显示的两行是您如何在`WebRequest`. 想象一个 HTTP 请求，当您发出请求时，一些数据被发送到服务器。当您使用 a 时`WebRequest`，您通过获取请求流并向其写入字节来写入此数据。

# facebook - 与带有 jquery 和 nodejs 的 facebook json 对象混淆

> ID：14427605
> 
> 赞同：0
> 
> 时间：2013-01-20T18:13:47.680
> 
> 标签：facebook, json, node.js, express

编写我的第一个 facebook/node/express 应用程序

我正在使用快递

```
 app.post('/friends', function(req, res) {
        graph.get("/me/friends?fields=id,name", function(err, res2) {
         res.send(res2);
     });
 }); 
```

我正在使用的客户端

```
 $('#getFriends').click(function() {
      $.post('/friends', function(data) {
           console.log(data);
           console.log(data.length);
      });
 }); 
```

在以前的应用程序中，我使用 getJSON 从客户端调用图形，并使用 for 循环遍历所有内容以打印出 id 和 name。对此，我很困惑。我需要先将其转换为数组还是字符串？我是否正确使用了快速请求？它记录数据对象，但即使我去打印长度它也是空的。

# css - 如何按自我的百分比而不是其容器的百分比缩放 img

> ID：14427607
> 
> 赞同：3
> 
> 时间：2013-01-20T18:14:00.873
> 
> 标签：css, image, scaling

如何按自我的百分比而不是其容器的百分比缩放 img？

我不敢相信我以前从未遇到过这个问题，所以我猜要么标准改变了，要么我做错了什么，因为我很确定在过去，甚至在 CSS 之前，它是可以扩展的像这样的图像

```
<img src="something.jpg" height="50%" width="50%"> 
```

但现在它按容器对象的大小缩放，这与我完全无关。

除了让我在 javascript 中开始计算像素等来实现这种非常简单的图像样式之外，没有其他方法了吗？

如果我有一个 500px 宽的图像，并且用户选择了 50%，我希望该图像显示 250px 宽，此时我一点也不关心其容器的大小......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:18:38.467

试试 CSS`zoom`属性。我相信它适用于 Chrome、Safari 和 IE，但不适用于 Firefox。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T01:48:40.083

img 使用`style="max-height:100%;max-width:100%;"`将填满容器框，但将所有图像保留在容器内。`style="min-height:100%;min-width:100%;"`如果图像与容器框的大小不同，则使用将填充容器和剪辑。

不适用于不支持 max\min-height\width 的浏览器（我认为低于 ie7）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T17:53:49.353

在图像上设置百分比大小，然后在图像周围使用包装器`position: absolute;`

[http://jsfiddle.net/KWWZz/](http://jsfiddle.net/KWWZz/)

一些不幸的缺点：

1.  这似乎在 IE7 中不起作用（截至发帖时，jsfiddle 似乎不适用于 IE7 或 IE8，因此很难真正证明这一点）
2.  因为您使用的是绝对定位，所以您可能必须更改某些父容器的定位上下文以使其适用于任何给定情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T06:42:13.000

我最终解决了这个问题（使用javascript/jQuery）：-创建一个div-插入图像-从图像中提取尺寸-将这些尺寸设置为DIV-将图像尺寸设置为100%

这样图像直到最初是原始大小，我在 DIV 上的 jQuery resize() 将起作用并且图像将始终填充 DIV。

# vba - VBA获取函数以返回字符串

> ID：14427609
> 
> 赞同：1
> 
> 时间：2013-01-20T18:14:11.307
> 
> 标签：vba

我有一列关于大学的价值观。例如，我有一列包含字符串“密歇根大学”和“UMich”

为什么以下函数不会在单元格中返回字符串“密歇根大学”

```
Function CleanUniCode(entry) As Variant
If entry = "UMich" Then entry = "University of Michigan"

End Function 
```

也试过这个，单元格返回 0，不知道为什么。

```
Function CleanUniCode(entry) As Variant
If entry Like "[UMich]" Then
entry = "University of Michigan"
ElseIf entry Like "[UPenn]" Then
entry = "University of Pennsylvania"
Else:
End If

End Function 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T18:17:08.077

这是因为您将返回值分配给`entry`，但您应该将其分配给`CleanUniCode`：

```
Function CleanUniCode(entry) As Variant
    If entry = "UMich" Then CleanUniCode = "University of Michigan"
End Function 
```

始终将返回值分配给函数名称。

# javascript - 如何实现 Excel 的 ACCRINT

> ID：14427610
> 
> 赞同：7
> 
> 时间：2013-01-20T18:14:27.483
> 
> 标签：javascript, excel, excel-formula

作为[Formula.js](http://stoic.com/formula/)项目的一部分，我正在尝试重新实现 Excel 的[ACCRINT](http://office.microsoft.com/en-us/excel-help/accrint-function-HA102753127.aspx)函数（在 JavaScript 中，但语言应该无关紧要）。我一直在尝试找到它应该如何工作的正确描述（特别是关于`first_interest`参数），但找不到任何东西。

有趣的是，Excel、Google 电子表格、Apple Numbers、Gnumeric 和 OpenOffice 在实现它的方式上都存在分歧，尽管 Excel 的所有三个主要版本（Win、Mac、Web）似乎都彼此一致。可以在此[博客文章](http://sutoiku.com/post/41023542181/issues-with-accrint)中找到更多上下文。

[可以在这里](http://stoic.com/formula/function.html?name=ACCRINT)找到数十个测试用例和我当前的（有缺陷的）实现。

任何帮助将不胜感激！

更新：需要明确的是，该问题与[日期计数约定](http://en.wikipedia.org/wiki/Day_count_convention)**无关**，我们使用 David Wheeler 的 YEARFRAC 伪代码实现了[该](http://stoic.com/formula/function.html?name=YEARFRAC)[约定](http://www.dwheeler.com/yearfrac/excel-ooxml-yearfrac.pdf)，它本身已通过超过 3200 万次测试验证，涵盖所有五个基本选项。问题来自参数，似乎没有人真正理解。据我们所知，这个参数被许多替代电子表格简单地忽略了，包括 OpenOffice（它在源代码中被注释掉了）。而且这个参数的行为确实很奇怪。如果您使用 Excel 并更改其值，您将看到它会更改[ACCRINT](http://office.microsoft.com/en-us/excel-help/accrint-function-HA102753127.aspx?CTT=5&origin=HA102752955)函数给出的结果，但方式看起来很混乱。尝试更改`first_interest``first_interest`日期相差一个世纪，您会看到应计利息发生变化，但变化不大。我真的无法理解这一点。如果有人可以，我会全神贯注...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:15:34.330

这是在 php 中（我认为）：来自[这个页面](http://www.8tiny.com/source/phpmyadmin/nav.html?libraries/PHPExcel/PHPExcel/Calculation/Functions.php.source.html#l9113)

```
 /**
   *    ACCRINT
   *
   *    Returns the discount rate for a security.
   *
   *    @param    mixed    issue        The security's issue date.
   *    @param    mixed    firstinter    The security's first interest date.
   *    @param    mixed    settlement    The security's settlement date.
   *    @param    float    rate        The security's annual coupon rate.
   *    @param    float    par            The security's par value.
   *    @param    int        basis        The type of day count to use.
   *                                        0 or omitted    US (NASD) 30/360
   *                                        1                Actual/actual
   *                                        2                Actual/360
   *                                        3                Actual/365
   *                                        4                European 30/360
   *    @return    float
   */
public static function ACCRINT($issue, $firstinter, $settlement, $rate, $par=1000, $frequency=1, $basis=0) {
      $issue        = self::flattenSingleValue($issue);
      $firstinter    = self::flattenSingleValue($firstinter);
      $settlement    = self::flattenSingleValue($settlement);
      $rate        = (float) self::flattenSingleValue($rate);
      $par        = (is_null($par))    ? 1000    : (float) self::flattenSingleValue($par);
      $frequency    = (is_null($frequency))    ? 1    : (int) self::flattenSingleValue($frequency);
      $basis        = (is_null($basis))    ? 0        : (int) self::flattenSingleValue($basis);

      //    Validate
      if ((is_numeric($rate)) && (is_numeric($par))) {
          if (($rate <= 0) || ($par <= 0)) {
              return self::$_errorCodes['num'];
          }
          $daysBetweenIssueAndSettlement = self::YEARFRAC($issue, $settlement, $basis);
          if (!is_numeric($daysBetweenIssueAndSettlement)) {
              return $daysBetweenIssueAndSettlement;
          }
          $daysPerYear = self::_daysPerYear(self::YEAR($issue),$basis);
          if (!is_numeric($daysPerYear)) {
              return $daysPerYear;
          }
          $daysBetweenIssueAndSettlement *= $daysPerYear;

          return $par * $rate * ($daysBetweenIssueAndSettlement / $daysPerYear);
      }
      return self::$_errorCodes['value'];
  }    //    function ACCRINT() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:54:04.690

来自 Quantitative Finance 的[Phil H发现了这个](https://quant.stackexchange.com/users/1314/phil-h)[.NET 库](http://archive.msdn.microsoft.com/FinancialFunctions)，它为所有金融功能提供了洁净室实现，除了两个似乎都通过了测试（实际上是 201,349 个测试用例）。其中包括 ACCRINT。该代码在知识共享署名下获得许可。它是用 F# 编写的，但很清楚。ACCRINT 的代码在bonds.fs 文件中。我们将尝试将其移植到 JavaScript，看看我们是否得到与 Excel 返回的结果相同的结果。更多关于这个很快......

# matlab - 在 Matlab Gui 中将图片设置为 ActiveX 控件

> ID：14427615
> 
> 赞同：2
> 
> 时间：2013-01-20T18:14:35.973
> 
> 标签：matlab, user-interface, activex

在 Matlab GUI 中，如果我创建了一个**Microsoft Forms 2.0 Image**类型的新**ActiveX 控件**，则**属性检查**器窗口中的属性值设置为并且无法更改。**`picture`**`null`****

 ****那么，如何给这个组件设置图片呢？****

# c++ - 机器维修模拟？

> ID：14427619
> 
> 赞同：0
> 
> 时间：2013-01-20T18:14:58.953
> 
> 标签：c++, algorithm, simulation

**问题陈述：**

```
 A system is composed of 1, 2, or 3 machines and a repairman responsible for
 maintaining these machines. Normally, the machines are running and producing 
 a product. At random points in time, the machines fail and are fixed by the
 repairman. If a second or third machine fails while the repairman is busy
 fixing the first machine, these machines will wait on the services of the 
 repairman in a first come, first served order. When repair on a machine is 
 complete, the machine will begin running again and producing a product.
 The repairman will then repair the next machine waiting. When all machines
 are running, the repairman becomes idle.

 simulate this system for a fixed period of time and calculate the fraction
 of time the machines are busy (utilization) and the fraction of time
 the repairman is busy (utilization). 
```

现在，输入是 50 个运行时间和 50 个修复时间，然后给出计算其利用率的周期以及每个测试用例要模拟的机器数量。

**样本输入：**

```
7.0  4.5 13.0 10.5  3.0 12.0 ....
9.5  2.5  4.5 12.0  5.7  1.5 ....
20.0 1
20.0 3
0.0 0 
```

**样本输出：**

```
 No of     Utilization
Case Machines Machine Repairman

 1       1       .525   .475
 2       3       .558   .775 
```

**案例2说明：**

![在此处输入图像描述](../Images/9e06c30b1823a6380b76fc976295a485.png)

```
Machine Utilization   = ((7+3)+(4.5+6)+(13))/(3*20) = .558
Repairman Utilization =                   (15.5)/20 = .775 
```

**我的方法：**

1）将机器加载到最小堆（称为runHeap）并给它们每个运行时间，因此下一个运行时间将是输入中50个运行时间中的一个新的，

2）计算runHeap中的最小提醒运行时间，修复队列头部的提醒修复时间或完成模拟的提醒时间之间的最小时间，并将该值称为“toGo”。

3）toGo减去runHeap中所有机器的所有提醒运行时间，toGo减去repairQueue头部的提醒修复时间，

4) 所有提醒运行时间== 0的机器，将其推入repairQueue，如果提醒修复时间== 0，则将repair Queue的头部推入runHeap，

5) 添加toGo到当前时间

6）如果当前时间<模拟时间转到步骤2，否则返回利用率。

**现在，问题是这是一种好方法还是可以找出更好的方法？**

# database - 在 UNKNOWN DB 中存储 IPv6 的最佳方式？

> ID：14427621
> 
> 赞同：4
> 
> 时间：2013-01-20T18:14:59.853
> 
> 标签：database, store, ipv6, abstract

我知道这个问题已经被问过很多次了，但我找不到任何最终解决方案；所以这里是：

在不知道数据库的情况下，如何在数据库中使用最佳实践存储 IP（IPv4 和 IPv6）？这以用于 DB 抽象目的，例如 PHP PDO。

顺便说一句，我有 PHP 5.2.17，因为我需要 Windows 上的 PEAR。

人们一直建议将其存储为 varbinary(16) 并使用 mysql 函数 inet6_ntop 和 inet6_pton 将 IP 作为字符串来回传递；就像建议[用 IPv6 函数扩展 MySQL 5](http://labs.watchmouse.com/2009/10/extending-mysql-5-with-ipv6-functions/)一样。在 PHP 中，函数 inet_pton() 和 inet_ntop() 可以将 IPv4 和 IPv6 来回转换为二进制格式，正如[这个问题中的](https://stackoverflow.com/questions/5370876/store-ipv6-and-ipv4-in-mysql-and-also-read-it)[ThiefMaster](https://stackoverflow.com/users/298479/thiefmaster)所建议的那样，但不清楚如何将二进制内容传递到 SQL INSERT/UPDATE 字符串（以及这些 php 函数仅[在 windows 上的 php 5.3.0 中](http://gr2.php.net/manual/en/function.inet-pton.php)提供，即使可以对这些函数进行逆向工程）。我真的很喜欢[Jake](https://stackoverflow.com/users/574778/jake)所做的事情以及[他关于 DB 中 IP 的整数表示的结果](https://stackoverflow.com/questions/6242738/detecting-an-ipv6-address-in-php-and-storing-it-properly-in-mysql-how)，如果我要在我的数据库中实现它，这可能会在某个遥远的、不可预见的未来派上用场，但是我不确定使用 PHP PDO 进行数据库抽象的数据库交叉兼容性。[这篇文章](https://stackoverflow.com/questions/2049681/store-ipv6-in-database)似乎提供了一个关于存储二进制值的接近答案，但是未转义的二进制注入字符串不是潜在的危险吗？此外，如果您遵循这条路线，如果某些开发人员想要进行一些快速查找，有多少 DB 可以将 varbinary(16)/int(128bit) 转换为代表性 IP？

在我看来，最简单的方法是将[ip 字符串按原样](https://stackoverflow.com/questions/166132/maximum-length-of-the-textual-representation-of-an-ipv6-address)插入到[varchar(45)](https://stackoverflow.com/questions/166132/maximum-length-of-the-textual-representation-of-an-ipv6-address)中。但是那些想要遵循复杂路线的人将如何使用 inet_ntop() 和 inet_pton() 函数在 PHP 中（反向工程[为 djmaze(AT)dragonflycms(.)org](http://gr2.php.net/manual/en/function.inet-pton.php#59714)或[FF dot st](http://gr2.php.net/manual/en/function.inet-ntop.php#52515)的 MagicalTux 建议）存储并以二进制形式检索 IPv6？有人可以举一个使用 PDO from 的例子`<?php $strIP = "2001:4860:b002::68"; ?>`，使用 INSERT 然后 SELECT 准备好的语句吗？

正如你所看到的，我已经完成了我的研究，但这个 IPv6 的最终良好实践对我来说并不清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:49:34.707

就像您的研究表明，将 IP 地址存储为规范形式的字符串、二进制字符串或整数有好处和问题。也许有一个中间地带将 IP 地址存储在数据库中。

如何将它们存储为字符串，但扩展到最大长度。这样您仍然可以比较它们（==、>、< 等），但它们仍然是可读的，并且您不需要特殊字符的特殊输入和输出编码。

你可以如何做到这一点的一个例子：

```
function expand_ip_address($addr_str) {
  /* First convert to binary, which also does syntax checking */
  $addr_bin = @inet_pton($addr_str);
  if ($addr_bin === FALSE) {
    return FALSE;
  }

  /* Then differentiate between IPv4 and IPv6 */
  if (strlen($addr_bin) == 4) {
    /* IPv4: print each byte as 3 digits and add dots between them */
    return implode('.', array_map(
      create_function('$byte', 'return sprintf("%03d", ord($byte));'),
      str_split($addr_bin)
    ));
  } else {
    /* IPv6: print as hex and add colons between each group of 4 hex digits */
    return implode(':', str_split(bin2hex($addr_bin), 4));
  }
} 
```

还有一些例子：

```
/* Test IPv4 */
var_dump(expand_ip_address('192.0.2.55'));

/* Test IPv6 */
var_dump(expand_ip_address('2001:db8::abc'));

/* Test invalid */
var_dump(expand_ip_address('192:0:2:55')); 
```

哪个产品：

```
string(15) "192.000.002.055"
string(39) "2001:0db8:0000:0000:0000:0000:0000:0abc"
bool(false) 
```

# python - 使用 Python 从 XML 文档中获取多个子值

> ID：14427622
> 
> 赞同：0
> 
> 时间：2013-01-20T18:15:10.870
> 
> 标签：python, python-2.7

我正在使用 Python 读取 XML METAR（天气）数据。我可以读取数据，并且还添加了错误检查（仅适用于下面的 visibility_statute_mi！）。以下是 XML 数据的示例：

```
<METAR>
  <raw_text>
  FALE 201800Z VRB01KT 9999 FEW016 BKN028 23/22 Q1010 NOSIG
  </raw_text>
  <station_id>FALE</station_id>
  <observation_time>2013-01-20T18:00:00Z</observation_time>
  <temp_c>23.0</temp_c>
  <dewpoint_c>22.0</dewpoint_c>
  <wind_dir_degrees>0</wind_dir_degrees>
  <wind_speed_kt>1</wind_speed_kt>
  <altim_in_hg>29.822834</altim_in_hg>
  <quality_control_flags>
  <no_signal>TRUE</no_signal>
  </quality_control_flags>
  <sky_condition sky_cover="FEW" cloud_base_ft_agl="1600"/>
  <sky_condition sky_cover="BKN" cloud_base_ft_agl="2800"/>
  <flight_category>MVFR</flight_category>
  <metar_type>METAR</metar_type>
</METAR> 
```

这是我解析数据的 Python 2.7 代码：

```
# Output the XML in a HTML friendly manner
def outputHTML(xml):
    # The get the METAR Data list
    metar_data = xml.getElementsByTagName("data")

    # Our return string
    outputString = ""

    # Cycled through the metar_data
    for state in metar_data:

        #Gets the stations and cycle through them
        stations = state.getElementsByTagName("METAR")
        for station in stations:
            # Grab data from the station element
            raw_text                = station.getElementsByTagName("raw_text")[0].firstChild.data
            station_id              = station.getElementsByTagName("station_id")[0].firstChild.data
            observation_time        = station.getElementsByTagName('observation_time')[0].firstChild.data
            temp_c                  = station.getElementsByTagName('temp_c')[0].firstChild.data
            dewpoint_c              = station.getElementsByTagName('dewpoint_c')[0].firstChild.data
            wind_dir_degrees        = station.getElementsByTagName('wind_dir_degrees')[0].firstChild.data
            wind_speed_kt           = station.getElementsByTagName('wind_speed_kt')[0].firstChild.data
            visibility_statute_mi   = station.getElementsByTagName('visibility_statute_mi')
            if len(visibility_statute_mi) > 0:
              visibility_statute_mi = visibility_statute_mi[0].firstChild.data
            altim_in_hg             = station.getElementsByTagName('altim_in_hg')[0].firstChild.data
            metar_type              = station.getElementsByTagName('metar_type')[0].firstChild.data

            # Append the data onto the string
            string = "<tr><td>" + str(station_id) + "</td><td>" + str(observation_time) + "</td><td>" + str(raw_text) + "</td><td>" + str(temp_c) + "</td><td>" + str(dewpoint_c) + "</td></tr>"
            outputString+=string

    # Output string
    return outputString 
```

如何读取 sky_condition 数据并循环获取 sky_cover 和 cloud_base_ft_agl 值？

我还需要检查是否有任何天空条件值，因为通常没有云层，然后没有数据。

安德烈

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T19:22:33.097

我会将 xml 解析成一棵树并查询它，例如：

```
import xml.etree.ElementTree as et

xmltext = """
<METAR>
  <raw_text>
  FALE 201800Z VRB01KT 9999 FEW016 BKN028 23/22 Q1010 NOSIG
  </raw_text>
  <station_id>FALE</station_id>
  <observation_time>2013-01-20T18:00:00Z</observation_time>
  <temp_c>23.0</temp_c>
  <dewpoint_c>22.0</dewpoint_c>
  <wind_dir_degrees>0</wind_dir_degrees>
  <wind_speed_kt>1</wind_speed_kt>
  <altim_in_hg>29.822834</altim_in_hg>
  <quality_control_flags>
  <no_signal>TRUE</no_signal>
  </quality_control_flags>
  <sky_condition sky_cover="FEW" cloud_base_ft_agl="1600"/>
  <sky_condition sky_cover="BKN" cloud_base_ft_agl="2800"/>
  <flight_category>MVFR</flight_category>
  <metar_type>METAR</metar_type>
</METAR>
"""
tree = et.fromstring(xmltext)

for sky_con in tree.iterfind('sky_condition'):
    print sky_con.attrib["cloud_base_ft_agl"]
    print sky_con.attrib.keys() 
```

通过阅读`keys()`您可以检查您感兴趣的属性的存在。

**编辑**：如果你想使用`xml.dom.minidom`，你可以将这些行添加到你的*站*-loop 以提取相同的属性：

```
for sky_con in station.getElementsByTagName("sky_condition"):
    print sky_con._attrs["cloud_base_ft_agl"].value
    print sky_con._attrs["sky_cover"].value 
```

# optimization - 如何手动或自动优化 HLSL（像素）着色器代码？

> ID：14427627
> 
> 赞同：1
> 
> 时间：2013-01-20T18:15:40.547
> 
> 标签：optimization, xna, shader, hlsl, pixel-shader

在计算复杂度方面优化 HLSL 着色器代码的成功策略是什么（意思是：最小化着色器的运行时间）？

我想一种方法是最小化编译着色器产生的算术运算的数量。

如何做到这一点 a) 手动和 b) 使用自动化工具（如果存在）？

## 手工技术合集（更新）

*   避免分支（但如何做到最好？）
*   只要有可能：预先计算外部着色器并作为参数传递。

一个示例代码是：

```
float2 DisplacementScroll;

// Parameter that limit the water effect
float glowHeight;
float limitTop;
float limitTopWater; 
float limitLeft;
float limitRight;
float limitBottom;

sampler TextureSampler : register(s0); // Original color
sampler DisplacementSampler : register(s1); // Displacement

float fadeoutWidth = 0.05;

// External rumble displacement
int enableRumble;
float displacementX;
float displacementY;

float screenZoom;

float4 main(float4 color : COLOR0, float2 texCoord : TEXCOORD0) : COLOR0
{

// Calculate minimal distance to next border
float dx = min(texCoord.x - limitLeft, limitRight - texCoord.x);
float dy = min(texCoord.y - limitTop, limitBottom - texCoord.y);

///////////////////////////////////////////////////////////////////////////////////////
// RUMBLE                                                        //////////////////////
///////////////////////////////////////////////////////////////////////////////////////

    if (enableRumble!=0)
    {
    // Limit rumble strength by distance to HLSL-active region (think map)
    // The factor of 100 is chosen by hand and controls slope with which dimfactor goes to 1
    float dimfactor = clamp(100.0f * min(dx, dy), 0, 1); // Maximum is 1.0 (do not amplify)

    // Shift texture coordinates by rumble
    texCoord.x += displacementX * dimfactor * screenZoom;
    texCoord.y += displacementY * dimfactor * screenZoom;
    }

//////////////////////////////////////////////////////////////////////////////////////////
// Water refraction (optical distortion) and water like-color tint  //////////////////////
//////////////////////////////////////////////////////////////////////////////////////////

if (dx >= 0)
{
float dyWater = min(texCoord.y - limitTopWater, limitBottom - texCoord.y);

  if (dyWater >= 0)
  {
    // Look up the amount of displacement from texture
    float2 displacement = tex2D(DisplacementSampler, DisplacementScroll + texCoord / 3);

    float finalFactor = min(dx,dyWater) / fadeoutWidth;
    if (finalFactor > 1) finalFactor = 1;

    // Apply displacement by water refraction
    texCoord.x += (displacement.x * 0.2 - 0.15) * finalFactor * 0.15 * screenZoom; // Why these strange numbers ?
    texCoord.y += (displacement.y * 0.2 - 0.15) * finalFactor * 0.15 * screenZoom;

    // Look up the texture color of the original underwater pixel.
    color = tex2D(TextureSampler, texCoord);

    // Additional color transformation (blue shift)
    color.r = color.r - 0.1f;
    color.g = color.g - 0.1f;
    color.b = color.b + 0.3f;

  }
  else if (dyWater > -glowHeight)
  {
   // No water distortion...
   color = tex2D(TextureSampler, texCoord);

   // Scales from 0 (upper glow limit) ... 1 (near water surface)
   float glowFactor = 1 - (dyWater / -glowHeight); 

   // ... but bluish glow
   // Additional color transformation
   color.r = color.r - (glowFactor * 0.1); // 24 = 1/(30f/720f); // Prelim: depends on screen resolution, must fit to value in HLSL Update
   color.g = color.g - (glowFactor * 0.1);
   color.b = color.b + (glowFactor * 0.3);
  }
  else
  {
  // Return original color (no water distortion above and below)
  color = tex2D(TextureSampler, texCoord);
  }
}
else
{
// Return original color (no water distortion left or right)
color = tex2D(TextureSampler, texCoord);
}

   return color;
}

technique Refraction
{
    pass Pass0
    {
        PixelShader = compile ps_2_0 main();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:12:50.537

您可以使用涉及操作函数的数学技术优化您的代码，例如：

```
// Shift texture coordinates by rumble
texCoord.x += displacementX * dimfactor * screenZoom;
texCoord.y += displacementY * dimfactor * screenZoom; 
```

这里你将三个值相乘，但其中只有一个来自GPU的寄存器，另外两个是常量，你可以预先相乘并存储在一个全局常量中。

```
// Shift texture coordinates by rumble
texCoord.x += dimfactor * pre_zoom_dispx; // displacementX * screenZoom
texCoord.y += dimfactor * pre_zoom_dispy; // displacementY * screenZoom 
```

另一个例子：

```
// Apply displacement by water refraction
texCoord.x += (displacement.x * 0.2 - 0.15) * finalFactor * 0.15 * screenZoom; // Why     these strange numbers ?
texCoord.y += (displacement.y * 0.2 - 0.15) * finalFactor * 0.15 * screenZoom;

 0.15 * screenZoom <- can be optimized by one global. 
```

Visual Studio 2012 的 HLSL 编译器有一个选项来启用优化。但是您可以进行的最佳优化是尽可能简单地编写 HLSL 代码并使用内部函数[http://msdn.microsoft.com/en-us/library/windows/desktop/ff471376(v=vs.85)。 aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff471376(v=vs.85).aspx) 这些函数类似于`memcpy`C，在主体中使用汇编代码，使用系统资源，如 128 位寄存器（是的，CPU 有 128 位寄存器[http://en.wikipedia.org/wiki/Streaming_SIMD_Extensions](http://en.wikipedia.org/wiki/Streaming_SIMD_Extensions)）和非常快速的操作.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T18:53:12.840

我对 HLSL 的内部结构不是很熟悉，但我从 GLSL 中学到的是：永远不要分支。它可能会执行这两个部分，然后决定它们的哪个结果应该是有效的。

也看看[这个](https://stackoverflow.com/a/5362006/1984772) 和[这个](https://stackoverflow.com/a/12476277/1984772)。

据我所知，除了编译器本身，没有自动工具。对于非常低级别的优化，您可以使用带有 /Fc 参数的[fxc](http://msdn.microsoft.com/en-us/library/windows/desktop/bb509709(v=vs.85).aspx)来获取程序集列表。[此处](http://msdn.microsoft.com/de-de/library/windows/desktop/hh447232(v=vs.85).aspx)列出了可能的组装说明。一个值得一提的低级优化是 MAD：乘法和加法。这可能没有针对 MAD 操作进行优化（我不确定，自己尝试一下）：

```
a *= b;
a += c; 
```

但这应该优化为MAD：

```
a = (a * b) + c; 
```

# php - 正确排序和格式化菜单

> ID：14427628
> 
> 赞同：0
> 
> 时间：2013-01-20T18:15:42.543
> 
> 标签：php

我有个问题。我想从数据库中创建我的导航（主菜单）。

它工作得很好，也适用于无限的父项。唯一的问题是格式。

输出应如下所示：

```
<li class="sub">
    <a class="widgets" href="#">Einstellungen</a>
    <ul>
        <li class="sub"> 
            <a href="#">Allgemeines<span>6</span></a>
            <ul>
                <li><a href="">test1</a></li>
            </ul>
        </li> 
        <li><a href="">test2</a></li>             
    </ul>
</li> 
```

我想你可以看到这背后的结构。

**大批：**

```
Array
(
    [1] => Array
        (
            [parent_id] => 0
            [name] => Hauptseite
            [children] => Array
                (
                )

        )

    [2] => Array
        (
            [parent_id] => 0
            [name] => Einstellungen
            [children] => Array
                (
                    [3] => Array
                        (
                            [parent_id] => 2
                            [name] => Allgemeines
                            [children] => Array
                                (
                                    [4] => Array
                                        (
                                            [parent_id] => 3
                                            [name] => test1
                                            [children] => Array
                                                (
                                                )

                                        )

                                )

                        )

                    [5] => Array
                        (
                            [parent_id] => 2
                            [name] => test2
                            [children] => Array
                                (
                                )

                        )

                )

        )

) 
```

**更新：**

```
function buildList($testArray) {

    echo '<ul>';
    foreach ($testArray as $id => $menuItem):
        if (isset($menuItem['parent_id']) && $menuItem['parent_id'] == 0): // check if it's a parent category
            echo '<li class="home"><a class="widgets" href="#">' . $menuItem['name'] . ' (' . $id . ')' . '</a>';
            if (isset($menuItem['children'])): // if it has children let's spit them out too
                echo '<ul class="child">';
                outputChildren($menuItem['children']);
                echo '</ul>';

            endif;

        endif;

        if (isset($menuItem['parent_id']) && $menuItem['parent_id'] != 0): // if it's a child let's get it's info
            echo '<li class="sub"><a href="#">' . $menuItem['name'] . '</a>';
            if (isset($menuItem['children'])): // if there are grandchildren let's get them too
                echo '<ul class="child">';

                outputChildren($menuItem['children']);
                echo '</ul>';
            endif;
            echo '</li>';
            continue;
        endif;

        if (isset($menuItem['parent_id']) && $menuItem['parent_id'] == 0): // check if it's a parent category
            echo '</li>';
        endif;
    endforeach;
    echo '</ul>';
}

function outputChildren($child) {

    if (isset($child['name'])):
        echo '<li class="sub"><a href="#">' . $child['name'] . '</a>';
        if (!empty($child['children'])):

            echo '<ul>';
            outputChildren($child['children']);
            echo '</ul>';
        endif;
        echo '</li>';
    endif;
}

$sites = array();

$sql = 'SELECT menu_id, menu_name, parent_id FROM `' .$_config['prefix']. '_menu`';

$result = $db->query($sql);
while ($row = $result->fetch_assoc()) {
    $sites[(int) $row['menu_id']] = array(
        'parent_id' => (int) $row['parent_id'],
        'name' => $row['menu_name'],
        'children' => array()
    );
}

foreach ($sites as $site_id => $site) {
    $sites[$site['parent_id']]['children'][$site_id] = & $sites[$site_id];
}

$sites = $sites[0]['children'];
print_r($sites);

echo buildList($sites); 
```

**将输出：**

```
 <ul>
     <li class="home">
         <a class="widgets" href="#">Hauptseite (1)</a>
         <ul class="child"></ul>
     </li>
     <li class="home">
         <a class="widgets" href="#">Einstellungen (2)</a>
         <ul class="child"></ul>
     </li>
 </ul> 
```

请参阅第一个示例它的外观。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:26:31.287

**更新**

这是我们的测试数组：

```
$test = Array([1] => Array(
            'parent_id' => 0,
            'name' => Hauptseite,
            'children' => Array()),
            [2] => Array(
            'parent_id' => 0,
            'name' => Einstellungen,
            'children' => Array([3] => Array(
                                    'parent_id' => 2,
                                    'name' => 'Allgemeines',
                                    'children' => Array([4] => Array(
                                                    'parent_id' => 3,
                                                    'name' => 'test1',
                                                    'children' => Array())
                                                    )
                                            ),
                                [5] => Array(
                                    'parent_id' => 2,
                                    'name' => 'test2',
                                    'children' => Array()
                                            )
                                )
                )

        ); 
```

为了得到想要的结果，我们将采取以下步骤：

1) 如果父 ID = 0，则为父（否则为子）

2）如果`isset($item['children'])`那时我们需要吐出孩子（可能还有孙子）

这是代码：

```
function buildList($testArray) {

    echo '<ul>';
    foreach ($testArray as $id => $menuItem):
        if (isset($menuItem['parent_id']) && $menuItem['parent_id'] == 0): // check if it's a parent category
            echo '<li class="home"><a class="widgets" href="#">' . $menuItem['name'] . ' (' . $id . ')' . '</a>';
            if (isset($menuItem['children'])): // if it has children let's spit them out too
                echo '<ul class="child">';
                outputChildren($menuItem['children']);
                echo '</ul>';

            endif;

        endif;

        if (isset($menuItem['parent_id']) && $menuItem['parent_id'] != 0): // if it's a child let's get it's info
            echo '<li class="sub"><a href="#">' . $menuItem['name'] . '</a>';
            if (isset($menuItem['children'])): // if there are grandchildren let's get them too
                echo '<ul class="child">';

                outputChildren($menuItem['children']);
                echo '</ul>';
            endif;
            echo '</li>';
            continue;
        endif;

        if (isset($menuItem['parent_id']) && $menuItem['parent_id'] == 0): // check if it's a parent category
            echo '</li>';
        endif;
    endforeach;
    echo '</ul>';
}

function outputChildren($child) {

    if (isset($child['name'])):
        echo '<li class="sub"><a href="#">' . $child['name'] . '</a>';
        if (!empty($child['children'])):

            echo '<ul>';
            outputChildren($child['children']);
            echo '</ul>';
        endif;
        echo '</li>';
    endif;
} 
```

您可以将`echo`语句更改为`$htmm .=`

# nosql - 使用单机学习 NOSQL 数据库？

> ID：14427630
> 
> 赞同：2
> 
> 时间：2013-01-20T18:15:44.847
> 
> 标签：nosql, relational

在关系数据库中，我会弹出 W3Schools 教程，在我的机器上安装 mysql 并开始练习！如何以类似的方式学习非关系数据库？在大多数教程中，我读到这些数据库与多个节点和数据中心一起工作。

卡桑德拉说，这是否意味着我将无法使用自己的单台电脑进行学习和练习？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:29:19.193

您可以像使用 mySQL 一样进行操作：在本地计算机上设置数据库并开始试验。

大多数专注于分片和集群的数据库系统也可以作为独立实例工作。但是当您想专门测试这些功能时，您通常可以在同一台机器上运行多个实例。当您还想尝试它们在不同机器上运行时的行为时，您可以使用[VMWare](https://www.vmware.com/)或[VirtualBox](https://www.virtualbox.org/)等虚拟化软件来设置一堆虚拟机并在桌面上构建您的虚拟数据中心。

（我会推荐用于商业用途的 VMWare 和用于家庭用途的 VirtualBox）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-11T20:45:47.023

我是 MongoDB 的忠实粉丝。它是 MySQL 的 NoSQL 等价物。

转到他们[主页上的](http://www.mongodb.org/)**Try It Out**链接，您可以在他们网站上的实时会话中实际使用它 - 无需下载，无需配置，没有麻烦！只需使用它并学习基础知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T18:27:37.900

这是 Cassandra 的快速入门。 [http://wiki.apache.org/cassandra/GettingStarted](http://wiki.apache.org/cassandra/GettingStarted)

我看不出有任何理由你不能从本地主机运行它。我认为关键是您*可以*扩展这些 nosql 解决方案。可能还想查看 mongodb 或 couchdb。易于设置，根据我的经验，两者都是很棒的 nosql 解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T22:19:07.030

我强烈建议使用 Amazon EC2 之类的东西来测试 NoSQL 解决方案。您绝对可以在本地安装 MongoDB 之类的技术并创建副本集，但如果可以的话，您*绝对*应该将它们放在不同的物理机器上。

我已经在本地安装了 AppFabric、Couchbase 和 Mongo 之类的东西并创建了集群，它们在本地总是运行良好。这很容易，因为它的网络部分总是顺利进行。

一旦你引入了两台物理机器和一个更强大的网络分区，事情就会变得很困难。

您可以在 EC2 上免费创建实例，我上次检查您是否使用他们的微型实例。你会学到很多东西。

# .net - JSON 日期序列化和时区

> ID：14427631
> 
> 赞同：11
> 
> 时间：2013-01-20T18:15:51.073
> 
> 标签：.net, json, datetime, timezone, json.net

我在使用 JSON 序列化对象在客户端浏览器上显示正确日期时遇到问题。用户能够定义他们想要查看数据的时区。鉴于此，我将 UTC 日期转换为服务器上用户的时区。然后我想通过 JSON 将日期/时间（已经转换为其定义的时区）序列化到浏览器。

看起来很简单，但是我一直在使用的 JSON 序列化程序严重破坏了我的日期。服务器使用 UTC，客户端使用 Central (-6)。即使我将 DateTime.Kind 指定为未指定，日期也会被调整（-12 小时）。

不知何故，.NET 知道客户端浏览器所在的时区以及服务器所在的时区，即使我已经根据用户的全局设置调整了时间并设置了日期，它也会从我的日期/时间中否定 -6种类不详。如何让 JSON 序列化程序不尝试调整我的日期？

```
List<ErrorGridModel> models = Mapper.Map<ErrorCollection, List<ErrorGridModel>>(errors);
foreach (ErrorGridModel m in models)
{
    //convert UTC dates to user local dateTime - split out date vs. time for grouping & splitting columns
    DateTime dtLocal = TimeZoneInfo.ConvertTimeFromUtc(m.ErrorDate, this.AppContext.User.TimeZoneInfo);
    m.ErrorDate = new DateTime(dtLocal.Year, dtLocal.Month, dtLocal.Day, 0, 0, 0, DateTimeKind.Unspecified);
    m.ErrorTime = new DateTime(1900, 1, 1, dtLocal.Hour, dtLocal.Minute, dtLocal.Second, DateTimeKind.Unspecified);
}
IQueryable<ErrorGridModel> dataSource = models.AsQueryable();
return new ContentResult() { Content = JsonConvert.SerializeObject(dataSource.ToDataSourceResult(request), new JsonSerializerSettings() { DateFormatHandling = DateFormatHandling.MicrosoftDateFormat }), ContentType = "application/json" };
//return Json(dataSource.ToDataSourceResult(request)); 
```

ISO 日期似乎有效，但我无法使用它们，因为我有需要旧版 Microsoft 格式的 3rd 方控件……它会调整我的时区。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T17:29:31.077

当你试图控制偏移量时，不要依赖`DateTimeKind.Unspecified`. 它有一些通常被解释为`Unspecified == Local`. 让 Json.Net 专门编码正确的偏移量（无论 ISO 或 MS 格式）的唯一方法是传递它 a`DateTimeOffset`而不是 a `DateTime`。

```
// Start with the UTC time, for example your m.ErrorDate.
// Here I demonstrate with UtcNow.  Any DateTime with .Kind = UTC is ok.
var dt = DateTime.UtcNow;

// Use the appropriate time zone, here I demonstrate with EST.
var tzi = TimeZoneInfo.FindSystemTimeZoneById("Eastern Standard Time");

// Get the offset from UTC for the time zone and date in question.
var offset = tzi.GetUtcOffset(dt);

// Get a DateTimeOffset for the date, and adjust it to the offset found above.
var dto = new DateTimeOffset(dt).ToOffset(offset);

// Serialize to json
var json = JsonConvert.SerializeObject(dto, new JsonSerializerSettings
    {
        DateFormatHandling = DateFormatHandling.MicrosoftDateFormat,
    });

// The json should now contain the correct time and offset information.
// For example,  "\/Date(1358789156229-0500)\/" 
```

现在希望您会发现您正在使用的 javascript 控件将遵守偏移量并适当地应用它。如果不是，那么剩下的问题是特定于您正在使用的控件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T01:27:52.087

这是关于我所处的确切情况的长时间讨论。 [http://www.telerik.com/community/forums/aspnet-mvc/grid/grids-and-dates.aspx](http://www.telerik.com/community/forums/aspnet-mvc/grid/grids-and-dates.aspx)

最重要的是，如果您使用 Microsoft JSON 日期格式，它将始终以 UTC 格式反映日期，即从 1970 年 1 月 1 日 UTC 开始的毫秒数（滴答声）。我无法在服务器上将时间自动转换为本地时间，并通过 JSON 将它应该下降的时间发送到 Kendo Grid，因为 Kendo Grid 控件将 JS 中的刻度中的日期实例化为 UTC。显示此日期时，它会自动将该值转换为浏览器的本地时区。

从服务器显示我的服务器转换后的日期值的唯一方法是通过 JSON 将日期作为字符串发送到客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T22:06:58.923

我们也遇到了这个问题。正如您所注意到的，问题实际上发生在客户端。通过在网格中使用请求结束处理程序，您可以将日期转换回 UTC。在这里找到的例子：

[http://www.kendoui.c​​om/code-library/mvc/grid/using-utc-time-on-both-client-and-server-sides.aspx](http://www.kendoui.com/code-library/mvc/grid/using-utc-time-on-both-client-and-server-sides.aspx)

# c++ - CUDA 代码的 C++ 设计

> ID：14427637
> 
> 赞同：2
> 
> 时间：2013-01-20T18:16:19.107
> 
> 标签：c++, visual-studio-2010, cuda

我有一段 C++ CUDA 代码，我必须编写它以在浮点中声明数据变量。我还必须重写以双精度声明数据变量的代码。

在 CUDA 中处理这种情况的好设计是什么？

我不希望有两组相同的代码，因为将来要进行任何更改，我将不得不更改两组其他相同的代码。我还想保持代码干净，而不需要在代码`#ifdef`中的 float 和 double 之间进行太多更改。

任何人都可以提出任何好的（在维护和“易于阅读”方面）设计吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T18:28:07.030

CUDA 支持类型模板，毫无疑问，在您需要在同一代码中处理多种类型的情况下，它是实现内核代码的最有效方式。

作为一个简单的例子，考虑一个简单的 BLAS AXPY 类型的内核：

```
template<typename Real>
__global__ void axpy(const Real *x, Real *y, const int n, const Real a)
{
    int tid = threadIdx.x + blockIdx.x * blockDim.x;
    int stride = blockDim.x * gridDim.x;

    for(; tid<n; tid += stride) {
        Real yval = y[tid];
        yval += a * x[tid];
        y[tid] = yval;
    }
} 
```

这个模板化的内核可以在不失一般性的情况下被实例化为双精度和单精度：

```
template axpy<float>(const float *, float *, const int, const float);
template axpy<double>(const double *, double *, const int, const double); 
```

与所有最新版本的 CUDA 工具包一起提供的推力模板库广泛使用此工具来实现与类型无关的算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T18:35:42.407

除了模板之外，您还可以使用单个 typedef 来实现您想要的：

```
typedef float mysize;  // or double 
```

然后只需`mysize`在您将使用的地方使用`float`or `double`。

您可能对[simpleTemplates 示例代码](http://docs.nvidia.com/cuda/cuda-samples/index.html#simple-templates)感兴趣，并且还有其他模板化的 CUDA 示例，除了[推力](https://github.com/thrust/thrust/wiki/Quick-Start-Guide)，正如 talonmies 所述，它被广泛使用。Thrust 还为 C++ 程序员提供了许多其他好处。

# java - 简单小程序中的错误

> ID：14427639
> 
> 赞同：2
> 
> 时间：2013-01-20T18:16:29.593
> 
> 标签：java, applet, awt, paint

以下代码应该打印

里面`init()`——里面`start()`——里面`paint()`。

但它会打印最后一部分`inside paint()`两次！这是为什么？

```
public class SampleApplet extends Applet {

String msg;

@Override
public void init(){
    setBackground(Color.BLACK);
    setForeground(Color.yellow);
    msg = "Inside init()-- ";
  }

@Override 
public void start(){
    msg += "Inside start()-- ";
  }

@Override 
public void paint(Graphics g){
    msg += "Inside paint().";
    g.drawString(msg, 10, 30);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T18:38:15.310

引用自：[Paint()](https://forums.oracle.com/forums/thread.jspa?threadID=1249117)：

> paint() 方法将根据需要多次调用。如果您在 GUI 上放置另一个窗口，则将调用 paint() 方法。如果您随后最小化该窗口并使您的 GUI 再次可见，则将再次调用 paint() 方法。等等。
> 
> 因此，如果您多次调用paint() 方法时遇到问题，则说明您做错了。不要那样做。paint() 方法应该只从现有数据中重新绘制它的目标，它不应该通过计算来确定要绘制的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T18:27:23.893

当组件需要重绘组件状态的内容无效时，`paint`可以调用该方法。`update`

# c - 从静态数组赋值到文件数组

> ID：14427642
> 
> 赞同：0
> 
> 时间：2013-01-20T18:16:49.777
> 
> 标签：c, file-handling

我在主函数之外有这段代码

```
mystr * arrstr[] = {
    "rec",
    "cent",
    "ece",
    "ce",
    "recent",
    "nt",
}; 
```

我对其进行了修改，以便它可以从文本文件中读取值。为此，我修改了此工作代码以将文件中的行读取到名为字符串的数组中。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
int main(void) {
    int i=0,j;
    char* string[100];
    char line[100];
    FILE *file; 
    file = fopen("patt", "r"); 
    while(fgets(line, sizeof(line), file)!=NULL) {
        printf("%s", line);
        string[i] = (char*)malloc(strlen(line));
        strcpy(string[i], line);
        i++;
    }
    fclose(file);
    return 0;
} 
```

所以最终的代码现在是这样的。

```
..
..
char *getpatterns(const char *filename) {
    int i=0;
    char* string[100];
    char line[100];
    FILE *file; 
    file = fopen(filename, "r"); 
    while(fgets(line, sizeof(line), file)!=NULL) {
        //printf("%s", line);
        string[i] = (char*)malloc(strlen(line));
        strcpy(string[i], line);
        i++;
    }
    fclose(file);
    return(string);
}
mystr * arrstr[] = getpatterns("patt");/*{
    "rec",
    "cent",
    "ece",
    "ce",
    "recent",
    "nt",
};*/
..
.. 
```

但我得到这样的错误。

```
example1.c: In function ‘getpatterns’:
example1.c:43:2: warning: return from incompatible pointer type [enabled by default]
example1.c:43:2: warning: function returns address of local variable [enabled by default]
example1.c: At top level:
example1.c:45:1: error: invalid initializer
make: *** [example1.o] Error 1 
```

这里第 45 行是这一行

```
mystr * arrstr[] = getpatterns("patt");/*{ 
```

请提出纠正措施。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T18:37:20.467

第一个警告是您试图将 a`char **`作为 a返回`char *`（这不是一个好主意），并且您正在返回一个局部变量，该变量在函数返回时被释放（也不是一个好主意）。最后一点是告诉你，你不能在 C 中的全局变量的初始化程序中使用函数调用（你可以在 C++ 中做一些这样的事情，尽管我不相信你能做到这一点）。

修复它需要重新考虑。您需要该函数返回分配的内存，或者您需要将内存传递给该函数。而且您必须更改全局变量的类型。而且您需要以某种方式知道数组中有多少条目。

```
mystr **arrstr = 0;  // Either
mystr  *arrstr[100]; // Or 
```

总的来说，我可能会选择内存分配和“任何一个”声明：

```
mystr **arrstr = 0;

char **getpatterns(const char *file)
{
    char **array = 0;
    ...code similar to yours that allocates entries in the array...
    ...include space for a null pointer to mark the end of the list of strings...
    return(array);
}

int main(void)
{
    arrstr = getpatterns("patt");
    ...
} 
```

（另一种“作弊”机制将使用`static char *string[100];`in `getpatterns()`；您仍然必须修复返回类型和全局变量的类型。）

* * *

> 我尝试了这些，但错误没有解决：...

如果没有您的代码，就不可能准确地判断出了什么问题。但是，下面的代码对我有用。源代码在一个文件中`gp.c`；源代码打印自己，并释放内存。`valgrind`用干净的健康单检查。

请注意，您的原始代码没有为它正在复制的字符串分配足够的空间（因为您保留了读取的换行符`fgets()`- 但您至少使用了`fgets()`而不是`gets()`，这非常重要）。此代码使用`memmove()`- 它可以使用`memcpy()`，因为保证没有重叠，但当源数据与目标数据重叠时，它`memmove()`总是有效且`memcpy()`不一定有效。它知道字符串有多长，因此复制函数不需要测试被复制的字符是否为 NUL `'\0'`。代码仔细确保指针列表末尾有一个空指针；这就是您知道何时到达字符串列表末尾的方式。该代码也适用`gp.c`于空文件。

该算法使用三个项目`num_xxx`、`max_xxx`和`xxx`是处理增量分配的典型方法。它通常会略微过度分配；如果您担心空间，可以`strings = realloc(strings, (num_strings+1) * sizeof(*strings)); max_strings = num_strings + 1;`在循环结束时使用以释放额外空间。这`+ 1`是为了允许空指针。通过将每次分配的大小大致翻倍，与每次增加一相比，您可以避免二次行为。

还要注意，如果`realloc()`失败，代码会小心地避免丢失分配的空间。您应该“从不”使用`space = realloc(space, new_size);`以避免丢失指针。代码小心地避免取消引用空指针，并在内存不足时停止读取。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

extern char **getpatterns(const char *filename);

char **getpatterns(const char *filename)
{
    size_t num_strings = 0;
    size_t max_strings = 0;
    char **strings = 0;
    FILE *file = fopen(filename, "r"); 

    if (file != 0)
    {
        char line[4096];
        while (fgets(line, sizeof(line), file) != NULL)
        {
            if (max_strings == 0 || num_strings >= max_strings - 1)
            {
                size_t   new_num = max_strings * 2 + 2;
                char   **new_space = realloc(strings, new_num * sizeof(*new_space));
                if (new_space == 0)
                    break;
                strings = new_space;
                max_strings = new_num;
            }
            size_t len = strlen(line);  /* Includes '\n' at end */
            strings[num_strings] = (char*)malloc(len);
            memmove(strings[num_strings], line, len - 1);
            strings[num_strings][len] = '\0';
            strings[++num_strings] = 0; /* Null terminate list of strings */
        }
        fclose(file);
    }
    return(strings);
}

int main(void)
{
    char **data = getpatterns("gp.c");
    char **argp = data;

    if (argp != 0)
    {
        /* Print data */
        while (*argp != 0)
            puts(*argp++);

        /* Free space */
        argp = data;
        while (*argp != 0)
            free(*argp++);
        free(data);
    }

    return(0);
} 
```

# wcf - WCF 的自定义身份验证、授权和会话

> ID：14427644
> 
> 赞同：0
> 
> 时间：2013-01-20T18:16:59.090
> 
> 标签：wcf, custom-authentication

我已经阅读了有关 WCF 身份验证和授权的各种实现，从重用一些内置的 .NET 和 WCF 功能开始，到以完全自定义的实现结束。

但是要考虑的因素太多了，所以我对如何为我的内网业务应用项目实现它感到困惑。

这是我需要的： - WCF .NET 4.5 服务将托管在 IIS 7 或更高版本中。

*   很可能，ASP.NET 兼容性将被禁用。

*   协议将是带有 BasicHttpBinding 的 HTTP，但它可能需要二进制序列化以最小化流量。

*   WCF 方法将接收一个自定义会话 ID，该 ID 将根据数据库中的用户会话对象进行检查。此项目中不允许使用 .NET 会话。

*   服务收到 ID 后，会读取相应的用户数据（包括授权标志，查看是否允许用户执行当前操作）并进行验证。如果数据无效，则会抛出异常，不会执行 WCF 操作。如果验证成功，用户的身份将存储在当前操作上下文（以及当前线程主体）中，以便在 WCF 操作执行期间各种组件可以访问它。

*   所有的身份验证和授权都应该在执行 WCF 操作之前透明地完成 - 不需要创建 WCF 方法的程序员的额外努力。

*   当我执行身份验证验证时，我需要访问正在执行的 WCF 操作名称，因此如果用户没有执行操作的权限，我可以抛出异常。

*   测试人员将使用 SoapUI，因此他们需要能够通过标准 SOAP 或 HTTP 标头传递会话 ID。

哪个是实现我的身份验证例程的最直接的方法？我应该使用自定义绑定吗？自定义行为？某种内置的请求事件处理程序（究竟是哪一个，如果禁用 ASP.NET 兼容性，它们会起作用）？授权策略（似乎有点矫枉过正，因为无论如何我都不会使用它的大部分内置功能）？还有什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:20:54.687

您可以尝试使用消息检查器。您的会话 ID 可以像令牌一样通过 SOAP 或 HTTP 标头传递，并且在 WCF执行实际服务操作**之前，将通过您定义的行为进行检查。**

您可以在[此处](https://stackoverflow.com/questions/2605140/wcf-how-to-pass-token-for-authentication)和[此处](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/6f14b940-28e2-464a-800d-99f190a22867/)查看文章，特别关注提供“AfterReceiveRequest”和“BeforeReceiveReply”方法的 IDispatchMessageInspector 接口。

# ubuntu - 如何在 Ubuntu 上从 JPEG 或其他图像创建 YUV422 帧

> ID：14427648
> 
> 赞同：6
> 
> 时间：2013-01-20T18:17:23.820
> 
> 标签：ubuntu, image-processing, rgb, yuv, imagemagick-convert

我想从任何图像在 Ubuntu 上创建一个示例 YUV422 框架，以便我可以将 YUV422 编码为 RGB888 函数以进行学习。我真的很希望能够使用受信任的工具来创建样本并将其转换回 jpeg。

我试过 ImageMagick 但显然做错了什么：

```
convert -size 640x480 -depth 24 test.jpg -colorspace YUV -size 640x480 -depth 16 -sampling-factor 4:2:2 tmp422.yuv 
```

![在此处输入图像描述](../Images/f5d88f76599359bc9748c27d86676d24.png)

```
convert -colorspace YUV -size 640x480 -depth 16 -sampling-factor 4:2:2 tmp422.yuv -size 640x480 -depth 24 -colorspace RGB test2.jpg 
```

![在此处输入图像描述](../Images/c0b82dfdd1bcd864563d47ebbf9332b5.png)

我还在 Ubuntu 上安装了 mpegtools 包，以便使用 jpeg2yuv：

```
>> jpeg2yuv -f 1 test.jpg
   INFO: [jpeg2yuv] Reading jpeg filenames from stdin.
   INFO: [jpeg2yuv] Parsing & checking input files.

**ERROR: [jpeg2yuv] System error while opening: "": No such file or directory 
```

显然，还有其他问题。有人可以说明我如何做到这一点吗？谢谢 -

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-20T18:39:43.290

这样做`ffmpeg`：

```
ffmpeg -i a.jpg -s 640x480 -pix_fmt yuv422p a.yuv
ffmpeg -pix_fmt yuv422p -s 640x480 -i a.yuv b.jpg 
```

# java - 拆分逗号分隔的字符串并丢弃字符串中的某些值

> ID：14427653
> 
> 赞同：0
> 
> 时间：2013-01-20T18:18:06.300
> 
> 标签：java, regex, string

给定以下字符串：

```
423545(50),[7568787(50)],53654656,2021947(50),[021947],2021947(50),[8021947(50)] 
```

我想拆分它并将内容放在一个数组中，不包括方括号和括号中的数字 - 即结果应该是一个包含以下内容的数组。

```
{423545,7568787,53654656,2021947,021947,2021947,8021947} 
```

到目前为止，我的尝试只有在没有方括号的情况下才有效：

```
String str = "342398789, [233434],423545(50),[7568787(500)],53654656,2021947(50),[021947],2021947(150),[8021947(50)]";
String[] listItems = str.split("(\\(\\d+\\))?(?:,|$)") 
```

如何更新上述正则表达式以提取方括号中的数字？

我试图提取的字符串是数据库行的标识符，所以我需要提取它们来检索数据库行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T18:29:42.803

你可以试试这个方法

```
String str = "[342398789], [233434] ,423545(50),[7568787(500)],"
        + "53654656,2021947(50),[021947],2021947(150),[8021947(50)]";
String[] listItems = str.replaceFirst("^\\[", "").split(
        "(\\(\\d+\\))?\\]?(\\s*,\\s*\\[?|$)");

System.out.println(Arrays.toString(listItems)); 
```

输出

> [342398789、233434、423545、7568787、53654656、2021947、021947、2021947、8021947]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T18:28:46.807

试试这种方式：

```
String str = "342398789, [233434],423545(50),[7568787(500)],53654656,2021947(50),[021947],2021947(150),[8021947(50)]";
String[] listItems = str.replaceAll("\\(\\d+\\)","")replaceAll("\\[","").replaceAll("\\]","").split(","); 
```

# jquery - jquery数组分组

> ID：14427659
> 
> 赞同：8
> 
> 时间：2013-01-20T18:18:30.303
> 
> 标签：jquery, arrays

我有这样的数组

```
abcArr = [["A", 10], ["B", 20], ["A",30],["C",40]] 
```

如何按 A、B、C 对值进行分组和求和...

```
$.each(abcArr , function() {
    if (this[0] == this[0]) { 
      this[1] + this[1] 
    }; // I know this will simple double [1] values :(
}); 
```

期望的结果应该是

```
[["A", 40], ["B", 20], ["C",30]] 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-20T18:32:27.857

这是一种简单的 javascript 方法，它收集地图中的唯一索引并按原样对它们进行总计，然后使用总计重新生成数组：

```
abcArr = [["A", 10], ["B", 20], ["A",30],["C",40]];

var items = {}, base, key;
for (var i = 0; i < abcArr.length; i++) {
    base = abcArr[i];
    key = base[0];
    // if not already present in the map, add a zeroed item in the map
    if (!items[key]) {
        items[key] = 0;
    }
    // add new item to the map entry
    items[key] += base[1];
}

// Now, generate new array
var outputArr = [], temp;
for (key in items) {
    // create array entry for the map value
    temp = [key, items[key]]
    // put array entry into the output array
    outputArr.push(temp);
}

// outputArr contains the result 
```

工作演示：http: [//jsfiddle.net/jfriend00/vPMwu/](http://jsfiddle.net/jfriend00/vPMwu/)

* * *

这是使用 jQuery 的一种方法`.each`：

```
abcArr = [["A", 10], ["B", 20], ["A",30],["C",40]];

var items = {}, base, key;
$.each(abcArr, function(index, val) {
    key = val[0];
    if (!items[key]) {
        items[key] = 0;
    }
    items[key] += val[1];
});

var outputArr = [];
$.each(items, function(key, val) {
    outputArr.push([key, val]);
});

// outputArr contains the result
document.body.innerHTML = JSON.stringify(outputArr); 
```

工作演示：http: [//jsfiddle.net/jfriend00/Q8LLT/](http://jsfiddle.net/jfriend00/Q8LLT/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-20T19:05:34.877

[Underscore.js](http://underscorejs.org/#)有`groupBy`，剩下的可以通过`map`ping over来完成`reduce`（即每组缩减为一个元素

```
abcArr = [["A", 10], ["B", 20], ["A",30],["C",40]]

var grouped = _.groupBy(abcArr, function(x){return x[0]})
var result  = _.map(grouped, function(x){
    return _.reduce(x, function(x,y){
        return [y[0], x[1]+y[1]];
    }, [,0])
}) 
```

[http://jsfiddle.net/srvKQ/](http://jsfiddle.net/srvKQ/)

或（缩小）

```
abcArr = [["A", 10], ["B", 20], ["A",30],["C",40]]

var result = _.map(
    _.groupBy(abcArr, function(x){return x[0]}),
    function(x){return _.reduce(
        x, function(x,y){return [y[0], x[1]+y[1]]}, [,0]
)}); 
```

[http://jsfiddle.net/srvKQ/1/](http://jsfiddle.net/srvKQ/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-18T08:29:48.900

您可以使用`Array.reduce()`和`Map()`。

```
var abcArr= [["A", 10], ["B", 20], ["A",30],["C",40]]

var groupValues = abcArr.reduce(function (obj, item) {
    obj[item[0]] = obj[item[0]] || [];
    obj[item[0]] = +obj[item[0]] + +item[1]; // add (+) before variable so it's cast to numeric 
    return obj;
}, {});

var groupData = Object.keys(groupValues).map(function (key) {
    return [key, groupValues[key]];
});

console.log(groupData)
```

# php - 如何在 Yii MVC 中管理多个组合索引键？

> ID：14427661
> 
> 赞同：0
> 
> 时间：2013-01-20T18:18:35.560
> 
> 标签：php, frameworks, yii

我使用 Yii MVC 开发了一个脚本，但索引键和标准有问题。

我想防止插入已经存储在数据库中的记录；

我的示例，每次都无法检查并尝试添加新记录。

为什么 ？以及如何做到这一点？

```
CDbCommand failed to execute the SQL statement: SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '21-/popular/category/1.html' for key 'index_link'. The SQL statement executed was: INSERT INTO `categories` (`server_id`, `website_id`, `slave_category_id`, `link`, `name`, `image`, `videos`, `status`) VALUES (:yp0, :yp1, :yp2, :yp3, :yp4, :yp5, :yp6, :yp7)

CREATE TABLE IF NOT EXISTS `categories` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `server_id` int(11) NOT NULL,
  `website_id` int(11) NOT NULL,
  `slave_category_id` int(11) NOT NULL,
  `link` varchar(255) NOT NULL,
  `name` varchar(255) NOT NULL,
  `image` varchar(255) NOT NULL,
  `videos` int(11) NOT NULL,
  `status` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_link` (`website_id`,`link`),
  UNIQUE KEY `index_name` (`website_id`,`name`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=332 ; 
```

PK 是 id；另一个索引，是 website_id + link；另一个索引是 website_id + name；

以下代码无法检查并阻止插入：1

```
 $criteria_categories = new CDbCriteria();
                                    $criteria_categories->condition = " `server_id`=':server_id' and `website_id`=':website_id' and `link`=':link' and `name`=':name' ";
                                    $criteria_categories->params = array(
                                        ':server_id' => $model_website->server_id,
                                        ':website_id' => $model_website->id,
                                        ':link' => $matches_url[$value->link][$key2],
                                        ':name' => $matches_url[$value->name][$key2],
                                   );
$record_categories = Categories::model()->find($criteria_categories);
print_r($record_categories);
if (!$record_categories) {
$model_categories = new Categories();
$model_categories->server_id = $model_website->server_id;
$model_categories->website_id = $model_website->id;
$model_categories->slave_category_id = 1; //??
$model_categories->link = $matches_url[$value->link][$key2];
$model_categories->name = $matches_url[$value->name][$key2];
$model_categories->image = $matches_url[$value->image][$key2];
$model_categories->videos = 0;
$model_categories->status = 0;
$model_categories->save();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T19:18:40.247

```
$criteria_categories->condition = " `server_id`=':server_id' and `website_id`=':website_id' and `link`=':link' and `name`=':name' "; 
```

你有几个错误正在发生。一是语法。如果使用参数绑定（这是一件好事），你不想引用参数。

也就是说，写`:link`而不是`':link'`.

上述条件也不能正确检查具有您的两个唯一键中的任何一个的现有记录。尝试以下操作：

```
$criteria_categories->addCondition("`server_id`=:server_id AND `website_id` = :website_id
AND (`link`=:link OR `name` = :name)"); 
```

这两个都正确引用，并且如果您的两个唯一键中的任何一个匹配，就会找到记录，而不是要求两者都匹配。

# perl - 从窗口复制富文本

> ID：14427663
> 
> 赞同：1
> 
> 时间：2013-01-20T18:18:51.323
> 
> 标签：perl, copy-paste

我需要从 windows 操作系统下的程序窗口复制富文本。

如果我将文本拖放到写字板中（ctrl-c 不起作用），我会使用特定的希腊字体得到正确的结果；但它在 perl 下根本不起作用。我认为这取决于它是富文本的事实。

在下面的代码中，我尝试了 ### 前面的行的所有可能排列，结果始终相同，显示许多问号而不是希腊格式的文本。

你能帮我吗？谢谢

```
use 5.016;
use Win32::GuiTest
qw( FindWindowLike GetWindowRect GetWindowID GetClassName WMGetText GetWindowText UnicodeSemantics);
use strict;
use warnings;
use Encode qw (from_to decode encode);

UnicodeSemantics(1);

###
use open ':encoding(utf8)';
###
#binmode(STDOUT, ":utf8");
###
open 'FILE', ">", "canc.txt";
###
#binmode(FILE, ":utf8");

my $hwnd = 131266;
my $info = "# Window Text: '" . GetWindowText($hwnd) . "'\r\n";
$info = $info . "# Window Class: '" . GetClassName($hwnd) . "'\r\n";
$info = $info . "# Window ID: " . GetWindowID($hwnd) . "\r\n";
my ( $left, $top, $right, $bottom ) = GetWindowRect($hwnd);
$info = $info . "# Window Rect: ($left, $top) - ($right, $bottom)\r\n";

say $info;
my $actualText = WMGetText($hwnd);
say $actualText;
say FILE $actualText;
###
my $foo = decode( 'UTF-8', $actualText );
say $foo;
say FILE $foo;
###
my $body = encode( 'UTF-8', $foo );
say $body;
say FILE $body; 
```

# jquery - 整页背景图片尺寸建议

> ID：14427664
> 
> 赞同：0
> 
> 时间：2013-01-20T18:19:04.653
> 
> 标签：jquery, css

我将让一个朋友为我正在创建的网站创建一个完整的页面背景图像，但我想知道我需要为他提供什么规格。你们推荐的最佳图像质量是什么，以使页面不会太慢。有最低/最高建议吗？背景图像应该以什么格式创建？图像应该是正方形（1 到 1）而不是矩形（1 到 2、2 到 1、1 到 3 等）吗？还有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:40:44.910

假设背景图像不会非常“细节密集”，您应该更多地关注图像质量设置，因为您可以在不显着质量损失的情况下减少文件大小。此外，我会推荐一个 jpeg 来完成这样的任务，因为它的文件大小通常比更大分辨率的 png 更小。

要选择您的分辨率，您应该尝试在 Google Analytics（分析）中查看针对与您相同的用户的网站，并查看大多数人通常的分辨率。假设 90% 的用户的分辨率为 1024x768 或更低，这超出了您针对该尺寸的目标。请记住，随着显示器变大，人们会停止全屏使用浏览器，因此，如果您看到访问者的分辨率为 2560x1440，这并不意味着他们的浏览器会以该分辨率运行。无论如何，对于该人群中剩下的 10%，放大图像应该是一个很好的折衷方案。

关于比例，我认为如果您针对桌面用户，1:1 毫无意义，但对移动设备很有用，因为您始终可以为视口设置纵向。同样，这取决于您的目标受众。

# android - android绘图应用程序：无法在从图库加载的位图上绘制线条

> ID：14427665
> 
> 赞同：0
> 
> 时间：2013-01-20T18:19:06.780
> 
> 标签：android, canvas, bitmap

我正在开发一个绘图应用程序，但我不知道为什么当从画廊加载图片时，当进一步绘制它时，刚刚绘制的线条会出现在 Touch 上但当手指离开屏幕时会消失，即线条绘制的不能固定在位图上。

有大佬知道怎么修改吗？非常感谢！！！

## 编码：

```
public class DrawView extends View  // the main screen that is painted
{
   private static final float TOUCH_TOLERANCE = 10;

   private Bitmap bitmap; // drawing area for display or saving
   private Canvas bitmapCanvas; // used to draw on bitmap
   private Paint paintScreen; // use to draw bitmap onto screen
   private Paint paintLine; // used to draw lines onto bitmap
   private HashMap<Integer, Path> pathMap; // current Paths being drawn
   private HashMap<Integer, Point> previousPointMap; // current Points   

   public DrawView(Context context, AttributeSet attrs) 
   {
      super(context, attrs);     
      paintScreen = new Paint(); 

      // set the default settings
      paintLine = new Paint();
      paintLine.setColor(Color.BLACK); 
      paintLine.setStyle(Paint.Style.STROKE);
      paintLine.setStrokeWidth(5);
      pathMap = new HashMap<Integer, Path>();
      previousPointMap = new HashMap<Integer, Point>();
   }

   // Method onSizeChanged creates BitMap and Canvas after app displays
   @Override
   public void onSizeChanged(int w, int h, int oldW, int oldH)
   {
      bitmap = Bitmap.createBitmap(getWidth(), getHeight(), Bitmap.Config.ARGB_8888);
      bitmapCanvas = new Canvas(bitmap);
      bitmap.eraseColor(Color.WHITE); // erase the BitMap with white
   }       

   public void load_pic(String picturePath) // load a picture from gallery
   {
      pathMap.clear(); // remove all paths
      previousPointMap.clear(); // remove all previous points
      bitmap = BitmapFactory.decodeFile(picturePath);
      invalidate(); // refresh the screen
   }   

   @Override
   protected void onDraw(Canvas canvas) 
   {
      canvas.drawBitmap(bitmap, 0, 0, paintScreen);
      for (Integer key : pathMap.keySet()) 
         canvas.drawPath(pathMap.get(key), paintLine); // draw line
   }

   // handle touch event
   @Override
   public boolean onTouchEvent(MotionEvent event) 
   {
      int action = event.getActionMasked();
      int actionIndex = event.getActionIndex(); // pointer (i.e., finger)

      // determine which type of action the given MotionEvent represents, then call the corresponding handling method
      if (action == MotionEvent.ACTION_DOWN || action == MotionEvent.ACTION_POINTER_DOWN) 
      {
         touchStarted(event.getX(actionIndex), event.getY(actionIndex), event.getPointerId(actionIndex));
      } // end if
      else if (action == MotionEvent.ACTION_UP || action == MotionEvent.ACTION_POINTER_UP) 
      {
         touchEnded(event.getPointerId(actionIndex));
      } // end else if
      else 
      {
         touchMoved(event); 
      } // end else

      invalidate(); // redraw
      return true; // consume the touch event
   } // end method onTouchEvent

   // called when the user touches the screen
   private void touchStarted(float x, float y, int lineID) 
   {
      Path path; // used to store the path for the given touch id
      Point point; // used to store the last point in path

      // if there is already a path for lineID
      if (pathMap.containsKey(lineID)) 
      {
         path = pathMap.get(lineID); // get the Path
         path.reset(); // reset the Path because a new touch has started
         point = previousPointMap.get(lineID); // get Path's last point
      } // end if
      else 
      {
         path = new Path(); // create a new Path
         pathMap.put(lineID, path); // add the Path to Map
         point = new Point(); // create a new Point
         previousPointMap.put(lineID, point); // add the Point to the Map
      } // end else

      // move to the coordinates of the touch
      path.moveTo(x, y);
      point.x = (int) x;
      point.y = (int) y;
   }

...similar for other on Touch event 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:58:24.087

我已经使用以下代码解决了这个问题。需要复制位图以进行编辑。

```
bitmap = (BitmapFactory.decodeFile(picturePath));
bitmap = bitmap.copy(Bitmap.Config.ARGB_8888, true);    
bitmapCanvas = new Canvas(bitmap);
invalidate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T20:39:28.417

Touch事件结束时是否删除pathMap（即touchEnded方法）？

这将导致您描述的行为，因为您不是在位图上绘图，而是在您正在绘制线和位图的画布上（并且每个 onDraw 事件都在重新绘制 Canvas）；即，对于每个 onDraw，您都会在之前的绘图上进行绘制。

# java - 如何仅迭代特定类型的元素？

> ID：14427667
> 
> 赞同：5
> 
> 时间：2013-01-20T18:19:18.350
> 
> 标签：java, oop

我有一个这样的数组列表：

```
private List<GameObject> gameObjects = new CopyOnWriteArrayList<GameObject>(); 
```

`GameObject`可以是 3 个类之一`Spaceship`：`Beam`和`Asteroid`。它们都很相似，所以我将它们放在一个数组中。然而，宇宙飞船有附加方法 shoot ，它在其他线程（称为`ShootRunnable`）中每 100 毫秒使用一次。所以我只想迭代它，`Spaceship`因为其他没有实现拍摄方法。实现这一目标的最佳方法是什么？

```
for (GameObject ob : gameObjects) {
  if (ob instanceof Spaceship) {
    ob.shoot();
  }
} 
```

我可以使用类似上面的方法对其进行迭代吗？只是使用演员或其他东西？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T18:37:15.197

在您的游戏中，是否还有其他周期性发生的动作？

如果是这样，您可以将`shoot()`方法更改为抽象方法（可以命名为`periodicAction()`）并将其放在`GameObject`类中。该类`Spaceship`将通过射击来实现此方法，另一个类具有其特定的周期性行为，而`Asteroid`该类则什么都不做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T18:22:48.650

你所走的道路在技术上是可行的，但一个好的经验法则是，如果你开始使用反射，你可能做错了什么。在这种情况下，拥有两个集合可能是最明智的，一个用于所有游戏类型，一个专门用于宇宙飞船。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T18:45:05.557

我宁愿这样做：

```
 Iterator<Spaceship> getSpaceships(){
     // return Iterator over Spaceship objects through use of instanceof
 }

 ...
 Iterator<Spaceship> it = getSpaceships()
 while(iter.hasNext()) it.next().shoot() 
```

对我来说，它看起来更清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T18:27:06.353

你应该把你的 shoot() 方法放到 Spaceship 类中，因为没有 asteriod 或 beam 会使用这个方法。完成此操作后，您还应该至少保留两个集合。其中一个应该只包含你的宇宙飞船。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T19:14:01.830

您可以在以下位置创建一个接口`Action`或方法`GameObject`：

```
public interface Action {
   void performAction();
}

public abstract class GameObject implements Action {
   //...
   public void performAction() {
      // subclasses should override this method.
      // otherwise, it will do nothing.
   }
} 
```

然后，实施`Spaceship`：

```
public class Spaceship extends GameObject {
    @Override
    public void performAction() {
        this.shoot();
    }
} 
```

到`Beam`and `Asteroid`，你可以离开方法`performAction`：

然后，您可以交互：

```
for (GameObject ob : gameObjects) {
  ob.performAction();
} 
```

# android - Android内部存储，我应该使用哪种模式？

> ID：14427678
> 
> 赞同：0
> 
> 时间：2013-01-20T18:20:59.303
> 
> 标签：android, mode, persistent-storage

我正在制作一个应用程序，它有一个列表视图，每个父列表视图项都有一个子列表视图。孩子们也有一些儿童用品。您可以从任何这些列表中添加/删除元素。我担心使用`MODE_APPEND`会很困难，因为我假设它只是附加到文件的末尾，我实际上希望元素在文件中组合在一起。我这样做是为了确保在应用程序被销毁并重新打开时数据可用。我也担心这`MODE_APPPEND`不是私人`MODE_PRIVATE`的。

[http://developer.android.com/reference/android/content/Context.html#MODE_APPEND](http://developer.android.com/reference/android/content/Context.html#MODE_APPEND)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:27:24.940

我不会使用`MODE_APPEND`. 对此不应该有安全问题，但是通过每次读取和写入文件应该更容易处理（按数据类型分组，...）数据。

另一种可能性是使用 SQLite 作为数据库来存储这些值。

# php - preg_match_all，然后在使用 php 循环时删除重复项

> ID：14427679
> 
> 赞同：0
> 
> 时间：2013-01-20T18:21:09.233
> 
> 标签：php, for-loop, duplicates, preg-match-all, duplicate-removal

虽然这里有很多类似的问题和答案，我已经尽力让它发挥作用，但没有运气。这是我的代码：

```
$content = "Blah...blah...[image=1], 
            blah...blah...blah...[image=2],
            blah...blah...blah...[image=1], no more...";

function get_image($content) 
{ 
  $stripper = $content;   
  preg_match_all("/\[image=(.+?)\]/smi",$stripper, $search);
  $total = count($search[0]);    
    for($i=0; $i < $total; $i++) 
    {    
      $image_id = $search[1][$i];
      if($image_id > 0)
      {
        $image = 'This is an image: <img src="images/'.$image_id.'.jpg" />';
      }
      $stripper = str_replace($search[0][$i], $image, $stripper); 
    } 
  return $stripper; 
} 
```

我想删除重复的“[image=1]”并返回：

```
Blah...blah...This is an image: <image>, 
blah...blah...blah...This is an image: <image>, 
blah...blah...blah..., no more... 
```

或者

```
Blah...blah..., 
blah...blah...blah...This is an image: <image>, 
blah...blah...blah...This is an image: <image>, no more... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:39:16.970

参见手册[`preg_replace_callback`](http://php.net/preg_replace_callback)。

使用状态变量跳过以前的值，如下所示：

```
 $content = preg_replace_callback(
      "/\[image=(.+?)\]/smi",
      function ($m) {
          global $skip_images;
          $image = $m[1];
          if ( !isset($skip_images[$image]) ) {
              $skip_images[$image] = 1;
              return "<img src=$image.jpeg>";
          }
      },
      $content
  ); 
```

显然 $skip_images 代码可以写得更好；使用闭包状态变量，或者如果您在另一个地方或时间使用该回调，则必须将其清除。

# uiscrollview - 使 UIScrollView 中的 UILabel 子视图成为 firstResponder

> ID：14427684
> 
> 赞同：0
> 
> 时间：2013-01-20T18:21:35.003
> 
> 标签：uiscrollview, delegates, subview, tap, first-responder

我添加了一个带有一些文本的标签和指向 ScrollView 的链接，当您点击这些链接（在标签中）时，将调用一个委托方法，显示一个弹出框并显示一些相关信息。

但问题从这里开始，我希望当您点击链接以外的其他任何地方时，弹出框消失。

如果我将 UITapGestureRecognizer 添加到 ScrollView，则不会调用链接的委托方法。

我应该怎么做才能标记处理链接上的点击，而 ScrollView 处理其他点击？

我确实喜欢这样：

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapped)];
    [self.scrollView addGestureRecognizer:tap];

- (void)tapped
{
    if ([self.storyText.delegate respondsToSelector:@selector(attributedLabel:shouldFollowLink:)])

        [self.storyText.delegate performSelector:@selector(attributedLabel:shouldFollowLink:) withObject:self.storyText];
} 
```

在点击方法中，我检查是否点击链接，应该调用委托，但委托不会调用。我错过了什么吗？

![在此处输入图像描述](../Images/5eb36a196fb4a79bb5d00494d9d44f62.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T05:16:27.090

您可以使用自定义 UIButtons 而不是标签，或者您可以将具有清晰背景颜色的自定义 UIButtons 放置在链接上并为此按钮提供操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:45:06.867

解决了！解决方案：首先我为我的 scrollView 创建一个自定义类，并从 UIScrollView 继承它。其次我覆盖

```
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
```

在我的自定义 ScrollView 类中。在这个方法中，我调用了一个方法来关闭弹出框。

但重要的部分是，在将出现弹出框的类的 viewWillAppear 方法中，我将 self 传递给自定义 scrollView 类。因为如果我不这样做，则关闭 popover 的方法将不起作用（它需要此类的对象）。

```
[self.scrollView initWithStoryViewController:self]; 
```

![在此处输入图像描述](../Images/ab252e85f92d60f7debfd0e194df1e97.png)

这张图片显示了我在哪种情况下遇到了这个问题：

# ruby-on-rails - 在 Rails 应用程序之间共享功能的理想方式是什么？

> ID：14427688
> 
> 赞同：0
> 
> 时间：2013-01-20T18:21:39.830
> 
> 标签：ruby-on-rails, gem

我`view helpers`几乎在每个项目中都使用了一些，一组有用的`rake tasks`、次要的扩展`active record`，一些 gem (inherited_resources) 的扩展。

我想知道，管理这些“片段”的好方法是什么？我不想为每个片段管理一个 gem，甚至不想为每个片段的“类型”管理一个 gem。将其捆绑到个人宝石中就足够了吗？也许添加选项来指定要在项目中包含哪些助手/扩展？

我可以使用可以与此代码捆绑在一起的“模板”应用程序，但这里的问题是，如果我在一个项目上更新一个片段，我希望能够以最小的努力（即`bundle update`）在所有项目上推出该更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:27:55.957

根据您的要求，我会将其全部打包并`base-zenph-gem`在您的每个项目中使用，因为这是在不同项目中同步代码的最佳方式。

另外，为它制作一个好的文档，好像任何继承这些项目之一的人都想知道发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:40:28.723

您可以创建一个包含可重用功能的引擎，而不是使用 Rails 的 gem，然后您可以在应用程序中指定引擎的使用。

您可以在 Rails 文档中阅读更多相关信息：[Rails Engines](http://guides.rubyonrails.org/engines.html)

# c# - 关闭 MSSQL 服务器中的数据库连接

> ID：14427691
> 
> 赞同：1
> 
> 时间：2013-01-20T18:22:03.993
> 
> 标签：c#, sql-server, unit-testing

我正在编写集成测试来验证我的存储库中的行为。我遇到的问题是我想从一个干净的数据库开始为每个测试。我设法通过如下编写 SetUp 来做到这一点：

```
 [SetUp]
    public void SetUp()
    {
        _applicationContext = new TestApplicationContext();

        _applicationContext.Database.Connection.Close();
        _applicationContext.Database.Delete();
        _applicationContext.Database.Create();

        _tenantRepository = new TenantRepository(_applicationContext);
        _userRepository = new UserRepository(_applicationContext);
    } 
```

将`TestApplicationContext`数据库名称设置为`TestDatabase`.

这工作正常，直到我想检查我的测试结果的实际数据库。然后我从 MSSQL 服务器连接到同一个数据库，在我之前不会关闭：

*   关闭 MSSQL 服务器
*   使用“关闭所有连接”选项删除数据库

我发现的唯一方法是通过 SQL 命令。也许是因为我对 MSSQL 的 n00b 知识，但我有点希望有一个“关闭连接”按钮/选项。

如何关闭从 MSSQL 服务器到数据库的连接？或者，有没有办法可以从 C# 以编程方式执行此操作？

更新：

也许我不是很清楚。但是在我打开 MSSQL 并查看表的内容后，测试设置失败。这是因为 MSSQL 还创建了到 TestDatabase 的连接，而我的集成测试无法关闭*该*连接。所以我正在寻找一种解决方案，允许我关闭从 MSSQL 服务器创建的连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T18:52:53.487

您将连接释放回连接池，而不是实际关闭它。不要为每个测试创建/删除数据库，而是在设置中开始新事务并在清理中回滚。这样，您的数据库将不会发生任何更改，并且您的测试将始终从干净的状态开始。

另外，因为您正在针对实时数据库进行测试，所以我不会将您的测试称为“单元”测试。单元测试没有任何外部依赖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T19:58:35.417

如果不是删除并重新创建整个数据库，而是删除并重新创建选定的（或所有表），则可以解决连接问题。

您可以创建一个小脚本，以一种不需要硬编码表名的方式为您执行此操作：http: [//www.apexure.com/blog/2010/07/29/delete-all-tables-在-sql-server-数据库/](http://www.apexure.com/blog/2010/07/29/delete-all-tables-in-sql-server-database/)

或者，Julia Lerman 在她的“Programming Entity Framework: Code First”一书中以更成熟的形式提到了这种方法，并作为自定义数据库初始化程序合并：

> 除了编写自己的自定义初始化程序外，您还可以找到其他人创建的初始化程序。EFCodeFirst.CreateTablesOnly NuGet 包中提供了一个示例。此初始化程序将允许您在现有数据库中删除和创建表，而不是删除和创建实际数据库本身。如果您的目标是您无权删除或创建整个数据库的托管数据库，这将特别有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T20:23:57.740

可靠地获得数据库排他锁的唯一方法是使用该`SINGLE_USER WITH ROLLBACK IMMEDIATE`技术。我建议您创建一个空状态的数据库快照并每次都还原到该快照。那会快得多。

# regex - ASP.NET MVC - 正则表达式捕获图像和链接但丢失自由文本

> ID：14427693
> 
> 赞同：1
> 
> 时间：2013-01-20T18:22:12.930
> 
> 标签：regex, asp.net-mvc, orchardcms

我正在深入研究 Orchard CMS 和 ASP.NET MVC，并且可以提供一些帮助。我正在使用一个 RSS 提要，其中包含我想要保留的 HTML（图像周围的链接），然后是一些我不想要的文本。

例如：

```
<a href="/pin/215609900880326101/"><img src="http://media-cache-ec3.pinterest.com/upload/65935582014430387_d5ueoRR6_b.jpg"></a>Nice graphic design & typography 
```

我认为最好的方法是使用正则表达式来检测所需的 HTML。但是，我没有太多的正则表达式格式化经验，也不知道应该如何在我的场景中实现正则表达式。下面的代码是我目前正在使用的代码：

```
@using System.Xml.Linq
@{
var feed = Model.Feed as XElement;
}
<ul>
@foreach(var item in feed
.Element("channel")
.Elements("item")
.Take((int)Model.ItemsToDisplay)) {
<li>@T(item.Element("description").Value))</li>
}
</ul> 
```

所以，我基本上有两个问题（no1 是最重要的）：

1.  我应该如何实施正则表达式来丢失不需要的自由文本
2.  我需要这样做的正则表达式是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T23:10:39.070

我使用 css 来隐藏文本来处理这个问题。

# c# - 当我调用另一个控制器的 ActionResult 函数时如何调用 OnActionExecuting

> ID：14427694
> 
> 赞同：1
> 
> 时间：2013-01-20T18:22:23.170
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我有 2 个 MVC 项目。我想直接引用一个公共页面，而不必重新编写。我这样做是这样的：

```
public ActionResult test()
{
    OldController.Controllers.PatronController temp = new OldController.Controllers.PatronController();

    return temp.Index();
} 
```

问题是，在“OldController”中有一些在 OnActionExecuting 函数中设置的功能。当我像上面那样调用函数时，不会调用 OnActionExecuting。

如何在两个项目之间共享公共页面（以便我可以返回它`OnActionExecuting`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:10:06.783

理想情况下，您希望在每个项目中保持导航一致，并且仍然重用核心功能。

出于这个原因，我建议：

1）创建带有动作部分（带有动作方法的部分 - 和控制器）的第三个 MVC 项目。

2) 将您的新 MVC 项目的引用添加到您的 2 个主要 MVC 项目。

3) 在您的每个主要 MVC 项目中，创建在视图中呈现您的动作部分的视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:16:48.173

创建作为类库的第三个项目，并在该库中创建一个 ControllerBase 类，该类具有两个控制器之间的通用功能，并且在每个项目中都从该控制器类派生。

# vb.net - 变量值传递给另一个表单，VB.NET

> ID：14427695
> 
> 赞同：3
> 
> 时间：2013-01-20T18:22:32.867
> 
> 标签：vb.net

我确实有两个公共变量，每个都来自两种不同的形式..

```
Form1.VB
Public UserNo As String

Form2.VB
Public MyUserNo As String 
```

在我的 Form2.VB 文件中，我为 Form1.VB 的 UserNo 赋值

```
Form1.UserNo = MyUserNo 
```

每当我访问 Form1.VB 时，MyUserNo 的值为空，我该怎么办？两个表格都没有关闭。

当我需要在 Form1.VB 上使用它时，我还尝试重新分配该值

```
UserNo = Form2.MyUserNo 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-23T04:55:21.287

**首先正确的是语法是：**

```
Form1.VB
Public UserNo As String

Form2.VB
Public MyUserNo As String

In Form1
UserNo=Form2.MyUserNo 
```

**第二件事**：首先，您应该先在 MyUserNo 中存储一些值，然后再将其存储到 UserNo 中。这就是为什么你得到空值的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T18:38:11.387

你知道，你可以拥有多个表单实例。形式是对象，就像其他任何东西一样。您需要在每个表单中都有一个变量来保存对您正在使用的每个表单的实例的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-06T13:46:42.383

如果您不调用 InitializeComponent()，您的完整 GUI 将不会呈现。

... InitializeComponent() Form1.UserNo = MyUserNo ...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T18:25:52.147

将变量设为静态/共享并重试，它应该可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-31T02:21:38.640

您需要做的是在模块中将变量创建为私有变量，然后为它们生成一些评估器。

例子：

```
Module modVariables

Private strUserNoSTR as String = New String(String.Empty)
 Public Property getUserNoSTR() As String
        Get
            Return strUserNoSTR
        End Get
        Set(ByVal strUserNo As String)
            strUserNoSTR = strUserNo
        End Set
    End Property

    Private strMyUserNoSTR As String = New String(String.Empty)
    Public Property getMyUserNoSTR As String
        Get
            Return strMyUserNoSTR
        End Get
        Set(ByVal strMyUserNo As String)
            strMyUserNoSTR = strMyUserNo
        End Set
    End Property
End Module 
```

生成 getter 和 setter 公共方法后，您会注意到您的两个私有变量在其中，当您创建变量时，它们可以从任何形式访问。

你不断丢失变量值的原因是因为当你尝试从另一个表单访问它的值（基本上你是从另一个类调用它）时，编译器必须创建该变量的一个新实例，当这种情况发生时，变量是设置回其类型的原始值`empty string`。从模块中调用它们可以防止它们被重新实例化。

如何使用它们：

要获取 strMyUserNo 的值，请调用 strMyUserNoSTR 的 getter：

```
TextBox.Text = getMyUserNoSTR 
```

设置 strMyUserNoSTR 的值：

```
getMyUserNoSTR = someValuePlacedInThisVariable  'This sets it's value.
TextBox.Text = getMyUserNoSTR 'Now it's value is someValuePlacedInThisVariable. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-20T20:48:48.167

尝试这个：

```
[Form1.UserNo = form2.MyUserNo] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-21T13:13:39.157

```
 'In frmMain i Start frmBase
    Dim f As New frmBase
    f.Text = "New caption for frmBase"
    f.ShowDialog(Me)

    'in frmBase i read and write a textbox

    Dim str As String = CType(Me.Owner, frmMain).txtRicetta.Text
    Console.WriteLine(str)

    CType(Me.Owner, frmMain).txtRicetta.Text = "12345"
    Console.WriteLine(CType(Me.Owner, frmMain).txtRicetta.Text) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-04T12:29:02.413

使用变量值作为公共

例如

在 Form1 中：

```
Public Str1 as String 
```

所以在 Form2 中你可以使用：

```
Str2=Form1.Str1 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-01-02T19:22:18.840

它可以
添加它以在下一个表单中形成您想要的值

```
Function getvariable()
    Return (VARIABLE)
End Function 
```

在下一个表格中获得 VARIABLE

```
VARIABLE2 = Form.getvariable() 
```

# javascript - JavaScript 中的双三进制

> ID：14427696
> 
> 赞同：15
> 
> 时间：2013-01-20T18:22:47.340
> 
> 标签：javascript

我正在浏览 jQuery 源代码中的一些东西，特别是`inArray`方法，我发现了这行代码：

```
i = i ? i < 0 ? Math.max( 0, len + i ) : i : 0; 
```

我看到的是两个三元运算符，但我不知道它是如何使用的。我了解三元运算符的工作原理，但我以前从未见过它像这样使用过。这段代码是如何工作的？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-20T18:26:23.180

像你一样把它分解`1 + 2 + 3`：

```
if (i) {
    if (i < 0) {
        i = Math.max(0, len + i);
    } else {
       i = i; // no-op
    }
} else {
    i = 0; // also no-op, since if `i` were anything else it would be truthy.
} 
```

事实上，整条线对我来说似乎效率低下。我个人只会使用：

```
if (i < 0) { 
    i = Math.max(0, len + i);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-20T18:27:33.563

`i = i ? i < 0 ? Math.max( 0, len + i ) : i : 0;`

分解为：

```
var i;

if(i){
  if(i<0){
   i = Math.max(0, len + i);
  }else{
    i = i;
  }
}else{
  i = 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T18:32:23.100

无论如何，“i”是数组的索引，而“len”是数组的长度吗？

如果是这样，那么该行将执行以下操作：

*   如果我可以等同于假，那么假设它是0

*   否则，如果 i 是正数或 0，则按原样

*   否则，如果 i 为负数，则将其视为从数组末尾开始计数的索引（即，如果 i==-1，则表示数组的最后一个元素）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-20T18:33:31.083

```
i = i ? i < 0 ? Math.max( 0, len + i ) : i : 0; 
```

读到

```
i = i ? ( i < 0 ? Math.max( 0, len + i ) : i ) : 0; 
```

# silverlight - wpf网格左对齐

> ID：14427699
> 
> 赞同：1
> 
> 时间：2013-01-20T18:23:13.333
> 
> 标签：silverlight, windows-phone-7, xaml

在 WP7.5 应用程序中，我有一个包含网格的列表框。此网格包含两行和两列 (2x2)

在网格中，我显示文本框，我的问题是对齐不好！我不知道为什么，我设置了horizo​​ntalAligement = true，但没有改变！

这是我的代码：

```
<ListBox x:Name="ListBoxTiers"  HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0">
<ListBox.ItemTemplate>
    <DataTemplate>

        <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" VerticalAlignment="Top" >
            <Grid Margin="20" VerticalAlignment="Top" HorizontalAlignment="Left">
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition />
                </Grid.RowDefinitions>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <TextBlock  HorizontalAlignment="Left" TextWrapping="Wrap" Grid.Row="0" Grid.Column="0" Margin="0,0,10,0" x:Name="TxtBox_cCodeTiers" Text="{Binding m_strCode}" FontWeight="Bold" FontSize="22" />
                <TextBlock  HorizontalAlignment="Left" TextWrapping="Wrap" Grid.Row="0" Grid.Column="1" Margin="0,0,10,0" x:Name="TxtBox_cNomTiers" Text="{Binding m_strNom}"   FontWeight="Bold" FontSize="22" />
                <TextBlock  HorizontalAlignment="Left" TextWrapping="Wrap" Grid.Row="1" Grid.ColumnSpan="2" Grid.Column="0" Margin="0,0,10,0" x:Name="TxtBox_cCPostal" Text="{Binding m_strFonction}" />                                   
            </Grid>

        </StackPanel>

    </DataTemplate>
</ListBox.ItemTemplate> 
```

这是我的结果：

![在此处输入图像描述](../Images/18e34f1d49af3da06782af7638f23446.png)

这是我的课：

```
public class CTiers
{
    public enum TypeTiers { Client, Fournisseur, Contact, Collaborateur, Commercial, Prospect};

    TypeTiers m_TypeTiers { set; get; }

    public string m_strTypeTiers { get; set; }
    public string m_strCode    { set; get; }
    public string m_strNom { set; get; }
    public string m_strPrenom { set; get; }
    public string m_strTel { set; get; }
    public string m_strGsm { set; get; }
    public string m_strFax { set; get; }
    public string m_strMail { set; get; }
    public string m_strWebSite { set; get; }
    public string m_strVille { set; get; }
    public string m_strCpostal { set; get; }
    public string m_strRue { set; get; }
    public string m_strFonction { set; get; }

    public CTiers()
    {

    }

    public CTiers(TypeTiers oTypeTiers, string strCode, string strNom, string strPrenom, string strTel, string strGsm, string strFax, string strRue,string strVille,string strCPostal,string strMail,string strWebSite,string strFonction)
    {
        m_TypeTiers = oTypeTiers;
        m_strCode = strCode.Trim();
        m_strNom = strNom.Trim();
        m_strPrenom = strPrenom.Trim();
        m_strVille = strVille.Trim();
        m_strTel = strTel.Trim();
        m_strGsm = strGsm.Trim();
        m_strFax = strFax.Trim();
        m_strWebSite = strWebSite.Trim();
        m_strRue = strRue.Trim();
        m_strMail = strMail.Trim();
        m_strCpostal = strCPostal.Trim();
        m_strTypeTiers = oTypeTiers.ToString().Trim();
        m_strFonction = strFonction.Trim();
    }

} 
```

任何人都可以帮助我吗？

非常感谢 ：）

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T05:57:52.660

您的代码没问题，问题仅在于文本修剪。

我在您的问题中使用了相同的 xaml 并做了一个示例。

案例1：首先我把所有的弦都修剪了

```
List<Myclass> list = new List<Myclass>();
list.Add(new Myclass() { m_strCode = "001", m_strNom = "sample1", m_strFonction = "Fonction1" });
list.Add(new Myclass() { m_strCode = "002", m_strNom = "sample2", m_strFonction = "Fonction2" });
list.Add(new Myclass() { m_strCode = "003", m_strNom = "sample3 ", m_strFonction = "Fonction3" });
list.Add(new Myclass() { m_strCode = "004", m_strNom = "sample4", m_strFonction = "Fonction4" });
list.Add(new Myclass() { m_strCode = "005", m_strNom = "sample5", m_strFonction = "Fonction5" });
ListBoxTiers.ItemsSource = list; 
```

结果是：（格式如您所愿）

![在此处输入图像描述](../Images/99319ba3135a2d1ea249bf9d5e42be9d.png)

案例 2：在这种情况下，我使用了一些带有额外空格的字符串（观察 sample1 和 004）

```
List<Myclass> list = new List<Myclass>();
list.Add(new Myclass() { m_strCode = "001", m_strNom = "    sample1", m_strFonction = "Fonction1" });
list.Add(new Myclass() { m_strCode = "002", m_strNom = "sample2", m_strFonction = "Fonction2" });
list.Add(new Myclass() { m_strCode = "003", m_strNom = "sample3 ", m_strFonction = "Fonction3" });
list.Add(new Myclass() { m_strCode = "004    ", m_strNom = "sample4", m_strFonction = "Fonction4" });
list.Add(new Myclass() { m_strCode = "005", m_strNom = "sample5", m_strFonction = "Fonction5" });
ListBoxTiers.ItemsSource = list; 
```

现在结果是：

![在此处输入图像描述](../Images/5c4a247a6b8ba9f1c13bb31041bf338d.png)

因此，问题是您没有正确修剪文本。小心点。

更新：

你去吧。您并不总是调用构造函数来实例化对象。所以，更好的方法是这样。

```
 private string _m_strFonction;
    private string _m_strNom;
    private string _m_strCode;

    public string m_strCode
    {
        get { return _m_strCode; }
        set { _m_strCode = value.Trim(); }
    }
    public string m_strNom
    {
        get { return _m_strNom; }
        set { _m_strNom = value.Trim(); }
    }
    public string m_strFonction 
    { 
        get { return _m_strFonction; }
        set { _m_strFonction = value.Trim(); }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T18:37:46.163

我认为问题在于`Margin`文本`Grid`修剪和文本修剪。

尝试`Margin`设置为`"0, 20, 20, 20"`：

```
<ListBox x:Name="ListBoxTiers" ItemsSource="{Binding}" 
         HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0"          
         >
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" VerticalAlignment="Top" >
                <Grid Margin="0, 20, 20, 20" VerticalAlignment="Top" HorizontalAlignment="Left">
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="50" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <TextBlock  HorizontalAlignment="Left" TextWrapping="Wrap" Grid.Row="0" Grid.Column="0" Margin="0,0,10,0" x:Name="TxtBox_cCodeTiers" Text="{Binding m_strCode}" FontWeight="Bold" FontSize="22" Loaded="TxtBlock_Loaded" />
                    <TextBlock  HorizontalAlignment="Left" TextWrapping="Wrap" Grid.Row="0" Grid.Column="1" Margin="0,0,10,0" x:Name="TxtBox_cNomTiers" Text="{Binding m_strNom}"   FontWeight="Bold" FontSize="22" Loaded="TxtBlock_Loaded"  />
                    <TextBlock  HorizontalAlignment="Left" TextWrapping="Wrap" Grid.Row="1" Grid.ColumnSpan="2" Grid.Column="0" Margin="0,0,10,0" x:Name="TxtBox_cCPostal" Text="{Binding m_strFonction}" Loaded="TxtBlock_Loaded"  />
                </Grid>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

修剪文本以改善对齐：

```
private void TxtBlock_Loaded(object sender, RoutedEventArgs e)
{
     TextBlock tb = sender as TextBlock;
     tb.Text = tb.Text.Trim();
} 
```

如果列包含具有恒定宽度的数据，您可以在 XAML 中指定它：

```
<Grid.ColumnDefinitions>
       <ColumnDefinition Width="50" />
       <ColumnDefinition Width="*" />
</Grid.ColumnDefinitions> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T19:24:19.557

[使用ListView](http://msdn.microsoft.com/en-us/library/system.windows.controls.listview.aspx)而不是 ListBox可能会更好。但是，如果您必须使用 ListBox，那么您看到的问题是因为每个数据项都有自己的 Grid。换句话说，它们不共享相同的列。为了避免这种情况，为每个列定义添加一个宽度：

```
<Grid.ColumnDefinitions>
  <ColumnDefinition Width="100" />
  <ColumnDefinition Width="*" />
</Grid.ColumnDefinitions> 
```

这将为所有左列提供一个共同的宽度，并且右列也将从相同的位置开始。假设左列中没有任何内容比设置为宽度的任何内容更宽。

# html - 页脚不粘在底部

> ID：14427703
> 
> 赞同：1
> 
> 时间：2013-01-20T18:23:49.760
> 
> 标签：html, css, blogs, tumblr

我的页脚粘在博客整个页面的底部时遇到了问题。我遇到两个问题。首先，如果我使用`position:absolute`页脚上升到主博客页面的中间。如果我不理会它，它会粘在底部，但会在博客的整个页面上上升到中间。页脚是我一直遇到的问题。

这是我当前的页脚 CSS 样式

```
footer {
text-align: left;
background-color: #f4f4f4;
padding-top: 40px;
padding-bottom: 40px;
z-index: 1;
bottom:0;
width:100%;
} 
```

这是页面的链接[http://pixelogicblog.tumblr.com/post/41025998534/tes-post](http://pixelogicblog.tumblr.com/post/41025998534/tes-post)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T18:34:51.737

查看使用 CSS 的粘性页脚解决方案：

[http://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

您的页脚仅位于页面中间的原因`position: absolute`是您没有在 body 和 html 元素上设置最小高度。没有它，正文只占用您为其内容所占用的空间——然后页脚与该底部对齐，而不是与窗口的底部对齐。

尝试将其添加到您的 CSS 中，使其至少占据窗口的高度：

```
html, body {
    min-height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T18:46:49.640

你见过这个吗？

[http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page](http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page)

跨浏览器（IE6+ 也是）且易于理解。

巧合的是，您当前的页脚没有出现在页面底部，因为它的位置设置为`relative`，将其位置设置为`absolute`，它将位于页面底部（只要页面不超过视口） . 相对定位只设置一个元素相对于它正常位置的位置，例如，如果你`bottom: -10px`在`footer`元素上设置，那么它看起来会比原本的位置低 10 个像素（希望我在那里有意义！）

如果您绝对定位某些东西，它绝对定位到body标签，或者位置设置为的下一个最近的父级`relative`（无论如何我都理解）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T01:10:59.360

将位置设置为绝对

```
position:absolute; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-16T05:18:03.080

如果你想把页脚贴在底部，你可以在,和上使用`min-height`viewheight 单位。`header``main content``footer`

例子：

```
<header style="min-height: 10vh">...</header>
<div id="main-content" style="min-height: 85vh">...</div>
<footer style="min-height: 5vh">...</footer> 
```

有了这个，如果您没有将所有视图高度与您的内容一起使用，页脚仍将停留在底部。这是我发现将页脚粘贴在底部的最佳方法。

我希望它会帮助少数人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-16T04:32:30.153

重要的是要注意，除了`static`（默认）之外的任何定位都会将其排除在文档流之外。我解决这个问题的方法是在正文内容中添加margin-bottom，等于#Footer 的高度。这样做可以确保页脚后面始终有一个空白空间，等于它的高度，防止它与内容重叠。使用`absolute`, 和`fixed`会导致内容重叠。

# javascript - 为什么我无法在 javascript/JQuery 中获取图像的 naturalHeight/naturalWidth？

> ID：14427704
> 
> 赞同：2
> 
> 时间：2013-01-20T18:23:54.820
> 
> 标签：javascript, jquery

所以我正在尝试根据其中包含的图像的属性进行一些非常基本的 div 调整大小。我知道我可以做一些非常基本的事情，比如在图像周围设置背景填充并达到相同的效果，但这有点个人挑战。

我遇到的问题是，当我尝试获取图像的 naturalHeight 或 naturalWidth 值时，我得到的值为 0。但是，当我尝试使用控制台获取这些值时，它们会返回正确的值。此外，我的 resizeDiv() 函数在控制台中显示为未定义。

这是代码：

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>kitten_resize - WesGilleland.com</title>
<script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>

<script type="text/javascript">
$(document).ready(function() {
    var kittens = new Array("100x100_kitten.jpeg","150x150_kitten.jpeg","200x150_kitten.jpeg");

    $('#kittens').attr('src', kittens[0]); //set the image

    function resizeDiv() {
        var img = document.getElementById('kittens');
        var imgH = img.naturalHeight;
        var imgW = img.naturalWidth;
        $('div').width(imgW);
        $('div').height(imgH);
        console.log('Current imgH: '+imgH);
        console.log('Current imgW: '+imgW);
    };

    resizeDiv();

});
</script>

<style>
div {
    background-color: black;
    padding: 10px;
    margin: auto;
}
</style>
</head>

<body>
<div>
<img id="kittens" src='' />
</div>
</body>
</html> 
```

您还可以在此处找到工作副本：[http ://www.wesgilleland.com/projects/kitten_resize/](http://www.wesgilleland.com/projects/kitten_resize/)

我觉得这是我缺少的一些非常基本的东西；自从一年前获得副学士学位以来，我就没有摆弄过这些东西。感谢任何能提供帮助的人！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T18:25:40.287

那是因为当您读取原始尺寸时，您的图像尚未加载。

加载图像时，您应该阅读尺寸：

```
 var img = $('#kittens')[0];
 img.onload = resizeDiv;
 img.src = kittens[0]; 
```

# java - Java中char数组中所有可能的字符串组合

> ID：14427706
> 
> 赞同：0
> 
> 时间：2013-01-20T18:24:06.610
> 
> 标签：java, arrays, char, combinations

我有一个 Java 学校项目，我也被分配了。现在我遇到了项目的一部分问题，我无法弄清楚。应用程序必须从二维字符数组（char[][] 板）生成所有可能的单词组合（可以通过字典验证）。该板是动态的，因为用户可以选择比例：4x4、5x5、4x5、5x4、4x6，...所以我猜这里嵌套循环不合适，如果我错了，请纠正我。单词必须水平、垂直和对角生成。4x4 板的示例：

| 你| 一个 | 你| 小号 |

| n | n | 我 | 我 |

| 一个 | ○ | 电子| 乙 |

| 电子| 你| 电子| z |

```
 Code was completely wrong. 
```

另一个想法可能是暴力破解板上所有可能的路径，然后尝试那些保存的路径来验证它是否是一个单词。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T22:22:00.477

解决此问题的一种方法是：

```
for each path on the board
    if corresponding word in dictionary
        print it 
```

要查找所有路径，您可以调整任何[图遍历算法](http://en.wikipedia.org/wiki/Graph_traversal)。

现在这会很慢，因为有很多这样大小的电路板路径（对于具有 n 个单元的电路板，我们最多可以有`n * 4 ^ (n - 1)`路径，所以对于 5 x 5 电路板，您将有类似 25 * 2 ^ 50 ~= 10^16 条路径。

对此进行改进的一种方法是交错遍历图形并检查字典，如果当前路径的单词不是字典单词的前缀，则中止：

```
class Board {

    char[][] ch;
    boolean[][] visited;

    Trie dictionary;

    void find() {
        StringBuilder prefix = new StringBuilder();
        for (int x = 0; x < maxx; x++) {
            for (int y = 0; y < maxy; y++) {
                walk(x, y, prefix);
            }
        }
     }

    void walk(int x, int y, StringBuilder prefix) {
        if (!visited[x][y]) {
            visited[x][y] = true;
            prefix.append(ch[x][y]);

            if (dictionary.hasPrefix(prefix)) {
                if (dictionary.contains(prefix)) {
                    System.out.println(prefix);
                }

                int firstX = Math.max(0, x - 1);
                int lastX = Math.min(maxx, x + 1);
                int firstY = Math.max(0, y - 1);
                int lastY = Math.min(maxy, y + 1);
                for (int ax = firstX; ax <= lastX; ax++) {
                    for (int ay = firstY; ay <= lastY; ay++) {
                        walk(ax, ay, prefix);
                    }
                }
            }

            prefix.setLength(prefix.length() - 1);
            visited[x][y] = false;
        }
    } 
```

如您所见，walk 方法会调用自身。这种技术称为[递归](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)。

剩下的就是为字典找到支持有效前缀查询的数据结构的问题。最好的这种数据结构是[Trie](http://en.wikipedia.org/wiki/Trie)。唉，JDK 不包含实现，但幸运的是，编写一个实现并不难。

注意：此答案中的代码未经测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:01:04.703

一种相当直接的概念化方法是将[广度优先搜索](http://en.wikipedia.org/wiki/Breadth-first_search)(BFS) 方法应用于每个位置（或深度优先，取决于您以后可能想要进行的调整）。这将为您提供所有可能的字母组合，最高字符级别等于搜索的最大深度。根据您的要求，例如允许的最长单词、最长运行时间以及是否通过数据结构或文件提供字典，这可能是关键部分。

或者，您可能需要进行更多优化。如果是这样，请考虑如何加快 BFS 或 DFS。如果您进行了 DFS，但知道其中没有以“zzz”开头的三个字符怎么办？不必遍历所有可能的排序，您可以节省大量时间。为了有效地查找单词，您可能需要进行进一步的调整。但我会从 Java 的内置功能开始（在这种情况下会想到 String.startsWith()），测量性能（可能使用有限的最大字长），然后在需要的时间和地点进行优化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-10T12:02:31.453

首先使用简单的重复方法将行、列和对角线转换为字符串。然后，我会将它变成一个 StringBuilder，或者为了检查哪些单词是真实的并消除那些不是直接来自 StringBuilder 的单词。然后，只需将它打印到一个字符串。有很多有用的工具可以消除或替换 java 中的单词。

# matlab - Matlab函数中的移位参数

> ID：14427707
> 
> 赞同：2
> 
> 时间：2013-01-20T18:24:08.483
> 
> 标签：matlab, symbolic-math

假设我`x -> f(x)`在 Matlab 中定义了符号函数。如何定义从`x -> f(x+a)`开始的函数`f`？（这里`a`是实数）

我已经尝试过`g = @(x) f(x+a)`，但这个定义只允许我找到 的值`g`，而不是它的导数。当我尝试推导`g`时，它说它不能识别`f`为 Matlab 函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T18:32:59.910

您的错误是您试图将其定义`g`为匿名函数而不是符号函数。相反，尝试使用符号替换[`subs`](http://www.mathworks.com/help/symbolic/subs.html)：

```
g = subs(f, x, x + a) 
```

# matlab - Matlab自定义曲线拟合失败

> ID：14427709
> 
> 赞同：0
> 
> 时间：2013-01-20T18:24:27.750
> 
> 标签：matlab, curve-fitting

我正在使用 cftool 自定义拟合 Mössbauer 光谱数据。有两个系数，Gamma 和 N0。

```
N = f(v)
  = (299792458000^2*Gamma^2*N0)/(299792458000^2*Gamma^2+4*v^2*(4.29383292e-15)^2) 
```

使用默认设置（信任区域、健壮关闭等）我得到以下拟合：

```
Fit computation did not converge:
Fitting stopped because the number of iterations or function evaluations exceeded the specified maximum.

Fit found when optimization terminated:

General model:
     f(v) = (299792458000^2*Gamma^2*N0)/(299792458000^2*Gamma^2+4*v^2*(4.29383292e-
                    15)^2)
Coefficients (with 95% confidence bounds):
       Gamma =      0.9137  (-Inf, Inf)
       N0 =   2.454e+04  (2.059e+04, 2.849e+04)

Goodness of fit:
  SSE: 6.41e+11
  R-square: -2068
  Adjusted R-square: -2073
  RMSE: 4.013e+04

Warning: A negative R-square is possible if the model does not contain a constant term and the fit is poor (worse than just fitting the mean). Try changing the model or using a different StartPoint. 
```

如果我切换到 Levenberg-Marquardt，我会通过数据得到一条直线：

```
General model:
     f(v) = (299792458000^2*Gamma^2*N0)/(299792458000^2*Gamma^2+4*v^2*(4.29383292e-
                    15)^2)
Coefficients (with 95% confidence bounds):
       Gamma =       0.793  (-Inf, Inf)
       N0 =   6.456e+04  (6.447e+04, 6.465e+04)

Goodness of fit:
  SSE: 3.098e+08
  R-square: 2.22e-16
  Adjusted R-square: -0.002513
  RMSE: 882.3 
```

![在此处输入图像描述](../Images/bdfabd3d3e48312d09e2bff1172e707f.png)

为什么这两种情况都如此糟糕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:01:53.273

f(v) 简化为，`f(v)=N0/(1+(2.8645e-26*(v/Gamma))^2)`因此分母中的 1 占主导地位，直到 (v/Gamma) 开始变得像 10^25 一样大。使用 0.793 的 Gamma 和 |15| 的 v 我认为matlab可能很难收敛到N0以外的任何东西

# c++ - 2bit 位域数组对性能和缓存效率的影响？

> ID：14427715
> 
> 赞同：3
> 
> 时间：2013-01-20T18:25:22.240
> 
> 标签：c++, performance, caching, bit-fields, memory-efficient

我需要一个 2 位数组，我根本不关心节省内存，但我关心的是尽量减少缓存未命中和最大限度地提高缓存效率。使用 bool 数组将使用 4 倍的内存，这意味着对于缓存中每个可用的数据块，将有 3 个未使用。所以从技术上讲，如果我使用位域，我可以获得 3 倍更好的缓存一致性。

计划是将其实现为一个字节数组，分为 4 个相等的位域，并使用 div 函数能够获得整数商和余数，可能在单个时钟内，并使用它们访问正确的索引和右位域。

我需要的数组大约有 10000 个元素长，因此它将产生更密集的打包数据，使用 2 个实际位将允许整个数组适合 L1 缓存，而使用字节数组这是不可能的。

所以我的问题是，是否有人可以告诉我这在面向性能的任务中是否是一个好主意，所以我知道是否值得继续实施 2 位数组？当然，最好的了解方法是分析，但提前提供的任何信息都可能有用，我们将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T18:28:28.497

在现代处理器上具有 10000 个元素，它应该以字节（10KB）的形式很好地适应内存，所以我不会太担心它，除非你希望它在一些非常小的微处理器上运行，并且缓存要小得多比现代 CPU 具有的典型 16-32KB L1 缓存。

当然，如果您认为从性能角度来看这是代码的重要部分，您可能很想用不同的解决方案测试性能[根据您在开始优化之前已经完成的分析来衡量，对吗？] .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T18:41:39.487

我不清楚这是否会带来性能提升。访问每个字段需要几条指令`(data[i / 4] >> 2 * (i % 4)) & 0x03`（执行时间的额外成本是大于还是小于缓存的差异很难说；你必须配置文件才能确切知道。

如果您可以组织您的算法一次处理一个字节（甚至一个字），那么访问成本可能会低得多。遍历整个数组，例如：

```
for ( int i = 0; i < 10000; i += 4 ) {
    unsigned char w1 = data[ i / 4 ];
    for ( int j = 0; j < 4; ++ j ) {
        unsigned char w2 = w1 & 0x03;
        //  w2 is entry i + j...
        w1 >>= 2;
    }
} 
```

可能会产生重大影响。大多数编译器将能够将`w1`和保存`w2`在寄存器中，这意味着您将只有 1/4 的内存访问。使用`unsigned int` 打包可能会更快。`

# regex - 只有代码的 youtube 地址通常可以工作吗？

> ID：14427718
> 
> 赞同：0
> 
> 时间：2013-01-20T18:25:36.720
> 
> 标签：regex, url, youtube

在设置网站的一部分时，用户可以在其中输入 youtube 视频的 url 并让它在模式窗口中播放——目前正在使用 fancybox——发现一些 url 不起作用，即使是使用 fancybox 正则表达式作为 href。但是，似乎只需获取视频的代码并将其附加到基本的 url 词干即可。如：

[http://www.youtube.com/watch?v=](http://www.youtube.com/watch?v=) {视频代码} 如[http://www.youtube.com/watch?v=OMYzsAurxHY](http://www.youtube.com/watch?v=OMYzsAurxHY)

我通过一系列 ColdFusion 正则表达式运行提交的 url 以获取代码，然后附加到“http://www.youtube.com/watch?v=" 词干。

注意有任何问题，但只是想看看是否有更熟悉 youtube 的人认为假设这个词干 + 视频代码并不总是有效 - 或者至少在很大一部分时间里有任何问题。

谢谢

# sql-server - 用于数据同步和乐观并发的时间戳与日期列 sql azure

> ID：14427721
> 
> 赞同：0
> 
> 时间：2013-01-20T18:25:46.287
> 
> 标签：sql-server, entity-framework, azure-sql-database, azure-data-sync

将 Sql Azure 与实体框架一起使用。我们的大多数表格都有一个日期列，我们存储记录的编辑时间和编辑者。由于以下原因，将这些列设置为时间戳列是否有好处

1.  如果我们想通过 SQL 数据同步将此数据库与另一个数据库同步，时间戳是否有帮助，即如果我们有一个时间戳列，我们可以将其用于我们的日志记录和数据同步，特别是如果数据同步坚持所有具有时间戳列的表
2.  有这个专栏有助于乐观并发（通过实体框架）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:29:17.090

要回答您的第一个问题，否。SQL 数据同步服务将创建自己的更改跟踪机制，您无法将其配置为重用您的时间戳列。

# ruby-on-rails - 403 禁止 Heroku 的 Nokogiri 请求

> ID：14427727
> 
> 赞同：2
> 
> 时间：2013-01-20T18:26:12.243
> 
> 标签：ruby-on-rails, ruby, heroku, nokogiri

我在我的 Rails (3.2) 应用程序中使用 Nokogiri 获取和解析一个 url（特别是 Sirius XM 时间戳请求），如下所示：

```
url = "https://www.siriusxm.com/metadata/pdt/en-us/xml/events/timestamp/01-20-21:59:15"    
timestamp_data = Nokogiri::HTML(open(url)) 
```

这在我的本地开发环境中运行良好，但在从 Heroku 运行时始终失败并出现“403 Forbidden”响应。

关于在本地工作时可能导致 Heroku 方面失败的原因有什么想法吗？我可以做些什么来收集更多关于它为什么会失败的信息？

感谢您的任何帮助。

# php - 带有会话和用户访问权限的 PHP 注册

> ID：14427728
> 
> 赞同：-1
> 
> 时间：2013-01-20T18:26:12.453
> 
> 标签：php, mysql, session

我试图了解如何使用 PHP 和 MySQL 构建用户注册。

我已经建立了一个用户可以填写的表格，然后将信息存储在我的表格中。

```
error_reporting(E_ALL);
include_once ('connection.php');

// Required field names
$required = array('firstname', 'lastname', 'email', 'password', 'accounttype');

// Loop over field names, make sure each one exists and is not empty
$error = false;
foreach($required as $field) {
  if (empty($_POST[$field])) {
    $error = true;
  }
}

if ($error) {
  echo "All fields are required.";
} else {
    $firstname = $_POST['firstname'];
    $lastname = $_POST['lastname'];
    $email = $_POST['email'];
    $password = md5($_POST['password']);
    $accounttype = $_POST['accounttype'];

    $query = "INSERT INTO users(firstname,lastname,email,password,accounttype) VALUES (:firstname,:lastname,:email,:password,:accounttype)";
      $stmt = $dbh->prepare($query);
      $stmt->bindParam(':firstname', $firstname);
      $stmt->bindParam(':lastname', $lastname);
      $stmt->bindParam(':email', $email);
      $stmt->bindParam(':password', $password);
      $stmt->bindParam(':accounttype', $accounttype);
      $stmt->execute();

    if(!$query){
        echo 'Whoops, something went wrong!';
    } else {
        echo $accounttype;
        if($accounttype == '1'){
            header ('Location: /england/dashboard.php');
            exit;
        }; 
        if($accounttype == '2'){            
            header ('Location: /ireland/dashboard.php');
            exit;
        };
    };
}; 
```

当用户完成表单时，他们会根据他们的帐户类型被重定向到不同的页面。

在这些页面上，我需要以某种方式检查用户是否属于帐户类型“X”。所以如果他们登陆

```
header ('Location: /ireland/dashboard.php'); 
```

他们的帐户类型值将等于 2，因此只有帐户类型为 2 的人才能访问上述内容。

我已经阅读了有关会话变量的信息，但是我在哪里设置这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T18:35:05.537

```
 session_start(); // this at top of page
 if($accounttype == '1'){
        $_SESSION['accountType'] = 1; // or $accounttype
        header ('Location: /england/dashboard.php');
        exit();
    }; 
    if($accounttype == '2'){ 
        $_SESSION['accountType'] = 2; // or $accounttype         
        header ('Location: /ireland/dashboard.php');
        exit();
    }; 
```

在英国/dashboard.php

```
session_start();
if($_SESSION['accountType'] !== 1) header('location: login.php'); 
```

在爱尔兰/dashboard.php

```
session_start();    
if($_SESSION['accountType'] !== 2) header('location: login.php'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:30:42.093

开始构建表单的会话，

```
session_start();
$_SESSION['account_type'] = 2; 
```

并在`dashboard.php`刚刚获取您的会话变量中检查帐户类型。

```
if(($_SESSION['account_type'] == 2)) {
 header('`dashboard.php');
} else {
// someother page or restrict access
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T18:31:06.850

简单地开始你的 php 脚本`session_start();`

分配会话变量`$_SESSION['whatever'] = "something";`

`session_start();`不过，您必须在您希望使用会话变量的任何页面上开始您的脚本。

要销毁会话和所有关联的变量，只需使用`session_destroy();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T18:32:13.617

一种方法：

*   使用您`require_once()`在每个页面上的“头/配置”文件
*   在此文件中，将信息存储在会话变量中，如下所示：

    ```
    $_SESSION['myCustomValue'] = $accountType; 
    ```

*   然后根据存储在那里的内容，您可以重定向：

    ```
    if ($_SESSION['myCustomValue'] = 2):
        header ('Location: /ireland/dashboard.php'); // oh yea!
    endif; 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T18:32:48.290

首先至少 SHA1 散列密码。将结果而不是实际密码存储在数据库中。为了测试登录，你 SHA1 散列他们给你的内容并比较散列。您还应该在散列之前对密码进行加盐，但仅散列将是一个好的开始。

还要给您的用户记录一个可用作主键的 id。

你基本上在你的脚本中首先做一个 start_session() 。这将开始一个新的或附加到他们拥有的一个。

然后在他们登录/注册之后，您知道他们的用户 ID 是什么，并使用 $_SESSION['userid'] = $userid; 将其存储在会话中。

测试登录： isset($_SESSION['userid']) 将返回 true。

**编辑**

一旦您将表更改为将 id 作为自动递增的主键，您上面的插入不需要更改，但您可以通过调用 $dbh->lastInsertId() 获得该 ID

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-20T18:33:42.487

您需要决定要在[会话数据](http://www.w3schools.com/php/php_sessions.asp)中存储什么。当一个人完成表单、通过验证并保存在数据库中时，您可能希望这样做：

```
if(!$query) {
    echo 'Whoops, something went wrong!';
} else {
   session_start();
   $_SESSION['account_type'] = $accounttype;

   // Carry on functionality...
} 
```

在脚本的开头，您可以阻止现有用户访问注册表单：

```
session_start();

if(isset($_SESSION['account_type'])) {
  header('Location: /ireland/dashboard.php');
} 
```

# rake - Delayed_job + 站点地图：刷新

> ID：14427732
> 
> 赞同：0
> 
> 时间：2013-01-20T18:26:16.973
> 
> 标签：rake, sitemap, delayed-job

所以我试图让delayed_jobs 从站点地图gem 运行我的站点地图：刷新命令。不知道为什么它没有出现在我当地的 rake 工作中：工作。如果我在终端中运行 sitemap:refresh 它运行良好，并且 delay_jobs 运行我所有的其他 rake 任务。

在 sitemap_refresh.rb 中

```
require 'sitemap_generator/tasks'
require 'delayed_job'
require 'delayed/tasks'

module Sitemap
  class Refresh
    def perform
      `rake sitemap:refresh`
    end
  end
end 
```

在我的 rakefile 中，这就是：

```
task :sitemap => :environment do
  load 'sitemap_refresh.rb'
  puts "Refreshing Sitemap"
  Delayed::Job.enqueue Sitemap::Refresh.new
  puts "Sitemap has been refreshed" 
```

结尾

我也尝试过用这两种方法替换`rake sitemap:refresh`似乎`system "sitemap:refresh"`在我的 rake jobs:work 的工人身上不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:32:05.263

解决了问题原来只需要替换`rake sitemap:refresh`为`Rake::Task["sitemap:refresh"].execute`

# visual-studio - 哪个版本的 microsoft 2008 express for opengl es？

> ID：14427734
> 
> 赞同：0
> 
> 时间：2013-01-20T18:26:23.557
> 
> 标签：visual-studio, opengl-es

我正在关注 openGl es 2.0 编程指南（金书）。它指出我需要 Visual Studio 2008 Express。我去了下载站点，有一个 iso 文件，我不知道如何处理。所以我点击了下载单个产品，这导致我进入这个页面，我可以在其中下载安装程序。

[下载页面](http://www.microsoft.com/en-us/download/details.aspx?id=6506)

我应该下载哪个版本？书中的教程是用 C 编程语言给出的。

谢谢

[编辑] 我必须有 2008，因为我正在运行 vista，不支持 2012

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:31:50.723

您需要“Visual C++ 2008 速成版”。它的对应文件`vcsetup.exe`来自下载页面

# java - 为 int 设置半字节 - java

> ID：14427737
> 
> 赞同：1
> 
> 时间：2013-01-20T18:26:38.883
> 
> 标签：java, bit-manipulation

我必须使用 java 为整数设置半字节。老实说，我对如何将半字节转换/设置/更改为我想要的半字节感到困惑。我的 TA 告诉我它应该是大约 5 行代码，但我什至不知道如何启动它。任何帮助是极大的赞赏。

```
/* Examples:
 *     setNibble(0xAAA5, 0x1, 0); // => 0xAAA1
 *     setNibble(0x56B2, 0xF, 3); // => 0xF6B2
 * 
 * @param num The int that will be modified.
 * @param nibble The nibble to insert into the integer.
 * @param which Selects which nibble to modify - 0 for least-significant nibble.
 *            
 * @return The modified int.
 */
 public static int setNibble(int num, int nibble, int which) {
      // i know I will be using bit-wise operators but do not know how to use
      // them in this situation
      return 0;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T18:29:37.240

首先，您需要屏蔽要设置的半字节（使用按位*并* `&`执行此操作）。

然后设置半字节（移动到想要的位置）并使用按位*或* `|`设置半字节。

由于这看起来像家庭作业，我不会发布代码。

# c - CreateToolhelp32Snapshot 与 TH32CS_SNAPHEAPLIST 如何在 64 位和 32 位进程之间进行交互

> ID：14427744
> 
> 赞同：0
> 
> 时间：2013-01-20T18:27:33.490
> 
> 标签：c, winapi

我使用 TH32CS_SNAPHEAPLIST 标志调用 CreateToolhelp32Snapshot，然后使用（Heap32First/Heap32Next 遍历堆列表）。

这在为相同架构（32 位或 64 位）构建的进程之间似乎可以正常工作，但是在调用“内部架构”时我得到了奇怪的结果。这对于 32 位是有意义的，事实上它被记录在案：

如果指定进程是 64 位进程，而调用者是 32 位进程，则此函数失败，最后错误代码为 ERROR_PARTIAL_COPY (299)。我很欣赏这可能只是预期的行为，但我看不到它记录了相反的方向。

因此，对于 64 到 32 位，我将只看到 2 个堆用于返回 10 到 32 到 32 的进程。

我不知道这些是否是 wow64 正在使用的堆，但我的问题是：

**如何从 64 位进程中获取 32 位进程堆列表？**

有关堆差异的任何信息都将是一个奖励。

# android - 使用 shell 卸载

> ID：14427750
> 
> 赞同：-2
> 
> 时间：2013-01-20T18:27:55.730
> 
> 标签：android

我想在 shell 中使用命令卸载应用程序，命令是`adb uninstall com.example.android.softkeyboard`. 如何使用shell执行命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:34:28.737

只需打开一个命令行 (cmd)。键入 adb 以检查路径变量中是否有 adb。如果找不到该命令，您必须导航到您的 sdk/tools 文件夹。在那里您可以运行 adb 卸载命令。当然，您的手机必须已连接并被识别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T07:15:39.793

从命令行转到 adb.exe 所在的 adt 文件夹。

类型：
adb shell
pm uninstall com.package.name

完毕

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T18:30:17.283

打开终端，然后在其中键入该命令。当然，如果这是在 Android 上，您将不得不找到第三方程序来模拟终端。

您的问题也恰好含糊不清，因此这是我可以提供的最佳答案，直到您改进为止。

# php - FOSRestBundle : 使用 json 上传图片

> ID：14427752
> 
> 赞同：0
> 
> 时间：2013-01-20T18:28:17.553
> 
> 标签：php, json, symfony, symfony-2.1, fosrestbundle

我已经在 FOSRestBundle 上工作了一段时间了。我掌握了它（表单、验证、文档、网址......）。我希望能够使用 json 为用户上传图像。

我想我已经完成了 symfony 方面所需的一切，使用表单效果很好。我试图在之前的一些帖子中找出如何使用 json 指定图像，但我没有成功尝试它。

使用表单上传图片：

1 - 我得到图像

2 - 将其移动到正确的目录中

3 - 在数据库中添加文件的唯一名称

在我的用户实体类中，我有两个变量，一个是经典的“字符串”，一个是“文件”：

```
@Assert\File (maxSize="6000000", mimeType={"image/jpeg", "image/png", "image/gif"}) 
```

在我的 formType 中，我有：

```
->add('file', 'file') 
```

我想我只需要知道如何使用 symfony2 和 FOSRestBundle**指定 json 中的文件信息和数据**

有人有想法吗？

**编辑**：

我一直在四处寻找，我找到了课程：

```
Symfony\Component\HttpFoundation\File\UploadFile 
```

和

```
Symfony\Component\HttpFoundation\File\File 
```

但我仍然无法使它工作，任何人作为线索帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:36:11.380

最简单的方法是使用 base64_encode 和 decode 函数结合 file_get_contents 和 file_put_contents($this->getAbsolutePath(), $decoded);

如果您对此有任何疑问，请告诉我。

# java - eclipse、android中的html问题

> ID：14427759
> 
> 赞同：0
> 
> 时间：2013-01-20T18:28:47.770
> 
> 标签：java, android, html, eclipse

该程序中的所有内容都可以正常工作，除了 html。当我尝试使用^x或任何其他 html 代码时，代码根本不会格式化它。有任何想法吗？我通常让 html 工作。html 不适用于任一字符串数组。我知道我还没有为第二个字符串数组定义 html。它只是不适用于我认为可行的第一个字符串数组。

```
package wompa.pro;

import java.util.Random;
import android.app.Activity;
import android.os.Bundle;
import android.text.Html;
import android.text.SpannableStringBuilder;
import android.text.Spanned;
import android.text.style.StyleSpan;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.animation.AccelerateInterpolator;
import android.view.animation.Animation;
import android.view.animation.TranslateAnimation;
import android.widget.Button;
import android.widget.TextView;
import android.widget.ViewFlipper;

public class Flashcard extends Activity implements OnClickListener{

    View.OnTouchListener gestureListener;
    ViewFlipper flipper;
    String facts[] = {
//Calculus

"Product Rule: d/dx(fg)=",
"Quotient Rule: d/dx(f/g)=",
"(d/dx)c=",
"(d/dx)cx=",
"(d/dx)x<sup>n</sup>=",
"(d/dx)e<sup>x</sup>=",
"(d/dx)ln(x)=",
"(d/dx)a<sup>x</sup>=",
"(d/dx)log<sub>a</sup>x=",
"(d/dx)sin(x)",
"(d/dx)cos(x)",
"(d/dx)tan(x)",
"(d/dx)csc(x)",
"(d/dx)sec(x)",
"(d/dx)cot(x)",
"d/dx(arcsin(x))",
"d/dx(arccos(x))",
"d/dx(arctan(x))",
"d/dx(arccsc(x))",
"d/dx(arcsec(x))",
"d/dx(arccot(x))",
};

    String answers[] = {
//Biology ch. 9

"f'g+fg'",
"(f'g-fg')/g<sup>2</sup>",
"0",
"c",
"nx<sup>n-1</sup>",
"e<sup>x</sup>",
"1/x",
"a<sup>x</sup>lna",
"(1/x)(1/lna)",
"cos(x)",
"-sin(x)",
"sec<sup>2</sup>x",
"-cscxcotx",
"secxtanx",
"-csc<sup>2</sup>",
"1/(1-x<sup>2</sup>)<sup>1/2</sup>",
"-1/(1-x<sup>2</sup>)<sup>1/2</sup>",
"1/(1+x<sup>2</sup>)",
"-1/(1+x<sup>2</sup>)",
"1/(|x|(x<sup>2</sup>-1)<sup>1/2</sup>)",
"-1/(|x|(x<sup>2</sup>-1)<sup>1/2</sup>)",
 };

private Animation inFromRightAnimation() {

Animation inFromRight = new TranslateAnimation(
Animation.RELATIVE_TO_PARENT,  +1.0f, Animation.RELATIVE_TO_PARENT,  0.0f,
Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,   0.0f
);
inFromRight.setDuration(500);
inFromRight.setInterpolator(new AccelerateInterpolator());
return inFromRight;
}
private Animation outToLeftAnimation() {
Animation outtoLeft = new TranslateAnimation(
  Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,  -1.0f,
  Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,   0.0f
);
outtoLeft.setDuration(500);
outtoLeft.setInterpolator(new AccelerateInterpolator());
return outtoLeft;
}

private Animation inFromLeftAnimation() {
Animation inFromLeft = new TranslateAnimation(
Animation.RELATIVE_TO_PARENT,  -1.0f, Animation.RELATIVE_TO_PARENT,  0.0f,
Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,   0.0f
);
inFromLeft.setDuration(500);
inFromLeft.setInterpolator(new AccelerateInterpolator());
return inFromLeft;
}
private Animation outToRightAnimation() {
Animation outtoRight = new TranslateAnimation(
  Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,  +1.0f,
  Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,   0.0f
);
outtoRight.setDuration(500);
outtoRight.setInterpolator(new AccelerateInterpolator());
return outtoRight;
}

TextView display, display1;
TextView counter;
Button begin;
Button next;
Button previous;
Button random;
Random myRandom;
TextView tvResults;

int index = facts.length;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.main);

 flipper = (ViewFlipper) findViewById(R.id.flipper);
 Button button1 = (Button) findViewById(R.id.Button01);
 Button button2 = (Button) findViewById(R.id.Button02);
 TextView t = (TextView)findViewById(R.id.tvResults);

 button1.setOnClickListener(new View.OnClickListener() {
     public void onClick(View view) {
         flipper.setInAnimation(inFromRightAnimation());
         flipper.setOutAnimation(outToLeftAnimation());
         flipper.showNext();               
     }
 });

 button2.setOnClickListener(new View.OnClickListener() {
     public void onClick(View view) {
         flipper.setInAnimation(inFromLeftAnimation());
         flipper.setOutAnimation(outToRightAnimation());
         flipper.showPrevious();      
     }
 });

 display = (TextView) findViewById(wompa.pro.R.id.tvResults);
 display1 = (TextView) findViewById(wompa.pro.R.id.tvAnswers);
    counter = (TextView) findViewById(wompa.pro.R.id.tvCounter);

    next = (Button) findViewById(wompa.pro.R.id.Next);
    previous = (Button) findViewById(wompa.pro.R.id.Previous);
    random = (Button) findViewById(wompa.pro.R.id.Random);

    next.setOnClickListener(this);
    previous.setOnClickListener(this);
    random.setOnClickListener(this);

    myRandom = new Random();
    index++;
    if (index > facts.length - 1) {
        index = 0;
    }
    showDisplay();}

private void showDisplay() {
    Spanned span = Html.fromHtml(facts[index]);
    SpannableStringBuilder builder = new SpannableStringBuilder(span);
    int start = builder.nextSpanTransition(0, builder.length(), StyleSpan.class);
    int stop = builder.nextSpanTransition(start, builder.length(), StyleSpan.class);
    builder.setSpan(span, start, stop, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);
    display.setText(facts[index]);
    display1.setText(answers[index]);
    counter.setText(String.valueOf(index + 1) + "/"
            + String.valueOf(facts.length));
}

public void onClick(View arg0) {
    // TODO Auto-generated method stub
    switch (arg0.getId()) {
    case wompa.pro.R.id.Next:
        index++;
        if (index > facts.length - 1) {
            index = 0;
        }
        showDisplay();

        break;

    case wompa.pro.R.id.Previous:
        index--;
        if (index < 0) {
            index = facts.length - 1;
        }
        showDisplay();
        break;

    case wompa.pro.R.id.Random:
        index = (myRandom.nextInt(facts.length) - 1);
        if (index < 0) {
            index = facts.length - 1;
        }
        showDisplay();
        break;

    }

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:32:44.073

比我原来的答案更好 - 当你设置文本时，这样做

```
display.setText(Html.fromHtml(string)); 
```

这将为您构建跨度

# ruby-on-rails - 在我的 Rails 应用程序中使用 RSpec 测试失败

> ID：14427762
> 
> 赞同：0
> 
> 时间：2013-01-20T18:28:52.840
> 
> 标签：ruby-on-rails, rspec, tdd

我正在尝试运行此测试，但由于某种原因它失败了。

```
describe "User Pages" do
    subject { page }
    .
    .
describe "Sign up" do
    before { visit signup_path }

    let(:submit) { "Sign Me Up" }
    .
    .
 describe "with valid information" do
  before do
    fill_in "name",             with: "newuser"
    fill_in "Username",         with: "user254"
    fill_in "Email",            with: "user@yahoo.com"
    select  "Male",             from: "gender"        
    fill_in "Password",         with: "password"
    fill_in "Confirm Password", with: "password"
  end

  it "Should create a user" do
    expect { click_button submit}.to change(User, :count).by(1)
  end   
end 
```

但是，当我运行测试时，出现此错误

```
Failures:

  1) User Pages signup with valid information Should create a user
      Failure/Error: expect { click_button submit}.to change(User, :count).by(1)
       count should have been changed by 1, but was changed by 0
      # ./spec/requests/user_pages_spec.rb:35:in `block (4 levels) in <top (required)>'

      Finished in 4.61 seconds
      35 examples, 1 failure

      Failed examples:

      rspec ./spec/requests/user_pages_spec.rb:34 # User Pages signup with valid information Should create a user 
```

这是我在控制器中的创建操作

```
def create
   @user = User.new(params[:user])
   if @user.save
     redirect_to @user
   else
     render 'new'
   end
end 
```

当我尝试在浏览器中注册时，注册成功。我的测试有什么问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:54:38.770

检查用户是否被保存在控制器上：

```
def create
   @user = User.new(params[:user])
   puts "valid? = #{@user.valid?.inspect}"
   if @user.save
     puts 'saved!'
     redirect_to @user
   else
     puts 'not saved'
     puts @user.errors.inspect
     render 'new'
    end
end 
```

这将打印控制器进程，你会知道发生了什么

如果什么都没有打印，那么问题是一些 before_filter 阻止了创建操作被调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:04:26.530

试试看

```
it "Should create a user" do
    click_button submit
    User.count.should == 1
  end 
```

# python - “意外的 SeqBase 长度”来自 matplotlib 的 backend_agg.py

> ID：14427769
> 
> 赞同：0
> 
> 时间：2013-01-20T18:29:49.777
> 
> 标签：python, graph, matplotlib, cygwin, networkx

我正在尝试使用*pylab*和*networkx* 来绘制有向图。

下面是一个小演示脚本及其产生的错误（并且 pylab 创建的窗口是空的）。

谷歌搜索显示这个错误应该在 2008 年已经在 mathplotlib 的 svn 中修复。

**任何人都可以指出我正确的方向吗？**

这个脚本：

```
import pylab
import networkx as nx

def Working_with_graphs_using_networkx():
    fig = pylab.figure()
    g = nx.Graph(name = "graph")
    pylab.title(g.name)
    g.add_node("John")
    g.add_node("Maria")
    g.add_edge("John", "Maria")
    pos = nx.spring_layout(g)
    nx.draw(g, pos)

if __name__ == "__main__":
    Working_with_graphs_using_networkx()
    pylab.show() 
```

产生此错误（在 cygwin 下的 Python 2.6 上）：

```
$ python demo_SeqBase.py
Exception in Tkinter callback
Traceback (most recent call last):
  File "/usr/lib/python2.6/lib-tk/Tkinter.py", line 1410, in __call__
    return self.func(*args)
  File "/usr/lib/python2.6/site-packages/matplotlib/backends/backend_tkagg.py", line 236, in resize
    self.show()
  File "/usr/lib/python2.6/site-packages/matplotlib/backends/backend_tkagg.py", line 239, in draw
    FigureCanvasAgg.draw(self)
  File "/usr/lib/python2.6/site-packages/matplotlib/backends/backend_agg.py", line 401, in draw
    self.figure.draw(self.renderer)
  File "/usr/lib/python2.6/site-packages/matplotlib/artist.py", line 55, in draw_wrapper
    draw(artist, renderer, *args, **kwargs)
  File "/usr/lib/python2.6/site-packages/matplotlib/figure.py", line 884, in draw
    func(*args)
  File "/usr/lib/python2.6/site-packages/matplotlib/artist.py", line 55, in draw_wrapper
    draw(artist, renderer, *args, **kwargs)
  File "/usr/lib/python2.6/site-packages/matplotlib/axes.py", line 1983, in draw
    a.draw(renderer)
  File "/usr/lib/python2.6/site-packages/matplotlib/artist.py", line 55, in draw_wrapper
    draw(artist, renderer, *args, **kwargs)
  File "/usr/lib/python2.6/site-packages/matplotlib/collections.py", line 238, in draw
    self._linewidths, self._linestyles, self._antialiaseds, self._urls)
  File "/usr/lib/python2.6/site-packages/matplotlib/backends/backend_agg.py", line 84, in draw_path_collection
    return self._renderer.draw_path_collection(*kl, **kw)
IndexError: Unexpected SeqBase<T> length. 
```

# java - 为什么我的 FPS 下降？

> ID：14427772
> 
> 赞同：1
> 
> 时间：2013-01-20T18:29:52.693
> 
> 标签：java, android, frame-rate

它仅在单击对象并需要从列表中删除时才会下降。这是代码：

```
if(event.type == TouchEvent.TOUCH_DOWN){
            for(Bottle bottle : new ArrayList<Bottle>(bottles)){
                if(bottle.position.dist(touchPoint) < 40 ){
                    bottles.remove(bottle);
                    if(bottle.type == Bottle.BOTTLE){
                        score+=10;
                        Assets.playSound(Assets.beeropenSound);
                    }
                    else if (bottle.type == Bottle.BOTTLE30){
                        score+=30;
                        Assets.playSound(Assets.beeropenSound);
                    }
                    else if (bottle.type == Bottle.GLASS_OF_BEER){
                        score+=5;
                        Assets.playSound(Assets.pourbeerSound);
                    }
                    else if (bottle.type == Bottle.WATER_BOTTLE){
                        score-=50;
                    }

                    // burping
                    if (score % 200 == 0 && score > 1){
                        Assets.playSound(Assets.burpSounds[burp]);
                    }
                    break;
                }
            } 
```

，这是 fps 日志：

```
01-20 19:18:19.629: D/FPS(27501):  59
01-20 19:18:20.639: D/FPS(27501):  59
01-20 19:18:21.639: D/FPS(27501):  49
01-20 19:18:22.649: D/FPS(27501):  59
01-20 19:18:23.669: D/FPS(27501):  60
01-20 19:18:24.669: D/FPS(27501):  59
01-20 19:18:25.689: D/FPS(27501):  60
01-20 19:18:26.699: D/FPS(27501):  43
01-20 19:18:27.719: D/FPS(27501):  60
01-20 19:18:28.739: D/FPS(27501):  60
01-20 19:18:29.759: D/FPS(27501):  60 
```

我尝试删除这些东西，但事实并非如此：

*   移除音效
*   删除流媒体背景音乐（3mb mp3 文件）
*   删除 ArrayList 的副本，迭代真正的瓶子列表并将应该删除的内容添加到另一个列表中，然后从瓶子列表中删除该列表
*   Assets.burpSounds[burp] : burp 是使用 Random java mudle 随机生成的局部变量。我删除了（打嗝在构造函数中）它没有用......

剩下一件事——垃圾收集器。这是我的fps下降的原因吗？我怎么能确定？如何对抗这些敌人？

正如我之前所说，它**仅**在执行此代码块时才会下降。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:50:58.307

我认为它也是 GC，我会在瓶子列表上添加一个标志，告诉对象它被“删除”而不是实际删除它，从而避免 gc。

编辑：你为什么要在每次触摸时创建一个新的数组列表？它不应该只是：

```
for( Bottle bottle : bottles ) {...} 
```

# ruby-on-rails - Rails 设计不适用于本地主机上的 rails 3.2.1

> ID：14427776
> 
> 赞同：0
> 
> 时间：2013-01-20T18:30:13.503
> 
> 标签：ruby-on-rails, devise, ruby-on-rails-3.2, rails-routing

我按照本教程中讨论的设计在我的本地主机上工作的每一步 - [http://www.slideshare.net/wleeper/devise-and-rails](http://www.slideshare.net/wleeper/devise-and-rails) `upto page 8 of 22`并且我期待与上面提到的相同的用户登录表单第 8 页，但除此之外，我收到此错误 -

如果我保留在 routes.rb 文件中的评论，

**# 匹配 ':controller(/:action(/:id))(.:format)'**

然后这个消息标志 -

![错误 1](../Images/e657f5f33ea5a0e0ea9edf2be3227c2c.png)

当我取消注释此行时，它会显示此错误-

![错误 2](../Images/f13a5dd330adb4b3a747ebbdb1a9152b.png)

因为我来自 PHP 背景，所以对 Rails 的了解很少，但在理论之前仍然尝试一些实际测试，所以让我知道我到底做错了什么。

我的 routes.rb 文件 -

```
Prjmgt::Application.routes.draw do
  devise_for :users

  # The priority is based upon order of creation:
  # first created -> highest priority.

  # Sample of regular route:
  #   match 'products/:id' => 'catalog#view'
  # Keep in mind you can assign values other than :controller and :action

  # Sample of named route:
  #   match 'products/:id/purchase' => 'catalog#purchase', :as => :purchase
  # This route can be invoked with purchase_url(:id => product.id)

  # Sample resource route (maps HTTP verbs to controller actions automatically):
  #   resources :products

  # Sample resource route with options:
  #   resources :products do
  #     member do
  #       get 'short'
  #       post 'toggle'
  #     end
  #
  #     collection do
  #       get 'sold'
  #     end
  #   end

  # Sample resource route with sub-resources:
  #   resources :products do
  #     resources :comments, :sales
  #     resource :seller
  #   end

  # Sample resource route with more complex sub-resources
  #   resources :products do
  #     resources :comments
  #     resources :sales do
  #       get 'recent', :on => :collection
  #     end
  #   end

  # Sample resource route within a namespace:
  #   namespace :admin do
  #     # Directs /admin/products/* to Admin::ProductsController
  #     # (app/controllers/admin/products_controller.rb)
  #     resources :products
  #   end

  # You can have the root of your site routed with "root"
  # just remember to delete public/index.html.
  # root :to => 'welcome#index'
    root :to => 'home#index'

  # See how all your routes lay out with "rake routes"

  # This is a legacy wild controller route that's not recommended for RESTful applications.
  # Note: This route will make all actions in every controller accessible via GET requests.
   match ':controller(/:action(/:id))(.:format)'
end 
```

只需运行一个`rake routes`命令并找到这个 -

![耙路线](../Images/e30e606440be3f24a46a061c1f88cc0c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:00:23.557

您正在访问错误的网址..您应该尝试使用

```
http://application/users/login 
```

您没有正确的根网址，例如

```
root :to => redirect("/users/login") 
```

# r - 如何在面板数据回归中处理 NA？

> ID：14427781
> 
> 赞同：9
> 
> 时间：2013-01-20T18:30:40.213
> 
> 标签：r, na, predict, plm, panel-data

我试图预测包含`NA`s 的数据的拟合值，并基于由`plm`. 这是一些示例代码：

```
require(plm)
test.data <- data.frame(id=c(1,1,2,2,3), time=c(1,2,1,2,1), 
   y=c(1,3,5,10,8), x=c(1, NA, 3,4,5))
model <- plm(y ~ x, data=test.data, index=c("id", "time"), 
       model="pooling", na.action=na.exclude)
yhat <- predict(model, test.data, na.action=na.pass)
test.data$yhat <- yhat 
```

当我运行最后一行时，我收到一条错误消息，指出替换有 4 行，而数据有 5 行。

我不知道如何预测返回长度为 5 的向量...

如果`plm`我不运行 a 而不是运行`lm`（如下行），我会得到预期的结果。

```
model <- lm(y ~ x, data=test.data, na.action=na.exclude) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T19:23:37.037

我认为这是`predict.plm` *应该*为你处理的事情——似乎是对包作者的疏忽——但你可以用`?napredict`它来自己实现它：

```
 pp <- predict(model, test.data)
 na.stuff <- attr(model$model,"na.action")
 (yhat <- napredict(na.stuff,pp))
 ## [1] 1.371429       NA 5.485714 7.542857 9.600000 
```

# css - CSS 向右对齐到 IE6

> ID：14427786
> 
> 赞同：-3
> 
> 时间：2013-01-20T18:31:18.767
> 
> 标签：css, internet-explorer-6

我需要将对象向右对齐。我让它在除 IE6 之外的所有浏览器上都能正常工作。如何在 css 中完成这项工作？这是我的CSS：

```
.object {
position:fixed;
right:0;
left:auto;
} 
```

我的问题是：如何通过编辑 css 文件将对象对齐到 IE6 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:58:20.447

正如 Moose 所解释的，固定定位在 IE6 中不起作用。正如他所介绍的，您必须对 IE6 使用绝对定位。

比 HTML 条件注释更好，我建议使用`* html`hack 来隔离只有 IE 才能看到的 CSS 属性。这更优雅，并允许您在 CSS 文件中保持代码清洁和排序。

问题是，如果您`.myclass { /* css properties */ }`的样式表中有，并且稍后`* html .myclass { /* css properties */ }`，在两个块中定义的属性将在第二个块中被所有浏览器忽略（这是因为选择器的属性是相同的，并且它位于之后在文件中）。但是 Internet Explorer 计算属性的方式不同，`* html`在选择器中实际上确实赋予了它更高的属性。

这样，您可以拥有这种代码：

```
.myclass {
    position: fixed;
    right: 0;
}

* html myclass {
    /* Only IE */
    position: absolute;
} 
```

[此处](http://ryanfait.com/resources/fixed-positioning-in-internet-explorer/)解释了完整的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:38:16.763

不幸`position:fixed`的是，在 IE6 中无法识别，但您可以进行修复。

尝试将此作为条件注释添加到您的 HTML 中。

```
<!--[if IE 6]>
    html, body {
        height: 100%;   
        overflow: auto; 
        }
    body .object {
        position: absolute;
        bottom: 0;
        }
<![endif]--> 
```

# java - 如何在达到 OutOfMemoryError 之前启动新的 GAE 实例

> ID：14427787
> 
> 赞同：0
> 
> 时间：2013-01-20T18:31:20.507
> 
> 标签：java, google-app-engine

我们如何避免 OutOfMemoryError 异常？

App Engine 调度程序根据响应时间启动实例，但我们需要在现有实例超出其内存配额时启动新实例。

我们的 GAE 实例处理不同文件大小的多个并发上传请求。每当一个实例处理太多并发上传（使用堆空间来复制上传的字节）时，该实例就会崩溃并出现 java.lang.OutOfMemoryError: Java heap space。

我们已经看到其他帖子建议使用具有更多内存的实例类或使用后端。但是我们必须转移到后端来避免这种情况吗？或者有没有办法鼓励普通的 GAE 实例调度程序不要向接近内存限制的实例发送新请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:03:18.210

请改用[blobstore 上传处理程序](https://developers.google.com/appengine/docs/java/blobstore/overview#Uploading_a_Blob)。上传首先通过 blob 上传处理程序，该处理程序剥离 blob 数据并将其保存到 blobstore，然后调用您的处理程序（并传递保存的 blob 密钥和其他请求数据）。

这有两个优点：

1.  您的前端不涉及处理 blob 数据，因此这不应产生 OOM 错误。

2.  上传可以大于 32Mb，否则对于所有前端请求都是限制的。

# c# - 在 C# 中使用正则表达式检索数据

> ID：14427797
> 
> 赞同：0
> 
> 时间：2013-01-20T18:31:51.413
> 
> 标签：c#, regex

数据：

```
<tr>
<td>
<a href="somelink">
some. .data...
</a>
</td>
<td>Black</td>
<td>57234</td>
<td>5431.60</td>
<td><font class="down">  -125.02</font></td>
</tr><tr>
<td>
<a href="somelink">
some. .data...
</a>
</td>
<td>Blue</td>
<td>57234</td>
<td>5431.60</td>
<td><font class="up">  -125.02</font></td>
</tr><tr>
<td>
<a href="somelink">
some. .data...
</a>
</td>
<td>Brown</td>
<td>57234</td>
<td>5431.60</td>
<td><font class="down">  -125.02</font></td>
</tr>
...more data... 
```

我想提取一些。。数据...'; '黑色的'; '57234'; '5431.60'; 一次。[第五个`td`数据不是必需的。]

最初，

```
<tr><td><a.*>([a-zA-Z0-9 -]+)</a></td><td>(\w+)</td><td>([\d]+\.\d+)</td><td>(\d+\.\d+)</td> 
```

正在工作。（通过命中和未命中方法）

但是，现在它坏了。

现在，当我使用`<td>(.*)</td>`or时，它会显示每个 tr 中`<\w+>(.*)</\w+>`最后四个 s 的数据。`td`但是，为什么它不会显示`<a href...>...</a>`，我怎样才能得到我想要的数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T18:37:43.310

通常，正则表达式是[解析 HTML 的不好方法](https://stackoverflow.com/a/1732454/1583)。

我建议查看[HTML Agility Pack](http://html-agility-pack.net/?z=codeplex)或[CsQuery](https://github.com/jamietre/CsQuery)，它们是专门为 .NET 构建的 HTML 解析器。

HTML Agility Pack 可以使用 XPath 和 LINQ 进行查询，而 CsQuery 使用 jQuery 选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:08:13.313

如果你使用真正的 html 解析器，你的代码会更简单，更容易维护

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);

var table = doc.DocumentNode.Descendants("tr")
           .Select(tr => tr.Descendants("td").Select(td => td.InnerText).ToList())
           .ToList(); 
```

鉴于您提供的示例 html，上面的代码将返回 3 行，每行包含 5 列。

# jsf-2 - icefaces ace 数据表：过滤框：如何过滤基于日期的表达式

> ID：14427800
> 
> 赞同：0
> 
> 时间：2013-01-20T18:32:08.047
> 
> 标签：jsf-2, icefaces-3

我正在使用icefaces 3.2。我想知道如何根据在过滤框中输入的值范围来制作 ace:datatable 过滤器的过滤器。例如，对于具有双值的数据表的价格列，我想在过滤器框中输入一个范围，例如“>1000”，过滤器应该过滤它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T22:30:42.307

好的，我看到您的主题和您的问题完全不同。但就过滤“基于日期的表达式”而言，Icefaces 不提供除字符串格式之外的过滤支持。所以，这是我为完成这项工作所做的一种解决方法。

在你的 .xhtml 标记中：

1.  为对应的ace数据表添加属性`constantRefilter= "true"`。
2.  对于日期列：

    ```
    <ace:column id="scanDateColumn" filterBy="#{row.scanDate}"
    filterValue="#{mainReport.scanDateFilter}" filterMatchMode="exact">
    <f:facet name="header">
    Scan Date
    <ace:dateTimeEntry id="scanDate" timeZone="#{mainReport.timeZone}"
    value="#{mainReport.scanCalenderDate}" pattern="MM/dd/yyyy" renderAsPopup="true>
    <ace:ajax event="dateSelect" listener="#{mainReport.dateSelected}"/>
    </ace:dateTimeEntry>
    </f:facet>
    <h:outputText value="#{row.scanDate}" />
    </ace:column> 
    ```

3.  所以，在你这样做之后，你应该有相应的 bean 值，以及相应的 getter 和 setter。现在在 Bean 中：您的侦听器如下所示：

    ```
    public void dateSelected(DateSelectEvent e) throws ParseException {

           setScanDateFilter(dateFormatForFilter(e.getDate()));
    } 
    ```

好的，这里，`dateFormatForFilter(Date d)`是一种将日期转换为自定义格式的字符串的方法。原因是，您在列上看到的 filterValue 仅接受字符串格式，而 ace 数据条目的值是日期格式。因此，基本上，在该日期框中选择的任何内容都将设置为 filterValue，因此它将被选定的值过滤。

如果您不希望自动显示该过滤器框，请在 dataEntry 框下方，为上列添加一个属性为：`filterStyle="display:none"`，这将处理它。所以现在你可以看到这样的东西：

我本可以附上生成的屏幕截图，但 stackoverflow 不允许我这样做。所以，让我知道这是否有意义。

# java - GWTQuery 实时模糊不起作用

> ID：14427804
> 
> 赞同：1
> 
> 时间：2013-01-20T18:32:19.143
> 
> 标签：java, jquery, gwt, gwtquery

以下代码会在每次后续点击 2nd 时附加一个新元素`div`。每次添加时，焦点都设置在添加的元素上，以便为`blur`方法做好准备（我设置`tabIndex`属性只是为了这个目的）。

但是，在新元素外部单击时，没有任何反应，即使应该有一个弹出窗口。谁能告诉我这段代码有什么问题？

```
 public void onModuleLoad() {
        VerticalPanel vert = new VerticalPanel(); 
        String foo = "<div id ='foo'>Foo</div>";
        $("#bodywrapper").append(foo);
        $("#bodywrapper").append("<div id ='boo'>Boo</div>");
        $("#boo").click(new Function() {
            public boolean f(Event e) {
//              Window.alert("foo");
                $("<div id ='goo' tabIndex = '1'>Boo</div>").appendTo("#bodywrapper").focus();
                return true;
            }
        });
        $("#goo").live("blur", new Function() {
            public boolean f(Event e) {
                Window.alert("Foo");
                return true;
            }
        });
        RootPanel.get().add(vert);

      }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:40:05.717

blur 和 focus 事件不适用于事件委托（实时或委托方法），因为它们不是冒泡事件。jQuery为此引入了特殊事件focusout和focusin。但是 GwtQuery 还不支持它们。[请在那里](http://code.google.com/p/gwtquery/issues/list)打开一个问题，它们将被实施

# linux - 您在 CentOS 中的 Apache 中没有权限错误

> ID：14427808
> 
> 赞同：6
> 
> 时间：2013-01-20T18:32:43.850
> 
> 标签：linux, apache, centos, chmod, document-root

我在 centos 6 中安装了 apache 2.2。当 apache 文件夹位于其默认位置时，一切正常`/var/www/html`。然后我在我的用户主文件夹中配置了一个虚拟主机。之后，`Forbidden You don't have permission error`当我尝试进出`localhost`浏览`127.0.0.1`器时，apache 开始显示。

这是我在 httpd.conf 中使用的代码

```
<VirtualHost *:80>
        DocumentRoot "/home/anjan/workspace/mfs"
        ServerName anjan-centOS
        <Directory "/home/anjan/workspace/mfs">
                Options Indexes FollowSymLinks MultiViews
                AllowOverride All
                Order Deny,Allow
                Allow from all
        </Directory>
</VirtualHost> 
```

正如一些文章中提到的那样，我也禁用`SElinux`了，但徒劳无功。如果有人可以帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T07:48:05.143

我解决了这个问题。在干预了系统的权限后，我发现`user "anjan"`who is owner`/home/anjan`拥有读/写/执行权限，`/home/anjan`但`group "anjan"`创建时`user "anjan"`创建的 , 根本没有任何权限。

```
ls -l /home/ 
```

显示

```
drwx------. 28 anjan anjan 4096 Jan 21 13:19 anjan 
```

所以我用这个命令改变了权限

```
chmod -R 770 /home/anjan
ls -l /home/
drwxrwx---. 28 anjan anjan 4096 Jan 21 13:19 anjan 
```

我发现我的 apache 是在哪个用户下从[这个](https://stackoverflow.com/questions/2509334/finding-out-what-user-apache-is-running-as)线程运行的。它在下面运行`user "apache"`

所以我添加`user "apache"`了`group "anjan"`这个命令。

```
usermod -G anjan,apache apache 
```

在那之后瞧。没有更多的**禁止**错误。

PS我以root用户身份做了所有事情。

**更新** 现在提供的链接似乎已损坏。[这](https://stackoverflow.com/q/4317156/1682148)是另一个。

为了安全起见（避免将来断开链接），请在此处复制命令。在终端类型 -

```
ps axo user,group,comm | grep apache 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-20T17:31:17.220

这是（至少对我而言）一个值得怀疑的设计。这基本上意味着 Apache 用户拥有对该用户所有文件的 WRITE 访问权限，包括诸如 ssh-keys 之类的秘密。

如果破解者攻击 apache，那就不好玩了。

一个简单的修改是在运行为“anjan”时：

```
chmod -R g-rwx ~ # undo the unsafe -R first
chmod g+rx ~ ~/workspace
chmod -R g+rx ~/workspace/mfs 
```

If`apache`是“anjan”组的成员。

如果文件系统支持，我的建议是使用 ACL:s。

SELinux 现在运行了吗？应该是这样，如果 SELinux 策略阻止 apache 访问`workspace/mfs`来自 sealert 的许多消息的情况仍然如此，那么在 var/log/messages 中应该很明显。这个问题通常可以通过明智地使用 setsebol 来解决。

禁用 SELinux，因为某些东西不起作用并推荐该方法是 njaa....

最初的问题是 apache 自己运行，因此在计算权限时被归为其他类别。

```
chmod o+rx ~anjan/ ~anjan/workspace/ ~anjan/workspace/mfs 
```

应该足够了。

CentOS 6 是 RedHat Enterprise Linux 的免费（如免费啤酒）版本，因此 RedHat 的文档[https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Managing_Confined_Services/](https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Managing_Confined_Services/)是必需品.

# operating-system - 在所有主要操作系统上都可用的内置脚本语言？

> ID：14427811
> 
> 赞同：4
> 
> 时间：2013-01-20T18:32:49.950
> 
> 标签：operating-system, platform, universal, built-in, scripting-language

有谁知道大多数平台（比如 Mac/Windows/Linux）都包含的脚本语言？我一直找不到。到目前为止，Web 浏览器中的 javascript 或已编译的 java 都是关于它的。Jython 接近了。

我的目标是能够从 Web 或便携式存储下载文件并运行它，而无需先安装某些东西，或拥有特殊的用户权限，或编辑它，或重命名它，或赋予它可执行权限。它将使您可以访问计算中普遍接受的隐喻：输入、输出、持久存储、时间、生成任务、套接字、定点和浮点数学、unicode 等。理想情况下，它将抽象出行尾、字节序和产生等细节对于其他进程。

我不想解释为什么拥有通用语言/虚拟机很重要，或者至少是有用的。我觉得我们缺少操作系统级别之上的中间件，类似于 POSIX 但不那么深奥，没有它，我们都被迫花费不成比例的时间重新发明轮子或编写特殊情况。对我来说，可用性和完整的功能集比速度（可能会在以后出现）更重要。

提前感谢您提供的任何见解，

扎克·莫里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T22:15:08.030

您将能够在几乎所有的 unix 系统上运行精心编写的 sh 脚本。

如果你想添加微软系统，那么它会更困难，但仍然可以提供一个脚本文件，它将“自动检测”它正在运行的解释器，并在 sh 部分和 command.com 或它们拥有的任何东西之间进行选择微软系统。

一旦您可以在已知系统上运行脚本，您就可以进一步下载或解压并自动安装您需要的任何软件。

# eclipse - Eclipse egit mylyn 工作流程

> ID：14427812
> 
> 赞同：1
> 
> 时间：2013-01-20T18:32:57.340
> 
> 标签：eclipse, egit, mylyn

使用 eclipse、egit 和 mylyn 任务的推荐工作流程是什么？

我有一个项目，我想创建多个具有相应 mylyn 任务的功能分支。分支将在实现时与主分支合并。问题是 mylyn 不会在任务切换时切换分支。

我是否必须使用 mylyn 任务或 git 分支？或者有没有办法同时使用两者。

# android - 是否可以从我的网站下载应用程序

> ID：14427815
> 
> 赞同：-1
> 
> 时间：2013-01-20T18:33:10.947
> 
> 标签：android

如您所知，如果用户单击下载链接，我将从我的服务器下载应用程序。当然，对于安装，用户将接受安装它。因此，我想知道；

*   是否可以从我的服务器下载软件包？如果是怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T18:38:20.313

是的，有可能。确保您已将服务器配置为使用适当的 mime 类型。

```
AddType application/vnd.android.package-archive .apk 
```

或者

```
<a href="apk location" type="application/vnd.android.package-archive">Download App</a> 
```

[要在您的应用程序中下载 apk，您可以在此处](https://github.com/RaghavSood/AppaholicsUpdateChecker/)使用我的开源库。虽然它用于检查和下载更新，但您也可以使用它来下载其他 apk 文件（或任何其他文件）。

在您的活动中，将以下代码添加到您的 onCreate()。如果您不想要 toast 通知，请将第二个参数更改为`false`：

```
UpdateChecker checker = new UpdateChecker(this, true); 
```

然后，使用以下内容下载并安装更新。请注意，这将在下载时显示一个进度对话框：

```
checker.downloadAndInstall("URL with http:// to the location of the update apk"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T18:35:11.963

如果 Android 框架下载了一个 .apk 文件，它会询问您是否要安装它。就那么简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T18:40:42.423

这是下载apk文件的代码：

```
String fileName="yourApk.apk";
try 
{
    File root = android.os.Environment.getExternalStorageDirectory();
    File dir = new File (root.getAbsolutePath()+"/DownloadedApk/");
    if(dir.exists()==false) 
    {
         dir.mkdirs();
    }
    URL url = new URL("http://www.example.com/apk/yourApk.apk"); 
    URLConnection ucon = url.openConnection();
    InputStream is = ucon.getInputStream();
    FileOutputStream fos = new FileOutputStream(dir+"/"+fileName);
    byte data[] = new byte[1024];
    long lenghtOfFile=ucon.getContentLength();
    int count = 0;
    long total = 0;
    int progress = 0;
    while (((count=is.read(data)) != -1))
    {
        total += count;
        int progress_temp = (int) ((int)total*100/lenghtOfFile);
        if(progress_temp%10 == 0 && progress != progress_temp)
        {
            progress = progress_temp;
            publishProgress(progress);    
        }
        fos.write(data, 0, count);
    }
    is.close();
    fos.close();
} catch (Exception e) 
{
    Log.d("DownloadManager", "Error: " + e);
} 
```

# amazon-ec2 - 动态创建的 EC2 实例上的 PostgreSQL 配置设置

> ID：14427816
> 
> 赞同：0
> 
> 时间：2013-01-20T18:33:19.960
> 
> 标签：amazon-ec2, ec2-ami

首先让我说我认为有比我现在做的更好的做事方式......所以，请不要发表评论和回答说我应该使用不同的技术等。我有一个“合理”的具体问题。

一点背景：

基本上，我有一个系统，我每天都在处理大量不同但相当结构化的数据馈送（CSV 文件）。这是一个相当通用的 ETL 类型的系统。我开始编写 Python 脚本来在内存中完成这一切。但是，我发现我正在编写大量代码来检查和执行可以很容易地由 db 模式描述的规则。因此，我有一系列 SQS 队列（每个源一个），其中包含要处理的文件位置（在 s3 上）和要加载的 PostgreSQL 数据库脚本。哈基？是的; 大概。但是，在某种程度上，在 PostgreSQL 中定义所有规则非常容易。至少对于拥有大约 15 年 RDBMS 经验的我来说（那句老话是什么，当你只有一把锤子时，一切看起来都像钉子？）

所以，一切都很好。但是，在创建 EC2 实例时，我可以选择 image_id 和类型/大小。我有我使用的基本“PostgreSQL 工作人员映像”，但它确实适用于一种尺寸（微型）。

但是，现在我正在考虑尝试玩一下，看看如果我选择中小型，我可以获得什么样的收益。我最初的想法是，我将创建单独的 image_ids，并使用适合它们的 postgres conf 设置。不过，好像有点乱。（但是，整个事情有点混乱和hacky）

*鉴于*我所拥有的，有没有比单独的 AMI 更好的方法来实现这一点？

最后注意事项：

我的 AMI 都是 PostgreSQL 9.1 和 Ubuntu 12.04。数据库只是临时存储。它们仅在加载/处理/输出数据所需的 15 或 20 分钟内存在。

如果您觉得这个问题可以在 SE 的 DBA 网站上得到更好的回答，请随时添加评论。我通常从 StackOverflow 开始，因为它是一个更大的社区，而且它是一个让我感觉更自在的社区。我更像是一名开发人员，而不是一名 DBA。

# url - 所有顶级域的列表

> ID：14427817
> 
> 赞同：17
> 
> 时间：2013-01-20T18:33:20.930
> 
> 标签：url, tld, country-codes

我发现很多线程解释如何以两个或三个字母格式获取国家代码，但没有适合我的任务。我正在寻找一种方法来获取数组或其他东西中的所有顶级域。我知道 C# 中有 CultureInfo 类，但它可以列出国家代码。它不包括通用 TLD，例如：“com”。[这是我找到的国家代码的完整列表](http://ftp.ics.uci.edu/pub/websoft/wwwstat/country-codes.txt)。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-21T17:33:53.500

所有TLD的权威列表：[http ://www.iana.org/domains/root/db](http://www.iana.org/domains/root/db)

> 根区数据库代表顶级域的授权详细信息，包括 gTLD（如`.com`.）和国家代码 TLD（如`.uk`.

您也可以将其作为 TXT 获取（更易于解析）：http: [//data.iana.org/TLD/tlds-alpha-by-domain.txt](http://data.iana.org/TLD/tlds-alpha-by-domain.txt)

* * *

维基百科也列出了所有的顶级域名，但它当然不是权威的：[互联网顶级域名列表](http://en.wikipedia.org/wiki/List_of_Internet_top-level_domains)

* * *

Mozilla 基金会为*有效*的顶级域维护了一个[公共后缀列表](http://en.wikipedia.org/wiki/Public_Suffix_List)，即您可以在其下直接注册名称的那些（例如代替）：[http ://publicsuffix.org/](http://publicsuffix.org/)*`.co.uk``.uk`*

 ** * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-12-20T23:49:03.260

我喜欢使用这个列表（它包括私有 TLD）：[http](http://mxr.mozilla.org/mozilla-central/source/netwerk/dns/effective_tld_names.dat?raw=1) ://mxr.mozilla.org/mozilla-central/source/netwerk/dns/effective_tld_names.dat?raw=1 。对我来说，这是我能找到的最完整的列表，而且是纯文本格式。*

# css - 如何使用 CSS 创建不透明的底层？

> ID：14427821
> 
> 赞同：0
> 
> 时间：2013-01-20T18:33:44.020
> 
> 标签：css

我正在尝试使用 CSS 添加不透明的底层。

你能帮我理解我做错了什么吗？

CSS

```
popUp#translucent{
    width: 400px;
    height: 100px;
    background-color: black;
    margin-left: auto;
    margin-right: auto;
    position:fixed;
    opacity: .4;
}

popUp#content{
width:400px;
height: 100px;

}
#popContainer{
width: 400px;
height: 100px;
display: visible;
position: fixed;
z-index: 1000;
} 
```

HTML

```
<div id="popContainer">
    <popUp id="translucent"></popUp>
    <popUp id = "content">
        <button class="btn large btn-custom" data-h="193" data-s="32" data-l="64" ,="" data-p="15">Alpha</button>
    </popUp>
</div> 
```

[http://jsfiddle.net/CeRX3/](http://jsfiddle.net/CeRX3/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:56:38.780

这是一种使用 CSS 为按钮创建底图的方法。

请检查使用 w3 学校的代码制作的[小提琴。](http://jsfiddle.net/NejiHyuga/CeRX3/4/)

**html**

```
<div class="background">
    <div class="transbox">
    <p>This is some text that is placed in the transparent box.
    This is some text that is placed in the transparent box.
    This is some text that is placed in the transparent box.
    This is some text that is placed in the transparent box.
    This is some text that is placed in the transparent box.
    </p>
    </div>
    </div> 
```

**css**

```
div.background
  {
  width:500px;
  height:250px;
  background:url(http://www.w3schools.com/css/klematis.jpg) repeat;
  border:2px solid black;
  }
div.transbox
  {
  width:400px;
  height:180px;
  margin:30px 50px;
  background-color:#ffffff;
  border:1px solid black;
  opacity:0.6;
  }
div.transbox p
  {
  margin:30px 40px;
  font-weight:bold;
  color:#000000;
  } 
```

您可以使用上面的代码。CSS中的不透明度存在这个问题。

CSS 不透明度的问题 当我们将子元素添加到这段代码影响的 html 元素时，就会出现问题。所有子元素都将继承相同的不透明度设置，即使您尝试为所有这些元素指定完全不透明度（无论如何都太麻烦了）。

[Hacky 解决方案](http://www.impressivewebs.com/css-opacity-that-doesnt-affect-child-elements/) 我们如何解决这个问题？在某些情况下，您可以使用绝对定位在视觉上模拟元素之间的父子关系，这将解决问题。然后，如果您想解决您的问题，那么您可能必须为此目的使用一种变通方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:46:27.537

在半透明中将背景颜色更改为灰色并将不透明度更改为 0.1。它看起来更半透明。

# xna-4.0 - MonoGame：绘制用户图元时，某些 VertexColorPosition 消失（DrawUserPrimitives）

> ID：14427825
> 
> 赞同：0
> 
> 时间：2013-01-20T18:34:22.617
> 
> 标签：xna-4.0, primitive, monogame

我是 XNA/MonoGame 开发的完全初学者。我使用 MonoGame 和 XAML for WinRT 开始了我自己的项目，希望有一天它会到达 Windows App Store。我遇到了一个严重的问题，请看[视频](http://www.youtube.com/watch?v=d0pA7E5FkdE)。我使用了线框，因此可以很容易地看到丢失的顶点。只有用户输入产生的爆炸是完美的。他们都使用相同的逻辑。

我正在用球碰撞做这个游戏，确实很简单。在某些情况下，这些球会爆炸，并按照某些规则开始膨胀。当爆炸是由用户输入同类型爆炸时，下面的爆炸完全不会出现。图元的一些顶点消失了，它们看起来像一些奇怪的形状，但根本不是圆形。我尝试禁用 CullMode（将其设置为 None）、DepthBuffer（设置为 false）、StencilEnable（设置为 false）。这些都没有帮助。所有这些图元都在同一个 z 平面 (z = 0) 中。有没有人有什么建议？非常感谢您的帮助，非常感谢。您可以在下面找到代码，该代码提供了有关情况的更多详细信息。

在更新期间，我连续浏览所有对象，进行必要的更新，并以相同的顺序调用每个对象：

```
this.graphicsDevice.DrawUserPrimitives<VertexPositionColor>(PrimitiveType.TriangleStrip, circleVertices, 0, primitiveCount); 
```

这是我应用的基本效果：

```
basicEffect.Projection = Matrix.CreateOrthographicOffCenter
           (0, graphics.GraphicsDevice.Viewport.Width,     // left, right
            graphics.GraphicsDevice.Viewport.Height, 0,    // bottom, top
            0, 1);                                         // near, far plane 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:15:18.263

如果没有看到更多代码，这将很难回答。从视频中可以看出，当您为从用户输入开始的爆炸生成 circleVertices 时，一定存在问题。是否可以在某处发布您的代码？

# jquery - 从触发另一个元素的事件的单击元素中检索数据属性

> ID：14427829
> 
> 赞同：2
> 
> 时间：2013-01-20T18:34:41.667
> 
> 标签：jquery, jquery-mobile, event-handling

我正忙于一个带有几个按钮和一个弹出窗口的小型 jquery 移动 web 应用程序。按钮有一个`data-id`带有 ID 的属性。当我单击一个按钮时，会打开一个弹出窗口，但我不知道如何获得`data-id`值..

弹出内容将在`popupbeforeposition`事件被调用时设置。此内容将通过带有 ID 的 ajax 调用检索（来自按钮；`data-id`）。

我创建了一个带有简单版本的 webapp 的 JSFiddle：http: [//jsfiddle.net/yW2PZ/1/](http://jsfiddle.net/yW2PZ/1/)

```
<div data-role="page">
    <div data-role="content">
        <div data-role="popup" id="media-edit-file" data-overlay-theme="a">
            Popup
        </div>

        <a data-id="1" href="#media-edit-file" data-role="button" data-transition="flip" data-rel="popup">click me</a>
        <a data-id="2" href="#media-edit-file" data-role="button" data-transition="flip" data-rel="popup">or me</a>
    </div>
</div>

$(document).on('popupbeforeposition', '#media-edit-file', function(event, ui)
{
    // how do I get the data-id value.. ?
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T19:06:27.583

考虑将您的处理程序绑定到标签的`click`事件。`a`这样，`data-id`属性将可以通过`$(this)`回调函数的对象访问。然后，您可以使用该方法以编程方式打开弹出窗口`popup()`。

例如：

```
$(document).on('click', 'a', function(event, ui) {
    var data_id = $(this).data('id');
     // ... fetch the popup's content ...
    $('#media-edit-file').popup('open');
}); 
```

参见**[jsFiddle 演示](http://jsfiddle.net/yW2PZ/2/)**

* * *

**更多关于访问 HTML5 数据属性的信息**

请注意如何使用as 方法`data-id`访问属性，因为当 jQuery 自动将 HTML5 属性添加到元素的对象时，会省略前缀。例如，这也意味着也可以使用. 有关该方法的更多信息，请参阅[jQuery 手册](http://api.jquery.com/data/)。`data()``id``data-``data()``data-rel``data('rel')``data()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-11T22:28:55.697

正确答案是这样的：

```
 $(document).on("click","a",function(event,ui){
       var data_id=$(event.target).attr("data-location");
       ...
     } 
```

# string - 将字符串转换为时间或创建时间常数

> ID：14427830
> 
> 赞同：2
> 
> 时间：2013-01-20T18:34:42.457
> 
> 标签：string, time, go, converter

这可能是一个愚蠢的问题，但我似乎无法找到如何将字符串格式的日期转换为日期时间格式。非常感谢！

```
s := "12-25-2012"
var t time.Time

t = s.Time() ??? 
```

我希望 t 包含 s 的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T18:48:50.507

您需要 time.Parse() 和与您提供的日期字符串匹配的格式字符串。

这是使用您的日期格式的示例。

```
package main

import (
    "fmt"
    "time"
    )

func main() {
    s := "12-25-2012"
    format_string := "01-02-2006"
    t, err := time.Parse(format_string, s)
    if err != nil {
        panic(err)
    }
    fmt.Printf("%v\n", t)
} 
```

[http://play.golang.org/p/YAeAJ3CNqO](http://play.golang.org/p/YAeAJ3CNqO)

[您可以在这篇文章](https://stackoverflow.com/questions/14106541/go-parsing-date-time-strings-which-are-not-standard-formats/14106561#14106561)中阅读有关制作自定义格式字符串的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T18:42:53.233

根据[这篇](http://pauladamsmith.com/blog/2011/05/go_time.html)文章：

```
package main

import (
    "fmt"
    "time"
)

func main() {
    value  := "Thu, 05/19/11, 10:47PM"
    // Writing down the way the standard time would look like formatted our way
    layout := "Mon, 01/02/06, 03:04PM"
    t, _ := time.Parse(layout, value)
    fmt.Println(t)
}

// => "Thu May 19 22:47:00 +0000 2011" 
```

# php - wp query_posts 不返回任何帖子

> ID：14427839
> 
> 赞同：0
> 
> 时间：2013-01-20T18:35:18.287
> 
> 标签：php, wordpress

我有用于显示搜索结果的 wordpress 模板。它工作正常，但是当我想更改排序顺序时，我不能。query_posts 没有按预期工作 - 它没有显示任何结果。

这是我的代码的一部分：

```
global $query_string;
query_posts( $query_string . '&order=ASC' );
if (have_posts()) {
     theme_post_wrapper(
                array('content' => '<h4 class="box-title" >'. $count.'</h4>')
        );                                                          

            /* Display navigation to next/previous pages when applicable */
            if (theme_get_option('theme_top_posts_navigation')) {
                theme_page_navigation();
            }

            /* Start the Loop */
            while (have_posts()) {                    
                the_post();                        
                get_template_part('content', 'search');                                                 
            }

            /* Display navigation to next/previous pages when applicable */
            if (theme_get_option('theme_bottom_posts_navigation')) {
                theme_page_navigation();
            }

} else {
            //NO DATA FOUND
} 
```

如果我删除 query_posts 则显示结果。如果我如上所述添加 query_posts，则不会显示任何数据。这很奇怪，我不知道该怎么做。如何调试？有没有办法获得类似 SQL 查询的东西？还有什么？请给我一些想法。

我还尝试将 order 或/和 orderby 参数添加为 GET 参数 - 搜索结果没有发生任何变化（没有更改排序）。

# php - MySQL 行已插入但未保存？

> ID：14427840
> 
> 赞同：0
> 
> 时间：2013-01-20T18:35:26.190
> 
> 标签：php, mysql

我正在从 PHP 向 MySQL 表中插入一行，并在插入后立即运行查询以获取刚刚插入的行的键值，如下所示：

```
$stmt = $this->db->prepare("INSERT INTO user(vFirstName, vLastName, vEmail, vPassword, iSkilllevelid, vTournaments, vDays, dAddedDate, eStatus) VALUES (?,?,?,?,4,'Pick-Up','Saturday',NOW(),'Active')");
$stmt->bind_param("ssss", $firstName, $lastName, $email, $pwd);
$stmt->execute();
$stmt->close();

$stmt = $this->db->prepare('SELECT iUserId FROM user WHERE vEmail=?');
$stmt->bind_param("s", $email);
$stmt->execute();
$stmt->bind_result($iUserId);
while ($stmt->fetch()) {
    break;
} 
```

执行此代码后，`$iUserId`具有正确的自动递增键值（例如 1143），但是当我实际查看数据库表时，具有该键（1143）的行不存在。这怎么可能？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T18:58:16.930

而不是在插入后从表中选择，您应该使用[`mysqli::$insert_id`](http://php.net/manual/en/mysqli.insert-id.php)：

```
$stmt = $this->db->prepare('
  INSERT INTO user
    (vFirstName, vLastName, vEmail, vPassword, iSkilllevelid,
       vTournaments, vDays, dAddedDate, eStatus)
  VALUES
    (?,?,?,?,4,"Pick-Up","Saturday",NOW(),"Active")
');
$stmt->bind_param('ssss', $firstName, $lastName, $email, $pwd);
$stmt->execute();
$iUserId = $this->db->insert_id;
$stmt->close(); 
```

至于为什么插入的数据没有从其他连接中出现，您的事务似乎可能尚未提交：

```
$this->db->commit(); 
```

# jsf-2 - 如何在 JSF2 中传递回调动作方法？

> ID：14427841
> 
> 赞同：0
> 
> 时间：2013-01-20T18:35:29.333
> 
> 标签：jsf-2, primefaces, callback, parameter-passing

我正在使用 Primefaces`p:dialog`和两个 bean：一个是原始页面 (A) 的支持 bean，另一个 bean 是后面的`p:dialog`(B)。两者都是视图范围的 bean。

这是否可以将回调方法作为参数传递给 B，以便 B 可以调用此方法并使用适当的参数在 A 上触发一些操作？像这样的东西：

```
<p:dialog ...>
    <ui:include>
         <ui:param name="callback" value="[a possible callback method]" />
    </ui:include>
</p:dialog> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:32:23.810

这有效：

`a.xhtml`：

```
....

<p:dialog ...>
    <ui:include src="b.xhtml">
         <ui:param name="targetObject" value="#{bean.value}" />
    </ui:include>
</p:dialog> 
```

然后在`b.xhtml`

```
<p:commandLink>
    <f:setPropertyActionListener target="#{targetObject}" value="#{objectInDialog}" />
</p:commandLink> 
```

这会导致单击对话框中的 commandLink 调用`bean.setValue(objectInDialog)`

# xpath - 如何检查节点是否在表单标签内？

> ID：14427846
> 
> 赞同：2
> 
> 时间：2013-01-20T18:35:58.460
> 
> 标签：xpath

使用 XPath，我如何确定节点是否在表单标签内？我想我正在尝试找到其祖先/先前的表单标签（但我无法让它工作）。

示例 1：

```
<form id="doNotKnowIDofForm">
<div id="level1">
    <span id="mySpan">someText</span>
</div>
</form> 
```

示例 2：

```
<form id="doNotKnowIDofForm">
   This is a closed form.
</form>
<div id="level1">
    <span id="mySpan">someText</span>
</div>
</form> 
```

我可以使用 xpath`"//span[id='mySpan']"`来定位 span 节点。但我想知道 mySpan 是否在表单内（我不知道表单的 id）。我已经尝试`"//span[id='mySpan']/preceding::form/"`过`"//span[id='mySpan']/ancestor::form/"`

提前致谢。

**编辑**：我希望 XPath 在 Example1 中选择 myForm 表单标签，但***不在***Example2 中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T18:52:54.460

从您的描述中，我不能 100% 确定您是要选择`form`元素还是`span`元素。您似乎更有可能选择`form`，所以我将首先解决这个问题。

`ancestor::form`如果最后没有斜线，带有 的 XPath就可以了，但它比它需要的更迂回。我认为这是一个更好的方法：

```
//form[.//span/@id = 'mySpan'] 
```

或这个：

```
//form[descendant::span/@id = 'mySpan'] 
```

要生成仅在某些节点位于表单内时才定位它们的 XPath，您可以将`ancestor::form`谓词放在内部：

```
//span[@id = 'mySpan' and ancestor::form] 
```

或者你可以这样做，这又会更直接：

```
//form//span[@id = 'mySpan'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T22:13:29.207

你自己的尝试

```
//span[id='mySpan']/ancestor::form/ 
```

对我来说看起来不错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T18:53:00.123

你可以简单地使用，

“表格//跨度[id='mySpan']”

# templates - CQ中一个项目的模板数量有限制吗？

> ID：14427849
> 
> 赞同：-1
> 
> 时间：2013-01-20T18:36:26.333
> 
> 标签：templates, aem

CQ中一个项目的模板数量有限制吗？

如果是，那么我们在这里寻找的数字是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:17:20.463

为了缓解@user2005767 提到的“模板过载”问题，您可以使用[诸如 allowedPaths 之类的模板属性](http://dev.day.com/docs/en/cq/5-5/developing/templates.html)将模板的使用限制为内容树的某些子树。例如，只允许在内部使用名为 News Item 的模板`/content/news`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T01:02:44.450

没有技术限制。但是，如果您给内容作者提供的列表太大，他们将很难确定要创建哪种类型的页面。根据我的经验，最好在模板（对于固定布局）和灵活布局（让内容作者在布局中具有一定的自主权）之间找到平衡。被认为可以接受的灵活性量因公司而异。如果您的目标是仅具有硬设置的布局并且不允许您的作者将列控件甚至组件拖到页面上，我可以看到您的模板要求非常高。我建议设置几个带有设置布局的模板，这些模板应该首先使用，但如果它们不适合特定需求，请使用布局更灵活的模板。这将提供两全其美的情况。

# python - Django 无法分配“ ": "listings.user" 必须是 "CustomUser" 实例

> ID：14427852
> 
> 赞同：2
> 
> 时间：2013-01-20T18:36:36.353
> 
> 标签：python, django

我想在我登录的当前用户下保存一个添加，但我不断收到主题中概述的错误。

我的模型：

```
 class CustomUser(User):
        nickname = models.CharField(max_length=255)
        phone = models.CharField(max_length=255)
        address = models.CharField(max_length=255)
        objects = UserManager()
        city = models.ForeignKey(locations, unique=False)

        def __str__(self):
            return self.nickname

        class Admin:
            pass

class listings(models.Model):
    title = models.CharField(max_length=255)
    category = models.ForeignKey('category')
    description = models.CharField(max_length=255)
    published = models.DateField(auto_now=True)
    user = models.ForeignKey(CustomUser, unique=False)

    def __str__(self):
        return self.naslov

    class Admin:
        pass 
```

表格：

```
class jobOfferForm(forms.ModelForm):
    title = forms.CharField(max_length=255)
    description = forms.CharField(max_length=255)
    category = forms.ModelChoiceField(queryset=kategorii.objects.all())

    class Meta:
        model = listings 
```

模板：

```
 <div class="span8">
    <form action="" method="POST">

            {% csrf_token %}
            {{form.as_p}}
                <input type="submit" name="submit" value="Save"/>
    </form>
  </div> 
```

风景！

```
def displisting(request):
    if request.method == 'POST':
        form = jobOfferForm(request.POST)
        if form.is_valid():
            title = form.cleaned_data['title']
            description = form.cleaned_data['description']
            new_listng = form.save(commit = False)
            new_listng.user = request.user
            new_listng.object.save()

            return HttpResponseRedirect('/listing/review')
    else:
        form = jobOfferForm()

    return render(request,'listings.html',{'form':form,}) 
```

我担心自定义用户阻止我这样做？但我需要额外的属性吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-10T23:25:24.733

如果您的用户未登录，则会发生此错误。

使用捆绑的 /admin 站点登录，您的 request.user 对象将是一个有效的用户实例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T18:57:33.480

`request.User`不是您的 custom 实例`CustomerUser`，而是`django.contrib.auth.models.User`. 因此分配：

```
new_listng.user = request.user 
```

无效。

您可能希望您的 request.User 对您的`CustomerUser`（或其他子类，如果有的话）感到沮丧。您可以添加一个自定义中间件，以`django.contrib.auth.middleware.AuthenticationMiddleware`执行此操作为模型。

[django-model-util's`InheritanceManager`](https://github.com/carljm/django-model-utils#inheritancemanager)有一些有用的助手`select_subclasses`，可以让这很容易。

# scheme - 如何找到条件的值？

> ID：14427853
> 
> 赞同：1
> 
> 时间：2013-01-20T18:36:40.827
> 
> 标签：scheme, racket

我刚开始打球，如果这是一个愚蠢的问题，请原谅。有人能告诉我我到底做错了什么吗？我试图找到的价值：

```
(cond
  [(<= (string-length s) 5) 10]
  [(string=? s “hello”) 50]
  [(string=? (substring s 1 4) “ell”) 25]
  [else 130]) 
```

当 s 为 (i)`"hello"`且 s 为 (ii)时`"hellos"`。

我用数字做了类似的事情，我所要做的就是用数字定义它并且没有问题。我不知道我在这里做错了什么。

编辑-

喜欢这个。当 n 为 150000 时，他们要求 n 的值。我只是将 n 定义为 150000，我得到“mb”作为值。

```
;;(define n 15000)

(cond
  [(<= n 1000) (number->string n)]
  [(<= n 5000) 
(string->symbol 
(string-append "num" (number->string n)))]
  [else (substring 
(string-append "number" (number->string n)) 2 4)]) 
```

我正在尝试对上述内容做同样的事情。如果这有任何意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:08:32.280

请注意，字符串必须被包围`""`才能工作，在您的代码中，您使用的是类似但不完全正确的双引号。试试这个：

```
(define s "hello")

(cond
  [(<= (string-length s) 5) 10]
  [(string=? s "hello") 50]
  [(string=? (substring s 1 4) "ell") 25]
  [else 130]) 
```

除此之外，代码本身没有错误，但由于不同条件出现在 中的*顺序*`cond`，获得的结果可能不是您预期的结果，尝试切换一些，重新组织它们等。

请记住，条件是从上到下评估的，并且将执行第一个为真的条件。例如，如果输入是`"hello"`，则`(<= (string-length s) 5)`在 之前进行评估和执行`(string=? s "hello")`，因为第一个条件为真，而第二个条件永远不会达到，因此永远不会执行。

# jquery - 使用 jquery 并尝试使用 css 更改错误消息

> ID：14427859
> 
> 赞同：0
> 
> 时间：2013-01-20T18:37:02.980
> 
> 标签：jquery, css, validation

我有一个表格，我想更改 css 中错误消息的字体大小和颜色，但我不知道该怎么做。

```
$(document).ready(function() {
   $("#form1").validate({ 
      rules: {  
         credit: {
         required:true,
         creditcard: true
      },
      amount: { 
         required: true,
         min:(15),
      },
      firstname: "required",// simple rule, converted to {required:true} 
      surname: "required",// simple rule, converted to {required:true}   
      name2: "required",// simple rule, converted to {required:true}    
      surname2: "required",// simple rule, converted to {required:true}     
      name3: "required",// simple rule, converted to {required:true}  
   }, 
```

这些是消息，我不希望它们与表单输入的大小和颜色相同，需要弄清楚如何更改它们

```
 messages: {
         firstname: "Please enter a first name",
         surname: "Please enter a surname",
         name2: "Please enter a first name",
         surname2: "Please enter a surname",
         name3: "Please enter a name",
      }      
   });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T18:42:23.620

默认情况下，使用 jQuery 验证插件，当您尝试发布有错误的表单时，它会将类名添加`error`到所有未通过验证的表单元素。所以：

```
<input type="text" name="firstname"/> 
```

会变成：

```
<input type="text" name="firstname" class="error"/> 
```

要更改样式，请使用以下内容：

```
.error {
   color: red;
   font-size: 12px;
} 
```

# python - 在 python 中使用正则表达式删除 XML 中的空行？

> ID：14427863
> 
> 赞同：0
> 
> 时间：2013-01-20T18:37:19.943
> 
> 标签：python, xml, regex, spaces

抱歉，如果以前有人问过这个问题，但我在任何地方都找不到答案..

我正在尝试使用正则表达式来提取元素值，但被拉出的 xml 包含一个空行，这似乎会导致错误。

这是 XML 中的元素之一：

```
<entry>
    <id>http://feeds.rasset.ie/rteavgen/player/videos/show/?id=10103822</id>
    <showid>10103822</showid>
    <platform>iptv</platform>
    <published>2013-01-19T21:45:00+00:00</published>
    <updated>2013-01-19T23:41:00+00:00</updated>
    <title type="text">The Saturday Night Show</title>
    <content type="text">Chat show, presented by journalist and broadcaster Brendan O'Connor, featuring comedy, celebrity guests and live musical performances.</content>
    <category term="RTÉ One" rte:type="channel"/>
    <category term="Entertainment" rte:type="genre"/>
    <category term="None" rte:type="series"/>
    <category term="None" rte:type="episode"/>
    <category term="None" rte:type="ranking"/>
    <category term="1024" rte:type="genrelist"/>
    <category term="None" rte:type="keywordlist"/>
    <category term="1668" rte:type="progid"/>
    <link rel="self" type="application/atom+xml" href="http://feeds.rasset.ie/rteavgen/player/playlist?showId=10103822"/>

    <link rel="alternate" type="text/html" href="http://www.rte.ie/player/#v=10103822"/>
    <rte:valid start="2013-01-19T21:52:12+00:00" end="2013-02-09T21:52:12+00:00"/>
    <rte:duration ms="4201061" formatted="1:10"/>
    <rte:statistics views="194"/>
    <media:title type="plain">The Saturday Night Show</media:title>
    <media:description type="plain">Chat show, presented by journalist and broadcaster Brendan O'Connor, featuring comedy, celebrity guests and live musical performances.</media:description>
    <media:player url="http://feeds.rasset.ie/rteavgen/player/player/?id=" width="400" height="300"/>
    <media:thumbnail url="http://img.rasset.ie/0006e56a.jpg" time="00:00:00+00:00"/>
    <media:restriction relationship="allow" type="country"/>
    <media:restriction relationship="disallow" type="country"/>
    <media:copyright>RTÉ</media:copyright>
</entry> 
```

您可以看到两个“link rel=”元素之间有一个空行。

当我尝试使用这个正则表达式命令时，它会抛出超时！错误，因为我没有正确处理这个问题（请原谅我的正则表达式知识几乎为零）。

```
links = (re.compile ('<showid>(.+?)</showid>\n        ' \
                         '<platform>.+?</platform>\n        ' \
                         '<published>(.+?)</published>\n        ' \
                         '<updated>.+?</updated>\n        ' \
                         '<title type="text">(.+?)</title>\n        ' \
                         '<content type="text">(.+?)</content>\n        ' \
                         '<category term="(.+?)" rte:type="channel"/>\n        ' \
                         '<category term=".+?" rte:type="genre"/>\n        ' \
                         '<category term=".+?" rte:type="series"/>\n        ' \
                         '<category term=".+?" rte:type="episode"/>\n        ' \
                         '<category term=".+?" rte:type="ranking"/>\n        ' \
                         '<category term=".+?" rte:type="genrelist"/>\n        ' \
                         '<category term=".+?" rte:type="keywordlist"/>\n        ' \
                         '<category term=".+?" rte:type="progid"/>\n        ' \
                         '<link rel="self" type=".+?" href=".+?" />\n        ' \
                         '<link rel="alternate" type=".+?" href=".+?" />').findall(data)) 
```

我实际上只想要几个字段，但我似乎找不到允许我选择我想要的单个元素名称的正则表达式命令，它让我按顺序输入每个字段（同样，我缺乏正则表达式知识是问题）。除了我需要的第二个“link rel =”元素之外，我还需要一些字段，但是由于它不断地落在这个元素上，所以我暂时将它们排除在外。

任何人都知道我需要什么正则表达式命令来跳过空白行，也许还需要整理表达式以仅提取我需要的元素？

谢谢各位帮忙，希望...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T18:50:18.543

要删除空行，您不需要正则表达式：

```
with open("my_file.xml") as xmlfile:
    lines = [line for line in xmlfile if line.strip() is not ""]

with open("my_file.xml", "w") as xmlfile:
    xmlfile.writelines(lines) 
```

同样要解析`xml`文件，您可以简单地使用 expat：[http](http://docs.python.org/2/library/pyexpat.html) ://docs.python.org/2/library/pyexpat.html甚至可能是迷你 dom：[http://docs.python.org/2/library/xml。 dom.minidom.html](http://docs.python.org/2/library/xml.dom.minidom.html)另一个非常好的方法是 ElementTree：[http ://docs.python.org/2/library/xml.etree.elementtree.html](http://docs.python.org/2/library/xml.etree.elementtree.html)

但是，不建议使用正则表达式，这实际上是一个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:27:33.573

正如其他人所说，您不应该为此任务使用正则表达式。

回答您的实际问题：您对元素之间的空白过于具体。在这种情况下，是额外的空格导致您出现问题。它可能很容易没有空格：

```
<category term="None" rte:type="ranking"/><category term="1024" rte:type="genrelist"/> 
```

解决方法：不要使用`\n`后跟 8 个空格，而是使用`\s*`（零个或多个空格字符）。

# azure - 模拟 Azure 存储事务

> ID：14427877
> 
> 赞同：6
> 
> 时间：2013-01-20T18:38:34.100
> 
> 标签：azure, mocking, azure-storage, moles

我正在寻找使用 Moles Mocking 框架来模拟 azure 存储事务。

关于如何使用 Moles 模拟天蓝色存储事务或可能是任何其他模拟框架的任何想法/文档/示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T05:44:23.933

虽然这不能直接回答问题，但作为替代解决方案，我使用开箱即用的模拟器，我相信它可以被视为 azure 存储的模拟。

这是我在单元测试基类中添加的用于启动存储模拟器的代码：

```
 [TestInitialize]
    public void setup()
    {
         Process.Start(@"C:\Program Files\Microsoft SDKs\Windows Azure\Emulator\csrun", "/devstore").WaitForExit();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-13T19:17:55.407

最新版本的 .NET 客户端虚拟化了所有服务调用 API，还解封了相关类——这意味着模拟存储客户端库应该很简单。我相信测试是用最小起订量进行的。请参阅：[https ://github.com/Azure/azure-storage-net/blob/master/BreakingChanges.txt](https://github.com/Azure/azure-storage-net/blob/master/BreakingChanges.txt)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-11T22:37:42.593

您需要做的就是为要模拟的任何 azure 类创建一个接口，并将该接口作为依赖项而不是具体的 azure 类，因为产品代码从存储 sdk 传递具体类，对于您的单元测试只需使用任何单元测试框架（即 Moq）或只是你的接口的模拟实现，你就完成了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-14T14:39:11.877

先决条件：下载 Microsoft Azure Sdk for .Net（包含存储模拟器） [https://azure.microsoft.com/en-us/downloads/](https://azure.microsoft.com/en-us/downloads/)

您可以针对 Azure 存储模拟器运行代码。存储模拟器是在云中模拟 Azure 存储帐户的本地环境。模拟器是一个免费选项，用于在开发应用程序时测试和调试代码。模拟器使用众所周知的帐户和密钥。有关更多详细信息，请参阅使用 Azure 存储模拟器进行开发和测试

通过设置以下连接来连接到存储模拟器帐户`web.config`

```
<appSettings>
  <add key="StorageConnectionString" value="UseDevelopmentStorage=true" />
</appSettings> 
```

这是我的开发存储模拟器的屏幕截图，这是 Blob 表等的模拟...

[![在此处输入图像描述](../Images/4fe2784db906fe277f99613215b05bc8.png)](https://i.stack.imgur.com/EV7cF.png)

# java - 如何使用 Java 显示计算机的桌面？

> ID：14427882
> 
> 赞同：2
> 
> 时间：2013-01-20T18:39:35.323
> 
> 标签：java, screenshot

如何使用 Java 显示计算机的桌面（屏幕）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:48:46.647

如果你想截图，试试这个代码

```
 if (argv.length > 0) {
            try {
                long time = Long.parseLong(argv[0]) * 1000L;
                System.out.println("ScreenShot in " + argv[0] + " second(s)...");
                Thread.sleep(time);
                System.out.println("Snap!");
            } catch (NumberFormatException nfe) {
                System.err.println(argv[0] + " is not a valid number of seconds.");
                System.exit(-1);
            }
        }
        Dimension size = Toolkit.getDefaultToolkit().getScreenSize();
        Robot robot = new Robot();
        BufferedImage img = robot.createScreenCapture(new Rectangle(size));
        JFrame frame = new JFrame();
        frame.getContentPane().setLayout(new FlowLayout());
        frame.getContentPane().add(new JLabel(new ImageIcon(img)));

        frame.pack();
        frame.setVisible(true); 
```

# javascript - 如何在一页上拥有此 jQuery 图像幻灯片效果的多个实例

> ID：14427885
> 
> 赞同：0
> 
> 时间：2013-01-20T18:40:10.143
> 
> 标签：javascript, jquery, css

现在我的页面上有这个：

```
<section class="image_slider grid_4">
<nav class="slider_nav"> <a href="#" class="left">&nbsp;</a> <a href="#" class="right">&nbsp;</a> </nav>
<div class="slides">
    <a href="/images/placeholders/800x600/7.jpg" rel="fancybox_gallery1"><img src="/images/placeholders/300x200/7.jpg" alt="" /></a>
    <a href="/images/placeholders/800x600/8.jpg" rel="fancybox_gallery1"><img src="/images/placeholders/300x200/8.jpg" alt="" /></a>
</div> 
```

控制它的js是这样的：

```
/* Sidebar image slider */
$('.image_slider').each(function () {

    /* Functions */
    function resetInterval () {
        clearInterval(imageSliderInterval);
        imageSliderInterval = setInterval(next, 4000);
    }
    function next () {
        $('.image_slider .slides').children(':last').fadeOut(1000, function () {
            $(this).prependTo('.image_slider .slides').fadeIn(1);
        });
    }
    function previous () {
        $('.image_slider .slides').children(':last').fadeOut(1000, function () {
            $(this).prependTo('.image_slider .slides').fadeIn(1);
        });
    }

    /* Initialize */
    var imageSliderInterval;
    resetInterval();

    /* Controls */
    $('.image_slider .left').click(function () {
        next();
        resetInterval();
    });
    $('.image_slider .right').click(function () {
        previous();
        resetInterval();
    });

}); 
```

有什么想法可以让图像幻灯片放映的多个实例在每个图像库上都有单独的控件吗？

如果您想看一看，原始代码来自此模板 - 向下滚动到标题“Nam imperdiet lacinia”：

[http://travel.equiet.sk/hotel.html](http://travel.equiet.sk/hotel.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:56:15.623

以下应该隔离实例。`this`此类情况的关键是在`each`循环内使用定义当前主元素，并`find()`在主元素内使用将搜索其他元素的搜索本地化到当前实例。

```
/* Sidebar image slider */
$('.image_slider').each(function () {

    var $slider=$(this), $slides= $slider.find('.slides'), imageSliderInterval;

    /* Functions */
    function resetInterval () {
        clearInterval(imageSliderInterval);
        imageSliderInterval = setInterval(next, 4000);
    }
    function next () {
        $slides.children(':last').fadeOut(1000, function () {
            $(this).prependTo($slides).fadeIn(1);
        });
    }
    function previous () {
        $slides.children(':last').fadeOut(1000, function () {
            $(this).prependTo($slides).fadeIn(1);
        });
    }

    /* Initialize */

    resetInterval();

    /* Controls */
    $slider.find('.left').click(function () {
        next();
        resetInterval();
    });
    $slider.find('.right').click(function () {
        previous();
        resetInterval();
    });

}); 
```

# android - 无法解析 Android 资源字符串

> ID：14427890
> 
> 赞同：3
> 
> 时间：2013-01-20T18:40:30.087
> 
> 标签：android, string

我正在学习 Android，我有一个我认为很奇怪的问题。

在 /res/values/strings.xml 我有：

```
<string name="titleStatus">Status Update</string> 
```

在 /res/layout/activity_status.xml 我有：

```
<!-- Title TextView-->
<TextView android:layout_width="match_parent"
  android:layout_height="wrap_content" android:gravity="center"
  android:textSize="30sp"
  android:layout_margin="10dp" android:text="@string/titleStatus"/> 
```

但是，查看 activity_status.xml 时出现错误：

> 错误：找不到与给定名称匹配的资源（在“文本”处，值为“@string/titleStatus”）。活动状态.xml

然后我认为它可能有助于使用“Project | Clean”，但我遇到了同样的问题（现在没有自动生成的 R.java 类）

我正在关注本教程/书： http: [//ofps.oreilly.com/titles/9781449390501/Android_User_Interface.html](http://ofps.oreilly.com/titles/9781449390501/Android_User_Interface.html)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T15:45:48.860

每当您将某些内容添加到资源文件并尝试在另一个资源文件中使用它而不先保存它时，您都会收到错误消息。

正常`ctrl+s`只是保存您所在的文件，因此编译将发生而不会更改其他文件。

按`ctrl-shift-s`保存所有打开文件中的更改（与转到 相同`File -> Save All`）。

就我个人而言，我`ctrl-shift-o`每次`ctrl-shift-f`都`ctrl-shift-s`需要保存一些更改来组织导入、格式化代码以修复缩进等并保存所有更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T18:43:07.537

看起来您的 R 文件未正确生成。你能看一下eclipse的构建错误（如果有的话）吗？如果不验证您的 R 文件是否正确生成，并且条目 titleStatus 在其中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-08T22:46:28.713

我在 Android Studio 中遇到了同样的问题。选择：文件 -->> 使缓存无效/重新启动。为我解决了！

# c# - MVC 中的 JQuery 必需的文本框验证和错误消息

> ID：14427895
> 
> 赞同：1
> 
> 时间：2013-01-20T18:41:03.343
> 
> 标签：c#, jquery, asp.net-mvc

如果这似乎是一个愚蠢的问题，我提前道歉，但经过大量搜索后，我要么无法将正确的部分放在一起，要么根本没有找到正确的答案。无论如何，我有这个模型：

```
public class Resort
{
    public int ID { get; set; }
    public String Name { get; set; }
    public int BlackDiamond { get; set; }
    public int BlueSquare { get; set; }
    public int GreenCircle { get; set; }
    public int TerrainPark { get; set; }
} 
```

我有一个视图，可以创建 TextBoxes 作为每个变量的输入。我需要做的是设置一些 JQuery 验证，以确保每个 TextBox 中都有一个值，更具体地说，int 的 TextBoxes 中有数字。

在做了一些研究之后，我只是不确定如何为视图设置脚本，或者我是否应该依赖模型中的数据注释？即使只是为我指出正确的研究方向，任何帮助都将受到赞赏，我在这里学习。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:47:51.860

如果是必填字段，`RequiredAttribute`请在字段中添加：

```
[Required]
public int BlackDiamond { get; set; } 
```

如果您还想要自定义消息，请将其添加到属性中：

```
[Required(ErrorMessage="Please enter a number")]
public int BlackDiamond { get; set; } 
```

如果您想要内置的 jQuery 验证，请确保使用强类型帮助器：

```
@Html.TextBoxFor(m => m.BlackDiamond) // you can also use EditorFor 
```

您还需要包含对`UnobtrusiveValidation`jQuery`Validate`插件的脚本引用以获取自动验证。

仅供参考，如果您不熟悉 MVC 中的验证，这似乎是一个不错的起点：http: [//msdn.microsoft.com/en-us/VS2010TrainingCourse_ASPNETMVC3FormsandValidation](http://msdn.microsoft.com/en-us/VS2010TrainingCourse_ASPNETMVC3FormsandValidation)

**编辑：**只是为了使这个答案更完整一点，如评论中所述：要查看与每个控件关联的错误消息，您需要添加验证助手：`@Html.ValidationMessageFor(m => m.BlackDiamond)`

# telephony - USB调制解调器拨号音检测

> ID：14427896
> 
> 赞同：2
> 
> 时间：2013-01-20T18:41:09.403
> 
> 标签：telephony

有谁知道USB调制解调器是否能够检测电话线上是否有拨号音而无需将线路摘机？我已经读到您需要让调制解调器“打开”线路，然后可以发送一个命令来检查拨号音。开线等于摘下电话吗？如果我在来电时这样做，调制解调器本质上会接听电话吗？

如果这不是要走的路，USB调制解调器是否能够检测电压？如果是这样，是否存在指示拨号音存在的特定电压？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:21:32.970

一个[有用的电话入门](http://www.telecomaudio.com/article02.html)。

要确定是否有拨号音，您必须将其摘机并收听。不同电压水平的存在有助于了解是否存在有效电路或线路是否有其他用途，但不可靠知道拨打电话是否安全。

是的，我相信打开线路与将线路摘机是一样的。请注意，在您摘机之前没有拨号音，电信公司检测并开始播放音频作为可用性指示器。

如果您在来电时执行此操作，您将接听它。在使用自动化系统时，这是一个问题，也是为什么入站和出站线路通常是分开的。如果没有拨号音，我已经看到了一些假设呼入呼叫的技术。如果空行/人从不响应，则您只会在确定缺少响应（超时+重试）所需的时间段内失去该行的可用性。

调制解调器确实执行电压检测（振铃和其他条件）。电压不表示拨号音。同样，在您完成电路并且电信交换机响应之前，它不会出现。旁注，可以连续播放拨号音的并发通道数量通常是有限的，这有时会在长时间打开大量通道时引起有趣的问题。

# java - Eclipse 没有自动设置“导入”语句

> ID：14427897
> 
> 赞同：3
> 
> 时间：2013-01-20T18:41:16.420
> 
> 标签：java, eclipse, autocomplete

我是 Java（和 Eclipse）中的铁杆 Noobie，这是我的第一个 Java 代码。

我正在使用 VMware Java SDK，并且能够运行 SDK 附带的 Java 示例。在其中一个示例代码中，我找到了这一行：

```
import com.vmware.vcloud.sdk.Organization; 
```

使用此类的行是：

```
for (ReferenceType vdcLink : Organization 
                .getOrganizationByReference(vcloudClient, orgRef)
                .getVdcRefs()) 
```

在这里，我了解了如何`Organization`导入和使用。

现在，我正在 Eclipse 中编写自己的代码，但无法使“组织”工作。Eclipse 没有编写（但是，Eclipse 正在为我在同一个 SDK 中使用的其他几种方法`import`自动编写语句）`import`

这是我所做的：

我确实确保将所有 .jar 文件（来自 VMware SDK）导入到 Eclipse 中`Project Properties -> Java Build Path -> Libraries`。

我也在跑来`CTRL+Shift+O`安排进口。

我还设置`Windows > Preferences > "Save Actions"`并检查`"Organize Imports"`了每次保存程序时它都会安排导入。

但是，我只是无法找到`Organization`工作。

因此，从示例代码（正在运行）中，我将以下行复制到了我的代码中：

```
import com.vmware.vcloud.sdk.Organization; 
```

但它仍然无法正常工作。不用说，如果我键入`Organization.`然后执行`CTRL + Space`（显示自动完成建议），它不会在弹出窗口中显示任何方法。

我认为这在某种程度上与 .jar 文件路径的设置有关，但我不确定。

谢谢。

**更新：** 这是我使用“组织”时遇到的错误：当我将鼠标光标移动到我写的行最左侧的红点时，此错误会在一个框中弹出`Organization`：

```
Multiple Markers At this line
    -Orgnization cannot be resolved to a variable 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:06:25.027

所以，

我得到它的工作如下。不知道这对你们是否有意义。但是一个解释会非常有帮助：

我的示例代码有以下内容：

在 Eclipse 中，它位于`project->src->com->vmware->vcloud->sdk->samples`文件夹中，顶部有这一行：`package com.vmware.vcloud.sdk.samples;`

所以我将我的代码从`project->src`to 移到`project->src->com->vmware->vcloud->sdk->samples`并将该包行添加到我的代码中。

现在 eclipse 正在编写 import 语句，`Organization`并且 eclipse 向我展示了可用的方法`Organization.`

现在，

我不想在示例文件夹中编写我的代码。这还有意义吗？？

感谢您的评论。看了你的评论后，我有了这个想法。

# c - 如何将套接字从父进程传递给子进程

> ID：14427898
> 
> 赞同：10
> 
> 时间：2013-01-20T18:41:17.690
> 
> 标签：c, sockets, webserver, fork, file-descriptor

我在Linux上的C程序中遇到了一个问题。

我知道当一个进程被分叉时，子进程会从父进程继承一些东西，包括**打开**的文件描述符。

问题是我正在编写一个带有主进程的多进程服务器应用程序，该进程接受新连接并将描述符放入共享内存中。

当子进程尝试从共享内存中读取这些描述符之一时，`select()`出现`EBADF`错误！

子进程在分叉*后*如何读取和使用父进程创建的套接字（或任何一般的文件描述符） ？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-20T20:44:48.910

当你调用 fork 时，子进程会继承所有打开的文件描述符的副本。这样做的典型方法是父进程打开一个监听套接字，调用accept，直到连接到达，然后在接收到连接后调用fork。然后父进程关闭它的文件描述符副本，而新的子进程可以继续使用文件描述符并进行任何需要的处理。一旦孩子完成，它*也会*关闭套接字。重要的是要记住两件事： 1\. 文件描述符/套接字是操作系统中的一种资源，在分叉之后，父子节点各有一个对该资源的句柄，这有点像引用计数的智能指针。[我在这里更详细地](https://stackoverflow.com/a/598759/71074)解释了这一点. *第二件事是只有在调用 fork之前*打开的文件描述符是共享的，因为在 fork 之后父子进程是完全独立的进程，即使它们可能共享一些资源，例如在 fork 之前存在的文件描述符。如果您使用的模型希望父进程将工作分配给工作进程，那么考虑使用线程和[线程池](https://stackoverflow.com/a/14316163/71074)可能会更好。

顺便说一句，您可以从[Unix Network Programming](http://www.unpbook.com/)网站下载一些不错的服务器和客户端示例。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-20T18:59:59.333

您不能通过共享内存将套接字（或任何其他文件描述符）从一个进程传输到另一个进程。文件描述符只是一个小整数。从另一个进程的角度来看，将此整数放在共享内存中并从另一个进程访问它不会自动将相同的整数变成有效的文件描述符。

将文件描述符从一个进程发送到另一个进程的正确方法是通过两个进程之间的现有套接字通信通道将其作为`SCM_RIGHTS`辅助数据发送。`sendmsg()`

`socketpair()`首先，在您之前创建您的沟通渠道`fork()`。现在，在父级中，关闭套接字对的一端，在子级中，关闭另一端。您现在可以`sendmsg()`在此套接字的一端从父级接收，并`recvmsg()`使用另一端在子级中接收。

发送消息`SCM_RIGHTS`如下所示：

```
struct msghdr m;
struct cmsghdr *cm;
struct iovec iov;
char buf[CMSG_SPACE(sizeof(int))];
char dummy[2];    

memset(&m, 0, sizeof(m));
m.msg_controllen = CMSG_SPACE(sizeof(int));
m.msg_control = &buf;
memset(m.msg_control, 0, m.msg_controllen);
cm = CMSG_FIRSTHDR(&m);
cm->cmsg_level = SOL_SOCKET;
cm->cmsg_type = SCM_RIGHTS;
cm->cmsg_len = CMSG_LEN(sizeof(int));
*((int *)CMSG_DATA(cm)) = your_file_descriptor_to_send;
m.msg_iov = &iov;
m.msg_iovlen = 1;
iov.iov_base = dummy;
iov.iov_len = 1;
dummy[0] = 0;   /* doesn't matter what data we send */
sendmsg(fd, &m, 0); 
```

接收带有`SCM_RIGHTS`in 的消息是这样的：

```
struct msghdr m;
struct cmsghdr *cm;
struct iovec iov;
struct dummy[100];
char buf[CMSG_SPACE(sizeof(int))];
ssize_t readlen;
int *fdlist;

iov.iov_base = dummy;
iov.iov_len = sizeof(dummy);
memset(&m, 0, sizeof(m));
m.msg_iov = &iov;
m.msg_iovlen = 1;
m.msg_controllen = CMSG_SPACE(sizeof(int));
m.msg_control = buf;
readlen = recvmsg(fd, &m, 0);
/* Do your error handling here in case recvmsg fails */
received_file_descriptor = -1; /* Default: none was received */
for (cm = CMSG_FIRSTHDR(&m); cm; cm = CMSG_NXTHDR(&m, cm)) {
    if (cm->cmsg_level == SOL_SOCKET && cm->cmsg_type == SCM_RIGHTS) {
        nfds = (cm->cmsg_len - CMSG_LEN(0)) / sizeof(int);
        fdlist = (int *)CMSG_DATA(cm);
        received_file_descriptor = *fdlist;
        break;
    }
} 
```

# scala - 以函数方式计算语法的可为空的非终结符（最好在 Scala 中）

> ID：14427899
> 
> 赞同：3
> 
> 时间：2013-01-20T18:41:26.260
> 
> 标签：scala, functional-programming, context-free-grammar

我是函数式编程的新手，想知道如何在不使用变量赋值的情况下以纯函数方式解决在上下文无关语法中计算可空非终结符集的问题。

可空非终结符是直接产生空的非终结符，例如 A ::= ，或具有包含可空非终结符的主体，例如 A ::= BCD，其中所有 BC 和 D 都产生空。

我在 Scala 中使用以下定义来定义语法：

```
case class Grammar(name:String, startSymbol:Nonterminal, rules:List[Rule])
case class Rule(head: Nonterminal, body:List[Symbol])
abstract class Symbol
case class Terminal(c:Char) extends Symbol
case class Nonterminal(name:String) extends Symbol 
```

一个基本算法是收集所有可直接为空的非终结符并将它们放入一个集合中。然后在每次迭代中尝试确定哪些生产规则在其主体上具有所有可为空的非终结符。这些非终结符将被添加到集合中，直到没有新的非终结符添加到集合中。

我在Scala中实现了这个过程：

```
 def getNullableNonterminals(grammar:Grammar) = {

  var nieuw : Set[Nonterminal] = (for(Rule(head, Nil) <- grammar.rules) yield head) (collection.breakOut)
  var old = Set[Nonterminal]()

  while(old != nieuw) {
    old = nieuw
    for{
        Rule(head, symbols) <- grammar.rules
        if symbols.length > 0
        if symbols.forall( s => s.isInstanceOf[Nonterminal] && old.contains(s.asInstanceOf[Nonterminal]))
       } nieuw = nieuw + head
  }
  nieuw   
} 
```

尽管代码比等效的 Java 版本短得多，但它使用变量。有什么建议可以用函数式风格重写这段代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T23:07:58.787

这是一个更惯用的 Scala 解决方案：

```
object Algorithm {

  def getNullableNonterminals(grammar:Grammar) = {
    loop(grammar, Set())
  }

  @tailrec
  private def loop(grammar: Grammar, nullablesSoFar: Set[Nonterminal]): Set[Nonterminal] = {
    val newNullables = generateNew(grammar, nullablesSoFar)
    if (newNullables.isEmpty)
      nullablesSoFar //no new nullables found, so we just return the ones we have
    else
      loop(grammar, nullablesSoFar ++ newNullables) //add the newly found nullables to the solution set and we keep going
  }

  private def generateNew(grammar: Grammar, nullableSoFar: Set[Nonterminal]) = {
    for {
      Rule(head, body) <- grammar.rules
      if !nullableSoFar.contains(head)
      if body.forall(isNullable(_, nullableSoFar))
    } yield head
  }

  //checks if the symbol is nullable given the current set of nullables
  private def isNullable(symbol: Symbol, provenNullable: Set[Nonterminal]) = symbol match {
    case Terminal(_) => false
    case x@Nonterminal(_) => provenNullable.contains(x)
  }

} 
```

while 语句替换为递归函数 - `loop`。此外，避免使用`isInstanceOf`- 模式匹配更适合于此。

小观察 - 制作 Symbol 类`sealed`，因为这可以强制警告模式匹配中缺少案例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T09:51:10.863

这是另一种使用*记忆*的方法（[参考](http://michid.wordpress.com/2009/02/23/function_mem/)，[另一个参考](https://stackoverflow.com/questions/3651313/how-to-cache-results-in-scala)），它避免了像您和 MAD 的解决方案那样需要定点计算。此外，它是适用于大量场景的通用模式。看看[Scalaz 的实现](http://scalaz.googlecode.com/svn/continuous/latest/browse.sxr/scalaz/Memo.scala.html)。

```
def getNullableNonterminals(g: Grammar): Iterable[Nonterminal] = {
  /* Cache that is used by isNullable to memoise results. */
  var cache: Map[Nonterminal, Boolean] = Map()

  /* Assumption: For each nonterminal nt there exists only one rule r
   * such that r.head == nt.
   */
  var rules: Map[Nonterminal, List[Symbol]] = g.rules.map(r => (r.head, r.body)).toMap

  def isNullable(s: Symbol): Boolean = s match {
    case _: Terminal => false
    case nt: Nonterminal =>
      /* Either take the cached result, or compute it and store it in the cache. */
      cache.getOrElse(nt, {
        /* rules(nt) assumes that there is a rule for every nonterminal */
        val nullable = rules(nt) forall isNullable
        cache += ((nt, nullable))
        nullable
      })
  }

  rules.keys filter isNullable
} 
```

测试用例：

```
val ta = Terminal('a')
val tb = Terminal('b')

val ntX = Nonterminal("X")
val ntY = Nonterminal("Y")
val ntZ = Nonterminal("Z")
val ntP = Nonterminal("P")
val ntQ = Nonterminal("Q")
val ntR = Nonterminal("R")
val ntS = Nonterminal("S")

val rX = Rule(ntX, ntP :: ntQ :: Nil)
val rY = Rule(ntY, ntP :: ta :: ntQ :: Nil)
val rZ = Rule(ntZ, ntR :: Nil)
val rP = Rule(ntP, ntQ :: Nil)
val rQ = Rule(ntQ, Nil)
val rR = Rule(ntR, tb :: Nil)
val rS = Rule(ntS, ntX :: ntY :: ntZ :: Nil)

val g = Grammar("Test", ntS, List(rX, rY, rZ, rP, rQ, rR, rS))

getNullableNonterminals(g) foreach println
  // Nonterminal(Q), Nonterminal(X), Nonterminal(P) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-03T10:07:36.100

我终于有时间写一个如何使用循环属性语法进行语法可空性计算的示例。下面的代码使用我们[用于 Scala 的 Kiama 语言处理库](https://code.google.com/p/kiama/)。您可以在 Kiama中找到[示例和测试的完整源代码。](https://code.google.com/p/kiama/source/browse/#hg/library/src/org/kiama/example/grammar)有关主要属性代码，请参见 SemanticAnalysis.scala，例如[nullable](https://code.google.com/p/kiama/source/browse/library/src/org/kiama/example/grammar/SemanticAnalyser.scala#161)。

简而言之，该方法执行以下操作：

*   将语法表示为抽象语法树结构，

*   对树结构执行名称分析，以解析从语法符号使用到这些符号定义的引用，以及

*   将可空性计算为生成的 DAG 结构上的循环属性。

[我使用的属性定义与 LDTA 2003 的 Magnusson 和 Hedin 的论文Circular Reference Attribute Grammars](http://www.sciencedirect.com/science/article/pii/S1571066105826271)中用作示例的属性定义非常相似。他们在[JastAdd 系统](http://jastadd.org/)中实现了循环属性，我强烈推荐这篇论文给任何希望理解这一点的人话题。我们在 Kiama 中使用基本相同的算法。

这是示例使用的 AST 的定义。`Tree`是提供一些常见行为的 Kiama 类型。

```
sealed abstract class GrammarTree extends Tree

case class Grammar (startRule : Rule, rules : Seq[Rule]) extends GrammarTree

case class Rule (lhs : NonTermDef, rhs : ProdList) extends GrammarTree

sealed abstract class ProdList extends GrammarTree
case class EmptyProdList () extends ProdList
case class NonEmptyProdList (head : Prod, tail : ProdList) extends ProdList

case class Prod (symbols : SymbolList) extends GrammarTree

sealed abstract class SymbolList extends GrammarTree
case class EmptySymbolList () extends SymbolList
case class NonEmptySymbolList (head : Symbol, tail : SymbolList) extends SymbolList

sealed abstract class Symbol extends GrammarTree
case class TermSym (name : String) extends Symbol
case class NonTermSym (nt : NonTermUse) extends Symbol

sealed abstract class NonTerm extends GrammarTree {
    def name : String
}
case class NonTermDef (name : String) extends NonTerm
case class NonTermUse (name : String) extends NonTerm 
```

下面的代码显示了`nullable`属性的定义。它开始为假，然后输入一个定点“循环”进行计算，直到值稳定。这些案例展示了如何计算 AST 中不同类型节点的属性。

Kiama 的`circular`属性构造器包含了属性的所有实现，包括存储缓存、定点检测等。

```
val nullable : GrammarTree => Boolean =
    circular (false) {

        // nullable of the start rule
        case Grammar (r, _) =>
            r->nullable

        // nullable of the right-hand side of the rule
        case Rule (_, rhs) =>
            rhs->nullable

        // nullable of the component productions
        case EmptyProdList () =>
            false
        case NonEmptyProdList (h, t) =>
            h->nullable || t->nullable

        // nullable of the component symbol lists
        case Prod (ss) =>
            ss->nullable
        case EmptySymbolList () =>
            true
        case NonEmptySymbolList (h, t) =>
            h->nullable && t->nullable

        // terminals are not nullable
        case TermSym (_) =>
            false

        // Non-terminal definitions are nullable if the rule in which they
        // are defined is nullable. Uses are nullable if their associated
        // declaration is nullable.
        case NonTermSym (n) =>
            n->nullable
        case n : NonTermDef =>
            (n.parent[Rule])->nullable
        case n : NonTermUse =>
            (n->decl).map (nullable).getOrElse (false)

    } 
```

引用属性`decl`是将非终结使用连接到规则左侧的相应定义的属性。该`parent` 字段是从节点到 AST 中其父节点的引用。

由于一个规则或符号的可空性取决于其他规则或符号的可空性，因此您得到的是一组参与依赖循环的属性出现。结果是与“教科书”定义非常相似的可空性计算的声明性版本。（该示例还定义了 FIRST 和 FOLLOW 集计算的属性，这些计算是根据可空性定义的。）循环属性将记忆和定点计算组合在一个方便的包中，以解决此类问题。

# wordpress - 快速找出网站是否关闭或启动的方法？

> ID：14427901
> 
> 赞同：2
> 
> 时间：2013-01-20T18:41:34.150
> 
> 标签：wordpress

使用我的**wordpress functions.php**文件来检查显示的每个图像是启动并运行还是关闭。我想我想要做的是把这个函数代码（下面）分成两部分。

**功能 1**：检查 mirror1.com 是否启动（而不是检查循环中的每个图像）。根据 mirror1.com 的 http 状态插入 if/then 语句。（**如果 mirror1.com 已关闭，则使用 mirror2.com**）——将其传递给 $mirror_website

**功能2：**只需传入$mirror_website..（前端有**`<img src="<?php echo $mirror_website; ?>/image.png">`**）

下面的代码有效，但它会检查每一个简单的图像并减慢网站的速度。

```
function amazons3acctreplaceto() {
$url = 'http://www.mirror1.com';
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_NOBODY, true);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_exec($ch);
    $retcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);
    if (200==$retcode) {
       $as3replaceto = "www.mirror1.com"; // All's well
    } else {
       $as3replaceto = "www.mirror2.com";  // not so much
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:44:55.550

一个简单的解决方案可能是使用 TTL 缓存结果（例如，在 APC 或 memcache 中），这样您就无需为每种可能性确定站点是打开还是关闭。

例如。这是一个使用 APC 将站点状态结果缓存 2 分钟的示例：

```
function amazons3acctreplaceto() {
  $as3replaceto = FALSE;
  if (function_exists('apc_fetch')) {
    $as3replaceto = apc_fetch('as3replaceto');
  }

  if ($as3replaceto === FALSE) {
    $url = 'http://www.mirror1.com';
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_NOBODY, true);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_exec($ch);
    $retcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);
    if (200==$retcode) {
       $as3replaceto = "www.mirror1.com"; // All's well
    } else {
       $as3replaceto = "www.mirror2.com";  // not so much
    }
    if (function_exists('apc_store')) {
      apc_store('as3replaceto', $as3replaceto, 120); //Store status for 2 minutes
    }
  } 
```

# android - DrawableLeft 无法编译

> ID：14427906
> 
> 赞同：1
> 
> 时间：2013-01-20T18:42:36.520
> 
> 标签：android, button, drawable, stock

我目前有一个 XML 中的按钮代码，如下所示：

```
<Button
    android:id="@+id/button1"
    android:layout_width="250dp"
    android:layout_height="62dp"
    android:layout_gravity="center_horizontal"
    android:drawableLeft="@drawable/ic_menu_slideshow"
    android:text="Start Slideshow" /> 
```

但是，我收到一个错误`Error: No resource found that matches the given name (at 'drawableLeft' with value '@drawable/ic_menu_slideshow').` 但是，当我检查 XML 文件的图形布局时，`ic_menu_slideshow`存在可绘制的股票。为什么会出现此编译错误，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T18:49:56.777

尝试替换`@drawable/ic_menu_slideshow`为`@android:drawable/ic_menu_slideshow`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T18:45:24.863

你试过清理你的项目吗？不久前有人问了一个类似的问题，所以也要留意这个问题：[Can't Resolve Android Resource Strings](https://stackoverflow.com/questions/14427890/cant-resolve-android-resource-strings)

# c++ - 从崩溃的 VS2010 应用程序获取调试输出

> ID：14427907
> 
> 赞同：0
> 
> 时间：2013-01-20T18:42:37.747
> 
> 标签：c++, visual-studio-2010, debugging, directx-9

**问：**我可以设置 VS2010 让它自动将调试输出写入文件吗？

**动机：**我有一个我正在尝试调试的 DirectX 9 应用程序。我注意到当我的应用程序全屏时，它可能会在某些情况下崩溃。通常我只会检查我的日志或 DirectX 调试输出。但是，我的程序崩溃的方式阻止了这种情况。它冻结并且不响应我结束它的任何尝试（包括来自任务管理器的“结束进程”）。此外，它还冻结了我的 VS2010，因此 VS 也不响应任何命令。我发现的整个事情的唯一出路是结束 VS 进程。然而，这也破坏了我非常想阅读的输出。

现在我看到了两种方法。首先是将所有调试信息写入文件，但我不知道该怎么做。其次是以更友好的方式让我的应用程序崩溃，但这似乎是一项艰巨的任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:47:45.737

可能[MiniDumpWriteMiniDump(..)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680360.aspx)对此有所帮助。您可以随时将进程的当前状态转储到文件中。之后，您可以使用 Visual Studio 打开转储并分析进程的状态 - 这包括每个线程的调用堆栈、变量值......

尝试确定您的进程*崩溃*的情况并编写一个或多个转储。

另一种尝试是安装[Windows 调试工具](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)并使用 WinDbg 调试您的应用程序。这不像 Visual Studio 那样舒服，但可以提供更深入的洞察力。

**编辑：** 如果有使用[OutputDebugString(..)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363362.aspx)制作的调试语句，您可以使用[DebugView](http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx)（来自 Microsoft，更早的 Sysinternals）来显示它。

# jquery - Jquery：在表单之间添加字段集元素

> ID：14427915
> 
> 赞同：4
> 
> 时间：2013-01-20T18:43:19.943
> 
> 标签：jquery, forms, fieldset

现在如何使用 jquery 插入字段集通知我有这个

```
<form action="" method="post">

all dynamic field generated with db and array

</form> 
```

我想在表单标签之间添加字段集，这样代码就变成了

```
<form action="" method="post">
<fieldset>

all dynamic field generated with db and array

</fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T18:45:51.870

我建议在服务器端执行此操作，但如果您确实需要为此使用 jQuery：

```
$('form').wrapInner('<fieldset />'); 
```

[**小提琴**](http://jsfiddle.net/Jjmcn/2/)

[`.wrapInner`文档](http://api.jquery.com/wrapInner/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T18:47:46.593

或者你可以这样做：

```
 var newForm = "<fieldset>"+$('form').html()+"</fieldset>";
    $('form').html(newForm); 
```

# class - 从 Arduino 中的库调用主程序中的函数

> ID：14427917
> 
> 赞同：3
> 
> 时间：2013-01-20T18:43:34.510
> 
> 标签：class, function, scope, call, arduino

我刚刚开始在 Arduino 中制作库。我创建了一个名为 inSerialCmd 的库。在包含 inSerialCmd 库之后，我想调用在主程序文件stackedcontrol.ino 中定义的名为delegate() 的函数。

当我尝试编译时，抛出一个错误：

> ...\Arduino\libraries\inSerialCmd\inSerialCmd.cpp：在成员函数 'void inSerialCmd::serialListen()' 中：...\Arduino\libraries\inSerialCmd\inSerialCmd.cpp:32：错误：'delegate' 没有被宣布

在进行了一些搜索之后，似乎添加范围解析运算符可能会奏效。所以我在delegate() 之前添加了“::”，现在添加了“::delegate()”，但抛出了同样的错误。

现在我难住了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T20:28:50.587

您不能也不应该**直接**从库中调用程序中的函数。请记住使库成为库的关键方面：

> 库不依赖于特定的应用程序。一个库可以在不存在程序的情况下完全编译并打包到 .a 文件中。

所以有一种单向依赖，一个程序依赖于一个库。乍一看，这似乎会阻止你实现你想要的。您可以通过有时称为回调的方式来实现您所询问的功能。主程序将在运行时向库提供一个指向要执行的函数的指针。

```
// in program somwehere
int myDelegate(int a, int b);

// you set this to the library
setDelegate( myDelegate ); 
```

如果您查看中断处理程序的安装方式，您会在 arduino 中看到这一点。同样的概念存在于许多环境中——事件侦听器、动作适配器——所有这些都具有相同的目标，即允许程序定义库无法知道的特定动作。

该库将通过函数指针存储和调用函数。这是一个粗略的草图：

```
// in the main program
int someAction(int t1, int t2) {
  return 1;
}

/* in library
this is the delegate function pointer
a function that takes two int's and returns an int */
int (*fpAction)(int, int) = 0;   

/* in library
this is how an application registers its action */
void setDelegate( int (*fp)(int,int) ) {
  fpAction = fp; 
}

/* in libary
this is how the library can safely execute the action */
int doAction(int t1, int t2) {
  int r;
  if( 0 != fpAction ) {
    r = (*fpAction)(t1,t2);
  }
  else {
    // some error or default action here
    r = 0;
  }
  return r;
}

/* in program
The main program installs its delegate, likely in setup() */
void setup () {
  ...      
  setDelegate(someAction);
  ... 
```

# jquery - 滑出式面板未按预期重置

> ID：14427920
> 
> 赞同：0
> 
> 时间：2013-01-20T18:44:05.197
> 
> 标签：jquery, position, panel, slide

我目前正在开发一个 jquery tab-slide out 插件，这里提供：http: [//www.atwebpresence.com/client/orto/index.html](http://www.atwebpresence.com/client/orto/index.html)

问题：顶部的 3 个选项卡在关闭时应向下滑动并返回原始位置。原来的位置是：

```
top: 70px;
position: fixed; 
```

但是，当我打开该选项卡时，这些更改为：

```
left: 0px; 
```

当我关闭它们时，会设置以下属性：

```
left: 0px;
top: 0px; 
```

我想实现以下目标： - 左侧属性保持不变 - 关闭选项卡时顶部属性重新设置为 70px。

我希望这足够清楚。预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:54:50.900

怎么样：

```
$('.tab').on('click', function() {
   var t = $(this);
   var e = $('.slide');
   // If already open
   if (t.hasClass('open')) {
      // Reset position of slide element & remove classname
      t.removeClass('open');
      e.css({ 'left' : '0px', 'top' : '0px' });
   } else {
      // Assign classname to tab and pull element out
      t.addClass('open');
      e.css({ 'left' : '0px' });
   }
}); 
```

# xquery - XDMP 函数：字符串到 XML

> ID：14427923
> 
> 赞同：4
> 
> 时间：2013-01-20T18:44:28.530
> 
> 标签：xquery, marklogic

marklogic 函数库中是否定义了任何方法，通过它我们可以将字符串（`xs:string`类型）转换（或尝试转换）为 xml ' `document`' 类型？在我的问题中，我通常会通过请求参数获得一个 xml。现在我必须把`parse`这个xml 作为一个文档。所以我必须把它当作一个字符串并解析它。这种情况的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T20:06:58.280

我认为[xdmp:unquote](http://docs.marklogic.com/xdmp%3aunquote)是您正在寻找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:50:29.037

在 XQuery 3.0 中，只需使用标准的 XPath 3.0 函数**[`parse-xml()`](http://www.w3.org/TR/xpath-functions-30/#func-parse-xml)**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T14:22:43.783

```
xdmp:eval("<ok/>") 
```

或者

```
xdmp:value("<ok/>") 
```

它们都可以用于您的问题。

问候

# android - 从按钮中显示的微调器中选择的项目

> ID：14427924
> 
> 赞同：0
> 
> 时间：2013-01-20T18:44:34.357
> 
> 标签：android, button, spinner

从我的微调器中选择某些内容后，我想在按钮中显示某个值。但它没有做它的事情。请看一下我的编码：

```
 public void onItemSelected(AdapterView<?> parent, View arg1, int position,
        long arg3) {
    // TODO Auto-generated method stub
    selected = parent.getItemAtPosition(position).toString();
    int index = parent.getSelectedItemPosition();

    if(index == 0){
        strCalories = "188 calories";
        calories.setText(strCalories);
    }
    else if ( index == 1 ){
        strCalories = "185 calories";
        calories.setText(strCalories);
    }
    else if ( index == 2 ){
        strCalories = "126 calories";
        calories.setText(strCalories);
    }
    else if ( index == 3 ){
        strCalories = "149 calories";
        calories.setText(strCalories);
    }
    else if ( index == 4 ){
        strCalories = "81 calories";
        calories.setText(strCalories);
    }
    else if ( index == 5 ){
        strCalories = "66 calories";
        calories.setText(strCalories);
    }
    else if ( index == 6 ){
        strCalories = "46 calories";
        calories.setText(strCalories);
    }
    else if ( index == 7 ){
        strCalories = "89 calories";
        calories.setText(strCalories);
    }

}

        public void onClick(View v) {
    // TODO Auto-generated method stub

        switch( v.getId() ){
    case R.id.btBreadWhiteSave:
        String mealname = selected;

        String servng = calories.getText().toString();

        if ( ( mealname.isEmpty() || servng.isEmpty() ) ){

            // call for custom toast
            viewErrorToast();
        }

        else {

        boolean didItWork = true;

        try{

            BreakFastLog entry = new BreakFastLog(Bread_White.this);
            entry.open();

            entry.createEntry(mealname, servng);

            entry.close();
            }
            catch(Exception e){
                didItWork = false;
                viewErrorToast();
            }finally{
                if (didItWork){
                    viewBMRSavedToast();
                }

            }
        } // end of if else statement
        break; 
```

我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="@drawable/ihealthfirst" >

<include
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    layout="@layout/tabs_menu" />

<TextView
    android:id="@+id/tvWhiteBread"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/whitebread"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<Spinner
    android:id="@+id/spWhiteBread"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:prompt="@string/white_bread_prompt"
    android:entries="@array/white_bread_arrays" />

<TextView
    android:id="@+id/btBreadWhiteCalories"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<Button
    android:id="@+id/btBreadWhiteSave"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/save" />

</LinearLayout> 
```

我在这里缺少什么？请帮我找出这里出了什么问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:52:16.300

将`position`传入的参数用作 onItemSelected 回调的参数作为索引。不是`getSelectedItemPosition()`

# google-chrome - Chrome 浏览器中直接到语音搜索的快捷方式

> ID：14427925
> 
> 赞同：-1
> 
> 时间：2013-01-20T18:44:41.593
> 
> 标签：google-chrome, browser, google-chrome-extension

我正在帮助某人从一次事故中恢复过来，这使她难以准确地键入和控制鼠标。我不熟悉浏览器中使用的脚本语言，但想知道以下是否可行：

按下键盘快捷键或功能键，1) 创建一个新选项卡并在其中打开 google.com，然后，2) 自动“选择”麦克风以启动语音搜索，而无需用户直接选择或使用“Shift-CMD-”。快捷方式，这样她就可以在搜索命令中开始交谈，而无需进一步的键盘交互。

正在使用的计算机是运行 OS X 10.8.x 的 mac，浏览器是 Chrome。我已经搜索了可以执行此操作的 chrome 扩展，但找不到任何有用的。

任何想法都非常感谢。

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-11T10:28:38.037

您是否考虑过可编程键盘？对于灵巧/精确度有限的人，这些设备可以提供您需要的解决方案，并通过将键的数量限制为映射到特定功能的小子集来简化键盘输入。

这个 24 键小键盘提供了完整的可编程性，尽管一些评论者表示它的编程很复杂。 [http://www.amazon.com/XK-24-USB-Programmable-Keypad-Windows/dp/B003MB780E/](https://rads.stackoverflow.com/amzn/click/com/B003MB780E)

一个更便宜、可能更容易编程的选择是查看带有几个可编程热键的键盘。这款键盘的一个好处是它可以与 3 台设备配对并与 Mac、iPad/ods、Win PC 等一起使用。因此，如果您的朋友也难以使用手机，这可能是一个巨大的帮助。 [http://www.amazon.com/Logitech-Bluetooth-Illuminated-Keyboard-Smartphones/dp/B0099SMFVQ/](https://rads.stackoverflow.com/amzn/click/com/B0099SMFVQ)

# vba - 将下一个窗口设置为活动窗口 (ALT+TAB)

> ID：14427929
> 
> 赞同：1
> 
> 时间：2013-01-20T18:45:07.923
> 
> 标签：vba

我正在使用键盘快捷键运行 vbs 文件。虽然代码运行良好，但 vbs 快捷键的问题是，只要您按下键盘快捷键，前台窗口就会失去焦点。（您可以通过在某处放置一个空的 vbs 文件、该文件的快捷方式（例如开始菜单文件夹）、分配给该快捷方式的键盘快捷方式并按下键盘快捷方式来亲自尝试。）

我发现通过使用 ALT+TAB，我可以让前景窗口重新获得焦点。但是，我无法在 VBA 中重复此功能。显然，`ShellObject.SendKeys("%{TAB}")`不起作用...

有没有什么办法可以实现VBA中ALT+TAB的功能？提前致谢。

**编辑**

与此同时，我改用 AutoIt 看看它是否能让我走得更远。这就是我得到的：

```
ControlFocus("[CLASS:CabinetWClass]", "", "[CLASS:DirectUIHWND]") 
```

我注意到在某些情况下选择资源管理器窗口（即 CabinetWClass）是不够的。这就是为什么我将重点放在实际包含文件/文件夹的控件上。

它工作得很好，但我仍然希望有一个 VBA 解决方案:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:48:59.803

如果您也知道要切换的项目的名称，可以尝试[AppActivate功能，在这种情况下您可能不知道。](http://msdn.microsoft.com/en-us/library/dyz95fhy%28v=vs.80%29.aspx)

否则，试试这个：

```
SendKeys "%{TAB}", True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T23:14:01.953

您可以使用 Windows API 将其带回顶部吗？当在 Excel 中运行以将记事本置于顶部时，这对我有用，因此它应该可以工作。您必须在 FindWindow 调用中替换您的窗口名称。

注意：你应该非常小心一些标志，因为如果你对它们进行了一些错误的组合，你会得到一些奇怪的行为。

```
Public Declare Function FindWindow Lib "user32" _
    Alias "FindWindowA" ( _
    ByVal lpClassName As String, _
    ByVal lpWindowName As String) As Long

Declare Function SetWindowPos Lib "user32.dll" (ByVal hwnd As _
        Long, ByVal hWndInsertAfter As Long, ByVal x As Long, ByVal y As _
        Long, ByVal cx As Long, ByVal cy As Long, ByVal wFlags As Long) As Long

'Either the handle of the window to position this window behind, or exactly one of the following flags stating where in the
'Z-order to put the window:
Private Const HWND_BOTTOM = 1             'Put the window at the bottom of the Z-order.
Private Const HWND_NOTOPMOST = -2         'Put the window below all topmost windows and above all non-topmost windows.
Private Const HWND_TOP = 0                'Put the window at the top of the Z-order.
Private Const HWND_TOPMOST = -1           'Make the window topmost (above all other windows) permanently.

'x: The x coordinate of where to put the upper-left corner of the window.
'y: The y coordinate of where to put the upper-left corner of the window.
'cx: The x coordinate of where to put the lower-right corner of the window.
'cy: The y coordinate of where to put the lower-right corner of the window.

'Flags: Zero or more of the following flags stating how to move the window:
Private Const SWP_DRAWFRAME = &H20            'Same as SWP_FRAMECHANGED.
Private Const SWP_FRAMECHANGED = &H20         'Fully redraw the window in its new position.
Private Const SWP_HIDEWINDOW = &H80           'Hide the window from the screen.
Private Const SWP_NOACTIVATE = &H10           'Do not make the window active after moving it unless it was already the active window.
Private Const SWP_NOCOPYBITS = &H100          'Do not redraw anything drawn on the window after it is moved.
Private Const SWP_NOMOVE = &H2                'Do not move the window.
Private Const SWP_NOSIZE = &H1                'Do not resize the window.
Private Const SWP_NOREDRAW = &H8              'Do not remove the image of the window in its former position, effectively leaving a ghost image on the screen.
Private Const SWP_NOZORDER = &H4              'Do not change the window's position in the Z-order.
Private Const SWP_SHOWWINDOW = &H40           'Show the window if it is hidden.

Sub ShowWindow()
    Dim hwnd As Long 'handle to get the window
    Dim flags As Long ' the flags specifying how to move the window
    Dim retval As Long ' return value

    hwnd = FindWindow(vbNullString, "Untitled - Notepad")
    flags = SWP_NOSIZE Or SWP_DRAWFRAME
    retval = SetWindowPos(hwnd, HWND_TOP, 0, 0, 1, 1, flags) ' move the window
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-04T08:55:38.163

`ActiveWindow.ActivateNext`并且可能类似的可能有用。

# php - GeSHi 的检测代码

> ID：14427931
> 
> 赞同：0
> 
> 时间：2013-01-20T18:45:28.250
> 
> 标签：php, text, blogs, geshi

我正在用 PHP + MySQL 从头开始​​制作博客，有时我会在其中发布几行 PHP 代码用于教程等……所以，我在我的项目中安装了 GeSHi 类。但是因为我会以普通文本格式写我的博客/文章，所以我会写一些教程，比如：

> ```
> Here is some PHP code:
> [code=php]
> <?php
> echo 'Hello World!';
> ?>
> [/code] 
> ```

这将以 TEXT 格式存储在我的 MySQL 数据库中，那么我该如何设置 PHP 来识别代码并使用 GeSHi 类来解析它呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:59:19.053

哟可以通过简单的[常规替换](http://php.net/manual/en/function.preg-replace-callback.php)来做到这一点：

```
function code($match) {
    $geshi = new GeSHi($match[2], $match[1]);
    return $geshi->parse_code();
}
$html = preg_replace_callback('~\[code=(.+?)\](.+?)\[\/code\]~is', 'code', $text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:00:36.893

有两种方法：

# 最简单但更糟糕：

```
preg_replace_callback('#\[code=([a-zA-Z]+)](.+)\[/code]#sU',function($matches){
    $geshi = new GeShi($matches[1]);
     return $geshi->parse($matches[2]);
    },
 $text    ); 
```

# Little Harder 但非常有效和适应性强：

[http://php.net/manual/fr/book.bbcode.php](http://php.net/manual/fr/book.bbcode.php)

```
$bbcodeContainer = bbcode_create(array(
''=>         array('type'=>BBCODE_TYPE_ROOT,  'childs'=>'!i'),
'i'=>        array('type'=>BBCODE_TYPE_NOARG, 'open_tag'=>'<i>',
                'close_tag'=>'</i>', 'childs'=>'b'),
'url'=>      array('type'=>BBCODE_TYPE_OPTARG,
                'open_tag'=>'<a href="{PARAM}">', 'close_tag'=>'</a>',
                'default_arg'=>'{CONTENT}',
                'childs'=>'b,i'),
'img'=>      array('type'=>BBCODE_TYPE_NOARG,
                'open_tag'=>'<img src="', 'close_tag'=>'" />',
                'childs'=>''),
'b'=>        array('type'=>BBCODE_TYPE_NOARG, 'open_tag'=>'<b>',
                'close_tag'=>'</b>'),
 ));

bbcode_add_element($bbcodeContainer,'code',array('type'=>BBCODE_TYPE_OPTARG,
         'open_tag'=>'<div class="code">','close_tag'=>'</div>',
         'content_handling'=>function($content,$params){
                $geshi = new GeShi($params[0]);
                return $geshi->parse($content);   
            })); 
```

# xcode - libstk.a 架构 x86_64（或 i386）的未定义符号

> ID：14427932
> 
> 赞同：1
> 
> 时间：2013-01-20T18:45:27.597
> 
> 标签：xcode, x86-64, toolkit, i386, synthesis

我尝试在 XCode 4.5.1 应用程序项目中使用库 libstk.a（来自 The Synthesis ToolKit in C++ (STK)）来构建标准（32/64 位 Intel）架构。我只是将文件 libstk.a 和 stk.h 放到我的项目中。

首先，我按照 stk 文档（./configure with --with-core 和 --enable-debug）中给出的说明制作了 stk-4.4.4 库，然后在 src 目录中制作。它提供了 libstk.a 文件而没有错误。在 xcode 项目中，没有语法错误，但链接错误：架构 x86_64 的未定义符号用于不同方法（可能全部）+ i386 相同看起来 libstk.a 不是为 i386 或 x86_64 构建的。

我使用命令行来制作库，我对此并不熟悉。如何确保为 i386 和 i86_64 架构构建库？我是否必须做一些不同的事情才能将库包含在我的项目中，而不仅仅是将它放在文件列表中？我需要帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:46:22.597

使用`-arch i386`或`-arch x86_64`gcc 选项..

# asp.net - ASP.NET 按月分组数据

> ID：14427936
> 
> 赞同：4
> 
> 时间：2013-01-20T18:46:13.823
> 
> 标签：asp.net

我希望按月对一些数据进行分组（存储在 SQL 数据库中），使用可折叠的 DIV，毫无疑问使用 jQuery。我不是特别想使用 GridView，因为在编写 jQuery 时为了简单起见，我想远离表格。

在 ASP.NET 中执行此操作的最佳方法是什么，我将使用哪个控件？

请参阅以下示例，了解我要描述的内容：

![分组示例](../Images/6e1f2d51f493210a62ec5300fb9a895e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T17:52:40.100

我创建了一个使用嵌套中继器按月显示数据的项目，它已上传到[Google Docs](https://docs.google.com/file/d/0B0iPiW5jXDdPSDhxakcxTEJmY1U/edit)（只需单击文件->保存即可下载 .zip）。

以下是其工作原理的简要概述：

假设您在数据库中有一个简单的 Orders 表，其中包含以下列

1.  订单编号
2.  产品
3.  数量
4.  销售日期

## 过程

1.  执行存储过程以获取给定年份的月份（我使用了 EntityFramework 函数，您可以将其更改为 ADO.NET、LINQ 等）
2.  将返回的月份绑定到主中继器中的标签（这些将是您的标题）
3.  处理`OnItemDataBound`主转发器的**事件，每次将项目绑定到转发器时都会运行此事件**。
4.  在里面`OnItemDataBound`执行一个存储过程来获取特定月份和年份的所有记录，并将返回的数据简单地绑定到子转发器
5.  添加小 jQuery 来显示和隐藏 div 就可以了。

## 代码

**存储过程：**

```
CREATE PROCEDURE dbo.GetMonthsByYear
@Year INT 
AS
BEGIN
    SELECT DISTINCT DATENAME(Month,DateOfSale) AS [Month] FROM Orders
    WHERE Year(DateOfSale) = @Year
END

CREATE PROCEDURE dbo.GetOrdersByMonth
@Month NVARCHAR(15),
@Year INT 
AS
BEGIN
    SELECT * FROM Orders
    WHERE (Year(DateOfSale) = @Year) AND DATENAME(MONTH,DateOfSale) = @Month
END 
```

**ASPX：**

```
<head runat="server">
    <script src="Scripts/jquery-1.7.1.js" type="text/javascript"></script>
    <script type="text/javascript">
        var showHide;
        $(document).ready(function () {
            showHide = function (control) {
                var parent = $(control).next();
                var display = parent.css('display');
                if (display == "none") { parent.fadeIn('slow'); }
                else { parent.fadeOut('slow'); }

            };
        });
    </script>
    <style type="text/css">
        .detail
        {
            height:300px;
            display:none;
            width: 100%;
            border: 1px solid black;
        }

        .header
        {
            vertical-align: top;
            padding: 3px;
            height: 30px;
            background: black;
            color: White;
            font-weight: bold;
        }
    </style>
    <title>Nested Repeater</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        Select year:&nbsp;<asp:TextBox ID="txtYear" runat="server" /><br />
        <asp:Button ID="btnSearch" runat="server" Text="Search" OnClick="Search" /><br />
        <asp:Repeater ID="masterRepeater" runat="server" OnItemDataBound="ItemDataBound">
            <ItemTemplate>
                <div id='<%# Container.DataItem  %>' class="header" onclick="showHide(this);">
                    <asp:Label ID="lblMonth" runat="server" Text='<%# Container.DataItem %>' />
                </div>
                <div class="detail">
                    <asp:Repeater ID="detailRepeater" runat="server">
                        <HeaderTemplate>
                            <span style="text-decoration: underline">Product</span><br />
                        </HeaderTemplate>
                        <ItemTemplate>
                            <asp:Label ID="lblName" runat="server" Text='<%# Bind("Product") %>' />
                            <asp:Label ID="lblQuantity" runat="server" Text='<%# Bind("Quantity") %>' />
                            <asp:Label ID="lblDateOfSale" runat="server" Text='<%# Bind("DateOfSale") %>' /><br />
                        </ItemTemplate>
                    </asp:Repeater>
                </div>
            </ItemTemplate>
        </asp:Repeater>
    </div>
    </form>
</body> 
```

**后面的代码：**

```
protected void Search(object sender, EventArgs e)
{
    int year = 0;
    if (Int32.TryParse(txtYear.Text, out year))
    {
        orderEntities orders = new orderEntities();
        List<string> months = orders.GetMonthByYear(year).ToList();
        masterRepeater.DataSource = months;
        masterRepeater.DataBind();
    }
}

protected void ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        int year = 0;
        if (Int32.TryParse(txtYear.Text, out year))
        {
            Label lblMonth = e.Item.FindControl("lblMonth") as Label;
            if (lblMonth != null)
            {
                string month = lblMonth.Text;
                Repeater detailRepeater = e.Item.FindControl("detailRepeater") as Repeater;
                if (detailRepeater != null)
                {
                    orderEntities orders = new orderEntities();
                    var ordersByMonth = orders.GetOrdersByMonth(month, year).ToList();
                    detailRepeater.DataSource = ordersByMonth;
                    detailRepeater.DataBind();
                }
            }
        }
    }
} 
```

**结果：**

![在此处输入图像描述](../Images/84149663a2763a3bfee1015f9bad39b2.png)

# c# - 如何从 xml 中检索信息，如 C# 中的天气

> ID：14427939
> 
> 赞同：-1
> 
> 时间：2013-01-20T18:46:41.580
> 
> 标签：c#, xml

我正在尝试学习一些关于 xml 的知识。例如，我想将天气信息放在我的 C# 编程中，并从示例 NOAA 站或其他地方检索它。另外，如果可能的话，我可以去哪里学习如何将 xml 之类的信息检索到您的编程中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:42:17.130

这是使用 VB 获取 NOAA 天气的一种方法。它在 C# 中应该非常接近。

```
link = "http://graphical.weather.gov/xml/SOAP_server/ndfdXMLclient.php?whichClient=NDFDgen&lat=" & _
   Format(dLat, "###.###") & "&lon=" & Format(dLon, "###.###")
s = client.DownloadString(link)
xmldoc.LoadXml(s) 
```

这会将所有信息放入您可以使用的 XmlDocument 中。您可以在此处了解如何使用 XmlDocument：

[http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)

# c# - 设置 Listviewitem 的宽度

> ID：14427940
> 
> 赞同：0
> 
> 时间：2013-01-20T18:46:45.043
> 
> 标签：c#, winforms, listview, listviewitem

我有一个 Listview，它有一列。视图设置为列表，我可以看到每个 Listviewitem 但我无法选择项目的行，我必须选择项目的文本。是否可以使 Listviewitem 的宽度与 Listview 本身的大小相同，以便用户可以单击 Listviewitem 上的任意位置来选择项目？

我尝试搜索，但只能找到如何更改列宽以及如何在 XAML 中修复它，但这是针对 WinForm 的。

编辑 - 根据要求，这是由 Visual Studio 设计器生成的代码。它是与 ListviewItem 相关的唯一代码。

```
System.Windows.Forms.ListViewItem listViewItem1 = new System.Windows.Forms.ListViewItem("1");
System.Windows.Forms.ListViewItem listViewItem2 = new System.Windows.Forms.ListViewItem("2");
System.Windows.Forms.ListViewItem listViewItem3 = new System.Windows.Forms.ListViewItem("3");
System.Windows.Forms.ListViewItem listViewItem4 = new System.Windows.Forms.ListViewItem("4");
System.Windows.Forms.ListViewItem listViewItem5 = new System.Windows.Forms.ListViewItem("5");
System.Windows.Forms.ListViewItem listViewItem6 = new System.Windows.Forms.ListViewItem("6");
System.Windows.Forms.ListViewItem listViewItem7 = new System.Windows.Forms.ListViewItem("7");
this.listView1 = new System.Windows.Forms.ListView();

this.listView1.Activation = System.Windows.Forms.ItemActivation.OneClick;
            this.listView1.AllowDrop = true;
            this.listView1.AutoArrange = false;          
            this.listView1.BorderStyle = System.Windows.Forms.BorderStyle.None;
            this.listView1.Font = new System.Drawing.Font("Microsoft Sans Serif", 15.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
            this.listView1.ForeColor = System.Drawing.SystemColors.MenuHighlight;
            this.listView1.HeaderStyle = System.Windows.Forms.ColumnHeaderStyle.None;
            listViewItem1.StateImageIndex = 0;
            this.listView1.Items.AddRange(new System.Windows.Forms.ListViewItem[] {
            listViewItem1,
            listViewItem2,
            listViewItem3,
            listViewItem4,
            listViewItem5,
            listViewItem6,
            listViewItem7});
            this.listView1.Location = new System.Drawing.Point(105, 129);
            this.listView1.Name = "listView1";
            this.listView1.Size = new System.Drawing.Size(157, 475);
            this.listView1.TabIndex = 4;
            this.listView1.UseCompatibleStateImageBehavior = false;
            this.listView1.View = System.Windows.Forms.View.List; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T19:10:59.730

一个简单的解决方案是使用 ListBox 而不是 List View

如果是简单的文本，最好使用 ListBox。

**更新：**

在 ListView 中获得此功能的最简单的技巧是在每个项目字符串的末尾添加虚拟空格以进行填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:37:32.480

[Better ListView](http://www.componentowl.com/better-listview)和[Better ListView Express](http://www.componentowl.com/better-listview-express)（免费）支持这一点。默认情况下，它的行为类似于 ListBox（详细信息视图，无列）：

![在此处输入图像描述](../Images/8a71f00982ac3107b3b11bdeb1038596.png)

可以通过将**AutoSizeItemsInDetailsView**属性设置为**true**来触发项目自动调整大小：

```
betterListView.AutoSizeItemsInDetailsView = true; 
```

# r - 使用 automap 包的交叉验证问题

> ID：14427941
> 
> 赞同：1
> 
> 时间：2013-01-20T18:46:45.803
> 
> 标签：r, gstat, spatial-interpolation, automap, geor

我想对 geoR 包中的 ca20-Dataset 进行交叉验证。例如，使用 meuse 数据集，这工作正常，但对于这个数据集，我遇到了 SpatialPointsDataFrame 尺寸的奇怪问题。也许您可以自己尝试一下并解释为什么 autoKrige.cv 函数不起作用（我尝试了几个 nfold-values 但这只会更改错误消息的位置值...）：

```
library(geoR)
library(gstat)
library(automap)
data(ca20)
east=ca20$coords[,1]
north=ca20$coords[,2]
concentration=ca20$data
frame=data.frame(east,north)
data=data.frame(concentration)
points<-SpatialPoints(data.frame(east,north),proj4string=CRS(as.character(NA)))
pointsframe<-SpatialPointsDataFrame(points,data, coords.nrs = numeric(0),proj4string = CRS(as.character(NA)), match.ID = TRUE)
krig=autoKrige(pointsframe$concentration~1,pointsframe)
plot(krig)
cv=autoKrige.cv(pointsframe$concentration~1,pointsframe) 
```

我希望有人能重现这个问题，我的 R 版本是 2.15，所有包都是最新的（至少不超过一个月左右......）。

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:23:43.227

首先，您构建 SpatialPointsDataFrame 的方式可以更轻松地完成：

```
library(geoR)
library(gstat)
library(automap) 
```

...并构建 SPDF：

```
pointsframe = data.frame(ca20$coords)
pointsframe$concentration = ca20$data
coordinates(pointsframe) = c("east", "north") 
```

您遇到的问题在于如何使用`formula`论点。您将空间对象添加`pointsframe`到公式中，实质上是将向量直接放入公式中。您应该只在公式中使用列名，如下所示：

```
cv=autoKrige.cv(concentration~1,pointsframe) 
```

它有效：

```
> summary(cv)
            [,1]      
mean_error  -0.01134  
me_mean     -0.0002237
MAE         6.02      
MSE         60.87     
MSNE        1.076     
cor_obspred 0.7081    
cor_predres 0.01343   
RMSE        7.802     
RMSE_sd     0.7041    
URMSE       7.802     
iqr         9.519 
```

# css - 无法水平对齐 DIV 左/中/右

> ID：14427944
> 
> 赞同：0
> 
> 时间：2013-01-20T18:47:25.683
> 
> 标签：css, html

我有这个 HTML：

```
<html>
<head>
    <title>TEST</title>
    <link rel="stylesheet" type="text/css" href="css/style1.css">
</head>
<body>
<div class="container">
    <div class="left">
        <a class="nolinea" href="test.html"><div class="grezzo"> Tunz-tunz-parapara-tunz</div></a><br>
        <a class="nolinea" href="test.html"><div class="grezzo"> Tunz-tunz-parapara-tunz</div></a><br>
        <a class="nolinea" href="test.html"><div class="grezzo"> Tunz-tunz-parapara-tunz</div></a><br>
        <a class="nolinea" href="test.html"><div class="grezzo"> Tunz-tunz-parapara-tunz</div></a><br>
    </div>
    <div class="center">
        <a class="nolinea" href="test.html"><div class="grezzo"> Tunz-tunz-parapara-tunz</div></a><br>
        <a class="nolinea" href="test.html"><div class="grezzo"> Tunz-tunz-parapara-tunz</div></a><br>
        <a class="nolinea" href="test.html"><div class="grezzo"> Tunz-tunz-parapara-tunz</div></a><br>
        <a class="nolinea" href="test.html"><div class="grezzo"> Tunz-tunz-parapara-tunz</div></a><br>
    </div>
    <div class="right">
        <a class="nolinea" href="test.html"><div class="grezzo"> Tunz-tunz-parapara-tunz</div></a><br>
        <a class="nolinea" href="test.html"><div class="grezzo"> Tunz-tunz-parapara-tunz</div></a><br>
        <a class="nolinea" href="test.html"><div class="grezzo"> Tunz-tunz-parapara-tunz</div></a><br>
        <a class="nolinea" href="test.html"><div class="grezzo"> Tunz-tunz-parapara-tunz</div></a><br>
    </div>
</div>
</body>
</html> 
```

这个CSS：

```
.grezzo{
-webkit-border-radius: 30px 30px 30px 30px;
-moz-border-radius: 30px 30px 30px 30px;
border-radius: 30px 30px 30px 30px;
width: 200px;
padding: 30px 30px 30px 30px;
background: grey;
text-align:center;
color: white;
box-shadow: 15px 15px 10px black;
transition: border-radius 2s, background 2s;
-moz-transition: -moz-border-radius 2s, background 2s;
-webkit-transition: -webkit-border-radius 2s, background 2s;
}
.grezzo:hover {
-webkit-border-radius: 40px 30px 40px 30px;
-moz-border-radius: 40px 30px 40px 30px;
border-radius: 40px 30px 40px 30px;
transition: border-radius 2s, background 2s;
-moz-transition: -moz-border-radius 2s, background 2s;
-webkit-transition: -webkit-border-radius 2s, background 2s;
background: darkblue;
}

.nolinea {
text-decoration: none;
}
.left{
float: left;
width: 500px;
}
.center{
margin:0 auto;
width: 100%;
}

.right{
float: right;
width: 500px;

}
.container{
width: 100%;
} 
```

这就像[jsfiddle](http://jsfiddle.net/4LRuA/)一样。

我的问题是：我想让我的 3 个菜单左/中/右，就像一张桌子，但不使用它。我怎么能像这样放置它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:57:00.287

您可以对表格使用 CSS 显示类型，也可以将所有三个菜单（.left、.center、.right）*都向左*浮动，并为其设置合适的宽度。您正在混合像素宽度和百分比宽度，这可能会给您带来问题，但如果您执行以下操作：

```
.left, .center, .right {
    float: left;
    width: 33%;
} 
```

你至少会看到你想要的东西的开始。因为 .grezzo 是 200px 宽，所以如果你[在 jsfiddle 中这样做](http://jsfiddle.net/4LRuA/2/)，会有一些重叠。在不了解您的整体页面布局的情况下，很难判断这是否真的对您来说是一个好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:50:42.840

给每个 div 相同的类，例如`.block`对于 css，添加`.block { display: inline-block; }`

[http://jsfiddle.net/4LRuA/1/](http://jsfiddle.net/4LRuA/1/)

# android - Card.io 调用 onActivityResult 太快了？

> ID：14427945
> 
> 赞同：0
> 
> 时间：2013-01-20T18:47:35.087
> 
> 标签：android, card.io

我只是将一个简单的 card.io 3.03 实现放入我的 Android 应用程序中，但是当我启动 CardIOActivity 时，我立即调用了我的 onActivityResult，其数据为空，resultCode 为 0 (RESULT_CANCELLED)。调用onActivityResult后，显示card.io活动，可以正常拍照。但是在成功拍摄并读取卡后，不会再次调用 onActivityResult ，因此我无法将卡号传回我的应用程序。我正在提供应用程序令牌，我相当有信心我没有做错，因为我可以在 card.io 网站上看到扫描指标。

这是我用来启动card.io的内容： Intent scanIntent = new Intent(this, CardIOActivity.class);

```
 // required for authentication with card.io
    scanIntent.putExtra(CardIOActivity.EXTRA_APP_TOKEN, CARDIO_APP_TOKEN);

    scanIntent.putExtra(CardIOActivity.EXTRA_REQUIRE_EXPIRY, true);
    scanIntent.putExtra(CardIOActivity.EXTRA_REQUIRE_CVV, false);
    scanIntent.putExtra(CardIOActivity.EXTRA_REQUIRE_ZIP, false);

    startActivityForResult(scanIntent, DemoAppConfig.SCAN_REQUEST_CODE); 
```

# java - 弹性搜索方面限制

> ID：14427950
> 
> 赞同：1
> 
> 时间：2013-01-20T18:47:51.740
> 
> 标签：java, elasticsearch, heap-memory, facet

我在 EC2 实例上使用 elasticsearch 0.20.2（16GB RAM，未启用交换）。我有很多索引文档，当我尝试做方面结果时，我得到了堆空间错误，然后弹性搜索服务器不可用。我正在增加 Java 的堆内存，但没有任何帮助。所以我的问题是我可以限制将应用哪个方面的文档数量。

这是我的设置和映射：

```
my_settings = {
    'settings': {
        'analysis': {
            'analyzer': {
                'text_analyzer': {
                    'tokenizer': 'standard',
                    'filter': ['standard', 'lowercase']
                },
                'suggestions_analyzer': {
                    'tokenizer': 'standard',
                    'filter': ['suggestions_shingle']
                }
            },
            'filter': {
                'suggestions_shingle': {
                    'type': 'shingle',
                    'min_shingle_size': 2,
                    'max_shingle_size': 5
                }
            }
        }
    }
}

my_mapping = {
    'test-type':{
        'properties':{
            'publish_datetime': {'type': 'date'},
            'text': {
                'type': 'multi_field',
                'fields': {
                    'text': {'type': 'string', 'analyzer': 'text_analyzer', 'include_in_all': True},
                    'suggestions': {'type': 'string', 'analyzer': 'suggestions_analyzer', 'include_in_all': False}
                }
            }
        }
    }
} 
```

我的搜索查询是：

```
query = {
    'filtered': {
        'filter' : {
            'limit' : {'value' : 10}
        },
        'query':{
            'prefix':{
                    'text.suggestions': 'wha'
            }
        },
    },
    'facets':{
        'text_suggestions':{
            'terms':{
                'field':'text.suggestions',
                'regex':'^%s.*' % 'wha',
                'size': 5
            }
        }
    },
    'size': 0
} 
```

是否有人成功限制将与我们分享的文件数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:02:34.547

不，不可能人为地限制运行聚合的文档数量——聚合显然是不正确的。构面受您发出的查询（以及您使用的任何 facet_filters）的限制。

所以，有几个方法要记住：

*   通常，方面将受到`query`您发送到 Elasticsearch的限制
*   您正在处理的字段的值将被加载到内存中
*   有一些技术可以防止*临时*分面的内存不足错误，但它们对于常规的用户公开搜索/分面没有用

请参阅邮件列表中预先讨论的[*Estimating field cache size for facets 。*](https://groups.google.com/forum/?fromgroups=#!topic/elasticsearch/1N2qvxQkjB4)

根据您发布的查询，不清楚您要在`text.suggestions`现场进行刻面做什么？

# jquery - 将 JSP 变量转换为 jQuery 时出现引号问题

> ID：14427954
> 
> 赞同：1
> 
> 时间：2013-01-20T18:48:42.710
> 
> 标签：jquery, jsp, quotes

这是我的代码

```
<c:set var="initSubjectCategories" value="${requestScope.initSubjectCategories}" scope="page" />
<c:set var="initSubjects" value="${requestScope.initSubjects}" scope="page" />
<c:set var="initRelations" value="${requestScope.initRelations}" scope="page" />
<c:set var="initComplements" value="${requestScope.initComplements}" scope="page" />
<c:set var="initComplementCategories" value="${requestScope.initComplementCategories}" scope="page" />
<c:set var="initTriplets" value="${requestScope.initTriplets}" scope="page" />

var initSubjectCategories = "${requestScope.initSubjectCategories}";
var initComplementCategories = "${requestScope.initComplementCategories}";
var initSubjects = "${requestScope.initSubjects}";
var initComplements = "${requestScope.initComplements}";
var initRelations = "${requestScope.initRelations}";
var initTriplets = "${requestScope.initTriplets}"; 
```

问题是，当其中一个字符串包含单引号或双引号时，加载网页时出现错误。

我尝试使用`.replace(/"/g, '\"');`带有反斜杠的双引号替换双引号，但它什么也没做。我也尝试过`encodeURIComponent("${requestScope.initTriplets}")`，但它也没有做任何事情。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:22:11.770

您需要在*服务器*端转义这些字符。添加`escapeXml="true"`到输入标签。

如果你不这样做，它会得到如下输出：

```
<input value="valwithquo"tes"/> 
```

JavaScript 现在帮助您为时已晚，因为该值是`valwithquo`（否则是无效的 html）

# jquery - 如何获取动态字段值 - jQuery

> ID：14427957
> 
> 赞同：1
> 
> 时间：2013-01-20T18:48:51.977
> 
> 标签：jquery, html, forms, dynamic-forms

我对 jQuery 很陌生，我不知道如何实现这个场景。

例如，如果我有一个表单，其中包含原始名称和电子邮件中的两个文本框。右侧是一个加号按钮，用户可以按下该按钮，另一个 raw 将在下面创建，其中包含两个字段 Name 和 Email，第二个 raw 将在右侧有一个 X 按钮，用户可以单击该按钮，该 raw 将被删除。

姓名：***_* __ *_* _** 电子邮件：***_* __ *_* __ *_*** +

姓名：***_* __ *_* _** 电子邮件：***_* __ *_* __ *_*** X

姓名：***_* __ *_* _** 电子邮件：***_* __ *_* __ *_*** X

姓名：***_* __ *_* _** 电子邮件：***_* __ *_* __ *_*** X

* * *

*   节省 -

在表单的底部有一个保存按钮。当用户按下它时，所有框中的值都会被获取并保存……这不是问题。

我的问题是我应该如何实现动态字段并在按下保存时从字段中选择值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:02:57.753

[演示](http://jsfiddle.net/MKwHh/1/) 试试这个代码：

```
 $(document).on("click",".add",function(){
       //take the id
       var id = parseInt($(this).attr('id').substr(4));
       id = id+1;
       //add new row I don't know if you have a table or div layout

       $(this).after('<p><input type="text name="name_'+id+'" id="name_'+id+'"/> <input type="text" name="email_'+id+'" id="email_'+id+'"/><input type="button" id="remove_'+id+'" class="remove" value="X"/><input type="button" class="add" id="add_'+id+'" value="+" /></p>');
    });
    $(document).on("click",".remove",function(){
       //take the id
       var id = $(this).attr('id').substr(7);
       //delete
       $("#name_"+id).remove();
       $("#email_"+id).remove();
       $("#add_"+id).remove();
       $("#remove_"+id).remove();
    }); 
```

你的html

```
 <p><input type="text name="name_1" id="name_1"/> <input type="text" name="email_1" id="email_1"/><input type="button" id="add_1" value="+" /></p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:08:45.227

如果`save`意味着向服务器发送数据，您可以使用 jQuery 序列化整个表单`serialize()`

示例 AJAX 提交：

```
$(function(){
    $('#myForm').submit(function(){
       $.post('/path/to/server/', $(this).serialize(), function(response){
          /*do something with response if needed*/
       });
       /* prevent browser default submit*/
       return false;
    });
}); 
```

API 参考：[http ://api.jquery.com/serialize](http://api.jquery.com/serialize)

如果`save`意味着本地存储可以使用`serializeArray()` [http://api.jquery.com/serializearray/](http://api.jquery.com/serializearray/)

# java - 如何添加会话？安卓 2.3

> ID：14427960
> 
> 赞同：-1
> 
> 时间：2013-01-20T18:49:25.850
> 
> 标签：java, android, session, login, add

我有问题。我有这个代码，我不能添加会话。这是用于登录的文件。

```
 package com.example.netjson;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

import com.example.netjson.library.UserFunctions;

public class DashboardActivity extends Activity {
    UserFunctions userFunctions;
    Button btnLogout;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        /**
         * Dashboard Screen for the application
         * */
        // Check login status in database
        userFunctions = new UserFunctions();
        if(userFunctions.isUserLoggedIn(getApplicationContext())){
       // user already logged in show databoard
            setContentView(R.layout.dashboard);
            btnLogout = (Button) findViewById(R.id.btnLogout);

            btnLogout.setOnClickListener(new View.OnClickListener() {

                public void onClick(View arg0) {
                    // TODO Auto-generated method stub
                    userFunctions.logoutUser(getApplicationContext());
                    Intent login = new Intent(getApplicationContext(), LoginActivity.class);
                    login.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(login);
                    // Closing dashboard screen
                    finish();
                }
            });

        }else{
            // user is not logged in show login screen
            Intent login = new Intent(getApplicationContext(), LoginActivity.class);
            login.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(login);
            // Closing dashboard screen
            finish();
        }
    }
} 
```

这个文件是登录面板：

```
package com.example.netjson;

    import java.util.HashMap;

    import org.json.JSONException;
    import org.json.JSONObject;

    import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.util.Log;
    import android.view.View;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.TextView;

    import com.example.netjson.library.DatabaseHandler;
    import com.example.netjson.library.UserFunctions;

    public class LoginActivity extends Activity {
        Button btnLogin;
        Button btnLinkToRegister;
        EditText inputEmail;
        EditText inputPassword;
        TextView loginErrorMsg;

        // JSON Response node names
        private static String KEY_SUCCESS = "success";
        private static String KEY_ERROR = "error";
        private static String KEY_ERROR_MSG = "error_msg";
        private static String KEY_UID = "uid";
        private static String KEY_NAME = "name";
        private static String KEY_EMAIL = "email";
        private static String KEY_CREATED_AT = "created_at";

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.login);

            SessionManager session;

            // Importing all assets like buttons, text fields
            inputEmail = (EditText) findViewById(R.id.loginEmail);
            inputPassword = (EditText) findViewById(R.id.loginPassword);
            btnLogin = (Button) findViewById(R.id.btnLogin);
            btnLinkToRegister = (Button) findViewById(R.id.btnLinkToRegisterScreen);
            loginErrorMsg = (TextView) findViewById(R.id.login_error);

            // Login button Click Event
            btnLogin.setOnClickListener(new View.OnClickListener() {

                public void onClick(View view) {
                    String email = inputEmail.getText().toString();
                    String password = inputPassword.getText().toString();
                    UserFunctions userFunction = new UserFunctions();
                    JSONObject json = userFunction.loginUser(email, password);

                    // check for login response
                    try {
                        if (json.getString(KEY_SUCCESS) != null) {
                            loginErrorMsg.setText("");
                            String res = json.getString(KEY_SUCCESS);
                            if(Integer.parseInt(res) == 1){
                                // user successfully logged in
                                // Store user details in SQLite Database
                                DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                                JSONObject json_user = json.getJSONObject("user");

                                // Clear all previous data in database
                                userFunction.logoutUser(getApplicationContext());
                                db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));                        

                                // Launch Dashboard Screen
                                Intent dashboard = new Intent(getApplicationContext(), DashboardActivity.class);

                                // Close all views before launching Dashboard
                                dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                                startActivity(dashboard);

                                // Close Login Screen
                                finish();
                            }else{
                                // Error in login
                                loginErrorMsg.setText("Zły login lub hasło!");
                            }
                        }
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                }
            });

            // Link to Register Screen
            btnLinkToRegister.setOnClickListener(new View.OnClickListener() {

                public void onClick(View view) {
                    Intent i = new Intent(getApplicationContext(),
                            RegisterActivity.class);
                    startActivity(i);
                    finish();
                }
            });
        }
    } 
```

我不知道这是什么 ;D

```
 package com.example.netjson.library;

import java.util.HashMap;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;

public class DatabaseHandler extends SQLiteOpenHelper {

    Editor editor;

    // All Static variables
    // Database Version
    private static final int DATABASE_VERSION = 1;

    // Database Name
    private static final String DATABASE_NAME = "android_api";

    // Login table name
    private static final String TABLE_LOGIN = "login";

    // Login Table Columns names
    private static final String KEY_ID = "id";
    private static final String KEY_NAME = "name";
    private static final String KEY_EMAIL = "email";
    private static final String KEY_UID = "uid";
    private static final String KEY_CREATED_AT = "created_at";

    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_LOGIN_TABLE = "CREATE TABLE " + TABLE_LOGIN + "("
                + KEY_ID + " INTEGER PRIMARY KEY,"
                + KEY_NAME + " TEXT,"
                + KEY_EMAIL + " TEXT UNIQUE,"
                + KEY_UID + " TEXT,"
                + KEY_CREATED_AT + " TEXT" + ")";
        db.execSQL(CREATE_LOGIN_TABLE);
    }

    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_LOGIN);

        // Create tables again
        onCreate(db);
    }

    /**
     * Storing user details in database
     * */
    public void createLoginSession(String email, String name)
    {

         // Storing name in pref
         editor.putString(KEY_NAME, name);
         // Storing email in pref
         editor.putString(KEY_EMAIL, email);
         // commit changes
         editor.commit();
    }

    public void addUser(String name, String email, String uid, String created_at) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, name); // Name
        values.put(KEY_EMAIL, email); // Email
        values.put(KEY_UID, uid); // Email
        values.put(KEY_CREATED_AT, created_at); // Created At

        // Inserting Row
        db.insert(TABLE_LOGIN, null, values);
        db.close(); // Closing database connection
    }

    /**
     * Getting user data from database
     * */
    public HashMap<String, String> getUserDetails(){
        HashMap<String,String> user = new HashMap<String,String>();
        String selectQuery = "SELECT  * FROM " + TABLE_LOGIN;

        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);
        // Move to first row
        cursor.moveToFirst();
        if(cursor.getCount() > 0){
            user.put("name", cursor.getString(1));
            user.put("email", cursor.getString(2));
            user.put("uid", cursor.getString(3));
            user.put("created_at", cursor.getString(4));
        }
        cursor.close();
        db.close();
        // return user
        return user;
    }

    /**
     * Getting user login status
     * return true if rows are there in table
     * */
    public int getRowCount() {
        String countQuery = "SELECT  * FROM " + TABLE_LOGIN;
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(countQuery, null);
        int rowCount = cursor.getCount();
        db.close();
        cursor.close();

        // return row count
        return rowCount;
    }

    /**
     * Re crate database
     * Delete all tables and create them again
     * */
    public void resetTables(){
        SQLiteDatabase db = this.getWritableDatabase();
        // Delete All Rows
        db.delete(TABLE_LOGIN, null, null);
        db.close();
    }

} 
```

应用程序从我的论坛登录良好，但我不知道如何从 java 添加会话，感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:09:14.813

您的 createLoginSession 函数是否抛出 NullPointerException？您永远不会初始化编辑器以指向您存储会话信息的 SharedPreference。如果是这种情况，您将按如下方式对其进行初始化：

```
SharedPreference sharedPreference = getSharedPreferences("your key here", MODE_PRIVATE);
editor = sharedPreference.edit(); 
```

# c - 在 C 中将华氏温度更改为开尔文

> ID：14427965
> 
> 赞同：5
> 
> 时间：2013-01-20T18:49:56.550
> 
> 标签：c

我正在尝试将华氏温度更改为开尔文，公式是`K = 5/9 (° F - 32) + 273`

我的代码是：

```
#include <stdio.h>
double const changeToC = 32.0;
double const changeToK = 273.16;

void temperatures(double n);

int main(void)
{
    int q = 'q';
    double userNumber;

    printf("please enter fahrenheit number: \n");
    scanf("%f", &userNumber);

    while (userNumber != q)
    {
        temperatures(userNumber);
        printf("\n");
        printf("please enter fahrenheit number: \n");
        scanf("%f", &userNumber);
    }
}

void temperatures(double n)
{
    double celsius, kelvin;

    celsius = 5.0 / 9.0 * (n - changeToC);
    kelvin = 5.0 / 9.0 (n - changeToC) + changeToK;

    printf("fahrenheit is: %.2f - celsius is: %.2f - kelvin is: %.2f", 
           n, celsius, kelvin);
} 
```

我需要输入来获得双倍的华氏温度，并打印摄氏度和开尔文的值。

在华氏度到开尔文（`kelvin = 5.0 / 9.0 (n - changeToC) + changeToK;`）行我得到一个错误：

> 被调用的对象类型 double 不是函数或函数指针

你能告诉我这是什么意思吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T18:51:51.090

你错过了乘法运算符，`*`

```
kelvin = 5.0 / 9.0 * (n - changeToC) + changeToK; 
```

如果没有乘法运算符，编译器会将括号`()`视为函数调用运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:54:47.860

```
kelvin = 5.0 / 9.0 * (n - changeToC) + changeToK; 
```

放置乘法运算符..这解决了你的问题

# image - OpenCV：加载多个图像并用词袋对它们进行聚类

> ID：14427971
> 
> 赞同：1
> 
> 时间：2013-01-20T18:50:24.343
> 
> 标签：image, opencv, computer-vision, cluster-computing, classification

我正在尝试对异常和正常的视频帧进行聚类。我将帧分为正常帧和异常帧。我有两个问题，我不确定我的方法是否正确，并且出现了意外错误。请帮我。错误代码：bowTrainer.add(features1); 我的完整代码如下： // Bow.cpp : 定义控制台应用程序的入口点。//

```
#include "stdafx.h"
#include "opencv2/video/tracking.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/features2d/features2d.hpp"
#include <opencv2/nonfree/features2d.hpp>
#include <opencv2/nonfree/nonfree.hpp>
#include <opencv2/legacy/legacy.hpp>
#include <windows.h>
#include "opencv2/ml/ml.hpp"

#include <stdlib.h>
#include <stdio.h>

#include <sys/stat.h>
#define _USE_MATH_DEFINES
#include <math.h>

#include <limits>
#include <cstdio>
#include <iostream>
#include <fstream>

using namespace std;
using namespace cv;
using std::vector;
using std::iostream;

int main()
{
initModule_nonfree();

Ptr<FeatureDetector> features = FeatureDetector::create("SIFT");
Ptr<DescriptorExtractor> descriptor = DescriptorExtractor::create("SIFT");
Ptr<DescriptorMatcher> matcher = DescriptorMatcher::create("FlannBased");

//defining terms for bowkmeans trainer
TermCriteria tc(CV_TERMCRIT_ITER+CV_TERMCRIT_EPS, 10, 0.001);
int dictionarySize = 100;
int retries = 1;
int flags = KMEANS_PP_CENTERS;
BOWKMeansTrainer bowTrainer(dictionarySize, tc, retries, flags);

BOWImgDescriptorExtractor bowDE(descriptor, matcher);

//**creating dictionary**//
Mat trainme(0, dictionarySize, CV_32FC1); 
Mat labels(0, 1, CV_32FC1); //1d matrix with 32fc1 is requirement of normalbayesclassifier class

int i=0;
while(i<10)
{
char filename[255]; 
string n;

n=sprintf(filename, "C:\\Users\\Desktop\\New folder\\View_001\\frame_000%d.jpg",i); 

Mat img = imread(filename, 0);
Mat features1;
vector<KeyPoint> keypoints;
descriptor->compute(img, keypoints, features1);

bowTrainer.add(features1);
Mat dictionary = bowTrainer.cluster();
bowDE.setVocabulary(dictionary);

Mat bowDescriptor;
bowDE.compute(img, keypoints, bowDescriptor);
trainme.push_back(bowDescriptor);
float label = 1.0;
labels.push_back(label);
      i++;
}

int  j=11;
while(j<21)
{
char filename2[255]; 
string n;

n=sprintf(filename2, "C:\\Users\\Desktop\\New folder\\View_001\\frame_000%d.jpg",j); 
      cout<<filename2;

Mat img2 = imread(filename2, 0);
Mat features2;
vector<KeyPoint> keypoints2;
descriptor->compute(img2, keypoints2, features2);
bowTrainer.add(features2);
Mat bowDescriptor2;
bowDE.compute(img2, keypoints2, bowDescriptor2);
trainme.push_back(bowDescriptor2);
float label = 2.0;
labels.push_back(label);
      j++;
}

NormalBayesClassifier classifier;
classifier.train(trainme, labels);

//**classifier trained**//

//**now trying to predict using the same trained classifier, it should return 1.0**//

Mat tryme(0, dictionarySize, CV_32FC1);
Mat tryDescriptor;
Mat img3 = imread("C:\\Users\\Desktop\\New folder\\View_001\\frame_0121.jpg", 0);
vector<KeyPoint> keypoints3;
features->detect(img3, keypoints3);
bowDE.compute(img3, keypoints3, tryDescriptor);
tryme.push_back(tryDescriptor);

cout<<classifier.predict(tryme)<<endl;
waitKey(0);
system("PAUSE");

return 0;
} 
```

# java - ApplicationContextAware 与 Setter 注入

> ID：14427975
> 
> 赞同：1
> 
> 时间：2013-01-20T18:50:48.460
> 
> 标签：java, spring, jakarta-ee

ApplicationContextAware 相对于 Setter Injection 有什么优势。通过 Setter Injection 我们也可以从 Spring Container 中获取 bean。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:24:42.217

在大多数场景中，setter 注入就足够了，它提供了更好的解决方案，帮助您维护实例之间的关系。因为类不直接依赖于容器，也就是说它们是Pojos，不需要知道容器的存在，这会给单元测试和以后的迁移带来很多方便。

如果你真的需要从容器中取出一些东西，例如对某种 bean 进行一些增强，那么是时候使用 ApplicationContextAware 了。通常，不建议通过实现 ApplicationContextAware 在类中手动获取依赖关系，尤其是对于业务对象。他们不应该对自己的组装负责”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:53:58.247

随着`ApplicationContextAware`您获得对当前上下文的引用，您可以对其进行编辑，例如添加或删除 bean。通常这是一个坏主意，除非在某些测试场景中。

Spring 还强调，与`ApplicationContextAware`使用带有 setter 的简单 POJO 相比，您更依赖 Spring 框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T18:59:57.180

`ApplicationContextAware`除非你真的需要它，否则你不应该使用它。如果您可以通过 setter/field/constructor 注入来支持您的所有业务需求，请不要使用`ApplicationContextAware`.

有些人可能会想用`ApplicationContextAware`它来获取原型作用域bean的新实例（实际上`BeanFactoryAware`就足够了）。但是有更好的工具，即`lookup-method`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T19:06:23.277

这是两种不同的模式。当您使用时，`ApplicationContextAware`您实现了服务定位器模式，但设置器注入指的是依赖注入模式。在开发低耦合应用程序时，后者更可取。

这两种模式之间的区别在[此处](https://stackoverflow.com/questions/1557781/whats-the-difference-between-the-dependency-injection-and-service-locator-patte)或[此处进行了描述](http://geekswithblogs.net/KyleBurns/archive/2012/04/27/dependency-injection-vs.-service-locator.aspx)

# java - 面向对象设计——暂停功能

> ID：14427977
> 
> 赞同：1
> 
> 时间：2013-01-20T18:50:56.870
> 
> 标签：java, oop

我试图提高我的 OOD 思维。这是我的问题。

假设您要设计一个音乐 mp3 播放器。我上了一个包含播放列表集合的课程。

```
class Player {
    Map<String, List<Song>> playlists;    // <Name, PlayList>
    public void play (Song song) {
        // decode song
        // play song
    }
    public void play (String playlistName) {
        // play a playlist
        for (Song song : playlists.get(playlistName)) {
            play (song);
        }
    }
    public void stop () {
        // stop playing
    }
    public void pause () {
        // pause, resume playing the last song when hit play again
    }
} 
```

假设“Song”已经包含了歌曲的所有元数据。已经描述了方法的所有功能。当我试图实现“暂停”方法时，我被卡住了。你会怎么做才能意识到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T18:57:52.853

查看[状态模式](http://en.wikipedia.org/wiki/State_pattern)。您将存储播放器的状态。当您点击暂停和播放时，您将知道播放器的状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T18:54:51.303

我会有一个`Song`成员变量来跟踪当前播放的歌曲。如果没有播放内容，则该值将设置为 null。当您暂停 a时，如果当前正在播放的不是 null `Song`，您只需调用类`Pause`上的方法。反过来，班级可以跟踪歌曲的位置（以分钟为单位），并弄清楚简历的工作方式。`Song``Song``Song`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T18:54:53.863

在我看来，播放方法会一直阻塞，直到歌曲完成。它是一个完全单线程的设计。当您这样设计应用程序时，它无法在播放歌曲时对用户输入做出反应（除非您将输入处理程序放入播放循环中）。

在现实世界的应用程序中，play() 方法会开始在单独的线程中播放歌曲（许多音频 API 会为您执行此操作，因此您不必与多线程混合）然后返回，所以应用程序可以在播放歌曲时保持负责。

这样，暂停和恢复方法就会与播放歌曲的线程进行交互。

# javascript - 需要右对齐 Bootstrap 导航栏，但左对齐它的子菜单

> ID：14427984
> 
> 赞同：1
> 
> 时间：2013-01-20T18:51:27.897
> 
> 标签：javascript, html, css, twitter-bootstrap

我正在使用使用 pull-right 类右对齐的 Bootstrap Navbar。当我向导航栏添加下拉菜单时，该下拉菜单的子菜单也与其看起来不太好的父菜单右对齐。我如何让它与父母保持一致？我已经尝试在我能想到的几乎所有地方添加 pull-left 类，但似乎不起作用。想法？

这是代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet" href="css/bootstrap.css">
    <style>
        body {
            padding-top: 60px;
            padding-bottom: 40px;
        }
        .menu {
            font-size: 18px;
            margin-top: 10px;
        }
        .menu_icon {
            margin-top: 3px;
        }
        .dropdown-menu .sub-menu {
            left: 100%;
            position: absolute;
            top: 0;
            visibility: hidden;
            margin-top: -1px;
        }
        .dropdown-menu li:hover .sub-menu {
            visibility: visible;
        }
        .dropdown:hover .dropdown-menu {
            display: block;
        }
        .nav-tabs .dropdown-menu, .nav-pills .dropdown-menu, .navbar .dropdown-menu {
            margin-top: 0;
        }
    </style>
    <link rel="stylesheet" href="css/bootstrap-responsive.css">

    <script src="js/vendor/modernizr-2.6.1-respond-1.1.0.min.js"></script>
</head>
<body>
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="brand" href="#">My Brand</a>
            <div class="nav-collapse">
                <ul class="nav pull-right">
                    <li><a class="menu" href="index.php"><i class="icon-home icon-black menu_icon"></i> Home</a></li>
                    <li class="dropdown">
                        <a class="dropdown-toggle menu" data-toggle="dropdown" href="#about">Dropdown <b
                                class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">Action</a></li>
                            <li><a href="#">Another action</a></li>
                            <li><a href="#">Something else here</a></li>
                            <li class="divider"></li>
                            <li class="nav-header">Nav header</li>
                            <li><a href="#">Separated link</a></li>
                            <li><a href="#">One more separated link</a></li>
                        </ul>
                    </li>
                    <li><a class="menu" href="#"><i class="icon-wrench icon-black menu_icon"></i> Link 1</a></li>
                    <li><a class="menu" href="#"><i class="icon-tag icon-black menu_icon"></i> Link 2</a></li>
                    <li><a class="menu" href="#"><i class="icon-envelope icon-black menu_icon"></i> Link 3</a></li>
                </ul>
            </div>
            <!--/.nav-collapse -->
        </div>
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:09:47.223

您应该在您的帐户中添加一个 ID（例如`id=myId`）`<ul class="dropdown-menu">`并编写如下内容：

```
#myId {right: auto}
#myId::before {left:12px;right:auto}
#myId::after {left:13px;right:auto} 
```

这些 CSS 规则将下拉式下拉样式重置为默认值。

这对我有用。看看这个样本：http: [//jsfiddle.net/RzMRA/3/](http://jsfiddle.net/RzMRA/3/)

# matlab - matlab中的全局优化

> ID：14427986
> 
> 赞同：-1
> 
> 时间：2013-01-20T18:51:49.067
> 
> 标签：matlab, optimization

我是 Matlab 新手，我想编写一个用于全局优化的 matlab 程序。我有一个目标函数`f(x)`、一个域`D`和一个共同域`R`。我查看了*Optimization toolbox*，但它仅显示了局部最小化的参考和示例。

如果有人能给我一些关于 Matlab 中全局优化的提示，那将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T20:06:16.277

正如您所发现的，优化工具箱仅处理“局部”优化 - 诸如线性、二次和二元规划、非线性优化等算法。您可能想看看[Global Optimization Toolbox](http://www.mathworks.com/products/global-optimization/)，其中包含全局优化算法，例如遗传算法，模拟退火等..

# image - 调整图像部分的亮度

> ID：14427988
> 
> 赞同：-1
> 
> 时间：2013-01-20T18:51:53.290
> 
> 标签：image, matlab, image-processing

我是 Matlab 和图像处理的新手，我知道如果我的图像是，我们可以通过以下公式更改图像亮度`I`

```
newImg=imadjust(I, [low_in high_in], [low_out,high_out]); 
```

它调整图像的所有像素值，但是我如何在图像的某些部分上做到这一点，就像我在图像中检测到人脸一样，现在我想改变它的亮度，我该如何使用`imadjust`.

**编辑**

我在二进制掩码中检测到区域。

**我做到了，请查看答案以及答案中的参考。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:29:43.417

我做到了，

嗯，我想改变图像某些区域的亮度，我想要的区域是通过二进制掩码计算的`mask`，所以我做到了，首先我简单地改变输入图像的亮度，然后像这样`I`存储结果`newImg`

```
newImg = imadjust(I, [low_in high_in], [low_out,high_out]); 
```

然后在我的原始图像上应用蒙版并存储这样的蒙版区域的`newImg`值

```
I(mask) = newImg (mask); 
```

[参考](http://mathworks.com/matlabcentral/answers/59354-adjust-brightness-of-image-part#answer_71807)

我认为它内容丰富，不会让任何人感到厌烦，如果你们不激励我，那么我就无法学习，因为人们只是因为我在提问而关闭[了我的线程，而且我正在为不同类型的项目使用相同的图像数据库。](https://stackoverflow.com/questions/14435445/detecting-face-points-in-an-image)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:00:25.000

```
%Suppose these are the coordinates of the rectangle in which the face is detected%
%You can do the following to adjust the brightness of that region

topLeft = 10;
topRight = 50;
bottomLeft = 50;

newImg = I;
newImg(topLeft:bottomLeft,topLeft:topRight) = imadjust(newImg(topLeft:bottomLeft,topLeft:topRight), [low_in high_in], [low_out,high_out]); 
```

# ios - 自定义视图控制器未在 KYArcTab 中加载

> ID：14427990
> 
> 赞同：0
> 
> 时间：2013-01-20T18:51:54.443
> 
> 标签：ios, objective-c

我试图使用这个[标签栏视图控制器](https://github.com/Kjuly/KYArcTab)，但很难让它加载我的视图控制器。

我已经按照他们的演示为他们的视图控制器填充了我的视图控制器，但我得到的只是黑色视图（可能为零？）。我已经设置了一个断点，并且 self.tabBarItems 充满了我能说的最好的视图控制器。这意味着如果我给它 2 个视图控制器，则计数为 2，但我无法查看更多详细信息： ![在此处输入图像描述](../Images/5c96660e14ff04f19e4b505f079b26a5.png)

看看 tabBarItems 如何有 2 个对象，但即使单击了下拉箭头，也没有列出任何内容？

无论如何，代码非常简单。

我的代码：

```
- (void)setup {

  // Set View Frame
    self.viewFrame = (CGRect){CGPointZero, {kKYViewWidth, kKYViewHeight}};

    // Add child view controllers to each tab
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {

        _salesViewController  = [[SalesViewController alloc] initWithNibName:@"SalesViewController_iPhone" bundle:nil];

        _customersViewController = [[CustomersViewController alloc] initWithNibName:@"CustomersViewController_iPhone" bundle:nil];

        _itemsViewController = [[ItemsViewController alloc] initWithNibName:@"ItemsViewController_iPhone" bundle:nil];

        _employeesViewController = [[EmployeesViewController alloc] initWithNibName:@"EmployeesViewController_iPhone" bundle:nil];

        _settingsViewController = [[SettingsViewController alloc] initWithNibName:@"SettingsViewController_iPhone" bundle:nil];

    } else {

        _salesViewController  = [[SalesViewController alloc] initWithNibName:@"SalesViewController_iPad" bundle:nil];

        _customersViewController = [[CustomersViewController alloc] initWithNibName:@"CustomersViewController_iPad" bundle:nil];

        _itemsViewController = [[ItemsViewController alloc] initWithNibName:@"ItemsViewController_iPad" bundle:nil];

        _employeesViewController = [[EmployeesViewController alloc] initWithNibName:@"EmployeesViewController_iPad" bundle:nil];

        _settingsViewController = [[SettingsViewController alloc] initWithNibName:@"SettingsViewController_iPad" bundle:nil];
    }

  // Set child views' Frame
    CGRect childViewFrame = self.viewFrame;
    [_salesViewController.view   setFrame:childViewFrame];
    [_customersViewController.view   setFrame:childViewFrame];
    [_itemsViewController.view setFrame:childViewFrame];
    [_employeesViewController.view  setFrame:childViewFrame];
    [_settingsViewController.view  setFrame:childViewFrame];

  // Add child views as tab bar items
  self.tabBarItems = @[@{@"image"          : [NSString stringWithFormat:kKYITabBarItemImageNameFormat, 1],
                         @"Sales" : _salesViewController} ,
                       @{@"image"          : [NSString stringWithFormat:kKYITabBarItemImageNameFormat, 2],
                        @"Customers" : _customersViewController}
    ];

  // Add a gesture signal on the first view
  UIImage * gestureImage = [UIImage imageNamed:kKYIArcTabGestureHelp];
  CGRect gestureImageViewFrame =
    (CGRect){{(kKYViewWidth - gestureImage.size.width) / 2.f,
              (kKYViewHeight - kKYTabBarHeight - gestureImage.size.height) / 2.f},
             gestureImage.size};
  UIImageView * gestureImageView = [[UIImageView alloc] initWithFrame:gestureImageViewFrame];
  [gestureImageView setImage:gestureImage];
  [gestureImageView setUserInteractionEnabled:YES];
  [_salesViewController.view addSubview:gestureImageView];
} 
```

演示的代码确实有效如果我将其换成：

```
// Override |KYArcTabViewController|'s |-setup|
- (void)setup {
  // Set View Frame
  self.viewFrame = (CGRect){CGPointZero, {kKYViewWidth, kKYViewHeight}};

  // Add child view controllers to each tab
  viewControllerOne_   = [[UIViewController alloc] init];
  viewControllerTwo_   = [[UIViewController alloc] init];
  viewControllerThree_ = [[UIViewController alloc] init];
  viewControllerFour_  = [[UIViewController alloc] init];

  // Set child views' Frame
  CGRect childViewFrame = self.viewFrame;
  [viewControllerOne_.view   setFrame:childViewFrame];
  [viewControllerTwo_.view   setFrame:childViewFrame];
  [viewControllerThree_.view setFrame:childViewFrame];
  [viewControllerFour_.view  setFrame:childViewFrame];

  // Set child views' background color
  [viewControllerOne_.view   setBackgroundColor:[UIColor blackColor]];
  [viewControllerTwo_.view   setBackgroundColor:[UIColor redColor]];
  [viewControllerThree_.view setBackgroundColor:[UIColor greenColor]];
  [viewControllerFour_.view  setBackgroundColor:[UIColor blueColor]];

  // Add child views as tab bar items
  self.tabBarItems = @[@{@"image"          : [NSString stringWithFormat:kKYITabBarItemImageNameFormat, 1],
                         @"viewController" : viewControllerOne_},
                       @{@"image"          : [NSString stringWithFormat:kKYITabBarItemImageNameFormat, 2],
                         @"viewController" : viewControllerTwo_},
                       @{@"image"          : [NSString stringWithFormat:kKYITabBarItemImageNameFormat, 3],
                         @"viewController" : viewControllerThree_},
                       @{@"image"          : [NSString stringWithFormat:kKYITabBarItemImageNameFormat, 4],
                         @"viewController" : viewControllerFour_}];

  // Add a gesture signal on the first view
  UIImage * gestureImage = [UIImage imageNamed:kKYIArcTabGestureHelp];
  CGRect gestureImageViewFrame =
    (CGRect){{(kKYViewWidth - gestureImage.size.width) / 2.f,
              (kKYViewHeight - kKYTabBarHeight - gestureImage.size.height) / 2.f},
             gestureImage.size};
  UIImageView * gestureImageView = [[UIImageView alloc] initWithFrame:gestureImageViewFrame];
  [gestureImageView setImage:gestureImage];
  [gestureImageView setUserInteractionEnabled:YES];
  [viewControllerOne_.view addSubview:gestureImageView];
  [gestureImageView release];
} 
```

仅供参考：演示代码中遗漏了一些东西，这些只是基本的东西，比如声明属性、初始化和综合（虽然没什么特别的）。我也尝试过使用和不使用访问器（self.vs _var）

所以基本上我想知道为什么我的客户视图控制器没有加载？就像我说的那样，我只是得到黑屏（在标签栏后面）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:06:49.693

所以问题是

```
self.tabBarItems = @[@{@"image"          : [NSString stringWithFormat:kKYITabBarItemImageNameFormat, 1],
                         @"viewController" : viewControllerOne_},
                       @{@"image"          : [NSString stringWithFormat:kKYITabBarItemImageNameFormat, 2],
                         @"viewController" : viewControllerTwo_},
                       @{@"image"          : [NSString stringWithFormat:kKYITabBarItemImageNameFormat, 3],
                         @"viewController" : viewControllerThree_},
                       @{@"image"          : [NSString stringWithFormat:kKYITabBarItemImageNameFormat, 4],
                         @"viewController" : viewControllerFour_}]; 
```

需要单词“viewController”而不是视图控制器的名称。这是父类用来检索视图的键。

# linux - 如何确定我的操作系统是在虚拟化环境还是非虚拟化环境中运行？

> ID：14427991
> 
> 赞同：7
> 
> 时间：2013-01-20T18:51:59.020
> 
> 标签：linux, virtualization, virtual-machine, paravirtualization

我可以访问可以通过 ssh 访问的机器。如何确定我的操作系统是在完全虚拟化（VMM 进行二进制翻译）、半虚拟化还是非虚拟化环境中运行？我对如何进行有一些想法（在虚拟化环境中访问内存页面/磁盘等一些操作将花费更长的时间）但不知道如何进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T19:33:41.723

它确实取决于您在其上运行的 VMM。如果它是 Xen 或 Microsoft VM，我相信`CPUID`值为`EAX`0x40000000 会给你一个非零值`EAX`。不确定这是否适用于 VMWare、VirtualBox 或 KVM。我希望它也能在那里工作......

测量访问时间不太可能总是向您展示真相，因为在非 VM 系统中，这些时间也可能有很大差异，并且没有真正的理由可以让您在有效的实现中看到巨大的差异。当然，您不知道您的 VM 是否使用通过 PCI 传递的真实硬盘控制器运行，或者您的 NFS 安装磁盘是否通过传递到 VM 的真实网卡连接，或者它们是否是通过虚拟网卡访问。

只要应用程序自己运行，一个好的 VMM 就不会显示出太大的差异。

# paypal - 表单元素中的 PayPal 捐赠按钮

> ID：14427992
> 
> 赞同：0
> 
> 时间：2013-01-20T18:52:04.027
> 
> 标签：paypal, donations

我在让 PayPal 捐赠按钮工作时遇到了很大的麻烦，因为我想在表单标签之间添加。因此，如果 PayPal 按钮本身具有自己的表单标签和操作，但是在我的表单标签之间插入时，它正在执行我的表单操作并完全忽略 PayPal 自己的表单操作，该操作停止将 donner 带到 Paypal 页面。

现在的限制是我不能移动 PayPal 按钮，也不能移动我自己的表单标签或操作，所以请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T00:35:33.067

You can't embed a form within a form, which is why you're having the trouble you're having.

One thing you can do to fix the issue is to make your form post to a final confirmation page which would then post to PayPal.

If you want to avoid the final confirmation page you could make your form post to a processor script like PHP that generates the request to PayPal and sends the user over there accordingly. The [Express Checkout API](https://www.x.com/developers/paypal/development-and-integration-guides#ec) is great for this sort of thing, but you would need to be familiar with web services in order to utilize that.

# python - 什么时候在 Python 中执行？

> ID：14427997
> 
> 赞同：-1
> 
> 时间：2013-01-20T18:53:02.620
> 
> 标签：python

假设我在 python 中有以下模块：

```
class Foo(object):
    pass

def foofunc():
    pass

foofunc() 
```

如果我`foofunc()`选择`import`模块而不是直接执行它，（我的意思是最后一条语句）会被执行吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T18:53:43.477

是的，它将在第一次导入时执行。