# StackOverflow 问答 15984000-15984999

# django - 使用 boto/django-storages 和 amazon s3 时无法从图像生成缩略图

> ID：15984000
> 
> 赞同：0
> 
> 时间：2013-04-13T03:44:33.730
> 
> 标签：django, amazon-s3, boto, django-storage

我使用在这里找到的要点[https://gist.github.com/valberg/2429288](https://gist.github.com/valberg/2429288)在保存时生成缩略图。它可以在本地工作，但不能在我得到 AttributeError 的生产环境中工作：

```
 fp is at EOF. Use rewind option or seek() to data start. 
```

我已经用 100 种不同的方式来处理这个问题，在我能想到的几乎所有地方都添加了 image.seek(0) 或 suf.seek(0) 或 temp_handle.seek(0) 但没有任何效果。

```
class Image(Media):
    image = models.ImageField(
        upload_to=image_folder
    )

    thumbnail = models.ImageField(
        upload_to=thumbnail_folder,
        max_length=500,
        null=True,
        blank=True
    )

    def create_thumbnail(self):
        # original code for this method came from
        # http://snipt.net/danfreak/generate-thumbnails-in-django-with-pil/

        # If there is no image associated with this.
        # do not create thumbnail
        if not self.image:
            return

        from PIL import Image
        from cStringIO import StringIO
        from django.core.files.uploadedfile import SimpleUploadedFile
        import os

        # Set our max thumbnail size in a tuple (max width, max height)
        THUMBNAIL_SIZE = (99, 66)

        DJANGO_TYPE = self.image.file.content_type

        if DJANGO_TYPE == 'image/jpeg':
            PIL_TYPE = 'jpeg'
            FILE_EXTENSION = 'jpg'
        elif DJANGO_TYPE == 'image/png':
            PIL_TYPE = 'png'
            FILE_EXTENSION = 'png'

        # Open original photo which we want to thumbnail using PIL's Image
        image = Image.open(StringIO(self.image.read()))

        # We use our PIL Image object to create the thumbnail, which already
        # has a thumbnail() convenience method that contrains proportions.
        # Additionally, we use Image.ANTIALIAS to make the image look better.
        # Without antialiasing the image pattern artifacts may result.
        image.thumbnail(THUMBNAIL_SIZE, Image.ANTIALIAS)

        # Save the thumbnail
        temp_handle = StringIO()
        image.save(temp_handle, PIL_TYPE)
        temp_handle.seek(0)

        # Save image to a SimpleUploadedFile which can be saved into
        # ImageField
        suf = SimpleUploadedFile(os.path.split(self.image.name)[-1],
                temp_handle.read(), content_type=DJANGO_TYPE)
        # Save SimpleUploadedFile into image field
        self.thumbnail.save(
            '%s_thumbnail.%s' % (os.path.splitext(suf.name)[0], FILE_EXTENSION),
            suf,
            save=False
        )

    def save(self, *args, **kwargs):

        self.create_thumbnail()

        force_update = False

        # If the instance already has been saved, it has an id and we set 
        # force_update to True
        if self.id:
            force_update = True

        # Force an UPDATE SQL query if we're editing the image to avoid integrity exception
        super(Image, self).save(force_update=force_update) 
```

# android - Android中的Java客户端套接字连接

> ID：15984001
> 
> 赞同：5
> 
> 时间：2013-04-13T03:44:39.233
> 
> 标签：android, sockets, networking, ip, client

我正在我的计算机和 android 之间创建一个客户端套接字连接。

这是服务器的代码：

```
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.UnknownHostException;

class Server {
  public static void main(String[] args) {
    String ip = getIpAddress();

    if (ip != "false") {
        try {
            ServerSocket srvr = new ServerSocket(4444);

        Socket client = null;
        try {
            client = srvr.accept();

            PrintWriter out = new PrintWriter(client.getOutputStream(), true);
            System.out.print("Sending ip address: '" + ip + "'\n");
            out.print(ip);
            out.close();
            client.close();
            srvr.close();
        } catch(Exception e) {
            System.out.print(String.format("Accept failed: %s",e));
        }
        } catch (Exception e) {
            System.out.print(String.format("Could not listem on port: %s",e));
        }
    }
    else
    {
        System.out.print("Could not get ip address");
    }
  }

  public static String getIpAddress() {
    InetAddress host;
    String ipString = "false";

    try {
        host = InetAddress.getLocalHost();
        ipString = host.getHostAddress();
    } catch (UnknownHostException e) {
        System.out.println(e);
    }

    return ipString;
  }
} 
```

当我在计算机上运行客户端时，一切正常。这是计算机客户端的代码：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.Socket;

public class Client {
  public static void main(String[] args) {
    System.out.print(RunSocketClient());
  }

  public static String RunSocketClient() {
    try {
        Socket clnt = new Socket("localhost",4444);
        BufferedReader in = new BufferedReader(new InputStreamReader(clnt.getInputStream()));

        String fromServer;
        fromServer = in.readLine();

        return fromServer;
    } catch (IOException e) {
        return "nothing";
    }
  }
} 
```

当我在android中运行此客户端代码时，系统停止工作，错误是什么？这是android客户端代码：

```
package com.example.clientapp;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.Socket;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.widget.LinearLayout;
import android.widget.TextView;

public class MainActivity extends Activity {

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    LinearLayout lView = new LinearLayout(this);

    TextView myText = new TextView(this);
    String ip = RunSocketClient();
    Log.d("ClientApp",ip);
    myText.setText(ip);

    lView.addView(myText);

    setContentView(lView);
  }

  public static String RunSocketClient() {
    try {
        Socket clnt = new Socket("localhost",4444);
        BufferedReader in = new BufferedReader(new InputStreamReader(clnt.getInputStream()));

        String fromServer;
        fromServer = in.readLine();

        return fromServer;
    } catch (IOException e) {
        return "nothing";
    }
  }
} 
```

这是应用程序崩溃的logcat：

```
04-13 00:10:31.411: D/AndroidRuntime(13978): Shutting down VM

04-13 00:10:31.411: W/dalvikvm(13978): threadid=1: thread exiting with uncaught exception (group=0x410ab300)

04-13 00:10:31.411: E/AndroidRuntime(13978): FATAL EXCEPTION: main

04-13 00:10:31.411: E/AndroidRuntime(13978): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.clientapp/com.example.clientapp.MainActivity}: android.os.NetworkOnMainThreadException

04-13 00:10:31.411: E/AndroidRuntime(13978):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)

04-13 00:10:31.411: E/AndroidRuntime(13978):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)

04-13 00:10:31.411: E/AndroidRuntime(13978):    at android.app.ActivityThread.access$600(ActivityThread.java:130)

04-13 00:10:31.411: E/AndroidRuntime(13978):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)

04-13 00:10:31.411: E/AndroidRuntime(13978):    at android.os.Handler.dispatchMessage(Handler.java:99)

04-13 00:10:31.411: E/AndroidRuntime(13978):    at android.os.Looper.loop(Looper.java:137)

04-13 00:10:31.411: E/AndroidRuntime(13978):    at android.app.ActivityThread.main(ActivityThread.java:4745)

04-13 00:10:31.411: E/AndroidRuntime(13978):    at java.lang.reflect.Method.invokeNative(Native Method)

04-13 00:10:31.411: E/AndroidRuntime(13978):    at java.lang.reflect.Method.invoke(Method.java:511)

04-13 00:10:31.411: E/AndroidRuntime(13978):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)

04-13 00:10:31.411: E/AndroidRuntime(13978):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)

04-13 00:10:31.411: E/AndroidRuntime(13978):    at dalvik.system.NativeStart.main(Native Method)

04-13 00:10:31.411: E/AndroidRuntime(13978): Caused by: android.os.NetworkOnMainThreadException

04-13 00:10:31.411: E/AndroidRuntime(13978):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)

04-13 00:10:31.411: E/AndroidRuntime(13978):    at java.net.InetAddress.lookupHostByName(InetAddress.java:385)

04-13 00:10:31.411: E/AndroidRuntime(13978):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)

04-13 00:10:31.411: E/AndroidRuntime(13978):    at java.net.InetAddress.getAllByName(InetAddress.java:214)

04-13 00:10:31.411: E/AndroidRuntime(13978):    at java.net.Socket.tryAllAddresses(Socket.java:108)

04-13 00:10:31.411: E/AndroidRuntime(13978):    at java.net.Socket.<init>(Socket.java:177)

04-13 00:10:31.411: E/AndroidRuntime(13978):    at java.net.Socket.<init>(Socket.java:149)

04-13 00:10:31.411: E/AndroidRuntime(13978):    at com.example.clientapp.MainActivity.RunSocketClient(MainActivity.java:34)

04-13 00:10:31.411: E/AndroidRuntime(13978):    at com.example.clientapp.MainActivity.onCreate(MainActivity.java:23)

04-13 00:10:31.411: E/AndroidRuntime(13978):    at android.app.Activity.performCreate(Activity.java:5008)

04-13 00:10:31.411: E/AndroidRuntime(13978):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)

04-13 00:10:31.411: E/AndroidRuntime(13978):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)

04-13 00:10:31.411: E/AndroidRuntime(13978):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T04:19:34.777

在您的应用程序中发生了[NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)。从文档中你可以看到

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。

所以你必须从另一个线程而不是主线程调用你的 RunSocketClient 方法。使用处理程序或异步任务或不同的线程来执行此操作。

要了解良好的设计，您可以查看此链接

[http://developer.android.com/training/articles/perf-anr.html](http://developer.android.com/training/articles/perf-anr.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-22T12:31:23.210

将这些行添加到 AndroidManifest.xml

`<uses-permission android:name="android.permission.INTERNET" />`

没有这些权限，您将无法访问网络资源...

# c++ - 内核 kb 过滤器 ioctl IRP / 变量声明错误

> ID：15984003
> 
> 赞同：1
> 
> 时间：2013-04-13T03:45:02.870
> 
> 标签：c++, c, kernel, driver, wdk

下面的代码是`KbFilter_ServiceCallback`WDK ***kbfiltr.c***示例中的（修改后的）例程。事实上，它构建得很好，但是当我取消注释时`IRP *irp;`，它会导致错误：

> 1>目录 c:\winddk\kbfiltr\sys 1>c:\winddk\kbfiltr\sys\kbfiltr.c(827) 中的错误：错误 C2220：警告视为错误 - 未生成“对象”文件 1>链接：错误LNK1181: 无法打开输入文件 'c:\winddk\kbfiltr\sys\objchk_wxp_x86\i386\kbfiltr.obj'

这对我不是很有帮助。我已经读过，在块声明中需要在任何语句之前，我确信我已经完成了，所以我对此感到非常困惑。

```
 VOID
KbFilter_ServiceCallback(
    IN PDEVICE_OBJECT  DeviceObject,
    IN PKEYBOARD_INPUT_DATA InputDataStart,
    IN PKEYBOARD_INPUT_DATA InputDataEnd,
    IN OUT PULONG InputDataConsumed
    )
{
    KEYBOARD_INPUT_DATA *kbDat;//Apparently declarations need to be before any statements
    ULONG consumed;
    //IRP *irp;

    PDEVICE_EXTENSION   devExt;
    WDFDEVICE   hDevice;
    hDevice = WdfWdmDeviceGetWdfDeviceHandle(DeviceObject);
    devExt = FilterGetData(hDevice);    

    kbDat = kbDat = InputDataStart;

    while (kbDat < InputDataEnd)
    {
       consumed = 0;

       if (kbDat->MakeCode == 0x01) {//Esc
           if((kbDat->Flags & KEY_MAKE) == KEY_MAKE){
             //SEND IRP ...IoBuildDeviceIoControlRequest(IOCTL_KEYBOARD_SET_INDICATORS,...
           }
        }
        else{
            kbDat++;
             continue;
        }

        (*(PSERVICE_CALLBACK_ROUTINE)(ULONG_PTR) 
    devExt->UpperConnectData.ClassService)(
            devExt->UpperConnectData.ClassDeviceObject,
            kbDat,
            kbDat+1,
            &consumed);
        kbDat++;
    }

    *InputDataConsumed = (InputDataEnd-InputDataStart);

    (*(PSERVICE_CALLBACK_ROUTINE)(ULONG_PTR) devExt->UpperConnectData.ClassService)(
        devExt->UpperConnectData.ClassDeviceObject,
        InputDataStart,
        InputDataEnd,
        InputDataConsumed);
} 
```

当我在这里时，我还需要帮助填写 `//SEND IRP ...IoBuildDeviceIoControlRequest(IOCTL_KEYBOARD_SET_INDICATORS,...`。我想发送一个**ioctl** * *irp* * 来获取灯的状态并在按下`NumLock`时切换它。`Esc`某处（[此处](http://www.rohitab.com/discuss/topic/32092-toggle-led-lights/)）已完成，`DeviceIoControl`但这需要**windows.h**，当包含在**kbfiltr.c**中时会导致许多其他错误。所以我想用

`irp = IoBuildDeviceIoControlRequest(IOCTL_KEYBOARD_SET_INDICATORS,... IoCallDriver( ..., irp );` 但我还没有设法让这个工作。在过去的几天里，我一直在讨论这个问题，所以我非常感谢任何帮助。

# php - 如何使用 CodeIgniter 电子邮件类发送电子邮件？我有 Namecheap Open-Xchange

> ID：15984005
> 
> 赞同：0
> 
> 时间：2013-04-13T03:45:28.840
> 
> 标签：php, codeigniter, email

如果用户忘记了密码，我正在尝试发送电子邮件。但它没有发送..这是我在控制器中的代码：

```
function _send_email($type, $email, &$data)
{
    $this->load->library('email');
    $this->email->from($this->config->item('webmaster_email', 'tank_auth'), $this->config->item('website_name', 'tank_auth'));
    $this->email->reply_to($this->config->item('webmaster_email', 'tank_auth'), $this->config->item('website_name', 'tank_auth'));
    $this->email->to($email);
    $this->email->subject(sprintf($this->lang->line('auth_subject_'.$type), $this->config->item('website_name', 'tank_auth')));
    $this->email->message($this->load->view('email/'.$type.'-html', $data, TRUE));
    $this->email->set_alt_message($this->load->view('email/'.$type.'-txt', $data, TRUE));
    $this->email->send();
} 
```

我还需要设置什么才能正确发送此电子邮件？我在 open xchange 中有 admin@domain.com 帐户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:22:22.697

我将所有设置都放在电子邮件配置文件 (email.php) 中：

```
$config['protocol'] = 'smtp';
$config['smtp_host'] = 'mail.domain.com';
$config['smtp_port'] = 25;
$config['smtp_user'] = 'admin@domain.com';
$config['smtp_pass'] = 'password';
$config['charset'] = 'utf-8'; 
```

您的配置可能会有所不同。查看此链接： http: [//www.namecheap.com/support/knowledgebase/article.aspx/1179/2175/general-configuration-in-mail-clients-and-mobile-devices](http://www.namecheap.com/support/knowledgebase/article.aspx/1179/2175/general-configuration-in-mail-clients-and-mobile-devices)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T05:03:29.507

我不知道或曾经使用过 Open Xchange，但您必须首先确保您的邮件软件（在本例中为 open xchange）支持 CodeIgniter 使用的协议之一：

1.  邮件
2.  发邮件
3.  SMTP

我几乎可以肯定第三种选择将是您想要的。只需确保允许 SMTP 连接到您的 xchange 服务器。

成功设置电子邮件后端后，您可以配置 codeigniter 以在配置文件中使用您的 xchange 设置或将一组参数传递给电子邮件类。

检查[电子邮件类文档](http://ellislab.com/codeigniter/user-guide/libraries/email.html)。

# r - 使用菜单从

> ID：15984010
> 
> 赞同：1
> 
> 时间：2013-04-13T03:46:31.157
> 
> 标签：r, menu

我想设置一个基于菜单的功能，该功能将为用户提供在目录中找到的文件列表，询问他们要加载哪个文件，然后将该文件作为新对象加载。

就代码的外观而言，这是我最好的尝试，让您了解我在寻找什么：

```
#Step 1: First create list of files arranged by date created

F<-file.info(list.files("./myfiles",pattern=".csv",full.names=TRUE))

#Order files according to date created, most recent first
F<-F[with(F, order(as.POSIXct(mtime))), ]

Files<-rownames(F)

#Step 2: Offer menu to user
Choose<-menu(Files,title="Choose which File to Load")

#Step 3: Use result of menu to load file

New_File<-read.csv(*result from menu*) 
```

显然我上面的虚构代码存在一些问题：

1- 我需要使用 full.names=TRUE 才能在我的工作目录中的子文件夹上使用 file.info。这很好用，但是当我最终使用菜单命令的行名时 - 菜单列表变得混乱。如果我在工作目录中的一系列子文件夹中工作，则会打印整个字符串，而不仅仅是文件名（单独的文件名是理想的）。

2- 我认为我已经设置了排序，最近的文件在列表的最后（我首先想要它们）

3-最后，最重要的是，我不知道使用菜单选择的结果将 .csv 文件加载到新的 R 对象中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T04:26:58.000

我认为这会如你所愿：

```
select.read.csv <- function(dir) {

   basenames  <- list.files(dir, pattern=".csv")
   full.paths <- file.path(dir, basenames)
   new.order  <- order(as.POSIXct(file.info(full.paths)$mtime), decreasing = TRUE)
   basenames  <- basenames[new.order]
   full.paths <- full.paths[new.order]
   selected   <- full.paths[menu(basenames,title = "Choose which File to Load")]

   read.csv(file = selected)
}

select.read.csv(dir = "./myfiles") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:23:52.500

如果我明白你想要什么，这已经在 tcltk 包中为你完成了。因此，除非您将此作为练习，否则您会发现使用起来更容易：

```
library(tcltk)
?tk_choose.files()
read.csv(tk_choose.files()) 
```

# ruby - 为什么它称“错误”的相等方法？

> ID：15984011
> 
> 赞同：4
> 
> 时间：2013-04-13T03:46:31.983
> 
> 标签：ruby, equality

上周我想在[stackoverflow.com](https://stackoverflow.com/)上回答一个问题，但是在**irb**中运行了一些测试后，我发现了一件有趣的事情。

```
class X
  def ==(other)
    p "X#=="
    super
  end
end

data = [ 1 ]
data.include?(X.new) 
```

我希望这里`Array#include?`会调用`Fixnum#==`数组中的每个项目。所以`X#==`永远不会调用 is 并且永远不会打印调试消息。

但实际上在我的 ruby​​ 版本（REE 1.8.7、MRI 1.8.7、1.9.2 和 1.9.3）中，它会打印出`X#==`调试消息。

如果我这样做`true`或`false`或`nil`什至`Object.new`它永远不会打印出`X#==`消息。

但如果我重新定义`Fixnum#==`这样的：

```
class Fixnum
  def ==(other)
    p "Fixnum#=="
    super
  end
end 
```

在打印调试消息后实际上调用了原始实现，它打印出来`Fixnum#==`并且`X#==`永远不会像我最初预期的那样打印出来。

### 更新

当我用针切换干草堆时，它变得更加疯狂：

```
data = [ X.new ]
data.include?(1) 
```

`X#==`即使它`#==`之前调用了针上的方法，它也会打印出来。

有人能指出这背后的原因吗？或者只是一个优化问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T04:26:02.590

因此`include?`将发送`:==`到数组的每个元素。

如果您的元素是`true`、`false`和`nil`，则相等性测试很容易失败，因为只有`true`to`==`等`true`...

对于`Fixnum`s，就不是很清楚了，例如`1 == 1.0 # => true`。因此`Fixnum#==`，在出现未知论点的情况下会保持礼貌，并颠倒论点的顺序。这将允许您定义自己的“数字”类型。

现在更让你困惑的是，为了理解发生了什么，你**重新定义** `Fixnum#==`了. 调用`super`不会调用原始方法，而是调用`Object#==`。尝试`alias_method_chain`（或者`prepend`如果在 Ruby 2.0 中！）

顺便说一句，查看实际来源，`Fixnum`将直接处理`Fixnum`,`Bignum`和`Float`. 对于其他内置类（例如`Rational`, `Complex`, `BigDecimal`）以及用户类，`Fixnum#==`将反转接收器和参数。我不会依赖它为 执行此操作的事实`Rational`，但所有实现都会为用户类执行此操作。

# css - @font-face 不适用于 chrome 或 firefox

> ID：15984012
> 
> 赞同：0
> 
> 时间：2013-04-13T03:46:33.640
> 
> 标签：css, web, font-face

这已经发生在我最近开发的几个网站上，我完全搞不懂为什么。Stack Overflow 上的其他答案似乎都对我没有帮助，我在谷歌上找到的任何其他资源似乎也没有对我有用的答案。我在想我在做一些愚蠢的事情，但是什么？

这是我目前感到沮丧的网站： http: [//atonea.com/csj/](http://atonea.com/csj/)

它不适用于 Chrome 或 Firefox，但可以在 Safari 上运行。这对我来说没有任何意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T03:50:01.977

您只包括[`.ttf`](http://en.wikipedia.org/wiki/TrueType)适用于某些版本的 WebKit 的格式，而是包括多种字体格式以支持跨浏览器：

```
@font-face {
font-family: 'MyWebFont';
src: url('webfont.eot'); /* IE9 Compat Modes */
src: url('webfont.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
     url('webfont.woff') format('woff'), /* Modern Browsers */
     url('webfont.ttf')  format('truetype'), /* Safari, Android, iOS */
     url('webfont.svg#svgFontName') format('svg'); /* Legacy iOS */
} 
```

您还需要`@font-face`在任何元素上使用它之前添加规则..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T03:48:42.137

您需要在声明之前添加您的字体。所以把你的字体放在css的开头。

# android - Android - 使用来自安全服务器的 url 加载图像

> ID：15984017
> 
> 赞同：3
> 
> 时间：2013-04-13T03:47:05.353
> 
> 标签：android, android-image

我试图在我的 android 应用程序中使用 url 加载图像。我已成功加载它并使用来自网络的图像填充我的应用程序。我所做的是，在我的图像加载器中，我有这个：

```
 try {
        Bitmap bitmap=null;
        URL imageUrl = new URL(url);
        HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
        conn.setConnectTimeout(1000);
        conn.setReadTimeout(1000);
        conn.setInstanceFollowRedirects(true);
        InputStream is=conn.getInputStream();
        OutputStream os = new FileOutputStream(f);
        Utils.CopyStream(is, os);
        os.close();
        bitmap = decodeFile(f);
        return bitmap;
    } catch (Throwable ex){
       ex.printStackTrace();
       if(ex instanceof OutOfMemoryError)
           memoryCache.clear();
       return null;
    } 
```

但是我还必须从安全服务器获取图像。就像当我从我的 PC 浏览器访问图像的 url 时，我需要进行此身份验证：

![在此处输入图像描述](https://i.stack.imgur.com/MO4VA.png)

所以，这就是为什么我修改了我的 ImageLoader。所以我为身份验证添加了一些东西：

```
 try {
        Bitmap bitmap=null;
        URL imageUrl = new URL(url);
        String userPass = username+":"+password;
        byte[] encode = Base64.encode(userPass.getBytes(), Base64.NO_WRAP);
        HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
        conn.setRequestProperty("Authentication", "Basic" + encode.toString());
        conn.setConnectTimeout(1000);
        conn.setReadTimeout(1000);
        conn.setInstanceFollowRedirects(true);
        InputStream is=conn.getInputStream();
        OutputStream os = new FileOutputStream(f);
        Utils.CopyStream(is, os);
        os.close();
        bitmap = decodeFile(f);
        return bitmap;

    } catch (Throwable ex){
       ex.printStackTrace();
       if(ex instanceof OutOfMemoryError)
           memoryCache.clear();
       return null;
    } 
```

问题是，来自该安全服务器的图像无法加载到我的应用程序中。它只是显示我的旋转进度条，因为我添加了它。我在哪个区域做错了？或者我应该如何改进那部分，因为我将从安全服务器加载图像 url？当然，我知道用户名和密码。

任何帮助将非常感激。

顺便说一句，我得到的响应是 400 - 错误请求。

# java - java中的字符串解析和解码

> ID：15984020
> 
> 赞同：0
> 
> 时间：2013-04-13T03:47:42.787
> 
> 标签：java, string

我们需要解码长的数据流。

每条数据都是一个长字符串，由编码序列组成，由分隔符分隔。每个序列都是由编码的密钥组成的。

编码的“键”和它们的等效字符之间的映射是单独维护的。这个想法是查找地图中的每个键；并用相应的字母替换。

实现这一目标的最有效方法是什么。

是子字符串并替换处理流的正确方法吗？还是我们有更高性能的替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:10:52.283

由于这看起来像一个家庭作业，我会给你一个大致的想法，让你自己制定实现。

最合理的方法是`StringBuilder`在其中构建输出。按令牌解析您的输入令牌。对于每个令牌，在您的地图中查找它的键并将值附加到您的`StringBuilder`. 完成后，输出字符串生成器的内容。

注意：如果您的字符串非常长（很多 MB 或 GB），只需直接写入输出流即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:51:51.380

长字符串中的许多重复替换将非常低效。正如你所说的输入是“流动的”，所以不是一次读取所有输入广告处理，你应该阅读和处理更小的块，我想一个缓冲区一个缓冲区。

使用 a 处理传入数据`StringTokenizer`，按分隔符拆分。

对于每个传入的令牌，执行替换，如果可能，直接将其写入输出流，或者附加到`StringBuilder`.

# java - 类似云浏览的应用

> ID：15984021
> 
> 赞同：1
> 
> 时间：2013-04-13T03:47:50.777
> 
> 标签：java, ios

有谁知道任何类似于 Cloud Browse 的开源应用程序？我正在尝试开发一个个人 iOS 应用程序（非出售），它可以让我在 iPad 上使用 Java 小程序。或者，如果您对我还能如何实现这一点有任何其他想法，我会很感兴趣。

# javascript - Magento 将 Js 添加到页脚

> ID：15984022
> 
> 赞同：8
> 
> 时间：2013-04-13T03:48:04.697
> 
> 标签：javascript, xml, magento

我正在尝试在我的 magento 的页脚中加载 js 文件。我正在使用此代码，但它给了我一个错误。有什么帮助吗？非常感谢！

```
code used in local.xml: 

<layout>
<default>
    <reference name="footer">
        <action method="addJs"><script>js/file.js</script></action>
    </reference>
</default>
</layout> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-10-24T06:19:32.957

找到`page.xml`您的主题并找到以下内容

```
<block type="core/text_list" name="before_body_end" as="before_body_end" translate="label"> 
```

并在之后插入以下代码

```
<block type="page/html_head" name="jsfooter" as="jsfooter" template="page/html/jsfooter.phtml">
   <action method="addJs"><script>your_script.js</script></action>
</block> 
```

在其中创建模板文件`app/design/frontend/[package]/[theme]/template/page/html/jsfooter.phtml`并放入以下内容：

```
<?php echo $this->getCssJsHtml() ?> 
```

在您的页面模板文件“1column.phtml”、“2columns-left.phtml”、“2columns-right.phtml”、“3columns.phtml”等中，您需要在标记之前输出此块：

```
<?php echo $this->getChildHtml('jsfooter') ?> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-16T21:48:41.777

Magento v1.6+（需要在旧版本中测试）；

`page/html/footer/extras.phtml`1 -使用此内容创建一个模板文件：

```
<?php echo $this->getCssJsHtml() ?> 
```

2 - 将此 html 节点添加到您的布局 xml：

```
<reference name="before_body_end">
<block type="page/html_head" name="extra_js" as="extraJs" after="-" template="page/html/footer/extras.phtml">
    <action method="addItem"><type>skin_js</type><name>js/jquery.min.js</name></action>
</block> 
```

3 - 就是这样！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-24T22:32:38.490

在这里引用我的答案：
[如何通过magento中的布局xml文件在正文部分（不是标题）中添加Javascript文件](https://stackoverflow.com/questions/15715549/)

最好的办法是使用 js 链接制作一个 .phtml 文件，并使用以下格式将其添加到页脚：

```
<layout>
    <default>
        <reference name="footer">
            <block type="core/template" name="unique_name_here" template="path/to/js.phtml" />
        </reference>
    </default>
</layout> 
```

对于这样的引用，页脚将自动加载所有子 html 块。父 .phtml 模板文件可能需要在其中调用 getChildHtml 才能显示，如下所示：

```
<?php echo $this->getChildHtml('unique_name_here'); ?> 
```

那应该这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-29T20:57:15.547

您可以在 page.xml 中添加新块

```
<block type="core/text_list" name="before_body_end" as="before_body_end" translate="label">
    <block type="page/html_head" name="footerjscss" as="footerjscss" after="-" template="page/html/footerjscss.phtml"/>
</block> 
```

然后在任何 layout.xml 中添加 JS & CSS 文件

```
<reference name="footerjscss">
    <action method="addItem"><type>skin_js</type><name>js/slideshow.js</name></action>
    <action method="addItem"><type>skin_css</type><name>css/madisonisland.css</name><params/><if/></action>
</reference> 
```

在 page/html/footerjscss.phtml 中创建 .phtml 文件并添加以下内容

```
<?php echo $this->getCssJsHtml() ?> 
```

现在在页面模板“3columns.phtml”等中调用块。您需要在标记之前输出此块：

```
<?php echo $this->getChildHtml('before_body_end') ?> 
```

**在此处参考代码：http:** [//blog.rahuldadhich.com/magento-load-css-js-footer/](http://blog.rahuldadhich.com/magento-load-css-js-footer/)

# css - Css Show On Hover For My Nav

> ID：15984023
> 
> 赞同：0
> 
> 时间：2013-04-13T03:48:09.163
> 
> 标签：css, hover, show-hide

我通常没有css问题，我自己制作了这个导航菜单，但我似乎无法理解为什么当我将鼠标悬停在一个项目上时它不会显示我的div......我创建了一个jsfiddle @ [http：/ /jsfiddle.net/LuLTM/](http://jsfiddle.net/LuLTM/)以及所有代码......

```
#beautyworld #beautyhealth {display:none;}
#beautyworld #beautyhealth:hover {color:black;display:block!important} 
```

我希望将鼠标悬停在 div #beautyworld 上以显示 div #beautyhealth ...我只是不明白为什么我的 css 无法正常工作...。有人可以建议吗？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T03:57:08.210

我认为问题在于您试图将鼠标悬停在当前“显示：无”的内容上。由于 display none 会折叠元素，因此没有任何东西可以悬停。您注意让它悬停在相对父级上以显示子级。

例如：

```
#beautyworld > div { display:none; }
#beautyworld:hover > div { color:black; display: block !important; } 
```

# php - PDO Int 占位符在它们周围获得引号

> ID：15984025
> 
> 赞同：3
> 
> 时间：2013-04-13T03:48:25.997
> 
> 标签：php, mysql, pdo

因此，以下代码一直困扰着我：

```
 $stm = $pdo->prepare("SELECT * FROM urls WHERE account=? AND NOT deleted LIMIT ?, 4");
    $stm->execute($user, ($request-1)*4); 
```

每当我执行此查询时，它都会返回此错误：

```
Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''0', 4' at line 1' 
```

查找后似乎使用 ? 除非您使用 bindParam 指定，否则占位符会自动在其周围加上引号。有没有办法解决这个问题而不必使用 bingparam 函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T03:55:16.567

这是一个已知问题，为什么`limit`不应真正与绑定参数一起使用。但是，您可以通过单独绑定参数并将其命名为 int 来克服这个问题。

```
$stm = $pdo->prepare("SELECT * FROM urls WHERE account=? AND NOT deleted LIMIT ?, 4");
$stm->bindValue(1, $user);
$stm->bindValue(2, ($request-1)*4), PDO::PARAM_INT);
$stm->execute(); 
```

如果您阅读[`PDOStatement::execute()`](http://www.php.net/manual/en/pdostatement.execute.php)它是因为执行时的绑定导致所有参数被绑定为字符串。

正如[您的常识](https://stackoverflow.com/users/285587/your-common-sense)所指出的，您可以禁用仿真模式并让 MySQL 自行整理占位符，尽管这可能不适用于所有 DB 驱动程序（尽管适用于 MySQL），方法是：

```
$pdo->setAttribute( PDO::ATTR_EMULATE_PREPARES, false ); 
```

或者，`intval`如果您希望这样做，您可以对 int 进行 or 类型转换并将其直接放在语句中。

# c - 通过管道失败将结构写入孩子

> ID：15984040
> 
> 赞同：0
> 
> 时间：2013-04-13T03:51:47.547
> 
> 标签：c, struct, ipc, pipe

我正在尝试分叉一个孩子并向其写入一个结构，但由于某种原因，写入失败。这是我到目前为止所得到的：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main(){
    pid_t pid;
    int pfd[2];
    int rv;
    if(pipe(pfd) == -1){
        printf("Pipe failed\n");
    }

    struct t{
        int count[26];
        char array[4];
    };
    struct t st;

    if((pid = fork()) < 0){
        printf("Fork error\n");
    }else if(pid == 0){
        close(pfd[1]);
        rv = read(pfd[0],st,sizeof(struct t));
        printf("Read string: %d\n",rv);
    }else{
        int i = 0;
        for(i = 0; i < 26; i++){
            st.count[i] = i;
        }
        for(i = 0; i < 3; i++){
            st.array[i] = 'A';
        }
        st.array[3] = '\0';

        close(pfd[0]);
        rv = write(pfd[1],st,sizeof(struct t));
        printf("wrote: %d",rv);
        close(pfd[1]);
    }
} 
```

这让我整晚都死了。我怀疑这与我没有完全理解指向结构的指针有关。我打印了 sizeof(struct t) ，它返回了 108 个字节（如预期的那样），我认为 st 是指向结构开头的指针，这意味着写入命令将从那里开始并写入前 108 个字节，但显然情况并非如此. 我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:29:20.680

试试`&st`。`st`是结构本身。`&`从中取出一个指针。

您可能需要启用（或注意）编译器警告。添加`-Wall`或`-Wall -Wextra`到编译命令。

* * *

您需要包含该`read`函数的头文件。

```
#include <unistd.h> 
```

现在您应该收到错误消息。

# ruby - 安装 DevKit 时出错

> ID：15984041
> 
> 赞同：0
> 
> 时间：2013-04-13T03:51:50.303
> 
> 标签：ruby, devkit

安装 DevKit 时出现此错误

```
C:\DevKit>gem install json --platform=ruby  
Fetching: json-1.7.7.gem (100%)  
Temporarily enhancing PATH to include DevKit...  
Building native extensions.  This could take a while...  
Successfully installed json-1.7.7  
Parsing documentation for json-1.7.7  
unable to convert "\x90" from ASCII-8BIT to UTF-8 for lib/json/ext/generator.so,  
 skipping   
unable to convert "\x90" from ASCII-8BIT to UTF-8 for lib/json/ext/parser.so, sk  
ipping  
Installing ri documentation for json-1.7.7  
Done installing documentation for json (3 sec).  
1 gem installed 
```

任何人都可以在这里帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-12T12:55:46.240

您需要先使用 gem install rdoc 安装 rdoc

我也面临同样的问题。

# css - 旋转对象上的底部填充动画如何导致 -DIAGONAL- 运动？

> ID：15984042
> 
> 赞同：1
> 
> 时间：2013-04-13T03:51:59.103
> 
> 标签：css, animation, rotation

我正在尝试在页面的 elft 侧做一个小反馈选项卡。我创建了一个 div，将其旋转了 90 度，然后将其放在页面的左侧。到目前为止，一切都很好。然后我想在悬停时添加一点动画。所以我只增加了一点底部填充，但选项卡沿对角线移动....../：
[这是一个有问题的**CodePen**。](http://www.codepen.io/A-Zak/pen/qoicB)

我如何解决它？！谢谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T03:58:44.680

当你变换一个元素时，除非另有说明，否则原点是中心。但是，如果您添加`padding-bottom`，那么您将中心向下移动。这会导致旋转基于不同的点，从而导致对角线移动。

尝试使用`transform-origin:0 100%;`相对于左下角定位变换。您需要调整您的`left`和`top`值，但是当您增加底部填充时，您应该不会再看到问题。

# c++ - NetShareEnum (..) winapi 无法删除不必要的共享文件夹

> ID：15984046
> 
> 赞同：0
> 
> 时间：2013-04-13T03:52:17.490
> 
> 标签：c++, winapi, visual-c++, mfc, shared-directory

为了获取共享文件夹名称，我使用了以下代码，在这里我可以获取文件夹名称。但是我面临的问题是用户创建的共享文件夹也提供了一些额外的文件夹，我不知道如何防止程序隐藏那些不必要的文件夹名称。就像在我的情况下，我得到**“cc_views”**（用于clearcase）和**“Users”**文件夹，我想从我的文件夹列表中删除它们。

我写了以下代码，请帮助获得正确的输出。

```
 #ifndef UNICODE
    #define UNICODE
    #endif
    #include <windows.h>
    #include <stdio.h>
    #include <lm.h>
    #pragma comment(lib, "Netapi32.lib")
    #pragma comment(lib, "Advapi32.lib")

    void wmain( int argc, TCHAR *lpszArgv[ ])
    {
       PSHARE_INFO_502 BufPtr,p;
       NET_API_STATUS res;
       LPTSTR   lpszServer = NULL;
       DWORD er=0,tr=0,resume=0, i;

       switch(argc)
       {
       case 2:
          lpszServer = lpszArgv[1];
          break;
       default:
          printf("Usage: NetShareEnum <servername>\n");
          //return;
       }
       //
       // Print a report header.
       //
       printf("ShareFolderName\n");
   printf("---------------\n");
       //
       // Call the NetShareEnum function; specify level 502.
       //
       do // begin do
       {
          res = NetShareEnum ((LPSTR)lpszServer, 502, (LPBYTE *) &BufPtr, MAX_PREFERRED_LENGTH, &er, &tr, &resume);
          //
          // If the call succeeds,
          //
          if(res == ERROR_SUCCESS || res == ERROR_MORE_DATA)
          {
             p=BufPtr;
             //
             // Loop through the entries;
             //  print retrieved data.
             //
             for(i=1;i<=er;i++)
             {
                 LPCTSTR str = (LPCTSTR)p->shi502_remark;
                 if(!(lstrcmpi(str,L"Remote admin")==0 ||lstrcmpi(str, L"Remote IPC")==0 || lstrcmpi(str,L"Default share")==0)) //Help in removing from extra folder based on the remarks
                    printf("%-20S%\n",p->shi502_netname);
                p++;
             }
             //
             // Free the allocated buffer.
             //
             NetApiBufferFree(BufPtr);
          }
          else 
             printf("Error: %ld\n",res);
       }
       // Continue to call NetShareEnum while 
       //  there are more entries. 
       // 
       while (res==ERROR_MORE_DATA); // end do
       return;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:07:13.387

只需在此处继续添加要在列表中排除的值：

```
if(!(lstrcmpi(str,L"Remote admin")==0 ||
     lstrcmpi(str, L"Remote IPC")==0 || 
     lstrcmpi(str,L"Default share")==0 ||
     lstrcmpi(str,L"cc_views")==0 ||
     lstrcmpi(str,L"Users")==0))
       printf("%-20S%\n",p->shi502_netname); 
```

# jquery - $.getJSON 与 PHP Post 返回 null。硬编码变量正确返回

> ID：15984049
> 
> 赞同：1
> 
> 时间：2013-04-13T03:52:40.793
> 
> 标签：jquery, json, post, null, jsonp

我在执行对本地文件的 JSON 查询时遇到了一点问题。当我使用时；

```
<script>
$('.Import').on('click', function(){
    $.getJSON("charFetch.php?name=" + $('.charname').val() + "&realm=" + $('.realmname').val(),function(data){

        console.log("charFetch.php?name=" + $('.charName').val() + "&realm=" + $('.realmName').val());
        console.log(data);

    }); 
}); 
</script> 
```

和这个结合;

```
//$realmName = $_GET['realm'];
//$charName = $_GET['name'] 
```

在我的 PHP 文件中，它返回 null。但是，当我实际使用浏览器中发布的这两个变量直接加载 PHP 文件时，它会像往常一样打印出 jQuery，如果我在 $realmName 和 $charName 变量中进行硬编码，我会在控制台中得到有效的返回。

这非常令人困惑，我将非常感谢任何和所有帮助。

我试过添加诸如“&callback=?”之类的东西。所以它被视为JSONP，但由于我在这方面几乎一无所知，所以我只是抓住了稻草。

**编辑** 评论中的建议修复已修复它返回 null，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T04:21:56.127

出于 Thrustmaster 所说的原因，我会使用 jQuery.getJSON 语法，因为它将为请求适当地编码文本：

```
$.getJSON('charFetch.php',
    {name:$('.charname').val(),realm:$('.realm').val()},
    f‌​unction(){...}); 
```

# hadoop - 是否可以让 Hadoop MapReduce 作业每个键写入一个文件？

> ID：15984055
> 
> 赞同：3
> 
> 时间：2013-04-13T03:53:35.833
> 
> 标签：hadoop, mapreduce

我正在尝试将 Hadoop 用于美化工作跟踪器，并且我需要能够为每个输出键编写一个文件。此外，我需要将文件命名为与键文本相同的名称，并且我希望文件与该输出键关联的值完全相同。这可能吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:49:11.487

使用[MultipleOutputFormat](http://hadoop.apache.org/docs/stable/api/org/apache/hadoop/mapred/lib/MultipleOutputFormat.html)来使用基于发送到 reducer 的密钥的自定义文件名。

# eclipse - Eclipse .classpath 文件和 build.xml 文件有什么关系？

> ID：15984057
> 
> 赞同：1
> 
> 时间：2013-04-13T03:53:47.583
> 
> 标签：eclipse, maven, ant, build.xml

我使用 Java/Eclipse 进行开发，但我从未真正使用过任何传统的构建工具，如 ant 或 maven。我一般只依赖通过eclipse构建项目，很少使用命令行。我真的不想花时间去了解 ant/maven，但我想知道 eclipse 是否真的可以通过其 .classpath 文件任何其他设置来替代 ant/maven 的所有功能。

（请不要向我推荐一些使学习 ant 变得非常容易的教程）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T04:43:09.747

*   Eclipse 知道如何基于`.project`和`.classpath`文件构建项目。

*   `build.xml`是 Ant 使用的构建规则的默认文件名，这样当你`ant`不带参数运行时，它会使用这个文件来确定要做什么。

*   `pom.xml`是描述 Maven 项目的默认文件名，因此当您运行时`mvn compile`，它将使用此文件来确定如何构建项目。

*   Eclipse 可以基于 Ant 构建文件或 POM 文件导入项目，并创建相应的`.project`文件`.classpath`。

Eclipse、Ant、Maven 都是不同的工具，不能互相替代。它们有一些重叠的功能，但也有一些独特的功能。

能够使用命令行构建项目是一项非常有用的技能，也是成为一名优秀程序员的一部分。在程序员能力矩阵中，能够使用命令行构建软件被认为是 1 级（在 0、1、2、3 级之外），如果你不能做到这一点，那就不是很好。 [http://www.indiangeek.net/programmer-competency-matrix/](http://www.indiangeek.net/programmer-competency-matrix/)

我强烈建议学习 Maven。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T04:41:58.517

如果您的应用程序在 Eclipse 之外几乎没有存在，那么也许您应该继续以这种方式使用 Eclipse。但是 Eclipse 是一个开发人员工具（开发人员就像编写代码的人一样）。除了最琐碎的项目之外，任何其他项目都必须处理开发人员以外的角色。应用程序会经历一个完整的生命周期。事实上，存在着不同的生命周期轴，无论是从项目管理的角度来看，还是从可交付成果的角度来看，例如编码、编译、组装依赖关系、打包、部署等多个阶段，或者从其他角度来看。

当您查看那些经过各个阶段的可交付成果时，可以在 Eclipse 中（手动）完成其中的许多步骤。所以，再一次，如果这对你有用，赞美。但是，它错过了自动化，并且对于某些步骤（阶段）来说，Eclipse 并不是正确的工具。例如：持续集成不是为 Eclipse 构建的。CI 服务器可能想要检查您的源代码并从头开始构建东西。它需要查找依赖项等，可以根据 Eclipse 的`.classpath`文件进行查找，但这会引入对 Eclipse 的依赖项。现在，我已经看到大公司正是这样做的，但它有点笨拙，因为这又不是 Eclipse 的本意。

相反，有一些工具可以很好地处理整个*生命周期。

**请注意，“整个”是一个非常主观的问题。从开发人员的角度来看，生命周期可以很好地分成几个阶段，但是您较大组织中的其他人可能会发现他们的职责在任何给定的生命周期阶段细分中都没有得到充分代表。*

Maven 或 Gradle 就是这样的工具。将它们视为具有多个工作站的装配线。开发人员在其中一个工作站使用 Eclipse，但在装配线下方不断滚动。CI 是另一个工作站，使用 Bamboo、Hudson、Jenkins 或类似工具，但仍在工作的装配线下方。在 Eclipse 中，m2e 插件是 Eclipse 和装配线 Maven 之间的连接器。

解决此问题的另一种方法是使用脚本，或者替换您在 Eclipse 中执行的手动步骤，将它们连接在一起，或者补充它们。显然有许多语言可以使用，但在构建工具领域内，Ant 非常流行，因为它的功能与此目的完全一致。

如果您是一家专业的软件工厂（可能已经是单个开发人员项目的情况），您需要一条装配线。Maven 或 Gradle 给你一个开箱即用的。如果你想逆流而上，你可以自己构建，使用 Ant 或其他东西。如果您在这方面确实没有要求可言，请继续在 Eclipse 中手动操作。

尽管 Ant 是用 XML 定义的，但作为开发人员，Ant 对我们来说很自然，因为它有很多传统的顺序编程语言。Maven 和 Gradle 有不同的方法，因此学习曲线更陡峭。但这绝对值得。如果您按照他们的方式进行操作，事情就会变得轻而易举，您不必编写所有其他想要添加到装配线的东西。这种手工制作的脚本总是从很小的地方开始，但它们永远不会保持这种状态，是吗？:)

除此之外，我想提一下，Maven 也非常擅长解决依赖关系。这就是它最出名的地方，但这不是这个问题的目的，事实上它只是它能为你做的一小部分。

# php - 无法从 PHP 表单中找到预期的文本框输出

> ID：15984058
> 
> 赞同：0
> 
> 时间：2013-04-13T03:53:57.413
> 
> 标签：php, forms

我在 reg.php 文件中有一个文本框元素。该元素的代码定义如下：

```
 <input type="text" name="name" size="25" maxlength="25"> 
```

这是 reg.php 中定义的表单代码：

```
 <Form name="registration" method="post" action="confirm.php" enctype="multitype/form-data"> 
```

在 confirm.php 中，我想显示在文本框中输入的字符串的值。出于这个原因，我输入了以下代码：

```
 <?php
                    if(empty($name))
                        die("No Name Submitted");
                    else if(strlen($name)<5)
                        die("invalid name");
                    else
                        echo $name;
                ?> 
```

但是当我输入一个字符串然后按 enter 时，字符串“No Name is Submitted”会在浏览器中回显。为什么 ？我已经试过好几次了。但是代码的结果和之前的一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T03:56:59.330

尝试使用`$_POST['name']`，因为您是发布数据并且可以通过`$_POST`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:02:42.020

你从哪里得到你的字符串？您应该使用`$_GET`or`$_POST`从 HTML 中获取您的字符串，然后尝试检查该字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T04:16:30.273

```
 <?php
                    if(isset($_POST['name']) && trim($_POST['name']) != ""){

                       if(strlen($_POST['name'])>5)echo $_POST['name'];
                       else die("invalid name");
                    }else{
                     die("No Name Submitted");
                    }

                ?> 
```

使用检查后数据检查表单，您可以使用修剪或其他清除字符串功能

# mpi - MPI_Barrier 在 Ubuntu 中无法正常工作

> ID：15984061
> 
> 赞同：1
> 
> 时间：2013-04-13T03:54:24.333
> 
> 标签：mpi

我是使用 MPI 的初学者。这里我写了一个非常简单的程序来测试 MPI 是否可以运行。这是我的hello.c：

```
#include <stdio.h>
#include <mpi.h>

int main(int argc, char *argv[]) {
  int numprocs, rank, namelen;
  char processor_name[MPI_MAX_PROCESSOR_NAME];

  MPI_Init(&argc, &argv);
  MPI_Comm_size(MPI_COMM_WORLD, &numprocs);
  MPI_Comm_rank(MPI_COMM_WORLD, &rank);
  MPI_Get_processor_name(processor_name, &namelen);
  MPI_Barrier(MPI_COMM_WORLD);
  printf("Process %d on %s out of %d\n", rank, processor_name, numprocs);

  MPI_Finalize();
} 
```

我用to node来测试，hostfile是：node1 node2

所以我有两台机器，名称为 node1 和 node2。我可以在没有密码的情况下互相 ssh。

我通过键入启动程序：`mpirun -np 2 -f hostfile ./hello`。

可执行文件 hello 位于两台机器的同一目录中。

然后在我运行之后，我得到一个错误：

> PMPI_Barrier 中的致命错误：其他 MPI 错误，错误堆栈：PMPI_Barrier(425)............：MPI_Barrier(MPI_COMM_WORLD) 失败 MPIR_Barrier_impl(331)......：集体 MPIR_Barrier_impl(313) 期间失败...... .: MPIR_Barrier_intra(83)....: dequeue_and_set_error(596): 等级为 0 的通信错误 PMPI_Barrier 中的致命错误：其他 MPI 错误，错误堆栈：PMPI_Barrier(425).......: MPI_Barrier(MPI_COMM_WORLD ) 失败 MPIR_Barrier_impl(331)....: 集体 MPIR_Barrier_impl(313)....期间失败....: MPIR_Barrier_intra(83)....: dequeue_and_set_error(596): 等级 1 的通信错误

如果我注释掉 MPI_Barrier()，它可以正常工作。机器之间的通讯好像有问题？或者我没有正确安装openmpi？有任何想法吗？

我正在使用 Ubuntu 12.10

我得到了一些提示：这在 MPICH2 中效果不佳，如果我使用 openmpi，那么它可以工作。我只是通过 sudo apt-get install mpich2 安装了 MPICH。我错过了什么吗？mpich2的大小比openmpi小很多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-27T22:53:30.007

在 /etc/hosts 中，某些 Linux 发行版的较新版本在文件顶部添加以下类型的行：

```
127.0.0.1 localhost
127.0.0.1 [hostname] 
```

这应该更改，以便主机名行包含您的实际 IP 地址。如果您不进行此更改并出现以下错误，则 MPI hydra 进程将中止：

```
Fatal error in PMPI_Barrier: Other MPI error, error stack:
PMPI_Barrier(425)...........: MPI_Barrier(MPI_COMM_WORLD) failed
MPIR_Barrier_impl(292)......: 
MPIR_Barrier_or_coll_fn(121): 
MPIR_Barrier_intra(83)......: 
dequeue_and_set_error(596)..: Communication error with rank 0 
```

# java - 无法正确输入 java 文件的参数

> ID：15984066
> 
> 赞同：0
> 
> 时间：2013-04-13T03:55:35.307
> 
> 标签：java, command-line-arguments

我为这个问题的简单性道歉。

我正在尝试使用一个名为 ChromHMM 的程序来分析一些生物数据。我尝试按照说明运行程序，但似乎无法正确输入参数。

下面是一个例子： E:\ComputationalAnalysis\ChromHMM>java -mx1600M -jar ChromHMM.jar BinarizeBed
染色体长度文件=\CHROMSIZES\hg19.txt inputbeddir=\Donor1 cellmarkfilet ble=\Donor1\cellmarkfile.txt outputbinarydir=\firstoutput

它只返回这个：使用 BinarizeBed [-b binsize][-c controldir][-center][-colfields Chromium,start rt,end[,strand]][-e offsetend][-f foldthresh][-n shift] [-o outputcontroldir][-p poissonthresh][-peaks][-s offsetstart][-strictthresh][-t outputsignaldir][-u pse udocountcontrol][-w flankwidthcontrol] 染色体长度文件 inputbeddir cellmark filetable outputbinarydir

在手册中它说最后的 4 个参数是唯一需要运行的参数。有谁知道我做错了什么？我正在尝试从 Windows 命令提示符执行此操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T04:02:32.047

尝试删除参数的名称和等号；只需传递值。因此，在您的示例中，您将拥有以下内容。

`E:\ComputationalAnalysis\ChromHMM>java -mx1600M -jar ChromHMM.jar BinarizeBed \CHROMSIZES\hg19.txt \Donor1 cellmarkfileta \Donor1\cellmarkfile.txt \firstoutput`

# javascript - 如何使应用程序中的所有按钮（甚至是动态创建的）都遵循 jquery 按钮小部件，而无需多次调用 .button()

> ID：15984068
> 
> 赞同：0
> 
> 时间：2013-04-13T03:56:36.523
> 
> 标签：javascript, jquery, asp.net-mvc, jquery-ui, jquery-ui-button

我是堆栈溢出的新手，这是我的第一个问题。请原谅我的任何错误。这个问题更笼统，但我试图寻找答案但找不到。

假设我有一个页面，并且我正在为所有按钮使用 jquery ui button() 小部件。发生的事情是我为页面上的所有按钮定义了一个特定的类。所以我可以指定 $('.myButtonClass').button(); 但是每当我再次渲染有按钮的部分视图时，我必须在部分视图中做同样的事情。有什么方法可以全局指定按钮或任何元素的转换。

这是一个示例 Fiddle，它在单击时添加按钮。但是添加的按钮不是按钮小部件的转换（我不想使用克隆）。

[http://jsfiddle.net/wjxn8/](http://jsfiddle.net/wjxn8/)

```
$('.clsTest').button().click(function(){
    $(this).after('<input type="button" value="Added" class="clsTest"/>');
}); 
```

这是否可能没有：- 1）为所有创建的按钮手动添加按钮小部件的 css 类。2) 使用 Javascript 跟踪 DOM 更改并为所有按钮元素执行转换。

谢谢你的帮助！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T04:34:56.770

既然您正在寻找其他东西，为什么不在加载部分或其他内容时触发自定义事件：

```
$('.clsTest').button().click(function(){
    $(this).after('<input type="button" value="Added" class="clsTest"/>').trigger('addButtonUI');
});
$(document).bind('addButtonUI',function(){
    $('.clsTest').button();
}); 
```

[http://jsfiddle.net/wJXN8/3/](http://jsfiddle.net/wJXN8/3/)

如果您触发您的事件并让文档监听它，那么您可以做任何您想做的事情。我也可以在那里添加更多按钮，但这应该能说明问题。

您要的是什么，添加按钮时的一些事件....您需要自己想出并在添加按钮时触发它。有这个：[如何在 jQuery 中检测新元素的创建？](https://stackoverflow.com/questions/3384398/how-to-detect-new-element-creation-in-jquery)它讨论了将新元素添加到 DOM 时触发的特定事件。没测试过，好像在IE上不行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T04:30:07.613

我不是这个的超级粉丝，但你可以投票寻找新的按钮。看看我的你的小提琴叉子（听起来很有趣）：

[http://jsfiddle.net/lbstr/Hq97H/](http://jsfiddle.net/lbstr/Hq97H/)

使用您的示例，这看起来像：

```
setInterval(function(){
    $('.clsTest').not('.ui-button').button();
}, 1000); 
```

正如我所说，我不是这个的忠实粉丝。我理解对像这里这样的东西的渴望`$.live`，但我仍然认为在添加新内容时初始化它会更好。如果您正在对新内容进行 ajax 调用，只需在将其添加到 DOM 时对其进行初始化。

我愚蠢的轮询代码和`$.live`（现在已弃用）可能很方便，但它们的表现非常糟糕。只是我的两分钱。你比我更了解你的代码！

# sql - 插入新记录时的主键冲突

> ID：15984074
> 
> 赞同：0
> 
> 时间：2013-04-13T03:57:14.003
> 
> 标签：sql, database, vb.net, winforms, visual-studio-2010

在数据库应用程序中，我想在数据库表中插入、更新和删除记录。表如下： ![在此处输入图像描述](https://i.stack.imgur.com/q8xOR.png)

在这个表中，Ga1_ID 是主键。假设我当前插入了 5 条记录。在第二次尝试中，如果我想插入 5 个其他记录，并且如果这些新记录中的任何一个包含表中已经存在的主键属性，则会显示错误。没关系。

但是，当我插入新的 5 条记录时......我如何验证这些新记录的主键值不存在。我的意思是，如何匹配或计算已经存在的主键属性，然后插入新记录。

处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:22:28.533

在数据适配器中使用以下查询：

```
 da=new SqlDataAdapter("select  Ga1_ID from table where  Ga1_ID=@pkVal",conn);
    DataSet=new DataSet();
    da.fill(ds);

//pass parameter for @pkVal

    da.SelectCommand.Parameters(1).Value = pkValue;    

    if(ds.Tables[0].Rows.Count>0) //If number of rows >0 then record exists
     BEGIN
     messagebox.show("Primary key present");
     END 
```

希望它有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T04:30:10.750

不要提前检查现有记录，即不要先选择然后再插入。一种更好（也很常见）的方法是尝试插入并处理异常，特别是如果有主键违规并处理它。

1.  在 try/catch 块中进行插入，在主键冲突异常和其他 sql 异常类型的情况下使用不同的处理。

2.  如果没有异常，则工作完成，插入记录。

3.  如果您发现了主键违规异常，请适当处理（您的帖子没有指定在这种情况下您要做什么，这完全取决于您）

如果您想一次执行 5 次插入并希望确保它们全部成功，或者如果其中任何一个失败则回滚，那么在事务中执行插入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T04:21:24.323

您可以在插入之前先进行查找。

```
IF EXISTS (SELECT * FROM tableName WHERE GA1_id=@newId)
    BEGIN
        UPDATE tableName SET Ga1_docid = @newdocID, GA1_fieldNAme = @newName, Ga1_fieldValue = @newVal where  GA1_id=@newId
    END
ELSE
    BEGIN
        INSERT INTO tableName(GA1_ID, Ga1_docid, GA1_fieldNAme Ga1_fieldValue) VALUES (value1,val2,value3,value4)
    END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T04:26:46.873

通常，您希望有一个`surrogate`键，该键通常是`identity`在您插入行时会自动递增的列，这样您就不必关心知道哪个`id`已经存在。

但是，如果您必须手动插入，`id`则有一些替代方法，并且知道您正在使用的 SQL 数据库会有所帮助，但在大多数 SQL 实现中，您应该能够执行以下操作：

**如果不存在**

```
IF NOT EXISTS(
        SELECT 1
        FROM your_table
        WHERE Ga1_ID = 1
    )
        INSERT INTO ... 
```

**选择不存在的地方**

```
INSERT INTO your_table (col_1, col_2)
SELECT col_1, col_2
FROM (
    SELECT 1 AS col_1, 2 AS col_2
    UNION ALL
    SELECT 3, 4
) q
WHERE NOT EXISTS (
    SELECT 1
    FROM your_table
    WHERE col_1 = q.col_1
) 
```

对于**MS SQL Server**，您还可以查看该[`MERGE`](http://technet.microsoft.com/fr-fr/library/bb510625.aspx)语句，对于**MySQL**，您可以使用该[`INSERT IGNORE`](http://dev.mysql.com/doc/refman/5.5/en/insert.html)语句。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T04:29:43.870

如果您使用的是 SQL Server 2012，请使用序列对象 - CREATE SEQUENCE。
这样您就可以使用 NEXT VALUE FOR 获得下一个值。

对于较旧的 SQL Server 版本，您需要将主键字段创建为 IDENTITY 字段并使用 SCOPE_IDENTITY 函数获取最后一个标识值，然后手动递增它。

# r - 基于“agrep”选择子集的“data.table”方法？

> ID：15984077
> 
> 赞同：2
> 
> 时间：2013-04-13T03:58:19.067
> 
> 标签：r, data.table

我正在尝试从 to 转换`data.frame`，`data.table`并且需要一些关于我尝试在单个列上执行的逻辑索引的建议。这是我的一张桌子：

```
places <- data.table(name=c('Brisbane', 'Sydney', 'Auckland',
                            'New Zealand', 'Australia'),
                     search=c('Brisbane AU Australia',
                              'Sydney AU Australia',
                              'Auckland NZ New Zealand',
                              'NZ New Zealand',
                              'AU Australia'))

#           name                  search
# 1:    Brisbane   Brisbane AU Australia
# 2:      Sydney     Sydney AU Australia
# 3:    Auckland Auckland NZ New Zealand
# 4: New Zealand          NZ New Zealand  
# 5:   Australia            AU Australia

setkey(places, search) 
```

我想提取其`search`列与列表中所有单词匹配的行，如下所示：

```
words <- c('AU', 'Brisbane')
hits <- places
for (w in words) {
    hits <- hits[search %like% w]
}
# I end up with the 'Brisbane AU Australia' row. 
```

我有一个问题：

有没有更多`data.table`的方法来做到这一点？在我看来，`hits`每次存储似乎都是一种`data.frame`方法。

这取决于我最终要使用的警告，`agrep`而不是`grep`/ `%like%`：

```
words <- c('AU', 'Bisbane') # note the mis-spelling
hits <- places
for (w in words) {
    hits <- hits[agrep(w, search)]
} 
```

我觉得这并没有完全利用`data.table`'s 的功能，并且希望能想到如何修改代码。

* * *

**编辑** 我想要 for 循环，因为`places`它非常大，我只想找到与*所有*单词匹配的行。因此，我只需要在结果中搜索下一个单词的最后一个单词（即依次细化结果）。

在`data.table`介绍中谈到“二进制扫描”与“矢量扫描”（即“坏方法”是`DT[DT$x == "R" & DT$y == "h"]`，“好方法”是`setkey(DT, x, y); DT[J("R", "h")]`我只是想知道是否有某种方法可以在这里应用这种方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T13:04:10.143

Mathematical.coffee，正如我在评论中提到的，您不能通过将一列（或更多列）设置为关键列来“部分匹配”。也就是说，在这些`data.table`地方，您已将“搜索”列设置为*键列*。在这里，您可以通过执行以下操作使用二进制搜索（而不是矢量扫描子集）来*快速子集：*`data.table's`

```
places["Brisbane AU Australia"] # binary search when "search" column is key'd
# is faster compared to:

places[search == "Brisbane AU Australia"] # vector scan 
```

但在你的情况下，你需要：

```
places["AU"] 
```

让所有行在键列中具有部分匹配的“AU”。这是不可能的（虽然它肯定是一个非常有趣的功能）。

* * *

如果`substring`您要搜索的内容本身*不包含 mismatches*，那么您可以尝试将搜索字符串拆分为单独的列。也就是说，`search`如果将列拆分为包含和的三列`Brisbane`，则可以将 的*键*设置为包含和的列。然后，您可以查询您提到的方式：`AU``Australia`*`data.table``AU``Brisbane`*

 *```
# fast subset, AU and Brisbane are entries of the two key columns
places[J("AU", "Brisbane")] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:45:02.403

您可以对函数进行矢量化`agrep`以避免循环。

请注意，结果`agrep2`是一个列表，因此`unlist`调用

```
words <- c("Bisbane", "NZ")
agrep2 <- Vectorize(agrep, vectorize.args = "pattern")
places[unlist(agrep2(words, search))]

##           name                  search
## 1:    Brisbane   Brisbane AU Australia
## 2:    Auckland Auckland NZ New Zealand
## 3: New Zealand          NZ New Zealand 
```*

# javascript - 加载 AJAX 内容后调用 fancybox

> ID：15984082
> 
> 赞同：0
> 
> 时间：2013-04-13T03:59:02.090
> 
> 标签：javascript, jquery, ajax, fancybox

我正在将内容（通过 Ajax）动态加载到`<div>`被调用的`<div id="displayinformation">`

某些内容的格式设置为，如果有链接，则会出现 Fancybox 灯箱。

我已经测试了 Fancybox，如果内容没有从 Ajax 加载，它就可以工作。但是从 Ajax 加载，它什么也不做。

我相信这可能与此有关： `$(document).ready(function() {`尽管我不确定。

我想我需要在加载 ajax 内容后运行灯箱的代码。

我的代码如下，将不胜感激任何见解。亲切的问候，保罗。

来电：

```
<a href="http://player.vimeo.com/video/61692184" title="Lower Title Text" rel="displayvideo" >XX</a> 
```

顶级JS：

```
<script type="text/javascript">
$(document).ready(function() {

    $("a[rel=displayvideo]").fancybox({
        'overlayShow' : true,
        'width' : 800,
        'height' : 450,
        'transitionIn' : 'elastic',
        'transitionOut' : 'elastic',
        'titlePosition' : 'inside',
        'type' : 'iframe',
        'titleFormat' : function(title, currentArray, currentIndex, currentOpts) {
        return '<span id="fancybox-title-inside">Video:' + (title.length ? ' &nbsp; ' + title : '') + '</span>';
    }
});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T04:22:52.533

当您在 Ajax 调用中获得响应时，您需要在该位置放置此代码。

例如。

```
$.post("/index.php", {'param'   : param},
            function(response) {
                //here you need to put fancybox code
                $("a[rel=displayvideo]").fancybox({
                  'overlayShow'   : true,
                  'width'         : 800,
                  'height'            : 450,
                  'transitionIn'      : 'elastic',
                  'transitionOut'     : 'elastic',
                  'titlePosition'     : 'inside',
                  'type' : 'iframe',
                  'titleFormat'       : function(title, currentArray, currentIndex, currentOpts) {
                   return '<span id="fancybox-title-inside">Video:' + (title.length ? ' &nbsp; ' + title : '') + '</span>';
               }
               });
            }); 
```

# php - PHP 回显链接，添加更多内容

> ID：15984083
> 
> 赞同：0
> 
> 时间：2013-04-13T04:00:28.997
> 
> 标签：php, iframe, echo, lightbox, prettyphoto

我正在建立一个 wordpress 网站，并希望更改一个插件以与另一个插件一起使用，以便在单击新闻链接时，它将使用 iframe 在灯箱中打开。我相信以下实例是建立链接的地方。

```
<a href="<?php echo $link;  ?> 
```

我希望在最后将以下内容添加到链接中。

```
?iframe=true&width=100%&height=100%" rel="prettyPhoto[iframes]" 
```

我不确定如何将两者结合起来。我希望通过这样做，我可以正确定位并理解需要更改的内容。如果您想查看完整的 PHP 文件，我已将其添加到[http://pastebin.com/sFqSb1Ha](http://pastebin.com/sFqSb1Ha)

虽然我不介意有人告诉我答案，但我很乐意为我需要学习的知识指明正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:03:30.527

尝试这个：

```
<a href="<?php echo $link . '?iframe=true&width=100%&height=100%"' . 'rel="prettyPhoto[iframes]"';  ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:11:14.897

尝试这个

```
<a href="<?php echo $link; ?>?iframe=true&width=100%&height=100%" rel='prettyPhoto[iframes]'"></a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T04:11:58.283

```
<a href="<?php echo $link ."?iframe=true&width=100%&height=100%\" ". " rel=\"prettyPhoto[iframes]\" ";  ?> 
```

对于回声使用“您可以在此使用其他变量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T04:12:00.990

我可以看到您提供的代码中有很多`$link`回声。要为所有人应用该属性，您可以`$link`在之前设置，例如：

```
$link = $link . '?iframe=true&width=100%&height=100%" rel="prettyPhoto[iframes]'; 
```

（请注意，`"`最后缺少，因为它已在 中提供`href=""`）。

但是，如果您想将其用于单个链接，请尝试

```
<a href="<?php echo $link; ?>?iframe=true&width=100%&height=100%" rel="prettyPhoto[iframes]" ... 
```

只是有一个小问题。如果在`$link`URL 中有参数，它将失败，因为任何其他参数都必须以 开头`&`，而我们在`?iframe`那里。所以最好检查一下，无论`?`标志是否出现`$link`。

```
if (strpos($link, '?') > 0)
    $link = $link . '&iframe=true&width=100%&height=100%" rel="prettyPhoto[iframes]';
else
    $link = $link . '?iframe=true&width=100%&height=100%" rel="prettyPhoto[iframes]'; 
```

# python - 在 Python 中，为什么不能用 lambdas 编写累加器生成器？

> ID：15984087
> 
> 赞同：5
> 
> 时间：2013-04-13T04:01:18.427
> 
> 标签：python, functional-programming

Paul Graham[描述](http://www.paulgraham.com/icad.html)了以下问题：

> 我们想编写一个生成累加器的函数——一个接受数字 n 的函数，并返回一个接受另一个数字 i 并返回以 i 递增的 n 的函数。

他说，虽然这样的功能可以在 Lisp/Ruby/Perl 中实现，但就像类似

```
(defun foo (n)
  (lambda (i) (incf n i))) 
```

, 在 Python 中它会写成

```
class foo:
  def __init__(self, n):
      self.n = n
  def __call__(self, i):
      self.n += i
      return self.n 
```

所以我的问题是，Python 究竟是什么（除了缺乏对多行 lambda 的支持）阻止您以上面第一个代码示例的简洁风格实现累加器生成器？正如 Paul Graham 推测的那样，Python 将来会支持这样的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T06:02:59.680

这个例子首先是人为的。定义累加器后，您将在 Python 中像这样使用它：

```
acc = foo(6)
acc(2)
acc(4) 
```

有什么用？在 Python 中，你会这样做：

```
acc = 6
acc += 2
acc += 4 
```

我不知道在 lisp 中定义累加器是否有意义，但在 Python 中你不需要定义累加器，因为可以这么说，因为你会内置它。

其次，您提出的问题一针见血。是什么阻止了 Python 以“简洁”的方式做到这一点？因为 Python 的态度是，它将成为一种可以快速开发且可维护的语言，这意味着易于阅读。代码高尔夫球和迟钝，简洁的代码不是 Python 设计的一部分。

但归根结底，Python 永远不会发展此功能的原因是依赖于可变的整数，即您可以执行以下操作：

```
>>> g = 6
>>> g++
>>> g
7 
```

这不会发生在整数是不可变的 Python 中。您不能增加整数的值。这简化了语言和它的使用很多。例如，如果整数是可变的，它们就不能用作字典中的键。

本质上，该示例以增加整数的值为中心，这是您在 Python 中无法做到的。在 Python 中，当您将两个整数相加时，您会得到第三个整数。您不会增加第一个的值。

所以 Python 永远不会变成 lisp，只有用过 lisp 太久的人才认为应该，或者坚持“python 几乎是 lisp”的成语。它不能只用几行就做一个累加器，因为它既不需要也不想做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T04:18:38.537

他实际上在[他的后续帖子](http://www.paulgraham.com/icadmore.html)中描述了一个原因。他在那里的简短讨论涵盖了我在下面提到的两个原因，尽管他对此的看法有些不同。

正如他在帖子前面所说的那样，他关心的部分内容是语句和表达式之间的区别。在 Python`+=`中是语句，而 lambda 不能包含语句，只能包含表达式。

但是，还有另一个问题。他希望他的函数将“数字”作为输入，但他区分了“加号”和“增量”（许多编程语言也是如此）。*但是，我自己的立场是，数字*没有这种区别，只有*变量*（或“对象”或类似的东西）。没有“增加”数字 5 这样的事情。从这个意义上说，你仍然不能编写一个 Python lambda 来增加一个包含数字类型的内置变量的变量，但是如果它接受一个可变对象而不是一个原始数字。您可以编写自己的 MutableNumber 类以这种方式工作，并使其与现有的数字类型完全互操作。所以从这个意义上说，Python 不支持的原因与其类型的设计（即数字是不可变的）有关，而不是他在帖子中讨论的那种功能问题。

当然，这是否真的是语言的问题是另一个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T06:37:44.733

它可以。诀窍是使用一个容器来保存原始整数，并在不使用赋值运算符的情况下设置和访问这个数字。

```
>>> g=lambda n: (lambda d: lambda i: (d.__setitem__('v', d['v']+i),d['v'])[1])({'v': n})
>>> x=g(3)
>>> x(1)
4
>>> x(1)
5
>>> x(10)
15
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T12:19:23.470

尝试尽可能清楚地做到这一点，将 lambdas 分隔为变量：

```
concat = lambda arr, val: (arr.append(val), arr)[1]
f = lambda n: (lambda i: concat(n,n.pop(0)+i)[0])
accumulate = lambda n: f([n])
a=accumulate(9)
a(1) #10
a(2) #12 
```

# javascript - 在网络聊天应用程序中存储数据的最佳实践

> ID：15984100
> 
> 赞同：0
> 
> 时间：2013-04-13T04:03:40.077
> 
> 标签：javascript, mysql, codeigniter

我正在使用`Code Igniter`. 在这个聊天应用程序中，只有一个频道/房间。我想知道存储数据的最佳做法是使用数据库还是文件以节省带宽和页面加载。

> ps：我`javascript` `setInterval`习惯每 x 秒加载一次聊天 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T04:13:23.907

如果你想要这个文件，你可以使用 reverse-ajax/comet 因为它更快并且占用更少的带宽，因为它使用长池

如果您使用数据库并使用 ajax，它会更慢，因为它总是更新数据库中的新聊天消息，从那里获取行并显示它，这需要时间，我认为更多带宽

# android - 更换片段：没用

> ID：15984101
> 
> 赞同：0
> 
> 时间：2013-04-13T04:03:51.923
> 
> 标签：android, android-fragments, android-fragmentactivity

![在此处输入图像描述](https://i.stack.imgur.com/V37xl.png)

我有一个`Button`在`Fragment`. 如果`Button`单击它必须`Fragment`用另一个替换`Fragment`. `Fragments`activity_main.xml 中的内容是静态创建的。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#efefef"
android:orientation="vertical"
tools:context=".MainActivity" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="3" >

    <Button
        android:id="@+id/bHome"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:layout_weight="1"
        android:background="#000000"
        android:padding="3dp"
        android:text="Home"
        android:textColor="#ffffff" />

    <Button
        android:id="@+id/bEvents"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:layout_weight="1"
        android:background="#f8bd0e"
        android:padding="3dp"
        android:text="Events" />

    <Button
        android:id="@+id/bNearby"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:layout_weight="1"
        android:background="#f8bd0e"
        android:padding="3dp"
        android:text="Nearby" />
</LinearLayout>

<LinearLayout
    android:id="@+id/llFragment"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:orientation="horizontal" >

    <fragment
        android:id="@+id/fHome"
        android:name="com.example.fragmentstack.Home"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_margin="10dp" />

    <fragment
        android:id="@+id/fEvents"
        android:name="com.example.fragmentstack.Events"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_margin="10dp" />

    <fragment
        android:id="@+id/fNear"
        android:name="com.example.fragmentstack.NearBy"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_margin="10dp" />

    <FrameLayout
        android:id="@+id/fragment_container"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </FrameLayout>
</LinearLayout> 
```

activity_main.xml 的输出是

![在此处输入图像描述](https://i.stack.imgur.com/WCR3n.png)

**主要活动：**

```
public class MainActivity extends FragmentActivity implements OnClickListener {
Button home, events, near;
Fragment f1, f2, f3, f4;
FragmentManager manager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    home = (Button) findViewById(R.id.bHome);
    events = (Button) findViewById(R.id.bEvents);
    near = (Button) findViewById(R.id.bNearby);

    home.setOnClickListener(this);
    events.setOnClickListener(this);
    near.setOnClickListener(this);

    manager = getSupportFragmentManager();
    f1 = manager.findFragmentById(R.id.fHome);
    f2 = manager.findFragmentById(R.id.fEvents);
    f3 = manager.findFragmentById(R.id.fNear);
}

@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.bHome:
        if (home.isPressed()) {
            home.setBackgroundColor(Color.BLACK);
            home.setTextColor(Color.WHITE);
            events.setBackgroundResource(R.color.Yellow);
            near.setBackgroundResource(R.color.Yellow);
            events.setTextColor(Color.BLACK);
            near.setTextColor(Color.BLACK);
            FragmentTransaction transaction = getSupportFragmentManager()
                    .beginTransaction();

            transaction.hide(f2);
            transaction.hide(f3);
            transaction.show(f1);
            transaction.commit();
        }
        break;
    case R.id.bEvents:
        if (events.isPressed()) {
            events.setBackgroundColor(Color.BLACK);
            events.setTextColor(Color.WHITE);
            home.setBackgroundResource(R.color.Yellow);
            near.setBackgroundResource(R.color.Yellow);
            home.setTextColor(Color.BLACK);
            near.setTextColor(Color.BLACK);
            FragmentTransaction transaction1 = getSupportFragmentManager()
                    .beginTransaction();
            transaction1.hide(f1);
            transaction1.hide(f3);
            transaction1.show(f2);
            transaction1.commit();
        }
        break;
    case R.id.bNearby:
        if (near.isPressed()) {
            near.setBackgroundColor(Color.BLACK);
            near.setTextColor(Color.WHITE);
            home.setBackgroundResource(R.color.Yellow);
            events.setBackgroundResource(R.color.Yellow);
            home.setTextColor(Color.BLACK);
            events.setTextColor(Color.BLACK);
            FragmentTransaction transaction2 = getSupportFragmentManager()
                    .beginTransaction();
            transaction2.hide(f1);
            transaction2.hide(f2);
            transaction2.show(f3);
            transaction2.commit();
        }
        break;
    }
}

  } 
```

现在`Home`扩展`Fragment`. home 的 xml 布局有一个`Button`和一个。`TextView`在这里我将 onClicking Button 替换为`Home Fragment`new `Update Profile Fragment`。

```
public class Home extends Fragment {
Button btn;
View view;  

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    view = inflater.inflate(R.layout.home, container, false);
    init();

    return view;
}

private void init() {
    btn = (Button) view.findViewById(R.id.bUpdate);
    btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Fragment fg = new UpdateProfile();
            FragmentTransaction fragmentTransaction = getFragmentManager()
                    .beginTransaction();
            fragmentTransaction.replace(R.id.fragment_container, fg);
            fragmentTransaction.addToBackStack(null);
            fragmentTransaction.commit();
        }
    });

}

  } 
```

`R.id.fragment_container`存在于activity_main.xml 中。现在我面临的问题是单击按钮时它没有用新的片段替换片段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T07:19:30.863

> 现在我面临的问题是单击按钮时它没有用新的片段替换片段。

事务确实发生了，但是当您将该片段添加到将被推出屏幕的容器时它不可见（所有布局的片段的宽度都设置为，`match_parent`因此它们将填充`LinearLayout`' 的宽度并且`FrameLayout`将被推出屏幕）。此外，您在不包含先前片段的容器上执行替换事务，这意味着旧片段仍将在屏幕上可见（加上新添加的片段）。

您设置的系统不是处理您的场景的正确方法。从图像中，您似乎有一个类似布局的选项卡，在这种情况下，您应该只有一个容器，所有片段都将驻留在其中（以避免显示/隐藏正确片段的额外工作，并提供体面的 BACK 按钮体验）。

其次，如果您要使用这些片段工作（进行事务），您应该真正以编程方式添加它们，因为替换不会很好地处理静态片段。有很多关于如何制作带有片段的选项卡式布局的教程。

# java - 将项目从 Eclipse 导入到 IntelliJ 时

> ID：15984102
> 
> 赞同：0
> 
> 时间：2013-04-13T04:04:09.893
> 
> 标签：java, eclipse, intellij-idea

我在 Eclipse 中有一个多模块项目，效果很好。

现在我想使用 IntelliJ（我有 12.1），所以我将项目导入 IntelliJ，并在其中配置了以下内容：

*   所有模块
*   在我需要的每个项目中配置所有 lib (.jar) 文件（通过添加 lib）
*   已配置模块依赖项
*   已经用它们配置了tomcat7，并在模块的依赖项中添加了它

一切看起来都不错，但是当我运行项目时，它显示：

> `Caused by: java.lang.NoClassDefFoundError: org/xx/yyy/zzzz`

尽管模块中`org.xx.yyy.zzzz`存在类`model`，该模块已经添加到`web`模块中（我的项目有 2 个模块`web`和`model`），并且依赖范围也设置为`provided`.

我应该尝试什么来解决这个问题？如果我遗漏了什么，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T02:47:25.513

最后我得到了答案。

我将范围保持在`provided`, 并将模型模块添加到工件中并且它起作用了。:)

# python - 如何使用 python 正则表达式提取具有可变内容的数据？

> ID：15984103
> 
> 赞同：1
> 
> 时间：2013-04-13T04:05:14.640
> 
> 标签：python, regex

我正在尝试构建一个市场分析工具。原始数据输入的格式如下：

> 20,000 股，每股 550 美元

意思是“20,000 股股票，每股 550 美元”。

通常，我会使用以下代码来获取价格：

```
value = re.findall(re.compile('20,000 shares for (.*) USD each'), data) 
```

但是，由于股票数量（在本例中为 20,000）以及价格价值发生变化，这种方法使我失败了。有没有更好的方法来提取这些数据？

对于我的问题描述不当，我提前道歉；我对 Python 有点陌生，我不确定在这种情况下使用什么技术术语。如果有更好的方式来表达我的标题，请随时编辑，并提前感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:07:51.310

您可以使用更通用的模式，例如：

```
([\d,.]+) shares for ([\d,.]+) USD each 
```

此外，如果您想坚持`.*`匹配值，最好通过将其转换为使其不那么贪婪，`.*?`这样它就不会吃掉您输入的其余部分。

如果输入可以以任一结尾`each`或`per share`使用以下内容：

```
([\d,.]+) shares(?: of stock)? at ([\d,.]+) USD (?:each|per share) 
```

放在左`?:`括号之后使其成为不匹配组，因此不会与您感兴趣的数字一起被捕获。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:29:26.577

使用字符类在正则表达式中指定股票编号和股票价格。

```
(\d[\d,.]*) shares for ([\d,.]+) USD each 
```

根据您的数据的样子，您可能不需要在捕获分隔符时那么小心。例如，如果只交易整股，则不需要第一个数字组中的小数点。

如果您可能在多个数据集上使用相同的正则表达式，那么您应该单独编译它而不是在 findall 中使用它。

```
import re
compiled_regex = re.compile("""(\d[\d,.]*) shares for ([\d,.]+) USD each""")

trades1 = re.findall(compiled_re, data1)
trades2 = re.findall(compiled_re, data2) 
```

# vim - vim 替换一行中的多个字符

> ID：15984110
> 
> 赞同：0
> 
> 时间：2013-04-13T04:07:11.437
> 
> 标签：vim

命令`:%s:a:b`将逐行`aaa`修改`baa`。问题是如何`bbb`仅使用一个命令（不使用`:%s:a:b`3 次，我现在正在做的事情 :-) 获得结果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T04:09:47.937

您需要`g`在最后添加标志，如下所示：

```
:%s:a:b:g 
```

当使用正则表达式时，这个标志通常意味着“全局”替换，即替换所有出现的地方。

同样的技术通常也适用于其他使用正则表达式的工具，例如`sed`,`perl`等。

**更新**

我很惊讶这样一个简单的答案仍然不断收到支持...所以对于`vim`那些在那里的粉丝，我推荐这个很棒的网站，我仍然可以在这里学习有趣的新东西：http: [//vimcasts.org/](http://vimcasts.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-10T10:52:51.447

记住'e'标志

> :%s:a:b:e

看看这个答案[在一行中进行多次搜索和替换](https://stackoverflow.com/questions/4737099/multiple-search-and-replace-in-one-line)

# random - Ifinstring：在文本之后定位变量编号，然后随机发送该编号的 +/- 20 的新编号

> ID：15984111
> 
> 赞同：0
> 
> 时间：2013-04-13T04:07:34.403
> 
> 标签：random, autohotkey

我有一个非常简单的 AHK 脚本，它每隔一段时间读取一个 log.txt，然后在找到触发文本时随机生成一个范围内的数字，然后发送随机数作为我的猜测。这是一个愚蠢的彩票类型的事情。

问题是，如果之前的中奖号码是 40，那么下一次似乎永远不会在 40 的 20 个号码之内，所以我试图弄清楚如何在我的 Ifinstring 触发后立即找到号码 40 ，然后随机生成（然后发送）一个介于 0 到 20 以及 60 到 100 之间的数字。我确信有很多有效的方法可以做到这一点，但我是新手，想要一个简单的方法。它实际上只是一个宏，而我只是一个试图优化我的一个脚本的新手。

感谢您的耐心和帮助:)

# jquery - 需要一个支持基于表的结构的 jquery 滑块

> ID：15984112
> 
> 赞同：1
> 
> 时间：2013-04-13T04:07:44.200
> 
> 标签：jquery, asp.net, slider, datalist

我有一个用于图像的 jQuery 滑块，在 HTML 版本中它可以正常工作，但在 asp.net datalist 中则不行。我可以为基于表的结构添加任何兼容的 jQuery 吗？实际上，ASP.NET datalist 在浏览器中围绕图像呈现**TABLE、TR**和**TD**标签，这给实现 jQuery 带来了问题。

**数据列表代码**

```
<asp:DataList ID="dlphoto" runat="server" BorderStyle="Solid" BorderWidth="0px" RepeatColumns="3" RepeatDirection="Horizontal">
    <ItemTemplate>
        <asp:Image ID="Image" runat="server" CssClass="thumbnail"
            ImageUrl='<%# "~/Photos/RoomPhotos/" + Eval("Photourl") %>' />
    </ItemTemplate>
</asp:DataList> 
```

**渲染后datalist代码如下**

```
<table>
  <tbody>
    <tr>
      <td><img src="../Photos/RoomPhotos/337653939_1.jpg" id="ctl01"></td>
      <td><img src="../Photos/RoomPhotos/1167094800_4.jpg" id="ctl02"></td>
      <td><img src="../Photos/RoomPhotos/1901620528_profile1.jpg" id="ctl03"></td>
    </tr>
    <tr>
      <td><img src="../Photos/RoomPhotos/337653939_1.jpg" id="ctl04"></td>
      <td><img src="../Photos/RoomPhotos/1167094800_4.jpg" id="ctl05"></td>
      <td><img src="../Photos/RoomPhotos/1901620528_profile1.jpg" id="ctl06"></td>
    </tr>
  </tbody>
</table> 
```

**我想在数据列表上应用的 JQuery 滑块**

```
<div id="slides">
  <img src="http://4hdwall.com/wp-content/uploads/2012/04/Valentines-Day-for-mobile-150x150.jpg">
  <img src="http://4hdwall.com/wp-content/uploads/2012/04/ws_Purple_Spring_and-class-nhe-dy-a-rhy-hn-150x150.jpg">
  <img src="http://4hdwall.com/wp-content/uploads/2012/04/animal_mobile_wallpapers-150x150.jpg">
</div>

<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://slidesjs.com/js/jquery.slides.min.js"></script>
<script>
$(function() {
  $('#slides').slidesjs({
    width: 940,
    height: 528
  });
});
</script> 
```

# breeze - 微风删除失败，json有神秘的“未定义”：假

> ID：15984118
> 
> 赞同：0
> 
> 时间：2013-04-13T04:08:44.110
> 
> 标签：breeze

我正在制作一个遵循 John Papa 的 Code Camper SPA Jumpstart Pluralsight 课程的网站。我的数据库/实体具有以下层次结构：

*   Proficiency 包含 Action(s) 和 Level(s)。

当我删除“熟练度”时，我收到以下**服务器**端错误：“对象引用未设置为对象的实例。”

查看BreezeController中的json JObject saveBundle，我看到了一个神秘的：

> “未定义”：假，

在每个实体中。我的实体中都没有布尔值。就像在 Code Camper 中一样，我在每个实体的构造函数中添加了一个“isPartial”，如下面的代码所示。

```
 var proficiencyConstructor = function () {
        this.isPartial = false;
    }

        metadataStore.registerEntityTypeCtor('Proficiency', proficiencyConstructor, proficiencyInitializer);

    function proficiencyInitializer(proficiency) {
    var empty = "00000000-0000-0000-0000-000000000000";
    if (proficiency.id() === empty) {
        proficiency.id(breeze.core.getUuid());
    }
}; 
```

我的直觉说神秘的“未定义”：假是“isPartial”属性。根据[文档](http://www.breezejs.com/documentation/extending-entities)，“Breeze 将 isPartial 属性作为未映射属性添加到实体元数据中。未映射属性的值**不会**传输到服务。” 我被困住了。有人推荐我可以做的事情来解决这个问题吗？

谢谢，丹

这是来自 savebundle 的示例

> {“实体”：[{“Id”：“a0223d7c-35e5-458f-ba83-65ec7ec189fa”，“名称”：“AST Prof0”，“IsEnabled”：true，“描述”：“AST Prof0”，“ProficiencyType” ：“待定”，“ApplicationId”：“7ba4b47f-06a3-4ceb-bca6-de3fd3699bbd”，“未定义”：false，“entityAspect”：{“entityTypeName”：“熟练度：#LobGame.Model”，“entityState”：“已删除”，“originalValuesMap”：{“IsPartial”：true}，“autoGeneratedKey”：null }}，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T17:42:37.693

这可能是由于现在微风 1.2.8 中的错误修复。这为我修好了。

从他们的发行说明中：

> 修复了当保存还涉及对未映射属性的修改时涉及删除的保存将失败的情况。

[http://www.breezejs.com/documentation/download](http://www.breezejs.com/documentation/download)

# ios - 外部记录文件中 iOS 商店的核心数据

> ID：15984121
> 
> 赞同：22
> 
> 时间：2013-04-13T04:09:01.363
> 
> 标签：ios, core-data

第一次在这里提问，所以如果我没有提供足够的信息，请放轻松。基本上，我的 iOS 应用程序的一部分允许用户拍摄将存储​​在 Core Data 存储中的照片。该属性是一个 Transformable 类型，我创建了一个 NSManagedObject 子类，我只是使用它来将其图像属性设置为用户提供的新图像。

我知道在 Core Data 中存储大文件是一个坏主意，这就是为什么当我看到 Core Data 实体中图像属性下的“存储在外部记录文件中”选项时我很兴奋。但是，我的应用程序性能却不然，在 iPhone 5 上需要几秒钟才能加载几张图片（我知道这听起来并不多，但考虑到 iPhone 5 的强大功能，旧设备可能需要更长的时间相同的数据）。

我环顾四周，有人说 Store in External Record File 选项仅适用于 OS X 环境，即使它在 iOS 应用程序中可用。但是，我也在 Apple 的[“iOS 5 中的新增功能”](http://developer.apple.com/library/ios/#releasenotes/General/WhatsNewIniOS/Articles/iOS5.html)文档下看到了这一点（它是 Core Data 下的倒数第二项，接近尾声）：

> 托管对象支持两个重要的新特性：有序关系和属性值的外部存储。如果您指定托管对象属性的值可以存储为外部记录，Core Data 会根据每个值试探性地决定是**将数据直接保存在数据库中还是将 URL 存储到它管理的单独文件中为你**。

所以我的问题是，谁是对的？Apple 在为 iOS 应用程序提供此选项时是否犯了一个错误，并且它实际上什么都不做，除非你在 Mac 上，或者它实际上做了什么而我没有以正确的方式配置它，或者它是做它应该做的事情并且性能仍然很差？

我已经看到一些指南解释了如何将大文件（如图像）存储为文件，并将它们的 URL 保存在 Core Data 存储中，但由于这本质上是这个新选项正在做的事情，或者可能应该做的事情，我不确定遵循这些指南是否会有所帮助。

如果以前有人问过这个问题，我真的很抱歉。通常我自己解决这个问题就可以了，但是 Core Data 对我来说是全新的，我仍然不确定我是如何通过初始设置来实现的。感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-07T10:54:44.483

## 谁是对的？

该类的 iOS 文档集`NSAttributeDescription`确实提到了`allowsExternalBinaryDataStorage`和`setAllowsExternalBinaryDataStorage:`方法，因此 Apple 出错的可能性很小。

## 你做错了什么还是很慢？

你之前这么说

> 该属性是可转换类型

但是 Core Data 有一个`Binary data`类型。也许只有这个与外部存储能力有关。

如果不是这样，我们这里没有足够的信息：

*   你存储了多少张图片？
*   它们的尺寸是多少？ 
*   你会自动获取所有图像吗？

此外，Apple 文档指出：

> Core Data 启发式地根据每个值做出决定……</p>

*   您是使用迁移还是从头开始？

您可以查看应用程序的沙箱，看看您的图片是否真的保存在 CoreData 之外。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-07T16:24:22.157

好问题！

查看这篇文章： [使用内置 CoreData 选项将 blob 存储在外部位置](https://stackoverflow.com/questions/9801944/storing-blobs-in-external-location-using-built-in-coredata-option)

显然它应该工作。您还应该在模拟器中尝试它并检查应用程序数据文件夹，以查看文件夹是否按照描述创建（~/Library/Application Support/iPhone Simulator/... - 您将找出路径的其余部分）。您也可以使用 sqlite3 命令检查 sqlite 文件，以查看二进制数据是否在数据库中。

我没有亲自使用过这个选项，因为我更愿意手动将图像保存在文件夹中，并将对它们的引用存储在数据库中。这样，从要显示的文件创建 UIImage 对象会更容易，可以更好地控制去哪里等等。不过会需要一些额外的劳动力！

希望对您有所帮助。

# linux - 在 bitmap.h 中，为什么 bitmap_zero 需要 memset？

> ID：15984123
> 
> 赞同：3
> 
> 时间：2013-04-13T04:09:15.587
> 
> 标签：linux, bitmap, linux-kernel, memset

在 include/linux/bitmap.h 中，在 bitmap_zero() 中，为什么要使用 memset？

```
static inline void bitmap_zero(unsigned long *dst, int nbits)
{
        if (small_const_nbits(nbits))
                *dst = 0UL;
        else {
                int len = BITS_TO_LONGS(nbits) * sizeof(unsigned long);
                memset(dst, 0, len);
        }
} 
```

还`*det = OUL`不够吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T04:16:37.747

的定义`small_const_nbits`是：

```
#define small_const_nbits(nbits) \
    (__builtin_constant_p(nbits) && (nbits) <= BITS_PER_LONG) 
```

`BITS_PER_LONG`通常是 32 或 64，具体取决于您使用的机器。

因此，如果您尝试清除的位少于那么多，您当然可以在单个操作中完成 - 这是`if`语句的前半部分。如果超过 32 位或 64 位，则需要设置多个字，这由`memset`调用完成。

# python - 标准化字符串文件路径的函数

> ID：15984128
> 
> 赞同：1
> 
> 时间：2013-04-13T04:10:42.130
> 
> 标签：python

是否有可以规范化字符串文件路径或比较字符串文件路径的 Python 函数？

即类似以下的函数（我编写的）：

```
norm_path = os.normalise("C:\\abc/def/hij\\")
print(norm_path) # c:\abc\def\hij

# I'm looking for a function that converts all "/" to "\\", converts to lowercase
# and removes trailing "\\" or "/" chars so I can compare strings 
```

在我编写自己的函数之前，我想看看是否已经有一个函数可以做到这一点，所以我不会重新发明轮子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T04:16:57.123

```
>>> import os
>>> print(os.path.normcase(os.path.normpath("C:\\abc/def/hij\\")))
c:\abc\def\hij 
```

# django - django-userena 删除面部照片

> ID：15984129
> 
> 赞同：1
> 
> 时间：2013-04-13T04:10:42.417
> 
> 标签：django, django-templates, django-views

我正在构建一个使用 userena 作为个人资料和注册部分的网站。问题是我试图从编辑个人资料页面中删除面部照片上传部分和个人资料隐私（注册、打开、关闭），以便 userena 仅使用 gravatar 并且个人资料对所有人都是公开的。但是在模板中只有

```
 <fieldset>
  <legend>{% trans "Edit Profile" %}</legend>
  {{ form.as_p }}
   </fieldset>
  <input type="submit" value="{% trans "Save changes" %}" />
  </form> 
```

我正在尝试找出如何编辑此内容或视图以从表单中删除面部照片和隐私，但没有成功。请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-05T23:24:12.387

与其直接编辑 userena 表单，不如将其放入您自己的 forms.py 文件（例如，accounts/forms.py）中，如[常见问题解答](http://docs.django-userena.org/en/latest/faq.html#how-do-i-add-extra-fields-to-forms)中所述，并将 url 放在 userena 包含的上方。这是一个示例，我使用crispy-forms 对编辑配置文件表单进行子类化，以获得漂亮的引导表单：

**帐户/forms.py**

```
class EditProfileFormExtra(EditProfileForm):
    class Meta:
        model = get_profile_model()
        exclude = ['user', 'mugshot', 'privacy', 'my_custom_field']

    def __init__(self, *args, **kwargs):
        super(EditProfileFormExtra, self).__init__(*args, **kwargs)
        self.helper = FormHelper()
        self.helper.form_id = 'edit-profile-form'
        self.helper.form_class = 'form-horizontal'
        self.helper.form_method = 'post'
        self.helper.help_text_inline = True
        self.helper.add_input(Submit('submit', _('Save'), css_class='green'))
        self.helper.layout = Layout(
            Field('first_name', placeholder=_("First Name")),
            Field('last_name', placeholder=_("Last Name")),
            Field('language', css_class="chosen"),
            Field('timezone', css_class="chosen"),
        ) 
```

**帐户/urls.py**

```
urlpatterns = patterns(
    '',
    url(r'^signup/$', 'userena.views.signup', {'signup_form': SignupFormExtra}, name='signup'),
    url(r'^signin/$', 'userena.views.signin', {'auth_form': SigninFormExtra}, name='signin'),
    url(r'^(?P<username>[\.\w-]+)/edit/$', 'userena.views.profile_edit', {'edit_profile_form': EditProfileFormExtra}, name='edit-profile'),
    url(r'^', include('userena.urls')),
) 
```

正如您在上面的网址中看到的那样，您几乎可以使用任何形式来执行此操作。基本上它在这个 url 上说，使用原始模块视图，但用我自己的表单替换表单参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T11:41:53.643

最好的办法是通过编辑表单本身来删除这两个字段。在 userena 包的 view.py 中，只需通过将“mugshot”和“privacy”添加到排除列表来更改 EditProfileForm：

```
class EditProfileForm(forms.ModelForm):
...
    class Meta:
        model = get_profile_model()
        exclude = ['user', 'mugshot', 'privacy'] 
```

如果您真的只想更改模板，则可以遍历表单而不是使用 form.as_p。在这种情况下，您必须为其他字段参数（如标签、错误、非字段错误等）添加标记 - 请参阅[此处](https://github.com/samluescher/django-user-profiles/blob/master/user_profiles/templates/includes/field_as_p.html)的示例。

```
{% for field in form %}
    {% if field.name != 'mugshot' %}
        {{ field }}
    {% endif %}
{% endfor %} 
```

# python - Django 获取显示名称选项

> ID：15984130
> 
> 赞同：9
> 
> 时间：2013-04-13T04:10:45.850
> 
> 标签：python, django, templates

我正在尝试找到解决我的问题的方法。

模型.py

```
class Article(models.Model):
    title = models.CharField(max_length=100)
    slug = models.SlugField()
    description = models.TextField()

def archive_quality(self):
    return self.archive_set.order_by('-quality').distinct().values_list('quality', flat=True)

class Archive(models.Model):
    CHOICES_QUALITY = (
        ('1', 'HD YB'),
        ('2', 'HD BJ'),
        ('3', 'HD POQD'),
        ('4', 'HD ANBC'),
    )
    article = models.ForeignKey(Article)
    quality = models.CharField(max_length=100, choices=CHOICES_QUALITY) 
```

档案.html

```
{% for article in articles %}
    {{ article }}
    {% for quality in article.archive_quality %}
        {{ quality.get_quality_display }}#This is not working
    {% endfor %}
{% endfor %} 
```

**更新** 功能 archive_quality 很重要，因为它可以防止模板对象中的重复出现。

```
Example:
article:
   My article one
Archive:
       quality: 1111222333 >> without the function
       quality: 123 >> with function 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-13T05:06:58.917

**选项1：**

模型.py

```
CHOICES_QUALITY = (
    ('1', 'HD YB'),
    ('2', 'HD BJ'),
    ('3', 'HD POQD'),
    ('4', 'HD ANBC'),
)

class Article(models.Model):
    title = models.CharField(max_length=100)
    slug = models.SlugField()
    description = models.TextField()

    def archive_quality(self):
        quality = self.archive_set.order_by('-quality').distinct().values_list(
            'quality', flat=True)
        lists = []
        for q in quality:
            for choice in CHOICES_QUALITY:
                if choice[0] == q:
                    lists.append({'quality': choice[1]})
        return lists

class Archive(models.Model):
    article = models.ForeignKey(Article)
    quality = models.CharField(max_length=100, choices=CHOICES_QUALITY) 
```

模板

```
{% for article in articles %}
    {% for item in article.archive_quality %}
        {{ item.quality }},
    {% endfor %}
{% endfor %} 
```

**选项#2：**

归档标签.py

```
from django import template
from app_name.models import CHOICES_QUALITY

register = template.Library()

@register.filter
def quality(q):
    for choice in CHOICES_QUALITY:
        if choice[0] == q:
            return choice[1]
    return '' 
```

模板

```
{% load archive_tag %}

{% for article in articles %}
    {% for item in article.archive_quality %}
        {{ item|quality }},
    {% endfor %}
{% endfor %} 
```

# java - 在 Tomcat 中找不到模块“null”

> ID：15984133
> 
> 赞同：0
> 
> 时间：2013-04-13T04:10:54.117
> 
> 标签：java, tomcat, struts-1

我使用 Struts 1.3 创建了一个 Web 应用程序。我正在使用 Apache Tomcat 来运行应用程序。它在本地运行良好。我已经在服务器机器的 Tomcat6 中部署了 WAR 文件。当我尝试运行时，出现以下异常。

```
org.apache.jasper.JasperException: java.lang.NullPointerException: Module 'null' not found.
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:541)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:435)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803) 
```

我检查了 load-on-startup、struts-config.xml 和 web.xml。一切都很好，但我不知道为什么我会得到这个例外。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:53:29.873

您正在直接访问一个 JSP 页面，并且该页面中包含 Struts 1 标记。

使用 Struts 1 的 JSP 页面必须运行一个动作。这没关系，因为在一个合理的 MVC 应用程序中，您基本上应该*始终*通过应用程序本身访问功能，而不是绕过它并直接访问页面。

# android - 如果我在 Qt 中为 Android 和 iOS 构建游戏，我可以像游戏中心一样在其中包含 Objective-C 工具包吗？

> ID：15984138
> 
> 赞同：0
> 
> 时间：2013-04-13T04:11:41.203
> 
> 标签：android, ios, qt

我想为 Android 和 iOS 构建一个游戏，但我担心我无法让它完全发挥作用，就好像我只是在 Objective-C 中构建一个一样。那么我可以在 Qt 中使用来自 Android 或 iOS 的工具包吗？或者我可以在 Qt 中制作它，然后用不同的软件添加它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T08:45:26.240

你可以看看[V-Play](http://v-play.net/)，一个基于 Qt 的跨平台 2D 游戏引擎。它为 Game Center、Facebook、广告等提供[插件组件。](http://v-play.net/doc/vplay-group.html#plugin-components)

根据开发人员的要求不断添加更多插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T08:01:18.617

据我了解，QT 是一个跨平台。这意味着他们拥有自己的适用于 Android 和 IOS 的 API。在 android 中他们使用 android-ndk 所以这意味着你不能使用 android 工具包。

看看[这里](http://qt-project.org/wiki/native-Android-discussion)他们在页面末尾谈论它。

我知道可以做到这一点的唯一跨平台是[Adob​​e Air](http://www.adobe.com/il_en/products/air.html)。我试一次。这是一场噩梦，但它为您提供了使用 android 和 ios 本机的选项。

# php - 动态 css 类 jQuery

> ID：15984143
> 
> 赞同：0
> 
> 时间：2013-04-13T04:12:09.387
> 
> 标签：php, jquery, html, css

我希望链接在页面加载时具有不同的样式。例如，如果我单击`About Us`菜单项并转到我希望它显示为突出显示的页面，以让用户知道他们在该页面上使用 jQuery。

我尝试了以下代码：

```
$("#navigation").click(function()
{
    $('li').addClass('current-menu-item');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:17:19.143

触发“关于我们”后，您的链接将更改类，但是当页面加载时，所有 js 更改都会消失。您需要根据您的位置更改类，而不是点击，而是 onload 页面

```
$(function() {
    if (window.location == '/about') // change about to what you page on
        $('#navigation li a[href=/about]').parent().addClass('current-menu-item'); // change here link too
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:43:30.543

如果你有清单

在服务器端，您需要跟踪您所在的页面。有很多方法可以做到这一点，但一种方法是

```
<ul>
    <li data-link="home">Home</li>
    <li data-link="about">About Us</li>
    <li data-link="contact>Contact</li>
</ul> 
```

如果使用 php 例如

```
$(document).ready(function() {
    var currentPage = "<?= $page ?>";
    $('li[data-link='+currentPage+']').addClass('current-menu-item');
}); 
```

在服务器端处理哪个链接获取类'current-menu-item'要好得多，但作为一个简单的例子，我使用jquery做到了。

任何时候你想在页面加载时完成一些事情，你可以把它放在 $(document).ready [http://api.jquery.com/ready/](http://api.jquery.com/ready/)

**编辑**

设置 $page 的一种快速简便的方法是在请求自身的页面中，因此...

**关于.php**

```
<?php
    $page = "about"
?>
<html>
    ....
</html> 
```

有很多方法可以做到这一点，所以你只需要发挥创造力。这就是编程的美妙之处：）

# php - PHP 行返回使用。需要使用/r结合文本框在同一个地方显示文本

> ID：15984148
> 
> 赞同：1
> 
> 时间：2013-04-13T04:12:55.730
> 
> 标签：php, textbox, return, sleep

我正在尝试从文本框中接收输入。然后在同一页上，使用 \r 在同一行上写入单词并复制它们。

我可以自己成功地复制同一行上的文本，但是当与文本框结合使用时，它不起作用。

第一部分代码有效，但与文本框结合使用时无效。

这有效：

```
echo "Validating\r";
sleep(1);
echo "Validated\r";
sleep(1);
echo 'Sending 7 BTC to dfsadfdsafasdfsda'; 
```

但是，当与表单结合使用时，它不能正确使用 \r 并且最后一行文本都一个接一个地放在一行上。

```
<form action="" method="post">
    <strong>Address: *</strong> <input type="text"  name="code">
    <input type="submit" name="submit" value="Submit">
</form>
<?php
    if (isset($_POST['code'])) {
        $code = htmlentities($_POST['code']);
        echo "Validating\r";
        sleep(1);
        echo "Validated\r";
        sleep(1);
        echo 'Sending 7 BTC to ' .$code. '<br>';
    }    
?> 
```

这导致以下行：Validating Validated Sending 7 BTC to sdafsdfasfsdafa

相反，它应该显示 Validating - 暂停一秒 - 擦除该行 - 显示 Validated - 暂停一秒 - 擦除该行 - 显示 Sending 7 BTC to sdafsdfasfsdafa

我怎样才能成功地使用 /r 来获得想要的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T07:06:52.700

尝试使用 PHP_EOL 常量。喜欢：有关更多信息，`echo "Validating".PHP_EOL` 请参阅[http://php.net/manual/en/reserved.constants.php](http://php.net/manual/en/reserved.constants.php)。

您可以尝试的另一件事是使用 nl2br()。请参阅[http://php.net/manual/en/function.nl2br.php](http://php.net/manual/en/function.nl2br.php)。

# php - 主页导航不会显示

> ID：15984149
> 
> 赞同：0
> 
> 时间：2013-04-13T04:13:03.110
> 
> 标签：php, wordpress

我使用 PHP Code for post 将 PHP 放入模板中。一切正常，但页面导航不会显示。

这是我网站上的一个简单循环。它是在 中设计的`local host`，所以我不能给你地址。

这是我的代码：

```
<?php $lastest= new WP_Query ( array
    (
        'post_type' => post,
        'posts_per_page' => 10,
        'ignore_sticky_posts' => 1
    )
    );
?>
<div id="content-wrap">
    <?php while($lastest->have_posts()) : $lastest->the_post(); ?>
    <div id="lastest-new-wrap">
        <div id="thumbnail-wrap">
            <div id="thumbnail-size"><?php the_post_thumbnail(); ?></div>
        </div>
        <h1 id="title"><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h1>
        <div id="post-desc"><?php the_excerpt(); ?></div>
    </div>
    <?php endwhile; ?>
    <?php next_posts_link(); ?>
    <?php previous_posts_link(); ?>
</div>
<?php wp_reset_postdata(); ?> 
```

* * *

谢谢你的回复！但文本链接不显示。我的意思是旧帖子和新帖子我使用这个 php 代码来调用它：

```
<?php next_posts_link(); ?>
<?php previous_posts_link(); ?> 
```

注意：第一次，我在主页使用“您的最新帖子”。它显示不错，但分页不正确！

第二次，我使用静态页面作为主页。然后文本链接不显示！使用知道为什么吗？我使用 PHP Code for Post 在 Page 中插入 PHP 代码。然后我设计了一个名为“HomePage”的独特页面。
使用“WPBakery Visual Composer”设计此页面

如果你知道如何解决它请帮助我！非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T07:33:14.750

您正在使用自定义查询，因此您需要像这样添加 $paged 参数：

```
<?php $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
<?php $lastest= new WP_Query ( array
    (
        'post_type' => post,
        'posts_per_page' => 10,
        'ignore_sticky_posts' => 1,
        'paged' => $paged
    )
    );
?> 
```

# javascript - 在页面加载时将数据从服务器发送到客户端

> ID：15984150
> 
> 赞同：0
> 
> 时间：2013-04-13T04:13:07.177
> 
> 标签：javascript

如果客户端向服务器请求某些内容，我想将一些额外信息与请求的页面一起发送给客户端。该网页正在加载时由 JavaScript 处理。有时我需要使用从服务器收到的数据更新 DOM。我可以获得一些关于如何实施解决方案的指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T04:23:48.143

根据我对你的问题的理解。要将 javascript 与服务器和服务器与 javascript 通信，您可以使用 signalR。如需更多信息，请参阅。

[http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr](http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr)

通常这种方法用于聊天应用程序。我认为对于您的问题，这是解决方案之一。

如果我错了，请纠正我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:33:59.603

我认为 websocket 是你最好的解决方案，当然这只适用于现代浏览器（不是 IE，只是 IE 10），但如果你在服务器端使用 nodejs，你可以使用 socket.io，[http://socket。 io/](http://socket.io/)他们说即使在 IE 5.5+ 中也可以使用

# javascript - jQuery图像翻转 - 幻灯片过渡

> ID：15984153
> 
> 赞同：2
> 
> 时间：2013-04-13T04:13:41.320
> 
> 标签：javascript, jquery, html, image, transition

如何使用 Jquery 通过向上滑动转换更改悬停图像？我在互联网上搜索过，但找不到有效的代码。我发现的所有代码都使用淡入或淡出。非常感谢！

这是我找到的代码，但它使用淡入淡出：

```
<script>
$(function() {
$('.change').mouseenter(function(){
  $(this).slideUp('fast', function(){
    $(this).attr('src', $(this).data('on'));
    $(this).fadeIn();
  });
});

$('.change').mouseleave(function(){
  $(this).slideUp('fast', function(){
    $(this).attr('src', $(this).data('off'));
    $(this).fadeIn();
  });
});
});</script> 
```

和 html：

```
<img class="change" src="images/portofoliu/next.gif" data-on="images/portofoliu/prev.gif" data-off="images/portofoliu/next.gif"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:26:03.500

```
<div id="clickme">
  Click here
</div>
<img id="book" src="book.png" alt="" width="100" height="123" />

$('#clickme').hover(function() {
  $('#book').slideUp('slow', function() {
    // Animation complete.
  });
}); 
```

[http://jsfiddle.net/GFdW5/3/](http://jsfiddle.net/GFdW5/3/)

[http://api.jquery.com/slideUp/](http://api.jquery.com/slideUp/)

**编辑：**最终解决方案：http: [//jsfiddle.net/hellomynameisluc/frTFw](http://jsfiddle.net/hellomynameisluc/frTFw)

# c# - 单击按钮打开 PDF 文件

> ID：15984154
> 
> 赞同：4
> 
> 时间：2013-04-13T04:13:42.190
> 
> 标签：c#, file, pdf, windows-runtime

我想通过单击文件应在 windows8 默认阅读器中打开的按钮在 winRT 应用程序（metro 风格应用程序）中打开一个 pdf 文件。我试过这段代码，其中按钮单击方法名称是`DefaultLaunch_click()`：

```
async void DefaultLaunch_click()
{
   // Path to the file in the app package to launch
  string imageFile = @"images\ret.png";

 // Get the image file from the package's image directory
var file = await Windows.ApplicationModel.Package.Current.InstalledLocation.GetFileAsync(imageFile);

if (file != null)
{
// Set the recommended app
  var options = new Windows.System.LauncherOptions();
  options.PreferredApplicationPackageFamilyName = “Contoso.FileApp_8wknc82po1e”;
  options.PreferredApplicationDisplayName = “Contoso File App”;

  // Launch the retrieved file pass in the recommended app 
  // in case the user has no apps installed to handle the file
  bool success = await Windows.System.Launcher.LaunchFileAsync(file, options);
  if (success)
  {
     // File launched
  }
  else
  {
     // File launch failed
  }
  }
    else
    {
      // Could not find file
    }
    } 
```

它适用于 .png 文件，但我想要 .pdf 文件，我将 1.png 替换为 M.pdf（在将其包含在图像文件夹中之后）并将 M.pdf 的构建内容设置为 Embedded Resource ，运行程序但它显示错误那

```
**The system cannot find the file specified. (Exception from HRESULT: 0x80070002)** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T11:54:47.837

在我将 PDF 文件构建操作设置为内容并始终复制到输出目录后，此代码对我有用。

```
private async void Button_Click(object sender, RoutedEventArgs e)
    {
        string imageFile = @"images\somepdffile.pdf";

        // Get the image file from the package's image directory
        var file = await Windows.ApplicationModel.Package.Current.InstalledLocation.GetFileAsync(imageFile);
        if (file != null)
        {
            bool success = await Windows.System.Launcher.LaunchFileAsync(file, options);
            if (success)
            {
                // File launched
            }
            else
            {
                // File launch failed
            }
        }
        else
        {
            // Could not find file
        }
    } 
```

# vb.net - 如何将新表单作为已显示表单的副本（在运行时）？

> ID：15984155
> 
> 赞同：0
> 
> 时间：2013-04-13T04:13:49.657
> 
> 标签：vb.net, visual-studio-2010, visual-studio, visual-studio-2008, vb.net-2010

我正在尝试制作一个充当“阅读/打开邮件”的表单。所以当我打开多个邮件时，我想要的是拥有多个表单（这是一个副本，具有设计器和表单功能，例如按钮和代码） .

我知道如何创建一个新窗口，但我不知道如何从另一个表单复制设计器代码和功能并将其应用于新创建的表单。我搜索了谷歌，但它只引导我解决不同的问题。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:26:25.777

您所要做的就是创建一个类类型的变量，然后使用 Show 方法显示它。

IE

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim myform As Form1 = New Form1
    myform.Show()
End Sub 
```

# php - php+nginx+vagrant - php写入失败

> ID：15984156
> 
> 赞同：1
> 
> 时间：2013-04-13T04:13:58.017
> 
> 标签：php, linux, nginx, virtualbox, vagrant

我有一个运行我的开发代码的 vagrant box 设置，它是一个 nginx/php 设置。（关于 vagrant 的快速信息 - 它是一个 virtualbox 包装器：[http](http://www.vagrantup.com/) ://www.vagrantup.com/ ）。

在 vagrant/virtualbox 设置中，它使用 linux 来宾添加在我的主机（MAC OSX）上挂载一个共享文件夹。

```
linux guest path: /var/www/local 
OSX host path: ~/src/ 
```

在多种情况下，我发现 php 似乎无法通过任何命令（`file_put_contents`、`fwrite`.. 等）向已安装共享文件夹上的任何路径位置写入任何内容，但是它能够在外部写入`/var/www/local`（例如`/var/www/not-mounted/..`）。

我发现这很难使用，因为我使用的是缓存系统，并且它一直无法写入`(/var/www/local/public/root/cache/)`我需要位于我网站根文件夹（`/var/www/local/public/root/index.php`）中的任何缓存 javascript/css 文件。

我对这个主题做了很多研究：看来，文件夹挂载具有正确的权限：当我`mount`在 linux guest 中键入命令时，我得到这个：

```
/var/www/local on /var/www/local/ type vboxsf (uid=1000,gid=1000,rw) 
```

阐明：

这种情况一直在发生，这是我遇到的一个已知问题，我尝试解决。

来自`cat /etc/passwd`：

```
vagrant:x:1000:1000:vagrant,,,:/home/vagrant:/bin/bash 
```

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-20T14:20:17.250

我已经弄清楚了问题所在。

我忘了给 PHP 正确的用户权限和写入文件夹的权限。基本上，我的 PHP 用户/用户组是 www-data/www-data 但是，vagrant 有自己的用户/组（vagrant/vagrant），它安装文件夹 /local/。

由于我不想弄乱我的 vagrant 安装行为，我只是简单地更改了我的 php 配置以使用用户/组启动 PHP - vagrant/vagrant。

这为我解决了这个问题。

谢谢您的帮助！

# android - 将光标值传递给 ArrayList

> ID：15984157
> 
> 赞同：1
> 
> 时间：2013-04-13T04:14:13.380
> 
> 标签：android, sqlite

这是我的问题：我设置了一个 SQLite DB 来存储一些值。在这种情况下，它非常简单。两列（_id，名称）。我知道数据正在存储在数据库中，并且我知道用于传递该信息的游标也在填充。但是，当我尝试将光标值添加到 ArrayList 时，出现错误。这是我的问题方法的代码：

```
public void sqltest(LDatabase LConnector){
     cursor = LConnector.getAllRecords(); //gets the cursor from my db 
     try{
     cursor.moveToFirst();}
     catch (Exception e){
          log.i("Failed", "Couldn't moveToFirst"); //I get a successful moveToFirst
     }
     while(cursor.moveToNext()){
         try{
         getWork.add(cursor.getString(cursor.getColumnIndex("name")));
        } catch (Exception h){
         Log.i("FAILED", cursor.getString(cursor.getColumnIndex("name")));
     }
  } 
```

我设置了最后一个日志来告诉我光标在那个位置的值。为数据库输入的值总是打印出来，所以我知道光标正在被填充。有人知道我在这里做错了什么吗？

**编辑：**当活动开始时，LogCat 显示这两行：

```
04-12 23:26:26.606: I/MOVED(9478): MOVED TO FIRST
04-12 23:26:26.606: I/FAILED(9478): test1 
```

没有更详细的错误可以更好地描述它，这就是我如此困惑的原因。它根本没有存储到 AssetList 中。

这是 getAllRecords() 方法的代码：

```
public Cursor getAllLifts() throws SQLiteException
{
    open();
    return database.rawQuery("SELECT * FROM  contacts"+";", null);  
} 
```

此外，这里是创建代码 + 用于插入的代码：

创造：

```
 String createQuery = "CREATE TABLE contacts" +
     "(_id auto_increment integer primary key," +
     "name text);";

  db.execSQL(createQuery); // execute the query 
```

插入：打开（）；// 打开数据库 try{ // 稍后添加更多以从 usr 获取要插入的数据，只是为了测试 database.execSQL("INSERT INTO contacts(name) VALUES('test1')"); database.execSQL("插入联系人(姓名) VALUES('test2')");}

```
catch (Exception insert){
   Log.i("INSERT", "INSERT FAILED");
}
close(); // close the database 
```

编辑：带进口的其余活动

```
package com.jydev.llogger2;

import java.util.ArrayList;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.content.Context;
import android.database.Cursor;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class Create extends Activity implements OnClickListener {

Button buttonNext; //continue button
Button buttonBack; //back button
EditText nameEditText; //editText w/ workout name
EditText commentEditText; //editText w/ comments
Intent info; //intent used to pass extras
String wName = null; 
String wComments = null; 
ArrayList<String> getWork;
Cursor cursor;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.create);

    commentEditText = (EditText)findViewById(R.id.commentEditText);
    buttonBack = (Button)findViewById(R.id.create_back);
    buttonNext = (Button)findViewById(R.id.create_continue);
    nameEditText = (EditText)findViewById(R.id.nameEditText);

    LtDatabase LConnector = new LDatabase(this);
    LConnector.insert();
    sqltest(LConnector);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T05:05:38.023

有几个错误的事情。First moveToFirst() 返回一个布尔值，因此您永远不会抛出异常。其次，由于您调用 moveToNext()，while 语句将跳过一行，因此跳过了第一行。最后，你得到一个异常，因为你没有初始化 getwork。

```
public void sqltest(LDatabase LConnector)
{
     cursor = LConnector.getAllRecords(); //gets the cursor from my db 

     if (cursor.moveToFirst())
     { 
        do 
        {
            try{
            getWork.add(cursor.getString(cursor.getColumnIndex("name")));
            } catch (Exception h){
            Log.i("FAILED", cursor.getString(cursor.getColumnIndex("name")));  
            }
          while (cursor.moveToNext()); 
          }
     }
 } 
```

在您的 getWork 声明中

```
ArrayList<String> getWork = new ArrayList<String>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T05:20:47.047

对于我的查询，我使用以下

```
public ArrayList<T> findAllBy(String selection) {
    final SQLiteDatabase db = HELPER.getReadableDatabase();     
    final ArrayList<T> result = new ArrayList<T>();
    final Cursor cursor = db.query(TABLE_NAME, SELECTED_COLS, WHERE, null, null, null, null);

    try {
        cursor.moveToFirst();
        while (!cursor.isAfterLast()) {
            T model = CREATEOBJECT(cursor);
            result.add(model);
            cursor.moveToNext();
        }

        return result;
    } finally {
        cursor.close();
        db.close();
    }
} 
```

在哪里：

*   `HELPER`是一个实例扩展自`SQLiteOpenHelper`
*   `TABLE_NAME`是一个带有表名的字符串
*   `SELECTED_COLS`是一个 String[] 数组，其中包含我想要获取的列名
*   `WHERE`是一个类似`"COL_NAME = 'value'"`或的字符串`null`
*   `CREATEOBJECT`是在我的中创建`T`想要类型的对象的方法`ArrayList<T>`

例子`CREATEOBJECT`

```
public T CREATEOBJECT(Cursor cursor) {
    new T(
        cursor.getInt(0), cursor.getString(1)
    );
}

public class T {
    private long   id; 
    private String name;    

    T(int id, String name) {
        this.id = id;
        this.name = name;
    }
    //...
} 
```

# html - 使用 IE 无法正确放置实际文本区域 - 我该如何解决？

> ID：15984158
> 
> 赞同：1
> 
> 时间：2013-04-13T04:14:24.537
> 
> 标签：html, internet-explorer

无论我是否使用兼容性视图，我的网站都无法在 IE 中正确显示。我网站的文本区域要么太右，要么太低（由于某种原因，从标题图像的最后一部分开始，我不能强制文本越过图片？）。

如果我真的知道我在哪里做错了，我会复制粘贴我需要帮助的代码部分，但既然我不知道，我希望检查整个网站及其代码的要求不会太多。

[http://viuhku.net/shaghas/skpr/skpr/](http://viuhku.net/shaghas/skpr/skpr/)

和 CSS：http: [//viuhku.net/shaghas/skpr/skpr/style.css](http://viuhku.net/shaghas/skpr/skpr/style.css)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T04:31:14.673

`float: left;`在您的 CSS 文件中添加`#txt`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:45:25.583

在您的`#txt`班级中，您有一个`padding-right: 200px`属性；删除它，你应该没事。

# javascript - jQuery 后代选择器性能

> ID：15984160
> 
> 赞同：2
> 
> 时间：2013-04-13T04:14:55.350
> 
> 标签：javascript, jquery, performance

我有一个 jQuery 选择器：

```
$('#myId span') 
```

那真的是一只表演犬吗？

```
$('#myId').find('span') 
```

第一个显然写起来更干净一些，如果可能的话，我想坚持下去。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T04:49:18.983

测试：http: [//jsperf.com/descend-from-id-vs-select-and-find/3](http://jsperf.com/descend-from-id-vs-select-and-find/3)

`$('#myId span')`将导致 jQuery 使用其[Sizzle](https://github.com/jquery/sizzle)选择器引擎解析字符串，从右到左读取它，并以`span`.

`$('#myId').find('span')`将导致 jQuery 立即选择#myId（绕过使用 Sizzle 解析的步骤），然后向下遍历 DOM，多个级别，以查找所有后代。

所以后者更快。

您也可以尝试`$('#myId').children('span')`，在某些情况下可能会更快，因为它只会下降一个级别以仅查找子级（而不是 find ，它会继续运行）。

# git - 推送提交到 github

> ID：15984161
> 
> 赞同：0
> 
> 时间：2013-04-13T04:14:56.803
> 
> 标签：git, github, github-for-windows

我已经提交，但没有与远程仓库同步。但是当我尝试同步它失败时，`Failed to sync this branch - You might need to open a shell and debug the state of this repo` 我正在使用 Windows Git。请，如果您有任何想法为什么会在此处发布。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:54:19.263

打开一个 cmd 终端，转到 repo 目录。然后尝试“git push origin <yourbranch>”。查看您收到的错误消息。如果没有有关您的设置的更多信息，很难告诉您任何更具体的信息。

# php - json_encode() 对带有重音符号（特殊字符）的条目返回“null”，但仅当它们是在 phpmyadmin 中手动添加时

> ID：15984163
> 
> 赞同：0
> 
> 时间：2013-04-13T04:15:10.613
> 
> 标签：php, mysql

如果我使用 phpmyadmin 页面插入包含特殊字符的字段的条目，下面的函数将向具有特殊字符的字段返回“null”，而没有特殊字符的字段将正确显示。

如果我使用我的网页（jQuery DataTables）插入一个具有相同特殊字符的字段的条目，它将正确显示它，没有问题。

为什么只有手动插入会干扰数据显示？
我的数据库整理是 UTF8，我已将 HTML 和 PHP 字符集设置为 utf-8，尝试使用 utf8_encode()，但这似乎都不起作用。

这是我的 PHP 代码和用法：

```
 $connection = ($GLOBALS["___mysqli_ston"] = mysqli_connect('localhost',  '',  '')) or die(((is_object($GLOBALS["___mysqli_ston"])) ? mysqli_error($GLOBALS["___mysqli_ston"]) : (($___mysqli_res = mysqli_connect_error()) ? $___mysqli_res : false)));
    ((bool)mysqli_query( $connection, "USE ")) or die(((is_object($GLOBALS["___mysqli_ston"])) ? mysqli_error($GLOBALS["___mysqli_ston"]) : (($___mysqli_res = mysqli_connect_error()) ? $___mysqli_res : false)));

    $aFieldType = array('tema', 'vinculo', 'empresa', 'subcontratada', 'gerencia', 'areasolicitante', 'cc');
    $stack=array();
    foreach ($aFieldType as $type)
    {
        $sql="SELECT {$type} FROM treinamentos ORDER BY {$type} ASC";
        $result = mysqli_query($GLOBALS["___mysqli_ston"], $sql);

        while($row = mysqli_fetch_array($result))
        {
            $stack[$type][] = array($row[$type],$row[$type]);
        }
    }
?> 
```

* * *

```
<script type="text/javascript">
            aDataInitial = '<?php  echo json_encode($stack);?>';
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:37:45.853

通过 phpMyAdmin 向表中插入数据，然后使用控制台客户端查看真正插入数据库的内容。可能您在 phpMyAdmin UI 中配置错误的字符集。

毕竟，您明确表示您确实在您的数据库、网站中设置了 UTF-8，并且您自己的 web 应用程序中的 UI 可以正确插入数据。因此，您唯一没有检查的是 phpMyAdmin。我也会尝试使用 mysql 控制台客户端插入您的特殊字符串。当然，还要检查插入到设置为 UTF-8 输出的客户端中的数据。

# php - Mysql排序结果由一些相似列值的总和

> ID：15984171
> 
> 赞同：0
> 
> 时间：2013-04-13T04:16:04.897
> 
> 标签：php, mysql, sql, wordpress

有两个表，我试图从一个表中获取值并按另一个表中的值的总和排序。

因此，为了清楚起见，我试图通过 meta_key 的总和来获取所有帖子的列表，其中 meta_key 就像*反应*%

这是我尝试过的

```
ORDER BY ( SELECT SUM(CAST(meta_value AS UNSIGNED)) as count FROM `wp_postmeta` WHERE `meta_key` LIKE '_reaction_button%' GROUP BY post_id ) 
```

但不幸的是，这不起作用。那么有没有办法解决这个问题。我认为这可以使用视图或存储过程来完成，但要弄清楚如何。

实际上，我正在使用 wordpress 并使用 query_posts 来获取帖子，但似乎我无法使用 query_posts 或 WP_Query 执行此操作，这就是我编写自定义查询的原因。如果这可以通过 query_posts 或 WP_Query 来完成，那就太好了。

![这是我的主表](https://i.stack.imgur.com/2870L.png)

![另一个表，其中 post_id 是第一个表的外键](https://i.stack.imgur.com/rhByN.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T09:21:35.027

你真的不需要直接的 mysql ，你可以[WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)

```
$query = new WP_Query( array ( 
                             'post_type' => 'post', 
                             'meta_key' => 'vote_field', 
                             'orderby' => 'meta_value', 
                             'order' => 'ASC' ) ); 
```

你也可以使用`meta_compare`或

```
'meta_key' => 'metadata1',
'orderby' => 'meta_value_num' 
```

然后你也可以使用`'compare' => 'LIKE'`或`'compare' => 'NOT LIKE'`

或者您可以在此处查看此示例：[Wordpress Sum meta_values from posts and order them per category](https://stackoverflow.com/questions/11407359/wordpress-sum-meta-values-from-posts-and-order-them-per-category) and change category to what you need ..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T07:03:14.417

```
select p.*
from 'wp_post' p
join (
    select post_id, sum(cast(meta_value as unsigned)) as sum_val
    from 'wp_postmeta'
    where 'meta_key' like '_reaction_button%'
    group by post_id
) pm on p.post_id = pm.post_id
order by pm.sum_val 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T04:20:40.540

尝试这个。

首先创建一个临时表来保存总和值。然后与 wp_post 表进行连接，并在临时表的 sum 列上使用 order by

```
CREATE TEMPORARY TABLE tempTable (postID int,countSum int)

INSERT INTO tempTable
SELECT post_id,SUM(CAST(meta_value AS UNSIGNED))
FROM `wp_postmeta` 
GROUP BY post_id

SELECT wp_post.* FROM `wp_post`
INNER JOIN tempTable
  ON wp_post.ID=tempTable.postID 
ORDER BY countSUM

DROP TABLE tempTable 
```

# ruby-on-rails - Sprockets - 将 Id 属性添加到 Javascript 文件

> ID：15984182
> 
> 赞同：0
> 
> 时间：2013-04-13T04:18:30.827
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline, sprockets

我正在使用带有资产管道的 Rails 3.2.13。在开发模式下，使用清单文件时，我的 JavaScript 文件输出如下所示：

```
<script type="text/javascript" src="/assets/guitars.js?body=1">
<script type="text/javascript" src="/assets/someTemplate.js?body=1">
<script type="text/javascript" src="/assets/application.js?body=1"> 
```

但是，我希望将文件名的名称包含到每个 JavaScript 文件的 id 属性中，如下所示：

```
<script id="guitars" type="text/javascript" src="/assets/guitars.js?body=1">
<script id="someTemplate" type="text/javascript" src="/assets/someTemplate.js?body=1">
<script id="application" type="text/javascript" src="/assets/application.js?body=1"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T06:56:44.953

我在 Haml 中使用 Ember js。Ember 需要脚本模板上的 id 以供参考。我在 Haml 中插入了一些脚本模板进行快速实验，但 Haml 抱怨非法嵌套。我认为做类似上面的事情会给我一个快速的方法来将 javascript 从haml中分离出来。我主要是为了避免使用 ember-rails gem 进行开发，但似乎没有一个好的选择。我想我可以结束这个问题。

感谢house9 指出这一点。

# javascript - 附加 Div 在创建时未形成类名？

> ID：15984184
> 
> 赞同：0
> 
> 时间：2013-04-13T04:18:48.080
> 
> 标签：javascript, node.js

我正在为网页首页上的新闻提要制作一个小 CMS，当管理员向新闻提要提交新闻时，我想在页面上显示新创建的新闻，我目前有

```
function showResponse(data) {
  console.log('Triggered');

    var rowDiv = document.createElement('div');
    rowDiv.id = 'rowDiv';

    var titleSpan = document.createElement('div');
    titleSpan.className = 'span9';
    titleSpan.innerHTML = data.success.title;
    console.log(titleSpan);

    var timeSpan = document.createElement('div');
    timeSpan.className = 'span9';
    timeSpan.innerHTML = data.success.createdAt;
    console.log(timeSpan);

    var bodySpan = document.createElement('div');
    bodySpan.className = 'span9';
    bodySpan.innerHTML = data.success.body;
    console.log(bodySpan);

    document.getElementById('newsfeed').appendChild(rowDiv);
    document.getElementById('rowDiv').appendChild(titleSpan);
    document.getElementById('rowDiv').appendChild(timeSpan);
    document.getElementById('rowDiv').appendChild(bodySpan);

}

// Jade template for node 
   div#newsfeed
     for info in newsFeed
      div(class='row', style='border-bottom: 1px solid lightgrey; margin-bottom: 1%; padding-top: 1%;')
       div.span9
        h2=info.title
       div.span9
        p.muted.credit=info.createdAt
       div.span9
        p= info.body 
```

底部的小玉部分只是我使用的 html 模板语言`Node.js`，所以效果很好，唯一的问题是，当它添加到页面时，它似乎根本没有任何 css 样式它的类名，有人知道为什么会这样吗？![在此处输入图像描述](https://i.stack.imgur.com/b9KRv.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T04:32:40.853

首先，您这样做是错误的，其次，您没有将类添加到 rowDiv

```
var rowDiv = document.createElement('div');
rowDiv.className = "row" // <- this is your problem
rowDiv.style = "border-bottom: 1px solid lightgrey; margin-bottom: 1%; padding-top: 1%;" // <- and this you should identify in css
var titleSpan = document.createElement('div');
titleSpan.className = 'span9';
titleSpan.innerHTML = data.success.title;
rowDiv.append(titleSpan);
var timeSpan = document.createElement('div');
timeSpan.className = 'span9';
timeSpan.innerHTML = data.success.createdAt;
rowDiv.append(timeSpan);
var bodySpan = document.createElement('div');
bodySpan.className = 'span9';
bodySpan.innerHTML = data.success.body;
rowDiv.append(bodySpan);
document.getElementById('newsfeed').appendChild(rowDiv); 
```

如果您已经在动态生成页面，请尝试检查 js 模板系统，例如[ejs](http://embeddedjs.com/)，以便您可以以更合适的方式存储模板

# python - Django/Python：如何按日期对查询集结果进行分组？

> ID：15984190
> 
> 赞同：1
> 
> 时间：2013-04-13T04:21:19.567
> 
> 标签：python, django, datetime, django-models

我有一个图像上传模型，看起来像这样：

```
from django.db import models
from django.contrib.auth.models import User
import datetime

class ImageItem(models.Model):
    user = models.ForeignKey(User)
    upload_date = models.DateTimeField(auto_now_add = True)
    last_modified = models.DateTimeField(auto_now = True)
    original_img = models.ImageField(upload_to = img_get_file_path) 
```

我想查询属于特定用户的所有 ImageItem 实例，并根据*上传日期*对它们进行分组。例如，对于某些用户，我想要一个 2013 年 4 月 9 日的组，另一个 2013 年 4 月 12 日的组，等等（假设他们在这些日期上传了一张或多张图片）。

我在想我运行一个简单的查询，比如，

```
joes_images = ImageItem.objects.filter(user__username='joe') 
```

**但是，我怎么能按发布的日期对它们进行分组呢？**（假设他不是每天都发布，只是在某些日子）

该函数必须返回所有图像组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T11:41:10.177

你为什么不做如下？

```
joes_images = ImageItem.objects.filter(user__username='joe')  # your code
upload_dates = set([(i.year, i.month, i.day) for i in joes_images])  # set of upload_date
joes_images_separated = dict([(d, []) for d in upload_dates])
for d in upload_dates:
    for i in joes_images:
        if (i.year, i.month, i.day) == d:
            joes_images_separated[d].append(i) 
```

在这里，`upload_dates`是一组日期`joes_images`，你得到`joes_images_separated`一个字典（键是日期，值是`joes_images`每个日期的列表）。

我很抱歉代码有点脏。我认为这行得通。供你参考。

# ruby-on-rails - 将点数据列纬度和经度合并为一个纬度

> ID：15984195
> 
> 赞同：0
> 
> 时间：2013-04-13T04:21:39.113
> 
> 标签：ruby-on-rails, ruby, postgresql, rake, task

这是我当前从 CSV 导入的 rake 任务，我可以重写它以导入和删除前两列/使用空格作为分隔符将数据连接到一个 latlon 列吗？

```
require 'csv'

desc "Import public library data from csv file"

task :import => [:environment] do
  namespace :import_incidents_csv do
    task :create_incidents => :environment do
      ActiveRecord::Base.connection.execute "COPY PublicLibraryBranchLocations          (DistrictNumber, DistrictName, LibrarySystem, Type, Branch, Phone, Email, Website, PhysicalAddress, City, Province, PostalCode, Latitude, Longitude) FROM '/home/mgmacri/data/PublicLibraryBranchLocations.csv' DELIMITER ',' CSV;"
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:25:04.040

COPY 本身无法做到这一点，但您可以在导入之前更改 CSV。

一种方法是复制到一个临时表，然后使用类似这样的东西来导入：

```
INSERT INTO PublicLibraryBranchLocations(DistrictNumber, DistrictName, LibrarySystem, Type, Branch, Phone, Email, Website, PhysicalAddress, City, Province, PostalCode, LatLon) 
SELECT DistrictNumber, DistrictName, LibrarySystem, Type, Branch, Phone, Email, Website, PhysicalAddress, City, Province, PostalCode, Latitude ||' '|| Longitude
FROM TEMP_PublicLibraryBranchLocations; 
```

如您所见， end 有一个串联`Latitude ||' '|| Longitude`。

另一种方法是使用[file_fdw](http://www.postgresql.org/docs/current/static/file-fdw.html)创建一个 FOREIGN TABLE ，因此您可以直接将 CSV 文件读取为一个表（可能称为`PublicLibraryBranchLocations_FDW_CSV`），而无需导入该表并将该表中的数据导入到`PublicLibraryBranchLocations`使用类似的东西：

```
INSERT INTO PublicLibraryBranchLocations(DistrictNumber, DistrictName, LibrarySystem, Type, Branch, Phone, Email, Website, PhysicalAddress, City, Province, PostalCode, LatLon) 
SELECT DistrictNumber, DistrictName, LibrarySystem, Type, Branch, Phone, Email, Website, PhysicalAddress, City, Province, PostalCode, Latitude ||' '|| Longitude
FROM PublicLibraryBranchLocations_FDW_CSV; 
```

# excel - Excel - 自动替换单词

> ID：15984200
> 
> 赞同：0
> 
> 时间：2013-04-13T04:22:18.597
> 
> 标签：excel

我不知道我要问的是否可以完成，但我希望如此。

我关注比赛，每个赛季结束后都会有一张表格显示车手和车队的排名。一个周末，有5张桌子。

对于每个会话，我都会复制表格，将其粘贴到 excel 中并将其导入我的网站以将其显示为表格。但在此之前，我必须将车手和车队名称（在所有表格中始终相同）重命名为另一种语言，然后导入文件。

这个过程需要几分钟，比如 5 分钟。5*5 桌：周末 25 分钟。所以我想知道软件或excel中是否有一个技巧可以自动将我想要的所有单词替换为其他单词？这可以节省我很多时间。

所以下次我将表格发布到 excel 中时，我会自动以我的语言看到司机的姓名，因此我可以在不编辑表格的情况下导入表格并浪费几分钟。

我非常感谢您的帮助，并希望我能从这个社区得到积极的回答。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T17:36:34.117

I fear there may be more required than relatively simple lookup formulae but for want of any other answer so far and focussing on your title, please try:

```
 =VLOOKUP(B2,drivers,2,0) 
```

in E2 for the example below, and copy down to suit. This assumes you have an array as in the box in the middle named `drivers` (need not be in same sheet) and that ColumnD is a copy of ColumnA.

Similarly in G2:

```
=VLOOKUP(C2,team,2,0) 
```

where the right-hand box is an array named `team`, and ColumnC is after relocation.

![enter image description here](https://i.stack.imgur.com/KYwD4.gif)

# php - cURL 安全插入数据库

> ID：15984213
> 
> 赞同：1
> 
> 时间：2013-04-13T04:24:35.080
> 
> 标签：php

我有一个注册表单

```
post--> to data_checking --post--> insert_db page 
```

在我的`data_checking`页面中，我将检查所有内容，长度，SQL 注入等。

但是，如果用户知道我的`$_POST['']`，他们可以跳过 data_checking 页面并将他们的数据插入到数据库中。例如，如果黑客知道我`$_POST['email']`，他们可以通过 cURL 发送这些数据。

任何建议如何做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:08:08.570

您总是可以将数据检查集成到数据库 insert php 中（我不明白为什么它们首先没有组合），或者如果您不能这样做，您可以将非常复杂的密钥作为一些帖子发送到确认脚本正在发送数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T05:10:42.433

要么删除数据检查和数据插入脚本之间的插页式 HTTP 请求，要么调用数据插入脚本中执行数据检查的函数。

# c++ - 这是什么意思：使用“-opengl 桌面”配置 Qt？

> ID：15984216
> 
> 赞同：3
> 
> 时间：2013-04-13T04:24:54.943
> 
> 标签：c++, qt

我正在读一篇[文章](http://blog.qt.digia.com/blog/2012/10/24/graphics-on-windows-from-a-different-angle/)。我不明白这是什么意思：使用“-opengl 桌面”配置 Qt？怎么做？我是否需要使用此选项重新安装 Qt？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T04:46:45.040

这仅适用于从源代码编译 Qt 库的情况。`configure`是您在开始自己编译 Qt 库之前运行以准备构建环境的命令。

例如：[这些](http://qt-project.org/doc/qt-4.8/configure-options.html)是 Qt 4.8 的配置选项。

# performance - 为什么我用 Spring 保存的 Mongdb 性能低？

> ID：15984219
> 
> 赞同：1
> 
> 时间：2013-04-13T04:25:17.713
> 
> 标签：performance, spring, mongodb, insert

我使用 Spring 框架在 jave 中配置 mongoDB。但是我发现保存对象时它的性能非常低。分别插入这样200条记录大约需要7000ms。

但是，当我使用 pymongo 做同样的插入操作时，速度非常快，大约 50 毫秒。

**仅插入 200 个单独的对象需要 7 秒钟有什么问题吗？**

mongodb的版本是2.4.1，这个性能测试是在fedora13，ubuntu 12.4和win8上进行的。

有人可以告诉我为什么并帮助我解决问题吗？

代码如下：

下面的代码需要超过 7000 毫秒：

```
MongoTemplate mongoTemplate = (MongoTemplate)SpringFactory.getFactory().getBean("mongoTemplate");
for (int i = 0; i <200; i++) {
   Person person = new Person;
   person.setName("test" + i);
   person.setAge(1234665 + i);
   mongoTemplate.insert(ncbiid);
} 
```

下面的 Python 代码只需要 50ms：

```
connection = Connection('127.0.0.1', 27017)
db = connection['test']
def insert(num):
    posts = db.person
    for x in range(200):
        post = {"_id" : str(x),
             "name": str(x)+"Mike",
             "age": x}
        posts.insert(post) 
```

这是人员类：

```
@Document(collection="person")
public class Person {
    @Indexed
    String name;
    int age;

    public void setName(String name) {
        this.name = name;
    }
    public void setAge(int age) {
        this.age = age;
    }
} 
```

这是 Spring xml 文件的 mongodb 部分：

```
<mongo:mongo id="mongo" replica-set="127.0.0.1:27017">
    <mongo:options
         connections-per-host="8"
         threads-allowed-to-block-for-connection-multiplier="4"
         connect-timeout="1000"
         max-wait-time="1500"
         auto-connect-retry="true"
         socket-keep-alive="true"
         socket-timeout="1500"
         slave-ok="true"
         write-number="1"
         write-timeout="0"
         write-fsync="true"/>       
</mongo:mongo>

<mongo:db-factory dbname="test" mongo-ref="mongo"/>

<bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">
    <constructor-arg name="mongoDbFactory" ref="mongoDbFactory"/>
</bean>

<mongo:mapping-converter base-package="com.database.model" />

<mongo:repositories base-package="com.database.mongorepo"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T04:29:25.917

```
mongoOps.insert(ncbiid); 
```

这样做 200 次是 200 个单独的插入。

```
mongoTemplate.insert(lsPersons, "person"); 
```

这一次是一批插入 200 条记录。

如果对它们进行批处理，则意味着更少的数据库往返次数和更好的性能。

[这是 MongoTemplate 的 java 文档](http://static.springsource.org/spring-data/mongodb/docs/1.2.x/api/org/springframework/data/mongodb/core/MongoTemplate.html)，它告诉您一个是批处理操作。

# android - 带有图像和文本的 Android ListView；无法显示列表视图

> ID：15984220
> 
> 赞同：1
> 
> 时间：2013-04-13T04:25:26.277
> 
> 标签：android, android-layout, android-intent, android-widget

我正在尝试显示带有图像和文本的 ListView，我使用了 Simpleadapter 类，但我无法显示 ListView 任何人都可以帮助我，我做错了什么？

这是我的代码：

```
public class HostsActivity extends ListActivity {
    public final static String ITEM_TITLE = "title";
    public final static String ITEM_IMAGE = "Image";
    private List<HostsProfile> hostsProfile1;
    List<Map<String, ?>> security = new LinkedList<Map<String, ?>>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.hostslist);

        Bundle recdData = getIntent().getExtras();

        hostsProfile1 = recdData.getParcelableArrayList("hostsProfile");

        List<Map<String, ?>> security1 = new LinkedList<Map<String, ?>>();
        for (HostsProfile msg1 : hostsProfile1) {
            // Log.v("image","Image path"+msg.getImage());
            try {
                URL url = new URL(msg1.getMediathumbnail());
                HttpURLConnection con = (HttpURLConnection) url.openConnection();
                InputStream is = con.getInputStream();
                Bitmap img = BitmapFactory.decodeStream(is);
                security.add(createItem(msg1.getTitle(), img));
            } catch (Throwable t) {
            }
        }
        /*for(int i=0; i<security.size(); i++){
            security.remove(0);
        }
        */
        SimpleAdapter adapter1 = new SimpleAdapter(this, security1,
                R.layout.image_text_layout1, new String[] { ITEM_IMAGE,
                        ITEM_TITLE }, new int[] { R.id.feed_image,
                        R.id.job_text });
        adapter1.setViewBinder(new MyViewBinder());
        this.setListAdapter(adapter1);
    }

    public Map<String, ?> createItem(String title, Bitmap Image) {
        Map<String, Object> item = new HashMap<String, Object>();
        item.put(ITEM_TITLE, title);
        item.put(ITEM_IMAGE, Image);
        return item;
    }
    //for ImageView
    class MyViewBinder implements ViewBinder {
        public boolean setViewValue(View view, Object data,
                String textRepresentation) {
            if ((view instanceof ImageView) & (data instanceof Bitmap)) {
                ImageView image1 = (ImageView) view;
                Bitmap bm = (Bitmap) data;
                image1.setImageBitmap(bm);
                return true;
            }
            return false;
        }
    }

} 
```

这是我的布局 xml 文件：

image_text_layout1：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <ImageView android:id="@+id/feed_image"
        android:layout_width="60dp" 
        android:layout_height="60dp"
        android:gravity="center_vertical"
        android:paddingRight="3dp"
        android:paddingLeft="2dp"/>

    <TextView android:id="@+id/job_text" 
        android:layout_width="wrap_content"
        android:layout_height="60dp" 
        android:textColor="#000000"
        android:textStyle="bold"
        android:gravity="center_vertical"/>
        <!--android:paddingTop="5dip"
        android:paddingBottom="28dip" 
        android:paddingLeft="8dip"
        android:paddingRight="8dip" />-->

</LinearLayout> 
```

主机列表.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"              
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background"
    >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <LinearLayout
            android:id="@+id/linearlayout01"
            android:layout_width="300dp"
            android:layout_height="45dp"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:layout_marginTop="52dp"
            android:orientation="vertical" >
        </LinearLayout>

        <ListView
            android:id="@android:id/list"
            android:layout_width="fill_parent"
            android:layout_height="230dp"
            android:layout_alignParentRight="true"
            android:layout_marginTop="107dp"
            android:cacheColorHint="#00000000">

        </ListView>  

    </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T06:06:54.750

做一个`CustomListview`项目：

自定义列表视图.java

```
package com.example.customlistview;

import java.util.ArrayList;

import android.os.Bundle;
import android.widget.ListView;
import android.app.Activity;

public class CustomListView extends Activity {
    ArrayList<Contact> imageArry = new ArrayList<Contact>();
    ContactImageAdapter adapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        // add image and text in arraylist
        imageArry.add(new Contact(R.drawable.facebook, "FaceBook"));
        imageArry.add(new Contact(R.drawable.google, "Google"));
        imageArry.add(new Contact(R.drawable.ical, "Ical"));
        imageArry.add(new Contact(R.drawable.outlook, "Outlook"));
        imageArry.add(new Contact(R.drawable.twitter, "Twitter"));
        // add data in contact image adapter
        adapter = new ContactImageAdapter(this, R.layout.list, imageArry);
        ListView dataList = (ListView) findViewById(R.id.list);
        dataList.setAdapter(adapter);
    }
} 
```

联系方式.java

```
package com.example.customlistview;
public class Contact
{
    int image;
    String name;

    public int getImage() {
        return image;
    }

    public void setImage(int image) {
        this.image = image;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Contact(int image, String name) {
        super();
        this.image = image;
        this.name = name;
    }
} 
```

ContactImageAdapter.java

```
package com.example.customlistview;

import java.util.ArrayList;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class ContactImageAdapter extends ArrayAdapter<Contact> {
    Context context;
   int layoutResourceId;
   ArrayList<Contact> data=new ArrayList<Contact>();
   public ContactImageAdapter(Context context, int layoutResourceId, ArrayList<Contact> data) {
       super(context, layoutResourceId, data);
       this.layoutResourceId = layoutResourceId;
       this.context = context;
       this.data = data;
   }

   @Override
   public View getView(int position, View convertView, ViewGroup parent) {
       View row = convertView;
       ImageHolder holder = null;

       if(row == null)
       {
           LayoutInflater inflater = ((Activity)context).getLayoutInflater();
           row = inflater.inflate(layoutResourceId, parent, false);

           holder = new ImageHolder();
           holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);
           holder.imgIcon = (ImageView)row.findViewById(R.id.imgIcon);
           row.setTag(holder);
       }
       else
       {
           holder = (ImageHolder)row.getTag();
       }

       Contact myImage = data.get(position);
       holder.txtTitle.setText(myImage.name);
       int outImage=myImage.image;
       holder.imgIcon.setImageResource(outImage);
      return row;

   }

   static class ImageHolder
   {
       ImageView imgIcon;
       TextView txtTitle;
   }
} 
```

主要的.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">

    <ListView
        android:id="@+id/list"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="0.55" >
    </ListView>
</LinearLayout> 
```

列表.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:padding="10dp" ><ImageView
        android:id="@+id/imgIcon"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="0.71"
        android:gravity="center_vertical"/>
     <TextView
        android:id="@+id/txtTitle"
        android:layout_width="80dp"
        android:layout_height="fill_parent"
        android:gravity="center_vertical"
        android:textSize="14dp"
        android:layout_marginLeft="7dp" />
      </LinearLayout> 
```

将图标放在drwable中，用于主活动图像数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T05:23:58.713

我建议您使用带有自定义适配器的自定义列表视图。

下面的链接中提供了一个示例。

[android-custom-listview-with-image-and-text](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

使用 viewholder 平滑滚动和性能。

您还可以使用惰性列表或通用图像加载器。

两者都使用缓存。

[惰性列表和通用图像加载器](https://stackoverflow.com/questions/15621936/whats-lazylist/15622374#15622374.)

检查以下链接以获取查看器并有效加载位图

[Listview 使用 ViewHolder 平滑滚动](http://developer.android.com/training/improving-layouts/smooth-scrolling.html.)

[google 的 android 开发人员的 Listview 世界演讲](http://www.youtube.com/watch?v=wDBM6wVEO70.)该演讲是关于 viewholder 和 list view 性能的。

[从开发人员站点有效地加载位图](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)。有效地加载位图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T12:32:33.570

添加用于延迟加载 FileCache.java 的类

========

```
public class FileCache {

    private File cacheDir;

    public FileCache(Context context){
        //Find the dir to save cached images
        if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
            cacheDir=new File(android.os.Environment.getExternalStorageDirectory(),"LazyList");
        else
            cacheDir=context.getCacheDir();
        if(!cacheDir.exists())
            cacheDir.mkdirs();
    }

    public File getFile(String url){
        //I identify images by hashcode. Not a perfect solution, good for the demo.
        String filename=String.valueOf(url.hashCode());
        //Another possible solution (thanks to grantland)
        //String filename = URLEncoder.encode(url);
        File f = new File(cacheDir, filename);
        return f;

    }

    public void clear(){
        File[] files=cacheDir.listFiles();
        if(files==null)
            return;
        for(File f:files)
            f.delete();
    }

} 
```

=========ImageLoader.java

```
public class ImageLoader {

    MemoryCache memoryCache=new MemoryCache();
    FileCache fileCache;
    private Map<ImageView, String> imageViews=Collections.synchronizedMap(new WeakHashMap<ImageView, String>());
    ExecutorService executorService;
    Handler handler=new Handler();//handler to display images in UI thread

    public ImageLoader(Context context){
        fileCache=new FileCache(context);
        executorService=Executors.newFixedThreadPool(5);
    }

    final int stub_id=R.drawable.stub;
    public void DisplayImage(String url, ImageView imageView)
    {
        imageViews.put(imageView, url);
        Bitmap bitmap=memoryCache.get(url);
        if(bitmap!=null)
            imageView.setImageBitmap(bitmap);
        else
        {
            queuePhoto(url, imageView);
            imageView.setImageResource(stub_id);
        }
    }

    private void queuePhoto(String url, ImageView imageView)
    {
        PhotoToLoad p=new PhotoToLoad(url, imageView);
        executorService.submit(new PhotosLoader(p));
    }

    private Bitmap getBitmap(String url) 
    {
        File f=fileCache.getFile(url);

        //from SD cache
        Bitmap b = decodeFile(f);
        if(b!=null)
            return b;

        //from web
        try {
            Bitmap bitmap=null;
            URL imageUrl = new URL(url);
            HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
            conn.setConnectTimeout(30000);
            conn.setReadTimeout(30000);
            conn.setInstanceFollowRedirects(true);
            InputStream is=conn.getInputStream();
            OutputStream os = new FileOutputStream(f);
            Utils.CopyStream(is, os);
            os.close();
            conn.disconnect();
            bitmap = decodeFile(f);
            return bitmap;
        } catch (Throwable ex){
           ex.printStackTrace();
           if(ex instanceof OutOfMemoryError)
               memoryCache.clear();
           return null;
        }
    }

    //decodes image and scales it to reduce memory consumption
    private Bitmap decodeFile(File f){
        try {
            //decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            FileInputStream stream1=new FileInputStream(f);
            BitmapFactory.decodeStream(stream1,null,o);
            stream1.close();

            //Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE=70;
            int width_tmp=o.outWidth, height_tmp=o.outHeight;
            int scale=1;
            while(true){
                if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                    break;
                width_tmp/=2;
                height_tmp/=2;
                scale*=2;
            }

            //decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            FileInputStream stream2=new FileInputStream(f);
            Bitmap bitmap=BitmapFactory.decodeStream(stream2, null, o2);
            stream2.close();
            return bitmap;
        } catch (FileNotFoundException e) {
        } 
        catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    }

    //Task for the queue
    private class PhotoToLoad
    {
        public String url;
        public ImageView imageView;
        public PhotoToLoad(String u, ImageView i){
            url=u; 
            imageView=i;
        }
    }

    class PhotosLoader implements Runnable {
        PhotoToLoad photoToLoad;
        PhotosLoader(PhotoToLoad photoToLoad){
            this.photoToLoad=photoToLoad;
        }

        public void run() {
            try{
                if(imageViewReused(photoToLoad))
                    return;
                Bitmap bmp=getBitmap(photoToLoad.url);
                memoryCache.put(photoToLoad.url, bmp);
                if(imageViewReused(photoToLoad))
                    return;
                BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad);
                handler.post(bd);
            }catch(Throwable th){
                th.printStackTrace();
            }
        }
    }

    boolean imageViewReused(PhotoToLoad photoToLoad){
        String tag=imageViews.get(photoToLoad.imageView);
        if(tag==null || !tag.equals(photoToLoad.url))
            return true;
        return false;
    }

    //Used to display bitmap in the UI thread
    class BitmapDisplayer implements Runnable
    {
        Bitmap bitmap;
        PhotoToLoad photoToLoad;
        public BitmapDisplayer(Bitmap b, PhotoToLoad p){bitmap=b;photoToLoad=p;}
        public void run()
        {
            if(imageViewReused(photoToLoad))
                return;
            if(bitmap!=null)
                photoToLoad.imageView.setImageBitmap(bitmap);
            else
                photoToLoad.imageView.setImageResource(stub_id);
        }
    }

    public void clearCache() {
        memoryCache.clear();
        fileCache.clear();
    }

} 
```

======MemoryCache.java

```
public class MemoryCache {

    private static final String TAG = "MemoryCache";
    private Map<String, Bitmap> cache=Collections.synchronizedMap(
            new LinkedHashMap<String, Bitmap>(10,1.5f,true));//Last argument true for LRU ordering
    private long size=0;//current allocated size
    private long limit=1000000;//max memory in bytes

    public MemoryCache(){
        //use 25% of available heap size
        setLimit(Runtime.getRuntime().maxMemory()/4);
    }

    public void setLimit(long new_limit){
        limit=new_limit;
        Log.i(TAG, "MemoryCache will use up to "+limit/1024./1024.+"MB");
    }

    public Bitmap get(String id){
        try{
            if(!cache.containsKey(id))
                return null;
            //NullPointerException sometimes happen here http://code.google.com/p/osmdroid/issues/detail?id=78 
            return cache.get(id);
        }catch(NullPointerException ex){
            ex.printStackTrace();
            return null;
        }
    }

    public void put(String id, Bitmap bitmap){
        try{
            if(cache.containsKey(id))
                size-=getSizeInBytes(cache.get(id));
            cache.put(id, bitmap);
            size+=getSizeInBytes(bitmap);
            checkSize();
        }catch(Throwable th){
            th.printStackTrace();
        }
    }

    private void checkSize() {
        Log.i(TAG, "cache size="+size+" length="+cache.size());
        if(size>limit){
            Iterator<Entry<String, Bitmap>> iter=cache.entrySet().iterator();//least recently accessed item will be the first one iterated  
            while(iter.hasNext()){
                Entry<String, Bitmap> entry=iter.next();
                size-=getSizeInBytes(entry.getValue());
                iter.remove();
                if(size<=limit)
                    break;
            }
            Log.i(TAG, "Clean cache. New size "+cache.size());
        }
    }

    public void clear() {
        try{
            //NullPointerException sometimes happen here http://code.google.com/p/osmdroid/issues/detail?id=78 
            cache.clear();
            size=0;
        }catch(NullPointerException ex){
            ex.printStackTrace();
        }
    }

    long getSizeInBytes(Bitmap bitmap) {
        if(bitmap==null)
            return 0;
        return bitmap.getRowBytes() * bitmap.getHeight();
    }
} 
```

=====Utils.java

```
public class Utils {
    public static void CopyStream(InputStream is, OutputStream os)
    {
        final int buffer_size=1024;
        try
        {
            byte[] bytes=new byte[buffer_size];
            for(;;)
            {
              int count=is.read(bytes, 0, buffer_size);
              if(count==-1)
                  break;
              os.write(bytes, 0, count);
            }
        }
        catch(Exception ex){}
    }
} 
```

====ContactImageAdapte.java

```
public class ContactImageAdapter extends ArrayAdapter<Contact>{
Context context;
   int layoutResourceId;   
public ImageLoader imageLoader;
   ArrayList<Contact> data=new ArrayList<Contact>();
   public ContactImageAdapter(Context context, int layoutResourceId, ArrayList<Contact> data) {
       super(context, layoutResourceId, data);
       this.layoutResourceId = layoutResourceId;
       this.context = context;
       this.data = data;
     this.imageLoader=new ImageLoader(context);
   }

   @Override
   public View getView(int position, View convertView, ViewGroup parent) {
       View row = convertView;
       ImageHolder holder = null;

       if(row == null)
       {
           LayoutInflater inflater = ((Activity)context).getLayoutInflater();
           row = inflater.inflate(layoutResourceId, parent, false);

           holder = new ImageHolder();
           holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);
           holder.imgIcon = (ImageView)row.findViewById(R.id.imgIcon);
           row.setTag(holder);
       }
       else
       {
           holder = (ImageHolder)row.getTag();
       }

       Contact myImage = data.get(position);
       holder.txtTitle.setText(myImage.name);
          int outImage=myImage.image;
      imageLoader.DisplayImage(listres.ItemImage,holder.ItamImage);
      return row;

   }

   static class ImageHolder
   {
       ImageView imgIcon;
       TextView txtTitle;
   }
} 
```

=====试试这个

# python - 如何使用 numpy/scipy 执行两个样本的单尾 t 检验

> ID：15984221
> 
> 赞同：51
> 
> 时间：2013-04-13T04:25:42.757
> 
> 标签：python, scipy, statistics

在`R`中，可以简单地通过使用进行两样本单尾 t 检验

```
> A = c(0.19826790, 1.36836629, 1.37950911, 1.46951540, 1.48197798, 0.07532846)
> B = c(0.6383447, 0.5271385, 1.7721380, 1.7817880)
> t.test(A, B, alternative="greater")

    Welch Two Sample t-test

data:  A and B 
t = -0.4189, df = 6.409, p-value = 0.6555
alternative hypothesis: true difference in means is greater than 0 
95 percent confidence interval:
 -1.029916       Inf 
sample estimates:
mean of x mean of y 
0.9954942 1.1798523 
```

在 Python 世界中，`scipy`提供了类似的函数[ttest_ind](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.ttest_ind.html#scipy.stats.ttest_ind)，但它只能进行双尾 t 检验。我找到的关于该主题的最接近的信息是[这个](http://scipy-user.10969.n7.nabble.com/scipy-stats-one-sided-two-sided-less-greater-signed-td3730.html#a31795926)链接，但它似乎是在讨论在`scipy`.

因此，我的问题是，是否有人知道有关如何使用 执行单尾版本测试的任何示例或说明`numpy/scipy`？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-04-13T04:39:07.277

从您的邮件列表链接：

> 因为单面测试可以从双面测试中退出。（对于对称分布，一侧 p 值只是两侧 p 值的一半）

它继续说 scipy 总是给出签名的测试统计数据。这意味着给定来自双尾检验的 p 和 t 值，您将拒绝大于检验时的原假设和小于检验时的原`p/2 < alpha and t > 0`假设`p/2 < alpha and t < 0`。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2018-04-14T17:04:22.103

在尝试添加一些见解作为对已接受答案的评论但由于评论的一般限制而无法正确写下它们之后，我决定将我的两美分作为完整答案。

首先让我们适当地制定我们的调查问题。我们正在调查的数据是

```
A = np.array([0.19826790, 1.36836629, 1.37950911, 1.46951540, 1.48197798, 0.07532846])
B = np.array([0.6383447, 0.5271385, 1.7721380, 1.7817880]) 
```

与样本均值

```
A.mean() = 0.99549419
B.mean() = 1.1798523 
```

我假设由于 B 的平均值明显大于 A 的平均值，因此您想检查此结果是否具有统计显着性。

所以我们有零假设

```
H0: A >= B 
```

我们想拒绝支持替代假设

```
H1: B > A 
```

现在，当您调用 时`scipy.stats.ttest_ind(x, y)`，这会对 的值进行假设检验`x.mean()-y.mean()`，这意味着为了在整个计算过程中获得正值（这简化了所有考虑），我们必须调用

```
stats.ttest_ind(B,A) 
```

而不是`stats.ttest_ind(B,A)`. 我们得到答案

*   `t-value = 0.42210654140239207`
*   `p-value = 0.68406235191764142`

由于根据[文档](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.ttest_ind.html)，这是双尾 t 检验的输出，我们必须将`p`单尾检验除以 2。因此，根据`alpha`您选择的重要性级别，您需要

```
p/2 < alpha 
```

以拒绝零假设`H0`。因为`alpha=0.05`这显然不是这样，所以**你不能拒绝** `H0`。

另一种决定是否拒绝`H0`而无需对`t`或进行代数的替代方法`p`是查看 t 值并将其与`t_crit`所需置信水平（例如 95%）下的临界 t 值进行比较适用于您的问题的自由`df`。既然我们有

```
df = sample_size_1 + sample_size_2 - 2 = 8 
```

[我们从这样](http://www.statisticshowto.com/tables/t-distribution-table/)一张统计表中得到

```
t_crit(df=8, confidence_level=95%) = 1.860 
```

我们显然有

```
t < t_crit 
```

所以我们再次得到相同的结果，即**我们不能拒绝** `H0`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-14T22:29:18.767

当原假设为`Ho: P1>=P2`且备择假设为时`Ha: P1<P2`。为了在 Python 中对其进行测试，您编写`ttest_ind(P2,P1)`. （注意位置首先是 P2）。

```
first = np.random.normal(3,2,400)
second = np.random.normal(6,2,400)
stats.ttest_ind(first, second, axis=0, equal_var=True) 
```

你会得到如下结果 `Ttest_indResult(statistic=-20.442436213923845,pvalue=5.0999336686332285e-75)`

在 Python 中，当`statstic <0`您的实际 p 值实际上是`real_pvalue = 1-output_pvalue/2= 1-5.0999336686332285e-75/2`时，大约为 0.99。由于您的 p 值大于 0.05，因此您不能拒绝 6>=3 的原假设。当 时`statstic >0`，真实 z 分数实际上等于`-statstic`，真实 p 值等于 pvalue/2。

Ivc 的答案应该是当`(1-p/2) < alpha and t < 0`，你可以拒绝小于假设。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-11-09T17:04:06.470

```
 from scipy.stats import ttest_ind  

    def t_test(x,y,alternative='both-sided'):
            _, double_p = ttest_ind(x,y,equal_var = False)
            if alternative == 'both-sided':
                pval = double_p
            elif alternative == 'greater':
                if np.mean(x) > np.mean(y):
                    pval = double_p/2.
                else:
                    pval = 1.0 - double_p/2.
            elif alternative == 'less':
                if np.mean(x) < np.mean(y):
                    pval = double_p/2.
                else:
                    pval = 1.0 - double_p/2.
            return pval

    A = [0.19826790, 1.36836629, 1.37950911, 1.46951540, 1.48197798, 0.07532846]
    B = [0.6383447, 0.5271385, 1.7721380, 1.7817880]

    print(t_test(A,B,alternative='greater'))
    0.6555098817758839 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-27T16:12:06.717

基于 R 中的此功能：[https ://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/t.test](https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/t.test)

```
def ttest(a, b, axis=0, equal_var=True, nan_policy='propagate',
          alternative='two.sided'):        
    tval, pval = ttest_ind(a=a, b=b, axis=axis, equal_var=equal_var,
                           nan_policy=nan_policy)
    if alternative == 'greater':
        if tval < 0:
            pval = 1 - pval / 2
        else:
            pval = pval / 2
    elif alternative == 'less':
        if tval < 0:
            pval /= 2
        else:
            pval = 1 - pval / 2
    else:
        assert alternative == 'two.sided'
    return tval, pval 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2018-12-14T16:52:08.203

你看过这个吗： [如何用 numpy 计算统计数据“t-test”](https://stackoverflow.com/questions/2324438/how-to-calculate-the-statistics-t-test-with-numpy)

我认为这正是这个问题所关注的。

基本上：

```
import scipy.stats
x = [1,2,3,4]
scipy.stats.ttest_1samp(x, 0)

Ttest_1sampResult(statistic=3.872983346207417, pvalue=0.030466291662170977) 
```

与 R 中的此示例的结果相同。[https://stats.stackexchange.com/questions/51242/statistical-difference-from-zero](https://stats.stackexchange.com/questions/51242/statistical-difference-from-zero)

# google-app-engine - Servlet 接口不是 javax.servlet.Servlet

> ID：15984229
> 
> 赞同：1
> 
> 时间：2013-04-13T04:26:26.090
> 
> 标签：google-app-engine, gwt, servlets

嗨，这个错误无法追踪 - 需要帮助。

我正在使用谷歌应用引擎并编写 rpc **servlet**，如下所示

```
<!-- Servlets -->
<servlet>
    <servlet-name>RealEstate_Service</servlet-name>
    <servlet-class>com.app.realestate.navi.client.RealEstateService</servlet-class>

</servlet>
<servlet-mapping>
    <servlet-name>RealEstate_Service</servlet-name>
    <url-pattern>/real_estate/realEstateService/</url-pattern>
</servlet-mapping> 
```

**房地产服务**

```
@RemoteServiceRelativePath("realEstateService")
public interface RealEstateService extends RemoteService {
ArrayList<ProjectDetails> getProjectDetails();
}

public interface RealEstateServiceAsync {
    public void getProjectDetails(AsyncCallback<ArrayList<ProjectDetails>> callback);
} 
```

**RealEstateServiceImpl**

```
@SuppressWarnings("serial")
public class RealEstateServiceImpl extends RemoteServiceServlet implements RealEstateService{

      private static final String[] contactsFirstNameData = new String[] {
          "Hollie", "Emerson", "Healy", "Brigitte", "Elba", "Claudio",
          "Dena", "Christina", "Gail", "Orville", "Rae", "Mildred",
          "Candice", "Louise", "Emilio", "Geneva", "Heriberto", "Bulrush", 
          "Abigail", "Chad", "Terry", "Bell"};

      private final String[] contactsLastNameData = new String[] {
          "Voss", "Milton", "Colette", "Cobb", "Lockhart", "Engle",
          "Pacheco", "Blake", "Horton", "Daniel", "Childers", "Starnes",
          "Carson", "Kelchner", "Hutchinson", "Underwood", "Rush", "Bouchard", 
          "Louis", "Andrews", "English", "Snedden"};

      private final String[] contactsEmailData = new String[] {
          "mark@example.com", "hollie@example.com", "boticario@example.com",
          "emerson@example.com", "healy@example.com", "brigitte@example.com",
          "elba@example.com", "claudio@example.com", "dena@example.com",
          "brasilsp@example.com", "parker@example.com", "derbvktqsr@example.com",
          "qetlyxxogg@example.com", "antenas_sul@example.com",
          "cblake@example.com", "gailh@example.com", "orville@example.com",
          "post_master@example.com", "rchilders@example.com", "buster@example.com",
          "user31065@example.com", "ftsgeolbx@example.com"};

      private final HashMap<String, Project> projects = new HashMap<String, Project>();

      public RealEstateServiceImpl() {
        initProjects();
      }

      private void initProjects() {
        // TODO: Create a real UID for each contact
        //
        for (int i = 0; i < contactsFirstNameData.length && i < contactsLastNameData.length && i < contactsEmailData.length; ++i) {
          Project project = new Project(String.valueOf(i), contactsFirstNameData[i], contactsLastNameData[i], contactsEmailData[i]);
          projects.put(project.getId(), project); 
        }
      }

      public Project addProject(Project project) {
          project.setId(String.valueOf(projects.size()));
          projects.put(project.getId(), project); 
        return project;
      }

      public Project updateProject(Project project) {
          projects.remove(project.getId());
          projects.put(project.getId(), project); 
          return project;
      }

      public Boolean deleteProject(String id) {
          projects.remove(id);
        return true;
      }

      public ArrayList<ProjectDetails> deleteProjects(ArrayList<String> ids) {

        for (int i = 0; i < ids.size(); ++i) {
            deleteProject(ids.get(i));
        }

        return getProjectDetails();
      }

      public ArrayList<ProjectDetails> getProjectDetails() {
        ArrayList<ProjectDetails> projectDetails = new ArrayList<ProjectDetails>();

        Iterator<String> it = projects.keySet().iterator();
        while(it.hasNext()) { 
          Project contact = projects.get(it.next());          
          projectDetails.add(contact.getLightWeightContact());
        }

        return projectDetails;
      }

      public Project getProject(String id) {
        return projects.get(id);
      }

} 
```

RPC 调用出现以下错误

```
Apr 13, 2013 4:19:02 AM com.google.appengine.tools.development.ApiProxyLocalImpl log
SEVERE: javax.servlet.ServletContext log: unavailable
javax.servlet.UnavailableException: Servlet interface com.app.realestate.navi.client.RealEstateService is not a javax.servlet.Servlet
    at org.mortbay.jetty.servlet.ServletHolder.checkServletType(ServletHolder.java:362)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:243)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:228)
    at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:255)
    at com.google.appengine.tools.development.AbstractServer.startup(AbstractServer.java:79)
    at com.google.appengine.tools.development.DevAppServerImpl$Servers.startup(DevAppServerImpl.java:451)
    at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:198)
    at com.google.appengine.tools.development.gwt.AppEngineLauncher.start(AppEngineLauncher.java:97)
    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1093)
    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:836)
    at com.google.gwt.dev.DevMode.main(DevMode.java:311) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T05:35:51.510

您的 web.xml 映射是错误的。您应该使用 RealEstateServiceImpl 而不是 RealEstateService

```
<servlet>
        <servlet-name>RealEstate_Service</servlet-name>
        <servlet-class>com.app.realestate.navi.client.RealEstateServiceImpl</servlet-class>
</servlet> 
```

**注意：**在您的空闲时间，请在[此处查看](https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC#services)GWT RPC 的基本信息。

# windows-phone - wp7处理应用程序栏按钮在枢轴中动态单击

> ID：15984230
> 
> 赞同：1
> 
> 时间：2013-04-13T04:26:37.920
> 
> 标签：windows-phone

我有一个包含 3 页的数据透视页面，并且有两个应用程序栏按钮。但我希望当枢轴改变时，应用程序栏的第一个按钮应该在不同的枢轴上执行不同的任务，第二个按钮将在所有枢轴上执行相同的任务。我这样做是：

private void PivotControl_SelectionChanged(object sender, SelectionChangedEventArgs e) { ApplicationBarIconButton firstButton = (ApplicationBarIconButton)ApplicationBar.Buttons[0];

```
 if (PivotControl.SelectedIndex == 0)
        {               
            firstButton.IsEnabled = true;
            firstButton.Click += new EventHandler(FirstPivotButton_Click);
        }
        else if (PivotControl.SelectedIndex == 1)
        {
            firstButton.IsEnabled = true;
            firstButton.Click += new EventHandler(SecondPivotButton_Click);

        }
        else if (PivotControl.SelectedIndex == 2)
        {
            firstButton.IsEnabled = false;                
        }
  }

    void FirstPivotButton_Click(object sender, EventArgs e)
    {
        NavigationService.Navigate(new Uri("/PageA.xaml", UriKind.Relative));
    }

    void SecondPivotButton_Click(object sender, EventArgs e)
    {
        NavigationService.Navigate(new Uri("/PageB.xaml", UriKind.Relative));
    } 
```

但问题是 PageA 的导航很好，但是从 secondpivotbutton 单击事件转到 PageB 时存在问题。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T11:03:41.640

使用这个出色的库来简化 Windows Phone 上 ApplicationBar 的使用 - [**AppBarUtils**](http://appbarutils.codeplex.com/)。[您也可以在NuGet](http://nuget.org/packages/AppBarUtils/)上找到它们。

还有很好的教程，如何使用这个库为每个全景图/透视项目显示不同的按钮：http:
[//allenlooplee.wordpress.com/2012/09/17/how-to-show-different-app-bar-for -不同的pivotpano项目/](http://allenlooplee.wordpress.com/2012/09/17/how-to-show-different-app-bar-for-different-pivotpano-item/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T22:13:26.873

这是我在我的一个应用程序中执行此操作的方法。按钮 1 与数据透视页面不同，按钮 2 始终相同，就像您一样。

在 SelectionChanged 事件上，更新按钮图标 uri 和文本：

```
Private Sub statPivot_SelectionChanged(sender As Object, e As SelectionChangedEventArgs) Handles statPivot.SelectionChanged
        Dim saveBtn As ApplicationBarIconButton = ApplicationBar.Buttons(0)

        If statPivot.SelectedIndex = 0 Then
            'calculation pane active
            saveBtn.Text = "save"
            saveBtn.IconUri = New Uri("/Assets/AppBar/appbar.save.rest.png", UriKind.Relative)
        Else
            'history pane active
            saveBtn.Text = "clear"
            saveBtn.IconUri = New Uri("/Assets/AppBar/appbar.refresh.rest.png", UriKind.Relative)
        End If
    End Sub 
```

然后在 onclick 事件中，我检测到正在查看的数据透视窗格并使用基本的 if...then...else... 在同一处理程序中运行不同的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T06:17:12.040

如果您想在运行时动态更改应用栏按钮，您可以这样做：

```
 <phone:PhoneApplicationPage.Resources>
    <shell:ApplicationBar x:Key="appbar1" IsVisible="True">
        <shell:ApplicationBarIconButton x:Name="abMain1" IconUri="/icons/appbar.favs.addto.rest.png" Text="blabla1"/>
    </shell:ApplicationBar>

    <shell:ApplicationBar x:Key="appbar2" IsVisible="True">
        <shell:ApplicationBarIconButton x:Name="abMain2" IconUri="/icons/appbar.favs.addto.rest.png" Text="blabla2"/>
        <shell:ApplicationBarIconButton x:Name="abMain3" IconUri="/icons/appbar.cancel.rest.png" Text="blabla3"/>
    </shell:ApplicationBar>
</phone:PhoneApplicationPage.Resources> 
```

然后从代码中更改它：

```
 ApplicationBar = (Microsoft.Phone.Shell.ApplicationBar) Resources["appbar1"]; 
```

和

```
 ApplicationBar = (Microsoft.Phone.Shell.ApplicationBar) Resources["appbar2"]; 
```

您可以使用大量不同的`AppBars`. 希望它的帮助。

# java - TextView 不在主屏幕上打印字符串

> ID：15984237
> 
> 赞同：0
> 
> 时间：2013-04-13T04:27:10.470
> 
> 标签：java, android, xml, eclipse

在我的 XML 文件中：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"

    android:textColor="@color/black"
    /> 
```

在我的 Java 文件中：

```
TextView myTextView = (TextView) findViewById(R.id.textView1); myTextView.setText("Local Time:" + localTime); 
```

但它仍然没有在我的屏幕上打印任何内容。难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:54:22.643

在我的 XML 文件中

```
<Text View
    android:id="@+id/name"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding Bottom="2dip"
    android:padding Top="6dip"
    android:text Color="#9EEBF5"
    android:text Size="16sp"
    android:text Style="bold" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T07:03:19.470

试试这个代码：

主要的.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

   <TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:textColor="#000000"
        android:text="Try"
    />

</RelativeLayout> 
```

mainActivity.java

```
public class MainActivity extends Activity {
    TextView t1;
    String localTime = "10A.m";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        t1 = (TextView) findViewById(R.id.textView1);
        t1.setText("Local Time: " + localTime);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T04:31:46.593

尝试将文本设置为另一种颜色。在你的 xml 中。

```
android:textColor="yourcolor" 
```

并在资源 xml

```
<color name="yourcolor">#F5DC49</color> 
```

我想你可能需要

```
@`android:style/TextAppearance.Large` 
```

我认为 ?android 是你的东西中的错字

# java - Java 将播放器从一个点平滑地移动到另一个点

> ID：15984247
> 
> 赞同：0
> 
> 时间：2013-04-13T04:28:41.867
> 
> 标签：java, point, animated

我所需要的只是根据点击来确定玩家的新坐标，并让玩家顺利地向它移动。例如玩家在 (20, 20) 并且您点击 (50, 80) 我将如何让它顺利移动。我已经尝试了许多不同的东西，主要基于勾股公式试图通过找到斜边然后找到具有较小斜边的相同三角形来计算新坐标，但必须有一个更简单的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T04:33:53.650

你可以：

1.  计算由起点和终点形成的线段的斜率。
2.  对于到达目的地之前的每个时间段，根据步骤 1 中计算的斜率调整新坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T07:41:18.660

虽然我用 javascript 编程，但你应该能够阅读和理解它

```
function move(x1,y1,x2,y2,speed){//executed each time frame. Returns coords as array [x,y]
   if(!speed)speed=1;
   var dis=Math.sqrt(Math.pow(x1-x2)+Math.pow(y1-y2));
   return [(x1-x2)/dis*speed,(y1-y2)/dis*speed];
} 
```

无论每帧多少个单位，速度都是恒定的，并且在到达目的地时会停止。它可能会晃动一点，但很容易解决。

编辑：我忘了提。此函数返回速度。不是坐标

# wpf - xaml 窗口不居中

> ID：15984248
> 
> 赞同：0
> 
> 时间：2013-04-13T04:29:04.650
> 
> 标签：wpf

我有一个 xaml（窗口）控件，其中包含一个网格，在该网格内，两个堆栈面板。第二个堆栈面板设置为每个可见性“折叠”。当表单加载并单击表单上的按钮时，xaml 窗口通过设置 WindowStartupLocation="CenterScreen" 居中显示。但是，当单击 xaml 上的按钮以将第二个堆栈面板的可见性设置为可见时，它不再居中。谁能帮助解决这个问题或告诉我如何解决这个问题？

更新：仔细观察后，我认为可能是因为可见性设置为折叠？我试过而不是折叠，隐藏，并将其居中，但该列显示为空，因为它被堆栈面板使用。

以下是代码：

Form1.cs

```
public Form1()
{
     InitializeComponent();
     this.StartPosition = FormStartPosition.CenterScreen;
}

private void button_Click(object sender, EventArgs e)
{
    MainWindow childWindow = new MainWindow();
    childWindow.Show();
} 
```

MainWindw.xaml

```
<Window x:Class="ChildProject.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:views="clr-namespace:ChildProject"
    Title="MainWindow" 
    Width="Auto"
    Height="Auto"
    SizeToContent="WidthAndHeight"
    AllowsTransparency="False"
    ResizeMode="NoResize"
    WindowStyle="None"
    WindowStartupLocation="CenterScreen">
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="auto"  />
        <ColumnDefinition Width="auto" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="auto" />
        <RowDefinition Height="auto" />
    </Grid.RowDefinitions>
    <StackPanel x:Name="stkpnlMain" 
                Grid.Column="0" 
                Grid.Row="0" 
                Orientation="Vertical">
        <Label  Content="This is suppose to display message on right ..." 
                FontStyle="Italic" 
                FontWeight="Bold"/>
        <Button Content="Click Me" 
                Width="75" 
                Margin="5" Click="Button_Click" />
    </StackPanel>
    <StackPanel x:Name="stkpnlDisplay" 
                Grid.Column="1" 
                Grid.Row="0" 
                Margin="5,0,0,0" 
                Orientation="Vertical" 
                Background="YellowGreen" Visibility="Collapsed" >
        <Label Content="... First now shows ..." 
               BorderBrush="Black" 
               BorderThickness="1" 
               Background="Yellow" />
        <Label Content="Hopefully this will work" 
               BorderBrush="Red" 
               BorderThickness="3" 
               Margin="0,5" 
               Background="White" />
    </StackPanel>
    </Grid> 
```

主窗口.xaml.cs

```
public MainWindow()
{
    InitializeComponent();
}

private void Button_Click(object sender, RoutedEventArgs e)
{
    stkpnlDisplay.Visibility = Visibility.Visible;
} 
```

# android - 是否有免费的 API 来检索应用程序的艺术家图像

> ID：15984249
> 
> 赞同：0
> 
> 时间：2013-04-13T04:29:11.600
> 
> 标签：android, last.fm, google-custom-search

我希望使用 Google 自定义搜索，但他们将您限制为每天 100 次查询……这是每个 API 密钥，所以我的应用程序的所有用户每天的总查询次数将是 100。老实说，这很可悲。

LastFM 不允许您在商业应用程序中使用艺术家图像，MusicBrainz 仅提供专辑图像，而不提供艺术家图像。有谁知道另一个来源？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:39:07.180

您可以查看艺术家的 Echo Nest Api。[在此处](http://developer.echonest.com/docs/v4/artist.html)查看链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T05:26:38.307

我会研究 Freebase。只是在那里做一些快速搜索，似乎他们有艺术家的图像，尽管它会根据上传的内容而有所不同（例如，可能是他们在音乐会上的图像）。

话虽如此，如果 Freebase 为您工作，他们有非常宽松的 API 请求，并且如果您熟悉查询，则可以对请求的内容提供很多控制。

# node.js - 寻找为不同存储提供商提供统一文件 API 的 node.js 模块

> ID：15984254
> 
> 赞同：1
> 
> 时间：2013-04-13T04:29:37.493
> 
> 标签：node.js, module, amazon-s3, google-drive-api, dropbox-api

我使用 Node.js 来托管 Web 服务器。服务器将与不同的第三方存储提供商进行通信，例如 Box、dropbox、googledrive、amazon s3、skydrive、ftp 服务器等。服务器将从存储提供商下载文件或将文件上传到存储提供商。

我正在使用 OAuth 模块来实现授权过程并获取 auth_token 和 auth_secret。OAuth 模块统一了不同服务器的授权接口。OAuth 模块封装了 oauth 服务器的 API，提供了统一友好的接口。使用 OAuth 模块，我不需要在我的代码中调用 oauth 服务器的 API。它非常好，节省了我的很多工作。

从/向不同的存储提供商下载/上传文件时，我遇到了一些困难。我必须为每个存储服务器编写不同的实现。比如调用box APi上传文件到box，调用s3 API上传文件到s3等等。我想知道是否有一些节点模块封装了存储提供者的所有API，就像授权API的OAuth模块一样.

下面的伪代码表达了我期望这种模块如何工作。我想它的名字是“存储”。

```
var storage = require("storage"); // This is the storage library I'm looking for.

var s3 = storage.s3(s3_aouth_token_and_secret); // The declaration for the s3_aouth_token_and_secret is omitted for simplification.
var box = storage.box(box_aouth_token_and_secret);
var dropbox = storage.dropbox(dropbox_aouth_token_and_secret);

var local_file_name = "./report.docx";
s3.upload(s3_parent_folder_id, local_file_name); // Upload local file to s3
box.upload(box_parent_folder_id, local_file_name); // Upload local file to box

dropbox.upload(dropbox_parent_folder_id, local_file_name); // Upload local file to dropbox

var local_pah = "./downloads/';
s3.download(s3_file_id, local_pah);
box.download(box_file_id, local_pah);

dropbox.download(dropbox_file_id, local_pah); 
```

请让我知道哪个节点模块可以满足我的要求。

谢谢，

杰弗里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T22:06:32.183

您应该查看[Temboo](http://temboo.com) - 它完全符合您的要求。Temboo 对 API 进行规范化，以便它们的外观和感觉都相同。一旦您知道如何通过 Temboo 与单个存储 API 对话，您就知道如何与所有人对话。

Temboo 有一个 Node.js SDK，您可以在[此处](https://www.temboo.com/library/keyword/storage)找到有关 Temboo 支持的存储 API 的更多信息。

（全面披露：我在 Temboo 工作）

# android - 对话框而不是上下文菜单

> ID：15984256
> 
> 赞同：0
> 
> 时间：2013-04-13T04:29:47.073
> 
> 标签：android, android-contextmenu

我有一个程序，它显示通过内容提供者从数据库中提取的记录列表。

我有一个内容菜单，当长按列表视图上的任何项目时，会出现一个内容菜单，它提供了删除项目的选项。

我想要做的是改用对话框 - 这样用户可以选择在删除之前用描述标记项目。

这是我的内容菜单的代码：

```
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {

super.onCreateContextMenu(menu, v, menuInfo);
showDialog(DIALOG_SAB_PRIORITY_ID);
menu.add(0, DELETE_ID, 0, "Returned Item - Remove");

} 
```

以及选择项目时的代码：

```
public boolean onContextItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case DELETE_ID:

        AdapterContextMenuInfo info = (AdapterContextMenuInfo) item
                .getMenuInfo();
        Uri uri = Uri.parse(BorrowMeContentProvider.CONTENT_URI + "/"
                + info.id);
        getContentResolver().delete(uri, null, null);
        fillData();
        return true;
    }
    return super.onContextItemSelected(item);
} 
```

我应该提一下，我将更改该项目，使其不会被删除，只是标记为已退回。我的对话框如下：

```
protected Dialog onCreateDialog(int id) {
    AlertDialog dialog;
    switch (id) {
    case DIALOG_SAB_PRIORITY_ID:
        final CharSequence[] items = { "Good Condition", "Bad Condition" };

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("Returned Item Condition:")
                .setSingleChoiceItems(items, 0,
                        new DialogInterface.OnClickListener() {
                            // This is the listener that checks to see what
                            // radio button is clicked
                            public void onClick(DialogInterface dialog,
                                    int item) {
                                // Toast.makeText(getApplicationContext(),
                                // Integer.toString(item),
                                // Toast.LENGTH_SHORT).show();

                                if (item == 0) {
                                    // If item returned in good condition
                                    goodBadSwitch = false;
                                } else if (item == 1) {
                                    // If item is returned in bad condition
                                    goodBadSwitch = true;
                                }

                            }
                        })
                .setPositiveButton("OK",
                        new DialogInterface.OnClickListener() {
                            // This is the listener for the button to
                            // dismiss the dialog box
                            @Override
                            public void onClick(DialogInterface dialog,
                                    int which) {

                                dialog.dismiss();

                            }

                        });

        dialog = builder.create();

        break;
    default:
        dialog = null;
    }
    return dialog;
} 
```

到目前为止，这段代码所做的只是在对话框之后调用菜单。我只想让对话框代替菜单。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:26:48.737

如果您想摆脱菜单上下文，则可以将对话框的调用移动到列表视图`onListItemClick`侦听器，如下所示：

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    // other code...
    showDialog(DIALOG_SAB_PRIORITY_ID);
    // other code...
} 
```

# javascript - 展平嵌套对象

> ID：15984257
> 
> 赞同：1
> 
> 时间：2013-04-13T04:29:48.640
> 
> 标签：javascript, jquery

我必须将 JSON 转换为以下格式，我在将其转换回来时遇到问题。

**这是当前格式**

```
[{
    "id": "5",
    "parentid": "0",
    "text": "Device Guides",
    "index": 0,
    "children": [{
        "id": "10",
        "text": "Grandstream GXP-21XX",
        "index": 0
    }, {
        "id": "11",
        "text": "Polycom Soundstation/Soundpoint",
        "index": 1
    }, {
        "id": "23",
        "text": "New Polycom",
        "index": 2
    }]
}, {
    "id": "6",
    "parentid": "0",
    "text": "Pre-Sales Evaluation",
    "index": 1,
    "children": []
}, {
    "id": "7",
    "parentid": "0",
    "text": "Router Setup Guides",
    "index": 2,
    "children": [{
        "id": "9",
        "text": "Sonicwall",
        "index": 0
    }, {
        "id": "12",
        "text": "Cisco",
        "index": 1
    }]
}, {
    "id": "9",
    "parentid": "7",
    "text": "Sonicwall",
    "index": 3,
    "children": []
}, {
    "id": "10",
    "parentid": "5",
    "text": "Grandstream GXP-21XX",
    "index": 4,
    "children": []
}, {
    "id": "11",
    "parentid": "5",
    "text": "Polycom Soundstation/Soundpoint",
    "index": 5,
    "children": []
}, {
    "id": "12",
    "parentid": "7",
    "text": "Cisco",
    "index": 6,
    "children": []
}] 
```

**这是我需要的格式：**

```
[{
    "id": "5",
    "parentid": "0",
    "text": "Device Guides",
    "index": "0"
}, {
    "id": "6",
    "parentid": "0",
    "text": "Pre-Sales Evaluation",
    "index": "0"
}, {
    "id": "7",
    "parentid": "0",
    "text": "Router Setup Guides",
    "index": "0"
}, {
    "id": "9",
    "parentid": "7",
    "text": "Sonicwall",
    "index": "0"
}, {
    "id": "10",
    "parentid": "5",
    "text": "Grandstream GXP-21XX",
    "index": "0"
}, {
    "id": "11",
    "parentid": "5",
    "text": "Polycom Soundstation\/Soundpoint",
    "index": "0"
}, {
    "id": "12",
    "parentid": "7",
    "text": "Cisco",
    "index": "0"
}] 
```

基本上，我必须为我正在使用的脚本嵌套它，但服务器希望看到它变平，在当前格式中，第 3 个对象维度以“children”开头。我需要取消嵌套孩子并保持对象按照我需要的格式运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T06:02:20.447

第一个解决方案，授予您不希望根据 id 对结果数组进行排序：

```
function visitor(graph) {
  var i, l,
  nodes=[],
  visited=[];

  function clone(n) {
     // improve the function yourself I'm lazy
     var i,l,
         props=["id","parentid","index","text"],
         result={};
     for (i = 0, l = props.length; i < l; i++) { 
        if (n[props[i]]) {
          result[props[i]]= n[props[i]];
        }
     }
     return result;
  }

  function helper (node) {
    var i, limit;
    if (visited.indexOf(node.id) == -1) {
      visited.push(node.id);
      nodes.push(clone(node));
      if( node.children) {
        for (i = 0, limit = node.children.length; i < limit; i++) {
          helper(node.children[i]);
        }
      }
    }
  }

  for (i = 0, l = graph.length; i < l; i++) {
    helper(graph[i]);
  }

  return nodes;
}

var graph =     [{
    "id": "5",
    "parentid": "0",
    "text": "Device Guides",
    "index": 0,
    "children": [{
        "id": "10",
        "text": "Grandstream GXP-21XX",
        "index": 0
    }, {
        "id": "11",
        "text": "Polycom Soundstation/Soundpoint",
        "index": 1
    }, {
        "id": "23",
        "text": "New Polycom",
        "index": 2
    }]
}, {
    "id": "6",
    "parentid": "0",
    "text": "Pre-Sales Evaluation",
    "index": 1,
    "children": []
}, {
    "id": "7",
    "parentid": "0",
    "text": "Router Setup Guides",
    "index": 2,
    "children": [{
        "id": "9",
        "text": "Sonicwall",
        "index": 0
    }, {
        "id": "12",
        "text": "Cisco",
        "index": 1
    }]
}, {
    "id": "9",
    "parentid": "7",
    "text": "Sonicwall",
    "index": 3,
    "children": []
}, {
    "id": "10",
    "parentid": "5",
    "text": "Grandstream GXP-21XX",
    "index": 4,
    "children": []
}, {
    "id": "11",
    "parentid": "5",
    "text": "Polycom Soundstation/Soundpoint",
    "index": 5,
    "children": []
}, {
    "id": "12",
    "parentid": "7",
    "text": "Cisco",
    "index": 6,
    "children": []
}];

nodes = visitor(graph); 
```

是的，我知道，辅助函数会传递副作用，但我已将它们限制在访问者函数中以减少伤害，并且还有改进的余地（至少根据 id 对结果数组进行排序），但我会将它们留给你

# android - 在 Android 中创建、编写和读取 XML 文件

> ID：15984261
> 
> 赞同：0
> 
> 时间：2013-04-13T04:30:07.727
> 
> 标签：android, xml

基本上，我正在创建一个 android 游戏，并希望将一些关卡数据保存在一个 XML 文件中，这些数据保存在 assets 文件夹中，我将它们解析为：

```
final SAXParserFactory spf = SAXParserFactory.newInstance();
final SAXParser sp = spf.newSAXParser();
final XMLReader xmlReader = sp.getXMLReader();
final XMLParser pXMLParser = new XMLParser();//My own created Class
xmlReader.setContentHandler(pXMLParser);
InputStream inputStream = Z.act.getAssets().open("levels/" + PackName + ".xml");
xmlReader.parse(new InputSource(new BufferedInputStream(inputStream)));
return pXMLParser.getParsedLevel(); 
```

在那之前一切正常，我成功地创建并保存了 XML 文件。但也不算多，我还想创建一个关卡编辑器。我能够通过使用类似的东西来创建 XML（在 String 数据类型中）

（根据关卡编辑器活动/场景的调用，在不同的方法中有各种“String +=”）：

```
String XMLString = "";
XMLString += "<?xml version=\"1.0\" encoding=\"UTF-8\"?>";
....
XMLString += " </" + tagEnemy + ">"; // tagEnemy is a variable string I created 
```

我现在很困惑如果这是正确的或者我应该如何以 XML 形式（或任何方便的形式）动态创建它以及保存位置（可能是 android 中的内部或外部存储）应该是最好的。因为我尝试了许多代码片段在谷歌上找到很多东西之后我的大部分代码可能没用而且不起作用，但如果你说我可以添加它。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T05:29:17.300

试试我的代码，它从资产/网址解析数据

```
public class SaxParserTest extends DefaultHandler {
    Boolean currentElement = false;
    String currentValue = null;
    ArrayList<HashMap<String, Object>> datalist = new ArrayList<HashMap<String, Object>>();
    HashMap<String, Object> temp;
    public ArrayList<HashMap<String, Object>> getData(Context context ){
        try {
            SAXParserFactory saxparser = SAXParserFactory.newInstance();
            SAXParser parser = saxparser.newSAXParser();
            XMLReader xmlReader = parser.getXMLReader();
            xmlReader.setContentHandler(SaxParserTest.this);
            /*
             * used when pick local data
             */
//              InputStream is =context.getAssets().open("data.xml");
//              xmlReader.parse(new InputSource(is));
            /*
             * used when pick data from url
             */
            URL url = new URL("http://www.xmlfiles.com/examples/cd_catalog.xml");
            xmlReader.parse(new InputSource(url.openStream()));     
        } catch (Exception e) {
            e.getMessage();
        }
        return datalist;
    }

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        super.startElement(uri, localName, qName, attributes);
        if (localName.equalsIgnoreCase("CD")) {
            temp=new HashMap<String, Object>();
            temp.put(Constant.id, attributes.getValue(Constant.id));
//          temp.put(Constant.title, attributes.getValue(Constant.title));
//          temp.put(Constant.artist, attributes.getValue(Constant.artist));
//          temp.put(Constant.country, attributes.getValue(Constant.country));
//          temp.put(Constant.company, attributes.getValue(Constant.company));
//          temp.put(Constant.price, attributes.getValue(Constant.price));
//          temp.put(Constant.year, attributes.getValue(Constant.year));
        }
    }

    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {
        super.characters(ch, start, length);
            currentValue = new String(ch, start, length);
    }

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {
        super.endElement(uri, localName, qName);
        if(localName.equals(Constant.title))
        temp.put(Constant.title, currentValue);
        if(localName.equals(Constant.artist))
        temp.put(Constant.artist, currentValue);
        if(localName.equals(Constant.country))
        temp.put(Constant.country, currentValue);
        if(localName.equals(Constant.company))
        temp.put(Constant.company, currentValue);
        if(localName.equals(Constant.price))
        temp.put(Constant.price, currentValue);
        if(localName.equals(Constant.year))
        temp.put(Constant.year, currentValue);
        if(localName.equalsIgnoreCase("CD"))
            datalist.add(temp);
        Log.i("DataList", datalist.toString());

    }
} 
```

并像这样使用它

```
SaxParserTest test=new SaxParserTest();
            datal=test.getData(this);
            SimpleAdapter adapter = new SimpleAdapter(MainActivity.this, datal,
                    R.layout.activity_main, new String[] { Constant.title,
                            Constant.artist, Constant.price, Constant.year,
                            Constant.company, Constant.country ,Constant.id}, new int[] {
                            R.id.txt1, R.id.txt2, R.id.txt3, R.id.txt4,
                            R.id.txt5, R.id.txt6 ,R.id.txt7});
            setListAdapter(adapter); 
```

# spring - Spring data jpa 填充数据关系

> ID：15984263
> 
> 赞同：2
> 
> 时间：2013-04-13T04:30:11.060
> 
> 标签：spring, spring-mvc, repository, spring-data-jpa

我使用 spring data jpa 框架来轻松处理整个 dao 的东西，它很棒。几天前，我测试了 spring data jpa 的 repo populator 功能，它也工作得非常顺利，但是可以处理关系吗？不是级联持久类型，它们很容易处理......我的意思是这种类型的数据由另一个 json 文件提供的一对一关系。

嗯，我希望我想做的事情有点可以理解。有没有人想用spring data jpa来处理这个问题？

感谢您的帮助，祝您周末愉快：）

# variables - MS Access 从模块更改文本框值

> ID：15984269
> 
> 赞同：0
> 
> 时间：2013-04-13T04:31:03.880
> 
> 标签：variables, ms-access, vbscript, textbox

我想根据模块内的输入框值更改报告中文本框的值。

```
Public Sub ChangeTextBox()
Dim UserText As String

UserText = InputBox("Enter The Value")
'The part I don't understand is how to branch out to the text box name
'I know you have to do something like Form!Formname.textbox name but I'm so confused
'How do I link it to the textbox from within module? 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T04:37:51.030

试试下面的代码。

formname 是表单名称 txtName 是文本框名称

```
Public Sub ChangeTextBox()
    Dim UserText As String

    UserText = InputBox("Enter The Value")

    If UserText <> "" Then
        ActiveCell.Value = s
        formname.txtName = "dfd" ' where txtName is textbox name
    End If

End Sub 
```

![在此处输入图像描述](https://i.stack.imgur.com/ZZLCC.png)

**对象浏览器视图** ![在此处输入图像描述](https://i.stack.imgur.com/MlcQQ.png)

![在此处输入图像描述](https://i.stack.imgur.com/RVLjg.png)

# c# - 为关卡编辑器在 XNA 和 WPF 之间传递元数据的最佳方式

> ID：15984273
> 
> 赞同：1
> 
> 时间：2013-04-13T04:31:43.610
> 
> 标签：c#, wpf, xna, routed-events

我在 XNA 中有一个预先存在的游戏，不幸的是我丢失了它的关卡编辑器代码。之前它曾经作为单独的 .exe 运行，但我已经完成了修改游戏的工作，以便可以暂停它以在游戏本身中运行关卡编辑器。我想使用 WPF 来实际进行关卡编辑，因为它似乎非常适合这项任务，但我不知道在两个系统之间传递信息的最佳方式。

我的 XNA 游戏生成了一个 WPF 窗口，并且我已经向 XNA 游戏注册了事件，这样当我单击 WPF 窗口上的按钮时，XNA 游戏会收到 ClickEvent 并做出适当的响应。这对于放置除了位置（像雕像之类的东西）之外不需要初始化数据的对象非常有效，我只是直接在 XNA 中解释。但是，现在我的对象包含用户在 WPF 编辑器中定义的更多信息（例如，开始敌人的健康），我不确定将信息路由到 XNA 的最佳方式。我特别想记住，最终，我会想要做到这一点，以便我可以单击游戏中的一个对象以“在线”编辑它（或者至少让使用它的人看起来像这样）关卡编辑器）。所以本质上，我

到目前为止，这是我的想法，但这些都不像我希望的那样直截了当，所以我不确定我是否走在正确的道路上。

1.  覆盖 RoutedEventArgs 以包含我需要的额外元数据，这样当事件从 WPF 引发并被 XNA 拾取时，所有额外信息都已经存在。
    *   这似乎是一个不错的方法，但是当我想反过来时，它根本没有帮助我。
    *   另外，我可能会误解它是如何工作的，但似乎我需要在我的 XNA 游戏中添加一堆通用的 EventHandler 代码，而这对于“雕像”案例来说是不需要的。
2.  覆盖 Button 类以附加我需要的额外元数据，然后通过 sender 或 RoutedEventArgs.OriginalSender 访问它
    *   这似乎是更简单的方法之一，但感觉有点强迫。这些信息并不真正属于 Button 的一部分。
    *   我不确定这将如何将信息从 XNA 传递回 WPF。
3.  通过 sender.Parent 或 RoutedEventArgs.OriginalSender.Parent 获取信息，这需要将其转换为适当的 WPF UI 元素。
    *   这似乎相对容易，但有点难看。这基本上意味着放置一堆常规的 C# 样式属性，当 ComboBoxes 之类的东西有更改/选择事件时，它们会设置它们的值。
    *   这似乎比制作自定义按钮更容易，但我还没有花时间认真研究它。

任何帮助/方向将不胜感激。我也很乐意发布任何相关的代码片段，但游戏非常大，到目前为止 WPF 实现非常基础，所以我不确定什么会有所帮助。

# arrays - hitTestObject not hitTesting with all MovieClips

> ID：15984281
> 
> 赞同：0
> 
> 时间：2013-04-13T04:33:34.100
> 
> 标签：arrays, actionscript-3, for-loop, hittest

嘿伙计们有一点麻烦，这可能比我想象的要容易。但是我遇到的问题是，当我用我的 mcPlayer 测试我的 mcPoints 时，它只与通过 for 循环添加到舞台的 5 个电影剪辑中的 4 个进行交互。

在过去的两天里，我一直在为此苦苦挣扎，似乎无法确定问题所在，一切似乎都设置得很完美，但也许您可以提供帮助。

这些是我的变量：

```
public var mcPoints:smallGainPoints;
    private var nPoints:Number = 5;
    private var aPointsArray:Array; 
```

以下是我如何设置要添加到舞台的 5 个 mcPoints 电影剪辑：

```
private function addPointsToStage():void
    {
         var startPoint:Point = new Point((stage.stageWidth / 2) - 100, stage.stageHeight / 2);
         var spacing:Number = 50;

         for (var i = 0; i < nPoints; i++)
         {
             trace(aPointsArray.length);
             mcPoints = new smallGainPoints();
             aPointsArray.push(mcPoints);
             stage.addChild(mcPoints);
             mcPoints.x = startPoint.x + (spacing * i);
             mcPoints.y = startPoint.y;
         }

    } 
```

这样就将水平对齐的 5 点电影剪辑添加到舞台上。

最后是监听 HitTestObject 以启动的循环：

```
private function checkPlayerHitPoints():void 
    {

        for (var i:int = 0; i < aPointsArray.length; i++)
            {
                //get current point in i loop
                var currentPoints:smallGainPoints = aPointsArray[i];

                //test if  player is hitting current point
                if(player.hitTestObject(currentPoints))
                {
                    //Add points sound effects
                    var pointsSound:Sound = new pointsPickUpSound();
                    pointsSound.play();

                    //remove point on stage
                    currentPoints.destroyPoints()
                    //remove points from array
                    aPointsArray.splice(i, 1);
                    trace(aPointsArray.length);

                    //Add plus 5 text to current points position
                    mcPlus5 = new plusFiveText();
                    stage.addChild(mcPlus5);
                    mcPlus5.x = (currentPoints.x);
                    mcPlus5.y = (currentPoints.y);

                    //Update high score text
                    nScore += 5;
                    updateHighScore();

                }

            }
    } 
```

因此，我添加了添加电影剪辑的时间和点击它们时的跟踪，这是我得到的值：

0 1 2 3 4 命中：4 命中：3 命中：2 命中：1

我也调用 addPointsToStage(); 在我的构造函数中获取更多信息。

所以从我得到的值来看，最后一个值“0”似乎没有被交互，任何想法为什么？请任何有用的东西。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:43:32.127

我不确定您的代码应该在做什么。但是，当您从循环中的数组中删除元素时，您将丢失一项。

您的数组是 `[1][2][3][4][5]` 当 i=1 时，您删除元素并获得 `[1][3][4][5]` 下一个交互 i=2，这意味着您永远不会再次测试值 3。

每当从数组中删除元素时，都应该减少 i 。

# java - Java readObject 预览数据，但不会读取或传输数据

> ID：15984284
> 
> 赞同：0
> 
> 时间：2013-04-13T04:34:01.687
> 
> 标签：java, android, serialization

我似乎找不到`readObject()`将其内容传输到对象变量的方法。当我单步执行加载函数时，我得到**“temp = (HashMap) ois.readObject();”** 在执行此行之前`HashMap's`，我可以在 的表达式窗口中看到我用 oos 编写的数据，`Eclipse`因此我知道数据在那里，但是当执行此行时，我`IOException`会使用`EOF`. 从我读到的内容来看，这是预期的，但我还没有找到捕捉 EOF 的方法（带有 available() 的循环并且`readObjectInt()`不起作用）。我在 Android 模拟器上运行它。任何建议，将不胜感激。

```
public void Save(Pottylog data)
{
    try 
    {
        FileOutputStream fos = openFileOutput("Plog", Context.MODE_PRIVATE);
        ObjectOutputStream oos = new ObjectOutputStream(fos);
        oos.writeObject(data.get());
        oos.close();
    }
    catch (FileNotFoundException ex)
    {
        ex.printStackTrace();
    }
    catch (java.io.IOException e)
    {
        e.printStackTrace();
    }
}

public HashMap<String, Integer> Load()
{
    HashMap<String, Integer> temp = null;

    try 
    {
        FileInputStream fis = openFileInput("Plog");
        ObjectInputStream ois = new ObjectInputStream(fis);
        temp = (HashMap<String, Integer>) ois.readObject();

    } 
    catch (FileNotFoundException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return null;
    } 
    catch (IOException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
    catch (ClassNotFoundException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return null;
    }

    return temp;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T04:40:49.240

`EOFException`表示您已到达流的末尾。我不知道您认为您在调试器中看到了什么，但流中没有要读取的对象。`catch(EOFException exc)`确实有效；此时您应该关闭流并退出读取循环。不要滥用`available()`作为流测试的结束：这不是它的用途。

# c++ - 我必须将数据设为私有吗？

> ID：15984292
> 
> 赞同：4
> 
> 时间：2013-04-13T04:37:19.943
> 
> 标签：c++, coding-style, private, public

我知道类中的数据应该是私有的，然后使用 getter 和 setter 来读取/修改它们。`student.scores.push_back(100)`但是比起直接使用省了一个成员函数是不是很麻烦。

```
class Student {
public:

    void addToScores(int inScore) {

        scores.push_back(inScore);
    }

private:

    vector<int> scores;
} 
```

简而言之，我很好奇人们在实践中实际做了什么，总是严格使用 getter 和 setter 的私有数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T04:51:20.840

成员函数的目的是公开一个接口。无需制作 getter 和 setter 或其他琐碎的函数，只需将成员已实现的接口移动到聚合容器对象。

如果`Student`应该允许客户随意操作`scores`，您应该创建`scores`一个公共成员并以简单的方式访问它。如果它应该是只有`push`、`pop`和的堆栈`top`，则使用`std::stack`接口适配器。如果只`push_back`允许，那么您可以实施`addToScores`. 但是，如果唯一的客户是您，并且您不担心`std::vector`接口的其他部分被滥用，那么实现新接口确实没有意义。

程序中的每个界面都应该经过深思熟虑的设计。由于标准接口（包括 C++ 默认赋值运算符）是“危险的”，因此添加 slapdash 接口作为一种习惯并不一定是一个好习惯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T04:40:32.803

在实践中，人们使用类来定义具有独立于其数据成员的新语义的新数据类型。既不使用访问器也不使用公共数据成员，而是提供成员函数来执行与新数据类型相关的任务，同时保持数据成员的不变量。

当然，有时人们编写的类只是数据的聚合，没有额外的语义。在这种情况下，一个`struct`填充公共成员是合适的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T08:31:58.707

使用 Get/Set 方法的基本原因之一是控制数据封装之外的输入类型。

如果您不想采用某些特定的输入类型，假设您可能不希望得分超出 [0,100] 区间的范围，那么您可以在 Set 方法中检查此条件，以便库用户无法进行不合逻辑的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T04:50:56.780

如果它是简单的读/写，您实际上不必将数据设为私有。但是，如果您需要对正在读取/写入的数据进行验证/条件，那么将其设为私有是有意义的。

# android - 如何在 android google tv 中播放嵌入视频

> ID：15984301
> 
> 赞同：0
> 
> 时间：2013-04-13T04:37:52.380
> 
> 标签：android, google-tv

我正在研究 android 谷歌电视项目。在我的项目中，我想从下面显示的 html 嵌入代码中播放视频：-

```
<embed type="application/x-shockwave-flash" src="http://www.desifreetv.com/channels/tomandjerry.swf" file="http://desifreetv.com/locked/xml-files/tomandjerry.xml" width="707" height="483" style="undefined" id="mpl" name="mpl" quality="high" allowfullscreen="true" wmode="opaque" menu="false"> 
```

我怎么玩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T18:13:39.047

如果您有本机应用程序并计划使用嵌入了上述代码段的 WebView，您将遇到问题，因为 WebView 不支持 Flash。如果您的应用程序是基于浏览器的应用程序，则支持 Flash，因此您应该能够将其嵌入到您的网页中。或者，查看该内容的提供者是否有不同格式的视频（例如，mp4 左右），然后您可以使用本机播放器。

# objective-c - Objective-C 错误处理

> ID：15984304
> 
> 赞同：0
> 
> 时间：2013-04-13T04:38:02.040
> 
> 标签：objective-c, error-handling, connection

任何人都知道当出现以下错误时我如何处理错误代码：

```
database_flag = [NSString stringWithContentsOfURL:database_flag_query encoding:NSASCIIStringEncoding error:&error]; 
```

要解释更多，请在我的代码下面找到基本上我想检查 mysql 是否有一个标志，如果标志是 1，然后我从数据库中获取流的 IP 地址，否则我使用本地一个商店。唯一的问题是当无法访问 mysql 服务器时程序卡住了！！

```
database_flag_query = [NSURL URLWithString:@"http://192.168.0.20/iqkradio_stream_ip_flag.php"];
database_flag = [NSString stringWithContentsOfURL:database_flag_query encoding:NSASCIIStringEncoding error:&error];

database_flag = [database_flag stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

if ([database_flag isEqualToString: @"1"])
{
    NSLog(@"URL flag is set");
    database_url_query = [NSURL URLWithString:@"http://192.168.0.20/iqkradio_stream_ip_url.php"];
    database_url = [NSString stringWithContentsOfURL:database_url_query encoding:NSASCIIStringEncoding error:&error];
    database_url = [database_url stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
    url1 = [NSURL URLWithString:[database_url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    NSLog(database_url);
}

else
{
    NSLog(@"URL flag is not set, Reverting to stored value");
    url1 = [NSURL URLWithString: [NSString stringWithFormat: @"http://radio.qkradio.com.au:8382/listen.mp3"]];
}

streamer = [[AudioStreamer alloc] initWithURL:url1]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:02:14.920

**编辑 - NSURLConnection 和超时 -**基于附加信息和下面的评论流，并将信息放在答案中（而不是长评论流）：

有关超时示例，请[在此处](https://stackoverflow.com/questions/1424608/nsurlconnection-timeout)查看此问题的已接受答案。对于 NSURLConnection 示例，请在[此处查看苹果文档](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html)

**一般错误处理 -**

以下链接可能会有所帮助-> [http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/ErrorHandling/ErrorHandling.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/ErrorHandling/ErrorHandling.html)。

“在你调用这个方法之前，你需要创建一个合适的指针，以便你可以传递它的地址：

```
NSError *anyError;
BOOL success = [receivedData writeToURL:someLocalFileURL
                                options:0
                                  error:&anyError];
if (!success) {
    NSLog(@"Write failed with error: %@", anyError);
    // present error to user
} 
```

如果发生错误，writeToURL:... 方法将返回 NO，并更新您的 anyError 指针以指向描述问题的错误对象。

在处理引用传递的错误时，重要的是要测试方法的返回值，看看是否发生了错误，如上所示。不要只是测试错误指针是否设置为指向错误。”

因此，对于您的问题，请尝试添加：

```
if(!database_flag)
{
    //call your error handling function
    [myFunction withError: error];
} 
```

在修剪之前`database_flag`。如果您的连接不起作用，那么您需要在继续执行`if([database_flag isEqualToString:...`代码之前对其进行处理。

如果这不能解决问题，您能否提供一些信息/日志语句，说明导致您的应用程序停止的错误在哪里/是什么？

希望有帮助。

# javascript - jPanelMenu 和 TweenMax/superscrollorama 之间的 jQuery 冲突

> ID：15984305
> 
> 赞同：0
> 
> 时间：2013-04-13T04:38:02.593
> 
> 标签：javascript, conflict, jquery, gsap

我正在尝试使用两个（如果考虑到第二个使用 2 个文件，则三个）不同的插件，jPanelMenu.js（做类似谷歌移动的菜单）和 Superscrollorama.js（与 TweenMax.js 一起工作），不幸的是它们是冲突，单独工作时都可以正常工作，但是当我将它们都放在页面上时，一切都崩溃了。我已经尝试使用 $.noConflict(); 和 jQuery.noConflict(); 以很多不同的方式，不成功。我设法做的最好的事情是让 scrollorama/tweenmax 工作。但是，jPanelMenu 仍然崩溃。

这是我的代码：

```
<script type="text/javascript" src="public/js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="public/js/jquery.jpanelmenu.min.js"></script>
<script type="text/javascript">
     jQuery.noConflict();

         $(document).ready(function () {
            var jPM = $.jPanelMenu({
                menu: '#menu',
                trigger: '.menu-trigger',
                easing: 'ease',
                duration: 250
            });
            jPM.close(true);
            jPM.on();
            jPM.trigger(onClick);
        });

</script>
<script type="text/javascript" src="public/js/TweenMax.min.js"></script>
<script type="text/javascript" src="public/js/jquery.superscrollorama.js"></script>
<script>
    jQuery(document).ready(function($) {
        var controller = jQuery.superscrollorama({
            playoutAnimations: true
        });
        controller.triggerCheckAnim();
        controller.addTween('.scroll-trigger',

        (new TimelineLite())
                .append([
                  // Scale Logo
                    TweenMax.fromTo(jQuery('#logo'), 1, 
                    {css:{width: '100%', padding:'15px 0 0 0'}, ease:Strong.easeInOut, immediateRender:true}, 
                    {css:{width: '59%', padding:'5px 0 0 0'}, ease:Strong.easeInOut})
                ]),0,0);

      });
</script> 
```

如果有人能帮我解决这个问题，我真的很感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T06:55:35.203

根据你给我的附加细节。您的问题不是 jQuery 和其他人之间的冲突，而只是`onClick`没有定义该函数。该`trigger`函数根据菜单的状态打开或关闭菜单，并接受一个`boolean`参数来指定操作是否会被动画化。

如果您不想在页面加载时打开菜单，只需删除`jPM.trigger(...);`调用即可。

# spring - Grails 请求映射自定义错误

> ID：15984317
> 
> 赞同：1
> 
> 时间：2013-04-13T04:40:23.473
> 
> 标签：spring, grails

我有一个使用来自 Spring Security 的请求映射的 Grails 完成的网络软件。我出于安全原因使用它们，以便用户无法访问管理区域，但它也用于我们的业务模型。我们有两个不同的用户角色。一种是高级，一种是高级加，而 PREMIUM_PLUS > PREMIUM。高级用户可以访问比高级用户更多的页面。如果高级用户想要访问只能由高级用户调用的页面，则会出现“无法访问”之类的错误，但我想要一条自定义消息，例如“立即升级到高级版”。

我可以轻松地为所有请求映射错误编辑模板，但也有一些受限页面没有人应该看到像“禁止访问”这样的消息最适合的地方。

有没有可能用两个不同的错误页面来做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:46:08.253

`LoginController`有`denied`显示`denied.gsp`. _ 您可以自定义控制器操作以检查是否需要显示升级页面或拒绝页面。

```
class LoginController  {
    def denied() {
        if (springSecurityService.isLoggedIn() &&
        authenticationTrustResolver.isRememberMe(SCH.context?.authentication)) {
            // have cookie but the page is guarded with IS_AUTHENTICATED_FULLY
            redirect action: 'full', params: params
        } else {
            //implement a method checking whatever you need to define that will display the upgrade
            if(mustShowUpgrade()) {
                render view: 'upgrade'
            }
        }
    }
} 
```

# google-bigquery - BigQuery - 错误随机播放

> ID：15984319
> 
> 赞同：1
> 
> 时间：2013-04-13T04:40:34.517
> 
> 标签：google-bigquery

我有一个大约 5M 行的表。请注意，这只是一个 poc。最终，我们将需要处于 TB 范围内。我正在做一个自我加入来寻找产品的排列以进行市场篮子分析。

我需要找到组合在一个篮子中出现的次数、出现次数与总篮子的比率以及该项目在所有篮子中出现的次数。这是相当标准的。BigQuery 不支持在另一个选择的谓词中选择，所以我想我需要创建另一个连接。这就是我想出的-

```
select twoItem.upc1,twoItem.upc2,twoItem.twoItemOccurrences, totalUpc.totalUpcCount
from
(
    select purchase1.upc as upc1,purchase2.upc as upc2,count(upc1) as twoItemOccurrences
    from
    conagra.purchase as purchase1
    join each conagra.purchase as purchase2
    on purchase1.upc = purchase2.upc
    group by upc1,upc2
) as twoItem
JOIN EACH 
(
    select purchase3.upc as upc3, count(*) as totalUpcCount
    from conagra.purchase as purchase3
    group by upc3
) as totalUpc
on totalUpc.upc3 = twoItem.upc1
LIMIT 50; 
```

我收到以下错误：

> `SHUFFLE BY`只能应用于可并行化查询，但查询不可并行化：`(SELECT * FROM (SELECT [purchase3.upc] AS [upc3], COUNT(*) AS [totalUpcCount]...`

也许是未发布的限制？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T18:35:38.523

尝试`GROUP EACH BY`在您的内部查询上运行这些。我们将改进此类查询的响应消息。

# php - 需要来自不同托管服务器的动态新闻

> ID：15984321
> 
> 赞同：0
> 
> 时间：2013-04-13T04:40:49.830
> 
> 标签：php, feed

我有一个简单的 php 网站，我想在主页上显示我的公司新闻。我不想写html并上传到服务器来显示新闻。是否有任何网站为我们提供基本的 CMS 以创建新闻并为我们提供可以集成到我的网站上的短代码？每当我需要添加新闻时，我都会在他们的网站上添加，它会反映在我的网站主页上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T04:49:51.037

最好的方法是在 Wordpress 中构建整个站点，或者在 sitename.com/news 等子文件夹中构建新闻部分。它可能是最完整的新闻/博客引擎，而且很容易上手。

如果您将其托管在子文件夹中，并且仍想引用 Wordpress 之外的文章，请确保将其包含在您的主页顶部：

```
<?php
   // Include Wordpress 
   define('WP_USE_THEMES', false);
   require('news/wp-blog-header.php');
   query_posts('showposts=2');
?> 
```

只需确保将 require() 更改为指向您的目录，并将 showposts 计数更改为您要显示的文章数。

如果您不熟悉，Wordpress 有很多其他很棒的资源来学习如何使用它。 [http://codex.wordpress.org/](http://codex.wordpress.org/)

# ios - 创建终身唯一ID的替代方法

> ID：15984325
> 
> 赞同：10
> 
> 时间：2013-04-13T04:41:37.973
> 
> 标签：ios, udid

我想为 iphone/ipad 设备创建 UDID，它将保持不变，所以请告诉我是否有人对此有想法？

我搜索了谷歌和堆栈溢出，但没有得到解决方案。

也有人建议使用 OpenUDID 和 CFUUID，但是当用户删除并重新安装您的应用程序时，CFUUID 会有所不同。但是我想为每个应用程序使用相同的 UDID，该 UDID 将在第一次生成，并且在每个应用程序的每个设备的生命周期内应该保持不变。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T04:48:01.993

**编辑 2**

由于 iOS 升级，并且根据新文档`identifierForVendor`，重新安装应用程序时不会保留价值。我在[***这个链接***](https://stackoverflow.com/questions/17677655/how-to-generate-unique-identifier-which-should-work-in-all-ios-versions)上看到了答案。这可能以一种或其他方式有所帮助。请注意，即使系统重置，也只有 UDID 会保留，因此即使在系统重置时，对于寻求终身 UDID 的开发人员来说，这个答案可能会成为限制。除此之外，提到的答案似乎很有用。

也看[***这里的摘要***](http://www.doubleencore.com/2013/04/unique-identifiers/)。

* * *

`identifierForVendor`可从[`UIDevice`类参考中获得。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html)

> 对于来自同一供应商并在同一设备上运行的应用，此属性的值相同。

```
[[UIDevice currentDevice] identifierForVendor].UUIDString 
```

**注意：** *在 iOS 6.0 及更高版本中可用。*

**编辑 1**根据[UIDevice 类参考的新版本](https://developer.apple.com/library/ios/documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html#//apple_ref/occ/instp/UIDevice/identifierForVendor)

> 当应用程序（或来自同一供应商的另一个应用程序）安装在 iOS 设备上时，此属性中的值保持不变。当用户从设备中删除该供应商的所有应用程序并随后重新安装其中一个或多个应用程序时，该值会发生变化。因此，如果您的应用程序将此属性的值存储在任何地方，您应该优雅地处理标识符更改的情况。

* * *

**编辑**

我希望你在[这个受欢迎的链接上看到](https://stackoverflow.com/questions/6993325/uidevice-uniqueidentifier-deprecated-what-to-do-now/7946812#7946812)

1）*MAC+CFBundleIdentifier的MD5*

```
[[UIDevice currentDevice] uniqueDeviceIdentifier] 
```

每个应用程序都将保持相同，但每个应用程序都不同。如果您删除并重新安装您的应用程序，每个应用程序将是相同的。

2) *MAC的MD5*

```
[[UIDevice currentDevice] uniqueGlobalDeviceIdentifier] 
```

对于来自同一设备的所有应用程序，这将保持不变。如果您删除并重新安装您的应用程序，则每台设备都是相同的。

**编辑 3**

注意：iOS 7 中的此解决方案不再有用，因为 iOS7 中不再提供 uniqueIdentifier。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-30T17:38:20.057

请务必注意 UDID 和 UUID 之间的区别。

UDID“唯一设备 ID”是特定于硬件的。对于特定设备，它永远不会改变。出于这个原因，它已经成为一个隐私问题，Apple 正在阻止尝试使用它的应用程序。因此，Apple 生成了一个可选择退出的“设备 ID”哈希，特别是用于广告使用。这个新的 ID 哈希称为 IFA，在 iOS 6.0+ 中可用。

UUID“通用唯一ID”不是硬件特定的。它是用于标识设备的哈希值；但不是一个绝对值。例如PhoneGap根据设备属性生成UUID；这就是您执行 device.uuid 时得到的结果。如果您删除应用程序并重新安装，您将获得一个新的 id 哈希。UUID 没有被 Apple 阻止。

我认为最好的解决方案是使用 IFA，将 OpenUDID 作为 iOS < 6.0 的备份。

这是我们使用的代码。如果 IFA 不可用，请获取 OpenUDID。[[您必须安装 OpenUDID，在此处阅读更多信息，https://github.com/ylechelle/OpenUDID。]]

```
NSString* uuid = nil;
if ([[UIDevice currentDevice] respondsToSelector:@selector(identifierForVendor)]) {
    // IOS 6 new Unique Identifier implementation, IFA
    uuid = [[[UIDevice currentDevice] identifierForVendor] UUIDString];
} else {
    // Before iOS6 (or if IFA disabled) you shoud use a custom implementation for uuid
    // Here I use OpenUDID (you have to import it into your project)
    // https://github.com/ylechelle/OpenUDID
    NSString* openUDID = [OpenUDID value];
    uuid = [OpenUDID value];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T06:04:47.363

第一次生成 UUID（`CFUUIDRef`也许是使用 API），并将其存储在钥匙串中。

# events - gwt canvas - 以完全不同的方式处理事件

> ID：15984328
> 
> 赞同：1
> 
> 时间：2013-04-13T04:42:31.100
> 
> 标签：events, gwt, canvas, handler

Gwt HTML5 Canvas 包装器可以响应鼠标和键盘事件，它绑定到 5 - 6 种不同的事件，我的问题是，可以定义全新的事件系统，例如 CanvasEvent （以及相关的处理程序 CanvasEventHandler 扩展到 GwtEvent 等），将此绑定到画布对象，然后使用处理程序接口方法以不同方式处理所有事件，例如 onDraw()、onDrag()、onMove()、onSelect() 等。

我对 GWT 事件系统不太清楚，但我想知道这是否可能在没有个性附加单独的事件处理程序以形成处理我的问题的逻辑的情况下，我可以将所有可能的事件作为一个合并对象访问并根据条件触发自定义事件。最好的方法是什么，有 GWT 自定义事件的线程，但它们包括发件人，而在我的情况下，发件人已经存在（画布）

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T06:08:05.123

当然 - 请记住，所有 GwtEvent 对象都是完全人为的，并且基于从本机 JavaScript 触发的事件。该 JavaScript 事件对象（通过 via 传入`onBrowserEvent`）根据原始对象的详细信息被包装为 a`ClickEvent`或 a ，然后通过内部实例`KeyDownEvent`触发。`HandlerManager`同样，你可以监听 a `MouseDownEvent`，设置一些状态，然后如果 a`MouseMoveEvent`发生，触发你自己的`CanvasDrag`事件。一旦 a 发生，您可能会停止收听这些移动事件`MouseUpEvent`，然后您会发出类似`CanvasDropEvent`. 如果不是立即`MouseUpEvent`发生而没有移动，您可以触发一个`CanvasSelectEvent`（或者您可能对该选择事件有其他想法）。

您随后声明的这些新事件类型中的每一个都可能包含有关正在发生的任何事情的细节。例如，虽然 MouseMoveEvent 仅具有鼠标悬停的元素和 x/y 坐标，但您可能指示在页面周围拖动的*内容。*这可能是最后一次单击的形状，甚至是它所代表的数据。

是的，“发件人”或来源已经存在，但如果您公开某种方法来添加处理程序等`addCanvasDragHandler`，它会更容易使用。这*不是*必需的 - 您的代码的所有用户都可以使用`addHandler`，但它确实使小部件是否支持相关事件变得有点模棱两可。然后，您将调用`fireEvent`画布对象以使该事件类型的所有处理程序都侦听。

或者，您可以创建一个包含内部`Canvas`小部件的新类 - 可能是一个`Composite`对象或只是实现的东西`IsWidget`（Canvas 有一个私有构造函数，因此您不能对其进行子类化）。这将使您能够添加自己的特定处理程序，并保留自己的 HandlerManager/EventBus 来跟踪您关注的事件。

# iphone - 定期从 Phonegap Iphone 应用程序中的网站更改背景图像

> ID：15984329
> 
> 赞同：-1
> 
> 时间：2013-04-13T04:42:46.057
> 
> 标签：iphone, cordova

我是 iPhone 开发和使用 PhoneGap 框架制作应用程序的新手。

在主屏幕中，我使用了带有 iPhone 样式图标的网格，使其类似于 sprigboard 布局，并且此主屏幕主体标签有一个背景图像。

我想要做的是这个背景图片应该定期更改（每周一次或每月一次），在应用程序应该从网站获取新图片的时间间隔之后可能来自同一个 url，并存储在本地存储中的某个地方，所以直到应用程序应将此图像显示为主屏幕背景的下一个间隔。我可以使用 JSON 来获取图像。

我不想使用任何原生 IOS 功能。

如何使用 PhoneGap 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T06:15:33.610

您可能希望使用本地文件存储系统来存储图像。查看 [http://docs.phonegap.com/en/2.6.0/cordova_file_file.md.html#FileTransfer](http://docs.phonegap.com/en/2.6.0/cordova_file_file.md.html#FileTransfer)

您可以下载文件并将文件名存储在 Localstorage -

编写一个javascript函数，检查文件名是否被存储，如果是，则使用Jquery等设置背景图像。

也许看看这个 [http://www.raymondcamden.com/index.cfm/2012/1/19/Downloading-files-to-a-PhoneGap-application--Part-1](http://www.raymondcamden.com/index.cfm/2012/1/19/Downloading-files-to-a-PhoneGap-application--Part-1)

我最终首先保存了一个虚拟文件，这样我就可以获得文件将存储在其中的文件夹的 URL 的完整路径（与应用程序的每次安装不同）

# c++ - 虚拟多重继承和指针

> ID：15984330
> 
> 赞同：0
> 
> 时间：2013-04-13T04:43:01.790
> 
> 标签：c++

给定以下类层次结构：

```
class A {
int x;
public:
A(int X) : x(X) {}
void setX(int x) { this->x = x; }
};

class B : public virtual  A {
int y;
public:
B(int X, int Y) : A(X), y(Y) {}
};

class C : public virtual A {
int z;
public:
C(int X, int Z) : A(X), z(Z) {}
};

class D : public C, public B {
public:
D(int x, int y, int z) : A(x), C(x,z), B(x,y) {}
}; 
```

以及以下主要内容：

```
int main (void)
{
D x(2,3,4);
A* temp1 = &x;
B* temp2 = &x;
C* temp3 = &x;
} 
```

似乎 temp1、temp2 和 temp3 都指向不同的地址。B 和 C 不应该共享同一个 A 对象吗？毕竟，每个 C 和 B 对象也是一个 A 所以指针应该首先“看到” A 对象.. 不是吗？此外，C 指针包含 X 的地址。它是一个 D 对象。为什么？

这是内存映射：

```
&x      0x0036f828 {...}    D *
temp1   0x0036f838 {x=5 }   A *
temp2   0x0036f830 {y=3 }   B *
temp3   0x0036f828 {z=4 }   C * 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:10:02.353

如果使用普通结构写出来，这就是事情的样子：

```
struct A {
  int x;
};

struct B {
  A *ap;
  int y;
};

struct C {
  A *ap;
  int z;
};

struct D {
  C c;
  B b;
  A a;
};

int main (void)
{
  D x;
  A* temp1 = &x.a;
  B* temp2 = &x.b;
  C* temp3 = &x.c;
} 
```

由于`B`并`C`使用虚拟继承，它们只包含指向基的指针，而不包含实际对象。可以看到，因为`c`是 的开头`D`，所以它们的地址相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:47:02.043

你说得对，B 和 C 需要共享同一个 A 对象。这正是这里会发生的事情。您看到的地址实际上是每个类唯一的虚拟表的地址。在虚拟继承的情况下，每个类的虚拟表都会有一个指向虚拟基类的指针，在这种情况下，是对象 A。

所以类 B 和 C 的虚拟表都有一个指针，每个指针都指向对象 A 的相同地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T04:55:27.483

这只是对象[在内存中的表示](http://www.phpcompiler.org/articles/virtualinheritance.html)方式。

所以你的对象看起来像这样：

```
+ 0x0036f828
- D
- int z (C)
- int y (B) 
- int x (A) 
```

C++ 转换只是给出了对象开头的偏移量。
因此，您可以看到偏移量只是**A,B,C**类的整数大小（因为它们包含这些）和**B,C**类的虚拟表。
而**D**没有成员，所以它的偏移量是 0。

请注意，C++ 编译器按照您实际编写成员和基类的顺序设置内存布局。

所以如果你改变 D 中基类的顺序，你会得到不同的结果：

```
class D : public B, public C 
```

现在**B**将成为 D 之后布局中的第一个类。

# php - 组件安装时在 joomla 3.0 中安装插件

> ID：15984335
> 
> 赞同：0
> 
> 时间：2013-04-13T04:43:58.173
> 
> 标签：php, joomla, joomla3.0

我正在尝试使用 joomla 3.0 中的插件创建新组件

我成功安装了组件。我的要求是安装带有组件的插件，但安装时出现了一些问题。

为此，我创建了插件 xml。

在主 manifest.xml 文件中，我编写了这段代码。

```
<plugins>
     <plugin plugin="switcher"  group="system">
         <files folder="plg_system_switcher">
        <file>switcher.php</file>
        <file>switcher.xml</file>
    </files>
     </plugin>
</plugins> 
```

我在安装后创建脚本文件，因为我编写了这段代码。

```
jimport('joomla.utilities.xmlelement');
jimport('joomla.utilities.simplexml');
$plugins = $this->manifest->plugins; 
```

我想要来自 $this->manifest 的插件信息，但清单不返回任何像插件这样的对象。

请帮忙，

提前致谢。

马尤尔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T18:38:22.113

我不确定我理解你是否正确。但是，如果您想将组件与插件一起安装，通常只需将其安装为一个包。为此，您为组件和插件创建一个常规安装包。因此，每个都可以独立于另一个安装，具有自己的清单和所有内容。

然后，您可以使用这两个 zip 文件创建第三个 zip 文件以及一个名为 plg_extensionname.xml 的附加清单文件。此清单文件如下所示：

```
<?xml version="1.0" encoding="UTF-8" ?>
<extension type="package" version="3.0" method="upgrade">
    <name>Extensionname Package</name>
    <creationDate>2013-04-13</creationDate>
    <author>Author Name</author>
    <authorEmail>dummy@example.com</authorEmail>
    <authorUrl>http://www.example.com</authorUrl>
    <license>Creative Commons 3.0</license>
    <version>1.0</version>
    <packagename>extensionname</packagename>
    <description>Description for Extension</description>
    <files>
        <file type="component" id="com_extensionname" >com_extensionname.zip</file>
        <file type="plugin" id="plg_extensionname">plg_extensionname.zip</file>
    </files>
</extension> 
```

Joomla 会自动将两个扩展安装在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:51:50.033

嗨，我解决了这个问题，获取插件的 tmp 路径并调用安装程序类。全部在脚本文件中。这是代码：

```
 public function install($adapter){
        $installer = JInstaller::getInstance();
        $path = $installer->getPath('source');
        $plugin_dir = $path.'/my_plugin_dir';

        $plugin_installer = new JInstaller();
        $plugin_installer->install($plugin_dir);
} 
```

如果路径存在、包是否有效等等，还可以执行一些额外的检查......

# java - 在maven中，如果我创建一个子包，主包是如何引用的？

> ID：15984336
> 
> 赞同：0
> 
> 时间：2013-04-13T04:44:20.890
> 
> 标签：java, maven, intellij-idea

我将 IntelliJ 与 Maven 项目一起使用。我是 IntelliJ 的新手（而且几乎是 Maven）。我创建了一个新项目并且正在构建没有问题，但是我注意到当我在 java/ 下创建一个新的子包时，我无法导入在 java/ 中声明的类/接口。

我需要在子包文件中显式声明包名吗？如果没有在 pom 文件中指定，这个包路径默认是什么？或者这是groupId？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T04:58:34.233

中指定的`artifactId`和`groupId`值`pom.xml`与实际类无关。

它们用于帮助您对整个项目（jar）进行分类，并且对项目内的类或包没有影响。

Maven默认文件夹结构：

```
src
|
|--main
|  |
|  |--java
|  |  |
|  |  |--com
|  |  |  |
|  |  |  |--mypackage
|  |  |     |
|  |  |     |--MyClassA.java
|  |  |     |
|  |  |     |--submypackage
|  |  |        |
|  |  |        |--SomeOtherClass.java
|  |  |--net
|  |     |
|  |     |--netpackage
|  |        |
|  |        |--MyNetClassA.java
|  |
|  |--resources
|
|--test
   |
   |--java
   |  |
   |  |--com
   |     |
   |     |--anotherpackage
   |        |
   |        |--AnotherClassTest.java
   |
   |--resources 
```

如果你想，从`MyNetClassA`，使用`MyClassA`，你会得到类似的东西：

`MyNetClassA.java`文件内容：

```
package net.netpackage;

import com.mypackage.MyClassA;

public class MyNetClassA {
    MyClassA myField;
} 
```

同样的事情也适用于**子包**：如果你想，从`MyClassA`，使用`SomeOtherClass`，你会有类似的东西：

`MyClassA.java`文件内容：

```
package com.mypackage;

import com.mypackage.subpackage.SomeOtherClass;

public class MyClassA {
    SomeOtherClass myOtherField;
} 
```

**一个包是否在另一个包下面声明并不重要。你称它为“子包”，但对于 Java，它只是一个不同的包。**

此外， 中的任何类都不能访问 中的任何类`src/test/java`（例如） 。`AnotherClassTest``src/main/java`

另一方面， 中的任何类`src/main/java` **都**可以访问`src/test/java`。

# android - 如何使用点击列表视图中的项目来更新数量

> ID：15984338
> 
> 赞同：1
> 
> 时间：2013-04-13T04:44:42.670
> 
> 标签：android, android-listview

我正在编写一个应用程序，我需要在 ListView 中使用 Tap 来更新项目的数量，我已经尝试了几次但仍然无法解决这个问题，请帮助我::

**CartAdapter.java::**

```
 public View getView(final int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    View vi = convertView;
    if (convertView == null)
        vi = inflater.inflate(R.layout.listrow_cart, null);
        vi.setClickable(true);
        vi.setFocusable(true);
        vi.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            //here i want to put code to update product quantity
        }
    }); 
```

要*删除一个项目*，我使用以下代码：

```
 mImgBtnDelete = (ImageButton) vi
            .findViewById(R.id.mImgBtnDelete);
    mImgBtnDelete.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            Constants.mItem_Detail.remove(position);
            notifyDataSetChanged();
            Intent mInViewCartRefresh = new Intent(activity,
                    CartActivity.class);
            activity.startActivity(mInViewCartRefresh);
            activity.finish();

        }
    });

   HashMap<String, String> item = new HashMap<String, String>();
    item = Constants.mItem_Detail.get(position); 
```

**listrow_activity.xml：**

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:layout_marginBottom="5dp"
android:layout_marginLeft="10dp"
android:layout_marginRight="10dp"
android:layout_marginTop="5dp"
android:background="@drawable/btn_background"
android:gravity="center"
android:orientation="horizontal"
android:padding="5dip" >

<TextView
    android:id="@+id/total"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/qty"
    android:layout_alignBottom="@+id/qty"
    android:layout_alignLeft="@+id/TextView02"
    android:text="46.50"
    android:textColor="#343438"
    android:textAppearance="?android:attr/textAppearanceSmall" />

<TextView
    android:id="@+id/qty"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/cost"
    android:layout_alignBottom="@+id/cost"
    android:layout_alignLeft="@+id/TextView01"
    android:layout_marginLeft="22dp"
    android:text="3"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#343438" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/title"
    android:layout_marginLeft="30dp"
    android:text="Cost"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#343434"
    android:textStyle="bold" />

<TextView
    android:id="@+id/TextView01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/cost"
    android:layout_centerHorizontal="true"
    android:text="Quantity"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#343434"
    android:textStyle="bold" />

<TextView
    android:id="@+id/title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:text="Item Name 1"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="#a60704" />

<TextView
    android:id="@+id/TextView02"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/title"
    android:layout_marginRight="30dp"
    android:text="Total"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#343434"
    android:textStyle="bold" />

<TextView
    android:id="@+id/cost"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView1"
    android:layout_below="@+id/textView1"
    android:text="15.50"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#343438" />

<ImageButton
    android:id="@+id/mImgBtnDelete"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/TextView01"
    android:layout_below="@+id/qty"
    android:focusable="false"
    android:background="@drawable/remove_btn" />

  </RelativeLayout> 
```

**注意：**我允许用户在*Items.java中输入他们愿意的数量*

**常量.java::**

```
 public class Constants {
public static ArrayList<HashMap<String, String>> mItem_Detail = new ArrayList<HashMap<String, String>>();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T05:45:36.733

改变你的方法如下：

```
public View getView(final int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    View vi = convertView;
    if (convertView == null)
        vi = inflater.inflate(R.layout.listrow_cart, null);
        vi.setClickable(true);
        vi.setFocusable(true);
        vi.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            HashMap<String, String> item= mItem_Detail.get(position);
            item.put(KEY_TO_BE_CHANGED, newValue);
            mItem_Detail.set(position, item);
            notifyDataSetInvalidated();

        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T05:44:42.273

`intent.putExtra("test", mItem_Detail);`方法的第一个参数是值的名称，后跟对象。

# linux - 判断所有用户的shell是登录还是非登录shell

> ID：15984344
> 
> 赞同：0
> 
> 时间：2013-04-13T04:45:34.943
> 
> 标签：linux, shell, unix

我正在尝试获取当前登录 linux 机器的所有用户的 shell，无论是登录 shell 还是非登录 shell。我知道如何为我自己获取此信息，但如何为所有登录机器的用户执行此操作...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T06:20:52.310

如果您想查看有关其他用户的信息，我假设您对此框具有 root 权限。否则你的问题从一开始就没有实际意义。

如果您有 root，您可以运行`ps -ef|grep $USERNAME`进程名称并将其与 /etc/shells 中的 shell 进行比较。在正常情况下，每个用户都会有一个。但是，如果有人在 ksh 或其他一些 shell 组合中启动 bash，那就是另一个问题了。

或者，如果您只想知道其他用户的默认 shell 是什么，此命令可以提供帮助：

```
cat /etc/passwd | awk -F ":" '{print $7}' 
```

也许，如果您能告诉我们为什么了解每个用户正在运行的 shell 对您很重要，您可以获得更好的答案

# java - 尝试从数组中写入对象时出现不可序列化的异常

> ID：15984345
> 
> 赞同：1
> 
> 时间：2013-04-13T04:45:46.487
> 
> 标签：java, exception

我在运行应用程序文件尝试将对象写入 .dat 文件时收到 NotSerializableException。

```
 try{
        Person[] personList = new Person[3];
        personList[0] = new TeamLeader(8, "Mike Johnson", 29);
        personList[1] = new Engineer(0.4,"Russell Sanders", 22);
        personList[2] = new Engineer(0.7, "Steven Peterson", 25);
        out = new ObjectOutputStream(new FileOutputStream("persons.dat"));
        for(int i = 0; i < personList.length; i++) {
            out.writeObject(personList[i]);//error line 85
        }
        //out.writeObject(personList);
    }

    catch(IOException e) {
        System.out.println("Problem writing file");
        e.printStackTrace();
    } 
```

错误

```
java.io.NotSerializableException: TeamLeader
     at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1180)
     at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java: 346)
     at CharlieBrownP6.main(CharlieBrownP6.java: 85) 
```

错误继续关于写入因相同错误而中止

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T04:49:57.523

调用 writeObject 的对象必须实现`Serializable`接口（[参考](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)）。

# php - 生成零 php 的月份

> ID：15984349
> 
> 赞同：2
> 
> 时间：2013-04-13T04:47:00.247
> 
> 标签：php, generator

我怎样才能生成带零的月份，比如`01-12`.

这是我的代码：

```
<?php for($m = 1;$m <= 12; $m++){ $month =  date("F", mktime(0, 0, 0, $m));?>                               
<li><a href="<?php echo site_url('agenda/'.$tgl[0].'/'.$m);?>"><?php echo $month;?></a></li><?php } ?> 
```

输出 url 仍然是`1-12`. 我希望它显示为`01-12`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T04:52:53.693

利用`sprintf`

```
<?php echo sprintf('%02d', $month); ?> 
```

在你的片段中

```
<?php for($m = 1;$m <= 12; $m++): ?>    
    <li>
        <a href="<?php echo site_url("agenda/${tgl[0]}/" . sprintf('%02d', $m)); ?>">
            <?php echo date("F", mktime(0, 0, 0, $m)); ?>
        </a>
    </li>
<?php endfor; ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T06:46:21.567

如何使用`str_pad` 它将用字符'0'填充字符串到长度为2。

```
<?php 
for($m = 1;$m <= 12; $m++) { 
  $month = str_pad($m, 2, '0', STR_PAD_LEFT);
}
?> 
```

[http://php.net/manual/en/function.str-pad.php](http://php.net/manual/en/function.str-pad.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T04:49:46.073

```
<?php for($m = 1;$m <= 12; $m++){ $month =  date("F", mktime(0, 0, 0, $m)); if ($month < 10) $month = "0".$month; ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T04:51:38.997

使用`sprintf()`你可以实现这种格式，

```
<?php echo sprintf("%02d",$month); ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T04:52:22.630

尝试

```
$month = date('m',mktime(0, 0, 0, $m));  //HERE give 'm' option 
```

" **m** " 月份的数字表示，前导零从 01 到 12

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-31T10:56:19.997

短而快：（sprintf 很贵）

```
 $month = ($m = date('m')) < 10 ? '0' . $m : $m; 
```

# eclipse - IT 公司使用较多的是 NetBeans 还是 Eclipse？

> ID：15984352
> 
> 赞同：9
> 
> 时间：2013-04-13T04:47:27.420
> 
> 标签：eclipse, netbeans, ide

我是 Java 新手。我参加了一个使用 NetBeans 的入门课程，但我注意到我的一些同学正在使用 Eclipse。据我了解，Eclipse 是 IT 公司中流行的 IDE。
我的问题是，作为一名新程序员，我应该继续使用 NetBeans 还是切换到 Eclipse？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-13T05:16:35.163

你又忘记了一个：IntelliJ。

它们都是不同的，没有单一的“最好的”，例如每个都有另一个没有的功能。

我的个人意见：

*   Eclipse 可能是最*开放*的。它的开发非常积极。到目前为止，这是我工作过的所有 4 家公司的事实上的标准。Eclipse 是完全免费的。

*   IntelliJ 有点*智能*。使用起来真的很有趣，但并非所有功能都在社区版中可用。我评估它是因为有人声称一项研究表明它可以让你的工作效率提高 10%，但我还没有看到这项研究本身。我认为 IntelliJ 很棒，但我已经习惯了 Eclipse，所以很难切换。

*   不幸的是，我什至从未见过 NetBeans。

考虑到这些点，Eclipse*似乎*是最安全的选择，因为它在我过去的工作场所很受欢迎，并且具有开放和自由的性质。但是您的里程可能会有所不同。

请记住，Eclipse/NetBeans/IntelliJ 都只是工具。不管你选择哪一个都没有关系，最重要的是你会编码，并且编码得好。使用使您最有效率的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T04:53:21.653

老实说，我认为两者都同样普遍。一旦你学会了一个，切换到另一个并不是什么大不了的事。与我一起工作的人有自己的偏好，而公司没有偏好——与我们合作的承包公司也没有偏好。对每个人来说，他自己的政策似乎都是相当标准的。话虽如此，以我的经验，IDE 的选择有时是由手头的问题定义的（易用性、用于特定目的的不同插件等）。

底线 - 学习两者。这并不难做到，无论如何你最终可能会同时使用这两种方法。

# lazarus - 关于 Lazarus 上的 ICS

> ID：15984357
> 
> 赞同：1
> 
> 时间：2013-04-13T04:48:52.270
> 
> 标签：lazarus

Lazarus 中的**[ICS](http://www.overbyte.be)**是否已安装并在所有平台上都可以正常工作？
我在某处读到 Linux 存在问题。这个问题解决了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T07:19:39.243

我在 2005 年将 ICS 移植到 Free Pascal，但我从未维护过它，因为我需要 SSL，当时它仍然是一种付费选项。一直到 Delphi v1 的向后兼容性也非常令人沮丧。

当时我主要在控制台级别工作（因为我的目标是服务器），但最后的尝试表明设计时组件也可以工作。

当前状态未知，但当时 Francois 合并了大多数修复。不过那是7年前的事了。我的猜测是一个死在羊毛搬运工身上的人可以在几天内完成。FPC 比以往任何时候都更加兼容。

[我在http://www.stack.nl/~marcov/ics.html](http://www.stack.nl/~marcov/ics.html)保留了一个小笔记页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-01T14:41:52.943

我建议尝试[Indy 项目](http://www.indyproject.org/index.en.aspx)中的 Indy Components 。它们在 Linux、Windowd 和 FreeBSD 下运行良好。

# c++ - 参数中 char* 和 strncpy 值之间的差异

> ID：15984372
> 
> 赞同：-1
> 
> 时间：2013-04-13T04:50:34.467
> 
> 标签：c++

我有函数，可以保存参数中的值。而且我必须实现两种方式，接受输入 - 作为 a`char*`然后通过`strncpy`。

IE： `a . Add("123456/7890", "John", "Doe", "2000-01-01", "Main street", "Seattle");`

它工作正常，直到我使用 strncpy：

```
bool status;
char lID[12], lDate[12], lName[50], lSurname[50], lStreet[50], lCity[50];  

strncpy(lID, "123456/7890", sizeof ( lID));
strncpy(lName, "John", sizeof ( lName));
strncpy(lSurname, "Doe", sizeof ( lSurname));
strncpy(lDate, "2000-01-01", sizeof ( lDate));
strncpy(lStreet, "Main street", sizeof ( lStreet));
strncpy(lCity, "Seattle", sizeof ( lCity));
status = c . Add(lID, lName, lSurname, lDate, lStreet, lCity);
//is true 

strncpy(lID, "987654/3210", sizeof ( lID));
strncpy(lName, "Freddy", sizeof ( lName));
strncpy(lSurname, "Kruger", sizeof ( lSurname));
strncpy(lDate, "2001-02-03", sizeof ( lDate));
strncpy(lStreet, "Elm street", sizeof ( lStreet));
strncpy(lCity, "Sacramento", sizeof ( lCity));
// notice, that I don't even save it at this point

strncpy(lID, "123456/7890", sizeof ( lID));
strncpy(lDate, "2002-12-05", sizeof ( lDate));
strncpy(lStreet, "Sunset boulevard", sizeof ( lStreet));
strncpy(lCity, "Los Angeles", sizeof ( lCity));
status = c . Resettle(lID, lDate, lStreet, lCity);

status = c . Print(cout, "123456/7890");
//is true 
```

此时我想打印出 ID 123456/7890 的值...所以 Name:John, Surname:Doe 等 Neverthless 它打印出值，这些值被保存为最后一个：

```
123456/7890 Freddy Kruger
2002-12-05 Sunset boulevard Los Angeles
2002-12-05 Sunset boulevard Los Angeles 
```

我`Add`的声明为：

```
 bool Add(const char * id,
        const char * name,
        const char * surname,
        const char * date,
        const char * street,
        const char * city); 
```

`Resettle`函数声明类似于`Add`，它只是不接受 name 和 surname 参数。所有值都保存到`char **`数组中。

您能否建议我，如何处理这种情况，以便能够正确接受两种输入？

Ps：对于`char*`输入，整个程序都可以正常工作，所以我不希望那里有任何错误.. Pps：请不要建议我使用字符串或我在这里不使用的任何其他结构 - 我的进口非常有限，因此我使用 char* 和其他东西......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T04:55:43.913

我认为您不应该在这里使用 sizeof 。strncpy 需要字符串的长度（从目标字符串复制到源字符串的字符数）。

sizeof 是指针的大小（例如 sizrof(IID) = 地址大小，我的系统是 4）。

我认为你需要 strlen()。此外，这需要在源指针上调用，而不是目标指针。

```
strncpy(lID, "987654/3210", strlen ("987654/3210")); 
```

[确保 IID 足够长来复制字符串，否则可能会出现缓冲区溢出问题]

读取[char * strncpy ( char * destination, const char * source, size_t num );](http://www.cplusplus.com/reference/cstring/strncpy/) ， 和

> 从字符串复制字符 将源的前 num 个字符复制到目标。如果在复制 num 个字符之前找到源 C 字符串的结尾（由空字符表示），则用零填充目标，直到总共写入了 num 个字符。

感谢@JonathanLeffler：（*strlen() 意味着数据不会以空值终止。这很糟糕。至少复制 strlen() + 1 个字节以获得空终止符*）

**注意：**如果 source 长于 num，则不会在 destination 末尾隐式附加空字符（因此，在这种情况下，destination 可能不是以空结尾的 C 字符串）。

另请阅读：[size_t strlen ( const char * str );](http://www.cplusplus.com/reference/cstring/strlen/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T05:07:00.013

问题不在于`strncpy()`操作。它在您没有向我们展示的材料中：

```
c.Add()
c.Resettle()
c.Print() 
```

其中一个或多个存在问题，但由于我们还看不到它们，我们无法帮助您调试它们。

* * *

### 示范`strncpy()`

[在对voodoogiant](https://stackoverflow.com/users/193418/voodoogiant)的[回答](https://stackoverflow.com/a/15984395/15168)`strncpy()`的评论中讨论了 的行为。这是一个演示：

```
strncpy(target, "string", strlen("string")); 
```

不会以空值终止输出：

```
#include <string.h>
#include <stdio.h>

int main(void)
{
    char buffer[32];

    memset(buffer, 'X', sizeof(buffer));
    printf("Before: %.*s\n", (int)sizeof(buffer), buffer);
    strncpy(buffer, "123456/7890", strlen("123456/7890"));
    printf("After:  %.*s\n", (int)sizeof(buffer), buffer);
    return(0);
} 
```

输出：

```
Before: XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
After:  123456/7890XXXXXXXXXXXXXXXXXXXXX 
```

（是的，我很清楚`memset()`不会终止缓冲区；在这个例子中不需要，因为打印是仔细完成的。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T05:00:11.287

因为我们不知道`lID`等人的数据类型。因此`sizeof`很难评论。除了为什么不使用`string`STL 的容器

# mule - 如何获取 Mule 实例的生命周期状态？

> ID：15984375
> 
> 赞同：1
> 
> 时间：2013-04-13T04:50:45.433
> 
> 标签：mule, lifecycle

我使用 Mule 3.3.0 CE。我想获得 mule 实例的生命周期状态，例如：“初始化、启动、停止、处置”。我想存储这些信息。这些数据，在“AbstractLifecycleManager”中有，我不知道如何从那个类中获取它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:54:26.030

MuleContext[类](http://www.mulesoft.org/docs/site/3.3.1/apidocs/index.html?org/mule/api/MuleContext.html)有一系列`is...()`方法，您可以使用它们来获取 Mule 应用程序的当前生命周期状态。

# asp.net-mvc - 如何在下拉的 Onchange 事件上将焦点设置为文本框？

> ID：15984381
> 
> 赞同：0
> 
> 时间：2013-04-13T04:52:15.703
> 
> 标签：asp.net-mvc, onchange, setfocus

我有文本框，其可见性由 Telerik 下拉列表中选择的值控制。说如果选择的值是yes，那么文本框是可见的，否则它会隐藏。现在，当下拉列表中的值设置为是时，我无法将焦点设置到该文本框。仅在按下“Tab”键时焦点会移到那里，但不会在文本框出现时立即移动。我试过这段代码：

```
function OnDropDownChange(e){
if ($(this).val() === "Y") {

        $("#txtID").show();
        $("#txtID").focus();            
}
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T05:52:37.380

试试这个它可以工作：

```
$('#txtID').show('slow', function() {
 $(this).focus();
}); 
```

[参考](http://api.jquery.com/show/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:55:59.790

```
$("#txtID").show(400, function() {
    $(this).focus();
}); 
```

# ruby-on-rails - rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/psych.rb:205：在“解析”中：（ ): 在第 18 行第 3 列扫描简单键时找不到预期的 ':'

> ID：15984384
> 
> 赞同：8
> 
> 时间：2013-04-13T04:52:37.710
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

这是我在做一个简单的时候得到的完整错误：

`$ rails generate`

> Users/localuser/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/psych.rb:205:in `parse': (): 扫描一个简单的文件时找不到预期的':'第 18 行第 3 列的键（Psych::SyntaxError）

有什么想法吗？

我的系统：

*   ruby 2.0.0p0 [x86_64-darwin12.2.0] Rails 3.2.13 mysql Ver 14.14 Distrib 5.6.10，适用于 osx10.8 (x86_64)

这是错误中提到的 psych.rb 文件的摘录

```
#See Psych::Nodes for more information about YAML AST.
def self.parse_stream yaml, filename = nil, &block
  if block_given?
    parser = Psych::Parser.new(Handlers::DocumentStream.new(&block))
    parser.parse yaml, filename
  else
    parser = self.parser
    parser.parse yaml, filename
    parser.handler.root
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-23T20:29:36.943

如果您的 YAML 文件中有语法错误，通常会出现此错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-25T12:10:51.127

当我在 yaml 文件中有一个制表符而不是空格时，我遇到了这个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-24T23:53:28.030

当 YAML 以 NULL '\0' 字符而不是空白空格结尾时，我遇到了这个错误。

# css - 我们如何设计选择文件选项

> ID：15984392
> 
> 赞同：1
> 
> 时间：2013-04-13T04:54:34.177
> 
> 标签：css, html

我正在尝试解决和设计我的选择文件按钮

```
<div id="image-upload"> 
     <form method='post' action='image.php' enctype='multipart/form-data'>
     Select a JPG or PNG File:<br />
     <input type='file' name='filename' size='10'/>
     <input class="red" type='submit' value='Upload' /></form>          
</div> 
```

似乎没有什么可以帮助我，我尝试了一些带有 css 的代码，也尝试使用 css 添加类或 id，它也可以帮助我。但最后我放弃了。

jsfiddle：http: [//jsfiddle.net/deerox/8Y7p5/1/](http://jsfiddle.net/deerox/8Y7p5/1/)

并且仍然想知道是否有新的方法可以做到这一点。

任何人有任何想法请谢谢:)

![在此处输入图像描述](https://i.stack.imgur.com/NpO25.png)

我想要这个带有一些设计的选择按钮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T05:07:20.490

试试这个 ： -

制作文件上传图像并将其放在文件上传器下方

隐藏文件上传

```
<div>
<input type="file" id="file1" style="display:none">
<img src="your file uploader image path" id="img1" />
</div> 
```

JS：-

```
$("#img1").click(function(){
$('#file1').click();
}); 
```

# android - Android 图像大小限制

> ID：15984398
> 
> 赞同：1
> 
> 时间：2013-04-13T04:56:21.833
> 
> 标签：android, image, memory, imageview

所以我似乎在我正在编写的 Android 程序上遇到了问题。我仍然是菜鸟，所以请帮助我理解问题以及如何解决我的问题。我正在创建一个简单的游戏，我正在为它做所有的图形设计。我的图像是 1024x1024 或 1024x512，分辨率为 300 像素/英寸。是的，我知道我可能已经完成了。我只是希望图形非常清晰并且看起来不错。所有图形都在可绘制文件夹中，而不是在 hdpi、ldpi、mdpi、xhdpi 或 xxhdpi 可绘制文件夹中。现在，我遇到的问题是我的应用程序运行良好，直到我向可绘制文件夹添加了一张 1024x1024 图像。现在，该应用程序在尝试加载图像时崩溃了。我遇到的问题是内存溢出。正在运行什么活动并不重要，似乎一旦达到加载图像的限制，它就会崩溃。我阅读了android分辨率页面[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)但也许我的英语不够好听不懂。我应该将图像大小调整为每种分辨率（hdpi、ldpi、mdpi、xhdpi 和 xxhdpi）吗？当我在我的应用程序中从一个活动移动到另一个活动时，我是否必须清除上一个活动中的 ImageViews 以清理内存？请帮助我了解这是如何工作的。

谢谢大卫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T05:05:34.827

具有讽刺意味的是，您使用的方法可能会使您的图像看起来更糟。

当您将光栅图像放在根可绘制文件夹中时，它们被假定为`mdpi`，并且将按比例放大以适应其他密度。这意味着您的 1024x1024 位图被放大并作为 2048x2048 位图拉入（在大多数情况下，它远大于您可能需要的）。所以是的，你最好的选择是让图像成为特定密度所需的任何大小，并在你需要支持的每个可绘制文件夹中创建单独的图像。

另请注意，您将图像设置为什么分辨率（您提到 300 ppi）并不重要，唯一重要的是像素尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T05:05:23.773

我认为您的 vm 预算是错误的。我在处理以前的应用程序时遇到了这个问题。搜索后，我从开发人员指南中找到了解决方案……关闭此 [链接](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)希望它可以解决您的问题。谢谢

# c# - 如何反思 EntityFramework 类（模型优先方法）？

> ID：15984401
> 
> 赞同：0
> 
> 时间：2013-04-13T04:56:39.460
> 
> 标签：c#, reflection, entity-framework-4.1

使用 DataBase First 时可以创建为 VisualStudio 生成的类的实例吗？

我的意思是，我使用 t4 模板和命令“生成代码”，使用 T4 模板进行 MVC3 工具更新，从具有多对多关系的 db 创建我的类。

我可以使用反射来“填充”实例的属性，例如不同程序集（dll）中此类的“学生”吗？

例如有 3 个表：“课程”“学生”“学生课程”

我将有 3 个实体，一个用于课程，一个用于学生，一个用于关系。我可以接收一个对象或输入“学生”并使用反射来“填充”它的所有属性吗？如果是，我怎样才能做到这一点？

我已经知道我可以通过引用作为“对象类型”（使用泛型）接收对象，但我只是不知道如何创建/填充复杂的属性（例如在 studentsCourses 属性中）

任何建议提前感谢。

在这里，我让脚本创建表和数据库“COURSES_TEST”：

```
USE [master]
GO
/****** Object:  Database [COURSES_TEST]    Script Date: 04/12/2013 23:47:18 ******/
CREATE DATABASE [COURSES_TEST] ON  PRIMARY 
( NAME = N'COURSES_TEST', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\DATA\COURSES_TEST.mdf' , SIZE = 2048KB , MAXSIZE = UNLIMITED, FILEGROWTH = 1024KB )
 LOG ON 
( NAME = N'COURSES_TEST_log', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\DATA\COURSES_TEST_log.ldf' , SIZE = 1024KB , MAXSIZE = 2048GB , FILEGROWTH = 10%)
GO
ALTER DATABASE [COURSES_TEST] SET COMPATIBILITY_LEVEL = 100
GO
IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))
begin
EXEC [COURSES_TEST].[dbo].[sp_fulltext_database] @action = 'enable'
end
GO
ALTER DATABASE [COURSES_TEST] SET ANSI_NULL_DEFAULT OFF
GO
ALTER DATABASE [COURSES_TEST] SET ANSI_NULLS OFF
GO
ALTER DATABASE [COURSES_TEST] SET ANSI_PADDING OFF
GO
ALTER DATABASE [COURSES_TEST] SET ANSI_WARNINGS OFF
GO
ALTER DATABASE [COURSES_TEST] SET ARITHABORT OFF
GO
ALTER DATABASE [COURSES_TEST] SET AUTO_CLOSE OFF
GO
ALTER DATABASE [COURSES_TEST] SET AUTO_CREATE_STATISTICS ON
GO
ALTER DATABASE [COURSES_TEST] SET AUTO_SHRINK OFF
GO
ALTER DATABASE [COURSES_TEST] SET AUTO_UPDATE_STATISTICS ON
GO
ALTER DATABASE [COURSES_TEST] SET CURSOR_CLOSE_ON_COMMIT OFF
GO
ALTER DATABASE [COURSES_TEST] SET CURSOR_DEFAULT  GLOBAL
GO
ALTER DATABASE [COURSES_TEST] SET CONCAT_NULL_YIELDS_NULL OFF
GO
ALTER DATABASE [COURSES_TEST] SET NUMERIC_ROUNDABORT OFF
GO
ALTER DATABASE [COURSES_TEST] SET QUOTED_IDENTIFIER OFF
GO
ALTER DATABASE [COURSES_TEST] SET RECURSIVE_TRIGGERS OFF
GO
ALTER DATABASE [COURSES_TEST] SET  DISABLE_BROKER
GO
ALTER DATABASE [COURSES_TEST] SET AUTO_UPDATE_STATISTICS_ASYNC OFF
GO
ALTER DATABASE [COURSES_TEST] SET DATE_CORRELATION_OPTIMIZATION OFF
GO
ALTER DATABASE [COURSES_TEST] SET TRUSTWORTHY OFF
GO
ALTER DATABASE [COURSES_TEST] SET ALLOW_SNAPSHOT_ISOLATION OFF
GO
ALTER DATABASE [COURSES_TEST] SET PARAMETERIZATION SIMPLE
GO
ALTER DATABASE [COURSES_TEST] SET READ_COMMITTED_SNAPSHOT OFF
GO
ALTER DATABASE [COURSES_TEST] SET HONOR_BROKER_PRIORITY OFF
GO
ALTER DATABASE [COURSES_TEST] SET  READ_WRITE
GO
ALTER DATABASE [COURSES_TEST] SET RECOVERY SIMPLE
GO
ALTER DATABASE [COURSES_TEST] SET  MULTI_USER
GO
ALTER DATABASE [COURSES_TEST] SET PAGE_VERIFY CHECKSUM
GO
ALTER DATABASE [COURSES_TEST] SET DB_CHAINING OFF
GO
USE [COURSES_TEST]
GO
/****** Object:  Table [dbo].[students]    Script Date: 04/12/2013 23:47:19 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[students](
    [studentID] [int] IDENTITY(1,1) NOT NULL,
    [name] [nvarchar](50) NULL,
    [lastName] [nvarchar](50) NULL,
 CONSTRAINT [PK_students] PRIMARY KEY CLUSTERED 
(
    [studentID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[courses]    Script Date: 04/12/2013 23:47:19 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[courses](
    [courseID] [int] IDENTITY(1,1) NOT NULL,
    [course] [nchar](10) NULL,
    [description] [nvarchar](50) NULL,
 CONSTRAINT [PK_courses] PRIMARY KEY CLUSTERED 
(
    [courseID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Studentscourses]    Script Date: 04/12/2013 23:47:19 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Studentscourses](
    [courseStudentID] [int] IDENTITY(1,1) NOT NULL,
    [courseID] [int] NULL,
    [studentID] [int] NULL,
 CONSTRAINT [PK_Studentscourses] PRIMARY KEY CLUSTERED 
(
    [courseStudentID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  ForeignKey [FK_Studentscourses_courses]    Script Date: 04/12/2013 23:47:19 ******/
ALTER TABLE [dbo].[Studentscourses]  WITH CHECK ADD  CONSTRAINT [FK_Studentscourses_courses] FOREIGN KEY([courseID])
REFERENCES [dbo].[courses] ([courseID])
GO
ALTER TABLE [dbo].[Studentscourses] CHECK CONSTRAINT [FK_Studentscourses_courses]
GO
/****** Object:  ForeignKey [FK_Studentscourses_students]    Script Date: 04/12/2013 23:47:19 ******/
ALTER TABLE [dbo].[Studentscourses]  WITH CHECK ADD  CONSTRAINT [FK_Studentscourses_students] FOREIGN KEY([studentID])
REFERENCES [dbo].[students] ([studentID])
GO
ALTER TABLE [dbo].[Studentscourses] CHECK CONSTRAINT [FK_Studentscourses_students]
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T00:08:59.747

如果我理解正确，EF会生成类似

> ```
> class YourStudent
> {
>     public int studentId { get; set; }
>     public string name { get; set; }
>     public string lastName { get; set; }
>     public virtual ICollection<Course> Courses { get; set; }
> } 
> ```

并且有

```
class TheirStudent
{
    public int studentId {get;set;}
    public string name { get; set; }
    public string lastName { get; set; }
} 
```

并且您想将值从TheyStudent 实例填充到YourStudent 实例中。

也许像

```
YourStudent s1;
TheirStudent s2;
Type t = typeof(YourStudent);
Type t2 = typeof(TheirStudent);

foreach (PropertyInfo pinfo in t.GetProperties()) 
{
    if (pinfo.GetGetMethod().IsVirtual &&
        pinfo.PropertyType.IsGenericType &&
        pinfo.PropertyType.GetGenericTypeDefinition() == typeof(ICollection<>))
    {

        // This is [probably] a nav property. Courses would be in here
    }
    else if (pinfo.GetGetMethod().IsVirtual)
    {
        // if you have 0..1 or 1..1 nav properties you might muck around in here
    }
    else if (!pinfo.GetGetMethod().IsVirtual)
    {
        // This is [probably] a column - studentId, name, etc would be here

        // you could pull values over like so:
        PropertyInfo pinfo2 = (from ps in t2.GetProperties() 
                               where ps.Name == pinfo.Name 
                               select ps).SingleOrDefault();
        if (pinfo2 != null)
        {
            object value = pinfo2.GetValue(s2, new object[] { });
            pinfo.SetValue(s1, value, new object[] { });
        }
    }
} 
```

# installation - 在卸载程序代码中使用 StrStr

> ID：15984402
> 
> 赞同：-1
> 
> 时间：2013-04-13T04:56:51.873
> 
> 标签：installation, nsis

`StrStr`是否可以在卸载程序宏功能中使用 NSIS功能？即，`un.StrStr`如果函数存在则调用该函数？

我很难记住 StrStr 是否是主要 API 的一部分，`IntCmp`或者`FileExists`它是否是某人编写并广泛分发的函数？如果是后者，我将搜索我的 nsi 文件并编辑代码以同样适用于卸载程序代码。

其他人如何在卸载程序代码中使用 StrStr？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:25:50.350

本机字符串指令是`StrCpy`,`StrLen`和`StrCmp`.

StrStr 位于[StrFunc.nsh](http://nsis.svn.sourceforge.net/viewvc/nsis/NSIS/trunk/Include/StrFunc.nsh?view=markup)中，在您的代码中使用`${StrStr}`和。`${UnStrStr}`有关更多信息，请参阅[StrFunc 自述文件](http://nsis.svn.sourceforge.net/viewvc/nsis/NSIS/trunk/Include/StrFunc.txt?view=markup)...

# c++ - 检查浮点参数是否正确

> ID：15984406
> 
> 赞同：3
> 
> 时间：2013-04-13T04:57:21.697
> 
> 标签：c++, constructor, floating-point, floating-accuracy

我想写一个代表马尔可夫链的类（让我们命名它`MC`）。它有一个构造函数，它采用状态转换矩阵（即`vector<vector<double>>`. 我想，检查它是否真的是一个矩阵（具有相同的行数和列数）并且真的是一个转换矩阵是个好主意：所有其中的数字是概率，即不小于`0.0`和不大于`1.0`，并且对于每一行，其元素之和为`1.0`. 但是，存在浮点限制引起的问题：例如，和`0.3 + 0.3 + 0.3 + 0.1`将不相等到`1.0`，所以检查不会那么容易。所以我看到了这个问题的两种可能的解决方案：

1.  选择一些 epsilon 并与 epsilon error 进行比较。当然它现在会接受一些违反转移矩阵属性的矩阵，但一般来说，如果有人偶尔将一些坏数据传递给构造函数，他会得到一个异常。
2.  什么都不检查，靠班级的用户，如果他通过了不好的东西，那完全是他的错，班级的行为会出乎意料。

哪种方法更好，更“真实”？我喜欢第一个，但同样，我不确定我应该如何选择 epsilon。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T05:48:29.687

做第二个。

你的班级不是在总结浮点数列表并决定什么“足够接近”1，什么不是。你的用户是。你的类代表马尔可夫链。您将无法选择 epsilon 的值，以便您的类以有用的方式表示马尔可夫链。

想想你将要实施的操作。也许您将拥有一个函数，该函数使用链的转移矩阵在链的状态上达到概率分布。该函数是否应该检查输入概率分布是否是某个 epsilon 内的概率分布？

您的函数几乎肯定不会保留“是概率分布”属性；当您通过马尔可夫链反复命中概率分布时，由于舍入误差远离概率分布空间，您会得到一些漂移。您可以通过之后的规范化来纠正这个问题，但这会导致更多的不准确。

现在考虑“给定一个马尔可夫链和一个整数 k，返回将输入链迭代 k 次形成的马尔可夫链”操作。您可以看到，这将累积舍入并遭受与“使用马尔可夫链的命中概率分布”大致相同的问题。

如果您只能在使用 12 小时后损坏的东西和不必要地不准确的东西之间做出选择，那不是很糟糕吗？

（当然，检查方阵参数的平方和矩阵是完全合理的。）

# java - 试图从我的应用程序启动一项活动，但不断获得权限被拒绝

> ID：15984407
> 
> 赞同：4
> 
> 时间：2013-04-13T04:57:25.120
> 
> 标签：java, android

我有一个启动器主题应用程序，允许用户从我的应用程序应用主题。

我正在尝试打开启动器的活动，但一直被拒绝许可。

这是我的意图（我已经尝试了很多不同的方式）

```
final Intent intent = new Intent(Intent.ACTION_MAIN, null);
        intent.addCategory(Intent.CATEGORY_LAUNCHER);
        final ComponentName cn = new ComponentName("com.tsf.shell", "com.tsf.shell.theme.ThemeManagerActivity");
        intent.setComponent(cn);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity( intent); 
```

这是错误的logcat

```
04-13 00:08:28.738: I/ActivityManager(710): START {act=com.tsf.shell cat=[android.intent.category.LAUNCHER] cmp=com.tsf.shell/.theme.ThemeManagerActivity u=0} from pid 20328
04-13 00:08:28.738: W/ActivityManager(710): Permission denied: checkComponentPermission() owningUid=10006
04-13 00:08:28.738: D/AndroidRuntime(20328): Shutting down VM
04-13 00:08:28.738: W/dalvikvm(20328): threadid=1: thread exiting with uncaught exception (group=0x40eee438)
04-13 00:08:28.738: W/ActivityManager(710): Permission Denial: starting Intent { act=com.tsf.shell cat=[android.intent.category.LAUNCHER] cmp=com.tsf.shell/.theme.ThemeManagerActivity } from ProcessRecord{42df8758 20328:bigdx.tabs/u0a47} (pid=20328, uid=10047) not exported from uid 10006
04-13 00:08:28.748: E/AndroidRuntime(20328): FATAL EXCEPTION: main
04-13 00:08:28.748: E/AndroidRuntime(20328): java.lang.SecurityException: Permission Denial: starting Intent { act=com.tsf.shell cat=[android.intent.category.LAUNCHER] cmp=com.tsf.shell/.theme.ThemeManagerActivity } from ProcessRecord{42df8758 20328:bigdx.tabs/u0a47} (pid=20328, uid=10047) not exported from uid 10006 
```

是否存在无法从其他应用程序启动的某些活动？

这是我试图启动的实际启动器的清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest android:versionCode="33" android:versionName="1.9.9 Beta" android:installLocation="internalOnly" package="com.tsf.shell"
  xmlns:android="http://schemas.android.com/apk/res/android">
    <original-package android:name="com.tsf.shell" />
    <application android:label="@string/app_name" android:icon="@drawable/tsf_ico" android:name=".ShellApplication" android:persistent="true" android:debuggable="true">
        <activity android:theme="@style/AppTheme" android:name=".Home" android:process="com.tsf.shell" android:taskAffinity="com.tsf.shell" android:stateNotNeeded="true" android:launchMode="singleTask" android:screenOrientation="nosensor" android:configChanges="locale|mcc|mnc|keyboard|keyboardHidden|orientation|uiMode|screenSize" android:allowTaskReparenting="true" android:windowSoftInputMode="adjustPan">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.HOME" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.MONKEY" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:theme="@style/Theme.Translucent" android:name=".plugin.widgetpicker.ShortcutsPicker" android:process=":shortcutPicker" />
        <activity android:theme="@style/Theme.Translucent" android:name=".plugin.widgetpicker.AppWidgetPicker" android:process=":widgetPicker" />
        <activity android:theme="@style/DialogTheme" android:name=".plugin.iconpicker.IconPicker" android:process=":iconPicker" />
        <activity android:theme="@style/Theme.Translucent" android:name=".VersionDetailActivity" android:process=":versionDetail" />
        <activity android:theme="@style/NoTitleBar" android:name=".theme.ThemeManagerActivity" android:process=":themes" />
        <activity android:theme="@style/NoTitleBar" android:name=".theme.ThemeDetailedActivity" android:process=":themes" />
        <activity android:theme="@style/Theme.Translucent" android:name=".activity.PhotoSelectorActivity" />
        <activity android:name=".preference.SettingPreferenceActivity" />
        <activity android:name=".preference.SettingDrawerPreferenceActivity" />
        <activity android:name=".preference.SettingDockPreferenceActivity" />
        <activity android:theme="@style/NoTitleBar" android:name=".action.ActionSelector" android:process=":gesture" />
        <activity android:name=".preference.SettingGesturePreferenceActivity" android:process=":gesture" />
        <activity android:theme="@style/NoTitleBar" android:name=".usermanual.TSFUserManualActivity" android:process=":UserManual" />
        <activity android:theme="@style/Theme.NoTitleBar.NoBackground" android:name=".RestartActivity" android:process=":restart" android:launchMode="singleTask" android:configChanges="keyboard|keyboardHidden|orientation" />
        <activity android:label="@string/pick_wallpaper" android:icon="@drawable/tsf_ico" android:name=".ShellWallpaperSelector" android:process=":wallpaperSelector" android:launchMode="singleTask" android:screenOrientation="nosensor" android:finishOnCloseSystemDialogs="true">
            <intent-filter>
                <action android:name="android.intent.action.SET_WALLPAPER" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <service android:name=".services.ForegroundService" android:enabled="true">
            <intent-filter>
                <action android:name="com.tsf.shell.services.FOREGROUND" />
            </intent-filter>
        </service>
        <provider android:name="com.tsf.shell.ShellProvider" android:readPermission="com.tsf.shell.permission.READ_SETTINGS" android:writePermission="com.tsf.shell.permission.WRITE_SETTINGS" android:authorities="com.tsf.shell.settings" />
    </application>
    <supports-screens android:anyDensity="true" android:smallScreens="true" android:normalScreens="true" android:largeScreens="true" />
    <uses-permission android:name="android.permission.EXPAND_STATUS_BAR" />
    <uses-permission android:name="android.permission.CALL_PHONE" />
    <uses-permission android:name="android.permission.READ_LOGS" />
    <uses-permission android:name="com.android.vending.CHECK_LICENSE" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.PERSISTENT_ACTIVITY" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
    <uses-permission android:name="android.permission.BLUETOOTH" />
    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.WRITE_SETTINGS" />
    <uses-permission android:name="com.android.browser.permission.READ_HISTORY_BOOKMARKS" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.RESTART_PACKAGES" />
    <uses-permission android:name="android.permission.KILL_BACKGROUND_PROCESSES" />
    <uses-permission android:name="android.permission.SET_WALLPAPER" />
    <uses-permission android:name="android.permission.SET_WALLPAPER_HINTS" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-feature android:name="android.hardware.telephony" android:required="false" />
    <uses-feature android:name="android.hardware.bluetooth" android:required="false" />
    <uses-feature android:name="android.hardware.location" android:required="false" />
    <uses-feature android:name="android.hardware.location.network" android:required="false" />
    <uses-feature android:name="android.hardware.location.gps" android:required="false" />
    <uses-feature android:glEsVersion="0x20000" android:required="true" />
</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T05:30:07.163

问题不在您的调用应用程序中。似乎问题出在被调用的应用程序中。检查被调用应用程序接收intent的receiver是否被导出。采用

```
android:exported="true" 
```

从[文档](http://developer.android.com/guide/topics/manifest/receiver-element.html)_`android:exported`

> 广播接收器是否可以从其应用程序之外的源接收消息 - 如果可以，则为“true”，否则为“false”。如果为“false”，则广播接收器可以接收的唯一消息是由相同应用程序的组件或具有相同用户 ID 的应用程序发送的消息。

# c++ - 在 C++ 程序中使用 ASCII 字符

> ID：15984408
> 
> 赞同：0
> 
> 时间：2013-04-13T04:57:27.653
> 
> 标签：c++

我一直在尝试`_`在二维数组中打印出 <----- 这个字符......但是当我

尝试编译代码，它返回了一些垃圾数字。我想我做错了什么......谁能帮我解决这个问题？

```
void main (){

    int A[9][9];

    for (int i=0; i<9; i++){
        for (int j=0; j<i; j++){
            A[i][j]= '_';//I am doing this part wrong. 
        }

    }

    for (int r=0; r<9; r++) {
        for (int c=0; c<9; c++)
            cout << setw(3) << A[r][c];
        cout << endl;
    }

    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T05:00:39.280

A 是一个整数数组。所以 cout 会尝试打印一个整数。尝试`cout << char(A[r][c]);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T05:01:06.700

运算符针对多种数据类型进行了重载，`std::cout::operator<<`以便于（自动）格式化输出。如果你给它一个`int`，那么它会打印一个数字。如果你给它一个`char`，它会尝试将它打印为一个字符。因此，要么将您的数组声明为 的数组`char`，要么在打印时强制转换数组成员：

```
cout << static_cast<char>(array[i][j]) << endl; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T05:15:49.303

~~1\. 将 ASCII 值分配给整数数组而不是 '_'。即使没有改变它也能工作；但我觉得它看起来更干净。~~

 ~~```
 A[i][j]= 95; // try this instead of '_' 
```~~  ~~1.  打印时，cout 可以打印任何数据类型而无需强制转换，但由于我们正在寻找要打印的字符，请尝试显式转换。

    ```
    cout << setw(3) << char(A[r][c]); 
    ```

2.  不确定您正在使用的编译器，但它是初始化数组以避免垃圾值篡改输出的更好做法~~

# javascript - 为什么我的 Ajax 请求比普通浏览器请求慢很多？

> ID：15984412
> 
> 赞同：4
> 
> 时间：2013-04-13T04:57:48.120
> 
> 标签：javascript, jquery, ajax

我为朋友创建了一个网站。因为他希望音乐播放器通过页面加载继续播放音乐，所以我决定通过 ajax（由 jQuery 促进）将内容加载到页面中。它工作得很好，当没有 javascript 时它很好地回退，并且后退/前进按钮工作得很好，但它在服务器上的速度非常慢。

几点：

1.  初始页面加载相当快。Chrome 开发者控制台告诉我“index.php”在大约 2.5 秒内加载。我进行了设置，以便查询字符串参数指示加载哪个页面，并且这个时间范围对它们来说大致准确。对于主页，加载了 8.4KB 的数据。

2.  当我通过 ajax 请求加载内容时，无论下载的数据大小如何，大约需要 20 秒。以这种方式加载的最小数据量约为 500 字节。这里显然存在不匹配。

所以 Chrome 告诉我，绝大多数时间都花在“等待”上，我认为这意味着服务器正在处理请求。所以，这只能意味着，我猜，要么我的代码需要很长时间，要么服务器出了问题。我不认为这是我的代码，因为它相当小：

```
$file = "";
if (isset($_GET['page'])) {
    $file = $_GET['page'];
} else if (isset($_POST['page'])) {
    $file = $_POST['page'];
} else {
    $file = "home";
}

$file = 'content/' . $file . '.php';

if (file_exists($file)) {
    include_once($file);
} else {
    include_once('content/404.php');
} 
```

这是在一个`content_loader.php`文件中，我的 javascript（在这种情况下）向该文件发送了一个 GET 请求以及一个“页面”参数。返回 HTML 标记并将其放入页面上的 DIV 中。

我正在使用`jQuery .get()`速记功能，所以我不认为我会在那里搞砸任何东西，而且我相信这不是 Javascript 问题，因为延迟是在等待来自服务器的数据。同样，即使数据非常小，也需要大约 20 秒。

我目前认为这是服务器的问题，但我不明白为什么通过 javascript 发出的请求会比通过浏览器发出的传统方式慢得多。作为附加说明，一些内容页面确实连接到 MySQL 数据库，但有些没有。页面需要什么来处理或它包含多少数据似乎并不重要，它需要大约 20 秒。

我不知所措...有没有人知道可以解释这一点的任何事情？另外，如果这不是此类问题的正确位置，我深表歉意，其他场所似乎也没有特别适合该问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T05:12:59.007

正如我在评论中提到的那样，反向 DNS 查找绝对有可能。我以前遇到过这个问题，我敢打赌这是您请求缓慢的根源。在常规 apache 和 vhost 配置以及`.htaccess`. 以下是一些希望对您有所帮助的链接：

[http://www.tablix.org/~avian/blog/archives/2011/04/reverse_dns_lookups_and_apache/](http://www.tablix.org/~avian/blog/archives/2011/04/reverse_dns_lookups_and_apache/)

[http://betabug.ch/blogs/ch-athens/933](http://betabug.ch/blogs/ch-athens/933)

要查找更多资源，只需 Google 诸如“apache 慢速反向 dns”之类的内容。

**很少的解释**

在反向 DNS 查找中，尝试将 IP 地址解析为主机名。大多数情况下，对于 Apache、SSH 和 MySQL 等服务，这是不必要的，而且这是一个坏主意，因为它只会降低请求/连接的速度。最好为您的不同服务查找配置设置，并在不需要时禁用反向 DNS 查找。

在 Apache 中，某些配置设置会导致发生反向查找。诸如`HostnameLookups`和允许/拒绝规则指定域而不是 IP 地址。有关更多信息，请参阅上面的链接。

正如您在评论中所建议的那样，PHP 脚本一旦最终运行就会快速执行。时间花在等待 Apache 上——最有可能进行反向 DNS 查找，但失败了。您知道问题不在于您的代码，而在于请求中涉及的其他服务。

希望这可以帮助！

# bash - Bash Script：计算文件中的唯一行

> ID：15984414
> 
> 赞同：157
> 
> 时间：2013-04-13T04:57:52.217
> 
> 标签：bash

# 情况：

我有一个大文件（数百万行），其中包含来自几个小时网络捕获的 IP 地址和端口，每行一个 ip/端口。行的格式如下：

```
ip.ad.dre.ss[:port] 
```

# 期望的结果：

我在记录时收到的每个数据包都有一个条目，因此有很多重复的地址。我希望能够通过某种 shell 脚本运行它，该脚本能够将其减少为格式的行

```
ip.ad.dre.ss[:port] count 
```

其中`count`是该特定地址（和端口）的出现次数。无需做任何特殊工作，将不同的端口视为不同的地址。

到目前为止，我正在使用此命令从日志文件中抓取所有 IP 地址：

```
grep -o -E [0-9]+\.[0-9]+\.[0-9]+\.[0-9]+(:[0-9]+)? ip_traffic-1.log > ips.txt 
```

由此，我可以使用一个相当简单的正则表达式来刮掉我的地址发送的所有 IP 地址（我不在乎）

然后我可以使用以下内容提取唯一条目：

```
sort -u ips.txt > intermediate.txt 
```

我不知道如何通过排序以某种方式汇总行数。

* * *

## 回答 #1

> 赞同：354
> 
> 时间：2013-04-13T05:04:20.673

您可以使用该`uniq`命令来获取已排序的重复行的计数：

```
sort ips.txt | uniq -c 
```

要获得最常见的结果（感谢 Peter Jaric）：

```
sort ips.txt | uniq -c | sort -bgr 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-07-04T22:35:13.067

要*计算*唯一行的总数（即不考虑重复行），我们可以使用`uniq`或 Awk `wc`：

```
sort ips.txt | uniq | wc -l
awk '!seen[$0]++' ips.txt | wc -l 
```

awk 的数组是关联的，因此它的运行速度可能比排序快一点。

生成文本文件：

```
$  for i in {1..100000}; do echo $RANDOM; done > random.txt
$ time sort random.txt | uniq | wc -l
31175

real    0m1.193s
user    0m0.701s
sys     0m0.388s

$ time awk '!seen[$0]++' random.txt | wc -l
31175

real    0m0.675s
user    0m0.108s
sys     0m0.171s 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-02-06T11:57:48.327

这是获取重复行数的最快方法，并按照最不频繁到最频繁的顺序将它们很好地打印出来：

```
awk '{!seen[$0]++}END{for (i in seen) print seen[i], i}' ips.txt | sort -n 
```

如果您不关心性能并且想要更容易记住的东西，那么只需运行：

```
sort ips.txt | uniq -c | sort -n 
```

PS：

*sort -n*将字段解析为数字，这是正确的，因为我们使用计数进行排序。

# c++ - 将 std::string 作为函数参数传递时的 C++ 类型转换

> ID：15984416
> 
> 赞同：2
> 
> 时间：2013-04-13T04:58:06.527
> 
> 标签：c++

传递字符串是否`""`等同于通过调用`std::str("")`C++ 传递字符串？

例如，给定一个接受`std::str`作为参数的函数：

```
void funcA(std::string arg) {
    arg = "abc";
} 
```

我应该用`funcA(std::string("abc"));`or来称呼它`funcA("abc");`吗？即第二个版本是char数组的类型转换吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T05:01:21.373

它们是等价的。因为构造函数`std::string::string( char const * )`未声明为`explicit`，所以它被*隐式*调用以提供从`char *`到的转换`string`。隐式调用与显式调用执行相同的操作（写为`std::string("abc")`）。

# shell - 我可以将文件内容存储到 shell 脚本中的变量吗？

> ID：15984417
> 
> 赞同：4
> 
> 时间：2013-04-13T04:58:13.280
> 
> 标签：shell, solaris, sh

假设我有一个文件*file.txt*，其中包含数据（比如“100”）。我想将此文件的内容读入一个变量以供将来处理。我希望它可以在 Linux 和 Solaris 上运行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T05:23:30.120

试试这条线：

```
VAR=$(cat file.txt) 
```

或者

```
VAR=$(head -1 file.txt) 
```

编辑1：

**使用 Unix 命令的输出来设置变量**

关于 shell 脚本最好的事情之一是使用任何 Unix 命令来生成输出并使用它来设置变量非常容易。

在此示例中，我正在运行一个日期命令并将其输出保存为我的变量的值：

```
#!/bin/sh
#
STARTED=`date`
sleep 5
FINISHED=`date`
#
echo "Script start time: $STARTED"
echo "Script finish time: $FINISHED" 
```

如果我运行这个简单的脚本，我会看到以下内容：

```
ubuntu$ /tmp/1.sh
Script start time: Wed May 7 04:56:51 CDT 2008
Script finish time: Wed May 7 04:56:56 CDT 2008 
```

几乎所有场景都可以使用相同的方法。

所以 mvp 的答案将适用于任何 unix shell：

```
F=`cat file.txt` 
```

只需尝试使用反引号```而不是`'`单引号

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-13T05:00:54.723

这应该有效：

```
 VAR=`cat file.txt` 
```

如果您只想获取文件的第一行，请使用以下命令：

```
 VAR=`head -1 file.txt` 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-24T22:42:45.467

您是否尝试过以下操作

```
VAR=$(<file) 
```

当我需要将两行文件中的第二行作为变量存储在 bash 中时，它起作用了。

# go - 无法分配给结构变量

> ID：15984423
> 
> 赞同：5
> 
> 时间：2013-04-13T05:00:39.743
> 
> 标签：go

我有一张地图

```
var users = make(map[int]User) 
```

我正在填写地图，一切都很好。稍后，我想分配给 User 的值之一，但出现错误。

```
type User struct {
  Id int
  Connected bool
}

users[id].Connected = true   // Error 
```

我也尝试编写一个分配给它的函数，但这也不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T05:14:00.923

例如，

```
package main

import "fmt"

type User struct {
    Id        int
    Connected bool
}

func main() {
    users := make(map[int]User)
    id := 42
    user := User{id, false}
    users[id] = user
    fmt.Println(users)

    user = users[id]
    user.Connected = true
    users[id] = user
    fmt.Println(users)
} 
```

输出：

```
map[42:{42 false}]
map[42:{42 true}] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T09:30:07.017

在这种情况下，将指针存储在映射而不是结构中会很有帮助：

```
package main

import "fmt"

type User struct {
        Id        int
        Connected bool
}

func main() {
        key := 100
        users := map[int]*User{key: &User{Id: 314}}
        fmt.Printf("%#v\n", users[key])

        users[key].Connected = true
        fmt.Printf("%#v\n", users[key])
} 
```

[操场](http://play.golang.org/p/yXaQst3py3)

* * *

输出：

```
&main.User{Id:314, Connected:false}
&main.User{Id:314, Connected:true} 
```

# mysql - 从本地主机更新服务器数据库

> ID：15984424
> 
> 赞同：0
> 
> 时间：2013-04-13T05:00:41.103
> 
> 标签：mysql

我正在使用codeigniter，php和mysql，对于项目管理我们使用SVN，我们可以从中更新和提交项目，它会自动反映在服务器上，但是如果我在localhost数据库中进行了任何更改，我必须在服务器上更新它手动数据库。我想知道是否有任何工具或方法可以从 localhost 自动更新服务器数据库，例如 svn commit。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:05:39.397

我在 Macromedia Dreamweaver 中看到了这一点，其中项目可以链接到远程 ftp 站点，并且可以将更新选项设置为自动同步（即，当您在本地副本中进行更改时，它会自动上传到服务器），可能 netbeans 也支持它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T05:06:38.737

Navicat for mysql 并使用数据传输功能同步 2 个数据库

# vb.net - VB 编程新手，需要一些建议

> ID：15984426
> 
> 赞同：0
> 
> 时间：2013-04-13T05:00:51.867
> 
> 标签：vb.net

我正在尝试编写一个从访问文件中获取数据的程序，然后我可以点击一个按钮并在文本文件中为其创建一个标签。现在，如果我点击按钮为多个标签创建标签，它只会显示最后一个被选中的标签。我想，我需要一个循环`outfile.write's`，我只是不确定要使用什么循环。它没有给我任何错误或任何东西，它只是没有在这个文本文件中打印一个以上的标签。另外，我如何在例如人名和姓氏之间放置空格，因为它们在同一行？到目前为止，这是我的代码。

```
Imports System.IO

Public Class frmAccess
    Dim outFile As StreamWriter

    Private Sub TblMemberBindingNavigatorSaveItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TblMemberBindingNavigatorSaveItem.Click
        Me.Validate()
        Me.TblMemberBindingSource.EndEdit()
        Me.TableAdapterManager.UpdateAll(Me.GolfDataSet)

    End Sub

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        'TODO: This line of code loads data into the 'GolfDataSet.tblMember' table. You can move, or remove it, as needed.
        Me.TblMemberTableAdapter.Fill(Me.GolfDataSet.tblMember)

    End Sub

    Private Sub cmdCreate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdCreate.Click
        Dim outFile As StreamWriter
        outFile = File.CreateText("Labels.txt")

        outFile.WriteLine()
        outFile.WriteLine()
        outFile.Write(lblFirst.Text, " ")
        outFile.WriteLine(lblLast.Text)
        outFile.WriteLine(lblAddress.Text, " ")
        outFile.Write(lblCity.Text, ", ")
        outFile.Write(lblState.Text, " ")
        outFile.Write(lblZip.Text)
        outFile.WriteLine()
        outFile.Close()

    End Sub

    Private Sub cmdExit_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdExit.Click

        Me.Close()

    End Sub
End Class 
```

例如，我的文本文件应如下所示（xxx= 空行）：

xxxx

xxxxx

鲍勃·史密斯

123修复路

佛罗里达州坦帕市 12345

xxxxxx

xxxxxx

xxxxxx

简·多伊

987帮助巷

科罗拉多州丹佛 56789

xxxxx

xxxxx

因此，我的文本文件不会显示两个标签，而只会显示 Jane Doe 的标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:21:41.330

对于空间，您可以使用 Strings.Space(numOfSpaces) 方法，也许它可以在写入文件之前附加到 firstname 变量。至于最初的问题，我不明白你到底要问什么……你能改写吗？也希望你没有绑定任何文本框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T05:29:30.240

你可以使用以下

```
Private Sub cmdCreate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdCreate.Click
    Dim outFile As StreamWriter
    outFile = File.CreateText("Labels.txt")

    outFile.WriteLine()
    outFile.WriteLine()
    outFile.Write(lblFirst.Text & " ")
    outFile.WriteLine(lblLast.Text)
    outFile.WriteLine(lblAddress.Text & " ")
    outFile.Write(lblCity.Text & " " & ", ")
    outFile.Write(lblState.Text & " ")
    outFile.Write(lblZip.Text)
    outFile.WriteLine()
    outFile.Close()

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T06:11:14.737

尝试使用此代码显示所有姓名和地址详细信息

```
Private Sub cmdCreate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdCreate.Click

 Dim outFile As StreamWriter
        If File.Exists("D:\sathish\Labels.txt") Then
            outFile = New StreamWriter("Labels.txt", True)
        Else
            outFile = New StreamWriter("Labels.txt")
        End If

        outFile.WriteLine()
    outFile.WriteLine()
    outFile.Write(lblFirst.Text & " ")
    outFile.WriteLine(lblLast.Text)
    outFile.WriteLine(lblAddress.Text & " ")
    outFile.Write(lblCity.Text & " " & ", ")
    outFile.Write(lblState.Text & " ")
    outFile.Write(lblZip.Text)
    outFile.WriteLine()
    outFile.Close()

End Sub 
```

# android - Android打开主屏幕小部件时如何打开Activity？

> ID：15984428
> 
> 赞同：2
> 
> 时间：2013-04-13T05:00:55.337
> 
> 标签：android, widget

我正在实现一个与小部件相关的应用程序，我准备了一个小部件，它运行良好，当单击打开活动的视图以准备该小部件的设置时。

但我的要求是当点击主屏幕小部件时，我想直接打开活动，然后打开小部件。

![](https://i.stack.imgur.com/t7WJC.png)

从上图中单击自定义模拟时钟小部件时，在我的应用程序中打开第一个活动，然后我想显示小部件，因为从我的活动中我将为该小部件设置一些设置。我怎样才能先打开活动？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T07:07:16.203

小部件在添加到主屏幕时可以调用一个特殊的活动。如果您想阻止创建小部件本身，该活动可以返回带有小部件 ID 的 SUCCESS 意图，并在活动的“onCreate”方法或 RESULT_CANCELED 中接收。

您只需`android:configure`在 XML 的属性中添加配置活动类，并在 AndroidManifest 中的活动声明中`appwidget-provider`添加意图过滤器。`android.appwidget.action.APPWIDGET_CONFIGURE`它在[http://developer.android.com/guide/topics/appwidgets/index.html#Configuring中有详细说明](http://developer.android.com/guide/topics/appwidgets/index.html#Configuring)

收到的意图具有小部件 ID：

```
public void onCreate(Bundle savedInstanceState) {
    ...
    int widgetID = getIntent().getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, AppWidgetManager.INVALID_APPWIDGET_ID);
    ...
} 
```

然后您可以通过以下方式完成活动`setResult(RESULT_CANCELED);`或确认小部件的创建：

```
 Intent resultValue = new Intent();
    resultValue.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, widgetID);
    setResult(RESULT_OK, resultValue); 
```

您可以从该活动中进行所有小部件设置。

另一方面，如果您想为所有小部件实例执行只需要发生一次的其他设置，您可以在`onEnabled`您的 AppWidgetProvider 类的方法中进行，如[http://developer.android.com/guide/中所述主题/appwidgets/index.html#AppWidgetProvider](http://developer.android.com/guide/topics/appwidgets/index.html#AppWidgetProvider)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:29:34.867

您应该查看本教程：[http](http://android-er.blogspot.nl/2010/10/simple-home-screen-app-widget-with.html) ://android-er.blogspot.nl/2010/10/simple-home-screen-app-widget-with.html它完全符合您的要求。

# html - 使用css没有为“选择”选择任何内容时如何设置默认提示

> ID：15984430
> 
> 赞同：18
> 
> 时间：2013-04-13T05:01:05.500
> 
> 标签：html, css

当使用css没有为选择框选择任何内容时，是否可以设置默认提示？还是有一种优雅的方式来处理这个问题

```
 <option>Select Here</option>? 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-13T05:26:49.737

尝试这个：

```
<select>
    <option value="" disabled>Select one--</option>
    <option value="someVal1">Option 1</option>
    <option value="someVal2">Option 2</option>
    <option value="someVal3">Option 3</option>
    <option value="someVal4">Option 4</option>
</select> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-10T13:18:11.180

接受的答案并没有像预期的那样对我有用。

如果您需要默认选择“选择一个选项”，这对我有用

```
<select id="selected_option" name="selected_option">
     <option value="default" selected="selected">Select one option </option>
     <option value="someVal1">Option 1</option>
     <option value="someVal2">Option 2</option>
     <option value="someVal3">Option 3</option>
     <option value="someVal4">Option 4</option>
</select> 
```

**选择**具有**id**和**name**也很重要，因此当您提交表单时，该值将成为 POST 或 GET 的一部分

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-06T16:05:54.940

```
 <select>
                            <option style="display:none">Empty</option>
                            <option>button1</option>
                            <option>button2</option>
                        </select>
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-08T12:06:06.137

尝试使用未设置值的选项

```
<select>    
    <option value>Select something</option>
    <option value="1">Foo</option>
    <option value="2">Bar</option>
</select> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-09-25T03:58:45.220

这是我用于设置默认提示的方式，但它不会设置默认值。它使用 HTML5 验证`required`。这可能与问题有点不同，但我希望它可以作为替代方案有所帮助。

```
<select id="car" name="car[brand]" required>
  <option disabled selected>Select Car Brand</option>
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="opel">Opel</option>
  <option value="audi">Audi</option>
</select> 
```

# android - 意图或会话错误？

> ID：15984437
> 
> 赞同：0
> 
> 时间：2013-04-13T05:01:48.267
> 
> 标签：android, session

**问题 1）**我有 2 个具有不同 TAB 布局的基本用户活动。

用户1：管理员用户2：消费者

每当我启动应用程序时，默认情况下它会将我重定向到没有会话的消费者活动标签。然后根据登录会话继续登录仅重定向到消费者活动的选项卡或管理活动的选项卡。

当我登录到管理员时，我被重定向到管理员会话的管理员活动选项卡。（正确的）

但是当我按下返回按钮时，

而不是重定向到登录布局或关闭应用程序，它重定向到带有管理会话的消费者选项卡（不正确）

我应该如何解决这个问题？我看到了某种旗帜？我不知道如何使用它。如果需要使用 xxx_FLAG，我应该在哪个布局中放置 FLAG？

**问题2）**当用户通过按下手机上的返回按钮或主页按钮关闭应用程序时如何销毁会话？

我目前的情况是当我以会员身份登录时，例如“abc”。当我关闭应用程序并再次进入时，它仍然是“abc”会话。除非我在关闭应用程序之前注销，否则它不会再有会话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:35:16.747

如果它对您有用，您可能只需严格控制后台堆栈，这样您就无法在以管理员身份登录后返回消费者选项卡。

但是对于你的第二个问题，覆盖 onBackPressed() 和调用完成应该达到你想要的结果（是否推荐不是我争论的地方）

```
@Override
public void onBackPressed() {
    finish();
} 
```

至于主页按钮，它不能被覆盖，所以我想你会想要将 finish() 添加到活动改变状态时被调用的各个地方（参见活动生命周期[http://developer.android.com /reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html) )

# knockout.js - 淘汰表排序器缓存行

> ID：15984438
> 
> 赞同：1
> 
> 时间：2013-04-13T05:02:11.533
> 
> 标签：knockout.js, tablesorter

我已经为这个问题头疼了大约 5-6 个小时。

我将 tablesorter 与 knockoutjs 结合使用。我的问题是使用 tablesorter 时，行被缓存，当我尝试删除行时，它们永远不会消失。我创建了一个解释问题的jsfiddle。您可以在小提琴中看到我的说明。

[http://jsfiddle.net/a8jUj/29/](http://jsfiddle.net/a8jUj/29/)

我看到很多文章都在讨论这类问题，但他们都说我们需要在更改表后调用触发器更新，但这对我不起作用。

```
 $("#list1").trigger("update"); 
```

请让我知道我做错了什么。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:12:04.660

我认为您遇到的问题是表本身不是空的，或者在更新时只包含一行。清除 tbody，然后添加您的行（[更新的演示](http://jsfiddle.net/Mottie/a8jUj/33/)）：

```
self.resetUsers = function (data, event) {
    self.users.removeAll();

    $("#list1").find('tbody').empty();

    self.users.push(new User({
        name: "Sidney",
        age: 26,
        active: 1
    }));

    $("#list1").trigger("update");
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T07:47:59.260

问题是`.tablesorter`插件不对`self.users`模型中的数组进行排序，它只对实际`<tr>`元素进行排序。您的列排序器必须`observableArray.sort`使用自定义比较器作为参数显式调用方法：

```
self.sortCol = function(colName, event) {

    // get sorting direction
    var th = event.target;
    th.sortDir = (th.sortDir == 'asc' ? 'desc' : 'asc');

    // array item comparator
    function comp(a, b){
        // get values to compare
        var av = a[colName](), bv = b[colName]();
        // compare using current direction
        if (th.sortDir == 'asc') {
            return av == bv ? 0 : av > bv ? 1 : -1;
        } else {
            return av == bv ? 0 : av < bv ? 1 : -1;
        }
    }
    // do sort
    self.users.sort(comp);
} 
```

工作小提琴：http: [//jsfiddle.net/a8jUj/31/](http://jsfiddle.net/a8jUj/31/)

PS仅举个例子，我已经`.sortCol()`通过函数绑定以获得对事件对象的访问权限。您可以重写模型以将当前排序参数存储在模型属性中。

# android - 亚马逊商店上的安卓应用

> ID：15984448
> 
> 赞同：0
> 
> 时间：2013-04-13T05:04:02.213
> 
> 标签：android, amazon

抱歉，如果这是一个愚蠢的问题，但我最近将一个 Android 应用程序上传到了 Google Play。一些用户要求我将它放到亚马逊商店，因为 Google Play 不允许他们在手机上下载它。

是否有关于如何执行此操作的说明？我尝试搜索它并找不到任何东西。我的大部分搜索结果都转到“如何在你的 Android 上下载亚马逊商店应用程序”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T05:05:53.507

我认为您需要在 Amazon Developers 获得一个帐户。请参阅此常见问题解答：[https ://developer.amazon.com/help/faq.html](https://developer.amazon.com/help/faq.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T05:19:22.627

在您将应用发布到 Google Play 商店后，亚马逊不会自动开始列出您的应用。您需要创建一个帐户（开发人员），然后将您的应用程序提交到 Amazon App Store。

这是您可以开始的地方：[https ://developer.amazon.com/welcome.html](https://developer.amazon.com/welcome.html)

*正如girlrockingguna*已经指出的那样，您将在此处获得更多帮助/信息：[https ://developer.amazon.com/help/faq.html](https://developer.amazon.com/help/faq.html)

请注意，Amazon App Store（以及随后您的应用程序以及所有其他可用的应用程序）仅在美国、法国、德国、意大利、西班牙、英国和日本可用。

为了提交您的应用程序，您将完成一系列步骤（总共 6 个），之后亚马逊团队将对其进行审核。

对于付费应用，他们有相同的 70% - 30% 的支出。显然对你来说更大的块。;-)

# html - 如何使图像允许文本在 HTML 中环绕它？

> ID：15984449
> 
> 赞同：0
> 
> 时间：2013-04-13T05:04:03.120
> 
> 标签：html, css, image

我正在创建我的第一个站点，它在此处在线发布：[链接到我的站点](http://studentweb.ewu.edu/jhazel/)

但是，您可以看到 UL（列表）或任何其他文本位于新行上，而不是与图像并排。我认为它应该在同一行，因为它在同一个标​​签中，但事实并非如此。

怎么修？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T05:06:06.470

使用`float`CSS 属性。这实际上是`float`财产的最初目的。

例如：

```
img#yourImage {
    float: left;
} 
```

不要忘记在`clear`您应用`float`. 或者，您可以在使用`clear`创建的“虚拟”元素上使用`:after`.

*更新*：[这个网站](http://www.tizag.com/cssT/float.php)实际上提供了一个很好的解释和例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T05:11:51.400

将此CSS添加到`ul.favourites`

```
display: inline-block;
vertical-align: top; 
```

我个人更喜欢这个`float:left`。我希望这有帮助！

# c++ - 通过非常量引用将使用自动关键字声明的 lambda 作为参数传递给 std::function 参数类型

> ID：15984453
> 
> 赞同：9
> 
> 时间：2013-04-13T05:04:42.407
> 
> 标签：c++, c++11, lambda

考虑以下代码：

```
#include <iostream>
#include <functional>

// passing function object by value
void foo(std::function<int(int, int)> f) {
    std::cout << f(3, 7) << std::endl;
}

// passing const function object by reference
void bar(const std::function<int(int, int)> & f) {
    std::cout << f(3, 7) << std::endl;
}

// passing non-const function object by reference
void fizz(std::function<int(int, int)> & f) {
    std::cout << f(3, 7) << std::endl;
}

int main() {

    std::function<int(int, int)> g1 = [] (int x, int y) { return x * y; };
    auto g2 = [] (int x, int y) { return x * y; };

    foo(g1);   // OK
    foo(g2);   // OK
    bar(g1);   // OK
    bar(g2);   // OK
    fizz(g1);  // OK

    // compile error:
    // error: invalid initialization of reference of type
    // 'std::function<int(int, int)>&' from expression of type
    // 'main()::<lambda(int, int)>'
    // error: in passing argument 1 of 'void fizz(std::function<int(int, int)>&)'
    fizz(g2);

} 
```

有人可以向我解释一下：

(a) 为什么`fizz(g2)`会产生编译错误，而其他构造不会？如果我在声明中明确键入它的类型，似乎可以通过引用传递一个 lambda，但如果我使用`auto`关键字，或者如果我将函数参数类型声明为`const`.

(b)这里的函数参数类型是什么意思*？* `const`

（C）~~在什么情况下我更喜欢按值传递而不是引用~~（更新：现在是一个单独的问题：[C++11：通过引用或值传递（lambda 或其他）函数对象？](https://stackoverflow.com/questions/15984499/c11-pass-lambda-or-other-function-object-by-reference-or-value)）？

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-13T05:36:10.003

在您的`fizz(g1)`情况下，`g1`已经是`std::function`. 因此，不需要隐式转换。所以`fizz`的参数是对 的非常量引用`g1`。

在`fizz(g2)`，`g2`不是一个。*_* `std::function`因此，编译器必须执行隐式转换。并且隐式转换返回一个*临时*的.

临时对象*不能*绑定到非常量引用；它们只能绑定到`const`引用或值。因此编译器错误。

> 函数参数类型中的 const 在这里是什么意思？

只能调用`const`对象的成员，不能将其隐式转换为 non- `const`，也不能`const`对其成员执行 non- 操作。

*你知道*`const`，就像.

一般来说，当一个函数通过非常量引用获取一个参数时，它说明了它打算如何处理该参数的一些非常特殊的事情。也就是说，您将一个对象交给它，并且它将用它做非常量的事情（即：修改该对象）。这就是临时变量不绑定到非常量引用的原因。这可能是用户的错误，因为临时可能不会更新您传递的原始对象。

除非`fizz`实际上要修改对象，否则您应该按值或按`const&`.

# twitter - Twitter API - 403 禁止错误

> ID：15984454
> 
> 赞同：2
> 
> 时间：2013-04-13T05:05:05.297
> 
> 标签：twitter

我有一个非常简单的代码片段，它一直工作到昨天，今天已经停止工作？

```
var url = 'http://search.twitter.com/search.json?q=dogs?callback=?';
var reddit = 'http://reddit.com/r/technology.json?callback=?';

$.getJSON(url, function(data) { 
    console.log(data);
});

//Error - GET http://search.twitter.com/search.json?q=dogs?callback=jQuery172082220473815687_1365829251904&_=1365829251949 403 (Forbidden) 
```

这是来源 - [http://jsfiddle.net/ZeuKp/2](http://jsfiddle.net/ZeuKp/2)

谁能告诉我为什么会收到 403 错误。我是否超过了 API 的速率，这在我刚刚打开本地服务器时似乎极不可能？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-04T15:48:27.767

我已经通过将消息字符长度减少到 140 个来解决这个问题。定义在这里[https://dev.twitter.com/overview/api/counting-characters](https://dev.twitter.com/overview/api/counting-characters)。

您还可以通过将 TwitterException 转换为 TwitterApiException 来检查 errrorCode 和 errorMessage。

```
 statusesService.update(newMessage, null, null, null,
                null, null, null, null, null, new Callback<Tweet>() {
                   @Override
                    public void success(Result<Tweet> result) {
                        Debugger.i("success", result.toString());
                    }
                 @Override
                    public void failure(TwitterException e) {
                        TwitterApiException twitterApiException = (TwitterApiException) e;
                       Debugger.e("failure", "getErrorCode() : " + twitterApiException.getErrorCode());
                        Debugger.e("failure", "getErrorMessage() : " + twitterApiException.getErrorMessage());
                    }
                }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-16T18:47:15.147

1 月 14 日，Twitter 对其进行了更改，以便在使用其 API 时只允许 SSL/HTTPS 连接。

403 错误是您尚未在应用中切换到 SSL/HTTPS 的常见迹象。

[http://www.zdnet.com/twitter-enforces-ssl-encryption-for-apps-connecting-to-its-api-7000025138/](http://www.zdnet.com/twitter-enforces-ssl-encryption-for-apps-connecting-to-its-api-7000025138/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-22T20:24:24.780

非常非常非常重要：您需要在您的 Twitter 开发帐户中申请“提升”访问权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-29T03:52:44.063

还有一点。如果您使用 API v1，例如这个库 [https://github.com/twitter/hbc](https://github.com/twitter/hbc)用于访问流 API ( [https://stream.twitter.com](https://stream.twitter.com) )。

您的项目需要具有高级访问权限，并且您需要申请它，因为最初它只有基本访问权限。该应用程序是免费的。

您可以在此处查看您的项目是否具有 Elevated 访问权限 [https://developer.twitter.com/en/portal/products/elevated](https://developer.twitter.com/en/portal/products/elevated)

# javascript - wscript.shell 适用于 javascript 但不适用于 vbscript

> ID：15984456
> 
> 赞同：5
> 
> 时间：2013-04-13T05:05:26.140
> 
> 标签：javascript, vbscript, hta

我的特殊问题涉及 HTA 中带有 VBScript 的 WScript 对象。

```
<script language="VBScript">
    Sub test()
       Set objShell = CreateObject("WScript.Shell") 
    End Sub
</script> 
```

这在我的工作计算机（Windows 7 企业版）上完美运行，但不适用于我家中的计算机（Windows 8 家庭版），也不适用于我母亲的计算机（Windows 7 家庭版）。

可是等等！还有更多！

起初我以为库可能不存在，但我检查了我编写的另一个使用 JavaScript 的程序，它没有问题。在我的应用程序中测试了 javascript，它运行良好。

```
<script language="JavaScript">
    function javaTest()
    {
        objShell = new ActiveXObject("WScript.Shell");
    }
</script> 
```

这是我不断收到的错误。

错误：找不到提供程序。它可能没有正确安装。

我不断遇到有关 64 位与 32 位的解决方案，我尝试了它们，但它不起作用。它也没有解释为什么它适用于 JavaScript 而不是 VBScript。我很沮丧，到处搜索，我现在真的很想要一个 McDouble。因此，任何信息都将不胜感激，即使您必须告诉我“这毫无希望。用 JavaScript 重写整个事情”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T07:05:20.803

在这台计算机的浏览器中启动 ActiveX 对象时，您可能有不同的设置。要使其启动，请尝试在浏览器中对其进行配置：

*   在工具上打开
*   选择 Internet 选项...
*   选择安全选项卡。
*   在 Web 内容区域中选择 Internet。（或您的网页所在的区域）
*   然后，单击自定义级别...
*   在列表中查找 ActiveX 部分（真的很长）
*   在 ActiveX 设置中选择提示或启用

# php - PHP/Ajax 分页缩略图

> ID：15984458
> 
> 赞同：0
> 
> 时间：2013-04-13T05:05:34.817
> 
> 标签：php, ajax, database, pagination

我的主要目标是创建一个带有照片缩略图的分页。我已经成功地创建了自己的分页。但问题是，我知道如何使用 ajax，只是不知道如何将 ajax 应用到它上面，这样它对用户更友好。有人可以帮助我吗，我一直在努力寻找这个问题的答案。下面是我的代码。

```
<?php
  require 'php/connect.inc.php';
  $per_page = 3;

  $pages_query = mysql_query("SELECT COUNT('id') FROM my_list");
  $pages = ceil(mysql_result($pages_query, 0) / $per_page);

  $page = (isset($_GET['page'])) ? (int)$_GET['page'] : 1;
  $start = ($page - 1) * $per_page;

  $query = mysql_query("SELECT id, image_small FROM my_list LIMIT $start, $per_page");
  while($mysql_fetch_assoc = mysql_fetch_assoc($query)){
    echo "<img src=".'img/uploads/'.$mysql_fetch_assoc['image_small'].">";
  }

  if ($pages >= 1 && $page <= $pages){
    for ($x=1; $x <= $pages; $x++){
      echo ($x == $page) ? '<strong><a href="?page='.$x.'">'.$x.'</a></strong> ' : '<a href="?page='.$x.'">'.$x.'</a>';
    }
  }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:40:53.920

当您构建应用程序 json 时，您需要两件事，首先是一个返回适当响应的脚本，另一个是发出请求的客户端。

这是一个返回的脚本示例`json`

```
<?php
  require 'php/connect.inc.php';
  $per_page = 3;

  $pages_query = mysql_query("SELECT COUNT('id') FROM my_list");
  $pages = ceil(mysql_result($pages_query, 0) / $per_page);

  $page = (isset($_GET['page'])) ? (int)$_GET['page'] : 1;
  $start = ($page - 1) * $per_page;

  $query = mysql_query("SELECT id, image_small FROM my_list LIMIT $start, $per_page");

  $results = array();
  while($mysql_fetch_assoc = mysql_fetch_assoc($query)){    
    $results[] = $mysql_fetch_assoc['image_small'];
  }      

  header('Content-type: application/json');

  echo json_encode(array(
    'thumbs' => $results,
    'pages' => $pages,
    'current_page' => $page,
    'per_page' => $per_page
  ));

?> 
```

这是一个用于发出请求的简单客户端脚本（使用[jQuery](http://jquery.com/)的javascript ）

```
$.ajax({
  url: "yourscript.php?page=1"
}).done(function(data) {
  $.each(data.thumbs, function(thumb) {
    // to something
  });
}); 
```

最后建议大家不要`mysql_query`和他的同伙一起使用。不**推荐**阅读[php.net/mysql_query](http://php.net/manual/es/function.mysql-query.php)

# c - 从文本文件加载到 C 中的数组

> ID：15984459
> 
> 赞同：0
> 
> 时间：2013-04-13T05:05:36.777
> 
> 标签：c

我在从行分隔的文本文件中加载一些代码时遇到了一些问题，该文件的格式如下：

```
aa
bb
dd
ccasdf
dfdsafefasd
vdasfeadsaf
cvdasegfdjasflfe
swedtd 
```

对于一个数组，我只想得到一个包含文本文件中所有内容的数组......这是我的代码：

```
#include<stdio.h>
#include<string.h>

int main()
{
    int size = 0;
    char peeps[10000][50];
    FILE *people = fopen("test.txt","r");
    while(fscanf(people,"%s",peeps[size]) != EOF)
{
    size++;
}
fclose(people);
return 0;
} 
```

当我运行它时，我得到一个段错误，我查看了 gdb 吐出的内容，但我不知道如何修复它......这是 gdp 打印出来的：

```
Program received signal SIGSEGV, Segmentation fault.
_IO_vfscanf_internal (s=s@entry=0x804a008, format=format@entry=0x804865f "%s",     argptr=argptr@entry=0xbff85298 "4X\305I", 
    errp=errp@entry=0x0) at vfscanf.c:1073
1073                  *str++ = c;
(gdb) bt
#0  _IO_vfscanf_internal (s=s@entry=0x804a008, format=format@entry=0x804865f "%s", 
    argptr=argptr@entry=0xbff85298 "4X\305I", errp=errp@entry=0x0) at vfscanf.c:1073
#1  0xb7e5564d in __isoc99_fscanf (stream=0x804a008, format=0x804865f "%s") at     isoc99_fscanf.c:35
#2  0x08048581 in main () at fdsa.c:10 
```

有谁知道出了什么问题？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T05:13:54.803

> 有谁知道出了什么问题？？？

一、三个连续的问号。

二、`scanf(people,"%s",peeps[size]) != EOF)`- 如果您只想将文件读入内存，那么***永远不要***使用`scanf()`它。

三、不要`int`用于尺寸。使用`size_t`，它在标准库中是有充分理由的。

```
FILE *f = fopen("foo.txt", "r");
size_t total_size = 0;
size_t num_bytes = 0;

char buf[0x1000];
char *result = NULL;

while ((num_bytes = fread(buf, 1, sizeof(buf), f)) > 0) {
    char *p = realloc(result, total_size + num_bytes);
    if (p == NULL) {
        fclose(f);
        free(result);
        abort(); // whatever, out of memory
    }

    result = p;
    memcpy(result + total_size, buf, num_bytes);
    total_size += num_bytes;
}

fclose(f); 
```

如果您想提高一点效率，请实现动态缓冲区的对数扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T05:13:56.907

尝试将您的测试从 更改`!= EOF`为`> 0`。

该标准（N1256 草案的§7.19.6.2 ¶16，出于好奇）指出：

> 如果在任何转换之前发生输入失败，该`fscanf`函数将返回宏的值。`EOF`否则，该函数返回分配的输入项的数量，如果发生早期匹配失败，该数量可能少于提供的数量，甚至为零。

我怀疑您的 C 标准库没有将 EOF 解释为错误条件，因此它不是返回`EOF`，而是零。

我应该注意，标准中的示例都使用`feof`而`ferror`不是检查返回值`fscanf`来检查文件结尾。

# windows - 创建一个批处理文件以下载多个 url

> ID：15984465
> 
> 赞同：-2
> 
> 时间：2013-04-13T05:06:38.103
> 
> 标签：windows, variables, batch-file, cmd

下载器是`download.exe`

```
@echo off
set /p %d% `enter file to load here`
download.exe -u www.xyz.com/1s21.zip -o 1s21.zip
download.exe -u www.xyz.com/1s22.zip -o 1s22.zip
download.exe -u www.xyz.com/1d23.zip -o 1d23.zip
download.exe -u www.xyz.com/1411.zip -o 1411.zip
download.exe -u www.xyz.com/%d%.zip -o %d%.zip
....
...
..
. 
```

我可以使用将从另一个文件加载名称的变量`%d%`，这样我就不必再次编写整个程序了

和`%d%`文件的结构看起来像这样

```
1s21
1s22
1s23
...
..
. 
```

* * *

我想要的是读取包含名称的文件并将这些名称插入下载脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T06:47:04.633

尝试：

```
for /f "delims=" %%i in (names.txt) do download.exe -u "www.xyz.com/%%~i.zip" -o "%%~i.zip" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T05:13:58.157

```
@echo off
for /f %%i in (filename) do download.exe -u www.xyz.com/%%i -o %%i 
```

这将做你想要的。

正常的

```
for %%i in (item1 item2 item3) 
```

从括号之间读取列表

该`/f`选项告诉它括号之间存在文件名，并且必须从文件中读取列表。

对于列表中的每个项目，`do`将调用后面的部分。

这假设文件的每一行只有一个文件名。

此外，如果您需要为列表中的每个项目执行多个命令，您可以执行

```
for /f %%i in (filename) do (
first command
second command
) 
```

使用此示例调试您的问题

```
C:\tmp>type names.txt
kd11
kd12

C:\tmp>type down.bat
@echo off
setlocal EnableExtensions
for /f %%i in (names.txt) do echo %%i

C:\tmp>down.bat
kd11
kd12 
```

如果上述方法有效，则将 for 更改为

```
for /f %%i in (names.txt) do download.exe -u www.xyz.com/%%i -o %%i 
```

# android - 在android设备sdcard中设置数据库的路径？

> ID：15984471
> 
> 赞同：0
> 
> 时间：2013-04-13T05:07:06.293
> 
> 标签：android, sqlite

我正在通过 sqlite 管理器处理数据库并将其放入资产中，并提供了我想要创建数据库的路径。

它在模拟器中工作正常，但是当使用真实设备时它不工作（数据库未创建）......

我尝试了很多方法来解决，但无法得到解决方案..

这就是我所做的： private static String DB_PATH= Environment.getDataDirectory() +

“/data/my_package_name/databases/”；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:51:31.850

我可以用这个解决这个问题：

私有静态字符串 DB_PATH = Environment.getExternalStorageDirectory().toString()+"/data/my_package_name/databases/";

:) 愚蠢的一个，但现在我从所有方法中都知道了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T05:15:23.277

在你的数据库类中，它扩展了`SQLiteOpenHelper`你应该在字符串 DB_PATH 和 DB_NAME 之下。

```
public String DB_PATH = "data/data/YOUR_PACKAGE_NAME/databases/"; // path of your datbase
public static String DB_NAME = "xyz.sqlite";// your database name 
```

# javascript - 如何设置带有图片的确认框（javascript）

> ID：15984472
> 
> 赞同：2
> 
> 时间：2013-04-13T05:07:16.603
> 
> 标签：javascript

在 Chrome 网上商店中，当我添加一个新应用程序时，有一个带有图片（应用程序图标）的确认框询问我。我试图搜索 JavaScript 代码以找到答案，但没有结果。

它是由 JavaScript API 创建的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T05:20:43.183

它使用 Chrome-webapp-specific 代码：[内联安装](https://developers.google.com/chrome/web-store/docs/inline_installation)

```
<link rel="chrome-webstore-item"
    href="https://chrome.google.com/webstore/detail/[app-id]"> 
```

```
button.addEventListener("click", function(){
    chrome.webstore.install();
}); 
```

这不适用于未经验证的网页或 Chrome 以外的浏览器，因为它不是[规范性 JavaScript (ECMAScript) 规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)的一部分。

如果您打算在您的网站中实现带有图像的确认框，请尝试使用[jQuery UI 的模态对话框](http://jqueryui.com/dialog/#modal-confirmation)。

# jquery - JQuery UI自动完成实现不起作用

> ID：15984475
> 
> 赞同：2
> 
> 时间：2013-04-13T05:07:35.727
> 
> 标签：jquery, html, jquery-ui, css, autocomplete

我正在尝试实现 JQuery UI 提供的自动完成功能，我想知道如何通过放置提供的源代码来做到这一点：

```
 <script>
  $(function() {
    var availableTags = [
      "ActionScript",
      "AppleScript",
      "Asp",
      "BASIC",
      "C",
      "C++",
      "Clojure",
      "COBOL"
    ];
    $( "#tags" ).autocomplete({
      source: availableTags
    });
  });
  </script> 
```

进入我的 script.js 文件。在我的 .html 文件中，我有：

```
 <link rel="stylesheet" type="text/css" href="stylesheet.css">
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
    <script type="text/javascript" src="script.js"></script> 
```

其中 script.js 是我的 .js 文件。我试过把它放在我的 .js 文件中：

```
$(document).ready(function() {
    var availableTags = [
      "ActionScript",
      "AppleScript",
      "Asp",
      "BASIC",
      "C",
      "C++",
      "Clojure",
      "COBOL"
    ];
    $( "#tags" ).autocomplete({
       source: availableTags
    });
}); 
```

这在我的 .html 文件中：

```
<form class="ui-widget" name="phoneForm">
    <label for="tags">Tags: </label>
    <input id="tags" name="phoneItem" placeholder="Add a Phone"/>
</form> 
```

但这不起作用。任何人都可以帮助我了解我做错了什么并指出我的写作方向吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-28T14:24:06.947

你试过这个吗：

```
<html>

<head>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <script>
        $(function() {
            var availableTags = [
                "United States",
                "France",
                "Germany",
                "China",
                "Australia",
                "England",
                "Saouth Korea",
                "India"
            ];
            $("#tags").autocomplete({
                source: availableTags
            });
        });
    </script>
</head>

<body>
    <label for="tags">Tags: </label>
    <input id="tags" placeholder="Enter Some Text…">
</body>

</html> 
```

你可以在这里尝试演示： [demo](http://tutorialsplane.com/jquery-ui-autocomplete-demo/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-07T21:17:58.773

您在结束标签周围缺少引号：

```
$("#currentList").append("<div class='item'>" + toAdd + </div>); 
```

应该：

```
$("#currentList").append("<div class='item'>" + toAdd + "</div>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T05:47:47.317

确保不要在 .js 文件中包含 HTML 元素。（取出`<script> ... </script>`）。确保 script.js 与 HTML 文件位于同一文件夹目录中。

现在在**JavaScript** (script.js) 中：

```
// First line is a short for $(document).ready(function(){ ... });
    $(function() { 
        var availableTags = [
          "ActionScript",
          "AppleScript",
          "Asp",
          "BASIC",
          "C",
          "C++",
          "Clojure",
          "COBOL"
        ];

        $( "#tags" ).autocomplete({
          source: availableTags
        });

    }); 
```

在**HTML**中：

```
<!DOCTYPE HTML>
<html>
    <head>
        <title></title>

        <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
        <script type="text/javascript" src="script.js"></script>

        <link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css">

    </head>

    <body>
        <form>
            Autocompleted field: <input id="tags" type="text"  placeholder="Fill me" />
        </form>
    </body>

</html> 
```

请注意，在我们拥有的 HTML 输入元素中`id="tags"`，在 JavaScript 中我们`$("#tags")`用来指出该 HTML 元素。

现在你应该准备好了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T20:41:52.557

所以事实证明我在那里的代码是 100% 工作的，原因是因为我试图实现的其他代码。我希望能够单击一个按钮，将自动完成 UI 中的字符串添加到页面上的列表中，所以我尝试这样做：

```
$(document).ready(function() {
    var availableTags = [
      "ActionScript",
      "AppleScript",
      "Asp",
      "BASIC",
      "C",
      "C++",
      "Clojure",
      "COBOL"
    ];
    $( "#tags" ).autocomplete({
       source: availableTags
    });

    $("#addButton").click(function() {
        var toAdd = $("input[name=phoneItem]").val();
        $("#currentList").append("<div class='item'>" + toAdd + </div>);
    });
}); 
```

这不仅不起作用，而且会导致自动完成和我的 .js 文件中的所有其他内容也不起作用。任何关于为什么会这样的想法都会有所帮助，再次感谢大家！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T06:11:57.030

这是 jQuery UI 的基本设置，[http://jsfiddle.net/steelywing/bZP9A/](http://jsfiddle.net/steelywing/bZP9A/)

索引.html

```
<html>
<head>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css">
</head>
<body>
<label for="tags">Tags: </label>
<input id="tags" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<script src="auto.js"></script>
</body>
</html> 
```

自动.js

```
$(document).ready(function() {
    var availableTags = [
      "ActionScript",
      "AppleScript",
      "Asp",
      "BASIC",
      "C",
      "C++",
      "Clojure",
      "COBOL"
    ];
    $( "#tags" ).autocomplete({
       source: availableTags
    });
}); 
```

# wordpress - Wordpress 插件卸载不起作用

> ID：15984478
> 
> 赞同：2
> 
> 时间：2013-04-13T05:08:37.457
> 
> 标签：wordpress, plugins, uninstallation

卸载钩子无法正常工作，因为当我卸载插件时，表没有被删除。请帮我解决一下这个。这是我正在使用的以下代码。请告诉我我错过了什么。

```
register_uninstall_hook( __FILE__, 'plugin_db_uninstall' );

function plugin_db_uninstall() {
    global $wpdb;

    $table_name = $wpdb->prefix."user_master";  
    $wpdb->query("DROP TABLE IF EXISTS $table_name");

    $table_name = $wpdb->prefix."candidate_master";
    $wpdb->query("DROP TABLE IF EXISTS $table_name");

} 
```

完整代码

```
define('TXTFOLDER', plugins_url()."/candidate_section/txtfiles");

function candidate_install () {
    if (!file_exists(TXTFOLDER)) {
        mkdir(TXTFOLDER, 0777);
    }
}

function candidate_section_create_table()
{

    global $wpdb;

        $sql = 
        "CREATE TABLE IF NOT EXISTS `".$wpdb->prefix."user_master`
        (
          `id` bigint(20) NOT NULL AUTO_INCREMENT,
          `name` varchar(255) NOT NULL,
                  `email` varchar(255) NOT,NULL,
          PRIMARY KEY (`id`)
        ) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;";
        dbDelta($sql);

        $sql1 = 
        "CREATE TABLE IF NOT EXISTS `".$wpdb->prefix."candidate_master` 
        (
          `id` bigint(20) NOT NULL AUTO_INCREMENT,
          `user_id` bigint(20) NOT NULL,
                  `position` varchar(255) NOT NULL,
                  `status` int(11) NOT NULL,
           PRIMARY KEY (`id`)
        )  ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;";

        dbDelta($sql1);

}

function plugin_db_uninstall() {
        global $wpdb;

        $table_name = $wpdb->prefix."user_master";  
        $wpdb->query("DROP TABLE IF EXISTS $table_name");

        $table_name = $wpdb->prefix."candidate_master";
        $wpdb->query("DROP TABLE IF EXISTS $table_name");

    }

if (is_admin()) { 
add_action('admin_menu', 'candidate_menu');
register_activation_hook(__FILE__, 'candidate_install');
register_activation_hook( __FILE__, 'candidate_section_create_table' );
register_uninstall_hook( __FILE__, 'plugin_db_uninstall' );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T06:29:42.553

我对原因并不积极，但我可以看到两件事。一个是您可以`register_*_hook`从内部删除所有 3 个`is_admin()`并将它们留在任何条件之外。

*PS：你为什么有**两个** `*_activation_hook`s？*

另一种是使用文件[`uninstall.php`](https://wordpress.stackexchange.com/q/80350/12615)而不是`register_uninstall_hook`. 我没有找到我看到讨论的钩子陷阱的链接，但很长一段时间以来我只使用该`uninstall.php`方法。

Codex 中有[这个注释](http://codex.wordpress.org/Function_Reference/register_uninstall_hook)，但没有进一步说明*原因*：

> 重点放在使用“uninstall.php”卸载插件的方式上，而不是 register_uninstall_hook。

以及指向此 WordPress 答案的链接：[卸载、激活、停用插件：典型功能和操作方法](https://wordpress.stackexchange.com/q/25910/12615)。
但是检查那里[的所有结果](https://wordpress.stackexchange.com/search?q=%22uninstall.php%22)。

# php - 导出到 Excel 时出现奇怪的字符

> ID：15984480
> 
> 赞同：1
> 
> 时间：2013-04-13T05:09:38.297
> 
> 标签：php, mysql, database, excel, utf-8

嗨，我正在使用 php 上的下一个代码导出到 excel。实际上它很好用..但我总是得到奇怪的字符，比如？插入 áéíóú 等 (UTF8)

我发现添加..

```
Response.Charset = "UTF-8";
Response.ContentEncoding = System.Text.Encoding.Default; 
```

会解决我的问题..

但我不能把它放在这里，我总是得到 500 服务器错误。

这是我的代码

```
//insertamos los headers que van a generar el archivo excel
header('Content-type: application/vnd.ms-excel');
//en filename vamos a colocar el nombre con el que el archivo xls sera generado
header("Content-Disposition: attachment; filename=ventas.xls");
header("Pragma: no-cache");
header("Expires: 0");

//hacemos la conexion al servidor MySql
$dbhost                         = "xxx";
$dbuser                         = "xxx";
$dbpass                         = "xxx";
$dbname                         = "xxx";

$conexio = mysql_connect($dbhost, $dbuser, $dbpass) or die ("Error connecting to database");
mysql_select_db($dbname);
//realizamos la consulta
$tableName="usuarios";  
$sql = mysql_query("SELECT id,name,lastname,email,codigo, media, phone, Pcode, birth FROM $tableName",$conexio);
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Reporte de ventas</title>
</head>

<body><!–Vamos a crear una tabla que será impresa en el archivo excel –&gt;

<table width="600" border="0">
<tr>
<th width="600">

<!-–Imprimimos un titulo -–&gt;

<div style="color:#003; text-align:center; text-shadow:#666;"><font size="+2">Reporte de Ventas <br />Usuarios</font></div></th>
</tr>
</table>

<!–-creamos la tabla de el reporte con border 1 y los títulos-–&gt;

<table width="641" border="1">
<tr>
<th width="50%" style="background-color:#006; text-align:center; color:#FFF"><strong>Ventas</strong></th>
<th width="50%" style="background-color:#006; text-align:center; color:#FFF"><strong>Fecha</strong></th>
</tr>
<?php
// Un proceso repetitivo para imprimir cada uno de los registros.
while($row = mysql_fetch_array($sql)){
echo "
<tr>
<td bgcolor=\"#ededed\" align=\"center\">{$row['name']}</td>
<td bgcolor=\"#ededed\" align=\"center\">{$row['email']}</td>
</tr>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T06:39:23.597

好的，我找到了答案..

需要申请 mb_convert_encoding

```
while($row = mysql_fetch_array($sql)){

    foreach($row as &$value)
  {
    $value = mb_convert_encoding($value, "UTF-8", "Windows-1252");
  } 
```

对于我使用的标题

```
header("Content-Type:   application/vnd.ms-excel; charset=utf-8");
header("Content-type:   application/x-msexcel; charset=utf-8");
header("Content-Disposition: attachment; filename=ventas.xls");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: private",false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-30T01:15:17.400

把它放在 Excel::create 之前

ob_clean();

# asp.net-mvc - 单击 MVC 3.0 剃须刀中的下拉列表时显示复选框列表面板

> ID：15984481
> 
> 赞同：0
> 
> 时间：2013-04-13T05:09:40.510
> 
> 标签：asp.net-mvc, razor

我想在下拉列表中创建一个复选框列表。我希望用户能够对项目进行多选。我想在下拉列表中显示项目，每个项目旁边都有一个复选框以进行选择。是有办法做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:14:53.147

它不能使用标准下拉列表来完成，但您可以通过创建自己的自定义下拉结构来完成。这个答案有点太多了，但一些想法是：

可以折叠和展开的 z 索引可滑动面板。需要 z-index 以确保下拉列表浮动在其部分的顶部。您可以在面板中放置您想要的任何标记，包括复选框列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T22:47:17.970

[Eric Hynds 的这个 jquery 小部件](http://www.erichynds.com/examples/jquery-ui-multiselect-widget/demos/)非常适合您尝试做的事情。

# key - 脚本故障排除

> ID：15984482
> 
> 赞同：0
> 
> 时间：2013-04-13T05:09:46.247
> 
> 标签：key, activation

我正在尝试使用 AHK，并希望在我玩 runescape 时让它加载所有的东西。我不知道我的第一个剧本出了什么问题，所以如果有人能指出它的出处，我会永远感激不尽。这是脚本。

```
#r::Run C:\Users\Hassan\Desktop\runescape.exe
Run C:\Program Files (x86)\Mumble\mumble.exe
Run C:\Users\Hassan\AppData\Roaming\Spotify\spotify.exe
Run www.google.com
Run www.zybez.com
Run www.reddit.com
return 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T17:10:54.583

```
#r::
Run C:\Users\Hassan\Desktop\runescape.exe
Run C:\Program Files (x86)\Mumble\mumble.exe
Run C:\Users\Hassan\AppData\Roaming\Spotify\spotify.exe
Run http://www.google.com
Run http://www.zybez.com
Run http://www.reddit.com
return 
```

不要把东西和热键放在同一行。您可能还需要将 http:// 添加到 url。

# android - 更改网络状态后在哪里调用代码

> ID：15984483
> 
> 赞同：0
> 
> 时间：2013-04-13T05:09:50.083
> 
> 标签：android, networking, onresume

我正在开发一个 Android 应用程序，该应用程序需要连接到互联网才能工作（填充 listView）。很明显，当我输入它时，我会检查是否有连接（这个链接以这种方式帮助了我：[当互联网连接在 android 应用程序中不可用时显示警报](https://stackoverflow.com/questions/10242351/display-an-alert-when-internet-connection-not-available-in-android-application)）。

如果没有连接，则会出现一个 alertDialog，告诉用户要么退出应用程序，要么进入设置并启用网络访问。因此，在用户启用并返回后，我基本上需要运行需要访问权限的代码......我的问题是......我应该将 if 子句中的代码从下面放在哪里？在 onResume() 或 onRestart 中？

这是我到目前为止的代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (checkNetworkStatus()){
            System.out.println("i have internet !!!!!!!!");
        overridePendingTransition(R.anim.slide_left,R.anim.fade);

        setContentView(R.layout.activity_start);
        handler = new Handler();

        Button newOrderButton = (Button) findViewById(R.id.new_order_button);
        newOrderButton.setOnClickListener(newOrderListener);

        Button previousOrderButton = (Button) findViewById(R.id.previous_orders_button);
        previousOrderButton.setOnClickListener(previousOrderListener);
    } else {
        System.out.println("I don't have internet !!!!!!!!");
            AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(Start.this);
            .........
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:45:57.617

如果用户离开活动以打开网络访问，那么无论如何您当前的活动将调用 OnPause()。当用户下次打开您的活动时，肯定会调用 OnResume() ，无论用户退出应用程序还是只是进入设置并返回。检查[此](http://developer.android.com/reference/android/app/Activity.html)以查看解释调用这些函数的顺序的流程图。它将消除您对放置所需代码的位置的疑问。希望这可以帮助。

# jquery - Facebook、Google + 分享按钮如何工作？

> ID：15984486
> 
> 赞同：0
> 
> 时间：2013-04-13T05:10:21.697
> 
> 标签：jquery, facebook, iframe, share, google-plus

有没有人知道 facebook/google+ 分享按钮是如何工作的，那些位于网站、博客等上的按钮？我知道它的 javascript、iframe 等，但肯定可以使用深入分析，也许可以从这里的一位大师那里开始。这肯定会受到赞赏。我对一个新的 API 有一个惊人的独特想法，它可以放在其他社交分享按钮旁边，真的很想把它拿出来。

我不会放置任何代码，因为我正在寻找可以正确完成的基础，而不是修复我现在拥有的东西。我也不是在寻找任何人在一天中抽出 5 个小时，只是在寻找一个起点，也许是一个正确方向的点。

谢谢，我希望。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T14:05:13.810

看看 Google I/O 的演示文稿，我们讨论了 +1 按钮是如何构建的：[http ://www.youtube.com/watch?v=4rlbTVkyJc4](http://www.youtube.com/watch?v=4rlbTVkyJc4)

# .net - 反逆向工程

> ID：15984494
> 
> 赞同：-1
> 
> 时间：2013-04-13T05:12:06.847
> 
> 标签：.net, .net-reflector

我试图阻止我的应用程序受到反射器的影响，但由于某些应用程序功能无法正常工作，因此无法使用 .net 代码保护和混淆软件。所以请提供其他想法或技术以防止逆向工程

我有用于逆向工程[链接的应用程序名称列表](http://www.overloadit.com/2009/03/01/net-code-protection-and-obfuscators/)

目前，我参考An Anti Reverse Engineering Guide文章，但如何使用AntiRE.h不知道[链接](http://www.codeproject.com/Articles/30815/An-Anti-Reverse-Engineering-Guide)

如果您知道，请帮助。

VS2010 vb.net中的应用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T06:44:03.247

利用反射发射的优势。所以你可以写一些代码`IL`：

```
static DynamicMethod Method6()
{
    DynamicMethod method1 = new DynamicMethod("Method5", typeof(void),
        new Type[] { typeof(DateTime) });
    ILGenerator il = method1.GetILGenerator();

    il.EmitWriteLine("In function 6: ");
    il.Emit(OpCodes.Ldarg_0);
    il.Emit(OpCodes.Box, typeof(DateTime));
    il.Emit(OpCodes.Call, typeof(Console).GetMethod("WriteLine",
        new Type[] { typeof(object) }));

    il.Emit(OpCodes.Ret);

    return method1;
} 
```

您可以使用 emit 和 UpCodes 做更多事情：

1.  [http://blog.alxandr.me/2010/10/16/an-introduction-to-system-reflection-emit-and-opcodes/](http://blog.alxandr.me/2010/10/16/an-introduction-to-system-reflection-emit-and-opcodes/)
2.  [http://msdn.microsoft.com/en-us/library/3y322t50.aspx](http://msdn.microsoft.com/en-us/library/3y322t50.aspx)
3.  [http://www.devx.com/dotnet/Article/28783](http://www.devx.com/dotnet/Article/28783)
4.  [http://en.csharp-online.net/Attributes_and_Reflection%E2%80%94Reflection_Emit](http://en.csharp-online.net/Attributes_and_Reflection%E2%80%94Reflection_Emit)

# c++ - C ++ 11：通过引用或值传递（lambda或其他）函数对象？

> ID：15984499
> 
> 赞同：9
> 
> 时间：2013-04-13T05:13:04.820
> 
> 标签：c++, c++11, reference, lambda

这最初是这个问题的一部分：

[通过非常量引用将使用自动关键字声明的 lambda 作为参数传递给 std::function 参数类型](https://stackoverflow.com/questions/15984453/passing-lambda-declared-using-auto-keyword-by-non-const-reference-as-argument-to)

但我决定将其单独制作。

在什么情况下通过引用或值传递 lambda 或其他函数对象更好/更惯用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-13T05:39:12.237

您对“lambda”使用与作为参数的*任何对象相同的规则。*

如果函数的目的是为调用者修改对象，则函数应该使用非常量引用。`const&`如果该函数只是使用对象而不更改它，则应该使用该函数。如果要将对象复制/移动到其内部存储中，它应该按值传递。

# iphone - 从 MKUserTrackingModeFollowWithHeading 切换模式时，如何在 iOS 6 中始终保持 MKMapView 朝北

> ID：15984500
> 
> 赞同：6
> 
> 时间：2013-04-13T05:13:23.057
> 
> 标签：iphone, ios, objective-c, mkmapview, android-mapview

我正在使用,和在三种不同的`map`方向模式之间切换，这很有效。`MKUserTrackingModeNone``MKUserTrackingModeFollow``MKUserTrackingModeFollowWithHeading`

但是，当`MKUserTrackingModeFollowWithHeading`从`MKUserTrackingModeNone`.

在内置的地图应用程序上`iphone/ipad`，流程是这样的：

当您启动应用程序时，它处于模式`MKUserTrackingModeNone`并且是北向的。当您切换方向模式时，它会变为`MKUserTrackingModeFollow`，并且方向仍然是北。

当您再次切换时，它会变为`MKUserTrackingModeFollowWithHeading`，并且地图会根据您面向/指向 iPhone 的方向旋转。

当您再次切换方向时，它会变回`MKUserTrackingModeNone`，并且地图很好地旋转回北向。

我希望我的应用程序在切换模式时在方向上的行为方式相同，但是当我按照上面的步骤 4 进行操作并从`MKUserTrackingModeFollowWithHeading`to切换时`MKUserTrackingModeNone`，方向保持在进行方向切换之前的状态，而不是旋转回北向。

我正在使用`MKUserTrackingBarButtonItem`放置在工具栏中的标准控件进行方向切换。

有人请帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T23:46:10.600

我在运行 iOS 6.1.4 的 iPhone 5 上也遇到了这个问题。我使用这个简单但丑陋的快速修复来强制地图视图旋转回北方：

```
-(void)someMethod
{
    // Currently in MKUserTrackingModeFollowWithHeading mode

    // Set tracking mode back to MKUserTrackingModeFollow
    [_mapView setUserTrackingMode:MKUserTrackingModeFollow];

    // After a short delay, set mode to MKUserTrackingModeNone
    [self performSelector:@selector(mapViewTrackingModeNone)
               withObject:nil
               afterDelay:0.2];

}

- (void)mapViewTrackingModeNone
{
    [_mapView setUserTrackingMode:MKUserTrackingModeNone];

    // Bang! The map rotates back to North-Up
} 
```

可能有更好的方法来做到这一点，但我还没有找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:57:25.163

您应该将一个小型测试应用程序放在一起，其中只有一个地图视图和一个 MKUserTrackingBarButtonItem 并将两者链接在一起。如果它应该按照您的描述进行并且不需要一行代码。所有的连接都可以在 IB 中完成。一旦你看到工作正常，你可以返回你的代码并重复这个过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T19:01:54.063

在 iOS 5 中，它会为您向北切换，但在 iOS 6 中则不会。您可以在 bugreport.apple.com 上提交增强请求。

您可以实现委托回调函数并在委托回调中应用旋转...

```
- (void)mapView:(MKMapView *)mapView didChangeUserTrackingMode:(MKUserTrackingMode)mode animated:(BOOL)animated
{
    if (mode == MKUserTrackingModeNone)
        [self rotateTheMapView];
}

- (void)rotateTheMapView {
    // See https://stackoverflow.com/q/1245461/1445366
} 
```

（有关旋转说明和代码，请参阅[使用指南针方向旋转 MapView 。）](https://stackoverflow.com/q/1245461/1445366)

问题是 Apple 没有使用其内部逻辑公开当前的确切旋转，因此 iOS 提供给您的当前航向的任何计算都可能略有偏差，导致您的地图在完成后略微偏北。

# javascript - Node.js、processing.js 和无浏览器

> ID：15984501
> 
> 赞同：2
> 
> 时间：2013-04-13T05:13:42.350
> 
> 标签：javascript, node.js, raspberry-pi, xorg, processing.js

我想一起使用 node.js 和 processing.js 并将画布路由到 X 窗口。基本上我想修补一些 LCD 显示器和一个 Raspberry Pi，但我想在不使用浏览器的情况下使用 JavaScript 来做一些简洁的事情。

我想强调我正在尝试这样做是因为我想这样做，而不是出于任何其他原因或其他任何人——尽管我对替代方案很感兴趣。我要求更不耐烦的大师要温柔。

为了澄清（希望如此），我想使用 node.js 和 processing.js 来显示一些任意 JavaScript 代码来连接网络并显示图形并将结果渲染到 X 而不是使用浏览器。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T22:50:34.747

不知道您是否可以这样做，因为 node.js 不是浏览器，并且没有 DOM 解析器（浏览器为您提供的质量）或 canvas2d 上下文（再次，浏览器提供的质量）。如果您想使用无头 JS，请查看 Phantom.js、[http](http://phantomjs.org) ://phantomjs.org（无 UI 浏览器引擎）之类的东西，而不是 Node.js（它是一个 JavaScript 服务器）。Phantom.js 听起来比 Node.js 更适合你想做的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T23:01:51.240

好消息，是的，可以做到：[https ://github.com/halfninja/node-processing](https://github.com/halfninja/node-processing)

模块两年没有更新的坏消息。然而重要的部分，画布维护得很好：[https ://github.com/LearnBoost/node-canvas](https://github.com/LearnBoost/node-canvas)

# svn - svn合并和自动解决冲突

> ID：15984507
> 
> 赞同：4
> 
> 时间：2013-04-13T05:14:33.313
> 
> 标签：svn, svn-merge

我是 svn 的新手，需要从主干合并到我们正在工作的分支。这是我用来合并的 svn 命令序列

```
svn up
svn mergeinfo --show-revs eligible branch trunk (branch and trunk are actually svn urls) 
```

我从分支和最新的主干修订中获得了合格修订的最低修订，然后进行 svn 合并。

```
svn merge -r lowest_eligible:latest_trunk trunk_url . 
```

在合并期间有一些冲突。但是，它们与我们在分支中所做的任何更改都无关，所以我有点困惑为什么它们是冲突的。有任何想法吗？不管怎样，我总是只是选择，他们的-full来解决它

最后，我需要在提交之前做 svn resolve

```
svn resolve --accept working -R . 
```

我有两个问题。这是从主干到分支执行合并的最佳命令序列吗？

合并往往需要一段时间，所以我想让它合并，让 svn 自动解决冲突到他们的完整。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T16:08:29.937

1.  如果您**从主干**合并到分支（在分支的 WC 中）mergeinfo 中的参数顺序不正确（颠倒）：必须缩短正确的形式`svn mergeinfo --show-revs eligible trunk`（第一个参数是合并的源，第二个 - 目标/默认“。”/，即您的 WC )
2.  如果您使用已经支持合并信息的 Subversion，您可以跳过检测“必须合并”修订的范围 - Subversion 在合并时自动执行
3.  如果你想在冲突的情况下总是喜欢从主干更改，你可以将它添加到合并命令

作为最终结果，您的定期同步合并过程将是分支 WC 内的单个命令

`svn merge <URL-OF-TRUNK> --accept "theirs-conflict"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T16:12:25.220

通常，合并应该更简单 - 特别是如果您只是从主干合并到分支。在这种情况下，只需确保

A）您的分支工作副本中没有未提交的更改，并且 B）您拥有当前版本的分支（您已经通过执行 'svn up' 来执行此操作）

如果您准备好合并，只需执行

```
svn merge ^/trunk 
```

在您的分支工作副本中。

至于冲突：有时 svn 会破坏合并差异并报告没有冲突的地方。一个好的三路合并工具，如 kdiff3 可以帮助创造奇迹。除此之外，我建议不要使用自动冲突解决，因为大多数冲突不会因为避免解决它们而变得更容易解决。使用上述过程，您至少应该能够避免所有不必要的冲突。

# android - 删除底部布局滚动滚动视图

> ID：15984508
> 
> 赞同：0
> 
> 时间：2013-04-13T05:14:36.250
> 
> 标签：android, layout, scrollview

> 我想删除滚动到按钮，当键盘聚焦时，按钮必须留在>布局的底部，但它的滚动顶部是键盘。给我解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:18:08.757

将 Window SoftInput Mode 属性设置为 adjustPan 和 adjustResize 到您的活动：

```
<activity android:windowSoftInputMode="adjustPan|adjustResize"> </activity> 
```

# css - 高效的 CSS 选择器

> ID：15984509
> 
> 赞同：2
> 
> 时间：2013-04-13T05:14:38.380
> 
> 标签：css, performance, css-selectors

我知道我们应该避免使用 CSS 后代选择器，但我只是想知道这两个中哪一个更有效，为什么？

```
#myDiv .childDiv .grandchildAnchor span 
```

或者

```
#myDiv > .childDiv > .grandchildAnchor > span 
```

您可以假设两者都对我的标记有效。我应该如何测试这种事情。是否有一个在线平台，我可以在其中编写我的代码的两个版本，它会在效率方面为我获取结果。

编辑：我想学习这些东西。

*   给定两个 CSS 选择器，我怎么知道它们中的哪个工作得更快。只为求知。
*   可以测试两个选择器渲染的在线平台。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T06:02:00.093

如果您正在规划您的 CSS 选择器，哪些选择器更有效，那么您将注意力集中在错误的问题上。

不要一分钱一分货，一分钱一分货。

以任何有意义的方式减慢浏览器的速度需要绝对大量的 HTML 和 CSS，因此与其关注哪个选择器更有效，不如关注哪个选择器合适。您可以通过压缩图像、缩小 CSS 和 JS 或简单地从页面中删除*单个*图像来节省更多性能。

在您的示例中，两个选择器都不合适，也没有效率。除非您有充分*的*理由嵌套选择，否则您的 CSS 应优化为：

```
//specificity 0-0-1-0
.some-span-type {
    ...
} 
```

您可能需要检查跨度是否在特定类型的容器中，在这种情况下您可能需要使用：

```
//specificity 0-0-2-0
.some-container .some-span-type {
    ...
} 
```

您也可能需要检查跨度是否在唯一容器内，在这种情况下您可能需要使用：

```
//specificity 0-1-1-0
#some-container .some-span-type {
    ...
} 
```

问题是，一旦您开始使用两个或三个选择器添加更多样式，您会很快发现您需要三个或四个或五个选择器来设置后续元素的样式以正确覆盖现有样式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T05:50:04.647

有性能测试器
[https://sites.google.com/site/skiadocs/developer-documentation/skia-debugger](https://sites.google.com/site/skiadocs/developer-documentation/skia-debugger)
使用示例
[http://www.html5rocks.com/en/tutorials/speed/css-paint-times/](http://www.html5rocks.com/en/tutorials/speed/css-paint-times/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-19T17:33:11.303

根据 Mozilla 的说法，有一个明确的答案：**避免使用后代选择器**

> 后代选择器是 CSS 中最昂贵的选择器。它非常昂贵，尤其是如果选择器在标签或通用类别中。
> 
> 通常，真正需要的是子选择器。例如，性能太差了，以至于 Firefox 的用户界面 CSS 中禁止了后代选择器，没有具体的理由。在您的网页上做同样的事情是个好主意
> 
> **坏**
> 树头树行树细胞{…}
> 
> **更好，但仍然**很糟糕（参见下一个指南）
> treehead > treerow > treecell {…}

您可以在以下位置找到上述引用和更多信息： [https ://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Writing_efficient_CSS](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Writing_efficient_CSS)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T06:09:51.160

只需使用`ids`. 然后你可以在自动化测试中受益，请参阅 QTP

# php - 正则表达式匹配文件名中的字符串

> ID：15984510
> 
> 赞同：1
> 
> 时间：2013-04-13T05:14:39.630
> 
> 标签：php, regex

我正在尝试列出目录中所有 PHP 文件的列表，这些文件在名称的开头有一个特定的字符串（在我的情况下是一个日期戳），最后是一个特定的字符串“.php”。我的日期作为变量 ($SearchDate) 传入。我已经成功地设置了 PHP 脚本以从我的目录中读取完整的文件列表，并且只是尝试使用 preg_match 为我过滤列表。不幸的是，我在 RegEx 上完全失败了，即使反复尝试了[这个备忘单](http://www.cheatography.com/davechild/cheat-sheets/regular-expressions/)。

这是我所拥有的产生错误但没有结果的东西：

```
$SearchDate = '2013-02'; //example for february of 2013

if(preg_match('#^('.$SearchDate.')+[:graph:]{1}(\.(pdf))#', $file)) {
   //do something
} 
```

我也试过：

```
preg_match('#^\Q'.$SearchDate.'\E+[:graph:]{1}\Q.pdf\E#', $file) 
```

我的文件名如下所示：

> 2013-02-fileNameMightBeAlphaOr1234567890.pdf

我得到的错误如下所示：

> 警告：preg_match() [function.preg-match]：编译失败：仅在第 26 行 /home/directory/myfile.php 中偏移量 5 的类中支持 POSIX 命名类

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T05:45:23.843

> 我还需要检查它是否以“.pdf”结尾，所以我基本上需要文件名的开头和结尾，而不关心中间发生了什么。

如果是这种情况，那么以下正则表达式应该适合您：

```
if(preg_match('#^' . $SearchDate . '.*?\.pdf$#', $file)) {
   //do something
} 
```

### 现场演示：http: [//ideone.com/h66GY0](http://ideone.com/h66GY0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T05:30:33.993

这个简单的正则表达式应该可以工作

```
preg_match('/^'.$SearchDate.'/', $file); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T05:40:13.727

添加`{`和`}`到您的图表...喜欢

```
 preg_match('#^('.$SearchDate.')+[{:graph:}]{1}(\.(pdf))#', $file) 
```

# tinymce - TinyMCE moxiemanager

> ID：15984522
> 
> 赞同：12
> 
> 时间：2013-04-13T05:16:11.767
> 
> 标签：tinymce

我下载了 TinyMCE 4 并尝试按照以下方式安装： [http](http://www.tinymce.com/tryit/basic.php) ://www.tinymce.com/tryit/basic.php或 [http://www.tinymce.com/tryit/full.php](http://www.tinymce.com/tryit/full.php)

除非我从插件列表中删除 moxiemanager，否则它将无法工作。我试图搜索 moxiemanager 但找不到它。什么是 moxiemanager 插件？谁能指导我？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-08-22T07:40:11.630

在基本示例代码中，从 中删除`moxiemanager`，`plugins`因此它不会查找此插件，并且编辑器的其余部分将正常工作。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-14T21:55:20.393

我认为，基于在[TinyMCE 下载页面](http://www.tinymce.com/download/download.php)，它有 MoxieManager 并说“立即购买”，再加上在[MoxieManager 的网站上](http://www.moxiemanager.com/)，它说您可以查看演示或“立即获取”，如果您点击[“立即获取”](http://www.moxiemanager.com/getit/)，您可以以非常昂贵的价格购买它。

当我通过一些谷歌看到你的帖子时，我正在寻找完全相同的东西，当我意识到我不是唯一有问题的人时。然而，谷歌的奇迹（或者至少是它的浏览器，因为尝试对 Firefox 和 Firebug 做同样的事情最终导致我的浏览器崩溃）成功了。你看，看到 TinyMCE 有一个它的编辑器的工作演示，它也从 MoxieManager 插件调用，这是一件简单的事情，定位 TinyMCE 的 MoxieManager 插件副本，复制代码，并在你的网络服务器上创建目录和文件，然后将 JS 粘贴到文件中，重新加载你的编辑器，一切都应该工作。

因此，您可以[在此处找到 MoxieManager 插件。](http://www.tinymce.com/js/moxiemanager/plugin.min.js)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-21T21:27:42.643

如果您正在寻找与 TinyMCE 4 编辑器一起使用的免费替代文件管理器，请查看：[响应式文件管理器插件](http://www.responsivefilemanager.com/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-26T21:00:44.583

MoxieManager 是一个用于 TinyMCE（或其他编辑器/系统）的商业软件插件，由 Moxiecode Systems AB 制作。它不包含在 TinyMCE 包中。

您可以在官方网站上找到有关它的更多信息。

[http://www.moxiemanager.com](http://www.moxiemanager.com)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-07T03:43:47.743

MoxieManager - 一个很好的网络文件和图像管理器插件。这个插件有几个不同的版本可以满足您的需要（参见：[http](http://www.moxiemanager.com/documentation/index.php/Plugins) ://www.moxiemanager.com/documentation/index.php/Plugins ） 特别是一个基于 java scrip 和 php 的 tinymce 编辑器插件。它对我的具有插入图像功能的简单编辑器很有用。感谢亚历克斯的回答和支持。

范清丰

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-30T08:01:26.123

MoxieManager 是一个插件，允许您在 tinymce 编辑器中上传图像。但是，.Net 服务器不支持此插件。因此，即使您下载它并将其添加到您的网络应用程序中，您仍然无法获得该功能。一种方法是编写自己的服务器端代码来上传图像。 [http://www.tinymce.com/wiki.php/TinyMCE3x:TinyMCE_FAQ](http://www.tinymce.com/wiki.php/TinyMCE3x:TinyMCE_FAQ)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-02T16:16:54.330

如果您使用基本的tinymce，它将无法工作，因为moxiemanager 插件不存在。如果插件不存在，它就不会运行 tinymce 加上 moxiemanager 是 tinymce 的付费插件。

# function - 将 SQL 中的 4 列求和以用作同一 SQL 上的字段？

> ID：15984528
> 
> 赞同：0
> 
> 时间：2013-04-13T05:17:12.490
> 
> 标签：function, vba, ms-access

我试图用这个 Excel 字段模拟 MS-Excel 公式：A - StudyYears B - Inflation_Adjusted_Expenditures C - AnnualContribution D - ContributionIncrease E - InterestIncome F - RunningBalance

当前 Excel 光标位置：列 - F，行 - 3 公式：F2+E2+C2+B2

到 MS-Access sql 查询。从不同表中获取的字段。但是字段 RunningBalance 最初取自表 tblParameter 字段 StartingBalance。此查询的下一个 RunningBalance 记录应该是从上一个记录中添加四个字段。

由于循环引用是 sql 查询中的一个问题，我尝试创建一个这样的函数。

```
'*************************************************************
' FUNCTION: PREV_RUNNINGBALANCE()
' PURPOSE: Retrieve a value from a field in the previous record.
' PARAMETERS:
'    StartingBalance    - Starting Running Balance which is given
'    RefValue           - ID value
' RETURN: The computed value for the 4 field mention located in the
'          previous record.
' EXAMPLE:
'    =Prev_RunningBalance(StudyYears, 404585)
'**************************************************************
Function Prev_RunningBalance(RefValue As Long, StartingBalance As Long)

Dim dbs As DAO.Database
Dim rsSQL As DAO.Recordset
Dim strSQL As String
Dim vRunningBalance As Integer

On Error GoTo Err_PrevRecVal
    strSQL = "Select Inflation_Adjusted_Expenditures, AnnualContribution, InterestIncome, RunningBalance FROM GenerateFundingPlanData WHERE StudyYears = " & RefValue

Set dbs = CurrentDb
Set rsSQL = db.OpenRecordset(strSQL, dbOpenDynaset)

rsSQL.FindFirst "StudyYears = " & RefValue

If Not rsSQL.NoMatch Then
    'Return 0
    Prev_RunningBalance = 0
End If

If rsSQL.BOF Then
    Prev_RunningBalance = 0
    'Prev_RunningBalance = rsSQL![Inflation_Adjusted_Expenditures] + rsSQL![AnnualContribution] + rsSQL![InterestIncome] + StartingBalance
End If

Do While Not rsSQL.BOF
    ' Move to the previous record.
    rsSQL.MovePrevious
    ' Sum the fields to get the RunningBalance
    ' RunningBalance = Inflation_Adjusted_Expenditures + AnnualContribution + InterestIncome + CurrentRunningBalance
    Prev_RunningBalance = rsSQL![Inflation_Adjusted_Expenditures] + rsSQL![AnnualContribution] + rsSQL![InterestIncome] + rsSQL![RunningBalance]
Loop

'Close Connection
rsSQL.Close

Bye_PrevRecVal:
    Set rsSQL = Nothing    'Deassign all objects.
    Set dbs = Nothing
Exit Function
   Err_PrevRecVal:
Resume Bye_PrevRecVal
End Function 
```

尝试该功能后，我得到一个空结果。这是我的查询示例。

```
SELECT Prev_RunningBalance(a.StudyYears, 404585) as RunningBalance, 
       a.StudyYears FROM AnalysisYears a; 
```

我是否使用了正确的功能？

请指出我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:23:10.897

在我看来，您只需使用 SQL 就可以实现您的目标。考虑样本表 [RevenueByQuarter]：

```
FiscalYear  RevenueQ1   RevenueQ2   RevenueQ3   RevenueQ4
      2010          7           5           4           6
      2011          8           6           6           5
      2012          6           8           8           9 
```

Access 中的以下 SQL 查询...

```
SELECT FiscalYear AS FY, 
    RevenueQ1, RevenueQ2, RevenueQ3, RevenueQ4,
    RevenueQ1+RevenueQ2+RevenueQ3+RevenueQ4 AS RevenueFY,
    (SELECT SUM(RevenueQ1+RevenueQ2+RevenueQ3+RevenueQ4) 
     FROM RevenueByQuarter
     WHERE FiscalYear<=rbq.FiscalYear
    ) AS RunningTotal
FROM RevenueByQuarter rbq; 
```

...产生以下结果...

```
FY    RevenueQ1   RevenueQ2   RevenueQ3   RevenueQ4   RevenueFY   RunningTotal
2010          7           5           4           6          22             22
2011          8           6           6           5          25             47
2012          6           8           8           9          31             78 
```

# iphone - 如何使用 ios 6.0 中的社交框架从 iphone 应用程序在 facebook 上共享图像？

> ID：15984532
> 
> 赞同：3
> 
> 时间：2013-04-13T05:17:44.723
> 
> 标签：iphone, ios, objective-c

我使用了下面给出的代码。但它只将图像发布到 Facebook。

```
UIImage *image = [UIImage imageNamed:@"testimage.png"];
    NSString *caption = @"Gud Mng";
    NSArray *activityItems = @[image, caption];
    // Initialize Activity View Controller
    UIActivityViewController *vc = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];
    // Present Activity View Controller
    [self presentViewController:vc animated:YES completion:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T05:27:59.827

添加社交框架。在您的视图控制器中导入。

```
SLComposeViewController *socialVc=[SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
NSData *data = UIImageJPEGRepresentation(self.defaultImageView.image, 1.0);
[socialVc addImage:[UIImage imageWithData:data]];

[socialVc setInitialText:[NSString    stringWithFormat:@"%@",self.captionTextFeild.text]];
[socialVc addURL:[NSURL URLWithString:@"via www.coderit.com"]];
[self.navigationController presentViewController:socialVc animated:YES completion:nil]; 
```

# c - 链接期间可以在库之间解析弱符号吗？

> ID：15984535
> 
> 赞同：2
> 
> 时间：2013-04-13T05:18:28.480
> 
> 标签：c, symbols, firmware, weak, cmsis

我的场景是关于交叉编译到 Arduino Due（ARM 目标），但我想这是一个通用的 C 弱符号问题。

我想将我的固件分成 3 个部分： 1\. 硬件库（CMSIS，中间件）-> libHardware.a 2\. 实时操作系统库 -> libOS.a 3\. 应用程序代码 -> 链接到上面的 Output.elf。

引用的 CMSIS 实现声明了以下内容：

```
void SysTick_Handler    ( void ) __attribute__ ((weak, alias("Dummy_Handler")));
// ...and a few dozen IRQ handler hook skipped for brevity 
```

CMSIS 设计的想法是让应用程序代码有选择地实施和处理一些 IRQ。

libHardware.a 的 nm 报告

```
startup_sam3xa.o:
00000000 W SysTick_Handler
... 
```

在我的场景中，我想在 libOS.a 中实现这些 IRQ 处理程序。

我实现了 void SysTick_Handler(void)，nm 报告：

```
cortex_handlers.o:
00000000 T SysTick_Handler
.... 
```

然后我将它们链接在一起，这基本上归结为

```
g++ -o app.elf -Wl,--start-group app.o libHardware.a libOS.a -Wl,--end-group 
```

（分组是必要的，因为操作系统依赖于底层硬件函数。硬件需要调用操作系统提供的 IRQ/main() 函数）

纳米报告：

```
...
00080124 W SysTick_Handler
... 
```

还是很弱！我希望它使用 libOS.a 中定义的强符号。最后，没有处理 SysTick，这当然会导致灾难性的失败。

另一方面，如果我没有在 libHardware/startup_sam3xa.c 中将它们声明为弱，那么一切正常。如果我选择在 app/app.c 中实现 SysTick_Handler，它也是强链接的。

所以我的问题是：libOS.a 如何实现 libHardware.a 中定义的弱处理程序？或者在这些固件开发场景中，最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-04T17:15:53.333

当您`SysTick_Handler`在**cortex_handlers.c**中定义时，它定义了正常的入口点。但只有当链接器收到链接特定目标文件（来自 libOS.a）的请求时，它才会覆盖弱符号。

libHardware.a 通常定义引用的中断向量表`SysTick_Handler`。这是这个实际名称出现在游戏中的唯一指针。（对于 ARM，它只是向量表中的一个条目。）同一个库已经提供了一个弱符号。因此链接器不再*搜索*该符号。当您想要覆盖**cortex_handlers.c**中的符号时，您需要引用该文件中导致链接器使用**cortex_handlers.o**的任何符号。这将启动弱符号。

```
// cortex_handlers.c

void SysTick_Handler()
{
}

int link_my_cortex_handlers_file; 
```

只需在某处引用符号`link_my_cortex_handlers_file`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-07T06:10:39.277

感谢 harper 的上述回答，我发现 Arduino 通过将所有弱定义从 startup_sam3xa.c 移动到他们的 cortex_handlers.c 文件中解决了这个问题，以便弱定义属于“操作系统”而不是硬件（使用 OP 的语言）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-05T18:31:43.777

另一种解决方案是将您的处理程序（或其他）的源代码分开，但将其#include 到使用库时必须始终引用的源文件中（如果您的库有这样的东西并且不是全部可选的。）使用不同的与另一个答案相比，链接器在检查库 .a 时以目标文件 .o 为单位工作：如果目标文件有任何符号可以在链接器通过存档中的 .o 单元时解析未解析的符号（并且链接器可以进行多次传递），链接器将目标文件中的所有符号放入链接的二进制文件中，解析未解析的符号并覆盖弱定义。链接命令中库的顺序很重要，您可能需要一个库在链接命令中出现两次。链接器标志whole-archive也可以解决这个问题。我的回答很简洁

# java - AtomicLong 的 incrementAndGet 方法阻塞调用？

> ID：15984536
> 
> 赞同：1
> 
> 时间：2013-04-13T05:18:36.350
> 
> 标签：java, asynchronous, atomic, concurrenthashmap

我正在`Multithreaded code`努力测量一个特定方法所花费的时间，因为我正在尝试对我们的大多数队友代码进行基准测试，因为我正在`Load and Performance`测试我们的`Client code`，然后是我们的`Service code`.

所以对于这个性能测量，我使用 -

`System.nanoTime();`

而且我有多线程代码，我从中产生多个线程并试图测量该代码花费了多少时间。

下面是我试图测量任何代码性能的示例示例 - 在下面的代码中我试图测量 -

`beClient.getAttributes method`

下面是代码-

```
public class BenchMarkTest {

    public static void main(String[] args) {

        ExecutorService executor = Executors.newFixedThreadPool(5);

        try {

            for (int i = 0; i < 3 * 5; i++) {
                executor.submit(new ThreadTask(i));
            }

            executor.shutdown();
            executor.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);
        } catch (InterruptedException e) {

        }
    }

} 
```

下面是实现 Runnable 接口的类

```
class ThreadTask implements Runnable {
    private int id;
    public static ConcurrentHashMap<Long, AtomicLong> selectHistogram = new ConcurrentHashMap<Long, AtomicLong>();

    public ThreadTask(int id) {
        this.id = id;
    }

    @Override
    public void run() {

        long start = System.nanoTime();

        attributes = beClient.getAttributes(columnsList);

        long end = System.nanoTime() - start;

        final AtomicLong before = selectHistogram.putIfAbsent(end / 1000000L, new AtomicLong(1L));
        if (before != null) {
            before.incrementAndGet();
        }
    }
} 
```

无论我想测量什么代码，我通常将下面的行放在该方法的正上方

`long start = System.nanoTime();`

这两行采用相同的方法但不同`ConcurrentHashMap`

```
long end = System.nanoTime() - start;

final AtomicLong before = selectHistogram.putIfAbsent(end / 1000000L, new AtomicLong(1L));
        if (before != null) {
            before.incrementAndGet();
        } 
```

今天我和我的一位资深人士开会，他说`incrementAndGet`方法`ConcurrentHashMap`是阻塞电话。所以你的线程会在那里等待一段时间。

他让我做那个`Asynchronous call`。

是否有可能进行该异步调用？

因为在我们所有的客户端代码和服务代码中来衡量每个方法的性能，我使用上面相同的三行，我通常在每个方法之前和之后放置来衡量这些方法的性能。程序完成后，我将这些地图的结果打印出来。

所以现在我正在考虑做那个`Asynchronous call`？谁能帮我做到这一点？

**基本上，我试图以异步方式测量特定方法的性能，以便每个线程不会等待并被阻塞。**

我想，我可以使用`Futures`. 任何人都可以提供与此相关的示例吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T06:17:01.793

该行：

```
if (before != null) {
    before.incrementAndGet();
} 
```

将锁定当前线程，直到`before.incrementAndGet()`获得锁（如果您必须知道，实际上没有锁，有`while(true)`一个[比较和交换](http://en.wikipedia.org/wiki/Compare-and-swap)方法）并返回长值（您没有使用）。

您可以通过在它自己的线程中调用该特定方法来使其异步，从而不会阻塞当前线程。

为此，我相信您已经知道如何使用`Thread.start()`、an`ExecutorService`或 a `FutureTask`（查看“[如何在 Java 中异步调用方法](https://stackoverflow.com/questions/1842734/how-to-asynchronously-call-a-method-in-java)”，了解如何以优雅的方式进行操作）。

如果我不清楚，这里有一个解决方案`FutureTask`：

```
public class BenchMarkTest {

    public static void main(String[] args) {

        ExecutorService executor = Executors.newFixedThreadPool(5);

        int threadNum = 2;
        ExecutorService taskExecutor = Executors.newFixedThreadPool(threadNum);
        List<FutureTask<Long>> taskList = new ArrayList<FutureTask<Long>>();

        try {

            for (int i = 0; i < 3 * 5; i++) {
                executor.submit(new ThreadTask(i, taskExecutor, taskList));
            }

            executor.shutdown();
            executor.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);
        } catch (InterruptedException e) {

        }

        for (FutureTask<Long> futureTask : taskList) {
            futureTask.get(); // doing a job similar to joining threads
        }
        taskExecutor.shutdown();
    }

} 
```

`ThreadTask`班级：

```
class ThreadTask implements Runnable {
    private int id;
    public static ConcurrentHashMap<Long, AtomicLong> selectHistogram = new ConcurrentHashMap<Long, AtomicLong>();

    private ExecutorService taskExecutor;
    private List<FutureTask<Long>> taskList;    

    public ThreadTask(int id, ExecutorService taskExecutor, List<FutureTask<Long>> taskList) {
        this.id = id;
        this.taskExecutor = taskExecutor;
        this.taskList = taskList;
    }

    @Override
    public void run() {

        long start = System.nanoTime();

        attributes = beClient.getAttributes(columnsList);

        long end = System.nanoTime() - start;

        final AtomicLong before = selectHistogram.putIfAbsent(end / 1000000L, new AtomicLong(1L));
        if (before != null) {
            FutureTask<Long> futureTask = new FutureTask<Long>(new Callable<Long>() {
                public Long call() {
                    return before.incrementAndGet();
                }
            });
            taskList.add(futureTask);
            taskExecutor.execute(futureTask);
        }
    }
} 
```

## 更新：

我想到了一点可能的改进：与其在类中告诉`taskExecutor`执行，不如将任务的执行推迟到方法的末尾。我是说：`futureTask``ThreadTask``main`

删除以下行`ThreadTask.run()`：

```
 taskExecutor.execute(futureTask); 
```

并且，在该`main()`方法中，您拥有：

```
 for (FutureTask<Long> futureTask : taskList) {
            futureTask.get(); // doing a job similar to joining threads
        }
        taskExecutor.shutdown(); 
```

添加任务的执行，因此具有：

```
 taskExecutor.invokeAll(taskList);
        for (FutureTask<Long> futureTask : taskList) {
            futureTask.get(); // doing a job similar to joining threads
        }
        taskExecutor.shutdown(); 
```

（此外，您可以删除`ThreadTask`'s`ExecutorService`字段，因为它将不再使用它。）

**这样，在执行基准测试时开销很小（开销是将对象添加到 the 中，仅此`taskList`而已）。**

## **完整更新的代码：**

```
public class BenchMarkTest {

    public static void main(String[] args) {

        ExecutorService executor = Executors.newFixedThreadPool(5);

        List<FutureTask<Long>> taskList = new ArrayList<FutureTask<Long>>();

        try {

            for (int i = 0; i < 3 * 5; i++) {
                executor.submit(new ThreadTask(i, taskList));
            }

            executor.shutdown();
            executor.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);
        } catch (InterruptedException e) {

        }

        int threadNum = 2;
        ExecutorService taskExecutor = Executors.newFixedThreadPool(threadNum);
        taskExecutor.invokeAll(taskList);
        for (FutureTask<Long> futureTask : taskList) {
            futureTask.get(); // doing a job similar to joining threads
        }
        taskExecutor.shutdown();
    }

} 
```

-

```
class ThreadTask implements Runnable {
    private int id;
    public static ConcurrentHashMap<Long, AtomicLong> selectHistogram = new ConcurrentHashMap<Long, AtomicLong>();

    private List<FutureTask<Long>> taskList;    

    public ThreadTask(int id, List<FutureTask<Long>> taskList) {
        this.id = id;
        this.taskList = taskList;
    }

    @Override
    public void run() {

        long start = System.nanoTime();

        attributes = beClient.getAttributes(columnsList);

        long end = System.nanoTime() - start;

        final AtomicLong before = selectHistogram.putIfAbsent(end / 1000000L, new AtomicLong(1L));
        if (before != null) {
            FutureTask<Long> futureTask = new FutureTask<Long>(new Callable<Long>() {
                public Long call() {
                    return before.incrementAndGet();
                }
            });
            taskList.add(futureTask);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T06:19:48.197

我确信增加一个对象比创建一个对象并将它传递给一个 ExecutorService`AtomicLong`花费的时间更少。`Runnable/Callable`这会导致你真的成为瓶颈吗？如果您真的想要快速并发增量，请参阅[JDK8](http://gee.cs.oswego.edu/dl/jsr166/dist/docs/java/util/concurrent/atomic/LongAdder.html)中的 LongAdder。

> LongAdders 可以与 ConcurrentHashMap 一起使用，以维护可扩展的频率图（直方图或多重集的一种形式）。例如，要向 ConcurrentHashMap freqs 添加计数，如果不存在则进行初始化，您可以使用 freqs.computeIfAbsent(k -> new LongAdder()).increment();

# c# - 资源加载在 SharpDevelop 中有效，但在手动编译时无效

> ID：15984537
> 
> 赞同：0
> 
> 时间：2013-04-13T05:18:36.710
> 
> 标签：c#, loading, embedded-resource

我正在制作一个游戏引擎并想知道如何加载资源。

我目前正在使用此代码。

```
public static Stream GetResourceStream(string name) {
    string asmname = Path.GetFileNameWithoutExtension(Assembly.GetEntryAssembly().Location).Replace('\\', '.').Replace('/', '.');
    return Assembly.GetEntryAssembly().GetManifestResourceStream(asmname + "." + name.Replace('\\', '.').Replace('/', '.'));
} 
```

并将其用作

```
Image img = Image.FromStream(GetResourceStream("Resources/image.png")); 
```

它在 SharpDevelop 中以当前形式工作，但如果我从命令行编译源代码

```
csc.exe /t:winexe /res:Resources/image.png Game.cs 
```

它正在返回空流。列出了资源

```
foreach (var name in typeof(this).Assembly.GetManifestResourceNames())
{
    MessageBox.Show(name);
} 
```

它是具有简单名称的列表图像，没有包名称或文件夹名称。

在入口程序集中加载资源的最佳方法是什么？（我会有一个单独的 GameEngine.dll）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:15:09.863

虽然我无法告诉您在程序集中加载资源的最佳方式，但我可以告诉您问题所在。

如果您从命令行运行 MSBuild，您将看到当 SharpDevelop 构建您的项目时，它使用的命令行选项略有不同。假设 MSBuild 在您的路径上，然后运行类似以下内容将显示正在传递给 csc 的命令行选项：

```
msbuild /t:Rebuild YourSolution.sln 
```

/res 或 /resource 参数看起来会有些不同。它会是这样的：

```
/resource:Resources\image.png,YourAssemblyRootNamespace.Resources.image.png 
```

如果您阅读有关[/resource 编译器选项](http://msdn.microsoft.com/en-gb/library/vstudio/c0tyye07.aspx)的文档，您将看到它允许您指定一个标识符，该标识符是用作嵌入式资源名称的名称。在上面的例子中，这个标识符是

```
YourAssemblyRootNamespace.Resources.image.png 
```

您还可以在命令行上覆盖此标识符，如上所示，或在 SharpDevelop 中通过设置 image.png 文件的 LogicalName 属性。要设置它，请右键单击“项目”窗口中的文件并选择“属性”。

在您的情况下，我很想为图像设置自己的逻辑名称。因此，如果您使用 image.png 作为逻辑名称，那么您的 GetResource 方法会变得更简单：

```
public static Stream GetResourceStream(string name) {
    return Assembly.GetEntryAssembly().GetManifestResourceStream(name);
}

Stream stream = GetResourceStream("image.png"); 
```

这在使用 SharpDevelop 编译时或在使用 /res 命令行选项的命令行上都应该有效：

```
/res:Resources\image.png,image.png 
```

它也应该使用您尝试使用的命令行选项工作：

```
/res:Resources\image.png 
```

# linux - 在 linux 上用一个命令打开所有分离的屏幕会话

> ID：15984540
> 
> 赞同：4
> 
> 时间：2013-04-13T05:19:23.267
> 
> 标签：linux, gnu-screen

有没有办法在一个命令/脚本中打开/附加到 Linux 上所有分离的屏幕会话？通常我有以下流程来打开会话：

```
#查看所有屏幕会话
屏幕-rD
#附加到一个屏幕会话
屏幕 -rD 屏幕名称

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T05:52:14.243

只有一个屏幕会话，其中包含许多终端会更容易。使用 Ctrl+a+c 创建一个新终端，然后使用`Ctrl+a+<space>`or`<backspace>`或数字切换它们。如果您手动执行此操作，我认为没有更简单的方法。如果您使用脚本生成会话，您可以尝试使用`-X`使屏幕在现有会话中打开一个新窗口并在其中执行命令。也许[这个答案](https://stackoverflow.com/a/1236612/520567)接近你所需要的。您需要确保以某种方式命名屏幕会话，以便稍后明确引用它。

# html - 迁移到新的虚拟主机时出现意外空格和错误样式

> ID：15984541
> 
> 赞同：2
> 
> 时间：2013-04-13T05:19:25.257
> 
> 标签：html, css, doctype

我花了一整天的时间，但无法终生解决这个问题。

我的源代码在以前的虚拟主机中运行良好，但是当我更改主机时，我的样式出现了问题。浏览器（chrome+FF）解释了很多意想不到的空间。例如我的实际代码： ![在此处输入图像描述](https://i.stack.imgur.com/8wR9y.jpg)

在 chrome 中检查时看起来像： ![在此处输入图像描述](https://i.stack.imgur.com/6AP0k.jpg)

我的css也被弄乱了。例如，两个宽度的类在检查元素中为空： ![在此处输入图像描述](https://i.stack.imgur.com/Xmcgb.jpg)

当它被定义为

![在此处输入图像描述](https://i.stack.imgur.com/fPbPD.jpg)

我用这两个 doctype/meta 尝试了主题：一个：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

二：

```
<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" /> 
```

如果有人可以帮助我，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T09:05:51.197

正如伊恩所说。这是空格的问题。

对于这样一个基本的疏忽，感觉就像把我的头撞到墙上一样。

谢谢伊恩。

# php - PHP时间差异返回相反的值

> ID：15984545
> 
> 赞同：0
> 
> 时间：2013-04-13T05:19:50.343
> 
> 标签：php, mysql, system

我有以下代码：

```
<?php
require 'core.php';
require 'connectdb.php';

$user_id = getfield('user_id');
$_SESSION['user_id'] = $user_id;
$checker = getchecker();
     // Get current time 
    $query = "SELECT `timein`,`timeout` FROM `time` WHERE `user_id` = '$user_id'";
    if($query_run = mysql_query($query))
    {
        $query_num_rows = mysql_num_rows($query_run);
        if($query_num_rows == 0){
                    echo 'Invalid or No such registered user.';
                }else if($query_num_rows == 1){
                    $in = mysql_result($query_run,0,'timein');
                    $out = mysql_result($query_run,0,'timeout');
                    $_SESSION['in'] = $in;
                    $_SESSION['out'] = $out;
                }
    }
echo $in."  ".$out;
    $datein = strtotime($in);
    $dateout = strtotime($out);
    echo $datein."  ".$dateout;

    $dateDiff    = $datein - $dateout;
    $fullDays    = floor($dateDiff/(60*60*24));
    $fullHours   = floor(($dateDiff-($fullDays*60*60*24))/(60*60));
    $fullMinutes = floor(($dateDiff-($fullDays*60*60*24)-($fullHours*60*60))/60);
    $fullSeconds = floor(($dateDiff-($fullDays*60*60*24)-($fullHours*60*60)-     ($fullMinutes*60*60))/60);
    echo "Differernce is $fullDays days, $fullHours hours $fullMinutes minutes and      $fullSeconds seconds.";   
    ?> 
```

从数据库：

```
$in = 12:50:26
$out = 12:52:46 
```

这是运行代码后的结果：

```
(time in)   (time out) (timestampin)(timestampout) (output)
12:50:26    12:52:46   1365850226   1365850366    Differernce is -1 days, 23 hours 57 minutes and -3363 seconds. 
```

值应该是：
差是`0 days, 0 hours 2 minutes and 20 seconds`。

我有一种预感，它与它的计算有关。我应该怎么做才能得到正确的答案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:24:05.010

从 dateout 中减去 datein

```
$dateDiff    = $dateout - $datein; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T05:53:53.943

请修改以下行。

```
$dateDiff    = $dateout - $datein; //or better ABS($dateout - $datein) 
```

和

```
$fullSeconds = floor(($dateDiff-($fullDays*60*60*24)-($fullHours*60*60)-($fullMinutes*60))); 
```

# android - 安装后删除应用程序 (*.apk)

> ID：15984546
> 
> 赞同：2
> 
> 时间：2013-04-13T05:20:32.577
> 
> 标签：android, apk, android-install-apk

我创建了一个 android 应用程序，并将其导出为`*.apk`. 是否可以`apk`在安装成功后自动删除文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-05T08:56:01.417

如果您正在通过您的应用程序安装其他一些 APK 下载，并且在成功安装后想要删除，请关注我 :-)

第 1 步：在您的文件中声明以下权限`AndroidManifest.xml`

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_MEDIA_STORAGE" />
<uses-permission android:name="android.permission.INSTALL_PACKAGES" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.BROADCAST_PACKAGE_ADDED" />
<uses-permission android:name="android.permission.BROADCAST_PACKAGE_CHANGED" />    
<uses-permission android:name="android.permission.BROADCAST_PACKAGE_INSTALL" />
<uses-permission android:name="android.permission.BROADCAST_PACKAGE_REPLACED" /> 
```

第 2 步：注册接收方

```
<receiver
            android:name="com.az.appstore.InstallReceiver"
            android:enabled="true" >
            <intent-filter>
                <action android:name="android.intent.action.PACKAGE_ADDED" />
                <action android:name="android.intent.action.PACKAGE_CHANGED" />
                <action android:name="android.intent.action.PACKAGE_REMOVED" />
                <action android:name="android.intent.action.PACKAGE_INSTALL" />

                <data android:scheme="package" />
            </intent-filter>
        </receiver> 
```

第4步：

在您的安装程序活动中创建一个像这样的哈希映射，我在 中创建`ApplicationMain`，它会根据实现而有所不同。

```
public static final ConcurrentHashMap<String, File> INSTALL_APK_INFO = new ConcurrentHashMap<String, File>(); 
```

并填写包名称和文件，其中放置了apk。您可以使用此方法从任何 apk 中获取 Pacakage 名称

```
public static String getPackageNameForAPK(final String archiveFilePath, Context context) {
        try {
            PackageInfo info = context.getPackageManager().getPackageArchiveInfo(archiveFilePath, PackageManager.GET_META_DATA);
            return info.packageName;
        } catch (Exception ex) {
            ex.printStackTrace();
            return null;
        }

    } 
```

第 5 步：现在在您的安装接收器上执行此操作

```
if (action.equals(Intent.ACTION_PACKAGE_ADDED) || action.equals(Intent.ACTION_PACKAGE_CHANGED) || action.equals(Intent.ACTION_PACKAGE_INSTALL) || action.equals(Intent.ACTION_PACKAGE_REPLACED)) {
            ApplicationInfo info = null;
            try {
                info = context.getPackageManager().getApplicationInfo(intent.getDataString().split(":")[1], PackageManager.GET_META_DATA);
            } catch (Exception e) {
                e.printStackTrace();
            }
            try {
                if (info != null) {
                    File file = ApplicationMain.INSTALL_APK_INFO.get(info.packageName);
                    if (file != null) {
                        file.delete();
                        ApplicationMain.INSTALL_APK_INFO.remove(info.packageName);
                    }
                }
            } catch (Exception ex) {
                ex.printStackTrace();
            } 
```

**概括**

1) 创建一个 hashmap 并用 APK 包名称和文件填充它。文件正是您的 APK 所在的位置。

请求安装APK

```
public static void installUpdateAPK(Context context, String pathToAPK) {

        pathToAPK = pathToAPK.replace("file:///", "");

        final Intent intent = new Intent(Intent.ACTION_VIEW);
        File file = new File(pathToAPK);
        intent.setDataAndType(Uri.fromFile(file), APK_MIME_TYPE);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(intent);
        String name = getPackageNameForAPK(pathToAPK, context);

        if (name != null) {
            ApplicationMain.INSTALL_APK_INFO.put(name, file);
        }
    } 
```

2）注册包添加，更改，安装意图

3）在您的接收器上获取安装的软件包名称`Intent`

4）从你的哈希图中获取文件对象，然后调用`delete()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T05:28:38.153

安装完成后是否从设备的 SD 卡中删除 APK 无关紧要。即使可以在应用程序中编写这样的功能，任何拥有根设备的用户都将**始终**能够从`/data/app/`系统分区访问 APK。这实际上使您首先删除 APK 的努力无效。

话虽如此，您可以添加一个在第一次运行时删除 APK 的函数。由于 APK 可以保存/存储在 sd 卡上的任何位置，我认为这些问题*应该*对您有所帮助。

查找文件：在[整个 sdcard 中搜索特定文件](https://stackoverflow.com/q/11386848/450534)

找到文件后删除：[如何从 SD 卡中删除文件？](https://stackoverflow.com/q/1248292/450534)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T05:28:03.563

如果您知道该 apk 在设备上的下载位置，那么您可以在您的应用首次运行时将其删除。如果它在 SD 卡上，则需要写入权限。

但是，如果您不知道它的保存位置，那么您最多只能扫描设备以查找具有您给它的名称的 apk 文件并将其删除。

此外，一旦安装，apk 就会被复制到内部存储中。任何拥有 root 设备的用户都可以恢复您的 apk。

Beta 测试是一个信任问题。如果您不信任将 apk 提供给进行测试的人，请不要将其提供给他们。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-13T05:23:58.980

当应用程序启动时，您可以手动检查 sdcard/download 文件夹（或其他可能保存 apk 的位置）。然后从那里删除。

为了避免在每次运行中搜索，您可以在共享首选项中存储 first_run 字段。默认情况下将字段设置为 true，并在第一次运行后将其设置为 false。这样你就可以检测到第一个 runt

# c - 列表的反向一半

> ID：15984552
> 
> 赞同：0
> 
> 时间：2013-04-13T05:20:51.750
> 
> 标签：c, linked-list, reverse

我被要求编写一个函数 reverseHalves() 来重新排列给定的链表，以便将前半部分节点移动到后半部分的后面。例如

给定一个链表`[1 2 3 4 5 6]`，结果列表应该是`[4 5 6 1 2 3]`.
当给定一个具有*奇数个节点*的链表时，该链表应该被拆分，前半部分有一个额外的节点。也就是说，给定列表`[1 2 3 4 5]`，结果列表应该是`[4 5 1 2 3]`。

但是我的函数会给出一个无限的输出......

```
typedef struct _listnode{
    int item;
    struct _listnode *next;
} ListNode;

typedef struct _linkedlist{
    int size;
    ListNode *head;
    ListNode *tail;
} LinkedList; 
```

以下是我使用的功能：

```
// printList will print out the value in every nodes until there is a NULL
void printList(LinkedList *ll);
ListNode * findNode(LinkedList *ll, int index);
int insertNode(LinkedList *ll, int index, int value);

void reverseHalves(LinkedList *ll)
{
    int index;
    ListNode *new_head, *new_tail;
    new_head = NULL;
    new_tail = NULL;

    // determine the index of new tail, and the new head which is index+1*
    index = (ll->size + 1) / 2;

    // get the new head by findNode func,whose index is index+1 
    // make new_head point to the node found*
    new_head = findNode(ll, index);

    // make initial tail->next be the initial head*
    ll->tail->next = ll->head;

    // set the head to be the new head
    ll->head = new_head;

    insertNode(ll, ll->size, -1);
    new_tail = findNode(ll, ll->size);
    new_tail = NULL;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T06:58:44.557

我建议您分步编写问题代码。

1）首先创建一个列表。

2）拆分列表，得到两个列表。

3）将第二个列表的尾部添加到第一个列表的头部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T05:41:45.500

这是一个大概的要点：

```
new_head_index = (ll->size+1) / 2;
new_tail_index = new_head_index - 1;

if (new_tail_index < 0)
    return;

new_head = findNode(ll,new_head_index);
new_tail = findNode(ll,new_tail_index);

ll->tail->next = ll->head;
new_tail->next = NULL
ll->head = new_head; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-05T20:08:40.227

这是反转链表后半部分（右）的代码。

```
#include<stdio.h>
#include<stdlib.h>

struct Node{
  int data;
  struct Node* next;
};

void append(struct Node** head_ref, int new_data)
{

  struct Node* new_node=(struct Node*)malloc(sizeof(struct Node));
  new_node->data=new_data;
  new_node->next=NULL;

  struct Node* last=*head_ref;
  if(*head_ref==NULL){
      *head_ref=new_node;
      return;
  }

while(last->next!=NULL)
    last=last->next;

last->next=new_node;
return;

}

int display(struct Node* n)
{
  int m=0;
  printf("\n");
  while(n!=NULL)
  {
      printf(" %d ",n->data);
      n=n->next;
      m=m+1;
  }

return m;
}

void reverse(struct Node** head_ref, int mid)
{
if(*head_ref==NULL)
{
    printf("\nEmpty List cannot be reversed");
    return;
}

struct Node* last=*head_ref;
struct Node* second_last;
struct Node* beg=*head_ref;
int c=1;
while(c<=mid){
    second_last=last;
    last=last->next;
    c=c+1;
}

struct Node* prev=NULL;
struct Node* current=last;
struct Node* next;

while(current != NULL)
{
    next=current->next;
    current->next=prev;
    prev=current;
    current=next;
}
*head_ref=beg;
second_last->next=prev;

}

int main()
{
int size;
struct Node* head=NULL;
int i,mid;
for(i=0;i<11;i++)
{
    append(&head,rand()%19 +1);
}
size=display(head);
printf("\n Size of linked list: %d",size);

if(size%2==0)
    mid=(size+1)/2;
else
    mid=size/2;

reverse(&head, mid);
display(head);
return 0;
} 
```

# android - 垂直滚动和水平滚动 Android

> ID：15984553
> 
> 赞同：2
> 
> 时间：2013-04-13T05:21:23.617
> 
> 标签：android, scrollview

我有一个类来显示一个表格，我希望它可以水平和垂直滚动，我已经看到了一些解决方案，但我无法实现它们，我将我的视图放在一个 Horizo​​ntalScrollView 中，这让我可以做水平滚动，现在我正在尝试将 Horizo​​ntalScrollView 设置为 ScrollView 的子项。像这样的东西。

```
 ApuestasScoreCard draw;

    public class ApuestasScore extends Activity {
     @Override
     protected void onCreate(Bundle savedInstanceState) {

     super.onCreate(savedInstanceState);

     draw = new ApuestasScoreCard(this);
     draw.setBackgroundColor(Color.WHITE);

         ScrollView sv = new ScrollView(this)
     HorizontalScrollView hsv = new HorizontalScrollView(this);
         sv.addView(hsv);
     hsv.addView(draw);

     setContentView(hsv);
   } 
```

然后在我的视图类中，我实现了 OnMeasure() 方法来呈现视图。我的问题是：这是一个解决方案还是我想要做的事情是不可能的。顺便说一句，当我运行这个解决方案时，logcat 说：

```
java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first. 
```

这是我的视图类

```
public class ApuestasScoreCard extends View {
ApuestasScore apuestas;

public ApuestasScoreCard(Context context) {
    super(context);
    this.apuestas = (ApuestasScore) context;
    setFocusable(true);
    setFocusableInTouchMode(true);

            //..Not Important Code

 /* (non-Javadoc)
 * @see android.widget.HorizontalScrollView#onMeasure(int, int)
 */
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    // TODO Auto-generated method stub
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);

        int width = MeasureSpec.getSize(widthMeasureSpec+2000);
        int height = MeasureSpec.getSize(heightMeasureSpec+500);
        setMeasuredDimension(width, height);

}

    @Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    width = w / 26f;
    height = h / 29f;
    width2 = w / 6.5f;
    height2 = h / 5f;
    getRect(selX, selY, selRect);

    super.onSizeChanged(w, h, oldw, oldh);
}

    @Override
protected void onDraw(Canvas canvas) {
    // Draw the background...FFFF00 23F607

            for (int i = 0; i < 29; i++) {
                if (i < 3) {
                    canvas.drawLine(0, i * height, getWidth(), i * height, light);// Horizontales

                    canvas.drawLine(0, i * height + 1, width * 2, i * height + 1,
                            hilite);
                }
                if (i == 2 || i == 5 || i == 8 || i == 11 || i == 14 || i == 17
                        || i == 20 || i == 23 || i == 26 || i == 29) {
                    canvas.drawLine(0, i * height, getWidth(), i * height, dark);// Horizontales

                    canvas.drawLine(0, i * height + 1, getWidth(), i * height + 1,
                            hilite);
                }
            }
            for (int i = 0; i < 29; i++) {

                canvas.drawLine(width * 2, i * height, getWidth() + 100,
                        i * height, light);// Horizontales

                canvas.drawLine(width * 2, i * height + 1, getWidth() + 100, i
                        * height + 1, hilite);

                if (i > 1 && i < 12) {
                    canvas.drawLine(i * width, 0, i * width, getHeight(), light);

                    canvas.drawLine(i * width + 1, 0, i * width + 1, getHeight(),
                            hilite);
                }
    }

}
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-31T21:14:19.283

我知道这篇文章很旧，但由于我无法在其他地方找到解决方案并且不得不自己做，我决定分享我的解决方案，我为此制作了一个自定义组件，请随意使用它：

[https://gist.github.com/androidseb/9902093](https://gist.github.com/androidseb/9902093)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T15:56:49.503

谢谢，我找到了解决方案，必须按以下顺序：

```
ScrollView sv = new ScrollView(this);
HorizontalScrollView hsv = new HorizontalScrollView(this);
hsv.addView(sv);
sv.addView(draw);

setContentView(hsv); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T05:50:38.990

在 xml 中采用水平滚动视图，然后在一个布局中线性或相对地覆盖此水平滚动视图，然后将垂直滚动视图放入 xml，因此最终您可以在水平和垂直方向上移动您的 xml。试试看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T05:31:14.777

请也发布您的布局文件。

我认为发生的事情是您已经在**ScrollView**中添加了一个孩子。现在 ScrollView 只能包含一个子项，它可以是另一个容器，而该容器又可以包含其他视图。

**您可以做的是从ScrollView**中删除任何子项，然后添加已添加子项的**Horizo** ​​ntalScrollView （到 HSV）。

查看[ScrollView](http://developer.android.com/reference/android/widget/ScrollView.html)和[Horizo](http://developer.android.com/reference/android/widget/HorizontalScrollView.html) ​​ntalScrollView 的文档。

# c# - 这个东西的意思是什么

> ID：15984561
> 
> 赞同：0
> 
> 时间：2013-04-13T05:23:32.083
> 
> 标签：c#, constructor

以下关于[构造函数初始化程序](http://msdn.microsoft.com/en-us/library/aa645603%28v=vs.71%29.aspx)的部分的含义是什么？

> 实例构造函数初始化程序无法访问正在创建的实例。因此`this`，在构造函数初始化程序的参数表达式中引用是编译时错误，就像参数表达式通过简单名称引用任何实例成员一样，也是编译时错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T05:30:35.540

这意味着当构造函数初始化程序运行时，实例仍在创建过程中。因此，该初始化程序无法通过`this`或直接访问实例成员：

```
class Foo
{
    private int _bar;

    public Foo(int bar)
    {
        _bar = bar;
    }

    public Foo() : this(_bar)       // Illegal.
    {
    }

    public Foo() : this(this._bar)  // Also illegal.
    {
    }
} 
```

这个推理适用于构造函数初始化器（`this()`和`base()`）。

# php - 如何刷新bing地图？

> ID：15984562
> 
> 赞同：0
> 
> 时间：2013-04-13T05:23:32.943
> 
> 标签：php, jquery, bing-maps, bing

如果我刷新页面并按下图钉，必应地图可以正常工作。但是，如果我进行 ajax 调用并加载地图，则之前的引脚会保留。怎么去掉那些别针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T15:20:24.003

假设您使用的是 AJAX v7 控件，为了删除地图上以前的项目，您可以使用 EntityCollection 类中可用的 clear() 方法。

请参阅：http: [//msdn.microsoft.com/en-us/library/gg427616.aspx](http://msdn.microsoft.com/en-us/library/gg427616.aspx)

因此，如果您使用的是基本方式，则可以使用：

```
map.entities.clear(); 
```

我建议您使用 iSDK 从 API 开始：http: [//www.bingmapsportal.com/isdk/ajaxv7](http://www.bingmapsportal.com/isdk/ajaxv7)

# sqlite - 设计 sqlite 菜单树的更好方法

> ID：15984563
> 
> 赞同：0
> 
> 时间：2013-04-13T05:23:42.253
> 
> 标签：sqlite, menu, tree, drilldown

我已经围绕 sqlite 数据库构建了一个 iOS 应用程序。其中一个表分配了一个向下钻取表值，它们在表中显示的顺序，然后是随后的菜单。我想是一棵基本的树。

我构建它的方式，我能想到的唯一方式（这是我第一次接触 sqlite）.. 这只是一个真正的痛苦，因为它几乎不可能修改。

如果我必须重组菜单并添加或删除其中一个菜单，那么修改后的所有内容都必须调整其父级以进行补偿。

有人用我没想到的东西打我的头，因为我确信这很明显。

结构表示：

```
id   menu          icon          level   parent  
===========================================================  
1    colors        color.jpg     1       NULL
-----------------------------------------------------------
2    shapes        shapes.jpg    1       NULL
-----------------------------------------------------------
3    red           red.jpg       2       1 
-----------------------------------------------------------
4    green         green.jpg     2       1  
-----------------------------------------------------------
5    square        square.jpg    2       2  
-----------------------------------------------------------
6    roses         roses.jpg     3       3
-----------------------------------------------------------
7    grass         grass.jpg     3       4 
```

因此，如果我决定在 1 级添加一个新菜单，我必须要么忍受一个非常混乱的数据库，要么在插入后修改每个条目的所有父值和 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T08:54:39.423

您想要使用表做的事情并不容易（请参阅[在关系数据库中存储树结构的最佳方法是什么？](https://stackoverflow.com/questions/3362669/what-is-the-best-way-to-store-a-tree-structure-in-a-relational-db)）。

将菜单结构存储在单个递归组织的 JSON 或 XML 对象中可能会更好。

# sql - 使用 if 语句如何替换值

> ID：15984564
> 
> 赞同：8
> 
> 时间：2013-04-13T05:23:43.730
> 
> 标签：sql, sql-server-2008, if-statement, sql-update, case

我有两张桌子，

**数据库 1：**

**表格1：**

*   ID -001（整数）

*   名称 -xxx(varchar)

*   男性 -0（位）

*   女 1（位）

**数据库 2：**

**表 2：**

*   ID -1（整数）

*   Ca.Name-yyy (varchar)

*   性别 - M 或 F (varchar)

这些是我的桌子。我想将database2，table 2中的数据更新到database1，table1。所以我创建了更新查询。但我对 Gender 字段有疑问

```
Select 'UPDATE T1
 SET T1.MALE ='+ CASE WHEN r.Gender = 'M' THEN 0 ELSE 1 END

 FROM T2 As r 
```

在下面的代码中，我加注星标的内容我怀疑如何在这里使用 if 语句。任何人都明白纠正我的问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T05:28:19.017

用于`case when`此目的。

关注这个问题：

[SQL Server：CASE WHEN OR THEN ELSE END => 不支持 OR](https://stackoverflow.com/questions/5487892/sql-server-case-when-or-then-else-end-the-or-is-not-supported)

```
CASE  
  WHEN GENDER='M' THEN 0 
  ELSE 1 
END 
```

这可能是你的情况。

有关更多语法详细信息：[CASE (Transact-SQL)](http://msdn.microsoft.com/en-in/library/ms181765.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T06:38:25.680

同样，您需要使用`CASE WHEN`. 查询如下所示：

```
UPDATE T1 
SET T1.MALE = CASE WHEN T2.caname = 'm' THEN 0 ELSE 1 END,
    T1.female = CASE WHEN T2.caname = 'm' THEN 1 ELSE 0 END  // you also need update this otherwise a person would end up with two genders :)
FROM TABLE1 T1
INNER JOIN table2 T2 ON T2.ID = T1.ID 
```

[SQL 小提琴演示：](http://www.sqlfiddle.com/#!3/0fb58/4)

# css - 如何更改我的 html 中的图像 src，以便我可以使用 CSS 为手持或移动设备创建其他 CSS 样式

> ID：15984565
> 
> 赞同：0
> 
> 时间：2013-04-13T05:23:46.450
> 
> 标签：css, image, src

这是我的一个页面上的链接代码

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Savings Calculator Page</title>
<link href="master.css" rel="stylesheet" type="text/css" />
<meta name="keywords" content="spray foam insulation, foam insulation, insulation,   energy savings, energy cost reduction, savings, spray insulation" />
<script language="javascript" type="text/javascript" src="calculator.js"></script>

</head>
<body>

<div id="container">
<div id="calculator1"> </div>
<div id="calculator2"><a href="index.html"><img src="images/images/images/calculator_02.jpg" width="179" height="69" border="0" alt="Home button"/></a> </div>
<div id="calculator3"> <a href="services.html"><img src="images/images/images/calculator_03.jpg" width="125" height="69" border="0" alt="Services button"/></a></div>
<div id="calculator4"><a href="calculator.html"><img src="images/images/images/calculator_04.jpg" width="267" height="69" border="0" alt="Savings Calculator button"/></a> </div>
<div id="calculator5"><a href="aboutUs.html"><img src="images/images/images/calculator_05.jpg" width="178" height="69" border="0" alt="About Us button"/></a> </div>
<div id="calculator6"><a href="contactUs.html"><img src="images/images/images/calculator_06.jpg" width="211" height="69" border="0" alt="Contact Us button"/></a> </div>
<div id="calculator7"> </div>
<form id="calc" name="calc" method="post" action="" >  
<div id="calculator8"> </div>
<div id="calculator9"><input type="text" id="textbox1_id" class="box1" /> </div>
<div id="calculator10"> </div>
<div id="calculator11"> </div>
<div id="calculator12"> </div>
<div id="calculator13"><input type="text"  id="textbox2_id" class="box2" /> </div>
<div id="calculator14"> </div>
<div id="calculator15"> </div>
<div id="calculator16"> </div>
<div id="calculator17"><input type="button" class="button" value="" onclick="calculate()" /></div>
<div id="calculator18"> </div>
<div id="calculator19"> </div>
<div id="calculator20"> </div>
<div id="calculator21"><input type="text"    id="textbox3_id" class="box3"  readonly="readonly" value="" />   </div>
<div id="calculator22"> </div>
</form>
<div id="calculator23"> </div>
<div id="calculator24"> 
<div id="footer1"> </div>
<div id="footer2"> </div>
<div id="footer3"> <a href="http://validator.w3.org/check?uri=referer"><img
  src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0 Transitional" width="88" height="31" border="0" /></a> </div>
<div id="footer4"> </div>
<div id="footer5">    <a href="http://jigsaw.w3.org/css-validator/check/referer">
    <img src="http://jigsaw.w3.org/css-validator/images/vcss"
        alt="Valid CSS!" border="0" style="border:0;width:88px;height:31px" />
</a> </div>
<div id="footer6"> </div>
<div id="footer7"> </div>  
</div>
</div>
</body>
</html> 
```

我真正想做的就是使用 CSS 获取图像，记住！！！！他们必须保持与其他页面的链接。如果还有其他方法可以做到这一点，那么我愿意接受建议...一点 javascript，一些 PHP，我的 Dreamweaver 就是我正在使用的...如果有人可以用其中任何一种方法做到这一点，那将不胜感激.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T08:40:15.360

以下是您可以做的几件事。首先删除图像标签上的所有高度、宽度、边框属性。这些应该在css中完成。我建议向图像添加一个类，而不是针对样式表中的元素。

由于您现在在 css 中控制图像高度和宽度，您可以设置媒体查询以根据用户屏幕显示图像大小。

这是一个例子：

```
#container img{
    width: auto;
    height: 69px;
}

@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
    width: auto;
    height: 30px;
} 
```

你应该可以从那里拿走它。祝你好运！

# javascript - 既然r.js将AMD模块编译成一个大文件，那么异步模块定义中的“异步”在哪里呢？

> ID：15984566
> 
> 赞同：3
> 
> 时间：2013-04-13T05:23:46.833
> 
> 标签：javascript, require, amd, r.js

一旦您使用 r.js 之类的东西将所有模块捆绑到一个大文件中，我发现有点难以理解 AMD 架构的异步方面存在于何处。

与简单地允许 require.js 在不阻塞 DOM 的情况下异步加载谨慎的 js 相比，使用 r.js 有什么好处（除了缩小）？当然，仅加载应用程序当前需要的内容（vanilla require.js）要比加载应用程序可能需要的所有内容（编译的 r.js）更快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T09:51:25.877

如果您决定制作一个捆绑包，AMD 没有单一的好处，只有缺点，因为您得到的只是一堆代码与样板文件混合在一起。

如果您正在寻找干净的解决方案，请尝试 CommonJS 风格，没有样板，并且使用正确的工具，它比 AMD 快得多（因为异步磁盘操作比异步网络操作更快），使用 CommonJS，您的代码也变得与环境无关，所以您可以在服务器（Node.js）和客户端上加载你的模块，不需要额外的配置/黑客攻击。

检查[Webmake](https://github.com/medikoo/modules-webmake)（我是它的作者）我用它开发了几年。我从来没有回头。

还检查一些 AMD -> CommonJS 转换成功案例：[http ://esa-matti.suuronen.org/blog/2013/03/22/journey-from-requirejs-to-browserify/](http://esa-matti.suuronen.org/blog/2013/03/22/journey-from-requirejs-to-browserify/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T05:33:51.357

我会给你一个我公司的例子。我们有单页模块网络应用程序（应用程序中的每个选项卡都是由独立的团队开发的）。每个团队都有自己的代码，并使用一些通用部分。在模块中使用 require 访问公共部分，因此他们确信它是可访问的（bundlead 脚本和服务器上的路径相同）。这提供了为模块制作捆绑文件的可能性，这些文件里面没有所有内容。

# html - meta name="viewport" content="width=device-width" 不适用于 Kendo UI Mobile

> ID：15984571
> 
> 赞同：0
> 
> 时间：2013-04-13T05:24:25.603
> 
> 标签：html, css, mobile, responsive-design, kendo-mobile

我正在使用 Kendo UI Mobile 框架，并且我有一个`min-width: 768px`CSS 类分配给我的一个，`views`因为我有无法再压缩的表数据。该视图在 iPad 上正确显示，但是当我在 7" Android 平板电脑中查看它时，该视图具有水平滚动。我需要该视图自动缩小以便整个视图可见。

我不明白为什么这行不通。

这是我的标头元标记：
`<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />`

这是我的剑道 UI 视图：

```
<div data-role="view" id="main">
    <div class="headerWrapper">
        <div class="mainHeaderStyleLeft">
            <img src="Images/logo.png">
        </div>
        <div class="mainHeaderStyleRight">
            <div class="mainMenuButton"><img src="Images/MenuBttnUnselected.png"></div>
            <div class="checklistMenuButton"><img src="Images/MenuBttnUnselected.png"></div>
            <div class="reportingMenuButton"><img src="Images/MenuBttnUnselected.png"></div>
            <div class="trainingMenuButton"><img src="Images/MenuBttnUnselected.png"></div>
        </div>
    </div>   
</div> 
```

我的观点 css 很简单：

```
#main {
    min-width: 768px;
}
.mainMenuButton {

    margin-left: 230px;
    float: left;
}
.mainMenuButton img{
    width: 100px;
    height: 100px;
    margin-top: 15px;
}
.checklistMenuButton {
    margin-left: 10px;
    float: left;
}
.checklistMenuButton img{
    width: 100px;
    height: 100px;
    margin-top: 15px;
}
.reportingMenuButton {
    margin-left: 10px;
    float: left;
}
.reportingMenuButton img{
    width: 100px;
    height: 100px;
    margin-top: 15px;
}
.trainingMenuButton {
    margin-left: 10px;
    float: left;
}
.trainingMenuButton img{
    width: 100px;
    height: 100px;
    margin-top: 15px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T06:46:58.787

@Rob我之前遇到过同样的问题，下面是我的代码，它将禁用缩放。（它会缩小屏幕并使屏幕稳定..）有时禁用缩放 user-scalable=no; 或用户可扩展=0；在某些设备中不起作用，要使其在所有设备中起作用，请尝试以下代码..

```
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width; initial-scale=0.9; maximum-scale=0.9; minimum-scale=0.9;" /> 
```

使 initial-scanle=0.9 和 maximamu-scale=0.9 也会使屏幕在小屏幕中保持稳定。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-30T21:44:08.980

在元标记中添加 id="main"

hth

# php - 通过函数运行“isset”时会话不会启动

> ID：15984573
> 
> 赞同：-3
> 
> 时间：2013-04-13T05:24:46.890
> 
> 标签：php, mysql, pdo

我正在为登录页面创建一个有效的凭证功能。
如果我使用以下代码在函数外部使用该函数，则该函数有效：

```
if(isset($_POST['email'])){
    $email = $_POST['email'];
    $password = $_POST['password'];

    $q = "SELECT * FROM user WHERE email = :email";
    $query = $db->prepare($q);
    $query->execute(array(":email" => $email));
    $results = $query->fetchAll();

    if($results !=FALSE && $query->rowCount() > 0) {
    if($results[0]['password'] == $password){
    $_SESSION['email'] = $email;
} 
```

但是，如果我从外部函数调用该函数，则不会发生任何事情，就好像登录凭据有问题一样。

**功能：**

```
 function valid_credientials($email,$password){
    global $db;

    $email = $_POST['email'];
    $password = $_POST['password'];
    $q = "SELECT * FROM user WHERE email = :email";
    $query = $db->prepare($q);
    $query->execute(array(":email" => $email));
    $results = $query->fetchAll();
    if($results !=FALSE && $query->rowCount() > 0) {
    if($results[0]['password'] == $password){
    $_SESSION['email'] = $email;

}}

} 
```

和`isset`帖子：

```
 if (isset($_POST['email'], $_POST['password'])){
        if (valid_credientials($_POST['email'], $_POST['password']) == false ){
        $errors[] = 'No matching email found.';
    }
        if (empty($errors)){
            $_SESSION['email'] = htmlentities($_POST['email']);

            header("Location: profile.php");
                die();

        }
    } 
```

我正在考虑连接问题，但如果我使用此功能，它会返回电子邮件。

```
function valid_credientials($email,$password){
    $test = $db->query("SELECT `email` FROM `user`");
    while($row = $test->fetch(PDO::FETCH_ASSOC)){ 
        echo $row['email'], '<br>';
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T05:44:01.627

看你的代码，

```
function valid_credientials($email,$password){
    global $db;

    $email = $_POST['email'];
    $password = $_POST['password'];
    $q = "SELECT * FROM user WHERE email = :email";
    $query = $db->prepare($q);
    $query->execute(array(":email" => $email));
    $results = $query->fetchAll();
    if($results !=FALSE && $query->rowCount() > 0) {
    if($results[0]['password'] == $password){
       $_SESSION['email'] = $email;

    }
} 
```

您从 $_POST 获取值，您根本不需要这两行，因为您的函数参数中有电子邮件和密码。

```
$email = $_POST['email'];
$password = $_POST['password']; 
```

您还检查了函数的返回值，但您的函数没有返回任何内容。通过下面的代码，它根据条件返回真或假。

```
function valid_credientials($email,$password){
    global $db;

    $email = $_POST['email'];
    $password = $_POST['password'];
    $q = "SELECT * FROM user WHERE email = :email";
    $query = $db->prepare($q);
    $query->execute(array(":email" => $email));
    $results = $query->fetchAll();
    if($results !=FALSE && $query->rowCount() > 0) {
    if($results[0]['password'] == $password){
       $_SESSION['email'] = $email;
       return true;
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T05:35:07.487

您的`valid_credentials`函数不返回值。

下面的 if 语句，将返回 NULL（这不是肯定的，只是猜测），它不等于 false，因此在下一个 if 语句期间错误数组仍然是空的

```
if (valid_credientials($_POST['email'], $_POST['password']) == false ){
    $errors[] = 'No matching email found.';
}
if (empty($errors)){

} 
```

# ios - 在模拟器上模拟 2 指单击

> ID：15984575
> 
> 赞同：10
> 
> 时间：2013-04-13T05:24:51.233
> 
> 标签：ios, objective-c

我正在尝试检测屏幕靠近右侧的特定部分的手势。

当我尝试使用这种方法进行点击时（[iOS 模拟器：如何在 Mac 笔记本电脑上进行 2 指单击？](https://stackoverflow.com/questions/6866423/ios-simulator-how-to-do-a-2-finger-single-tap-on-a-mac-laptop)），两个“手指”出现在屏幕的两端。如何让模拟器轻按，以使“手指”彼此相邻。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-13T05:58:55.583

使用 Option 键在模拟器屏幕上显示两个手指图标。尽可能靠近它们。然后按 Shift 将它们移动到屏幕上您想要的任何位置。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-11-06T11:38:02.130

在模拟器中，按住选项键并单击 - 这将模拟两指轻敲！

# sqlite - 连接 1 个表中的两列值并使用 sqlite 通过升序对其进行排序

> ID：15984576
> 
> 赞同：0
> 
> 时间：2013-04-13T05:24:59.403
> 
> 标签：sqlite

我有两种折扣

```
1.the fixed php
2.the percent % 
```

它们是同一个表中的不同列

表名是discount，表列是disc_amt，disc_pct

产品描述字段的名称是 disc_desc

我想把这个折扣排序在这个

描述 = 1 比索

描述 = 1 %s

描述 = 2 比索

描述= 2%

有人可以帮助我吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T06:34:30.007

您可以从同一个表（或不同的表）中选择两个或多个字段，其中每个字段都自行排序，如下所示：

SELECT * FROM (SELECT disc_amt FROM discount ORDER BY disc_amt), (SELECT disc_pct FROM discount ORDER BY disc_pct)

我在 sqlite 上测试了这个，尽管使用了不同的表并且它可以工作。

鉴于这是你想要的。但是，如果您想包含描述列，那么这是一个不同的故事，虽然它是可行的，但它不一定将每行的行与其他字段（例如 disc_amt 和 disc_pct）匹配。

# excel - Excel告诉我我的空白单元格不是空白的

> ID：15984580
> 
> 赞同：29
> 
> 时间：2013-04-13T05:25:28.737
> 
> 标签：excel, vba

因此，在 excel 中，我试图通过使用 F5 查找空白单元格，然后使用 Ctrl + - 删除它们，并将单元格向上移动，从而消除单元格之间的空白单元格。但是当我尝试这样做时，它告诉我“没有找到细胞”。

我注意到，如果我选择我的“空白”单元格，Excel 仍然会计算它们：![就像在这张照片中](https://i.stack.imgur.com/lmWw1.png)这很奇怪。但是，如果我在那些选定的单元格上按 Delete，计数就会消失，然后我可以按 F5、空格、Ctrl + - 和向上移动单元格，它就可以工作了……

所以我的问题是我怎样才能做到这一点，但是 Excel 认为这些空白单元格不是空白的？我试图通过并在空白单元格上按删除，但我有很多数据并且意识到这会花费我太长时间。**我需要找到一种方法来选择数据中的这些“空白”单元格。**

在此先感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-14T02:45:05.780

选择和清除这些空白单元格以使其空白的简单方法：

1.  按下`ctrl + a`或预先选择您的范围
2.  按`ctrl + f`
3.  留空**查找内容**并选择**匹配整个单元格内容**。
4.  点击**查找所有**
5.  按下`ctrl + a`以选择找到的所有空单元格
6.  关闭查找对话框
7.  按`backspace`或`delete`

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-08-01T14:18:36.290

这对我有用：

1.  CTR-H 调出查找和替换
2.  将“查找内容”留空
3.  将“替换为”更改为唯一的文本，您
    肯定的内容不会在另一个单元格中找到（我使用了“xx”）
4.  点击“全部替换”
5.  将步骤 3 中的唯一文本复制到“查找内容”
6.  删除“替换为”中的唯一文本
7.  点击“全部替换”

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-04-14T01:22:41.540

**一个启示：**一些空白单元格实际上并不是空白的！正如我将展示的，单元格可以有空格、换行符和真正的空：

![例子](https://i.stack.imgur.com/cJWxE.jpg "例子")

**要快速找到这些单元格**，您可以做一些事情。

1.  该`=CODE(A1)`公式将返回一个**#VALUE！**如果单元格真的是空的，否则将返回一个数字。这个数字是[ASCII](http://www.asciitable.com/ "ASCII表")`=CHAR(32)`数字。
2.  如果选择单元格并在编辑栏中单击并使用光标全选。![换行选择示例](https://i.stack.imgur.com/w4oEp.jpg "换行选择示例")

**删除这些：**

如果单元格中只有**一个空格**，则可以使用以下方法轻松删除这些空格：

1.  按`ctrl + h`打开查找和替换。
2.  **在find what**中输入一个空格，将**replace**留空，并确保在选项中勾选了**匹配整个单元格内容。**
3.  按**全部替换**。

如果您有**换行符**，这将更加困难并且需要 VBA：

1.  右键单击工作表选项卡 > 查看代码。
2.  然后输入以下代码。请记住`Chr(10)`is a newline 仅根据需要替换它，例如`" " & Char(10)`空格和换行符：

    ```
    Sub find_newlines()
        With Me.Cells
            Set c = .Find(Chr(10), LookIn:=xlValues, LookAt:=xlWhole)
            If Not c Is Nothing Then
                firstAddress = c.Address
                Do
                    c.Value = ""
                    Set c = .FindNext(c)
                    If c Is Nothing Then Exit Do
                Loop While c.Address <> firstAddress
            End If
        End With
    End Sub 
    ```

3.  现在运行你的代码按`F5`。

* * *

**提供文件后**：选择感兴趣的范围以提高性能，然后运行以下命令：

```
Sub find_newlines()
    With Selection
        Set c = .Find("", LookIn:=xlValues, LookAt:=xlWhole)
        If Not c Is Nothing Then
            firstAddress = c.Address
            Do
                c.Value = ""
                Set c = .FindNext(c)
                If c Is Nothing Then Exit Do
            Loop While c.Address <> firstAddress
        End If
    End With
End Sub 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-29T16:03:38.810

我有一个类似的问题，从另一个应用程序导出的分散的空白单元格仍然出现在单元格计数中。

我设法清除它们

1.  选择我想清理的列/行，然后做
2.  “查找”[无文本]和“替换”[选择词]。
3.  然后我做了“查找”[选择词]和“替换”[无文本]。

它摆脱了这些单元格中的所有隐藏/幻像字符。也许这对你有用？

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-03-09T09:46:05.947

所有，这很简单。我一直在尝试相同的方法，这在 VBA 中对我有用

```
Range("A1:R50").Select    'The range you want to remove blanks
With Selection
    Selection.NumberFormat = "General"
    .Value = .Value
End With 
```

问候， 阿南德兰卡

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-21T19:00:31.450

不确定这是否已经说过，但我遇到了类似的问题，单元格中没有显示任何内容，但在运行 IsBlank() 公式时不为空白。

我选择了整个列，选择了查找和替换，找到没有任何内容的单元格并替换为 0，然后再次运行查找和替换，查找单元格为 0 并替换为“”。

这解决了我的问题，让我可以搜索空白单元格（F5、特殊、空白）并删除空白的行......繁荣。

可能不适用于每个应用程序，但这解决了我的问题。

有时单元格中的空格显示为空白，但如果您在单元格上按 F2，您会看到空格。如果您知道单元格中的确切空格数，也可以通过这种方式进行搜索

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-03-19T21:30:58.067

**如果您没有要保留的格式或公式**，您可以尝试将文件另存为制表符分隔的文本文件，将其关闭，然后使用 Excel 重新打开。这对我有用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-06-27T11:05:38.047

```
'Select non blank cells
Selection.SpecialCells(xlCellTypeConstants, 23).Select
' REplace tehse blank look like cells to something uniqu
Selection.Replace What:="", Replacement:="TOBEDELETED", LookAt:=xlWhole, _
    SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
    ReplaceFormat:=False
'now replace this uique text to nothing and voila all will disappear
Selection.Replace What:="TOBEDELETED", Replacement:="", LookAt:=xlWhole, _
    SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
    ReplaceFormat:=False 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-04-06T11:30:29.737

找到了另一种方式。通过选择标题行 > '数据' 选项卡 > 排序和过滤器 - '过滤器'，为*所有*列设置自动过滤器（很重要，否则您会错位数据）。在第一个数据列中使用下拉菜单，取消选中“全选”并仅选择“（空白）”选项> [确定]。突出显示行（现在全部在一起）> 右键单击​​>“删除行”。返回下拉菜单>“全选”。急速:)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-07-06T18:43:40.840

我的方法类似于 Curt 上面关于将其保存为制表符分隔的文件并重新导入的建议。它假定您的数据只有值而没有公式。这可能是一个很好的假设，因为“坏”空白的问题是由空白和空值之间的混淆引起的——通常是在从其他地方导入的数据中——所以不应该有任何公式。我的方法是**就地解析**——非常类似于保存为文本文件并重新导入，但您可以在不关闭和重新打开文件的情况下执行此操作。它位于数据 > 文本到列 > 分隔 > 删除所有解析字符（如果需要，也可以选择文本）> 完成。这应该会导致 Excel 从头开始​​或从文本中重新识别您的数据，并将空白识别为真正的空白。

```
Sub F2Enter_new()         
   Dim rInput As Range
   If Selection.Cells.Count > 1 Then Set rInput = Selection
   Set rInput = Application.InputBox(Title:="Select", prompt:="input range", _ 
                                     Default:=rInput.Address, Type:=8)
'   Application.EnableEvents = False: Application.ScreenUpdating = False
   For Each c In rInput.Columns
      c.TextToColumns Destination:=Range(c.Cells(1).Address), DataType:=xlDelimited, _
      TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=False, Tab:=False, _
      Semicolon:=False, Comma:=False, Space:=False, Other:=False, _
      FieldInfo:=Array(1, 1), TrailingMinusNumbers:=True
   Next c
   Application.EnableEvents = True: Application.ScreenUpdating = True
End Sub 
```

您还可以打开该注释行以使该子例程“在后台”运行。对于这个子例程，它只略微提高了性能（对其他人来说，它确实有很大帮助）。之所以命名为 F2Enter，是因为修复此“空白”问题的原始手动方法是通过按 F2 和 Enter 使 Excel 识别公式。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-10-11T16:12:22.750

这适用于数字。

如果您的范围是 O8:O20，则在附近的空白范围（例如 T8:T20）中输入 =O8/1 并填写。这将为您提供“空”单元格的#VALUE 结果，并且您的原始编号将保持不变。

然后选择 T8:20 范围（CTL-* 如果还没有）按 F5 并选择 Special。从特殊对话框中，选择错误并单击确定。这将取消选择您的实际数字，只选择#VALUE 单元格。删除它们，您将拥有实际的空单元格。复制 T8:T20 并粘贴回 O8:O20。

本质上，由于空白单元格不起作用，您需要将“空”单元格转换为 Go To Special 可以锁定的内容。任何将转换为 #VALUE 的操作都可以工作，并且还应支持其他“错误”类型。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-02-19T13:05:21.600

对我来说最简单的解决方案是：

1）选择范围并复制它（ctrl+c）

2）新建一个文本文件（随便哪里，很快就会被删除），打开文本文件然后粘贴excel信息（ctrl+v）

3）既然Excel中的信息在文本文件中，在文本文件中执行全选（ctrl+a），然后复制（ctrl+c）

4）转到步骤 1 中原始范围的开头，并粘贴步骤 3 中副本中的旧信息。

完毕！没有更多的错误空白！（您现在可以删除临时文本文件）

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-08-02T21:03:38.100

这是我在没有任何编码的情况下解决此问题的方法。

1.  选择我要从中删除“空白”单元格的整个列。
2.  单击顶部的条件格式选项卡。
3.  选择“新规则”。
4.  单击“仅格式化包含的单元格”。
5.  将“之间”改为“等于”。
6.  单击“等于”框旁边的框。
7.  单击有问题的“空白”单元格之一。
8.  单击格式按钮。
9.  选择一种随机颜色来填充框。
10.  按“确定”。
11.  这应该将所有有问题的“空白”单元格更改为您选择的颜色。现在右键单击一个彩色单元格，然后转到“排序”和“将选定的单元格颜色放在顶部”。
12.  这会将所有问题单元格放在列的顶部，现在所有其他单元格将保持原来的顺序。您现在可以选择一组中的所有问题单元格，然后单击删除单元格按钮在顶部摆脱它们。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-07-12T04:03:23.560

我在获取 COUNTA 公式来计算非空白单元格时遇到了类似的问题，它正在计算所有单元格（即使是空白单元格也是非空白单元格），我尝试了 =CODE() 但它们没有空格或换行符。

我发现当我单击单元格然后单击它时，公式会计算单元格。我有数千个单元格，因此无法手动执行此操作。我写了这个 VBA 语句来逐字检查所有单元格，如果它们是空白的，那么将它们设为空白。忽略这个宏的无意义，相信我，它实际上是通过强制 Excel 将空单元格识别为实际上是空的。

```
'This checks all the cells in a table so will need to be changed if you're using a range
Sub CreateBlanks()

Dim clientTable As ListObject
Dim selectedCell As Range

Set clientTable = Worksheets("Client Table").ListObjects("ClientTable")

For Each selectedCell In clientTable.DataBodyRange.Cells
    If selectedCell = "" Then
        selectedCell = ""
    End If
Next selectedCell
End Sub 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-05-05T19:25:58.777

Goto->Special->blanks 不喜欢合并的单元格。尝试取消合并要选择空白范围以上的单元格，然后重试。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-05-28T12:06:12.963

将数据集保存在 CSV 文件中并打开该文件并复制数据集并粘贴到 Excel 文件中。然后 crtl + g 将对您的文件起作用，这意味着 excel 将识别空白确实是空白。

# parallel-processing - openmp 上的 for 循环

> ID：15984581
> 
> 赞同：0
> 
> 时间：2013-04-13T05:25:34.537
> 
> 标签：parallel-processing, openmp

当我不使用 openMP 时，以下代码运行得更快。为什么会这样？我在双核机器上运行它。使用 open mp 运行所需的时间约为 0.05 秒，而在没有 openMP 的情况下运行它只需要 0.03 秒。

```
#include<omp.h>
#include<iostream>
#include<time.h>
using namespace std;

int main()
{
clock_t start=clock();
int i,j,t1,t2, n=1;
float a[1000][1000];
float b[1000][1000];

#pragma omp parallel 
{
#pragma omp for private(i)
for(j=0; j<1000; j++)
{
    for(i=0; i<1000; i++)

    {
            a[i][j]=(i*j*i*j)/(i+j+1)/(i*j*i+8*i+1);
            b[i][j]=(i*j*i*j)/(i+j+1)/(i*j*i+8*i+1);

    }
}
}
clock_t end=clock();
cout<<"Time to run is "<<(double)(end - start)/CLOCKS_PER_SEC<<endl;
} 
```

# c# - 级联添加/更新树（父/子）数据

> ID：15984583
> 
> 赞同：1
> 
> 时间：2013-04-13T05:25:37.347
> 
> 标签：c#, database, entity-framework, entity-framework-5

我有一些问题。这是数据库结构：

```
CREATE TABLE [EvaluationProcess].[CriteriaHeader](
    [CriteriaHeader_No] [uniqueidentifier] NOT NULL,
    [CriteriaHeader_Type] [int] NOT NULL,
    [CriteriaHeader_Name] [nvarchar](128) NOT NULL,
    [CriteriaHeader_Description] [nvarchar](256) NULL,
    [CriteriaHeader_MaxScore] [int] NOT NULL,
    [CriteriaHeader_MinScore] [int] NOT NULL,
    [CriteriaHeader_ScoreStep] [int] NOT NULL,
    [CriteriaHeader_IsCountedResult] [bit] NOT NULL,
    [CriteriaHeader_IsBlocked] [bit] NOT NULL,
    [OwnedOrganisationID] [uniqueidentifier] NULL,
    [ModifyUser] [uniqueidentifier] NULL,
    [ModifyDate] [datetime] NULL,
    [TimeStamp] [timestamp] NULL,
 CONSTRAINT [PK_Criteria] PRIMARY KEY CLUSTERED 
(
    [CriteriaHeader_No] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [EvaluationProcess].[CriteriaHeader] ADD  CONSTRAINT [DF_Criteria_Criteria_No]  DEFAULT (newsequentialid()) FOR [CriteriaHeader_No]
GO

ALTER TABLE [EvaluationProcess].[CriteriaHeader] ADD  CONSTRAINT [DF_Criteria_Criteria_Type]  DEFAULT ((0)) FOR [CriteriaHeader_Type]
GO

ALTER TABLE [EvaluationProcess].[CriteriaHeader] ADD  CONSTRAINT [DF_Criteria_Criteria_MaxScore_1]  DEFAULT ((5)) FOR [CriteriaHeader_MaxScore]
GO

ALTER TABLE [EvaluationProcess].[CriteriaHeader] ADD  CONSTRAINT [DF_Criteria_Criteria_MinScore_1]  DEFAULT ((0)) FOR [CriteriaHeader_MinScore]
GO

ALTER TABLE [EvaluationProcess].[CriteriaHeader] ADD  CONSTRAINT [DF_Criteria_Criteria_ScoreStep_1]  DEFAULT ((1)) FOR [CriteriaHeader_ScoreStep]
GO

ALTER TABLE [EvaluationProcess].[CriteriaHeader] ADD  CONSTRAINT [DF_Criteria_Criteria_IsCountedResult]  DEFAULT ((0)) FOR [CriteriaHeader_IsCountedResult]
GO

ALTER TABLE [EvaluationProcess].[CriteriaHeader] ADD  CONSTRAINT [DF_Criteria_Criteria_IsBlocked]  DEFAULT ((0)) FOR [CriteriaHeader_IsBlocked]
GO

ALTER TABLE [EvaluationProcess].[CriteriaHeader] ADD  CONSTRAINT [DF_Criteria_ModifyDate]  DEFAULT (getdate()) FOR [ModifyDate]
GO

CREATE TABLE [EvaluationProcess].[CriteriaLine](
    [CriteriaLine_No] [uniqueidentifier] NOT NULL,
    [CriteriaLine_ParentID] [uniqueidentifier] NULL,
    [CriteriaLine_CriteriaHeaderID] [uniqueidentifier] NULL,
    [CriteriaLine_Text] [nvarchar](128) NOT NULL,
    [CriteriaLine_Description] [nvarchar](512) NULL,
    [OwnedOrganisationID] [uniqueidentifier] NULL,
    [ModifyUser] [uniqueidentifier] NULL,
    [ModifyDate] [datetime] NULL,
    [TimeStamp] [timestamp] NULL,
 CONSTRAINT [PK_CriteriaList] PRIMARY KEY CLUSTERED 
(
    [CriteriaLine_No] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [EvaluationProcess].[CriteriaLine] ADD  CONSTRAINT [DF_CriteriaList_CriteriaList_No]  DEFAULT (newsequentialid()) FOR [CriteriaLine_No]
GO

ALTER TABLE [EvaluationProcess].[CriteriaLine] ADD  CONSTRAINT [DF_CriteriaList_ModifyDate]  DEFAULT (getdate()) FOR [ModifyDate]
GO

ALTER TABLE [EvaluationProcess].[CriteriaLine]  WITH CHECK ADD  CONSTRAINT [FK_CriteriaLine_CriteriaLine] FOREIGN KEY([CriteriaLine_CriteriaHeaderID])
REFERENCES [EvaluationProcess].[CriteriaHeader] ([CriteriaHeader_No])
ON UPDATE CASCADE
ON DELETE CASCADE
GO

ALTER TABLE [EvaluationProcess].[CriteriaLine] CHECK CONSTRAINT [FK_CriteriaLine_CriteriaLine]
GO

ALTER TABLE [EvaluationProcess].[CriteriaLine]  WITH CHECK ADD  CONSTRAINT [FK_CriteriaLine_CriteriaLine1] FOREIGN KEY([CriteriaLine_ParentID])
REFERENCES [EvaluationProcess].[CriteriaLine] ([CriteriaLine_No])
GO

ALTER TABLE [EvaluationProcess].[CriteriaLine] CHECK CONSTRAINT [FK_CriteriaLine_CriteriaLine1]
GO 
```

我使用 EntityFramework 5。这是一个添加/更新函数

```
public override bool InsertOrUpdate(object[] _BaseEntityClasses, string _RoleName,
                                    System.Nullable<Guid> _LoginUserID,
                                      System.Nullable<System.Guid> _OrganisationID, bool? IsModified = null)
{
    using (Evaluation_SystemConection EvaluationDBContext = new Evaluation_SystemConection())
    {
        try
        {
            EvaluationDBContext.Configuration.AutoDetectChangesEnabled = false;

            IEnumerable<CriteriaHeader> _BaseEntityClassesList = _BaseEntityClasses.Cast<CriteriaHeader>();

            foreach (var OneItem in _BaseEntityClassesList)
            {
                if (OneItem.CriteriaLines != null)
                {
                    foreach (var OneLine in OneItem.CriteriaLines)
                    {
                        if (OneLine.CriteriaLine_No == Guid.Empty)
                            OneLine.CriteriaLine_CriteriaHeaderID = OneItem.CriteriaHeader_No;

                        EvaluationDBContext.CriteriaLines.Attach(OneLine);

                        EvaluationDBContext.Entry(OneLine).State = OneLine.CriteriaLine_No == Guid.Empty ? EntityState.Added : EntityState.Modified;

                    }

                }

                EvaluationDBContext.CriteriaHeaders.Add(OneItem);

                EvaluationDBContext.Entry(OneItem).State = OneItem.CriteriaHeader_No == Guid.Empty ? EntityState.Added : EntityState.Modified;

                if (EvaluationDBContext.SaveChanges() <= 0)
                    return false;
            }

            return true;
        }
        catch (Exception Ex)
        {
            ErrorMessage.Add("");

            ErrorMessage.Add((Ex.InnerException != null) ? Ex.InnerException.Message : Ex.Message);

            return false;
        }
        finally
        {
            EvaluationDBContext.Configuration.AutoDetectChangesEnabled = true;
        }
    }

} 
```

并生成 POCO 类

```
public partial class CriteriaHeader
{
    public CriteriaHeader()
    {
        this.CriteriaLines = new HashSet<CriteriaLine>();
    }

    public System.Guid CriteriaHeader_No { get; set; }
    public int CriteriaHeader_Type { get; set; }
    public string CriteriaHeader_Name { get; set; }
    public string CriteriaHeader_Description { get; set; }
    public int CriteriaHeader_MaxScore { get; set; }
    public int CriteriaHeader_MinScore { get; set; }
    public int CriteriaHeader_ScoreStep { get; set; }
    public bool CriteriaHeader_IsCountedResult { get; set; }
    public bool CriteriaHeader_IsBlocked { get; set; }
    public Nullable<System.Guid> OwnedOrganisationID { get; set; }
    public Nullable<System.Guid> ModifyUser { get; set; }
    public Nullable<System.DateTime> ModifyDate { get; set; }
    public byte[] TimeStamp { get; set; }

    public virtual ICollection<CriteriaLine> CriteriaLines { get; set; }
}

public partial class CriteriaLine
{
    public CriteriaLine()
    {
        this.CriteriaLine1 = new HashSet<CriteriaLine>();
    }

    public System.Guid CriteriaLine_No { get; set; }
    public Nullable<System.Guid> CriteriaLine_ParentID { get; set; }
    public Nullable<System.Guid> CriteriaLine_CriteriaHeaderID { get; set; }
    public string CriteriaLine_Text { get; set; }
    public string CriteriaLine_Description { get; set; }
    public Nullable<System.Guid> OwnedOrganisationID { get; set; }
    public Nullable<System.Guid> ModifyUser { get; set; }
    public Nullable<System.DateTime> ModifyDate { get; set; }
    public byte[] TimeStamp { get; set; }

    public virtual CriteriaHeader CriteriaHeader { get; set; }
    public virtual ICollection<CriteriaLine> CriteriaLine1 { get; set; }
    public virtual CriteriaLine CriteriaLine2 { get; set; }
} 
```

数据未在 中插入或更新超过 1 个级别`CriteriaList`。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T09:50:27.550

首先，您应该始终尽量避免更改`AutoDetectChangesEnabled`. 当你使用它时，你真的必须彻底了解它做什么（和不做什么）。所以首先要做的就是不要碰`AutoDetectChangesEnabled`。看起来你的方法可以在没有它的情况下工作。如果没有，请随时告诉我们发生了什么，以便我们尝试处理它。（我怀疑会出现一些您试图通过更改来防止的问题`AutoDetectChangesEnabled`）。

您可以考虑使用实体框架自己的[AddOrUpdate 方法](http://msdn.microsoft.com/en-us/library/hh846520%28v=vs.103%29.aspx)。所以你在哪里

```
EvaluationDBContext.CriteriaHeaders.Add(OneItem);
EvaluationDBContext.Entry(OneItem).State = OneItem.CriteriaHeader_No == Guid.Empty ? EntityState.Added : EntityState.Modified; 
```

你可以做

```
EvaluationDBContext.CriteriaHeaders.AddOrUpdate(OneItem); 
```

（同样与`CriteriaLines`）。

但是每条记录都需要往返于数据库，以查看是否应该插入或更新。

您的代码中还有更多问题。

*   命名约定（例如`_BaseEntityClasses`，约定是`baseEntityClasses`.
*   您不应`object[]`用作输入参数，而应使用泛型：`InsertOrUpdate<T>(IEnumerable<T> baseEntityClasses, ...`.
*   您似乎有一些外部`ErrorMessage`列表，这是一种有状态的编程方式。即你的方法有副作用。可能很难说出`ErrorMessage`受影响的地方以及何时应该清除或报告。
*   你吞下任何例外。这不是真正的异常处理。只需重新扔掉它们并在适当的地方处理它们。
*   永远不要只返回一个布尔值。尤其是当你返回时，`false`它是没有意义的。例如，您可以返回受影响的行数。与重新抛出异常一起，消费者将从您的方法中接收到比布尔值更多的信息。

# html - 图像映射在 Firefox 中不起作用！在 Chrome+Safari 中运行良好

> ID：15984587
> 
> 赞同：14
> 
> 时间：2013-04-13T05:26:08.610
> 
> 标签：html, google-chrome, firefox, cross-browser, imagemap

我制作了一张图片地图，但它在 Firefox 中不起作用。它在 Chrome 和 Safari 中都能正常工作。

这是网站 bryanedwardcollins.com

请帮忙！

```
 <MAP NAME="menumap" >
<AREA 
HREF="contact.html" ALT="contact" 
SHAPE="POLY" COORDS="425,100, 572,89, 594,142, 488,150, 460,166, 423,100">
    <AREA
    HREF="insameit.html" ALT="insame i.t." 
    SHAPE="POLY" COORDS="382,239, 462,245, 461,343, 608,344, 610,395, 354,405, 354,341">
    <AREA
    HREF="floorpart.html" ALT="floor part" 
    SHAPE="POLY" COORDS="307,185, 429,185, 430,221, 379,222, 374,235, 283,224">
    <AREA
    HREF="iouse.html" ALT="I O Use" 
    SHAPE="POLY" COORDS="27,18, 231,16, 243,0, 382,0, 253,265, 69,252, 193,73, 27,73">
    <AREA
    HREF="worldpart.html" ALT="world part" 
    SHAPE="POLY" COORDS="25,303, 122,305, 122,448, 27,449">
    </MAP> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-07-10T17:23:16.200

我也偶然发现了这个问题。似乎 Chrome 会解析没有 # 符号的 img 属性 usemap="mapName" 。但是，如果您不包含井号“#”，则地图将不会与 FireFox 和 Internet Explorer 上的图像相关联。

这是正确的方法：

```
<img src="images/header.jpg" id="hdr" name="hdr" usemap="#hdrMap" alt="alt string here" border="0">
    <map name="hdrMap" style="cursor:pointer;">
        <area shape="rect" coords="720,65,880,0" href="http://www.thisisthefirstlink.com" target="_blank" alt="first link alt">
        <area shape="rect" coords="882,65,1024,0" href="http://www.secondlink.com" target="_blank" alt="second link alt">
    </map> 
```

请注意，usemap="#hrdMap" 有一个井号标记符号，并且匹配 map 标记的 name="hdrMap" 属性。这似乎有点令人困惑，因为很多人将 # 符号与引用 id 属性相关联。

希望这可以帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-06T21:47:09.817

Firefox 中的另一个`<map`问题及其解决方案 - 确保您没有`<a>`在`<map>`. 如果`<map>`有任何子元素， `<a>`Firefox 将忽略整个`<map>`元素。

不使用`<a>`元素可能很明显，因为`<area>`它具有`href`属性，但是，例如，在 Ember.js 中，编写这样的代码对我很有用：

```
<map id='human-image-map' name='human-image' action='showTooltip'>
    <section class="front" title="Pokaż ćwiczenia">
      {{#link-to 'training.shoulders'}}
        <area alt="Barki" shape="poly" coords="39,74,37,75,35,77,33,78,32,76,32,73,32,71,32,68,33,65,33,63,34,61,36,58,37,56,38,54,40,53,42,52,44,51,46,51,48,51,51,50,55,49,57,48,59,47,61,47,59,50,58,52" />
        <area alt="Barki" shape="poly" coords="112,74,114,75,117,77,119,79,121,77,121,74,121,71,121,68,119,65,117,62,116,59,113,57,111,54,109,53,106,51,103,50,99,49,96,47,93,46,90,45,90,48,92,50,93,52,95,54,97,56,99,59,101,62,103,65,106,68" />
      {{/link-to}}
    </section>
</map> 
```

我无法`href`手动指定属性，将其留给`link-to`助手被认为是最佳实践。

我的具体 Ember.js 问题的解决方案是使用另一个标签而不是`<a>`. 因此，添加`tagName='span'`到`link-to`helper 解决了我的问题：

```
{{#link-to 'training.shoulders' tagName='span'}}
  <!-- ... -->
{{/link-to}} 
```

**注意**：*在里面的 Chrome`<a>`元素中`<map>`工作正常。*

# java - 公共方法返回私有类实例呢？

> ID：15984588
> 
> 赞同：3
> 
> 时间：2013-04-13T05:26:19.533
> 
> 标签：java, class, package, private, public

我正在尝试测试以下情况：

1.  有一个主要的。( `city.Main`)
2.  有一个包。( `package castle`)
3.  在包中，有一个公共类（`castle.Guard`）和一个*包私有*类（`castle.Princess`）。
4.  **如果公共类返回私有类的实例怎么办？**

这是我的代码：

**主.java**

```
package city;

import castle.Guard;

public class Main {

    public static void main(String[] args) {
        Princess princess = Guard.getPrincessStatic();
        // Error: Princess cannot be resolved to a type

        Guard.getPrincessStatic().sayHi();
        // Error: The type Princess is not visible

        Guard guard = new Guard();
        guard.getPrincess().sayHi();
        // Error: The type Princess is not visible

        guard.getPrincessMember().sayHi();
        // Error: The type Princess is not visible
    }

} 
```

**Guard.java**

```
package castle;

public class Guard {

    public Princess getPrincess() {
        return new Princess();
    }

    public static Princess getPrincessStatic() {
        return new Princess();
    }

    private Princess m_princess = new Princess();

    public Princess getPrincessMember() {
        return m_princess;
    }
} 
```

**公主.java**

```
package castle;

class Princess {
    public void sayHi() { System.out.println("Hi world"); }
} 
```

*请注意，其中的所有 4 个语句`main()`都有错误。*

我也做过一些研究。事实上，我想模仿[这个答案](https://stackoverflow.com/a/5414217/1884546)。但我不明白为什么我的代码会抛出错误。

感谢您的任何解释！

* * *

# 编辑：

我打算将`castle-Princess` *package-private*设为私有。我知道，通过从包中返回*包私有*类，我应该为错误做好准备。但是为什么[这个答案](https://stackoverflow.com/a/5414217/1884546)有效，而我的答案无效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T05:31:41.483

`Princess`类的默认范围为`castle`package ，因此它在`city`package 中不可见。为了规避：

*（我们可以采用以下三种方法之一。）*

# 1）制作`Princess`课程`public`并使用它。

```
package castle;

// added public modifier
public class Princess {
     public void sayHi() { System.out.println("Hi world"); }
} 
```

# 2）或者，定义 a`public interface`并让`Princess`实现它并使用`interface reference`代替`class reference`。我更喜欢这个。

**城堡\IPPrincess.java**

```
// Interface definition
package castle;

public interface IPrincess {
    public void sayHi();
} 
```

**城堡\公主.java**

```
// Implement the interface in Princess class
package castle;

class Princess implements IPrincess {
    public void sayHi() { System.out.println("Hi world"); }
} 
```

**城堡\Guard.java**

```
// Modify the Guard class
package castle;

public class Guard {
    public IPrincess getPrincess() {
        return new Princess();
    }
    public static IPrincess getPrincessStatic() {
        return new Princess();
    }

    // for here i use Princess instead of IPrincess. (@midnite)
    private Princess m_princess = new Princess();
    public IPrincess getPrincessMember() {
        return m_princess;
    }
} 
```

**城市\ Main.java**

```
// Modify the main class
  package city;

  import castle.Guard;
  import castle.IPrincess;

  public class Main {

  public static void main(String[] args) {

     IPrincess princess = Guard.getPrincessStatic();

     Guard.getPrincessStatic().sayHi();

     Guard guard = new Guard();
     guard.getPrincess().sayHi();

     guard.getPrincessMember().sayHi();
   }
} 
```

# 3）或者，将所有类放在同一个包中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T05:30:05.443

您将无法返回在类中私有作用域的类型。如果它是另一个类的私有范围，任何外部来源怎么能知道该类型是什么？

这种设计甚至无法编译。

**编辑：**

简单的解决方案是将其公开，然后您可以在包外部使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T05:39:46.140

**您试图模仿的答案是有效的，因为所有类都在同一个包**中。

如果你把`UntrustworthyFriend`和`Friend`放在不同的包中（作为你的场景），也会出现同样的问题。

`Princess`只有在以下情况下才能在其包裹外看到`public`：

**公主.java**

```
package castle;

public class Princess {
    public void sayHi() { System.out.println("Hi world"); }
} 
```

另外，请确保将其导入`Main`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T05:31:56.640

问题在于 Princess 类的定义中有一个非常小的错误：

```
package castle;

class Princess {
    public void sayHi() { System.out.println("Hi world"); }
} 
```

起初看起来一切都很好，但是您在`public`类名之前缺少一个修饰符：

```
package castle;

//here!
public class Princess {
    public void sayHi() { System.out.println("Hi world"); }
} 
```

如果没有 public 修饰符，则无法在声明它的文件之外访问 Princess 类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T06:10:11.030

您的示例有所不同，因为您的类位于不同的包中，并且从 Main 中看不到 Guard 和 Princess。

但是公共方法可以返回私有类的实例。JDK充满了例子，这里有一个来自`java.util.Arrays`

```
public static <T> List<T> asList(T... a) {
    return new ArrayList<>(a);
}
...
private static class ArrayList<E> extends AbstractList<E>  {
... 
```

这就是你的要求。诀窍是方法的返回类型是私有类实现的公共接口。你可以做类似的事情。

# php - FuelPHP - php炼油迁移PDO错误

> ID：15984600
> 
> 赞同：0
> 
> 时间：2013-04-13T05:28:44.027
> 
> 标签：php, frameworks, migration, fuelphp

我正在尝试在开发环境中的 ubuntu12、nginx 上设置我的**fuelphp 。**一切都对我有用，除非我尝试去做`php oil refine migrate`。

我遇到了以下错误消息：

```
Error - invalid data source name in COREPATH/classes/database/pdo/connection.php on line 94 
```

**我的开发/db.php：**

```
return array(
'default' => array(
    'connection'  => array(
        'dsn'        => 'mysql:host=localhost;dbname=fuel_intro',
        'username'   => 'root',
        'password'   =>  '',
    ),
  ),
); 
```

我搜索了 Internet 和fuelphp 文档，但仍然没有运气。
任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T07:24:34.367

看来您的数据库配置不正确。它不应该是'host:localhost'，它应该是'hostname'=>'localhost'。请使用 mysql 或 PDO 代替 mysql...（因为不推荐使用 mysql_* 函数。

它应该是这样的：

```
'default' => array(
    'type'           => 'mysqli',
    'connection'     => array(
        'hostname'       => 'localhost',
        'port'           => '3306',
        'database'       => 'fuel_db',
        'username'       => 'your_username',
        'password'       => 'y0uR_p@ssW0rd',
        'persistent'     => false,
        'compress'       => false,
    ),
    'identifier'   => '`',
    'table_prefix'   => '',
    'charset'        => 'utf8',
    'enable_cache'   => true,
    'profiling'      => false,
), 
```

看看： http: [//fuelphp.com/docs/classes/database/introduction.html](http://fuelphp.com/docs/classes/database/introduction.html)了解更多信息。

# c - 如何创建给定大小的数据类型

> ID：15984603
> 
> 赞同：0
> 
> 时间：2013-04-13T05:28:58.903
> 
> 标签：c, variables, struct

我想创建一个大小为 508 字节的结构。

查看这段代码，我推断我可以创建一个我想要的任何大小的结构。

```
#include <stdint.h>

/**
 * Common Data Types 
 *
 * The data types in this section are essentially aliases for C/C++ 
 * primitive data types.
 *
 * Adapted from http://msdn.microsoft.com/en-us/library/cc230309(PROT.10).aspx.
 * See http://en.wikipedia.org/wiki/Stdint.h for more on stdint.h.
 */
typedef uint8_t  BYTE;
typedef uint32_t DWORD;
typedef int32_t  LONG;
typedef uint16_t WORD;

/**
 * BITMAPFILEHEADER
 *
 * The BITMAPFILEHEADER structure contains information about the type, size,
 * and layout of a file that contains a DIB [device-independent bitmap].
 *
 * Adapted from http://msdn.microsoft.com/en-us/library/dd183374(VS.85).aspx.
 */
typedef struct 
{ 
    WORD   bfType; 
    DWORD  bfSize;  
    WORD   bfReserved1; 
    WORD   bfReserved2; 
    DWORD  bfOffBits; 
} __attribute__((__packed__)) 
BITMAPFILEHEADER; 
```

我需要大小为 508 字节的 int 类型，在阅读完这篇文章后：我想我可以创建所需大小的 int[给定结构的大小。](https://stackoverflow.com/questions/8025934/size-of-the-given-structure)所以我试图创建一个这样的结构：

```
typedef struct 
{ 
    int datachunk : 4064; 
}  
BLOCK; 
```

当然，这是天马行空的想象，我错了。

那么，如何创建一个大小为 508 字节的结构，其中包含相同大小的数据类型整数（即 4064？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T05:30:47.053

就是这样：

```
typedef unsigned char fivehundred_and_eight_bytes[508]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T05:41:44.263

位域不能比 int 宽。

> 6.7.2.1.3 指定位域宽度的表达式应是一个整数常量表达式，其非负值不超过在省略冒号和表达式时将指定的类型的对象的宽度。如果值为零，则声明不应有声明符。

# php - 替换字符串中的文本

> ID：15984604
> 
> 赞同：-2
> 
> 时间：2013-04-13T05:29:00.520
> 
> 标签：php

我想使用 PHP 来替换文本字符串中带有哈希标签的单词。

我的字符串：

```
"Working on some cool things for shareit.me #ui #webdesign #ux" 
```

我想用 span 标签封装每个带有哈希标签的关键字，以赋予它们不同的颜色。我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:35:33.517

如果你想要每个标签不同的颜色

```
str_replace(array('#ui', '#webdesign', '#ux'), array('<span style="color:red">#ui</span>', '<span style="color:green">#webdesign</span>', '<span style="color:blue">#ux</span>'), "Working on some cool things for shareit.me #ui #webdesign #ux"); 
```

如果你想替换所有#tag

```
preg_replace('/#(\w\d+?)/', '<span style="color: red">#$1</span>', "Working on some cool things for shareit.me #ui #webdesign #ux"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T05:31:36.750

尝试使用“preg_replace”之类的

```
preg_replace('/(^|\s)#(\w+)/','<span style="color:green;">\2</span>',$my_string); 
```

# syntax - 语法定向翻译是什么意思？

> ID：15984605
> 
> 赞同：9
> 
> 时间：2013-04-13T05:29:15.143
> 
> 标签：syntax, language-agnostic, compiler-construction

任何人都可以简单地解释“语法定向翻译”是什么意思吗？我开始阅读*龙书*的主题，但无法理解。维基[文章](http://en.wikipedia.org/wiki/Syntax-directed_translation)也没有帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-13T06:21:10.397

简单来说，“语法定向翻译”意味着使用语法识别器（解析器）驱动整个编译（翻译）过程。

从概念上讲，编译程序（将其从源代码转换为机器代码）的过程从生成解析树的解析器开始，然后通过一系列树或图转换来转换该解析树，每个转换在很大程度上是独立的，生成最终的简化树或图，遍历该树或图以生成机器代码。

这种观点虽然在理论上很好，但有一个缺点，如果您尝试直接实现它，则需要足够的内存来保存整个树或图的至少两个副本。早在编写《龙之书》的时候（当这个理论的很多内容都被散列出来时），计算机内存以千字节为单位，而 64K 已经很多了。所以编译大型程序可能会很棘手。

使用语法定向翻译，您可以按照解析器识别解析树的顺序组织所有图形转换。您的解析器不会生成完整的解析树，而是构建它的一小部分，然后将这些位提供给编译器的后续传递，最终生成一小段机器代码，然后继续解析过程以构建下一段解析树。由于任何时候都只存在少量的解析树（或后续图），因此需要的内存要少得多。由于语法识别器是控制所有这些（决定事情发生的顺序）的主音序器，这称为语法定向翻译。

由于这是一种减少内存使用的有效方法，人们甚至重新设计了语言以使其更容易做到——理想的情况是拥有一个“单通道”编译器，它实际上可以完成从解析到机器代码生成的整个过程一次通过。

如今，内存已不再那么珍贵，因此将所有内容强制一次通过的压力较小。相反，您通常只在前端使用语法直接翻译，解析语法，进行类型检查和其他语义检查，以及一些简单的转换，全部来自解析器并产生一些内部形式（三个地址代码、树或某种类型的 dag )，然后具有独立的优化和后端通道（因此不是语法指导的）。即使在这种情况下，您也可能声称这些后面的传递至少部分是语法指导的，因为编译器可能被组织为对输入的大块（例如整个函数或模块）进行操作，在继续执行之前推动所有传递下一段输入。

yacc 之类的工具是围绕语法定向翻译的思想设计的——该工具生成一个语法识别器，它直接运行代码片段（工具用语中的“动作”），因为识别出产品（解析树的片段），而无需创建一棵真正的“树”。这些动作可以直接调用编译器中逻辑后传的内容，然后返回继续解析。驱动所有这些的命令式主循环是解析器的令牌读取状态机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-22T21:41:20.797

实际上没有。在 Dragon Book 之前的历史上，有语法导向的编译器。在 1960 年代后期参加 ACM SEGPlan 会议时，我了解到了几种类型的定向翻译。还讨论了树导向和图导向翻译。虽然我从来没有拥有过*龙**书，但我认为这些在龙书中*混在一起了。我最喜欢的书是 Saul Rosen 的 Programming Systems and Languages。它是关于编译器、操作系统和计算机系统的论文集。我将尝试解释早期的语法导向编译器解析器编程语言。后来产生树的语言与树导向代码生成语言相结合。

 *早期的语法导向编译器，直接将源代码翻译成堆栈机器代码。Borrows B5000 ALGOL 编译器就是一个例子。

A*(B+C) -> A,B,C, **ADD** , **MPY**

Schorre 在 1960 年代开发的 META II 领域特定解析器编程语言编译器编译器是语法导向编译器的一个示例。您可以在 ACM 档案中找到原始的 META II 论文。META II 使用 $ 后缀零个或多个序列运算符和 ( ) 分组来避免左递归。

```
EXPR = TERM $('+' TERM .OUT 'ADD'|'-' TERM .OUT 'SUB'); 
```

后来基于 Schorre 的元语言编译器使用基于堆栈的树转换运算符 :< **node name** > 和 !< **number** > 转换为树。

```
EXPR = TERM $(('+':ADD|'-':SUB) TERM!2); 
```

除了使用 [< **number** >] 而不是 !< **number** > 的 TREEMETA。上面的 EXPR 公式与 META II EXPR 基本相同，只是我们已经分解了运算符 + 和 - 识别创建相应的节点并将节点推入节点堆栈。然后在识别正确的 TERM 时，树构造函数 !2 创建一棵树，弹出顶部 2 个解析堆栈 < **TERM** >s 和节点堆栈中的顶部节点以形成一棵树：

```
 ADD    or    SUB
   /   \        /   \
TERM   TERM  TERM   TERM 
```

令牌由提供的识别器 .ID .NUMBER 和 .STRING 识别。后来被 CWIC 中的记号“..”和字符类“:”公式代替：

```
id .. let $(leter|dgt|+'_'); 
```

树导向编译器语言与语法导向编译器相结合以生成代码。Systems Development Corporation 开发的 CWIC 编译器编译器包括基于 LISP 2 的树导向生成器语言。CWIC 的一篇简短论文可以在 ACM 档案中找到。

在解析器编程语言中，您正在编写一种递归体面的解析器。当你来到 CWIC 时，今天归因于递归体面解析器的所有问题都被消除了。不存在左递归问题，因为 $ 零或更多构造和编程树构造消除了左递归的需要。您控制树的构造。循环构造用于生成左手树，尾递归用于生成右手树。尽管解析公式可能根本不会生成树：

```
program = $declarations; 
```

在上面的声明之前的 $ 零个或多个循环运算符指定声明将被重复调用，只要它返回成功。正在编译的输入源代码由任意正数的声明组成。然后声明公式将定义声明的类型。您可能需要外部链接声明、数据声明、函数或过程代码声明。

```
declarations = linkage_decl | data_decl | code_decl; 
```

每个声明的类型都是一个单独的公式。语法语言控制何时发生语义处理和代码生成。上面的程序和声明公式不会生成树。他们只是控制何时以及什么语言结构被解析。这些都不是 LL 或 LR 解析器。提供无限（仅受可用内存限制）程序回溯。他们提供程序化的前瞻性和峰值提前测试。

作为最后一个示例，以下示例包括标记和字符类公式说明了生成左手树和右手树。特别是使用尾递归求幂。

```
assign = id '=' expr ';' :ASSIGN!2 arith_gen[*1];
expr   = term $(('+':ADD | '-':SUB) term !2);
term   = factor $(('*':MPY | '//' :REM | '/':DIV) factor!2);
factor = ( id ('(' +[ arg $(',' arg ]+ ')' :CALL!2 | .EMPTY)
         | number 
         | '(' expr ')'
         )  ('^' factor:EXP!2 | .EMPTY);

bin: '0'|'1';
oct: bin|'2'|'3'|'4'|'5'|'6'|'7';
dgt: oct|'8'|'9';
hex: dgt|'A'|'B'|'C'|'D'|'E'|'F'|'a'|'b'|'c'|'d'|'e'|'f';
upr: 'A'|'B'|'C'|'D'|'E'|'F'|'G'|'H'|'I'|'J'|'K'|'L'|'M'|
     'N'|'O'|'P'|'Q'|'R'|'S'|'T'|'U'|'V'|'W'|'X'|'Y'|'Z';
lwr: 'a'|'b'|'c'|'d'|'e'|'f'|'g'|'h'|'i'|'j'|'k'|'l'|'m'| 
     'n'|'o'|'p'|'q'|'r'|'s'|'t'|'u'|'v'|'w'|'x'|'y'|'z';
alpha:    upr|lwr;
alphanum: alpha|dgt;

number .. dgt $dgt MAKENUM[];
id .. alpha $(alphanum|+'_'); 
```*

# doctrine - Symfony 1.4：查找没有相关值的记录

> ID：15984613
> 
> 赞同：1
> 
> 时间：2013-04-13T05:30:23.377
> 
> 标签：doctrine, many-to-many, symfony-1.4, relation

我有两个与多对多关系相关的表。我试图找到所有没有相关值的行。这是一个例子：

```
Table 1:  Categories
Table 2:  CategoryItems
Table 3:  Items 
```

我正在尝试查找所有没有关联类别的项目。

如果我是直接用 SQL 编写的，我会这样做：

```
SELECT *
FROM Items
WHERE Items.item_id not in (SELECT DISTINCT item_id FROM category_items) 
```

这似乎是一个相当简单的要求，但我不知道如何让 Doctrine 做到这一点。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T07:05:21.583

您需要进行这样的查询`SELECT * FROM items left join category_items on ... where cateogry_items.id is null`。在教义中，这意味着：

```
ItemsTable::getInstance()->createQuery('Items')
  ->leftJoin('Items.CategoryItems CategoryItems')
  ->where('CategoryItems.id IS NULL')
  ->execute() 
```

# r - data.frame 和 data.table 的 R 对象具有相同的类型？

> ID：15984618
> 
> 赞同：3
> 
> 时间：2013-04-13T05:31:04.290
> 
> 标签：r, dataframe, data.table

我对 R 还是很陌生，最近遇到了一些我不确定它是什么意思的东西。`data.frame`并且`data.table`有相同的类型？一个对象可以有多种类型吗？将“汽车”从 转换`data.frame`为 后`data.table`，我显然无法应用适用于`data.frames`和不适用的功能`data.table`，但`class()`显示“汽车”仍然是`data.frame`. 有谁知道为什么？

```
> class(cars)
[1] "data.frame"
> cars<-data.table(cars)
> class(cars)
[1] "data.table" "data.frame" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T09:20:23.160

目前尚不清楚您所说的“我显然无法应用适用于 data.frames 而不是 data.table 的函数”是什么意思。

许多函数都按您的预期工作，无论是应用于 a`data.frame`还是应用于 a `data.table`。特别是，如果您阅读 的帮助页面`?data.table`，您会在描述的第一段中找到这一特定行：

> 由于 a`data.table` *是*a ，因此它与接受`data.frame`的 R 函数和包兼容。`only``data.frame`

你可以自己测试一下：

```
library(data.table)
CARS <- data.table(cars) 
```

以下都应该给你相同的结果。它们不是“data.table”的做事方式，但我刚刚从头顶弹出了一些东西，向您展示许多（大多数？）功能可以以与`data.table`您相同的方式使用会与它们一起使用`data.frame`（但那时，您会错过所有`data.table`必须提供的好东西）。

```
with(cars, tapply(dist, speed, FUN = mean))
with(CARS, tapply(dist, speed, FUN = mean))
aggregate(dist ~ speed, cars, as.vector)
aggregate(dist ~ speed, CARS, as.vector)
colSums(cars)
colSums(CARS)
as.matrix(cars)
as.matrix(CARS)
t(cars)
t(CARS)
table(cut(cars$speed, breaks=3), cut(cars$dist, breaks=5))
table(cut(CARS$speed, breaks=3), cut(CARS$dist, breaks=5))
cars[cars$speed == 4, ]
CARS[CARS$speed == 4, ] 
```

但是，在某些情况下这不起作用。相比：

```
cars[cars$speed == 4, 1]
CARS[CARS$speed == 4, 1] 
```

为了更好地理解这一点，我建议阅读常见问题解答。特别是，在这个问题上总结了几个相关点：[你可以用 data.frame 做什么，而你不能在 data.table 中做](https://stackoverflow.com/questions/13618488/what-you-can-do-with-data-frame-that-you-cant-in-data-table)。

* * *

如果您的问题是，更一般地说，“一个对象可以有多个类吗？”那么您已经从自己的探索中看到，是的，它可以。有关这方面的更多信息，您可以[从 Hadley 的 devtools wiki 阅读此页面](https://github.com/hadley/devtools/wiki/S3)。

* * *

类还影响诸如对象如何打印以及它们如何与其他函数交互等事情。

考虑`rle`函数。如果你看一下`class`，它会返回“rle”，如果你看一下它的`str`结构，它表明它是一个列表。

```
> x <- rev(rep(6:10, 1:5))
> y <- rle(x)
> x
 [1] 10 10 10 10 10  9  9  9  9  8  8  8  7  7  6
> y
Run Length Encoding
  lengths: int [1:5] 5 4 3 2 1
  values : int [1:5] 10 9 8 7 6
> class(y)
[1] "rle"
> str(y)
List of 2
 $ lengths: int [1:5] 5 4 3 2 1
 $ values : int [1:5] 10 9 8 7 6
 - attr(*, "class")= chr "rle" 
```

由于每个列表项的长度相同，您可能希望可以方便地使用`data.frame()`将其转换为`data.frame`. 我们试试看：

```
> data.frame(y)
Error in as.data.frame.default(x[[i]], optional = TRUE, stringsAsFactors = stringsAsFactors) : 
  cannot coerce class ""rle"" to a data.frame
> unclass(y)
$lengths
[1] 5 4 3 2 1

$values
[1] 10  9  8  7  6

> data.frame(unclass(y))
  lengths values
1       5     10
2       4      9
3       3      8
4       2      7
5       1      6 
```

或者，让我们`class`向对象添加另一个并尝试：

```
> class(y) <- c(class(y), "list")
> y ## Printing is not affected
Run Length Encoding
  lengths: int [1:5] 5 4 3 2 1
  values : int [1:5] 10 9 8 7 6
> data.frame(y) ## But interaction with other functions is
  lengths values
1       5     10
2       4      9
3       3      8
4       2      7
5       1      6 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T07:29:26.977

Data.table 和 data.frame 是不同的类，但它们是通过继承关联的。Data.table[继承](http://artax.karlin.mff.cuni.cz/r-help/library/data.table/html/data.table.html)自data.frame，基本扩展了它的能力。您还可以看到将汽车转换为 data.table 类后：

```
R> typeof(cars)
[1] "list"      # similar to dataframe

R> mode(cars)
[1] "list"      # idem 
```

更多信息[在这里](http://cran.r-project.org/doc/manuals/r-devel/R-lang.html#Object_002doriented-programming)或只是谷歌“继承”。

# javascript - 混淆 JS / jQuery 代码的插件

> ID：15984622
> 
> 赞同：1
> 
> 时间：2013-04-13T05:31:30.743
> 
> 标签：javascript, jquery, obfuscation

我已经完成了 js / jQuery 方面的开发，我想知道是否有一个插件可以混淆我的 javascript 和 jQuery 代码，同时仍然允许它工作。

如果可能的话，不要减慢加载时间。

有这样的插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:38:03.983

首选是[YUI 压缩器](http://yui.github.io/yuicompressor/)，其次是[uglifyjs](http://marijnhaverbeke.nl/uglifyjs)。第一个非常适合缩小并且很受欢迎（也可以混淆）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T05:38:52.463

您可以使用以下工具之一：

*   [YUI 压缩机](http://developer.yahoo.com/yui/compressor/)
*   [收缩安全](http://dojotoolkit.org/docs/shrinksafe)
*   [打包机](http://dean.edwards.name/packer/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T05:39:33.817

这看起来像[我如何混淆（保护）JavaScript？](https://stackoverflow.com/questions/194397/how-can-i-obfuscate-javascript)

简而言之，流行的选项是 YUI Compressor、Google Closure Compiler 和 UglifyJS。它们都进行了缩小，因此您可能不想使用您在评论中提到的项目的缩小版本。

我个人认为 Google Closure Compiler 是最彻底的，但也是最难使用的。

# java - Java：比较整数和字符串 - 性能

> ID：15984623
> 
> 赞同：20
> 
> 时间：2013-04-13T05:31:34.710
> 
> 标签：java, performance, comparison, parseint

我有一个 String 和一个 int，可以说：`String str = "12345";`和`int num = 12345;`. 查看它们是否相同的最快方法是什么，`str.equals("" + num)`或者`num == Integer.parseInt(str)`（或者是否有更快的方法？）？

这是[Integer.parseInt](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Integer.java#Integer.parseInt%28java.lang.String%2Cint%29)和[String.equals的源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#String.equals%28java.lang.Object%29)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-13T05:46:39.367

`num == Integer.parseInt(str)`会比`str.equals("" + num)`

`str.equals("" + num)`将首先将 num 转换为 O(n) 的字符串，其中 n 是数字中的位数。然后它将再次进行字符串连接 O(n)，然后最后进行字符串比较。在这种情况下，字符串比较将是另一个 O(n) - n 是数字中的位数。所以总共〜3 * O（n）

`num == Integer.parseInt(str)`将字符串转换为整数，再次为 O(n)，其中 n 是数字中的位数。然后整数比较是 O(1)。所以只需~1*O(n)

总而言之，两者都是 O(n) - 但`str.equals("" + num)`具有更高的常数，因此更慢。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-13T05:45:00.453

我认为这`num == Integer.parseInt(str)`是一种更好的比较方式。因为`str.equals("" + num)`这不是比较整数值的理想方式，而且它会在字符串池中创建不必要的字符串常量对象（这会影响性能）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T08:50:09.600

猜猜你也可以用这个来比较......

```
int p = 1234;
String Int = "1234";
String string = String.valueOf(p);
System.out.println(string + Int);
System.out.println(string.equals(Int));
code here 
```

# jquery - Knockout.js 预选多选

> ID：15984627
> 
> 赞同：1
> 
> 时间：2013-04-13T05:32:02.773
> 
> 标签：jquery, ajax, knockout.js

我有一个绑定到模型的 select multi，然后我想选择以前使用第二个模型选择的一些值。我认为这是一件简单直接的事情，但在淘汰赛中它似乎比应该做的更难。这是我到目前为止所拥有的。[提琴手](http://jsfiddle.net/dumbarse/TpnZh/)

选择多

```
<select data-bind="options:availableThings,optionsText: 'Title', selectedOptions: selectedThings" size="5"  multiple="true"></select> 
```

我的模型

```
 var initialThingsModel = [
            {"Id":1,"Title":"First"},
            {"Id":2,"Title":"Next"},
            {"Id":3,"Title":"Another"},
            {"Id":4,"Title":"Last"}
        ];
        var initialSelectedThingsModel = [   
            {"Id":2,"Title":"Next"},
            {"Id":4,"Title":"Last"}
        ]; 
```

然后是绑定第一个模型的其余部分和保存并提交所选值的管道：

```
var viewModel = {
            availableThings: ko.observableArray(initialThingsModel),
            selectedThings: ko.observableArray(initialSelectedThingsModel),
            save: function () {                  
                $.ajax({
                    url: '/home',
                    type: 'POST',
                    data: ko.toJSON(this.selectedThings),
                    dataType: "json",
                    contentType: "application/json;  charset=utf-8",
                    success: function (data) {
                        alert(data.Message);
                    }
                });
            }
        };

        ko.applyBindings(viewModel); 
```

然后我面临的问题是绑定initialSelectedThingsModel，以便选择列表预先填充那些选定的项目。

广泛的问题，淘汰赛是正确的解决方案还是骨干网会提供一种更简单的方法来实现这种事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T05:40:26.587

您的绑定是正确的。问题是您传入的对象`selectedThings`不存在于您的`availableThings`. 您需要传入相同的对象，如下所示：

```
 var initialSelectedThingsModel = [   
        initialThingsModel[0],
        initialThingsModel[3]
    ]; 
```

我没有足够的骨干经验来判断它是否会更好，但是您的 Knockout 代码对我来说似乎非常简洁。不知道你能做到多简单。

# c++ - 并行字数

> ID：15984628
> 
> 赞同：0
> 
> 时间：2013-04-13T05:32:09.767
> 
> 标签：c++, tbb

我正在尝试编写 wc 的并行版本。我正在使用 TBB 库，但不幸的是出了点问题，我不知道如何修复这些错误。

我的代码

```
#include<string>
#include<iostream>
#include<fstream>
#include<sstream> 
#include<algorithm>
#include<boost/lambda/lambda.hpp>
#include"include/tbb/pipeline.h"

using namespace std;
class Counter
{
private:
public:
  unsigned int operator()(std::string const& str){
    std::stringstream stream(str);
    return std::distance(std::istream_iterator<std::string>(stream), std::istream_iterator<std::string>());
  } ;
 };

class Reader
{
private:
  std::fstream m_file;
  string m_line;
public:
  Reader(string &path):
    m_line(""){
    fstream file(path.c_str(), fstream::in);
  };
  std::string operator()(tbb::flow_control& fc){
    if(m_file.eof()){
      fc.stop();
      m_file.close();
      return m_line;
    }
    getline(m_file,m_line);
    return m_line;
  }
};

int main(int argc, const char* argv[] ){
  unsigned int sum=0;
  if(argc!= 3){ 
    cout<<"podaj sciezke!"<<endl;
  }else{
    string path(argv[1]);
    tbb::parallel_pipeline( /*max_number_of_live_token=*/16,
                tbb::make_filter<void,string>(tbb::filter::serial_in_order, Reader(path))& 
                tbb::make_filter<string,unsigned int>(tbb::filter::parallel, Counter())& 
                tbb::make_filter<unsigned int,void>(tbb::filter::serial_in_order, [&](unsigned int x) {sum+=x;})
                );
    std::cout<<"word count "<<sum <<endl;
  }
  return 0;
}` 
```

和编译器输出 g

```
++ -std=gnu++0x my_wc.cpp -o program -Xlinker -rpath -Xlinker lib/ia32/gcc4.4/ -L lib/ia32/gcc4.4/ -ltbb
In file included from my_wc.cpp:7:0:
include/tbb/pipeline.h: In constructor ‘tbb::interface6::internal::filter_node_leaf<T, U, Body>::filter_node_leaf(tbb::filter::mode, const Body&) [with T = void, U = std::basic_string<char>, Body = Reader]’:
include/tbb/pipeline.h:583:63:   instantiated from ‘tbb::interface6::filter_t<T, U> tbb::interface6::make_filter(tbb::filter::mode, const Body&) [with T = void, U = std::basic_string<char>, Body = Reader]’
my_wc.cpp:49:80:   instantiated from here
include/tbb/pipeline.h:554:77: error: use of deleted function ‘Reader::Reader(const Reader&)’
my_wc.cpp:20:7: error: ‘Reader::Reader(const Reader&)’ is implicitly deleted because the default definition would be ill-formed:
my_wc.cpp:20:7: error: use of deleted function ‘std::basic_fstream<char>::basic_fstream(const std::basic_fstream<char>&)’
In file included from my_wc.cpp:3:0:
/usr/include/c++/4.6/fstream:761:11: error: ‘std::basic_fstream<char>::basic_fstream(const std::basic_fstream<char>&)’ is implicitly deleted because the default definition would be ill-formed:
/usr/include/c++/4.6/fstream:761:11: error: use of deleted function ‘std::basic_iostream<char>::basic_iostream(const std::basic_iostream<char>&)’
In file included from /usr/include/c++/4.6/iostream:41:0,
                 from my_wc.cpp:2:
/usr/include/c++/4.6/istream:774:11: error: ‘std::basic_iostream<char>::basic_iostream(const std::basic_iostream<char>&)’ is implicitly deleted because the default definition would be ill-formed:
/usr/include/c++/4.6/istream:774:11: error: use of deleted function ‘std::basic_istream<char>::basic_istream(const std::basic_istream<char>&)’
/usr/include/c++/4.6/istream:57:11: error: ‘std::basic_istream<char>::basic_istream(const std::basic_istream<char>&)’ is implicitly deleted because the default definition would be ill-formed:
/usr/include/c++/4.6/istream:57:11: error: use of deleted function ‘std::basic_ios<char>::basic_ios(const std::basic_ios<char>&)’
In file included from /usr/include/c++/4.6/ios:45:0,
                 from /usr/include/c++/4.6/ostream:40,
                 from /usr/include/c++/4.6/iostream:40,
                 from my_wc.cpp:2:
/usr/include/c++/4.6/bits/basic_ios.h:64:11: error: ‘std::basic_ios<char>::basic_ios(const std::basic_ios<char>&)’ is implicitly deleted because the default definition would be ill-formed:
/usr/include/c++/4.6/bits/ios_base.h:788:5: error: ‘std::ios_base::ios_base(const std::ios_base&)’ is private
/usr/include/c++/4.6/bits/basic_ios.h:64:11: error: within this context
In file included from /usr/include/c++/4.6/iostream:41:0,
                 from my_wc.cpp:2:
/usr/include/c++/4.6/istream:57:11: error: use of deleted function ‘std::basic_ios<char>::basic_ios(const std::basic_ios<char>&)’
/usr/include/c++/4.6/istream:774:11: error: use of deleted function ‘std::basic_ostream<char>::basic_ostream(const std::basic_ostream<char>&)’
In file included from /usr/include/c++/4.6/iostream:40:0,
                 from my_wc.cpp:2:
/usr/include/c++/4.6/ostream:57:11: error: ‘std::basic_ostream<char>::basic_ostream(const std::basic_ostream<char>&)’ is implicitly deleted because the default definition would be ill-formed:
/usr/include/c++/4.6/ostream:57:11: error: use of deleted function ‘std::basic_ios<char>::basic_ios(const std::basic_ios<char>&)’
/usr/include/c++/4.6/ostream:57:11: error: use of deleted function ‘std::basic_ios<char>::basic_ios(const std::basic_ios<char>&)’
In file included from /usr/include/c++/4.6/iostream:41:0,
                 from my_wc.cpp:2:
/usr/include/c++/4.6/istream:774:11: error: use of deleted function ‘std::basic_ios<char>::basic_ios(const std::basic_ios<char>&)’
In file included from my_wc.cpp:3:0:
/usr/include/c++/4.6/fstream:761:11: error: use of deleted function ‘std::basic_ios<char>::basic_ios(const std::basic_ios<char>&)’
/usr/include/c++/4.6/fstream:761:11: error: use of deleted function ‘std::basic_filebuf<char>::basic_filebuf(const std::basic_filebuf<char>&)’
/usr/include/c++/4.6/fstream:69:11: error: ‘std::basic_filebuf<char>::basic_filebuf(const std::basic_filebuf<char>&)’ is implicitly deleted because the default definition would be ill-formed:
/usr/include/c++/4.6/streambuf:782:7: error: ‘std::basic_streambuf<_CharT, _Traits>::basic_streambuf(const __streambuf_type&) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_streambuf<_CharT, _Traits>::__streambuf_type = std::basic_streambuf<char>]’ is private
/usr/include/c++/4.6/fstream:69:11: error: within this context
In file included from my_wc.cpp:7:0:
include/tbb/pipeline.h: In member function ‘void* tbb::interface6::internal::concrete_filter<void, U, Body>::operator()(void*) [with U = std::basic_string<char>, Body = Reader]’:
my_wc.cpp:56:1:   instantiated from here
include/tbb/pipeline.h:449:69: error: passing ‘const Reader’ as ‘this’ argument of ‘std::string Reader::operator()(tbb::interface6::flow_control&)’ discards qualifiers [-fpermissive]
include/tbb/pipeline.h: In member function ‘void* tbb::interface6::internal::concrete_filter<T, U, Body>::operator()(void*) [with T = std::basic_string<char>, U = unsigned int, Body = Counter]’:
my_wc.cpp:56:1:   instantiated from here
include/tbb/pipeline.h:426:89: error: passing ‘const Counter’ as ‘this’ argument of ‘unsigned int Counter::operator()(const string&)’ discards qualifiers [-fpermissive] 
```

尤其是线

```
Reader::Reader(const Reader&)’ is implicitly deleted because the default definition would be ill-formed: 
```

很奇怪。

这是我的第一个多线程任务，所以请给我一些建议，我该如何修复我的源代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T06:07:10.250

该错误源于`tbb::make_filter`试图复制`Reader`您传递的对象的事实。`Reader`是不可复制的，因为它拥有一个不可复制的`std::fstream`数据成员。您需要重新设计`Reader`，使其不持有`std::fstream`或传递`std::reference_wrapper<Reader>`.

# matlab - 如何使用 saveas() 将 MATLAB 图形保存为 JPEG 而图像不严重？

> ID：15984630
> 
> 赞同：23
> 
> 时间：2013-04-13T05:32:53.277
> 
> 标签：matlab, matlab-figure

在我正在编写的 MATLAB 函数中，我正在生成一个图形。执行该功能时会显示该图形。我需要将图形保存为 JPEG 图像。为此，我可以在显示图形的图形窗口中执行文件->另存为。但我想自动化这个。我尝试使用 saveas() 函数来做到这一点。问题是生成的图像是不可取的。以下是演示问题的图像，向您展示我的意思：

**使用 MATLAB 图窗窗口中的 File->Save As 手动保存的 JPEG 图像：** [![手动文件另存为jpg渲染](https://i.stack.imgur.com/ieOa4.jpg)](https://i.stack.imgur.com/ieOa4.jpg)

**使用 saveas() 函数保存的 JPEG 图像（请注意，绘图不太好，并且标题重叠）：** [![另存为 jpg 渲染](https://i.stack.imgur.com/6qC6L.jpg)](https://i.stack.imgur.com/6qC6L.jpg)

这是我生成图形并使用 saveas() 将图形保存为 JPEG 的 MATLAB 函数：

```
function JpgSaveIssueDemo( )
    figure( 1 );
    t = 0:0.1:8;    

    subplot( 2, 2, 1 );    
    plot( t, sin(t) );
    title( 'Plot 1 of Example to Demonstrate JPG Save Issue', 'FontSize', 18 );

    subplot( 2, 2, 2 );
    plot( t, sin(t) );
    title( 'Plot 2 of Example to Demonstrate JPG Save Issue', 'FontSize', 18 );

    subplot( 2, 2, 3 );
    plot( t, sin(t) );
    title( 'Plot 3 of Example to Demonstrate JPG Save Issue', 'FontSize', 18 );

    subplot( 2, 2, 4 );
    plot( t, sin(t) );
    title( 'Plot 4 of Example to Demonstrate JPG Save Issue', 'FontSize', 18 );

    saveas( gcf, 'DemoPlot', 'jpg' );
end 
```

执行 JpgSaveIssueDemo() 时显示的图形未最大化。所以，我想如果我可以在执行 saveas()*之前*使用 JpgSaveIssueDemo() 中的函数调用/s 最大化它，那么保存的 JPEG 图像会很好。

所以，我在 JpgSaveIssueDemo() 的 saveas() 行之前使用了这段代码来最大化图形：

```
drawnow;
jFrame = get(handle(gcf),'JavaFrame'); 
jFrame.setMaximized(true); 
```

然后，显示的图形被最大化。但是，结果是一样的：JPEG 图像仍然不理想地出现。

为此可以做些什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-13T09:03:15.090

Matlab 图形导出对话框和`saveas()`功能缺少很多理想的功能。特别是，`savas()`无法创建自定义结果图像，这就是您的结果看起来很差的原因。对于创建位图图像，我强烈建议使用第三方函数[export_fig](http://www.mathworks.com/matlabcentral/fileexchange/23629-exportfig)。通过将以下代码添加到您的函数（包括最大化技巧）

```
set(gcf, 'Color', 'white'); % white bckgr
export_fig( gcf, ...      % figure handle
    'Export_fig_demo',... % name of output file without extension
    '-painters', ...      % renderer
    '-jpg', ...           % file format
    '-r72' );             % resolution in dpi 
```

我创建了这个图像：（在浏览器中使用“显示图像”或类似内容来获取原始大小）

![使用 export_fig 创建的图像](https://i.stack.imgur.com/LDNl3.jpg)

要获得更高质量，请使用 150 甚至 300 dpi（用于打印）的更高分辨率。而不是最大化图形窗口，对于大多数应用程序来说，它适合定义轴大小以获得所需大小的图像：

```
unitSave = get(figureHandle, 'Unit');                % store original unit
set(figureHandle, 'Unit', 'centimeters');            % set unit to cm
set(figureHandle,'position',[0 0 width height]);     % set size
set(figureHandle, 'Unit', unitSave);                 % restore original unit 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-21T09:27:38.443

只需使用像 EPS 这样的无损可扩展格式，请参见下面代码段中的最后一行 :)

```
h1=figure % create figure
plot(t,Data,'r');
legend('Myfunction');

% Create title with required font size
title({'Variance vs distance'},'LineWidth',4,'FontSize',18,...
'FontName','Droid Sans');

% Create xlabel with required font size
xlabel({'Distance (cm)'},'FontSize',14,...
'FontName','DejaVu Sans');

% Create ylabel with required font size
ylabel({'Variance of sobel gradients'},'FontSize',14,...
'FontName','DejaVu Sans');

print(h1,'-depsc','autofocus.eps') % print figure to a file 
```

虽然我无法在此处附加 EPS 文件，但不受支持，但它可扩展，可以放入文字处理器或 Latex 中，而不必担心分辨率不佳。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-21T22:51:59.480

我有同样的问题，这是我用来解决它的：

`set(gcf,'PaperPositionMode','auto') saveas(gcf,'file_to_save','png')`

哪里`gcf`可以用手柄替换成想要的图形。

# javascript - 值比较

> ID：15984631
> 
> 赞同：1
> 
> 时间：2013-04-13T05:33:15.393
> 
> 标签：javascript

```
[4] === 4 // is: false
[4] == 4 // is: true

'0' == 0 // is: true
'0' === 0 // is: false 
```

任何人都可以给出确切的原因吗​​？还有什么是严格相等运算符或需要比较？我了解到严格（===）运算符的*类型*和*值*应该相同。这是严格相等运算符检查的内容。如果是，比操作员如何工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T05:36:36.287

*   `==`比较值
*   `===`比较值*和*类型

## 例如

```
[4] //turns into "4" when comparing
"4" == 4 //They are the same

"4" === 4 //The values are the same, but not the type 
```

参考：[http ://es5.github.io/#x11.9.4](http://es5.github.io/#x11.9.4)

> [http://i.stack.imgur.com/q13LO.png](http://i.stack.imgur.com/q13LO.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T05:37:46.300

`===`运算符还比较`type`对象的。

所以，在`[4] === 4`

[4] 是一个数组，但 4 是一个数字，因此计算结果为 false。

而在`'0' === 0`

'0' 是一个字符串，但 0 是一个数字，因此计算结果为 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T05:36:26.910

=== 运算符比较类型和值，使其成为更严格的检查。== 运算符执行基于检查的不太严格的值。在某些情况下，它会考虑不同类型的值“相等”，例如 0 vs '' 或 0 vs “0”

== 运算符会将 0 和 '' 视为相等，而 === 运算符不会将它们视为相等，因为它们属于不同的类型。

# android - 碎片和屏幕方向问题

> ID：15984632
> 
> 赞同：0
> 
> 时间：2013-04-13T05:33:49.000
> 
> 标签：android, android-fragments, fragment, screen-orientation, android-fragmentactivity

```
public class MainActivity extends FragmentActivity {
FragmentTransaction ft;
Button b1, b2;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    FragmentManager fm = getSupportFragmentManager();
    FragmentTransaction ft = fm.beginTransaction();

    if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT) {
        ft.replace(android.R.id.content, new Fragment1());

    } else {

        ft.add(R.id.LinearLayout1, new MainFragment());
        ft.add(R.id.LinearLayout2, new Fragment1());

    }

    ft.commit();

 }

}

public class MainFragment extends Fragment implements OnClickListener{
 Button b1,b2;
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    return inflater.inflate(R.layout.activity_main_fragment, container, false);
}
@Override
public void onStart() {
    super.onStart();
    // ---Button view---
    b1 = (Button) getActivity().findViewById(R.id.f1);
    b2 = (Button) getActivity().findViewById(R.id.f2);
    b1.setOnClickListener(this);
    b2.setOnClickListener(this);

}
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    if(v==b1){
        FragmentManager fm = getActivity().getSupportFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();
        ft.replace(R.id.LinearLayout2,new Fragment2());
        ft.commit();

    }
    if(v==b2){
        FragmentManager fm =getActivity().getSupportFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();
        ft.replace(R.id.LinearLayout2,new Fragment3());
        ft.commit();

    }
}

} 
```

这里的问题是，当应用程序在纵向模式下运行时，Fragment1 按我的意愿出现，当我将方向更改为横向时，MainFragment 和 Fragment2 也会出现，但 Fragment1 仍然存在，当我再次将方向更改为纵向时，应用程序停止。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T07:14:04.990

所以问题是你假设每次调用 onCreate 时你都是从没有片段开始的......事实并非如此。

第一次为 MainActivity 调用 onCreate 时不会有片段。假设设备是纵向的，将添加 Fragment1。当您旋转到横向时，将添加另一个 Fragment1 实例和一个 MainFragment 实例。您现在有三个片段实例。当你回到纵向时，它会想要添加 Fragment1 的另一个实例......但它可能会崩溃，因为纵向布局没有 R.id.LinearLayout1 或 R.id.LinearLayout2。

底线是......一旦你完成了碎片，你需要移除它们......它们不会自行消失。

# sqlite - Symfony2 和 sqlite，SQLSTATE[HY000] 被抓到

> ID：15984638
> 
> 赞同：0
> 
> 时间：2013-04-13T05:35:02.700
> 
> 标签：sqlite, symfony

我正在尝试将 sqlite3 与 symfony2 一起使用。这是我在 app/config/parameters.yml 中的数据库配置

```
parameters:
database_driver: pdo_sqlite
database_host: 127.0.0.1
database_port: null
database_name: librarian
database_user: root
database_password: null
database_path: librarian 
```

还有我的 app/config/config.yml

```
# Doctrine Configuration
doctrine:
dbal:
    driver:   %database_driver%
    host:     %database_host%
    port:     %database_port%
    dbname:   %database_name%
    user:     %database_user%
    password: %database_password%
    charset:  UTF8
    path: %kernel.root_dir%/%database_path%.db

orm:
    auto_generate_proxy_classes: %kernel.debug%
    auto_mapping: true 
```

我创建了一个简单的表来做一些测试。该表有一个整数自增“id”字段、一个“链接”文本字段和一个“索引”整数字段。

控制器很简单：

```
class testController extends Controller {

  public function indexAction() {
    $issue = new Issue();
    $issue->setIndex(0);
    $issue->setLink(array('http://example.com'));

    $em = $this->getDoctrine()->getManager();
    $em->persist($issue);
    $em->flush();

    return $this->render('TestLibrarianBundle:Test:index.html.twig');
  }
} 
```

当我尝试通过调用此控制器来执行请求时，出现以下错误：

```
request.CRITICAL: Uncaught PHP Exception Doctrine\DBAL\DBALException: "An exception  occurred while executing 'INSERT INTO issue (index, link) VALUES (?, ?)':

SQLSTATE[HY000]: General error: 1 near "index": syntax error" at /.../.../vendor/doctrine/dbal/lib/Doctrine/DBAL/DBALException.php line 47 
```

关于如何解决这个问题的任何提示？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T08:58:33.483

你的问题是那`INDEX`是一个[SQL 关键字](http://www.sqlite.org/lang_keywords.html)。

如果您无法将 ORM 配置为正确转义名称（`"index"`改为将其写入），则必须将字段名称更改为其他名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T05:39:37.400

如果它是一个 sqlite 关键字，你能命名一个字段索引吗？

# android - 如何设置 GoogleMap 的默认目标位置？

> ID：15984647
> 
> 赞同：0
> 
> 时间：2013-04-13T05:36:02.130
> 
> 标签：android, google-maps-android-api-2

我在我的一个项目中使用了 SherlockMapFragment。我不通过 xml 膨胀它。目前，我所做的是我有一个布尔标志来检查这是否是我第一次加载地图。

```
 private Boolean firstView = true;
...

@Override
public View onCreateView...
    if (firstView == true) {
        mMap.moveCamera(center);
        mMap.animateCamera(zoom);
        firstView = false;
    } 
```

这在大多数情况下都可以正常工作。但是当我在应用程序之间切换并打开这个项目时，它会加载地图并定位 LatLng (0,0)。我相信这与重新创建的地图有关，但我不知道要覆盖和修改什么方法。

# shell - 由于 ImportError，Python 无法运行：无法导入 MAXREPEAT

> ID：15984650
> 
> 赞同：4
> 
> 时间：2013-04-13T05:36:17.043
> 
> 标签：shell, python-3.x

我是 python 新手，但已经使用 IDLE 和 EricIDE 几个星期了，没有任何重大问题。

我正在编辑一个我编写的名为`random.randint()`函数的程序，但它不起作用。
以前，这个程序一直在工作，我没有改变那个叫法。
然后我加载了另一个使用相同功能的程序，它也不会运行。
我试图在 IDLE 中加载程序，但 IDLE 不会加载。在尝试了几次重新启动和重新加载后，EricIDE 也不会加载。当我尝试从以前工作的桌面快捷方式启动任一 IDE 时，我注意到一个黑色窗口弹出并迅速消失。
搜索帮助导致我通过转到从 Windows 命令行运行 python shell `C:\python33\ and typing "python" to run python shell`，我得到：

```
File "C:\python33\lib\sre_constants.py", line 18, in (module)

from _sre import MAXREPEAT

ImportError: cannot import name MAXREPEAT 
```

我正在使用 Windows 8（也是新手，但仍在尝试解决）。

在这一点上，我假设我的问题出在我的 python 安装上，因为 python shell 不起作用。我已经卸载并重新安装了 Python 3.3.1，但问题仍然存在。我还按照与我的问题类似的另一个线程中的建议从我的用户目录中删除了 .idlerc 文件夹，但这似乎也没有帮助。

感谢您提供任何帮助。

* * *

对埃克森的回应：

```
C:\Python33>python.exe -c "import sys; print(sys.path)"
Traceback (most recent call last):
  File "C:\Python33\lib\site.py", line 70, in <module>
    import re
  File "C:\Python33\lib\re.py", line 122, in <module>
    import sre_compile
  File "C:\Python33\lib\sre_compile.py", line 14, in <module>
    import sre_parse
  File "C:\Python33\lib\sre_parse.py", line 17, in <module>
    from sre_constants import *
  File "C:\Python33\lib\sre_constants.py", line 18, in <module>
    from _sre import MAXREPEAT
ImportError: cannot import name MAXREPEAT

C:\Python33>python.exe -S -c "import sys; print(sys.path)"
['', 'C:\\Python33\\python33.zip', 'C:\\Python33\\DLLs', 
 'C:\\Python33\\lib', 'C:\\Python33'] 
```

跟进eryksun：

```
C:\Python33>python.exe -S -c "import _imp; _sre = _imp.init_builtin('_sre'); 
print(_sre.MAXREPEAT)"
Traceback (most recent call last):
  File "<string>", line 1, in <module>
AttributeError: 'module' object has no attribute 'MAXREPEAT' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T21:00:29.330

建议你卸载。完全删除`C:\Python33`和也`C:\Windows\System32\python33.dll`。`_sre`内置在后一个 DLL 中。`MAXREPEAT`由其初始化函数[`PyInit__sre`](http://hg.python.org/cpython/file/d9893d13c628/Modules/_sre.c#l3950)(Modules/_sre.c) 设置。显然，那里出了点问题。

当您下载 3.3.1 安装程序时，请确保您获得了适合您平台的正确二进制文件，即 x86 用于 32 位 Windows，X86-64 用于 64 位 Windows。

# android - 即使在 Handler.post() 中启动动画也不会第一次启动

> ID：15984660
> 
> 赞同：0
> 
> 时间：2013-04-13T05:38:37.810
> 
> 标签：android

我有一个片段，`onCreateDialog()`我在其中启动了一个后台线程，它最终调用了这个方法：

```
protected void showMessageWithProgressWhenEmpty(final String message) {
    handler.post(new Runnable() {
        textView.setText(message);
        textView.setCompoundDrawablesWithIntrinsicBounds(
            R.drawable.anim_spin_refresh, 0, 0, 0
        );
        AnimationDrawable anim = (AnimationDrawable)textView.getCompoundDrawables()[0];
        anim.start();
    }
} 
```

`handler`创建`onCreateDialog()`于. 后续调用按`showMessageWithProgressWhenEmpty()`预期制作动画。对这个方法的第一次调用（没有正确动画的那个）发生在调用`onCreateDialog()`.

我已经看到提到动画在启动时不起作用的答案`Activity.onCreate()`，这就是为什么我要`post`调用`handler`.

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T05:46:01.417

```
protected void showMessageWithProgressWhenEmpty(final String message) {

        textView.setText(message);
        textView.setCompoundDrawablesWithIntrinsicBounds(
            R.drawable.anim_spin_refresh, 0, 0, 0
        );
        AnimationDrawable anim = (AnimationDrawable)textView.getCompoundDrawables()[0];
       // run the start() method later on the UI thread
        textView.post(new Starter());
}
 class Starter implements Runnable {

        public void run() {
            anim.start();
        } 
```

设置文本视图后调用启动器

# php - Cookie 在会话销毁时销毁，为什么？

> ID：15984662
> 
> 赞同：1
> 
> 时间：2013-04-13T05:39:02.297
> 
> 标签：php, session, cookies

我想在登录时存储 cookie 以记住我的概念。它工作正常，但是当我注销 cookie 时也会破坏。我的代码如下...

登录页面：

```
 <?php
if(isset($_POST['submitLogin']))
    {
        extract($_POST);
        $obj = new validation();
        $obj->add_fields($uname, 'req',ER_EMAIL );
        $obj->add_fields($passwd, 'req', ER_PSW);
        $error = $obj->validate();
        $password=md5($passwd);

           $qry1=$con->recordselect("SELECT *,concat(first_name,' ',last_name) as user_name FROM user WHERE uname='".addContent($uname)."' AND password='".addContent($password)."'");
             $tot_rec=mysql_num_rows($qry1);
             $valid_user=mysql_fetch_array($qry1);

             if($tot_rec>0)
             {                      
                if($valid_user['status']=='a')
                   {                         
                     if($valid_user['password_status'] == 0)
                     {
                          $_SESSION["userId"]=$valid_user['id'];
                          $_SESSION["user_name"]=$valid_user['user_name'];

                           if($error=='')
                            {
                                 if (isset($_POST['rememberme'])) {

                                setcookie('uname',$_POST['uname'],time() + (24 * 60 * 60 * 30));
                                setcookie('passwd',$_POST['passwd'],time() + (24 * 60 * 60 * 30));
                                setcookie('rememberme',1,time() + (24 * 60 * 60 *30 ));

                                }
                                else
                                {
                                    setcookie('uname',$_POST['uname'],time() - (24 * 60 * 60 * 30));
                                    setcookie('passwd',$_POST['passwd'],time() - (24 * 60 * 60 * 30));
                                    setcookie('rememberme',1,time() - (24 * 60 * 60 * 30));
                                }

                            }
                          redirectPage(home.php");

                     }

                   }
                else
                {
                        $error=ER_DACT;
                        redirectPage("login.php?Err=ER_DACT");

                }
             }
             else{
             $error=ER_INVUP;
             redirectPage("login.php?Err=ER_INVUP");
             }

         }

?> 
```

这是我的注销页面：

```
<?php

    $_SESSION["userId"]="";
    $_SESSION["name"]="";
    session_destroy();
    redirectPage(login.php);

?> 
```

**更新**

此处的 HTML 代码：

```
<form action="login.php" method="post" name="frmCP1" id="frmCP1">
                <div class="space10"></div><!--space10-->

                <div class="text18blue">Student Login</div>
                <div class="h-line"></div>

                <div><strong>Username:</strong> <span class="errortext">*</span></div>
                <div>
                    <input name="uname" id="uname" type="text"   value="<?php if(isset($_COOKIE['uname'])&&$_COOKIE['uname']!=''){echo $_COOKIE['uname'];}else {echo '';} ?>"  />   
                </div>
                <div class="space10"></div>
                <div><strong>Password:</strong> <span class="errortext">*</span></div>
                <div><input  id="passwd"  name="passwd" type="password" value="<?php if(isset($_COOKIE['passwd'])&&$_COOKIE['passwd']!=""){echo $_COOKIE['passwd'];}else {echo "";} ?>" /></div>
                <div class="space10"></div>
                <div class="checkbox fl"><input <?php if(isset($_COOKIE['rememberme']) && $_COOKIE['rememberme']=="1"){echo "checked='checked'";} ?>  id="remember" name="rememberme"  type="checkbox" value="1"/></div>
                <div>Remember me</div>
                <div class="space10"></div>
                <div><input id="submitLogin" name="submitLogin" type="submit" value="Login" /></div>
                <div class="space10"></div>
                <div><a href="javascript:void(0)" id="dialog_link">Forgot password?</a></div>
                <div class="flclear"></div>

        </form> 
```

所以当我注销我的cookie时也会破坏为什么？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T06:33:01.833

情况不应该如此。销毁会话只应该销毁会话而不是 cookie

尝试添加路径信息以获得更好的性能

```
setcookie('uname',$_POST['uname'],time() - (24 * 60 * 60 * 30), '/');
setcookie('passwd',$_POST['passwd'],time() - (24 * 60 * 60 * 30), '/');
setcookie('rememberme',1,time() - (24 * 60 * 60 * 30), '/'); 
```

这肯定会解决你的问题

# language-agnostic - 回补是什么意思？

> ID：15984671
> 
> 赞同：27
> 
> 时间：2013-04-13T05:40:11.887
> 
> 标签：language-agnostic, intermediate-language, compiler-construction, intermediate-code

是什么`backpatching`意思？请用一个简单的例子来说明。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-13T05:50:37.787

反向修补通常是指解决已植入代码中的正向分支的过程，例如在“if”语句中，当目标的值变得已知时，例如当遇到右大括号或匹配的“else”时。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-05-23T14:30:36.280

在编译器的中间代码生成阶段，我们经常需要执行“跳转”指令到代码中尚不存在的位置。为了处理这种类型的情况，为该指令插入了一个目标标签。产生式规则中的标记非终结符会导致语义动作被拾起。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-06-19T05:51:23.217

一些语句，如条件语句、while 等，在生成中间代码时将表示为一堆“if”和“goto”语法。问题是，这些“goto”指令在开始时没有**有效的引用**（当编译器开始逐行读取源代码时 - AKA *1st pass*）。但是，在第一次阅读整个源代码后，这些“goto”指向的**标签**和**引用是确定的。**

问题是我们能否使编译器能够一次性填充“goto X”语句中的 X？答案是肯定的。

如果我们不使用 backpatching，这可以通过对源代码进行 2 pass 分析来实现。但是，backpatching 让我们可以创建并保存一个**单独的列表**，该列表专门为“goto”语句设计。因为它只在一次传递中完成，所以第一遍不会填充“goto X”语句中的 X，因为编译器乍一看并不知道**X**在哪里。但是，它确实将**X**存储在该排他列表中，并且在遍历整个代码并找到**X**之后，**X**被该地址或引用替换。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-12-06T02:07:44.470

Backpaching 是为 goto 指令留下空白条目的过程，其中目标地址在第一遍的正向传输中是未知的，并在第二遍中填充这些未知的条目。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-05-25T05:57:32.337

Backpatching：语法导向的定义可以在两个或多个通道中实现（我们既有合成属性也有继承属性）。

先建树。

以深度优先顺序遍历树。

一次生成代码的主要困难是，当我们为控制语句流生成代码时，我们可能不知道分支的目标

Backpatching 是解决这个问题的技术。生成带有空目标的分支指令 当目标已知时，填写分支指令的标签（回补）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-10-28T04:17:33.947

回补是一个过程，其中包含前向引用的指令的操作数字段最初留空。当程序中遇到前向引用符号的定义时，将其地址放入该字段。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-24T10:09:13.907

回补是在代码生成过程中通过使用适当的语义表达来填充标签的未指定信息的活动。

它是通过以下方式完成的：

1.  布尔表达式。
2.  控制语句流。

# android - 如何使用 ObjectAnimator 根据拖动动作平滑地为视图上/下设置动画？

> ID：15984679
> 
> 赞同：1
> 
> 时间：2013-04-13T05:41:01.950
> 
> 标签：android, performance, android-animation, nineoldandroids

我创建了一个视图，它有一个占据屏幕顶部 1/3 的 MapFragment 和一个占据屏幕底部 2/3 的 ListView。ListView 在其列表项的正上方有一个“句柄”，用户可以使用它来向上或向下拖动整个 ListView。一旦用户将手指从屏幕上松开，ListView 应该动画到整个屏幕的壁橱顶部或底部边框。到目前为止，我的工作正常，但动画并不流畅。在用户从屏幕上松开手指之后，ListView 开始向最近的边缘移动之前，有一个明显的停顿。我正在使用 ObjectAnimator 的 Nineoldandroids 实现，以便动画可以在蜂窝设备之前运行。有任何想法吗？

下面是我的 onTouch 实现：

```
public boolean onTouch(View v, MotionEvent event) {
    final LayoutParams listLp = (LayoutParams) mListFrame.getLayoutParams();
    final int topMargin = -mHandleShadow.getHeight();
    final int middleMargin = getResources().getDimensionPixelSize(R.dimen.map_handle_margin_top);
    final int bottomMargin = getView().getHeight() - mHandle.getHeight() - mHandleShadow.getHeight();

    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            mInitY = (int) event.getRawY();
            mTopMargin = listLp.topMargin;

            break;
        case MotionEvent.ACTION_MOVE:
            int y = mTopMargin + (int) event.getRawY() - mInitY;

            if (y >= -mHandleShadow.getHeight() && y <= (mViewHeight - mHandle.getHeight() - mHandleShadow.getHeight())) {
                listLp.topMargin = y;
                mListFrame.setLayoutParams(listLp);
            }

            break;
        case MotionEvent.ACTION_UP:
            if ((mInitY > event.getRawY() && mClosestAnchor == Anchor.MIDDLE) || (listLp.topMargin < middleMargin && mClosestAnchor == Anchor.BOTTOM)) {
                ObjectAnimator animator = ObjectAnimator.ofInt(AnimatorProxy.wrap(mListFrame), "topMargin", topMargin);
                animator.setInterpolator(new AccelerateInterpolator());
                animator.start();

                mClosestAnchor = Anchor.TOP;
            }
            else if ((mInitY < event.getRawY() && mClosestAnchor == Anchor.MIDDLE) || (listLp.topMargin > middleMargin && mClosestAnchor == Anchor.TOP)) {
                ObjectAnimator animator = ObjectAnimator.ofInt(AnimatorProxy.wrap(mListFrame), "topMargin", bottomMargin);
                animator.setInterpolator(new AccelerateInterpolator());
                animator.start();

                mClosestAnchor = Anchor.BOTTOM;
            }
            else {
                ObjectAnimator animator = ObjectAnimator.ofInt(AnimatorProxy.wrap(mListFrame), "topMargin", middleMargin);
                animator.setInterpolator(new AccelerateInterpolator());
                animator.start();

                mClosestAnchor = Anchor.MIDDLE;
            }

            break;
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T11:24:45.457

在阅读了 Google 的 Chet Haase 对此处发现的类似问题的回答后，终于解决了这个问题。[https://stackoverflow.com/a/14780019/476005](https://stackoverflow.com/a/14780019/476005)

在每一帧上调整视图的边距过于昂贵并且总是会卡顿，除非您移动的视图非常简单。所以要解决这个问题，我在 OnTouch(...) 方法中执行以下操作：

1.  在 MotionEvent.ACTION_DOWN 上：将 View 的高度设置为其最大高度。
2.  在 MotionEvent.ACTION_MOVE 上：将 View 的“y”属性动画化到 event.getRawY，持续时间为 0。
3.  在 MotionEvent.ACTION_UP 上：将 View 的“y”属性动画化到 View 的父级边缘之一。这里要做的重要事情是在 onAnimationEnd 中适当地设置 View 的高度。

我希望这对每个人都有帮助。

# java - 表格视图与全屏不匹配

> ID：15984680
> 
> 赞同：0
> 
> 时间：2013-04-13T05:41:12.523
> 
> 标签：java, android, uitableview, android-layout, center

我设计了一个活动布局，在布局中我有两个彼此相邻的单独表格。问题是表格没有按比例显示在屏幕上。

![图片](https://i.stack.imgur.com/c0YWk.png)

**如果您注意屏幕截图，您会看到表格的左边距与右边不一样。我应该怎么做才能使表格出现在屏幕中央？**

**xml**布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingBottom="3dp"
    android:paddingLeft="6dp"
    android:paddingRight="6dp"
    android:paddingTop="3dp"
    android:background="#FFFFFF"
    tools:context=".ReportListActivity" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >

        <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:background="@drawable/border"
            android:gravity="center">

            <RelativeLayout
                android:id="@+id/relativeLayout1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_centerVertical="true" >

                <TableLayout
                    android:id="@+id/srno_table"
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent"
                    android:layout_centerHorizontal="true"
                    android:layout_centerVertical="true">
                </TableLayout>
            </RelativeLayout>

            <RelativeLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_toRightOf="@+id/relativeLayout1" >
                <HorizontalScrollView
                android:id="@+id/horizontalScrollView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_toRightOf="@+id/relativeLayout1" >

                    <TableLayout
                        android:id="@+id/report_table"
                        android:layout_width="wrap_content"
                        android:layout_height="match_parent" >

                    </TableLayout>

            </HorizontalScrollView>
            </RelativeLayout>

        </RelativeLayout>

    </ScrollView>

</RelativeLayout> 
```

我哪里错了？我应该怎么做才能达到预期的效果？

提前致谢！

# c++ - Why do I get two different outputs here?

> ID：15984682
> 
> 赞同：0
> 
> 时间：2013-04-13T05:41:44.340
> 
> 标签：c++, boost, floating-point

The following two pieces of code produce two different outputs.

```
//this one gives incorrect output
cpp_dec_float_50 x=log(2)
std::cout << std::setprecision(std::numeric_limits<cpp_dec_float_50>::digits)<< x << std::endl; 
```

The output it gives is

> 0.69314718055994528622676398299518041312694549560547

which is only correct upto the 15th decimal place. Had x been double, even then we'd have got first 15 digits correct. It seems that the result is overflowing. I don't see though why it should. cpp_dec_float_50 is supposed to have 50 digits precision.

```
//this one gives correct output
cpp_dec_float_50 x=2
std::cout << std::setprecision(std::numeric_limits<cpp_dec_float_50>::digits)<< log(x) << std::endl; 
```

The output it gives is

> 0.69314718055994530941723212145817656807550013436026

which is correct according to wolframaplha .

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T05:55:20.837

When you do `log(2)`, you're using the implementation of `log` in the standard library, which takes a double and returns a double, so the computation is carried out to double precision.

Only after that's computed (to, as you noted, a mere 15 digits of precision) is the result converted to your 50-digit extended precision number.

When you do:

```
cpp_dec_float_50 x=2;
/* ... */ log(x); 
```

You're passing an extended precision number to start with, so (apparently) an extended precision overload of `log` is being selected, so it computes the result to the 50 digit precision you (apparently) want.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T05:43:51.790

This is really just a complex version of:

```
float a = 1 / 2; 
```

Here, `1 / 2` is integer division because the parameters are integers. It's only converted to a `float` to be stored in `a` *after* the result is computed.

C++ rules for how to compute a result do not depend on what you do with that result. So the actual calculation of `log(2)` is the same whether you store it in an `int`, a `float`, or a `cpp_dec_float_50`.

Your second bit of code is the equivalent of:

```
float b = 1;
float c = 2;
float a = b / c; 
```

Now, you're calling `/` on a `float`, so you get floating point division. C++'s rules *do* take into account the types of arguments and paramaters. That's complex enough, and trying to also take into account what you do with the result would make C++'s already overly-complex rules incomprehensible to mere mortals.

# jquery - 当我单击另一个 div 时，一个 div 必须附加到 main_div

> ID：15984686
> 
> 赞同：0
> 
> 时间：2013-04-13T05:42:02.247
> 
> 标签：jquery

我是 jquery 的新手。在我的应用程序中，我对它有基本的需求。

在左侧，我有一个小`div`的 s ( `div1`, `div2`...)，在页面的中心，我有一个 main `div`。

当我单击时`div1`，必须将另一个`sub_div`附加到 main `div`。

到目前为止，这是我的代码：

```
$(document).ready(function() {
    $("#div1").click(function(){
        $("#sub_div").show().//here sub div has to append main_div
    });
}); 
```

要求是当我点击时`div1`，`sub_div`必须附加到`main_div`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:44:19.583

您可以使用[appendTo()](http://api.jquery.com/appendTo/)：

```
$("#div1").click(function(){

    $("#sub_div").show().appendTo('#main_div');

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T11:08:27.727

如果您只想将新内容添加到现有的主 div，您也可以这样做：

```
 $(document).ready(function() {
        $("#div1").click(function(){
               var mainContent = $("#main_div").html(); //getting the existent content
               var newContent = "<your-new-content>"; //the content you want to add

               $("#main_div").html(mainContent + newContent); // setting it 

               // if you want the new content to be on top just switch them
               //  $("#main_div").html(newContent + mainContent);
        });
    }); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-13T06:24:39.297

您可以使用[`.append()`](http://api.jquery.com/append/)或[`.prepend()`](http://api.jquery.com/prepend/)随心所欲地查看它。

它解决了你的问题

# php - 自定义字段类型的默认属性不会显示在 HTML 中

> ID：15984687
> 
> 赞同：0
> 
> 时间：2013-04-13T05:42:30.450
> 
> 标签：php, symfony, symfony-2.1, symfony-forms

我正在尝试使用自定义表单类型实现 Facebook 样式的自动完成字段。JavaScript 小部件依赖于类名，因此我将它添加到自定义表单类型类中的 attr 键中，就像我在其他地方所做的那样，但由于某种原因，它永远不会显示在输出 HTML 中:-(

相关代码：

```
class AutocompleteType extends AbstractType
{
    protected $em;

    public function __construct(ObjectManager $em)
    {
        $this->em = $em;
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'attr' => array(
                'class' => 'autocomplete',
                'data-autocomplete' => '{"url":"'.$options['url'].'"}'
            )

        );
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {

        $resolver->setDefaults(array(
            'url' => false,
            'object' => false,
            'repository' => false,
            'field' => false
        ));

    }

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $transformer = new AutocompleteTransformer($this->em, $options['object'], $options['repository'], $options['field']);
        $builder->addModelTransformer($transformer);
    }

    /**
    * {@inheritdoc}
    */
    public function buildView(FormView $view, FormInterface $form, array $options)
    {
        $view->vars = array_replace($view->vars, array(
            'url' => $options['url'],
            'object' => $options['object'],
            'repository' => $options['repository'],
            'field' => $options['field']
        ));
    }

    public function getParent()
    {
        return 'text';
    }

    public function getName()
    {
        return 'autocompleter';
    }
} 
```

生成的 HTML：

```
<input type="text" required="required" name="post[Tags]" id="post_Tags"> 
```

预期的 HTML

```
<input type="text" class="autocomplete" data-autocomplete="url/passed/from/builder" required="required" name="post[Tags]" id="post_Tags"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T08:11:20.530

三种方式，不知道哪个更好

1) 在 buildForm() 方法下，您可以获取和设置属性“attr”：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $attrs = $builder->getAttribute('attr');
    ...
    $builder->setAttribute('attr', $attrs);
} 
```

2）另一种方法是在构建视图下设置属性，我认为这有点逻辑

```
public function buildView(FormView $view, FormInterface $form, array $options)
{
    $view->vars['attr'] = array_merge(array(
        ....
    ), $view->vars['attr']);
} 
```

3）最新的方法是将它们直接作为变量传递给视图而不是'attr'，然后将它们显示在适当的树枝块中。

我认为第三个是最好的方法，但我不确定。

# r - 添加标识符列

> ID：15984699
> 
> 赞同：-1
> 
> 时间：2013-04-13T05:45:00.793
> 
> 标签：r, identifier

例如，我的数据如下所示：

```
Number Value
1       3
2       4
3       6
4       7 
```

我想添加第三列作为基于值的标识符列。如果值> 5，则为第1组，否则为第2组。然后像这样返回：

```
Number Value  Group
1       3      2
2       4      2
3       6      1
4       7      1 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T06:27:03.127

您可以向数据框添加新列：

```
df$Group <- ifelse(df$Value > 5, 1, 2) 
```

我建议阅读更多关于`?data.frame` `?ifelse`和其他数据框操作的信息，例如
`?transform`

# django - Django为用户配置文件创建自定义URL

> ID：15984700
> 
> 赞同：2
> 
> 时间：2013-04-13T05:45:03.697
> 
> 标签：django

我有一个允许用户创建个人资料并登录的应用程序。

当用户登录时，他被重定向到 127.0.0.1:8000/profile/

问题是，我想通过将用户的用户名添加到 URL 的末尾来自定义 URL，例如 127.0.0.1:8000/profile/michael

这是一个与我类似的问题

[Django - 登录后，将用户重定向到他的自定义页面 --> mysite.com/username](https://stackoverflow.com/questions/4870619/django-after-login-redirect-user-to-his-custom-page-mysite-com-username)

*“获取用户名，然后对自定义 URL 执行 HttpResponseRedirect。”*

我似乎无法弄清楚如何将用户名作为参数传递给 HttpResponseRedirect 以正确处理到自定义 URL。

```
return HttpResponseRedirect('/profile/?username=%s' % (username, request.path))

def Profile(request):
    if not request.user.is_authenticated():
        return HttpResponseRedirect(reverse('world:LoginRequest'))
    person = Person.objects.get(user=request.user)
    return render(request,'profile.html',{'person':person}) 
```

我的网址

```
url(
    r'^profile/$',
    'pet.views.Profile',
    name = 'Profile'
), 
```

新的

我的意见.py

```
 def LoginRequest(request):
if request.user.is_authenticated():
        username = User.objects.get(username=request.user)
        url = reverse('Profile', kwargs = {'username': username.username})
        return HttpResponseRedirect(url)        
if request.method == "POST":
    form = LoginForm(request.POST)
    if form.is_valid():
        username = form.cleaned_data['username']
        password = form.cleaned_data['password']
        Person = authenticate(username=username, password=password)
        if Person is not None:
            login(request, Person)
            username= User.objects.get(username=request.user)

                            url = reverse('Profile', kwargs = {'username': username.username})
                            return HttpResponseRedirect(url)

return render(request, 'login.html',{'form': LoginForm()})

url(
    r'^login/$',
    'pet.views.LoginRequest',
    name = 'LoginRequest'
),

url(
    r'^profile/(?P<username>\w+)/$',
    'pet.views.Profile',
    name = 'Profile'
),

def Profile(request,username):
    if not request.user.is_authenticated():
        return HttpResponseRedirect(reverse('world:LoginRequest'))
    board = Board.objects.filter(user=request.user)

    person = Person.objects.get(user__username=username)
    return render(request,'profile.html',{'board':board ,'person':person}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T05:56:19.587

这将是您的重定向 URL 的正确正则表达式，即。不要修改你拥有的那个。

```
url(r'^profile/(?P<username>\w+)/$', 'pet.views.myprofileview', name="detail_profile") 
```

然后将参数传递给重定向：

```
url = reverse('detail_profile', kwargs={'username': profile.firstname})
return HttpResponseRedirect(url) 
```

这导致还必须定义一个新视图：

```
def myprofileview(request, username):
    person = Person.objects.get(user = request.user)
    return render(request,'profile.html',{'person':person}) 
```

这将在一个视图中消除两种行为，我觉得这非常好！

我们这样做是因为它是一个`HttpResponseRedirect`接受的字符串，所以我们必须相应地构建它。

这将重定向到`myprofileview`视图和“样式”，如果你可以称之为你的 url `/profile/michael/`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T06:37:52.240

```
def LoginRequest(request):
    if request.user.is_authenticated():
        return HttpResponseRedirect(reverse('world:Profile', 
            kwargs={'username': request.user.username}))  

    if request.method == "POST":
        form = LoginForm(request.POST)
        if form.is_valid():
            username = form.cleaned_data['username']
            password = form.cleaned_data['password']

            Person = authenticate(username=username, password=password)
            if Person is not None:
                login(request, Person)

                return HttpResponseRedirect(reverse('world:Profile', 
                    kwargs={'username': username})) 

    return render(request, 'login.html',{'form': LoginForm()}) 
```

# html - 使图像左右显示

> ID：15984701
> 
> 赞同：-3
> 
> 时间：2013-04-13T05:45:18.917
> 
> 标签：html, css

我是 CSS 新手，想知道如何让我的图像并排显示。我不想用`float:left`，而是`display:inline-block`。我试过了，但我无法让它工作。

[这](http://jsfiddle.net/WQdAY/)是jsfiddle。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T05:50:29.863

您的图像都在单独的`<div>`标签内。`<div>`默认情况下，A看起来像`display: block`，因此您需要为您的`comment1`和`comment2`类做的就是使*这些*内联块。此外，由于您`.MainBox .commentBox`的设置为`width: 0px`，因此它下面的所有元素都不会并排排列。如果您希望图像彼此相邻，则需要删除该属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T05:51:40.183

尝试这个：

使用以下 CSS：

```
.MainBox {
    margin:0px auto;
    border:1px solid #f00;
    width:1000px;
}  
.MainBox .commentBox {
    display:inline-block;
}
.MainBox .commentBox .comment1 {
    float:left;
}
.MainBox .commentBox .comment2 {
    float:left;          
} 
```

# arduino - 当我将 lcd.setCursor(0,3) 与 20x4 I2C LCD 一起使用时，它会打印到第 2 行，这是一个错误吗？

> ID：15984707
> 
> 赞同：1
> 
> 时间：2013-04-13T05:46:11.013
> 
> 标签：arduino, lcd

我目前正在使用 Sainsmart 的 20x4 LCD 设置显示 LCD。我正在使用 LiquidCrystal_I2C 库（[http://www.dfrobot.com/image/data/TOY0046/LiquidCrystal_I2Cv1-1.rar](http://www.dfrobot.com/image/data/TOY0046/LiquidCrystal_I2Cv1-1.rar)），到目前为止一切正常。我正在尝试使用以下代码每秒打印 4 行（killSwitch 返回一个布尔值）：

```
while (killSwitch()) {
  i++;
  lcd.clear();
  lcd.print(i);
  lcd.setCursor(0,1);
  lcd.print("RPM:");
  lcd.setCursor(0,2);
  lcd.print("Speed:");
  lcd.setCursor(0,3);
  lcd.print("Fuel:");
  delay(1000); 
} 
```

出于某种原因，第 4 行（用于“Fuel”）覆盖了第 2 行（用于“RPM”）。有趣的是，当我尝试一次只打印一行时，我可以打印到最后一行，所以我认为设备本身没有任何问题。有什么想法吗？

编辑：

```
LiquidCrystal_I2C lcd(0x3F, 20, 4);
void setup() {
  lcd.init();
  lcd.backlight();
  lcd.print("ON");
  lcd.setCursor(0,2);
  lcd.print("LCD DISPLAY");
  delay(1000);
  lcd.clear();
  lcd.setCursor(0,2);
  lcd.print("READ OWNER MANUAL");
  lcd.setCursor(0,3);
  lcd.print("BEFORE OPERATION");
  delay(1000);
  lcd.clear();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-02-22T11:12:37.553

我有完全相同的问题。lcd.print (0,1) 和 lcd.print(0,3) 似乎指的是同一行。

在第 (0,1) 行说我有文本“Hello World”并且在第 (0,3) 行想要“Test”输出是：“Testo World”。

通过添加

```
lcd.begin(20, 4); 
```

后`lcd.init();`

它解决了它，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T10:13:49.730

The first and last lines are 0 and 3, **not** 1 and 4, so your row 2 is the third line of the display.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-01T10:49:05.497

不是错误。`setCursor(x,y)`接受 x 和 y 坐标，它们是从零开始的索引。

`setCursor(0,0)`移动到第一行的第一个字符。

`setCursor(5,1)`移动到第二行的第六个字符。

`setCursor(19,3)`移动到 20x4 LCD 右下角的最后一个字符。

# rotation - 局部坐标系中的旋转，表示为四元数

> ID：15984713
> 
> 赞同：2
> 
> 时间：2013-04-13T05:47:45.277
> 
> 标签：rotation, quaternions, coordinate-transformation

下图显示了位于全局坐标系 G 中的两个坐标系 A 和 B： ![坐标系配置](https://i.stack.imgur.com/QYNYn.png)

我需要找到将 A 旋转到 B，但在 A 本地的框架中表示的四元数。

第一部分很简单，`B.conjugate()*A`（从 的旋转中减去 的旋转`B`）`A`，得到围绕 的 π/2 旋转`(-1,0,0)`。这显然是正确的，因为`A`绕全局`-x`轴旋转 90° 得到`B`.

现在我需要用 ; 来表达这个结果`A`。期望的结果是 π/2 左右`(0,0,-1)`（这就是 A 中的全局`-x`），但我无法仅通过旋转组合到达那里。

我可以将四元数转换为角轴表示（π/2 左右`(-1,0,0)`），将轴旋转为`A*(-1,0,0)=(0,0,-1)`，然后转换回四元数，但如果可能的话，我想避免这种转换。

如何仅使用四元数乘法获得旋转？

* * *

代码本身是 c++，但我在 python 中使用[minieigen](https://pypi.python.org/pypi/minieigen)检查：

```
from minieigen import *
from math import *
A=Quaternion((0,-1,0),pi/2)
B=Quaternion((sqrt(3)/3,-sqrt(3)/3,sqrt(3)/3),(2/3.)*pi)
# rotation in global frame:
rg=B.conjugate()*A           # is Quaternion((-1,0,0),pi/2)
# rotation in local frame:
# ?? what now?! hack around with angle-axis
aa=rg.toAngleAxis()
rl=Quaternion(A*aa[1],aa[0]) # is Quaternion((0,0,-1),pi/2)

for q in A,B,rg,rl: print q 
```

这使：

```
Quaternion((0,-1,0),1.5707963267948966)
Quaternion((0.5773502691896257,-0.5773502691896257,0.5773502691896257),2.0943951023931953)
Quaternion((-1,-7.850462293418876e-17,-7.850462293418876e-17),1.5707963267948968)
Quaternion((-1.1102230246251568e-16,-7.850462293418877e-17,-1),1.5707963267948968) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:19:59.717

这很容易，但我把它留在这里记录下来：

```
A*B.conjugate() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T03:10:51.053

你的方程式不太适合我。

我将使用**Q'**表示 Q.conjugate。现在我们知道**Q'*Q**是恒等式，所以它是**Q*Q'**。因此，如果您想知道将**A**转换为**B**的四元数（在全局框架中，因为**A**和**B**都在全局框架中），那么您从该等式开始（假设这些四元数表示应用于列向量的旋转）：

**Q*A=B**

然后你把A移到另一边

**Q*A*A'=B*A'=Q**

我们可以看到这是正确的，因为**B*A'*A=B**。您问题中的方程式说**B'*A*A=B**。我认为，这在一般情况下并不成立。

现在，如果您希望旋转在**A**的框架而不是全局框架中，这相当于说您想要**B**在**A**的框架中。这与从**B中删除****A**相同。像这样：**A'*B**。这样，如果你从**A**的框架旋转到全局框架，你会再次得到**B**：**A*A'*B=B**。

# forms - 可提交的在线表单如何识别 (\t) 和 (\n) 分隔符并跳过什么时候使用 Excel 中的复制粘贴？

> ID：15984715
> 
> 赞同：0
> 
> 时间：2013-04-13T05:47:47.967
> 
> 标签：forms, excel, input, copy-paste, delimiter

[[再次更新]] 如果这个问题变得冗长，我很抱歉。

我是一名业余编码员，我正在寻求有关 javaScript 中的语法和功能的帮助，这将允许复制的分隔符（例如“\t”和“\n”）以`<input>`在线形式跳过适当的 's。

我想我现在大约 33% 在那里（再次：爱好编码 - 自学想要成为）

```
<script type="text/javascript">
function splitInput()
{   
var x=document.forms["simpleForm02"]["dataInput_0"].value;
var delimiterT = x.split("\t");
var delimiterN = x.split("\n");

for (var i=0;i<delimiterT.length;i++)
if (x.indexOf("\t") >-1)
{
document.getElementById("dataInput_" + i ).value = (delimiterT[i]);
}

else
for (var i=0;i<delimiterN.length;i++)
if (x.indexOf("\n") >-1)
{
document.getElementById("dataInput_" + (i * 3) ).value = (delimiterN[i]);
}

}
</script>
<form name="simpleForm02">
<table>
<tr>
<th>Color</th>
<th>Model</th>
<th>Qty</th>
</tr>
<tr>
<td><input class="colorInput" id="dataInput_0" name="colorInput_row_1" value="" onKeyUp="splitInput()"></td>
<td><input class="modelInput" id="dataInput_1"  name="modelInput_row_1" value="" onKeyUp=""></td>
<td><input class="qtyInput" id="dataInput_2"  name="qtyInput_row_1" value="" onKeyUp=""></td>
</tr>
<tr>
<td><input class="colorInput" id="dataInput_3" name="colorInput_row_2" value="" onKeyUp=""></td>
<td><input class="modelInput" id="dataInput_4"  name="modelInput_row_2" value="" onKeyUp=""></td>
<td><input class="qtyInput" id="dataInput_5"  name="qtyInput_row_2" value="" onKeyUp=""></td>
</tr>
<tr>
<td><input class="colorInput" id="dataInput_6" name="colorInput_row_3" value="" onKeyUp=""></td>
<td><input class="modelInput" id="dataInput_7"  name="modelInput_row_3" value="" onKeyUp=""></td>
<td><input class="qtyInput" id="dataInput_8"  name="qtyInput_row_3" value="" onKeyUp=""></td>
</tr>
</table>
</form> 
```

这段代码有点工作，以一种有限的方式。如果我复制并排对齐的三个 excel 单元格并将其粘贴到`<input class="colorInput" id="dataInput_0" name="colorInput_row_1" value="" onKeyUp="splitInput()">`中，则脚本会正确拆分并将三个单元格的内容粘贴到前三个输入中。

但是，我显然在脚本中存在缺陷，因为它根本无法识别 '\n' 分隔符。而且我也知道我在这种情况下存在编码问题：将代码相对地应用于所有单元格，而不仅仅是`["dataInput_0"]`.

假设我在 Excel 工作表中有以下数据：

![Excel 中简单数据集的屏幕截图](https://i.stack.imgur.com/O2iLs.png)

我试图找到这样的功能，如果我复制上面的 Excel 示例数据，它将覆盖/写入示例中输入的前 6 个`<form name="simpleForm">`。

对不起，啰嗦了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T13:52:36.663

所以，这个问题已经提出了大约一个星期，在此期间我一直在寻找想法和帮助。

具有最大潜力但不是完整解决方案的解决方案是通过以下代码：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
</head>
<body>
    <script>
         function splitInput() {
             var x = document.forms["simpleForm02"]["dataInput_0"].value;
             if (x.indexOf('\t') > 0) {
                 var delimiterT = x.split('\t');
                 for (var i = 0; i < delimiterT.length ; i++)
                    document.getElementById("dataInput_" + i).value = (delimiterT[i]);
             }
             else
                if (x.indexOf('\n') > 0) {
                     var delimiterN = x.split('\n');
                     var j = 0;
                     for (var i = 0; i < delimiterN.length ; i++) {document.getElementById("dataInput_" + j).value = (delimiterN[i]);
                         j += 4;
                     }
                 }
                 else
                     return false;
         }   
         function classFocused() {
            var d = document.getElementById("dataInput_0");
            d.className = d.className + " InFocus";
         }   
         function classBlured() {
            var d = document.getElementById("dataInput_0");
            d.className = "inputArea";
         }       
    </script>
    <form name="simpleForm02">
        <table>
            <tr>
                <th>Color</th>
                <th>Model</th>
                <th>Qty</th>
                <th>Cost</th>
            </tr>
            <tr>
                <td>
                    <textarea data-id="0" class="inputArea colorInput" id="dataInput_0" name="colorInput_row_1" onFocus="classFocused();" onBlur="classBlured();" onKeyUp="splitInput();"></textarea>
                </td>
                <td>
                    <textarea data-id="1" class="inputArea modelInput" id="dataInput_1" name="modelInput_row_1" onkeyup="" ></textarea></td>
                <td>
                    <textarea data-id="2" class="inputArea qtyInput" id="dataInput_2" name="qtyInput_row_1" onkeyup="" ></textarea></textarea></td>
                <td>
                    <textarea data-id="3" class="inputArea costInput" id="dataInput_3" name="costInput_row_1" onkeyup="" ></textarea></td>

            </tr>
            <tr>
                <td>
                    <textarea data-id="4" class="inputArea colorInput" id="dataInput_4" name="colorInput_row_2" onkeyup="splitInput()" ></textarea></td>
                <td>
                    <textarea data-id="5" class="inputArea modelInput" id="dataInput_5" name="modelInput_row_2" onkeyup="" ></textarea></td>
                <td>
                    <textarea data-id="6" class="inputArea qtyInput" id="dataInput_6" name="qtyInput_row_2" onkeyup="" ></textarea></td>
                <td>
                    <textarea data-id="7" class="inputArea costInput" id="dataInput_7" name="costInput_row_2" onkeyup="" ></textarea></td>
            </tr>
            <tr>
                <td>
                    <textarea data-id="8" class="inputArea colorInput" id="dataInput_8" name="colorInput_row_3" onkeyup="splitInput()" ></textarea></td>
                <td>
                    <textarea data-id="9" class="inputArea modelInput" id="dataInput_9" name="modelInput_row_3" onkeyup="" ></textarea></td>
                <td>
                    <textarea data-id="10" class="inputArea qtyInput" id="dataInput_10" name="qtyInput_row_3" onkeyup="" ></textarea></td>
                <td>
                    <textarea data-id="11" class="inputArea costInput" id="dataInput_11" name="costInput_row_3" onkeyup="" ></textarea>
                </td>
            </tr>
        </table>
    </form>
</body>
</html> 
```

在上面的 textarea 示例中，如果存在 '\t' 定界符，则进行拆分，并且数据将分布在数据继承长度的过程中。

此外，在上面的文本区域示例中，如果存在 '\n' 分隔符，则进行拆分，并且数据将垂直分布在数据继承长度的过程中。声明：“j += 4”本质上是表单中的列数。

虽然我仍然需要它在所有文本区域输入中工作，而不仅仅是标识为 ["dataInput_0"]。一个 jQuery $(this) 标识符可能吗？

此外，编码是有限的，因为如果您复制和粘贴同时具有 \t 和 \n 的单元格，那么代码将不起作用。

但这是朝着正确方向迈出的一步。

# php - 如何通过多并行下载强制下载 PHP 中的文件？

> ID：15984728
> 
> 赞同：0
> 
> 时间：2013-04-13T05:50:03.227
> 
> 标签：php, file, streaming, download

如何通过多并行下载强制下载 PHP 中的文件？我尝试打开流强制使用 header 和 readfile 成功下载文件，但它仅支持 1 个并行（1 个连接）并且无法随时恢复下载文件。

请帮我一个建议！

# heroku - 将 Heroku CDN 添加到 RefineryCMS

> ID：15984742
> 
> 赞同：1
> 
> 时间：2013-04-13T05:52:51.670
> 
> 标签：heroku, cdn, refinerycms, dragonfly-gem

尝试在[本文](https://devcenter.heroku.com/articles/cdn-asset-host-rails31)之后的 Heroku 上的 RefineryCMS 站点中使用asset_sync 。解决了从 app/assets 目录渲染的所有问题。现在，我在使用蜻蜓上传到站点并存储在单独的 S3 存储桶中的图像和文件时遇到问题。

链接应如下所示：

[http://myapp.org/system/resources/W1siZiIsIjIwMTMvMDQvMDkvMTgvNDMvNTAvMTE1L0ZhbWlseV9FbnZlbG9wZV9NZXJnZV80XzlfMTMucGRmIl1d/Family%20Letter.pdf](http://myapp.org/system/resources/W1siZiIsIjIwMTMvMDQvMDkvMTgvNDMvNTAvMTE1L0ZhbWlseV9FbnZlbG9wZV9NZXJnZV80XzlfMTMucGRmIl1d/Family%20Letter.pdf)

这将转到我为 config/initializers/images 中上传的文件设置的存储桶：

```
 config.s3_backend = Refinery::Core.s3_backend
   config.s3_bucket_name = ENV['S3_BUCKET']
   config.s3_access_key_id = ENV['S3_KEY']
   config.s3_secret_access_key = ENV['S3_SECRET'] 
```

这是与用于资产的存储桶分开的存储桶。我得到的链接是：

[https://staging-assets.s3.amazonaws.com/system/images/W1siZiIsIjIwMTIvMTAvMDkvMDgvMDUvMjYvMTkxL09jdG9iZXJfQ2FsZW5kYXIuanBnIl0sWyJwIiwidGh1bWIiLCIxMzV4MTM1I2MiXV0/October%20Calendar.jpg](https://staging-assets.s3.amazonaws.com/system/images/W1siZiIsIjIwMTIvMTAvMDkvMDgvMDUvMjYvMTkxL09jdG9iZXJfQ2FsZW5kYXIuanBnIl0sWyJwIiwidGh1bWIiLCIxMzV4MTM1I2MiXV0/October%20Calendar.jpg)

我是否必须将所有现有资产转移到新存储桶中（我猜是在“系统”目录中？或者是否有一个配置变量我可以设置为“去这里获取蜻蜓文件”

编辑：刚刚发现[这个提交](https://github.com/refinery/refinerycms/pull/2238)可以解决这个问题，但我不确定。也许有人可以澄清如何配置。

# gcc - Clang 可以用来解析 c/c++ 文件并返回类信息（名称、方法、参数）吗？

> ID：15984744
> 
> 赞同：0
> 
> 时间：2013-04-13T05:53:01.213
> 
> 标签：gcc, compiler-construction, autocomplete, ide, clang

我将为 IDE 添加自动完成功能，众所周知，Clang 对用户非常友好。它可以用来即时解析 c/c++ 文件并返回类信息（名称、方法、参数）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:10:19.230

是的，您可以使用多个 API：clang 二进制文件、libclang 共享库（又名 clang-c）、内部 API（它们可以在 clang 版本之间更改）、python 绑定到 clang-c。

首选 python 绑定或 clang-c。

# java - 如何计算掷硬币的连续正面

> ID：15984745
> 
> 赞同：0
> 
> 时间：2013-04-13T05:53:12.837
> 
> 标签：java

我需要帮助计算连续出现的正面数量。我不确定我该怎么做。谁能告诉我为这个程序做最快和最简单的方法吗？我似乎无法弄清楚，我已经考虑了一段时间。任何帮助，将不胜感激。

```
import java.util.Scanner;
import java.util.Random;

public class test2
{
    public static void main( String[] args )
    {
            Random randomNumber = new Random();

            //declares and initializes the headCount and consecutiveHeads
            int headCount = 0;
            int consecutiveHeads = 0;

            //Ask user how many coin flips
            System.out.println( "How many coin flips?" );

            //stores the input in coinFlips
            Scanner input = new Scanner( System.in );
            int coinFlips = input.nextInt();

            //loop makes sure that program only accepts values or 1 or greater
            while (coinFlips < 1)
            {
                System.out.println("Please enter a value greater than or equal to 1.");
                coinFlips = input.nextInt();
            }

            for (int i = 0; i < coinFlips; i++)
            {
                int coinFace = randomNumber.nextInt(2);

                if (1 == coinFace)
                {
                    //Print H  for heads and increment the headCount
                    System.out.print( "H" );
                    headCount++;
                }
                else
                {
                    //print T for tails
                    System.out.print( "T" );

                }
            }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T05:56:38.100

我想说的最简单的方法就是在 if 子句的 Heads 侧计算连续的头，并在 Tails 侧将其设置为零。像这样：

```
 [...]
 if (1 == coinFace)
 {
     //Print H  for heads and increment the headCount
     System.out.print( "H" );
     headCount++;
     consecutiveHeads++;
 }
 else
 {
      //print T for tails
      System.out.print( "T" );
      consecutiveHeads = 0;
      // if current head count is greater than previously recorded maximum count, replace old max

 } 
```

如果您想记住最高的连续计数，您可能需要为此添加一个变量。所以上面变成了：

```
 if (1 == coinFace)
 {
     //Print H  for heads and increment the headCount
     System.out.print( "H" );
     headCount++;
     consecutiveHeads++;
     if(consecutiveHeads > longestHeadStreak)
     {
          longestHeadStreak = consecutiveHeads;
     }
 } 
```

# user-interface - 具有可定制的 xml 输出（屏幕尺寸、小部件）的免费/开源 GUI 设计器？

> ID：15984746
> 
> 赞同：0
> 
> 时间：2013-04-13T05:53:16.807
> 
> 标签：user-interface, designer, mqx

我们正在使用 MQX RTOS (ARM Cortex M4) 下的 eGUI 开发 GUI。我们不想在每个屏幕上硬编码小部件、回调等，我们希望使用一种工具以图形方式设计 GUI 屏幕，然后生成 XML 描述文件，该文件可以作为 GUI 代码生成器的基础（作为工具的第二部分）。

QTDesigner 与此非常相似，但不能自定义到另一个自定义集合或小部件。因此，我们正在寻找任何可以提供自定义选项（至少屏幕大小和小部件集）并生成带有设计描述的 xml 输出文件的 GUI 设计器。

然后我们可以用这个xml文件开发代码生成器......

任何想法，指针，建议？

提前致谢，

布勒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T16:28:06.467

Pencil 的原生文件格式基于 XML。

[http://pencil.evolus.vn/](http://pencil.evolus.vn/)

这远非*理想*，但使用正确的脚本（例如 Ruby 和 Nokogiri），您可以将铅笔文件转换为更加干净和直接的 XML 文件，然后在单独的步骤中使用该文件来生成 GUI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-11T10:37:55.567

不幸的是，大多数 GUI 设计师都与他们的小部件工具包密切相关。Qt 设计器 -> Qt、Glade -> GTK+、wxFormBuilder -> wxWidgets。为您的库定制不同的设计器并不[容易](https://github.com/littlevgl/lvgl/issues/601)。最好的选择是选择设计器附带的 GUI 库。MQX RTOS的[两个主要](https://community.nxp.com/thread/368665)预支持图形库是[eGUI](https://github.com/NXPmicro/eGUI)和[PEG](https://www.nxp.com/design/software/embedded-software/peg-graphics-software:PEG-HOME)。只有 PEG 图形库有 GUI 设计器，唯一的免费版本（仅适用于 NXP Silicon）是[PEG-Lite](https://www.nxp.com/design/software/embedded-software/peg-graphics-software/peg-lite-runtime:PEGLT)。如果您使用的是 STM32 硬件，最好使用[TouchGFX](https://www.touchgfx.com/)，它有一个设计器并且仅对 STM32 设备免费。

[TotalCross](https://totalcross.com/)开发了一种[工具](https://yourapp.totalcross.com/knowcode-app)，可以将由 Android Studio 的布局编辑器构建的 Android XML 转换为在 TotalCross VM 上运行的 Java API。这一切都在这个[视频](https://www.youtube.com/watch?v=7o3p14wQPsE)中得到了解释。该工具尚未在他们的产品页面上正式发布，但在[GitHub 上](https://github.com/TotalCross/KnowCodeXML)。这是嵌入式 GUI 库的[列表](https://medium.com/@kevmuhuri/top-five-libraries-for-creating-gui-on-embedded-linux-5ce03903be32)。其中一半有 GUI 设计师。

# angularjs - 如何将输入中角度元素的更改链接到输出字段？

> ID：15984747
> 
> 赞同：1
> 
> 时间：2013-04-13T05:53:24.513
> 
> 标签：angularjs

我尝试了刚刚出版的 O'Reily 书中的以下示例：

```
<form ng-controller="StartUpController">
Starting: <input ng-change="computeNeeded()"
ng-model="funding.startingEstimate">
Recommendation: {{funding.needed}}
</form>

function StartUpController($scope) {
$scope.funding = { startingEstimate: 0 };
$scope.computeNeeded = function() {
$scope.needed = $scope.startingEstimate * 10;
};
} 
```

[笨拙](http://beta.plnkr.co/edit/pHiPhS?p=preview)

该代码似乎不起作用，我不知道为什么。谁能看到它有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T06:22:49.110

是的，你在这里有一些问题。

**`$scope.startingEstimate`不存在**

`startingEstimate`而是属于`$scope.funding`。要访问它，您将编写`$scope.funding.startingEstimate`. 如果您不熟悉，您可能想阅读这篇文章以了解有关对象如何在 JavaScript 中工作的信息：[https ://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)

**`funding.needed`不存在**

您需要使用`{{needed}}`，因为您正在分配`$scope.needed`，而不是`$scope.funding.needed`。

然后，您的代码可能看起来像这样并且可以工作：

```
<form ng-controller="StartUpController">
   Starting: <input ng-change="computeNeeded()"
   ng-model="funding.startingEstimate">
   Recommendation: {{funding.needed}}
</form>

function StartUpController($scope) {
   $scope.funding = { startingEstimate: 0 };
   $scope.computeNeeded = function() {
      $scope.funding.needed = $scope.funding.startingEstimate * 10;
   };
} 
```

# ios - iOS UI 更新和异步方法

> ID：15984749
> 
> 赞同：0
> 
> 时间：2013-04-13T05:53:46.403
> 
> 标签：ios, asynchronous, uiview, social-networking, uiprogressview

我正在使用 iOS 6 的社交 API 来发送推文，并且我想要一个进度视图。以下是要显示的消息。

```
 [self.progressView addStatus:@"Posting to Twitter"]; 
```

由于我的应用程序可能会同时向多个目的地发送消息，我想在进度视图上显示所有处理状态。因此，一旦将新消息添加到进度视图，我将构建一个子视图，然后将其添加到主进度视图。

```
UIView *containerView = [[UIView alloc] init];

UIActivityIndicatorView *weiboIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
weiboIndicator.tag = tag + 1;
[weiboIndicator setFrame: CGRectMake(10, 20, weiboIndicator.frame.size.width, weiboIndicator.frame.size.height)];

[containerView addSubview:weiboIndicator];
[weiboIndicator startAnimating];

UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(34, 23, 40, 60)];
label.tag = tag;
label.text = status;
label.backgroundColor = [UIColor clearColor];
label.textColor = [UIColor whiteColor];
label.font = [UIFont boldSystemFontOfSize:12];
label.adjustsFontSizeToFitWidth = YES;
label.hidden = NO;
[label sizeToFit];

[containerView addSubview:label]; 
```

这是一个非常简单的 UIView。然后我将它添加到主进度视图

```
dispatch_async(dispatch_get_main_queue(), ^{
        [[ParallelProgressView sharedView] addSubview:progressVivew];

        //change height to accommodate new progress view
        [[ParallelProgressView sharedView] setFrame:CGRectMake(bounds.size.width / 4, bounds.size.height / 4, bounds.size.width / 2, (index + 1) * 60 + 40 )];
        //[[ParallelProgressView sharedView] setNeedsDisplay];
    }); 
```

**问题是活动指示器立即显示，而不是标签**

![在此处输入图像描述](https://i.stack.imgur.com/JX74D.png)

指示器正在动画，并且视图的高度已更改。**但是标签直到不久之后才会显示。** ![在此处输入图像描述](https://i.stack.imgur.com/0270P.png)

# gwt - 在 GWT 中使用 FreeType 扩展？

> ID：15984761
> 
> 赞同：1
> 
> 时间：2013-04-13T05:55:53.620
> 
> 标签：gwt, libgdx, freetype

我正在尝试在我的项目中使用 freetype 扩展，它在桌面和 Android 中运行良好，但在 HTML5 中给出了 ClassDefNotFoundException。我知道它不是正确导入/继承的，但 freetype.jar 和 freetype-sources.jar 都在它的构建路径中。

需要做些什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T11:39:43.723

It does not work with gwt and they are not going to fix it. Take a look at this issue: [issue](http://code.google.com/p/libgdx/issues/detail?id=1279)

> "Project Member #1 badlogicgames
> Extensions relying on native code (gdx-audio, gdx-bullet, gdx-image, gdx-freetype) can not be ported to HTML5 i'm afraid."

# haskell - 从整数 Haskell 中区分列表

> ID：15984769
> 
> 赞同：1
> 
> 时间：2013-04-13T05:56:43.453
> 
> 标签：haskell

我们如何在 Haskell 中区分列表和整数？换句话说，我需要一个函数，它为 3 返回 True 并为 [3] 返回 false 谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-13T06:03:59.930

使用 sum 数据类型，例如`Either`

```
f :: Either Int [a] -> Bool
f (Left _)  = True
f (Right _) = False

f (Left 3)    -- evaluates to True
f (Right [3]) -- evaluates to False
f (Left 4)    -- also evaluates to True, if you want to check for certain values 
              -- within each type you should handle them explicitly 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-13T06:03:49.410

这个问题毫无意义，因为您通常知道值是什么类型，如果不知道，您将很难弄清楚如何处理它。但是，它*可能*在 TemplateHaskell 或其他地方有用，所以......

```
class IsAList a where
    isAList :: a -> Bool

instance IsAList Int where
    isAList = const False

instance IsAList [a] where
    isAList = const True 
```

现在`isAList [2] = True`和`isAList (2 :: Int) = False`。请注意，`isAList "asdf" = True`因为字符串是字符列表。

如果您可以详细说明*为什么*需要这个？...

# audio - 使用 ALSA，如何用麦克风录制刚刚通过扬声器播放的内容？

> ID：15984770
> 
> 赞同：0
> 
> 时间：2013-04-13T05:57:00.267
> 
> 标签：audio, capture, playback, pcm, alsa

我正在尝试使用以下 ALSA API 录制刚刚向扬声器播放的内容：

```
snd_pcm_mmap_writei()
snd_pcm_mmap_readi() 
```

这两个函数在同一个线程中被一个接一个地调用。writei() 函数快速返回（我相信它会在播放缓冲区可用时返回），而 readi() 会返回直到捕获指定的样本。但捕获的样本并不是刚刚播出的。我猜ALSA不是双工模式，也就是说，它必须先完成播放，然后开始录制，它没有任何意义，只是点击。扬声器仍能正确播放声音。

所有硬件/软件参数均已正确设置。如果我只做音频捕捉，我会得到一个很好的声波。PCM 句柄以正常模式（非非阻塞，非异步）打开。

有人对如何使这项工作提出建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:14:16.193

您不需要使用这些`mmap`功能；正常的`writei`/`readi`电话就足够了。

要同时处理两个 PCM 流，请在单独的线程中运行它们，或者使用非阻塞模式，以便同一个事件循环可以处理两个设备。

您需要在播放数据之前填充播放缓冲区，并且只有在填充了捕获缓冲区后才能读取捕获数据，因此总体延迟是播放缓冲区大小加上捕获周期大小加上任何硬件延迟和声音传播延迟.

# python - 如何在不添加 '\n' 的情况下追加到文件？

> ID：15984773
> 
> 赞同：0
> 
> 时间：2013-04-13T05:58:03.860
> 
> 标签：python, file-io

我正在阅读并附加到一个文本文件，每次我的 Python 程序运行时都会打开和阅读该文件。它基本上是字符串的日志。问题是，当我最初写入空白文件时，我必须包含`action.write('\n')`才能在下一行打印下一个字符串。

但是，当我下次运行 Python 程序时通读该文件时，它会读取“\n”并将其连接到前一个元素，该元素被添加到列表中。

这是基本上发生的事情：

```
pc = ["121", "343", "565", "787"]

with open(r"C:\tt.txt", "r+") as act:
   curr=[]

   for row in act:
      if row == '\n':
         pass
      else:
         curr.append(row)

   for i in pc:
      act.write(i)
      act.write("\n")

print curr

>> curr = ['121\n', '343\n', '565\n', '787\n', '121\n', '343\n', '565\n', '787\n', '121\n', '343\n', '565\n', '787\n', '121\n', '343\n', '565\n', '787\n', '121\n', '343\n', '565\n', '787\n'] 
```

我真的很困惑如何解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T06:00:18.547

剥离线条：

```
for row in act:
    row = row.strip()
    if row:
        curr.append(row) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T07:08:53.657

只需从每行中删除最后一个字符

```
for row in act:
row = row[:-1]
if row:
    curr.append(row) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-13T06:00:26.260

您可以使用

```
for line in open(somefile):
    line = line.strip() 
```

用于删除尾随行结尾。

# facebook-graph-api - 使用 facebook API 生成一组朋友的图片

> ID：15984775
> 
> 赞同：0
> 
> 时间：2013-04-13T05:58:42.630
> 
> 标签：facebook-graph-api

我想使用他的 Facebook API 执行以下操作

1.  检索用户的好友列表
2.  选择此列表的一个子集（假设 5 个朋友）
3.  生成一张图片，将这个子集显示为给定宽度/高度的图片

执行 1) 和 2) 相当简单。但是您对执行步骤 3) 有任何想法吗？

非常感谢提前，

雨果

# php - 将 & 作为 javascript 中 url 值的一部分传递

> ID：15984777
> 
> 赞同：-1
> 
> 时间：2013-04-13T05:58:46.563
> 
> 标签：php

我有一个网址，例如：

```
<ul>
<?php
$sql = "select * from product";
$res = mysql_query($sql);
while($row = mysql_fetch_array($res))
{
?>
   <li> <a href="test.php?id=<?php $row['name']?>"><?php $row['name']?></a></li>
<?php
}
?>
</ul> 
```

当这里 $row['name'] 有“茶和咖啡”时，PHP 端：

```
$id = $_GET['id']; 
```

的`$id`值为**"Tea"**但我需要整个字符串为**"Tea & Coffee"**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T06:01:36.787

您需要对空格和 & 符号进行 URL 编码。

尝试这个：

```
test.php?id=tea+%26+coffee 
```

您可以在这里测试 URL 编码[http://www.w3schools.com/tags/ref_urlencode.asp](http://www.w3schools.com/tags/ref_urlencode.asp)。

> URL 编码 URL 只能使用 ASCII 字符集通过 Internet 发送。
> 
> 由于 URL 通常包含 ASCII 集之外的字符，因此必须将 URL 转换为有效的 ASCII 格式。
> 
> URL 编码将不安全的 ASCII 字符替换为“%”，后跟两个十六进制数字。URL 不能包含空格。URL 编码通常用 + 号替换空格。

引自[http://www.w3schools.com/tags/ref_urlencode.asp](http://www.w3schools.com/tags/ref_urlencode.asp)

[在http://en.wikipedia.org/wiki/Query_string#URL_encoding](http://en.wikipedia.org/wiki/Query_string#URL_encoding)阅读更多关于为什么需要对查询字符串进行 URL 编码的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T06:00:41.667

URL 对 & 符号和空格进行编码

[例如这里](http://meyerweb.com/eric/tools/dencoder/)

# ruby-on-rails - RoR：将多个循环组合成数组，并排列

> ID：15984783
> 
> 赞同：0
> 
> 时间：2013-04-13T06:00:27.127
> 
> 标签：ruby-on-rails, arrays, ruby-on-rails-3, loops

我是 Ruby on Rails 的新手，我试图弄清楚如何将查询组合成一个数组，按顺序排列它们，以便它们可以根据时间输出。

在我的控制器中，我有这个：

```
@tag_media_items = client.tag_recent_media('cats')
@location_media_items = client.location_recent_media('412421') 
```

在我看来，我有这个：

```
<% @tag_media_items.each do |media| %>
<img src="<%= media.images.thumbnail.url%>">
<% end%>

<% @location_media_items.each do |media| %>
<img src="<%= media.images.thumbnail.url%>">
<% end%> 
```

我还可以弄清楚它是由此创建的时间：

```
<%= media.created_time %> 
```

在每个循环上。

现在我正在学习如何将循环放入一个数组中，然后根据 created_item 对其进行排列？有一个简单的语法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T06:22:49.623

```
<% (@tag_media_items+@location_media_items).each do |media| %>
   <img src="<%= media.images.thumbnail.url%>">
<% end%> 
```

对于排序：

```
<%(@tag_media_items+@location_media_items).
        sort{|a,b| a.created_at <=> b.created_at}.
        each do |media| %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T06:42:27.150

如果它是相同的模型，我建议编写 1 个查询，而不是 2 个查询。

```
@media_items = client.recent_media_of_tag_and_location('cats', '412421') 
```

如果您仍然需要 2 个查询并进行排序，您可以这样做，

控制器：

```
@media_items = @tag_media_items | @location_media_items 
@sorted_items = @media_items.sort_by &:created_at 
```

看法：

```
<% @sorted_items.each do |media| %>
  <img src="<%= media.images.thumbnail.url%>">
<% end%> 
```

# asp.net - 关闭 html 表单导致列文本移动到 IE 中的下一行

> ID：15984784
> 
> 赞同：0
> 
> 时间：2013-04-13T06:00:29.717
> 
> 标签：asp.net, html, internet-explorer

我正在使用 VPASP 作为购物车，最近我注意到 IE 中的奇怪行为。我有按包装和按箱出售的产品。所以我让每个项目都有 2 个“订购”按钮。每个产品的工作方式是在 ASP 代码中设置表单的开头，然后运行一个 html 模板，在该模板中我创建了订购按钮和订购数量的空间。然后我必须发出`</form>`命令，以便我可以启动该案例的表格。这段代码工作得很好，问题不在于功能......问题是视觉上的。它的设置方式，我在项目的图片下有 4 列。第一列是那个项目的“特征”，第二列是“选项”，第三列是Pack Order按钮，第四列是Case Order按钮。问题是，`</form>`在 Pack Order 按钮之后的命令，第四列被踢到下一行。如果我删除该`</form>`命令，第四列将准确定位在它应该在的位置，但是购物车不再工作。

当然 Firefox 会忽略这一点代码并完美显示，但是当我转到 IE 时……失败了。[您可以通过访问该网站页面的链接来查看示例。](http://www.baitmasters.com/store/shopdisplayproducts.asp?id=31&cat=rigballyhoo)如果您在 Firefox 中访问该站点，那将是完美的，但也可以在 IE 中查看，您会看到我遇到的视觉问题。是否有一些技巧可以让 IE 在发出`</form>`命令后不将列推送到下一行？

这是我用来完成这项工作的代码示例（为了便于阅读，用一点伪代码缩短了一点）：

```
<table border="0" cellpadding="4" cellspacing="1" width="100%" align="center">
<tr>
<td class="al vt">
<form name="prodname" action="shopaddtocart.asp" method="post">
<input type="hidden" name="productid" value="10" />
<table width="100%" border="0" cellspacing="4" cellpadding="0">
<tr>
<td width="100%" align="left">
<strong>Product Title</strong>
    <table width="100%" border="0" cellspacing="2" cellpadding="2">
    <tr>
    <td width="100%" valign="top">
    <img src="product_image.jpg" border="0" alt="Image"><br />
        <div style="width: 100%; left: 0%; clear: both; float: left; overflow: hidden; position: relative;">
            <div style="right: 20%; float: left; width: 100%; position: relative;">
                <div style="right: 20%; float: left; width: 100%; position: relative;">
                    <div style="right: 30%; float: left; width: 100%; position: relative;">
                        <div class="column1">
                            Product Options
                        </div>
                        <div class="column2">
                            Product Features
                        </div>
                        <div class="column3">
                            <input class="txtfield" type="text" maxlength="4" size="3" value="1" name="quantity" />
                            <input class="submitbtn" type="submit" value=" Order " name="Order" />
                            </form> <!-- IF I REMOVE THIS THEN IE DISPLAYS CORRECTLY BUT CART STOPS WORKING -->
                        </div>
                        <div class="column4">
                            <form name="casename" action="shopaddtocart.asp" method="post">
                            <input type="hidden" name="productid" value="23">
                            <input class="txtfield" type="text" maxlength="4" size="3" value="1" name="quantity" />
                            <input class="submitbtn" type="submit" value=" Order " name="Order" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </td>
</tr>
</table>
</td>
</tr>
</table>
</td>
</tr>
</table>
</form></td></tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T06:45:34.503

多一点研究。问题似乎源于嵌套表单的方式。

见这里： [http ://www.w3.org/TR/2011/WD-html5-20110525/forms.html#the-form-element](http://www.w3.org/TR/2011/WD-html5-20110525/forms.html#the-form-element)

> 4.10.3 表单元素
> 
> 内容模型：
> 
> 流式内容，但没有表单元素后代。

如果您将上面的 html 粘贴到 jsfiddle 并点击 TidyUp，您会发现很多标签格式不正确。见这里：http: [//jsfiddle.net/Bppj9/](http://jsfiddle.net/Bppj9/)

如果您可以尝试这样的事情，它可能会有所帮助：

[http://jsfiddle.net/methuselah/rCtGd/](http://jsfiddle.net/methuselah/rCtGd/)

您应该关注的主要部分是清理列周围的包装代码：

```
#content-1 {
    float: left;
    width: 20%;
    background: #bfb;
}
#content-2 {
    float: right;
    width: 80%;
}
#content-2-1 {
    float: left;
    width: 55%;
    background: #ddf;
} 
```

此外，这些资源可以帮助您了解如何正确设置更多流体列：

*   [http://css-tricks.com/the-perfect-fluid-width-layout/](http://css-tricks.com/the-perfect-fluid-width-layout/)
*   [http://www.vanseodesign.com/css/fluid-layout-code/](http://www.vanseodesign.com/css/fluid-layout-code/)

我试图清理您的 HTML，以便标签也以正确的顺序关闭，但老实说，它处于一个非常粗糙的位置，值得使用上面的资源重新处理它。

```
<table border="0" cellpadding="4" cellspacing="1" width="100%" align="center">
    <tr>
        <td class="al vt">
            <form name="prodname" action="shopaddtocart.asp" method="post">
            <input type="hidden" name="productid" value="10" />
            <table width="100%" border="0" cellspacing="4" cellpadding="0">
                <tr>
                    <td width="100%" align="left">
                        <strong>Product Title</strong>
                        <table width="100%" border="0" cellspacing="2" cellpadding="2">
                            <tr>
                                <td width="100%" valign="top">
                                    <img src="product_image.jpg" border="0" alt="Image">
                                    <br />
                                    <div style="width: 100%; left: 0%; clear: both; float: left; overflow: hidden; position: relative;">
                                        <div style="right: 20%; float: left; width: 100%; position: relative;">
                                            <div style="right: 20%; float: left; width: 100%; position: relative;">
                                                <div style="right: 30%; float: left; width: 100%; position: relative;">
                                                    <div class="column1">
                                                        Product Options</div>
                                                    <div class="column2">
                                                        Product Features</div>
                                                    <div class="column3">
                                                        <input class="txtfield" type="text" maxlength="4" size="3" value="1" name="quantity" />
                                                        <input class="submitbtn" type="submit" value=" Order " name="Order" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
            </form>
            <div class="column4">
                <form name="casename" action="shopaddtocart.asp" method="post">
                <input type="hidden" name="productid" value="23">
                <input class="txtfield" type="text" maxlength="4" size="3" value="1" name="quantity" />
                <input class="submitbtn" type="submit" value=" Order " name="Order" />
                </form>
            </div>
        </td>
    </tr>
</table> 
```

# osx-mountain-lion - 我是否在这里重新启动/重新配置了每个 launchctl 守护程序？

> ID：15984785
> 
> 赞同：1
> 
> 时间：2013-04-13T06:00:29.840
> 
> 标签：osx-mountain-lion, daemons, launchctl

我不小心发出了以下命令：

```
launchctl load -w /System/Library/LaunchDaemons/ 
```

输出：

```
bind(): Address already in use
bind(): Address already in use
bind(): Address already in use
bind(): Address already in use
com.apple.ActivityMonitor: Already loaded
com.apple.afpfs_afpLoad: Already loaded
com.apple.afpfs_checkafp: Already loaded
com.apple.AirPlayXPCHelper: Already loaded
com.apple.AirPort.wps: Already loaded
com.apple.airportd: Already loaded
com.apple.airport.updateprefs: Already loaded
com.apple.alf: Already loaded
com.apple.AOSNotification-FMM: Already loaded
com.apple.appleprofilepolicyd: Already loaded
com.apple.apsd: Already loaded
com.apple.aslmanager: Already loaded
com.apple.audio.coreaudiod: Already loaded
com.apple.auditd: Already loaded
com.apple.authorizationhost: Already loaded
com.apple.autofsd: Already loaded
com.apple.automountd: Already loaded
com.apple.avbdeviced: Already loaded
com.apple.awacsd: Already loaded
com.apple.backupd: Already loaded
com.apple.blued: Already loaded
com.apple.bnepd: Already loaded
com.apple.bsd.dirhelper: Already loaded
com.apple.bsd.launchdadd: Already loaded
com.apple.cfprefsd.xpc.daemon: Already loaded
com.apple.cmio.AVCAssistant: Already loaded
com.apple.cmio.IIDCVideoAssistant: Already loaded
com.apple.cmio.VDCAssistant: Already loaded
com.apple.configd: Already loaded
com.apple.CoreRAID: Already loaded
com.apple.coreservices.appleevents: Already loaded
com.apple.coreservices.appleid.passwordcheck: Already loaded
com.apple.coreservicesd: Already loaded
com.apple.corestorage.corestoraged: Already loaded
com.apple.corestorage.corestoragehelperd: Already loaded
com.apple.coresymbolicationd: Already loaded
com.apple.cvmsServ: Already loaded
com.apple.DiagnosticReportCleanUp: Already loaded
com.apple.diskarbitrationd: Already loaded
com.apple.diskmanagementd: Already loaded
com.apple.distnoted.xpc.daemon: Already loaded
com.apple.dpd: Already loaded
com.apple.dspluginhelperd: Already loaded
com.apple.DumpGPURestart: Already loaded
com.apple.DumpPanic: Already loaded
com.apple.dvdplayback.setregion: Already loaded
com.apple.dynamic_pager: Already loaded
com.apple.eapolcfg_auth: Already loaded
com.apple.efilogin-helper: Already loaded
com.apple.emond.aslmanager: Already loaded
com.apple.emond: Already loaded
com.apple.familycontrols: Already loaded
com.apple.FileCoordination: Already loaded
com.apple.findmymacd: Already loaded
com.apple.findmymacmessenger: Already loaded
com.apple.fontd: Already loaded
com.apple.fontmover: Already loaded
com.apple.FontWorker: Already loaded
com.apple.fseventsd: Already loaded
com.apple.geod: Already loaded
com.apple.gkreport: Already loaded
com.apple.gssd: Already loaded
com.apple.hdiejectd: Already loaded
com.apple.hidd: Already loaded
com.apple.IFCStart: Already loaded
com.apple.installd: Already loaded
com.apple.kcproxy: Already loaded
com.apple.Kerberos.digest-service: Already loaded
com.apple.Kerberos.kadmind: Already loaded
com.apple.Kerberos.kcm: Already loaded
com.apple.Kerberos.kdc: Already loaded
com.apple.Kerberos.kpasswdd: Already loaded
com.apple.KernelEventAgent: Already loaded
com.apple.kextd: Already loaded
com.apple.kuncd: Already loaded
com.apple.locate: Already loaded
com.apple.locationd: Already loaded
com.apple.lockd: Already loaded
com.apple.locum: Already loaded
com.apple.logind: Already loaded
com.apple.loginwindow: Already loaded
com.apple.ManagedClient: Already loaded
com.apple.mbicloudsetupd: Already loaded
com.apple.mdmclient.daemon: Already loaded
com.apple.mDNSResponder: Already loaded
com.apple.mDNSResponderHelper: Already loaded
com.apple.metadata.mds: Already loaded
com.apple.metadata.mds.scan: Already loaded
com.apple.metadata.mds.spindump: Already loaded
com.apple.msrpc.lsarpc: Already loaded
com.apple.msrpc.mdssvc: Already loaded
com.apple.msrpc.netlogon: Already loaded
com.apple.msrpc.srvsvc: Already loaded
com.apple.msrpc.wkssvc: Already loaded
com.apple.netauth.sys.auth: Already loaded
com.apple.netauth.sys.gui: Already loaded
com.apple.netbiosd: Already loaded
com.apple.networkd: Already loaded
com.apple.networkd_privileged: Already loaded
com.apple.NetworkDiagnostics: Already loaded
com.apple.nlcd: Already loaded
com.apple.newsyslog: Already loaded
com.apple.nfsconf: Already loaded
com.apple.nfsd: Already loaded
com.apple.nis.ypbind: Already loaded
com.apple.notifyd: Already loaded
com.apple.ocspd: Already loaded
com.apple.opendirectoryd: Already loaded
com.apple.PCIELaneConfigTool: Already loaded
com.apple.periodic-daily: Already loaded
com.apple.periodic-monthly: Already loaded
com.apple.periodic-weekly: Already loaded
com.apple.pfctl: Already loaded
com.apple.platform.ptmd: Already loaded
com.apple.powerd: Already loaded
com.apple.preferences.timezone.admintool: Already loaded
com.apple.preferences.timezone.auto: Already loaded
com.apple.printtool.daemon: Already loaded
com.apple.racoon: Already loaded
com.apple.RemoteDesktop.PrivilegeProxy: Already loaded
com.apple.RemotePairTool: Already loaded
com.apple.ReportCrash.Root: Already loaded
com.apple.revisiond: Already loaded
com.apple.RFBEventHelper: Already loaded
com.apple.rpcbind: Already loaded
com.apple.rpmuxd: Already loaded
com.apple.sandboxd: Already loaded
com.apple.SCHelper: Already loaded
com.apple.scsid: Already loaded
com.apple.secd: Already loaded
com.apple.security.syspolicy: Already loaded
com.apple.SecurityAgent: Already loaded
com.apple.securityd: Already loaded
com.apple.ServerPerfLog.aslmanager: Already loaded
com.apple.ServerPerfLog: Already loaded
com.apple.shutdown_monitor: Already loaded
com.apple.sleepservicesd: Already loaded
com.apple.smb.preferences: Already loaded
com.apple.softwareupdatecheck.initial: Already loaded
com.apple.softwareupdatecheck.periodic: Already loaded
com.apple.spindump: Already loaded
com.apple.spindump_symbolicator: Already loaded
com.apple.stackshot: Already loaded
com.apple.statd.notify: Already loaded
com.apple.storereceiptinstaller: Already loaded
com.apple.suhelperd: Already loaded
com.apple.syslogd: Already loaded
com.apple.sysmond: Already loaded
com.apple.systemkeychain: Already loaded
com.apple.systempreferences.install: Already loaded
com.apple.systempreferences.writeconfig: Already loaded
com.apple.SystemStarter: Already loaded
com.apple.taskgated-helper: Already loaded
com.apple.taskgated: Already loaded
com.apple.TrustEvaluationAgent.system: Already loaded
com.apple.ucupdate.plist: Already loaded
com.apple.uninstalld: Already loaded
com.apple.unmountassistant.sysagent: Already loaded
com.apple.usbmuxd: Already loaded
com.apple.UserEventAgent-System: Already loaded
com.apple.UserNotificationCenter: Already loaded
com.apple.var-db-dslocal-backup: Already loaded
com.apple.vsdbutil: Already loaded
com.apple.warmd: Already loaded
com.apple.webdavfs_load_kext: Already loaded
com.apple.wifid: Already loaded
com.apple.WindowServer: Already loaded
com.apple.xpcd: Already loaded
com.apple.xprotectupdater: Already loaded
com.vix.cron: Already loaded
org.apache.httpd: Already loaded
org.cups.cupsd: Already loaded
org.ntp.ntpd: Already loaded
org.postfix.master: Already loaded 
```

我是否启动或配置了该 LaunchDaemons 目录中的每个守护程序？如果是，我如何恢复以前的状态，是否有 Lion 的默认启动启动守护进程列表？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T09:23:43.713

**不。**

> 在系统启动并且内核运行之后，`launchd`从 /System/Library/LaunchDaemons/ 和 /Library/LaunchDaemons/ 中的属性列表文件中加载每个按需启动系统级守护程序的参数。

```
com.apple.ActivityMonitor: Already loaded // This means daemon is already loaded 
```

# java - Java I/O 中的“Stream”和“Buffer”到底是什么意思？

> ID：15984789
> 
> 赞同：96
> 
> 时间：2013-04-13T06:01:14.123
> 
> 标签：java, buffer, bufferedreader

我刚刚了解了使用`BufferedReader`.

我想知道这个词`Stream`和的确切含义是`Buffer`什么？

这行代码还有什么作用：

```
BufferedReader br=new BufferedReader(new InputStreamReader(System.in)); 
```

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2013-04-13T06:06:03.853

Java 有两种用于输入和输出 (I/O) 的类：**流**和**读取器/**写入器。

流（`InputStream`以及`OutputStream`扩展这些的所有内容）用于从文件、网络或任何其他设备读取和写入二进制数据。

Readers 和 writers 用于读取和写入文本（字符）。它们是流之上的一层，使用[字符编码](http://en.wikipedia.org/wiki/Character_encoding)将二进制数据（字节）转换为字符并返回。

从磁盘逐字节读取数据效率非常低。加快速度的一种方法是使用缓冲区：不是一次读取一个字节，而是一次读取几千个字节，然后将它们放在内存中的缓冲区中。然后就可以一一查看缓冲区中的字节了。

Oracle 的[关于 I/O](http://docs.oracle.com/javase/tutorial/essential/io/)的 Java 教程详细解释了它。

查看您提供的代码行：

```
BufferedReader br=new BufferedReader(new InputStreamReader(System.in)); 
```

`System.in`是一个`InputStream`。您创建一个`InputStreamReader`从`System.in`. 然后你把它包装在一个`BufferedReader`.

所以，最后，你有一个`BufferedReader`从一个读入的`InputStreamReader`读入`System.in`。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-08-18T12:07:06.890

**缓冲：**

它是*物理内存存储的一个****区域***，用于在数据从一个地方移动到另一个地方时临时存储数据。在大多数情况下，*物理内存存储*将是**RAM**（随机存取存储器）。

 ****但是从这个问题的上下文来看，*缓冲区*是在读取/写入数据时使用的。在将数据从一个地方移动到另一个地方时不需要使用它。

**缓冲区示例：**如果您的系统有 4 GB 的 RAM，则系统可以为*Buffer*分配 4 KB 的内存（RAM） 。KB - 千字节，GB - 千兆字节

**[I/O 流](https://docs.oracle.com/javase/tutorial/essential/io/streams.html)（或）流：**

> *I/O Stream*表示输入源或输出目的地。一个流可以表示许多不同类型的源和目标，包括磁盘文件、设备、其他程序和内存阵列。

**I/O 表示输入/输出。**

因此，输入流可以是磁盘文件、网络连接等输入源。

并且，Output Stream 可以是一个输出目的地，如磁盘文件、网络连接等。

**根据[JAVA 官方文档](https://docs.oracle.com/javase/tutorial/essential/io/index.html)，Streams 有 3 种类型。**

1.  [字节流](https://docs.oracle.com/javase/tutorial/essential/io/bytestreams.html)（读取或写入字节）
2.  [字符流](https://docs.oracle.com/javase/tutorial/essential/io/charstreams.html)（读取或写入字符）
3.  [缓冲流（从](https://docs.oracle.com/javase/tutorial/essential/io/buffers.html)*缓冲区*读取或写入以提高效率）

**字节流：**

> 它们执行 8 位字节的输入和输出。所有字节流类都来自[InputStream](https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html)和[OutputStream](https://docs.oracle.com/javase/8/docs/api/java/io/OutputStream.html)。

字节输入流类以**原始字节**的形式获取输入。字节输出流类以**原始字节**的形式提供输出。

`InputStream`-**直接已知的子类**

```
AudioInputStream, ByteArrayInputStream, FileInputStream, FilterInputStream, InputStream, ObjectInputStream, PipedInputStream, SequenceInputStream, StringBufferInputStream. 
```

`OutputStream`-**直接已知的子类**

```
ByteArrayOutputStream, FileOutputStream, FilterOutputStream, ObjectOutputStream, OutputStream, PipedOutputStream 
```

**字符流：** 它们是字节流之上的一层。它们使用字符编码将字节（二进制数据）转换为字符，将字符转换为字节。

> 所有字符流类都来自[Reader](https://docs.oracle.com/javase/8/docs/api/java/io/Reader.html)和[Writer](https://docs.oracle.com/javase/8/docs/api/java/io/Writer.html)。

`Reader`- 直接已知的子类

```
BufferedReader, CharArrayReader, FilterReader, InputStreamReader, PipedReader, StringReader 
```

`Writer`- 直接已知的子类

```
BufferedWriter, CharArrayWriter, FilterWriter, OutputStreamWriter, PipedWriter, PrintWriter, StringWriter 
```

**字节流和字符流**使用*无缓冲 I/O*。

> 这意味着每个读取或写入请求都由底层操作系统直接处理。这会使程序的效率大大降低，因为每个这样的请求通常都会触发磁盘访问、网络活动或其他一些相对昂贵的操作。为了减少这种开销，Java 平台实现了缓冲 I/O 流。

**缓冲流：**

> 缓冲输入流从称为**缓冲区的内存区域****读取数据**；仅当缓冲区为空时才调用本机输入 API。
> 
>  **类似地，缓冲输出流**将数据写入缓冲区**，并且仅当缓冲区已满时才调用本机输出 API。**

 ****程序可以使用包装习语将非*缓冲*流转换为*缓冲流，其中将非**缓冲*流对象传递给*缓冲*流类的构造函数。**

例子：

```
inputStream = new BufferedReader(new FileReader("xanadu.txt"));
outputStream = new BufferedWriter(new FileWriter("characteroutput.txt")); 
```

有 4 个缓冲流类用于包装非缓冲流：

要创建***缓冲*** **字节流**，请使用`BufferedInputStream`和`BufferedOutputStream`类。

要创建***缓冲*** **字符流**，请使用`BufferedReader`和`BufferedWriter`类。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-04-13T06:06:44.580

好吧，对于开始研究 java.io 包的人来说，这是一个问题。要回答您的问题，术语 InputStreamReader 和 BufferedReader 仅代表 java 对象（它们没有什么特别之处），但它们是为 io 操作创建的，例如从文件、对象等不同的输入/输出读取和写入

现在让我们来排队

```
BufferedReader br=new BufferedReader(new InputStreamReader(System.in)); 
```

InputStreamReader 是读取字节输入流的类。但是读取每个字节是昂贵的操作，所以我们将它包装在 BufferedReader 周围以使其缓冲（这是装饰器模式）

因此，甚至在您开始读取之前会发生什么，bufferedReader 将在寄存器中存储一些字节块以及当您执行读取操作时。它将从该位置读取，这比从控制台/文件读取便宜得多但是对于 InputStreamReader，当您每次执行磁盘访问操作时执行读取操作

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-13T06:06:21.140

流是在点之间传递的连接和实际信息。缓冲区是一个存储容器，它存储部分或全部流数据并将其馈送到输出设备。

当然，关键是如果流的速度超过了显示数据所需的数据速率，那么输出就会暂停。缓冲区可以防止这种情况。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-25T05:07:55.277

缓冲区是内存中的一部分，用于存储来自外围设备的数据流。然后从这个缓冲区收集这个数据流并将其存储在变量中。流可以定义为连续的数据流。

术语“输入/输出”只不过是指将数据移入和移出缓冲区。一直牢记在心。进程通过请求操作系统从缓冲区中排出数据（写操作）或用数据填充缓冲区（读操作）来执行 I/O。
[数据如何移动的逻辑图](https://i.stack.imgur.com/pZwS2.png)

简单来说，想象一下当您在键盘上键入数据时，数据通过管道（**流**）移动到缓冲区，然后从缓冲区移动到磁盘（写操作）。同样，当数据从磁盘移动到**缓冲区**并从缓冲区移动到控制台时，它就是读取操作。

您可以阅读链接以获得更好的理解。希望能帮助到你！。
[什么是 Java 中的缓冲区在](https://www.quora.com/What-is-a-buffer-in-Java)
[此处输入链接描述](https://howtodoinjava.com/java/io/how-java-io-works-internally-at-lower-level/)******

# ksh - 将 jil 错误输出重新编辑到日志文件

> ID：15984794
> 
> 赞同：2
> 
> 时间：2013-04-13T06:02:11.597
> 
> 标签：ksh, io-redirection, autosys

我正在使用 autosys 11.3 ..

我创建了一个*.ksh*文件和一个*jil*文件，如下所示：

## .KSH 文件（test.ksh）：

```
echo "test" 
```

## .jil 文件（test.jil）

```
insert_job: test11   job_type: CMD
machine: ravi
owner: rchalla
std_out_file: /export/home/rchalla/test.out
std_err_file: /export/home/rchalla/test.err 
```

当我执行上面的*jil*文件时，我看到了这个错误：

```
$ jil < test.jil > test1.log
CAUAJM_E_18936 Required JIL keyword "command" is missing.
CAUAJM_E_10302 Database Change WAS NOT successful.
CAUAJM_E_50198 Exit Code = 1 
```

但是这个错误没有重定向到 test1.log 文件。

谁能取悦我将执行的jil错误日志重定向到日志文件的过程是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:36:12.600

要将错误输出重定向到文件，您需要将 std err (2) 重定向到 std out (1)：

```
jil < test.jil >test1.log 2>&1 
```

或明确指定您正在重定向 std err (2)：

```
jil < test.jil 2>test1.log 
```

或将输出重定向到不同的文件：

```
jil < test.jil >stdout.log 2>stderr.log 
```

# html - 覆盖foundation.css的问题

> ID：15984795
> 
> 赞同：-1
> 
> 时间：2013-04-13T06:02:16.923
> 
> 标签：html, css, stylesheet, zurb-foundation

我在使用基础的 css 时将自己的类添加到另一个样式表中的 index.html，但是我的一些样式没有显示出来，例如：html 中的 class="topNav"：

```
<header class="row topNav">
    <div class="large-12 columns">
        <h3>Logo Name</h3>
    </div>
</header> 
```

我在标题中的样式：

```
<link rel="stylesheet" href="css/normalize.css" />
<link rel="stylesheet" href="css/main.css" />
<link rel="stylesheet" href="css/foundation.css" />
<link rel="stylesheet" href="css/font.css" /> 
```

我想在 css 中实现什么（更改标题的颜色）：

.topNav { 背景颜色：#000; } /*这不起作用*/

路径或文件结构没有问题。另外，我也在使用基础4。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T17:43:31.157

要覆盖基础 css，请将您的自定义 css 脚本放在基础 css 下。

```
<link rel="stylesheet" href="css/normalize.css" />
<link rel="stylesheet" href="css/foundation.css" />
<link rel="stylesheet" href="css/main.css" />
<link rel="stylesheet" href="css/font.css" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T06:12:46.063

如果您现在只*需要*覆盖它，请包含一条[`!important`](http://www.w3.org/TR/CSS21/cascade.html#important-rules)规则：

```
.topNav {
background-color: #000 !important;
} 
```

但是您应该发布相关的 CSS，以便您可以提出一个更具体的选择器，因为它非常不好使用，`!important`尤其是如果您滥用它.. 最好找出导致冲突的原因

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-21T18:32:45.970

对于可能遇到相同问题的任何人 - 我也是，直到我发现如果您下载 Foundation 4 作为默认版本，您可以覆盖 app.css 就好了。但是如果你下载了Foundation 4的定制版本，很多特殊的组件比如按钮不会使用app.css覆盖foundation.css。它应该在某个地方的基金会文件上说——它会为每个人节省很多时间！

# asp.net - 澄清 web.config 安全性以拒绝 IP 地址

> ID：15984797
> 
> 赞同：2
> 
> 时间：2013-04-13T06:02:40.490
> 
> 标签：asp.net, web-config

有人可以帮我理解下面的 system.webServer 配置部分。基本上，

1.  子网掩码有什么作用？
2.  如果我们不指定子网掩码会发生什么？
3.  如何添加 IP 地址范围？

> 添加允许=”true” ipAddress=”192.168.100.1” 子网掩码=”255.255.0.0

?

[http://msdn.microsoft.com/en-us/library/windowsazure/jj154098.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj154098.aspx)

如何应用某些 IP 地址并阻止某些 IP 地址？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T06:08:48.667

**子网掩码**将IP 地址分为网络地址和主机地址。

> 子网掩码有什么作用？

`subnetMask`用于阻止/允许网络中的 IP 地址范围：

例如：`<add ipAddress="83.116.119.0" subnetMask="255.255.255.0"/>`

用于阻止网络`83.116.119.0`到`83.116.119.255`IP。

> 如果我们不指定子网掩码会发生什么？

如果您不指定子网掩码，例如：`<add ipAddress="83.116.19.53"/>` 它只会阻止一个 IP。

> 如何添加 IP 地址范围？

您可以查看示例范围来回答您的问题：

```
<add ipAddress="1.2.3.0" subnetMask="255.255.255.0"/>     <!--blocks network 1.2.3.0 to 1.2.3.255-->                
<add ipAddress="1.2.0.0" subnetMask="255.255.0.0"/>     <!--blocks network 1.2.0.0 to 1.2.255.255-->                
<add ipAddress="1.0.0.0" subnetMask="255.0.0.0"/>     <!--blocks network 1.0.0.0 to 1.255.255.255--> 
```

要阻止所有 IP，但列出的 IP 除外：

```
<ipSecurity allowUnlisted="true"> 
```

# java - Java-适配器设计模式实现变体

> ID：15984802
> 
> 赞同：1
> 
> 时间：2013-04-13T06:03:29.850
> 
> 标签：java, design-patterns, adapter

我是设计模式主题领域的新手，并且热衷于了解设计模式的实现变体。我在网络上的众多教程中看到了适配器设计模式中适配器类的以下结构。（以下代码示例摘自维基百科）

```
public class ClassAFormat1 implements StringProvider {
    private ClassA classA = null;

    public ClassAFormat1(final ClassA A) {
        classA = A;
    }

    public String getStringData() {
        return format(classA.toString());
    }
} 
```

如果我没记错的话，ClassA 是适配器，而 StringProvider 是此示例中的目标（此处未提供类）。

我通过在target的方法中定义和初始化adaptee类对上面的代码做了一个小的调整。我知道它很奇怪，但想知道它是否仍然属于适配器设计模式。

```
public class ClassAFormat1 implements StringProvider {

    public String getStringData() {

               ClassA classA = new ClassA();
        return format(classA.toString());
    }
} 
```

上面的适配器类是否按照适配器设计模式的指导方针编写的？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T06:13:28.373

适配器的目的是能够将对象视为其他类的实例。
在您提供的示例中，`ClassA`可以`StringProvider`简单地通过使用`new ClassAFormat1(a)`where`a`的 type is来“处理”实例`ClassA`。

通过您添加的更改，您不能采用不同的实例`ClassA`并使它们表现为`StringProvider`. 在这种情况下`ClassAFormat1`，不能用作从`ClassA`to的适配器`StringProvider`（因为您不能给它任何实例`ClassA`并使其表现得像`StringProvider`.

# google-chrome-extension - 具有多个子域的国际化

> ID：15984804
> 
> 赞同：1
> 
> 时间：2013-04-13T06:03:47.377
> 
> 标签：google-chrome-extension, internationalization, locale, google-chrome-app

我正在 Chrome App Store 中为我的应用发布多种语言。

我正在尝试发布我的应用程序，以便它根据语言将 Chrome App Story 语言版本链接到我们的子域。

例子：

```
//in manifest.json:
  "name": "__MSG_appName__",
  "description": "__MSG_appDesc__",
  "default_locale": "en",

//in _locales/en/messages.json:
{
  "appName": {
    "message": "My App",
    "description": "The title of the application, displayed in the web store."
  },
  "appDesc": {
    "message": "This app does something awesome.", 
    "description":"The description of the application, displayed in the web store."
  }

  >>>> THIS LANGUAGE SHOULD USE URL - EN.MYDOMAIN.COM

}

//in _locales/de/messages.json:
{
  "appName": {
    "message": "My Application German"
  },
  "appDesc": {
    "message": "This application does something brilliant in German."
  }

  >>>> THIS LANGUAGE SHOULD USE URL - DE.MYDOMAIN.COM

} 
```

* * *

非常感谢所有支持。如何让 Chrome App Store 根据语言重定向到正确的语言环境子域 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T21:48:44.363

“应该使用 URL”是什么意思？您是托管应用程序还是打包应用程序？如果您指的是托管应用程序，请参阅[https://code.google.com/p/chromium/issues/detail?id=85034](https://code.google.com/p/chromium/issues/detail?id=85034)以及由此产生的代码更改，示例如下：[https://codereview.chromium。 org/9421010/diff/6001/chrome/test/data/extensions/manifest_tests/launch_local_path_localized.json](https://codereview.chromium.org/9421010/diff/6001/chrome/test/data/extensions/manifest_tests/launch_local_path_localized.json)

```
{
   "name": "test",
   "version": "1",
   "default_locale": "en",
   "app": {
     "launch": {
       "local_path": "__MSG_local_launch_path__"
     }
   }
} 
```

# html - 如何在互联网上发布网站，以便只有被推荐的人才能访问它

> ID：15984807
> 
> 赞同：0
> 
> 时间：2013-04-13T06:04:26.127
> 
> 标签：html, facebook, web

这个问题可能适用于这里的 Web 开发人员。

**是否有现成的解决方案可用于在互联网上向极少数受众发布网站。**

我想将我的网站发布给少数人，也许是我的一些朋友和他们在世界不同地区的朋友。而且，他们最多可以推荐 10 人。我想**通过 facebook**和电子邮件推荐工作。

我想一开始就将它发布给更少的人，一旦我解决了规模和性能问题——如果有的话，那么我想向公众发布。

**问题细节：** 如何仅向受限或推荐用户发布网站。即只有被推荐的人可以登录（使用他们的电子邮件或脸书）并使用它。是否有现成的解决方案可用（我已准备好为此付费）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T06:41:32.937

我会使用基本身份验证（对于 Apache： http: [//www.apacheweek.com/features/userauth](http://www.apacheweek.com/features/userauth)，对于 IIS：[http](http://www.authenticationtutorial.com/tutorial/basic.htm) ://www.authenticationtutorial.com/tutorial/basic.htm ）

这样，您将身份验证机制留给浏览器/服务器，因此您确保不会留下任何安全漏洞。

如果您无权访问服务器配置，那么您需要一个**服务器端**身份验证页面（JavaScript 在这里将无用，安全方面），一旦您输入正确的凭据，它将创建一个会话令牌，然后在每个网页上您有，您需要在显示任何内容之前检查该会话令牌。

如果您只能使用 HTML 和 JS，那么您就不走运了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T06:30:50.197

尝试简单地为帐户创建一个登录功能，作为管理员，您必须批准每个新用户。这样，您可以完全控制允许人们使用您的网站。一个简单的谷歌搜索将向您展示使用 php 和数据库执行此操作的许多方法。

# php - 如何更改 php 回显的内容

> ID：15984808
> 
> 赞同：1
> 
> 时间：2013-04-13T06:04:32.660
> 
> 标签：php, shell

我正在编写一个 PHP 脚本，它将在`myfile.php`.
我想显示一个进度条，它会像这样随时间变化：

```
[------]

[*-----]

[****--] 
```

我不知道这是否是做这种事情的最佳实践，但我想用一个简单的来做`echo`，并且外壳中进度条的位置不变。

完成后，我想删除整个加载内容。

一般来说，我怎样才能改变我已经`echo`编辑过的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T06:08:07.233

您需要使用的是 ANSI 转义序列。

StackOverflow 上的这个问题和答案涵盖了它，你应该能够根据你的需要调整它，看看：[更新命令行输出，即进度](https://stackoverflow.com/questions/5265288/update-command-line-output-i-e-for-progress)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T06:16:03.097

`chr(8)`是退格字符。通过一些数学运算，您可以打印足够多的数据以将光标移回栏的开头，并将新数据打印在您之前打印的位置之上。

只是不要在栏的末尾打印换行符。

问题在于：如果您对输出进行任何类型的文本捕获，它会将这些文本提取到捕获的文本中，但在控制台窗口中看起来会很好

# ios6 - 为什么不执行 audioPlayerDidFinishPlaying

> ID：15984811
> 
> 赞同：0
> 
> 时间：2013-04-13T06:04:50.133
> 
> 标签：ios6, storyboard, avaudioplayer

我有这段音频播放器代码，但我不知道为什么没有执行 audioPlayerDidFinishPlaying。

这是我的 audioplayer.m 文件中的部分代码

```
- (void)viewDidLoad {
[super viewDidLoad];
NSError* e = nil;
self.player = [[AVPlayer alloc] initWithURL:self.contentURL];
if(e)
{
    NSLog(@"Detected error(%@)",e);
}

[self.playButton  setImage:[UIImage imageNamed :@"Pause_40_40.png"] forState:UIControlStateNormal] ;
[self.playButton addTarget:self action:@selector(stop) forControlEvents:UIControlEventTouchUpInside];

isPlaying = true;

//Title of Music Screen
//self.title = titleOfTheSong;
//self.title = @"A Fixed Title";

MPVolumeView * volmueView = [[MPVolumeView alloc] initWithFrame:CGRectMake(60, 323, 200, 23)];
volmueView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleBottomMargin;
[self.view addSubview:volmueView];

[[AVAudioSession sharedInstance] setDelegate:self];
e = nil;
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:&e];
NSLog(@"Error: %@", e);

posUpdateTimer =  [NSTimer scheduledTimerWithTimeInterval:.1 target:self selector:@selector(timeCounterUpdate) userInfo:self.player repeats:YES];
[self timeCounterUpdate2:self.positionSlider.value];
[self.player play];

}

- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag
{
NSLog(@"Finished");
if (flag == NO){
    return;
}

[self.player pause];
[self.navigationController popViewControllerAnimated:YES];
} 
```

我在 viewDidload 中将 avplayer 的名称设置为 player，然后对其进行检查，但它似乎仍然没有被调用

音频停止播放，但似乎仍在运行当前位置值确实停止了，但如果我暂停它然后播放它，按钮仍然显示好像音频仍处于播放模式，当前位置只是继续计数通过假定的结束文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T00:50:46.207

我遇到的问题的答案实际上是由于以前的程序员解决了这个问题。他错误地尝试使用`AVAudioPlayer`播放非本地但需要从 URL 检索的音频文件。`AVPlayer`因此，他将确实允许但留在旧不相关代码中的代码迁移到其中。我错误地看到了代码，并认为那里有正确的方法，并且对它没有运行的事实感到困惑。能够结束播放文件是`AVAudioPlayer`他留下的功能。从那以后，我使用了正确的编码方法来实现我想要的。

希望这会导致对我的分数的负面标记被删除，因为代码之前运行但没有我正在寻找的功能，我错误地认为那部分代码是有效的，而实际上它不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T06:08:29.287

因为 1\. 你不使用 an `AVAudioPlayer`but an `AVPlayer`2\. 你没有设置音频播放器对象的委托。

# mysql - 将行动态添加到 SQL 结果集中

> ID：15984812
> 
> 赞同：1
> 
> 时间：2013-04-13T06:04:54.053
> 
> 标签：mysql, sql, stored-procedures

我写了一个 SP 来检索结果集。因此，以下 SQL 部分将为我提供我想要的结果集：

```
SELECT *
FROM `temp_table` JOIN `mytable` ON `mytable_ID` = `temp_table_tmp_id`
WHERE CEILING(`tmp_idx`/int_page_size) = p_page_no 
```

现在，我需要在上述结果集中添加一个动态行，因此，我尝试了以下方法：

```
SELECT *
FROM `temp_table` JOIN `mytable` ON `mytable_ID` = `temp_table_tmp_id`
WHERE CEILING(`tmp_idx`/int_page_size) = p_page_no
UNION ALL
SELECT DISTINCT `ID`, `temp_table_tmp_id`,`Name`, 100, `Type`,`Description`
ORDER BY `tmp_idx`; 
```

但是，对于我在“UNION ALL”之后的 SELECT 语句中定义的每个字段，这都会产生“'字段列表'中的未知列 'tmp_idx'”错误。我已将“100”作为应在结果集中指示的值。我希望这对我想要实现的目标足够清楚。请让我知道如何纠正/实现这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T07:35:18.027

尝试使用撇号（即'）而不是反引号（`）来分隔动态行中的列标题。此外，您必须将所有数字列转换为基本查询中的格式化字符串。

要控制顺序，以便强制人工行出现在最后，请添加另一列`sequence`，其硬编码值为 0 用于数据行，硬编码值为 1 用于动态行。然后在 ORDER BY 的前面添加这个新列`sequence`。（在某些 SQL 方言中，需要通过序号而不是名称来标识此列，或者添加包含 order by 子句的包装查询。）

# iphone - UIbutton 未在 UITableViewCell 中更新其标记值

> ID：15984816
> 
> 赞同：0
> 
> 时间：2013-04-13T06:05:30.217
> 
> 标签：iphone, ipad, uitableview, uibutton, xcode4.5

我有一个表格视图，我在其中加载一些 UIButtons 并给它们动态标签。但是标签 = 0 没有为 UIButton 更新。没看懂哪里错了。。。

```
int i=-1;
    @synthesize......

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

     btnTemp = [[UIButton alloc]initWithFrame:CGRectMake(10,lblName.frame.origin.y+lblName.frame.size.height+3,17, 17)];     
     [btnTemp addTarget:self action:@selector(btnClicked:) forControlEvents:UIControlEventTouchUpInside];
     btnTemp.contentHorizontalAlignment = UIControlContentHorizontalAlignmentLeft;
    [btnTemp setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
     btnTemp.titleLabel.font =[UIFont systemFontOfSize:14.f];
     btnTemp.tag=++i;
     return cell;

} 
```

但是第一次进入这个方法 UIButtons 标签值没有更新为 0。

```
-(IBAction) btnClicked:(UIButton *) sender{

    UIButton *button = (UIButton *)sender;
    NSLog(@"%d", [button tag]);
    UIButton  *btnTemp = (UIButton*)[cell viewWithTag:0]; //Here UIButton is being converted to UItableViewCell  and getting error.
   [buttonsinaSection addObject:btnTemp];
} 
```

我哪里错了..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T06:41:16.290

当你写：

```
 btnTemp.tag=++i; 
```

对于每个单元格 btnTemp 的标签变为 0。

所以你应该写：

```
 btnTemp.tag=indexPath.row; 
```

和，

```
 UIButton  *btnTemp = (UIButton*)[cell viewWithTag:0]; 
```

会给你错误，因为`[cell viewWithTag:0]`方法不能在**cellForRowAtIndexPath 之外调用：**

```
-(void) btnClicked:(UIButton *) sender
{
  UIButton *button = (UIButton *)sender;
  [buttonsinaSection addObject:button];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T06:16:47.067

```
-(void) btnClicked:(UIButton *) sender
{
    NSLog(@"%d", [sender tag]);
    [buttonsinaSection addObject:sender];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

     btnTemp = [[UIButton alloc]initWithFrame:CGRectMake(10,lblName.frame.origin.y+lblName.frame.size.height+3,17, 17)];     
     [btnTemp addTarget:self action:@selector(btnClicked:) forControlEvents:UIControlEventTouchUpInside];
     btnTemp.contentHorizontalAlignment = UIControlContentHorizontalAlignmentLeft;
    [btnTemp setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
     btnTemp.titleLabel.font =[UIFont systemFontOfSize:14.f];
     btnTemp.tag=indexpath.row;
     return cell;

} 
```

**嘿，在 btnClicked 操作中，您再次使用 ViewWithTag:0.. 因此，默认情况下，在 View 上，每个对象都将具有标签 = 0.. 因此，您将在 btnClicked 中获得按钮实例（UIButton * ) 说**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T06:25:31.170

默认值为`tag`0。这意味着视图层次结构中的每个视图都有一个`tag`0，除非有什么改变它。这包括您`UITableView`和`UITableViewCell`该表视图中的每个人。因此，例如，当您调用`[cell viewWithTag:0]`a`UITableViewCell`时，单元格将返回自身，除非您将单元格的值更改为`tag`0 以外的值。

尝试使用`tag`值 0 来查找特定按钮或任何其他视图根本不可行，除非您对视图层次结构有非常密切的控制。如果您使用`UITableView`or `UITableViewCell`，则您没有足够的控制权，因为这些视图中的每一个都有私有子视图，其`tag`值很可能为 0。

# c++ - 交换 char 元素中的半字节

> ID：15984817
> 
> 赞同：2
> 
> 时间：2013-04-13T06:05:34.453
> 
> 标签：c++, c

char 元素中的半字节是什么？

我们如何交换它们？

任何人都可以用一个例子来解释半字节的交换：

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T06:07:38.597

半字节（或 nybbles，类似于字节与咬）是 4 位块`char`。

您可以将它们交换为：

```
c = ((c & 0x0F) << 4) | ((c & 0xF0) >> 4); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T07:31:01.057

```
int x =  0xab; // 1010 1011 

int x1 = ( x & 0xF0) ; // 1010 0000
int x2 = ( x & 0x0F) ; // 0000 1011

x = ( x2 << 4 | x1 >> 4 ) ; // 1011 1010 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T06:18:11.337

```
char temp1,temp2,z;// your o/p
temp1=((x & 0x0f)<<4);//x  be your input
temp2=((x & 0xf0)>>4);
z=temp1|temp2; 
```

# css - CSS UL 在所有边上都没有边框，除非提到高度

> ID：15984819
> 
> 赞同：0
> 
> 时间：2013-04-13T06:05:48.023
> 
> 标签：css

我在练男人

我的索引.html：

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="myMenu.css"> 
</head>
<body>
<ul id="menu">
<li><a href="">Home</a></li>
<li><a href="">5 columns</a></li>
<li><a href="">4 columns</a></li>
<li><a href="">3 columns</a></li>
<li><a href="">1 column</a></li>
</ul>
</body>
</html> 
```

我的菜单.css

```
#menu {
    list-style:none;
    width:940px;
    margin:30px auto 0px auto;
    height:43px;
    padding:0px 20px 0px 20px;

    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    border-radius: 10px;

    background: #014464;
    background: -moz-linear-gradient(top, #0272a7, #013953);
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#0272a7), to(#013953));

    border: 1px solid #002232;
}
#menu li {
    float: left;
    display: block;
    padding: 4px 10px 4px 10px;
    margin-right:30px;
}
#menu li a {
    display: block;
    text-decoration:none;
} 
```

这里如果从#menu 中删除height:43px，那么它就没有包装容器的形状（即带有4 个圆角的边框），而顶部的单个边框是可见的。我不确定为什么会这样？Ul 已经知道其中的元素，例如高度非零的 li 和 a 那么为什么它无法包装它们？

提前感谢您的解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T06:12:55.733

删除高度声明后，您需要添加`display:inline-block`到您的`#menu {...}`CSS。

```
#menu {
  list-style:none;
  width:940px;
  margin:30px auto 0px auto;
  padding:0px 20px 0px 20px;   
  display:inline-block;     /* add this line */
  -moz-border-radius: 10px;
  -webkit-border-radius: 10px;
  border-radius: 10px;
  background: #014464;
  background: -moz-linear-gradient(top, #0272a7, #013953);
  background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#0272a7), to(#013953));
  border: 1px solid #002232;
} 
```

这是一个显示结果的 jsbin：http: [//jsbin.com/iwomuw/1/edit](http://jsbin.com/iwomuw/1/edit)。

如果您不想使用`display:inline-block`. 另一种方法是使用`overflow:auto`which 将导致`ul`元素随`li`标签扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T06:19:24.937

**工作小提琴：http:** [//jsfiddle.net/UsheC/](http://jsfiddle.net/UsheC/)

浮点数从正常的文档流中移除元素。
由于这个原因，在计算容器元素的高度时不考虑浮动元素的高度。

您可以通过在容器元素之后使用清除 div 来克服这种行为。

```
<ul id="menu" class="clearFix">
    <li><a href="">Home</a></li>
    <li><a href="">5 columns</a></li>
    <li><a href="">4 columns</a></li>
    <li><a href="">3 columns</a></li>
    <li><a href="">1 column</a></li>
</ul> 
```

/\

```
.clearFix:after {
    content: " ";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T06:20:19.920

用这个代替`height in #menu`

```
display:block;
overflow:hidden; 
```

并从中删除填充`li`并提供它们`height`，`line-height`但是您需要并从或为`a`链接提供填充， 并且其工作正常`left``right`

# php - php.js 无法正常运行

> ID：15984821
> 
> 赞同：0
> 
> 时间：2013-04-13T06:06:05.483
> 
> 标签：php, javascript, jquery

我试图将 php.js 与我的脚本一起使用，但它没有工作，所以我解决了一个函数并加载到一个页面上，除了 jquery 和 php.js 什么都没有，但它仍然没有工作

```
 <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="./pathinfo_function.js"></script><script> 

    $(document).ready(function() {

         $(".do").click(function() {

    alert(pathinfo('/www/htdocs/index.html', 'PATHINFO_EXTENSION'));
        });

    });

    </script>

    <a href='#' class='do'>Pathinfo</a> 
```

都坏了，谁能指出我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T06:17:49.737

好吧，您应该在调试代码时始终检查控制台。Chrome 在通过右键单击检查元素时有它，firefox 有它的 firebug 扩展程序，而 IE 有它与 F12 .. 然而......

您尝试使用的函数取决于其他两个函数.. 如第 16 行和第 17 行代码标题中所指定的那样。它取决于.. [basename](http://phpjs.org/functions/basename/)和[dirname](http://phpjs.org/functions/dirname/)。在您的代码中包含这两个函数，然后它应该可以工作。

```
//basename function..
//dirname function..
//pathinfo function..

$(document).ready(function() {
    $(".do").click(function() {
        alert(pathinfo('/www/htdocs/index.html', 'PATHINFO_EXTENSION'));
    });
}); 
```

[**工作演示**](http://jsfiddle.net/mjddT/)

# php - 使用 php ajax 和 mysql 用秘密问题重置密码

> ID：15984822
> 
> 赞同：3
> 
> 时间：2013-04-13T06:06:11.040
> 
> 标签：php, javascript, mysql, ajax

![在此处输入图像描述](https://i.stack.imgur.com/cIhku.jpg) 我正在尝试编写一个脚本，允许用户在提供电子邮件地址和回答秘密问题后重置密码。问题是我的秘密问题脚本没有按预期工作。当用户回答秘密问题时，它会在 ajax 的帮助下发布到 PHP 脚本并返回 responseText，它应该根据返回的响应触发 ajax，但是当返回的文本满足其他一些条件时，这里的脚本总是显示 ajax 的 else 条件。 ...任何帮助将不胜感激。提前谢谢你的帮助..

这些是重置密码的步骤：

1.  点击忘记密码
2.  询问用户电子邮件地址
3.  回答秘密问题
4.  在电子邮件中发送重置链接
5.  单击电子邮件中发送的链接后，用户将被引导到密码重置页面，他们可以在其中创建新密码。

这是代码

```
<?php 

if(isset($_GET['e'])){
        // CONNECT TO THE DATABASE
        include_once("php_includes/connect_to_mysqli.php");
        // GATHER THE POSTED EMAIL INTO LOCAL VARIABLES AND SANITIZE
        $email = mysqli_real_escape_string($db_conx, $_GET['e']);

        $sql = "SELECT * FROM useroptions WHERE email='$email' LIMIT 1";
        $query = mysqli_query($db_conx, $sql);
        $numrows = mysqli_num_rows($query);
        while($row = mysqli_fetch_array($query, MYSQLI_ASSOC)){
            $id = $row["id"];
            $u = $row["username"];
            $q1 = $row["question"];
            $q2 = $row["question2"];
            $a1 = $row["answer"];
            $a2 = $row["answer2"];

                }
          if ($q1 == "" || $q2 == ""){
              header ("location: messages.php?emsg=forget&u=".$u);
                 exit();
              }
        }
?>
<?php
// AJAX CALLS THIS CODE TO EXECUTE
if(isset($_POST["pa1"])){
    include_once("php_includes/connect_to_mysqli.php");
    $e = mysqli_real_escape_string($db_conx, $_POST['em']);
    $pa1= $_POST['pa1'];
    $pa2= $_POST['pa2'];

    $sql = "SELECT * FROM useroptions WHERE email='$e' LIMIT 1";
        $query = mysqli_query($db_conx, $sql);
        $numrows = mysqli_num_rows($query);
        while($row = mysqli_fetch_array($query, MYSQLI_ASSOC)){
            $id = $row["id"];
            $a1 = $row["answer"];
            $a2 = $row["answer2"];
            }

    if ($pa1 == $a1 && $pa2 == $a2 && $e == $email ){
    $sql = "SELECT id, username FROM user WHERE email='$e' AND activated='1' LIMIT 1";
    $query = mysqli_query($db_conx, $sql);
    $numrows = mysqli_num_rows($query);
    if($numrows > 0){
        while($row = mysqli_fetch_array($query, MYSQLI_ASSOC)){
            $id = $row["id"];
            $u = $row["username"];
        }
        $emailcut = substr($e, 0, 4);
        $randNum = rand(10000,99999);
        $tempPass = "$emailcut$randNum";
        $hashTempPass = md5($tempPass);
        $sql = "UPDATE useroptions SET temp_pass='$hashTempPass' WHERE username='$u' LIMIT 1";
        $query = mysqli_query($db_conx, $sql);
        $to = "$e";
        $from = "auto_responder@yousite.com";
        $headers ="From: $from\n";
        $headers .= "MIME-Version: 1.0\n";
        $headers .= "Content-type: text/html; charset=iso-8859-1 \n";
        $subject ="yoursite Temporary Password";
        $msg = '<h2>Hello '.$u.'</h2><p> Email with activation link</p>';
        if(mail($to,$subject,$msg,$headers)) {
            echo "success";
            exit();
        } else {
            echo "email_send_failed";
            exit();
        }
    }
    } else {
        echo "no_exist";
    }

    exit();
}
?>

    <!DOCTYPE html>
    <html>
    <head>
    <meta charset="UTF-8">
    <title>Security Answer-</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="css/styles.css">
    <style type="text/css">
    #securityform{
        margin-top:24px;    
    }
    #securityform > div {
        margin-top: 12px;   
    }
    #securityform > input {
        width: 250px;
        padding: 3px;
        background: #F3F9DD;
    }
    #anssubmitbtn {
        font-size:15px;
        padding: 10px;
    }
    </style>
    <script src="js/main.js"></script>
    <script src="js/ajax.js"></script>
    <script>
    function emptyElement(x){
        _(x).innerHTML = "";
    }
    function ajaxObj( meth, url ) {
    var x = new XMLHttpRequest();
    x.open( meth, url, true );
    x.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    return x;
}
function ajaxReturn(x){
    if(x.readyState == 4 && x.status == 200){
        return true;    
    }
}

    function forgotpasscon(){
        var em = _("email").value;
        var pa1 = _("ans1").value;
        var pa2 = _("ans2").value;
        if(em == "" || pa1 == "" || pa2 == ""){
            _("status").innerHTML = "Answer all security questions";
        } else {
            _("anssubmitbtn").style.display = "none";
            _("status").innerHTML = 'please wait ...';
            var ajax = ajaxObj("POST", "testconfirm.php");
            ajax.onreadystatechange = function() {
                if(ajaxReturn(ajax) == true) {
                    var response = ajax.responseText;
                    if(ajax.responseText == "success"){
                        _("securityform").innerHTML = '<h3>Step 2\. Check your email inbox in a few minutes</h3><p>You can close this window or tab if you like.</p>';
                    } else if(ajax.responseText == "no_exist"){
                        _("status").innerHTML = "Sorry wrong answers";
                    } else if(ajax.responseText == "email_send_failed"){
                        _("status").innerHTML = "Mail function failed to execute";
                    } else {
                        _("status").innerHTML = "An unknown error occurred"+ajax.responseText;
                        _("anssubmitbtn").style.display = "block";
                    }
                }
            }
            ajax.send("em="+em+"&pa1="+pa1+"&pa2="+pa2);
        }
    }
    </script>

    </head>
    <body>
    <?php include_once("template_pageTop.php"); ?>
    <div id="pageMiddle">
        <h3>Step : 2</h3>
      <h4>Please answer the following security questions!!</h4>
      <form id="securityform" onsubmit="return false;">
        <div>Question 1:</div>
        <p><?php echo $q1; ?></p>
        <input name="ans1" id="ans1" type="text" onfocus="_('status').innerHTML='';" maxlength="100">
        <br/><br/>
        <div>Question 2:</div>
        <p><?php echo $q2; ?></p>
        <input name="ans2" id="ans2" type="text" onfocus="_('status').innerHTML='';" maxlength="100">
        <br /><br />
        <input name="email" id="email" type="hidden" value="<?php echo $email; ?>" />

        <button id="anssubmitbtn" onclick="forgotpasscon()">Submit</button> 
        <p id="status"></p>
      </form>
    </div>
    <?php include_once("template_pageBottom.php"); ?>
    </body> 
    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T20:51:07.100

故障排除后，确定需要修剪响应字符串：

```
ajax.onreadystatechange = function (evt) {
    if (ajaxReturn(ajax) == true) {
        var response = ajax.responseText.trim();
        //your if conditions here
    }
}; 
```

# c - GDB 在 linux 中带有 coredump 文件

> ID：15984828
> 
> 赞同：-2
> 
> 时间：2013-04-13T06:07:29.007
> 
> 标签：c, linux, debugging, terminal, gdb

我刚刚在linux中得到了一个核心转储文件

```
ulimit -c unlimited 
```

我怎样才能附加gdb

我需要给它提供命令行参数。

样本执行：

```
./my_prog arg 
```

帮助我进入 gdb

干杯！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T06:23:11.237

如果您的核心文件`core`只是运行

```
gdb ./my_prog core 
```

做一些事后分析`core`。

如果您想在`gdb`没有核心的情况下使用，请考虑

```
gdb --args ./my_prog arg 
```

或者运行`gdb ./my_prog`然后发出`set args`命令到`gdb`.

如果您的进程仍以 pid 1234 运行，您可以`gdb ./my_prog 1234`将 gdb 附加到正在运行的进程。

您真的应该**阅读[gdb 文档](http://sourceware.org/gdb/download/onlinedocs/gdb/index.html)**。

# c++ - 创建一个空 istream 以从方法调用中填充

> ID：15984835
> 
> 赞同：0
> 
> 时间：2013-04-13T06:08:28.060
> 
> 标签：c++, pointers, dereference

我试图创建一个返回 istream 的方法。问题是我无法获得一个空引用来传递给填充方法。

在我的主要：

```
std::istream &is;//<-Initialized
is = NetPoco::getJson(is,"URL");
std::stringstream ss;
StreamCopier::copyStream(is,ss);
printf(ss.str().c_str()); 
```

在我的 getJson() 中：

```
 istream& NetPoco::getJson(istream& is,string url){
    try
     {
           ....
           istream &is = session.receiveResponse(res);
           return is;
          } 
```

我从 main 传递了 is，否则它似乎得到了 de 引用。什么是使方法返回 istream 或指向 istream 的指针的正确（最佳实践）方法，以便在那里解析。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T06:45:43.150

您需要在声明引用时对其进行初始化。重写你的代码如下：

```
int main() {
    std::istream &is = NetPoco::getJson("URL");
    std::stringstream ss;
    StreamCopier::copyStream(is,ss);
    std::cout << ss.str();
}

//Removed `istream& is` parameter. It is not needed
std::istream& NetPoco::getJson(string url){
    try {
        //...
        std::istream &is = session.receiveResponse(res);
        return is;
    }
    catch(...) {
        //...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T06:23:39.003

在声明引用对象时初始化它们始终是一个好习惯

```
std::istream &is = NetPoco::getJson(is,"URL"); 
```

如果你不初始化引用对象，那是一个错误。

# jquery - 使用 jQuery Mobile 创建动态表单元素

> ID：15984839
> 
> 赞同：3
> 
> 时间：2013-04-13T06:08:51.430
> 
> 标签：jquery, jquery-mobile

好的，也许之前已经回答过了，但我无法通过搜索找到任何东西......

我是 jQuery Mobile 的新手，我正在尝试`<fieldset>`通过页面将单选框动态添加到一个容器中，正如您在这个小提琴中看到的那样：http: [//jsfiddle.net/4V3Tm/4/](http://jsfiddle.net/4V3Tm/4/)

它正在工作。但由于某种我不知道的原因，动态添加的选项并没有被设置为普通的单选框。我错过了什么吗？顺便说一句，它们不应该都扩展到页面宽度吗？（好吧，我还完全是菜鸟……）

先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T06:45:41.493

检查这个小提琴[http://jsfiddle.net/YUvG9/](http://jsfiddle.net/YUvG9/)或检查你的更新[http://jsfiddle.net/4V3Tm/4/](http://jsfiddle.net/4V3Tm/4/)也许问题是你`.trigger('create')`多次打电话

```
$(document).on('pageinit', '#home', function () {
    var current = 3;

    $('#home input[type=button]').click(function () {
        current++;        
        $('#choices .ui-controlgroup-controls')
            .append(
                $('<input/>', {
                        'type': 'radio',
                        'name': 'choice',
                        'id': 'choice' + current,
                        'value': current,
                        'data-theme': 'd'
                    })
                    .append(
                        $('<label/>', {
                            'for': 'choice' + current
                        })
                        .text('Choice ' + current)
                )
            );

        $("#home").trigger('create')
    });
}); 
```

# javascript - 构造函数javascript的自定义事件

> ID：15984847
> 
> 赞同：0
> 
> 时间：2013-04-13T06:10:36.483
> 
> 标签：javascript, jquery, oop, prototype

JavaScript 新手。我有一个非 DOM 函数，我想向构造函数添加事件。

```
var class=function(){
/*
some code
*/

}
class.prototype.add=function(){

/*
adding item*/

} 
```

现在我想向 custructer 添加事件

```
var klass=new class;

class.onadd(function(){
/*execute on adding item*/
}); 
```

我会多次附加不同的功能。

如何添加事件和调用函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T06:20:31.730

它分为两部分，`on`收集处理程序和事件触发器，在你的情况下是`add`

根据`on`分配的事件收集处理程序：

```
function yourConstructor(){
  this.events = {};
}

yourConstructor.prototype.on = function(eventName,handler){
  //create a property in `this.events` called `eventName` and put an array
  //in that array, store all handlers for that `eventName`
} 
```

然后你的函数，在这种情况下`add`，执行它们的特定处理程序：

```
yourConstructor.prototype.add = function(){
  //do what add does
  //then execute all handlers in this.events.add array
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T06:29:15.957

你可以实现自己的事件系统，但我不推荐它。已经有很多好的图书馆。这里有几个：

*   [事件发射器](https://github.com/Wolfy87/EventEmitter)
*   [js-信号](http://millermedeiros.github.io/js-signals/)
*   [微事件](https://github.com/jeromeetienne/microevent.js)
*   [作为事件](https://github.com/mkuklis/asEvented)

我创建了一个[jsFiddle](http://jsfiddle.net/scarsick/CbmBw/)来展示如何使用微事件。

```
function Person(name) {
    this.name = name;
}

Person.prototype.sayName = function () {
    alert('My name is ' + this.name);
    this.trigger('nameSaid');  //trigger the nameSaid event
};

//Make Person instances observable by applying the MicroEvent mixin
MicroEvent.mixin(Person);

//Create a new Person instance
var o = new Person('John Doe');

//Listen to the nameSaid event
o.bind('nameSaid', function () {
    alert(this.name + ' just said it\'s name!');
});

o.sayName(); 
```

# php - php preg_match 特殊模式

> ID：15984848
> 
> 赞同：0
> 
> 时间：2013-04-13T06:10:38.553
> 
> 标签：php, preg-match

我想构建一个`if`读取 url 参数并检查它是否符合以下特殊模式的语句：

```
Single capital letter (A to E), followed by
Single capital letter (R, S, H, or T), followed by
One digit (1 or 2), followed by
Two digits (01 to 18), followed by
Two digits (01 to 60), followed by
Single capital letter (X or Y), followed by
Pair of float numbers separated by a comma (5.8234,11.231134) 
```

匹配模式示例：

```
AH20340X22.14,43.8241212
CT11154Y1.431212,11.413
ES10113X11.512341,55.134513 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T06:22:10.370

您无法使用正则表达式（有限状态机）检查数字是否“介于 01 和 18 之间”，因此您必须作弊。

所以你必须写：

```
Single capital letter (A to E) => [A-E]
Single capital letter (R, S, H, or T) => [RSHT]
One digit (1 or 2) => [12]
Two digits (01 to 18) => ([0][1-9]|[1][0-8])
Two digits (01 to 60) => ([0][1-9]|[1-5][0-9]|60)
Single capital letter (X or Y) => [XY]
Float number => [0-9]+(\.[0-9]+)?
Comma => ,
Float number => [0-9]+(\.[0-9]+)? 
```

所以你最终会得到：

```
/[A-E][RSHT][12]([0][1-9]|[1][0-8])([0][1-9]|[1-5][0-9]|60)[XY][0-9]+(\.[0-9]+)?,[0-9]+(\.[0-9]+)?/ 
```

# python-3.x - Python - 在给定的大数范围内找到所有完美正方形的最快方法

> ID：15984849
> 
> 赞同：2
> 
> 时间：2013-04-13T06:11:03.900
> 
> 标签：python-3.x, square-root, perfect-square

我正在尝试编写一种方法来**获取 Python 中给定范围内的所有完美正方形**。一个大范围，如 2621163 和 520001400002 之间。现在显然迭代该范围并检查一个数字是否像这样完美

```
def is_square(n):
    return math.sqrt(n).is_integer() 
```

然后打印它对于大范围来说是愚蠢的（对于小范围来说效果很好）并且需要永远。我想知道是否有任何 Python 魔法或数学（比如修改后的丢番图方程）可以用于此目的。

**编辑：**我也在使用 Python 3.X，所以我可以使用大整数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-13T06:21:21.333

您可以简单地找到在指定范围内具有正方形的最小和最大数字。然后您可以返回该范围内每个数字的平方。

```
import math

def perfect_squares(min, max):
    lowest = int(math.ceil(math.sqrt(min)))
    highest = int(math.sqrt(max))
    return (n**2 for n in range(lowest, highest + 1)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T16:06:59.240

想象一下这个数字是 34929456，你可以知道它不是一个完美的正方形，因为当它被分割 3:4:9:2:9:4:5:6= 42\. 42 不是一个正方形数字所以意味着 34929456 不是一个完美的正方形！（我没有使用计算器）现在我们知道它不是一个完美的正方形，你会把它向上/向下四舍五入......所以，你取最后两位数字，56！用个位数计算 56 是 7(Times)8=56！34929456 是一个 8 位数字，因此意味着 8-7=1+4=5。所以这意味着答案在 5000 到 6000 之间。现在，你做一点猜测。让我们做 5500 平方 = 30250000。所以我们知道平方根有点大！现在让我们试试 5910。5910 的平方 = 34928100。所以知道我们知道答案在 5910 和 5911 之间！谢谢阅读！:P，希望对您有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-12T10:16:45.890

你意识到如果你知道第一个和最后一个最接近的完美正方形，剩下的只是它们之间的范围。我会这样计算：

```
import math

def all_squares(a,b):#a is the starting point whereas b is the end of range
    smallest = int(math.ceil(math.sqrt(a)))#perfect square closest to lower bound (rounded up)
    largest = int(math.sqrt(b))#perfect square closest to upper bound (rounded down)
    squares = []
    for s in range(smallest, largest+1):
        squares.append(s**2)
    return squares 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-01T01:51:58.407

# 使用 numpy 从 1 到 100 位获得完美平方

```
import numpy as np

a={int(np.sqrt(x)) for x in range(1,101)}

b= np.power(list(a),2) 

print(a)

print(b) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-27T16:45:30.020

没有使用函数的简单python代码

```
import math
num=500
for i in range(1,math.ceil(math.sqrt(num))):
    print(i*i) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-13T06:16:40.103

```
def perfect_squares(start, stop):
  return (i*i for i in xrange(math.ceil(math.sqrt(start)), math.floor(math.sqrt(stop)) + 1)) 
```

# android - android 编译错误“发生错误。有关详细信息，请参阅错误日志。com.android.ddmlib.IDevice.getName()Ljava/lang/String;”

> ID：15984850
> 
> 赞同：1
> 
> 时间：2013-04-13T06:11:04.313
> 
> 标签：android, eclipse

当我在 eclipse Juno Service Release 1 中开始调试我的 android 应用程序时出现以下错误。

**发生了错误。有关详细信息，请参阅错误日志。com.android.ddmlib.IDevice.getName()Ljava/lang/String;**

在错误日志中它说如下，

**消息：**从插件调用代码时出现问题：“org.eclipse.jface”。

**异常堆栈跟踪：**

```
java.lang.NoSuchMethodError: com.android.ddmlib.IDevice.getName()Ljava/lang/String;
    at com.android.ide.eclipse.adt.internal.launch.DeviceChooserDialog$LabelProvider.getColumnText(DeviceChooserDialog.java:195)
    at org.eclipse.jface.viewers.TableColumnViewerLabelProvider.update(TableColumnViewerLabelProvider.java:70)
    at org.eclipse.jface.viewers.ViewerColumn.refresh(ViewerColumn.java:152)
    at org.eclipse.jface.viewers.AbstractTableViewer.doUpdateItem(AbstractTableViewer.java:399)
    at org.eclipse.jface.viewers.StructuredViewer$UpdateItemSafeRunnable.run(StructuredViewer.java:485)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49)
    at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
    at org.eclipse.jface.viewers.StructuredViewer.updateItem(StructuredViewer.java:2167)
    at org.eclipse.jface.viewers.AbstractTableViewer.createItem(AbstractTableViewer.java:277)
    at org.eclipse.jface.viewers.AbstractTableViewer.internalRefreshAll(AbstractTableViewer.java:757)
    at org.eclipse.jface.viewers.AbstractTableViewer.internalRefresh(AbstractTableViewer.java:649)
    at org.eclipse.jface.viewers.AbstractTableViewer.internalRefresh(AbstractTableViewer.java:636)
    at org.eclipse.jface.viewers.AbstractTableViewer$2.run(AbstractTableViewer.java:592)
    at org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1443)
    at org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1404)
    at org.eclipse.jface.viewers.AbstractTableViewer.inputChanged(AbstractTableViewer.java:590)
    at org.eclipse.jface.viewers.ContentViewer.setInput(ContentViewer.java:280)
    at org.eclipse.jface.viewers.StructuredViewer.setInput(StructuredViewer.java:1690)
    at com.android.ide.eclipse.adt.internal.launch.DeviceChooserDialog.createDialogArea(DeviceChooserDialog.java:442)
    at org.eclipse.jface.dialogs.Dialog.createContents(Dialog.java:760)
    at com.android.ide.eclipse.adt.internal.launch.DeviceChooserDialog.createContents(DeviceChooserDialog.java:319)
    at org.eclipse.jface.window.Window.create(Window.java:431)
    at org.eclipse.jface.dialogs.Dialog.create(Dialog.java:1089)
    at org.eclipse.jface.window.Window.open(Window.java:790)
    at com.android.ide.eclipse.adt.internal.launch.AndroidLaunchController$2.run(AndroidLaunchController.java:615)
    at org.eclipse.ui.internal.UILockListener.doPendingWork(UILockListener.java:164)
    at org.eclipse.ui.internal.UISynchronizer$3.run(UISynchronizer.java:158)
    at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
    at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
    at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4144)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3761)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1029)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:923)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438) 
```

这是什么原因？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T08:15:26.573

尝试在 Eclipse 中更新您的 Android 插件。

检查此链接，类似的问题： [升级到 android sdk 工具 20/平台 sdk 工具 12 后无法启动应用程序](https://stackoverflow.com/questions/11554300/can-no-longer-launch-apps-after-upgrding-to-android-sdk-tools-20-platform-sdk-to)

# android - Android - facebook sdk 问题

> ID：15984855
> 
> 赞同：3
> 
> 时间：2013-04-13T06:11:52.120
> 
> 标签：android, facebook, android-facebook

我在我的应用程序中包含了 Fb 登录，当我单击“登录”按钮（com.facebook.widget.LoginButton）时，它会在登录之前打开一个带有对话框的额外活动，如下图所示。为什么会这样？我不想在登录之前打开这个额外的活动。知道怎么做吗？

![在此处输入图像描述](https://i.stack.imgur.com/tFLQm.png)

![在此处输入图像描述](https://i.stack.imgur.com/a7q50.png)

我的主要活动：

```
public class MainActivity extends SherlockFragmentActivity {

    //Button fblogin;
    Button signup_with_email;
    Button log_in;
    private UiLifecycleHelper uiHelper;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        uiHelper = new UiLifecycleHelper(this, null);
        uiHelper.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        initialize();
        setListeners();

    }

    private void initialize() {
        //fblogin = (Button) findViewById(R.id.login_button);
        signup_with_email = (Button) findViewById(R.id.signup_with_email);
        log_in = (Button) findViewById(R.id.log_in);
    }

    private void setListeners() {

        /*fblogin.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

            }
        });
*/
        signup_with_email.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                startActivity(new Intent(MainActivity.this,
                        EmailSignUpActivity.class));
            }
        });

        log_in.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                startActivity(new Intent(MainActivity.this, LoginActivity.class));
            }
        });
    }

    @Override
    protected void onResume() {
        super.onResume();
        uiHelper.onResume();

    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        uiHelper.onSaveInstanceState(outState);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        uiHelper.onActivityResult(requestCode, resultCode, data);
        startActivity(new Intent(MainActivity.this, DashBoardActivity.class));
    }

    @Override
    public void onPause() {
        super.onPause();
        uiHelper.onPause();
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        uiHelper.onDestroy();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getSupportMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-12T10:30:42.210

我参加聚会有点晚了，但接受的答案是错误的。

在深入研究 SDK 代码后，我发现：Facebook 为登录过程启动 com.facebook.LoginActivity，由于您没有指定自定义主题，它会显示为您的屏幕截图。这是 LoginActivity 的 JavaDoc：

> 此活动是整个 Facebook 登录过程的必要部分，但不能直接使用。将此活动添加到您的 AndroidManifest.xml 以确保正确处理 Facebook 登录。

他们建议使用 Theme.Translucent.NoTitleBar：

```
<activity android:name="com.facebook.LoginActivity"
    android:theme="@android:style/Theme.Translucent.NoTitleBar"
    android:label="@string/app_name" /> 
```

但是，如果您使用建议的主题，则 Activity 将是半透明的，但仍会在中间显示一个不确定的 ProgressBar（动画加载符号）。

就个人而言，我更喜欢使用 DialogFragment 来指示加载过程，并且根本不显示 Facebook 的 LoginActivity：

```
<activity
    android:name="com.facebook.LoginActivity" 
    android:theme="@android:style/Theme.NoDisplay" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T06:29:20.633

您将 null 作为第二个参数传递给 UiLifecycleHelper 的构造函数。您需要传递 Session.StatusCallback 的实例。Facebook SDK 教程通常将其显示为 Activity 中的最终字段，如下所示

```
private Session.StatusCallback callback = 
    new Session.StatusCallback() {
    @Override
    public void call(Session session, 
            SessionState state, Exception exception) {
        onSessionStateChange(session, state, exception);
    }
}; 
```

然后，您实现 onSessionStateChange 以在会话打开或关闭时执行您需要执行的任何操作......在您的情况下，您似乎想要在会话状态打开时启动 DashBoardActivity。

无论如何，您都会在短时间内看到一个对话框，因为在 Facebook SDK SSO 过程中，控制暂时传递给本机 Facebook 应用程序以进行授权。一旦授权完成，控制权就会传递给 basck Session.StatusCallback 被调用。

# android - Android 和 Google Map API v2

> ID：15984859
> 
> 赞同：0
> 
> 时间：2013-04-13T06:12:31.403
> 
> 标签：android, google-maps

我仍然无法在模拟器上成功启动 Google Map v2。我尝试了每一个示例和教程，但仍然是同样的问题。

现在我遇到了这个问题：它显示在模拟器屏幕上，我需要更新 Google Play 服务，但它是最新的更新。

# 原木猫

```
 04-13 05:32:50.979: E/Trace(680): error opening trace file: No such file or directory (2)
    04-13 05:32:51.223: W/GooglePlayServicesUtil(680): Google Play services out of date.  Requires 3027100 but found 1
    04-13 05:32:51.230: W/GooglePlayServicesUtil(680): Google Play services out of date.  Requires 3027100 but found 1
    04-13 05:32:51.250: W/GooglePlayServicesUtil(680): Google Play services out of date.  Requires 3027100 but found 1
    04-13 05:32:51.269: W/GooglePlayServicesUtil(680): Google Play services out of date.  Requires 3027100 but found 1
    04-13 05:32:51.280: W/GooglePlayServicesUtil(680): Google Play services out of date.  Requires 3027100 but found 1
    04-13 05:32:51.319: W/GooglePlayServicesUtil(680): Google Play services out of date.  Requires 3027100 but found 1
    04-13 05:32:51.650: D/gralloc_goldfish(680): Emulator without GPU emulation detected. 
```

如何解决这个错误？

# asp.net - RadGrid ExportToPdf() 不起作用，如何解决？

> ID：15984865
> 
> 赞同：0
> 
> 时间：2013-04-13T06:13:13.353
> 
> 标签：asp.net

> 在按钮单击事件中，我试图将 radgrid 导出为 pdf。

为此，我正在使用`RadGrid.ExportToPdf() function`但正在获取`"The given path's format is not supported" error`.

在我的代码下面找到：

```
protected void btnExportToPDF_Click(object sender, EventArgs e)
    {

        MattersGrid.ExportSettings.ExportOnlyData = true;
        MattersGrid.ExportSettings.IgnorePaging = true;
        MattersGrid.ExportSettings.OpenInNewWindow = true;
        MattersGrid.ExportSettings.FileName = "MyDoc";
        MattersGrid.MasterTableView.ExportToPdf();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T07:35:18.517

这可能是由 AJAX 引起的，因为页面需要返回流而不是用于 AJAX 的 XttpReuest。您将[在此处](https://stackoverflow.com/questions/8890916/radgrid-telerik-problems-with-export-to-excel)找到解决方案 您还需要查看这些..

*   [http://demos.telerik.com/aspnet-ajax/grid/examples/generalfeatures/exporting/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/grid/examples/generalfeatures/exporting/defaultcs.aspx)
*   [http://www.telerik.com/help/aspnet-ajax/grid-pdf-export.html](http://www.telerik.com/help/aspnet-ajax/grid-pdf-export.html)
*   [Telerik Radgrid 导出文件名](https://stackoverflow.com/questions/11012161/telerik-radgrid-export-file-name)

# oracle - Oracle 数据库版本

> ID：15984869
> 
> 赞同：1
> 
> 时间：2013-04-13T06:13:51.147
> 
> 标签：oracle

如何找出数据库实例的版本号？

请注意，我指的是数据库实例，而不是 Oracle 软件安装版本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T06:14:46.493

只需从 sqlplus 命令提示符运行以下命令：

```
select * from v$version; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T06:17:21.947

另一种方式

```
SELECT * FROM PRODUCT_COMPONENT_VERSION; 
```

信息显示如下

```
PRODUCT                                  VERSION     STATUS
---------------------------------------- ----------- -----------
NLSRTL                                   10.2.0.1.0  Production
Oracle Database 10g Enterprise Edition   10.2.0.1.0  Prod
PL/SQL                                   10.2.0.1.0  Production
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T06:21:16.840

如果您拥有`SYSTEM`或`DBA`访问，您可以像这样单独获取版本号：

```
SELECT version FROM v$instance; 
```

结果将如下所示：

```
VERSION
-----------------
11.2.0.2.0 
```

# ruby-on-rails - Cancan 授权对嵌套属性的操作

> ID：15984870
> 
> 赞同：2
> 
> 时间：2013-04-13T06:14:06.647
> 
> 标签：ruby-on-rails, cancan

我有一个表单，用户可以在其中编辑用户模型和照片模型中的属性。用户模型有很多照片。

当用户提交表单时，参数将有，

```
:user => { :name => "blah blah",
           :photos_attributes => {
                "1" => { "id" => 10, "description" => "Some description"}
           }
         } 
```

我`current_user.update_attributes(params[:user])`在控制器上做了一个。

一切正常。但是没有对该操作进行授权。从而留下一个安全漏洞。用户可以通过更改表单帖子中传递的 ID（在 photo_attribtues 中）来修改他的任何照片。

如何检查当前用户是否有权（即他是否是所有者）使用 CanCan 更改 photo_attributes 中指定的照片。

注意：photos_attributes 是可选的。参数可能包含也可能不包含 photos_attributes。如果 params[:user] 中没有 photos_attributes，解决方案应该不会失败

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-02-08T17:50:27.023

简短的回答：CanCan 无法做到（通过可行的努力）。

长答案：从 CanCan 的角度来看，您只是在处理`User`碰巧具有名为`photos_attributes`. CanCan 必须挂钩到 ActiveRecord 的实现，`accepts_nested_attributes_for`以便将引用的关联范围限定为，`Photo.accessible_by(current_ability)`而不仅仅是`Photo`在控制器上下文中。丑陋的！

如果您对授权很认真并且可以在没有`accepts_nested_attributes_for`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-12T08:52:28.203

这是一个老问题，但我遇到了同样的问题

根据`cancan`wiki ( [Defining Abilities](https://github.com/CanCanCommunity/cancancan/wiki/Defining-Abilities) )，可以使用条件哈希，例如：

```
class Ability
  include CanCan::Ability

  def initialize(user)
    #...
    #other abilities
    #...

    # first we check user can only edit his profile (id: user.id)
    # then we check he can only edit his photos
    can :update, User, id: user.id, photos: { id: user.photos_ids }
  end
end 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-05-27T16:22:20.883

我假设您将路线定义如下：

```
resources :users do
  resources :photos
end 
```

如果是这样，那么，在您的`ability.rb`文件中，您可以执行以下操作：

```
def initialize(user)
  can :manage, Photos, :user_id => user.id
end 
```

它应该验证照片确实属于正确的用户。

见：[https ://github.com/ryanb/cancan/wiki/Nested-Resources](https://github.com/ryanb/cancan/wiki/Nested-Resources)

# android - Android 创建带渐变的透明层

> ID：15984874
> 
> 赞同：1
> 
> 时间：2013-04-13T06:15:01.183
> 
> 标签：android, transparency, linear-gradients

我想创建一个透明的叠加层来在标题栏上创建一个阴影。

我创建了一个自定义视图并在 costructor

```
GradientDrawable drawable = new GradientDrawable(Orientation.BOTTOM_TOP, new int[]{
            Color.TRANSPARENT,
            Color.BLACK,
            Color.BLACK });
        drawable.setGradientType(GradientDrawable.LINEAR_GRADIENT);
//        drawable.setAlpha(255);
        this.setBackgroundDrawable(drawable); 
```

视图不会出现在屏幕上。如果我删除 Color.TRANSPARENT 视图会出现，但我需要渐变必须有 50% 的 alpha。

任何想法？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T08:32:37.430

试试这个颜色

```
int colors[] = { 0x00000000 , 0x40000000, 0x80000000 }; 
```

只需使用 8 位颜色值 ARGB

# html - 试图在一个 div 容器中放置两个 div

> ID：15984881
> 
> 赞同：0
> 
> 时间：2013-04-13T06:16:27.970
> 
> 标签：html, css, layout

我试图在一个容器中放置两个 div，但它们的位置真的很奇怪。

```
<div id="headernav">
                <div id="logo"></div>
                <nav id="navbar"></nav>
 </div> 
```

我希望导航是一个特定的宽度，比如 700px，徽标 div 适合剩余空间，所以我把它放在 100%

```
#headernav{
    background:#0000FF;
    height: 60px;
}
#logo{
    height:100%;
    width: 100%;
    background:red;
    height:100%;
}
#navbar{
    width:700px;
    height:100%;
    background: cyan;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T06:18:09.357

尝试`calc(100% - 700px);`徽标`width`

[https://developer.mozilla.org/en-US/docs/CSS/calc](https://developer.mozilla.org/en-US/docs/CSS/calc)

看看这个。在铬中工作正常。

[http://jsfiddle.net/btevfik/W5stS/](http://jsfiddle.net/btevfik/W5stS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T06:42:25.503

使用`cal(100% - 700px);`in `#logo`，然后使用 and`display: inline-block`来显示两列，代码可能是这样的：

款式：

```
#headernav{
        background:#0000FF;
        height: 60px;
        font-size: 0; //this added
    }

    //New properties added
    #logo,#navbar{
        display: inline-block;
        vertical-align: top;
    }

    #logo{
        font-size: 1rem; //this added
        width: calc(100% - 700px); //this added

        background:red;
        height: 60px;
    }
    #navbar{
        font-size: 1rem; //this added

        width:700px;
        height: 60px;
        background: cyan;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T06:29:13.237

您可以使用`display: table-cell`and`table`和`table-layout: fixed`在同一行中设置 2 个具有相同高度的块，一个具有固定宽度，另一个占据父级的剩余宽度。

工作小提琴： http: [//jsfiddle.net/TpFjD/](http://jsfiddle.net/TpFjD/)兼容性：IE8+（如果你支持 IE7 和 IE6
，你必须使用相同的后备）`inline-block`

```
<div id="headernav">
    <div id="logo"> A </div>
    <nav id="navbar"> B </nav>
</div> 
```

/\

```
#headernav {
    display: table;
    width: 100%;
    background:#0000FF;
    height: 60px;
}
#logo {
    display: table-cell;
    background:red;
}
#navbar {
    display: table-cell;
    width: 700px;
    background: cyan;
} 
```

*如果*固定宽度在第一个块上，您可以将其浮动（向右或向左）并`overflow: hidden`在第二个块上使用。甚至 IE6 也兼容此方法。

# apache-flex - 如何在 Flex 中向 UIComponent 添加滚动条

> ID：15984887
> 
> 赞同：1
> 
> 时间：2013-04-13T06:17:21.377
> 
> 标签：apache-flex, scrollbar, uicomponents

我有以下情况。

```
<mx:Canvas id="canvas" height="100%" width="100%">
<mx:UIComponent id="chart" width="100%" height="100%"/> 
</mx:Canvas> 
```

现在有一个 SVGDocument 组件作为子组件添加到 UIComponent 之上。它基本上是 svg 图像。我已经为此实现了缩放功能。因此，在鼠标向上滚动和鼠标向下滚动时，SVGDocument 元素分别被放大和缩小。我想向 UIComponent 'chart' 添加滚动条，这样只要 SVGDocument 变得足够大，就会出现滚动条。目前我没有找到任何方法来添加它。有人可以建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T18:40:09.170

您需要将`UIComponent`at (0,0) 定位在 上`Canvas`并调整大小`Canvas`以匹配 SVG 图像的宽度和高度。将其包裹`Canvas`在 a 中`Box`，您将在需要时使用滚动条。这是显示或隐藏滚动条的`Canvas`大小。`Box`

```
<mx:Box width="100%" height="100%">
  <mx:Canvas id="canvas"><!-- set width & height to match SVG image -->
    <mx:UIComponent id="chart" x="0" y="0"/>
  </mx:Canvas>
</mx:Box> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:56:08.397

如果您不想手动管理滚动条，则应使用`Scroller`和`Group`组件（用于 spark）或某种用于 mx。`Box`不要忘记限制`Scroller`或`Box`大小以禁止它们扩展到其父边界之外。如果你想要自定义滚动行为，你可以手动将`Group`'s 的`clipAndEnableScrolling`属性设置为 true 并处理它的`viewport`属性。

# c - 我在 C 中构建决策树时如何存储它？

> ID：15984893
> 
> 赞同：0
> 
> 时间：2013-04-13T06:17:52.593
> 
> 标签：c, machine-learning

这里的概念问题。

我正在递归地构建决策树。函数的每次迭代都采用训练样本的一个子集，遍历所有特征和每个特征内所有可能的拆分，找到可能的最佳拆分，将子集拆分为两个较小的子集，然后调用自身（函数）两次，每次调用一次分裂子集。

我之前在 MatLab 中对此进行了编码，但它运行得太慢了，所以现在我在 C 中尝试它（我不太熟悉）。在 MatLab 中，我使用了一个全局“拆分”矩阵来保存每个拆分的信息（哪个特征，该特征中的什么值，如果这是一个叶节点，分类是什么，每个子节点的行号），并且这样我就可以使用新的测试数据点遍历该矩阵以找到其分类。

看起来 C 中的全局二维数组可以使用头文件，但如果有另一种方法，我宁愿不进入头文件。问题是，因为函数是递归调用的，所以我很难知道“拆分”中的下一个可用行是什么。我可以做一些事情，比如孩子的行是父行的 2*i 和 2*i+1，但是对于有很多拆分的大型数组，这将需要大量的初始存储。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T06:47:02.773

在我看来，您必须放弃 2D 数组来表示您的树。C 中任意程度的树通常如下所示：

```
struct node
{       struct node ** children;
        int num_children;
        /* Values in the node/leafs */
}; 
```

如果树的度数是固定的，或者对于每个节点都有一个最大值，那么下面会做

```
struct node
{       struct node * children;
        int num_children; /* If degree has only a maximum */
        /* Values in the node/leafs */
}; 
```

您将不得不使用`malloc`和朋友为节点及其子节点分配内存。

关于头文件：头文件是一种祝福（在 C 中是这样），而不是一种诅咒，但如果你坚持不这样做，那么它们总是可以替换它们的`#include`实例。

如果您要从 MatLab 转向另一种语言以加快实现速度，那么您可能需要首先考虑 C 之外的其他语言。Java、Python 甚至 Haskell 之类的语言可能会为您提供类似的加速，但对于所有指针来说都没有那么麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T07:30:42.187

在 C 中使用这种函数式设计并不漂亮，因为无法保证递归调用将被优化为循环，并且没有匿名函数。至少 C++ 中有 lambda；我建议 C++ 更适合于此，尽管 AFAIK 仍然不能保证 C++ 中的优化。

为了避免可能导致堆栈增长的递归，每个分支都需要返回它选择的下一个分支。调用者（main）然后循环返回值，并在返回值是我们的终端值时终止循环。我们将分支类型定义为函数指针：

```
typedef void branch(); 
```

然后我们声明每个实际分支返回一个分支类型：

```
branch initial(void) {
    /* do initial processing */
    srand(time(NULL));
    int x = rand() % 2;
    return x == 0 ? left : right;
}

branch terminal(void) {
    /* This should never be called */
    assert(0);
    return NULL;
}

branch left(void) {
    /* do left processing */
    return terminal; /* return a terminal branch to indicate no further
                      * processing */
}

branch right(void) {
    int x;
    /* do right processing, storing either a 0 in x to indicate right_left
     * as the selected branch, or 1 in x to indicate right_right...
     */
    return x == 0 ? right_left : right_right;
}

branch right_left(void) {
    /* do right_left processing */
    return initial; /* return initial to repeat that branch */
}

branch right_right(void) {
    /* do right_right processing; */
    return right; /* return right to repeat that branch */
} 
```

...并循环返回值将如下所示：

```
int main(void) {
    branch *(b)(void) = initial;
    while (b != terminal) {
        b = b();
    }
} 
```

# c# - 串口通讯和IP地址

> ID：15984894
> 
> 赞同：-2
> 
> 时间：2013-04-13T06:18:02.150
> 
> 标签：c#, winforms, serial-port

我能够建立与 bacnet 路由器的串行端口通信。

一切都很好，我可以更改路由器的名称等。

但是当我写入 IP 地址时： 我的代码：

```
serialPort1.WriteLine("10.1.1.168");
//or 
serialPort1.Write("10.1.1.168"); 
//It stores as '0.0.0.10' 
```

或者：

```
serialPort1.WriteLine("145.100.100.168"); //it stores as '0.0.0.145' 
```

或者：

```
serialPort1.WriteLine("145100100168"); //Im reaching lol 
```

我可以更改，例如路由器名称：

```
serialPort1.WriteLine("Project1234"); //and it stores perfectly 
```

我已经完成了转换（二进制、十六进制、ipAddress），但它仍然存储了一个错误的值。

有任何想法吗？谢谢你的帮助！！

更新 - 好的，这就是我到目前为止所拥有的：

```
IPAddress ip = IPAddress.Parse(txtWrite.Text);
Byte[] bytes = ip.GetAddressBytes();
for (int i = 0; i < bytes.Length; i++)
{
    string str = bytes[i].ToString();
    MessageBox.Show(str);
    serialPort1.Write(str+".");
 }
 serialPort1.Write("\r\n"); 
```

但问题是，如果超过 3 位数字“192.168.168.5”，它将不会添加“。” 导致“1921681685”。（注意最后的小数点？）但是如果我输入“10.1.1.168”，它会存储为“10.1.1.168”并且最后没有小数点，这是我想要或需要的那个 IP 地址。我究竟做错了什么？？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:17:34.020

我想这根本与波特率或设置无关。只是我们不知道如何指定IP地址？

在您的最后一次更新中，尝试构建一个 if 以便最后一部分不发送“。”。

```
IPAddress ip = IPAddress.Parse(txtWrite.Text);
Byte[] bytes = ip.GetAddressBytes();
for (int i = 0; i < bytes.Length; i++)
{
    string str = bytes[i].ToString();
    MessageBox.Show(str);
    if(i < bytes.Length - 1)//Try this out
    {
        serialPort1.Write(str+".");
    }
 }
 serialPort1.Write("\r\n"); 
```

类似的东西。如果我理解的话，每个 x（在 xxxx 中）都存储在变量字节中？我认为您也在最后一个 x 之后发送一个点，所以我认为这并不常见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T08:03:44.460

[SerialPort-Constructor](http://msdn.microsoft.com/de-de/library/system.io.ports.serialport.aspx)不知道并[期望](http://msdn.microsoft.com/de-de/library/system.net.ipaddress.aspx)IPAdress

字符串参数**不是**IP 地址！例如“COM1”。这就是“Project1234”有效的原因。

编辑：

你显然混合了不同的东西：

*   在计算中，[串行端口](http://en.wikipedia.org/wiki/Serial_port)是一种串行通信物理接口，信息通过它一次一位地传入或传出。（维基百科）
*   在计算中，[并行端口](http://en.wikipedia.org/wiki/Parallel_port)是并行通信的物理接口。它也称为打印机端口或 Centronics 端口。（维基百科）

**这两个接口都与IP地址完全无关！**

您在谈论 IP 地址，这意味着您想通过[TCP/IP](http://en.wikipedia.org/wiki/Internet_Protocol)协议建立连接。一个好的开始是：[使用 C# 的 TCP/IP 聊天应用程序](http://www.codeproject.com/Articles/12893/TCP-IP-Chat-Application-Using-C)

编辑（2）：USB串行通信确实是串行的，但又不是您尝试访问的串行端口。对于 USB 通信，有一些库。[Leitner](http://www.florian-leitner.de/index.php/2007/08/03/hid-usb-driver-library/)或[SharpDevelop](http://www.icsharpcode.net/opensource/sharpusblib/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:57:43.023

感谢你的帮助。我想通了，这与字符串的类型无关……这是字符串输入路由器的时间。

```
foreach (char c in txtWrite.Text)
{
    serialPort1.WriteLine(c.ToString());
    System.Threading.Thread.Sleep(100);

 }
 serialPort1.WriteLine("\r\n"); 
```

就这样。

# silverlight - 自定义控件绑定查询

> ID：15984895
> 
> 赞同：0
> 
> 时间：2013-04-13T06:18:02.217
> 
> 标签：silverlight, windows-phone-8

我通过从 ContentControl 继承来创建自定义控件。下面是 Generic.xaml 中的 XAML 代码

```
<Style TargetType="local:MyCustomControl">
    <Setter Property="Background" Value="YellowGreen"></Setter>
    <Setter Property="IconSource" Value="/Themes/icon.png"></Setter>

    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:MyCustomControl">
                <Border BorderBrush="White" BorderThickness="2">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="100"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Image Grid.Column="0" Source="{TemplateBinding IconSource}" Stretch="None"></Image>

                        <Border Background="{TemplateBinding Background}"  Grid.Column="1">
                            <ContentPresenter x:Name="ContentContainer" 
                                              Content="{TemplateBinding Content}" 
                                              ContentTemplate="{TemplateBinding ContentTemplate}" 
                                              Margin="{TemplateBinding Padding}">
                            </ContentPresenter>
                        </Border>
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter.Value>

    </Setter>
</Style> 
```

在我的应用程序中，我以这种方式使用了自定义控件：

```
 <mycontrol:MyCustomControl Height="100" Width="400" 
                               Foreground="Red"
                               IconSource="/Assets/ApplicationIcon.png">
        <mycontrol:MyCustomControl.Content>
            <StackPanel>
                <TextBlock  Text="Some Text Content Here"/>
                <Button Content="Test Button" Foreground="Pink" Background="Black"/>
            </StackPanel>
        </mycontrol:MyCustomControl.Content>
    </mycontrol:MyCustomControl> 
```

我不明白stackpanel 中的文本块文本**如何以及为什么**会变成红色。有人可以用简单的话解释我如何以及为什么会发生这种情况吗？

这是输出：

![在此处输入图像描述](https://i.stack.imgur.com/oIkss.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T07:02:34.353

那是因为

```
<mycontrol:MyCustomControl Height="100" Width="400" 
                           Foreground="Red"
                           IconSource="/Assets/ApplicationIcon.png"> 
```

`Foreground`然后沿元素树继承到您的`StackPanel`,`TextBlock`和`Button`中，但是因为`Button`已`Foreground`明确设置它不是红色的。

# java - 如何在 Java 的 POI 中使用 XWPFTable 合并单元格（或应用 colspan）？

> ID：15984896
> 
> 赞同：7
> 
> 时间：2013-04-13T06:18:06.390
> 
> 标签：java, apache-poi, xwpf

在 poi 中创建表格非常简单，但它的教程非常有限，我找不到可以在表格中创建简单合并单元格以生成 docx 文件的教程。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-28T14:00:15.297

如果您已创建表格、表格内的行和行内的单元格，则可以将 gridSpan 添加到单元格属性：

```
if (cell.getCTTc().getTcPr() == null) cell.getCTTc().addNewTcPr();
if (cell.getCTTc().getTcPr().getGridSpan() == null) cell.getCTTc().getTcPr().addNewGridSpan();
cell.getCTTc().getTcPr().getGridSpan().setVal(2); 
```

注意：单元格是 org.apache.poi.xwpf.usermodel.XWPFTableCell。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-12-15T23:10:19.813

要水平/垂直合并，您需要创建 2 个 CTHMerge 并使用 setVal：

*   一个用于您将保留的单元格（STMerge.RESTART）；
*   第二个用于合并单元格（STMerge.CONTINUE）；

a) 2x2 表的**水平合并**[示例（带有示例的图像）](https://i.stack.imgur.com/5FB4K.png)：

| ***********|*********** | --> |___________ ***********|
|*********** | ***********| --> |*********** ___________|

```
 // First Row
CTHMerge hMerge = CTHMerge.Factory.newInstance();
hMerge.setVal(STMerge.RESTART);
table.getRow(0).getCell(0).getCTTc().getTcPr().setHMerge(hMerge);
table.getRow(1).getCell(0).getCTTc().getTcPr().setHMerge(hMerge);

 // Secound Row cell will be merged/"deleted"
CTHMerge hMerge1 = CTHMerge.Factory.newInstance();
hMerge1.setVal(STMerge.CONTINUE);
table.getRow(0).getCell(1).getCTTc().getTcPr().setHMerge(hMerge1);
table.getRow(1).getCell(1).getCTTc().getTcPr().setHMerge(hMerge1); 
```

b)**垂直**合并[示例（带有示例的图像）](https://i.stack.imgur.com/1yNBR.png)

```
 // First Row
CTVMerge vmerge = CTVMerge.Factory.newInstance();
vmerge.setVal(STMerge.RESTART);
table.getRow(0).getCell(0).getCTTc().getTcPr().setVMerge(vmerge);
table.getRow(0).getCell(1).getCTTc().getTcPr().setVMerge(vmerge);

 // Secound Row cell will be merged 
CTVMerge vmerge1 = CTVMerge.Factory.newInstance();
vmerge1.setVal(STMerge.CONTINUE);
table.getRow(1).getCell(0).getCTTc().getTcPr().setVMerge(vmerge1);
table.getRow(1).getCell(1).getCTTc().getTcPr().setVMerge(vmerge1); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-14T01:36:13.287

为每个表格行创建一个单独`XWPFTable`的行将起作用并且应该非常好。所有表格都在后台合并到最终 Word 文档中的一个表格中。您将需要所有这些罐子`poi-3.9.jar`，`poi-ooxml-3.9.jar`和`poi-ooxml-schemas-3.9.jar`

```
XWPFTable table1 = document.createTable(1,1); // This is your row 1
XWPFTable table2 = document.createTable(1,3); // This is your row 2

// Now it's time to span each column of table1 and table2 to a span of your choice
// lets say 6 is the total span required assuming there's some row with 6 columns.

spanCellsAcrossRow(table1, 0, 0, 6);
spanCellsAcrossRow(table2, 0, 0, 2);
spanCellsAcrossRow(table2, 0, 1, 2);
spanCellsAcrossRow(table2, 0, 2, 2);

private void spanCellsAcrossRow(XWPFTable table, int rowNum, int colNum, int span) {
    XWPFTableCell  cell = table.getRow(rowNum).getCell(colNum);
    cell.getCTTc().getTcPr().addNewGridSpan();
    cell.getCTTc().getTcPr().getGridSpan().setVal(BigInteger.valueOf((long)span));
} 
```

# php - PHP While 循环 - 使用 Heredoc 多次写入变量

> ID：15984900
> 
> 赞同：0
> 
> 时间：2013-04-13T06:18:13.533
> 
> 标签：php, arrays, while-loop, increment, heredoc

我正在编写一个脚本来从数据库中提取并动态创建一个项目表。每次我尝试增加变量时，我使用的循环都会中断。

这是一个具有相同结果的示例：

这个循环可以很好地创建多个表。

```
<?php

$item=array("item1", "item2", "item3", "item4", "item5", "item6", "item7");
$i=0;

while($i!=count($item)){
$galleryItem.=<<<HTML
<table>
<tr>
<td>$item[$i]</td>
</tr>
</table>
HTML;
$i++;
}

echo $galleryItem;
?> 
```

但是，此循环将不起作用。我希望它在表中创建两列，并在多行中完整输出数组。

```
<?php

$item=array("item1", "item2", "item3", "item4", "item5", "item6", "item7");
$i=0;

while($i!=count($item)){

$galleryItem.=<<<HTML
<table>
<tr>
<td>$item[$i]</td>

HTML;

$i++;

$galleryItem.=<<<HTML

<td>$item[$i]</td>
</tr>
</table>
$i++;
}

echo $galleryItem;
?> 
```

我可能做错了什么？PHP 是否不允许您在 while 循环中多次写入同一个变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T06:27:09.427

您的数组元素用完了。您只有 7 个项目，但尝试回显 8 个元素。您应该进行适当的边界检查，以查看在使用它们时是否有足够的元素。

首先，将您的 while 循环替换为：

```
while( $i <= count($item) ) {
   ...
} 
```

但是您的问题实际上是由增加您的计数器`$i++`并回显另一个元素而不检查一个元素是否确实存在引起的。快速修复：

```
<td><?php echo ($i <=count($item)) ? $item[$i] : ''; ?></td> 
```

**更新：**我添加了一个示例，说明如何在没有 HereDoc 的情况下在常规 PHP 中执行此操作：

```
<?php

    $item = array("item1", "item2", "item3", "item4", "item5", "item6", "item7");
    $i=0;

?><table>
<?php while( $i <= count($item) ): ?>
    <?php if (($i % 2) == 0): ?><tr><?php endif ?>
        <td><?php echo ($i < count($item)) ? $item[$i] : ''; ?></td>
    <?php if (($i % 2) == 1): ?></tr><?php endif ?>
<?php $i++; endwhile; ?>
</table> 
```

# java - 处理所有异常

> ID：15984901
> 
> 赞同：0
> 
> 时间：2013-04-13T06:18:14.917
> 
> 标签：java, exception, exception-handling

下面的代码会处理任何类型的异常吗？

```
try
{
    // some code
}
catch(Exception e)
{
    // some code part
} 
```

或者我应该这样做：

```
try
{
    // some code 
}
catch(type of Exception e)
{
    // some coding stuff
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T06:31:25.203

您可以尝试以下操作：

1）捕获所有`Exception`对象及其子类型：

```
try {

     // potential exception throwing code

    }
    catch(Exception e){
 } 
```

2）捕获所有`Throwable`和子类型：

```
 try {

     // potential exception and error throwing code

    }
    catch(Throwable t){
 } 
```

3) 捕捉任何 XYZ 异常及其子类型：

```
 try {

     // potential XYZException throwing code

    }
    catch(XYZException xyzException){
 } 
```

有关详细信息，请参阅 Oracle 站点：[http](http://docs.oracle.com/javase/tutorial/essential/exceptions/) ://docs.oracle.com/javase/tutorial/essential/exceptions/ 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T06:34:37.770

尝试之后应该是捕获。FileNotFoundException 是 IOException 的子异常。所以它必须是第一位的。如果您打开了某个文件并且在 try 块中发生异常，您需要在 finally 块中关闭它。finally 块总是在 try 块退出时执行。

```
try {

} 
catch (FileNotFoundException e) {
    //do something with FileNotFoundException
} 
catch (IOException e) {
    //do something with IOException
}
finally
{
     // do some clean up operation
} 
```

[http://docs.oracle.com/javase/tutorial/essential/exceptions/try.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/try.html)

[http://docs.oracle.com/javase/tutorial/essential/exceptions/catch.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/catch.html)

[http://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html)

[http://www.programcreek.com/2009/02/diagram-for-hierarchy-of-exception-classes/](http://www.programcreek.com/2009/02/diagram-for-hierarchy-of-exception-classes/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T06:23:41.657

```
try { 
   //some code 
} catch(Exception e) { 
   //some code part 
} 
```

它将处理所有类型的异常，因为它的父类是所有类型的异常，但是如果您收到类似`AWTError`或`VirtualMachine Error`->的错误`OutOfMemoryError`，`StackOverFlowError`则它不会处理它。

要处理所有类型的异常和错误，请这样做。

```
try {
    // some code 
}
catch(Throwable throwable) {
   // some coding stuff
} 
```

示例 2：

```
try {
    // some code 
}
catch(type of Exception e) {
   // some coding stuff
} 
```

这不会处理所有类型的异常。如果你在这里写，`NullPointerException`那么它只会处理`NullPointerException`.

请记住：以这样一种方式定义 catch ，将子类放在第一个然后是父类，否则代码将变得无法访问，您将获得编译时错误。

```
try {
    // some code 
}
catch(NullPointerException e) {
   // some coding stuff
}
catch(Exception e) {
  // some coding stuff
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T06:24:19.547

这取决于您的 catch 语句中的异常类型， `catch (Exception e)`它将捕获任何异常，因为它是所有异常的父类。 `catch (FileNotFoundException e)`只会捕获 FileNotFoundExceptions。

这允许您有多个 catch 语句：

```
try {
...            
}
catch (FileNotFoundException e) {
        //do something with FileNotFoundException
} 
catch (IOException e) {
        //do something with IOException
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T06:24:31.300

```
try { some code } catch(Exception e) { some code part } 
```

将捕获任何类型的异常`Exception`或其任何子类。如果要捕获任何异常，请使用

```
try { some code } catch(Throwable e) { some code part } 
```

那么你也会得到`Error`s （找不到类等）。

# javascript - 为什么我的 JQuery 脚本不起作用？

> ID：15984902
> 
> 赞同：0
> 
> 时间：2013-04-13T06:18:17.383
> 
> 标签：javascript, jquery, html, css

我不确定为什么这不起作用，我在网上阅读的所有文章都使它看起来应该起作用。好吧，这是我的 html 代码：()

```
<!doctype html>
<html>
<head>
<script src = "http://code.jquery.com/jquery-latest.min.js" type = "text/javascript"></script>
<script src = "showmotto.js" type = "text/javascript"> </script>
</head>

<body>

<table>

<?php

    $pdo = new PDO('mysql:host=localhost;dbname=test', 'root', '');
    $pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);  
    $sth = $pdo->query('SELECT * from users');
    $sth->setFetchMode(PDO::FETCH_ASSOC);   

    while( $row = $sth->fetch() )
    {
        echo "<tr><td class = \"users\" data-motto = '{$row['motto']}' >{$row['username']}</td></tr>";      
    }

    $pdo = null;

?>

</table>

</body>

</html> 
```

这里是 show-motto.js。我的目标是在用户将鼠标悬停在表格上时使用 data-motto 中的信息提醒用户。但是我还没有走那么远，因为由于某种原因，鼠标悬停事件不起作用

```
$('td.users').live('mouseover', function()
    alert(0);
}); 
```

我也试过 $('.users') 但它也不起作用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T06:19:44.597

在最新版本的 jQuery 中，`live`已被删除。

你可以做的是：

```
$(document).on('mouseover', 'td.users', function() {
    alert(0);
}); 
```

或者，因为元素都是最初创建的：

```
$(function(){
   // put all your code inside this block
   $('td.users').on('mouseover', function() {
      alert(0);
   });
}); 
```

另一种解决方案，类似于第二种解决方案，是将所有 JS 代码放在`script`位于末尾`body`（即表格之后）的元素中。

您还添加了一个缺少的左括号。您应该使用显示所有错误的浏览器[控制台检测到此问题。](https://developers.google.com/chrome-developer-tools/docs/console)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T06:21:40.603

因为最近版本的 jquery**不推荐使用 live 功能......而不是****在**like上使用

```
$(function(){
    $('td.users').on('mouseover', function()
        alert(0);
    });
}) 
```

或者

```
$(document).ready(function(){
    $('td.users').on('mouseover', function()
        alert(0);
    });
}) 
```

# java - 在数据库中插入 utf-8 字符串

> ID：15984903
> 
> 赞同：0
> 
> 时间：2013-04-13T06:18:17.590
> 
> 标签：java, sql

```
String xmlSt = '&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-16&quot;?&gt;&lt;form&gt;&lt;control&gt;&lt;type&gt;SINGLE&lt;/type&gt;&lt;row&gt;&lt;column&gt;&lt;level&gt;1&lt;/maxoccurs&gt;&lt;minlength&gt;1&lt;/minlength&gt;&lt;maxlength&gt;250&lt;/maxlength&gt';

String query = "insert into daily_diary(xml_val) values('"+ xmlSt + "'");
int result = entityManager.createNativeQuery(query).executeUpdate(); 
```

但它抛出如下：

```
SQL Error: 0, SQLState: null
11:45:04,175 ERROR [JDBCExceptionReporter] The value is not set for the parameter number 1. 
```

当我们传递冗长的字符串值时它会引发错误，否则它会成功插入。需要一种解决方案来`utf-8`在 db 中插入冗长的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T07:41:12.097

在我看来，您只是想插入一个比列允许的长度更长的字符串。如果可以的话，增加列的长度。如果不能，您可能需要切换到不同的列类型。

（这似乎与 UTF-8 无关，但如果您确实有一个字符串，其中字符编码为多个字节，您可能会发现存储在数据库列中的“字符”（实际上是字节）比有更多原始字符串中的字符。）

* * *

我应该注意其他几件事……可能与您的问题有关。

1.  您的代码示例不是有效的 Java。“字符串”文字使用单引号......编译器将拒绝它。

2.  如果实际的字符串包含单引号字符或（可能）其他内容，则您通过字符串抨击生成的查询可能是语法上无效的 SQL。（或者更糟糕的是，它可能是有效的，但意味着完全出乎意料的事情。想想 SQL 注入！！！）。建议您使用带有“？”的 PreparedStatement 查询中的占位符，然后将字符串添加为查询参数。这将为您处理任何 SQL 转义（并防止 SQL 注入 ...）。

3.  您不需要在存储在 SQL 数据库中的字符串中使用 HTML / XML 实体……除非应用程序设计特别要求这样做。

# asp.net-mvc - DotNetOpenAuth 资源所有者密码凭证授予令牌存储

> ID：15984906
> 
> 赞同：4
> 
> 时间：2013-04-13T06:19:07.717
> 
> 标签：asp.net-mvc, dotnetopenauth, asp.net-web-api

我目前正在开发一个小型移动项目，我想使用 DotNetOpenAuth 来保护 API。我目前决定使用 OAuth 2.0 规范“资源所有者密码凭据授予”的 4.3。

我下载了示例，它有一个授权服务器示例，它有很大帮助，所以我设法让一切都在这方面工作。我使用 CheckAuthorizeResourceOwnerCredentialGrant 方法通过我的自定义身份验证提供程序对用户进行身份验证。这稍后会调用成功返回访问令牌的 CreateAccessToken 方法。

现在我知道我需要存储令牌以授权用户处理以后的请求。

那是我有点失落的地方。有没有一种方法可以遵循 DNOA 最佳实践，而无需我自己烘焙？也许在当前的样本中？

# cuda - cudaMemcpyToSymbol vs. cudaMemcpy 为什么它仍然存在 (cudaMemcpyToSymbol)

> ID：15984913
> 
> 赞同：11
> 
> 时间：2013-04-13T06:20:23.727
> 
> 标签：cuda

正如其他问题和链接所述，您不能再为此功能使用符号名称。现在这个功能已经消失了，什么时候会想用这个`cudaMemCpy`呢？您什么时候想使用它？权衡或好处是什么？

[https://docs.nvidia.com/cuda/cuda-runtime-api/group__CUDART__MEMORY.html#group__CUDART__MEMORY_1g9bcf02b53644eee2bef9983d807084c7](https://docs.nvidia.com/cuda/cuda-runtime-api/group__CUDART__MEMORY.html#group__CUDART__MEMORY_1g9bcf02b53644eee2bef9983d807084c7)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-13T06:45:17.673

简而言之，因为`cudaMemcpy`不能做与`cudaMemcpyToSymbol`没有额外 API 调用相同的事情。考虑一个常量内存数组：

```
__constant__ float coeffs[8]; 
```

要使用 将值复制到此数组`cudaMemcpyToSymbol`，只需执行

```
cudaMemcpyToSymbol(coeffs, hostData, 8*sizeof(float)); 
```

做同样的事情`cudaMemcpy`需要这样：

```
float *dcoeffs;
cudaGetSymbolAddress((void **)&dcoeffs, coeffs);
cudaMemcpy(dcoeffs, hostData, 8*sizeof(float), cudaMemcpyHostToDevice); 
```

`cudaMemcpy`如果没有事先进行符号查找，直接调用是非法的。

[标准免责声明：所有在浏览器中编写的代码，无需访问文档或编译器，使用风险自负]

# datetime - 黑莓中的 HTTP 日期格式

> ID：15984916
> 
> 赞同：0
> 
> 时间：2013-04-13T06:20:49.193
> 
> 标签：datetime, blackberry, java-me

我需要黑莓中的 HTTP 日期格式。例子：

> 2013 年 4 月 13 日星期六 06:06:13 GMT

我已经实现了。这是我的 Date Util 类代码：

```
package mypackage;

import java.util.Calendar;
import java.util.Date;
import java.util.TimeZone;

import net.rim.device.api.i18n.Locale;
import net.rim.device.api.i18n.SimpleDateFormat;

public class DateUtils {

       private static SimpleDateFormat _df;

       public static String getDate()
       {
          Calendar cal = Calendar.getInstance();
          cal.setTime( new Date() );

          int year = cal.get( Calendar.YEAR );
          int month = cal.get( Calendar.MONTH ) + 1;
          int day = cal.get( Calendar.DAY_OF_MONTH );

          return "" + year
                 + "-" + month
                 + "-" + day;
       }

       public static String getHttpDate()
       {
          return getHttpDate( new Date() );
       }

       public static String getHttpDate( long timestamp )
       {
          return getHttpDate( new Date( timestamp ) );
       }

       public static String getHttpDate( Date date )
       {
          return _df.format( date );
       }

       public static String getTime()
       {
          Calendar cal = Calendar.getInstance();
          cal.setTime( new Date() );

          int hours = cal.get( Calendar.HOUR_OF_DAY );
          // use 24 hour clock
          int minutes = cal.get( Calendar.MINUTE );
          int seconds = cal.get( Calendar.SECOND );
          int milli = cal.get( Calendar.MILLISECOND );

          return formatTime( hours, minutes, seconds, milli );
       }

       public static String getTimestamp()
       {
          Calendar cal = Calendar.getInstance();
          cal.setTime( new Date() );

          int year = cal.get( Calendar.YEAR );
          int month = cal.get( Calendar.MONTH ) + 1;
          int day = cal.get( Calendar.DAY_OF_MONTH );
          int hours = cal.get( Calendar.HOUR_OF_DAY );
          // use 24 hour clock
          int minutes = cal.get( Calendar.MINUTE );
          int seconds = cal.get( Calendar.SECOND );
          int milli = cal.get( Calendar.MILLISECOND );

          return "" + year
                 + "-" + month
                 + "-" + day
                 + "_" + formatTime( hours, minutes, seconds, milli );
       }

       private static String formatTime( int hours, int minutes, int seconds, int milli )
       {
          StringBuffer buf = new StringBuffer();
          buf.append( "" + hours );

          buf.append( "." );

          if( minutes < 10 )
             buf.append( "0" + minutes );
          else
             buf.append( "" + minutes );

          buf.append( "." );

          if( seconds < 10 )
             buf.append( "0" + seconds );
          else
             buf.append( "" + seconds );

          buf.append( "-" );

          if( milli < 10 )
             buf.append( "00" + milli );
          else if( milli < 100 )
             buf.append( "0" + milli );
          else
             buf.append( "" + milli );

          return buf.toString();
       }

       static
       {
          _df = new SimpleDateFormat( "EEE, dd MMM yyyy HH:mm:ss zzz");

       }
} 
```

我正在使用这个类：

```
private String getDate()
{       
    String date= DateUtils.getHttpDate(new Date());
    if(date.trim().length()!=("EEE, dd MMM yyyy HH:mm:ss zzz").length())
        date = date.substring(0, ("EEE, dd MMM yyyy HH:mm:ss zzz").length());
    System.out.println("Date is >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>"+date);
    return date;
} 
```

我面临的问题是，它在 OS 5 和 Os 7 的模拟器上工作。但是，不在 OS 6 模拟器上。在火炬 9800 模拟器上，我得到

> 2013 年 4 月 13 日星期六 11:33:19

什么时候，我检查了设备，面临同样的问题。请帮忙，我急需这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:26:14.157

这`SimpleDateFormat`会将您的`Date`对象转换为`Calendar`将其时区作为设备默认时区的对象

您得到的字符串实际上类似于`Sat, 13 Apr 2013 11:33:19 Asia/xxxx`where xxxx 是某个地方，具体取决于您在亚洲的居住国家/地区。然后你把它削减到`Sat, 13 Apr 2013 11:33:19 Asi`

如果要获取 GMT 数据，则需要传递具有正确时区的 Calendar 对象。

```
public static String getHttpDate( Date date )
{
    Calendar cal = Calendar.getInstance(TimeZone.getTimeZone("GMT"));
    cal.setTime(date);
    return _df.format(cal);
} 
```

PS：以上代码仅适用于 BlackBerry，不适用于 Java SE。

# c++ - 合并向量

> ID：15984917
> 
> 赞同：-1
> 
> 时间：2013-04-13T06:20:51.193
> 
> 标签：c++, vector, merge

到目前为止，这是我的代码，我想做的是说我为第一个向量输入 1 2 3，为第二个向量输入 9 8 7，我希望它打印我们的 1 9 2 8 3 7。但我不知道它出来，有人可以指出我正确的方向。先感谢您。

```
#include <iostream>
#include <algorithm> 
#include <vector>

using namespace std;

vector<int> append(vector<int> a, vector<int> b)
{
    int n = a.size();
    int m = b.size();
    vector<int> c(n + m);
    int i;

    for (i = 0; i < n; i++)
        c[i] = a[i];

    for (i = 0; i < m; i++)
        c[n + i] = b[i];

    return c;
}

vector<int> merge(vector<int> a, vector<int> b) 
{
    int n = a.size();
    int m = b.size();
    vector<int> c(n + m);
    int i;

    for (i = 0; i < n; i++)
        c[i] = a[i];

    for (i = 0; i < m; i++)
        c[n + i] = b[i];

    return c;
}

vector<int> merge_sorted(vector<int> a, vector<int> b)
{

    int n = a.size();
    int m = b.size();
    vector<int> c(n + m);
    int i;

    for (i = 0; i < n; i++)
        c[i] = a[i];

    for (i = 0; i < m; i++)
        c[n + i] = b[i];

return c;
}

int main()
{
    cout << "Please enter a set of numbers, insert -1 when done.\n";
    vector<int>a;
    bool more = true;
    while (more)
    {
        int n;
        cin >> n;
        if (n == -1)
            more = false;
        else
            a.push_back(n);
   }

    cout << "Please enter another set of numbers, insert -1 when done.\n";
    vector<int>b;
    more = true;
    while (more)
   {   
        int m;
        cin >> m;
        if (m == -1)
        more = false; 
        else 
        b.push_back(m);
    }

   vector<int>d = append(a,b);
    {

        int i;
    cout << "Appended: ";
        for (i= 0; i < d.size(); i++)

        cout << d[i] << " ";
    cout << "\n";
}

vector<int>r = merge(a,b);
{
  cout << "Merged: ";

  vector<int> all_nodes(a.size() + b.size());

  sort(a.begin(), a.end());
      sort(b.begin(), b.end());

      merge(a.begin(), a.end(), b.begin(), b.end(), all_nodes.begin());
  cout << "\n";
}

    vector<int>z = merge_sorted(a,b);
{

    a.insert( a.end(), b.begin(), b.end() );
    sort( a.begin(), a.end() );

        cout << "Sorted: ";

    for (vector<int>::iterator it = a.begin(); it != a.end(); ++it)
        cout << *it << " ";
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T06:29:42.750

```
Assuming both the vectors of same size

vector<int> vec1;
vector<int> vec2;
vector<int> result;

vec1.push_back(1);
vec1.push_back(2);
vec1.push_back(3);

vec2.push_back(7);
vec2.push_back(8);
vec2.push_back(9);

int nsize = vec1.size();//Take any one vector;
int j = 0;
for(int i=0;i<nsize;i++)
{
  result.push_back(vec1[i]);
  result.push_back(vec2[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T06:51:40.453

您的合并代码与附加代码**完全相同。**这将如何运作？您没有考虑的另一个问题是当您有大小不等的向量时合并是如何工作的。在你问自己这个问题之前，你无法解决这个问题。

像这样的东西可能是你需要的。重要的区别是只有一个循环。另一个区别是我`push_back`用来构建向量而不是尝试预先计算它的大小。我认为这对这个算法来说更自然一些。

```
vector<int> merge(vector<int> a, vector<int> b) 
{
    int n = a.size();
    int m = b.size();
    vector<int> c;
    int i;

    for (i = 0; i < n || i < m; i++)
    {
        if (i < n)
           c.push_back(a[i]);
        if (i < m)
           c.push_back(b[i]);
    }
    return c;
} 
```

# javascript - JS：回调函数未执行

> ID：15984923
> 
> 赞同：0
> 
> 时间：2013-04-13T06:21:36.133
> 
> 标签：javascript, jquery, callback, synchronous

我遵循 JS 代码进行表单提交，我将表单提交保存在一个名为 的函数中`submitForm`，这样它就可以用于多个表单，只需将`selector`值`action`传递给`submitForm`函数。

```
function submitForm(selector, action, onComplete) {
  var response
  $(selector).submit(function (e) {
    e.preventDefault();
    var data = $(this).serializeArray();
    $.ajax({
      type: 'POST',
      url: action,
      data: data,
      dataType: 'json',
      a
      sync: false,
      success: function (data) {
        response = data;
      }
    });
  });
  return response;
}
submitForm(".lform", "user.php", function (response) { // Callback function
  // Doing necessary stuff
}); 
```

在上面的代码中，回调函数没有执行，可能是什么原因？在回调函数内部，有以下代码，

```
location.reload(); // To refresh the total DOM,
$(".c_form").dialog({
  closeOnEscape: false,
  title: title,
  modal: true,
  close: function () {
    $(this).dialog('destroy').hide();
  }
}); 
```

我想在页面重新加载完成后显示对话框，可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T06:36:20.930

我同意 @Joseph the Dreamer 并添加错误回调，您的请求可能有错误，因为成功回调没有执行，所以添加它就像成功回调一样：

```
error: function () {
  alert("ERROR!!");
} 
```

而且您的代码也无法以这种方式显示对话框，您在调用 reload 方法后渲染对话框，这会创建一个新的 DOM 元素，其中前一页对新页面无能为力（重新加载后），我的建议是发送一个查询字符串参数表示显示对话框，`domain.com/smth?show_dialog=1`并在页面加载时在您的 JS 中检查此参数是否存在以显示对话框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T06:26:07.030

你**不能**回来`response`。那个时候还是`undefined`因为AJAX还没有放`data`上去。

您的回调函数是第三个参数`onComplete`。在 AJAX 成功后，执行它并传递它`data`：

```
success: function (data) {
  onComplete(data);
} 
```

# jquery - jquery 表单插件不显示当前服务器响应（图像），但它在 firefox、opera 和 safari 中显示以前的响应（图像）

> ID：15984930
> 
> 赞同：0
> 
> 时间：2013-04-13T06:22:43.267
> 
> 标签：jquery, forms, plugins

我正在使用 jquery 表单插件（版本：3.31.0-2013.03.27）和 PHP 开发网站。我基本上使用 jquery 表单插件将图像提交到服务器，服务器处理图像并将其发送回浏览器。到现在一切都很好！但是一旦我上传了一张新图片，问题就出现了，浏览器最终只显示以前上传的图片。服务器端没问题，它获取新图像并存储在文件系统中。代码在谷歌浏览器中运行良好，没有问题，但火狐、opera 和 safari 显示之前上传的图像。我的 jQuery 代码是：

```
$(document).ready(function() { 
            $('#UploadForm').on('submit', function(e) {
                e.preventDefault();
                $('#SubmitButton').attr('disabled', ''); // disable upload button
                //show uploading message
                $("#output").html('<div style="padding:10px"><img src="pic/ajax-loader2.gif" alt="Please Wait"/> <span>Uploading...</span></div>');
                $(this).ajaxSubmit({
                    target: '#output',
                    success:  afterSuccess //call function after success
                });
            });
        }); 
```

任何帮助表示赞赏！提前致谢！！！

# tomcat - 将tomcat嵌入到grails应用程序

> ID：15984931
> 
> 赞同：0
> 
> 时间：2013-04-13T06:22:45.200
> 
> 标签：tomcat, grails-2.2

我完成了一个用 Grails 构建的应用程序，我希望将 tomcat 服务器嵌入到我的应用程序中，所以最终用户所要做的就是运行 .exe 或批处理文件来运行应用程序而不安装 tomcat 或任何 Web 服务器，是否适用，如果是，如何处理？

谢谢谢里夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:06:07.333

您可以使用 Burt Beckwith 创建的[Grails Standalone 插件](http://grails.org/plugin/standalone)。Standalone 插件构建一个可运行的 JAR 文件，其中包含从您的应用程序构建的嵌入式战争和嵌入式 Tomcat 7 或 Jetty 7 实例。这允许您通过运行 java -jar Standalone.jar 来构建可以在任何具有 Java 5 或更高版本的计算机上运行的单个存档。

# android - 片段中的 RoboGuice 依赖注入

> ID：15984934
> 
> 赞同：0
> 
> 时间：2013-04-13T06:22:50.643
> 
> 标签：android, roboguice

我一直在使用带有 Activity 和 Fragment Activity 的 RoboGuice 依赖注入。但是我无法弄清楚如何使用片段来使用它，因为我们没有在 Fargment 中调用 setContentview。谁能告诉我一个如何使用它的例子？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:46:20.583

[这](https://github.com/roboguice/roboguice/wiki/injectfragment)是描述解决方案的帖子。主要步骤是：

1.  扩展`RoboFragment`.
2.  `View`从.返回一个根`onCreateView()`。
3.  使用`@InjectView`注释的方式与`RoboActivity`.

# ios - 向 iOS 应用程序添加自定义字体以查找其真实姓名

> ID：15984937
> 
> 赞同：39
> 
> 时间：2013-04-13T06:23:04.863
> 
> 标签：ios, objective-c, cocoa-touch

我有两种字体要添加到我的应用程序中以供使用。

这是字体图像。目前这些文件被命名为

```
name.font       = [UIFont fontWithName:@"Helvetica Neue LT Pro-Medium" size:10];
headline.font   = [UIFont fontWithName:@"Helvetica Neue LT Pro-Light" size:8]; 
```

把相同的名字放在`Font Avaliable option in plist file`.

我也尝试过添加文件名，如

```
HelveticaNeueLTPro-Lt
HelveticaNeueLTPro-Md 
```

但似乎没有任何效果。我怎样才能得到字体的确切名称。

![在此处输入图像描述](https://i.stack.imgur.com/8VgDw.png)

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-04-13T06:49:35.827

用于`+[UIFont familyNames]`列出系统已知的所有字体系列名称。对于每个系列名称，您可以使用`+[UIFont fontNamesForFamilyName:]`列出系统已知的所有字体名称。尝试将它们打印出来以查看系统期望的名称。示例代码：

```
static void dumpAllFonts() {
    for (NSString *familyName in [UIFont familyNames]) {
        for (NSString *fontName in [UIFont fontNamesForFamilyName:familyName]) {
            NSLog(@"%@", fontName);
        }
    }
} 
```

把它放在你的应用程序中，调用它，看看你得到了什么。如果您在输出中看到适合您字体的名称，请使用它。否则，您可能没有正确地将字体添加到您的应用程序中。

在斯威夫特：

```
func dumpAllFonts() {
    for familyName in UIFont.familyNames {
        for fontName in UIFont.fontNames(forFamilyName: familyName) {
            print(fontName)
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2013-04-13T06:48:06.503

这是如何在应用程序中添加自定义字体的步骤。

1 - 在您的应用程序中添加`.TTF`字体
2 - 修改`application-info.plist file`.
3 - 将**“应用程序提供的字体”**键添加到新行
4 - 并将每个`.TTF`文件（字体）添加到每一行。

另请阅读[本](http://www.developers-life.com/how-to-include-ttf-fonts-to-ios-app.html)教程和[本](http://www.waterworld.com.hk/en/node/157)教程以提高您的知识。

> 了解更多信息 ：

但是在将字体添加到您的应用程序后，有时字体名称可能不是文件名的名称，因此您需要*应用/编写*字体的真实名称，因此请查看 **@NSGod 的**答案。

**以下是从系统中查找所有字体的代码：**

```
for(NSString *fontfamilyname in [UIFont familyNames])
{
    NSLog(@"Family:'%@'",fontfamilyname);
    for(NSString *fontName in [UIFont fontNamesForFamilyName:fontfamilyname])
    {
        NSLog(@"\tfont:'%@'",fontName);
    }
    NSLog(@"~~~~~~~~");
} 
```

可能高于步骤，建议对您的情况有帮助：

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2013-04-13T07:25:14.423

虽然看起来`UIFont`'`fontNamed:size:`方法对您提供的名称相当宽容，但官方`fontName`一直是字体的内部 PostScript 名称。字体的 PostScript 名称不能包含空格，通常用连字符代替。我不记得了，但我相信它们也可能被限制为 31 个字符。

确定您应该在代码中使用什么名称非常简单。双击您要在 iOS 设备上使用的字体，在 Font Book 中打开它。如果尚未安装字体，请单击出现的示例窗口中的安装按钮。安装后，在字体列表中选择字体。在字体册的菜单中，选择“预览”>“显示字体信息”。这将显示有关字体的信息，如下图所示：

![在此处输入图像描述](https://i.stack.imgur.com/2A8sm.png)

如您所见，PostScript 名称`Helvetica Neue LT Std 65 Medium`为`HelveticaNeueLTStd-Md`. 这是您应该在代码中使用的名称。

在您的`Info.plist`文件中，在应用程序的字体下，您需要使用字体本身的实际文件名，无论发生什么。在我的情况下，它是`HelveticaNeueLTStd-Md.otf`.

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-04-13T07:21:08.697

**获取字体名称的更简单方法**

1.  右键单击您的 .ttf/.otf 文件并选择“获取信息”
2.  读取`Full Name`属性并将其用作字体的名称

它适用于 info .plist 文件（*添加扩展名*）和代码中`[UIFont fontWithName:<Full Name> size:17]`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-08-16T09:22:32.077

只需 NSLog 想要得到的字体：

`NSLog(@" %@", [UIFont fontNamesForFamilyName:@"American Typewriter"]);`

你得到数组：

```
(
  "AmericanTypewriter-CondensedLight",
  "AmericanTypewriter-Light",
  "AmericanTypewriter-Bold",
  AmericanTypewriter,
  "AmericanTypewriter-CondensedBold",
  "AmericanTypewriter-Condensed"
) 
```

在代码中使用您需要的任何字体名称`AmericanTypewriter-Bold`作为`[UIFont fontWithName:@"AmericanTypewriter-Bold" size:12.0]`

您还可以获得按字体系列分组的所有应用字体

```
for (NSString* family in [UIFont familyNames])
{
    NSLog(@"%@", family);

    for (NSString* name in [UIFont fontNamesForFamilyName: family])
    {
        NSLog(@"  %@", name);
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-08-12T04:14:15.907

我编写了一些代码来仅打印出您想要的字体名称，而不仅仅是打印出所有字体。

```
- (NSString *)realNameOfFont:(NSString *)fullFontName {
    NSString *fontName = [[fullFontName componentsSeparatedByString:@"."] firstObject];
    NSString *ext = [fullFontName pathExtension];

    NSData *data = [NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:fontName ofType:ext]];
    if (data == nil) {
        NSLog(@"Failed to load font. Data at path %@ is null", fullFontName);
        return nil;
    }
    CFErrorRef errorRef;
    CGDataProviderRef provider = CGDataProviderCreateWithCFData((CFDataRef)data);
    CGFontRef font = CGFontCreateWithDataProvider(provider);
    NSString *realFontName = (__bridge NSString *)CGFontCopyPostScriptName(font);
    if (!CTFontManagerRegisterGraphicsFont(font, &errorRef)) {
        NSError *error = (__bridge NSError *)errorRef;
        if (error.code != kCTFontManagerErrorAlreadyRegistered) {
            NSLog(@"Failed to load font: %@", error);
        }
    }
    NSLog(@"Real font name: %@", realFontName);
    CFRelease(font);
    CFRelease(provider);
    return realFontName;
} 
```

例子：

```
 NSArray *fonts = @[@"bg_en_AmaticSC-Bold111.otf", @"bg_en_segoescb_0.ttf", @"bg_en_UTM Cookies_2.ttf", @"bg_en_VSCOProximaExtrabold_0.otf"];
for (NSString *fontFullName in fonts) {
    [self realNameOfFont:fontFullName];
} 
```

结果：

```
Failed to load font. Data at path bg_en_AmaticSC-Bold111.otf is null
Real font name: SegoeScript-Bold
Real font name: UTM-Cookies
Real font name: ProximaNova-Extrabld 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-01-05T15:31:10.277

斯威夫特版本：

```
static func printAllFontNames() {
    for familyname in UIFont.familyNames() {
        for fname in UIFont.fontNamesForFamilyName(familyname) {
            print(fname)
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-05-04T01:51:18.880

其他答案没有错。事实上，iPatel 的先决条件仍然适用。

## 在 Swift 2.2+ 中，显示姓氏的调用很简单：

```
 UIFont.familyNames().sort().forEach({ (familyName) in
            debugPrint(UIFont.fontNamesForFamilyName(familyName))
        }) 
```

如果您已经在系统上安装了字体，您也可以简单地将字体添加到情节提要中的 UI 元素中。

**笔记**

但是，我注意到在某些情况下存在一个错误，即在将字体正确添加到项目、info.plist 和情节提要中的 UI 元素后，它们仍然不能正确反映您想要的更改。在某些情况下，切换设置将有助于 Storyboard 同步它的底层 xml。在其他情况下，您可能需要简单地在代码中更新自定义字体的大小以使更改生效。我发现的 Swift 中最简单的方法是：

```
@IBOutlet weak var startMessage: UILabel!
startMessage.font = UIFont(name: startMessage.font.familyName, size: 31.0) 
```

假设自定义字体已经在 Storyboard 中设置，并简单地更新代码中的大小。此解决方法将确保如果满足所有其他先决条件，您实际上会看到正确的自定义字体。它还消除了实际知道底层字体名称的需要（尽管如果需要，上面的初始 Swift 代码将为您提供名称）。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-05-08T14:33:08.937

Swift 3 的更新

```
for familyname in UIFont.familyNames {
            for fname in UIFont.fontNames(forFamilyName: familyname) {
                print(fname)
            }
        } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-04-06T17:43:58.277

斯威夫特 3 版本：

```
UIFont.familyNames.sorted().forEach({ (familyName) in
            print(UIFont.fontNames(forFamilyName: familyName))
        }) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-03-28T04:11:38.853

创建一个新的单一视图应用程序

在您的应用程序中创建一个名为 Fonts 的组，放入您的字体文件（如果需要，勾选复制文件）。

在 info.plist 中，添加“应用程序提供的字体”，为每个字体添加每个项目，例如，项目 0：AlexBrush-Regular.ttf，项目 1：Fipps-Regular.otf

或者直接编辑 info.plist：

```
<key>UIAppFonts</key>
<array>
    <string>AlexBrush-Regular.ttf</string>
    <string>Fipps-Regular.otf</string>
</array> 
```

将此 swift 5 代码剪切并粘贴到 ViewController.swift 中，在模拟器中运行，使用您的字体名称在控制台日志中添加过滤器

```
//
//  ViewController.swift
//  FontsApp
//
//  Created by Gary Davies on 28/3/19.
//  Copyright © 2019 Gary Davies. All rights reserved.
//

import UIKit

class ViewController: UIViewController {

    var fontFamilyNames: [String] = []

    override func viewDidLoad() {
        super.viewDidLoad()
        // Do any additional setup after loading the view.
        fontNames()
    }

    func fontNames() {
        getFontNames()
        sortFontNames()
        printFontName()
    }

    func getFontNames() {
        fontFamilyNames.removeAll()
        for name in UIFont.familyNames {
            fontFamilyNames.append(name)
        }
    }

    func sortFontNames() {
        let sorted = fontFamilyNames.sorted { $0.localizedCaseInsensitiveCompare($1) == ComparisonResult.orderedAscending }
        fontFamilyNames.removeAll()
        for name in sorted {
            fontFamilyNames.append(name)
        }
    }

    func printFontName() {
        for name in fontFamilyNames {
            print(name, "=>", UIFont.fontNames(forFamilyName: name))
        }
    }
} 
```

（对不起，这不是重复的，我在错误的问题上添加了错误的答案）

# php - 内联翻译在 magento 中不起作用

> ID：15984940
> 
> 赞同：3
> 
> 时间：2013-04-13T06:23:35.707
> 
> 标签：php, ajax, magento

Magento 中的内联翻译不适用于从 ajax 加载的数据。

我使用以下安装： http: [//blog.chapagain.com.np/magento-language-translation-for-custom-module-step-by-step-guide/](http://blog.chapagain.com.np/magento-language-translation-for-custom-module-step-by-step-guide/)

我创建了以下模板文件来显示我的产品详细信息。

`magento\app\design\frontend\default\default\template\catalog\product\view.phtml`

它有以下代码：

```
<?php $_helper = $this->helper('catalog/output'); ?>
<?php $_product = $this->getProduct(); ?>
<?php echo $this->__('desired word') ?> 
```

我为内联翻译创建了一个自定义模块，为我的所有自定义模块加载 csv 文件。 `\magento\app\code\local\Translations\Inline\etc\config.xml`

```
<?xml version="1.0"?>
<config>
  <modules>
    <Translations_Inline>
      <version>0.1.0</version>
    </Translations_Inline>
  </modules>
   <frontend>
        <translate>
            <modules>
                <translations>
                    <files>
                        <default>Translations.csv</default>
                    </files>
                 </translations>
            </modules>
        </translate>
    </frontend>
    <adminhtml>
        <translate>
            <modules>
               <translations>
                    <files>
                        <default>Translations.csv</default>
                    </files>
                </translations>
            </modules>
        </translate>
    </adminhtml>
  <global>
    <helpers>
      <inline>
        <class>Translations_Inline_Helper</class>
      </inline>
     </helpers>
  </global>
</config> 
```

要激活模块，\magento\app\etc\modules\Translations_Inline.xml

```
<?xml version="1.0"?>
  <config>
     <modules>
        <Translations_Inline>
          <active>true</active>
          <codePool>local</codePool>
          <version>0.1.0</version>
        </Translations_Inline>
      </modules>
 </config> 
```

我在以下文件夹中添加了 Translation.csv：

\magento\app\locale\en_US

\magento\app\locale\zh_HK

因此，在从管理员端为英语和中文 storeview 启用内联翻译后，它运行良好，但我的问题是，如果我在 view.hmtl 中的数据是从 ajax 加载的，而不是像 __('de​​sired word');?>

如果 view.phtml 如下所示，则为 fox 示例：

```
 <script type="text/javascript">
var url_magento = '<?php echo        Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_WEB); ?>';    

  var j = jQuery.noConflict();
  j(document).ready(function()
  {
getcontent();

 });
 function getcontent()
 {

jQuery.ajax({
    url:url_magento+'hi.php',
    type:'POST',
    beforeSend: function(){
                jQuery('#product_app').html('loading');
                },      
    ajaxError : function() {                
                jQuery('#product_app').html('Error: Can not load page');
            },
    success: function(data){
                //alert(data);
                jQuery('#product_app').html(data);          
            }
        }); 

    }
</script>
<div id='product_app'></div> 
```

现在 hi.php 如下：

```
 <?php  
   echo "hi.This is the page that gives product's detail";
 ?> 
```

所以，我希望内联翻译也适用于这些数据。或者有没有其他方法可以在 php 中以 echo 的形式加载 ajax 数据。您可以自由询问更多详细信息。我尝试添加大部分需要的数据来配置内联翻译。希望尽快得到答案。提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T18:04:24.993

如果您专门谈论内联翻译，那么此代码不可翻译是正确的。这是因为 Magento 尚未在其中初始化`hi.php`- 您只是在输出文本。您需要做的是设置一个控制器来处理您的 AJAX 调用，然后*将*Mage 初始化，因此您将可以访问整个 Magento 框架。

请注意，我也不对大多数事情使用内联翻译，而是在我的主题`translate.csv`文件中定义翻译。

有关创建控制器的教程，请参阅类似的教程，[或者](http://blog.baobaz.com/en/blog/magento-module-create-your-own-controller)还有许多其他教程。

# oracle - 将 sqlplus 输出写入文件

> ID：15984946
> 
> 赞同：66
> 
> 时间：2013-04-13T06:24:31.473
> 
> 标签：oracle

使用 sqlplus.exe 我正在寻找一种将 sqlplus 输出写入文件的方法。

无论如何我可以做到这一点，目前输出只写入控制台。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-04-13T06:25:41.917

您可以使用 SPOOL 命令将信息写入文件。

在执行任何命令之前，请键入以下内容：

```
SPOOL <output file path> 
```

以下所有命令输出都将写入输出文件。

停止命令输出写入类型

```
SPOOL OFF 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-04-13T06:34:17.857

另请注意，`SPOOL`输出由一些 SQLPlus 设置驱动：

*   `SET LINESIZE nn`- 最大线宽；如果输出较长，它将换行以显示每个结果行的内容。

*   `SET TRIMSPOOL OFF|ON`- 如果设置`OFF`（默认），每个输出行将被填充到`LINESIZE`. 如果设置`ON`，每条输出线都将被修剪。

*   `SET PAGESIZE nn`- 每次重复标题时要输出的行数。如果设置为零，则不输出任何标题；只是细节。

这些是大问题，但如果您只想要输出而不需要所有 SQLPlus 喋喋不休，还有其他一些需要考虑。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-16T10:48:31.300

只是为了保存我自己的所有这些扣除（用于在客户端保存 DBMS_OUTPUT 输出，使用 sqlplus）：

*   无论我使用 Toad/with polling 还是 sqlplus，对于偶尔使用 dbms_output.put_line 命令的长时间运行脚本，我都会在脚本执行结束时获得输出
*   设置服务器输出；和 dbms_output.enable(); 应该出现在脚本中
*   保存输出 SPOOL 命令不足以将 DBMS_OUTPUT 行打印到文件中 - 必须使用通常的 > windows CMD 重定向。调用 sqlplus 后，可以将密码等提供给空提示。还有“/”指令和“exit;” 命令应该放在脚本中，或者作为上面的密码以交互方式给出（除非在调用 sqlplus 期间指定）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-14T15:31:19.247

确保您有权访问您尝试假脱机的目录。我试图假脱机到根，它没有创建文件（例如`c:\test.txt`）。`spool`您可以通过发出命令来检查您的假脱机位置。

# vb.net - 如何读取应用程序本身中的文件以及如何添加设置？

> ID：15984948
> 
> 赞同：0
> 
> 时间：2013-04-13T06:24:57.777
> 
> 标签：vb.net, file-io

我有一个读取 XML 文件的类库。我正在使用 VS 2012 和 VB.NET 语言。

我对如何读取应用程序本身文件夹中的文件感到困惑。

现在我已经给出了路径

```
Dim reader As XmlTextReader = New XmlTextReader("C:\mailpara.xml") 
```

但它是硬编码的，但我想在应用程序中创建一个文件夹。并想从该文件夹本身读取。

我想知道如何从应用程序的文件夹中读取文件。
在客户端机器上安装后如何读取文件以及如何在设置时添加文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T06:29:42.223

使用类似的东西；

```
Dim directory as String = My.Application.Info.DirectoryPath

Dim reader As XmlTextReader = New XmlTextReader(directory & "\MyFolderName\mailpara.xml") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T06:29:48.557

您可以使用 Application.StartupPath 属性来检索应用程序的启动路径。

```
Dim reader As XmlTextReader = New XmlTextReader(Application.StartupPath & "mailpara.xml") 
```

您可能需要添加一个检查以确保路径以 a 结尾`\`（我认为它可能存在也可能不存在，具体取决于路径是否为根文件夹）。

# jsf - 如果我写入 ByteArrayOutputStream，JSF 页面将不会重新加载

> ID：15984949
> 
> 赞同：0
> 
> 时间：2013-04-13T06:25:05.020
> 
> 标签：jsf, bytearrayoutputstream

基本上，我有一个显示计数和“下载”按钮的 JSF 页面。我想要发生的是当单击按钮时创建和下载文本文件并且页面的计数增加。

当我单击 CommandButton 调用 bean.download 方法时，文本被写入 ByteArrayOutputStream 并被下载。但计数不会刷新（页面不会重新加载）。

如果我不调用写入 ByteArrayOutputStream 的方法，那么页面会更新并显示新的计数值。

JSF 页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">
<h:body>

    <h:form id="mainForm">
        <h:outputText id="countLbl" value="Download Count = #{bean.count}" />

        <br />

        <h:commandButton value="Do Download" action="#{bean.download}"/>
    </h:form>

</h:body>
</html> 
```

会话 bean：Bean

```
import javax.annotation.PostConstruct;
import javax.enterprise.context.SessionScoped;
import javax.faces.context.ExternalContext;
import javax.faces.context.FacesContext;
import javax.inject.Named;
import javax.servlet.ServletException;
import javax.servlet.ServletOutputStream;
import javax.servlet.http.HttpServletResponse;

@Named
@SessionScoped
public class Bean implements Serializable {

    private int count;

    @PostConstruct
    private void init() {
        count = 0;
    }

    public String download() {
        count++;
        try {
            doDownload();
        } catch (IOException e) {
            e.printStackTrace();
            throw new RuntimeException(e);
        } catch (ServletException e) {
            e.printStackTrace();
            throw new RuntimeException(e);
        }
        return "";
    }

    public int getCount() {
        return count;
    }

    public void setCount(int count) {
        this.count = count;
    }

    public void doDownload() throws IOException, ServletException {

        final ByteArrayOutputStream baos = new ByteArrayOutputStream();

        try {
            String line = "dummy text";
            baos.write(line.getBytes());
            baos.close();

            sendReport(baos.toByteArray());

        } catch (IOException e) {
            e.printStackTrace();
            throw e;
        } catch (ServletException e) {
            e.printStackTrace();
            throw e;
        }

    }

    public static void sendReport(byte[] bs) throws IOException,
            ServletException {
        FacesContext facesContext = FacesContext.getCurrentInstance();
        ExternalContext externalContext = facesContext.getExternalContext();
        HttpServletResponse response = (HttpServletResponse) externalContext
                .getResponse();

        response.reset();
        response.setHeader("Expires", "0");
        response.setHeader("Cache-Control",
                "no-store, no-cache, post-check=0, pre-check=0");
        response.setHeader("Pragma", "no-cache");
        response.setContentType("application/vnd.ms-excel");
        response.setHeader("Content-disposition",
                "attachment; filename=\"down.csv\"");
        response.setContentLength(bs.length);

        ServletOutputStream os = response.getOutputStream();
        os.write(bs);

        os.close();

        facesContext.responseComplete();

    }

} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T06:31:42.520

我认为问题是服务器每个请求只能发送一个响应，尝试使用 ajax。我没有太多使用JSF，但这可能会有所帮助。当您发出请求时，服务器可以将下载或刷新的页面发回。使用 ajax，您可以请求更新计数，与下载请求分开。

看起来通过说响应完成您取消加载页面，您这样做是正确的，因为如果您不这样做，用户将使用他的文件下载页面的一部分。

如果您有一个 javascript 函数，该函数在您单击下载时进行 ajax 调用以刷新计数器，那可能会起作用。

# extjs - sencha touch 2 目录应用

> ID：15984955
> 
> 赞同：0
> 
> 时间：2013-04-13T06:26:12.850
> 
> 标签：extjs, sencha-touch-2, catalog

我试图开发一个看起来像目录的 sencha touch 2 应用程序，例如它依赖于显示类别（餐厅、电影院、购物），它将类别显示为列表，当点击任何类别时，它会立即移动到另一个列表，显示该类别的产品列表（例如：餐厅列表）。我已经下载了名为 WatchList 的 sencha touch 2 应用程序的源代码

[http://www.watchlistapp.com/](http://www.watchlistapp.com/)

但它不能满足我正在寻找的东西。

谁能给我一个关于如何实现此类目录或类似应用程序源代码的提示，以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T06:05:52.093

Sencha Touch SDK 附带`Touch Style`示例，它本质上是在线电子商务商店，查看其代码以获取想法。顺便说一句，如果你想在这里看到它是[http://www.touchstyle.mobi/app/](http://www.touchstyle.mobi/app/)

另一个简单的应用程序是[https://github.com/kostysh/Simple-shopping-cart-for-Sencha-Touch-2](https://github.com/kostysh/Simple-shopping-cart-for-Sencha-Touch-2)。查看演示链接

# actionscript-3 - 在 colPicker as3 中访问影片剪辑的当前颜色

> ID：15984956
> 
> 赞同：0
> 
> 时间：2013-04-13T06:26:17.117
> 
> 标签：actionscript-3, flash, action

我正在使用红色电影剪辑，并且我有一个 col 选择器。当这个红色电影剪辑加载到舞台上时，我想更改 col Picker 的颜色（红色）。我正在使用以下代码：

```
colorBox.selectedColor = red_clip.transform.colorTransform; 
```

如何访问颜色。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T07:04:45.843

您是否正在加载类似于方形和单色的 MovieClip？我无法想象这个用例。

无论如何，要获得舞台上动画剪辑的给定像素的颜色，您需要先在位图中渲染它。

```
// Imagining you want the color that is at (x_offset, y_offset) in your loaded movieclip.

// create a bitmapdata and draw the loaded clip in it
var bdata : BitmapData = new BitmapData(red_clip.width, red_clip.height, true, 0);
bdata.draw(red_clip);

// read pixel from the bitmapdata to get a color
var color : uint = bdata.getPixel(x_offset, y_offset);
var color_with_alpha : uint = bdata.getPixel32(x_offset, y_offset); // you can also get alpha if you want

// Change color in picker
colorBox.selectedColor = color; 
```

# android - 如何补偿RelativeLayout中的状态栏？

> ID：15984958
> 
> 赞同：1
> 
> 时间：2013-04-13T06:26:33.737
> 
> 标签：android, xml, user-interface, android-relativelayout

我是android开发的新手。我正在为我的 android 应用程序制作 UI。现在，mdpi 屏幕的高度是 480px。所以我将我的 UI 设计为在 mdpi 的屏幕上具有 480px 的高度。但是因为状态栏在设备顶部占用了一些空间，所以我在 RelativeLayout 中的一些 ImageView 是重叠的。如何补偿状态栏占用的空间？因为对于不同的屏幕，状态栏的大小会有所不同，而在平板电脑中，状态栏甚至可能不在顶部。我很困惑，求助！

编辑： XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:theme="@android:style/Theme.Black.NoTitleBar" >

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/imageView1"
        android:clickable="false"
        android:contentDescription="@string/p"
        android:scaleType="center"
        android:src="@drawable/volbar" />

    <ImageView
        android:id="@+id/imageView4"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:clickable="false"
        android:contentDescription="@string/p"
        android:scaleType="center"
        android:src="@drawable/base" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:clickable="false"
        android:contentDescription="@string/p"
        android:scaleType="center"
        android:src="@drawable/head" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/imageView1"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="33dp"
        android:layout_marginRight="19dp"
        android:text="@string/press_to_update" />

    <ImageView
        android:id="@+id/imageView9"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/imageView2"
        android:clickable="false"
        android:contentDescription="@string/p"
        android:scaleType="center"
        android:src="@drawable/frag1"
         />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T07:25:14.433

在 Relativelayout 中，您使用了 match_parent / wrap_content。所以它会适合屏幕。但是你已经指定你在 mdpi 的屏幕上设计了 480px 的 ui。由于尚不清楚您如何在 mdpi 屏幕上将 ui 设计为 480px。我猜，可能使用了 Image View 中使用的可绘制对象，它适合 mdpi 屏幕的 480 像素。drawables应该以3：4：6：8的比例放置

例如

lpdi:mdpi:hdpi:xhdpi = 3:4:6:8

例如，如果您将 mdpi 的图像保留为 40px 那么，对于 ldpi = 30 px，hdpi = 60px，xhdpi = 80px。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T09:41:44.643

As other users suggested, you should not hard code the specific heights but use `wrap_content` or `match_parent`.

If you still want to follow this way, why don't you reduce the height of your RelativeLayout by the dimension of the ActionBar? In Android 4.0+ the default height is `48dip`, in landscape is `40dp`, in sw600dp is `56dp`. You can also get height programmatically calling `getActionBar().getHeight()` in your activity. For more infos about ActionBar appearance, see [this link](http://developer.android.com/guide/topics/ui/actionbar.html#GeneralStyles).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T06:36:36.070

根据[Supporting Multiple Screens Best Practices](http://developer.android.com/guide/practices/screens_support.html#screen-independence)，您应该设计布局以扩展或收缩以填充可用空间。在手机上，最重要的部分是确保您的内容水平适合并且（如果需要）垂直滚动。如果您需要在布局中容纳比设备空间更多的垂直内容，则可以添加[ScrollView 。](http://developer.android.com/reference/android/widget/ScrollView.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T06:37:37.373

不要尝试将高度设置为特定大小。尽可能使用“wrap_content”或“match_parent”作为“layout_height”的值。

如果您觉得内容会高于可用的屏幕高度，您将希望使用 ScrollView 作为内容的容器。

如果您觉得内容总是适合可用的屏幕高度，那么您可以简单地使用带有 layout_height="match_parent" 的容器（如 RelativeLayout）。

如果您有特定的布局需要帮助，您可以发布 XML。

# c# - 在 C# 中连接到 FTP(Linux)：“操作失败”

> ID：15984962
> 
> 赞同：0
> 
> 时间：2013-04-13T06:27:11.023
> 
> 标签：c#, ftp

我想在 C# 中连接到 Ftp。

```
 public static byte[] DownloadFile(int timeout, string ftpServer, string filePath, string username, string password)
    {
     var client = new FtpClient();
        client.Connect(timeout, ftpServer, 21);
        client.Login(timeout, username, password);

        List<FtpItem> ftpItems = client.GetDirectoryList(timeout, directoryPath).ToList();
        return ftpItems;
    } 
```

成功登录，但当我想获取文件时

```
 List<FtpItem> ftpItems = client.GetDirectoryList(timeout, directoryPath).ToList(); 
```

我收到此错误：`Operation failed.`

这个回应：`425 Failed to establish connection.`

# java - 如何将结果集转换为 int 以进行查询

> ID：15984965
> 
> 赞同：0
> 
> 时间：2013-04-13T06:27:55.767
> 
> 标签：java

我正在从“第一个表”中获取数据并将其存储到结果集中。现在我想将获取的数据插入“第二个表”

问题是“第二个表”只接受 int 值。

我试过了：

```
while (rs.next()) 
    {
        int g = rs.getInt(1);
    } 
```

和

```
 int g = Integer.parseInt(rs); 
```

但它给了我`java.lang.NumberFormatException`输入字符串的错误：`"com.mysql.jdbc.ResultSet@39badcaa"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T06:58:43.967

您的结果集返回一个无法转换为整数的字符串

尝试这个：

```
 while (rs.next()) {
    String str = rs.getString("COLUMN_NAME");
        int g = Integer.parseInt(str);
    } 
```

现在像这样插入数据库

```
insert into mytable (myintfield)values(g); 
```

另请检查 str 是否返回空字符串值。

如果 str 值为例如“SE”，则不会转换。请先打印出返回的Value，确认是String格式的数字；

如果返回的值是例如“2”

做就是了

```
int myint = Integer.parseInt(str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T06:31:05.430

`Integer.parseInt(rs.getString(1));`

```
String sql1="SELECT Id FROM kiosk_manager WHERE Kiosk_Centre='"+Uareacode+"'";
stmt1=con.createStatement(); 
rs=stmt1.executeQuery(sql1);
int parseInt = 0;
while (rs.next()) { parseInt=Integer.parseInt(rs.getString(1)); }
sql="INSERT INTO consumer(KioskManager_Id)VALUES("+parseInt+")" 
```

# codeigniter - 在 codeigniter 对象上的 isset()

> ID：15984966
> 
> 赞同：4
> 
> 时间：2013-04-13T06:27:59.377
> 
> 标签：codeigniter, session, object, isset

我怎样才能实现看起来像：

```
if (isset($this->session->flashdata('user_profile'))) {} 
```

没有：

```
Fatal error: Call to a member function flashdata() on a non-object in ... 
```

问题是，当那个东西没有被设置而不是像人们期望的那样继续时，它会返回一个错误。如果设置好了，一切正常。

...

我也试过：

```
$tmp = $this->session->flashdata('user_profile');
if ($tmp) { 
```

但无济于事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T10:40:29.957

您不需要`isset();`导致 CI​​ 方法返回`false`或`true`

做就是了

```
 if($this->session->flashdata()){ } 
```

并且您的错误是因为您肯定没有加载会话库：

这样做：

```
 $this->load->library('session');
if($this->session->flashdata()){ } 
```

如果您喜欢（我更喜欢），您可以自动加载会话库，在您的`config/autoload.php`文件中更改它：

```
$autoload['libraries'] = array('session'); 
```

所以现在您不必在任何时候加载会话库，因为 CI 会为您自动加载

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T06:31:50.090

您可以先检查 $this->session 的存在

`if (isset($this->session) && isset($this->session->flashdata('user_profile'))) { }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-16T19:46:02.793

如果不去`config/autoload.php`打开会话库并尝试添加会话库，是否会自动加载会话库，如果您自动加载了库，则它看起来像这样`$autoload['libraries'] = array('session');`，而不是替代方法是：

```
if(!empty($this->session->flashdata('user_profile')): echo $this->session->flashdata('user_profile'); endif; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-30T07:03:47.133

为了正确验证，您必须执行此方法。天气值有时会变为 NULL。

```
$sessusr=$this->session->userdata('username'); 

 if(isset($sessusr) && trim($sessusr!=''))
 {

//to do

 } 
```

# html - CSS/HTML - 如何在 中写上标？

> ID：15984970
> 
> 赞同：1
> 
> 时间：2013-04-13T06:28:45.783
> 
> 标签：html, css, superscript

假设我有这样的事情：

```
 <input type="button" value="2(8)"> 
```

我想将“（8）”作为上标如何？

注意：我知道你可以这样做：

```
 <button>2<sup>8</sup></button> 
```

但我想在没有那个的情况下这样做......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T06:44:46.130

`::after`您可以使用伪类注入单独的样式。

**CSS**

```
button::after {
    content: attr(data-superscript);
    vertical-align: super;
} 
```

**HTML**

```
<button data-superscript="8">2</button> 
```

使用该`attr()`属性，您可以根据属性动态更改上标值`data-superscript`。

请注意，这是 CSS3，*并不*兼容所有浏览器。

**[JSFiddle](http://jsfiddle.net/Qc6Rx)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T06:40:20.913

使用 unicode 上标 8 字符，并确保您的文档作为 UTF-8 有效：

```
<input type="button" value="2⁸" /> 
```

# android - 线程内的数据库访问给出空指针异常

> ID：15984971
> 
> 赞同：0
> 
> 时间：2013-04-13T06:28:48.170
> 
> 标签：android, sqlite, thread-safety

```
I have a thread containing a socket connection ., 
irrespective of that within that i have  a db access .
Its giving null pointer exception . 
Why? 
is it restricted that db access within a thread? 
if i run the db access as a seperate method and 
if i call that outside the thread it works fine Any idea? 
```

```
 @Override
public void run() {
    SharedPreferences prefs = 

PreferenceManager.getDefaultSharedPreferences(Filetransfer.this);   
            SharedPreferences.Editor editor = prefs.edit();
            editor.putString("Filename","");    
            editor.commit();

            System.out.println("insert over");
            filedb=openOrCreateDatabase(Table_Name,MODE_PRIVATE, null);
            t.setText("File: "+filenam);
            Calendar c = Calendar.getInstance(); 
            //setting time
            int seconds = c.get(Calendar.SECOND);
            int min= c.get(Calendar.MINUTE);
            int hour= c.get(Calendar.HOUR);
            String time=hour+":"+min+":"+seconds;
            //getting date
            SimpleDateFormat df = new SimpleDateFormat("dd-MMM-yyyy");
            String formattedDate = df.format(c.getTime());

            ContentValues values=new ContentValues();
            values.put("Time", time);
            values.put("Date", formattedDate);
            values.put("Filename", filenam);
            filedb.insert("Filedata", null, values);
            filedb.close();
    } 
```

# java - 如何在 Android 模拟器中模拟多个套接字

> ID：15984976
> 
> 赞同：0
> 
> 时间：2013-04-13T06:29:29.417
> 
> 标签：java, android, debugging, sockets, client-server

您好我正在开发一个基于 Android 客户端-服务器的应用程序，其中有多个客户端应用程序连接到服务器应用程序。我正在使用套接字在客户端和服务器之间进行通信。我想模拟多个客户端和一个服务器并调试它们之间的通信。如何在仿真模式下模拟多个客户端和服务器通信。如果我必须对手机做同样的事情，我需要几部我目前没有的手机。除非我确定应用程序的功能和性能，否则我不想投资多部手机。所以，我正在寻找一种在仿真模式下开发和调试功能的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T06:44:55.213

我看到了两种可能性：

1.  您可以使用低级网络工具（例如 netcat ）连接到您的服务器并运行 1 个 android 模拟器，但多个客户端连接到服务器。

2.  我建议以允许您创建自己的与同一服务器交互的 java 客户端应用程序的方式编写您的 android 代码。您可以在台式机/笔记本电脑上轻松运行同一个 java 客户端的多个实例，而 Android 模拟器对计算机来说相当繁重（多个模拟器可能不是一个好主意）。可重用代码是一件好事，将“通信”代码作为它自己的 java 库可以在以后为您提供帮助，并且只是好的软件工程。

如果您要经常进行模拟并且客户端-服务器交互非常频繁，您可能应该选择选项 2。如果交互非常简单，那么 1 可能适合您。

# php - MYSQL 表不会更新

> ID：15984980
> 
> 赞同：0
> 
> 时间：2013-04-13T06:29:45.693
> 
> 标签：php, mysql

几天来，我一直在尝试解决这个问题，但我遇到了障碍。我的表单提交没有问题，我的 php 代码没有生成错误，但它没有更新 mysql 中的表。非常感谢任何帮助我提前为发布这么多代码道歉。

这是我的表单代码：

```
<form style="width:1000px" action="new_recipe.php" method="POST" name="frm_add_recipe">

<div id="home_wrapper">

<div id="add_recipe_box">
<h1>Add a New Recipe</h1>

<label for="recipe_name">Recipe Name:</label><br/>
<input type="text" name="recipe_name" class="add_recipe_field"/>

<label for="ingredient1">Ingredients:</label><br/>
<input type="text" name="ingredient1" class="add_recipe_field"/>

<input type="text" name="ingredient2" class="add_recipe_field"/>

<input type="text" name="ingredient3" class="add_recipe_field"/>

<input type="text" name="ingredient4" class="add_recipe_field"/>

<input type="text" name="ingredient5" class="add_recipe_field"/>

<input type="text" name="ingredient6" class="add_recipe_field"/>

<label for="ingredient7"></label>
<input type="text" name="ingredient7" class="add_recipe_field"/>

<input type="text" name="ingredient8" class="add_recipe_field"/>

<input type="text" name="ingredient9" class="add_recipe_field"/>

<input type="text" name="ingredient10" class="add_recipe_field"/><br/>

<label for="lst_meal">Select meal type:</label>
<select name="lst_meal" >
<option value="breakfast">Breakfast</option>
<option value="lunch">Lunch</option>
<option value="dinner">Dinner</option>
</select><br/>

<label>Recipe Ethnecity:</label>
<select name="lst_ethnicity">
<option value="blank">N/A</option>
<option value="American">American</option>
<option value="Asian">Asian</option>
<option value="Chineese">Chineese</option>
<option value="German">German</option>
<option value="Italian">Italian</option>
<option value="Indian">Indian</option>
<option value="Mexican">Mexican</option>
<option value="Thia">Thia</option>
</select><br/>

<label for="instructions">Cooking instructions:</label><br/>

<input name="instructions" type="text" maxlength="250" id="txt_instructions"/>

<input type="submit" value="Save" />

</div>
</div>
</form> 
```

这是我的php：

```
 <?php
$recipe_name = $_POST['recipe_name'];
$ingredient1 = $_POST['ingredient1'];
$ingredient2 = $_POST['ingredient2'];
$ingredient3 = $_POST['ingredient3'];
$ingredient4 = $_POST['ingredient4'];
$ingredient5 = $_POST['ingredient5'];
$ingredient6 = $_POST['ingredient6'];
$ingredient7 = $_POST['ingredient7'];
$ingredient8 = $_POST['ingredient8'];
$ingredient9 = $_POST['ingredient9'];
$ingredient10 = $_POST['ingredient10'];
$lst_meal = $_POST['lst_meal'];
$lst_ethnicity = $_POST['lst_ethnicity'];
$instructions = $_POST['instructions'];

$dbhost = 'localhost' or die("cannot connect"); //Change to webserver info
$dbname = '*' or die("cannot connect"); //Change to webserver info
$dbuser = '*' or die("cannot connect"); //Change to webserver info
$dbpass = '*' or die("cannot connect"); //Change to webserver info
$conn = mysql_connect($dbhost, $dbuser, $dbpass);
mysql_select_db($dbname, $conn);

$recipe_name = mysql_real_escape_string($recipe_name);
$ingredient1 = mysql_real_escape_string($ingredient1);
$ingredient2 = mysql_real_escape_string($ingredient2);
$ingredient3 = mysql_real_escape_string($ingredient3);
$ingredient4 = mysql_real_escape_string($ingredient4);
$ingredient5 = mysql_real_escape_string($ingredient5);
$ingredient6 = mysql_real_escape_string($ingredient6);
$ingredient7 = mysql_real_escape_string($ingredient7);
$ingredient8 = mysql_real_escape_string($ingredient8);
$ingredient9 = mysql_real_escape_string($ingredient9);
$ingredient10 = mysql_real_escape_string($ingredient10);
$instructions = mysql_real_escape_string($instructions);

$query = "INSERT INTO recipes ( recipe_name, ingredient1, ingredient2, ingredient3, ingredient4, ingredient5, ingredient6, ingredient7, ingredient8, ingredient9, ingredient10, meal, ethnicity, instructions )
        VALUES ( '' , '$recipe_name' , '$ingredient1' , '$ingredient2' , '$ingredient3' , '$ingredient4' , '$ingredient5' , '$ingredient6' , '$ingredient7' , '$ingredient8' , '$ingredient9' , '$ingredient10' , 'lst_meal' , '$lst_ethnicity' , '$instructions' );";
mysql_query($query);
mysql_close();
header('Location: home.php');
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T06:38:49.393

您的查询中的列数不匹配。

试试下面一个

```
$query = "INSERT INTO recipes ( recipe_name, ingredient1, ingredient2, ingredient3, ingredient4, ingredient5, ingredient6, ingredient7, ingredient8, ingredient9, ingredient10, meal, ethnicity, instructions )
        VALUES ('$recipe_name' , '$ingredient1' , '$ingredient2' , '$ingredient3' , '$ingredient4' , '$ingredient5' , '$ingredient6' , '$ingredient7' , '$ingredient8' , '$ingredient9' , '$ingredient10' , 'lst_meal' , '$lst_ethnicity' , '$instructions' );"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T08:33:54.370

*请不要为 offtopic 投票/标记，我只是想提供帮助（它直接处理此问题中提供的代码）。*

我知道这是不请自来的，但我想我只是提出一些建议，我认为这些建议会在您将来处理像您的问题中那样的迭代情况时对您有所帮助：

您可以在 html 中使用输入数组，并在 PHP 中遍历它们，而不是使用成分 1、2、3..。您可以通过将`name`输入的 html 属性中的数字替换为`[]`. 您可以将所有十个成分输入
`<input type="text" name="ingredient[]" class="add_recipe_field"/>` 替换为，也可以使用一个简单的 php 循环：

```
<?php
for ($i=0; $i < 10; $i++)
{
    echo "<input type='text' name='ingredient[]' class='add_recipe_field'/>";
}
?> 
```

这将`$_POST['ingredient']`作为一个数组提供给您的 PHP。我重写了您的 PHP 代码（是的，全部）来说明如何循环遍历它（另外，我使用了 mysqli），如下所示。这样，您只需更改上面的计数器和您的 mysql 表即可更改成分的数量（无需修改下面的代码！）。此外，（我自己会做的事情）您可以编写一些 javascript（或 jquery 等）以只有一个输入开始，并在每次用户输入成分时自动添加输入......只是一个想法。但是，是的，让我知道这是否有帮助，如果这一切都有意义。当然，我绝不是完美高效代码的典范，所以如果有人打扰阅读这个答案想要评论如何改进我写的内容，那就去吧。

```
<?php
$dbhost = 'localhost'; //Change to webserver info
$dbname = '*'; //Change to webserver info
$dbuser = '*'; //Change to webserver info
$dbpass = '*'; //Change to webserver info

//Connect to database
$mysqli = mysqli($dbhost, $dbuser, $dbpass, $dbname);
//Check for successful connection
if ($mysqli->connect_errno) {
    die("Failed to connect to MySQL: ".$mysqli->connect_error);
}

//Mysql table fields (besides ingredients)
$sqla = "`recipe_name`, `meal`, `ethnicity`, `instructions`";

//Manually add corresponding values (could also be done in a loop)
$sqlb = $_POST['recipe_name']; //You Probably want some sort of validation here
$sqlb .= ", ".$_POST['lst_meal'];
$sqlb .= ", ".$_POST['lst_ethnicity'];
$sqlb .= ", ".$_POST['instructions'];

//Loop through ingredients and add to query
$comma = ", "; //Leave empty if all mysql fields within loop
$ingredients = $_POST['ingredient'];
foreach(array_keys($ingredients) as $k)
{
    if ($ingredients[$k]!="") //If not blank
    {
        //Add mysql field name (+1 since index starts at 0)
        $sqla .= $comma."`ingredient".($k+1)."`";
        //Add value to other half of string
        $sqlb .= $comma."\"".$mysqli->real_escape_string($ingredients[$k])."\""; 
        $comma = ", "; //Insert comma in subsequent iterations
    }
}
//Put the query together
$query = "INSERT INTO `recipes` (".$sqla.") VALUES (".$sqlb.");";

//Try the query and die the error + sql on error
if (!$mysqli->query($query))
{
    die("MySQL Error: ".$mysqli->error."<br>Query: ".$query);
}
header('Location: home.php');
?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-13T07:05:19.547

我认为你必须给出输入类型提交的名称。如下所示：

```
<?php
$save=$_POST['save'];
?>

<input type="submit" value="Save"  name="save"/> 
```

# javascript - Node.js：尝试将 Fine-uploader 挂接到烧瓶应用程序中

> ID：15984982
> 
> 赞同：0
> 
> 时间：2013-04-13T06:29:52.540
> 
> 标签：javascript, jquery, python, flask, fine-uploader

我正在尝试将精细的上传器连接到 Flask 端点。

端点看起来像：

```
@app.route('/', methods=['GET', 'POST'])
def a_function():
    if request.method == 'POST':
         file = request.files['file']
         {{ do stuff }}
         return render_template('index.html', {{ variables }} )
    return render_template('index.html' ) 
```

我正在尝试替换标准表格：

```
<form action="" method=post enctype=multipart/form-data>
    <input type=file name=file>
    <input type=submit value=Upload>
</form> 
```

使用[精细上传器](http://fineuploader.com/fine-uploader-with-jquery-wrapper-demo.html)：

```
<div class="centered_div">
   <div id="manual-fine-uploader"> </div>
   <div id="triggerUpload" class="btn btn-primary" style="margin-top: 10px;">
       <i class="icon-upload icon-white"></i> Upload now>
   </div>
</div>

...

$(document).ready(function() {
    var manualuploader = $('#manual-fine-uploader').fineUploader({
        request: {
            endpoint: '/'
        },
        autoUpload: false,
        text: {
            uploadButton: '<i class="icon-plus icon-white"></i> Select Files'
        },
        failedUploadTextDisplay: {
            mode: 'custom',
            maxChars: 40,
            responseProperty: 'error',
            enableTooltip: true
        }
    });

    $('#triggerUpload').click(function() {
        manualuploader.fineUploader('uploadStoredFiles');
    });
}); 
```

但是我在控制台中遇到了一些 js 错误，并且端点似乎没有`request`正确管理：

> POST http://{{ localhost }}:5000/ 400 (BAD REQUEST) jquery.fineuploader-3.4.1.js:3903 [FineUploader] 尝试解析 xhr 响应文本时出错 (SyntaxError: Unexpected token <) jquery.fineuploader -3.4.1.js:155 [FineUploader] 'error' 不是服务器响应的有效属性。

和应用程序错误了`Upload failed`。

我猜测当我`endpoint: '/'`在线提交请求时会出现问题，并且我真的希望我不必完全重写`{{ do stuff }}`我的端点部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T17:48:01.037

好吧，首先，您为端点列出的代码永远不会在 Fine Uploader 中按原样工作。您的端点必须返回有效的 JSON 响应。有关详细信息 ，请参阅[服务器端示例](https://github.com/Widen/fine-uploader-server)和相关[自述文件。](http://docs.fineuploader.com)

其次，就您的路由而言，似乎确实有些问题。您的服务器以 400 响应。您需要检查服务器端代码以确定请求被拒绝的位置和原因。一个好的第一步是检查 Chrome 网络选项卡中的请求，记下端点，然后检查服务器端代码中的适当位置。

# php - mysql数据插入php

> ID：15984983
> 
> 赞同：0
> 
> 时间：2013-04-13T06:29:57.777
> 
> 标签：php, mysql, insert

让我解释一下我的问题..实际上我有一个表格，其中存储了患者报告，并且患者可以进行多个测试，因此每个报告的结果在打印时应该是不同的，结果插入不同但字段**备注****和**插入相同的值对于不止一项测试..这是报告的输入字段图像 **![在此处输入图像描述](https://i.stack.imgur.com/DFUpM.png)**

 **并且字段行可以根据患者测试的增加而增加..现在我正在使用它来插入表格

```
function save_report_content()
{
    $R=DIN_ALL($_REQUEST);
    $dt = time();
    foreach($R as $k=>$v)
    {
      $test_id = str_replace('rep_result_', '', $k);
        if(strstr($k, 'rep_result_'))
        {
            $content = $v;
            $SQL = "INSERT INTO report SET
                   rep_te_id   = '$test_id',
                   rep_result  = '$content',
                   record_id = '$R[payment_id]',
                   remark= '$R[remark]',
                   nor= '$R[nor]',
                   rep_date    = '$dt'"; 
```

现在结果在表格中有所不同，但对于一个以上的测试， ![在此处输入图像描述](https://i.stack.imgur.com/XP2XM.png) 我花了很多时间来恢复这个问题但没有成功，如果我错过了关于这个问题的任何相关信息，请随时问我，谢谢提前，任何想法都会受到高度赞赏....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T06:33:37.243

当你在 foreach 中时 .. 你不应该使用`$R[remark]`，因为你正在使用`$k=>$v`

它应该是`$v['remark']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T07:05:17.543

你的表格的结构是什么？

```
<input name='nor[]' /> 
```

它应该是一个数组，以允许每行值来，否则只有最后一行值会来......**

# java - 如何在 Java 和 .XML 中进行部分设计？

> ID：15984984
> 
> 赞同：1
> 
> 时间：2013-04-13T06:30:01.083
> 
> 标签：java, android, android-activity

我正在尝试用代码和java进行设计。这是活动 xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" 
android:id="@+id/hello">

</RelativeLayout> 
```

这是我正在尝试的Java代码。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    RelativeLayout layout=(RelativeLayout)findViewById(R.id.hello);
    TextView txt=new TextView(this);
    txt.setText("Hello World Problem");
    layout.addView(txt);
    setContentView(R.layout.activity_main);
} 
```

在相对布局中，我想在 java 代码中添加 textview。但上面的java代码不起作用。错误：应用程序已不幸停止。我该如何编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T06:32:12.017

`R.id.hello``findViewById`直到您调用`setContentView`并添加`R.id.hello`到您的活动视图之后才能找到。移动`setContentView`到你的`findViewById`线之上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T06:33:34.337

`setContentView`您必须在使用 findViewById() 获取视图之前进行安排。

```
protected void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.activity_main);
   RelativeLayout layout=(RelativeLayout)findViewById(R.id.hello);

   LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
                      (LayoutParams.WRAP_CONTENT), (LayoutParams.WRAP_CONTENT));

   TextView txt=new TextView(this);
   txt.setLayoutParams(lp);
   txt.setText("Hello World Problem");
   layout.addView(txt);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T07:01:39.750

您好 RedHat_Father 用以下代码替换您的 java 代码，它可能会对您有所帮助：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);
    //  Do not forget to set your layout file before you done the mapping of the elements

    RelativeLayout layout=(RelativeLayout)findViewById(R.id.hello);
    TextView txt=new TextView(this);
    txt.setText("Hello World Problem");
    layout.addView(txt);
} 
```

我希望这会奏效...... :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-13T06:34:32.740

由于您的编码完全错误，要在运行时添加 textview，您必须执行以下操作：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    RelativeLayout layout=(RelativeLayout)findViewById(R.id.hello);
    TextView txt = new TextView(this);
    txt.setText("Hello World");
    txt.setId(1);
    txt.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
    layout.addView(txt); 
```

# java - java中具有右关联性的表达式求值

> ID：15984986
> 
> 赞同：1
> 
> 时间：2013-04-13T06:30:13.090
> 
> 标签：java

我正在尝试解决一个问题，在该问题中，我必须解决一个给定的表达式，该表达式由同一字符串中的一个或多个初始化组成，没有运算符优先级（尽管带有括号内的子表达式）。所有运算符都有正确的优先级，所以我必须从右到左评估它。我很困惑如何处理给定的问题。详细问题在这里给出：[http ://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&page=show_problem&problem=108](http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&page=show_problem&problem=108)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T06:37:16.810

我会给你一些想法来尝试：

首先，您需要递归地评估括号内的值。您想要从嵌套最多到嵌套最少的括号，因此使用匹配括号内没有括号的正则表达式`)`。将计算结果子串到括号表达式占用的字符串部分。

如果没有括号，那么现在您需要评估运算符。这个问题需要正确优先级的原因是迫使你思考如何回答它——你不能只阅读字符串并进行计算。您必须考虑整个字符串然后开始进行计算，这意味着存储一些描述它的结构。您可以使用多种策略来执行此操作，例如：

- 您可以使用扫描仪或正则表达式对字符串进行标记 - 不断尝试查看字符串中的下一项是否是数字或它是哪个运算符，并将它的类型及其值推送到列表中. 然后，您可以使用某种 case/switch 结构从右到左评估列表，以确定对每个运算符执行的操作（或者每个运算符都与它对数字的作用相关联）。`=`它本身会将变量名称键映射到值，并在该变量的键下插入值，然后返回（放置到列表中）它产生的值，因此它可以用于另一个赋值。似乎`-`也可以通过其右侧是否有空格来确定它是减法还是负数。

- 您可以在整个字符串上使用正则表达式，而不是标记化。但是标记化更加健壮。我试图构建一个基于将正则表达式一遍又一遍地应用于整个字符串的计算器，但要正确掌握所有规则非常困难，我不推荐它。

我以前写过一个这样的表达式评估计算器，所以如果你遇到具体问题，可以问我问题。

# mysql - 根据另一个表中的更改自动更新数据库行

> ID：15984987
> 
> 赞同：0
> 
> 时间：2013-04-13T06:30:34.717
> 
> 标签：mysql, database, triggers, phpmyadmin

我有一个场景，需要在另一个表中添加或删除行时自动更新表行中的值。我不知道该怎么做。顺便说一句，我正在使用 phpmyadmin 来管理我的数据库。提前致谢。

```
pages Table
------------
page_no
no_of_choices

choices Table
-------------
page_no
choice_no 
```

当我添加选项编号为 1 和 page_no 的选项时，应使用 no_of_choices=no_of_choices+1 更新具有行 page_no=1 的表页

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T07:00:46.253

您可以使用触发器。

例如：

```
CREATE TRIGGER `test1` 
AFTER INSERT ON `tbl1`
FOR EACH ROW SET NEW.upd_fld =  new_value 
```

对于删除也可以这样做。

您还可以从 phpMyAdmin 创建触发器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T08:25:54.077

表 A：page_no、no_of_choices 表 B：page_no、choice_no...

使用关系数据库，您很少需要重复数据。如果在某些时候出现问题，您将不知道该信任哪个 - 表 B 中的行或表 A 中的 no_of_choices。更好的解决方案是执行以下操作之一（取决于您正在查询的表）：

`SELECT COUNT(no_of_choices) FROM B WHERE page_no = 1`

或者

`SELECT A.*, COUNT(choice_no) AS choice_no FROM A LEFT JOIN B USING(page_no)`

您得到相同的结果，但现在您有一条记录要关闭，因此您不会有不一致的数据。

# java - 将文本文件中的值作为字符串返回

> ID：15984993
> 
> 赞同：0
> 
> 时间：2013-04-13T06:31:20.190
> 
> 标签：java, text, file-io, arraylist

好的，所以我已经看到了一些关于此的问题，但答案有点压倒性并且非常多样化。显然，我正在寻找最简单的解决方案，但希望能够从文本文件中读取行作为字符串并将它们存储在数组列表中。对于将要导入的每个事物，我都有一个 addItem(String item) 方法以将其添加到数组列表中，但我不知道如何正确导入文件并将每一行作为单独的字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T06:39:53.867

您正在寻找类似 BufferedReader 的东西，它具有逐行读取文件输入的功能。

```
import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.InputStreamReader;

public static void main(String[] args) {

  try {
      FileInputStream in = new FileInputStream("inputFile.txt");
      BufferedReader br = new BufferedReader(new InputStreamReader(in));
      String strLine;

      while((strLine = br.readLine())!= null) {
          addItem(strLine);
      }

  } catch(Exception e) {
      System.out.println(e);
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T06:43:42.487

我不在我的电脑上，所以我没有编译这个答案，但我相信你正在寻找这样的东西：

```
// file is your txt file.
BufferedReader br = new BufferedReader(new FileReader(file));
String line;
while ((line = br.readLine()) != null) {
   // process the line, i.e, add to your list
}
br.close(); 
```

希望能帮助到你

# cocos2d-iphone - 如何在 cocos 2d 中集成 PlayHeaven sdk？

> ID：15984996
> 
> 赞同：3
> 
> 时间：2013-04-13T06:31:45.277
> 
> 标签：cocos2d-iphone

我找不到任何合适的链接或关于 playheaven 的回复。github 中只有示例项目没有帮助。

如果有一些不错的教程或视频链接在步骤中解释如何做。请提供链接或帮助我整合它们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:57:58.603

我是 Zachary Drake，PlayHaven 的销售工程总监。PlayHaven 官方目前不支持 Cocos2D，因此我们没有关于如何将 PlayHaven 集成到 Cocos2D 游戏中的说明。PlayHaven 可以很好地与 Cocos2d 一起使用，只需按照 iOS 说明进行操作，但我们不会像官方支持的平台（iOS、Android、Unity iOS、Unity Andoid、Adobe AIR）那样对 Cocos2d 进行 QA 和其他测试。

Cocos2d 论坛上的这个人似乎已经成功集成了 PlayHaven（在咆哮之后），但我实际上并没有执行所描述的集成步骤并且不能保证它们： http: [//www.cocos2d-iphone.org/forum/topic /96170](http://www.cocos2d-iphone.org/forum/topic/96170)

iOS 集成文档没有我们希望的那么好，我们现在正在对其进行修改。如果您通过电子邮件向 support@playhaven.com 发送特定的 iOS 集成问题，我们可以为您提供帮助。但是，如果 Cocos2D 兼容性问题破坏了集成，不幸的是，我们将无法解决这个问题。

感谢您对 PlayHaven 的关注。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T06:36:08.777

我使用 Cocos2d 的 Playhavan 工作示例： [https ://www.box.com/s/lc2p8jhngn5o8hxeuw3y](https://www.box.com/s/lc2p8jhngn5o8hxeuw3y)

以下是 SDK 集成的完整说明：

[https://github.com/playhaven/sdk-ios](https://github.com/playhaven/sdk-ios)

# android - Eclipse：无法检测设备兼容性

> ID：15984999
> 
> 赞同：2
> 
> 时间：2013-04-13T06:32:03.470
> 
> 标签：android, eclipse

我有 Eclipse 4.2.0、Win7 x64 和最新的 android sdk。我也只有一台三星 Galaxy S1。我不知道为什么 eclipse 向我显示这个错误，我可以通过重新加载我的 pc 或 eclipse 来解决它。但我不想这样做。

我看到超过 30 个无法复制的设备副本。如果我不长时间运行我的应用程序会很高兴（也许），但我不确定。 ![在此处输入图像描述](https://i.stack.imgur.com/P0LkW.png)

有谁知道如何在不重新加载eclipse的情况下解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T07:08:56.407

尝试以下步骤

1.在设备上重置调试器选项..这可能有效

或者

1.进入“设备管理器设置”

2.选择您的设备并“更新驱动程序”

4 选择“浏览我的电脑以查找设备软件”

5.选择“让我从计算机上的设备驱动程序列表中选择”

6.从弹出窗口或与您的设备相关的驱动程序中选择“Samsung mobile device MTP”。

这将再次设置您的设备.. 并且可以使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T06:45:08.780

尝试从官网重新安装或重新下载SDK。如果您真的想测试您的代码或 APK 文件，您可以使用 You wave for android 一个真正的 android 模拟器。Torrent 链接就是[这个。](http://kat.ph/youwave-for-android-4-0-2-patch-t6963736.html)

希望这可以帮助你。