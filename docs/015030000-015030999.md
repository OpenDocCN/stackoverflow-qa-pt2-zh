# StackOverflow 问答 15030000-15030999

# python - Py.test 反复循环测试

> ID：15030010
> 
> 赞同：3
> 
> 时间：2013-02-22T17:34:27.470
> 
> 标签：python, pytest

我正在尝试重复测试 N 次（收集的相同测试）。

为什么：通过这样做，我想看看测试的速度是否会降低，或者我可以收集一个参数的“平均时间”，然后传递另一个参数并再次获得“平均时间”。

我的理解是使用`def pytest_runtestloop()`钩子，但是我遇到了麻烦。

这是我的钩子代码：

```
def pytest_runtestloop(session):
    repeat = int(session.config.option.repeat)
    assert isinstance(repeat, int), "Repeat must be an integer"
    for i in range(repeat): #@UnusedVariable                      
        session.config.pluginmanager.getplugin("main").pytest_runtestloop(session)

    return True 
```

问题是**“设置”仅在第一次运行**：例如：

```
class TestSomething(object):

    @classmethod
    @pytest.fixture(scope = "class", autouse = True)
    def setup(self):
        //setup function

    def test_something(self):
        //test function 
```

这里`setup`只会在第一个周期被调用，如果我设置为 2`test_something`会被调用两次`session.config.option.repeat`

我究竟做错了什么？有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T11:31:07.430

似乎 pytest-2.3.4 在内部保持了一些状态，以防止灯具再次运行。 `pytest_runtest_loop`编写时没有考虑到您的用例。您可以提交有关它的“错误”问题，我们可以看到我们可以做些什么来修复它。（我很快看了看，但无法立即看出哪里出了问题，需要更多探索）。

# python - Python 和 C 使用相同的 crc32

> ID：15030011
> 
> 赞同：2
> 
> 时间：2013-02-22T17:34:33.087
> 
> 标签：python, c, crc32

我需要一个脚本，该脚本将为 Python 和 C 计算具有相同输出的 crc32。

我现在正在使用 zlib.crc32，但是对于 C 没有这样的库，我们正在根据维基百科自己编写它。但它不会返回相同的值。

这是我们的 C 脚本代码（从 wikipedia 复制，基于 RFC）：

```
unsigned int crc32( unsigned char *message, unsigned int n )
{
   //int i, crc;
   unsigned int crc;
   unsigned int i;
   unsigned int byte, c;
   const unsigned int g0 = 0xEDB88320,    g1 = g0>>1,
      g2 = g0>>2, g3 = g0>>3, g4 = g0>>4, g5 = g0>>5,
      g6 = (g0>>6)^g0, g7 = ((g0>>6)^g0)>>1;

   i = 0;
   crc = 0xFFFFFFFF;
   //while ((byte = message[i]) != 0)
   while( i != n)
   {
               byte = message[i];                   // Get next byte.
               // byte = FrmReadByte( i );  // Get next byte.

               crc = crc ^ byte;
               c = ((crc<<31>>31) & g7) ^ ((crc<<30>>31) & g6) ^
               ((crc<<29>>31) & g5) ^ ((crc<<28>>31) & g4) ^
               ((crc<<27>>31) & g3) ^ ((crc<<26>>31) & g2) ^
               ((crc<<25>>31) & g1) ^ ((crc<<24>>31) & g0);

               crc = ((unsigned)crc >> 8) ^ c;
               i = i + 1;
   }
   return ~crc;
} 
```

编辑：

我们只有 4KB 的 ram 内存，程序本身并不存在。通过 crc32 脚本占用 1KB 的内存可能太多了，不适合那里。感谢您指出 C 也存在 ZLIB 库。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T18:54:51.270

> 我现在正在使用 zlib.crc32，但是对于 C 没有这样的库

嗯，是的，有。它被称为[zlib](http://zlib.net/)。zlib 是用 C 编写的，它是 Python 使用的！因此类的名称。

您可以使用`crc32()`zlib 中的函数。该实现比您可能发现的其他实现要快得多。阅读[zlib.h](http://zlib.net/manual.html)以获取接口信息。

您可以自己编译 zlib，或者它可能已经安装在您的系统上。

*更新：*

我现在看到您的评论（应该编辑到问题中，因为这对于获得正确答案至关重要）您的记忆力非常有限。然后你可以使用这个：

```
static uint32_t crc32(uint32_t crc, unsigned char *buf, size_t len)
{
    int k;

    crc = ~crc;
    while (len--) {
        crc ^= *buf++;
        for (k = 0; k < 8; k++)
            crc = crc & 1 ? (crc >> 1) ^ 0xedb88320 : crc >> 1;
    }
    return ~crc;
} 
```

crc 最初设置为零。

使用`~`将给出正确的结果，因为输入的`uint32_t`类型`stdint.h`保证为 32 位。

如果你能负担得起更多的代码空间，那么展开循环可能会加快它的速度（如果编译器还没有这样做）：

```
static uint32_t crc32(uint32_t crc, unsigned char *buf, size_t len)
{
    crc = ~crc;
    while (len--) {
        crc ^= *buf++;
        crc = crc & 1 ? (crc >> 1) ^ 0xedb88320 : crc >> 1;
        crc = crc & 1 ? (crc >> 1) ^ 0xedb88320 : crc >> 1;
        crc = crc & 1 ? (crc >> 1) ^ 0xedb88320 : crc >> 1;
        crc = crc & 1 ? (crc >> 1) ^ 0xedb88320 : crc >> 1;
        crc = crc & 1 ? (crc >> 1) ^ 0xedb88320 : crc >> 1;
        crc = crc & 1 ? (crc >> 1) ^ 0xedb88320 : crc >> 1;
        crc = crc & 1 ? (crc >> 1) ^ 0xedb88320 : crc >> 1;
        crc = crc & 1 ? (crc >> 1) ^ 0xedb88320 : crc >> 1;
    }
    return ~crc;
} 
```

您说您只有 4 KB 的“内存”。那只是程序的工作记忆，还是程序也必须在那里？例如，如果您在闪存中有更多空间用于代码，则可以预先计算表格并将其与代码一起存储。表驱动的 CRC 会快得多。zlib 代码提供表驱动的 CRC，一次执行一个字节，一次执行四个字节，分别需要一个 1Kbyte 或 4Kbyte 的表。

*更新 2：*

既然您在评论中回答说 4KBytes 只是工作内存，那么您应该使用表驱动的 CRC。您可以简单地使用`crc32()`zlib 中的函数和未定义`crc32.c`的表。`crc32.h``BYFOUR`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-12T20:20:12.560

C：

```
UInt32
crc32(UInt32 crc, UInt8 *p, SInt len)
{
  crc = ~crc;
  while (--len >= 0) {
    crc = crc ^ *p++;
    for (SInt i = 8; --i >= 0;) {
      crc = (crc >> 1) ^ (0xedb88320 & -(crc & 1));
    }
  }
  return ~crc;
}

void
crc_unitTest(void)
{
  UInt8 b1[] = { 0, 0, 0, 0, 0, 0, 0, 0 };
  UInt8 b2[] = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 };
  UInt8 b3[] = { 0xff, 0, 0xff, 0, 0xff, 0, 0xff, 0 };
  assert(crc32(0, b1,  8) == 0x6522df69);
  assert(crc32(0, b2, 10) == 0x456cd746);
  assert(crc32(0, b3,  8) == 0xea8c89c0);
} 
```

Python：

```
def crc32(crc, p, len):
  crc = 0xffffffff & ~crc
  for i in range(len):
    crc = crc ^ p[i]
    for j in range(8):
      crc = (crc >> 1) ^ (0xedb88320 & -(crc & 1))
  return 0xffffffff & ~crc

def unitTest():
  b1 = [ 0, 0, 0, 0, 0, 0, 0, 0 ]
  b2 = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 ]
  b3 = [ 0xff, 0, 0xff, 0, 0xff, 0, 0xff, 0 ]
  assert(crc32(0, b1,  8) == 0x6522df69)
  assert(crc32(0, b2, 10) == 0x456cd746)
  assert(crc32(0, b3,  8) == 0xea8c89c0) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-22T18:02:30.470

由于您需要一个不使用查找表（大多数实现都使用）和匹配的 Python 等效项的 C 实现，因此您可以按照 Mark Ransom ( binascii.crc32 ) 的建议使用 ZIP 的 CRC32和我~~[在这里](http://mdfs.net/Info/Comp/Comms/CRC32.htm)~~~~借用的匹配的无表实现~~

 ~~```
/* Calculating ZIP CRC-32 in 'C'
   =============================
   Reference model for the translated code */

#define poly 0xEDB88320
/* Some compilers need
   #define poly 0xEDB88320uL
 */

/* On entry, addr=>start of data
             num = length of data
             crc = incoming CRC     */
int crc32(char *addr, int num, int crc)
{
int i;

for (; num>0; num--)              /* Step through bytes in memory */
  {
  crc = crc ^ *addr++;            /* Fetch byte from memory, XOR into CRC */
  for (i=0; i<8; i++)             /* Prepare to rotate 8 bits */
  {
    if (crc & 1)                  /* b0 is set... */
      crc = (crc >> 1) ^ poly;    /* rotate and XOR with ZIP polynomic */
    else                          /* b0 is clear... */
      crc >>= 1;                  /* just rotate */
  /* Some compilers need:
    crc &= 0xFFFFFFFF;
   */
    }                             /* Loop for 8 bits */
  }                               /* Loop until num=0 */
  return(crc);                    /* Return updated CRC */
} 
```~~  ~~编辑：正如一些人指出上述代码存在问题，下面的代码与维基百科的（参见[http://ideone.com/pWLVSo](http://ideone.com/pWLVSo)）和 Python 的（[http://ideone.com/SvYuyE](http://ideone.com/SvYuyE) - 1277644989==0x4c2750bd）相匹配. 此代码来自[此页面](http://create.stephan-brumme.com/crc32/#bitwise)，其中其他实现和可能对我复制的基本版本的改进

```
const uint32_t Polynomial = 0xEDB88320;

uint32_t crc32_bitwise(const void* data, size_t length, uint32_t previousCrc32 = 0) { 
     uint32_t crc = ~previousCrc32; // same as previousCrc32 ^ 0xFFFFFFFF 
     unsigned char* current = (unsigned char*) data; 
     while (length--) { 
         crc ^= *current++; 
         for (unsigned int j = 0; j < 8; j++) {
             if (crc & 1) 
                 crc = (crc >> 1) ^ Polynomial; 
             else 
                 crc = crc >> 1; 
         }

     } 
     return ~crc; // same as crc ^ 0xFFFFFFFF 
} 
```~~

# osx-snow-leopard - 在 OS X 上通过 HTK 进行实时识别错误 [+6306] OpenAsChannel：不支持音频输入

> ID：15030012
> 
> 赞同：1
> 
> 时间：2013-02-22T17:34:39.373
> 
> 标签：osx-snow-leopard, speech-recognition, htk

我的目标是在 OS X 上通过 HTK 3.4.1 进行实时识别。

首先，我是在 Ubuntu 10.0.4 上完成的。在我生成了声学和语言模型之后，还有它需要的一切。我执行这个命令来做实时识别。

```
 HVite -H am/tiehmm2m_5/newMacros \
          -C config/liverecog.config \
          -w lm/dgs.wdnet \
           config/dgs.dict \
           config/tie.list 
```

一切对我来说都很好。然后我尝试将它移植到我的 OS X 上，使用相同的代码。我可以做任何事情，例如生成模型或识别。

但是当我进行实时识别时，我遇到了这样的错误。

```
 READY[1]>
     ERROR [+6306]  OpenAsChannel: Audio input not supported
     FATAL ERROR - Terminating program HVite 
```

我该如何解决这个错误？以前有人遇到过这个错误吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T17:27:28.870

它说不**支持**OSX 上的输入。**不支持**意味着某些功能未在代码中实现。如果您需要此功能，则必须实现它或寻找适合您需求的其他工具。

OSX 不同的原因是 OSX 中的音频输入子系统 (CoreAudio) 与 Linux (OSS) 中的音频输入子系统有很大不同。您只需要从头开始在 OSX 上实现音频输入。

# wix - 启动条件上的 Wix“产品元素包含意外的子元素 util：RegistrySearch”错误消息

> ID：15030013
> 
> 赞同：0
> 
> 时间：2013-02-22T17:34:40.047
> 
> 标签：wix, wix3.5, wix3.6

我对 Wix 完全陌生，我一直负责这个。

安装程序应提示消息“应用程序需要 Reportviewer”。它应该检查是否安装了 reportViewer，如果没有在安装开始时抛出消息。

这就是我正在尝试做的（随机尝试，因为我仍然不了解细节）

```
<Condition Message="This application requires ReportViewer.">
  <![CDATA[ReportViewerV10 OR ReportViewerWow64V10]]>
</Condition>

<util:RegistrySearch
 Root="HKLM"
 Key="SOFTWARE\Microsoft\ReportViewer\v10.0"
 Value="Install"
 Variable="ReportViewerV10"
 Win64="yes"
  />
<util:RegistrySearch
Root="HKLM"
Key="SOFTWARE\Wow6432Node\Microsoft\ReportViewer\v10.0"
Value="Install"
Variable="ReportViewerWow64V10"
Win64="yes"
  /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:40:05.137

您需要在 WIX 项目的主容器标记中添加对[http://schemas.microsoft.com/wix/UtilExtension的引用以引用 util:RegistrySearch。](http://schemas.microsoft.com/wix/UtilExtension)

**文件应该看起来像**

```
<?xml version="1.0"?>
<Include xmlns="http://schemas.microsoft.com/wix/2003/01/wi">
.
.
.
</Include> 
```

**或者**

```
<?xml version="1.0"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2003/01/wi">
.
.
.
</Wix> 
```

您可以将此实用程序调用保留在`Bundle`标记中或`Fragment`仅标记中。

有关这方面的更多详细信息，请参阅[RegistrySearch 元素（实用程序扩展）文档](http://wix.sourceforge.net/manual-wix3/util_xsd_registrysearch.htm)。有关更多想法，请参阅[WIX 文档。](http://wix.sourceforge.net/manual-wix3/main.htm)

# javascript - 动态添加的 div 在被调用时将不起作用

> ID：15030015
> 
> 赞同：2
> 
> 时间：2013-02-22T17:34:40.953
> 
> 标签：javascript, jquery

我正在尝试创建一个 div 列表。单击新图层按钮时，会创建一个具有唯一 ID 的新 div。当我尝试调用这些动态添加的 div 时，没有响应。我很困惑，因为预先存在的 div 有效。

```
<input type="submit" id="newLayer" value="New Layer">

 <div id="layersContainer" class="layerscontainer">
    <div class="layer" id="layer1">fadfa</div>
    <div class="layer" id="layer2">2</div>            
 </div>

var newLayerCounter = 2;
var layerID = "";
var layersArray = new Array();
var clickedElement = "";

function selectLayer(){

      $(clickedElement).css({"background-color":"yellow"});

    }

$('#layersContainer div').on("click", function(){

    clickedElement = $(this).attr("id");
    alert(clickedElement);
    selectLayer();

});

$('#newLayer').on("click", function(){

    newLayerCounter = newLayerCounter + 1;
    layerID = "#layer"+ newLayerCounter;

    $('<div/>', {
    id: "layer"+ newLayerCounter,
    class: "layer"
   }).appendTo('#layersContainer');

    $(layerID).text('hey');

}) 
```

这是一个工作 JSfiddle 的链接

[http://jsfiddle.net/Q3dSp/24/](http://jsfiddle.net/Q3dSp/24/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:39:05.150

改变你的

```
$('#layersContainer div').on("click", function(){ 
```

至

```
$(document).on("click", '#layersContainer div', function () {
    clickedElement = $(this).attr("id");
    alert(clickedElement);
    selectLayer();
}); 
```

* * *

它被称为[委托事件](http://api.jquery.com/on#direct-and-delegated-events)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:40:56.863

Try with this one:

```
 $('#layersContainer').on("click", 'div', function(){
clickedElement = $(this).attr("id");
    alert(clickedElement);
    selectLayer();
 }); 
```

In this situation you need a `event delegation to existing closest parent` when `dom was ready.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T17:38:05.080

尝试`$('#layersContainer').on("click", "div", function(){ (...) });`

[http://jsfiddle.net/3hqfn/1/](http://jsfiddle.net/3hqfn/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T17:38:17.647

改变 ：

```
$('#layersContainer div').on("click", function(){ 
```

有了这个：

```
$('#layersContainer').on("click", "div", function(){ 
```

# asp.net - 表单提交中的asp.net razor模型绑定动态列表

> ID：15030024
> 
> 赞同：0
> 
> 时间：2013-02-22T17:35:03.320
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor, webmatrix

我正在尝试创建一个输入订单。

我需要用户能够添加多个行项目然后更新。我试图使用购物车类（用户创建购物车项目并添加列表项，可以将多行添加到列表项）。

我没有解决这个问题。我正在使用`asp.net` `razor`正在 `webmatrix`构建站点。Webmatrix 说它不识别 Cart()。

```
@{ 
if (Session["cart"] == null)
{
Session["cart"] = new Cart();
}
Cart cart = (Cart)Session["cart"];

}
<table id="cartTable">
<tr>
<th class="product">Product</th>
<th class="size">Size</th>
<th class="price">Price</th>
</tr>
@foreach (var item in cart.Items)
{
<tr>
<td class="product">@item.ProductID</td>
<td class="size">@item.Size</td>
<td class="price">£@item.Price</td>
</tr>
}
</table> 
```

有一个更好的方法吗？非常感谢所有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:47:30.380

有一种方法可以绑定动态列表元素

```
@foreach (i=0; i< cart.Items.count; i++)
{
<tr>
   <td class="product"> <input type="hidden" name="cart.item[@i].ProductID"> </td>
   <td class="size"> <input type="text" name="cart.item[@i].Size"> </td>
   <td class="price">£ <input type="text" name="cart.item[@i].Price"> </td>
</tr>
} 
```

* * *

```
Webmatrix is saying that it doesnt recognise Cart() 
```

我强烈建议您将模型放在 Models 文件夹中，并使它们成为 Models 命名空间的一部分。然后它们应该自动可用。否则，您可能必须通过它的完整参考路径来引用购物车（如果它不在您的模型文件夹中）。例子

```
Datalayer.Entities.Cart cart = (Datalayer.Entities.Cart)Session["cart"]; 
```

* * *

**最后说明：** 您没有将购物车作为模型传递给您的视图

例子

```
@model {Project}.Entities.Cart 
```

这是使用 MVC 3 框架的更好做法。您会更早发现任何参考问题，并且可以选择使用紧密绑定的 Helpers

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:37:59.697

我推荐使用 Visual Studio 2012 Express over WebMatrix 进行 MVC 开发。此外，如果您希望让用户通过同一页面即时添加订单项，我还建议您使用 jQuery (javascript)。如果你愿意，我可以和你分享一个例子。

还有一点需要注意：您使用 MVC 和 WebForms 标记了这个，它们是两个非常不同的平台。

**编辑：**

我认为 Dave A 的解决方案可能更好，但要使用 jQuery 来做到这一点：

### 1 把你的添加按钮并隐藏`div`在一个表单中

```
<form action="/MyController/MyAction" method="post" id="addListItemForm">
<button id="addListItemButton">Add List Item</button>
<div style="hidden">
<input type="text" name="product" id="product" />
<button id="addButton">Add</button>
</div>
<input type="submit" text="Submit" />
</form> 
```

### 2 在按钮单击时显示表单字段

```
$('#addListItemButton').click(function(){
  $('#addListItemForm div').show();
}); 
```

### 3 在添加按钮单击时添加隐藏字段

```
$('#addButton').click(function(){
  var product = $('#addListItemForm #product').val();
  $("input").attr({
            name : "productListItems[]", 
            type : "hidden",
            value : product
        }).after('#addListItemForm');
}); 
```

### 4 当表单提交时，您将在`productListItems`数组中通过 POST 方法传递各种产品名称。

注意：您将不得不稍微玩一下，但这将是一个很好的学习练习......我不确定您要做什么，但这是我最好的猜测。

# android - HttpUrlConnection.getInputStream 在 Android 中返回空流

> ID：15030026
> 
> 赞同：9
> 
> 时间：2013-02-22T17:35:20.330
> 
> 标签：android, inputstream, httpurlconnection

我使用 HttpUrlConnection 向服务器发出 GET 请求。连接后：

1.  我得到响应代码：200
2.  我收到响应消息：好的
3.  我得到输入流，没有抛出异常但是：

    *   在一个独立的程序中，我得到了响应的主体，正如预期的那样：

    {"name":"my name","birthday":"01/01/1970","id":"100002215110084"}

    *   在 android 活动中，流是空的（available() == 0），因此我无法获取任何文本。

有什么提示或线索可循吗？谢谢。

编辑：这是代码

请注意：我使用`import java.net.HttpURLConnection;`的是标准的 http Java 库。**我不想使用任何其他外部库**。事实上，我在 android 中使用 apache 的 httpclient 库确实遇到了问题（apk 编译器不能使用它们的一些匿名 .class）。

好吧，代码：

```
URLConnection theConnection;
theConnection = new URL("www.example.com?query=value").openConnection(); 

theConnection.setRequestProperty("Accept-Charset", "UTF-8");

HttpURLConnection httpConn = (HttpURLConnection) theConnection;

int responseCode = httpConn.getResponseCode();
String responseMessage = httpConn.getResponseMessage();

InputStream is = null;
if (responseCode >= 400) {
    is = httpConn.getErrorStream();
} else {
    is = httpConn.getInputStream();
}

String resp = responseCode + "\n" + responseMessage + "\n>" + Util.streamToString(is) + "<\n";

return resp; 
```

我懂了：

> 200
> OK
> 响应正文

但只有

> 200 好

在安卓中

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-22T18:54:13.460

尝试 Tomislav 的代码，我得到了答案。

我的函数 streamToString() 使用 .available() 来检测是否收到任何数据，它在 Android 中返回 0。当然，我叫它太早了。

如果我宁愿使用 readLine()：

```
class Util {
public static String streamToString(InputStream is) throws IOException {
        StringBuilder sb = new StringBuilder();
        BufferedReader rd = new BufferedReader(new InputStreamReader(is));
        String line;
        while ((line = rd.readLine()) != null) {
            sb.append(line);
        }
        return sb.toString();
    }
} 
```

然后，它等待数据到达。

谢谢。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T17:52:12.543

您可以尝试使用此代码以字符串形式返回响应：

```
public String ReadHttpResponse(String url){
        StringBuilder sb= new StringBuilder();
        HttpClient client= new DefaultHttpClient();     
        HttpGet httpget = new HttpGet(url);     
        try {
            HttpResponse response = client.execute(httpget);
            StatusLine sl = response.getStatusLine();
            int sc = sl.getStatusCode();
            if (sc==200)
            {
                HttpEntity ent = response.getEntity();
                InputStream inpst = ent.getContent();
                BufferedReader rd= new BufferedReader(new InputStreamReader(inpst));
                String line;
                while ((line=rd.readLine())!=null)
                {
                    sb.append(line);
                }
            }
            else
            {
                Log.e("log_tag","I didn't  get the response!");
            }
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return sb.toString();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-05T12:56:57.580

流数据可能尚未准备好，因此您应该在尝试访问之前循环检查流中的数据是否可用。数据准备好后，您应该读取它并将其存储在另一个位置，例如字节数组；二进制流对象是将数据作为字节数组读取的不错选择。字节数组是更好选择的原因是因为数据可能是二进制数据，如图像文件等。

```
InputStream is = httpConnection.getInputStream();

byte[] bytes = null;

ByteArrayOutputStream baos = new ByteArrayOutputStream();

byte[] temp = new byte[is.available()];
while (is.read(temp, 0, temp.length) != -1) {
    baos.write(temp);
    temp = new byte[is.available()];
}

bytes = baos.toByteArray(); 
```

在上面的代码中，`bytes`响应是字节数组。如果它是文本数据，您可以将其转换为字符串，例如作为 utf-8 编码文本的数据：

```
String text = new String(bytes, Charset.forName("utf-8")); 
```

# html - HTML 将一个部分分成两列

> ID：15030030
> 
> 赞同：0
> 
> 时间：2013-02-22T17:35:41.103
> 
> 标签：html

我正在尝试将页面分成两个部分。左侧区域和右侧区域将是内容页面。我有以下 html，但看起来它不起作用。任何想法，我做错了什么？

```
<div id="wuiMainArea">
    <div id="wuiMainContent">

      <div id="wuiLeftArea">
        <div id="wuiLefthandNavRoot">
            <h2 class="wui-hidden">Section Navigation</h2>
            <h3 class="wui-navigation-title"><p>Applications</p><p>&nbsp;</p></h3>
            <div id="tree" style="float: left; width: auto; background-color: #f2f4f5;"> </div>
        </div>
        </div>

      <div id="wuiInpageNav">
            <div class="wui-inpage-container" id="in_100">
              <p>This is the div I will be using for charts </p>
            </div>
      </div>

      </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:04:41.970

```
 #wuiMainArea, #wuiMainContent{
    margin: 0 auto;
    width: 960px;
}

 #wuiLeftArea, #wuiInpageNav{
/* use half of the main content div's width */
/* -2 because of 1px-border on both sides */
    width: 478px; 
    display: inline-block;
    float: left;
} 
```

使用 CSS 样式化 HTML 会更好。定义宽度以满足您的需求。我还建议在将相同样式应用于多个元素时使用类而不是 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:38:52.583

像这样

```
<div id="wuiMainArea" style="border: 1px solid;">
    <div id="wuiMainContent" style="border: 1px solid;">

        <div id="wuiLeftArea" style="border: 1px solid;float: left;">
            <div id="wuiLefthandNavRoot">
                <h2 class="wui-hidden">Section Navigation</h2>
                <h3 class="wui-navigation-title"><p>Applications</p><p>&nbsp;</p></h3>
                <div id="tree" style="float: left; width: auto; background-color: #f2f4f5;"> </div>
            </div>
        </div>

        <div id="wuiInpageNav" style="border: 1px solid; float: left;">
            <div class="wui-inpage-container" id="in_100">
                <p>This is the div I will be using for charts </p>
            </div>
        </div>
        <div style="clear: both;"></div>
    </div>
</div> 
```

# spring - Spring Batch中，可以配置多个JdbcBatchItemWriters并行写入吗？

> ID：15030031
> 
> 赞同：7
> 
> 时间：2013-02-22T17:35:43.383
> 
> 标签：spring, spring-batch

在我的春季批处理作业中，我的项目处理器将项目阅读器读取的对象拆分为七个可变长度列表。这些列表必须写入数据库中的七个表，并且任何错误（如数据库出于任何原因拒绝记录）都必须导致事务在所有七个表上回滚。

目前，我使用这七个列表创建了一个包装对象，这些列表传递给自定义项目编写器。编写器获取所有这些项目，创建自己的七个列表，因此它只有七个批量写入（使用基于 JdbcTemplate 的 DAO），用于项目处理器返回的一批包装对象。

我的作者按顺序为这些表中的每一个调用插入函数，我想加快速度。我想知道我是否可以将列表并行写入各自的表，以便总执行时间是最长写入时间。我不能妥协的一个要求是，这必须在单个事务中，如果任何作者有任何异常，则需要回滚。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T14:57:41.217

这是一个使用 TaskExecutor 并在`org.springframework.batch.item.support.CompositeItemWriter`.

```
package de.incompleteco.spring.batch.item.support;

import java.util.List;

import org.springframework.batch.item.ItemWriter;
import org.springframework.batch.item.support.CompositeItemWriter;
import org.springframework.core.task.TaskExecutor;
import org.springframework.util.Assert;

import de.incompleteco.spring.domain.SimpleEntity;

public class ParallelCompositeItemWriter extends CompositeItemWriter<SimpleEntity> {

    private List<ItemWriter<? super SimpleEntity>> delegates;

    private TaskExecutor taskExecutor;

    @Override
    public void write(final List<? extends SimpleEntity> item) throws Exception {
        for (final ItemWriter<? super SimpleEntity> writer : delegates) {
            taskExecutor.execute(new Runnable()  {
                @Override
                public void run() {
                    try {
                        writer.write(item);
                    } catch (Throwable t) {
                        rethrow(t);
                    }   
                }

                private void rethrow(Throwable t) {
                    if (t instanceof RuntimeException) {
                        throw (RuntimeException) t;
                    }
                    else if (t instanceof Error) {
                        throw (Error) t;
                    }
                    throw new IllegalStateException(t);
                }       
            });
        }//end for
    }

    public void setTaskExecutor(TaskExecutor taskExecutor) {
        this.taskExecutor = taskExecutor;
    }

    @Override
    public void setDelegates(List<ItemWriter<? super SimpleEntity>> delegates) {
        this.delegates = delegates;
        super.setDelegates(delegates);
    }

    @Override
    public void afterPropertiesSet() throws Exception {
        super.afterPropertiesSet();
        Assert.notNull(taskExecutor,"Task executor needs to be set");
    }

} 
```

示例配置看起来像这样；

```
<batch:job id="simpleJob">
    <batch:step id="simpleJob.step1">
        <batch:tasklet>
            <batch:chunk reader="reader" writer="writer" commit-interval="10"/>
        </batch:tasklet>
    </batch:step>
</batch:job>

<bean id="reader" class="org.springframework.batch.item.support.IteratorItemReader">
    <constructor-arg ref="itemList"/>
</bean>

<bean id="writer" class="de.incompleteco.spring.batch.item.support.ParallelCompositeItemWriter">
    <property name="delegates" ref="writerDelegates"/>
    <property name="taskExecutor" ref="writerTaskExecutor"/>
</bean>

<util:list id="writerDelegates">
    <bean class="org.springframework.batch.item.database.JdbcBatchItemWriter">
        <property name="dataSource" ref="dataSource1"/>
        <property name="sql" value="insert into test_table (idcol,stuff) values (:idCol,:stuff)"/>
        <property name="itemSqlParameterSourceProvider">
            <bean class="org.springframework.batch.item.database.BeanPropertyItemSqlParameterSourceProvider"/>
        </property>
    </bean>
    <bean class="org.springframework.batch.item.database.JdbcBatchItemWriter">
        <property name="dataSource" ref="dataSource2"/>
        <property name="sql" value="insert into test_table (idcol,stuff) values (:idCol,:stuff)"/>
        <property name="itemSqlParameterSourceProvider">
            <bean class="org.springframework.batch.item.database.BeanPropertyItemSqlParameterSourceProvider"/>
        </property>
    </bean>     
</util:list>

<util:list id="itemList">
    <bean class="de.incompleteco.spring.domain.SimpleEntity">
        <constructor-arg value="stuff1"/>
    </bean>
    <bean class="de.incompleteco.spring.domain.SimpleEntity">
        <constructor-arg value="stuff2"/>
    </bean>     
    <bean class="de.incompleteco.spring.domain.SimpleEntity">
        <constructor-arg value="stuff3"/>
    </bean>     
</util:list>

<task:executor id="writerTaskExecutor" pool-size="3"/>

<bean id="dataSource1" class="bitronix.tm.resource.jdbc.PoolingDataSource" init-method="init" destroy-method="close">
    <property name="className" value="org.h2.jdbcx.JdbcDataSource" />
    <property name="uniqueName" value="#{T(System).currentTimeMillis()}" />
    <property name="allowLocalTransactions" value="true"/>
    <property name="maxPoolSize" value="2" />
    <property name="driverProperties">
        <props>
            <prop key="URL">jdbc:h2:mem:a;DB_CLOSE_DELAY=-1</prop>
        </props>
    </property>
</bean> 

<bean id="dataSource2" class="bitronix.tm.resource.jdbc.PoolingDataSource" init-method="init" destroy-method="close">
    <property name="className" value="org.h2.jdbcx.JdbcDataSource" />
    <property name="uniqueName" value="#{T(System).currentTimeMillis()}" />
    <property name="allowLocalTransactions" value="true"/>
    <property name="maxPoolSize" value="2" />
    <property name="driverProperties">
        <props>
            <prop key="URL">jdbc:h2:mem:b;DB_CLOSE_DELAY=-1</prop>
        </props>
    </property>
</bean>     

<jdbc:initialize-database  data-source="dataSource1">
    <jdbc:script location="classpath:/META-INF/sql/schema-h2.sql"/>
</jdbc:initialize-database>

<jdbc:initialize-database  data-source="dataSource2">
    <jdbc:script location="classpath:/META-INF/sql/schema-h2.sql"/>
</jdbc:initialize-database>
<!-- XA transaction -->

<bean id="btmConfig" factory-method="getConfiguration" class="bitronix.tm.TransactionManagerServices"/>

<bean id="BitronixTransactionManager" factory-method="getTransactionManager"
    class="bitronix.tm.TransactionManagerServices" depends-on="btmConfig" destroy-method="shutdown" />

<bean id="transactionManager" class="org.springframework.transaction.jta.JtaTransactionManager">
    <property name="transactionManager" ref="BitronixTransactionManager" />
    <property name="userTransaction" ref="BitronixTransactionManager" />
</bean> 
```

此示例使用以下内容；

*   Bitronix JTA 支持跨多个数据库的事务
*   一个很简单的实体模型变成一个简单的jdbc记录

（数据库里的东西很粗糙，只是一个例子）

# sql - 将 Excel 电子表格加入 SQL 数据库

> ID：15030032
> 
> 赞同：5
> 
> 时间：2013-02-22T17:35:44.130
> 
> 标签：sql, excel, sql-server-2005

我经常收到看起来像这样的请求：

```
"Hey, can you reconcile this Excel spreadsheet with our database and 
fill in the additional info for the ones you find? We also need to know 
which ones are missing."

ID     Name     Client     AdditionalInfo
------------------------------------------
234    John     Client1
147    Mike     Client2
546    Mary     Client3
...
(Several hundred or thousand more rows) 
```

有没有办法获取这样的 Excel 电子表格并将其加入 SQL Server Management Studio 中的 SQL 数据库？我通常会复制`ID`来制作一个庞大的`IN`列表，这显然远非理想。如果我没有得到每一行的 1:1 匹配，那么我仍然有排列数据的任务。

我正在使用 SQL Server 2005 和 Excel 2010。

我尝试将 Excel 电子表格添加为链接服务器，但查询它警告我 `'Ad Hoc Distributed Queries'`被阻止并且必须启用。我不确定这样做可能会产生什么负面影响，所以我没有沿着这条路线走得更远。

我的下一个想法是使用 Excel 公式为 Excel 中`SELECT [Col_A], [Col_B], [Col_C] UNION ALL`的每一行创建一个，然后将其复制到 SSMS 以创建一个我可以加入的临时表……但这似乎仍然是一个相当混乱且效率低下的 hack

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T17:40:24.460

您可以将 Excel 电子表格导入数据库中专门为此创建的表中。在 SSMS 中，右键单击您的数据库，转到 Tasks->Import Data 并选择 Excel 作为您的数据源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:00:49.280

Excel 可以直接连接到 Sql Server。具体来说，您想使用[MS Query](http://office.microsoft.com/en-us/excel-help/use-microsoft-query-to-retrieve-external-data-HA010099664.aspx)。这将允许您使用 SQL 直接针对数据库加入 Excel 工作表。

# windows-7 - 如何在 Python 中打开具有写入权限的 Windows 注册表

> ID：15030033
> 
> 赞同：12
> 
> 时间：2013-02-22T17:35:51.490
> 
> 标签：windows-7, python-2.7, registry, access-denied, winreg

我 在使用 Python 2.7.3 [_winreg](http://docs.python.org/2/library/_winreg.html "Python Documentation: Windows registry access")模块中的[_winreg.QueryValueEx函数访问 Windows 7 注册表时遇到了一些问题。](http://docs.python.org/2/library/_winreg.html#_winreg.QueryValueEx "Python _winreg.QueryValueEx() 函数文档")

我以**管理员**身份运行 python 进程，并且可以创建新的键和值，如下所示：

```
import _winreg as wreg
key = wreg.CreateKey(wreg.HKEY_LOCAL_MACHINE, "Software\\TestCompany\\TestProject")
# Create new subkey
wreg.SetValue(key, 'NewSubkey', wreg.REG_SZ, 'testsubkey')
print wreg.QueryValue(key, 'NewSubKey')
# prints 'testsubkey'
# Create new value
wreg.SetValueEx(key, 'ValueName', 0, wreg.REG_SZ, 'testvalue')
print wreg.QueryValueEx(key,'ValueName')
# prints (u'testvalue', 1)
key.Close() 
```

![Windows 注册表中的键](../Images/cde618900fb61020e11985eb5b5c7d5b.png)

但是，当我重新打开同一个键并尝试设置值时，它给了我一个`Access is denied`错误：

```
key = wreg.OpenKey(wreg.HKEY_LOCAL_MACHINE, "Software\\TestCompany\\TestProject",wreg.KEY_SET_VALUE)
wreg.SetValue(key, 'NewSubkey', wreg.REG_SZ, 'subkey_changed')
print wreg.QueryValue(key, 'NewSubkey')
# prints 'subkey_changed'
wreg.SetValueEx(key, 'ValueName', 0, wreg.REG_SZ, 'value_changed')

Traceback (most recent call last):
  File "<pyshell#43>", line 1, in <module>
    wreg.SetValueEx(key, 'ValueName', 0, wreg.REG_SZ, 'value_changed')
WindowsError: [Error 5] Access is denied

print wreg.QueryValueEx(key, 'ValueName')
# still prints: (u'testvalue', 1)
key.Close() 
```

有趣的是，以**管理员**身份运行，我无法使用[KEY_WRITE](http://docs.python.org/2/library/_winreg.html#_winreg.KEY_WRITE "Windows 注册表 KEY_WRITE 访问权限常量")或[KEY_ALL_ACCESS](http://docs.python.org/2/library/_winreg.html#_winreg.KEY_ALL_ACCESS "Windows 注册表 KEY_ALL_ACCESS 访问权限常量")访问权限打开：

```
>>> key = wreg.OpenKey(wreg.HKEY_LOCAL_MACHINE, "Software\\TestCompany\\TestProject",wreg.KEY_WRITE)

Traceback (most recent call last):
  File "<pyshell#47>", line 1, in <module>
    key = wreg.OpenKey(wreg.HKEY_LOCAL_MACHINE, "Software\\TestCompany\\TestProject",wreg.KEY_WRITE)
WindowsError: [Error 5] Access is denied
>>> key = wreg.OpenKey(wreg.HKEY_LOCAL_MACHINE, "Software\\TestCompany\\TestProject",wreg.KEY_ALL_ACCESS)

Traceback (most recent call last):
  File "<pyshell#48>", line 1, in <module>
    key = wreg.OpenKey(wreg.HKEY_LOCAL_MACHINE, "Software\\TestCompany\\TestProject",wreg.KEY_ALL_ACCESS)
WindowsError: [Error 5] Access is denied 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-27T08:49:12.317

我通过这样做解决了这个问题：

```
key = wreg.OpenKey(wreg.HKEY_LOCAL_MACHINE, "Software\\TestCompany\\TestProject",0, wreg.KEY_ALL_ACCESS) 
```

# ruby - 表示性别或性别的 Ruby 约定

> ID：15030036
> 
> 赞同：2
> 
> 时间：2013-02-22T17:35:59.660
> 
> 标签：ruby, oop, types, conventions

当将一个人的性别或性别用作对象中的一个字段时，ruby 约定是什么？有一个二元性别假设（我不同意这一点，但通常以这种方式收集数据）。

你会在不同的情况下使用不同的类型吗？当我们向用户显示这些信息时，我们希望以某种有意义的方式显示它（`Male`、`male`、`M`、whatever、not `0`or `1`），并且我们可能希望使用它来按性别对对象进行排序。我的想法是使用`:Male`and`:Female`之类的符号，但我想听听有更多Ruby经验的人的想法。

虽然我找到了一些建议（编写您自己的替代枚举代码并创建一个 Gender 类），但我没有找到任何可以比较或对比这种使用布尔值、符号、字符串、字符的方法或将其识别为通用约定的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:18:14.350

我认为，在现代编程中，特别是在像 Ruby 这样的语言中，使用像 ' 这样的幻数`0`被`1`认为是一种不好的做法，就像你说的那样。然后，自然的选择是为每个性别/性别使用字符串、符号或特定类。对于封闭类，您应该避免使用字符串。使用符号时，我认为使用完整的单词而不是缩写词和小写字母（如果超过一个单词，则使用下划线）是标准的。所以我认为`:male`并且`:female`会是一个不错的选择。或者，您可以拥有`Male`和`Female`类，每个类都有一个独特的对象，就像`FalseClass`and一样`TrueClass`。或者，您可以简单地定义两个`Object`实例`Male`和`Female`. 由于性别/性别之间没有自然顺序，您需要定义自己的`<=>`.

# python - python读取文件，为每一行保存一个新列广告保存同一个文件

> ID：15030038
> 
> 赞同：1
> 
> 时间：2013-02-22T17:36:11.530
> 
> 标签：python, performance, save, overwrite

我有一个包含 x,y,z 值的文件。我希望找到一种优雅的方式来打开并向每一行添加一个新值 id 并再次保存同一个文件。

```
def get_point_grid_id(x,y,x_min,y_max,x_dist,y_dist):
    col = int((x - x_min)/x_dist)
    row = int((y_max - y)/y_dist)
    return (row, col) 
```

前任

```
1 1 10
2 2 10
3 3 10 
```

ID将是

```
get_point_grid_id(1,1,0,10,1,1)
(9, 1)
get_point_grid_id(2,2,0,10,1,1)
(8, 2)
get_point_grid_id(3,3,0,10,1,1)
(7, 3) 
```

新文件将是

```
1 1 10 (9, 1)
2 2 10 (8, 2)
3 3 10 (7, 3) 
```

我正在阅读 Stackoverflow 中的几种方法，并测试了几种方法。老实说，我已尝试保存新文件但未能成功。

我曾尝试过以下解决方案

```
with open(file_temp, "r+") as f:
    for line in open(file_temp):
        x,y,z = line.split()
        id = get_point_grid_id(float(x),float(y),0,10,1,1)
        element = [x,y,z,id]
        newelement = " ".join([str(e) for e in element])+ "\n"
        f.write(newelement) 
```

但我收到此错误消息

```
Traceback (most recent call last):
  File "<editor selection>", line 3, in <module>
ValueError: too many values to unpack 
```

其中 newelement （真实数据）是

```
'481499.55 6244324.75 19.15 (377, 2909)\n' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:45:53.483

您可以通过模块模拟所需的行为，[`fileinput`](http://docs.python.org/2/library/fileinput.html#module-fileinput)但请记住，它将在后台创建原始 10GB+ 文件的备份副本：

```
#! /usr/bin/env python
import fileinput

def get_point_grid_id(x,y,x_min,y_max,x_dist,y_dist):
    col = int((x - x_min)/x_dist)
    row = int((y_max - y)/y_dist)
    return (row, col)

input_file = "test.dat"
#
# Add mode='rb' to the arguments of fileinput.input() if you are
# using a binary file on operating systems that differentiate 
# between binary and text files (e.g. Microsoft Windows). 
#
for line in fileinput.input(input_file, inplace=True):
    columns = line.split()
    if 3 == len(columns):
        x, y, z = columns
        id = get_point_grid_id(float(x),float(y),0,10,1,1)
        print "{0} {1} {2} {3}".format(x, y, z, id) 
```

`inplace`传递给的参数`fileinput.input`触发魔法。

# matlab - 为什么 2013 年和 2008 年的 UTC 时间戳之间存在差异

> ID：15030039
> 
> 赞同：0
> 
> 时间：2013-02-22T17:36:12.497
> 
> 标签：matlab, utc

我正在为两个数据集获取两个 UTC 时间戳的差异。

1.  2008 年数据集
2.  2013 年数据集

当我取第二个数据集的差异时，它给了我以毫秒为单位的差异，但是当我在第一个数据集中做同样的事情时，它给了我以秒为单位的差异。这是什么原因？

样本数据：

```
 1) [1.202497980000000e+09 - 1.202499025000000e+09]
 2) [1.360250174775000e+12 - 1.360250703765000e+12] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:25:39.530

Matlab 不会根据是 2008 年还是 2013 年的数据来区别对待数据。因此，明显的嫌疑人是来源。我也很确定 UTC 标准没有从秒变为毫秒。

这留下了两种情况：

1.  因此，当这些数据在 2008 年生成和存储时，它可能以不同的方式完成，而不是现在。这意味着其中一个不是官方格式。
2.  或者，您可能只是在比较两个不同的事物，也许前两个时间戳之间确实存在一秒的差异，而后两个时间戳之间存在一毫秒的差异。

# hashtable - SAS - 哈希表和 has_next

> ID：15030042
> 
> 赞同：1
> 
> 时间：2013-02-22T17:36:23.143
> 
> 标签：hashtable, sas, code-duplication

我正在为以下问题寻找一个优雅的解决方案，这将有助于避免代码重复。你可以看到这一行：

```
put auction_id= potential_buyer= ;* THIS GETS REPEATED; 
```

在此代码中重复：

```
data results;

  attrib potential_buyer length=$1;

  set auction;

  if _n_ eq 1 then do;
    declare hash ht1(dataset:'buyers', multidata: 'y');
    ht1.definekey('auction_id');
    ht1.definedata('potential_buyer');
    ht1.definedone();
    call missing (potential_buyer);
  end;

  **
  ** LOOP THROUGH EACH POTENTIAL BUYER AND PROCESS THEM
  *;
  if ht1.find() eq 0 then do;

    put auction_id= potential_buyer= ;* THIS GETS REPEATED;

    ht1.has_next(result: ht1_has_more);
    do while(ht1_has_more);
      rc = ht1.find_next();

      put auction_id= potential_buyer= ;* THIS GETS REPEATED;

      ht1.has_next(result: ht1_has_more);
    end;
  end;
run; 
```

我已将上面的示例简化为一行，因为真正的代码块相当长且复杂。我想避免使用`%macro`片段或`%include`如果可能的话，因为我想将逻辑保留在数据步骤“内”。

以下是一些示例数据：

```
 data auction;
      input auction_id;
    datalines;
    111
    222
    333
    ;
    run;

    data buyers;
      input auction_id potential_buyer $;
    datalines;
    111 a
    111 c
    222 a
    222 b
    222 c
    333 d
    ;
    run; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:58:03.337

我想到了。最后结果很简单，只是在我的大脑中遇到了一点麻烦：

```
data results;

  attrib potential_buyer length=$1;

  set auction;

  if _n_ eq 1 then do;
    declare hash ht1(dataset:'buyers', multidata: 'y');
    ht1.definekey('auction_id');
    ht1.definedata('potential_buyer');
    ht1.definedone();
    call missing (potential_buyer);
  end;

  **
  ** LOOP THROUGH EACH POTENTIAL BUYER AND PROCESS THEM
  *;
  if ht1.find() eq 0 then do;

    keep_processing = 1;
    do while(keep_processing);

      put auction_id= potential_buyer= ;* THIS GETS DOESNT GET REPEATED ANYMORE =);

      ht1.has_next(result: keep_processing);
      rc = ht1.find_next();
    end;
  end;

run; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:54:33.460

您可以通过这种方式解决它....但是 Rob 的答案更好。

```
data results;

 %Macro NoDuplicate;
  Put auction_id= potential_buyer= ; * No Longer Duplicated;
 %Mend noduplicate;

 attrib potential_buyer length=$1;

 set auction;

 if _n_ eq 1 then do;
  declare hash ht1(dataset:'buyers', multidata: 'y');
  ht1.definekey('auction_id');
  ht1.definedata('potential_buyer');
  ht1.definedone();
  call missing (potential_buyer);
 end;

 **
 ** LOOP THROUGH EACH POTENTIAL BUYER AND PROCESS THEM
 *;
 if ht1.find() eq 0 then do;

  %NoDuplicate

  ht1.has_next(result: ht1_has_more);
  do while(ht1_has_more);
   rc = ht1.find_next();
   %NoDuplicate
   ht1.has_next(result: ht1_has_more);
  end;
 end;

run; 
```

# python - 如何将共现矩阵转换为稀疏矩阵

> ID：15030047
> 
> 赞同：4
> 
> 时间：2013-02-22T17:36:49.003
> 
> 标签：python, scipy, sparse-matrix

我开始处理稀疏矩阵，所以我对这个话题并不是很精通。我的问题是，我有一个来自单词列表的简单共现矩阵，只是一个按单词计算单词在同一上下文中出现的次数的二维共现矩阵。由于语料库不是很大，因此矩阵非常稀疏。我想将它转换为稀疏矩阵以便能够更好地处理它，最终在之后进行一些矩阵乘法。这是我到目前为止所做的（只有第一部分，剩下的只是输出格式和清理数据）：

```
def matrix(from_corpus):    
d = defaultdict(lambda : defaultdict(int))
        heads = set() 
        trans = set()
        for text in corpus:
            d[text[0]][text[1]] += 1
            heads.add(text[0])
            trans.add(text[1])

        return d,heads,trans 
```

我的想法是创建一个新功能：

```
def matrix_to_sparse(d):
    A = sparse.lil_matrix(d) 
```

这有道理吗？然而，这不起作用，不知何故，我不知道如何获得稀疏矩阵。我应该更好地使用 numpy 数组吗？什么是最好的方法来做到这一点。我想比较处理矩阵的许多方法。

如果有人能给我指明方向，那就太好了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T18:00:39.700

以下是您如何从一组 SciPy 的 COO 格式的文档构建文档术语矩阵`A`，这是易用性和效率之间的良好折衷 (*)：

```
vocabulary = {}  # map terms to column indices
data = []        # values (maybe weights)
row = []         # row (document) indices
col = []         # column (term) indices

for i, doc in enumerate(documents):
    for term in doc:
        # get column index, adding the term to the vocabulary if needed
        j = vocabulary.setdefault(term, len(vocabulary))
        data.append(1)  # uniform weights
        row.append(i)
        col.append(j)

A = scipy.sparse.coo_matrix((data, (row, col))) 
```

现在，要获得一个共现矩阵：

```
A.T * A 
```

（忽略对角线，它与它们自身同时出现术语，即频率平方）。

**或者**，使用一些为你做这种事情的包，比如[Gensim](http://radimrehurek.com/gensim/)或[scikit-learn](http://scikit-learn.org)。（我是这两个项目的贡献者，所以这可能不是公正的建议。）

# javascript - 如何使用 HTML 或 JavaScript 将表单连接到 ADO 数据库？

> ID：15030048
> 
> 赞同：-2
> 
> 时间：2013-02-22T17:36:50.813
> 
> 标签：javascript, html, database, vb6

本周我开始使用 HTML 和数据库。我不确定这是不是最好的方法，但目前考虑到我的知识，这似乎是最好的选择。

我有一个表格，其中一个`textarea`和一个`textfield`用于日期（带有 format `dd-mm-yyyy`），我有两个按钮来更新数据库中的查询。一个按钮使数字在`textarea`给定日期有效，另一个按钮使其在该日期无效。

我知道数据库是基于 ADODB 的，所以我的问题是，我是否必须像在 VB6 中一样打开连接才能获取查询？还是在 HTML/Javascript 中有所不同？如何从 HTML 更新查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:00:09.577

您可以执行此处列出的操作：[如何在浏览器中从 JavaScript 连接到 SQL Server 数据库？](https://stackoverflow.com/questions/857670/how-to-connect-to-sql-server-database-from-javascript). 但是，您的数据库连接信息将在客户端计算机上可见，这意味着任何人都可以使用该连接字符串连接到您的数据库。你已经被警告过了。

# r - 如何知道 R 图中每个点对应的类别是什么？

> ID：15030053
> 
> 赞同：1
> 
> 时间：2013-02-22T17:37:09.397
> 
> 标签：r

当我这样做时，我只是想知道什么类别与每个点匹配：

```
x<-rnorm(mean=0,sd=1,500)
y<-sample(1:500,500,replace=T)
group<-as.factor(sample(c('A','B','C'),500,replace=T,prob=c(0.2,0.3,0.5)))
plot(x,y,col=group) 
```

我知道如何制作图例并使用任意向量 c('A','B',C') 放置文本，但是有没有更“自动”的方式来做到这一点？这是一个简单的例子，但我需要用残差或生存函数图来做

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:53:55.203

传统的图形系统提供了在绘图`legend`中添加图例或键的功能。但需要注意的是，确保图例与剧情对应完全是用户的责任。没有自动检查图例中的数据符号是否与图中的数据符号匹配。`lattice`使用or更简单`ggplot2`。例如：

```
 library(lattice)
 xyplot(y~x,groups=group,auto.key=T) 
```

![在此处输入图像描述](../Images/0c184572c807896edf661b5e1ba17d23.png)

如果你想绝对使用基本图形，你可以这样做：

```
x<-rnorm(mean=0,sd=1,500)
y<-sample(1:500,500,replace=T)
group<-as.factor(sample(c('A','B','C'),500,replace=T,prob=c(0.2,0.3,0.5)))
plot(x,y,col=group,pch=as.numeric(group))

legend(2, 500, c('A','B','C'),
       cex=1.5, pch=1:3,col=1:3) 
```

![在此处输入图像描述](../Images/b698bfed4be8660be6f28893689231ac.png)

# cocos2d-iphone - 在创建 cpShape 时，它 是否还会为形状创建一个主体？

> ID：15030056
> 
> 赞同：0
> 
> 时间：2013-02-22T17:37:25.347
> 
> 标签：cocos2d-iphone, chipmunk

我在我的游戏中使用 cocos2d 和花栗鼠，我想知道是否像这样创建一个 cpShape：

```
cpShape *helmet_1 = [game.spaceManager addCircleAt:cpv(245, 102) mass:STATIC_MASS radius:20]; 
```

是否还有为形状创建的身体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:36:26.527

在这种情况下是的，因为您使用的是 SpaceManager： [http ://code.google.com/p/chipmunk-spacemanager/source/browse/trunk/src/SpaceManager.mm#731](http://code.google.com/p/chipmunk-spacemanager/source/browse/trunk/src/SpaceManager.mm#731)

常规 Chipmunk 将它们分开，以增加一点复杂性为代价为您提供更大的灵活性。

# bash - 当目录名称中有空格时使用查找结果

> ID：15030057
> 
> 赞同：5
> 
> 时间：2013-02-22T17:37:30.490
> 
> 标签：bash, shell

我正在尝试通过制作一个简单的 bash`for`循环来更改所有子目录的权限：

```
for dir in `find . -type d`; do chmod 755 "$dir"; done 
```

但是，它抱怨不存在的目录。通过简单地打印循环中的目录名称（替换`chmod 755 "$dir"`为`echo "$dir"`），我发现当目录名称中有空格时会出现问题。发生的情况是`for`循环将结果拆分为`find`每个换行符**和**空格。

我想以某种方式使其**仅**根据换行符拆分结果并忽略空格。双引号应确保字符串`chmod`作为一个参数到达。如何更改拆分？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T17:40:32.610

这个问题的通常解决方案是：

```
find ... -print0 | xargs -0 ... 
```

该`-print0`参数导致输出文件名以 nul 结尾，并且 xargs 的`-0`/`-null`参数告诉它读取这种格式。

所以在你的情况下......

```
$ find . -type d -a -print0 | xargs -0 chmod 755 
```

您实际上根本不需要 shell 循环。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T20:13:27.493

以下是您的工具包的更多选项。如果您只有一个命令可以在文件/目录组上执行，`find`可以直接执行：

```
find . -type d -exec chmod 755 {} + 
```

如果该命令一次只能处理一个文件/目录，请使用`\;`而不是`+`为每个项目运行一次：

```
find . -type d -exec chmod 755 {} \; 
```

如果你需要做一些复杂的事情（即几个命令），你可以制作一个安全版本的循环：

```
while IFS= read -r -u3 -d $'\0' dir; do
    sudo chown gkudelis "$dir"
    chmod 755 "$dir"
    touch "$dir/.perms_reset"
done 3< <(find /tmp -type f -print0) 
```

请注意，这使用来自进程替换 ( `<(...)`) 而不是管道的重定向，以避免在子 shell 中运行循环；这是一个仅限 bash 的功能，因此您必须使用 启动脚本`#!/bin/bash`，而不是`#!/bin/sh`. 此外，它重定向到 fd 3 而不是 stdin，因此如果循环内的任何内容尝试从 stdin 读取，它不会混淆。此外，请务必在对循环变量（`"$dir"`在本例中）的所有引用周围使用双引号来保护其中的空格。有关更多详细信息，请参阅[BashFAQ #020](http://mywiki.wooledge.org/BashFAQ/020)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T17:39:32.610

尝试这样做（使用*builtins*，需要`bash --version`> = 4）：

```
shopt -s globstar
for dir in **/*/; do
    chmod 0755 "${dir%/}"
done 
```

# graphite - Graphite 只会显示过去 24 小时的数据

> ID：15030063
> 
> 赞同：11
> 
> 时间：2013-02-22T17:37:46.930
> 
> 标签：graphite

这是过去 24 小时的统计数据显示（在 Graphite Composer 中）：

![过去 24 小时](../Images/9d0161acb806984db0f0d989e1bd2c2d.png)

这是“过去 14 天”的统计数据显示：

![在此处输入图像描述](../Images/fba019180ebc070dde6b17eeb698fdc7.png)

那里没有太大区别。我无法说服 Graphite 显示过去 24 小时后任何时期的任何数据。

以下是来自`storage-schemas.conf`（我正在使用 StatsD）的相关条目：

```
[stats]
pattern = ^stats.*
retentions = 10:2160,60:10080,600:262974

[stats_counts]
pattern = ^stats_counts.*
retentions = 10:2160,60:10080,600:262974 
```

我的`storage-aggregation.conf`：

```
[min]
pattern = \.min$
xFilesFactor = 0
aggregationMethod = min

[max]
pattern = \.max$
xFilesFactor = 0
aggregationMethod = max

[sum]
pattern = \.count$
xFilesFactor = 0
aggregationMethod = sum

[default_average]
pattern = .*
xFilesFactor = 0
aggregationMethod = average 
```

到目前为止，我已经捕获了五天左右的数据。我错过了什么？

**编辑添加：**

我想我应该提到我从默认开始`storage-schemas.conf`，直到昨天才重建我的耳语数据库文件以匹配上述配置。我认为这不应该是相关的，但它确实存在。

**更新：**

我正在使用 2012 年 5 月发布的 PyPI 的 0.9.10 石墨网络和耳语。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-22T17:04:56.010

好吧，这就是我没有粘贴整个配置的结果。它*实际上是*这样的：

```
[carbon]
pattern = ^carbon\.
retentions = 60:90d

[default_1min_for_1day]
pattern = .*
retentions = 60s:1d

[stats]
pattern = ^stats.*
retentions = 10:2160,60:10080,600:262974

[stats_counts]
pattern = ^stats_counts.*
retentions = 10:2160,60:10080,600:262974 
```

当然，该`[default_1min_for_1day]`部分首先匹配，在其他两个之前，所以我只获取过去 24 小时的数据。将全部内容移到文件末尾似乎已经解决了这个问题。

# python - Python 提取一些 zip 文件时出错

> ID：15030068
> 
> 赞同：0
> 
> 时间：2013-02-22T17:38:04.447
> 
> 标签：python, zip, urllib2, zipfile

我编写了一个小应用程序，当通过链接提供时下载一个 zip 文件（具有不同的扩展名）并将文件解压缩到重命名的文件夹中。出于某种原因，它适用于我的一些 zip 文件，但不适用于所有文件。

我得到一个：

```
Traceback (most recent call last):
  File "download_unzip.py", line 48, in <module>
    main()
  File "download_unzip.py", line 42, in main
    shutil.move(unzip_file(temp_kmz),'temp_extracted/')
  File "download_unzip.py", line 26, in unzip_file
    fd = open(name, 'w')
IOError: [Errno 2] No such file or directory: 'models/model.dae' 
```

我的代码是：

```
import sys , urllib , zipfile , os.path , argparse , shutil

parser = argparse.ArgumentParser(description="Download and Unzip")
parser.add_argument('url', help='The action to take (e.g. install, remove, etc.)')
args = parser.parse_args()

print args.url

url = args.url
temp_kmz="temp_kmz"

def unzip_file(path):
    zfile = zipfile.ZipFile(path)
    extracted_filename = zfile.infolist()[0].filename[:-1]

    for name in zfile.namelist():
        (dirname, filename) = os.path.split(name)
        #print "Decompressing " + filename + " on " + dirname
        if filename == '':
            # directory
            if not os.path.exists(dirname):
                os.mkdir(dirname)
        else:
            # file
            fd = open(name, 'w')
            fd.write(zfile.read(name))
            fd.close()
    zfile.close()

    return extracted_filename

def download_file():
    urllib.urlretrieve (url, temp_kmz)
    return True

def main():
    if (download_file()):
        print "Now deleting temp..."
        shutil.rmtree('temp_extracted/')
        print "unzipping.. and renaming folder"
        shutil.move(unzip_file(temp_kmz),'temp_extracted/')
        print "Finished!!"

    else:
        print "Error downloading file"

main() 
```

我的工作下载文件：

> 蟒蛇下载_unzip.py“ [http://dl.dropbox.com/u/2971439/dae.kmz](http://dl.dropbox.com/u/2971439/dae.kmz) ”

一个不工作的：

> 蟒蛇下载_unzip.py“ [http://dl.dropbox.com/u/2971439/rally_car_youbeq.kmz](http://dl.dropbox.com/u/2971439/rally_car_youbeq.kmz) ”

**请注意，这两个文件都可以使用我的操作系统 (Ubuntu) 正确提取**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:25:26.950

通过一些繁重的代码更改解决了我的问题：

```
import urllib2 ,argparse, shutil, urlparse , os , zipfile, os.path
from zipfile import ZipFile as zip

parser = argparse.ArgumentParser(description="Download and Unzip")
parser.add_argument('url', help='The action to take (e.g. install, remove, etc.)')
args = parser.parse_args()

print args.url

url = args.url
temp_kmz="temp_kmz"

def extractAll(zipName):
    z = zip(zipName)
    for f in z.namelist():
        if f.endswith('/'):
            os.makedirs(f)
        else:
            z.extract(f)

def download(url, fileName=None):
    def getFileName(url,openUrl):
        if 'Content-Disposition' in openUrl.info():
            # If the response has Content-Disposition, try to get filename from it
            cd = dict(map(
                lambda x: x.strip().split('=') if '=' in x else (x.strip(),''),
                openUrl.info()['Content-Disposition'].split(';')))
            if 'filename' in cd:
                filename = cd['filename'].strip("\"'")
                if filename: return filename
        # if no filename was found above, parse it out of the final URL.
        return os.path.basename(urlparse.urlsplit(openUrl.url)[2])

    r = urllib2.urlopen(urllib2.Request(url))
    try:
        fileName = fileName or getFileName(url,r)
        with open(fileName, 'wb') as f:
            shutil.copyfileobj(r,f)
    finally:
        r.close()

def main():
    download(url,temp_kmz)
    extractAll(temp_kmz)
main() 
```

# c# - 如何在 C# 中对数组元素使用 get 和 set？

> ID：15030075
> 
> 赞同：0
> 
> 时间：2013-02-22T17:38:39.587
> 
> 标签：c#, arrays, properties, get, set

我有以下课程：

```
public class test
{
    private int i;
    public test(int in)
    {
        i = in;
    }
    public int testint;
    {
        get { return i; }
        set { i = testint; }
    }
} 
```

以及以下代码：

```
test[] data = new test[3];
for(int j = 0; j < 3; j++)
{
    data[i] = new test(0);
    data[i].testint = int.Parse(Console.ReadLine());
}
Console.WriteLine(test[0].testint);
Console.WriteLine(test[1].testint);
Console.WriteLine(test[2].testint); 
```

当我运行这个程序并输入 1、2、3 作为输入时，输出是 0、0、0。我不明白为什么 get 或 set 似乎不起作用。如果我用 0 以外的值初始化数组元素，则输出将是那个值。data[i].testint = int.Parse(Console.ReadLine()); 似乎没有工作。我将如何去做这样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:40:36.480

I see two errors in this code:

```
public int testint;
{
    get { return i; }
    set { i = testint; }
} 
```

There should be no semicolon after `testint` at the top. Also, `set` needs to assign using `value`, like this:

```
public int testint
{
    get { return i; }
    set { i = value; }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T17:42:33.747

将 set 方法更改为：

```
public int testint
{
   get { return i; }
   set { i = value; }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-22T17:40:05.557

你的二传手不正确。它应该是：

```
 set { i = value; } 
```

你有过：

```
 set { i = testint; } 
```

这只会触发 getter，它来自`i`，所以最后你的 setter 正在做`i = i`。

在 setter 中，`value`关键字包含属性的新候选值。`value`的类型等于属性的。我说候选值是因为您可以验证它并选择不应用它。

在您的情况下，您没有应用该值。

**更新**

此外，在定义 getter 和 setter 时，不应使用分号。那么，代码将如下所示：

```
public int testint
{
    get { return i; }
    set { i = value; }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-22T17:40:40.017

Change your setter to say:

```
set { i = value; } 
```

value corresponds to the value you send to set the variable.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-22T17:42:42.373

这是简单的方法。

```
public int TestInt {get; set;} 
```

# javascript - Three.js 围绕对象旋转相机（可能会移动）

> ID：15030078
> 
> 赞同：13
> 
> 时间：2013-02-22T17:38:43.207
> 
> 标签：javascript, three.js, webgl

我有一个相机，它在场景中以几种不同的方式移动。相机应围绕目标位置旋转。就我而言，这是用户定位的网格上的一个点。因为相机通常不需要相对于这一点移动，所以我无法在这里使用枢轴的想法：[https](https://github.com/mrdoob/three.js/issues/1830) ://github.com/mrdoob/three.js/issues/1830 。我当前的解决方案使用以下代码：

```
var rotationY = new THREE.Matrix4();
var rotationX = new THREE.Matrix4();
var translation = new THREE.Matrix4();
var translationInverse = new THREE.Matrix4();
var matrix = new THREE.Matrix4();
function rotateCameraAroundObject(dx, dy, target) {  
    // collect up and right vectors from camera perspective
    camComponents.up = rotateVectorForObject(new THREE.Vector3(0,1,0), camera.matrixWorld);
    camComponents.right = rotateVectorForObject(new THREE.Vector3(1,0,0), camera.matrixWorld);

    matrix.identity();

    rotationX.makeRotationAxis(camComponents.right, -dx);
    rotationY.makeRotationAxis(camComponents.up, -dy);
    translation.makeTranslation(
        target.position.x - camera.position.x,
        target.position.y - camera.position.y,
        target.position.z - camera.position.z);
    translationInverse.getInverse(translation);

    matrix.multiply(translation).multiply(rotationY).multiply(rotationX).multiply(translationInverse);
    camera.applyMatrix(matrix);
    camera.lookAt(target.position); 
} 
```

问题是我们不想使用lookAt，因为重新定向。我们希望能够删除该行。

如果我们使用上面的代码而不使用lookAt，我们会围绕该点旋转，但我们不会查看该点。我的理解是，我的方法应该像相机本身一样旋转相机的视图，但相机只旋转了一小部分。谁能帮我理解什么是错的？

编辑：清理了原始帖子和代码，希望能澄清我的问题。

我的想法是我可以翻译到原点（我的目标位置），旋转我想要的量，然后翻译回开始位置。由于旋转，我希望处于一个新的位置来查看原点。

事实上，我现在正在测试它而没有使用平移矩阵，所以矩阵乘法线是：

```
matrix.multiply(rotationY).multiply(rotationX); 
```

它的行为似乎相同。感谢您迄今为止的所有帮助！

还有一件事！问题的一部分是当相机在北极或南极附近表现不佳时。我正在寻找一种“自由漫游”的感觉。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-22T18:32:34.907

将以下内容放入渲染循环中：

```
camera.position.x = target.position.x + radius * Math.cos( constant * elapsedTime );         
camera.position.z = target.position.z + radius * Math.sin( constant * elapsedTime );
camera.lookAt( target.position );

renderer.render( scene, camera ); 
```

或者，您可以使用`THREE.OrbitControls`或`THREE.TrackballControls`。请参阅three.js 示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:30:16.110

您所指的万向节锁（重新定向）是因为在相机观察的默认实现中使用了欧拉角。如果你设置

```
camera.useQuaternion = true; 
```

在您调用查看之前，将不会使用欧拉角。这会解决你的问题吗？

# nosql - Cassandra - 使用返回 0 结果的键获取 CF，但使用 pycassa 检索整个表时存在键

> ID：15030079
> 
> 赞同：1
> 
> 时间：2013-02-22T17:38:43.860
> 
> 标签：nosql, cassandra, pycassa

我们在 Cassandra 1.2.0 中有一张桌子。那有一个 VarInt 键。当我们搜索键时，我们可以看到它们存在。

表说明：

```
CREATE TABLE u (
key varint PRIMARY KEY,
) WITH COMPACT STORAGE AND
bloom_filter_fp_chance=0.010000 AND
caching='KEYS_ONLY' AND
comment='' AND
dclocal_read_repair_chance=0.000000 AND
gc_grace_seconds=864000 AND
read_repair_chance=1.000000 AND
replicate_on_write='true' AND
compaction={'class': 'SizeTieredCompactionStrategy'} AND
compression={'sstable_compression': 'SnappyCompressor'};

Select key from u limit 10; 
```

*钥匙*

12040911

60619595

3220132

4602232

3997404

6312372

1128185

1507755

1778092

4701841

当我尝试获取键 60619595 的行时，它工作正常。

cqlsh:users> select key from u where key = 60619595;

*钥匙*

60619595

```
cqlsh:users> select key from u where key = 3997404; 
```

当我使用 pycassa 获取整个表时，我可以访问该行。

```
import pycassa
from struct import *
from pycassa.types import *
from urlparse import urlparse
import operator

userspool = pycassa.ConnectionPool('users');
userscf = pycassa.ColumnFamily(userspool, 'u');
users = {}
u = list(userscf.get_range())
for r in u:
users[r[0]] = r[1]
print users[3997404] 
```

返回正确的结果。

我究竟做错了什么？我看不出错误是什么。

任何帮助，将不胜感激，

问候

迈克尔。

PS：当我尝试时，我应该在 pycassa 中这么说：

```
userscf.get(3997404) 
```

文件“test.py”，第 10 行，在 userscf.get(3997404) 文件“/usr/local/lib/python2.7/dist-packages/pycassa/columnfamily.py”，第 655 行，在 get raise NotFoundException() pycassa.cassandra.ttypes.NotFoundException: NotFoundException(_message=None)

它似乎在小于平均值的整数中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T17:59:49.013

您正在混合 CQL 和基于 Thrift 的查询，它们并不总是混合得很好。CQL 抽象底层存储行，而 Thrift 直接处理它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T09:30:52.963

这是我们在项目中遇到的问题。我应该补充说

从 u 中选择键，其中键 = 3997404；cqlsh:用户>

返回 0 结果，即使当在 cqlsh 中从 u 中选择 * 或在 pycassa 中获取整个表时，我们也会看到键为 3997404 的行。

对困惑感到抱歉。

问候

D.

# php - IIS web.config 问题上的 Codeigniter

> ID：15030080
> 
> 赞同：0
> 
> 时间：2013-02-22T17:38:44.167
> 
> 标签：php, codeigniter, iis

我正在一个托管服务器上安装一个用 PHP/CodeIgniter 2 制作的网站，不幸的是它正在运行 IIS，但我没有这方面的经验。

除了主页没有任何工作，所有其他页面都返回 404 错误。

将 index.php 添加到 url 会返回 500 - 内部服务器错误（我在 config.php 文件中将索引页面配置设置为 ''）

我还尝试创建一个 web.config 文件，认为问题可能来自重定向，但是添加一个 web.config 文件甚至会使主页停止工作，即使添加的 web.config 文件完全为空。

帮助真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-10T03:30:23.580

Check if the hosting server has Re-write module installed in it, that could be your problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T02:28:57.410

确保您已安装 URL Rewrite - [http://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)

安装模块后，您应该能够在 IIS 管理中看到此图标（URL 重写）。 ![IIS - URL 重写](../Images/d7e3db51e07682042aa992ad0902bd0d.png)

# html - inline-block 在 Firefox/Safari 中比 Chrome 更宽，溢出线条

> ID：15030082
> 
> 赞同：0
> 
> 时间：2013-02-22T17:38:51.110
> 
> 标签：html, css, browser, cross-browser

我做了[这个网站](http://www.pieboyclothing.co.uk/)。在 Chrome (v24.0) 上，一切都按预期显示。当我在 Safari 或 Firefox 中查看它时，布局中断：右上角的“查看购物车”和“结帐”链接溢出到额外的一行。很难描述，但是比较它们在 Chrome（正确）与 Firefox 和 Safari（错误）中的外观，我的意思应该很明显。

我怎样才能解决这个问题？我尝试过的所有成功解决了 Firefox 和 Safari 中的问题的方法都只是在 Chrome 中破坏了它。

我当前的 CSS（Sass）：

```
.account-links {
    font-size: 0;
}

.account-links a {

    box-sizing: border-box;
    width: 90px;

    margin: 0px;
    font-size:9pt;

    -moz-box-shadow:inset 0px 0px 0px 0px #ffffff;
    -webkit-box-shadow:inset 0px 0px 0px 0px #ffffff;
    box-shadow:inset 0px 0px 0px 0px #ffffff;
    background:-webkit-gradient( linear,
                                 left top, left bottom,
                                 color-stop(0.05, #f9f9f9),
                                 color-stop(1, #e9e9e9) );
    background:-moz-linear-gradient( center top,
                                     #f9f9f9 5%, #e9e9e9 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#f9f9f9', endColorstr='#e9e9e9');
    background-color:#f9f9f9;
    border-top:1px solid #dcdcdc;
    border-bottom:1px solid #dcdcdc;
    &:first-child {
      border-right:1px solid #dcdcdc;
    }
    display:inline-block;
    color:#666666;
    font-family:arial;
    font-weight:bold;
    padding: 5px 0px;
    text-decoration:none;
    text-shadow:0px 1px 0px #ffffff;
    &:hover {
      background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #e9e9e9), color-stop(1, #f9f9f9) );
      background:-moz-linear-gradient( center top, #e9e9e9 5%, #f9f9f9 100% );
      filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#e9e9e9', endColorstr='#f9f9f9');
      background-color:#e9e9e9;
    }
    &:active {
   position:relative;
      top:1px;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:02:32.053

我在 Chrome 上遇到过几次这样的问题。大多数时候我都能弄明白，但有几次我不得不求助于这个：[css_browser_selector.js](http://rafael.adm.br/css_browser_selector/)

基本上它允许您像这样编写 css：

```
.gecko .account-links a{} 
```

然后，它将将该 css 应用于使用 gecko 引擎（即 Firefox）的浏览器。我在几个生产站点上使用它（主要用于 IE，但也用于 Firefox 一次或两次）并且我没有遇到任何问题。

这意味着您可以将您的解决方案用于 Firefox 和 Safari，而不会破坏 Chrome 中的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:19:51.557

那是因为您使用的是不带前缀`box-sizing`的 for `#shop-meta .account-links a`。添加`-moz-box-sizing: border-box` ~~and`-webkit-box-sizing: border-box`~~它应该按预期工作。

编辑：实际上我发现 Safari 中存在一些错误（对于 Windows 使用 v5.1.7），它会阻止 box-sizing 正常工作。该浏览器的解决方案是设置`float: left`为`.account-links a`. 你不需要`-webkit-box-sizing`。

# java - 应用排序器时删除 JTable 行会导致 IndexOutOfBoundsException

> ID：15030084
> 
> 赞同：1
> 
> 时间：2013-02-22T17:38:57.367
> 
> 标签：java, swing, filter, jtable, tablerowsorter

我有一个带有自定义对象行的 JTable，其中一列是倒计时的时间组件。当倒计时到达 0 时，该行将自动删除。

我还通过文本框提供了一个过滤选项，用户可以输入该选项以按数据过滤行。

如果没有将排序器应用于 JTable，除了过滤之外，一切都可以正常工作（当时间计数为 0 时行会自行删除）。应用排序器会给我一个“java.lang.IndexOutOfBoundsException：无效索引”

我的自定义表格模型如下所示

```
public Object getValueAt(int rowIndex, int columnIndex) {

    CustomObject myObject = customObjects.get(rowIndex);
    if (columnIndex == MyFirstColumn) {
        return myObject.getData1();
    } else if (columnIndex == MySecondColumn) {
        return myObject.getData2();
    } else if (columnIndex == TimeRemainingColumn) {
        if (myObject.getDate() - System.currentTimeMillis() <= 0) {

            //If I comment this out I can filter but not remove rows
            removeRow(myObject); 

            return 0;
        }
        else{
            fireTableDataChanged();
            return myObject.getDate() - System.currentTimeMillis();
        }  
    }

    return DateFormat.getDateInstance().format(new Date(myObject.getDate()));
}

public void removeRow(CustomObject object) {
    int row = customObjects.indexOf(object);
    customObjects.remove(object);
    fireTableRowsDeleted(row, row);
} 
```

这会引发此异常

```
Exception in thread "AWT-EventQueue-0" java.lang.IndexOutOfBoundsException: Invalid index
at javax.swing.DefaultRowSorter.convertRowIndexToModel(DefaultRowSorter.java:514)
at javax.swing.JTable.convertRowIndexToModel(JTable.java:2645)
at javax.swing.JTable.getValueAt(JTable.java:2720)
at javax.swing.JTable.prepareRenderer(JTable.java:5718)
at javax.swing.plaf.synth.SynthTableUI.paintCell(SynthTableUI.java:684)
at javax.swing.plaf.synth.SynthTableUI.paintCells(SynthTableUI.java:581)
at javax.swing.plaf.synth.SynthTableUI.paint(SynthTableUI.java:365)
at javax.swing.plaf.synth.SynthTableUI.update(SynthTableUI.java:276)
at javax.swing.JComponent.paintComponent(JComponent.java:778)
at javax.swing.JComponent.paint(JComponent.java:1054)
at javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
.... 
```

转到 DefaultRowSorter.java 它遇到了这个异常

```
public int convertRowIndexToModel(int index) {
    if (viewToModel == null) {
        if (index < 0 || index >= getModelWrapper().getRowCount()) {
            throw new IndexOutOfBoundsException("Invalid index");
        }
        return index;
    }
    return viewToModel[index].modelIndex;
} 
```

上另一个级别，为什么在没有分拣机的情况下删除工作（sorter == null）

```
public int convertRowIndexToModel(int viewRowIndex) {
    RowSorter sorter = getRowSorter();
    if (sorter != null) {
        return sorter.convertRowIndexToModel(viewRowIndex);
    }
    return viewRowIndex;
} 
```

调试一点 firstRow 和 endRow 在这一点上都是 0 （他们应该是？）但它似乎试图排序/过滤一个空列表

这是我的表格代码

```
 myModel = new CustomObjectDataModel();

    myTable.setModel(myModel);
    mySorter = new TableRowSorter(myModel);

    myTable.setRowSorter(mySorter);
    myTable.setAutoCreateRowSorter(true); 
```

我四处搜索，发现死链接表明这是 Java 中的一个错误，但无法确认。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T00:54:39.900

我按照建议使用 Swing Timers 实现了这一点并解决了这个问题，但这里的问题是在 EDT 之外修改表模型。

# php - 如何使用 My_Model (Codeigniter) 执行 MySQL 函数？

> ID：15030087
> 
> 赞同：1
> 
> 时间：2013-02-22T17:39:07.553
> 
> 标签：php, mysql, codeigniter

我将[我的模型](https://github.com/jamierumbelow/codeigniter-base-model)与[Codeigniter](http://ellislab.com/codeigniter)一起使用，我想在模型中的一个字段上执行 MySQL 函数。

我的 SQL 函数是：

```
select UNIX_TIMESTAMP(start) from events; 
```

本质上，我希望得到与以下相同的结果：

```
 $this->load->model('event_model');
   $this->event_model->get_all(); 
```

在我的控制器中，但开始字段转换为 Unix 时间戳。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:42:03.830

Write this in your model

```
public function get_all()
{
    return $this->db->select('UNIX_TIMESTAMP(start)', false)
                ->from('events')
                ->get()
                ->result_array();
} 
```

And this in your controller

```
$this->load->model('event_model');
$all = $this->event_model->get_all();
print_r($all); 
```

# c# - 如何从 SQL 中查询与数组成员比较？

> ID：15030088
> 
> 赞同：1
> 
> 时间：2013-02-22T17:39:19.420
> 
> 标签：c#, sql, arrays

所以我有一个包含计算机名称的数组，称为`hostnames[]`.

包含：`compname1, compname2, compname3`等

实际上它从另一个 SQL 查询中获取它的成员。

我有一个数据表，我需要查询主机名列在我的数组中包含任何计算机名称的所有行。

就像是：

```
select * from table where hostname in hostnames[] 
```

我应该如何继续实现我的目标？

编辑：我在考虑以下内容：

```
string temp = "'" + hostnames[0] + "'";
for(int i=1; i<hostnames[].Lenght; i++)
{
temp = temp + ",'" + hostnames[i] + "'";
}
string query = "SELECT * FROM table WHERE hostname IN (" + temp + ")"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:14:34.917

为 IN 子句使用参数的最佳方法是使用[表值参数](http://msdn.microsoft.com/en-us/library/bb675163.aspx)，在您的情况下，您将需要一个类型作为具有一个 nvarchar 列的表。我使用了通用名称，因此可以重用该类型而不会混淆：

```
CREATE TYPE dbo.StringList AS TABLE (value NVARCHAR(MAX)); 
```

然后，只需将您的值添加到 DataTable 并将其作为参数传递给您的 select 命令：

```
var dataTable = new DataTable();
dataTable.Columns.Add(new DataColumn("Value", typeof(string)));

for (int i = 0; i < hostnames.Length; i++)
{
    var dr = dataTable.NewRow();
    dr[0] = "";
    dataTable.Rows.Add(dr);
}
using (var connection = new SqlConnection("connectionString"))
using (var command = new SqlCommand("SELECT * FROM Table WHERE HostName IN (SELECT Value FROM @StringList)", connection))
{
    SqlParameter stringListParameter = new SqlParameter("@StringList", SqlDbType.Structured);
    stringListParameter.Value = dataTable;
    stringListParameter.TypeName = "dbo.StringList";
    command.Parameters.Add(stringListParameter);

    // OPEN CONNECTION EXECUTE COMMAND ETC

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T19:06:10.657

有4种方法可以实现您想要的。你选择最适合你的。

1.  在您的代码中使用 IN
2.  分解为 OR。A IN (1, 2, 3) => A=1 或 A=2 或 A=3
3.  使用表值参数
4.  使用之前通过的 sql 查询。例如：“SELECT * FROM table WHERE hostname IN (Select hostname from tableusedEarlier)”

# jakarta-ee - 如果用户尚未通过 Java EE 中的 Web 模块对自己进行身份验证，那么 EJBContext#getCallerPrincipal() 将返回什么？

> ID：15030095
> 
> 赞同：0
> 
> 时间：2013-02-22T17:39:49.573
> 
> 标签：jakarta-ee, authentication, servlets, ejb, userprincipal

为了让*Servlet*获得`Principal`Web 用户的 ，他将调用`HttpServletRequest#getUserPrincipal()`. 根据[文档](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getUserPrincipal%28%29)`null`，如果用户尚未验证自己，此方法将返回。说得通。

如果*企业 Java bean* (EJB) 想要获取用户的 Principal，他将调用 `EJBContext#getCallerPrincipal()`. 但是，根据[文档](http://docs.oracle.com/javaee/6/api/javax/ejb/EJBContext.html#getCallerPrincipal%28%29)，此方法**永远不会返回 null**。

## 那么它返回了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:39:49.573

尽管我很遗憾无法参考任何类型的文档来说明当`EJBContext#getCallerPrincipal()`调用未经身份验证的用户时会发生什么，我使用 Glassfish 3.1.2.2（构建 5）进行了实验。它表明 getCallerPrincipal() 确实会返回 a `Principal`，并且调用该主体的*toString()*或*getName()*都返回字符串**ANONYMOUS**。这可能很高兴知道！

# android - 使用浏览器包装器将现有的 Web 应用程序移动到本机手机应用程序中

> ID：15030099
> 
> 赞同：15
> 
> 时间：2013-02-22T17:40:02.393
> 
> 标签：android, iphone, ios, ruby-on-rails, web-applications

所以可以说有一个功能齐全的响应式 ruby​​ rails web 应用程序。这个应用程序在手机上工作并且看起来很棒。不幸的是，这个网络应用程序无法从手机应用程序商店中看到，因为它不是原生应用程序。从技术上讲，您可以在打开浏览器的智能手机上放置一个图标，但显然这不是最佳选择。

有没有办法创建一个本质上只是一个浏览器的原生应用程序（Android、iPhone），没有导航栏？该浏览器的包装器只会加载 Web 应用程序，其行为就像您打开浏览器一样。

我已经研究过诸如 Phonegap 和 Titanium 之类的选项，但似乎会有大量的重写，而且这方面的资金很少。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-26T23:57:48.673

我真的不了解 iOS，但在 Android 中做这件事会很容易。

首先，这是您的活动：

```
package com.example.my_browser;

import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebView;

public class MyActivity extends Activity {
    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        WebView browser = (WebView)findViewById(R.id.browser);
        browser.loadUrl("http://google.com"); //Replace google.com with you webapp's URL
    }
} 
```

这是您的 main.xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
    >
    <WebView
        android:id="@+id/browser"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        />
</LinearLayout> 
```

您需要在 AndroidManifest.xml 中请求 Internet 权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

我刚刚在模拟器中测试了它，它可以工作。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-01T14:07:27.113

这个答案适用于 iOS。

您可以在设备的主屏幕上显示您网站的图标，而无需编写一行代码（没有 UIWebView、没有原生编码、没有 XCode）。

1.  [从http://www.apple.com/support/iphone/enterprise/](http://www.apple.com/support/iphone/enterprise/)下载 iPhone 配置实用程序
2.  启动 iPhone 配置实用程序，然后从左侧菜单中选择“配置文件”
3.  在新配置文件的“常规”部分中，填写名称（MyWebsite 应用程序）和标识符（com.mycompany.coolapp）。您还可以添加组织名称和描述。
4.  向下滚动并选择 Web Clips 部分。
5.  在标签字段中，您可以输入将在主屏幕上显示的名称。
6.  URL 将是您的网站/网络应用程序的 URL。
7.  选择要用作主屏幕图标的图标。使用至少 114x114 像素分辨率。
8.  如果您选择“全屏”，当您启动您的 Web 应用程序时，Safari 的导航栏和地址栏将被隐藏，这样您就可以拥有一个真正的“应用程序”。
9.  单击“导出”按钮。您可以决定是否签署您的个人资料（最终用户在安装您的个人资料时会看到）。
10.  保存 .mobileconfig 文件并将其上传到您的 Web 服务器或通过邮件发送给您的最终用户。
11.  当最终用户在其设备上打开 .mobileconfig 文件时，系统会要求他安装配置文件。安装后，将创建一个指向您网站的主屏幕图标。

**自 2017 年起的更新** iPhone 配置实用程序已被 Apple Configurator 取代，您可以从 App Store 免费下载。您可以按照 Apple Configurator 中描述的相同方式创建新的配置文件，在应用程序中选择文件 -> 新建配置文件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-27T21:45:29.267

**编辑 2**
正如@MrTJ 在评论中所说。显然苹果不会让你有一个简单的“网站包装”应用程序。因此，您唯一的选择是移植 Ruby，就像我的答案的其余部分所描述的那样，本地移植应用程序，或者像 @MrTJ 在他的答案中描述的那样做一个 Web 应用程序。本地移植它，由 REST 类 Web 服务支持，可能是*最好*的解决方案。Web 应用程序*很好*，但本机应用程序通常*更好*。这取决于您要提供什么样的用户体验。
**结束编辑 2**

**编辑 1**
我需要更仔细地阅读。我回答了你的问题，假设你想嵌入应用程序，而不需要访问互联网。如果这**不是**您想要做的，那么这绝对是可能的。

只需创建一个具有 web 视图并加载站点的基本 URL 的应用程序。您可能想要制作一个始终具有后退按钮等的特殊版本的网站，因此用户永远不会卡在您网站的角落（因为您希望隐藏导航栏）。

另外，我个人不会这样做，你*可以*，但你可能不应该这样做。当用户没有互联网连接时，您将需要处理该做什么。当他们（可能）为他们无法在任何地方使用的应用程序付费时，您可能会让他们不开心。原生应用程序的销售/性能往往要好得多。
**结束编辑 1**

# 我对这个问题的个人反应

很酷的问题。就我个人而言，我不是 Ruby 或 Rails 的粉丝（我更喜欢 Python，但 Python 实际上是我对这种情况一无所知的原因），但这无论如何都是一个很酷的问题。

# 要问自己的问题

**这可能吗？** *大概*

**这是个好主意吗？** *可能不是*

**值得付出努力吗？** *可能不是*

**最重要的是，苹果会让你卖掉它吗？** *....也许吧，但对于这样的事情，你不知道，直到你尝试......*

# 你需要什么

1.  使用协议与您的本机应用程序对话的 WebView。这就像用于与浏览器中的 iFrame 对话的 URL 哈希标记黑客，或 PhoneGap 用于与其 WebView 通信的协议

2.  Ruby 解释器的嵌入式版本。人们一直在使用[Python](https://itunes.apple.com/us/app/ipython/id485729872?ls=1&mt=8)和[JavascriptCore](http://phoboslab.org/log/2011/06/javascriptcore-project-files-for-ios)解释器在 iOS 上执行此操作。有些人会试图告诉你 Apple 不会让你这样做，但事实并非如此。你需要专门为 iOS 编译 Ruby，这可能会很烦人，但我敢打赌，如果你的实现基于 Python/Javascript 实现，你最终可以让它工作。

**编辑**
与此答案相关的另一个 SO 问题/答案在 iOS 应用程序**端编辑**
[中嵌入 JavaScript 引擎](https://stackoverflow.com/questions/5317776/embed-a-javascript-engine-in-an-ios-application)

 **3.  Rails 的嵌入式版本...祝你好运:)

4.  在没有 Web 服务器的情况下触发 Rails 应用程序的方法（您可能无法在 iPhone 上本地运行 apache（会很困难并且可能会立即崩溃），而且绝对不会在 Android 上运行）。您要么需要以某种方式手动触发每个视图，将输出通过管道传输到字符串或文件，然后将该字符串 (HTML) 或文件加载到 WebView

5.  在 Rails 应用程序中触发导航的方法。这将需要从 WebView 捕获链接按下（您可以观察 iOS 上的 URL 变化），并触发正确的 Rails 视图以生成其 HTML。

# 问题

1.  Ruby 和 Rails 都**非常重**。我见过的大多数实现都需要至少 256mb 的 RAM，如果 iOS 在启动时尝试使用这么多内存，它会立即杀死你的应用程序。Android 可能会不太优雅地处理它，并且会在应用程序运行的某个时刻意外崩溃。

2.  Android 不运行本机编译代码。这意味着您将需要运行 JRuby，这将为您提供以解释语言运行的解释语言（*读作*，**在移动设备上慢如地狱**）。

3.  这将需要编写更多的 Ruby、一些 Javascript 和更多的 Java 或 Objective-C。所以换句话说，**不要**。弄清楚你的应用程序做了什么，然后移植它。

# 重点学习

这可能比任何理智的开发人员都愿意在“简单的 Web 应用程序”上花费更多的精力。学习原生开发会好得多，因为无论如何完成这项工作都需要这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T22:53:22.577

是的，对于 iOS，只需全屏加载 UIWebView 并将 UIWebView 的当前 URL 更改为您的网络应用程序的任何位置。[使用特定 url 启动 UIWebview](https://stackoverflow.com/questions/3182769/launching-uiwebview-with-specific-url)

我对android一无所知，但显然这是相同的过程……来吧：[如何在Android上的xml布局文件中设置WebView上的url？](https://stackoverflow.com/questions/5219794/how-to-set-url-on-webview-from-a-xml-layout-file-on-android)

* * *

要在 iOS 应用程序和您的网站之间进行通信，您可以使用`stringByEvaluatingJavaScriptFromString`此处提到的：[Passing Javascript Variable to Objective-C](https://stackoverflow.com/questions/4191025/passing-javascript-variable-to-objective-c)

要使用 Android 执行此操作，请参阅此问题的其他答案，他们已经在答案中列出了代码。**

# mysql - MySQL全文关键字/短语

> ID：15030104
> 
> 赞同：1
> 
> 时间：2013-02-22T17:40:20.803
> 
> 标签：mysql, full-text-search

我想确保我从一开始就这样做，但我找不到一个好的答案，所以我想我会问。

我要做的是以下。

取一个句子，例如：The quick brown fox jumped over the lazy dog”，并使用全文在多个表中搜索匹配项。

一张表将是关键字。都是单字。第二个表将是短语。

关键字部分很简单，我explode()，我用的是php，句子然后在关键字表中搜索匹配。

这些短语是我不确定的地方。我可以根据整个句子字符串搜索短语表，它会找到任何匹配项。像“lazy dog”或“brown fox”一样，还是试图找到整个句子？

希望这是有道理的。

谢谢布鲁斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:43:32.700

您可能想研究像 Sphinx 或 Lucene 这样的全文引擎。mySQL 的全文搜索非常缓慢和繁琐。我真的很喜欢 Sphinx，因为你可以编译一个 mySQL 引擎插件来与你的全文引擎交互。

# android - 在列表视图中映射片段？

> ID：15030109
> 
> 赞同：3
> 
> 时间：2013-02-22T17:40:32.730
> 
> 标签：android, google-maps, listview

我需要一些信息，因为我不知道这是否可行。
我有片段活动，在那里我有标签。选项卡是列表片段。我的问题：

我需要列表中的一些自定义视图。我有一些信息，下面我有一张地图，上面有一个指向那个地方的图钉。这有可能吗？？？ListFrragment里面的MapFragment？？？
如果你能说这是可能的，并指出我正确的方向如何实施它，我将非常感激！！！
谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T17:58:36.137

> 这有可能吗？

当然，使用某种静态地图图像。谷歌为此提供[了一个静态地图 API——](https://developers.google.com/maps/documentation/staticmaps/)虽然主要用于 Web，但原则上您也应该能够从 Android 应用程序中获取它。

> ListFrragment 中的 MapFragment？

将片段`ListView`连续放置将很难甚至不可能，因为`ListView`期望它的孩子是`Views`，所以你可能需要使用`MapView`而不是`MapFragment`。此外，您还遇到了滚动地图的所有问题。而且，这是一个非常重量级的解决方案，所以我预计会出现性能问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-29T22:58:08.320

我刚刚遇到了类似的问题，我想出了以下解决方案。顺便说一句，现在播放服务有 google map lite 模式。

假设您有一个使用 BaseAdapter 的 ListView，因此您应该重写您的 getView 方法。这就是我的 getView 的样子：

```
 @Override
public View getView(int position, View convertView, ViewGroup parent) {
    if ( convertView == null )
        convertView = new CustomItem(mContext,myLocations.get(position));

    return convertView;
} 
```

其中 CustomItem 类是代表我的行的 FrameLayout。

```
public class CustomItem extends FrameLayout {

public int myGeneratedFrameLayoutId;

public CustomItem(Context context,Location location) {
    super(context);
    myGeneratedFrameLayoutId = 10101010 + location.id; // choose any way you want to generate your view id

    LayoutInflater inflater = ((Activity) context).getLayoutInflater();

    FrameLayout view = (FrameLayout) inflater.inflate(R.layout.my_custom_item,null);
    FrameLayout frame = new FrameLayout(context);
    frame.setId(myGeneratedFrameLayoutId);

    int height = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 150, getResources().getDisplayMetrics());
    LayoutParams layoutParams = new LayoutParams(LayoutParams.MATCH_PARENT,height);
    frame.setLayoutParams(layoutParams);

    view.addView(frame);

    GoogleMapOptions options = new GoogleMapOptions();
    options.liteMode(true);
    MapFragment mapFrag = MapFragment.newInstance(options);

    //Create the the class that implements OnMapReadyCallback and set up your map
    mapFrag.getMapAsync(new MyMapCallback(location.lat,location.lng));

    FragmentManager fm = ((Activity) context).getFragmentManager();
    fm.beginTransaction().add(frame.getId(),mapFrag).commit();

    addView(view);
} 
```

希望它可以帮助某人。

# jquery - 查询 window.onbeforeunload

> ID：15030113
> 
> 赞同：0
> 
> 时间：2013-02-22T17:40:43.190
> 
> 标签：jquery, onbeforeunload

```
window.onbeforeunload( function() { 
      return &quot;Are you sure?&quot; ;
}); 
```

我想在页面被卸载之前执行一个 AJAX 调用，有没有其他方法可以实现这一点，因为这不起作用？期待，谢谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:52:45.493

试试这个：

```
window.onpagehide(function() {
    return "Are you sure?";
} 
```

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:01:07.103

如果您想在页面卸载时运行某个函数，可以尝试 $(window).unload()，但它无法阻止页面卸载或重定向用户。此外，某些浏览器会在卸载时阻止警报。

```
$(window).unload(function(){
  $.ajax({url:"http://localhost:80/ajax.php?", async:false});
  alert('Bye.');
}); 
```

但你最好的选择是做这样的事情：

```
$(window).bind('beforeunload', function(){
   $.ajax({url:"http://localhost:80/ajax.php?", async:false});
  return 'Are you sure you want to leave?';
}); 
```

//我在 IE9、Chrome 和 Firefox 中对此进行了测试，并且每次都成功触发了 ajax 调用。

[JSFiddle 示例](http://jsfiddle.net/UN2rj/)

此外，如果您在页面卸载时执行 ajax 请求，请尝试将 async 设置为 false：

```
$.ajax({url:"http://localhost:80/ajax.php?", async:false}); 
```

# javascript - Changing Javascript attribute (inline in HTML) based on screensize - like CSS Media Queries

> ID：15030115
> 
> 赞同：1
> 
> 时间：2013-02-22T17:40:48.117
> 
> 标签：javascript, size, screen, media

I'm utilizing Flexislider2 for a responsive site, and unsure how to write the code for a challenge I have. I am well versed in HTML and CSS, however not very good at javascript (yet, still learning :>).

The site is utilizing CSS media queries at a few breakpoints, and all CSS responsiveness is fine(just mentioning for fyi).

However, there are some attributes in flexislider that are set inline within the HTML (within tag), that I need to change at the same breakpoints.

I need to dynamically change the value for itemWidth at certain screen widths (including on change, not just load) in the same fashion css Media Queries would kick in.

So my question is, how can I change the value of that attribute when the screen size is (or changes) to <=960px and <=780px and <=480px

Basically I need the value to change at the same time my CSS media queries hit, which just for reference are: @media screen and (max-width: 960px) @media screen and (max-width: 780px) @media screen and (max-width: 480px)

Here is the javascript which currently is inline with the HTML document.

```
<script type="text/javascript">
    $(window).load(function(){ 
      $('#testimonial_carousel').flexslider({
             animation: "slide",
             animationLoop: false,
             slideshow: false,
             randomize: false,
             itemWidth: 472,
             itemMargin: 0,
             start: function(slider){
               $('body').removeClass('loading');
             }
      });
    });
  </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:02:28.523

```
window.resize(function(){
    if(screen.width <= 480){
        //do something
    }else if (screen.width <= 780){
        //do something else
    }else if(screen.width <= 960){
        //do final thing
    }
}) 
```

[你可以在 resize()](http://api.jquery.com/resize/)和[screen.width()](http://www.quirksmode.org/blog/archives/2010/08/combining_media.html)中找到更多关于这些的信息。

特别是第二个链接对于您尝试做的事情非常有指导意义。

# lisp - how to get the number of arguments supplied to a lisp function

> ID：15030122
> 
> 赞同：1
> 
> 时间：2013-02-22T17:41:31.543
> 
> 标签：lisp, common-lisp, sbcl

How can I get the number of arguments supplied to a Lisp function like in bash with the variable $0? (I saw a similar question but it does not give the answer.)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-23T22:23:32.180

目前尚不清楚您在问什么，但在 Common Lisp 中，您可以使用`&rest`参数将不确定数量的参数收集到列表中。使用`length`您可以查看提供了多少。例如：

```
CL-USER> (defun numargs (&rest arguments)
           (length arguments))
NUMARGS
CL-USER> (numargs 1 2 3)
3
CL-USER> (numargs 1 2 3 4 5)
5
CL-USER> (numargs)
0 
```

由于该问题具有[sbcl](/questions/tagged/sbcl "显示标记为“sbcl”的问题")标记，因此您可能对特定于 SBCL 的解决方案感兴趣。 `sb-introspect:function-lambda-list`看起来相关：

```
CL-USER> (sb-introspect:function-lambda-list 'cons)
(SB-IMPL::SE1 SB-IMPL::SE2)
CL-USER> (sb-introspect:function-lambda-list 'numargs)
(&REST ARGUMENTS) 
```

如果您检查 lambda 列表，您可以确定一个函数可以接受多少个参数。

# c++ - 时钟（）如何在 访问系统时钟？

> ID：15030123
> 
> 赞同：4
> 
> 时间：2013-02-22T17:41:42.997
> 
> 标签：c++, c, system-calls, ctime

我正在使用带有最少库的 STM32 微控制器。我想使用`clock()`来自`<ctime>`（也可能是新的`std::chrono`）的函数，但我被困在`clock()`返回-1。

这并不奇怪，因为我不希望其中的库`gcc-arm-none-eabi`知道我的微控制器的外围布局。

我如何知道`clock`它从哪里获得滴答计数？我可以简单地重新声明它，还是需要实现一个较低级别的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:01:32.450

这通常是将 libc 实现移植到新平台的工作的一部分。当您编译 glibc 或 newlib（C 标准库的两个最流行的实现）的副本时，您必须提供一系列存根方法，其中一个将提供时间。`gcc-arm-none-eabi`是在 newlib 中预定义的一个目标，它实现了很多这些存根，但不是那些用于获取时间的存根，因为就像你说的那样，这些是特定于应用程序的。

最好的办法是自己构建工具链，实现这个方法。您可以按照[此处](http://www.kunen.org/uC/gnu_tool.html)的说明进行操作，但在构建 newlib 之前编辑目标以填充此存根。[此处](http://wiki.osdev.org/Porting_Newlib)提供了实现存根的良好参考。

或者，您可以直接实现自己的`clock`功能，当您链接您的应用程序时，它会更喜欢您的版本而不是库中的版本。但是请注意，这意味着库中调用的任何内容`clock`仍会调用损坏的库版本，因此您可能需要重新实现很多函数。

# php - Styling e-mail that is sent from a contact form

> ID：15030124
> 
> 赞同：0
> 
> 时间：2013-02-22T17:41:46.707
> 
> 标签：php, forms, styles

How can I style an e-mail that's sent from a contact form?

I'd like to place it into nice tables with some decent styling. My front-end is just a HTML page that the user fills out a form. The form, upon submit, calls this PHP page to send the data. I have all of that portion working perfectly.

Now, I'd just like to style how the e-mail looks to the person receiving the e-mail since right now it's all just text & data.

My current PHP code is:

```
<?php
if(isset($_POST['email'])) {

// EDIT THE 2 LINES BELOW AS REQUIRED
$email_to = "email@email.com";
$email_subject = "TEST - NO STYLE JUST DATA- Product Research Request";

function died($error) {
    // your error code can go here
    echo "We are very sorry, but there were error(s) found with the form you submitted. ";
    echo "These errors appear below.<br /><br />";
    echo $error."<br /><br />";
    echo "Please go back and fix these errors.<br /><br />";
    die();
}

// validation expected data exists
if(!isset($_POST['ProductMgr']) ||
    !isset($_POST['ProductDesc'])||
    !isset($_POST['email'])) {
    died('We are sorry, but there appears to be a problem with the form you submitted.');       
}

$ProductMgr = $_POST['ProductMgr'];                 // required
$email_from = $_POST['email'];                      // required
$ProductDesc = $_POST['ProductDesc'];               // required
$ProjLaunchDate = $_POST['ProjLaunchDate'];         // required
$ProdCat = $_POST['ProdCat'];                       // required
$ProdSubCat = $_POST['ProdSubCat'];                 // required
$SuggVendor = $_POST['SuggVendor'];                 // required
$VPartNum = $_POST['VPartNum'];                     // required
$EstLandCost = $_POST['EstLandCost'];               // required
$EstRetail = $_POST['EstRetail'];                   // required
$GMPercent = $_POST['GMPercent'];                   // required
$GMDollar = $_POST['GMDollar'];                     // required
$ForeUSales = $_POST['ForeUSales'];                 // required
$ForeDSales = $_POST['ForeDSales'];                 // required
$WholesalePot = $_POST['WholesalePot'];             // required
$CompProdPrice = $_POST['CompProdPrice'];           // required
$CompCompany = $_POST['CompCompany'];               // required
$SampleAvail = $_POST['SampleAvail'];               // required
$ProdDims = $_POST['ProdDims'];                     // required
$ProdColors = $_POST['ProdColors'];                 // required
$EstProdWeight = $_POST['EstProdWeight'];           // required
$Features = $_POST['Features'];                     // required
$AMLBenefits = $_POST['AMLBenefits'];               // required
$ProBenefits = $_POST['ProBenefits'];               // required
$Restrictions = $_POST['Restrictions'];             // required
$GKS = $_POST['GKS'];   
$ProdMgr2 = $_POST['ProdMgr2'];                     // required
$ProdDesc2 = $_POST['ProdDesc2'];                   // required
$PossVend = $_POST['PossVend'];                     // required
$ProjReTime = $_POST['ProjReTime'];                 // required
$EstLandCost2 = $_POST['EstLandCost2'];             // required
$ProtoExpDate = $_POST['ProtoExpDate'];             // required
$ProdExpDate = $_POST['ProdExpDate'];               // required

  $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }

  if(strlen($error_message) > 0) {
died($error_message);
  }
        $email_message = "Form details below.\n\n";

function clean_string($string) {
  $bad = array("content-type","bcc:","to:","cc:","href");
  return str_replace($bad,"",$string);
}

$email_message .= "Product Manager: ".clean_string($ProductMgr)."\n";
$email_message .= "Product Description: ".clean_string($ProductDesc)."\n";
$email_message .= "Projected Launch Date: ".clean_string($ProjLaunchDate)."\n";
$email_message .= "Product Category: ".clean_string($ProdCat)."\n";
$email_message .= "Product Subcategory: ".clean_string($ProdSubCat)."\n";
$email_message .= "Suggested Vendor: ".clean_string($SuggVendor)."\n";
$email_message .= "Vendor Part Number: ".clean_string($VPartNum)."\n";
$email_message .= "Estimated Landed Cost: ".clean_string($EstLandCost)."\n";
$email_message .= "Estimated Retail: ".clean_string($EstRetail)."\n";
$email_message .= "Gross Margin %: ".clean_string($GMPercent)."\n";
$email_message .= "Gross Margin $: ".clean_string($GMDollar)."\n";
$email_message .= "Forecasted Unit Sales: ".clean_string($ForeUSales)."\n";
$email_message .= "Forecasted Dollar Sales: ".clean_string($ForeDSales)."\n";
$email_message .= "Wholesale Potential: ".clean_string($WholesalePot)."\n";
$email_message .= "Competition Product & Price: ".clean_string($CompProdPrice)."\n";
$email_message .= "Competitor Company: ".clean_string($CompCompany)."\n";
$email_message .= "Sample Available: ".clean_string($SampleAvail)."\n";
$email_message .= "Product Dimensions: ".clean_string($ProdDims)."\n";
$email_message .= "Product Colors: ".clean_string($ProdColors)."\n";
$email_message .= "Estimated Product Weight: ".clean_string($EstProdWeight)."\n";
$email_message .= "Features: ".clean_string($Features)."\n";
$email_message .= "Benefits to AML: ".clean_string($AMLBenefits)."\n";
$email_message .= "Benefits to Pro Customers: ".clean_string($ProBenefits)."\n";
$email_message .= "Any Restrictions: ".clean_string($Restrictions)."\n";
$email_message .= "GKS Approval To Go: ".clean_string($GKS)."\n";
$email_message .= "Product Manager: ".clean_string($ProdMgr2)."\n";
$email_message .= "Product Description: ".clean_string($ProdDesc2)."\n";
$email_message .= "Possible Vendors: ".clean_string($PossVend)."\n";
$email_message .= "Projected Research Time: ".clean_string($ProjReTime)."\n";
$email_message .= "Estimated Landing Cost: ".clean_string($EstLandCost2)."\n";
$email_message .= "Prototypes Expected Date: ".clean_string($ProtoExpDate)."\n";
$email_message .= "Production Expected Date: ".clean_string($ProdExpDate)."\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);  
}
header("Location: ThankYou.html");  //Redirect to Thank You HTML page after email is     sent
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:57:10.193

消息正文的开头以以下代码行开头：

> $email_message = "下面的表单详细信息。\n\n";

然后消息的其余部分只是将每个值添加到新行中，格式为“label: $value”，开头为：

> $email_message .= "产品经理：".clean_string($ProductMgr)."\n";

并以

> $email_message .= "生产预期日期：".clean_string($ProdExpDate)."\n";

假设您希望将所有这些都放在一个表中，您可以在字段分配之前或之后添加一行，或者将其添加/附加到上述语句中。一个非常基本的例子：

```
$email_message .="<table>";
$email_message .= "Product Manager: ".clean_string($ProductMgr)."\n";
.
.
.
$email_message .= "Production Expected Date: ".clean_string($ProdExpDate)."\n";
$email_message .= "</table>"; 
```

如果您想走表格路线，请根据需要添加标题、行和列以获得所需的布局。

基本上你只是将 html 添加到 $email_message。您可能会发现首先让 html 工作更容易，然后将其用作您需要连接 $email_message 字符串以获得相同结果的方式的模板。

祝你好运。

# .htaccess - Google PageSpeed 压缩和 .htaccess

> ID：15030126
> 
> 赞同：1
> 
> 时间：2013-02-22T17:41:47.383
> 
> 标签：.htaccess, caching, optimization

我正在尽我所能加快我的网站速度。我运行了 Google 的 PageSpeed，得到了 83/100。

Page 说要压缩资源，例如 .js 和 .css 文件。

“使用 gzip 或 deflate 压缩资源可以减少通过网络发送的字节数。”

好的，然后我用谷歌搜索并编辑了我的 .htaccess：

```
<IfModule mod_deflate.c>
  <FilesMatch "\.(css|js|xml)$">
    SetOutputFilter DEFLATE
  </FilesMatch>
</IfModule>
<IfModule mod_headers.c>
  <FilesMatch "\.(js|css|xml|gz)$">
    Header append Vary: Accept-Encoding
  </FilesMatch>
</IfModule>
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType image/png A604800
  ExpiresByType image/gif A604800
  ExpiresByType image/jpg A604800
  ExpiresByType image/jpeg A604800
  ExpiresByType text/javascript A604800
  ExpiresByType application/x-javascript A604800
  ExpiresByType text/css A604800
</IfModule> 
```

当我检查我的网站时：

标题：

```
Accept-Encoding gzip, deflate 
```

缓存：

```
Data Size   332
Device  disk
Expires Thu Jan 01 1970 02:00:00 
```

和我网站中的 PHP：

```
if (substr_count($_SERVER['HTTP_ACCEPT_ENCODING'], 'gzip'))
    ob_start("ob_gzhandler"); 
else 
    ob_start();
header('Vary: Accept');
header('Cache-Control: max-age=28800'); 
```

任何想法出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:02:15.427

在上面的示例代码中，没有为 html 内容指定扩展名，例如 .php

我通常通过 mimetype 而不是文件扩展名管理 gzip，例如

```
 <IfModule mod_filter.c>
    AddOutputFilterByType DEFLATE application/atom+xml \ 
    etc 
```

有关完整列表，请参阅[https://github.com/h5bp/html5-boilerplate/blob/master/.htaccess](https://github.com/h5bp/html5-boilerplate/blob/master/.htaccess)。

# clojure - Clojure map transformations (children to fathers in a tree)

> ID：15030129
> 
> 赞同：2
> 
> 时间：2013-02-22T17:42:02.047
> 
> 标签：clojure

Say I have the following map of nodes in a tree and their children:

```
(def a {0 [], 1 [], 2 [0, 1]}) 
```

Corresponding to a tree with node **2** at its root and two leaf-nodes **0** and **1** as node **2**'s children.

How do I transform it into a map of fathers, or, better yet, adorn it with the fathers. E.g. arrive at the following map of fathers:

```
{0 2, 1 2, 2 nil} ; each node only has one father at most 
```

Or, better yet, at the following map which combines children and fathers:

```
{0 [[] 2], 1 [[] 2], 2 [[0,1] nil]} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T18:24:54.803

第一点：

```
(def a {0 [], 1 [], 2 [0, 1]})

(defn parent-map [m]
  (reduce 
    (fn [x [k v]] 
      (into x (zipmap v (repeat k)))) {} m))

(def parent (parent-map a))   

parent 
=> {1 2, 0 2}
(parent 1)
=> 2 
(parent 2)
=> nil 
```

因此，无需`2 nil`在父映射中显式设置。

第二位：

```
(defn parent-child-map [m]
  (let [parent (parent-map m)]
    (reduce 
      (fn [x [k v]] 
        (assoc x k [(m k) (parent k)])) {} m)))

(parent-child-map a)
=> {2 [[0 1] nil], 1 [[] 2], 0 [[] 2]} 
```

更有趣的事情：

```
(def b {0 [], 1 [], 2 [], 3 [], 4 [0 1 2], 5 [3], 6 [4 5]})

(parent-child-map b)
=>
{6 [[4 5] nil],
 5 [[3] 6],
 4 [[0 1 2] 6],
 3 [[] 5],
 2 [[] 4],
 1 [[] 4],
 0 [[] 4]} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T18:35:43.937

```
(defn parents [m]
  (let [plist (into {} (for [[k v] m vv v] [vv k]))]
    (into {} (map (fn [[k v]] [k [v (plist k)]]) m))))

(parents a)
=> {0 [[] 2], 1 [[] 2], 2 [[0 1] nil]} 
```

# android - Android: How to determine why custom font is not working

> ID：15030131
> 
> 赞同：2
> 
> 时间：2013-02-22T17:42:11.013
> 
> 标签：android, fonts, textview

I am using various custom fonts in a TextView.

```
Typeface tf = Typeface.createFromAsset(getAssets(), "fonts/font_name.ttf");
TextView tv = (TextView) this.findViewById(R.id.MyText);
tv.setTypface(tf);
tv.setText("data to view in custom font"); 
```

This works for some fonts but not for all I want to use. The failed fonts do so silently. there are no exceptions or other failure indications. The text is displayed in the default font not in the custom font. It is clear that the fonts are not displayed, because the custom fonts I am trying to use are chess piece figurines.

All the fonts work in Word and LibreOffice Writer

How do I determine what is wrong with the font, so I might fix it.

Edits:fixed example code to add tv.setTypeface(tf); clarified what not working means.

# java - Java Webstart (Library) signing

> ID：15030132
> 
> 赞同：3
> 
> 时间：2013-02-22T17:42:13.663
> 
> 标签：java, ant, jar, java-web-start, jar-signing

I am a bit concerned about our current build process. It smells of 'the wrong way' and causes our clients a lot of additional downloads.

We have a regular Java project that we publish through Webstart. It uses a variety of libraries that we supply as .jar files. Our JNLP looks like this:

```
<resources>
    <!-- Application Resources -->
    <j2se version="1.6+" href="http://java.sun.com/products/autodl/j2se" max-heap-size="512m" java-vm-args="-Xincgc" />
    <jar href="OurApp.jar" main="true" />
    <jar href="nimrodlf-1.2.jar" main="false" />
    <jar href="jackson-core-asl-1.9.10.jar" main="false" />
    <jar href="jackson-jaxrs-1.9.10.jar" main="false" />
    <!-- ... --> 
```

So far so good. Now there is a problem with using jars signed by different certificates, I guess, or maybe that's only if one is singed with a self signed certificate. Either way, the solution found was that all jars have to be signed by the same certificate.

Subsequently, we copy all our jars, our own as well as the libraries, into the Webstart folder and sign them like so with Ant:

```
<target name="sign_jar" depends="check_publish">
    <signjar keystore="ourapp.keystore" alias="jenkins" storepass="private" verbose="true">
        <path>
            <fileset dir="${publish.folder}/" includes="**/*.jar" />
        </path>
    </signjar>
</target> 
```

This all works fine, although it takes a long time signing every jar. But it also causes every client to redownload every library jar every time we publish a change to our own application jar (which is a lot). The libraries don't technically change, but the resigning makes them appear new.

Are we doing this right ? Is there a better way ? Can we somehow change our build process to make it so people can cache the library jars ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T03:23:53.467

见[`signjar`任务-`lazy`属性](http://ant.apache.org/manual/Tasks/signjar.html)..

> 标志来控制签名文件的存在是否意味着 JAR 已签名。这仅在目标 JAR 与源 JAR 匹配时使用

# android - bluetooth android force close

> ID：15030135
> 
> 赞同：0
> 
> 时间：2013-02-22T17:42:24.203
> 
> 标签：android, bluetooth

I'm trying to connect to a Bluetooth server on my laptop from my android, but my app force closes.I have included the Bluetooth permissions too. Can somebody please check the code and tell me what I might be doing wrong?

```
 package com.android.example.blueoga;

   import java.io.IOException;
   import java.util.UUID;

   import android.os.Bundle;
   import android.app.Activity;
   import android.bluetooth.BluetoothAdapter;
   import android.bluetooth.BluetoothDevice;
   import android.bluetooth.BluetoothSocket;
   import android.content.Intent;
   import android.view.Menu;
   import android.widget.TextView;

   public class BlueGOA extends Activity {

   @Override
   protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    TextView view=(TextView)findViewById(R.id.textView1);
    BluetoothSocket socket;
    socket=null;
    String address="64:27:37:D0:1F:48";
    UUID MY_UUID=UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");
    int REQUEST_ENABLE_BT=1;
    BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
    if (mBluetoothAdapter == null) {
        // Device does not support Bluetooth
        view.setText("Go Home Suckers");
    }
    else if(!mBluetoothAdapter.isEnabled()){
        Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
        startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);

    }
    BluetoothDevice device=mBluetoothAdapter.getRemoteDevice(address);
    try{
        socket=device.createRfcommSocketToServiceRecord(MY_UUID);
    }catch(IOException e){
        view.setText("problem in socket sucker");
    }
    try {
        socket.connect();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        view.setText("Problem in connecting sucker");
    }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.blue_go, menu);
    return true;
    }

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:53:38.553

我看到的第一件事是即使套接字分配引发异常，您也正在尝试使用 socket.connect() 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:59:18.383

```
public class BlueGOA extends Activity {

    private final BluetoothSocket mmSocket;
    private final BluetoothDevice mmdevice;
    // Use a temporary object that is later assigned to mmSocket,
    // because mmSocket is final
    mmdevice = device;
    BluetoothSocket tmp = null;
    // Get a BluetoothSocket to connect with the given BluetoothDevice
    try {
         tmp = device.createInsecureRfcommSocketToServiceRecord(MY_UUID);
    } catch (IOException e) { }
    mmSocket = tmp; 
```

}

# c# - Variable list-name (optimize/minimize code)

> ID：15030140
> 
> 赞同：0
> 
> 时间：2013-02-22T17:42:32.290
> 
> 标签：c#, minimize

Let's say I have the following code:

```
private void btnArr1(object sender, EventArgs e)
{
    wr("test string1","st1");
}
private void btnArr2(object sender, EventArgs e)
{
    wr("test string2","st2");
}
private void btnArr3(object sender, EventArgs e)
{
    wr("test string3","st3");
}

private void wr(String str, String st){
    switch(st){
        case "st1":{
            st1.Add(str);
            break;
        }
        case "st2":{
            st2.Add(str);
            break;
        }
        case "st3":{
            st3.Add(str);
            break;
        }
    }       
} 
```

Is it somehow possible to minimize that code?

For example Change "st1.Add(str)" to something like "st".Add(str).

The only difference between those buttons is the list name where the information is stored. Everything else is equal.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:44:43.280

您需要使用`Dictionary<String, List<String>>`.

在您的构造函数（或其他初始化区域）中，`new List<string>()`为您需要的每个键添加一个。

然后你可以写

```
 dict[someKey].Add(something); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:44:27.550

好吧，如果这些都在同一个类中，您可以使用：

```
private void btnArr1(object sender, EventArgs e)
{
    st1.Add("test string1");
}

private void btnArr2(object sender, EventArgs e)
{
    st2.Add("test string2");
}

private void btnArr3(object sender, EventArgs e)
{
    st3.Add("test string3");
} 
```

如果这对您不起作用，请详细说明*为什么*它不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T17:45:42.970

`st1`在不知道,等的类型的情况下很难说`st2`，但是像这样？

```
private void btnArr1(object sender, EventArgs e)
{
    wr("test string1",st1);
}
private void btnArr2(object sender, EventArgs e)
{
    wr("test string2",st2);
}
private void btnArr3(object sender, EventArgs e)
{
    wr("test string3",st3);
}

private void wr(String str, List<string> st){
     st.Add(str);
} 
```

# eclipse - HoloEverywhere Eclipse 安装

> ID：15030148
> 
> 赞同：4
> 
> 时间：2013-02-22T17:43:04.153
> 
> 标签：eclipse, adt, android-holo-everywhere

我正在尝试使用 HoloEverywhere，但不知道如何安装它。我遵循了[这个](https://github.com/ChristopheVersieux/HoloEverywhere)GitHub 页面上列出的内容。我只是得到很多错误。有谁知道如何让它与 android 2.3.3 API 10 一起使用？我正在运行 Android Developer Tools Build: v21.1.0-569685

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-15T06:26:26.180

只需更新您的 Eclipse ADT 和 Android SDK 并按照以下步骤操作

1.  进入[https://github.com/Prototik/HoloEverywhere](https://github.com/Prototik/HoloEverywhere)
2.  点击下载 ZIP
3.  解压下载的文件
4.  打开 ADT
5.  选择 File > Import > Android > Existing Android Code Into Workspace > Next
6.  在根目录上单击浏览... 并搜索在步骤 3 中创建的文件夹
7.  打开该文件夹并选择库文件夹，然后单击打开
8.  然后单击完成并等待它加载
9.  右键单击现有项目并选择属性 > Android > 单击添加...
10.  选择 HoloEverywhere 库并单击确定，在属性窗口中单击确定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T04:58:02.363

嘿，试试这个：（给出很多答案，因为可能有一个适合你）：-

```
 android:theme=“@style/Theme.Holo
               // or if you want to use the Holo light theme:
      android:theme=“@style/Theme.Holo.Light 
```

还有这个：

```
 Theme.Holo and Theme.Holo.Light have been available since API level 11, but Theme.Holo.Light.DarkActionBar is new in API level 14.

      res/values/themes.xml:

                <resources>
                     <style name="MyTheme" parent="@android:style/Theme">
               <!-- Any customizations for your app running on pre-3.0 devices here -->
               </style>
               </resources>

      res/values-v11/themes.xml:

                  <resources>
                       <style name="MyTheme" parent="@android:style/Theme.Holo">
                         <!-- Any customizations for your app running on devices with Theme.Holo here -->
                        </style>
                        </resources>

              Finally, in AndroidManifest.xml:

                          <!-- [...] -->
                 <application android:name="MyApplication"
                       android:label="@string/application_label"
                       android:icon="@drawable/app_icon"
                       android:hardwareAccelerated="true"
                        android:theme="@style/MyTheme">
                           <!-- [...] --> 
```

并在活动中：

```
 <activity
                  android:name=".login"
                 android:label="@string/login"
                android:noHistory="true"
                  android:theme="@android:style/Theme.Holo.Light"/>

              <activity
                android:name=".Preferences"
                    android:theme="@android:style/Theme.Holo.Light" > 
```

# ios - 我的 IOS openGL 应用程序是否在主线程上被阻塞？加速度计滞后

> ID：15030149
> 
> 赞同：0
> 
> 时间：2013-02-22T17:43:08.283
> 
> 标签：ios, opengl-es, 3d

我有一个使用加速度计的 IOS 游戏。我的游戏以 60 fps 的良好速率渲染，但我从加速度计的输入滞后。例如，在我将游戏向左倾斜后，游戏需要一秒钟才能做出响应。触摸事件也是如此，有时延迟约为一秒。

我的游戏的渲染循环如下所示：

```
procedure RenderFrame

    switch to "SpaceShips" texture

    for each bad guy
        update his location
        render to OpenGLES
    end loop

    update good guy location
    render him to OpenGLES

    switch to "Particles" texture

    for each particle
        update the location
        render to OpenGLES
    end loop

end RenderFrame 
```

对我来说，这听起来类似于这个问题：

[OpenGL ES 2.0 iPhone - 在后台线程块主线程上渲染](https://stackoverflow.com/questions/9463800/opengl-es-2-0-iphone-rendering-on-background-thread-block-main-thread)

这听起来像是我的主线程被阻塞了，我会从并发中受益吗？我可以通过将整个方法移到另一个后台线程来简单地删除主线程上的块，还是我必须对上述方法进行更精细的重写以实现并发？如果可能的话，我想做最少的并发来减轻主线程上的阻塞。

# c# - XmlReader 如何从内存而不是磁盘执行此操作

> ID：15030152
> 
> 赞同：0
> 
> 时间：2013-02-22T17:43:22.313
> 
> 标签：c#, asp.net, xml-parsing

我正在使用`XmlReader ProductDoc = XmlReader.Create(path, settings);`并且显然它正在关闭服务器，因为每次用户使用搜索工具时它都会从磁盘读取。

1.  每次调用 XmlReader 都会调用磁盘内存，这是真的吗？
2.  如果是这样，我怎么能从服务器内存而不是磁盘内存做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:47:05.663

1.  是的，您的代码将从磁盘读取。

2.  听起来您需要将数据放在服务器上的缓存中。这将涉及将文档作为 XDocument 或仅读取原始数据，并将其放入`Page.Cache`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:46:36.067

> 这是真的？

好吧，我们*不知道*这是否是导致您的服务器瘫痪的原因。但是，是的，它每次都会从磁盘读取它，至少在概念上是这样 - 如果文件被读取很多，我希望文件系统缓存文件。

> 如何从服务器内存而不是磁盘内存执行此操作

如果您的意思是“从内存而不是从磁盘”并且*它*始终是相同的路径，那么我建议您只需将文档加载到内存中一次，例如

```
XDocument doc = XDocument.Load(path); 
```

...然后在所有请求中重用它。只要您*只是*从中阅读，就应该没问题。如果需要，您可以从文档中创建一个新的阅读器，或者直接使用`XDocument`（这可能更简单）。如果需要，您可以加载`XDocument`from an`XmlReader`作为替代方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T17:50:21.770

使用

```
XmlReader.Create(Stream) 
```

超载。然后使用 FileStream 将文件内容读入 MemoryStream（仅一次！），然后终止 FileStream 并仅使用 MemoryStream。

只需记住每次使用它创建 XmlReader 时将流的位置设置为 0，这意味着一次只能读取 1 个 XmlReader。

如果您正在运行网络服务器 (asp.net)，则需要缓存 MemoryStream (Page.Cache)。或者，如果内存占用不是太可怕，您可以在 Session 中按每个用户缓存它。在 Session 中，您也不必担心多个阅读器访问。

# javafx-2 - DirectoryChooser Javafx 有问题？

> ID：15030155
> 
> 赞同：2
> 
> 时间：2013-02-22T17:43:30.567
> 
> 标签：javafx-2, javafx

我正在使用目录选择器来设置带有所选路径的 TextField。如果我选择某个目录（如桌面）或任何其他文件夹，它会返回路径，但如果我从我的库中选择目录，如我的 Documents (C:\Users\Victor\Documents)，它会返回 null。是bug吗？？我正在使用下面的代码：

```
 DirectoryChooser chooser = new DirectoryChooser();

        chooser.setTitle("Selecione o diretório");

        File defaultDirectory = new File(folderChooser);

        chooser.setInitialDirectory(defaultDirectory);

        File selectedDirectory = chooser.showDialog(null);

        pathFolderTxtField.setText(selectedDirectory.getAbsolutePath());

        folderChooser = selectedDirectory.getPath(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T19:13:00.947

这是一个错误。

它在 JavaFX 2.2.6 和 Java 8（都还没有发布）中得到了修复：

[RT-28571 在 DirectoryChooser 中选择 Windows 7 库会导致 COM 错误](http://javafx-jira.kenai.com/browse/RT-28571)

该修复实际上不允许库选择。如果用户尝试选择一个库，JavaFX 系统会弹出一个警告并阻止目录选择器关闭：

![图书馆selectedalert](../Images/754d920b682dad5bb57ea1f9e852d077.png)

我在 JavaFX 2.2.4（出现错误）和早期访问[Java 8b77](http://jdk8.java.net/download.html)（显示警告消息）上运行的示例代码是：

```
import java.io.File;
import javafx.application.Application;
import static javafx.application.Application.launch;
import javafx.event.*;
import javafx.scene.*;
import javafx.scene.control.*;
import javafx.scene.layout.VBox;
import javafx.stage.DirectoryChooser;
import javafx.stage.Stage;

public class DirectoryChooserTest extends Application {
  @Override public void start(final Stage stage) {    
    final TextField pathField = new TextField("C:/Users");
    pathField.setPrefWidth(250);

    Button chooseButton = new Button("Choose");
    chooseButton.setOnAction(new EventHandler<ActionEvent>() {
      @Override public void handle(ActionEvent t) {
        chooseDirectory(stage, pathField);
      }
    });

    VBox layout = new VBox(10);
    layout.getChildren().addAll(pathField, chooseButton);
    layout.setStyle("-fx-background-color: cornsilk; -fx-padding: 10;");

    stage.setScene(new Scene(layout));
    stage.show();
  }

  private void chooseDirectory(Stage stage, TextField pathField) {
    DirectoryChooser chooser = new DirectoryChooser();
    chooser.setTitle("Selecione o diretório");
    chooser.setInitialDirectory(new File(pathField.getText()));
    File selectedDirectory = chooser.showDialog(stage);
    if (selectedDirectory != null) {
      pathField.setText(selectedDirectory.getAbsolutePath());
    }  
  }

  public static void main(String[] args) { launch(args); }
} 
```

报告的错误是：

```
E r r o r : 8 0 0 7 0 0 5 7   i n   p F i l e - > G e t D i s p l a y N a m e ( S I G D N _ F I L E S Y S P A T H ,   & p a t h ) 
 C O M   E r r o r : 8 0 0 7 0 0 5 7   T h e   p a r a m e t e r   i s   i n c o r r e c t . 
```

要获得错误，您需要从目录选择器对话框的左侧面板中选择一个库。

# regex - 如果行的最后一个字符是 [0-9]

> ID：15030156
> 
> 赞同：2
> 
> 时间：2013-02-22T17:43:30.940
> 
> 标签：regex, bash

这是 bash 脚本的一部分，我想对不以数字结尾的每一行做一些事情。我不知道如何引用每行的最后一个字符。

```
if lastchar != [0-9]
     awk blahblahblah
else
     awk blagblag 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:48:08.410

做过滤器`awk`：

```
 awk '/[0-9]$/{ blahblahblah } !/[0-9]$/ {blagblag}' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T17:46:08.987

```
#!/bin/bash

while read line; do
    [[ $line =~ [0-9]$ ]] || awk blah
done < file.txt 
```

或者 ：

```
#!/bin/bash

while read line; do
    if [[ $line =~ [0-9]$ ]]; then
        awk blah
    else
        awk anotherblah
    fi
done < file.txt 
```

`=~`是 in 的运算`regex`符`bash`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T18:47:29.313

在大多数情况下，我喜欢这种情况：

```
case "$line" in
    *[0-9]) awk blahblahblah ;;
    *) awk blagblag ;;
esac 
```

但是，如果您无论如何都调用 awk，那么纯粹的 awk 答案可能是最好的。（除非您有未表明需要完成的步骤。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T05:40:55.810

其他答案都没有明确提到这一点：

> 我不知道如何引用每行的最后一个字符。

A[`regular expression`](http://www.regular-expressions.info/)匹配模式：`line ends in number`可以使用`[0-9]$`[match any between `0`and `9`，后跟`end-of-line`( `$`is the `end-of-line anchor`)] 构造。

的锚点`beginning-of-line`是`^`。

# .net - 如何在 selectedindexchange 方法之前获取组合框的当前值？

> ID：15030160
> 
> 赞同：0
> 
> 时间：2013-02-22T17:43:46.537
> 
> 标签：.net, winforms, c#-4.0

假设我有一个`ComboBox`并且我想`ComboBox`在它更改为新的选定索引之前获取它的先前值。

例如`TextBox`，我可以通过使用`KeyDown`keyevents 来获取以前的值，但无法弄清楚在`ComboBox`.

我尝试使用下拉事件，但它继续调用我`SelectedIndexChange`的`ComboBox`as 和何时调用下拉事件的方法，这是我不想要的。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:01:57.417

你可以使用这样的东西。

```
public Form1()
{
    InitializeComponent();
    cmbBox1.Tag = cmbBox1.SelectedIndex;
}

private void cmbBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    lblPrevState.Text = cmbBox1.Tag.ToString(); // Just store the value of to a variable or do whatever you need to do with it here - each time it calls tag will contain previous index value
    cmbBox1.Tag = cmbBox1.SelectedIndex;
} 
```

您需要做的就是在 cmbBox1 上设置 SelectedIndexChangedevent。

# android - Android 日志在整个活动中停止工作

> ID：15030161
> 
> 赞同：0
> 
> 时间：2013-02-22T17:43:50.640
> 
> 标签：android, eclipse, logcat

嗨有一个奇怪的问题正在工作并且记录正常然后突然我所有的日志都有这个错误

未为 String 类型定义方法 v(String, String)

我已经进口`import android.util.Log;`了，它整天都在正常工作，只是突然决定我所有的日志都不应该工作，有人知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:47:01.827

这个问题发生了，但如果其他小部件工作正常，这与 android 无关。

```
1\. clean your project
2\. close eclipse and re-open 
```

.

这些可能会对您有所帮助。

# c++ - 在 C++ 程序中调试明显的内存问题

> ID：15030162
> 
> 赞同：0
> 
> 时间：2013-02-22T17:44:01.353
> 
> 标签：c++, bad-alloc

我正在使用其他人创建的程序。我在编码方面有相当多的经验，但在 C++ 编码方面没有那么多经验，所以我在这里做了很多“边做边学”。所以这个程序看起来很稳定，我开始了我的工作，主要包括对程序的小部分进行小修改。最近做了一些性能优化，看起来也很稳定，但是前两天我改了一些东西，一直在崩溃。所以我恢复了我的更改，但仍然出现崩溃。我开始使用带有激活页面堆的应用程序验证器和全局标志，并检查所有与堆相关的内容以找出导致这些问题的原因。因此，从那时起，调试器总是因“std::bad_alloc”错误而崩溃。

现在我的问题是：我可以绝对确定，启用应用程序验证程序的这个 bad_alloc 崩溃是程序内部错误的一个指标吗？使用应用程序验证程序时，程序本身会使用大量内存，大约 1-1.1gb，但不再使用了。总系统内存最多使用了 80-90%，所以我不认为有可用空间太少导致的实际分配问题。你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:56:10.453

不，您不能绝对确定任意 C++ 程序中的任何内容，因为您的程序可能包含未定义的行为（事实上，几乎可以肯定它确实存在，尽管它可能与手头的问题无关）。也就是说，通常的原因`std::bad_alloc`是无法分配内存。

使用[std::set_new_handler](http://en.cppreference.com/w/cpp/memory/new/set_new_handler)设置自定义`new_handler`，并在其中放置断点。如果触发了断点，那么您的问题几乎可以肯定是无法分配内存（此时程序的状态可能有助于调试您的问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:54:08.773

默认情况下，x86 的 Windows 上的 32 位进程被[限制为 2GB 的地址空间](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366778.aspx#memory_limits)（完整地址空间的下半部分）。

如果您的程序执行大量分配和释放，或者如果您的程序需要大量连续分配，那么是的，当您的程序仅使用 1.1GB 工作集时，很有可能没有足够的连续地址空间来服务分配。

（几年前我参与了一个大型项目，该项目受到地址空间的严格限制。对于我们来说，使用 1.2 到 1.4 GB 的工作集“内存不足”是很常见的。）

Page Heap 肯定会使这个问题更加严重，因为大多数分配比它们通常的大小要大得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T17:54:30.267

您应该研究当二进制文件因 std::bad_alloc 崩溃时收到的堆栈。

通常，这应该是因为`new`无法分配内存。通过堆栈，您应该能够知道请求了多少内存，如果这对您来说很奇怪（例如“请分配 3Go！”），那么您就知道错误在哪里了。

阅读您的问题时不清楚，但是如果您的意思是该进程使用了​​高达 80%-90% 的可用虚拟内存，那么您的内存可能是碎片化的，并且您正在尝试分配一个对象太大而无法容纳剩余的空闲小内存块......因此分配错误，尽管您的进程仍有内存可玩。

在您的代码中进行搜索以查看您的代码的某些部分是否手动抛出 bad_alloc 也是一个好主意。

# codeigniter - 具有 API 密钥的 Phil Sturgeon，最好的方法是什么？

> ID：15030165
> 
> 赞同：3
> 
> 时间：2013-02-22T17:44:14.773
> 
> 标签：codeigniter, rest

我尝试使用 Phil Sturgeon (Codeigniter RestServer) 的出色工作为我服务。

我计划使用这个工作流程：

```
client --> client connect to my service with credentials 
server <-- check credentials in db, generate api-key for this user, and send it
client --> send request to get personal infos with new api-key in header
server <-- retrieve infos for this user from api-key, send infos
client --> another request with new api-key in header
server <-- check if api-key lifetime < 15m, if ok execute request and update lifetime else return timeout error
... 
```

任何人都可以使用 RestServer X-API-KEY 帮助我做到这一点，或者我可以自己进行 API-KEY 管理？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:47:31.920

You should not be doing this with the X-API-KEY used in the Library. The usage of the key is to authenticate apps that you have whitelisted to access your API.

In your case, what you want to do is get your app to generate an auth token and return that to the client. The client should then use the auth token to make requests.

The X-API-KEY should be used to verify that the request is coming from a whitelisted "client". Here's what the flow would look like:

**client** --> client connect to your service with credentials and x-api-key
**server** <-- verifies **x-api-key**, check credentials against db, generate auth token for this user, and sends it back in a response
**client** --> send request to get personal infos with auth token
**server** <-- checks validity of auth token, retrieve infos for this user and returns response **client** --> another request with auth token
**server** <-- check if auth token is still valid (check expiry time, etc) and return response

# visual-studio-2010 - Unrecognized database format when creating a data connection in visual studio 2010 professional

> ID：15030170
> 
> 赞同：-1
> 
> 时间：2013-02-22T17:44:38.740
> 
> 标签：visual-studio-2010, visual-studio, ms-access

I am a student taking an introductory programming course and am having some issues with access databases. I use Visual Studio 2010 Professional and Microsoft Office 2013 Developers Preview (being poor college student is my reason for using the preview).

Every time I go to make a database connection inside Visual Studio (our professor is introducing us to database concepts) I navigate through to where I select create a new data connection, I select Microsoft Access Database File as the data source and the .NET Framework Provider for OLE DB as the data provider (the file is a .accdb, filename: Northwind sales web database).

I continue to the next screen, browse for the databse file and select it and then select test connection and receive the error message

> "Unrecognized database format 'C:\Users\Isaiah\Documents\Northwind sales web database.accdb'."

I did a little research and found some people had this issue with office 2007 and 2010 and were able to fix it by installing "Microsoft Access Database Engine 2010 Redistributable" and/or the "2007 Office System Driver: Data Connectivity components".

I have tried both.
When installing the 2010 Redistributable I will no longer recieve the unrecognized database format error but will instead recieve the error

> "Microsoft.ACE.OLEDB.12.0' provider is not registered on the local machine.".

Some people who have this error have found installing the 2007 Office System Driver on top of the 2010 Redistributable will solve their issue,
I tried this and all it does is cause me to receive the old error message again.
I have tried installing one file and not the other to see if it makes a difference, it does not, no solution appears. Some people have found that ensuring they are set to compile for x86 systems solves this, it does not for me.

I am running windows 8 64-bit and also had this issue when running windows 7 64-bit.
Please help me as I am running out of ideas and am going to start to fall behind the class if I do not get my system in working order.

Any thoughts greatly appreciated

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:18:26.960

For which platform do you compile your application? Usually you have two options: `x86` and `AnyCPU`. If you compile for `AnyCPU` then your code is executed as 64bit code on 64bit systems or 32bit code in 32bit systems. If you compile for `x86` then your code is executed always as 32bit code in 32bit and 64bit systems. So `AnyCPU` seems to be the obvious choice. Now imagine the Microsoft Team that develops the "Microsoft Access Database Engine 2010 Redistributable". They choose to build separate versions of their drivers. The result is: if you build for AnyCPU and run on a 64bit system where there is installed a 32bit version of the Engine you can't use their code. You need to install the 64bit version, but now you face the need to install the 64bit version of Office otherwise you can't work with that. Much better to switch your app to 32bit code and choose the x86 target platform. (And no, you can't install both versions on the same machine)

# solr - SolrJ - 索引多个类并确保文档唯一性

> ID：15030176
> 
> 赞同：0
> 
> 时间：2013-02-22T17:45:24.717
> 
> 标签：solr, indexing, uuid, solrj

我想使用 SolrJ 来索引一组 Java 类。每个类实例由其在类中唯一的 id 确定。但是，通过使用 Solr @Field 注释从这些类创建 Solr 文档，结果证明该注释不能保证存储在 Solr 索引中的创建文档的唯一性（相同的 id 值可能属于多个类）。

我尝试将注释方法与 Solr UUID 数据类型相结合，以将唯一 id 值生成到 solr 模式中的指定字段中，但没有成功。

因此，我创建了一个与 SolrJ 没有太大区别的简单注释机制，它保证了跨多个类的唯一性。这是通过组合对象类名称及其 id 来获得一种 UUID 来完成的，然后将其存储在 Solr 模式中。

我不确定我是否没有遗漏任何东西，所以我想知道上述工作解决方案是否适合我的情况，或者是否有任何更清洁/更好的替代方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T21:07:33.000

我认为这是一种有效的方法。我们正在对我们所在位置的多个索引进行类似的操作。例如，我们的数据库中有 4 种不同类型的项目，我们正在将它们加载到索引中的一个公共模式中，并且我们在数据库表 id 前加上该类型的前两个唯一字母以确保它是唯一的。

此外，IMO，在一个索引中索引多个不同类型确实是一种偏好，而不是如下链接所示的经验法则

*   [solr 中针对不同文档类型的单个模式与多个模式](https://stackoverflow.com/questions/13264580/single-schema-versus-multiple-schemas-in-solr-for-different-document-types)
*   [运行多个索引](http://wiki.apache.org/solr/MultipleIndexes?highlight=%28types%29%7C%28document%29%7C%28multiple%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T20:01:40.953

通常一个 POJO 将对应一个模式和一个 Solr 核心。我不确定您为什么要将不同的 POJO 索引到一个 Solr 核心中。

但是话虽如此，您的类名方法应该可以正常工作。否则，您可以`CLASS_ID`在每个类中声明一个静态字段，为不同的类保持不同，并通过连接 like 形成 Solr 文档 ID `id:CLASS_ID`。

# excel - Excel 2013 在 VBA 中打印为 PDF

> ID：15030180
> 
> 赞同：1
> 
> 时间：2013-02-22T17:45:33.167
> 
> 标签：excel, vba

似乎 Excel 2013 允许直接另存为 PDF 格式，如何使用 VBA 代码执行此操作？我想构建一个宏，它将自动从工作表创建 PDF（文件名作为字符串变量传递）。非常感谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:26:58.720

尝试

```
Dim fp As String
Dim wb As Workbook

fp = "C:\temp\foo.pdf"
Set wb = ActiveWorkbook

wb.ExportAsFixedFormat Type:=xlTypePDF, _
                       Filename:=fp, _
                       Quality:=xlQualityStandard, _
                       IncludeDocProperties:=True, _
                       IgnorePrintAreas:=False, _
                       OpenAfterPublish:=False 
```

*请注意，`ExportAFixedFormat`必须将其所有变量放在一行，否则将无法编译。
**请注意，“_”字符应该允许编译，而不是全部在一行上

# c++ - 比较列表迭代器 O(n) 吗？

> ID：15030181
> 
> 赞同：1
> 
> 时间：2013-02-22T17:45:35.573
> 
> 标签：c++

当我将 C++ 中的两个列表迭代器与 say 进行比较时`operator<`，我是否会获得 O(n) 性能，因为我们必须遍历整个列表以查看哪个迭代器在前面？

还是因为我的编译器做了一些聪明的事情而获得了 O(1) 的性能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T17:47:15.410

您会收到编译错误，因为`list`迭代器只是`BidirectionalIterator`s，因此不支持`operator<`.

# c# - 如果使用反射的参数名称和字段名称不同，如何检索参数的值？

> ID：15030190
> 
> 赞同：0
> 
> 时间：2013-02-22T17:46:19.033
> 
> 标签：c#, reflection, fieldinfo

如果参数名称和字段名称不同，如何检索参数的值？到目前为止，我已经研究了大约 2 天，但无法找到解决方案。任何帮助表示赞赏。我在下面提供了示例代码。

```
class Class1
{        
    public void method(string firstname, string lastname, out string name)
    {
        name = lastname + ", " + firstname;
    }
}

class Names
{
    public string First
    {
        get;
        set;
    }
    public string Last
    {
        get;
        set;
    }
}

class FullName
{
    public string Full
    {
        set;
        get;
    }
}
private void btnExecute_Click(object sender, EventArgs e)
{
        Class1 cls = new Class1();
        Names request = new Names();
        request.First = "Mohanraj";
        request.Last = "Devadoss";
        FullName response = new FullName();

        MethodInfo methodInfo = cls.GetType().GetMethod("method");
        ParameterInfo[] parameters = methodInfo.GetParameters();
        ParameterInfo returnParameter = methodInfo.ReturnParameter;
        var inputParameters = new object[parameters.Length];

        Type requestType = request.GetType();
        PropertyInfo[] properties = requestType.GetProperties(System.Reflection.BindingFlags.Public | System.Reflection.BindingFlags.Instance);
        object result = null;
        int count = 0;
        const BindingFlags bindingFlags = BindingFlags.Public | BindingFlags.Instance;

        foreach (ParameterInfo parameter in parameters)
        {
            PropertyInfo property = requestType.GetProperty(parameter.Name);
            FieldInfo field = requestType.GetField(parameter.Name);
            MemberInfo[] members = requestType.GetFields(bindingFlags).Cast<MemberInfo>().Concat(requestType.GetProperties(bindingFlags)).ToArray();

            object value = null;

            try { value = property.GetValue(request, null); }
            catch { value = null; }
            try
            {
                value = field.GetValue(request);
            }
            catch
            {
                value = null;
            }

            if (parameter.ParameterType.IsByRef)
            {
                value = null;
            }

            inputParameters[count] = value;
            count = count + 1;
        }

        result = methodInfo.Invoke(cls, inputParameters);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:10:57.623

您的代码有几处问题。

首先，您正在使用`requestType.GetProperty(parameter.Name)`. `parameter.Name`可以`firstname`是`lastname`或`name`。这永远不会等于`Names`类的属性之一，因此它将始终返回`null`。

然后，您将使用相同的语法来检索字段。但是，如果您执行以下代码：`requestType.GetFields(BindingFlags.Instance | BindingFlags.NonPublic)`，您会看到为您的自动属性生成了两个具有组成名称的支持字段。同时检索属性和支持字段是没有意义的。

真的有必要使用反射吗？您在编译时就知道所有的属性和方法。如果可能，请避免反思。

如果这不可能，您应该使用反射来获取属性。您可以通过将 parameter.Name 值映射到`Names`类的可能属性之一来做到这一点。就像是：

```
if (parameter.Name == "firstname")
{
    property = requestType.GetProperty("First", BindingFlags.Instance | BindingFlags.Public);
} 
```

# javascript - 为 indesign 导出的 .png 检索正确的长度和宽度

> ID：15030192
> 
> 赞同：2
> 
> 时间：2013-02-22T17:46:21.370
> 
> 标签：javascript, png, export, adobe-indesign, extendscript

我正在尝试编写一个javascript应用程序来输出indesign（CS5）中选定图像/组的长度和宽度，并将选择保存到.png文件中。问题是我使用选择的 visibleBounds 生成的长度和宽度与导出图像的长度和宽度略有不同。更具体地说，如果图像高度大于宽度，则生成的高度将与生成的 .png 的高度相同，但生成的宽度会略小一些。反之，如果宽度较大，生成的高度会略小。这是我一直在使用的代码：

```
dest = Folder.selectDialog('Save report');
selected = app.activeDocument.selection[0];
filer = new File (dest+'/'+'testImage.png');
h = selected.visibleBounds[2] - selected.visibleBounds[0];
w = selected.visibleBounds[3] - selected.visibleBounds[1];
alert('height: '+h+'\nwidth: '+w);
selected.exportFile(ExportFormat.PNG_FORMAT, filer, false); 
```

我还应该指出，这个问题只发生在相对较小的图像上。似乎图像越小，效果就越大。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:47:51.727

我也发现了这个问题，即使是完全相同的图像也会根据其在页面上的位置以不同的尺寸导出。我想问题在于 inDesign 在最低级别使用厘米或英寸，而不是像素。

然而，我最终解决这个问题的方法是在导出图像后将其放置在 inDesign 文档上，并检查宽度和高度以确保这两个值。**此解决方案仅在知道图像大小之后才有效，一旦它被导出**，我没有找到在导出之前知道大小的方法，因为有时大小会在没有任何明显原因的情况下发生变化：

```
selected.exportFile(ExportFormat.PNG_FORMAT, filer, false);
//These lines load the image into the document, check the size of the image file previously exported, and writes the correct measure into the XML file
var imageFile = File(filer);
var imageGraphic = app.activeDocument.pages.item(0).place(imageFile, null);
imageGraphicItem = imageGraphic[0];
var imageFrame = imageGraphicItem.parent;
var correctImageWidth = Math.round(imageFrame.visibleBounds[3]-imageFrame.visibleBounds[1]);
var correctImageHeight = Math.round(imageFrame.visibleBounds[2]-imageFrame.visibleBounds[0]);
//Do something
imageGraphicItem.parent.remove(); 
```

希望能帮助到你！

# java - 在 android 2.2 上使用 POST 的 HttpURLConnection 问题

> ID：15030201
> 
> 赞同：0
> 
> 时间：2013-02-22T17:47:19.420
> 
> 标签：java, android, httpurlconnection

我在 android 2.2 上执行一些 POST 请求时遇到一些问题，在较新的版本 4.0+ 中一切正常。我正在做的请求也是一个 https 请求。我总是收到 400 Bad 请求。这是我正在使用的代码：

```
public String postRequest(String myurl, String requestBody) throws IOException {
     try {
              //Create connection
              URL url = new URL(myurl);
              connection = (HttpURLConnection)url.openConnection();
              connection.setRequestMethod("POST");  

              for (Map.Entry<String, String> headerMap : httpHeaders.entrySet()) {
                  connection.setRequestProperty(headerMap.getKey(), headerMap.getValue());
                    Log.d("HttpRequest", " headers Key = " + headerMap.getKey() + ", Value = " + headerMap.getValue());
              }

              connection.setUseCaches (false);
              connection.setDoOutput(true);

              if(requestBody != null && requestBody.length() > 0) {
                  connection.setRequestProperty("Content-Length", "" + 
                           Integer.toString(requestBody.getBytes().length));

                  connection.setFixedLengthStreamingMode(requestBody.getBytes().length);
    //            connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");

    //            Log.v("RESPONSE MESSAGE", connection.getResponseMessage());
                  //Send request
                  OutputStream out = connection.getOutputStream();
                  out.write(requestBody.getBytes());
                  out.flush();
                  out.close();
                  Log.v("RESPONSE MESSAGE", myurl + " "+ connection.getResponseMessage());
              }

              int responseCode = connection.getResponseCode();
              Log.w("HttpRequest rponse code:", myurl+" - "+responseCode);
              if(responseCode == HttpURLConnection.HTTP_OK || responseCode == HttpURLConnection.HTTP_ACCEPTED) {
                  //    Get Response    
                  InputStream is = connection.getInputStream();
                  BufferedReader rd = new BufferedReader(new InputStreamReader(is));
                  String line;
                  StringBuffer response = new StringBuffer(); 
                  while((line = rd.readLine()) != null) {
                    response.append(line);
                    response.append('\r');
                  }
                  rd.close();

                  return response.toString();
              } else {
    //            System.setProperty("http.keepAlive", "false");
                  InputStream error = ((HttpURLConnection) connection).getErrorStream();
                  Log.e("HTTP error", "Error, request failed code: "+ responseCode + " "+connection.getResponseMessage() +" \n " + error);
                  return null;
              }

            } catch (Exception e) {

              e.printStackTrace();
              return null;

            } finally {

              if(connection != null) {
                connection.disconnect(); 
              }
            }   
} 
```

另外，我正在发布一个 xml 正文。

```
<SetAchievementsCompletedByConsoleSpecificKeyRESTXML xmlns='http://tempuri.org/'><platformActionKeys xmlns:ns='http://schemas.microsoft.com/2003/10/Serialization/Arrays'><ns:string>1</ns:string></platformActionKeys></SetAchievementsCompletedByConsoleSpecificKeyRESTXML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:52:36.707

我发现了我的问题。出于某种奇怪的原因。当用我的hearerMap 添加我的标题时，它添加了额外的空格。这更正了我的标题：

```
connection.setRequestProperty(headerMap.getKey().toString().replaceAll("\\s",""), headerMap.getValue().toString().replaceAll("\\s","")); 
```

# logging - 从 hadoop 控制台输出中删除调试日志

> ID：15030206
> 
> 赞同：3
> 
> 时间：2013-02-22T17:47:46.497
> 
> 标签：logging, hadoop, console, mapreduce, config

我想从我的 hadoop 控制台输出中删除调试消息。我已经设置了

```
 export HADOOP_ROOT_LOGGER=WARN,DRFA
 export HADOOP_JHS_LOGGER=WARN,DRFA 
```

在 hadoop-env.sh 文件和

```
hadoop.root.logger=WARN,console
hadoop.security.logger=WARN,console 
```

在 hadoop/bin 的 log4j.properties 文件中

目前，当我运行时 **`hadoop fs -lsr /directory/`** ，输出如下。我只想查看实际文件而不是所有调试/信息语句。谢谢。

```
12:03:58.408 [sendParams-0] DEBUG org.apache.hadoop.ipc.Client - IPC Client (47)     connection to ...
12:03:58.408 [IPC Client (47) connection to xxxxxx from xxxx]         DEBUG org.apache.hadoop.ipc.Client - IPC Client (47) connection to ...
12:03:58.408 [main] DEBUG org.apache.hadoop.ipc.RPC - Call: getListing 1
drwxr-xr-x   - abc supergroup          0 2013-02-21 18:01 /user/xxxx/res
12:03:58.409 [sendParams-0] DEBUG org.apache.hadoop.ipc.Client - IPC Client (47)      connection to xxxxxx/xxxxx from xxxx sending #13
12:03:58.410 [IPC Client (47) connection to xxxxxx/xxxxx from xxxx]     DEBUG org.apache.hadoop.ipc.Client - IPC Client (47) connection to      xxxxxx/xxxxxx from xxxx got value #13
12:03:58.410 [main] DEBUG org.apache.hadoop.ipc.RPC - Call: getListing 1
drwxr-xr-x   - xxxxx supergroup          0 2013-02-21 12:20 /user/xxxxx/rhipeTest
12:03:58.410 [sendParams-0] DEBUG org.apache.hadoop.ipc.Client - IPC Client (47)       connection to xxxxx/xxxx from tenglin sending #14
12:03:58.411 [IPC Client (47) connection to xxxxxx from xxxxx]        DEBUG org.apache.hadoop.ipc.Client - IPC Client (47) connection to        xxxxxx/xxxxxx from xxxxxxx got value #14
12:03:58.411 [main] DEBUG org.apache.hadoop.ipc.RPC - Call: getListing 1
-rw-r--r--   2 xxxxx supergroup       1229 2013-02-21 12:20        /user/xxxx/rhipeTest/ibm.n_1361467245357.dat
drwxr-xr-x   - xxxxx supergroup          0 2013-02-22 11:47 /user/xxxx/test
12:03:58.412 [sendParams-0] DEBUG org.apache.hadoop.ipc.Client - IPC Client (47)        connection to xxxx/xxxxx from tenglin sending #15
12:03:58.413 [IPC Client (47) connection to xxxx from xxxxx]         DEBUG org.apache.hadoop.ipc.Client - IPC Client (47) connection to          xxxxx/xxxxx from xxxxx got value #15
12:03:58.414 [main] DEBUG org.apache.hadoop.ipc.RPC - Call: getListing 2
-rw-r--r--   2 tenglin supergroup       5092 2013-02-22 11:47        /user/xxxxx/test/aa.us_1361551612607.dat
-rw-r--r--   2 tenglin supergroup       5125 2013-02-22 11:47 /user/xxxxx/test/aapl.q_1361551612607.dat
.... 
```

# google-maps-sdk-ios - Google Maps iOS SDK，更换相机时地图更新延迟

> ID：15030208
> 
> 赞同：3
> 
> 时间：2013-02-22T17:47:50.740
> 
> 标签：google-maps-sdk-ios

我有一个设置，我使用显示在 Google iOS SDK GMSMapView 上方的自定义覆盖视图。它在地图顶部提供丰富的内容和界面，并驱动其下方 GMSMapView 的当前相机和缩放级别。可以说 GMSMapView 为我的内容提供了背景。

我使用 GMSMapView -setCamera: 设置当前相机。

问题是 GMSMapView 似乎正在尝试优化其在系统上的负载。我的叠加层使用了许多核心动画层，当地图的相机发生变化时需要更新这些层。

当我的叠加层为“空”时，根据位置变化更新和重绘其状态很快，GMSMapView 更新几乎是即时的（有一个微小但可以接受的延迟）。

我的覆盖内容更新需要的时间越长，GMSMapView 在我调用 -setCamera 后等待更新到新相机的时间越长：

它似乎只是等到 CPU 空闲并进行更新。这导致我的叠加更新和地图更新之间的延迟越来越大。

有没有办法让相机立即更新，与调用 -setCamera: 同步？

谢谢马库斯

# zend-framework2 - Zend Framework 2 自定义验证器

> ID：15030213
> 
> 赞同：0
> 
> 时间：2013-02-22T17:48:28.743
> 
> 标签：zend-framework2

我通过扩展 Identical 并返回创建了我的自定义验证器：

```
!parent::isValid($value) 
```

我创建了自己的库`cb/Validator`并将其包含在包含路径中；但是，当我运行应用程序时，我收到一条错误消息：

> 未找到 cb\Validator\Identical 类。

有谁知道如何从您自己的库中访问主库中的类？

我的验证器如下：

```
<?php
namespace cb\Validator;
use Zend\Validator;

class NotIdentical extends Identical
{
    public function isValid($value)
    {
        return !parent::isValid($value);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:00:50.417

您可以使用 Zend 的 Identical 验证器的完全限定名称：

```
class NotIdentical extends \Zend\Validator\Identical 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:19:00.590

您的使用声明应如下所示：

`use Zend\Validator\Identical;`

您正在使用`use`语句而不是命名空间导入类。

# c# - 将项目绑定到列表框会垂直添加它们

> ID：15030216
> 
> 赞同：0
> 
> 时间：2013-02-22T17:48:39.053
> 
> 标签：c#, wpf, binding, listbox

我有个问题。当`Binding`项目到 a`ListBox`时，它会垂直添加它们。例如 where`ItemsSource = "{Binding Path = Name}"`和`Name`is `Bill`，我`ListBox`在线获取每个字符的输出（如下所示：B\ni\nl\nl）。我在哪里做错了？

XAML：

```
<Window x:Class="ObservableColl.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

    <Grid>
        <ListBox HorizontalAlignment="Left" Height="244" Margin="313,28,0,0" VerticalAlignment="Top" Width="177" ItemsSource="{Binding Path=Name}"/>
    </Grid>
</Window> 
```

C＃：

```
 class Customer
    {
        public string Name{get; set;}
    }

    class Customers
    {
        public ObservableCollection<Customer> customerOC{get; set;}
        public Customers()
        {
            customerOC = new ObservableCollection<Customer>();
        }
        public void AddCustomer(Customer c)
        {
             customerOC.Add(c);
        }
    }

public partial class MainWindow:Window
{
    Customers customers{get; set;}
    public MainWindow()
    {
        InitializeComponent();
        customers = new Customers();

        customers.AddCustomer(new Customer(){Name = "Frank"});

        this.DataContext = customers;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:10:30.860

您`DataContext`已设置为客户。`ItemsSource`应设置为`ObservableCollection`and用于显示客户的`DisplayMemberPath`正确属性。

```
<ListBox ItemsSource="{Binding customerOC}" DisplayMemberPath="Name" /> 
```

# jquery - IE 中的加载/事件触发顺序 - Magento

> ID：15030222
> 
> 赞同：1
> 
> 时间：2013-02-22T17:49:41.240
> 
> 标签：jquery, internet-explorer, magento, google-chrome, prototype

整个下午，

对，解释起来有点复杂，Magento 产品页面使用 Color Swatches 插件将可配置选项更改为图像，在 Chrome 中查看下面的链接可以正常工作；

[http://www.creare-scotty-3.co.uk/catalog/product/view/id/90/s/mens-t-shirt/category/237/?design=196&colour=94](http://www.creare-scotty-3.co.uk/catalog/product/view/id/90/s/mens-t-shirt/category/237/?design=196&colour=94)

加载此页面时会发生什么；

Magento 自动选择第一个可配置属性 (Size) 根据大小，Magento 重新加载颜色下拉菜单 Color Swatches 插件隐藏选择并创建图像 (Prototype) 颜色是从 URL 中的代码自动选择的 (Jquery) 颜色的选择会触发图像重新加载正确颜色的 T 恤。

但是，在 IE 中，一旦选择了大小，颜色就不会刷新，这意味着不会加载色样。为了解决这个问题，我点击了已经选择的尺寸选项。

这是我理解的极限，其他人可以看看，看看发生了什么？

谢谢，

# matlab - 从视频中提取轨迹/地面实况

> ID：15030224
> 
> 赞同：0
> 
> 时间：2013-02-22T17:49:49.373
> 
> 标签：matlab, video, extract, tracking, motion

是否有可以从视频记录中提取移动机器人轨迹的软件/工具箱？我的算法使用移动机器人来跟踪 U 形轨迹，我想从视频中标记/提取该轨迹。我使用固定摄像机观察机器人在室内环境中的运动。如果有可用的 Matlab 工具箱，我会更喜欢，但非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:03:20.160

在 r2012b 中，使用[VideoReader](http://www.mathworks.com/products/computer-vision/index.html)遍历电影，一次一帧。对于较旧版本的 Matlab，请使用[aviread()](http://www.mathworks.com/help/releases/R2009b/techdoc/ref/aviread.html)函数。

对于每一帧，调用[ginput()](http://www.mathworks.com/help/matlab/ref/ginput.html)以收集用户的图形输入。

```
myVideo = VideoReader('myRobotVideo.avi');
n = myVideo.NumberOfFrames;
x = nan(n,1);
y = nan(n,1);
for i = 1:n
  img = read(myVideo,i);
  imshow(img);
  [x(i),y(i)] = ginput();
end
disp([x,y]) 
```

这是一种用于快速注释计算机视觉基本事实的便捷技术。

或者，如果您没有工具箱，您可以使用[FFMPEG](http://www.ffmpeg.org/)等开源工具将视频转换为一系列 .png 图像，然后使用内置`imread()`函数遍历这些图像。

# html - 选择值后强制 FilteringSelect 失去焦点

> ID：15030225
> 
> 赞同：1
> 
> 时间：2013-02-22T17:49:52.917
> 
> 标签：html, widget, focus, dojo

我正在使用 Dojo 1.6。我有一个连接到数据存储的 FilteringSelect。我想在用户单击该字段时清空该字段，因此用户无需删除任何内容。我设法通过在焦点上将 textbox.value 设置为 "" 来做到这一点：

```
dojo.connect(sel, 'onFocus', function (value) {
    this.textbox.value = ""
}); 
```

我遇到的问题是，当用户在下拉列表中选择一个元素时，会触发 onChange，但控件不会失去焦点，因此下次用户尝试修改该值时，他需要手动清空该字段或单击在控件之外，然后在控件中单击返回。有什么办法可以强制控制失去焦点？

我在[http://jsfiddle.net/Jyvra/1/准备了一个样本](http://jsfiddle.net/Jyvra/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T19:13:24.007

您希望与之交互以实现此目的的 Widget 属性是`focusNode`. 任何获得焦点的小部件都会有这个，所以只需将此行添加到您的`onChange`处理程序：

```
this.focusNode.blur(); 
```

你会准备好的。[您可以在此处](http://jsfiddle.net/Jyvra/11/)添加该行来查看您的小提琴。

# perl - Perl 死于：“使用：DBD::Pg::db::DESTROY(dbh) 在全局销毁期间”

> ID：15030230
> 
> 赞同：3
> 
> 时间：2013-02-22T17:50:35.693
> 
> 标签：perl, postgresql, dbd, dbd-pg

一个稳定的、基于 Web 的、单线程/进程、在生产中运行的 perl 应用程序开始间歇性地抛出此错误，并且仅在系统负载较重的情况下。我们无法确定根本原因。

```
Usage: DBD::Pg::db::DESTROY(dbh) during global destruction 
```

任何人都可以对这个错误提供任何解释吗？当 Perl 在关闭之前进行清理时，在没有参数（self？）的情况下调用 DESTROY 时，它似乎从 Pg.sx 中抛出。（我通过 google 在较旧的源代码中看到该消息，但在我们的版本中没有。）我们的环境：

*   操作系统：FreeBSD 8.3-STABLE
*   Perl v5.14.2
*   DBD::Pg v2.19.3
*   PostgreSQL：v9.2.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T22:12:52.130

这是在黑暗中拍摄的。

DBI 数据库句柄通常像任何其他对象一样被销毁——当没有引用它们时。但是，事情可以防止手柄自然被破坏：

*   Handle 是一个全局包
*   句柄是 Perl 不能自动释放的循环引用的一部分

发生这种情况时，对象将作为“全局销毁”的一部分被销毁，这基本上只是取消定义所有内容并`DESTROY`实际上调用随机顺序。这可能是导致您的虚假错误的原因。

首先，您可以尝试在脚本的开头和结尾枚举您的数据库句柄，看看最后是否仍在使用。请参阅[此代码段](http://search.cpan.org/dist/DBI/DBI.pm#ChildHandles)：

```
sub show_child_handles {
    my ($h, $level) = @_;
    printf "%sh %s %s\n", $h->{Type}, "\t" x $level, $h;
    show_child_handles($_, $level + 1)
        for (grep { defined } @{$h->{ChildHandles}});
}

my %drivers = DBI->installed_drivers();
show_child_handles($_, 0) for (values %drivers); 
```

如果您不确定为什么该对象仍在使用中，您可以在一些大数据结构上使用[Devel::Cycle](http://search.cpan.org/perldoc?Devel%3a%3aCycle)来查找它们。

您可能还会发现 DBI 的[跟踪功能](http://search.cpan.org/dist/DBI/DBI.pm#TRACING)很有用。在运行脚本之前导出`DBI_TRACE=2`，每次创建或销毁句柄时都会记录下来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-11T08:26:53.343

就我而言，它是在升级服务器后开始发生的，因此它似乎是 PostgreSql/Perl/DBD 版本特定的错误。

这个错误突然开始在我没有明确销毁数据库句柄的所有脚本中抛出。添加`$dbx->disconnect()`解决了它。

更新：此解决方法仅修复了我的某些脚本中的错误。在其他情况下，当显式破坏数据库句柄时，错误也会持续存在。

# android - GCM：服务器端的多个应用程序 ID

> ID：15030233
> 
> 赞同：0
> 
> 时间：2013-02-22T17:50:42.783
> 
> 标签：android

在服务器端，我发现一台设备有多个注册 ID，这显然给我带来了很多问题。喜欢多次收到的消息。

我怎么能得到旧的注册 ID 的红色，或者如果有一个有效的注册 ID，则确保不会发生注册。

当我编写我的应用程序时，我按照 Android doc 上的示例教程如下：

```
checkNotNull(SERVER_URL, "SERVER_URL");
        checkNotNull(SENDER_ID, "SENDER_ID");
        // Make sure the device has the proper dependencies.
        GCMRegistrar.checkDevice(this);
        // Make sure the manifest was properly set - comment out this line
        // while developing the app, then uncomment it when it's ready.
        // NOT required any more GCMRegistrar.checkManifest(this);

        /**
         * this code to register reciver moved to message actvity
         */
        //registerReceiver(mHandleMessageReceiver, new IntentFilter(
        //      DISPLAY_MESSAGE_ACTION));

        /* final String */regId = GCMRegistrar.getRegistrationId(this);

        /**
         * save regId in pref to be used by Location update service
         */
        SavePreferences("regId", regId);

        if (regId.equals("")) {
            // Automatically registers application on startup.
            GCMRegistrar.register(this, SENDER_ID);
        } else {
            // Device is already registered on GCM, check server.
            if (GCMRegistrar.isRegisteredOnServer(this)) {
                ;;
                // Skips registration.
                // -- mDisplay.append(getString(R.string.already_registered) +
                // "\n");
            //  System.out.println(getString(R.string.already_registered)
                //      + "\n");

            } else {
                // Try to register again, but not in the UI thread.
                // It's also necessary to cancel the thread onDestroy(),
                // hence the use of AsyncTask instead of a raw thread.
                final Context context = this;
                mRegisterTask = new AsyncTask<Void, Void, Void>() {

                    @Override
                    protected Void doInBackground(Void... params) {
                        boolean registered = ServerUtilities.register(context,
                                regId);
                        // At this point all attempts to register with the app
                        // server failed, so we need to unregister the device
                        // from GCM - the app will try to register again when
                        // it is restarted. Note that GCM will send an
                        // unregistered callback upon completion, but
                        // GCMIntentService.onUnregistered() will ignore it.
                        if (!registered) {
                            GCMRegistrar.unregister(context);
                        }
                        return null;
                    }

                    @Override
                    protected void onPostExecute(Void result) {
                        mRegisterTask = null;
                    }

                };
                mRegisterTask.execute(null, null, null);
            }
        } 
```

编辑：注意，我可以在设备上接收消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:04:45.763

一时间，单个设备只有一个注册ID，不可能有多个ID。

当您第一次运行您的应用程序时，您将获得注册 ID，并且您必须将其注册到 GCM 注册器。否则消息将不会发送到您的设备。

在服务器端，您需要安全地保存此注册 ID，以便在您要发送消息时使用它。

您跟踪特定设备的注册 id 的问题：当您获得设备的注册 id 时，如果您正在使用，则将其保存在服务器数据库中，否则请保留它的数组。每当生成新的注册 id 时，删除前一个并添加新条目进入您的数据库。

# ruby-on-rails - 使用 rr 让出块

> ID：15030235
> 
> 赞同：1
> 
> 时间：2013-02-22T17:50:47.937
> 
> 标签：ruby-on-rails, ruby, rspec, rr

我正在尝试使用以下代码测试`rr`：

```
response = RestClient.get(url, {:params => params}){|response, request, result| response } 
```

在 vanilla`rspec`中，你会做这样的事情：

```
RestClient.should_receive(:get).with(url, {:params => params}).and_yield(response, request, result) 
```

我将如何做同样的事情`rr`？

设置：

```
let(:url) { "http://localhost/" }
let(:params) { {:item_id => 1234, :n => 5} }
let(:response) { Object.new }
let(:request) { Object.new }
let(:result) { Object.new } 
```

我尝试了很多变化：

```
mock(RestClient).get(url, {:params => params}) { response, request, result } 
```

和

```
mock(RestClient).get(url, {:params => params}, &proc/lambda{}).return(result) 
```

和

```
mock(RestClient).get(url, {:params => params}).yields(response, request, result) 
```

和

```
mock(RestClient).get(url, {:params => params}).returns do |proc_as_block|
  response
end 
```

但它们都不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:47:07.037

终于明白了。此拉取请求帮助：[https ://github.com/btakita/rr/pull/82](https://github.com/btakita/rr/pull/82)

```
mock(RestClient).get(url, {:params => params}).yields(response, request, result) { response } 
```

# php - 试图将大量 URL 查询插入 SQL

> ID：15030238
> 
> 赞同：0
> 
> 时间：2013-02-22T17:50:52.923
> 
> 标签：php, sql, database, forms

我查看了很多教程并在此网站上发布。

我被要求设计一个相当庞大的 php 表单，它将获取大量用户信息并插入数据库。

我希望把它分成很多页（可能是 4 或 5 页）。

我不是在寻找代码，而是在寻找最佳实践。

我在想**理论密码**

```
 > Show page one
    >>user inputs details
    >>>tempDatabaseTable takes info
    >>>>next page
    >>>>>.....
    >>>>>page5 (last page)
    >>>>>>when all information has been collected, query from tempDatabaseTable and insert         
    >>>>>>into relevant tables.
    >>>>>>>delete tempDatabaseTable 
```

我想知道，我知道我应该使用 $get 方法，所以信息不会显示在 URL 中，但是传输信息（数组、JSON）等的最佳方式是什么？

我只是启动 php 和 SQL ，但到目前为止一直通过 URL 使用数据，因为信息只能在本地网络上使用。

同样，这将是一个巨大的问题，（它的 9 个 a4 页）

请记住，许多字段将动态创建，因为用户可能需要更多行来回答某些问题，例如 - 你兄弟的名字。如果他们有兄弟，他们将单击添加更多按钮以动态创建新的表单字段。

任何好的 tuts 都会非常棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:13:42.643

你知道如何使用会话吗？

您可以考虑使用**会话数组**来存储信息。它将允许您保留每个页面的输入并在最后一页上一次查询所有内容。

注意：我不知道这是否是最佳实践，但我真的不知道在没有以下任何一种情况下将信息从页面移动到页面的更有效方法：

A：使用 $_GET（这通常不是一个好的选择）
B：将每个先前的 $_POST 附加到下一页的 $_POST 数组（如果用户来回弹跳可能会中断）

但是，如果您确实走这条路，请始终牢记安全风险，例如会话劫持。处理敏感信息时，如果可能，最好使用 https。

教程：[http](http://www.tizag.com/phpT/phpsessions.php)
://www.tizag.com/phpT/phpsessions.php 进一步阅读：[http ://www.php.net/manual/en/book.session.php](http://www.php.net/manual/en/book.session.php)

# php - 为 wordpress 图库短代码设置默认值

> ID：15030240
> 
> 赞同：0
> 
> 时间：2013-02-22T17:51:05.740
> 
> 标签：php, wordpress, shortcode

每当您在 wordpress 中创建新图库并将其添加到帖子中时，它都会添加适当的短代码。我遇到的问题是，默认情况下，单击“插入图库”之前选项中的“链接到”设置为“媒体文件”，但如果您保持原样，并将图库插入帖子，短代码实际上并不包含链接 =“媒体文件”部分，只有当我将鼠标悬停在图库上进行编辑并重新保存时，它才会添加链接 =“媒体文件”。

如果短代码中没有“链接”引用，则默认链接是图片的帖子 url，这是无用的。

我想这样做，如果没有设置“链接”，则 wordpress 默认添加链接 =“媒体文件”。

有谁知道如何将其注入短代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-17T11:29:03.160

试试这个：

1.) 导航到隐藏的 WordPress 选项页面。

```
http://yoursite.com/wp-admin/options.php
```

2.) 找到正确的选项

```
image_default_link_type
```

3.) 将选项更改为您想要的设置

```
空白的
文件
邮政

```

删除该字段中的任何文本会将“链接到”默认设置为“无”，从而插入没有任何链接的图像。

文件将默认更改为直接链接到图像文件，允许用户单击图像并在新的选项卡/窗口中查看它，可轻松下载。请注意，在我们的主题中，如果您打开了图像保护，即使您插入链接到文件的图像，该链接也将被删除。

Post 将链接到 WordPress 中的“附件页面”，该页面基本上是一个列出图像详细信息的页面，即标题、尺寸等。

在您输入（或删除）您希望作为站点新默认值的值后，只需滚动到页面底部并点击保存按钮。就是这样！

© [http://rawfolio.com/overriding-wordpress-default-attachment-link-to-setting/](http://rawfolio.com/overriding-wordpress-default-attachment-link-to-setting/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:55:10.870

您可能需要创建一个插件来删除当前的画廊简码并将其替换为自定义简码。好消息是您可以复制当前的短代码并添加您需要的代码。实际上在支持论坛上有一个例子：

[http://wordpress.org/support/topic/edit-gallery-shortcode](http://wordpress.org/support/topic/edit-gallery-shortcode)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T06:39:06.327

这是 Wordpress 3.5.1 中的一个小错误您可以在您的简码中手动添加参考链接 =“文件”[gallery 链接 =“文件”ids =“xx,xx,xx”]

或者当插入图库时，转到选项并将选择器从媒体文件切换到附件，然后返回媒体文件，它将自动插入。这是一个小错误。

# mysql - C#插入所有行还是不插入？

> ID：15030241
> 
> 赞同：0
> 
> 时间：2013-02-22T17:51:08.477
> 
> 标签：mysql, transactions, c#-2.0, rollback

我已经完成了简单的 My sql 事务。但是有没有办法通过 c# 进行交易？

**例子：**

*插入文件中的所有行或从不插入任何内容。*

在 c# 中是否有任何示例或说明可以做到这一点？我只通过参数化的 c# 语法执行了单个查询。写一个删除查询我认为是矫枉过正，不适合我的需要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:54:46.097

当然。

如果您在 MySQL 中使用实体框架，则 SaveChanges() 将在事务中执行。[它要么全部成功，要么全部失败（如果需要，您可以使用TransactionScope](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)更好地控制该方面）。

使用 ADO.Net，您可以使用此处概述的[TransactionScope ：](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)

[https://stackoverflow.com/a/3321030/141172](https://stackoverflow.com/a/3321030/141172)

TransactionScope 也适用于 DataTable

[http://www.codingbeaver.com/myblog/2010/02/19/update-datatable-in-transaction/](http://www.codingbeaver.com/myblog/2010/02/19/update-datatable-in-transaction/)

# vb.net - 如何通过vb.net将15位数字插入access数据库？

> ID：15030242
> 
> 赞同：-2
> 
> 时间：2013-02-22T17:51:16.103
> 
> 标签：vb.net, ms-access

我有这个疑问-

```
"insert into FROM_MASTER values('" & n & "'," & TextBox2.Text & ",'" & _
TextBox3.Text & "','" & TextBox4.Text & "'," & u & "," & k & "," & id & ")" 
```

以下是价值观-

```
"insert into FROM_MASTER values('22/02/2013',9999999999999,'ok','ok',9999999999999,1,1)" 
```

它给出了数据类型不匹配的异常。我将日期插入为字符串。所以，不管日期是什么。唯一的问题是那个长数字。请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T20:03:04.577

Microsoft Access Data Types 的最大数字是 LONG (4byte) ，你的数字 (9999999999999) 比它大，解决问题使用字符串。

# iis - 使用 WScript.Shell.Logevent 时出现“权限被拒绝”错误

> ID：15030243
> 
> 赞同：1
> 
> 时间：2013-02-22T17:51:21.927
> 
> 标签：iis, asp-classic, event-log

我的环境是经典 ASP。我想将一个事件记录到事件日志中（哪个并不重要）。我已经建立了一个快速测试（下面的代码）并不断收到“权限被拒绝”。

```
const SUCCESS = 0
const ERROR = 1
const WARNING = 2
const INFORMATION = 4
const AUDIT_SUCCESS = 8
const AUDIT_FAILURE = 16

dim WshShell
set WshShell = Server.CreateObject("WScript.Shell")
wshshell.Logevent WARNING, "Test Event Log by Windows Script Host!"
set wshshell=nothing
Response.write "Event Logged Successfully by Windows Script Host!" 
```

我在网上搜索了这个问题的解决方案，并找到了某种答案。不幸的是，他们的解决方案不起作用。他们说：

> 将以下注册表项设置为 0 而不是 1，然后重新启动计算机以使更改生效。HKLM\System\CurrentControlSet\Services\EventLog\Application 名称：RestrictGuestAccess 类型：REG_DWORD 注意：这使所有来宾帐户都可以写入应用程序事件日志。

有一个更好的方法吗？还是真正的解决方案？

本质上，我正在尝试将严重错误记录到某些 Windows 事件日志中，这将允许监控系统使用它们。

我的操作系统是使用 IIS 6.0 的 Windows Server 2003。

实际代码将在带有 IIS 7.5 的 Windows Server 2008 R2 上运行。

操作系统甚至 IIS Web 服务器是否重要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:44:07.723

不要费心使用经典的 ASP 和 COM 对象来做这件事。相反，构建一个 SQL 存储过程（2005 或更高版本）并使用 xp_logevent 记录到事件日志。

[您可以在http://msdn.microsoft.com/en-us/library/ms186244.aspx](http://msdn.microsoft.com/en-us/library/ms186244.aspx)查看如何执行此操作

一旦我实施了这种方法，一切都奏效了，我在 20 分钟的编码后离开了。

# c++ - C ++将字符串字母转换/转换为整数值（ASCII）

> ID：15030245
> 
> 赞同：2
> 
> 时间：2013-02-22T17:51:30.557
> 
> 标签：c++, string, integer, ascii, letters

我目前正在做一个项目，我需要创建两个用于包含字符串的数据结构。其中一个必须是链表的一种形式，并且我已经建议将单词分成每个字母表中的单独列表。我需要考虑效率，所以我有一个大小为 26 的 Head 指针数组，并且想将给定单词的第一个字符转换为整数，以便将其放入下标中，例如：

```
//a string called s is passed as a parameter to the function
int i = /*some magic happens here*/ s.substr(0, 1);
currentPointer = heads[i]; //then I start iterating through the list 
```

我一直在四处寻找，我似乎发现的只是如何将字符串中的数字字符转换为整数，而不是字母字符，我想知道我到底如何才能在不求助于巨大而丑陋的 if 语句集

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:59:22.473

我认为您将值与表示混淆了。“十”“10”和“1 1 1 1 1 1 1 1 1 1”都是相同的值，只是表示方式不同。

> 我一直在四处寻找，我似乎发现的只是如何将字符串中的数字字符转换为整数，而不是字母字符

没有区别。无论如何，字符总是由整数表示。这只是一个代表问题。只需以您想要的方式呈现价值。

顺便说一句，这是程序员必须理解的一个关键概念。因此，值得花一些时间考虑一下。

这种误解的一个典型例子是这样的问题：“我有一个`i`具有十进制值的变量。我怎样才能让它以十六进制存储一个值？” 当然这没有意义，它存储*值*，十六进制和十进制是*表示形式*。如果你有十辆汽车，你有十*辆汽车*，而不是十进制或十六进制。如果`i`值为 10，则*值为*10 `i`，而不是 10 的十进制或十六进制表示。

当然，当您*显示*存储在 中的*值*`i`时，您必须选择如何*表示*它。您可以将其显示为`ten`、 或`10`、`| | | | | | | | | | |`或其他任何内容。

你可能有一个字符串，它以十六进制*表示**值*“十”，你可能需要将该*值*分配给一个变量。这需要从表示转换为它所表示的值。

有输入和输出函数以各种*表示形式输入和输出**值*。

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T18:06:46.340

当您将 i 设置为第一个字符的值时，您将获得 ASCII 值。所以 i 不在你的 0-25 范围内：见 man ascii 你可以通过减去第一个 alaphabet ascii 字母来减少它。（请注意案件）

```
 std::string   s("zoro");
 int   i = s[0];

 std::cout << "Ascii value : " << i << " Reduced : " << i - 'a' << std::endl; 
```

正如预期的那样，这会产生 ASCII 值 'z' = 112 和 25 作为缩减值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T18:02:21.270

我怀疑您想将存储在字符串中的数字作为字符转换为整数，例如将字符`'9'`转换为整数`9`。

为此：

```
char c = '9';
int x = c - '0'; 
```

无论您的计算机是使用 ASCII 还是 EBCDIC，这都将起作用...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T18:00:34.307

在这种情况下，您似乎不需要`atoi`or `itoa`（例如，也不会做任何非常有用的事情`J`）。你只想要这样的东西：

```
int i = tolower(s[0])-'a'; 
```

从理论上讲，这不是可移植的——如果有可能在使用 EBCDIC 的机器（即 IBM 或兼容的大型机）上使用代码，你会想要使用类似`'z'-'a'`数组大小的东西，因为它不会t 正好是 26（EBCDIC 包括在一些字母之间插入的一些其他字符，因此这些字母是按顺序排列的，但不连续）。

可能更重要的是，如果您想支持英语以外的其他语言，事情会完全改变——您的字母数量可能与 26 个不同，它们可能并不都是连续的，等等。对于这种情况，您的基本设计是真的是问题。您可能需要几乎完全重新设计，而不是修复那一行代码。

然而，顺便说一句，链表很有可能在这里不是一个很好的选择。*

# mysql - CakeDC 用户 user_details 表

> ID：15030246
> 
> 赞同：0
> 
> 时间：2013-02-22T17:51:31.540
> 
> 标签：mysql, cakephp, plugins, cakedc

[CakeDC 用户](https://github.com/CakeDC/users)插件包括一个名为`user_details`. 起初我认为它就像表格`wp_postmeta`（WordPress）一样保存有关用户的额外信息。但是在检查了表格之后，它的字段比我预期的要多。好吧，如果我必须创建该表，我会使用更多。

```
mysql> describe user_details;
+-----------+--------------+------+-----+---------+-------+
| Field     | Type         | Null | Key | Default | Extra |
+-----------+--------------+------+-----+---------+-------+
| id        | varchar(36)  | NO   | PRI | NULL    |       |
| user_id   | varchar(36)  | NO   |     | NULL    |       |
| position  | float        | NO   |     | 1       |       |
| field     | varchar(255) | NO   | MUL | NULL    |       |
| value     | text         | YES  |     | NULL    |       |
| input     | varchar(16)  | NO   |     | NULL    |       |
| data_type | varchar(16)  | NO   |     | NULL    |       |
| label     | varchar(128) | NO   |     | NULL    |       |
| created   | datetime     | YES  |     | NULL    |       |
| modified  | datetime     | YES  |     | NULL    |       |
+-----------+--------------+------+-----+---------+-------+ 
```

任何人都可以点亮吗？

*   我可以将此表用作具有用户**无法**编辑/添加的值的元表，还是应该创建一个单独的表？
*   `position`, `input`, `label`, 这些字段是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T14:35:07.177

您可以使用该表，只是不在允许用户编辑和使用安全组件的表单中显示字段。

这些值应该是非常自我解释的：

*   位置说明了一切：它是字段的位置/顺序。
*   输入、输入类型、选择、文本、文本区域...
*   label，只是要显示的标签

但是，您是否使用这些字段来根据这些值生成输入字段取决于您。

该表被认为以动态方式存储任何类型的用户信息，实际上它就像 wp_postmeta。

# html - 如何使用 AngularJS 控制 HTML5 详细信息标签是否打开

> ID：15030247
> 
> 赞同：2
> 
> 时间：2013-02-22T17:51:31.880
> 
> 标签：html, angularjs, details-tag

[HTML 详细信息标签](http://www.w3schools.com/tags/tag_details.asp)是可折叠的内容块。您通过编写声明一个关闭（折叠）的详细信息标签

```
<details>Some stuff</details> 
```

和一个通过写作打开（扩展）的

```
<details open>Some stuff</details> 
```

我们如何`open`使用 Angular 从标签（在本例中特别是属性）中动态添加和删除属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T21:01:49.887

鉴于`<details>`许多浏览器不支持该标签，您可能需要考虑使用其他标签。 [这个链接](http://mathiasbynens.be/notes/html5-details-jquery)展示了如何创建一个等效`<details>`于所有主要浏览器的标签。

但除此之外，正如@Tim Withers 所说，您应该寻求构建一个允许您更改它的指令。具体取决于您希望添加/删除属性的确切方式和时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-18T21:01:13.833

你只需要像这样使用[ngOpen](https://docs.angularjs.org/api/ng/directive/ngOpen)：

```
<details ng-open="boolean"> 
```

# java - 如何在 JavaFX 2.2.6 中向 PopupControl 添加内容？

> ID：15030249
> 
> 赞同：4
> 
> 时间：2013-02-22T17:52:01.863
> 
> 标签：java, css, javafx-2

我想实现一个简单的弹出控件，它应该可以用 CSS 设置样式。一切正常，唯一的问题是如何向其中添加内容（JavaFX 中的节点）？

该`PopupWindow.getContent()`方法在 JavaFX 2.2.6 中已弃用，并且不适用于 CSS，我可以看到内容但 CSS 选择器将无法工作。

那么自己添加内容的最佳解决方案是什么，我应该为此目的实现自己的 Skin 类，还是有一种简单的方法让它工作？

我准备了一个简单的用例：

```
import javafx.scene.control.Label;
import javafx.scene.control.PopupControl;
import javafx.scene.layout.StackPane;
import javafx.scene.shape.Rectangle;

public class PopupTest extends PopupControl {
    public PopupTest() {
        getStyleClass().add("popup"); // not working!?

        StackPane pane = new StackPane();
        pane.getStyleClass().add("pane");
        Rectangle rectangle = new Rectangle(250, 250);
        rectangle.getStyleClass().add("rect");
        Label text = new Label("popup test");
        text.getStyleClass().add("text");
        pane.getChildren().addAll(rectangle, text);

        // how to display to pane when the popup is shown?
        getContent().addAll(pane);
    }
} 
```

为了完整起见，这里是我的 MainApplication 和 CSS 文件：

```
import javafx.application.Application;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.stage.Stage;

public class MainApplication extends Application {
    @Override
    public void start(Stage stage) throws Exception {
        Group root = new Group();
        final Scene scene = new Scene(root);
        scene.getStylesheets().add(MainApplication.class.getResource("style.css").toExternalForm());

        final Button button = new Button("show popup");
        button.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent event) {
                PopupTest popup = new PopupTest();
                popup.show(scene.getWindow());

            }
        });
        root.getChildren().add(button);

        stage.setScene(scene);
        stage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

样式.css：

```
.popup {
    -fx-font-size: 24px;
}

.popup .rect {
    -fx-fill: green;
}

.popup .text {
    -fx-text-fill: white;
    -fx-font-weight: bold;
} 
```

“.popup”选择器在这里不起作用，如果我将它设置为“窗格”，它将设置弹出窗口的样式，因此 css 是正确的`pane.getStyleClass().add("popup"); // working with this "fix"`：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-20T17:22:22.547

这似乎有效：

```
getScene().setRoot(pane); 
```

关于样式类不起作用：PopupControl 没有`getStylesheets()`方法。所以也许它只能直接被样式化`setStyle(...)`？您可以通过简单的样式`pane`或包装`pane`在根窗格中并对其进行样式来解决此问题。

# android - Galaxy tab/nexus 7 上 chrome/mozilla 中的视口、目标密度 dpi、像素比行为

> ID：15030252
> 
> 赞同：0
> 
> 时间：2013-02-22T17:52:17.903
> 
> 标签：android, css, google-chrome, dpi

<'meta name="viewport" content="width=device-width initial-scale=1.0, maximum-scale=1.0, target-densitydpi=..., user-scalable=0" />'
在不同的设备上测试和浏览器。两款平板电脑的物理分辨率均为 1280*800px。Galaxy Tab 10" Nexus 7 7"。

Chrome + device-dpi
galaxy：viewportwidth 1279px，像素比 1，screen.width 1280
nexus7：vp 1279px，pr 1.3312 ...，sw 1280

Chrome + high-dpi
galaxy：vp 1919px，pr 1，sw 1280
nexus7：vp 1441px , pr 1.3312..., sw 1280

Chrome + low-dpi
galaxy：vp 959px，pr 1，sw 1280
nexus7：vp 720px，pr 1.3312...，sw 1280

现在使用 Firefox (15/19) +
galaxy：vp 1280px , 公关未定义, sw 1280
nexus7 : vp 853px, pr 1, sw 1280

853px 是 1280 * 2/3。

现在将宽度属性更改为任何离散值，如 1280 并删除比例边界，两个平板电脑的视口都为 1280。将宽度留空或设置为“自动”，Vieport 会导致
星系：vp 980px，pr undefined，sw 1280
nexus7：vp 980 像素，公关 1，sw 1280

有人可以向我解释吗？Mozilla 不支持 target-densitydpi。所以它没有任何作用。我认为 18 之前的 Mozilla 版本中未定义像素比？1）mozilla 是在基于android 的nexus 上缩放2/3 还是mozilla 的“功能”？2) 980px 是从哪里来的？它与将“auto”设置为宽度相同。但是为什么两个设备的 viewport.width 都是 980 呢？W3C 的一些默认设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:53:34.360

980px was a figure that was chosen by Apple to create the viewport at so that it most of the web rendered reasonably on the iphone (which had a much smaller number of pixels at launch).

Unless you are targeting the Android Browser (which I would advise against), then target-density in the viewport is ignored and not used at all in all other browsers (from what I can tell). We certainly no longer support it in Chrome and you shouldn't include it or expect it to work. No one else support target-density in the viewport either and WebKit does not and will not continue to support it.

The `screen.width` reports a different value, which is a scaled value to the (1 / devicePixelRatio) * real physical width, so the nexus 7 is 800 pixels (real pixels in portrait) with a pixel density of 1.33 which equates 1/1.33 * 800 = 601 css pixels.

Each rendering engine is different in how it deals with viewports, but is getting more consistent. If Gecko doesn't have pixleRation then it is because they haven't implemented it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:39:56.103

[视口目标密度dpi 支持已被弃用](http://petelepage.com/blog/2013/02/viewport-target-densitydpi-support-is-being-deprecated/)

# json - 在 Silverlight 上使用 JSON WCF

> ID：15030256
> 
> 赞同：0
> 
> 时间：2013-02-22T17:52:45.860
> 
> 标签：json, wcf, silverlight

我想尝试更改 SOAP WCF 以接受请求并以 JSON 格式返回结果，以减少数据流量的庞大。

我看到 JSON 请求函数如下所示：

> wcfClient.OpenReadAsync( [http://yourUrl.com/wcf/service1.svc/GetEmployees](http://yourUrl.com/wcf/service1.svc/GetEmployees) )

并执行常规 SOAP 请求函数，而不是如下所示：

> wcfClient.GetEmployeesAsync();

1）对于JSON结果，是需要解析成对象还是像SOAP一样自动解析？

2) 有没有办法做到这一点而无需做太多工作，比如将项目中的每个 WCF 调用更改为看起来“JSON-ish”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T15:54:23.527

为了补充 Davut 的答案 - WCF 确实支持构建 RESTful 服务，尽管我同意[ASP.NET Web API](http://asp.net/webapi)框架通常比 WCF 更易于使用。JSON.NET 是一个很棒的库，它具有很好的反序列化功能（例如，它可以轻松地获取表示`Employee`对象列表的 JSON 并将它们转换为实际`List<Employee>`实例）

但是为了完整起见，如果您想使用“普通”WCF 客户端访问返回 JSON 的基于 WCF 的服务，您可以这样做。这不是太简单，但您可以通过使用新的编码器和执行转换的行为来做到这一点。[http://blogs.msdn.com/b/carlosfigueira/archive/2010/04/29/sumption-rest-json-services-in-silverlight-4.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2010/04/29/consuming-rest-json-services-in-silverlight-4.aspx)上的帖子对此进行了更多讨论，并提供了指向代码示例。

简而言之，可以在 Silverlight 中使用 WCF 客户端使用 JSON，但由于其复杂性，通常不会这样做，并且 Davut 的选项（使用 WebClient 等 HTTP 客户端下载 JSON，然后使用 JSON.NET 等库进行解析它变成对象）是首选。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T13:39:04.417

首先是“减少数据流量”的想法。很好。

特别是对于移动设备。除此之外，不要认为 WCF xml 会导致 PC 出现网络问题。XM 是最可压缩的格式之一。通过 WCF 二进制文件，它会被压缩。

**对于“有没有办法在不做太多工作的情况下做到这一点？”**

是的，上面有一个方式名称 RESTFul Services（Restless Services）。现在微软通过WEBApi直接支持了。

您也可以使用 ODATA 进行过滤、排序操作

这里有一些链接，

[http://msdn.microsoft.com/en-us/library/system.servicemodel.web.webgetattribute.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.web.webgetattribute.aspx)

[http://blogs.msdn.com/b/rjacobs/archive/2010/06/14/how-to-do-api-key-verification-for-rest-services-in-net-4.aspx](http://blogs.msdn.com/b/rjacobs/archive/2010/06/14/how-to-do-api-key-verification-for-rest-services-in-net-4.aspx)

ODATA [http://www.odata.org/documentation/uri-conventions#FilterSystemQueryOption](http://www.odata.org/documentation/uri-conventions#FilterSystemQueryOption)

一些练习笔记，一些限制：

从具有 IsReferenceType 属性的 EntityObject 派生的 EntityFrameWork 实体不允许您进行 JSON 序列化。（我使用自动映射器生成 POCO 对象并将它们映射并序列化 json）

WEBAPI 支持你想的很多如 WebGet,WebInvoke GetXML 提供 JSON ,ODATA 特性（只允许选择和格式化。）

注意：在您的 Web 请求的标头中，您应该接受 text/json 以获得真正的 json。

**“对于JSON结果，你需要将它们解析成一个对象还是......”**

我可以说你应该试试[JSON.NET](http://json.codeplex.com/)，它的可移植库无处不在。当您使用泛型函数反序列化时，它会返回您期望的集合。

希望它可以帮助某人。在发现这些 stackoverflow 时，我就像一个助手一样帮助了我。

# jquery - 父类“突出显示”上的Jquery单击事件

> ID：15030258
> 
> 赞同：0
> 
> 时间：2013-02-22T17:52:54.897
> 
> 标签：jquery, click

试图在“highlight”的父级上添加一个点击事件。正确添加和删除类，但单击事件在关闭 addClass 后停止。

```
$(function () {
    $(".open").click(function () {
        $('#rslide').animate({
            right: '-375px'
        }, 400);
        $(this).removeClass('open');
        $(this).addClass('close');
    });
    $(".close").click(function () {
        $('#rslide').animate({
            right: '0px'
        }, 400);
        $(this).removeClass('close');
        $(this).addClass('open');
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:58:39.540

当代码运行时，您的代码只会将事件绑定到*当前与选择器匹配的元素。*

您可以使用[“on”事件绑定](http://api.jquery.com/on/)将事件绑定到当时将匹配选择器*的*元素。

```
$("body").on("click", ".open", function(event) {
    $self = $(this);
    $('#rslide').animate({
        right: '-375px'
    }, 400);
    $self.removeClass('open');
    $self.addClass('close');
});

$("body").on("click", ".close", function(event) {
    $self = $(this);
    $('#rslide').animate({
        right: '0px'
    }, 400);
    $self.removeClass('close');
    $self.addClass('open');
}); 
```

我已放入`$(this)`一个变量以避免重复包装`this`在 jQuery 对象中，但您可以改为链式：`$(this).removeClass('close').addClass('open');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:00:44.950

**当您在相同元素**上使用这两个类时，您的代码是多余的，不需要“实时”事件

由于我们不使用“live”事件，jquery 将永远不会更新选择器所针对的元素，因此如果将来它们与原始选择器不匹配，则单击事件将继续对它们起作用

```
$(".open").click(function(){
    alert("click!");
}).removeClass("open"); 
```

对于您的特定情况，首先您需要一个用于所有元素的选择器，如果在开始时所有元素都已打开，则使用 $(".open") 如果它是 mixin，则使用 $(".open, .close")，并且当然必须有更好的选择器，例如 $("#parent > article") 只需检查您的 html 即可

在这里我们没有得到你的 html，所以我假设它是一个 mixin，$(".open, .close")

我们需要检查当前类并做了不同的动作，jquery get 函数来检查一个类

```
$(this).hasClass("open"); 
```

或者

```
$(this).is(".open"); 
```

=>

```
$(".open, .close").click(function(){
    var isOpen = $(this).hasClass("open");

    if(isOpen) alert("opened!"); else alert("closed!");
}); 
```

使用您当前的代码：

```
$(".open, .close").click(function(){
    var $t = $(this);
    var isOpen = $t.hasClass("open");

    if(isOpen){
        $('#rslide').animate({right:-375},400);
        $t.removeClass('open').addClass('close');
    } else {
        $('#rslide').animate({right:0},400);
        $t.removeClass('close').addClass('open');
    }
}); 
```

但它仍然是一些冗余代码，让我们更简化一下：

```
$(".open, .close").click(function(){
    var $t = $(this);
    var isOpen = $t.hasClass("open");
    $('#rslide').animate({right:(-375*isOpen)},400);
    $t.toggleClass('open').toggleClass('close');
}); 
```

toggleClass 肯定不是很好，必须先检查类，去掉试试

```
$(".open, .close").click(function(){
    var $t = $(this);
    var isOpen = $t.hasClass("open") * 1;
    var cls = ["open","close"];
    $('#rslide').animate({right:(-375*isOpen)},400);
    $t.removeClass(cls[!isOpen]).addClass(cls[isOpen]);
}); 
```

# oracle - 当我尝试从 JSP 建立与 DB 的连接时，出现错误“TNS：无法解析指定的连接标识符”

> ID：15030260
> 
> 赞同：0
> 
> 时间：2013-02-22T17:52:56.457
> 
> 标签：oracle, jsp, jdbc

当我尝试从 JSP 建立到远程数据库的连接时，我收到错误消息`TNS:could not resolve the connect identifier specified`

我已经配置了 ODBC 驱动程序并测试了连接，它工作正常。甚至数据库也运行良好。我面临的唯一问题是使用 JDBC 连接从 JSP 连接到远程数据库时。

还检查`TNSNAMES.ORA`并`SQLnet.ora`归档，它们很好。

请帮助我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T08:02:01.057

如果您使用 JDBC OCI 驱动程序，请验证您的 ORACLE_HOME 变量（以及 TNS_ADMIN 如果存在）并确保您可以使用 sqlplus 进行连接。
检查您的网址[http://docs.oracle.com/cd/E11882_01/java.112/e16548/urls.htm#BEIDBFDF](http://docs.oracle.com/cd/E11882_01/java.112/e16548/urls.htm#BEIDBFDF)

# python - Python 错误：unident 与任何外部标识级别都不匹配

> ID：15030261
> 
> 赞同：-6
> 
> 时间：2013-02-22T17:52:56.970
> 
> 标签：python, pygame

我的 pygame 代码有问题。

```
import pygame
from pygame.locals import *

ANCHO_MAPA = 800
ALTO_MAPA = 600
pos_x = 0

pygame.init()
screen = pygame.display.set_mode((ANCHO_MAPA, ALTO_MAPA))
pygame.display.set_caption("Gercho")

tile = pygame.image.load('ima/0.png').convert_alpha()

while True:
    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()

    for x in range(ALTO_MAPA):
        screen.blit(tile, (1, x))

    pygame.display.flip() 
```

当我尝试它时，我得到了这个错误。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:56:47.727

不要混合制表符和空格。

[PEP8](http://www.python.org/dev/peps/pep-0008/#tabs-or-spaces)

```
while True:
    for event in pygame.event.get():    # <- tabs
        if event.type == QUIT:
            pygame.quit()

    for x in range(ALTO_MAPA):          # <- spaces
        screen.blit(tile, (1, x))

    pygame.display.flip() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:59:42.293

检查是否有一致的缩进。最常见的问题是缩进和制表符的混合。

# python - 在 python 正则表达式搜索中返回任何匹配项的更好方法？

> ID：15030262
> 
> 赞同：1
> 
> 时间：2013-02-22T17:52:58.640
> 
> 标签：python, regex, search

我正在对两个条件`Profile`和`BuildDate`. 我想说明我会找到两个、一个或没有结果并返回尽可能多的信息的可能性。这是我的编写方式，但我想知道是否有更 Pythonic 的方式？

```
 p = re.search(r'Profile\t+(\w+)',s)
    d = re.search(r'BuildDate\t+([A-z0-9-]+)',s)

    # Return whatever you can find. 
    if p is None and d is None:
        return (None, None)
    elif p is None:
        return (None, d.group(1))
    elif d is None:
        return (p.group(1), None)
    else:
        return (p.group(1),d.group(1)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:55:45.653

```
p = re.search(r'Profile\t+(\w+)',s)
d = re.search(r'BuildDate\t+([A-z0-9-]+)',s)

return (p.group(1) if p is not None else None,
        d.group(1) if d is not None else None) 
```

也是这样：

```
return (p and p.group(1), d and d.group(1)) 
```

这不那么冗长，但有点模糊。

# ios - 导航控制器中的后退按钮到底是做什么的？

> ID：15030263
> 
> 赞同：1
> 
> 时间：2013-02-22T17:53:02.137
> 
> 标签：ios, uinavigationcontroller, uinavigationbar

有没有办法告诉导航控制器的后退按钮具体是做什么的？我知道它的作用，但在方法调用/函数等方面。

原因是我隐藏了导航栏，而是在视图上有一个按钮，只是想完全复制它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T18:13:28.887

如果要复制导航栏中的后退按钮功能，则需要在该按钮的操作中调用以下内容：

```
[self.navigationController popViewControllerAnimated:YES] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T18:15:41.067

在你的视图控制器中调用这个，当你的自定义后退按钮被点击时：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

这将弹出当前视图控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:20:52.293

这是返回按钮调用的 UINavigationController 方法：

```
- (UIViewController *)popViewControllerAnimated:(BOOL)animated 
```

因此，要复制它，只需在您弹出的 viewController 中执行类似的操作...

```
[self.navigationController popViewControllerAnimated:YES]; 
```

您可以通过继承 UINavigationController 并覆盖此方法来验证这*正是*后退按钮调用的方法 - 您将看到它在按下后退按钮时被调用（无需在您的应用程序中执行此操作 - 这只是你看看发生了什么！）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T18:10:51.540

如果您指的是 leftBarButtonItem 而不是内置的 backButton，那么它可以做任何您想做的事情。它不会自动关闭当前的视图控制器。您需要将选择器连接到 barButtonItem 以使其执行任何操作。当那个动作被触发时，你告诉它要做什么，无论是 pop、segue 还是几乎任何东西。

# android - 将事件注入 /dev/input/eventx 时，它会去哪里？

> ID：15030265
> 
> 赞同：0
> 
> 时间：2013-02-22T17:53:04.113
> 
> 标签：android, input, keyevent, inject, touch-event

我想我已经阅读了与我的查询相关的所有帖子，其中一些有所帮助，但我仍然找不到正确的方法。

我正在尝试开发一个必须将触摸事件注入系统的应用程序。正如我所读的，如果您没有系统签名，则无法使用“逻辑”方式，因此我们必须使用 /dev/input/eventX 来管理它。

话虽如此，我还附上了事件如何通过系统的照片：

[http://imageshack.us/f/201/eventosenandroid.png/](http://imageshack.us/f/201/eventosenandroid.png/)

所以我想确保我了解系统如何管理事件。

我的想法是：当您在 /dev/input/eventX 中注入一个触摸事件时，该事件的序列将完成到当前“在屏幕中”的活动中

我只需要确定我是否可以假设它确实像那样工作。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T00:15:19.837

你设法得到了那个地方？如果没有，你看过这里吗？

[Android INJECT_EVENTS 权限](https://stackoverflow.com/questions/5383401/android-inject-events-permission)

[http://developer.android.com/reference/android/Manifest.permission.html#INJECT_EVENTS](http://developer.android.com/reference/android/Manifest.permission.html#INJECT_EVENTS)

# jquery - Jquery获取点击文本下拉菜单引导

> ID：15030266
> 
> 赞同：0
> 
> 时间：2013-02-22T17:53:07.403
> 
> 标签：jquery, backbone.js, drop-down-menu, twitter-bootstrap

我正在使用 Bootstrap，我有以下下拉菜单：

```
<div class="btn-group">
        <a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#">
                 number of rooms
            <span class="caret"></span>
        </a>
        <ul class="dropdown-menu">
                <li>
                    <a href="#" >1</a>
                </li>
                <li>
                    <a href="#" >2</a>
                </li>
                <li>
                    <a href="#" >3</a>
                </li>
                <li>
                    <a href="#" >4</a>
                </li>
                <li>
                    <a href="#" >5</a>
                    </li>               
            </ul>
        </div> 
```

当我单击下拉菜单的条目时，我想获取选定的文本。我试过了 ：

```
$('.dropdown-menu :selected').text();
$('.dropdown-menu option:selected').text();
$('.dropdown-menu').find('option:selected').text();
$('.dropdown-menu li a').text(); //returns 12345
$('.dropdown-menu > .active').text();
... 
```

但它不起作用。我究竟做错了什么 ？谢谢

**编辑**事实上，我对 Javascript 完全陌生（我是一名 Java 开发人员）。我正在使用 Backbone 并希望拥有类似的东西：

```
window.RoomView = Backbone.View.extend({

events : {
    "click .dropdown-menu"       : "test"
}

test : function(){
//display selected text
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T17:55:07.173

这取决于您的意思是要在现有函数中获取文本，还是根本不需要：

```
$('.dropdown-menu a').click( function () {
    var text = $(this).text();
}); 
```

我不是骨干专家，但也许...

```
events : {
    "click .dropdown-menu a"       : "test"
}

test : function(){
    //display selected text
    var text = $(this).text();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:16:11.953

```
"click .dropdown-menu a"    : "displayRoomConfigForms"

displayRoomConfigForms: function(event){
  var text = $(event.currentTarget).text(); 
} 
```

做好了

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T17:55:54.997

就这样做吧。

```
$('.dropdown-menu li a').click(function() {
    alert($(this).text());
}); 
```

# prism - 棱镜：嵌套区域

> ID：15030268
> 
> 赞同：1
> 
> 时间：2013-02-22T17:53:15.547
> 
> 标签：prism, mef

我google了很多，但我没有找到确切的答案。我正在使用 Prism-Mef，我有嵌套在 RegionA 内的 RegionB 当我声明时：

```
IRegion regionB= regionManager.Regions[RegionNames.RegionB]; 
```

我得到了例外：

```
The region manager does not contain the RegionB region. 
```

*   1-我如何访问 RegionB 以向其添加视图，知道我会将其用作范围区域。

*   2-如果我有第三级嵌套：例如嵌套在 RegionB 内的 RegionC，如何使用 RegionC 添加视图

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:54:38.557

假设您创建了一个作用域区域管理器 - 您需要使用包含内部区域的视图的作用域区域管理器。

```
var scopedRegionManager = RegionManager.GetRegionManager(view);
var regionB = scopedRegionManager.Regions[RegionNames.RegionB]; 
```

# floating-point - 浮点单元的测试向量

> ID：15030274
> 
> 赞同：6
> 
> 时间：2013-02-22T17:53:35.433
> 
> 标签：floating-point, verification

我在 Verilog 中设计了一个 32 位单精度浮点乘法器和一个单独的加/减单元。

我在 MATLAB 中编写了一个脚本，它生成一堆随机浮点数并在 Verilog 中生成一个测试台。

我将 ncverilog 模拟的结果与 MATLAB 的结果进行了比较，并验证了我的乘法器工作正常，并且我的加法/减法器工作正常。

但是，我想知道对我的浮点单元进行压力测试的测试用例列表。有这样的清单吗？我知道一些程序，如 Softfloat，但它测试计算机的浮点，而不是能够将其与 verilog 测试台合并。

我还应该提到我的单元不支持上溢、下溢等异常，也不支持非规范化值。舍入模式是四舍五入到最接近。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T18:32:00.827

Tim 的回答是最好的，fpgen 套件：
[https ://www.research.ibm.com/cgi-bin/haifa/test_suite_download.pl?first=elenag&second=webmaster](https://www.research.ibm.com/cgi-bin/haifa/test_suite_download.pl?first=elenag&second=webmaster)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:51:44.567

FP 的规范 [已发布] 测试向量集来自 Jerome Coonen 的博士论文。它们可以从 IEEE 获得（在*磁带上*！），但我怀疑您可以通过一些搜索以更方便的格式找到它们。

# javascript - 隐藏字符串中的字符

> ID：15030280
> 
> 赞同：1
> 
> 时间：2013-02-22T17:53:56.547
> 
> 标签：javascript, google-apps-script, ascii

我想知道是否有办法在字符串中隐藏一串字符。我找到了用于隐藏这些字符的[控制字符：](http://en.wiktionary.org/wiki/Appendix%3aControl_characters)

```
>var hidden = "\26"
undefined
>hidden
""
>hidden.replace("\26","yolo");
"yolo"
>"".replace("\26","yolo");
"" 
```

但我想转义一串字符并让它们不会像这样显示：

```
>var hidden = "\26cantseethis\26"
undefined
>hidden
"" 
```

有没有使用 ASCII 字符的这种方法？

编辑：我想要做的是给谷歌文档状态。我有一个工作流类型的谷歌应用程序脚本附加到创建文档的表单上。管理员可以立即查看该文档，因此我不想在文档中放置一堆特殊字符串，例如 &UserOneAgreed，主要是因为有人可能会进入并修改该字符串。一旦收集到一些用户输入，我有另一个脚本将进入并修改相关文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:27:26.837

你不能这样做。控制字符只能用于字符，因此您需要分别转义每个字符以隐藏它们。

# javascript - 正则表达式用标签包围空白并替换它

> ID：15030281
> 
> 赞同：0
> 
> 时间：2013-02-22T17:53:57.543
> 
> 标签：javascript, regex

我有一些 javascript 会生成一个 html 字符串，然后将其传递给我无法控制的更多 javascript，其中所有空格都被折叠（不要问）。

我想通过将空格更改为字符（我一直在使用句点）并使用跨度将文本颜色设置为与背景相同来在此转换中保持我的空格。此文本无法突出显示，因此这是一个相当准确的空白替代品

我正在尝试开发一个正则表达式，它可以让我进行这样的转换

`"a b c"`-> `"a...bc"

`<span>.</span>` 我知道我可以通过简单地用这样的替换每个空格来处理简单的情况，`str.replace(/s/g,"<span class="whitespace">.</span>)` 但我真的更喜欢删除多余的标签并匹配每组空白，而不是为每个空格设置一个单独的跨度标签。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:16:15.707

我能够这样做：

```
var str=name.replace(/\s+/g,'<span class="whitespace">$&</span>');
str=str.replace(/\s/g,".");
return str; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:00:03.177

您是否尝试过将所有空格转换为`&nbsp;`?

```
str.replace(/\s/g,'&nbsp;') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:11:35.357

这个怎么样：三个步骤。

1.  匹配 3 个或更多的所有空格。替换“内部”空格。

    `/(?<=\s)\s+(?=\s)/./`

2.  匹配所有前面没有句点的单个空格。

    `/(?<!\.)\s/<span>./`

3.  匹配跨度后跟点。

    `/(<span>\.+)/$1<\/span>/`

（我的 regex-fu 只是棕色腰带，所以你可能需要调整一些逃逸等）。

# php - 使用 php 包含文件包含功能在我的系统上不起作用

> ID：15030282
> 
> 赞同：0
> 
> 时间：2013-02-22T17:54:02.863
> 
> 标签：php, function, include

我试图在代码中包含一个 php 文件

```
include "$_SERVER[DOCUMENT_ROOT]/inc/file.php"; 
```

我得到的错误是

```
Warning: include() [function include]: unable to access C:/wamp/www/inc/file.php on line 6
Warning include(C:/...... Failed to open stream no error. 
```

我尝试使用 require_once; 错误是一样的，我的 php 版本是 5.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:56:11.133

```
include dirname(__FILE__) . '/inc/file.php'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:57:22.053

用这个

```
include $_SERVER['DOCUMENT_ROOT'].'/inc/file.php'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:00:24.040

```
set_include_path(get_include_path() . PATH_SEPARATOR . $_SERVER[DOCUMENT_ROOT]/inc);
include "$_SERVER[DOCUMENT_ROOT]/inc/file.php"; 
```

# c# - 如何连接到工作组上的计算机？

> ID：15030284
> 
> 赞同：1
> 
> 时间：2013-02-22T17:54:09.930
> 
> 标签：c#

我正在尝试通过工作组连接到计算机。我的代码如下：

```
ConnectionOptions options = new ConnectionOptions();
options.Impersonation = ImpersonationLevel.Impersonate;
options.Username = "testusername";
options.Password = "testpwd";
ManagementScope scope = new ManagementScope(@"\\19x.16x.x.xx\C$\TestFolder", options);
scope.Connect();
if (scope.IsConnected == true)
{ 
    MessageBox.Show("Connection Succeeded", "Alert"); 
} 
else 
{
    MessageBox.Show("Connection Failed", "Alert");
} 
```

当我运行它时，我得到异常：“无效参数”

如何解决这个问题？

编辑：

错误在下面的这一行：

```
ManagementScope scope = new ManagementScope(@"\\19x.16x.x.xx\C$\TestFolder", options); 
```

我们如何指定驱动器？我认为 $ 是造成问题的原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:02:27.680

**更新**

根据用户的评论，OP 正在尝试做一些与问题所暗示的完全不同的事情。要以编程方式将文件从一个位置复制到另一个位置，可以使用[File.Copy](http://msdn.microsoft.com/en-us/library/c6cfw35a%28v=vs.100%29.aspx)：

`File.Copy(sourcePath, destinationPath)`

其中destinationPath 是有效的网络路径。通过网络，我建议使用 machineName 而不是 IP 地址。尤其是在 IP 地址更改可能性很高的 VPN 上。

`\\machineName\path\filename.csv`

# selenium-grid - Selenium Grid 演示失败

> ID：15030287
> 
> 赞同：0
> 
> 时间：2013-02-22T17:54:18.913
> 
> 标签：selenium-grid, demo

我在让 Selenium Grid 演示工作时遇到问题。我尝试按顺序运行测试，尽管它们运行它们都失败了，没有启动任何浏览器。我尝试使用 Firefox 和 Chrome 运行测试，两次都得到了相同的结果。

我按照此[页面](http://selenium-grid.seleniumhq.org/get_started.html)上的所有说明（开始）并安装了`Java jdk1.7.0_15`，`apache-ant-1.8.4`并且`selenium-grid-1.0.8`（这显然是当前[版本](http://selenium-grid.seleniumhq.org/download.html)，尽管我已经看到`Grid2`提到过？）。

我能够成功运行命令

> ant 完整性检查

并编译网格。然后我进入[演示页面](http://selenium-grid.seleniumhq.org/run_the_demo.html)：

> 蚂蚁发射中心

我可以在 localhost:4444/console 查看集线器

> 蚂蚁发射遥控器

我看到可用的浏览器出现在我的集线器上。

当我跑

> ant run-demo-in-sequence

可用的遥控器现在在集线器中显示为活动控件，并且测试运行但所有 4 个都失败了。Firefox 无法打开，而且我没有看到任何新的浏览器打开。

当我导航到`target/reports/index.html`页面（位于网格目录中）时，我能够找到以下错误，这对于每个失败的测试都是相同的：

> java.lang.RuntimeException：无法启动 Selenium 会话：错误：无法在 com.thoughtworks.selenium.DefaultSelenium.start(DefaultSelenium.java:89) 的 com.thoughtworks.selenium.grid.tools.ThreadSafeSeleniumSessionStorage 中检索新会话。 startSeleniumSession(ThreadSafeSeleniumSessionStorage.java:26) at com.thoughtworks.selenium.grid.demo.WebTestForASingleBrowser.domme(WebTestForASingleBrowser.java:51) at org.apache.tools.ant.taskdefs.ExecuteJava.run(ExecuteJava.java:217)在 org.apache.tools.ant.taskdefs.ExecuteJava.execute(ExecuteJava.java:152) 在 org.apache.tools.ant.taskdefs.Java.run(Java.java:771) 在 org.apache.tools.ant .taskdefs.Java.executeJava(Java.java:221) 在 org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:135) 在 org.apache.tools.ant.taskdefs.Java.execute(Java .java：108) 在 org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106) 在 org.apache.tools.ant 的 org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291) .Task.perform(Task.java:348) 在 org.apache.tools.ant.Target.execute(Target.java:392) 在 org.apache.tools.ant.Target.performTasks(Target.java:413) 在org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399) 在 org.apache.tools.ant.Project.executeTarget(Project.java:1368) 在 org.apache.tools.ant.helper.DefaultExecutor。 executeTargets(DefaultExecutor.java:41) at org.apache.tools.ant.Project.executeTargets(Project.java:1251) at org.apache.tools.ant.Main.runBuild(Main.java:811) at org.apache .tools.ant.Main.startAnt(Main.java:217) 在 org.apache.tools.ant.launch.Launcher.run(Launcher.java:280) 在 org.apache.tools.ant.launch.Launcher.main(Launcher.java:109) 原因：com.thoughtworks.selenium.SeleniumException：错误：无法在 com.thoughtworks.selenium.HttpCommandProcessor.throwAssertionFailureExceptionOrError(HttpCommandProcessor. java:97) 在 com.thoughtworks.selenium.HttpCommandProcessor.doCommand(HttpCommandProcessor.java:91) 在 com.thoughtworks.selenium.HttpCommandProcessor.getString(HttpCommandProcessor.java:262) 在 com.thoughtworks.selenium.HttpCommandProcessor.start(HttpCommandProcessor .java:223) 在 com.thoughtworks.selenium.DefaultSelenium.start(DefaultSelenium.java:81) ... 50 更多 ... 删除了 29 个堆栈帧thinkworks.selenium.HttpCommandProcessor.throwAssertionFailureExceptionOrError(HttpCommandProcessor.java:97) at com.thoughtworks.selenium.HttpCommandProcessor.doCommand(HttpCommandProcessor.java:91) at com.thoughtworks.selenium.HttpCommandProcessor.getString(HttpCommandProcessor.java:262) at com .thoughtworks.selenium.HttpCommandProcessor.start(HttpCommandProcessor.java:223) at com.thoughtworks.selenium.DefaultSelenium.start(DefaultSelenium.java:81) ... 50 更多 ... 删除了 29 个堆栈帧thinkworks.selenium.HttpCommandProcessor.throwAssertionFailureExceptionOrError(HttpCommandProcessor.java:97) at com.thoughtworks.selenium.HttpCommandProcessor.doCommand(HttpCommandProcessor.java:91) at com.thoughtworks.selenium.HttpCommandProcessor.getString(HttpCommandProcessor.java:262) at com .thoughtworks.selenium.HttpCommandProcessor.start(HttpCommandProcessor.java:223) at com.thoughtworks.selenium.DefaultSelenium.start(DefaultSelenium.java:81) ... 50 更多 ... 删除了 29 个堆栈帧com.thoughtworks.selenium.DefaultSelenium.start(DefaultSelenium.java:81) 上的 HttpCommandProcessor.start(HttpCommandProcessor.java:223) ... 50 多个 ... 删除了 29 个堆栈帧com.thoughtworks.selenium.DefaultSelenium.start(DefaultSelenium.java:81) 上的 HttpCommandProcessor.start(HttpCommandProcessor.java:223) ... 50 多个 ... 删除了 29 个堆栈帧

而我启动测试的 CMD 窗口中的输出显示为：

```
run-demo-in-sequence:
     [java] [Parser] Running:
     [java]   Selenium Grid Demo In Sequence
     [java]
     [java]
     [java] ===============================================
     [java] Selenium Grid Demo In Sequence
     [java] Total tests run: 4, Failures: 4, Skips: 0
     [java] ===============================================
     [java]

BUILD FAILED
C:\Program Files\selenium-grid-1.0.8-bin\selenium-grid-1.0.8\build.xml:116: Java
 returned: 1

Total time: 1 minute 33 seconds 
```

我的`Firefox`版本是`18.0.2`. 另外，我已经看到 Selenium-standalone .. 在其他类似问题中提到过，但在我正在关注的教程中的任何地方都没有提到，我需要吗？

谁能帮助让演示工作并解释我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:17:14.020

Selenium Grid 1.x 不再处于开发阶段。您应该使用此处提到的 Grid 2.0 - [https://code.google.com/p/selenium/wiki/Grid2](https://code.google.com/p/selenium/wiki/Grid2)

您收到此错误是因为 1.08 jar 不支持最新版本的 firefox。

# javascript - 看不到“保存到磁盘”按钮

> ID：15030293
> 
> 赞同：0
> 
> 时间：2013-02-22T17:54:39.823
> 
> 标签：javascript, downloadify

我试图在我的网页上包含 downloadify javascript+flash 插件，但不知何故“保存到磁盘”按钮不可见。

工作演示： http: [//pixelgraphics.us/downloadify/test.html](http://pixelgraphics.us/downloadify/test.html)

我的页面：[http ://www.javaexperience.com/Feedback/index.html](http://www.javaexperience.com/Feedback/index.html)

有人可以指出我可能会错过的东西吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:30:52.127

我猜您通往`swf`or`image`资产的路径是错误的。

从 github 页面：

```
swf: ‘media/downloadify.swf’ Required 
Path to the SWF File. Can be relative from the page, or an absolute path.

downloadImage: ‘images/download.png’ Required 
Path to the Button Image. Can be relative from the page or an absolute path. 
```

您的示例完全复制了这些路径的工作示例。

你的：

```
media/downloadify.swf
queue_name=downloadify_1361560979222&width=100&height=30&downloadImage=images/download.png 
```

他们的：

```
media/downloadify.swf
queue_name=downloadify_1361561050132&width=100&height=30&downloadImage=images/download.png 
```

我敢打赌，这些资产不在您服务器上的同一位置。否则，您的下载对象就在那里并且应该可以工作。

# c# - EF 代码优先和虚拟属性

> ID：15030295
> 
> 赞同：0
> 
> 时间：2013-02-22T17:54:53.457
> 
> 标签：c#, asp.net, ef-code-first, entity-framework-5

我有两个表`Articles`，`Events`我想为这两种类型的用户提供评论功能。困难的部分是我想使用一个导航属性来返回属于给定 EF 对象的注释。

```
public class Article
{
    public virtual ICollection<Comment> Comments { get; set; }
    /* more properties here */
}

public class Event
{
    public virtual ICollection<Comment> Comments { get; set; }
    /* more properties here */
}

public class Comment
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int CommentId { get; set; }
    public string Msg { get; set; }
    public DateTime SentAt { get; set; }

    public int TargetId { get; set; }
    public CommentTargeType TargetType { get; set; }
}

public enum CommentTargeType
{
    Article,
    Event
} 
```

如您所见，the`TargetId`将是 the`Article`或the 的 id，`Event`而 the`TargetType`是区分这两种类型的。那么，有没有办法做到这一点？或者创建一个 ArticleComments 和一个 EventComments 类型会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:03:55.470

您当前的设计本质上是使用对象中的相同字段作为 2 个表的外键。我建议不要这样做，因为数据库将无法强制任何约束或进行完整性检查。

您可以添加两个`int?`字段，一个称为 ArticleId，另一个称为 EventId 来完成您想要的。由于类型是`int?`它们将是数据库中的可为空字段。

我什至会更进一步并使用该`ForeignKey`属性，以便 EntityFramework 知道这一点并为您创建外键。

```
[ForeignKey("Article")]
public int? ArticleId { ... }
public virtual Article Article { get; set; }

[ForeignKey("Event")]
public int? EventId { get; set; }
public virtual Event Event { get; set; } 
```

# wpf - 双显示器中的 ShowHelp

> ID：15030296
> 
> 赞同：-1
> 
> 时间：2013-02-22T17:54:54.237
> 
> 标签：wpf, helper, multiple-monitors

我想知道如何在第二台显示器上打开帮助。我正在使用 Help.ShowHelp(null, path, TopicId, index) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:46:10.383

您不能修改 ShowHelp-Methode 以显示在第二个屏幕上。如果您需要更多控制以显示您必须自己实施的帮助。我能想到的唯一可能的解决方案是通过其进程 ID 获取帮助窗口并使用 user32.dll 重新定位它，但这不是一个非常简洁的解决方案。

```
[DllImport("user32.dll")]
private static extern bool SetWindowPos(IntPtr hWnd, IntPtr hAfter, int x, int y, int cx, int cy, int flags); 
```

# vim - Vim 语法匹配

> ID：15030297
> 
> 赞同：1
> 
> 时间：2013-02-22T17:55:01.330
> 
> 标签：vim, vim-syntax-highlighting

我正在为我们在 VIM 中使用的专有 C 扩展实现语法高亮。
语法是这样的：

```
int __event(foobar) my_foobar_function()
{
    //whatever
    if(foobar)
        // do something
} 
```

现在我想做的是突出显示 `__event(foobar)`，所以我写了这个：

```
syn region xREG start=/__event(/ end=/)/ contains=xFOO
syn keyword xFOO foobar contained

hi xREG ctermfg=darkblue
hi xFOO ctermfg=cyan 
```

这会`__event()`正确突出显示，但是 foobar 中的`if(foobar)`也会突出显示。

我的问题是如何限制 xFOO 组仅在 xREG 中突出显示，而在其他任何地方都没有。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:25:05.080

当您扩展现有语法（如*C*）时，您需要考虑现有语法项。以下行 from`syntax/c.vim`导致通过以下方式包含您的`xFOO`组`ALLBUT=`：

```
syn region  cParen      transparent start='(' end=')' end='}'me=s-1 contains=ALLBUT,cBlock,@cParenGroup,cCppParen,cErrInBracket,cCppBracket,cCppString,@Spell 
```

幸运的是，它提供了一个扩展点：您必须将您的组添加到`@cParenGroup`集群中：

```
syn cluster cParenGroup add=xFoo 
```

这应该够了吧！

# svn - svn: E160013: File not found: revision 21602, path 'XXX' SVN Log Query

> ID：15030298
> 
> 赞同：10
> 
> 时间：2013-02-22T17:55:03.097
> 
> 标签：svn, command, slik

我正在尝试查询 SVN 日志以获取功能分支的 XML 输出，以使用 SlikSVN cmd 行包含两个日期之间的所有修订。我收到上面的错误`"svn: E160013: File not found: revision 21602, path 'XXX'".`当我浏览到它不存在的路径中的位置时，如果我通过 SVN 登录 tortoise 进行搜索，我找不到修订版 21602。这是查询：

```
svn log --xml PATH -v -r {2012-09-25}:{2013-02-22} > XXX.xml 
```

我厌倦了以下运行：

```
svn log --xml PATH -v -r 21603:{2013-02-22} > XXX.xml 
```

并且除了修订版“21603”之外返回相同的错误，即使我可以看到它存在于乌龟日志中。

我以前对许多功能分支运行过完全相同的查询，但从未遇到过这个问题。我尝试在树干上运行它，这被作为测试切断，我得到了相同类型的错误。顺便说一句，修订是指从未存在的分支根目录中的文件夹和文件（上面概述的错误消息中的 XXX）。非常感谢您对此提供一些帮助，因为我已经用尽所有可用资源来了解这里发生了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-08T10:24:11.733

首先，如果要查询当前工作副本中不再存在的文件，则需要提供 SVN 存储库位置的完整路径，例如，`http://svn/repo/trunk/src/myfile`而不是`src/myfile`.

其次，如果它被删除了，它不会仅仅通过使用来显示`-r <rev>`- 您需要提供一个*peg revision*，即标识在什么时间点（即在哪个修订）Subversion 应该查找指定路径的修订。然后它将使用它在指定路径的该修订中找到的对象来执行所有请求的操作。

最后，如果操作版本范围（即您提供的`-r`选项）包括指定路径不再存在的版本，Subversion 将再次抱怨找不到该文件。

有关挂钩修订的更多信息，请查看此链接：[http ://svnbook.red-bean.com/en/1.6/svn.advanced.pegrevs.html](http://svnbook.red-bean.com/en/1.6/svn.advanced.pegrevs.html)

对于您的查询，请尝试

```
svn log --xml FULLPATH@REV -v -r {2012-09-25}:LASTREV > XXX.xml 
```

where`FULLPATH`是完整的存储库路径，`REV`是存在该路径的任何修订版，并且`LASTREV`是存储库中存在文件/文件夹的最后一个修订版。

# asp.net-mvc - 如何删除查询字符串 asp.net mvc 中的空参数

> ID：15030301
> 
> 赞同：3
> 
> 时间：2013-02-22T17:55:19.063
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, query-string

所以，我有一个接受字符串和对象的方法，该对象具有 MVC 转换为查询字符串参数的值，我的问题是我在哪里以及如何摆脱空参数，这样我的 url 更清晰。

形式：

```
 @using (@Html.BeginForm("Index", "ControllerName", FormMethod.Get, 
    new { enctype = "multipart/form-data", id = "form2" }))

   //Should I do a check in here for null values before getting the request? 
```

路由链接：

```
 routes.MapRoute
        (
            "Default",
            "{controller}/{action}/{id}",
            new {controller = "Home", action =        "Index", id = UrlParameter.Optional }
        ); 
```

班级：

```
class formModel{

 public string name {get;set;}
 public int? age {get;set;}
 public Guid? jobId{get;set;}
 public string Fullname {get;set;}

 } 
```

对象属性：

```
 formModel{
                  name: "Mike",
                  age: 29,
                  jobId: null,
                  Fullname: ""
              } 
```

控制器动作：

```
 [HttpGet]
    public ActionResult Index(string sortByText, SearchFormModel formModel)
    {
        var model = new SomeViewModel();
        model.FormModel = formModel;
        //etc

        return View(model);
    } 
```

网址：

例如：[http ://www.domain.com/mycontroller?name=Mike&age=29&jobId=&Fullname=&Find=Find](http://www.domain.com/mycontroller?name=Mike&age=29&jobId=&Fullname=&Find=Find)

我怎样才能摆脱 jobId 和 Fullname 和 Find？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T04:34:34.190

我最终使用客户端 javascript 过滤表单数据，从而避免了任何不必要的或空的查询参数。

# android - android中的调用块

> ID：15030302
> 
> 赞同：0
> 
> 时间：2013-02-22T17:55:25.400
> 
> 标签：android, telephony, callblocking

我正面临 android 呼叫阻止选项的问题。我正在制作一个应用程序，我想在其中为用户提供阻止不需要的呼叫。我已经用谷歌搜索了它，但找到了一个在我的情况下不起作用的解决方案。我想补充一点，我正在用我的模拟器尝试这个 - 模拟器呼叫服务。我的一个模拟器的编号是 15555215556，另一个是 15555215554。请帮我写代码。我在这里发布我遇到的错误。

```
02-22 23:44:05.769: E/BroadcastReceiver(377): BroadcastReceiver trying to return result during a non-ordered broadcast
02-22 23:44:05.769: E/BroadcastReceiver(377): java.lang.RuntimeException: BroadcastReceiver trying to return result during a non-ordered broadcast
02-22 23:44:05.769: E/BroadcastReceiver(377):   at android.content.BroadcastReceiver.checkSynchronousHint(BroadcastReceiver.java:451)
02-22 23:44:05.769: E/BroadcastReceiver(377):   at android.content.BroadcastReceiver.setResultData(BroadcastReceiver.java:266)
02-22 23:44:05.769: E/BroadcastReceiver(377):   at com.example.CallReceiver.onReceive(CallReceiver.java:33)
02-22 23:44:05.769: E/BroadcastReceiver(377):   at android.app.ActivityThread.handleReceiver(ActivityThread.java:1794)
02-22 23:44:05.769: E/BroadcastReceiver(377):   at android.app.ActivityThread.access$2400(ActivityThread.java:117)
02-22 23:44:05.769: E/BroadcastReceiver(377):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:981)
02-22 23:44:05.769: E/BroadcastReceiver(377):   at android.os.Handler.dispatchMessage(Handler.java:99)
02-22 23:44:05.769: E/BroadcastReceiver(377):   at android.os.Looper.loop(Looper.java:123)
02-22 23:44:05.769: E/BroadcastReceiver(377):   at android.app.ActivityThread.main(ActivityThread.java:3683)
02-22 23:44:05.769: E/BroadcastReceiver(377):   at java.lang.reflect.Method.invokeNative(Native Method)
02-22 23:44:05.769: E/BroadcastReceiver(377):   at java.lang.reflect.Method.invoke(Method.java:507)
02-22 23:44:05.769: E/BroadcastReceiver(377):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-22 23:44:05.769: E/BroadcastReceiver(377):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-22 23:44:05.769: E/BroadcastReceiver(377):   at dalvik.system.NativeStart.main(Native Method) 
```

这是我的代码：

```
package com.example;

import java.lang.reflect.Method;
import com.android.internal.telephony.ITelephony;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.TelephonyManager;
import android.util.Log;

public class CallReceiver extends BroadcastReceiver{

      private String incomingnumber;

      @Override
      public void onReceive(Context context, Intent intent) {
            String s[]={"15555215554","15555215556"};
            Bundle b = intent.getExtras();
            incomingnumber = b.getString(TelephonyManager.EXTRA_INCOMING_NUMBER);
            //
            try {

                  TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
                  Class c = Class.forName(tm.getClass().getName());
                  Method m = c.getDeclaredMethod("getITelephony");
                  m.setAccessible(true);
                  com.android.internal.telephony.ITelephony telephonyService = (ITelephony) m.invoke(tm);  

                  for (int i = 0; i < s.length; i++) {
                        if(s[i].equals(incomingnumber)){
                            //  telephonyService.endCall();

                              Log.e("incoming:",incomingnumber);

                        }
                  }

            }
            catch (Exception e) {
                  // TODO: handle exception
                e.printStackTrace();
                 Log.e("incoming:","hide");
            }
      }
} 
```

电话接口：

```
package com.android.internal.telephony;

public interface ITelephony
{

      boolean endCall();
      void answerRingingCall();

} 
```

我只提供了一种使用许可，即： `<uses-permission android:name="android.permission.READ_PHONE_STATE" />`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:02:49.757

我认为你应该添加这个：

```
 <uses-permission android:name="android.permission.CALL_PHONE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-15T09:18:59.413

```
 in on Receive 

incomingnumber = intent.getStringExtra(TelephonyManager.EXTRA_INCOMING_NUMBER);

    for(String number : s){
if(number.equals(incomingnumber))
//call the method
disconnectPhoneItelephony();
}

        write a method like 

        public void disconnectPhoneItelephony() {      
                ITelephony telephonyService;
                TelephonyManager telephony = (TelephonyManager)
                        context.getSystemService(Context.TELEPHONY_SERVICE);
                try {
                    Class c = Class.forName(telephony.getClass().getName());
                    Method m = c.getDeclaredMethod("getITelephony");
                    m.setAccessible(true);
                    SessionManager.getInstance(context).setBlockStatusAllow("BLOCKED");
                    telephonyService = (ITelephony) m.invoke(telephony);
                    //telephonyService.silenceRinger();
                    telephonyService.endCall();
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

// Add permission in Manifest Register Receiver and give nessasary permissions

<receiver android:name="..CallReceiver">
            <intent-filter>                
                <action android:name="android.intent.action.PHONE_STATE"/>
            </intent-filter>
        </receiver> 
```

# php - session_set_save_handler 不工作

> ID：15030303
> 
> 赞同：1
> 
> 时间：2013-02-22T17:55:27.387
> 
> 标签：php, wordpress, session-set-save-handler

我一直在尝试使用 session_set_save_handler() 设置保存会话，但我不知道出了什么问题，我有所有可调用的函数，但是出了点问题，在这里我发布了我的代码。顺便说一句，我在 WP 工作。

```
 <?php 
$root = dirname(dirname(dirname(dirname(__FILE__))));
if (file_exists($root.'/wp-load.php')) {
    require_once($root.'/wp-load.php');
}
if (file_exists($root.'/wp-config.php')) {
    require_once($root.'/wp-config.php');
}

global $wpdb;

//function called when session_start();
function _open() {
    print "Session opened.\n";
    print "</br>";
    return true;
}

//called at the end of the page
function _close() {
    print "</br>";
    print "Session closed.\n";
    print "</br>";
    return true;
}

//function called after session_start();
function _read($session_id) {
    global $wpdb;

    $session_id = mysql_real_escape_string($session_id);
    $record = $wpdb->get_var( "SELECT data FROM sessions_gm WHERE id='$session_id'");
    print "SELECT data FROM sessions_gm WHERE id='$session_id'";

    print "Session READ.\n";
    print "</br>";
    print "El record:".$record;

     if($record)
    return $record;

    return '';
}

function _write($session_id, $data) {
    global $wpdb;
    $access = time();
    $session_id = mysql_real_escape_string($session_id);
    $access = mysql_real_escape_string($access);
    $data = mysql_real_escape_string($data);

    $session = $wpdb->get_row("SELECT * FROM sessions_gm WHERE id = '$session_id'");

    print "SELECT * FROM sessions_gm WHERE id = '$session_id'";
    print "La session:";
    print_r($session);

    print "</br>";
    print "Session value written.\n";
    print "</br>";
    print "Sess_ID: $session_id\n";
    print "</br>";
    print "Data: $data\n\n";
    print "</br>";

    if($session == null)
    {
        $insert = $wpdb->insert( 
        'sessions_gm', 
        array( 
        'id' => $session_id, 
        'access' => $access,
        'data' => $data
        ), 
        array( 
        '%s', 
        '%d', 
        '%s'
        ) 
        );

        if($insert!=false)
        {
            print "Se inserto.";
            return true;
        }
    }
    else
    {
        $update = $wpdb->update( 
            'sessions_gm', 
            array( 
            'access' => $access,    // string
            'data' => $data // integer (number) 
            ), 
            array( 'id' => $session_id ), 
            array( 
            '%d',   // value1
            '%s'    // value2
            ), 
            array( '%s' ) 
        );

        if($update!=false)
        {
            print "Se updateo.";
            return true;
        }
    }

    return false;
}

// called when session_destroy();
function _destroy($session_id) {
    global $wpdb;
    $session_id = mysql_real_escape_string($session_id);
    print "</br>";
    print "Session destroy called.\n";
    print "</br>";
    $delete=$wpdb->query( "DELETE FROM sessions_gm WHERE id = '$session_id'");
    if($delete!=false)
    {
        print "Se elimino";
        return true;
    }
    return false;
}

function _gc($maxlifetime) {
    print "</br>";
    print "Session garbage collection called.\n";
    print "</br>";
    print "Sess_maxlifetime: $maxlifetime\n";
    print "</br>";
   $old = time() - $max;
   $old = mysql_real_escape_string($old);
   $delete=$wpdb->query( "DELETE FROM sessions_gm WHERE access < '$old'");

     if($delete!=false)
    {
        print "Se elimino las pasadas.";
        return true;
    }
    return false;
}

var_dump(is_callable("_open"));
var_dump(is_callable("_close"));
var_dump(is_callable("_read"));
var_dump(is_callable("_write"));
var_dump(is_callable("_destroy"));
var_dump(is_callable("_gc"));

if (session_set_save_handler("_open", "_close", "_read", "_write", "_destroy", "_gc")) {
    die('Works fine');
}
else {
    die('Couldn\'t set session handler');
} 

session_set_save_handler("_open", "_close", "_read", "_write", "_destroy", "_gc");
session_start();

$_SESSION['Username'] = 'clau';  
print_r($_SESSION);?> 
```

因此，出于某种原因，如果：

```
 if (session_set_save_handler("_open", "_close", "_read", "_write", "_destroy", "_gc")) {
    die('Works fine');
}
else {
    die('Couldn\'t set session handler');} 
```

它正在返回无法设置会话处理程序。谢谢您的帮助！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:59:41.907

在设置处理程序之前尝试添加`session_write_close()`函数：

```
session_write_close();

if (session_set_save_handler("_open", "_close", "_read", "_write", "_destroy", "_gc")) {
    die('Works fine');
} else {
    die('Couldn\'t set session handler');
} 
```

看起来会话已经开始了。然后重新初始化：

```
session_start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-18T18:50:54.830

首先，这是错误的

```
if (session_set_save_handler("_open", "_close", "_read", "_write", "_destroy", "_gc")) {
    die('Works fine');
} else {
    die('Couldn\'t set session handler');
} 
```

因为当你调用 die(...); 未`session_start();`触发且会话未开始。

其次，你的方法很混乱，试试这个例子：

```
class session extends SessionHandler { 

        protected $users;
        protected $emailshadow = null; 

        public function setNewUsers(Users $users){

            $this->users = clone $users;

            if(!$this->emailshadow)$this->emailshadow = $users->getShadowEmail();

            return true;

        }

        public function destroy($sessID) { 

            $this->users->setLogout($this->emailshadow);

            return true; 

        } 

        public function gc($sessMaxLifeTime) { 

            $this->users->setLogout($this->emailshadow);

            return true;

        } 
    } 

    $usersession = new session(); 

    session_set_save_handler($usersession,true);

    session_name("op-session");
    session_start(); 
```

好的，在这个例子中，我使用我编写的用户类进行用户登录，在这种情况下，当

```
session_destroy(); 
```

触发它设置用户注销，但最重要的是，当您触发注销时，请写下：

```
$_SESSION = array();
session_destroy();

if (isset($_SERVER['HTTP_COOKIE'])) {

    $cookies = explode(';', $_SERVER['HTTP_COOKIE']);
     foreach($cookies as $cookie) {

       $parts = explode('=', $cookie);
       $name = trim($parts[0]);

       setcookie($name, '', -(time()+3600*24));
       setcookie($name, '', -(time()+3600*24), '/');

    }

} 
```

因为如果您不删除所有 cookie，则此会话仍然有效。这对我来说很好，我希望这对你有帮助，并原谅我的英语。

# javascript - 灯箱离线工作但不在线

> ID：15030304
> 
> 赞同：1
> 
> 时间：2013-02-22T17:55:29.300
> 
> 标签：javascript, jquery, html, lightbox, offline

我的灯箱画廊在离线状态下工作得很好，但我刚刚将它上传到网上，它根本不工作，点击图片只会带你到一个新页面。

这是页面... www.jevonz.co.uk/portfolio.html

文件路径似乎很好，我什至从本地托管 jquery 切换到使用 google 托管的，但都无济于事。任何帮助将非常感激。干杯!

如果提供更多信息，这是页面的代码。

```
<!doctype html>
<!--[if lt IE 7]> <html class="ie6 oldie"> <![endif]-->
<!--[if IE 7]>    <html class="ie7 oldie"> <![endif]-->
<!--[if IE 8]>    <html class="ie8 oldie"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="">
<!--<![endif]-->
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Untitled Document</title>
<link href="boilerplate.css" rel="stylesheet" type="text/css">
<link href="Jevonz.css" rel="stylesheet" type="text/css">
<link href="jquery-lightbox-0.5/css/jquery.lightbox-0.5.css" rel="stylesheet"   type="text/css">
<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<script src="respond.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="jquery-lightbox-0.5/js/jquery.lightbox-0.5.js">      </script>
</head>
<body>
<div class="gridContainer clearfix">
<div id="LayoutDiv1" align="center">
  <img src="images/JevonzHeader.jpg"/>
</div><!-- end LayoutDiv1 -->

<div id="Navigation" align="center">
  <ul id="nav">
      <li><a href="index.html">Home</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="portfolio.html">Portfolio</a></li>
      <li><a href="shop.html">Shop</a></li>
      <li><a href="contact.html">Contact</a></li>
   </ul>
</div> 
  <!-- end Navigation -->

 <div id="galleria" align="center">

  <a href="images/gallery/bio.JPG" rel="lightbox" title="Bio Luminesence"><img src="images/gallery/Thumbnails/bio_thumb.jpg" width="200" height="200" alt="Bioluminescence" /></a>
  <a href="images/gallery/blueRobotLarge.jpg" rel="lightbox"><img src="images/gallery/Thumbnails/blueRobot_thumb.jpg" width="200" height="200" alt="" /></a>
  <a href="images/gallery/DeepSea.JPG" rel="lightbox"><img src="images/gallery/Thumbnails/DeepSea_thumb.jpg" width="200" height="200" alt="" /></a>
  <a href="images/gallery/DiD.JPG" rel="lightbox"><img src="images/gallery/Thumbnails/DiD_thumb.jpg" width="200" height="200" alt="" /></a>
  <a href="images/gallery/EscapeLife.JPG" rel="lightbox"><img src="images/gallery/Thumbnails/EscapeLife_thumb.jpg" width="200" height="200" alt="" /></a>
  <a href="images/gallery/GorillaLarge.jpg" rel="lightbox"><img src="images/gallery/Thumbnails/GorillaLarge_thumb.jpg" width="200" height="200" alt="" /></a>
  <a href="images/gallery/LifeRobot.jpg" rel="lightbox"><img src="images/gallery/Thumbnails/LifeRobot_thumb.jpg" width="200" height="200" alt="" /></a>
  <a href="images/gallery/LureDeep.jpg" rel="lightbox"><img src="images/gallery/Thumbnails/LureDeep_thumb.jpg" width="200" height="200" alt="" /></a>
  <a href="images/gallery/TangledFamily.JPG" rel="lightbox"><img src="images/gallery/Thumbnails/TangledFamily_thumb.jpg" width="200" height="200" alt="" /></a>
  <a href="images/gallery/WorldBelow.JPG" rel="lightbox"><img src="images/gallery/Thumbnails/WorldBelow_thumb.jpg" width="200" height="200" alt="" /></a>

<script type="text/javascript">
$(function() {
// Use this example, or...
$('a[@rel*=lightbox]').lightBox(); // Select all links that contains lightbox in the  attribute rel

});
</script>

 </div>

</div> 
<!-- end gridContainer -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:58:36.297

您在灯箱文件上收到 403 Forbidden 错误，我在 firebug 中发布了 Net 面板的屏幕截图：

[http://cl.ly/image/2m461v012M1i](http://cl.ly/image/2m461v012M1i)

检查该文件夹的权限并确保网络服务器可以读取该文件夹及其内容。

# android - 如何为特定语言的随机网站在 Android 中为 Webview 提供自定义字体支持？

> ID：15030306
> 
> 赞同：0
> 
> 时间：2013-02-22T17:55:32.453
> 
> 标签：android, fonts, webview

我想为Android webview添加某些字体支持，因此当用户访问使用该字体的网站时，显示字体而不是框。我检查了整个堆栈溢出，但他们对存储在其中的网站有答案资产或带有 CSS 的特定站点。在这里，我无法控制网站，只有 webview。有什么办法可以使我们使用 tff 文件提供的 android webview 支持语言？还有一件事，它一定与系统无关，而只是在应用程序内部。也有人问了同样的问题，但没有答案，所以想再问一次。提前感谢

# python - 带有 Adwords API 的 Python 2.7：ImportError: cannot import name AdWordsClient

> ID：15030307
> 
> 赞同：1
> 
> 时间：2013-02-22T17:55:32.963
> 
> 标签：python, google-ads-api

当我尝试在 Windws 7 中使用带有 Python 2.7 的 Adwords API 时出现以下错误： ImportError: cannot import name AdWordsClient

使用以下代码（我从谷歌示例中获得）：

```
import os
import sys
sys.path.insert(0, os.path.join('..', '..', '..', '..', '..'))

# Import appropriate classes from the client library.
from adspygoogle import AdWordsClient
from adspygoogle.common import Utils 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T18:37:19.753

已经解决了。只需在代码开头添加以下行：

```
import fpconst 
```

# ios - NSCache、图片发布、异步队列

> ID：15030308
> 
> 赞同：0
> 
> 时间：2013-02-22T17:55:38.403
> 
> 标签：ios, interface, nsstring, selector

这应该在我的任何给定表格行中显示一个占位符，除非存在该索引路径的图像。当我向下滚动时，前一个 indexPath 中的图像会加载默认值而不是释放。我知道以前有人帮助我解决了同样的问题，但这是在我意识到缓存图像的重要性之前。在我的 customCell 方法中，我将 UIImage 属性设置为 strong，并为 viewDidUnload 释放图像。

```
NSString *imagename = [_imageCache objectForKey:indexPath];
UIImage *preview = [_imageCache objectForKey:imagename];

if (preview)
{
    [[cell myImageView] setImage:preview];
}
else
{
    [[cell myImageView] setImage:[UIImage imageNamed:@"CellLogo.png"]];

            dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);
            dispatch_async(queue, ^{

             //   __block UIImage *preview = nil;               
               UIImage *preview = [UIImage imageWithData:object.iG];
              //             }
         if (preview)
         {
                dispatch_async(dispatch_get_main_queue(), ^{

                 //   if (cell)
                    [[cell myImageView] setImage:preview];

                });
             [_imageCache setObject:preview forKey:imagename];
         }
            });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:04:43.420

正如错误消息所述，您尚未`imageFilename:`在代码中的任何地方声明。默认情况下没有这样的方法，如果您希望可以在当前类中以该名称定义方法：

```
- (NSString *)imageFilename:(NSIndexpath *)indexpath {
  //code here
} 
```

如果您已经在其他地方使用过它，则需要导入该特定类并调用此方法，因为该类的对象`NSString *imagename = [myobject imageFilename:indexPath];`在哪里。`myobject`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T19:18:07.490

查找“单元重用”。您需要在 UITableViewCell 子类中实现 -prepareForReuse。它应该将图像重置为占位符或空白图像。

# excel - 使用 vbscript 中的不同值对特定列应用自动过滤器

> ID：15030309
> 
> 赞同：0
> 
> 时间：2013-02-22T17:55:44.500
> 
> 标签：excel, vbscript, autofilter

文件夹中有一些 excel。每个 excel 都遵循相同的模板。每张表中都有一个“K”列。此列包含一些代码（这些代码可以是不同的或重复的）。我正在尝试对这些值应用自动过滤器和想要将每个不同的代码保存在一个单独的 excel 文件中。（例如，如果一个 excel 文件的代码为 15478、15478 和 17832，那么将有一个具有两个代码 15478 的 excel 文件，并且将有第二个具有 17832 的 excel 文件。）并且我必须对文件夹中存在的每个 excel 文件执行此操作。

```
strPath="C:\Testr"
Set objExcel= CreateObject("Excel.Application")
objExcel.Visible= True

Const xlUp= -4162

'To store every excel sheet column values in array
Dim a(), val

Set objFso = CreateObject("Scripting.FileSystemObject")
Set objFolder = objFso.GetFolder (strPath)

'To pick out the only distinct values from array
 Set objDict= CreateObject("Scripting.Dictionary")
 objDict.CompareMode = vbTextCompare

'Searching for xls files
For Each objFile In objFolder.Files
If objFso.GetExtensionName(objFile.Path) = "xls" Then
    objExcel.Workbooks.Open(objFile.Path)

    'Counting all the used rows
    With objExcel.Activeworkbook.Sheets("PAAF")
    rowcount=.Range("A" & .Rows.Count).End(xlUp).Row-2

    msgbox rowcount
    End With

    'dynamic array
    Redim Preserve a(rowcount)

    'Collecting distinct values in dictionary object
    for i=7 to rowcount
        a(i-7) = objExcel.Activeworkbook.Sheets("PAAF").Cells(i,11).Value
    objDict(a(i-7)) = a(i-7)

    Next

    n = objDict.Items

    REM The problem is here, though i am able to get unique values,
     REM but these values are getting processed for every excel because 
     REM the loop is starting for 0 .Ex- if one sheet is having code 19873,
     REM it will get processed for second sheet also whether it is present that 
     REM or not.

    For i=0 to ubound(n)
    msgbox n(i)

With objExcel.Activeworkbook.Sheets("PAAF")

    'Passing dictionary stored values to apply autofilter on    
    .Range("K6").AutoFilter 11,"="& n(i)

End With

fn=objFso.GetFileName(objFile.Path)
objExcel.Activeworkbook.saveAs("C:\Test2\"&"Output"& fn &i &".xls")

Next 
```

有没有其他方法可以从数组中获取不同的值以对这些值应用过滤器？我尽力解释我的问题，但如果有任何不清楚的地方请告诉我......！ [Excel工作表模板](http://i.stack.imgur.com/pfzIW.jpg)

# maven - Maven依赖排除似乎不起作用

> ID：15030317
> 
> 赞同：8
> 
> 时间：2013-02-22T17:55:56.107
> 
> 标签：maven

我有一个依赖于其他几个 Maven 项目的 Maven 项目。我在我的项目中使用 Spring 3.1.1，依赖项目有 3.0.6。我试图在部署时排除 Spring 3.0.6，因为两者都不可能。为此，我在我的 POM 中添加了一个明确的排除项，但由于某种原因，`WEB-INF/lib`当我启动 Tomcat 服务器时，我仍然在文件夹中看到旧版本的 spring core jars。有人可以指出我哪里出错了。这是我的`pom.xml`：

```
<project>
   ....
<properties>
    <org.springframework-version>3.1.1.RELEASE</org.springframework-version>
</properties>
<dependency> 
        <groupId>com.test.abc</groupId> 
        <artifactId>abc</artifactId>
         <version>1.0</version>
         <type>war</type>
        <exclusions>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-core</artifactId>
             </exclusion>
        </exclusions>            
      </dependency> 
          <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${org.springframework-version}</version>
        <exclusions>
            <!-- Exclude Commons Logging in favor of SLF4j -->
            <exclusion>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
             </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-oxm</artifactId>
        <version>3.0.4.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.ws</groupId>
        <artifactId>spring-xml</artifactId>
        <version>1.0-m2</version>
    </dependency>
        ....    
       </project> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T00:24:46.473

您的依赖类型是战争，因此这里没有解决方案。Maven 将战争内容覆盖在您的项目上。

当战争发布到存储库时，工件将在 WEB-INF lib 文件夹中包含依赖库。在覆盖期间，除非您告诉它以不同的方式排除，否则它不会将 lib 文件夹与任何静态资源区别对待。[在此处检查“覆盖”属性](http://maven.apache.org/plugins/maven-war-plugin/overlays.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-09T09:03:27.217

就我而言，我认为我排除了正确的依赖。使用 eclipse，在依赖层次结构选项卡上，您可以右键单击它并单击排除工件，它排除了正确的依赖项（它们都有相同的 artifactId 但不同的 groupId）

# jquery - Chrome 以不同的方式处理 z 索引、位置固定元素。是什么原因？

> ID：15030321
> 
> 赞同：0
> 
> 时间：2013-02-22T17:56:14.437
> 
> 标签：jquery, google-chrome, webkit, z-index, fixed

好吧，我正在处理一些代码，其中 chrome 忽略了两个固定元素的 z-index，而我希望落后于另一个元素的元素不起作用。

我创建了这个小提琴： http: [//jsfiddle.net/stev0205/4nbL9/](http://jsfiddle.net/stev0205/4nbL9/)以独立于我的其他项目进行测试，以找出问题所在，但这（使用完全相同的 js、css 和 html）不会复制我的问题，它的行为正是我想要的。

这是js：

```
$(window).scroll(function() {

$("#topFixed").css({
    top: "0px",
    left: "0px",
    width: "100%",
    position: "fixed",
    marginTop: "0px"
});

$(".fixedCol").each(function() {
    var topLoc = $(this).parent().offset().top -             $(window).scrollTop();
    var leftLoc = $(this).parent().offset().left;
    $(this).css({
        top: topLoc,
        left: leftLoc,
        position: "fixed"
    });
});
}); 
```

问题是当我在我的项目中实现它时，问题仍然存在。

任何人都可以阐明什么可以打破这个小提琴？通过“中断”，我的意思是让绿色元素在灰色条的前面滚动，而不是在它后面。

感谢您的任何尝试和破译我疯狂的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-24T03:43:49.667

大家好。我最终弄清楚了我的问题并解决了它，但我忘记了这个悬而未决的问题，并认为有人可能会发现这个问题并遇到与我相同的问题。

所以答案与所谓的“堆叠顺序”和“堆叠上下文”有关。

这篇文章：[http](http://philipwalton.com/articles/what-no-one-told-you-about-z-index/) ://philipwalton.com/articles/what-no-one-told-you-about-z-index/很好地解释了它。

总结（并破解）这篇文章：z-indexing 不只是通过它的（z-index）编号对页面上的任何随机元素进行分层。它将某些组中的元素分层，并且这些组将彼此堆叠，而不管它们的 z-index。特别是位置元素：不同于静态元素，以及不透明度低于 1 的元素。

我希望这可以帮助任何像我一样困惑的人！

# php - 从标签创建自动链接后多余的逗号替换问题

> ID：15030324
> 
> 赞同：1
> 
> 时间：2013-02-22T17:56:19.273
> 
> 标签：php, utf-8, preg-replace, str-replace

我的问题在下面的 if 语句中。我的标签结构是这样的：tag1, tag2, tag3

我实现了每篇文章的每个标签的自动链接，但是如果标签的数量超过1，我需要替换两个字符，即1个逗号+1个空格字符，并在相关`<p></p>`对内。这 2 个字符 {1 comma+1 space} 在最后一个`</p>`标签之前。我的意思是：

我的输入是（html源）：

```
<p>Etiketler: <a href="http://localhost/türkçe/etiketler/tag1">tag1</a>, <a href="http://localhost/türkçe/etiketler/tag2">tag2</a>, </p> 
```

我想要的输出是（html源）

```
<p>Etiketler: <a href="http://localhost/türkçe/etiketler/tag1">tag1</a>, <a href="http://localhost/türkçe/etiketler/tag2">tag2</a></p> 
```

我的自定义函数如下>现在，你看到了，`preg_replace`但我也试过了`str_replace`。我的编码是`utf-8`如果它有帮助。我阅读了这两个函数的 php.net 手册，但我无法摆脱这两个字符。

你能帮我吗？

```
function etiketleri_link_yap ($article_tags)
{
    $array_of_tags = explode(", ", $article_tags);
    if (count($array_of_tags) >= 2) 
        {
            $ely ='';
            for ($i = 0; $i < count($array_of_tags); $i++) 
                {
                    $ely .= '<a href="'.sitenin_koku.'türkçe/etiketler/'.$array_of_tags[$i].'">'.$array_of_tags[$i].'</a>, ';
                }
            $arabunu ="/<\/a>, <\/p>/"; $degistir  = '</a></p>';
            $ely = preg_replace($arabunu, $degistir, $ely);
            return $ely;
        }
    else
        {
            $ely ='<a href="'.sitenin_koku.'türkçe/etiketler/'.$array_of_tags[0].'">'.$array_of_tags[0].'</a>';
            return $ely;
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:11:34.897

您的变量中没有结束`<p>`标签`$ely`，只有`<a>`标签，因此您的正则表达式永远不会匹配。

我会构建一个标签/标签链接数组并在最后将它们内爆：

```
$links = array();
for ($i = 0; $i < count($array_of_tags); $i++) 
{
   $links[] = '<a href="'.sitenin_koku.'türkçe/etiketler/'.$array_of_tags[$i].'">'.$array_of_tags[$i].'</a>';
}
$ely = implode(', ', $links); 
```

顺便说一句，我也会使用 a`foreach`来循环，`$array_of_tags`但如果您确定索引从 0 开始并且没有丢失的索引，那么结果应该是相同的。

# go - 如何更改 for 循环迭代器类型？

> ID：15030327
> 
> 赞同：17
> 
> 时间：2013-02-22T17:56:39.927
> 
> 标签：go

据我所知，Go 默认使用 int 作为迭代器，除了我想要 uint64。我想不出一种方法来改变 Go 中 for 循环迭代器的类型。有没有办法与 for 语句内联？当我尝试在循环中执行某些操作时，默认类型的 int 会导致问题，例如 mod 操作 (%)。

```
func main() {                                                                                                                               
    var val uint64 = 1234567890                                                 
    for i:=1; i<val; i+=2 {  
        if val%i==0 {
        }                                        
    }                                                                          
} 

./q.go:7: invalid operation: i < val (mismatched types int and uint64)
./q.go:8: invalid operation: val % i (mismatched types uint64 and int) 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-22T18:01:47.857

你的意思是这样的？

```
for i, val := uint64(1), uint64(1234567890); i<val; i+=2 {
    // your modulus operation
} 
```

[http://play.golang.org/p/yAdiJu4pNC](http://play.golang.org/p/yAdiJu4pNC)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-06T14:37:30.793

另一种选择是使用“while”循环：

```
package main

func main() {                                                                 
   var i, val uint64 = 1, 1234567890
   for i < val {
      if val % i == 0 {
         println(i)
      }
      i += 2
   }                                                                          
} 
```

[https://golang.org/ref/spec#For_condition](https://golang.org/ref/spec#For_condition)

# asp.net-mvc - Html.DropDownList 填充

> ID：15030331
> 
> 赞同：0
> 
> 时间：2013-02-22T17:56:52.590
> 
> 标签：asp.net-mvc, asp.net-mvc-3, html-select

我的 MVC 项目中有一个下拉菜单。

```
@Html.DropDownList("Chart Type", new List<SelectListItem>
    {
        new SelectListItem{ Text="Horizontal", Value = "Horizontal" }, 
        new SelectListItem{ Text="Vertical", Value = "Vertical" },
        new SelectListItem{ Text="Pie", Value = "Pie" }
    }, 
    new { @class = "chzn-select", @multiple ="true", @style="width:350px;"} ) 
```

这会将硬编码值放入列表中。如果我想从数据库中获取值，最好的方法是什么？

我可以`Html.DropDownList`参考 sql 查询或 SP 来填充列表吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T18:05:37.650

创建具有（至少）两个属性的视图模型：

```
public class ViewModel()
{
   public List<SelectListItem> Items { get; set; }
   public string SelectedItem { get; set; }
} 
```

在您的控制器中，调用您的数据源并填充视图模型的 Items 属性并将其传递给视图。

```
public ActionResult Index()
{
   var viewModel = new ViewModel();
   viewModel.Items = database.GetChartTypes();//or however you're accessing your data
   return View(viewModel);
} 
```

然后强烈键入您的视图并使用 DropDownListFor 帮助器

```
@model MyProject.ViewModel
...
@Html.DropDownListFor(m => m.SelectedItem, 
                      Items,
                      "--Select a Chart Type--",
                      new { @class = "chzn-select", 
                            @multiple ="true", 
                            @style="width:350px;"
                          }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T18:02:24.567

您不希望 UI 调用您的数据层。

您想要的是控制器调用“服务”然后调用存储库，或者控制器调用存储库以获取列表。

一旦获得列表，它将使用 ViewModel 或 ViewBag 将其传递给视图。

# java - jconsole 操作排序

> ID：15030333
> 
> 赞同：2
> 
> 时间：2013-02-22T17:56:58.127
> 
> 标签：java, jconsole, mbeans

我想找到一种方法来对 jconsole 中为 MBean 列出的操作进行排序，以便我最常用的方法出现在列表的顶部。我试图逆向工程 jconsole 如何做到这一点但没有成功。提前致谢。

jdk=1.6.0_24

# javascript - jQuery 脚本：function(window, document, undefined) vs ;(function($, window, document, undefined)

> ID：15030334
> 
> 赞同：5
> 
> 时间：2013-02-22T17:57:05.350
> 
> 标签：javascript, jquery

我已经看到一些嵌入在打开的网页中的 jQuery 脚本

```
(function(window, document, undefined){... 
```

或者

```
;(function ( $, window, document, undefined ) {... 
```

我相信`;`如果脚本与其他文件连接并且缺少右括号，则可能存在，这会`;`阻止压缩器删除代码的第一行，但我不确定。

我发布的两个变种是怎么回事？为什么人们会这样打开他们的代码，为什么第一个示例缺少美元符号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T18:10:25.377

这些是为尽可能可预测的脚本创建环境的包装器。

在脚本的末尾，您将看到函数表达式的右括号，以及对函数的立即调用，该函数为函数签名中定义的参数发送值：

```
(function($, window, document, undefined){
 ...
})(jQuery, window, document); 
```

如果你使用 jQuery，你会包含它的`$`参数，否则不会。（或者如果你没想过包括它。）

如您所见，名为 的参数没有任何值`undefined`。当您不为参数传递值时，它将被设置为 value `undefined`，因此在功能块内命名的参数`undefined`将具有 value `undefined`。这样做的目的是因为全局标识符`undefined`在最近版本的 Javascript 之前不是一个常量，所以在旧浏览器中，您可以给属性`undefined`一个值，这样它就不再代表`undefined`了。（请注意，没有定义值的参数将获取实际值`undefined`，而不是全局属性的当前值`undefined`。）

正如您所怀疑的，开头的额外分号是为了保护脚本免受可能与之合并的其他脚本的影响。

# ios - 从 Google Speech Recognition 中移除亵渎审查

> ID：15030339
> 
> 赞同：3
> 
> 时间：2013-02-22T17:57:34.060
> 
> 标签：ios, xcode, speech-recognition, profanity

我正在尝试使用 Google 的 Speech to Text API 在 iOS 应用程序中将语音转换为文本。我只是将一些音频数据发送到 URL“ [https://www.google.com/speech-api/v1/recognize?xjerr=1&client=chromium&lang=en-US](https://www.google.com/speech-api/v1/recognize?xjerr=1&client=chromium&lang=en-US) ”它返回给我（大部分）正确的话我说。但是，它正在用“####”代替任何亵渎。如何用实际的诅咒词替换“####”？

只是一些附加信息：我正在使用 todoroo SpeechToText 库。请求的代码如下：

```
NSURL *url = [NSURL URLWithString:@"https://www.google.com/speech-api/v1/recognize?xjerr=1&client=chromium&lang=en-US"];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setHTTPMethod:@"POST"];
[request setHTTPBody:byteData];
[request addValue:@"audio/x-speex-with-header-byte; rate=16000" forHTTPHeaderField:@"Content-Type"];
[request setURL:url];
[request setTimeoutInterval:15];
NSURLResponse *response;
NSError *error = nil;
....
NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:00:51.407

找到它：只需将 &pfilter=0 添加到 URL 中，它就变成了

[https://www.google.com/speech-api/v1/recognize?xjerr=1&pfilter=0&client=chromium&lang=en-US](https://www.google.com/speech-api/v1/recognize?xjerr=1&pfilter=0&client=chromium&lang=en-US) "

请注意，设置 pfilter=0 会删除脏话过滤器，pfilter = 1 会将任何脏话替换为 '####'（总是 4 个哈希标记），而 pfilter = 2 会将脏话替换为其第一个字母和正确数量的星号，即： b**** 或 f***。

# c - 命令提示符程序：如何允许用户输入 unix 命令？

> ID：15030340
> 
> 赞同：2
> 
> 时间：2013-02-22T17:57:38.010
> 
> 标签：c, unix, command, prompt

我在编写一个显示命令提示符（这里没问题）的 C 程序时遇到问题，它允许用户输入 unix 命令然后显示结果。我尝试了很多东西，但我一年前才开始编程，除了显示命令提示符外，我什么也没去；我需要有关如何接受 unix 命令 + 显示其结果的帮助。

我唯一的限制是，我需要我的程序搜索路径环境变量中指定的目录并找到命令可执行文件的位置，而不是用户提供绝对路径。我也不明白如何执行此操作，但在线搜索告诉我最好使用“getenv() 访问 OS PATH 变量并适当地为用户提供的命令添加前缀”。有谁可以帮我离开这里吗？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:02:10.020

试试 popen()，它可以[**在**](http://linux.die.net/man/3/popen)手册页中找到。

看一下这个：

```
#include <stdio.h>
#include <stdlib.h>

void write_netstat(FILE * stream)
{
          FILE * outfile;
          outfile = fopen("output.txt","w");
          char line[128];

          if(!ferror(stream))
          {
                    while(fgets(line, sizeof(line), stream) != NULL)
                    {
                              fputs(line, outfile);
                              printf("%s", line);
                    }
                    fclose(outfile);
          }
          else
          {
                    fprintf(stderr, "Output to stream failed.n");
                    exit(EXIT_FAILURE);
          }
}

int main(void)
{
          FILE * output;
          output = popen("netstat", "r");

          if(!output)
          {
                    fprintf(stderr, "incorrect params or too many files.n");
                    return EXIT_FAILURE;
          }

          write_netstat(output);

          if(pclose(output) != 0)
          {
                    fprintf(stderr, "Could not run 'netstat' or other error.n");
          }
          return EXIT_SUCCESS;
} 
```

这会将 a 打印`netstat`到文件中。您可以对所有命令执行此操作。它使用`popen()`. 我写它是因为我需要一个 netstat 的日志。

# java - 读取和存储属性文件

> ID：15030345
> 
> 赞同：1
> 
> 时间：2013-02-22T17:57:48.440
> 
> 标签：java, properties

我正在尝试通过以下代码更新属性文件中的值

导入java.io.*；导入 java.util.Properties；

```
public class Sample {
    public static void main(String a[]) throws IOException {
        InputStream is = Sample.class.getClassLoader().getResourceAsStream("myfile.properties");
        Properties p = new Properties();
        p.load(is);

        p.setProperty("myProperty", "updated");

        OutputStream os = new FileOutputStream("myfile.properties");
        p.store(os, "update");
        os.close();
        System.out.print(p.getProperty("myProperty"));
    }
} 
```

输出：更新

但是这些值似乎没有更新。事实上，即使属性或文件本身不存在，我也没有收到任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:03:44.910

```
// Read properties file.
Properties prop = new Properties();

try {
    prop.load(new FileInputStream("filename.properties"));
} catch (IOException e) {
}

// Write properties file.
try {
    prop.store(new FileOutputStream("filename.properties"), null);
} catch (IOException e) {
} 
```

# sparql - 如何在没有解析器的情况下创建和填充“SparqlQuery”对象？

> ID：15030346
> 
> 赞同：1
> 
> 时间：2013-02-22T17:57:50.757
> 
> 标签：sparql, dotnetrdf

我正在尝试使用[`SparqlQuery`类](http://www.dotnetrdf.org/api/dotNetRDF~VDS.RDF.Query.SparqlQuery.html)对 SPARQL 查询建模。

看起来我可以使用[`RootGraphPattern`property](http://www.dotnetrdf.org/api/dotNetRDF~VDS.RDF.Query.SparqlQuery.RootGraphPattern.html)属性来指定要在查询结果中遵守的三重模式。

不幸的是，到目前为止，我未能创建`SparqlQuery`该类的实例，因为[它的构造函数不可公开访问](http://www.dotnetrdf.org/api/dotNetRDF~VDS.RDF.Query.SparqlQuery~Constructors.html)并且该类是密封的。同样，[查询类型](http://www.dotnetrdf.org/api/dotNetRDF~VDS.RDF.Query.SparqlQuery.QueryType.html)只能检索，不能设置。是否有任何名称晦涩的工厂方法可以创建该类的实例？

论坛帖子，就像[有关该主题的文档](http://www.dotnetrdf.org/content.asp?pageID=Querying%20with%20SPARQL)专门根据类`SparqlQuery`的查询字符串生成它们的实例一样[`SparqlQueryParser`](http://www.dotnetrdf.org/api/dotNetRDF~VDS.RDF.Parsing.SparqlQueryParser.html)。但是，我*还没有*查询字符串，并且当有一个面向对象的 API 可用时，我试图避免连接字符串来构建我的查询，这让我可以以 OO 方式构建查询，而不是从字符串开始.

因此，我的问题是：**如何在*不使用初始查询字符串和 SPARQL 解析器*`SparqlQuery`的情况下实例化类？**

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T17:52:27.773

现在你不能，大部分`SparqlQuery`都是故意密封的，因为很多属性和相关类，比如`GraphPattern`代表 AST，当我们最初设计这个类时，我们不希望人们有意/无意地修改 AST，从而造成损坏查询。

有一个[fluent-query](https://bitbucket.org/dotnetrdf/dotnetrdf/src/tip/?at=fluent-query)分支正在开发中，它最终将提供一个用于构建查询的 Fluent API，但其背后的开发人员目前正在休假一个月，我已经有一段时间没有看到任何活动了。您可以查看[Fluent Query wiki](https://bitbucket.org/romanticweb/dotnetrdf/wiki/Home)以获取有关此 API 外观的一些示例。

如果这对您来说是一个重要功能，我们可以将其提高优先级，但作为一个开源项目，我们受到我们小型开发团队有限资源的严重限制。

我们可能会将我们目前所拥有的内容集成到我们的 1.0.0 版本中，但我们最近的发布重点一直是错误修复和稳定性，以使 1.0.0 成为稳定的生产就绪版本，引入一个新的且相对未经测试的功能在某种程度上违背了这一点. 此外，该 API 尚未涵盖所有 SPARQL，因此可能不完整且可能不稳定。*

# asp.net - 301重定向来自哪里？

> ID：15030347
> 
> 赞同：1
> 
> 时间：2013-02-22T17:57:54.187
> 
> 标签：asp.net, iis, redirect, http-status-code-301

在这里扯我的头发。

在我的本地机器 dev.thingy.com 上开发一个网站。(ASP.NET/IIS7)。

不知何故，每当调用 ASPX 页面时，它都会以 301 重定向到 local.thingy.com。

我意识到我必须在某个时候设置它，但我找不到在哪里。我已经检查过，它不是以下任何地方：

*   在 IIS 网站设置中
*   在 IIS 重定向设置中
*   在 web.config 中的 URL 重写设置中
*   在我的主机文件中
*   在我的 IIS 错误页面设置中

这只发生在 ASPX 页面上，而不是不重定向的标准 HTML 页面。

那么这个 301 重定向到底是从哪里来的呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T01:29:45.397

301 我认为是来自浏览器缓存。您是否尝试清除浏览器缓存？

# r - R：将数据框转换为动物园：as.matrix.data.frame(x) 中的错误

> ID：15030351
> 
> 赞同：-2
> 
> 时间：2013-02-22T17:58:25.170
> 
> 标签：r, zoo

我需要合并两个时间序列，似乎最好使用merge.zoo。当我尝试将两个数据帧中的每一个都转换为动物园时，我收到以下错误：

```
zoo(FNCC_short)  
Error in as.matrix.data.frame(x) :   
dims [product 10] do not match the length of object [19] 
```

R在哪里找到19的长度？我有：

```
> class(FNCC_short)  
[1] "data.frame"  
> length(FNCC_short)  
[1] 2  
> length(FNCC_short[,1])  
[1] 10  
> length(FNCC_short[,2])  
[1] 10 
```

我无法`read.zoo(...)`用来获取数据，因为 csv 时间字段的格式不正确 - 我必须先读取 csv 文件，然后修复时间格式。

这是 FNCC_short：

```
> FNCC_short  
             time_FNCC  FNCC  
1  2013-02-07 09:00:00 2.556  
2  2013-02-07 09:01:00 2.556  
3  2013-02-07 09:02:00 2.552  
4  2013-02-07 09:03:00 2.552  
5  2013-02-07 09:04:00 2.552  
6  2013-02-07 09:05:00 2.552  
7  2013-02-07 09:06:00 2.552  
8  2013-02-07 09:07:00 2.539  
9  2013-02-07 09:08:00 2.539  
10 2013-02-07 09:09:00 2.539  

> class(FNCC_short$time_FNCC)  
[1] "POSIXlt" "POSIXt" 
```

所以，第一列是 POSIX 时间。为什么这个简单的转换不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:26:26.030

您可以使用指定`format`选项将第一列和第二列转换为动物园索引。

```
Lines <- 'time_FNCC time FNCC  ## I had to add the 'time' column name here
1  2013-02-07 09:00:00 2.556  
2  2013-02-07 09:01:00 2.556  
3  2013-02-07 09:02:00 2.552  
4  2013-02-07 09:03:00 2.552  
5  2013-02-07 09:04:00 2.552  
6  2013-02-07 09:05:00 2.552  
7  2013-02-07 09:06:00 2.552  
8  2013-02-07 09:07:00 2.539  
9  2013-02-07 09:08:00 2.539  
10 2013-02-07 09:09:00 2.539'

dat <- read.zoo(text = Lines, index = 1:2, tz = "")

dat
2013-02-07 09:00:00 2013-02-07 09:01:00 2013-02-07 09:02:00 2013-02-07 09:03:00 
              2.556               2.556               2.552               2.552 
2013-02-07 09:04:00 2013-02-07 09:05:00 2013-02-07 09:06:00 2013-02-07 09:07:00 
              2.552               2.552               2.552               2.539 
2013-02-07 09:08:00 2013-02-07 09:09:00 
              2.539               2.539 
```

# sql - 数据源的 SSRS 模拟

> ID：15030352
> 
> 赞同：1
> 
> 时间：2013-02-22T17:58:29.090
> 
> 标签：sql, reporting-services, performancepoint

我正在使用 SSRS 和 PerformancePoint 部署报告解决方案。我有 4 个数据库。3 我可以完全控制另一个我只有一个额外的域帐户，该帐户可以访问具有只读权限的 SQL，由于该数据库的安全协议，这是唯一的选择。

我一生都无法弄清楚如何使用域帐户受保护的数据发布报告。我已经尝试了我可以在谷歌上为数据集找到的所有身份验证组合，但它不起作用。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:15:05.403

我的理解是，您没有将来自 4 个不同服务器的数据组合为本报告中的数据源，对吗？

然后，在 ReportManager 中 - 转到报告属性 - 即右键单击您的报告，然后从下拉菜单中左键单击“管理”。然后选择数据源选项卡 - 它将具有以下选项：

```
A custom data source

Data source type: Microsoft SQL Server  
Connection string: Data Source=YOUR.SERVER.IP.ADDRESS;Initial Catalog=YOUR_DATABASE_NAME        

Then choose: Connect using: Credentials stored securely in the report server

You can enter your domain username and password there: e.g. 
User name: SOMEDOMAIN\MyUser.Name
Password: MyPa$$wo%d

Then checkmark: Use as Windows credentials when connecting to the data source
You may need to checkmark this one too: Impersonate the authenticated user after a connection has been made to the data source 
```

这会将您的登录名/密码组合安全地存储在服务器上，并允许报告连接到您的数据源。

*您也可以对共享数据源执行此操作。*

否则，如果您尝试合并来自您的 3 台服务器和另外 1 台您只有只读访问权限的服务器的数据，我建议您：

1.  在您的一个服务器上创建一个链接服务器条目，指向该 1 个只读服务器，并且对于另外两个服务器可能还有两个

2.  创建存储过程，为您的报表提供数据集，根据需要从其他 3 个服务器收集数据 - 这样您只需要报表服务器上的 1 个数据源

这回答了你的问题了吗？

# c# - 情节提要中的事件未正确触发

> ID：15030353
> 
> 赞同：0
> 
> 时间：2013-02-22T17:58:29.257
> 
> 标签：c#, wpf, xaml, events, animation

我有一个自定义`UserControl`，需要在 X 上从 1 缩放到 0，然后使用以下编码从 0 回到 1 `Storyboard`：

```
Storyboard storyboard = new Storyboard();

DoubleAnimation animationFlipBegin = new DoubleAnimation();
animationFlipBegin.BeginTime = TimeSpan.FromSeconds(0.4D);
animationFlipBegin.Duration = TimeSpan.FromSeconds(0.1D);
animationFlipBegin.To = 0D;
animationFlipBegin.SetValue(Storyboard.TargetProperty, myUserControl);
animationFlipBegin.SetValue(Storyboard.TargetPropertyProperty, BuildPropertyPath("(FrameworkElement.RenderTransform).(TransformGroup.Children)[1].(ScaleTransform.ScaleX)"));

DoubleAnimation animationFlipEnd = new DoubleAnimation();
animationFlipEnd.BeginTime = TimeSpan.FromSeconds(0.5D);
animationFlipEnd.Duration = TimeSpan.FromSeconds(0.1D);
animationFlipEnd.To = 1D;
animationFlipEnd.SetValue(Storyboard.TargetProperty, myUserControl);
animationFlipEnd.SetValue(Storyboard.TargetPropertyProperty, BuildPropertyPath("(FrameworkElement.RenderTransform).(TransformGroup.Children)[1].(ScaleTransform.ScaleX)"));

storyboard.Children.Add(animationFlipBegin);
storyboard.Children.Add(animationFlipEnd);
storyboard.Begin(); 
```

当它达到 ScaleX 值 0 时，必须在其上调用一个函数`UserControl`。所以我的第一次尝试是添加以下代码：

```
animationFlipBegin.Completed = new EventHandler(DoAction);

private void DoAction(Object sender, EventArgs e)
{
    myUserControl.DoAction();
} 
```

问题是`DoAction`仅在`Storyboard`完成后才调用，而不是在完成时调用`DoubleAnimation`，可能是由于线程......这对我来说绝对不好！

所以......我的第二次尝试是修改我的自定义`UserControl`代码如下：

```
<UserControl.RenderTransform>
    <TransformGroup>
        <ScaleTransform Core:Name="Scaling" Changed="OnScaleChanged"/>

private void OnScaleChanged(Object sender, EventArgs e)
{
    if (Scale.ScaleX == 0D)
        DoAction();
} 
```

最初看起来像一个聪明的主意，但事实并非如此。从我看到调试代码的情况来看`ScaleTransform.Changed`，有时只会被调用，并且在为 0 时从未调用过。`ScaleX`

所以......我仍然可以弄清楚的唯一解决方案是将我的`Storyboard`分成两个单独`Storyboard`的，然后`DoAction`在第一个完成后调用事件。太丑了，我真的很想找到另一种方法。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:02:32.150

如果您在没有情节提要的情况下单独运行动画怎么办？只需在第一个动画的处理程序中启动第二个动画`Completed`，没有`BeginTime`.

```
var animationFlipBegin = new DoubleAnimation
{
    BeginTime = TimeSpan.FromSeconds(0.4),
    Duration = TimeSpan.FromSeconds(0.1),
    To = 0
};

var animationFlipEnd = new DoubleAnimation
{
    Duration = TimeSpan.FromSeconds(0.1),
    To = 1
};

var scaleTransform = (ScaleTransform)((TransformGroup)RenderTransform).Children[1];

animationFlipBegin.Completed +=
    (o, e) =>
    {
        DoAction();
        scaleTransform.BeginAnimation(ScaleTransform.ScaleXProperty, animationFlipEnd);
    };

scaleTransform.BeginAnimation(ScaleTransform.ScaleXProperty, animationFlipBegin); 
```

# ruby-on-rails - 用 NetHTTP 开始工作的最简单的例子

> ID：15030354
> 
> 赞同：0
> 
> 时间：2013-02-22T17:58:33.827
> 
> 标签：ruby-on-rails, ruby, net-http

在 Rail 中，我的最终目标是编写一个 Net::HTTP 客户端来连接到我的 REST API，该 API 返回 JSON 并解析它，将其传递给 View 等......但首先要做的事情！
我可以从什么最简单的开始？

我正在查看此页面：[http ://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html)

我的印象是，如果我有一个包含这两行代码的 .rb 文件，它应该向我展示什么？

```
require 'net/http'
Net::HTTP.get('example.com', '/index.html') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:06:06.650

你可以用这样的东西开始测试：

```
require 'net/http'
response = Net::HTTP.get_response("www.google.com","/")
puts response.body 
```

我建议你看一下文档：[Net::HTTPSession](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:06:50.877

```
url = URI.parse("http://example.com")
req = Net::HTTP::Get.new(url.path)
@resp = Net::HTTP.new(url.host, url.port).start {|http| http.request(req)} 
```

在视图中

```
<%= "The call to example.com returned this: #{@resp}" %> 
```

# django - 基于关系构建 ModelForms 列表

> ID：15030355
> 
> 赞同：0
> 
> 时间：2013-02-22T17:58:36.033
> 
> 标签：django, django-models, django-forms

我认为最好用一些简单的模型代码来解释这一点（我是从头开始写的，所以可能存在语法问题——这里不重要）：

```
class Car(models.Model)
    make = models.CharField(...)
    model = models.CharField(...)

class StatisticType(models.Model):
    name = models.CharField(...)

class Statistic(models.Model)
    car = models.ForeignKey('Car')
    stype = models.ForeignKey('StatisticType')
    data = models.CharField(...)

    class Meta:
        unique_together = (('car', 'stype'),) 
```

我们有一辆带有一些硬编码统计数据的汽车，我们有一些数据库控制的统计数据。我可能会添加`Colours`,`Wheel Size`等。关键是它可以从管理员编辑，所以我或客户都不需要爬过数据，但它是有限的，所以用户只能选择每个统计数据中的一个（你不能定义“颜色”两次）。

所以我现在正在尝试为此编写数据输入表单，并且我想要一个可以放在页面上的可选模型表单列表。我有最简单的 ModelForm 可能：

```
class StatisticForm(forms.ModelForm):
    class Meta:
        model = Statistic 
```

棘手的部分（在我的脑海中）是为每个 StatisticType 生成这个 ModelForm 的实例，不管它是否存在。也就是说，如果 Car 对象没有分配颜色，则表单仍会显示。类似地，如果是这样，则该 Statistic 实例将加载到 ModelForm 中。

### 在我看来，无论是否存在任何给定统计数据的预先存在的实例，我如何生成这些事物的列表？

这似乎应该是一件简单得愚蠢的事情，但周五已经很晚了，一切看起来都很糟糕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:30:27.663

听起来您可能想利用[内联模型表单集工厂](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#inline-formsets)。

这将允许您根据需要创建尽可能多的 Statistic 对象实例。如果您需要即时创建 StatisticType 的实例，那就有点不同了。

当 Django 为外键、m2m 或选项字段实例化表单时，它只会接受它认为“有效”的选项，并且如果您使用 JavaScript 添加一个相关模型或选项集中不存在的选项，它会报错服务器端。

因此，如果您需要即时创建 StatisticTypes，然后使用这个新值填充表单集实例，我建议使用[Knockout.js](http://knockoutjs.com)。它非常擅长在数据更改时保持大量 DOM 元素同步。

# c - C - 链表

> ID：15030362
> 
> 赞同：-1
> 
> 时间：2013-02-22T17:59:03.943
> 
> 标签：c, linked-list

我有 3 个文件 - 字符串（用于获取字符并将它们组合成字符串（作为指针，但不是数组））、LinkedList 文件和主文件（测试文件）。字符串部分工作正常，已经过测试。但我被困在 LinkedList 上。

----> 我知道问题出在 addString() 方法中，而且是逻辑上的问题，因为我在它的末尾放置了一个打印检查，但我从来没有到达那里。但我似乎没有发现任何逻辑问题......这是LinkedList的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include "LinkedList.h"

struct node
{
    struct node *next;
    struct node *previous;
    struct string *str;
};

static struct node *head;
static struct node *tail;

int count = 0;

void initList()
{
    head = NULL;
    tail = NULL;
}

void addString(struct string *str_)
{
    struct node *current = malloc(sizeof(struct node));
    if (head = NULL)
    {
        head = current;
        tail = current;
        current->next = tail;
        current->previous = head;
        current->str = str_;
    }
    else
    {
        current->previous = tail;
        tail->next = current;
        tail = current;
        current->str = str_;
    }

    puts("\nA string has been added!");

}

void deleteString(int index)
{
    struct node *currentNode;
    currentNode = head;
    int i = 0;

    if(index == 0)
    {
        head->str = NULL;
        head->next = head;
        // delete first node and relocate "head" to next node
    }
    while(currentNode != NULL)
    {
        if(i == index)
        {
            currentNode->str = NULL;
            currentNode->previous->next = currentNode->next;
            currentNode->next->previous = currentNode->previous;
        }
        else
        {
            currentNode = currentNode->next;
            i++;
        }
        // 1.loop through and starting from 0 as first (head) element
        // 2.when index is reached - delete it and replace the connections
    }
}

void printAll()
{
    struct node *currentNode;
    currentNode = head; 

    while(currentNode !=NULL)
    {
        printf("%s", currentNode->str);
        currentNode = currentNode->next;
    }// need to iterate through list
} 
```

这是测试文件：

```
#include <stdio.h>
#include <stdlib.h>

#include "String.h"
#include "LinkedList.h"

int main(int argc, char** argv) {

    initList();

    char* c;
    c = getChars();

    struct string *strp1;
    strp1 = malloc(sizeof(struct string));
    strp1 = make_string(c);
    addString(strp1);
    printAll();

    printf("%s", *strp1);
    puts("\nsome text");
    return (EXIT_SUCCESS);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:02:28.950

`(head = NULL)`是赋值语句，而不是比较。将其更改为`(head == NULL)`.

顺便说一句，因为看起来你刚刚开始使用 C，所以在编译器标志中打开警告。在修复所有警告之前不要运行代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:06:09.943

正如您的`addString`函数中提到的eduffy，您应该进行比较而不是分配。另一个问题是设置`currentNode->next`和`currentNode->previous`。在您的`printAll()`函数中，您迭代 until `currentNode == NULL`，因为`currentNode->next = current node`您将有一个无限循环。保持`currentNode->next/previous`原样，`NULL`直到您拥有超过 1 个元素。

# hibernate - HQL 返回嵌套子代，其中所有子代都符合条件

> ID：15030363
> 
> 赞同：0
> 
> 时间：2013-02-22T17:59:06.150
> 
> 标签：hibernate, nhibernate, hql, criteria

我有一个有一对多孩子的班级家长。孩子是嵌套的，可以有 n 个作为深度。我想写一个 hql，它将返回一个有孩子、孙子、曾孙等符合条件的父母。我能够得到符合条件的孩子，但是当我调用 children.getChildren 时，它会返回不符合条件的大孩子。这可能吗？

谢谢， 帕瓦西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T06:53:27.727

是的，您可以，但是您也对它们添加了限制。

```
 criteria = session.createCriteria(YourClass.class);
                criteria.add(Restrictions.eq
                ("yourClassproperty", value));// //condition on parent
                criteria.createAlias("children", "child");
                criteria.createAlias("child.grandeChild", "grandChild");
                criteria.add(Restrictions.or(Restrictions.eq
                ("child.prop", value), Restrictions.
                eq("grandChild.property", value)));
                //Exmple restrictions on children
                criteria.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY);
                return criteria.list(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T08:42:14.710

有两种方法可以实现这一点：

1.  `lazy = false`当您获取父类的对象时，通过在映射文件或实体级别指定来延迟加载其子对象。就你的条件而言，你可以用你的编程语言编写逻辑（例如循环子对象）。

2.  编写一个递归逻辑，使数据库命中直到获取最后一个第 n 个孙子。它不能用单一标准或 HQL 来完成。

# php - 如果 window.print 被取消，则阻止表单提交

> ID：15030364
> 
> 赞同：1
> 
> 时间：2013-02-22T17:59:06.370
> 
> 标签：php, javascript

我有一个表单，提交表单时打印，
但是当我取消打印时，表单仍然提交。

这是一些示例代码：

```
<script>  
function printpage()  
{
   window.print();
}
</script>

<form action="" method="post">  
  <input type="text" name="fname">  
  <input type="submit" onclick="printpage()">
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:02:14.920

windows.print() 不返回状态。您无法知道页面是否打印，因此无法在页面未打印时取消提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-19T16:43:31.723

我有一个类似的问题，即在打印页面或单击打印后不希望提交表单。我的解决方案是将我的 JavaScript 内联到我的打印按钮中并添加一个`return false;`（参见下面的代码）。

`<button onclick="window.print(); return false;">Print</button>`

这阻止了我的表单在打印或取消后提交。我还将打印按钮放在表单中：

```
<form>
<button onclick="window.print(); return false;">Print</button>
</form> 
```

我只测试了这是谷歌浏览器，所以不确定它是否适用于其他浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:45:53.167

如前所述，`window.print()`不返回状态，它是异步的。你可以做一些棘手的事情，比如一旦你触发对 window.print 的调用，检查鼠标移动（浏览器只会在打印对话框关闭或完成后识别鼠标，但你无法知道它为什么关闭）。

只是要明确一点：我在下面列出的任何内容都无法解决问题：无法判断打印是否在 JS 中以编程方式取消。这些只是可能为您提供其他可能性的附加选项。

IE 也支持`onbeforeprint`和`onafterprint`事件...但没有其他人这样做。

WebKit 多年来一直存在一个错误来获取此类事件，但它基本上已经死了：[https ://bugs.webkit.org/show_bug.cgi?id=19937](https://bugs.webkit.org/show_bug.cgi?id=19937)

但是，如果您支持具有`window.matchMedia`( [https://developer.mozilla.org/en/DOM/window.matchMedia](https://developer.mozilla.org/en/DOM/window.matchMedia) ) 可用的浏览器（浏览器支持：[http](http://caniuse.com/#feat=matchmedia) ://caniuse.com/#feat=matchmedia ），您可能有更多选择。它基本上提供了一个 API 来确定文档是否与 mediaQuery 匹配。其中包括，戏剧性的停顿，一个`print`事件。

类似于（结合 IE 的专有方法和`matchMedia`）：

```
(function() {
    var apiMQL = null
        , triggerBeforePrint = function() {
            console.log('Firing Before Print');
        }
        , triggerAfterPrint = function() {
            console.log('Firing After Print');
        }
    ;

    if (window.matchMedia) {
        apiMQL = window.matchMedia('print');
        apiMQL.addListener(function(mql) {
            if (mql.matches) {
                triggerBeforePrint();
            } else {
                triggerAfterPrint();
            }
        });
    }
    window.onbeforeprint = triggerBeforePrint;
    window.onafterprint = triggerAfterPrint;
}()); 
```

*请记住，仅*使用 JavaScript几乎没有可靠的方法来执行此操作，它可以为您提供取消打印、完成与失败等详细信息。

# javascript - Jquery 从一个盒子移动到另一个盒子

> ID：15030365
> 
> 赞同：0
> 
> 时间：2013-02-22T17:59:12.923
> 
> 标签：javascript, jquery

尽管它在 JSFiddle 中工作，但我正在努力让一些代码在我的网站上工作。

我在正文中有这个脚本。

```
<script type="text/javascript" src="jquery-1.9.1.min.js"></script>
<script>
$('.add').click(function(){
$('#first option:selected').appendTo('#second');
});
$('.remove').click(function(){
$('#second option:selected').appendTo('#first');
});
$('.add-all').click(function(){
$('#first option').appendTo('#second');
});
$('.remove-all').click(function(){
$('#second option').appendTo('#first');
});
</script> 
```

我有这个来执行脚本。

```
 <div id="input14">
    <select id="first" multiple="true">
        <option value="something@something.com"> test </option>
        <option value="something@something.com"> something@something.com </option>
        <option value="something@something.com"> something@something.com </option>
        <option value="something@something.com"> something@something.com </option>
        <option value="something@something.com"> something@something.com </option>
    </select>
    </div>

    <div id="button14">

        <center>
        <br />
        <button class='add'> > </button><br />
        <button class='remove'> < </button><br />
        <button class='add-all'> >>> </button><br />
        <button class='remove-all'> <<< </button>
        </center>
    </div>

    <div id="error14">

        <select id="second" multiple="true">

        </select>

    </div> 
```

正如我所说，它适用于 JSFiddle 但不适用于我的本地主机，这里是 JSFiddle 设置[http://jsfiddle.net/8nezD/1/](http://jsfiddle.net/8nezD/1/)

请有人告诉我我的方式的错误！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:00:48.230

将您的 jQuery 包装在文档就绪调用中

```
$(document).ready(function () {
    $('.add').click(function () {
        $('#first option:selected').appendTo('#second');
    });
    $('.remove').click(function () {
        $('#second option:selected').appendTo('#first');
    });
    $('.add-all').click(function () {
        $('#first option').appendTo('#second');
    });
    $('.remove-all').click(function () {
        $('#second option').appendTo('#first');
    });
}); 
```

它在 jsFiddle 上运行的原因是该站点会自动为您包装它。

# asp.net - 在 ASP.NET 中为文件上传制作 Ajax，同时跟踪内存中的文件

> ID：15030370
> 
> 赞同：0
> 
> 时间：2013-02-22T17:59:22.347
> 
> 标签：asp.net, ajax, updatepanel, viewstate

我需要制作一个 Asp.net 控件来上传通过 Ajax 发送文件的多个文件。

此控件可用于将文件存储在文件夹或数据库中，持久性将由将使用我的控件的类决定，而不是控件本身。所以我需要在这里实现一定程度的灵活性。

上传的文件将像文件列表一样存储在我的控件类中，直到使用我的控件的类执行“官方帖子”，这将消耗然后最终释放该类。

在一个简单的示例中，使用我的控件的表单将使用通过我的控件进行的所有上传生成的列表，并在保存时，表单将读取我的列表并以最佳方式保存它。

这里的问题是方法：

我不能使用 updatePanel，因为它不允许文件输入，并且（afaik）不会保持纯 javascript 生成的输入 = 文件的状态。

不可能使用 WebMethod 属性来发送数据，因为它要求我的方法是静态的，这使得使用此方法无法提供内存中的对象。

另一种选择是使用手工制作的 Ajax，这并不难，但我不确定 Asp.net 的行为方式，它是否保持 Ajax 调用之间的状态？我可以从不同的调用访问相同的内存对象吗？我必须跟踪视图状态或使用会话吗？使用会话或视图状态（！）来保存上传的文件是否可行？

**强化：**问题*不*在于使用 ajax 上传文件，我使用的是 blueimp.github.com/jQuery-File-Upload ，问题是在服务器端跟踪它们而不持久化。

**例子**

让我试着更好地解释一下：

0）我有一个控件，这个控件有一个属性是文件列表 - `List<files> FilesUploaded`；

1）在每次 ajax 上传时，我将即将到来的文件添加到列表中`FilesUploaded.Add(FileComingFromAjax)`

2）我的控件进入一个表单（任何表单），当我保存 Form`BtSave.Click()`时， Form 类将需要获取文件列表并持久保存：他们像这样访问它`AnyonesForm.MyControl.FilesUploaded`。请注意，文件在内存中，而不是在磁盘或数据库中。

我的疑问是，每次请求后会保留文件吗？即：

将通过ajax 调用的方法，使用Same List 吗？

当我提交主表单时，表单类是否可以使用我刚刚上传的文件访问列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T20:17:55.743

那么实际上，我在想asp.net 将能够在ajax 请求之间保留对象，但事实并非如此。

我将使用会话，我不再害怕将对象添加到会话中，[ASP.net，将对象添加到会话变量](https://stackoverflow.com/questions/8056323/asp-net-adding-objects-to-a-session-variable)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:03:31.007

像这样组合 jQuery 和 AJAX：

[jQuery Ajax 文件上传](https://stackoverflow.com/questions/2320069/jquery-ajax-file-upload)

[如何异步上传文件？](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery)

达到你的结果。

# unit-testing - 如何在 Symfony 1.4 单元测试中启用 Doctrine 查询日志记录

> ID：15030374
> 
> 赞同：1
> 
> 时间：2013-02-22T17:59:34.640
> 
> 标签：unit-testing, logging, doctrine, symfony-1.4

我正在对模型类进行单元测试，我希望记录所有 Doctrine 查询。我的测试环境的 settings.yml 包含

```
logging_enabled: true 
```

和我的剧本

```
$configuration = ProjectConfiguration::getApplicationConfiguration( 'frontend', 'test', true);
new sfDatabaseManager( $configuration ) ; 
```

不过，我在任何日志文件中都看不到任何日志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:37:15.020

因此，我通过在 Doctrine 分析器上使用事件侦听器找到了一种解决方法。

```
$profiler = new Doctrine_Connection_Profiler();
$conn = Doctrine_Manager::connection();
$conn->setListener($profiler);

/* tests go here */

foreach ($profiler as $event) {
    echo $event->getQuery() . "\n";
} 
```

但是由于某种原因，相同的查询被打印了好几次（我确信它只执行一次）。另外，将查询日志与其他日志消息分离也不太方便。

# c# - 使用 EmguCv 进行右侧人脸检测

> ID：15030377
> 
> 赞同：0
> 
> 时间：2013-02-22T17:59:44.090
> 
> 标签：c#, opencv, emgucv

**大家好，** 我在 C# 中使用 EmguCv 进行人脸检测和识别项目，所以我已经做了一些步骤： - 检测正面和左脸 - 识别人脸

*但是当我想检测脸部右侧时出现的问题*它不起作用，因为分类器 profileface.xml 只适用于左侧，我找到了一些做镜子的想法，但我不知道该怎么做。

所以请PLZ如果有人有任何想法，我会很高兴。

穆罕默德·哈萨尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:20:34.160

为此有一个翻转（）函数：

[http://opencv.willowgarage.com/documentation/cpp/core_operations_on_arrays.html#flip](http://opencv.willowgarage.com/documentation/cpp/core_operations_on_arrays.html#flip)

# c++ - C++ 为什么这个变量返回一个随机值？

> ID：15030379
> 
> 赞同：3
> 
> 时间：2013-02-22T18:00:00.080
> 
> 标签：c++, random, int

我在 C++ 中做了一个基本的“猜我的数字游戏”，并且我添加了一个变量来表示人们猜数字的次数。然而，当游戏结束时，会显示一个随机的猜测值。像 1980046322 之类的东西。考虑到我没有在我的代码中添加任何非同寻常的东西，我无法弄清楚它为什么会这样做。

```
#include <iostream>
#include <cstdlib>
#include <ctime>

using namespace std;

int main()
{
int randomNumber;
int guess;
int guesses;

srand((unsigned)time(0));
randomNumber = (rand()%10)+1;

cout << "I am thinking of a number between 1 to 10\. Can you guess it?" << endl;

while(guess != randomNumber){
    cout << "That is not correct, try again.";
    guesses++;
    cin >> guess;
}

if(guess == randomNumber){
    cout << "Good Job. Guesses: " << guesses << endl;
    guesses++;
}

return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T18:03:42.583

根据 C++11 标准的第 8.5/11 段：

> 如果没有为对象指定初始化器，则该对象是*默认初始化的*；如果不执行初始化，则具有自动或动态存储持续时间的对象具有**不确定值**。[ 注意：具有静态或线程存储持续时间的对象是零初始化的，请参见 3.6.2。——尾注]

第 8.5/6 段解释了*默认初始化*对不同变量类型的意义：

> *默认初始化*T类型的对象意味着：
> 
> — 如果 T 是（可能是 cv 限定的）类类型（第 9 条），则调用 T 的默认构造函数（如果 T 没有可访问的默认构造函数，则初始化是非良构的）；
> 
> — 如果 T 是数组类型，则每个元素都是默认初始化的；
> 
> —**否则，不执行初始化**。

由于`T`在您的情况下既不是类类型也不是数组类型（所有默认初始化的变量都具有 type `int`），因此不执行初始化并且初始值是不确定的。

此外，您的程序具有**Undefined Behavior**，因为它试图读取未初始化变量的值。这样做需要进行左值到右值的转换（尽管标准没有明确指定这一点，但可能是有意的，请参阅**[此 Q&A on SO](https://stackoverflow.com/questions/14991219/what-is-the-value-category-of-the-operands-of-c-operators-when-unspecified)**），以及 C++11 标准的第 4/1 段规定：

> 非函数、非数组类型 T 的泛左值 (3.10) 可以转换为纯右值。53 如果 T 是不完整类型，则需要这种转换的程序是非良构的。如果泛左值所引用的对象不是 T 类型的对象，也不是从 T 派生的类型的对象，或者**如果该对象未初始化，则需要此转换的程序具有未定义的行为**。如果 T 是非类类型，则纯右值的类型是 T 的 cv 非限定版本。否则，纯右值的类型是 T.54

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T18:02:05.450

您尚未初始化一些变量，然后在为它们分配任何值之前使用它们。它们以未指定的值开始，看起来是随机的。你可以像这样修复它

```
int guess = 0;
int guesses = 0; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-22T18:02:00.973

代码没有初始化`guess`or `guesses`，所以它们的初始值是不可预测的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-22T18:03:17.140

您不会将猜测初始化为 0。因此它将包含它开始使用的内存地址中的任何内容

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-22T18:03:34.967

您不初始化猜测，因此您不知道该值是什么。C/C++ 不对未初始化变量的值做任何保证。

始终初始化所有值是一个好习惯

`int guesses = 0;`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-22T18:03:46.267

您没有将`guesses`变量初始化为零。

例如，如果您使用 g++ 编译代码，使用以下标志，问题就会变得很明显：

```
$ g++ -O2 -Wall foo.cpp 
foo.cpp: In function ‘int main()’:
foo.cpp:25:38: warning: ‘guesses’ may be used uninitialized in this function [-Wmaybe-uninitialized] 
```

请注意，除了警告标志之外，还需要优化标志来触发警告，至少在 g++ 4.7.2 中是这样。

故事的寓意：启用编译器警告。

# c# - KeyedCollection 和 d:DataContext 设计错误

> ID：15030381
> 
> 赞同：3
> 
> 时间：2013-02-22T18:00:06.620
> 
> 标签：c#, wpf, visual-studio-2013, datacontext, design-time

请参阅下面的 VS2013 更新。

将类用作`d:DesignInstance`公开 a 的 a`KeyedCollection<TKey, TItem>`时，XAML 设计器会抱怨以下警告：

> 提供的泛型参数的数量不等于泛型类型定义的数量。
> 
> 参数名称：实例化

可以使用以下简单程序重现该问题：

```
<Window x:Class="Test.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:local="clr-namespace:Test"
        mc:Ignorable="d"  
        d:DataContext="{d:DesignInstance local:MyClass}" />

namespace Test
{
    public partial class MainWindow : Window
    {
        public MainWindow() { InitializeComponent(); }
    }

    public class MyClass
    {
        public KeyedCollection<string, object> SettingsModule { get; private set; }
    }
} 
```

我无法为任何暴露`KeyedCollection`.

有什么想法吗？

* * *

更新：从 VS2013 开始，设计人员处理 a 的行为发生了`KeyedCollection`变化（尽管仍未完全正常工作）。

上面的示例不再产生错误。但是，如果`KeyedCollection`使用某些类型（例如接口），`TItem`则会生成以下错误：

> 你调用的对象是空的。

考虑以下示例：

```
namespace Test
{
    public partial class MainWindow : Window
    {
        public MainWindow() { InitializeComponent(); }
    }

    public class MyClass
    {
        public KeyedCollection<string, IInterface> MyCollection { get; private set; }
    }

    public interface IInterface
    {
        string Name { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-02-10T23:55:28.260

我已经能够通过在设计实例类型前加上“d:Type”来解决这个问题，如下所示：

```
d:DataContext="{d:DesignInstance d:Type=local:MyClass}" 
```

这似乎是 VS2013 设计器中的一个错误。我相信 d:Type 属性应该是属性的默认`d:DesignInstance`属性。另外，奇怪的是，我只在`KeyedCollection`课堂上看到过这个问题。

此外，[MSDN](http://msdn.microsoft.com/en-us/library/ff602277%28v=vs.95%29.aspx)的`d:DesignInstance`用法示例有时使用不带前缀的“类型”。在此示例中，如果`d:Type`省略或缺少前缀，则会生成设计时错误，正如我所提到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:06:49.323

如果我没有误解您的问题，请尝试

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:local="clr-namespace:WpfApplication1"
    Width="800" Height="800"
    Title="MainWindow"   
    >
<Window.DataContext>
    **<local:MyClass />**
</Window.DataContext>
<Grid x:Name="LayoutRoot">
</Grid> 
```

我希望这将有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-05T20:03:21.807

我必须从我的 DesignInstance-Class 中删除默认构造函数

# c# - 嵌套私有方法单元测试

> ID：15030383
> 
> 赞同：1
> 
> 时间：2013-02-22T18:00:08.607
> 
> 标签：c#, .net, unit-testing, telerik, justmock

我如何为这种情况编写一个刚刚模拟的单元测试？

```
Private Method1

{

  //calls private method - Method2
} 
```

因此，当我模拟 Method1 时，我需要再次在内部模拟 Method2。

例如，我使用表单的私有访问器来创建单元测试。

```
FormName_accessor target=new FormName_accessor(); 
```

然后使用该 target.Method1 在我的单元测试中调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T19:34:20.460

这是一个模拟类的私有方法并验证它们是否被调用的示例。

```
public class Item
{
    public void Update()
    {
        Save();
    }

    private void Save()
    {
        Validate();
        /// Save something
    }

    private void Validate()
    {
        /// Validate something
    }
}

[Fact]
public void EnsureNestedPrivateMethodsAreCalled()
{
    // Arrange
    Item item = Mock.Create<Item>();
    Mock.Arrange(() => item.Update()).CallOriginal().MustBeCalled();
    Mock.NonPublic.Arrange(item, "Save").CallOriginal().MustBeCalled();
    Mock.NonPublic.Arrange(item, "Validate").DoNothing().MustBeCalled();

    // Act
    item.Update();

    // Assert
    Mock.Assert(item);
} 
```

请注意，在安排模拟时，您要确保调用原始方法`Update`和`Save`方法。您只想删除未测试的功能。在这种情况下，我们正在测试调用`Update`会导致调用私有成员`Save`和`Validate`. 我们没有测试该`Validate`方法的实现。

# ios - 在 segue 中实现 2 个取消按钮

> ID：15030389
> 
> 赞同：0
> 
> 时间：2013-02-22T18:00:28.893
> 
> 标签：ios

我有一个视图控制器，有 2 个不同的 segues 去 2 个不同的视图控制器，我必须在两个控制器中实现取消按钮。当我按下取消按钮时，在两个控制器中，视图将返回到初始视图控制器。我的问题是如何实现按钮？当我尝试使用此代码时，编译器警告：发现并忽略了方法“取消：”的多个声明。谢谢。

界面：

```
-(IBAction)cancel:(UIStoryboardSegue *)segue;    
-(IBAction)done:(UIStoryboardSegue *)segue;    
-(IBAction)cancel:(UIStoryboardSegue *)segue; 
```

执行：

```
-(IBAction)done:(UIStoryboardSegue *)segue    
{
    if([[segue identifier] isEqualToString:@"ReturnInput"]){            
        AddSightingViewController *addController = [segue sourceViewController];            
        if (addController.birdSighting) {

            [self.dataController
             addBirdSightingWithSighting:addController.birdSighting];

            [[self tableView]reloadData];                
        }            
        [self dismissViewControllerAnimated:YES completion:NULL];
    }
}

-(IBAction)cancel:(UIStoryboardSegue *)segue    
{        
    if([[segue identifier] isEqualToString:@"CancelInput"]){            
        [self dismissViewControllerAnimated:YES completion:NULL];            
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:23:35.583

从您的代码中，我得出结论，您正在使用（或想要使用）退出 segues 来取消。

首先，在初始视图控制器中，您的取消方法应该只有一个方法声明和实现。在您的故事板中，通过从取消按钮拖动到绿色退出图标来创建退出 segues，吹动视图控制器并选择初始视图控制器中定义的取消方法。对两个视图控制器都这样做。您还应该在情节提要中为您的出口转场提供不同的标识符（您需要在文档大纲中选择转场以更改其标识符）。

然后您在初始视图控制器中的取消方法可能如下所示：

```
-(IBAction)cancel:(UIStoryboardSegue *)segue    
{
    if([[segue identifier] isEqualToString:@"CancelInput1"]) {
        // Do something
    } else if([[segue identifier] isEqualToString:@"CancelInput2"]) {
        // Do something different
    }
} 
```

如果您在取消时不想做任何事情，只需将该方法留空即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:44:57.917

如果您不想返回，则需要实施 unwind segue。

为此，请定义一种方法以返回原始视图控制器（您要返回的那个）。您可以将该方法留空。

```
- (IBAction)methodName:(UIStoryboardSegue *)segue
{
} 
```

然后在 IB ctrl + 从按钮（或视图控制器）拖动到绿色的“退出”图标。从弹出菜单中选择methodName。如果您从视图控制器执行此操作，请在 segue 上设置标识符并使​​用 performSegueWithIdentifier: 从按钮操作调用它。

注意事项：

*   将在情节提要的每个视图控制器中检测方法名称。

*   你可以在不同的视图控制器中定义相同的方法名，但是当你执行 unwind segue 时，你会回到导航路径上最近的一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:09:07.537

我不确定你想做什么。但我认为取消方法需要在 2 个子视图控制器中，而不是在主视图控制器中。每个控制器一个（每个视图一个取消按钮）。这样你就不会对方法的多个声明有任何问题。

# java - ricorsive 方法中的字符串索引越界异常

> ID：15030396
> 
> 赞同：0
> 
> 时间：2013-02-22T18:00:44.617
> 
> 标签：java

程序返回一个字符串，得到两个字符串的互换字符；即 string s1 = "aceg" string s2 = "hfdb" 结果是 "abcdefgh"（两个字符串的长度总是相同的；

好吧，我是这样处理的：

```
public class Eserc2 {

    public static String ricorsiveString(String s1, String s2) {

        if(s1.length() == 0 && s2.length() == 0) {
            return "";
        } else {

            char c = s1.charAt(0);
            char b = s2.charAt(s2.length()-1);

            String s = String.valueOf(c) ;
            String t = String.valueOf(b) ;
            String tot = s+t ;

            return tot + ricorsiveString(s1.substring(1),s2.substring(s2.length()));
        }
    }

    public static void main(String[] args) {

        String a = "aceg";
        String b = "bdfh";
        ricorsiveString(a,b);

    }
} 
```

问题是当我编译 pc 时发现异常：

```
Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: -1
    at java.lang.String.charAt(String.java:658)
    at eserc2.Eserc2.ricorsiveString(Eserc2.java:20)
    at eserc2.Eserc2.ricorsiveString(Eserc2.java:26)
    at eserc2.Eserc2.main(Eserc2.java:34) 
```

你能帮我吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:03:57.493

```
 if(s1.length() == 0 && s2.length() == 0) { 
```

应该

```
 if(s1.length() == 0 || s2.length() == 0) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:04:23.437

问题是 if`s2`为空但不是`s1`：

```
if(s1.length() == 0 && s2.length() == 0) 
```

将为假（`s1`不为空），但这一行：

```
s1.length() == 0 && s2.length() == 0 
```

将尝试访问位置 -1 的字符。

注意：如果你一步一步调试你的程序，你会在比你输入问题更短的时间内发现问题！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T18:09:18.253

这条线没有做你想做的事（s2.substring(s2.length()) 调用总是给你一个长度为 0 的字符串）

```
return tot + ricorsiveString(s1.substring(1),s2.substring(s2.length())) 
```

它应该替换为

```
return tot + ricorsiveString(s1.substring(1),s2.substring(0, s2.length() - 1)); 
```

作为一种设计选择，您还应该测试传递的字符串是否符合您的前提条件，即它们必须具有相同的长度。或者，将 && 测试更改为 || （正如其他人所建议的那样）将使代码适用于不同长度的字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T18:08:27.380

你说的条件不正确，应该是：

```
if(s1.length() == 0 || s2.length() == 0) { 
```

因为如果任何一个可变长度为零，则代码不应执行。

# extjs - ext js拖放数据视图确定节点放置在

> ID：15030397
> 
> 赞同：0
> 
> 时间：2013-02-22T18:00:45.503
> 
> 标签：extjs, drag-and-drop, mouseevent, dataview

我正在使用 ext js 将数据从一个数据视图拖放到另一个数据视图。我想知道放置事件是否发生在现有节点的顶部，或者它是否只是被放置在数据视图的空白处。

这是我的 dropTarget 的代码：

```
...
onDesktopDataViewRender: function (v) {
    var dataView = v;

    v.dropTarget = Ext.create('Ext.dd.DropTarget', v.el, {
        ddGroup: 'FromSearchToDesktop',
        notifyDrop: function (source, e, dropData) {

            //Want do do something like:
            //if(dropped directly on any node) {
            //    do some logic with that node
            //}
            //else {
            //    do the code below

                var recordAlreadyExists = false;

                v.store.each(function (r) {
                    if (r.data.ID == dropData.searchData.ID) {
                        recordAlreadyExists = true;
                    }
                });

                if (recordAlreadyExists == false) {                        
                    v.store.add(dropData.searchData);
                }
            //end else

        }
    });
}
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T02:44:12.270

耶！终于想通了这个。

快速的答案是为节点创建一个 DropZone。长答案是如何做到这一点。

在我的程序中，用户可以将项目从 DataView A 拖放到 DataView B。将项目拖放到 DataView B 后，该项目将出现在 DataView B 中。最重要的是，用户可以从 DataView A 拖放项目，然后将其放在DataView B 中的一个节点。代码需要区分被拖放到 DataView 上的项目和被拖放到 DataView 内节点上的项目。

通用说明：

1.  在 DataViewB 的 onrender 事件中，创建一个 ddGroup 为“DataViewB”的 dropTarget
2.  在 notifyDrop 函数中，创建一个新节点。
3.  同样在 notifyDrop 函数中，创建另一个 dropTarget（这个用于节点而不是 DataView），其 ddGroup 为“DataViewBNode”。
4.  在 DataViewA 的 onRender 事件中，创建一个 DragZone，其 ddGroup 为“DataViewBNode”（！重要！）
5.  在 DataViewA 的 afterrender 事件中，将 dragZone 添加到“DataViewB”组。

现在，您将能够从 DataViewA 拖放到 DataViewB 的空白处以添加节点，但您也可以直接从 DataViewB 拖放到节点上并执行不同的操作。

**很重要的是第一个ddGroup是给节点的，在afterrender事件中添加的那个是给DataView的**

这是 DataView A 的代码：

```
onDataViewARender: function (v) {
    var dataView = v;
...
    v.dragZone = Ext.create('Ext.dd.DragZone', v.getEl(), {
        ddGroup: 'DataViewBNode',   
        getDragData: function (e) {
            var sourceEl = e.getTarget(v.itemSelector, 10), d;
            if (sourceEl) {
                d = sourceEl.cloneNode(true);
                d.id = Ext.id();
                return v.dragData = {
                    sourceEl: sourceEl,
                    repairXY: Ext.fly(sourceEl).getXY(),
                    ddel: d,
                    searchData: v.getRecord(sourceEl).data,
                    store: v.store,
                    source: 'DataViewA'
                }
            }
        },

        getRepairXY: function () {
            return this.dragData.repairXY;
        }
    });
},

onDataViewAAfterRender: function(v) {
    var dragZone = v.dragZone;

    dragZone.addToGroup('DataViewB');
}, 
```

这是 DataViewB 的代码

```
 onDataViewBRender: function (v) {
        var dataView = v;

        v.dropTarget = Ext.create('Ext.dd.DropTarget', v.el, {
            ddGroup: 'DataViewB',
            notifyDrop: function (source, e, dropData) {
                var recordAlreadyExists = false;

                v.store.each(function (r) {
                    if (r.data.ID == dropData.searchData.ID && r.data.Type == dropData.searchData.Type) {
                        recordAlreadyExists = true;
                    }
                });

                if (recordAlreadyExists == false) {                        
                    v.store.add(dropData.searchData);

                    var nodes = v.container.dom.childNodes[0].childNodes;
                    var index = v.container.dom.childNodes[0].childNodes.length -1;

                    //
                    //Here is where you create the dropTarget for the new node
                    //
                    nodes[index].dropTarget = Ext.create('Ext.dd.DropTarget', nodes[index], {
                        ddGroup: 'DataViewBNode',
                        notifyDrop: function (source, e, dropData) {
                            console.log('success')                            
                        }
                    });
                }

            }
        });
...
    }, 
```

# java - 从 iFrame 弹出窗口刷新父窗口

> ID：15030402
> 
> 赞同：0
> 
> 时间：2013-02-22T18:00:50.823
> 
> 标签：java, javascript, ajax

我有一个 HTML 页面 (index.htm) 和一个链接。单击该链接会打开一个 ColorBox iFrame (popup.htm)，它是一个带有提交按钮的表单。

现在，当有人在该 popup.htm 页面中提交表单时，我需要 index.htm 自动刷新到 -> index2.htm。

我已经尝试过这个和变化，但没有成功。

```
<form onsubmit="window.opener.location = 'http://www.myDomain.com/index2.htm';"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:12:04.360

你试过吗`<form onsubmit="window.top.location.href = 'http://www.myDomain.com/index2.htm';">`当然 iframe 和 top 必须在同一个域上，并且不要破坏同源策略。

# asp.net-mvc-4 - 表单经过身份验证的 Web API 和 jQuery

> ID：15030403
> 
> 赞同：0
> 
> 时间：2013-02-22T18:01:01.803
> 
> 标签：asp.net-mvc-4, asp.net-web-api, forms-authentication

我有一个我正在努力解决的问题。

我有一个网站和一个单独的 WebAPI，我希望能够相互验证。我在想表单身份验证在这里最好。但是，在我的网站上，如何通过 jQuery AJAX 调用调用经过身份验证的表单 webAPI？

有没有人有任何链接或建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:56:47.060

这篇博文中有一个关于[在 Web API 中混合表单身份验证和基本身份验证](http://kevin-junghans.blogspot.com/2013/02/mixing-forms-authentication-basic.html)的讨论。尽管在 Web API 与 Web 应用程序驻留在同一台服务器上进行了测试，但您可能能够利用本文中的一些原则。

如果您将 Web API 和 Web 应用程序放在不同的服务器上，您的 Web 应用程序将遇到[跨域问题](https://stackoverflow.com/questions/3506208/jquery-ajax-cross-domain)，并且必须在 Web API 中支持 JSONP。您的网站可能的解决方法是在您的 Web 服务器上本地创建一个 Web API，这只是远程服务器上 Web API 的一个外观。[您使用AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx)在本地 Web API 上合并标准安全方法，而后者又只调用远程服务器上的 Web API。您可以在远程 Web API 上为外部用户合并任何您想要的安全方法。

# python - 如何从 python 脚本在单独的窗口中启动子 cmd 终端并在它们上执行脚本？

> ID：15030404
> 
> 赞同：0
> 
> 时间：2013-02-22T18:01:01.870
> 
> 标签：python, windows, parallel-processing, terminal, cmd

我一直在尝试从执行我的主要 python 脚本的 ipython 终端打开几个终端（尽管一个就足够了），但没有成功。我希望这个主要的 python 脚本根据需要打开尽可能多的 cmd 终端，并在每个终端上执行一个特定的 python 脚本。脚本完成后，我需要终端窗口保持打开状态。

我可以设法使用以下命令启动一个终端：

```
import os
os.startfile('cmd') 
```

但我不知道如何向它传递参数，例如：

```
/K python myscript.py 
```

有人对如何做到这一点有任何想法吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:30:34.993

[http://docs.python.org/2/library/subprocess.html](http://docs.python.org/2/library/subprocess.html)

```
 import subprocess
    subprocess.check_output(["python", "c:\home\user\script.py"]) 
```

或者

```
 subprocess.call(["python", "c:\home\user\script.py"]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:47:59.643

使用子流程模块。查看更多信息。谷歌>>python子进程

# jquery - 使用 JQuery 仅显示/隐藏一个 DIV

> ID：15030409
> 
> 赞同：0
> 
> 时间：2013-02-22T18:01:39.787
> 
> 标签：jquery, css, html, hover

我有一页图像，我想在鼠标悬停时显示/隐藏标签。图像也是链接，div 称为“.smallproj”。JQuery 脚本效果很好，但是当我将鼠标悬停在 .smallproj a 的任何一个实例上时，当然会显示 .smallproj p 的所有实例。我知道我需要更改脚本，以便仅显示悬停在上方的 .smallproj 实例，但在这种情况下最好的方法是什么？

jQuery 脚本：

```
$(".smallproj a").on({
    mouseover: function() {
        $(".smallproj p").show();
    },      
    mouseout: function() {
        $(".smallproj p").hide();
    }       
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:03:26.397

我认为你可以这样做：

```
$('.smallproj p').hover(function(){
  $(this).show();
}); 
```

或者，您似乎也想悬停链接，因此请尝试：

```
$('.smallproj a').hover(function(){
  $(this).find('p').show();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:03:54.813

您可以使用各种方式。一些例子：

**同一水平**

```
$(".smallproj a").on({
    mouseover: function() {
        $(this).siblings("p").show();
    },      
    mouseout: function() {
        $(this).siblings("p").hide();
    }       
}); 
```

**在父级内部**

```
$(".smallproj a").on({
    mouseover: function() {
        $(this).parent().find("p").show();
    },      
    mouseout: function() {
        $(this).parent().find("p").hide();
    }       
}); 
```

信息：

1.  [兄弟姐妹](http://api.jquery.com/siblings/)
2.  [家长](http://api.jquery.com/parent/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:05:14.153

您需要使用`this`关键字，它指的是事件所针对的元素，然后从它（`a`被悬停的元素）遍历到`p`要显示的元素。一般情况下，除了它们都在类的某个东西中之外，不对它们彼此相关的位置做出任何假设，这`.smallproj`将是这样的：

```
$(".smallproj a").on({
    mouseover: function() {
        $(this).closest(".smallproj").find("p").show();
    },      
    mouseout: function() {
        $(this).closest(".smallproj").find("p").hide();
    }       
}); 
```

# c# - javascript 代码在使用 ascx 控件时重复

> ID：15030412
> 
> 赞同：1
> 
> 时间：2013-02-22T18:01:59.047
> 
> 标签：c#, web, charts, fusioncharts

我有一个 FusionCharts 库，我想用它在 C# Web 应用程序中绘制图表。创建图表的代码（在单独的文件夹中找到一些开销文件之后）是：

```
 <script type="text/javascript" src="Charts/FusionCharts.js">

  <script type="text/javascript"><!--         

  var myChart = new FusionCharts( "Charts/Spline.swf", 
  "myChartId", "400", "300", "0");
  myChart.setXMLUrl("Data.xml");
  myChart.render("chartContainer");

  // -->     
  </script> 
```

现在我试图做的是将那段代码包含在用户控件中。但我希望可以选择向它传递一些参数，例如我希望它使用的“Data.xml”以及高度和宽度。我现在可以使用它，但是我当前的问题是当我在页面中包含多个控件实例时，因为如果我检查项目页面的“查看源代码”代码，它会添加两个组件，但 javascript 看起来像这样：

```
 <script type="text/javascript" src="Charts/FusionCharts.js">

  <script type="text/javascript"><!--         

  var myChart = new FusionCharts( "Charts/Spline.swf", 
  "myChartId", "400", "300", "0");
  myChart.setXMLUrl("Data.xml");
  myChart.render("chartContainer");

  // -->     
  </script>

  <script type="text/javascript" src="Charts/FusionCharts.js">

  <script type="text/javascript"><!--         

  var myChart = new FusionCharts( "Charts/Spline.swf", 
  "myChartId", "400", "300", "0");
  myChart.setXMLUrl("Data.xml");
  myChart.render("chartContainer");

  // -->     
  </script> 
```

它复制了代码，因此我的变量 myChart 被复制了，并且正如预期的那样，只呈现了一个图表。解决这个问题的最佳方法是什么？或者基本上包括我可以为每个控件操作的 page_load 中动态生成的 JavaScript？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:21:01.903

如果您希望每页仅包含一次 FusionCharts.js 脚本，请`RegisterClientScriptInclude`在以下位置注册`OnPreRender`：

```
protected override void OnPreRender(EventArgs e)
{
    base.OnPreRender(e);
    this.Page.ClientScript.RegisterClientScriptInclude(
        typeof(YourUserControl), "FusionCharts", "Charts/FusionCharts.js");
} 
```

对于其他脚本块，请说明它应该如何工作。`myChart`唯一应该不同的是吗？`"myChartId"`和怎么样`"chartContainer"`？

如果问题仅仅是`myChart`变量相互冲突，那么您可以将您的脚本包含在一个自动执行的匿名函数中：

```
<script type="text/javascript"><!--
(function() {
    var myChart = new FusionCharts( "Charts/Spline.swf", 
        "<%= this.ChartId %>", "400", "300", "0");
        myChart.setXMLUrl("<%= this.DataFile %>");
        myChart.render("<%= this.ChartContainerId %> ");
})();
// -->     
</script> 
```

# sql-server-2005 - IIS 6 应用程序池不一致地被自动禁用

> ID：15030417
> 
> 赞同：2
> 
> 时间：2013-02-22T18:02:15.270
> 
> 标签：sql-server-2005, asp.net-mvc-4, active-directory, iis-6, windows-server-2003

我有一个 MVC Web 应用程序部署到运行 IIS 6 的 2003 服务器。本周开始出现不一致的行为，当时我们创建了一个具有上帝权限的新域服务帐户，用作应用程序池和匿名用户的身份具有集成身份验证集的网站。此服务帐户也已添加到对数据具有完全权限的 SQL 用户。

不一致的行为是 Web 应用程序将运行良好，命中数据等...，然后应用程序池会突然自动禁用。我检查了服务器上的事件日志，果然我看到了两个警告和一个错误，指出身份无效并且池已禁用。

我将其重新打开，然后尝试再次浏览网站并 BOOM！它再次这样做。经过三次尝试，我们终于将帐户锁定并必须将其解锁。然后它又回到了同样的问题。

有任何想法吗？因为我已经不知所措了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-08T16:44:27.030

这个问题可能会得到解决，因为这个问题很老，但无论如何。

尝试使用用户名和密码手动登录，然后在应用程序池上重新应用身份，如果有疑问，回答“是”以应用用户权限，重新启动应用程序池并检查事件日志是否有错误。

确保用户帐户具有适当的用户权限，否则事件日志中会有投诉。还要确保允许登录用户帐户已输入服务器或允许任何。

谢谢

安德烈亚斯

# excel-formula - Excel VLOOKUP 从多个工作簿中提取数据

> ID：15030426
> 
> 赞同：0
> 
> 时间：2013-02-22T18:02:34.527
> 
> 标签：excel-formula, vlookup

好的，所以我正在尝试创建一个 Vlookup 来查找位于几个不同工作簿之一中的用户名。如果 B2 = BOB 它将在所有工作表中查找 BOB 并返回正确的值。永远不会有 BOB 的重复，它永远是一对一的关系。

这是我的尝试，根本不起作用。

```
=IF(ISNA(VLOOKUP(B3,'[Team 304.xlsx]Data'!$A:$J,4,FALSE)),VLOOKUP(B3,'[Team 304.xlsx]Data'!$A:$J,4,FALSE),IF(ISNA(VLOOKUP(B3,'[Team 302.xlsx]Data'!$A:$J,4,FALSE)),,IF(ISNA(VLOOKUP(B3,'[Team 303.xlsx]Data'!$A:$J,4,FALSE)),,(VLOOKUP(B3,'[Team 301.xlsx]Data'!$A:$J,4,FALSE))))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:37:13.453

恐怕你的说法是完全错误的。您混淆了真假动作，并且缺少第二个和第三个 IF 的“真”动作。

这是重组后的语句：

```
=IF(ISNA(VLOOKUP(B3,'[Team 304.xlsx]Data'!$A:$J,4,FALSE)),
    IF(ISNA(VLOOKUP(B3,'[Team 302.xlsx]Data'!$A:$J,4,FALSE)),
        IF(ISNA(VLOOKUP(B3,'[Team 303.xlsx]Data'!$A:$J,4,FALSE)),
            IF(ISNA(VLOOKUP(B3,'[Team 301.xlsx]Data'!$A:$J,4,FALSE)),
               0,
               VLOOKUP(B3,'[Team 301.xlsx]Data'!$A:$J,4,FALSE)),
            VLOOKUP(B3,'[Team 303.xlsx]Data'!$A:$J,4,FALSE)),
        VLOOKUP(B3,'[Team 302.xlsx]Data'!$A:$J,4,FALSE)),
    VLOOKUP(B3,'[Team 304.xlsx]Data'!$A:$J,4,FALSE)) 
```

显然，您需要将其放在一条线上才能使其正常工作。

# linux - LC-3 汇编语言 - 交换值

> ID：15030427
> 
> 赞同：1
> 
> 时间：2013-02-22T18:02:35.820
> 
> 标签：linux, assembly, lc3

如何交换到地址中的值。目前我有 2 个包含地址的寄存器。然后我有 2 个临时变量来存储这些地址。然后我加载了值，因为我有地址。但我不知道如何交换值。我正在尝试进行冒泡排序。下面的代码是我目前拥有的

```
IF          ;swapping condition
   ST R2,idata    ;temporily hold the smaller data
   ST R1,imindata ;temporaily hold the larger data
   ST R2,iminaddres ;store the values into that address
   ST R2,iaddress   ;finish the swaping of the two values
   LD R1,iminaddres ;reput the address back into the register
   LD R2,iaddres    ;reput the address back into the register to be used for next cycle 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:06:32.830

你会如何在 C 中做到这一点？

```
temp = a;
a = b;
b = temp; 
```

然后了解需要从内存中加载这些值，这会改变一些事情

```
tempa = a;
tempb = b;
b = tempa;
a = tempb; 
```

然后隔离负载和存储

```
rega <= load(a);
regb <= load(b);
store(a) <= regb;
store(b) <= rega; 
```

然后在汇编中实现它。这闻起来像家庭作业，所以我不会为你做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:32:22.913

如果您只想交换两个寄存器的内容，则有一个简单的位旋转技巧：

```
XOR R1,R2
XOR R2,R1
XOR R1,R2 
```

这将在不使用任何内存的情况下交换两个寄存器的内容。

# ios - MBProgressHUD 在多行中显示标签文本

> ID：15030428
> 
> 赞同：18
> 
> 时间：2013-02-22T18:02:35.653
> 
> 标签：ios, label, newline, frame, mbprogresshud

嗨，我的 iPad 屏幕上有一个 MBProgressHUD。工作得很好。但我想将标签更改为以三行显示。像这样

```
 self.hud =  [[MBProgressHUD alloc] initWithView:self.navigationController.view];  
self.hud.frame = CGRectMake(0, 0, 120, 143);

[self.navigationController.view addSubview:self.hud];
self.hud.delegate = self;
self.hud.mode = MBProgressHUDModeAnnularDeterminate;
NSString *strloadingText = [NSString stringWithFormat:@"Loading Data.\r Please Wait.\r 1-2 Minutes"];
NSLog(@"the loading text will be %@",strloadingText);
self.hud.labelText = strloadingText;
[self.hud show:YES]; 
```

所以我想要 3 行中的标签

加载数据中。

请稍等

1-2 分钟

或者我可以将图像分配给 HUD 吗？

所有这些都应该在标签文本中。但我最终只有一行。我怎样才能做到这一点？如果您需要更多信息，请询问。谢谢。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-22T19:19:10.263

MBProgressHUD 的 detailsLabelText 属性是多行但不是 labelText 属性。

所以，你可以尝试这样的事情

```
MBProgressHUD * hud =  [MBProgressHUD showHUDAddedTo:self.view animated:YES];
hud.frame = CGRectMake(0, 0, 120, 143);

hud.mode = MBProgressHUDModeAnnularDeterminate;
NSString *strloadingText = [NSString stringWithFormat:@"Loading Data."];
NSString *strloadingText2 = [NSString stringWithFormat:@" Please Wait.\r 1-2 Minutes"];

NSLog(@"the loading text will be %@",strloadingText);
hud.labelText = strloadingText;
hud.detailsLabelText=strloadingText2; 
```

您可以使用属性 detailsLabelFont 设置 detailsLabelText 字体。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-06-09T02:34:41.103

我也有这样的问题！

你可以设置`hud.label.numberOfLines = 0;`

它有效！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-30T11:41:53.207

labelText 与 detailsText 不同的原因，我想是因为从标题/描述的角度来看，它与 UIAlertView 非常相似。

这两个标签之间的区别非常明显，因为它们的用途不同，例如：

*   与详细文本相比，标题具有更大的字体，通常是粗体。
*   标题应简短明了，取自流行的词典网站（描述不言自明）：

> 标题：描述性名称；一个绰号。

我建议不要使用多行标题，保持简短，并使用描述文本。

多行标题不起作用的原因是由于 layoutSubviews 实现，没有计算大小。如果您在 layoutSubviews 中检查 MBProgressHud.m，

```
CGFloat remainingHeight = bounds.size.height - totalSize.height - kPadding - 4 * margin; 
CGSize maxSize = CGSizeMake(maxWidth, remainingHeight);
CGSize detailsLabelSize = [detailsLabel.text sizeWithFont:detailsLabel.font 
                            constrainedToSize:maxSize lineBreakMode:detailsLabel.lineBreakMode];
totalSize.width = MAX(totalSize.width, detailsLabelSize.width);
totalSize.height += detailsLabelSize.height;
if (detailsLabelSize.height > 0.f && (indicatorF.size.height > 0.f || labelSize.height > 0.f)) {
    totalSize.height += kPadding;
} 
```

注意对`-[NSString sizeWithFont: constrainedToSize: lineBreakMode:]`描述文本的调用；此方法计算显示文本所需的大小 - 使用尽可能多的行，而`-[NSString sizeWithFont:]`计算显示文本所需的大小，但最多显示一行。

我建议不要使用多行标题，而是提供更短的标题，并附上一些描述文本。

如果您只是必须具有多行标题（MBProgressHud.m 中的所有更改）：

```
- (void)setupLabels {
label = [[UILabel alloc] initWithFrame:self.bounds];
label.adjustsFontSizeToFitWidth = NO;
label.textAlignment = MBLabelAlignmentCenter;
label.opaque = NO;
label.backgroundColor = [UIColor clearColor];
label.textColor = [UIColor whiteColor];
label.font = self.labelFont;
label.text = self.labelText;
>>> label.numberOfLines = 0;
[self addSubview:label];  
    ... 
```

代替：

```
CGSize labelSize = [label.text sizeWithFont:label.font];
labelSize.width = MIN(labelSize.width, maxWidth);
totalSize.width = MAX(totalSize.width, labelSize.width);
totalSize.height += labelSize.height;
if (labelSize.height > 0.f && indicatorF.size.height > 0.f) {
    totalSize.height += kPadding;
}

CGFloat remainingHeight = bounds.size.height - totalSize.height - kPadding - 4 * margin; 
CGSize maxSize = CGSizeMake(maxWidth, remainingHeight);
CGSize detailsLabelSize = [detailsLabel.text sizeWithFont:detailsLabel.font 
                            constrainedToSize:maxSize lineBreakMode:detailsLabel.lineBreakMode]; 
```

和：

```
CGFloat remainingHeight = bounds.size.height - totalSize.height - kPadding - 4 * margin;  
CGSize maxSize = CGSizeMake(maxWidth, remainingHeight);  

CGSize labelSize = [label.text sizeWithFont:label.font constrainedToSize:maxSize lineBreakMode:label.lineBreakMode];
totalSize.width = MAX(totalSize.width, labelSize.width);
totalSize.height += labelSize.height;

if (labelSize.height > 0.f && indicatorF.size.height > 0.f) {
    totalSize.height += kPadding;
}

remainingHeight = bounds.size.height - totalSize.height - kPadding - 4 * margin;  
CGSize detailsLabelSize = [detailsLabel.text sizeWithFont:detailsLabel.font 
                            constrainedToSize:maxSize lineBreakMode:detailsLabel.lineBreakMode]; 
```

希望现在提供帮助还为时不晚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-11T11:28:13.067

self.hud.minSize = CGSizeMake(300, 100);

# java - Calendar 的 getTime() 方法返回错误的时间

> ID：15030433
> 
> 赞同：0
> 
> 时间：2013-02-22T18:02:54.717
> 
> 标签：java, android

好吧，我想简单地在我的应用程序中获取当前日期。

我使用这个片段：

```
Calendar cal = Calendar.getInstance();
cal.getTime().toGMTString(); 
```

出于某种原因，它给了我这样的信息：“2013 年 2 月 22 日 18:00:48 GMT”

嗯**，匈牙利现在是 19:00**，**不是 18:00**，**相差 1 小时。**

有没有搞错 ？:) 我怎样才能实现一种可靠的方法来始终获取当前日期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:08:27.647

嗯，匈牙利是格林威治标准时间+1，这就是失踪的时间。已[`toGMTString()`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#toGMTString%28%29)弃用，您应该改用[`DateFormat.format()`](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html#format%28java.util.Date%29)- 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:09:55.493

感谢您的回复，我不应该使用 GMT。取而代之的是：

```
 cal.getTime().toLocaleString(); 
```

# php - PHP CLI 颜色整行背景

> ID：15030435
> 
> 赞同：2
> 
> 时间：2013-02-22T18:03:02.567
> 
> 标签：php, bash

我想在使用命令行的 PHP 应用程序中为整行背景颜色着色。问题是我没有找到任何“更聪明”的方法来做到这一点：

```
public function outFullLine($string, $center = false)
{
    $terminalColumns = exec('tput cols');
    $emptyRow = implode(array_fill(0, $terminalColumns, " "));

    if ($center) {
        $position = strlen($emptyRow) / 2 - strlen($string) / 2;
    } else {
        $position = 0;
    }

    $outputString = substr_replace(
        $emptyRow,
        $string,
        $position,
        strlen($string)
    );

    fwrite(STDOUT, $string);
} 
```

那么有什么方法可以做到这一点而不用实际填充空格？我想这更像是一个 bash 而不是 PHP 问题，所以我标记了两者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:06:37.500

以时间为例：[http ://www.if-not-true-then-false.com/2010/php-class-for-coloring-php-command-line-cli-scripts-output-php-output-着色-使用-bash-shell-colors/](http://www.if-not-true-then-false.com/2010/php-class-for-coloring-php-command-line-cli-scripts-output-php-output-colorizing-using-bash-shell-colors/)

或者放在课堂上然后调用颜色：

```
class ColorCLI {
            static $foreground_colors = array(
                    'black'        => '0;30', 'dark_gray'    => '1;30',
                    'blue'         => '0;34', 'light_blue'   => '1;34',
                    'green'        => '0;32', 'light_green'  => '1;32',
                    'cyan'         => '0;36', 'light_cyan'   => '1;36',
                    'red'          => '0;31', 'light_red'    => '1;31',
                    'purple'       => '0;35', 'light_purple' => '1;35',
                    'brown'        => '0;33', 'yellow'   => '1;33',
                    'light_gray'   => '0;37', 'white'        => '1;37',
            );

            static $background_colors = array(
                    'black'        => '40', 'red'          => '41',
                    'green'        => '42', 'yellow'       => '43',
                    'blue'         => '44', 'magenta'      => '45',
                    'cyan'         => '46', 'light_gray'   => '47',
            );

            // Returns colored string
            public static function getColoredString($string, $foreground_color = null, $background_color = null) {
                    $colored_string = "";

                    // Check if given foreground color found
                    if ( isset(self::$foreground_colors[$foreground_color]) ) {
                            $colored_string .= "\033[" . self::$foreground_colors[$foreground_color] . "m";
                    }
                    // Check if given background color found
                    if ( isset(self::$background_colors[$background_color]) ) {
                            $colored_string .= "\033[" . self::$background_colors[$background_color] . "m";
                    }

                    // Add string and end coloring
                    $colored_string .=  $string . "\033[0m";

                    return $colored_string;
            }

            // Returns all foreground color names
            public static function getForegroundColors() {
                    return array_keys(self::$foreground_colors);
            }

            // Returns all background color names
            public static function getBackgroundColors() {
                    return array_keys(self::$background_colors);
            }
    } 
```

您需要首先计算字符总数，然后将颜色填充到一行：

```
$screenwidth = exec('tput cols');
$screenheight = exec('tput lines'); 
```

检查这个颜色和行：[http](http://blog.apokalyptik.com/2007/11/20/colorizing-php-cli-scripts/) ://blog.apokalyptik.com/2007/11/20/colorizing-php-cli-scripts/这个完整的类代码作为例子：[https ://github.com/runekaagaard /php-termcolor/blob/master/termcolor.php](https://github.com/runekaagaard/php-termcolor/blob/master/termcolor.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:57:00.057

当您为字符及其背景着色时，要为整行着色，您必须用空白字符填充它，例如空格或制表符。顺便说一句，有一个很好的[控制台颜色梨类](http://pear.php.net/package/Console_color)

# php - 谷歌浏览器“重定向循环”但在其他网络浏览器中没有

> ID：15030436
> 
> 赞同：0
> 
> 时间：2013-02-22T18:03:03.077
> 
> 标签：php, html, mysql, google-chrome, session-variables

我实现了一个在某个目录中托管学校文件的网站，索引页面只是一个登录页面。当我使用谷歌浏览器访问这个网站时，它会不断地给我一个“重定向循环错误”，但是，如果我使用任何其他浏览器，那么网站就会正常加载。

我的 index.php 网站代码如下，任何建议都值得赞赏。

网站网址是：[https ://secure.fixnode.ca/](https://secure.fixnode.ca/)

谢谢，菲利普·K

```
<?php
session_start();

function loggedin()
{
 if (isset($_SESSION['myusername']) || isset($_COOKIE['myusername']))
 {
    $loggedin = TRUE;
    return $loggedin;
 }
}

if (loggedin())
{
 header("Location: /login_success.php");
die();
}

if(isset($_POST['submit']))
{

$host="localhost"; // Host name 
$username="user"; // Mysql username 
$password="password"; // Mysql password 
$db_name="database_name"; // Database name 
$tbl_name="table_name"; // Table name

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form 
$myusername=$_POST['username']; 
$mypassword=$_POST['password'];
$rememberme=$_POST['rememberme'];

// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);

$encrypted_mypassword=md5($mypassword);
$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$encrypted_mypassword'";
$result=mysql_query($sql);
mysql_close();
// Mysql_num_row is counting table row
if(mysql_num_rows($result) == 1) //user exists
{
  if ($rememberme=="on"){
      setcookie("myusername", $myusername, time()+7200);
   }
 elseif ($rememberme==""){
      $_SESSION['myusername'] = $myusername;
   }

header("Location: /login_success.php");
exit();
}
else {
echo '<div class="alert">Incorrect Username or Password!</div>';
}
}
?>

<?php
// DETECT MOBILE DEVICE
//session_start();
$user_agent=$_SERVER['HTTP_USER_AGENT'];
$iphone = strpos($user_agent,"iPhone");
$android = strpos($user_agent,"Android");
$palmpre = strpos($user_agent,"webOS");
$berry = strpos($user_agent,"BlackBerry");
$ipod = strpos($user_agent,"iPod");

if($_GET['mobile_site'])
{
    if (strcmp($_GET['mobile_site'],"false")==0)
    $_SESSION['mobile_site']=false;
    if (strcmp($_GET['mobile_site'],"true")==0)
    $_SESSION['mobile_site']=true;
}
if ($iphone || $android || $palmpre || $ipod || $berry == true)
{
$_SESSION['mobile_device']=true;    //

if (isset($_SESSION['mobile_site']))
    {
    }
else
    $_SESSION['mobile_site']=true;
}
else
{
$_SESSION['mobile_site']=false;
$_SESSION['mobile_device']=false;
}
?>

<!DOCTYPE HTML>
<html>
<head>
<title>Secure Customer Login</title>
<meta charset="UTF-8" />
<script type="application/javascript" src="scripts/bubble_bookmark.js" charset="utf-></script>
<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<meta http-equiv="X-UA-Compatible" content="IE=9" />
<?php if($_SESSION['mobile_site']==true){ ?>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<?php } ?>
<script type='text/javascript'>
    function navigator_Go(url) {
    window.location.assign(url); 
    }
    </script>
<script type="text/javascript">

var addToHomeConfig = {
touchIcon: true,
};
</script>
<link rel="stylesheet" type="text/css" href="css/reset.css">
<link rel="stylesheet" type="text/css" href="css/structure.css">
<script>document.createElement('footer');</script>
</head>
<body>
<center><img src="/images/logo.png"></center>
<form class="box login" name="login" method="post" action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>">
<fieldset class="boxBody">
  <label>Username</label>
  <input type="email" name="username" tabindex="1" placeholder="Email" required="required">
  <label><?php if($_SESSION['mobile_site']==true){ ?><a href="javascript:navigator_Go('recovery.php');" class="rLink" tabindex="5">Forget your password?</a><?php } ?><?php if($_SESSION['mobile_site']==false){ ?><a href="recovery.php" class="rLink" tabindex="5">Forget your password?</a><?php } ?>Password</label>
  <input type="password" name="password" tabindex="2" placeholder="Password" required="required">
</fieldset>
<footer>
  <label><input type="checkbox" tabindex="3" name="rememberme">Keep me logged in</label>
  <input type="submit" name="submit" value="Login" class="btnLogin" tabindex="4">
</footer>
</form>
<footer id="main">
  &copy; 2011 Fixnode Computer Services.  All rights reserved.</a>
</footer>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:11:02.287

登录时使您的函数 login()`return true;`和`return false`；未登录时使用`if(loggedin() == true)` and 而不是`die()`使用检查功能`exit;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:37:20.573

该子域上的任何 URL 都会将浏览器发送到重定向循环。例如：

```
https://secure.fixnode.ca/loops-are-cool 
```

看起来还有其他东西在做重定向。也许在 .htaccess 文件中？

# java - 如何在 try catch 块之外访问变量

> ID：15030438
> 
> 赞同：7
> 
> 时间：2013-02-22T18:03:19.480
> 
> 标签：java, return, try-catch, return-value

我正在尝试从具有**try-catch 块的函数****返回一个布尔值**，

 **但问题是我不能返回任何值。

我知道 try-catch 块内的变量不能在它之外访问，但我仍然想要。

```
public boolean checkStatus(){
        try{

        InputStream fstream = MyRegDb.class.getClassLoader().getResourceAsStream("textfile.txt");
        // Use DataInputStream to read binary NOT text.
        BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
        String strLine;

        //Read File Line By Line
        strLine = br.readLine();
        // Print the content on the console
        System.out.println (strLine);

        ind.close();
        if(strLine.equals("1")){

            return false;   
        }else{
            return true;    
        }

    }catch(Exception e){}
} 
```

在我的项目中，这对我来说是一个非常严重的问题。我用谷歌搜索，并尝试了自己，但没有解决。

我希望现在我能找到一些解决方案。我知道它有错误说**缺少返回语句** ，但我希望程序完全像这样工作。

现在**我对此很严格的原因**

在我的 jar 文件中，我必须访问文本文件以查找值 1 或 0，如果“1”则激活，否则停用。

这就是我使用布尔值的原因。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T18:04:39.413

只需在 try/catch 之外声明布尔值，并在 try 块中设置值

```
public boolean myMethod() {
    boolean success = false;
    try {
        doSomethingThatMightThrowAnException();
        success = true;
    }
    catch ( Exception e ) {
        e.printStackTrace();
    }
    return success;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-22T18:05:11.160

在您的方法中，如果`Exception`抛出 an ，则没有 return 语句。将`return`语句放置在异常处理程序中、`finally`块中或异常处理程序之后。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-22T18:07:29.860

错误是在引发异常的情况下您没有返回任何内容。

尝试以下操作：

```
public boolean checkStatus(){
   boolean result = true;  // default value.
   try{

        InputStream fstream = MyRegDb.class.getClassLoader().getResourceAsStream("textfile.txt");
        // Use DataInputStream to read binary NOT text.
        BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
        String strLine;

        //Read File Line By Line
        strLine = br.readLine();
        // Print the content on the console
        System.out.println (strLine);

        ind.close();
        if(strLine.equals("1")){

            result = false;   
        }else{
            result = true;    
        }

    }catch(Exception e){}
    return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T18:08:57.440

在 try/catch 块之前声明 String strLine br，然后在 try/catch 块
之后编写 if 语句，例如

```
 String strLine;

    try{
        //......
    }catch(Exception e){
        //.....
    }

    if(strLine.equals("1"))
       return false;   

    return true; 
```

摆脱 else 块。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-27T19:08:10.417

```
import java.io.*;
public class GameHelper 
{
    public String getUserInput(String prompt) {
        String inputLine = null;
        System.out.print(prompt + “ “);
        try {
            BufferedReader is = new BufferedReader(
            new InputStreamReader(System.in));
            inputLine = is.readLine();
            if (inputLine.length() == 0 ) return null;
        } 
        catch (IOException e) {
            System.out.println(“IOException: “ + e);
        }
        return inputLine;
    }
} 
```

确保`import java.io.*`在编写程序之前进行编写。`try`现在您甚至可以在and之外返回该函数`catch`**

# objective-c - NSJSONSerialization：正确处理特殊字符

> ID：15030441
> 
> 赞同：0
> 
> 时间：2013-02-22T18:03:30.457
> 
> 标签：objective-c, json, cocoa

我想使用 JSON 文件中的在线数据。它目前正在工作，但是当我使用特殊字符时，它显示“null”。这是我正在使用的代码：

```
NSString *urlString = [NSString stringWithFormat:@"http://belesios.com/burc/koc2.php"];
NSURL *url = [NSURL URLWithString:urlString];
NSData *data = [NSData dataWithContentsOfURL:url];
NSError *error;
NSMutableDictionary *json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
NSLog(@"%@", json);
NSString *ciktiText = [[NSString alloc] initWithFormat:@"%@", json];
[kocLabel setText:ciktiText]; 
```

例如，如果我的文件包含 ç 或 ü，则返回 null。我需要做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T19:39:27.910

试试这个方法，看看从服务器拉取数据时使用的是什么编码：

```
NSStringEncoding encoding;
NSString *jsonString =[NSString stringWithContentsOfURL:URL usedEncoding:&encoding error:&error];
if (error)
    NSLog(@"Error: %@", error); 
```

您应该检查服务器返回的数据的编码。您的代码是正确的，但您应该添加一些检查 if error != nil 然后不要执行并显示或记录它。

```
NSString *jsonString = @"{\"abc\":\"ç or ü\"}";
NSDictionary *jsonObj = [NSJSONSerialization JSONObjectWithData:[jsonString dataUsingEncoding:NSUTF8StringEncoding] options:NSJSONReadingAllowFragments error:&error];
NSLog(@"Output: %@", jsonObj); 
```

**输出： { abc = "\U00e7 或 \U00fc"; 如果您使用Fiddler**或其他软件打印原始响应，这就是您的服务器响应与编码字符的样子。

目前，您的数据看起来像 UTF8 编码的字符应该像**\U00e7** = ç ![在此处输入图像描述](../Images/fa46111be905d6b9d6fb8bf85497a4d9.png)

# javascript - Fancybox 独特的 url 内联内容链接

> ID：15030444
> 
> 赞同：0
> 
> 时间：2013-02-22T18:03:38.387
> 
> 标签：javascript, jquery, url, fancybox

我正在寻找使用网址加载fancybox弹出窗口，所以上传加载fancybox弹出使用：

www.mysite.com/index.html#hrefgoeshere

剧本会是什么？

感谢您的任何帮助或指导。

凯尔

***更新***

谢谢大家的帮助！！这就是最终对我有用的东西。我将我们的内容保存到单独的 html 文件中，然后使用 fancybox.iframe 调用它们

JS：

```
<script>
$(document).ready(function () {
    $('.fancybox').fancybox({
     'scrolling'   : 'no'   
    });
    if (window.location.hash !== "") {
        $(window.location.hash).click();
    }
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:25:30.847

您可以尝试使用我认为更安全的fancybox方法：

前任：

```
$(document).ready(function($) { 
    $.fancybox({
        content: $(window.location.hash).html()
    });
}); 
```

# php - Symfony - 找不到路线

> ID：15030448
> 
> 赞同：0
> 
> 时间：2013-02-22T18:03:49.440
> 
> 标签：php, symfony

找不到“GET /hello.html”的路由

这是我尝试访问时遇到的错误`http://localhost/project/web/app_dev.php/hello.html`

默认控制器：

```
<?php
/**
 * @Route("/hello.html")
 * @Template()
 */
public function indexAction()
{
    return array();
}
?> 
```

路由.yml：

```
MyHelloworldBundle:
    resource: "@MyHelloworldBundle/Controller/"
    type:     annotation
    prefix:   / 
```

应用内核.php：

```
class AppKernel extends Kernel
{
    public function registerBundles()
    {
        $bundles = array(
            new Symfony\Bundle\FrameworkBundle\FrameworkBundle(),
            new Symfony\Bundle\SecurityBundle\SecurityBundle(),
            new Symfony\Bundle\TwigBundle\TwigBundle(),
            new Symfony\Bundle\MonologBundle\MonologBundle(),
            new Symfony\Bundle\SwiftmailerBundle\SwiftmailerBundle(),
            new Symfony\Bundle\AsseticBundle\AsseticBundle(),
            new Doctrine\Bundle\DoctrineBundle\DoctrineBundle(),
            new Sensio\Bundle\FrameworkExtraBundle\SensioFrameworkExtraBundle(),
            new JMS\AopBundle\JMSAopBundle(),
            new JMS\DiExtraBundle\JMSDiExtraBundle($this),
            new JMS\SecurityExtraBundle\JMSSecurityExtraBundle(),
            new My\HelloworldBundle\MyHelloworldBundle(),
        );

        if (in_array($this->getEnvironment(), array('dev', 'test'))) {
            $bundles[] = new Symfony\Bundle\WebProfilerBundle\WebProfilerBundle();
            $bundles[] = new Sensio\Bundle\DistributionBundle\SensioDistributionBundle();
            $bundles[] = new Sensio\Bundle\GeneratorBundle\SensioGeneratorBundle();
        }

        return $bundles;
    }

    public function registerContainerConfiguration(LoaderInterface $loader)
    {
        $loader->load(__DIR__.'/config/config_'.$this->getEnvironment().'.yml');
    }
} 
```

整个文件结构好像没问题，src/My/HelloworldBundle/...怎么了？

到目前为止，我唯一做的就是删除了 acme demo——routing_dev.php 的三个部分，以及来自 AppKernel.php 的行。

将控制器中的注释更改为其他内容也不起作用。视图文件 src/My/HelloworldBundle/Resources/views/Default/index.html.twig 存在。

编辑：

当我执行 route:match 命令时，没有任何路由匹配。

这是错误日志：[http://khernik.pl/asd.png](http://khernik.pl/asd.png) 顶部： http: [//khernik.pl/asdf.png](http://khernik.pl/asdf.png)

我现在从头开始执行所有操作，使用 symfony 的大多数默认设置（在创建新包时添加了自己的代码）。我做的唯一一件事就是从 AppKernel.php 中删除 Acme 行，并从 routing_dev.yml 中删除 acme 的三个前块。一切似乎都是正确的。

然而，还是不行。

编辑 2 - 完全默认控制器：

```
<?php

namespace My\HelloworldBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;

class DefaultController extends Controller
{
    /**
     * @Route("/hello/{name}")
     * @Template()
     */
    public function indexAction($name)
    {
        return array('name' => $name);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-22T15:42:36.717

尝试`Template()`在您的注释中指出该属性`DemoController`

```
<?php
/**
 * @Route("/hello")
 * @Template('MyHelloworldBundle:Demo:hello.html')
 */
public function helloAction()
{
    return array();
}
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T18:32:54.180

请在 hello.html 之前添加您的 ControllerName

```
class DemoController extends Controller
{
    /**
     * @Route("/hello.html")
     * @Template()
     */
    public function indexAction()
    {
        return array();
    } 
```

喜欢，要访问这个：在下面调用这个网址：

```
http://localhost/project/web/app_dev.php/demo/hello.html 
```

# html - 不要调整背景图像的高度

> ID：15030456
> 
> 赞同：0
> 
> 时间：2013-02-22T18:04:29.090
> 
> 标签：html, css, background

我正在尝试使用 CSS 进行响应式设计，但遇到了一个问题。

当我更改浏览器大小时，我的 CSS 中有一个背景图像正在调整大小。问题是我只希望它调整宽度而不是高度。这可能吗？

所以我想要实现的是，当我调整窗口大小时，背景图片的高度应该是静态的，但宽度会被调整大小。经典的“拉伸合身”对我来说是完美的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:05:43.200

使用 CSS

```
background-repeat: repeat; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:11:53.023

有时你只需要写信就可以找到解决方案。=)

css 函数 background-clip: content-box; 解决了我的问题。

# c# - 如何制作可在 C# 应用程序中使用的 CUDA dll？

> ID：15030461
> 
> 赞同：4
> 
> 时间：2013-02-22T18:04:38.187
> 
> 标签：c#, c, cuda, nvidia

如果您能给我一个简短的教程而不是几句话，那就太好了。

我的 CUDA 应用程序正在按我的意愿工作。现在，问题是如何将 CUDA 代码导出到 C#，因为我想在 C# 中制作前端和其他所有内容。

从这个链接：

[http://www.codeproject.com/Articles/9826/How-to-create-a-DLL-library-in-C-and-then-use-it-w](http://www.codeproject.com/Articles/9826/How-to-create-a-DLL-library-in-C-and-then-use-it-w)

我知道如何用 C 语言制作一个可以作为 Win32 dll 导入 C# 应用程序的库。

但我的问题是，**如何制作可以运送到 C# 并从 C# 应用程序使用的 CUDA 应用程序 dll（或其他扩展）？** 如果有某个 CUDA 教程，比如 C 库到 C# 应用程序的教程（以上链接），那就太好了。

我正在使用 Win7 64 位、Visual Studio 2010 Ultimate、Cuda Toolikt 5.0 和 NSight 2.2.012313

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T18:59:16.690

[ManagedCUDA](http://managedcuda.codeplex.com)非常适合这类事情。首先，您需要按照[文档](http://managedcuda.codeplex.com/documentation)中的说明设置您的 Visual Studio 项目。

这是一个解决方案的示例：

test.cu（编译为 test.ptx）

```
#if !defined(__CUDACC__)
#define __CUDACC__
#include <host_config.h>
#include <device_launch_parameters.h>
#include <device_functions.h>
#include <math_functions.h>
#endif

extern "C"
{
    __global__ void test(float * data)
    {
        float a = data[0];
        float b = data[1];
        float c = data[2];

        data[0] = max(a, max(b, c));
    }
} 
```

这是 C# 代码：

```
private static void Test()
{
    using (CudaContext ctx = new CudaContext())
    {

        CudaDeviceVariable<float> d = new CudaDeviceVariable<float>(3);
        CUmodule module = ctx.LoadModulePTX("test.ptx");
        CudaKernel kernel = new CudaKernel("test", module, ctx)
            {
                GridDimensions = new dim3(1, 1),
                BlockDimensions = new dim3(1, 1)
            };
        kernel.Run(d.DevicePointer);
    }
} 
```

这只是一个概念证明，甚至没有初始化设备内存，也没有读取结果，但足以说明如何做到这一点。

您有多种选择如何分发您的应用程序。在这种情况下，我选择将 .cu 文件编译成 PTX 并将其从文件系统加载到 C# 项目中。
您还可以将 PTX 作为资源直接嵌入到 C# 应用程序中。
您也可以编译成一个 cubin 并加载或嵌入它而不是 PTX。

# c# - 我需要返回哪些集合以支持 WCF 中的过滤？

> ID：15030463
> 
> 赞同：0
> 
> 时间：2013-02-22T18:04:40.957
> 
> 标签：c#, wcf, data-binding

我有一个 WCF 客户端，我需要将 DTO 放入[BindingSource](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.aspx)中，但是当我尝试将过滤器应用于 BindingSource 时，它​​不能作为整洁的 List 或 BindingList 工作，因为它们都返回 false `IBindingListView.SupportsFiltering`。

我需要使用什么数据类型才能过滤我的列表？

代理 DTO：

```
namespace MyApp.DataContracts
{
    [System.Runtime.Serialization.DataContractAttribute(Name = "ServerSetupDTO", Namespace = "http://example.com/MyApp")]
    [System.SerializableAttribute()]
    public partial class ServerSetupDTO : object, System.Runtime.Serialization.IExtensibleDataObject
    {
        [System.Runtime.Serialization.DataMemberAttribute()]
        public System.ComponentModel.BindingList<MyApp.DataContracts.DatabaseInfo> GenericPreconfigs
        {
            //(Snip)
        }

        //(Snip)
    }

    [System.Runtime.Serialization.DataContractAttribute(Name = "DatabaseInfo", Namespace = "http://example.com/MyApp")]
    [System.SerializableAttribute()]
    public partial class DatabaseInfo : object, System.Runtime.Serialization.IExtensibleDataObject
    {
        [System.Runtime.Serialization.DataMemberAttribute()]
        public string AllowedServer
        {
            //(Snip)
        }

        //(Snip)
    }
} 
```

应用过滤器：

```
ServerSetupDTO serverSetupDTO = proxyClient.GetServerSetup();
bsServerSettings.DataSource = serverSetupDTO ;

bsPreconfigList.DataMember = "GenericPreconfigs";
bsPreconfigList.DataSource = bsServerSettings;

//This filter never gets applied, bsPreconfigList.SupportsFiltering is false.
bsPreconfigList.Filter = String.Format("AllowedServer = '{0}'", cmbHost.Text); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:00:54.690

扯掉头发后，我决定只制作一个 ToDataSet 函数，因为我永远不需要更新值。

```
public partial class ServerSetupDTO
{
    public DataSet ToDataSet()
    {

        var setupDataSet = new DataSet("ServerSetup");

        //Get the demos
        var demoPreconfigsTable = setupDataSet.Tables.Add("DemoPreconfigs");
        demoPreconfigsTable.Columns.Add("AllowedServer");
        demoPreconfigsTable.Columns.Add("SqlInstance");
        demoPreconfigsTable.Columns.Add("DatabaseName");
        this.DemoPreconfigs.ForEach(item => demoPreconfigsTable.Rows.Add(item.AllowedServer, item.SqlInstance, item.DatabaseName));

        //Get the preconfigs
        var genericPreconfigsTable = setupDataSet.Tables.Add("GenericPreconfigs");
        genericPreconfigsTable.Columns.Add("AllowedServer");
        genericPreconfigsTable.Columns.Add("SqlInstance");
        genericPreconfigsTable.Columns.Add("DatabaseName");
        this.GenericPreconfigs.ForEach(item => genericPreconfigsTable.Rows.Add(item.AllowedServer, item.SqlInstance, item.DatabaseName));

        //Get the servers
        var sqlServersTable = setupDataSet.Tables.Add("SqlServers");
        sqlServersTable.Columns.Add("ServerName");
        this.SqlServers.ForEach(item => sqlServersTable.Rows.Add(item));

        //Get the VM's
        var virtualMachinesTable = setupDataSet.Tables.Add("VirtualMachines");
        virtualMachinesTable.Columns.Add("MachineName");
        this.VirtualMachines.ForEach(item => virtualMachinesTable.Rows.Add(item));

        return setupDataSet;
    }
} 
```

然后我只需将我的一行代码更新为此

```
bsServerSettings.DataSource = Program.ServerSettings.ToDataSet(); 
```

# php - 如何在表单提交的同时提交其他变量？

> ID：15030466
> 
> 赞同：2
> 
> 时间：2013-02-22T18:04:48.187
> 
> 标签：php, html, forms

我有一个可以正常工作的 HTML 表单，并将所有变量（“名字”、“姓氏”等）存储在`GET`数组中。

在提交表单时，我需要在`GET`数组中传递一个额外的变量，让 PHP 控制器知道显示下一组提示。像`step=2`.

我尝试做的是将表单操作设置`?step=2`为`?step=2&`. 但是，无论我尝试什么，表单的变量都显示在 URL 中。

我究竟做错了什么？这甚至可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T18:05:42.240

您可以在表单中使用隐藏的表单域：

```
<input type="hidden" name="step" value="2"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:07:16.910

```
$_SESSION['step'] = 2; 
```

PS：或会话变量 XD

萨卢多斯。

# sql - SQL：将 DATEADD 与 bigint 一起使用

> ID：15030474
> 
> 赞同：7
> 
> 时间：2013-02-22T18:05:23.027
> 
> 标签：sql, sql-server-2008

我有一些 SQL 可以将 javascript 日期转换为 SQL 日期，效果很好。但是，我遇到了一些太大并导致异常的数据：

> 将表达式转换为数据类型 int 的算术溢出错误

这是有问题的SQL：

```
 DATEADD(MILLISECOND, cast(569337307200000 as bigint) % 1000, DATEADD(SECOND, cast(569337307200000 as bigint) / 1000, '19700101')) 
```

我在 SQL Server 2008 上运行它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-05-15T06:16:23.120

只需`DATEADD`分两步解决问题，从较粗的时间单位（秒、分钟、小时等）开始，然后再回到细粒度的时间单位。

避免达到几周和几个月的水平，因为这需要实际的日历计算，我们希望系统来处理它。

下面的示例需要在给定（可能）大电流持续时间（以毫秒为单位）的情况下计算开始时间。

```
-- large durations can overflow the integer argument needed for DATEADD

-- so do as two steps subtracting minutes (60000ms) and then remaining milliseconds.

DATEADD(ms, -large_duration_ms%60000, DATEADD(minute, -large_duration_ms/60000, GETDATE())) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-14T14:12:02.623

我解决整数溢出问题的一种方法是从 microtime unix 时间戳中减去一个更新的日期。

```
DATEADD(s, (CreationTimeStamp/1000-1384128000), '2013-11-11') AS CreateDate, 
```

这不会解决 OP 的问题，因为它们仍然会溢出日期列上的最大值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-22T18:22:12.403

根据[MSDN](http://msdn.microsoft.com/en-gb/library/ms186819.aspx)，在`DATEADD (datepart , number , date )`

> **number**是一个表达式，**可以解析**为添加到日期的日期部分的 int。用户定义的变量是有效的。如果您指定带有小数的值，则该小数将被截断而不是四舍五入。

另请注意，即使您将数字作为整数给出，取决于您的日期和日期部分，它也可能会溢出日期的最大范围，即 sql server 2008 的 31-12-9999

数字必须是整数。这是一个[测试演示](http://sqlfiddle.com/#!3/d41d8/9363)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-06T18:35:12.407

我有同样的问题，我想满足 mssql 的日期时间范围

*   最小日期时间：1753-01-01 00:00:00.000 (-6847804800)
*   最大日期时间：9999-12-31 23:59:59.997 (253402300799)

为了实现这一点，我发现的唯一解决方案是循环使用带有 int 范围值的 DATEADD。

**所以基于这个答案：[https ://stackoverflow.com/a/2904294/687490](https://stackoverflow.com/a/2904294/687490)**

```
CREATE FUNCTION dbo.fn_ConvertToBigDateTime (@Datetime BIGINT)
RETURNS DATETIME
AS
BEGIN
    DECLARE @result datetime = Convert(datetime, '01/01/1970');

    DECLARE @LocalTimeOffset BIGINT
           ,@AdjustedLocalDatetime BIGINT
           ,@MinIntValue INT
           ,@MaxIntValue INT
           ,@RemainingSeconds BIGINT;

    -- define int limit
    SET @MinIntValue = -2147483648;
    SET @MaxIntValue = 2147483647;

    -- compute the datetime with the offset
    SET @LocalTimeOffset = DATEDIFF(second,GETDATE(),GETUTCDATE())
    SET @AdjustedLocalDatetime = @Datetime - @LocalTimeOffset

    -- going to the future
    WHILE(@AdjustedLocalDatetime>@MaxIntValue)
    BEGIN
        SET @AdjustedLocalDatetime = @AdjustedLocalDatetime - @MaxIntValue;
        SELECT @result = Convert(datetime, dateadd(ss, @MaxIntValue,@result));
    END

    -- going back in the past
    WHILE(@AdjustedLocalDatetime<@MinIntValue)
    BEGIN
        SET @AdjustedLocalDatetime = @AdjustedLocalDatetime - @MinIntValue;
        SELECT @result = Convert(datetime, dateadd(ss, @MinIntValue,@result));
    END

    RETURN (SELECT DATEADD(second,@AdjustedLocalDatetime, @result))
END; 
```

然后，您可以使用以下命令测试该功能：

```
select dbo.fn_ConvertToBigDateTime(-6847804800) as 'min datetime', 
dbo.fn_ConvertToBigDateTime(253402300799) as 'max datetime' 
```

希望它会有所帮助。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2018-10-03T03:10:38.943

我也遇到了这个问题。在我的sql语句中，当日期时间值为空时发生错误。

我的解决方案是使用“CASE When”检查日期时间值是否为空。只有当它不为空时才运行算术，问题就解决了。

# java - 如何实现通用接口列表

> ID：15030485
> 
> 赞同：0
> 
> 时间：2013-02-22T18:06:25.403
> 
> 标签：java, oop, generics, interface

您好，我正在编写一些有趣的代码，我的脑海中闪过一个想法。

这是一些简化的代码：

```
public interface SomeInterFace<T>
{
    public List<T> doSomething();
} 
```

现在，我得到了另一个接口，它应该为各种对象扩展这个接口

```
public interface OtherInterface extends SomeInterface<Integer>, 
SomeInterFace<String>, SomeInterface<Number>, ... 
```

是否有可能以使用对象列表实现“SomeInterface”的方式编写此“OtherInterface”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T18:14:08.213

如果您能够处理 的任何类型的类型参数`OtherInterface`，那么正如其他人所建议的那样，您可以编写：

```
public interface OtherInterface<T> extends SomeInterface<T> 
```

但是，如果您`SomeInterface`只需要为特定的类型参数列表（例如`String`和`Number`）实现，那么您不能这样做。在编译时，`SomeInterface<(anything)>`只是`SomeInterface`由于[类型 erasure](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，并且在编译器确保您没有尝试进行任何不安全的转换（或者您告诉它不要检查）之后为您插入转换。因此，您将尝试编写一个看起来像这样的类：

```
public interface OtherInterface extends SomeInterface, SomeInterface {
    public List doSomething();
    public List doSomething();
} 
```

...由于明显的原因，这是无效的！

希望有帮助！

# iphone - 使用 javascript 以编程方式控制 iPhone 缩放

> ID：15030486
> 
> 赞同：1
> 
> 时间：2013-02-22T18:06:34.543
> 
> 标签：iphone, event-listener, touchmove

我想在 iPhone 屏幕上跟随我的手指移动。然而，这会导致橡皮筋和滚动，因此我必须关闭默认行为。

如本网站所述

[https://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html](https://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)

我添加了事件监听器，就像这样

```
document.addEventListener('touchmove', touchMove, false);
document.addEventListener('gesturechange', gestureChange, false); 
```

并禁用默认行为，就像这样

```
function touchMove(event){event.preventDefault(); //other code here}
function gestureChange(event){event.preventDefault(); //other code here} 
```

现在，我可以做我想做的事，但我不能再缩放页面了。我仍然能够检索 touchstart 坐标并从手势更改中检索缩放因子。从逻辑上讲，我想使用它们以编程方式更改页面缩放。如何用 javascript 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:48:00.640

到目前为止，我在将事件监听器应用于 div（而不是文档）并在检测到手势启动后使用布尔值关闭 touchmove 调用方面取得了一些成功。实际上这工作得很好。我可以对整个文档进行缩放、平移和双击，也可以对 div 进行缩放和双击。但是 div 上的平移执行一个函数来传递坐标（并且不平移）。

# python - 推送通知错误的 Twisted 和 pyapns

> ID：15030491
> 
> 赞同：2
> 
> 时间：2013-02-22T18:06:42.173
> 
> 标签：python, django, twisted, apple-push-notifications

在使用 Twisted 和 pyapns 之前，我能够发送推送通知。我不得不重新启动我的 EC2 实例，并启动了我的 Web 服务器，然后我开始扭曲。重启后，我一直无法发送和接收推送通知，我检查了扭曲的日志，这是我发现的：

```
2013-02-22 17:50:40+0000 [-] Starting factory <pyapns.server.APNSClientFactory instance at 0x90f9e4c>
2013-02-22 17:50:40+0000 [-] APNSClientFactory startedConnecting
2013-02-22 17:50:40+0000 [Uninitialized] APNSProtocol connectionMade
2013-02-22 17:50:41+0000 [APNSProtocol (TLSMemoryBIOProtocol),client] APNSProtocol connectionLost
2013-02-22 17:50:41+0000 [APNSProtocol (TLSMemoryBIOProtocol),client] APNSClientFactory clientConnectionLost reason=[Failure instance: Traceback (failure with no frames): <class 'twisted.internet.error.ConnectionDone'>: Connection was closed cleanly.]
2013-02-22 17:50:41+0000 [APNSProtocol (TLSMemoryBIOProtocol),client] <twisted.internet.tcp.Connector instance at 0x9025e4c> will retry in 2 seconds
2013-02-22 17:50:41+0000 [APNSProtocol (TLSMemoryBIOProtocol),client] Stopping factory <pyapns.server.APNSClientFactory instance at 0x90f9e4c> 
```

在日志中，trackback 是： Traceback（没有帧的失败）：

```
<class'twisted.internet.error.ConnectionDone'>: Connection was closed cleanly.] 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:15:49.113

所以我实际上弄清楚了问题所在。事实证明，我的应用程序仍在向 Apple 的沙盒服务器发送通知。Apple 将拒绝在一定限制后发送任何通知。我所要做的就是更改 utils.py，如下所述：http: [//highonpython.com/index.php/setting-up-ios-push-notifications-apns-with-pythondjango-through-pyapns/](http://highonpython.com/index.php/setting-up-ios-push-notifications-apns-with-pythondjango-through-pyapns/)

而不是“沙盒”将其更改为“生产”。如果您的推送通知之前有效，它应该可以解决您的问题。

希望这可以帮助！

# php - 使用 DOM HTML 获取价值

> ID：15030492
> 
> 赞同：2
> 
> 时间：2013-02-22T18:06:44.937
> 
> 标签：php, dom

我想获取 HTML 页面中的所有`td`第九个`table`元素。

**我从这个开始，但我不知道如何完成它：**

```
define('GLPI_ROOT', '..');
$content = GLPI_ROOT . "/front/yourpage.html";
$dom = new DOMDocument();
@$dom->loadHTML($content);      
$xpath = new DOMXPath($dom);

$attbs = $xpath->query("//table td");
foreach($attbs as $a) { 
    print $a->nodeValue;
} 
```

**我也试过这个，但是没有用：**

```
$dom = new DOMDocument();
$dom->loadHTMLFile("yourpage.html");
$tables = $dom->getElementsByTagName('table');
$table = $tables->item(8);

foreach ($table->childNodes as $td) {
  if ($td->nodeName == 'td') {
    echo $td->nodeValue, "\n";
    echo "<script type=\"text/javascript\"> alert('".$td->nodeValue."');</script>";
  }
} 
```

我收到此错误：

```
Warning: DOMDocument::loadHTMLFile(): htmlParseEntityRef: expecting ';' in yourpage.html, line: 33 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:11:56.457

您的第一个不起作用，因为您似乎不了解 XPath 的工作原理，但您的第二个可能是更好的选择。

也就是说，什么`<td>`时候是一级孩子`<table>`？您可以`getElementsByTagName`在 上再次使用`$table`，效果很好。

# c# - 如何在我的游戏中包含框架 dll，以便用户不必下载它们？

> ID：15030497
> 
> 赞同：0
> 
> 时间：2013-02-22T18:06:54.903
> 
> 标签：c#, .net, xna

在我之前的一个帖子中，有人说这是可能的，所以我做了研究。我找不到任何相关的东西，如果可能的话，有人能说怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:20:45.077

设置每个引用的 dll 的属性`Copy Local=true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T06:32:40.120

我可以从您的[另一篇文章](https://stackoverflow.com/q/14988709/165500)中看到您所指的框架是 XNA 框架。

**您*真的*不应该将 Microsoft DLL 作为松散文件分发！**您应该只分发[**XNA 可再**](http://www.microsoft.com/en-us/download/details.aspx?id=20914)发行组件！

在未正确安装的情况下使用 DLL 可能会导致最终用户计算机出现各种问题。并且将它们作为松散文件分发是违反 EULA 的！

* * *

作为 XNA 的 Microsoft MVP 发言（是的，我们现在仍然存在）：

微软的官方说法是 XNA 仍然是“支持”的。基本上这意味着**XNA不会突然崩溃！！！**

XNA 框架安装程序仍可从 Microsoft 网站获得。（就像，例如，这个[十年前的](http://www.microsoft.com/en-us/download/details.aspx?id=96)框架下载）。您仍然可以从安装程序中引用它（例如：ClickOnce）。但是，如果您不想要求下载，您可以自己分发安装程序（因此：“可再分发”）。

它仍会在所有当前版本的 Windows 上成功安装。并且应该继续安装在未来版本的 Windows 上。

* * *

您最近可能听说过关于[XNA](http://ventspace.wordpress.com/2013/01/30/directxxna-phase-out-continues/)的喧嚣只是微软已经公开表示 XNA 不再处于开发阶段。这意味着不会有未来的版本。现有版本**仍然可以使用！**

# c# - 有没有办法清除控制台的某个部分？

> ID：15030498
> 
> 赞同：3
> 
> 时间：2013-02-22T18:06:56.900
> 
> 标签：c#, console

我有一部分控制台需要不断更新不同行数的值。我知道 Console.Write(new string(' ', Console.WindowWidth)) 但这仅适用于单行。我有一排必须开始清理并向下移动到底部的行。顶部必须保持不变。是否有一个简单的命令，例如我必须使用循环/计数器的前一个命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:14:20.010

我建议使用 Console.Clear() 然后重写你想要保持不变的行。您也可以使用 Console.SetCursorPosition ，然后改写这些行以清除：

```
// Clear method
Console.WriteLine("Line1");
Console.WriteLine("Line2");
Console.WriteLine("Line3 to erase");
Console.Clear();
Console.WriteLine("Line1");
Console.WriteLine("Line2");

// SetCursorPosition method
Console.WriteLine("Line1");
Console.WriteLine("Line2");
Console.WriteLine("Line3 to erase");
Console.SetCursorPosition(0, 2);
Console.WriteLine("                           "); 
```

清除/重写方法通常更快，除非您每秒写入数次文本，否则您不会看到任何闪烁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:15:08.500

使用 SetCursorPosition 方法写你想要 [http://msdn.microsoft.com/fr-fr/library/system.console.setcursorposition(v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/system.console.setcursorposition(v=vs.80).aspx)

# cocos2d-iphone - Cocos2d：以逼真的方式在 CCSprite 之后获得阴影的算法

> ID：15030499
> 
> 赞同：0
> 
> 时间：2013-02-22T18:07:05.887
> 
> 标签：cocos2d-iphone, rotation, sprite, shadow, light

我正在使用 Cocos2d 2.0 而没有其他（没有 BOX2D 等）。我有一个角色，并为它添加了一个阴影作为 CCSprite 子节点。它在移动时会产生很好的“飞行效果”，但不幸的是，当角色旋转时，孩子也会这样做，而影子孩子会以不切实际的方式移动。看这张图片：

![在此处输入图像描述](../Images/dd5f3a3df87bc1dc609bde0272793bc6.png)

在 3D 游戏中，这将在具有 3D 矩阵的图形引擎和游戏中光源的位置中得到处理。但是我的游戏要简单得多，不需要任何 3D 图形，所以我需要找到一个程序化的近似值。

首先尝试覆盖“setPosition”和“setRotation”方法但没有太大帮助（阴影不会改变位置）。

```
-(void) setPosition:(CGPoint)position
{
    [super setPosition:position];

    CCSprite * shadow = (CCSprite *)[self getChildByTag:belowByOneZFirst];
    if (shadow!=nil) {
        [shadow setPosition:shadowOriginalPosition];
        CCLOG(@"Setting shadow position");
    }

}

-(void) setRotation:(float)rotation
{
    [super setRotation:rotation];
    CCSprite * shadow = (CCSprite *)[self getChildByTag:belowByOneZFirst];
    if (shadow!=nil) {
        [shadow setRotation:0];
        CCLOG(@"Setting shadow rotation");
    }

} 
```

我现在有两条可能的路径。一种是使阴影成为独立的 CCSprite（而不是将其添加为子项），另一种是尝试覆盖修改“SET_DIRTY_RECURSIVELY()”宏的设置器（它可以检查子项是否具有特定标签，如果有的话不应用更改）。

第一种方法有点过于复杂，第二种方法听起来不错，但仍然有点过于复杂。

此外，只是不“改变”阴影的相对位置并不能完全解决问题。我应该编写一些代码来调整阴影的相对位置，同时考虑到屏幕内 Sprite 的相对位置（比如我将太阳设置在左上角，然后阴影将根据相对位置改变形状太阳）。

**有没有其他人有类似的算法可以用 Cocos2d 实现，如果有，有什么常见的模式可以解决这个问题吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T18:43:48.087

提示：将精灵和阴影（带有位置偏移）添加为 ccnode 的子节点。移动节点，只旋转精灵，阴影位置仍然是精灵位置的偏移量。问题解决了（据我所知）。

# jquery - jQuery datepicker maxDate 对我来说不能正常工作

> ID：15030506
> 
> 赞同：0
> 
> 时间：2013-02-22T18:07:33.187
> 
> 标签：jquery

所以这是我的代码，据我所知它应该可以正常工作，但实际上并没有按预期工作。我认为我想要发生的事情很明显，即只允许提前 2 天设定日期。在这种情况下，它的 2-20-13 到 2-22-13 但这给了我 2-20-13 到 2-24-13

```
$('.date').datepicker({
    dateFormat: 'yy-mm-dd', 
    minDate: new Date(2013, 2 -1, 20), 
    maxDate: '+2D'
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:10:54.663

`maxDate: '+2D'`从今天开始给你 2 天，而不是从你的开始日期开始 2 天。

[jQuery UI 参考](http://api.jqueryui.com/datepicker/#option-maxDate)

# java - 触摸时如何不选中复选框

> ID：15030511
> 
> 赞同：0
> 
> 时间：2013-02-22T18:07:46.413
> 
> 标签：java, android

我有一个在触摸时切换状态的复选框。我想知道如何忽略触摸状态开关。我在复选框上附加了一个 onClickListener，在其中我正在使用“是”或“否”按钮更改状态。

```
 if(sog.isChecked()){
                sog.setChecked(false);
        } else {
                sog.setChecked(true);
        } 
```

编辑：复选框在触摸时切换，我的“是”按钮也在改变状态。

编辑2：我希望我的对话框改变状态，而不是复选框自己做。

编辑3：

```
 sog.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            showDialog(3);

        }
    });

builder.setTitle("Checkbox")
        .setMessage(
                "Are you sure you want to switch checkbox?")
                .setPositiveButton("Yes",
                        new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,
                            int id) {
                        if(sog.isChecked()){
                            sog.setChecked(false);
                        } else {
                            sog.setChecked(true);
                            setTotalTime();
                        }
                    }
                })
                .setNegativeButton("No",
                        new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,
                            int id) {
                        dialog.cancel();
                    }
                });
        AlertDialog alert = builder.create();
        return alert; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:35:14.907

> 我只是想添加一个关于从关闭/打开更改它的构象。

实现一个, 在 vi​​a上`OnCheckedChangeListener`注册。在中，如果 的状态是您需要额外确认的状态，*请不要**理会*并弹出对话框。如果用户在对话框中点击一个按钮，表明他们不想进行更改，则手动将 的选中状态恢复为其先前值。`CheckBox``setOnCheckedChangeListener()``onCheckedChanged()``CheckBox`*`CheckBox`*`CheckBox`

话虽如此，我同意 Waza_Be 的评论。我不喜欢“立即弹出确认对话框”这类场景，尽管有时它们是必要的。如果有一些其他类型的确认步骤作为此 UI 的一部分（例如，“保存”操作栏项），并且您想在该点显示确认对话框，恕我直言，那会更好。

# jquery - 将 jQuery 日历嵌入页面中，在输入字段之外

> ID：15030512
> 
> 赞同：1
> 
> 时间：2013-02-22T18:07:48.957
> 
> 标签：jquery

1.  我想在我的应用程序中使用 jQuery 日历，但不是作为日期选择器。是否可以嵌入到页面中？

2.  我想为每个日期添加自定义数据。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:17:02.987

我有一个几周前为日期设置颜色和悬停的示例。您可以按照自己的方式更改此代码！一个活生生的例子： http: [//marc2.nl/workshops.html](http://marc2.nl/workshops.html)（这个演示确实给它一个背景颜色，并为链接添加一个悬停）。除了给它背景颜色或添加悬停之外，您还可以向它添加图像。

初始化：

```
var calDates = {"36":{"datetime":"2013-02-18 11:02:22","name":"name1","color":"e8b1b1","url":"url1"},"37":{"datetime":"2013-01-22 11:03:08","name":"name2","color":"9fd69f","url":"url2"}};

$("#calendar").datepicker({
    onChangeMonthYear : updateDates,
    onSelect : updateDates
});
updateDates(); 
```

循环遍历日期并为其赋予正确的颜色：

```
function updateDates()
{
    // Timeout is needed otherwise jQuery UI has not yet updates the month
    setTimeout(function(){
        for( var k in calDates )
        {
            var obj = calDates[k], 
                yearMonthDay = obj.datetime.split(" ")[0].split("-"),
                time = obj.datetime.split(" ")[1];

            $("#calendar [data-month='" + (parseInt(yearMonthDay[1]) - 1) + "'][data-year='" + yearMonthDay[0] + "'] a").each(function(){
                if( $(this).text() == yearMonthDay[2])
                {
                    $(this)
                        .css({
                            backgroundColor : "#" + obj.color,
                            cursor: "pointer",
                            position : "relative"
                        })
                        .unbind("click")
                        .attr("href", obj.url)
                        .bind("click", function(){
                            document.location = $(this).attr("href");
                        })
                        .bind("mouseenter", function(){
                            $(this).find(".hover").show();
                        })
                        .bind("mouseleave", function(){
                            $(this).find(".hover").hide();
                        })
                        .append("<div class='hover'><strong>" + obj.name + "</strong><br />" + time + "</div>");

                }
            });
        }
    }, 10);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:11:41.157

那么，您真正想要的是日历小部件吗？您可以在 Google 上查看“jquery 日历”。这是我找到的第一个：

[http://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/)

这是一个相当大的选项列表：

[http://www.tripwiremagazine.com/2012/11/jquery-calendar-date-pickers.html](http://www.tripwiremagazine.com/2012/11/jquery-calendar-date-pickers.html)

还有五个清单：

[http://www.devcurry.com/2010/06/5-jquery-calendar-plugins-that-c​​an-be.html](http://www.devcurry.com/2010/06/5-jquery-calendar-plugins-that-can-be.html)

# c - 一种将二维数组复制到结构数组中的方法

> ID：15030513
> 
> 赞同：0
> 
> 时间：2013-02-22T18:07:55.600
> 
> 标签：c, arrays, struct

我在我的 maze.c 文件中填充了这个数组：

char normalMazeArray[6][12]; 动态填充为 mazeArray[row][column]

现在我想将数组传递给位于我的结构（maze.h）中的 mazeArray

我的结构被称为：

```
typedef struct {
    char mazeArray;
} maze_t; 
```

我尝试将其复制如下：

```
maze_t* maze;

char normalMazeArray[6][12]; // filled with info

typedef struct {
    char mazeArray;
} maze_t;

maze->mazeArray = normalMazeArray; 
```

但是它不起作用，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:22:59.467

你想要做的事情并不完全可能。不过，您可以使用两种略有不同的解决方案。

`normalMazeArray`是类型`char [6][12]`- 它是一个数组。您可以使用以下命令将其内容复制到相同类型的数组中`memcpy()`：

```
typedef struct {
    char mazeArray[6][12];
} maze_t;

memcpy(maze->mazeArray, normalMazeArray, sizeof(normalMazeArray)); 
```

或者如果您`normalMazeArray`在程序的整个生命周期中都存在，您可以在结构中分配一个指向它的指针：

```
typedef struct {
    char (*mazeArray)[12];
} maze_t;

maze->mazeArray = normalMazeArray; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T18:15:07.400

等等，怎么样？？

首先，`maze`是一个指针，所以你不能有`maze.mazeArray`. 其次，`maze->mazeArray`是 char 类型，而是 char`mazeArray`类型`char**`。没办法。

您应该编写一个分配`char**`数组的函数，然后从`mazeArray`. 或者，如果您想要转让所有权，而不仅仅是复制，您可以这样：

```
typedef struct {
   char** mazeArray;
} maze_t;
maze_t maze;
maze.mazeArray = mazeArray; 
```

# c# - 简单表单认证的网站在登录后不会重定向

> ID：15030515
> 
> 赞同：1
> 
> 时间：2013-02-22T18:07:57.537
> 
> 标签：c#, asp.net, forms-authentication

我有一个基于简单身份验证模型的网站。它在本地和本地 IIS 上运行良好，但在输入正确的凭据后它没有重定向到默认页面，所有这些都在测试服务器中。

代码如下。

*网页配置*

```
<compilation targetFramework="4.0" />
        <httpRuntime maxRequestLength="50000" />
        <customErrors mode="On" defaultRedirect="exc/exc.aspx?e=1">
            <error statusCode="404" redirect="exc/404.aspx?e=404"/>
        </customErrors>
        <authentication mode="Forms">
            <forms loginUrl="admin/login.aspx" defaultUrl="admin/main.aspx" />
        </authentication>
        <authorization>
            <allow users="*" />
        </authorization>
    </system.web>
    <location path="admin">
        <system.web>
            <authorization>
                <deny users="?"/>
            </authorization>
        </system.web>
    </location>
    <location path="admin/css/cms.css">
        <system.web>
            <authorization>
                <allow users="?"/>
            </authorization>
        </system.web>
    </location>
    <location path="admin/css/styles.css">
        <system.web>
            <authorization>
                <allow users="?"/>
            </authorization>
        </system.web>
    </location>
    <location path="admin/images">
        <system.web>
            <authorization>
                <allow users="?"/>
            </authorization>
        </system.web>
    </location>
    <location path="exc/exc.aspx">
        <system.web>
            <authorization>
                <allow users="?"/>
            </authorization>
        </system.web>
    </location> 
```

*登录.aspx*

> 表单操作属性为空且 AutoEventWireup 为真。

*登录.aspx.cs*

```
protected void btnAuth_Click1(object sender, EventArgs e)
{
        //Some code not shown...

        //User Validation
            ValidateUserResponse response = new ValidateUserResponse();
            response = service.ValidateUser(request);

            if (response.State == true)
                FormsAuthentication.RedirectFromLoginPage(request.Alias, False);            
} 
```

*登出*

```
protected void Page_Load(object sender, EventArgs e)
{           
            FormsAuthentication.SignOut();
            Response.Redirect(FormsAuthentication.LoginUrl);            
} 
```

在测试服务器上，URL 如下所示：

```
http://192.168.1.58/TestSite/admin/login.aspx 
```

在 VS2010 上，一旦发布，在我的本地 IIS 上也能正常工作，但不明白为什么在 TestServer 上发布后登录后不重定向到默认页面。显示该*网站需要登录并出现 403 禁止错误*。

在本地，我已经使用 URL 形式和作品对其进行了测试（虚拟文件夹名称不同）：

```
http://192.168.1.58/TestSite1/admin/login.aspx

http://localhost/TestSite1/admin/login.aspx 
```

我将不胜感激有关此事的任何建议，以使其发挥作用。

谢谢你。

**- - - - - 更新 - - - - - -**

我这样解决了这个问题：

1.  右键单击包含 WebApp 的虚拟目录
2.  转到目录安全选项卡
3.  点击修改
4.  未选中的集成 Windows 身份验证
5.  还必须检查匿名访问

这使得 Web.Config 上的 WebForms 身份验证设置开始对 WebApp 产生影响。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:37:46.143

确保在 Web 服务器上的 IIS 中启用表单身份验证。

# r - 如何控制 KnitR 中人物的标题位置？

> ID：15030517
> 
> 赞同：5
> 
> 时间：2013-02-22T18:08:06.720
> 
> 标签：r, latex, knitr

有没有办法为 R 使用 KnitR 生成的图形指定标题的位置？我希望有一些功能上等同于`xtable()`'`caption.placement`选项的东西。

下面提供了一个最小的工作示例。

```
\documentclass[12pt, english, oneside]{amsart}
\begin{document}

The caption for Figure \ref{fig:plot} is placed below the figure. Could we place it above, instead?
<<plot, echo=FALSE, fig.cap="Default caption placement is below the figure.">>=
plot(x=0, y=0)
@

\end{document} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:12:42.600

这可能最好以乳胶样式处理所有人物，但您可以使用钩子自定义人物。`fig.env`chunk 选项控制块插入的环境。`figure`您总是可以使用自己的格式制作自己的版本。

# javascript - 无法使用函数更改 d3.js 中的文本 attr("y")

> ID：15030520
> 
> 赞同：0
> 
> 时间：2013-02-22T18:08:24.093
> 
> 标签：javascript, d3.js

我正在 d3.js 中做一个简单的演示 - mouseover 应该增加圆圈的大小并显示文本“Hello”，mouseout 则相反。

这是代码笔链接 - [http://cdpn.io/LzIjt](http://cdpn.io/LzIjt)

当我尝试将文本的“y”值链接到圆圈的“cy”值时，文本不会显示。但是，它适用于“x”

成功 - 文字显示 -

```
vis.append("svg:text")
  .attr("x",function()
        {
          return (d3.select("circle").attr("cx") - 17);
        })
  .attr("y",103)
  .text("Hello")
  .attr("visibility","hidden"); 
```

失败 - 文本不显示 -

```
 vis.append("svg:text")
      .attr("x",function()
            {
              return (d3.select("circle").attr("cx") - 17);
            })
      .attr("y",function()
            {
              return (d3.select("circle").attr("cy") + 3);
            })
      .text("Hello")
      .attr("visibility","hidden"); 
```

我错过了属性工作方式的一些东西吗？

谢谢！

~马杜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:05:41.380

D3 的一大优点是您可以使用控制台并在 Chrome 等浏览器中检查元素。查看您的“不起作用”示例，您的“cy”值似乎显示为 1003。

因此，您在此处的选择
`return (d3.select("circle").attr("cy") + 3);`
返回 的值`1003`。

但是，如果您确保您的选择被视为整数，则该函数
`return ( parseInt(d3.select("circle").attr("cy"), 10) + 3);`
将返回 的值`103`。

在此处查看实际代码，并确保查看控制台。

[http://jsfiddle.net/2qQdx/](http://jsfiddle.net/2qQdx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T19:02:48.470

问题出在 + 上。
用 x 减法工作：

```
return (d3.select("circle").attr("cx") - 17); 
```

加法不：

```
return (d3.select("circle").attr("cx") + 17); 
```

除非您通过在 17 之前添加 * 1 来强制它进行数学运算，否则不要连接：

```
return (d3.select("circle").attr("cx") * 1 + 17); 
```

与 y 相同：

适用于减法：

```
return (d3.select("circle").attr("cy") - 3); 
```

不适用于添加：

```
return (d3.select("circle").attr("cy") + 3); 
```

除非您通过添加 * 1 来强制它使用 cy attr 作为数字：

```
return (d3.select("circle").attr("cy") * 1 + 3); 
```

其他人可能有更清洁的解决方案，但这是串联与加法的问题。

# javascript - jQuery：onchange 事件

> ID：15030526
> 
> 赞同：0
> 
> 时间：2013-02-22T18:08:55.440
> 
> 标签：javascript, jquery, html

尝试根据用户在选择中的选择显示/隐藏文本文件。我相信我的问题在于 if 语句。

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
</script>

<script>
$(document).ready(function(){
  $("#drpStatus").change(function(){
    if( $(this).val() == 'Married'){
      $("#txtSpouse").show();
    else
      $("#txtSpouse").hide();
  });
});
</script>

</head>

<body>
<input type="text" id="txtSpouse" style="display:none">
<select name="drpStatus" id="drpStatus">
            <option value="Single" selected="selected">Single</option>
            <option value="Dating">Dating</option>
            <option value="Married">Married</option>
          </select>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:11:29.570

简单的语法错误，您`{`的`if`. 删除它，这有效。

演示：http: [//jsfiddle.net/yNqfM/](http://jsfiddle.net/yNqfM/)

js

```
$("#drpStatus").change(function(){
 if( $(this).val() == 'Married') /*removed the {*/
  $("#txtSpouse").show();
 else
  $("#txtSpouse").hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:14:04.867

你犯了一个语法错误。您在 if 语句之后添加了一个 { 但您永远不会结束它。您可以删除它，也可以将其更改为 } else { /** 代码 **/ }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:15:03.317

试试下面的代码： jsFiddle 的链接[http://jsfiddle.net/kbSrR/](http://jsfiddle.net/kbSrR/)

```
 $(function(){
    $("#drpStatus").change(function () {
        if ($(":selected",$(this)).text() == 'Married') 
            $("#txtSpouse").show();
            else $("#txtSpouse").hide();
        });
    }); 
```

# python - 狮身人面像文档，编号图参考

> ID：15030528
> 
> 赞同：6
> 
> 时间：2013-02-22T18:09:00.783
> 
> 标签：python, latex, python-sphinx, restructuredtext, docutils

我正在尝试使用 latexpdf 输出在我的 Sphinx 文档项目中使用编号的数字。我安装了在这里找到的 Sphinx numfig.py 扩展[https://bitbucket.org/arjones6/sphinx-numfig](https://bitbucket.org/arjones6/sphinx-numfig)

但是，每当我使用 :num: 应该提供与图形编号的交叉引用的标签时，我都会得到以下信息

第一次

```
.. _fig_logo:

.. figure:: logo.*

        Example of a figure

Reference to logo :num:`figure #fig_logo` 
```

生成输出：

参考标志图**？？**

难道我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T18:52:57.323

似乎如果您的标签名称中有下划线（例如 in `fig_logo`），sphinx 会用减号 ( 替换它`-`，这是有道理的，因为在带有下划线的情况下，乳胶有时会表现得很奇怪），而引用仍然使用下划线。由于这个原因，乳胶找不到引用的标签。

这是 sphinx 生成的 tex 代码：

```
\includegraphics{logo.png}
\caption{Example of a figure}\label{index:fig-logo}\end{figure}

Reference to logo \hyperref[index:fig_logo]{figure  \ref*{index:fig_logo}} 
```

`fig-logo`（注意作为标签和`fig_logo`作为参考之间的区别。）

例如，如果您用减号替换下划线

```
.. _fig-logo:

.. figure:: logo.png

        Example of a figure

Reference to logo :num:`figure #fig-logo` 
```

tex 代码如下所示：

```
\includegraphics{pandas_bar.png}
\caption{Example of a figure}\label{index:fig-logo}\end{figure}

Reference to logo \hyperref[index:fig-logo]{figure  \ref*{index:fig-logo}} 
```

在生成的pdf中，这被解决为

**参考标志图1**

## 更新

如果您不想更改可以更新的所有标签`numfig`：添加该行就足够了

```
target = target.replace('_', '-') 
```

就在您的扩展副本中的第[27行之前。](https://bitbucket.org/arjones6/sphinx-numfig/src/b2345f7d9fabefbd103c31cc0c4c26c68b29ac6a/numfig.py?at=default#cl-27)

我在 bitbucket 上 打开了一个[问题。](https://bitbucket.org/arjones6/sphinx-numfig/issue/9/references-are-not-resolved-if-underscore)

# php - 我正在尝试处理 PHP 中的异常，但堆栈错误仍在显示，而不是由 catch 处理

> ID：15030529
> 
> 赞同：0
> 
> 时间：2013-02-22T18:09:01.337
> 
> 标签：php, zend-framework, error-handling

我正在调用一个我知道可能导致错误的方法，我试图通过将代码包装在 try/catch 语句中来处理错误......

```
class TestController extends Zend_Controller_Action
{

    public function init()
    {
        // Anything here happens BEFORE the View has rendered
    }

    public function indexAction()
    {
        // Anything `echo`ed here is added to the end of the View
        $model = new Application_Model_Testing('Mark', 31);
        $this->view->sentence = $model->test();
        $this->loadDataWhichCouldCauseError();
        $this->loadView($model); // this method 'forwards' the Action onto another Controller
    }

    private function loadDataWhichCouldCauseError()
    {
        try {
            $test = new Application_Model_NonExistent();
        } catch (Exception $e) {
            echo 'Handle the error';
        }
    }

    private function loadView($model)
    {
        // Let's pretend we have loads of Models that require different Views
        switch (get_class($model)) {
            case 'Application_Model_Testing':
                // Controller's have a `_forward` method to pass the Action onto another Controller
                // The following line forwards to an `indexAction` within the `BlahController`
                // It also passes some data onto the `BlahController`
                $this->_forward('index', 'blah', null, array('data' => 'some data'));
                break;
        }
    }

} 
```

...但我遇到的问题是错误没有得到处理。查看应用程序时出现以下错误...

```
( ! ) Fatal error: Class 'Application_Model_NonExistent' not found in /Library/WebServer/Documents/ZendTest/application/controllers/TestController.php on line 23 
```

任何人都可以解释为什么会发生这种情况以及如何让它工作吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:16:12.527

利用

```
if (class_exists('Application_Model_NonExistent')) {
    $test = new Application_Model_NonExistent;
} else {
    echo 'class not found.';
} 
```

就像@prodigitalson 说你无法捕捉到那个致命错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T18:12:54.753

错误和异常不是一回事。抛出异常并被捕获，其中错误通常不可恢复并由[http://www.php.net/manual/en/function.trigger-error.php触发](http://www.php.net/manual/en/function.trigger-error.php)

*   [PHP：异常与错误？](https://stackoverflow.com/questions/841500/php-exceptions-vs-errors)
*   [我可以尝试/捕捉警告吗？](https://stackoverflow.com/questions/1241728/can-i-try-catch-a-warning)

如果由于错误需要进行一些清理，可以使用[http://www.php.net/manual/en/function.set-error-handler.php](http://www.php.net/manual/en/function.set-error-handler.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:12:17.907

那不是例外，那是一个`FATAL`错误，这意味着您无法像那样捕获它。根据定义， a`FATAL`不应该是可恢复的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T18:13:12.803

异常和错误是不同的东西。您正在使用一个 Exception 类，并且 $e 是它的对象。

你想处理错误，检查 php-zend 框架中的错误处理。但是在这里，这是一个致命的错误，你必须纠正它，不能处理。

# mongodb - MongoDB作为文件存储

> ID：15030532
> 
> 赞同：28
> 
> 时间：2013-02-22T18:09:09.980
> 
> 标签：mongodb, storage, gridfs, bigdata

我正在尝试找到为大文件创建可扩展存储的最佳解决方案。文件大小可以从 1-2 兆字节到 500-600 兆字节不等。

我找到了一些关于 Hadoop 和它的 HDFS 的信息，但它看起来有点复杂，因为我不需要任何 Map/Reduce 作业和许多其他功能。现在我正在考虑使用 MongoDB，它是 GridFS 作为文件存储解决方案。

现在的问题是：

1.  当我尝试同时写入几个文件时，gridfs 会发生什么。读/写操作会有任何锁吗？（我只会将它用作文件存储）
2.  来自gridfs的文件是否会缓存在ram中以及它将如何影响读写性能？
3.  也许还有其他一些解决方案可以更有效地解决我的问题？

谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-23T01:17:17.680

我在这里只能回答MongoDB，我不会假装我对HDFS和其他此类技术了解很多。

GridFs 实现完全是驱动程序本身的客户端。这意味着对 MongoDB 本身内文件服务的上下文没有特殊的加载或理解，实际上 MongoDB 本身甚至不理解它们是文件 ( [http://docs.mongodb.org/manual/applications/gridfs/](http://docs.mongodb.org/manual/applications/gridfs/) )。

这意味着查询`files`or`chunks`集合的任何部分将导致与任何其他查询相同的过程，从而将所需的数据加载到您的工作集中（[http://en.wikipedia.org/wiki/Working_set](http://en.wikipedia.org/wiki/Working_set) ) 表示 MongoDB 在给定时间范围内保持最佳性能所需的一组数据（或当时所有加载的数据）。它通过将其分页到 RAM 中来做到这一点（从技术上讲，操作系统确实如此）。

要考虑的另一点是这是驱动程序实现的。这意味着规范可能会有所不同，但是，我认为不会。所有驱动程序都允许您从集合中查询一组文档，该`files`集合仅包含文件元数据，允许您稍后`chunks`通过单个查询从集合中提供文件本身。

然而，这不是重要的事情，你想提供文件本身，包括它的数据；这意味着您将把`files`集合及其后续`chunks`集合加载到您的工作集中。

考虑到这一点，我们已经遇到了第一个障碍：

> 来自gridfs的文件是否会缓存在ram中以及它将如何影响读写性能？

直接从 RAM 读取小文件的性能可能很棒；写的也一样好。

对于较大的文件，并非如此。`mongod`大多数计算机不会有 600 GB 的 RAM，实际上很可能在单个实例上容纳单个文件的 600 GB 分区。这会产生一个问题，因为该文件需要适合您的工作集才能提供服务，但它不可能比您的 RAM 大；此时，您可能会遇到页面抖动（[http://en.wikipedia.org/wiki/Thrashing_%28computer_science%29](http://en.wikipedia.org/wiki/Thrashing_%28computer_science%29)），服务器只是在尝试加载文件时 24/7 出现页面错误。这里的写作也好不到哪里去。

解决此问题的唯一方法是开始将单个文件放在多个分片中`:\`。

注意：要考虑的另一件事是`chunks`“块”的默认平均大小为 256KB，因此对于 600GB 文件来说，这是很多文档。此设置在大多数驱动程序中都是可操作的。

> 当我尝试同时写入几个文件时，gridfs 会发生什么。读/写操作会有任何锁吗？（我只会将它用作文件存储）

GridFS 只是一个规范，它使用与任何其他集合相同的锁，包括数据库级别（2.2+）或全局级别（2.2 之前）的读写锁。两者也确实会相互干扰，即如何确保对正在写入的文档进行一致的读取？

话虽这么说，存在争用的可能性取决于您的场景细节、流量、并发写入/读取的数量以及我们不知道的许多其他事情。

> 也许还有其他一些解决方案可以更有效地解决我的问题？

我个人发现，减少冗余格式的 S3（如@muggy 所说）最适合在 MongoDB 中存储有关文件的元数据的一部分，就像使用 GridFS 但没有块收集一样，让 S3 处理所有分发、备份和给你的其他东西。

希望我已经清楚了，希望它有所帮助。

编辑：与我不小心说的不同，MongoDB 没有集合级锁，它是数据库级锁。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T18:47:52.713

您是否考虑过将元数据保存到 MongoDB 并将实际文件写入 Amazon S3？两者都有出色的驱动程序，后者是高度冗余的云/cdn 就绪文件存储。我会试一试。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-22T18:45:35.940

我将从回答前两个开始：

1.  写入 GridFS 时有一个写锁，是的。没有读锁。
2.  当您查询文件时，这些文件不会缓存在内存中，但它们的元数据会。

GridFS 可能不是您问题的最佳解决方案。当您处理这种情况时，写锁可能会变得很痛苦，特别是对于大文件。还有其他数据库可以为您解决这个问题。HDFS 是一个不错的选择，但正如你所说，它非常复杂。我建议考虑像 Riak 或 Amazon 的 S3 这样的存储机制。它们更倾向于存储文件，并且最终不会出现重大缺点。S3 和 Riak 都具有出色的管理设施，并且可以处理巨大的文件。虽然使用 Riak，但我知道，你必须做一些文件分块才能存储超过 100mb 的文件。尽管如此，通常最好的做法是对大文件进行一定程度的分块。

# extjs - ios !AMDeviceSecureInstallApplication 原生打包时 Sencha touch 构建错误

> ID：15030533
> 
> 赞同：1
> 
> 时间：2013-02-22T18:09:10.957
> 
> 标签：extjs, sencha-touch, sencha-touch-2

当我尝试在 Sencha Touch 2.1 中为 IOS 本地打包我的应用程序时，它给了我这个错误：

```
Sencha Cmd v3.0.0.250
[ERR]       
!AMDeviceSecureInstallApplication
The application was successfully packaged
The application was successfuly signed
[ERR] stbuild exited with non-zero code : 1 
```

它不适用于 Xcode，请提供任何帮助。

这是我的`packager.json`

```
{
"applicationName":"Demoedifarm",
"applicationId":"com.palapa.demoedifarm",
"bundleSeedId":"S5583Y6VFB",
"versionString":"1.0",
//"versionCode":"1",
"icon": {
    "57":"resources/icons/Icon.png",
    "72":"resources/icons/Icon~ipad.png",
    "114":"resources/icons/Icon@2x.png",
    "144":"resources/icons/Icon~ipad@2x.png"
},
"inputPath":"./",
"outputPath":"../build/",
"configuration":"Debug",
"platform":"iOS",
"deviceType":"iPad",
"certificateAlias":"iPhone Developer",
//"certificatePassword":"",
"provisionProfile":"/Users/palapa1/Library/MobileDevice/Provisioning Profiles/CA412FD2-60D6-407E-B7AD-A34637A8FF55.mobileprovision",
//"sdkPath":"/path/to/android-sdk",
//"sdkPath":"/path/to/android-sdk",
//"androidAPILevel":"8",
/*"permissions":[
                "INTERNET",
                "ACCESS_NETWORK_STATE",
                "CAMERA",
                "VIBRATE",
                "ACCESS_FINE_LOCATION",
                "ACCESS_COARSE_LOCATION",
                "CALL_PHONE"],*/
"minOSVersion": "4.2.1",
"orientations": [
    "landscapeLeft",
    "landscapeRight"

]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:04:36.987

我正在运行更新版本的 Sencha Cmd (3.1)，我相信命令语法略有变化，但我遇到了同样的错误，所以我想我会给出一个答案，以防万一它对某人有所帮助。

如果我运行以下命令：

`sencha app package run myConfigFile.json`

然后它失败并出现相同的错误，我不知道问题是什么。但是，如果我更改配置文件以使其针对 iOS 模拟器（“平台”属性），那么它可以正常工作（模拟器自动打开）。

如果我改为运行此命令：

`sencha app package build myConfigFile.json`

然后它成功完成，我最终在输出文件夹中得到了一个 MyApp.app 文件。

如果我打开了 XCode Organizer 窗口，我可以将这个文件拖到我连接的手机下方的“应用程序”文件夹中，它会为我部署/安装应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-27T12:41:09.820

如果您使用配置文件，则需要设置

```
"configuration":"Release" 
```

而不是`Debug`在`packager.json`. 这是文档中的一个[错误](http://www.sencha.com/forum/showthread.php?273705-Small-bug-in-the-native-packaging-docs)。

另外，请参阅这篇文章以获得很好的教程： http: [//frightanic.com/software-development/sencha-touch-native-packaging-for-ios-done-right/](http://frightanic.com/software-development/sencha-touch-native-packaging-for-ios-done-right/)

# c# - 编辑没有混合的按钮视觉状态

> ID：15030536
> 
> 赞同：0
> 
> 时间：2013-02-22T18:09:15.993
> 
> 标签：c#, wpf, wpf-controls

可以只使用属性窗格或代码编辑前景和背景等...对于按钮的默认状态而不使用混合，但是是否可以在没有混合的情况下编辑其他状态的颜色？

例如，我想要的只是一个在“鼠标悬停”上变灰的按钮。我在 Stack Overflow 或 Intertubes 上看到的任何东西都使用 Blend。我想没有它。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:17:15.457

一个简单的方法是使用`Style`触发器。

```
<Style x:Key="HoverButtonStyle" TargetType="{x:Type Button}">
    <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
            <Setter Property="Background" Value="Gray"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

样式在您的资源中定义。然后，当您在 XAML 中定义按钮时，您可以指定样式，如下所示：

```
<Button x:Name="MyButton" Style="{DynamicResource HoverButtonStyle}"/> 
```

当鼠标悬停在它上面时，这种风格会改变`Background`你的画笔。`Button`您可以使用触发器执行许多更高级的操作，但这是一个非常简单的示例。如果你在谷歌上搜索 WPF 样式触发器，你会发现很多例子，包括[这个](http://mark-dot-net.blogspot.com/2007/07/creating-custom-wpf-button-template-in.html)非常详尽的例子。

还有其他方法可以做到这一点，例如使用，如此[处](http://blogs.msdn.com/b/wpfsdk/archive/2009/02/27/the-visualstatemanager-and-triggers.aspx)`VisualStateManager`所述，但是如果您只是尝试更改悬停时，样式触发器可能是最简单的方法。`Background`

# javascript - 切换上的小滚动跳到顶部

> ID：15030539
> 
> 赞同：1
> 
> 时间：2013-02-22T18:09:21.817
> 
> 标签：javascript, scrollbar, toggle, tinyscrollbar

我从这里[http://baijs.nl/tinyscrollbar/](http://baijs.nl/tinyscrollbar/)使用 Tiny Scroll Bar 。

我的问题是，当我切换文件夹（即： http: [//prntscr.com/tqf3j](http://prntscr.com/tqf3j)）时，滚动条会跳到顶部。我想留在一个固定的位置。

我的 JavaScript 代码的一部分：

```
$(document).on('click', '#TreeView a', function() {
  CloseFolderOptions();

  $('#TreeView a').removeClass('selected');
  $(this).addClass('selected');
  if ($(this).next('.sub').find('li').length > 0) {
      $(this).next('.sub').slideToggle();
      oScrollbar5.tinyscrollbar_update();

  } 
```

我不知道文件夹的位置，因为每个用户都可以添加一个文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:55:05.290

尝试这个：

```
oScrollbar5.tinyscrollbar_update('relative'); 
```

# c# - Visual Studio 2010 多项目解决方案添加类

> ID：15030541
> 
> 赞同：0
> 
> 时间：2013-02-22T18:09:27.470
> 
> 标签：c#, vb.net, visual-studio-2010

我是这种事情的新手，所以请多多包涵。我有一个由 4 个不同项目（Windows 应用程序）组成的 Visual Studio 2010 解决方案。

所有依赖项都已设置好，以便在您构建时以正确的顺序编译。

我刚刚在其中一个项目中添加了一个新类。我需要从其他项目之一访问此类，但由于某种原因，我的新类对解决方案中的其他项目不可见。项目中的所有其他类对其他项目都是可见的。我的新班级是唯一没有的。

当您在像我这样的场景中添加新类时，除了添加带有类的文件然后单击构建之外，您还需要做其他事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:28:35.947

知道了。

似乎辅助项目设置为“发布”并且它们正在编译为“发布”，但我的主项目正在“调试”中寻找它们

# android - 位图的Android内存不足异常

> ID：15030542
> 
> 赞同：1
> 
> 时间：2013-02-22T18:09:31.020
> 
> 标签：android, memory, memory-management, bitmap, out-of-memory

首先，我已经阅读了很多关于内存不足异常的帖子和文章，但没有一篇对我的情况有所帮助。我要做的是从 sd 卡加载图像，但将其缩放到精确的像素大小。

我首先获取图像的宽度和高度并计算样本大小：

```
 final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(backgroundPath, options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, getWidth(), getHeight()); 
```

这是我获得样本量的方法（尽管它并不真正相关）：

```
public static int calculateInSampleSize(BitmapFactory.Options options, int reqWidth, int reqHeight) {

    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    // NOTE: we could use Math.floor here for potential better image quality
    // however, this also results in more out of memory issues
    if (height > reqHeight || width > reqWidth) {
        if (width > height) {
            inSampleSize = Math.round((float)height / (float)reqHeight);
        } else {
            inSampleSize = Math.round((float)width / (float)reqWidth);
        }
    }

    return inSampleSize;
} 
```

现在我有了一个样本大小，我将图像从磁盘加载到近似大小（样本大小）：

```
 // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    options.inPurgeable = true;
    Bitmap bmp = BitmapFactory.decodeFile(backgroundPath, options); 
```

现在，我将创建的这个位图缩放到我需要的确切大小并清理：

```
 // scale the bitmap to the exact size we need
    Bitmap editedBmp = Bitmap.createScaledBitmap(bmp, (int) (width * scaleFactor), (int) (height * scaleFactor), true); 

    // clean up first bitmap
    bmp.recycle();
    bmp = null;
    System.gc();    // I know you shouldnt do this, but I'm desperate 
```

上述步骤通常是让我的内存不足异常。有谁知道从磁盘加载精确大小的位图以避免像上面那样创建两个单独的位图的方法？

此外，当用户第二次运行此代码（设置新图像）时，似乎会发生更多异常。但是，我确保卸载从位图创建的可绘制对象，以便在再次运行此代码之前对其进行垃圾收集。

有什么建议么？

谢谢，尼克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:19:15.023

在您的情况下，执行第一次解码后无需创建中间位图。由于您在画布上绘图，因此您可以使用以下任一方法（您认为最方便的方法）将图像缩放到完美尺寸。

```
drawBitmap(Bitmap bitmap, Rect src, Rect dst, Paint paint)

drawBitmap(Bitmap bitmap, Matrix matrix, Paint paint) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:36:16.527

也许这种方法会有所帮助，我想我自己是从 stackoverflow 中提取出来的。它解决了我的内存不足异常问题。

```
private Bitmap decodeFile(File f){
    try {
        //Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        //The new size we want to scale to
        final int REQUIRED_SIZE=250;

        //Find the correct scale value. It should be the power of 2.
        int scale=1;
        while(o.outWidth/scale/2>=REQUIRED_SIZE && o.outHeight/scale/2>=REQUIRED_SIZE)
            scale*=2;

        //Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {}

    return null;
} 
```

# ubuntu - rabbitmq-server 在 Ubuntu 12.0.4 上的安装问题

> ID：15030543
> 
> 赞同：3
> 
> 时间：2013-02-22T18:09:44.610
> 
> 标签：ubuntu, erlang, rabbitmq, ubuntu-12.04, apt

我下载并安装`esl-erlang_16.a-rc1~ubuntu~precise_amd64.deb`然后下载`rabbitmq-server_3.0.2-1_all.deb`并运行：

```
sudo dpkg -i rabbitmq-server_3.0.2-1_all.deb 
```

它导致了以下错误：

```
The following packages have unmet dependencies:
rabbitmq-server : Depends: erlang-nox (>= 1:12.b.3) but it is not going to be installed
E: Unmet dependencies. Try 'apt-get -f install' with no packages (or specify a solution). 
```

尝试安装`erlang-nox`：

```
sudo apt-get install erlang-nox 
```

它导致了以下错误：

```
The following packages have unmet dependencies:
erlang-nox : Depends: erlang-diameter but it is not going to be installed 
```

从这一点开始，我尝试（手动）安装依赖项，每一次努力都会导致另一个未满足的依赖项，有趣的是依赖项开始变得周期性（A 需要 B，B 需要 A）。

还尝试添加以下内容

```
deb http://www.rabbitmq.com/debian/ testing main 
```

至`/etc/apt/sources.list`

跑了

```
sudo apt-get install rabbitmq-server 
```

同样的结果。

有人可以阐明一下吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:51:44.670

当我安装 Debian 软件包时，我收到相同的消息，但之后运行：

```
sudo apt-get -f install 
```

-f 将自动尝试修复任何缺失的依赖项。你可能需要`sudo apt-get update`先。这可能会导致您的一些依赖问题。

# ruby-on-rails - 调用 attr_accessible 时出现 MassAssignmentSecurity 错误

> ID：15030548
> 
> 赞同：2
> 
> 时间：2013-02-22T18:09:58.367
> 
> 标签：ruby-on-rails, ruby, passwords

我正在按照[本教程](http://ruby.railstutorial.org/chapters/modeling-users?version=3.2#sec-an_encrypted_password)进行操作，并且在某一时刻，它告诉我

> ... 将密码和密码确认属性添加到用户模型 [...] 与我们目前看到的其他属性不同，密码属性将是虚拟的——它们只会临时存在于内存中，不会持久化到数据库。

和

> 正如我们将在 6.3.4 节中看到的，这些虚拟属性由 has_secure_password 自动实现。

我的模型如下所示：

```
class User < ActiveRecord::Base
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  has_secure_password
  attr_accessible :email, :is_admin, :name, :password, :password_confirmation
  validates :name, presence: true, uniqueness: true
  validates :password_digest, presence: true
  validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true
  validates :email, presence: true, format: {with: VALID_EMAIL_REGEX}, uniqueness: true
end 
```

所以现在当我尝试创建一个新用户时；

```
User.create(name: "Foo Bar", email: "foo@bar.net", password: "foobar", password_confirmation: "foobar") 
```

我收到以下错误：

```
ActiveModel::MassAssignmentSecurity::Error: Can't mass-assign protected attributes: password, password_confirmation 
```

为什么？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T18:09:13.587

这些问题似乎数据库中缺少密码和密码确认列。

根据评论，重新迁移并重新启动服务器将解决此问题。

# ruby-on-rails - 查找 first_name 列不以 AZ 开头的所有记录

> ID：15030558
> 
> 赞同：0
> 
> 时间：2013-02-22T18:10:33.960
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, rails-activerecord

我需要提取结果的子集，其中`first_name`列的值以标准英文字母（即 AZ）以外的任何字符开头，例如`È`. 我用这个把头撞在砖墙上 - 例如，这就是我能够获得所有以字母开头的记录的方式`A`：

```
@results = User.where("first_name LIKE ?", "A%").order("first_name ASC") 
```

任何帮助都会很棒。

*编辑：我正在使用 PostgreSQL 数据库。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T18:21:30.817

您可以使用`~`运算符来匹配正则表达式。`~`用于匹配`case sensitive`数据。因此，在您的情况下，`first_name ~ '^[^A-Z]'`将给出who不以. 要匹配，您需要使用.`users``first_name``A-Z``case insensitive``~*`

```
 @results = User.where("first_name ~ ?", "^[^A-Z]").order("first_name ASC") 
```

或者

您还可以使用`!~`which 给出不匹配的结果（即）`first_name !~ ^[A-Z]`等同于`first_name ~ ^[^A-Z]`. 为了匹配`case insensitive`使用`!~*`。

```
 @results = User.where("first_name !~ ?", "^[A-Z]").order("first_name ASC") 
```

有关更多信息，请参阅[文档](http://www.postgresql.org/docs/8.3/static/functions-matching.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:28:52.497

这应该在 Postgresql 中工作

`@results = User.where("first_name SIMILAR TO ?", "[A-Z]%"`)

更多信息[在这里](http://www.postgresql.org/docs/8.3/static/functions-matching.html#POSIX-BRACKET-EXPRESSIONS)。

# python - python函数在金字塔中的行为不同？

> ID：15030561
> 
> 赞同：0
> 
> 时间：2013-02-22T18:10:47.193
> 
> 标签：python, mechanize, pyramid

我正在金字塔框架之上使用 python 制作 webapps。在我的一个利用 mechanize 进行简单网络抓取的函数中，当我将它作为独立的 python 脚本运行并通过金字塔运行时，该函数的行为会有所不同。

这是表现不同的机械化功能：

```
form = mechanize._form.ParseString(form, url) 
```

我正在获取作为独立程序运行此功能的 Get 和 Post 表单，但只有通过金字塔运行它的 Get 表单。（蟒蛇2.7.2）

我错过了什么吗？我哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T06:21:59.353

我不使用 mechanize 但也许这与 call 有关`config.scan()`。这样做的副作用是它递归地导入包中的每个模块，这些模块可以在代码中使用 mechanize 或类似的方式注册插件。

# linux - Redirecting stdout with find -exec and without creating new shell

> ID：15030563
> 
> 赞同：23
> 
> 时间：2013-02-22T18:10:54.397
> 
> 标签：linux, unix

I have one script that only writes data to `stdout`. I need to run it for multiple files and generate a different output file for each input file and I was wondering how to use `find -exec` for that. So I basically tried several variants of this (I replaced the script by `cat` just for testability purposes):

```
find * -type f -exec cat "{}" > "{}.stdout" \; 
```

but could not make it work since all the data was being written to a file literally named`{}.stdout`.

Eventually, I could make it work with :

```
find * -type f -exec sh -c "cat {} > {}.stdout" \; 
```

But while this latest form works well with `cat`, my script requires environment variables loaded through several initialization scripts, thus I end up with:

```
find * -type f -exec sh -c "initscript1; initscript2; ...;  myscript {} > {}.stdout" \; 
```

Which seems a waste because I have everything already initialized in my current shell.

Is there a better way of doing this with `find`? Other one-liners are welcome.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-08-26T13:58:03.370

You can do it with eval. It may be ugly, but so is having to make a shell script for this. Plus, it's all on one line. For example

```
find -type f -exec bash -c "eval md5sum {}  > {}.sum " \; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-22T19:06:58.800

A simple solution would be to put a wrapper around your script:

```
#!/bin/sh

myscript "$1" > "$1.stdout" 
```

Call it `myscript2` and invoke it with find:

```
find . -type f -exec myscript2 {} \; 
```

Note that although most implementations of find allow you to do what you have done, technically the behavior of find is unspecified if you use `{}` more than once in the argument list of `-exec`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-04-05T17:44:15.587

If you *export* your environment variables, they'll already be present in the child shell (If you use `bash -c` instead of `sh -c`, and your parent shell is itself bash, then you can also export *functions* in the parent shell and have them usable in the child; see `export -f`).

Moreover, by using `-exec ... {} +`, you can limit the number of shells to the smallest possible number needed to pass all arguments on the command line:

```
set -a # turn on automatic export of all variables
source initscript1
source initscript2

# pass as many filenames as possible to each sh -c, iterating over them directly
find * -name '*.stdout' -prune -o -type f \
  -exec sh -c 'for arg; do myscript "$arg" > "${arg}.stdout"' _ {} + 
```

Alternately, you can just perform the execution in your current shell directly:

```
while IFS= read -r -d '' filename; do
  myscript "$filename" >"${filename}.out"
done < <(find * -name '*.stdout' -prune -o -type f -print0) 
```

See [UsingFind](http://mywiki.wooledge.org/UsingFind) discussing safely and correctly performing bulk actions through `find`; and [BashFAQ #24](http://mywiki.wooledge.org/BashFAQ/024) discussing the use of process substitution (the `<(...)` syntax) to ensure that operations are performed in the parent shell.

# ios - iOS 应用镜像“屏幕保护程序”

> ID：15030566
> 
> 赞同：2
> 
> 时间：2013-02-22T18:11:00.290
> 
> 标签：ios, objective-c, ipad, mirroring

我需要让我的 iPad 应用程序完全按照它在设备上运行的方式镜像到外部屏幕上，但是在一段时间不活动后，外部屏幕应该显示静态图像，直到设备再次接收到触摸输入。我今天阅读了很多关于在 iOS 中处理多个屏幕的信息，但找不到解决方案。

是否有可能实现这样的目标，如果可以，如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:07:27.770

*一句话总结：你可以在外屏上使用UIViews，比如在主屏上。*

引用[Apple View 编程指南中](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/CreatingWindows/CreatingWindows.html)**的在外部显示器上显示内容**部分

> 以下部分介绍了在外部显示器上显示内容的过程。但是，以下步骤总结了基本过程：
> 
> 1.  在应用程序启动时，注册屏幕连接和断开通知。
> 2.  当需要在外部显示器上显示内容时，创建并配置一个窗口。使用 UIScreen 的屏幕属性来获取外部显示器的屏幕对象。创建一个 UIWindow 对象并根据屏幕（或您的内容）调整它的大小。将外部显示器的 UIScreen 对象分配给窗口的 screen 属性。根据需要调整屏幕对象的分辨率以支持您的内容。将任何适当的视图添加到窗口。
> 3.  显示窗口并正常更新。

Apple 的开发人员文档提供了所有必需的信息（包括示例）：http: [//developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/CreatingWindows/CreatingWindows.html](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/CreatingWindows/CreatingWindows.html)

# javascript - 为什么时差会给我 2 个不同的结果

> ID：15030571
> 
> 赞同：1
> 
> 时间：2013-02-22T18:11:27.473
> 
> 标签：javascript, time, datediff

这段代码应该给我 0:40 分钟，但是一方面给我 0:20 分钟，另一方面给我 1:40 分钟。

```
var t1 = '12:05'.split(':'),
    t2 = '12:45'.split(':');

var d1 = new Date(0,0,0,t1[0],t1[1]),
    d2 = new Date(0,0,0,t2[0],t2[1]);

document.write(d1+'<BR>');
document.write(d2+'<BR>');

var d = new Date(d1-d2);
// should give 0:40 minutes
document.write(d.getHours() + ":" + d.getMinutes() + '<BR>');
// 0:20 minutes
var d = new Date(d2-d1);
document.write(d.getHours() + ":" + d.getMinutes() + '<BR>');
// 1:40 minutes 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:19:36.910

减去两个日期可以得到它们之间的毫秒数。将其传递`new Date`给您一个新的日期对象，该对象距纪元数毫秒。

如果您想要两个日期之间的分钟数，只需执行以下操作：

```
(d1-d2)/(60*1000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T19:27:09.267

您可以编写自己的函数来计算两个日期差异并以 HH:MM 格式显示结果。

因为 Javascript 在时间戳中返回两个日期差异，如果我们使用该时间戳来获取 JS 日期对象，它会创建全新的日期。

这是示例 dateDiff 函数：

```
function dateDiff(){
    var start = '12:05'.split(':'), // hardcoded value for sample
    end = '12:45'.split(':');      // you can pass start and end value as parameter to dateDiff function.

    var startDate = new Date(0, 0, 0, start[0], start[1], 0);
    var endDate = new Date(0, 0, 0, end[0], end[1], 0);
    var diff = endDate.getTime() - startDate.getTime();
    var hours = Math.floor(diff / 1000 / 60 / 60);
    diff -= hours * 1000 * 60 * 60;
    var minutes = Math.floor(diff / 1000 / 60);

    return ( (hours < 9 ? "0" : "") + hours + ":" + (minutes < 9 ? "0" : "") + minutes);
} 
```

# c# - asp.net或winform中的jquery事件日历类型日历

> ID：15030576
> 
> 赞同：0
> 
> 时间：2013-02-22T18:11:38.670
> 
> 标签：c#, jquery, asp.net, winforms

我正在做我的项目，我正在为我的日常任务制作一个棚子。找到这个 JQuery 事件日历[http://www.vissit.com/projects/eventCalendar/](http://www.vissit.com/projects/eventCalendar/)

问题是它是 PHP 和 m 纯粹的 asp.net 爱好者。:( 我没有寻求帮助以在 asp.net 版本中为我转换它，但我想要的是请告诉我一些像这样的控件，我在 asp.net 或 winform 中但在 .net 中知道。

或者告诉 mw 如果我想在赢表日历中制作这个我必须做什么？我可以这样定制吗？我可以在一个日历中以赢取形式显示多个选定/突出显示的日期吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-24T14:20:53.307

我只是自己转换的:)。我编写了一个 ashx 处理程序，负责从数据库中提供数据。

# c# - ASP.NET MVC 动态设计

> ID：15030579
> 
> 赞同：4
> 
> 时间：2013-02-22T18:11:41.530
> 
> 标签：c#, asp.net-mvc, dynamic

我最近开始学习了`ASP.NET Model View Controller (MVC)`。它在网站上采用的方法非常独特，我注意到`dynamics`. 这将大大改善维护。

但我可以看到过度使用`dynamics`可能是多么糟糕，特别是如果你偏离`strongly typed model`. 所以我的问题是这个...

我正在创建一个布局，但我希望布局为`fluid`. 我希望设计可以很容易地改变而不影响我的逻辑。我知道您可以创建`Master Pages`并且`Master Content Pages`可以轻松容纳大部分布局。除非这对我的使用仍有限制。

有没有办法将这些更改`Master Pages`为`Master Content Pages`真正的动态实体？本质上`designer`可以使用*What you see is what you get*我创建的允许修改整个站点的字段？

我最初的想法是存储创建一个`dynamic layout`每个`View`引用数据库的位置；无论这些变量是什么，都会创建布局。但我不确定这是最好的方法吗？

对于最佳方法有什么建议或想法吗？

请我不打算开始辩论，但是如果人们可以指出我可以研究该实施方法的方向，那将非常有帮助。这样我就可以找到适合这个项目需要的最佳解决方案`dynamic layout`。

* * *

**更新：**

为了提供这个项目的背景，我公司有几个子公司。这些子公司将使用该应用程序，但希望为特定公司量身定制。为了避免过多的设计布局，我想`abstract`那部分。

这样我`logic`就不会受到影响，但是该软件的模块足以满足我们所有子公司的设计需求，而我不必定制其中的每一个或冒着设计师影响`logic`.

谢谢您的帮助。

* * *

**更新：**

为了帮助澄清，目标是允许`User Interface`与应用程序分离。在正常情况下`Windows Application`，我会利用`Inversion Of Control`它来帮助将界面和结构与初始逻辑分开。

这种解耦方法很有帮助，目标是在这种情况下解耦接口，`Razor Syntax`从而设计创建结构。如果你有一个网站：

```
<html>
  <div id="Page-Container">
    <div id="Header" />
    <div id="Content" />
    <div id="Footer" />
  </div>
</html> 
```

该结构将是静态的，但就我而言，我希望它是`dynamic`. 这样我的逻辑可以通过结构抽象出来，但设计师可以随意操纵和改变`page layout`他想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T20:15:30.347

不确定我是否完全理解您的要求......但也许以下前提会引起人们的兴趣？

```
@model CompanyName.LayoutModel
<html>
    <body>
    @foreach(string view in Model.Views)
    {
        @Html.Partial(view);
    }
    </body>
</html> 
```

这将取决于您使用的任何 UI 框架是如何工作的。这个想法是您向 Razor 呈现一个对象，该对象仅包含一组视图，然后 Razor 会部分呈现这些视图。为了。

您可能希望检查[http://www.google.com/ig](http://www.google.com/ig)之类的网站，而不是使用 ASP.NET MVC 进行初始服务，而是使用 ajax 为用户读取自定义布局（如果您在主页中编辑设置您可以完全自定义布局以及在主页上获得什么样的新闻），然后用来自进一步 ajax 调用的数据填充这些布局。
对我来说，这听起来更灵活，每个 AJAX 调用都可以是 ASP.NET MVC 方法（返回剃须刀页面的输出），而 javascript 可以直接将 HTML 插入 DOM。这也为您在调用可能需要更长时间执行或依赖 3rd 方通信的方法时提供了更大的灵活性，因为它允许您更轻松地呈现“加载”动画并报告错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T23:16:11.453

This sounds like you are looking for some kind of CMS. There are already a bunch of [CMS build for ASP.NET MVC](https://www.google.com/#hl=en&output=search&sclient=psy-ab&q=asp.net+mvc+cms&oq=asp.net+mvc+cms), however you may build your own that will fulfill all your needs by storing views in DB. In this case [this article](http://www.umbraworks.net/bl0g/rebuildall/2009/11/17/ASP_NET_MVC_and_virtual_views) might point you in the right direction.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:29:57.470

在剃须刀中，您可以轻松做到这一点。您必须有一个用于布局模板的模型并将其绑定到您的剃须刀布局中。布局的每个部分都可以位于`@if`检查模型字段并动态创建每个部分的剃刀块中。

# jquery - 如何在 html 容器中添加元素作为列堆栈？

> ID：15030582
> 
> 赞同：0
> 
> 时间：2013-02-22T18:11:55.910
> 
> 标签：jquery, html, css

我想要这样的默认html结构：

![在此处输入图像描述](../Images/49ae64d4634e46a75ee25f2440fb24c6.png)

我需要动态添加矩形框，它必须是这样的

![在此处输入图像描述](../Images/aa25ca120a271b5e45ce0ba61e360e65.png)

我怎么能这样做？

我所做的是这样的：

```
<div style="width:400px;">
        <ul id="UlPopUp" style="-webkit-columns: 2; -moz-columns: 2; columns: 2;">
            <li id='liLeftDescriptions'>
                <span>Item1
                </span>
            </li>
            <li id='liLeftSkills'>
                <span>Item1</span>
            </li>
            <li id='liLeftClient'>
                <span>Item1</span>
            </li>
        </ul>
    </div> 
```

[http://jsfiddle.net/6eq56/](http://jsfiddle.net/6eq56/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:36:03.703

```
$('button').click(function(){
    var elem = $("<div class='item'></div>");
    if($('.col1>div').length < 4)
        $('.col1').append(elem);
    else
        $('.col2').append(elem);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:18:50.997

我想你可能会使用类似的东西：

```
var div_to_append = "<li class='some_class'><span>Item1</span></li>"
$("#clickBtn").on("click", function() {
$("#UlPopUp").append(div_to_append);
}); 
```

我用`button`检查了 jfiddle [http://jsfiddle.net/6eq56/2/](http://jsfiddle.net/6eq56/2/)

我想你想触发事件`on click`或类似的东西

# hibernate - 使用 Hibernate Envers 审计多对多关系

> ID：15030588
> 
> 赞同：9
> 
> 时间：2013-02-22T18:12:17.233
> 
> 标签：hibernate, jpa, hibernate-envers

我正在使用 Hibernate Envers 来审计我的实体。但我有一个问题。我想审核具有多对多关系的实体。我发现存在一个@AuditJoinTable，但我不知道它是如何工作的。有人可以给我一个例子吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T15:29:15.267

审计多对多关系应该无需任何额外配置即可工作，前提是关系的双方都经过审计。

至于`@AuditJoinTable`，注解用于指定连接表的自定义表名。看：

[http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/envers/AuditJoinTable.html](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/envers/AuditJoinTable.html)

默认名称是`[Referencing entity name]_[Referenced entity name]_AUD`. 如果默认表名很好，则不必使用注释。

# drawrect - collectionView:cellForItemAtIndexPath 混合图像，用 drawRect 绘制：

> ID：15030594
> 
> 赞同：4
> 
> 时间：2013-02-22T18:12:57.267
> 
> 标签：drawrect, uicollectionview, uicollectionviewcell

我决定使用`drawRect:`而不是自定义 xib 文件来绘制我的 UICollectionViewCell 以提高性能（因为我有阴影和标签阴影）。

出于某种原因，因为我改变了这一点，我的单元格在每次重新加载到`UICollectionView`.

当我记录它设置为加载的图像名称时`collectionView:cellForItemAtIndexPath`，`drawRect:`它提供了正确的图像名称和正确的索引路径，但是当我加载应用程序时，它会在滚动时混淆它们，即使最初，它们已正确加载。

这是我的代码：

**viewDidLoad**

```
//  Collection cells
//
[self.collectionView registerClass:[CluelessSymbolCell class] forCellWithReuseIdentifier:@"Symbol cell"]; 
```

**集合视图：cellForItemAtIndexPath**

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    CluelessSymbolCell *cell = (CluelessSymbolCell *)[collectionView dequeueReusableCellWithReuseIdentifier:@"Symbol cell" forIndexPath:indexPath];

    CluelessClue *clue = [self.clues objectAtIndex:indexPath.row];

    NSLog(@"(%@) Image: %@", indexPath, [clue.imageNames objectAtIndex:0]);

    [cell setClue:clue];

    return cell;
} 
```

**drawRect：（在单元格子类'CluelessSymbolCell'中）**

```
- (void)drawRect:(CGRect)rect
{
    NSString *imageName = [NSString stringWithFormat:@"%@-icon-iphone", [self.clue.imageNames objectAtIndex:0]];

    //  Cell
    //
    [self.contentView.layer setShadowColor:[UIColor blackColor].CGColor];
    [self.contentView.layer setShadowOpacity:0.3f];
    [self.contentView.layer setShadowRadius:2.0f];
    [self.contentView.layer setShadowOffset:CGSizeZero];
    [self.contentView.layer setShadowPath:[UIBezierPath bezierPathWithRect:self.layer.bounds].CGPath];

    //      Image
    //
    CALayer *imageLayer = [CALayer layer];
    [imageLayer setFrame:rect];
    [imageLayer setContents:(id)[[UIImage imageNamed:imageName] CGImage]];

    [self.contentView.layer addSublayer:imageLayer];
} 
```

***编辑***

在记录单元格内容视图的子层时，我可以看到每个单元格的内容视图子层已移动到下一个单元格，这是什么原因以及如何克服它？

**日志：**

```
2013-02-22 23:41:08.064 Clueless[3462:c07] <NSIndexPath 0x845cb90> 2 indexes [0, 0], (null)
2013-02-22 23:41:08.065 Clueless[3462:c07] <NSIndexPath 0x84435f0> 2 indexes [0, 1], (null)
2013-02-22 23:41:08.066 Clueless[3462:c07] <NSIndexPath 0x8446f50> 2 indexes [0, 2], (null)
2013-02-22 23:41:08.066 Clueless[3462:c07] <NSIndexPath 0x843a060> 2 indexes [0, 3], (null)
2013-02-22 23:41:08.067 Clueless[3462:c07] <NSIndexPath 0x846bc70> 2 indexes [0, 4], (null)
2013-02-22 23:41:08.067 Clueless[3462:c07] <NSIndexPath 0x845cd20> 2 indexes [0, 5], (null)
2013-02-22 23:41:08.068 Clueless[3462:c07] <NSIndexPath 0x845ce60> 2 indexes [0, 6], (null)
2013-02-22 23:41:08.068 Clueless[3462:c07] <NSIndexPath 0x846ce40> 2 indexes [0, 7], (null)
2013-02-22 23:41:08.069 Clueless[3462:c07] <NSIndexPath 0x846c9b0> 2 indexes [0, 8], (null)
2013-02-22 23:41:08.069 Clueless[3462:c07] <NSIndexPath 0x846d880> 2 indexes [0, 9], (null)
2013-02-22 23:41:08.070 Clueless[3462:c07] <NSIndexPath 0x846db20> 2 indexes [0, 10], (null)
2013-02-22 23:41:08.071 Clueless[3462:c07] <NSIndexPath 0x846df30> 2 indexes [0, 11], (null)
2013-02-22 23:41:15.105 Clueless[3462:c07] <NSIndexPath 0x846ec60> 2 indexes [0, 12], (null)
2013-02-22 23:41:15.106 Clueless[3462:c07] <NSIndexPath 0x846efb0> 2 indexes [0, 13], (null)
2013-02-22 23:41:15.107 Clueless[3462:c07] <NSIndexPath 0x846f6d0> 2 indexes [0, 14], (null)
2013-02-22 23:41:15.753 Clueless[3462:c07] <NSIndexPath 0x82492e0> 2 indexes [0, 15], (
    "<CALayer: 0x8495840>"
)
2013-02-22 23:41:15.754 Clueless[3462:c07] <NSIndexPath 0x827f750> 2 indexes [0, 16], (
    "<CALayer: 0x8491010>"
)
2013-02-22 23:41:15.754 Clueless[3462:c07] <NSIndexPath 0x827f5c0> 2 indexes [0, 17], (
    "<CALayer: 0x8493ef0>"
)
2013-02-22 23:41:15.986 Clueless[3462:c07] <NSIndexPath 0x845cb90> 2 indexes [0, 0], (
    "<CALayer: 0x8493ef0>"
)
2013-02-22 23:41:15.987 Clueless[3462:c07] <NSIndexPath 0x84435f0> 2 indexes [0, 1], (
    "<CALayer: 0x8491010>"
)
2013-02-22 23:41:15.987 Clueless[3462:c07] <NSIndexPath 0x8446f50> 2 indexes [0, 2], (
    "<CALayer: 0x8495840>"
)
2013-02-22 23:41:26.161 Clueless[3462:c07] <NSIndexPath 0x827d970> 2 indexes [0, 12], (
    "<CALayer: 0x8241e20>"
)
2013-02-22 23:41:26.162 Clueless[3462:c07] <NSIndexPath 0x824e9d0> 2 indexes [0, 13], (
    "<CALayer: 0x827bc60>"
)
2013-02-22 23:41:26.163 Clueless[3462:c07] <NSIndexPath 0x827d030> 2 indexes [0, 14], (
    "<CALayer: 0x8242fb0>"
)
2013-02-22 23:41:26.776 Clueless[3462:c07] <NSIndexPath 0x82492e0> 2 indexes [0, 15], (
    "<CALayer: 0x8491010>"
)
2013-02-22 23:41:26.777 Clueless[3462:c07] <NSIndexPath 0x827f750> 2 indexes [0, 16], (
    "<CALayer: 0x8493ef0>"
)
2013-02-22 23:41:26.778 Clueless[3462:c07] <NSIndexPath 0x827f5c0> 2 indexes [0, 17], (
    "<CALayer: 0x8495840>"
)
2013-02-22 23:41:26.926 Clueless[3462:c07] <NSIndexPath 0x845cb90> 2 indexes [0, 0], (
    "<CALayer: 0x8495840>"
)
2013-02-22 23:41:26.927 Clueless[3462:c07] <NSIndexPath 0x84435f0> 2 indexes [0, 1], (
    "<CALayer: 0x8493ef0>"
)
2013-02-22 23:41:26.928 Clueless[3462:c07] <NSIndexPath 0x8446f50> 2 indexes [0, 2], (
    "<CALayer: 0x8491010>"
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:52:54.450

我不知道这是一个错误，还是我的最终问题。

但是，似乎要克服这个问题，您需要强制`drawRect:`进入`prepareForReuse`

```
- (void)prepareForReuse
{
    [super prepareForReuse];

    [self setNeedsDisplay];
} 
```

# jquery - jquery 自动完成 json

> ID：15030595
> 
> 赞同：0
> 
> 时间：2013-02-22T18:13:02.037
> 
> 标签：jquery, json

我正在尝试在我的表单上进行自动完成输入，但在获取要显示的数据时遇到了问题。有很多关于这方面的帖子，但也有很多不同的方法。我一直在尝试遵循 jquery 网站上的示例，但我想我只是没有得到正确的返回数据？我的页面看起来像：

```
<html>
<head>
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/base/jquery-ui.css" type="text/css" media="all" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js"></script>

<script type="text/javascript">                                         
$(document).ready(function() {
    $( "#Codes" ).autocomplete({
        source: function( request, response ) {
            $.ajax({                   
                   url: "/jreqlib",
                   dataType: "json",
                   data: {
                       featureClass: "P",
                       style: "full",
                       maxRows: 25,
                    },
                    success: function( data ) {
                        response( $.map( data, function( item ) {
                            return {
                                label: item.name,
                                value: item.name
                            }
                        }));
                    }
                });
        },
        minLength: 1,
        open: function() {
        $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
        },
        close: function() {
            $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
        }
   });
});
    </script>
</head>
<body>
<form>
    <input id="Codes">
</form>
</body>
</html> 
```

我从服务器返回的内容如下所示：

```
[{"1234":"1234"},{"134":"134},{"567":"567"}] 
```

我喜欢的是，当我在框中单击时，它会显示“1234”和“567”，如果我输入 1，则会出现“1234”和“134”，如果我输入 12，那么只会出现“1234”等等。

任何帮助将不胜感激 TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T00:18:18.780

我的建议是让服务器根据搜索字符串动态生成 json。`name_startsWith: request.term`在下面插入`maxRows: 25,`。`name_startsWith`服务器现在可以在get 变量中找到搜索字符串。对于搜索字符串“1”，服务器可能会以`["1234","134"]`.

此外，删除

```
featureClass: "P",
style: "full",
maxRows: 25, 
```

并更换

```
response( $.map( data, function( item ) {
    return {
        label: item.name,
        value: item.name
    }
})); 
```

经过

```
response(data); 
```

# php - 从 CSV 文件读取并添加到数据库，排除重复项

> ID：15030596
> 
> 赞同：0
> 
> 时间：2013-02-22T18:13:02.803
> 
> 标签：php, mysql, csv

我有一个 CSV 文件，我正在尝试将其加载到我的 mysql 数据库中。该文件大于 10MB，有超过 100,000 行。我需要一种有效的方法来检查数据库中是否已经存在一行，并添加新条目。它用于使用来自另一个第三方数据库的最新数据更新数据库。

逐行检查并逐行添加似乎确实效率低下。此外，如果有帮助，CSV 文件有一个日期字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:20:11.653

首先，我将准备数据库表以具有索引和唯一键。

然后，我将逐行解析 CSV。如果重复，数据库将不接受该值，您的脚本将继续。

如果您的 CSV 没有唯一的字段，您可以根据该行的所有数据字段创建一个哈希并将其用作唯一键。您可以使用以下方式生成唯一密钥：

`md5(field1 + ":" + field2 + ":" + ... + ":" + fieldN)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:20:25.773

我可以想到 2 个简单的选项。查询 DB 1 次并将整个结果集存储在 id-keyed 数组中

```
$data[$queryResult['fieldID']] = $queryResult; 
```

并使用它来快速验证每个字段。或者您可以使用 INSERT IGNORE （将忽略该字段已存在的警告并继续下一个）

# java - 带有可选 css 类的 Java Freemarker 宏

> ID：15030597
> 
> 赞同：1
> 
> 时间：2013-02-22T18:13:07.043
> 
> 标签：java, freemarker

我正在尝试在 freemarker 上做一个宏，但是我在将 css 类实现为参数时遇到了问题。我的对象有一些默认的 css 类，我想添加可选类。

```
<#macro Button href extra...>
    <a href="${href}" class="ui-button"
    <#list extra?keys as attr>
    ${attr}="${extra[attr]?html}"
    </#list>
    >Anchor Button</a>
</#macro>

1) <@Button href="link.html"></@Button>
2) <@Button href="link.html" id="button1" class="marginrightnone"></@Button> 
```

第 2) 行仅呈现“id”参数。如果我删除宏的 class="ui-button" ，那么它会正确呈现。

我能做些什么来渲染两个或更多的类参数？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T20:48:11.373

`class`您需要构造一个包含所有类参数的字符串，并将其用作模板中单个 HTML 属性的值。

您不能拥有任意数量的`class`属性/值对并且仍然是合法的 HTML。

最简单的基本上就是你现在所拥有的，就是创建一个包含`"ui-button"`值的本地。当您遍历`extra?keys`检查`"class"`键时，如果找到，请将其附加到本地类（以及前导空格）。模板将使用该构造值：

```
<a href="${href}" classes="${local_classes}" 
```

# spring - Spring data-jpa 和异常处理

> ID：15030600
> 
> 赞同：1
> 
> 时间：2013-02-22T18:13:12.867
> 
> 标签：spring, spring-data-jpa

最近我发现了 Spring Data Jpa。我无法使其正常工作的一件事是将异常转换为 Spring 的异常层次结构。

根据这个[Spring Data JPA 强制 CGLib 代理到非存储库类](https://stackoverflow.com/questions/11745543/spring-data-jpa-forces-cglib-proxying-to-non-repository-classes)，`<jpa:repositories />`激活使用 @Repository 注释的 Spring bean 的持久性异常转换。这篇文章中的参考文档指向 spring-data-jpa 1.1.1。

但是当您查看 1.3.0 版的文档时，这一段已被删除。我也在`@Repository`尽可能地使用注释，但没有成功。

我的问题是：是否可以使用最近的 spring-data-jpa lib 1.3.0 版实现正确的异常翻译？

好的。我将在这里放置一些配置：

...

```
<bean id="myDataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
  <property name="driverClass" value="oracle.jdbc.OracleDriver"/>
  <property name="jdbcUrl" value="jdbc:oracle:thin:@localhost:1521:pbase"/>
  <property name="user" value="sa"/>
  <property name="password" value="pass"/>
</bean>

<context:annotation-config/>

<bean id="myEmf" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="myDataSource"/>
    <property name="persistenceUnitName" value="prjPersistenceUnit"></property>
    <property name="persistenceXmlLocation" value="classpath:META-INF/mpersistence.xml"></property>
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter"
              p:showSql="true"/>
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="myEmf"/>
</bean>

<tx:annotation-driven/>

<jpa:repositories base-package="com.mycompany.repository" /> 
```

persistence.xml 的内容

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="prjPersistenceUnit" transaction-type="RESOURCE_LOCAL">
        <description>Persistence unit which uses EclipseLink JPA 2.0 implementation.</description>
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <class>com.mycompany.Setting</class>
        <exclude-unlisted-classes>true</exclude-unlisted-classes>
        <properties>
            <property name="eclipselink.target-server" value="JBoss"/>
            <property name="eclipselink.target-database" value="Oracle10g"/>
            <property name="eclipselink.weaving" value="static"/>
        </properties>
    </persistence-unit>
</persistence> 
```

我的仓库

```
@Repository
public interface TestRepository extends JpaRepository<Setting, Long> {

    Setting findByNamee(String name);
} 
```

这里 findByNamee 应该引发一些 Spring 数据库异常，因为数据库中的一个真实属性是 name 而不是 namee。但我总是得到

```
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException 
```

`@Repository`但是，当使用注释配置常规 Dao 对象时，一切都按预期工作。

我正在尝试使用 eclipseLink 2.3.2 在 Tomcat 6.0 上部署它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T20:54:47.943

您必须将 EclipseLink Jpa 方言注入 EntityManagerFactory，因为异常翻译器在方言中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:37:59.250

[您可以查看我从那时起在https://github.com/zagyi/examples/tree/master/spring-data-jpa](https://github.com/zagyi/examples/tree/master/spring-data-jpa)发布的一些工作示例代码

# javascript - 如何将这些简单的 javascript 行变成一个循环

> ID：15030605
> 
> 赞同：1
> 
> 时间：2013-02-22T18:13:46.373
> 
> 标签：javascript, jquery

我刚刚开始学习 javascript，并且我编写了以下代码（来自 php 背景）：

```
$(document).ready(function(){
$("#example-1").attr("rel","1");
$("#example-2").attr("rel","2");
$("#example-3").attr("rel","3");
}); 
```

我假设把它变成更像这样的东西会更快并且使用更少的资源（即使它是微不足道的）：

```
 jQuery(document).ready(function(){
foreach #example-X
 i++
        $("#exmaple-[i]").attr("rel","[i]");
    }); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T18:16:08.080

```
$(function() {
    for( var i = 1; i <= 3; i++ ) {
        $( '#example-' + i + ' .example' ).attr( 'rel', i );
    }
} ); 
```

如果你有三个以上，假设它们是 div，我相信这应该可行

```
$(function() {
    for( var i = 1; i <= $( 'div[id^=example]' ).length ; i++ ) {
        $( '#example-' + i + ' .example' ).attr( 'rel', i );
    }
} ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T18:16:36.287

试试这个：

```
$(document).ready(function(){
    for(var i = 1; i <= 3; i++) {
        $("#example-" + i).attr("rel", i);
    }
}); 
```

您可以连接以在其中创建您需要的任何字符串`$()`。

如果您需要`(#example-1 .example)`，请尝试

```
$("#example-" + i + " .example") 
```

# c# - 为什么 Debugging 和 Release 模式下的线程执行顺序不同？

> ID：15030610
> 
> 赞同：0
> 
> 时间：2013-02-22T18:14:14.290
> 
> 标签：c#, multithreading, visual-studio, debugging, release

我在 Visual Studio 2010、Windows XP SP3 中运行下面的 C# 代码。

在“不调试就开始”（通过 Ctrl+F5 或从菜单）中，输出：

*   来自主要
    的你好 来自工人的你好

“开始调试”（按 F5 或从菜单）显示相反的顺序：

*   来自工人
    的你好来自主要的你好

检查了很多次。它是可重现和可重复的。
为什么？

```
using System;
using System.Threading;

namespace _5NamingThreads
{
  class ThreadNaming
  {
    static void Main()
    {
      Thread.CurrentThread.Name = "main";
      Thread worker = new Thread(Go);
      worker.Name = "worker";
      worker.Start();
      Go();
      Console.ReadLine();
    }

    static void Go()
    {
      Console.WriteLine("Hello from " + Thread.CurrentThread.Name);
    }
  }
} 
```

**更新**：
第二天，重新启动计算机后，我总是观察在所有模式下都可以重现的顺序，发布和调试：

*   来自主要
    的你好 来自工人的你好

追问：
[在调试的时候，不单步进入每一行代码，是否可以保证输出？](https://stackoverflow.com/questions/15037105/while-debugging-is-it-possible-to-ensure-the-output-without-stepping-into-each)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T18:16:02.443

在调试模式下，线程启动过程需要在新线程中初始化调试上下文。这必须在函数返回之前完成，因为原始线程可能在新线程上运行。最终结果是这会减慢原始线程的速度，从而让新线程首先运行。

当然，这不是您应该*依赖*的东西。它可能会在下一版本的操作系统、库、调试器、CPU 中发生变化……

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T18:18:19.933

这是因为启动新的异步线程是不确定的。换句话说，开发人员不能依赖线程以相同的顺序执行。查看[比赛条件。](http://en.wikipedia.org/wiki/Race_condition)

# php - 这个 PHP 代码片段中的内存泄漏在哪里？

> ID：15030622
> 
> 赞同：1
> 
> 时间：2013-02-22T18:15:26.203
> 
> 标签：php, memory-leaks

我有一个 PHP 代码片段，它读取 apache 访问日志进行处理。我已经将代码精简到这几行，但我仍然发现了泄漏。PHP 进程不断占用越来越多的内存，即使 echo memory_get_usage() 每次都报告 11Mb。

在 Ubuntu 12 机器上使用 PHP 5.3.6 运行。Ubuntu 上的 PHP 5.2 解决了问题。

```
$logDir = opendir(dirname(__FILE__) . DIRECTORY_SEPARATOR . 'tempLog');
while (($file = readdir($logDir)) !== false) {
    echo($file . PHP_EOL);

    $filePath = dirname(__FILE__) . DIRECTORY_SEPARATOR . 'tempLog' . DIRECTORY_SEPARATOR . $file;
    $fhandle = fopen($filePath, 'r');
    fseek($fhandle, 0);

    while(!feof($fhandle)) {
        $line = fgets($fhandle);
    }

    fclose($fhandle);
    echo('Finished reading!' . PHP_EOL);
    echo('Memory usage: ' . memory_get_usage() . PHP_EOL . PHP_EOL);
    system('cat /proc/' . getmypid() . '/status | grep VmSize');
} 
```

编辑：添加了此脚本的示例输出：EDIT2：添加了 VM 大小

```
access.log.2
Finished reading!
Memory usage: 11303616
VmSize:       54972 kB

access.log.19
Finished reading!
Memory usage: 11303616
VmSize:       55896 kB

access.log.23
Finished reading!
Memory usage: 11303616
VmSize:       81372 kB

access.log.41
Finished reading!
Memory usage: 11303616
VmSize:       93120 kB

access.log.31
Finished reading!
Memory usage: 11303616
VmSize:      107508 kB

access.log.28
Finished reading!
Memory usage: 11303616
VmSize:      112128 kB

access.log.5
Finished reading!
Memory usage: 11303616
VmSize:      112920 kB

..
Finished reading!
Memory usage: 11303592
VmSize:      112920 kB

.
Finished reading!
Memory usage: 11303592
VmSize:      112920 kB 
```

内存泄漏可能在哪里？以及如何避免它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:53:52.677

默认情况下，PHP 不进行垃圾收集（似乎来自手册的略读）。你可以做几件事。

1) 启用 GC `gc_enable()`。您可以使用`gc_collect_cycles()`.

`$line`2)使用.显式销毁`unset($line)`。

# json - 如何丰富一个spring控制器json的响应

> ID：15030623
> 
> 赞同：0
> 
> 时间：2013-02-22T18:15:32.027
> 
> 标签：json, spring, filtering

我有一个简单的 Spring MVC 应用程序，其中控制器生成 Json 对象并将它们作为字符串返回。

我想将这些 json 树原样从控制器中返回，并有一种 servlet 过滤器来丰富它们。基本上它将获取 json 节点并将其作为全新 json 根的子节点移动。想想封装在完整响应中的“主体”，还包括将由该过滤器生成的“头”子节点。

可以在 Spring 中这样做吗？

感谢您的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:46:19.833

我建议不要返回纯字符串，而是返回 POJO 并使用 HTTP 消息转换器（例如`MappingJackson2HttpMessageConverter`）和`@ResponseBody`注释将其转换为 JSON。然后你可以按照你想要的方式装饰返回对象。

# python - Python，分段错误

> ID：15030626
> 
> 赞同：1
> 
> 时间：2013-02-22T18:15:49.867
> 
> 标签：python, binary

我正在以这种方式读取 python 2.7.3 中的二进制文件：

```
import os, struct
from numpy import *

win_span = 8
coinc_window = zeros(2)
event = asarray((False, False, False, False))
Statistics = zeros(5)

with open("myfile", "rb") as f:
    byte = f.read(8)
    while byte != "":
        time_bin = struct.unpack("<Q", byte)[0]
        byte = f.read(2)
        channel_tag = struct.unpack("<H", byte)[0]
        if time_bin > coinc_window[1] + win_span:
            Statistics[4] += event[0]*event[2]
            event = asarray((False, False, False, False))
            coinc_window = coinc_window[::-1]
            coinc_window[1] = time_bin
        event[channel_tag-1] = True
        Statistics[channel_tag-1] += 1
        byte = f.read(8)    
print "Fin" 
```

它适用于小型二进制文件（~2MB），但是当我为大小超过~6MB的二进制文件运行它时，它实际上完成了运行，但也给出了这个错误：“分段错误”。我不知道它出了什么问题？

# android - 在不同的安卓设备上通过蓝牙相互交互的应用程序？

> ID：15030627
> 
> 赞同：1
> 
> 时间：2013-02-22T18:15:52.757
> 
> 标签：android

我想了解是否可以制作一个应用程序，在 2 个不同的设备上安装和运行后，以某种方式相互连接，例如，应用程序中有一个按钮和一个文本视图，当我单击按钮时在我的设备上，它会更新其他设备应用程序中的文本视图，反之亦然。

如果是，那么请指导我它叫什么，我在哪里可以阅读和了解它。提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:21:19.557

查看Android 开发者页面上的[连接部分。](http://developer.android.com/guide/topics/connectivity/index.html)它有一些解决方案。

在您的情况下，有一个关于设备之间通信的[蓝牙](http://developer.android.com/guide/topics/connectivity/bluetooth.html#ConnectingDevices)部分。本质上，您有一台设备充当服务器，另一台设备充当客户端。

从该页面描述作为服务器所涉及的内容。

> **作为服务器连接**
> 
> 当你想连接两台设备时，一个必须通过持有一个打开的 BluetoothServerSocket 来充当服务器。服务器套接字的目的是监听传入的连接请求，当一个被接受时，提供一个连接的蓝牙套接字。当从 BluetoothServerSocket 获取 BluetoothSocket 时，BluetoothServerSocket 可以（并且应该）被丢弃，除非您想接受更多的连接。

现在您使用客户端电话连接到服务器电话。

> **作为客户端连接**
> 
> 为了启动与远程设备（持有开放服务器套接字的设备）的连接，您必须首先获取代表远程设备的 BluetoothDevice 对象。（获取蓝牙设备在上面有关查找设备的部分中进行了介绍。）然后您必须使用蓝牙设备来获取蓝牙套接字并启动连接。

较新手机上的另一个选项可以使用[WiFi Direct](http://developer.android.com/guide/topics/connectivity/wifip2p.html)，它也是为您尝试做的事情而构建的。

# css - 为 WP 站点中的小部件和小部件区域添加或调整 CSS

> ID：15030633
> 
> 赞同：0
> 
> 时间：2013-02-22T18:16:08.680
> 
> 标签：css, widget

我希望我能正确解释这一点。我有主页。它上面有 4 个小部件区域。每个小部件区域都有一些内容（您将在我包含的屏幕截图中看到）。三个小部件只是带有疯狂 CSS 的文本，并且在标题周围有一个带有框的标题（包括文本）。第 4 个小部件无关紧要，因为它只是一个图像。

一个小部件的标题有一个框、半径、背景颜色，并且它与小部件内的其余信息左/右对齐。另外两个小部件 - 标题在整个小部件区域左右 100% 左右对齐。

查看图像，因为它会更有意义。

这是一个直接链接到图像的 alrge 视图：[http ://postimage.org/image/ofdqc1sa7/](http://postimage.org/image/ofdqc1sa7/)

wdiget 部分“新客户” - 看看它是如何左/右对齐的。它延伸了整个盒子的整个宽度。现在看看 Existing 和 Why - 它是如何不一直延伸到左右两侧的。我怎样才能让它一直伸展？我已经经历了很多次改变这个/改变那个。我在 Firefox 中的 Firebug 很火，但我似乎无法获得正确的 CSS 代码来实现这一点。快把我逼疯了。

任何帮助表示赞赏。提前感谢您的回复...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:18:45.187

最初我会说可能存在填充问题。是否有一个实时链接，我可以通过萤火虫进一步排除故障？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:22:17.653

改变这种风格

```
.cl-content {
    margin: 8px;
} 
```

对此

```
.cl-content {
    margin: 0px;
} 
```

但是，这会导致您的列出现一些对齐问题。但是，那个类是导致你的问题的原因。

[ 编辑 ]

如果您将 #text-17 和 #text-18 宽度更改为 670px，它应该可以解决您的问题。

我还将 #LoginWithAjax 更改为 #LoginWithAjax { padding: 5px; }

# r - R中的cv.lars错误

> ID：15030634
> 
> 赞同：3
> 
> 时间：2013-02-22T18:16:13.167
> 
> 标签：r, lasso-regression, lars

我有一个关于**cv.lars**的问题。下面是我使用的数据的描述：

```
is.numeric(Y$Y1)
[1] TRUE

length(Y$Y1)
[1] 589

dim(Training_XX[7:ncol(Training_XX)])
[1]  589 5677 
```

我已经使用**lars**包运行了**套索。**我的代码如下：

 **```
LASSO_1<-lars(as.matrix(X[7:ncol(X)]), 
              Y$Y1,type=c("lasso"), 
              normalize=TRUE, use.Gram=FALSE). 
```

上述过程似乎运行良好。但是，当我尝试对lambda**值进行****交叉验证**时，出现以下错误：

 **```
Error in if (zmin < gamhat) { : missing value where TRUE/FALSE needed 
```

我的交叉验证代码是：

```
CV<-cv.lars(as.matrix(X[7:ncol(X)]),Y$Y1,use.Gram=FALSE,max.steps=500)
lambda_Y1=CV$index[which.min(CV$cv)] 
```

有谁知道发生了什么？我真的不知道那个错误是什么意思以及我的数据（和/或代码）有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-25T22:48:53.313

我遇到了同样的错误，问题（至少在我的情况下）是我的数据矩阵的两列是相等的。看来 lars 不能很好地处理这个问题。只需过滤相关性非常高的列。****

# php - 如何将 $_GET 值放入 codeigniter 的变量中

> ID：15030637
> 
> 赞同：0
> 
> 时间：2013-02-22T18:16:17.433
> 
> 标签：php, codeigniter, get

我在检索和将 url 中的用户 ID 放入变量时遇到问题。这是我正在尝试使用的控制器。我已阅读用户指南中的文档，但没有得到任何结果。

这是我的网址结构：

```
clci.dev/account/profile/220 
```

控制器：

```
public function profile() 
    {

        $this->load->helper('date');
        $this->load->library('session');
        $session_id = $this->session->userdata('id');
        $this->load->model('account_model');
        $user = $this->account_model->user();
        $data['user'] = $user;
        $data['session_id'] = $session_id;
        //TRYING TO MAKE A VARIABLE WITHT THE $_GET VALUE
        $user_get = $this->input->get($user['id']); 
        echo $user_get;
        if($user['id'] == $session_id)
        {
            $data['profile_icon'] = 'edit';
        }
        else
        {
            $data['profile_icon'] = 'profile';
        }
        $data['main_content'] = 'account/profile';
        $this->load->view('includes/templates/profile_template', $data);

    } 
```

我是否完全做错了，或者我需要在我的配置文件中进行调整？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:24:22.820

在 codeigniter 中，不是让`something.com/user.php?id=2`我们使用`something.com/user/2`和获得 2 的方法是使用这个：

```
$this->uri->segment(3) 
```

更多信息[http://ellislab.com/codeigniter/user-guide/libraries/uri.html](http://ellislab.com/codeigniter/user-guide/libraries/uri.html)

编辑：

根据您的网址：clci.dev/account/profile/220 您需要`$this->uri->segment(4)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T18:38:02.587

您将按如下方式设置控制器功能

```
public function profile($id = false) 
{
     // example: clci.dev/account/profile/222
     // $id is now 222
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T05:03:11.273

你可以直接得到这样的：

```
public function profile($user_id = 0) 
{
     //So as per your url... $user_id is 220
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T08:45:33.047

我想此时 $_GET['id'] 的值应该是 220，所以在这里：要获得 220，你必须这样做*（除了有问题的获取值不是 220，如图所示你上面的网址）*

假设您访问：clci.dev/account/profile/220。关注评论以获取更多信息。

```
public function profile() 
{
    $this->load->helper('url'); //Include this line
    $this->load->helper('date');
    $this->load->library('session');
    $session_id = $this->session->userdata('id'); //Ensure that this session is valid
    $this->load->model('account_model');
    $user = $this->account_model->user(); //(suggestion) you want to pass the id here to filter your record
    $data['user'] = $user;
    $data['session_id'] = $session_id;
    //TRYING TO MAKE A VARIABLE WITHT THE $_GET VALUE
    $user_get = $this->uri->segment(3); //Modify this line
    echo $user_get; //This should echo 220
    if($user_get == $session_id) //Modify this line also
    {
        $data['profile_icon'] = 'edit';
    }
    else
    {
        $data['profile_icon'] = 'profile';
    }
    $data['main_content'] = 'account/profile';
    $this->load->view('includes/templates/profile_template', $data);

} 
```

我希望这可以帮助您在正确的轨道上起步。

# html - “活动”类不适用于使用 javascript 的元素：在 jQTouch 的 href 中

> ID：15030638
> 
> 赞同：0
> 
> 时间：2013-02-22T18:16:20.247
> 
> 标签：html, css, jqtouch

对于一些背景知识，我使用 PhoneGap 构建了一个移动 Android 应用程序，使用 PhoneGap 作为本机功能，并使用 jQTouch 作为 UI 框架的 jQuery。我有一堆`<ul>`打开相机的链接（类别）。该应用程序“知道”哪个链接被点击，因此它知道图片属于哪个类别。

我看到的问题是 .active 类不适用于 jQTouch 中被认为具有外部链接的元素，其中 javascript: 是其中之一。有没有人知道如何在相机打开之前给用户一些`<li>`他点击的指示，以便如果他注意到 .active 类被应用于与他预期不同的元素，他可以取消他的动作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:03:21.767

为了后代，似乎 jQTouch 添加和删除 .active 类的速度如此之快，以至于 UI 无法跟上。基本上，它的添加/删除速度非常快，以至于根本检测不到任何变化。它可以在计算机上运行，​​但不能在手机上运行。

为了解决这个问题，我在类删除功能上使用了 setTimeout() 函数。我将其设置为 500 毫秒。列表项现在变为活动状态，触发相机功能（或您选择的任何功能），然后在 500 毫秒后删除该类。完美的！

# ruby-on-rails - 如何在 Rails 中正确创建自定义操作？

> ID：15030646
> 
> 赞同：1
> 
> 时间：2013-02-22T18:17:34.787
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

我正在尝试创建自定义表单，允许管理员打开和关闭用户的用户权限，并将它们保存到数据库中。我一定是做错了什么，因为页面生成正常，提交按钮提交给操作正常，但没有任何东西保存到数据库中，它只是再次呈现我的初始视图。谁能看到我做错了什么？

编码

路线：

```
resources :users do
  member do
    get 'assign'
    put 'assign_update'
  end
end
... 
```

控制器（这种奇怪的做法是为了规避管理员和其他属性不可访问的事实。这可能是一团糟。）：

```
...
def assign
  @user = User.find(params[:id])
end

def assign_update
  admin_protected = params[:user].delete(:admin)

  @user = User.find(params[:id])
  @user.admin = admin_protected

  if @user.save
    flash[:success] = "User updated"
    redirect_to users_path
  else
    render 'assign'
  end
end 
```

看法：

```
...
<%= form_for(@user, url: { controller: 'users', 
  action: 'assign_update'}, method: 'put') do |f| %>
  <%= f.label :admin, 'Is admin?', class: 'checkbox inline' %>
  <%= f.check_box :admin %>
  <%= f.submit "Save changes", class: "btn btn-large btn-primary" %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T20:22:28.720

因此，总结一下我们在问题下方评论部分的对话......

发现问题是对其他用户模型属性的验证。无法保存用户实例，因为`save`执行方法时未通过验证。结果，Rails 只是呈现分配视图。

`update_attribute`方法在没有模型验证和批量分配保护的情况下更新属性。在这种情况下，`admin`属性符合这两个标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:01:10.763

您应该在模型中使用 attr_accessible 并从参数中手动选择这些字段并单独分配它们，确保 admin 字段不包含在分配给 attr_accessible 声明的字段列表中

所以

```
def assign_update
  admin_protected = params[:user].delete(:admin)

  @user = User.find(params[:id])
  @user.admin = admin_protected

  if @user.save
    flash[:success] = "User updated"
    redirect_to users_path
  else
    render 'assign'
  end
end 
```

变成

```
 def assign_update
#      admin_protected = params[:user].delete(:admin)

      @user = User.find(params[:id])
      @user.admin = params[:user][:admin]

      if @user.save
        flash[:success] = "User updated"
        redirect_to users_path
      else
        render 'assign'
      end
    end 
```

问题是在你的方法中你仍然在大量分配。

要调试实际发生的事情，您应该仔细查看日志文件输出

**更新**

检查错误列表。将以下内容添加到您的表单中

```
 <% if @user.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@user.errors.count, "error") %> prohibited this account from being saved:</h2>

      <ul>
      <% @user.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %> 
```

它应该让您、广告您的用户更清楚地了解什么是错误的以及如何解决它

# javascript - 从字符串构建 Javascript 正则表达式

> ID：15030647
> 
> 赞同：2
> 
> 时间：2013-02-22T18:17:51.527
> 
> 标签：javascript, regex

我试图返回一个字母出现在一个单词中的次数。

我将这封信传递给这样的函数

```
function getCount(letter)
{
    var pattern = '/' + letter + '/g';
    var matches = word.match(pattern);
    return matches.length;
} 
```

不幸的是，matches 是空的，所以我无法调用它的长度，我知道这个字母出现在单词中，因为我已经检查过了

```
word.indexOf(letter) > -1 
```

我怀疑问题出在我构建或评估的方式上`pattern`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T18:19:41.487

以下是构建非文字正则表达式的方法：

```
var pattern = new RegExp(letter, 'g'); 
```

请参阅[有关构建正则表达式的 MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)。

这是一个计算字母出现次数的更简单的解决方案：

```
return word.split(letter).length-1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T18:28:03.497

你可以这样做：

```
function hasClass(letter) {
    var pattern = new RegExp(letter,'g'); // Create a regular expression from the string
    var matches = word.match(pattern);
    return matches; 
```

参考：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)

这也在这里得到了回答：[javascript new regexp from string](https://stackoverflow.com/questions/5172183/javascript-new-regexp-from-string)

# java - SAX 解析器错误

> ID：15030648
> 
> 赞同：0
> 
> 时间：2013-02-22T18:17:59.280
> 
> 标签：java, xml, xml-parsing, sax

首先，这是困扰我的 XML 文件的一个片段。完整的 XML 文件非常大，包含许多名称不同的“包”。

```
<repo version="2">
    <package name="packageNameHere">
        <author>Some Author</author>
        <version>0.1</version>
        <description>A description</description>
        <dependencies/>
        <API>
            <max>0.1</max>
            <min>0.1</min>
        </API>
        <download>
            http://www.somedownload.com/downloadfile.jar
        </download>
    </package>
</repo> 
```

该程序对 XML 文件进行初始扫描，并获取所有包名称的列表。然后要求用户输入包名称。这`DefaultHandler`用于查找有关该软件包的信息。

```
private String packageToFind = null, currentElement = "";
public Package locatedPack = null;
private boolean finished = false;
private StringBuffer buffer = new StringBuffer();

public PackageSearchingRepoXMLHandler(String PackageToFind) {
    this.packageToFind = PackageToFind;
}

@Override
public void startElement(String uri, String localName, String elementName, Attributes attributes) throws SAXException {
    if(!finished && elementName.equals("package") && attributes.getValue("name").equals(packageToFind))
        locatedPack = new Package(packageToFind);
    else if(locatedPack != null && !finished) {
        currentElement = elementName;
    }
}

@Override
public void endElement(String uri, String localName, String elementName) throws SAXException {
    if(locatedPack != null && !finished) {
        switch(currentElement) {
        case "author":
            locatedPack.setAuthor(buffer.toString());
            buffer = new StringBuffer();
            break;
        case "version":
            locatedPack.setVersion(Double.parseDouble(buffer.toString()));
            buffer = new StringBuffer();
            break;
        case "description":
            locatedPack.setDescription(buffer.toString());
            buffer = new StringBuffer();
            break;
        case "dependencies":
            locatedPack.setDependencies(buffer.toString().split(", "));
            buffer = new StringBuffer();
            break;
        case "max":
            locatedPack.setApiMAX(Double.parseDouble(buffer.toString()));
            buffer = new StringBuffer();
            break;
        case "min":
            locatedPack.setApiMIN(Double.parseDouble(buffer.toString())); //This is line 157
            buffer = new StringBuffer();
            break;
        case "download":
            try {
                locatedPack.setDownloadLink(new URL(buffer.toString()));
            } catch (MalformedURLException e) {/* Won't happen */}
            buffer = new StringBuffer();
            break;
        case "package":
            finished = true;
        default:
            break;
        }
    }
}

@Override
public void characters(char[] ch, int start, int length) {
    if (!finished)
        buffer.append(new String(ch, start, length));
} 
```

A`NumberFormatException`正在从`Double.parseDouble()`零件中抛出；原因有点是`empty String`。我不能给你一个具体的行号，因为控制台没有给我一个。

任何人都知道导致我的程序无法正确输出数据的这个恼人错误的原因吗？困扰我很久了！:@

**编辑**
这是确切的堆栈跟踪（更多的是，我删除了所有的摇摆废话......）：

```
java.lang.NumberFormatException: empty String
at sun.misc.FloatingDecimal.readJavaFormatString(Unknown Source)
at java.lang.Double.parseDouble(Unknown Source)
at [removed class/package info].endElement(PackageHelper.java:157) 
```

第 157 行在代码中突出显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:50:04.997

请尝试以下代码并在最大元素之一中输入空字符串，出现与您编写的相同的错误。无论如何，您为什么要使用缓冲区？试试 String maxString = new String(ch, start, length)。

包 XmlTest；

导入 javax.xml.parsers。*; 导入 org.xml.sax。*; 导入 org.xml.sax.helpers.*；

公共类 SAXTest { private static final String SPACE = " "; 私人静态最终字符串MAX =“最大”；

```
public static void main(String[] args) throws Exception {
    SAXParserFactory factory = SAXParserFactory.newInstance();
    SAXParser saxParser = factory.newSAXParser();

    DefaultHandler handler = new DefaultHandler() {
        boolean maxElement = false;

        public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {

            if (qName.equalsIgnoreCase(MAX)) {
                maxElement = true;
            }

        }

        public void endElement(String uri, String localName, String qName) throws SAXException {
        }

        public void characters(char ch[], int start, int length) throws SAXException {

            if (maxElement) {
                String maxString = new String(ch, start, length);
                Double maxDouble = Double.parseDouble(maxString);
                System.out.println(MAX + SPACE + maxDouble);
                maxElement = false;
            }
        }
    };

    saxParser.parse("your_xml_file.xml", handler);
} 
```

}

# javascript - 修改函数参数

> ID：15030649
> 
> 赞同：2
> 
> 时间：2013-02-22T18:18:11.473
> 
> 标签：javascript, jquery

我添加自定义事件监听器

```
$(document).on('customEvent', function(e, message) {
   message = 'Hello world';
}); 
```

我在其他地方触发它：

```
var message = 'no message';
$(document).trigger('customEvent', message);
// I want here message to be `Hello world` 
```

有什么方法可以获取更新的消息，而无需将其分配给某个全局变量？

我想用 jQuery创建类似[WordPress 过滤器 API的东西。](http://codex.wordpress.org/Function_Reference/apply_filters)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T18:26:49.207

不传递消息字符串，而是传递消息对象，并将消息字符串作为成员。

```
$(document).on('customEvent', function(e, messageObj) {
   messageObj.messageStr= 'Hello world';
});

var messageObj = {'messageStr':'initial Message'};
$(document).trigger('customEvent', messageObj ); 
```

在触发器中，您更新对象的 messageStr 成员。你会有数据。

但是您需要确保您的代码不是异步的。唯一可以确保的方法是使用触发器的回调。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T18:23:23.910

如果您的所有 JS 代码可以组合在一起，那么您可以使用这种方法：

```
(function() {
    $(document).on('customEvent', function(e, message) {
       sharedMessage = message;
    });
    ...
    var message = 'no message';
    $(document).trigger('customEvent', 'hello, world!');
}()); 
```

由于 javascript 变量是函数范围的，`var`因此该函数内部的任何变量都不是全局变量。如果没有，您可以创建自己的、不太可能发生冲突的命名空间：

```
var reallyunlikelytocollidenamespace = {};
reallyunlikelytocollidenamespace.message = 'no message';
... 
```

# ruby - 将 Ruby 数组合并为多维数组

> ID：15030661
> 
> 赞同：3
> 
> 时间：2013-02-22T18:18:45.923
> 
> 标签：ruby

将以下两个数组合并为多维数组的最佳方法是什么？

```
x = ['A', 'B', 'C']
y = ['D', 'E', 'F'] 
```

期望的结果：

```
z = [['A', 'D'], ['A', 'E'], ['A', 'F'], ['B', 'D'], ['B', 'E'], ['B', 'F'], ['C', 'D'], ['C', 'E'], ['C', 'F']] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T18:31:55.913

您可以使用[Array#product](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-product)：

```
x = ['A', 'B', 'C']
y = ['D', 'E', 'F']

result = x.product(y)

puts result.inspect 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T18:23:44.613

这是一种方法，尽管不一定是最简单的方法：

```
x = ['A', 'B', 'C']
y = ['D', 'E', 'F']

result = []

x.each do |x|
  y.each do |y|
    result << [x, y]
  end
end

puts result.inspect 
```

**更新**：这是一种更简洁的方式：

```
x = ['A', 'B', 'C']
y = ['D', 'E', 'F']

puts x.map { |x|
  y.map { |y| [x, y] }
}.inspect 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:35:43.663

另一种方法是这样的：

```
x = ['A', 'B', 'C']
y = ['D', 'E', 'F']

print x.concat(y).each_slice(2).to_a    # => [["A", "B"], ["C", "D"], ["E", "F"]] 
```

# jquery - jQuery未捕获类型错误？

> ID：15030662
> 
> 赞同：0
> 
> 时间：2013-02-22T18:18:50.877
> 
> 标签：jquery

我目前正在做一个网站。我想要它做的是当您加载页面时开始倒计时，并在 15 秒后出现一个按钮。

目前它在我的测试服务器和 jsFiddle 上完美运行。但是，当我将它移到我的网络服务器时，它不起作用。我查看了 Google Chrome 的控制台，我收到以下错误。

```
downloadButton.parentNode.replaceChild(newElement, downloadButton);
Uncaught TypeError: Cannot read property 'parentNode' of null 
```

这是完整的代码（另见 jsFiddle [http://jsfiddle.net/6zchq/](http://jsfiddle.net/6zchq/)）

```
var downloadButton = document.getElementById('download');
var counter = 15;
var newElement = document.createElement('p');
newElement.innerHTML = 'Getting your file, please wait 15 seconds.';
var id;

downloadButton.parentNode.replaceChild(newElement, downloadButton);

id = setInterval(function() {
    counter--;
    if(counter < 0) {
        newElement.parentNode.replaceChild(downloadButton, newElement);
        clearInterval(id);
    } else {
        newElement.innerHTML = "Getting your file, please wait " + counter.toString() + " seconds.";
    }
}, 1000); 
```

我确定这是一个简单的问题，我只是无法弄清楚为什么它不起作用。

任何帮助表示赞赏！

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:22:14.497

尝试将您的代码包装在一个就绪函数中。

原因是真实网络服务器上的加载延迟意味着您尝试访问尚不存在的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:24:38.300

据推测，当 DOM 尚未完全加载且下载按钮元素尚不存在时，代码正在运行。要么在就绪/加载处理程序中运行代码，要么将 Javascript 放在页面`body`标签的底部，以便在页面的 HTML 之后加载。

# iphone - 处理点击点击背景iphone

> ID：15030668
> 
> 赞同：0
> 
> 时间：2013-02-22T18:19:22.670
> 
> 标签：iphone, background, handle, tap, uitapgesturerecognizer

我有一个包含不同文本字段的视图。

单击每个taxtfield 会弹出一个键盘，如果我在textField 之外单击，键盘会消失，但视图也会消失！如何更改代码，以便我只能使用取消按钮退出视图并点击视图而不是单击 texfield 外部或单击背景。

```
 - (void)viewDidLoad
    {

    [super viewDidLoad];
         [self.navigationController setNavigationBarHidden:YES];
          self.view.backgroundColor = [self.appDel.styleManager appBackgroundGradientWithFrame:self.view.bounds];
         self.tapView.backgroundColor = [UIColor clearColor];

         UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self
                                                                              action:@selector(endPageEdit:)];
tap.delegate = self;
        [self.view addGestureRecognizer:tap];

        }

- (void)endPageEdit:(UIGestureRecognizer *)sender
{
        if (sender.view == self.view) {
        [self.view endEditing:YES];
        if ([self isFormVisible]) {
           [self handleTap:sender];
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:24:51.237

在您的`endPageEdit`: 方法中，告诉 textFields 为`resignFirstResponder`.

```
- (void)endPageEdit:(UIGestureRecognizer *)sender {

    // assumes you have an outlet set up for each of the textFields
    [self.textFieldA resignFirstResponder];
    [self.textFieldB resignFirstResponder];

    if (sender.view == self.view) {
        [self.view endEditing:YES];
        if ([self isFormVisible]) {
           [self handleTap:sender];
        }
    }
} 
```

只有零个或其中一个将成为第一响应者，但当控件不是第一响应者时，辞职第一响应者没有不利之处。视图消失的原因必须与`endEditing`: 方法或`handleTap`您未发布的方法有关。

# svn - “请升级您的 Subversion 客户端”错误

> ID：15030672
> 
> 赞同：0
> 
> 时间：2013-02-22T18:19:38.023
> 
> 标签：svn, maven

我做常规的Maven命令：

```
mvn clean package 
```

...但不断得到同样的错误：

```
svn: The path 'D:\Projects' appears to be part of a Subversion 1.7 or greater
working copy.  Please upgrade your Subversion client to use this
working copy. 
```

有我的环境：

```
d:\Projects>svn --version
svn, version 1.7.8 (r1419691)
   compiled Dec 12 2012, 21:11:09

d:\Projects>mvn --version
Apache Maven 2.2.1 (r801777; 2009-08-06 14:46:01-0430)
Java version: 1.6.0_30
Java home: C:\Program Files\Java\jdk1.6.0_30\jre
Default locale: en_US, platform encoding: Cp1252
OS name: "windows 7" version: "6.1" arch: "amd64" Family: "windows" 
```

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:39:07.593

通过添加`svn-1.7`配置文件解决它`pom.xml`：

```
<profile>
    <id>svn-1.7</id>
    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>buildnumber-maven-plugin</artifactId>
                <version>1.0</version>
                <executions>
                    <execution>
                        <phase>validate</phase>
                        <goals>
                            <goal>create</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</profile> 
```

# javascript - 响应式设计 - 宽表

> ID：15030674
> 
> 赞同：0
> 
> 时间：2013-02-22T18:19:40.467
> 
> 标签：javascript, html, css, responsive-design

我正在使用响应式设计进行概念验证。我正在修改的一个网页有一些非常宽的表格。我真的不知道如何缩小表格宽度，所以移动浏览器中没有水平滚动条。

我只是想知道是否有人有使用响应式设计的超宽表格的解决方案。哦，我想补充一点，我不能隐藏表格中的列。

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T18:27:22.100

最好的方法是完全重新格式化表格：

[http://jsfiddle.net/MLZEb/9/](http://jsfiddle.net/MLZEb/9/)

```
tbody, tr, th, td { display: block }
thead { display: none }
td:before {
    content: attr(data-label);
    display: inline-block;
    width: 6em;
    padding-right: 1em;
    vertical-align: middle;
}

td:first-child {
    background: #CCC;
} 
```

每个`td`都需要有一个`data-label`属性才能有效地工作： `<td data-label="Favorite Color">Blue</td>`. 作为列标题的典型`th`元素应该在`thead`标签内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T18:39:58.543

[我的下意识反应是将表格放入可滚动的容器中](http://jsfiddle.net/GUD3R/)。添加一些帮助 JavaScript 以通过鼠标拖动来移动内容对桌面用户很有帮助。移动用户将能够利用原生触摸拖动。

[HTML：]

```
<div class="container">
    <table>
        ...
    </table>
</div> 
```

[CSS：]

```
td {
    padding: 10px;
}

.container {
    width: 100%;
    overflow: auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:31:10.807

解决宽表问题的典型方法是在开始时仅显示基本列，并提供 UI 以交互方式添加其他列。

# ruby-on-rails - Rails 引擎应该带有 environment.rb 吗？

> ID：15030678
> 
> 赞同：4
> 
> 时间：2013-02-22T18:20:06.223
> 
> 标签：ruby-on-rails, rails-engines

我最近创建了我的第一个 Rails 引擎。唯一的事情`/config`是`routes.rb`- 没有`environment.rb`或`application.rb`类似的东西。

当我安装`rspec-rails`gem 并尝试运行我的规范时，我收到一个错误，说它找不到`environment.rb`，这并不奇怪，因为`environment.rb`不存在。

令我困惑的是，我所拥有的证据告诉我必须是以下两件事之一：

1) Rails 引擎*不*附带 an `environment.rb`，您需要手动创建`environment.rb`,`application.rb`等。**这似乎不太可能。**

2）Rails 引擎*确实*带有`environment.rb`，但我的引擎碰巧因为某种原因缺少它。**这似乎也不太可能。**不过，我对引擎中提到的这个答案感到困惑`environment.rb`：[Testing Rails 3.1 mountable engine with Rspec](https://stackoverflow.com/questions/7452037/testing-rails-3-1-mountable-engine-with-rspec)

所以我的问题是：**Rails 引擎是否应该带有一个`environment.rb`，如果没有，如果你想要/需要一个，你应该如何创建一个？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T18:33:06.917

使用虚拟应用程序的`environment.rb`文件。

要设置 RSpec：

将以下内容添加到您的`spec_helper.rb`文件中。

```
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../test/dummy/config/environment", __FILE__)
... 
```

添加引擎根目录也很有帮助。

```
ENGINE_RAILS_ROOT = File.join(File.dirname(__FILE__), '../') 
```

如果您想访问引擎的路由助手，请在`RSpec.configure`块中添加以下内容。

```
# This will include the routing helpers in the specs so that we can use
# <engine>_path, etc., to get to the routes.
config.include <RailsEngine>::Engine.routes.url_helpers 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:32:42.550

Rails 引擎可能有环境文件，但它们不需要它们。我建议不要使用它们，因为您的应用程序可能会（作为 gem）安装在另一个应用程序中，这使得从主 rails 应用程序中配置引擎变得非常困难。

更明智的做法是使用可以从主 rails 应用程序中配置的 yml 文件，并允许该 rails 应用程序实现特定于环境的配置。这并不意味着你不能在你的 Rails 引擎中拥有一些基于环境环境文件的默认值，而是说允许外部配置通常会让生活变得更容易。

# c# - 使用 Task.wait() 应用程序挂起并且永远不会返回

> ID：15030681
> 
> 赞同：12
> 
> 时间：2013-02-22T18:20:13.713
> 
> 标签：c#, google-api, task, wait, reverse-geocoding

我是 C# 新手并使用`Task`. 我试图运行这个应用程序，但我的应用程序每次都挂起。当我添加时`task.wait()`，它会一直等待并且永远不会返回。任何帮助深表感谢。编辑：我想异步调用 DownloadString。当我按照“Austin Salonen”的建议执行 task.Start() 时，我没有从 returnVal 获取位置地址，而是位置字符串中的默认值。这意味着该位置在任务完成之前获得了赋值。我如何确保在任务完成后才分配位置 returnVal。

```
public class ReverseGeoCoding
        {
                static string baseUri = "http://maps.googleapis.com/maps/api/geocode/xml?latlng={0},{1}&sensor=false";
                string location = "default";
                static string returnVal = "defaultRet";
                string latitude = "51.962146";
                string longitude = "7.602304";
                public string getLocation()
                {
                    Task task = new Task(() => RetrieveFormatedAddress(latitude, longitude));  
                //var result = Task.Factory.StartNew(RetrieveFormatedAddress("51.962146", "7.602304"));
                    task.Wait();
                    //RetrieveFormatedAddress("51.962146", "7.602304");
                    location = returnVal;
                    return location;
                }
                public static void RetrieveFormatedAddress(string lat, string lng)
                {
                    string requestUri = string.Format(baseUri, lat, lng);

                    using (WebClient wc = new WebClient())
                    {
                        wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);
                        wc.DownloadStringAsync(new Uri(requestUri));
                    }
                }

                static void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
                {
                    var xmlElm = XElement.Parse(e.Result);

                    var status = (from elm in xmlElm.Descendants()
                                  where elm.Name == "status"
                                  select elm).FirstOrDefault();
                    if (status.Value.ToLower() == "ok")
                    {
                        var res = (from elm in xmlElm.Descendants()
                                   where elm.Name == "formatted_address"
                                   select elm).FirstOrDefault();
                        //Console.WriteLine(res.Value);
                        returnVal = res.Value;
                    }
                    else
                    {
                        returnVal = "No Address Found";
                        //Console.WriteLine("No Address Found");
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T18:22:33.470

您实际上并没有运行任务。调试和检查`task.TaskStatus`会显示这一点。

```
// this should help
task.Start();

// ... or this:
Task.Wait(Task.Factory.StartNew(RetrieveFormatedAddress("51.962146", "7.602304"))); 
```

虽然如果你正在阻塞，为什么要开始另一个线程呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T19:04:50.600

我不明白您为什么使用`DownloadStringCompleted`event 并尝试使其*阻塞*。如果你想等待结果，只需使用阻塞调用`DownloadString`

```
var location = RetrieveFormatedAddress(51.962146, 7.602304);

string RetrieveFormatedAddress(double lat, double lon)
{
    using (WebClient client = new WebClient())
    {
        string xml = client.DownloadString(String.Format(baseUri, lat, lon));
        return ParseXml(xml);
    }
}

private static string ParseXml(string xml)
{
    var result = XDocument.Parse(xml)
                .Descendants("formatted_address")
                .FirstOrDefault();
    if (result != null)
        return result.Value;
    else
        return "No Address Found";
} 
```

如果你想让它异步

```
var location = await RetrieveFormatedAddressAsync(51.962146, 7.602304);

async Task<string> RetrieveFormatedAddressAsync(double lat,double lon)
{
    using(HttpClient client = new HttpClient())
    {
        string xml =  await client.GetStringAsync(String.Format(baseUri,lat,lon));
        return ParseXml(xml);
    }
} 
```

# ios - 访问刚刚创建的 UIViewController 的视图时的 SIGABRT

> ID：15030687
> 
> 赞同：2
> 
> 时间：2013-02-22T18:20:40.473
> 
> 标签：ios, uiviewcontroller

我有下一个代码：

```
- (void)func
{
    MyViewController *ctrl = [MyViewController new];
    [ctrl doSmth];
    [self presentViewController:ctrl animated:NO];
}

//------------

- (void)doSmth
{
    CGRect *rect = self.view.frame;
    // Do something with rect
    self.view.frame = rect;
} 
```

好的，我知道，当`-[UIViewController view]`等于时，`nil`它正在被创建。这段代码在我更改之前确实有效（只有按钮和标签可见性，没什么特别的），现在它抛出`SIGABRT`了`self.view`，看起来它无法创建。突然。如果我恢复我的更改，一切都会像魔术一样工作。即使我不调用此函数，它也会在呈现时崩溃，并且在摘要中它会显示`view = 0x00000000`.

我只有一个问题：WAT？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:29:41.510

我发现了错误。

在 XCode 的“重构”（重命名一些`IBOutlets`）之后，旧的网点已经被标记`!`但没有被删除，XCode 没有告诉我任何关于它的信息。

我所说的`!`-s 是Interface Builder 用图标显示无效的插座。无效出口意味着您在视图和不存在的属性/实例变量之间建立了连接。所以当NIB将在运行时加载时，应用程序会崩溃，因为没有这样的属性/实例变量。

[![!-标记在 IB](../Images/a25ccd35bcea3fc856a4ed61f4fb2584.png)](https://i.stack.imgur.com/czhQc.png)

因此，如果您在此类错误中运行，您应该删除插座，或者将具有相同名称的属性/实例变量添加到您已将 XIB 链接到的类（通常是文件的所有者）。

# macos - 在 10.8.2 中，命令“mdcheckschema”被移到了哪里？

> ID：15030689
> 
> 赞同：0
> 
> 时间：2013-02-22T18:20:46.827
> 
> 标签：macos, osx-mountain-lion, spotlight

我正在处理自定义文档 mdimporter 并尝试验证我的 schema.xml 文件。在苹果文档中，他们说要使用“usr/bin/mdcheckschema”，后跟文件路径。它应该返回它是否被成功解析，但我只是得到“没有这样的文件或目录”。要清楚，如果我只是键入命令，我会收到相同的内容，而不是终端返回命令的手册。我试过“locate”和“whereis”，但只能在“usr/share/man/man1/mdcheckschema.1”找到一个对它的引用 该命令是否被一起移动或删除了？苹果文档仍然建议它应该在“usr/bin”中。我在其他任何地方都没有找到提到这个问题的运气。

这可能是它自己的问题，但在 10.8.2 中，“mdimport -L”不会返回所有已安装导入器的列表。这是其他人的情况吗？

谢谢，科里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:39:09.727

好问题！OS X 10.8.x 中似乎缺少可执行文件，尽管`man`它的页面仍然存在。在我看过的三个 10.8 系统中，其中一个存在一个较旧的可执行文件，`/usr/bin`但不知道它是任何安装包的一部分，`pkgutil`所以我猜它是从早期的 OS X 升级遗留下来的。A 10.7 .5 系统也没有可执行文件但有手册页。10.6.8 系统*确实*安装了它：

```
$ pkgutil --file-info /usr/bin/mdcheckschema
volume: /
path: /usr/bin/mdcheckschema

pkgid: com.apple.pkg.DeveloperToolsCLILeo
pkg-version: 1.0.0.9000000000.1.1248867338
install-time: 1328064907
uid: 0
gid: 0
mode: 755 
```

因此，它似乎曾经被打包为 Xcode 命令行工具组件的一部分（“Leo”表示 OS X 10.5 Leopard）。我想你得问问苹果发生了什么事。这可能只是一个疏忽。

# plsql - 隐式游标是否会在 PL/SQL 中无法关闭？

> ID：15030693
> 
> 赞同：8
> 
> 时间：2013-02-22T18:21:09.313
> 
> 标签：plsql, database-cursor

使用 PL/SQL 是否会出现一种情况，比如在异常情况下，隐式游标将无法关闭？

我知道隐式游标应该在使用后自行关闭，但只是想知道是否存在这种情况可能并非如此的情况，如果可能的话，什么样的补救措施是个好主意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:03:58.460

`COMMIT or ROLLBACK`失败时游标不会**自动**关闭
建议使用游标时使用以下路由：

```
-- before using the cursor
    IF your_cursor %ISOPEN THEN
         CLOSE your_cursor;
    END IF;
   OPEN your_cursor;

-- after using the cursor
         CLOSE your_cursor;
-- when exception
    IF your_cursor %ISOPEN THEN
         CLOSE your_cursor;
    END IF; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T22:09:42.833

我将假设您正在谈论隐式游标，即 SELECT INTO... 或在 PL/SQL 块中执行的 DML 语句，而不是 FOR 循环。

与显式游标一样，隐式游标具有属性；你可以使用`SQL%NOTFOUND`（而不是`CURSOR_NAME%NOTFOUND`例如。

引用关于隐式游标属性的[11.1 文档](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/sql_cursor.htm)`SQL%ISOPEN`：

> 始终返回 FALSE，因为数据库在执行关联的 SQL 语句后会自动关闭 SQL 游标。

我相信，这应该被认为意味着游标将在执行后关闭，无论是否引发异常。毕竟，由于异常而停止的执行仍然是执行的 SQL 语句。

原因已从[11.2 文档](http://docs.oracle.com/cd/E11882_01/appdev.112/e10472/sql_cursor.htm)中删除。

> SQL%ISOPEN 始终具有值 FALSE。

它似乎已被添加到[关于隐式游标的章节中](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/static.htm#i46192)：

> SQL%ISOPEN 总是返回 FALSE，因为隐式游标总是在其关联语句运行后关闭。

由于最后一个问题的答案，光标是否关闭并不重要，*“什么​​样的补救措施是个好主意。”* . 引用同一章：

> 您无法控制隐式游标，但可以从其属性中获取信息。

所以不行。无法补救；不可能显式关闭隐式打开的游标。

您可能想要测试的一件事是您是否可以提高[ORA-0100: Maximum open cursors exceeded](http://www.orafaq.com/wiki/ORA-01000) using only implicit cursors，因为这是我能想到的最糟糕的后果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T12:42:13.123

让我们将“隐式游标”定义为在 FOR 循环中执行的 SELECT 语句。

从实际的角度来看 - 无论隐式光标是否可能保持打开状态，重要的问题是“你能做些什么？”。据我所知，这个问题的答案是“没有”。您没有可使用的游标变量，没有办法（据我所知）访问隐式游标，因此您真的无法影响它。

你可以做两件事。首先是完全避免使用隐式游标。仅使用显式游标，完成打开、获取、关闭等所有步骤。这为您提供了最大程度的控制。如果你喜欢这种事情，那就去吧。

另一方面，您可以使用隐式游标而不必担心。我很好，不用担心。:-) 不过说真的，隐式游标比显式游标在 IMO 上要好得多。需要编写的代码更少，因此要搞砸的代码也更少。在某些情况下，系统可以优化隐式游标的使用，而无需您编写一堆额外的代码。您编写的代码更清晰，更容易理解 - 如果您在一个单独的商店工作，则无需*担心*编写和维护所有代码，但在 Corporateville 中，我们经常必须编写其他人将维护的代码，反之亦然，并且尽可能交出最干净、最清晰的代码被认为是礼貌的。有时（例如将游标变量从 Oracle 外部交给调用者时）需要显式游标，但对于大多数代码，我使用隐式 FOR-LOOP 游标 -**并且*喜欢*它**！（对于那些能回忆起***它***来自哪里的人来说，还有额外的奖励积分:-)

分享和享受。

# android - 相当于Android中Phonegap的ActionSheet插件？

> ID：15030696
> 
> 赞同：0
> 
> 时间：2013-02-22T18:21:21.913
> 
> 标签：android, cordova, plugins

用于 phonegap 的 iOS ActionSheet 插件： [https ://github.com/phonegap/phonegap-plugins/tree/master/iOS/ActionSheet](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/ActionSheet)

有安卓版吗？（最好是使用相同的js接口）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:34:05.053

这似乎是一个简单的 Javascript 界面，也可以在 Android 上运行。也许看看这个？

[https://github.com/mgcrea/cordova-actionsheet#javascript-interface-iosandroid](https://github.com/mgcrea/cordova-actionsheet#javascript-interface-iosandroid)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T21:03:00.450

这非常好，适用于 Android、iOS 和 WP

[https://github.com/EddyVerbruggen/cordova-plugin-actionsheet](https://github.com/EddyVerbruggen/cordova-plugin-actionsheet)

# c++ - 在循环中使用 dup2() 和 create() 在 Linux 中进行重定向

> ID：15030703
> 
> 赞同：0
> 
> 时间：2013-02-22T18:22:00.423
> 
> 标签：c++, c, linux

我正在运行下面的代码，但无法重定向到文件。该文件已制作，但没有任何内容放入其中。如果我删除最后一条`dup2(saveout,1)`语句，我可以创建并写入文件，但我无法返回终端，这很重要。一旦我把`dup2(saveout,1)`后面的代码放入我的代码中，重定向就会停止工作，但我可以回到终端。我不明白为什么会这样。我想重定向并返回终端。

**主文件**

```
#include <cstdlib>
#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>
#include <string>
#include <iostream>
#include <string.h>
#include <unistd.h>
#include <sys/stat.h>
using namespace std;

void printmessage() {
    printf("this is the message\n");
}

int main(int argc, char** argv) {    
    int saveout;
    int fd;
    saveout = dup(1);

    for (int i = 0; i < 10; i++) {
        fd = creat("/home/carl/example.txt",O_CREAT|O_APPEND);
        dup2(fd, 1);
        close(fd);
        printf("Testing the message");
        printmessage();

       dup2(saveout,1);
       close(saveout);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:33:30.413

这是一个文件权限问题，您应该阅读您正在使用的函数的手册页。

```
creat() takes as first argument the filename, and as second the file creation rights, not its opening mode. 
```

**creat()**函数是一个简单的open() 调用，带有一些特定的标志，因此您只需设置权限。

如果你想打开你的文件，如果他不存在就创建它，使用

```
open(filename, O_CREAT | O_RDWR | O_APPEND, 0600) for example, or
creat(filename, 0600), 
```

这主要是等效的，但是您将无法附加文本，因为“creat() 等效于 open()，其标志等于 O_CREAT | O_WRONLY | O_TRUNC”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:27:52.227

[`printf`默认情况下被缓冲。](https://stackoverflow.com/questions/1716296/why-does-printf-not-flush-after-the-call-unless-a-newline-is-in-the-format-strin)（逐行输出到 tty，输出到其他东西可能不同）。在您两次致电之前`dup2(..., 1)`，您应该使用以下内容冲洗`fflush`：

```
fflush(stdout); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T22:16:03.733

第二个`dup2(saveout,1);`将失败，因为您关闭了`saveout`.

# android - 如何应用语言而不是用户选择的语言？

> ID：15030706
> 
> 赞同：0
> 
> 时间：2013-02-22T18:22:03.787
> 
> 标签：android, localization

我试图清除我的 Android Eclipse 项目中的一些警告，但遇到[了抱怨隐式 locale 的](https://stackoverflow.com/questions/13444546/android-adt-21-0-warning-implicitly-using-the-default-locale)警告。我了解如何修复警告但考虑到它我意识到如果我开发一个以英语作为默认语言的 Android 应用程序并且用户选择了我的应用程序不提供翻译的另一种语言然后会有类似

```
str = getString(R.string.myString);
Locale userLocale = Locale.getDefault();
str.toLowerCase(userLocale); 
```

可能无法正常工作，因为区域设置可能与 str 的当前语言不匹配，即英语。此外，如果我在添加文件时实现了更多语言，我不能假设 str 将始终使用英语`values-XX/string.xml`（其中 XX 是其他语言的缩写：“de”代表德语，“es”代表西班牙语......）。

然后为了正确解决这个问题，我想知道是否有任何方法可以知道我在调用时检索的字符串是哪种语言环境/语言，`Resources.getString()`而不是用户选择的语言环境（可以通过 检索`Locale.getDefault()`）。

# java - Java：调用另一个类时遇到问题

> ID：15030715
> 
> 赞同：1
> 
> 时间：2013-02-22T18:22:33.423
> 
> 标签：java

我刚刚开始使用 Java，我遇到了一个我似乎无法找到根源的特殊问题。我有 2 个程序，一个从文本文件中获取数据，然后将其调用到一个类中进行一些计算，最后将输出放入另一个文本文档中。

除了这里的这一部分，一切都有效：

```
public class Paycheck
{
//Constants for the private class
private final String EMPLOYEE_NAME;           //Employee name          
private final String SOC_SEC_NUM;             //Employee Social Security Number
private final double WAGE_RATE;               //Employee wage
private final double TAX_RATE;                //Employee tax withheld 
private final double HOURS_WORKED;            //Employee's hours of work

//Variables for the private class
private double grossPay;                      //Employee Gross Pay
private double taxWithheld;                   //Employee Tax Withheld
private double netPay;                        //Employee Net Pay

//This is the constructor. It is called whenever an instance of the class is created
public Paycheck (String name, String ssn, double wage, double tax, double hours)
{
    EMPLOYEE_NAME = name;  //Instance employee name
    SOC_SEC_NUM = ssn;    //Instance employee SSN
    WAGE_RATE = wage;      //Instance employee wage rate
    TAX_RATE = tax;        //Instance employee tax rate
    HOURS_WORKED = hours;  //Instance employee hours worked
}

//This calculates the variables in the paycheck class
public void calcWages()
{
    grossPay = WAGE_RATE * HOURS_WORKED;    //Calculates Gross Pay
    taxWithheld = grossPay * TAX_RATE;      //Calculates Taxes Withheld
    netPay = grossPay - taxWithheld;        //Calculates net pay

}

//Returns the Paycheck objects Employee Name
public String getEmployeeName()
{
    return EMPLOYEE_NAME;
}

//Returns the employee SSN of the Paycheck object
public String getSocSecNum()
{
    return SOC_SEC_NUM;
}

//Reeturns a Paycheck object's employee Wage Rate
public double getWageRate()
{
    return WAGE_RATE;
}

//Returns a Paycheck object's employee tax rate
public double getTaxRate()
{
    return TAX_RATE;
}

//Returns an Paycheck object's employee hours worked
public double getHoursWorked()
{
    return HOURS_WORKED;
}

//Returns a Paycheck object's gross pay
public double getGrossPay()
{
    return grossPay;
}

//Returns a Paycheck object's Taxes Withheld
public double getTaxWithheld()
{
    return taxWithheld;
}

//Returns a paycheck object't net pay 
public double getNetPay()
{
    return netPay;
} 
```

calcWages() 进行必要的计算，下面是一系列调用它们的 get 语句。但是，我的输出没有返回 calcWages() 参数的任何值。

我在这里添加了吸气剂，我的另一个程序正在抓取它们。但是，我的其他程序的最终输出为 0。

我在哪里错了？

这是调用它们的主要方法的一部分

```
 public static void main(String [] args) throws IOException //Throws clause
{
    //Declare constants
    final String INPUT_FILE = "Employee.txt";         //Input text file containing Employee information
    final String OUTPUT_FILE= "PayrollHistory.txt";   //Output text file that will receive the data

    //Declare Variables
    String payPeriodDate;       //Ending date of the pay period
    String employeeName;        //Employee Name in text file
    String employeeSocSecNum;   //Employee SSN in text file
    double employeeHours;       //Employee hours worked
    double employeeTax;         //Employee Tax rate 
    double employeeWage;        //Employee Wage rate
    double totalGrossPay;       //Total employee Gross for pay period
    double totalTaxWithheld;    //Total Tax Withheld for pay period
    double totalNetPay;         //Total Net Payroll for pay period
    String input;               //String input for double conversion in JoptionPane

    DecimalFormat money = new DecimalFormat ("#0.00"); // Decimal Format to put money in the right format(USD)

    //This ensures that the input file actually exists in the program folder 
    //And exits the program if it does not, along with the prompt.
    File file = new File(INPUT_FILE);
  if (!file.exists())
  {
     JOptionPane.showMessageDialog(null, "The " + INPUT_FILE + " file cannot be found." +
                        "Program terminated.");
     System.exit(0);
  }

    // Create Scanner object to enable reading data from input file
  Scanner inputFile = new Scanner(file);

  // Create FileWriter and PrintWriter objects to enable
  // writing (appending not overwriting) data to text file
  FileWriter fwriter = new FileWriter(OUTPUT_FILE, true);
  PrintWriter outputFile = new PrintWriter(fwriter);

    //Initialize accumulator values
  totalGrossPay = 0.0;
    totalTaxWithheld = 0.0;
    totalNetPay = 0.0;

    //Get the pay period for the employee
    payPeriodDate = JOptionPane.showInputDialog("Enter pay period ending date (mm/dd/yyyy):");
    outputFile.println("PAY PERIOD ENDING DATE: " + payPeriodDate);          //Inputs pay period date into the text file
    outputFile.println(); // Blank line
    outputFile.println(); // Blank line

    while (inputFile.hasNext()) // This will look through the input file and get the necessary variable input
  {
     // Read employee Name from Input File
     employeeName = inputFile.nextLine();
     // Read employee SSN from input file
     employeeSocSecNum = inputFile.nextLine();
     // Read employee Wage Rate from input file
        //Parses it into a double type
     input = inputFile.nextLine();
     employeeWage = Double.parseDouble(input);
        //Read employee tax rate from input file
        //Parses it into a double type
        input = inputFile.nextLine();
        employeeTax = Double.parseDouble(input);

        //Get number of hours worked
        input = JOptionPane.showInputDialog("Employee Name: " + employeeName +
                                                        "\nEnter number of hours worked:");
        employeeHours = Double.parseDouble(input);

        //This call the paycheck class to create a new Paycheck Object
        Paycheck employee = new Paycheck (employeeName, employeeSocSecNum, employeeWage, employeeTax, employeeHours);

        // Call Paycheck class methods into the output file
     outputFile.println("Employee Name: " + employeeName);                              //Employee Name
     outputFile.println("SSN: " + employeeSocSecNum);                                   //Employee SSN
     outputFile.println("Hours Worked: " + employeeHours);                              //Employee Hours Worked
     outputFile.println("Wage Rate: " +  money.format(employeeWage));                   //Employee Wage Rate
        outputFile.println("Gross Pay: " +  money.format(employee.getGrossPay()));         //Employee Gross Pay
        outputFile.println("Tax Rate: " +  money.format(employeeTax));                     //Employee Tax Rate
        outputFile.println("Tax Withheld: " +  money.format(employee.getTaxWithheld()));   //Employee Tax Withheld
        outputFile.println("Net Pay: " + employee.getNetPay());                            //Employee Net Pay
     outputFile.println(); // Blank line 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:46:53.763

在调用你的 getter 之前，你 似乎并没有真正*调用* ，所以仍然是 0，因为这是 Java 未初始化数字的默认值。`calcWages()``grossPay, taxWithheld, and netPay`

您需要`employee.calcWages()`在引用这些值之前调用它们以进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:26:02.257

这是因为`calcWages()`被声明为**void** ( `public void calcWages()`)，这意味着它不应该返回任何值，而只是完成一系列步骤（在此示例中计算工资单细节）。调用它后，继续引用它处理的实例变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:52:08.243

您已将变量声明为`final`，这意味着它们只能分配一次。

# java - 使用 JLists 和向量进行未经检查或不安全操作的两种情况

> ID：15030717
> 
> 赞同：0
> 
> 时间：2013-02-22T18:22:37.363
> 
> 标签：java, vector, nullpointerexception, awt, actionlistener

我有两个程序，每个程序都在一个小程序中创建一个不同的选项卡，用户可以在一个选项卡中输入宠物类型，然后在另一个选项卡中选择并添加或删除宠物类型到列表中。我以为我已经设法解决了所有问题，但现在两者都给了我`java uses unchecked or unsafe operations. Note: Recompile with -Xlint:unchecked for details.` 我似乎无法弄清楚为什么我会收到这些错误。这是两个代码。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.*;

public class CreatePanel extends JPanel
 {
   private Vector petList; //Instantiation of variables.  To save space, multiple variables
   private JButton button1; //were instantiated at a time when possible, such as the panels.
   private SelectPanel sPanel;
   private JLabel text1, redText;
   private JTextField petInput;
   private JTextArea petsIn;
   private Panel wPanel, alertPanel, petPanel, createPanel;

 public CreatePanel(Vector petList, SelectPanel sPanel)
  {
    this.petList = petList;
    this.sPanel = sPanel;

    // orgranize components here
    // here is an example
    setLayout(new GridLayout(1,2));

    text1 = new JLabel("Enter a Pet Type"); //Creation of the visible portions of the applet
    petInput = new JTextField();
    button1 = new JButton("Create a Pet");
    petsIn = new JTextArea("No Pet");
    wPanel = new Panel(); //Panels have to be used to ensure the porper layout of the
    petPanel = new Panel();  //applet so it conforms to assignment specifications
    createPanel = new Panel();  //making for a pretty panel, but some very ugly code
    alertPanel = new Panel();
    alertPanel.setLayout(new GridLayout(1,2));
    createPanel.setLayout(new GridLayout(2,3));
    petPanel.setLayout(new GridLayout(1,2));  //Each panel has its own layout, making for layouts
    wPanel.setLayout(new GridLayout(3,1));  //in layouts to get everything looking correct.
    button1.addActionListener(new ButtonListener()); //adds the listener to the button

    add(wPanel);
    wPanel.add(alertPanel);
    alertPanel.add(redText);
    wPanel.add(petPanel);
    petPanel.add(text1);
    petPanel.add(petInput);
    wPanel.add(createPanel);
    createPanel.add(new JLabel());
    createPanel.add(button1);
    createPanel.add(new JLabel());  //Have to create several blank labels to get position of
    createPanel.add(new JLabel());  //the create pet button to be positioned correctly.
    createPanel.add(new JLabel());
    createPanel.add(new JLabel());
    add(petsIn);

  }

  private class ButtonListener implements ActionListener
   {
    public void actionPerformed(ActionEvent event)
     {
         String inputPet = petInput.getText(); //Gets the user input pet
         boolean checker = false; // A boolean check type so pets can't be added repeatedly

         for (int p = 0; p < petList.size(); p++){ //Runs a check through the petList vector
             if (inputPet.equalsIgnoreCase((String) petList.get(p))){ //If a pet already exists (ignoring case) then the check is set to true
                 checker = true; //for a later if loop to inform the user.
                 break;
             }
         }

         if(inputPet.equals("")){
             redText.setText("Please enter a pet type.");
             redText.setForeground(Color.red);
         } else if (checker == true){
             redText.setText("The pet type already exists.");
             redText.setForeground(Color.red);
         } else {
             petList.add(inputPet);
             String addedPets = (String) petList.get(0);
             for(int i = 1; i < petList.size(); i++){
                 addedPets += "\n" + (String) petList.get(i);
             }
             redText.setText("Pet type added.");
             redText.setForeground(Color.red);
             petsIn.setText(addedPets);
             sPanel.updateUI();
         }
         redText.setText("");

     } //end of actionPerformed method
  } //end of ButtonListener class

} //end of CreatePanel class 
```

和

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;
import java.util.*;

public class SelectPanel extends JPanel
 {
   private Vector petList, selectList;
   private Panel bPanel, nPanel;
   private JLabel sPets, aPets, nPets;
   private int numPets = 0;
   private JButton addPet, remove;
   private JList petsAvail, petTypes;
   private JScrollPane sPane, sPane2;

   public SelectPanel(Vector petList)
     {
      this.petList = petList;

      this.setLayout(new BorderLayout());

      bPanel = new Panel();
      nPanel = new Panel();
      nPanel.setLayout(new GridLayout(1,2));
      bPanel.setLayout(new GridLayout(2,1));

      petTypes = new JList(petList);
      petTypes.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
      sPane = new JScrollPane(petTypes);
      petList.add(0, "Available pet(s)");

      selectList = new Vector();
      petsAvail = new JList(selectList);
      petsAvail.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
      sPane2 = new JScrollPane(petsAvail);
      selectList.add(0, "Selected pet(s)");

      aPets = new JLabel("Available pet(s)");
      nPets = new JLabel("Selected pet(s)");
      nPets = new JLabel("The number of selected pets:" + numPets);
      addPet = new JButton("Add");
      remove = new JButton("Remove");

      add(petsAvail, BorderLayout.EAST);
      add(petTypes, BorderLayout.WEST);
      add(nPanel, BorderLayout.SOUTH);
      nPanel.add(nPets);
      add(bPanel, BorderLayout.CENTER);
      bPanel.add(addPet);
      bPanel.add(remove);

      addPet.addActionListener(new ButtonListener());
      remove.addActionListener(new ButtonListener());

     // orgranize components for the panel
  }

 public void updatePetList()
  {
        petTypes.updateUI();
        petsAvail.updateUI();
        //This method can refresh the appearance of the list of pets
        //by calling updateUI() method for the JList.
        //It can be called from the CreatePanel class whenever a new pet type
        //is added to the vector and the JList appearence needs to be refreshed.
  }

 private class ButtonListener implements ActionListener
  {
       public void actionPerformed(ActionEvent event)
        {
            Object which = event.getSource();

            if(which == addPet){
                for (int p = 1; p < selectList.size(); p++){
                    boolean check = false;

                    if(selectList.contains(petTypes.getSelectedValue())){
                        check = true;
                        break;
                    } else if(check == false){
                        selectList.addElement(petTypes.getSelectedValue());
                        petsAvail.updateUI();
                        numPets++;
                    }
                }
            } else if (which == remove){
                selectList.removeElement(petsAvail.getSelectedValue());
                updatePetList();
                numPets--;
            }

            //When the added button is pushed, the selected pet
            //should be added to the right list and the number of
            //selected pets is incremented by 1.
            //When the remove button is pushed, the selected pet
            //should be removed from the right list and the number of
            //selected pets is decremented by 1.
            //
            //Be careful for the cases when no item has been selected.
        }
  } //end of ButtonListener class

} //end of SelectPanel class 
```

任何有关这些错误的原因以及如何处理它们的见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:38:43.193

您收到该警告是因为您使用的是泛型类而未指定泛型类型。看起来您的 petList 向量应该是字符串的向量。您的 petList 声明应如下所示

```
private Vector<String> petList 
```

然后在某个地方...

```
petList = new Vector<String>() 
```

该警告旨在帮助您意识到，如果您在向量中开始混合类型（通常是偶然的），您的代码在运行时可能无法按预期运行。即使您真的只想要字符串，您也可以在技术上将多种类型的对象添加到您的 petList 向量中。没有什么能阻止您将整数、其他类甚至更多向量添加到向量中。有时这是由程序员故意完成的，但大多数时候你真的只希望在你的泛型类中可以使用一种类型的对象（在这种情况下是向量）。通过指定要放入向量中的对象类型，编译器可以帮助您捕捉这些意外混合的类型（例如，如果您试图将整数放入您的 petList 向量中）。它'

阅读此处以了解有关 Java 中的泛型的更多信息：http: [//docs.oracle.com/javase/tutorial/java/generics/](http://docs.oracle.com/javase/tutorial/java/generics/)

# c# - 有什么方法可以将数据读取器/数据集/列表转换为 XLS 格式的字符串并加载到内存流？

> ID：15030719
> 
> 赞同：0
> 
> 时间：2013-02-22T18:22:44.023
> 
> 标签：c#, ftp, xls, memorystream

我需要从数据库中获取数据并以 XLS 格式发送到 FTP 服务器。我使用内存流对 XML 做了同样的事情。但是，我不确定如何格式化 XLS 并将其加载到内存流。有什么想法或方法吗？示例代码总是有帮助的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:06:03.527

请参阅此答案，它使用 Excel OpenXML 格式。无需任何外部库即可获得 Excel 的最快方法。

[在 c# 中使用 Open Xml SDK 将 DataTable 导出到 Excel](https://stackoverflow.com/questions/11811143/export-datatable-to-excel-with-open-xml-sdk-in-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:58:16.303

我误解了你的问题。读取文件以流式传输是所有文件的标准。

```
 new MemoryStream(File.ReadAllBytes(inputFilename)) 
```

# java - Java/C# 程序访问 Oracle 数据库，字符串中的字符错误

> ID：15030720
> 
> 赞同：3
> 
> 时间：2013-02-22T18:22:49.953
> 
> 标签：java, oracle, character-encoding

我在 Oracle 中有以下字符串（十六进制转储就在它下面）。如您所见，在第一个“N”之后，有一个假字符“0xA6”。我的 Oracle 实例使用 AL32UTF8 作为字符编码。

```
FLOREN�PALACE HOTEL LTDA   
Typ=1 Len=26: 46,4c,4f,52,45,4e,a6,41,20,50,41,4c,41,43,45,20,48,4f,54,45,4c,20,4c,54,44,41 
```

我有两个服务应该处理这个字符串——一个在 C# 中，另一个在 Java 中。我正在用 C# 处理这个字符串，它说长度是 27。然后我尝试用 Java 处理这个字符串，它说长度是 25。当我用 C# 打印时，它会打印（注意前面的 A 和空格宫）

```
FLOREN�A PALACE HOTEL LTDA 
```

而在 Java 中，它的打印结果与 Oracle 相同。

当我在 Java 程序中从 Oracle 中选择字符串时，就像 Java 正在“吃掉” 0xA6 和后面的两个字符并将其计为一个字符。我认为 Java 认为它是一个 UTF-8 字符（即 Charset），因此它在“0xA6”之后使用“A”和“”。

在将“A”和“”与“0xA6”分组时，有没有一种方法可以让 Java 不那么激进？

任何建议表示赞赏，

米

编辑 0

我查看了从 Oracle 获取字符串的代码。我正在使用 Oracle JDBC 驱动程序。

```
Class.forName("oracle.jdbc.OracleDriver");  
m_connection = DriverManager.getConnection(m_connectionString, m_username, m_password); 
```

我的连接字符串是

```
jdbc:oracle:thin:@//192.168.0.18:1521/serviceName 
```

关于从数据库中实际获取字符串，我使用了 ResultSet getBytes、getString、getBinaryStream、getUnicodeStream 调用。例如，当我使用 getBytes 时，查看 byte[]、char[] 或 string 中的字节会显示 0xA6、“A”和“”位置（0xEF、0xBF、0xBD）中的奇怪字节。

/编辑 0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:21:34.903

看起来像数据损坏。原始数据很可能以 ISO-8859 编码，而不是转换为 UTF-8。

`0xA6`在 ISO-8859-1 中，它本身就是“断开的竖线”`¦`字符，这没有意义，

*但是*，

在***ISO-8859-2***中，它等同于 Unicode 0x015A（拉丁文大写字母 S 带尖音）或 Ś，看起来很可能。它使整个字符串*FLORENŚA PALACE HOTEL LTDA*

解决方案是用正确的 UTF-8 编码替换该字符，这将是`0xc5 0x9a`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:59:23.380

在将字符串`convert(your_string, 'AL32UTF8', 'WE8ISO8859P2')`传递给 Java 之前转换它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:01:16.780

为了子孙后代，在尝试实现上述建议之一时，我发现 OJDBC 驱动程序是改变我的编码的罪魁祸首。为了保留编码以便我可以删除坏字符，我使用了以下 SQL。

从选项卡中选择 utl_raw.cast_to_raw( col )；

然后我遍历字节并压扁了虚假字符。

# function - Postgres 函数结束循环并返回错误

> ID：15030722
> 
> 赞同：1
> 
> 时间：2013-02-22T18:22:59.280
> 
> 标签：function, postgresql, loops, record, plpgsql

我尝试创建此函数，但系统返回“循环错误”，我不知道如何同时返回 3 个变量。我一直在努力解决这个问题，但我在任何地方都没有找到答案。

```
CREATE OR REPLACE FUNCTION conta_relatos(fator_normativo integer, fator_determinativo integer)
  RETURNS integer AS
$BODY$
DECLARE
    vinculos_encontrados RECORD;
    rel_pri INT;
rel_sec INT;
rel_ref INT;
no_item INT;
tipo_relato TEXT;
BEGIN
    rel_pri := 0;
    rel_sec := 0;
    rel_ref := 0;    
FOR vinculos_encontrados IN SELECT * FROM "Vinculos" WHERE ("Vinculos"."Fator_Normativo" =   Fator_Normativo AND "Vinculos"."Fator_Determinativo" = Fator_Determinativo) LOOP
    no_item := vinculos_encontrados."Item";
SELECT "Fontes"."Tipo_Relato" INTO tipo_relato FROM "Fontes" WHERE "Fontes"."ID" = no_item;
--IF tipo_relato = "1 - Relato Primário" THEN 
   rel_pri := rel_pri + 1;
--ELSE IF tipo_relato = "2 - Relato Secundário" THEN 
   rel_sec := rel_sec + 1;
--ELSE IF tipo_relato = "3 - Relato Referencial" THEN 
   rel_ref := rel_ref + 1;
    --END IF;
    END LOOP;
    RETURN rel_pri, rel_sec, rel_ref;
END;
$BODY$
LANGUAGE plpgsql VOLATILE
COST 100; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:30:08.017

要同时返回多个值，您需要指定`OUT`参数并将函数的返回类型更改为`record`. [请参阅此处](http://www.postgresql.org/docs/9.1/static/plpgsql-declarations.html)的文档。确保调用函数以`SELECT *`将参数返回为 3 列。

请更新您的问题以包含您遇到的错误，如果我能提供帮助，我将更新此答案以解决它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T18:44:54.073

使用[`OUT`参数](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html)返回具有多列的单行。在这种情况下，类型是可选的，我在[这里](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html)`RETURN`引用手册：

> 当有`OUT`或`INOUT`参数时，`RETURNS`子句可以省略。

```
CREATE OR REPLACE FUNCTION conta_relatos(
    _fator_normativo integer
   ,_fator_determinativo integer
   ,OUT rel_pri integer
   ,OUT rel_sec integer
   ,OUT rel_ref integer
   ) AS
$func$
DECLARE
   tipo_relato text;
BEGIN

rel_pri := 0;
rel_sec := 0;
rel_ref := 0;

FOR tipo_relato IN
   SELECT f."Tipo_Relato"
   FROM   "Vinculos" v
   JOIN   "Fontes"   f ON f."ID" = v."Item"
   WHERE  v."Fator_Normativo" = _fator_normativo
   AND    v."Fator_Determinativo" = _fator_determinativo
LOOP
   CASE tipo_relato
   WHEN '1 - Relato Primário' THEN 
      rel_pri := rel_pri + 1;
   WHEN '2 - Relato Secundário' THEN 
      rel_sec := rel_sec + 1;
   WHEN '3 - Relato Referencial' THEN 
      rel_ref := rel_ref + 1;
   END CASE;
END LOOP;

-- No RETURN needed, OUT parameters are returned automatically.

END
$func$ LANGUAGE plpgsql; 
```

称呼：

```
SELECT * FROM conta_relatos(1,2); 
```

我还大大简化了您的功能。其中：

*   为您的作业使用[“简单案例”](http://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#AEN56435)。
*   使用连接将两个查询简化为一个。

整个函数可以很容易地重写为单个 SQL 语句。

# ruby-on-rails - 为数据表准备数据的 ruby gem

> ID：15030723
> 
> 赞同：0
> 
> 时间：2013-02-22T18:23:00.093
> 
> 标签：ruby-on-rails, ruby, json, gem, datatables

我想在我的 Rails 应用程序中使用[数据](http://datatables.net/)表，但我想避免自己准备 JSON 数据，所以我正在寻找一个可以做到这一点的 gem。理想情况下，我会传递一个 ActiveRecored Relation 和 gem 生成的 JSON 可以被数据表使用，例如：

```
class ItemsController < ApplicationController
  def index
    # I fetch data I need (taking into account authorization, search etc.)
    @items = Item.find_relevant_items         
    respond_to do |format|
      # gem prepares JSON for datatables 
      format.json { ItemDatatable.new(@items) } 
      # ...
    end
  end
end 
```

我知道有几个可用的宝石。但是，它们不适合我：[jquery-datatables-rails](https://github.com/rweng/jquery-datatables-rails)只是 JS 的包装器，而其他的似乎已过时或未维护（[ajax-datatables-rails](https://github.com/JoelQ/ajax-datatables-rails)、[rails_datatables](https://github.com/phronos/rails_datatables)、[simple_datatables](https://github.com/gryphon/simple_datatables)）。

您知道任何可以为数据表提供数据的 gem 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:36:55.217

Ruby 的[JSON](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/json/rdoc/JSON.html)模块是内置的，`require 'json'`位于 Ruby 脚本的顶部以使其可用。有关更多信息，请参阅“[如何使用 Ruby on Rails 解析 JSON？](https://stackoverflow.com/questions/1826727/how-do-i-parse-json-with-ruby-on-rails) ”。

Rails 也包含 JSON 功能。有关使用 JSON 和 Rails 的信息，请参阅“[了解 Ruby 和 Rails：使用 JSON 序列化 Ruby 对象](http://www.simonecarletti.com/blog/2010/04/inside-ruby-on-rails-serializing-ruby-objects-with-json/)”。Rails 是一个快速发展的平台，所以它可能有点过时，但它应该让你开始。“ [Rails 中的 Lightning JSON](http://brainspec.com/blog/2012/09/28/lightning-json-in-rails/) ”是一本很好的读物，了解生成 JSON 时需要注意的事项。

“ Ruby 的[JSON 实现](http://flori.github.com/json/)”也是 Ruby 和 JSON 的一个很好的参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T21:52:31.083

我发现在 Rails 应用程序中使用数据表的最佳方法是：

[jquery-datatables-rails gem](https://github.com/rweng/jquery-datatables-rails)获取数据表所需的所有资产

[ajax-datatables-rails gem](https://github.com/JoelQ/ajax-datatables-rails)获取使用服务器端分页和搜索时期望的 JSON 数据表。

如果您不想像在 RailsCast 中那样创建一个新类，还有其他 gem 可以更轻松地生成所需的 JSON 数据表。你可以在[这里找到它们](https://www.ruby-toolbox.com/search?utf8=%E2%9C%93&q=datatable)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:41:48.890

RABL 和 JBuilder 都浮现在脑海中。它们是 json 模板处理程序，使用起来非常简单，并且两者都同样强大，可以完全自定义 json 输出。

他们俩都有railscasts

[http://railscasts.com/episodes/320-jbuilder](http://railscasts.com/episodes/320-jbuilder)

[http://railscasts.com/episodes/322-rabl](http://railscasts.com/episodes/322-rabl)

和网站

[https://github.com/rails/jbuilder](https://github.com/rails/jbuilder)

[https://github.com/nesquena/rabl](https://github.com/nesquena/rabl)

两者都维护得很好。

否则，datatables-rails gem 确实是您的最佳选择

[http://railscasts.com/episodes/340-datatables?view=asciicast](http://railscasts.com/episodes/340-datatables?view=asciicast)

**更新 2**

这是你已经看过的宝石

根据 railscast，gem 是在 Gemfile 中定义的

```
group :assets do
  gem 'jquery-datatables-rails', github: 'rweng/jquery-datatables-rails'
  gem 'jquery-ui-rails'
end 
```

我强烈建议您观看 railscast ( [http://railscasts.com/episodes/340-datatables?view=asciicast](http://railscasts.com/episodes/340-datatables?view=asciicast) )，因为还需要其他配置。

# c# - 如何删除目录中每个文件的文件名中的中间字符

> ID：15030724
> 
> 赞同：-1
> 
> 时间：2013-02-22T18:23:05.720
> 
> 标签：c#

如何删除目录中每个文件名中间的字符？

我的目录中充满了类似的文件：“Example01.1234312232.txt”、“Example02.2348234324.txt”等。

我想删除“.1234312232”，以便将其命名为“Example01.txt”，并对目录中的每个文件执行此操作。

每个文件名将始终包含相同数量的字符。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T18:26:04.790

你可以使用

```
string fileNameOnly = Path.GetFileNameWithoutExtension(path);
string newFileName = string.Format("{0}{1}",
                                   fileNameOnly.Split('.')[0],
                                   Path.GetExtension(path)); 
```

[**演示**](http://ideone.com/c891Ip)

对于它的价值，您的目录重命名问题的完整代码：

```
foreach (string file in Directory.GetFiles(folder))
{
    string fileNameOnly = Path.GetFileNameWithoutExtension(file);
    string newFileName = string.Format("{0}{1}",
                           fileNameOnly.Split('.')[0],
                           Path.GetExtension(file));
    File.Move(file, Path.Combine(folder, newFileName));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:25:26.660

最简单的方法是使用正则表达式替换

```
\.\d+ 
```

对于空字符串`""`：

```
var str = "Example01.1234312232.txt";
var res = Regex.Replace(str, @"\.\d+", "");
Console.WriteLine("'{0}'", res); 
```

这是[ideone 上演示的链接](http://ideone.com/xmIf5K)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:29:19.913

您必须使用[IO.DirectoryInfo](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.aspx)类和[GetFiles](http://msdn.microsoft.com/en-us/library/4cyf24ss.aspx)函数来获取文件列表。
循环所有文件并做一个[子字符串](http://msdn.microsoft.com/en-us/library/system.string.substring%28v=vs.71%29.aspx)来获得你想要的字符串。
然后调用[My.Computer.Filesystem.RenameFile](http://msdn.microsoft.com/en-us/library/2ce15by3%28v=vs.80%29.aspx)来重命名文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T18:29:58.603

用这个：

```
filename.Replace(filename.Substring(9, 15), ".txt") 
```

您可以对索引和长度进行硬编码，因为您说字符数具有相同的长度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T18:38:26.687

使用 Directory.EnumerateFiles 枚举文件，使用 Regex.Replace 获取新名称，使用 File.Move 重命名文件：

```
using System.IO;
using System.Text.RegularExpressions;

class SampleSolution
{
    public static void Main()
    {
        var path = @"C:\YourDirectory";
        foreach (string fileName in Directory.EnumerateFiles(path))
        {
            string changedName = Regex.Replace(fileName, @"\.\d+", string.Empty);
            if (fileName != changedName)
            {
                File.Move(fileName, changedName);    
            }
        }
    }
} 
```

# java - java.lang.UnsupportedClassVersionError：com/mysite/folders/Folders：不支持的major.minor 51.0版

> ID：15030725
> 
> 赞同：0
> 
> 时间：2013-02-22T18:23:07.983
> 
> 标签：java, jsp, javabeans

我创建了一个名为“文件夹”的 java bean（暂时非常简单，因为我想让它大部分工作）我已经将它导出为 .jar 文件并将其放在 /WEB-INF/lib/目录。但是，当我尝试在预期页面上使用它时，会出现此错误（如果需要，我可以添加长语句的 res）：

```
Feb 22, 2013 12:02:31 PM org.apache.catalina.core.ApplicationDispatcher invoke
SEVERE: Servlet.service() for servlet jsp threw exception
java.lang.UnsupportedClassVersionError: com/mysite/folders/Folders : Unsupported major.minor     version 51.0 (unable to load class com.mysite.folders.Folders) 
```

如果可能是导致问题的原因，这是 bean：

```
package com.mysite.folders;

import java.io.Serializable;
import java.util.ArrayList;

public class Folders implements Serializable {

private String accountNumber;
private String folderName;
private String groupName;
private ArrayList<String> folderNames;
private ArrayList<String> groupNames;       

public String getAccountNumber() {
    return accountNumber;
}

public void setAccountNumber(String accountNumber) {
    this.accountNumber = accountNumber;
}

public String getFolderName() {
    return folderName;
}

public void setFolderName(String folderName) {
    this.folderName = folderName;
}

public String getGroupName() {
    return groupName;
}

public void setGroupName(String groupName) {
    this.groupName = groupName;
}

public ArrayList<String> getFolderNames() {
    return folderNames;
}

public void setFolderNames(ArrayList<String> folderNames) {
    this.folderNames = folderNames;
}

public ArrayList<String> getGroupNames() {
    return groupNames;
}

public void setGroupNames(ArrayList<String> groupNames) {
    this.groupNames = groupNames;
}

public Folders(String accountNumber, String folderName, String groupName,
        ArrayList<String> folderNames, ArrayList<String> groupNames) {
    super();
    this.accountNumber = accountNumber;
    this.folderName = folderName;
    this.groupName = groupName;
    this.folderNames = folderNames;
    this.groupNames = groupNames;
}
} 
```

最后是我在页面上的声明：

```
<jsp:useBean id="Folders" scope="session" class="com.mysite.folders.Folders" /> 
```

我觉得我做得很好，但不确定为什么这不起作用。任何建议或提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:37:20.580

检查您的编译器和 tomcat 是否使用相同版本的 Java。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T06:33:27.883

好像您正在使用 JDK7 进行编译，而在 Where you are using it 上使用较低版本

参见维基百科代码

正在使用的类文件格式的主版本号。

```
J2SE 7 = 51 (0x33 hex). 
```

正如所有建议的那样，也请参见[如何修复 java.lang.UnsupportedClassVersionError: Unsupported major.minor version](https://stackoverflow.com/questions/10382929/unsupported-major-minor-version-51-0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:25:57.283

您正在使用比正在运行的更高版本的 JDK 进行编译。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T18:26:34.857

您正在使用多个编译器：您使用一个来创建 jar（可能是最新的 JDK 7），而另一个用于 Tomcat。首先要做的是：

*   转到您的程序文件/java并检查jdks
*   转到属性/环境变量并将 JAVA_HOME 设置为可能的最新 sdk（它应该指向 jdk 的根目录而不是 bin 库或其他任何东西）

# prolog - Prolog - 将列表转换为术语列表

> ID：15030730
> 
> 赞同：1
> 
> 时间：2013-02-22T18:23:23.597
> 
> 标签：prolog

我是 Prolog 的新手，有时无法理解某些事情。我知道如何将列表转换为这种格式的术语：

```
listOfTerms(ListOfArgs,Name, ListOfResults)
listOfTerms([[1,2],[100,99],[5,11]],+,T).
T = +([1, 2], [100, 99], [5, 11]). 
```

我怎样才能让它看起来像这样？

```
T = [1+2, 100+99, 5+11].

listOfTerms(Lst,F,[1+2, 100+99, 5+11]).
Lst = [[1, 2], [100, 99], [5, 11]],
F = + . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:33:47.073

我会做这样的事情：

```
listOfTerms(ListOfArgs, Name, ListOfResults):-
    maplist(map(Name), ListOfArgs, ListOfResults).

map(Functor, Arg, Term):-
  Term=..[Functor|Arg]. 
```

使用`=.. (univ)`谓词从它们的参数构建术语或从术语中获取参数，并使用`maplist`这个转换应用到列表中的每对元素。

如果你想避免使用`maplist`，你可以定义一个递归过程：

```
listOfTerms([], _, []).
listOfTerms([Arg|ListOfArgs], Functor, [Term|ListOfTerms]):-
  Term=..[Functor|Arg],
  listOfTerms(ListOfArgs, Functor, ListOfTerms). 
```

# c - 现代处理器中复位向量的意义

> ID：15030732
> 
> 赞同：0
> 
> 时间：2013-02-22T18:23:25.330
> 
> 标签：c, assembly, reset, boot, bios

我试图非常详细地了解计算机是如何启动的。

我遇到了两件让我更加好奇的事情，
1\. RAM 被放置在 ROM 的底部，以避免像 Z80 处理器中那样的内存孔。
2\. 使用复位向量，它将处理器带到 ROM 中的内存位置，其内容指向处理器实际开始执行指令（POST 指令）的实际位置（还是 ROM）。为什么这样？

如果你还是看不懂我，这个链接给你简单解释一下， http: [//lateblt.tripod.com/bit68.txt](http://lateblt.tripod.com/bit68.txt)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T16:45:22.617

处理器逻辑通常是刚性和固定的，因此称为硬件。软件是可以改变、塑造等的东西，因此称为软件。

硬件需要启动一些how，两种基本方法，

1）读取处理器内存空间中逻辑硬编码的地址，该值是开始执行代码的地址

2）在逻辑中硬编码的地址是处理器开始执行代码的地方

当处理器本身与其他硬件集成时，任何东西都可以映射到任何地址空间。您可以将 ram 放在地址 0x1000 或 0x40000000 或两者中。您可以将外围设备映射到 0x1000 或 0x4000 或 0xF0000000 或以上所有位置。这是系统设计师的选择，或者是工程师团队的组合。一个重要的因素是一旦重置被释放，系统将如何启动。由于其架构，处理器的启动是众所周知的。设计师经常选择两条路：

1）根据处理器的引导方法，在包含复位向量或入口点的内存空间中放置一个 ROM（无论哪种架构，都有一个第一个地址或第一个地址块被读取，并且它们的内容驱动引导处理器）。该软件将代码或向量表或两者都放置在此 rom 中，以便处理器启动并运行。

2）将ram放入内存空间，这样一些主机可以将程序下载到该ram中，然后在处理器上释放reset。然后处理器遵循其硬编码的引导程序并执行软件。

第一个是最常见的，第二个出现在一些外围设备、鼠标和网卡之类的东西中（例如 /usr/lib/firmware/ 中的一些固件用于此）。

但底线是处理器通常设计有一种引导方法，一种固定方法，因此为该处理器编写的所有软件都可以符合该一种方法，而不必不断更改。此外，处理器在设计时并不知道它的目标应用程序，因此它需要一个通用的解决方案。目标应用程序通常定义内存映射、处理器内存空间的位置，以及该分配中的任务之一是该产品将如何启动。从那里编译和放置软件，使其符合处理器规则和产品硬件规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:08:44.023

它完全因架构而异。不过，核心可能想要这样做有几个原因。嵌入式内核（想想 ARM 和 Microblaze 的思路）倾向于在具有单一地址空间的片上系统机器中使用。这样的架构可以有多个内存，并且往往只规定内存的底部区域（即 0x00）包含中断向量。然后允许程序员轻松指定从哪里启动。在 Microblaze 上，您可以在 XPS 中随心所欲地附加内存。

此外，它还可用于轻松支持引导加载程序。这些通常用作小程序进行一些初始化，然后从无法简单访问的介质（例如 USB 或以太网）中获取更大的程序。在这些情况下，引导加载程序通常会将自身复制到高端内存，在其下方获取，然后跳转到那里。复位向量只是允许程序员绕过第一步。

# iis - 在 Blob 存储中剔除/管理 Azure 日志文件/失败的请求日志

> ID：15030740
> 
> 赞同：1
> 
> 时间：2013-02-22T18:24:25.517
> 
> 标签：iis, azure, azure-storage, azure-blob-storage

我刚刚发现 Azure Blob 存储中有 100 GB 的日志文件/失败的请求日志，这些日志多年来一直在积累。是否有管理它们的工具或技术 - 目录结构复杂，因此不像按日期排序那么简单（我使用 Cloud Storage Studio 作为 Azure 管理工具）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T02:37:15.540

[如果感觉像产品插件，请提前道歉]您可以查看 Azure 诊断管理器 ( [http://www.cerebrata.com/Products/AzureDiagnosticsManager](http://www.cerebrata.com/Products/AzureDiagnosticsManager) )。此工具专为查看/管理 Windows Azure 诊断而构建。您还可以查看 Azure Management Studio ( [http://www.cerebrata.com](http://www.cerebrata.com) )，它将 Cloud Storage Studio 和 Azure 诊断管理器组合成一个产品，目前处于公开测试阶段。

这两种工具都允许您清除旧数据，根据日期范围搜索日志数据。

（披露：我是 Cerebrata 团队的一员）

# visual-studio-2012 - VS2012 如何映射 IIS Express 站点名称？

> ID：15030743
> 
> 赞同：4
> 
> 时间：2013-02-22T18:24:47.007
> 
> 标签：visual-studio-2012, iis-express

在从 MVC 4 Beta 升级到 MVC 4 RC 时，我运行了针对 Beta 版本构建的基线和针对 RC 构建的分支，以进行并排比较。

结果，IIS Express 最终得到了两个站点，`MyProject`并且`MyProject (1)`. 我现在已经合并了 RC 分支，IIS Express 知道它为`MyProject (1)`. 附加的有点烦人`(1)`，所以我想我只需编辑`applicationhost.config`以删除原始`MyProject`条目并重命名`Myproject (1)`为`Myproject`.

结果，VS2012 无法再启动该项目。如果我反转重命名，它会再次起作用。

项目与仍调用项目的 IIS Express 站点名称之间必须存在关联`MyProject (1)`，但我找不到该关联的保存位置。我搜索了 MyProject.csproj 和 MyProject.csproj.user。

Visual Studio 项目和 IIS Express 站点名称之间的关联保存在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T11:20:55.823

如果您`projectname.csproj`使用文本编辑器打开了 Visual Studio 项目（另一种解决方案是右键单击项目并卸载它“卸载项目”，然后菜单“编辑 projectname.csproj”），您可以找到一个`ProjectExtensions`可以找到映射的部分：

```
 <ProjectExtensions>
    <VisualStudio>
      <FlavorProperties GUID="{349c5851-65df-11da-9384-00065b846f21}">
        <WebProjectProperties>
          <UseIIS>True</UseIIS>
          <AutoAssignPort>True</AutoAssignPort>
          <DevelopmentServerPort>6213</DevelopmentServerPort>
          <DevelopmentServerVPath>/</DevelopmentServerVPath>
          <IISUrl>http://localhost:6189/</IISUrl>
          <NTLMAuthentication>False</NTLMAuthentication>
          <UseCustomServer>False</UseCustomServer>
          <CustomServerUrl>
          </CustomServerUrl>
          <SaveServerSettingsInUserFile>False</SaveServerSettingsInUserFile>
        </WebProjectProperties>
      </FlavorProperties>
    </VisualStudio>
  </ProjectExtensions> 
```

注意`<UseIIS>True</UseIIS>`和`<IISUrl>http://localhost:6189/</IISUrl>`。

您可以在 IIS Express 配置文件中找到 IIS 端口 (6189) `applicationhost.config`。

```
<sites>
    <site name="MyApplication.Web" id="2">
                <application path="/" applicationPool="Clr4IntegratedAppPool">
                    <virtualDirectory path="/" physicalPath="C:\Projects\MyApplication.Web" />
                </application>
                <bindings>
                    <binding protocol="http" bindingInformation="*:6189:localhost" />
                </bindings>
            </site>
        ...
</sites> 
```

我建议从菜单返回 Visual Studio Development Server 并删除 IIS 配置文件中的部分。现在在 Visual Studio 中，您可以重新映射 IIS Express。

# vb.net - 在 CheckedListBox 控件中设置检查状态时出错？

> ID：15030744
> 
> 赞同：0
> 
> 时间：2013-02-22T18:24:48.747
> 
> 标签：vb.net, datagridview, checkedlistbox

我有一个 CheckedListBox 控件，我用 DataGridView Column HeaderText 值填充。如果这些列可见，我想将 CheckedListBox 项设置为“已检查”。我的代码如下：

```
For Each col As DataGridViewColumn In frmTimingP2P.dgvOverview.Columns
    If col.Visible = True Then
        For Each item In clbOverviewColumnOrder.Items
            Dim intItemIndex As Integer = clbOverviewColumnOrder.Items.IndexOf(item)
            If col.HeaderText = item.ToString Then
                clbOverviewColumnOrder.SetItemCheckState(intItemIndex, CheckState.Checked)
            End If
        Next
    End If
Next 
```

每当此代码运行时，我都会收到以下错误：

*“此枚举器绑定的列表已被修改。只有列表没有更改时，才能使用枚举器。”*

这是什么原因造成的？我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:30:57.090

每当通过枚举器执行 for 循环时，无法修改枚举或抛出此异常。

我不确定为什么这里的枚举会发生变化（代码的其他部分可能会对检查状态的变化做出反应），但解决这个问题的一种方法是实例化一个枚举器，然后循环遍历相反。

我不懂VB，所以这里有一些伪代码！

例如

```
newEnumerator = ColumnOrder.Items.GetEnumerator()

begin loop through newEnumerator
   set checkbox
end loop 
```

因此，即使 Items 列表发生更改，它也不应该影响此枚举器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T20:36:52.333

感谢您的建议。我猜该错误与以下事实有关：在某些情况下，您无法在 For...Next 循环期间修改一组控件。

我已经修改了我的代码并最终得到以下结果：

```
Do While intCurrentItemIndex >= 0
    Dim strCurrentItem As String = clbOverviewColumnOrder.Items(intCurrentItemIndex)
    For Each col As DataGridViewColumn In frmTimingP2P.dgvOverview.Columns
        If col.HeaderText = strCurrentItem Then
            If col.Visible = True Then
                clbOverviewColumnOrder.SetItemCheckState(intCurrentItemIndex, CheckState.Checked)
            Else
                clbOverviewColumnOrder.SetItemCheckState(intCurrentItemIndex, CheckState.Unchecked)
            End If
        End If
    Next
    intCurrentItemIndex -= 1
Loop 
```

# java - Jersey - 声明式超链接 - 在代码配置中

> ID：15030746
> 
> 赞同：0
> 
> 时间：2013-02-22T18:24:55.960
> 
> 标签：java, jersey, hateoas

嗨，我正在阅读泽西入门指南。

在[第 6 章](http://jersey.java.net/nonav/documentation/latest/linking.html)中，他们使用 @Ref 注解来注入资源的 URI。我已经按照示例进行操作，但我的 uri 始终为空。

如何以编程方式添加`com.sun.jersey.server.linking.LinkFilter`到？`com.sun.jersey.spi.container.ContainerResponseFilters`我已经看过很多使用 web.xml 的示例。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:31:31.163

我最终`ResponseFilters`从 the 中检索到`ResourceConfig`，然后向其中添加了一个实例`LinkFilter`。

```
private static HttpServer startServer() throws IOException {
        LOG.info("Starting server...");
        ResourceConfig rc = new PackagesResourceConfig("com.mycomp.resources");
        rc.getContainerResponseFilters().add(new com.sun.jersey.server.linking.LinkFilter());
        return GrizzlyServerFactory.createHttpServer(BASE_URI, rc);
    } 
```

# forms - 从谷歌电子表格填写文档

> ID：15030747
> 
> 赞同：1
> 
> 时间：2013-02-22T18:24:57.167
> 
> 标签：forms, google-sheets, google-docs

我有一个填充 Google 电子表格的网络表单。

我的问题是我可以用给定行中的部分或全部信息填充文档吗？

示例：我为一家小型企业创建了一个网页，他们可以输入销售的所有详细信息。这填充了一个谷歌电子表格。现在我需要创建一个漂亮的收据（文档），其中包含来自该谷歌电子表格特定行中​​某些字段的信息，以打印出来并提供给客户让他们签名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:19:34.730

经过数小时的搜索，我编写了一个简单的 java 脚本库来做同样的事情。（希望我马上开始）[Gsheet2json](http://rumal.github.com/Gsheet2json/)

到目前为止，它可以从电子表格中以对象数组或数组数组的形式获取数据，并且您可以使用您想要发布的任何模板（原因是使用您自己的 java 脚本 + html）。

# ms-access - 拆分数据库中的自动完成字段

> ID：15030751
> 
> 赞同：1
> 
> 时间：2013-02-22T18:25:26.543
> 
> 标签：ms-access, autocomplete

我创建了一个数据条目，并将我的数据库拆分为前端和后端。当我输入数据时，我希望某些字段自动完成。具体来说，当您输入 Requ 时，我想做类似的事情（假设先前输入了 Request 一词）...它会显示 Request，您只需按 Enter 或 Tab 键即可移至下一个字段。我不希望自动填充其余字段，只希望自动完成各个字段。不确定数据库被拆分的事实是否禁止这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:30:18.423

使用表单，将要自动完成的字段的控件设置为组合框，并将组合的行源设置为从表中选择：

```
 Control Source : MyFieldToComplete 
 Row Source : SELECT DISTINCT MyFieldToComplete FROM MyTableWithMyField
 Limit To List : No 
```

有用于构建组合的向导，或者您可以通过右键单击手动更改控件。

![在此处输入图像描述](../Images/44cc12333365c6cd0e03e6f3ff4a41d0.png)

# json - Grails 枚举到 JSON

> ID：15030758
> 
> 赞同：5
> 
> 时间：2013-02-22T18:25:54.483
> 
> 标签：json, grails, marshalling, enumeration

我想改变枚举编组为 JSON 的方式。我目前正在使用默认 grails.converters.JSON （作为 JSON），例如在我使用的控制器中：

> FilmKind.values() 作为 JSON

这个的输出是：

```
"kind":[{"enumType":"FilmKind","name":"DRAMA"},{"enumType":"FilmKind","name":"ACTION"}] 
```

我想删除“enumType”并返回：

```
"kind":["DRAMA","ACTION"] 
```

我正在寻找一个仍然允许我使用的解决方案

> 作为 JSON

因为我不想单独编组每个枚举。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-11-11T13:05:13.753

如果有人在徘徊如何以通用方式将所有枚举值转换为纯字符串值：

```
class EnumTypeHidingJSONMarshaller {
    void register() {
        JSON.registerObjectMarshaller(Enum) { Enum someEnum ->
            someEnum.toString()
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-22T19:17:51.530

> 因为我不想单独编组每个枚举。

好吧，除非您想编写自己的 JSON 转换器，否则编组是最好的方法。原因是因为唯一真正的其他方法是按照 Sergio 的建议进行操作，并且您必须在需要的任何地方调用该代码。如果 FilmKind 是另一个类的属性，那么他的解决方案将根本不起作用。

我会建议 Marshallers，这就是我的做法。创建一个名为 FilmKindMarsaller 的类：

```
class FilmKindMarshaller {
  void register() {
    JSON.registerObjectMarshaller(FilmKind) { FilmKind filmKind ->
      [
          name: filmKind.toString()

      ]
    }
  }
} 
```

然后将以下内容添加到您的引导程序中：

```
[ new FilmKindMarshaller() ].each { it.register() } 
```

以上是为了让您可以继续添加您需要的每个 Marshaller 的实例。

现在，只要 FilmKind 是 JSON 化的，无论是它自己还是父类的一部分，你都会得到你想要的 JSON，没有 enumType。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-22T19:16:58.113

您可以为您的域类注册一个自定义对象编组器以允许`as JSON`. 在您的`Bootstrap.groovy`中，您可以执行以下操作：

```
JSON.registerObjectMarshaller(FilmKind) {
    def result = [:]
    def props = ['name']
    props.each { prop ->
        result[prop] = it."$prop"
    }
    result
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T18:32:21.773

怎么样：

```
def display = [kind:[]]
FilmKind.values().each { val ->
  display.kind.add(val.value)
}

render display as JSON 
```

# jsplumb - 防止两个连接共享同一个锚点

> ID：15030762
> 
> 赞同：3
> 
> 时间：2013-02-22T18:26:01.227
> 
> 标签：jsplumb

我正在使用 jsPlumb 来允许用户构建图表。我允许用户拖动这些元素，因此我为每个端点使用一组锚点，让 jsPlumb 在建立连接时为我从该集合中选择“最佳”锚点。我遇到的问题是，我可能有来自任何给定端点的多达十几个连接，因此当许多连接最终选择相同的“最佳”锚点时，这些连接会在视觉上分散注意力——在图表中造成拥塞的外观. 为了解决这个问题，我想告诉 jsPlumb 限制任何两个连接在端点上共享同一个锚点。

可视化我希望实现的最简单的方法是在这个演示中： [https ://jsplumbtoolkit.com/community/demo/dynamicAnchors/index.html](https://jsplumbtoolkit.com/community/demo/dynamicAnchors/index.html)

开箱即用，此演示中的所有连接都不会重叠。

如果您阅读源代码，您可以看到这是通过拥有一组“源”锚点和一组“目标”锚点来完成的，并且连接是专门从第一组锚点到第二组锚点的。但是，如上所述，我可以拥有多达十几种类型的连接，这些连接可以连接到我的端点或连接到我的端点，因此我不想为每个端点指定一组唯一的锚点。这将限制我可以沿着端点边缘在每个潜在锚点之间留下的间距量，因为每组锚点都不能与任何其他组锚点相交。

**有没有办法告诉 jsPlumb 我不希望连接共享相同的锚点？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-11T17:49:15.220

```
jsPlumb.bind('connection',function(info){
 var con=info.connection;
 var arr=jsPlumb.select({source:con.sourceId,target:con.targetId});
 if(arr.length>1){
    jsPlumb.detach(con);
 }
}); 
```

jsPlumb 更新 API 的简洁版。

查看是否存在具有相同源和目标的另一个连接，如果是，则分离新创建的连接。（jsPlumb 版本 1.5.5 - 1.6.1）

**更新：**

在 2.4 之后的版本中使用 jsPlumb.deleteConnection 而不是 jsPlumb.detach

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T15:29:51.683

> 有没有办法告诉 jsPlumb 我不希望连接共享相同的锚点？

**[使用 JS Fiddle 演示](http://jsfiddle.net/XbcZv/12/)**

**jQuery**

```
jsPlumb.bind("jsPlumbConnection", function (CurrentConnection) {
    var DuplicateCount = 0;
    var allConn = jsPlumb.getAllConnections();
    var length = allConn["green dot"].length;
    for (var i = 0; i < length; i++) {
        if (allConn["green dot"][i].targetId ==               
                                         CurrentConnection.connection.targetId) {
            DuplicateCount = DuplicateCount + 1;
        }
    }
    if (DuplicateCount > 1) {
        jsPlumb.detach(CurrentConnection.connection);
        return;
    } 
}); 
```

您可以将粉红色与绿色连接起来。粉红色配粉红色和绿色配粉红色和绿色配绿色不允许。

# java - 尝试读写时出现 FileNotFound 异常

> ID：15030766
> 
> 赞同：0
> 
> 时间：2013-02-22T18:26:19.063
> 
> 标签：java, file, file-io, io, syntax-error

在我的一个 Java 家庭作业中，我被要求向用户请求 2 个文件名，复制第一个文件中的所有文本，然后将其全部转换为大写字母并将其写入第二个文件。

我的阅读和写作方法几乎完全按照书中的内容进行了复制，但我无法编译，因为我收到了找不到文件的错误。我什至尝试删除用户分配文件名的部分并自己添加目录和文件位置，但我仍然收到 FileNotFound 异常。

错误出现在第 17 和 32 行。

是我做错了什么还是Netbeans有问题？

```
import java.io.*;
import java.util.Scanner;

public class StockdaleUpperfile {

public static void main(String[] args) {
     String readFile, writeFile, trash;
     String line, fileContents, contentsConverted;

     System.out.println("Enter 2 file names.");
     Scanner keyboard = new Scanner(System.in);
     readFile = keyboard.nextLine();
     writeFile = keyboard.nextLine();

     File myFile = new File(readFile);
     Scanner inputFile = new Scanner(myFile);  //unreported exception FileNotFoundException; must be caught or declared to be thrown;

     line = inputFile.nextLine();
     fileContents=line;

     while(inputFile.hasNext())
     {
         line = inputFile.nextLine();
         fileContents+=line;
     }
     inputFile.close();

     contentsConverted = fileContents.toUpperCase();

     PrintWriter outputfile = new PrintWriter(writeFile);  //Isn't this supposed to create a file if it doesn't detect one?
     outputfile.println(contentsConverted);
     outputfile.close();

     }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:33:26.753

将方法更改为

```
public static void main(String[] args) throws Exception 
```

# java - java插入节点的麻烦理解方法

> ID：15030767
> 
> 赞同：0
> 
> 时间：2013-02-22T18:26:25.683
> 
> 标签：java, list, methods, insert, linked-list

我想我已经走得很远了，但我在逻辑上挂断了也许你们中的一些更聪明的家伙可以帮助我！

```
public class ItemList{

ItemInfoNode head;
ItemInfoNode tail;

int listCount = 0;

public ItemList(){

    head = tail = null;

}

public void insertInfo(String name, String rfidTag, String initPosition, double price){

    ItemInfo obj = new ItemInfo(name, rfidTag, initPosition, initPosition, price);
    ItemInfoNode temp = new ItemInfoNode();
    temp.setInfo(obj);

    if(head == null){ head = tail  = temp; }

    else{

        if(head == tail){//BEGIND SECOND OBJECT HANDLING

            if(head.getInfo().getTag().compareToIgnoreCase(rfidTag) <= 0){//to see if temp belongs after head

                head.setNext(temp);
                temp.setPrev(head);
                tail = temp;

            }

            else{

                ItemInfoNode nodePtr = head;

                head = temp;
                tail = nodePtr;
                head.setNext(tail);
                tail.setPrev(head);

            }
        }//END SECOND OBJECT HANDLING

        else{

            if(head.getInfo().getTag().compareToIgnoreCase(rfidTag) > 0){

                ItemInfoNode nodePtr = head;

                head = temp;
                temp.setNext(nodePtr);
                temp.getNext().setPrev(head);

            }

            else if(head.getInfo().getTag().compareToIgnoreCase(rfidTag) <= 0 && tail.getInfo().getTag().compareToIgnoreCase(rfidTag) > 0){

                head.setNext(temp);
                temp.setPrev(head);

            }

            else{//item bigger then tail

                ItemInfoNode nodePtr = tail;

                tail = temp;
                tail.setPrev(nodePtr);
                tail.getPrev().setNext(tail);

            }
        }
    }

    listCount++;

}} 
```

现在这种方法的目的显然是在它们所属的地方插入节点，但是它们需要按它们的 rfidTag 字符串排序，这是一个十六进制数，我不确定它是否明显但我想至少这样做最大的顺序。现在你可以看到我的代码变得非常复杂，很难遵循和处理，但我想我已经很接近了，任何人都可以提供任何提示或“逻辑指导”来帮助我更好地理解如何获得这个正常工作？在当前状态下，它正在破坏我的列表，有点循环，然后抛出 NullPointerException！

编辑**：所以我已经修改了我的代码并添加了注释，以更简洁地解释我想要完成的事情，也许有人可以帮助我理解现在如何处理这些方法？

我现在非常接近，当我按照它们在列表中的顺序放入对象时它可以工作，但是如果我尝试插入一个属于中间某处的对象节点，我会破坏我的列表，我看不到我的错了，有人看吗？主要参考

```
public class Test{

public static void main(String args[]){

    ItemInfo item = new ItemInfo(null, null, null, null, 0);

    item.setName("Chocolate");
    item.setTag("2");
    item.setOrigin("s12345");
    item.setCurrent("s12345");
    item.setPrice(30.00);

    ItemInfo item2 = new ItemInfo(null, null, null, null, 0);

    item2.setName("Buzz Lightyear");
    item2.setTag("1");
    item2.setOrigin("d67890");
    item2.setCurrent("d67890");
    item2.setPrice(15.99);

    ItemInfo item3 = new ItemInfo(null, null, null, null, 0);

    item3.setName("Hotwheels");
    item3.setTag("000000000");
    item3.setOrigin("h34743");
    item3.setCurrent("h34743");
    item3.setPrice(24.25);

    ItemInfo item4 = new ItemInfo(null, null, null, null, 0);

    item4.setName("Barbie");
    item4.setTag("FFFFFFFFF");
    item4.setOrigin("s49862");
    item4.setCurrent("s49862");
    item4.setPrice(21.22);

    ItemInfo item5 = new ItemInfo(null, null, null, null, 0);

    item5.setName("Bicycle");
    item5.setTag("CCCCCCCCC");
    item5.setOrigin("k28475");
    item5.setCurrent("k28475");
    item5.setPrice(10.99);

    ItemInfoNode nood = new ItemInfoNode();
    ItemInfoNode nood2 = new ItemInfoNode();
    ItemInfoNode nood3 = new ItemInfoNode();
    ItemInfoNode nood4 = new ItemInfoNode();
    ItemInfoNode nood5 = new ItemInfoNode();

    nood.setInfo(item);
    nood2.setInfo(item2);
    nood3.setInfo(item3);
    nood4.setInfo(item4);
    nood5.setInfo(item5);

    ItemList list = new ItemList();

    list.insertInfo(item.getName(), item.getTag(), item.getCurrent(), item.getPrice());
    list.insertInfo(item2.getName(), item2.getTag(), item2.getCurrent(), item2.getPrice());
    list.insertInfo(item3.getName(), item3.getTag(), item3.getCurrent(), item3.getPrice());
    list.insertInfo(item4.getName(), item4.getTag(), item4.getCurrent(), item4.getPrice());
    list.insertInfo(item5.getName(), item5.getTag(), item5.getCurrent(), item5.getPrice());

    list.printAll();

} 
```

}

我的输出也是...

**风火轮自行车**

现在，如果我更改 5 个对象的 rfidTags 以使下一个对象比最后一个对象大，它可以工作，但如果它们按照现在的方式放置，则不会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T20:57:00.233

尽量保持简单。不要落入陷阱，在不同的“特殊”情况下划分所有。

```
public void insertInfo(String name, String rfidTag, String initPosition, double price){

    ItemInfo obj = new ItemInfo(name, rfidTag, initPosition, initPosition, price);
    ItemInfoNode addition = new ItemInfoNode();
    addition.setInfo(obj);
    ++listCount;

    // Walk to the item following:
    ItemInfoNode insertionNext = head;
    while (insertionNext != null
            && insertionNext.getInfo().getTag().compareTo(rfidTag) >= 0) {
        insertionNext = insertionNext.next;
    }

    ItemInfoNode insertionPrevious = insertionNext == null ? tail
        : insertionNext.previous;

    // Prepare addition itself:
    addition.next = insertionNext;
    addition.previous = insertionPrevious;

    // The next link backwards should point to the addition:
    if (insertionNext == null) {
        tail = addition;
    } else {
        insertionNext.previous = addition;
    }

    // The previous link forwards should point to the addition:
    if (insertPrevious == null) {
        head = addition;
    } else {
        insertPrevious.next = addition;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:32:36.860

好吧，首先我一直被教导链表的以下结构

在您的列表类中，您需要以下内容（以 sudo 代码显示）

```
list class
{
   Node head;
   Node current;

  constructor(Object O){
    Node n = new Node(O);
    head = n;
    current = head;
 }

 void addItem ( Object o)
{
    Node n = new Node(o);
    if(head.nextNode() == null)
        head.nextNode(n);
    else
        current.nextNode(n);
    current = n;
}

} 
```

正如您从我的示例中看到的那样，您的列表类中应该有两个 Node 指针。一个指向列表的头部，一个指向当前节点。添加项目时，首先设置 current.Next，然后将 current 发送到下一个。这就是我认为你的问题所在。

# sockets - 使用 SIOCGIFINDEX 获取接口索引时出错

> ID：15030773
> 
> 赞同：1
> 
> 时间：2013-02-22T18:26:46.647
> 
> 标签：sockets, network-programming, ubuntu-12.04, ioctl, packet-injection

嗨，我正在尝试使用原始套接字进行数据包注入，我在使用 ioctl 的 SIOCGIFINDEX 命令获取接口索引时遇到问题。我使用 ubuntu 12.04 作为我的操作系统。请帮助代码是：

```
int BindRawSocketToInterface(char *device, int rawsock, int protocol)
{
struct sockaddr_ll sll;
struct ifreq ifr;
bzero(&sll, sizeof(sll));
bzero(&ifr, sizeof(ifr));

/* First Get the Interface Index */

strncpy ((char*) ifr.ifr_name, device, IFNAMSIZ);
if ((ioctl(rawsock, SIOCGIFINDEX, &ifr))== -1)
{
printf ("Error getting interface index!\n");
exit(-1);
}

/* Bind our rawsocket to this interface */

sll.sll_family = AF_PACKET;
sll.sll_ifindex = ifr.ifr_ifindex;
sll.sll_protocol = htons(protocol);

if ((bind(rawsock, (struct sockaddr*)&sll,sizeof(sll)))== -1)
{
perror("Error binding raw socket to interface \n");
exit(-1);
}
return 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T08:32:32.233

这是一个例子：

[http://austinmarton.wordpress.com/2011/09/14/sending-raw-ethernet-packets-from-a-specific-interface-in-c-on-linux/](http://austinmarton.wordpress.com/2011/09/14/sending-raw-ethernet-packets-from-a-specific-interface-in-c-on-linux/)

我希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-31T04:02:55.280

作为对搜索此类功能的任何人的提醒，我已经看到了此功能的许多变体，其中许多具有以下错误，因此它可能是一个需要警告的复制粘贴错误：

```
strncpy ((char*) ifr.ifr_name, device, IFNAMSIZ); 
```

此行有一个**OBOE**（差一错误）和一个不必要的 char * 强制转换。

```
strncpy (ifr.ifr_name, device, sizeof ifr.ifr_name - 1); 
```

应改为使用。

# java - 使用骆驼使用服务内容丰富消息的正确方法是什么

> ID：15030774
> 
> 赞同：1
> 
> 时间：2013-02-22T18:26:49.207
> 
> 标签：java, apache-camel

我正在使用带有 Spring DSL 的骆驼 2.10.3。

我正在监视 CSV 文件的目录。每个文件都包含关于去哪里下载东西的信息，以及其他元数据——谁请求它等等。

我使用该文件，现在我想使用 HTTPComponent 下载文件中引用的实体，然后将其保存到磁盘（稍后处理），如下所示：

```
<route>
  <from uri="file:/incoming"/>
  <unmarshall ref="csv"/>
  <recipientList><simple>${in.body[1]}</simple></recipientList>
  <to uri="file:/attachemnts"/>
  <to ref="furtherProcessing"/>
</route> 
```

我正在使用收件人列表，因为 URL 是基于 CSV 文件内容的动态的。上述方法不起作用，因为 HTTPComponent 尝试将交换的 in.body （这是 CSV 文件内容的值）发送到 HTTP 服务。

我需要稍后处理 CSV 文件中的值，所以我不能把它们吹走。我第一次尝试解决这个问题是将 CSV 文件中的所有值移动到标题中，然后将正文设置为 null，这样 HTTPComponent 就不会抱怨（即使它没有抱怨，我仍然需要以某种方式保留原始CSV 数据）。这可行，但确实使路线混乱，有很多标题，我必须手动复制每个标题。

似乎我需要某种辅助路径来进行下载，我考虑过使用带有自定义聚合策略的多播，然后一个端点是下载，另一个是空操作，但这似乎并不那么干净任何一个。

任何人都对如何干净地做到这一点有任何建议，我觉得我错过了一些非常简单的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T22:27:59.367

据我了解您的情况，您在 CSV 文件中有 URL，您需要对这些 URL 执行 HTTP/GET 操作，而请求中没有任何有效负载数据。

我会将消息的正文复制到交换属性中。由于未编组的内容是 a `List<List<String>>`，因此您可以将其设置为属性，然后稍后从该属性中将其作为一个整体取回。

像这样的东西（我没有真正测试过，所以要注意语法类型操作系统）。

```
<route>
  <from uri="file:/incoming"/>
  <unmarshall ref="csv"/>
  <setProperty propertyName="originalData">  
     <simple>${body}</simple>  
  </setProperty>
  <setBody>
     <simple>null</simple><!-- will make HTTP use GET method and not send data -->
  </setBody>
  <recipientList><simple>${in.property.originalData[1]}</simple></recipientList>
  <to uri="file:/attachemnts"/>
  <to ref="furtherProcessing"/>
</route> 
```

# python - python：在一次运行中在不同的地方拆分一个长字符串

> ID：15030775
> 
> 赞同：4
> 
> 时间：2013-02-22T18:26:49.360
> 
> 标签：python, string, python-2.7, split

我对编程完全陌生，昨天才开始为科学目的学习 python。

现在，我想将一个很长的字符串（174 个字符）分成几个更小的字符串，如下所示：

```
string = 'AA111-99XYZ '
split = ('AA', 11, 1, -99, 'XYZ') 
```

现在，我唯一能想到的就是使用 slice 语法 x-times，但也许有更优雅的方法？有没有办法使用整数列表来指示拆分位置，例如

```
split_at = (2, 4, 5, 8, 11)
split = function(split_at, string) 
```

我希望我的问题不是太傻 - 我找不到类似的例子，但也许我只是不知道我在找什么？

谢谢，

简

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:32:10.447

像这样：

```
>>> string = 'AA111-99XYZ '

>>> split_at = [2, 4, 5, 8, 11]

>>> [string[i:j] for i, j in zip([0]+split_at, split_at+[None])]

['AA', '11', '1', '-99', 'XYZ', ' '] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:32:20.097

```
def split_string(string, points):
    for left, right in zip(points, points[1:]):
        yield string[left:right] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:37:55.470

为避免冗余，您可以采用 ATOzTOA 的不错的解决方案并将其放入 Lamba 函数中：

```
st = 'AA111-99XYZ '
sa = [2, 4, 5, 8, 11]

res = lambda string,split_at:[string[i:j] for i, j in zip([0]+split_at, split_at+[None])]

print(res(st,sa)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T22:56:39.420

我自己对 Python 比较陌生，所以我在这里采取了一个完全初学者的方法，只是为了帮助指导那些还不熟悉 Python 强大功能的人。

```
string = 'AA111-99XYZ '
split_at = [2, 4, 5, 8, 11]

for i in range(len(split_at)):
    if i == 0:
        print string[:split_at[i]]
    if i < len(split_at)-1:
        print string[split_at[i]:split_at[i+1]]
    if i == len(split_at)-1:
        print string[split_at[i]:] 
```

# php - "您的消息已使用以下协议成功发送：邮件"，但我什么也没收到

> ID：15030783
> 
> 赞同：2
> 
> 时间：2013-02-22T18:27:24.963
> 
> 标签：php, apache, codeigniter, xampp

我使用 Xampp，我想使用 CodeIgniter 发送电子邮件。如果使用 smtp 得到错误：

> 消息：fsockopen()：无法连接到 ssl://smtp.googlemail.com:465（无法找到套接字传输“ssl” - 您在配置 PHP 时是否忘记启用它？）文件名：库/电子邮件。 php

```
$config = Array(
    'protocol' => 'smtp',
    'smtp_host' => 'ssl://smtp.googlemail.com',
    'smtp_port' => 465,
    'smtp_user' => 'gmail@gmail.com',
    'smtp_pass' => 'your_password'
);

$this->load->library('email', $config);
$this->email->set_newline("\r\n");   
$this->email->from('your@example.com', 'Your Name');
$this->email->to('(here I put my mail)@yahoo.com');
$this->email->subject('Email Test');
$this->email->message('Testing the email class.');
$this->email->send();
echo $this->email->print_debugger();

(line extension=php_openssl.dll is decomented) 
```

使用这些设置：

```
$this->load->library('email');
$this->email->set_newline("\r\n");   
$this->email->from('your@example.com', 'Your Name');
$this->email->to('(here I put my mail)@yahoo.com');
$this->email->subject('Email Test');
$this->email->message('Testing the email class.');
$this->email->send();
echo $this->email->print_debugger(); 
```

出现消息：您的消息已使用以下协议成功发送：邮件

来自：“你的名字”返回路径：.......

但我没有收到任何邮件。

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:54:45.293

1.  'mail' 协议意味着它使用 PHP 的`mail()`函数来简单地提交给服务器的邮件代理。“成功”仅仅意味着它被接受了，但并不表明它是否曾经被尝试过交付。邮件代理可能已关闭、配置错误等。您需要检查邮件日志，或者更有可能询问您的托管服务提供商。
2.  如果您实际上使用的是“发件人”地址，`anything@example.com`我怀疑邮件是否会真正通过。使用可以自己接收电子邮件的真实电子邮件地址。
3.  检查您的垃圾邮件文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:41:34.653

只是投入我的一点点：

* * *

在您使用 gmail 的第一个示例中。如果您刚刚取消了行 extension=php_openssl.dll 的注释，则可能必须在测试之前重新启动 apache。特别是如果您使用的是 Windows 系统。这正是我修复我的方式。检查您的 phpinfo() 以确保您的 php 版本具有 ssl 支持。假设您使用的是 xampp，那应该在那里。

我还建议 FROM 电子邮件是 gmail 帐户。可能与 smtp_user 中使用的相同。您始终可以在消息中包含您想要的其他电子邮件信息。如果我打算回复发件人，而不是使用发件人的电子邮件作为发件人，我使用 gmail 帐户。在邮件正文中，我可以包含一个主题与邮件主题相同的 mailto 链接。例如：

```
<a href="mail:email@stewardxpress.com?subject=From The User's Form" >Reply User</a> 
```

单击要链接的邮件时，我可以使用 Outlook 或 Gmail 轻松回复。它可能有点风，但它可以工作并防止我的邮件最终进入垃圾邮件文件夹

* * *

在您的第二个示例中，这在 localhost 中不起作用。所以我猜你正在使用一个网络托管帐户。某些主机会要求您在 from 字段中指定要使用的 smtp 服务器、用户名和密码。最常见的 smtp 是 smtp.example.com。IP 也可以工作，尝试 ping 以获取 smtp IP（请注意，由于某些原因，这可能会改变）。包括这些并试一试。

* * *

除了上述之外，检查服务器中配置的包罗万象的电子邮件以查看电子邮件是否到达。尝试发送给自己。检查垃圾邮件和垃圾文件夹。邮件已成功离开您，可能会排队等待稍后的投递。可能需要某种服务器刷新。

# symfony - SonataDoctrineORM - 模型扩展

> ID：15030787
> 
> 赞同：1
> 
> 时间：2013-02-22T18:27:38.520
> 
> 标签：symfony, doctrine-orm, symfony-sonata, sonata-admin, doctrine-odm

正如几个教程中所述，我正在将 Sonata 与 SonataAdmin 和 SonataOrm 一起使用。

我只是想删除 DoctrineOrmBundle- ModelManager.php 的一些默认方法

我试图通过放置来覆盖 ModelManager

```
<?php

namespace Project\AdminBundle\Model;

use Sonata\DoctrineORMAdminBundle\Model\ModelManager as ModelManager;

class ModelManager extends ModelManager
{

/**
 * {@inheritdoc}
 */
public function getSortParameters(FieldDescriptionInterface $fieldDescription, DatagridInterface $datagrid)
{
    $values = $datagrid->getValues();
    $values = $_GET['filter'];
    if ($fieldDescription->getName() == $values['_sort_by']) {
        //echo $fieldDescription->getName() . ' --- ' . $values['_sort_order'] . '<br />';
        if ($values['_sort_order'] == 'ASC') {
            $values['_sort_order'] = 'DESC';
        } else {
            $values['_sort_order'] = 'ASC';
        }
    } else {
        $values['_sort_order'] = 'ASC';
        $values['_sort_by']    = $fieldDescription->getName();
    }

    return array('filter' => $values);
  }

}
?> 
```

并告诉 Sonata DoctrineOrm 默认使用它。

但我不知道该怎么做。

我至少在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:28:00.937

您仍然需要告诉 adminbundle 使用您的自定义 ModelManager。为此，您必须在定义管理服务时应用 setModelManager 方法。服务.yml：

```
services:
    #new model manager
    myproject.model_manager:
         class: Project\AdminBundle\Model\ModelManager
         arguments:
             - '@doctrine'

    #define admin service
    myproject_admin.project:
        class: MyProject\MyBundle\Admin\ProjectAdmin
        tags:
            - { name: sonata.admin, manager_type: orm, group: Projects, label: Projects }
        arguments:
            - null
            - MyProject\MyBundle\Entity\Project
            - SonataAdminBundle:CRUD
        calls:
            - [setModelManager, ['@myproject.model_manager'] ] 
```

在文档的以下部分阅读更多信息：http: [//sonata-project.org/bundles/admin/2-2/doc/reference/advanced.html](http://sonata-project.org/bundles/admin/2-2/doc/reference/advanced.html)

# javascript - ASP.NET .aspx 页面：如何通过 Javascript 发回额外数据？

> ID：15030793
> 
> 赞同：1
> 
> 时间：2013-02-22T18:27:53.917
> 
> 标签：javascript, asp.net

我有一个老式的 ASP.NET 普通 .aspx 页面。它有一些服务器端控件、一些回发按钮等。

我将在客户端添加一些 Javascript 来创建用户构建的额外数据列表。我事先不知道将发送多少这些额外数据。因此，例如，我不能只添加 10 个隐藏输入字段并在代码隐藏中检查它们的值。

可能有 20 个值发回，也可能有 100 个。

将这些额外数据 POST 回服务器的最佳方式是什么？

我可以想象它工作的一种方法是添加一些虚拟隐藏列表控件，由客户端上的 JS 填充。感觉很hacky，但我想我可以让它工作。

**有没有更好的办法？**

需要注意的一些事项：

*   我没有使用 MVC 或 AJAX
*   不使用 JQuery（虽然我可以，我想）

我真的只是想掌握我的选择。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:56:00.757

如果不需要通过 ajax 发布，您可以使用 javascript 创建控件，然后使用 Request.Form 检索输入值。

ASPX：

```
<script>
    document.write('<input name="field1" type="text" />' + 
                   '<input name="field2" type="text" />');
</script>

<asp:Button ID="btn" Text="button" runat="server" onclick="btn_Click" /> 
```

ASPX.CS：

```
protected void btn_Click(object sender, EventArgs e)
{
    var keys = Request.Form.AllKeys;
    foreach (var key in keys)
    {
        if (key.StartsWith("field"))
            Response.Write(Request.Form[key]);
    }
} 
```

# google-chrome-extension - 如何防止调整 Chrome 打包应用程序的大小？

> ID：15030797
> 
> 赞同：4
> 
> 时间：2013-02-22T18:28:06.087
> 
> 标签：google-chrome-extension, google-chrome-app

我刚刚开始为 chrome 开发应用程序，并且刚刚从“Hello World”示例开始。我想要更改的第一件事是防止调整窗口大小，我已经搜索并没有得到任何东西...... :(

那么，现在这甚至可能吗？

*此外，阅读它说“面板”的文档是不可调整大小的，但至少在 Windows 中它是......*

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-08T13:27:19.157

使用可调整大小的标志。

```
chrome.app.window.create("YourPage.html", {
    "bounds": {
        "width": 320,
        "height": 240,
    },
    "resizable": false,
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T04:23:48.533

在创建窗口以约束它时指定最小和最大宽度和高度。您可以将 min 和 max 设置为相同的值，以使窗口不可调整大小。

例如，这里是来自[Hello World](https://github.com/GoogleChrome/chrome-app-samples/tree/master/hello-world)示例的修改后的 main.js：

```
chrome.app.runtime.onLaunched.addListener(function() {
  chrome.app.window.create('index.html',
    {minWidth: 500, minHeight: 309,
     maxWidth: 500, maxHeight: 309});
}); 
```

更多详细信息，请参见[应用窗口 api](http://developer.chrome.com/apps/app.window.html)。

# javascript - 在 iPad 上使用 jQuery UI Draggable 和 jQuery Touch Punch 滚动列表无法正常工作

> ID：15030798
> 
> 赞同：4
> 
> 时间：2013-02-22T18:28:06.173
> 
> 标签：javascript, jquery, jquery-ui-draggable

请参阅下面的 jsfiddle：

[jsfiddle](http://jsfiddle.net/38vgc/4/)

在桌面浏览器上查看此内容时，滚动按我的预期工作。您可以使用滚动条滚动列表，也可以单击并拖动框而不滚动列表。

当我尝试在 iPad 上滚动此列表时出现问题。每次您触摸列表中的一个框时，它已经设置为可拖动，因此您无法在列表中滑动并简单地拖放其中一个。

有人对我如何让它工作有任何建议吗？也许是替代解决方案？

提前致谢。

HTML：

```
<div id="scroller">
    <div class="color" style="background-color: rgb(107, 163, 93);" data-r="107"
    data-g="163" data-b="93"></div>
    <div class="color" style="background-color: rgb(107, 163, 93);"
    data-r="107" data-g="163" data-b="93"></div>
    <div class="color" style="background-color: rgb(107, 163, 93);"
    data-r="107" data-g="163" data-b="93"></div>
    <div class="color" style="background-color: rgb(107, 163, 93);"
    data-r="107" data-g="163" data-b="93"></div>
    <div class="color" style="background-color: rgb(107, 163, 93);"
    data-r="107" data-g="163" data-b="93"></div>
    <div class="color" style="background-color: rgb(107, 163, 93);"
    data-r="107" data-g="163" data-b="93"></div>
    <div class="color" style="background-color: rgb(107, 163, 93);"
    data-r="107" data-g="163" data-b="93"></div>
    <div class="color" style="background-color: rgb(107, 163, 93);"
    data-r="107" data-g="163" data-b="93"></div>
    <div class="color" style="background-color: rgb(107, 163, 93);"
    data-r="107" data-g="163" data-b="93"></div>
    <div class="color" style="background-color: rgb(107, 163, 93);"
    data-r="107" data-g="163" data-b="93"></div>
    <div class="color" style="background-color: rgb(107, 163, 93);"
    data-r="107" data-g="163" data-b="93"></div>
    <div class="color" style="background-color: rgb(107, 163, 93);"
    data-r="107" data-g="163" data-b="93"></div>
</div> 
```

CSS：

```
#scroller {
    width: 317px;
    height: 325px;
    overflow-y: scroll;
    -webkit-overflow-scrolling: touch;
}
.color {
    margin:5px;
    width: 100px;
    height: 100px;
} 
```

JS：

```
$(".color").draggable({
    scroll: false,
    helper: "clone",
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-21T20:58:53.973

由于我无法添加评论，因此希望您不要对我投反对票，因为这只是基于我自己的经验的建议。

尝试使用[https://github.com/furf/jquery-ui-touch-punch](https://github.com/furf/jquery-ui-touch-punch)。
前段时间我需要像你一样创建一些东西，让它与所有移动设备兼容，这很有帮助。

# php - 检查数组 strpos 并返回数组的函数

> ID：15030802
> 
> 赞同：3
> 
> 时间：2013-02-22T18:28:36.767
> 
> 标签：php, arrays, function, strpos

你好，我想创建一个函数来检查一个 etry 是否包含一些单词。

对于我的登录脚本，我想创建一个函数来检查 $_POST 中是否有一些关键字。

因此我想创建一个包含我正在寻找的单词的数组：

```
function value_check($a, $b){
    $haystack = array ($a, $b)
    $words = array ("abc", "def");
    if(strpos($haystack, $words) === true) { 
        return ($a or $b, or both where strpos === true);
    }
    return false;
} 
```

我想通过以下方式调用该函数：

```
$valid_value = value_check($a, $b);
if ($valid_value['a'] === true) {
 //do something
}
if ($valid_value['b'] === true) {
 //do something
} 
```

多谢。

好的，为了澄清我的问题，我想缩短我的代码。而不是使用：

```
...else if ($a === "abc" || $a === "Abc"  ) {
        $errors['a'][] = "text";
}else if ($b === "def" || $a === "Def"  ) {
        $errors['b'][] = "text";
    } 
```

我想我可以在使用一个可以轻松检查该数组中是否有特定字符串的函数时做得更舒服一些。希望现在很清楚。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:33:24.827

阅读此[in_array](http://php.net/manual/en/function.in-array.php)以在数组中搜索。这会像 Ascherer 建议的那样从字符串创建数组而[爆炸。](http://php.net/manual/en/function.explode.php)

```
function value_check ($haystack) {
    foreach ($words as $element) {
        if (in_array($element,$haystack) {
            $result[] = $element;
        }
    }
    return $result;
} 
```

一个电话

```
$somestuff = array($a,$b);
$valid_value = value_check ($somestuff);
foreach ($valid_value as $value) {
    // do something
} 
```

# web-services - 如何改进 Perl Dancer 应用程序中的身份验证

> ID：15030807
> 
> 赞同：3
> 
> 时间：2013-02-22T18:28:56.907
> 
> 标签：web-services, perl, authentication, active-directory, dancer

我正在开发一个 Perl Dancer Web 应用程序，它需要在身份验证方面完成两件事：

1.  基于 Active Directory 对用户进行身份验证以访问应用程序
2.  以用户身份进行身份验证以访问几个 .NET Web 服务。

该应用程序由 Apache 在 Linux 机器上作为 CGI 应用程序托管，我对 Apache 的配置没有太多控制权。

以下是当前工作应用程序的工作流程：

1.  向用户显示登录页面
2.  当用户提交表单时，使用[Authen::Simple::ActiveDirectory](http://search.cpan.org/~chansen/Authen-Simple-LDAP-0.3/lib/Authen/Simple/ActiveDirectory.pm)验证帐户是否有效
3.  [使用Dancer::Session::Cookie](http://search.cpan.org/~dagolden/Dancer-Session-Cookie-0.18/lib/Dancer/Session/Cookie.pm)存储用户的凭据（加密的 cookie）
4.  向用户显示搜索表单
5.  当用户提交此表单时，使用[Authen::NTLM](http://search.cpan.org/~markbush/NTLM-1.02/NTLM.pm)和[SOAP::Lite](http://search.cpan.org/~mkutter/SOAP-Lite-0.715/lib/SOAP/Lite.pm)访问 .NET 服务（类似于[此处](http://lifo101.wordpress.com/2012/05/08/sharepoint-and-ntlmv2-with-soaplite/)的示例）以执行搜索
6.  向用户显示结果

这里的用户凭据处理与我有关，但我通常对 Web 应用程序和身份验证不熟悉。对于小型内部应用程序，这样可以吗？如果没有，你建议我如何改进这个过程？就像我说的，上面概述的应用程序有效，但我觉得它可以/应该改进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T12:17:12.803

One (part of a) solution could be that you let your apache webserver handle the authentication. You could use [Kerberos](http://modauthkerb.sourceforge.net/) for this. So only permitted users can access your application. In that case `$ENV{REMOTE_USER}` contains the username (e.g. foo.bar@MY.DOMAIN.COM).

If you need more information about the current user you can query your LDAP (containd in your Domain). I use a common (LDAP) user to get more information about the current user foo.bar@MY.DOMAIN.COM.

I know that this is only the fist part. I do not have experience useing/passing Kerberos tickets by SOAP. But if you mange to handle this, you have a clean SSO solution.

HTH

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-05T10:22:31.017

我们在 Apache 配置中执行此操作。它需要类似下面的东西。您需要一个只读无密码用户才能绑定到 Active Directory。

```
 AuthName "Active Directory"
    AuthType Basic
    AuthBasicProvider ldap
    AuthLDAPUrl ldap://server:389/OU=COMPANY,DC=COMPANY,DC=com?sAMAccountName,mail,name,extensionAttribute2,memberOf?base?(objectClass=user)
    AuthzLDAPAuthoritative on
    AuthLDAPBindDN "CN=ReadOnlyUser,OU=ServiceAccounts,OU=Users,OU=XXX,OU=COMPANY,DC=COMPANY,DC=com"
    AuthLDAPGroupAttributeIsDN on 
    require valid-user 
```

# java - 关于倒计时锁存器的实现

> ID：15030808
> 
> 赞同：-2
> 
> 时间：2013-02-22T18:29:09.010
> 
> 标签：java, multithreading, java.util.concurrent

我一直在经历启动三个线程并打印它们相应的值的程序，这样首先`T3`执行，然后是`T1`线程，最后`T2`是执行线程。下面是程序。

我只是想知道你们是否可以帮助转换这个程序的倒计时锁存器，因为我想使用这种机制来开发它，或者它也可以通过计数信号量来完成。

从[这个相关问题的答案](https://stackoverflow.com/a/15030159/836214)：

```
 public class Test {
  static class Printer implements Runnable {
    private final int from;
    private final int to;
    private Thread joinThread;

    Printer(int from, int to, Thread joinThread) {
      this.from = from;
      this.to = to;
      this.joinThread = joinThread;
    }

    @Override
    public void run() {
      if(joinThread != null) {
        try {
          joinThread.join();
        } catch (InterruptedException e) { /* ignore for test purposes */ }
      }
      for (int i = from; i <= to; i++) {
        System.out.println(i);
      }
    }
  }
  public static void main(String[] args) throws InterruptedException {

    Thread T3 = new Thread(new Printer(10, 15, null));
    Thread T1 = new Thread(new Printer(1, 5, T3));
    Thread T2 = new Thread(new Printer(6, 10, T1));
    T1.start();
    T2.start();
    T3.start();
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:36:30.920

我们认为每一对线程都`Tw, Ts`在`Tw`等待`Ts`开始其工作。在您的设置中，有 2 个这样的对：

```
T1, T3
T2, T1 
```

对于每一对，我们将创建一个`CountDownLatch`，并将其提供给该对的每个线程。然后`Tw`会`await`在开始工作之前调用闩锁，并在自己的工作结束时`Ts`调用。`countDown`

由于`T1`属于两对，它将接收两个锁存器。但是，第一种情况`T1`是等待线程，第二种`T1`情况是信号线程，因此必须对它的代码进行相应的修改。

当然，您将不得不删除`join`调用和相关的基础设施。

由于您的问题标题询问了闩锁的实现，所以我们简单地说，可以使用`Semaphore`初始化的 at产生相同的语义`0`，并且 where`countDown`实际上是`release`信号量的 a ，而`await`将是`acquire`那个信号量的 an 。

```
public class Test {
  private CountdownLatch latch;
  private Runnable runnable;
  class Tw implements Runnable {
     Tw(CountdownLatch l, Runnable r) {
        latch = l;
        runnable = r;
     }
     @override
     public void run(){
       latch.await();
       runnable.run();
     }
  }

  class Ts implements Runnable {
     CountdownLatch latch;
     Runnable runnable;
     Ts(CountdownLatch l, Runnable r){
        latch = l;
        runnable = r;
     }
     @override
     public void run(){
       runnable.run();
       latch.countDown();
     }
  }

  static class Printer implements Runnable {
    private final int from;
    private final int to;

    Printer(int from, int to) {
        this.from = from;
        this.to = to;
    }

    @Override
    public void run() {
        for (int i = from; i <= to; i++) {
            System.out.println(i);
        }
    }

  public static void main(String[] args) throws InterruptedException {
    CountdownLatch l31 = new CountdownLatch(1), l12 = new CountdownLatch(1);    
    Thread T3 = new Thread(new Ts(l31, new Printer(10, 15, null)));
    Thread T1 = new Thread(new Tw(l31, new Ts(l12, new Printer(1, 5, T3))));
    Thread T2 = new Thread(new Tw(l12, new Printer(6, 10, T1)));
    T1.start();
    T2.start();
    T3.start();
  }
} 
```

提议的示例实现使用辅助可运行对象来处理锁存过程，从而允许我们使用这些可运行对象组合每个任务，而不是`Printer`为每个特定情况派生类（我们至少保存一个类）。

基于`Semaphore`类似的实现留给读者练习。

# c++ - 防止鼠标滚轮滚动控件

> ID：15030811
> 
> 赞同：1
> 
> 时间：2013-02-22T18:29:13.767
> 
> 标签：c++, winapi, mfc

我正在使用 MFC 库开发一个应用程序，并且我目前正在尝试防止用户在滚动鼠标滚轮时意外更改其中一个组合框控件。

我正在寻找一种解决方案，而不是从类派生新类`CComboBox`并防止鼠标在那里滚动。

我对系统的理解是 Windows 将`WM_MOUSEWHEEL`消息传递给处理它的组合框控件（滚动组合框），然后将其传播到父控件链（因此它们到我的`CFormView`等），这意味着我无法阻止通过在我的表单视图中捕获事件来滚动。

有没有人可以解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:33:44.220

您始终可以从中派生控件`CComboBox`并将`WM_MOUSEWHEEL`消息捕获在控件本身中。然后只需在表单视图中使用新的派生组合框。

如果您不想创建派生类（可能对您的项目来说更改太大），您可以子类化组合框并将其捕获`WM_MOUSEWHEEL`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T04:54:32.950

覆盖主窗口类中的 PreTranslateMessage 处理程序并查找 WM_MOUSEWHEEL 消息。比较 PreTranslateMessage 处理程序中的 pMsg->hwnd 句柄与组合框句柄，如果找到，将消息过滤掉。

# javascript - 在javascript中获取gridview datakeys值

> ID：15030817
> 
> 赞同：3
> 
> 时间：2013-02-22T18:29:54.367
> 
> 标签：javascript, asp.net, gridview

我想在 JavaScript 中获取 gridview datakeys 值。

我知道我们可以使用 gridview 单元格值

```
 col1 = grid.rows[i].cells[5]; 
```

但我使用 Autogeneratedcolumn = "true"

所以它每次都绑定不同数量的列，并且我的数据键没有特定的地方绑定 ex-

**对于 1 个场景，gridview 可以像这样绑定**

```
Code  A1 A2 A3 Tot
as1    1  2  3  6
as2    2  3  4  9 
```

**对于第二种情况，gridview 可以像这样绑定**

```
Code  A1 A2  Tot
as1    1  2   3
as2    2  3   5 
```

**Tot**是我的数据键我想在 JavaScript 函数中获取这个值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:34:38.307

你的 Tot 栏总是最后一栏吗？

```
var cells = grid.rows[i].cells
col1 = cells[cells.length-1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T21:20:39.053

如果 Tot 列始终为 Tot，并且没有其他列具有该名称，则可以搜索标题 datakey 文本并根据它检索行值：

```
var grid = document.getElementById('<%=grd.ClientID %>');
var header = grid.rows[0];
var dataKeyIndex = -1;
var dataKeyHeaderText = "Tot";

//Find index of the DataKey column
for (var i = 0; i < header.cells.length; i++) {
    var cell = header.cells[i];
    if (cell.innerText == dataKeyHeaderText) {
        dataKeyIndex = i;
        break;
    }
}

if(dataKeyIndex != -1){

    //Loop the rows retrieving the value
    for (var i = 0; i < header.rows.length; i++) {
        var row = header.rows[i];
        var dataKeyValue = row.cells[dataKeyIndex];
    }
} 
```

# java - 在同一个应用程序中设置多个 JRE

> ID：15030818
> 
> 赞同：0
> 
> 时间：2013-02-22T18:29:56.087
> 
> 标签：java

我已经在用户系统上使用 JDK 1.6 **64 位**、JSF、Tomcat 服务器**64 位**等实现了一个应用程序。我正在将一些*设备*（即 Finereader、扫描仪等）集成到这个应用程序中。某些设备库仅在 JRE **32 位**上受支持。

**因此，要在JRE 32 位**上运行的设备集成屏幕和非设备屏幕应该在**JRE 64 位**上运行。我可以在同一个应用程序中配置多个 JRE 吗？如果可能，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:35:35.287

Java 应用程序在 JVM 中运行。JVM 是单个 JRE 的一部分。您可以将您的应用程序分成两部分，每部分都在各自的 JVM 中运行。然后，这些应用程序必须相互通信以协调用户体验。这对我来说似乎不是一个好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:45:09.580

这完全取决于您如何定义“应用程序”。

首先，关于您的问题，每个 JVM 实例都运行一种 Java——32 位或 64 位——Java 版本等。

有时，一个应用程序由一个运行单个 java 可执行文件的单个 JVM 组成，通常是一个 jar 和类路径上的一些东西，带有一个“main”

有时，一个应用程序由运行在一个或多个机器上的多个 JVM 组成。在这种情况下，每个 JVM 都运行一个 java 可执行文件。但是这些可执行部分之间必须有某种通信才能使其作为应用程序运行。

或者，同一个可执行文件可能在多个 JVM 上运行，我们仍然称其为一个应用程序。在这种情况下，将有某种外部因素决定如何在多个 JVM 中分配应用程序的工作。例如，您可以在 9 个机器上运行 18 个 Tomcat 实例，使用硬件负载平衡器划分网络请求并将每个请求分配给一个 Tomcat 实例。但是，在这种情况下，应用程序的一部分可能在浏览器内的 1000 台用户计算机上运行。

有时，我们说多个应用程序在另一个应用程序下运行。在这种情况下，我们可以将主应用程序称为容器。一个例子是Tomcat。在这种情况下，Tomcat 管理每个单独应用程序的请求负载，因为 HTTP 请求来自网络，并且标头中的信息指示由哪个应用程序处理该请求。

您已经说过您在 Tomcat 下运行了一些代码。Tomcat 是一个单一的可执行文件（它在一个 JVM 中运行并且有多种 Java），它通常管理运行一个作为 .war 文件提供的 Java 可执行文件。可能有其他 Java 应用程序在其他 JVM 中运行，它们通过该 Tomcat 和您的可执行文件进行通信。或者可能没有其他 JVM 可以与您的可执行文件通信并在其他地方运行。

所以，你可以看到，真正的答案是“视情况而定”。如果您有多个 JVM 以某种方式进行通信，那么您可能有不同的 Java 品种。如果它们都在单个 Tomcat 实例下运行，那么您就有了单一种类的 Java。

# python - 如何编码 Python 程序输出的所有文本？

> ID：15030821
> 
> 赞同：1
> 
> 时间：2013-02-22T18:29:59.987
> 
> 标签：python, encode, final, translate, output

我的朋友正在尝试制作一个程序，他希望它能够根据 int 变量设置为`0`or ，在输出普通文本和使用 Rot13 编码的文本之间切换`1`。我们已经测试了使用`"text".encode('rot13')`and 可以对文本进行编码，但是必须有一种更简单的方法来使程序输出的任何内容都使用 rot13 进行编码，而不是使用`if 0, output text, if 1, output rot13 text`.

我希望会有某种编码，我可以将所有代码包装起来以使其工作，但我尝试在线搜索并找不到任何东西。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:46:19.480

我强烈建议**不要使用猴子补丁`sys.stdout`，`sys.stderr`**这是一种不好的做法，因为它可能会破坏您正在使用的其他模块或使用您的代码的其他模块。

一种更安全的方法是使用[logging](http://docs.python.org/2/library/logging.html#module-logging)模块的[StreamHandler](http://docs.python.org/2/library/logging.handlers.html#logging.StreamHandler)与[codecs 模块的编码](http://docs.python.org/2/library/codecs.html#codecs.getwriter)编写器一起将编码的消息打印到默认值`stdout`或`stderr`处理程序：

```
import logging
# import codecs # not necessary, this is embedded in logging
# import sys # not necessary, this is embedded in logging

# get your encoding flag here... 
flag = 1

# Log everything, and send it to stderr.
# create an encoded streamhandler with encoding based on flag
if flag == 1:
    writer = logging.codecs.getwriter('rot13')(logging.sys.stderr) 
    streamhandler = logging.StreamHandler(stream = writer)
else:
    streamhandler = logging.StreamHandler() # defaults to unencoded stderr
# you can use sys.stdout instead,
# it depends on preference and use case

# set the log level threshold
streamhandler.setLevel(logging.DEBUG)
# create a basic logger
log = logging.getLogger()
log.setLevel(logging.DEBUG)

log.addHandler(streamhandler)

# now, instead of print, use log.debug(message)
print 'hello world'
log.debug('hello world') 
```

使用 logging 模块的优点是它还允许您设置自己的自定义格式化程序和过滤器，以及使用以下方式获取有意义的调试消息`log.exception(...)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:49:25.670

您可以像这样重定向输出：

```
import sys

old_stdout = sys.stdout

class MyOut(object):
    def write(self, string):
        # Do what ever you want with the string
        old_stdout.write(string.upper())

    def flush(self):
        pass

sys.stdout = MyOut()

print "Hello world!" 
```

上面的脚本会给你`HELLO WORLD!`输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:56:11.757

只需覆盖`sys.stdout`.

```
import sys

# Save the original stdout
original = sys.stdout

# Create our own stdout
class writer(object) :
    def write(self, text):
        # Do encoding here
        #text = rot13encode(text)

        original.write(text)

# Override stdout with our stdout
sys.stdout = writer()

# print as usual
print "Hello" 
```

# ssl - 在 ASP.NET Web API ActionFilterAttribute 上测试 Localhost

> ID：15030822
> 
> 赞同：1
> 
> 时间：2013-02-22T18:30:04.213
> 
> 标签：ssl, asp.net-web-api, localhost

如何`ActionFilterAttribute`使用 ASP.NET Web API 测试本地主机？我想跳过 SSL 检查。

```
public class RequireHttpsAttribute : ActionFilterAttribute
    {
        public override void OnActionExecuting(HttpActionContext actionContext)
        {
            var request = actionContext.Request;
            if (request.RequestUri.Scheme != Uri.UriSchemeHttps)
            {
                throw new ValidationException(new SecureConnection());
            }

            base.OnActionExecuting(actionContext);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T03:33:41.270

如果您只想测试请求 URI 是否为 localhost，那么 URI 上的 IsLoopback 应该可以正常工作。

但事情是这样的……请求 URI 很容易被非本地计算机的计算机欺骗。因此，任何远程计算机实际上都可以向您发送带有 localhost Host 标头的请求。

更好的方法是在他的博客文章中使用 Filip 的建议：

[http://www.strathweb.com/2013/01/adding-request-islocal-to-asp-net-web-api/](http://www.strathweb.com/2013/01/adding-request-islocal-to-asp-net-web-api/)

这应该适用于 selfhost 和 webhost 以及客户端的 IP 地址是否是环回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:44:57.197

看起来这行得通。让我知道我是否不正确。

```
request.RequestUri.IsLoopback 
```

# c# - C# GridView 垂直和水平交替背景颜色

> ID：15030823
> 
> 赞同：1
> 
> 时间：2013-02-22T18:30:04.597
> 
> 标签：c#, asp.net, gridview

我正在开发一个 ASP.NET Web 应用程序，我想像国际象棋（垂直和水平）一样交替显示 gridview 单元格的颜色。颜色将是黄色和黑色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:41:34.873

您可能想使用 GridView 的 RowDataBound 事件，如下所示：

```
 <asp:GridView ID="grid1" runat="server" AutoGenerateColumns="False" 
         DataSourceID="SqlDataSource1" OnRowDataBound="GridView1_RowDataBound">

   protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
   {
        if (e.Row.RowType != DataControlRowType.DataRow)
            return;

        for (int i = 0; i < e.Row.Cells.Count; i++)
        {
            TableCell Cell = e.Row.Cells[i];

            // if both row and column are odd, color then black
            // if both row and column are even, color then yellow
            if (((e.Row.RowIndex % 2 == 1) && (i % 2 == 1)) ||
                ((e.Row.RowIndex % 2 == 0) && (i % 2 == 0)))
                Cell.BackColor = Color.Black;
            else
                Cell.BackColor = Color.Yellow;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:32:42.313

设置 ItemStyle 和 AlternatingItemStyle 属性，并指定 BackGroundColor 和 Color 属性。这些控制这些颜色。

# vba - 在 MS Access VBA 中添加两个等于零的变量时出现奇怪的结果

> ID：15030824
> 
> 赞同：1
> 
> 时间：2013-02-22T18:30:07.540
> 
> 标签：vba, variables, ms-access

我的 VBA MSAccess 平台中有一个例程让我感到困惑。我所做的只是在循环记录集时总结一个金额字段。

我已经声明了一个名为 TempAmount 的变量（它在我们循环时保存总计）。表中的字段名称在称为 rsBilled 的记录集中称为 BilledAmount。

循环开始时，TempAmount 为零。随着循环的进行，我们将 BilledAmount 添加到 TempAmount。

这是代码的模型。

```
Dim TempAmount as Double
TempAmount = 0

While NOT rsBilled.EOF
   TempAmount = TempAmount + rsBilled.Fields("BilledAmount")

rsBilled.MoveNext

Wend 
```

（然后我们将 TempAmount 写入另一个包含 Totals 的表。）

现在这一切都很好。除非 TempAmount 和 BilledAmount 的金额相反，这会产生零。
换言之，如果 TempAmount 为 15.25 且 BilledAmount = -15.25，则结果应为零。但这不会发生。相反，我得到了一些疯狂的扩展符号值，例如 2.123423523E-10。

同样，这仅在结果等于零时发生，因为正值被添加到相反的负值。

有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:34:15.447

您已声明`TempAmount`为 a `double`，因此您处理的是浮点数，而不是定点数。

`TempAmount`改为声明`currency`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:35:52.027

```
Dim TempAmount as Double 
TempAmount = 0

While NOT rsBilled.EOF 
TempAmount = Round(TempAmount,4) + Round(rsBilled.Fields("BilledAmount"),4)
rsBilled.MoveNext
Wend 
```

# vb.net - 如何获取包含字符串的整行文本

> ID：15030827
> 
> 赞同：3
> 
> 时间：2013-02-22T18:30:12.577
> 
> 标签：vb.net, visual-studio-2010

我想问一件事。如何在 Visual Basic 2010 中获取包含字符串的整行文本？

比方说：

MyText.txt 文件包含：

```
Configurations: 
Name: Fariz Luqman
Age: 78
My Favourite Fruit: Lemon, Apple, Banana
My IPv4 Address: 10.6.0.5
My Car: Ferrari 
```

在 Visual Basic 中，我想获取包含字符串“**香蕉**”的整行文本并将其打印在文本框中，以便显示在该文本框中：

```
My Favourite Fruit: Lemon, Apple, Banana 
```

我为什么要这样做？因为正在附加文本文件并且行号是随机的。内容也是随机的，因为文本是由 Visual Basic 生成的。文本“Banana”可以在第 1 行、第 2 行，也可以在任何行中，所以我怎样才能获得包含特定字符串的整行文本？

先感谢您！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T19:04:27.633

您可以使用 LINQ 轻松完成所有操作：

```
TextBox1.Text = File.ReadAllLines("MyText.txt").FirstOrDefault(Function(x) x.Contains("Banana")) 
```

但是，如果文件相当大，那效率不是特别高，因为它会在搜索该行之前将整个文件读入内存。如果你想让它在找到该行后停止加载文件，可以使用`StreamReader`，如下所示：

```
Using reader As New StreamReader("Test.txt")
    While Not reader.EndOfStream
        Dim line As String = reader.ReadLine()
        If line.Contains("Banana") Then
            TextBox1.Text = line
            Exit While
        End If
    End While
End Using 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T19:02:29.740

刚刚检查过（应该先这样做！）。VB.Net 确实有一个 CONTAINS() 方法。所以：

```
IF line1.Contains("Banana") THEN
   'do something
END IF 
```

# c++ - C++ 向量构造函数抛出 std::out_of_range 异常 (Microsoft C++ stdlib)

> ID：15030830
> 
> 赞同：0
> 
> 时间：2013-02-22T18:30:17.540
> 
> 标签：c++, stl, outofrangeexception

嗨，我有一个奇怪的问题，std::vector<> 的构造函数抛出了 out_of_range 异常。异常如下所示：

```
First-chance exception at 0x000007fefde09e5d in 3dsmax.exe: Microsoft C++ exception: std::out_of_range at memory location 0x6726ee40.. 
```

无论如何，这不是很有帮助。在调试器中，代码如下：

```
std::vector<Point3> points;
std::vector<Point3> normals; 
```

例外来自第二行。这是两个局部变量，意味着它们在一个成员函数体中，并且被多次调用。**首次调用这两个构造函数时不会发生异常，但总是在第二次命中第二行（法线）时抛出异常。**“Point3”类在 3dsmax SDK 中定义，如下所示：

```
class GEOMEXPORT Point3: public MaxHeapOperators {

public:
float x,y,z;

// Constructors
/*! \remarks Constructor. No initialization is performed. */
Point3() { /* NO INIT */ }
/*! \remarks Constructor. x, y, and z are initialized to the values specified. */
Point3(float X, float Y, float Z)  { 
     x = X; y = Y; z = Z; 
 }
/*! \remarks Constructor. x, y, and z are initialized to the specified values (cast as floats). */
Point3(double X, double Y, double Z) { 
     x = (float)X; y = (float)Y; z = (float)Z; 
 }
/*! \remarks Constructor. x, y, and z are initialized to the specified values (cast as floats). */
Point3(int X, int Y, int Z) { 
     x = (float)X; y = (float)Y; z = (float)Z; 
 }
/*! \remarks Constructor. x, y, and z are initialized to the specified Point3\. */
Point3(const Point3& a) { 
     x = a.x; y = a.y; z = a.z; 
 } 
```

你可以在 3ds max sdk 的 Point3.h 中找到这个类。它里面只有 3 个浮点数，并且似乎有足够的各种类型的构造函数。我不敢相信这堂课有问题。

我在 Windows 7 中使用 VisualStudio 2008。知道如何解决这个问题吗？谢谢。

更新：是的，这是第一次机会异常，但它没有在 STL 中处理并直接弹出以使我的应用程序崩溃。（如果我使用 try-catch 扭曲该范围，我可以在自己的代码中捕获此异常）

更新：尝试将两个局部变量从堆栈移动到堆（使用新的）并且问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:33:18.403

通过在调试器和其他各种辅助工具（如应用程序验证器）中使用 break on throws 选项，我终于发现一些编译器优化会向上滚动 Visual Studio 调试器。在两个变量声明之间执行位于同一范围内的函数调用。因此，在 Visual Studio 调试器中，突出显示的行是*std::vector"Point3" 法线；*我按下 F10 并引发异常，在 F10 步骤执行的实际代码不是突出显示的那一行。

更糟糕的是函数调用重定向到我没有调试符号的外部 DLL，异常来自该 DLL。因此，调试器中捕获的调用堆栈也被破坏了。

我使用的是英特尔 C++ 编译器，在调试版本中，所有优化选项都已关闭。但是该范围内的代码执行顺序仍然不能完全符合 Visual Studio 的想法。这里的方法只是注释掉所有可能引发异常的东西，并一一取消注释。

# jquery - $.post 是否意味着部分回发？

> ID：15030835
> 
> 赞同：0
> 
> 时间：2013-02-22T18:30:35.253
> 
> 标签：jquery, jquery-post

当我们使用 $.post 时，我使用了断点，发现我的 Page_Load 事件再次触发。那么$.post有什么用，这是部分回发吗？

我很困惑，如果 Page_Load 事件在两种情况下都触发（服务器端调用，$.post），那么 $.post 有什么优势？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T18:32:44.370

我相信您正在使用 $.post 访问同一页面，这完全违背了使用 ajax 的目的。您应该 $.post 到直接处理您的请求的网络服务（或其他页面）。

此外，为了解决您的主要问题， $.post 在技术上根本不是回发。它是一个 xmlHttpRequest (ajax)。术语“部分回发”通常是指 ajax。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T18:33:25.870

[$.post()](http://api.jquery.com/jQuery.post/)向服务器发出[HTTP POST](http://en.wikipedia.org/wiki/POST_%28HTTP%29)请求，而不提交页面的`<form>`. 既不会发生部分回发，也不会发生完全回发。

但是，如果您以这种方式请求页面的 URL，它确实会被提供，并且它的`Page_Load`处理程序将运行。

如果您尝试调用页面方法，则可能必须更改您指定的方法（或者如果您忘记这样做，则使用[[WebMethod]](http://msdn.microsoft.com/en-us/library/system.web.services.webmethodattribute.aspx)`dataType`属性装饰您的页面方法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:32:54.800

$.post 的最大优势是：用户不知道页面是否刷新。他将能够在不刷新页面的情况下看到数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T18:57:56.020

传统上，网页需要重新加载以更新其内容。对于基于网络的电子邮件，这意味着用户必须手动重新加载他们的收件箱来检查他们是否有新邮件。这有很大的缺点：速度很慢并且需要用户输入。当用户重新加载他们的收件箱时，服务器必须重建整个网页并重新发送所有的 HTML、CSS、JavaScript 以及用户的电子邮件。这是非常低效的。理想情况下，服务器应该只需要发送用户的新消息，而不是整个页面。到 2003 年，所有主流浏览器都通过采用 XMLHttpRequest (XHR) 对象解决了这个问题，允许浏览器与服务器通信而无需重新加载页面。

XMLHttpRequest 对象是称为 Ajax（异步 JavaScript 和 XML）的技术的一部分。使用 Ajax，然后可以使用 XMLHttpRequest API 在浏览器和服务器之间传递数据，而无需重新加载网页。随着 XMLHttpRequest 对象的广泛采用，很快就可以构建像 Google Maps 和 GMail 这样的 Web 应用程序，这些应用程序使用 XMLHttpRequest 来获取新的地图图块或新的电子邮件，而无需重新加载整个页面。

Ajax 请求由 JavaScript 代码触发；您的代码向 URL 发送请求，当它收到响应时，可以触发回调函数来处理响应。因为请求是异步的，所以您的其余代码会在处理请求时继续执行，因此必须使用回调来处理响应。

不幸的是，不同的浏览器以不同的方式实现 Ajax API。通常，这意味着开发人员必须考虑所有不同的浏览器，以确保 Ajax 可以通用。幸运的是，jQuery 提供了 Ajax 支持，可以抽象出令人痛苦的浏览器差异。它提供了功能齐全的 $.ajax() 方法和简单的便捷方法，例如 $.get()、$.getScript()、$.getJSON()、$.post() 和 $().load ()。

尽管名称为“Ajax”，但大多数 jQuery 应用程序实际上并不使用 XML；相反，它们将数据传输为纯 HTML 或 JSON（JavaScript 对象表示法）。

通常，Ajax 不能跨域工作。例如，从 example1.com 加载的网页无法向 example2.com 发出 Ajax 请求，因为它违反了同源策略。作为一种变通方法，JSONP（带填充的 JSON）使用标签从另一个域加载包含任意 JavaScript 内容和 JSON 的文件。最近浏览器实现了一种称为跨域资源共享 (CORS) 的技术，该技术允许 Ajax 请求到不同的域。

关键概念

正确使用与 Ajax 相关的 jQuery 方法需要首先了解一些关键概念。

获取与发布

向服务器发送请求的两种最常见的“方法”是 GET 和 POST。了解每种方法的正确应用很重要。

GET 方法应该用于非破坏性操作——也就是说，您只是从服务器“获取”数据的操作，而不是更改服务器上的数据。例如，对搜索服务的查询可能是 GET 请求。GET 请求可能会被浏览器缓存，如果您没有预料到，这可能会导致不可预知的行为。GET 请求通常在查询字符串中发送所有数据。

POST 方法应该用于破坏性操作——即更改服务器上数据的操作。例如，保存博客文章的用户应该是 POST 请求。POST 请求一般不会被浏览器缓存；查询字符串可以是 URL 的一部分，但数据往往作为发布数据单独发送。

数据类型

jQuery 通常需要一些关于您希望从 Ajax 请求中返回的数据类型的说明；在某些情况下，数据类型由方法名称指定，而在其他情况下，它作为配置对象的一部分提供。有几种选择：

文本

用于传输简单字符串

html

用于传输要放置在页面上的 HTML 块

脚本

用于向页面添加新脚本

json

用于传输 JSON 格式的数据，可以包括字符串、数组和对象

笔记

从 jQuery 1.4 开始，如果服务器发送的 JSON 数据格式不正确，请求可能会静默失败。有关正确格式化 JSON 的详细信息，请参阅[http://json.org](http://json.org)，但作为一般规则，请使用内置语言方法在服务器上生成 JSON 以避免语法问题。

jsonp

用于从另一个域传输 JSON 数据

xml

用于在自定义 XML 模式中传输数据

在大多数情况下，我强烈支持使用 JSON 格式，因为它提供了最大的灵活性。它对于同时发送 HTML 和数据特别有用。

A 代表异步

Ajax 的异步性让许多 jQuery 新用户措手不及。因为 Ajax 调用默认是异步的，所以响应不是立即可用的。只能使用回调处理响应。因此，例如，以下代码将不起作用：

123456789 var 响应；$.get("foo.php", function(r) { response = r; }); 控制台日志（响应）；// 不明确的

相反，我们需要向我们的请求传递一个回调函数；此回调将在请求成功时运行，此时我们可以访问它返回的数据（如果有）。

123 $.get( "foo.php", function( response ) { console.log( response ); // 服务器响应});

同源策略和 JSONP

通常，Ajax 请求仅限于与发出请求的页面相同的协议（http 或 https）、相同的端口和相同的域。此限制不适用于通过 jQuery 的 Ajax 方法加载的脚本。

另一个例外是针对另一个域上的 JSONP 服务的请求。在 JSONP 的情况下，服务的提供者已经同意使用可以使用标签加载到页面中的脚本来响应您的请求，从而避免了同源限制；该脚本将包含您请求的数据，并包含在您提供的回调函数中

# java - 运行演示应用程序的问题

> ID：15030838
> 
> 赞同：0
> 
> 时间：2013-02-22T18:30:49.693
> 
> 标签：java, intuit-partner-platform

据我所知，我已按照[https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0200_DevKits_for_Intuit_Partner_Platform/Sample_Apps/Java_Sample_App_for_AggCat_Services/0010_Creating_the_App](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0200_DevKits_for_Intuit_Partner_Platform/Sample_Apps/Java_Sample_App_for_AggCat_Services/0010_Creating_the_App)中详细说明的步骤运行 java 演示应用程序。

启用日志后，我在日志输出中看到以下条目

```
DEBUG: com.intuit.aggcat.logger - Response code=401
DEBUG: com.intuit.aggcat.logger - OAuth access tokens = null
DEBUG: com.intuit.aggcat.logger -  Could not get oAuth tokens: null 
```

所以我认为服务器认为我没有权限，但是 intuit 开发者网站显示我有客户帐户数据 API 的测试访问权限。有人可以让我知道我做错了什么。

顺便说一句，我认为上面链接的文档被切断了。非常最后的语句说“运行方式”，但没有说运行方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:41:41.463

我建议您尝试使用具有相同密钥集的 API 资源管理器 (developer.intuit.com/apiexplorer) 来验证所使用的密钥和证书是否正确。如果您能够通过 API Explorer 检索令牌，那么您应该能够通过 Java 示例应用程序执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:38:04.130

您应该使用用户名“user”登录示例应用程序

# git - kdiff3 完全从远程选择文件

> ID：15030843
> 
> 赞同：19
> 
> 时间：2013-02-22T18:30:58.963
> 
> 标签：git, kdiff3

如何将 kdiff3 中的完整选择选择为 C（kdiff3 中的远程文件），而不是逐行更改所有内容（合并冲突）？我只想选择远程文件。还有什么是选择 A（基本文件），远程文件在新更改之前在本地签出？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-11-18T19:54:26.207

打开“合并”菜单项。它有“ *Choose C Everywhere* ”选项，它为所有行选择远程 (C) 中的编辑。如果您只是将远程编辑用于未解决的冲突，那么您应该选择“*为所有未解决的冲突选择 C* ”。

![在此处输入图像描述](../Images/eeb0fac9006300f13160994afc35e34f.png)

Git[进行 3 路合并](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging)。A 显示来自 B 和 C 提交的父提交的文件。B 是您所在分支的文件，C 是您要合并的分支的文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-12-08T09:42:46.710

Supplement to @lemiorhan 's answer:

These options are not available in KDiff3 v1.8.1, however, the shortcuts are still working. Ctrl+Shift+1 is Choose A Everywhere; Ctrl+Shift+2 is Choose B Everywhere.

# java - 为什么在调用此 Java 类时收到“非静态变量”错误？

> ID：15030848
> 
> 赞同：0
> 
> 时间：2013-02-22T18:31:16.530
> 
> 标签：java, static, new-operator

`non static variable this cannot be referenced from a static context`编译以下代码时收到错误；问题是什么？

```
class bwCalc {
    class Tst{
     public void tst() {
         byte[] data = new byte[1024];//1 kb buffer
         int count;
         long startedAt = System.currentTimeMillis();
         while((System.currentTimeMillis()-startedAt)<1) {
             System.out.println("hello\n");
         }

     }
 }
 public static void main(String argc[]) {
     Tst c = new Tst();
     c.tst();  
 }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T18:32:25.393

您需要外部类实例。

```
bwCalc  b = newbwCalc ();     
     Tst c = b.new Tst();
         c.tst(); 
```

或者干脆使内部类静态。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T18:32:14.377

该类`Tst`应该是`static`，因为它没有附加到 的特定实例`bwCalc`。

# jquery - 在 jQuery 中引用 XML

> ID：15030849
> 
> 赞同：1
> 
> 时间：2013-02-22T18:31:18.230
> 
> 标签：jquery, python, xml, google-app-engine

我必须为 AJAX 动态填充解析 XML 文档。但是，我收到了这个错误。

```
(document).ready(function(){var departure=$('#departure'); arrival=$('#arrival');
$.ajax({type:"GET", url:"cities.xml", dataType:"xml", success: function(xml)

INFO     2013-02-22 18:16:06,951 dev_appserver.py:3092] "GET /cities.xml HTTP/1.1" 40 
```

我的**city.xml**文件与加载它的模板位于同一目录中。

```
/templates/template_with_jquery
/templates/cities.xml 
```

有谁知道我为什么会收到这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:35:24.740

本地 url 是相对于顶层的，而不是来自 js 文件所在的任何级别。看起来您收到了 404，因为没有`<yoursite>/cities.xml`.

将您的网址更改为“ `/templates/cities.xml`”，您应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:14:42.490

这是一个从头到尾的技术问题。不过，我必须说，我学到了关于 yaml 文件在 App Engine 中的重要性的宝贵经验。**app.yaml**文件中的更改如下

**原来的：**

1)

```
url: /static/xml
static_dir: static/xml
upload: static/xml 
```

2)

```
url: /static/xml
static_files: static/xml
upload: static/xml/cities.xml 
```

**正确和最终：**

```
url:/static/xml
static_dir: static/xml 
```

我传递的**上传**正则表达式与任何内容都不匹配。无论如何，这只是其中之一，但似乎有一百个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T10:52:02.763

首先，这可能与 jQuery 或 XML 无关，因为您只是没有收到来自开发服务器的预期响应。

如果你去 http://[your-dev-server]/cities.xml 你也会得到一个 404，所以让我们从那里开始。

您还没有告诉我们 city.xml 是模板还是静态文件，但假设它是静态文件：

您的处理程序：

```
url: /updates
static_files: /templates/cities.xml 
upload: /templates/cities.xml 
```

意味着当你去`http://[your-dev-server]/updates`你的服务器时会发送给你`/templates/cities.xml`

要获取您正在调用的 URL：`http://[your-dev-server]/cities.xml`您必须更改为：

```
url: /cities.xml
static_files: /templates/cities.xml 
upload: /templates/cities.xml 
```

您可能还应该根据您的文件结构删除初始斜杠：

```
url: /cities.xml
static_files: templates/cities.xml 
upload: templates/cities.xml 
```

如果 citys.xml 是一个静态文件，它不应该真正位于模板目录中，因为您可能希望将模板和静态文件分开。将 city.xml 与其他静态文件（如 css、js 等）放在静态目录中：

```
url: /static/xml
static_dir: static/xml 
upload: static/xml 
```

这将提供可`static/xml/cities.xml`在`http://[your-dev-server]/static/xml/cities.xml`但也`static/xml/countries.xml`可在`http://[your-dev-server]/static/xml/countries.xml`

如果 city.xml 不是静态文件，您将不得不向我们提供更多信息。

# drupal-7 - Fileconveyor 不同步文件，即使我没有收到错误。我究竟做错了什么？

> ID：15030851
> 
> 赞同：0
> 
> 时间：2013-02-22T18:31:52.460
> 
> 标签：drupal-7, cdn, cloud-hosting, rackspace-cloud

我已经按照在我的服务器上安装 fileconveyor 的所有说明进行操作，令我惊讶的是，我认为我正确安装了所有内容。我发现[这篇](http://www.rackspace.com/knowledge_center/article/syncing-to-cloud-files-with-fileconveyor)文章特别有用。

```
When I run arbitrator.py I get the following output 
2013-02-22 18:21:13,792 - Arbitrator                - WARNING  - File Conveyor is initializing.
2013-02-22 18:21:13,795 - Arbitrator                - WARNING  - Loaded config file.
/usr/local/lib/python2.6/dist-packages/django/conf/__init__.py:110: DeprecationWarning: The SECRET_KEY setting must not be empty.
  warnings.warn("The SECRET_KEY setting must not be empty.", DeprecationWarning)
2013-02-22 12:21:13,890 - Arbitrator                - WARNING  - Created 'cloudfiles' transporter for the 'Rackspace Cloud Files' server.
2013-02-22 12:21:13,890 - Arbitrator                - WARNING  - Server connection tests succesful!
2013-02-22 12:21:13,891 - Arbitrator                - WARNING  - Setup: created transporter pool for the 'Rackspace Cloud Files' server.
2013-02-22 12:21:13,893 - Arbitrator                - WARNING  - Setup: initialized 'pipeline' persistent queue, contains 0 items.
2013-02-22 12:21:13,893 - Arbitrator                - WARNING  - Setup: initialized 'files_in_pipeline' persistent list, contains 0 items.
2013-02-22 12:21:13,894 - Arbitrator                - WARNING  - Setup: initialized 'failed_files' persistent list, contains 0 items.
2013-02-22 12:21:13,895 - Arbitrator                - WARNING  - Setup: initialized 'files_to_delete' persistent list, contains 0 items.
2013-02-22 12:21:13,895 - Arbitrator                - WARNING  - Setup: moved 0 items from the 'files_in_pipeline' persistent list into the 'pipeline' persistent queue.
2013-02-22 12:21:13,896 - Arbitrator                - WARNING  - Setup: connected to the synced files DB. Contains metadata for 0 previously synced files.
2013-02-22 12:21:13,974 - Arbitrator                - WARNING  - Setup: initialized FSMonitor.
2013-02-22 12:21:13,976 - Arbitrator                - WARNING  - Fully up and running now. 
```

我仔细检查了 config.xml 以确保它与我的文件所在的目录匹配。它似乎正在工作，它只是不会同步文件。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:47:06.117

您需要先修复密钥错误。您可以使用此链接生成密钥并将其粘贴到 [installation_dir]/django/conf/global-settings.py [http://www.miniwebtool.com/django-secret-key-generator/](http://www.miniwebtool.com/django-secret-key-generator/)

我的安装在 /usr/local/lib/python2.7/dist-packages/django

嗯，萨达希夫。

# activemq - 配置双工连接器以与 Apollo Broker 链接

> ID：15030854
> 
> 赞同：0
> 
> 时间：2013-02-22T18:31:56.943
> 
> 标签：activemq

我有一个配置为单块服务器的 Apollo 代理。现在我想配置一个链接到 Apollo 代理并启用双向消息传播的 ActiveMQ 代理。也就是说，我希望 Apollo 代理和 ActiveMQ 代理同时作为消费者和生产者工作。

ActiveMQ 代理上的此网络连接器配置是否符合我的要求？

```
 <networkConnectors>
    <networkConnector name="linkToApolloBroker"
       uri="static:(stomp://apollo_broker_ip:61000)"
       networkTTL="3"
       duplex="true" />
    </networkConnectors>
    <persistenceAdapter>
    <kahaDB directory="${activemq.data}/dynamic-broker1/kahadb"/>
    </persistenceAdapter>
    ...

    <transportConnectors>
        <transportConnector name="stomp" uri="stomp://0.0.0.0:61613"/>
    </transportConnectors> 
```

实际上，我需要 Apollo 为 Web 提供服务，同时将消息传递给 ActiveMQ 代理。如果我有 2 个经纪人互相交谈，他们的本地客户可以直接访问本地持久队列，并且在很大程度上不受网络波动的影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:04:28.507

ActiveMQ 和 Apollo 之间的代理网络配置具有互操作性。由于 Apollo 确实支持 openwire，因此您可以使用 ActiveMQ 的 JMS Bridge 功能配置两者之间的桥接。您的配置将不起作用。

查看[JMS 到 JMS 桥接](http://activemq.apache.org/jms-to-jms-bridge.html)文档。

[Apache Camel](http://camel.apache.org/)也是您的问题的潜在解决方案。您可能可以创建一个执行您想要的骆驼路线。

# java - java jar文件读取图像文件

> ID：15030855
> 
> 赞同：0
> 
> 时间：2013-02-22T18:32:01.267
> 
> 标签：java, spring, email, embedded-resource

我有独立的应用程序，它有一个发送电子邮件的模块。此应用程序打包为包含所有资源文件（包括图像）的可执行 JAR。

我正在使用 spring 发送电子邮件，其中包含以下内联代码：

Spring 代码正在使用***org.springframework.core.io.FileSystemResource***

```
//IN-LINE ATTCHEMENTS
                if (null != msg.getInlineAttachments() && msg.getInlineAttachments().size() > 0) {
                    for (Map.Entry<String, File> e : msg.getInlineAttachments().entrySet()) {
                        if (log.isTraceEnabled()) {
                            log.trace("Conntent-ID:" + e.getKey() + ", Resource:" + e.getValue());
                        }
                        try {
                            helper.addInline(e.getKey(), new FileSystemResource(e.getValue()));
                        } catch (Exception e1) {
                            log.error(e1);
                        }
                    }
                } 
```

使用以下代码将文件图像传递给上述代码：

```
 ClassPathResource res = new ClassPathResource("./images/" + name);
    if (log.isTraceEnabled()) {
        log.trace(res.getFile().getAbsolutePath());
    }
    file = res.getFile(); 
```

**注意：** 应用程序在eclipse的开发环境中执行时工作正常，因为它是分解格式，非jar。

**例外：**

```
 java.io.FileNotFoundException: class path resource [images/app_logo.png] 
cannot be resolved to absolute file path because it does not reside in the file system:
 jar:file:/C:/TEMP/app-1.0/app-1.0.jar!/images/app_logo.png 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:44:41.833

您需要将图像作为流而不是文件来处理。文件是仅在文件系统中有效的概念，但您正在尝试访问不是文件系统的 Jar 内部的某些内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:22:57.787

Only option left out is copy image files into temp folder, and reference from there...

# java - Logcat 将打印多少字符串有限制吗？

> ID：15030856
> 
> 赞同：3
> 
> 时间：2013-02-22T18:32:03.510
> 
> 标签：java, android, android-logcat

我试图通过将结果打印到 logcat 来确定我的代码是否正在拉取整个 RSS 提要，但它似乎只显示了上述字符串的大部分内容。所以我想弄清楚代码是否有问题，或者 logcat 是否对大字符串有限制。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T18:37:29.940

我相信它将字符串限制在 1000 个字符上。您可以拆分字符串，然后将其逐个记录，如下所示：

```
int maxLogStringSize = 1000;
for(int i = 0; i <= veryLongString.length() / maxLogStringSize; i++) {
    int start = i * maxLogStringSize;
    int end = (i+1) * maxLogStringSize;
    end = end > veryLongString.length() ? veryLongString.length() : end;
    Log.v(TAG, veryLongString.substring(start, end));
} 
```

希望这可以帮助。

# phantomjs - phantomjs：如何使 fs.open 的行为与要求相同，对于路径

> ID：15030861
> 
> 赞同：1
> 
> 时间：2013-02-22T18:32:20.380
> 
> 标签：phantomjs

`require()`基于脚本路径工作。`fs.open()`适用于调用（当前 shell）路径。

假设我有树：

```
dirA/
dirA/dirB/
dirA/dirB/dirC/
dirA/dirB/dirC/test.js
dirA/dirB/dirC2/include_me.js
dirA/dirB/dirC2/open_me.js 
```

和内容`test.js`：

```
var myMod = require('../dirC2/include_me.js');
var fs = require('fs');
fs.open('../dirC2/open_me.js') 
```

无论我执行`phantomjs $PATH/test.js`require 时的当前路径如何，都会成功，并且 fs.open 将失败（除非`$PATH`is `dirC`）

有什么办法可以让`fs.open()`行为表现得像`require()`？

我在想类似的事情，`fs.open( phantomjs.getScriptPath() + '../dirC2/open_me.js' );` 但我的 searchfoo 没有找到任何东西来填充`getScriptPath`那里的虚构方法。

* * *

编辑：在这里发布我正在使用的解决方法，以防答案为“否”。

```
/**
 * Opens a file relative to the script path.
 * this solves an inconsistency between require() and fs.open()
*/
exports.getScriptPath = function( newPath ){
    var script, scriptPath;
    script = exports.system.args[0];
    scriptPath = script.replace(/\/[^\/]+$/, '') // removes everything from 
    //                                              the last "/" until the end of
    //                                              the line, non-greedy
    return scriptPath + '/';
} 
```

这用于我拥有的实用程序模块中。它还假设您正在调用脚本（如果您在交互式 phantomjs 会话中使用所述模块，则无法正常工作）和 unix 样式路径。如果您使用的是 Windows，只需添加`\`到正则表达式。然后它的使用如下：

```
filehandle = exports.fs.open( exports.getScriptPath() + '../dirC2/open_me.js', 'r' ); 
```

# android - 为什么 KILL_BACKGROUND_PROCESSES 不起作用？

> ID：15030863
> 
> 赞同：3
> 
> 时间：2013-02-22T18:32:22.550
> 
> 标签：android, kill-process

在 AndroidManifest.xml 中，我有这个权限：

```
<user-permission android:name="android.permission.KILL_BACKGROUND_PROCESSES" /> 
```

但我仍然收到错误消息：

```
Permission Denial: killBackgroundProcesses() from ... requires android.permission.KILL_BACKGROUND_PROCESSES 
```

此方法是从以下位置调用的：

```
 ActivityManager am = (ActivityManager)getSystemService(Context.ACTIVITY_SERVICE);
    final List<RunningAppProcessInfo> runningProcesses = am.getRunningAppProcesses();
    for(RunningAppProcessInfo runningProcess : runningProcesses) {
        if(runningProcess.processName.equals("com.example.nihao")) {
            Log.v("Hello", "kill process "+runningProcess.pid);
            //android.os.Process.killProcess(runningProcess.pid);
            am.killBackgroundProcesses("com.example.nihao");
        }
    } 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-22T18:35:15.897

你有错别字，`user-permission`应该是`uses-permission`。

# coding-style - 每班少于 200 loc 真的可行吗？

> ID：15030866
> 
> 赞同：0
> 
> 时间：2013-02-22T18:32:27.010
> 
> 标签：coding-style

我参加过不止一场讲座，我们被告知类不应超过 200 行代码。

然而，我有很多项目的类有多达 500 行甚至更多的代码。通常，这些类看起来就像它们一样有意义，因为这些类中的所有功能似乎都属于一起。

我的问题是，尝试针对较小的课程是否真的有意义（在大多数情况下，总是有例外），或者这只是软件开发中的一厢情愿，在大型项目中并不总是可行（甚至是合理的）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:40:11.283

这实际上取决于实现和领域。如果可以，您应该始终尝试重构代码并将其组织成最简单的布局。精简接口，使用[Chesire Cat](http://en.wikipedia.org/wiki/Opaque_pointer)或[Builder Pattern](http://en.wikipedia.org/wiki/Builder_pattern)等模式实现。有时您需要在一个类中包含大量代码，但这是一个很好的“经验法则”，即如果看起来代码太多，至少花*一些时间*考虑是否可以对其进行重构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:35:30.203

只需将每个类视为现实生活中的对象表示。因此，如果对象很复杂，则该类将有更多代码。不太复杂（小对象）将有更少的代码。

您可以尝试将对象拆分为单独的组件或将常见的东西取出到父类。但是，这总是有限制的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:37:15.777

应该减少包含大量代码的单个方法，以提高可读性和理解力，但我倾向于说，只要类本身包含的代码合适，那么被包含就可以了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T15:59:05.803

用 分析firefox和chromium的源码后`cloc`，得到如下结果：

```
---------------------------------------------------------------------------
Project   Language    files       blank     comment        code    loc/file
---------------------------------------------------------------------------
firefox   C++          5987      417603      318973     2156414         360
chromium  C++          3381      140033      128591      737553         218 
```

我使用了 firefox 20.0 和 chromium 4.0.249.0 的源代码。在每个项目中都有很多编程语言，我忽略了除了 C++ 部分之外的所有语言。

我看到两个项目的每个文件的平均代码行数都超过 200 行。这意味着很多文件可能有 200 多个 loc，因为肯定也有很多小文件（头文件和源文件甚至单独计算）。

我绝对知道我的研究并不是我的主张的真正依据，但是在分别对不同的源文件进行了一些检查之后，我发现有相当多的文件有很多超过 200 loc。

为了回答我自己的问题，我想说虽然人们应该总是尝试有小类，但经常存在将类拆分成更小的类以减少每个类的 loc 使项目比相反更复杂的情况。

# php - php语言文件静态数组——utf8编码

> ID：15030875
> 
> 赞同：-1
> 
> 时间：2013-02-22T18:32:50.850
> 
> 标签：php, encoding, utf-8

在一个网站上，我使用如下所示的语言文件：

```
<?php
header('Content-Type: text/html; charset=utf-8');

function lang($phrase){
    static $lang = array(

        //MENU-TOP
        'PHRASE_1' => 'Kezdőlap'

    );

    return $lang[$phrase];
}

?> 
```

并在网站上调用正确的翻译

```
<?php echo lang('PHRASE_1'); ?> 
```

我调用翻译的网站是 UTF-8 格式，来自数据库的其他短语正在正确显示。但是，语言文件中的短语已损坏（？字符等）。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:38:23.103

那么您的语言文件编码不正确。

检查您的“另存为”对话框，这是大多数 IDE 和文本编辑器中的设置所在。

# haskell - Excel中的Haskell

> ID：15030876
> 
> 赞同：11
> 
> 时间：2013-02-22T18:32:51.793
> 
> 标签：haskell

我看到一些消息来源随便提到*“Excel 电子表格中的 Haskell”*的想法——好像这是每个人都熟悉和知道的东西。

这对我来说当然是新闻。这个*想法*有明显的吸引力——Haskell 非常适合这种事情。但是有没有人真正让这个工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T18:42:31.940

David Wakeling 的这篇论文讨论了将标准电子表格应用程序 (Excel) 与标准功能语言 (Haskell) 相结合：[http ://dl.acm.org/citation.cfm?id=1194878](http://dl.acm.org/citation.cfm?id=1194878)

从摘要：

> 函数式编程社区对电子表格表现出一定的兴趣，但令人惊讶的是，似乎没有人考虑过让标准电子表格（如 Excel）与标准函数式编程语言（如 Haskell）一起工作。在本文中，我们展示了一种可以做到这一点的方法。我们希望通过这样做，我们可以让电子表格程序员尝试函数式编程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T18:43:20.703

它通常被称为“**作为**excel 电子表格的 Haskell”——这是对函数式声明性语言如何工作的隐喻：定义数据关系，而不是流程。

（例如[http://www.haskell.org/haskellwiki/Introduction#What_is_functional_programming.3F](http://www.haskell.org/haskellwiki/Introduction#What_is_functional_programming.3F)）

# angularjs - Angular.js：ng-hide 中的内联表达式

> ID：15030879
> 
> 赞同：0
> 
> 时间：2013-02-22T18:33:05.313
> 
> 标签：angularjs, visibility

我想控制 ng-hide 而不必在控制器中编写专用方法。就像是：

```
<div ng-hide="session.filter==''">{{session.filter}}</div> 
```

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:43:09.580

是的，而且很容易验证，只需添加一个[E2E 测试](http://docs.angularjs.org/guide/dev_guide.e2e-testing)并尝试一下，这将比发布问题并等待答案更快。另外，您将改进您的测试套件:)

# vim - 如何在 vim 中从 Shift-Tab 映射到 Control-I？

> ID：15030885
> 
> 赞同：0
> 
> 时间：2013-02-22T18:33:30.720
> 
> 标签：vim

我想用来`Shift``Tab`做相反的`Tab`事情，这样我就可以在跳转列表中前后移动。

我不能只映射`<Shift>^I`到`^O`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:33:30.720

正确的映射是：

`:nnoremap <S-Tab> <c-o>`

# jquery-plugins - Primefaces 和 jQuery blockui 插件 css 冲突

> ID：15030887
> 
> 赞同：0
> 
> 时间：2013-02-22T18:33:33.523
> 
> 标签：jquery-plugins, primefaces, jquery-blockui

我正在使用 Primefaces 3.5 和 jQuery BlockUI 插件。在我的代码中，我只使用 jQuery blockui 插件，它按预期工作。我看到的问题是我为 block() 方法指定的 css 没有应用于阻塞对话框。我可以修改消息，但不能修改 CSS。一旦我为默认设置“$.blockUI.defaults={ css:{...}}”指定了 css，显示的对话框就会移动到页面的左上角，但仍然没有应用 css。

我尝试将 css 指定为尽可能接近阻塞代码行（即当我调用 block() 时），但仍然没有成功。知道为什么会这样。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:16:49.873

尝试像这样修改 blockUI css：

```
$.blockUI.defaults.css = { ... }; 
```

# postgresql - 根据传递给 PostgreSQL 函数的列名数组获取行值

> ID：15030890
> 
> 赞同：1
> 
> 时间：2013-02-22T18:33:43.643
> 
> 标签：postgresql

我正在尝试在 PostgreSQL 9.2 中设置全文搜索。我创建了一个新表来保存我想要搜索的内容（以便我可以搜索许多不同类型的项目），如下所示：

```
CREATE TABLE search (
    target_id bigint PRIMARY KEY,
    target_type text,
    fts tsvector
);

CREATE INDEX search_fts ON search USING gin(fts); 
```

每次将新项目插入（或更新）到我要搜索的各种表之一时，它都应该自动添加到`search`表中。假设我的表如下所示：

```
CREATE TABLE item (id bigint PRIMARY KEY, name text NOT NULL, description text); 
```

我创建了一个触发器，传入我希望能够搜索的列名：

```
CREATE TRIGGER insert_item_search BEFORE INSERT
    ON item FOR EACH ROW EXECUTE PROCEDURE
    insert_search('{name, description}'::text[]); 
```

然后创建了一个新函数`insert_search`：

```
CREATE OR REPLACE FUNCTION insert_search(cols text[]) RETURNS TRIGGER AS $$
BEGIN
    INSERT INTO search (target_id, target_type, fts) VALUES (
      NEW.id, TG_TABLE_NAME, to_tsvector('english', 'foo')
    );
    RETURN NEW;
END;
$$ LANGUAGE PLPGSQL; 
```

我的问题是，如何根据`cols`to传入表值`to_tsvector`？现在，该函数被调用并正确插入`id`and `type`，但我不知道根据`cols`参数动态获取其他值的正确方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T19:08:49.100

首先，要传递参数，只需直接发送它们：

```
CREATE TRIGGER insert_item_search BEFORE INSERT
    ON item FOR EACH ROW EXECUTE PROCEDURE
    insert_search('name', 'description'); 
```

而且，从 PL/pgSQL 你会得到这些参数作为一个数组，称为`TG_ARGV`. 但是，问题是 PL/pgSQL 无法`NEW`根据名称从记录中获取值。为此，您可以使用允许您这样做的语言（如 PL/python 或 PL/perl）或使用[`hstore`扩展名](http://www.postgresql.org/docs/9.2/static/hstore.html).

我会坚持使用最后一个并使用`hstore`（除非您已经使用其他语言之一来创建函数）：

```
CREATE OR REPLACE FUNCTION insert_search() RETURNS TRIGGER AS $$
DECLARE
        v_new hstore;
BEGIN
        v_new = hstore(NEW); -- convert the record to hstore
        FOR i IN 0..(TG_NARGS-1) LOOP
                INSERT INTO search (target_id, target_type, fts) VALUES (
                  NEW.id, TG_TABLE_NAME, to_tsvector('english', v_new -> TG_ARGV[i])
                );
        END LOOP;
    RETURN NEW;
END;
$$ LANGUAGE PLPGSQL; 
```

正如您在上面看到的，我使用`hstore`' 运算符`->`根据名称 (on `TG_ARGV[i]`) 获取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:44:41.067

您可以使用变量访问触发器定义中指定的参数`TG_ARGV`。您可以在[此处](http://www.postgresql.org/docs/9.2/static/plpgsql-trigger.html)找到相关文档。 `TG_ARGV`是一个由基于 0 的索引访问的数组。所以它会像`TG_ARGV[0]`,`TG_ARGV[1]`等等。

# html - 有没有办法用纯 css 即使用类来设置复选框或单选按钮的样式？

> ID：15030893
> 
> 赞同：1
> 
> 时间：2013-02-22T18:33:49.547
> 
> 标签：html, css

有没有办法用纯 css 设置复选框或单选按钮的样式，即没有 jQuery 的 class="newstyle"？我一直在网上搜索，我想知道是否有一种方法可以仅使用 class="" 属性来实现这一点。这是一个例子：[http ://www.filamentgroup.com/examples/customInput/](http://www.filamentgroup.com/examples/customInput/)

编辑：我目前实现这一目标的方式：

```
<div class="styled-checkbox">
 <input type="checkbox" id="checkbox1" value="1" />
 <label for="checkbox1"><span></span>Test</label>
</div> 
```

但是，不确定这是否是实现此目的的正确方法，从兼容性的角度来看，此外，div 默认需要预设宽度，如果 auto 它将填充 DOM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:34:00.323

只用一个类就可以达到预期的效果，但是说为复选框设置样式是错误的，因为它不能直接通过 CSS 设置样式。这是因为组件是由操作系统控制的，而不是由浏览器本身控制的。

解决方法是使用一组普通元素来模拟复选框的外观。

在您提供的链接的具体示例中，复选框完全隐藏，因为它位于标签 via 后面`z-index`，该标签的背景包含改进版本的复选框图形。结合事实，如果您对复选框和标签使用`id`\`for` 属性对，当您单击标签（显示复选框的图像）时，复选框将更改它的选中/未选中状态。

# java - 获取内角角度

> ID：15030894
> 
> 赞同：0
> 
> 时间：2013-02-22T18:33:52.487
> 
> 标签：java

我有四个点可以形成凹四边形：

一(3, 11)

b(11, 9)

c(18 , 10)

d(8 , 1)

![在此处输入图像描述](../Images/ccdaa6c17b2de9607301c25f2ed3c77b.png)

现在我想以度为单位获得（b）角的内角。注意：内角大于180度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:01:34.240

最安全的方法是使用内积和叉积，可以使用两个向量（a->b，b->c）的4个点并使用内积公式计算内积

```
<ab,bc> = |ab|*|bc|* cos (abc)
cos(abc) =  |ab|*|bc| / <ab,bc> 
```

这不足以唯一地分配天使，因为一个角度和它的补具有相同的cos但有不同的sin，这就是叉积解决问题的地方。

```
ab * bc = |ab|*|bc| * sin(abc) 
```

左边部分可以使用终点坐标计算，因此您可以计算 sin，计算 sin 和 cos 后，您可以适当地指定天使。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:41:20.517

d 点在这里只是分散注意力。考虑 (abc) 三角形：

*   从坐标中很容易确定ab、bc和ca的长度。
*   然后，您可以用 sin、cos 或 tan 确定 (ab, bc) 内角
*   您寻找的角度是 360 减去 (ab, bc) 内角。

# ruby-on-rails - 通过 JSON 进行的嵌套模型验证失败

> ID：15030901
> 
> 赞同：2
> 
> 时间：2013-02-22T18:34:13.450
> 
> 标签：ruby-on-rails, json, dart

我创建了一种通过 JSON 验证嵌套模型的方法，但它给了我以下错误：

```
ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes:  table_fields): 
```

这是我在 SO 的其他问题中看到的错误，但没有一个有助于解决我的问题。按照我的方法和模型，我不知道该怎么做：

**表（型号）：**

```
class Table < ActiveRecord::Base
  attr_accessible :x, :y, :name, :table_fields_attributes

  validates :name, :presence => :true

  has_many :table_fields
  accepts_nested_attributes_for :table_fields, :allow_destroy => true
end 
```

**表字段（模型）**

```
class TableField < ActiveRecord::Base
  attr_accessible :foreign_key, :name, :primary_key, :data_type, :table_id
  belongs_to :table

  validates :name, :presence => :true
end 
```

**table_controller 中的验证方法**

```
 # POST /table.json/validate
  def validate
    @table = Table.new(params[:table])

    respond_to do |format|
      if @table.valid? == false
        format.json { render json: @table.errors, status: :unprocessable_entity }
      else
        format.json { head :no_content }
      end
    end
  end 
```

**routes.rb 的一部分**

```
 resources :tables do
    resources :table_fields
  end
  match "/table.json/validate" => "tables#validate" 
```

**我发送的 JSON**

```
{"table":{"y":5,"name":"","x":5,"table_fields":[{"table_field":{"data_type":"CHAR","primary_key":true,"foreign_key":false,"name":""}}]}} 
```

**涉及 HttpRequest ( [Dart](http://www.dartlang.org/) )的代码**

```
 void validate(Table table)
  {
    HttpRequest req = new HttpRequest(); // create a new XHR
    String url = "/table.json/validate";
    req.open("POST", url); // Use POST http method to send data in the next call]
    req.setRequestHeader("Content-Type", "application/json");
    String tableJson = table.toJson();
    req.send(tableJson); // kick off the request to the server
  } 
```

**班级表**

```
class Table{
  int tableId;
  List<TableField> tableFields;
  String name;

  num x;
  num y;
  num width;
  num height;

  Table(String name, num x, num y, List<TableField> tableFields)  {
    this.name = name;
    this.x = x;
    this.y = y;
    this.tableFields = tableFields;

  }

  toJson()
  {
    Map map = new Map();
    map["table"] = new Map();
    map["table"]["name"] = this.name;
    map["table"]["x"] = this.x;
    map["table"]["y"] = this.y;

    List<Map> mappedFields = new List<Map>();
    Map fieldMap = new Map();
    fieldMap["table_field"] = new Map();

    //Testing with 1 entry only
    TableField tableField = tableFields[0];

     fieldMap["table_field"]["name"] = tableField.name;
     fieldMap["table_field"]["data_type"] = tableField.dataType;
     fieldMap["table_field"]["primary_key"] = tableField.primaryKey;
     fieldMap["table_field"]["foreign_key"] = tableField.foreignKey;
     mappedFields.add(fieldMap);

    map["table"]["table_fields_attributes"] = mappedFields;

    return stringify(map);

  }

} 
```

**完整的错误堆栈**

```
Started POST "/table.json/validate" for 127.0.0.1 at 2013-02-22 15:17:00 -0300
Processing by TablesController#validate as */*
  Parameters: {"table"=>{"y"=>5, "name"=>"", "x"=>5, "table_fields"=>[{"table_field"=>{"data_type"=>"444", "primary_key"=>true, "foreign_key"=>false, "name"=>""}}]}}
WARNING: Can't verify CSRF token authenticity
Completed 500 Internal Server Error in 2260ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: table_fields):
  app/controllers/tables_controller.rb:88:in `new'
  app/controllers/tables_controller.rb:88:in `validate' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T20:44:15.870

将 attr 可访问声明更改为使用 table_fields 而不是 table_fields_attributes 或更改 json 以发送 table_fields_attributes 元素而不是 table_fields

```
attr_accessible :x, :y, :name, :table_fields_attributes 
```

或者

```
{"table":{"y":5,"name":"","x":5,"table_fields_attributes":[{"table_field":{"data_type":"CHAR","primary_key":true,"foreign_key":false,"name":""}}]}} 
```

要么应该工作

# ios - 手机锁定时如何检测轻按手势

> ID：15030903
> 
> 赞同：0
> 
> 时间：2013-02-22T18:34:18.027
> 
> 标签：ios, objective-c, lockscreen, uitapgesturerecognizer

苹果的默认闹钟应用程序会向我显示一个贪睡按钮，即使手机处于锁定屏幕并且我可以按下它，所以我想要创建一个更大的按钮而不是一个更大的按钮，或者当闹钟响起时会检测到多点触控的东西，是否可以？可以自定义默认锁屏吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:37:15.903

据我所知，您可以在锁定屏幕中获得的唯一内容是推送或本地通知。这具有在某些文本旁边显示应用程序图标的默认功能。然后，您可以滑动图标以启动应用程序，其中包含您在创建通知时附加到通知的任何额外数据

# clojure - 从 Clojure 中的数据库打印表

> ID：15030904
> 
> 赞同：1
> 
> 时间：2013-02-22T18:34:18.460
> 
> 标签：clojure

我的目标是将我的表格打印得尽可能接近，每个列之间有均匀的空格。

```
(defn PrintTable [tableName]
  "prints table in clear format"
  (let [tableRef (get (deref dataBase) tableName) ; get refrence for table
        keyList (keys @tableRef)] ; get key list of table
    (doseq [tableKeys (range (count keyList))] ; print the keys of the table
      (let [key (nth (keys @tableRef) tableKeys)]
        (print key "\t|"))
    )
    (println)
    (doseq [rows (range (count @(tableRef (nth (keys @tableRef) 0))))] ; print for each rows all the values
      (doseq [cols (range (count keyList))]
        (let [key (nth (keys @tableRef) cols)]
          (print (@(tableRef key) rows) "\t|")
        )
      )
      (println)
    )
  )
  (println)
) 
```

我试过使用标签，但这是我得到的结果：

```
P_Id    |LastName   |FirstName  |Address    |City   |
1   |Darmon     |Gilad  |ishayahu   |Haifa  |
2   |SM     |Shiran     |erez   |RamatIshay     |

D_Id    |Name   |OwnerLastName  |OwnerFirstName     |
a   |Bono   |Darmon     |Gilad  |
b   |Bony   |SM     |Shiran     | 
```

对更好和对齐的打印有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:49:28.987

用于`format`使 cols 对齐：

```
user> (println (format "%20s %20s %20s\n%20s %20s %20s" 
                 "short" "medium" "reallylong" 
                 "reallylong" "medium" "short"))

               short               medium           reallylong
          reallylong               medium                short
nil
user> 
```

或左对齐`%-20s`

```
user> (println (format "%-20s %-20s %-20s\n%-20s %-20s %-20s" 
                        "short" "medium" "reallylong" 
                        "reallylong" "medium" "short")) 

short                medium               reallylong 
reallylong           medium               short 
nil 
user> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-18T11:20:29.740

这可能会有所帮助：

[http://clojuredocs.org/clojure_core/clojure.pprint/print-table](http://clojuredocs.org/clojure_core/clojure.pprint/print-table)

阿尔法 - 可能会发生变化。在文本表中打印一组地图。打印表标题 ks，然后每行输出一行，对应于 ks 中的键。如果未指定 ks，则使用行中第一项的键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T19:40:55.110

```
(defn print-table [res]
  (let [headers (map name (keys (first res)))
        table (concat [headers] (map vals res))
        trans-table (apply map vector table)
        cols-width (map #(apply max (map (comp count str) %))
                        trans-table)]
    (doseq [row table]
      (println
       (apply format
              (str "|" (apply str (str/join "|" (map #(str "%-" % "s")
                                                     cols-width)))
                   "|")
              row)))))

(print-table res)
=> |P_Id|LastName|FirstName|Address |City      |
   |1   |Darmon  |Gilad    |ishayahu|Haifa     |
   |2   |SM      |Shiran   |erez    |RamatIshay| 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-10T13:15:25.060

我习惯`print-table`了`with-out-str`

```
user=> (def res [{:P_Id 1 :LastName "Darmon" :FirstName "Gilad"} {:P_Id 2 :LastName "SM" :FirstName "Shiran"}])
#'user/res
user=> (printf "res=%s" (with-out-str (clojure.pprint/print-table res)))
res=
| :P_Id | :LastName | :FirstName |
|-------+-----------+------------|
|     1 |    Darmon |      Gilad |
|     2 |        SM |     Shiran |
nil 
```

# javascript - 如何用新的 Blob 构造函数替换已弃用的 BlobBuilder？

> ID：15030906
> 
> 赞同：5
> 
> 时间：2013-02-22T18:34:23.453
> 
> 标签：javascript, blobs

由于 Blobbuilder 已被弃用，并且我最近决定使用新的面部识别 API，因此我很难切换到“blob”。

```
function dataURItoBlob(dataURI, callback) {
        // convert base64 to raw binary data held in a string
        // doesn't handle URLEncoded DataURIs

        var byteString;
        if (dataURI.split(',')[0].indexOf('base64') >= 0) {
            byteString = atob(dataURI.split(',')[1]);
        } else {
            byteString = unescape(dataURI.split(',')[1]);
        }

        // separate out the mime component
        var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];

        // write the bytes of the string to an ArrayBuffer
        var ab = new ArrayBuffer(byteString.length);
        var ia = new Uint8Array(ab);
        for (var i = 0; i < byteString.length; i++) {
            ia[i] = byteString.charCodeAt(i);
        }

        // write the ArrayBuffer to a blob, and you're done
        var BlobBuilder = window.WebKitBlobBuilder || window.MozBlobBuilder;
        var bb = new BlobBuilder();
        bb.append(ab);
        return bb.getBlob(mimeString);
} 
```

我尝试将其切换为：

```
 // write the ArrayBuffer to a blob, and you're done
        var Blob = window.URL || window.webkitURL;
        var bb = new Blob();

        /*var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.href = window.URL.createObjectURL(blob);
        document.body.appendChild(link);*/

        /*var BlobBuilder = window.WebKitBlobBuilder || window.MozBlobBuilder;
        var bb = new BlobBuilder();
        bb.append(ab);*/
        return bb.getBlob(mimeString);
} 
```

但我不断进入`Uncaught TypeError: Object #<URL> has no method 'getBlob'`控制台。不知道我错过了什么。如果我尝试使用，`bb.append(ab);`我会`Uncaught TypeError: Object #<Blob> has no method 'append'`进入控制台。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-22T18:41:23.533

从`BlobBuilder`to切换`Blob`非常简单。尝试以下向后兼容的代码（`catch`块中的内容是您的原始代码）：

```
...
    try {
        return new Blob([ab], {type: mimeString});
    } catch (e) {
        // The BlobBuilder API has been deprecated in favour of Blob, but older
        // browsers don't know about the Blob constructor
        // IE10 also supports BlobBuilder, but since the `Blob` constructor
        //  also works, there's no need to add `MSBlobBuilder`.
        var BlobBuilder = window.WebKitBlobBuilder || window.MozBlobBuilder;
        var bb = new BlobBuilder();
        bb.append(ab);
        return bb.getBlob(mimeString);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-14T14:07:36.300

```
Blob = (function() {
  var nativeBlob = Blob;

  // Add unprefixed slice() method.
  if (Blob.prototype.webkitSlice) {
    Blob.prototype.slice = Blob.prototype.webkitSlice;  
  }
  else if (Blob.prototype.mozSlice) {
    Blob.prototype.slice = Blob.prototype.mozSlice;  
  }

  // Temporarily replace Blob() constructor with one that checks support.
  return function(parts, properties) {
    try {
      // Restore native Blob() constructor, so this check is only evaluated once.
      Blob = nativeBlob;
      return new Blob(parts || [], properties || {});
    }
    catch (e) {
      // If construction fails provide one that uses BlobBuilder.
      Blob = function (parts, properties) {
        var bb = new (WebKitBlobBuilder || MozBlobBuilder), i;
        for (i in parts) {
          bb.append(parts[i]);
        }
        return bb.getBlob(properties && properties.type ? properties.type : undefined);
      };
    }        
  };
}()); 
```

在您打算使用 Blob 之前将其包含在内，您将能够在仅支持已弃用的 BlobBuilder 的浏览器中使用 Blob 构造函数。

# r - 在数据框中随机采样一定百分比的行

> ID：15030910
> 
> 赞同：20
> 
> 时间：2013-02-22T18:34:37.337
> 
> 标签：r, row, subset, random-sample

与[这个](https://stackoverflow.com/questions/9628152/random-sample-of-rows-from-subset-of-an-r-dataframe)问题有关。

```
gender <- c("F", "M", "M", "F", "F", "M", "F", "F")
age    <- c(23, 25, 27, 29, 31, 33, 35, 37)
mydf <- data.frame(gender, age) 

mydf[ sample( which(mydf$gender=='F'), 3 ), ] 
```

我怎样才能随机选择 20% 的带有“F”的行，而不是选择多行（在上述情况下为 3）？那么在带有“F”的五行中，我如何随机抽取其中 20% 的行。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2017-04-07T03:31:21.173

您可以使用包中`sample_frac()`的功能`dplyr`。

例如，如果您想在每组中取样 20%：

```
mydf %>% sample_frac(.2) 
```

如果您想在每个性别组中抽取 20% 的样本：

```
mydf %>% group_by(gender) %>% sample_frac(.2) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-22T18:40:57.587

这个怎么样：

```
mydf[ sample( which(mydf$gender=='F'), round(0.2*length(which(mydf$gender=='F')))), ] 
```

其中 0.2 是您的 20% 并且`length(which(mydf$gender=='F'))`是总行数`F`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T07:46:00.020

自我推销警报。我编写了一个函数，可以方便地进行分层抽样，并且在抽样之前，我已经包含了一个选项，可以从分组变量中提取级别。

该函数被调用`stratified`并且可以通过以下方式使用：

```
set.seed(1)
# Proportional sample
stratified(mydf, group="gender", size=.2, select=list(gender = "F"))
#   gender age
# 4      F  29
# Fixed-size sampling
stratified(mydf, group="gender", size=2, select=list(gender = "F"))
#   gender age
# 4      F  29
# 5      F  31 
```

您可以指定多个组（例如，如果您的数据框包含一个“状态”变量，并且您想按您指定的“状态”和“性别”进行分组`group = c("state", "gender")`）。您还可以指定多个“选择”参数（例如，如果您只想要来自加利福尼亚州和德克萨斯州的女性受访者，并且您的“州”变量使用两个字母的州缩写，您可以指定`select = list(gender = "F", state = c("CA", "TX"))`）。

该功能本身可以在[这里](https://github.com/mrdwab/mrdwabmisc/blob/master/R/stratified.R)找到，或者您可以使用“devtools”包下载并安装包（这使您可以方便地访问帮助页面和示例），`install_github`如下所示：

```
# install.packages("devtools")
library(devtools)
install_github("mrdwabmisc", "mrdwab") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-22T18:41:37.833

要采样 20%，您可以使用它来获取样本大小：

```
n = round(0.2 * nrow(mydf[mydf$gender == "F",])) 
```

# responsive-design - 流体图像上的翻转淡入淡出

> ID：15030913
> 
> 赞同：0
> 
> 时间：2013-02-22T18:34:45.863
> 
> 标签：responsive-design, fluid-layout, rollover-effect

我正在创建一个响应式站点，其中包含一个由流体图像组成的画廊。为此，我必须使用 css **img {max-width: 100%;}**。我还想要悬停时的淡入淡出效果。

有人对此有解决方案吗？

到目前为止，我尝试过的所有解决方案都不适用于 css **img {max-width: 100%;}**

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:51:17.580

定义图像宽度及其最大宽度。它必须以像素或 em 为单位。您不需要在 %'s 中保留 max-width 或 min-width。浏览器从其原始宽度或高度值呈现。作为

这是例如。

```
img{
    width:50%;
    height:30%;
    max-width:300px;
    min-height:100px;
    } 
```

并且每个图像都可以灵活地使用视口。

# highcharts - Highcharts.js - 同一页面上有多个主题？

> ID：15030914
> 
> 赞同：8
> 
> 时间：2013-02-22T18:34:54.840
> 
> 标签：highcharts

我在一页上有大约 6 个图表，其中一个需要与其他五个不同的主题。我有单独工作的主题，但初始化的第二个主题应用于所有图表。

有没有办法指定图表使用的主题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T20:33:59.590

在阅读了 Ricardo 的评论后，我意识到我只需要将 setOptions() 调用移到 $(document).ready 调用中。

我的代码的一个非常简化的版本：

```
Highcharts.theme1 = {
    chart: {
        borderWidth: 0,
    },
}; 

var chart;
$(document).ready(function() {

    // Apply the theme
    var highchartsOptions = Highcharts.setOptions(Highcharts.theme1);

    // Build the chart
    chart = new Highcharts.Chart({});

});

Highcharts.theme2 = {
    chart: {
        borderWidth: 5,
    },
};

var chart2;
$(document).ready(function() {

    // Apply the theme
    var highchartsOptions = Highcharts.setOptions(Highcharts.theme2);

    // Build the chart
    chart = new Highcharts.Chart({});

}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-15T02:12:39.837

目前的最佳做法是将主题与您的`chart options`：

`chart1 = new Highcharts.Chart(Highcharts.merge(options1, theme1));`

```
var options1 = {
    // options goes here
       chart: {
            renderTo: 'chart1',
            type: 'bar',
        },
        title: {
            text: 'Conversions'
        },
};

var theme1 = {
     // themes goes here
};

var chart1 = new Highcharts.Chart(Highcharts.merge(options1, theme1)); 
```

这样，如果您也需要，您可以为每个图表设置单独的主题

# android - 检查列表是否包含多个值android

> ID：15030921
> 
> 赞同：0
> 
> 时间：2013-02-22T18:35:41.970
> 
> 标签：android

我搜索并发现：[如何检查一个值是否已存在于 Android 的数据库中](https://stackoverflow.com/questions/7820905/how-to-check-if-a-value-already-exists-in-the-database-in-android)。我遇到的问题是吐司从不显示，当输入的值与数据库中已有的值匹配时，数据仍然输入到数据库中。我看过关于使用 UNIQUE 确保数据不重复的帖子，但它不适用于我需要做的事情。我试过 if (entries.contains(checkDuplicates) == false) 和 if (!entries.equals(checkDuplicates))，也得到了相同的结果。我知道这是我想念或不理解的简单事情。有人会帮助我并指出正确的方向吗？

```
 private void saveState() {

    Calendar calendar = Calendar.getInstance();
    SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy");
    eventDate = sdf.format(calendar.getTime());

    String date = eventDate;
    String event = eventTitle.getText().toString();
    String empID = fiveAndTwo.getText().toString();

    /**
     * CRUD Operations
     * */
    // Inserting entries to DB

    // Reading all contacts
    Log.d("Reading: ", "Reading all entries..");

    List<EventEntries> entries = db.getAllEntries();

    for (EventEntries ee : entries) {
        String log = "Id: " + ee.getID() + " Date: " + ee.getDate() + " Event Name: " + ee.getEvent() + " Emp ID: " + ee.getempID();

        // Writing entries to log
        Log.d("Entry: ", log);

    }

    String checkDuplicates =  date + event + empID;

    if (!entries.contains(checkDuplicates)) {

        Log.d("Insert: ", "Inserting ..");

        db.addEntry(new EventEntries(date, event, empID));
        String logEntry = "Date: " + date + " Event Name: " + event + " Emp ID: " + empID;
        Log.d("Entered to DB:", logEntry);

    } else {

        Toast.makeText(this,"Employee has already been scanned for this event.", Toast.LENGTH_SHORT).show();

    }
} 
```

编辑：我让它工作。这是我所做的：

```
 private void saveState() {

    Calendar calendar = Calendar.getInstance();
    SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy");
    eventDate = sdf.format(calendar.getTime());

    String date = eventDate;
    String event = eventTitle.getText().toString();
    String empID = fiveAndTwo.getText().toString();

    /**
     * CRUD Operations
     * */

    // Reading all entries
    Log.d("Reading: ", "Reading all entries..");

    List<EventEntries> entries = db.getAllEntries();

    for (EventEntries ee : entries) {
        String log = "Id: " + ee.getID() + " Date: " + ee.getDate() + " Event Name: " + ee.getEvent() + " Emp ID: " + ee.getempID();

        // Writing entries to log
        Log.d("Entry: ", log);

    }

    EventEntries checkDuplicates = new EventEntries(date, event, empID);

    if (!entries.contains(checkDuplicates)) {

        Toast.makeText(this,"Successfully entered.", Toast.LENGTH_SHORT).show();

        // Inserting entries to DB
        Log.d("Insert: ", "Inserting ..");
        db.addEntry(new EventEntries(date, event, empID));
        String logEntry = "Date: " + date + " Event Name: " + event + " Emp ID: " + empID;
        Log.d("Entered to DB:", logEntry);

    } else  {

        empAlert();

    }
} 
```

这是我添加到 EventEntries 类的内容：

```
 @Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((_date == null) ? 0 : _date.hashCode());
    result = prime * result + ((_empID == null) ? 0 : _empID.hashCode());
    result = prime * result + ((_event == null) ? 0 : _event.hashCode());
    return result;
}

@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    EventEntries other = (EventEntries) obj;
    if (_date == null) {
        if (other._date != null)
            return false;
    } else if (!_date.equals(other._date))
        return false;
    if (_empID == null) {
        if (other._empID != null)
            return false;
    } else if (!_empID.equals(other._empID))
        return false;
    if (_event == null) {
        if (other._event != null)
            return false;
    } else if (!_event.equals(other._event))
        return false;
    return true;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T19:03:20.787

`entries.contains(checkDuplicates)`总是返回 false 因为`entries`它是一个`EventEntries`对象列表并且`checkDuplicates`是一个`String`. 您应该`entries.contains`使用`EventEntries`对象作为参数调用。

还有一件事：

```
// assuming entries is not empty
EventEntries first = entries.get(0);
entries.contains(first);  // --> this is TRUE

// create a dupe of "first"
EventEntries firstDupe = new EventEntries(.....);
entries.contains(firstDupe);  // --> in *general* this is FALSE 
```

一般来说，第二种情况是错误的。`EventEntries`如果在类中重写该`equals`方法以便`first.equals(firstDupe)`返回 true ，则它可以是true。只有这样，第二个示例才会返回 true。

这是一个示例实现：

```
public boolean equals(Object obj) {
    if (obj instanceof EventEntries) {
        EventEntries other = (EventEntries)obj;
        if (date.equals(other.date) && event.equals(other.event)
            && empID == other.empID) {
            return true;
        }
    }
    return false;
} 
```

（根据需要进行调整。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T19:18:12.010

代替：

`String checkDuplicates = date + event + empID;`

和：

`EventEntries checkDuplicates = new EventEntries(date, event, empID);`

# jquery - 使用 jQuery 和媒体查询删除 Img 大小

> ID：15030929
> 
> 赞同：-1
> 
> 时间：2013-02-22T18:36:03.920
> 
> 标签：jquery, image, media-queries

我希望当分辨率小于 980px 时，应该执行下面的代码（从 a 中删除宽度和高度`img`）。代码将如何？谢谢

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
    jQuery.noConflict();
    jQuery(document).ready(function($){

        $('img').each(function(){ 
            $(this).removeAttr('width')
            $(this).removeAttr('height');
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:38:22.930

您可以使用调整大小功能。

```
$(window).resize(function(){
    if( $(this).width() < 980 )
    {
        $('img').each(function(){ 
            $(this).removeAttr('width').removeAttr('height');
        });
    }
}); 
```

并在更大时将它们放回去？

```
$(window).resize(function(){
    if( $(this).width() < 980 )
    {
        $('img').each(function(){ 
            $(this).data("widthheight", { w : $(this).attr("width"), h : $(this).attr("height") });
            $(this).removeAttr('width').removeAttr('height');
        });
    }
    else
    {
         $('img').each(function(){ 
            if( $(this).data("widthheight") )
            {
                $(this).attr('width', $(this).data("widthheight").w)
                       .attr('height', $(this).data("widthheight").h);
             }
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:38:26.750

你可以让它更简洁：

```
jQuery(document).ready(function($){
    $('img').removeProp('width').removeProp('height');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:41:07.437

我想我在[这里](https://stackoverflow.com/questions/2242086/how-to-detect-the-screen-resolution-with-javascript)找到了一个相关的堆栈溢出线程。我假设一旦检测到屏幕分辨率，您将需要编写一个简短的 javascript 函数。

# android - 从联系人中检索手机号码

> ID：15030933
> 
> 赞同：0
> 
> 时间：2013-02-22T18:36:32.960
> 
> 标签：android, contact

我想从联系人中检索手机号码（我想发送短信）。这是我的代码：

```
//Selecting the contact
        Button buttonPickContact = (Button)findViewById(R.id.pickcontact);
        buttonPickContact.setOnClickListener(new Button.OnClickListener(){

            public void onClick(View v) {
                Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
                startActivityForResult(intent, RQS_PICK_CONTACT);
            }});

@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);

        Cursor cursor = null;
        mName.setText(context.getString(R.string.not_available));
        mNumber.setText(context.getString(R.string.not_available));

        if(requestCode == RQS_PICK_CONTACT && resultCode == RESULT_OK && data != null){
            Log.d(TAG, "requestCode, resultCode, data ok"); 
            Uri uri = data.getData(); 
            try{
                String[] projection = new String[] {ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME, ContactsContract.CommonDataKinds.Phone.HAS_PHONE_NUMBER};
//              cursor =  getContentResolver().query(uri, projection, null, null, null);
                cursor =  getContentResolver().query(uri, null, null, null, null);
                cursor.moveToFirst();
                Log.d(TAG, "Trying to retrieve the name and the number"); 
                String name = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                String hasNumber = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.HAS_PHONE_NUMBER)); 

                Log.d(TAG, "hasNumber "+hasNumber); 
                mName.setText(name);

                if(hasNumber.trim().equals("1")){
                    Log.d(TAG, "contact has telephone number"); 
                    //set name and number
                    String phoneNumber = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                    mNumber.setText(phoneNumber);
                }

            }catch(Exception ex){
                CharSequence text = context.getString(R.string.cannot_choose_contact); 
                Toast toast = Toast.makeText(context, text, duration);
                toast.show();
            }
            if(cursor!= null && !cursor.isClosed()){
                cursor.close(); 
            }
        }else{
            CharSequence text = context.getString(R.string.cannot_choose_contact); 
            Toast toast = Toast.makeText(context, text, duration);
            toast.show();
        }
    } 
```

我得到：无法从 CursorWindow 读取第 0 行第 -1 列...

如何获取电话号码 - 我是否尝试从右栏中检索它？

提前感谢您的回答，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:45:18.117

联系人的详细数据包含在与主要联系人本身不同的表格中（有关详细信息，请参阅[联系人 API 指南](http://developer.android.com/guide/topics/providers/contacts-provider.html)）。由于您正在发送短信，因此仅获取具有关联电话号码的联系人可能更有用，因此您不妨直接前往包含电话号码的表格。对于 URI，我使用：

```
CommonDataKinds.Phone.CONTENT_URI 
```

那你就不用担心了`HAS_PHONE_NUMBER`。乍一看，您的其余代码看起来正确或非常接近。如果您想继续您的原始路径，无论如何您都必须对此表进行单独查询，但请提供您最初找到的联系人的 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T22:03:29.603

1.  使用 CursorLoader 进行查询。总是。如果继续在 UI 线程上进行查询，最终会遇到挂起系统并获得 ANR 的情况。
2.  您正在请求用户从联系人表中选择联系人，因此您将返回一个指向联系人中联系人的 URI。
3.  处理此问题的一个技巧是使用 Uri.getLastPathSegment() 从返回的 URI 中去除联系人的 LOOKUP_KEY。然后在 ContactsContract.Data 中搜索 LOOKUP_KEY 和 MIMETYPE 值 CommonDataKinds.Email.CONTENT_ITEM_TYPE。根据您的代码，这将是：

mLookupKey = uri.getLastPathSegment(); 字符串 SELECTION = Data.LOOKUP_KEY + " = ?" + " AND " + Data.MIMETYPE + " = ?"; String[] selectionArgs = { mLookupKey, Email.CONTENT_ITEM_TYPE }; ...

# php - PHP - 基于非因子对数组进行排序:: usort？

> ID：15030934
> 
> 赞同：0
> 
> 时间：2013-02-22T18:36:34.757
> 
> 标签：php, mysql, arrays, object

这是我要完成的工作的一些背景知识。我有一个来自正在显示的 MySQL 查询的数组。我想根据一个因素对数组进行排序。该因子是根据文章发布的时间和收到的投票数内联计算的。像这样的东西：

```
// ... MySQL query here
$votes = $row['0']
$seconds = strtotime($record->news_time)+time();
$sum_total = pow($votes,2) / $seconds; 
```

所以进来的数组看起来像这样：

```
Array (
    [0] => stdClass Object (
        [id] => 13
        [news_title] => Article
        [news_url] => http://website.com/article/14
        [news_root_domain] => website.com
        [news_category] => Business
        [news_submitter] => 2
        [news_time] => 2013-02-18 12:50:02
        [news_points] => 2
    )
    [1] => stdClass Object (
        [id] => 14
        [news_title] => Title
        [news_url] => http://www.website.com/article/2
        [news_root_domain] => www.website.com
        [news_category] => Technology
        [news_submitter] => 1
        [news_time] => 2012-10-02 10:03:22
        [news_points] => 8
    )
) 
```

我想使用我上面提到的因素对上述数组进行排序。这个想法是首先在列表中显示评分最高的文章（使用计算因子），而不是数组进来的默认排序方法。似乎**usort**可能是我最好的选择，但让我知道你们的想法?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:46:03.217

在查询中完成所有操作：

```
SELECT n.*, ( POW(?, 2) / (UNIX_TIMESTAMP(n.news_time) + UNIX_TIMESTAMP(NOW())) ) as rank 
FROM news_table n
ORDER BY rank; 
```

现在为了获得选票，您可能必须进行子查询或联接，但我不能就此提出建议，因为您没有提供足够的选票来源信息。但是，您也可以为查询提供投票，而不是一次性选择所有投票，例如：

```
$sql = sprintf('SELECT n.*, ( POW(%d, 2) / (UNIX_TIMESTAMP(n.news_time) + UNIX_TIMESTAMP(NOW())) ) as rank FROM news_table n ORDER BY rank', $votes); 
```

除此之外，是的，您可以使用 usort，但这也需要您将整个记录集放在内存中以提供准确的排序，这在某些时候可能会出现问题。

# linux - 简单的 case 语句在 shell 脚本中失败

> ID：15030937
> 
> 赞同：0
> 
> 时间：2013-02-22T18:36:47.760
> 
> 标签：linux, bash, shell

我写了一个非常简单的案例陈述，但失败了。我仔细检查了语法，但找不到问题所在。有人可以告诉我吗？

```
#!/bin/bash

opt_type=0

function opt_type
{
        echo "Opt Porvisioning tool starting..."

        echo -e "1\. ABC \n2\. DEF \n3\. HIJ \n"
        read opt_input

        case $opt_input in
        1|abc|ABC)
                opt_type=1;

        2|def|DEF)    
                opt_type=2;

        3|hij|HIJ)    
                opt_type=3;

        4|exit|Exit) echo "Exiting ..."

        *) echo "Please enter a valid entry. Exiting!!"

        esac
}

echo $opt_type

./opt_type.sh: line 16: syntax error near unexpected token `)'
./opt_type.sh: line 16: `       2|def|DEF)
-bash-3.2$ 
```

我没有看到任何这样的符号 (`) 那它为什么抱怨呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:38:59.190

`;;`您必须通过not `;`=)关闭每个案例

所以 ：

```
#!/bin/bash

opt_type=0

function opt_type
{
        echo "Opt Porvisioning tool starting..."

        echo -e "1\. ABC \n2\. DEF \n3\. HIJ \n"
        read opt_input

        case $opt_input in
        1|abc|ABC)
                opt_type=1
        ;;
        2|def|DEF)    
                opt_type=2
        ;;
        3|hij|HIJ)    
                opt_type=3
        ;;
        4|exit|Exit) echo "Exiting ..."
        ;;
        *) echo "Please enter a valid entry. Exiting!!"
        ;;
        esac
}

echo $opt_type 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:40:13.610

你应该双分号：

```
case $opt_input in
    1|abc|ABC)
        opt_type=1;;
    2|def|DEF)    
        opt_type=2;;
    3|hij|HIJ)    
        opt_type=3;;
    4|exit|Exit)
        echo "Exiting ...";;
    *)
        echo "Please enter a valid entry. Exiting!!";;
esac 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:42:27.830

在 Bash 中，case 语句中的每个 case 后面都需要两个分号。我还从函数中取出了 case 语句，因为从未调用过该函数。以下按预期工作

```
#!/bin/bash
opt_type=0
echo "Opt Porvisioning tool starting..."
echo -e "1\. ABC \n2\. DEF \n3\. HIJ \n"
read opt_input
case $opt_input in
    1|abc|ABC) opt_type=1;;
    2|def|DEF) opt_type=2;;
    3|hij|HIJ) opt_type=3;;
    4|exit|Exit) echo "Exiting ...";;
    *) echo "Please enter a valid entry. Exiting!!";;
esac
echo $opt_type 
```

# android - 如何在 SherlockListActivity 中使用自定义 CursorAdapter？

> ID：15030938
> 
> 赞同：0
> 
> 时间：2013-02-22T18:36:53.773
> 
> 标签：android, actionbarsherlock, android-cursoradapter

我的应用程序使用 ActionBarSherlock 并且我还需要使用自定义光标适配器？java不允许多重继承，我该怎么做。那是 ：

`public class MyActivity extends SherlockListActivity,Cursor Adapter {}`不被允许。

# c++ - CreateProcessWithLogonW 获取标准输出

> ID：15030940
> 
> 赞同：0
> 
> 时间：2013-02-22T18:36:56.197
> 
> 标签：c++, visual-c++

[我在Microsoft 的文档站点](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682431%28v=vs.85%29.aspx)上找到了以下评论：

> 此外，当使用 STARTF_USESTDHANDLES 时，CreateProcessWithLogonW 拒绝 STD 句柄 (0/1/2)，即 GetStdHandle() 默认返回的内容。它返回错误 6，无效句柄，因为 0/1/2 不是“真正的”句柄。我们发现重定向控制台输入/输出的唯一方法是创建自定义句柄（管道）并使用它们来代替（例如，即使只是作为您不使用的虚拟句柄）。这是 CreateProcessWithLogonW 缺少的功能，因为 CreateProcess（可能还有 CreateProcessAsUser，我没有验证）接受 STD 句柄。

这指向创建自定义管道。

我发现[这个 StackOverflow 答案](https://stackoverflow.com/questions/1973376/how-to-get-standard-output-from-createprocesswithlogonw)指向使用诸如`"SafeFileHandle"`. 这显然是我不熟悉如何使用的 C++/CLI。我正在使用 Visual C++，因此是“本机”C++？

我正在寻找如何解决此问题的简单解决方案。我是 C++ 的新手，CLI 的事情让我很困惑，因为我根本不知道如何使用它，或者使 Visual C++ 与它兼容。

鉴于我的正常 C++ 和我的问题，我将如何创建自定义管道以允许我获得标准输出？

这是我的代码：

```
#include "stdafx.h"

void DisplayError(LPWSTR pszAPI)
{
    LPVOID lpvMessageBuffer;

    FormatMessage(FORMAT_MESSAGE_ALLOCATE_BUFFER | 
        FORMAT_MESSAGE_FROM_SYSTEM,
        NULL, GetLastError(), 
        MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT), 
        (LPWSTR)&lpvMessageBuffer, 0, NULL);

    //
    //... now display this string
    //
    wprintf(L"ERROR: API        = %s.\n", pszAPI);
    wprintf(L"       error code = %d.\n", GetLastError());
    wprintf(L"       message    = %s.\n", (LPWSTR)lpvMessageBuffer);

    //
    // Free the buffer allocated by the system
    //
    LocalFree(lpvMessageBuffer);

    ExitProcess(GetLastError());
}

void _tmain(int argc, WCHAR *argv[])
{
    STARTUPINFO si;
    ZeroMemory( &si, sizeof(STARTUPINFO) );
    si.cb = sizeof(STARTUPINFO);

    HANDLE pipe1 = CreateNamedPipe(L"\\\\.\\pipe\\pipe1", PIPE_ACCESS_DUPLEX,
               PIPE_WAIT, 1024, 1024, 1024, 60, NULL);
    HANDLE pipe2 = CreateNamedPipe(L"\\\\.\\pipe\\pipe2", PIPE_ACCESS_DUPLEX,
               PIPE_WAIT, 1024, 1024, 1024, 60, NULL);
    si.dwFlags |= STARTF_USESHOWWINDOW;
    si.dwFlags = STARTF_USESTDHANDLES;
    si.hStdOutput = pipe1;
    si.hStdError =  pipe2;

    DWORD     dwSize;
    HANDLE    hToken;
    LPVOID    lpvEnv;
    PROCESS_INFORMATION pi = {0};
    WCHAR               szUserProfile[256] = L"";

    si.cb = sizeof(STARTUPINFO);

    if (argc != 4)
    {
        wprintf(L"Usage: %s [user@domain] [password] [cmd]", argv[0]);
        wprintf(L"\n\n");
        return;
    }

    //
    // TO DO: change NULL to '.' to use local account database
    //
    if (!LogonUser(argv[1], NULL, argv[2], LOGON32_LOGON_INTERACTIVE, 
            LOGON32_PROVIDER_DEFAULT, &hToken))
        DisplayError(L"LogonUser");

    if (!CreateEnvironmentBlock(&lpvEnv, hToken, TRUE))
        DisplayError(L"CreateEnvironmentBlock");

    dwSize = sizeof(szUserProfile)/sizeof(WCHAR);

    if (!GetUserProfileDirectory(hToken, szUserProfile, &dwSize))
        DisplayError(L"GetUserProfileDirectory");

    //
    // TO DO: change NULL to '.' to use local account database
    //
    if (!CreateProcessWithLogonW(argv[1], NULL, argv[2], 
            LOGON_WITH_PROFILE, NULL, argv[3], 
            CREATE_UNICODE_ENVIRONMENT, lpvEnv, szUserProfile, 
            &si, &pi))
        DisplayError(L"CreateProcessWithLogonW");

    if (!DestroyEnvironmentBlock(lpvEnv))
        DisplayError(L"DestroyEnvironmentBlock");

    CloseHandle(hToken);
    CloseHandle(pi.hProcess);
    CloseHandle(pi.hThread);
} 
```

我试过这个，我在控制台窗口上没有得到任何输出。正如我所说，我检查了 StackOverflow 上的答案，整个 C++/CLI 事情让我感到困惑。如果有人知道使用 Visual C++ 使用自定义管道重定向输出的简单解决方案，请告诉我。

如果我在上面做错了什么，也请告诉我。

编辑：

在遵循雷米的回答给出的建议之后。我想出了以下代码，它产生错误代码 3：系统找不到指定的路径。

 `````
#include "stdafx.h"

HANDLE g_hChildStd_IN_Rd = NULL;
HANDLE g_hChildStd_IN_Wr = NULL;
HANDLE g_hChildStd_OUT_Rd = NULL;
HANDLE g_hChildStd_OUT_Wr = NULL;

HANDLE g_hInputFile = NULL;

int BUFSIZE = 1064;
void CreateChildProcess(void); 
void WriteToPipe(void); 
void ReadFromPipe(void); 
void ErrorExit(PTSTR); 

void DisplayError(LPWSTR pszAPI)
{
    LPVOID lpvMessageBuffer;

    FormatMessage(FORMAT_MESSAGE_ALLOCATE_BUFFER | 
        FORMAT_MESSAGE_FROM_SYSTEM,
        NULL, GetLastError(), 
        MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT), 
        (LPWSTR)&lpvMessageBuffer, 0, NULL);

    //
    //... now display this string
    //
    wprintf(L"ERROR: API        = %s.\n", pszAPI);
    wprintf(L"       error code = %d.\n", GetLastError());
    wprintf(L"       message    = %s.\n", (LPWSTR)lpvMessageBuffer);

    //
    // Free the buffer allocated by the system
    //
    LocalFree(lpvMessageBuffer);

    ExitProcess(GetLastError());
}

void _tmain(int argc, WCHAR *argv[])
{

SECURITY_ATTRIBUTES saAttr; 
   saAttr.nLength = sizeof(SECURITY_ATTRIBUTES); 
   saAttr.bInheritHandle = TRUE; 
   saAttr.lpSecurityDescriptor = NULL; 

   if ( ! CreatePipe(&g_hChildStd_OUT_Rd, &g_hChildStd_OUT_Wr, &saAttr, 0) ) 
      ErrorExit(TEXT("StdoutRd CreatePipe")); 

   if ( ! SetHandleInformation(g_hChildStd_OUT_Rd, HANDLE_FLAG_INHERIT, 0) )
      ErrorExit(TEXT("Stdout SetHandleInformation")); 

    if (! CreatePipe(&g_hChildStd_IN_Rd, &g_hChildStd_IN_Wr, &saAttr, 0)) 
      ErrorExit(TEXT("Stdin CreatePipe")); 

    if ( ! SetHandleInformation(g_hChildStd_IN_Wr, HANDLE_FLAG_INHERIT, 0) )
      ErrorExit(TEXT("Stdin SetHandleInformation")); 

    /////////////////////////////Start CreateChildProcess////////

    STARTUPINFO si;
    ZeroMemory( &si, sizeof(STARTUPINFO) );
    si.cb = sizeof(STARTUPINFO);

    si.dwFlags |= STARTF_USESHOWWINDOW;
    si.dwFlags |= STARTF_USESTDHANDLES;
    si.hStdError = g_hChildStd_OUT_Wr;
    si.hStdOutput = g_hChildStd_OUT_Wr;
    si.hStdInput = g_hChildStd_IN_Rd;

    DWORD     dwSize;
    HANDLE    hToken;
    LPVOID    lpvEnv;
    PROCESS_INFORMATION pi = {0};
    WCHAR               szUserProfile[256] = L"";

    si.cb = sizeof(STARTUPINFO);

    if (argc != 4)
    {
        wprintf(L"Usage: %s [user@domain] [password] [cmd]", argv[0]);
        wprintf(L"\n\n");
        return;
    }

    //
    // TO DO: change NULL to '.' to use local account database
    //
    if (!LogonUser(argv[1], NULL, argv[2], LOGON32_LOGON_INTERACTIVE, 
            LOGON32_PROVIDER_DEFAULT, &hToken))
        DisplayError(L"LogonUser");

    if (!CreateEnvironmentBlock(&lpvEnv, hToken, TRUE))
        DisplayError(L"CreateEnvironmentBlock");

    dwSize = sizeof(szUserProfile)/sizeof(WCHAR);

    if (!GetUserProfileDirectory(hToken, szUserProfile, &dwSize))
        DisplayError(L"GetUserProfileDirectory");

    //
    // TO DO: change NULL to '.' to use local account database
    //
    if (!CreateProcessWithLogonW(argv[1], NULL, argv[2], 
            LOGON_WITH_PROFILE, NULL, argv[3], 
            CREATE_UNICODE_ENVIRONMENT, lpvEnv, szUserProfile, 
            &si, &pi))
        DisplayError(L"CreateProcessWithLogonW");

    if (!DestroyEnvironmentBlock(lpvEnv))
        DisplayError(L"DestroyEnvironmentBlock");

    CloseHandle(hToken);
    CloseHandle(pi.hProcess);
    CloseHandle(pi.hThread);

    /////////////////////////////End CreateChildProcess///////////

     if (argc == 1) 
      ErrorExit(TEXT("Please specify an input file.\n")); 

   g_hInputFile = CreateFile(
       argv[3], 
       GENERIC_READ, 
       0, 
       NULL, 
       OPEN_EXISTING, 
       FILE_ATTRIBUTE_READONLY, 
       NULL); 

   if ( g_hInputFile == INVALID_HANDLE_VALUE ) 
      ErrorExit(TEXT("CreateFile")); 

     WriteToPipe(); 
   printf( "\n->Contents of %s written to child STDIN pipe.\n", argv[1]);

      printf( "\n->Contents of child process STDOUT:\n\n", argv[1]);
   ReadFromPipe(); 

}

void WriteToPipe(void) 

// Read from a file and write its contents to the pipe for the child's STDIN.
// Stop when there is no more data. 
{ 
   DWORD dwRead, dwWritten; 
   CHAR chBuf[4096];
   BOOL bSuccess = FALSE;

   for (;;) 
   { 
      bSuccess = ReadFile(g_hInputFile, chBuf, BUFSIZE, &dwRead, NULL);
      if ( ! bSuccess || dwRead == 0 ) break; 

      bSuccess = WriteFile(g_hChildStd_IN_Wr, chBuf, dwRead, &dwWritten, NULL);
      if ( ! bSuccess ) break; 
   } 

// Close the pipe handle so the child process stops reading. 

   if ( ! CloseHandle(g_hChildStd_IN_Wr) ) 
      ErrorExit(TEXT("StdInWr CloseHandle")); 
} 

void ReadFromPipe(void) 

// Read output from the child process's pipe for STDOUT
// and write to the parent process's pipe for STDOUT. 
// Stop when there is no more data. 
{ 
   DWORD dwRead, dwWritten; 
   CHAR chBuf[4096]; 
   BOOL bSuccess = FALSE;
   HANDLE hParentStdOut = GetStdHandle(STD_OUTPUT_HANDLE);

   for (;;) 
   { 
      bSuccess = ReadFile( g_hChildStd_OUT_Rd, chBuf, BUFSIZE, &dwRead, NULL);
      if( ! bSuccess || dwRead == 0 ) break; 

      bSuccess = WriteFile(hParentStdOut, chBuf, 
                           dwRead, &dwWritten, NULL);
      if (! bSuccess ) break; 
   } 
} 

void ErrorExit(PTSTR lpszFunction) 

// Format a readable error message, display a message box, 
// and exit from the application.
{ 
    LPVOID lpMsgBuf;
    LPVOID lpDisplayBuf;
    DWORD dw = GetLastError(); 

    FormatMessage(
        FORMAT_MESSAGE_ALLOCATE_BUFFER | 
        FORMAT_MESSAGE_FROM_SYSTEM |
        FORMAT_MESSAGE_IGNORE_INSERTS,
        NULL,
        dw,
        MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT),
        (LPTSTR) &lpMsgBuf,
        0, NULL );

    lpDisplayBuf = (LPVOID)LocalAlloc(LMEM_ZEROINIT, 
        (lstrlen((LPCTSTR)lpMsgBuf)+lstrlen((LPCTSTR)lpszFunction)+40)*sizeof(TCHAR)); 
    StringCchPrintf((LPTSTR)lpDisplayBuf, 
        LocalSize(lpDisplayBuf) / sizeof(TCHAR),
        TEXT("%s failed with error %d: %s"), 
        lpszFunction, dw, lpMsgBuf); 
    MessageBox(NULL, (LPCTSTR)lpDisplayBuf, TEXT("Error"), MB_OK); 

    LocalFree(lpMsgBuf);
    LocalFree(lpDisplayBuf);
    ExitProcess(1);
} 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:45:03.347

使用匿名管道 via `CreatePipe()`，而不是使用命名管道 via `CreateNamedPipe()`。有关示例，请参见 MSDN：

[创建具有重定向输入和输出的子进程](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682499.aspx)``

# python - 位文字上的 Python 语法错误

> ID：15030943
> 
> 赞同：3
> 
> 时间：2013-02-22T18:37:00.107
> 
> 标签：python

我继承了这个 python 程序，并且有点像一个有位的菜鸟，所以我无法弄清楚问题是什么。我在以下函数的第一行收到语法错误：

```
def tileKey(self, z, x, y):
    zBits = z & 0xFFL
    #  8bits, 256 levels. normally [0,21]
    xBits = x & 0xFFFFFFFL
    #  28 bits
    yBits = y & 0xFFFFFFFL
    #  28 bits
    key = (zBits << 56) | (xBits << 28) | (yBits << 0)
    #  return the key value integer 720576213915009588
    return key 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T18:47:39.883

如果您使用的是 Python 3.x，则不能再使用“L”后缀，因为它不再需要并且不是语法的一部分：

```
yBits = y & 0xFFFFFFFL
Original exception was:
  File "<stdin>", line 1
    0xFFL
        ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:38:33.330

这是因为缩进错误，你必须缩进函数的主体。你的函数应该像这样缩进：

```
def tileKey(self, z, x, y):
    zBits = z & 0xFFL
    #  8bits, 256 levels. normally [0,21]
    xBits = x & 0xFFFFFFFL
    #  28 bits
    yBits = y & 0xFFFFFFFL
    #  28 bits
    key = (zBits << 56) | (xBits << 28) | (yBits << 0)
    #  return the key value integer 720576213915009588
    return key 
```

它看起来像是一个类中的一个方法，所以方法的整个定义应该在 with `class`关键字行之后缩进，例如：

```
class YourClass:
    def tileKey(self, z, x, y):
        zBits = z & 0xFFL
        #  8bits, 256 levels. normally [0,21]
        xBits = x & 0xFFFFFFFL
        #  28 bits
        yBits = y & 0xFFFFFFFL
        #  28 bits
        key = (zBits << 56) | (xBits << 28) | (yBits << 0)
        #  return the key value integer 720576213915009588
        return key 
```

# android - 带有 ViewPager 的 FragmentActivity 管理多个片段，需要 2 次后按才能退出

> ID：15030953
> 
> 赞同：1
> 
> 时间：2013-02-22T18:37:42.820
> 
> 标签：android, android-viewpager, android-fragmentactivity

我已经尝试过搜索以找到解决方案，但它们似乎都不起作用。

我的用例是：我有一个 FragmentActivity，它包含一个 ViewPager 来管理几个片段，如果这些片段来自不同的数据源 - 因此涉及到 Service、Content Proviers、Loaders 等。

虽然我的 Fragments 的 onCreateView 只调用了一次，但是当我尝试通过按返回键退出应用程序时，视图分页器首先会删除片段集并显示空白活动，随后在背面按实际退出应用程序.

我尝试了几件事，例如：

*   在活动中调用`finish()`onKey... onBackPressed
*   `getActivity().finish()`从 Fragment 及其主布局视图调用，
    但它们都不起作用。

**通过使用它的 PID 关闭应用程序 - 那是我不想尝试的东西。

这肯定不是标准行为，因为我看到有人在 SO 上提出与我的查询相反的问题，他们的应用程序正在退出。

所以，我真的希望在第一次按下后退按钮时关闭活动。

# c# - 将新元素添加到数组的第一位，并移动其他元素

> ID：15030954
> 
> 赞同：0
> 
> 时间：2013-02-22T18:37:46.463
> 
> 标签：c#, arrays, console

我正在使用 C# 控制台应用程序制作蛇游戏。我正在使用二维数组来存储蛇的坐标。我想将新坐标存储为第一个元素并将其他元素向上移动一个位置。当我更改元素时，我想绘制新的蛇。

谢谢！

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Snake
{
class Program
{
    static void VerplaatsSlang(int VerplaatsX, int VerplaatsY, ref int BeginX, ref int BeginY, int LengteSlang, int [,] PlaatsSlang)
    {
        int NieuwX = BeginX + VerplaatsX;
        int NieuwY = BeginY + VerplaatsY;

        //Verplaatsing van hoofd
        Console.SetCursorPosition(BeginX, BeginY);
        Console.WriteLine("░");
        Console.SetCursorPosition(NieuwX, NieuwY);
        Console.WriteLine("☺");

        // Waarden slang doorschuiven
        for (int i = 1; i <= LengteSlang; i++)
        {
                PlaatsSlang[i, 0] = PlaatsSlang[(i - 1), 0];
                PlaatsSlang[i, 1] = PlaatsSlang[(i - 1), 1];
        }

        PlaatsSlang[0, 0] = NieuwX;
        PlaatsSlang[0, 1] = NieuwY;

        for (int i = 0; i <= LengteSlang; i++)
        {
            if (i ==1)
            {
                Console.SetCursorPosition(PlaatsSlang[i, 0], PlaatsSlang[i, 1]);
                Console.WriteLine("☺");
            }
            else if (i < LengteSlang)
            {
                Console.SetCursorPosition(PlaatsSlang[LengteSlang, 0], PlaatsSlang[LengteSlang, 1]);
                Console.WriteLine("░");
            }
            else if (i == LengteSlang)
            {
                Console.SetCursorPosition(PlaatsSlang[i, 0], PlaatsSlang[i, 1]);
                Console.WriteLine(" ");
            }
        }
        BeginX = NieuwX;
        BeginY = NieuwY;
    }

    static void Main(string[] args)
    {
        //Instellen van veld.
        /***************************************************************************/
        Console.WindowWidth = 100;      //breedte
        Console.WindowHeight = 25;       //hoogte
        Console.SetBufferSize(100, 25);     //beperking zodat er geen scroll is. 
        Console.WriteLine("\n" +
                            "\n   ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄    ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄" + // alt+ 220 ▄
                            "\n   █     Score     █    █                                                                     █" + // alt+ 219 █
                            "\n   █               █    █                                                                     █" +
                            "\n   █▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄█    █                                                                     █" +
                            "\n                        █                                                                     █" +
                            "\n                        █                                                                     █" +
                            "\n                        █                                                                     █" +
                            "\n                        █                                                                     █" +
                            "\n                        █                                                                     █" +
                            "\n                        █                                                                     █" +
                            "\n                        █                                                                     █" +
                            "\n                        █                                                                     █" +
                            "\n                        █                                                                     █" +
                            "\n                        █                                                                     █" +
                            "\n                        █                                                                     █" +
                            "\n                        █                                                                     █" +
                            "\n                        █                                                                     █" +
                            "\n                        █                                                                     █" +
                            "\n                        █                                                                     █" +
                            "\n                        █                                                                     █" +
                            "\n                        █                                                                     █" +
                         "                             ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀"); // alt+ 223▀
        //Begin Slang Plaatsen.
        /***************************************************************************/
        int BeginX = 58;
        int BeginY = 10;
        int[,] PlaatsSlang = { { 58, 10 }, { 59, 10 }, { 60, 10 }, { 61, 10 } };
        int Lengte = (PlaatsSlang.Length / 2) - 1;                                 // 2d array heeft dubbele lengte en moet -1 gedaan worden anders error bij for-loop
        for (int i = 0; i <= Lengte; i++)
        {
            if (i == 0)
            {
                Console.SetCursorPosition(PlaatsSlang[i, 0], PlaatsSlang[i, 1]);
                Console.WriteLine("☺");
            }
            if (i > 0)
            {
                Console.SetCursorPosition(PlaatsSlang[i, 0], PlaatsSlang[i, 1]);
                Console.WriteLine("░");
            }
        }

        //Plaats eten.
        /***************************************************************************/
        bool Plaats = false;
        Random Rangen = new Random();
        int[] PlaatsSnoep = new int[2];
        PlaatsSnoep[0] = Rangen.Next(25, 94);                                    //x-coördinaat
        PlaatsSnoep[1] = Rangen.Next(3, 23);                                    //y-coördinaat

        while (Plaats == false)                                                      //Om te vermijden dat snoepje op plaats van slang komt
        {
            for (int i = 0; i <= Lengte; i++)
            {
                if (PlaatsSnoep[0] == PlaatsSlang[i, 0] && PlaatsSnoep[1] == PlaatsSlang[i, 1])
                {
                    Plaats = false;
                }
                else
                {
                    Console.SetCursorPosition(PlaatsSnoep[0], PlaatsSnoep[1]);
                    Console.WriteLine("■");
                    Plaats = true;
                }
            }
        }

        //Iets eten.
        /***************************************************************************/
        int LengteSlang = 3;
        int Punten = 0;
        if (BeginX == PlaatsSnoep[0] && BeginY == PlaatsSnoep[1])
        {
            Console.SetCursorPosition(11, 4);
            Console.WriteLine(Punten);
            LengteSlang++;
        }
        ConsoleKeyInfo keyInfo;

            while ((keyInfo = Console.ReadKey(true)).Key != ConsoleKey.Escape)
            {
                switch (keyInfo.Key)
                {
                    case ConsoleKey.UpArrow:
                        if (BeginY > 3)
                        {
                            VerplaatsSlang(0,-1, ref BeginX, ref BeginY, LengteSlang, PlaatsSlang);
                        }
                        break;

                    case ConsoleKey.RightArrow:
                        if (BeginX < 93)
                        {
                            VerplaatsSlang(+1, 0, ref BeginX, ref BeginY, LengteSlang, PlaatsSlang);
                        }
                        break;

                    case ConsoleKey.DownArrow:
                        if (BeginY < 22)
                        {
                            VerplaatsSlang(0, +1, ref BeginX, ref BeginY, LengteSlang, PlaatsSlang);
                        }
                        break;

                    case ConsoleKey.LeftArrow:
                        if (BeginX > 25)
                        {
                            VerplaatsSlang(-1, 0, ref BeginX, ref BeginY, LengteSlang, PlaatsSlang);
                        }
                        break;
                }
                //Console.Read();
            }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:54:11.243

尝试堆栈：

```
 Stack<Coordinate> strings = new Stack<Coordinate>();
        strings.Push(new Coordinate(x, y)); 
```

和一个自定义坐标类：

```
public class Coordinate       
{
    public Coordinate(int x, int y)
    {
        xCoordinate = x;
        yCoordinate = y;
    }
    public int xCoordinate { get; set; }
    public int yCoordinate { get; set; }
} 
```

# reporting-services - 如何在 RDLC 文件的列中显示 CSV 数据列表

> ID：15030960
> 
> 赞同：0
> 
> 时间：2013-02-22T18:38:10.117
> 
> 标签：reporting-services, ssrs-2008, reportviewer, rdlc, dynamic-rdlc-generation

我有一个嵌入在 Web 应用程序中的报告，它运行良好，但我需要对其进行调整。现在，报告基本上会从视图中转储所有行，我设置了一些过滤器，但我已禁用它们以简化此操作并使其正常工作。我昨天花了一整天试图让它正常工作，尝试了许多不同的组合。最终目标是获取一组数据并将其显示为数据所属的同一行中的逗号分隔列表。

我的数据是一个项目列表，每个项目可以有多个与之关联的人员，而不是为每个人创建一个新行，我们希望将属于该项目的所有人员放在一列中，用逗号分隔。SQL 中的一项微不足道的任务。

```
SELECT dbo.APM_Project.Code, dbo.APM_Project.Title, 

              (STUFF((SELECT(', ' + vi.NameFirst)
              FROM view_OrganizationPerson vi
              JOIN APM_Project as p ON vi.ProjectId = p.Id
              WHERE vi.ProjectId = APM_Project.Id
              AND vi.Role = 'Principal Investigator'
              AND vi.Status = 'Active'
              FOR XML PATH('')), 1, 2, '')) AS PI_

FROM         dbo.APM_Project 
```

我还尝试了生成逗号分隔列表的 SUBSTRING 方法，**当我运行 SQL 脚本时，所有这些方法都很好用，当我在 Visual Studio 中预览数据集中的数据时它们也很有效，**所以一定是正确的。我得到了我想要的结果但是当我运行应用程序时，我在使用表达式的列中没有得到任何数据

```
=Fields!PI_.Value 
```

或者

```
=First(Fields!PI_.Value, "DataSet1") 
```

所以我不完全确定从这里去哪里。这似乎应该是一项非常容易的任务，当我运行表达式时也是如此

```
=Fields!PI_.IsMissing 
```

它回来了，所以在运行时丢失了一些东西，我只是不知道它可能是什么。

项目的所有其他数据都显示在文本框中，只有 PI_ 列留空。

问题是：**如何在 RDLC 文件中的一行数据的一列中显示 CSV 数据列表？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:40:15.410

事实证明这是有效的。由于我更改了数据集，因此我需要使用对数据适配器本身所做的更改来更新 .aspx 页面。

# c++ - '类型非静态 const 成员不能使用默认赋值运算符' - 这是什么意思？

> ID：15030972
> 
> 赞同：7
> 
> 时间：2013-02-22T18:38:33.927
> 
> 标签：c++, constants

此类标记以下错误：'非静态 const 成员'const int Member::membershipNo'，不能使用默认赋值运算符'。奇怪的是这段代码在另一个项目中重复并且完美运行。你能帮我把它改正吗？

会员.h

```
class Member : public Person
    {
    public:
        Member();
        Member(int membershipNo);
        virtual ~Member();

        int getMembershipNo() const;

    private:
        const int membershipNo;

        friend class boost::serialization::access;
        template<class Archive>
        void serialize(Archive& ar, const unsigned int version)
        {
            ar & boost::serialization::base_object<Person>(*this);
            ar & membershipNo;
        }

    }; 
```

会员.cpp

```
Member::Member() : membershipNo(0)
{
    Person();
}

Member::Member(int memberNo) : membershipNo(memberNo)
{
    Person();
}

Member::~Member()
{
    // TODO Auto-generated destructor stub
}

int Member::getMembershipNo() const
{
    return membershipNo;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T18:41:47.713

大概，在你的代码中的某个地方你分配给 a `Member`，像这样：

```
Member m1, m2;
m1 = m2; 
```

或者您在需要类型可分配的上下文中使用它。

由于您没有为 提供自己的赋值运算符重载`Member`，因此通常会使用隐式定义的默认赋值运算符。但是，由于您有一个`const`数据成员，编译器不会为您隐式定义一个。您*需要*自己提供。

这是有道理的，因为想象一下我刚刚给出的代码示例，编译器应该对`m1`的`membershipNo`成员做什么？它应该分配给它吗`m2`？如果是`membershipNo`，它怎么能做到这一点？在这种情况下，编译器只会说“不，我做不到”。`membershipNo``const`

> 如果具有以下条件，则类的默认复制/移动赋值运算符`X`定义为已删除`X`：
> 
> *   `const`非类类型（或其数组）的非静态数据成员
> *   [...]

正如我所说，为了能够使用 a 进行赋值`Member`，您需要提供自己的赋值运算符：

```
Member& Member::operator=(const Member& other)
{
  // Copy things from other to this
} 
```

然而，这里存在`const`成员的问题。如果您按照描述提供自己的复制赋值运算符，并且*不*复制`membershipNo`，那么您真的复制了另一个对象吗？*从逻辑上讲，不应*`const`将具有任何状态的对象分配给它是有道理的。

 *但是，使用复制构造函数非常好 - 您只需确保`membershipNo`在成员初始化列表中进行初始化：

```
Member::Member(const Member& other)
  : membershipNo(other.membershipNo)
{
  // ...
} 
```

然后你可以这样做：

```
Member m1;
Member m2 = m1; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T18:40:27.430

正在发生的事情是一些客户端代码试图使用将一个`Member`实例分配给另一个实例。由于您有一个常量数据成员，因此这是行不通的。仅当某些代码尝试进行分配时才会出现该错误，这就是为什么在另一个项目中看起来同一个类“有效”的原因。

就正确而言，选项是 A) 不执行赋值，或 B) 使数据成员非 const。*

# git - Git - 每个分支的单独文件夹。设置它

> ID：15030975
> 
> 赞同：15
> 
> 时间：2013-02-22T18:38:45.403
> 
> 标签：git, branch, directory

我需要在 3 个单独的文件夹中保留 3 个分支。（我知道这不是 git 做事的方式。但我需要这样做是有原因的）。

假设 repo 名称是`my_proj_repo.git` 我`prodv1`在本地系统中创建了一个名为的文件夹：

```
git clone url:/my_proj_repo.git 
```

现在我进入`prodv1`文件夹并从服务器复制文件，然后：

```
git commit -am "initial import"
git push origin master 
```

这将文件推到了master上。现在我在本地系统中创建了另外两个类似上面的文件夹

```
stagingv1
devv1 
```

我想使用名称创建两个本地和远程分支：

```
staging // this local branch points (push/pull) to staging remote branch
dev     // this local branch points ((push/pull) to dev remote branch 
```

这两个分支应该在相应的文件夹中：

```
staging ==> stagingv1 folder
dev     ==> devv1 folder 
```

我尝试了一些东西，我想我搞砸了。有人可以指出我想要的命令/步骤来获得所有这些设置吗？

我所做的是，进入`stagingv1`文件夹并做了一个`git clone <repo>`. 但它默认为`master`. 而且我不确定如何在`staging`这里初始化分支。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-08-05T17:47:19.420

[自从 git 2.5 引入了git worktree](https://git-scm.com/docs/git-worktree)命令以来，您想要实现的目标变得更加简单（甚至微不足道） 。

基本上，你的 git repo 现在有完全免费的签出分支，称为工作树：

*   0（一个*裸*repo - 大致只是你的 repo 的 .git 目录的内容）
*   1（一个普通的 repo - 你在树中的代码，在 git 目录下`.git`）
*   n > 1，一个普通的 repo，您​​在其中添加了 n-1 个*工作树*（在 repo 之外的任意路径中，并且`.git`文件指向 repo 的 git 目录）

如果您的 repo 已经包含您的分支，您可以执行以下操作：

```
git worktree add <path to branch> <branch name> 
```

或者，如果该分支尚未创建并且您想从 master 分支：

```
git worktree add -b <new branch name> <path to branch> master 
```

请注意，您不能同时签出多个目录中的分支。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-22T18:46:33.043

我认为您可能必须在您的仓库中创建所有分支

```
$ git branch <name_of_your_new_branch> 
```

然后创建所有文件夹，并在每个文件夹中克隆 repo，但签出相应的分支。

每个文件夹应该/可能只跟踪适当的分支

```
Step 1 $ git branch [name_branch#1]

Step 2 $ git branch [name_branch#2]

Step 3 $ git branch [name_branch#3] 
```

...

```
Step 4 $ git push --all
Step 5 md Folder #2
Step 6 $ git clone [URL]
Step 7 $ git checkout [name_branch] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-14T12:58:42.697

问题中提出的上述场景在以下场景中非常有效。

1.  **微服务**：AWS Lambda 开发，例如一两个开发 lambda 的工作，总共有 70 个 lambda。因此，包括 test 和 code_folder 在内的 70 个文件夹。如果它是一个单体系统，您必须通过零合并问题来确保系统的所有部分一起工作。但这里 70 个文件夹中的每一个都是独立的，除了少数全局配置和少数共享文件夹。

2.  **Monorepo**：大公司使用 monorepo 来管理大型项目的所有子项目，包括移动应用程序、网站、后端和其他相关内容。

如果每个分支轨道仅在其文件夹中更改，则主分支可能具有也可能不具有所有代码。

一种方法是，首先为共享模块创建一个共享分支。然后，创建多个分支，每个分支都以空文件夹开头。永远不要将您的分支与 master 合并，仅拉共享分支在本地合并您的分支并推送到远程分支。

因此，远程上的每个分支都有共享模块和您的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-26T11:15:27.113

这是一个 bash 脚本，用于将所有远程分支检出到单独的工作树中，然后使它们保持同步。每次运行它都会*丢弃任何本地更改*。它只是试图使签出的代码镜像回购。

```
git fetch --all --prune

# reset branch only if it has deviated from the remote
function update_branch {
        if git diff --exit-code --quiet $1; then
                echo "No changes on branch $1"
        else
                echo "Resetting branch $1"
                git reset --hard $1
        fi
}

# master branch is checked out in the root
update_branch origin/master

# check out each remote branch into a subfolder
branches=$(git for-each-ref --format='%(refname:short)' refs/remotes/origin | grep -v /HEAD | grep -v /master)
for branch in $branches; do
        if [ -d $branch ]; then
                cd $branch
                update_branch $branch
                cd $OLDPWD
        else
                echo "Checking out new branch $branch"
                git worktree add $branch $branch
        fi
done

# check for branches that have been deleted on the remote
for branch in origin/*; do
        if ! git show-ref --verify refs/remotes/$branch --quiet; then
                echo "Removing worktree $branch"
                git worktree remove $branch
        fi
done

git worktree prune 
```

# php - htmlentities 和 json_encode，如果使用转义数据的 json_encode，我是否需要使用 htmlentities？

> ID：15030984
> 
> 赞同：2
> 
> 时间：2013-02-22T18:39:12.050
> 
> 标签：php, jquery, json

htmlentities 和 json_encode，如果使用转义数据的 json_encode，我是否需要使用 htmlentities？

这够了吗 - json_encode 转义数据

```
 echo json_encode( $items ); 
```

或者这样做使用 htmlentities 来转义数据：

```
 foreach ( $data as $d ) {

        $items[] = htmlentities( $d );

    }

    echo json_encode( $items ); 
```

客户端：JQuery ajax：

```
 $('#textbox').attr( 'value', variable ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:59:41.317

通常，您不需要使用`htmlentities()`.

我假设您在 ajax 处理程序的上下文中使用它？如果是这样，您最关心的将是您的调用脚本到底期待什么。如果您正在适当地处理 JSON 响应，那么除了`json_encode()`.

# vb.net - VB.NET - 组合框项的数量应基于数据库中的记录数

> ID：15030985
> 
> 赞同：0
> 
> 时间：2013-02-22T18:39:13.403
> 
> 标签：vb.net

我这里有问题`vb.net`。

我这里有一个程序连接到一个数据库，表上有字段（,,, `id`）`name``quantity``tbl_report`

我的程序的一部分是删除一个`ID`等于所选项目的记录`cbOrderNo`

cbOrderNo 的项目是表中的 ID。所以当一条记录被删除时，`cbOrderNo`应该会扣除一些项目。

因此，例如，表中有 4 条记录，因此在表单加载期间将有 4 个项目`cbOrderNo`，当用户在组合框中选择 1 个项目时，将删除一条记录，因此将留下 3 条记录，因此 3中的项目`cbOrderNo`

我的程序正在做的是，在留下 3 条记录后，组合框中仍然会有 4 项。我想要的是在那里只显示 3 个项目。

```
Dim qryDelete As String = "DELETE FROM tbl_report WHERE ID=" & cbOrderNo.SelectedItem & ""
ExecNonQuery(qryDelete)
MsgBox("Record Deleted")
query.Close()

cbOrderNo.Items.Clear()
cmd.CommandText = "SELECT * FROM tbl_report ORDER BY ID"
cmd.Connection = con
Dim rdrOLEDB As OleDbDataReader = cmd.ExecuteReader
While(rdrOLEDB.Read())
     cbOrderNo.Items.Add(rdrOLEDB.GetValue(0))
    MsgBox(cbOrderNo.Items.Count)
End While
MsgBox(cbOrderNo.Items.Count)
cbOrderNo.SelectedIndex = 0
rdrOLEDB.Close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:57:25.043

试试这个...

```
Dim qryDelete As String = "DELETE FROM tbl_report WHERE ID=" & cbOrderNo.SelectedItem & ""
ExecNonQuery(qryDelete)
MsgBox("Record Deleted")
query.Close()

cbOrderNo.Items.Remove(cbOrderNo.SelectedItem) 'there is no point in recalling the database, just remove it from the list. 
```

# box-api - Box API V2 /collaborations?status=pending 未提供项目详细信息

> ID：15030986
> 
> 赞同：1
> 
> 时间：2013-02-22T18:39:22.863
> 
> 标签：box-api

我正在使用 BOX-API V2 **/collaborations?status=pending**来获取待处理的协作文件夹详细信息。但根据文档[http://developers.box.com/docs/#collaborations-get-pending-collaborations](http://developers.box.com/docs/#collaborations-get-pending-collaborations)，响应将包含项目详细信息。但是，即使我有一个协作文件夹，我在项目详细信息响应中也得到了空值。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T06:16:26.873

这似乎是我们这边的一个错误。我们正在努力修复它。如果您想了解我们取得的进展，您可以通过电子邮件发送至 API AT box.com。

# c# - 尝试修复循环

> ID：15030989
> 
> 赞同：1
> 
> 时间：2013-02-22T18:39:49.647
> 
> 标签：c#, loops, while-loop, project

我一直在为我的高级 RAP 项目开发一款游戏，直到最近我才开始使用这个循环。当玩家或敌人的生命值等于 0 时，我需要一种方法来迭代它。我**不**希望它们都等于 0，这两个示例都这样做。我已经尝试过几种方式重写它，但它不起作用。感谢所有为此提供帮助的人。

```
while (!(enemyHealth == 0 || playerHealth == 0)
{ //START WHILE
    Console.WriteLine("[System:] Here are the list of moves that you can do:\n1)Punch\n2)Kick\n3)Round House Kick");
    Console.WriteLine();
    decision = Console.ReadLine();
    Console.WriteLine();
    decisionNumber = int.Parse(decision);
    if (decisionNumber < 1 || decisionNumber > 3)
    { //STARTS IF
        throw new Exception();
    } //ENDS IF
    else
    { //STARTS ELSE
        enemyHealth = enemyHealth - attackNumber;
        playerHealth = playerHealth - enemyAttackNumber;
        Console.WriteLine();
        Console.WriteLine("[System:] Enemy Health: " + enemyHealth + "\nYour Health: " + playerHealth);
     } //ENDS ELSE
} //ENDS WHILE

while (enemyHealth > 0 || playerHealth > 0)
                    { //START WHILE
                        Console.WriteLine("[System:] Here are the list of moves that you can do:\n1)Punch\n2)Kick\n3)Round House Kick");
                        Console.WriteLine();
                        decision = Console.ReadLine();
                        Console.WriteLine();
                        decisionNumber = int.Parse(decision);
                        if (decisionNumber < 1 || decisionNumber > 3)
                        { //STARTS IF
                            throw new Exception();
                        } //ENDS IF
                        else
                        { //STARTS ELSE
                            enemyHealth = enemyHealth - attackNumber;
                            playerHealth = playerHealth - enemyAttackNumber;
                            Console.WriteLine();
                            Console.WriteLine("[System:] Enemy Health: " + enemyHealth + "\nYour Health: " + playerHealth);
                        } //ENDS ELSE
                    } //ENDS WHILE 
```

任何人都可以解决这个问题，因为我遇到了重大问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T18:42:04.500

条件可以简化为，负健康水平`!= 0`会造成逻辑故障，我们还需要保持循环处于活动状态，直到`enemy`和的健康状况`player`为`> 0`

```
while ((enemyHealth > 0 && playerHealth > 0)) 
```

* * *

似乎，问题是你的循环编码，

`throw new Exception();`似乎是一个糟糕的逻辑，我的建议是丢弃忽略错误的输入。

可以像这样实现

```
while ((enemyHealth > 0 || playerHealth > 0))
{ 
    Console.WriteLine("[System:] Here are the list of moves that you can do:\n1)Punch\n2)Kick\n3)Round House Kick");
    Console.WriteLine();
    decision = Console.ReadLine();
    Console.WriteLine();
    decisionNumber = int.Parse(decision);
    if (decisionNumber >= 1 && decisionNumber <= 3)
    {

        enemyHealth = enemyHealth - attackNumber;
        playerHealth = playerHealth - enemyAttackNumber;
        Console.WriteLine();
        Console.WriteLine("[System:] Enemy Health: " + enemyHealth + "\nYour Health: " + playerHealth);
    } 
    else
    {
        Console.WriteLine("Invalid Input : press enter to input again");
        Console.ReadKey();
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T18:48:59.513

问题是你这样做

`while (!(enemyHealth == 0) || !(playerHealth == 0))`

`enemyHealth = enemyHealth - attackNumber;`

`playerHealth = playerHealth - enemyAttackNumber;`

**如果敌人的生命值是……假设是 20，攻击次数是 21，那么你得到 -1。它永远不会达到 0。您需要检查他们的健康状况是否大于 0。**

`while (enemyHealth > 0 && playerHealth > 0)`

使用 && 因为如果任何一个人死了，你希望战斗结束。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T18:45:26.400

为什么不做

```
bool loop = true;
while(loop)
{
//change loop to false when it loop should stop
} 
```

或使用`break`关键字

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T18:46:57.167

我会将条件更改为：

```
while (enemyHealth > 0 && playerHealth > 0) 
```

如果敌人或玩家的生命值降至零或更低，这将停止循环。在运行状况降至零以下（负数）的情况下，使用大于或小于比较而不是精确的零比较来防止无限循环更安全。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-22T18:47:55.980

你的语言有点混乱。当你说

> 当玩家或敌人的生命值为 0 时，我需要一种方法来重申这一点。

我认为您的意思是当玩家或敌人的生命值等于 0 时，您想要“**停止**重复”（即离开循环）。要做到这一点，您需要`&&`代替`||`：

```
while (!(enemyHealth == 0) && !(playerHealth == 0)) 
```

这意味着只要敌人*和*玩家的生命值都不是零，就继续运行循环。但是，如果健康有可能变为负数（并跳过`0`），这还不够好。你想使用：

```
while (enemyHealth > 0 && playerHealth > 0) 
```

# delphi - 如何在 Delphi 上使用 Application.ActivateHint 显示提示？

> ID：15030998
> 
> 赞同：4
> 
> 时间：2013-02-22T18:40:26.413
> 
> 标签：delphi, hint

我有以下代码试图显示提示：

```
procedure TMyGrid.OnGridMouseMove(Sender: TObject; Shift: TShiftState;
  X, Y: Integer);
var
  aPoint: TPoint;
begin
  inherited;
  //Application.Hint := 'Hint Text';
  //Application.ShowHint := True;
  Grid.Hint := 'Hint Text';
  Grid.ShowHint := True;
  aPoint.X := X;
  aPoint.Y := Y;
  Application.ActivateHint(aPoint);
end; 
```

但是没有任何提示出现。怎么了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T19:39:35.717

与其试图`TApplication`在网格控件的事件中强制显示新的提示`OnMouseMove`，正确的方法是让网格处理[`CM_HINTSHOW`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Controls.TCMHintShow)消息以在正常显示时自定义当前提示。

该`CM_HINTSHOW`消息为您提供了指向其值 [`THintInfo`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Controls.THintInfo)中记录的指针。有一个成员可以告诉您当前鼠标在控件客户区内的位置，以及一个允许您在控件客户区内定义当前提示应该有效的矩形的成员（还有其他用于进一步自定义提示的成员，suh作为文本、颜色、窗口类、显示/隐藏超时等）。当鼠标移出该矩形但仍在控件的客户区域内时，将再次生成消息以获取新信息以更新当前提示。 `LPARAM``THintInfo``CursorPos``CursorRect``THintInfo``CM_HINTSHOW`

如果您需要在每次鼠标移动时更新提示，您可以定义一个`CursorRect`只包含 current的自定义`CursorPos`，例如：

```
type
  TMyGrid = class(...)
  private
    procedure CMHintShow(var Message: TCMHintShow); message CM_HINTSHOW;
  end;

procedure TMyGrid.CMHintShow(var Message: TCMHintShow);
begin
  with Message.HintInfo^ do
  begin
    HintStr := Format('Hint Text (%d,%d)', [CursorPos.X, CursorPos.Y]);
    CursorRect := Rect(CursorPos.X, CursorPos.Y, CursorPos.X, CursorPos.Y);
  end;
end; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-22T18:53:16.357

[`ActivateHint`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Forms.TApplication.ActivateHint)希望您的点在屏幕坐标中，而不是在客户端坐标中。

来自文档：

> ActivateHint 将控件或菜单​​项定位在 CursorPos 指定的位置，其中**CursorPos 表示**以像素为单位的屏幕坐标。找到控件后，ActivateHint 在提示窗口中显示控件的提示。

所以，你必须像这样改变你的方法：

```
procedure TMyGrid.OnGridMouseMove(Sender: TObject; Shift: TShiftState;
  X, Y: Integer);
var
  aPoint: TPoint;
begin
  inherited;
  //Application.Hint := 'Hint Text';
  Grid.Hint := 'Hint Text';
  Grid.ShowHint := True;
  aPoint.X := X;
  aPoint.Y := Y;
  aPoint := ClientToScreen(aPoint);
  Application.ActivateHint(aPoint);
end; 
```