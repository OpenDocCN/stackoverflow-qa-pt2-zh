# StackOverflow 问答 16045000-16045999

# sql - 日期转换 SQL-VBA

> ID：16045000
> 
> 赞同：0
> 
> 时间：2013-04-16T19:01:45.033
> 
> 标签：sql, vba, excel

我从 SQL 获取数据并通过 VBA 将其粘贴到 Excel 表中。数据以格式出现

hh:mm:ss 我想让 excel 意识到这是一个时间变量，但事实并非如此。即使我选择粘贴区域并将格式更改为任何时间格式，它似乎也不起作用。仅当我手动选择一个单元格对其进行稍微修改并单击输入（或每个单元格按 F2 + 输入）然后它移动到时间格式时才有效。有没有办法解决这个问题或者是否有人熟悉这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-16T19:35:02.200

您究竟是如何将这些数据*输入*excel 的？

你不会碰巧有手动计算吧？Excel 会将 hh:mm:ss 解析为日期时间，但听起来它在您导入此数据后并没有重新计算。

# excel - 如何复制引用Excel中一行的矩阵？

> ID：16045002
> 
> 赞同：0
> 
> 时间：2013-04-16T19:01:51.747
> 
> 标签：excel, matrix

我正在尝试计算几百行数据，使用矩阵求解线性方程组。我正在根据行数据构建矩阵。我取结果 3x3 的倒数，然后乘以两次，一次用于 x，一次用于 y。我从中得到 6 个变量：`a,b,c,d,e`和`f`. 如何复制示例以便解决所有行？我正在提供数据，然后是我现在使用的公式。现在，如果我向下复制它会跳过 3 行，或者如果我用 3 个示例向下复制它会跳过 9 行。我的意思是我想我可以尝试在所有 300 行中插入额外的行，所以我最终得到 900 行，但必须有一个更简单的方法！

我不知道如何让我的数据正确填充在这里，所以这里有一个链接：[http ://codepad.org/qZwua3h9](http://codepad.org/qZwua3h9)

注意：我拆分了矩阵行，以便您可以更轻松地查看它们，它们没有在我的工作表上拆分。

编辑：如果有人能弄清楚如何在这里粘贴示例数据，我会欢迎它，以便将来这篇文章可能对某人有用。我不确定键盘可以保存多长时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:06:05.277

I gave up and came to the conclusion that there is no reasonable amount of effort that will yield the desired results. Not only was the example case only ONE transformation, but the intended case was for 3 transformations - so three times the work. I came up with a Matlab solution in about 15 minutes. I understand that not everyone has access to Matlab though. So, if someone comes up with any reasonable working excel solution, I would welcome the knowledge and mark that answer as the accepted one. Regardless, here is the Matlab script:

```
 M = csvread('pointData.csv');

  T1result = zeros(215,6);
  T2result = zeros(215,6);
  T3result = zeros(215,6);

  for i=1:215,
      m = [M(i,1) M(i,2) 1; M(i,3) M(i,4) 1; M(i,5) M(i,6) 1];
      x = [M(i,7);M(i,9);M(i,11)];
      y = [M(i,8);M(i,10);M(i,12)];
      xresult = m\x;
      yresult = m\y;
      T1result(i,:) = [transpose(xresult),transpose(yresult)];

      m = [M(i,7) M(i,8) 1; M(i,9) M(i,10) 1; M(i,11) M(i,12) 1];
      x = [M(i,13);M(i,15);M(i,17)];
      y = [M(i,14);M(i,16);M(i,18)];
      xresult = m\x;
      yresult = m\y;
      T2result(i,:) = [transpose(xresult),transpose(yresult)];

      m = [M(i,13) M(i,14) 1; M(i,15) M(i,16) 1; M(i,17) M(i,18) 1];
      x = [M(i,19);M(i,21);M(i,23)];
      y = [M(i,20);M(i,22);M(i,24)];
      xresult = m\x;
      yresult = m\y;
      T3result(i,:) = [transpose(xresult),transpose(yresult)];
  end

  LeafId = csvread('extraColumnsForID.csv');
  Tresult = [LeafId, T1result, T2result, T3result];

  csvwrite('transforms.csv',Tresult); 
```

# java - 缺少 R.drawable.exit 库？

> ID：16045004
> 
> 赞同：0
> 
> 时间：2013-04-16T19:02:05.960
> 
> 标签：java, android, eclipse

我正在做一个项目，我们已经获得了从 Android 应用程序收集的数据。数据很混乱，所以我想让应用程序在受控环境中运行。我有原始的 java 源代码和清单，但没有 ADK。

我正在使用 Android ADT 在 Eclipse 中工作。但是，我是 Eclipse 和 Java 的新手，并且在编译时遇到了麻烦。安装一些库（如 Javamail）有助于消除大部分错误，但有些错误仍然存​​在。

其余的错误都与R类有关。例如：

```
R.drawable.exit
R.drawable.playgreen
R.xml.mainprefs 
```

Eclipse 给出的所有错误都是相同的：“playgreen 无法解析或不是一个字段”。我查看了这些字段：http: [//developer.android.com/reference/android/R.drawable.html](http://developer.android.com/reference/android/R.drawable.html)。尽管“R.drawable”列出，但“R.drawable.exit”字段未列出。

我还想念图书馆吗？如果是这样，我怎样才能找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:06:38.130

`R.drawable.exit`而其他人则引用将位于您的*res/drawable*文件夹中的可绘制对象（即图片）。同样的事情`R.xml.mainprefs`是引用*res/xml*文件夹中的 xml 文件。如果在它们各自的文件夹中没有这些资源，您将继续遇到错误。

# android - 从适配器启动活动不适用于 SwipeListView 库

> ID：16045006
> 
> 赞同：1
> 
> 时间：2013-04-16T19:02:08.757
> 
> 标签：android, android-intent, android-activity, android-adapter

我正在使用[SwipeListView](https://github.com/47deg/android-swipelistview)库，尝试在适配器中启动活动时出现错误。

```
public class ProductAdapter extends ArrayAdapter<Product> {

private Context context;

public ProductAdapter(Context context, int textViewResourceId, List<Product> objects) {
    super(context, textViewResourceId, objects);
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder viewHolder;

    final Product product = getItem(position);

    if (convertView == null) {
        viewHolder = new ViewHolder();

        convertView = LayoutInflater.from(getContext()).inflate(R.layout.cproduct_list_item, null);

        viewHolder.nom = (TextView) convertView.findViewById(R.id.name);
        viewHolder.commerce = (TextView) convertView.findViewById(R.id.commerce);
        viewHolder.prix = (TextView) convertView.findViewById(R.id.price);
        viewHolder.bAction1 = (Button) convertView.findViewById(R.id.example_row_b_action_1);
        viewHolder.bAction2 = (Button) convertView.findViewById(R.id.example_row_b_action_2);
        viewHolder.bAction3 = (Button) convertView.findViewById(R.id.example_row_b_action_3);

        convertView.setTag(viewHolder);

    } 
    else {
        viewHolder = (ViewHolder) convertView.getTag();
    }

    viewHolder.nom.setText(product.getName());
    viewHolder.commerce.setText(product.getCommerce());
    viewHolder.prix.setText(String.format("%s F", product.getPrice()));

    viewHolder.bAction1.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent intent = new Intent(context, MainActivity.class);
            context.startActivity(intent);
        }
    });

    return convertView;
}

private class ViewHolder {
    TextView nom;
    TextView commerce;
    TextView prix;
    Button bAction1;
    Button bAction2;
    Button bAction3;
}
} 
```

当我单击按钮时，我收到此错误：“应用程序已意外停止”。但是当我使用 Toast 时，它工作正常。我认为有一些与开始活动不一致的地方。

日志猫：

> 04-16 18:42:29.531：E/AndroidRuntime(29813)：致命异常：主要 04-16 18:42:29.531：E/AndroidRuntime(29813)：java.lang.NullPointerException 04-16 18:42:29.531： E/AndroidRuntime(29813): 在 com.tomsyweb.suna.ProductAdapter$2.onClick(ProductAdapter.java:71) 04-16 18:42:29.531: E/AndroidRuntime(29813): 在 android.view.View.performClick( View.java:2485) 04-16 18:42:29.531: E/AndroidRuntime(29813): 在 android.view.View$PerformClick.run(View.java:9080) 04-16 18:42:29.531: E/ AndroidRuntime(29813): 在 android.os.Handler.handleCallback(Handler.java:587) 04-16 18:42:29.531: E/AndroidRuntime(29813): 在 android.os.Handler.dispatchMessage(Handler.java:92 ) 04-16 18:42:29.531: E/AndroidRuntime(29813): 在 android.os.Looper.loop(Looper.java:130) 04-16 18:42:29.531: E/AndroidRuntime(29813): 在 android .app.ActivityThread。main(ActivityThread.java:3687) 04-16 18:42:29.531: E/AndroidRuntime(29813): at java.lang.reflect.Method.invokeNative(Native Method) 04-16 18:42:29.531: E/AndroidRuntime (29813): 在 java.lang.reflect.Method.invoke(Method.java:507) 04-16 18:42:29.531: E/AndroidRuntime(29813): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller。运行（ZygoteInit.java:867）04-16 18:42:29.531：E/AndroidRuntime（29813）：在 com.android.internal.os.ZygoteInit.main（ZygoteInit.java:625）04-16 18:42： 29.531：E/AndroidRuntime（29813）：在 dalvik.system.NativeStart.main（本机方法）E/AndroidRuntime(29813): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867) 04-16 18:42:29.531: E/AndroidRuntime(29813): 在 com.android.internal .os.ZygoteInit.main(ZygoteInit.java:625) 04-16 18:42:29.531: E/AndroidRuntime(29813): at dalvik.system.NativeStart.main(Native Method)E/AndroidRuntime(29813): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867) 04-16 18:42:29.531: E/AndroidRuntime(29813): 在 com.android.internal .os.ZygoteInit.main(ZygoteInit.java:625) 04-16 18:42:29.531: E/AndroidRuntime(29813): at dalvik.system.NativeStart.main(Native Method)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:04:59.600

`context`在你的情况下是一个字段，`ProductAdapter`你没有用任何值初始化它，所以它是`null`. 改为使用`getContext()`或使用 初始化`context`字段`this.context = context`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-02T01:03:21.143

您`Context`在构造函数中接收 ，因此您可以存储到变量上下文中：

```
private Context context;

public ProductAdapter(Context context, int textViewResourceId, List<Product> objects) {
    super(context, textViewResourceId, objects);
    this.context = context; //*** Here!
} 
```

并将其用于您的`Adapter`课程，例如：

```
...
...
  viewHolder.bAction1.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent intent = new Intent(context, MainActivity.class);
            context.startActivity(intent);
        }
    });
...
... 
```

# r - 自定义 metaMDS() 图

> ID：16045008
> 
> 赞同：1
> 
> 时间：2013-04-16T19:02:12.073
> 
> 标签：r, vegan

我使用“vegan”包创建了一个 NMDS 图，如下所示：

```
y=metaMDS(data,type="p").
plot(y) 
```

现在我有了这个 NMDS，我的观点得到了很好的传播。但是，我想添加情节的图形。我想给图中的点一个不同的颜色，这取决于我的数据集中的一个分类变量（变量称为“区域”），它有两个值（1 或 2）。

这可能吗？如果是这样，怎么办？

最好的，科恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T01:56:49.493

最简单的方法是使用分组变量`regio`来索引要绘制的颜色向量。例如，（未经测试，因为我没有你的`data`......）

```
colvec <- c("red","blue")
plot(y, type = "n")
points(y, display = "sites", col = colvec[data$regio])
## or
text(y, display = "sites", col = colvec[data$regio])
## depending on how you want to represent the sample scores 
```

# php - 抓住 youtube 播放器的开始按钮和观看秒数

> ID：16045013
> 
> 赞同：1
> 
> 时间：2013-04-16T19:02:18.423
> 
> 标签：php, javascript, ajax, jquery, youtube

我搜索了很多方法来获取访问我网站的用户的视频观看秒数。视频页面嵌入了 youtube 视频，我需要查看秒数才能在 Facebook 上发布。规则说：

> 如果该人观看了超过 50% 的视频，但没有完成，则应通过将 expires_in 更新为实际观看视频的时间长度来更新动作实例以反映该人已停止观看：[http:// /developers.facebook.com/docs/opengraph/guides/video.watches/](http://developers.facebook.com/docs/opengraph/guides/video.watches/)

到目前为止，我有以下即兴创作的代码。当用户按下开始视频时，我会启动一个计数器。问题在代码注释中。

```
function stopCycle(event) {
    switch( event.data ) {
//event.data can be 1 or 2 . If user press play is event.data = 1 and if press
pause event.data = 2 and again if press play will be case 1\. So each time
when user press START - PAUSE - CONTINUE - PAUSE event.data will have the value
        case 1:
// here i post on facebook after 10 seconds as rules said
            setTimeout('postwatch()', 10000);

//i get with ajax from youtube the video time (in seconds)
            $.ajax({
            url: "http://gdata.youtube.com/feeds/api/videos/<?php echo get_post_meta(get_the_ID(), 'tj_video_id_url', TRUE); ?>?alt=json",
            dataType: "jsonp",
            success: function (data) {
//here I appeal the ontimer function but the bug is that every tine i press play button even and after pause get appeal and the counter got crazy
                onTimer(data.entry.media$group.yt$duration.seconds);
            }
            });

        break;
        }
            console.log("onStateChange has fired!\nNew state:" );

}

i = 0;
function onTimer(videotime) {
  document.getElementById('mycounter').innerHTML = i;
  i++;
  if (i > videotime) {
    alert('Finish!');
  }
  else {
    setTimeout(onTimer, 1000);
  }
} 
```

您知道任何替代方法或可以为我回答正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:43:30.947

我做了这个作为替代，但我有一些延迟，当我点击暂停视频时，计时器停止但当我按下播放时，计时器已经从 + 1 秒开始，但在视频中我可能会在第 4,5 秒暂停，我的计时器从 5 开始：

```
 var started = 0;
    function stopCycle(event) {
        switch( event.data ) {
            case 1:
            ispaused = false;
            if(started == 0) {
                setTimeout('postwatch()', 10000);
                onTimer(youtube.youtubeinfo.entry.media$group.yt$duration.seconds, 0);
                started = 1;
            }else if(started == 1) {
                onTimer(youtube.youtubeinfo.entry.media$group.yt$duration.seconds, i);
            }

            break;
            case 2:
                setPause();
                console.log('pauz');
            break;
            }
    }

var ispaused=false;
function setPause(){
   ispaused=!ispaused;
}

i = 0;
function onTimer(videotime, remaining) {
if(!ispaused) {
  document.getElementById('mycounter').innerHTML = i;
  if(remaining > 0) {
        i = remaining;
        console.log('ramas');
    }

  console.log(i);
  if (i > videotime) {
    alert('Finish!');
  }else{
    setTimeout(onTimer, 1000);
  }
    i++;
}
} 
```

# perl - 如何在构建时根据输入创建（或不创建）类实例方法？

> ID：16045014
> 
> 赞同：5
> 
> 时间：2013-04-16T19:02:24.053
> 
> 标签：perl, class

我将如何创建我的类，以使某些方法仅在将某些值传递给构造函数时才会存在于实例中？

也许更通用的提问方式是：如何向现有的类实例添加方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:31:05.557

您可以根据标志将匿名子附加到对象：

```
use strict;
use warnings;
package Object;
sub new {
   my $class = shift;
   my $self = bless {}, $class;
   my %args = @_; 
   if ($args{method}) {
       $self->{method} = sub { print "hello\n" }
   }   
   return $self;
}

sub method {
    my $self = shift;
    if (not defined $self->{method}) {
        warn "Not bound\n";
        return;
    }   
    $self->{method}->();
}
1; 
```

使用：

```
use Object;
my $obj1 = Object->new(method=>1);
$obj1->method();
my $obj2 = Object->new();
$obj2->method(); 
```

您可以通过相同的接口将其扩展到许多方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T20:48:33.090

您可以使用 Moose 在运行时应用角色。

```
package My::Class;
use Moose;

has foo => ( isa => 'Str', is => 'ro', required => 1 );

sub BUILD {
  my $self = shift;

  if ($self->foo eq 'bar') {
    My::Class::Role->meta->apply($self);
  }  
}

no Moose;

package My::Class::Role;
use Moose::Role;

sub frobnicate {
  my $self = shift;

  print "Frobnicated!\n";
}

no Moose;

my $something = My::Class->new( foo => 'bar' );
print $something, "\n";
$something->frobnicate;
my $something_else = My::Class->new( foo => 'baz' );
print $something_else, "\n";
$something_else->frobnicate; 
```

给出：

```
Moose::Meta::Class::__ANON__::SERIAL::1=HASH(0x2fd5a10)
Frobnicated!
My::Class=HASH(0x2fd2c08)
Can't locate object method "frobnicate" via package "My::Class" at testmoose.pl line 32. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T19:22:09.880

用于`AUTOLOAD`定义函数。例如，如果调用方法 foo`$self->{foo} exists`

```
sub AUTOLOAD {
    my $methodname = $AUTOLOAD;
    if ($methodname eq "foo" && exists($_[0]->{foo})){
          goto &fooimplementationsub;
    }
    return;
} 
```

另一种技术是使用 glob 在运行时定义新方法

```
*PACKAGE::method = sub { 
    #code here
}; 
```

这有一个缺点，即该方法现在对类的所有实例都是可见的，因此不是您想要的。

第三种可能风险更大/效率低的方法是使用字符串 eval

```
eval <<EOF
sub foo { 
    #code here
};
EOF 
```

同样，这有一个缺点，即该方法现在对类的所有实例都是可见的，因此并不是您想要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T20:19:29.250

Don't do too much magic. I've gotten away from `AUTOLOAD` because it causes maintenance issues where mysterious methods suddenly appear and disappear.

One way to handle what you want is to define all the methods you need, and if a particular object is of the wrong type, simply cause that method to *croak*:

```
sub Foo {
    my $self       = shift;
    my $parameter  = shift;

    if ( $self->Class_type ne "Foo" ) {
        croak qq(Invalid method 'Foo' on object @{[ref $self]});
    }
    print "here be dragons\";
    return "Method 'Foo' successfully called";
} 
```

The above will not allow method `Foo` to be called unless the *class type* is `Foo`.

If your objects won't change (or you don't want them to change) once an object is created, you can define that object as a sub-class.

Before you *bless* a newly created object, check that special value and decide whether or not you need to create a specific sub-class instead.

```
package My_class;

sub new {
    my $class      = shift;
    my $class_type = shift;

    my $self = shift;

   if ( $class_type eq "Foo" ) {
      bless $self, "My_class::Foo";
   }
   else {
     bless $self, $class;
   }

package My_class::Foo;
use base qw(My_class);

sub Foo {
    my $self = shift;
    return "Foo Method successfully called!";
} 
```

Notice that my class `My_class::Foo` is a sub-class of `My_class` via the `use base` pragma. That means all methods for `My_class` are valid with objects of `My_class::Foo`. However, only objects of `My_class::Foo` can call the `Foo` method.

When I create my object (via the `new` subroutine), I look at the `$class_type` parameter. If it's a type `Foo`, I `bless` the class as `My_class::Foo`.

Here's an [example](https://github.com/qazwart/Autoconfig/blob/master/autoconfig.pl) where I use sub-classes to do what you want.

Every object is a class type of `Question`. You can see my constructor on line 1129\. I pass in a question type as one of the parameters to my constructor.

In line 1174 to 1176, I create my object, but then append the question type to the class, and then bless the question as that sub-class type. All of my subclasses are a type `Question` (see my `use base qw(Question);` below each `package` declaration. However, only questions of sub-class `Question::Date` and `Question::Regex` have a method `Format`. And, only objects of type `Question::Words` have a method `Force`.

Hope this helps.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T19:38:08.647

方法只是包中的子例程，而包只是一个包含 typeglob 的散列。并且可以在运行时修改哈希值。

因此，理论上，您可以在构造函数中添加或删除给定值的方法。

```
package WeirdClass;

sub new {
  my ($class, $name, $code) = @_;
  if ($name) {
    no strict;
    *{__PACKAGE__ . "::$name"} = $code;
  }
  bless {} => $class;
} 
```

然后像这样使用它：

```
my $object = WeirdClass->new(foo => sub {say "foo"});
$object->foo(); # prints "foo\n"; 
```

但是，此方法可用于该类的所有对象：

```
my $another_object = WeirdClass->new();
$another_object->foo; # works too. 
```

* * *

使用自动加载，可以模拟任意方法：

```
package BetterClass;

sub new {
  my ($class, %args) = @_;
  bless \%args => $class;
}

# destructor will be called at cleanup, catch with empty implementation
sub DESTROY {}; 

sub AUTOLOAD {
  my $self = shift;
  (my $method = our $AUTOLOAD) =~ s/.*://; #  $AUTOLOAD is like "BetterClass::foo"

  # check if method is allowed
  die "forbidden method $method" unless $self->{can}{$method};

  # mock implementations
  given ($method) {
    say "foo" when "foo";
    say "bar" when "bar";
    when ("add") {
      my ($x, $y) = @_;
      return $x + $y;
    }
    default { die "unknown method $method" }
  }
} 
```

然后：

```
my $o = BetterClass->new(can => { foo => 1, bar => 0});
$o->foo;
my $p = BetterClass->new(can => {bar => 1, add => 1});
$p->bar;
say $p->add(5, 6); 
```

当然，这些技术可以自由组合。

* * *

### 编辑：`can()`

要`AUTOLOAD`使用 can，应将受保护的方法移动到数据结构中：

```
my %methods;
BEGIN {
  %methods = (
    foo => sub {say "foo"},
    bar => sub {say "bar"},
    add => sub {
      my ($self, $x, $y) = @_;
      $x + $y;
    },
  );
} 
```

然后重写该`can`方法：

```
# save a reference to the origional `can` before we override
my $orig_can;
BEGIN{ $orig_can = __PACKAGE__->can("can") }

sub can {
  my ($self, $meth) = @_;

  # check if we have a special method
  my $code = $methods{$meth} if ref $self and $self->{can}{$meth};
  return $code if $code;

  # check if we have a normal method
  return $self->$orig_can($meth);
} 
```

并将`AUTOLOAD`更改为

```
my ($self) = @_; # do not `shift`
(my $method = our $AUTOLOAD) =~ s/.*://;
my $code = $self->can($method) or die "unknown method $method";
goto &$code; # special goto. This is a AUTOLOAD idiom, and avoids extra call stack frames 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-21T17:04:12.497

到目前为止给出的答案都没有真正处理实际提出的问题。

不直接支持在 Perl 中向*实例*添加方法。对象实例始终是某个类的实例，而该类是实际具有方法的东西。您不能将方法添加到类的单个实例，而不使该方法在同一类的每个其他实例上也可用。

对于您的问题，您有两个基本解决方案：

1.  始终提供方法，但测试一个标志以查看该方法是否应应用于给定实例。这是迄今为止最简单的。

2.  根据标志将每个对象祝福为子类。子类化主类以提供适当的方法。

如果您真的想在单个实例上添加方法，那么您必须将每个实例安排为每个对象的新派生类的单个实例。`DESTROY`这变得更难安排，加倍 - 所以如果你想避免泄漏内存并在对象被编辑后清理类。然而，这将允许真正的每个实例方法。

由于您不太可能真正需要第三个选项，因此最好使用第一个选项。

# matlab - Matlab中获取字符串元素的值

> ID：16045015
> 
> 赞同：-1
> 
> 时间：2013-04-16T19:02:28.413
> 
> 标签：matlab

我有一个这样的数组：

```
vars = {'X1','X2'}; 
```

该数组中的所有元素都有特殊的范围，例如：

```
X1 = [0.5,11.0];
X2 = [0.15,8.55]; 
```

现在在一个循环中我想达到每个元素的值（即 X1 值是 [0.5,11.0]），你能帮我吗？

最好的，埃尔纳兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:35:51.050

你也可以试试：

```
vars = {'X1','X2'};
X1 = [0.5,11.0];
X2 = [0.15,8.55];

vals = containers.Map(vars,{X1,X2});

vals('X1')
vals('X2') 
```

这是我从 Amro 的回答中得到[的](https://stackoverflow.com/questions/3591942/hash-tables-in-matlab)。这是输出：

```
ans =

    0.5000   11.0000

ans =

    0.1500    8.5500 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:14:51.493

我会将所有内容存储在一个结构中，但我不确定它是否是您想要的：

```
clc,clear all,close all
vars = {'X1','X2'};
X1 = [0.5,11.0];
X2 = [0.15,8.55];
res = struct(char(vars(1)),X1,char(vars(2)),X2 
```

然后我会打电话

```
res.X1
res.X2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T19:34:02.927

好吧，一种选择是用来`eval`获取值：

```
X1 = [1,2];
X2 = [3,4];
vars = {'X1','X2'};

for ii = 1:length(values)
    vals{ii} = eval(vars{ii});
end 
```

它将值存储在变量`vals`中，即`vals = {[1,2], [3,4]}`。

但是，使用`eval`通常是一个非常糟糕的主意。根据您想做什么，可能有更好的方法。例如，您可以将您感兴趣的变量存储在元胞数组中，或作为结构的字段。

# algorithm - 如何检测线段与圆柱体的交点？

> ID：16045017
> 
> 赞同：3
> 
> 时间：2013-04-16T19:02:32.197
> 
> 标签：algorithm, geometry, intersection

假设我们有一个`3d`空间，线段由其起点和终点 ( `A` `{Ax, Ay, Az}`, `B` `{Bx, By, Bz}`) 定义，圆柱体由其中心位置`C` `{Cx, Cy, Cz}`、半径`R`和高度定义`H`。如何获得相交的事实以及相交是否发生在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T18:23:45.857

[试试这个](https://stackoverflow.com/questions/4078401/trying-to-optimize-line-vs-cylinder-intersection)。谷歌的胜利 - 答案就在这里。这甚至有源代码和指向更多信息的链接供您使用。只需一点点搜索，您就可以自己得到这个。

这是基于@DuckQueen 的回答 - 它只是添加投影交点 - 如果有的话 - 看看它是否落在圆柱体的高度内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:19:28.150

令 x = (y-a2)/b2 = (z-a3)/b3 为直线方程。

让 (x-c1)^2 + (y-c2)^2 = d^2 成为圆柱体的方程。

将线方程中的 x 代入圆柱方程。

您可以使用二次方程求解 y。您可以有 0 个解决方案（圆柱和线不相交）、1 个解决方案或 2 个解决方案。

将 y 的值代入直线方程得到 x 和 z 坐标。

要从两点获取线方程，请参见： http: [//www.nabla.hr/Z_CGLinesAndPlanesIn3DSpace-A.htm](http://www.nabla.hr/Z_CGLinesAndPlanesIn3DSpace-A.htm)

我提供的解决方案适用于无限高的圆柱体。限制为高度为 H 的圆柱体：找到交点，如果点在高度范围内（即 z 在限制范围内），则输出点。

# c# - 如何在 C# 中将输出格式化为两位小数和“$”符号？

> ID：16045019
> 
> 赞同：2
> 
> 时间：2013-04-16T19:02:51.080
> 
> 标签：c#, string-formatting

C# 语言的新手，我刚刚创建了一个贷款抵押计算器，我在下面格式化我的代码时遇到了问题。我要做的是将每月付款值格式化为小数点后 2 位并添加“$”符号。任何帮助，将不胜感激。谢谢！

我的本金金额的示例输入：

```
//User input for Principle amount in dollars
Console.Write("Enter the loan amount, in dollars(0000.00): ");
principleInput = Console.ReadLine();
principle = double.Parse(principleInput);
//Prompt the user to reenter any illegal input
        if (principle < 0)
        {
            Console.WriteLine("The value for the mortgage cannot be a negative value");
            principle = 0;
        }

//Calculate the monthly payment

double loanM = (interest / 1200.0);
double numberMonths = years * 12;
double negNumberMonths = 0 - numberMonths;
double monthlyPayment = principle * loanM / (1 - System.Math.Pow((1 + loanM),    negNumberMonths));

//Output the result of the monthly payment
        Console.WriteLine("The amount of the monthly payment is: " + monthlyPayment);
        Console.WriteLine();
        Console.WriteLine("Press the Enter key to end. . .");
        Console.Read(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T19:06:18.197

> 我要做的是将每月付款值格式化为小数点后 2 位并添加“$”符号。

听起来您想使用[货币格式说明符](http://msdn.microsoft.com/en-gb/library/dwhawy9k.aspx#CFormatString)。

```
Console.WriteLine("The amount of the monthly payment is: {0:c}", monthlyPayment); 
```

当然，这并不总是使用美元符号 - 它会使用线程当前文化的货币符号。您始终可以`CultureInfo.InvariantCulture`明确指定。

但是，我强烈建议您*不要*使用`double`货币价值。改为使用`decimal`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:14:00.117

[来自 MSDN：标准数字格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx) （查找“货币（“C”）格式说明符）

Console.WriteLine("月付金额为：{0:C2} ",monthlyPayment);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T19:12:15.317

要使用 2 位小数，您可以使用：

```
Console.WriteLine("The amount of the monthly payment is: "$ " + Math.Round(monthlyPayment,2)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T19:06:37.090

您可以使用以下[`Math.Round()`](http://msdn.microsoft.com/en-us/library/3s2d3xkk.aspx)功能：

```
double inputNumber = 90.0001;
string outputNumber = "$" + Math.Round(inputNumber, 2).ToString(); 
```

# jquery - Ajax 给了我这个错误 Uncaught Error: Syntax error, unrecognized expression

> ID：16045024
> 
> 赞同：0
> 
> 时间：2013-04-16T19:03:19.630
> 
> 标签：jquery, html, ajax, django

这是我的 ajax 脚本，这是错误 Uncaught Error: Syntax error, unrecognized expression the code works and removes the second drop down menu but does not append the updated 1

```
$(document).ready(function(){
    $('#Channel_dropdown').change(function(){
        var channel = $('#Channel_dropdown').val()
        alert(channel);
        $.ajax({
            url: "/advanced_subchannel/",
            type: "GET",
            data: {
                'ch_id' : channel,
            },
            success:function(req){
                $('#subChannel_dropdown').remove();
                $(req).find('#advancedsearch_subchannels').each(function(i){
                    $('#advancedsearch_subchannels').append($(req).find('#subChannel_dropdown'));
                });
            }   
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:42:23.250

语法有一些“错误”的小事情

```
$(document).ready(function () {
    $('#Channel_dropdown').change(function () {
        var channel = $('#Channel_dropdown').val(); //Forgot semicolon
        alert(channel);
        $.ajax({
            url: "/advanced_subchannel/",
            type: "GET",
            data: {
                'ch_id': channel //Extra unneeded comma
            },
            success: function (req) {
                $('#subChannel_dropdown').remove();
                $(req).find('#advancedsearch_subchannels').each(function (i) {
                    $('#advancedsearch_subchannels').append($(req).find('#subChannel_dropdown'));
                });
            }
        });
    });
}); 
```

有些网站可以为您验证 javascript，请查看[http://jsfiddle.net/他们有一个使用](http://jsfiddle.net/)[http://www.jslint.com/](http://www.jslint.com/)的内置验证器

# spring-mvc - 在spring控制器中传递注入依赖项引用的最佳方法

> ID：16045029
> 
> 赞同：0
> 
> 时间：2013-04-16T19:03:34.363
> 
> 标签：spring-mvc, dependency-injection, autowired

我有一个 Spring portlet 控制器类。在这个类中，有一个这样的依赖：

```
@Autowired
protected ServiceClass someService;

@Autowired
protected ApplicationContext context; 
```

在控制器中，有一个实用程序类被调用，如下所示：

```
UtilityClass.loadStaticData((WebApplicationContext)context); 
```

在里面`UtilityClass`，我有：

```
public static synchronized boolean  loadStaticData(WebApplicationContext context){

    ServiceClass someService = (ServiceClass) context.getBean("someService");
...
} 
```

我的问题是：以如此复杂的方式获取 someService 的句柄有什么好处吗？我们本可以将 Controller 类 #1 中的引用“someService”传递给 UtilityClass。作者不在了，所以我在这里问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:42:25.077

这基本上是依赖注入试图避免的：从容器中获取依赖，而不是让容器注入依赖。

这个实用程序类应该是一个 Spring bean，服务将在其中注入。然后您可以将这个实用程序 bean 注入到控制器中。

# database - 尝试使用子查询复制表

> ID：16045030
> 
> 赞同：0
> 
> 时间：2013-04-16T19:03:34.490
> 
> 标签：database, oracle

所以我正在尝试复制我刚刚创建的表。我把它命名为研究生候选人。使用我目前所知道的，这就是它的样子。我想将表的副本命名为harmeier。

```
CREATE TABLE harmeier
AS (SELECT student_id, last_name, first_name, credits, graduation_date)
FROM grad_candidates; 
```

它给了我一个错误，说在预期的地方找不到 FROM 关键字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:06:17.427

括号是问题所在。只需摆脱它们，您就会万事俱备：

```
CREATE TABLE harmeier
AS SELECT student_id, last_name, first_name, credits, graduation_date
FROM grad_candidates; -- no parentheses at all 
```

如果您愿意，也可以将它们放在*整个查询周围；*无论哪种方式，结果都是相同的：

```
CREATE TABLE harmeier
AS (SELECT student_id, last_name, first_name, credits, graduation_date
FROM grad_candidates);  -- or parentheses around the entire query 
```

# c++ - 标题未刷新 - Visual C++ 2012

> ID：16045032
> 
> 赞同：6
> 
> 时间：2013-04-16T19:03:46.990
> 
> 标签：c++, visual-c++, visual-studio-2012, header-files

使用 Visual C++ 2012，没有预编译头文件：

当我更改包含在多个文件中的头文件时，构建时不会考虑更改。如果我全部重建，则会考虑更改。

复制案例：

*包括.h*

```
#ifndef INCLUDE_H_
#define INCLUDE_H_

class A {
public:
   A(int i) : i_(i) { }
   int i_;
};

class B {
public:
  B(int i = 1) : a_(i) { }
  A a_;
};

#endif INCLUDE_H_ 
```

*假人.cpp*

```
#include "include.h" 
```

*主文件*

```
#include <iostream>
#include "include.h"

int main(int, char**) {
  B b;
  std::cout << b.a_.i_ << std::endl;
  return 0;
} 
```

这输出 1。

现在我更改`int i = 1`为`int i = 2`in *include.h*；我构建并运行，它输出 1！我*重建*并运行，它输出 2。

*   dummy.cpp文件是重现错误所必需的*。*在现实生活中，该文件使用的是*include.h*但不是 A 类和 B 类（但这似乎并没有改变任何东西；在*dummy.cpp*中声明一个包含成员 A 和 B 的 C 类仍然会重现问题）。当删除文件*dummy.cpp*，或者将其重命名为*zdummy.cpp*（大概会在*main.cpp*之后编译），问题就消失了。

*   我尝试了包含警卫，一次编译指示，两个都没有，在每种情况下都会重现问题。

*   我无法使用 Code::Blocks/GCC 重现此问题；我没有尝试使用旧版本的 Visual Studio。

我是否遗漏了什么或者这真的是 Visual Studio 中的一个错误？如果是后者，是否有已知的解决方法？（除了每一步都*重新构建）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:32:02.310

头文件必须是项目的一部分。如果不是，项目仍将构建，即编译器可以找到它，但 Visual Studio 不会跟踪文件的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:46:14.973

我过去也经历过这样的事情。

你使用预编译的头文件吗？如果您这样做，请从 PCH 中删除任何项目特定的标题。这是一个蹩脚的错误。只在 PCH 中放置外部的、不变的头文件，如 C/C++ 标准头文件、Windows 头文件、Boost 等。

# ssl - 如何使用 socat 将传输的数据分叉到脚本中？

> ID：16045046
> 
> 赞同：1
> 
> 时间：2013-04-16T19:04:20.250
> 
> 标签：ssl, man-in-the-middle, socat

我想用*socat*分析客户端和服务器之间传输的数据。我已经设法使用以下命令将*socat*设置为中间人：

```
socat -x -v OPENSSL-LISTEN:4443,reuseaddr,verify=0,cert=server.crt,key=server.key OPENSSL:server.example:443,verify=0 
```

虽然我可以看到传输的数据，但我想将其发送到脚本以进行处理以供以后分析。

有谁知道解决方案，以便我可以将每个传输的数据包发送到脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:38:51.770

我找到了一个解决方案，允许使用[*tee*](http://stuff.mit.edu/afs/sipb/machine/penguin-lust/src/socat-1.7.1.2/EXAMPLES)[将传输的数据记录到文件中](http://stuff.mit.edu/afs/sipb/machine/penguin-lust/src/socat-1.7.1.2/EXAMPLES)*：*

 *```
socat OPENSSL-LISTEN:4443,reuseaddr,verify=0,cert=server.crt,key=server.key,fork SYSTEM:'tee requests | socat - "OPENSSL:server.example:443,verify=0" | tee responses' 
```

这离我正在寻找的东西更近了一步。*

# javascript - WIndows 8 App, HTML/Javascript 离线黑屏

> ID：16045047
> 
> 赞同：0
> 
> 时间：2013-04-16T19:04:36.117
> 
> 标签：javascript, html, windows-8, winjs

我正在尝试开发一个小型 Windows 8 应用程序，作为我将要从事的更大项目的测试。

我正在使用 VS 2012、HTML、CSS 和 Javascript。我已经能够毫无问题地创建、构建和部署应用程序，但是我注意到如果我将平板电脑置于飞行模式（即离线）然后尝试打开应用程序，我只会得到一个黑屏.
是否有处理离线场景的“最佳实践”？

我熟悉将清单用于移动 Web 应用程序，但这在这里似乎无关紧要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:09:48.180

需要使用 NetworkStatusChange 事件并采取要求的措施。这个[msdn 的快速入门](http://msdn.microsoft.com/en-us/library/windows/apps/hh700376.aspx)还记录了最佳实践。

您可以试用 Microsoft 的一些应用程序，例如商店、新闻、音乐，以了解您的应用程序的离线行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:26:00.960

使用`applicationData`. [http://msdn.microsoft.com/en-us/library/windows/apps/hh465118.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465118.aspx)

来源：[http ://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/a5f0477d-c665 -477e-b118-77446b7029ce](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/a5f0477d-c665-477e-b118-77446b7029ce)

# android - ksoap2 信封格式不正确

> ID：16045048
> 
> 赞同：2
> 
> 时间：2013-04-16T19:04:38.077
> 
> 标签：android, ksoap2, android-ksoap2

我正在尝试使用 ksoap2 向我的 .net 网络服务发送一个肥皂信封。不幸的是，它正在创建的信封，网络服务不喜欢。我在soapUI中对此进行了测试，并得到了与[]（JSON）相同的返回。Ksoap 正在生成：

```
<v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance"  
 xmlns:d="http://www.w3.org/2001/XMLSchema"
 xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" 
 xmlns:v="http://schemas.xmlsoap.org/soap/envelope/">
<v:Header />
  <v:Body>
    <getTest xmlns="http://www.carefusion.com/" id="o0" c:root="1">
       <testint i:type="d:int">16875</testint>
    </getTest>
  </v:Body>
</v:Envelope> 
```

在soapUI中测试，web服务真想看看：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
  xmlns:car="http://carefusion.com/">
<soapenv:Header/>
  <soapenv:Body>
    <car:getTest>
      <car:testint>16874</car:testint>
    </car:getTest>
  </soapenv:Body>
</soapenv:Envelope> 
```

它返回了我的 JSON。我可能没有正确使用 ksoap 库。我可以对我的代码做些什么来正确格式化信封？

第一屏.java

```
 package carefusion.com.MyTest;
import java.util.ArrayList;
import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.widget.ListView;
import android.widget.TextView;

public class FirstScreen extends Activity {

    /**Called when the activity is first created */
    private static final String URL="http://10.220.13.202:8080/Respiratory/ResService.asmx";
    private static final String SOAP_ACTION ="http://carefusion.com/getTest";
    private static final String METHOD_NAME ="getTest";
    private static final String NAMESPACE="http://www.carefusion.com/";
    private static final String param="16875";

    TextView tv;
    ListView lv;
    ArrayList<AgentMetric> agentMetricList = new ArrayList<AgentMetric>();
    AgentMetric agentObj = new AgentMetric();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_first_screen);
        tv=(TextView)findViewById(R.id.TextView01);

        lv=(ListView)findViewById(R.id.ListView01);

     try
     {
          String response=  new RetrieveJson().execute(URL, SOAP_ACTION, METHOD_NAME, NAMESPACE, param).get();
          tv.setText(response);

     }

     catch(Exception e)
     {
          tv.setText(e.toString()); 

     }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.first_screen, menu);
        return true;
    }

} 
```

RetrieveJson.java

```
 package carefusion.com.MyTest;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.os.AsyncTask;
import android.util.Log;

public class RetrieveJson extends AsyncTask  <String, Void, String>
{

    @Override
    protected String doInBackground(String... URL) {
        String result="";
        SoapObject Request=new SoapObject (URL[3].toString(),URL[2].toString());

        PropertyInfo pi = new PropertyInfo();
        pi.setName("testint");
        pi.setValue(Integer.parseInt(URL[4].toString()));
        pi.setType(int.class);
        Request.addProperty(pi);

        SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        soapEnvelope.dotNet=true;
        soapEnvelope.setOutputSoapObject(Request);

        HttpTransportSE aht =new HttpTransportSE(URL[0].toString());
        aht.debug=true;

        try
        {

        aht.call(URL[1].toString(), soapEnvelope);
        SoapObject response = (SoapObject)soapEnvelope.bodyIn;
          result = response.getProperty(0).toString(); 
        }
        catch(Exception e)
        {
            e.printStackTrace();

        }
        finally{
           Log.i(getClass().getSimpleName(),"requestDump : "+aht.requestDump);
           Log.i(getClass().getSimpleName(),"responseDump : "+aht.responseDump);
}

        return result;
    }

    @Override
    protected void onPostExecute(String result) {

    }

} 
```

# javascript - 正则表达式用作 RegExp() 时使 Chrome 崩溃

> ID：16045049
> 
> 赞同：1
> 
> 时间：2013-04-16T19:04:38.723
> 
> 标签：javascript, regex, string

有问题的正则表达式是：

```
/\[quote\]((?:[^](?!\[quote\]))*?)\[\/quote\]/gi 
```

我应用它的字符串是

```
[quote]Level 10
[quote]Level 9
[quote]Level 8
[quote]Level 7
[quote]Level 6
[quote]Level 5
[quote]Level 4
[quote]Level 3
[quote]Level 2
[quote]Level 1[/quote]
Level 2[/quote]
Level 3[/quote]
Level 4[/quote]
Level 5[/quote]
Level 6[/quote]
Level 7[/quote]
Level 8[/quote]
Level 9[/quote]
Level 10[/quote] 
```

当我使用 RegExp() 创建它时，Chrome 会挂起：

```
new RegExp("\[quote\]((?:[^](?!\[quote\]))*?)\[\/quote\]", "gi") 
```

还值得注意的是，此正则表达式似乎无法被某些解析器正确解析，例如[http://regexpal.com/](http://regexpal.com/)。

我的目标是从内到外匹配引号（从最里面的一组开始，然后我的出路）。任何人都有修复正则表达式的想法，或者其他方式来做我想做的事情？

编辑：如果你想看到它的行为正确，它在这里工作：[http ://regexr.com?34i3p](http://regexr.com?34i3p)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:12:55.087

使用字符串创建 RegExp 时，需要对斜杠进行转义：

```
new RegExp("\\[quote\\]((?:[^](?!\\[quote\\]))*?)\\[\\/quote\\]", "i") 
```

斜杠被忽略，所以你最终会得到像`[quote]`.
可能无法匹配这些导致[灾难性的回溯](http://www.regular-expressions.info/catastrophic.html)，但老实说我不太明白如何。

# jquery - JQuery Validate 动态更改忽略规则

> ID：16045059
> 
> 赞同：11
> 
> 时间：2013-04-16T19:05:02.223
> 
> 标签：jquery, validation, jquery-validate

我有一个像这样的简单验证块：

```
$("#myForm").validate({
     ignore: ":hidden"
}); 
```

当用户单击某个按钮时，我想将该忽略规则更改为`ignore: []`，然后对其进行验证，然后再切换回来。我意识到我可以改用类，但我想知道是否有办法解决这个问题。

编辑：应该注意的`ignore: []`是，使用`.validate()`.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-16T19:09:21.303

```
$('#myForm').validate().settings.ignore = "newIgnore"; 
```

validate() 方法返回对您使用原始 validate() 调用创建的验证器对象的引用。

然后您可以调用属性 .settings.ignore

# transactions - 如何以原子方式更新带有时间戳的行？

> ID：16045062
> 
> 赞同：1
> 
> 时间：2013-04-16T19:05:37.877
> 
> 标签：transactions, oracle11g, sql-update, rowlocking

我有一个分布式应用程序，它使用数据库来同步客户端。客户端将尝试更新记录，但只有在过去 1 小时内没有其他客户端更新时才会这样做。

* * *

这是缩小的代码和困境：

假设一个客户试图将一个字段更新为“红色”（检查过去一小时内没有其他人更新它）：

```
UPDATE mytesttable
SET Status = 'Red',
    TimeOfLastUpdate = sysdate 
WHERE TimeOfLastUpdate < sysdate-1/24 
```

同时，另一个客户端尝试将其更新为“绿色”（检查过去一小时内没有其他人更新它）：

```
UPDATE mytesttable
SET Status = 'Green',
    TimeOfLastUpdate = sysdate 
WHERE TimeOfLastUpdate < sysdate-1/24 
```

我可以假设只有*一个*客户端会成功更新该行吗？

* * *

这就是为什么我认为答案是“不”的原因：

由于 Oracle 必须在获取行级更新锁`sysdate` *之前解决（因为它必须首先使用它来查找行），所以似乎存在竞争条件：*

1.  客户端“红色”计算`sysdate`
2.  客户“Green”计算`sysdate`
3.  1小时通行证
4.  客户端“红色”更新`TimeOfLastUpdate`为旧`sysdate`
5.  客户端“绿色”更新`TimeOfLastUpdate`旧`sysdate`（因此更新两次）

* * *

我将其确定为比赛条件是否正确？如果没有，我错过了什么？

如果是这样，是否有有效、更可靠的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:53:07.967

根据我的理解，这些场景应该在代码级别处理，而不是留给后端。在编程期间可以轻松处理同步。尝试以这种方式实施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T14:20:10.993

对我有用的解决方案： double `update`。例如：

```
UPDATE mytesttable
SET TimeOfLastUpdate = TimeOfLastUpdate 
WHERE TimeOfLastUpdate < sysdate-1/24

UPDATE mytesttable
SET Status = 'Red',
    TimeOfLastUpdate = sysdate 
WHERE TimeOfLastUpdate < sysdate-1/24

COMMIT; 
```

（“绿色”的类似代码）

第一个`update`不会改变任何东西，但它会抓住行上的锁，直到`commit`被调用才会释放。

`sysdate`第二次更新使用保证大于或等于获取锁的时间的a 更新行，从而防止竞争条件。（除非`sysdate`时光倒流。）

# fortran - 意图在fortran中进行别名

> ID：16045063
> 
> 赞同：1
> 
> 时间：2013-04-16T19:05:38.260
> 
> 标签：fortran

如果虚拟变量是意图（IN），那么调用带有别名的fortran子例程是否合法（或者它是否可以提供麻烦）？我必须在我的代码中做这样的事情：

```
 program myprogram
     ......
     ......
     call check(itstrt, itstrt )
     do k= itstrt,itend
        call check(itstrt, k)
     enddo
  end

  subroutine check(itstrt, k)
  integer , intent(in)    :: itstrt, k
     if(k==itstrt) write(*,*) 'I gotta do something'
  end 
```

我知道我可以很容易地使用一个额外的变量 varPROV=itstrt 来调用第一个检查作为调用 check(itstrt, varPROV) 但我想知道标准说什么以及这样做有什么麻烦。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:05:55.093

这是合法的。别名问题和`INTENT(IN)`（分别）与试图定义虚拟变量的程序有关 - 可能是出现在赋值语句或类似语句左侧的变量。

# ios - 为 iOS 设置移动和缩放框

> ID：16045066
> 
> 赞同：1
> 
> 时间：2013-04-16T19:05:58.287
> 
> 标签：ios, uiimagepickercontroller

我见过几个应用程序，在您拍照后，它会显示移动和缩放图片的视图，并带有一个显示生成图像的框。我的应用程序会为用户拍摄或从库中挑选照片，并将其添加到 PDF 文件中。我需要此文件具有一定的大小以适合 PDF，因此我需要相应地设置移动和缩放框，但我找不到任何有关如何执行此操作的文档。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-19T02:38:43.903

只需将 UIImagePickerController 实例设置`allowsEditing`为**YES**。

```
_imagePickerController = [[UIImagePickerController alloc] init];
...
_imagePickerController.delegate = self;
_imagePickerController.allowsEditing = YES; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T06:39:55.937

UIImagePickerController 选择器仅执行 320x320 裁剪。

尝试使用这个：[https](https://github.com/gekitz/GKImagePicker) ://github.com/gekitz/GKImagePicker (GKImagePicker)

示例代码：

```
self.imagePicker = [[GKImagePicker alloc] init];
self.imagePicker.cropSize = CGSizeMake(320, 90);
self.imagePicker.delegate = self;

[self presentModalViewController:self.imagePicker.imagePickerController animated:YES]; 
```

# sql - 通过重复计算接力赛时间（在动态 SQL 中）

> ID：16045068
> 
> 赞同：2
> 
> 时间：2013-04-16T19:06:00.113
> 
> 标签：sql, tsql, dynamic-sql

我有一个数据库，其中有一个记录表，用于存储一系列临时事务和已完成事务之间的时间戳。

它以一种非常奇怪的方式存储在数据库中，这给我带来了问题。

让我们以接力赛为例。这就是数据的记录方式。

```
RACE         TIME                             RUNNER    FINISHTIME
 1      2011-09-28 11:27:01.437        1                2011-09-28 17:19:00.843
 1      2011-09-28 12:35:33.427        2                2011-09-28 17:19:00.843
 1      2011-09-28 12:36:15.270        3                2011-09-28 17:19:00.843 
```

“时间”表示接力棒的传递和最后一名跑者完成的时间。

所以单个跑步者的时间背后的数学是：
Time(Runner_n) = **Time(Runner_n+1) - Time (Runner_n)**

除了终点赛跑者，没有 n+1 记录。他们得到：
Time(Runner_final) = **FinishTime - Time(final)**

我将尝试创建一个新表并使用游标遍历每场比赛——尝试存储以下元组：Race、RunnerID、TimeCompleted。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:40:00.470

这根本不需要动态 SQL，只需要一个连接。加入下一条记录。如果存在，则使用该记录中的时间。否则，使用比赛的完成时间：

```
select t.race, t.runner, t.time as starttime,
       coalesce(tnext.time, t.finishtime) as endtime,
       DATEDIFF(sec, t.time, coalesce(tnext.time, t.finishtime)) as Seconds
from t left outer join
     t tnext
     on t.race = tnext.race and
        t.runner = tnext.runner - 1 
```

# angularjs - 将 Angular UI-Bootstrap Typeahead 限制为特定对象属性

> ID：16045069
> 
> 赞同：20
> 
> 时间：2013-04-16T19:06:00.353
> 
> 标签：angularjs, angular-ui-bootstrap

我有以下[Angular](http://angularjs.org/) [UI-Bootstrap](http://angular-ui.github.io/bootstrap/) [typeahead](http://angular-ui.github.io/bootstrap/#/typeahead)工作得很好：

```
<input class="span2" type="text" ng-model="selectedStuff" typeahead="stuff as stuff.name for stuff in stuffs | filter:$viewValue"/> 
```

不过，它几乎工作*得*太好了。我能够显示`stuffs.name`用于`typeahead`AND 中选择完整`stuff`对象的目的`stuffs`。问题是 my`$viewValue`匹配所有属性，`stuff`而不仅仅是`stuff.name`. 我试过在没有运气的情况下将其添加`.name`到各个地方。`typeahead`有没有一种直接的方法来显示和匹配，`.name`但仍然返回整个对象？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-16T20:17:15.983

[http://angular-ui.github.io/bootstrap/](http://angular-ui.github.io/bootstrap/) repo 中的 typeahead 指令是为了很好地适应现有的 AngularJS 生态系统而构建的。这意味着该指令尝试尽可能多地重用 AngularJS 中已经使用的语法、过滤器和指令。

回到你的问题 - 过滤本身是由这里描述的 Angular 的过滤器过滤器完成的：[http](http://docs.angularjs.org/api/ng.filter:filter) ://docs.angularjs.org/api/ng.filter :filter 提到的过滤器的语法足够灵活，可以将搜索限制在选定的一组特性：

```
typeahead="stuff as stuff.name for stuff in stuffs | filter:{name: $viewValue}" 
```

请注意：`filter:{name: $viewValue}`

在这里工作：[http ://plnkr.co/edit/o1qWKq8LSmbbmVaYkOvb?p=preview](http://plnkr.co/edit/o1qWKq8LSmbbmVaYkOvb?p=preview)

# jquery - 部署到服务器后，jQuery 和 AJAX 无法正常工作

> ID：16045078
> 
> 赞同：5
> 
> 时间：2013-04-16T19:06:29.567
> 
> 标签：jquery, ajax, asp.net-mvc

我有一个项目在我的本地机器上运行良好，但在部署到服务器后无法运行。如果我在 javascript 中放置断点，它会命中它们并遍历代码，但不会做它应该做的事情（jquery 自动完成）。我什至确保我需要的脚本文件存储在服务器上。有什么我在寻找吗？

需要运行的代码：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("input.autocomplete").autocomplete({
            appendTo: '.container',
            source: function (request, response) {
                $.ajax({
                    url: '/Home/GetUsers',
                    type: "POST",
                    dataType: "json",
                    data: { query: request.term },
                    success: function (data) {
                        response($.map(data, function (item) {
                            return { label: item, value: item };
                        }));
                    }
                });
            }
        });
    })
</script> 
```

包含 jquery 的 _Layout.cshtml 页面：

```
@Styles.Render("~/Content/css")
@Styles.Render("~/Content/themes/base/jquery-ui.css")
@Styles.Render("~/Content/themes/base/jquery-ui.autocomplete.css")
@Scripts.Render("~/bundles/modernizr")

<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.min.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery-ui-1.8.20.js")"></script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-21T19:10:09.063

我在我的 mvc 项目中也面临这个问题....

我通过以下步骤解决了这个问题。

1）把它放在你的布局页面的脚本部分

```
<script type="text/javascript">
var RootUrl = '@Url.Content("~/")';
</script> 
```

2）在ajax url中添加“RootUrl”变量。（它也适用于您的 Js 文件，您在 ajax url 之前添加“RootUrl”）

```
 url: RootUrl +'Home/GetUsers'; 
```

它对我来说很有效，但是任何人都有其他解决方案，然后请发给我

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T20:20:14.517

我需要将 url 更改为在服务器上工作的 URL。我的最终代码如下所示：

```
<script type="text/javascript">
$(document).ready(function () {
    $("input.autocomplete").autocomplete({
        appendTo: '.container',
        source: function (request, response) {
            $.ajax({
                url: '/Lookup/Home/GetUsers',
                type: "POST",
                dataType: "json",
                data: { query: request.term },
                success: function (data) {
                    response($.map(data, function (item) {
                        return { label: item, value: item };
                    }));
                }
            });
        }
    });
})
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-13T12:36:15.190

尽管这是一个非常古老的问题，但这可能会在将来对某人有所帮助。

如果它是一个已开发的 .asmx 页面，那么我们必须在 web.config 中指定 HTTP 动词才能访问它。

它将在本地工作，但在 IIS 上部署后不能工作。

前任：

```
 <webServices>
    <protocols>
      <add name="HttpGet"/>
      <add name="HttpPost"/>
    </protocols>
  </webServices> 
```

谢谢 Pooja G

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-27T12:19:13.673

有同样的问题，部署到服务器后，ajax 调用不起作用。Amol 的方法适用于部署，但不适用于本地开发计算机。在本地开发调试时，您必须删除“~”。

经过一番研究，找到了一个更好的解决方案，可以同时适应这两种环境。在您的 ajax 方法中，将**URL**参数更改为以下方式：

```
 url: "@Url.Action("GetUsers", "Home")" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-02-26T12:08:21.630

在您的情况下，服务器不支持 Url ，

消除`'/Home/GetUsers'`

并使用`url: "@Url.Action("Action", "Controller")"`

# unit-testing - 单元测试停止工作并陷入待处理状态 VS2012

> ID：16045084
> 
> 赞同：28
> 
> 时间：2013-04-16T19:06:50.250
> 
> 标签：unit-testing, visual-studio-2012

我在这里有一个重大问题，我不知道如何调试该问题。首先，我正在运行 VS2012 Update 2 (v11.0.60315.01)。单元测试*一直*在运行，我今天注意到它们停止工作了。过去一周左右我在做一些不同的事情，所以自从我上次运行任何单元测试以来至少有一两个星期了。

所有的测试都停留在窗口中的`Pending`状态。`Unit Test Session`我什至尝试构建一个新的测试工具并运行一些简单的单元测试。它们的行为相同，所以我认为这不是一个单一的解决方案问题。

我显然已经重新启动了机器，其中也包括重新启动 VS.NET 2012。我没有收到任何错误、消息、问题等。单元测试都只是停留在`Pending`状态中，它们都不会运行。

**我使用vstest.console.exe**工具运行了包含我的测试的 .dll，我得到了结果“**测试运行成功**”、“**测试执行时间：0.4952 秒**”。好的，这告诉我 VS2012 有问题，因为测试使用命令行独立运行。

我该如何调试这个问题？我看到了删除单个解决方案的设置文件的解决方案，但这似乎是 VS2012 的一个问题。关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-17T08:31:47.703

如果您使用的是 Resharper，则 7.1.2 及更低版本与 Visual Studio 2012 Update 2 结合使用会出现问题。

Jetbrains[发布了一个新版本（7.1.3）解决了这个问题](http://blogs.jetbrains.com/dotnet/2013/04/resharper-713-is-available-for-visual-studio-2012-update-2/)，最新的 EAP 也解决了这个问题。

如果您运行的是旧版本的 Visual Studio 2012 并在使用 Resharper 8 时遇到这些问题，请确保至少安装 Visual Studio Update 2。如果必须选择，我总是安装最新版本，即[Visual Studio 2012 Update 4](http://support.microsoft.com/kb/2872520)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-24T13:14:45.787

Resharper 的 7.1.3 版本也适用于 Visual Studio 2012 的**更新 3。**不确定最新版本 8，但旧版本仍可[在此处](http://resharper-support.jetbrains.com/entries/21206508-Where-can-I-download-an-old-previous-ReSharper-version-)下载。

# mysql - SQL 根据两列查找记录

> ID：16045095
> 
> 赞同：1
> 
> 时间：2013-04-16T19:07:42.253
> 
> 标签：mysql, sql

给定一个主键为 的用户表`id`，我有一个名为的外部表`friends`，它只有两个字段 ( `userid1, userid2`)。这允许我们在不同用户之间创建任何类型的关系（一对多、一对一等）。用户可以出现在任一列中，并且两列相等。IOW，每个关系一个条目。

我怎样才能拉出给定用户`id`拥有的所有朋友。说 Jonny，有 3 个朋友，他的用户`id`是`16`……我的 sql 查询应该是这样的吗？

```
SELECT * 
FROM   db.users 
       JOIN db.friends 
         ON db.users.id = db.friends.userid1 
            AND db.users.id = 16 
```

希望这很清楚。另外，如果可能的话，我可以从结果集中排除 Jonny 吗？

列出的这个查询为我提供了以下信息：

```
id      name    uuid                       birthday        userid1  userid2
16  jonny   ABCDEFGHIJKLMNOP    1967-04-27 01:00:00     1         2
16  jonny   ABCDEFGHIJKLMNOP    1967-04-27 01:00:00     1         3 
```

这很接近，除了我想要他的朋友，而不是强尼

* * *

谢谢大家，多亏了你们，我才开始工作。这是最终的工作查询。

```
SELECT * 
FROM db.users
WHERE db.users.id IN
(
  SELECT db.friends.userid2 as id FROM db.friends WHERE db.friends.userid1 = 16
    union
  SELECT db.friends.userid1 as id FROM db.friends WHERE db.friends.userid2 = 16
) 
```

这给了我：

```
id      name    uuid                       birthday 
2   robin   ABCDEFGHIJKLMNOP    1967-04-27 01:00:00
3   gary    ABCDEFGHIJKLMNOP    1967-04-27 01:00:00 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:10:49.093

你可以做一个子查询，如：

```
SELECT * 
FROM users
WHERE id IN
(
  SELECT userid2 as id FROM db.friends WHERE userid1 = 16
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:12:39.443

您应该过滤朋友表，而不是用户表。

```
SELECT friends.*
FROM friends
INNER JOIN users
  ON friends.userid2 = users.id
WHERE friends.userid1 = 16 
```

如果您只需要朋友ID，那么根本没有理由加入

```
SELECT userid2
FROM friends
WHERE userid1 = 16 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T19:12:47.083

您需要一个朋友 ID 列表：

`SELECT U FROM DB.USERS U WHERE U.ID IN ( SELECT F.USERID2 FROM DB.FRIENDS F WHERE F.USERID1 = 16)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T19:09:58.007

`user.id`在您的`where`子句末尾添加条件：

```
Select * From users
INNER JOIN friends on
users.id = friends.userid1
Where users.id = 16 
```

另外，我会使用一个`Inner Join`它将`users`仅从匹配的地方返回所有记录`friends`

# latex - 如何格式化 Sweave LaTeX 表格输出以使用美元符号 ($)？

> ID：16045096
> 
> 赞同：2
> 
> 时间：2013-04-16T19:07:47.700
> 
> 标签：latex, sweave, xtable

这是示例数据：

```
# create table data
year <- c("2010", "2011", "2012")
value <- ("5", "10", "15")
df<-data.frame(year, value)

# print
print(xtable(df,digits=c(0,0,1))) 
```

**如何格式化 5、10 和 15 以显示为 $5.0、$10.0 和 $15.0？**

可能提供帮助的 R 包是`xtable`、`stargazer`和/或`Hmisc`.

在 内`xtable`，解决方案可以在`format.args`：“`formatC`函数的参数列表。例如，标准德语数字分隔符可以指定为`format.args=list(big.mark = "’", decimal.mark = ","))`。” - [http://cran.r-project.org/web/packages/xtable/xtable.pdf](http://cran.r-project.org/web/packages/xtable/xtable.pdf)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T16:53:37.873

`df$value`在使用`xtable()`函数之前格式化美元格式更简单。使用您的示例，您有以下内容（需要`scales`库）：

```
library(xtable)
library(scales)

# create table data
year <- c("2010", "2011", "2012")
value <- c("5", "10", "15")
df<-data.frame(year, value)

df$value <- dollar(as.numeric(as.character(df$value)))

# print
print(xtable(df)) 
```

这将产生以下 LaTeX 代码：

```
% latex table generated in R 2.12.2 by xtable 1.6-0 package
% Fri May 03 10:46:58 2013
\begin{table}[ht]
\begin{center}
\begin{tabular}{rll}
  \hline
 & year & value \\ 
  \hline
1 & 2010 & \$5.00 \\ 
  2 & 2011 & \$10.00 \\ 
  3 & 2012 & \$15.00 \\ 
   \hline
\end{tabular}
\end{center}
\end{table} 
```

# javascript - ASP：从 Javascript 到 ASP 的 FileSystemObject

> ID：16045098
> 
> 赞同：-3
> 
> 时间：2013-04-16T19:07:54.847
> 
> 标签：javascript, html, asp-classic, filesystems

所以我有这段代码可以将一些数据保存到日志文件中。

```
function WriteToFile(data) {
    var currentdate = new Date(); 
    var datetime = "Time: " + currentdate.getDate() + "/" + (currentdate.getMonth()+1)  + "/" + currentdate.getFullYear() + " @ " + currentdate.getHours() + ":" + currentdate.getMinutes() + ":" + currentdate.getSeconds();
    var fso = new ActiveXObject("Scripting.FileSystemObject");
    var a = fso.OpenTextFile("C:\\logs\\log.txt", 8);
    a.WriteLine(datetime);
    a.WriteLine(data + "\n");
    a.Close();
 } 
```

在这种情况下，每次调用某些函数时我都会调用此函数，因此`data`参数将类似于`testFunction(parameter1,parameter2)`它将保存在日志文件中的方式，调用函数的时间和使用的参数。在本地它工作正常，但是当我将它发送到服务器中的生产时它不起作用。我知道这可以通过使用 ASP 来实现，但我没有这方面的经验。我已经进行了一些谷歌搜索，并找到了一些信息，但在实现这一点时我没有运气。我试图将上面的代码翻译成 ASP。

所以我有一个带有一堆文本字段和按钮的 HTML 文件，我想知道单击按钮的时间以及使用了哪些参数（或字段集中的文本字段） 这是一个示例（页面中有更多按钮但只是让你有一个想法）

![图片1](https://i.stack.imgur.com/k6qWu.png)

我得到了这个链接**[http://bit.ly/15iI8Fd](http://bit.ly/15iI8Fd)**但我不明白如何使用 ASP 而不是 javascript 来实现它。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:30:05.800

这是您的代码翻译成经典 ASP 的服务器端 vbscript

```
<% function WriteToFile(data)
dim fso, a, datetime
datetime = "Time:" & Now()
set fso = Server.CreateObject("Scripting.FileSystemObject")
set a=fs.OpenTextFile("C:\logs\log.txt", 8)
a.WriteLine(datetime)
a.WriteLine(data & vbcrlf)
a.Close 
end function %> 
```

如果您不喜欢 Now() 函数为您提供的日期时间格式，您应该能够通过 Google 找到一种方法来更改它。

您还可以尝试将 Javascript 声明为您的页面语言并使用您现有的代码服务器端

# c++ - 专门化方法c ++的类模板

> ID：16045102
> 
> 赞同：1
> 
> 时间：2013-04-16T19:08:21.407
> 
> 标签：c++, templates

假设我有一个类模板，其中一些方法是特定于类型的。

```
template <typename T>
class Shape
{
...
void Foo();
...
}; 
```

现在我将专门使用特定类型的函数，例如：

```
void Shape<bool>::Foo() {...};
void Shape<double>::Foo() {...}; 
```

问题：

1.  如果 Foo 应该根据类型有不同的参数怎么办？是否可以使用与类声明中不同的参数为特定类型专门化方法？我怀疑这是不允许的，那么应该怎么做呢？

2.  如何防止未定义 Foo 的类型的类实例化？

3.  与我所描述的情况相比，什么时候应该使用虚函数和纯虚函数？是否可以混合模板和继承？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:02:04.910

> *   1个。如果 Foo 应该根据类型有不同的参数怎么办？是否可以使用与类声明中不同的参数为特定类型专门化方法？

~~不。~~是的，正如下面的 Nathan Monteleone 所指出的，这可以通过完全专门化 Shape 类来实现。

> *   1b。我怀疑这是不允许的，那么应该怎么做呢？

你能把函数本身变成一个独立于类的模板吗

```
class Shape {
    //...
    template <typename T>
    void Foo();
    //...
}; 
```

> *   2\. 如何防止未定义 Foo 的类型的类实例化？

在类体内：

```
template<typename U> //note the different typename
class Shape {
    static_assert(std::is_same<U, bool>::value || std::is_same<U, double>::value, "Type forbidden");
    //...
    inline void Foo() {
        if( std::is_same<U, bool>::value ) Foo_impl_bool();
        else if( std::is_same<U, double>::value ) Foo_impl_double();// and so on.
        // this function is likely to get optimized since the conditionals are constexpr
    }
    private:
    void Foo_impl_bool();//...
}; 
```

> 3a。与我所描述的情况相比，什么时候应该使用虚函数和纯虚函数？

1b 和 2 的答案是 2 个单独的解决方案，如果它们都不可能，则其他可能性是：

1.  将该函数提取到它自己的类中。

2.  单独为此函数[使用接口继承。](https://stackoverflow.com/questions/1723469/interface-inheritance-in-c)

> 3b。是否可以混合模板和继承？

是的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:50:23.463

(1) 有点，但不完全是您尝试的方式。您基本上希望专业化来定义功能；这与声明基类和派生类时有很大不同。

```
template <typename T> class Shape {
    static_assert(false, "Not implemented");
};

template <> class Shape<bool> {
    void Foo(bool a, std::string b) {...}
};

template <> class Shape<int> {
    void Foo(int, std::string, whatever else) {...}
}; 
```

即使您要在原始的非特化 Shape 中定义 Foo，它也不会影响特化。完全专业化不会扩展原始模板，而是替换它！

(2) 使用静态断言。请参见上面的示例。

(3) 是的，您可以混合使用模板和继承。虚函数运行时多态和静态多态。模板参数必须在编译时知道，而运行时多态对象的确切类型则不需要，因为它们可以被基类引用引用。在上面的模板示例中，您不能简单地说

```
template <class T> Shape {...};

...

Shape* myShape;   // Compiler error: Shape requires a template parameter 
```

但是，通过继承，您可以：

```
class ShapeBase { virtual void Foo() = 0; };
class Circle : public ShapeBase { virtual void Foo() { ... } };
class Square : public ShapeBase { virtual void Foo() { ... } };
...

Shape* myShape = new Circle;
myShape->Foo(); // calls Circle->Foo() 
```

请注意，当您使用继承时，函数签名必须匹配！这就是您将决定推迟到运行时所付出的代价。

# bash - 将时间戳添加到顶部命令批处理输出

> ID：16045104
> 
> 赞同：1
> 
> 时间：2013-04-16T19:08:22.753
> 
> 标签：bash, timestamp, append, puid

我需要在以下输出中打印的每一行的开头添加时间戳。

```
**# top -b |grep -w 'db2sysc\|java'**

 4756 db2inst1  20   0 2525m 875m 830m S    0 11.0   1:33.57 db2sysc
 4951 root      20   0 1416m 689m 7276 S    0  8.7   1:27.86 java
 4756 db2inst1  20   0 2525m 875m 830m S    1 11.0   1:33.61 db2sysc
 4951 root      20   0 1416m 689m 7276 S    0  8.7   1:27.87 java
```

想要这样

```
1366138603 4756 db2inst1  20   0 2525m 875m 830m S    0 11.0   1:33.57 db2sysc
1366138603 4951 root      20   0 1416m 689m 7276 S    0  8.7   1:27.86 java
1366138692 4756 db2inst1  20   0 2525m 875m 830m S    1 11.0   1:33.61 db2sysc
1366138692 4951 root      20   0 1416m 689m 7276 S    0  8.7   1:27.87 java 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:27:29.493

我建议使用`awk`而不是`grep`：

```
top -b | awk '/db2sysc|java/ {print systime(), $0}' 
```

# php - 使用前瞻断言找到字符串的真实位置

> ID：16045107
> 
> 赞同：-4
> 
> 时间：2013-04-16T19:08:29.063
> 
> 标签：php, regex, preg-match

我需要在字符串中找到第一个逗号的位置，但不接受双引号括起来的文本作为匹配项。

例子：

```
word, word word (should return 4)
word word, word, word (should return 9)
word "word, word, word" word, word (should return 28)
word "word, word, word" dot dot "ignore, ignore" word, word (should return 53)
word 'word, word' word, word (should return 10) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T20:27:08.070

试试这个正则表达式：

```
if (preg_match('/^(?:[^,"]|"[^"]*")*(?=,)/', $str, $match)) {
    var_dump(strlen($match[0]));
} 
```

该模式`^(?:[^,"]|"[^"]*")*(?=,)`只匹配任何一个序列

*   既不是逗号也不是引号 ( `[^,"]`) 的字符，或
*   带引号的字符串 ( `"[^"]*"`)

最后是逗号（`(?=,)`前瞻断言）。匹配的字符串是第一个逗号之前的字符串，它的长度也是第一个逗号的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T20:32:56.727

尝试以下操作：

```
$strings = array(
    'word, word word',
    'word word, word, word',
    'word "word, word, word" word, word',
    'word "word, word, word" dot dot "ignore, ignore" word, word',
    'word \'word, word\' word, word'
);

foreach($strings as $string){
    echo $string. ' : '. find($string).'<br>';
}

function find($str){
    $tmp = preg_replace_callback('/("[^"]+")/', function($m){
        return str_repeat('a',strlen($m[1]));
    }, $str);
    return strpos($tmp, ',');
} 
```

**想法**：用“a”替换引号之间的所有字符，然后使用[strpos()](http://php.net/manual/en/function.strpos.php)。

**输出：**

```
word, word word : 4
word word, word, word : 9
word "word, word, word" word, word : 28
word "word, word, word" dot dot "ignore, ignore" word, word : 53
word 'word, word' word, word : 10 
```

[在线演示](http://codepad.viper-7.com/opCRA3)。

# c++ - 查找一张地图是否是另一张地图的子集

> ID：16045108
> 
> 赞同：7
> 
> 时间：2013-04-16T19:08:31.330
> 
> 标签：c++, map

我有两张 STL 地图`std::map<int, int> foo = {{1, 0}, {2, 0}, {3, 0}, {4, 0}, {5, 0}, {6, 0}};`和`std::map<int, int> bar = {{2, 0}, {4, 0}, {5, 0}};`

我想知道 bar 是否是 foo 的子集。

由于元素是在地图中排序的，我想从 foo 中的 bar 中找到第一个元素，然后从该位置的 foo 中的 bar 中找到连续的元素。

这里的问题是我无法找到一种方法来使用 cpp 中的 STL 映射来做到这一点。对于从地图中的某个位置到地图末尾的每个查找，我可以减少地图中的搜索范围吗？

我希望我解释了这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T19:30:07.247

将[`std::includes`](http://en.cppreference.com/w/cpp/algorithm/includes)算法与仅比较键的自定义比较器一起使用：

```
#include <map>
#include <algorithm>
#include <iostream>

int main()
{
    std::map<int, int> foo = {{1, 0}, {2, 0}, {3, 0}, {4, 0}, {5, 0}, {6, 0}};
    std::map<int, int> bar = {{2, 0}, {4, 0}, {5, 0}};
    typedef std::pair<int,int> pair;

    std::cout <<
       std::includes(foo.begin(), foo.end(), bar.begin(), bar.end(),
           [](const pair& p1, const pair& p2)
           {
               return p1.first < p2.first;
           });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T19:14:23.123

您可以提取两个映射（和）的键集（`set1`和） ，只要它们是排序的，您就可以执行以下操作：`set2``foo``bar`

```
if (std::includes(set1.begin(), set1.end(),
                  set2.begin(), set2.end())) {
  // ...
} 
```

见[`std::includes`](http://www.cplusplus.com/reference/algorithm/includes/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T19:18:56.320

一个简单的方法是结合使用[Boost.Range](http://www.boost.org/doc/libs/1_53_0/libs/range/doc/html/index.html)[`boost::includes`](http://www.boost.org/doc/libs/1_53_0/libs/range/doc/html/range/reference/algorithms/set/includes.html)：

```
using namespace boost::adaptors;
bool result = includes(foo | map_keys, bar | map_keys); 
```

下面是一个最小的、完整的程序的样子（映射值被忽略）：

```
#include <map>
#include <iostream>
#include <boost/range.hpp>
#include <boost/range/adaptors.hpp>
#include <boost/range/algorithm.hpp>

int main()
{
    std::map<int, int> foo = {{1, 0}, {2, 0}, {3, 0}, {4, 0}, {5, 0}, {6, 0}};
    std::map<int, int> bar = {{2, 0}, {4, 0}, {5, 0}};

    using namespace boost::adaptors;
    std::cout << includes(foo | map_keys, bar | map_keys);
} 
```

这是一个[***活生生的例子***](http://liveworkspace.org/code/3kW04t%24443)。

# ruby-on-rails - 如何修复正则表达式中的无效多字节字符？

> ID：16045117
> 
> 赞同：2
> 
> 时间：2013-04-16T19:09:00.007
> 
> 标签：ruby-on-rails, ruby, regex, ascii

我有一个正则表达式：

```
/[!,.!:;\-\?\(\)"\s\n]/ 
```

效果很好，但是当我添加时：

```
«» 
```

对于正则表达式，它会导致错误：

```
invalid multibyte char (US-ASCII) 
```

怎么了？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:20:06.583

在文件的第一行，写

```
#encoding: UTF-8 
```

这是 ruby​​ 1.9 需要的，但不是 1.8 或 2.0

# android - 找不到 R.layout.activity_main

> ID：16045118
> 
> 赞同：49
> 
> 时间：2013-04-16T19:09:03.033
> 
> 标签：android, android-layout

我试图使用一些在线教程来解决多种布局。问题是只要只有一个 XML 文件，我的程序就可以正确构建和编译。当我添加多个 XML 文件时，我收到错误提示“activity_main 无法解析或不是字段”`setContentView(R.layout.activity_main);`

事实上，我之前使用的每个项目`R.*`现在都在报告错误。我不知道出了什么问题。谁能建议需要做什么？

编辑1：我尝试清理和重建项目，但这没有帮助。另外，我正在导入正确的`R.java`文件，如*mypackage* .R.java

根据@RubberDuck 的评论，我再次删除文件后，在构建项目后正在生成 R.java 文件。但是，当我创建新的 XML 文件并在其中添加元素、构建项目时，R.java 会被删除。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-05-25T09:25:59.263

我遇到了同样的问题，通过替换`R`显然`com.example.appname.R`将您的包参考放在那里来解决。或者只是将此行添加到您的文件中：

```
import com.your.package.R 
```

或者更好的是，如果存在，请尝试从代码中删除此行：

```
import android.support.compat.R 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-04-16T19:12:49.313

检查您是否不小心导入了 android.R。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2019-08-13T05:01:28.113

在 2019 年我遇到了同样的问题，我搜索了互联网，发现了以下我与大家分享的内容。

在 android studio 中，字母 R 代表资源，并且由于构建过程无法与您的项目同步资源而发生此错误。换句话说，这个错误是当 Android Studio 不能正确生成你的 R.java 文件时引起的。当您将代码转移到另一个系统或第一次构建 android 项目时，会发生此问题。因此，当您创建新活动或新类时，您会看到一条错误消息，例如“无法解析符号 r”，并带有红色下划线。

您可以在下面找到修复 android studio 中无法解析符号 r 的可能方法。

将项目 Gradle 更新到最新版本始终使用最新版本的 Gradle 以正常工作 android studio。

将项目与 Gradle 文件同步更新 Gradle 插件后，您需要将项目与 Gradle 文件同步。打开 android studio 并点击**Files > Sync Project with Gradle Files 选项**。

清理并重建项目 最有效的解决方案是最简单的：清理并重建您的项目。从 Android Studio 工具栏中选择**Build > Clean Project**，稍等片刻，然后通过选择**Build > Rebuild Project**来构建您的项目。

Invalidate Caches / Restart 如果您在移动一些文件和目录后遇到此错误，那么**R.layout**错误可能是由 Android Studio 的缓存与您项目的当前布局不匹配引起的。如果您怀疑可能是这种情况，请选择**File > Invalidate Caches / Restart > Invalidate and Restart**从 Android Studio 的工具栏中。资源名称的问题也可能会阻止正确创建 R.java 文件，因此请检查您没有多个具有相同名称的资源，并且您的文件名中没有包含无效字符。Android Studio 仅支持小写 az、0-9、句号和下划线，单个无效字符可能会导致整个项目出现 R.layout 错误，即使您实际上并未在项目中的任何位置使用此资源！

我的问题及其解决方案：就我而言，我应用了上述所有方法，但无法解决问题。因此，我开始了一个新项目，并一一粘贴了我的代码，并通过运行应用程序验证了我的代码。最后，当我第一次删除colors.xml中的代码并将下面的代码复制并粘贴到colors.xml文件中时，我得到了错误。

```
<color name="bg_login">#26ae90</color>
<color name="bg_register">#2e3237</color>
<color name="bg_main">#428bca</color>
<color name="white">#ffffff</color>
<color name="input_login">#222222</color>
<color name="input_login_hint">#999999</color>
<color name="input_register">#888888</color>
<color name="input_register_bg">#3b4148</color>
<color name="input_register_hint">#5e6266</color>
<color name="btn_login">#26ae90</color>
<color name="btn_login_bg">#eceef1</color>
<color name="lbl_name">#333333</color>
<color name="btn_logut_bg">#ff6861</color> 
```

当我撤消更改时，错误再次消失。因此，我在 colors.xml 中的代码不是上面的代码，并且代码已经在 colors.xml 中，即

```
<color name="colorPrimary">#008577</color>
<color name="colorPrimaryDark">#00574B</color>
<color name="colorAccent">#D81B60</color>
<color name="bg_login">#26ae90</color>
<color name="bg_register">#2e3237</color>
<color name="bg_main">#428bca</color>
<color name="white">#ffffff</color>
<color name="input_login">#222222</color>
<color name="input_login_hint">#999999</color>
<color name="input_register">#888888</color>
<color name="input_register_bg">#3b4148</color>
<color name="input_register_hint">#5e6266</color>
<color name="btn_login">#26ae90</color>
<color name="btn_login_bg">#eceef1</color>
<color name="lbl_name">#333333</color>
<color name="btn_logut_bg">#ff6861</color> 
```

“也许是因为我没有定义颜色原色”希望它会帮助像我这样的编程新手。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2020-04-11T15:26:04.963

我尝试了什么：

1.  检查每个 XML 文件中是否存在一些著名的已知错误。
2.  多次清理项目。
3.  将 Gradle 与项目文件同步。

什么有效：

**1\. 使缓存无效并重新启动。**

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2013-04-17T05:33:51.087

如果您的 XML 包含错误，您生成的文件可能无法构建，请尝试删除它们的大部分内容并确保 id 和文件名不重复，并且不使用大写字母和空格。如果它有效，你可以开始添加东西。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-07-01T14:06:08.767

我造成这个错误的愚蠢错误是我的文件中有错误的**包**字符串。`AndroidManifest.xml`我保留了教程中设置的字符串，但在设置项目时使用了我自己的字符串。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="COM.YOU.YOURAPPNAME"
android:versionCode="1"
android:versionName="1.0" > 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2020-04-09T10:26:19.290

通过导入该行删除了我的错误

```
import com.example.myapplication.R; 
```

您的导入行可能会有所不同，具体取决于您的项目名称，其中我的项目名称是**myapplication**

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-04-16T20:22:27.390

您正在导入无效的 R 类，请导入 yourpackage.R 类，例如 com.example.R

你导入 android.R 类而不是 yourpackages.R 到底发生了什么

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-02-15T15:06:32.200

Ivwd 只是删除了“import android.R;”行 并调用 Project->Clean... 这对我的 Win-7/x64 和 Eclipse Kepler 以及最后一个（02.2014）Android SDK 来说已经足够了

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-04-16T19:12:11.863

您正在导入无效的 R 类，请检查导入。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-02-11T13:38:52.437

转到工具-> android-> 使用 gradle 文件同步项目，然后单击 S

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-01-25T08:56:38.580

就我而言，我不小心导入了我的库的 R. 类而不是我的应用程序模块的 R。编辑后，它已解决。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-04-28T06:50:25.807

这是由于资源未正确加载而发生的，并且类似的问题也可能发生在任何视图中，因此以下是一些可用于消除此错误的技术：-

*   清理你的项目，构建 -> 清理项目
*   重建项目，构建 -> 重建项目
*   打开清单并检查是否缺少任何资源
*   如果缺少特定 id 的签入布局，请添加它
*   如果上述步骤不起作用，则重新启动 android studio 并使缓存无效。

**注意：**在上述步骤中，最后一步肯定会解决这个问题。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-02-04T20:29:21.683

在 Android Studio 中转到`Tools`-> `Android`->`Sync project with gradle files`或`File`->`Sync project with gradle files`在最新的 Android Studio 版本中。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-11-09T21:27:17.883

当您更改项目名称时会发生这种情况

就我而言，我只是改变

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    package="xxxx.newName" 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-04-16T19:16:32.960

布局文件可能存在问题，更正它并会出现自动生成的类。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-04-16T19:21:46.877

我有几个建议：

1.  确保除了与​​ R 相关的错误之外没有任何其他错误。右键单击 Eclipse 中的项目文件夹，Android 工具 -> 修复项目属性。

    2.检查以确保您导入了正确的 R。有时可以导入默认的 Android.R。

    3.检查布局 XML 文件中的错误。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2013-04-16T23:51:04.333

感谢[@RubberDuck 的评论](https://stackoverflow.com/questions/16045118/cannot-find-r-layout-activity-main/57471371#comment22894233_16045118)和@Emil[的回答](https://stackoverflow.com/a/16045262/4390987)，我能够找出问题所在。我的 XML 文件中大多数元素的 ID 完全相同。所以，我给他们每一个都重新命名了。此外，我的 XML 文件包含大写字母。文件名应该在 [a-z0-9_] 所以我也重命名了我的文件，问题就解决了。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2013-10-08T12:39:17.170

这解决了我的问题，

```
apt-get install ia32-libs 
```

并重新启动:)

[未找到安卓 adb](https://stackoverflow.com/questions/13571145/android-adb-not-found)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-06-07T18:00:00.107

或者你可以写

import.R.layout // 在顶部

它肯定会起作用

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2015-11-07T10:39:37.380

在我构建了我的项目并在互联网上挖掘了很多解决方案之后，我使用了 maven 作为构建工具。通过添加到 main_activity.xml 解决了我的问题

> 工具：上下文=“.MainActivity”

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2016-08-03T05:49:05.133

当将不适当的字符（/-一个斜杠）添加到 values/strings.xml 时，我得到了这个，当然，重命名有问题的资源很有帮助。还有一件更重要的事情 - 检查您设备上的日期和时间。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-09-07T16:14:24.863

只需删除 import.android.R;

然后 R.layout.(XML LAYOUTNAME) 将变为蓝色

我花了好几个小时才发现这个错误

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2016-11-30T10:04:22.483

我有一个类似的问题。
从 res 中删除了一些图片后，它突然发生了。可绘制的。我做了两件事。

*   首先，我检查了可绘制文件夹中的所有图像，如果它们都有预览。我的一个被损坏了。
*   其次，我关闭了所有打开的android studio和模拟器​​。在那之后，一切都很好。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2017-05-12T02:12:47.493

我删除了 import android.R 并添加了 import android.support.v7.appcompat.*;

但是，这必须在通过右键单击项目导入 appcompat 并导入后完成

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2017-06-18T11:51:29.473

发生过一次。不知道原因。

Build> Clean Project 为我消除了错误。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2018-06-07T01:16:30.340

您的 gradle 或 build 都需要知道资源在哪里。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2019-10-08T11:04:09.793

清理项目并与 gradle 同步（无结果）后，我删除了所有导入语句，并使用 alt+Enter 将它们带回。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2020-06-29T08:52:23.383

首先执行此操作 --> 从 Android Studio 工具栏中选择 Build > Clean Project，稍等片刻，然后通过选择 Build > Rebuild Project 来构建您的项目。

如果问题未解决，则从 Android Studio 的工具栏中执行此操作 --> File > Invalidate Caches / Restart > Invalidate and Restart。

# wxpython - 寻找 wxPython 小部件

> ID：16045119
> 
> 赞同：-1
> 
> 时间：2013-04-16T19:09:05.167
> 
> 标签：wxpython

我正在 wxPython 中创建一个对话，需要让我的用户按特定顺序放置数据。它应该看起来像这样：

![http://i.imgur.com/R6Z4slj.jpg](https://i.stack.imgur.com/hSkNp.jpg)

很抱歉这幅画很粗糙，我这辈子似乎在任何地方都找不到这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:15:34.623

wx python 有其中之一，它称为项目选择器。我不确定它是在哪个版本中引入的，但它在 wxpython 版本 2.9.4.0 中，您可以在 wx.lib.itempicker 中找到它

如果它不在您的版本中，这里是 wx.lib 中的代码

```
'''
Created on Oct 3, 2010

@authors: Daphna Rosenbom,Gitty Zinger,Moshe Cohavi and Yoav Glazner
The widget is contributed by NDS ltd under the same license as wxPython

items_picker.ItemsPicker:
  - Displays available items to choose from,</LI>
  - Selection is done by the Add button or Double Click,</LI>
  - De-Selection is done by the Remove button or Double Click,</LI>

  Derived from wxPanel
'''
import wx
__version__ = 0.1

IP_DEFAULT_STYLE = 0
IP_SORT_CHOICES = 1
IP_SORT_SELECTED = 2
IP_REMOVE_FROM_CHOICES = 4

wxEVT_IP_SELECTION_CHANGED = wx.NewEventType()
EVT_IP_SELECTION_CHANGED = wx.PyEventBinder(wxEVT_IP_SELECTION_CHANGED, 1)
LB_STYLE = wx.LB_EXTENDED|wx.LB_HSCROLL

class IpSelectionChanged(wx.PyCommandEvent):
    def __init__(self, id, items, object = None):
        wx.PyCommandEvent.__init__(self, wxEVT_IP_SELECTION_CHANGED, id)
        self.__items = items
        self.SetEventObject(object)

    def GetItems(self):
        return self.__items

class ItemsPicker(wx.Panel):
    '''
    ItemsPicker is a widget that allows the user to form a set of picked
    items out of a given list
    '''
    def __init__(self, parent, id=wx.ID_ANY, choices = [],
                 label = '', selectedLabel = '',
                 ipStyle = IP_DEFAULT_STYLE,
                 *args, **kw):
        '''
        ItemsPicker(parent, choices = [], label = '', selectedLabel = '',
                    ipStyle = IP_DEFAULT_STYLE)
        '''
        wx.Panel.__init__(self, parent, id, *args, **kw)
        self._ipStyle = ipStyle
        sizer = wx.BoxSizer(wx.HORIZONTAL)
        sizer.Add(self._CreateSourceList(choices, label), 1,
                   wx.EXPAND|wx.ALL, 5)
        sizer.Add(self._CreateButtons(), 0, wx.ALIGN_CENTER|wx.ALL, 5)
        sizer.Add(self._CreateDestList(selectedLabel), 1,
                   wx.EXPAND|wx.ALL, 5)
        self.SetSizer(sizer)

    def SetItems(self, items):
        '''SetItems(self, items)=> None
        items - Sequence of strings that the user can pick from''' 
        return self._source.SetItems(items)    

    def GetItems(self): 
        '''GetItems(self)=> items
        returns list of strings that the user can pick from''' 
        return self._source.GetItems()

    Items = property(fget = GetItems,
                     fset = SetItems,
                     doc = 'See GetItems/SetItems')

    def GetSelections(self):
        '''GetSelections(self)=>items
        returns list of strings that were selected
        ''' 
        return self._dest.GetItems()

    def SetSelections(self, items): 
        '''SetSelections(self, items)=>None
        items - Sequence of strings to be selected
        The items are displayed in the selection part of the widget'''
        assert len(items)==len(set(items)),"duplicate items are not allowed"
        if items != self._dest.GetItems():
            self._dest.SetItems(items)
            self._FireIpSelectionChanged()

    Selections = property(fget = GetSelections,
                     fset = SetSelections,
                     doc = 'See GetSelections/SetSelections')

    def _CreateButtons(self):
        sizer = wx.BoxSizer(wx.VERTICAL)
        self.bAdd = wx.Button(self, -1, label = 'Add ->')
        self.bAdd.Bind(wx.EVT_BUTTON, self._OnAdd)
        self.bRemove = wx.Button(self, -1, label = '<- Remove')
        self.bRemove.Bind(wx.EVT_BUTTON, self._OnRemove)
        sizer.Add(self.bAdd, 0, wx.EXPAND|wx.ALL|wx.ALIGN_CENTER_VERTICAL, 5)
        sizer.Add(self.bRemove, 0, wx.EXPAND|wx.ALL, 5)
        return sizer

    def _set_add_button_label(self, label=None):
        if label is None:
            return
        self.bAdd.SetLabel(label)

    add_button_label = property(fset = _set_add_button_label, fget = lambda x:x)

    def _set_remove_button_label(self, label=None):
        if label is None:
            return
        self.bRemove.SetLabel(label)

    remove_button_label = property(fset = _set_remove_button_label, fget = lambda x:x)

    def _OnAdd(self, e):
        if self._ipStyle & IP_REMOVE_FROM_CHOICES:
            self._MoveItems(self._source,self._dest)
        else:
            self._AddSelectedItems()

    def _MoveItems(self,source,dest):
        selections = source.GetSelections()
        selectedItems = map(source.GetString, selections)
        dest.SetItems(dest.GetItems() + selectedItems)
        selections = set(selections)
        source.SetItems([item for i, item in enumerate(source.GetItems())\
                      if i not in selections])
        self._FireIpSelectionChanged()

    def _AddSelectedItems(self):
        newItems = map(self._source.GetString, self._source.GetSelections())
        items = self._dest.GetItems()
        oldItems = set(items)
        for newItem in newItems:
            if newItem not in oldItems:
                items.append(newItem)    
        self.SetSelections(items)

    def _FireIpSelectionChanged(self):
            self.GetEventHandler().ProcessEvent(
                        IpSelectionChanged(self.GetId(), 
                                            self._dest.GetItems(),
                                             self ))

    def _OnRemove(self, e):
        if self._ipStyle & IP_REMOVE_FROM_CHOICES:
            self._MoveItems(self._dest, self._source)
        else:
            self._RemoveSelected()

    def _RemoveSelected(self):
        selections = self._dest.GetSelections()
        if selections:
            allItems = self._dest.GetItems()
            items = [item for i, item in enumerate(allItems)\
                      if i not in selections]
            self.SetSelections(items)
            self._FireIpSelectionChanged()

    def _CreateSourceList(self, items, label):
        style = LB_STYLE
        if self._ipStyle & IP_SORT_CHOICES:
            style |= wx.LB_SORT
        sizer = wx.BoxSizer(wx.VERTICAL)
        if label:
            sizer.Add(wx.StaticText(self, label = label), 0,
                       wx.ALIGN_LEFT|wx.ALL, 5)
        self._source = wx.ListBox(self, -1, style = style)
        self._source.Bind(wx.EVT_LISTBOX_DCLICK, self._OnDClick)
        self._source.SetItems(items)
        sizer.Add(self._source, 1, wx.EXPAND|wx.ALL, 5)
        return sizer

    def _CreateDestList(self, label):
        style = LB_STYLE
        if self._ipStyle & IP_SORT_SELECTED:
            style |= wx.LB_SORT
        sizer = wx.BoxSizer(wx.VERTICAL)
        if label:
            sizer.Add(wx.StaticText(self, label = label), 0,
                       wx.ALIGN_LEFT|wx.ALL, 5)
        self._dest = wx.ListBox(self, -1, style = style)
        self._dest.Bind(wx.EVT_LISTBOX_DCLICK,  self._OnDClick) 
        sizer.Add(self._dest, 1, wx.EXPAND|wx.ALL, 5)
        return sizer

    def _OnDClick(self, e):
        lb = e.GetEventObject()
        selections = lb.GetSelections()
        if len(selections) != 1:
            return #DCLICK only works on one item
        if e.GetSelection() != selections[0]:
            #this can happen using ^DCLICK when two items are selected
            return
        if lb  == self._source: 
            self._OnAdd(e)
        else:
            self._OnRemove(e)

if __name__ == '__main__':
    test = wx.PySimpleApp(0)
    frame = wx.Frame(None, -1)
    d = wx.Dialog(frame, style = wx.RESIZE_BORDER|wx.DEFAULT_DIALOG_STYLE)

    d.sizer = wx.BoxSizer(wx.VERTICAL)
    d.sizer.Add(wx.StaticText(d, -1, label = 'Example of the ItemsPicker'),
                 0, wx.ALL, 10)
    ip = ItemsPicker(d, -1, ['pop', 'cool', 'lame'],
                      'Stuff:', 'Selected stuff:',IP_SORT_SELECTED|IP_SORT_CHOICES|IP_REMOVE_FROM_CHOICES)
    ip.add_button_label = u'left -> right'
    ip.remove_button_label = u'right -> left'
    d.sizer.Add(ip, 1, wx.EXPAND, 1)
    d.SetSizer(d.sizer)
    test.SetTopWindow(frame)
    def callback(e):
        print 'selected items', e.GetItems()
    d.Bind(EVT_IP_SELECTION_CHANGED, callback)
    d.ShowModal()
    d.Destroy()
    frame.Close() 
```

# c# - WCF Rest 更改根返回元素的名称

> ID：16045120
> 
> 赞同：1
> 
> 时间：2013-04-16T19:09:18.430
> 
> 标签：c#, .net, xml, wcf, rest

我有

```
[OperationContract]
[WebInvoke(Method = "POST",
    ResponseFormat = WebMessageFormat.Xml,
    RequestFormat = WebMessageFormat.Xml,
    BodyStyle = WebMessageBodyStyle.Bare,
    UriTemplate = "projects/{projectname}")]
[return: MessageParameter(Name = "ProjectId")]
Guid CreateProject(String projectName); 
```

但这仍然返回

```
<guid 
xmlns="http://schemas.microsoft.com/2003/10/Serialization/">00000000-0000-0000-0000-00000000</guid> 
```

如何用 ProjectId 替换“guid”？

```
public Guid CreateProject(String projectName)
{
     return Guid.Empty;
} 
```

如果我将 OperationContract BodyStyle 更改为`WrappedResponse`我得到：

```
<CreateProjectResponse 
    xmlns="http://tempuri.org/">
    <ProjectId>00000000-0000-0000-0000-000000000</ProjectId>
</CreateProjectResponse> 
```

这几乎是我想要的，但我不想不必要地包装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T20:04:15.547

最简单的解决方案是

```
return new XElement("ProjectId", Guid.Empty); 
```

不是我想要的，但它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:03:11.433

你成为你所定义的。您已定义以 XML 形式接收空 GUID，并以 XML 形式返回空 GUID。一切正常。

也许您需要将 GUID 转换为某种字符串 id，然后`Guid.NewGuid().ToString("N")`

当您不期望 xml 时，您需要调整属性并使用来自客户端的 HTTP Accept Header，例如 Json Accept:`application/json`或字符串 -`plain/text`

**UPD：** 现在有点清楚了。您实际上问如何更改 XML 结构。对于标准类型，我建议您使用标准 XML 结构，因为您已经从 box XML 格式化程序中实现了。无论如何，当您需要更改格式化程序时，您可以通过扩展`WebHttpBehavior`并覆盖该`WebHttpBehavior.GetReplyDispatchFormatter`方法来返回我们自己的 System.ServiceModel.Dispatcher.IDispatchFormatter 自定义实现（如示例阅读[here](http://blogs.msdn.com/b/carlosfigueira/archive/2011/08/16/wcf-extensibility-webhttpbehavior.aspx)）

我还想提一下，您正在使用 WCF 4 REST，而且这项技术是遗留的。当您不处理遗留项目或维护时，我建议您使用[ASP.NET Web API](http://www.asp.net/web-api)，因为这和许多其他事情可以在那里更容易地完成。

# recursion - Prolog 中祖父母的定义，是否有任何 prolog 程序员愿意帮助澄清这一点？

> ID：16045121
> 
> 赞同：0
> 
> 时间：2013-04-16T19:09:18.710
> 
> 标签：recursion, prolog, family-tree

祖父母（X，Y）：- 父母（X，母亲（Y））。

通常祖父母将被定义为 Parent(X,Z) , Parent(Z,Y)....但它看起来更自然，作为 X 的父母 Y 的父母，我在上面定义的（无法解释自己任何比这更好，抱歉）我的问题是：这个定义是否仍然被认为是有效的，如果不是，为什么不呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:29:15.080

我可以从您的语法错误的 Prolog 中恢复您的意图的最好方法是：

```
grandparent(X, Y) :- parent(X, Y), mother(Y). 
```

虽然这只是对了一半：X 是祖父母，但 Y 不是孙子，只是一个有自己孩子的女孩。为了`grandparent(X,Y)`得到预期的定义，我们必须在逻辑上将一些东西与中间代统一起来。这就是`Z`传统概念中的用途。如果您定义`mother/2`而不是`mother/1`，那么这`mother(Mother, Child)`意味着`Mother`是 的母亲`Child`，那么您基本上会有一个同义词`parent/2`，并且您的解决方案与正常定义没有什么不同，只是它无法生成其中一半的解决方案孩子是男性。所以真的，它只有 1/4 正确。

请注意，Prolog 没有其他编程语言意义上的隐式返回值，因此类似的符号`parent(X, mother(Y))`几乎肯定不是您的意思。

# c - 在 netstat 或 lsof 命令中看不到我正在运行的进程？

> ID：16045125
> 
> 赞同：1
> 
> 时间：2013-04-16T19:09:41.447
> 
> 标签：c, bash, sockets, network-programming

我正在尝试套接字编程。我制作了以下文件 inetaddr.c 并且我使用的是 Ubuntu 12.04。以下代码不会在我执行它时应该在控制台上显示我当前正在运行的进程。我尝试了以下两个命令。

> system("netstat -pa --tcp 2>/dev/null | sed -n '1,/^Proto/p;/inetaddr/p'");

甚至

> system("lsof -i tcp | sed -n '1p;/inetaddr/p'");

我编码的内容有什么问题吗？如何通过 netstat 或 lsof 命令查看正在运行的进程？

## inetaddr.c

```
/* inetaddr.c:
*
*/
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
static void bail(const char *on_what) {
    fputs(on_what,stderr);
    fputc('\n',stderr);
    exit(1);
}
int main(int argc,char **argv) {
int z=0;
struct sockaddr_in adr_inet;/* AF_INET */
int len_inet; /* length */
int sck_inet; /* Socket */

 /* Create a Socket */
 sck_inet = socket(AF_INET,SOCK_STREAM,0);
printf("sck_inet = %d, PID = %u\n", sck_inet, getpid());
 if ( sck_inet < 0 )
    bail("socket()");

 /* Establish address */
 memset(&adr_inet,0,sizeof(adr_inet));

 adr_inet.sin_family = AF_INET;
 adr_inet.sin_port = htons(9000);

 adr_inet.sin_addr.s_addr = inet_addr("127.0.0.95");

    if ( adr_inet.sin_addr.s_addr == INADDR_NONE )
        bail("bad address.");
    len_inet = sizeof(adr_inet);
    printf("z value = %d before bind\n",z );
    z = bind(sck_inet, (struct sockaddr *)&adr_inet,len_inet);
    printf("z value = %d\n",z );
    if (z==-1)
        bail("bind()");
 /* Display our socket address */
    system("lsof -i tcp | sed -n '1p;/inetaddr/p'");
    //system("netstat -pa --tcp 2>/dev/null | sed -n '1,/^Proto/p;/bind/p'");
 return 0; 
} 
```

## 生成文件

```
all:    
    gcc -c -D_GNU_SOURCE -Wall inetaddr.c
    gcc inetaddr.o -o inetaddr 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:20:11.837

尝试在 netstat 之前添加一个监听套接字。像这样：

```
/* Display our socket address */
listen(sck_inet,50);  /* <--- Add this */
system("lsof -i tcp | sed -n '1p;/inetaddr/p'");
//system("netstat -pa --tcp 2>/dev/null | sed -n '1,/^Proto/p;/bind/p'");
return 0; 
```

# c++ - C++：简单节点/链表

> ID：16045129
> 
> 赞同：1
> 
> 时间：2013-04-16T19:09:56.077
> 
> 标签：c++, linked-list, nodes

在下面的链接列表中，我正在尝试实现打印功能。该函数是模板化的，并且不是 Node 类的一部分。

基本上我希望这个打印功能是动态的，这样我就不必`Node->data`手动打印出所有的东西。我有点按照这个例子的思路工作：[http ://www.cstutoringcenter.com/tutorials/cpp/cpp17.php](http://www.cstutoringcenter.com/tutorials/cpp/cpp17.php)

但是，当我尝试实现打印功能时，会出现编译器错误，例如： `node was not declared in this scope`、`p' was not declared in this scope`和`variable or field 'print' declared void`.

这是我的程序：

```
#include<iostream>
using namespace std;

template<typename T>
class Node
{
 public:
        Node(T = 0);
        ~Node() { delete [] nextPtr; };

        T getData() const;
        Node<T>*& getNextPtr() { return nextPtr; };

 private:
        T data;
        Node<T> *nextPtr;    
};

//CONSTRUCTOR   
template<typename T>
Node<T>::Node(T newVal)
     : data(newVal), nextPtr(NULL)
{
    //EMPTY       
};

//GETDATA() -- RETURN DATA VALUE
template<typename T>
T Node<T>::getData() const
{
      return data;

};

//PRINT FUNCTION
template<typename T>
void print(node<T>* p)
{
     while(p)
     {
             cout << p->data();
             p = p->link();        
     }
};

int main()
{
    Node<int> intNode1(5),  intNode2(6), intNode3(7);

    intNode1.getNextPtr() = &intNode2;
    intNode2.getNextPtr() = &intNode3;

    print(&intNode1);

    system("pause");   
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:13:16.790

你打印功能：

```
template<typename T>
void print(node<T>* p) 
```

应该：

```
template<typename T>
void print(Node<T>* p)
           //^^^^ 
```

由于您的代码中没有`node`定义类模板。

编辑：节点类中没有`link()`和`data()`定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:16:22.103

有几个问题，你打错了`Node`，你没有正确使用界面，这将编译：

```
template<typename T>
void print(Node<T>* p)
{
     while(p)
     {
             cout << p->getData() << std::endl;
             p = p->getNextPtr();        
     }
} 
```

添加`std::endl`以确保您看到输出。此外，您使用析构函数的类的方式将调用`delete`非动态分配的数据。因为`intNode2`和`intNode3`都分配在堆栈上。您还使用了`delete []`应该使用的数组删除`delete`。这是潜在的修复`main`：

```
int main()
{
    Node<int> intNode1(5) ;

    Node<int> *nPtr = intNode1.getNextPtr() = new Node<int>(6);
    nPtr->getNextPtr() = new Node<int>(7) ; 

    print(&intNode1);

    system("pause") ; // This is not portable
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T19:12:51.383

也许您的意思是键入`Node`而不是`node`，因为您`Node<T>`在其他任何地方都使用...

# javascript - Javascript 计算 - If 语句

> ID：16045136
> 
> 赞同：0
> 
> 时间：2013-04-16T19:10:09.260
> 
> 标签：javascript, jquery, wordpress

我想为不同的选择显示不同的选项。

*   如果`MenuNo1 (textinput)`相等`1,2,3,4 or 5`- 那么 的值`menuPrice1`应该是`R70.00`。
*   如果`MenuNo1(textinput)`相等`8,9,12`- 那么 的值`menuPrice1`应该是`R85.00`。
*   如果`MenuNo1 (textinput)`相等`11`- 那么 的值`menuPrice1`应该是`R105.00`。

我尝试过这样做：但是该`MenuPrice1`字段中什么也没有出现？控制台中也没有错误。

```
function calcMenu(form) {
    var MenuPrice1 = (+form.MenuPrice1.value);
    var MenuNo1 = (+form.MenuNo1.value);

    if ([1,2,3,4,5].indexOf(+form.MenuNo1.value) != -1) {
        MenuPrice1.value = "70";
    } 
    else if ([8,9,12].indexOf(+form.MenuNo1.value) != -1) {
        MenuPrice1.value = "85";
    }
    else if (+form.MenuNo1.value == 11)  {
        MenuPrice1.value = "105";
   } 
} 
```

HTML

```
<form id="quote" action="" method="get">
    <script type="text/javascript">
        // <![CDATA[
        jQuery(document).ready(function($) {
            jQuery('#quote').change(function() {
                doTotal(this)
            });
        });
        // ]]>
    </script>
    <script type="text/javascript">
        // <![CDATA[
        jQuery(document).ready(function($) {
            jQuery('#quote').change(function() {
                calcMenu(this)
            });
        });
        // ]]>
    </script>
    <table width="532" border="1" cellspacing="1" cellpadding="0.5">
        <tbody>
            <tr>
                <th scope="col" width="70">
                <div align="center">
                    Date
                </div></th>
                <th scope="col" width="158">
                <div align="center">
                    Amount of Delegates ½ Day Conference @ R 240 pp
                </div></th>
                <th width="112">
                <div align="center">
                    Amount of Delegates Full Day Conference @ R 260 pp
                </div></th>
                <th width="112">
                <div align="center">
                    Menu No
                </div></th>
                <th width="112">
                <div align="center">
                    Price pp for Menu (1-7: R70, 8-10 R85, 11: R105, 12: R85)
                </div></th>
                <th width="134">
                <div align="center">
                    Total for the day
                </div></th>
            </tr>
            <tr>
                <td>
                <div align="center">
                    <input type="text" name="date1" size="15" />
                </div></td>
                <td>
                <div align="center">
                    <input type="text" name="halfday1" size="15" maxlength="10" />
                </div></td>
                <td>
                <div align="center">
                    <input type="text" name="fullday1" size="15" />
                </div></td>
                <td>
                <div align="center">
                    <input type="text" name="MenuNo1" size="15" />
                </div></td>
                <td>
                <div align="center">
                    <input type="text" name="MenuPrice1" size="15" />
                </div></td>
                <td>
                <div align="center">
                    <input type="text" name="total1" size="15" />
                </div></td>
            </tr>
            <tr>
                <td>
                <div align="center">
                    <input type="text" name="date2" size="15" />
                </div></td>
                <td>
                <div align="center">
                    <input type="text" name="halfday2" size="15" />
                </div></td>
                <td>
                <div align="center">
                    <input type="text" name="fullday2" size="15" />
                </div></td>
                <td>
                <div align="center">
                    <input type="text" name="MenuNo2" size="15" />
                </div></td>
                <td>
                <div align="center">
                    <input type="text" name="MenuPrice2" size="15" />
                </div></td>
                <td>
                <div align="center">
                    <input type="text" name="total2" size="15" />
                </div></td>
            </tr>
            <tr>
                <td>
                <div align="center">
                    <input type="text" name="date3" size="15" />
                </div></td>
                <td>
                <div align="center">
                    <input type="text" name="halfday3" size="15" />
                </div></td>
                <td>
                <div align="center">
                    <input type="text" name="fullday3" size="15" />
                </div></td>
                <td>
                <div align="center">
                    <input type="text" name="MenuNo3" size="15" />
                </div></td>
                <td>
                <div align="center">
                    <input type="text" name="MenuPrice3" size="15" />
                </div></td>
                <td>
                <div align="center">
                    <input type="text" name="total3" size="15" />
                </div></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        </tbody>
    </table>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:42:08.667

你已经`var MenuPrice1 = (+form.MenuPrice1.value);`并且正在做`MenuPrice1.value =`以后。

还有一种更清洁的方法可以做到这一点，这也使得将来更容易维护。

**小提琴：http:** [//jsfiddle.net/8q7Fh/3](http://jsfiddle.net/8q7Fh/3)

```
var prices = [
    {
        values: [1,2,3,4,5],
        price: 'R70.00'
    },
    {
        values: [8,9,12],
        price: 'R85.00'
    },
    {
        values: [11],
        price: 'R105.00'
    }
];

function calcMenu(form)
{
    var i, searchValue = parseInt(form.MenuNo1.value);
    form.MenuPrice1.value = '';

    for (i in prices)
    {
        if ($.inArray(searchValue, prices[i].values) != -1)
        {
            form.MenuPrice1.value = prices[i].price;
        }
    }
} 
```

**注意：**当值是 6、7 和 10 时，您目前缺少价格。现在我已经设置它，以便如果找不到明确的价格，它将清除 MenuPrice 中的值。有什么要考虑的！

# bash - 在 Ubuntu 中重定向“<<<”？

> ID：16045139
> 
> 赞同：22
> 
> 时间：2013-04-16T19:10:10.557
> 
> 标签：bash, ubuntu, dash-shell

我收到此错误

> 语法错误：重定向意外

在行中：

```
 if grep -q "^127.0.0." <<< "$RESULT" 
```

我如何在 Ubuntu 中运行它？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-16T19:34:18.323

`<<<`是特定于 bash 的重定向运算符（因此它不是特定于 Ubuntu）。[文档](http://www.gnu.org/software/bash/manual/bashref.html#Here-Strings)将其称为“Here String”，是[“Here Document”](http://www.gnu.org/software/bash/manual/bashref.html#Here-Documents)的变体。

> **3.6.7 这里的字符串**
> 
> 这里文档的一种变体，格式为：
> 
> *<<< 字*
> 
> 该词*被*扩展并提供给其标准输入上的命令。

一个简单的例子：

```
$ cat <<< hello
hello 
```

如果遇到错误，很可能是您使用 bash 以外的 shell 执行命令。如果您`#!/bin/sh`的脚本顶部有，请尝试将其更改为`#!/bin/bash`.

如果您尝试将它与 一起使用`/bin/sh`，它可能会假定`<<`引用“此处的文档”，然后在此之后看到意外`<`，从而导致您看到“语法错误：重定向意外”消息。

zsh 和 ksh 也支持这种语法。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-04-16T19:41:30.653

```
if grep -q "^127.0.0." <<< "$RESULT"
then
    echo IF-THEN
fi 
```

是特定于 Bash 的东西。如果您使用不同的 bourne 兼容 shell，请尝试：

```
if echo "$RESULT" | grep -q "^127.0.0."
then
    echo IF-THEN
fi 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T19:16:13.400

如果我完成你的 IF 块，它在 Ubuntu 上对我有用：

```
if grep -q "^127.0.0." <<< "$RESULT"; then echo ""; fi 
```

# sugarcrm - SugarCrm 按帐户名称和名称查找机会

> ID：16045140
> 
> 赞同：0
> 
> 时间：2013-04-16T19:10:12.193
> 
> 标签：sugarcrm

我已完成此查询以根据帐户名称和名称寻找机会：

```
public function getOpportunity($session_id, $client, $email, $name){

        $acc = $this->getAccount($session_id, $client, $email);
        $acc_id = $acc->entry_list[0]->id;
        $query2 = " 
                            opportunities.id in
                            (select accounts_opportunities.opportunity_id from
                            accounts_opportunities inner join
                            accounts where
                                                    accounts_opportunities.account_id = accounts.id and
                                                    accounts_opportunities.deleted = 0 and
                                                    accounts.deleted = 0 and
                                                    accounts.id = '{$acc_id}')
                            and opportunities.deleted=0
                            and opportunities.name = '{$name}'";

        $op = $client->get_entry_list($session_id, 'Opportunities', $query2);

        return $op;
    } 
```

出于某种原因，它返回了一个错误，错误 40 访问被拒绝。我不知道为什么这个查询不起作用。我做了一个类似的，通过电子邮件查找帐户，它成功地将我想要的结果返回给我，没有任何错误。该查询如下：

```
 public function getAccount($session_id, $client, $email){

        $query = "accounts.id in 
( select bean_id from 
email_addr_bean_rel inner join
email_addresses where 
email_addr_bean_rel.email_address_id = email_addresses.id 
and email_addr_bean_rel.deleted = 0 and
email_addresses.deleted = 0 and 
bean_module = 'Accounts' and
email_addresses.email_address = '{$email}' )";

        $acc = $client->get_entry_list($session_id, 'Accounts', $query);
        return $acc;   
    } 
```

任何帮助，将不胜感激。谢谢你。

编辑：我正在使用 SOAP API 和 PHP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:50:24.630

有关更多详细信息，请参阅此博客文章...

[http://developers.sugarcrm.com/wordpress/2012/03/19/howto-avoiding-subqueries-with-our-web-services/](http://developers.sugarcrm.com/wordpress/2012/03/19/howto-avoiding-subqueries-with-our-web-services/)

# magento - Magento 结帐页面内容（不在 CMS 中）

> ID：16045144
> 
> 赞同：0
> 
> 时间：2013-04-16T19:10:25.110
> 
> 标签：magento, magento-1.7

有人可以解释一下与 URL 相关的 Magento 目录结构吗？我正在使用我相信的社区版本。

因此，有人要求我更新 magento 结帐页面上的一些内容。我不熟悉这个框架，所以试图弄清楚文件/文件夹结构对我来说是一个挑战。也就是说，结帐位于[http://domain.com/magento/checkout/onepage/](http://domain.com/magento/checkout/onepage/)

我唯一要更新的是结帐选项卡中显示的一些“条款”，我似乎无法通过 Magento CMS 找到任何地方（页面、条款等），以及我的另一件事我试图添加的是优惠券代码字段显示，我检查了（至少我认为）是相应的 XML 和 PHTML 文件，并且代码没有为优惠券代码注释掉，所以我怀疑我的问题在于事实我只是没有在正确的项目文件夹/文件中查找，或者我缺少某种默认继承。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:48:30.897

调试的第 1 步是从管理 HTML 控制台启用模板路径提示。这将显示正在加载的模板文件。从那里你应该能够解决你的问题。

```
System -> Configuration -> Developer -> Advanced -> Template hints 
```

但是，我查看了我在本地安装的 CE，并且在一页结帐中没有看到任何对条款的引用。也许这是一个额外的块被插入？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T03:34:13.803

*适用于所有版本的 Magento*

# Magento 路径提示

如果您在站点上启用**模板路径提示**并刷新缓存，**所有**站点访问者都会看到提示。

为避免这种情况，请将您的外部 IP 地址放入：

`System -> Configuration -> Developer -> Developer Client Restrictions -> Allowed IPs (comma separated)`

示例：转到[http://www.whatismyip.com/](http://www.whatismyip.com/)并记下您的 IP 地址（例如 103.167.139.74）。在字段中输入 ip 并保存。

这样做只会向来自上述 IP 地址的访问者显示路径提示。

## 模板文件的路径

这将取决于使用的主题。假设您在社区版中使用默认的 magento 主题。然后您将在以下位置找到所有模板`app/design/frontend/base/default/template/checkout/`

结帐零件住在`app/design/frontend/base/default/template/checkout/onepage`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:07:48.833

Magento Path 肯定会提示，或者如果您可以投资几块钱购买商业错误 2。现在，如果这是您第一次使用 magento，我强烈建议您备份数据库，复制主题中的所有文件并设置开发环境。您应该做的另一件事是禁用缓存并告诉 magento 在工作时显示错误（检查您的 index.php `ini_set('display_errors', 1);`}

# c# - 在 HTTPWebRequest 中指定自定义 IP

> ID：16045148
> 
> 赞同：1
> 
> 时间：2013-04-16T19:10:37.827
> 
> 标签：c#, .net, ip, spoofing

是否可以更改 HTTPWebRequest C# 中的原始 IP 并提供任何自定义/假 IP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:36:39.053

您可以尝试以下库

*   [PCap.NET](http://pcapdotnet.codeplex.com/)从[使用 PCap.NET 的 IP 地址欺骗中引用](https://stackoverflow.com/a/2857274/1012641)
*   [Sharppcap](http://sourceforge.net/projects/sharppcap/)引用自[C# 如何欺骗 WebRequest 的 IP 地址](https://stackoverflow.com/a/7959380/1012641)

# r - 使用带有 knitr 的内联代码包含预定义的变量

> ID：16045149
> 
> 赞同：8
> 
> 时间：2013-04-16T19:10:38.507
> 
> 标签：r, knitr

如何使用带有 knitr 的内联表达式包含变量。

例如，这按预期工作：

```
A random number from the normal distribution `r rnorm(1)`. 
```

但是如果你想打印一个预定义的字符串/数字：

```
```{r}
company <- "ABC Co"
```

Some text about `r company` 
```

编织后不打印任何内容。有什么东西需要包起来吗

* * *

**根据请求更新**会话信息：

```
R version 3.0.0 (2013-04-03)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_CA.UTF-8       LC_NUMERIC=C               LC_TIME=en_CA.UTF-8        LC_COLLATE=en_CA.UTF-8    
 [5] LC_MONETARY=en_CA.UTF-8    LC_MESSAGES=en_CA.UTF-8    LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C             LC_MEASUREMENT=en_CA.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] slidify_0.3.3 knitr_1.2    

loaded via a namespace (and not attached):
[1] digest_0.6.3   evaluate_0.4.3 formatR_0.7    markdown_0.5.4 stringr_0.6.2  tools_3.0.0    whisker_0.1   
[8] yaml_2.1.7 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T19:12:21.497

包装变量`I()`使其按预期工作。

```
```{r}
company <- "ABC Co"
```

Some text about `r I(company)` 
```

虽然 .Rmd 没有明确说明，但在此处记录：http: [//yihui.name/knitr/demo/output/](http://yihui.name/knitr/demo/output/)

# ruby - OptionParser 无缘无故地抛出“缺少参数”

> ID：16045150
> 
> 赞同：2
> 
> 时间：2013-04-16T19:10:40.650
> 
> 标签：ruby, exception, optparse

我只有 1 个可能的选项，它被解析如下：

```
 def parse_options
    options = {}
    options[:markdown] = false
    OptionParser.new do |opts|
      opts.on('-md', '--markdown', 'Use Markdown Syntax') do
        options[:markdown] = true
      end
    end.parse!
  end 
```

如您所见，该选项不需要任何参数。我发现更奇怪的是这个作品：

```
command -md 
```

但这会引发异常：

```
command --markdown

in `parse_options': missing argument: --markdown (OptionParser::MissingArgument) 
```

有任何想法吗？我阅读了文档和多个示例，但无法弄清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T19:37:30.527

你不能使用这样的两个字母开关。和

```
opts.on('-m', '--markdown', 'Use Markdown Syntax') do 
```

它工作正常。请参阅[OptionParser 文档](http://ruby-doc.org/stdlib-2.0/libdoc/optparse/rdoc/OptionParser.html#method-i-make_switch)下的**短样式开关**

# php - 使用 Paypal 付款提高安全性

> ID：16045152
> 
> 赞同：4
> 
> 时间：2013-04-16T19:10:43.667
> 
> 标签：php, forms, paypal

我的网站上有这段代码：

```
<form method="post" action="process.php">
    <input type="hidden" name="itemname" value="1" /> 
    <input type="hidden" name="itemnumber" value="2" />
    <input type="hidden" name="itemQty" value="1" />
    <input type="hidden" name="itemprice" value="17"> 
</form> 
```

此代码向 process.php 发送一个 POST，它会打开一个 paypal 类来进行付款。

一切都很好，但我有一个很大的麻烦。关键是，如果我使用 FireBug 编辑任何值，例如“itemprice”，任何人都可以更改默认值，并在处理付款时将 itemprice 替换为任何其他数量。

我该如何解决这个问题？有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:21:45.707

您可以使用 PayPal 即时付款通知系统 (IPN)。您将 URL 提供给您网站上可以处理付款的脚本。当您登录到您的 PayPal 帐户时，它就在某个地方。

每次进行新付款时，PayPal 都会向您的 IPN 脚本发送一个请求，其中包含付款的所有详细信息（项目 ID、名称、价格，无论您想要什么，然后您可以使用您的数据库在脚本中验证价格是否匹配提供的项目 ID。

在我看来，它很容易实现并且非常灵活。它在 PayPal 网站上也有很好的记录。理解它并不需要太长时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T12:35:42.803

您永远不应该依赖网络表单中的价格。因为项目有它的 ID，所以只将 ID 和所需数量发送到 process.php 是完全有效的。反过来，这应该直接从源（数据库、配置...）中获取价格，而不是从（可能被篡改的）Web 表单数据中获取价格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T19:20:01.730

加密是阻止这种情况的唯一方法，您在客户端无能为力。您可以尝试添加一些验证服务器端或使用 _SESSION，但这些是您唯一的选择。

# android - 强制关闭有很多错误

> ID：16045154
> 
> 赞同：0
> 
> 时间：2013-04-16T19:10:50.320
> 
> 标签：android

谁能告诉我，这里有什么问题？我一直在尝试一整天。我是 android 新手，我也不擅长阅读 logcat，因此，我真的希望有人能帮助我。应用力一直关闭。

```
private ProgressDialog pDialog;

    // Creating JSON Parser object
    JSONParser jParser = new JSONParser();

    ArrayList<HashMap<String, String>> eventsList;

    // url to get all products list
    private static String url_all_products = "http://xx.php";

    // JSON Node names
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_CUSTOMER = "customer";
    private static final String TAG_PID = "pid";
    private static final String TAG_FIRSTNAME = "firstname";
    private static final String TAG_LASTNAME = "lastname";
    private static final String TAG_ADDRESS = "address";
    private static final String TAG_TOTALCOST = "totalCost";

    // products JSONArray
    JSONArray events = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_customer_transaction);

        // Hashmap for ListView
        eventsList = new ArrayList<HashMap<String, String>>();

        // Loading products in Background Thread
        new LoadAllProducts().execute();

    }

    /**
     * Background Async Task to Load all product by making HTTP Request
     * */
    class LoadAllProducts extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(CustomerTransaction.this);
            pDialog.setMessage("Loading. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting All products from url
         * */
        protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

            // Check your log cat for JSON reponse
            Log.d("All Products: ", json.toString());

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // products found
                    // Getting Array of Products
                    events = json.getJSONArray(TAG_CUSTOMER);

                    // looping through All Products
                    for (int i = 0; i < events.length(); i++) {
                        JSONObject c = events.getJSONObject(i);

                        // Storing each json item in variable
                        String pid = c.getString(TAG_PID);
                        String firstname = c.getString(TAG_FIRSTNAME);
                        String lastname = "Time :" +c.getString(TAG_LASTNAME);
                        String address = "Date :" +c.getString(TAG_ADDRESS);
                        String totalCost = "Venue :" +c.getString(TAG_TOTALCOST);

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_PID, pid);
                        map.put(TAG_FIRSTNAME, firstname);
                        map.put(TAG_LASTNAME, lastname);
                        map.put(TAG_ADDRESS, address);
                        map.put(TAG_TOTALCOST, totalCost);
                        // adding HashList to ArrayList
                        eventsList.add(map);
                    }
                } 

            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data into ListView
                     * */
                    ListAdapter adapter = new SimpleAdapter(
                            CustomerTransaction.this, eventsList,
                            R.layout.list_item4, new String[] { TAG_PID,TAG_FIRSTNAME, TAG_LASTNAME, TAG_ADDRESS, TAG_TOTALCOST},
                            new int[] { R.id.pid, R.id.firstname, R.id.lastname, R.id.address, R.id.totalCost });
                    // updating listview
                    setListAdapter(adapter);
                }
            });

        }

    } 
```

日志猫：

```
04-16 18:34:22.706: E/WindowManager(1019): Activity com.spyraa.bookstore.CustomerTransaction has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{40d2c1e8 V.E..... R.....ID 0,0-304,96} that was originally added here
 04-16 18:34:22.706: E/WindowManager(1019): android.view.WindowLeaked: Activity com.spyraa.bookstore.CustomerTransaction has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{40d2c1e8 V.E..... R.....ID 0,0-304,96} that was originally added here
04-16 18:34:22.706: E/WindowManager(1019):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:354)
04-16 18:34:22.706: E/WindowManager(1019):  at  android.view.WindowManagerGlobal.addView(WindowManagerGlobal.java:216)
04-16 18:34:22.706: E/WindowManager(1019):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:69)
04-16 18:34:22.706: E/WindowManager(1019):  at android.app.Dialog.show(Dialog.java:281)
 04-16 18:34:22.706: E/WindowManager(1019):     at com.spyraa.bookstore.CustomerTransaction$LoadAllProducts.onPreExecute(CustomerTransaction.java:84)
04-16 18:34:22.706: E/WindowManager(1019):  at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:586)
 04-16 18:34:22.706: E/WindowManager(1019):     at android.os.AsyncTask.execute(AsyncTask.java:534)
04-16 18:34:22.706: E/WindowManager(1019):  at com.spyraa.bookstore.CustomerTransaction.onCreate(CustomerTransaction.java:61)
04-16 18:34:22.706: E/WindowManager(1019):  at android.app.Activity.performCreate(Activity.java:5104)
04-16 18:34:22.706: E/WindowManager(1019):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-16 18:34:22.706: E/WindowManager(1019):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-16 18:34:22.706: E/WindowManager(1019):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-16 18:34:22.706: E/WindowManager(1019):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-16 18:34:22.706: E/WindowManager(1019):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-16 18:34:22.706: E/WindowManager(1019):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-16 18:34:22.706: E/WindowManager(1019):  at android.os.Looper.loop(Looper.java:137)
04-16 18:34:22.706: E/WindowManager(1019):  at android.app.ActivityThread.main(ActivityThread.java:5039)
04-16 18:34:22.706: E/WindowManager(1019):  at java.lang.reflect.Method.invokeNative(Native Method)
04-16 18:34:22.706: E/WindowManager(1019):  at java.lang.reflect.Method.invoke(Method.java:511)
04-16 18:34:22.706: E/WindowManager(1019):  at     com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-16 18:34:22.706: E/WindowManager(1019):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-16 18:34:22.706: E/WindowManager(1019):  at dalvik.system.NativeStart.main(Native Method) 
```

太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:17:39.653

像这样使用请求

HttpPost httpost = new HttpPost(url_all_products);

```
List <NameValuePair> nvps = new ArrayList <NameValuePair>();
nvps.add(new BasicNameValuePair("test1","test1" ));
nvps.add(new BasicNameValuePair("test2", "test2" ));

        httpost.setEntity(new UrlEncodedFormEntity(nvps, HTTP.UTF_8));

response = getResponse(httpost); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:20:25.590

我看到几个问题。第一个我认为是造成你的问题。将您的进度条初始化移出`onPreExecute()`到类声明中

```
 class LoadAllProducts extends AsyncTask<String, String, String> {

  pDialog = new ProgressDialog(CustomerTransaction.this);  // move to here so you can cancel in onPostExecute()
    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute(); 
```

您不需要`runOnUiThread`in，`onPostExecute()`因为此方法在`UI`线程上运行。您正在接受一个参数，`onPostExecute()`但似乎没有从`doInBackground()`. 可能还有更多问题，但我会先尝试这些事情，看看你会得到什么

知道如何使用 logcat 非常重要。在这里它告诉您一个窗口已经泄漏，我认为这是由您初始化`progressbar`. 通常你会看到一行写着“由空指针异常引起”或其他异常。当您找到此行时，引用您的项目的第一行

```
 at com.spyraa.bookstore.CustomerTransaction$LoadAllProducts.onPreExecute(CustomerTransaction.java:84) 
```

例如，将告诉您第 84 行是您的错误发生的位置。这通常是开始寻找的好地方。希望这可以帮助

# c# - 如何搜索下载的网站字符串？

> ID：16045156
> 
> 赞同：1
> 
> 时间：2013-04-16T19:11:09.110
> 
> 标签：c#

我已经下载了字符串并找到了索引，但无法获取我正在搜索的文本。这是我的代码：

```
System.Net.WebClient client = new System.Net.WebClient();
string downloadedString = client.DownloadString("http://www.gmail.com");
int ss = downloadedString.IndexOf("fun");
string mm = downloadedString.Substring(ss);
textBox1.Text = mm; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:33:47.683

访问[www.gmail.com](http://www.gmail.com)将执行 3 个指令。请尝试以下网址：

> [https://accounts.google.com/ServiceLogin?service=mail&passive=true&rm=false&continue=https://mail.google.com/mail/&ss=1&scc=1<mpl=default<mplcache=2](https://accounts.google.com/ServiceLogin?service=mail&passive=true&rm=false&continue=https://mail.google.com/mail/&ss=1&scc=1&ltmpl=default&ltmplcache=2)

此外，请考虑使用适当的 HTML 解析器，例如[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:12:54.520

尝试以下

```
 if (downloadedString .Contains("fun"))
    {
        // Process...
    } 
```

# r - data.table 中的唯一标识符

> ID：16045161
> 
> 赞同：4
> 
> 时间：2013-04-16T19:11:26.027
> 
> 标签：r, uniqueidentifier, data.table, stata

我有`data.table`11 个变量和 200,000 多行。我试图在这个`unique identifier`中找到（换句话说，`key`）`data.table`。

我在 Stata 中寻找类似[isid](http://www.stata.com/help.cgi?isid)的东西，它检查指定的变量是否唯一标识观察结果。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T23:16:47.797

`data.table`我认为您对关于s 和s的几点感到困惑`key`。

*   除非您明确设置，否则A`data.table`将没有密钥。
*   `data.table`密钥不必*是*唯一的。

您可以编写一个函数来检查某些列是否可以为数据集创建唯一标识符。

我在这里使用`unique`了 data.table，并注意在 data.table 的无键副本上使用。

这效率*不*高。

```
 isid <- function(columns, data, verbose  = TRUE){
      if(!is.data.table(data)){
        copyd <- data.table(data)
      } else{ 
      copyd <- copy(data)
      }
     if(haskey(copyd)){
       setkey(copyd, NULL)
     }
    # NA values don't work in keys for data.tables
    any.NA <- Filter(columns, f= function(x) any(is.na(copyd[[x]])))
    if(verbose){
      for(aa in seq_along(any.NA)){message(sprintf('Column %s contains NA values', any.NA[aa] ))}
    }
    validCols <- setdiff(columns, any.NA)
    # cycle through columns 1 at a time
    ncol <- 1L
    validKey <- FALSE
    while(!isTRUE(validKey) && ncol <= length(validCols)){
      anyValid <- combn(x = validCols, m = ncol, FUN = function(xn){
        subd <- copyd[, ..xn]
        result <- nrow(subd) == nrow(unique(subd))
        list(cols = xn, valid = result)
      }, simplify = FALSE)

      whichValid <- sapply(anyValid, `[[`, 'valid')
      validKey <- any(whichValid)
      ncol <- ncol + 1L
    }

 if(!validKey){
 warning('No combinations are unique')
 return(NULL)} else {
   valid.combinations <- lapply(anyValid, `[[`, 'cols')[whichValid]
   if(length(valid.combinations) > 1){
    warning('More than one combination valid, returning the first only')
    }
    return(valid.combinations[[1]])
   }
 } 
```

## 一些使用中的例子

```
 oneU <- data.table(a = c(2,1,2,2), b = c(1,2,3,4))
 twoU  <- data.table(a = 1:4, b = letters[1:4])
 bothU <- data.table(a = letters[1:2], b = rep(letters[1:2], each = 2))
 someNA <- data.table(a = c(1,2,3,NA), b = 1:4)

isid(names(oneU), oneU)
# [1] "b"
isid(names(twoU), twoU)
# [1] "a"
# Warning message:
# In isid(names(twoU), twoU) :
#   More than one combination valid, returning the first only
isid(names(bothU), bothU)
# [1] "a" "b"
isid(names(someNA), someNA)
# Column a contains NA values
# [1] "b"

# examples with no valid identifiers

isid('a', someNA)
## Column a contains NA values
## NULL
## Warning message:
## In isid("a", someNA) : No combinations are unique
isid('a', oneU)
## NULL
## Warning message:
##  In isid("a", oneU) : No combinations are unique 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T23:48:49.373

这并不能完全回答 OP 问题 [我还没有使用过`data.table`]，但它只会帮助`R`用户回答 OP 的问题。我的重点将是解释`isid`实际是如何工作的`Stata`。我使用`R`数据库中的数据（您需要`optmatch`为此数据安装）。

```
library(optmatch)
data(nuclearplants)
sample<-nuclearplants 
```

我只关注数据框的子集，因为我的目标是只解释`isid`正在做什么：

```
sample<-sample[,c(1,2,5,10)]
head(sample,5)
 cost  date  cap cum.n
H 460.05 68.58  687    14
I 452.99 67.33 1065     1
A 443.22 67.33 1065     1
J 652.32 68.00 1065    12
B 642.23 68.00 1065    12 
```

现在，当我使用该`Stata`命令时`isid cost`，它不显示任何内容，这意味着对成本没有重复的观察（`R`该命令是`unique(sample$cost)`或`sample[duplicated(sample),]`

```
[1] cost  date  cap   cum.n
<0 rows> (or 0-length row.names).) 
```

但是，当我们`isid date`在日期变量上使用 ie 时，`Stata`报告它不是唯一的。或者，如果您运行`duplicates date examples`,`Stata`会给您重复的观察结果，如下所示：

```
. duplicates example date

Duplicates in terms of date

  +-------------------------------+
  | group:   #   e.g. obs    date |
  |-------------------------------|
  |      1   2         27   67.25 |
  |      2   2          2   67.33 |
  |      3   3         29   67.83 |
  |      4   2          4      68 |
  |      5   5          8   68.42 |
  |-------------------------------|
  |      6   2          1   68.58 |
  |      7   2         12   68.75 |
  |      8   3         14   68.92 |
  +-------------------------------+ 
```

为了解释输出，它是说观察 67.25 有两个重复观察（如 所示`#`）。第一个观察对应于第 27 行（它没有用 67.25 标识第二个重复的行号）。`Group`给出每次重复的唯一标识符.

```
R command for the same is duplicated(sample$date). 
duplicated(sample$date)
 [1] FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE  TRUE FALSE  TRUE FALSE  TRUE  TRUE
[22] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE

To identify the unique observation we can also use unique(sample$date) in R. 
```

我们可以对两个变量做同样的事情`isid cost date`。同样，`Stata`不能识别跨两个变量的重复观察。使用`unique(sample[,c(1,2)]`in时也是如此`R`。

同样，如果我`isid`在所有四个变量上运行然后`Stata`说它是唯一的（没有警告）。

```
duplicates example  cost date cap cum_n

Duplicates in terms of cost date cap cum_n

(0 observations are duplicates) 
```

与`unique(sample)`in相同`R`。

**结论**：因此，我认为只要一个变量是唯一的（即它没有重复的观察值），包含唯一变量的变量组合应该始终是唯一的。如果我错了，请纠正我。

# nosql - Elasticsearch 中的求和查询

> ID：16045165
> 
> 赞同：3
> 
> 时间：2013-04-16T19:11:33.503
> 
> 标签：nosql, elasticsearch

我对 Elasticsearch 相当陌生。我正在尝试编写一个按字段分组并计算总和的查询。在 SQL 中，我的查询如下所示： `SELECT lane, SUM(routes) FROM lanes GROUP BY lane`

我在 ES 中有这样的数据：

```
{
  "_index": "kpi",
  "_type": "mroutes_by_lane",
  "_id": "TUeWFEhnS9q1Ukb2QdZABg",
  "_score": 1.0,
  "_source": {
    "warehouse_id": 107,
    "date": "2013-04-08",
    "lane": "M05",
    "routes": 4047
  }
},
{
  "_index": "kpi",
  "_type": "mroutes_by_lane",
  "_id": "owVmGW9GT562_2Alfru2DA",
  "_score": 1.0,
  "_source": {
    "warehouse_id": 107,
    "date": "2013-04-08",
    "lane": "M03",
    "routes": 4065
  }
},
{
  "_index": "kpi",
  "_type": "mroutes_by_lane",
  "_id": "JY9xNDxqSsajw76oMC2gxA",
  "_score": 1.0,
  "_source": {
    "warehouse_id": 107,
    "date": "2013-04-08",
    "lane": "M05",
    "routes": 3056
  }
},
{
  "_index": "kpi",
  "_type": "mroutes_by_lane",
  "_id": "owVmGW9GT345_2Alfru2DB",
  "_score": 1.0,
  "_source": {
    "warehouse_id": 107,
    "date": "2013-04-08",
    "lane": "M03",
    "routes": 5675
  }
},
... 
```

我想基本上在 ES 中运行与在 SQL 中相同的查询，这样我的结果将类似于（当然在 json 中）：`M05: 7103, M03: 9740`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T22:14:53.787

在 elasticsearch 中，您可以通过使用[terms stats facet](http://www.elasticsearch.org/guide/reference/api/search/facets/terms-stats-facet/)来实现：

```
{
    "query" : {
        "match_all" : {  }
    },
    "facets" : {
        "lane_routes_stats" : {
            "terms_stats" : {
                "key_field" : "lane",
                "value_field" : "routes",
                "order": "term"
            }
        }
    }
} 
```

# sql - SQL 甲骨文加

> ID：16045167
> 
> 赞同：-1
> 
> 时间：2013-04-16T19:11:35.400
> 
> 标签：sql, oracle

*我必须编写一个子查询，该查询将返回由推荐Jorge Perez*的同一个人推荐的那些客户的姓名

 *这是我带来的：

```
select firstname||' '||lastname "Customer Name",Referred
from book_customer
where Firstname='Jorge' and lastname=' Perez'
order by referred 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:05:34.237

你所拥有的看起来只会返回 Jorge Perez 和推荐他的人。你需要类似的东西：

```
select firstname, lastname
from book_customer
where Referred = (select Referred
                  from book_customer
                  where firstname='Jorge' and lastname='Perez') 
```

在这里，我假设`Referred`只是用户的 id。上面的查询获取与 Jorge Perez 具有相同推荐 ID 的用户的名字和姓氏。*

# powershell - 使用 Nuget 安装到 IIS 应用程序根站点

> ID：16045169
> 
> 赞同：1
> 
> 时间：2013-04-16T19:11:57.127
> 
> 标签：powershell, iis-7, nuget

我有几个 ASP.NET 应用程序在一个通用 IIS 站点下运行，并且想使用 NuGet 包来转换他们的配置，同时将版本化的 JavaScript 文件复制到 IIS 站点的根应用程序内容文件夹。

NuGet可以这样使用吗？即是否可以在包安装/更新期间确定正在运行 ASP.NET 项目的 IIS 站点根应用程序（例如使用 preinit powershell 脚本）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:15:03.367

您正在寻找的工具是[Octopus Deploy](http://octopusdeploy.com/)它在 IIS 上安装 nuget 包，作为 Windows 服务等。此外，它为管理提供了非常好的 GUI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:33:54.100

NuGet 是一个依赖管理器，因此适合在开发/构建时使用，而不是在部署时使用。

看看 Inedo 的[BuildMaster](http://inedo.com/buildmaster)。它可以处理从源代码控制到生产部署的整个过程。还有一个免费版本肯定能满足您的要求，它还有一个模块来管理您的配置文件，因此您无需担心进行转换。

（免责声明：我为 Inedo 工作）

# apache - 您可以在同一系统上运行两个独立的 Apache 服务器吗？

> ID：16045172
> 
> 赞同：0
> 
> 时间：2013-04-16T19:12:02.330
> 
> 标签：apache, tomcat, jira

只要它们使用不同的端口，您可以在同一系统上并行运行两个独立的 apache 服务器吗？

我有一个需要安装 JIRA 的系统，但该系统已经在使用中，并且正在为一个单独的项目运行 Apache 服务器。JIRA 安装程序带有一个预配置的 apache tomcat 服务器。如果我刚刚安装了 JIRA，我会遇到预先存在的 apache 服务器的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:24:52.013

如果您问的是运行两个 Apache Tomcat 实例，那么这不是问题。此外，您可以`CATALINA_HOME`在多个单独的 Tomcat 实例之间共享相同的内容，每个实例都有自己的`CATALINA_BASE`. 我经常在生产服务器上为每个应用程序运行单独的 Tomcat 实例。有关参数的提示，请参阅[此初始化脚本](https://github.com/cvut/gentoo-overlay/blob/247356a5ce811dfe0d89b0311b9cdeb9a386c27e/dev-java/tomcat-scripts/files/runscript.sh)。

但是，如果您要在同一台服务器上运行 Apache HTTP Server 和 Apache Tomcat，那就有点棘手了。常用的方法是在 Tomcat 前面使用一个 Web 服务器（Apache HTTP、nginx、...）作为反向代理。然后许多应用程序可以在相同的端口和 IP 地址下运行。如果是 Apache HTTP 服务器，请参阅[mod_proxy_ajp](http://httpd.apache.org/docs/2.2/mod/mod_proxy_ajp.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:20:30.137

Apache HTTPD 和 Tomcat 是 2 个不同的服务器。此外，JIRA 不在端口 80 上运行，因此在这种情况下，端口号不会发生冲突。如果您想在端口 80 上公开您的 JIRA，您可以使用 Apache HTTPD 的 mod_proxy 将请求中继到运行 JIRA 的实际端口，以便它对用户透明。

所以基本上：是的，如果不使用相同的端口，您可以在同一台机器上同时运行 Apache HTTPD 和 Apache Tomcat。

# installation - 部署 ClearCanvas 的自定义构建

> ID：16045174
> 
> 赞同：0
> 
> 时间：2013-04-16T19:12:05.037
> 
> 标签：installation, clearcanvas

除了将可执行文件和 dll 复制到之外，ClearCanvas 安装程序究竟做了什么`C:\Program Files\clearcanvas\clearcanvas workstation`？

通过安装 SQL Server Compact Edition 4.0、运行 CCWorkstation2.0SP1x64.exe 安装程序（来自 SourceForge 上的 CCDicomViewer2.0SP1x64.exe 包），然后替换 .exe、.dll 和.config 文件和 actionmodel.xml 文件以及我的自定义构建中的相应文件。然而，这并不是部署应用程序的理想方式。github 存储库中缺少用于构建安装程序的项目。

澄清一下，我专门讨论的是部署 ClearCanvas ImageViewer（不是 ImageServer 或 WebStation 等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T19:20:55.563

Workstation 还有一个 Service 你应该看看 ShredHostService 项目

# r - Plotting time series with R

> ID：16045177
> 
> 赞同：0
> 
> 时间：2013-04-16T19:12:11.973
> 
> 标签：r, plot

I'm using R and I've to plot 50 point. My input data are something like these:

```
Day             Pressure
20/01/2013 13:30:00     980
20/01/2013 20:30:00     978
21/01/2013 13:30:00     985
21/01/2013 20:30:00     991 
```

I've some problems because I can't find the right command to plot the Day vs the Pressure.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:27:21.393

This might help you plot the data using ggplot2.

The data I used was as follows:

```
Day             Pressure
20/01/2013 13:30:00 980
20/01/2013 20:30:00 978
21/01/2013 13:30:00 985
21/01/2013 20:30:00 991 
```

The code is as follows:

```
library(ggplot2)
data2 <- read.csv("Stack Overflow/timeseries.csv")
data2
data2$Day <- strptime(data2$Day, format="%d/%m/%Y %H:%M:%S")
ggplot(data2, aes(x=Day, y=Pressure))+geom_point()+xlab("Date") 
```

Hope it helps.

**Output** ![enter image description here](https://i.stack.imgur.com/5SWoD.png)

If you want to use base plot then use the following:

```
plot(data2$Day,data2$Pressure, xlab="Date",ylab="Pressure") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T22:18:47.003

Using the [zoo package](http://cran.r-project.org/package=zoo) read the data into `z` and plot it:

```
Lines <- "Day             Pressure
20/01/2013 13:30:00 980
20/01/2013 20:30:00 978
21/01/2013 13:30:00 985
21/01/2013 20:30:00 991
"

library(zoo)
z <- read.zoo(text = Lines, skip = 1, index = 1:2, tz = "", format = "%d/%m/%Y %H:%M:%S")
plot(z) 
```

![enter image description here](https://i.stack.imgur.com/USRsV.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:22:41.000

You need to convert your "Day" column into Date format for that you need to use as.Date("column") conversion trick. I took the same data as yours

and plotted it. [http://imgur.com/oyYomZf](http://imgur.com/oyYomZf) here..(as i don't have enough reputation points).

```
library(ggplot2)
library(scales)

date_count<-read.csv("sample_date.csv")
timeline<-as.Date(date_count$Day)
df<-data.frame(timeline,date_count$Pressure)
date_count.tmp<-ggplot(df, aes(x=timeline, y=date_count$Pressure)) + geom_line() 

summary(date_count.tmp)
save(date_count,file="temp_tags_count.rData")
ggsave(file="sample_datecount.pdf")
ggsave(file="sample_datecount.jpeg",dpi=72) 
```

and there you go with your problem solution.

# c# - 如何向控件添加多个转换？

> ID：16045181
> 
> 赞同：0
> 
> 时间：2013-04-16T19:12:19.753
> 
> 标签：c#, windows-phone-7

我想缩放它并旋转它。但我的控制只需要一个转变作为它`.RenderTransform`。

如何添加 ScaleTransform 和 Rotatetransform？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:20:52.440

这取自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.media.transformgroup.aspx)

```
<Page 
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" >
  <StackPanel Margin="50">

      <Button 
        RenderTransformOrigin="0.5,0.5"
        HorizontalAlignment="Center">Click
        <Button.RenderTransform>

          <!-- TransformGroup enables you to apply multiple transforms. In 
               this example, the button is scaled and rotated. -->
          <TransformGroup>

            <!-- Triple the size (scale) of the button in the Y direction. -->
            <ScaleTransform ScaleY="3" />

            <!-- Rotate the button by 45 degrees. -->
            <RotateTransform Angle="45" />

          </TransformGroup>
        </Button.RenderTransform>
      </Button>

  </StackPanel>
</Page> 
```

# .net - 像从 dotnet 访问的标准 curl

> ID：16045182
> 
> 赞同：1
> 
> 时间：2013-04-16T19:12:19.570
> 
> 标签：.net

dotnet 中是否有任何库可以将“正常”请求字符串转换为正确的请求？

可以使事情自动化的东西，例如

```
 client.Headers.[HttpRequestHeader.Authorization] <- "Basic " + un + ":" + pw; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:39:38.113

对于`HttpWebRequest`和`WebClient`，有`Credentials`性质。你可以写：

```
client.Credentials = new NetworkCredential("username", "password"); 
```

不知道有什么类似的东西可以与`HttpClient`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:19:32.910

如果您只是在编写脚本，为什么不能只使用 curl？它在窗口中工作。[http://curl.haxx.se/download.html](http://curl.haxx.se/download.html)

# c# - Where() 的 IEnumerable lambda 表达式

> ID：16045184
> 
> 赞同：3
> 
> 时间：2013-04-16T19:12:20.733
> 
> 标签：c#, linq, expression, ienumerable, iqueryable

以下代码适用于类型的集合`IQueryable`：

`Expression<Func<Activity, bool>> filter = e => e.IsDeleted && e.CategoryId == 1;`

但是这个表达式不适用于 type 的集合`IEnumerable`。

我必须如何修改我的表达式才能使其正常工作？

在我的真实场景中，我的集合对象是实体框架模型类的导航属性：`person.Activities.Where(filter);`

这些是错误：

```
Error 1
Instance argument: cannot convert from 'System.Collections.Generic.ICollection<Application.Models.Activity>' to 'System.Linq.IQueryable<Application.Models.Activity>'

Error 2
'System.Collections.Generic.ICollection<Application.Models.Activity>' does not contain a definition for 'Where' and the best extension method overload 'System.Linq.Queryable.Where<TSource>(System.Linq.IQueryable<TSource>, System.Linq.Expressions.Expression<System.Func<TSource,bool>>)' has some invalid arguments 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T19:14:38.000

> 我必须如何修改我的表达式才能使其正常工作？

只需使用委托而不是表达式树：

```
Func<Activity, bool> filter = e => e.IsDeleted && e.CategoryId == 1; 
```

如果您*必须*从表达式树开始，您可以将其编译为委托：

```
var filterDelegate = filterExpressionTree.Compile(); 
```

或使用`AsQueryable`将您的转换`IEnumerable<T>`为`IQueryable<T>`：

```
var foo = person.Activies.AsQueryable().Where(filterExpressionTree); 
```

除非您确实需要使用它们，否则我个人会避免使用表达式树。

# actionscript-3 - 如何在 as3 中的movieclip 的mouseclick 事件上加载新的swf？

> ID：16045188
> 
> 赞同：0
> 
> 时间：2013-04-16T19:12:27.977
> 
> 标签：actionscript-3, flash-cs5

我想创建一个翻转效果按钮，在单击事件时应该打开一个外部 swf，删除当前 swf 的所有内容。我已经创建了两个组件，一个按钮和一个影片剪辑。它的加载（新 URLRequest()）代码都不起作用。下面是我正在使用的完整代码。其中 btn2 是我的影片剪辑的类名，而 2.swf 是我要加载的外部 swf。

```
stop();
var bc2:btn2 = new btn2();
bc2.buttonMode = true;
bc1.addEventListener(MouseEvent.CLICK, mouseClick);

var loader = new Loader();

function mouseClick(event:MouseEvent): void {
     loader.unload();
     loader.load(new URLRequest("2.swf"));
     addChild(loader);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:11:11.103

第一个 btn2 实例需要添加您正在实例化的内容才能使其可见。

其次，您甚至在加载之前就尝试加载 swf。

我修改了代码

```
stop();
var bc2:btn2 = new btn2();
bc2.buttonMode = true;
this.addChild(bc2);
bc2.addEventListener(MouseEvent.CLICK, mouseClick);

var loader = new Loader();

function mouseClick(event:MouseEvent): void {
     loader.unload();
     loader.load(new URLRequest("2.swf"));
     loader.contentLoaderInfo.addEventListener(Event.COMPLETE, completeHandler, false, 0, true);
}

function completeHandler(event:Event):void{
    this.addChild(loader);
} 
```

这应该工作...

# css - 浏览器之间的 CSS margin-left 行为不同

> ID：16045204
> 
> 赞同：0
> 
> 时间：2013-04-16T19:13:07.463
> 
> 标签：css

我在使用 margin-left CSS 属性时遇到了一些问题。我有一些嵌套的无序列表。这是列表的样子，没有改变左边距（在 IE 和 Chrome 中）：

![不修改 margin-left CSS 属性](https://i.stack.imgur.com/Nmq1q.png)

我想减少每个列表的缩进量，所以我添加了这个 CSS 代码：

```
ul li ul
{
    margin-left: -25px;
} 
```

这在 Chrome 中运行良好，显示如下：

![在 Chrome 中正确显示](https://i.stack.imgur.com/49mIy.png)

但是，IE 8 显示如下：

![IE中显示不正确](https://i.stack.imgur.com/icMp3.png)

我猜这两个浏览器的边距开始的来源是不同的？如何在所有浏览器中实现减少嵌套无序列表缩进的预期效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:16:03.267

您应该研究 ul 和 li 的边距和填充“归零”，如下所示：

`ul,li { margin: 0; padding: 0; }`

由于不同的浏览器有不同的默认值。从那里，您应该能够根据需要添加自己的边距和填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:18:39.113

始终使用 CSS 重置是一件好事。这将避免浏览器之间的差异。您可以使用通用重置，例如；

```
* {
  margin: 0;
  padding: 0;
  outline: 0;
  /* etc */
} 
```

或者更深入一点，使用[Eric Meyer 的](http://meyerweb.com/eric/tools/css/reset/)一个或[任何其他人](http://www.cssreset.com/)。有几个。

无论如何，在你的情况下，你应该重置你的边距和填充，而不是使用负`ul`边距`li`：

```
ul, li {
  margin: 0;
  padding: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T19:17:59.280

我建议[http://necolas.github.io/normalize.css/](http://necolas.github.io/normalize.css/)或标准的重置 css 样式表

不同的浏览器设置不同的默认设置。

# java - 使用 scrolllRectToVisible 自动滚动 textArea

> ID：16045206
> 
> 赞同：0
> 
> 时间：2013-04-16T19:13:15.823
> 
> 标签：java, swing, scroll, jtextarea, jviewport

因此，我在滚动窗格中设置了一个 JTextArea，并使用我设置的按钮，每次单击它时，我都希望 textarea 的视图下拉一行。（所以在 JTextArea 顶部单击两次是第 3 行）。

我知道最好的方法是使用 .scrollRectToVisible(); 想法，但我真的很难执行它，因为我无法绕过它的矩形边。

希望得到任何帮助，谢谢！

```
 int scrollPanePosition = scrollPane.getVerticalScrollBar().getValue());

    //and then in the method that responds to my button 
    //(it didn't work at all but i thought this was the right idea).
    {
    scrollPane.setVerticalScrollBar(scrollPanePosition + 1); 
    scrollPanePosition = scrollPane.getVerticalScrollBar().getValue();
    } 
```

# java - Antlr如何在带引号的字符串中转义引号符号

> ID：16045209
> 
> 赞同：6
> 
> 时间：2013-04-16T19:13:19.477
> 
> 标签：java, antlr

我想要一些语法来表示一个字符串，用 " 引用，字符串中的 " 符号可以像 \" 一样引用。以下是我的语法：

```
fragment
NUM_LETTER : ('a'..'z'|'A'..'Z'|'0'..'9');

STRING_LITERAL : '"' (NUM_LETTER|'_'|('\\"'))* '"'; 
```

但它不起作用。我尝试在 AntlrWorks1.5 中解释 "\"a"，它在为 STRING_LITERAL 生成的语法树中给出了 MismatchedTokenException。我的语法的哪一部分是错误的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-16T20:12:18.400

语法没有问题。您可能会收到此错误，因为您使用的是错误的解释器。请改用 ANTLRWorks 的调试器。调试器将向您显示输入`"\"a"`已被很好地解析（按`CTRL`+`D`开始调试）。

此外，您的字符串规则可能看起来像这样更好：

```
STRING_LITERAL : '"' (~('"' | '\\' | '\r' | '\n') | '\\' ('"' | '\\'))* '"'; 
```

换句话说，你的字符串的内容是零或更多：

*   除引号、反斜杠或换行符以外的任何字符：`~('"' | '\\' | '\r' | '\n')`

或者

*   转义的引号或反斜杠`'\\' ('"' | '\\')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:16:14.430

试试下面的表达式：

```
STRING : '"' (options{greedy=false;}:( ~('\\'|'"') | ('\\' '"')))* '"'; 
```

# mysql - MYSQLI 不能很好地使用 INSERT

> ID：16045213
> 
> 赞同：1
> 
> 时间：2013-04-16T19:13:46.013
> 
> 标签：mysql

因此，如果编码不完全符合标准，请原谅编码，但我只是掌握了 MYSQL 并正在切换到 MYSQLI（因为我还没有学习面向对象，所以我发现它更容易，我是新手）我的问题是我在一个与 MYSQL 完美配合的小型网站上有一个简单的“发票”页面。当我切换到 MYSQLI（我确定我遗漏了一些明显的东西）时，我可以回显所有变量，检查了正确的数据库连接，但它不会向数据库中插入任何内容。这是有问题的函数，在提交“填写发票”表单后调用它，同样，所有 $_POST 变量都可以在函数中正确回显。

```
function createinvoice($billto,$cust,$addr,$desc,$desccost,$labcost,$comment){
$taxrate=".13";
$kaboom=str_replace(array("\r\n","\r","\n"),"<br />",$desccost); //keep original desccost for database
$kaboom=mysqli_real_escape_string(nl2br($kaboom));
$kaboom=nl2br($kaboom);
$lines=explode("<br />",$kaboom);
$matcost=0;

for($i=0;$i < count($lines);$i++) 
{
    $matcost=$matcost+$lines[$i];
}
$fullcost=$matcost+$labcost;
$taxdue = $fullcost*$taxrate;
$totaldue=$fullcost+$taxdue;

$desc=mysqli_real_escape_string($desc);
mysqli_query($con,"INSERT INTO invoice(customerID,customerName,customerAddr,description,desccost,material,labour,taxdue,totaldue,comment)
VALUES('$billto','$cust','$addr','$desc','$desccost','$matcost','$labcost','$taxdue','$totaldue','$comment')");
mysqli_free_result($result);
mysqli_close($con);
} 
```

编辑：显示连接字符串

```
if(include("/../dbinvoice.php")){echo "DB file connected";}
$con = mysqli_connect($dbhostname, $dbuser, $dbpass, $dbname);
if (mysqli_connect_errno($con)){echo "No MYSQL connection: ".mysqli_connect_error();exit();} 
```

每次页面加载时，我都会收到一条消息“DB 文件已连接”，显示它已读取 dbinvoice.php 文件，但连接时我没有收到错误消息。我已经用 phpinfo() 验证了 mysqli 在我的机器上（webmatrix 测试）。

# sas - 从数据步骤中的文本文件加载 SAS 代码

> ID：16045219
> 
> 赞同：2
> 
> 时间：2013-04-16T19:14:02.863
> 
> 标签：sas

假设我有一个 SAS 数据步骤，其中我`X`从其平均值中减去每个观察值（例如，我只有变量 ）：

```
data tmp;
  set tmp;
  x = x-2;
run; 
```

假设并不总是`2`，我有另一个脚本，它创建一个包含一行的文本文件，其中包含：

```
x = x-2; 
```

现在，问题是，有什么办法可以让我有类似的东西：

```
data tmp;
  set tmp;
  load text_file;
run; 
```

做与第一个数据步骤相同的事情？换句话说，我想要一个依赖于使用文件内容的解决方案（如我在数据步骤中或在宏中所示）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T19:48:49.177

%INCLUDE 会做你想做的事。假设您的文本文件 "c:\mycode.sas" 有该行

```
x=x-2; 
```

那么你可以这样做：

```
data tmp;
set tmp;
%include "c:\mycode.sas";
run; 
```

我注意到这是一种非常非常糟糕的方法，但这是你所要求的。

如果我想从 x 中减去 x 的平均值（标准化数据），我要么使用 PROC STDIZE，要么这样做：

```
proc means data=tmp;
var x;
output out=x_mean mean=x_bar;
run;

data want;
set tmp;
if _n_ = 1 then set x_mean;
x=x-x_bar;
run; 
```

或者，PROC STDIZE（包含在 SAS/STAT 中）：

```
proc stdize data=tmp out=want_std method=mean;
var x;
run; 
```

# javascript - 在画布中标记两个圆圈之间的相交区域

> ID：16045224
> 
> 赞同：7
> 
> 时间：2013-04-16T19:14:22.320
> 
> 标签：javascript, html5-canvas

我试图标记两个圆圈之间的重叠区域（如维恩图）。我想办法做到这一点是通过使用两个相交点绘制两条弧线，然后使用`fill()`. 我知道交点的坐标，但如何将其用作`arc()`函数的输入？

```
ctx.beginPath();
ctx.arc(circle1.x,circle1.y,circle1.r, ? , ? ,true);
ctx.fill();
ctx.closePath(); 
```

![在此处输入图像描述](https://i.stack.imgur.com/spvTt.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T20:09:48.820

**您可以使用画布的 globalCompositeOperation 绘制 2 个形状的交集**

![在此处输入图像描述](https://i.stack.imgur.com/m1flc.png)

globalCompositeOperation 允许您控制在画布上显示新旧绘图的哪些部分。

您可以在此处查看每种合成模式的示例：http: [//www.html5canvastutorials.com/advanced/html5-canvas-global-composite-operations-tutorial/](http://www.html5canvastutorials.com/advanced/html5-canvas-global-composite-operations-tutorial/)

我们使用其中 2 种合成模式来突出显示 2 个圆圈的交集：

**源头之上**

鉴于左圆已经绘制，source-atop 将**仅绘制右圆的相交部分**。

```
 ctx.globalCompositeOperation="source-atop";
    ctx.arc(circle2.x,circle2.y,circle2.r, 0, 2*Math.PI, false); 
```

**目的地结束**

鉴于左圆已经绘制，destination-over 将**在现有**左圆下方绘制右圆。

```
 ctx.globalCompositeOperation="destination-over";
    ctx.arc(circle2.x,circle2.y,circle2.r, 0, 2*Math.PI, false); 
```

需要考虑的内容很多，因此您可以注释掉所有绘图代码，然后一次一个操作地取消注释，以查看每个操作的效果。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/JGSJ5/](http://jsfiddle.net/m1erickson/JGSJ5/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");

    ctx.fillStyle="yellow";
    ctx.strokeStyle="black";
    ctx.lineWidth=3;

    var circle1={x:100,y:100,r:50};
    var circle2={x:140,y:100,r:50};

    // draw circle1
    ctx.save();
    ctx.beginPath();
    ctx.arc(circle1.x,circle1.y,circle1.r, 0, 2*Math.PI, false);
    ctx.stroke();
    ctx.fill();

    // composite mode "source-atop" to draw the intersection
    ctx.beginPath();
    ctx.fillStyle="orange";
    ctx.globalCompositeOperation="source-atop";
    ctx.arc(circle2.x,circle2.y,circle2.r, 0, 2*Math.PI, false);
    ctx.fill();
    ctx.stroke();
    ctx.restore();

    // destination-over to draw fill for circle2 again
    ctx.beginPath();
    ctx.globalCompositeOperation="destination-over";
    ctx.arc(circle2.x,circle2.y,circle2.r, 0, 2*Math.PI, false);
    ctx.fill();

    // back to normal composite mode (newest drawings on top)
    ctx.globalCompositeOperation="source-over";

    // draw the stroke for circle1 again
    ctx.beginPath();
    ctx.arc(circle1.x,circle1.y,circle1.r, 0, 2*Math.PI, false);
    ctx.stroke();

    // draw the stroke for circle2 again
    ctx.beginPath();
    ctx.arc(circle2.x,circle2.y,circle2.r, 0, 2*Math.PI, false);
    ctx.stroke();

}); // end $(function(){});
</script>

</head>

<body>
    <canvas id="canvas" width=300 height=300></canvas>
</body>
</html> 
```

# java - HIbernate @OneToOne 映射

> ID：16045228
> 
> 赞同：0
> 
> 时间：2013-04-16T19:14:43.080
> 
> 标签：java, hibernate

我有一个与 PatientVisitObject.java 一对一映射的 PatientVisit.java：

```
@Entity
@Table(name = "P_Visit")
public class PatientVisit extends Bean {
  @Id
  @Column(name = "PATIENT_VISIT_SEQ")
  private Long patientVisitSeq;
  @Column(name = "PATIENT_FIRST_NM")
  private String firstName;
  @Column(name = "PATIENT_LAST_NM")
  private String lastName;
  @Column(name = "PATIENT_MIDDLE_NM")
  private String middleName;
  @OneToOne
  private PatientVisitObject pvo;
} 
```

PatientVisitObject.java 有一个复合键。我需要将 key.patientVisitSeq 映射到 PatientVisit.java 中的 patientVisitSeq。

```
@Entity
@Table(name = "Patient_V_O")
public class PatientVisitObject extends Bean {
  @Id
  private PatientVisitObjectKey key;
  @Column(name = "FIELD")
  private String field;
} 
```

这是关键：

```
@Embeddable
public class PatientVisitObjectKey implements Serializable {
  @Column(name = "PATIENT_VISIT_SEQ")
  private Long patientVisitSeq;
  @Column(name = "PATIENT_VISIT_OBJECT_SEQ")
  private Long patientVisitObjectSeq;
} 
```

我尝试使用 @JoinTable 注释，但无法正确使用。有人可以给我一些指导。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:21:51.580

您需要使用双向映射`PatientVisit`作为关系的反面：

```
public class PatientVisit extends Bean {
    ...
    @OneToOne(mappedBy = "pv")
    private PatientVisitObject pvo;
    ...
}

public class PatientVisitObject extends Bean {
    @EmbeddedId
    private PatientVisitObjectKey key;

    @OneToOne 
    @MapsId("patientVisitSeq")
    private PatientVisit pv;

    ...
} 
```

**也可以看看：**

*   [`@MapsId`](http://docs.oracle.com/javaee/6/api/javax/persistence/MapsId.html)

# apache-flex - Flex 嵌入路径基于绑定变量的图像

> ID：16045236
> 
> 赞同：0
> 
> 时间：2013-04-16T19:15:04.667
> 
> 标签：apache-flex

我正在尝试在我的 Flex 项目中使用项目渲染器嵌入图像。

然而，图像路径是作为绑定变量传入的字符串。

我知道

```
<s:BitmapImage source="@Embed('/../assets/image.png')" /> 
```

因为图像是在运行时嵌入的？（有人可以澄清一下吗）

我将如何嵌入我的绑定字符串，有点像这样：

```
<s:BitmapImage source="@Embed('/../assets/{data.image}')" /> 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:08:43.467

我喜欢在 css 文件中嵌入图标。然后在 ItemRenderer 中，您可以设置 css 类并获取您想要的图像。

css 文件或 mxml css 块：

```
.icons 
{
    bender: Embed(source="/assets/bender.png");
    /* other icons */
} 
```

在渲染器中，当您覆盖设置数据方法时：

```
override public function set data(value:Object):void
{
    super.data = value;

    var iconName:String = data.image;

    if ( iconName )
    {
        var cssDecl2:CSSStyleDeclaration = styleManager.getStyleDeclaration(".icons");
        var IconClass:Class = cssDecl2.getStyle( iconName );
        bmImage.source = new IconClass();
    }
} 
```

和 bmImage 作为 id s:BitmapImage:

```
<s:BitmapImage id="bmImage" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:58:33.607

如果您想嵌入图像但在运行时动态找到它，我认为更好的选择是：嵌入所有可能的图像，然后动态获取对它的引用。我们通常使用这样的模式：

```
public class Icons {
    [Embed(source="icons/icon1.png")]
    public var icon1:Class;
    [Embed(source="icons/icon2.png")]
    public var icon2:Class;
} 
```

然后，您可以在运行时从您的 Icons 实例中动态获取嵌入的图像。

**编辑 - 自包含示例**- 我将使用项目渲染器，因为我认为这就是您正在做的事情。假设`data.image`可以是“飞机”、“火车”或“汽车”

```
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
            xmlns:s="library://ns.adobe.com/flex/spark" 
            xmlns:mx="library://ns.adobe.com/flex/mx">

    <fx:Script>
        <![CDATA[

            [Embed(source="/assets/icons/plane.png")]
            public var plane : Class;
            [Embed(source="/assets/icons/train.png")]
            public var train : Class;
            [Embed(source="/assets/icons/automobile.png")]
            public var automobile : Class;
        ]]>
    </fx:Script>

    <s:Image source="{this[data.image]}"/>

</s:ItemRenderer> 
```

这是一个非常简单的例子，并不是最好的实现方式，但你明白了。

# javascript - 如何使这个 jQuery div 滚动器在具有相同类的多个 div 上工作？

> ID：16045238
> 
> 赞同：1
> 
> 时间：2013-04-16T19:15:06.343
> 
> 标签：javascript, jquery

我一直在使用这个 jQuery div 滚动脚本（[How to make a scrollable div scroll on click and mouseover using jQuery](https://stackoverflow.com/questions/4571867/how-to-make-a-scrolable-div-scroll-on-click-and-mouseover-using-jquery)）效果很好，但现在我的客户希望我在一个 Wordpress 博客页面中使用它，该页面上有多个区域需要滚动的页面。

是否可以在具有相同类的多个实例上使用此脚本（即“滚动”）？

这是我的脚本；

```
$(function() {
var ele   = $('.scroll');
var speed = 25, scroll = 5, scrolling;

$('#scroll-up').mouseenter(function() {
    // Scroll the element up
    scrolling = window.setInterval(function() {
        ele.scrollTop( ele.scrollTop() - scroll );
    }, speed);
});

$('#scroll-down').mouseenter(function() {
    // Scroll the element down
    scrolling = window.setInterval(function() {
        ele.scrollTop( ele.scrollTop() + scroll );
    }, speed);
});

$('#scroll-up, #scroll-down').bind({
    click: function(e) {
        // Prevent the default click action
        e.preventDefault();
    },
    mouseleave: function() {
        if (scrolling) {
            window.clearInterval(scrolling);
            scrolling = false;
        }
    }
});
}); 
```

这就是标记（主“提要”包装器和单个“单个”div 都需要可滚动）；

```
<div class="feed scroll">

    <div class="single scroll">
        <!-- single blog post content -->
    </div>

    <div class="single scroll">
        <!-- single blog post content -->
    </div>

    <div class="single scroll">
        <!-- single blog post content -->
    </div>

</div>

<a id="scroll-up" href="#">Scroll Up</a>
<a id="scroll-down" href="#">Scroll Down</a> 
```

所以基本上我需要能够单独滚动所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:59:51.717

如果您想要多个部分，则必须使用类而不是 id 来识别部分，然后您必须遍历 DOM 从链接到要滚动的内容才能找到正确的 div。此外，您必须为您正在滚动的每个元素单独存储“滚动”状态。

有很多东西要口头解释。这是一个示例，根据您引用的问题进行了修改：http: [//jsfiddle.net/Qp8bB/](http://jsfiddle.net/Qp8bB/)

笔记：

```
$(this).siblings(".content") 
```

这就是我们从链接元素导航到内容的方式

```
element.attr('data-scrolling', 'true'); 
```

这就是我们存储每个元素的滚动状态的方式（通过临时属性）

不是最干净的代码，但我希望它能够理解这一点。

# ios - 使用 iOS 混响效果

> ID：16045239
> 
> 赞同：2
> 
> 时间：2013-04-16T19:15:08.043
> 
> 标签：ios, core-audio, effects, audiounit

kAudioUnitSubType_Reverb2 效果在我的音频单元图中不起作用。当我从图中排除它的节点时，一切正常。我尝试在前一个节点和混响节点之间以及混响之后添加转换器。我确实将转换器节点输入的流格式设置为前一个节点输出的格式，并将转换器的输出设置为混响输入。初始化音频图时，我只是收到错误-10868。如何让它发挥作用？

这是我的图表：

```
AudioUnitGraph 0x186000:
  Member Nodes:
    node 1: 'aufc' 'conv' 'appl', instance 0x1b3a60 O  
    node 2: 'aufc' 'conv' 'appl', instance 0x1b3710 O  
    node 3: 'auou' 'rioc' 'appl', instance 0x1b3b80 O  
    node 4: 'aumx' 'mcmx' 'appl', instance 0x1b5220 O  
    node 5: 'aufx' 'rvb2' 'appl', instance 0x1b6790 O  
  Connections:
    node   4 bus   0 => node   1 bus   0  [ 2 ch,  44100 Hz, 'lpcm' (0x00000029) 32-bit little-endian float, deinterleaved]
    node   1 bus   0 => node   5 bus   0  [ 2 ch,  44100 Hz, 'lpcm' (0x00000029) 32-bit little-endian float, deinterleaved]
    node   5 bus   0 => node   2 bus   0  [ 2 ch,  44100 Hz, 'lpcm' (0x00000C2C) 8.24-bit little-endian signed integer, deinterleaved]
    node   2 bus   0 => node   3 bus   0  [ 2 ch,  44100 Hz, 'lpcm' (0x00000C2C) 8.24-bit little-endian signed integer, deinterleaved]
  Input Callbacks:
    {0x1b77d, 0x1b2d10} => node   4 bus   0  [2 ch, 44100 Hz]
    {0x1b77d, 0x1b2d10} => node   4 bus   1  [2 ch, 44100 Hz]
  CurrentState:
    mLastUpdateError=0, eventsToProcess=F, isRunning=F 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T22:07:01.393

我在 Varispeed 节点上遇到了类似的问题。我有几个变速节点连接到多混音器的几条总线。此多混音器节点已连接到 RemoteIO 节点。并且没有播放声音。但是后来我在 multimixer 和 remoteIO 之间添加了转换器节点（AUConverter）并设置了流格式属性：

```
result = AudioUnitSetProperty (convertUnit, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Output, 0, &stereoStreamFormat, sizeof (stereoStreamFormat)); 
```

stereoStreamFormat - 这种格式在我的应用程序中用于所有多混音器总线。

所以我相信问题出在这种格式：

```
node   2 bus   0 => node   3 bus   0  [ 2 ch,  44100 Hz, 'lpcm' (0x00000C2C) 8.24-bit little-endian signed integer, deinterleaved] 
```

如果您添加转换器节点并将其设置为立体声格式，您应该会看到：

```
node   2 bus   0 => node   3 bus   0  [ 2 ch,  44100 Hz, 'lpcm' (0x00000029) 32-bit little-endian float, deinterleaved] 
```

# javascript - 表单上的多个功能提交jQuery

> ID：16045240
> 
> 赞同：2
> 
> 时间：2013-04-16T19:15:07.917
> 
> 标签：javascript, jquery, analytics

我必须在表单提交上调用两个函数，但我想确保第二个函数仅在第一个函数执行后才执行。我无法控制第一个功能，所以我根本无法编辑它。

```
function a(et){
   //function a script
}

 function b(evt){

 //function b script
}

from function b is there a way that i can check if function a was completed or executed fully. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:37:17.483

如果您根本*无法访问，`a`那么*您将无法在这里做您想做的事情。没办法：JS在调用函数时创建一个调用对象，并在调用完成时自动GC。可悲的是，实际的内存管理是不受限制的，所以你无法检查。其他诡计涉及您对功能代码的干预`a`，您说您无法获得...所以不，您不能这样做。

对此很抱歉，但正如常见问题解答所说：您可能并不总是得到您希望的答案，但这并不意味着您不喜欢的答案不是真的...... :-P

* * *

但是，您有一点希望：如果函数`a`和`b`都是提交事件的回调或处理程序，您*可以*研究对这些调用进行排队的方法。鉴于 jQuery 标签[`.queue()`本身](http://api.jquery.com/queue/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:13:10.940

Yes, you can, there is a lot of ways to do that, but here is a simple way to make it.
You can use persistent object [localStorage](https://hacks.mozilla.org/2009/06/localstorage/).
You can use session object [sessionStorage](https://code.google.com/p/sessionstorage/).

```
function a(evt){
   // Asynchronous function
   // ... your code here
   // before finish function create the persistent object
   localStorage.setItem('myObject', 'done');
   return;
}

function b(evt){
   // Checks if a() function was completed
   var _done = localStorage.getItem('myObject');
   if(_done && _done == 'done') {
     // your code here: the a() function was completed
     localStorage.removeItem('myObject');
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T19:20:36.607

根据[Eli Gray](https://stackoverflow.com/users/78436/eli-grey)的说法，您可以像这样进行测试：

```
function foo() {
  foo.complete = false;
  // your code here
  foo.complete = true;
}
foo.complete = false;

if (foo.complete) { // foo execution complete
  // your code here
} 
```

# c# - Process.Start 问题启动我的游戏

> ID：16045245
> 
> 赞同：0
> 
> 时间：2013-04-16T19:15:39.643
> 
> 标签：c#, .net, process.start

目前我正在尝试为我的游戏编写一个启动器。我的问题是，如果你以这种方式启动我的游戏：

```
System.Diagnostics.Process.Start(@"F:\Freak Mind Games\Projects 2013\JustShoot\game.bat"); 
```

我收到未处理的异常或找不到错误。

但如果我这样做：

```
System.Diagnostics.Process.Start(@"game.bat"); 
```

有用。问题出在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:25:58.343

我假设批处理文件与您的程序启动器位于同一目录中。自动确定其位置：

```
string executableDir = Path.GetDirectoryName(Application.ExecutablePath);
Process.Start(Path.Combine(executableDir, "game.bat")); 
```

在哪里

*   `Application.ExecutablePath`是您的可执行文件的路径，即 `F:\Freak Mind Games\Projects 2013\JustShoot\justshoot.exe`.

*   `Path.GetDirectoryName(...)`获取它的目录部分，即 `F:\Freak Mind Games\Projects 2013\JustShoot`.

*   `Path.Combine(executableDir, "game.bat")`将目录与`game.bat`, 即`F:\Freak Mind Games\Projects 2013\JustShoot\game.bat`

* * *

还要记住，从 Visual Studio 启动时，可执行路径是`"...\bin\Debug"`或`"...\bin\Release"`. 因此，如果您的批处理文件位于项目目录中，您可能希望从路径中删除这些部分。

```
const string DebugDir = @"\bin\Debug";
const string ReleaseDir = @"\bin\Release";

string executableDir = Path.GetDirectoryName(Application.ExecutablePath);
if (executableDir.EndsWith(DebugDir)) {
    executableDir =
        executableDir.Substring(0, executableDir.Length - DebugDir.Length);
} else if (executableDir.EndsWith(ReleaseDir)) {
    executableDir =
        executableDir.Substring(0, executableDir.Length - ReleaseDir.Length);
}
Process.Start(Path.Combine(executableDir, "game.bat")); 
```

* * *

**更新**

对目录进行硬编码不是一个好主意。将要启动的游戏的路径放在与游戏启动器相同的目录中的文本文件中（例如“launch.txt”）。每行将包含一个可以使用游戏名称及其路径启动的游戏。像这样：

```
Freak Mind Games = F:\Freak Mind Games\Projects 2013\JustShoot\game.bat
我的世界 = C:\Programs\Minecraft\minecraft.exe

```

在表单中将目录定义为变量：

```
private Dictionary<string,string> _games; 
```

现在获取这些游戏的列表，如下所示：

```
string executableDir = Path.GetDirectoryName(Application.ExecutablePath);
string launchFile = Path.Combine(executableDir, "launch.txt"));

string[] lines = File.ReadAllLines(launchFile);

// Fill the dictionary with the game name as key and the path as value.
_games = lines
    .Where(l => l.Contains("="))
    .Select(l => l.Split('='))
    .ToDictionary(s => s[0].Trim(), s => s[1].Trim()); 
```

然后在 a 中显示游戏名称`ListBox`：

```
listBox1.AddRange(
     _games.Keys
        .OrderBy(k => k)
        .ToArray()
); 
```

最后启动选定的游戏

```
string gamePath = _games[listBox1.SelectedItem];
var processStartInfo = new ProcessStartInfo(gamePath);
processStartInfo.WorkingDirectory = Path.GetDirectoryName(gamePath);
Process.Start(processStartInfo); 
```

# java - Java URI 不对路径中的分号进行编码。这里的最佳实践？

> ID：16045246
> 
> 赞同：2
> 
> 时间：2013-04-16T19:15:42.810
> 
> 标签：java, encoding, uri

我正在开发一个通过 HTTP 导出本地文件的项目。这涉及获取文件 URI，使用导出的路径对其进行相对化，将其附加到导出 URI，然后在接收端将其作为 URL 处理。

通常这可以正常工作，但是当文件名包含分号时我会遇到麻烦。我把它缩小到这里：

```
new File(path).toURI() 
```

上述方法正确编码了空格等，但不编码分号（应编码为 %3B）。

最终，上述方法返回 URI 构造函数（协议、主机、路径、片段）的结果，该结果返回错误的 URI。

我可以用 %3B 手动替换所有分号，但这并不是最好的解决方案。真的没有内置 API 可以正确编码路径吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:20:40.480

分号是 URI 中完全有效的字符。当然如果接收端使用分号作为特殊的分隔符，发送端需要对其进行转义。但这超出了标准做法，所以你必须自己逃避它。

但是在 java 世界中，servlet 是标准，它使用分号作为特殊的分隔符。我不知道有任何实用程序可以帮助您，因此您仍然需要手动转义分号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-21T11:53:23.110

分号没有自动转义的原因是因为它在 URI 规范中具有含义——它界定了“路径参数”。以下 URI 有效： `/some;a=b/path`

并用value`/some/path`的路径参数表示路径。`a``b`

所以在这种情况下，转义必须是手动的，因为 URI 无法确定分号是分隔参数还是路径的一部分。

# c# - WPF UI 未更新

> ID：16045247
> 
> 赞同：2
> 
> 时间：2013-04-16T19:15:44.107
> 
> 标签：c#, wpf, mvvm

我使用 MVVM 模型和代码开发了一个简单的 wpf 应用程序，如下所示。我调试代码并发现集合正在更新，但 UI 没有更新，即使我在列表框中没有看到任何记录。

**编辑**

![在此处输入图像描述](https://i.stack.imgur.com/xQUcw.jpg)

```
<Window x:Class="Model.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="WPF Dispatcher Demo" Height="350" Width="525">

    <DockPanel>
        <Grid DockPanel.Dock="Bottom">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*" Name="col0" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <TextBox Name="textBlock1" Text="{Binding ShowPath}" 
                 VerticalAlignment="Center" HorizontalAlignment="Left" 
                  Margin="30" Grid.Column="0" />
            <Button Name="FindButton" Content="Select Path" 
              Width="100" Margin="20" Click="FindButton_Click" Grid.Column="1" />
        </Grid>
        <ListBox Name="listBox1"  ItemsSource="{Binding Path=Files}"/>

    </DockPanel>
</Window> 
```

**模型**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Windows.Threading;
using System.ComponentModel;
using System.Collections.ObjectModel;

namespace Model
{
    public class DirectorySearchModel : INotifyPropertyChanged
    {
        private ObservableCollection<string> _files = new ObservableCollection<string>();
        private string _showPath;
        public DirectorySearchModel() { }
        void ShowCurrentPath(string path)
        {
            ShowPath = path;
        }

        void AddFileToCollection(string file)
        {
            _files.Add(file);
        }
        public void Search(string path, string pattern)
        {

            if (System.Windows.Application.Current.Dispatcher.CheckAccess())
                ShowPath = path;
            else
                System.Windows.Application.Current.Dispatcher.Invoke(
                  new Action<string>(ShowCurrentPath), DispatcherPriority.Background, new string[] { path }
                );
            string[] files = Directory.GetFiles(path, pattern);
            foreach (string file in files)
            {
                if (System.Windows.Application.Current.Dispatcher.CheckAccess())
                    Files.Add(file);
                else
                    System.Windows.Application.Current.Dispatcher.Invoke(new Action<string>(AddFileToCollection), DispatcherPriority.Background,
                      new string[] { file }
                    );
            }
            string[] dirs = System.IO.Directory.GetDirectories(path);
            foreach (string dir in dirs)
                Search(dir, pattern);
        }

        public string ShowPath
        {
            get
            {
                return _showPath;
            }
            set
            {
                _showPath = value;
                OnPropertyChanged("ShowPath");
            }
        }
        public ObservableCollection<string> Files
        {
            get
            {
                return _files;
            }
            set
            {
                _files = value;
                OnPropertyChanged("Files");
            }
        }
        public void OnPropertyChanged(string name)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(name));

            }
        }
        public event PropertyChangedEventHandler PropertyChanged;
    }
} 
```

主窗口.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Windows.Forms;
using System.IO;

namespace Model
{
    public partial class MainWindow : Window
    {
        IAsyncResult cbResult;
        public MainWindow()
        {
            InitializeComponent();
            this.Loaded += new RoutedEventHandler(MainWindow_Loaded);

        }
        void MainWindow_Loaded(object sender, RoutedEventArgs e)
        {
            this.DataContext = new DirectorySearchModel().Files;
        }

        private void FindButton_Click(object sender, RoutedEventArgs e)
        {

            FolderBrowserDialog dlg = new FolderBrowserDialog();
            string path = AppDomain.CurrentDomain.BaseDirectory;
            dlg.SelectedPath = path;
            DialogResult result = dlg.ShowDialog();
            if (result == System.Windows.Forms.DialogResult.OK)
            {
                path = dlg.SelectedPath;
                string pattern = "*.*";
                new Model.DirectorySearchModel().Search(path, pattern);
                Action<string, string> proc = new Model.DirectorySearchModel().Search;
                cbResult = proc.BeginInvoke(path, pattern, null, null);

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T19:55:06.160

在 WPF 中，有两层：UI 层和数据层

数据层是你的`DataContext`，当你写一个普通的绑定时，你是绑定到`DataContext`.

当你写

```
void MainWindow_Loaded(object sender, RoutedEventArgs e)
{
    this.DataContext = new DirectorySearchModel().Files;
} 
```

您告诉 WPF 表单的数据层将是字符串的 ObservableCollection，但是`ObservableCollection<string>`没有名为 的属性`Files`，因此您的 ListBox 绑定失败。

```
<!-- Trying to bind to DirectorySearchModel.Files.Files -->
<ListBox ItemsSource="{Binding Path=Files}"/> 
```

您需要将数据层更改为您的`DirectorySearchModel`，以便绑定正确评估为`DirectorySearchModel.Files`

```
void MainWindow_Loaded(object sender, RoutedEventArgs e)
{
    this.DataContext = new DirectorySearchModel();
} 
```

但这不是你唯一的问题。您的 Button 的 Click 事件在一个*新*实例`DirectorySearchModel`而不是现有实例上运行。

您可以简单地使用`(DirectorySearchModel)MainWindow.DataContext`，但这并不理想，因为它将您的 UI 和您的数据层紧密结合在一起，并且它假设`DataContext`将始终是 type `DirectorySearchModel`。

您可以将`DirectorySearchModel`用于[moncadad 建议](https://stackoverflow.com/a/16045387/302677)`DataContext`的某处存储，以便您可以从代码中的其他位置访问它：

```
DirectorySearchModel _model = new DirectorySearchModel();
void MainWindow_Loaded(object sender, RoutedEventArgs e)
{
    _model = new DirectorySearchModel();
    this.DataContext = _model ;
}

private void FindButton_Click(object sender, RoutedEventArgs e)
{
    // use _model instead of "new DirectorySearchModel()" here
} 
```

但老实说，这仍然不理想，因为您的视图和数据层仍然紧密耦合在一起，并且这不符合 MVVM 设计模式（您已经用它标记了您的问题，所以我假设您是使用）。

最好的解决方案是用`ICommand`on实际替换按钮的 Click 事件，`DirectorySearchModel`这样您就不必担心从 UI 层存储和访问数据层的副本。这还具有将应用程序逻辑保留在应用程序层内的额外好处，而不是将其与 UI 层混合：

```
void MainWindow_Loaded(object sender, RoutedEventArgs e)
{
    this.DataContext = new DirectorySearchModel();
}

<DockPanel>
    <Grid DockPanel.Dock="Bottom">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*" Name="col0" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <TextBox Text="{Binding ShowPath}" ... />

        <Button Content="Select Path" Command="FindButtonCommand" ... />
    </Grid>
    <ListBox ItemsSource="{Binding Path=Files}"/>
</DockPanel> 
```

这将您的 UI 与数据层正确分离，这是 MVVM 设计模式的主要目标。

这样，您的应用程序逻辑都保留在您的应用程序对象中，而您的 UI 只是一个非常用户友好的界面，用于与您的应用程序对象进行交互。

我喜欢写初学者的 WPF 文章，我建议阅读我的帖子[你所说的这个“DataContext”是什么？](http://rachel53461.wordpress.com/2012/07/14/what-is-this-datacontext-you-speak-of/)了解它是什么`DataContext`以及它是如何工作的更好:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T19:19:35.383

你有： `this.DataContext = new DirectorySearchModel().Files;`

和这个： `<ListBox Name="listBox1" ItemsSource="{Binding Path=Files}"/>`

这意味着它将尝试绑定到 DirectorySearchModel().Files.Files。您可能想要更改为：`this.DataContext = new DirectorySearchModel();`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T19:35:12.953

** 编辑 **

我盯着瞎了:)

你没有重用你的模型：这行得通，我只是测试了它

```
 private DirectorySearchModel model = new DirectorySearchModel();

    public MainWindow()
    {
        InitializeComponent();
        this.Loaded += new RoutedEventHandler(MainWindow_Loaded);

    }
    void MainWindow_Loaded(object sender, RoutedEventArgs e)
    {
        this.DataContext = model; //The model is already available as private member
    }

    private void FindButton_Click(object sender, RoutedEventArgs e)
    {

        FolderBrowserDialog dlg = new FolderBrowserDialog();
        string path = AppDomain.CurrentDomain.BaseDirectory;
        dlg.SelectedPath = path;
        DialogResult result = dlg.ShowDialog();
        if (result == System.Windows.Forms.DialogResult.OK)
        {
            path = dlg.SelectedPath;
            string pattern = "*.*";
            Action<string, string> proc = model.Search; // use existing model (the private member).
            cbResult = proc.BeginInvoke(path, pattern, null, null);

        }
    } 
```

在 Xaml 中输入：

```
<ListBox ItemsSource="{Binding Path=Files}"/> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T19:23:11.680

在您的 MainWindow.cs 中，更改为：

```
public partial class MainWindow : Window
{
    IAsyncResult cbResult;
    DirectorySearchModel _model = new DirectorySearchModel();
    public MainWindow()
    {
        InitializeComponent();
        this.DataContext = _model;
    }
... 
```

在您的 Xaml 中，将您的绑定更新为：

```
<ListBox Name="listBox1"  ItemsSource="{Binding Files, UpdateSourceTrigger="PropertyChanged"}"/> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T19:26:53.163

您必须将窗口的 DataContext 设置为 DirectorySearchModel 的新实例。它没有更新，因为您的 ListBox 继承了设置为 Files 属性的窗口的 DataContext。您的列表框正在寻找不存在的文件集合的文件属性。

您可以使用此代码

```
public MainWindow()
{
   this.DataContext = new DirectorySearchModel();
} 
```

这样，您的列表框将具有新目录搜索模型的数据上下文，并将查找您在 ItemSource 绑定的**Path属性上指定的 Files 属性。**

更新：

```
 private void FindButton_Click(object sender, RoutedEventArgs e)
    {

        FolderBrowserDialog dlg = new FolderBrowserDialog();
        string path = AppDomain.CurrentDomain.BaseDirectory;
        dlg.SelectedPath = path;
        DialogResult result = dlg.ShowDialog();
        if (result == System.Windows.Forms.DialogResult.OK)
        {
            path = dlg.SelectedPath;
            string pattern = "*.*";
            //OLD CODE                
            //new Model.DirectorySearchModel().Search(path, pattern);
            //SUGGESTION
            (this.DataContext AS DirectorySearchModel).Search(path, pattern);
            Action<string, string> proc = (this.DataContext AS DirectorySearchModel).Search;
            cbResult = proc.BeginInvoke(path, pattern, null, null);

        }
    } 
```

# android - 使用 Phonegap 检查 webview 中的 html5 组件可见性

> ID：16045248
> 
> 赞同：0
> 
> 时间：2013-04-16T19:15:45.717
> 
> 标签：android, cordova

我正在使用 phonegap 在我的应用程序中开发我的 android 应用程序，其中有一个 html5 页面，其中包含一些输入文本字段和一个提交按钮。

当用户在文本字段中输入值并单击提交时，它将调用一个 ajax，为了获得良好的用户体验，我通过在单击提交按钮后使 div 可见来显示来自 java 脚本的进度微调器。

在我的 MainActivity java 类中，我重写了 onBackPressed 方法，该方法将在退出应用程序之前显示确认对话框。现在我想要的是当 html5 页面中有进展时意味着进度图像的 div 可见我想阻止按下后退键但我的问题是如何识别该 div 在 java 类中的可见性当 div 可见时，我们可以在 java 活动中阻止它，否则我们允许用户通过显示确认对话框退出。

电话间隙中是否有任何内置功能可以使用，或者我们需要自己做一些事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:30:59.320

好吧，根据这个[Link](http://docs.phonegap.com/en/2.6.0/cordova_events_events.md.html#backbutton) PhoneGap 有一个 API 来处理后键事件。所以你可以在你的java脚本代码中使用一个私有字段，它将一个标志设置为可见或不可见（布尔值）并相应地处理回键事件。

伪代码看起来像这样：

```
 <script type="text/javascript" charset="utf-8">
  var visible = false;
// Call onDeviceReady when Cordova is loaded.
//
// At this point, the document has loaded but cordova-2.6.0.js has not.
// When Cordova is loaded and talking with the native device,
// it will call the event `deviceready`.
//
function onLoad() {
    document.addEventListener("deviceready", onDeviceReady, false);
}
function onBackKeyDown() {
    if(visible) {
     //wait
    } else {
      //finish
    }
}
function showDialog(){
     visible = true;
// your code
}
// Cordova is loaded and it is now safe to make calls Cordova methods
//
function onDeviceReady() {
    document.addEventListener("offline", onOffline, false);
    document.addEventListener("backbutton", onBackKeyDown, false);
}

// Handle the offline event
//
function onOffline() {
}

</script> 
```

# python - Python：单元测试中的assertRaises错误...未捕获异常

> ID：16045249
> 
> 赞同：4
> 
> 时间：2013-04-16T19:15:53.590
> 
> 标签：python, unit-testing

我编写了一个单元测试来强制抛出异常。抛出异常，但我的单元测试语句由于某种原因没有捕获它，并且意外失败。

这是单元测试：

```
def test900_001_ShouldRaiseExceptionDuplicateID(self):
    hist = projecthistory.ProjectHistory()
    myProject = project.Project(id = 42, locR = 10, locP = 15, locA = 30, eP = 200, eA= 210)
    hist.addProject(myProject)
    myProject2 = project.Project(id = 42, locR = 15, locP = 25, locA = 40, eP = 300, eA = 410)
    self.assertRaises(ValueError, projecthistory.ProjectHistory, hist.addProject(myProject2)) 
```

这是与此相关的代码：

```
def addProject(self, proj):

    duplicate = False
    checkId = proj.getId()

    #check to see if that id is already in the container if so, raise ValueError
    #append project to container
    for project in self.theContainer:
        if (project.getId() == checkId):
            duplicate = True
            break
    if(duplicate == False):
        self.theContainer.append(proj)
    else:
        raise ValueError("ProjectHistory.addProject: Duplicate ID found. Project not added to repository.")

    return len(self.theContainer) 
```

基本上，项目被添加到名为 theContainer 的列表中。但是，如果两个 ID 相同，则不会添加副本。通过在要添加的单元测试中强制添加两个具有相同 ID 的项目，会引发异常。

这是我得到的回溯：

```
Traceback (most recent call last):

  File "C:\Users\blah\workspace\blahID\CA06\test\projecthistoryTest.py", line 46, in test900_001_ShouldRaiseExceptionDuplicateID
    self.assertRaises(ValueError, projecthistory.ProjectHistory, hist.addProject(myProject2))

  File "C:\Users\blah\workspace\blahID\CA06\prod\projecthistory.py", line 38, in addProject
    raise ValueError("ProjectHistory.addProject: Duplicate ID found. Project not added to repository.")
ValueError: ProjectHistory.addProject: Duplicate ID found. Project not added to repository. 
```

问题可能出在 assertRaises 中的第三个参数上吗？(hist.addProject(myProject2))

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T19:23:30.493

您的怀疑是正确的，问题在于调用 `hist.addProject()`.

你写了：

```
self.assertRaises(ValueError, projecthistory.ProjectHistory,
    hist.addProject(myProject2)) 
```

有一个`ValueError`凸起。但它在

```
hist.addProject(myProject2) 
```

回溯告诉你。所以`assertRaises`实际上从来没有被调用过，因为异常在被调用之前就被引发了。

考虑它的方法是，`assertRaises`只有当它真正被调用时才能捕获异常。如果准备其参数的行为引发异常，则`assertRaises`甚至不会运行，因此无法捕获任何内容。

如果您希望调用中的异常`addProject()`只是更改您的断言：

```
self.assertRaises(ValueError, hist.addProject, myProject2) 
```

或者您可以`hist.addProject()`使用 lambda 推迟调用：

```
self.assertRaises(ValueError, 
    lambda: projecthistory.ProjectHistory(hist.addProject(myProject2))) 
```

# php - 单独的词，如标签 php

> ID：16045252
> 
> 赞同：0
> 
> 时间：2013-04-16T19:15:58.547
> 
> 标签：php, arrays, loops, tags

我想将单词与 1 行分开。

我用我的以下代码尝试了这个：

```
$tags = 'why,what,or,too,';
preg_match_all ("/,(.*),/U", $tags, $pat_array);
print $pat_array[0][0]." <br> ".$pat_array[0][1]."\n"; 
```

我希望结果类似于：

```
<img src="why.jpg"></br>
<img src="what.jpg"</br>
<img src="or.jpg"</br>
<img src="too.jpg" 
```

当你写一个你必须写“标签”的问题时，我想做这个网站。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:20:07.577

```
 <?
    $tags = 'why,what,or,too,'; 
    $words = explode(',', $tags);
    ?>

    <?php foreach($words as $word) { 
    if(!empty($word))?>
    <img src="<?php echo $word;?>.jpg"></br>
    <?php } ?> 
```

爆炸后你会有一个数组

```
$words[0] = 'why';
$words[1] = 'what';
$words[2] = 'or';
$words[3] = 'too';
$words[4] = ''; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T19:18:27.207

使用该`[explode](http://php.net/manual/en/function.explode.php)`函数按给定的分隔符分割输入字符串：

```
$tags = 'why,what,or,too,';
$array = explode(",", $tags); 
```

然后迭代数组以显示每个标签：

```
foreach($array as $tag) {
    if(!empty($tag)) {
        echo "<img src=\"$tag.jpg\"></br>";
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T19:21:00.780

```
$tags = 'why,what,or,too,';  
$temp = explode(",", $tags); // will return you array 

foreach($temp as $tag) {
  if(!empty($tag)
   echo "<img src=\"$tag.jpg\"></br>";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T19:19:23.947

容易爆炸

```
$tags = 'why,what,or,too,';
$array = explode(',',$tags );
echo '<pre>';
print_R($array);

<img src="<?php echo $array[0]?>"></br>
<img src="<?php echo $array[1]?>"></br>
<img src="<?php echo $array[2]?>"></br>
<img src="<?php echo $array[3]?>"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T19:18:39.533

使用`explode`它，就像它没有打印空标签一样

```
 $tags = 'why,what,or,too,';
 $array=explode(",",$tags);
 $buf=array();
 foreach($array as $tag) {
    if(empty($tag))continue;
    $buf[]="<img src=\"$tag.jpg\">";
 }
 echo implode('</br>',$buf); 
```

输出

```
<img src="why.jpg"></br>
<img src="what.jpg"></br>
<img src="or.jpg"></br>
<img src="too.jpg"> 
```

# python - 分配链的 Python 实现问题

> ID：16045254
> 
> 赞同：3
> 
> 时间：2013-04-16T19:16:09.007
> 
> 标签：python, python-2.7

我正在为一个教育 Python 库编写一个链表。以下是重要的代码片段：

```
class Element(object):
  def __init__(self, value, next):
    self.value = value
    self.next = next

class LinkedList(object):
  def __init__(self):
    self.head = None
    self.tail = None

  def insert_back(self, element):
    if self.empty():
      self.insert_front(element)
    else:
      self.tail.next = Element(element, None)
      self.tail = self.tail.next
      # I'd like to replace the above two lines with this
      # self.tail = self.tail.next = Element(element, None) 
```

我的问题来自最后一行。根据[这个问题的最高答案](https://stackoverflow.com/questions/11498441/what-is-this-kind-of-assignment-in-python-called-a-b-true)，Python独特的链式赋值实现是罪魁祸首。

在其他语言中，最后一行与它上面的两行具有相同的效果，但 Python`Element(element, None)`先计算表达式，然后从左到右分配结果，因此`self.tail`在之前赋值`self.tail.next`。这导致前一个尾元素不引用新的尾元素，而新的尾元素引用自身。

我的问题是：有没有办法用一条语句来执行这两个任务？

我完全满足于使用更明确的两行赋值；这只是出于好奇。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T19:24:05.397

分配*永远不会*被链接。

赋值首先计算右侧表达式，*然后*将结果从左到右一个接一个地分配给左侧目标。

请参阅[分配声明文档](http://docs.python.org/2/reference/simple_stmts.html#assignment-statements)：

> 赋值语句计算表达式列表（请记住，这可以是单个表达式或逗号分隔的列表，后者产生一个元组）并将单个结果对象从左到右分配给每个目标列表。

所以你的代码：

```
self.tail = self.tail.next = Element(element, None) 
```

有效地意味着：

```
result = Element(element, None)
self.tail = result
self.tail.next = result 
```

您可以改用它，只需颠倒分配顺序：

```
self.tail.next = self.tail = Element(element, None) 
```

以正确的顺序分配：

```
result = Element(element, None)
self.tail.next = result
self.tail = result 
```

这会导致链表的正确行为：

```
>>> head = tail = Element(0, None)
>>> tail.next = tail = Element(1, None)
>>> head.value
0
>>> head.next
<__main__.Element object at 0x10262e510>
>>> head.next.value
1
>>> tail is head.next
True
>>> tail.next = tail = Element(2, None)
>>> tail is head.next.next
True 
```

# fonts - 从代码中安装字体

> ID：16045255
> 
> 赞同：0
> 
> 时间：2013-04-16T19:16:10.843
> 
> 标签：fonts, xna

我目前在我的 XNA 游戏中使用自定义字体。正如您可能想象的那样，如果 PC 上未安装字体，则游戏将无法启动。我打算使用 try/catch 来了解字体是否已安装。

现在，有没有办法从代码中安装字体？您可以记住字体文件位于 Content 文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:11:35.597

您可以做的是将您的字体转换为 BMP spritefont，导入 BMP 图像并在属性中的 Content Processor 中从“Texture”更改为“Sprite Font Texture”。您可以[在此处](http://dudesknight.wordpress.com/2011/03/25/xna-custom-sprite-fonts/)查看如何执行此操作。

# ios - iOS：播放 FLV 流

> ID：16045259
> 
> 赞同：0
> 
> 时间：2013-04-16T19:16:21.563
> 
> 标签：ios, streaming

我有 FLV 流媒体 URL，我需要在 iOS 中播放。我可能需要使用 ffmpeg 将其转换为 mp4 流，我将如何为流执行此操作？来自 ffmpeg 网站等的任何示例网址？

谢谢阿亚兹阿拉维

# c++ - opengl - 如何在 3d 不规则物体上放置纹理

> ID：16045263
> 
> 赞同：2
> 
> 时间：2013-04-16T19:16:38.277
> 
> 标签：c++, opengl, 3d, glut

我必须创建将射击加特林枪的动画（它不必很复杂，因为它只是一种练习）。我画了我的枪的基本版本，如下所示：

![加特林机枪](https://i.stack.imgur.com/pY8Fc.jpg)

Don't bother colors - i made them like that to be able to see where are egdes of particular parts of gun. Now i would like to make it look better by using some texture - moro or something like metalic color - [example 1](http://www.dillonaero.com/content/p/9/catid/1/pid/35/?viewImg=1&pimg=new_pics/minigun_on_black.jpg) or [example2](http://d2d04grx5ahzvh.cloudfront.net/147_Basix_ModoGatling/GattlingGun2.jpg). I know how to load texture and how to use it for 2d objects, but i have no idea if there is a possiblity to use this texture for my whole drawing or do i have to use texture for every part separately? This is my code which corresponds to load texture from bmp file and make it able to use:

```
void initTexture(string fileName)
{
    loadBmp(fileName.c_str());
    textureId = 13;
    glBindTexture(GL_TEXTURE_2D, textureId); //Tell OpenGL which texture to edit
    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
    //Map the image to the texture
    glTexImage2D(GL_TEXTURE_2D,                //Always GL_TEXTURE_2D
                 0,                            //0 for now
                 GL_RGB,                       //Format OpenGL uses for image
                 tex.info.biWidth, tex.info.biHeight,  //Width and height
                 0,                            //The border of the image
                 GL_RGB, //GL_RGB, because pixels are stored in RGB format
                 GL_UNSIGNED_BYTE, //GL_UNSIGNED_BYTE, because pixels are stored
                                   //as unsigned numbers
                 tex.px);               //The actual pixel data

} 
```

loadBmp() is function to load bitmap file. I tried to search something in the Internet and stackoverflow, but all exmaples where about cubes or spheres, which doesn't help me. How can i put texture on this drawing?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T22:55:58.407

纹理映射需要（手动）为每个顶点分配纹理坐标。有一些方法可以自动生成纹理坐标，或者在没有纹理坐标的情况下逃脱，方法是给每个面一个单独的像素（迪士尼动画公司在他们的计算机动画电影中率先采用了后一种方法）。

由于您没有指定用于建模的程序，我将向您推荐一些有关 Blender 纹理 UV 映射的教程

[http://wiki.blender.org/index.php/Doc:2.6/Manual/Textures/Mapping/UV/Unwrapping](http://wiki.blender.org/index.php/Doc:2.6/Manual/Textures/Mapping/UV/Unwrapping)

请不要告诉我你确实“编码”了你的枪，因为这是错误的，错误的，错误的！

一旦获得纹理坐标，您就可以将它们作为另一个顶点属性传递给 OpenGL。

# html - Chrome SVG webfonts weird characters in select input

> ID：16045267
> 
> 赞同：8
> 
> 时间：2013-04-16T19:16:51.917
> 
> 标签：html, css, google-chrome, rendering, webfonts

Windows 8 上的 Chrome 26.0.1410.64m 在呈现 WebFonts 时出现问题。这是一个已知问题，解决方案是首先提供字体的 svg 版本而不是 woff 版本。它修复了抗锯齿并使字体看起来再次漂亮。

这种方法的缺点是在选择输入内的元素内部呈现出奇怪的效果。

我添加了一个 jsfiddle 来查看它的实际效果：http: [//jsfiddle.net/4mSpv/6/](http://jsfiddle.net/4mSpv/6/)。

CSS 尽可能简单。

```
@font-face {
    font-family: 'Montserrat';
    src: url('https://raw.github.com/louh/website/master/fonts/montserrat-regular-webfont.svg#montserratregular') format('svg');
    font-weight: 400;
    font-style: normal;
}
select {
    font-family: 'Montserrat', sans-serif;
} 
```

我删除了本地安装的字体，并注意到另一台 Windows 7 计算机也在这样做。有谁知道chrome是怎么回事？（IE、Firefox、Safari 都可以正常渲染）

![选择输入渲染字体chrome](https://i.stack.imgur.com/yrd54.jpg)

PS：JSFiddle中未包含其他浏览器字体以过滤问题，每个浏览器都有自己的怪癖（不允许字体大小等），但可以很好地呈现文本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-28T13:19:29.617

没有办法解决这个问题。

> 这不是回归问题，存在于 M24 中。

我提交了一个错误报告，它[在选项菜单中出现了奇怪的字符渲染](https://code.google.com/p/chromium/issues/detail?id=232099&thanks=232099&ts=1366149037)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-12T00:45:34.390

正如 automaticoo 所说，这是 Chrome 的一个已知问题。但是，您可以使用本文所选答案中提到的技术解决此问题：[Google Webfonts Render Choppy in Chrome on Windows](https://stackoverflow.com/questions/10953037/google-webfonts-render-choppy-in-chrome-on-windows)。

```
@media screen and (-webkit-min-device-pixel-ratio:0) {
  select {
    font-family: Arial; /* standard font */
  }
} 
```

这样一来，您就可以为仍然有效的浏览器使用您想要的任何字体，并将其替换为适用于 Chrome 的通用 HTML 字体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-01T05:49:22.973

所以，我实际上是在寻找这个问题的答案，我偶然发现了这个问题。我注意到这个错误今天仍然存在（我刚遇到它，真是一个愉快的会议......）。现在我只找到了 1 个解决方案，即将 svg 字体放在 @font-face 声明的最后（这也意味着包括所有其他格式）。唯一的问题是，当您尝试修复字体渲染（以使其一切顺利）时，您实际上会将 svg 放在首位。这里有一些例子来证明它

1：SVG字体最后，没有清晰的字体，选项显示正确

```
@font-face {
font-family: 'OpenSansLight';
src: url('../font/OpenSans-Light-webfont.eot');
src: url('../font/OpenSans-Light-webfont.eot?#iefix') format('embedded-opentype'),
     url('../font/OpenSans-Light-webfont.woff') format('woff'),
     url('../font/OpenSans-Light-webfont.ttf') format('truetype'),
     url('../font/OpenSans-Light-webfont.svg#open_sanslight') format('svg');
font-weight: normal;
font-style: normal; } 
```

![示例 1](https://i.stack.imgur.com/6jVM4.jpg)

如您所见，选择框中的选项显示得很好，但字体确实不是那么糟糕，只需查看“注册”（与我的第二个示例相比，您可能会更好地注意到这一点）

2：SVG字体最后，字体清晰，选择中的愚蠢选项

```
@font-face {
font-family: 'OpenSansLight';
src: url('../font/OpenSans-Light-webfont.eot');
src: url('../font/OpenSans-Light-webfont.eot?#iefix') format('embedded-opentype'),
     url('../font/OpenSans-Light-webfont.svg#open_sanslight') format('svg'),
     url('../font/OpenSans-Light-webfont.woff') format('woff'),
     url('../font/OpenSans-Light-webfont.ttf') format('truetype');
font-weight: normal;
font-style: normal; } 
```

![示例 2](https://i.stack.imgur.com/aI0Ov.jpg)

现在您会看到字体更加清晰，但选择非常愚蠢。

我建议为选择添加另一个带有 svg 的字体。这将使您的字体在整个网站上保持清晰，但可以很好地显示选项。

# c# - 我应该如何处理源代码管理项目中的秘密值？

> ID：16045273
> 
> 赞同：6
> 
> 时间：2013-04-16T19:17:04.870
> 
> 标签：c#, .net, visual-studio, version-control

[我的问题与这个](https://stackoverflow.com/questions/8686394/how-to-keep-the-app-secret-a-secret)问题基本相同，但针对的是 Windows Store App、c# 和 Visual Studio。我想有一种简单的方法将项目中的秘密值保存在一个可以在源代码控制中忽略（未签入）的文件中。我应该如何构建我的项目以以一种易于构建/源代码控制的方式存储应用程序机密？

我的第一个想法是将它存储在一个 XML 文件中（未签入），并在运行时加载它，但这使它对安装它的用户可用，因此应该在构建时完成。构建项目时，如何存储几个秘密值并让 Visual Studio 在我的代码中替换它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:44:40.550

在您的项目中创建一个新的类文件，其中包含所有秘密值的插槽，并为所有这些值保存虚拟/测试值。将其与项目的其余部分一起检查到源代码控制中，以便任何构建它而不访问机密的人都将获得某种测试版本。

然后，使用真正的秘密值创建该类文件的副本，并将其放在源代码控制之外的某个位置。在预构建事件中编写一个批处理脚本来查找此类文件，如果找到，则用它替换项目中包含的虚拟文件。

这样，您的项目仍然可以在源代码控制中，任何人都可以检查、构建并在测试模式下运行它。您的秘密文件/值仅存储在您的构建服务器上，因此只有当您构建项目时，它才会具有真正的值。

请记住在某处备份您的秘密文件。还要记住 .NET 代码可以很容易地反编译，因此您的秘密可能不像您希望的那样秘密 - 任何具有 .NET 反射器的用户都可以看到您的发布程序集中的所有代码，包括您的秘密类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:51:30.150

**更新**
如果您将秘密放在不受信任的区域（例如公共源代码控制），则它很容易受到攻击。即使它是加密的，只要有足够的努力，它也可以被检索到。

真正让它遥不可及的唯一方法是拥有一个与 3rd 方 API 交互的外部服务。这有其自身的权衡（例如，您在评论中提到的用户身份验证）。特别是如果您的开发人员在测试时需要使用 3rd 方 API，我认为没有其他替代方案可以限制秘密的曝光。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T19:38:16.507

一种选择是将机密存储在源代码管理中，但以加密形式存储它们。在您的开发或构建环境中，使用环境变量来存储密钥并即时解密。这样您就可以获得源代码控制的好处，同时保证您的信息安全。

即使您使用的是 app.config 或 web.config，也可以这样做，您只需要在启动时从代码中修改配置。

埃里克

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T19:25:38.373

在我公司，我们决定为您提供以下解决方案。在配置文件中，我们将部分与外部配置中的“秘密”值链接起来。外部配置在源代码控制上。首先不是，但是在我们的构建服务器丢失磁盘时出现问题后，我们决定将其存储在有备份的地方更安全。源代码管理中的文件夹（也可以在文件服务器上）实际上仅限于对需要此文件的人进行读写。构建过程结帐“项目”文件夹加上“配置”文件夹并进行构建。构建“配置”文件夹后删除。对构建服务器的访问也受到限制。

# android - 当我为 Android 构建 Corona sdk 应用程序时，为什么它是 300 MB？

> ID：16045282
> 
> 赞同：0
> 
> 时间：2013-04-16T19:17:39.813
> 
> 标签：android, coronasdk

该应用程序只有 1 张图片和一些代码行，但是当我为 android 构建它时，.apk 的大小超过 300 mb 知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T23:11:22.880

您的项目文件夹中有任何文件/文件夹吗？即使您不使用它们，Corona 也会包含所有文件。

# neo4j - 使用 Gremlin 在 Neo4j 中查找两个顶点之间的路径

> ID：16045284
> 
> 赞同：1
> 
> 时间：2013-04-16T19:17:46.990
> 
> 标签：neo4j, gremlin

我试图在 Neo4j 数据库中找到两个顶点之间的路径，假设我的代码看起来像这样

```
newschool = g.addVerttex();
newschool.Title = 'A nice school';

newuser = g.addVertex();
newuser.name = 'student';

g.addEdge(newuser, g.V.filter{it.Title == 'school'}.next(), 'goesto'); 
```

如果我知道两个顶点的 id，我可以取回我想要的边缘，但这当然不是动态的：

```
g.v(2).outE.inV.retain([g.v(1)]).back(2);
==> e[1][2-goesto->1] 
```

所以然后我尝试将其更改为对工作查询进行更动态的扩展：

```
g.V.filter{it.name == 'student'}.outE.inV.retain([g.V.filter{it.Title == 'A nice school'}]).back(2);

g.v(g.V.filter{it.name == 'student'}.id).outE.inV.retain([g.v(g.V.filter{it.Title == 'A nice school'}.id)]).back(2) 
```

当然，这些都不起作用……

为什么`g.V.filter{it.name =='student'}`和`g.v(2)`不同？为什么`g.V.filter{it.name == 'student'}.id`不一样`2`？

我错过了什么？我怎样才能让它工作？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T00:28:57.967

不要认为您在保留内迭代您的管道。请注意下面我使用玩具 TinkerGraph 的 Gremlin 会话：

```
gremlin> g = TinkerGraphFactory.createTinkerGraph()
==>tinkergraph[vertices:6 edges:6]                                     
gremlin> g.v(1).out.retain([g.v(4)])
==>v[4]
gremlin> g.v(1).out.retain([g.V.filter{it.name=='josh'}])
gremlin> g.v(1).out.retain([g.V.filter{it.name=='josh'}.next()])
==>v[4] 
```

确保你`next()`在里面保留：

```
g.V.filter{it.name == 'student'}.outE.inV.retain([g.V.filter{it.Title == 'A nice school'}.next()]).back(2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T22:46:22.103

```
g.v(1).out.loop(1){it.object != g.v(2)}.path 
```

用英语讲：

“从顶点 1 开始，在到达的对象不是顶点 2 时遍历出边。返回路径。”

有关此类模式的更多信息，请参阅[http://gremlindocs.com](http://gremlindocs.com)。

# java - 按名称对对象数组进行排序（字符串）

> ID：16045286
> 
> 赞同：-6
> 
> 时间：2013-04-16T19:17:48.920
> 
> 标签：java, string, sorting, compare

我想知道是否有任何方法可以比较 Java 中的 String 对象。因为我想通过它们的“名称”对一些对象进行排序，一个字符串。如果没有，你会建议我如何解决这个问题？

该对象不是字符串。该对象是一个自己指定的类，其中包括一个字符串对象，我想从中对其进行排序。

```
Class MyClass  
{
    String mName;

    MyClass(String name)
    {
        mName = name;
    }
} 
```

然后我想按他们的成员 mName 对 Object MyClass 的数组进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:20:20.980

请参阅[Comparable 的文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)。

```
class MyClass extends Comparable< MyClass >
{
    String mName;

    MyClass(String name)
    {
        mName = name;
    }

    public int compareTo( MyClass right ) {
       return this.mName.compareTo( right.mName );
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:24:25.767

要按属性对 Object 进行排序，您必须使 Object 实现 Comparable 接口并覆盖该`compareTo()`方法。然后你可以做一个`Arrays.sort(array);`.

```
Class MyClass  implements Comparable<MyClass>
{
   String mName;

   MyClass(String name)
   {
      mName = name;
   }

   public int compareTo(MyClass instance) {
     return mName.compareTo(instance.mName);
  }

 } 
```

# javascript - 我无法让我的 JSON 请求工作

> ID：16045287
> 
> 赞同：-1
> 
> 时间：2013-04-16T19:17:51.610
> 
> 标签：javascript, json, request

我创建了一个需要传递给警察数据 API 的 url。

```
var api_url="http://policeapi2.rkh.co.uk/api/locate-neighbourhood?q="+latlon;
document.write(api_url); 
```

当您手动将 URL 输入到浏览器中时，该 URL 有效，但我需要一些 JavaScript 来发送 API 请求并将其吐出到页面上。我的 JavaScript 没问题，但我不了解 jQuery。

提前谢谢你，请保持简单聪明的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:38:33.707

尝试以下..它正在工作 JS Fiddle [http://jsfiddle.net/9AZyZ/](http://jsfiddle.net/9AZyZ/)

```
function abc(latLong){
     $.ajax({
                    url: 'http://query.yahooapis.com/v1/public/yql',
                        data: {
                            q: "select * from json where url ='http://policeapi2.rkh.co.uk/api/locate-neighbourhood?q="+latLong+"'",
                            format: "json"
                        },
                        dataType: "jsonp",
                    success: function (data) {

                        alert(JSON.stringify(data));

                    },
                    error: function (result) {
                        alert("Sorry no data found.");
                    }
                });
} 
```

# scala - 如何具体化符号以将其传递到运行时？

> ID：16045292
> 
> 赞同：1
> 
> 时间：2013-04-16T19:18:16.347
> 
> 标签：scala, reflection, scala-macros

Scala 中的宏上下文有两个方便的方法：它们本质`reifyType`上`reifyTree`生成代码，当在运行时执行时，将返回`Type`或被`Tree`具体化。

我想知道是否有某种方法可以实现与`Symbol`s 类似的东西 - 某种`reifySymbol`方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:23:14.970

我们还没有实现`reifySymbol`，但可以通过在 an 中包装一个符号`Ident`然后具体化生成的树来很好地模拟它。也欢迎拉取请求:)

# elmah - 通过 nuget 添加 ELMAH 的代码问题

> ID：16045294
> 
> 赞同：0
> 
> 时间：2013-04-16T19:18:18.720
> 
> 标签：elmah

我在我的网站上添加了 ELMAH，并且在我的 web.config 中出现以下错误。inheritinChildApplications 有一个红色的波浪线，表示编译器不喜欢它。并且位置路径部分显示为灰色。我是使用 ELMAH 的新手，有人对如何纠正这个问题有任何想法吗？

```
 <location path="elmah.axd" **inheritInChildApplications="false"**>
<system.web>
  <httpHandlers>
    <add verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" />
  </httpHandlers>
  <!-- 
    See http://code.google.com/p/elmah/wiki/SecuringErrorLogPages for 
    more information on using ASP.NET authorization securing ELMAH.

  <authorization>
    <allow roles="admin" />
    <deny users="*" />  
  </authorization>
  -->
</system.web>
<system.webServer>
  <handlers>
    <add name="ELMAH" verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" preCondition="integratedMode" />
  </handlers>
</system.webServer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:22:09.943

我不知道为什么会这样，但据我所知，这不是一个错误。它在我的网站上执行此操作，并且 Elmah 继续正常工作。

# ajax - 使用ajax重定向

> ID：16045296
> 
> 赞同：0
> 
> 时间：2013-04-16T19:18:32.820
> 
> 标签：ajax

我试图在成功 ajax 后重定向到一个页面。这是我的代码：

```
$.ajax({
    type: "GET",
    url: "blogdelete.jsp",
    data: val,
    async: true,
    cache: false,
    success: function (msg) {
        window.location.href="hodlogin.jsp";
    }
}); 
```

这是行不通的。有什么建议么？？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:27:27.920

似乎成功块没有执行。您必须添加错误块以检查任何错误或使用浏览器控制台。

```
$.ajax({
type: "GET",
url: "blogdelete.jsp",
data: val,

async: true,
cache: false,
success: function (msg) {

console.log('success');
alert('success');                            
         },
error: function(){
console.log('error');
alert('error');
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:26:53.197

我会首先在成功函数中放置一个警报（或萤火虫中的断点），以 100% 确定它被调用。如果是，那么我会尝试以下选项：

```
var url = "hodlogin.jsp";
window.location = url; 
```

或者

```
$(location).attr("href", url); 
```

如果这些仍然失败并且您确定有人调用，那么请仔细检查您的网址。也许它与调用 window.location 的 javascript 不在同一个目录中。在这种情况下，您可以尝试使用绝对路径，看看它是否有效。

# css - 页脚和页面底部之间的大空间

> ID：16045297
> 
> 赞同：0
> 
> 时间：2013-04-16T19:18:32.863
> 
> 标签：css, html, footer, space

我几乎完成了这个页面，但是在页脚的按钮图像下方，有一个我无法摆脱的讨厌的空间。有什么帮助吗？

代码如下。

```
/*=========================>Jacob Dixon
/*=========================>MW 1230
/*=========================>4/16/2013
*/

header, footer, nav, section, article, aside {
        display: block;
}
p { text-align: center
}
h1 {text-align: center;  
color: #4876b9
}
p.subheader{text-align: center; 
text-shadow: black 0.02em 0.02em 0.02em;
width: 500px;
margin-left: 700px
}
body{
background-color: #b5c8e3;
height: 100%
}

table{
margin-bottom: 2500px;
width: 25%;
margin: auto;
margin-top: 100px;
height: 90%
}
td{
height: 70px;
padding: 10px;
overflow: hidden;
}
footer{
display:block;
margin:0 auto;
overflow: hidden;
clear:both;
}
/* -------------------------------------------------------*/ 
```

HTML：

```
<!DOCTYPE html>
<html>
    <head>
        <title>A List of All Our Artists</title>
          <meta charset="UTF-8"  />
  <link href="../styleSheets/allArtists.css"  rel="stylesheet"  type="text/css"  />
  <script>
    document.createElement("header");
    document.createElement("footer");
    document.createElement("nav");
    document.createElement("aside");
    document.createElement("section");
    document.createElement("article");
  </script>
  </head>
    <body>
    <h1>Meet Our Artists</h1>
    <hr/>
    <p class = "subheader">This Web page contains a complete list of all of our 
artists, arranged in alphabetical order; To obtain a detailed page of 
information for any given artist you can click on the artist's name; New 
artists join our family of artists from time to time, so you  should 
return to visit the site often.</p>

    <table border = "1">

    <tr><td rowspan = "1" colspan = ""><img src = "../images/johnsmall.jpg"></td><td rowspan = "1" colspan = "1"><a href = "artistDixon.html" target = "wat">John Egbert</a></td><td>Metal Working - Egypt</td></tr>

    <tr><td rowspan = "1" colspan = ""><img src = "../images/jakesmall.png"></td><td rowspan = "1" colspan = "1"><a href = "artistDixon.html" target = "wat">Jacob Dixon</a></td><td>Stone Carving - Egypt</td></tr>

    <tr><td rowspan = "1" colspan = ""><img src = "../images/jadesmall.png"></td><td rowspan = "1" colspan = "1"><a href = "artistDixon.html" target = "wat">Jade Harley</a></td><td>Woodworking - Egypt</td></tr>

    <tr><td rowspan = "1" colspan = ""><img src = "../images/davesmall.png"></td><td rowspan = "1" colspan = "1"><a href = "artistDixon.html" target = "wat">John Egbert</a></td><td>Fabrics - Egypt</td></tr>

</table>    
</body>

    <footer>
    <p><a href = "index.html"><img src = "../images/hmbtn.png" class = "button"></a></p>
    </footer>

</html> 
```

我知道我遗漏了一些明显的东西，但我不知道是什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:25:48.190

我怀疑间距来自您包裹页脚图像的段落标签。

尝试将此添加到您的 CSS 中：

```
footer p { padding:0; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:29:30.943

我不是 100% 确定您要做什么，但假设您希望页脚始终出现在屏幕底部。如果是这样，那么您应该查看粘性页脚选项，如下[所示](http://ryanfait.com/sticky-footer/)

# java - 如何从匿名类中获取不同类型的数据

> ID：16045300
> 
> 赞同：2
> 
> 时间：2013-04-16T19:18:42.020
> 
> 标签：java, arrays, oop, coding-style, buffer

我有一个对象将一些工作委托给另一个正在实现接口的对象。然后，我正在创建实现这个接口的匿名类，我想从这些类中获取信息。

可以使用大小为 1 的最终数组作为指向基元的指针来与匿名类共享数据吗？

这是我的意思的一个工作示例：

```
public class ExampleClass
{
    public static final int INVALID_VALUE = -1;

    public static void main(final String[] args)
    {       
        final int[] buffer = { INVALID_VALUE }; // buffer is created
        final InterfaceA iaObject = new InterfaceA()
        {
            @Override
            public void doStuff(final String paramA)
            {
                buffer[0] = paramA.length(); // buffer is filled in anonymous class
            }
        };

        final ClassA objA = new ClassA(iaObject);
        objA.doStuff("hello, world");

        if (buffer[0] == INVALID_VALUE) // buffer is used
        {
            System.err.println("Invalid length !");
        }
        else
        {
            System.err.println("The length is : " + Integer.toString(buffer[0]));
        }
    }

    public static class ClassA
    {
        private final InterfaceA iaObject;

        public ClassA(final InterfaceA iaObject)
        {
            this.iaObject = iaObject;
        }

        public void doStuff(final String paramA)
        {
            this.iaObject.doStuff(paramA);
        }
    }

    public static interface InterfaceA
    {
        void doStuff(String paramA);
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:41:30.117

建议：为什么不使用泛型作为输出参数？

```
interface InterfaceA {

   public <T> void doStuff( String paramA, Holder<T> holder );
}

class Holder<T> {

    public T t;
} 
```

完整示例：

```
public class ExampleClass
{
   public static final int INVALID_VALUE = -1;

   public static void main(final String[] args)
   {       
      final InterfaceA< Integer > iaObject = new InterfaceA< Integer >() {
         @Override
         public Integer doStuff( String paramA, Holder<Integer> holder ) {
            return holder.value = paramA.length();
         }
      };

      final ClassA<Integer> objA = new ClassA<>( iaObject );
      int result = objA.doStuff("hello, world", new Holder<>( INVALID_VALUE ));
      if( result == INVALID_VALUE ) {
         System.err.println("Invalid length !");
      }
      else {
         System.err.println("The length is : " + Integer.toString( result ));
      }
   }

   public static class ClassA<T> {
      private final InterfaceA<T> iaObject;

      public ClassA( final InterfaceA<T> iaObject_ ) {
         this.iaObject = iaObject_;
      }

      public T doStuff( final String paramA, Holder<T> holder ) {
         return this.iaObject.doStuff( paramA, holder );
      }
   }

   public static interface InterfaceA<T> {
      public T doStuff( String paramA, Holder<T> resultHolder );
   }

   public static class Holder<T> {

      public T value;

      public Holder( T value_ ) {
         value = value_;
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:43:06.623

如果我理解您的问题的要点，您想知道使用最终数组作为包装器在匿名内部类与其封闭类之间共享内存是否是好的设计原则。

以我的经验，这是在两个对象之间共享数据的一种非常糟糕的方式。以不同的方式声明接口可能更明智。返回一个对象或使用泛型来指定您期望从匿名类返回的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T19:43:36.547

我认为你的方法最大的问题之一是缺乏封装——你的 InterfaceA 实现使用了一些“全局”数据持有者（数组），并且没有办法阻止这个数组可以在其他地方使用，这反过来可以导致各种问题（竞争条件或其他）。

更简洁的方法是使用 getInt() 方法或类似方法定义一些单独的类（或接口）。

# jquery - 当您将另一个 div 悬停在同一个 div 中时，如何防止 div 消失？

> ID：16045307
> 
> 赞同：0
> 
> 时间：2013-04-16T19:19:10.467
> 
> 标签：jquery

我有一个div。在这个 div 里面，还有另一个 div。当我将鼠标悬停在“父”div 中时，“父”div 内的 div 将淡入（）。但是当我将 div 悬停在“父”div 中时，这个 div 会自动淡出（），但我不希望这种情况发生。我怎么解决这个问题？

由于我不善于解释，我做了一个小提琴的例子：

[http://jsfiddle.net/9kAkY/](http://jsfiddle.net/9kAkY/)

HTML

```
<div id="preview">
    HOVER THIS BIG DIV

    <div id="previewDesc">
        I don't want this div to fadeOut when I hover over it. 
        How can I prevent this from happening?
    </div>
</div> 
```

这是我使用的 jQuery 代码。

```
 $("#preview").hover(function()
   {
       $("#previewDesc").fadeIn(100);                    
   });

   $("#preview").mouseout(function()
   {
       $("#previewDesc").fadeOut(100);                    
   }); 
```

这是我使用的 CSS

```
#preview{
    width: 500px;
    height: 200px;
    border: 1px solid #000000;
}

#previewDesc{
    width: 300px;
    padding: 5px;
    background-color: #666666;
    color: #FFFFFF;
    margin: 10px auto;
    display: none;
    border: 2px solid #000000;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:21:33.783

改用这个：

[看演示](http://jsfiddle.net/9kAkY/3/)

```
$("#preview").mouseenter(function()
   {
       $("#previewDesc").fadeIn(100);                    
   }).mouseleave(function()
   {
       $("#previewDesc").fadeOut(100);                    
   }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T19:23:02.147

不要使用`mouseout`，[`.hover()`](http://api.jquery.com/hover/)为您提供 2 个回调：一个用于悬停时，一个用于悬停时。使用它们：

```
$("#preview").hover(
   //called when hovering into the div
   function() {
        $("#previewDesc").fadeIn(100);                    
   },
   //called when hovering out of the div
   function() {
        $("#previewDesc").fadeOut(100); 
   }
); 
```

这是一个[工作 jsFiddle](http://jsfiddle.net/9kAkY/4/)。

# c# - 将数值的 IEnumerable 作为参数传递给方法

> ID：16045309
> 
> 赞同：10
> 
> 时间：2013-04-16T19:19:16.917
> 
> 标签：c#, visual-studio-2010

我正在玩一个非常简单的程序来获取一个双精度数组并返回标准偏差。这部分有效，但我想让代码更可重用。我想这样做，以便该方法可以接受可以被视为数字的任何类型的参数并返回标准偏差，而不是硬编码双精度类型（就像我最初在这个程序中所做的那样）。一个人是如何做到这一点的，它的正确术语是什么？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

    namespace ConsoleApplication5
    {
        class Program
        {
            static void Main(string[] args)
            {
                double[] avg = { 3.4, 55.6, 10.0, 4.5, 2, 2 };
                double x = avg.Average();
                //first round of testing
                Console.WriteLine("The average of the first array is below ");
                Console.WriteLine(x);
                Console.WriteLine("below should be the standard deviation!");
                Console.WriteLine(CalculateStandardDeviation(avg));
                Console.ReadLine();
                int[] intAvg = { 4, 3, 5, 6, 2 };
                double secondAvg = intAvg.Average();
                Console.WriteLine("The average of the second array is below ");
                Console.WriteLine(secondAvg);
                //this is where the error is happening
                //CalculateStandardDeviation(secondAvg);

            }
            //this is where I tried to make the query more reusable
            public static double CalculateStandardDeviation(IEnumerable<double> values)
            {

                double avg = values.Average();
                double sum = 0;
                foreach (double d in values)
                {
                    sum += Math.Pow((d - avg), 2);

                }

                return Math.Pow(sum / (values.Count() - 1),.5);

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T19:38:05.847

你可以使用这样的东西：

```
public static decimal CalculateStandardDeviation<T>(IEnumerable<T> values)
{
    IEnumerable<decimal> decimalValues = values.Select(v => Convert.ToDecimal(v));

    decimal result = 0;

    // calculate standard deviation on decimalValues

    return result;
} 
```

如果包含无法转换为小数的值，它将抛出异常`values`，但如果这些值是适当的类型，它将起作用，我认为这很有意义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T19:27:57.317

不幸的是，所有数字都没有基类。您可以使用通用的运行时检查方法或编译时安全的重载集来做到这一点。

**通用方法：**

```
public static T CalculateStandardDeviation(IEnumerable<T> values)
{
    var valueArray = values.Select(Convert.ToDecimal).ToArray();

    //...

    return (T)standardDeviation;
} 
```

使用单个泛型方法的问题在于，您不能对类型参数施加类型约束，从而将其限制为仅限数字类型。您将不得不求助于在运行时失败。没有什么可以阻止您使用字符串、对象、颜色或 HttpWebRequests 等数组调用该方法，除非您确实知道如何计算颜色的标准偏差，否则您可能应该坚持特定数字类型的单独覆盖：

我建议使用该`decimal`类型作为您的主要实现，然后将所有内容都转换为它。

**特定类型的重载：**

```
public static decimal CalculateStandardDeviation(IEnumerable<decimal> values)
{
    //...
}

public static double CalculateStandardDeviation(IEnumerable<double> values)
{
    return (double)CalculateStandardDeviation(values.Select(Convert.ToDecimal));
}

public static int CalculateStandardDeviation(IEnumerable<int> values)
{
    return (int)CalculateStandardDeviation(values.Select(Convert.ToDecimal));
}

// etc... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T19:23:32.790

使用 C# 泛型。

您的函数签名将是：

```
public static T CalculateStandardDeviation(IEnumerable<T> values) 
```

你可以像这样使用它：

```
int stdDev = CalculateStandardDeviation([int-array]);
double stdDev = CalculateStandardDeviation([double-array]); 
```

请点击此链接：

[http://msdn.microsoft.com/en-us/library/ms379564%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms379564%28VS.80%29.aspx)

编辑：

要解决泛型类型的平均问题，请查看此库：

[如何实现通用方法对不同的值类型进行数学计算](https://stackoverflow.com/questions/814202/how-to-implement-generic-method-to-do-math-calculations-on-different-value-types)

Obs：来自布赖恩的建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T19:27:17.517

**编辑** 您应该使用 JLRishe 的答案，它比这更优雅。

您可能应该首先将泛型添加到您的方法中，然后使用类型转换器将您的未知输入转换为双精度，如下所示：

```
public static double CalculateStandardDeviation<TSource>(IEnumerable<TSource> inputs)
{
    var converter = TypeDescriptor.GetConverter(typeof (double));
    if (!converter.CanConvertFrom(typeof(TSource)))
        return 0;

    var values = new List<double>();
    foreach (var value in inputs)
    {
        values.Add((double) converter.ConvertFrom(value));
    }

    // Your logic here ...
    return ...;
} 
```

我没有测试这个片段，但你明白了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-05T19:24:10.870

C# 6.0 将支持将数值的 IEnumerable 作为参数传递给方法

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T20:00:42.963

前言：这个答案建立在 [如何验证类型是否重载/支持某个运算符？](https://stackoverflow.com/questions/8523061/how-to-verify-whether-a-type-overloads-supports-a-certain-operator) 和 [http://www.codeproject.com/Articles/87438/TinyLisp-A-Language-and-Parser-to-See-LINQ-Express](http://www.codeproject.com/Articles/87438/TinyLisp-A-Language-and-Parser-to-See-LINQ-Express) 第二个链接显示了如何编译和评估 linq 表达式。

简而言之，您可以放弃静态类型安全并检查类型在运行时支持特定操作的能力（第一个链接），如果不支持，您可以抛出异常，如下面的示例所示：

```
void Main()
{
    DoAdd<float>(5,6);
    DoAdd<int>(5,6);
    DoAdd<bool>(true,false);
}

// Define other methods and classes here
static void DoAdd<T>(T in1, T in2){
if(!HasAdd<T>()){throw new Exception("Unsupported Type!");}
 var c1 = Expression.Constant(in1, typeof(T));
 var c2 = Expression.Constant(in2, typeof(T));
 var expression=Expression.Add(c1, c2);
 Expression<Func<T>> lExpression = Expression.Lambda<Func<T>>(expression);
 Func<T> fExpression = lExpression.Compile();
 Console.WriteLine(fExpression());

}

static bool HasAdd<T>() {
    var c = Expression.Constant(default(T), typeof(T));
    try {
        Expression.Add(c, c); // Throws an exception if + is not defined
        return true;
    } catch {
        return false;
    }
} 
```

# c++ - itemDoubleClicked signal for subclass of QListWidgetItem

> ID：16045315
> 
> 赞同：0
> 
> 时间：2013-04-16T19:19:32.837
> 
> 标签：c++, qt, signals, qlistwidget, slots

I have tried everything I know of (which admittedly isn't very much) and searched google for about an hour but I just can't figure this out.

I have a class called `PlaceHolder`, which inherits from `QListWidgetItem`. I want to be able to register double clicks on this, so I tried using the signal `itemDoubleClicked(QListWidgetItem*)` on the `QListWidget`. However, when I do that, I need a slot that has the same arguments. This would not be a problem if I didn't need to access the functions/variables of the `PlaceHolder` that was clicked, but I do.

If there's anything else you need to know to help me then please feel free to ask. Thank you for any time and effort you spent on this problem.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:24:45.173

I'm a bit unclear on your question. Is the problem that you have a QListWidgetItem* instead of a PlaceHolder*?

Try:

```
void MyWidget::handleDoubleClickSlot(QListWidgetItem* item)
{
    PlaceHolder* placeHolderItem = qobject_cast<PlaceHolder*>(item);

    if (placeHolderItem == NULL)
    {
        // oops, not a PlaceHolder item
        return;
    }

    placeHolderItem->myAwesomePlaceHolderMethod();
} 
```

As shown, it will return NULL if the item is somehow not a PlaceHolder object.

# cookies - 如何在使用备用超时关闭浏览器时使 F5 APM 会话到期

> ID：16045318
> 
> 赞同：0
> 
> 时间：2013-04-16T19:19:38.210
> 
> 标签：cookies, persistence, f5, apm

我们正在使用 F5 APM 来控制对我们的 web 应用程序的访问，但在过期规则方面存在一些问题。

我们想要的场景是 cookie 在创建后 12 小时或浏览器关闭时过期，以先到者为准。

尽管我们做出了努力，但似乎我们只有两种选择中的一种

*   将 cookie 的“过期”属性设置为 12 小时（或 max-age）
*   根本不要设置“Expires”属性

第一个选项成功地允许 cookie 在 12 小时后过期，但如果浏览器关闭，cookie 会一直保留到该时间，因此仅满足 2 个条件中的一个。

第二个选项将在浏览器关闭时使 cookie 过期，但如果浏览器打开 12 小时或更长时间则不会过期。

F5 APM 的设置是否会使 F5 端的会话过期，而 cookie 可以在浏览器端保持会话 cookie？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:33:29.440

完成您尝试使用 APM 执行的操作的最佳方法是为 APM MRH cookie 使用会话 cookie，然后在“属性”下的“访问”配置文件上将“最大会话超时”设置设置为 12 小时（该值以秒为单位）在设置部分（在版本 11.x 上，可能在 v10.x 上的位置略有不同）。这将完全符合您的要求。

# app-config - 我可以为 c# 使用集中的外部配置文件吗？

> ID：16045319
> 
> 赞同：0
> 
> 时间：2013-04-16T19:19:38.337
> 
> 标签：app-config, external

[我在这里](http://blog.andreloker.de/post/2008/06/Keep-your-config-clean-with-external-config-files.aspx)找到了一篇关于使用外部配置文件的文章。虽然我能够提取我的配置设置，但我无法将它们放在中心位置。

当我试图做这样的事情时：

```
 <connectionStrings configSource="C:/dev/Configs/ConnectionStrings.config" /> 
```

它会导致类型初始化程序异常。如果我将文件放在 bin 目录下的文件夹中，就可以了。问题是，我想将配置文件保留在所有应用程序的中心，这样我就可以在很多地方重复使用它。

只是不可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:21:05.070

我最终使用了符号链接。我在每个应用程序下创建了一个子文件夹，该子文件夹符号链接回主配置文件夹。所有应用程序现在共享相同的连接字符串。

# grails - 如何列出要注入 grails 的可用对象？

> ID：16045321
> 
> 赞同：10
> 
> 时间：2013-04-16T19:19:43.257
> 
> 标签：grails, grails-2.0, grails-controller

有没有办法以编程方式列出 grails spring 注入上下文中的所有可用 bean？在 guice 中，我可以通过查找注入器中配置的绑定来做到这一点。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-16T19:26:27.920

我用这个：

```
ctx.beanDefinitionNames.sort().each { println it } 
```

`ctx`春天在哪里`ApplicationContext`。您可以在控制器/服务/等中获得它。和

```
def grailsApplication
...
def ctx = grailsApplication.mainContext 
```

给定所有 bean 名称，您可以使用

```
def bean = ctx.getBean(name) 
```

# django - 使用 Dojo 提交表单时遇到问题

> ID：16045325
> 
> 赞同：0
> 
> 时间：2013-04-16T19:19:52.530
> 
> 标签：django, dojo, django-forms

我正在使用 Django 1.5 和 Dojo 1.8。当我单击一个按钮时，我试图让 Dojo 将表单提交回 Django 视图。

这是我的 Django 视图：

```
def report(request, report_id, report_url=None, template='report_parameters.html'):
    if request.method == 'POST':
        form = ReportParametersForm(request.POST)
        if form.is_valid():
            report_params = form.save()
            html = "Success!"
            return HttpResponse(html)
    else:
        form = ReportParametersForm()
        return render(request,template, {
            'form': form,
            'report_url': report_url,
            'report_id': report_id,
        }) 
```

这是html页面：

```
 <div id="report_body">
        <form data-dojo-type="dijit/form/Form" id="parameters_form" data-dojo-id="parameters_form">
            {% csrf_token %}
            <table>
                {{ form.as_table }}
            </table>
            <p><button id="submit_parameters" dojoType="dijit.form.Button" type="submit">Submit</button></p>
        </form>
    </div>
    <script type="dojo/on" data-dojo-event="submit" data-dojo-args="e">
        e.preventDefault();
        require(["dojo/dom", "dojo/request", "dojo/dom-form"], function(dom, request, domForm){
            on(dom.byId("submit_parameters"), "click", function() {
                console.log("Dojo Post");
                request.xhr("/report_parameters/report_id/report_url/", {
                    method: "post",
                    handleAs: "json",
                    data: domForm.toJson("parameters_form"),
                }).then(
                    function(response){
                        alert(response);
                        dom.byId("report_body").innerHTML = "Report!";
                    },
                    function(error){
                        dom.byId("report_body").innerHTML = "<div class=\"error\">"+error+"<div>";
                    }
                );
            });
        });
    </script> 
```

当我单击`Submit`按钮时，我想向`POST`url 发送一个请求，传递我在表单中的数据。但是，现在当我单击 时`Submit`，页面会重新加载一个看起来像这样的 url `/?csrfmiddlewaretoken=Y9gaNMFRWZNXMbJ2L3Ev7A5iKPGTuWeF&param_1=0&param2=0/report_parameters/report_id/report_url/`：. 我没有看到`Dojo Post`应该出现在我的控制台中的那个。如何让我的表格提交？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T20:04:36.127

我不得不稍微修改上面的内容。这最终对我有用：

```
 <div id="report_body"></div>
    <form data-dojo-type="dijit/form/Form" id="parameters_form" data-dojo-id="parameters_form" encType="multipart/form-data" action="" method="POST">
        {% csrf_token %}
        <table>
            {{ form.as_table }}
        </table>
        <script type="dojo/on" data-dojo-event="submit" data-dojo-args="e">
            e.preventDefault();
            require(["dojo/dom", "dojo/request/xhr", "dojo/dom-form"], function(dom, xhr, domForm){
                var url = "/report_parameters/report_id/report_url/"
                var data = domForm.toObject("parameters_form")
                xhr(url, {
                    method: "post",
                    data: data,
                }).then(
                    function(response){
                        alert(response);
                        dom.byId("report_body").innerHTML = "Report!";
                    },
                    function(error){
                        dom.byId("report_body").innerHTML = error;
                    }
                );
            });
        </script>
        <p><button id="submit_parameters" dojoType="dijit/form/Button" type="submit" name="submitButton" value="Submit">Submit</button></p>
    </form> 
```

使用`<div>`or`<form>`标签来包装整个东西对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T11:03:48.697

[这个小提琴](http://jsfiddle.net/sPbgC/3/)似乎做你想做的事。

主要区别似乎是：

*   `<form>`实际上是一个`<div>`. [Form](https://dojotoolkit.org/reference-guide/1.8/dijit/form/Form.html)的Dojo 文档链接到[为 IE 执行此操作的原因](http://bugs.dojotoolkit.org/ticket/8424)。
*   所有相关的事件脚本都在表单`<div>`中。
*   删除`on(dom.byId("submit_parameters")...`代码，因为已经有一个声明性提交事件处理程序。

HTML 代码：

```
<div id="report_body"></div>
<div data-dojo-type="dijit/form/Form" id="parameters_form" data-dojo-id="parameters_form" encType="multipart/form-data" action="" method="">
    <input name="dummy" value="dummy">
    <script type="dojo/on" data-dojo-event="submit" data-dojo-args="e">
        console.log("submit");
        e.preventDefault();
        require(["dojo/dom", "dojo/request/xhr", "dojo/dom-form"], function(dom, xhr, domForm) {
            console.log("Dojo Post");
            var url = "/report_parameters/report_id/report_url/";
            var data = domForm.toJson("parameters_form");
            // overwrite url and data for jsfiddle
            url = "/echo/json/";
            data = {
                json: data
            };
            xhr(url, {
                method: "post",
                handleAs: "json",
                data: data,
            }).then(function(response) {
                alert(JSON.stringify(response, null, 2));
                dom.byId("report_body").innerHTML = "Report!";
            }, function(error) {
                dom.byId("report_body").innerHTML = "<div class=\"error\">" + error + "<div>";
            });
        });
    </script>
    <button data-dojo-type="dijit/form/Button" id="submit_button" type="submit" name="submitButton" value="Submit">Submit</button>
</div> 
```

JS代码：

```
require(["dojo/parser", "dijit/registry", "dijit/form/Form", "dijit/form/Button", "dijit/form/ValidationTextBox", "dijit/form/DateTextBox", "dojo/domReady!"], function (parser, registry) {
    parser.parse().then(function () {
        console.log("parsed");
        console.log(registry.byId("parameters_form"));
        console.log(registry.byId("submit_button"));
    });
}); 
```

# java - 原生 android 菜单未显示在 Phonegap 中

> ID：16045329
> 
> 赞同：3
> 
> 时间：2013-04-16T19:20:01.667
> 
> 标签：java, android, cordova, android-menu

在使用`PhoneGap`. 当我按下`menu`按钮时，`onCreateOptionsMenu()`方法被调用但菜单没有被创建。

```
public class PhoneGapActivity extends DroidGap {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.setBooleanProperty("showTitle", true);
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        super.onCreateOptionsMenu(menu);
        Log.d("Menu","Menu option called");
        getMenuInflater().inflate(R.menu.phone_gap, menu);
        return true;
    }

} 
```

正在打印日志，这意味着正在调用该函数。

菜单的 XML 文件：当`android:showAsAction`它设置为`always`在操作栏中显示时，否则它不起作用。

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/action_settings"
        android:icon="@drawable/ic_menu_settings_holo_light"
        android:showAsAction="always"
        android:title="@string/action_settings"/>

    <item
        android:id="@+id/more"
        android:icon="@drawable/ic_menu_moreoverflow_normal_holo_light"
        android:showAsAction="never"
        android:title="@string/more"/>

</menu> 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T11:52:16.380

解决了。该错误出现在 PhoneGap 2.6 中。我下载了PhoneGap 2.5版，它工作正常。

# arrays - 如何定义和分配 Verilog 二维数组

> ID：16045332
> 
> 赞同：2
> 
> 时间：2013-04-16T19:20:04.543
> 
> 标签：arrays, verilog

我正在尝试以这种形式创建一个二维数组：

```
reg arr[5:0][0:5]; 
```

当我尝试为其分配一个值时，可以说

```
assign arr[1] = 22; 
```

它给出了一些错误说：

> “对标量 reg 数组 'arr' 的引用不是合法的净左值”和“连续赋值的非法左侧”。

所以我的意图是在数组的索引中分配一个数字。这个任务是如何工作的？任何帮助，建议将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-16T19:28:08.923

首先，你不能`assign`注册。`assigns`驱动*线*类型，而不是*reg*类型。要驱动 reg 类型，您需要在逻辑块（如 always 块）内添加一条语句。

其次，根据您所写的内容，我认为您正在寻找一个多位元素数组，而不是二维数组。

`reg arr[5:0][0:5];`定义单个位的二维数组。如果你想要一个多位值的数组，可以容纳大于位，你可以像这样声明它：

`reg [M:0] arr[0:N]`- 这描述了一个 (N+1) 个元素的数组，其中每个元素是一个 M+1 位数。如果您以这种方式声明它，那么您应该能够将 22 之类的值存储到其中，假设您使用 always 块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T19:27:14.430

您不能`assign`对类型使用连续赋值（也称为语句）`reg`。这与它是一个数组无关。

将声明更改`arr`为类型`wire`将使您超越您发布的错误消息。`initial`或者，您可以使用或`always`块中的程序分配来分配它。

但是，您仍然需要在分配中提供数组的两个维度。您正在声明一个 1 位值的二维数组。

因此，您需要将其指定为：

```
arr[0][0] = 1; 
```

# alloy - 从 CompModule 到合金

> ID：16045336
> 
> 赞同：3
> 
> 时间：2013-04-16T19:20:27.420
> 
> 标签：alloy

使用 Alloy API，可以从合金文件中获取 CompModule，其中包含您需要的所有内容，以便使用给定的合金模块。

这很容易使用： CompUtil.parseEverything_fromFile(...)

我现在的问题如下。有没有办法从 CompModule 到合金语言？或者从符号列表和事实到合金模型。（我想我可以蛮力进行，但我想知道是否存在实用程序。）

谢谢你的支持 ！

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:00:51.283

我不认为已经有某种访问者（或其他东西）接受`CompModule`并生成文本合金文件。实现这样的打印机应该非常简单，但也很耗时。

# bash - Bash 在 Solaris 上创建 .tar.gz

> ID：16045339
> 
> 赞同：0
> 
> 时间：2013-04-16T19:20:35.047
> 
> 标签：bash, gzip, solaris, archive, tar

我正在编写一个 bash 脚本，它应该从指定目录创建一个 .tar.gz 存档，包括文件结构。这是一个家庭作业，我需要它在学校使用的 Solaris 系统上工作。这意味着我不能像这样使用 tar

```
tar xvzf archive.tar.gz ./ 
```

因为这个系统使用一些旧版本的 tar 没有 -z 选项。我这样用

```
tar xvf - ./ | gzip > archive.tar.gz 
```

它工作正常，除了一个奇怪的事实，当我检查档案的内容时，它包含自己（换句话说，它包含“archive.tar.gz”）。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-23T14:23:11.380

这有效：tar cvf - | gzip > 归档.tar.gz

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:35:59.957

问题是，当您运行命令时，会立即创建名为“archive.tar.gz”的文件。意思是，在调用 gzip 之前。它只是一个空白文件，但它在目录中。为防止将其包含到生成的存档中，您可以尝试通过以下方式之一修改您的脚本：

1.  `tar xvf - ./ | gzip > ../archive.tar.gz`
2.  `tar xvf - {path_to_dir_you_want_to_compress_files_from} | gzip > archive.tar.gz`

遗憾的是，我无法检查这两个脚本是否有效，因为我在任何地方都没有 Solaris。请让我知道这是否有效。

# r - 是否可以在 R 的父框架中修改列表中的对象？

> ID：16045340
> 
> 赞同：0
> 
> 时间：2013-04-16T19:20:36.000
> 
> 标签：r, list, assign

我正在开发一个 R 包，该包具有许多函数，这些函数遵循非 R 标准做法，即修改作为参数传入的对象。这通常可以正常工作，但当要修改的对象在列表中时会失败。

给出赋值形式示例的函数：

```
myFun<-function(x){
  xn <- deparse(substitute(x))
  ev <- parent.frame()
  # would do real stuff here ..
  # instead set simple value to modify local copy
  x[[1]]<-"b"
  # assign in parent frame
  if (exists(xn, envir = ev)) 
  on.exit(assign(xn, x, pos = ev))
  # return invisibly 
  invisible(x)
} 
```

这有效：

```
> myObj <-list("a")
> myFun(myObj)
> myObj
[[1]]
[1] "b" 
```

但如果对象是列表的成员，它就不起作用：

```
> myObj <-list("a")
> myList<-list(myObj,myObj)
> myFun(myList[[1]])
> myList
[[1]]
[[1]][[1]]
[1] "a"

[[2]]
[[2]][[1]]
[1] "a" 
```

在这里阅读其他问题的答案后，我看到文档`assign`清楚地说明：

`assign does not dispatch assignment methods, so it cannot be used to set elements of vectors, names, attributes, etc.`

由于存在使用这些函数的现有代码库，我们不能放弃就地修改语法。是否有人对修改作为父框架中列表成员的对象的解决方法或替代方法有建议？

更新：

我考虑过尝试推出自己的分配功能，例如：

```
assignToListInEnv<-function(name,env,value){
  # assume name is something like "myList[[1]]"
  #check for brackets
  index<-regexpr('[[',name,fixed=TRUE)[1]
  if(index>0){
    lname<-substr(name,0,index-1)
    #check that it exists
    if (exists(lname,where=env)){
      target<-get(lname,pos=env)
      # make sure it is a list
      if (is.list(target)){
        eval(parse(text=paste('target',substr(name,index,999),'<-value',sep='')))
        assign(lname, target, pos = env)
      } else {
        stop('object ',lname,' is not a list in environment ',env)
      }
    } else {
      stop('unable to locate object ',lname,' in frame ',env)
    }
  }
} 
```

但它看起来很脆弱，需要处理更多的情况（`$`以及） `[`，`[[`并且可能仍然会失败，`[[x]]`因为`x`会在错误的框架中进行评估......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-12-29T05:47:50.680

*由于它在我的查询的第一个搜索结果中，这是我的解决方案：*

您可以使用`paste()`"<<-" 创建一个表达式，该表达式将在评估时将值分配给您的列表元素。

```
assignToListInEnv<-function(name, value, env = parent.frame()){
  cl <- as.list(match.call())
  lang <- str2lang(paste(cl["name"], "<<-", cl["value"]))
  eval(lang, envir = env)
} 
```

# c - 转换 ioctl 参数是否会破坏严格的别名规则？

> ID：16045350
> 
> 赞同：1
> 
> 时间：2013-04-16T19:20:55.433
> 
> 标签：c, linux, linux-kernel, c99, strict-aliasing

我正在运行具有以下原型的*Linux 3.2内核：*`ioctl`

```
long ioctl(struct file *f, unsigned int cmd, unsigned long arg); 
```

我注意到无论从相应用户空间函数传递给的实际数据类型如何，`arg`它总是**无符号长。**`ioctl`示例`ioctl`通常显示以下实现（[source](http://www.linuxforu.com/2011/08/io-control-in-linux/)）：

```
typedef struct
{
    int status, dignity, ego;
} query_arg_t;

#define QUERY_GET_VARIABLES _IOR('q', 1, query_arg_t *)

static long my_ioctl(struct file *f, unsigned int cmd, unsigned long arg)
{
        query_arg_t q;

        switch (cmd)
        {
                case QUERY_GET_VARIABLES:
                        q.status = status;
                        q.dignity = dignity;
                        q.ego = ego;
                        if (copy_to_user((query_arg_t *)arg, &q, sizeof(query_arg_t)))
                        {
                                return -EACCES;
                        }
                        break;
                default:
                        return -EINVAL;
        }

    return 0;
} 
```

请注意，需要**query_arg_t ***类型，因此应用了强制转换：`(query_arg_t *)arg`

但是，这是否违反了严格的别名规则，因为`arg`类型为**unsigned long**而强制转换为**query_arg_t ***？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T20:50:27.090

指针是整数类型。将指针存储在任何大到足以包含它的整数类型中是完全可以的。例如，以下是完全有效的 C：

```
double f()
{
    double a = 10.5;

    uintptr_t p = (uintptr_t)(&a);

    double * q = (double *)p;

    return *q;
} 
```

相比之下，以下是明显的混叠违规：

```
short buf[100] = {};

double x = *(double*)(buf + 13); 
```

关键是如何*存储*指针值并不重要。重要的是，您必须仅将这些指针视为指向对象的指针，而这些指针*实际上*是指向正确类型对象的指针。

在第一个示例中，`p`确实存储了指向 double 的指针，尽管它本身不是 a `double *`。在第二个示例中，`buf + 13`is 根本不是指向双精度的指针，因此将其取消引用是类型双关语和别名违规。

（指针和强制转换是 C 语言不是*安全*语言的原因之一：操作的正确性可能取决于变量的*值*，而不仅仅是它的*类型*。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T19:38:24.447

这不会破坏别名规则。

对象`arg`只能在`my_ioctl`函数中访问：

```
(query_arg_t *)arg 
```

并且对象只能通过它的 type 来访问`unsigned long`。强制转换仅将对象的值从`unsigned long`值转换为`query_arg_t *`值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T19:56:43.257

请记住，虽然这些是别名，但它们存在于完全不同的执行上下文中——用户空间和内核。严格的别名规则旨在防止编译器在代码单元中处理可能的别名时可能出现的问题。用户空间和内核空间代码永远不会发生这种情况。它们是独立的代码单元，永远不会以可能导致与严格别名规则旨在解决的问题相关的方式混合在一起。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T19:40:59.717

`unsigned long`（或其他与强制转换兼容的整数类型）是所有 Linux ABI 中`unsigned long`的基础类型。`uintptr_t`

```
$ grep -rw uintptr_t /usr/include/stdint.h
typedef unsigned long int uintptr_t; 
```

C99 表示任何指针类型都可以转换为`uintptr_t`（或其基础类型）并转换回*原始指针类型*，而不会丢失信息或违反严格别名规则。因此，只要调用的用户空间代码将a作为参数`ioctl(fd, QUERY_GET_ARGS, ptr)`传递，整个程序就符合要求。`query_arg_t *``ptr`

另请注意，`ioctl`您展示的原型是内核中的驱动程序端接口。在用户空间，原型是

```
extern int ioctl(int fd, unsigned long int request, void *arg); 
```

这使得第三个参数是一些具体但未指定的指针类型更加明显，并且调用者和（最终）被调用者最好就指针的实际类型达成一致。（这是 C 中的正常使用模式`void *`。）

（对于学究的进一步说明：*实际*的用户空间原型是

```
extern int ioctl(int fd, unsigned long int request, ...); 
```

对于将数字常量作为第三个参数而不进行强制转换的程序来说，这是一个兼容性问题。您可能开始理解为什么`ioctl`不再被视为设计良好的 API。）

# filesystems - 使用 mpi 读取文件

> ID：16045354
> 
> 赞同：1
> 
> 时间：2013-04-16T19:21:04.013
> 
> 标签：filesystems, mpi

我想要几个 mpi 进程来读取同一个文件，我搜索了一下，发现它可以通过 MPI IO 完成，但只能在 GPFS 或 HPSS 文件系统中完成。有没有办法在 ext4 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:06:54.510

您所指的文档是一所大学的科学编程课程，他们指的是他们自己的大学内部架构。MPI 文件操作独立于底层文件系统，这是操作系统的职责。

您可以找到有关 MPI 文件操作的与大学无关的信息，例如[此处](http://www.open-mpi.org/doc/v1.4/man3/MPI_File_iwrite.3.php)或[此处](http://mpi.deino.net/mpi_functions/MPI_File_iwrite.html)，尤其是专门处理 I/O的[MPI 2.2 标准的第 13 章。](http://www.mpi-forum.org/docs/mpi-2.2/mpi22-report.pdf)

# sql - SQL Server 中 LISTAGG 函数的替代使用

> ID：16045355
> 
> 赞同：0
> 
> 时间：2013-04-16T19:21:07.763
> 
> 标签：sql, sql-server, sql-server-2008

我想`LISTAGG`在 sql 查询中使用函数以组形式显示数据。如果有任何替代函数`LISTAGG`可以在 SQL 查询中使用。

```
SELECT PersonName, LISTAGG(Z.t2, '; ')
FROM Z
GROUP BY PersonName
ORDER BY PersonName 
```

上面的查询在 oracle 中，`LISTAGG`函数在 Oracle 中使用，但我想在 SQL Server 中使用它的功能。

# jquery - jQuery FullCalendar 不解析 json

> ID：16045363
> 
> 赞同：2
> 
> 时间：2013-04-16T19:21:44.487
> 
> 标签：jquery, ajax, json, fullcalendar

我的 FullCalendar jQuery 看起来像这样：

```
$(document).ready(function () {

$('#calendar').fullCalendar({

    events: {
        url: '/admin/index.php',
        type: 'GET',
        data: {
            m: '1',
            e: 'fetchCalEvents'
        },
        error: function () {
            alert('there was an error while fetching events!');
        },
        color: 'yellow',
        textColor: 'black'
    }

}); 
```

如果我点击测试网址：

```
http://localhost/admin/index.php?m=1&e=fetchCalEvents 
```

我得到了好看的 JSON：

```
[{"id":"13","title":"Test Entry","start":"2013-04-20 04:20:00","end":"2013-04-20 05:20:00","url":"#","allDay":false}] 
```

但令人恼火的是，日历只会弹出：

```
There was an error while fetching events! 
```

这并没有告诉我太多。有没有办法在这个插件上获得更好的错误处理？我在文档中没有看到任何内容。知道有什么问题吗？

:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:49:26.717

试试这个[解决方案](https://stackoverflow.com/questions/8814715/fullcalendar-addday-not-working)

看文档官方也许会找到回答你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:03:00.713

问题是我通过控制器引导 ajax 调用。当我删除日历的控制器代码并将其放在与日历加载相同的目录中的独立脚本中时，该插件开始工作。：/远非理想，但我很着急。:( :(

# sql-server - 向客户端公开 SQL 数据

> ID：16045368
> 
> 赞同：1
> 
> 时间：2013-04-16T19:21:52.860
> 
> 标签：sql-server, web-services, sql-server-2008-r2

我们有一个内部 SQL Server 2008R2 数据库，我们想通过 Internet 向我们的客户公开（部分 - 仅一些表），以便他们可以提供他们的 Excel 报告。我们最好的选择是什么？我们应该如何提供安全性（即，我们是否应该为此在 DMZ 上创建另一个暂存数据库服务器？）。至于要转移的数量，它非常小（< 100 条记录）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:36:13.457

如果他们需要实时访问，这将是一种简单的方法：

1.  为 Web 访问创建自定义 SQL 用户帐户，并锁定对相关表或存储过程的只读访问权限。
2.  使用上面的 SQL 帐户创建一个连接到数据库的 REST Web 服务。公开可检索的每组数据的方法。
3.  确保 Web 服务通过 SSL (HTTPS) 运行并且需要用户名/密码身份验证 - 例如通过 BASIC 身份验证和每个客户端的自定义硬编码帐户。

然后，当客户需要检索数据时，他们可以访问特定的 URL 并以 CSV 格式或任何便于报告的格式接收数据。`XMLHTTPObject`此外，如果您拥有精通技术并且可以编写 VBA 宏的客户端，则可以轻松访问 REST Web 服务。

* * *

如果不需要实时数据 - 例如，如果每天一次就足够了，您可能只需要生成 .csv 输出文件并将它们托管在客户端可以通过其 Web 浏览器手动下载的位置。例如，托管在 FTP 站点或具有 BASIC 身份验证的简单 IIS 网站上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T01:45:28.387

如果不需要实时数据，另一种选择是使用 SSIS 或 SSRS 导出 excel 文件，并通过电子邮件发送给您的客户。

# jquery-ui - JQueryUI 自动完成在本地而不是在服务器上工作。(MVC 4)

> ID：16045370
> 
> 赞同：0
> 
> 时间：2013-04-16T19:21:57.923
> 
> 标签：jquery-ui, asp.net-mvc-4

经过数小时的故障排除后，jqueryui 自动完成似乎无法在我将应用程序部署到的服务器上运行，但它在我的本地计算机上运行。

我已经测试了 Ajax 调用，它们工作正常。我能够获得内容等...

我可以使用 ui 控件中的日期选择器，但不能使用自动完成功能。

可以肯定的是，我使用了问题底部的代码。此代码适用于我的本地但不适用于服务器。我假设自动完成没有正确加载。

如果您熟悉这个问题，请帮助并让我知道什么是好的选择。

我正在测试的实际页面是[http://StagKingAdmin.com](http://StagKingAdmin.com)

```
 var availableTags = [
                        "ActionScript",
                        "AppleScript",
                        "Asp",
                        "BASIC",
                        "C",
                        "C++",
                        "Clojure",
                        "COBOL",
                        "ColdFusion",
                        "Erlang",
                        "Fortran",
                        "Groovy",
                        "Haskell",
                        "Java",
                        "JavaScript",
                        "Lisp",
                        "Perl",
                        "PHP",
                        "Python",
                        "Ruby",
                        "Scala",
                        "Scheme"
                        ];
                        $("input#searchterm").autocomplete({
                            source: availableTags
                        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:35:37.137

听起来服务器上的页面加载时间比本地加载时间长，所以`.autocomplete()`调用时可能没有完全加载 DOM。

您的自动完成调用是否包含在`$(document).ready()`函数中？如果没有，它应该是。

```
$(document).ready(function() {
    $("input#searchterm").autocomplete({
       source: availableTags
    });
}); 
```

这将确保`input#searchterm`元素在`.autocomplete()`被调用时可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:58:05.183

根据我在给定的网址中看到的内容，您的问题与此问题[有关](https://stackoverflow.com/questions/10527933/autocomplete-showing-self-element-propattr-error)，

在自动完成设置之前添加以下脚本

```
jQuery.fn.extend({
     propAttr: $.fn.prop || $.fn.attr
}); 
```

还添加一个`/`之前的相对网址，例如，

```
var autoCompleteUrl_Events = '/Events/Find/'; 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-14T19:01:13.627

有同样的问题，在本地工作而不是在远程服务器上工作。当我停止在页面底部包含自动完成脚本并将其与 jquery 一起包含在其中时，`<head>`它开始工作。

# mysql - 在外部条件语句中引用（使用别名）来自嵌套 MySQL 查询的值

> ID：16045372
> 
> 赞同：1
> 
> 时间：2013-04-16T19:21:59.220
> 
> 标签：mysql, nested, conditional-statements

我正在使用嵌套查询从表中获取我需要的值，然后我需要在条件语句中使用该值，但是，每次我尝试这个时，我都会收到一个错误，指出字段列表中的未知列（格式）

```
SELECT

(SELECT format FROM competition_stages WHERE comp_id = "5" AND rid = "24") AS format,

a.tie_id, b.name AS team_a, b.team_id AS team_a_id, c.name AS team_b, c.team_id AS team_b_id, SUM(e.bonus) AS team_a_bonus, SUM(f.bonus) AS team_b_bonus,

SUM(CASE 
    WHEN (a.team_a = e.team_id AND format = "0") THEN e.score
END) as team_a_agg,

SUM(CASE 
    WHEN (a.team_b = f.team_id AND format = "0") THEN f.score
END) as team_b_agg

FROM competition_tie a

INNER JOIN teams b ON (a.team_a = b.team_id)
INNER JOIN teams c ON (a.team_b = c.team_id)

LEFT JOIN fixtures d ON (a.tie_id = d.tie_id)
LEFT JOIN fixture_scores e ON (d.fx_id = e.fx_id AND a.team_a = e.team_id)
LEFT JOIN fixture_scores f ON (d.fx_id = f.fx_id AND a.team_b = f.team_id)

WHERE a.comp_id = "5" AND a.rid = "24" AND a.season_id = "5"

GROUP BY a.tie_id

ORDER BY a.tie_id ASC 
```

当我浏览它们时，我可以在结果中获取格式列的值，但似乎我无法在查询中使用它。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:33:26.933

无需使用子查询，只需将 Competition_stages 表连接到您的查询，以便您可以直接引用格式列。假设竞争阶段表和查询中的其他表之间没有明显的关系（至少不是来自手头的信息），您可以使用您指定的两个条件加入表，如果这些条件只会产生 1 个结果比赛阶段表。像这样的东西：

```
SELECT cs.format, a.tie_id, ....
FROM competition_tie a ...
INNER JOIN competition_stages cs ON cs.comp_id = "5" AND cs.rid = "24" 
```

# git - 将两个 bash 命令组合成一个快捷方式提示

> ID：16045376
> 
> 赞同：2
> 
> 时间：2013-04-16T19:22:13.800
> 
> 标签：git, bash

我不擅长 bash，但我想编写一个快捷方式，例如“opendev”，它可以在浏览器中打开一个 url 并打开我所在的当前 git 主题分支。（只需要在 os x 上工作）。这里的灵感来自 heroku CTL 的“heroku open”。

我在这里有基础知识，但我不知道如何连接它们。

```
#This launches my default browser and opens a url
open http://branchname.dev.foobar.com
#this returns the current git topic branch name  i'm working on
git branch | grep "*" | sed "s/* //" 
```

任何帮助都会很棒，因为我失败了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T19:33:08.207

将以下内容放入您的`.bashrc`或类似的：

```
opendev() {
    open http://$(git branch | grep "*" | sed "s/* //").dev.foobar.com
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:24:04.323

```
branch=$(git branch | grep "*" | sed "s/* //")
open "http://$branch.dev.foobar.com" 
```

# sql - SQL 从存储过程中获取输出？

> ID：16045383
> 
> 赞同：0
> 
> 时间：2013-04-16T19:22:40.210
> 
> 标签：sql, return, output

刚从 SQL 开始，所以这里可能有一个非常简单的答案，但我无法从谷歌搜索中弄清楚我需要做什么。

我正在使用的数据库中有一个名为 dt_char_sp 的存储过程 - 简单地说，参数是整数形式的日期和时间，并且存储过程很好地格式化了它们。我希望它可以像这样工作：

```
EXEC dt_char_sp 20130416, 024356
go 
```

输出：

```
04/06/2013 02:43:56 
```

除了输出没有发生！我看到有一个变量声明为“@datetime datetime=NULL OUTPUT”，最终@datetime 变量填充了格式化字符串，但我想知道是否有办法获取这个输出变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:51:04.020

如果没有实际看到存储过程，我们无法确定，但听起来它正在使用输出参数。

```
DECLARE @retval As DATETIME

EXEC dt_char_sp 20130416, 024356, @datetime=@retval OUTPUT

PRINT @retval
go 
```

从客户端代码也有一种等效的方法来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:36:19.833

您需要使用[Select 语句](http://www.w3schools.com/sql/sql_select.asp)。

在查询结束时，只需选择所需的输出变量，如下所示：

```
SELECT @datetime 
```

另一种方法是使用[输出参数](http://msdn.microsoft.com/en-ca/library/ms187004%28v=sql.105%29.aspx)。像这样声明：

```
@datetime DateTime OUTPUT; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T19:25:22.643

您确定您正在做某事以获得返回值吗？如果没有，您可以选择变量

```
select @datetime 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-16T19:32:50.293

请不要用像格式化字符串这样的蹩脚的东西给 SQL Server 带来负担。对于那种事情来说太重要了。我最近经常看到这种情况，这是一个坏习惯。

请为此使用您的客户端格式化工具...

类似的东西（对于 UNIX 类型的日期）

```
DateTime dt = new DateTime("1/1/1970").AddDays(myIntDate);

Console.Writeln(dt.ToString("mm/dd/yyyy")); 
```

这有很多原因 - 性能是最重要的。您已经拥有所需的所有数据，当您真的不需要任何东西时，没有理由往返于非常昂贵的服务器。所有计算机都可以格式化日期，不要使用服务器。

顺便说一句，这是正确的答案。我认为 Stack Overflow 不应该成为如果有人问如何从桥上跳下来，我们就直接告诉他们的地方。当有人问如何使用错误的方法完成某事时，我们应该告诉他们正确的方法。

# r - XY散点图，热图带在r中的边缘

> ID：16045384
> 
> 赞同：3
> 
> 时间：2013-04-16T19:22:51.893
> 
> 标签：r, graph, ggplot2, lattice, r-grid

这里的数据和假设：

```
set.seed(1234)
myd <- data.frame (X = rnorm (100), Y = rnorm (100, 10, 3)) 
```

只是对 X 和 Y 进行分类，有时这可能与 X 和 Y 不同，并且是类别本身

```
myd$xcat <- cut (myd$X, 10)
myd$ycat <- cut (myd$Y, 10) 
```

我想制作像下面这样的漂亮图，其中类别被绘制为热图条带 ![在此处输入图像描述](https://i.stack.imgur.com/Lmpaj.jpg)

```
require(ggplot2)
ggplot(myd, aes(x=X, y=Y)) +    geom_point(shape=1)  + theme_bw() 
```

这可能是 ggplot2 或其他软件包还是需要专门的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T06:08:11.613

实现这一点的一种方法是制作三个单独的图，`ggplot2`然后使用`viewport()`并将`grid.layout()`它们排列在一起。

第一个图只包含中间部分（散点图）。`px`并且`py`是 x 和 y 轴的热图（用 制作`geom_tile()`）。最重要的部分是`theme()`在绘图中使用相同的设置（只需将 x 更改为 y）。用于`color="white"`某些元素以确保该元素有一个位置（具有正确的尺寸），但它们在绘图上不可见。

```
#Scatter plot without axis titles
p<-ggplot(myd, aes(x=X, y=Y)) +    geom_point(shape=1)  + 
  theme_bw() + theme(axis.title=element_blank())

#tile plot for the x axis
px<-ggplot(myd,aes(x=xcat,y=1,fill=xcat))+geom_tile()+
  scale_x_discrete(expand=c(0,0))+
  scale_fill_hue(h=c(0,180))+
  scale_y_continuous(expand=c(0,0),breaks=1,labels="10")+
  theme(legend.position="none",
        axis.title=element_blank(),
        axis.text.x=element_blank(),
        axis.ticks.x=element_blank(),
        axis.text.y=element_text(color="white"),
        axis.ticks.y=element_line(color="white"))

#tile plot for the y axis
py<-ggplot(myd,aes(x=1,y=ycat,fill=ycat))+geom_tile()+
  scale_y_discrete(expand=c(0,0))+
  scale_x_continuous(expand=c(0,0),breaks=1,labels="1")+
  scale_fill_hue(h=c(181,360))+
  theme(legend.position="none",
        axis.title=element_blank(),
        axis.text.y=element_blank(),
        axis.ticks.y=element_blank(),
        axis.text.x=element_text(color="white"),
        axis.ticks.x=element_line(color="white"))

#Define layout for the plots (2 rows, 2 columns)
layt<-grid.layout(nrow=2,ncol=2,heights=c(7/8,1/8),widths=c(1/8,7/8),default.units=c('null','null'))
#View the layout of plots
grid.show.layout(layt)

#Draw plots one by one in their positions
grid.newpage()
pushViewport(viewport(layout=layt))
print(py,vp=viewport(layout.pos.row=1,layout.pos.col=1))
print(p,vp=viewport(layout.pos.row=1,layout.pos.col=2))
print(px,vp=viewport(layout.pos.row=2,layout.pos.col=2)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/RGkq7.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T10:47:26.457

`base`情节中的解决方案：

```
brX <- seq(min(myd$X),max(myd$X),length=11)
brY <- seq(min(myd$Y),max(myd$Y),length=11)

layout(matrix(c(1,0,2,3),nrow=2),width=c(2,8),height=c(8,2))
par(mar=c(0,3,5,0))
plot(NA,ylim=range(myd$Y),xlim=c(0,1),axes=F,ann=F,xaxs="i")
rect(0,brY[-length(brY)],1,brY[-1], 
     col=colorRampPalette(c("red","yellow","green"))(length(brY)-1))

par(mar=c(0,0,5,5))
plot(NA,xlim=range(myd$X),ylim=range(myd$Y),ann=F,xaxt="n",yaxt="n")
abline(h=pretty(myd$Y),v=pretty(myd$X), col="grey95")
points(myd$X,myd$Y,pch=21)
axis(3)
axis(4)

par(mar=c(3,0,0,5))
plot(NA,xlim=range(myd$X),ylim=c(0,1),axes=F,ann=F,yaxs="i")
rect(brX[-length(brX)],0,brX[-1],1, 
     col=colorRampPalette(c("blue","white","red"))(length(brX)-1)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/xErMs.png)

# c++ - C++ 编译器不能选择重载运算符*

> ID：16045394
> 
> 赞同：0
> 
> 时间：2013-04-16T19:23:33.867
> 
> 标签：c++, operator-overloading

我的问题是运营商*。我有两个与 Wektor 类连接的 operator*。首先适用于所有类型名，属于 Wektor 类。

```
friend Wektor operator* (Wektor & a, const int & b) 
```

第二个仅用于字符串类型并且在 Wektor 类之外。

```
template <typename T,int Roz, typename Policy >
Wektor<std::basic_string<char>,Roz,Fast<std::basic_string<char>,Roz> > operator * (Wektor<std::basic_string<char>,Roz,Fast<string,Roz> > & a,int & b) 
```

我想要两个运算符*，其中一个专门用于字符串并且具有不同的行为。和下面的整个代码：

```
//Policy for Wektor
template<typename T,int Roz>
class Safe
{
public:
void static zeroo(T t[]){
            for(int i=0;i<Roz;++i)
            {
                t[i]=0;
            }

}
static bool isOut(int i){
    return Roz<i;
}
};

template<typename T,int Roz>
class Fast
{
public:
void static zeroo(T t[]){
}
static bool isout(int i){
    return false;
}
};

template<typename T,int Roz, typename Policy = Safe<T,Roz> >
class Wektor;

template <typename T,int Roz, typename Policy = Safe<T,Roz> >
Wektor<T,Roz,Policy> operator + (const Wektor<T,Roz,Policy> & a, const Wektor<T,Roz,Policy> & b);

template <typename T,int Roz, typename Policy >
Wektor<std::basic_string<char>,Roz,Fast<std::basic_string<char>,Roz> > operator * (Wektor<std::basic_string<char>,Roz,Fast<string,Roz> > & a, int & b);

template<typename T,int Roz, typename Policy >
class Wektor{
public:

typedef typename typy<T>::result args;
Wektor()
{
    Policy::zeroo(tab);
}
T tab[Roz];
args get(int i)
{
    if (Policy::isout(i)) return 0;
    return tab[i];
}
void set(args val,int i)
{
    if (Policy::isout(i))return;
    tab[i]=val;
}
//This operator works fine
friend Wektor operator* (Wektor & a, const int & b){
      Wektor<T,Roz,Policy> w;

      for(int i=0;i<Roz;++i)
      {
          w.set(a.get(i)*b,i);
      }
      return w;
 }

 friend Wektor operator + <> (const Wektor & a, const Wektor & b);
 };

 template<typename T, int Roz>
 Wektor<T,Roz> operator + (Wektor<T,Roz> & a,Wektor<T,Roz> & b)
 {
 Wektor<T,Roz> wynik;
 for(int i=0;i<Roz;++i)
 {
    wynik.set(a.get(i)+b.get(i),i);
 }
 return wynik;
 }
 //This operator dosent work
 template <typename T,int Roz, typename Policy >
 Wektor<std::basic_string<char>,Roz,Fast<std::basic_string<char>,Roz> > operator *  (Wektor<std::basic_string<char>,Roz,Fast<string,Roz> > & a,int & b)
{
Wektor<string,Roz,Fast<string,Roz> > wynik;
string tmp;
for(int i=0;i<Roz;++i)
{
    for(int j;j<b;++j)tmp.append("asa");
    wynik.set(tmp,i);
    tmp.clear();
}
} 
```

对于 main() 中的语句：

```
 Wektor<string,2,Fast<string,2> > str;
 str*3 
```

我在这一行得到一个错误：

```
w.set(a.get(i)*b,i); 
```

在朋友运算符 * 中，它在 Wektor 类中是完整的。

编译器说：模板参数推导/替换失败。其余的编译器注释：

*错误：与 T = std::basic_string 的 'Wektor::get(int) 中的 'operator*' 不匹配；诠释罗兹 = 2; 策略=快速，2>；Wektor::args = std::basic_string * b'*

和更多：

*注意：候选是： 注意：模板 Wektor, Roz, Fast, Roz> > operator*(Wektor, Roz, Fast, Roz> >&, int&)*

*注意：'Wektor, 2, Fast, 2> >::args {aka std::basic_string}' 不是从 'Wektor, Roz, Fast, Roz> >'|*

在这种情况下，什么意思**不是来自**？我尝试使用 Wektor 类将专门的 operator* 作为 firend，但这会产生同样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:38:00.283

正如 Daniel Frey 在他的评论中注意到的那样，这里的第一个参数`operator *`是*临时*的。

```
w.set(a.get(i)*b,i);
//    ^^^^^^^^ returns a temporary 
```

C++[不会将非常量引用绑定到临时](https://stackoverflow.com/questions/1565600/).

```
template <typename T,int Roz, typename Policy >
Wektor<std::basic_string<char>,Roz,Fast<std::basic_string<char>,Roz> > operator * 
  (Wektor<std::basic_string<char>,Roz,Fast<string,Roz> > & a, int & b); 
```

将其更改为`const`.

```
template <typename T,int Roz, typename Policy >
Wektor<std::basic_string<char>,Roz,Fast<std::basic_string<char>,Roz> > operator * 
  (const Wektor<std::basic_string<char>,Roz,Fast<string,Roz> > & a, int & b);
// ^^^^^ 
```

# mysql - 将列插入表中，使用现有列值作为现有行的默认值

> ID：16045397
> 
> 赞同：2
> 
> 时间：2013-04-16T19:23:50.290
> 
> 标签：mysql, insert

我想在现有表中添加一列。

```
ALTER TABLE statuses ADD updated int(11) default NULL 
```

上面的行将所需的列添加到我的表中，而不是 NULL 作为默认值，我想使用“created”列的值。所以每一行都会得到“更新”的列，并用它的“自己的”列“创建”填充。

我怎样才能做到这一点？

例子：

```
id - created
1  - 12345678
2  - 87654321
3  - 12121212 
```

现在插入新列“更新”，表格应该是这样的：

```
id - created - updated
1  - 12345678 - 12345678 
2  - 87654321 - 87654321
3  - 12121212 - 12121212 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T19:31:54.300

你不能，不是在一个单一的声明中。

您必须运行两个语句：

```
ALTER TABLE statuses ADD updated int(11);

UPDATE  statuses
SET     updated = created; 
```

# sql-server - 无法启动程序“DTS”OLE 已发送请求并正在等待回复

> ID：16045406
> 
> 赞同：1
> 
> 时间：2013-04-16T19:24:27.603
> 
> 标签：sql-server, ssis, odbc

尝试在 Visual Studio 中查看我的数据流选项卡时出现此错误。FWIW，这是我从另一台服务器复制的包，并试图让它在新服务器上执行。我已经更改了 SQL Server 相关连接管理器的定义，但我认为这个问题与属于 ODBC 数据源的数据流部分有关，它是从 PostgreSQL 数据库中选择数据。截断 SQL Server 目标表的前一个步骤可以毫无问题地执行。

我已经验证（32 位）ODBC 连接似乎有效。无论如何，它通过了连接测试。

FWIW，我是 SQLServer 世界的新手。我花了一些时间在虚拟服务器上构建这个包，但我正试图将它移到更大的生产服务器上。重点是，我不一定知道环境的所有细节。

ps--所有这些都在 Windows 2012 服务器上的 SQL Server BI 2012 上（最新版本，不管它叫什么）。

更新：这是错误的全文（或更完整）：

OLE 已发送请求并正在等待答复。（Microsoft Visual Studio 调试器）

* * *

节目地点：

在 System.Runtime.InteropServices.Marshal.ThrowExceptionForHRInternal(Int32 errorCode, IntPtr errorInfo) 在 System.Runtime.InteropServices.Marshal.ThrowExceptionForHR(Int32 errorCode) 在 Microsoft.DataTransformationServices.Project.DataTransformationsPackageDebugger.LaunchVsDebugger(IVsDebugger iVsDebugger, DataTransformationsProjectConfigurationOptions 选项)

# ios - 选择 DatePicker 时显示视图

> ID：16045419
> 
> 赞同：1
> 
> 时间：2013-04-16T19:25:10.690
> 
> 标签：ios, view, datepicker

我希望用户使用 DatePicker 选择日期并在新视图中显示结果。例如，如果用户从 DatePicker 中选择 1995 或 2000，当点击按钮时，应用程序将在新视图中显示结果。任何帮助或教程都会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:41:02.140

**当用户完成旋转其中一个轮子以更改日期或时间时， UIDatePicker**对象发送操作消息；关联的控制事件是`UIControlEventValueChanged`。所以在值更改后调用函数（用户完成选择日期）

```
UIDatePicker *picker = //alloc init
[picker addTarget:self action:@selector(valueChanged:) forControlEvents:UIControlEventValueChanged]

 -(void)valueChanged:(UIDatePicker *)sender{
    //change here you view
  } 
```

# java - 使用 RestFB 有多安全？

> ID：16045423
> 
> 赞同：0
> 
> 时间：2013-04-16T19:25:28.347
> 
> 标签：java, facebook, facebook-graph-api, restfb

我目前正在开发一个使用大量 Facebook 数据的 Android 应用程序。从我目前所读的所有内容来看，RestFB 似乎是在 Java 环境中使用 Facebook API 的最佳选择，但我有一个担忧：如果 Facebook 决定“阻止”这个库会发生什么？脸书能做到吗？如果发生这种情况，我的应用程序将自动停止工作。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:29:24.273

RestFB 应该与与 Facebook API 交互的任何其他选项一样安全。如果您正在构建与第三方 API 交互的应用程序，那么您将面临由于 API 格式的更改或更新而损坏的风险。然而，从 Facebook 的角度来看，“RestFB”并不是一个单一的应用程序：每个使用 RestFB 的应用程序都将被注册为不同的 Facebook API 消费者。因此，整个图书馆的访问被 Facebook 阻止的可能性极小（事实上，可能是不可能的）。

# javascript - 主干变量与页面容器。. .?

> ID：16045427
> 
> 赞同：0
> 
> 时间：2013-04-16T19:25:38.753
> 
> 标签：javascript, backbone.js

所以我继承了一些backbone.js代码，今天需要对其进行更改。编写原始代码的人正在休假。我只是勉强研究backbone.js，几乎是一个骨干新手。

**下面的代码可以正常工作并完成它的设计目的。**只有一个问题：模板文件的内容（见下文）被渲染到特定的 HTML 页面中。

**我的问题是，我不完全理解代码流程，**无法做出有根据的猜测，即如何以及在何处插入对该 HTML 页面上实际容器的引用，并让内容显示在该容器内。

我需要此函数的输出的容器的类名是`.mngmnt-main-sctn`. 这可能吗？

.

```
window.ManagementInstancesBackupView = ManagementView.extend({

  events: _.extend({
    }, ManagementView.prototype.events
  ),

  initialize: function() {
    this.model      = this.options.model
    this.collection = this.options.collection
    this.template   = _.template($('#instances-management-backup-template').html())
  },

  render: function() {
    var instances = this.collection

   // Append container and title
   var $el = this.$el.html(this.template({}))

   instances.each(function(instance) {

    //    THIS IS THE CONTAINER THAT SHOULD GET STUFF APPENDED TO:
    //    $(".mngmnt-main-sctn")

      $el.append(this.renderParent(instance));

      instance.get('nic').each(function(nic) {
        $el.append(this.renderChild(nic));
      }, this)
    }, this)

    return this
  },

  renderParent: function(instance) {
    return new ManagementInstancesBackupParentView({model: instance}).render().$el
  },

  renderChild: function(nic) {
    return new ManagementInstancesBackupChildView({model: nic}).render().$el
  }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:21:35.197

我相信你所问的可能是这样的。

```
window.ManagementInstancesBackupView = ManagementView.extend({

  el: ".mngmnt-main-sctn"

  [...code excluded...]

}); 
```

我们正在覆盖 el 属性，这意味着当调用此行时

```
var $el = this.$el.html(this.template({})) 
```

this.$el 将引用您指定的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:25:35.030

雅各布，再次感谢您对此进行调查。

我找到了一个解决方案，现在我肯定会访问其他的backbonejs 教程。在代码中，我可以像这样添加选择器：

```
 // Append container and title
  var $el = this.$el.html(this.template({})).find('.mngmnt-main-sctn') 
```

. 我总是对这样的事情感到困惑。您找不到任何解决问题的答案，然后您尝试了 1,000 种不同的方法。. . 然后解决方案看起来就这么简单，这样的经历让我总觉得有点傻。

# php - 将上传的文件移动到根目录

> ID：16045430
> 
> 赞同：0
> 
> 时间：2013-04-16T19:25:44.577
> 
> 标签：php, file, upload, directory, root

我正在为我建立的网站制作内容管理系统。我希望系统是离散的，所以我让它只存在于一个名为“_admin.php”的 PHP 文件中。此文件中显示的所有内容都来自我存储在一个名为“admin”的子文件夹中的内容（不碍事）。

网站上使用的照片存储在一个“资产”文件夹中，该文件夹也位于根目录中。管理页面可以直接访问 assets 文件夹，因为它也在根目录中。但是上传文件脚本位于“admin”文件夹中的几个目录中，我希望将上传的文件存储在 assets 文件夹中。

该`move_uploaded_file()`方法采用文件的目标路径，但它需要直接路径。我尝试使用`$_SERVER['DOCUMENT_ROOT']`，但生成的目录似乎没有我的任何文件。如果我`getcwd()`在根目录中的文档中使用，它会返回我可以使用的实际文件结构。如果我回显出来也是一样`__FILE__`。但是我已经对这个 SERVER 常量进行了很多试验，但我无法用它找到我的网站。

由于上传图像的脚本被称为表单操作，因此我无法将根目录作为变量传递。

不太确定我做错了什么，有人有什么想法吗？

谢谢

编辑 **

```
//See if Files array contains new files
if (!empty($_FILES['file'])){

    foreach($_FILES['file']['name'] as $key => $name){

        $error = $_FILES['file']['error'][$key];
        $temp_name = $_FILES['file']['tmp_name'][$key];
        $dir = getcwd();
        $move_file = move_uploaded_file($temp_name, "$dir/temp/$name");

        if (($error == 0) && ($move_file)){

            $uploaded[] = $name;

        }else{

            die($error);

            }   

        }

        echo __FILE__;
        echo "<br/>";
        echo __DIR__;
        echo "<br/>";
        echo $_SERVER['DOCUMENT_ROOT'];
        exit();

    } 
```

我目前正在使用的上传脚本。该脚本工作正常，因为我将图像存储在与脚本相同的目录中。我只是不知道如何将它们存储在我的根目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:55:21.773

如果可以的话，我会指定完整的绝对文件路径。我`define()`在我的 CMS 的配置文件中设置了这个。在安装时，您会弄清楚该路径是什么并设置它。

```
define("BASEFILEPATH", "/home/.../[webroot]");   // The base file path for the website 
```

您可能正在寻找更通用的东西，但您可以有某种安装脚本，用户可以在其中将基本信息输入到表单中，例如用户名、密码等，您也可以让他们输入此路径。

# php - 在多维数组中查找项目

> ID：16045435
> 
> 赞同：-4
> 
> 时间：2013-04-16T19:26:01.233
> 
> 标签：php

我有一个包含以下内容的数组：

```
$items = array(
 'desk' = array('pen', 'pencil', 'ruler'),
 'wardrobe' = array('suit', 'shirt', 'tie')
); 
```

`wardrobe`在数组中查找项目的最简单方法是什么？

即我需要返回一个带有“西装、衬衫和领带”的数组

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:30:40.093

您可以使用以下两个功能之一：

[`in_array()`](http://php.net/manual/en/function.in-array.php)

```
bool in_array ( mixed $needle , array $haystack [, bool $strict = FALSE ] ) 
```

除非设置了严格，否则使用松散比较在 haystack 中搜索针。

[`array_search()`](http://www.php.net/manual/en/function.array-search.php)

```
mixed array_search ( mixed $needle , array $haystack [, bool $strict = false ] ) 
```

在干草堆中寻找针头。

# python - Django QuerySet（或 Python 列表）的均匀分布切片

> ID：16045437
> 
> 赞同：1
> 
> 时间：2013-04-16T19:26:09.977
> 
> 标签：python, django, slice

我想从数据库中获取一些值并将其中的“n”个切片，比如在图表上绘制。

我从 Django QuerySet 开始，但我不认为这是我可以通过 ORM 减少的东西，所以我可以获取值列表，然后使用 Python 中可用的任何库来获取示例的数据。

因此，如果我有一个包含一千个项目的数据集，我希望能够从该数据集中获取均匀分布的非随机样本范围，始终包括起点和终点，然后均匀分布其间的元素。

例如，如果：

```
data = [x for x in xrange(0, 777)] 
```

我想要其中的十个，我怎么能得到一个不是每 10 个项目的列表，而是恰好十个列表项目均匀分布在列表中的元素总数上？

我正在努力：

```
number_of_results = 10
step = len(data) / number_of_results
data[::step] 
```

但我希望有一种更有效的方法（也是一种保持终点并准确返回 number_of_results 个项目的方法，即使项目之间的步骤不能完全均匀）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:39:44.667

可能有更有效的方法，但这只是一个想法：

```
qs_ids = list(ModelA.objects.order_by('id').values_list('id', flat=True))

number_of_results = 10
step = len(qs_ids) / number_of_results
ids = data[::step]

qs = ModelA.objects.filter(id__in=ids).order_by('id') 
```

# ios - iOS 程序在应用程序中显示由选项卡分隔的数据库内容

> ID：16045439
> 
> 赞同：0
> 
> 时间：2013-04-16T19:26:25.193
> 
> 标签：ios, database, tabs, nsmutablearray

我有一个程序连接到 MAMP 服务器并选择我的数据库并在 Xcode 模拟器中显示内容。现在我有 2 个选项卡，两者的数据相同。我希望选项卡能够分隔要在每个选项卡中显示的数据类型。（一个标签应该显示酿酒葡萄的类型，另一个显示葡萄酒国家）

我认为我必须创建一个提取数据的类（NSObject 的子类），然后创建另一个具有可变数组的视图控制器，该数组保存每个选项卡所需的数据，但我该怎么做呢？如何创建 MutableArray？

这是我的 TableViewController.m 中的代码，它使用 JSON 连接到我的数据库：
- (void)viewDidLoad { [super viewDidLoad]; NSURL *url = [NSURL URLWithString:@"http://[localhost]:8888/wine.php"]; // 修改它以匹配您的网址。

```
NSString *jsonreturn = [[NSString alloc] initWithContentsOfURL:url]; // Pulls the URL
NSLog(jsonreturn); // Look at the console and you can see what the restults are

NSData *jsonData = [jsonreturn dataUsingEncoding:NSUTF32BigEndianStringEncoding];
NSError *error = nil;

// In "real" code you should surround this with try and catch
NSDictionary * dict = [[CJSONDeserializer deserializer] deserializeAsDictionary:jsonData error:&error];
if (dict)
{
    rows = [[dict objectForKey:@"wine"] retain];

}
NSLog(@"Array: %@",rows);

[jsonreturn release]; 
```

}

然后我为 tableview 创建了另一种方法：

# pragma mark - 表视图数据源

*   (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section { return [rows count]; }

// 自定义表格视图单元格的外观。- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

```
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
}

// Configure the cell.
NSDictionary *dict = [rows objectAtIndex: indexPath.row];

//cell.textLabel.text = [dict objectForKey:@"id"];
//cell.textLabel.text = [dict objectForKey:@"wineColor"];
//cell.textLabel.text = [dict objectForKey:@"wineGrape"];
cell.textLabel.text = [dict objectForKey:@"wineCountry"];
cell.detailTextLabel.text = [dict objectForKey:@"id"];

return cell; 
```

}

有了这个，相同的数据（葡萄酒国家）显示在两个葡萄和国家选项卡中。如何创建一个可变数组来获取每个选项卡中应显示的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:30:57.297

您需要第二个（葡萄）视图控制器来实现它自己的 tableview 的 tableView 数据源和委托方法，但您不需要另一个数组，您可以使用 JSON 字典，但将正确的文本添加到单元格内的标签中以获取葡萄（在 cellForRowAtIndexPath UITableView 数据源方法中）。您将使用上面当前注释掉的行来填充“葡萄”表视图的单元格中的标签：

```
//cell.textLabel.text = [dict objectForKey:@"wineColor"];
//cell.textLabel.text = [dict objectForKey:@"wineGrape"]; 
```

您可以添加自定义 UITableViewCell 或使用字幕样式并将字幕设置为彩色。

# java - 如何检查两个对象何时发生碰撞

> ID：16045444
> 
> 赞同：-2
> 
> 时间：2013-04-16T19:26:44.403
> 
> 标签：java, android, collision

我正在制作的一个小游戏中有两个动态图像视图，无论如何它们总是在同一个 Y 中，所以我只想检查它们何时在同一个 x 有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:35:08.750

```
int [] object1Position = new int[2];  // declare int array for x,y object position
int [] object2Position = new int[2];  // the same

imageView1.getLocationOnScreen(object1Position); // get imageView1 position
imageView2.getLocationOnScreen(object2Position); // get imageView2 position

public boolean checkColisionOnXAxis()
{
    if (object1Position[0] == object2Position[0] )
       return true;
    return false;
} 
```

只是一个想法..但是您每次都需要获取对象的当前位置..所以您需要计时器或类似的东西来获取当前位置

# ios - 使用我自己的服务器验证 iOS 应用内购买

> ID：16045447
> 
> 赞同：0
> 
> 时间：2013-04-16T19:26:46.733
> 
> 标签：ios, security, https, in-app-purchase, receipt

我想使用我自己的服务器验证 iOS 应用内购买。iOS 应用程序将与我的服务器通信，而我的服务器又将与 Apple 的服务器通信以确定 IAP 是否有效。我对网络很陌生，所以我有一个基本问题：**如何确保我的 iOS 应用程序安全地与我的服务器通信？**

我想该应用程序将通过 https 进行通信，但我不知道它是如何工作的。非常感谢有关在两者之间设置 https 通信（或安全通信的替代方法）的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:47:32.760

劳森有一点。您不能让您的服务器直接在 AppStore 上执行购买。这必须由您的应用程序执行。

它应该从您的服务器请求可用的产品标识符，然后将其发送`SKProductsRequest`到 AppStore。如果需要，它会通过应用商店处理购买，并通过发送所谓的收据告诉您自己的服务器。服务器可以直接在 AppStore 验证收据。但这是服务器在 AppStore 中唯一可以自己做的事情。

您可以在此处阅读有关它的更多信息：[应用内购买概述：服务器产品模型](http://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/StoreKitGuide/APIOverview/OverviewoftheStoreKitAPI.html#//apple_ref/doc/uid/TP40008267-CH100-SW14)

至于您的应用程序和服务器之间的连接，我认为您没有太多（合理的）选择，只能使用 SSL。几乎任何更安全的东西都需要 PKI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:52:20.130

很抱歉之前的答案......我误读了你的问题。您可以让您的服务器向 Apple 的服务器发送一个 POST 请求，然后解析响应。

[https://developer.apple.com/library/content/releasenotes/General/ValidateAppStoreReceipt/Chapters/ValidateRemotely.html](https://developer.apple.com/library/content/releasenotes/General/ValidateAppStoreReceipt/Chapters/ValidateRemotely.html)

# powershell - 如何使用 PowerShell 更改 cmd 的当前目录？

> ID：16045457
> 
> 赞同：1
> 
> 时间：2013-04-16T19:27:18.917
> 
> 标签：powershell, command-line, windows-8, command-line-interface

我使用 读取了一些文件`PowerShell`，并相应地更改了当前目录，但我所能做的就是更改 current`PowerShell`的当前目录，而不是调用者的目录（调用该 ps1 文件的 cmd.exe 环境）。我尝试过的事情：

```
powershell ch-dir.ps1 | cd 
```

（显然，这是行不通的，因为`CD`是内部命令）

```
powershell cd $myDir 
```

（更改当前目录`PowerShell`，但是当脚本退出时，`cmd`环境仍然在原始目录中）

我真的希望我不需要找到脚本的调用者进程（cmd），并强制更改它的 cur-dir ......（或者更糟 - 将我想要的目录保存在一些 env-var 中然后`cd %my_var%`因为它需要两行命令）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T22:39:48.923

我不确定这是否满足您的需求，但如果您设置它以便您的 powershell 脚本的唯一输出是您想要的新工作目录，您可以这样做：

```
c:\>for /F %i IN ('powershell -noprofile -command "write-output 'c:\users'" ') DO @cd %i
c:\Users> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:41:01.583

cmd 提示符正在托管您的 powershell 会话，除非您能找到一种方法将退出代码返回到提示符，该提示符将（在退出代码 99999 上）将目录更改为（预定义值，切换？）。就 powershell 而言，它们是不同的过程。

这是一个很好的示例供您尝试：打开 cmd 提示符。打开任务管理器，找到 cmd.exe 在你的 cmd 提示符下键入 Powershell 查看 powershell 作为不同的进程（检查 PID。）结束 powershell 进程。观察会发生什么。

或者，如果您需要根据您的 powershell 脚本中的逻辑在特定目录中从 cmd 运行某些东西，您可以使用`cmd /c`Powershell 中的 from 调用它。

# php - 从 mySQL 数据库取回信息时遇到问题

> ID：16045466
> 
> 赞同：1
> 
> 时间：2013-04-16T19:28:00.113
> 
> 标签：php, mysql

我有这个在另一个网站上工作，但修改它给我带来了问题，我看不出它认为哪里有额外的参数。

我稍后会添加 Javascript，但我需要能够从下拉菜单中进行选择并从数据库中打印相应的信息。我的PHP代码如下：

```
 include('definitions.php');

 $con=mysqli_connect(DB_HOST,DB_USER,DB_PASS,DB_NAME);
 // Check connection
 if (mysqli_connect_errno())
    {
   echo "Failed to connect to MySQL: " . mysqli_connect_error();
    }

 echo "These are the matches for the search";
 echo "<br>";

 $query="SELECT name,email,town,location,gmapslink FROM users WHERE `town` = '?'";
 $stmt = mysqli_prepare($con, $query);

 mysqli_stmt_bind_param($stmt, "s", $_POST['select1']);
 var_dump($_POST);

 mysqli_stmt_execute($stmt);

 /* bind variables to prepared statement */
    mysqli_stmt_bind_result($stmt, $col2, $col3, $col5, $col8, $col9);

 while(mysqli_stmt_fetch($stmt))
   {
    printf("Name:%s\t Email:%s\t Town:%s\t Location:%s\t Google Maps Link:%s\t", $col2,    $col3, $col5, $col8, $col9);
   echo "<br>";

   }

    /* close statement */
      mysqli_stmt_close($stmt);

 /* close connection */
 mysqli_close($con);

 ?> 
```

我从网站上得到的回复如下。这些是搜索的匹配项：

PHP 错误信息：

> 警告：mysqli_stmt_bind_param() [function.mysqli-stmt-bind-param]：变量数与第 18 行 /home/a5839517/public_html/search.php 中准备好的语句中的参数数不匹配

免费虚拟主机：

> array(3) { ["county"]=> string(15) "爱尔兰以外" ["select1"]=> string(12) "Ballincollig" ["select"]=> NULL }

`town`在数据库上运行 SQL 代码可以正常工作，但在这种情况下，要使其正常工作，我必须在and周围添加引号`?`。

任何想法我的问题是参数似乎都是正确的。

从调用上述 php 的原始文件中添加了编辑：

```
 <form action="search.php" method="post">
 County <select name="county">
 <option>   Outside Ireland </option>
 <option>   Antrim  </option>
 <option>   Armagh  </option>

 </select>
 <br>
 Name of Book
 <?php
 mysql_connect(DB_HOST,DB_USER,DB_PASS) or die("Connection Failed");
 mysql_select_db(DB_NAME)or die("Connection Failed");
 $query = "SELECT DISTINCT town FROM users";
 $result = mysql_query($query);
 ?>
 <select name="select1">
 <?php
 while ($line = mysql_fetch_array($result, MYSQL_ASSOC)) {
 ?>
 <option value="<?php echo $line['town'];?>"> <?php echo $line['town'];?> </option> 
 <?php
 }
 ?>
 </select>
 <input type="submit">
 </form> 
```

上面的代码已更正，以在反引号中包含 select1 语句和列名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:31:58.237

试试吧，不要在城镇周围引用引号，而是在城镇周围使用反引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:03:52.057

问题是，正如评论中的几个人所说，你正在传递`null`给`mysqli_stmt_bind_param`.

`var_dump`确实清楚地表明您应该使用 的值`$_POST['select1']`。为了验证，也许不是转储数组的内容，而是打印/回显第19 行`$_POST`的返回值*也可能*非常有用。`mysqli_stmt_error()`

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T19:43:03.650

不要在 ? 和你的陈述中的城镇：

```
$query="SELECT name,email,town,location,gmapslink FROM users WHERE 'town' = '?'"; 
```

它应该是

```
$query="SELECT name,email,town,location,gmapslink FROM users WHERE town = ?"; 
```

town 是一个列名，不应被引用；? 是被 mysql 接口替换的特殊字符。*

# excel - 有宏循环，需要油门，只有在按下新按钮时才移动到下一个 i

> ID：16045467
> 
> 赞同：1
> 
> 时间：2013-04-16T19:28:05.597
> 
> 标签：excel, vba

几乎我有一个想要运行的循环，但是我不希望它进入下一个“i”，直到按下按钮。我的代码如下。我相信我的麻烦是“If GoGo”的位置，但我在很多地方都试过了。

```
Sub GoGo()
    Public GoGo As Boolean
    GoGo = True
End Sub

Sub Runn()
    Dim lastrow As Long, i As Long

    For i = 23 To 32
        DoEvents
        If GoGo = True Then
            If Cells(i, 1) <> 0 Then
                 Range("B5").Value = Cells(i, 2).Value
                 Range("E5").Value = Cells(i, 3).Value
                 Range("E11").Value = Range("C33").Value
                 Application.Run ("Realcount")
                 Application.Run ("Realcount2")
            End If
        End If
    Next i
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:32:18.667

这是你正在尝试的吗？

```
Public GoGo As Boolean

Sub GoGoProc()
    GoGo = True
End Sub

Sub Runn()
    Dim lastrow As Long, i As Long

    i = 23

    Do
        DoEvents
        If GoGo = True Then
            If Cells(i, 1) <> 0 Then
                Range("B5").Value = Cells(i, 2).Value
                Range("E5").Value = Cells(i, 3).Value
                Range("E11").Value = Range("C33").Value
                Application.Run ("Realcount")
                Application.Run ("Realcount2")
            End If
            i = i + 1
            GoGo = False
        End If
    Loop
End Sub 
```

**跟进（来自评论）**

我能想到的最好方法不是使用循环，而是使用带有按钮的无模式用户表单（*以便您`Workbook/Worksheet`同时使用*） 。`Next`该`Next`按钮将增加行值，然后运行代码。这样，如果您不得不离开去喝杯咖啡，您就不会让 Excel 忙碌；）

创建应该如下所示的用户表单（未测试）

![在此处输入图像描述](https://i.stack.imgur.com/DFiwP.png)

将此代码粘贴到用户表单中

```
'~~> Next Button
Private Sub CommandButton1_Click()
    Range("B5").Value = Cells(rw, 2).Value
    Range("E5").Value = Cells(rw, 3).Value
    Range("E11").Value = Range("C33").Value

    Application.Run ("Realcount")
    Application.Run ("Realcount2")

    rw = rw + 1
End Sub

'~~> Canecel Button
Private Sub CommandButton2_Click()
    Unload Me
End Sub 
```

创建一个模块并将此代码粘贴到那里

```
Public rw As Long

Sub Launch()
    rw = 23
    UserForm1.Show vbModeless
End Sub 
```

要运行您的代码，您可以`Sub Launch()`直接运行或在工作表上创建一个命令按钮（*表单控件 - 我猜这就是您正在使用*的）并分配`Sub Launch()`给它。

# jquery - MVC jquery fileupload 传递参数

> ID：16045471
> 
> 赞同：2
> 
> 时间：2013-04-16T19:28:20.123
> 
> 标签：jquery, asp.net-mvc, file-upload, multifile-uploader, jquery-file-upload

嗨，我如何在 mvc 中使用 jquery fileupload 传递附加参数，代码如下所示：

```
<label class="imgIcon">
            <span><input type="file" id="fileupload" name="files" multiple="multiple" /></span>
        </label>

$('#fileupload').fileupload({
            dataType: 'json',
            url: '@Url.Action("index")',
            done: function (e, data) {
                $.each(data.result, function (index, file) {
                    $('#homeImg').attr("src","http://localhost:53655/Upload/HomeImages/" + file.name);
                });
            } 
        }); 
```

并在控制器中

```
 [HttpPost]
            public ActionResult Index(IEnumerable<HttpPostedFileBase> files)
            {
                foreach (var file in files)
                {
                    var filename = Path.Combine(Server.MapPath("~/Upload/HomeImages"), file.FileName);
                    file.SaveAs(filename);
                }
                return Json(files.Select(x => new { name = x.FileName }));
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T22:14:08.740

好的，我找到了答案，添加`formData : {name: value}`, 请求并将方法的签名更改为采用这些参数的方法的签名，`IEnumerable<HttpPostedFileBase> files, FormCollection forms` 然后采用这些附加值的形式。

# android - ProgressDialog 和 AsyncTask 在异常行为下失败

> ID：16045472
> 
> 赞同：0
> 
> 时间：2013-04-16T19:28:20.980
> 
> 标签：android, android-asynctask, android-progressbar

我有一个 AsyncTasc，它打开了 ProgressDialog，一切正常，但经过一段时间的异常行为应用程序失败。我知道，该用户永远不会这样做。但对于良好的测试是必要的尝试所有。

代码：

```
import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.DialogInterface;
import android.content.DialogInterface.OnCancelListener;
import android.util.Log;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {
    ProgressDialog mProgressDialog;
    GetSubs gs;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mProgressDialog = new ProgressDialog(MainActivity.this);
        mProgressDialog.setMessage("Loading...");
        mProgressDialog.setIndeterminate(false);
        mProgressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        mProgressDialog.setOnCancelListener(new OnCancelListener() {

            @Override
            public void onCancel(DialogInterface dialog) {
                Log.d("Called on Cancel", " Listener");
                gs.cancel(false);
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public void Clicked(View view) {
        gs = new GetSubs();
        gs.execute();
    }

    public class GetSubs extends AsyncTask<Void, Void, String> {

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            mProgressDialog.show();
            Log.d("onPreExecute", " in AsyncTasc");
        }

        @Override
        protected String doInBackground(Void... params) {
            for (int i = 0; i < 5; i++) {
                try {
                    Thread.sleep(2000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                if (isCancelled()) break;
            }
            return null;
        }

        @Override
        protected void onCancelled() {
            // TODO Auto-generated method stub
            super.onCancelled();
            Log.d("onCancelled", " in AsyncTasc");
        }

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);
            mProgressDialog.dismiss();
            Log.d("onPostExecute", " in AsyncTasc");

        }

    }

} 
```

日志猫：

```
04-16 21:14:21.053: E/AndroidRuntime(28767): FATAL EXCEPTION: main
04-16 21:14:21.053: E/AndroidRuntime(28767): java.lang.IllegalArgumentException: View not attached to window manager
04-16 21:14:21.053: E/AndroidRuntime(28767):    at android.view.WindowManagerImpl.findViewLocked(WindowManagerImpl.java:751)
04-16 21:14:21.053: E/AndroidRuntime(28767):    at android.view.WindowManagerImpl.removeView(WindowManagerImpl.java:474)
04-16 21:14:21.053: E/AndroidRuntime(28767):    at android.view.WindowManagerImpl$CompatModeWrapper.removeView(WindowManagerImpl.java:163)
04-16 21:14:21.053: E/AndroidRuntime(28767):    at android.app.Dialog.dismissDialog(Dialog.java:348)
04-16 21:14:21.053: E/AndroidRuntime(28767):    at android.app.Dialog$1.run(Dialog.java:139)
04-16 21:14:21.053: E/AndroidRuntime(28767):    at android.app.Dialog.dismiss(Dialog.java:333)
04-16 21:14:21.053: E/AndroidRuntime(28767):    at com.example.getusersubs.MainActivity$GetSubs.onPostExecute(MainActivity.java:82)
04-16 21:14:21.053: E/AndroidRuntime(28767):    at com.example.getusersubs.MainActivity$GetSubs.onPostExecute(MainActivity.java:1)
04-16 21:14:21.053: E/AndroidRuntime(28767):    at android.os.AsyncTask.finish(AsyncTask.java:602)
04-16 21:14:21.053: E/AndroidRuntime(28767):    at android.os.AsyncTask.access$600(AsyncTask.java:156)
04-16 21:14:21.053: E/AndroidRuntime(28767):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
04-16 21:14:21.053: E/AndroidRuntime(28767):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-16 21:14:21.053: E/AndroidRuntime(28767):    at android.os.Looper.loop(Looper.java:154)
04-16 21:14:21.053: E/AndroidRuntime(28767):    at android.app.ActivityThread.main(ActivityThread.java:4945)
04-16 21:14:21.053: E/AndroidRuntime(28767):    at java.lang.reflect.Method.invokeNative(Native Method)
04-16 21:14:21.053: E/AndroidRuntime(28767):    at java.lang.reflect.Method.invoke(Method.java:511)
04-16 21:14:21.053: E/AndroidRuntime(28767):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-16 21:14:21.053: E/AndroidRuntime(28767):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-16 21:14:21.053: E/AndroidRuntime(28767):    at dalvik.system.NativeStart.main(Native Method) 
```

怎么了？感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:36:43.640

改变：

```
 @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
        mProgressDialog.dismiss();
        Log.d("onPostExecute", " in AsyncTasc");

    } 
```

到

```
 @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
        if(mProgressDialog != null && mProgressDialog.isShowing()){
                mProgressDialog.dismiss();
        }
        Log.d("onPostExecute", " in AsyncTasc");

    } 
```

问题是您试图关闭进度对话框而不检查它是否显示，用户可以通过按轻松取消该对话框`backKey`。

[您仍然可以通过将Cancelable](http://developer.android.com/reference/android/app/Dialog.html#setCancelable%28boolean%29)设置为 false来强制用户等待对话框。这样后退键将不起作用。

# javascript - 从json中获取特定数据

> ID：16045473
> 
> 赞同：3
> 
> 时间：2013-04-16T19:28:21.607
> 
> 标签：javascript, jquery, json

我有一个包含一些 json 数据的变量 json。我正在尝试检索该数据的特定部分。我可以使用如下所示的索引来做到这一点：

```
var newdata = json[listid].Taxonomies[0]; 
```

但是我希望能够使用名称检索数据...例如，我想获取数据

```
json[listid].Taxonomies[?].InternalName = 'ABC' 
```

而且我不知道“？”的价值

有没有一种方法可以在不对分类法进行每个循环的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:41:09.640

这不能在没有循环的情况下完成，但是存在的库可以隐藏你的循环。

例如，使用[JSPath](https://github.com/dfilatov/jspath)您可以找到该`InternalName`属性的每个实例，而不管它的嵌套有多深：

```
> var json = { 1: { Taxonomies: [ { InternalName: 'ABC' } ] }}
> JSPath.apply('..InternalName', json);
["ABC"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:55:18.013

有人建议使用 linqjs，如果您需要大量 JSON 查询，这可能没问题。但是，对于这个问题，您可以使用[Array.filter](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)来指定要查找的项目。显然，引擎盖下仍然有一个循环。

```
var matches  = json[listid].Taxonomies.filter(function(obj) {
    return obj.InternalName === "ABC";
})

console.log(matches[0]); 
```

[http://jsfiddle.net/MC94q/](http://jsfiddle.net/MC94q/)

请注意，如果您担心性能，您应该使用对象而不是数组来表示数据，并且可以通过您将要搜索的属性对其进行键控。

如果我需要在数组上多次搜索，我使用的一个有用的功能如下。这会将数组转换为无需循环即可访问的映射。如果您担心性能，请尽可能以该格式生成数据。

```
/**
 * Creates a map by the given property to allow fast searches
 * @param {object[]} arr Array that we want to create a map from
 * @param {string} keyProp The property to key by
 * @param {boolean} [allowDuplicates] If this is true, the value
 *        of each key in the returned object will be an array with 
 *        all matches
 * @return A map keyed by the requested property. If the parameter 
 *         allowDuplicates is falsy, key property collisions will 
 *         overwrite the previous value. If the allowDuplicates is true,
 *         the map will have as its value an array of objects for the given key
 *
 * Example: Given the following array: arr=[{a:1, b:2}, {a:1, b:3}, {a:3, b:4)]
 *   The call to mapFromArray(arr, 'a') returns the following
 *          { 1: {a:1, b:3}, 3: {a:3, b:4} }
 *   Notice that {a:1,b:2} is not in the returned map because it has the 
 *   same value in the key property 'a' as {a:1, b:3}, which wins out 
 *   since it's later.
 *
 *   Calling  mapFromArray(arr, 'a', true) returns the following
  *         { 1: [{a:1, b:2}, {a:1, b:3}], 3: [{a:3, b:4}] }
 */
function mapFromArray(arr, keyProp, allowDuplicates) {
    var map = {};
    for (var i = 0, ln = arr.length; i < ln; i++) {
        if (!allowDuplicates) {
            // No duplicates allowed, may be overwriting an existing value
            map[arr[i][keyProp]] = arr[i];
        } else {
            // Duplicates are allowed, create array of matching objects
            // Ext.Array.push creates a one item array if its argument is
            // not already an array, otherwise, it pushes and returns the array
            map[arr[i][keyProp]] = Ext.Array.push(map[arr[i][keyProp]], arr[i]);
        }
    }
    return map;
} 
```

因此，假设您想搜索具有`InternalName`“ABC”“DEF”“GHI”之一的分类法，您将执行以下操作：

```
var map = mapFromArray(json[listid].Taxonomies, "InternalName");
var ABC = map['ABC'], DEF = map['DEF'], GHI = map['GHI']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T19:39:46.930

```
var newdata = json[listid].Taxonomies.filter(function(el){
  return el.InternalName === "ABC";
})[0]; 
```

应该涵盖这样的对象的第一次出现。如果你想要一个包含所有出现的数组，你可以`[0]`在最后删除。

请注意，我假设一个嵌套级别，因为这就是问题的表述方式。如果您需要在任意深度数据结构中查找属性，这里的其他一些库可能更有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T19:48:18.103

首先想到的是 linqjs ( [http://linqjs.codeplex.com/](http://linqjs.codeplex.com/) )。这是给定您输入的示例。

```
var jsonArray = [
    { "listid": 1, 
     Taxaonomies:
        [ 
            { "id": 100, "InternalName": "d_linq" },
            { "id": 200, "InternalName": "fred" }
        ]
    },
    { "listid": 2, 
        Taxaonomies:
        [ 
            { "id": 100, "InternalName": "asdf" },
            { "id": 200, "InternalName": "qwer" }
        ]
    }
];

var queryResult = Enumerable.From(jsonArray)
    .Where(function (x) { 
        return Enumerable.From(x.Taxaonomies).Any(function (y) { return y.InternalName == "fred" }) 
    })
    .ToArray();

console.log(queryResult); 
```

看到这个小提琴：http: [//jsfiddle.net/alexdresko/3zsy9/](http://jsfiddle.net/alexdresko/3zsy9/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T20:43:11.300

您可以使用 JQuery Javascript 库将 JSON 解析为对象。从那里您可以使用点语法访问属性。

[http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

```
var obj = jQuery.parseJSON('{"name":"Bob"}');
alert(obj.name === "Bob"); 
```

# python-3.x - 我可以将 matplotlib 中的等高线图转换为可以在 AutoCAD 中导入和编辑的格式吗？

> ID：16045474
> 
> 赞同：1
> 
> 时间：2013-04-16T19:28:27.380
> 
> 标签：python-3.x, matplotlib, autocad

我在 Python 3.3 中编写了一个脚本，它从文本文件中读取位置（x，y 坐标）和风险值，并使用 matplotlib 保存生成的等高线图。我的公司需要能够在 AutoCAD 中编辑轮廓。不幸的是，我对 AutoCAD 的了解非常有限，而且我公司中了解 AutoCAD 的人员对生成等高线图知之甚少。

如何创建可以在 AutoCAD 中导入的等高线图？我目前的想法是，我应该将绘图保存为 svg 文件并将其转换为 AutoCAD 可以打开的文件，或者为 AutoCAD 安装一个插件，使其能够打开 matplotlib 可以保存的格式之一。我已经看到[了这个问题](https://stackoverflow.com/questions/3837777/svg-2-dxf-conversion)，但这并不完全适合我的需求。

*编辑*

我尝试将绘图保存为 SVG 文件，在[Inkscape](http://inkscape.org/)中打开它，然后将其保存为 DXF，但它不保存轮廓颜色信息，并且无论如何任务都需要自动化。轮廓颜色信息对于保留很重要，因为颜色表示风险的数量级。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:14:10.510

如果您可以生成 postscript 文件（matplotlib 可以创建 pdf 对吗？），您也许可以从命令行使用[pstoedit](http://www.pstoedit.net/)将其转换为 dxf。

或者，您可以使用 Illustrator（非免费）或 Inkscape（免费）将 svg 转换为 dxf。互联网上有一些普遍的谣言说 Inkscape 有时会将贝塞尔曲线变成直线，但我还没有检查这是否仍然正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T21:33:27.720

我最终让我的绘图程序**创建了一个非常基本的 Autocad 脚本**。我提到了[这个](https://stackoverflow.com/questions/5666056/matplotlib-extracting-data-from-contour-lines)关于从等高线图中提取 x,y 数据以编写 Autocad 脚本的问题。以下是相关功能：

```
def make_autocad_script(outfile_name, contour):
    ''' 
    Creates an Autocad script which contains polylines for each contour.
    Args
    outfile_name: the name of the Autocad script file.
    contour: the contour plot that needs to be exported to Autocad.
    '''

    with open(outfile_name, 'w', newline='') as outfile:
        writer = csv.writer(outfile, delimiter=',', )
        # each collection is associated with a contour level    
        for collection in contour.collections:

            # If the contour level is never reached, then the collection will be an empty list.
            if collection:
                # Set color for contour level
                outfile.write('COLOR {}\n'.format(random.randint(1,100)))
                # Each continuous contour line in a collection is a path.
                for path in collection.get_paths():

                    vertices = path.vertices

                    # pline is an autocad command for polyline.  It interprets
                    # the next (x,y) pairs as coordinates of a line until
                    # it sees a blank line.
                    outfile.write('pline\n')
                    writer.writerows(vertices)
                    outfile.write('\n') 
```

我发送我需要`make_autocad_script`的绘图，然后在 Autocad 中导入脚本`outfile`。`contour`这会将每个轮廓绘制为随机颜色，但可以用您想要的任何颜色替换。

# vb.net - 在类的函数中使用颜色作为可选参数

> ID：16045479
> 
> 赞同：11
> 
> 时间：2013-04-16T19:28:43.140
> 
> 标签：vb.net, colors, optional

如何在某些函数或子函数中声明可选颜色参数，就像我以正常方式那样（我的意思是为该可选参数提供一些默认颜色），因为 vb.net 编译器抱怨其中存在一些错误代码。我该如何解决这个问题。下面的示例代码：

```
Public Shared Function SomeFunction(ByVal iParam As Integer, Optional ByVal oColor As Color = Color.Black)

        End Function 
```

编译器不接受 '=Color.Black'

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-16T19:44:01.577

MSDN 说关于Visual Basic 的[可选参数](http://msdn.microsoft.com/en-us/library/09yx51zh.aspx)

> 对于每个可选参数，您必须指定一个**常量**表达式作为该参数的默认值。如果表达式的计算结果为 Nothing，则使用 value 数据类型的默认值作为参数的默认值。

所以你不能使用那种语法，而是你可以写这样的东西

```
Private Sub Test(a As Integer, Optional c As Color = Nothing)
    If c = Nothing Then
        c = Color.Black ' your default color'
    End If
    ......
End Sub 
```

用 C# 编写的相同代码如下

```
private void Test(int a, Color c = default(Color))
{
    if (c.IsEmpty)
        c = Color.Black;
} 
```

在 C# 中，您不能针对空值测试值类型（如颜色、点、大小等）。这些类型永远不会为空，但它们具有类型的默认值（如整数的 0），因此，如果您需要为值类型传递可选参数，您可以使用`new`带有您想要的值的关键字创建它用作默认值或使用[`default`关键字](https://stackoverflow.com/questions/1727346/what-is-the-use-of-default-keyword-in-c)并让框架决定哪个值是该类型的默认值。如果您让框架选择，那么**IsEmpty**属性将为真。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-16T21:24:46.167

您可以重载该方法

```
''' <summary>
''' requires two parameters
''' </summary>
''' <param name="a">an integer</param>
''' <param name="c">a color</param>
''' <remarks></remarks>
Private Sub Test(a As Integer, c As Color)
    'Your function
End Sub

''' <summary>
''' one parameter, uses default color of black
''' </summary>
''' <param name="a">an integer</param>
''' <remarks></remarks>
Private Sub Test(a As Integer)
    Test(a, Color.Black)
End Sub 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-05-14T15:48:18.977

.NET 颜色世界中还有另一个功能可以让您实现您的初衷。该功能是一个名为“KnownColor”的枚举，它可以自由地来回转换为 System.Drawing.Color 对象。虽然它没有所有可能的颜色，但它拥有我曾经需要的所有颜色。并且因为它是一个枚举，所以它有“常量”作为可选参数中的默认值说明符。例子：

```
Private Sub Test(a As Integer, Optional kc As KnownColor = KnownColor.Black)
    Dim MyColor As System.Drawing.Color = Color.FromKnownColor(kc)
    ......
End Sub 
```

根据

```
https://docs.microsoft.com/en-us/dotnet/api/system.drawing.color.toknowncolor 
```

如果使用 FromName(String) 方法或 FromKnownColor(KnownColor) 方法从预定义的颜色创建颜色，则可以使用 System.Drawing.Color.ToKnownColor() 函数将其转换回 KnownColor 枚举中的值。否则它将返回值 0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-20T02:23:54.517

在 Visual Basic 中，@Steve 提出的解决方案几乎可行，但将 Color 设置为 Nothing 并不能达到您通常期望的效果；检查需要针对空颜色，而不是针对无。这是一个例子。它使 Windows 窗体控件的背景色闪烁 50 毫秒，只要它具有 .ForeColor：

```
Sub Flash(c As Control, Optional FlashColor As Color = Nothing,
          Optional Duration As Integer = 50)
    If FlashColor.Equals(System.Drawing.Color.Empty) Then FlashColor = Color.Red
    Try
        Dim CurrColor = c.BackColor
        c.BackColor = FlashColor
        c.Refresh()
        System.Threading.Thread.Sleep(Duration)
        c.BackColor = CurrColor
        c.Refresh()
    Catch ex as Exception
    End Try
End Sub
```

# javascript - boolean 不是 javascript 中的函数

> ID：16045480
> 
> 赞同：3
> 
> 时间：2013-04-16T19:28:44.460
> 
> 标签：javascript, jquery

我有以下 javascript，我正在阅读一个单词并写出翻译，但我不断收到错误消息`boolean is not a function`

```
function translate() {
var word = $("#prodId").val();

$.getJSON("api/translation?word=" + word,
            function (data) {

                $("#word").text(data.TranslatedWord);
            })
            .fail(
                function (jqXHR, textStatus, err) {
                    $("#word").text('Error: ' + err);
                });
                    } 
```

以下方法基本相同，但使用整数可以正常工作：

```
function find() {
       var id = $("#prodId").val();
       $.getJSON("api/products/" + id,
            function (data) {
                var str = data.Name + ': $' + data.Price;
                $("#product").text(str);
            })
            .fail(
                function (jqXHR, textStatus, err) {
                    $("#product").text('Error: ' + err);
                });
                    } 
```

这是 HTML 的一个片段：

```
<div id="body">
    <div class="main-content">
        <div>
            <h1>All Products</h1>
            <ul id="products" />
        </div>
        <div>
        <label for="prodId">ID:</label>
        <input type="text" id="prodId" />
        <input type="button" value="Translate" onclick="translate();" />
        <p id="word" />
        </div>
    </div>
</div>

<script type="text/javascript">
$(document).ready(function () {
    // Send an AJAX request
    $.getJSON("api/products/",
              function (data) {
                  // On success, 'data' contains a list of products.
                  $.each(data, function (key, val) {

                      // Format the text to display.
                      var str = val.Name + ': $' + val.Price;

                      // Add a list item for the product.
                      $('<li/>', { text: str })
                      .appendTo($('#products'));

                  });

              });

});

    function find() {
        var id = $("#prodId").val();
        $.getJSON("api/products/" + id,
                  function (data) {
                      var str = data.Name + ': $' + data.Price;
                      $("#product").text(str);
                  })
        .fail(
            function (jqXHR, textStatus, err) {
                $("#product").text('Error: ' + err);
            });
    }

    function translate() {
        var word = $("#prodId").val();

        $.getJSON("api/translation?word=" + word,
                  function (data) {

                      $("#word").text(data.TranslatedWord);
                  })
        .fail(
            function (jqXHR, textStatus, err) {
                console.log(err);

                $("#word").text('Error: ' + err);
            });
    }

</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T20:04:15.737

似乎在 chrome 中所有元素都有一个名为`translate`, 的布尔属性（例如`console.log(document.body.translate)`将显示`true`在 chrome 中，不知道为什么。

当你这样做时`onclick="translate();"`，它只是在本地 DOM 对象范围内调用它（现在为什么不在窗口对象上调用它是另一个问题）

例如，如果您更改`translate`为`translate2`它应该可以工作，听起来很奇怪

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T19:42:34.997

好像`onclick`是不工作。

由于您已经在使用 jQuery，我建议您使用 click 事件而不是`onclick`HTML 中的。这样做是更好的做法...

尝试这样的事情：

```
$("#translateButton").click(function() {
    translate();
}); 
```

并且只是你的 HTML 到这个：

```
<input id="translateButton" type="button" value="Translate" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T19:54:14.870

问题是你在`translate()`函数内部定义你的`document.ready()`函数。这些函数定义在该范围内是本地的，不能从`onclick`.

您不需要将函数定义放在`ready`处理程序中，您只需要在其中立即访问 DOM 的语句。在顶层定义它，它应该可以工作。

或者，正如 c0deNinja 建议的那样，使用 jQuery 绑定处理程序。如果您在`ready`处理程序中执行此操作，它可以调用其中定义的其他函数。

# php - 学习 CodeIgniter - 相当于 PHP 包括

> ID：16045482
> 
> 赞同：0
> 
> 时间：2013-04-16T19:28:52.397
> 
> 标签：php, codeigniter

第一次！

我正在学习 Code Igniter，作为我的第一个项目，我正在用 CI 重写现有站点。

在现有站点上，所有动态或静态页面都使用 PHP 包含来加载从数据库中的类别表填充的 sidebar.php。

```
<div id="sidebar">
<?php

$result = mysql_query('SELECT category_id, name, url FROM categories ORDER BY category_id    ASC');

while ($row = mysql_fetch_array($result)) {
$name=$row['name'];
$url=$row['url'];

print "<p><a href=\"category/$url\">$name</a></p>";

}

?>

</div> 
```

所以现在我已经开始使用 CI，我认为要走的路是用数据库调用、侧边栏控制器、侧边栏视图制作一个侧边栏模型，然后在默认页面控制器中加载这个视图。

所以，在 /application/models 我有 sidebar_model.php

```
<?php
class Sidebar_model extends CI_Model {

public function __construct()
{
    $this->load->database();
}

public function get_categories()
{
    $query = $this->db->get('categories');
    return $query->result();    
}

} 
```

然后在应用程序/控制器中有sidebar.php

```
<?php
class Sidebar extends CI_Controller {

public function __construct()
{
    parent::__construct();

}

public function index()
{
    $this->load->model('sidebar_model');

    $data['result'] = $this->sidebar_model->get_categories();

    $this->load->view('templates/sidebar_view', $data);
}

} 
```

然后在应用程序/视图/模板中有 sidebar_view.php

```
<div id="sidebar">
<?php foreach($result as $row): ?>

<p><?php echo $row['name'] ?></p>

<?php endforeach ?>
</div> 
```

这是从我的主页控制器调用的 -

```
<?php

class Pages extends CI_Controller {

public function view($page = 'home')
{

    if ( ! file_exists('application/views/pages/'.$page.'.php'))
    {
        // Whoops, we don't have a page for that!
        show_404();
    }

    $data['title'] = ucfirst($page); // Capitalize the first letter

    $this->load->view('templates/header', $data);
    $this->load->view('pages/'.$page, $data);
    $this->load->view('templates/sidebar_view', $data);
    $this->load->view('templates/footer', $data);

}
} 
```

我遇到的麻烦是，虽然页面控制器显然正在加载侧边栏视图（该框以正确的 CSS 样式显示），但它引发了 PHP 错误。

```
A PHP Error was encountered

Severity: Notice

Message: Undefined variable: result

Filename: templates/sidebar_view.php

Line Number: 2 
```

谁能在这里指出我正确的方向？虽然只为侧边栏使用 php include 会既快速又简单，但它看起来不像 MVC 的做事方式。

为冗长的帖子道歉，并在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:47:05.197

您正在加载`Pages`控制器并调用控制器视图`Sidebar`变量在控制器加载`$result`时获取数据`Sidebar`并且您正在加载控制器您必须在控制器`Pages`中加载模型`sidebar``pages`

```
class Pages extends CI_Controller {

public function view($page = 'home')
{
  $this->load->model('sidebar_model');
  $data['result'] = $this->sidebar_model->get_categories();
if ( ! file_exists('application/views/pages/'.$page.'.php'))
{
    // Whoops, we don't have a page for that!
    show_404();
}

$data['title'] = ucfirst($page); // Capitalize the first letter

$this->load->view('templates/header', $data);
$this->load->view('pages/'.$page, $data);
$this->load->view('templates/sidebar_view', $data);
$this->load->view('templates/footer', $data);

}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:43:29.630

Pages 控制器中的 $data 数组需要有一个“结果”条目。传递给视图的数组中的值将转换为局部变量以在视图中使用。您在侧边栏控制器中正确执行此操作（您并不真正需要）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T19:51:58.720

如果您需要所有页面的侧边栏，您可以先以这样的好方法进行操作，您需要扩展 MY_Controller，然后使用 MY_Controller 扩展所有控制器

MY_Controller 放在应用程序核心目录

```
<? 
 MY_Controller extends CI_Controller{

   public $_sidebar = '';

   public function __construct() {
      parent::__construct();
      $this->_sidebar = $this->sidebar();
   }

   private function sidebar(){
       $this->load->model('sidebar_model');

      $data['result'] = $this->sidebar_model->get_categories();

      return $this->load->view('templates/sidebar_view', $data,TRUE);
    }    

 } 
```

现在你的页面控制器

```
<?php

class Pages extends MY_Controller {

   public function __construct() {
      parent::__construct();
   }

public function view($page = 'home')
{

    if ( ! file_exists('application/views/pages/'.$page.'.php'))
    {
        // Whoops, we don't have a page for that!
        show_404();
    }

    $data['title'] = ucfirst($page); // Capitalize the first letter
    $data['sidebar'] = $this->_sidebar;
    $this->load->view('templates/header', $data);
    $this->load->view('pages/'.$page, $data);
    $this->load->view('templates/footer', $data);

}
} 
```

现在您将侧边栏作为变量，每次只需在主模板 html 中的任何您想要的位置定义侧边栏时，它都可供您的控制器使用

# c++ - WinHTTP 中 WINHTTP_QUERY_URI 的用途？

> ID：16045485
> 
> 赞同：2
> 
> 时间：2013-04-16T19:28:57.103
> 
> 标签：c++, winapi, winhttp

[使用带有WinHttpQueryHeaders](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384102.aspx)函数`WINHTTP_QUERY_URI`的标志可以查询究竟是什么 HTTP 标头？在阅读了它的描述之后，我觉得这个标志应该被用来获取在[WinHttpOpenRequest](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384099.aspx)函数中指定的请求的 URI。然而，下面的程序给了我一个错误代码 12019 （如果我取消注释两个注释行，则为 12150）。`ERROR_INTERNET_INCORRECT_HANDLE_STATE``ERROR_HTTP_HEADER_NOT_FOUND`

```
#include <cstdio>
#include <windows.h>
#include <winhttp.h>
#pragma comment(lib, "winhttp.lib")
int main()
{
    HINTERNET hSession = WinHttpOpen(nullptr, WINHTTP_ACCESS_TYPE_NO_PROXY, WINHTTP_NO_PROXY_NAME, WINHTTP_NO_PROXY_BYPASS, 0);
    HINTERNET hConnect = WinHttpConnect(hSession, L"www.ietf.org", INTERNET_DEFAULT_HTTP_PORT, 0);
    HINTERNET hRequest = WinHttpOpenRequest(hConnect, L"GET", L"/rfc/rfc2616.txt", nullptr, WINHTTP_NO_REFERER, nullptr, 0);

    //WinHttpSendRequest(hRequest, WINHTTP_NO_ADDITIONAL_HEADERS, 0, WINHTTP_NO_REQUEST_DATA, 0, 0, 0);
    //WinHttpReceiveResponse(hRequest, 0);

    wchar_t url[1024] = {};
    DWORD url_size = sizeof(url);
    auto success = WinHttpQueryHeaders(hRequest, WINHTTP_QUERY_URI, WINHTTP_HEADER_NAME_BY_INDEX, url, &url_size, WINHTTP_NO_HEADER_INDEX);
    auto error_code = GetLastError();
    wprintf(L"success=%d error_code=%u url=%s", success, error_code, url);

    WinHttpCloseHandle(hRequest);
    WinHttpCloseHandle(hConnect);
    WinHttpCloseHandle(hSession);
} 
```

PS 是的，我知道我可以使用`WinHttpQueryOption`and获取请求 URI `WINHTTP_OPTION_URL`，无需指出这一点。

编辑。根据下面的 Captain Obvlious 回答添加标志（*如果*确实应该返回请求 URI `WINHTTP_QUERY_FLAG_REQUEST_HEADERS`，这完全有意义）并没有太大区别：现在有或没有and调用函数都会产生错误代码 12150 。 *`WINHTTP_QUERY_URI``WinHttpSendRequest``WinHttpReceiveResponse``WinHttpQueryHeaders``ERROR_HTTP_HEADER_NOT_FOUND`*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:53:05.647

您正在查询不包含 URI 的请求的响应标头。您需要包含`WINHTTP_QUERY_FLAG_REQUEST_HEADERS`修饰符标志才能从请求标头中检索。

```
WinHttpQueryHeaders(
    hRequest,
    WINHTTP_QUERY_URI | WINHTTP_QUERY_FLAG_REQUEST_HEADERS,
    WINHTTP_HEADER_NAME_BY_INDEX,
    url,
    &url_size,
    WINHTTP_NO_HEADER_INDEX); 
```*

# javascript - $.getJSON 不能传入淘汰 observableArray

> ID：16045489
> 
> 赞同：2
> 
> 时间：2013-04-16T19:29:10.143
> 
> 标签：javascript, json, knockout.js

我正在尝试调用返回 Json 的 Api。我正在尝试将此返回的数据放入一个淘汰赛可观察数组中。我的视图模型如下所示：

```
var adminData = $.getJSON("/api/administrators");
//console.log(adminData);

var viewModel = {
    administrators: ko.observableArray(adminData)
};

ko.applyBindings(viewModel); 
```

请求通过，并且正在返回一个对象，其中包含 adminData 中的预期数据，但是当我尝试将其添加到 ko.observableArray 时，我在控制台中得到了这个：初始化可观察数组时传递的参数必须是一个数组。我不知道如何将这些数据放入数组中进行淘汰。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T19:31:32.287

[`$.getJSON`](http://api.jquery.com/jQuery.getJSON/) 在异步。结果数据仅在回调中可用。它不可用，因为`$.getJSON`文档中的返回值从未提及返回值。

```
$.getJSON("/api/administrators", null, function(adminData, status, xhr){
    var viewModel = {
        administrators: ko.observableArray(adminData)
    };  
    ko.applyBindings(viewModel); 
}); 
```

如果您需要进行单独的 AJAX 调用，您应该使用[`jQuery.when`](http://api.jquery.com/jQuery.when/)See [Wait until all jQuery Ajax requests are done?](https://stackoverflow.com/questions/3709597/wait-until-all-jquery-ajax-request-are-done)

```
$.when($.ajax("/api/administrators"), $.ajax("api/roles")).done(function(resp1, resp2){        
    ko.applyBindings({
        administrators: ko.observableArray(resp1[0]),
        roles: ko.observableArray(resp2[0]);
    }); 
}); 
```

这里有一些其他不太理想的解决方案，但它向您展示了幕后发生的事情。

如果您不介意请求相互等待

```
$.getJSON("/api/administrators", null, function(adminData){
    $.getJSON("/api/administrators", null, function(apiRoles){
        ko.applyBindings({
            administrators: ko.observableArray(adminData),
            roles: ko.observableArray(apiRoles);
        }); 
    });
}); 
```

如果您确实关心，它会更复杂，因为您需要跟踪请求是否完成

```
var ajaxAdminData, ajaxApiRoles
$.getJSON("/api/administrators", null, function(adminData, status, xhr){
    var ajaxAdminData = adminData;
    // If the other call finished, apply the bindings
    if (ajaxApiRoles) {
        applyBindings();
    }
});

$.getJSON("/api/administrators", null, function(apiRoles, status, xhr){
    ajaxApiRoles = apiRoles;
    // If the other call finished, apply the bindings
    if (ajaxAdminData) {
        applyBindings();
    }
});

function applyBindings() {
    ko.applyBindings({
        administrators: ko.observableArray(ajaxAdminData),
        roles: ko.observableArray(ajaxApiRoles);
    }); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:31:38.273

因为[`getJSON()`](http://api.jquery.com/jQuery.getJSON/)是异步的！您不能将其视为同步方法。看看那个 console.log 行是什么，它会显示它失败的原因。

使用回调

```
$.getJSON("/api/administrators", function(adminData) {

    var viewModel = {
        administrators: ko.observableArray(adminData)
    };

    ko.applyBindings(viewModel);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-29T15:41:11.227

在您的 $.getJSON 回调中，只需更新您的可观察数组，然后在该数组上调用 valueHasMutated()，如： administrators.valueHasMutated()

# jquery - 如何通过引用限制对 WCF 服务的访问？

> ID：16045491
> 
> 赞同：0
> 
> 时间：2013-04-16T19:29:21.043
> 
> 标签：jquery, ajax, wcf, webget

我有一个可以从页面上的 jQuery 访问的服务，它看起来像这样：

```
[ServiceContract(Namespace = "")]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class FacadeService
{
    ServiceHelper serviceHelper = new ServiceHelper();

    [OperationContract]
    [WebGet(ResponseFormat=WebMessageFormat.Json)]
    public String GetAllProducts()
    {
        Uri uri = new Uri("http://localhost:12345/api/Products");

        return serviceHelper.SubmitGetRequestToService(uri);
    }
} 
```

这很好，但现在任何人都可以打开浏览器并点击此服务。我只希望本地网站能够访问此服务。有没有内置的方法可以做到这一点，或者我必须设计一些巧妙的方案来阻止即兴表演？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:27:58.197

如果您在 IIS 上托管您的服务，可能最简单的方法是通过 IIS 工具限制服务 url 访问。

如果您已经使用 wcf 服务本身执行此操作，则可以添加您的行为以进行 ip 过滤，例如，请参阅[此](http://www.codeproject.com/Articles/37280/WCF-Service-Behavior-Example-IPFilter-Allow-Deny-A)帖子和[此](https://stackoverflow.com/questions/722008/can-i-setup-an-ip-filter-for-a-wcf-service)帖子。

但是我仍然认为通过标准的 IIS 工具来完成它会更容易。

# tomcat - 具有多个 WebApp 的 Tomcat 实例 - 会话相互干扰

> ID：16045492
> 
> 赞同：1
> 
> 时间：2013-04-16T19:29:36.880
> 
> 标签：tomcat, jenkins

我正在尝试在单个 Tomcat 实例上运行多个 WebApp。我的目标是让每个端口都可以在给定端口的根上下文中访问，例如

```
http://server:8081
http://server:8082
... 
```

我在 server.xml 中给了每一个单独的“服务”、“连接器”、“引擎”和“主机”条目。一切似乎都工作正常，除了一旦我登录到第一个应用程序，如果我然后登录到第二个应用程序，第一个会丢失其会话信息并注销。

如果我编辑 server.xml 并在其原始上下文中运行它们，例如

```
http://server:8081/jenkins
http://server:8082/jenkins
... 
```

一切似乎都很好。这使我相信当它们都在根上下文中时会话以某种方式共享，即使它们具有单独的连接器等。知道我在做什么导致这种情况发生吗？

我确认这两个实例共享相同的 jsessionID，并且当我使用一个实例登录时，另一个实例丢失了它的第一个 jsessionid 并采用了第二个，实际上失去了它的身份验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:40:31.490

看一下[sessionCookiePath](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Common_Attributes)上下文参数。我自己没有尝试过，但我认为这可能是您正在寻找的技巧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T17:49:39.797

**雄猫 7**

修改文件$CATALINA_BASE/conf/context.xml，添加**属性** *sessionCookieName*

```
<!-- The contents of this file will be loaded for each web application -->
<Context sessionCookieName="JSESSIONID_SERVER_01">
 <!-- Default set of monitored resources -->
 <WatchedResource>WEB-INF/web.xml</WatchedResource>
 <!-- Uncomment this to disable session persistence across Tomcat restarts -->
 <!--
 <Manager pathname="" />
 -->
 <!-- Uncomment this to enable Comet connection tacking (provides events
 on session expiration as well as webapp lifecycle) -->
 <!--
 <Valve className="org.apache.catalina.valves.CometConnectionManagerValve" />
 -->
</Context> 
```

# algorithm - 解决复发复发

> ID：16045494
> 
> 赞同：1
> 
> 时间：2013-04-16T19:30:04.573
> 
> 标签：algorithm, discrete-mathematics, recurrence, josephus

好的，我正在为 Knuth 的具体数学而苦苦挣扎，有些例子我还不明白。

J(n) = 2*J(n/2) - 1

是从第一章开始的。它专门为那些可能熟悉具体数学的人解决了约瑟夫斯问题。给出了解决方案，但绝对没有解释。我试图用迭代方法解决它。这是我到目前为止想出的

J(n) = (2^k)*J(n/(2^k)) - (2^k - 1)

我被困在这里。任何帮助或提示将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T11:12:13.937

我先回忆一下约瑟夫斯问题。

我们有*n*个人围成一圈。刽子手将按以下方式处理圆圈：

1.  刽子手从位置 i = 1 的人开始
2.  在位置i时，他放过i但杀死了i的跟随者
3.  他执行此操作，直到只有一个人还活着

通过快速查看这个过程，我们可以看到每个处于平均位置的人都会在第一次运行时被杀死。当所有“偶数”都死了，剩下的人是谁？好吧，这取决于 n 的奇偶性。

如果 n 是偶数（比如 n = 2i），那么剩下的人是 1,3,5,...,2i-1。剩下的问题是 i 人而不是 n 人的圈子。[让我们]在“新”圈子中的位置和n人圈子中的初始位置之间引入一个映射图。

> 映射[偶数](x) = 2.x - 1

这意味着新圆圈中位置 x 的人在初始圆圈中的位置 2.x - 1。如果幸存者在新圈子中的位置是 J(i)，那么某人在 n = 2.i 人的圈子中生存必须占据的位置是

> 映射[偶数](J(i)) = 2.J(i) - 1

我们有第一个递归规则：

> 对于任何整数 n ：
> J(2.n) = 2.J(n) - 1

但是如果 n 是奇数（n = 2.j + 1），那么第一次运行最终会杀死所有“偶数”，并且刽子手在位置 n。n 追随者是 1 ... 因此下一个要被杀死的人是 1。幸存者是 3,5,..,2j+1，刽子手继续前进，就好像我们有一个由 j 人组成的圈子一样。映射与偶数情况有点不同：

> 地图[奇数](x) = 2.x + 1

3 是新的 1，5 是新的 2，以此类推……

如果幸存者在 j 人的圈子中的位置是 J(j)，那么想要在 n = 2j+1 的圈子中生存的人必须占据位置 J(2j+1) ：

> J(2j+1) = 地图[奇数](J(j)) = 2.J(j) + 1

绘制第二个递归关系：

> 对于任何整数 n，我们有：
> J(2.n + 1) = 2.J(n) + 1

从现在开始，我们可以使用 2 个递归关系计算*任意整数 n 的 J(n)。*但如果我们看得更远一点，我们可以做得更好......

因此，对于每个 n = 2 ^k，我们有 J(n) = 1。好吧，这很好，但是对于其他数字呢？如果您写下第一个结果（最多 n = 20），您会看到该序列似乎是伪周期性的：
1 2 3 4 5 6 7 8 9 10 11
1 1 3 1 3 5 7 1 3 5 7

从 2 的幂开始，似乎位置在每一步都增加 2，直到下一个 2 的幂，我们再次从 1 开始......因为，给定一个整数 n，有一个唯一的整数 m(n) 这样那

> 2 ^(m(n)) ≤ n < 2 ^(m(n)+1)

让 s(n) 是整数，使得 n = 2 ^(m(n)) + s(n) （我称它为“s”表示“移位”）。我们观察的数学翻译是 J(n) = 1 + 2.s(n)

让我们使用强归纳来证明它。
对于 n = 1，我们有 J(1) = 1 = 1 + 2.0 = 1 + 2.s(1)
对于 n = 2，我们有 J(2) = 1 = 1 + 2.0 = 1 + 2.s( 2)

假设对于任意 k 满足 k ∈ [1,n]，J(k) = 1 + 2.s(k)，让我们证明 J(n+1) = 1 + 2.s(n+1)。

我们有 n = 2 ^(m(n+1)) + s(n+1)。显然，2 ^(m(n))是偶数（除了 n = 1 的普通情况），因此 n 的奇偶性由 s(n) 携带。

如果 s(n+1) 是偶数，那么我们表示 s(n+1) = 2j。我们有

> J(n+1) = 2.J((n+1)/2) - 1 = 2.J(2 ^(m(n+1)-1) + j) - 1

由于该陈述对于任何 k ∈ [1,n] 都是正确的，因此对于 1 ≤ k = (n+1)/2 < n 也是正确的，因此：

> J(n+1) = 2.(2j + 1) - 1 = 2.s(n+1) + 1

我们可以类似地解决奇怪的情况。该公式适用于任何整数 n ：

> J(n) = 2.s(n) + 1，其中 m(n), s(n) ∈ ℕ 唯一整数，使得
> 2 ^(m(n)) ≤ n < 2 ^(m(n)+1)和 s(n ) = n - 2 ^(m(n))
> 换而言之：m(n) = ⌊ln [2] (n)⌋ 和 s(n) = n - 2 ^(⌊ln [2] (n)⌋</sup>)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T03:10:43.463

从几个简单的例子开始，做出猜测，然后使用归纳法来（反）证明你的猜测。

考虑 n = 2 的某个幂。

J(2^0) = 1（给定）

J(2^1) = 2J(2^0) - 1 = 1

J(2^2) = 2J(2^1) - 1 = 1

好的，让我们猜测所有 n >= 1 的 J(n) = 1。

基本情况：J(1) = 1，根据定义这是正确的。

归纳步骤：假设某个任意 k 的 J(k) = 1。那么 J(2k) = 2J(k) - 1 = 1。

因此，通过归纳，所有 n 的 J(n) = 1（假设除法向下舍入为整数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-03T14:40:32.770

`J(n)=2*J(n/2)-1`

`J(n)-1=2*J(n/2)-2`

`J(n)-1=2*(J(n/2)-1)`

`T(n)=2*T(n/2)`， 在哪里`T(n)=J(n)-1`

`T(n)=2^log2(n)*T(1)`

`J(n)=2^log2(n)*(J(1)-1)+1`

# php - 所需的 Wordpress 特定类别帖子显示在静态页面上，顶部有较新的顺序

> ID：16045500
> 
> 赞同：0
> 
> 时间：2013-04-16T19:30:14.503
> 
> 标签：php, wordpress

我在 WordPress 中有两个不同的帖子类别（“本地”和“国际”），并且在我的静态页面中显示了这些帖子。现在这两个类别的帖子都在一个页面上。我可以在页面中仅显示本地帖子`local.php`和国际帖子吗？`International.php`另请更改。我可以在顶部显示较新的帖子吗？现在较旧的帖子位于顶部。

以下是我的代码。

```
<?php
  require('wp-blog-header.php');
?>

<?php
  $posts = get_posts('numberposts=10&order=ASC&orderby=post_title');
  foreach ($posts as $post) : start_wp(); ?>
    <?php echo "<h1>";the_date();echo "</h1>"; ?>
    <?php the_title(); ?>    
    <?php the_excerpt(); ?> 
<?php
  endforeach;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:57:55.923

假设自定义页面作为您的自定义插件中的页面。您将需要加载`wp-load.php`以使用 WordPress 函数/循环来获取信息。

你会需要

```
require_once("../../../wp-load.php");    // ../../../ according to you file location

// now you can loop using get_posts 
$posts = get_posts('numberposts=10&category=CATEGORY_ID&order=DESC&');
// loop 
```

如果这不在 WordPress 中，您必须连接到 MySQL 并使用 SELECT 查询从表中获取信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:36:31.010

利用

```
$posts = get_posts('numberposts=10&order=DESC&category=[categoryID]&orderby=post_title'); 
```

`local.php`分别在`International.php`. 请注意，`order=DESC`而不是`order=ASC`，这将反转发布顺序。并确保使用适当的类别 ID。您可以在您的 Wordpress 管理区域中找到它们。

# bash - 使用 awk 和 df（无磁盘）仅显示安装名称和使用的空间

> ID：16045502
> 
> 赞同：4
> 
> 时间：2013-04-16T19:30:21.380
> 
> 标签：bash, awk

`df -h`执行 a并且仅打印出安装名称和已用空间（百分比）的正确 CL 序列是什么？我正在尝试为我们的服务器编写脚本报告。

我试过了

`df -h | awk '{print $1 $4}'`

吐出来

```
$df -h | awk '{print $1 $4}'
FilesystemAvail
/dev/sda164G
udev3.9G
tmpfs1.6G
none5.0M
none3.9G
none100M
/home/richard/.Private64G 
```

你会如何改变它来增加间距？我是否选择了正确的列？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T19:35:33.783

尝试这个：

```
df -h | awk '{if ($1 != "Filesystem") print $1 " " $5}' 
```

要不就

```
df -h | awk '{print $1 " " $5}' 
```

如果你想保留标题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T19:36:25.737

你快到了：

```
df -h | awk 'NR>1{print $1, $5}' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T19:38:09.753

您的代码的问题是要处理什么输入，以及如何格式化输出。

例如，此 awk 选择在字段 5 末尾具有 % 符号的记录，并在两个输出字段之间放置一个空格。

```
 df -h | awk '$5 ~ /\%$/ {print $1 " " $5 }' 
```

其他一切都只是提炼这两件事。

# dreamweaver - DW CS6 - 电话间隙

> ID：16045503
> 
> 赞同：0
> 
> 时间：2013-04-16T19:30:23.483
> 
> 标签：dreamweaver

试图涉足移动网络应用程序时，我的新版 CS6 Dreamweaver 似乎缺少电话间隙示例。

创造新的，从样品有

jQuery Mobile(CDN)

jQuery Mobile（本地）

带有主题的 jQueryMobile（本地）

adobes 网站上的所有视频似乎都表明

jQuery（电话间隙）

带有主题的 jQueryMobile (phonegap)

我需要这些吗 - 为什么它们丢失了，我在哪里可以得到它们（或其他样品）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:02:28.443

我在支持表单上找到了这个...回答了我的问题，但让我想知道为什么当演示者向您展示 CS6 时所有 Adob​​e 视频仍然显示这两个选项

```
Carey Burgess (Customer Advocate) 4 months ago
... The jQuery Mobile samples pages under Mobile Starters are the right pages to use to get you started developing for PhoneGap Build in Dreamweaver.

The only reason that CS5.5 had separate listings in there for PhoneGap was to automatically insert the Phonegap JavaScript file (cordova.js), which would be extraneous when building apps with PhoneGap Build. 
```

位于：http: [//community.phonegap.com/nitobi/topics/phonegap_templates_in_dreamweaver_cs6](http://community.phonegap.com/nitobi/topics/phonegap_templates_in_dreamweaver_cs6)

# oracle - 检查约束可以与另一个表相关吗？甲骨文

> ID：16045505
> 
> 赞同：3
> 
> 时间：2013-04-16T19:30:25.267
> 
> 标签：oracle

我已经搜索了我的问题的解决方案，这个[问题完美地描述了它](https://stackoverflow.com/questions/3880698/can-a-check-constraint-relate-to-another-table)。

> 假设我有一个名为 ProjectTimeSpan 的表（我没有，只是作为示例！）包含列 StartDate 和 EndDate。
> 
> 而且我还有另一个名为 SubProjectTimeSpan 的表，其中还包含名为 StartDate 和 EndDate 的列，我想在其中设置一个 Check 约束，使其无法将 StartDate 和 EndDate 设置为 ProjectTimeSpan.StartDate 到 ProjectTimeSpan.EndDate 之外的值
> 
> 一种知道其他表值的检查约束......这可能吗？

但是我很难实现oracle的解决方案。当其他文章指出检查约束不能与其他表相关时，我更加困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:36:16.340

不，它不能。

约束可以`FOREIGN KEY`（并且必须）与另一个表相关，但它只能执行等式检查。

即，您可以测试一列（或一组列）是否等于其他表中的列，但不能测试更复杂的条件（例如在跨度内或其他任何情况下）。

您必须为此实施触发器。

# php - 如何用javascript序列化关联数组将其保存在cookie中，然后用php读取？

> ID：16045506
> 
> 赞同：1
> 
> 时间：2013-04-16T19:30:27.653
> 
> 标签：php, javascript, cookies

首先我知道有很多和我类似的问题。当然，我已经阅读了所有内容，但我找不到解决方案或了解如何解决我的问题。这是主要问题：我在 java 脚本中有一个关联数组，我想将其序列化并将其保存在 cookie 中，然后我想通过使用 unserialize 方法用 php 读取此 cookie。所以我找不到序列化关联数组的正确方法。

**有javascript**

```
function renewCookie(){
    var myArray = {radius: radius, type:type, date:price, name:company}
    serializeValue = JSON.stringify(myArray);/* i used this serialize function that i found on web http://phpjs.org/functions/serialize/ but it didn't work.*/
    createCookie('parameters',serializeValue ,999);   
  }
  function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
  } 
```

**有php**

```
<?php
    if (isset($_COOKIE["parameters"])){
            $UserParam = json_decode($_COOKIE["parameters"]);/*I unserialize the cookie because i suppose that it is serialized*/
            echo"<script>function readCookie(){ getLocationFunction(".$UserParam["radius"].",\"".$UserParam["type"]."\",\"".$UserParam["date"]."\",\"".$UserParam["name"]."\")}</script>";
    }
    else{setcookie("parameters","$defaultParam",time()+3600);}
?> 
```

有人知道如何用 php 读取 javascript 创建的 cookie 吗？我还解释说我有一个关联数组，因为我想同时拥有多值 cookie 和键名。请帮助我提供一些代码。如果您需要更多解释，请询问。先感谢您！！

**更新**：上面的代码可以很好地满足您的建议，但它仅适用于 firefox 和 chrome，不适用于 Opera、safari 和 explorer。有人看到我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:36:24.470

只需使用 JSON 序列化。

在 JavaScript 中：

```
serializeValue = JSON.stringify(myArray); 
```

在 PHP 中

```
$UserParam = json_decode($_COOKIE["parameters"]); 
```

请注意，`$UserParam`在这种情况下，这将是对象。如果要强制关联数组使用：

```
$UserParam = json_decode($_COOKIE["parameters"], true); 
```

# windows - 如何以编程方式获取 adhoc 网络中对等点的 IP 地址？

> ID：16045509
> 
> 赞同：1
> 
> 时间：2013-04-16T19:30:38.190
> 
> 标签：windows, winapi, ip, adhoc

我在一个学术项目中开发了一个程序。该程序包括一个客户端和一个服务器部分，旨在允许两个笔记本在 adhoc 网络中交换信息：

1.  该程序应与另一台计算机建立临时连接
2.  程序应通过 adhoc 连接向另一台计算机发送消息

我做了第一步。我开发了一个使用 Windows WLAN API 连接到 adhoc 网络的程序。问题是第二步。我想使用 Sockets API 来发送消息。因此，我需要另一台计算机的 IP 地址。如何在 adhoc 网络中获取这台计算机的 IP 地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:51:17.480

我认为您应该能够枚举连接到网络的所有网络接口并转储每个适配器的已知地址。像这样的东西：

```
var addresses = Dns.GetHostEntry((Dns.GetHostName()))
                    .AddressList
                    .Where(ip => ip.AddressFamily == AddressFamily.InterNetwork)
                    .Select(ip => ip.ToString())
                    .ToArray(); 
```

也看看[ManagedWifi](http://managedwifi.codeplex.com/)

# grails - 如何使 Grails 配置错误致命？

> ID：16045512
> 
> 赞同：2
> 
> 时间：2013-04-16T19:30:45.803
> 
> 标签：grails

如果我有一个语法错误的 Grails 配置文件，我希望它是一个致命错误。目前，ConfigurationHelper 会捕获所有异常并生成 WARN 级别的日志条目：

2013-04-16 12:06:13,687 [main] WARN cfg.ConfigurationHelper - 无法加载指定的配置位置文件：/opt/grails-config/Turbine-config.groovy：启动失败：script13661391736182105595282.groovy：95：期待' }', found '' @ line 95, column 1\. 1 错误

如何使应用程序无法启动？或者至少产生一个错误级别的日志条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:22:03.890

一种想法是检查`BootStrap` `init`闭包中是否缺少配置值：

```
class BootStrap {

    def grailsApplication

    def init = { servletContext ->
        if (!grailsApplication.config.myValueFromExternalConf) {
            log.error(...)
            // and/or throw something...
        }
    }
} 
```

# asp.net - 计算 VB.NET 的天数百分比

> ID：16045513
> 
> 赞同：0
> 
> 时间：2013-04-16T19:30:46.547
> 
> 标签：asp.net, vb.net, date, sql-server-2012, percentage

如何计算使用 VB.NET 完成的天数百分比？

数据读取器采用`project_start`和`project_finished`，存储`Date()`在 SQL-Server-2012 中。

这是我尝试过的：

```
Dim StartDate As New Date(datareader("project_start"))
Dim FinishDate As New Date(datareader("project_finish"))
Dim Percentage As Date = Date.FromOADate(StartDate.DayOfYear) / Date.FromOADate(FinishDate.DayOfYear) / 100 
```

但我得到这个错误：

```
Operator '/' is not defined for types 'Date' and 'Date'. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T19:38:03.713

您需要减去 Dates 并使用 TotalDays 属性。下面的示例代码：

```
Dim start As DateTime = DateTime.Now.AddDays(-50)
Dim endDate As DateTime = DateTime.Now.AddDays(50)

Dim today As DateTime = DateTime.Now

Dim sumDays = (endDate - start).TotalDays
Dim daysToNow = (today - start).TotalDays

Dim percentage = daysToNow / sumDays * 100

Console.WriteLine(percentage)

Console.ReadLine() 
```

# c# - c#中图形的平面性测试

> ID：16045518
> 
> 赞同：4
> 
> 时间：2013-04-16T19:31:18.887
> 
> 标签：c#, boost, graph

我有一个图表，我想测试它的计划性。[Boost](http://www.boost.org/doc/libs/1_41_0/libs/graph/doc/boyer_myrvold.html)确实有一个实现，但是因为我需要在 c# 中使用它，所以我不能使用 boost，因为它是用 c++ 编写的，甚至[LEDA](http://www.algorithmic-solutions.info/leda_guide/graph_algorithms/planar_kuratowski.html)也有同样的问题。c# 有这样的库吗？我希望找到一个合适的库，因为我没有时间实现在[wiki 页面](http://en.wikipedia.org/wiki/Planarity_testing)的参考部分引用的论文中找到的此类算法。

# html - 更改水平列表的 LI 元素的高度和宽度

> ID：16045522
> 
> 赞同：0
> 
> 时间：2013-04-16T19:31:36.367
> 
> 标签：html, css

我正在制作一个小的颜色代码图例，但不知道如何使我的所有`<li>`项目与它们所在的高度相同并将`<div>`它们扩大，以便它们填充整个`<div>`区域，而不仅仅是`<label>`文本周围的区域。或者也许有人有另一个建议让它看起来更好？

```
#navlist li {
  display: inline;
  list-style-type: none;
  padding-right: 30px;
}

#navcontainer {
  background-color: White;
  text-align: center;
  border-spacing: 2px;
  border-color: gray;
}

#legendTitle {
  background-color: #ABAAC1;
  font-weight: bold;
  color: White;
  padding: 5px;
}

.gvRowReqIncomplete {
  background-color: #FAFAD2;
  color: Red;
}

.gvRowReqAlmostComplete {
  background-color: #FAFAD2;
  color: Black;
  font-weight: bold;
}

.gvRowReqComplete {
  background-color: #ededf2;
  color: Black;
  font-weight: bold;
}

.gvRowSubReq {
  background-color: #fbfbfb;
  color: Black;
}
```

```
<div id="navcontainer">
  <div id="legendTitle">Color Legend</div>
  <br />
  <ul id="navlist">
    <li><label Class="gvRowReqComplete">Complete</label></li>
    <li> <label Class="gvRowReqAlmostComplete">Partially Complete </label></li>
    <li>
      <Label Class="gvRowReqIncomplete">Incomplete Request</label>
    </li>
    <li>
      <Label Class="gvRowSubReq">Response</label>
    </li>
  </ul>
</div>
```

[在 jsFiddle 上查看](http://jsfiddle.net/JZCKm/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:50:04.177

`<li>`和元素是内联的`<label>`，因此高度和宽度都没有任何影响。我将它们设置为`display:block`. 我还向左浮动`<li>`元素并设置它们的高度和宽度。

```
#navlist {
  list-style: none;
}

#navlist li {
  float: left;
  padding-right: 30px;
  width: 120px;
  height: 50px;
}

#navlist li label {
  display: block;
  height: 100%;
  width: 100%;
}

#navcontainer {
  background-color: White;
  text-align: center;
  border-spacing: 2px;
  border-color: gray;
}

#legendTitle {
  background-color: #ABAAC1;
  font-weight: bold;
  color: White;
  padding: 5px;
}

.gvRowReqIncomplete {
  background-color: #FAFAD2;
  color: Red;
}

.gvRowReqAlmostComplete {
  background-color: #FAFAD2;
  color: Black;
  font-weight: bold;
}

.gvRowReqComplete {
  background-color: #ededf2;
  color: Black;
  font-weight: bold;
}

.gvRowSubReq {
  background-color: #fbfbfb;
  color: Black;
}
```

```
<div id="navcontainer">
  <div id="legendTitle">Color Legend</div>
  <ul id="navlist">
    <li>
      <label Class="gvRowReqComplete">Complete</label>
    </li>
    <li>
      <label Class="gvRowReqAlmostComplete">Partially Complete</label>
    </li>
    <li>
      <Label Class="gvRowReqIncomplete">Incomplete Request</label>
    </li>
    <li>
      <Label Class="gvRowSubReq">Response</label>
    </li>
  </ul>
</div>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:48:14.723

我建议删除标签标签并将每个类移动到 li，如下所示：

```
<li Class="gvRowReqComplete">Complete</li> 
```

然后，如果您将 li 显示更改为 inline-block，您可以为它们指定一个设置高度。您还可以将每个 li 的文本居中。

```
li {
    display: inline-block;
    list-style-type: none;
    text-align: center;
    padding: 6px 12px;
} 
```

正如你在这里看到的：http: [//jsfiddle.net/SFZJv/2/](http://jsfiddle.net/SFZJv/2/)

我添加了灰色背景以供参考。

# orm - 为什么即使在使用包管理器控制台安装 EntityFramework 之后 EntityFramework 命名空间也未定义？

> ID：16045526
> 
> 赞同：0
> 
> 时间：2013-04-16T19:31:53.767
> 
> 标签：orm, namespaces, installation, entity-framework-5, package-managers

全部：

我们使用 ASP.NET Web 窗体开始了我们的项目。

我们的 ASP.NET C# web 应用程序用于以下环境

```
.NET Framework 4

ASP.NET Web Forms.

IIS 7

Windows 2008

Visual Studio 2010 
```

.NET IDE

```
C#

HTTPS ( SSL ) 
```

我们想要集成 Microsoft Entity Framework 版本 5。因此，我从 Visual Studio 2010 中的包管理器控制台运行了以下命令。

```
PM> Install-Package EntityFramework -Version 5.0
You are downloading EntityFramework from Microsoft, the license agreement to which is        available at http://go.microsoft.com/fwlink/?LinkId=253898&clcid=0x409\. Check       the package for additional dependencies, which may come with their own license       agreement(s). Your use of the package and dependencies constitutes your         acceptance of their license agreements. If you do not accept the license         agreement(s), then delete the relevant components from your device.
   Successfully installed 'EntityFramework 5.0.0'.
  Successfully added 'EntityFramework 5.0.0' to PivotServer. 
```

键入“get-help EntityFramework”以查看所有可用的实体框架命令。

如上所示，它正确安装了 EntityFramework 5.0.0。

此外，在我的 ASP.NET Web 应用程序中，安装会自动将 EntityFramework dll 添加到 References。

但是，如果我写以下

“使用实体框架”

进入我的 C# cs 文件之一，然后它指出 EntityFramework 未定义。

我还卸载了 EntityFramework 包，然后重新安装它，但它仍然无法识别 EntityFramework。

请建议我必须采取哪些步骤才能在我的 ASP.NET Web 项目中定义 EntityFramework 命名空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:33:57.443

没有 EntityFramework 命名空间。使用对象浏览器查看您应该使用哪些命名空间。

# javascript - 结合 Matlab 和 JavaScript：集成方法？

> ID：16045527
> 
> 赞同：3
> 
> 时间：2013-04-16T19:31:54.243
> 
> 标签：javascript, matlab, interface, integration

我有一个 MatLab 脚本，我想在我的 Javascript 算法中使用它。有没有办法让 JavaScript 调用 MatLab 脚本？更好的是，有没有办法松散地耦合 MatLab 脚本和 Javascript 页面？

我发现这一页讨论了使用 .NET 服务器来保存 MatLab 脚本/代码（[http://www.mathworks.com/matlabcentral/answers/9521](http://www.mathworks.com/matlabcentral/answers/9521)），但是还有其他更简单的方法可以让它工作吗？

我宁愿不必在 JavaScript 中重新编码 MatLab。理想情况下，我想使用我的 JavaScript，因为它目前可以将指定格式的字符串直接发送到 MatLab 脚本中，并在该算法完成后访问其字符串输出。

我可以通过哪些方式做到这一点？如果只有 .NET 或类似方法，是否有人有很好的资源来指导如何仔细甚至更好地执行此操作，以及如何设置的个人经验？

先感谢您。

**重温笔记（2013 年 12 月 17 日）并做出决定：** 事实证明，最终将我的 MatLab 脚本重新编码为 JavaScript 更容易。Google Closure 不久前发布了 JavaScript，它为 JavaScript 语言提供了一些漂亮的扩展功能，我强烈推荐给任何有兴趣使用它的人。我特别利用了它的 Matrix 库，它让我能够在 JavaScript 中重新编码和设计我的节点电压分析方法。看看： [https ://developers.google.com/closure/](https://developers.google.com/closure/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T20:47:27.360

对于部署，matlab 将始终需要主要通过 java 或 .net 在服务器端运行。但是，您可以在 matlabs 浏览器中使用 javascript 和 matlab。它不是很漂亮，并且使用了 matlab: 命令。[这里](http://blogs.mathworks.com/community/2008/02/18/interactive-web-pages-in-matlab-part-2/)给出了一个教程，下面的代码执行了为​​什么脚本。

```
<a href=”matlab:why”&gt;Why?</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-15T14:39:29.210

从 16B 版本开始，可以使用 MPS 和 RESTFUL 从 JavaScript 与 MATLAB 对话。这是示例链接[http://www.mathworks.com/help/mps/restfuljson/example-web-based-bond-pricing-tool-using-javascript.html](http://www.mathworks.com/help/mps/restfuljson/example-web-based-bond-pricing-tool-using-javascript.html)

# asp.net - aspnet_compiler 和首次加载的问题

> ID：16045530
> 
> 赞同：2
> 
> 时间：2013-04-16T19:31:59.143
> 
> 标签：asp.net, aspnet-compiler

我有一个相当大的网站试图解决第一次命中的处罚。尝试使用**aspnet_compiler**进行预编译似乎并没有像我想象的那样工作。

我运行命令如下：

```
cd C:\Windows\Microsoft.NET\Framework64\v4.0.30319
aspnet_compiler -p "C:\Development\Source\WEB" -v / "C:\Staging" -c 
```

Web.Config 设置如下（不确定这是否重要？）

```
<compilation debug="false" strict="false" batch="true" explicit="true" targetFramework="4.0" optimizeCompilations="true"> 
```

IIS 应用程序池（由于第三方引用，无法更改值）

*   .NET 框架版本：v4.0
*   启用 32 位应用程序：False
*   托管管道模式：经典

运行 Windows Server 2008R2

当我导航到站点 (C:\Staging) 的第一页（登录）时，我得到了 appx. 60 秒预热，我可以看到临时目录**C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files中的文件缓存/编译**

我的假设是，通过使用 aspnet_compiler，我将能够绕过这个预热循环的需要。是否有明显的我遗漏的东西或其他一些预编译的方法，这样我们就没有第一次的惩罚？

这似乎每天都在发生（没有真正的证据），可能在应用程序池回收时发生？再次，寻找解决方法。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-08T21:49:56.160

你在正确的轨道上；我使用 aspnet_compiler 工具将我们的网站启动时间从 ~120 秒更改为 8 秒。它*非常*适合具有大量 aspx/ascx 文件的复杂网站。

我使用如下命令：%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_compiler -v / -p C:\Projects\branches\demo3\KenticoCMS -fixednames C:\Projects\branches\demo3precomp

此命令用于在其自己的域上构建网站，并位于 C:\Projects\branches\demo3\KenticoCMS 目录中。我正在输出到 C:\Projects\branches\demo3precomp 目录，并将其内容部署到服务器。

# ruby-on-rails - 基本样式上的 Sass::SyntaxError (RoR Project)

> ID：16045537
> 
> 赞同：1
> 
> 时间：2013-04-16T19:32:33.533
> 
> 标签：ruby-on-rails, project, sass, syntax-error

我是一位非常有经验的前端开发人员，最近我有一个项目为 ruby​​ on rails 项目制作 UI，它使用 sass，我对 sass 一点也不陌生，但我遇到了一个非常奇怪的错误。

绝对无论我在项目 SASS 文件中输入什么都会引发错误，这里是截图[http://screencast.com/t/MxdHmL9O5o](http://screencast.com/t/MxdHmL9O5o)

当空文件被编译成一个application.css，但我完全不知道这里可能有什么问题。

如果您需要更多详细信息，请随时询问。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:38:36.637

如果您使用的是 SCSS 格式，通过在 CSS 中使用括号来支持空格缩进来定义，那么您应该使用`.css.scss`扩展名，而**不是**`.css.sass`扩展名。

从[Sass 主页](http://sass-lang.com/)：

> Sass 有两种语法。最常用的语法称为**“SCSS”（代表“Sassy CSS”），是 CSS3 语法的超集**。这意味着每个有效的 CSS3 样式表也是有效的 SCSS。**SCSS 文件使用扩展名 .scss**。
> 
> **第二种较旧的语法称为缩进语法（或简称为“.sass”）。**受 Haml 简洁的启发，它适用于喜欢简洁而不是与 CSS 相似的人。**它不使用括号和分号，而是使用行的缩进来指定块。**缩进语法中的文件使用扩展名 .sass。

# c++ - 将 boost.log 与 printf 样式的宏一起使用

> ID：16045538
> 
> 赞同：3
> 
> 时间：2013-04-16T19:32:39.733
> 
> 标签：c++, logging, string-formatting, boost-log

我正在开发一个使用自定义平台相关记录器的应用程序。应用程序定义了一些 printf 风格的宏：

```
#define LOG_DEBUG(format, ...) \
  logger.log(DEBUG, __FUNCTION__, format, ##__VA_ARGS__)

... 
```

在过去的几天里，我一直在努力将应用程序迁移到使用`boost.log`. 我遇到的最大问题是试图保留这种宏格式，以便只需要更改记录器内部，因为 boost 的日志记录 API 是以 iostream 样式实现的，即

```
BOOST_LOG(logger) << "something"; 
```

1.  有没有一种简单的方法来提供一个宏，该宏采用 printf 样式的 args 并将它们打印到 boost 记录器而不必使用字符串缓冲区？（我认为必须格式化为字符串会影响性能）
2.  如果没有，有没有一种方法可以格式化字符串，`va_args`而不必使用`#ifdef`格式化函数的不同平台实现？（这是首先转移到 boost.log 的重点）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-22T20:01:07.690

或者只是使用[Boost Format](http://www.boost.org/doc/libs/1_55_0/libs/format/doc/format.html)来处理 printf 格式字符串。例如，

```
template<typename Level, typename T1>
inline void log_format(
    const Level level,
    const char* const fmt,
    const T1& t1)
{
    BOOST_LOG_SEV(logger::get(), level) << boost::format(fmt) % t1;
} 
```

创建`logger`和扩展它以处理多个参数（很可能使用可变参数模板参数）作为练习留给读者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:04:55.937

不幸的是，没有`#ifdef`声明就没有干净的实现。我知道您想移植现有的日志记录以按原样提升日志记录。那将是一种不正确的做事方式。printf 设计用于 C，而 boost log 设计用于 C++。所以，我的建议是正确使用它。您可以使您的日志记录宏比您在代码示例中显示的内容更轻松。

这是我对 boost log 的实现`BOOST_LOG(logger) << "something";`，我没有将它作为`roLOG_INFO << "something";`. 我相信这个例子来自 boost log 的样本之一。

RoLog.h

```
#include <boost/logging/format_fwd.hpp>

#include <boost/logging/writer/on_dedicated_thread.hpp>

// Optimize : use a cache string, to make formatting the message faster
BOOST_LOG_FORMAT_MSG( optimize::cache_string_one_str<> ) 

#ifndef BOOST_LOG_COMPILE_FAST
#include <boost/logging/format.hpp>
#include <boost/logging/writer/ts_write.hpp>
#endif

// Specify your logging class(es)
typedef boost::logging::logger_format_write< > log_type;

// Declare which filters and loggers you'll use
BOOST_DECLARE_LOG_FILTER(roLogFilter, boost::logging::level::holder)
BOOST_DECLARE_LOG(roLog, log_type)

#define roLOG_WHERE_EACH_LINE 0
#if defined(roLOG_WHERE_EACH_LINE) && roLOG_WHERE_EACH_LINE
#   define _roLOG_WHERE << roWHERE
#else
#   define _roLOG_WHERE
#endif

// Define the macros through which you'll log
#define roLOG_DBG BOOST_LOG_USE_LOG_IF_LEVEL(roLog(), roLogFilter(), debug ) << "[  DEBUG  ]:" _roLOG_WHERE
#define roLOG_WARN BOOST_LOG_USE_LOG_IF_LEVEL(roLog(), roLogFilter(), warning) << "[ WARNING ]:" _roLOG_WHERE
#define roLOG_ERR BOOST_LOG_USE_LOG_IF_LEVEL(roLog(), roLogFilter(), error ) << "[  ERROR  ]:" _roLOG_WHERE
#define roLOG_CRIT BOOST_LOG_USE_LOG_IF_LEVEL(roLog(), roLogFilter(), fatal ) << "[ CRITICAL]:" _roLOG_WHERE
#define roLOG_INFO BOOST_LOG_USE_LOG_IF_LEVEL(roLog(), roLogFilter(), info )
struct RoLogOptions;

void roInitLogs(const RoLogOptions& options); 
```

RoLog.cpp

```
#include <Core/RoLog.h>
#include <Core/RoLogOptions.h>

#include <boost/logging/format.hpp>
#include <boost/logging/writer/ts_write.hpp>

using namespace boost::logging;

BOOST_DEFINE_LOG(roLog, log_type)
BOOST_DEFINE_LOG_FILTER(roLogFilter, level::holder)
#define BLOCK(stmts) do{stmts}while(false)
#define CHECK_AND_DO(var,stmt) if (var) stmt
//------------------------------------------------------------------------------
void roInitLogs(const RoLogOptions& options)
{
    static bool initialize = true;
    if (initialize)
    {
        // Add formatters and destinations
        // That is, how the message is to be formatted...
        CHECK_AND_DO(options.printIndex, roLog()->writer().add_formatter(formatter::idx()));
        CHECK_AND_DO(options.printTimestamp, roLog()->writer().add_formatter(formatter::time(options.timestampFormat)));
        CHECK_AND_DO(options.autoAppendLine, roLog()->writer().add_formatter(formatter::append_newline()));

        //        ... and where should it be written to
        roLog()->writer().add_destination(destination::dbg_window());
        CHECK_AND_DO(options.printToStdOut, roLog()->writer().add_destination(destination::cout()));
        if (!options.logFile.empty())
        {
            destination::file_settings settings;
            settings.do_append(options.logFileAppendExisting);
            roLog()->writer().add_destination(destination::file(options.logFile, settings));
        }
        CHECK_AND_DO(options.turnOffCache, roLog()->turn_cache_off());

        //       ... and set the log-level
        level::type boost_log_level;
        switch(options.logLevel)
        {
        case eLogLevel_None:
            boost_log_level = level::disable_all;
            break;
        case eLogLevel_All:
            boost_log_level = level::enable_all;
            break;
        case eLogLevel_Debug:
            boost_log_level = level::debug;
            break;
        case eLogLevel_Info:
            boost_log_level = level::info;
            break;
        case eLogLevel_Warning:
            boost_log_level = level::warning;
        case eLogLevel_Error:
            boost_log_level = level::error;
            break;
        case eLogLevel_Critical:
            boost_log_level = level::fatal;
            break;
        case eLogLevel_Default:
        default:
#        ifdef _DEBUG
            boost_log_level = level::debug;
#        else
            boost_log_level = level::info;
#        endif // _DEBUG
            break;
        };
        roLogFilter()->set_enabled(boost_log_level);
        initialize = false;
    }
} 
```

**免责声明**：我并没有声称这是一段完美的代码。它对我有用，我很满意。

假设您仍然想要记录 printf 样式的选项，然后**考虑以下代码**：

```
class LogUtil
{
    static void VLogError(const char* format, va_list argList)
    {
#ifdef _WIN32
        int32 size = _vscprintf(format, argList) + 1;
#else
        int32 size = vsnprintf(0, 0, format, argList) + 1;
#endif
        if (size > 0)
        {
            boost::scoped_array<char> formattedString(new char[size]);
            vsnprintf(formattedString.get(), size, format, argList);
            roLOG_ERR << formattedString.get();
        }
    }
}
#define roLOGF_ERR(format, ...) LogUtil::VLogError(format, ##__VA_ARGS) 
```

**免责声明**：我没有测试过上面的代码。您可能需要对其进行调整以使其适合您。

# java - GNUPlot 在创建后立即消失

> ID：16045540
> 
> 赞同：5
> 
> 时间：2013-04-16T19:32:43.637
> 
> 标签：java, plot, gnuplot, javaplot

我已经创建了`gnuplot`，但问题是它立即消失了。我尝试了其他线程中提出的不同解决方案，但都没有奏效。解决方案1：注释`bf.append("quit").append(NL);`文件中的行`GNUPlotParameters.java`。解决方案2：将行`gp.setPersist(true);`放在`gp.plot();`.

```
DataSetPlot plotdata = new DataSetPlot(Xvals);
plotdata.setTitle("");
GNUPlot gp = new GNUPlot("C:\\Program Files (x86)\\gnuplot\\bin\\pgnuplot.exe");
gp.addPlot(plotdata);
gp.plot();
gp.setPersist(true); 
```

那么，如何解决这个问题呢？

PS 我在 Windows 7 上运行此代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-04T11:04:50.707

不幸的是，这似乎是 Windows 下 gnuplot 中的一个错误。请参阅[此错误报告](https://sourceforge.net/p/gnuplot/bugs/1308/)。

如果你想要这种类型的功能，你有两个选择：

1.  使用[CygWin](http://www.cygwin.com/)版本的 gnuplot
2.  将结果保存到文件，或使用[JPlot](http://javaplot.panayotis.com/doc/index.html) swing 组件。

**编辑**：有一个新版本的 JavaPlot 应该可以解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:54:48.507

查看`-persist`传递给 gnuplot 的选项，您可能可以将代码中的第三行更改为

```
GNUPlot gp = new GNUPlot("C:\\Program Files (x86)\\gnuplot\\bin\\pgnuplot.exe -persist"); 
```

或者

```
GNUPlot gp = new GNUPlot("C:\\Program Files (x86)\\gnuplot\\bin\\pgnuplot.exe /noend"); 
```

[这是我的来源。](http://www.gnuplot.info/faq/faq.html#SECTION00094000000000000000)

# java - Scala 中的 Akka actor 教程到 Java 中的多线程

> ID：16045541
> 
> 赞同：0
> 
> 时间：2013-04-16T19:32:45.060
> 
> 标签：java, scala, akka, actor

我尝试将 Getting-started Akka 教程从 Scala 转换为 Java，并用线程替换 actor。

该教程可以在这里找到[http://typesafe.com/resources/tutorials/getting-started-with-akka-scala.html](http://typesafe.com/resources/tutorials/getting-started-with-akka-scala.html)

可以从 Typesafe giter8 模板存储库中签出原始 Pi.scala 文件

`g8 typesafehub/akka-first-tutorial-scala`

我想知道我所做的是否正确。

这是我的 Pi.java

```
import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.*;

public class Pi {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        Listener listener = new Listener();

        //calculate(nrOfWorkers = 10, nrOfElements = 10000, nrOfMessages = 10000)
        Master master = new Master(4, 1000, 1000, listener);
        master.calculate();
    }
}

class Worker implements Callable<Double> {

    private int start;
    private int nrOfElements;

    public Worker(int start, int nrOfElements) {
        this.start = start;
        this.nrOfElements = nrOfElements;
    }

    @Override
    public Double call() throws Exception {
        double acc = 0.0;

        for(int i = start; i < start + nrOfElements; i++) {
            acc += 4.0 * (1 - (i % 2) * 2) / (2 * i + 1);
        }
        return acc;
    }
}

class Listener {

    public void PiApproximation(double pi, long duration) {
        System.out.println(String.format("\n\tPi approximation: \t\t%s\n\tCalculation time: \t%s", pi, duration));
    }

}

class Master {

    private double pi = 0.0;
    private int nrOfResults = 0;
    private final long start = java.lang.System.currentTimeMillis();

    private int nrOfWorkers;
    private int nrOfMessages;
    private int nrOfElements;
    private Listener listener;

    private ExecutorService executor;

    public Master(int nrOfWorkers, 
                  int nrOfMessages, 
                  int nrOfElements, 
                  Listener listener) {

        this.nrOfWorkers = nrOfWorkers;
        this.nrOfMessages = nrOfMessages;
        this.nrOfElements = nrOfElements;
        this.listener = listener;

        //Round robin scheduling is not enforced here as in akka.
        executor = Executors.newFixedThreadPool(nrOfWorkers);
    }

    public void calculate() {
        List<Future<Double>> list = new ArrayList<Future<Double>>();

        for (int i = 0; i < nrOfMessages; i++) {
              Callable<Double> worker = new Worker(i * nrOfElements, nrOfElements);
              Future<Double> submit = executor.submit(worker);
              list.add(submit);
        }

        for (Future<Double> future : list) {
            try {
                pi += future.get();
            } 
            catch (InterruptedException e) { e.printStackTrace(); } 
            catch (ExecutionException e) { e.printStackTrace(); }
        }
        //send results to listener
        listener.PiApproximation(pi, java.lang.System.currentTimeMillis() - start);

        executor.shutdown();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T09:59:28.400

There is a java version of this tutorial online also: [http://doc.akka.io/docs/akka/2.0.1/intro/getting-started-first-java.html](http://doc.akka.io/docs/akka/2.0.1/intro/getting-started-first-java.html)

However, it is NOT using Threads, it is using Actors in java. Why would you want to use Threads instad of Actors?

# java - 从 Scala（或 Java）访问 HBase 的替代方法

> ID：16045543
> 
> 赞同：3
> 
> 时间：2013-04-16T19:32:48.743
> 
> 标签：java, scala, hadoop, hbase, scalding

[有人可以推荐好的解决方案（框架）来从Scala](http://www.scala-lang.org/)（或[Java](http://www.java.com/en/)）应用程序访问[HBase](http://hbase.apache.org/) on [Hadoop](http://hadoop.apache.org/)集群吗？

现在我正朝着[烫伤](https://github.com/twitter/scalding)的方向前进。我获得的原型允许我将烫伤库与[Maven](http://maven.apache.org/)结合起来，并将烫伤作业 JAR 从“库”代码包中分离出来。这反过来又允许我从外部集群运行基于烫伤的 Hadoop 作业，每个作业的开销最小（“库”代码仅在它更改时才发布到集群“分布式缓存”（很少需要），因此我可以快速加载作业代码） .

现在我实际上开始使用 HBase 本身，我看到 scalding 很好，但它对 HBase 来说并不是那么“原生”。是的，有一些类似[hbase-scalding](https://github.com/kianwilcox/hbase-scalding)的东西，但无论如何我都有一些计划未来的行动，我想知道我可能错过的其他好的解决方案。

预期：

*   应用程序（作业）的启动开销应该很低。我需要运行很多。
*   应该可以（更容易 - 更好）在没有任何 SSH 的情况下从外部集群运行作业（仅基于“hadoop jar”命令，甚至仅通过应用程序执行）。
*   乔布斯语言本身应该允许简短的逻辑语义。理想情况下，此代码应该足够简单，可以自动生成。
*   该解决方案在足够大的 HBase 表（最初最多 100.000.000 个条目）上应该是有效的。
*   好的，解决方案应该是“活的”（正在积极开发中），但在总体稳定性方面相对较好。

我认为这里的论证可能比解决方案本身更有用，这个问题应该为许多人增加一些想法。有什么平安的建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-06T09:35:49.670

如果您使用的是 scalding（我推荐），则有一个新项目，其中包含用于访问 HBase 的更新的级联和 scalding 包装器。您可能想检查一下 - [https://github.com/ParallelAI/SpyGlass](https://github.com/ParallelAI/SpyGlass)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-15T22:26:17.757

HPaste [http://www.gravity.com/labs/hpaste/](http://www.gravity.com/labs/hpaste/)可能是您正在寻找的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-11T00:03:54.983

您可能对[Kiji 项目 (https://github.com/kijiproject/)](https://github.com/kijiproject/)感兴趣。它在 HBase 之上提供了一个“模式化”层。

它还有一个 Scalding 适配器 ( [KijiExpress](https://github.com/kijiproject/kiji-express) )，因此您可以对源自这些模式化 HBase 表的元组“管道”执行功能集合操作（​​map、groupby 等）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-13T21:55:25.980

**更新（2014 年 8 月）：** Stratosphere 现在称为[Apache Flink](http://flink.incubator.apache.org/)（孵化中）

查看[平流层](http://stratosphere.eu)。如果提供[Scala API](http://stratosphere.eu/docs/0.4/programming_guides/scala.html)并具有[HBase 模块](https://github.com/stratosphere/stratosphere/tree/master/stratosphere-addons/hbase)并且正在积极开发中。

*   应该可以在几秒钟左右的时间内启动作业（取决于您的集群大小。）
*   您可以远程提交作业（它有一个名为的类`RemoteExecutor`，允许您以编程方式在远程集群上提交作业）

如果您还有其他问题，请与我联系！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-12T04:31:04.560

我目前正在尝试在空闲时间维护 hbase-scalding。因为我也在学习 Scala。

请看一下[github](https://github.com/luzhuomi/scalding-hbase/)

# php - 如何在所有浏览器中强制下载文件？

> ID：16045546
> 
> 赞同：-1
> 
> 时间：2013-04-16T19:32:52.463
> 
> 标签：php

我正在研究允许用户使用 php 下载 pptx 和 zip 文件的脚本，但是这个脚本在不同的浏览器上表现不同。我尝试了互联网上的许多脚本，但没有一个能正常工作，所以我做了这个，从不同的脚本中收集块。

1.  firefox => 完美运行
2.  Opera => 将文件下载为 HTM 文件
3.  Safari => 0kb 文件
4.  IE => 捕获旧文件

我的代码：-

```
// content type for pptx file 
$ctype = "application/vnd.openxmlformats-officedocument.presentationml.presentation";
$file = "http://www.abc.com/presentation.pptx";
header("Pragma: public"); 
header("Expires: 0"); 
header("Cache-Control: must-revalidate, post-check=0, pre-check=0"); 
header("Cache-Control: private",false); // required for certain browsers 
header("Content-Type: ".$ctype); 
header("Content-Disposition: attachment; filename=\"".basename($file)."\";" ); 
header("Content-Transfer-Encoding: binary"); 
header("Content-Length: ".filesize($file)); 

ob_clean(); 
flush(); 
readfile( $file); 
```

如何让所有浏览器可靠地下载文件，而不是显示上面看似随机的行为？

编辑：下面是对我有用的代码，我不确定问题是什么，不需要的标题或文件路径？我做了两个改变并且它起作用了。

```
$ctype = "application/vnd.openxmlformats-officedocument.presentationml.presentation";
$file = "Presentation3.pptx";
header("Pragma: public"); 
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header("Cache-Control: must-revalidate, post-check=0, pre-check=0"); 
header("Content-Type: ".$ctype); 
header("Content-Disposition: attachment; filename=\"".basename($file)."\";" ); 
header("Content-Transfer-Encoding: binary"); 
header("Content-Length: ".filesize($file)); 
readfile( $file); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:55:56.023

在我对您的代码的测试中，如果使用本地文件而不是带有 url 的 url 也可以给我 0kb

我在 Firefox、IE、Chrome 中测试所有结果都是一样的

```
 // content type for pptx file 
    $ctype = "application/vnd.openxmlformats-officedocument.presentationml.presentation";

    $file = "presentation.pptx";//attention  

    header("Pragma: public"); 
    header("Expires: 0"); 
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0"); 
    header("Cache-Control: private",false); // required for certain browsers 
    header("Content-Type: ".$ctype); 
    header("Content-Disposition: attachment; filename=\"".basename($file)."\";" ); 
    header("Content-Transfer-Encoding: binary"); 
    header("Content-Length: ".filesize($file)); 

    ob_clean(); 
    flush(); 
    readfile( $file); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:35:04.457

请注意，IOS 浏览器下载存在一些问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T20:07:22.593

如果文件在您的服务器中，请不要使用 URL。如果它是外部文件，我会先将其写入您的服务器，然后将其打印给用户。

我也会删除该`header("Cache-Control: private",false);`行；并使用`header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');`而不是`header("Expires: 0");`. 它总是以这种方式对我有用:)

还可以尝试删除`ob_clean(); flush();`（因为在发送文件之前没有任何东西要刷新或清理）。

# bash - 为什么 SSH 会破坏 Bash 中的控制流

> ID：16045547
> 
> 赞同：0
> 
> 时间：2013-04-16T19:32:55.743
> 
> 标签：bash, ssh, while-loop

我有以下脚本扫描文件，每一行都是远程节点的主机名。

```
echo -e "node1\nnode2\nnode3" > tempfile
while read aline; do
  echo "@$aline";  
done < tempfile 
```

这会在三行中正确`@node1` `@node2`生成。`@node3`但是当我`ssh`在循环内添加时，如下

```
while read aline; do
  echo "@$aline"; 
  ssh $aline 'jps';  
done < tempfile 
```

循环将在第一次调用`ssh`and 后中断，并且只打印`@node1`（没有`@node2`and ``@node3`）。

我在问幕后发生了什么（看起来像是未定义的行为）？以及如何在不破坏 while 循环的情况下实现相同的功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T19:35:25.347

SSH 正在使用标准输入（从 重定向`tempfile`）并弄乱了`read`s. 尝试重定向标准输入。

```
ssh -n $aline 'jps' 
```

来自`man ssh`：

> **`-n`** 从 /dev/null 重定向标准输入（实际上，阻止从标准输入读取）。

# javascript - 以正确的方式使用 Backbone 集合在子视图中传递它们，然后在模板引擎中传递它们

> ID：16045549
> 
> 赞同：3
> 
> 时间：2013-04-16T19:33:01.647
> 
> 标签：javascript, design-patterns, backbone.js, template-engine

我正在尝试了解如何使用`Backbone` `collections`并将它们拉入`template engine`由`sub view`.

这是我在我的应用程序中尝试的逻辑：

![在此处输入图像描述](https://i.stack.imgur.com/rj1cr.png)

我`ajax request`返回给我这个对象：

```
{
    "products":[
        {
            "id":"43",
            "text":"Sunset Chips",
            "image":"43.png"
        },{
            "id":"107",
            "text":"Pringles Hot & Spicy",
            "image":"107.png"
        }
    ],
    "brands":[
        {
            "id":"132",
            "text":"P&G",
            "image":"132.png"
        },{
            "id":"27",
            "text":"Kinder",
            "image":"27.png"
        }
    ]
} 
```

`jQuery`我用's方法抓取它并`$.ajax`在我的视图中为我的 Backbone 应用程序管理它：

```
<script type="text/javascript">

var search = {};

search.app = {};
search.app.id = "#search-results";

search.product = {};
search.product.defaults = {
    id:0,
    text:"<?php echo __('No results here');?>",
    image:"<?php echo $this->webroot;?>files/product/default.png",
};

$(function(){

    var SearchApp = new Search.Views.App({
        id:"#search-results"
    });

    var ProductList = new Search.Collections.Products();
    var subView;

    function parseResults (response, search) {

        for (var i = response.products.length - 1; i >= 0; i--) {
            ProductList.add([new Search.Models.Product(response.products[i])]);
        };

        subView = new Search.Views.Product ({
            collection:ProductList,
            id:"#product-results",
            template:"#results-product-template" // solo in this.options.template
        });

        updateResults();
    }

    function updateResults () {
        console.log('updateResults: Ritorno il risultato quando hunter riceve una risposta dal server');
        if ($('#search-results').length == 0) {
            $('div.main > section:first-child').before('<section id="search-results"></section>');
        }
        SearchApp.renderProductCollection(subView);
    }

    $('#search-results .close').on('click', function () {
        $('#search-results').animate({height:0}, 500, function () {
            $(this).remove();   
        })
    });

    var callbacks = {
        on_response:parseResults // function presente in backbone.search.js
    };

    $('#hunter').hunter({url:'<?php echo $this->request->base; ?>/searches/default_search', callback:callbacks, ajax_params:{limit:10, term:'%%'}});

});
</script> 
```

这是我的主干应用程序：

```
var Search = {
    Models: {},
    Collections: {},
    Views: {},
    Templates:{}
}

Search.Models.Product = Backbone.Model.extend({
    defaults: search.product.defaults || {},
    initialize:function () {
        console.log("initialize Search.Models.Product");
        this.on("change", function (){
            console.log("chiamato evento change del Model Search.Models.Product");
        });
        this.on("change:text", function () {
            console.log("chiamato evento change:text del Model Search.Models.Product");
        });
    }
});

Search.Collections.Products = Backbone.Collection.extend({
    model: Search.Models.Product,
    initialize:function () {
        console.log("initialize Search.Collections.Products");
        console.log(this);
        console.log(this.length);
        console.log(this.models);
    }
});

Search.Views.App = Backbone.View.extend({
    initialize:function () {
        console.log("initialize Search.Views.App");
        this.$prd = this.$('#product-results');
    },
    render:function () {

        console.log("render Search.Views.App");
    },
    renderProductCollection:function (subView) {
        console.log("Search.Views.App > renderProductCollection");
        console.log('subView.getTemplate() => ' + subView.getTemplate());
        $(this.id).html(subView.getTemplate());
    }
});

Search.Views.Product = Backbone.View.extend({
    initialize:function () {
        console.log("initialize Search.Views.Product");
    },
    getTemplate:function (data) {
        if (data == null || data == undefined) {
            data = this.collection.toJSON() || this.model.toJSON(); 
        }
        var template = Handlebars.compile($(this.options.template).html());
        console.log(data);
        return '<ul id="product-results" class="w-1-4">' + template(data) + '</ul>';
    },
    render:function () {
        console.log("render Search.Views.Product");
        return this;
    }
}); 
```

`Handlesbar`模板很简单：

```
<ul class="w-1-4">
    <li>
        <b>Products</b>
    </li>
   {{#each products}}
    <li>
        <a href="{{url}}">
            <div class="origin {{type}}" title="{{name}}"><img src="'.$this->webroot.'img/icons/16/origin/{{icon}}"></div>
        </a>
        <div>
            <a href="{{url}}" class="font-default-bold {{model}}-btn">{{name}}</a>
            {{#support}}<a href="{{support.url}}" class="font-small">{{support.name}}</a>{{/support}}
        </div>
    </li>
    {{/each}}
</ul> 
```

我的问题是当我尝试解析`Handlesbar`模板内的数据时，因为我已经解析了里面的数据`sub view collection`，所以我的`Array`结构如下：

```
[
    {
        "id":"43",
        "text":"Sunset Chips",
        "image":"43.png"
    },{
        "id":"107",
        "text":"Pringles Hot & Spicy",
        "image":"107.png"
    }
] 
```

有了这些数据`products`，由于`parseResults`在视图中，我将 ajax 放入集合中，因此我不再拥有该对象。

如何解析`products`没有道具名称的数组`products`，或者如何以正确的方式保存数据？

我知道在我的应用程序中我可以做这样的事情来解决问题：

```
var container = new array();
container['products'] = this.collection.toJSON();
data = container;

var template = Handlebars.compile($(this.options.template).html());
return '<ul id="product-results" class="w-1-4">' + template(data) + '</ul>'; 
```

但这是正确的方法还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:08:27.357

如果您使用 Backbone，则不需要使用 $.ajax。

使用 collection.fetch [http://backbonejs.org/#Collection-fetch](http://backbonejs.org/#Collection-fetch)

也看起来服务器没有给你你需要的答案，所以 Backbone 有自己的解析： [http ://backbonejs.org/#Collection-parse](http://backbonejs.org/#Collection-parse)

我也是逻辑少模板的粉丝。所以通过集合的迭代必须在视图中而不是在模板中。也请检查这个（特别是第二点）： http: [//ozkatz.github.io/avoiding-common-backbonejs-pitfalls.html](http://ozkatz.github.io/avoiding-common-backbonejs-pitfalls.html)

以正确的方式使用集合，然后在视图中渲染它，您可以监听 add 或 reset 事件并以这种方式填充集合。this.collection.on('add', this.render); //通过模型获取模型 this.collection.on('reset', this.render); //获取所有模型（需要在 fetch 调用中指定一个参数 {reset : true}

# jquery - 使用 jquery 在多个类之间进行更改

> ID：16045551
> 
> 赞同：1
> 
> 时间：2013-04-16T19:33:10.987
> 
> 标签：jquery, animation

我有以下代码：

```
<div class="drawing1"></div>    
<button id="start">Begin</button> 
```

当用户单击 Button 时，分配给 DIV 元素的类应该从绘图 1 变为绘图 5，穿过其间的每个绘图（总共有 5 个绘图）。它也应该有大约 500 的延迟（）。我的第一个想法是：

```
$('div').delay(800).toggleClass('drawing1 drawing2'); 
```

哪个有效，但是当我尝试添加其余图纸时（尝试使用切换类和添加/删除类的几种方法），它要么跳到最后一个，要么只跳到第二个。

我该如何设置它，这样我就可以从一个绘图课转到下一个绘图课，逐个逐一进行，并为每个绘图课应用延迟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:38:37.063

```
var i = 2; //Assumes drawing1 is already applied to the div
var nextDrawing = function(){
    $("div").removeClass()
            .addClass("drawing"+i);

    i = ((i + 1) % 5); //To cycle from 1 to 5
    i = i == 0 ? 5 : i;
}
$('#start').click(function(){
    setInterval(nextDrawing, 500);
}); 
```

应该做的伎俩。

编辑：如果有人多次单击按钮，则以下修改可能对清除间隔有用。

```
var i = 2; //Assumes drawing1 is already applied to the div
var nextDrawing = function(){
    $("div").removeClass()
            .addClass("drawing"+i);

    i = ((i + 1) % 5); //To cycle from 1 to 5
    i = i == 0 ? 5 : i;
}

var intervalID = undefined;
$('#start').click(function(){
    if( intervalID != undefined )
    {
        clearInterval(intervalID);
    }
    intervalID = setInterval(nextDrawing, 500);
}); 
```

这是一个工作示例：http: [//jsfiddle.net/ajhuU/](http://jsfiddle.net/ajhuU/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:37:37.700

```
var leMethod = function(){ // wrapping in a method localizes variables
  var max = 5;             // nr of drawings
  var activeIdx = 0;       // active drawing
  var timeout = 500;       // the time between changes
  var originalClass = 'some classes that are always there';

  setTimeout(function(){               // execute the method on timeout expiration
    var el = $('div');                 // get whatever element you wish to manage
    el.attr('class', originalClass);   // restore original class
    el.addClass('classNr'+activeIdx);  // add your cycle class
    activeIdx = (activeIdx+1) % max;   // update index
  }, timeout);
};

leMethod(); 
```

# database - 数据库 | Google 产品 Feed 字段长度

> ID：16045552
> 
> 赞同：0
> 
> 时间：2013-04-16T19:33:17.017
> 
> 标签：database, product

试图构建一个数据库来保存一堆产品数据。该计划是以编程方式生成 TXT（文本制表符分隔）文件并从数据库中的数据上传到 Google、Amazon 和 Bing（都使用 Google Product Feeds 文件格式）。

我现在遇到的问题是我似乎不得不猜测大多数可用字段的最大字段长度。我在几个地方找到了告诉我哪些字段是必需的/可选的以及它们的用途，但是我在哪里可以找到它们的长度。在全自动产品 Feed 系统中了解这一点至关重要，因为如果 Google 产品 Feed 无效（太长），我们不想从仓库系统中提取数据并将其插入到我们的 Product Feed 数据库中。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:35:20.917

谷歌购物将允许最多 72 chr 的标题。描述字段通常是无限的。对于其他任何事情，无论如何您通常不会有太长的时间。

已经有一些程序可以做到这一点

# c++ - CUDA“未知错误”，原因不明

> ID：16045555
> 
> 赞同：2
> 
> 时间：2013-04-16T19:33:28.653
> 
> 标签：c++, c, visual-studio-2010, cuda, nvidia

在我当前的项目中，一个电话`cudaGetLastError()`正在返回`unknown error`，我不知道为什么。代码编译得很好，但它的行为不像我想要的那样。

下面是一个简短的、*不可*编译的示例，说明相关代码的组成：

## CU_Main.cu

### 下面是 CUDA 内核：

```
//My CUDA kernel
__global__ void CU_KernelTest(Kernel* matrix){
    int idx = blockIdx.x * blockDim.x + threadIdx.x;  
    int idy = blockIdx.y * blockDim.y + threadIdx.y;  

    if(idx == 0 && idy == 0){
            printf("ID is: %d\n", idx);
            matrix->set(1,1, 16.0f);
    }
} 
```

### 这是主机代码：

```
//A host function which is called when a button is clicked
int HOST_OnbuttonClick(){
    Kernel* matrix = new Kernel(3,3,2);
    Kernel* device_matrix;

    cudaMalloc(&device_matrix, sizeof(Kernel));
    cudaMemcpy(device_matrix, matrix, sizeof(Kernel), cudaMemcpyHostToDevice);

    CU_KernelTest<<<256, 256>>>(device_matrix);
    cudaDeviceSynchronize();

    cudaError_t err = cudaGetLastError();
    if (err != cudaSuccess) {
        printf("Error: %s\n", cudaGetErrorString(err));
    }

    cudaFree(device_matrix);
    return 0.0f;
} 
```

当`matrix->set(1,1, 16.0f);`被包含在 cuda 内核中时，`(err != cudaSuccess)`返回 true 并打印出来`UNKNOWN ERROR`，而如果我注释掉`set`，我不会收到错误。

与此相关的另一个`struct`是我自己的卷积核设计助手，自然称为`Kernel`.

## 内核.cuh

```
struct Kernel {
    private :
        float* kernel;
        int rows;
        int columns;

    public :

        __device__ __host__
        Kernel(int _rows, int _columns, float _default) {
            rows = _rows;
            columns = _columns;
            kernel = new float[rows * columns];

            for(int r = 0; r < rows; r++){
                for(int c = 0; c < columns; c++){
                    kernel[r * rows + c] = _default;
                }
            }
        }

        __device__ __host__
        void set(int row, int col, float value){
            kernel[row * rows + col] = value;
        }
} 
```

此设计的目标是能够为主机上的内核设置所有值，将其发送到 CUDA 内核，在那里设置值，然后在主机上检索更新的对象。

所以，真的有两个问题，为什么我会收到一条`unknown error`消息，代码在语法上是否正确，它应该可以工作？如果需要更多信息，请告诉我。

### 以下是内存检查器的结果：

```
Nsight Debug
================================================================================
CUDA Memory Checker detected 1 threads caused an access violation:
Launch Parameters
    CUcontext    = 071c7340
    CUstream     = 08f3e3b8
    CUmodule     = 08fa97a8
    CUfunction   = 08fdbbe8
    FunctionName = _Z13CU_KernelTestP6Kernel
    gridDim      = {1,1,1}
    blockDim     = {256,1,1}
    sharedSize   = 128
    Parameters:
        matrix = 0x06b60000  {kernel = 0x07a31718  ???, rows = 3, columns = 3}
    Parameters (raw):
         0x06b60000
GPU State:
   Address  Size      Type  Mem       Block  Thread         blockIdx  threadIdx      PC  Source
-----------------------------------------------------------------------------------------------
  07a31728     4    adr st    g           0       0          {0,0,0}    {0,0,0}  000260  c:\users

Summary of access violations:
c:\users....kernel.cuh(26): error MemoryChecker: #misaligned=0  #invalidAddress=2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:01:10.487

您的`Kernel`类包含一个指针。将类复制到设备时，设备上有一个主机指针。在设备上取消引用它会给你这个无效的地址访问冲突。

这似乎是造成混乱的常见原因。罗伯特·克罗维拉昨天刚刚[解释过](https://stackoverflow.com/a/16024373/1662425)。

# mysql - 在多个触发器中使用存储过程

> ID：16045560
> 
> 赞同：0
> 
> 时间：2013-04-16T19:33:48.347
> 
> 标签：mysql, sql, stored-procedures, triggers

除了 notes 表之外，我还将这个相同的触发器应用于大约 15 个其他表。不确定，但似乎存储过程会消除重复的代码。这是存储过程的好应用程序吗？如果是这样，如何实施？

```
CREATE TRIGGER tg_notes_ins BEFORE INSERT ON notes FOR EACH ROW
BEGIN
    IF NEW.created_by_user IS NULL OR NEW.created_by_user = '' THEN
        SET NEW.created_by_user = @users_id;
    END IF;
    IF NEW.modified_by_user IS NULL OR NEW.modified_by_user = '' THEN
        SET NEW.modified_by_user = @users_id;
    END IF;
END$$

CREATE TRIGGER tg_notes_upd BEFORE UPDATE ON notes FOR EACH ROW
BEGIN
    IF NEW.modified_by_user = OLD.modified_by_user THEN
        SET NEW.modified_by_user = @users_id;
    END IF;
END$$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:11:10.243

我并不是说这是如何做到的，但它似乎有效，并且会感谢任何意见。谢谢

```
DELIMITER $$

CREATE PROCEDURE `createRecord` ()
BEGIN
    IF NEW.created_by_user IS NULL OR NEW.created_by_user = '' THEN
        SET NEW.created_by_user = @users_id;
    END IF;
    IF NEW.modified_by_user IS NULL OR NEW.modified_by_user = '' THEN
        SET NEW.modified_by_user = @users_id;
    END IF;
END$$

CREATE PROCEDURE `modifyRecord` ()
BEGIN
    IF NEW.modified_by_user = OLD.modified_by_user THEN
        SET NEW.modified_by_user = @users_id;
    END IF;
END$$

CREATE TRIGGER tg_notes_upd BEFORE UPDATE ON notes FOR EACH ROW
BEGIN
    CALL createRecord();
END$$

CREATE TRIGGER tg_notes_ins BEFORE INSERT ON notes FOR EACH ROW
BEGIN
    CALL modifyRecord();
END$$

DELIMITER ; 
```

# java - java hibernate覆盖枚举/字符串映射值

> ID：16045561
> 
> 赞同：5
> 
> 时间：2013-04-16T19:33:51.573
> 
> 标签：java, hibernate, enums, mapping

我有以下 Hibernate 模型：

```
@Entity
@Table(name = "category")
public class Category {

    @Enumerated(EnumType.STRING)
    @Column(name = "type")
    private CategoryType type; 
```

这是hibernate引用的枚举：

```
public enum CategoryType {
    INCOME, OUTCOME;
} 
```

对应的数据库字段是一个 varchar，它有 2 个可能的值：“CategoryIncome”和“CategoryOutcome”。

这个方法实际上调用了hibernate：

```
public List<Category> findAllByType(CategoryType type) {
    session = sessionFactory.openSession();
    tx = session.beginTransaction();
    Query query = session.createQuery(
        "FROM Category WHERE type = :type");
    query.setParameter("type", type);
    List list = query.list();
    tx.commit();
    session.close();
    return list;
} 
```

我设法让我的代码工作（我的意思是它可以编译），但它工作得不好 - 它执行以下 SQL 查询：

```
WHERE type = "INCOME" 
```

而我希望它是：

```
WHERE type = "CategoryIncome" 
```

如何将枚举值映射到休眠的字符串值？我知道这`EnumType.STRING`告诉休眠将枚举值转换为字符串（可能是 EnumType.ORDINAL 将其转换为整数）。但是如何覆盖默认的枚举字符串映射？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T19:54:31.940

您必须使用自定义的用户类型来实现 Hibernate 持久性，Hibernate 使用`name()`函数`enum`来获取字符串表示，而不是`toString()`.

请参阅此 [Hibernate @Enumerated 映射](https://stackoverflow.com/questions/5450902/hibernate-enumerated-mapping)

# c# - 如何访问 JArray 的元素（或迭代它们）

> ID：16045569
> 
> 赞同：61
> 
> 时间：2013-04-16T19:34:21.623
> 
> 标签：c#, .net, twitter, json.net

我有以下从 Twitter 获得的 Json

```
 +      token   {[
  {
    "trends": [
      {
        "name": "Croke Park II",
        "url": "http://twitter.com/search?q=%22Croke+Park+II%22",
        "promoted_content": null,
        "query": "%22Croke+Park+II%22",
        "events": null
      },
      {
        "name": "#twiznight",
        "url": "http://twitter.com/search?q=%23twiznight",
        "promoted_content": null,
        "query": "%23twiznight",
        "events": null
      },
      {
        "name": "#Phanhattan",
        "url": "http://twitter.com/search?q=%23Phanhattan",
        "promoted_content": null,
        "query": "%23Phanhattan",
        "events": null
      },
      {
        "name": "#VinB",
        "url": "http://twitter.com/search?q=%23VinB",
        "promoted_content": null,
        "query": "%23VinB",
        "events": null
      },
      {
        "name": "#Boston",
        "url": "http://twitter.com/search?q=%23Boston",
        "promoted_content": null,
        "query": "%23Boston",
        "events": null
      },
      {
        "name": "#rtept",
        "url": "http://twitter.com/search?q=%23rtept",
        "promoted_content": null,
        "query": "%23rtept",
        "events": null
      },
      {
        "name": "Facebook",
        "url": "http://twitter.com/search?q=Facebook",
        "promoted_content": null,
        "query": "Facebook",
        "events": null
      },
      {
        "name": "Ireland",
        "url": "http://twitter.com/search?q=Ireland",
        "promoted_content": null,
        "query": "Ireland",
        "events": null
      },
      {
        "name": "Everton",
        "url": "http://twitter.com/search?q=Everton",
        "promoted_content": null,
        "query": "Everton",
        "events": null
      },
      {
        "name": "Twitter",
        "url": "http://twitter.com/search?q=Twitter",
        "promoted_content": null,
        "query": "Twitter",
        "events": null
      }
    ],
    "as_of": "2013-04-17T13:05:30Z",
    "created_at": "2013-04-17T12:51:41Z",
    "locations": [
      {
        "name": "Dublin",
        "woeid": 560743
      }
    ]
  }
]}  Newtonsoft.Json.Linq.JToken {Newtonsoft.Json.Linq.JArray} 
```

问题是我似乎无法访问任何元素。我已经尝试过 foreach 循环和正常的 for 循环，但似乎永远无法访问单个元素，它总是最终访问整个区域。

知道如何访问这个 Json JArray 中的各个元素吗？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2017-01-23T16:19:16.643

有一个更**简单**的解决方案。
只需将 as 的项目`JArray`视为`JObject`。

假设我们有这样的 JSON 对象数组：

```
JArray jArray = JArray.Parse(@"[
              {
                ""name"": ""Croke Park II"",
                ""url"": ""http://twitter.com/search?q=%22Croke+Park+II%22"",
                ""promoted_content"": null,
                ""query"": ""%22Croke+Park+II%22"",
                ""events"": null
              },
              {
                ""name"": ""Siptu"",
                ""url"": ""http://twitter.com/search?q=Siptu"",
                ""promoted_content"": null,
                ""query"": ""Siptu"",
                ""events"": null
              }]"); 
```

要访问每个项目，只需执行以下操作：

```
foreach (JObject item in jArray) // <-- Note that here we used JObject instead of usual JProperty
{
    string name = item.GetValue("name").ToString();
    string url = item.GetValue("url").ToString();
    // ...
} 
```

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2013-04-16T19:48:39.317

更新 - 我验证了以下作品。也许您的 JArray 的创建不太正确。

```
[TestMethod]
    public void TestJson()
    {
        var jsonString = @"{""trends"": [
              {
                ""name"": ""Croke Park II"",
                ""url"": ""http://twitter.com/search?q=%22Croke+Park+II%22"",
                ""promoted_content"": null,
                ""query"": ""%22Croke+Park+II%22"",
                ""events"": null
              },
              {
                ""name"": ""Siptu"",
                ""url"": ""http://twitter.com/search?q=Siptu"",
                ""promoted_content"": null,
                ""query"": ""Siptu"",
                ""events"": null
              },
              {
                ""name"": ""#HNCJ"",
                ""url"": ""http://twitter.com/search?q=%23HNCJ"",
                ""promoted_content"": null,
                ""query"": ""%23HNCJ"",
                ""events"": null
              },
              {
                ""name"": ""Boston"",
                ""url"": ""http://twitter.com/search?q=Boston"",
                ""promoted_content"": null,
                ""query"": ""Boston"",
                ""events"": null
              },
              {
                ""name"": ""#prayforboston"",
                ""url"": ""http://twitter.com/search?q=%23prayforboston"",
                ""promoted_content"": null,
                ""query"": ""%23prayforboston"",
                ""events"": null
              },
              {
                ""name"": ""#TheMrsCarterShow"",
                ""url"": ""http://twitter.com/search?q=%23TheMrsCarterShow"",
                ""promoted_content"": null,
                ""query"": ""%23TheMrsCarterShow"",
                ""events"": null
              },
              {
                ""name"": ""#Raw"",
                ""url"": ""http://twitter.com/search?q=%23Raw"",
                ""promoted_content"": null,
                ""query"": ""%23Raw"",
                ""events"": null
              },
              {
                ""name"": ""Iran"",
                ""url"": ""http://twitter.com/search?q=Iran"",
                ""promoted_content"": null,
                ""query"": ""Iran"",
                ""events"": null
              },
              {
                ""name"": ""#gaa"",
                ""url"": ""http://twitter.com/search?q=%23gaa"",
                ""promoted_content"": null,
                ""query"": ""gaa"",
                ""events"": null
              },
              {
                ""name"": ""Facebook"",
                ""url"": ""http://twitter.com/search?q=Facebook"",
                ""promoted_content"": null,
                ""query"": ""Facebook"",
                ""events"": null
              }]}";

        var twitterObject = JToken.Parse(jsonString);
        var trendsArray = twitterObject.Children<JProperty>().FirstOrDefault(x => x.Name == "trends").Value;

        foreach (var item in trendsArray.Children())
        {
            var itemProperties = item.Children<JProperty>();
            //you could do a foreach or a linq here depending on what you need to do exactly with the value
            var myElement = itemProperties.FirstOrDefault(x => x.Name == "url");
            var myElementValue = myElement.Value; ////This is a JValue type
        }
    } 
```

因此，在您的 JArray 上调用 Children 以获取 JArray 中的每个 JObject。在每个 JObject 上调用 Children 以访问对象属性。

```
foreach(var item in yourJArray.Children())
{
    var itemProperties = item.Children<JProperty>();
    //you could do a foreach or a linq here depending on what you need to do exactly with the value
    var myElement = itemProperties.FirstOrDefault(x => x.Name == "url");
    var myElementValue = myElement.Value; ////This is a JValue type
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-07-30T02:44:43.833

一旦有了 JArray，您就可以像对待任何其他 Enumerable 对象一样对待它，并且使用 linq 您可以访问它们、检查它们、验证它们并选择它们。

```
var str = @"[1, 2, 3]";
var jArray = JArray.Parse(str);
Console.WriteLine(String.Join("-", jArray.Where(i => (int)i > 1).Select(i => i.ToString()))); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-08T12:05:49.490

```
void ConvertToJArray(object headers)
{
    //where headers is your Twitter response
    JObject JObj = (JObject)headers;//Parse to JObject
    JArray JArr = (JArray)JObj["trends"];//Get the trends array as JArray
    for (int i = 0; i < JArr.Count; i++)
    {
        var Name = JArr[i]["name"].ToString();
        var URL = JArr[i]["url"].ToString();
    }
} 
```

# java - 在Java中将两个位集相交成一个新的位集的最快方法是什么？

> ID：16045572
> 
> 赞同：1
> 
> 时间：2013-04-16T19:34:34.763
> 
> 标签：java, performance, bitset, set-intersection

有没有比这更快的时间：

```
// say we alread have BitSet bs1 and bs2
BitSet bs3 = (BitSet) bs1.clone();
bs3.and(bs2); 
```

也许转换为整数并添加为数字然后转换回`BitSet`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:38:26.887

我能想到的唯一选择是

```
Bitset newBitset = new Bitset(bs1.size());
newBitset.or(bs1).and(bs2); 
```

您需要对两者进行计时，看看哪个更快；我的替代方案可能会稍微快一些，因为您没有调用覆盖方法并且您没有进行任何强制转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:56:54.607

如果你真的需要速度，我猜几乎 BitSet 所做的任何事情都不会像对整数的按位运算一样快——&、| 等。当然，你没有很多按位运算——处理您在 BitSet 对象中执行的整数；当您决定达到最大速度时，您会放弃它。

# database - 创建简单投票系统的最佳方式

> ID：16045574
> 
> 赞同：1
> 
> 时间：2013-04-16T19:34:53.213
> 
> 标签：database, client-side, server-side

我想创建一个简单的投票系统，人们可以为候选人投票，每个候选人的投票动态显示在网站上。

我是一名前端开发人员，并不太经常使用服务器端代码，所以我不确定如何处理这个问题。

是使用服务器端语言（如 php）和 SQL 的最佳方式吗？或者这可以用 HTML5/Javascript/jQuery 来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:54:07.453

正如您所说，您是前端开发人员，这不足以创建一个动态的**简单投票系统**
在编写应用程序之前，您需要确定它的架构

*   3层
*   MVC

两种架构都涉及 3 个不同的组件

1.  前端（html/css/javascript/JQUERY 一切由浏览器呈现）
2.  服务器端 (PHP/JAVA/RUBY)
3.  DATABASE 端（MYSQL /MS-SQL 使用 SQL 作为语言）

所以你需要覆盖服务器端和数据库端，以便开发一个动态系统。你也可以使用[Ajax](http://www.w3schools.com/ajax/)来改进你的系统
简而言之，你也需要持久性存储，所以服务器端将占据你的前端（用户数据）到持久性存储，如（数据库）

# iphone - Objective - C 如何使用 View Controller iphone 管理多个视图

> ID：16045575
> 
> 赞同：1
> 
> 时间：2013-04-16T19:34:56.587
> 
> 标签：iphone, ios, objective-c, uiviewcontroller, views

我是开发 iOS 应用程序的新手。我正在尝试开发一个多视图应用程序。我的疑问是如何使用 View Controller 管理多视图应用程序，我的意思是，我不想使用 Navigation Controller 或 Tab Controller。

我的想法是显示第一个视图来选择语言，之后，我想在表格视图中显示一些不同的配置文件。当您选择配置文件时，您会进入一个菜单，其中有一些不同的功能（一旦进入此菜单，我可能会使用导航控制器）。

我的问题是我不知道如何管理这两个第一个视图。我不知道我是否必须在 appDelegate 中声明它们，或者是否可以将它们嵌套在一起，我的意思是，我做第一个视图，当我按下按钮时，我声明新视图。在新视图中，当我在表格视图中按下一行时，我会创建另一个视图。

我知道这有点令人困惑，所以我希望你能很好地理解它。

编辑：

我想澄清一下我没有使用故事板。我的主要疑问是如何处理所有 de view 控制器，我是否必须在 appDelegate 中声明所有这些控制器？或者我可以在每个控制器中声明每个视图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:48:24.160

如果您正在使用情节提要，您可以使用 Segue 在视图之间导航，这样您就可以显示您的第一个视图，然后您可以将一个按钮绑定到下一个视图（通过控制在情节提要中拖动）。如果您想以编程方式进行转换，可以使用 performSegueWithIdentifier 方法。您可以使用相同的方法从 tableViewController 到下一个 viewController，方法是使用 tableViewController 的 didSelectRowAtIndexPath 委托方法中的 performSegueWithIdentifier 方法（即当用户点击单元格时）。

那应该让你开始。祝你好运！

编辑：

你真的应该使用故事板。这是这些天做事的方式。如果您拒绝，那么最好的方法是创建一个容器视图控制器来管理您的“子”视图控制器。您可以在此处找到有关执行此操作的信息，以及显示/删除子视图控制器所需的方法：

[自定义容器视图控制器](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:50:13.233

您可以使用具有“隐藏”属性的导航控制器。

self.navController.navigationBarHidden = YES;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T01:05:09.817

如果您想拥有两个不同的视图并在它们之间转换，您将需要使用模态呈现的 UIViewControllers。这是[Apple的指南](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)。

# clojure - 以 * 结尾的 Clojure 方法

> ID：16045576
> 
> 赞同：4
> 
> 时间：2013-04-16T19:34:56.957
> 
> 标签：clojure

以结尾的方法`*`往往有什么共同点？我见过一些，但不知道这是否是一个既定的命名约定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:05:52.850

一般来说，我已经看到这用于区分执行相同操作但具有不同签名的函数，特别是在重载会产生语义冲突的情况下。例如，`list*`不能表示为的重载，`list`因为它们以不同的方式使用可变参数。

在许多情况下（但不是全部），`*`表单由非`*`版本调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T04:23:23.767

除了其他答案提到的内容外，此约定用于非 * 版本是宏并且这些宏发出调用 * 函数的代码的情况。即使在`clojure.core`,`let`和中，`fn`也是其结果代码分别调用`let*`和`fn*`函数的宏。其他示例是[sqlkorma](https://github.com/korma/Korma/blob/master/src/korma/core.clj)，其中非 * （`where`,`delete`等`update`）是宏， * （`where*`等`delete*`）是函数。

使用这种模式的原因是在某些情况下使用宏版本的 API 是不可行的（除了使用 eval，因为你在编译时没有信息），在这种情况下你可以使用 *基于函数。

# linux - linux/powerpc 上的动态链接失败

> ID：16045578
> 
> 赞同：0
> 
> 时间：2013-04-16T19:34:59.000
> 
> 标签：linux, boost, dynamic-linking, powerpc

我有一个运行软处理器 (PowerPC) 的 Xilinx FPGA。我最近为 PowerPC 交叉编译了 Boost 库并想对其进行测试。所以我使用了其中一个示例程序并尝试为我的目标交叉编译它。下面是代码

```
#include <boost/thread/thread.hpp>

void helloworld()
{
   printf( "Hello World!");
}

int main()
{
    boost::thread thrd(&helloworld);
    thrd.join();
} 
```

下面是我的制作文件

```
CPP=ppc_4xx-g++
CFLAGS=-c -g -Wall
LDFLAGS_PowerPC=-L/shared/deps/powerpc/lib -L/opt/ELDK/4.2/ppc_4xx/lib/
LIBS_PowerPC=-lboost_thread -lboost_system -lpthread -lrt
INCLUDES=-I. -I./4.2.2/ -I./include -I/opt/ELDK/4.2/ppc_4xx/usr/include/
CPPFLAGS_PowerPC=-I/shared/deps/common/include
CPPFLAGS_COMMON=-I/shared/deps/powerpc/include
CPPFLAGS=$(CPPFLAGS_COMMON) $(CPPFLAGS_PowerPC)

all: helloworld

helloworld: helloworld.o
    $(CPP) $(LDFLAGS_PowerPC) $(LIBS_PowerPC) helloworld.o -o helloworld

helloworld.o: helloworld.cpp
    $(CPP) $(CFLAGS) $(CPPFLAGS) $(INCLUDES) helloworld.cpp
clean:
    rm -rf *.o helloWorld 
```

我能够生成二进制文件，但是当我在目标上运行程序时出现以下错误

```
-/bin/sh: ./helloworld: not found 
```

我在网上查了一下，发现上面的问题是在我们有动态链接的时候出现的。我的 Boost 库位于**/shared/deps/powerpc/lib**位置，我已使用以下命令相应地设置了变量**LD_LIBRARY_PATH 。**

```
export LD_LIBRARY_PATH=/shared/deps/powerpc/lib/:/opt/ELDK/4.2/ppc_4xx/lib/ 
```

但即便如此，我也会遇到同样的问题。

下面是 uname -ars 的输出

```
Linux (none) 3.0.0-14.1-build3+ #23 PREEMPT Thu Jan 3 18:44:27 CST 2013 ppc GNU/Linux 
```

我的目标上没有安装 ldd，所以我无法检查动态依赖项。但我确信，图书馆也包括在内。我该如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T01:27:53.343

即使我的嵌入式 Linux 系统有一个动态链接器，它也无法正常工作。当我使用随工具链提供的动态链接器并将其替换为正确的目录时，问题得到了解决。现在动态链接很好。

# c# - 从类中访问 Richtextbox

> ID：16045581
> 
> 赞同：0
> 
> 时间：2013-04-16T19:35:03.397
> 
> 标签：c#

我正在尝试在名为 ConsoleText 的富文本框中附加文本。它工作得不是很好。我在我的表单中使用一个属性来访问类中的richtextbox。

它看起来像这样：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }
    //Skipped the rest
    public string ACText
    {
        set 
        {
            ConsoleText.AppendText(value); 
        }
    } 
```

现在来自我班级的构造函数。

```
 public McDonalds(string email, string pass)
    {
        Form1 f = new Form1();
        f.ACText = "test";
    } 
```

遗憾的是，它没有在我的richtextbox 中显示任何文本。我知道它有效，因为我可以在属性中使用 messageBox 并看到值被传递给它。

在此先感谢我真的需要帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:39:36.023

调用`Form1 f = new Form1();`不会为您提供对*现有*表单的引用，它会在表单的控件中创建一个具有空白/默认值的*新表单。*

如何解决这个问题很大程度上取决于您的设计。如果您想将您的类绑定到该表单实现，我们的类需要对表单的引用、对控件的引用或您感兴趣的控件的值传递给它。

例如：

```
public McDonalds(string email, string pass, Form1 form)
{
    form.ACText = "test";
} 
```

一个更干净的解决方案是从您的类中返回一个值`McDonalds`并让 FORM 适当地设置控件值，而不是将您的类绑定到该表单类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-05T03:52:50.303

你可以使用[单例](https://www.dotnetperls.com/singleton)：

> 单例使拥有单个实例变得容易。它们允许单一分配和数据实例。我们回顾了单例类型。我们看到了最快的实现之一。我们回顾了其他可能性。

```
public partial class Form1 : Form
{
    public static Form1 instance = null;

    public Form1()
    {
        instance = this; //add this class to singleton
        InitializeComponent();
    }

    public void Show(string Message)
    {
       MyConsole.Text = Message;
    } 
```

* * *

另一个类：

```
 Form1.instance.Show("blah blah"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T19:48:34.693

`Form1`在类绑定方法中创建委托`ACText (string val)`，并将传递`Delegate`给`McDonalds`类。解雇代表

```
namespace YourNameSpace
{
    public delegate void RichTextBoxDelegate(string text);
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        public void ACText(string s)
        {
            ConsoleText.AppendText(s);
        }

        // In Some Method Call MCDonald's form
        public void ShowMcDonalds()
        {
            RichTextBoxDelegate deleg = new RichTextBoxDelegate(ACText);
            MCdonalds ob = new McDonalds(deleg);
            ob.show();

        }
    }
} 
```

将代表传递给麦当劳表格

只是解雇代表

```
public McDonalds(RichTextBoxDelegate sp)
{
    Form1 f = new Form1();
    sp("This is Test");
}

deleg("Test value");    // form McDonald's Form 
```

# php - Codeigniter Cms 登录问题

> ID：16045588
> 
> 赞同：0
> 
> 时间：2013-04-16T19:35:33.390
> 
> 标签：php, codeigniter, session, twitter-bootstrap, login

我一直在关注 Envato 在 Tutplus 上的本教程：[https ://tutsplus.com/course/build-a-cms-in-codeigniter/](https://tutsplus.com/course/build-a-cms-in-codeigniter/)

我正在保护登录的部分，并且我完全按照教程进行操作。

这是页面[http://division96.com/admin/user/login](http://division96.com/admin/user/login)

这是应用程序文件夹[https://mega.co.nz/#F!z84URZJZ!GmtYxS0UkR9fqS5GBOVY7Q](https://mega.co.nz/#F!z84URZJZ!GmtYxS0UkR9fqS5GBOVY7Q)

问题是它似乎没有得到用户数据，据我所知。

我知道它的细节不多，但我不确定获取所需信息的最佳方法是什么。如果您需要更多信息，请发表评论！

丹佛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-16T11:34:29.543

你使用了encryption_key

```
INSERT INTO users (email, password, name) VALUES ('user.user@name.pro', 
     SHA2('optimusprime**ENCRYPTION_KEY**',512), 'Optimus'); 
```

当您按照 mysql 步骤操作时用户通过？如果不只是像这样重写 user_model.php 中的哈希方法：

```
public function hash ( $string ) {
     return hash('sha512', $string);
} 
```

# text - “SEM1:3ENCE_B:NW:NG102:EECT300:120:0900:2”是什么意思？

> ID：16045590
> 
> 赞同：1
> 
> 时间：2013-04-16T19:35:36.127
> 
> 标签：text

在我的项目中，我正在培养教师和他们的时间表。我收到了一个[文本](http://codebin.org/view/ba6d7085)文件，其中包含我大学的教师时间表。他们无法告诉我什么是语法或代码语言，所以我知道如何阅读它并在我的 iPhone 应用程序中使用它。你能帮我确定这是什么代码吗？我该如何阅读？

样本：

```
SEM1:3ENCE_B:NW:NG102:EECT300:120:0900:2
SEM1:3ENCE_B,3ENCE_C:TW:NLG107:EEEL300:120:0900:1
19:3ENCE_A,3ENCE_B,3ENCE_C:TW:CLG.01:EEEL305_L:120:1100:1
19:3ENCE_A,3ENCE_B,3ENCE_C:TW:NLG107:EEEL305:120:0900:1
SEM1:3ENCE_A,3ENCE_B:TW::EEEL300:120:1100:4
SEM1&2:3ENCE_A,3ENCE_B,3ENCE_C,3ENCE_D:SK:CLG.06:EEEL315_L:120:1400:4
SEM1:3CS_A,3CS_B,3CS_C,3CS_D,3ENCE_A,3ENCE_B,3ENCE_C,3ENCE_D:DHE:CLLT:EICG301_L:120:0900:5
SEM1:3CS_A,3CS_B:ABO,DHE:N5.114:EICG301:120:1100:5
SEM1:3CS_A,3CS_B,3CS_C,3CS_D,3ENCE_A,3ENCE_B,3ENCE_C,3ENCE_D:NW:LTS205:EECT300_L:120:1600:2
27:3ENCE_A,3ENCE_B,3ENCE_C,3ENCE_CS::NG100:EEEL320:120:1100:2
SEM1:3CS_A,3CS_B,3CS_C,3CS_D:NW:C2.14:ECSC302_L:120:0900:3
SEM1:3CS_A:NW:NG100:EECT300:120:1400:2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:46:07.210

不是代码，是数据。解释它的最好方法是将这个表示与另一个比较：想想[罗塞塔石碑](http://en.wikipedia.org/wiki/Rosetta_Stone)。

显然，冒号是用来分隔字段的，每一行可能代表一个单一的锡表项目。每行似乎有 8 个字段。

一个字段看起来像课程 ID：[EECT300](https://sites.google.com/a/staff.westminster.ac.uk/eect300/)

另一个看起来像时间：0900

至于其余的，你必须解决它......

威斯敏斯特大学，也许……？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:39:16.287

它不是代码语言。

它只是一个纯文本文件，其中包含使用冒号`:`作为分隔符的数据

我猜你必须解析它并检索每一列的信息。您必须了解每列的含义（如果没有向您的大学询问）

# java - 三维数组的加法

> ID：16045593
> 
> 赞同：0
> 
> 时间：2013-04-16T19:35:41.093
> 
> 标签：java

我试图理解多维数组我随机添加了一些整数值我在找到两个随机整数之和作为第三维时遇到问题，就像这样

```
 Random  val=new Random();

    int [][][]myloop=new int[2][2][2];
    for (int i = 0; i < myloop.length; i++) {

        for (int j = 0; j < myloop[0].length; j++) {
            for (int k = 0; k < 2; k++) {

                myloop[i][j]=val.nextInt();
            }

        }

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T19:38:03.847

您没有添加随机值。您初始化了一个随机维度数组。

这可能是您正在寻找的代码（基于下面的讨论）：

```
Random val = new Random();
int numberOfPairs=10; //example
int[][] data = new int[numberOfPairs][3];
for (int i=0;i<numberOfPairs;i++){
    data[i][0]=val.nextInt();
    data[i][1]=val.nextInt();
    data[i][2]=data[i][0]+data[i][1];
} 
```

# .net - 使用 Wix 3.7 安装多个 .Net 服务，仅第一个运行

> ID：16045594
> 
> 赞同：0
> 
> 时间：2013-04-16T19:35:46.423
> 
> 标签：.net, service, wix

我正在安装多个 .net Windows 服务。所有服务都将所有依赖项安装在适当的文件夹中。但是，只有第一个会运行。其他服务给出错误 1053：服务没有及时开始响应或控制请求。

想法？

编辑：这不需要 30 秒。它发生在大约 1 秒内。

编辑：

```
 <ComponentGroup Id="IngestServiceComponents" Directory="IngestINSTALLFOLDER">
  <Component Id="IngestService" Guid="5a95ee28-c9da-46b9-8396-cef98fa8fcbb">
    <File Id="IssueIngestService.exe" Name="IngestService.exe" Source="..\IngestService\bin\Release\IngestService.exe" Vital="yes" KeyPath="yes" DiskId="1"/>
    <File Id="IngestService.exe.config" Name="IngestService.exe.config" Source="..\IngestService\bin\Release\IngestService.exe.config" Vital="yes" KeyPath="no" DiskId="1"/>
    <File Id="Libraries2_1" Name="Libraries2.dll" Source="..\IngestService\bin\Release\Libraries2.dll" Vital="yes" KeyPath="no" DiskId="1"/>
    <File Id="DLibraries2_1" Name="DLibraries2.dll" Source="..\IngestService\bin\Release\DLibraries2.dll" Vital="yes" KeyPath="no" DiskId="1"/>
    <File Id="ICSharpCode.SharpZipLib_1" Name="ICSharpCode.SharpZipLib.dll" Source="..\..\Assemblies\ICSharpCode.SharpZipLib.dll" Vital="yes" KeyPath="no" DiskId="1"/>
    <File Id="ChilkatDotNet45_1" Name="ChilkatDotNet45.dll" Source="..\..\Assemblies\ChilkatDotNet45.dll" Vital="yes" KeyPath="no" DiskId="1"/>
    <File Id="MediaInfo_1" Name="MediaInfo.dll" Source="..\..\Assemblies\MediaInfo.dll" Vital="yes" KeyPath="no" DiskId="1"/>
    <File Id="XmpToolkit_1" Name="XmpToolkit.dll" Source="..\..\Assemblies\XmpToolkit.dll" Vital="yes" KeyPath="no" DiskId="1"/>
    <File Id="ffmpeg.exe_1" Name="ffmpeg.exe" Source="..\..\Assemblies\ffmpeg.exe" Vital="yes" KeyPath="no" DiskId="1"/>
    <ServiceInstall
                Id="IngestServiceInstaller"
                Type="ownProcess"
                Vital="yes"
                Name="IngestService"
                DisplayName="Ingest"
                Description="Ingest Service"
                Start="auto"
      Account="user"
      Password="password"
                ErrorControl="ignore"
                Interactive="no">
    </ServiceInstall>
    <ServiceControl Id="IngestStartService" Stop="both" Remove="uninstall" Name="IngestService" Wait="no" />
  </Component>
</ComponentGroup> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:11:56.697

鉴于上面的示例，我不得不猜测您的安装服务出现了问题。您拥有`ServiceControl/@Wait='no'`这意味着这 4 个服务几乎可以同时启动。是否有可能它们相互碰撞并且只有一个在启动时幸存下来？

您可以考虑使用`ServiceControl/@Wait='yes'`或以其他方式调试服务。当错误对话框出现时，您应该能够看到并启动服务（通过`services.msc`或`sc.exe`从命令行）。保留错误对话框并进行调试以查看可能出现的问题。

您的设置代码没有任何明显错误。

PS：将这么多文件，尤其是其他可执行文件放在一个文件中`Component`并不是最佳做法。请参阅[组件规则](http://robmensching.com/blog/posts/2003/10/18/component-rules-101)了解原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:53:58.277

所以问题是像往常一样的用户错误。第一个服务是 .net Framework 4.0。所有新的都是4.5。未安装框架 4.5。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-22T11:14:58.617

看看我这里的回答。我在同一个问题上苦苦挣扎了好几个小时 [https://stackoverflow.com/a/35510262/2903863](https://stackoverflow.com/a/35510262/2903863)

# icalendar - 带闪电的雷鸟未读取有效的 ics 文件

> ID：16045596
> 
> 赞同：1
> 
> 时间：2013-04-16T19:35:54.773
> 
> 标签：icalendar, thunderbird, lightning

我正在编写一个工作程序，它从我们的 cal 服务器中获取我们所有的 ics 文件，将它们合并到一个 ics 文件中，然后将该文件放在要订阅的网络服务器上。

我在 Mac 的 iCal 程序中一切正常，iPhone 订阅也很好，但带有 L​​ightning 的 Thunderbird 只是窒息而死。错误控制台中没有错误，什么都没有。

我已经验证我完全符合标准，这里给出了什么？我是否错过了开源软件的美妙世界未能提供给我的一些特别的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T11:39:07.733

如果您没有，您可以通过一些验证器运行 ics：

[http://severinghaus.org/projects/icv/](http://severinghaus.org/projects/icv/)

[http://icalvalid.cloudapp.net/](http://icalvalid.cloudapp.net/)

[http://mozilla-comm.github.io/ical.js/validator.html](http://mozilla-comm.github.io/ical.js/validator.html)

在 Lightning 中，确保在订阅日历时使用 iCalendar / WebDAV。您还可以使用高级配置编辑器 ( `Options -> Advanced -> General -> Config Editor`) 来启用首选项`calendar.debug.log`和`calendar.debug.log.verbose`.

# android - android中的while循环和光标

> ID：16045600
> 
> 赞同：-1
> 
> 时间：2013-04-16T19:36:15.810
> 
> 标签：android, sqlite

我正在开发我的第一个 Android 项目，但我在使用 SQLite 数据库时遇到了一些困难。例如，我需要积累`sum(amount) for which name= cash and debit_credit= dr`. sql 中没有 for 循环，那么如何使用 while 循环和游标来做到这一点？下面是我的表：

```
ID NAME Debit_Credit AMOUNT
1  cash    dr         100
2  equip   cr         100
3  cash    dr         500
4  A/R     cr         500 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:41:34.017

`SELECT Sum(amount) FROM table WHERE name=? AND debit_credit=?`（这确实是一个 SQL 问题）

**更新：**对于这个只返回数字的简单查询，您可以使用`.simpleQueryForLong()`：

```
SQLiteStatement st = db.compileStatement("SELECT Sum(amount) ...", ...);
long sum = st.simpleQueryForLong(); 
```

# javascript - 在加载事件上显示图像

> ID：16045610
> 
> 赞同：0
> 
> 时间：2013-04-16T19:36:46.167
> 
> 标签：javascript, html, css

我想在显示我的主页之前显示几秒钟的 gif 图像。我试过`onLoadEvent`没有成功。有人可以建议我使用 CSS 或 JAVASCRIPT 的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:45:14.613

It's hard to tell exactly what you are looking for but this will show an image and hide it after 5 seconds on page load.

```
window.onload = function () {
    var imgContainer = document.getElementById('ImgContainer');
    imgContainer.style.display = 'block';
    setTimeout(function () {
        imgContainer.style.display = 'none';
    }, 5000);
}; 
```

Here is a link to a JSFiddle example.

[JSFiddle](http://jsfiddle.net/sqtDe/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:49:39.363

创建一个 div，用 div 内的图像填充整个浏览器窗口。在 bodys`onload`事件中（或者如果您使用 jQuery `$(document).ready`）从 DOM 中删除 div。

# sql - 将值插入 A 列

> ID：16045615
> 
> 赞同：-1
> 
> 时间：2013-04-16T19:37:21.030
> 
> 标签：sql, oracle

我知道这是这样做的方法：

```
INSERT INTO table_name (column1, column2, column3,...)
VALUES (value1, value2, value3,...) 
```

但是当我试图将值插入到我的表中时：

```
INSERT INTO harmeier
VALUES (23216,"Harmeier", "Cory", 45, '20130502'); 
```

这是说这里不允许列。

这是表格信息：

```
STUDENT_ID  NUMBER(6,0) Yes  -   -
LAST_NAME   VARCHAR2(255)   Yes  -   -
FIRST_NAME  VARCHAR2(255)   Yes  -   -
CREDITS NUMBER(3,0) Yes  -   -
GRADUATION_DATE DATE    Yes  -   - 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T19:38:55.427

使用单引号：

```
INSERT
INTO    harmeier
VALUES  (23216, 'Harmeier', 'Cory', 45, '20130502'); 
```

双引号用于分隔标识符，而不是标记字符串常量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T19:40:04.973

```
INSERT  INTO harmeier
        (
          STUDENT_ID,
          LAST_NAME,
          FIRST_NAME,
          CREDITS,
          GRADUATION_DATE
        )
VALUES  (
          23216,
          'Harmeier',
          'Cory',
          45,
          to_date('20130502', 'yyyymmdd')
        ); 
```

# knockout.js - 创建一个通用的 isselected 解决方案

> ID：16045632
> 
> 赞同：-1
> 
> 时间：2013-04-16T19:38:33.597
> 
> 标签：knockout.js

我有一个有趣的困境，我还没有找到解决方案......希望有人能指出我正确的方向。

我正在使用淘汰赛/MVVM，我有点厌倦了在我的解决方案中的任何地方为相同的数据发出 ajax 请求......所以我决定创建一个小型库来加载和管理公共数据并开始使用它那里。这行得通，很好。

基于此，我有很多视图，我需要能够选择多个选项并让服务器通知它们。我已经编写了一些逻辑来执行此操作，本质上现在可以通过复选框和检查并在对象上进行 iselected 来正常工作，...当完成遍历数组时，检查 isselected 并返回一个新数组所选对象的ID...

事情就是这样，虽然，这很好用。我必须一遍又一遍地为每个实体做这件事……所以，在我的优化心情中，我想……

而不是（例如）：

*   国家（（具有 Language + isselected 定义的基本函数/对象）
*   CountryList（包含数组和返回所选 id 的逻辑）
*   语言（具有 Language + isselected 定义的基本函数/对象）
*   LanguageList（（包含数组和返回所选ID的逻辑）
*   ......

我想我可以尝试做一个通用的解决方案，比如... * 基本函数/对象（可以是任何东西（通用）：国家、语言、...）它）

所以我可以这样做：传入 JSON -> foreach 创建 BASE 对象并放入 BASE 数组

CreateObservableArrayFunction (Base array) 它添加了isselected逻辑并且可以返回任何通用对象的id()，只要它们具有id()属性。

也应该可以使用此功能在 MVC 视图本身中使用它...

注意......同样可以用于过滤等。

也许a解释得很糟糕，但我认为这对其他人也很有用，而不必一直重复代码。

感谢您的意见。

J。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:45:29.413

`checked`绑定也可以与数组一起使用，然后从该数组中添加/删除当前项。

对于您的“国家”示例，您将使用它像这样。查看型号：

```
...
vm.CountryList = ko.observableArray(); // list of countries
vm.CountrySelectedIds = ko.observableArray(); // list of country ids 
... 
```

模板：

```
<div data-bind="foreach: CountryList">
    <input type="checkbox" data-bind="
        attr: {value: Id}, 
        checked: $parent.CountrySelectedIds" />
</div> 
```

如果您的“Id”是一个字符串，这很有效。如果您想存储字符串以外的内容（例如，`Country`对象本身），请查看我的[`checkedInArray`绑定](https://stackoverflow.com/a/14863924/1287183)。

# c# - 类似的函数 SqlBulkCopy 用于从访问 sql server 表中复制数据

> ID：16045636
> 
> 赞同：0
> 
> 时间：2013-04-16T19:38:37.520
> 
> 标签：c#, winforms

.请告诉我类似的函数 SqlBulkCopy 用于从访问 sql server 表中复制数据。我有访问文件并希望将列复制到 sql server 表列。SqlBulkCopy 不适合这项工作。

# r - 当矩阵名称是字符串时如何为矩阵的行赋值

> ID：16045642
> 
> 赞同：5
> 
> 时间：2013-04-16T19:38:58.233
> 
> 标签：r

我想创建几个矩阵并将通过函数获得的值自动分配给特定的行。我将举例说明我到目前为止所做的尝试：

```
EXAMPLE1<-matrix(ncol=4, nrow=16)
EXAMPLE2<-matrix(ncol=4, nrow=16)
EXAMPLE3<-matrix(ncol=4, nrow=16)
EXAMPLE4<-matrix(ncol=4, nrow=16)

for(i in 1:16){
  for(j in 1:4){
    paste0("EXAMPLE",j, "[",i,",","]")<- c(1:4)
  }
} 
```

和

```
for(i in 1:16){
  for(j in 1:4){
    get(paste0("EXAMPLE",j)[i,]<- c(1:4)
  }
} 
```

但返回*“赋值目标扩展为非语言对象”*。所以我尝试了

```
for(i in 1:16){
  for(j in 1:4){
    assign(paste0("EXAMPLE",j, "[",i,",","]"), c(1:4))
  }
} 
```

这不会返回错误，但值不会写入矩阵。

*起初矩阵是空的*

```
 [,1] [,2] [,3] [,4]
[1,]   NA   NA   NA   NA
[2,]   NA   NA   NA   NA
[3,]   NA   NA   NA   NA
[4,]   NA   NA   NA   NA 
```

*并且在执行一个循环之后（i = 1）我将所有示例矩阵都填充为1行（并且在第二-第二行填充之后，这样当循环结束时，我将拥有一个充满数字的示例矩阵。）。*

```
 [,1] [,2] [,3] [,4]
[1,]    1    2    3    4
[2,]   NA   NA   NA   NA
[3,]   NA   NA   NA   NA
[4,]   NA   NA   NA   NA 
```

关键是，我不知道如何为矩阵行赋值，因为我通过粘贴函数传递矩阵名称。如果我想将其名称作为字符串，如何将值分配给矩阵中的特定行？任何帮助都会很棒。谢谢

...版...对不起，我不是很清楚。正如我所提到的，我想将函数的结果（恰好与我的矩阵具有相同的列数）写入矩阵行。每行都会从应用于不同观察的函数中获取结果。我想将几个函数应用于同一个变量，所以我有几个矩阵用于不同函数的结果（列号不同，名称不同）。我对矩阵进行编号和命名的方式是最容易跟踪结果并在以后进行比较的方式。上面我只给出了一个问题示例，即我不能为一行矩阵赋值，因为我将矩阵的名称作为字符串给出（我这样做是因为否则会有很多编号要做）。所以总的来说我希望能够做到

```
EXAMPLEj[i,]<-SomeFunctionResult 
```

j 在哪里 1 到 10 或其他一些数字

这就是为什么我使用循环并`paste0("EXAMPLE", j)`生成矩阵名称和 i 来表示要使用哪个观察函数以及将结果放在哪一行。矩阵已经创建，但我发现无法将结果传递给矩阵的行。

我是 R（和编程）的新手，所以我可能选择了最糟糕的方法来解决这个问题，并且列表或数组会更容易使用。谢谢你的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:59:37.193

将各个矩阵放入列表中：

```
EXAMPLE <- list(EXAMPLE1, EXAMPLE2, EXAMPLE3, EXAMPLE4) 
```

然后，只需按索引访问此列表中的矩阵：

```
for(i in 1:16){
  for(j in 1:4){
    EXAMPLE[[j]][i,] <- c(1:4)
  }
} 
```

该列表也可以命名，并通过以下名称访问：

```
EXAMPLE <- list(EXAMPLE1=EXAMPLE1, EXAMPLE2=EXAMPLE2,
                EXAMPLE3=EXAMPLE3, EXAMPLE4=EXAMPLE4)
EXAMPLE[['EXAMPLE1']] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:17:23.087

看起来您正在尝试迭代不同的矩阵，然后迭代给定矩阵中的每一行。

如果任务是迭代，你应该考虑使用列表——或者如果迭代矩阵、数组

```
# create an array of 5 (five) 16x4 matricies: 
EXAMPLE <- array(dim=c(16, 4, 5))  # i changed your four examples to 5, to be clear

# Have a look at the 5 matricies: 
EXAMPLE

# TO SELECT A SINGLE MATRIX, SAY EXAMPLE2: 
EXAMPLE[,, 2]  # note the two commas 
```

那么如果你想用循环来迭代（一般不推荐，但很简单）

```
for (k in 1:5)  # again, using 5 to distinguish
  for (i in 1:16)
    EXAMPLE[i, , k] <- i* (1:4)

EXAMPLE 
```

* * *

您也可以使用`apply`，其中`MARGIN`参数对应于您设置的尺寸。（即，在这种情况下，`MARGIN==1`用于行、`2`列和`3`特定矩阵）

例如， `apply(EXAMPLE, MARGIN=3, FUN=someFunction)` 将函数`someFunction`应用于每个矩阵，一次一个。换句话说，它遍历每个矩阵，很像上面的`k`-`for`循环

因此，上面的两个嵌套循环可以放在一行代码中：

```
# note the empty [ ] to maintain array properties
EXAMPLE[ ] <- apply(EXAMPLE, 3, function(M) 1:ncol(M) %x% 1:nrow(M))

# have a look at the results
EXAMPLE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-25T08:44:14.187

是否试图显示两个矩阵之间的差异？

```
> EXAMPLE2 <- matrix(ncol=4, nrow=16, sample(1:10, 4*16, replace=TRUE))

> EXAMPLE1 <- EXAMPLE2
> EXAMPLE1[3,4] <- 99

> diffs <- ifelse(EXAMPLE1!=EXAMPLE2, EXAMPLE1, "")
> diffs
      [,1] [,2] [,3] [,4]
 [1,] ""   ""   ""   ""  
 [2,] ""   ""   ""   ""  
 [3,] ""   ""   ""   "99"
 [4,] ""   ""   ""   ""  
 [5,] ""   ""   ""   ""  
 [6,] ""   ""   ""   ""  
 [7,] ""   ""   ""   ""  
 [8,] ""   ""   ""   ""  
 [9,] ""   ""   ""   ""  
[10,] ""   ""   ""   ""  
[11,] ""   ""   ""   ""  
[12,] ""   ""   ""   ""  
[13,] ""   ""   ""   ""  
[14,] ""   ""   ""   ""  
[15,] ""   ""   ""   ""  
[16,] ""   ""   ""   ""  

> print(diffs, quote=FALSE)
      [,1] [,2] [,3] [,4]
 [1,]                    
 [2,]                    
 [3,]                99  
 [4,]                    
 [5,]                    
 [6,]                    
 [7,]                    
 [8,]                    
 [9,]                    
[10,]                    
[11,]                    
[12,]                    
[13,]                    
[14,]                    
[15,]                    
[16,] 
```

# python - Python - re.findall 返回不需要的结果

> ID：16045643
> 
> 赞同：6
> 
> 时间：2013-04-16T19:39:14.080
> 
> 标签：python, regex, findall

```
re.findall("(100|[0-9][0-9]|[0-9])%", "89%") 
```

这仅返回结果`[89]`，我需要返回全部 89%。请问有什么办法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T19:43:21.897

```
>>> re.findall("(?:100|[0-9][0-9]|[0-9])%", "89%")
['89%'] 
```

当有捕获组时，`findall`仅返回捕获的部分。用于`?:`防止括号成为捕获组。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-16T19:42:24.283

简单的解决方案：

```
>>> re.findall("(100%|[0-9][0-9]%|[0-9]%)","89%")
['89%'] 
```

更漂亮的解决方案：

```
>>> re.findall("(100%|[0-9]{1,2}%)","89%")
['89%'] 
```

最漂亮的解决方案：

```
>>> re.findall("(?:100|[0-9]{1,2})%","89%")
['89%'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T19:43:26.133

使用外部组，内部组为非捕获组：

```
>>> re.findall("((?:100|[0-9][0-9]|[0-9])%)","89%")
['89%'] 
```

# css - 垂直居中一个div？

> ID：16045644
> 
> 赞同：1
> 
> 时间：2013-04-16T19:39:14.280
> 
> 标签：css, vertical-alignment

我正在构建一个响应式网站，并且我有一个 div（名为“包装器”），我希望它始终位于页面的中心。我想出了如何将它水平居中，因为我有一个固定的宽度百分比。如果我没有设定高度百分比，我将如何垂直居中？

```
.wrapper{
    width: 50%;
    height: auto;
    margin-left: 25%;
    padding: 3%;
}' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:46:40.350

**试试这个教程**
垂直和水平居中 div

[http://www.jakpsatweb.cz/css/css-vertical-center-solution.html](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:53:16.777

试试这个 jQuery 插件：**[TailorFit](https://github.com/rtheunissen/tailorfit)** 并查看**[演示](http://dev.fhmp.net/tailorfit/demo/)**。

您可以使用它的一种方法是这样的：

```
$('#your-div').tailorfit(); 
```

因为您的身高是自动的，所以仅此一项就可以解决问题。

完全披露 - 我是插件的作者。

# python - 从python中的字符串中剥离字符串的所有实例

> ID：16045650
> 
> 赞同：-3
> 
> 时间：2013-04-16T19:39:39.347
> 
> 标签：python

我需要解析和清理自定义 API 的一些结果。下面是存储为变量的示例输出。

```
(DeviceConnectionInformation){
     DeviceName = "device1"
     ClientName = "ourclient"
     RegionName = "west"
     PrimaryIP = "1.1.1.1"
     OsVersionName = "Microsoft Windows 7 Enterprise"
     AccessMethod = None
     AccessIP = None
     Port = None
  },
  (DeviceConnectionInformation){
     DeviceName = "device2"
     ClientName = "ourclient"
     RegionName = None
     PrimaryIP = "1.1.1.2"
     OsVersionName = "Microsoft Windows 7 Enterprise"
     AccessMethod = None
     AccessIP = None
     Port = None 
```

我需要删除所有可能出现的“（DeviceConnectionInformation）{”和“}”，并保留以下格式：

```
DeviceName = "device1"
ClientName = "ourclient"
RegionName = "west"
PrimaryIP = "1.1.1.1"
OsVersionName = "Microsoft Windows 7 Enterprise"
AccessMethod = None
AccessIP = None
Port = None

DeviceName = "device2"
ClientName = "ourclient"
RegionName = None
PrimaryIP = "1.1.1.2"
OsVersionName = "Microsoft Windows 7 Enterprise"
AccessMethod = None
AccessIP = None
Port = None 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:42:18.220

假设您的数据是字符串形式，您可以通过将其替换为空来去除文字字符串：

```
val = val.replace("(DeviceConnectionInformation){", "")
val = val.replace("},", "") 
```

但是，我对此持谨慎态度，尤其是第二种情况，因为它不注意上下文。例如，如果`},`您的数据出现在带引号的字符串中，它仍然会被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:44:17.600

How about

```
for x in ("DevicConnectionInformation{\n", "},", "     "):
    data = data.replace(x, "") 
```

of you get into trouble if, e.g., `},` appears in the values.

# python - 在python中使用opencv2编写流式视频

> ID：16045654
> 
> 赞同：3
> 
> 时间：2013-04-16T19:39:51.620
> 
> 标签：python, opencv, video-streaming

在我的项目中，我想保存流媒体视频。

```
import cv2;
if __name__ == "__main__":
     camera =  cv2.VideoCapture(0);
     while True:
          f,img = camera.read();
          cv2.imshow("webcam",img);
          if (cv2.waitKey (5) != -1):
                break; 
```

` 使用上面的代码可以从网络摄像头流式传输视频。如何将此流式视频写入文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T05:12:26.807

您可以简单地将抓取的帧保存到图像中：

```
camera = cv2.VideoCapture(0)
i = 0
while True:
   f,img = camera.read()
   cv2.imshow("webcam",img)
   if (cv2.waitKey(5) != -1):
       break
   cv2.imwrite('{0:05d}.jpg'.format(i),img)
   i += 1 
```

或像这样的视频：

```
camera = cv2.VideoCapture(0)
video  = cv2.VideoWriter('video.avi', -1, 25, (640, 480));
while True:
   f,img = camera.read()
   video.write(img)
   cv2.imshow("webcam",img)
   if (cv2.waitKey(5) != -1):
       break
video.release() 
```

创建`VideoWriter`对象时，您需要提供几个可以从输入流中提取的参数。可以在[此处](http://docs.opencv.org/doc/tutorials/highgui/video-write/video-write.html#videowritehighgui)找到教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-07T19:49:23.553

在 ubuntu 中，使用以下代码从给定图片创建视频

```
os.system('ffmpeg -f image2 -r 8 -i %05d.bmp -vcodec mpeg4 -y movie3.mp4') 
```

其中图片名称为 00000.bmp,00001.bmp,00002.bmp 等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-14T04:38:43.470

如果你真的想使用为你的电脑提供的编解码器来压缩帧。

1.  `cv2.VideoWriter([filename, fourcc, fps, frameSize[, isColor]])`您应该使用标志值 =设置第二个参数`-1`。这将允许您查看 PC 中使用的编解码器压缩列表。
2.  就我而言，英特尔提供的编解码器名为 IYUV 或 I420。我不知道其他制造商。[Fourcc 网页](http://www.fourcc.org/yuv.php)。
3.  设置此信息如下

    ```
    fourcc = cv2.cv.CV_FOURCC('I','Y','U','V')
    # or
    fourcc = cv2.cv.CV_FOURCC('I','4','2','0')
    # settting all the information
    out = cv2.VideoWriter('output1.avi',fourcc, 20, (640,480)) 
    ```

4.  记住两个让我很头疼的小参数：
    *   不要忘记 cv2.cv 前缀
    *   引入正确的帧大小

对于其他一切，您可以使用 Ekalic 提供的代码

# c# - 在silverlight中将writeablebitmap保存为JPG

> ID：16045659
> 
> 赞同：0
> 
> 时间：2013-04-16T19:40:08.700
> 
> 标签：c#, silverlight, bitmap, jpeg

我有一个 writeablebitmap 对象，我想在 silverlight 中保存为 JPG，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:00:00.627

我还将 writeablebitmap 对象转换为图像

```
WriteableBitmap bitmap = new WriteableBitmap(Width,Height); 
```

//在位图上绘制的一些操作

进而

```
Image imageFHR = new Image();
 imageFHR.Source = bitmap;
 imageFHR.Height = Height;
 imageFHR.Width = Width;
 myCanvas.Children.Add(imageFHR); 
```

# javascript - 本地存储表

> ID：16045660
> 
> 赞同：0
> 
> 时间：2013-04-16T19:40:10.700
> 
> 标签：javascript, html, dom, local-storage

我将我的值存储到本地存储中，并且我试图在表格中显示信息，但它似乎不起作用，它总是将它输出到第一列垂直向下。例如，当我输入我的信息时，我希望它像这样出现

|余额|名称|数量|价格|

| 100 |测试| 100 | 1.99|

但它目前显示如下：

|余额|名称|数量|价格| |100| |测试| |100| |1.99|

这是我的本地存储的代码

```
function save(item) {
            var playlistArray = getStoreArray("playlist");
            playlistArray.push(item);
            localStorage.setItem("playlist", JSON.stringify(playlistArray));
        }

function Load_storage() {
            var playlistArray = get_Storage();
            var ul = document.getElementById("playlist");
            if (playlistArray != null) {

                for (var i = 0; i < playlistArray.length; i++) 
                {
                    var li = document.createElement("table");
                li.innerHTML = playlistArray[i];
                    ul.appendChild(li);
                                                                                        }
            }
        } 

function get_Storage() {
            return getStoreArray("playlist");
        }

function getStoreArray(key) {
            var playlistArray = localStorage.getItem(key);
            if (! playlistArray) {
                playlistArray = new Array();
            }
            else {
                playlistArray = JSON.parse(playlistArray);
            }
            return playlistArray;
        } 
```

我通过这个功能放入我的本地存储

```
 var table=document.getElementById("myTable");
   var row=table.insertRow(1);
   var cell1=row.insertCell(0); // bank account
   var cell2=row.insertCell(1); // name
   var cell3=row.insertCell(2); // Quantity
   var cell4=row.insertCell(3); // price

   cell1.innerHTML=Balance ;                // bank account
   cell2.innerHTML=name;            //stock symbol
   cell3.innerHTML=quantity;            // Quantity
   cell4.innerHTML=price;               // bought
            var SAVE= document.getElementById("myTable");
                SAVE.appendChild(row);

                save(cell1.innerHTML);
                save(cell2.innerHTML);
                save(cell3.innerHTML);
                save(cell4.innerHTML);                  
 //  save(Balance+"......................."+
                name+"......................."+
                quantity+"......................."+
                price + "......................."); 
```

这被注释掉了，因为它总是会显示这条线，但我不希望这样，即使这种方式确实有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:01:33.113

将表格列标题放在您的 html 中。它比使用 JavaScript 更有效：

```
<body>
    <table id='myTable'>
        <thead>
        <tr>
            <th>Balance</th>
            <th>Name</th>
            <th>Quantity</th>
            <th>Price</th>
        </tr>
        </thead>
    </table>
</body> 
```

对 JavaScript 的一些更改：

```
var table = document.getElementById("myTable"),

    row = table.insertRow(1),
    cell1 = row.insertCell(0), // bank account
    cell2 = row.insertCell(1), // name
    cell3 = row.insertCell(2), // Quantity
    cell4 = row.insertCell(3), // price

    testBalance = '3.00',
    testName = 'Mike',
    testQuantity = '2.00',
    testPrice = '5.00';

cell1.innerHTML = testBalance; // bank account
cell2.innerHTML = testName; //stock symbol
cell3.innerHTML = testQuantity; // Quantity
cell4.innerHTML = testPrice; // bought

//you can remove these lines
//var SAVE = document.getElementById("myTable");
//SAVE.appendChild(row);

save(cell1.innerHTML);
save(cell2.innerHTML);
save(cell3.innerHTML);
save(cell4.innerHTML);
//  save(Balance+"......................."+
// name + "......................." +
// quantity + "......................." + 
//price + //"......................."); 
```

这是一个[jsFiddle](http://jsfiddle.net/chris6334/bpNHs/4/)。
我希望这有帮助 ：-）

# javascript - 无法在函数调用中用变量值替换硬编码的属性名称值

> ID：16045663
> 
> 赞同：0
> 
> 时间：2013-04-16T19:40:19.480
> 
> 标签：javascript, unobtrusive

我正在尝试在一个旧的 liferay 项目（3.6）中使用不显眼的日期选择器，我相信它正在运行prototype.js。

我有这样的电话：

```
datePickerController.createDatePicker({formElements:{"elementId":"%d/%m/%Y"}}); 
```

为此：

```
createDatePicker:       function(options) { addDatePicker(options); }, 
```

我无法使用变量代替硬编码的 elementId。我尝试过数组索引、点索引、字符串变量等，但无法让它工作。

在我看来，被调用函数只需要一个通常未指定的对象，但如果我执行上述操作之一（数组、点等），浏览器会抱怨括号（数组索引）、点（点索引）、括号或预期格式以外的任何内容。

底层调用模块 (addDatePicker) 需要 formElements，所以我无法更改它。

我不明白浏览器如何知道足以抱怨函数参数的格式......显然我在这里严重缺乏！

指针非常感谢。

例如

```
obj[tag] = 'elementId'; 
datePickerController.createDatePicker({formElements:{obj[tag]:"%d/%m/%Y"}});     
// SCRIPT1003: Expected ':' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:56:17.273

您不能将变量键放在对象文字中 - 语法要求键是常量值。

您需要创建对象并填充它，然后传递它：

```
var obj = {};
var tag = 'elementId';
obj[tag] = "%d/%m/%Y";
// you now have obj = { elementId: "%d/%m/%Y" }

...createDatePicker({ formElements: obj }); 
```

# flash - AirPlay 流式传输到 HTML 视频播放器

> ID：16045666
> 
> 赞同：3
> 
> 时间：2013-04-16T19:40:23.613
> 
> 标签：flash, node.js, video-streaming, airplay, appjs

首先让我开始，我了解这个协议主要是封闭源代码和 Apple 专有的。撇开法律后果不谈，我仍然需要一些帮助。

标题：AirPlay 流式传输到 HTML 视频播放器。

我想做的是将 AirPlay MOV 文件流式传输到 HTML 视频播放器（可能是 Flash）播放器。

我已经使用 Node JS 构建了 AirPlay 服务器，并将 AppJS 作为我的 Window (webkit) 容器，并且可以正确显示照片。MDNS 已经完成。Airplay 客户端和服务器正确通信和切换协议等。这也不是视频的问题。**协议部分完成。**

我还可以从 airplay 客户端获取视频文件，然后当文件完成后，我可以通过 VLC、Quicktime 等播放该文件。**我现在正在寻找的**是一种可以播放视频的渐进式下载（一种流式传输）随着数据的进入。

注意：我无法通过 VLC 播放文件，而它仍在下载。可能是我在下面提到的一个问题。

我尝试在下载过程中使用 VLC 打开视频文件（通过 airplay 客户端链接），但无法进行。可能是 MOV 文件信息位于文件末尾。如果是这种情况，AppleTV 等如何在无需先下载的情况下即时播放视频？

到目前为止，我一直在使用以下链接获取协议文档，但似乎部分内容已过时，并且视频部分没有说明如何检索视频文件。

AirPlay 协议： http: [//nto.github.io/AirPlay.html#video](http://nto.github.io/AirPlay.html#video)

Flowplayer 起初是一个绝妙的主意，直到我发现它不支持 MOV 文件类型。另外，另一个问题 - MOV 是实际的视频文件类型还是容器？

问题是： **是否有基于 Flash 的播放器可以从流中播放 MOV 文件而无需下载完整文件？**文件信息也可能在文件末尾，我不确定。

更新：看来我找到了有关 AirPlay 协议的更多信息。
从这个网站：[https ://github.com/unused/airstream](https://github.com/unused/airstream)

> airplay 协议基本上可以播放可通过 http 访问的 mpeg-4（mp4、mov、ts、m4v）格式的视频。

我可能只是对那个项目的客户端部分进行逆向工程，看看我是否可以让一个工作的服务器实现继续下去。
但是查看另一个网站的部分：http: [//diveintohtml5.info/video.html](http://diveintohtml5.info/video.html)

说：

> MPEG 4，通常带有 .mp4 或 .m4v 扩展名。MPEG 4 容器基于 Apple 较早的 QuickTime 容器 (.mov)。Apple 网站上的电影预告片仍然使用较旧的 QuickTime 容器，但您从 iTunes 租借的电影是在 MPEG 4 容器中交付的。

# php - PHP Zend 将表单字段值与常量进行比较

> ID：16045667
> 
> 赞同：0
> 
> 时间：2013-04-16T19:40:25.633
> 
> 标签：php, validation, zend-framework

我想制作一个带有密码字段的表单。我想将密码字段与常量进行比较。有可能`addValidator()`吗？

```
$this->addElement( $this->createElement ( 'password', 'password' )
                        ->setAttrib('class','fld')
                        ->setLabel ( 'Slaptažodis: ' )
                        ->addValidator('Identical',
                                       false,
                                       array('token' => 'value')
)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:51:51.330

尝试这样的事情：

```
 $constantHere = '123';
    $this->addElement( $this->createElement ( 'password', 'password' )
                    ->setAttrib('class','fld')
                    ->setLabel ( 'Slaptažodis: ' )
                    ->addValidator('Identical',
                                   false,
                                   $constantHere)); 
```

当你想与另一个元素进行比较时，你只使用 Array 和 TOKEN，如果你想与常量进行比较，你需要直接在最后一个参数中使用。

在此处查看更多信息： [zend doc](http://framework.zend.com/manual/2.0/en/modules/zend.validator.set.html#zend-validator-set-identical-types)

# javascript - 选中复选框时突出显示表格行

> ID：16045668
> 
> 赞同：1
> 
> 时间：2013-04-16T19:40:28.947
> 
> 标签：javascript, jquery, checkbox, jquery-selectors

选中复选框时需要突出显示整行，未选中时删除突出显示。我当前的代码仅突出显示复选框单元格而不是整行。帮助！

JSP：

```
 <tbody>
<c:forEach items="${summary}" var="summary">

<tr>
<td bgcolor='<c:out value="${summary.color}"></c:out>'><c:out
                    value="${summary.eventDesc}" />
</td>
 <td bgcolor='<c:out value="${summary.color}"></c:out>'><a
                href="/analysis/loadAnalysisDetailFromSummary?labelNbr=${summary.labelNbr}&loadDate=${summary.loadDate}"><c:out
                        value="${summary.labelNbr}" /> </a>
            </td>

        <td bgcolor='<c:out value="${summary.color}"></c:out>'><c:out
                    value="${summary.origin}" />
            </td>
        <td bgcolor='<c:out value="${summary.color}"></c:out>'><c:out
                    value="${summary.senderName}" />
            </td>
        <td bgcolor='<c:out value="${summary.color}"></c:out>'><c:out
                    value="${summary.receiverName}" />
            </td>
        <td bgcolor='<c:out value="${summary.color}"></c:out>'><c:out
                    value="${summary.receiptDate}" />
            </td>
        <td bgcolor='<c:out value="${summary.color}"></c:out>'><c:out
                    value="${summary.loadDate}" />
            </td>
        <td bgcolor='<c:out value="${summary.color}"></c:out>'><c:out
                    value="${summary.forecastIsc}" />
            </td>
        <td bgcolor='<c:out value="${summary.color}"></c:out>'><c:out
                    value="${summary.actualIsc}" />
            </td>
        <td bgcolor='<c:out value="${summary.color}"></c:out>'><c:out
                    value="${summary.country}" />
            </td>
    <td id="td1" bgcolor='<c:out value="${summary.color}"></c:out>'><c:out
                    value="${summary.source}" />
            </td>
<c:if test="${isAll == 'false'}">
    <td align='center' bgcolor='<c:out value="${summary.color}"></c:out>'>
    <input name='summaryCheckbox' type="checkbox" class="cbx" 
 value='<c:out value="${summary.labelNbr}"></c:out>,<c:out   
  value="${summary.loadDate}"></c:out>,
      <c:out value="${summary.eventInd}"></c:out>'>
            </td>
            </c:if>
        </tr>

    </c:forEach>
</tbody> 
```

查询：

```
$(document).ready(function(){
  $("input[type='checkbox']").change(function(e) {
    if($(this).is(":checked")){ 
   $(this).closest('td').addClass("highlight");

  }
    else{
      $(this).closest('td').removeClass("highlight");
    }
  });
}); 
```

CSS：

```
table{border: 1px solid;}
.highlight{background: #C0C0C0;} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T19:56:43.693

这里的问题是，当你将它从 它切换`closest("td")`到`closest("tr")`它时，它正在工作[它设置了类]，但是 CSS 是错误的。您需要将背景颜色添加到单元格，而不是行。

你的 CSS

```
table{border: 1px solid;} 
.highlight{background: #C0C0C0;} 
```

需要是

```
table{border: 1px solid;} 
.highlight td {background: #C0C0C0;} 
```

注意高亮后的 TD。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T19:45:35.450

```
$(function(){
    $("input[type='checkbox']").on('change', function() {
        $(this).closest('tr').toggleClass("highlight", this.checked);
    });
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-16T19:41:26.103

利用`.closest('tr')`

```
$(document).ready(function(){
  $("input[type='checkbox']").change(function(e) {
    if($(this).is(":checked")){ 
      $(this).closest('tr').addClass("highlight");
    }else{
      $(this).closest('tr').removeClass("highlight");
    }
  });
}); 
```

# javascript - 调试 JavaScript - 需要插件解决方案建议

> ID：16045671
> 
> 赞同：0
> 
> 时间：2013-04-16T19:40:43.177
> 
> 标签：javascript, debugging, testing

我试图查看当我在网站上执行某个操作时触发了哪些 Javascript 函数。但是，我似乎找不到合适的解决方案来为我做这件事，而且我不能手动浏览整个 JS 代码，因为它很多，而且我对 JS 并不是那么好。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:41:45.187

使用 Chrome 并按键盘的 f12 键显示调试界面。您可以从“源”选项卡逐步调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:44:33.223

You might want to look into "Visual Event". It's a [Chrome Extension](https://chrome.google.com/webstore/detail/visual-event/pbmmieigblcbldgdokdjpioljjninaim?hl=en-US) that lets you inspect events that are bound to elements on the page. It also exists as a [bookmarklet](http://www.sprymedia.co.uk/article/Visual+Event) for other browsers.

It won't help you with all events that are happening on the page, but it at least shows you the ones that are bound to elements.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T19:41:39.087

使用 Firebug ( [https://getfirebug.com/](https://getfirebug.com/) )，一个 Firefox 插件。

# asp.net-mvc - 创建列表的最佳方法是什么 列名在字符串 [] 中不存在的列名？

> ID：16045677
> 
> 赞同：2
> 
> 时间：2013-04-16T19:41:03.723
> 
> 标签：asp.net-mvc, c#-4.0

我有一个`DataTable`并且我想创建一个`List<string>`列名，除非这些列名包含在`string[] excludedColList`.

我知道如何获取所有列名的列表：

```
List<string> colNamesList = (from DataColumn column in gridTable.Columns select column.ColumnName).ToList(); 
```

我不知道如何添加过滤器以排除`excludeColList`.

我不知道如何提出这个问题，以便谷歌搜索返回适用的结果，所以我想在这里解释一下。

如果有帮助，我可以`excludedColList`从 a更改为`string[]`a 。`string`

我确实需要它是一个排除列表而不是一个包含列表。

**更新**

就像经常发生的那样，只要我提出问题，我就会找到答案。这对我有用：

```
List<string> colNamesList = (from DataColumn column in gridTable.Columns select column.ColumnName).Except(excludedColList).ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:53:04.600

```
(from System.Data.DataColumn column in gridTable.Columns 
 where !excludedColList.Contains(column.ColumnName)
 select column.ColumnName).ToList() 
```

或者

```
(from System.Data.DataColumn column in gridTable.Columns
 select column.ColumnName).Except(excludedColList).ToList() 
```

两者都可以

# angularjs - 如何尽快开始从服务器获取数据？

> ID：16045680
> 
> 赞同：3
> 
> 时间：2013-04-16T19:41:10.907
> 
> 标签：angularjs

如何使用 Angular 尽快开始从服务器获取数据？

目前，我的大部分页面都是通过放置在根元素的指令“fooload”异步填充的：

```
<html lang="en" ng-app="myapp" fooload ng-controller="MyAppCtrl">
    <head>
        /* bunch of CSS, and other resources */
    </head> 
```

它通过 http GET 请求将数据加载到范围内：

```
angular.module('myapp.directives').
   directive('fooload', function ($http) {
     return {
         link: function (scope, elm, attrs) {
             $http.get('/foo').success(function (data) {
             scope.foo = data;
     });
     }
     };
}); 
```

查看网络面板，这个调用是在请求 head 中引用的资源之后在浏览器中进行的。如何在页面加载时尽快调用加载 /foo 数据（如果可能，甚至在加载角度本身之前）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T22:00:52.603

我通过以下方式解决了这个问题：

a）甚至在角度加载之前获取数据并将其存储在全局变量中（我讨厌使用全局变量，但我想不出另一种方式。）

b）在加载此数据时手动引导角度（我的应用程序在没有数据的情况下根本无法工作）

```
 var $data;
        var ajax_transport = new XMLHttpRequest();

        // Callback for AJAX call
        function responseProcess() {
            if (ajax_transport.readyState !== 4) {
                return;
            }
            if (ajax_transport.responseText) {
                $data = JSON.parse(ajax_transport.responseText);
                    angular.bootstrap(document, ['myApp']);
                });
            }
        }
        // Sending request
        ajax_transport.open("GET", "/mydata", true);
        ajax_transport.onreadystatechange = responseProcess;
        ajax_transport.send(); 
```

注意：删除模板中的标记 ng-app="myapp" 以避免自动引导非常重要。

c）在我的角度应用程序中使用数据：

```
 scope.setupSomething($data); 
```

d) 此外，为了确保此数据调用在任何其他资源加载之前开始，我开始使用资源加载器。我最喜欢 HeadJs ( [http://headjs.com/](http://headjs.com/) )，但有角度的人似乎喜欢 script.js ( [https://github.com/angular/angular-phonecat/blob/master/app/index-async .html](https://github.com/angular/angular-phonecat/blob/master/app/index-async.html) )

欢迎批评或改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:13:21.550

这与 Angular 并没有真正的关系，显然 Angular 无法在 Angular 加载自身之前开始加载文件。但是，如果资源（例如`/foo`）可以被浏览器缓存，您可以将其添加到清单文件中：http: [//www.html5rocks.com/en/tutorials/appcache/beginner/](http://www.html5rocks.com/en/tutorials/appcache/beginner/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T20:21:32.073

首先创建一个获取资源的新服务，然后在服务器成功回调时引导文档以获取角度。

```
angular.element(document).ready(function() {
   calllService(function () {
      angular.bootstrap(document);
   });
}); 
```

[https://stackoverflow.com/a/12657669/1885896](https://stackoverflow.com/a/12657669/1885896)

# python - 我从未见过的语法错误

> ID：16045685
> 
> 赞同：2
> 
> 时间：2013-04-16T19:41:26.530
> 
> 标签：python, syntax

我正在用python编写一个系统发育树程序，我遇到了一个我以前没有遇到过的小问题，我已经研究过了，没有什么能完全描述我遇到的问题，我从这段代码中得到一个语法错误：

```
 for x in range(len(matrix)):
            # Print the label
            print(seq0[x-1], end == ' ') if x > 0 else print( ' ', end == '') 
```

错误说：

```
 File "/home/brandon/OptimalAlignmentSensitive.py", line 206
print(seq0[x-1], end == ' ') if x > 0 else print( ' ', end == '') 
```

它指向第二个打印语句中的“t”。有没有其他人有这个问题？我不明白该怎么做我尝试添加空格等，但没有任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T19:43:46.273

Try adding `from __future__ import print_function`, and writing `print(' ', end='')` with a single '=' in the `print` function.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:02:01.817

您的问题是使用三元运算符。您正在使用 2.x，其中`print`是一个语句 - 而三元运算符只接受表达式。将其替换为以下`if`语句：

```
 for x in xrange(len(matrix)):
     if x > 0:
         print(seq0[x-1], end == ' ')
     else:
         print(' ', end == '') 
```

这可能不会做你想要的。这将打印 a `tuple`，而您可能想使用 3.x`print()`函数中的关键字参数。这在 2.x 中不存在，相反，该功能是通过留下一个尾随逗号（没有括号来构造一个元组）来产生的。

```
 for x in range(len(matrix)):
     if x > 0:
         print seq0[x-1], 
     else:
         print " ", 
```

一般来说，使用三元运算符来模拟单行`if`语句无论如何都是一种不好的做法，即使它确实有效。正如我在评论中所说，按索引迭代通常是一个坏主意，并且可能会被删除，但这需要对手头的操作有更多的了解。

# authentication - 验证其数据来自 2 个单独的表/实体的用户

> ID：16045693
> 
> 赞同：-1
> 
> 时间：2013-04-16T19:41:50.770
> 
> 标签：authentication, symfony, doctrine

下面是我的数据库架构：

> **用户**
> 
> *   用户名 *
> *   用户名
> 
> **用户身份验证**
> 
> *   用户名 *
> *   密码

使用这种模式，我在 Symfony2 Authenticate 上遇到了很大的问题。我在[http://symfony.com/doc/current/cookbook/security/entity_provider.html](http://symfony.com/doc/current/cookbook/security/entity_provider.html)阅读了食谱。但是我的项目的数据模型和教程有很大的不同。

**如何从 user_auth 获取密码进行身份验证？**

通常，我会考虑一个 JOIN 查询来获取这两个信息，然后将它们与用户提交的数据进行比较，但不是很好理解的 Doctrine ORM 模型阻碍了我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:48:25.260

创建一个[自定义用户提供程序](http://symfony.com/doc/current/cookbook/security/custom_provider.html)，您可以在其中放置自定义用户数据检索逻辑。注意你的`User`类必须实现`UserInterface`接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:30:45.363

我已经找到答案了。使用[CUSTOM USER PROVIDER](http://symfony.com/doc/current/cookbook/security/custom_provider.html)。

在那之后，我坚持使用 Doctrine ORM 来实现我的去规范化模式。在通过更改我的架构以适应 ORM 放弃之前，我在阅读本教程后尝试再次映射我的 ORM：http: [//docs.doctrine-project.org/projects/doctrine-orm/en/latest/tutorials/composite -primary-keys.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/tutorials/composite-primary-keys.html)。但它并没有像我想象的那样工作。然后下面的答案帮助我找到了方法。

1.  [Symfony 2：使用理论查询构建器在非相关表上进行 INNER JOIN](https://stackoverflow.com/questions/11116428/symfony-2-inner-join-on-non-related-table-with-doctrine-query-builder)
2.  [在 Symfony 2 / Doctrine 2 中有一个带有 DBAL 连接的自定义存储库？](https://stackoverflow.com/questions/14641918/having-a-custom-repository-with-dbal-connection-in-symfony-2-doctrine-2/15412862#15412862)
3.  [如何将实体管理器添加到自定义类或服务？](https://stackoverflow.com/questions/8022095/how-can-i-add-the-entity-manager-to-a-custom-class-or-service)
4.  ['调用非对象上的成员函数 get()'？](https://stackoverflow.com/questions/12905191/call-to-a-member-function-get-on-a-non-object/12908748#12908748)

现在，一切正常。我很高兴我可以在需要时使用 DBAL，但不会失去 ORM 的好处。

# javascript - 无论调用 javascript 函数如何，都执行 c# 代码

> ID：16045695
> 
> 赞同：0
> 
> 时间：2013-04-16T19:42:00.043
> 
> 标签：javascript, asp.net-mvc, razor, simplemembership

我有一个问题，即使功能注销尚未执行，用户也一直注销。这似乎是由于代码在 c# 中（这是在剃刀布局页面 mvc4 中）

```
<script type="text/javascript">
    var idleTimer = 0;
    function notIdle() 
    {
        clearTimeout(idleTimer);     
        idleTimer = setTimeout(function () { logout() }, 5000);
    }

    function logout()           
    {
        @if (Request.IsAuthenticated )
        {
            WebSecurity.Logout();                  
        }
        window.location.reload();
        clearTimeout(idleTimer);

    }         
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:01:16.613

正如 Ryan 所说，您的 C# 代码将在页面加载时运行。我可以建议制作一个控制器方法`Logout`，将您的代码放在那里，然后在您的脚本`logout()`函数中重定向到该方法。代码将是这样的：
**HTML**

```
<button onclick="logout()">Logout</button> 
```

**Javascript**

```
 //I don't really know your logic behind those timeouts, so I leave them as is
    var idleTimer = 0;
    function notIdle() 
    {
        clearTimeout(idleTimer);     
        idleTimer = setTimeout(function () { logout() }, 5000);
    }

    function logout()           
    {
        location.href = "Home/Logout"; 
        //"Home" is the name of your controller, where you will put the Logout method.
    } 
```

**C＃**

```
public ActionResult Logout()
{
    if (Request.IsAuthenticated)
    {
        WebSecurity.Logout();
    }
    return RedirectToAction("Index", "Home"); //redirect to your previous page
} 
```

# error-handling - 如何为弹出窗口和其他特殊页面使用不同的 Wicket 过期/错误页面？

> ID：16045696
> 
> 赞同：1
> 
> 时间：2013-04-16T19:42:03.673
> 
> 标签：error-handling, wicket

我的检票口应用程序中有一个自定义错误和过期页面。但在某些情况下，我希望它们的行为有所不同（例如，在不应将我们重定向到主页的弹出窗口中）。

解决方案有哪些选择？我假设我可以从请求对象中读取错误/过期页面中的页面参数（例如“errorpage=no”）。但是如何以最佳方式将此查询参数添加到特定页面..？

我很确定有人已经解决了这个问题，所以这将是一个在这里分享一个很好的解决方案的好机会..

相对相似的问题： [How to change Wicket behavior on Page Expired](https://stackoverflow.com/questions/9393902/how-to-change-wicket-behaviour-on-page-expired)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T00:05:54.117

您可以只注册一个 RequestCycleListener 来侦听“onException”并根据 RequestCycle 以不同方式处理异常，否则将回退到默认实现。

（基于 Wicket 6.6 的代码）

```
 getRequestCycleListeners().add(new AbstractRequestCycleListener() {
        @Override
        public IRequestHandler onException(RequestCycle cycle, Exception ex) {
            if (ex instanceof PageExpiredException) {
                //handle your pageExpiredException...

                if (something) {
                    return new RenderPageRequestHandler(new PageProvider(HomePage.class));
                }

            }

            return super.onException(cycle, ex);
        }
    }); 
```

# wpf - 如何使 WPF 图像控件具有与其 (BitmapImage) 源相同的尺寸？

> ID：16045697
> 
> 赞同：2
> 
> 时间：2013-04-16T19:42:03.870
> 
> 标签：wpf, xaml

我正在用 XAML 设计一个视图，在布局的某个地方有一个 Image 元素，它将被放在 ViewBox、ScrollViewer 和 Inkcanvas 的某种组合中（还不确定顺序）。目前早期的原型是这样的：

```
<Window x:Class="InkCanvasTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow"
        x:Name="ThisWindow">

    <DockPanel x:Name="root" DataContext="{Binding ElementName=ThisWindow}">
        <StackPanel Orientation="Horizontal" DockPanel.Dock="Bottom" HorizontalAlignment="Center" Margin="0,0,5,0">
            <StackPanel.Resources>
                <Style TargetType="{x:Type Button}" x:Key="EstiloBotão">
                    <Setter Property="Height" Value="40"/>
                    <Setter Property="Width" Value="130" />
                    <Setter Property="Margin" Value="5,5,0,5" />
                </Style>
            </StackPanel.Resources>
            <Button Content="Limpar Alterações" Style="{DynamicResource EstiloBotão}"/>
            <Button Content="Concluir" Style="{DynamicResource EstiloBotão}" Click="Concluir_Click" />
        </StackPanel>
            <!-- Magic Happens Here -->
        <ScrollViewer HorizontalScrollBarVisibility="Visible" VerticalScrollBarVisibility="Visible" PanningMode="Both" Width="752">
            <InkCanvas x:Name="cv" Cursor="Cross" Width="{Binding Width, ElementName=canvas_image}" Height="{Binding Height, ElementName=canvas_image}" >
                <Image x:Name="canvas_image" Stretch="Uniform" Source="C:\Users\helton\Desktop\franjas_binarizadas.png"/>   
            </InkCanvas>
        </ScrollViewer>     

    </DockPanel>
</Window> 
```

我无法事先知道源图像的尺寸是多少，但我想确保 Image 元素的 Width 和 Height 正确“设置”。原因是我将在图像上绘制（位于 InkCanvas 元素内），然后将结果保存为与源图像大小相同的图像。

目前，我的“保存”方法是这样做的：

```
 private void Concluir_Click(object sender, RoutedEventArgs e)
    {
        int dWidth = (int)cv.ActualWidth;  // SHOULD BE Width not ActualWidth, but is zero!!!
        int dHeight = (int)cv.ActualHeight;  // Here the same thing
        double dpiX = 96;
        double dpiY = 96;
        RenderTargetBitmap rtb = new RenderTargetBitmap(dWidth, dHeight, dpiX, dpiY, PixelFormats.Pbgra32);
        rtb.Render(cv);

        PngBitmapEncoder pnge = new PngBitmapEncoder();
        pnge.Frames.Add(BitmapFrame.Create(rtb));
        Stream stream = File.Create("franjas_binarizadas_limpas.png");
        pnge.Save(stream);
        stream.Close();
    } 
```

问题：当我尝试阅读“宽度”或“高度”时，它们为零。当我阅读“ActualHeight”或“ActualWidth”时，有时它们不是我期望的值（由于 ScrollView 剪辑或 ViewBox 比例布局转换）。

目标：将`Image`'s`Width`和`Height`properties 设置为与其源图像相等（通过绑定或其他方式）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T19:45:48.867

Set the `Stretch` Property to `None`. That will make the Image control maintain the size of the original bitmap.

```
<Image Stretch="None"/> 
```

# sql-server - tablix 仅返回数据集的 1 条记录

> ID：16045699
> 
> 赞同：27
> 
> 时间：2013-04-16T19:42:13.863
> 
> 标签：sql-server, reporting-services, ssrs-2008

我在 SSRS 报告上有一个 tablix：

![在此处输入图像描述](https://i.stack.imgur.com/KhO3U.png)

当我运行报告时，它只返回 1 条记录！

我做了一个 sql server 跟踪，正在执行的查询返回 14 行。

在同一份报告中，我删除了另一个表，只在上面放了一个字段，它按预期返回 14。我注意到有效的和无效的之间的区别是：

![在此处输入图像描述](https://i.stack.imgur.com/PecsI.png)

我怎样才能将那 3 条水平线放在不起作用的那条线上？

我的问题可能是什么？我做错了什么？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-16T20:06:27.770

屏幕截图显示您没有任何组。您从 Tablix 中删除了详细信息组。您可以通过插入一个新组或从头开始构建一个新的 tablix 对象来重新添加它。

要添加组，请单击应具有组的行中的单元格，在本例中为 [ReferredBy] 单元格。选择添加组 -> 行组 -> 上方相邻。如果您的数据已按正确的粒度级别分组，请在 Tablix 组屏幕中选择显示详细数据。这将在当前行上方的一行中添加详细信息三重栏。如果您需要对某事进行分组，请选择要分组的字段。这将在当前行上方的一行中添加一个 )。将现有行中单元格的内容复制并粘贴到新行中，然后删除原始行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T19:53:29.167

当您期望多个声音时，一行就像一个分组问题。调试这样的东西我会在当前元素下面创建一个新的表格元素，然后从数据集中拖放一列。如果它返回 14，您就知道它不是被评估为问题的数据集，而是表的表达式。如果它也只返回一个，你可能有一个谓词、过滤表达式或参数设置也限制了范围。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-18T11:21:18.920

可能，您为文本框设置了表达式，而不是为行组设置了表达式。只需找到 Group Properties，然后在 Group On 中放入相同的表达式。

# asp.net-mvc - 无法将数据从视图传递到控制器

> ID：16045701
> 
> 赞同：2
> 
> 时间：2013-04-16T19:42:18.960
> 
> 标签：asp.net-mvc

我开始使用 MVC，目前正在开发一个应用程序。当我试图将一些数据从视图传递到控制器操作时，我遇到了一个小问题。

这是我的模型：

```
public class TicketIndexModel
{
    public IEnumerable<Ticket> ticketList { get; set; }
    public Ticket newTicket { get; set; }

} 
```

这是我的控制器动作：

```
public ActionResult AddTicket(Ticket ticket)
    {
        string user = User.Identity.Name;
        TicketDetail ticketDetails = new TicketDetail();

        if (ModelState.IsValid)
        {
            ticket.DateCreated = DateTime.Now;
            ticket.Status = "submitted";
            ticket.UserName = user;
            db.Tickets.Add(ticket);
            db.SaveChanges();

         //some other stuff

            return RedirectToAction("Index");
        } 
```

在视图中，首先我显示所有票，然后我有一个小表格来添加新票。这就是表格的样子。

```
@using (Html.BeginForm("AddTicket","Ticket",FormMethod.Post)) {

    <div class="editor-label">
        @Html.LabelFor(model => model.newTicket.Title)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.newTicket.Title)
        @Html.ValidationMessageFor(model => model.newTicket.Title)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.newTicket.Description)
    </div>
    <div class="editor-field">
        @Html.TextAreaFor(model => model.newTicket.Description, new { rows= "8",cols="2"})
        @Html.ValidationMessageFor(model => model.newTicket.Description)
    </div>

      <p>
        <input type="submit" value="Submit" />
    </p>

} 
```

我面临的问题是当我尝试添加新票时，票证参数始终为空，因此 If(ModelState.Isvalid) <- 始终为假，因此我无法向数据库添加新票证。

有谁知道为什么？

**稍后编辑**：

我的模型现在是：

```
public IPagedList<Ticket> ticketList { get; set; }

    //[Required(ErrorMessage ="Title required")]
    [Display(Name = "Title")]
    public string TicketTitle { get; set; }

    //[Required(ErrorMessage="Description Required")]
    [Display(Name = "Description")]
    public string TicketDescription { get; set; } 
```

我现在的方法是：

```
 [HttpPost]
    public ActionResult AddTicket(TicketIndexModel newTicket)
    {
        string user = User.Identity.Name;     

        Ticket ticket = new Ticket();

        if (ModelState.IsValid)
        {
            ticket.Title = newTicket.TicketTitle;
            ticket.Description = newTicket.TicketDescription;
            ticket.DateCreated = DateTime.Now;
            ticket.Status = "open";
            ticket.UserName = user;
            db.Tickets.Add(ticket);
            db.SaveChanges(); 
```

我现在遇到的问题如下：

如果在模型中，我评论 [Required] 我可以添加一张票，如果没有，在控制器中，每次我提交新票时签名中的 newTicket 为空。但是，控制器输入 if(ModelState.IsValid) 并且我在 db.SaveChanges(ticket) 处收到错误。

我需要服务器和客户端验证。你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:56:00.207

您的 AddTicket 方法应如下所示

```
[HttpPost]
public ActionResult AddTicket(TicketIndexModel ticketIndexModel) 
```

然后从传入的对象访问 newTicket。

# ember.js - ember-data rev 12 中的多态 hasMany 和 belongsTo 关系

> ID：16045708
> 
> 赞同：1
> 
> 时间：2013-04-16T19:42:38.950
> 
> 标签：ember.js, ember-data

我无法使用 ember-data rev12 实现我所理解的多态关系。

我有以下型号：

```
App.Project = DS.Model.extend
  lists: DS.hasMany('App.List', { polymorphic: true })

App.Proposal = DS.Model.extend
  lists: DS.hasMany('App.List', { polymorphic: true })

App.Employee = DS.Model.extend
  lists: DS.hasMany('App.List', { polymorphic: true })

App.List = DS.Model.extend
  name: DS.attr('string')
  #project: DS.belongsTo('App.Project', { polymorphic: true }) 
```

我正在尝试像这样从项目路由器创建一个新列表。

```
App.ProjectRoute = Ember.Route.extend
  events:
    newList: (project) ->
      lists = project.get('lists')
      list = App.List.createRecord(name: 'list1')
      lists.pushObject(list)
      @store.commit() 
```

但是对服务器的请求错误地设置了多态键。

我期待有效载荷看起来像：

```
 { list: { name: list1, listable_type: project, listable_id: 100 } } 
```

但得到：

```
{ list: { name: list1, project_type: project, project_id: 100 } } 
```

我错过了什么？有没有办法定义多态类型或键？

* * *

**这是我的临时黑客**

[https://gist.github.com/arenoir/5409904](https://gist.github.com/arenoir/5409904)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T00:43:23.977

首先，根据您拥有的当前模型，您不需要使用多态关联。而且您可能不想`polymorphic`在关系的两端都设置选项。

如果你想让你的有效负载包含`listable`，你只需要重命名你的属性：

```
App.List = DS.Model.extend
  name: DS.attr('string')
  listable: DS.belongsTo('App.Project', { polymorphic: true }) 
```

**更新**

根据我对您的类的理解，它`List`可以属于不同的类型。所以你应该像这样定义你的模型：

```
App.Listable = DS.Model.extend
  lists: DS.hasMany('App.List')

App.Project = App.Listable.extend

App.Proposal = App.Listable.extend

App.Employee = App.Listable.extend

App.List = DS.Model.extend
  name: DS.attr('string')
  listable: DS.belongsTo('App.Listable', { polymorphic: true }) 
```

有效载荷将如下所示：

```
{list: {name: "list1", listable_type: 'project', listable_id: 100}} 
```

我不知道您是否还希望将一个列表同时添加到多个列表中。根据您的模型名称，我很容易相信这不是您想要的：一个列表应该包含不同的对象（项目、提案、员工）。而不是一个项目可以有多个列表。

# html - HTML中的默认字体是什么

> ID：16045713
> 
> 赞同：0
> 
> 时间：2013-04-16T19:42:57.533
> 
> 标签：html

如果您没有专门设置字体，默认字体设置是什么？似乎是 Calibri，这是对的还是因为我的浏览器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:46:03.077

HTML 是一种您的浏览器解释为您提供网页的语言。因此，您的浏览器具有默认字体，如果没有从 HTML 或 CSS 内部更改字体的指令，则会显示该字体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T19:50:54.003

每个浏览器都有自己的“用户代理样式表”，它控制所有元素的默认格式。有关此主题的更深入阅读：[用户代理样式表基础知识](http://meiert.com/en/blog/20070922/user-agent-style-sheets/)

此浏览器定义的样式表定义了在应用任何进一步的格式之前所有元素的显示方式。一旦您开始定义样式，它们就会被覆盖。

请注意，虽然每个浏览器都有自己的默认样式表，但用户代理样式表通常由辅助技术定义，以帮助色盲、视力障碍者等。所以你不能假设每个 Chrome 都有相同的默认用户代理床单。主题/皮肤软件也经常覆盖这些样式表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T19:44:39.530

HTML 没有默认字体。如果您不设置 HTML 文档的样式，则演示文稿由浏览器默认设置控制。

为了消除浏览器之间的差异，存在各种重置 CSS 脚本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T19:46:36.827

这完全取决于您的浏览器和操作系统。如您[在此处](http://www.w3schools.com/cssref/pr_font_font-family.asp)看到的，默认情况下*未指定*它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T19:48:26.707

正如前面的答案所说，没有默认的 HTML 字体。每个浏览器都有自己的默认样式。您可能希望[查看此问题](https://stackoverflow.com/questions/214378/how-can-i-locate-the-default-style-sheet-for-a-browser)以了解有关每个浏览器默认决定哪种字体的更多信息。

# coldfusion - 循环查询时出现未定义变量的错误

> ID：16045714
> 
> 赞同：1
> 
> 时间：2013-04-16T19:43:02.850
> 
> 标签：coldfusion, cfloop

使用`cfloop`.

当我`cfdump`在查询上使用 a 时（请注意，在循环内），我可以很好地看到所有数据。但是，当我像往常一样尝试获取每个变量的值时`cfloop`，我收到一条消息，指出它们未定义。然后我更改了每个变量以专门引用查询，现在的问题是该变量在查询中未定义。这是代码：

```
<cffunction name="writeCourses">
<cfargument name="recordset" required="yes" type="query">
     <cfif recordset.RecordCount NEQ 0>
         <cfset temp = "">  
         <cfoutput>
         <cfloop query="recordset">     
         <!--- <cfdump var="#recordset#"> <cfabort/> --->  

            <cfset temp = temp & "<strong>#recordset.courseType# #recordset.courseNum# ">
            <cfif isDefined("recordset.courseTHM") AND recordset.courseTHM EQ 1>
                <cfset temp = temp & "(#left(recordset.courseNum,3)#4) ">
            </cfif>
            <cfif isDefined("recordset.courseName")>
                <cfset temp = temp & "#recordset.courseName# </strong><br>">
            </cfif>
            <cfset temp = temp & "#recordset.courseDESC#<br>">
            <cfset temp = temp & "#recordset.courseHours#<br><br>">
        </cfloop>
        </cfoutput>
     <cfelse>
        <cfset temp = "">
     </cfif>
 <cfreturn temp>
</cffunction> 
```

如您所见，每个变量都包含在`##`标签中。最初它们都没有被处理，`recordset.`但它们仍然是未定义的。当我取消注释`cfdump`and`cfabort`标记时，它们工作正常，我可以看到`recordset`所有数据的查询。

每次我使用`cfloop`查询时，它都会按预期工作。另外，这段代码不是我写的，我得修改一下（原作者不再在这里工作）。

`recordset`这是转储的示例：

![在此处输入图像描述](https://i.stack.imgur.com/K9DEr.jpg)

错误消息：
详细信息：[空字符串]
ErrNumber：0
消息：元素 COURSETYPE 在 RECORDSET 中未定义。
已解决名称：RECORDSET

错误行是：

```
 <cfset temp = temp & "<strong>#recordset.courseType# #recordset.courseNum# ">   
   <cfif isDefined("recordset.courseTHM") AND recordset.courseTHM EQ 1>
   <cfset temp = temp & "(#left(recordset.courseNum,3)#4) ">
   </cfif>
   <cfif isDefined("recordset.courseName")>
   <cfset temp = temp & "#recordset.courseName# </strong><br>">
   </cfif> 
```

这就是一行：/

调用上述内容的存储过程/函数：

```
<cffunction name="getCoursesByDept">
<cfargument name="deptCode" required="yes" type="string">
<CFSTOREDPROC procedure="dbo.GetCourses"     datasource="WebCatalog">
    <CFPROCPARAM type="IN" dbvarname="@deptCode" value="#deptCode#" cfsqltype="CF_SQL_CHAR">
    <CFPROCRESULT name="result">
</CFSTOREDPROC>
<cfinvoke method="writeCourses" recordset="#result#" returnvariable="output">
<cfreturn output>
</cffunction> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:55:26.760

您的问题似乎是无法确定范围。这是您的前 4 行：

```
<cffunction name="writeCourses">
<cfargument name="recordset" required="yes" type="query">
 <cfif recordset.RecordCount NEQ 0>
     <cfset temp = ""> 
```

试试这样：

```
<cffunction name="writeCourses">
<cfargument name="recordset" required="yes" type="query">
<cfset var temp = "">  
<cfif arguments.recordset.RecordCount NEQ 0> 
```

不同之处在于对局部变量 temp 使用 var 关键字，并将参数范围添加到记录集变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T02:35:44.243

（除了丹的评论......）

> 如果 [程序] 找不到任何内容，则返回包含错误消息的查询（即未找到课程）

那么这意味着该`COURSETYPE`列并不总是存在于 中`resultset`，这正是错误消息报告的内容。如果过程返回*任何*结果，无论内容如何，`cfif`​​块内的代码都会执行。由于第一行代码使用该列，如果不验证它是否存在，它会导致您看到的确切错误。

此外，正如我在评论中提到的，您确实需要本地化函数变量`result`、、、`output`等`temp`。`var`如果您重用变量名称，即使在同一页面内，缺少范围也会产生问题。正如@Dan 建议的那样，您应该完全限定所有变量 - 特别是 function `arguments`。

（顺便说一句，我知道您正在修改现有代码，但错误消息实际上应该在 CF 中处理，*而不是*在程序内部。程序的工作只是返回数据。CF 代码应该检查 recordCount 并采取适当的措施如果没有找到记录。）

# android - Android 通知未显示

> ID：16045722
> 
> 赞同：136
> 
> 时间：2013-04-16T19:43:34.500
> 
> 标签：android, notifications

我需要一个可以在 Android 上添加通知的程序。当有人点击通知时，它应该引导他们进入我的第二个活动。

我已经建立了代码。该通知应该有效，但由于某种原因它不起作用。`Notification`根本不显示。我不知道我错过了什么。

这些文件的代码：

```
Notification n = new Notification.Builder(this)
        .setContentTitle("New mail from " + "test@gmail.com")
        .setContentText("Subject")
        .setContentIntent(pIntent).setAutoCancel(true)
        .setStyle(new Notification.BigTextStyle().bigText(longText))
        .build();

NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
// Hide the notification after it's selected

notificationManager.notify(0, n); 
```

* * *

## 回答 #1

> 赞同：470
> 
> 时间：2013-05-08T19:04:13.620

没有图标，代码将无法工作。因此，`setSmallIcon`像这样将调用添加到构建器链以使其工作：

```
.setSmallIcon(R.drawable.icon) 
```

* * *

### 安卓奥利奥（8.0）及以上

Android 8 引入了`channelId`使用`NotificationChannel`.

```
NotificationManager mNotificationManager;

NotificationCompat.Builder mBuilder =
    new NotificationCompat.Builder(mContext.getApplicationContext(), "notify_001");
Intent ii = new Intent(mContext.getApplicationContext(), RootActivity.class);
PendingIntent pendingIntent = PendingIntent.getActivity(mContext, 0, ii, 0);

NotificationCompat.BigTextStyle bigText = new NotificationCompat.BigTextStyle();
bigText.bigText(verseurl);
bigText.setBigContentTitle("Today's Bible Verse");
bigText.setSummaryText("Text in detail");

mBuilder.setContentIntent(pendingIntent);
mBuilder.setSmallIcon(R.mipmap.ic_launcher_round);
mBuilder.setContentTitle("Your Title");
mBuilder.setContentText("Your text");
mBuilder.setPriority(Notification.PRIORITY_MAX);
mBuilder.setStyle(bigText);

mNotificationManager =
    (NotificationManager) mContext.getSystemService(Context.NOTIFICATION_SERVICE);

// === Removed some obsoletes
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O)
{
    String channelId = "Your_channel_id";
    NotificationChannel channel = new NotificationChannel(
                                        channelId,
                                        "Channel human readable title",
                                        NotificationManager.IMPORTANCE_HIGH);
   mNotificationManager.createNotificationChannel(channel);
  mBuilder.setChannelId(channelId);
}

mNotificationManager.notify(0, mBuilder.build()); 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2013-04-28T09:14:35.197

实际上[ƒernando Valle 的回答](https://stackoverflow.com/questions/16045722/android-notification-is-not-showing/16045842#16045842)似乎并不正确。再说一次，您的问题过于模糊，因为您没有提及错误或无效。

查看您的代码，我假设`Notification`根本没有显示。

您的通知未显示，因为您没有提供图标。尽管 SDK 文档没有提到它是必需的，但实际上非常需要，而且你`Notification`不会没有它。

`addAction`仅从 4.1 开始可用。在此之前，您将使用`PendingIntent`启动一个`Activity`. 您似乎指定了 a `PendingIntent`，因此您的问题出在其他地方。从逻辑上讲，人们必须断定它是丢失的图标。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2015-10-02T03:14:02.017

你错过了小图标。我犯了同样的错误，上面的步骤解决了它。

根据官方文档：[Notification](http://developer.android.com/reference/android/app/Notification.html)对象必须包含以下内容：

1.  一个小图标，由[setSmallIcon()设置](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html#setSmallIcon(int))

2.  由[setContentTitle()设置的标题](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html#setContentTitle(java.lang.CharSequence))

3.  详细文本，由[setContentText()设置](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html#setContentText(java.lang.CharSequence))

4.  **在 Android 8.0（API 级别 26）及更高版本**上，有效的通知通道 ID，由[setChannelId()](https://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html#setChannelId(java.lang.String))设置或在创建通道时在 NotificationCompat.Builder 构造函数中提供。

请参阅[http://developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2018-10-16T07:59:32.843

这让我今天大吃一惊，但我意识到这是因为在[Android 9.0](https://en.wikipedia.org/wiki/Android_Pie) (Pie) 上，*请勿打扰*默认情况下也会隐藏所有通知，而不是像在[Android 8.1](https://en.wikipedia.org/wiki/Android_Oreo) (Oreo) 及之前的版本中那样将它们静音。这不适用于通知。

我喜欢为我的开发设备启用 DND，因此进入 DND 设置并更改设置以简单地使通知静音（但不隐藏它们）为我修复了它。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2019-01-10T11:25:46.697

[对于Android 8.1](https://en.wikipedia.org/wiki/Android_Oreo) (Oreo)之后的 Android 版本，必须创建通知通道以使通知可见。如果在您的应用程序中看不到 Oreo+ Androids 的通知，您需要在应用程序启动时调用以下函数 -

```
private void createNotificationChannel() {
// Create the NotificationChannel, but only on API 26+ because
// the NotificationChannel class is new and not in the support library
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
        CharSequence name = getString(R.string.channel_name);
        String description = getString(R.string.channel_description);
        int importance = NotificationManager.IMPORTANCE_DEFAULT;
        NotificationChannel channel = new NotificationChannel(CHANNEL_ID, name,
       importance);
        channel.setDescription(description);
        // Register the channel with the system; you can't change the importance
        // or other notification behaviours after this
        NotificationManager notificationManager =
        getSystemService(NotificationManager.class);
        notificationManager.createNotificationChannel(channel);
   }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-06-15T23:53:00.860

您还需要更改 build.gradle 文件，并将使用的 Android SDK 版本添加到其中：

```
implementation 'com.android.support:appcompat-v7:28.0.0' 
```

这对我来说就像一个魅力。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-16T19:50:38.437

我想你忘记了

```
addAction(int icon, CharSequence title, PendingIntent intent) 
```

看这里：*[添加动作](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html#addAction%28int,%20java.lang.CharSequence,%20android.app.PendingIntent%29)*

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-03-01T14:16:36.473

我的 Android 应用程序也遇到了同样的问题。我正在尝试通知，发现通知显示在我的运行[Android 7.0](https://en.wikipedia.org/wiki/Android_Nougat) (Nougat) 系统的 Android 模拟器上，而它没有在运行[Android 8.1](https://en.wikipedia.org/wiki/Android_Oreo) (Oreo) 的手机上运行。

阅读文档后，我发现 Android 有一个称为通知通道的功能，没有它，通知将不会显示在 Oreo 设备上。以下是通知渠道上官方 Android 文档的链接。

*   *[通知概述，通知剖析](https://developer.android.com/guide/topics/ui/notifiers/notifications.html#Templates)*
*   *[创建和管理通知渠道](https://developer.android.com/training/notify-user/channels.html)*

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-04-07T04:40:19.107

对我来说，这是一个问题`deviceToken`。请检查接收方和发送方设备令牌是否在您的数据库中或您访问它以发送通知的任何地方正确更新。

例如，使用以下内容在应用启动时更新设备令牌。因此，它将始终正确更新。

```
// Device token for push notifications
FirebaseInstanceId.getInstance().getInstanceId().addOnSuccessListener(
  new OnSuccessListener<InstanceIdResult>() {

    @Override
    public void onSuccess(InstanceIdResult instanceIdResult) {

        deviceToken = instanceIdResult.getToken();

        // Insert device token into Firebase database
        fbDbRefRoot.child("user_detail_profile").child(currentUserId).child("device_token")).setValue(deviceToken)
                .addOnSuccessListener(
                  new OnSuccessListener<Void>() {

                    @Override
                    public void onSuccess(Void aVoid) {

                    }
                });
    }
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-01-27T11:31:10.207

如果您一个接一个地快速显示通知或取消现有通知，然后立即再次显示通知，则可能不会显示通知（例如，触发提醒通知以通知用户正在进行的通知发生变化）。在这些情况下，系统*可能会*在感觉通知对用户来说可能变得过于庞大/垃圾邮件时才决定阻止通知。

请注意，从外部来看，至少在现有的 Android（用 10 测试）上，这种行为看起来有点随机：它有时会发生，有时不会。我的猜测是，有一个非常短的时间阈值，在此期间您不允许发送太多通知。调用`NotificationManager.cancel()`然后`NotificationManager.notify()`有时可能会导致这种行为。

如果您可以选择，在更新通知时不要取消它，而只需调用`NotificationManager.notify()`更新的通知即可。这似乎不会触发上述系统阻止。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-09-05T11:21:11.283

如果您在使用通知通道时使用的版本 >= [Android 8.1 (Oreo)，请将其重要性设置为高：](https://en.wikipedia.org/wiki/Android_Oreo)

```
int importance = NotificationManager.IMPORTANCE_HIGH;
NotificationChannel channel = new NotificationChannel(CHANNEL_ID, name, importance); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-06-07T09:16:07.097

我遇到了与您类似的问题，在寻找解决方案时，我找到了这些答案，但它们并不像我希望的那样直接，但它给出了一个想法；您的通知可能不会显示，因为对于 >=8 的版本，通知的处理方式相对不同，有一个`NotificationChannel`有助于管理通知的方法，[这对我有帮助](https://www.example.com/)。快乐编码。

```
void Note(){
    //Creating a notification channel
    NotificationChannel channel=new NotificationChannel("channel1",
                                                        "hello",
                                                        NotificationManager.IMPORTANCE_HIGH);
    NotificationManager manager=(NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    manager.createNotificationChannel(channel); 

    //Creating the notification object
    NotificationCompat.Builder notification=new NotificationCompat.Builder(this,"channel1");
    //notification.setAutoCancel(true);
    notification.setContentTitle("Hi this is a notification");
    notification.setContentText("Hello you");
    notification.setSmallIcon(R.drawable.ic_launcher_foreground);   

    //make the notification manager to issue a notification on the notification's channel
    manager.notify(121,notification.build());
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-01-31T06:35:53.790

确保您的 notificationId 是唯一的。我不知道为什么我的测试推送没有显示出来，但这是因为通知 id 是根据推送内容生成的，而且由于我一遍又一遍地推送相同的通知，所以通知 id 保持不变。

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2021-05-06T13:50:10.780

```
val pendingIntent = PendingIntent.getActivity(applicationContext, 0, Intent(), 0)

var notification = NotificationCompat.Builder(applicationContext, CHANNEL_ID)
                                    .setContentTitle("Title")
                                    .setContentText("Text")
                                    .setSmallIcon(R.drawable.icon)
                                    .setPriority(NotificationCompat.PRIORITY_HIGH)
                                    .setContentIntent(pendingIntent)
                                    .build()
val mNotificationManager = getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager

mNotificationManager.notify(sameId, notification) 
```

# c# - 捕获特定的 WCF FaultException

> ID：16045726
> 
> 赞同：4
> 
> 时间：2013-04-16T19:43:39.597
> 
> 标签：c#, wcf, exception, faultexception

单层应用程序可以通过以下方式区分异常：

```
Exception ex;

if (ex is System.DirectoryServices.AccountManagement.PasswordException)
    ... 
```

其中 ex 只是一个通用的例外。

当您迁移到 WCF 进行多层时，您将失去所有这些，您需要使用 FaultException 机制。

问题是我找不到任何方法来执行上述操作。

在我的客户端中，我想捕获 FaultException 类型，然后区分它们，例如：

```
catch (FaultException ex)
{
    if FaultException is (PasswordExceptionFault)
      ...
    etc
} 
```

有没有办法做到这一点？

否则我必须有许多 catch 构造——每种类型的 FaultException 一个。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T20:21:59.180

使用 WCF 服务时，您必须使用 FaulException，因为它是处理错误的本机 Soap 方法（异常也是不可序列化的）。

在典型场景中，您将首先在每个操作合同上添加类型化的 FaultContract。

```
// NOTE: This is the std wcf template
[ServiceContract]
public interface IService1
{
    [FaultContract(typeof(int))]
    [FaultContract(typeof(string))]
    [FaultContract(typeof(DateTime))]
    [OperationContract]
    string GetData(int value);
} 
```

您的服务将为您决定客户端需要故障信息的所有故障情况发送键入的故障异常。

您的客户端可以捕获表示操作合同中指定的自定义 SOAP 错误的 FaultException 类型。

```
 ServiceReference1.Service1Client proxy = new ServiceReference1.Service1Client();

    try
    {
        Console.WriteLine("Returned: {0}", proxy.GetData(-5));
    }
    catch (FaultException<int> faultOfInt)
    {
        //TODO
        proxy.Abort();
    }
    catch (FaultException<string> faultOfString)
    {
        //TODO
        proxy.Abort();
    }
    catch (FaultException<DateTime> faultOfDateTime)
    {
        //TODO
        proxy.Abort();
    }
    catch (FaultException faultEx)
    {
        Console.WriteLine("An unknown exception was received. "
          + faultEx.Message
          + faultEx.StackTrace
        );
        proxy.Abort();
    }
    catch (Exception e)
    {
        //generic method
        Type exceptionType = e.GetType();
        if (exceptionType.IsGenericType && exceptionType.GetGenericTypeDefinition() == typeof(FaultException<>))
        {
            PropertyInfo prop = exceptionType.GetProperty("Detail");
            object propValue = prop.GetValue(e, null);
            Console.WriteLine("Detail: {0}", propValue);
        }
        else
        {
            Console.WriteLine("{0}: {1}", exceptionType, e.Message);
        }
    } 
```

最后，由于 FaultException 继承了 Exception，您仍然可以使用反射来获取内部故障类型和详细信息，如下所示。

另请注意，来自 WCF 客户端上的通信方法的常见预期异常包括 TimeoutException、CommunicationException 和 CommunicationException 的任何派生类（如 FaultException）。这些表示通信过程中出现问题，可以通过中止 WCF 客户端并报告通信故障来安全地处理该问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-03-10T00:23:27.293

只需使用类似的东西：

```
if (error is FaultException<ServerTooBusyException>) 
{
    // Do something
} 
```

# c# - c# - 如何确定某个用户是否对文件或文件夹具有（有效）读取权限？

> ID：16045728
> 
> 赞同：3
> 
> 时间：2013-04-16T19:43:48.753
> 
> 标签：c#, active-directory, filesystems

我想知道用户（以其在活动目录中的名称而闻名）是否对某个文件或文件夹具有有效的读取权限（共享权限和 nfts 权限）。

我没有用户的凭据，只有它的名字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:55:35.620

请查看advapi32.dll 中的[GetEffectiveRightsFromAcl 。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446637%28v=vs.85%29.aspx)

你可以试试[这里提供的代码](https://stackoverflow.com/a/6536955/1012641)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:10:41.953

我会调查 System.Security.AccessControl; 命名空间，它可能会提供您正在寻找的内容。

# matlab - 当我在图像之前使用符号“〜”时，它在 MATLAB 中是什么意思？

> ID：16045730
> 
> 赞同：1
> 
> 时间：2013-04-16T19:43:57.993
> 
> 标签：matlab

`~`当我在图像之前使用它是什么意思？

例如：

```
K = bwmorph(~J,'thin','inf'); 
```

`J`二进制图像在哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T19:46:55.253

这是 MATLAB 中的逻辑非运算符。在 MATLAB 帮助中阅读更多信息：

> > 帮不上忙

在您的情况下，它基本上会反转二进制图像的颜色。这是因为 not(1) = 0 和 not(0) = 1，通常的解释是 0/1 与 false/true。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T19:46:10.337

这是一个合乎逻辑的`not`.

欲了解更多详情，请输入

```
doc ~ 
```

**编辑**

```
bwmorph(BW,operation) 
```

正如其他一些成员所指出的那样，它明确地适用于二值图像，因此`~BW`仅意味着零与一的位置改变。

请检查一下：

```
A = eye(5)

~A 
```

在你的情况下，黑色会变成白色，反之亦然。

# url - Backbone url 的根路径（Backbone.js 部署在 suburi 中）

> ID：16045733
> 
> 赞同：0
> 
> 时间：2013-04-16T19:44:09.753
> 
> 标签：url, backbone.js, deployment

我将 Rails 和 Backbone.js 应用程序部署到 suburi。在 suburi 中添加所有请求的最佳方式是什么？

示例：应用程序部署到`www.example.com/app`. 我有一个资源`users`，我希望主干调用`www.example.com/app/users`而不是默认调用`www.example.com/users`。

我`ROOT_URI`在服务器端设置了一个变量，我将在主干应用程序中使用它。简单的方法是将其添加到模型和集合中的所有 url，但它很乏味且容易出错。我应该怎么办？覆盖`Backbone.sync`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:56:00.877

您可以在 Fetch 调用中传递 URL

**例子**

```
model.fetch({
            url: yourServiceURL,
            success: function (response, xhr)
            {
                //console.log("Successfully Fetched...");

            },
            error: function()
            {
                //console.log("Error Occurred...");

            }
        }); 
```

这样您就不必在模型和集合中定义 url

**编辑** 我从您的评论中了解的内容。你可以做这样的事情

```
yourModel = Backbone.Model.extend({
        url:function() {
          return yourGlobalVarForRootURI+"/staticLogicalPathForEachModel";
        },
        parse: function (response) {

            return response;
        }

 }); 
```

通过这种方式，您可以`yourGlobalVarForRootURI`在所有模型/集合中提供变量，并且您可以更改此全局变量，以便在所有模型/集合中更改它。我希望它能解决你的问题

# c++ - Compile time check that string to enum map is complete

> ID：16045734
> 
> 赞同：7
> 
> 时间：2013-04-16T19:44:16.503
> 
> 标签：c++, string, map, c++11, enums

This question may very well be the n-th iteration of ["How to map strings to enums"](https://stackoverflow.com/search?q=map%20string%20enum%20%5Bc%2b%2b%5D).

My requirements go a little bit further and I want to `throw` a certain exception when a key is not found in the range of valid inputs. So I have this implementation of this `EnumMap` (needs boost for `const std::map` definition):

```
#include <map>
#include <string>
#include <sstream>
#include <stdexcept>
#include <boost/assign.hpp>

typedef enum colors {
  RED,
  GREEN,
} colors;
// boost::assign::map_list_of
const std::map<std::string,int> colorsMap  = boost::assign::map_list_of
                                            ("red",   RED)
                                            ("green", GREEN);
//-----------------------------------------------------------------------------
// wrapper for a map std::string --> enum
class EnumMap {
 private:
  std::map<std::string,int> m_map;
  // print the map to a string
  std::string toString() const {
    std::string ostr;
    for(auto x : m_map) {
      ostr += x.first + ", ";
    }
    return ostr;
  }
 public:
  // constructor
  EnumMap(const std::map<std::string,int> &m) : m_map(m) { }
  // access
  int at(const std::string &str_type) {
    try{
      return m_map.at(str_type);
    }
    catch(std::out_of_range) {
      throw(str_type + " is not a valid input, try : " + toString());
    }
    catch(...) {
      throw("Unknown exception");
    }
  }
};
//-----------------------------------------------------------------------------
int main()
{
  EnumMap aColorMap(colorsMap);
  try {
    aColorMap.at("red");    // ok
    aColorMap.at("yellow"); // exception : "yellow is not a valid input ..."
  }
  catch(std::string &ex) {
    std::cout << ex << std::endl;
  }
  return 0;
} 
```

This works well and does what I need. Now, I want to make it possible to know at compile time that all the elements in a certain `enum` are passed to the `EnumMap` constructor, and also that all the elements in the `enum` are matched with the corresponding string.

I tried with [std::initializer_list](http://www.cplusplus.com/reference/initializer_list/initializer_list/) and [static_assert](http://en.cppreference.com/w/cpp/language/static_assert), but it seems that VC2010 does not still support `std::initializer_list` (see [here](http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx)).

Does anyone have an idea on how it would be possible to implement this? Perhaps with templates, or implementing my own Enum class?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T21:11:40.607

```
typedef enum colors {
  MIN_COLOR,
  RED = MIN_COLOR,
  GREEN,
  MAX_COLOR
} colors;

template< colors C >
struct MapEntry {
  std::string s;
  MapEntry(std::string s_):s(s_) {}
};
void do_in_order() {}
template<typename F0, typename... Fs>
void do_in_order(F0&& f0, Fs&&... fs) {
  std::forward<F0>(f0)();
  do_in_order( std::forward<Fs>(fs)... );
}
struct MapInit {
  std::map< std::string, color > retval;
  operator std::map< std::string, color >() {
    return std::move(retval);
  }
  template<colors C>
  void AddToMap( MapEntry<C>&& ent ) {
    retval.insert( std::make_pair( std::move(end.s), C ) );
  }
  template< typename... Entries >
  MapInit( Entries&& entries ) {
    do_in_order([&](){ AddToMap(entries); }...);
  } 
};
template<typename... Entries>
MapInit mapInit( Entries&&... entries ) {
  return MapInit( std::forward<Entries>(entries)... );
}
const std::map<std::string, colors> = mapInit( MapEntry<RED>("red"), MapEntry<GREEN>("green") ); 
```

which gives you a C++11 way to construct a `std::map` from compile time `color` and run-time `string` data.

Throw in a "list of `MapEntry<colors>` to list of `colors`" metafunction next.

```
template<colors... Cs>
struct color_list {};
template<typename... Ts>
struct type_list {};
template<typename MapEnt>
struct extract_color;
template<colors C>
struct extract_color<MapEntry<C>> {
  enum {value=C};
};
template<typename Entries>
struct extract_colors;
template<typename... MapEntries>
struct extract_colors<type_list<MapEntries...>> {
  typedef color_list< ( (colors)extract_colors<MapEntries>::value)... > type;
}; 
```

Sort that list. Detect duplicates -- if there are, you screwed up.

Compile-time sorting is harder than the rest of this, and a 100+ lines of code. I'll leave it out if you don't mind too much! [Here is a compile time merge sort I wrote in the past to answer a stack overflow question](https://stackoverflow.com/questions/13330428/intel-c-compiler-is-extremely-slow-to-compile-recursive-decltype-returns/13333446#13333446) that would work with relatively simple adaptation (it sorts types with values, in this case we are sorting a list of compile-time values directly).

```
// takes a sorted list of type L<T...>, returns true if there are adjacent equal
// elements:
template<typename clist, typename=void>
struct any_duplicates:std::false_type {};
template<typename T, template<T...>class L, T t0, T t1, T... ts>
struct any_duplicates< L<t0, t1, ts...>, typename std::enable_if<t0==t1>::type>:
  std::true_type {};
template<typename T, template<T...>class L, T t0, T t1, T... ts>
struct any_duplicates< L<t0, t1, ts...>, typename std::enable_if<t0!=t1>::type>:
  any_duplicates< L<t1, ts...> > {}; 
```

Detect elements outside of the valid range of `colors` (ie, `<MIN_COLOR` or `>=MAX_COLOR`). If so, you screwed up.

```
 template<typename List>
 struct min_max;
 template<typename T, template<T...>class L, T t0>
 struct min_max {
   enum {
     min = t0,
     max = t1,
   };
 };
 template<typename T, template<T...>class L, T t0, T t1, T... ts>
 struct min_max {
   typedef min_max<L<t1, ts...>> rest_of_list;
   enum {
     rest_min = rest_of_list::min,
     rest_max = rest_of_list::max,
     min = (rest_min < t0):rest_min:t0,
     max = (rest_max > t0):rest_max:t0,
   };
 };
 template< typename T, T min, T max, typename List >
 struct bounded: std::integral_constant< bool,
   (min_max<List>::min >= min) && (min_max<List>::max < max)
 > {}; 
```

Count how many elements there are -- there should be `MAX_COLOR` elements. If not, you screwed up.

```
 template<typename List>
 struct element_count;
 template<typename T, template<T...>L, T... ts>
 struct element_count<L<ts...>>:std::integral_constant< std::size_t, sizeof...(ts) > {}; 
```

If none of these occurred, by pigeonhole you must have initialized each of them.

The only thing missing is that you could have gone off and used the same `string` for two values. As compile time `string`s are a pain, just check this at run time (that the number of entries in the `map` equals the number of `colors` after you initialize it).

Doing this in C++03 will be harder. You lack variardic templates, so you end up having to fake them. Which is a pain. `mpl` might be able to help you there.

Variardic templates are available in the Nov 2012 MSVC CTP compiler update.

Here is a toy example without duplicate checking and without bounds checking (it just checks that the number of map entries matches);

```
#include <cstddef>
#include <utility>
#include <string>
#include <map>

enum TestEnum {
   BeginVal = 0,
   One = BeginVal,
   Two,
   Three,
   EndVal
};

template<TestEnum e>
struct MapEntry {
  enum { val = e };
  std::string s;
  MapEntry( std::string s_ ):s(s_) {}
};

void do_in_order() {}
template<typename F0, typename... Fs>
void do_in_order(F0&& f0, Fs&&... fs) {
  std::forward<F0>(f0)();
  do_in_order( std::forward<Fs>(fs)... );
}

template<typename... MapEntries>
struct count_entries:std::integral_constant< std::size_t, sizeof...(MapEntries) > {};

// should also detect duplicates and check the range of the values:
template<typename... MapEntries>
struct caught_them_all:
  std::integral_constant<
    bool,
    count_entries<MapEntries...>::value == (TestEnum::EndVal-TestEnum::BeginVal)
  >
{};

struct BuildMap {
  typedef std::map<std::string, TestEnum> result_map;
  mutable result_map val;
  operator result_map() const {
    return std::move(val);
  }
  template<typename... MapEntries>
  BuildMap( MapEntries&&... entries ) {
    static_assert( caught_them_all<MapEntries...>::value, "Missing enum value" );
    bool _[] = { ( (val[ entries.s ] = TestEnum(MapEntries::val)), false )... };
  }
};

std::map< std::string, TestEnum > bob = BuildMap(
  MapEntry<One>("One")
  ,MapEntry<Two>("Two")
#if 0
  ,MapEntry<Three>("Three")
#endif
);

int main() {} 
```

Replace the `#if 0` with `#if 1` to watch it compile. [Live link](http://ideone.com/V9Knqr) if you want to play.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T20:15:05.697

> 有没有人知道如何实现这一点？也许使用模板，或者实现我自己的 Enum 类？

这是不可能的。不适用于 std::map，也不适用于模板元编程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-08T18:08:04.657

我想发布我最终到达的解决方案。我不想将其标记为明确的答案，因为我想弄清楚我们是否可以在编译时定义字符串向量。

```
// 
//  Cumstom Enum Header File
//

#include <vector>
#include <string>

#include <boost/algorithm/string/classification.hpp> 
#include <boost/algorithm/string/split.hpp>
#include <boost/range/algorithm/find.hpp>

std::vector<std::string> split_to_vector(std::string s)
{
    // splits a comma separated string to a vector of strings
    std::vector<std::string> v;
    boost::split(v, s, boost::is_any_of(", "), boost::token_compress_on);
    return v;
}

#define ENUM_TO_STRING(X,...) \
    struct X {  \
      enum Enum {__VA_ARGS__};  \
        static  \
        std::string to_string(X::Enum k) {  \
            std::vector<std::string> keys = split_to_vector(#__VA_ARGS__);  \
            return keys[static_cast<int>(k)];   \
        }   \
        static  \
        X::Enum which_one(const std::string s) {    \
            std::vector<std::string> keys = split_to_vector(#__VA_ARGS__);  \
            auto it = boost::find(keys, s); \
            if(it == keys.end()) {  \
                throw("not a valid key");   \
            }   \
            return static_cast<X::Enum>(it - keys.begin()); \
        }   \
    }

//
// Usage 
//

#include <iostream>

ENUM_TO_STRING(Color, Red, Green, Blue);

int main()
{
    std::string red_s = Color::to_string(Color::Red);
    std::cout << red_s << std::endl;

    Color::Enum red_e = Color::which_one("Red");
    std::cout << red_e << std::endl;

    // won't compile
    // std::string yellow_s = Colors::to_string(Colors::Yellow);

    // run-time error
    // Color::Enum yellow_e = Colors::which_one("Yellow");
} 
```

在 Coliru 上运行它：http: [//coliru.stacked-crooked.com/a/e81e1af0145df99a](http://coliru.stacked-crooked.com/a/e81e1af0145df99a)

# xcode - 为什么在 Xcode 中构建会覆盖我的 SQLite 数据库？

> ID：16045736
> 
> 赞同：1
> 
> 时间：2013-04-16T19:44:26.863
> 
> 标签：xcode, sqlite, ios-simulator, building

首先，我没有使用 Core Data，我只使用 SQLite。

我将数据保存在表中，然后通过打开应用程序并使用 SQLiteStudio 查看数据来查询它们。我什至创建了一个 LOG 来检查数据是否已保存，是的，它已保存。但是当我停止并再次运行模拟器进行咨询时，没有更多的数据！

Xcode 每次都会覆盖数据库吗？还是发生了超出我有限知识范围的其他事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T07:07:45.237

在不了解您的应用程序如何设置、如何配置应用程序以构建或它如何在相关 SQLite DB 文件上运行的更多信息的情况下，我只能提供一些您可以查看的内容的指针您的代码和构建配置可能是您的幻像删除的来源。当然，如果您有其他信息要提供，我很乐意编辑我的答案！

**案例 1：“创建数据库”总是在运行？**

可能会让您的应用程序出错的一件事是导致决定创建新的 SQLite DB 文件或查看/打开现有文件的决定。如果创建空数据库的代码始终在运行，那么每次您的应用启动时，您的旧数据库文件都会被空白数据库覆盖。

**案例 2：使用 'starter' 或 'template' 空数据库？**

有时开发人员可能会提供一个空白数据库，其中包含初始数据库模式（通用表和结构）以及一些默认或示例数据。如果您的应用程序这样做，那么导致决定应用该默认数据库的逻辑可能总是被意外触发？如果是这样，使用 NSUserDefaults 来记录指示数据库已成功创建的布尔值可能是跳过“加载我的入门数据库”代码的途径。或者，您可以检查您的数据库文件是否存在，或者查看特定表的内容是否与模板数据不同等。

**案例 3：“构建并运行”与“不构建运行”之间的不同行为**

在 Product > Perform Action 菜单中有一个不太为人所知的选项，标签为“Run without Building”，它实质上将使用您刚刚在模拟器或设备上运行的应用程序版本启动另一个调试会话。当您使用此选项时，您是否看到数据库有任何不同的行为，或者它仍然是空白的？

**案例 4：在 Xcode 调试会话之外直接在模拟器中运行时的不同行为？**

“运行”操作的一部分是构建阶段，即使您的应用自上次执行以来没有更改（正如您在问题中所建议的那样），它也可能触发“复制资源”阶段。如果您提供的是库存“默认”或“模板”数据库文件，并且您的应用程序只是在第一次执行应用程序期间打开和编辑该“模板”，那么 Xcode 可能会在随后的“运行”中将其替换为干净的副本' 发生“复制资源”的操作。测试此途径的一种方法：

1.  像往常一样使用 Xcode 构建并运行您的应用程序到模拟器。
2.  执行一些会导致在应用程序数据库中创建或编辑数据的操作。
3.  单击 Xcode 中的停止按钮以返回 Simulator 主屏幕。
4.  双击模拟器上的主页按钮（或者如果没有主页按钮，请按 CMD+SHIFT+H 两次以调出多任务栏并强制退出您的应用程序。
5.  检查并查看您的数据库文件中是否包含数据。
6.  如果没有数据，那么将您的更改保存到数据库中存在问题，我们需要首先解决该问题。否则：
7.  直接从 iOS 模拟器重新启动您的应用程序并执行不同的操作，这些操作会导致对数据库进行更多或不同的更改。
8.  单击主页按钮返回 iOS 主屏幕。
9.  如第 4 步中所做的那样强制退出您的产区。
10.  检查并查看您的数据库文件数据是否已更改（但仍有数据）或已空白。

最后，请确保您遵循 Apple 关于在何处存储用户数据的指导，如果您无意中将某些内容存储在不正确的文件路径中通常不会导致数据空白，则可能会禁止写入数据，这可能被解释为您的数据被覆盖，特别是如果您在它仍然驻留在内存进程中时对其进行询问。表 1-1 中有一些关于文件路径的非常有用的指导：（[http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUIide/FileSystemOverview/FileSystemOverview.html](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)）

**在 Mac 的硬盘上找到您的模拟器应用程序**

为了彻底（您可能已经知道这一点！），iOS Simulator 应用程序存储在您的 Mac 硬盘驱动器上，就像您机器上的其他文件一样。他们的组织模仿了物理 iOS 设备。要访问您的应用程序及其数据：

1.  打开一个新的 Finder 窗口。
2.  按 CMD+SHIFT+G 或从“前往”菜单中选择“前往文件夹”。
3.  将以下内容粘贴到“转到文件夹”框中，然后单击“转到”：~/Library/Application Support/iPhone Simulator/
4.  选择与您构建的模拟器的 iOS 版本匹配的文件夹。
5.  单击应用程序。
6.  然后，您将看到零个或多个文件夹，出现的每个文件夹都有一串由连字符分隔的数字。浏览此列表，直到找到包含您的应用程序的列表。然后，您可以浏览此文件夹中的数据，并将数据复制到某个位置，以供 Mac 上的其他工具检查。

# visual-studio - Visual Studio的实现添加连接

> ID：16045738
> 
> 赞同：0
> 
> 时间：2013-04-16T19:44:34.817
> 
> 标签：visual-studio, database-connection

我想创建连接到数据库表单（类似于 Visual Studio 2012 添加连接我找到此代码以查找连接的服务器

```
 private void FillServerComboBox()
    {
            DataTable ServersTable = new DataTable();
            SqlDataSourceEnumerator servers = SqlDataSourceEnumerator.Instance;
            ServersTable = servers.GetDataSources();

            object[] obj = new object[ServersTable.Rows.Count];
            for (int i = 0; i < ServersTable.Rows.Count; i++)
            {
                obj[i] = string.Format("{0}\\{1}", ServersTable.Rows[i]["ServerName"].ToString(), ServersTable.Rows[i]["InstanceName"].ToString());
            }
            serversComboBox.DataSource = obj;         
    } 
```

我找到“Master.dbo.sp_Databases”程序来列出远程服务器上的数据库。但我没有 MasterTable 的权限。“添加连接表单”如何在 Visual Studio 上工作？但它不起作用。请指导我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:20:28.983

我找到了答案

```
 SqlConnection _SqlConnection = new SqlConnection(ConnectionString);
        _SqlConnection.Open();
        DataTable dt1 =   _SqlConnection.GetSchema("Tables"); 
```

和

```
 SqlConnection _SqlConnection = new SqlConnection(ConnectionString);
        _SqlConnection.Open();
        DataTable dt1 =   _SqlConnection.GetSchema("DataBases"); 
```

# data-binding - 为什么从不调用 afterRender？

> ID：16045740
> 
> 赞同：6
> 
> 时间：2013-04-16T19:44:40.440
> 
> 标签：data-binding, knockout.js

查看以下示例 HTML。它是一个简单的 KO`foreach`绑定和一个用于将新项目添加到`observableArray`. 添加工作正常，新项目出现。但是，该`afterRender`方法永远不会被调用——不是在初始绑定之后，也不是在添加（和渲染）新项目之后。为什么？

**小提琴：http:** [//jsfiddle.net/CQNm6](http://jsfiddle.net/CQNm6)

**HTML**

```
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="utf-8" />
        <title></title>
        <script type="text/javascript" src="http://knockoutjs.com/downloads/knockout-2.2.1.js"></script>
    </head>
    <body>
        <div data-bind="foreach: data.things, afterRender: afterRenderTest">
            <h1 data-bind="text: name"></h1>
        </div>
        <a href="JavaScript:void(0);" onclick="data.things.push({ name: ko.observable('New Thing') });">Add New Thing</a>

        <script type="text/javascript">
            var Thing = (function ()
            {
                function Thing(p_name)
                {
                    this.name = ko.observable(p_name);
                }

                return Thing;
            })();
            var data =
            {
                things: ko.observableArray(
                [
                    new Thing("Thing One"),
                    new Thing("Thing Two"),
                    new Thing("Thing Three")
                ])
            };

            function afterRenderTest(elements)
            {
                alert("Rendered " + elements.length + " elements.");
            }

            ko.applyBindings();
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-16T20:00:16.057

你的语法是错误的，因为`foreach` 绑定要么接受一个数组，要么接受一个你指定附加事件、参数的对象。

从[文档中：](http://knockoutjs.com/documentation/foreach-binding.html)

> 传递您希望迭代的数组。绑定将为每个条目输出一段标记。
> 
> 或者，传递一个带有属性的 JavaScript 对象字面 量，该属性`data`是您希望迭代的数组。对象字面量也可能具有其他属性，例如`afterAdd`或`includeDestroyed`...

所以你需要写：

```
<div data-bind="foreach: { data: data.things, afterRender: afterRenderTest }">
    <h1 data-bind="text: name"></h1>
</div> 
```

演示[JSFiddle。](http://jsfiddle.net/uwJTu/)

# haskell - 在 Haskell 中通过网络传递函数

> ID：16045742
> 
> 赞同：8
> 
> 时间：2013-04-16T19:44:51.803
> 
> 标签：haskell

假设如下：

我有一个类型叫做`World`代表一些模拟状态。我也有这种类型的同义词：

```
type Update = World -> World 
```

Haskell 是否能够序列化 Update 类型以便它可以通过网络传递？或者有没有其他方法可以做到这一点？也许我不是在寻找代码逻辑的序列化，而是在另一端可以读取的某种指针或标识符。发送和接收进程都在运行同一个 Haskell 程序。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-16T20:05:30.827

[分布式进程](http://hackage.haskell.org/package/distributed-process)包正是您所描述的。由于每个程序已经具有相同的一组函数，因此指向该函数的指针从一个进程传递到另一个进程。有人提到该功能的序列化作为潜在的未来目标，但听起来可能需要对 GHC 进行更改。[github 页面](https://github.com/haskell-distributed)是了解存在哪些后端的好资源。[github-pages](http://haskell-distributed.github.io/)有一些例子看起来很不错，但直到刚才我才知道。

[围绕第 11 期](http://www.well-typed.com/blog/68)的一些 Haskell Parallel 摘要是我记得学习最多的地方。绝对需要一些时间来探索我知道我会[的 github 页面。](http://haskell-distributed.github.io/)

如果我没记错的话，在 hackage 包或 github 存储库中有一些简单的示例，用于探索工作窃取与工作共享和类似策略。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T20:10:28.660

我建议制作一个 DSL 数据结构。遗憾的是 Haskell 没有 lisp 的运行时编译功能，但应该足够了。

# facebook - Facebook Graph API - post comment as user

> ID：16045744
> 
> 赞同：2
> 
> 时间：2013-04-16T19:45:04.037
> 
> 标签：facebook, access-token, facebook-comments

I want to send comments to wall posts of a fanpage.

```
$facebook->api('/post_id/comments', 'POST', array('access_token' => $auth['access_token'], 'message' => 'my message')); 
```

This is working, but when posting with a user who is also admin of the fanpage the comment author ist always set to the fanpage. The access token is the one of the user. The documentation didn´t help. Did anyone this before? Thanks in advance!

# xml - 如何使用身份转换模式转换 XML 文件，但只能在特定子树上？

> ID：16045745
> 
> 赞同：1
> 
> 时间：2013-04-16T19:45:08.837
> 
> 标签：xml, xslt

我想使用身份转换转换一个 XML 文件，以及一堆其他模板来调整东西。但我只想将所有这些应用到特定的子树，而忽略 XML 文档的其余部分。我应该使用特定的模式来执行此操作吗？我的第一个猜测是使用模式，但如果可以的话，我宁愿避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:03:22.760

因此，如果我理解正确，您想在输入的子树上执行 XSLT（基于身份转换）并从结果中省略该子树之外的所有内容？如果是这样，你可以这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/">
    <xsl:apply-templates select="/path/to/subtree" />
  </xsl:template>

  <!-- Other templates -->
</xsl:stylesheet> 
```

# .net - Accessing a contentpicker field value in Orchard

> ID：16045750
> 
> 赞同：5
> 
> 时间：2013-04-16T19:45:18.680
> 
> 标签：.net, orchardcms

So I am using a Content Picker to display a list of selected items, and by default the out put looks like this:

> Testimonial: View, View

But I would like it to actually show the parts of the ContentItem. This is the code that loops through the items:

```
@using Orchard.ContentPicker.Fields
@using Orchard.Utility.Extensions;

@{
    var field = (ContentPickerField) Model.ContentField;
    string name = field.DisplayName;
    var contentItems = field.ContentItems;
}

<p class="content-picker-field content-picker-field-@name.HtmlClassify()">
    <span class="name">@name:</span>
    @if(contentItems.Any()) {
        foreach(var contentItem in contentItems) {
            <span class="value"> @Html.ItemDisplayLink(contentItem)</span>
            if(contentItem != contentItems.Last()) {
                <span>,</span>
            }
        }
    }
    else {
        <span class="value">@T("No content items.")</span>
    }
</p> 
```

I've tried several different ways of accessing the data but usually end up with warnings saying that it does not contain a reference, or that it can't convert it to a string.

I know that on the actual page for these items, they're in Model.ContentPart.Quote.Value

* * *

**Edit** I think the problem I am having is that I on the main page, I can't go to Models.Content.Quote or anything similar to access the data because its not listed on this page. The only data about each Quote thats listed is the ID.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-12T06:50:40.820

只需更改`var`为`dynamic`in `foreach`。

因此，您更改此：

```
foreach(var contentItem in contentItems) {
            <span class="value"> @Html.ItemDisplayLink(contentItem)</span>
            if(contentItem != contentItems.Last()) {
                <span>,</span>
            }
        } 
```

对此：

```
foreach(dynamic contentItem in contentItems) {
            <span class="value"> @Html.ItemDisplayLink(contentItem)</span>
            if(contentItem != contentItems.Last()) {
                <span>,</span>
            }
        } 
```

然后你可以`contentItem`像这样访问里面的任何部分：

```
contentItem.ZenGalleryPart.Path

foreach(dynamic contentItem in contentItems) {
            <span class="value"> @Html.ItemDisplayLink(contentItem)</span>
            <span class="value"> @T(contentItem.ZenGalleryPart.Path)</span>
            if(contentItem != contentItems.Last()) {
                <span>,</span>
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T01:15:36.817

在以下示例中，我有一个 ContentType**运动员**，它使用 ContentPickerField 来选择 ContentType **Team**

**在我为运动员**创建的摘要视图中，我可以使用以下代码访问使用 ContentPickerField 选择的**团队**中的所有部分和字段。

**内容运动员.Summary.cshtml**

```
@using Orchard.Utility.Extensions;
@using Orchard.ContentPicker.Fields
@{    
    var teamField = (ContentPickerField) Model.ContentItem.Athlete.Team;    
    //make sure your var is cast (dynamic) and you will have access to all parts/fields
    var team = (dynamic)teamField.ContentItems.First();  
}

@team.TeamPart.City.Value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-28T16:32:38.037

您基本上需要的是**将内容项**（在内容选择器中选择）**转换为形状**，以避免跳过重要的方面，如[形状交替](http://docs.orchardproject.net/en/latest/Documentation/Alternates/)。

幸运`BuildDisplay()`的是在视图中可用，所以你可以简单地写

```
foreach (var contentItem in contentItems)
{
  @Display(BuildDisplay(contentItem))
} 
```

而`BuildDisplay()`将为该形状创建一个形状`contentItem`并`Display()`渲染该形状。

如果您需要部分的特定输出，`contentItem`那么您应该创建一个适当的形状替代。

# mysql - Can't assign a local variable inside a stored procedure on MYSQL

> ID：16045751
> 
> 赞同：1
> 
> 时间：2013-04-16T19:45:29.057
> 
> 标签：mysql, stored-procedures, local-variables

```
 CREATE DEFINER=`root`@`localhost` PROCEDURE `add_item`(
       IN parentId BIGINT UNSIGNED, IN jobId BIGINT UNSIGNED,
       OUT id BIGINT UNSIGNED)
    BEGIN
       DECLARE newLeft INT UNSIGNED DEFAULT 0;

       SELECT `RGT` into newLeft from `headings` where `ID`=parentId LIMIT 1;

       /* ERROR TRAP */
       IF (newLeft=0) OR (newLeft=NULL) THEN SET newLeft=1;
       END IF; 
```

Problem is I can't select the result into the local variable newLeft, it always equals 1 (or 0 if I remove the error trap). Am I missing something? I have tried so many different approaches, even putting the "INTO newLeft" at the end of the SELECT statement.

Using MYSQL 5.4 on test machine which is Windows 7 using IIs

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:57:25.020

解决方案：

MYSQL 将在使用存储过程中的表中的字段之前使用局部变量或参数，如果它们名称相同，并且不区分大小写。注意*where `ID`=parentId*部分，它实际上是在询问 where 0=parentId（此时变量 id=0），因为 ID 是一个局部参数，也是表中的一个字段，但是局部变量具有精确性。

将 OUT 参数名称从*id*更改为*outid*解决了该问题。

我想我可以将选择更改为：

```
SELECT `RGT` into newLeft from `headings` where `headings`.`ID`=parentId LIMIT 1; 
```

我没有尝试这个，我只是更改了 OUT 参数名称。

# ember.js - Testing ember form submission with konacha

> ID：16045752
> 
> 赞同：2
> 
> 时间：2013-04-16T19:45:29.670
> 
> 标签：ember.js, integration-testing, ember-data, konacha

We're trying to test behavior of a form in our system using konacha and sinon. In the routes, form submission is handled with the following pattern:

```
save: (object) ->
  object.one "didCreate", @, ->
    @transitionTo "nextStep"

  object.one "becameInvalid", @, ->
    object.send("becameValid")

  object.one "becameError", @, ->
    @transitionTo "currentStep"

  object.get("transaction").commit() 
```

This works fine when a real user is interacting with a browser. If our server returns a validation error, the user remains on the same page and the validation errors are displayed correctly. When we try to test this functionality, the form POST never occurs and none of the object.one blocks are called.

We're testing with the following:

```
describe "When I enter invalid information", ->
  beforeEach (done) ->
    Em.run ->
      $('.button-success').click()
      done()

  it "should redirect to the current step", ->
    Em.run ->
      @router.get("url").should.equal "/currentStep"

  describe ".help-block", ->
    it "should display a validation error", ->
      Em.run ->
        $('.help-block').text().should.equal "is not a valid, can't be blank" 
```

When I run konacha:serve, I can see the form properly. Clicking on the submit button manually in the iFrame behaves differently than clicking on the submit button in a standalone browser window (in a standalone browser window, I can see the POST occur). My hunch is that this has to do with the POST occurring in the next run loop. If that's true, is there a way for a konacha test to span multiple run loop iterations? How would I advance to the next loop iteration manually?

# java - Invalid method declaration issue

> ID：16045753
> 
> 赞同：2
> 
> 时间：2013-04-16T19:45:31.767
> 
> 标签：java, syntax-error

Why am I getting an "invalid method declaration; return type required" error on **check(values);** ?

```
public class Swap
{
    int[] values = {5, 6, 7, 8, 9};
    check(values);

    public void swapAdjacentElemnts(int[] values)
    {
        for(int i=0; i<values.length - 1; i+=2)
        {
            int tempInt = values[i];
            values[i] = values[i+1];
            values[i+1]=tempInt;
        }
    }

    public int[] check(int[] values)
    {
        swapAdjacentElements(values);
        return values;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:48:54.473

您正在尝试在方法之外执行代码。您的调用必须`check`存在于某种方法中，而不是在类声明中。

如果您打算将其放在构造函数中，则可以这样做：

```
public Swap()
{
    check(values);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:01:12.600

您不能直接将方法调用放在类主体上。该调用应该在另一个方法中（就像你用 做的那样`swapAdjacentElements`）。

也许您的意思是在类的构造函数或 main 方法中进行检查。

```
public class Swap
{
    int[] values = {5, 6, 7, 8, 9};

    public Swap() { //class constructor
        check(values);
    }

    public static void main(String[] args) { //main method
        check(values);
    }

    //everything else..
} 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-14T16:38:19.093

在某些情况下，您应该在声明其他方法/函数之后执行一个函数。

# css - 使用 @font-face 会导致 Safari 中显示不同的字符

> ID：16045754
> 
> 赞同：0
> 
> 时间：2013-04-16T19:45:34.147
> 
> 标签：css, fonts, safari, font-face

我使用以下代码在我的网站上添加了字体：

```
@font-face {
    font-family: 'ChunkFive-Roman';
    src: url('/css/font/ChunkFive-Roman.eot') format('eot'), 
         url('/css/font/ChunkFive-Roman.otf')  format('opentype'),
         url('/css/font/ChunkFive-Roman.woff') format('woff'), 
         url('/css/font/ChunkFive-Roman.ttf')  format('truetype'),
         url('/css/font/ChunkFive-Roman.svg#ChunkFive-Roman') format('svg');
} 
```

这在除 Safari 之外的所有浏览器中的 XP 上都可以正常工作：

![在此处输入图像描述](https://i.stack.imgur.com/GIqds.png) ![在此处输入图像描述](https://i.stack.imgur.com/Pu8hH.png)

为什么会这样，更重要的是，我该如何解决这个问题？

这些字体可[在此处](http://file.camilstaps.nl)获得。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:57:59.030

找到一篇关于这个问题的文章：[WEBKIT (SAFARI 3.1) AND THE CSS @FONT-FACE DECLARATION](http://blog.elliottcable.name/posts/webkit_safari_3_1_and_the_css_font_face_declaration.xhtml)

@font-face 的 CSS 规范部分非常具体 - 字体将根据 @font-face 声明块本身中放置的大量标准来选择。可以在 @font-face 声明中定义各种文本 CSS 属性，然后在稍后在 CSS 中引用字体时检查它们。例如，如果我对 Diavlo 系列有两个 @font-face 声明 - 一个用于常规文本，一个用于较重的字体版本 - 然后我稍后在 font-family: 属性中使用 Diavlo，它应该参考在第一个 @font-face 中定义的基本 Diavlo 字体。但是，如果我要这样做，而且还要指定一个重字体粗细：，那么它应该使用较重的 Diavlo 版本。将此示例放入代码中：

```
@font-face {
  font-family: 'Diavlo';
  src: url(./Diavlo/Diavlo_Book.otf) format("opentype");
}

@font-face {
  font-family: 'Diavlo';
  font-weight: 900;
  src: url(./Diavlo/Diavlo_Black.otf) format("opentype");
}

h1, h2, h3, h4, h5, h6 {
  font-family: 'Diavlo';
  font-weight: 900;
}

div#content {
  font-family: 'Diavlo';
} 
```

如您所见，我的标题应该使用 Diavlo_Black.otf 中定义的字体，而我的正文内容应该使用 Diavlo_Book.otf。但是，在 WebKit 中，这不起作用 - 它完全忽略了 @font-face 声明中除 font-family: 和 src: 之外的任何属性！完全无视他们！不仅如此 - 不仅如此 - 它忽略了给定 font-family: 属性字符串的除最后一个 @font-face 之外的所有内容！

这里的含义是，为了使@font-face 像当前在 WebKit（以及因此，Safari 3.1）中实现的那样工作，我必须声明完全虚构的、不存在的类型族来单独满足 WebKit。这是我在当前实现@font-face 的地方使用的方法：

```
@font-face {
  font-family: 'Diavlo Book';
  src: url(./Diavlo/Diavlo_Book.otf) format("opentype");
}

@font-face {
  font-family: 'Diavlo Black';
  src: url(./Diavlo/Diavlo_Black.otf) format("opentype");
}

h1, h2, h3, h4, h5, h6 {
  font-family: 'Diavlo Black';
}

div#content {
  font-family: 'Diavlo Book';
} 
```

# json - 弹簧控制器 JSON

> ID：16045763
> 
> 赞同：2
> 
> 时间：2013-04-16T19:45:58.803
> 
> 标签：json, spring-mvc, controller

我有一个返回 JSON 的 Spring API，控制器方法使用构建 JSON 字符串`StringBuilder`并返回 JSON 字符串，可以在浏览器中将其视为原始 JSON。

有没有更好的方法在不使用 JSON 的情况下创建/返回结果`JacksonJsonView`？如果我只是将结果放入`HashMap<String, String>`并返回地图，那行得通吗？我试过但没有帮助。有什么好的方法吗，哪位大神可以推荐一下？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T21:25:26.317

Spring 3.0 引入了`@ResponseBody`在幕后将任意数据结构转换为 JSON 的注解，无需您参与。只要确保杰克逊在类路径上，你就可以走了。例如：

```
@RequestMapping(value="/getJson", method=RequestMethod.GET)
@ResponseBody
public Map<String, Object> getJson(@RequestParam String something) {
    Map<String, Object> output = new HashMap<String, Object>();
    output.put("date", new Date());
    output.put("input", something);
    return output;
} 
```

[spring.io 博客](http://spring.io/blog/2010/01/25/ajax-simplifications-in-spring-3-0/)文章中的更多信息。

# symfony - Doctrine query not returning the same result depending on the order of the join

> ID：16045765
> 
> 赞同：0
> 
> 时间：2013-04-16T19:46:05.940
> 
> 标签：symfony, doctrine, dql

I want to do one query, and I thought I could write it in the following two ways:

```
SELECT c, p
FROM MyBundle:Car c
    JOIN c.person p
WHERE
    p.name =  :name 
```

and

```
SELECT c, p
FROM MyBundle:Person p
    JOIN p.car c
WHERE
    p.name =  :name 
```

Since in both cases I was asking for "c, p" in that particular order, I was expecting the query to return the same thing, however, in the first case the object I get is of the type Car and on the second case is of type Person.

I don't understand why this happens, any light would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:49:37.197

第一个说：给我每辆车都附在一个人身上，其中人的名字是 :name。当然，这是一个汽车清单。

第二个说给我每个连接到汽车的人，其中人的名字是：name。当然，这是一份人员名单。

由于它们是连接的，因此学说热切将相关实体加载为主要选择的字段，这由 from 子句指示。

基本上，这是面向对象的视图，这就是 dql 的工作方式。您认为它们应该相同的论点是面向元组的视图，这就是 sql 的工作方式。掌握这一概念对于有效使用学说至关重要。

# perl - 如何在 Linux 中使用 perl 程序显示 IFconfig 信息

> ID：16045770
> 
> 赞同：0
> 
> 时间：2013-04-16T19:46:17.323
> 
> 标签：perl, module, perl-module, cpan, ifconfig

我有一个任务，我应该在 linux 中创建一个 perl 脚本，该脚本将提供类似于 linux 命令“ifconfig”的输出。我已经开始编写脚本，但我反复遇到错误。我需要一些帮助来更正我的代码，以便它可以完全运行。该程序需要做的特别是需要一个边界。例如，当我运行脚本时，它会询问接口名称，如果我输入“eth0”这将是接口名称，然后它应该输出就像我输入命令“ifconfig eth0”一样。作业要求我使用这两个包 Net::Int::Stats 和 Net::Ifconfig::Wrapper。我到目前为止的代码如下。我真的很感激任何帮助

```
 #!/usr/bin/perl
use strict;
use warnings;
use Net::Int::Stats;
use Net::Ifconfig::Wrapper;

my $int            = 'eth0';
my $stat           = 'rx_packets';
my $Iface          = $ARGV[0];
my $get_Iface_data = Net::Int::Stats->new();
my $Iface_Info     = Net::Ifconfig::Wrapper::Ifconfig('list', '', '', '');

my $rx_packets  = $get_Iface_data->value($Iface, 'rx_packets');
while( my ( $Addr, $Mask ) = each %{ $Info->{$int}{'inet'} } ) { 
    print "\tinet $Mask $Addr"; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:34:40.200

这是工作示例：

```
#!/usr/bin/perl
use strict;
use warnings;
use Net::Int::Stats;
use Net::Ifconfig::Wrapper;

my $Iface   = $ARGV[0];
my $get_Iface_data = Net::Int::Stats->new();
my $rx_packets  = $get_Iface_data->value($Iface, 'rx_packets');
my $Iface_Info = Net::Ifconfig::Wrapper::Ifconfig('list', '', '', '');
while( my ( $Addr, $Mask ) = each %{ $Iface_Info->{$Iface}{'inet'} } ) {
    print "\tinet $Mask $Addr\n";
} 
```

# hyperlink - Disqus API listPosts 不包含返回原始页面的链接

> ID：16045771
> 
> 赞同：1
> 
> 时间：2013-04-16T19:46:30.120
> 
> 标签：hyperlink, comments, disqus

我正在使用此 API [http://disqus.com/api/docs/forums/listPosts/](http://disqus.com/api/docs/forums/listPosts/)来获取最近评论的列表，但 API 的结果不包括我网站上内容页面的链接。我试过在 API 页面中找到它，但没有运气。只是好奇是否有人知道如何获取这些链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:43:51.123

在多玩了一下控制台之后，发现为了获取这些信息，我需要在 api 参数中传递“related=thread”。

# ios - 对于使用 RestKit v0.20.0 的键 Text，此类不符合键值编码

> ID：16045772
> 
> 赞同：1
> 
> 时间：2013-04-16T19:46:32.160
> 
> 标签：ios, objective-c, restkit-0.20

两天来，我一直试图找出为什么我在使用带有 Xcode 4.6.2 和 RestKit 0.20.0 的 iOS 6.1.3 时遇到错误：

**“...此类不符合键 Text 的键值编码。”**

奇怪的是，我可以很好地接收（GET）JSON 对象。当我创建示例 SignalMessage 对象然后尝试将其放回服务器时会发生错误。

JSON如下：

```
{"Text":"New Message","HasMessage":"true"} 
```

SignalMessage 对象如下所示：

```
#import <Foundation/Foundation.h>

@interface SignalMessage : NSObject {

}

@property (nonatomic, copy) NSString *signalText;
@property (nonatomic, retain) NSNumber *isHasMessage;

@end 
```

和这样的实现：

```
#import "SignalMessage.h"

@implementation SignalMessage

@synthesize isHasMessage, signalText;

@end 
```

我正常工作的 getMessage 函数如下所示：

```
- (IBAction)getMessage:(id)sender;
{
    NSLog(@"%@", @"Getting message... ");

    NSURL *url = [NSURL URLWithString:@"http://ec2-54-243-148-145.compute-1.amazonaws.com/TabletPractice/api/signal?clientIdentifier=2"];

    RKObjectManager *manager =  [RKObjectManager managerWithBaseURL:url];

    RKObjectMapping *responseMapping = [RKObjectMapping mappingForClass:[SignalMessage class]];
    [responseMapping addAttributeMappingsFromDictionary:@{@"Text":@"signalText", @"HasMessage": @"isHasMessage"}];
    RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:responseMapping pathPattern:nil keyPath:nil statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];

    [manager addResponseDescriptor:responseDescriptor];

    [manager getObject:nil path:@"" parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *result)
    {
        NSArray *theresults = [result array];
        for (SignalMessage *item in theresults) {
            self.txtMessage.text = item.signalText;
            [self hideControls];
        }
    }  failure:^(RKObjectRequestOperation * operation, NSError * error)
     {
         NSLog (@"Server WS call failure: operation: %@ \n\nerror: %@", operation, error);
     }];
} 
```

这是让我悲伤的 sendClicked 消息：

```
- (IBAction)btnSendClicked:(id)sender;
{
    if ([txtMessage.text length] < 1)
        return;

    NSURL *url = [NSURL URLWithString:@"http://ec2-54-243-148-145.compute-1.amazonaws.com/TabletPractice/api/signal?clientIdentifier=2"];
    RKObjectManager *manager =  [RKObjectManager managerWithBaseURL:url];
    RKObjectMapping *requestMapping = [RKObjectMapping requestMapping];
    [requestMapping addAttributeMappingsFromDictionary:@{@"Text":@"signalText", @"HasMessage": @"isHasMessage"}];
    RKRequestDescriptor *requestDescriptor = [RKRequestDescriptor requestDescriptorWithMapping:requestMapping
                                                                                   objectClass:[SignalMessage class]
                                                                                   rootKeyPath:@""];
    [manager addRequestDescriptor:requestDescriptor];

    SignalMessage *newMessage = [[SignalMessage alloc] init];
    newMessage.signalText = @"Test Message";
    BOOL isMsg = TRUE;
    NSNumber *boolAsNumber = [NSNumber numberWithBool:isMsg];
    newMessage.isHasMessage = boolAsNumber;

    [manager putObject:newMessage path:@"" parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *result) {
        NSLog(@"We object mapped the response with the following result: %@", result);
    }  failure:^(RKObjectRequestOperation * operation, NSError * error)
     {
         NSLog (@"Server WS call failure: operation: %@ \n\nerror: %@", operation, error);
     }];

    [self hideControls];
} 
```

在这一点上，我不知所措。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:00:37.173

请在您的 btnSendClicked 方法中向您的 RKRequestDescriptor 添加逆映射，如下所示：

```
RKRequestDescriptor *requestDescriptor = [RKRequestDescriptor      
  requestDescriptorWithMapping:[requestMapping inverseMapping]
                   objectClass:[SignalMessage class]
                   rootKeyPath:@""]; 
```

# quickbooks - 为 QuickBooks 在线开发和 QA 测试创建测试公司帐户

> ID：16045777
> 
> 赞同：4
> 
> 时间：2013-04-16T19:46:51.467
> 
> 标签：quickbooks, intuit-partner-platform, quickbooks-online, intuit

我需要为 QuickBooks Online 获得一些测试帐户（公司），以便我们可以完成开发和测试我们的应用程序。我们已联系 Intuit 以尝试获得这些，并被告知仅使用 30 天试用期。这些周期对于我们的开发周期来说太短了，所以我们购买了帐户来使用。这些帐户已被关闭/锁定，我们只是得到模糊的答案。我们很想知道为什么，这样我们就可以停止进行任何可能的有害活动，但是很遗憾，很难获得任何有关这方面的信息。我们的开发人员非常乐意与他们的工程师合作来实现这一目标。

有谁知道我们如何获得测试帐户以便我们可以测试我们的应用程序？

我希望答案和这个[StackOverflow Question](https://stackoverflow.com/questions/15937391/how-can-i-get-a-connection-ticket-to-quickbooks-online-for-dev-testing-a-one-off)不一样。在继续之前，我们需要测试帐户来成功测试我们的应用程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T21:50:13.247

您无法从 QuickBooks 获得真正的“测试”（例如非生产帐户）。他们不会让您访问该环境。

如果您是 IPP/Intuit Anywhere 开发人员，请向 Intuit 提交支持票证，并请求 QuickBooks Online 的 1 年开发实例。他们将向您发送优惠券代码，以进行一年的免费试用。

否则，你就是 SOL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-24T09:33:43.647

您可以获得 QuickBooks Online 的沙盒帐户。

1.  注册并登录[https://developer.intuit.com](https://developer.intuit.com)。

2.  在菜单中，导航到 API Docs & Tools > Sandbox ( [Link](https://developer.intuit.com/v2/ui#/sandbox) )

您最多可以创建 5 个不同的公司进行测试。

# javascript - 如何根据浏览器的尺寸自动沿div宽度调整div高度

> ID：16045779
> 
> 赞同：2
> 
> 时间：2013-04-16T19:47:01.280
> 
> 标签：javascript, jquery, css, responsive-design

我正在努力使网站具有响应性。我对所有的 div 都使用了自动高度。但是，对于特定的 div，我必须为浏览器的所有大小使用固定高度。但是，我不想在每个尺寸的设备/浏览器的媒体查询中手动放置高度，而是想自动/动态地进行。可能是 javascript/jQuery 可以做到。但是，我对 javascript/jQuery 了解不多。所以，我需要你的帮助。我的容器 div 的最大宽度：1280px；我有一个名为“#artwork”的子 div，其初始尺寸为：1065*695px。以 base 作为容器 div 的最大宽度和 #artwork div 的初始高度，我想为每次调整浏览器大小时为 #artwork 提供自动高度。

我不能给出“#artwork”高度：auto，因为在那个“#artwork”div 中有很多大图像。但是，通过javascript，只有一张图片正常显示，通过向下滚动，人们可以一张一张地看到下一张图片。如果我将 height: auto 或使用 minimum-height 设置为“#artwork”，则会显示所有图像。我已经通过媒体查询将“艺术品” div 高度手动放在不同类型的 css 文件中。但是，我想自动执行此操作，因此该比率非常适合每台设备上每种尺寸的浏览器。

以下是页面示例：
[已删除死链接]

```
#container {
   max-width: 1280px;
   margin: 0 auto;
   padding: 0;
   overflow: hidden;
   font-family: GandhiSansBold;
   position: relative;
}

#artwork {
   /*width: 1065px;*/
   width: 83.203%;
   height: 695px;
   margin: 0;
   float: left;
   overflow: hidden;
   margin-bottom: 10px;
} 
```

请确保，如果浏览器尺寸如此之大，#artwork 高度在任何情况下都不能通过自动调整大小跨越 height:695px。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:22:05.357

最好的方法是使用 CSS 和百分比值，但现在我们将使用 jQuery。

这是一个使用 jQuery 并处理**resize 事件**的示例：

```
(function() {
    var _viewport = $(window),
        _event = 'onorientationchange' in window ? 'orientationchange' : 'resize';

    //add a namespace to event
    _event += ".boxsize";

    //creates the event handler by namespace
    _viewport
        .off(_event)
        .on(_event, fnResizer);

    function fnResizer (e) {
        var gap = 40,
            winWidth = _viewport.width(),
            winHeight = _viewport.height(),
            //add your calculations
            boxWidth = winWidth - gap,
            boxHeight = winHeight - gap;
        //sets the new size of the boxes
        $('#artwork, #container').css({
            "width": boxWidth,
            "height": boxHeight
        });
    }
}()); 
```

HTML：

```
<div id="container">
    <div id="artwork"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:03:44.410

[http://f6design.com/journal/2011/10/18/responsive-elements-that-retain-their-aspect-ratio/](http://f6design.com/journal/2011/10/18/responsive-elements-that-retain-their-aspect-ratio/)

问题归结为在流体设计中保持纵横比。这条道路已经走过了很好的道路，并且存在许多漂亮的解决方案。我在上面列出一个。让我知道它是否也解决了嵌套 div 元素的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T20:12:59.197

您需要在调整大小时计算浏览器的新高度，然后将新高度设置为图像：

```
var TO = false;
var resizeEvent = 'onorientationchange' in window ? 'orientationchange' : 'resize';
$(window).bind(resizeEvent, function() {
  TO && clearTimeout(TO);
  TO = setTimeout(resizeImage, 200);
});
function resizeImage(){
  // browser resized, we count new width/height of browser after resizing
  var height = window.innerHeight || $(window).height();
  // var width = window.innerWidth || $(window).width();
  // you need to change here #artwork height
  var imgHeightInPercent = 30; // browser height is 100%
  var desiredHeight = (height * imgHeightInPercent) / 100;
  // finally we changed #artwork height
  $('#artwork').height(desiredHeight); 
} 
```

# mysql - 在单选按钮列表中显示为 system.Byte 的数据文本字段

> ID：16045781
> 
> 赞同：1
> 
> 时间：2013-04-16T19:47:07.547
> 
> 标签：mysql, vb.net, radiobuttonlist

我有一个单选按钮列表，我将它与两列的组合绑定为数据文本字段。但它显示为 system.Byte 用于数据文本字段。它在本地工作正常，但在托管它不工作。我我正在使用 Mysql driver3.51 和 vb.net

```
 query="SELECT CONCAT (`desc` ,'- ' , `price`)  AS     `title`,desc  FROM   `ping`"
            db.cmd.CommandText = query
            Dim da As New OdbcDataAdapter(query, db.conn)
            Dim ds As New DataSet
            da.Fill(ds)

            r.DataSource = ds
            r.DataTextField = "title"
            r.DataValueField = "desc"
            r.DataBind() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:07:42.820

实际上上面的查询没有任何问题。这都是关于导致问题的 mysql concat 函数。我提供了可以解决问题的链接。 [http://techclubdotnet.blogspot.in/](http://techclubdotnet.blogspot.in/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-13T16:51:24.193

```
query="SELECT CAST(CONCAT ('desc' ,'- ' , 'price') AS CHAR) AS 'title', desc  FROM 'ping'" 
```

# javascript - 如何判断每个用户访问每个页面的时间？

> ID：16045782
> 
> 赞同：2
> 
> 时间：2013-04-16T19:47:08.680
> 
> 标签：javascript, web-applications, web, google-analytics, google-analytics-api

有没有一种好方法可以判断给定用户在 Web 应用程序的给定页面上花费了多长时间，准确度约为一分钟？

我想到的一种解决方案是使用 Javascript 每分钟点击一次 Web 服务，并跟踪数据库中的点击量。但我想知道是否有更好的方法......有没有办法通过谷歌分析来完成这个？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T20:03:02.510

首先，我同意有关分析软件的评论，您绝对应该研究它们以了解这种性质的事情。

我不知道这会有多好，我绝对不相信这是最好的方法，但如果你死心塌地做这个客户端，你也许可以尝试类似的方法：

```
var start = new Date().getTime();

window.onbeforeunload = function(){
    var end = new Date().getTime();
    alert( parseInt(end - start, 10)/60000 + " minutes" );
}; 
```

这里的想法是在用户访问您的页面后保存当前时间。一旦他们离开，[onbeforeunload](https://developer.mozilla.org/en-US/docs/DOM/window.onunload)事件应该触发并运行函数来计算他们在页面上花费的时间。我想你可以在~~ajax 调用（或其他东西）~~中添加一个**同步调用**来节省某处的总时间。

[**例子**](http://jsfiddle.net/2a2fK/3/)

*注意*：jsfiddle 将阻止这些事件，但您仍然可以通过打开控制台在错误日志中看到输出。打开控制台后，只需点击`Run`即可触发事件。

**编辑**：

请参阅下面@Ian 关于在`onbeforeunload`事件中使用 AJAX 请求的评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-31T20:45:07.293

对于那些感兴趣的人，我在一个小型 JavaScript 库和服务中做了一些工作，以计算用户与网页交互的时间。它实际上完全符合 Chase 在他/她的回答中所描述的！然而，它还有一个额外的好处，那就是更准确（虽然不是很完美）跟踪用户实际与页面交互的时间。它忽略用户切换到不同选项卡、空闲、最小化浏览器等的时间。

编辑：我已经更新了示例以包含当前的 API 使用情况。

[http://timemejs.com](http://timemejs.com)

其用法示例：

**在您的页面中包含：**

```
<script src="http://timemejs.com/timeme.min.js"></script>
<script type="text/javascript">
TimeMe.initialize({
    currentPageName: "home-page", // page name
    idleTimeoutInSeconds: 15 // time before user considered idle
});
</script> 
```

**如果您想自己向后端报告时间：**

```
window.onbeforeunload = function(){
    xmlhttp=new XMLHttpRequest();
    xmlhttp.open("POST","ENTER_URL_HERE", false);
    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    var timeSpentOnPage = TimeMe.getTimeOnCurrentPageInSeconds();
    xmlhttp.send(timeSpentOnPage);
}); 
```

TimeMe.js 还支持通过 websockets 发送计时数据，因此您不必尝试将完整的同步 http 请求强制到`document.onbeforeunload`事件中。

# css - 为每个菜单放置背景图片

> ID：16045783
> 
> 赞同：0
> 
> 时间：2013-04-16T19:47:11.813
> 
> 标签：css

我正在尝试为我用作主导航的每个六边形菜单放置背景图像。但我不知道如何实现将背景图像带入六角形菜单的代码。下面你可以看到 CSS 和 HTML 代码。

***CSS***

```
 ul.hex {padding:0; margin: 50px auto; list-style: none; width:104px; height:60px;       position:relative;} 

    ul.hex li a {display:block; width:104px; height:60px; position:absolute; left:0; top:0;    z-index:100; text-align:center; text-decoration:none; font:normal 18px/60px "Arial"; color: #fff;
    outline: 0;
}

    ul.hex li a:before {display: block; content:""; width:104px; height:60px; position:absolute;    left:0; top:0; z-index:-1;
-webkit-transform: rotate(60deg);
-moz-transform: rotate(60deg);
-ms-transform: rotate(60deg);
-o-transform: rotate(60deg);
transform: rotate(60deg);
}

ul.hex li a:after {display:block; content:""; width:104px; height:60px; position:absolute; left:0; top:0; z-index:-1;
-webkit-transform: rotate(-60deg);
-moz-transform: rotate(-60deg);
-ms-transform: rotate(-60deg);
-o-transform: rotate(-60deg);
transform: rotate(-60deg);
}

ul.hex li:nth-child(1) a,
ul.hex li:nth-child(1) a:before,
ul.hex li:nth-child(1) a:after {background:#cb3927;
}

ul.hex li:nth-child(1) a:hover,
ul.hex li:nth-child(1) a:hover:before,
ul.hex li:nth-child(1) a:hover:after {background-color:#cb3927; color:#fff;
}

ul.hex li:not(:first-child) a,
ul.hex li:not(:first-child) a:before,
ul.hex li:not(:first-child) a:after {background-color:#fff; color:#8d0f26;
}

ul.hex li:not(:first-child) a:hover,
ul.hex li:not(:first-child) a:hover:before,
ul.hex li:not(:first-child) a:hover:after {background-color:#8d0f26; color:#f36e33 ;
}

ul.hex li {width:104px; height:60px; position:absolute; left:106px; top:0;
-webkit-transform-origin: -54px 30px;
-moz-transform-origin: -54px 30px;
-ms-transform-origin: -54px 30px;
-o-transform-origin: -54px 30px;
transform-origin: -54px 30px;
}

ul.hex li:nth-child(1) {left:0;}

ul.hex li:nth-child(3) {
-webkit-transform: rotate(60deg);
-moz-transform: rotate(60deg);
-ms-transform: rotate(60deg);
-o-transform: rotate(60deg);
transform: rotate(60deg);
}

ul.hex li:nth-child(3) a {
-webkit-transform: rotate(-60deg);
-moz-transform: rotate(-60deg);
-ms-transform: rotate(-60deg);
-o-transform: rotate(-60deg);
transform: rotate(-60deg);
}

ul.hex li:nth-child(4) {
-webkit-transform: rotate(120deg);
-moz-transform: rotate(120deg);
-ms-transform: rotate(120deg);
-o-transform: rotate(120deg);
transform: rotate(120deg);
}

ul.hex li:nth-child(4) a {
-webkit-transform: rotate(-120deg);
-moz-transform: rotate(-120deg);
-ms-transform: rotate(-120deg);
-o-transform: rotate(-120deg);
transform: rotate(-120deg);
}

ul.hex li:nth-child(5) {
-webkit-transform: rotate(180deg);
-moz-transform: rotate(180deg);
-ms-transform: rotate(180deg);
-o-transform: rotate(180deg);
transform: rotate(180deg);
}

ul.hex li:nth-child(5) a {
-webkit-transform: rotate(-180deg);
-moz-transform: rotate(-180deg);
-ms-transform: rotate(-180deg);
-o-transform: rotate(-180deg);
transform: rotate(-180deg);
}` 
```

***这里的HTML*** 是我用于导航的链接的无序列表

```
<div id="hexagon">
<ul class="hex">
    <li><a href="">HOME</a></li>
    <li><a href="">ABOUT</a></li>
    <li><a href="">BLOG</a></li>
    <li><a href="">WORK</a></li>
    <li><a href="">CONTACT</a></li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:40:11.347

我认为[**这个**](https://stackoverflow.com/questions/7433454/html-css-hexagon-with-image-inside)先前回答的问题可以派上用场。
他基本上是以稍微不同的方式构建 exagon，实施起来并不难。

# c# - 使用复选框添加 JumpList 自定义类别

> ID：16045786
> 
> 赞同：0
> 
> 时间：2013-04-16T19:47:21.533
> 
> 标签：c#, wpf, checkbox, jump-list

基本上，我想将 JumpTask 添加到 Jump List 上下文菜单中，以允许用户切换 TopMost 属性。

本质上，我只想要一个带有复选框的条目来打开和关闭 TopMost 属性。

我该怎么做呢？如果 Jump Task 可以只是 CheckBox 和 TextBlock 的堆栈面板，那就太好了，然后我可以直接绑定到它们。但是，跳转任务的属性非常有限，我想知道是否有人想出一个好习惯，让复选框+文本显示在跳转列表中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:31:06.737

用这个作为答案解决了这个问题： [使 WPF 系统上下文菜单项可切换](https://stackoverflow.com/questions/4144154/making-a-wpf-system-context-menu-item-toggleable)

考虑到我运行的应用程序是在 XP 中，这对我来说是完美的。如果我在 Vista 或 Windows 7 上运行，我在我的应用程序中添加了一个主上下文菜单，用户可以在其中更改 TopMost 属性。

# php - 是否可以将数据库元素添加到谷歌任务？

> ID：16045788
> 
> 赞同：0
> 
> 时间：2013-04-16T19:47:33.773
> 
> 标签：php, javascript

我有一个用户有某些任务的网站。这些任务可以通过单击图像来删除：

```
<img class="delete" id="<?php echo $tasks[$c][0]; ?>" title="delete" onclick="Delete(this)" /> 
```

用户是否可以以相同的方式将某个此任务添加到他们的 Google 任务中？我猜在按钮点击用户被重定向到谷歌任务，授权等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:52:31.890

查看[https://developers.google.com/google-apps/tasks/firstapp](https://developers.google.com/google-apps/tasks/firstapp)了解一些信息。

然后，在您尝试使其工作（并希望成功）之后，如果您遇到困难，请发布另一个问题，详细说明您尝试过的内容以及无效的内容。

# mysql - 从多列中获取不同的最大值

> ID：16045789
> 
> 赞同：1
> 
> 时间：2013-04-16T19:47:35.367
> 
> 标签：mysql, aggregate-functions, max, greatest-n-per-group

我正在研究一个体育数据库，我想编写一个查询来返回某些类别的名称和统计值。例如，目标领先者、助攻领先者、得分领先者、+/- 领先者、罚时领先者等。我正在使用一个名为 NJDSkaters 的表格，其中包含来自特定球队的球员姓名和统计数据。下面是查询代码：

```
SELECT CONCAT(PlayerName,' - ',Goals) AS GoalLeader, CONCAT(PlayerName,' - ',Assists)
    CONCAT(PlayerName,' - ',Points) AS PointsLeader
FROM NJDSkaters
WHERE Goals = (SELECT DISTINCT MAX(Goals) FROM NJDSkaters)
    OR Assists = (SELECT DISTINCT MAX(Assists) FROM NJDSkaters)
    OR Points = (SELECT DISTINCT MAX(Points) FROM NJDSkaters); 
```

这是我的滑冰者注册表中的一个片段，它将显示此查询应返回的球员：

![http://imgur.com/T8gi368](https://i.stack.imgur.com/3Jkv4.png)

如您所见，我想要的返回查询应该返回“Ilya Kovalchuk - 37”作为 GoalLeader，“Patrik Elias - 52”作为 AssistLeader，“Ilya Kovalchuk - 83”作为 PointsLeader。运行查询确实提供了这些结果，但包含我不想要的额外信息，如您在此处看到的：

![http://imgur.com/UUxM2yA](https://i.stack.imgur.com/HpBnn.png)

我的问题是，我如何摆脱多余的信息？我只想要每个类别的领导者，我不想看到排名第二的球员，即使该球员在其他类别中排名第一。本质上，我要说的是，我只想要这张表中的 1 行。以前，我的代码会返回所有玩家，其中领导者位于顶部，所以这段代码离我想要的结果更近了一步，但现在我被卡住了。寻找这个问题的答案一直具有挑战性，因为通常很难找到提出问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:19:52.293

你需要 PIVOT 你的数据，我会使用这样的东西：

```
SELECT
  MAX(CASE WHEN NJDSkaters.Goals=mx.goals
       THEN CONCAT(PlayerName,' - ', NJDSkaters.Goals) END) GoalLeader,
  MAX(CASE WHEN NJDSkaters.Assists=mx.assists
       THEN CONCAT(PlayerName,' - ', NJDSkaters.Assists) END) AssistsLeader,
  MAX(CASE WHEN NJDSkaters.Points=mx.points
       THEN CONCAT(PlayerName,' - ', NJDSkaters.Points) END) PointsLeader
FROM
  NJDSkaters INNER JOIN (
    SELECT MAX(Goals) goals, MAX(Assists) assists, MAX(Points) points
    FROM NJDSkaters) mx
  ON NJDSkaters.Goals=mx.goals
     OR NJDSkaters.Assists=mx.assists
     OR NJDSkaters.Points=mx.points 
```

请[在此处](http://sqlfiddle.com/#!2/f37c1/1)查看小提琴。如果多个玩家共享相同的最大值，您可能还想使用 GROUP_CONCAT 而不是 MAX：

```
SELECT
  CONCAT(GROUP_CONCAT(CASE WHEN  NJDSkaters.Goals=mx.goals
       THEN PlayerName END), ' - ', mx.goals) GoalLeader,
  CONCAT(GROUP_CONCAT(CASE WHEN NJDSkaters.Assists=mx.assists
       THEN PlayerName END), ' - ', mx.assists) AssistsLeader,
  CONCAT(GROUP_CONCAT(CASE WHEN NJDSkaters.Points=mx.points
       THEN PlayerName END), ' - ', mx.points) PointsLeader
FROM
  NJDSkaters INNER JOIN (
    SELECT MAX(Goals) goals, MAX(Assists) assists, MAX(Points) points
    FROM NJDSkaters) mx
  ON NJDSkaters.Goals=mx.goals
     OR NJDSkaters.Assists=mx.assists
     OR NJDSkaters.Points=mx.points 
```

一点解释：

*   子查询`mx`将返回最大进球数、最大助攻数和最大得分
*   我将`NJDSkaters`使用此子查询加入表以返回具有最大进球数或最大助攻数或最大积分的所有行
*   `CASE WHEN NJDSkaters.Goals=mx.goals THEN PlayerName END`如果该玩家的进球数达到最大值，则返回`PlayerName`该值，否则返回 NULL。助攻和得分也是如此。
*   使用 GROUP_CONCAT 我将 CASE WHEN 返回的所有玩家姓名连接起来。GROUP_CONCAT 将跳过 NULL 值，并且只会连接其类别具有最大值的玩家
*   使用 CONCAT 我将上面 GROUP_CONCAT 返回的字符串与每个类别的最大值连接起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:14:51.917

为什么不使用 LIMIT 1 来限制结果呢？

# coldfusion - Crystal Report 2011 报表/SQL Server 2008/ASPX 问题

> ID：16045790
> 
> 赞同：0
> 
> 时间：2013-04-16T19:47:46.250
> 
> 标签：coldfusion, crystal-reports, coldfusion-10

我有一个使用 ColdFusion 10 配置的网络服务器。在我在 ColdFusion 中构建的应用程序中，我想部署一个需要用户输入参数的 Crystal Report。我在 Crystal Reports 2011 中构建了报表。该报表在 Designer 中工作。

然后，我使用 Recrystallize 生成报表附带的 ASPX、ASPX.VB 和 Web.config 页面。

我不得不调整 IIS 设置以适应 ColdFusion 需要启用 32 位应用程序和 Crystal Reports 组件需要禁用 32 位应用程序的事实，方法是将 Crystal Report 和页面放在它们自己的文件夹中，将它们转换为应用程序和将该应用程序设置为与 ColdFusion 应用程序不同的应用程序池。

报表查看器最初打开时会提示输入报表所基于的参数。当您输入参数并单击确定时，报告将出错并显示以下对话框：无法打开连接。无法打开连接。[带有报告名称]。

我不知道从哪里开始解决这个问题。

您可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:23:38.340

这是aspx文件.....

```
 <asp:UpdatePanel ID="updpnlReport" runat="server">
        <ContentTemplate>
            <CR:CrystalReportViewer ID="crvAccountReportParameter" runat="server"             
                oninit="crvAccountReportParameter_Init" 
                EnableParameterPrompt="False" HasToggleParameterPanelButton = "false" HasCrystalLogo ="False"/>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

这是 .cs 文件…………

```
 protected void btnSubmit_Click(object sender, EventArgs e)
    {
        LoadData();

    }
    protected void LoadData()
    {

        string pstrType;
        pstrType = Request.QueryString["Type"];

        string strCompanyName = objSession.SelCompanyName;
        string strBranchName = objSession.SelBranchName;

        string strHeading = "";       
        DataSet dsData = null;

        dsData = objAccountReportBAL.getAccountRegister(Convert.ToInt16(objSession.FyId), int.MinValue, long.MinValue, Convert.ToDateTime(RadDtpFromDate.SelectedDate), Convert.ToDateTime(RadDtpToDate.SelectedDate), pstrType);
        dsData.Tables[0].TableName = "Account_Trn_v";

        if (pstrType == "JV")
        {
            strHeading = "Journal Voucher Register Report";
            rptDoc.Load(Server.MapPath("~/ReportCrystal/Account/Detail/GeneralVoucharRegister.rpt"));
        }

        rptDoc.SetDataSource(dsData.Tables[0]);

        rptDoc.SetParameterValue("@CompanyName", objSession.SelCompanyName);
        rptDoc.SetParameterValue("@BranchName", objSession.SelBranchName);
        rptDoc.SetParameterValue("@Heading", strHeading);
        rptDoc.SetParameterValue("@Stdate", RadDtpFromDate.SelectedDate);
        rptDoc.SetParameterValue("@EnDate", RadDtpToDate.SelectedDate);

        crvAccountReportParameter.ReportSource = rptDoc;         
        crvAccountReportParameter.DataBind();      

    } 
```

# erlang - Erlang基础列表理解

> ID：16045791
> 
> 赞同：0
> 
> 时间：2013-04-16T19:47:49.697
> 
> 标签：erlang

我正在尝试学习 Erlang 的基础知识，并且很难编译以下简单的列表理解示例：

```
-module(functions).
-export([add/2], [add1_comp/1]).

add(A,B) -> A+B.

add1_comp(LST) -> [X + 1 || X <- LST]. 
```

我收到以下错误/警告：

```
Bad export declaration on line 2
Function add/2 is unused line 4
Function add1_comp/1 is unused line 6 
```

我已经调试了一段时间，想知道是否有人可以帮助我确定此错误的原因？

提前谢谢了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T19:56:41.827

这些函数需要作为单个参数导出到列表中。

```
-export([add/2, add1_comp/1]). 
```

# r - 按元素向量对数据帧进行子集化

> ID：16045793
> 
> 赞同：1
> 
> 时间：2013-04-16T19:48:08.110
> 
> 标签：r, subset

我花了大约 20 分钟浏览以前的问题，但找不到我要找的东西。我有一个大数据框，我想根据名称列表对其进行子集化，但是数据框中的名称也可以有列表中未指明的后缀。

换句话说，是否有一种更简单的通用方法（对于无限数量的后缀）来执行以下操作：

```
data <- data.frame("name"=c("name1","name1_post1","name2","name2_post1",
                            "name2_post2","name3","name4"),
                   "data"=rnorm(7,0,1),
                   stringsAsFactors=FALSE)

names <- c("name2","name3")

subset <- data[ data$name %in% names | data$name %in% paste0(names,"_post1") | data$name %in% paste0(names,"_post2") , ] 
```

回应@Arun的回答。我的数据中的名称实际上包含多个下划线，使问题更加复杂。

```
data <- data.frame("name"=c("name1_target_time","name1_target_time_post1","name2_target_time","name2_target_time_post1",
                            "name2_target_time_post2","name3_target_time","name4_target_time"),
                   "data"=rnorm(7,0,1),
                   stringsAsFactors=FALSE)

names <- c("name2_target_time","name3_target_time")

subset <- data[ data$name %in% names | data$name %in% paste0(names,"_post1") | data$name %in% paste0(names,"_post2") , ] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:52:51.257

**编辑：**使用正则表达式的解决方案（遵循 OP 在评论中的跟进）：

```
data[grepl(paste(names, collapse="|"), data$name), ]
#          name       data
# 3       name2  1.4934931
# 4 name2_post1 -1.6070809
# 5 name2_post2 -0.4157518
# 6       name3  0.4220084 
```

在您的新数据上：

```
#                      name      data
# 3       name2_target_time 0.6295361
# 4 name2_target_time_post1 0.8951720
# 5 name2_target_time_post2 0.6602126
# 6       name3_target_time 2.2734835 
```

此外，正如@flodel 在评论下显示的那样，这也可以正常工作！

```
subset(data, sub("_post\\d+$", "", name) %in% names) 
```

* * *

**旧解决方案：**

```
data[sapply(strsplit(data$name, "_"), "[[", 1) %in% names, ]

#          name       data
# 3       name2  1.4934931
# 4 name2_post1 -1.6070809
# 5 name2_post2 -0.4157518
# 6       name3  0.4220084 
```

想法：首先使用`split`字符串。这会产生一个列表。例如：将导致（列表的第一个元素）。但会导致和（列表的第二个元素）。通过包装它并使用with ，我们可以只选择这个结果列表的“第一个”元素。然后我们可以使用它来检查它们是否存在（这很简单）。`_``strsplit``name2``name2``name2_post1``name2``post1``sapply``[[``1``%in%``names`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:08:09.617

grep 解决方案可能如下所示：

```
subset <- data[grep("(name2)|(name3)",names(data)),] 
```

# date - 无论您做什么，debian挤压都无法使用本地时区

> ID：16045794
> 
> 赞同：0
> 
> 时间：2013-04-16T19:48:09.210
> 
> 标签：date, timezone, debian

我需要使用 CLI 查看任意时区的时间。但是，Debian 不响应推荐的解决方案。

首先，我设置了本地时区。

```
dpkg-reconfigure tzdata 
```

然后，我设置了系统时间。

```
ntpdate pool.ntp.org 
```

我更新了硬件时钟以反映系统时间。

```
hwclock --systohc --utc 
```

现在，我关注这篇文章： [http ://www.linuxquestions.org/questions/programming-9/display-different-timezones-in-command-line-927660/](http://www.linuxquestions.org/questions/programming-9/display-different-timezones-in-command-line-927660/)

这表示我可以使用如下命令完成我的任务： `TZ=UTC date && TZ=CDT date && TZ=IST date`

但是，这是我得到的输出：

```
dpkg-reconfigure tzdata && ntpdate pool.ntp.org && hwclock --systohc --utc && TZ=UTC date && TZ=CDT date && TZ=IST date

Current default time zone: 'America/Chicago'
Local time is now:      Tue Apr 16 14:45:29 CDT 2013.
Universal Time is now:  Tue Apr 16 19:45:29 UTC 2013.

16 Apr 19:45:38 ntpdate[12036]: adjust time server 199.102.46.73 offset -0.036668 sec
Tue Apr 16 19:45:39 UTC 2013
Tue Apr 16 19:45:39 CDT 2013
Tue Apr 16 19:45:39 IST 2013 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:28:17.177

`CDT`并且`IST`不是有效的时区名称，因此如果您尝试将它们用作您的时区，`date`则默认显示时间。`UTC`

我不确定您实际上打算使用哪些时区，但请尝试其中的几个。它们是有效的时区名称。

```
TZ=Asia/Shanghai date
TZ=America/Vancouver date
TZ=Europe/London date 
```

# python - Python排序消耗大量内存？（来自发电机组）

> ID：16045796
> 
> 赞同：0
> 
> 时间：2013-04-16T19:48:12.060
> 
> 标签：python, performance, sorting, memory, tuples

我基本上是在寻找可能对此有意见的其他人的一些反馈。以下内容不完全是我正在处理的内容，但示例代码确实重现了该问题。

我有一个幂集生成器，如果我发送的基本列表传入，它会返回所有排列。我需要对生成的集合进行排序（在我的真实情况下，返回的集合是具有我想要排序的值的元组，下面的示例演示了没有它的问题）

问题是当我在电源组生成器上使用 sorted() 时，它会增加内存使用量。我意识到 2^50 是一个非常大的数字，但是没有排序的内存使用量是相当平坦的，所以我想知道是否有更好的方法可以在一两分钟内对大量集合进行排序而不会耗尽内存。这是在带有 Python 2.6.5 的 Ubuntu 上运行的。（在这种情况下也需要）

```
def gen_powerset(seq):
    if len(seq) <= 1:
        yield seq
        yield []
    else:
        for i in gen_powerset(seq[1:]):
            yield [seq[0]]+i
            yield i

def main():
    initialSet = range(50)
    powerset = sorted(gen_powerset(initialSet))
    for i in powerset:
        print i

if __name__ == "__main__":
    main() 
```

**免责声明：**如果您尝试运行此示例，请注意您的内存使用情况。如果样本接近 90%，请按 Ctrl-C，因为您的操作系统将开始将内存交换到磁盘。如果样本仍在运行，您的磁盘负载将飙升并真正减慢速度，从而很难首先杀死样本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T19:50:20.393

如果没有`sorted`，您永远不需要一次存储超过 1 或 2 个值——它们会根据需要进行计算，因为您使用的是生成器 ( `yield`)。不幸的是，在不了解整个列表的情况下，没有好的方法可以对列表进行排序（除非您查看了*所有*项目以确保您拥有的项目是最小的，否则您无法从排序中产生一个值）。

当然，如果你有 2 个排序的子列表，你可以懒惰地合并它们，这样你*就可以*构建一个排序，它不会基于合并排序将所有内容一次存储在内存中，但在一般情况下它会非常低效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T19:50:31.640

内存使用率较高的原因`sorted`是它必须一次将所有项目加载到内存中。由于您编写了一个生成器，它一次只产生一个元素，并且您使用它的方式一次只使用一个值，因此 Python 不需要同时保留所有项目。但是如果没有所有这些，您就无法对它们进行排序。

只要您进行排序，您就无法解决这个问题，因为排序必须使所有元素都可用。

解决此问题的唯一方法是重写您的 powerset 生成器以按您想要的顺序生成项目。这可能会也可能不会，具体取决于您想要的订单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T19:50:56.787

您使用的生成器在消耗之前一次只创建一个值，这非常节省内存。该`sorted`函数需要将其转换为列表，以便它一次全部驻留在内存中。没有办法解决它。

# android - 包 X 需要不可用的共享库 com.android.future.usb.accessory

> ID：16045797
> 
> 赞同：5
> 
> 时间：2013-04-16T19:48:14.303
> 
> 标签：android, android-emulator, usb, arduino

出于某种原因，我收到错误消息`Package X requires unavailable shared library com.android.future.usb.accessory`。

此库包含在 Project Explorer 中的项目文件夹下。[项目文件夹] -> Google APIs [Android 2.3.3] -> usb.jar -> com.android.future.usb -> UsbAccessory.class, UsbManager.class。

我正在使用 Google API 2.3.3 (API 10)。我需要它，因为我将它连接到 Arduino USB Host Shield。到目前为止，我一直在手机上进行调试，但现在我需要日志和调试信息，因为我的程序由于某种原因没有发送数据，我不知道为什么。当我将程序连接到我的计算机（而不是使用 AVD）时，该程序至少会加载并执行某些操作。使用模拟器，什么都没有加载。

我正在使用带有 Android 4.2.2 (API 17) 的 Android 虚拟设备。

我的清单包括以下内容：

```
 <application android:icon="@drawable/ic_launcher" android:label="@string/app_name">
      <uses library android:name="com.android.future.usb.accessory"></uses-library>
      <activity android:name="ArduinoActivity" android:label="@string/app_name" android:launchMode="singleTask">
      <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
      </intent-filter>
      <intent-filter>
        <action android:name="android.hardware.usb.action.USB_ACCESSORY_ATTACHED" />
      </intent-filter>
      <meta-data android:name="android.hardware.usb.action.USB_ACCESSORY_ATTACHED" android:resource="@xml/accessory_filter" />
      </activity>
    </application> 
```

**更新：**我已将我的 API 更改为 Android 3.1 (API 12)。我已将库更改为 android.hardware.usb.accessory（而不是 com.android.future.usb.accessory）。出于某种原因，我仍然从 PackageManager 收到错误（这次是新库）。我注意到它正在从清单中提取该库名称。有什么想法吗？仍然有同样的问题！

**更新解决方案：**我忘记更改`<uses-library />`为`<uses-feature />`. 有关适用于 USB 和 USB 配件的 Android 与 Google API 的更多文档：http: [//developer.android.com/guide/topics/connectivity/usb/accessory.html](http://developer.android.com/guide/topics/connectivity/usb/accessory.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:52:17.173

USB 附件模式不适用于 API 2.3.3，仅适用于 2.3.4 及更高版本。[在这里阅读。](http://developer.android.com/guide/topics/connectivity/usb/accessory.html#choosing)

# c# - 省略特定属性

> ID：16045811
> 
> 赞同：0
> 
> 时间：2013-04-16T19:48:55.507
> 
> 标签：c#, visual-studio, documentation

在 Visual Studio 中，有没有办法装饰特定属性以将它们从 C# 项目生成的默认 xml 文档中排除？

举个例子：

```
/// <summary>
/// This enables the external interface
/// </summary>
public string EnableExternalInferface { get; set; }

/// <summary>
/// This should not be publicly visible
/// </summary>
public bool SecretFeatureSwitch { get; set; } 
```

理想的方法是用一些属性来装饰它。

经过额外的研究，我发现了以下问题，[Hiding Classes/Methods From XML Documentation](https://stackoverflow.com/q/8772654/299327)。如果这在过去的一年中有所进展，那就太好了，但我不抱希望。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:26:37.523

假设你有一个属性说

```
public string val { get; set; } 
```

启用 XML 文档后，您应该会看到以下警告

“*缺少公开可见类型或成员的 XML 注释*”

右键单击错误列表中的警告并选择显示错误帮助。它显示了一个网页，其中包含有关“编译器警告（级别 4）CS **1591** ”的信息

使用上面获得的警告编号以及 C# Preprocessor Directive [#pragma 警告](http://msdn.microsoft.com/en-us/library/441722ys%28VS.80%29.aspx)您要从文档中省略的属性，如下所示。

```
#pragma warning disable 1591
public string val { get; set; }
#pragma warning restore 1591 
```

# javascript - jQuery，为什么倒带播放率不起作用？

> ID：16045812
> 
> 赞同：6
> 
> 时间：2013-04-16T19:48:55.967
> 
> 标签：javascript, jquery, html, html5-video

我得到了快进回放率工作正常。现在我尝试使用负数的倒带部分，但它不起作用。w3school 说要使用负数来倒带。 [http://www.w3schools.com/tags/av_prop_playbackrate.asp](http://www.w3schools.com/tags/av_prop_playbackrate.asp) 谁能告诉我我做错了什么？

在这里，我的 javascript 工作代码用于快进，

```
$("#speed").click(function() { // button function for 3x fast speed forward
    video.playbackRate = 3.0;
}); 
```

然后这里没有成功倒带代码，

```
$("#negative").click(function() { // button function for rewind
    video.playbackRate = -3.0;
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T21:02:27.307

**[样品小提琴](http://jsfiddle.net/bplumb/h9EVQ/8/)**

就倒带而言，播放速率选项似乎没有[完整的浏览器支持。](http://www.digitaria.com/blogs/html5-video-skinning-tutorial-part-3-rewindfast-forward)您可以通过使用`setinterval`和减去`currentTime`视频来伪造它。

```
var video = document.getElementById('video');
var intervalRewind;
$(video).on('play',function(){
    video.playbackRate = 1.0;
    clearInterval(intervalRewind);
});
$(video).on('pause',function(){
    video.playbackRate = 1.0;
    clearInterval(intervalRewind);
});
$("#speed").click(function() { // button function for 3x fast speed forward
    video.playbackRate = 3.0;
});
$("#negative").click(function() { // button function for rewind
   intervalRewind = setInterval(function(){
       video.playbackRate = 1.0;
       if(video.currentTime == 0){
           clearInterval(intervalRewind);
           video.pause();
       }
       else{
           video.currentTime += -.1;
       }
            },30);
}); 
```

我还为播放和暂停按钮添加了一些额外的侦听器以清除间隔。可能还想考虑在快进和快退按钮上做一些切换功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:43:00.097

*   确保在受支持的浏览器中进行测试。我只发现它可以在 IE10 上运行（虽然它很草率）

*   尝试在 IE9 中设置负值[会导致视频暂停](http://msdn.microsoft.com/en-gb/library/hh924823%28v=vs.85%29.aspx)（将其设置为 0）

*   根据 w3schools，它应该可以在 chrome 中工作，但我在那里没有运气

*   也应该在 Safari 上工作，虽然我没有测试过

    [例子](http://jsbin.com/oveguy/4/edit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T20:52:49.030

这是[w3school.com](http://www.w3schools.com/tags/av_prop_playbackrate.asp)提供虚假信息的又一个例子。他们忘记指出：

> 当元素具有当前媒体控制器时，将忽略playbackRate 属性，而使用当前媒体控制器的playbackRate。
> 
> *来源：* [http ://www.w3.org/TR/html5/embedded-content-0.html#playing-the-media-resource](http://www.w3.org/TR/html5/embedded-content-0.html#playing-the-media-resource)

[使用这个 demo](http://www.w3.org/2010/05/video/mediaevents.html)进行了一些测试后，事实证明，当媒体控制器存在时，[`playbackRate`](http://www.w3.org/TR/html5/embedded-content-0.html#dom-media-playbackrate)必须大于或等于 0。如果`video.playbackRate < 0`，它根本不会播放。

[`playbackRate`](http://www.w3.org/TR/html5/embedded-content-0.html#dom-media-playbackrate)这意味着当媒体控制器存在时，您不能“倒带”使用。但是，您可以通过执行以下操作来倒带视频：

```
var _el = document.getElementById("video"); 
_el.currentTime -= 5; 
```

演示：http: [//jsfiddle.net/dirtyd77/sZVAq/3/](http://jsfiddle.net/dirtyd77/sZVAq/3/)

或者

`<button onclick='video.currentTime-=5'>Rewind</button>`

演示：http: [//jsfiddle.net/dirtyd77/sZVAq/2/](http://jsfiddle.net/dirtyd77/sZVAq/2/)

# c# - 如何在 WCF-Rest 服务中从数据库返回 PDF

> ID：16045815
> 
> 赞同：1
> 
> 时间：2013-04-16T19:49:10.617
> 
> 标签：c#, sql-server, wcf-rest

我正在使用 C# 执行 WCF-REST 服务，该服务与 SQL Server 中的数据库连接以返回多个表。现在，我需要我的服务在 varbinary(MAX) 字段中返回一个 PDF 文件，该文件存储在表中。我正在做一些研究，但找不到我需要的东西。如何实现服务和类以返回 PDF 文件？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:23:46.687

**1）**编写一个返回a的方法`Stream`（例如，保存您的pdf文件的MemoryStream）。

从该方法返回之前

**2)**设置`application/pdf`为`WebOperationContext.Current.OutgoingResponse.ContentType`

**3）**将长度设置为`WebOperationContext.Current.OutgoingResponse.ContentLength`

然后它应该工作。

# google-mirror-api - 在“html”字段中使用 HTML 标签是否有任何限制？

> ID：16045816
> 
> 赞同：12
> 
> 时间：2013-04-16T19:49:18.423
> 
> 标签：google-mirror-api

根据[https://developers.google.com/glass/v1/reference/timeline#html](https://developers.google.com/glass/v1/reference/timeline#html) 可以使用 HTML。

在“html”字段中使用 HTML 标签是否有任何限制？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-16T20:19:39.503

我们将很快更新有关此的文档，但与此同时，以下是限制：

*   **允许的 HTML 元素：**在时间线卡片中使用这些元素。
    *   标题：`h1`, `h2`, `h3`, `h4`, `h5`,`h6`
    *   图片：`img`
    *   列表：`li`, `ol`,`ul`
    *   HTML5 语义：`article`, `aside`, `details`, `figure`, `figcaption`, `footer`, `header`, `nav`, `section`, `summary`,`time`
    *   结构：`blockquote`, `br`, `div`, `hr`, `p`,`span`
    *   款式: `b`, `big`, `center`, `em`, `i`, `u`, `s`, `small`, `strike`, `strong`, `style`, `sub`,`sup`
    *   表：`table`, `tbody`, `td`, `tfoot`, `th`, `thead`,`tr`
*   **阻止的 HTML 元素：**这些元素及其内容已从 html 有效负载中删除。
    *   文件标题：`head`,`title`
    *   嵌入： `audio`, `embed`, `object`, `source`,`video`
    *   相框：`frame`,`frameset`
    *   脚本：`applet`,`script`
*   **其他元素：**上面未列出的任何元素都将被删除，但它们的内容会被保留。

# ruby-on-rails - 将错误发送到另一个日志 - Ruby on rails

> ID：16045820
> 
> 赞同：1
> 
> 时间：2013-04-16T19:49:36.647
> 
> 标签：ruby-on-rails, ruby, logging, error-log

我想知道我是否可以将我的应用程序在“生产”环境中发生的所有错误发送到新的“日志”，而不是将所有操作发送到“production.log”并将其发送到“production_errors.log”。

如果可能的话，请告诉我如何！

非常感谢您的阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:23:34.930

在`config/environments/production.rb`，在配置块内：

```
config.logger = Logger.new(Rails.root.join(%w(log production_errors.log)), :error) 
```

# mvvm - Caliburn Micro 和跨应用程序共享视图模型

> ID：16045823
> 
> 赞同：1
> 
> 时间：2013-04-16T19:49:40.307
> 
> 标签：mvvm, windows-8, windows-phone, caliburn.micro, mvvmcross

我正在研究可能将 Caliburn Micro 用于即将推出的 Windows Phone 和 Windows RT 应用程序，我想知道在这两个平台上重用视图模型是否可行或可取？

我在另一个名为 MvvmCross 的框架中看到了使用 Portable Libraries 的示例，但我不确定是否可以使用 Caliburn 来执行此操作，因为我无法将 Caliburn 添加到 Portable Library，因此无法共享接口，例如 INavigationService，视图模型位于共享的便携式库中。

我正在考虑简单地为 Windows Phone 设置一组视图模型，为 WinRT 设置另一组视图模型。

关于如何进行的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:25:49.183

作为一个实验，我使用了 CM 的一部分并将其制成便携式，这样我的视图模型就可以放在便携式设备中。我主要想在便携式设备中利用屏幕和导体，并且只有一组视图模型。

CM 的创建者曾提到让 CM 2.0 支持便携设备，但这将是一项相当大的工作量。

我已经尝试过 MvvmCross，即使您不是针对 iOS 或 Android ， [v3的东西也非常漂亮。](https://github.com/slodge/MvvmCross)

因此，对于 CM，当前版本的唯一选择是为 WinRT 和 WP 提供单独的视图模型。

# ios - SIGSEGV 错误发生在实际设备上，但不在 ios 模拟器上

> ID：16045826
> 
> 赞同：0
> 
> 时间：2013-04-16T19:49:49.253
> 
> 标签：ios, crash, uiimageview, nsarray, segmentation-fault

我是名为 CountdownCenter 的 cydia 调整的开发人员。我试图为我的小部件创建一个数字时钟外观，所以我创建了一个示例应用程序，可以完美地做到这一点。完成此操作后，我将此数据传输到我的调整代码中，但这会导致我的 iPhone 上的 SIGSEGV 崩溃。经过一些测试，我找到了导致崩溃的部分，但我只是找不到问题所在，因为这部分可以在普通应用程序上运行。你能帮我吗？

这是代码：

```
int digitarray[10];
    int c = 0;
    digitarray[0] = 0;
    digitarray[1] = 0;
    while (secon>0) {
        int digitt = secon % 10;
        digitarray[c] = digitt;
        secon /= 10;
        c++;
    }
        lbl.text = [NSString stringWithFormat:@"%d", digitarray[0]];
          [self selectimage:digitarray[0] img:numview10]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:17:49.443

`SIGSEGV` usually means, that you're trying to access memory, that you are not allowed to access. (btw are you testing this with a release build?) Maybe f.e. here (there are some other similar places too):

```
c = 0;
while (secon>0) {
    int digitt = secon % 10;
    digitarray[c] = digitt;
    secon /= 10;
    c++;
} 
```

There are some possibilities:

*   `secon` (horrible variable names btw...) is a `float` or `double`, in that case the `while loop` is either never entered or never left
*   c becomes so large that it's beyond `digitarray`'s bounds

To solve this issue I would recommend to but a breakpoint at the beginning of your code and check it step by step.

# javascript - 将 Karma JavaScript 测试与 Maven 集成

> ID：16045829
> 
> 赞同：3
> 
> 时间：2013-04-16T19:50:03.090
> 
> 标签：javascript, unit-testing, maven, karma-runner

我正在向 Maven 添加基于 Karma 的 JS 单元测试。我使用了以下配置：

```
<plugin>
    <groupId>com.kelveden</groupId>
    <artifactId>maven-karma-plugin</artifactId>
    <version>1.0</version>
    <executions>
        <execution>
            <goals>
                <goal>start</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <browsers>Chrome</browsers>
    </configuration>
</plugin> 
```

当我使用 时，测试在我的机器上单独工作（没有 Maven）`karma start karma.conf.js`，但是使用 Maven 我得到了以下错误：

```
[ERROR] Failed to execute goal com.kelveden:maven-karma-plugin:1.0:start (default) 
on project web: There was an error executing Karma. Cannot run program "karma":
CreateProcess error=2, The system cannot find the file specified -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal
com.kelveden:maven-karma-plugin:1.0:start (default) on project web: 
There was an error executing Karma.
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
...
Caused by: java.io.IOException: Cannot run program "karma": CreateProcess error=2, 
The system cannot find the file specified
        at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)
        at com.kelveden.karma.StartMojo.createKarmaProcess(StartMojo.java:151)
        ... 22 more
Caused by: java.io.IOException: CreateProcess error=2, 
The system cannot find the file specified
        at java.lang.ProcessImpl.create(Native Method)
        at java.lang.ProcessImpl.<init>(ProcessImpl.java:81)
        at java.lang.ProcessImpl.start(ProcessImpl.java:30)
        at java.lang.ProcessBuilder.start(ProcessBuilder.java:453)
        ... 23 more 
```

这就是我觉得有点奇怪的原因：根据[这个 class](https://github.com/karma-runner/maven-karma-plugin/blob/master/src/main/java/com/kelveden/karma/StartMojo.java)，`karma.conf.js`应该默认找到 （`@Parameter(defaultValue = "${basedir}/karma.conf.js", property = "configFile", required = true)`）。另外，我尝试在`-DconfigFile=...`参数中传递绝对和相对路径，它不起作用。我使用Windows，但我认为这应该不是问题。我不确定配置中到底有什么问题，不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T13:51:06.097

我认为这是一个错误，已经修复了。

`1.2-SNAPSHOT`我尝试使用此插件的版本（克隆并构建）再次运行测试，它正确启动了 Karma。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:30:10.230

根据我的说法，在我看来 karma.conf.js 已经到位（即参数确实有效），但“业力”可执行文件不是

`final ProcessBuilder builder = new ProcessBuilder("karma", "start", configFile.getAbsolutePath());`

从你提到的文件中。

# cookies - 我可以访问另一个域设置的 cookie 吗？

> ID：16045832
> 
> 赞同：0
> 
> 时间：2013-04-16T19:50:08.710
> 
> 标签：cookies

假设我的浏览器中有一个由网站（不是我的）设置的 cookie。我显然是通过浏览那个网站得到的。现在，我想知道是否可以在我的网站中显示该 cookie 的值……我试过了，但它不起作用。不过，我可以访问和显示我的网站设置的 cookie。这是我使用的代码：

```
 echo $_COOKIE["cookieice"]; 
```

我从一个名为“Cookie Editor”的插件中获得了 cookie 的名称，该插件适用于 FireFox。

# breeze - 执行 3 个异步操作（第二个取决于条件）

> ID：16045833
> 
> 赞同：0
> 
> 时间：2013-04-16T19:50:10.473
> 
> 标签：breeze, durandal

我正在做一个**durandal / 微风**项目。

我需要在我的激活函数中执行几件事。感谢`promises`我能够链接异步操作。请注意，我仍然是所有这些事情的初学者，所以不要犹豫，纠正我的代码。

我的 viewModel 中有以下激活功能：

```
var activate = function (routeData) {

    initLookups()

    var idTran = parseInt(routeData.idTran);
    var idItin = parseInt(routeData.idItin);

    return datacontext.getTransportById(idTran, transport)
            .then(function () { return datacontext.getItineraryById(idItin, itinerary); });
} 
```

**所以在返回语句中：**

1.  我填写了`transport`可观察的感谢`getTransportById`

2.  *然后*我填写`itinerary`observable 感谢`getItineraryById`

-

到现在为止还挺好。此代码按预期工作并完成工作（可能未优化）。现在我需要在这两个操作之间插入一个条件，以创建一个新实体（如果 idItin==-1）。在这种情况下，将创建一个新实体。我尝试使用下面的代码，但它不起作用：我的意思是`promise`似乎没有在这里完成他的工作，因此无需等待异步操作完成即可显示视图。

```
var activate = function (routeData) {

    initLookups()

    var idTran = parseInt(routeData.idTran);
    var idItin = parseInt(routeData.idItin);

    return datacontext.getTransportById(idTran, transport)
            .then(function () { if (idItin == -1) return datacontext.createItineraryDetailTransport(idTran); })
            .then(function () { return datacontext.getItineraryById(idItin, itinerary); });
} 
```

以下是数据上下文的`createItineraryDetailTransport`功能：

```
var createItineraryDetailTransport = function (idTransport) {

    var initialValues = ({
        transportId: idTransport
    });

    var newItinerary = manager.createEntity(entityNames.itinerary, initialValues);
    return manager.addEntity(newItinerary);
} 
```

那么有人知道如何编码这个东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:38:54.633

我认为正确的方法是：

```
return datacontext.getTransportById(idTran, transport).then(function () {
    return datacontext.getItineraryById(idItin, itinerary).then(function(){
        if (idItin == -1) return datacontext.createItineraryDetailTransport(idTran);
        //You have to return something different tu null,false,undefined... or a promise
        return true; 
    );
}); 
```

此外，如果不需要顺序执行此调用，您可以使用 Q 库 ( [https://github.com/kriskowal/q](https://github.com/kriskowal/q) ) 并行执行。解决方案可能是：

```
if(idItin ==-1){
    //CreateItineraryDetailTransport don't return a promise.
    //You can call that like a normal methond.
    //It is not a asyncronous methond
    datacontext.createItineraryDetailTransport(idTran);
}
return Q.all([datacontext.getTransportById(idTran, transport),datacontext.getItineraryById(idItin, itinerary)]); 
```

- - -编辑 - - -

在其他两个调用之间进行创建的解决方案：

```
 return datacontext.getTransportById(idTran, transport).then(function () {
        if (idItin == -1) return datacontext.createItineraryDetailTransport(idTran).then(function(){
            return datacontext.getItineraryById(idItin, itinerary);
        });
        return datacontext.getItineraryById(idItin, itinerary)
    });

   // I am using Q to do this method return a promise
    var createItineraryDetailTransport = function (idTransport) {

        var deferred = Q.defer();

        var initialValues = ({
            transportId: idTransport
        });

        var newItinerary = manager.createEntity(entityNames.itinerary, initialValues);
        manager.addEntity(newItinerary);

        deferred.resolve(true);
        return deferred.promise;
    } 
```

您也可以使用 Q.fcall：

```
return Q.fcall(function(){ datacontext.createItineraryDetailTransport(idTran);}; 
```

我认为也许，您不需要 createItineraryDetailTransport 返回一个承诺。也许这个解决方案也是可能的：

```
return datacontext.getTransportById(idTran, transport).then(function () {
    if (idItin == -1) datacontext.createItineraryDetailTransport(idTran);
    return datacontext.getItineraryById(idItin, itinerary);
}); 
```

# c - C中给定偏移量的结构的特定输出

> ID：16045837
> 
> 赞同：-3
> 
> 时间：2013-04-16T19:50:27.883
> 
> 标签：c, struct

以下代码将打印存储在每个`Foo`结构上的值。我遇到的问题是在给定 的值的情况下计算从哪里开始`i`，应该从哪里开始，它可能会有所不同。中的项目也可能有所不同。偏移量可以从 0 到分配的值的总量。在这种特殊情况下，它应该输出：`j``offset``Foo``offset = 6`

```
Bar: 0 - Foo: 6
Bar: 0 - Foo: 7
Bar: 0 - Foo: 8
Bar: 0 - Foo: 9

Bar: 1 - Foo: 0
Bar: 1 - Foo: 1
Bar: 1 - Foo: 2
Bar: 1 - Foo: 3
Bar: 1 - Foo: 4
... 
```

但现在它输出：

```
Bar: 1 - Foo: 1
Bar: 1 - Foo: 2
Bar: 1 - Foo: 3
Bar: 1 - Foo: 4

Bar: 2 - Foo: 2
Bar: 2 - Foo: 3
Bar: 2 - Foo: 4

Bar: 3 - Foo: 3
Bar: 3 - Foo: 4
.... 
```

* * *

```
#include <stdio.h>
#include <stdlib.h>

typedef struct {
    int val;
} Foo;

typedef struct {
    int size;
    Foo *foo;
} Bar;

#define MAX 10
int main () {
    Bar bar[MAX];
    int i, j;
    int arr[10]={10,5,5,5,5,5,5,5,5,5};

    for(i = 0; i < MAX; i++) {
        bar[i].size = arr[i];
        bar[i].foo = malloc (sizeof (Foo) * bar[i].size);
        for(j = 0; j < bar[i].size; j++) {
            bar[i].foo[j].val = j;
        }
    }

    int offset = 6;
    int init = offset / 5;
    for (i = init; i < MAX; i++) {
        for (j = i % 5; j < bar[i].size; j++) {
            printf("Bar: %d - Foo: %d\n", i,  bar[i].foo[j].val); 
        }
        printf("\n");
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:04:12.303

你确定这是对的：

```
int init = offset / 5; 
```

我认为这也不对：

```
for (j = i % 5; j < bar[i].size; j++) { 
```

如果我正确理解问题设置，则每个“桶”（Foo对象）中的元素数量可能会有所不同，并且在计算起点时应考虑到有多少，然后从起点开始计数，直到您有打印了十个项目。这只需要一个循环。

# sql - 在 SQL 中显示同比结果

> ID：16045839
> 
> 赞同：-3
> 
> 时间：2013-04-16T19:50:31.043
> 
> 标签：sql, sql-server

我已经搜索并尝试了一些我发现的东西的变化，但我对我觉得应该很容易的东西感到困惑。

示例数据包括：

```
地点、销售额、月份、年份
地点 1, 100, 4, 2012
地点 1, 130, 4, 2013
```

我正在尝试编写一个 Select 语句，该语句将允许我显示上月/年的销售额与当前月/年的销售额。

理想情况下，结果将如下所示：

```
地点，[2012 年 4 月销售]，[2013 年 4 月销售]
位置 1、100、130
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T19:55:19.773

您没有指定您使用的数据库，但您可以使用聚合函数将行数据转换为列`CASE`：

```
select location,
  sum(case when year = 2012 and month = 4 then sales end) Sales_042012,
  sum(case when year = 2013 and month = 4 then sales end) Sales_042013
from yt
group by location; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/1ebc5/1)。

作为旁注，您不应该将`month`and存储`year`在单独的列中。您应该存储一个日期时间列。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T19:55:06.420

您可以在相同的位置和月份，但在上一年将表格与自身连接起来。

```
declare @tbl table (location varchar(50), sales int, mth int, yr int)
insert @tbl values ('loc1', 100, 4, 2012)
insert @tbl values ('loc1', 110, 5, 2012)
insert @tbl values ('loc1', 120, 6, 2012)
insert @tbl values ('loc1', 130, 7, 2012)
insert @tbl values ('loc1', 140, 8, 2012)
insert @tbl values ('loc1', 200, 4, 2013)
insert @tbl values ('loc1', 210, 5, 2013)
insert @tbl values ('loc1', 220, 6, 2013)
insert @tbl values ('loc1', 230, 7, 2013)
insert @tbl values ('loc1', 240, 8, 2013)

select t1.location, t1.mth, t1.yr, t1.sales [curr_sales], t2.sales [prev_sales]
from @tbl t1
left join @tbl t2
    on t1.location = t2.location    
    and t1.mth = t2.mth
    and t1.yr - 1 = t2.yr 
```

# php - WSDL 中的数组响应 - SOAP PHP

> ID：16045847
> 
> 赞同：4
> 
> 时间：2013-04-16T19:51:07.250
> 
> 标签：php, soap, wsdl

在我的 wsdl 代码中，我得到一个整数，我想在数组中返回结果。为什么在我的输入中我只有一个整数，我需要数组中的结果，因为在我的 php 函数中，我想从数据库中返回来自客户端选择的整数的信息。

例如，我的客户发送 1，在我的 php 中，我从 DB 中的“1”获取信息作为他的“ID (int)”、“Name(string)”、“Number1(int)”、“Number2(int)”、实际客户需求的日期和时间 « YYYY-MM-DD hh:mm:hh » (??)"

我怎么能这样做？

谢谢，

这是我的实际 wsdl，输入一个整数，输出一个整数：

```
<message name='getResultRequest'> 
  <part name='numeropark' type='xsd:int'/>
</message> 
<message name='getResultResponse'> 
  <part name='result' type='xsd:string'/> 
</message> 

<portType name='getResultPortType'> 
  <operation name='getResult'> 
    <input message='tns:getResultRequest'/> 
    <output message='tns:getResultResponse'/> 
  </operation> 
</portType> 

<binding name='getResultBinding' type='tns:getResultPortType'> 
  <soap:binding style='rpc' transport='http://schemas.xmlsoap.org/soap/http'/> 
  <operation name='getResult'> 
    <soap:operation soapAction='urn:xmethods-delayed-quotes#getResult'/> 
    <input> 
      <soap:body use='encoded' namespace='urn:xmethods-delayed-calcul' 
        encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/> 
    </input> 
    <output> 
      <soap:body use='encoded' namespace='urn:xmethods-delayed-calcul' 
        encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/> 
    </output> 
  </operation> 
</binding> 

<service name='getResultService'> 
  <port name='getResultPort' binding='getResultBinding'> 
    <soap:address location='http://XXX.XXXX.com/soap/soap-server.php'/> 
  </port> 
</service> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T20:40:07.710

要返回数组，您应该定义一个 complexType。例如，如果你想返回字符串数组，你的 WSDL 应该包含这部分：

```
<wsdl:types>
    <xsd:schema targetNamespace="http://schema.example.com">
      <xsd:complexType name="resultArray">
        <xsd:complexContent>
          <xsd:restriction base="SOAP-ENC:Array">
            <xsd:attribute ref="SOAP-ENC:arrayType" wsdl:arrayType="xsd:string[]" />
          </xsd:restriction>
        </xsd:complexContent>
      </xsd:complexType>
    </xsd:schema>
</wsdl:types>
<message name='getResultRequest'> 
  <part name='numeropark' type='xsd:int'/>
</message> 
<message name='getResultResponse'> 
  <part name='result' type='tns:resultArray'/> 
</message> 
```

我建议您使用任何 WSDL 生成器来创建描述文件。

# scala - 您如何确定 scala 模式匹配案例中全部捕获的类型？

> ID：16045849
> 
> 赞同：0
> 
> 时间：2013-04-16T19:51:14.920
> 
> 标签：scala, pattern-matching, case, catch-all

如果您在 Scala 中有模式匹配（大小写），例如：

```
foo match {
  case a: String => doSomething(a)
  case f: Float =>  doSomethingElse(f)
  case _ => ? // How does one determine what this was?
} 
```

有没有办法确定什么类型实际上被捕获了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T19:53:36.940

```
case x => println(x.getClass) 
```

太容易了 ：-）

基本上，您只需要将 catch-all 语句中的值绑定到一个名称（`x`在这种情况下），然后您可以使用标准的 getClass 方法来确定类型。

如果您尝试根据类型执行特定逻辑，那么您可能做错了。如果您需要一些不想在其中定义内联的“默认”情况，您可以将匹配语句编写为部分函数。例如：

```
scala> val defaultHandler: PartialFunction[Any, Unit] = {
     | case x: String => println("String: " + x)
     | }
defaultHandler: PartialFunction[Any,Unit] = <function1>

scala> val customHandler: PartialFunction[Any, Unit] = {
     | case x: Int => println("Int: " + x)
     | }
customHandler: PartialFunction[Any,Unit] = <function1>

scala> (customHandler orElse defaultHandler)("hey there")
String: hey there 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T19:53:35.510

```
foo match {
  case a: String => doSomething(a)
  case f: Float =>  doSomethingElse(f)
  case x => println(x.getClass)
} 
```

# c# - 根据属性在设计时刷新用户控件

> ID：16045852
> 
> 赞同：0
> 
> 时间：2013-04-16T19:51:23.573
> 
> 标签：c#, .net, winforms, user-controls

`bool`我有一个带有属性的自定义控件。在设计器中，我将用户控件拖到表单中，并将此属性更改为“false”，这应该隐藏子控件。

它确实在运行时隐藏它，但不是在设计时。如何在设计时“刷新”我的用户控件以反映对此属性的更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:54:18.430

我不知道你为什么要这样做。控件只会在运行时隐藏，这就是它的本意。也许您可以在设计时创建一些东西来隐藏它，或者添加另一个控件来隐藏它。

> 如何在设计时“刷新”我的用户控件以反映对此属性的更改？

你不能。更改会自动应用，您仍然看到它的唯一原因是它应该是这样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:20:53.067

这就像使用 Visual Studio 2012 一样工作：

```
public class TestControl : Control {
  Button button;

  public TestControl() {
    button = new Button() { Text = "Click" };
    this.Controls.Add(button);
  }

  public bool ButtonVisible {
    get { return button.Visible; }
    set {
      button.Visible = value;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T00:29:02.097

恐怕我没有正确地问我的问题——我继承了一个相当复杂的第三方控件，我希望看到设计时间的变化。

我最终覆盖了`OnCreateControl`. 不过，我感谢您的帮助。

# javascript - 尝试使用 JSONLoader() 加载几何时出现奇怪的错误

> ID：16045862
> 
> 赞同：0
> 
> 时间：2013-04-16T19:52:20.067
> 
> 标签：javascript

```
<html>
    <head>
        <title>My first Three.js app</title>
        <style>canvas { width: 100%; height: 100% }</style>
    </head>
    <body>
        <script src="https://raw.github.com/mrdoob/three.js/master/build/three.js"></script>
        <!--<script src="C:/Users/danr/Desktop/ThreeJS/three.js-master/build/three.js"></script>-->
        <script>
            var scene = new THREE.Scene();
            var camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);

            var renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            camera.position.z = 5;

            var pointLight = new THREE.PointLight(0xFFFFFF);
            pointLight.position.x = 2;
            pointLight.position.y = 5;
            pointLight.position.z = 10;
            scene.add(pointLight);

            loader = new THREE.JSONLoader();
            loader.load( "./X738.js", function(geometry) 
            {
                mesh = new THREE.Mesh(geometry, new THREE.MeshNormalMaterial());
                mesh.scale.set( 1, 1, 1 );
                mesh.position.y = 0;
                mesh.position.x = 0;
                scene.add(mesh);
            });

            function render() {
                requestAnimationFrame(render);

                renderer.render(scene, camera);
            }
            render();
        </script>
    </body>
</html> 
```

这是我所有的代码。我正在使用 Apache2.2 服务器，我使用 python 将我的模型从 FBX 转换为 Json。这是我收到的错误消息：

```
THREE.WebGLRenderer 57 three.js:18058
Uncaught SyntaxError: Unexpected token , three.js:9764
xhr.onreadystatechange three.js:9764

     xhr.onreadystatechange = function () {

                if ( xhr.readyState === xhr.DONE ) {

                    if ( xhr.status === 200 || xhr.status === 0 ) {

                        if ( xhr.responseText ) {

                            var json = JSON.parse( xhr.responseText );//*Uncaught SyntaxError: Unexpected token*
                            var result = context.parse( json, texturePath );
                            callback( result.geometry, result.materials ); 
```

有什么建议可能是错的？？？我尝试了许多不同的解决方案，但似乎没有任何效果，我感到非常迷茫。

谢谢！！！

编辑：这是 python FBX 到 JSON 转换器给我的示例：

```
{
    "metadata": {
        "formatVersion" : 3.2,
        "type"      : "scene",
        "generatedBy"   : "convert-to-threejs.py",
        "objects"       : 1,
        "geometries"    : 1,
        "materials"     : 1,
        "textures"      : 1
    },

    "urlBaseType": "relativeToScene",

    "objects" :
    {
        "Tire_Front" : {
            "geometry" : "Geometry_40_Tire_Front",
            "material" : "Material #3319",
            "position" : [ 0, -423.113, 451.225 ],
            "rotation" : [ -1.5708, 0.000987928, 6.04932e-20 ],
            "scale"    : [ 1, 1, 1 ],
            "visible"  : true
        }
    },

    "geometries" :
    {
        "Geometry_40_Tire_Front" : {
            "type"  : "embedded",
            "id" : "Embed_40_Tire_Front"
        }
    }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-30T02:32:05.023

我在您的 .json 文件中发现了一些“Uncaught SyntaxError：Unexpected token”的来源。请注意语法，包括括号“{”或“[”。

```
{
    "metadata": {
        "formatVersion" : 3.2,
        "type"      : "scene",
        "generatedBy"   : "convert-to-threejs.py",
        "objects"       : 1,
        "geometries"    : 1,
        "materials"     : 1,
        "textures"      : 1
    },

    "urlBaseType": "relativeToScene",

    "objects" :
    {
        "Tire_Front" : {
            "geometry" : "Geometry_40_Tire_Front",
            "material" : "Material #3319",
            "position" : [ 0, -423.113, 451.225 ],
            "rotation" : [ -1.5708, 0.000987928, 6.04932e-20 ],
            "scale"    : [ 1, 1, 1 ],
            "visible"  : true
        }
    },

    "geometries" :
    {
        "Geometry_40_Tire_Front" : {
            "type"  : "embedded",
            "id" : "Embed_40_Tire_Front"
        }
    } 
```

}

使用“OBJLoader”而不是“JSONLoader”来加载对象也有帮助。

# python - Python：如何读取泡菜转储？

> ID：16045864
> 
> 赞同：1
> 
> 时间：2013-04-16T19:52:41.973
> 
> 标签：python, sql, pickle

我有一个从朋友那里得到的泡菜垃圾堆，他让我读起来像：

```
f = open('file.pickle')
import pickle
l = pickle.loads(f.read()) 
```

但我得到一个`ImportError`说法`no module named sql.models`

有人可以帮我了解发生了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T19:54:06.493

您缺少重建腌制对象所需的代码。

Pickles 存储可以从中导入类的位置以及实例属性。仍然需要原始模块来重新创建模块。从[文档](http://docs.python.org/2/library/pickle.html)中：

> 请注意，函数（内置的和用户定义的）是通过“完全限定”名称引用而不是值来腌制的。这意味着只有函数名和定义函数的模块的名称被腌制。函数的代码和它的任何函数属性都没有被腌制。因此，定义模块必须在 unpickling 环境中是可导入的，并且模块必须包含命名对象，否则将引发异常。[[4]](http://docs.python.org/2/library/pickle.html#id14)
> 
> 类似地，类是通过命名引用来腌制的，因此在 unpickling 环境中适用相同的限制。请注意，没有任何类的代码或数据被腌制，因此在以下示例中，类属性`attr`不会在 unpickling 环境中恢复：
> 
> ```
> class Foo:
>     attr = 'a class attr'
> 
> picklestring = pickle.dumps(Foo) 
> ```
> 
> 这些限制是为什么必须在模块的顶层定义可提取函数和类的原因。

换句话说，用于*创建*泡菜的原始数据包括至少一个自定义类的实例，该类源自名为`sql.models`.

一定要小心阅读任意泡菜，即使是来自朋友的。pickle 只是一种重新创建任意 Python 结构的堆栈语言。有足够的决心和技巧，您可以构建一个在您的计算机上生成秘密后门服务器的泡菜。该`pickle`文档明确警告您：

> **警告**：该`pickle`模块并非旨在防止错误或恶意构建的数据。永远不要取消从不受信任或未经身份验证的来源收到的数据。

这[在过去一直是个问题](http://www.zopatista.com/plone/2007/11/09/one-cookie-please/)，即使对于有经验的开发人员也是如此。

# android - 线性布局android中的可变高度

> ID：16045866
> 
> 赞同：0
> 
> 时间：2013-04-16T19:52:46.647
> 
> 标签：android, android-linearlayout

我喜欢得到以下信息：我希望滚动视图在顶部始终保持 50% 或更大。这根据底部的列表视图。根据它拥有的项目数量，列表视图将最大为 50%。

有人知道如何得到这个吗？我一直在尝试一些关于 layout_width/height 和 weights 的事情.. 但无法找到解决方案.. 在 stackoverflow 上也没有找到解决方案..

基本设置：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools"
   android:id="@+id/LinearLayout1"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:orientation="vertical"
   tools:context=".RouteGroupDetailActivity" >

    <ScrollView
       android:id="@+id/scrollView1"
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:layout_weight="1">

        <LinearLayout
           android:layout_width="match_parent"
           android:layout_height="match_parent" >
        </LinearLayout>
    </ScrollView>

    <ListView
       android:id="@+id/listView1"
       android:layout_width="match_parent"
       android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

# pyodbc - 按名称访问 pyodbc 列

> ID：16045874
> 
> 赞同：0
> 
> 时间：2013-04-16T19:53:08.780
> 
> 标签：pyodbc

我有 2 个包含 150 列的表，并尝试加入这些表并一一获取结果集并处理它们：

```
qry = '''select a.*, b.*
         from table_a a
              full outer join table_b b
         where a.id = b.id'''
table_row = conn.execute(qry) #execute method yields a generator 
```

现在，我需要访问生成器的结果集并确定 table-1 和 table-2 的每一列的值

例如：- 如果 table-1 & table-2 有一个名为 name 的列，我需要比较它..

我如何通过 columnnname 访问结果集，我使用 Pyodbc，

即结果集.table1.name = 结果集.table2.name

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T21:03:50.253

1.  使用 ISO 信息架构视图（我在示例中使用 SQL Server）返回每个表的列名，并根据需要替换数据库和架构参数值。

2.  将结果列表合并到一个集合中，其中包含两个表中都存在的列名。

3.  使用此集合构建一个字符串，表示要从每个表中选择的列名，并通过以表名作为前缀来为每个列设置别名。定义列别名将允许您按表区分列。

4.  执行选择查询并打印值进行比较。

## 代码示例

```
# assumes connection, cursor already setup
# build SQL for retrieving column names
sql = '''SELECT COLUMN_NAME
         FROM INFORMATION_SCHEMA.COLUMN
         WHERE TABLE_CATALOG = ? AND TABLE_SCHEMA = ?
               AND TABLE_NAME = ?'''

# get column names from table_a
rows = cursor.execute(sql, ('database', 'schema', 'table_a')).fetchall()
table_a_columns = [column[0] for column in rows]

# get column names from table_b
rows = cursor_b.execute(sql, ('database', 'schema', 'table_b')).fetchall()
table_b_columns = [column[0] for column in rows]

# get unique matching columns from lists
matches = set(table_a_columns).intersection(table_b_columns)

# get string of column names to use in query, setting column alias prefixed with
# table name for each column
column_alias = 'a.{0} as a_{0}, b.{0} as b_{0}'
columns = ', '.join([column_alias.format(column) for column in matches])
sql = 'SELECT {} FROM table_a a FULL OUTER JOIN table_b b ON a.id = b.id'
sql = sql.format(columns)

# print values to compare
for row in cursor.execute(sql):
    print row 
```

可能有一种不太复杂的方法，但它让我望而却步。

# angularjs - 如何以编程/动态方式更改视图？

> ID：16045875
> 
> 赞同：3
> 
> 时间：2013-04-16T19:53:09.973
> 
> 标签：angularjs

我想要一个“向导”，在这个过程中屏幕会发生几次变化。我想为此使用 Angular 的控制器。但是，我无法弄清楚如何更改以编程方式显示的视图。

看起来`$scope.setView('/path/to/my/view.htm')`我无法定义任何类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T20:01:50.567

您将想要了解 ngView => [http://code.angularjs.org/1.1.4/docs/api/ng.directive:ngView](http://code.angularjs.org/1.1.4/docs/api/ng.directive:ngView)

这样你就可以使用 $route 来配置部分内容的显示。您将需要声明模板选项，例如：

```
$routeProvider.when('/path', {
  templateUrl: '/path/to/my/view.htm',
} 
```

另一种选择是使用 ngSwitch => [http://code.angularjs.org/1.1.4/docs/api/ng.directive:ngSwitch](http://code.angularjs.org/1.1.4/docs/api/ng.directive:ngSwitch)

对于向导，​​我认为 ngSwitch 效率较低，但两者中会更容易。这听起来确实像您正在寻找的东西。

“ngSwitch 指令用于根据范围表达式有条件地交换模板上的 DOM 结构。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-15T08:22:22.857

document.location.href='#/yourRoute' 以编程方式更改路线

如果你想用 1 个控制器使用多个视图：用不同的视图定义不同的路由，但使用相同的控制器

# c++ - 以编程方式创建和签署公钥/私钥对

> ID：16045884
> 
> 赞同：2
> 
> 时间：2013-04-16T19:53:37.773
> 
> 标签：c++, windows, cryptography, public-key-encryption

请先阅读问题，因为标题不是很清楚，我无法用几句话表达我的问题。

**我的场景是这样的：** 我正在创建一个 P2P 应用程序。对等点在安装期间生成公钥和私钥对并将公钥上传到我的中央服务器。当对等体 A 想要与对等体 B 通信时，它会下载 B 的公钥并进行正常的加密和数据传输。

我需要一点提示以编程方式创建这个公钥/私钥对。我再次需要对等点的这个公钥由中央服务器的私钥签名，以便知道它的真实性。

我是否必须创建一个私有 CA 之类的东西或任何其他可能的方式？如果有人可以从编程的角度帮助我理解这种创建、签名等，那就太好了。我在谷歌搜索中得到了很多概念，但在编码方面却不多。我是密码学的新手，所以任何其他实现相同的想法都会有所帮助。

注意：我不能使用任何第三方 CA。而且我不是将证书用于身份验证，而是用于加密。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T22:35:41.673

您在概念上获得很多成功但在编程上没有获得成功的原因是，很难提出一个好的协议，而实际对其进行编程并不*难*。这也是正确的顺序，这种协议你不能只是在以后编程和记录。

如果您想使用证书/私钥进行签名或加密，这并不重要。关键是公钥需要被信任。如果您不能信任公钥，那么您就不能保证为正确的实体执行了加密。这意味着例如对等点 A 使用 M 的公钥而不是 B 进行加密。这几乎总是一个问题，除非您只对窃听攻击感兴趣。

由于您似乎有一个中央服务器，因此使用分层信任模型似乎是合乎逻辑的。对于这样的系统 PKI，使用 X509 证书和中央 CA 是最有意义的。您可以使用基于 OpenSSL 的 CA 系统或任何其他免费 CA 解决方案，例如 EJBCA 或某些基于 Windows 服务器的解决方案。

当您运行 CA 时，您还没有到那里。您需要一种方法让对等方信任 CA 的根证书。之后，您需要一种方法让 CA 信任对等方发送的证书请求。如果没有更多信息，很难说哪种方法最适合您。

只有在弄清楚所有这些后（至少），您才应该担心编程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:02:35.950

经典的 PKI 场景……你想要一个 CA……

您所有的同行都需要提前知道公共 CA 证书...

一旦对等点向服务器注册，它应该加密自己的密钥，以便服务器可以确保接收到的密钥没有被篡改......

对于数据结构，您可能应该使用 X509

从程序员的角度来看：

对等体 A 想要注册一个新的密钥对...

-> 生成密钥对
-> 填写证书的标识详细信息，并附上公钥（您现在拥有的通常称为“证书请求”）

-> 对称加密请求（带有随机 IV 的 AES-CBC-256 看起来是一个不错的选择）
-> 加密对称密钥，并将其与加密请求和明文 IV 一起发送到服务器（可选地，包括服务器在加密部分提供随机数或附加会话数据）

在服务器端：

解密，检查数据，尤其是请求的标识信息，如果没问题，获取请求（ID 部分 + 公钥）并使用 CA 密钥签名

向对等点 A 报告并移交签名证书（因为它不包含任何秘密，可能是明文或使用为对等点 A 提供的密钥加密）

一旦你需要在同行之间建立联系，你只需要一些联系信息：

如果对等点 X 想联系对等点 A，您只需提供如何联系 A 的地址...我的证书。”）......在交换证书后，验证签名......如果 CA sig 没问题，双方都会生成随机数（“nonce”；使用过的数字）并使用来自收到并验证的证书并将它们移交给另一个对等方......在收到加密值时解密，并使用其他方密钥重新加密，然后发回......在使用您自己的私钥收到解密值后，并验证它是否与您发送的号码相同...已建立经过身份验证的连接，您现在可以继续移交对称密钥并开始传输加密数据

如果您认为无需对其他对等方进行身份验证就可以生存，则可以在检查其证书上的 CA 签名后直接开始传输加密数据……但请考虑在这种情况下，攻击者可以接收不适合他的数据（他可以'不解密，但他可以假装是另一个同行......）

# macos - CMake 构建 Mac 应用程序

> ID：16045885
> 
> 赞同：2
> 
> 时间：2013-04-16T19:53:38.400
> 
> 标签：macos, cmake, shared-libraries, ld, dynamic-linking

我们公司目前使用 CMake 来构建我们的 Windows 可执行文件。我正在努力使我们的应用程序在 Mac 上运行。到目前为止，该应用程序在 Mac 上构建良好。但是，当我尝试打开 CMake 为 Mac 创建的可执行文件时，我在终端窗口中收到以下错误：

```
Last login: Tue Apr 16 14:34:58 on ttys001
Locals-MacBook-Pro:~ auser$ /Users/auser/Documents/Projects/CodeMonkey/bin/CmDeveloperKit ; exit;
dyld: Library not loaded: libAbcSupport.dylib
  Referenced from: /Users/auser/Documents/Projects/CodeMonkey/bin/CmDeveloperKit
  Reason: image not found
Trace/BPT trap: 5
logout

[Process completed] 
```

我认为该项目的 CMakeLists.txt 可能没有正确设置以构建 Mac 的可执行文件。我已将其包括在下面：

```
# Includes the common stuff for CodeMonkey
include(CmConfig)

# Set the file description
set(CMDEVELOPERKIT_FILE_DESCRIPTION "CodeMonkey Application")

# Configures this CodeMonkey module
CmModuleConfig(CmDeveloperKit FIND CodeMonkey CodeMonkeyGui)

# Get source files for CodeMonkeyGui
set(PROJECT_SOURCES ${PROJECT_SOURCES} Main.cpp)
# Only add resource files on Windows
if(WIN32)
  # Get header files for CodeMonkeyGui
  set(PROJECT_HEADERS ${PROJECT_HEADERS} CmIcon.h)
  # Get source files for CodeMonkeyGui
  set(PROJECT_RESOURCES ${PROJECT_RESOURCES} CmIcon.rc)
endif(WIN32)

# Add additional include directories
include_directories(${CODEMONKEY_INCLUDE_DIR} ${CODEMONKEYGUI_INCLUDE_DIR} ${ABC_INCLUDE_DIR})
# Add additional link directories
link_directories("${ABC_LIBRARY_DIR}")

# Creates the executable
if(WIN32)
  add_executable(${PROJECT_NAME} WIN32 ${PROJECT_SOURCES} ${PROJECT_HEADERS} ${PROJECT_RESOURCES})
  # Sets entry point to main
  set_target_properties(${PROJECT_NAME} PROPERTIES LINK_FLAGS "/ENTRY:\"mainCRTStartup\"")
else()
  add_executable(${PROJECT_NAME} ${PROJECT_SOURCES} ${PROJECT_HEADERS} ${PROJECT_RESOURCES})
endif(WIN32)

# Add the d in debug
set_target_properties(${PROJECT_NAME} PROPERTIES DEBUG_POSTFIX d)

# Links to the other required libs
target_link_libraries(${PROJECT_NAME} ${CODEMONKEY_LIBRARY} ${CODEMONKEYGUI_LIBRARY} 
                      ${ABC_ARASUPPORT_LIBRARY} ${ABC_ARAGUI_LIBRARY})
# Sets the appropriate dependencies
add_dependencies(${PROJECT_NAME} ${CODEMONKEY_NAME} ${CODEMONKEYGUI_NAME})

# Configure the install procedures
CmModuleInstall() 
```

有人可以让我知道我在上面的文件中遗漏了什么或有问题吗？如果这个文件不是问题，你能指出我正确的修复方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T15:05:14.763

在启动应用程序之前，您应该将包含目录的路径添加`libAbcSupport.dylib`到`DYLD_LIBRARY_PATH`环境变量中。

作为参考，这里是 OS X 手册的[dyld(1)](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/dyld.1.html)手册页。提炼：

> `DYLD_LIBRARY_PATH`
> 
> 这是包含库的目录的冒号分隔列表。动态链接器在搜索库的默认位置之前搜索这些目录。它允许您测试现有库的新版本。
> 
> 对于程序使用的每个库，动态链接器`DYLD_LIBRARY_PATH`依次在每个目录中查找它。如果它仍然找不到库，它会依次`DYLD_FALLBACK_FRAMEWORK_PATH`搜索`DYLD_FALLBACK_LIBRARY_PATH`。

如果您希望它是开箱即用的，即不需要手动设置此变量，那么，例如，您应该简单地将正确的安装过程添加到`CMakeLists`. 默认情况下，`DYLD_LIBRARY_PATH`可能包含一些目录、系统目录和用户目录。只需通过以下方式检查：

```
echo $DYLD_LIBRARY_PATH 
```

并查阅文档，了解哪个目录更适合（或某种传统）在 Mac OS X 上为 3rd 方应用程序部署库。然后您所要做的就是进行编程`CMakeLists`，以便在运行`make install`时将其部署`libAbcSupport.dylib`到这样的目录中。

**注意：**您在 Windows 上不会遇到此问题，因为当 Windows 搜索`PATH`环境变量以查找 DLL 时，它也在应用程序的当前目录中搜索（Mac OS X 和 Linux 都不是这种情况）。换句话说，在 Windows 上，您很可能部署`AbcSupport.dll`在与应用程序相同的目录中，因此不必担心这一点。

**注意：** Linux 在这方面类似于 Mac OS X。因此，如果您也必须将应用程序移植到 Linux，请不要忘记您需要`LD_LIBRARY_PATH`那里。这是Linux Programmer's Manual 的[LD.SO(8)](http://man7.org/linux/man-pages/man8/ld.so.8.html)手册页，以及相关的摘录：

> `LD_LIBRARY_PATH`环境变量包含一个以冒号分隔的目录列表，[动态链接器](http://en.wikipedia.org/wiki/Dynamic_linker)在查找要加载的共享库时搜索这些目录。
> 
> 目录按照提及的顺序进行搜索。
> 
> 如果未指定，则链接器使用默认值，即`/lib:/usr/lib:/usr/local/lib`.

# javascript - 如何在 Foundation 4 Orbit 中捕获滑块事件？

> ID：16045886
> 
> 赞同：1
> 
> 时间：2013-04-16T19:53:40.917
> 
> 标签：javascript, jquery, zurb-foundation

我希望我的页面在滑块中的每张幻灯片上更改一些元素。我设法在桌面版本中通过将函数附加到点击事件来做到这一点，如下所示：

```
$(".orbit-next").on("click", nextChange);
$(".orbit-prev").on("click", prevChange); 
```

但这在触摸幻灯片版本中不起作用:(有谁知道如何实现这一点？我找不到与触摸幻灯片相关的任何事件，也没有任何要调用的函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T16:42:34.733

查看“foundation.orbit.js”，您可以看到它使用的事件。

```
'orbit:after-slide-change.fndtn.orbit'
'orbit:next-slide.fndtn.orbit click.fndtn.orbit'
'orbit:prev-slide.fndtn.orbit click.fndtn.orbit'
'orbit:toggle-play-pause.fndtn.orbit click.fndtn.orbit touchstart.fndtn.orbit' 
'touchstart.fndtn.orbit'
'touchmove.fndtn.orbit'
'touchend.fndtn.orbit' 
```

您可以在轨道使用的元素上使用 jQuery[绑定](http://api.jquery.com/bind/)来收听这些。

```
$("[data-orbit]").bind('orbit:after-slide-change.fndtn.orbit', function(event){
      console.log('slide change', event);
      //alert('slide change', event);

      //do clever stuff
    }); 
```

'after-slide-change.fndtn.orbit' 可能是最有用的，因为它应该在所有设备上触发。（我在 Chrome 和 iPad 上对此进行了测试）。

希望这可以帮助。

# javascript - 在 Javascript 中，延迟函数是否按顺序执行？

> ID：16045888
> 
> 赞同：4
> 
> 时间：2013-04-16T19:53:46.087
> 
> 标签：javascript, ios, prototypejs

我的代码有可能会在短时间内连续推迟两个或多个函数。我可以保证每个延迟函数都会按照我创建它们的顺序执行吗？对于我在 iOS 5 和 6 上的 Web 应用程序，我的代码的正确性依赖于按顺序执行的延迟函数。

我正在使用[Prototype 的 defer](http://prototypejs.org/doc/latest/language/Function/prototype/defer/)，它是使用 0.01 秒的超时实现的。

> “延迟”功能不会立即运行；相反，它会在解释器的调用堆栈为空时立即运行。

从我自己的测试来看，它们似乎是按照我创建它们的顺序执行的。以下确实按顺序打印了从 0 到 99 的所有整数。

**测试代码**

```
for (var i = 0; i < 100; i++) {
    (function(x) {
        return function() {
            console.info(x);
        }
    })(i).defer();
} 
```

**输出**

```
0
1
2
...
88
99 
```

然而，这个结果并不是决定性的。我不知道它在更深层次的功能或不同的 CPU 负载下的表现如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:28:05.360

Prototype.js[`defer()`](https://ajax.googleapis.com/ajax/libs/prototype/1.7.1.0/prototype.js)用作`setTimeout()`其支持代码。

```
function delay(timeout) {
    var __method = this, args = slice.call(arguments, 1);
    timeout = timeout * 1000;
    return window.setTimeout(function() {
            return __method.apply(__method, args);
    }, timeout);
}

//This calls Prototype's delay() function above (which calls setTimeout)
function defer() {
    var args = update([0.01], arguments);
    return this.delay.apply(this, args);
} 
```

setTimeout的[规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout)说顺序是有保证的。然而，许多人声称他们的功能是乱序完成的，因此不同的浏览器可能并不都正确地实现了规范。我假设不能保证订单。

相反，您应该链接您的函数。因此，请执行以下操作：

```
var funcsToRun = [];
var currFunc = 0;

//Add the functions
for ( var i = 0; i < 100; i++ )
{ 
    funcsToRun.push( function(x) {
        return function() {
            console.info(x);
        }
    );
}

//This will chain the execution;
function chain() 
{
    //RUn current function
    funcsToRun[ currFunc ]( currFunc++ );

    //Now do next one if needed
    if ( currFunc < funcsToRun.length ) chain();
}

setTimeout( chain, 10 ); 
```

# for-loop - 为什么简单的 for 循环表达式仅限于整数范围？

> ID：16045889
> 
> 赞同：16
> 
> 时间：2013-04-16T19:53:46.507
> 
> 标签：for-loop, f#, inline, control-flow, imperative-programming

根据 F# 规范（参见[§6.5.7](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc335818859)），简单的 for 循环受整数（`int`又名`int32`aka `System.Int32`）限制`start`和`stop`，例如

```
for i = start to stop do
    // do sth. 
```

我想知道为什么这种类型的 for 循环的迭代边界必须是`int32`. 为什么不允许`uint32`？`int64`? `bigint`?

我知道序列迭代表达式（`for ... in ...`）可以迭代任意序列；然而，这需要分配一个迭代器并调用`MoveNext`and`Current`什么不是，因此可能比普通循环效率低得多（增量计数器，比较，条件跳转）。为避免这种情况，您不得不使用`while`和手动递增循环计数器......

奇怪的是，如果表达式包含在序列表达式中，F#*确实*允许非`int32`循环边界，例如`for`

```
seq { for i = 0I to 10I do
        printfn "%A" i } 
```

所以，我想问题是：是否有特殊原因只允许`int32`循环？为什么这个限制不适用于包含在表达式中的`for`循环？`seq`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T00:34:56.750

我不确定为什么 F# 不允许`int64`范围。这听起来像是一个有用的功能......（但我可以理解这`int`是 C# 中的标准类型，也许 F# 试图遵循这种模式）。

至于解决方法，值得补充的是，您还可以编写`inline`高阶函数：

```
let inline longFor low high f = 
  let rec loop n =
    if n < high then f n; loop (n + 1L)
  loop low 
```

...然后您可以以相当简洁的方式表达范围内的`for`循环：`int64`

```
longFor 1L 100L (fun n -> 
  <whatever> ) 
```

我做了一些实验，似乎 F# 编译器能够相当不错地优化这一点（lambda 函数是内联的，尾递归`loop`函数变成了一个`while`循环）。我不认为这是有*保证*的，因此您可能需要在高性能代码中手动检查这一点，但对于更简单的示例似乎可以正常工作。

只有一个缺点 - 您将无法使用局部可变变量 ( `let mutable`)，因为 lambda 函数无法捕获这些变量。所以间接单元可能会有额外的成本`ref`（但我不确定这是多大的问题）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-22T19:50:15.250

如果要保留 for 循环，可以使用带有[序列范围运算符的](http://msdn.microsoft.com/en-us/library/dd233209.aspx)[for...in](http://msdn.microsoft.com/en-us/library/dd233227.aspx)循环进行非常简单的解决方法：

```
for i in 0I .. 10I do
    printfn "%A" i 
```

只要两种类型匹配，范围运算符将接受任何大小的任何整数。例如，以下将*无法*编译：

```
for i in 0 .. 10I do
    printfn "%A" i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T11:06:50.163

另一种可能的解决方法：

[1L..100L] |> List.iter (fun i -> printfn "%i" i)

# callback - 成员函数作为回调

> ID：16045892
> 
> 赞同：1
> 
> 时间：2013-04-16T19:54:08.230
> 
> 标签：callback, member

我想将实例化对象的成员函数传递给另一个函数。示例代码如下。我对任何可行的策略持开放态度，包括使用 lambda 或 std::bind 从 memberfuncpointertestclass 中的另一个函数调用函数（）。请注意，我不理解我在 google 上找到的关于 lambda 或 std::bind 的大部分线程，所以请尽可能保持简单。另请注意，我的集群没有 C++ 11，我想保持功能（）尽可能简单。谢谢！

```
int functional( int (*testmem)(int arg) )
{
    int a = 4;
    int b = testmem(a);
    return b;
}

class memberfuncpointertestclass
{
public:
    int parm;
    int member( int arg )
    {
        return(arg + parm);
    }
};

void funcpointertest()
{
    memberfuncpointertestclass a;
    a.parm = 3;

    int (*testf)(int) = &a.member;

    std::cout << functional(testf);
}

int main()
{
    funcpointertest();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-02T20:23:30.943

这是`std::function`一个多态函数包装器的工作。将这样的函数对象传递给functional(...)：

```
#include <functional>

typedef std::tr1::function<int(int)> CallbackFunction;

int functional(CallbackFunction testmem)
{
    int a = 4;
    int b = testmem(a);
    return b;
} 
```

然后用于`std::bind`创建一个相同类型的函数对象，该对象包装了实例 a 的 memberfuncpointertestclass::method()：

```
void funcpointertest()
{
    memberfuncpointertestclass a;
    a.parm = 3;

    CallbackFunction testf = std::bind(&memberfuncpointertestclass::member, &a, std::placeholders::_1);

    std::cout << functional(testf);
} 
```

检查[此项目](https://stackoverflow.com/questions/527413/how-boostfunction-and-boostbind-work)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:03:24.667

你不能在没有实例引用的对象上调用方法。因此，您需要传入实例以及要调用的方法。

尝试更改`functional`为：

```
template <typename T, typename M>
int functional(T *obj, M method)
{
    int a = 4;
    int b = (obj->*(method))(a);
    return b;
} 
```

你`funcpointertest`要：

```
void funcpointertest()
{
    memberfuncpointertestclass a;
    a.parm = 3;

    std::cout << functional(&a, &memberfuncpointertestclass::member);
} 
```

# ios - 将 Durandal 与 Phonegap/Cordova 一起使用

> ID：16045894
> 
> 赞同：2
> 
> 时间：2013-04-16T19:54:14.613
> 
> 标签：ios, cordova, durandal

我正在尝试使用 Durandal for IOS（使用 Mac）开发 Cordova/Phonegap 应用程序，但在开始时遇到了一些麻烦。

我已经用 RequireJs 加载了 Cordova，一切正常。这就是我的 main.js 文件中的内容：

```
define(function (require) {

    var
        cordova = require('cordova.ios'),
        system = require('durandal/system'),
        //app = require('durandal/app');

    document.addEventListener('deviceready', onDeviceReady, false);

    function onDeviceReady () {
        alert('Device is Ready!');
    }
}); 
```

请注意，我已将 app = require('durandal/app') 注释掉。如果它被**注释掉**，那么一切正常。但是，一旦我取消注释，我就不再收到警报了。我在 Safari 的网络检查器中没有看到任何异常，而且 app.js 文件似乎已加载，但它阻止了其他所有事情的发生。

我知道文档说您可以使用优化器，但是如果不运行优化器，就没有办法在 XCode 中进行实际开发和测试吗？

提前感谢您的任何帮助或想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T04:43:07.547

我相信cordova中有一个app变量，可能是由于命名冲突。我创建了一个样本，它与 durandal 一起使用。如果它不起作用，请告诉我，我将在 github 上发布示例

# google-mirror-api - 是否可以用任何其他 webfont 覆盖“Roboto”字体？

> ID：16045900
> 
> 赞同：5
> 
> 时间：2013-04-16T19:54:30.480
> 
> 标签：google-mirror-api

根据基本风格[https://mirror-api-playground.appspot.com/assets/css/base_style.css](https://mirror-api-playground.appspot.com/assets/css/base_style.css) “ **Roboto** ”是默认的 Glass 字体。

是否可以使用其他一些网络字体（覆盖 Roboto）？

我确信入口播放器想将“ **Roboto** ”更改为“ **coda_regular** ”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T20:10:48.583

Mirror API 不支持导入字体，客户端中唯一可用的字体确实是 Roboto。

# android - 相机打开并拍照时Android应用程序重新启动

> ID：16045905
> 
> 赞同：2
> 
> 时间：2013-04-16T19:54:53.367
> 
> 标签：android, cordova, mobile-application

我正在使用 DOJO 工具包和 Apache Cordova API 开发移动应用程序来处理特定于设备的代码，例如 Camera 。当相机启动并拍照时应用程序正在重新启动，一旦我们保存图片，应用程序就会从登录屏幕启动。再次应用程序在具有 Android v 4.1.2 的三星 Galaxy 平板电脑上运行良好。但在三星 Galaxy S3 中失败android 版本 4.1.2。感谢您的帮助。

谢谢克里希纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T21:01:00.233

这发生在内存受限的设备上。您是否尝试过foregroundcamera 插件作为替代方案？ [https://code.google.com/p/foreground-camera-plugin/](https://code.google.com/p/foreground-camera-plugin/)

# asp.net - 如何在 svg 对象之上保留 html 控件交互？

> ID：16045910
> 
> 赞同：0
> 
> 时间：2013-04-16T19:55:06.553
> 
> 标签：asp.net, svg, raphael

我有一个 SVG 画布，它应该使我能够在我的 Web 表单上呈现工具，比如量角器。如果我在表单操作 z-index 属性的顶部渲染 SVG 画布，我无法访问我的表单控件，如果我在表单后面渲染 SVG，一旦它从可见区域消失，我就无法访问我的 SVG 对象。以下是图片：

![在此处输入图像描述](https://i.stack.imgur.com/MzwTp.png)

![在此处输入图像描述](https://i.stack.imgur.com/s1ceA.png)

希望问题得到充分描述，如果 SVG 对象正好位于控件顶部，则理想的解决方案是阻止表单控件。

任何帮助表示赞赏。

PS 刚刚发现该页面在 IE 10 上的行为符合预期？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:08:50.943

如果您不需要 SVG 具有任何交互性（单击、鼠标悬停），那么只需为您的 svg 容器添加此 CSS 规则：

```
#your-svg-container-id {
 pointer-events: none;
} 
```

SVG 将对鼠标指针变得“透明”，您可以安全地将其放在表单上。

# python - Django 无法将值形式传递给构造函数

> ID：16045917
> 
> 赞同：1
> 
> 时间：2013-04-16T19:55:23.837
> 
> 标签：python, django

我已经尝试了一切，但我无法将值形式传递给下面的 ContactCSVModel 的构造函数：

```
if request.method == 'POST':
    form = ConfiguratorForm(data=request.POST)

    # Try and import CSV
    ContactCSVModel.import_data(data=file, form=form) 
```

班级...

```
class ContactCSVModel(CsvModel, form):

    first_name = CharField()
    last_name = CharField()
    company = CharField()
    mobile = CharField()
    group = DjangoModelField(Group)
    contact_owner = DjangoModelField(User) 
```

CsvModel 是 Django 适配器的一部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:56:59.463

`class ContactCSVModel(CsvModel, form):`意味着`ContactCSVModel`扩展了一个名为`form`. 我认为这是你真正想要的：

```
class ContactCSVModel(CsvModel):
    # stüfe
    def __init__(self, form):
        # using the form for other stüfe.
        # maybe self.form = form? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:02:07.627

我认为您要做的是使用`form`将数据传递给`ContactCSVModel`并且`ConfiguratorForm`具有相同的字段？如果是这样，你应该把表格变成`ModelForm`

```
class ConfiguratorForm(ModelForm):
    class Meta:
        model = ContactCSVModel 
```

否则，我对你试图做的事情完全迷失了......

例如，目前在`ConfiguratorForm`哪里，`file`从哪里来？

# fuse - FUSE 扩展属性

> ID：16045921
> 
> 赞同：1
> 
> 时间：2013-04-16T19:55:43.240
> 
> 标签：fuse, file-attributes

我正在尝试实现一个 FUSE 文件系统，包括设置/获取扩展文件属性的能力。在这种情况下，我感兴趣的属性是创建一个布尔条件以将文件标记为加密。假设我有一个名为 test.txt 的文件。在终端窗口中，我可以轻松地执行以下操作：

> setfattr -n user.encrypted -v 1 test.txt
> 
> getfattr -n user.encrypted test.txt

并获得输出：

> # 文件：test.txt
> 
> user.encrypted="1"

所以，我知道我的系统已正确设置为使用扩展属性。

但是我一直坚持从 FUSE 中以编程方式设置和获取这些属性。例如，我有以下功能：

```
/* File open operation */
int bb_open(const char *path, struct fuse_file_info *fi)
{
    int retstat = 0;
    int fd;
    int isEncrypted;
    char user[] = "user";
    char encAttr[] = "encrypted";

    fd = open(path, fi->flags);
    if (fd < 0)
        retstat = bb_error("bb_open open");

    log_msg("\nAbout to get encryption attribute\n");  
    /* get the encryption attribute */
    isEncrypted = fgetxattr(fd, user, encAttr, 1);

    log_msg("\nisEncrypted: %d\n", isEncrypted);

    return retstat;
} 
```

当我运行它时，即使从命令行设置了这个属性，fgetxattr 也总是失败（即它返回一个值-1）。我的日志文件中的输出是：

> isEncrypted = -1

显然我错误地调用了这个函数，但我不知道如何纠正这个问题。任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-28T13:54:31.220

您需要在 FUSE 文件系统中实现以下功能：

*   [listxattr](http://fuse.sourceforge.net/doxygen/structfuse__operations.html#ab4a9c361ce48406f07d5a08ab03f5de8)获取支持的扩展属性列表
*   [getxattr](http://fuse.sourceforge.net/doxygen/structfuse__operations.html#ae21503c64fe2990c8a599f5ba339a8f2)获取扩展属性的值

# jsp - 在没有脚本的情况下获取数据到 JSP

> ID：16045922
> 
> 赞同：0
> 
> 时间：2013-04-16T19:55:43.390
> 
> 标签：jsp, model-view-controller

我无法使用 JSTL，我想从我的 JSP 中删除所有 scriptlet 和逻辑。我必须使用自定义 MVC 框架，它类似于 Struts 1。

我正在考虑让控制器处理/委托制作所需的任何 bean，并将它们粘贴在请求中。一旦进入请求并调用 JSP，使用 bean 的最佳方式是什么？

例如，我想用 bean 中设置的值填充一个下拉列表，除了滚动我自己的 taglib 之外，我在这里做一个 scriptlet 的唯一选择是什么？

另外，我需要在页面上将一些值设置为字符串。当请求对象中有一个bean时，是否可以使用jsp:useBean，这是最好的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:12:46.610

在普通的 JSP 中，有三种基本方法可以将数据放到页面上。

1.  Scriptlet，你说你不想使用。
2.  EL，它允许您使用方便的语法访问已存储在其中一个上下文中的变量。例如，如果你有一个 Person bean 存储在请求中的属性名称“person”下，你可以这样做`${person.firstName}`，这相当于`<%=person.getFirstName()%>`
3.  标记库。这些都不难写。但是我不得不想知道为什么你不能使用一个预先存在的标签库，比如 JSTL，它会简化你的很多工作。

# wcf - WCF 流式消息下载时间

> ID：16045926
> 
> 赞同：2
> 
> 时间：2013-04-16T19:55:59.020
> 
> 标签：wcf

我有一个流媒体服务。从操作返回的消息有一个流作为唯一的主体成员，它是文件系统中文件的流。我想知道是否有一种方法可以记录客户端从服务器消耗此类文件所需的时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:57:42.523

您可以采用的一种方法 - 从服务器返回的不仅是流，而且数据结构也包含文件大小。

在客户端 - 您可以使用计时器并根据已读取时间、花费时间与完整文件大小来计算时间。

请参阅此示例： http: [//www.codeproject.com/Articles/20364/Progress-Indication-while-Uploading-Downloading-Fi](http://www.codeproject.com/Articles/20364/Progress-Indication-while-Uploading-Downloading-Fi)

# clojure - 在 Rebol 中，与此 Clojure 映射/应用表达式最接近的匹配是什么？

> ID：16045934
> 
> 赞同：2
> 
> 时间：2013-04-16T19:56:31.800
> 
> 标签：clojure, functional-programming, rebol, rebol3

在将 Clojure 中的函数表达式与 Rebol 并排比较时，我从 clojure-docs.org 上的与 结合使用的示例中偶然发现了[这个](http://clojuredocs.org/clojure_core/clojure.core/apply)`apply`表达式：`map`

```
user=> (map #(apply max %) [[1 2 3] [4 5 6] [7 8 9]])
(3 6 9) 
```

Rebol 最相似的表达方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T20:41:54.317

也许：

```
map-each x [[1 2 3] [4 6 5] [7 8 9]] [apply :reduce [first maximum-of x]] 
```

但是你不需要在`apply`这里使用：

```
map-each x [[1 2 3] [4 6 5] [7 8 9]] [first maximum-of x] 
```

注意。请注意，我将中间列表更改为`[4 6 5]`. 这很重要，因为...

```
maximum-of [4 6 5]   ; => [6 5] 
```

这与`max`Clojure 中的不同（返回列表中找到的最高数字）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T19:56:31.800

Rebol 中的类似表达式是：

```
>> map-each x [[1 2 3] [4 5 6] [7 8 9]] [apply :reduce maximum-of x]
== [3 6 9] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-13T03:41:17.673

```
map-each x [[1 2 3] [4 5 6] [7 8 9]] [first  maximum-of x] 
```

# sql - 我应该在哪里查找使用 htp 包生成的文档

> ID：16045941
> 
> 赞同：0
> 
> 时间：2013-04-16T19:56:52.653
> 
> 标签：sql, database, plsql, oracle11g

我正在一个使用 PL/SQL 中的 htp 包的项目中工作。例如，如果我运行这个程序，网页会出现在哪里？如何查看生成的页面？

```
 CREATE OR REPLACE PROCEDURE hello AS
     BEGIN
         HTP.HTMLOPEN;           -- generates <HTML>
         HTP.HEADOPEN;           -- generates <HEAD>
         HTP.TITLE('Hello');     -- generates <TITLE>Hello</TITLE>
         HTP.HEADCLOSE;          -- generates </HEAD>
         HTP.BODYOPEN;           -- generates <BODY>
         HTP.HEADER(1, 'Hello'); -- generates <H1>Hello</H1>
         HTP.BODYCLOSE;          -- generates </BODY>
         HTP.HTMLCLOSE;          -- generates </HTML>
     END; 
```

如果我运行：

```
 exec owa_util.showpage; 
```

我收到以下错误：

```
 ERROR at line 1:
     ORA-06502: PL/SQL: numeric or value error
     ORA-06512: at "SYS.OWA_UTIL", line 356
     ORA-06512: at "SYS.HTP", line 665
     ORA-06512: at "SYS.HTP", line 759
     ORA-06512: at "SYS.HTP", line 1115
     ORA-06512: at "SYS.OWA_UTIL", line 347
     ORA-06512: at line 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T01:04:47.647

我不知道你是否从 sqlplus 运行。您需要进行一些初始化。尝试这个：

```
set serveroutput on

 DECLARE
 param_val   owa.vc_arr;

 BEGIN
   param_val (1) := 1;
   owa.init_cgi_env (param_val);
    HTP.HTMLOPEN;           -- generates <HTML>
         HTP.HEADOPEN;           -- generates <HEAD>
         HTP.TITLE('Hello');     -- generates <TITLE>Hello</TITLE>
         HTP.HEADCLOSE;          -- generates </HEAD>
         HTP.BODYOPEN;           -- generates <BODY>
         HTP.HEADER(1, 'Hello'); -- generates <H1>Hello</H1>
         HTP.BODYCLOSE;          -- generates </BODY>
         HTP.HTMLCLOSE;          -- generates </HTML>
  htp.showpage ();

 END;
 / 
```

此输出的结果：

```
<HTML>
<HEAD>
<TITLE>Hello</TITLE>
</HEAD>
<BODY>
<H1>Hello</H1>
</BODY>
</HTML> 
```

有关更多详细信息，请参阅 Oracle 论坛中的此[链接](https://forums.oracle.com/forums/thread.jspa?threadID=865491)。

# python - 修改后的“暴力 Python”端口扫描器 - 打印但不运行

> ID：16045946
> 
> 赞同：1
> 
> 时间：2013-04-16T19:57:09.773
> 
> 标签：python, security, port

我已经在 Python 上断断续续有一段时间了（断断续续比断断续续多），但又开始使用“暴力 Python”。我想修改 vuln 扫描器以从端口列表中读取，而不仅仅是使用硬编码列表（此时更多的是出于我自己的理解而非实用性）。

```
#!/usr/bin/python

# Use banner list
# Scan popular ports on a range of hosts

import socket
import sys

if len(sys.argv)==3:
   filename = sys.argv[1]
   print "[+] Reading Vulnerabilities From: "+filename
   filename2 = sys.argv[2]
   print "[+] Reading Ports From: "+filename2

def retBanner(ip, port):
   try:
      socket.setdefaulttimeout(2)
      s = socket.socket()
      s.connect((ip, port))
      banner = s.recv(1024)
      return banner
   except:
      return

def checkVulns(banner):
   f = open(filename,'r')
   for line in f.readlines():
      if line.strip('\n') in banner:
         print "[+] Server is vulnerable: "+banner.strip('\n')
def main():
   f2 = open(filename2,'r')
   for x in range(1,254):
      ip = '192.168.140.' + str(x)
      for port in f2.readlines():
         banner = retBanner(ip, port)
         if banner:
            print "[+] "+ip+": "+banner
            checkVulns(banner)
if __name__ == '__main__':
   main() 
```

这打印，但没有任何反应：

```
root@kali:~/programming/python# ./vuln-scanner-3.py vuln_banners.txt portlist.txt
[+] Reading Vulnerabilities From: vuln_banners.txt
[+] Reading Ports From: portlist.txt 
```

在单独的屏幕会话中，我正在运行 tcpdump，没有结果（界面正确）

```
root@kali:~/programming/python# tcpdump -s0 -vvnn -i eth0 net 192.168.140.0 mask 255.255.255.0 and not 192.168.140.1 and port 22
tcpdump: listening on eth0, link-type EN10MB (Ethernet), capture size 65535 bytes 
```

关于为什么这不能正常运行的任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:39:24.960

你的错误在这里：

```
s.connect((ip, port)) 
```

看看你提供给它什么：

```
for port in f2.readlines(): 
```

您将端口视为字符串！使用前将其转换为 int：

```
s.connect((ip, int(port))) 
```

此外，为您的代码提供两条建议：

1.  将“if len(sys.argv)==3:”块移动到“if **name** ==' **main** ':”块中。

2.  调试时，您可能需要禁用这些尝试...除了查看错误详细信息。

# perl - 如何使用 Perl 在 Apache Lucy 中进行前缀查询？

> ID：16045948
> 
> 赞同：1
> 
> 时间：2013-04-16T19:57:22.433
> 
> 标签：perl, apache-lucy

我正在使用[Apache Lucy](http://lucy.apache.org/)来加速 Web 表单上的预先输入（自动完成）字段。我正在查询近 80 万条记录。我有一个工作设置，但想限制我对以查询字符串开头的术语的响应。目前，查询匹配器要么匹配整个单词，要么如果我使用标记化，`/./`我可以将查询与整个单词的部分进行匹配。

在浏览文档时，我发现[Lucy::Docs::Cookbook::CustomQueryParser](http://p3rl.org/Lucy%3a%3aDocs%3a%3aCookbook%3a%3aCustomQueryParser)。

[在扩展查询语言](http://p3rl.org/Lucy%3a%3aDocs%3a%3aCookbook%3a%3aCustomQueryParser#Extending-the-query-language)标题下的那个页面上，有一个参考`PrefixQuery`。这个包在 Lucy 中不存在，我不得不做更多的搜索。最终，我在 lucy 的 git 存储库中找到了[PrefixQuery.pm代码示例。](https://github.com/apache/lucy/blob/master/perl/sample/PrefixQuery.pm)

请注意，此包引用了另一个不存在的包，名为`Lucy::Search::Tally`. 删除对 tally 的引用使我能够使这个示例正常工作，但它远非功能匹配器。它不处理多个字段，没有评分等……</p>

有谁知道一种方法可以让 Lucy 进行前缀匹配，而无需担心这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:48:10.853

在 Apache 文档中找到了解决方案。

[http://lucy.apache.org/docs/perl/Lucy/Docs/Cookbook/CustomQuery.html](http://lucy.apache.org/docs/perl/Lucy/Docs/Cookbook/CustomQuery.html)

# wpf - 将 CheckBox 内的图像更改为空值

> ID：16045952
> 
> 赞同：0
> 
> 时间：2013-04-16T19:57:35.383
> 
> 标签：wpf, datagrid, checkbox

我有一个 DataGrid，其中 1 列是布尔值，我将其显示为`DataGridCheckBoxColumn`. 我想为空值使用与默认值不同的图像（Windows Server 中的灰色复选标记；Win 7 中的蓝色框等）。或者，如果我可以拥有另一种颜色的实心盒子（比如橙色），那也可以。感谢您的任何指示。

# mysql - ENOENT 与 nodejs mysql 和续集

> ID：16045953
> 
> 赞同：0
> 
> 时间：2013-04-16T19:57:44.747
> 
> 标签：mysql, node.js, node-mysql

我已经为此苦苦挣扎了几天，无法弄清楚出了什么问题。

我在用：

```
-node.js 0.10.4  
-mysql 5.5.29  
-node mysql 2.0.0.alpha7  
-node sequelize 1.6.0 
```

当我尝试执行任何查询时，我会在其中某处收到一条带有 ENOENT 的错误消息。根据我的研究，这似乎是文件系统问题的通用节点错误消息，例如文件不存在或权限不足。我已检查并且我的凭据是正确的。所以，我的创建语句失败，然后当我的应用程序去查询数据库时，没有表存在，我得到类似的东西：

```
Error: connect ENOENT
at errnoException (net.js:883:11)
at Object.afterConnect [as oncomplete] (net.js:874:19)
--------------------
at Handshake.Sequence (/home/greg/snipit/node_modules/mysql/lib/protocol/sequences/Sequence.js:15:21)
at new Handshake (/home/greg/snipit/node_modules/mysql/lib/protocol/sequences/Handshake.js:9:12)
at Protocol.handshake (/home/greg/snipit/node_modules/mysql/lib/protocol/Protocol.js:41:50)
at Connection.connect (/home/greg/snipit/node_modules/mysql/lib/Connection.js:63:18)
at Connection._implyConnect (/home/greg/snipit/node_modules/mysql/lib/Connection.js:162:10)
at Connection.query (/home/greg/snipit/node_modules/mysql/lib/Connection.js:88:8)
at module.exports.connect (/home/greg/snipit/node_modules/sequelize/lib/dialects/mysql/connector-manager.js:247:16)
at Object.pool.Pooling.Pool.create (/home/greg/snipit/node_modules/sequelize/lib/dialects/mysql/connector-manager.js:111:19)
at dispense (/home/greg/snipit/node_modules/sequelize/node_modules/generic-pool/lib/generic-pool.js:216:17)
at Object.me.acquire (/home/greg/snipit/node_modules/sequelize/node_modules/generic-pool/lib/generic-pool.js:260:5) 
```

什么类型的事情通常会导致这种情况？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:08:56.943

我检查了我建立联系的方式，结果发现我有一个错字。我的应用程序从 json 文件中读取凭据，但我不小心将读入的 mysql 密码作为连接端口传递给了我的连接！所以我试图在 localhost:'password' 上连接。哈哈。这解释了为什么我的一半员工没有遇到任何问题……他们没有 mysql 密码，所以连接端口是默认的。

# java - 在用java编写的迷宫游戏中添加分数

> ID：16045954
> 
> 赞同：0
> 
> 时间：2013-04-16T19:57:54.683
> 
> 标签：java, swing, grid, jpanel, paint

我打算用java做一个迷宫游戏。我几乎完成了，但我遇到了添加分数的问题。我已经添加了结束游戏所花费的时间，但它并没有终止。这是我的代码。请帮我打印总时间......

```
package Maze;   
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Board extends JPanel implements ActionListener
 {
     private Timer timer;
     private Map m;
     private Player p;
     private boolean win=false;
     long startTime=0;
     long message=0;

     public Board()
     {
         startTime=System.currentTimeMillis();
         m= new Map();
         p= new Player();
         addKeyListener(new Al());
         setFocusable(true);
         timer=new Timer(25, this);
         timer.start();
     }

     public void actionPerformed(ActionEvent e)
     {
         if(m.getMap(p.getTileX(), p.getTileY()).equals("f"))
         {               
             win=true;
             message=(startTime+10000)-System.currentTimeMillis();
         }

        repaint(); 
     }
     public void paint(Graphics g)
     {
        super.paint(g);
        if(!win&&(System.currentTimeMillis()<=(startTime+10000)))
        {
         for(int y=0;y<14;y++)
         {
             for(int x=0;x<14;x++)
             {
                 if(m.getMap(x,y).equals("f"))
                     g.drawImage(m.getFinish(), x*32, y*32, null);
                 if(m.getMap(x, y).equals("w"))
                        g.drawImage(m.getWall(), x*32, y*32, null);
                if(m.getMap(x, y).equals("g"))
                        g.drawImage(m.getGrass(), x*32, y*32, null);

             }
         }
         g.drawImage(p.getPlayer(), p.getTileX()*32, p.getTileY()*32,null);
        }

            else if(win)
             {
                long end = System.currentTimeMillis();
                long time=end-startTime;
                //String str=Long.toString(time);
                JOptionPane.showMessageDialog(null, "Your Score:"+time);
                //System.exit(0);
                //g.drawImage(m.getWinn(), 32, 32, null);
                //JOptionPane.showMessageDialog(this, "Winner");
             }
        else
        {
            g.drawImage(m.getLose(), 32, 32, null);
        }

     }
     public class Al extends KeyAdapter{

         public void keyPressed(KeyEvent e){

        /*   long startTime1 = System.currentTimeMillis();
             totalTime=(startTime1-startTime)/1000;
             JOptionPane.showMessageDialog(null,totalTime); */   
             int keycode= e.getKeyCode();

             if(keycode==KeyEvent.VK_UP )
             {
                 if(!m.getMap(p.getTileX(),p.getTileY()-1).equals("w"))
                 {
                     p.move( 0, -1);
                 }
             }

             if(keycode==KeyEvent.VK_DOWN )
             {
                 if(!m.getMap(p.getTileX(),p.getTileY()+1).equals("w"))
                 {
                     p.move( 0, 1);
                 }
             }
             if(keycode==KeyEvent.VK_LEFT )
             {
                 if(!m.getMap(p.getTileX()-1,p.getTileY()).equals("w"))
                 {
                     p.move( -1, 0);
                 }
             }
             if(keycode==KeyEvent.VK_RIGHT )
             {
                 if(!m.getMap(p.getTileX()+1,p.getTileY()).equals("w"))
                 {
                     p.move( 1, 0  );    
                 }

             }

         }

     }
 } 
```

这是我的困惑点

```
else if(win)
{
    long end = System.currentTimeMillis();
    long time=end-startTime;
    // String str=Long.toString(time);
    JOptionPane.showMessageDialog(null, "Your Score:"+time);
    // System.exit(0);
    // g.drawImage(m.getWinn(), 32, 32, null);
    //JOptionPane.showMessageDialog(this, "Winner");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:12:31.550

我猜你希望游戏在以下情况下完成：

*   玩家获胜：`win == true`，或
*   时间结束了：`System.currentTimeMillis() <= (startTime+10000)`

如果是这样的话，你的`if`条件。-

```
if (!win && (System.currentTimeMillis() <= (startTime + 10000))) 
```

可以，但是你的 else 分支。-

```
else if(win) 
```

只是：

```
else 
```

反而。换句话说：只要玩家还没有获胜并且还有时间，游戏就继续进行。否则（无论玩家是否获胜），显示得分。

# javascript - 通过 JQuery 替换表行

> ID：16045956
> 
> 赞同：0
> 
> 时间：2013-04-16T19:57:56.013
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, dom

我在替换表格的一行时遇到问题。我正在尝试删除该行，然后通过部分表格的导轨附加新行。新行被附加，但旧行不会被删除。如果未添加另一行，我可以删除该项目，但我相信当函数链接在一起时，它们会按照它们附加的顺序发生。原始行和替换行具有相同的 ID，这就是我认为的导致这个问题，但是应该在附加另一个之前删除一个，我确实认为会有问题。

```
$('#userList')
.remove('#user_<%= @new_user.id %>')
.append("<%=j render :partial=> 'user', :locals => {:user => @new_user, :current_user => @user} %>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:04:25.167

jQuery 正在尝试从单个匹配元素 #userList 的集合中删除 #user_*。你只需要做

```
$('#user_<%= @new_user.id %>').remove(); 
```

**小提琴示例：http:** [//jsfiddle.net/KMzCg/](http://jsfiddle.net/KMzCg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:04:39.723

您要删除的元素是 的子元素`#userlist`，而不是兄弟元素。你将不得不导航到它。

```
$('#userList').find('#user_<%= @new_user.id %>').remove()
    .end().append("<%=j render :partial=> 'user', :locals => {:user => @new_user, :current_user => @user} %>"); 
```

但是直接选择它会更有意义。

```
$('#user_<%= @new_user.id %>').remove();
$('#userList').append("<%=j render :partial=> 'user', :locals => {:user => @new_user, :current_user => @user} %>"); 
```

# c# - 在 3 层控制台应用程序中使用常量或全局变量

> ID：16045962
> 
> 赞同：2
> 
> 时间：2013-04-16T19:58:19.703
> 
> 标签：c#

我有一个带有控制台表示层的 3 层应用程序设置。在我的业务逻辑中，我有一个类，我在其中声明了许多固定的不同变量，即值不会改变。这些变量的值取自应用程序设置。

现在我发现的问题是我的类调用了不同的方法，这些变量通过方法签名传递。这是好习惯吗？如果不是，那么使用常量不是更好吗？如果是这样，常量应该放在哪里，以便我可以在需要它们的地方访问它们，而不是传递变量？

**编辑**

为你们添加一些代码。所以它们是我在这里指的全局变量。

好的，所以在我的控制台应用程序（演示文稿）中，我目前有这样的东西：

```
public class Program
{
    public static void Main(string[] args)
    {
        MainClass myClass = new MainClass(appSetting1, appSetting2, appSetting3);
    }
} 
```

然后在 MainClass 我有：

```
public class MainClass
{
    private string _appSetting1 = string.Empty;
    private string _appSetting2 = string.Empty;
    private string _appSetting3 = string.Empty;

    public MainClass(string appSetting1, string appSetting2, string appSetting3)
    {
        _appSetting1 = appSetting1;
        _appSetting2 = appSetting2;
        _appSetting3 = appSetting3;
    }

    public void MyMethod()
    {
        Method2(_appSetting1, _appSetting2);
        Method3(_appSetting2, _appSetting3);
        Method4(_appSetting1, _appSetting3);
    }
} 
```

我希望你能明白我的意思。我发现自己在多个方法中传递全局变量。我只是认为会有更简单的方法来做到这一点？比如创建一个常量类什么的就行了？我不能 100% 确定最好的方法。

在我的 MainClass 中，我可以像这样声明我的全局变量：

```
 private string _appSetting1 = ConfigurationManager.AppSettings["appsetting1"];
    private string _appSetting2 = ConfigurationManager.AppSettings["appsetting2"];
    private string _appSetting3 = ConfigurationManager.AppSettings["appsetting3"]; 
```

但我真的想在我的业务逻辑中这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:11:06.280

Another possibility is to create a `Settings` class that loads them and exposes them as `public readonly`. This has worked well for me in the past:

```
public class Settings
{
    public static readonly string AppSetting1;
    public static readonly string AppSetting2;
    public static readonly string AppSetting3;

    static Settings()
    {
        AppSetting1 = ConfigurationManager.AppSettings["appsetting1"];
        AppSetting2 = ConfigurationManager.AppSettings["appsetting2"];
        AppSetting3 = ConfigurationManager.AppSettings["appsetting3"];
    }
} 
```

The static constructor is called automatically before the first access to any of the variables, so you don't have to call it explicitly. Your program can access the variables as `Settings.AppSetting1`, etc.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:03:07.287

如果它们在 app.config 中并且不应更改，则应始终从那里引用它们，而不是将它们作为参数传递。这样，您将它们作为静态值的意图在代码中就很清楚了。

编辑

在这种情况下，吉姆斯的回答是有道理的。它实际上只是一个简写，所以不要写 ConfigurationManager.AppSettings["appsetting1"]; 您使用 Settings.AppSetting1。无论哪种方式，如果您在每个类的顶部将它们声明为类级变量，您都会重复自己。尽管您可以扩展它，但我比我更喜欢吉姆的答案。我将所有配置保存在数据库中，然后使用在私有实例构造函数中具有 proc 调用的单例来加载配置。Jims answer 可以稍后实现此功能，而无需更改调用代码。通常配置文件很痛苦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T20:11:36.290

我是无配置的心态。

如果这些事情可能没有改变，那么有一个项目可以引用的程序集返回值。

我回避配置文件。我意识到在部署环境中需要它们，但考虑到您的要求，我会推荐一个通用类库，其他所有*东西都*可以使用和引用。

如果您*确实*必须更改一些假定不变的内容，您可以在一个地方进行更改。

# objective-c - NSTextField 和 NSAttributedString 占位符的奇怪行为

> ID：16045964
> 
> 赞同：1
> 
> 时间：2013-04-16T19:58:25.643
> 
> 标签：objective-c, cocoa, appkit

我正在向 NSTextField 添加一个占位符：

```
NSTextField *textField = [[NSTextField alloc] initWithFrame:NSMakeRect(0.0, 0.0, 100.0, 30.0)];
NSAttributedString *string = [[NSAttributedString alloc] initWithString:@"Hello, World"];
[textField.cell setPlaceholderAttributedString:string]; 
```

这可行，但是当我关注文本字段时，占位符会消失，即使`stringValue`是空的也是如此。

如果我只使用`setPlaceholderString:`方法设置占位符，则占位符会一直保留到`stringValue`不为空为止。

这只是 AppKit 的不良行为还是我错过了什么？

上面是一个简单的例子。我正在使用属性字符串，所以我可以设置字体和颜色属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-11T12:25:46.877

您是否可以为控件指定绑定？如果是，您的占位符属性字符串将被绑定的空占位符覆盖。

然后应该可以以编程方式绑定控件并将属性字符串指定为 null 占位符的选项，如下所示：

```
[textField bind:@"value" toObject:self withKeyPath:@"textFieldValue" options: @{NSNullPlaceholderBindingOption:string}]; 
```

还有一件事。我发现它适用于 10.9 SDK。

# c - 素数回文逻辑效率

> ID：16045966
> 
> 赞同：0
> 
> 时间：2013-04-16T19:58:29.027
> 
> 标签：c, palindrome

我写了一个代码来获得前 1000 个素数回文，虽然我的逻辑是正确的，但我似乎没有得到前 1000 个素数回文，我得到了一些 113 个素数回文，之后我没有得到任何。我认为这是因为我的逻辑不够高效，这就是为什么编译需要这么多时间的原因，但是我已经尝试了三种不同的方法，并且每次运行时在第 113 个素数回文数之后都卡住了。

谁能解释为什么我会遇到这个问题，是因为代码效率不高吗？

```
/* Program to find the first 1000 prime palindromes */

#include<stdio.h>
#include<math.h>

int prime(long int n)
{
    int i,check=0;

    if(n!=2 && n%2==0)
        return 0;

    if(n==2 || n==3)
        return 1;

    for(i=3;i<n/2;i=i+2)
        if(n%i==0)
        check++;

    if(check==0)
      return 1;
    else
    return 0;
}

/*long int reverse_number(long int n,long int partial)
{
if(n==0)
    return partial;
else
    return reverse_number(n/10,partial*10 + n%10);
}*/

int palindrome(long int n)
{
    long int reverse = 0;
    long int n_copy = n;
    int rem;
    while(n_copy!=0)
    {
    rem = n_copy%10;
    reverse = reverse*10;
    reverse = reverse + rem;
    n_copy = n_copy/10;
    }

    if(reverse==n)
    return 1;
    else
    return 0;

} 

int main()
{
    long int i;
    int count=5,digits;

    printf("The 1000 prime palindromes are: \n");
    printf("1\. 2\n2\. 3\n3\. 5\n4\. 7\n");

    for(i=11;;i=i+2)
    {
        if(prime(i))
        {
            if(palindrome(i))
            {
                printf("%d. %ld\n",count,i);
                count++;
            }
            /*if(reverse_number(i,0)==i)
            {
            printf("%d. %ld\n",count,i);
            count++;

            }*/

        }
        if(count==50)
          break;
    }

    printf("\n\n");

    return 0; 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T20:02:29.360

让我在这里引用我的命令式编程教授的话：“您可以检查数字是否是素数和回文，或者检查它是否是回文和素数......”

另外，您在50`break`时进行循环`count`，我想您想在 1000 时执行此操作。

如果不编辑`prime`and`palindrome`函数，除了它们被调用的顺序之外，我的电脑在`781 9989899`.

# asp.net-mvc-3 - 部分视图呈现为完整视图

> ID：16045967
> 
> 赞同：2
> 
> 时间：2013-04-16T19:58:31.597
> 
> 标签：asp.net-mvc-3, jquery, partial-views

MVC 3，阿贾克斯，c#

我的部分视图呈现为新页面，而不是替换搜索结果表。

控制器：

```
public class SearchController : Controller
{
    //
    // GET: /Search/
    private myEntities db = new myEntities();
    private Repository repo = new Repository();

    [HttpGet]
    public ActionResult Index()
    {
        var model = new List<PersonViewModel>();

        model = repo.GetPeople();

        return View(model);
    }

    public PartialViewResult _SearchResult(string fname, string lname)
    {
        var personResult = repo.GetSearchResult(fname, lname);

        return PartialView("_SearchResult", personResult);
    }

} 
```

风景：

```
<div class="page">

    <div class="middle-col-comment-mod">
                <h2>Search Existing Trespassers</h2>

        <div id="search">
            @using (Ajax.BeginForm("_SearchResult", "Search", null, new AjaxOptions { HttpMethod = "Post", InsertionMode = System.Web.Mvc.Ajax.InsertionMode.Replace, UpdateTargetId = "indexSearchResults" }))
            {
                <div class="editor-field">   
                    <label>First Name:</label>
                    @Html.TextBox("FirstName")

                    <label style = "margin-left: 15px;">Last Name:</label>
                    @Html.TextBox("LastName", "", new { style = "margin-right: 15px;" })

                    <input type="submit" name="submit" class="skbutton" value="Search" />

                </div>

            }

        </div>

                    <table id="indexSearchResults" class="data-table">
                        <tr>
                            <th>
                                FirstName
                            </th>
                            <th>
                                LastName
                            </th>
                            <th>
                                Gender
                            </th>
                            <th>
                                City
                            </th>
                            <th>
                                DOB
                            </th>
                            <th>
                                IsStudent
                            </th>
                            <th>
                                Actions
                            </th>
                        </tr>

                    @if (Model.Count() == 0)
                    {
                          <tr>
                            <td colspan=7>
                                There are currently no trespassers in the trespass database.
                            </td>
                          </tr>
                    }
                    else
                    {
                    foreach (var item in Model)
                    {
                        <tr>
                                 <td>
                                @Html.DisplayFor(modelItem => item.FirstName)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.LastName)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Gender)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.DOB)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.School)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.IsStudent)
                            </td>

                            <td>
                                @Html.ActionLink("Edit", "Edit", new { id = item.PersonId }) |
                                @Html.ActionLink("Details", "Details", new { id = item.PersonId }) |
                                @Html.ActionLink("Delete", "Delete", new { id = item.PersonId })
                            </td>
                        </tr>
                    }
                    }
                    </table>

            </div>
    </div> 
```

部分观点：

```
@model IEnumerable<TrespassTracker.Models.PersonViewModel>

<table>
    <tr>
        <th>
            First Name
        </th>
        <th>
            Last Name
        </th>
        <th>
            Gender
        </th>
        <th>
            Date of Birth
        </th>
        <th>
            Is a Student?
        </th>
        <th>
            Actions
        </th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.FirstName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.LastName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Gender)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DOB)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.IsStudent)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { /* id=item.PrimaryKey */ }) |
            @Html.ActionLink("Details", "Details", new { /* id=item.PrimaryKey */ }) |
            @Html.ActionLink("Delete", "Delete", new { /* id=item.PrimaryKey */ })
        </td>
    </tr>
}

</table>

        <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script> 
```

根据我的研究，我发现通常的嫌疑人是部分中缺少 jquery 脚本的链接，但我有。我检查了我的 wed 开发工具上的网络选项卡，发现它正在被调用。还有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:32:44.443

如何使用 jQuery 重新加载您的结果内容，而不是从您的表单中发布？您可以使用 ID 命名一些 div 并将其用作**jQuery.load()**的引用（考虑到您正在使用传递给 Index 操作的 ViewModel）：

1.查看

```
 @model YourModel

 <!-- ... -->

 <div id="search">
     @using (Ajax.BeginForm("MainPostAction", "ControllerName", FormMethod.Post, new { id = "yourFormID" })
     {
         <div class="editor-field">   
             <label>First Name:</label>
             @Html.TextBoxFor(model => model.FirstName)

             <label style = "margin-left: 15px;">Last Name:</label>
             @Html.TextBoxFor(model => model.LastName, new { style = "margin-right: 15px;" })

             <input type="button" name="submit" id="searchButton" class="skbutton" value="Search" />

         </div>
         <div id="results"></div>
     }
</div> 
```

Javascript：

```
$(document).ready(function() {

    $('#searchButton').click(function(event) {
        $('#results').load('@Url.Action('_SearchResult', 'Search')', $('#yourFormID').serialize());            
    });
} 
```

你的动作保持不变。怎么样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:11:26.377

该脚本不会引起任何问题，我在这里看到的唯一错误是表格。您正在尝试用其他返回表格的表格填充表格，请改用 div 来更新 ajax 表单（搜索结果）：

```
<div id="indexSearchResults">
   <table>
     ..........
   </table>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T06:18:15.047

```
Try this 

    <div class="page">

        <div class="middle-col-comment-mod">
                    <h2>Search Existing Trespassers</h2>

            <div id="search">
                @using (Ajax.BeginForm("_SearchResult", "Search", null, new AjaxOptions { HttpMethod = "Post", InsertionMode = System.Web.Mvc.Ajax.InsertionMode.Replace, UpdateTargetId = "indexSearchResults" }))
                {
                    <div class="editor-field">   
                        <label>First Name:</label>
                        @Html.TextBox("FirstName")

                        <label style = "margin-left: 15px;">Last Name:</label>
                        @Html.TextBox("LastName", "", new { style = "margin-right: 15px;" })

                        <input type="submit" name="submit" class="skbutton" value="Search" />

                    </div>

                }

            </div>

                        @if (Model.Count() == 0)
                        {

                            <label>There are currently no trespassers in the trespass database. </label>

                        }
                        else
                        {
                        foreach (var item in Model)
                        {
                           @Html.Partial("__SearchResult",item) 
                        }
                </div>
        </div> 
```

# python - 使用 Python 错误模糊图像

> ID：16045969
> 
> 赞同：1
> 
> 时间：2013-04-16T19:58:35.483
> 
> 标签：python, image-processing, convolution

我需要通过获取内核`K`并对二维数组中的值进行平均并将中心值设置为`K`. 这是我为此编写的代码...

```
def Clamp(pix):
    pix = abs(pix)
    if pix > 255:
        pix = 255
    return pix

def Convolve2D(image1, K, image2):
    img = graphics.Image(graphics.Point(0, 0), image1)
    img.save(image2)
    secondimage=graphics.Image(graphics.Point(0,0),image2)
    h = img.getHeight()
    w = img.getWidth()
    A = [[0]*h for y in range(w)]
    B = [[0]*w for x in range(h)]
    #iterate over all rows (ignore 1-pixel borders) 
    for v in range(1, h-3):
        graphics.update() # this updates the output for each row
        # for every row, iterate over all columns (again ignore 1-pixel borders)
        for u in range(1, w-3):
            #A[u][v] = 0
            #B[u][v] = 0
            # for every pixel, iterate over region of overlap between
            #   input image and 3x3 kernel centered at current pixel
            for i in range (0, 3):
                for j in range (0, 3):
                    A[u][v] = A[u][v] + B[v+i][u+j] * K[i][j]
            r, g, b = img.getPixel(u, v)
            if (r * A[u][v] >= 255):
                Clamp(r)
            else:
                r = r * A[u][v]
            if (g * A[u][v] >= 255):
                Clamp(g)
            else:
                g = g * A[u][v]
            if (b * A[u][v] >= 255):
                Clamp(b)
            else:
                b = b * A[u][v]
            newcolor = graphics.color_rgb(r, g, b)
            secondimage.setPixel(u, v , newcolor)
    print("Not yet implemented") # to be removed
    secondimage.save(image2)
    secondimage.move(secondimage.getWidth()/2, secondimage.getHeight()/2)
    win = graphics.GraphWin(secondimage, secondimage.getWidth(), secondimage.getHeight())
    secondimage.draw(win)

def Blur3(image1, image2):
    K = [[1/9, 1/9, 1/9], [1/9, 1/9, 1/9], [1/9, 1/9, 1/9]]
    return Convolve2D(image1, K, image2) 
```

这是我试图模糊的图像

![在此处输入图像描述](https://i.stack.imgur.com/IZ95A.gif)

这就是我的代码

![在此处输入图像描述](https://i.stack.imgur.com/81wHM.jpg)

是否可能是我的 if 和 else 语句以及正在执行此操作的钳位函数？我只是想要一个模糊的图像像这样出来

![在此处输入图像描述](https://i.stack.imgur.com/Chd3d.gif)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:12:49.553

do this :

```
for v in range(h):
        graphics.update() # this updates the output for each row
        for u in range(w):
             for i in range (0, 3):
                for j in range (0, 3):
                    if v-i>=0 and u-j>=0 and v+i<=256 and u+j<=256  :
                        img[u][v] = img[u][v] + img[v-i][u-j] * K[i][j] 
```

this should work!

Can you please tell me why you have two images A, B and blur image A using B? I mean :

```
 A[u][v] = A[u][v] + B[v+i][u+j] * K[i][j] 
```

Here I add a code which works for gray scale image,you can expand it for your need!

```
import matplotlib.image as mpimg

Img=mpimg.imread('GrayScaleImg.jpg')
kernel=towDimGuassKernel(size)

def conv2D(I,kernel):

    filterWidth=kernel.shape[0]
    half=filterWidth/2

    bluredImg=np.zeros(I.shape)
    for imgRow in range(I.shape[0]):
        print imgRow
        for imgCol in range(I.shape[1]):
            for filterRow in range(filterWidth):
                for filterCol in range(filterWidth):
                    if imgRow-filterRow>=0 and imgCol-filterCol>=0 and imgRow+filterRow<=256 and imgCol+filterCol<=256  :
                        bluredImg[imgRow,imgCol]+=I[imgRow-filterRow,imgCol-filterCol]*kernel[filterRow,filterCol]

    return bluredImg 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:26:47.517

您已经初始化`A`并`B`清空了大小为`0`. 您需要将它们初始化为图像的大小，在两个维度上。

```
A = [[0]*w for y in range(h)] 
```

**编辑：**你的第二个问题是你定义的内核`1/9`是一个整数除法 yield `0`。

# c++ - 删除主文件中的指针

> ID：16045971
> 
> 赞同：-1
> 
> 时间：2013-04-16T19:58:57.140
> 
> 标签：c++, class, pointers

我有一个类`T`，定义了一个析构函数`T`并尝试定义`+`运算符。

我该如何删除`t2`？

还是我应该`T`以另一种方式从函数返回值？

```
T& T::operator + (const T& t1)
{
    T* t2 = new T;
    t2 = this + t1;
    return *t2;
}

void main()
{
    T t1(1,2), t2(3,8);
    cout << (t1 + t2) << endl;
} 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:03:10.663

这里不需要指针。使用对象。通常的习惯用法是`operator+=`作为成员函数和`operator+`自由函数提供：

```
class T {
public:
    T& operator+=(const T& t) {
        // do whatever you need to do to add `t` to `*this`
    return *this;
}

T operator+(const T& lhs, const T& rhs) {
    return T(lhs) += rhs;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:02:27.877

您不想这样做（可能根本不想这样做）。

您要做的是创建一个包含正确值的临时值，然后返回：

```
T T::operator+(const T& t1) const { 
    return value + t1.value;
} 
```

对于典型情况（您希望允许左操作数的转换），您可能希望使用自由函数：

```
T operator+(T const &a, T const &b) { 
    return T(a.val + b.val);
} 
```

请注意，除非`T::val`是公开的（通常是一个糟糕的主意），否则这可能需要成为 T 的朋友。

# .net - .net 表单有时会输出 javascript，但有时不会

> ID：16045980
> 
> 赞同：0
> 
> 时间：2013-04-16T19:59:52.323
> 
> 标签：.net, internet-explorer-10

我有一个 .net 表单，它有一个自动回发的下拉列表。大多数时候一切都很好，我明白了：

```
<td class="frmLabel">Province:</td><td><select name="ctl00$ProvinceDropDown" onchange="javascript:setTimeout('__doPostBack(\'ctl00$ProvinceDropDown\',\'\')', 0)" id="ctl00_ProvinceDropDown"> 
```

但有时（我会在一秒钟内了解情况）我得到这个：

```
<td class="frmLabel">Province:</td><td><select name="ctl00$ProvinceDropDown" id="ctl00_ProvinceDropDown"> 
```

请注意没有执行自动回发的 javascript。

问题发生的唯一时间是在 IE10 上。其他所有浏览器都很好。IE9 浏览器模式或 IE10 兼容模式下的 IE10 也可以。

显然，这感觉就像.Net 没有正确识别 IE10。我知道这个修补程序：

[http://support.microsoft.com/kb/2600100](http://support.microsoft.com/kb/2600100)

但：

a) 我没有得到那些确切的症状，我没有得到“_doPostBack 未定义”。.net 代码根本不生成 javascript 调用。

b）我有另一个沙盒主机，当我将代码移到那里时，一切都很好，即使是 IE10。此主机没有修补程序，并且具有与其他主机相同的 .net 版本（2.0 SP2、3.0 SP2、3.5 SP1）。

ie.browser 文件在两台主机上也有相同的内容，正则表达式行仍然是旧的，据说没有正确检测到 IE10。

```
<capability name="majorversion" match="^[5-9]" /> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:04:48.010

尝试添加`<meta http-equiv="X-UA-Compatible" content="IE=edge" />`到您的`<head>`. 也许甚至 IE=EmulateIE8 只是为了看看这是否有任何效果......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:21:56.230

最后， http: [//support.microsoft.com/kb/2600100](http://support.microsoft.com/kb/2600100)上的修补程序确实解决了这个问题。诡异的。我无法解释为什么我的非热修复主机没有遇到此问题，但我要讨论的最后一件事是没有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T14:04:02.217

编辑 web.config 文件并在`<system.web>`部分添加

```
<browserCaps>
            <case match="IE[ /](?'version'(?'major'\d+)(?'minor'\.\d+)(?'letters'\w*))">
                browser=IE
                version=${version}
                majorversion=${major}
                minorversion=${minor}
                frames=true
                tables=true
                cookies=true
                javascript=true
        javaapplets=true
                activexcontrols=true
                ecmascriptversion=1.5
                vbscript=true
                backgroundsounds=true
                isMobileDevice="true"
                <filter match="[4-9]" with="${major}">
                    ecmascriptversion=1.3
                    css1=true
                    css2=true
                    xml=true

                    <filter match="[5-9]" with="${major}">
                        w3cdomversion=1.0
                    </filter>
                  </filter>
                  <filter match="^b" with="${letters}">
                   beta=true
                </filter>                                                               
             </case></browserCaps> 
```

# google-chrome-devtools - 在 Chrome 中中断异常时如何查看当前异常？

> ID：16045982
> 
> 赞同：3
> 
> 时间：2013-04-16T19:59:56.930
> 
> 标签：google-chrome-devtools

使用 Chrome 的开发人员工具进行调试时，可以为[所有异常](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints#js_exceptions)（或仅[未捕获的](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints#js_uncaught)异常）启用断点。抛出异常时如何查看当前异常详细信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:59:56.930

在 devtools **Scope Variables**面板中，您可以找到`<exception>`，其中将包含异常详细信息。异常的调用堆栈在“**调用堆栈”**面板中可见。 ![具有显示 <exception> 的范围变量的 devtools 的屏幕截图](https://i.stack.imgur.com/kQpVv.png)

# c++ - 如何使用 boost::asio 中的“分块”HTTP 传输协议将文件写入套接字？

> ID：16045988
> 
> 赞同：5
> 
> 时间：2013-04-16T20:00:23.917
> 
> 标签：c++, boost, boost-asio

因此，从[boost HTTP Server 3 示例](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/examples.html)开始，我想修改 connection::handle_read 以支持与消息一起发送正文。但是，这样做的方法对我来说并不明显。我想写一些类似的东西：

```
void connection::handle_read(const boost::system::error_code& e,
    std::size_t bytes_transferred)
{
    ...
 if (result)
    {     
      boost::asio::async_write(socket_, reply.to_buffers(),
          strand_.wrap(
            boost::bind(&connection::write_body, shared_from_this(),
              boost::asio::placeholders::error)));
    }
}

void connection::write_body(const boost::system::error_code& e)
{
    boost::asio::async_write(socket_, body_stream_,
      strand_.wrap(
      boost::bind(&connection::handle_write, shared_from_this(),
      boost::asio::placeholders::error)));
} 
```

哪里`body_stream_`是`asio::windows::stream_handle`。

但是这种方法根本不处理 http 分块（这意味着在每个块之前发送块的大小）。解决这个问题的最佳方法是什么？[我是否为符合boost const 缓冲区](http://www.boost.org/doc/libs/1_43_0/doc/html/boost_asio/reference/ConstBufferSequence.html)要求的 ifstream 编写自己的包装器？或者尝试在循环中模拟`async_write`多次调用的效果？`async_write_some`我应该提到解决方案的一个要求是我在任何给定时间都不会在内存中拥有整个文件 - 只有一个或几个块。

非常新的 ASIO 和套接字，任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T19:20:57.817

将异步编程可视化为函数链而不是循环可能更容易。在分解链时，我发现将操作分成两部分（启动和完成）很有帮助，然后说明潜在的调用路径。这是一个示例说明，它从 中异步读取一些数据，然后通过[HTTP 块传输编码](https://www.rfc-editor.org/rfc/rfc2616#section-3.6.1)`body_stream_`将其写出套接字：

```
void connection::start()
{
  socket.async_receive_from(..., &handle_read);  --.
}                                                  |
    .----------------------------------------------'
    |      .-----------------------------------------.
    V      V                                         |
void connection::handle_read(...)                    |
{                                                    |
  if (result)                                        |
  {                                                  |
    body_stream_.assign(open(...))                   |
                                                     |
    write_header();  --------------------------------|-----.
  }                                                  |     |
  else if (!result)                                  |     |
    boost::asio::async_write(..., &handle_write);  --|--.  |
  else                                               |  |  |
    socket_.async_read_some(..., &handle_read);  ----'  |  |
}                                                       |  |
    .---------------------------------------------------'  |
    |                                                      |
    V                                                      |
void connection::handle_write()                            |
{}                                                         |
    .------------------------------------------------------'
    |
    V
void connection::write_header() 
{
  // Start chunked transfer coding.  Write http headers:
  //   HTTP/1.1\. 200 OK\r\n
  //   Transfer-Encoding: chunked\r\n
  //   Content-Type: text/plain\r\n
  //   \r\n
  boost::asio::async_write(socket_, ...,
    &handle_write_header);  --.
}   .-------------------------'
    |
    V
void connection::handle_write_header(...)
{
  if (error) return;

  read_chunk(); --.
}   .-------------'
    |      .--------------------------------------------.
    V      V                                            |
void connection::read_chunk()                           |
{                                                       |
  boost::asio::async_read(body_stream_, ...,            |
    &handle_read_chunk);  --.                           |
}   .-----------------------'                           |
    |                                                   |
    V                                                   |
void connection::handle_read_chunk(...)                 |
{                                                       |
  bool eof = error == boost::asio::error::eof;          |
                                                        |
  // On non-eof error, return early.                    |
  if (error && !eof) return;                            |
                                                        |
  write_chunk(bytes_transferred, eof);  --.             |
}   .-------------------------------------'             |
    |                                                   |
    V                                                   |
void connection::write_chunk(...)                       |
{                                                       |
  // Construct chunk based on rfc2616 section 3.6.1     |
  // If eof has been reached, then append last-chunk.   |
  boost::asio::async_write(socket_, ...,                |
    &handle_write_chunk);  --.                          |
}   .------------------------'                          |
    |                                                   |
    V                                                   |
void connection::handle_write_chunk(...)                |
{                                                       |
  // If an error occured or no more data is available,  |
  // then return early.                                 |
  if (error || eof) return;                             |
                                                        |
  // Read more data from body_stream_.                  |
  read_chunk();  ---------------------------------------'
} 
```

如上图所示，分块是通过异步链完成的，数据从中读取`body_stream_`，根据 HTTP 分块传输编码规范准备写入，然后写入套接字。如果`body_stream_`仍有数据，则发生另一次迭代。

* * *

我没有要测试的 Windows 环境，但这里有一个 Linux 上的基本完整示例，它一次将数据分块 10 个字节。

```
#include <iostream>
#include <sstream>
#include <string>
#include <vector>

#include <boost/array.hpp>
#include <boost/asio.hpp>
#include <boost/bind.hpp>

using boost::asio::ip::tcp;
namespace posix = boost::asio::posix;

// Constant strings.
const std::string http_chunk_header = 
  "HTTP/1.1 200 OK\r\n"
  "Transfer-Encoding: chunked\r\n"
  "Content-Type: text/html\r\n"
  "\r\n";
const char crlf[]       = { '\r', '\n' };
const char last_chunk[] = { '0', '\r', '\n' };

std::string to_hex_string(std::size_t value)
{
  std::ostringstream stream;
  stream << std::hex << value;
  return stream.str();
}

class chunk_connection
{
public:

  chunk_connection(
      boost::asio::io_service& io_service,
      const std::string& pipe_name)
    : socket_(io_service),
      body_stream_(io_service),
      pipe_name_(pipe_name)
  {}

  /// Get the socket associated with the connection
  tcp::socket& socket() { return socket_; }

  /// Start asynchronous http chunk coding.
  void start(const boost::system::error_code& error)
  {
    // On error, return early.
    if (error)
    {
      close();
      return;
    }

    std::cout << "Opening pipe." << std::endl;
    int pipe = open(pipe_name_.c_str(), O_RDONLY);
    if (-1 == pipe)
    {
      std::cout << "Failed to open pipe." << std::endl;
      close();
      return;
    }

    // Assign native descriptor to Asio's stream_descriptor.
    body_stream_.assign(pipe); 

    // Start writing the header.
    write_header();
  }

private:

  // Write http header.
  void write_header()
  {    
    std::cout << "Writing http header." << std::endl;

    // Start chunked transfer coding.  Write http headers:
    //   HTTP/1.1\. 200 OK\r\n
    //   Transfer-Encoding: chunked\r\n
    //   Content-Type: text/plain\r\n
    //   \r\n 
    boost::asio::async_write(socket_,
      boost::asio::buffer(http_chunk_header),
      boost::bind(&chunk_connection::handle_write_header, this,
        boost::asio::placeholders::error));
  }

  /// Handle writing of http header.
  void handle_write_header(const boost::system::error_code& error)
  {
    // On error, return early.
    if (error)
    {
      close();
      return;
    }

    read_chunk();
  }

  // Read a file chunk.
  void read_chunk()
  {
    std::cout << "Reading from body_stream_...";
    std::cout.flush();

    // Read body_stream_ into chunk_data_ buffer.
    boost::asio::async_read(body_stream_,
      boost::asio::buffer(chunk_data_),
      boost::bind(&chunk_connection::handle_read_chunk, this,
        boost::asio::placeholders::error,
        boost::asio::placeholders::bytes_transferred));
  }

  // Handle reading a file chunk.
  void handle_read_chunk(const boost::system::error_code& error, 
                         std::size_t bytes_transferred)
  {
    bool eof = error == boost::asio::error::eof;

    // On non-eof error, return early.
    if (error && !eof)
    {
      close();
      return;
    }

    std::cout << bytes_transferred << " bytes read." << std::endl;
    write_chunk(bytes_transferred, eof);
  }

  // Prepare chunk and write to socket.
  void write_chunk(std::size_t bytes_transferred, bool eof)
  {
    std::vector<boost::asio::const_buffer> buffers;

    // If data was read, create a chunk-body.
    if (bytes_transferred)
    {
      // Convert bytes transferred count to a hex string.
      chunk_size_ = to_hex_string(bytes_transferred);

      // Construct chunk based on rfc2616 section 3.6.1
      buffers.push_back(boost::asio::buffer(chunk_size_));
      buffers.push_back(boost::asio::buffer(crlf));
      buffers.push_back(boost::asio::buffer(chunk_data_, bytes_transferred));
      buffers.push_back(boost::asio::buffer(crlf));
    }

    // If eof, append last-chunk to outbound data.
    if (eof)
    {
      buffers.push_back(boost::asio::buffer(last_chunk));
      buffers.push_back(boost::asio::buffer(crlf));
    }

    std::cout << "Writing chunk..." << std::endl;

    // Write to chunk to socket.
    boost::asio::async_write(socket_, buffers,
      boost::bind(&chunk_connection::handle_write_chunk, this,
        boost::asio::placeholders::error, 
        eof));
  }

  // Handle writing a chunk.
  void handle_write_chunk(const boost::system::error_code& error,
                          bool eof)
  {
    // If eof or error, then shutdown socket and return.
    if (eof || error)
    {
      // Initiate graceful connection closure.
      boost::system::error_code ignored_ec;
      socket_.shutdown(tcp::socket::shutdown_both, ignored_ec);
      close();
      return;
    }

    // Otherwise, body_stream_ still has data.
    read_chunk();
  }

  // Close the socket and body_stream.
  void close()
  {
    boost::system::error_code ignored_ec;
    socket_.close(ignored_ec);
    body_stream_.close(ignored_ec);
  }

private:

  // Socket for the connection.
  tcp::socket socket_;

  // Stream file being chunked.
  posix::stream_descriptor body_stream_;

  // Buffer to read part of the file into.
  boost::array<char, 10> chunk_data_;

  // Buffer holds hex encoded value of chunk_data_'s valid size.
  std::string chunk_size_;

  // Name of pipe.
  std::string pipe_name_;
};

int main()
{
  boost::asio::io_service io_service;

  // Listen to port 80.
  tcp::acceptor acceptor_(io_service, tcp::endpoint(tcp::v4(), 80));

  // Asynchronous accept connection.
  chunk_connection connection(io_service, "example_pipe");
  acceptor_.async_accept(connection.socket(),
    boost::bind(&chunk_connection::start, &connection,
      boost::asio::placeholders::error));

  // Run the service.
  io_service.run();
} 
```

我有一个小 html 文件，它将通过分块编码提供，一次 10 个字节：

```
<html>
<body>
  Test transfering html over chunked encoding.
</body>
</html> 
```

运行服务器：

```
$ mkfifo example_pipe
$ sudo ./a.out &
[1] 28963
<open browser and connected to port 80>
$ cat html > example_pipe 
```

服务器的输出：

```
打开管道。
编写 http 标头。
从 body_stream_ 读取...读取 10 个字节。
写块...
从 body_stream_ 读取...读取 10 个字节。
写块...
从 body_stream_ 读取...读取 10 个字节。
写块...
从 body_stream_ 读取...读取 10 个字节。
写块...
从 body_stream_ 读取...读取 10 个字节。
写块...
从 body_stream_ 读取...读取 10 个字节。
写块...
从 body_stream_ 读取...读取 10 个字节。
写块...
从 body_stream_ 读取...读取 7 个字节。
写块...
```

wireshark 输出显示没有格式错误的数据：

```
0000  48 54 54 50 2f 31 2e 31  20 32 30 30 20 4f 4b 0d   HTTP/1.1  200 OK.
0010  0a 54 72 61 6e 73 66 65  72 2d 45 6e 63 6f 64 69   .Transfe r-Encodi
0020  6e 67 3a 20 63 68 75 6e  6b 65 64 0d 0a 43 6f 6e   ng: chun ked..Con
0030  74 65 6e 74 2d 54 79 70  65 3a 20 74 65 78 74 2f   tent-Typ e: text/
0040  68 74 6d 6c 0d 0a 0d 0a  61 0d 0a 3c 68 74 6d 6c   html.... a..<html
0050  3e 0a 3c 62 6f 0d 0a 61  0d 0a 64 79 3e 0a 20 20   >.<bo..a ..dy>.  
0060  54 65 73 74 0d 0a 61 0d  0a 20 74 72 61 6e 73 66   Test..a. . transf
0070  65 72 69 0d 0a 61 0d 0a  6e 67 20 68 74 6d 6c 20   eri..a.. ng html 
0080  6f 76 0d 0a 61 0d 0a 65  72 20 63 68 75 6e 6b 65   ov..a..e r chunke
0090  64 0d 0a 61 0d 0a 20 65  6e 63 6f 64 69 6e 67 2e   d..a.. e ncoding.
00a0  0d 0a 61 0d 0a 0a 3c 2f  62 6f 64 79 3e 0a 3c 0d   ..a...</ body>.<.
00b0  0a 37 0d 0a 2f 68 74 6d  6c 3e 0a 0d 0a 30 0d 0a   .7../htm l>...0..
00c0  0d 0a                                              .. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T03:01:59.020

该示例非常简单，只是为了向您展示如何简单地处理 HTTP 请求。此示例不支持分块传输编码。给你一些建议：

*   要了解什么是块传输编码，您可以在 RFC2616 的第 3.6 节中找到它。
*   发送前做一些事情：设置 HTTP 标头以指示使用 Chunked Transfer Encoding 的 reapons 消息；使用 Chunked Transfer Encoding 对您的数据进行编码。

逻辑将是这样的：

```
std::string http_head;
std::string http_body;

char buff[10000];
read_file_to_buff(buff);
set_http_head_values(http_head);
encode_chunk_format(buff,http_body);

boost::asio::async_write(socket_,
    boost::asio::buffer(http_head.c_str(), http_head.length()),
    boost::bind(&connection::handle_write, shared_from_this(),
    boost::asio::placeholders::error);

boost::asio::async_write(socket_,
    boost::asio::buffer(http_body.c_str(), http_body.length()),
    boost::bind(&connection::handle_write, shared_from_this(),
    boost::asio::placeholders::error); 
```

当你测试你的程序时，你可以使用 Fiddler2 来监控 http 消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T18:32:29.347

所以我想出的解决方案是有 2 个写函数 -`write_body()`和`write_complete()`. 读取完成后，假设我们要发送一个正文，我们调用

```
body_fp_.open(bodyFile);
async_write(get_headers(), write_body) 
```

在 write_body 中，我们执行类似的操作

```
vector<boost::asio::const_buffer> buffers;
body_fp_.read(buffer_, buffer_.size())
buffers.push_back(...size, newlines, etc...);
buffers.push_back(buffer_, body_fp_.gcount()); 
```

一旦我们完成文件内容的写入，最后一次写入：

```
boost::asio::async_write(socket_, boost::asio::buffer(misc_strings::eob),
            strand_.wrap(
            boost::bind(&connection::write_complete, shared_from_this(),
            boost::asio::placeholders::error))); 
```

这似乎工作得很好，并且减轻了对内存使用的担忧。对此解决方案的任何评论表示赞赏；希望这将有助于将来遇到类似问题的其他人。

# zend-framework - 将此 Zend Gdata 代码从 ZF 迁移到 ZF2

> ID：16045997
> 
> 赞同：1
> 
> 时间：2013-04-16T20:01:03.733
> 
> 标签：zend-framework, zend-framework2

很抱歉提出这么糟糕的问题，但我花了 2 个小时没有成功。Zend Docs 太可怕了……

我发现这个[Zend_Gdata 库和 Picasa 数据 API -- loader.php 文件丢失](https://stackoverflow.com/questions/12346180/zend-gdata-library-and-picasa-data-api-loader-php-file-missing)，但它在第 2 行崩溃 Class 'Application\Controller\Zend\Loader\StandardAutoloader' not found，这显然不是正确的路径。

我不确定为什么 ZF 不使用 ...\vendor\ZF2\library\Zend\Loader\

我正在使用[https://github.com/zendframework/ZendSkeletonApplication](https://github.com/zendframework/ZendSkeletonApplication)，它正在工作，但是 zf2 没有其他方法可以开箱即用，并且所有帮助主题的描述都不完整。我的眼里一片混乱……

但是这里是代码。

```
//Change this for your domain
$domain = 'yourdomain.com';
$email = 'ad...@yourdomain.com';
$passwd = 'p@ssword';
$user = 'jsmith';
$newuserpassword = 'secretp@assword';

//Connect as admin to Google Apps
require_once 'Zend/Loader.php';
Zend_Loader::loadClass('Zend_Http_Client');
Zend_Loader::loadClass('Zend_Gdata');
Zend_Loader::loadClass('Zend_Gdata_ClientLogin');
Zend_Loader::loadClass('Zend_Gdata_Gapps');
try {
  $client = Zend_Gdata_ClientLogin::getHttpClient($email, $passwd,     Zend_Gdata_Gapps::AUTH_SERVICE_NAME);
} catch (Zend_Gdata_App_CaptchaRequiredException $cre) {
    echo 'URL of CAPTCHA image: ' . $cre->getCaptchaUrl() . "\n";
    echo 'Token ID: ' . $cre->getCaptchaToken() . "\n";
} catch (Zend_Gdata_App_AuthException $ae) {
   echo 'Problem authenticating: ' . $ae->exception() . "\n";
}
$gdata = new Zend_Gdata_Gapps($client, $domain);

//Now change the user's password
$updateUser = $gdata->retrieveUser($user);
$updateUser->login->password = $newuserpassword;
$updateUser = $updateUser->save(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-23T12:46:21.227

There's a new API that you can use even if Zend 1 or 2:

[https://github.com/google/google-api-php-client](https://github.com/google/google-api-php-client)

Here's the page with installation instructions and a getting started:

[https://developers.google.com/api-client-library/php/](https://developers.google.com/api-client-library/php/)

And here are the available services:

[https://github.com/google/google-api-php-client/tree/master/src/Google/Service](https://github.com/google/google-api-php-client/tree/master/src/Google/Service)

Hope it help.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:34:50.423

zf2 中没有 Zend_Loader 之类的东西，您发布的代码是针对 zf1 的。如果您的准系统应用程序正常工作，那么您将已经让自动加载器正常工作（我假设您正在使用 MVC，并且此代码将进入控制器，而不是单个文件）。

如果您正确设置了自动加载器，您也不需要使用`Zend_Loader::loadClass`.. 因为它们会自动加载。

至于 zf2 中的 Gdata - 您需要获取包，可以在此处找到[https://packages.zendframework.com/](https://packages.zendframework.com/)。好的说明在这里：[Zend Framework 2.0.2 YouTube API](https://stackoverflow.com/questions/13007510/zend-framework-2-0-2-youtube-api)

将代码从 zf1 转换为 zf2 应该很容易。

但是，不幸的是 gdata 包不再维护，因此建议您使用[https://code.google.com/p/google-api-php-client/](https://code.google.com/p/google-api-php-client/)

# vector - 为什么我会收到此错误 - MATLAB

> ID：16045999
> 
> 赞同：0
> 
> 时间：2013-04-16T20:01:08.623
> 
> 标签：vector, matlab

我有图像和矢量

```
a = imread('Lena.tiff');
v = [0,2,5,8,10,12,15,20,25]; 
```

还有这个 M 文件

```
function y = Funks(I, gama, c)
[m n] = size(I);
for i=1:m
    for j=1:n
        J(i, j) = (I(i, j) ^ gama) * c;
    end
end
y = J;
imshow(y); 
```

当我尝试这样做时：

```
f = Funks(a,v,2) 
```

我收到此错误：

```
??? Error using ==> mpower
Integers can only be combined with integers of the same class, or scalar doubles.

Error in ==> Funks at 5
        J(i, j) = (I(i, j) ^ gama) * c; 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:03:52.107

There are two ways I would follow:

1) `arrayfun`

```
results = arrayfun(@(i) I(:).^gama(i)*c,1:numel(gama),'UniformOutput',false);
J = cellfun(@(x) reshape(x,size(I)),results,'UniformOutput',false); 
```

2) `bsxfun`

```
results = bsxfun(@power,I(:),gama)*c;
results = num2cell(results,1);
J = cellfun(@(x) reshape(x,size(I)),results,'UniformOutput',false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:33:52.830

您尝试做的事情在数学上毫无意义。您正在尝试将*vector*分配给*number*。您的问题不在于 MATLAB 编程，而在于您要尝试做的事情的定义。

如果您尝试生成多个图像`J`，每个图像对应于`gamma`应用到图像的某个图像，您应该按以下方式进行操作：

```
function J = Funks(I, gama, c)
[m n] = size(I);

% get the number of images to produce
k = length(gama);

% Pre-allocate the output
J = zeros(m,n,k);

for i=1:m
    for j=1:n
        J(i, j, :) = (I(i, j) .^ gama) * c;
    end
end 
```

最后你会得到图像`J(:,:,1)`，`J(:,:,2)`等等。

如果这不是您想要做的，请先弄清楚您的方程式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T20:09:53.063

该错误是由于您试图将数字提高到矢量幂而引起的。翻译后（即用函数调用中的实际参数替换形式参数），它将类似于：

```
J(i, j) = (a(i, j) ^ [0,2,5,8,10,12,15,20,25]) * 2 
```

Element-wise power`.^`也不起作用，因为您将尝试将向量“卡”到标量容器中。

**稍后编辑：**如果您想将每个伽玛应用于您的图像，也许这个循环更直观（虽然不是最有效的）：

```
a = imread('Lena.tiff');        % Pics or GTFO
v = [0,2,5,8,10,12,15,20,25];   % Gamma (ar)ray -- this will burn any picture

f = cell(1, numel(v));  % Prepare container for your results

for k=1:numel(v)
    f{k} = Funks(a, v(k), 2);  % Save result from your function
end;
% (Afterwards you use cell array f for further processing) 
```

或者您可以查看此处发布的其他（如果可能不是更清晰，则更有效）解决方案。

**后来（呃？）编辑：**如果您的 tiff 文件是 CYMK，则结果`imread`是[MxNx4](http://www.mathworks.nl/help/matlab/ref/imread.html#f25-721031)颜色矩阵，必须以不同于通常的方式处理（因为它是 3 维的）。