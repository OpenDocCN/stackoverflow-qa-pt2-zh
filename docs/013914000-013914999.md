# StackOverflow 问答 13914000-13914999

# extjs - ExtJS GridPanel 数据工具提示

> ID：13914009
> 
> 赞同：2
> 
> 时间：2012-12-17T12:15:41.630
> 
> 标签：extjs, tooltip, extjs3, gridpanel, extjs-grid

我想将工具提示添加到我的网格面板的数据中。我想把地图放在工具提示面板上，我明白了，但是我的静态地图的宽度是 600px，它从工具提示面板溢出。我使用下面的代码，它工作正常，但不能设置工具提示的宽度。我能怎么做？

```
this.renderToolTip = function(argVal, metadata, record, rowIndex, colIndex, store)
{
    var toolTipImg = '<img src="http://maps.googleapis.com/maps/api/staticmap?markers=color:green%7C' + record.data.latitude + ',' + record.data.longtitude + '&zoom=15&size=600x200&sensor=false" />';
    var title = record.data.title;

    return '<div ext:qtitle="' + title + '" ext:qtip="' + toolTipImg + '">' + argVal + '</div>';
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:21:10.563

试试这个：

...

```
ext:qwidth="100" 
```

...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-03T12:03:35.110

对于 ExtJs4，这里是属性：

```
 tagConfig : {
        namespace : "data-",
        attribute : "qtip",
        width : "qwidth",
        target : "target",
        title : "qtitle",
        hide : "hide",
        cls : "qclass",
        align : "qalign",
        anchor : "anchor"
    }, 
```

不要忘记致电：

```
Ext.tip.QuickTipManager.init(); 
```

在您的代码开始时。

使用示例：

```
meta.tdAttr = "data-qtip='texttttt' data-qtitle='title' data-qwidth=140"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-25T07:24:17.733

> m.tdAttr = 'data-qwidth="160" data-qtip="'

# java - 在 Java 中解析 HTML 数据，包括 < 和 > 标签？

> ID：13914010
> 
> 赞同：1
> 
> 时间：2012-12-17T12:15:44.820
> 
> 标签：java, html-parsing, htmleditorkit

我想用 Java 解析 HTML 文本。

我尝试使用**javax.swing.text.html.HTMLEditorKit**解析 HTML 数据。它帮助我从 HTML 中获取数据。但我有一个 HTML 数据，比如 -

```
&lt;span class="TitleServiceChange" &gt;Service Change&lt;/span&gt;
                    &lt;span class="DateStyle"&gt;
                    &amp;nbsp;Posted:&amp;nbsp;12/16/2012&amp;nbsp; 8:00PM
                    &lt;/span&gt;&lt;br/&gt;&lt;br/&gt;
                  &lt;P&gt; 
```

周围有**'<'**和**'>'** 而不是**'<'**和**'>'**

在解析上述文本时，我收到错误 -

```
Parsing error: start.missing body ? ? at 
```

请建议我解决我的问题。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T12:59:25.060

要取消转义字符串中包含的全部转义字符，您可以使用[Apache Commons Lang](http://commons.apache.org/lang/api-3.1/index.html)实用程序库。

具体来说，使用[StringEscapeUtils](http://commons.apache.org/lang/api-3.1/org/apache/commons/lang3/StringEscapeUtils.html)类，您可以在其中找到`unescapeHtml4`方法等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T12:21:28.490

如果您可以获得`String`数据的表示，用正确的标签替换它可以解决您的问题：

```
String htmlData = ...

htmlData = htmlData.replaceAll("&lt;", "<");
htmlData = htmlData.replaceAll("&gt;", ">"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T12:34:22.000

HTML 可以用 XML 术语来描述。XML 有*字符数据*的概念，显然是由*字符*组成的。在 XML 中有五个具有特殊含义的字符：`>`、`<`、`&`和- 这些字符用于定义元素`"`和`'`分隔属性，因此解析器不会将它们视为*普通*字符。当您需要`<`在 XML 文档中插入文字时（就像我刚刚在这个答案中所做的那样），您可以在表单中使用*字符引用*`&lt;`，以便浏览器了解您不愿意启动 XML 标记。在 HTML4 DTD 中有[252 个命名实体](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML)，因此使用它`replaceAll()`来具有*可读性是不可行的*细绳。

您最好了解 HTML 是如何工作的，这样当您必须构建数据的存储和呈现时，您就可以像 Web 浏览器一样思考。注意：

```
&lt;tag&gt; 
```

有**非常不同的**含义

```
<tag> 
```

因此，您最好对您的问题进行论证，以获得正确方向的帮助。

# kernel - 内核空间中的词法分析器生成器

> ID：13914011
> 
> 赞同：0
> 
> 时间：2012-12-17T12:15:47.297
> 
> 标签：kernel, solaris, lex, flex-lexer

内核模块化调试器 (kmdb) 使用 lex 生成词法分析器以*从内核空间*[1] 使用。有一些 hack，其中一些甚至不兼容 POSIX。

我有问题：

1.  在内核模式下使用 lex 有哪些陷阱？
2.  flex [2] 有什么合理的方法可以采用 [1] 吗？
3.  内核空间的 lex/flex 有哪些替代方案？

（最后我将构建和使用 illumos 的 lex，但我真的想避免它）

[1] [https://github.com/illumos/illumos-gate/blob/master/usr/src/cmd/mdb/common/mdb/mdb_lex.l](https://github.com/illumos/illumos-gate/blob/master/usr/src/cmd/mdb/common/mdb/mdb_lex.l)

[2] [https://github.com/westes/flex/](https://github.com/westes/flex/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:55:47.873

您应该能够使用类似 illumos lex 文件中的 hack 来从 flex 中夺取对 I/O 的控制权。或者您可以只使用 flex 的字符串缓冲区功能。[请参阅flex 手册](http://westes.github.io/flex/manual/Multiple-Input-Buffers.html#Scanning-Strings)中的 yy_scan_string 和 yy_scan_buffer 。

`yy_scan_string`将导致 flex 复制字符串，这可能是必要的，因为 flex 会在执行过程中修改缓冲区的内容。如果您不关心这一点，并且您想避免复制*并且*您可以在输入末尾放置*两个NUL 而不是一个，那么您可以使用*`yy_scan_buffer`

flex 手册中还有一节介绍了如何提供自己的内存分配功能（“ [Overriding The Default Memory Management](http://westes.github.io/flex/manual/Overriding-The-Default-Memory-Management.html#Overriding-The-Default-Memory-Management) ”），这可能也是必要的。Flex 不会分配除缓冲区以外的太多内存，如果您提供自己的缓冲区，则可以将 Flex 的缓冲区大小任意小。这应该可以从固定长度的字节数组中分配内存；我不知道你能做到多小，但我猜如果你小心的话，你应该能够把它缩小到几百字节。

# iphone - 如何以编程方式密码锁定我的 iPhone 屏幕？

> ID：13914015
> 
> 赞同：1
> 
> 时间：2012-12-17T12:16:12.210
> 
> 标签：iphone, ios

我有很多类似的问题，但没有一个回答我的问题。大多数是无关的。这是我的场景。假设有人偷了你的手机，他不小心打开了一个应用程序。当他点击应用程序中的按钮时，手机将被锁定。现在手机会要求输入安全密码或密码。我想知道我该怎么做去做？即使手机重新启动，手机也必须保持锁定状态。我只是想要一种锁定屏幕并使 iphone 对那个骗子无用的方法。我知道苹果不提供这样的功能。是否有任何好的私有 API 可用？

我不是在寻找任何应用程序来做到这一点，我想通过我的代码来做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T12:26:46.637

苹果永远不会批准你想做的事。您的应用必须在越狱模式下使用。

您可以通过在您的项目上调用私有框架 - GraphicsServices.framework 来做到这一点。但是，请注意，Apple 永远不会接受和批准这种做法。通过调用 GSEventLockDevice() 方法，您可以轻松锁定您的 iOS 设备。GSEventLockDevice() 函数位于 GSEvent.h 中。希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T12:20:53.297

您不需要应用程序，因为您已经可以为此目的使用 iCloud：[iCloud：锁定和跟踪您的设备](http://support.apple.com/kb/PH2700)

更具体地说，你不能自己做（除非你正在越狱你的手机），因为 iOS 应用程序是沙盒的，可能不会限制对整个系统的访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T12:22:36.273

您可以密码保护您的应用程序，但不能保护整个手机。要锁定整个手机，用户可以从设置->常规->密码锁定中设置密码。这些应用程序是沙盒化的，因此您无法从您的应用程序访问密码。

# entity-framework - OData / WCF 数据服务验证策略

> ID：13914016
> 
> 赞同：1
> 
> 时间：2012-12-17T12:16:18.770
> 
> 标签：entity-framework, wcf-data-services, odata

我们正在构建一个 WCF 数据服务，该服务应该为任何类型的消费者客户端提供服务，从 WPF 桌面应用程序到以 .net 和非 .net 语言编写的智能手机和平板电脑客户端。

在设置 WCF 数据服务之后，我们正在寻找一种**将实体框架模型验证代码中发生的验证错误传输回我们正在使用的 WPF 应用程序**的标准方法。我们的目标是通过从 DbContext.SaveChanges() 调用中获取所有验证错误**，一次性**为 UI 元素（绑定）提供验证错误。

您能否建议如何使用实体框架模型在 wcf 数据服务中传输验证错误？是否有任何东西正在为WCF RIA 提供的此类功能提供**开箱即用的支持？**

到目前为止我发现的关于这个主题的内容

OData 中的词汇表 [http://www.odata.org/blog/vocabularies-in-odata](http://www.odata.org/blog/vocabularies-in-odata)

验证策略 [http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataservices/thread/73dcb4c2-f788-44d4-9d99-f4ba2a5cef55?prof=required](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataservices/thread/73dcb4c2-f788-44d4-9d99-f4ba2a5cef55?prof=required)

返回验证结果 [http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataservices/thread/ef6479b8-e79e-4e4d-a645-4ad73195af90?prof=required](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataservices/thread/ef6479b8-e79e-4e4d-a645-4ad73195af90?prof=required)

非常感谢任何帮助或建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:38:40.070

我相信这篇文章解释了如何实现这一点；

[在 WCF 数据服务中处理实体框架验证](http://msdn.microsoft.com/en-us/magazine/hh580732.aspx)

# ruby-on-rails - Mongoid 相当于 ActiveRecord 的 `first_or_initialize`

> ID：13914019
> 
> 赞同：2
> 
> 时间：2012-12-17T12:16:48.967
> 
> 标签：ruby-on-rails, activerecord, mongoid

我只是想知道是否有人知道轨道的 activerecord-query-interface 方法的 mongoid 等价物`first_or_initialize`。

如何在 Mongoid 中实现相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-22T19:40:45.570

从 Mongoid 3.1 开始，有一个 first_or_initialize 方法，就像 ActiveRecord 一样（它需要多个参数）：

```
Band.where(name: "Photek").first_or_initialize 
```

取自： http: [//mongoid.org/en/mongoid/docs/querying.html#query_plus](http://mongoid.org/en/mongoid/docs/querying.html#query_plus)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:26:26.553

Model.find_or_initialize_by（属性：值）。您甚至可以在该调用中使用多个属性 - (a1: v1, a2: v2...an: vn)。

干杯!

# c# - 使用文本块向文本添加工具提示

> ID：13914021
> 
> 赞同：0
> 
> 时间：2012-12-17T12:16:58.240
> 
> 标签：c#, windows-8, tooltip

我正在尝试使用以下方式工作的词汇表来实现应用程序。内容显示在文本块中，其中的内容是我想附加工具提示的单词，因此当用户点击它们时，会显示定义。我不知道该怎么做，因为到目前为止我所阅读的所有内容都让我认为工具提示只能添加到控件中。这是正确的吗？

我也一直在阅读有关工具提示的指南，但我不确定我想做的事情是否符合这些指南。

我将不胜感激有关此的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:26:33.783

在这种情况下，我认为工具提示对您来说不是一个好的解决方案。您可能应该在每个项目的模板内创建一个不可见的控件，其中包含您想要显示为“工具提示”的所有信息。

然后你抓住点击事件或其他任何东西，并切换“工具提示”控件的可见性。

如果你对这个解决方案没问题，我在家时可能会给你一些示例代码:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T12:27:59.107

当您在文本块中写入内容时。只需记下包含定义的文本的位置。然后，当鼠标指针移到该位置时，只需使用鼠标悬停事件在工具提示中显示定义。

这是我的知识...

# javascript - 右列高度等于左列

> ID：13914025
> 
> 赞同：0
> 
> 时间：2012-12-17T12:17:18.500
> 
> 标签：javascript, html, css

我有两列，我想将右列的高度调整为与`left`. `right`柱子从底部切下。

这里有一些截图来显示我的问题：

![在此处输入图像描述](../Images/f3615b4f318cdd8b93a8b72363956d7f.png)

![在此处输入图像描述](../Images/34276a0aaa04714d19317b96e342a626.png)

[JS小提琴](http://jsfiddle.net/bKKxy/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:22:23.387

```
var s = document.getElementById("leftcolumn").offsetHeight; // you can change leftcolumn here with your left column id
document.getElementById("rightcolumn").style.height = s+"px"; // you can change rightcolumn here with your right column id 
```

# c++ - C++ 模板类是否为使用的每种指针类型重复代码？

> ID：13914030
> 
> 赞同：11
> 
> 时间：2012-12-17T12:17:42.817
> 
> 标签：c++, templates

据我了解，例如，如果您有 an`std::vector<int>`和 an `std::vector<float>`，编译器会创建两个类，每种类型一个。因此，尽管您减少了编写的代码量，但并没有减少可执行文件的大小（如果我错了，请纠正我）。

即使类型是指针也一样吗？例如，实例化 an`std::vector<SomeClass*>`和 an`std::vector<SomeOtherClass*>`必然会导致编译器为两个实例中的每一个生成单独的代码吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T12:53:11.497

这是一个依赖于实现的模拟优化，因此是允许的！

事实上，这甚至不必由编译器完成。标准库可以这样实现。例如，一个实现可以使用`std::is_pointer`然后将所有内容推迟到一个基于单个`void*`的实现。（这是[薄模板](http://en.wikibooks.org/wiki/More_C++_Idioms/Thin_Template)成语）。事实上，在库端这样做似乎比编译器在实例化后合并代码更可行，但这也是可能的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T12:28:01.647

编译器从模板中实例化与您的程序使用的一样多的类。但是，生成到可执行文件中的代码与程序中存在哪些类略有不同。

在实践中，大多数操作`vector`都是内联的。因此，可执行文件大小可能不会根据从该模板实例化的不同类的数量而发生*很大变化，因为大部分代码大小是每个函数调用站点而不是每个不同的类。*但就它而言，它取决于实例化的数量，`vector<SomeClass*>`并且`vector<SomeOtherClass*>`是不同的类。

如果您对 进行显式实例化`vector`，则将为该类生成*所有*成员函数。如果您寻找它，您可能会看到代码大小的差异。但通常您不会显式实例化模板类，因此只会生成您使用的成员函数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-17T12:34:03.037

允许编译器生成一组代码来实现模板的两个实例化，前提是生成的行为是正确的。这可能发生在指针类型和非指针类型上。它可以为模板类中的每个例程（又名“方法”）独立发生。

可能很难确定何时会发生这种情况，编译器可能会也可能不会意识到这样做的机会。

例如，如果例程仅复制一个类，就像赋值运算符通常所做的那样，那么可以将相同的代码用于类数据具有相同大小的模板的任何实例化。在某些处理器上，添加两个`int`对象的代码可能与添加到对象的代码相同。`unsigned int`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-17T12:57:25.047

你是对的。有一些方法可以减少重复，请参阅我的[饮食模板](http://accu.org/content/conf2011/Jonathan-Wakely-diet-templates.pdf)演示文稿中的幻灯片 18-26。

有一点是“常识”，`std::vector<T*>`它们`std::vector<U*>`都可以作为围绕`vector_impl<void*>`专业化的薄包装器来实现，因此它们尽可能共享相同的生成代码（这就是我在幻灯片中所说的提升），但我不认为现代 std::lib 实现实际上进行了优化。当然 libstdc++ 没有。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-17T12:20:13.290

编译器不会“创建两个类”。相反，`std::vector<int>`和`std::vector<float>` **是**两个不同的类。不要混淆类和模板——它们是语言的核心概念！同样，`std::vector<SomeClass *>`and`std::vector<SomeOtherClass *>`是两个不同的类，应该可以回答您的问题。

# sql-server-2008-r2 - 排除 NULL 的不同计数

> ID：13914039
> 
> 赞同：5
> 
> 时间：2012-12-17T12:18:39.303
> 
> 标签：sql-server-2008-r2, ssas, mdx

有没有办法创建一个可以进行不同计数但不包括空值的计算度量？例如，如果我有：10、20、20、null；不同的计数是 3，但我可以得到 2 的答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:47:05.750

你可以试试这个：

```
with cte ( "counter" ) as
( 
    select 
        1 as "counter" 
    from 
        "YOURTABLE" 
    group by 
        "COLUMNNAME" 
    having ( "COLUMNNAME" IS NOT NULL )
)
select SUM( "counter" ) from cte 
```

**@ 编辑：**

更简单的变体：

```
SELECT COUNT( DISTINCT "COLUMNNAME" ) FROM "TABLENAME" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T03:28:10.547

谢谢你的所有答案。但是，在这里我找到了最适合我需要的解决方案：[http ://richardlees.blogspot.com/2008/10/alternative-to-physical-distinct-count.html](http://richardlees.blogspot.com/2008/10/alternative-to-physical-distinct-count.html)

通过使用以下内容创建计算成员：

```
count(nonempty({[DimName].[HierarchyName].[LevelName].members-[DimName].[HierarchyName][All].UNKNOWNMEMBER},[Measures].[MyMeasure])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T20:45:00.210

只需添加 value 不为 null 和 value "!=''" 就可以了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T12:26:46.483

将 where 条件放在度量不为空的地方

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T22:04:22.347

有同样的问题 - 令人惊讶的是微软忽略了它......看起来唯一的解决方案是为不同的计数度量组构建一个视图

[http://www.sqlservercentral.com/Forums/Topic810069-17-1.aspx#bm1213461](http://www.sqlservercentral.com/Forums/Topic810069-17-1.aspx#bm1213461)

# asp.net - 在后面的代码中更改 HTML 表单的语言

> ID：13914042
> 
> 赞同：0
> 
> 时间：2012-12-17T12:18:49.187
> 
> 标签：asp.net, sharepoint-2010, forms

在自定义 sharepoint ASPX 页面上，我有一个小的 HTML 表单，其中包含 3 种输入类型的文本和一个提交按钮。我想知道有没有办法改变代码隐藏中整个表单的语言？我想在瑞典语和英语之间切换。任何有用的建议我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:57:36.233

您应该使用资源研究本地化。 [演练：通过 ASP.NET 使用资源进行本地化](http://msdn.microsoft.com/en-us/library/fw69ke6f%28v=vs.100%29.aspx) ，这样您就可以将文本从页面中取出并根据您支持的语言加载它。您最终会为要支持的每种语言创建一个资源文件。

如果您正在使用需要支持不同语言的 SharePoint Web 部件，请查看[演练：本地化 Web 部件](http://msdn.microsoft.com/en-us/library/gg491702%28v=office.14%29.aspx)是否会对您有所帮助。

# qt - 将 eventfilter 添加到 QLineEdit 会改变它的外观

> ID：13914043
> 
> 赞同：2
> 
> 时间：2012-12-17T12:18:50.840
> 
> 标签：qt

`EventFilter`我已经在我的设备上安装了一个，`QLineEdit`这样我就可以处理焦点事件以允许 a`QFileDialog`显示它何时获得焦点。

我添加了以下几行：

```
QLineEdit *projDir = new QLineEdit(); 
```

然后再往下我有：

```
projDir->installEventFilter(this) 
```

这是我的功能：

```
bool StartDialog::eventFilter(QObject *target, QEvent *event)
{
    if(target == projDirEdit )
    {
        if (event->type() == QEvent::FocusIn)
        {
            qDebug()<<"yep";
        }
        else
            event->ignore();
    }
} 
```

但由于某种原因，当我有这个过滤器时，实际并`QLineEdit`没有正常显示。您可以选择它并单击它，但它看起来不正常。截屏： ![未正确显示的 QLineEdit 的屏幕截图](../Images/7fe89272e1fde5f8d6c9b5f9c5b7fb0f.png)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T13:27:15.867

`return true/false`根据 Qt 文档，您的回答中的陈述是正确的：

> 在你重新实现这个函数时，如果你想过滤掉事件，即停止它被进一步处理，返回true；否则返回假。

但是有几点需要重新考虑：

*   您的代码包含不包含`return`语句的代码路径：如果目标不是 projDirEdit，或者事件不是 FocusIn，将返回什么？真的？错误的？
*   如果你不关心它，你不应该`ignore()`处理它，因为这可能意味着其他类将不再处理该事件。
*   如果您想过滤掉多个事件，则对事件类型使用 switch() 可以更轻松地进行扩展。

就个人而言，我会这样实现它：

```
bool StartDialog::eventFilter(QObject *target, QEvent *event)
{
    if( target == projDirEdit )
    {
        switch( event->type() )
        {
        case QEvent::FocusIn:
        case QEvent::FocusOut:  // I added this as an example why I use switch()
            event->ignore(); // not sure if this is necessary
            return true;
        default:
            break;
        };
    }

    // let the base class handle anything else
    // (assuming QFileDialog is the base class)
    return QFileDialog::eventFilter( target, event );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T12:21:48.630

对不起，但我知道我做错了什么。

在事件过滤器中，我需要添加一个返回 false 并返回 true。我不确定这是否正确，但它为我解决了问题：

```
 bool StartDialog::eventFilter(QObject *target, QEvent *event)
{
    if(target == projDirEdit )
    {
        if (event->type() == QEvent::FocusIn)
        {
            qDebug()<<"yep";
            return true;
        }
        else
        {
            event->ignore();
            return false;
        }
    }
} 
```

# java - 将日期值从一个控制器绑定到另一个：Spring MVC

> ID：13914045
> 
> 赞同：0
> 
> 时间：2012-12-17T12:18:59.940
> 
> 标签：java, spring, date, binding

我需要从一个控制器导航到另一个控制器，所以我制作了一种渲染方法：

```
private static final String ACTION_SHOW_JUSTIFICANTE = "action=" + ServletContextKeys.SC_SHOW_JUSTIFICANTE;
@Autowired
private MyOtherController myOtherController;

@RequestMapping(params = ACTION_SHOW_JUSTIFICANTE)
 public final String doRenderShow(ModelMap model, RenderRequest renderrequest, PortletSession portletSession) {
    MyBean myBean = service.getBean();
    model.addAttribute(ServletContextKeys.SC_BEAN, myBean);
    return myOtherController.doRender(model, renderrequest);
} 
```

另一个控制器的render方法：

```
@RequestMapping(params = ACTION_MY_OTHER_CONTROLLER)
public final String doRender(ModelMap model, RenderRequest renderrequest) {
if (!model.containsAttribute(ServletContextKeys.SC_BEAN)) {
        model.addAttribute(ServletContextKeys.SC_BEAN, new MyBean());
    }
//Do some stuff..

return ServletContextKeys.SC_VIEW_PAGE;
} 
```

它工作正常，但是当我尝试在 JSP 中显示 bean 值时，问题在于日期绑定：

```
<form:input id="registerDate" size="10" styleClass="input" path="registerDate" readonly="${imputado}"/> 
```

注册日期显示为以下格式：'Mon Oct 08 22:00:00 GMT 2012' 而不是需要的：'dd/MM/yyyy'

我已经定义了一个 initBinder 方法：

```
@InitBinder
public final void initBinder(WebDataBinder binder) { 
        //Date
        SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy");
        dateFormat.setLenient(false);
        binder.registerCustomEditor(Date.class, new CustomDateEditor(dateFormat, true));
} 
```

但是，可能在这种情况下，我没有调用它（它实际上工作正常，在其他正常情况下）

任何想法如何格式化此日期并解决此问题..？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:47:02.283

是我的错！抱歉，代码没问题。问题是 initBinder 仅在其中一个控制器中定义。

# internet-explorer - VML 行高。文本跨度（v：textpath）的SVG dy 属性的任何等效项？

> ID：13914048
> 
> 赞同：1
> 
> 时间：2012-12-17T12:19:26.743
> 
> 标签：internet-explorer, svg, cross-browser, raphael, vml

什么是 VML 中最接近的等价物`dy`- 可用于设置文本元素的行高（又名行间距、前导、垂直文本偏移...）的 VML 属性？

VML textpath 的官方文档中没有任何[内容突出](http://msdn.microsoft.com/en-us/library/bb263924%28v=vs.85%29.aspx)，这让我认为使用了其他一些基于 y 位置的通用属性。如果是这样，最好也知道它是如何计算和偏移的，例如在多行文本中，它是每行的常数，还是增加一个常数？

原因：为了 Raphael 项目（基于 JavaScript 的 SVG / VML 控制器）的向后浏览器兼容性。Raphael 本身不支持 dy / line-height，所以我需要直接使用它创建的 SVG / VML 节点。SVG 很简单：使用`dy=pixels`. 但我找不到任何说明 VML 等价物的相关文档或资源，而且我目前无法访问 IE 通过在 Internet Explorer 中探索 VML 输出来找到它。

* * *

我认为这个问题可能**[就像在 IE 中打开这个 jsfiddle 设置为 IE8 模式](http://jsfiddle.net/kgDNs/1/)**一样简单，然后使用开发人员工具查看设置文本行间距的属性。但是，在使用 IE 访问机器后，我发现……这很奇怪。似乎没有任何东西可以改变行高，或者 VML 文本的打印方式的任何其他方面。无论我改变什么，文本都不会改变。想不通。

# c - 什么是 C11 cor 1:2012？

> ID：13914050
> 
> 赞同：16
> 
> 时间：2012-12-17T12:19:27.990
> 
> 标签：c, standards, c11

我刚刚注意到对名为*ISO/IEC 9899:2011/Cor 1:2012*的 C11 标准进行了更正。

本次更新有哪些变化？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-17T12:19:27.990

该技术勘误以 PDF 格式免费提供，可从[ISO](https://www.iso.org/obp/ui/#iso:std:iso-iec:9899:ed-3:v1:cor:1:v1:en)或您的国家标准机构获得。

为方便起见，我将在此处完整引用它，因为只有两个更改：

> *第 176 页，6.10.8.1*
> 
> 代替：
> 
> `__STDC_VERSION__`整数常数`201ymmL.`^(178))
> 
> 和：
> 
> `__STDC_VERSION__`整数常数`201112L.`^(178))
> 
> *第 177 页，6.10.8.3*
> 
> 代替：
> 
> `__STDC_LIB_EXT1__`表示支持的整数常量`201ymmL,`……</p>
> 
> 和：
> 
> `__STDC_LIB_EXT1__`整数常量`201112L,`，用于表示支持附件 K（边界检查接口）中定义的扩展。^(179))

# php - 使用 Captcha 后收到垃圾邮件

> ID：13914060
> 
> 赞同：0
> 
> 时间：2012-12-17T12:20:07.743
> 
> 标签：php, email, spam

我已将 securimage 验证码用于联系表格，但我收到了垃圾邮件。保护垃圾邮件的程序是什么。

* * *

**编辑1：**

我有一个想法，如果我可以检查电子邮件地址是否存在，它可以帮助我保护垃圾邮件。

我对么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:21:17.210

使用一些标准的验证码技术，例如[http://www.google.com/recaptcha](http://www.google.com/recaptcha)。另请阅读[PHP：检查电子邮件内容是否为垃圾邮件](https://stackoverflow.com/questions/4702397/php-check-if-email-content-is-spam)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:21:58.473

使用 SMTP 邮件作为联系我们的表格。这将保护您的邮件进入垃圾邮件文件夹。

# delphi - 如何获取和设置 TChromium 滚动条位置？

> ID：13914065
> 
> 赞同：9
> 
> 时间：2012-12-17T12:20:32.737
> 
> 标签：delphi, chromium, tchromium, chromium-embedded

如何`TChromium`在 Delphi 中获取和设置滚动条位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-18T16:18:26.977

可以直接使用 javascript 对象。只需使用框架的 CefV8Context 即可。

这是一个例子：

```
var
    val: ICefV8Value;
    context: ICefv8Context;
    excp: ICefV8Exception;
    scroll: TPoint;
begin
    if (Chromium1.Browser.MainFrame = nil) then
      exit;

    //this will work only with exact frame
    context := Chromium1.Browser.MainFrame.GetV8Context;

    if (context <> nil) then
    begin
        context.Eval('window.pageXOffset', val, excp);
        scroll.x := val.GetIntValue;
        context.Eval('window.pageYOffset', val, excp);
        scroll.y := val.GetIntValue;
    end
    else
      exit;

    //todo: do something with scroll here
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T19:03:55.353

目前正在玩[CefSharp](https://github.com/chillitom/CefSharp)，我认为这与 Delphi 相似。这是我的解决方案：

```
public int GetVerticalScrollPosition()
{
    var r = _webView.EvaluateScript(@"document.body.scrollTop");
    return Convert.ToInt32(r);
}

public void SetVerticalScrollPosition(int pos)
{
    _webView.ExecuteScript(
        string.Format(@"document.body.scrollTop = {0}", pos));
} 
```

我不再是那个 Delphi 专家了，希望你能看懂我的代码；基本上[我使用 JavaScript 来读取/写入滚动位置](https://stackoverflow.com/questions/2481350/retrieve-scrollbar-position-with-javascript)`EvaluateScript`并通过and方法执行这些小的 JavaScript 片段`ExecuteScript`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-11T15:54:06.393

您需要在 TCromium.Browser 中使用 JavaScript。这是最简单的方法：

```
Chromium1.Browser.MainFrame.ExecuteJavaScript('window.scrollBy(0,50)', 'about:blank', 0); 
```

祝你好运！

# matlab - 生成具有给定概率matlab的随机数

> ID：13914066
> 
> 赞同：25
> 
> 时间：2012-12-17T12:20:39.673
> 
> 标签：matlab, math, random, probability

我想以给定的概率生成一个随机数，但我不知道如何：

我需要一个 1 到 3 之间的数字

```
num = ceil(rand*3); 
```

但我需要不同的值来产生不同的概率，例如。

```
0.5 chance of 1
0.1 chance of 2
0.4 chance of 3 
```

我敢肯定这很简单，但我想不出该怎么做。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-17T12:24:49.210

简单的解决方案是生成一个具有均匀分布的数字（使用[`rand`](http://www.mathworks.com/help/matlab/ref/rand.html)），并对其进行一些操作：

```
r = rand;
prob = [0.5, 0.1, 0.4];
x = sum(r >= cumsum([0, prob])); 
```

或单线：

```
x = sum(rand >= cumsum([0, 0.5, 0.1, 0.4])); 
```

### 解释

这里`r`是一个介于 0 和 1 之间的均匀分布的随机数。要生成介于 1 和 3 之间的整数，诀窍是将 [0, 1] 范围分成 3 段，其中每段的长度与其对应的概率成正比. 在您的情况下，您将拥有：

*   段 [0, 0.5)，对应数字 1。
*   段 [0.5, 0.6)，对应数字 2。
*   段 [0.6, 1]，对应数字 3。

落入任何段的概率`r`与您想要的每个数字的概率成正比。`sum(r >= cumsum([0, prob]))`只是将整数映射到其中一个段的一种奇特方式。

### 延期

如果您有兴趣创建随机数的向量/矩阵，可以使用循环或[`arrayfun`](http://www.mathworks.com/help/matlab/ref/arrayfun.html)：

```
r = rand(3); % # Any size you want
x = arrayfun(@(z)sum(z >= cumsum([0, prob])), r); 
```

当然，也有矢量化的方案，就是懒得写了。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-04T12:37:11.377

到目前为止的答案是正确的，但对于大型输入来说很慢：O(m*n) 其中 n 是值的数量，m 是随机样本的数量。这是一个 O(m*log(n)) 版本，它利用了`cumsum`结果的单调性和 中使用的二进制搜索`histc`：

```
% assume n = numel(prob) is large and sum(prob) == 1
r = rand(m,1);
[~,x] = histc(r,cumsum([0,prob])); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-17T18:54:21.140

```
>> c = cumsum([0.5, 0.1, 0.4]);
>> r = rand(1e5, 1);
>> x = arrayfun(@(x) find(x <= c, 1, 'first'), r);
>> h = hist(x, 1:3)

h =

       49953       10047       40000 
```

`x`根据需要分发。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-10-30T14:50:48.483

使用*Statistics and Machine Learning Toolbox*`randsample`中的函数，您可以生成具有指定概率质量函数 (pmf) 的随机数：

 *```
pmf = [0.5, 0.1, 0.4];
population = 1:3;
sample_size = 1;

random_number = randsample(population,sample_size,true,pmf); 
```

我认为这是最简单的方法。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-17T16:24:13.623

一个稍微更通用的解决方案是：

```
r=rand;
prob=[.5,.1,.4];
prob=cumsum(prob);
value=[1,2,3];    %values corresponding to the probabilities
ind=find(r<=prob,1,'first');
x=value(ind) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-09T02:03:45.940

当概率是这样的好数字时，可以进行非常简单且高效的选择。我们重复人口元素，以便统一选择产生所需的概率分布。在这种情况下，我们创建了一个 10 的总体，5 乘以 1（被选中的概率为 0.5），等等。

```
p = [1,1,1,1,1,2,3,3,3,3];
x = p(randi(numel(p)); 
```

`randi`接受第二个输入参数，该参数确定输出的大小（默认值为 1），因此很容易从此分布生成许多值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-31T02:56:47.643

使用`rand`、`cumsum`和的矢量解`min`。

```
r = rand(10,1);
p = [0.5 0.1 0.4];
[~, ind] = min(r >= cumsum(p), [], 2) 
```

*   `r`使用 0..1 从 0..1随机采样`rand`。在这种情况下，我将数据放入列向量中。
*   将每个输出索引的概率放入`p`.
*   `r >= cumsum(p)`比较 的每个组合`r`和 的累积概率`p`。在这种情况下，结果是一个二维矩阵，其中每一行以一系列 1 开始，以一系列 0 结束。第一个 0 表示该元素`p`是随机选择的。
*   `min`对所有行执行并返回第一个 0 的列索引。第三个输入`min`定义了计算最小值的维度。

如果要将其扩展到 的 n 维`r`：更改 的形状`p`，使其扩展到比现有的多一维`r`，并将该维度作为`min`的第三个输入。

```
r = rand(3, 5, 7);
p = []; 
p(1,1,1,:) = [0.5 0.1 0.4];
[~, ind] = min(r >= cumsum(p), [], 4) 
```*

# html - div 元素未填充到其容器 div 的高度

> ID：13914070
> 
> 赞同：1
> 
> 时间：2012-12-17T12:20:46.573
> 
> 标签：html, css

我有以下布局：（[jsfiddle](http://jsfiddle.net/ETYzR/)）

```
<!DOCTYPE HTML>
<html>
<body>

<div class="main_container">

    <div class="left_container">
    </div>

    <div class="right_container">
    </div>

</div>

</body>
</html>​ 
```

CSS：

```
div.main_container {
    background: #000; 
    border: none;
    -moz-border-radius: 15px;
    -webkit-border-radius: 15px;
    -khtml-border-radius: 15px;
    border-radius: 15px;
    width: 100%;
    min-height: 400px;
    margin: auto;
}

div.left_container {
    float:left;
    position:absolute;
    width: 220px;
    background: red;
    margin: 0;
    min-height: 100%;
    padding: 0;
}

div.right_container {
    position: relative;
    margin-left: 220px;
    width: 715px;
    height: 100px;
    background: blue;
} 
```

我似乎无法让左（红色）容器填充主容器的高度，其中右容器的内容有可能增加主容器的高度（非 jQuery 解决方案）。

希望得到一些指导。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T12:25:24.267

`position:relative`在 main_container 上设置。

由于左列有`height:100%`，它将与它的父列高度相同。在之前的代码中，这个元素的父元素是文档，因为它有`position:absolute`. 添加`position:relative`到容器会使其成为左列的父级，从而导致列的高度调整为其父级高度。

```
 div.main_container {
        background: #000;
        border: none;
        -moz-border-radius: 15px;
        -webkit-border-radius: 15px;
        -khtml-border-radius: 15px;
        border-radius: 15px;
        width: 100%;
        min-height: 400px;
        margin: auto;
        position: relative;
    } 
```

[http://jsfiddle.net/ETYzR/3/](http://jsfiddle.net/ETYzR/3/)

# regex - 用低分辨率版本替换热链接图像

> ID：13914074
> 
> 赞同：0
> 
> 时间：2012-12-17T12:20:58.610
> 
> 标签：regex, .htaccess, mod-rewrite, redirect, hotlinking

我在一家数字小工具制造商的网站上工作。产品图片来自数百个博客和论坛的热链接。这导致了带宽问题。

我们想用低分辨率版本替换所有热链接图像，使用 .htaccess

表示如果热链接的图像路径是

```
http://www.example.com/products/gadget123/gadget123.png 
```

我们想将它重定向到

```
http://www.example.com/images/low-res/gadget123.png 
```

热链接图像路径不同，这意味着它们可能来自任何目录的子目录。

例如

```
/images/products/abc/gadget_abc200.jpg
/products/images/abc/gadgetabc5155_packing.png
/downloads/brochures/abc2012/abc2012_user_guide.jpg

etc... 
```

但所有低分辨率图像都将在

```
http://www.example.com/images/low-res/ 
```

目录，并且它们的名称将与其高分辨率版本相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:37:37.177

我假设无论原始文件夹如何，高分辨率和低分辨率图像之间的文件名始终相同。

```
RewriteEngine on
RewriteBase /

RewriteCond expr "! %{HTTP_REFERER} -strmatch '*://%{HTTP_HOST}/*'"
RewriteRule ^(images|products|downloads)/[a-zA-z0-9]+/([a-zA-z0-9]+)(\.jpg|\.png|\.gif)$ images/low-res/$2$3 
```

这至少适用于提供的示例。如果需要考虑其他子文件夹，则需要相应地调整规则。

# python - 跨时间轴的滑动窗口平均值

> ID：13914077
> 
> 赞同：5
> 
> 时间：2012-12-17T12:21:08.857
> 
> 标签：python, pandas

我有一组间隔为 30 分钟的大型时间序列数据，并尝试在这组数据上做一个滑动窗口，但使用 pandas 分别针对一天中的每个时间点。

我不是统计学家，也不擅长思考或编码这类工作，但这是我做我想做的笨拙的尝试。我真的在寻求改进它的帮助，因为我知道会有更好的方法来做到这一点，可能使用 MultiIndexes 和一些适当的迭代？但我一直在努力跨“时间轴”做到这一点。

```
def sliding_window(run,data,type='mean'):
    data = data.asfreq('30T')
    for x in date_range(run.START, run.END, freq='1d'):
        if int(datetime.strftime(x, "%w")) == 0 or int(datetime.strftime(x, "%w")) == 6:
            points = data.select(weekends).truncate(x - relativedelta(days=run.WINDOW),x + relativedelta(days=run.WINDOW)).groupby(lambda date: minutes(date, x)).mean()
        else:
            points = data.select(weekdays).truncate(x - relativedelta(days=run.WINDOW),x + relativedelta(days=run.WINDOW)).groupby(lambda date: minutes(date, x)).mean()
        for point in points.index:
            data[datetime(x.year,x.month,x.day,point.hour,point.minute)] = points[point]
    return data 
```

run.START、run.END 和 run.WINDOW 是数据内的两个点和 45（天）。我一直盯着这段代码很多，所以我不确定它对其他人有什么意义（如果有的话），请询问，以便我澄清其他任何事情。

**已解决：（**由crewbum提供的解决方案）

正如预期的那样，修改后的函数运行得非常快：

```
def sliding_window(run,data,am='mean',days='weekdays'):
    data = data.asfreq('30T')
    data = DataFrame({'Day': [d.date() for d in data.index], 'Time': [d.time() for d in data.index], 'Weekend': [weekday_string(d) for d in data.index], 'data': data})
    pivot = data.pivot_table(values='data', rows='Day', cols=['Weekend', 'Time'])
    pivot = pivot[days]
    if am == 'median':
        mean = rolling_median(pivot, run.WINDOW*2, min_periods=1)
    mean = rolling_mean(pivot, run.WINDOW*2, min_periods=1)
    return DataFrame({'mean': unpivot(mean), 'amax': np.tile(pivot.max().values, pivot.shape[0]), 'amin': np.tile(pivot.min().values, pivot.shape[0])}, index=data.index) 
```

反透视函数：

```
def unpivot(frame):
    N, K = frame.shape
    return Series(frame.values.ravel('C'), index=[datetime.combine(d[0], d[1]) for d in zip(np.asarray(frame.index).repeat(K), np.tile(np.asarray(frame.ix[0].index), N))]) 
```

目前，sliding_mean 上的 center=True 似乎已损坏，如果有机会，会将其归档在 github 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T07:38:15.460

如果您对 MultiIndexes 感兴趣，请查看 `df.pivot_table()`. 当在 rows 和/或 cols 参数中传递多个键时，它将自动创建一个 MultiIndex。

例如，假设您要对数据进行透视，以便每个周末和一天中的非周末 30 分钟有单独的列；您可以通过将 Day、Weekend 和 TOD（一天中的时间）列添加到 DataFrame，然后将这些列名称传递给 pivot_table 来实现，如下所示。

```
pivot = df.pivot_table(values='Usage', rows='Day', cols=['TOD', 'Weekend']) 
```

在这种格式中，`pd.rolling_mean()`（或您创建的函数）可以很容易地应用于`pivot`. pd.rolling_mean() 与 pandas 中的所有滚动/移动函数一样，甚至接受`center`居中滑动窗口的参数。

```
pd.rolling_mean(pivot, 90, center=True, min_periods=1) 
```

# iphone - 如何删除所有项目并将新项目添加到 UICollectionView？

> ID：13914080
> 
> 赞同：6
> 
> 时间：2012-12-17T12:21:11.977
> 
> 标签：iphone, ios, uicollectionview

在某些事件中，

我想删除 uicollectionview 中的所有单元格，并添加新单元格。（将作为网络调用的结果填充）

我尝试使用 deleteItemsAtIndexPaths。重新加载部分，删除部分/插入部分。

他们每个人都使我的应用程序崩溃。

下面是我的代码。

```
NSMutableArray* indexPathArray = [[NSMutableArray alloc] init];

for(int i=0; i < [self.jsonAlbumImageArray count]; ++i)
{
    NSIndexPath* newPath = [NSIndexPath indexPathForRow:i inSection:0];
    [indexPathArray addObject: newPath];
}

[self.jsonAlbumImageArray removeAllObjects];

if(indexPathArray.count > 0 )
{
    [self.collectionView performBatchUpdates:^{
            [self.collectionView deleteItemsAtIndexPaths:indexPathArray];
        }
    completion: nil];
}

// NSIndexSet *indexSet = [NSIndexSet indexSetWithIndexesInRange:NSMakeRange(0, 1)];                                                                                                                                                                                        
// NSIndexSet* indexSet = [NSIndexSet indexSetWithIndex:0];                                                                                                                                                                                                                 
// [self.collectionView reloadSections:indexSet];                                                                                                                                                                                                                           

[self get_IMAGE_LIST_FROM_SERVER]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-26T13:41:10.800

万一您需要比 [collectionView reloadData] 提供的动画更流畅的动画，您可以使用 insert 和 delete 方法来实现，这里有一个示例。

```
-(void)deleteItemsFromDataSourceAtIndexPaths:(NSArray  *)itemPaths
{
    NSMutableIndexSet *indexSet = [NSMutableIndexSet indexSet];
    for (NSIndexPath *itemPath  in itemPaths) {
        [indexSet addIndex:itemPath.row];
    }
    [self.apps removeObjectsAtIndexes:indexSet];
}

-(void)insertItems:(NSArray*)items ToDataSourceAtIndexPaths:(NSArray  *)itemPaths
{
    NSMutableIndexSet *indexSet = [NSMutableIndexSet indexSet];
    for (NSIndexPath *itemPath  in itemPaths) {
        [indexSet addIndex:itemPath.row];
    }
    [self.apps insertObjects:items atIndexes:indexSet];
}

-(void)reloadDataSmooth{
        [self.collectionView performBatchUpdates:^{

            NSMutableArray *arrayWithIndexPathsDelete = [NSMutableArray array];
            NSMutableArray *arrayWithIndexPathsInsert = [NSMutableArray array];

            int itemCount = [self.items count];

            for (int d = 0; d<itemCount; d++) {
                [arrayWithIndexPathsDelete addObject:[NSIndexPath indexPathForRow:d inSection:0]];
            }
            [self deleteItemsFromDataSourceAtIndexPaths:arrayWithIndexPathsDelete];
            [self.collectionView deleteItemsAtIndexPaths:arrayWithIndexPathsDelete];

            int newItemCount = [newItems count];

            for (int i=0; i<newAppCount; i++) {
                [arrayWithIndexPathsInsert addObject:[NSIndexPath indexPathForRow:i inSection:0]];
            }
            [self insertItems:newItems ToDataSourceAtIndexPaths:arrayWithIndexPathsInsert];

            [self.collectionView insertItemsAtIndexPaths:arrayWithIndexPathsInsert];
        }
        completion:nil];
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T16:35:43.523

是的，正如乔纳森所说，我认为你想要做的是用新数据改变你的数据源，然后简单地“刷新”或重新加载 UICollectionView。

# javascript - 如何返回一个全局数组？

> ID：13914082
> 
> 赞同：0
> 
> 时间：2012-12-17T12:21:14.810
> 
> 标签：javascript, jquery, ajax

```
$(document).on("click", "#subtotal", function() {       
    var total_price=0;                                        
    for (i=1; i<= clicks; i++) {
        var element = parseFloat($("#total_price_"+i).html());
        total_price += parseFloat(element);
        var brand_code = $("#brand_"+i).val();
        var price = $("#price_"+i).html();
        var quantity = $("#quantity_"+i).html();
        if (element >=1 ) {
        total_price 
        $("#total").html(total_price);
            $.ajax({
                    type: "POST",
                    url: "modules/query_jquery/product_select.php",
                   data: {"new_invoice": "new_invoice", "brand_code": brand_code, "price" : price, "quantity" : quantity , "total_price" : total_price},
                   dataType: 'json',
                   success: function (data) {
                      message = data.message;
                      window.location.href = data.url;
                    }
            });

        }

    }
    alert(message);
}); 
```

我正在尝试提醒消息，但它没有定义？？ajax jquery下定义的变量message不能定义？！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:23:20.520

尝试在 Ajax 完成后执行警报：

```
 success: function (data) {
      message = data.message;
      window.location.href = data.url;
      test();
  }

  function test() {
      if (window.message) {
          alert(message);
      } else {
          alert("global message was not populated");
      }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:24:29.257

AJAX 请求是异步的！

调用 alert 时，HTTP 请求尚未返回。

利用

*   异步标志（http://api.jquery.com/jQuery.ajax/）
*   推迟通话
*   从您的成功方法中调用该方法

延迟 ajax 请求的示例：

```
 $(function () {
            var req1 = $.get('test1.json').success(function (data) {
                $('body').append(data.hallo);
            });
            var req2 = $.get('test2.json').success(function (data) {
                $('body').append(data.welt);
            });

            $.when(req1, req2).done(function () {
                $('body').append('<br />ajax completed');
            }).fail(function () {
                $('body').append('<br />ajax failed');
            });
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T12:25:45.093

如前所述，因为您在 ajax 成功函数中定义全局变量，这意味着如果这不成功，则该变量将不存在供您调用。

所以`message`在 ajax 调用之前定义是安全的：

```
message = null;

$(document).on("click", "#subtotal", function() {       
var total_price=0;                                        
for (i=1; i<= clicks; i++) {
    var element = parseFloat($("#total_price_"+i).html());
    total_price += parseFloat(element);
    var brand_code = $("#brand_"+i).val();
    var price = $("#price_"+i).html();
    var quantity = $("#quantity_"+i).html();
    if (element >=1 ) {
    total_price 
    $("#total").html(total_price);
        $.ajax({
                type: "POST",
                url: "modules/query_jquery/product_select.php",
               data: {"new_invoice": "new_invoice", "brand_code": brand_code, "price" : price, "quantity" : quantity , "total_price" : total_price},
               dataType: 'json',
               success: function (data) {
                  message = data.message;
                  window.location.href = data.url;
                }
        });

    }

}
alert(message);
}); 
```

# cocoa - 首次启动时将文件安装到应用程序支持中

> ID：13914085
> 
> 赞同：0
> 
> 时间：2012-12-17T12:21:19.590
> 
> 标签：cocoa, default

我的应用程序允许用户创建预设并将它们保存为文件`Application support`夹中的二进制文件。如果我的应用程序以一些预定义的预设开始，那就太好了，但我不知道如何设置应用程序以在首次启动时安装此文件。

我是否必须将此文件放入项目中，然后在首次启动时移动它们？这是一个好习惯吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T12:33:10.997

我们在我们的项目中这样做 - 我们在应用程序开始时检查文件是否存在。

```
 NSString* fileName = @"...";

    NSArray* dirs = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    dbPath = [[dirs objectAtIndex:0] stringByAppendingPathComponent:fileName];
    // check if DB exist in correct location
    NSFileManager* fileManager = [NSFileManager defaultManager];
    success = [fileManager fileExistsAtPath:dbPath];

    if(!success)
    {
        NSString *path = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:fileName];

        [fileManager copyItemAtPath:path toPath:dbPath error:nil];

    } 
```

# asp.net - 找不到元素“elmah”的架构信息

> ID：13914086
> 
> 赞同：10
> 
> 时间：2012-12-17T12:21:24.327
> 
> 标签：asp.net, web-config, elmah, configsection

我阅读了这里已经发布的所有答案，但似乎没有一个可以解决。即使我收到这些警告，Elmah 的工作也完美无缺。当我在 Visual Studio 2012 中启动调试 (f5) 时，我也遇到了这些错误。在构建时一切都很好。

web.config 中的配置部分很简单，所以我真的不知道如何解决它：

```
<configuration>
  <configSections>
    <sectionGroup name="elmah">
      <section name="security" requirePermission="false" type="Elmah.SecuritySectionHandler, Elmah" />
      <section name="errorLog" requirePermission="false" type="Elmah.ErrorLogSectionHandler, Elmah" />
      <section name="errorMail" requirePermission="false" type="Elmah.ErrorMailSectionHandler, Elmah" />
      <section name="errorFilter" requirePermission="false" type="Elmah.ErrorFilterSectionHandler, Elmah" />
    </sectionGroup>
  </configSections>

  <elmah>
    <security allowRemoteAccess="1" />
    <errorLog type="Elmah.SqlErrorLog, Elmah" connectionStringName="EvaConnection" />
    <!--<errorLog type="Elmah.XmlFileErrorLog, Elmah" logPath="~/App_Data/ErrorLogs" />-->
    <!-- ELMAH class ErrorMailModule.cs has been modified to read config from AppSettings -->
    <errorMail from="dummy@dummy.com" to="dummy@dummy.com" subject="dummy" priority="High" async="true" smtpPort="25" smtpServer="dummy" useSsl="false" userName="dummy@dummy.com" password="dummy" noYsod="false" />
  </elmah> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T02:56:04.577

我认为这个错误与您选择 SqlErrorLog 作为您的 errorLog 类型有关。您是否在您的connectionString 配置的数据库中运行了[Elmah SQL Server DB 脚本？](http://code.google.com/p/elmah/downloads/detail?name=ELMAH-1.2-db-SQLServer.sql)`EvaConnection`如果没有，您将需要这样做，以便为 Elamh 创建正确的表和存储过程，以便在将错误写入数据库时​​使用。

如果您使用的 SQL Server 版本高于 2005，请参阅[ErrorLog Implementation - Enterprise-Level Relational Databases](http://code.google.com/p/elmah/wiki/ErrorLogImplementations#Enterprise-Level_Relational_Databases) wiki 页面中的注释以获取有关`ntext`字段类型的注释。

**更新：**

多关注问题后。在 ELMAH Google Group 上找到相关帖子[- 找不到架构信息](https://groups.google.com/forum/?fromgroups=#!topic/elmah/PgZPCNCwHHc)这是 Visual Studio 报告的有关 ELMAH 配置部分的问题，因为它没有支持的 .xsd 文件。有一个文件可用于在 Visual Studio 中抑制此错误/警告消息。只需按照[问题 239 中的说明进行操作：用于 web.config 和外部配置文件的 Intellisense](http://code.google.com/p/elmah/issues/detail?id=239)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-24T15:27:16.303

我让一切正常，然后我也遇到了这个错误。

在尝试解决此问题的任何更复杂的解决方案之前：

1.  重新启动 Visual Studio
2.  清洁溶液
3.  再次构建解决方案

这为我解决了问题。似乎某些东西在 Visual Studio 中被缓存（或崩溃）了。

# javascript - 为什么这个 JS 变量在页面加载时运行

> ID：13914088
> 
> 赞同：0
> 
> 时间：2012-12-17T12:21:25.997
> 
> 标签：javascript, jquery

我不明白为什么`MC.caro.myTimer()`在页面加载时运行，它是一个变量。那么，如果没有我调用它，它是如何运行的。

我认为这可能与我的自动执行功能有关？

```
 var MC = {};

    (function($){
        "use strict";

        MC.init = function (){
            //disable to turn off carousel
            MC.caro.init();
        };

        MC.caro = {
            init: function(){
                //Build carousel for us to use
                MC.caro.build();
                //Bind click events to buttons
                $('.mc-carousel--nav--buttons').on('click','li',function(){
                    MC.caro.advance($(this));

                    //stop the current ticking
                    MC.caro.stopMyTimer();

                    //Start up movement after 15seconds
                    setInterval(function(){MC.caro.myTimer()},10000);
                    console.info('running');
                });
            },
            build: function(){
                MC.caro.jsonRun(function(){
                    console.info('running1');
                });
            },
            myTimer: function(){
                console.info('running2');
                MC.caro.advance(nextItem,'slow');
            },
            //Sets up the timer
            timer:setInterval(function(){MC.caro.myTimer()},5000),
            stopMyTimer: function(){
                clearInterval(MC.caro.timer);
            }
        }
    })(jQuery);

    MC.init(); 
```

还有一个问题：

当我点击`$('.mc-carousel--nav--buttons').on('click','li',function(){`代码将等待 15 秒然后运行。正如预期的那样。但是如果我真的很快点击它 5 次，它会等待这 15 秒，然后在完全相同的时间运行并按我点击的顺序运行，这意味着`MC.caro.stopMyTimer();`在我的点击事件中调用它不起作用。

此外，这不是完整的代码，我也不能把它放在小提琴中，因为它对 Intranet 有很大的依赖关系。

所以你看不到一个有效的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:24:32.820

您将其设置为的返回值`setInterval`

```
timer: setInterval(function(){MC.caro.myTimer()},5000), 
```

这是立即评估的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:21:35.227

我认为@JamieHutber 是正确的；setInterval 立即评估并分配给 timer 属性。

尝试：

```
timer: function() {
  setInterval(function(){MC.caro.myTimer()},5000);
} 
```

通过 timer() 启动计时器。如果您需要将其分配给变量，则：

```
timer: function() {
  this._timer = setInterval(function(){MC.caro.myTimer()},5000);
} 
```

高温高压

# android - 为什么显示错误权限仅授予android清单中的系统应用程序

> ID：13914092
> 
> 赞同：2
> 
> 时间：2012-12-17T12:21:32.127
> 
> 标签：android, eclipse, manifest

几个月前，我将这些权限添加到我的应用程序中，而 Eclipse 从未显示过错误：

```
 <uses-permission android:name="android.permission.DELETE_PACKAGES" />
 <uses-permission android:name="android.permission.INSTALL_PACKAGES" /> 
```

然而，今天我编辑了 Android 清单文件，现在它显示错误：

`Permission is only granted to system apps`

为什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T19:19:58.580

Eclipse 正在帮您一个忙——这确实是一个错误。只有使用 Google 签名密钥签名的应用才能安装或删除应用。

您可能可以通过在 Eclipse 中配置您的 lint 选项来抑制这些错误消息（请参阅[https://stackoverflow.com/a/16457801/338479](https://stackoverflow.com/a/16457801/338479)），但除非您实际上为 Google 工作并且可以访问他们的签名密钥，否则您不能设置这些权限。

好吧，也许在一个有根的设备上，但你的应用程序并不完全是可移植的。

编辑：还是您更改了 SDK 目标版本？也许旧版本的 Android 允许您拥有这些权限，但现在您的目标是一个没有这些权限的版本？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T10:28:19.793

在 Eclipse 中：

```
Window -> Preferences -> Android -> Lint Error Checking. 
```

在列表中找到`ID = ProtectedPermission.`将严重性设置为低于错误的条目。这样您仍然可以使用 Eclipse 编译项目。

在 Android Studio 中：

```
File -> Settings -> Inspections 
```

在 Android Lint 下，找到使用系统应用权限。取消选中该复选框或选择低于错误的严重性。

# sql - 具有多个条件拆分组件的 SSIS 包中的性能

> ID：13914095
> 
> 赞同：0
> 
> 时间：2012-12-17T12:21:42.080
> 
> 标签：sql, ssis

我正在使用条件拆分来验证数据并将错误数据发送到我的包中的备用路径。我的条件拆分代码与此类似：

（性别！=“M”||性别！=“F”||性别！=“U”）==错误（性别==“M”||性别==“F”||性别==“U” ) == 真

如果该值为 true，我将控制权传递给另一个条件拆分，或者如果为 false，我将该行重定向到错误表。

我在一个包中使用了 25 个条件拆分，我想知道从性能的角度来看这是否是一件好事。与使用其他方法验证数据相比，使用条件拆分的性能如何？

我添加了另一个场景，但它不能在条件拆分中工作。请找到以下信息

我只允许这种格式的日期值和这段时间 '01/01/1753' 到 '12/31/9000'

**我的条件**

（多布瓦查（10））

SUBSTRING(Dob,1,2) <= "12" && SUBSTRING(Dob,4,2) <= "31" && (SUBSTRING(Dob,7,4) >= "1753" || SUBSTRING(Dob,7, 4) <= "9000") == 真

SUBSTRING(Dob,1,2) > "12" || SUBSTRING(Dob,4,2) > "31" || SUBSTRING(Dob,7,4) < "1753" || SUBSTRING(Dob,7,4) > "9000" == FALSE

我的输入 - 12/32/1990, 13/15/2000, 12/31/2010,01/01/1753,12/31/9000,12/31/9001,01/01/9001 预期输出 - 12/31 /2010,01/01/1753,12/31/9000

但在我的条件下，所有记录都被认为是错误的。请给出这种情况的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:16:47.667

*正如威廉·托德·萨尔兹曼 (William Todd Salzman) 所指出的，测试是您*确定包装的最佳设置的唯一方法。然而，一般来说，尽管看起来有悖常理，但您在特定组件中做的越少，SSIS 的速度就越快。原因是 SSIS 引擎可以确定并行性的方式 - 如果它可以确定列 B 未在派生列 1 中进行操作，那么它可以安全地开始更改派生列 2 中的该值。

*   [不同的组件组合会影响 Dataflow 性能吗？](http://sqlblog.com/blogs/jamie_thomson/archive/2011/01/12/investigation-can-different-combinations-of-components-effect-dataflow-performance.aspx)
*   [通过将同步转换拆分为多个任务来提高管道的吞吐量](http://sqlcat.com/sqlcat/b/technicalnotes/archive/2010/08/18/increasing-throughput-of-pipelines-by-splitting-synchronous-transformations-into-multiple-tasks.aspx)

鉴于您的情况，我希望创建多个派生列转换来定义您的各种布尔检查。例如，我会创建一个字段来指示我们是否有这样的有效性别。

添加一个名为的派生列转换`DFT IsGenderValid`，我将对其进行配置

*   IsGenderValid
*   “添加为新列”
*   性别！=“M”|| 性别！=“F”|| 性别！=“U”
*   DT_BOOL

*如果没有其他原因，除了我有一个*地方可以测试、更正和维护逻辑之外，我就会对布尔值进行条件拆分转换。

根据业务逻辑的需要重复此模式进行尽可能多的验证。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T14:16:42.253

确定这一点的最佳方法是创建两次相同的包，一次以这种方式验证，一次以另一种方式验证。您可以使用 BIDS 和[BIDS Helper](http://bidshelper.codeplex.com/)来运行每个包，方法是右键单击包并从上下文菜单中选择执行和可视化性能。完成此操作后，将结果作为答案发布，以便其他人可以从您的工作中受益！

# android - 选择上一个日期（减 1）并转换为 Unix 时间戳

> ID：13914101
> 
> 赞同：0
> 
> 时间：2012-12-17T12:21:58.477
> 
> 标签：android, facebook-fql, android-date

我正在尝试使用 Facebook (API) FQL 获取新闻源。

在尝试对结果进行分页时，我最初使用 LIMIT 和 OFFSET 参数，如下所示：

```
SELECT post_id,.... FROM stream WHERE filter_key in (SELECT filter_key FROM stream_filter WHERE uid = me() AND type = 'newsfeed') AND is_hidden = 0 LIMIT 20 OFFSET 0 
```

然后每次，我到达末尾`ListView`，我运行另一个查询并通过将 OFFSET 增加 +20 来获取下一组 Feed。我从这个答案中得到了逻辑：[https ://stackoverflow.com/a/13265776/450534](https://stackoverflow.com/a/13265776/450534)

然而，问题是，LIMIT 和 OFFSET 参数并不一定会给你所有的结果，搜索 SO 显示 Facebook 建议使用*时间*限制。

现在我需要修改代码，以便每天获取 Feed。例如：

```
Initial Set Of Data - `created_time < 1355788800` (17th December)
Second Set Of Data - `created_time < 1355702400` (16th December)
Third Set Of Data - `created_time < 1355616000` (15th December)
.
.
.
. 
```

经过一番搜索，获得了将当前时间转换为 Unix TimeStamp 的解决方案，如下所示：

```
Date now = new Date();
long unixTime = new Long(now.getTime()/1000); 
```

但是，对于每组新数据，我如何减少`Date`1？我试过这段代码：

```
Calendar newCal = Calendar.getInstance();
Calendar xDate = (Calendar) newCal.clone();
xDate.set(Calendar.DATE, -1);
System.out.println(xDate.getTime().toString()); 
```

但结果是：`Thu Nov 29 17:18:50 GMT+05:30 2012`当我希望它是 12 月 16 日时。任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:40:57.827

我发现从每次通过时创建的原始 Unix 时间戳中减去一天的价值秒数。感谢这里的答案：[https ://stackoverflow.com/a/5128186/450534](https://stackoverflow.com/a/5128186/450534)

所以，每次，为了分页的目的，我都会调用从 Unix 时间戳中`AsyncTask`减去 **86400**秒的数据。

这就像一个魅力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:50:31.487

您想使用 Calendar 的 add 方法而不是 set，请参阅此线程中的答案：

[减少Java中的日期](https://stackoverflow.com/questions/5799797/decrement-a-date-in-java)

# mysql - 如何在 MySQL 数据库中创建类似 Whatsapp 的组

> ID：13914102
> 
> 赞同：2
> 
> 时间：2012-12-17T12:22:10.407
> 
> 标签：mysql, database, many-to-many, usergroups

我正在开发一个程序，我想创建一个包含用户的组，然后该组始终存在并保存在 MySQL 数据库中。我只是不知道如何做到这一点。我的意思是我可以创建一个像这样的表：

```
GROUPID INT PRIMARY KEY
GROUPNAME TEXT
USER1ID INT
USER2ID INT
USER3ID INT 
```

然后我将不得不创建一个表，在这种情况下可以说是 3 个用户，但这不是性能不佳，也没有可能动态地使组更大。如果我想从群组中创建一个朋友列表，那么我也不能说用户只能有 3 个朋友。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T12:24:31.940

你需要2张桌子：

```
GROUPS - GroupId, GroupName
USERS - UserId, UserName, Password, GroupId 
```

USERS 中的 GroupId 将用户条目链接到 GROUPS。您也可以（应该）使用[外键](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)强加链接。

如果用户可以属于多个组，则需要[多对多](http://www.tomjewett.com/dbdesign/dbdesign.php?page=manymany.php)关系。这是通过如下所示的第三张表实现的：

```
GROUPS - GroupId, GroupName 
USERS - UserId, UserName, Password
USERS_GROUPS - UserId, GroupId 
```

# java - 如何实例化通用spring bean？

> ID：13914103
> 
> 赞同：0
> 
> 时间：2012-12-17T12:22:11.903
> 
> 标签：java, spring, hibernate, generics, spring-mvc

我正在尝试创建一个通用类来帮助我减少样板代码。我为此使用 Spring 3 (MVC) 和 Hibernate 4。

类看起来像这样：

```
@Repository("AutoComplete")
public class AutoComplete<T extends Serializable> implements IAutoComplete {

    @Autowired
    private SessionFactory sessionFactory;

    private Class<T> entity;

    public AutoComplete(Class<T> entity) {
        this.setEntity(entity);
    }

    @Transactional(readOnly=true)
    public List<String> getAllFTS(String searchTerm) {
        Session session = sessionFactory.getCurrentSession();
        return null;
    }

    public Class<T> getEntity() {
        return entity;
    }

    public void setEntity(Class<T> entity) {
        this.entity = entity;
    }

} 
```

我正在像这样实例化bean：

```
IAutoComplete place = new AutoComplete<Place>(Place.class);
place.getAllFTS("something"); 
```

如果我运行代码，我会收到“未找到默认构造函数”异常。如果我添加一个默认构造函数，我会在这一行得到空指针异常：

```
Session session = sessionFactory.getCurrentSession(); 
```

为什么会这样，我该如何解决这个问题？我猜这个问题是因为 bean 没有被 Spring 本身实例化，所以它不能自动装配字段。我想自己实例化 bean，但如果可能的话，仍然可以管理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:27:00.500

确保您已`<context:component-scan base-package='package name'>`在 xml bean 定义文件中添加。

由于@Repository 是原型，Spring 容器将进行类路径扫描，添加它的 bean 定义并注入它的依赖项。

稍后您可以使用 bean 名称（AutoComplete）从 ApplicationContext 获取 bean 的句柄。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:36:27.990

Spring 容器会为你实例化这个 bean，在这种情况下，sessionFactory 会被注入。你用你自己的代码实例化这个bean：new AutoComplete()，当然sessionFactory是null。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T12:38:37.560

永远不要使用具有 @Autowired 注释的字段来实例化类。如果你这样做，该字段将导致 null。你应该做的是你应该得到一个 Spring 的 ApplicationContext 的引用（你可以通过实现 ApplicationContextAware 接口来做到这一点）并在你的 AutoComplete 类的默认构造函数中使用以下代码。

```
public AutoComplete() {
    sessionFactory = (SessionFactory) applicationContext.getBean("sessionFactory");
} 
```

使用 Spring 时的主要实践之一是我们自己消除对象的实例化。我们应该在 spring 配置中指定所有内容，以便 Spring 在需要时为我们实例化对象。但是在您的情况下，您需要使用通用方法。

# java - 将 .cer 作为“受信任的证书”和“安全站点”导入 java 密钥库

> ID：13914104
> 
> 赞同：2
> 
> 时间：2012-12-17T12:22:14.260
> 
> 标签：java, security, certificate

我尝试将两个 .cert 文件导入 java 密钥库。一个作为“受信任的证书”，一个作为“安全站点”。

但他们总是进入“安全站点 CA”。

我究竟做错了什么？

这是我的脚本：

```
C:
cd %programfiles%\java\jre6
.\bin\keytool.exe -importcert -alias zert1 -file D:\Certs\cert.cer -trustcacerts -keystore ./lib/security/cacerts -storepass changeit -noprompt 
```

# tomcat - 如何在 servlet web.xml 中设置 Tomcat 的版本？

> ID：13914105
> 
> 赞同：5
> 
> 时间：2012-12-17T12:22:20.620
> 
> 标签：tomcat, servlets, version, web.xml

在 Tomcat 管理器 Web 界面中有不同的列用于 servlet 中指定的数据。例如，“显示名称”列填充`<display-name>`了 web.xml 中标记的值。另一列指定版本。如何在 web.xml 或 WAR 中设置它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T18:42:52.730

当您使用 Tomcat 的[并行部署功能](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Parallel_deployment)时，会显示您看到的“版本号” 。

`context-name##version`如果您想在其中查看版本号，则必须将您的 WAR 文件重命名`version`为任何将按字母顺序与其他版本进行比较的字符串，以便选择最新版本。

在开始使用之前，您确实需要阅读并行部署的文档，否则您可能会感到困惑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T12:51:59.207

`web.xml`不包含描述应用程序版本的特殊标签。您只能在可选的描述元素中声明应用程序的版本。例如，`<display-name>`标签。但这不会影响任何事情。

构建时只需将`war`文件命名为**myapp##1.7.3.war**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T12:27:27.243

我正在使用 Tomcat 7，它使用 WAR 文件的版本。我不知道用于此的 web.xml 中的任何内容。

[请参阅此处](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Naming)的 Tomcat 文档。

# javascript - 如何找到文本以特定字符串开头的 li？

> ID：13914107
> 
> 赞同：5
> 
> 时间：2012-12-17T12:22:23.853
> 
> 标签：javascript, jquery, html, dom, text

我有一个函数可以在文本中的任何位置获取`<li>`包含指定给它的顶部的标签。`key`

但我希望它以`<li>`指定给它的键开头。这是代码：

```
function displaySearchResult(key){
   var li=$('.listcontainer ul li:contains('+key+')');
   li.parent().prepend(li);
} 
```

那么如何获取`<li>`文本以指定开头的标签`key`呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T12:28:17.493

使用`filter`.

```
var li = $('.listcontainer ul li').filter(function() { return $(this).text().indexOf(key) === 0; }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:35:31.487

请检查 jquery 中的 filter()。

[筛选](http://api.jquery.com/filter/)

[按 api.jquery 中指定的过滤器演示](http://jsfiddle.net/5mzdZ/)

```
 $('li').filter(function(index) {
   return $('strong', this).length == 1;
 }).css('background-color', 'red');​ 
```

# asp.net - 如何使用 iTextSharp 生成用于在点阵打印机中打印的 PDF？

> ID：13914109
> 
> 赞同：2
> 
> 时间：2012-12-17T12:22:28.563
> 
> 标签：asp.net, pdf, printing, pdf-generation, itextsharp

我一直在使用 iTextSharp 生成 PDF 文档以打印 A4 尺寸的预印纸。我们公司决定使用点阵打印机打印文件。所以我不得不相应地修改代码。

1.  从 PDF 打印时字体不清晰。
2.  对齐不正确。我无法将第一行移到现有边距之上。

请提供一个很好的解决方案来处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T08:57:03.883

对于问题 1，将打印机设置更改为更高的 CPI 有助于提高打印质量。对于问题 2，必须继续测试程序中的 X 和 Y 轴变化，直到对齐正常。

希望它可以帮助某人。

# python - 来自捕获的 pcap python 的 IP 列表

> ID：13914110
> 
> 赞同：2
> 
> 时间：2012-12-17T12:22:34.133
> 
> 标签：python, ip, pcap, scapy

我正在尝试对以前捕获的 Pcap 文件进行排序，我想构建一个 ip 源和目标列表，以便可以对它们进行计算。

我曾尝试使用搜索功能搜索 pcap 文件，但由于 IP 地址失败，有什么想法吗？

最终，我希望代码使用以下代码实时嗅探，然后在 ip 地址时建立一个列表。

```
newpkt = sniff(count = 100, prn=lambda x:x.sprintf("{IP:%IP.src% -> %IP.dst%\n}     {Raw:%Raw.load%\n}")) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T13:17:39.637

这是任何可能需要它的人的结果

```
from scapy.all import *

pkts = rdpcap("capture.cap")

test = ""
for pkt in pkts:
    temp = pkt.sprintf("%IP.src%,%IP.dst%,")
    test = test + temp

print test 
```

# javascript - 无法获取属性“getWindowInformationInternal”的值：对象在 CRM 2011 中为空或未定义

> ID：13914126
> 
> 赞同：0
> 
> 时间：2012-12-17T12:23:29.363
> 
> 标签：javascript, dynamics-crm-2011, dynamics-crm

当我要保存新的服务活动记录时，它会要求安排活动，我点击了“安排”按钮。如果我通过远程桌面连接登录到服务器，它会给出以下错误消息：

> 此字段的自定义事件出错。
> 
> 字段：crmForm
> 
> 事件：onsave
> 
> 错误：无法获取属性“getWindowInformationInternal”的值：对象为空或未定义

我可以看到 IE 调试器中的 JavaScript URL 是：`https://orgURL/_common/global.ashx?ver=-1654397298`

但是当我从服务器外部访问它时它工作正常（两者都是 IE-9）。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:06:46.830

我将首先清除您的 Internet 缓存/临时文件，然后重新启动浏览器。

如果失败，下一步是查看此文档：[http ://technet.microsoft.com/en-us/library/hh204512.aspx](http://technet.microsoft.com/en-us/library/hh204512.aspx)

特别是关于“配置 Microsoft Dynamics CRM 客户端以获得最佳性能”的部分。

# mysql - 在没有超级权限的mysql中创建汉明距离函数

> ID：13914127
> 
> 赞同：3
> 
> 时间：2012-12-17T12:23:35.670
> 
> 标签：mysql, levenshtein-distance, hamming-distance, binary-log

我想在我的 MySQL 数据库中使用汉明距离（通过 phpMyAdmin 使用），但没有成功使用[此处](https://stackoverflow.com/questions/4777070/hamming-distance-on-binary-strings-in-sql)给出的代码**创建函数**。

我指的是这段代码：

```
CREATE FUNCTION HAMMINGDISTANCE(
A0 BIGINT, A1 BIGINT, A2 BIGINT, A3 BIGINT,
B0 BIGINT, B1 BIGINT, B2 BIGINT, B3 BIGINT
)
RETURNS INT DETERMINISTIC
RETURN
  BIT_COUNT(A0 ^ B0) +
  BIT_COUNT(A1 ^ B1) +
  BIT_COUNT(A2 ^ B2) +
  BIT_COUNT(A3 ^ B3); 
```

问题是我没有“超级特权”。我还尝试将这段代码放在两者之间`DELIMITER //`（它适用于 Levenshtein 距离函数，见下文），但也没有解决问题 - 我得到了一个超时：

> `/usr/share/phpmyadmin/libraries/import/sql.php`第 132 行超过了 300 秒的最大执行时间

无论如何，我对 MySQL 还是很陌生，所以我想知道是否有人可以帮助我以其他方式在 MySQL 中创建汉明函数。

顺便说一句，我也在使用[Levenshtein 距离函数](http://www.supermind.org/blog/927/working-mysql-5-1-levenshtein-stored-procedure)，这个函数的创建工作得很好。然而，我发现应该使用 Levenshtein 距离来计算两个字符串之间的距离，而应该使用汉明距离来计算数值数据。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-18T18:40:25.723

你需要`CREATE ROUTINE`许可。

# android - JSoup+table+listview

> ID：13914128
> 
> 赞同：0
> 
> 时间：2012-12-17T12:23:37.610
> 
> 标签：android, listview, html-table, jsoup

我才开始使用 JSoup（也是一个 Android 开发者）。我有以下html：

```
<div class="srchShow" id="baseSrch">
<table>
<tbody>
<tr valign="top">
<td>1.</td>
  <td>
<div class="doc_stop" title="Text is not available in the evening"></div>
  </td>

<td class="srchitem">
<a href="http://base.consultant.ru/cons/cgi/online.cgi?req=doc;base=LAW;n=98570" onclick="return sendToDoc(this);" target="_blank">
TextTExtTextText
</a>
</td>
</tr>

<tr valign="top">
<td>2.</td>
   <td>
<div class="doc_stop" title="Text is not available in the evening"></div>
   </td>

<td class="srchitem">
<a href="http://base.consultant.ru/cons/cgi/online.cgi?req=doc;base=LAW;n=133905" onclick="return sendToDoc(this);" target="_blank">
Text2TExt2Text2Text2
</a>
</td>
</tr> 
```

我需要从每个`<td class="srchitem">` 我的意思（链接和文本）中获取所有信息然后我想在单独的行中添加每个组合链接和文本

现在我只写这个：

```
public class MainActivity extends Activity {
MyTask mt;
  TextView tvInfo;
  String URL="http://www.consultant.ru/search/?q=codex";
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    tvInfo = (TextView) findViewById(R.id.tvInfo);
  }

  public void onclick(View v) {
    mt = new MyTask();
    mt.execute(URL);
  }

  class MyTask extends AsyncTask<String, Void, String> {

    @Override
    protected void onPreExecute() {
      super.onPreExecute();
      tvInfo.setText("Please wait...");
    }

    protected String doInBackground(String... params) {
         String what1=null;
        String url=params[0];

    try {
       Document doc = Jsoup.connect(url).get();
       Elements divs = doc.select("td.srchitem");
        what1=divs.text();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return what1;
    }

    protected void onPostExecute(String result) {
      super.onPostExecute(result);
      tvInfo.setText(result);
    }
  }
} 
```

我添加了一个文本视图并在其中发布了结果。谁能给我建议和帮助，如何修改我可以做的我上面描述的程序（特别是如何`<td class="srchitem">`正确解析每个程序）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:39:52.483

我只能帮助您解决问题的 Jsoup 部分。

以下是获取链接及其文本的方法（简体）：

```
final String url = "http://www.consultant.ru/search/?q=codex";
Document doc = Jsoup.connect(url).get();

String absUrl;
String text;

for( Element element : doc.select("td.srchItem > a") ) // Select each link within 'td' with class 'srchItem'
{
    absUrl = element.absUrl("href"); // Get the (absolute) URL of the Link
    text = element.text(); // Get the Text of the Link

    System.out.println(absUrl + "\t->\t" + text); // Output - only as an example
} 
```

**输出：**

```
http://www.consultant.ru/document/cons_doc_LAW_98570/   ->  Постановление Правительства РФ от 09.03.2010 N 132 "Об обязательных требованиях в отношении отдельных видов продукции и связанных с требованиями к ней процессов проектирования (включая изыскания), производства, строительства, монтажа, наладки, эксплуатации, хранения, перевозки, реализации и утилизации, содержащихся в технических регламентах Республики Казахстан, являющейся государством - участником таможенного союза"
http://www.consultant.ru/document/cons_doc_LAW_133905/  ->  Приказ ФТС России от 18.04.2012 N 760 "Об утверждении Административного регламента Федеральной таможенной службы и определяемых ею таможенных органов по предоставлению государственной услуги по принятию предварительных решений по классификации товаров по единой Товарной номенклатуре внешнеэкономической деятельности Таможенного союза" (Зарегистрировано в Минюсте России 03.08.2012 N 25108)
http://www.consultant.ru/document/cons_doc_LAW_123769/  ->  Постановление Главного государственного санитарного врача РФ от 14.11.2001 N 36 (ред. от 06.07.2011) "О введении в действие Санитарных правил" (вместе с "СанПиН 2.3.2.1078-01\. 2.3.2\. Продовольственное сырье и пищевые продукты. Гигиенические требования безопасности и пищевой ценности пищевых продуктов. Санитарно-эпидемиологические правила и нормативы", утв. Главным государственным санитарным врачом РФ 06.11.2001) (Зарегистрировано в Минюсте РФ 22.03.2002 N 3326)
http://www.consultant.ru/document/cons_doc_LAW_111290/  ->  Постановление Главного государственного санитарного врача РФ от 18.04.2003 N 59 (ред. от 23.12.2010) "О введении в действие Санитарно-эпидемиологических правил и нормативов СанПиН 2.3.2.1293-03" (вместе с "СанПиН 2.3.2.1293-03\. 2.3.2\. Продовольственное сырье и пищевые продукты. Гигиенические требования по применению пищевых добавок. Санитарно-эпидемиологические правила и нормативы", утв. Главным государственным санитарным врачом РФ 18.04.2003) (Зарегистрировано в Минюсте РФ 02.06.2003 N 4613)
http://www.consultant.ru/document/cons_doc_LAW_104122/  ->  "МУ 2.1.4.1184-03\. 2.1.4\. Питьевая вода и водоснабжение населенных мест. Методические указания по внедрению и применению санитарно-эпидемиологических правил и нормативов СанПиН 2.1.4.1116-02 "Питьевая вода. Гигиенические требования к качеству воды, расфасованной в емкости. Контроль качества". Методические указания" (вместе с "Методикой бактериологического контроля емкостей и укупорочных изделий") (утв. Главным государственным санитарным врачом РФ 15.01.2003) (ред. от 07.07.2010)
http://www.consultant.ru/document/cons_doc_LAW_99651/   ->  Приказ Ростехрегулирования от 26.03.2010 N 867 "Об утверждении перечня используемых в Республике Казахстан документов в области стандартизации, а также документов, содержащих правила и методы исследований (испытаний) и измерений, в том числе правила отбора образцов, необходимых для применения и исполнения обязательных требований, предусмотренных перечнем, утвержденным Постановлением Правительства Российской Федерации от 9 марта 2010 г. N 132, и осуществления оценки соответствия в отношении отдельных видов продукции и связанных с требованиями к ней процессов"
http://www.consultant.ru/document/cons_doc_LAW_130011/  ->  "МУ 4.1/4.2.2486-09\. 4.1/4.2\. Методы контроля. Химические и микробиологические факторы. Идентификация, в том числе в целях выявления фальсификации, соковой продукции из фруктов и овощей. Методические указания" (утв. Роспотребнадзором 20.02.2009)
http://www.consultant.ru/document/cons_doc_LAW_130010/  ->  "МУ 4.1/4.2.2484-09\. 4.1/4.2\. Методы контроля. Химические и микробиологические факторы. Оценка подлинности и выявление фальсификации молочной продукции. Методические указания" (утв. Роспотребнадзором 11.02.2009)
http://www.consultant.ru/document/cons_doc_LAW_123237/  ->  Определение Верховного Суда РФ от 29.11.2011 N КАС11-673 <Об оставлении без изменения решения Верховного Суда РФ от 06.10.2011 N ГКПИ11-874, которым отказано в удовлетворении заявления о признании частично недействующим Приложения 7 к СанПиН 2.3.2.1078-01, утв. Постановлением Главного государственного санитарного врача РФ от 14.11.2001 N 36>
http://www.consultant.ru/document/cons_doc_LAW_120673/  ->  Решение Верховного Суда РФ от 06.10.2011 N ГКПИ11-874 <Об отказе в удовлетворении заявления о признании частично недействующим Приложения 7 к СанПиН 2.3.2.1078-01, утв. Постановлением Главного государственного санитарного врача РФ от 14.11.2001 N 36> 
```

# android - 如何使用 android java 应用程序访问我的根 android 手机的 \data\data 文件夹？

> ID：13914129
> 
> 赞同：0
> 
> 时间：2012-12-17T12:23:39.680
> 
> 标签：android

我有根 HTC Explorer A310e 并希望在不使用 superuser.apk 的情况下访问它的 \data\data 目录。有没有使用 Android Java 应用程序的解决方案。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:27:01.130

这取决于您在 root 时安装的`su`（或任何其他[setuid](http://en.wikipedia.org/wiki/Setuid)二进制文件）的版本。根 Android 时安装的“标准”`su`工具需要 Superuser.apk 以便为执行根活动提供用户授权，但您可以安装一个不需要的工具。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T12:25:41.523

```
 File f = new File("/data/data/your.namespace/yourfile.ext"); 
```

# sql-agent-job - 无法在 SQL 代理作业中运行 CmdExec

> ID：13914132
> 
> 赞同：2
> 
> 时间：2012-12-17T12:24:23.273
> 
> 标签：sql-agent-job

我在命令提示符中编写了一个命令，该命令旨在使用 psftp.exe 连接到远程服务器并在删除文件之前从中检索文件。当我在命令提示符下运行它时，它可以完美运行。当我尝试将其放入 SQL 代理作业的命令窗口然后运行该作业时，它只是挂起。查看命令有什么会导致这种情况吗？

我听说如果可执行文件显示提示，那么它会导致这种行为，但当然 psftp.exe 不会，所以我认为这不是问题。

我正在我的本地用户下运行该作业，该用户也具有完全的管理员权限。

我应该补充一点，作业中的命令将打开一个文本文件，以便读出 psftp.exe 的命令。我也包含了这个命令。

**主要 CmdExec 命令：**

```
W:\Software\psftp\psftp.exe -pw password1 -b W:\Software\psftp\Retrieval.txt -batch account@123.123.123.123 
```

**文本文件 psftp.exe 命令**

```
cd out
lcd "C:\Documents and Settings\MyUser\My Documents\"
mget /out/*.txt
rm /out/*txt
quit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T10:01:54.927

这里的问题是双重的。首先是 SQL 代理作业在我们的生产服务器上的“服务”帐户下运行。这是我们服务器上用于运行服务等的单独用户帐户。虽然这本身不是问题，但我将解释它是根本原因。

当我第一次手动运行 PSFTP.exe 并提出满足要求的解决方案时（读作管理器松散耦合的解释），我被要求向注册表添加一个键。我没有注意到这一点，当我想要自动化这个过程时，它让我陷入了困境。由于我在通过命令行调试时大部分时间都在本地用户下运行，所以我从来没有遇到任何问题。当我尝试将批处理文件等放入 SQL 代理作业时，我有效地更改了我正在运行的用户，因为我们总是将我们的“服务”用户帐户用于此类作业。该用户当然不会为连接到外部 sFTP 服务器添加注册表项。

为了解决这个问题，我必须在单独的用户下手动运行 PSFTP.exe 程序（通过在“服务”帐户下登录机器）并添加注册表项。完成此操作后，SQL 代理作业成功运行。这么简单的事情，但它让我很头疼，因为我当然没有看到任何异常或日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:28:18.173

它会像密码问题这样简单吗？你检查过事件日志吗？您可以在此处发布事件日志报告吗？

# google-apps-script - 脚本数据库：rateMax。

> ID：13914138
> 
> 赞同：3
> 
> 时间：2012-12-17T12:24:40.617
> 
> 标签：google-apps-script

自上周以来，当我尝试在 ScriptDB 上请求和获取结果时，我收到此错误：“服务在短时间内调用了太多次：scriptdb rateMax。在调用之间尝试 Utilities.sleep(1000)。（第 XXX 行）”

下面是一个重现该问题的小示例脚本：

```
var result = db.query({key:value});
while (result.hasNext()) {
    var current = result.next();

    if(current.someProperty == true) {
      objectsToRemove.push(current);
   }          
} 
```

我尝试在发生错误的行之前/之后添加对“Utilities.sleep(1000)”的调用，但它没有改变任何东西。

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:45:49.383

在尝试运行此代码之前，请尝试清除您的数据库。您可能有太多重复项，这就是为什么超出限制或尝试将查询分成几部分以使过程更容易并避免错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:03:18.947

没人遇到这个问题吗？

我优化了对 DB 的调用，但我必须让我的脚本在 1.5 秒内休眠以避免这个错误，这会导致我的脚本超时......

# c - 为什么这个字符替换程序不起作用？

> ID：13914140
> 
> 赞同：0
> 
> 时间：2012-12-17T12:24:43.367
> 
> 标签：c, replace, int

以下程序可以编译，但其中包含乱码数据并且不会替换..

```
#include <stdio.h>
#include <string.h>

int main (void)
    {
    int i;
    char string[100];
    printf("Enter a string");
    fgets(string, 100, stdin);
    for (i=0; i<strlen(string);i++)
    {
        if (string[i]=='o')
        {
            string[i]='0';

        }

    }
    printf("%c", string);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:29:00.800

循环前计算strlen

使用 %s 而不是 %c

```
printf("%s", string); 
```

正如 Vallabh Patade 所建议的，您不需要计算长度：

```
char *p, string[100];

printf("Enter a string");
p = fgets(string, 100, stdin);
while (*p) {
    if (*p == 'o') *p = '0';
    p++;
}
printf("%s", string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T12:38:59.890

1) 改变

```
printf("%c", string); 
```

到

```
printf("%c", string[i]); 
```

在循环内或

2）从循环中删除并添加

```
printf("%s", string); 
```

循环之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T12:39:52.910

如果有其他问题，我无所谓。只有语句应该更改为

```
 printf("%s", string); 
```

因为我们正在打印一个字符串。也许字符串保持所需的输出只是我们以错误的方式打印它。

# ios - 项目文件问题

> ID：13914147
> 
> 赞同：1
> 
> 时间：2012-12-17T12:25:12.440
> 
> 标签：ios, xcode, svn

我在我的应用程序（SVN 的当前工作副本）中添加了图像，方法是右键单击文件夹 -> 将文件添加到图像过滤器，之后我的应用程序中的所有文件都显示为“？” 象征 。 ![在此处输入图像描述](../Images/39c5a2e8a506e3787031ad99c774b474.png)

请指导我解决此问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:29:26.760

**选择带****问号**的所有文件。您需要选择它们，然后右键单击并在**源代码控制**下，选择**“添加”**。

然后只有当你提交文件时，这些文件才会被添加到 SVN。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T12:29:56.740

“？” 表示这些尚未添加到存储库中。如果您想将这些添加到存储库，请按照以下步骤操作 -

1.  选择所有这些文件。
2.  右键单击它
3.  源代码管理 -> 添加

这将标记您的文件以添加到存储库中。然后你需要提交更改。

# wordpress - 无法从标题中删除提要链接

> ID：13914149
> 
> 赞同：1
> 
> 时间：2012-12-17T12:25:21.413
> 
> 标签：wordpress, templates

我试图通过删除

```
remove_action( 'wp_head', 'feed_links', 10); 
```

在模板的functions.php中，但它不起作用。我还有

```
<link rel="alternate" type="application/rss+xml" title="... Comments Feed" href="..." /> 
```

我正在使用 Wordpress 3.4.2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:37:51.357

尝试

```
function remove_header_info() {

remove_action('wp_head', 'feed_links', 2);  //removes feeds
remove_action('wp_head', 'feed_links_extra', 3);  //removes comment feed links
}

add_action('init', 'remove_header_info'); 
```

# html - 列表中的暗箱

> ID：13914157
> 
> 赞同：1
> 
> 时间：2012-12-17T12:25:51.723
> 
> 标签：html, html-lists, image, shadowbox

我在列表中使用 shadowbox 时遇到问题。我试图与 shadowbox 一起使用的图像位于 li 标签内。我试图在列表之外的 上实现 shadowbox，并且工作正常。

HTML：

```
<div id="gallery" class="content-2">
        <nav id="filter"></nav>
        <section id="container">
            <ul id="stage">
                <li data-tags="Print Design"><a rel="shadowbox" href="_img/shots/1.jpg"><img src="_img/shots/1.jpg" alt="Illustration" /></a></li>
                <li data-tags="Logo Design,Print Design"><a rel="shadowbox" href="_img/shots/2.jpg"><img src="_img/shots/2.jpg" alt="Illustration" /></a></li>
           </ul>
        </section>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:16:22.793

是的，这是可能的，从您提供的有限 HTML 来看，您似乎也在使用[**jQuery Quicksand**](http://razorjack.net/quicksand/)插件？

如果是这样，请查看我不久前基于此[**在线教程制作的**](http://tutorialzine.com/2011/06/beautiful-portfolio-html5-jquery/)[**以 Shadowbox 为特色的流沙演示**](http://shadowbox.1309102.n2.nabble.com/Quicksand-Demo-featuring-Shadowbox-tp7303500.html)。[](http://tutorialzine.com/2011/06/beautiful-portfolio-html5-jquery/)

 **即使你没有使用流沙，让 Shadowbox 像你期望的那样工作*的想法是一样的：那就是在你的**其他脚本*`Shadowbox.setup();`的回调过程中运行。

 *基本上，在另一个脚本改变 DOM 并围绕 Shadowbox 对象的其他元素进行更改后，Shadowbox 不会缓存新对象，直到它们通过`Shadowbox.setup()`.

*注意：*您可能必须先运行`Shadowbox.clearCache();`才能清除以前捕获的链接，否则您的克隆对象开始成倍增加。

另外，一定要打开演示`.js`文件，因为里面有很多我写的教程评论，专门用于 Shadowbox 的。***

# jquery - jQuery加载延迟

> ID：13914162
> 
> 赞同：0
> 
> 时间：2012-12-17T12:26:00.367
> 
> 标签：jquery, magento

嗨，我有一段代码用于使图像变灰，当您将鼠标悬停在图像上时，它们会淡入颜色。

我似乎对它有一个小问题，因为它在工作前会先上色然后变灰。

有没有办法让它加载更快？是冲突导致了这种延迟，还是只是使用了不好的代码。

使用它的页面示例如下： [http ://www.emmaphillipsbridal.com/brides/gowns.html](http://www.emmaphillipsbridal.com/brides/gowns.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:38:11.157

据我所知`grayscale()`，渲染每个克隆图像需要一些时间的功能。我会尝试最初通过 CSS 隐藏图像，然后在`clone image`循环后显示它们

# c++ - std::find、反向或直接查找取决于参数，优雅的方式

> ID：13914165
> 
> 赞同：2
> 
> 时间：2012-12-17T12:26:08.293
> 
> 标签：c++, stl

在 STL 容器中依赖方向搜索还有什么比这更优雅的方法呢？

```
iterator i;

if ( condition )
  i = std::find( begin, end, value );
else
  i = std::find( rbegin, rend, value ).base(); 
```

没有 C++11，允许升压。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:46:55.303

如果允许提升，您可以使用`boost::range`and [`reversed`](http://www.boost.org/doc/libs/1_52_0/libs/range/doc/html/range/reference/adaptors/reference/reversed.html)。这是一个很好的例子，其中范围确实优于迭代器。

# objective-c - 如何将文件复制到需要 Obj-C 或 C 中特殊权限的位置？

> ID：13914167
> 
> 赞同：2
> 
> 时间：2012-12-17T12:26:21.057
> 
> 标签：objective-c, privileges, file-manager

我非常了解 Privileged Helper 工具以及部署它们的目的和技术。我还成功地创建并安装了它们——但我找不到一个示例来说明如何简单地将文件复制到需要特殊权限的位置。我认为 FSPathCopyObjectSync 将允许我实现这一点，[尽管我发现该方法已被弃用，以及似乎是 Mac OSX 上的每个文件操作](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/File_Manager/Reference/reference.html)。

这是我到目前为止发现的：

• [BetterAuthorizationSample](http://developer.apple.com/library/mac/#/legacy/mac/library/samplecode/BetterAuthorizationSample/Introduction/Intro.html)（已弃用）

• [SMJobBless](http://developer.apple.com/library/mac/#samplecode/SMJobBless/Listings/ReadMe_txt.html)（基本上什么都不做）

• [Privileged Helper 示例](https://bitbucket.org/sinbad/privilegedhelperexample/src/528347da75ef?at=tip)（不安装下面的命令行工具）

这是上面示例中的方法：

```
if (pFilename)
{
    // Base command minus cert name and file namem is 76 characters, 1 for NULL
    char* valCodeSignCmd = 0;
    // asprintf allocates & never overflows
    if (asprintf(&valCodeSignCmd, "codesign -v -R=\"certificate leaf[subject.CN] = \\\"%s\\\" and anchor apple generic\" \"%s\"", kSigningCertCommonName, pFilename) != -1)
    {
        if (system(valCodeSignCmd) == 0)
        {
            // Passed codesign validation
            // OK to copy now - overwrite if present
            OSStatus fsret = FSPathCopyObjectSync(pFilename, "/usr/local/bin", toolName, NULL, kFSFileOperationOverwrite);
            if (fsret != noErr)
                success = false;
        }

        // Clean up
        free(valCodeSignCmd);

    }
    else
        success = false;
} 
```

以史蒂夫乔布斯的名义，这里发生了什么？

# android - android如何向特定用户发送推文？

> ID：13914168
> 
> 赞同：0
> 
> 时间：2012-12-17T12:26:22.427
> 
> 标签：android, twitter

我正在制作推文按钮以将定义的消息发送给预定义的用户。

此代码仅将推文发送到我的墙上当我发推文时如何设置接收器？

```
Intent intent = new Intent(Intent.ACTION_SEND);
        intent.setComponent(targetComponent);
        String intentType = (targetComponent.getClassName().contains("com.twidroid")) ? 
            "application/twitter" : "text/plain";
        intent.setType(intentType);
        intent.putExtra(Intent.EXTRA_TEXT, "@victim  Spacemarine has voted for the sake of Emperor! #becounted");
        this.startActivity(intent); 
```

我的结果 ![在此处输入图像描述](../Images/5f00079adf2c7e63ead86bfbea1a8448.png)

但它像我想要的那样进入我的墙壁而不是受害者的墙壁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:52:45.137

如果用户关注您，您将能够向他发送直接消息。否则，您拥有的唯一解决方案就是您在问题中使用的解决方案。

# javascript - 正则表达式检查带小数位的数字

> ID：13914172
> 
> 赞同：0
> 
> 时间：2012-12-17T12:26:36.480
> 
> 标签：javascript, regex, decimal, repeat

我有一个正则表达式来检查输入的价格。价格不能是 5 位数或更多，但可以包含选项十进制数。所以 -

*   1000 = 允许
*   9999.99 = 允许
*   10000 = 不允许
*   100.000 = 不允许

这是我到目前为止所拥有的，它正在正确检查小数位数，但没有检查小数位前的位数。我究竟做错了什么？

```
var reg = new RegExp("^(\d{0,4})+(\.[0-9]{2})?$"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T12:28:41.550

你有一个错误的量词

```
var reg = new RegExp("^(\d{0,4})(\.[0-9]{2})?$"); 
```

只需删除`+`，您的正则表达式就可以了。

[在 Regexr 上](http://regexr.com?335ig)查看

这样`(\d{0,4})+`，您将重复您的第一组，因此您可以匹配点之前的任意数量的数字。

如果我双重转义，您的 jsfiddle 对我有用

```
var reg = new RegExp("^\\d{0,4}(?:\\.\\d{2})?$"); 
```

或者不要把你的正则表达式放在一个字符串中

```
var reg = new RegExp(/^(\d{0,4})(\.[0-9]{2})?$/); 
```

# iphone - 缓出时间实施

> ID：13914173
> 
> 赞同：2
> 
> 时间：2012-12-17T12:26:40.463
> 
> 标签：iphone, ios, ipad

我有一个带有方法的组件`setPercentCompleted`，我想在 1 秒内调用 500 个点的距离。

为了做到这一点，我只需将计时器设置为某个时间间隔，并`setPercentCompleted`在每次计时器触发时调用。

如何使用`ease-out`曲线实现此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:05:17.673

这很像一个物理问题。

您需要以给定的“速度”和一定的“减速度”出发，以便在给定的时间（1.0 秒）内达到给定的“位移”（1.0）。

您需要确定的 2 个数字是初始速度和所需的减速度。

使用 SUVAT 并代入 s = 1 和 t = 1。

你从

```
s = ut + 1/2 * at^2 
```

至

```
a = 2 - 2u 
```

只要您的初始速度 (u) 和您应用的加速度 (a) 使这个等式有效，那么您将在 1 秒内达到 1 的距离。

您可以通过将数字放入电子表格来查看效果。您必须在 0 和 2 之间选择一个 u 值，这将提供在 1 秒内达到 1.0 所需的加速度。

你有你的 u 数量的起始值，然后每次加速它你的值。

事实上，在 0 和 1 之间选择 u 值会产生“缓入”效果。在 1 和 2 之间选择 u 值将产生“缓出”效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:25:00.860

实现缓动函数有许多不同的方程。[您可以从这个JQuery easing 插件](http://gsgd.co.uk/sandbox/jquery/easing/)中获得一些灵感。[源代码](http://gsgd.co.uk/sandbox/jquery/easing/jquery.easing.1.3.js)应该足够简单，可以轻松地移植到 Objective C。

# android - Android试图在资源原始文件夹中打开文件，一直说文件不存在

> ID：13914177
> 
> 赞同：0
> 
> 时间：2012-12-17T12:26:45.703
> 
> 标签：android

我有代码可以打开存储在资源文件夹内的原始文件夹中的文件。(FileNotFoundException 的异常一直持续，无法弄清楚原因。

代码

```
package besttech.rtstarwars;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

import android.app.Activity;
import android.content.ContentResolver;
import android.content.res.AssetFileDescriptor;
import android.net.Uri;
import android.os.Bundle;

public class RingtunesstarwarsActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        testringtone();
    }

    void testringtone()
    {
        File newSoundFile = new File("/sdcard/", "myringtone.oog");
        Uri mUri = Uri.parse("android.resource://besttech.rtstarwars/R.raw.blasters.mp3");
        ContentResolver mCr = getContentResolver();
        AssetFileDescriptor soundFile;
        try {
            soundFile= mCr.openAssetFileDescriptor(mUri, "r");
        } catch (FileNotFoundException e) {

        // CODE KEEPS GOING HERE
        soundFile=null;   
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:30:32.513

将您的 URI 代码更改为：

```
String strUri = "android.resource://"+ 
         RingtunesstarwarsActivity.this.getPackageName()+  "/" + "raw/blasters";
Uri mUri = Uri.parse(strUri); 
```

# c++ - 为什么 vptr 不是静态的？

> ID：13914178
> 
> 赞同：15
> 
> 时间：2012-12-17T12:26:50.323
> 
> 标签：c++, function, virtual, vtable, vptr

每个包含一个或多个虚函数的类都有一个与之关联的 Vtable。一个名为 vptr 的 void 指针指向该 vtable。该类的每个对象都包含指向同一个 Vtable 的 vptr。那为什么不是 vptr static ？与其将 vptr 与对象相关联，不如将其与类相关联？

![在此处输入图像描述](../Images/0a5b42d9630c424e0a26429104e06a75.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T12:28:38.570

对象的运行时类是对象本身的一个属性。实际上，`vptr`表示运行时类，因此不能是`static`. 但是，它所指向的内容可以由同一运行时类的所有实例共享。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-17T14:10:53.717

你的图表是错误的。没有一个 vtable，每个多态类型都有一个 vtable。vptr for`A`指向 vtable for `A`， vptr for`A1`指向 vtable for`A1`等。

鉴于：

```
class A {
public:
  virtual void foo();
  virtual void bar();
};
class A1 : public A {
  virtual void foo();
};
class A2 : public A {
  virtual void foo();
};
class A3 : public A {
  virtual void bar();
  virtual void baz();
}; 
```

包含 的虚表包含`A`的虚表包含 的虚表包含 的虚表`{ &A::foo, &A::bar }`
`A1``{ &A1::foo, &A::bar }`
`A2``{ &A2::foo, &A::bar }`
`A3``{ &A::foo, &A3::bar, &A3::baz }`

因此，当您调用`a.foo()`编译器时，编译器会按照对象的 vptr 查找 vtable，然后调用 vtable 中的第一个函数。

假设一个编译器使用了你的想法，我们写：

```
A1 a1;
A2 a2;
A& a = (std::rand() % 2) ? a1 : a2;
a.foo(); 
```

编译器在基类中`A`查找并找到该类的 vptr `A`（根据您的想法），该类是`static`类型的属性，而不是引用绑定到`A`的对象的成员。`a`该 vptr 是否指向 vtable for `A`, or `A1`or`A2`或其他东西？如果它指向 vtable ，`A1`则在 50% 的时间里`a`引用是错误的`a2`，反之亦然。

现在假设我们写：

```
A1 a1;
A2 a2;
A& a = a1;
A& aa = a2;
a.foo();
aa.foo(); 
```

`a`和`aa`都是对 的引用`A`，但它们需要两个不同的 vptr，一个指向 vtable for `A1`，一个指向 vtable for `A2`。如果 vptr 是一个静态成员，`A`它怎么能同时有两个值呢？唯一合乎逻辑、一致的选择是静态 vptr`A`指向 vtable for `A`。

但这意味着`a.foo()`调用`A::foo()`在它应该调用`A1::foo()`的时候调用，并且调用`aa.foo()`也在`A::foo()`它应该调用的时候调用`A2::foo()`。

显然，您的想法未能实现所需的语义，证明使用您的想法的编译器不能是 C++ 编译器。`A1`编译器无法在`a`不知道派生类型是什么的情况下获取 vtable for甚至尚未编写的派生类型！）或将 vptr 直接存储在对象中。

和 的 vptr 必须不同，`a1`并且`a2`在通过指针或对 base 的引用访问它们时，必须在不知道动态类型的情况下可访问，这样当您通过对基类的引用获取 vptr 时`a`，它仍然指向右侧vtable，而不是基类 vtable。最明显的方法是将 vptr 直接存储在对象中。另一种更复杂的解决方案是将对象地址映射到 vptrs，例如类似的东西，并通过查找`std::map<void*, vtable*>`找到 vtable`a``&a`，但这仍然为每个对象存储一个 vptr 而不是每个类型一个，并且每次创建和销毁多态对象时都需要更多的工作（和动态分配）来更新映射，并且会增加整体内存使用量，因为映射结构会占用空间。将 vptr 嵌入对象本身更简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T12:35:20.690

虚拟表（顺便说一下，C++ 标准中没有提到的一种实现机制）用于在运行时识别对象的动态类型。因此，对象本身必须持有一个指向它的指针。如果它是静态的，那么它只能识别静态类型，它是无用的。

如果您正在考虑以某种方式在`typeid()`内部使用来识别动态类型，然后用它调用静态指针，请注意`typeid()`仅返回属于具有虚函数类型的对象的动态类型；否则它只返回静态类型（当前 C++ 标准中的第 5.2.8 节）。是的，这意味着它以相反的方式工作：`typeid()`通常使用虚拟指针来标识动态类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-01T03:51:38.050

正如每个人都证明 Vptr 是对象的属性。让我们看看为什么？

假设我们有三个对象 `Class Base{ virtual ~Base(); //Class Definition }; Class Derived: public Base{ //Class Definition }; Class Client: public Derived{ //Class Definition };`

持有关系 Base<---Derived<----Client. 客户端类派生自派生类，派生类又派生自基类

`Base * Ob = new Base; Derived * Od = new Derived; Client* Oc = new Client;`

每当 Oc 被破坏时，它应该破坏数据的基础部分、派生部分和客户端部分。为了帮助这个序列，基本析构函数应该是虚拟的，并且对象 Oc 的析构函数指向客户端的析构函数。当对象 Oc 的基析构函数是虚拟编译器时，将代码添加到对象 Oc 的析构函数以调用派生的析构函数，派生的析构函数调用基的析构函数。当 Client 对象被销毁时，此链接会看到所有基础数​​据、派生数据和客户端数据都被销毁。

如果 vptr 是静态的，那么 Oc 的 vtable 条目仍将指向 Base 的析构函数，并且只有 Oc 的基本部分被销毁。oc 的 vptr 应该始终指向大多数派生对象的析构函数，如果 vptr 是静态的，这是不可能的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T12:28:54.727

的全部要点`vptr`是因为您不确切知道对象在运行时具有哪个类。如果您知道这一点，那么虚拟函数调用将是不必要的。也就是说，事实上，当您不使用虚函数时会发生什么。但是对于虚拟功能，如果我有

```
class Sub : Parent {}; 
```

和 type 的值`Parent*`，我不知道在运行时这是否真的是 type 的对象`Parent`或 type 之一`Sub`。vptr让我弄清楚了。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-17T12:31:29.903

虚拟方法表是每个类。一个对象包含一个指向运行时类型 vptr 的指针。

我不认为这是标准半身像中的要求，我使用过的所有编译都以这种方式进行。

即使在您的示例中也是如此。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-03-31T15:38:39.573

@Harsh Maurya：原因可能是，静态成员变量必须在程序中的 Main 函数之前定义。但是，如果我们希望 _vptr 是静态的，其责任（编译器/程序员）在 main 之前在程序中定义 _vptr。以及程序员如何知道 VTABLE 的指针以将其分配给 _vptr。这就是编译器负责将值分配给指针（_vptr）的原因。这发生在类的构造函数（隐藏功能）中。现在，如果 Constructor 出现，每个对象都应该有一个 _vptr。

# autocomplete - Silverlight5 中的自动完成功能

> ID：13914185
> 
> 赞同：0
> 
> 时间：2012-12-17T12:27:19.103
> 
> 标签：autocomplete, silverlight-5.0, selectedtext

我对 Silverlight 自动完成框有一个问题，因为客户端需要使用具有选定文本属性的自动完成框，因为客户端还想从列表中选择或输入文本......

而且我想从网格中设置选定的记录但是当我从网格中选择记录时它应该在自动完成中设置正确但有时它没有设置

我可以绑定自动完成的选定文本属性

我该怎么办 ？

请帮我解决这个问题

谢谢

```
<sdk:AutoCompleteBox Grid.Row="1" Grid.Column="3"  Width="150" HorizontalAlignment="Left" Height="18" Padding="0"
                                             ItemsSource="{Binding ElementName=ResEdit,Path=DataContext.AccNumbers,Mode=OneWay}"
                                             IsTextCompletionEnabled="True" TabIndex="7"
                                             SelectedItem="{Binding ElementName=ResEdit,Path=DataContext.SelectedAccount,Mode=TwoWay}"
                                             Text="{Binding ElementName=ResEdit,Path=DataContext.SelectedAccountText,Mode=TwoWay}"
                                             LostFocus="AutoCompleteBox_LostFocus"
Visibility="{Binding ElementName=ResEdit,Path=DataContext.IsReadOnlyGlAccount,Converter={StaticResource VisibilityConverter}}">
        <sdk:AutoCompleteBox.TextBoxStyle>
            <Style TargetType="TextBox">
                <Setter Property="IsReadOnly" Value="{Binding ElementName=ResEdit,Path=DataContext.InitContrlos.ACCOUNT_NUMBER_OBJEnable,Converter={StaticResource ReadOnlyConverter}}"/>
            </Style>
        </sdk:AutoCompleteBox.TextBoxStyle>
    </sdk:AutoCompleteBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:46:08.353

行 ...

我不知道你到底想要什么，但是，

我找到了一个相关的[stackoverflow 链接](https://stackoverflow.com/questions/8488968/silverlight-5-autocompletebox-bug?rq=1)。为你。

# php - 加载时下拉菜单中断

> ID：13914186
> 
> 赞同：-2
> 
> 时间：2012-12-17T12:27:21.257
> 
> 标签：php, javascript, html

请告诉我为什么我的下拉菜单在加载时中断的解决方案？[单击此处](http://www.fedri.com/bh/)获取链接。

详细信息：

```
 When the website is loading, its showing all the sub menus present inside and after its loads completly its showing correctly. At the start it should be strong and should not show inside present sub menu... 
```

它具有以下java代码。

```
<link href="css/dcmegamenu.css" rel="stylesheet" type="text/css" />
<script type='text/javascript' src='js/jquery.hoverIntent.minified.js'></script>
<script type='text/javascript' src='js/jquery.dcmegamenu.1.3.3.js'></script>
<script type="text/javascript">
$(document).ready(function($){
    $('#mega-menu-7').dcMegaMenu({
        rowItems: '3',
        speed: 'fast',
        effect: 'slide'
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T12:42:54.860

你不包括 jQuery 链接

```
 <script type='text/javascript' src='http://code.jquery.com/jquery-1.8.3.min.js'></script> 
```

`$`通过在准备功能中删除来试试这个

```
 $(document).ready(function() {
   // put all your jQuery goodness in here.
   }); 
```

这是[jQuery 代码](http://docs.jquery.com/Tutorials%3aIntroducing_%24%28document%29.ready%28%29)。所以你必须添加 jQuery 源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T12:32:01.483

试试这个：

```
$(function() {

    // Handler for .ready() called.
    $('#mega-menu-7').dcMegaMenu({
        rowItems: '3',
        speed: 'fast',
        effect: 'slide'
    });

});​ 
```

# primefaces - Primefaces commanbutton 在 5 分钟后第二次调用 ajax

> ID：13914195
> 
> 赞同：1
> 
> 时间：2012-12-17T12:28:07.967
> 
> 标签：primefaces

我在使用 PrimeFaces p:commandButton 时遇到问题。当我单击它发送 ajax 请求的按钮时，我可以在日志表中看到第一次单击时收到的请求。但是如果服务在 5 分钟内没有响应，它会发送另一个请求，这样我就可以在日志表中看到完全相同的请求。

我看不出有任何理由在我的代码中调用 ajax 请求。

这是代码。任何帮助将不胜感激：

```
<p:panel id="mainPanel" style="width:95%;height:90%;">
<p:outputPanel collapsed="true" closable="true" toggleable="true" id="msgPanel" style="margin-bottom:10px;">
    <p:messages />
</p:outputPanel>
<p:outputPanel id="queryPanel">
    <p:fieldset legend="#{cmIaResources['fieldset.queryForm']}" style="width:600px;height:100%;" rendered="#{cmIaQueryBean.renderQueryPanel}">

        <h:form id="queryForm" prependId="false">

            <p:outputPanel id="xxPanel">
                <h:outputText value="#{cmIaResources['queryForm.label.xxText']}" id="name_label" style="width:150px;" />
                <h:outputText value="#{cmIaQueryBean.xx}" id="xx" style="width:150px;" />
            </p:outputPanel>
            </div>
            <p:spacer />

            <p:outputPanel id="yyPanel">
                <h:outputText value="#{cmIaResources['queryForm.label.yyText']}" id="yy_label" style="width:150px;" />
                <p:inputText id="yyID" value="#{cmIaQueryBean.yyID}" maxlength="10" />
            </p:outputPanel>

            <p:outputPanel id="commanBtnPanel">
                <p:commandButton id="queryButton" action="#{cmIaQueryBean.queryCustomerZZ}" value="#{cmIaResources['queryForm.label.queryBtn']}" update=":queryForm :msgPanel :queryResultsPanel :queryPanel" style="float:right" />
            </p:outputPanel>

        </h:form>
    </p:fieldset>
</p:outputPanel>

<p:outputPanel id="queryResultsPanel" style="width:900px;">
    <p:fieldset legend="Sorgu Sonuçları" rendered="#{cmIaQueryBean.renderResult}" style="width:880px;">
        <h:form>
            <h:panelGrid columns="2" style="width:610px;">
                <h:outputText value="Arama Kriterleri:" style="width:150px;" />
                <p:tree value="#{cmIaQueryBean.root}" var="node" id="tree" style="width:450px">
                    <p:treeNode id="treeNode">
                        <h:outputText value="#{node}" id="lblNode" />
                    </p:treeNode>
                </p:tree>
            </h:panelGrid>
        </h:form>
    </p:fieldset>
</p:outputPanel> 
```

# python - 循环刮板

> ID：13914199
> 
> 赞同：0
> 
> 时间：2012-12-17T12:28:15.963
> 
> 标签：python, loops, web-scraping, beautifulsoup

我正在尝试从[http://www.basketball-reference.com/boxscores/201112250DAL.html 获取](http://www.basketball-reference.com/boxscores/201112250DAL.html)常规赛季球队所有比赛的数据。我让所有其他数据农业功能正常工作，我遇到的问题是循环刮板。这是我用来获取下一页 URL 的测试代码。我可以使用它来获取一支球队在常规赛期间打过的所有 66 场比赛的数据，但是要通过这种方式进行大量的输入。自动化这个最简单的解决方案是什么？

谢谢！

```
URL = "http://www.basketball-reference.com/boxscores/201112250DAL.html" 

html = urlopen(URL).read()
soup = BeautifulSoup(html)

def getLink(html, soup):
    links = soup.findAll('a', attrs={'class': 'bold_text'})
    if len(links) == 2:
        a = links[0]
        a = str(a)
        a = a[37:51]
        return a
    if len(links) == 3:
        a = links[1]
        a = str(a)
        a = a[37:51]
        return a
    if len(links) == 4:
        a = links[3]
        a = str(a)
        a = a[37:51]
        return a

print getLink(html, soup)
URL1 = "http://www.basketball-reference.com/boxscores" + getLink(html, soup) + "html"
print URL1
html1 = urlopen(URL1).read()
soup1 = BeautifulSoup(html1)

print getLink(html1, soup1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T20:03:46.020

最简单的方法是访问[http://www.basketball-reference.com/teams/DAL/2012_games.html](http://www.basketball-reference.com/teams/DAL/2012_games.html)并执行以下操作：

```
URL = 'http://www.basketball-reference.com/teams/DAL/2012_games.html'
html = urllib.urlopen(URL).read()
soup = BeautifulSoup(html)

links = soup.findAll('a',text='Box Score') 
```

这将返回带有“Box Score”文本的所有`<a>`标签的列表。用这个测试它：

```
for link in links:
    print link.parent['href']
    page_url = 'http://www.basketball-reference.com' + link.parent['href'] 
```

从这里发出另一个请求`page_url`并继续编码。

这是我使用的全部代码，它对我来说非常有效：

```
from BeautifulSoup import BeautifulSoup
import urllib

url = 'http://www.basketball-reference.com/teams/DAL/2012_games.html'
file_pointer = urllib.urlopen(url)
soup = BeautifulSoup(file_pointer)

links = soup.findAll('a',text='Box Score')
for link in links:
    print link.parent['href'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:42:52.367

最简单的方法是使用[scrapy](http://scrapy.org/)。它会自动为您跟随链接。

它允许您轻松创建复杂的规则来遵循和忽略哪些 url。然后，Scrapy 将遵循与您的规则匹配的任何 url。它确实需要您了解 scrapy 的工作原理，但它们提供了一个很好的快速入门教程。

# windows-phone - 如何在 Windows Phone 8 模拟器中启动 Marketplace

> ID：13914208
> 
> 赞同：5
> 
> 时间：2012-12-17T12:28:49.647
> 
> 标签：windows-phone, windows-phone-8

是否可以将应用程序从 Windows Phone 商店安装到 WP 8 模拟器？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-17T13:05:40.300

不，您不能在模拟器中从商店安装应用程序，因为您无法在模拟器中添加从商店安装应用程序所需的 Microsoft 帐户。

这显然是因为模拟器不被视为 Microsoft id 的受信任平台。这是微软对同一问题的官方回答： http: [//social.msdn.microsoft.com/Forums/en-US/wptools/thread/dfd9ba6f-1d18-486e-aa53-7d0a65d44f12](http://social.msdn.microsoft.com/Forums/en-US/wptools/thread/dfd9ba6f-1d18-486e-aa53-7d0a65d44f12)

**Windows Phone 8.1 更新**

正如 Mathias Lykkegaard Lorenzen 在评论中提到的那样，现在可以在 WP8.1 模拟器中添加 Microsoft 帐户，但仍然无法安装应用程序（显示代码 80070002 的错误消息）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-02T11:18:38.357

市场应用程序通过本[机映像生成器](http://msdn.microsoft.com/en-us/library/6t9t5wcf(v=vs.110).aspx)运行，因此如果它们尚未仅针对 ARM 进行编译，它们将在 ngen 完成它的工作后运行。

而且你显然不能在 x86 模拟器上安装 ARM 应用程序。

# android - admob 横幅的布局错误，以编程方式设置大小

> ID：13914210
> 
> 赞同：2
> 
> 时间：2012-12-17T12:28:52.367
> 
> 标签：android, layout, size, admob, adview

![在此处输入图像描述](../Images/e0e62a8a21c1b1b700ad8865658161b2.png)
![在此处输入图像描述](../Images/ca12211edfbfe152acea4c69b89caea9.png)

```
 <TableRow android:id="@+id/tableRow1"
            android:layout_marginTop="200dp"
           >
        <ImageButton
            android:id="@+id/menu1"
            android:layout_width="75dip"
            android:layout_height="74dip"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginTop="57dp"
            android:background="@android:color/transparent"
            android:scaleType="fitXY"
            android:src="@drawable/menu1"
            android:layout_weight="1" />
        <ImageButton
            android:id="@+id/menu2"
            android:layout_width="75dp"
            android:layout_height="59dp"
            android:layout_marginLeft="5dp"
            android:layout_marginTop="70dp"
            android:background="@android:color/transparent"
            android:scaleType="fitXY"
            android:src="@drawable/menu2"
            android:layout_weight="1" />
        <ImageButton
            android:id="@+id/menu3"
            android:layout_width="75dip"
            android:layout_height="63dip"
            android:layout_marginLeft="1dp"
            android:layout_marginTop="70dp"
            android:background="@android:color/transparent"
            android:scaleType="fitXY"
            android:src="@drawable/menu3"
            android:layout_weight="1" />
        <ImageButton
            android:id="@+id/menu4"
            android:layout_width="60dp"
            android:layout_height="83dp"
            android:layout_marginRight="100dp"
            android:layout_marginTop="50dp"
            android:background="@android:color/transparent"
            android:scaleType="fitCenter"
            android:src="@drawable/menu4"
            android:layout_weight="1" />
    </TableRow>

              <TableRow android:id="@+id/tableRow2"
                   android:layout_marginTop="200dp">

 <ImageButton
            android:id="@+id/menu5"
            android:layout_width="50dp"
            android:layout_height="75dp"
            android:layout_marginLeft="12dp"
            android:layout_marginTop="60dp"
            android:background="@android:color/transparent"
            android:scaleType="fitXY"
            android:src="@drawable/menu5" 
            android:layout_weight="1"/>

        <ImageButton
            android:id="@+id/menu6"
            android:layout_width="60dp"
            android:layout_height="79dp"
            android:layout_marginTop="60dp"
            android:background="@android:color/transparent"
            android:scaleType="fitXY"
            android:src="@drawable/menu6"
            android:layout_weight="1" />

        <ImageButton
            android:id="@+id/menu7"
            android:layout_width="60dip"
            android:layout_height="86dip"
           android:layout_marginLeft="5dp"
            android:layout_marginTop="60dp"
            android:background="@android:color/transparent"
            android:scaleType="fitStart"
            android:src="@drawable/menu7"
            android:layout_weight="1" />

        <ImageButton
            android:id="@+id/menu8"
            android:layout_width="75dip"
            android:layout_height="50dip"
            android:layout_centerVertical="true"
           android:layout_marginRight="110dp"
            android:layout_marginTop="80dp"
            android:background="@android:color/transparent"
            android:scaleType="fitXY"
            android:src="@drawable/menu8" 
            android:layout_weight="1"/>
         </TableRow>

                <TableRow android:id="@+id/tableRow3"
                    android:layout_marginTop="190dp">

                    <ImageButton
                        android:id="@+id/menu9"
                        android:layout_width="60px"
                        android:layout_height="80px"
                        android:layout_marginLeft="2dp"
                        android:layout_marginTop="65dp"
                        android:background="@android:color/transparent"
                        android:scaleType="fitXY"
                        android:src="@drawable/menu9"
                        android:layout_weight="1" />

        <ImageButton
            android:id="@+id/menu10"
            android:layout_width="75dip"
            android:layout_height="56dip"
            android:layout_alignParentLeft="true"
           android:layout_marginLeft="2dp"
            android:layout_marginTop="70dp"
            android:background="@android:color/transparent"
            android:scaleType="fitXY"
            android:src="@drawable/menu10" 
            android:layout_weight="1"/>

        <ImageButton
            android:id="@+id/menu11"
            android:layout_width="75dip"
            android:layout_height="65dip"
            android:layout_alignParentLeft="true"
            android:layout_marginLeft="2dp"
            android:layout_marginTop="70dp"
            android:background="@android:color/transparent"
            android:scaleType="fitXY"
            android:src="@drawable/menu11"
            android:layout_weight="1" />

        <ImageButton
            android:id="@+id/menu12"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_marginRight="100dp"
            android:layout_marginTop="70dp"
            android:background="@android:color/transparent"
            android:scaleType="fitXY"
            android:src="@drawable/menu12" />
  </TableRow>
</TableLayout> 
```

**12-17 15:39:36.167: I/Ads(1495): onReceiveAd() 12-17 15:39:36.198: W/Ads(1495): 没有足够的空间来展示广告！想要：<320, 50>，拥有：<320, 0>**

这个布局在 Eclipse 上看起来不错，但是当我运行它时，一切都变得很糟糕！而且我在设计和布局方面真的很糟糕，那么如何以编程方式设置 adview 横幅的大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T12:48:50.353

尝试为横幅视图添加宽度和高度：

```
<com.google.ads.AdView
    android:id="@+id/adView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    ads:adSize="BANNER"
    ads:adUnitId="..."
    ads:loadAdsOnCreate="true" /> 
```

* * *

编辑：也许您的问题是您的布局中没有剩余空间。所以我的方法是在你的xml顶部使用RelativeLayout，如下所示：

```
RelativeLayout

   TableLayout

   AdView 
```

而不是将您的 adView 放在 TableLayout 中。

# java - 如何构建两个 Wicket 应用程序

> ID：13914214
> 
> 赞同：2
> 
> 时间：2012-12-17T12:29:03.903
> 
> 标签：java, web-applications, wicket, web.xml

这是关于以下链接上的 helloworld 示例：

```
http://wicket.apache.org/learn/examples/helloworld.html 
```

helloworld 工作正常，我可以使用 url: 调用应用程序`http://localhost:8080/helloworld/`。现在我想扩展第二个应用程序的示例，以便`hellowolrd2`当我`http://localhost:8080/helloworld2/`使用浏览器调用时，会出现第二个页面 helloworld2（类似于 helloworld）。假设我有文件`HelloWorld2.java`和`HelloWorld2.html`。我应该在文件 web.xml 中更改什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:48:54.320

你真的不需要修改`web.xml`. 定义的唯一相关设置是`<filter-mapping>`元素

```
<filter-mapping>
    <filter-name>HelloWorldApplication</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

，它将`/*`对应用程序（其上下文根）发出的所有请求（ ETC。）。

在示例中，您`HelloWorld`在请求时会看到该页面，`http://localhost:8080/helloworld/`因为`HelloWorld`是在`WebApplication`. `helloworld`是 webapp 的上下文根，因此 Wicket 会自动将您带到定义的页面[`WebApplication#getHomePage()`](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/Application.html#getHomePage%28%29)：

```
@Override
public Class getHomePage() {
    return HelloWorld.class;
} 
```

请注意，`helloworld`这里是应用程序的上下文根。因此，除非您想定义一些逻辑`getHomePage()`以根据某些标准返回一个类或另一个类（不要真的认为这是您所追求的），否则它将有效地服务于`HelloWorld`.

现在，解决您的问题，您可以使用 Wicket 将（可添加书签的）页面安装到 URL 的使用[`WebApplication#mountPage()`](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/Application.html#getHomePage%28%29)：

```
public class HelloWorldApplication extends WebApplication {
    @Override
    protected void init() {
        mountPage("/helloworld", HelloWorld.class);
        mountPage("/helloworld2", HelloWorld2.class);
    }

    @Override
    public Class getHomePage() {
        return HelloWorld.class;
    }
} 
```

这将使`http://localhost:8080/helloworld/`服务`HelloWorld`类成为主页。但也会为它提供请求`http://localhost:8080/helloworld/helloworld`。请求`http://localhost:8080/helloworld/helloworld2`将有效地服务`HelloWorld2`。

或者，如果你真的想`http://localhost:8080/helloworld2/`服务`HelloWorld2`，你应该部署另一个 webapp，当然要使用它自己的`web.xml`，并使用 context-root `helloworld2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:45:48.807

您没有两个应用程序，实际上您有两个页面。第一个 (helloworld) 被映射为响应主页，它在 HelloWorldApplication 中定义：

```
@Override
public Class getHomePage() {
    return HelloWorld.class;
} 
```

如果你想要 localhost:8080/helloworld2/ 只需在 HelloWorldApplication 的 init() 方法中创建一个映射

```
@Override
public void init() {
super.init();
this.mountPage("/helloworld2", Helloworld2.class);
} 
```

# c# - 如何防止用户在 ASP.NET MVC 中更改其他用户数据

> ID：13914216
> 
> 赞同：0
> 
> 时间：2012-12-17T12:29:12.313
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3, authorization

至少，任何用户都可以为任何员工预订假期，

我已将 [Authorization] 添加到控制器和 @if (User.Identity.IsAuthenticated)

在布局中，因此只有登录的用户才能查看页面。但是我怎么能只允许用户为他们自己预订假期呢？

类似于 if loggedInUserID（这是在创建用户时自动分配的吗？）=currentPersoID，尽管这只是一个猜测，我可能不得不将相同的 loggedInUserID 分配给 personID。

* * *

编辑：

```
[HttpPost]
public ActionResult Create(Holiday holiday)
{    
        var holidays = db.Holidays.Include("Person");
        HolidayList model = new HolidayList();

     //run through person 
     foreach (Person person in model.PList4DD)
        {
         //if Logged in user = person name
            if (HttpContext.User.Identity.Name == person.Name)
            {
                //allow
                if (ModelState.IsValid)
                {
                    db.Holidays.AddObject(holiday);
                    db.SaveChanges();
                    return RedirectToAction("Index");
                }
            }
            else
            { 
                return RedirectToAction("Index"); 
            }

        }

        model.PList4DD = db.People.ToList();
        model.HList4DD = db.Holidays.ToList();

        ViewBag.Id = new SelectList(db.People, "Id", "Name", holiday.Id);
        return View(holiday);
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T12:31:18.397

在您的控制器中，有 HttpContext.User.Identity.Name

它会给你当前登录的人的用户名。也许这可能是一个很好的起点？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T12:35:44.433

因此，您需要针对用户名或用户 ID 添加额外检查：

我假设您返回到视图的模型是员工类型。

```
public class Employee
{
    public int Id { get; set; }
    public string UserName { get; set; }
}

public ActionResult Home(int id)
{
    Employee model = // Get employee by id
    return View(model);
} 
```

然后在您的视图中，您可以检查用户名：

```
@model Employee
@if (User.Identity.IsAuthenticated && User.Identity.Name == model.UserName) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T12:39:58.837

假设您的视图仅从受限制的操作中调用，添加`[Authorize]`应该就足够了，不需要`@if(User.Identity.IsAuthenticated)`在视图本身中做任何事情，因为用户永远不会到达它。

至于您的实际问题，我将为您的预订视图创建视图模型，其中包含当前用户的用户名（或 ID），为简单起见，取用户名，例如

```
public class BookingViewModel
{
    [HiddenInput]
    public Guid Username { get; set; }
    ...
} 
```

然后在您看来，当您尝试回发到服务器时，您可以验证预订是否有效，例如

```
[HttpPost]
public ActionResult CreateBooking(BookingViewModel bookingModel)
{
    if (bookingModel.UserId == User.Identity.Name)
    {
        // proceed with booking
        return View("BookingComplete", bookingModel);
    }
    else
    {
        // add model state error
    }
    return View(bookingModel)
} 
```

# c++ - 多次提示输入也会导致数组输出出现问题

> ID：13914220
> 
> 赞同：-1
> 
> 时间：2012-12-17T12:29:31.313
> 
> 标签：c++

好的，所以我的[任务](http://pastebin.com/qx1haD9x)要我从用户那里获取有关公司 4 个部门的信息。当我运行并编译它时，它会提示 8 个分区（就像我说的，我只想要 4 个），当它在屏幕上显示收集到的信息时，它不会显示不同分区的名称。[例子](http://pastebin.com/qX2Vh0df)

```
#include<iostream>
#include<cstdlib>
#include<fstream>
#include<sstream>
#include <vector>

using namespace std;

const int SIZE = 12;

struct Division
{
      char divName[SIZE]; // Division name
      double sales[4]; // Quarterly sales stored as an array
};

int main()
{
       void Intro();
       std::vector<Division> CreateCorporateFile();
       void DisplayCorporateSales();

       Intro();
       CreateCorporateFile();
       DisplayCorporateSales();

       system("PAUSE");
       return 0;
}

void Intro()
{
     cout<<"This program will prompt you to enter in quarterly sales for "
           "four different\ndivisions of a company.\n\n";
}

std::vector<Division> CreateCorporateFile()
{
    std::vector<Division> divArray;
    Division div;
    int x = 0;
    for(int x = 0; x < 4; x++)
    {
    /*do {*/int quarter = 1;
          cout << "Enter the name of the division: ";
          cin >> div.divName;
          for(int i = 0; i < 4; i++)
          {
               cout << "Enter in the sales for quarter "<< quarter <<": ";
               cin >> div.sales[i];
               if(div.sales[i] > 0)
               {
                    quarter++;
               }
               else
               {
                    cout << "Sales are not allowed to be negative.\n";
               }
          }

        divArray.push_back(div);
        /*x++;
    } while(x < 4);*/
}
    return divArray;
}

void DisplayCorporateSales()
{
     Division div;

         std::vector<Division> divisions = CreateCorporateFile();
    for (size_t i=0; i<divisions.size(); i++)
    {
        cout << "Here are the quarterly sales for " << div.divName
        << ": \n";
        Division div = divisions[i];
        for(int j = 0, quarter = 1; j < 4; ++j, ++quarter)
        {
            cout << "Quarter "<< quarter << " sales: $"<< div.sales[j]
            <<"\n";
        }
    }         
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T12:40:55.983

它要求双倍的原因是因为您调用`CreateCorporateFile`了两次。

要么只在 中调用它`main`，保存返回的向量，然后将其传递给`DisplayCorporateSales`. **或者**根本不调用它`main`。

我还建议您使用`std::string`字符串（名称）而不是`char`数组。

# sql - 使用连接更新导致不明确的字段错误

> ID：13914222
> 
> 赞同：1
> 
> 时间：2012-12-17T12:29:47.843
> 
> 标签：sql, ruby-on-rails, activerecord

我有模型：

```
User(id)   # has_many tasks through projects
Project(id, user_id, done:boolean)
Task(project_id, done:boolean) 
```

我正在尝试更新用户的任务`done`字段，但我收到一个不明确的字段错误，因为项目和任务都有一个`done`字段。

为将用户的所有任务标记为已完成而生成的 SQL 类似于：

```
>> @user.tasks.update_all(done: true)

UPDATE tasks
INNER JOIN projects ON projects.id = tasks.project_id
SET done = 1
WHERE projects.user_id = 2548 
```

我试过这样做：

```
@user.tasks.update_all("tasks.done" => true) 
```

但这会返回未知字段`tasks.done`，这很奇怪，因为我曾经在选择查询中指定表名并且它起作用了。

任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T13:22:50.323

尝试`@user.tasks.update_all("tasks.done = 1")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:04:37.687

这将是最短的建议:)

```
@user.tasks.update_all(done: true) 
```

# linux - 如何知道哪个设备连接在哪个 /dev/ttyUSB 端口

> ID：13914226
> 
> 赞同：12
> 
> 时间：2012-12-17T12:30:26.180
> 
> 标签：linux, ubuntu, usb, tty, udev

我正在使用两个 Wavecom 16 端口调制解调器。当我将调制解调器连接到我的系统时，我能够列出所有`/dev/ttyUSB`端口名称，但我也想知道，哪个调制解调器包含端口 0 到 16，哪个调制解调器包含端口 17 到 32？

调制解调器可能在一天内多次连接和移除，所以我还想在调制解调器断开连接并再次连接时保留日志。

知道如何使用 c/c++/php script/node.js 这样做吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-04T07:53:55.123

您可以从`sys`文件系统中获取此信息。从 shell 中检查很容易，然后执行相同的程序：

1.  `cd /sys/devices`
2.  找到第一个端口的目录：`find -name "ttyUSB0"`. 它可能会在类似的地方找到它们`./pci0000:00/0000:00:1d.0/usb2/2-2/2-2.1/2-2.1:1.0/...`
3.  该`pci*`部分是USB控制器。有趣的`2-2.1`是 USB 设备。在该目录中有很多文件可以识别您的设备：

    *   `serial`: 序列号。可能是你想要的。
    *   `idVendor`和`idProduct`：设备的 USB 标识符。

步骤 1 和 2 的一个简单替代方法是：

1.  `cd /sys/class/tty/`
2.  `readlink ttyUSBn`将为您提供设备目录的完整路径。

作为脚注，请注意，有些部分`sysfs`被认为是 API 稳定的，而有些部分则不是。有关详细信息，请参阅[官方 sysfs 规则](https://www.kernel.org/doc/Documentation/admin-guide/sysfs-rules.rst)。

# counter - db + php 柜台股票价值 10

> ID：13914228
> 
> 赞同：0
> 
> 时间：2012-12-17T12:30:35.220
> 
> 标签：counter

祝大家有美好的一天

我有一个简单的计数器 php+db 它检查最后添加的内容的引用编号，并通过将 + 1 添加到特定内容类型（顺序）的先前引用编号来为新添加的内容提供引用编号。它工作正常，直到它达到参考编号 10，然后它存储并只为我添加的内容提供 10 个。所以我无法添加参考编号为 11 和 12、13、14 的内容... drupal 7 感谢您的时间和帮助。

```
if (empty($node->title)){
drupal_set_message('new node');

$query = db_select('node', 'n');
$query->condition('n.type', 'order', '=');
$query->fields('n', array('title'));
$query->orderby('title','DESC');
$query->range(0, 1);
$query->execute();
$result = $query->execute();

$record = $result->fetchAssoc();
drupal_set_message('previous order №: ' .print_r($record['title'], true));
$title = $record['title'] + 1;
drupal_set_message('order №: ' .print_r($title, true));
$form_state['node']->title = $title;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:02:10.973

好的，经过长时间的讨论，答案是：

您不能使用字母数字列类型 (varchar(255)) 并期望字母数字降序排序产生存储在该列中的最高*数字。*这是因为前导“9”总是会出现*在*其他任何内容之前，即使像 10、11、3529 或存储在该列中的任何 iares 之类的值也是如此。

您要么必须将列类型更改为数字类型，要么使用更复杂的排序策略。如果您无法更改该列的类型，那么您可能想尝试在 SELECT 查询中使用类型转换并按该类型转换的*结果*进行排序。尽管这种方法非常缓慢且效率低下。

另请注意，您的算法不安全，如果您在没有事务的情况下工作，则在您仍在计算下一个索引时，另一个插入查询可能会干扰。

# android - 我的 android 应用程序可以在 Google play 中搜索..但是当我尝试打开我的应用程序页面时..getting not found 错误

> ID：13914231
> 
> 赞同：1
> 
> 时间：2012-12-17T12:30:47.503
> 
> 标签：android

两小时前我在 Google Play 商店提交了我的第一个 android 应用程序。现在在 Google Play 搜索中，我的应用程序可见。当我尝试单击并打开我的应用程序页面时，我没有找到错误“我们很抱歉，在此服务器上找不到请求的 URL。” 我真的很困惑..有什么问题..任何想法..

# iphone - 在 xcode 中使用仪器的系统跟踪的特定值

> ID：13914232
> 
> 赞同：2
> 
> 时间：2012-12-17T12:30:49.000
> 
> 标签：iphone, instruments, xcode4.5

我正在使用仪器检查我的应用程序的系统跟踪级别。我得到了一些系统跟踪级别的值，例如 cpu 范围、平均内存占用等。有一个特定的值表示每个应用程序的默认值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T00:43:27.103

您寻求的“默认值”会有很大差异，具体取决于您的应用程序正在运行的进程数量，以及它使用的图形级别（OpenGLes 3D 渲染，与常规文本和 uiimage 显示。）

但是，您可以运行一些常见应用程序的诊断工具，并查看它们对系统资源的占用程度。

# java - Eclipse：在重新运行之前终止当前进程

> ID：13914239
> 
> 赞同：3
> 
> 时间：2012-12-17T12:31:05.760
> 
> 标签：java, eclipse, jetty

我正在开发一个使用嵌入式[码头网络服务器](http://www.eclipse.org/jetty/)的小型服务器应用程序。该服务绑定到 TCP 端口并在后台运行。由于应用程序没有完成（它是一项服务），我必须手动终止该进程，然后才能重新运行它（例如，因为当前进程正在使用 TCP 端口）。

在我重新启动之前，Eclipse 是否可以自动终止当前进程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-05-27T23:44:18.993

### 日食氧气 (4.7)

[Eclipse Oxygen](http://www.eclipse.org/eclipse/news/4.7/)添加了[终止和重新启动](http://www.eclipse.org/eclipse/news/4.7/platform.php#terminate-relaunch-history)功能。

有两种可能的方法：

1.  `Shift`在单击“**运行”**按钮的同时按下。

2.  转到**Window** > **Preferences** > **Run/Debug** > **Launching** > 检查***启动时终止和重新启动（在启动期间从菜单或工具栏按“Shift”切换）*** >**应用并关闭**> 运行应用程序

    [![运行/调试 > 启动 > 终止并重新启动](../Images/a590d0795a78a30555023be41d21fcf2.png)](https://i.stack.imgur.com/Ft7Xe.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T12:38:20.197

你可以用代码的方式来做，而不是使用任何我觉得更好的 eclipse 配置。启动应用程序时，只需检查系统中运行的进程并搜索要启动的进程。如果您发现该应用程序正在运行，请向该应用程序发送终止信号，然后继续启动。希望有帮助。如果您也不使用 eclipse，它随时都可以使用。:P

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T13:44:00.197

这是我在一两年前写的一个片段，从那以后它一直做得很好。只需添加一个包声明。从你想杀死拥有一个端口的进程的任何地方调用它，比如你的 main()。

```
import java.io.IOException;

public class KillPortHolderSimple {

    public static void killHolderOfPort(int port) {
        final String how = "-KILL";
        try {
            Runtime.getRuntime().exec(new String[]{"sh", "-c", "lsof -i :" + port + " -t | xargs kill " + how});
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T14:24:39.947

Jetty 还有一个 ShutdownHandler，您可以将其连接到您的处理程序链中，该处理程序链将接受来自 localhost 的连接，该连接带有可以触发正常关闭的密钥。

[http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-server/src/main/java/org/eclipse/jetty/server/handler/ShutdownHandler.java](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-server/src/main/java/org/eclipse/jetty/server/handler/ShutdownHandler.java)

或者，您可以将自己的组件与对 Server 对象的引用连接起来，该对象仅在另一个端口上侦听以获取要传递给它的停止键。

在命令行中，'jps' 是获取 Java 进程列表的最有用的方法。

# android - 以图书馆开馆活动为主要活动

> ID：13914243
> 
> 赞同：0
> 
> 时间：2012-12-17T12:31:16.540
> 
> 标签：android, android-library

我正在尝试构建我的应用程序的两个不同版本。免费版和收费版。通过网络搜索，我看到推荐的方法是使用库。所以我通过打开项目属性并勾选“Is Library”选项并创建一个单独的应用程序项目，将我的项目变成了一个库项目。我还在应用程序项目的“属性>>项目引用”页面中选择了库项目作为参考。

应用程序项目不包含任何活动。我正在尝试打开库项目中定义的主要活动作为我的应用程序项目的主要活动。我知道我必须在库项目中的应用程序清单中声明活动。

这是我的应用程序项目的清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.emret.myapplication.free"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.emret.myapplication.MainActivity"
        android:label="My application" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
</manifest> 
```

这是我的库项目中的清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.emret.myapplication"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="Resimler ve Sesler" 
        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
</manifest> 
```

运行应用程序项目后立即引发以下异常：12-17 14:05:25.249: E/AndroidRuntime(1027): Caused by: java.lang.ClassNotFoundException: com.emret.myapplication.MainActivity

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:42:50.933

您的库项目似乎没有导出到 APK 文件中。上次我自己遇到这种情况，原因是我通过“Properties -> Java Build Path -> Projects”添加了库项目。

一旦我将它从 Java 构建路径中删除并通过“属性 - > Android - > 添加...”添加了一个 Android 库，情况就得到了纠正

# oracle - 在脚本中插入

> ID：13914244
> 
> 赞同：0
> 
> 时间：2012-12-17T12:31:16.173
> 
> 标签：oracle, loops, insert

我在 PLSQL 上遇到了一个问题，希望我能在这里得到一些帮助。我有 2 个表 - 第一个称为 test1，有 2 列 - customer_id 和 msisdn，其中有 2 条记录。另一个称为 test_hist，有 3 列 - customer_id、msisdn 和 seqno，有 1 条记录。“seqno”是一个序列号。插入的每条记录都会获得一个高 1 的 seqno 编号。我编写的脚本是：

宣布

```
CURSOR test IS
SELECT * FROM test1; 

CUSTOMER_ID NUMBER;
MSISDN NUMBER;
V_SEQNO NUMBER; 
```

开始

```
 FOR a IN test LOOP

        SELECT MAX(SEQNO)+1 INTO V_SEQNO FROM test1_hist;

        INSERT INTO test1_hist
        select a.CUSTOMER_ID ,v_seqno, a.msisdn
        from test1;
    END LOOP;
    commit; 
```

结尾;

问题是，运行它之后，这就是我在 test_hist 表上得到的：

```
CUSTOMER_ID SEQNO   MSISDN

1.55443322  3   5422112
1.55443322  3   5422112
1.12232323  2   5454554
1.12232323  2   5454554
1.22211444  1   544643330 
```

它运行的次数与记录数相同。如果我在 test1 表上有 4 条记录，它将总共插入到 test_hist 16（每个 4 条）。我使用的原始表有 40 万条记录，所以我不能只做一些简单的插入语句....（：我使用 TOAD，环境是 ORACLE 8。

知道我错过了什么吗？

非常感谢阿萨夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:04:05.513

你可以使用序列..那么不需要pl / sql块来插入数据..可以在简单的插入中完成......否则明智地使用带有双重或值的pl / sql

宣布

CURSOR 测试是 SELECT * FROM test1;

```
CUSTOMER_ID NUMBER;
MSISDN NUMBER;
V_SEQNO NUMBER;
BEGIN

    FOR a IN test LOOP

        SELECT MAX(SEQNO)+1 INTO V_SEQNO FROM test1_hist;

        INSERT INTO test1_hist
        select a.CUSTOMER_ID ,v_seqno, a.msisdn
        from dual;
    END LOOP;
    commit; 
```

# regex - 正则表达式匹配 alpha 字符的子集

> ID：13914246
> 
> 赞同：1
> 
> 时间：2012-12-17T12:31:18.413
> 
> 标签：regex

我正在尝试检查一个只有一个字符长的字符串是否是一个字母字符，但不匹配它们的特殊子集。我正在寻找的是一个在范围内`[a-zA-Z]`但不匹配任何`n, N, e, E, w, W, s, S`.

我目前对正则表达式知之甚少，导致我制定了以下内容，但这是行不通的

```
[a-zA-Z][^nsewNSEW] 
```

我需要什么正则表达式来实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T12:33:55.260

您当前正在尝试匹配一个长度为*两个*字符的字符串。改用负前瞻如何？

```
(?![nsewNSEW])[a-zA-Z] 
```

非前瞻替代方案是：

```
[a-df-mo-rt-vx-zA-DF-MO-RT-VX-Z] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T12:45:41.413

如果负前瞻不可用，您可以使用多个范围：

```
/[a-df-mo-rt-vx-z]/i 
```

这将匹配除排除字符之外的所有内容，因为我们只是构造多个范围以传递给字符类。不区分大小写标志用于避免重复大写字母的范围。

值得注意的是，虽然很冗长，但您也可以构造没有范围的任意字符类：

```
/[abcdfghijklmopqrtuvxyz]/i 
```

我会使用范围机制，因为它更简短，但它们在功能上是等效的。

# javascript - CodeMirror 显示 2 滚动

> ID：13914254
> 
> 赞同：0
> 
> 时间：2012-12-17T12:32:22.327
> 
> 标签：javascript, css, right-to-left, codemirror

我想`CodeMirror`在我的项目中使用。它已加载，但编辑器显示 2 个滚动条，一个在右侧`CodeMirror`，一个在左侧，由 css显示`overflow-y: scroll`。这个问题是因为页面方向还是其他原因？如何解决此问题或禁用其中一个 Scrolls？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:36:54.197

我找到了解决方案！由于页面方向的问题。我通过更改`CodeMirror`css 并替换`right:0`为css 类`left:0`来解决问题。`.CodeMirror-scrollbar`

# c# - MEF2 (System.Composition) 中的强类型元数据

> ID：13914256
> 
> 赞同：4
> 
> 时间：2012-12-17T12:32:25.093
> 
> 标签：c#, asp.net-mvc, metadata, mef

我在一个新的 ASP.NET MVC4 项目中使用来自[MEF 的用于 Web 和 Windows 应用商店应用 NuGet 包的 System.Composition 命名空间。](http://nuget.org/packages/microsoft.composition)

我已经[读到](http://mef.codeplex.com/wikipage?title=MetroChanges&referringTitle=Microsoft.Composition%20FAQ)在 MEF2 中您不再使用`Lazy<IExtension, IExtensionMetadata>`，但现在您必须为元数据视图提供具体类型（并且可能使用 ExportFactory<> 而不是 Lazy<> ？）。

但是，我找不到任何关于这一切应该如何工作的例子——只是提到了使用具体类型而不是接口的一些例子。

我已经尝试了一些事情，但不断收到以下错误 - “*缺少‘AccountID’的导出元数据并且没有提供默认值*”。

我的代码...

创建容器（在 Global.asax 或 App_Start 文件夹中）：

```
// Get assemblies that will be providing imports and exports
var assemblies = GetAssemblies();

// Get conventions that will be used to find imports and exports
var conventions = GetConventions();

var container = new ContainerConfiguration().WithAssemblies(assemblies, conventions).CreateContainer();

// Create and apply a MefControllerFactory so controllers can be composed
ControllerBuilder.Current.SetControllerFactory(new MefControllerFactory(container)); 
```

GetConventions() 方法：

```
private static ConventionBuilder GetConventions()
{
    var conventionBuilder = new ConventionBuilder();
    conventionBuilder.ForTypesDerivedFrom<IController>().Export();

    conventionBuilder.ForTypesDerivedFrom<IExtension>().Export<IExtension>();
    conventionBuilder.ForTypesMatching(t => t.Namespace != null && t.Namespace.EndsWith(".Parts")).Export().ExportInterfaces();

    return conventionBuilder;
} 
```

IExtension.cs：

```
public interface IExtension
{
    void DoWork();
} 
```

扩展元数据.cs：

```
public class ExtensionMetadata
{
    public int AccountID { get; set; }
} 
```

ExtensionA.cs（与 ExtensionB.cs 相同）：

```
public void DoWork()
{
    System.Diagnostics.Debug.WriteLine("ExtensionA doing work..");
} 
```

ExtensionManager.cs：

```
public class ExtensionManager
{       
    private IEnumerable<ExportFactory<IExtension, ExtensionMetadata>> _extensions;

    public ExtensionManager(IEnumerable<ExportFactory<IExtension, ExtensionMetadata>> extensions)
    {
        _extensions = extensions;
    }

    public void DoWork(int accountID)
    {
        foreach (var extension in _extensions)
        {
            if (extension.Metadata.AccountID == accountID)
            {
                extension.DoWork();
            }                   
        }           
    }
} 
```

我想我在这里遗漏了一些非常重要的东西。基本上我想懒惰地导入所有扩展，检查它们的元数据，如果满足条件，让那个扩展做一些事情。

非常感谢您的反馈或任何涵盖我的场景的示例代码/教程的链接。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T06:35:45.420

我想在阅读了[这个 SO question](https://stackoverflow.com/questions/10988447/mef-getexportst-tmetadataview-returning-nothing-with-allowmultiple-true)之后我已经解决了。

我创建了一个元数据属性：

```
[MetadataAttribute]
public class ExtensionMetadataAttribute : ExportAttribute, IExtensionMetadata
{
    public int AccountID { get; set; }

    public ExtensionMetadataAttribute(int accountID) : base(typeof (IExtension))
    {
        AccountID = accountID;
    }
} 
```

然后修改ExtensionA.cs：

```
[ExtensionMetadata(1)]
public class ExtensionA : IExtension
{
    public void DoWork()
    {
        System.Diagnostics.Debug.WriteLine("ExtensionA doing work..");
    }
} 
```

现在 ExtensionManager.cs 看起来像这样：

```
public class ExtensionManager : IExtensionManager
{
    private readonly IEnumerable<ExportFactory<IExtension, ExtensionMetadata>> _extensions;

    public ExtensionManager(IEnumerable<ExportFactory<IExtension, ExtensionMetadata>> extensions)
    {
        _extensions = extensions;
    }

    public void DoWork(int accountID)
    {
        foreach (var extension in _extensions)
        {
            if (extension.Metadata.AccountID == accountID)
            {
                using (var foo = extension.CreateExport())
                {
                    foo.Value.DoWork();
                }
            }
        }
    }
} 
```

这似乎可以解决问题，但我仍然会对任何关于最佳实践、性能问题等的反馈感兴趣。

谢谢！

# git - 使用先前提交时，Git 新分支不是分支

> ID：13914257
> 
> 赞同：1
> 
> 时间：2012-12-17T12:32:34.337
> 
> 标签：git, branch, git-commit

我在 Git 的一个分支上，正在做一些工作。然后我决定使用提交的哈希检查我之前在该分支上的一个提交，使用`git checkout -b new_branch 6e559cb`. 现在，当我输入“git branch”时，它说我目前在“（无分支）”上。如何将这个无分支合并到它被拆分的分支中？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:49:22.657

我不确定您是否以正确的方式进行了操作（我假设您正在处理“new_branch”并且您想在此之上应用来自另一个分支的提交）。

最方便的方法是从一个分支到另一个分支进行樱桃挑选（或合并）提交。

```
git[new_branch]$ git cherry-pick 6e559cb 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T12:58:26.757

如果不知何故你的命令没有在 6e559cb 创建一个分支，你现在可以创建一个（你当前处于“无分支”，即“[分离 HEAD](https://stackoverflow.com/questions/3965676/why-did-git-detach-my-head/3965714#3965714) ”模式。

```
git branch new_branch
git checkout new_branch
# or git checkout -b new_branch 
```

# iphone - 搜索不工作

> ID：13914258
> 
> 赞同：0
> 
> 时间：2012-12-17T12:32:45.177
> 
> 标签：iphone, ios, ios5, uisearchbar

我正在尝试进行搜索，但它对我来说并不完美。我需要的是，当我输入 B 时，我应该得到所有以 B 开头的单词。我仍然想知道我在哪里做错了。我对ios很陌生。

这是我的代码：- ContactViewController.h

```
 #import <UIKit/UIKit.h>

   @interface ContactViewController :  
  UIViewController<UITableViewDataSource,UITableViewDelegate,UISearchBarDelegate>
  {
  UISearchBar* searchBar;
  IBOutlet UITableView* contactTableView;
  NSMutableArray *listOfItems;
  NSMutableArray *copyListOfItems;
  NSArray *content;
  NSArray *indices;
  NSArray* contacts;
  BOOL searching;
  BOOL letUserSelectRow;
   }
  -(void)btn_AddContact;
   @end

    ContactViewController.m

   #import "ContactViewController.h"
   #import "AddContactsViewController.h"
   #import "CustomCell.h"
   #import "DataGenerator.h"
   @interface ContactViewController ()
   @end

   @implementation ContactViewController
  - (void)viewDidLoad
    {
    [super viewDidLoad];
    const NSInteger searchBarHeight = 45;
    searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, 320,
    searchBarHeight)];
    [self.view addSubview:searchBar];
    searchBar.delegate = self;
    [self.view addSubview:searchBar];

    UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithTitle:@"Refresh" 
    style:UIBarButtonItemStyleBordered target:self action:@selector(onAddContact)];
     self.navigationItem.rightBarButtonItem = addButton;
     UILabel *label = [[UILabel alloc] initWithFrame:CGRectZero];
    label.backgroundColor = [UIColor clearColor];
    label.font = [UIFont boldSystemFontOfSize:20.0];
    label.shadowColor = [UIColor colorWithWhite:0.0 alpha:0.5];
    label.textAlignment = UITextAlignmentCenter;
    label.textColor = [UIColor whiteColor]; // change this color
    self.navigationItem.titleView = label;
    label.text = NSLocalizedString(@"All Contacts", @"");
    [label sizeToFit];
     content = [DataGenerator wordsFromLetters];
     indices = [[content valueForKey:@"headerTitle"] retain];
     }

   - (void)viewDidUnload
    {
    [super viewDidUnload];
    // Release any retained subviews of the main view.
     } 

 - (BOOL)shouldAutorotateToInterfaceOrientation:  
           (UIInterfaceOrientation)interfaceOrientation
     {
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    }

     #pragma mark -
     #pragma mark Table view data source

  // Customize the number of sections in the table view.
  - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
     return [content count];
      }

   // Customize the number of rows in the table view.
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:
    (NSInteger)section {
     return [[[content objectAtIndex:section] objectForKey:@"rowValues"] count] ;
    }

    // Customize the appearance of table view cells.
  - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:
      (NSIndexPath *)indexPath 
      {    
      static NSString *CellIdentifier = @"Cell";
        UITableViewCell *cell = [tableView
         dequeueReusableCellWithIdentifier:CellIdentifier];
         if (cell == nil) {
         cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle 
                                   reuseIdentifier:CellIdentifier];
       }
    if(searching) {
    cell.textLabel.text = [copyListOfItems objectAtIndex:indexPath.row];
    cell.detailTextLabel.text=[NSString stringWithFormat:@"%@ %@ %@",
     @"pauline.abraham@gmail.com", @" |",@"123456777"] ;
 }else {
     cell.textLabel.text = [[[content objectAtIndex:indexPath.section]
     objectForKey:@"rowValues"] 
                       objectAtIndex:indexPath.row];
  //cell.detailTextLabel.numberOfLines=2;
   //cell.detailTextLabel.lineBreakMode=NSLineBreakByWordWrapping;
  cell.detailTextLabel.text=[NSString stringWithFormat:@"%@ %@ %@",
     @"pauline.abraham@gmail.com", @" |",@"123456777"] ;
     }
   return cell;
     }

  - (NSString *)tableView:(UITableView *)aTableView titleForHeaderInSection:
  (NSInteger)section {
return [[content objectAtIndex:section] objectForKey:@"headerTitle"];
    }
  - (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {
    return [content valueForKey:@"headerTitle"];
     }
   - (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:
      (NSString *)title atIndex:(NSInteger)index {
       return [indices indexOfObject:title];
      }
    -(void)onAddContact
  {
   //    AddContactsViewController* add = [[AddContactsViewController alloc] 
           initWithNibName:@"AddContactsViewController" bundle:nil];
    //    [self.navigationController pushViewController:add animated:YES];
    }
   -(void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar
    {
    if(searching)
    return;
    searching = YES;
    letUserSelectRow = NO;
   [contactTableView setScrollEnabled:NO];
    self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] 
    initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self 
    action:@selector(btn_DoneSearch)];
    }

   -(void)btn_DoneSearch
     {
  searchBar.text = @"";
  [searchBar resignFirstResponder];
  searching = NO;
  letUserSelectRow = YES;
  [contactTableView setScrollEnabled:YES];
  self.navigationItem.rightBarButtonItem = nil;
   [contactTableView reloadData];
  }

 -(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{
//Remove all objects first.
[copyListOfItems removeAllObjects];
  if([searchText length] > 0){
      searching = YES;
      letUserSelectRow = YES;
      [contactTableView setScrollEnabled:YES];
      [self searchTableView];
      }else {
       searching = NO;
    letUserSelectRow = NO;
    [contactTableView setScrollEnabled:NO];
     }
    [contactTableView reloadData];
    }

   -(void)searchBarSearchButtonClicked:(UISearchBar *)searchBar
     {
    [self searchTableView];
     }

    -(void)searchTableView
     {
    NSString *searchText = searchBar.text;
    NSMutableArray *searchArray = [[NSMutableArray alloc] init];
    for (NSDictionary *dictionary in content)
    {
    NSArray *array = [dictionary objectForKey:@"rowValues"];
    [searchArray addObjectsFromArray:array];
    }
   for (NSString *sTemp in searchArray)
   {
    NSRange titleResultsRange = [sTemp rangeOfString:searchText 
   options:NSCaseInsensitiveSearch];
     if (titleResultsRange.length>0)
    {
        [copyListOfItems addObject:sTemp];
        NSLog(@"lenght : %d",titleResultsRange.length );
    }
}
searchArray = nil;
}
 @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:45:35.487

请参阅下面的代码，您也没有添加与搜索数据相关的行，将此条件放在下面的 3 个委托方法`UITableView`中

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

     if (searching)
       return 1;
     else
       return [content count];
}

// Customize the number of rows in the table view.
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

     if (searching)
        return [copyListOfItems count];
     else
        return [[[content objectAtIndex:section] objectForKey:@"rowValues"] count] ;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

    if(searching)
        return @"";
    else
       return [[content objectAtIndex:section] objectForKey:@"headerTitle"];

} 
```

# multithreading - 打开没有新线程的大型查询

> ID：13914259
> 
> 赞同：1
> 
> 时间：2012-12-17T12:32:48.143
> 
> 标签：multithreading, delphi, delphi-xe

我有一个需要加载到内存中的大型查询。此查询大约需要 30 秒才能打开。它在应用程序启动后立即加载，仅加载一次。在此期间，应用程序挂起。我需要做的是在 30 秒内更新进度条。我试图创建一个新线程来更新进度条，但它只会在打开查询后更新。谁能指出一个简单的方法来做到这一点？

我创建了一个线程类：

```
type
   TMyThread = class(TThread)
   private
      fLowerLimit: Integer;
      fUpperLimit: Integer; 
```

我正在创建线程类的一个实例：

```
 CountingThread := TMyThread.Create(0, 300, True);
   CountingThread.Resume;
   //
   SplashDlg.Show; 
```

在线程内我只是更新进度条：

```
procedure TMyThread.UpdateMainThread;
begin
   SplashDlg.ProgressBar1.Position:= SplashDlg.ProgressBar1.Position+1;
   MyDebug('UpdateMainThread:'+ IntToStr(SplashDlg.ProgressBar1.Position));
end; 
```

查询打开时线程挂起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:42:13.137

如果您希望获得更准确的答案，最好在此处粘贴一些代码。

有两种方法可以处理数据并使 UI 响应。

*   您可以在循环中使用 Application.ProcessMessages。

*   或者您已经接近的线程解决方案。

问题是我不认为你有一个循环，你正在使用一个组件，如果该组件没有调用方法来显示进度，你就无法估计查询需要多长时间才能完成。因此，您要么在没有进度条的情况下执行查询时显示加载...屏幕，要么告诉我们更多关于您用于查询的内容。

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:37:53.727

你反其道而行之。

UI 绑定到应用程序主线程，因此您**始终在主线程中处理 UI**，并在工作线程中完成真正的工作（从那里获得*工作人员*名称）。

你问这个问题的方式，你已经在处理线程，所以，只需改变你的观点并在辅助线程中执行繁重的 SQL 负载，同时保持你的 UI 响应和更新，现在不忙，主线程。

至于*30 秒的等待时间*，真的，如果你不能准确地确定加载时间，最好不要使用进度条，因为我们都讨厌那些不能反映事物真实状态的*骗子条。*您的条形图有时会显示 50%，然后突然变为 100%……或者它可能达到 100%，而实际上真正的事情需要很长时间才能完成（服务器负载过重、网络速度慢和 1,000 个其他因素） .

如今，我们都习惯了*只是等待*指标，如下所示：

![在此处输入图像描述](../Images/0094545e6599066456310254b94d3cec.png)

![在此处输入图像描述](../Images/cdddb8a7122c732a6d1f5284dd1b181a.png)

![在此处输入图像描述](../Images/7722a809eb5bc4aab5fe5f65b6937fff.png)

当你看到这个时，你知道它正在工作，你只需要等到它完成。

# javascript - 启用 javascript 的按钮在 IE 中未正确发布

> ID：13914261
> 
> 赞同：2
> 
> 时间：2012-12-17T12:32:52.650
> 
> 标签：javascript, perl, internet-explorer, cgi

我遇到了 IE9 的问题，当单击最初禁用并通过 javascript 重新启用的按钮时，它没有执行我需要的操作。

我有一个有几个按钮的表单（用 perl CGI 构建）。这些在实际的 html 中都被禁用，并且在表单完全加载时被启用。这样做是为了避免用户在页面完全加载之前保存页面。

在所有浏览器中，按钮最初显示为禁用，并在页面完全加载时启用。也在IE中。现在，这些重新启用的按钮在 IE 中单击时不起作用（使用 IE 9 测试），但它们在 Firefox 和 chrome 中按预期工作。

这些按钮之一的代码显示在 IE 开发人员工具中：

```
<input name="Event_Action" id="syncStream" type="submit" value="Create Sync Stream"/> 
```

创建按钮的代码最初被禁用：

```
 print $query->submit( -name=>'Event_Action', -value=>$btnCreateSyncStream, -disabled=>'disabled', -id=>'syncStream'); 
```

这些按钮是通过 body 标签的 onload 事件启用的：

```
<body onload="enableButtons()">
<form method="post" action="/cgi-bin/pdf/pdf.pl?&amp;pdf_id=1071&amp;release=at7.1.0&amp;pdf_patch_rel_phase=b" enctype="application/x-www-form-urlencoded" onsubmit="return validatePatchNr()" name="MYFORM"> 
```

javascript函数enableButtons：

```
function enableButtons()
{
  var buttons = document.getElementsByName("Event_Action");
  for (i=0;i<buttons.length;i++)
  {
    buttons[i].disabled=false;
  }  
} 
```

现在，当使用这些重新启用的按钮之一时，IE 似乎会重新加载页面，但链接到该按钮的实际操作并未执行。Chrome 和 Firefox 中的同一页面可以正常工作。这两种浏览器都执行正确的操作。

我怀疑不是表单上的每个字段都被提交，这会导致 Perl 脚本无法识别所请求的操作，但我还不确定。

我尝试使用 IE 中的开发工具调试该问题，但如果您习惯使用 firebug，那么使用这些工具并不容易。

有人知道这里可能出了什么问题吗？我可能遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:38:30.303

那么您是否尝试使用每个按钮的不同名称？通常有些浏览器不提交每个按钮的名称值对，但有些浏览器会。我想您应该将每个按钮的名称更改为唯一的，并使用隐藏字段来确定要执行的操作，而不是按钮 VALUE。

# ftp - FTP 无法在被动模式下传输数据 - libcurl

> ID：13914262
> 
> 赞同：0
> 
> 时间：2012-12-17T12:32:58.710
> 
> 标签：ftp, libcurl

我正在尝试使用 C 中的 libcurl 上传文件。数据传输失败。以下是日志消息。

如何解决这个问题？

< 250 CWD 命令成功。

> EPSV

*   被动连接数据流 < 500 'EPSV'：命令不理解
*   禁用 EPSV 使用

    > PASV

< 227 进入被动模式 (x,x,x,x,193,152)。

*   正在尝试 xxxx .. * 没有路由到主机

*   无法连接到主机

*   关闭连接 #0

*   无法连接到服务器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:18:47.500

这意味着当 FTP 服务器打开第二个端口供您的客户端连接时，您的客户端 (libcurl) 无法访问它。这很可能是由于沿途某处的防火墙或其他网络设备阻止了您执行请求操作的能力。

其他原因可能是错误配置的 ftp 服务器，但如果它适用于其他用户，那似乎不太可能。

失败的另一个原因可能是您有一个不知道 EPSV 的活动防火墙，因此被它弄糊涂并为您毁了它。[通过将CURLOPT_FTP_USE_EPSV 设置](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTFTPUSEEPSV)为 0 来尝试不使用它。

您可以尝试使用主动方法（这是大多数旧式 FTP 客户端默认执行的操作），这会使客户端要求服务器重新连接到您。[您可以使用CURLOPT_FTPPORT](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTFTPPORT)在 libcurl 中激活它。（有关如何使用它的详细信息，请参阅文档。）

# c# - Windows 8 Live Tile 中的粗体文本

> ID：13914266
> 
> 赞同：0
> 
> 时间：2012-12-17T12:33:16.527
> 
> 标签：c#, xaml, windows-8, live-tile

是否可以在动态磁贴中设置文本样式？

我发现大文本太大了，但我仍然希望有一个可区分的标题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T13:41:01.443

不，有许多[磁贴模板](http://msdn.microsoft.com/en-us/library/windows/apps/Hh761491.aspx)可供选择；如果这些都不满足您的需求，您可以生成图像并将其用作源。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T12:37:31.640

使用 Expression Blend 你可以做到

# javascript - 点击标记时谷歌地图消失

> ID：13914270
> 
> 赞同：2
> 
> 时间：2012-12-17T12:33:38.097
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers, infobox

我在可点击的折线和多边形上有一个信息框。

当我单击其中任何一个时，会创建一个不可见的标记，并且会弹出 infoxbox。

问题是当信息框出现时，地图消失了。

我没有收到任何 javascript 错误。

这是我的代码：（我已经注释掉了除内容文本之外的所有 infoxbox 功能）

```
google.maps.event.addListener(mapObject, 'click', function(event) {
        var invisibleMarker = new google.maps.Marker({
                        position: new google.maps.LatLng(event.latLng),
                        map: map
                    });

  var boxText = document.createElement("div");
  boxText.style.cssText = "background: none; padding: 0;";
  boxText.innerHTML = '<div style="margin: 0 0 20px 0;padding: 18px;background: white url(/media/images/map-marker-info-bg.gif) repeat-x top left;">' + content[0] + '</div>';

        var myOptions = {
             content: boxText
                             /*,latlng: event.latLng
                             ,alignBottom: true
            ,pixelOffset: new google.maps.Size(-470, -20)
            ,boxStyle: { 
              background: "transparent url('/media/images/map-marker-info-arrow.png') no-repeat bottom right"
              ,opacity: 1
              ,width: "470px"
             }
            ,closeBoxMargin: "18px 18px 2px 2px"
            ,closeBoxURL: "/media/images/map-marker-info-close.gif"
            ,infoBoxClearance: new google.maps.Size(5, 5)
            ,enableEventPropagation: false*/
    };

    var ib = new InfoBox(myOptions);
    ib.open(map, invisibleMarker);

}); 
```

有人可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:05:23.587

有几个问题：

1)`google.maps.event.addListener(mapObject, 'click', function(event)`

您尚未提供地图创建代码，但变量`mapObject`应该是地图对象......这不适合您对地图对象的任何其他引用`map`。

2)`new google.maps.LatLng(event.latLng)`

您不需要解析 event.LatLng 值，它已经是纬度/经度值。

这是一个工作示例，上面提到了更正。InfoBox 将输出`undefined`，因为`content[0]`未定义，但这可以是您想要的任何有效文本。

```
<!DOCTYPE html>
<html>
<head>
    <style type="text/css">
      html, body, #map_canvas {
        margin: 0;
        padding: 0;
        height: 100%;
      }
    </style>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/src/infobox.js"></script>
<script type="text/javascript">
    var map;
function test()
{
        var myOptions = {
          zoom: 8,
          center: new google.maps.LatLng(-34.397, 150.644),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);

google.maps.event.addListener(map, 'click', function(event) {

        var invisibleMarker = new google.maps.Marker({
                        position: event.latLng,
                        map: map
                    });

  var boxText = document.createElement("div");
  boxText.style.cssText = "background: none; padding: 0;";
  boxText.innerHTML = '<div style="margin: 0 0 20px 0;padding: 18px;background: white url(/media/images/map-marker-info-bg.gif) repeat-x top left;">' + content[0] + '</div>';

        var myOptions = {
             content: boxText
                             /*,latlng: event.latLng
                             ,alignBottom: true
            ,pixelOffset: new google.maps.Size(-470, -20)
            ,boxStyle: { 
              background: "transparent url('/media/images/map-marker-info-arrow.png') no-repeat bottom right"
              ,opacity: 1
              ,width: "470px"
             }
            ,closeBoxMargin: "18px 18px 2px 2px"
            ,closeBoxURL: "/media/images/map-marker-info-close.gif"
            ,infoBoxClearance: new google.maps.Size(5, 5)
            ,enableEventPropagation: false*/
    };

    var ib = new InfoBox(myOptions);
    ib.open(map, invisibleMarker);

});
}
</script>
</head>
<body onload="test();">
    <div id="map_canvas"></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:16:27.100

我想为我的折线使用类似样式的信息框，但需要传递我认为的单击位置。在原始的简单代码中是

```
infowindow.setContent(content[0]);
infowindow.position = event.latLng;
infowindow.open(map); 
```

它奏效了

我不知道如何为 InfoBox 做这件事。我尝试在 InfoBox 选项中使用：

```
latlng: event.latLng 
```

接着：

```
var ib = new InfoBox(myOptions);
ib.setPosition(event.latLng);
ib.open(map, mapObject); 
```

但我得到：

> **错误：** anchor.getPosition 不是函数

源文件：http: *[//google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.9/src/infobox.js](http://google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.9/src/infobox.js)*

# cryptography - 具有不同密钥大小的证书链 - 有效性检查

> ID：13914271
> 
> 赞同：1
> 
> 时间：2012-12-17T12:33:39.357
> 
> 标签：cryptography

如果证书具有不同的密钥大小，即用户证书的密钥大小对为 2048 位，其 CA 证书的密钥大小为 1024 位，则证书链是否有效，反之亦然。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:47:38.263

当然是有效的。验证仅涉及用户证书是否已由 CA 证书签名（并且如果 CA 证书配置了正确的扩展名 - 但并非所有库都检查这一点）。
keysize 与链的验证无关

# ios - 当 UIView 在 iOS 应用程序中加载时没有超级视图时？

> ID：13914276
> 
> 赞同：0
> 
> 时间：2012-12-17T12:33:59.697
> 
> 标签：ios, uiview

来自开发者[参考](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW11)：

> *   (void)sizeToFit
> 
> 当您想要调整当前视图的大小以便它使用最合适的空间量时调用此方法。特定的 UIKit 视图会根据自己的内部需求自行调整大小。在某些情况下，如果视图没有超级视图，它可能会根据屏幕边界调整自身大小。因此，如果您希望给定视图根据其父视图调整自身大小，则应在调用此方法之前将其添加到父视图。

是否存在视图没有超级视图的情况？那些案例是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:12:46.400

当视图是**根视图时，视图没有超级**视图意味着它后面没有其他视图（可能除了窗口之外）

或者当它显然从未添加到视图中时：D

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T12:50:33.923

如果它是您的视图控制器的视图，则它没有超级视图。

# php - 将文件从一个文件夹复制到另一个具有所需名称的文件夹？

> ID：13914284
> 
> 赞同：-3
> 
> 时间：2012-12-17T12:35:14.817
> 
> 标签：php, copy-paste

我正在尝试将文件从一个文件夹复制到另一个具有所需名称的文件夹。为了应对我使用

```
copy($oldfile, $newfile); 
```

还应删除旧文件夹文件的另一件事。如何重命名它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:39:03.410

使用重命名：尝试将旧名称重命名为新名称，必要时在目录之间移动它。如果 newname 存在，它将被覆盖。

```
rename($oldfile, $newfile); 
```

[http://php.net/manual/en/function.rename.php](http://php.net/manual/en/function.rename.php)

# ruby-on-rails - github到heroku...已经存在的应用程序

> ID：13914288
> 
> 赞同：-2
> 
> 时间：2012-12-17T12:35:26.290
> 
> 标签：ruby-on-rails, heroku, github

我想将我的 rails 应用程序从 github 推送到 heroku。我已经在 github 上部署了我的应用程序，并且我有它的 url。我不知道如何在 heroku 上部署一个已经存在于 github 上的应用程序。谁知道请回复。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:21:36.030

[Heroku 有一个关于将 Rails 3 应用程序部署到 Heroku](https://devcenter.heroku.com/articles/rails3)的优秀指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-31T19:41:55.020

您现在可以在 Heroku 上部署主分支或来自 github 存储库的功能分支。此部署可以手动或自动完成（当 github 存储库中的分支发生更改时）。为此，请登录 Heroku，单击应用程序，然后单击“部署”菜单选项。向下滚动，您将看到“自动”和“手动”部署选项。您可以选择其中一项或两项。持续集成工具（如 GoCD、Jenkins 或其他工具）将为您提供另一层控制和管理。但是这种仅使用 Heroku 的部署方法适用于个人、小型团队或简单的用例。

# ios4 - iOS 4.3 对 AFNetworking 的支持 - 可能有什么问题？

> ID：13914294
> 
> 赞同：2
> 
> 时间：2012-12-17T12:35:34.487
> 
> 标签：ios4, afnetworking

我已经开发了一个支持 iOS 4.3+ 的应用程序。我想从[ASIHTTPRequest](https://github.com/pokeb/asi-http-request)转移 到 AFNetworking 但在文档上说我应该使用 0.10.x 模块而不是当前模块。[https://github.com/AFNetworking/AFNetworking#requirements](https://github.com/AFNetworking/AFNetworking#requirements) 使用AFNetworking的当前代码（1.x）的问题是（[https://github.com/AFNetworking/AFNetworking/issues/545](https://github.com/AFNetworking/AFNetworking/issues/545)）：

1.  ARC 1.x 中的介绍
2.  [NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)的使用
3.  imp_implementationWithBlock() API 区别

但是 iOS 4.3 支持 ARClite，并且通过 1.x 的代码，我没有遇到任何使用可能导致问题的弱引用的属性。[http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/ObjCAvailabilityIndex/_index.html](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/ObjCAvailabilityIndex/_index.html) iOS 4.3 支持[imp_implementationWithBlock()](http://www.friday.com/bbum/2011/03/17/ios-4-3-imp_implementationwithblock/) 只有两个引用使用 NSJSONSerialization，我将它们更改为 JSONKit 调用->

```
diff --git a/AFNetworking/AFHTTPClient.m b/AFNetworking/AFHTTPClient.m
index 62fc30a..3a60da5 100755
--- a/AFNetworking/AFHTTPClient.m
+++ b/AFNetworking/AFHTTPClient.m
@@ -24,6 +24,7 @@

 #import "AFHTTPClient.h"
 #import "AFHTTPRequestOperation.h"
+#import "JSONKit.h"

 #import <Availability.h>

@@ -163,7 +164,7 @@ - (NSString *)URLEncodedStringValueWithEncoding:(NSStringEncoding)stringEncoding

 static NSString * AFJSONStringFromParameters(NSDictionary *parameters) {
     NSError *error = nil;
-    NSData *JSONData = [NSJSONSerialization dataWithJSONObject:parameters options:0 error:&error];;
+    NSData *JSONData = [parameters JSONDataWithOptions:JKSerializeOptionNone error:&error];

     if (!error) {
         return [[NSString alloc] initWithData:JSONData encoding:NSUTF8StringEncoding];
diff --git a/AFNetworking/AFJSONRequestOperation.m b/AFNetworking/AFJSONRequestOperation.m
index 607f247..c7367dc 100755
--- a/AFNetworking/AFJSONRequestOperation.m
+++ b/AFNetworking/AFJSONRequestOperation.m
@@ -21,6 +21,7 @@
 // THE SOFTWARE.

 #import "AFJSONRequestOperation.h"
+#import "JSONKit.h"

 static dispatch_queue_t af_json_request_operation_processing_queue;
 static dispatch_queue_t json_request_operation_processing_queue() {
@@ -66,7 +67,7 @@ - (id)responseJSON {
         if ([self.responseData length] == 0) {
             self.responseJSON = nil;
         } else {
-            self.responseJSON = [NSJSONSerialization JSONObjectWithData:self.responseData options:0 error:&error];
+          self.responseJSON = [self.responseData objectFromJSONDataWithParseOptions:JKSerializeOptionNone error:&error];
         }

         self.JSONError = error; 
```

虽然这编译得很漂亮，但我仍然对这样做持怀疑态度。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T20:44:24.703

您可以更改一些内容以使 AFNetworking >= 1.0 以在 iOS < 5 上编译，但不建议这样做，因为后续版本中可能会发生其他重大更改。

但是，如果对创建一个无法包含主线错误修复和功能的分支感到满意，那么您的方法本质上没有任何问题。

# java - 用于插入关系的 JPA 映射

> ID：13914296
> 
> 赞同：1
> 
> 时间：2012-12-17T12:35:44.793
> 
> 标签：java, sql, jpa

我正在使用 JPA 来持久化我的实体。假设我`ManyToMany`在实体 A 和 B 之间存在关系。因此，在类`A`中它将是 a`List<B>`和`B`a `List<A>`。

我的问题是关于添加新关系的效率。以简单的方式，我可以`add(new B())`在 class 的列表中创建一个`A`。当我在运行时调用 add 方法时，类`List`中的`B`对象`A`会全部从数据库中加载吗？这有效率吗？

如果我有 200 个关系，它将加载所有关系，以简单地添加一个新对象`B`？最好创建一个本机查询以在`ManyToMany`表中插入新行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:46:49.273

List 上的 add() 行为取决于 JPA 提供程序。

对于 EclipseLink，对于 LAZY List 关系 add() 不会导致默认获取列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:39:22.600

通常，JPA 提供者提供他们自己的支持延迟加载的 Java 集合实现，因此并非所有关系都会从一开始就被加载。

此外，当您按照描述修改任何列表时，JPA 提供程序应该透明地更新数据库。除了您可能自己缓存的引用之外，您不必担心保持一致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:37:25.127

当它开始达到数百个时，您最好将连接表映射为 JPA 实体，而不使用多对多映射，而直接在连接表上执行操作（突变和选择），其中包含两个多对一映射。

# asp.net - 使用 GeoNames API 从纬度和经度获取当前时间

> ID：13914297
> 
> 赞同：0
> 
> 时间：2012-12-17T12:35:49.940
> 
> 标签：asp.net, api, c#-4.0, geonames

我目前正在创建需要该国家/地区当前时间的应用程序。
我有不同国家的纬度和经度。

我使用以下链接获取当前时间

[http://api.geonames.org/timezone?lat=21.7679&lng=78.8718&username=demo](http://api.geonames.org/timezone?lat=21.7679&lng=78.8718&username=demo)
（demo用户名是默认的，只用于测试，因为它有查询限制）

我得到了当前时间，但是当夏令时开启时。该 API 是否给了我正确的时间？如果不是那么我怎么能得到当前时间。

在某些 API 中，我得到了当前时间，例如 earthtool（未实现 DST）。但我无法测试，因为目前没有实施 DST，所以在这种情况下我该如何测试？

我正在使用 C# 4.0 在 .NET 中创建应用程序

如果有任何其他 API，请告诉我，但优先考虑 GeoNames API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:44:31.883

如果这不能反映当前的当地时间，我会感到*非常惊讶。*圣保罗（[目前正在观察夏令](http://www.timeanddate.com/worldclock/city.html?n=233)时）的结果似乎同意这一点：

```
<geonames>
  <timezone tzversion="tzdata2012f">
  <countryCode>BR</countryCode>
  <countryName>Brazil</countryName>
  <lat>-23.0</lat>
  <lng>-46.0</lng>
  <timezoneId>America/Sao_Paulo</timezoneId>
  <dstOffset>-3.0</dstOffset>
  <gmtOffset>-2.0</gmtOffset>
  <rawOffset>-3.0</rawOffset>
  <time>2012-12-17 10:48</time>
  <sunrise>2012-12-17 06:14</sunrise>
  <sunset>2012-12-17 19:47</sunset>
  </timezone>
</geonames> 
```

但是，另一种选择是使用 GeoNames API 来获取时区 ID，然后使用[Noda Time](http://noda-time.googlecode.com)来处理与该时区有关的所有事情。（免责声明：我是 Noda Time 的主要开发者。）

您不能直接使用 BCL 的`TimeZoneInfo`类，因为它不支持 TZDB GeoNames 提供的时区 ID（例如“亚洲/加尔各答”）。您*可以*只使用映射（[CLDR](http://cldr.unicode.org)提供了一个），但根据我的经验，Windows 时区信息有一些令人不安的奇怪之处。

如果您*只*需要知道当前时间，GeoNames 可能很好 -

# python - Django：进行数据库查询时出现UnboundLocalError

> ID：13914301
> 
> 赞同：1
> 
> 时间：2012-12-17T12:36:25.387
> 
> 标签：python, django, python-2.7, matplotlib, django-views

我正在尝试在 django 上做一个 matplotlib 条形图。将使用的数据将从我的数据库中查询。

我在运行代码时遇到了这个错误：

> 分配前引用的 /graph.png 局部变量“主题”处的 UnboundLocalError

matplotlib 部分的代码都是正确的，因为我之前尝试运行静态数据并且它有效。但是，当我尝试从数据库中查询数据时，会在 views.py 上导致此错误。我之前在不同的页面上做过很多次这个查询并且工作正常。但这不适用于此请求。为什么？

```
def bar_chart(request):
    #Topic Distribution
    topics = list(topic.objects.filter(subject_id=subj_id).order_by('id').values())

    fig = Figure()
    ax = fig.add_subplot(111)

    N = 5
    ind = np.arange(N)
    width = 0.35

    group_labels = [] #list of x-axis tick labels
    y = [] #list of y-values
    total_marks = 0 #total marks
    for topic in topics:
        t_questions = question.objects.filter(topic_id=topic.id)
        if (len(t_questions) != 0):
            topic_marks = 0 #each topic starts at 0 marks distribution
            for t_question in topic_questions:
                topic_marks += t_question.marks #accumulate the marks
            total_marks += topic_marks
            y.append(topic_marks)
            group_labels.append(topic.title)
    for yval in y:
        yval = yval/total_marks * 100 #convert to percentage

    ax.bar(ind, y, width, color='r')
    ax.set_ylabel('Distribution in %')
    ax.set_title('Topic Distribution')
    ax.set_xticks(ind)
    ax.set_xticklabels(group_labels)
    fig.autofmt_xdate()
    canvas=FigureCanvas(fig)
    response=HttpResponse(content_type='image/png')
    canvas.print_png(response)

    return response 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T12:39:55.363

错误在这里：

```
topics = list(topic.objects.filter(subject_id=subj_id).order_by('id').values()) 
```

~~如果您遵循模型的通用命名约定，您的可能称为主题，所以它应该是~~

 ~~```
topics = list(Topic.objects.filter(subject_id=subj_id).order_by('id').values()) 
```~~ 

~~否则，您可能会错过导入。~~

它是由函数中定义的局部变量主题引起的，并掩盖了全局变量。

# cocoa - 如何判断哪个 NSTextField 被编辑了？

> ID：13914303
> 
> 赞同：0
> 
> 时间：2012-12-17T12:36:33.997
> 
> 标签：cocoa, nstextfield, nstextview, undo

我的`NSDocument`子类采用`NSTextFieldDelegate`. 文档窗口包含几个`NSTextField`实例（所有设置为文档类的出口）。当用户编辑文本字段时，我希望通知我的文档。但是 NSTextFieldDelegate 协议中的所有方法都是从 NSTextViewDelegate 继承的，因此在它们的参数中传递 NSText* 实例，而**不是**NSTextField 实例。这同样适用于通知：

```
- (void) controlTextDidChange:(NSNotification*) notification 
```

那么，如何找出正在编辑的众多 NSTextField 实例中的哪一个**？**

**笔记**

我需要使用文档的撤消管理器正确注册撤消。我尝试实现 - (NSUndoManager *)undoManagerForTextView:(NSTextView *)aTextView 但这似乎只适用于`NSTextView`s，**而不** `NSTextField`适用于s。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:20:08.607

您可以参考您的`NSTextField`as `[notification object]`。从文档中`NSControlTextDidChangeNotification`：

> 通知对象是发布通知的 NSControl 对象。

实际的控制子类将是您的`NSTextField`.

# mysql - #1452 - 无法添加或更新子行

> ID：13914312
> 
> 赞同：-2
> 
> 时间：2012-12-17T12:36:54.653
> 
> 标签：mysql, sql

> `#1452`- 无法添加或更新子行：外键约束失败 ( `schoolzone`., CONSTRAINT `#sql-10e0_7f2_ibfk_1`FOREIGN KEY ( `teacherid`) REFERENCES `teacher`( `teacherid`))

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:41:07.257

您收到错误的原因是因为您在 table 上插入了一条记录`schoolZone`，其列的值在 table`teacherid`上不存在`teacher`。请记住，您插入记录的表取决于 table `teacher`。

下面是一个示例，显示了您如何获得错误。

*   [SQL 小提琴演示](http://sqlfiddle.com/#!2/2237b/2)

# javascript - 防止/自定义 android 滚动到焦点输入

> ID：13914314
> 
> 赞同：2
> 
> 时间：2012-12-17T12:36:59.947
> 
> 标签：javascript, android, css, android-browser

在我的表单上，我有一个使用固定定位的标题和一个高度为 100% 的 div，其中包含表单输入。当输入聚焦时，android将页面滚动到该输入，这会将输入放在标题“后面”（尽管android确实通过将输入呈现在标题顶部来保持输入可见，但它不会对标签和相邻输入执行此操作，所以用户很难知道他们在哪个输入上）。

有什么方法可以禁用或控制滚动量？

# shell - 使用 sed 或 awk 如何删除 certian 线周围的模式

> ID：13914316
> 
> 赞同：2
> 
> 时间：2012-12-17T12:37:20.697
> 
> 标签：shell, unix, sed, awk

我需要删除围绕某一行的模式：

```
#undef LZZ_INLINE
#ifdef LZZ_ENABLE_INLINE
#include "somename.inl"
#endif 
```

应该变成：

```
#include "somename.inl" 
```

我不知道`somename`提前。如何以通用方式使用例如 sed 或 awk 来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T12:45:05.007

如果文件大小允许读取一次将其全部加载到内存中，您可以这样做

```
sed -i.bk ':a;$!{N;ba}; s/#undef LZZ_INLINE\n#ifdef LZZ_ENABLE_INLINE\n\(#include [^\n]*\)\n#endif/\1/g' input.file 
```

`.bk`如果一切顺利，请删除文件:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T12:49:14.253

请尝试此 oneliner 是否适合您：

```
awk '/#undef LZZ_INLINE/{next;} /#ifdef LZZ_ENABLE_INLINE/{x=1;next;}x&&/#endif/{x=0;next;}1' file 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T13:03:37.287

将此添加到名为 fix.sed 的文件中

```
/^#undef LZZ_INLINE/{
N
N
N
s/.*\(#include "[^"]*"\).*/\1/
} 
```

像这样运行：

sed -f fix.sed 你的原始文件

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-17T14:45:46.263

假设@glennjackman 发布了答案：

```
awk '/#undef LZZ_INLINE/{next} /#ifdef LZZ_ENABLE_INLINE/{x=1;next}x&&/#endif/{x=0;next} 1' file 
```

是正确的，您只想就地更新输入文件，这是使用 awk 执行此操作的一种方法：

```
awk '/#undef LZZ_INLINE/{next} /#ifdef LZZ_ENABLE_INLINE/{x=1;next}x&&/#endif/{x=0;next} {out[++nr]=$0} END{close(FILENAME); for (i=1;i<=nr;i++) print out > FILENAME}' file 
```

（即替换`1`为`{out[++nr]=$0} END{close(FILENAME); for (i=1;i<=nr;i++) print out > FILENAME}`）

这是另一个：

```
awk '/#undef LZZ_INLINE/{next} /#ifdef LZZ_ENABLE_INLINE/{x=1;next}x&&/#endif/{x=0;next} {print > "/tmp/\""FILENAME"\"" } END{system("mv /tmp/\""FILENAME"\" \""FILENAME"\""}' file 
```

（即替换`1`为`{print > "/tmp/\""FILENAME"\"" } END{system("mv /tmp/\""FILENAME"\" \""FILENAME"\""}`）

如何实现它有一些变化，但基本思想只是缓冲输出，直到您完成读取输入文件然后覆盖输入文件。NBD 无论如何...

我应该提到的另一个变体是创建一个 tmp INPUT 文件，它看起来像这样：

```
awk '
BEGIN{
   tmp="/tmp/\"" ARGV[1] "\""
   while ( (getline var < ARGV[1]) > 0 ) {
      print var > tmp
   }
   close(tmp)
   out = ARGV[1]
   ARGV[1] = tmp
}
/#undef LZZ_INLINE/{next} /#ifdef LZZ_ENABLE_INLINE/{x=1;next}x&&/#endif/{x=0;next} {print > out}' file 
```

无论您使用 system("mv...") 还是 getline 循环都是风格或取决于您的操作系统提供的内容。

# java - 将空值分配给 int

> ID：13914317
> 
> 赞同：24
> 
> 时间：2012-12-17T12:37:31.007
> 
> 标签：java

如果以下代码是可能的：

```
Integer a = null;
int b = a; 
```

这是否意味着返回`null`整数可能值的函数是一种不好的做法？

编辑1：这些答案中有几种不同的意见。我没有足够的信心选择一个或另一个。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-12-17T12:39:12.720

该代码将`NullPointerException`在您运行它时给出。它基本上相当于：

```
Integer a = null;
int b = a.intValue(); 
```

...这更清楚地表明它确实会失败。

您并没有*真正*为 an 分配空值`int`- 您正在尝试并失败。

可以`null`用作`Integer`;的值 确实经常`Integer`被使用而不是`int`精确地用作“可空等价物”。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-17T12:38:50.600

这不可能。你会得到`NullPointerException`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-17T12:39:18.743

这将引发 NullPointerException。

原因是您依赖于将 Integer 值自动拆箱为 int 原始类型。Java 通过在内部调用`.intValue()`为空的 Object 来做到这一点。

至于这是否是一个好习惯......我建议不要这样做，除非代码仅供您使用并且您表现得非常好，确保您只将此类方法的返回值分配给 Integer 值，而不是整数。

如果您的代码最终出现在其他人使用的库中，那是不安全的，我宁愿明确抛出一个异常，有据可查，并允许调用者进行防御性编码。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-11-10T11:03:18.433

Java tenerary operator 的有趣之处？：（在 OSX 上使用 8u151）

如果你这样做

```
Integer x = map == null ? 0 : map.get ( key ); 
```

这看起来很好，很紧凑，然后你就得到了一个 npe ！！！如果

```
map.get ( key ) 
```

是一个空值。所以我不得不把它分开，它工作得很好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-17T12:42:34.597

当然，您不能将 null 分配给 int。但是在某些情况下返回 null 是有道理的。Null 可能意味着未设置该值。一个典型的例子是一个 DB 列。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-17T12:42:52.963

该代码*是*`NullPointerException`可能的，但由于取消装箱，在运行时会抛出一个。关于

> 这是否意味着为整数返回可能的空值的函数是一种不好的做法？

是的。`Integer`当 a足够时返回 a 是无用且危险的（如您所见）`int`，因为对象可以为空，而原语不能。`Integer`应仅在需要时使用，例如在参数化类型中 -`List<Integer>`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-17T12:43:18.963

那确实可行。

```
Integer a = null;
Integer b = a; 
```

但我宁愿使用超出范围的 int 值（如果您的数字都是正数，则为 -1）以在出现错误时返回。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-17T13:01:16.060

这是关于 Java 自动装箱的。

```
Integer a = null;
int b = a; 
```

这段代码将a赋值给b，实际上编译器会这样做：int b=a.intValue()，所以这一行会抛出NullPointerException；

编码 ：

```
Integer a = 1; 
```

实际上会这样做： Integer a = Integer.valueOf(1);

可以使用**javap**查看编译后的虚拟机指令。</p>

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-12-19T20:15:17.930

您可以编写简单的测试：

```
public class Test {
    public static void main(String[] args){
        Integer a = null;
        int b = a;

        System.out.println(b);
    }
} 
```

并且输出是一个 NullPointerException on`int b = a;`

```
Exception in thread "main" java.lang.NullPointerException
    at Test.main(Test.java:11)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-03-27T19:21:25.903

从 Java 8 开始，我们可以使用 Optional：

```
// example: if an Integer object is null, an int value could receive 0, for example:

Integer value = getSomeInteger (...); // (0, null, or some other numeric value)
int inteiro = Optional.ofNullable(value).orElse(0); 
```

# javascript - 如何验证我是否在 jSignature 面板中绘制了一些东西？

> ID：13914322
> 
> 赞同：6
> 
> 时间：2012-12-17T12:37:53.830
> 
> 标签：javascript, jquery

`jSignature`有画布，它有一个类。我如何验证 jSignature 我是否画了一些东西？

我为点击事件添加了一个绑定。

```
$sigdiv.bind('click', function(e) {
    $("#num_strok").val(parseInt($("#num_strok").val()) + 1);
}); 
```

问题是即使我点击一些角落也会`num_strock`增加。对于一些拖动它不会增加。

我已经在谷歌中尝试过它是否有任何内置`isEmpty`功能。但我还没有找到任何东西。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-09-12T09:51:11.337

```
 if( $sigdiv.jSignature('getData', 'native').length == 0) {
    alert('Please Enter Signature..');
 } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-05-19T20:35:49.557

派对很晚了......所以我想就我的发现提供一些输入，每一个都与使用`$("#sigDiv").jSignature('getData', 'putSomethignInHere')`函数来验证签名是否存在有关。

以下是我为传递给 jSignature 函数的第二个属性检查的选项：

`native``.length == 0`当 sig box 是空的，但是当 sig box 里有东西时，返回一个对象的对象`.length > 0`。如果您想知道有多少笔画，只需使用此对象的长度即可。注意：根据 jSignature 文档：

> “Stroke = mousedown + mousemoved * n (+ mouseup 但我们没有记录，因为那是“结束/缺乏移动”指示器)”

`base30`还返回一个对象。这里我查看了这个对象的第二个索引位置的信息。 `x = $("#sigDiv").jSignature('getData', 'base30')[1].length > 0 ? TRUE : FALSE`如果该框已签名，则此处`x`将产生 TRUE，而当 jSig 框保持不变时，将产生 FALSE。

就我而言，我使用该`base30`属性来验证签名**复杂性**，而不仅仅是“最终用户是否画了一些东西？”。 `x = $("#sigDiv").jSignature('getData', 'base30')[1].length > {insertValueHere} ? TRUE : FALSE`. 为了验证最终用户实际在框中签名并给出的不仅仅是一个简单的“。” 小'​​x'。产生的第二个索引的返回值`base30`随着复杂度的增加而变大。因此，如果用户只输入了一个点， `x = $("#sigDiv").jSignature('getData', 'base30')[1].length`则大约是 5。最终用户在框中绘制的越多，产生的值就会变得越来越大。我在测试期间记录的最高长度是 2272。我在盒子里乱涂乱画了 15 秒。

根据 jSig 文档：

> base30 (alias image/jSignature;base30) (EXPORT AND IMPORT) (VECTOR) 数据格式是一种基于 Base64 的压缩格式，针对荒谬的紧凑性和原生 url 兼容性进行了调整。它是压缩成所有向量的紧凑字符串表示的“原生”数据结构。

`image`- 这是我会避免验证的选择。它在第二个索引位置生成一个带有长字符串的对象。我测量的最后一个是 672 个字符长。`image`无论 sig 框是空白还是已使用，使用都会生成一个字符串。为了让事情变得更无用，Chrome verse 中的空白签名框与 FF Developer 中的空白签名框生成的字符串是不同的。我确定该`image`值有用，但不能验证。

`svgbase64``image`- 这与例外情况类似。与 不同`image`， using`svgbase64`在第二个位置产生一个长而短的字符串。此外，当我执行 Chrome verse FF Developer 检查时，这个字符串是相同的。这是我停止测试的地方。所以我假设你可以`svgbase64`用于验证。

这些是我的结论，你的可能会有所不同。请不要以我的低劣名声反对我。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-17T12:46:37.343

根据[jSignature 网站](http://willowsystems.github.com/jSignature/#/about/)，API 中有一个`getData`功能。如果您`getData`在空签名区域上使用该函数作为参考，则可以随时使用`getData`并将其与空参考进行比较。然后，您将能够判断是否在签名区域中写入了某些内容。

这只是我的猜测，因为我没有使用过这个脚本，但我认为这样的东西可以工作。

## 编辑

我也在[网站上找到了这个](http://willowsystems.github.com/jSignature/#/about/)

> jSignature 被初始化的 dom 元素在将笔画添加到存储后立即发出“更改”事件。（换句话说，当用户画完每个笔画时。如果用户画了 3 个笔画，则在每个笔画完成后，此事件会发出 3 次。）
> 
> 以下是绑定到该事件的方式：

```
$("#signature").bind('change', function(e){ /* 'e.target' will refer
to div with "#signature" */ }) 
```

> 事件通过“线程”（ setTimeout(..., 3) ）异步发出，因此您无需将事件处理程序包装到任何类型的“线程”中，因为 jSignature 小部件将继续运行并且不会等待您将完成自定义事件处理程序逻辑。

`change`你不能只设置一个标志变量，在第一个事件上设置为 true吗？这将表明*某些*内容被写入该区域

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-21T06:42:03.087

如果有任何点，您可以检查 base30 向量。

```
var isSignatureProvided=$sigdiv.jSignature('getData','base30')[1].length>1?true:false; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-22T16:22:47.600

这对我有用，部分使用 roch 代码：它基本上在提交验证之前将签名分配给隐藏的文本区域：

```
<div id="signatureparent">
<div id="signature"></div>
<label for='signature_capture' class='error'></label>
</div>
<span style="visibility:hidden;">
<textarea name="signature_capture" class="required" id="signature_capture"></textarea> 
</span> 

<script>
$(document).ready(function(){
$('#submit').click(function() {
    var isSignatureProvided=$('#signature').jSignature('getData','base30')[1].length>1?true:false;
    if (isSignatureProvided) {
        var $sigdiv = $("#signature");
        var datapair = $sigdiv.jSignature("getData", "svgbase64");
        var data = $('#signature').jSignature('getData');
        $("#signature_capture").val(data);
    }
});
});
</script> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-14T11:31:58.027

不幸的是，没有一个现有的答案对我有用。在我的网站上，我有两种输入签名的方法：手动和 jSignature('importData', imgBase64) 测试 jSignature('getData', 'native') 仅适用于手动绘图。图像方式没有任何效果。解决方案似乎很简单。只需测试画布元素。它可能不适用于 IE9，但谁在乎呢。这是在 TypeScript 中的：

```
isSignatureBlank() {       
    var canvas = <any>$('#signatureElem').find("canvas")[0];
    if (!canvas) return true;
    this.emptyCanvas = this.emptyCanvas || document.createElement('canvas');
    this.emptyCanvas.width = canvas.width;
    this.emptyCanvas.height = canvas.height;

    return canvas.toDataURL() == this.emptyCanvas.toDataURL();
} 
```

从这里采用：[如何检查画布是否为空白？](https://stackoverflow.com/questions/17386707/how-to-check-if-a-canvas-is-blank)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-18T10:57:13.400

在您的 javascript 文件中搜索代码。检查他们何时隐藏“撤消笔划”块

```
t.dataEngine.data.length 
```

这将帮助您找到对签名面板进行了多少笔划。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-30T04:06:46.260

也许尝试这样的事情（假设您的签名字段属于“签名”类）......

```
$('.signature').each(function (index) {
    var datapair = $(this).jSignature("getData", "svgbase64");
    if (datapair[1].length > 1000 ) {
        // Signature is valid; do something with it here.
    }
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-27T11:45:11.437

最佳答案：

```
if($sigdiv.jSignature('getData', 'native').length == 0) {
  alert('Please Enter Signature..');
} 
```

产生以下错误：

```
$sigdiv.jSignature(...) is undefined 
```

所以我建议使用：

```
if(typeof($sigdiv.jSignature('getData', 'native')) != 'undefined') {
  alert('Please Enter Signature..');
} 
```

# objective-c - 即使我将它设置为 nil，内存也会不断增加（附上截图）

> ID：13914323
> 
> 赞同：0
> 
> 时间：2012-12-17T12:37:57.457
> 
> 标签：objective-c, memory-management, automatic-ref-counting, viewwillappear

在我的 ParentViewController 我输入这个：

```
- (void)updateView:(NSInteger)_index article:(AObject *)aObject {

    UIView *aUIView = [someUIViews objectAtIndex:_index];

    // clear view
    for (UIView *view in aUIView.subviews) {
        [view removeFromSuperview];
    }

    // create view
    ChildViewController *cvc = [[ChildViewController alloc] init:aObject context:managedObjectContext];
    cvc.view.frame = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height);
    [self addChildViewController:cvc];
    [aUIView addSubview:cvc.view];
    cvc = nil;
} 
```

在 ChildViewController 我输入这个：

.h 文件

```
@interface ChildViewController : UIViewController <UIWebViewDelegate> {
    AObject *aObject;
    UIWebView *webView;
} 
```

.m 文件

```
- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:(BOOL)animated];
    webView.delegate = nil;
    webView = nil;
    aObject = nil;
} 
```

**评论：**

*   我必须使用*addChildViewController*因为我在*ChildViewController中使用**UIWebViewDelegate*。如果不使用*addChildViewController*，则无法保留 ViewController 并且无法调用*UIWebViewDelegate的功能。*
****   我用弧***

 *****计划目标：**

*   UIScrollView 实现了一个滚动视图，每次我将屏幕滚动到另一个页面时，都会调用函数*updateView 。*
*   滚动到另一页后，上一页将消失，因此将调用*ChildViewController*中的*viewWillDisappear 。*

 ***截屏：**

[http://postimage.org/image/mzmksm9d5/](http://postimage.org/image/mzmksm9d5/)

*由于这里的声誉低，我无法直接发布图片。*

根据该图，*ParentViewController*大约在第 4 秒被调用。然后内存继续快速增加而没有释放对象。大约在第 30 秒，*ParentViewController*通过单击导航栏上的后退按钮消失。内存下降了一点，但仍然有一些东西。

**目标：**

我希望做的是当调用*viewWillDisappear*时可以销毁*ChildViewController*的对象并且不再使用它。所以我希望内存在增加一点后总是会下降。否则，内存将与滚动时间成比例地增加并崩溃，直到内存被完全使用。

 *提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:58:24.487

不确定这是否能解决问题，但尝试从父视图中显式删除 cvc.view。

此外，您正在创建 ChildViewController，但没有释放它。通过调用 init 你增加了它的保留计数，但你并没有在任何地方减少它。像这样（如果您没有更多代码），您的 ChildViewController 将不会被释放，因为保留计数永远不会再为 0。

```
ChildViewController *cvc = [[ChildViewController alloc] init:aObject context:managedObjectContext];
cvc.view.frame = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height);
[self addChildViewController:cvc];
[aUIView addSubview:cvc.view];
cvc = nil; 
```*****

# delphi - 如何按多个字段对记录列表进行排序？

> ID：13914325
> 
> 赞同：1
> 
> 时间：2012-12-17T12:38:01.803
> 
> 标签：delphi, sorting

我想先按 x 坐标，然后按 y 坐标对坐标列表进行排序：

```
Orginal: (7,8)(10,22)(7,3)(5,10)(20,14)(7,10)(7,3)

First Step by x: (5,10)(7,8)(7,3)(7,10)(7,3)(10,22)(20,14)

Second Step by y: (5,10)(7,3)(7,3)(7,8)(7,10)(10,22)(20,14) 
```

我已经有一个适用于第一步的功能：

```
function SortCoords(Item1: Pointer; Item2: Pointer): Integer;
var
line1 : Coords;
line2 : Coords;
begin
  line1 :=  Coords;(Item1);
  line2 :=  Coords;(Item2);

  if (line1.X < line2.X) then 
    result := -1
  else if (line1.X > line2.X) then 
     result := 1
  else
     result := 0;

end; 
```

但我没有得到第二步。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T12:42:52.270

如果您希望通过辅助键对项目进行排序，那么这仅在第一个键相等时才重要。在您的示例中，就是这种`result := 0;`情况。

所以是这样的：

```
if (line1.X < line2.X) then 
    result := -1
  else if (line1.X > line2.X) then 
     result := 1
  else if (line1.Y < line2.Y) then 
    result := -1
  else if (line1.Y > line2.Y) then 
     result := 1
  else
     result := 0; 
```

可能会做你想做的事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T12:51:30.383

```
type
 TPC=Class
   x,y:Integer;
   Constructor Create(ax,ay:Integer);
 End;

function SortCoords(Item1: Pointer; Item2: Pointer): Integer;
var
line1 : TPC;
line2 : TPC;
begin
  line1 :=  TPC(Item1);
  line2 :=  TPC(Item2);

  if (line1.X < line2.X) then
    result := -1
  else if (line1.X > line2.X) then
     result := 1
  else
     begin
        if (line1.y < line2.y) then
          result := -1
        else if (line1.y > line2.y) then
          result := 1
        else result := 0;
     end;
end;

procedure TForm4.Button1Click(Sender: TObject);
var
  l:TList;
  I: Integer;

begin
  l := TList.Create;
  try
    l.Add(TPC.Create(7,8));
    l.Add(TPC.Create(10,22));
    l.Add(TPC.Create(5,10));
    l.Add(TPC.Create(20,14));
    l.Add(TPC.Create(7,10));
    l.Add(TPC.Create(7,3));
    l.Sort(SortCoords);
    for I := 0 to l.Count- 1 do
      begin
      memo1.lines.add(Format('x: %d  y: %d',[TPC(l[i]).x,TPC(l[i]).y]));
      TPC(l[i]).Free;
      end;
  finally
    l.Free;
  end;

end;

{ TPC }

constructor TPC.Create(ax, ay: Integer);
begin
   x := ax;
   y := ay;
end; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T08:31:14.903

您可以使用“开箱即用”的`Sort`方法。

输出方式

```
// data initialization 

Dump;

TArray.Sort<Coords1>(c1);
TArray.Sort<Coords2>(c2);
c3.Sort;

Dump; 
```

将会

```
7: [ (7; 8), (10; 22), (7; 3), (5; 10), (20; 14), (7; 10), (7; 3)]
7: [ (7; 8), (10; 22), (7; 3), (5; 10), (20; 14), (7; 10), (7; 3)]
7: [ (7; 8), (10; 22), (7; 3), (5; 10), (20; 14), (7; 10), (7; 3)]

7: [ (5; 10), (7; 3), (7; 3), (7; 8), (7; 10), (10; 22), (20; 14)]
7: [ (5; 10), (7; 3), (7; 3), (7; 8), (7; 10), (10; 22), (20; 14)]
7: [ (5; 10), (7; 3), (7; 3), (7; 8), (7; 10), (10; 22), (20; 14)] 
```

数据是

```
type
  Coord = Integer;
  Coords1 = record X,Y: Coord; end;  Coords2 = TPair< Coord, Coord >;
  CoordsList1 = array of Coords1;    CoordsList2 = TArray< Coords2 >;
  CoordsList3 = class (TList < Coords1 >) public function ToString: string; override; end;

var c1: CoordsList1; c2: CoordsList2; c3: CoordsList3; 
```

完整的来源在[http://pastebin.ca/2294517](http://pastebin.ca/2294517) 没有“嵌套 if”比较功能，但如果您愿意，可以提供一个。

# postgresql - 如何在 postgreSql 中定义一个变量？

> ID：13914326
> 
> 赞同：0
> 
> 时间：2012-12-17T12:38:06.873
> 
> 标签：postgresql

这是我的考试

```
DO $$DECLARE
 oldName varchar :='old';
 newName varchar := 'new';

BEGIN
....
END$$; 
```

如果我运行这个脚本得到这个：

```
错误：“DO”处或附近的语法错误
第 1 行：做 $$ 声明

        ^

```

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:57:34.920

我会说您使用的是不支持`DO`块的 PostgreSQL 8.4 或更早版本。您将需要升级，或使用`CREATE OR REPLACE FUNCTION`创建一个 PL/PgSQL 函数，然后`SELECT function_name()`调用它。

**始终在问题中指定您的 PostgreSQL 版本**。

# android - 使用内容观察器刷新可扩展列表 (Android)

> ID：13914331
> 
> 赞同：2
> 
> 时间：2012-12-17T12:38:19.353
> 
> 标签：android, refresh, android-contentprovider, contentobserver

我有一个可扩展列表，带有一个自定义适配器、两个光标（来自基本可扩展列表适配器）和一个内容提供程序。

现在，我的主要目标是在插入带有意图调用的活动的新数据之后刷新这个可扩展列表。我正在尝试 Content Observer，但没有成功，因为没有完成刷新。

我把相关的代码（我认为）。非常感谢你。

```
public class ActPlacesManagement extends Activity{
private static final int DELETE_ID = Menu.FIRST;

private static final String TAG = null; 

public Cursor mPlacesCursor;
public Cursor mBoxesCursor;
ExpandableListView lstCategorias;
AdpPlacesManagement adapter;
String message, message1, message2;
String novo_local, nova_caixa;
Button btnNewPlace, btnNewBox;
Handler handler;

private static final String[] PROJECTION_PLACES = new String[] {
    ProvPersonalArchive.KEY_ROWID_PLACES,
    ProvPersonalArchive.KEY_DESIG_PLACES,
};

private static final String[] PROJECTION_BOXES = new String[] {
    ProvPersonalArchive.KEY_ROWID_BOXES,
    ProvPersonalArchive.KEY_DESIG_BOXES,
    ProvPersonalArchive.KEY_PLACE_BOXES,
};

protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.act_places_management);       

    mPlacesCursor = getContentResolver().query(ProvPersonalArchive.CONTENT_URI_PLACES, 
            PROJECTION_PLACES, null, null, null);

    mBoxesCursor = getContentResolver().query(ProvPersonalArchive.CONTENT_URI_BOXES, 
            PROJECTION_BOXES, null, null, null);

    lstCategorias = (ExpandableListView)this.findViewById(R.id.expandableGestaoCategorias);

    adapter = new AdpPlacesManagement(this, mPlacesCursor, mBoxesCursor, this);     

    lstCategorias.setAdapter(adapter);

    lstCategorias.setOnGroupClickListener(new ExpandableListView.OnGroupClickListener() {

        @Override
        public boolean onGroupClick(ExpandableListView parent, View v,
                int groupPosition, long id) {
            return lstCategorias_onGroupClick(parent, v, groupPosition, id);
        }
    });

    lstCategorias.setOnChildClickListener(new ExpandableListView.OnChildClickListener() {

        @Override
        public boolean onChildClick(ExpandableListView parent, View v,
                int groupPosition, int childPosition, long id) {
            return lstCategorias_onChildClick(parent, v, groupPosition, childPosition, id);
        }
    });

    btnNewPlace = (Button)this.findViewById(R.act_gestao_categorias.novo_lugar);
    btnNewBox = (Button)this.findViewById(R.act_gestao_categorias.nova_caixa);

    btnNewPlace.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            btnNewPlace_onClick(v);
        }
    });

    btnNewBox.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            btnNewBox_onClick(v);
        }
    });

    registerForContextMenu(lstCategorias);

    mPlacesCursor.registerContentObserver(new ObsPersonalArchive(handler));
    mBoxesCursor.registerContentObserver(new ObsPersonalArchive(handler));

}

// Eventos da lista de locais e caixas

public boolean lstCategorias_onGroupClick(ExpandableListView parent, View v,
        int groupPosition, long id) {
    return false;
}

public boolean lstCategorias_onChildClick(ExpandableListView parent, View v,
        int groupPosition, int childPosition, long id) {        
    return false;
}

// Termina a actividade e volta à ActInicial, levando o local

public void finish() {
  // Prepare data intent 
  Intent data = new Intent();
  setResult(RESULT_OK, data);
  data.putExtra("local", message);
  // Activity finished ok, return the data
  super.finish();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.act_start, menu);
    return true;
}

// Eventos dos botões para criar novo local e caixa

public void btnNewPlace_onClick(View view) {
    Intent intent = new Intent(this, ActNewPlace.class);
    startActivityForResult(intent, 1);
}

public void btnNewBox_onClick(View view) {
    Intent intent = new Intent(this, ActNewBox.class);
    startActivityForResult(intent, 2);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
      if (resultCode == RESULT_OK && requestCode == 1) {
        if (data.hasExtra("novo_local") && data.hasExtra("nova_caixa")) {

            // Chama o método para gravar o local na base de dados
            Toast.makeText(this, "New place created!", Toast.LENGTH_LONG).show();
        }
      }
      if (resultCode == RESULT_OK && requestCode == 2) {
        if (data.hasExtra("novo_local") && data.hasExtra("nova_caixa")) {
            String novo_local = data.getExtras().getString("novo_local");
            String nova_caixa = data.getExtras().getString("nova_caixa");
            Toast.makeText(this, novo_local + nova_caixa, Toast.LENGTH_LONG).show();
        }
      }
    }

public class ObsPersonalArchive extends ContentObserver {

    public ObsPersonalArchive(Handler handler) {
        super(handler);        
        }
       @Override
       public void onChange(boolean selfChange) {
            super.onChange(selfChange);
       }        
} 
```

}

迈克尔，我写的新课：

```
import android.app.Activity;
import android.content.Intent;
import android.database.ContentObserver;
import android.database.Cursor;
import android.database.DataSetObserver;
import android.net.Uri;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.ContextMenu;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.ContextMenu.ContextMenuInfo;
import android.widget.Button;
import android.widget.ExpandableListAdapter;
import android.widget.ExpandableListView;
import android.widget.Toast;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;
import android.support.v4.widget.CursorAdapter;

public class ActPlacesManagement extends FragmentActivity
implements LoaderManager.LoaderCallbacks<Cursor>{

private static final int DELETE_ID = Menu.FIRST;

private static final String TAG = null;

public Cursor mPlacesCursor;
public Cursor mBoxesCursor;
ExpandableListView lstCategorias;
AdpPlacesManagement adapter;
String message, message1, message2;
String novo_local, nova_caixa;
Button btnNewPlace, btnNewBox;
Handler handler;
LoaderManager loaderManager = getSupportLoaderManager();

private static final String[] PROJECTION_PLACES = new String[] {
    ProvPersonalArchive.KEY_ROWID_PLACES, // 0
    ProvPersonalArchive.KEY_DESIG_PLACES, // 1
};

private static final String[] PROJECTION_BOXES = new String[] {
    ProvPersonalArchive.KEY_ROWID_BOXES, // 0
    ProvPersonalArchive.KEY_DESIG_BOXES, // 1
    ProvPersonalArchive.KEY_PLACE_BOXES, // 2
};

private static final int PLACES_LOADER = 1;
private static final int BOXES_LOADER = 2;

private LoaderManager.LoaderCallbacks<Cursor> mCallbacks;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.act_places_management);       

    mPlacesCursor = getContentResolver().query(ProvPersonalArchive.CONTENT_URI_PLACES, 
            PROJECTION_PLACES, null, null, null);

    mBoxesCursor = getContentResolver().query(ProvPersonalArchive.CONTENT_URI_BOXES, 
            PROJECTION_BOXES, null, null, null);

    // Lista de locais e caixas

    lstCategorias = (ExpandableListView)this.findViewById(R.id.expandableGestaoCategorias);

    adapter = new AdpPlacesManagement(this, mPlacesCursor, mBoxesCursor, this);     

    lstCategorias.setAdapter(adapter);

    lstCategorias.setOnGroupClickListener(new ExpandableListView.OnGroupClickListener() {

        @Override
        public boolean onGroupClick(ExpandableListView parent, View v,
                int groupPosition, long id) {
            return lstCategorias_onGroupClick(parent, v, groupPosition, id);
        }
    });

    lstCategorias.setOnChildClickListener(new ExpandableListView.OnChildClickListener() {

        @Override
        public boolean onChildClick(ExpandableListView parent, View v,
                int groupPosition, int childPosition, long id) {
            return lstCategorias_onChildClick(parent, v, groupPosition, childPosition, id);
        }
    });

    // Botões para novo lugar e caixa

    btnNewPlace = (Button)this.findViewById(R.act_gestao_categorias.novo_lugar);
    btnNewBox = (Button)this.findViewById(R.act_gestao_categorias.nova_caixa);

    btnNewPlace.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            btnNewPlace_onClick(v);
        }
    });

    btnNewBox.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            btnNewBox_onClick(v);
        }
    });

    registerForContextMenu(lstCategorias);

    getSupportLoaderManager().initLoader(BOXES_LOADER, null, mCallbacks);
    getSupportLoaderManager().initLoader(PLACES_LOADER, null, mCallbacks);

}

// Eventos da lista de locais e caixas

public boolean lstCategorias_onGroupClick(ExpandableListView parent, View v,
        int groupPosition, long id) {
    return false;
}

public boolean lstCategorias_onChildClick(ExpandableListView parent, View v,
        int groupPosition, int childPosition, long id) {
    return false;
}

public void finish() { 
  Intent data = new Intent();
  setResult(RESULT_OK, data);
  data.putExtra("local", message);
  super.finish();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.act_start, menu);
    return true;
}

// Eventos dos botões para criar novo local e caixa

public void btnNewPlace_onClick(View view) {
    Intent intent = new Intent(this, ActNewPlace.class);
    startActivityForResult(intent, 1);
}

public void btnNewBox_onClick(View view) {
    Intent intent = new Intent(this, ActNewBox.class);
    startActivityForResult(intent, 2);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
      if (resultCode == RESULT_OK && requestCode == 1) {
        if (data.hasExtra("novo_local") && data.hasExtra("nova_caixa")) {
            Toast.makeText(this, "New place created!", Toast.LENGTH_LONG).show();
        }
      }
      if (resultCode == RESULT_OK && requestCode == 2) {
        if (data.hasExtra("novo_local") && data.hasExtra("nova_caixa")) {
            String novo_local = data.getExtras().getString("novo_local");
            String nova_caixa = data.getExtras().getString("nova_caixa");
            Toast.makeText(this, novo_local + nova_caixa, Toast.LENGTH_LONG).show();
        }
      }
    }

// Menu de contexto

public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
super.onCreateContextMenu(menu, v, menuInfo);
ExpandableListView.ExpandableListContextMenuInfo info;

try {
    // Casts the incoming data object into the type for AdapterView objects.
    info = (ExpandableListView.ExpandableListContextMenuInfo) menuInfo;
} catch (ClassCastException e) {
    // If the menu object can't be cast, logs an error.
    Log.e(TAG, "bad menuInfo", e);
    return;
}

int place = ExpandableListView.getPackedPositionGroup(info.packedPosition);
int box = ExpandableListView.getPackedPositionChild(info.packedPosition);
int tipo_clic = ExpandableListView.getPackedPositionType(info.packedPosition);
String titulo = null;

if (tipo_clic == ExpandableListView.PACKED_POSITION_TYPE_CHILD){
    titulo = (String) adapter.getChild(place, box);
    menu.add(0, DELETE_ID, 0, R.string.delete_box);
}

if (tipo_clic == ExpandableListView.PACKED_POSITION_TYPE_GROUP){
    titulo = (String) adapter.getGroup(place);
    menu.add(0, DELETE_ID, 0, R.string.delete_place);
}

if (titulo == null) {
    // For some reason the requested item isn't available, do nothing
    return;
}
menu.setHeaderTitle(titulo);

}

public boolean onContextItemSelected(MenuItem item) {
ExpandableListView.ExpandableListContextMenuInfo info =     
(ExpandableListView.ExpandableListContextMenuInfo) item.getMenuInfo();
int tipo_clic = ExpandableListView.getPackedPositionType(info.packedPosition);
switch(item.getItemId()) {
case DELETE_ID:
    if (tipo_clic == ExpandableListView.PACKED_POSITION_TYPE_CHILD){
        Toast.makeText(this, "The box was deleted", Toast.LENGTH_LONG).show();
    }

    if (tipo_clic == ExpandableListView.PACKED_POSITION_TYPE_GROUP){
        Toast.makeText(this, "The place was deleted", Toast.LENGTH_LONG).show();
    }
    return true;
}
return super.onContextItemSelected(item);
}

public Loader<Cursor> onCreateLoader(int id, Bundle arg1) {

CursorLoader cursorLoader = new CursorLoader(getBaseContext());

if (id == BOXES_LOADER){
    cursorLoader = new CursorLoader(ActPlacesManagement.this,
 ProvPersonalArchive.CONTENT_URI_BOXES, PROJECTION_BOXES, null, null, null);
 };

 if (id == PLACES_LOADER){
     cursorLoader = new CursorLoader(ActPlacesManagement.this,
  ProvPersonalArchive.CONTENT_URI_PLACES, PROJECTION_PLACES, null, null, null);
  };

return cursorLoader;
}

public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {

switch (loader.getId()) {
case BOXES_LOADER:
    mPlacesCursor = cursor;
  break;
case PLACES_LOADER:
    mBoxesCursor = cursor;
    break;
} 

adapter = new AdpPlacesManagement(this, mPlacesCursor, mBoxesCursor, this);     

lstCategorias.setAdapter(adapter);
}

public void onLoaderReset(Loader<Cursor> loader) {
switch (loader.getId()) {
case BOXES_LOADER:
    mPlacesCursor = null;
  break;
case PLACES_LOADER:
    mBoxesCursor = null;
    break;
} 

adapter = new AdpPlacesManagement(this, mPlacesCursor, mBoxesCursor, this);

}

public class ObsPersonalArchive extends ContentObserver {

    public ObsPersonalArchive(Handler handler) {
        super(handler);        
        }
       @Override
       public void onChange(boolean selfChange) {
            super.onChange(selfChange);
       }        
}   
} 
```

和错误

> 12-17 17:28:59.775: I/ActivityThread(16376): 进入进程活动消息 = 101 12-17 17:28:59.795: I/ActivityThread(16376): 退出进程活动消息 = 101 12-17 17:28 :59.805: I/ActivityThread(16376): 进入进程活动 msg = 100 12-17 17:28:59.905: W/dalvikvm(16376): threadid=1: 线程退出未捕获异常 (group=0x2aacc8a0) 12-17 17 ：28：59.915：E / AndroidRuntime（16376）：致命异常：主要12-17 17：28：59.915：E / AndroidRuntime（16376）：java.lang.RuntimeException：无法启动活动ComponentInfo {com.smartmobilelife.personal。存档/com.smartmobilelife.personal.archive.ActPlacesManagement}：java.lang.NullPointerException 12-17 17:28:59.915：E/AndroidRuntime(16376)：在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2705) 12 -17 17:28:59.915：E/AndroidRuntime（16376）：在 android.app。ActivityThread.handleLaunchActivity(ActivityThread.java:2721) 12-17 17:28:59.915: E/AndroidRuntime(16376): 在 android.app.ActivityThread.access$2300(ActivityThread.java:132) 12-17 17:28:59.915 : E/AndroidRuntime(16376): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2071) 12-17 17:28:59.915: E/AndroidRuntime(16376): 在 android.os.Handler.dispatchMessage( Handler.java:99) 12-17 17:28:59.915: E/AndroidRuntime(16376): 在 android.os.Looper.loop(Looper.java:123) 12-17 17:28:59.915: E/AndroidRuntime( 16376): 在 android.app.ActivityThread.main(ActivityThread.java:4669) 12-17 17:28:59.915: E/AndroidRuntime(16376): 在 java.lang.reflect.Method.invokeNative(Native Method) 12- 17 17:28:59.915: E/AndroidRuntime(16376): 在 java.lang.reflect.Method.invoke(Method.java:521) 12-17 17:28:59.915:E/AndroidRuntime(16376): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:876) 12-17 17:28:59.915: E/AndroidRuntime(16376): 在 com.android.internal .os.ZygoteInit.main(ZygoteInit.java:634) 12-17 17:28:59.915: E/AndroidRuntime(16376): at dalvik.system.NativeStart.main(Native Method) 12-17 17:28:59.915: E/AndroidRuntime(16376): 引起: java.lang.NullPointerException 12-17 17:28:59.915: E/AndroidRuntime(16376): at android.support.v4.app.LoaderManagerImpl.createLoader(LoaderManager.java:487) 12-17 17:28:59.915: E/AndroidRuntime(16376): 在 android.support.v4.app.LoaderManagerImpl.createAndInstallLoader(LoaderManager.java:496) 12-17 17:28:59.915: E/AndroidRuntime(16376) ：在 android.support.v4.app.LoaderManagerImpl.initLoader(LoaderManager.java:550) 12-17 17:28:59.915:E/AndroidRuntime(16376): 在 com.smartmobilelife.personal.archive.ActPlacesManagement.onCreate(ActPlacesManagement.java:131) 12-17 17:28:59.915: E/AndroidRuntime(16376): 在 android.app.Instrumentation.callActivityOnCreate (Instrumentation.java:1047) 12-17 17:28:59.915: E/AndroidRuntime(16376): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2669) 12-17 17:28:59.915: E/AndroidRuntime (16376): ... 11 更多还有 11 个还有 11 个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:29:29.307

我建议使用 CursorLoader 并在收到更新时更新列表适配器上的光标。

CursorLoaders 默认是 ContentObservers，你只需要确保你的 ContentProvider 在返回查询游标时设置正确的 uri 并且通知更新/插入/删除的变化。

CursorLoader 文档：http: [//developer.android.com/reference/android/content/CursorLoader.html](http://developer.android.com/reference/android/content/CursorLoader.html)

```
LoaderManager.LoaderCallbacks<Cursor> mLoaderCallback = new LoaderManager.LoaderCallbacks<Cursor>() {

@Override

public Loader<Cursor> onCreateLoader(int id, Bundle args) {

    CursorLoader loader = new CursorLoader(context);

    loader.setProjection(args.getStringArray("projection"));

    loader.setSelection(args.getString("selection"));

    loader.setSelectionArgs(args.getStringArray("selectionArgs"));

    loader.setUri(Uri.parse(args.getString("uri")));

    return loader;

}

@Override

public void onLoadFinished(Loader<Cursor> cursorLoader, Cursor cursor) {

    if (cursor == null) {

       return;

    }

    YourListAdapter adapter = (YourListAdapter) getListAdapter();

    adapter.swapCursor(cursor);

}

@Override

public void onLoaderReset(Loader<Cursor> cursorLoader) {

    YourListAdapter adapter = (YourListAdapter) getListAdapter();

    adapter.swapCursor(null);

}

};

/* Calling a loader sample. */

Bundle loaderArgs = new Bundle();

loaderArgs.putString("uri", URI);

loaderArgs.putStringArray("projection", PROJECTION);

LoaderManager loaderManager = getLoaderManager();

loaderManager.initLoader(YOUR_LOADER_ID, loaderArgs, mYourLoaderCallback); 
```

# java - 对话框不起作用

> ID：13914334
> 
> 赞同：0
> 
> 时间：2012-12-17T12:38:33.817
> 
> 标签：java, android

对话框没有出现，数据仍然插入到数据库中，而它是空的......关于我已经使用但仍然可以运行的对话框的所有代码。只希望在我当前的页面中出现一个警告框，其中edittext为空并需要用户填写它..

```
if (name == null || inputName.getText().toString().length() == 0)
{  
 if (price == null || inputPrice.getText().toString().length() == 0)
    {  
      if (description == null || inputDesc.getText().toString().length() == 0)
         { 
           // creating new product in background thread
           new CreateNewProduct().execute();
         }
       else
         {
          AlertDialog.Builder alertbox = new  AlertDialog.Builder(NewProductActivity.this)      ;

                       // set the message to display
                       alertbox.setMessage("This is the alertbox!");

            // add a neutral button to the alert box and assign a click listener

             alertbox.setNeutralButton("Ok", new DialogInterface.OnClickListener() 
            {

               // click listener on the alert box
               public void onClick(DialogInterface arg0, int arg1) {
               // the button was clicked
               Toast.makeText(getApplicationContext(), "OK button clicked", Toast.LENGTH_LONG).show();
             }
             });

                 // show it
                 alertbox.show(); 
       }

       }
        else{
                   AlertDialog.Builder alertbox = new AlertDialog.Builder(NewProductActivity.this);

                   // set the message to display
                   alertbox.setMessage("This is the alertbox!");

                   // add a neutral button to the alert box and assign a click listener
                   alertbox.setNeutralButton("Ok", new DialogInterface.OnClickListener() {

                       // click listener on the alert box
                       public void onClick(DialogInterface arg0, int arg1) {
                           // the button was clicked
                           Toast.makeText(getApplicationContext(), "OK button clicked", Toast.LENGTH_LONG).show();
                       }
                   });

                   // show it
                   alertbox.show(); 
               }

            }else{
                AlertDialog.Builder alertbox = new AlertDialog.Builder(NewProductActivity.this);

                // set the message to display
                alertbox.setMessage("This is the alertbox!");

                // add a neutral button to the alert box and assign a click listener
                alertbox.setNeutralButton("Ok", new DialogInterface.OnClickListener() {

                    // click listener on the alert box
                    public void onClick(DialogInterface arg0, int arg1) {
                        // the button was clicked
                        Toast.makeText(getApplicationContext(), "OK button clicked", Toast.LENGTH_LONG).show();
                    }
                });

                // show it
                alertbox.show(); 
            }

            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:44:06.723

你为什么不使用这种方法？

```
if (name == null || inputName.getText().toString().equals("")
|| price == null || inputPrice.getText().toString().equals("")
|| description == null || inputDesc.getText().toString().equals("")){
       AlertDialog.Builder alertbox = new AlertDialog.Builder(NewProductActivity.this);

                   // set the message to display
                   alertbox.setMessage("This is the alertbox!");

                   // add a neutral button to the alert box and assign a click listener
                   alertbox.setNeutralButton("Ok", new DialogInterface.OnClickListener() {

                       // click listener on the alert box
                       public void onClick(DialogInterface arg0, int arg1) {
                           // the button was clicked
                           Toast.makeText(getApplicationContext(), "OK button clicked", Toast.LENGTH_LONG).show();
                       }
                   });

                   // show it
                   alertbox.show(); 
}
else
{
       //Insert into database
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:44:33.710

对于比较字符串使用：

```
YourString.equals("") 
```

您可以使用

```
 name.equals("") == true 
```

代替

```
name== null 
```

在你的 if 语句中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T12:50:34.577

但是当 EditText 不为空时，您将显示 Alert 因此更改代码以在 EditText 为空时显示警报：

```
if (!name.equals("") || inputName.getText().toString().length() != 0){

               if (!price.equals("") inputPrice.getText().toString().length() != 0)
                {  
                  if (!description.equals("") || inputDesc.getText().toString().length() != 0)
                    { 
                      // creating new product in background thread
                      new CreateNewProduct().execute();
                    }
                   else{
                  // your code here
        }
    }); 
```

# xml - 如何通过 ActionScript 3 中的嵌套子值过滤 xml 节点？

> ID：13914336
> 
> 赞同：6
> 
> 时间：2012-12-17T12:38:39.430
> 
> 标签：xml, actionscript-3, flash, flash-cs5

我有一个非常简单的场景，我有一个类似于这个的结构

```
<tours>
    <tour>
        <name>Italy 1</name>
        <destinations>
            <destination>Rome</destination>
            <destination>Milan</destination>
        <destinations>
    </tour>
    <tour>
        <name>Italy 2</name>
        <destinations>
            <destination>Rome</destination>
            <destination>Venice</destination>
        <destinations>
    </tour>
</tours> 
```

现在我想查询去米兰的所有旅行团。

下面是我能想到的基于EX4风格的逻辑格式

```
XmlData.tour.(destinations.destination.(name == "Milan")) 
```

但这当然行不通。

在不使用任何额外逻辑的情况下提取这些数据的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:05:07.810

`XmlData.tour.destinations.destination`是`XMLList`。它包含 XML，看起来像`<destination>Milan</destination>`Each these `XML`have `name`= `destination`，所以你什么也得不到。

试试这个：

```
XmlData.tour.(destinations.destination.children().contains("Milan")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:07:08.693

1) xml 格式错误。（关闭目的地缺少“/”）

2)您似乎在 AS3 E4X-finder 中遇到了某种错误。这真的很奇怪，但这里有一个解决方法......

```
var foo:XMLList = data.tour.destinations.(destination == "Milan");
trace("direct check:  " + foo); //fails - 0 matches
trace("------");
for each(var child:XML in data.tour.destinations.destination) {
    if (child == "Milan") {
        trace("found match in foreach Milan");
    }
} 
```

进一步调查，似乎 E4X 引擎搞砸了，因为您在具有相同标识符 ( `<destination>`) 的标签内有多个孩子。

键入以下内容会使“过滤器功能”按预期运行：

```
<destinations>
<destination2>Rome</destination2>
<destination>Milan</destination>
</destinations> 
```

....这真的很奇怪...有人可以详细说明吗？因为根据 E4X 的 xml 标准，应该可以按照问题中的方式进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T13:34:06.067

此脚本将帮助您从您的 XmlData 创建一个新的 xml，但仅限于包括目的地米兰在内的旅游：

```
var DESTINATION_TO_CHECK:String = "Milan";
var i:int;
var j:int;
var numberOfTours:int = XmlData.tour.length();
var numberOfDestinations:int;
var tours:String = "<tours to='" + DESTINATION_TO_CHECK + "'>";

for (i = 0; i < numberOfTours; i++)
{
    numberOfDestinations = XmlData.tour[i].destinations.destination.length();

    for (j = 0; j < numberOfDestinations; j++)
    {
        if (XmlData.tour[i].destinations.destination[j] == DESTINATION_TO_CHECK)
        {
            tours += XmlData.tour[i];
        }
    }
}

tours += "</tours>";

trace(new XML(tours)); 
```

# tcl - 将 tcl/tk 解释器从活动 TCL 更改为 tclkit 的兼容性

> ID：13914341
> 
> 赞同：0
> 
> 时间：2012-12-17T12:38:59.977
> 
> 标签：tcl

由于主动 tcl 会收费，我想换成 tclkit 这样的免费解释器，这两个解释器的主要区别是什么，我需要大规模修改我的源代码还是简单地修改一些模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:21:03.780

两者都是 Tcl 解释器，如果你有相同的版本（如 报告`info patchlevel`）那么你有*相同*的版本。**确实很少有区别。**这些差异：

*   ActiveTcl 带有比 Tclkit 更多的第三方包（尽管您可以使用工具包构建的库或使用两者构建自己的包）。这就是您对这种全方位服务的 Tcl 发行版的期望。

*   Tclkit 倾向于支持更少的字符集和时区。如果需要，您可以重新添加它们。这是因为 Tclkit 发行版被设计用于更多的嵌入式情况（并且，最初，是为了适合软盘；现在几乎没有人有软盘了，这几乎无关紧要）。

*   在启动、库位置等方面存在差异。当然。

也就是说，建立在 ActiveTcl 平台之上的商业工具（尤其是 ActiveState TDK）实际上可以使用他们所谓的 basekits 来生产打包软件，实际上是 tclkits。它们使用相同的打包技术，相同的文件格式。（由于品牌原因，名称不同，并且它们的默认包装好东西可能略有不同。）

* * *

我自己，我在同一个系统上使用 ActiveTcl*和Tclkit。*（我也直接从源代码编译我自己的 Tcl 构建，但是你会期望这是因为我是 Tcl 本身的开发人员。）当我只想编写代码时，ActiveTcl 非常方便，而 Tclkit 则很好我正在向我组织中的其他人分发应用程序。

# jquery - JQuery 专注于 TextBox 或 Div

> ID：13914352
> 
> 赞同：0
> 
> 时间：2012-12-17T12:39:40.740
> 
> 标签：jquery, asp.net-mvc

我正在做一个项目，我有一个 div，其中有多个 div，每个 div 都有唯一的 ID（来自 DB），每个 div 都包含一个用于添加评论的文本框，如下所示

```
<div id="maindiv">
<div id="@item.resid">
<p>Content1</p>
<input type="text" class="txtarea" resourceid="@item.resid"/>
</div>
<div id="@item.resid">
<p>Content2</p>
<input type="text" class="txtarea" resourceid="@item.resid"/>
</div>
<div id="@item.resid">
<p>Content3</p>
<input type="text" class="txtarea" resourceid="@item.resid"/>
</div>
<div id="@item.resid">
<p>Content4</p>
<input type="text" class="txtarea" resourceid="@item.resid"/>
</div> 
```

. . . .

我正在通过文本框的按键事件添加评论，我遇到的问题是，当我在不利的内容上添加评论时，然后在添加焦点后出现在顶部。我曾尝试专注于文本框，甚至是 div，但没有奏效:( 下面是我添加评论的代码

```
$(".txtarea").keypress(function (e) {
            if (e.keyCode == 13) {
                if ($(this).val().trim() != "") {
                    var commentText = $(this).val();
                    var resourceid = $(this).attr('resourceid');
                    var divId = "." + resourceid;
                    $.ajax({
                        url: ResourceAjaxUrl.AddNewCommentOnResources,
                        type: "POST",
                        data: JSON.stringify({ resourceID: resourceid, commentText: commentText }),
                        dataType: "html",
                        contentType: "application/json; charset-utf-8",
                        success: function (Result) {
                                    $('#maindiv').html(Result);
                                    $('#maindiv div#' + divId.split('.')[1]).focus();
                                    $('#maindiv div#' + divId.split('.')[1]).find(".txtarea").focus();                                    

                        },
                        error: function (msg) {
                            alert("Unable to save comment in");
                        }
                    });
                }
                else {
                    $(this).val('');
                    $(this).focus();
                }
            }
        }); 
```

我在开发人员工具上看到了 focus() 行，它工作正常但仍然没有集中注意力，我希望如果我在不利（或最后）评论上添加评论，焦点将停留在上面而不是放在顶部

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:49:36.233

您不能将焦点设置在 div 上。它仅适用于表单元素（输入、文本区域、按钮等）。

看起来您的问题是尝试查找时选择器中的 ID 错误`.txtarea`：

```
success: function (Result) {
                                    $('#maindiv').html(Result);
                                    $('#maindiv div#' + divId.split('.')[1]).find(".txtarea").focus();                                    

                        }, 
```

> $(' #main div#' + **divId.split** ('.')[1]).find(".txtarea").focus();

替换为

> $(' **#maindiv** div#' + divId.split('.')[1]).find(".txtarea").focus();

此外，一旦你有了一个唯一的 ID，你就不需要写`$('#maindiv div#' + divId.split('.')[1])`. 这就足够了：（`$('#' + divId.split('.')[1])`无论如何，整个页面的 id 都必须是唯一的，因此无需指定它`div`位于 inside `#maindiv`）

# magento - 在报价上存储支付网关响应并坚持订购

> ID：13914354
> 
> 赞同：0
> 
> 时间：2012-12-17T12:39:42.880
> 
> 标签：magento, payment-gateway

我正在为授权贷款作为支付系统的网关编写一个 magento 模块。

由于客户被拒绝的可能性相对较高，我选择使用 getCheckoutRedirectURL() 来实现这一点（在结帐流程中的“下订单”之前放置贷款步骤），以便在失败的情况下，我可以轻松地退回客户到付款选择页面。

然后，我在控制器的 redirectAction 中调用网关 API。

结果，我得到了一个在灯箱中打开的 URL，以引导客户完成贷款流程，以及来自贷款网关的一些 id。

我想将这些额外的 id 存储为报价的一部分，然后在我将报价转换为订单时将它们复制到订单中（我进行了类似于 google checkout 的转换 - 基于来自贷款网关的回调）。

但是，我无法弄清楚如何在报价单上保留数据。

显而易见的方式：

```
$quote->setCustId($custId);
$quote->save(); 
```

不工作；附加数据不会存储在数据库中，因此在回发处理程序中无法将报价转换为订单。

同样的情况发生在

```
$quote->setData('custId', $custId);
$quote->save(); 
```

（我认为这只是第一个更明确的形式，因为它不使用魔法设置器/获取器）

我已经看到对 setAdditionalData 的引用（例如，[here](http://www.magentocommerce.com/boards/viewthread/40484/)），但这似乎仅适用于支付对象，我认为我还没有引用（尽管我可能是错的？）

有什么方法可以在数据库中的订单上存储一些字段，而不必为它们实际添加数据库字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:50:32.537

您需要将实际列添加到`sales_flat_quote`表中以在引用对象中存储额外的变量。

由于您正在制作的东西与付款方式有关，因此我建议您将这些变量存储在`additional_information`数据集中，该数据集作为序列化的 php 数组存储到`sales_flat_quote_payment`表中，并且付款方式可以将数据设置为该变量，如下所示：

```
$quote->getPayment()->getInfoInstance()->setAdditionalInformation($key, $value);
$order->getPayment()->getInfoInstance()->setAdditionalInformation($key, $value); 
```

查看更多来自`app/code/core/Mage/Payment/Model/Info.php`

唯一的缺点是它在最后存储为序列化数组，这意味着如果您以后需要依赖这些数据、提供过滤器等，则以后没有直接的 sql 访问。

# c# - 如何在 C# 中查找字符串的宽度（以像素为单位）

> ID：13914355
> 
> 赞同：10
> 
> 时间：2012-12-17T12:39:43.417
> 
> 标签：c#, winforms

我正在尝试实现框架文本（使用 Windows 窗体），例如：

![在此处输入图像描述](../Images/b5c78e09e67d4e6643e3f8fee46bb12d.png)

高度始终相同，因为我的字符串少于 20 个字符。宽度呢？有没有办法自动获取？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-17T12:41:14.783

采用`Graphics.MeasureString()`

来自 MSDN：http: [//msdn.microsoft.com/en-us/library/6xe5hazb.aspx](http://msdn.microsoft.com/en-us/library/6xe5hazb.aspx)

```
private void MeasureStringMin(PaintEventArgs e)
{
    // Set up string. 
    string measureString = "Measure String";
    Font stringFont = new Font("Arial", 16);

    // Measure string.
    SizeF stringSize = new SizeF();
    stringSize = e.Graphics.MeasureString(measureString, stringFont);

    // Draw rectangle representing size of string.
    e.Graphics.DrawRectangle(new Pen(Color.Red, 1), 0.0F, 0.0F, stringSize.Width, stringSize.Height);

    // Draw string to screen.
    e.Graphics.DrawString(measureString, stringFont, Brushes.Black, new PointF(0, 0));
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-08-21T23:57:23.923

如果您不想处理 Paint 事件处理程序，您可以尝试 TextRenderer 类。它有一个与上述答案中的“MeasureString”方法相同的静态方法。然而，在这个类中，它被称为 MeasureText。

# html - 带有图像的 Lotus Notes 8.5 HTML 签名，图像未水平对齐

> ID：13914357
> 
> 赞同：0
> 
> 时间：2012-12-17T12:39:47.987
> 
> 标签：html, image, lotus-notes, signature, alignment

我对带有图像的 Lotus Notes 电子邮件 HTML 签名有以下问题。HTML签名的代码是这样的：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>signature</title>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
 </head>
 <body>

 <!--CSS can skip-->
 <style type="text/css">
   #url {
    color:rgb(0, 136, 204) !important;
    text-decoration:none !important;
   }
   #outer {
    font-family: 'Lucida Sans', Lucida Grande, Verdana, Arial, Sans-Serif; 
    font-size:11px; 
    color:#555555;
   }
   #padding {
    padding-top:10px;
   }
   #div.img {
    width:288px;
    height:40px;
    padding-left:10px;
   }
   #left {
    float:left;
   }
   #right {
    width:100%;
   }
 </style>

<!--Signature itself-->
<div id="outer">
 <div id="header">
  [Name FamilyName] | [Title]
 </div>
 <div id="padding"></div>
 <div id="left">
  Line1<br>
  Line2<br>
  Line3<br>
 </div>
 <div id="right">
  <img src="file:///LocalPathToImage.png" style="padding-left:10px">
 </div>
</div>
</body>
</html> 
```

想法是要有签名，其中图像向右对齐，文本在左侧。在浏览器中对齐是正确的，但在 Lotus Notes 8.5 中将其作为签名（文件->首选项->邮件->签名->HTML）时，图像始终位于底部。

如何确保在 HTML 签名中保留对齐（浮动）属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:02:07.030

您的 CSS 规则似乎在 Chrome 中运行良好（我在 JSFiddle 上进行了检查），但在遵守 CSS 规则方面，Lotus Notes 中的 HTML 引擎可能还很遥远。我建议改写它以使用表格，您可能会获得更大的成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-06T20:13:08.200

您应该使用内联 css，因为并非所有电子邮件客户端都会在顶部读取您的样式表。

# c# - 由 csc.exe 编译，无需 VS 和 .NET Framework SDK

> ID：13914361
> 
> 赞同：0
> 
> 时间：2012-12-17T12:39:59.570
> 
> 标签：c#, .net

我有 2 台 Windows 机器：Machine1 有 Visual Studio 2010；Machine2 只有 .NET Framework 4.0 客户端配置文件，没有任何 Visual Studio 或 .NET Framework SDK。

编译一个简单的 C# 测试（test.cs 包括“使用 System.Data;”）：

```
C:\Windows\Microsoft.NET\Framework64\v4.0.30319\csc.exe /target:exe test.cs 
```

它在 Machine1 上运行良好。但在 Machine2 上失败了：

```
test.cs(2,14): error CS0234: The type or namespace name 'Data' does not exist in
        the namespace 'System' (are you missing an assembly reference?) 
```

我将它复制`"C:\Windows\Microsoft.NET\Framework64\v4.0.30319\System.Data.dll"`到当前目录，但仍然失败。

编译时添加了“/r:system.data.dll”：

```
C:\Windows\Microsoft.NET\Framework64\v4.0.30319\csc.exe /r:system.data.dll /target:exe test.cs 
```

你知道原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:59:03.350

编译器将尝试自动加载名为`csc.rsp`的文件，该文件包含默认编译选项。除非您使用 /noconfig 选项进行编译。该文件包含一组通用 .NET Framework 程序集的 /reference 选项，System.Data.dll 就是其中之一。

我所有的机器上都有一个 csc.rsp 文件，例如它位于我现在使用的机器上的 C:\Windows\Microsoft.NET\Framework\v4.0.30319 中。

您使用的机器没有该文件的可能性非常高。我不知道这是否特定于客户资料，我一直避免这样做。但是使用 Windows 资源管理器快速检查会给您一个提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:45:08.540

.NET 客户端配置文件是用于客户端（用户界面）应用程序的 .NET 精简版。并非完整 .NET 中提供的所有程序集和类都存在于客户端配置文件中。如果您希望编写适用于两者的应用程序，则必须将自己限制为仅存在于客户端配置文件中的那些类和程序集（因为它是一个子集）。

您可能会发现在机器 2 上简单地安装完整的 .NET 会更方便。

另请注意，从 .NET 4.5 开始，客户端配置文件不再存在。

# node.js - socket.io，指定套接字中的用户

> ID：13914363
> 
> 赞同：1
> 
> 时间：2012-12-17T12:40:22.623
> 
> 标签：node.js, socket.io

我对 socket.io 有一点问题。我想更新指定房间的用户。我按照本教程添加了一个“用户列表”（[http://psitsmike.com/2011/10/node-js-and-socket-io-multiroom-chat-tutorial/](http://psitsmike.com/2011/10/node-js-and-socket-io-multiroom-chat-tutorial/)），当您更换房间时，您的昵称应该从列出并更新新用户中的用户/用户

这样做有可能吗？

```
usernames = {};
var clients = io.sockets.usernames(socket.room); 
```

然后调用：

```
io.sockets.emit('updateusers', clients); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:36:05.213

这个想法是，当您进入或离开房间时，房间有自己的套接字列表，它管理自己的列表。所以你想要做的是当用户离开房间时 - 向那个房间广播消息：

```
socket.broadcast.to('room1').emit('userRemove', 'data'); 
```

该房间的套接字应在接收时处理此消息，以便从列表中删除实际记录（如果这是网络应用程序，它可以是 html 列表），因为在服务器上它不再在房间中。

这称为**同步**。

# php - Flex Datagrid 未更新

> ID：13914364
> 
> 赞同：1
> 
> 时间：2012-12-17T12:40:30.097
> 
> 标签：php, json, actionscript-3, apache-flex, flex4.6

问题：我有一个带有 3 个索引的手风琴，每个索引包含一个组件。该组件始终是相同的（一个普通的数据网格）。这个数据网格通过 php 和 JSON 接收他的数据。

现在，当我的手风琴的 SelectedIndex 发生变化时，我的数据网格中的数据应该会发生变化。

这是 php 查询：

```
$query = "SELECT * FROM gerecht where typeID = " . $typeId; 
```

`$typeId`selectedIndex在哪里

```
if(isset($_POST['accIndex'])){
    $typeId = mysql_real_escape_string($_POST['accIndex']);
} else {
    $typeId = 1;
} 
```

现在，每当我更改手风琴索引时，数据都保持不变。这是我的弹性代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" xmlns:components="components.*" initialize="getData.send();">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
        <mx:HTTPService id="getData" url="http://localhost/P006_Project/Query.php" 
                        useProxy="false" method="POST" resultFormat="text" result="getPHPData(event)" />
        <mx:HTTPService id="sendData" url="http://localhost/P006_Project/Query.php"
                        useProxy="false" method="POST" result="sendData_resultHandler(event)">
            <mx:request xmlns="">
                <accIndex>
                    {accItems.selectedIndex + 1}
                </accIndex>
            </mx:request>
        </mx:HTTPService>

        <s:ArrayCollection id="acItems" source="{dataArray.source}" />
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.controls.Alert;
            import mx.controls.Text;
            import mx.events.FlexEvent;
            import mx.events.IndexChangedEvent;
            import mx.rpc.events.ResultEvent;

            [Bindable]private var dataArray:ArrayCollection = new ArrayCollection();

            private function initDataGrid():void
            {
                getData.send();
            }

            private function getPHPData(event:ResultEvent):void
            {
                var rawArray:Array;
                var rawData:String = String(event.result);
                rawArray = JSON.parse(rawData) as Array;
                dataArray = new ArrayCollection(rawArray);
            }

            protected function accItems_changeHandler(event:IndexChangedEvent):void
            {
                // TODO Auto-generated method stub
                sendData.send();
                trace(acItems);
            }

            protected function sendData_resultHandler(event:ResultEvent):void
            {
                // TODO Auto-generated method stub
                Alert.show(event.result.toString());
            }

        ]]>
    </fx:Script>

    <mx:Accordion id="accItems" creationPolicy="auto" change="accItems_changeHandler(event)">
        <s:NavigatorContent label="Frisdranken">
            <components:FULLTESTCOMP acItems="{acItems}" creationComplete="{initDataGrid()}"/>
        </s:NavigatorContent>
        <s:NavigatorContent label="Bieren (vat)">
            <components:FULLTESTCOMP acItems="{acItems}" creationComplete="{initDataGrid()}"/>
        </s:NavigatorContent>
    </mx:Accordion>
</s:Application> 
```

我猜在以下方面出了点问题： - php 接收到 selectedIndex？- 或者 flex 不能用新数据更新数据网格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:27:05.937

KI终于找到了解决办法。我使用了 2 个 httpServices，我总是从第一个接收数据，但是这个不包含参数。所以我把它们合二为一。导致以下代码：（我还添加了所有其他组件，所以不要关注它们）

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" xmlns:components="components.*">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
        <mx:HTTPService id="sendData" url="http://localhost/P006_Project/Query.php"
                        useProxy="false" method="POST" result="sendData_resultHandler(event)">
            <mx:request xmlns="">
                <accIndex>
                    {accItems.selectedIndex + 1}
                </accIndex>
            </mx:request>
        </mx:HTTPService>

        <s:ArrayCollection id="acItems" source="{dataArray.source}" />
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.controls.Alert;
            import mx.controls.Text;
            import mx.events.FlexEvent;
            import mx.events.IndexChangedEvent;
            import mx.rpc.events.ResultEvent;

            [Bindable]private var dataArray:ArrayCollection = new ArrayCollection();

            private function initDataGrid():void
            {
                sendData.send();
            }

            protected function accItems_changeHandler(event:IndexChangedEvent):void
            {
                sendData.send();
            }

            protected function sendData_resultHandler(event:ResultEvent):void
            {
                var rawArray:Array;
                var rawData:String = String(event.result);
                rawArray = JSON.parse(rawData) as Array;
                dataArray = new ArrayCollection(rawArray);
            }

        ]]>
    </fx:Script>

    <mx:Accordion id="accItems" creationPolicy="auto" change="accItems_changeHandler(event)">
        <s:NavigatorContent label="Frisdranken">
            <components:FULLTESTCOMP acItems="{acItems}" creationComplete="{initDataGrid()}"/>
        </s:NavigatorContent>
        <s:NavigatorContent label="Bieren (vat)">
            <components:FULLTESTCOMP acItems="{acItems}" creationComplete="{initDataGrid()}"/>
        </s:NavigatorContent>
        <s:NavigatorContent label="Bieren">
            <components:FULLTESTCOMP acItems="{acItems}" creationComplete="{initDataGrid()}"/>
        </s:NavigatorContent>
        <s:NavigatorContent label="Warme dranken">
            <components:FULLTESTCOMP acItems="{acItems}" creationComplete="{initDataGrid()}"/>
        </s:NavigatorContent>
        <s:NavigatorContent label="Wijnen">
            <components:FULLTESTCOMP acItems="{acItems}" creationComplete="{initDataGrid()}"/>
        </s:NavigatorContent>
        <s:NavigatorContent label="Sterke dranken">
            <components:FULLTESTCOMP acItems="{acItems}" creationComplete="{initDataGrid()}"/>
        </s:NavigatorContent>
        <s:NavigatorContent label="Tapas">
            <components:FULLTESTCOMP acItems="{acItems}" creationComplete="{initDataGrid()}"/>
        </s:NavigatorContent>
        <s:NavigatorContent label="Platos">
            <components:FULLTESTCOMP acItems="{acItems}" creationComplete="{initDataGrid()}"/>
        </s:NavigatorContent>
        <s:NavigatorContent label="Especialidades">
            <components:FULLTESTCOMP acItems="{acItems}" creationComplete="{initDataGrid()}"/>
        </s:NavigatorContent>
        <s:NavigatorContent label="Bocadillos">
            <components:FULLTESTCOMP acItems="{acItems}" creationComplete="{initDataGrid()}"/>
        </s:NavigatorContent>
    </mx:Accordion>
</s:Application> 
```

# oracle - Oracle 识别表的 clob 列中的非唯一值

> ID：13914365
> 
> 赞同：1
> 
> 时间：2012-12-17T12:40:34.233
> 
> 标签：oracle, compare, clob

我想识别 clob 列中内容不唯一的所有行。

我使用的查询是：

```
select
  id,
  clobtext
from
  table t
where 
    (select count(*) from table innerT where dbms_lob.compare(innerT.clobtext, t.clobtext) = 0)>1 
```

但是这个查询很慢。有什么建议可以加快速度吗？我已经尝试使用 dbms_lob.getlength 函数来消除子查询中的更多元素，但我并没有真正提高性能（感觉一样）。

为了更清楚地举一个例子：

桌子

身份证 | clobtext

1 | 一个

2 | b

3 | C

4 | d

5 | 一个

6 | d

运行查询后。我想得到（顺序无关紧要）：

1 | 一个

4 | d

5 | 一个

6 | d

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:11:42.437

过去，我为每个 clob 生成了校验和（在我的 C# 代码中）。

虽然这会导致 io 一次性增加（以生成校验和），但后续扫描会更快，您也可以索引该值

TK 在这里有一个很好的 PL\SQL 示例： [Ask Tom](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:1493406836464)

# android - 如何在 Eclipse Juno 上为 android 安装 motodev 核心插件？

> ID：13914368
> 
> 赞同：2
> 
> 时间：2012-12-17T12:40:42.220
> 
> 标签：android, eclipse, plugins, motodev-studio

在网上搜索了很多之后`motodev plugin`，我发现了一些关于重新分发新的帖子。我为所有 android 开发人员制作了它，它有许多强大的代码片段、自动 ContentProvider 生成器、自动活动和在 android manifest 中注册的小部件等等。

此链接有完整的说明：[http ://dev.seven-sky.ir/](http://dev.seven-sky.ir/)

安装步骤： 下载[motodev zip 文件](http://dev.seven-sky.ir)后，请遵循
1\. 从该站点下载 eclipse juno for mobile：http: [//www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)
2\. 将其解压缩到一个文件夹，例如*c:\eclipse*并运行 eclipse。
3\. 转到菜单：Help > Install New Software... > 单击*Add...*按钮。
4\. 在名称字段中键入：*“Sequoyah 2.1”*，在站点字段中键入*“http://download.eclipse.org/sequoyah/updates/2.1/”*
5\. 单击确定并等待列表填充，选择所有项目并然后单击*“完成”* 按钮。
6.安装好sequoyah 2.1后，用同样的方法安装motodev core plugins，在name字段和file://c:\downloads\motodev-core-plugins-5.0.0-eclipse-juno中输入*“motodev core plugins”* 。 zip”在站点字段中（您的下载文件位于 c:\downloads 中）。
7.如果提示重启eclipse就重启吧。
8.安装并重启eclipse后，享受两个新的视角：*“MOTODEV Database”*和*“MOTODEV Studio for Android”*。

# objective-c - 无法在我的导航栏中隐藏后退按钮

> ID：13914369
> 
> 赞同：0
> 
> 时间：2012-12-17T12:40:47.353
> 
> 标签：objective-c, ios, uinavigationcontroller, back-button

登录应用程序后，我试图在 firstView 中隐藏我的后退按钮。我的 ViewWillAppear 中有这段代码。

```
self.navigationController.navigationItem.hidesBackButton = YES;
self.navigationController.navigationBar.hidden = NO; 
```

但我的后退按钮不会消失。

有什么帮助吗？

亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:49:35.963

改用这个

```
self.navigationItem.hidesBackButton = YES; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T12:50:24.317

试试这几行，这将解决：

```
self.navigationItem.hidesBackButton = TRUE;
self.navigationItem.leftBarButtonItem = nil; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T12:49:48.187

您可以将自定义 UIBarButtonItem 设置为左​​栏按钮。您可以尝试以一种平滑的方式隐藏或设计它，它有助于实现您想做的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T13:47:48.427

如果你想隐藏后退按钮，也许你不想回到前一个屏幕。如果是这种情况，而不是推动导航控制器以模态方式显示您的视图。否则，请执行以下操作：

```
UIButton* myButton=[UIButton buttonWithType:UIButtonTypeRoundedRect];
UIBarButtonItem* myBarButton=[[UIBarButtonItem alloc] initWithCustomView:myButton];
myButton.hidden = YES; 
```

# jaxb - JaxB 引用解析

> ID：13914372
> 
> 赞同：2
> 
> 时间：2012-12-17T12:40:59.750
> 
> 标签：jaxb, unmarshalling

对于以下示例 XML 输入：

```
<Participants course="someCourse">
  <workers>
    <Worker ref="p3">
    <Worker ref="p2">
  </workers>
  <Trainer ref="p1"/>
</Participants>

<Group id="group1" name="some mixed Person group">
   <trainers>
     <Trainer id="p1" name="John Doe">
   </trainers>
   <workers>
     <Worker id="p2" name="Jim Scott">
     <Worker id="p3" name="Walter Peace">
   </workers>
</Group> 
```

我试图确保 Participants 中的 PersonList 指向从 group1 读取的 Persons。（有关使用的 JaxB 注释，请参阅下面的代码片段）。这只是我正在寻求的更通用方法的一个示例。我通常需要能够以列表元素正确解组为引用的方式遵循 id="" 和 ref="" 属性。

通过 UnmarshalListener 和 Unmarshalling 两次，我解决了从 ref 属性到 id 属性的引用问题。在第一阶段，查找映射由 id 属性填充。在第二阶段查找裁判。不幸的是，此解决方案将创建**副本**而不是引用。我可以使用父对象来解决这个问题，但我正在寻找更通用的解决方案。以所示方式使用 ref/id 属性实现正确取消引用的好方法是什么？

```
/**
 * intercept the unmarshalling
 */
public static class ModelElementMarshallerListener extends javax.xml.bind.Unmarshaller.Listener {

 public Map<String,Person> lookup=new HashMap<String,Person>();

 @Override
 public void afterUnmarshal(java.lang.Object target, java.lang.Object parent) {
  if (target instanceof Person) {
    person=(Person) target;
    if (person.getId()!=null) {
       lookup.put(person.getId(), person);
    }
    if (person.getRef()!=null) {
      if (lookup.containsKey(person.getRef())) {
        Person personRef=lookup.get(person.getRef());
        person.copyFrom(personRef);
        person.setRef(null);
      }
    }
   }
 } 
```

}

```
@XmlRootElement(name="Participants")
public class Participants  {
  private List<Worker> workers;

 /**
   * getter for List<Worker> workers
   * @return workers
   */
  @XmlElementWrapper(name="workers")
  @XmlElement(name="Worker", type=Worker.class)
  public List<Worker> getWorkers() { 
    return workers; 
  } 
```

...

```
}

@XmlRootElement(name="Group")
public class Group {

  private List<Worker> workers;

 /**
   * getter for List<Worker> workers
   * @return workers
   */
  @XmlElementWrapper(name="workers")
  @XmlElement(name="Worker", type=Worker.class)
  public List<Worker> getWorkers() { 
    return workers; 
  }
 ...

}
@XmlRootElement(name="Trainer")
public class Trainer extends Person {}

@XmlRootElement(name="Worker")
public class Worker extends Person {}

@XmlRootElement(name="Person")
public class Person {
 private String name;

 /**
   * getter for xsd:string/String name
   * @return name
   */
  @XmlAttribute(name="name")  
  public String getName() {
    return name;
  }

  public void setName(String name) {
     this.name=name;
  }
  private String ref;

 /**
   * getter for xsd:string/String id
   * @return id
   */
  @XmlAttribute(name="ref")  
  public String getRef() {
    return ref;
  }

  public void setRef(String ref) {
    this.ref=ref;
  }

  private String id;
 /**
   * getter for xsd:string/String id
   * @return id
   */
  @XmlAttribute(name="id")  
  @XmlID
  public String getId() { 
    this.id;
  }

  /**
   * setter for xsd:string/String id
   * @param pid - new value for id
   */
  public void setId(String pid) { 
    this.id=pid; 
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:42:22.437

为了更好地说明这一点，我修改了问题以适合他的答案。现在有一个通用基类 Person ，我正在尝试按照[Can generic XmlAdapter bewritten使用它](https://stackoverflow.com/questions/4338237/can-generic-xmladapter-be-written)

我解决了能够通过编写特定的派生类并将它们与@XmlJavaTypeAdapter 一起使用来实际确保使用适配器的问题。我使用以下方法预注册适配器：

```
JAXBContext context = JAXBContext.newInstance(type);
Unmarshaller u = context.createUnmarshaller();
u.setAdapter(Worker.WorkerAdapter.class,new Worker.WorkerAdapter());
u.setAdapter(Trainer.TrainerAdapter.class,new Trainer.TrainerAdapter()); 
```

然后解组两次。调试显示两次传递的适配器实例是相同的。查找仍然以某种方式似乎失败了......原因是@XmlJavaTypeAdapter 注释的工作方式，请参阅：

[我应该用 XmlJavaTypeAdapters 注释哪些包信息？](https://stackoverflow.com/questions/8735737/what-package-info-do-i-annotate-with-xmljavatypeadapters)

@XmlJavaTypeAdapter 似乎有多种模式：

*   它可以是一个类的注解
*   它可以是字段的注释（getter）
*   它可以在 package-info.java 文件中用于注释整个包

此时我正在使用所有三个注释，现在必须调试哪些是必要的。我假设全局注释（类、包）没有按预期工作。原因可能是 @XmlElementWrapper 中的 type= 用法，它显式地调用了一个类型。就我个人而言，我还不明白发生了什么。至少现在一切都按预期进行。

本地字段注释现在是例如：

```
@XmlElementWrapper(name="workers")
@XmlElement(name="Worker", type=Worker.class)
@XmlJavaTypeAdapter(WorkerAdapter.class) 
```

package-info.java 注释是：

```
@XmlJavaTypeAdapters({
 @XmlJavaTypeAdapter(value=WorkerAdapter.class,type=Worker.class),
 @XmlJavaTypeAdapter(value=TrainerAdapter.class,type=Trainer.class),
})
package com.bitplan.jaxb.refidtest; 
```

导入 javax.xml.bind.annotation.adapters.*；

类注释是：

```
@XmlJavaTypeAdapter(Worker.WorkerAdapter.class)
public class Worker extends Person { 
```

...

```
/**
 * Worker Adapter
 * @author wf
 *
 */
public static class WorkerAdapter extends  PersonAdapter<Worker>{
    @Override
    public Worker marshal(Worker me)
            throws Exception {
        return super.marshal(me);
    }

    @Override
    public Worker unmarshal(Worker me) throws Exception {
        return super.unmarshal(me);
    }
}

/**
 * https://stackoverflow.com/questions/7587095/can-jaxb-marshal-by-containment-at-first-then-marshal-by-xmlidref-for-subsequen/7587727#7587727
 * @author wf
 *
 */
public class PersonAdapter<T extends Person> extends XmlAdapter<T, T>{

    public boolean debug=true;

    /**
     * keep track of the elements already seen
     */
    public Map<String,T> lookup=new HashMap<String,T>();

    @Override
    public T marshal(T me)
            throws Exception {
        return me;
    }

    /**
     * show debug information
     * @param title
     * @param key
     * @param me
     * @param found
     */
    public void showDebug(String title,String key,T me, T found) {
        String deref="?";
        if (found!=null)
            deref="->"+found.getId()+"("+found.getClass().getSimpleName()+")";
        if (debug)
            System.err.println(title+": "+key+"("+me.getClass().getSimpleName()+")"+deref+" - "+this);
    }

    @Override
    public T unmarshal(T me)    throws Exception {
        if (me.getId()!=null) {
            showDebug("id",me.getId(),me,null);
            lookup.put(me.getId(), me);
            return  me;
        }
        if (me.getRef()!=null) {
            if (lookup.containsKey(me.getRef())) {
                T meRef=lookup.get(me.getRef());
                showDebug("ref",me.getRef(),me,meRef);
                me.setRef(null);
                            return  meRef;
            } else {
                if (debug)
                    showDebug("ref",me.getRef(),me,null);
            }
        }
        return  me;
    }

} 
```

# spring - 如何确保“池”bean 获得它需要的所有其他 bean？

> ID：13914375
> 
> 赞同：3
> 
> 时间：2012-12-17T12:41:11.287
> 
> 标签：spring, postconstruct

我有一个 spring 配置，我在其中定义了数百个扩展的操作`MyAction`。我有一个池，执行服务可以在其中查找操作。我不能直接使用 appContext，因为每个操作都有一个或多个“键”，执行服务将使用这些“键”，并且池会减少这种依赖关系。

所以池必须能够收集所有类型的bean `MyAction`（或者更确切地说是扩展的bean `MyAction`）。

该方法`ApplicationContext.getBeansOfType()`似乎可以满足我的需要，但是我什么时候可以安全地调用它？

如果我可以在一个方法中调用它会很棒，`@PostConstruct`但它是否保证 bean 工厂已经看到当时从配置中添加了每个 bean？

注意：几乎我所有的豆子都是`@Lazy`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:44:38.293

您可以通过构造函数使用注入并传递`Collection`您的`MyAction`

就像是

```
 @Component
 public class Foo {
     private final Set<MyAction> myActions;

     @Inject
     public Foo(Set<MyAction> myActions) { this.myActions = myActions; }
 } 
```

或者

```
 public class Foo {
     private Set<MyAction> myActions;

     @Inject
     public void setMyActions(Set<MyAction> myActions) { this.myActions = myActions; }
 } 
```

Spring 将负责创建包含所有扩展的 bean 的集合`MyAction`。

在第一种情况下，它们是由构造函数注入的，您可以在任何方法中安全地使用它们。

在第二种情况下，Spring 最终会调用 setter。您可以在 setter 中进行任何后期处理，也可以添加`@PostConstruct`适用于`myActions`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:41:02.877

尝试`ListableBeanFactory`像[这样](https://stackoverflow.com/questions/2799316/how-to-collect-and-inject-all-beans-of-a-given-type-in-spring-xml-configuration)使用。[这里](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/ListableBeanFactory.html)还有API 文档。方法[getBeansOfType](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/ListableBeanFactory.html#getBeansOfType%28java.lang.Class,%20boolean,%20boolean%29)具有`allowEagerInit`强制惰性对象急切初始化的参数。

# android - Android中的应用程序崩溃

> ID：13914379
> 
> 赞同：0
> 
> 时间：2012-12-17T12:41:18.163
> 
> 标签：android, android-intent

我是 Android 的新手，我创建了一个应用程序，但是当我在单击按钮时开始相同的活动时它崩溃了，我也完成了当前`Activity`这是我的错误日志。我`Timer`也在我的应用程序和背景音乐中使用

```
12-18 05:55:15.776: D/AndroidRuntime(2345): Shutting down VM
12-18 05:55:15.776: W/dalvikvm(2345): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
12-18 05:55:15.817: E/AndroidRuntime(2345): FATAL EXCEPTION: main
12-18 05:55:15.817: E/AndroidRuntime(2345): android.view.WindowManager$BadTokenException: Unable to add window -- token android.os.BinderProxy@41542480 is not valid; is your activity running?
12-18 05:55:15.817: E/AndroidRuntime(2345):     at android.view.ViewRootImpl.setView(ViewRootImpl.java:585)
12-18 05:55:15.817: E/AndroidRuntime(2345):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:326)
12-18 05:55:15.817: E/AndroidRuntime(2345):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:224)
12-18 05:55:15.817: E/AndroidRuntime(2345):     at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:149)
12-18 05:55:15.817: E/AndroidRuntime(2345):     at android.view.Window$LocalWindowManager.addView(Window.java:547)
12-18 05:55:15.817: E/AndroidRuntime(2345):     at android.app.Dialog.show(Dialog.java:277)
12-18 05:55:15.817: E/AndroidRuntime(2345):     at android.app.AlertDialog$Builder.show(AlertDialog.java:932)
12-18 05:55:15.817: E/AndroidRuntime(2345):     at com.example.whowantto.play$timer.onFinish(play.java:722)
12-18 05:55:15.817: E/AndroidRuntime(2345):     at android.os.CountDownTimer$1.handleMessage(CountDownTimer.java:118)
12-18 05:55:15.817: E/AndroidRuntime(2345):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-18 05:55:15.817: E/AndroidRuntime(2345):     at android.os.Looper.loop(Looper.java:137)
12-18 05:55:15.817: E/AndroidRuntime(2345):     at android.app.ActivityThread.main(ActivityThread.java:4745)
12-18 05:55:15.817: E/AndroidRuntime(2345):     at java.lang.reflect.Method.invokeNative(Native Method)
12-18 05:55:15.817: E/AndroidRuntime(2345):     at java.lang.reflect.Method.invoke(Method.java:511)
12-18 05:55:15.817: E/AndroidRuntime(2345):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-18 05:55:15.817: E/AndroidRuntime(2345):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-18 05:55:15.817: E/AndroidRuntime(2345):     at dalvik.system.NativeStart.main(Native Method)
12-18 05:55:57.476: E/Trace(2564): error opening trace file: No such file or directory (2)
12-18 05:55:57.546: D/AndroidRuntime(2564): Shutting down VM 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:45:38.700

似乎您正试图`Dialog`在您调用`finish()`当前`Activity`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:54:03.160

您`CountDownTimer`尝试在其生命周期结束`AlertDialog`后显示`Activity`。也许你在打电话`finish()`，但不是`cancel()`任务。

您可以添加一个由计时器检查的变量，如果它仍应显示如下示例中的对话框

```
public class TimerActivity extends Activity {

    private boolean mDialogEnabled;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // add timer start to some button
        findViewById(R.id.button1).setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                new CountDownTimer(5000, 1000) {
                    @Override
                    public void onTick(long millisUntilFinished) {
                        // something
                    }

                    @Override
                    public void onFinish() {
                        if (mDialogEnabled) // <<< check
                            new AlertDialog.Builder(TimerActivity.this)
                                .show();
                    }
                }.start();
            }
        });
    }

    // enable/disable showing the dialog in start / stop for example

    @Override
    protected void onStart() {
        super.onStart();
        mDialogEnabled = true;
    }

    @Override
    protected void onStop() {
        super.onStop();
        mDialogEnabled = false;
    }
} 
```

或者您可以使用更复杂的实现，该实现应该保留计时器任务并将其重新附加到下一个活动实例，如下例所示。例如，通过这种方式，可以在旋转时重新创建 Activity，并且仍然使用在旧 Activity 实例中启动的计时器。

```
public class TimerActivity extends Activity {

    static class MyCountDownTimer extends CountDownTimer {
        private Context mContext;
        public MyCountDownTimer(long millisInFuture, long countDownInterval) {
            super(millisInFuture, countDownInterval);
        }

        public void setContext(Context context) {
            mContext = context;
        }

        @Override
        public void onFinish() {
            if (mContext != null) {
                new AlertDialog.Builder(mContext)
                    .setMessage("Finished!")
                    .show();
            }
        }
        @Override
        public void onTick(long millisUntilFinished) {
            if (mContext != null) {
                // do something
            }
        }
    }

    MyCountDownTimer mTimer;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // restore timer to current Activity
        mTimer = (MyCountDownTimer) getLastNonConfigurationInstance();

        // add timer start to some button
        findViewById(R.id.button1).setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // cancel old timers
                if (mTimer != null) {
                    mTimer.cancel();
                }
                mTimer = new MyCountDownTimer(5000, 1000);
                mTimer.start();
            }
        });

    }

    @Override
    public Object onRetainNonConfigurationInstance() {
        // save timer and detach from Activity
        if (mTimer != null) {
            mTimer.setContext(null);
        }
        return mTimer;
    }

    @Override
    protected void onStart() {
        super.onStart();
        // Activity going to be visible now, attach timer
        if (mTimer != null)
            mTimer.setContext(this);
    }

    @Override
    protected void onStop() {
        super.onStop();
        // Activity going to be invisible, detach timer
        if (mTimer != null) {
            mTimer.setContext(null);
            // if activity is not to be recreated cancel it
            if (isFinishing()) {
                mTimer.cancel();
                mTimer = null;
            }
        }
    }
} 
```

所有代码都未经测试，但大致是它应该如何工作。

# javascript - Javascript 函数在 IE 中不起作用

> ID：13914381
> 
> 赞同：-4
> 
> 时间：2012-12-17T12:41:24.940
> 
> 标签：javascript, html

这在 Chrome 中有效，但在 IE 中无效。

HTML：

```
<img class="ortaresim" name="img1" src="Images/resim.png" alt="gezi" width="460" height="308" />

<a href="#" onMouseover="change_img()" onMouseout="change_back()"></a> 
```

JavaScript：

```
function change_img() { document.images.img1.src = "Images/yemek.jpg"; }

function change_back() { document.images.img1.src = "Images/resim.png"; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:03:00.300

你的问题我不清楚。如果你的代码想改变图像焦点在图像上，那么它应该适用于此。

```
<html>
    <script type="text/javascript">

        function change_img() {
            document.images.img1.src = "image1.jpg"; 
        }

        function change_back() { 
            document.images.img1.src = "image2.jpg"; 
        }

    </script>
    <img 
        name="img1"
        src="image2.jpg" 
        alt="gezi" 
        onMouseout="change_back()"  
        onMouseover="change_img()" />
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T12:50:34.637

给图像一个**ID**属性，如下所示：

```
<img id="img1" class="ortaresim" name="img1" src="Images/resim.png" alt="gezi" width="460" height="308" /> 
```

并像这样更改您的事件处理程序：

```
function change_img() { document.getElementById("img1").src = "Images/yemek.jpg"; }

function change_back() { document.getElementById("img1").src = "Images/resim.png"; } 
```

# wpf - WPF DataGrid AlternatingRowBackground 和 RowStyle 优先级

> ID：13914382
> 
> 赞同：10
> 
> 时间：2012-12-17T12:41:30.763
> 
> 标签：wpf, wpfdatagrid

我如何让我`RowStyle`的申请之后`AlternatingRowBackground`？我想要项目，无论交替行背景如何，`IsOrange`都`true`必须有`Orange`背景，目前情况并非如此。

**XAML：**

```
<DataGrid Name="g"
    AlternatingRowBackground="Blue" 
    AlternationCount="2" 
    ...
    SelectionMode="Single">
    <DataGrid.RowStyle>
        <Style TargetType="DataGridRow">
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsOrange}" Value="Y">
                    <Setter Property="Background" Value="Orange" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </DataGrid.RowStyle>
    ...
</DataGrid> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-17T14:43:21.113

这不是一个错误。在 a`Style`中，您不能覆盖为交替行设置的本地值。这就是为什么这不起作用

```
<DataGrid AlternatingRowBackground="Blue" 
```

但是如果你设置`AlternatingRowBackground`一个`Style`你可以

```
<DataGrid.Style>
    <Style TargetType="DataGrid">
        <Setter Property="AlternatingRowBackground" Value="Blue"/>
    </Style>
</DataGrid.Style> 
```

感谢[这个答案](https://stackoverflow.com/a/12032637/620360)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T15:28:03.390

在我的程序中，除了仅包含一个 DataGird 的主窗口外，我还有两个类。让我们从第一堂课开始：

MyClass.cs：

```
public class MyClass
{
    public bool IsOrange { get; set; }

    public string Name { get; set; }
} 
```

我只有两个属性，`IsOrange`指定行是否应该是橙色的。（（（不要关心其他财产。））

现在视图模型类只包含 MyClass 的集合。

MyClassViewModel.cs：

```
public class MyClassViewModel
{
    public ObservableCollection<MyClass> con { get; set; }

    public MyClassViewModel()
    {
        con = new ObservableCollection<MyClass>();

        con.Add(new MyClass { IsOrange = true, Name = "Aa" });
        con.Add(new MyClass { IsOrange = true, Name = "Bb" });
        con.Add(new MyClass { IsOrange = false, Name = "Cc" });
        con.Add(new MyClass { IsOrange = false, Name = "Dd" });
        con.Add(new MyClass { IsOrange = false, Name = "Ee" });
        con.Add(new MyClass { IsOrange = true, Name = "Ff" });
        con.Add(new MyClass { IsOrange = true, Name = "Gg" });
        con.Add(new MyClass { IsOrange = false, Name = "Hh" });
    }
} 
```

在 MainWindow.xaml 中：

```
<Grid>
    <DataGrid Margin="10" ItemsSource="{Binding Path=con}" >
        <DataGrid.RowStyle>
            <Style TargetType="DataGridRow">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=IsOrange}" Value="true">
                        <Setter Property="Background" Value="Orange" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </DataGrid.RowStyle>
    </DataGrid>
</Grid> 
```

最后在 MainWindow.xaml.cs 中：

```
public partial class MainWindow : Window
{
    MyClassViewModel VM = new MyClassViewModel();

    public MainWindow()
    {
        InitializeComponent();

        DataContext = VM;
    }
} 
```

这是结果：

![在此处输入图像描述](../Images/fc080510bbb00b7159a8eff8010c45b2.png)

您可以将您的电子邮件发送给我以向您发送应用程序。

祝你好运 ：）

# jquery - 为什么此方法不附加到附加的列表项？

> ID：13914383
> 
> 赞同：0
> 
> 时间：2012-12-17T12:41:36.993
> 
> 标签：jquery, jquery-mobile, appendto

我正在使用插件从列表中滑动删除行：

```
 $('#swipeMe li').swipeDelete();

        $('#swipeMe li').on('click', function(){
            $(this).trigger('swiperight')
        }); 
```

当我用 html 编写 swipeDelete 功能时，它可以正常工作：

```
<h2>Assets </h2>
<div id="Assets">
        <ul id="swipeMe">
            <li ><a href="#">This doesn't works</a></li>
            <li data-swipeurl="#"><a href="#">This works<</a></li>
            <li data-swipeurl="#"><a href="#">This works<</a></li>
            <li data-swipeurl="#"><a href="#">This works<</a></li>
            <li data-swipeurl="#"><a href="#">This works<</a></li>
            <li data-swipeurl="#"><a href="#">This works<</a></li>
            <li data-swipeurl="#"><a href="#">This works<</a></li>                
            <li >This doesn't</li>      
        </ul>
</div> 
```

但它不在我附加的新列表项上：

```
$('.submitAsset').click(function(){
var asset = $('#asset_number').val();
$('<li data-swipeurl="#"><a href="#">' + asset + '</a></li>')
    .appendTo('#Assets #swipeMe').swipeDelete();
$('#assetForm').slideUp();    
}); 
```

请帮忙 ：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:59:29.340

```
$('<li data-swipeurl="#"><a href="#">' + asset + '</a></li>')
    .appendTo('#Assets #swipeMe').swipeDelete().on('click', function(){
            $(this).trigger('swiperight')
        }); 
```

如果 swipeDelete() 方法支持链接，这将起作用。

试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:54:27.043

您在附加代码中的调用`swipeDelete()`应该没问题。我唯一能看到的错误是您还需要附加点击事件处理程序。通过更改它的分配方式，您可以使其附加到稍后通过代码添加的元素......

```
 $('#swipeMe').on('click', 'li', function(){
        $(this).trigger('swiperight')
    }); 
```

这会将点击处理程序分配给`li`具有 id 的元素中的所有元素`#swipeMe`，无论它们在代码运行时是否存在。

# java - 如何检测 zip/压缩文件是否完全解压缩/未压缩？

> ID：13914390
> 
> 赞同：0
> 
> 时间：2012-12-17T12:42:11.657
> 
> 标签：java, file-io, zipfile, file-locking

我有一个 java 程序以编程方式将一个文件夹（以及其中的所有文件）从一个位置复制到另一个位置。现在假设用户在这个文件夹中粘贴了一个 zip 文件，然后解压缩它。同时我的程序启动时，它只复制文件它在文件夹中解压缩。我想等到文件解压缩完成。

因此，我正在寻找一种编程方式，使用该方式我可以检测到 zip 文件已完全解压缩，然后只能通过正常复制文件来恢复。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:47:11.463

看看你是否可以重命名正在解压的文件。如果它不是“可重命名的”，则该文件可能已被锁定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:49:31.697

没有可靠的方法可以做到这一点，因为您无法控制解压缩器；例如，用户可以决定只解压缩一些文件。由于解压缩器不会告诉您用户在 UI 中选择了什么，因此没有可靠的方法可以知道“所有”文件何时被解压。

解决方法：

1.  用户必须将文件解压缩到不同的文件夹中，然后*将*文件移动到您观看的文件夹中。同一磁盘上的移动操作是原子的，因此这将确保您只获得完整的文件。

2.  接受 ZIP 存档作为输入并自己解压缩。这样，您就可以完全控制解压过程，并确保您只处理完整的文件。此外，由于 ZIP“目录”位于 ZIP 存档的末尾，这也将确保您只处理完整的 ZIP 存档。

# php - Woo Commerce 添加到购物车未显示在可变产品上

> ID：13914393
> 
> 赞同：2
> 
> 时间：2012-12-17T12:42:16.900
> 
> 标签：php, wordpress, shopping-cart, product, woocommerce

我正在使用 Woo-commerce 进行在线购物。

我创建了一些可变产品，但是当我要查看产品的整页时，它说

> 添加到购物车是隐藏的

我尝试`display: block`在 CSS 中使用强制显示“添加到购物车”按钮，但是当我点击它时，它给了我错误

> 请选择产品选项

开发者控制台也没有错误

谁能知道到底发生了什么或者我错了还是脚本问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-28T03:14:29.597

对于发现此内容的任何其他人，该`wc-add-to-cart-variation`脚本由 WooCommerce 在页脚中加载。因此，如果它没有加载您的主题 1\. 没有`wp_footer()`（这很少见，因为即使是垃圾主题也应该有这个）或 2\. 主题模板中存在 PHP 错误并且页面未完全加载。

我建议检查后一点。您可以查看页面的源代码。在 Chrome 中，只需键入 CTRL+U。

一直滚动到底部。您应该看到的最后一件事是：

`</html>`

如果你没有看到这个页面没有完全加载，很可能是一个致命的 PHP 错误。

[`WP_DEBUG`](http://codex.wordpress.org/WP_DEBUG)您可以通过在`wp-config.php`文件中启用来找出确切的位置。

如果有的话，我猜你的主题有一些相对于当前 WooCommerce 已经过时的 WooCommerce 模板。这篇文章很旧，但是随着 WooCommerce 不断发展，主题保留了他们甚至不修改的打包模板，这种情况一直在发生。

此问题可能是由过时的`single-product/add-to-cart/variable.php`模板引起的。但是，如果重命名不能解决问题，在紧要关头，您始终可以通过将主题中的 WooCommerce 文件夹重命名为其他任何内容来禁用主题的整个 WooCommerce 模板。99% 的时间它会被称为 woocommerce，但它可能是别的东西。

WooCommerce 现在会让您知道哪些模板已过期。此信息可以在 WooCommerce> 系统设置下的管理员中找到。

另一个不错的读物是：http: [//develop.woothemes.com/woocommerce/2014/02/solving-common-issues-after-updating-to-woocommerce-2-1/](http://develop.woothemes.com/woocommerce/2014/02/solving-common-issues-after-updating-to-woocommerce-2-1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:31:00.003

你为你的产品定价了吗？如果没有，添加到购物车按钮将保持隐藏状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T05:08:30.997

```
add_action('wp_head','add_to_cart_script');
function add_to_cart_script(){
  if(is_product()){
    wp_enqueue_script('wc-add-to-cart-variation');
  }
} 
```

有 Jquery 问题 add-to-cart-variation.js 不包括在内。

现在它对我来说工作正常......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-14T21:48:53.130

我设法显示“添加到购物车”按钮，如下所示：

1.  在您的主题目录中找到可变产品模板文件：

    `templates/single-product/add-to-cart/variable.php`

2.  将此代码添加到该文件的末尾：

    ```
    <script>
    $(window).load(function(){
        $(".single_variation_wrap").show();
        $(".single_add_to_cart_button").click(function(){
            if($("#pa_size").val() == ''){
                alert('Please select size');
                return false;
            }
        });
    }); 
    ```

这是我用的。也许您还有其他字段和/或类/ID。随便玩玩，希望对你有用。

# iphone - 在 UIslider 轨道上获取事件

> ID：13914394
> 
> 赞同：3
> 
> 时间：2012-12-17T12:42:24.843
> 
> 标签：iphone, objective-c, ios, ipad, uislider

如何在 UISlider 轨道上获取事件？我能够在 UISlider 的按钮上获得事件，但不在轨道上。我应该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T13:01:00.657

为此，您需要子类化`UISlider`并实现 touches 事件，例如：touchesBegan、touchesEnd、touchesCancelled、touchesMoved 等。

```
@interface yourSlider:UISlider
@end

@implementation yourSlider
  - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
    {
    }

  - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
    {
    }

  - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
    {
    }

  - (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
    {
    }
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:00:41.307

子类化`UISlider`并覆盖其`touchesBegan:withEvent:`方法。从触摸事件中获取点值并通过点的 .x 值相对于滑块的宽度计算它的百分比。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T11:25:37.713

答案是正确的，但这里有一个解决方法，您可以简单地在滑块上​​添加一个等于滑块坐标的清除按钮并检测其上的触摸点，然后将 X 位置转换为滑块值。

```
 - (IBAction)buttonPressed:(id)sender forEvent:(UIEvent*)event
     {
       UIView *button = (UIView *)sender;
       UITouch *touch = [[event touchesForView:button] anyObject];
       CGPoint location = [touch locationInView:button];
       NSLog(@"Location in button: %f, %f", location.x, location.y); \\ use this x to determine slider's value

      } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T13:53:52.200

另一种解决方法：

```
 UITapGestureRecognizer *gr = [[UITapGestureRecognizer alloc] initWithTarget:self             action:@selector(sliderTapped:)];
gr.delegate=self;
[Slider addGestureRecognizer:gr];

-(void)sliderTapped:(UIGestureRecognizer*)g{
UISlider* s = (UISlider*)g.view;
if (s.highlighted)
    return; 
CGPoint pt = [g locationInView: s];
CGFloat value = s.minimumValue + pt.x / s.bounds.size.width * (s.maximumValue - s.minimumValue);
[s setValue:value animated:YES];
} 
```

# php - 在php中获取会话属性

> ID：13914398
> 
> 赞同：-1
> 
> 时间：2012-12-17T12:42:50.477
> 
> 标签：php, session, attributes

您好我在jsp中开发了一个小菜单栏，它收集会话的属性并根据它显示菜单。

```
<li><%
        String myname =  (String)session.getAttribute("name");           
        if(myname!=null && !myname.equals("admin"))                {

             %>
             <a href="logout.jsp" ><span>Logout</span></a></li>
             <li><span>Welcome <%=myname%></span></li>
             <%
            }
        else if(myname!=null && myname.equals("admin"))
            {

             %>
             <a href="logout.jsp" ><span>Logout</span></a></li>
             <li><span>Welcome Admin</span></li> 
```

我想在 php 中使用相同的代码。我尝试过但徒劳无功，因为我是 php 的新手。所以我的问题是如何在 php 中获取会话属性作为名称和密码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:45:38.360

```
you can use $_SESSION['name'] to retrieve session values in php

<?php
session_start();
$name =  $_SESSION['name'];
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:46:40.950

要在 PHP 中获取会话，您需要先启动它们

例如

```
session_start(); 
```

要存储会话变量，您需要创建一个新的 $_SESSION 变量。例子：

```
$_SESSION['username'] = 'Demo';
$_SESSION['password'] = "demo123"; 
```

要获取存储的会话，请使用：

```
echo $_SESSION['username']; 
```

这都是非常基本的 PHP。我建议你查一些教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T12:47:06.537

在 PHP Session 中使用如下，

```
session_start();
echo $_SESSION['name'];
echo $_SESSION['password']; 
```

尝试 print_r 获取所有会话值，

```
print_r($_SESSION); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T12:49:52.960

这是您转换为 PHP 的代码：

```
<li>
<?php
$myname = $_SESSION["name"];
if($myname != null && $myname != "admin") {
?>
<a href="logout.php" ><span>Logout</span></a></li>
<li><span>Welcome <?php echo $myname; ?></span></li>
<?php
} elseif($myname != null && $myname == "admin") {
?>
<a href="logout.php" ><span>Logout</span></a></li>
<li><span>Welcome Admin</span></li> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T12:50:19.167

您需要使用 $_SESSION 超全局访问会话。你可以调用 session_start(); 如果尚未开始，则在此之前开始会话。

```
<?php $myname =  $_SESSION['name'];           
if (!empty($myname) && $myname != 'admin'): ?>
    <a href="logout.jsp" ><span>Logout</span></a></li>
    <li><span>Welcome <?php echo $myname; ?></span></li>
<?php else if (!empty($myname) && $myname == 'admin'): ?>
    <a href="logout.jsp" ><span>Logout</span></a></li>
    <li><span>Welcome Admin</span></li>
<?php endif; ?> 
```

# c# - 在 C# 中禁用键盘/鼠标

> ID：13914404
> 
> 赞同：1
> 
> 时间：2012-12-17T12:43:14.053
> 
> 标签：c#, .net

我需要在我的应用程序的系统级别禁用键盘/鼠标或两者的特定时间段。

我有以下做到这一点

```
 public partial class NativeMethods
    {
        /// Return Type: BOOL->int
        ///fBlockIt: BOOL->int
        [System.Runtime.InteropServices.DllImportAttribute("user32.dll", EntryPoint = "BlockInput")]
        [return: System.Runtime.InteropServices.MarshalAsAttribute(System.Runtime.InteropServices.UnmanagedType.Bool)]
        public static extern bool BlockInput([System.Runtime.InteropServices.MarshalAsAttribute(System.Runtime.InteropServices.UnmanagedType.Bool)] bool fBlockIt);

    } 
```

通过此代码，任务已完成，但是当用户单击 CTRL+ALT+DELETE 时，键盘和鼠标再次工作。任何机构都可以告诉我如何阻止这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:15:36.053

Windows 级别的快捷方式和宏（`CTRL`+ `ALT`+ `DEL`、`WINDOWS`+ `L`、`ALT`+ `TAB`、`CTRL`+ `SHIFT`+ `ESC`）是您的应用程序不处理的消息，它们由 Windows 运行时处理。您可以通过创建一个简单的表单并覆盖该`WndProc`方法并检查这些消息来检查这一点。
无论如何，这里有一些关于如何连接键盘的教程：

*   http://www.codeproject.com/Articles/19004/A-Simple-C-Global-Low-Level-Keyboard-Hook
*   http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C
*   http://blogs.msdn.com/b/toub/archive/2006/05/03/589423.aspx

# javascript - Jquery click（）函数不起作用

> ID：13914406
> 
> 赞同：0
> 
> 时间：2012-12-17T12:43:31.957
> 
> 标签：javascript, jquery

我有 2 个这样的锚标签

```
<a href="#" id="1">1</a>
<a href="#" id="2" style="display:none;">2</a> 
```

和这样的 Jquery 函数

> $(文档).ready(函数(){
> 
> > ```
> >  $('#1').click(function(){
> >       //code to show div 1
> >       //code to hide div 2 
> > ```
> 
> ```
>  });
> 
>    $('#2').click(function(){
>        //code to show div 2
>        //code to hide div 1
>    }); 
> ```
> 
> });

问题是当我单击“2”锚标记时，会显示第二个 div 标记，然后当我想通过单击“1”锚标记再次显示 div 1 时，它不起作用。就像运行第二个函数后第一个函数不存在一样！

* * *

用答案更新问题：我将选择器更改为喜欢 ques-1、ques-2 并且如果有两个具有相同名称的选择器 jquery 只调用第一个选择器，所以最好给选择器不同的名称，即使其中一个将在一次

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:57:58.650

如果您在单击锚点 2 时隐藏锚点 1，那么您将无法单击锚点 1，因为它不可见。如果您想让锚元素占据的区域保持可点击状态，那么您必须为不透明度设置动画。

```
$('#1').click(function(){
    $("#1").animate({ "opacity": "1"}, 1000);
    $("#2").animate({ "opacity": "0"}, 1000);

});

$('#2').click(function(){
    $("#1").animate({ "opacity": "0"}, 1000);
    $("#2").animate({ "opacity": "1"}, 1000);
}); 
```

看看这个[**小提琴**](http://jsfiddle.net/bruno/4UmNK/)

# windows-7 - 在 Win7 Embedded 上禁用 EWF 保护

> ID：13914409
> 
> 赞同：1
> 
> 时间：2012-12-17T12:43:52.163
> 
> 标签：windows-7, embedded

我在运行 Microsoft Windows Embedded Standard 7 的 HP 瘦客户端上使用以下命令来提交数据并禁用 EWF 而无需重新启动：

```
ewfmgr c: -commitanddisable -live 
```

我使用的是 RAM 覆盖模式，根据 MSDN 网站上的 msdn 文档，支持该命令。

以管理员权限调用命令时，我只能看到`***Committing data and disabling overlay`这样......它只是卡在这一点上。ewfmgr.exe 进程一直有 50% 的 CPU 使用率，我无法杀死它。唯一的解决方案是重新启动。

有没有人遇到过这个问题？有没有其他方法可以在不先重新启动的情况下禁用 EWF？

谢谢。

# matlab - 重新标记矩阵，用 1..N 替换所有唯一数字

> ID：13914414
> 
> 赞同：3
> 
> 时间：2012-12-17T12:44:19.077
> 
> 标签：matlab, image-processing, image-segmentation

我正在使用 MATLAB。我有一个矩阵，其中的`N`元素填充了数字`[1; N]`，但它们之间只有`K`唯一的数字（`K`远小于`N`）。重新标记矩阵以使其仅包含数字的*有效*`[1; K]`方法是什么？相等的数应该变成相等，不相等的应该变成不相等。

`N = 10`,的示例`K = 4`：

```
[1 4 8 9 4 1 8 9 4 1] -> [1 2 3 4 2 1 3 4 2 1] 
```

*   N ~ 1 000 000
*   K ~ 10 000

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T12:54:21.380

使用的第三个输出参数`unique`：

```
a=[1 4 8 9 4 1 8 9 4 1];
[~, ~, b] = unique(a)
b =
     1     2     3     4     2     1     3     4     2     1 
```

# java - .NET客户端构造的SOAP有有效对象，Java客户端SOAP有空对象

> ID：13914416
> 
> 赞同：2
> 
> 时间：2012-12-17T12:44:29.463
> 
> 标签：java, .net, soap

我在与 .NET Web 服务通信的 Java 客户端下构建的 SOAP 遇到问题。我还有一个用于测试目的的 .NET 客户端，使用这个客户端我没有任何问题。

你能帮我找出可能是什么问题吗？

肥皂 JAVA

```
<?xml version='1.0' encoding='UTF-8'?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
<soapenv:Body>
<ns2:exportReferentiel xmlns:ns2="http://www.svad.actoll.com/Svad2BPass/V1.0">
<exportData>
<produit idRechargement="202" libelle="Ticket 10 x 1h individuel" LibelleIhm="Ticket 10x1h ind" ordreTri="10" descriptionLongue="Ticket 10 x 1h individuel" dateDebut="1999-01-01T00:00:00.000+01:00" dateFin="2099-01-01T00:00:00.000+01:00">
    <tarif libelle="202">
    <validiteTarif dateDebut="1999-01-01T00:00:00.000+01:00" dateFin="2099-01-01T00:00:00.000+01:00" valeur="1070" />
    <validiteTarif dateDebut="1999-01-01T00:00:00.000+01:00" dateFin="2099-01-01T00:00:00.000+01:00" valeur="1070" />
    </tarif>
    </produit>
... 
```

上面的 SOAP 有一个 Null 对象

.NET SOAP

```
<?xml version='1.0' encoding='UTF-8'?>
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <exportReferentiel xmlns="http://www.svad.actoll.com/Svad2BPass/V1.0">
      <exportData>
        <produit idRechargement="998" libelle="Teste" LibelleIhm="Teste" ordreTri="98" descriptionLongue="batatinhas" dateDebut="2010-05-10T00:00:00" dateFin="2012-12-31T00:00:00" xmlns="">
          <tarif libelle="998">
            <validiteTarif dateDebut="2010-05-10T00:00:00" dateFin="2012-12-31T00:00:00" valeur="300" />
            <validiteTarif dateDebut="2012-12-31T23:59:59.999" dateFin="2013-12-31T00:00:00" valeur="600" />
          </tarif>
        </produit>
... 
```

网络服务.NET

```
[WebService(Namespace = "http://www.svad.actoll.com/Svad2BPass/V1.0")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[ToolboxItem(false)]
public class Service : System.Web.Services.WebService, ISvad2BPass
{
    private static bool Debug = false;
[WebMethod]
    [SoapDocumentMethod("http://www.svad.actoll.com/Svad2BPass/V1.0/exportReferentiel")]
    public ExportPassTransBPassStatusType exportReferentiel(ExportPassTransBPassType exportData)
    {
        Debug = bool.Parse(ConfigurationManager.AppSettings["Debug"]);

        Logger.Instance.Log(LogTypeCode.DEBUG, exportData.ToString());

        exportReferentielRequest req = new exportReferentielRequest(exportData);
        return LoadExportPassTransBPass(req);
    } 
```

使用 Java SOAP 的 exportData 变为空，而使用 .NET SOAP 它对所有数据都正常...

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:35:02.637

我昨天也遇到了类似的问题。最后发现合约接口中的参数名和客户端传过来的不符。但是查看您的请求，我看不到 Java 客户端和 .net 客户端之间的任何名称差异。

你的界面是什么样的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:21:13.733

我通过将 ns2 添加到 exportData 标记来解决这个问题。所以这个 SOAP 的正确构造是：

```
<ns2:exportReferentiel xmlns:ns2="http://www.svad.actoll.com/Svad2BPass/V1.0">
<ns2:exportData>
 <produit idRechargement="202" libelle="Ticket 10 x 1h individuel" LibelleIhm="Ticket 10x1h ind" ordreTri="10" descriptionLongue="Ticket 10 x 1h individuel" dateDebut="1999-01-01T00:00:00.000+01:00" dateFin="2099-01-01T00:00:00.000+01:00">
  <tarif libelle="202">
   <validiteTarif dateDebut="1999-01-01T00:00:00.000+01:00" dateFin="2099-01-01T00:00:00.000+01:00" valeur="1070" />
   <validiteTarif dateDebut="1999-01-01T00:00:00.000+01:00" dateFin="2099-01-01T00:00:00.000+01:00" valeur="1070" />
  </tarif>
 </produit>
...
</ns2:exportData>
... 
```

# database - 如何从 Visual Studio 2010 中的实体数据模型生成并连接到数据库？

> ID：13914420
> 
> 赞同：0
> 
> 时间：2012-12-17T12:44:32.823
> 
> 标签：database, model

我在这里阅读了一些相应的问题，但似乎没有一个能解决我的问题。

我有一个**.edmx**文件。我想从这个模型生成一个数据库，所以我执行以下操作：

右键单击实体数据模型，然后从模型生成数据库。生成数据库向导出现并询问将生成的**.sql**文件保存在何处。我只能点击完成。

现在我有一个 sql 文件。我运行脚本 - 仍在 Visual Studio 中 - 它说一切正常，行受到影响等。

所以我想我现在有一个数据库。（虽然我不知道 .mdf 文件的路径，也无法查看表格是否已正确生成，但这不是重点。）

Visual Studio 说我已连接，但我在服务器资源管理器中看不到此数据库。

于是我运行程序，出现异常：EntityExcpetion is unhandled。基础提供程序未能打开。

这有什么故事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:50:13.333

在您的`.edmx`设计窗口中，单击实体外部的任意位置，然后查看属性窗口（`F4`是否不可见）。在属性窗口中，查看连接字符串值，并确定它是否有效。您还可以查看它的连接位置，从而确认表已正确生成。

连接字符串也保存在`App.Config`文件中。

您似乎已使用 Visual Studio 登录到数据库，但登录名中的所有详细信息不正确，`App.Config`或者两个登录名之间存在权限问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:50:48.013

在 Visual Studio 中运行查询时，它是否要求您连接到 SQL Server？如果是这样，您要连接的服务器是什么？我在想您是在与项目连接字符串中的服务器不同的服务器中创建数据库。

# html - Node.js 是否嵌入在 html 标记中？

> ID：13914422
> 
> 赞同：-1
> 
> 时间：2012-12-17T12:45:03.803
> 
> 标签：html, node.js, jquery

我有一个关于 Node.js 的查询，我知道这是一种构建可扩展网络程序的简单方法。它还说它在服务器端运行。所以我试图完成一些 jquery 或 javascript 不能做的事情。即，将内容嵌入到 html 标记中。

例如：

```
<html>
<body>
<div class="content"> I need the node.js code to embed this content here. </div>
</body>
</html> 
```

不仅在我们的浏览器中。但是对于爬虫和机器人。我使用[http://web-sniffer.net/](http://web-sniffer.net/)检查网站[http://nodecellar.coenraets.org/#wines](http://nodecellar.coenraets.org/#wines)使用 node.js 开发机器人和爬虫不会读取动态内容。node.js 中有解决方案吗？

这在 Node.js 中可行吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:57:07.980

节点包管理器注册表中列出了[许多模板库。](https://npmjs.org/browse/keyword/template)他们中的大多数应该能够解决这个问题。

请注意，Node 是*服务器端*技术，不在浏览器中运行，也不在网页内部运行（但可以输出 HTTP 资源，包括 HTML 文档）。任何服务器技术都可以完成这项任务。

> `http://nodecellar.coenraets.org/#wines`它是使用 node.js 开发的。机器人和爬虫不会读取动态内容。

Node 可能会或可能不会在页面上使用（不可能从客户端可靠地分辨出来），但它确实会生成所有真实的客户端内容。您需要遵循[渐进式增强](http://en.wikipedia.org/wiki/Progressive_enhancement)和非[侵入式 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)的原则来解决该问题。

# javascript - 通过 Websockets 将文件上传到 Play Framework 2.0

> ID：13914427
> 
> 赞同：5
> 
> 时间：2012-12-17T12:45:10.950
> 
> 标签：javascript, jquery, playframework-2.0

我正在使用 Play Framework 2.0、Javascript 和 WebSockets。在示例中，我有一个 AKKA 演员，他了解所有 websocket。单个 WebSockets.In 有一个 ListenerCallback 对象，用于处理来自客户端的传入请求。在客户端，我有 Javascript/jquery 将 JSON 序列化的公式数据发送到 websocket。这对于简单的输入非常有效。但现在我想对文件做同样的事情。所以我必须以某种方式将文件数据转换为 JSON 数据（例如 base64）。有谁知道如何正确地做到这一点？我想在 Javascript 中“收集”文件，然后通过 JSON 将其发送到 websocket。我知道base64不是很有效，如果有人有替代方案，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T15:18:56.080

这是可能的，但是您必须使用`WebSocket`和[`FileReader`](https://developer.mozilla.org/en-US/docs/DOM/FileReader)API，它们仅在较新的浏览器上受支持。Javascript 现在有一个`TypedArray`数据类型，可以用来传输字节。例如，给定以下 HTML：

```
​&lt;form>
  <input type="file" id="picture" />
</form>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

您需要观察*文件*输入字段`change`上的事件。在 Javascript 端（jQuery）：

 *```
$("#picture").change(function(){
    var reader = new FileReader;

    reader.onloadend = function (bytes) {
        var ws = new WebSocket("ws://host/path");
        ws.send(bytes);        
    }

    reader.readAsArrayBuffer(this.files[0]);
}​);​ 
```

WebSocket PDU 是最小框架的（只有两个字节的标头），当您使用 时`send()`，浏览器应该注意为二进制传输设置正确的操作码，并且在服务器上您应该能够读取原始字节流。我现在正在查看 Play API 以提供一个最小的工作示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:06:29.507

我不知道通过 WebSockets 上传文件，但通过普通的旧 HTTP 可以使用[`FormData`](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects)和`XMLHttpRequest`对象。看看这篇[文章](https://developer.mozilla.org/en-US/docs/FileGuide/FileUpDown)。*

# java - 当自定义 servlet 运行时，Tomcat 为 WebSocketServlet.createWebSocketInbound() 抛出 AbstractMethodError

> ID：13914428
> 
> 赞同：3
> 
> 时间：2012-12-17T12:45:12.087
> 
> 标签：java, websocket, tomcat7

我从事一个需要创建实时 Web 应用程序的项目。我开发了一个小程序来使用 Apache Tomcat 测试 WebSocket，但它不起作用，而是引发`AbstractMethodError`异常。servlet 编译，Web 应用程序部署良好。

这是servlet的代码。

```
public class TestWebSocket extends WebSocketServlet {

    private static final long serialVersionUID = 1L;

    @Override
    protected boolean verifyOrigin(String origin) {
        System.out.println("Origin: {}" + origin);
        return true;
    }

    @Override
    protected StreamInbound createWebSocketInbound(String subProtocol, HttpServletRequest request) {
        return new WebSocketConnection();
    }

    private static class WebSocketConnection extends MessageInbound {

        @Override
        protected void onOpen(WsOutbound outbound) {
            System.out.println("Conexión abierta");
        }

        @Override
        protected void onClose(int status) {
            System.out.println("Conexión cerrada");
        }

        @Override
        protected void onBinaryMessage(ByteBuffer byteBuffer) throws IOException {
            System.out.println("No se soportan mensajes binarios");
            throw new UnsupportedOperationException("No se soportan mensajes binarios");
        }

        @Override
        protected void onTextMessage(CharBuffer charBuffer) throws IOException {
            final String user = charBuffer.toString();
            System.out.println("Mensaje recibido: {}" + user);
            getWsOutbound().writeTextMessage(CharBuffer.wrap("Hola " + user + " desde WebSocket"));
        }
    }
} 
```

这是部署描述符 -`web.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>TestWebSocket</display-name>
  <servlet>
    <servlet-name>TestWebSocket</servlet-name>
    <servlet-class>com.test.TestWebSocket</servlet-class>
  </servlet> 
  <servlet-mapping>
    <servlet-name>TestWebSocket</servlet-name>
    <url-pattern>/testWebSocket</url-pattern>
  </servlet-mapping>
</web-app> 
```

和客户端代码 - `testSocket.js`：

```
/*
 * For Testing websockets
 */
$(function(){

    console.log("URL :" + 'ws://' + location.host  + '/TestTomcatWebSocket/testWebSocket');
    var ws = new WebSocket('ws://' + location.host  + '/TestTomcatWebSocket/testWebSocket');

    ws.onopen = function() {
        console.log("Websocket Ready!!");
        sendMessage();
    };

    ws.onmessage= function(data) {
        console.log("message received : " + data);
    };

    function sendMessage() { ws.send("Test"); };
}); 
```

执行后，应用程序完成，但出现以下`java.lang.AbstractMethodError`异常：

```
INFO: Server startup in 495 ms
Origin: {}http://localhost:8080
Dec 17, 2012 1:58:51 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [TestWebSocket] in context with path [/TestTomcatWebSocket] threw exception [Servlet execution threw an exception] with root cause
java.lang.AbstractMethodError: org.apache.catalina.websocket.WebSocketServlet.createWebSocketInbound(Ljava/lang/String;)Lorg/apache/catalina/websocket/StreamInbound;
    at org.apache.catalina.websocket.WebSocketServlet.doGet(WebSocketServlet.java:125)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

我使用 Apache Tomcat 7.0.33。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:00:09.993

问题解决了。基本上我使用的是旧版本的eclipse，它根据tomcat的早期配置配置tomcat，以便在其中运行tomcat。因此，当我使用 eclipse 的最新版本 JUNO 时，它使用 tomcats 最新配置对其进行了配置，其中包括 catilina.policy 文件中的 websocket 配置。

// 使用 WebSocket 的应用程序需要能够访问这个包权限`java.lang.RuntimePermission "accessClassInPackage.org.apache.catalina.websocket";`

# jquery - IE7 中的 jQuery“具有属性”选择器失败（用于“自动对焦”）

> ID：13914431
> 
> 赞同：3
> 
> 时间：2012-12-17T12:45:24.487
> 
> 标签：jquery, html, jquery-selectors

我正在尝试使用以下方法为不支持[autofocus](http://www.w3.org/html/wg/drafts/html/master/forms.html#autofocusing-a-form-control%3a-the-autofocus-attribute)属性的浏览器提供支持：

```
<input type="text" autofocus/>
<input type="text" autofocus="autofocus"/>
<input type="text"/>​

<script type="text/javascript">
    $("input[autofocus]").first().focus();
</script> 
```

但是，该选择器会返回 IE7 的所有输入元素，包括那些没有“自动对焦”属性的元素。它适用于 IE8+，我已经使用 jQuery 1.6.4、1.7.2 和 1.8.2 进行了测试。我在这里有一个 jsfiddle：http: [//jsfiddle.net/HSC7K/4/](http://jsfiddle.net/HSC7K/4/)。

这些 jQuery 票似乎相关，但已关闭：

[http://bugs.jquery.com/ticket/5637](http://bugs.jquery.com/ticket/5637)

[http://bugs.jquery.com/ticket/7874](http://bugs.jquery.com/ticket/7874)

**编辑：** 更新 jsfiddle：http: [//jsfiddle.net/HSC7K/6/](http://jsfiddle.net/HSC7K/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-17T17:37:58.580

我在 AJAX 调用后尝试自动对焦时遇到了同样的问题。

```
$("input[autofocus]").first().focus(); 
```

就是行不通。我正在使用 IE 11。我发现如果您删除输入选择器，它就可以工作。所以....

```
$("[autofocus]").first().focus(); 
```

# perl - WMI 使用 Perl 查询 Exchange Server

> ID：13914432
> 
> 赞同：0
> 
> 时间：2012-12-17T12:45:25.300
> 
> 标签：perl, email, wmi, exchange-server

我一直在使用 WMI 从服务器获取信息，并且我得到了很好的结果（虽然像处理器状态、硬盘、登录用户、进程列表等通用）

现在我有一项特定任务来查询 Exchange Server 2010 数据中的一些特定数据，例如您可能从性能监视器和运行状况检查中获得的数据，例如 Active Mailbox Delivery Queue、发送队列大小、接收队列大小、SMTP 当前连接和列表继续下去。

现在我一直在做一些研究，我找到了一些文章，发现这个类应该有我需要的数据：root\MicrosoftExchangeV2 我很难编码这个，我发现了一些 vb 示例我试图在 perl 模块中进行转换，但似乎没有任何效果。任何启动示例都值得赞赏

ps：在交换服务器上，wmi 似乎无法从远程访问（所以我在本地运行）

```
#!/usr/bin/perl

use Win32::OLE('in');
use constant bFlagReturnImmediately => 0x10;
use constant bFlagForwardOnly => 0x20;
#use warnings;

use Win32::OLE::Enum;

my $comp = ".";
my $oWMIService_ = Win32::OLE->GetObject( "winmgmts:impersonationLevel=impersonate}!\\\\$comp\\ROOT\\MicrosoftExchangeV2") or die "problem";
my $colItems_ = $oWMIService_->ExecQuery ( "Select * from Exchange_Link", "WQL",     bFlagReturnImmediately | bFlagForwardOnly);

foreach my $objItem_ (in $colItems_){

print $objItem_->{StateRemote};

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-21T17:50:50.780

在深入研究了微软的文档并监控 wmi 之后，我设法找到了具体的性能计数器，如下所示：

```
ExchangePop3_MSExchangePop3ConnectionsCurrent => 0
TransportQueues_MSExchangeTransportQueuesLargestDeliveryQueueLength => 0
TransportQueues_MSExchangeTransportQueuesRetryMailboxDeliveryQueueLength => 0
IS_MSExchangeISMailboxActiveClientLogons => 193
TransportQueues_MSExchangeTransportQueuesUnreachableQueueLength => 0
TransportSmtpSend_MSExchangeTransportSmtpSendMessagesSentPerSec => 0
TransportSMTPReceive_MSExchangeTransportSMTPReceiveConnectionsTotal => 190
TransportQueues_MSExchangeTransportQueuesMessagesQueuedForDelivery => 0
TransportQueues_MSExchangeTransportQueuesRetryNonSmtpDeliveryQueueLength => 0
Imap4_MSExchangeImap4CurrentConnections => 0
ActiveSync_MSExchangeActiveSyncRequestsPersec => 0
TransportQueues_MSExchangeTransportQueuesActiveMailboxDeliveryQueueLength => 0
TransportQueues_MSExchangeTransportQueuesSubmissionQueueLength => 0
TransportQueues_MSExchangeTransportQueuesActiveRemoteDeliveryQueueLength => 0
TransportSmtpSend_MSExchangeTransportSmtpSendConnectionsTotal => 92
MailSubmission_MSExchangeMailSubmissionFailedSubmissionsPerSecond => 0
MSExchangeISActiveUserCount => 0
TransportQueues_MSExchangeTransportQueuesActiveNonSmtpDeliveryQueueLength => 0
TransportQueues_MSExchangeTransportQueuesRetryRemoteDeliveryQueueLength => 0
TransportQueues_MSExchangeTransportQueuesAggregateDeliveryQueueLengthAllQueues => 0
OWA_MSExchangeOWAAverageResponseTime => 120
ActiveConnectionCount => 101 
```

我希望有人可以得到这些有用的任何监控工具，他们可能正在编写监控任何繁忙的交换服务器

# objective-c - 如何在中心对齐 UISegment 文本

> ID：13914433
> 
> 赞同：0
> 
> 时间：2012-12-17T12:45:26.423
> 
> 标签：objective-c, ios, ios5, uisegmentedcontrol

嗨，有一个应用程序必须显示 UISegmentedControls 但 UISegment 上的文本从向左的段中出来。如何在 UISegmented 控件的中心添加文本？

```
optionControl = [[UISegmentedControl alloc]initWithItems:optionNameArr];                                
[optionControl setFrame:CGRectMake(ReportingPanelScrollView.frame.size.width/2.8+80, y_Val +x_Dis, 100, 30)];
UIFont *font = [UIFont systemFontOfSize:12.0f];
NSDictionary *attributes = [NSDictionary dictionaryWithObjectsAndKeys:font,UITextAttributeFont,[UIColor darkTextColor],UITextAttributeTextColor,nil];
[optionControl setTitleTextAttributes:attributes forState:UIControlStateNormal];
optionControl.segmentedControlStyle = UISegmentedControlStyleBordered;

optionControl.tag = sectionHeader*2000+itemHeader+200;
NSString *tagStr = [NSString stringWithFormat:@"%d",optionControl.tag];
[optionItemControlDict setObject:optionSelectedTextArr forKey:tagStr];
[optionControl addTarget:self action:@selector(OptionControlSelected:) forControlEvents:UIControlEventValueChanged];

[ReportingPanelScrollView addSubview:optionControl];
[optionControl release]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:01:06.653

尝试这个：

```
optionControl.contentHorizontalAlignment=UIControlContentHorizontalAlignmentCenter; 
```

# php - 想要在一个请求中将数据从一个数据库插入到另一个数据库

> ID：13914441
> 
> 赞同：0
> 
> 时间：2012-12-17T12:45:39.947
> 
> 标签：php, mysql, curl

在我的第一个应用程序中，让我们说**“sms”**，一个 php 文件**“sms_transfer.php”从****“SMS 数据库”**中获取一些数据并将 curl 请求发送到另一个应用程序，比如说**“phone”** php 文件**phone_get.php**，它接收该数据并在基于该数据映射了**“电话数据库”**中的一些 id 。

现在我想将该映射的数据和 ID 返回到**“短信应用程序”**并将它们存储在**“短信数据库”**应用程序表之一中。执行此任务的正确方法是什么，如何完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:51:32.600

您可以使用 json_encode 和 json_decode 发送数据。这就是我通常的做法。

# ios6 - iOS 6：UITextField textAlignment 不会改变光标位置

> ID：13914444
> 
> 赞同：3
> 
> 时间：2012-12-17T12:45:44.693
> 
> 标签：ios6, uitextfield, text-alignment

我使用 UITextField 的一个实例，其中文本通常向右对齐，但在编辑时切换到左对齐。这是通过调用事件来完成`setTextAlignment:`的。`editingDidBegin`自 iOS 6 更新以来，这表现得很奇怪：文本对齐方式从右到左正确更改，但光标仍停留在文本字段的最右侧，直到执行某些输入。

有谁知道如何恢复预期的行为，以便在更改对齐方式时光标也移动？

给出一些上下文：我使用文本字段来显示一个带有单位的值。该单元在编辑期间被删除，然后在用户按 Enter 后再次显示。

在事件 editingDidBegin 上调用的方法：

```
- (IBAction)textEditingDidBegin:(UITextField *)sender
{
    [sender setTextAlignment:NSTextAlignmentLeft];
    [sender setText:[NSString stringWithFormat:@"%.0f", width]];
} 
```

在事件 editingDidEnd 上调用的方法：

```
- (IBAction)textEditingDidEnd:(id)sender
{
    [sender setTextAlignment:UITextAlignmentRight];
    [sender setText:[NSString stringWithFormat:@"%.0f m", width]];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-27T08:23:07.777

尝试将 textView 辞去第一响应者，然后立即使其成为第一响应者。

```
textView.textAlignment = NSTextAlignmentCenter;
[textView resignFirstResponder];
[textView becomeFirstResponder]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T14:35:00.320

```
-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
    textField.textAlignment = NSTextAlignmentLeft ;
    return YES ;
} 
```

*在编辑开始之前*更改 textAlignment 。我知道的最好的地方是 UITextFieldDelegate 方法`textFieldShouldBeginEditing`。

# python - Python：如何连接字符串和 Unicode？

> ID：13914447
> 
> 赞同：2
> 
> 时间：2012-12-17T12:45:56.310
> 
> 标签：python, unicode

如何连接字符串和 Unicode 并得到一个字符串？我尝试了以下。但这显然是不正确的。

```
>>> s = 'jklö'
>>> u = u'äpoi'
>>> print s+u 
```

> 回溯（最后一次调用）：文件“”，第 1 行，在 UnicodeDecodeError：'ascii' 编解码器无法解码位置 3 中的字节 0x94：序数不在范围内（128）

```
>>> unicode(s, 'latin-1')+u
u'jkl\x94\xe4poi'
>>> (unicode(s, 'latin1')+u).encode('latin1')
'jkl\x94\xe4poi'
>>> print (unicode(s, 'latin1')+u).encode('latin1')
jklöõpoi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:29:59.453

您正在尝试`s`从 latin-1 解码，但您的终端未使用 latin-1 编码；检查`sys.stdin.encoding`以了解它是什么。

例如，我`cp850`默认有：

```
>>> import sys
>>> sys.stdin.encoding
'cp850'
>>> s = 'jklö'
>>> u = u'äpoi'
>>> s
'jkl\x94'
>>> u
u'\xe4poi'
>>> print unicode(s, 'cp850') + u
jklöäpoi
>>> print (unicode(s, 'cp850') + u).encode('cp850')
jklöäpoi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T12:51:32.007

请阅读此内容并将其放在枕头下。这是非常有价值的文档

[http://farmdev.com/talks/unicode/](http://farmdev.com/talks/unicode/)

[http://docs.python.org/2/howto/unicode.html](http://docs.python.org/2/howto/unicode.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T13:02:36.277

这似乎有效：

```
>>> l = s + u.encode('cp1252')
>>> print l
jklöäpoi
>>> type(l)
<type 'str'> 
```

# python - 替换字符串中不同长度的数字

> ID：13914448
> 
> 赞同：0
> 
> 时间：2012-12-17T12:46:13.363
> 
> 标签：python

我在文件中有这样的字符串：

```
 2381         OH    209    SER     OG   1049    -0.6546         16   ; qtot 1.543 
```

我想用不同的数字替换一些数字（第一个和第六个，“2381”和“1049”），但保持对齐，即根据需要在数字之前添加或删除空格。也就是说，我将替换`2381`为`__24`(`_`是空白) 或`_1049`替换为`37628`.

我可以硬编码每个数字的确切位置，但不同的文件可能会有所不同，我想要更通用的东西。

任何人都可以帮我在 python 中这样做吗？说代码是这样的：

```
# list_a and list_b contain two different mappings between integer numbers
for line in file:
  (a, b) = (int(line.split()[0]), int(line.split()[5]))
  c = list_a[a]
  d = list_b[b]
  # create "modline", as "line" where (a,b) are replaced with (c,d)
  print modline 
```

万一这很重要，映射`list_a`和`list_b`只是数字的出现顺序`a`，`b`。所以，如果输入文件有：

```
 2381         OH    209    SER     OG   1049    -0.6546         16   ; qtot 1.543
  2382         HO    209    SER     HG   1049     0.4275      1.008   ; qtot 1.971
  2379          C    209    SER      C   1048     0.5973      12.01   ; qtot 2.568
  2380          O    209    SER      O   1048    -0.5679         16   ; qtot 2 
```

我希望它变成：

```
 1         OH    209    SER     OG      1    -0.6546         16   ; qtot 1.543
     2         HO    209    SER     HG      1     0.4275      1.008   ; qtot 1.971
     3          C    209    SER      C      2     0.5973      12.01   ; qtot 2.568
     4          O    209    SER      O      2    -0.5679         16   ; qtot 2 
```

因为`2381`出现第1，`2380`出现第4；`1049`出现在第一个（在其列中）等。所以`list_a[2381] = 1`和`list_b[1049] = 1`。

但我想我知道该怎么做，我现在的问题实际上是替换字符串中的数字，同时考虑到可变数量的空格。

我应该补充一点，不能保证每行中的数字都是唯一的，所以我不能简单地依赖正则表达式匹配。我必须替换第一个和第六个数字，而不是“每个（或第一个）实例`2381`”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:59:22.587

回答我自己的问题，我认为这样做：

```
# list_a and list_b contain two different mappings between integer numbers
for line in file:
  words = re.findall("(\s*\S+)", line)
  a = int(words[0])
  b = int(words[5])
  c = list_a[a]
  d = list_b[b]
  modline = str(c).rjust(len(words[0])) + "".join(words[1:5]) + str(d).rjust(len(words[5])) + "".join(words[6:])
  print modline 
```

也就是说，从一开始就忘记简单`split`并使用正则表达式。我几乎可以保证的是，原始字符串中会有足够的空格让替换字符串适合那里（否则我必须更改原始文件中的对齐方式，这是一个不同的野兽）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:48:29.850

类似的东西怎么样：

```
yourstring.replace(' 2381 ','   24 ') 
```

这是我的做法（我认为）：

```
def same_space_replace(s,fld,rep):
    fld = fld.rjust(len(rep))      #could use `.ljust` or `.center` as well.
    rep = rep.rjust(len(fld))
    return s.replace(fld,rep)

for line in file:
    split_line = line.split()
    a = split_line[0]
    rep_a = str(list_a[int(a)])

    b = split_line[1]
    rep_b = str(list_b[int(b)])

    modline = same_space_replace(line,a,rep_a)
    modline = same_space_replace(line,b,rep_b) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T12:58:21.617

动态地做这样的事情：

```
# example with a being 2381 and b being 1049

modeline = line.replace(a, list_a[a].rjust(len(a), ' ')).replace(b, list_b[b].rjust(len(b), ' ') 
```

因此，这将使用与旧数字相同数量的空格来右对齐新数字以保留空白，因此`2381`将转换为`__24`（其中 _ 是空格）

# php - 使用（转义或未转义）点的 htaccess 内部错误

> ID：13914453
> 
> 赞同：1
> 
> 时间：2012-12-17T12:46:29.807
> 
> 标签：php, regex, .htaccess, infinite-loop, optional-parameters

也许我在做一些愚蠢的事情，但我无法摆脱 htaccess 的问题。

我正在尝试匹配文档站点中的函数名称，但遇到了我无法理解的错误。我必须指出我（认为我）知道正则表达式转义，并且我知道点和反斜杠点的含义。

所以：我想允许所有这些：

```
example.com/foofunction
example.com/foofunction.php
example.com/function.foofunction
example.com/function.foofunction.php 
```

这些是我尝试过的线条。那些导致错误的人被误解了，非常感谢任何可以向我解释的人：

`^function\.([A-Za-z0-9_-]+)(\.php)?$`-> 有效，但`function.`强制

`^(function\.)?([A-Za-z0-9_-]+)(\.php)?$`-> 内部错误...好吧，我们不要转义点，最后，它将匹配任何字符并且可以工作...

`^(function.)?([A-Za-z0-9_-]+)(\.php)?$`-> 内部错误！好的，只是为了尝试，点外条件？

`^(function)?\.([A-Za-z0-9_-]+)(\.php)?$`-> 工作，好的，但它使 dot 成为强制性的。顺便说一句，更疯狂的事情：

`^(function)?.([A-Za-z0-9_-]+)(\.php)?$`-> 如果 dot 没有被转义（想象一下我想允许任何字符），也会出现内部错误。现在我将尝试单独使 dot 可选

`^(function)?(\.)?([A-Za-z0-9_-]+)(\.php)?$`-> 内部错误，我快疯了...

这些是我到目前为止的尝试，我将尝试可选的后视并更新结果......无论如何，我很想了解这些正则表达式会导致内部错误。

如果有人知道“htaccess 特殊正则表达式异常”参考或我必须阅读的类似内容，将非常欢迎。

在此先感谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T12:54:28.877

对除实际函数名之外的所有内容使用非捕获组：

```
^(?:function\.)?([A-Za-z0-9_\-]+)(?:\.php)?$ 
```

让我们分解一下：

```
^                   # assert start of string
  (?:function\.)?   # optionally allow the string "function."
  ([A-Za-z0-9_\-]+) # capture the function name - this could be shortened to ([-\w]+)
  (?:\.php)?        # optionally allow the string ".php"
$                   # assert end of string 
```

所以你的 .htaccess 看起来（我猜）是这样的：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(?:function\.)?([A-Za-z0-9_\-]+)(?:\.php)?$ doc.php?functionname=$1 [L,QSA] 
```

* * *

**重要点**和这种情况下的实际解决方案：

您*必须*使用`RewriteCond`和（通常）`[L]`标志的合理组合，以确保规则只匹配一次。

mod_rewrite 的行为方式有点违反直觉，并不总是很明显：它会一遍又一遍地运行规则，直到没有更多的匹配项。所以，假设我使用上面列出的规则：

```
RewriteRule ^(?:function\.)?([A-Za-z0-9_\-]+)(?:\.php)?$ doc.php?functionname=$1 
```

...我向这条规则提供 input `function.myfunc.php`。首先，它将被重写为：

```
doc.php?functionname=myfunc 
```

但是，下次*它会再次匹配*。它将被重写为：

```
doc.php?functionname=doc 
```

...这将不断发生，直到`MaxRedirects`达到，Apache 将抛出一个错误 - 您将在客户端看到 500 响应。

对此的解决方案取决于您的确切用例，但一个常见的解决方案（我上面使用的那个）是在应用重写规则之前检查请求的文件是否存在。通过这样做，在第二次迭代中将不会应用该规则，并且将允许请求通过以进行进一步处理。

该`[L]`标志也经常（过度）使用 - 这会导致重写过程*的当前迭代*停止，并在下一次迭代中重新开始。`continue`它有效地执行与PHP 中的循环相同的操作。

从 Apache 2.3 开始，一个更有用的标志（对于这种情况）可用 - `[END]`。这给出了大多数人期望的行为`[L]`，它会导致重写过程立即停止而不再进行迭代，就像`break`PHP 中的构造一样。使用它意味着上述`RewriteCond`s 不再是必需的。但是，因为这仅在 2.3+ 中可用，所以除非您确定它在您运行的每个环境中都可用，否则无法安全使用它。

# jquery - 将 Json 数据加载到一系列列表和类别中

> ID：13914455
> 
> 赞同：0
> 
> 时间：2012-12-17T12:46:37.593
> 
> 标签：jquery, html, json

我一直在尝试研究如何将一大块 JSON 数据加载到一系列下拉列表中，这些数据的顺序如下：主类别 -> 子类别 -> 链接（a href="url"）等：

![布局示例的图像](../Images/884d219da548f8a3dd31363597f03c14.png)

到目前为止，我有这个：

```
$(function() {
            var data = [
                {
                    name: "Work By Allan Morse",
                    data: [
                        {
                            name: "Residential Work",
                            data: [
                                    { name: "Studio", url: "http://www.flickr.com/photos/91118467@N07/sets/72157632257518934/" },
                                    { name: "Yates House", url: "http://www.flickr.com/photos/91118467@N07/sets/72157632257525780/" },
                                ]
                        },
                        {
                            name: "Sacred Architecture",
                            data: [
                                    { name: "Meditation Room", url: "http://www.flickr.com/photos/91118467@N07/sets/72157632257533152/" },
                                ]
                        }
                    ]
                },
                {
                    name: "Residential under Melling Morse Architects",
                    data: [
                        {
                            name: "Affordable Housing",
                            data: [
                                    { name: "Shelter Housing", url: "http://www.flickr.com/photos/91118467@N07/sets/72157632257505196/" },
                                    { name: "Matariki", url: "http://www.flickr.com/photos/91118467@N07/sets/72157632257493734/" },
                                ]
                        },
                        {
                            name: "Bespoke Houses",
                            data: [
                                    { name: "Samurai House", url: "http://www.flickr.com/photos/91118467@N07/sets/72157632257486504/" },
                                    { name: "Split Box", url: "http://www.flickr.com/photos/91118467@N07/sets/72157632257471554/" },
                                ]
                        }
                    ]
                },
                {
                    name: "Small Commerical under Melling Morse Architects",
                    data: [
                        { name: "Shop and Studio", url: "http://www.flickr.com/photos/91118467@N07/sets/72157632253307953/" },
                        { name: "Church Hall", url: "http://www.flickr.com/photos/91118467@N07/sets/72157632253379065/" },
                        { name: "Bed and Breakfast", url: "http://www.flickr.com/photos/91118467@N07/sets/72157632253732335/" }
                    ]
                }
            ]

        /* Start of the thing that builds the navigation, not sure how to do the next levels */
        $.each(data, function(i, option) {
            category = option.name;
            $('#project_nav').append($('<li class="project_subnav_container"><div class="category">'+ category +'</div><ul class="project_subnav"><div class="sub_category">Residential Work</div><li><a href="">Example Project</a></li><li><a href="">Example Project 2</a></li><div class="sub_category">Sacred Architecture</div><li><a href="">Example Project</a></li></ul></li> '));
        }); 

        }) 
```

我很难理解如何访问第一组名称之外的任何内容。到目前为止，我的前 3 个类别做得很好——艾伦·莫尔斯的作品，梅林下的住宅，梅林下的商业等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:06:40.980

正如我理解的那样，您需要在其中的每个循环中再增加 2 个。像这样的东西：

```
 $.each(data, function(i, option) {
        category = option.name;
        var $navigation = $('<li class="project_subnav_container"><div class="category">'+ category +'</div></li> ').appendTo($('#project_nav'));
        $.each(option.data, function(i, suboption) {
            var subcategory = suboption.name;
            var $subCategory = $("<ul class='project_subnav'><div class='sub_category'>" + subcategory + "</div></ul>").appendTo($navigation);
            $.each(suboption.data, function (i, item) {
                  var itemName = item.name;
                  $("<li><a href='" + item.url + "'>" + itemName + "</a></li>").appendTo($subCategory);
            });
        });
    }); 
```

# php - 使用其余 api 更新 jira 问题。不是肥皂

> ID：13914457
> 
> 赞同：2
> 
> 时间：2012-12-17T12:46:37.830
> 
> 标签：php, rest, curl, jira

我更新 jira 问题的 php 函数是这样的。我已经硬编码了问题 id。它在`if (property_exists($result, 'errors'))`. 说参数不是对象。

```
function post_to($resource, $data) {
$jdata = json_encode($data);
$ch = curl_init();
curl_setopt_array($ch, array(
CURLOPT_POST => 1,
CURLOPT_URL => JIRA_URL . '/rest/api/latest/' . $resource,
CURLOPT_USERPWD => USERNAME . ':' . PASSWORD,
CURLOPT_POSTFIELDS => $jdata,
CURLOPT_HTTPHEADER => array('Content-type: application/json'),
CURLOPT_RETURNTRANSFER => true
));
$result = curl_exec($ch);
curl_close($ch);
return json_decode($result);
}

function create_issue($issue) {
return post_to('issue/10224/editmeta', $issue);
}

$new_issue = array(
    'update' =>array(
        'fields' => array(
            'project' => array('key' => 'DOTNET'),
            'summary' => 'Test via REST',
            'description' => 'Description of issue goes here.',
            'issuetype' => array('name' => 'Task')
            ))
);

$result = create_issue($new_issue);
if (property_exists($result, 'errors')) {
echo "Error(s) creating issue:\n";
var_dump($result);
                }
            } 
```

我在这里做错了什么？请回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:09:04.963

不太确定，让我们尝试一些事情：

改变

```
CURLOPT_HTTPHEADER => array('Content-type: application/json'), 
```

至：

```
CURLOPT_HTTPHEADER => array(
    'Accept: application/json',
    'Content-Type: application/json'
); 
```

和：

```
$new_issue = array(
    'update' =>array(
        'fields' => array(
            'project' => array('key' => 'DOTNET'),
            'summary' => 'Test via REST',
            'description' => 'Description of issue goes here.',
            'issuetype' => array('name' => 'Task')
            ))
); 
```

至：

```
$new_issue = array(
    'fields' => array(
        'project' => array('key' => 'DOTNET'),
        'summary' => 'Test via REST',
        'description' => 'Description of issue goes here.',
        'issuetype' => array('name' => 'Task')
     )
); 
```

最后，改变：

```
CURLOPT_URL => JIRA_URL . '/rest/api/latest/' . $resource, 
```

到您的真实地址，以及写`2`而不是`latest`，即：

```
CURLOPT_URL=>'http://localhost/rest/api/2/issue/', 
```

试试这个，让我知道它是怎么回事，祝你好运！

**编辑**

尝试改变：

```
CURLOPT_POST => 1, 
```

至：

```
CURL_POST=>true,
CURLOPT_VERBOSE=>1, 
```

顺便说一句，你的jira服务器在哪里？你不是说它是托管的吗？`localhost:8080`仅当 Jira 安装在本地时才有效。如果是这样，请尝试使用浏览器打开它 `http://localhost:8084/rest/api/2/issue/`

**编辑 2**

确保`Allow Remote API Calls`在 Administration > General Configuration 下打开。

更新问题：

URL 应指向即将更新的问题，即：

```
http://localhost/rest/api/2/issue/TEST-31 
```

并且数据应该和以前一样，意思是：

```
$new_issue = array(
    'fields' => array(
        'project' => array('key' => 'DOTNET'),
        'summary' => 'Test via REST',
        'description' => 'Description of issue goes here.',
        'issuetype' => array('name' => 'Task')
     )
); 
```

正如您在尝试创建问题时所写的那样。你可以在[这里](https://developer.atlassian.com/display/JIRADEV/JIRA+REST+API+Example+-+Edit+issues)找到一些简单的例子来说明如何做到这一点。

**编辑 3**

你确定你有正确的jira地址吗？再次尝试打开浏览器并转到 URL 并将其与[此示例](https://jira.atlassian.com/rest/api/2/issue/JRA-9)进行比较。如果页面不显示，您将不得不联系[Jira 的支持](https://answers.atlassian.com)并询问他们您为什么无法访问托管的 Jira 远程 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-30T13:28:00.050

***editmeta***应该只用于从问题中获取元数据。

要更新问题，您必须使用***问题***方法。

您可以在此处查看 Jira API 详细信息： [https ://docs.atlassian.com/jira/REST/cloud/#api/2/](https://docs.atlassian.com/jira/REST/cloud/#api/2/)

# php - 将自定义网站部署到客户端托管

> ID：13914460
> 
> 赞同：1
> 
> 时间：2012-12-17T12:46:43.803
> 
> 标签：php, apache, security, deployment, hosting

我开发了一个网站应用程序，其中包括定制的 CMS 和 PayPal 支付等...

我的客户已经通过该网站的开发者托管了他的主要网站。

我希望将新应用程序托管在子域下，例如：

application.website.com

我对将我的完整源代码存储在其他网页设计师服务器上有所保留。

有没有办法让代码保留在我的服务器上，但使用所需的子域或密码保护文件夹？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T01:10:15.273

您也许可以将源代码存储在您的服务器上，并使用 PHP[包含](http://php.net/manual/en/function.include.php)函数来获取您客户网站上的页面以使用您服务器上的代码。我还没有尝试过，所以 PHP 可能无法像这样在两台服务器之间进行通信，但试一试，看看会发生什么。

# android - 如何在使用 SQlite 制作数据库应用程序时组织课程

> ID：13914461
> 
> 赞同：0
> 
> 时间：2012-12-17T12:46:43.617
> 
> 标签：android, sqlite, dao

好吧，另一个帖子，我的意思是：

[数据库中的每个表都应该有一个 SQLiteOpenHelper 吗？](https://stackoverflow.com/questions/13877701/sqliteopenhelper-one-for-each-table-in-database)

我怀疑该应用程序是否有一个或多个助手，嗯，anwser 是 1 个助手，很多列。

现在是第二部分，我实际上正在制作本教程： [http ://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

但我想在数据库中使用超过 1 个表，好的，我已经完成了工作，现在我正在尝试制作所谓的数据访问对象“DAO”。问题是一样的，最好有一个 DAO，或者每个表都有一个（每个表类也有一个）或者最后一个 DAO 类，其中包含我可以在应用... ？

这就是本教程中称为 DAO 的内容：

```
package de.vogella.android.sqlite.first;

import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class CommentsDataSource {

  // Database fields
  private SQLiteDatabase database;
  private MySQLiteHelper dbHelper;
  private String[] allColumns = { MySQLiteHelper.COLUMN_ID,
      MySQLiteHelper.COLUMN_COMMENT };

  public CommentsDataSource(Context context) {
    dbHelper = new MySQLiteHelper(context);
  }

  public void open() throws SQLException {
    database = dbHelper.getWritableDatabase();
  }

  public void close() {
    dbHelper.close();
  }

  public Comment createComment(String comment) {
    ContentValues values = new ContentValues();
    values.put(MySQLiteHelper.COLUMN_COMMENT, comment);
    long insertId = database.insert(MySQLiteHelper.TABLE_COMMENTS, null,
        values);
    Cursor cursor = database.query(MySQLiteHelper.TABLE_COMMENTS,
        allColumns, MySQLiteHelper.COLUMN_ID + " = " + insertId, null,
        null, null, null);
    cursor.moveToFirst();
    Comment newComment = cursorToComment(cursor);
    cursor.close();
    return newComment;
  }

  public void deleteComment(Comment comment) {
    long id = comment.getId();
    System.out.println("Comment deleted with id: " + id);
    database.delete(MySQLiteHelper.TABLE_COMMENTS, MySQLiteHelper.COLUMN_ID
        + " = " + id, null);
  }

  public List<Comment> getAllComments() {
    List<Comment> comments = new ArrayList<Comment>();

    Cursor cursor = database.query(MySQLiteHelper.TABLE_COMMENTS,
        allColumns, null, null, null, null, null);

    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
      Comment comment = cursorToComment(cursor);
      comments.add(comment);
      cursor.moveToNext();
    }
    // Make sure to close the cursor
    cursor.close();
    return comments;
  }

  private Comment cursorToComment(Cursor cursor) {
    Comment comment = new Comment();
    comment.setId(cursor.getLong(0));
    comment.setComment(cursor.getString(1));
    return comment;
  }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:52:24.253

这个类将帮助您的应用程序与您的数据库进行交互。您应该只有一个 DAO 类，其中包含您需要的所有方法。（不同表的不同方法。）

检查以下示例：

```
public void insertInTableA (String[]) //or any args
{
    //Logic for table A row insertion
}

public void insertInTableB (String[]) //or any args
{
    //Logic for table B row insertion
}

public void dltFromTableA (String where) //or any args
{
    //Logic for table A row deletion
}

public void dltFromTableB (String where) //or any args
{
    //Logic for table B row deletion
}

//Other function as per requirement 
```

# solr - Apache Solr XPathEntityProcessor DIH - 索引更新

> ID：13914465
> 
> 赞同：1
> 
> 时间：2012-12-17T12:47:05.110
> 
> 标签：solr

我对 Apache SOlr 比较陌生，最近一直在使用 DIH，特别是 XPathEntityProcessor。我需要一种方法来定期索引新的 XML 文件，但是，似乎 delta-import 命令仅受 sqlEntityProcessor [1] 支持。

我正在处理越来越大的 XML 文件数据集，并希望 solr 可以确定新文件并为它们编制索引......

想到的一个潜在解决方案是，在将文档移动到其各自的永久位置之前，可能从包含先前未索引的文档的暂存区域进行完全导入。

1.  是否有使用 XPathEntityProcessor 模拟 delte-import 的解决方法？
2.  使用 XPathEntityProcessor 的人使用什么样的方法来索引较新的文档？

[1] [http://wiki.apache.org/solr/DataImportHandler#Using_delta-import_command-1](http://wiki.apache.org/solr/DataImportHandler#Using_delta-import_command-1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:39:46.523

我已经使用了 UpdateRequestHandler；它非常适合我想做的事情。

[1] [http://wiki.apache.org/solr/XsltUpdateRequestHandler](http://wiki.apache.org/solr/XsltUpdateRequestHandler)

# spring - 如何在 Spring Data JPA CRUDRepository 中添加缓存功能

> ID：13914480
> 
> 赞同：19
> 
> 时间：2012-12-17T12:48:06.540
> 
> 标签：spring, hibernate, caching, jpa, jdbc

我想在 findOne 方法中添加“Cacheable”注释，并在删除或发生方法发生时驱逐缓存。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-10-31T13:57:27.007

virsir，如果您使用 Spring Data JPA（仅使用接口），还有另一种方法。这是我所做的，用于类似结构化实体的通用 dao：

```
public interface CachingDao<T, ID extends Serializable> extends JpaRepository<T, ID>, JpaSpecificationExecutor<T> {

@Cacheable(value = "myCache")
T findOne(ID id);

@Cacheable(value = "myCache")
List<T> findAll();

@Cacheable(value = "myCache")
Page<T> findAll(Pageable pageable);

....

@CacheEvict(value = "myCache", allEntries = true)
<S extends T> S save(S entity);

....

@CacheEvict(value = "myCache", allEntries = true)
void delete(ID id);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-01-29T09:01:47.313

我认为基本上@seven 的答案是正确的，但缺少 2 点：

1.  我们不能定义通用接口，恐怕我们必须单独声明每个具体接口，因为注释不能被继承，并且我们需要为每个存储库设置不同的缓存名称。

2.  `save`并且`delete`应该是`CachePut`并且`findAll`应该是`Cacheable`和`CacheEvict`

    ```
    public interface CacheRepository extends CrudRepository<T, String> {

        @Cacheable("cacheName")
        T findOne(String name);

        @Cacheable("cacheName")
        @CacheEvict(value = "cacheName", allEntries = true)
        Iterable<T> findAll();

        @Override
        @CachePut("cacheName")
        T save(T entity);

        @Override
        @CacheEvict("cacheName")
        void delete(String name);
    } 
    ```

[参考](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/cache.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-03T05:12:41.373

我通过以下方式解决了这个问题，并且工作正常

* * *

```
public interface BookRepositoryCustom {

    Book findOne(Long id);

} 
```

* * *

```
public class BookRepositoryImpl extends SimpleJpaRepository<Book,Long> implements BookRepositoryCustom {

    @Inject
    public BookRepositoryImpl(EntityManager entityManager) {
        super(Book.class, entityManager);
    }

    @Cacheable(value = "books", key = "#id")
    public Book findOne(Long id) {
        return super.findOne(id);
    }

} 
```

* * *

```
public interface BookRepository extends JpaRepository<Book,Long>, BookRepositoryCustom {

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-17T15:53:52.923

尝试按照此处的说明提供 MyCRUDRepository（一个接口和一个实现）：[向所有存储库添加自定义行为](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#repositories.custom-behaviour-for-all-repositories)。然后您可以覆盖并为这些方法添加注释：

```
findOne(ID id)
delete(T entity)
delete(Iterable<? extends T> entities)
deleteAll() 
delete(ID id) 
```

# internet-explorer - Play Framework Internet Explorer 解析器错误

> ID：13914481
> 
> 赞同：2
> 
> 时间：2012-12-17T12:48:09.090
> 
> 标签：internet-explorer, playframework, html-parsing

> 对于请求 'POST /' [Error parsing application/x-www-form-urlencoded]

我只在 IE 上收到此错误。所有其他浏览器都可以处理它而不会哭泣。试图谷歌这个错误，但找不到任何有用的东西。知道应该做些什么来避免它吗？也许我在一般使用我不知道的框架时做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-06T13:57:39.667

I was experiencing the same with IE10, and I traced it to the POST content being:

```
 email=fred@example.com&password=asd&= 
```

The final "&=" causes an exception in FormUrlEncodedParser, which is swallowed and converted to a BadRequest in BodyParsers.tolerantFormUrlEncoded.

In summary, to my understanding, this is the combination of two bugs:

*   MSIE10 is sending those two characters for whatever reason (there seem to be several possible such reasons).

*   Play does not tolerate those useless characters in the query string (where it is customary that unknown parameters in URLs should be ignored by server apps). I've reported this as a bug: [https://github.com/playframework/Play20/issues/1185](https://github.com/playframework/Play20/issues/1185)

In my case, the "whatever reason" was a tag with no "name" attribute. In GafrieldKlon's case, it was an unclosed <input type="hidden". Your's may be another.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-07T22:08:08.890

以防万一这对其他人有帮助，我刚刚遇到了这个问题，在调试后我发现一个 javascript 验证库正在引入一个隐藏的输入，IE 随后对其进行了编码。

该库来自这里：http: [//jqueryvalidation.org/](http://jqueryvalidation.org/)

我碰巧使用的是 play 2.2.2，所以当 2.3.0 发布时，这应该不是问题。

我的解决方法是编辑验证脚本并注释掉隐藏输入的添加。在我的用例中，无论如何都不需要那段代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T11:15:23.020

好的，我已经调试了 Play！来源，我找到了导致此错误的代码。*就是ContentTypes.scala*中*def 容错*FormUrlEncoded的方法 抛出了 NoSuchElementException，这是由非关闭引起的*`<input type="hidden"`*

 *所以我建议你检查你的表格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-06T22:27:25.620

我能够在受控环境（使用普通表单和 PHP 服务器）中重新创建此行为。它发生在 IE 中，但没有发生在 Chrome 中（没有测试 Firefox 或 Safari）。问题只是部分 Play 对表单数据的处理。

造成这种情况的原因是：IE 似乎将每个表单字段与一个名称属性（是否为空）捆绑在一起，并将其放入发布数据中。这意味着任何具有空名称属性 ( `name=""`) 的表单元素都将被表示。这是基于“成功控制”的想法（[http://www.w3.org/TR/html401/interact/forms.html#h-17.13.2](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.2)）。规范尚不清楚（从我能找到的）是否具有“控件名称”意味着仅存在名称属性或具有非空值的名称属性。似乎 IE 从字面上理解并收集所有内容，而其他人则做了一个很好的额外步骤并过滤掉具有空名称的控件。

给定以下示例表单：

```
<form action="<?= $_SERVER['PHP_SELF']?>" method="POST">
    <label>
        Name
        <input name="name"/>
    </label>
    <label>
        Email
        <input name="email"/>
    </label>
    <button type="submit" name="">Send 1</button>
</form> 
```

IE9 导致附加`&=Send`到 POST 数据。在 IE10/11 中，最后导致了上述`&=`情况。作为记录，`<button>`应该提交显式`value`属性而不是标签内容。

然而，在我们的例子中（我是 kflorence 的同事，我在我们的代码库中查看了这个以给它一个全新的视角），我们的 HTML 在浏览器中是干净的。slohr 所说的（[https://stackoverflow.com/a/23529360/2684520](https://stackoverflow.com/a/23529360/2684520)）是困扰我们的。

因此，请检查您的表单 HTML 是否有任何空`name`属性。如果那是干净的，您可能会在提交表单或单击按钮时让一些 JS 注入有问题的字段或修改字段。如果您的表单 HTML 是干净的，则此错误不会影响您。*

# html - 在另外两个不同大小的 div 元素下方放置一个 div

> ID：13914482
> 
> 赞同：0
> 
> 时间：2012-12-17T12:48:10.120
> 
> 标签：html, css

想将底部（绿色）容器放在左右容器（红色和蓝色）下方，但仍将其保留在主（黑色）容器内。无法让它工作。有什么建议么？（[jsfiddle](http://jsfiddle.net/tWTsj/)）：

```
<!DOCTYPE HTML>
<html>
<body>

<div class="main_container">

    <div class="left_container">
    </div>

    <div class="right_container">
    </div>

    <div class="bottom_container">
    </div>

</div>

</body>
</html>​ 
```

CSS：

```
div.main_container {
    background: #000;
    border: none;
    -moz-border-radius: 15px;
    -webkit-border-radius: 15px;
    -khtml-border-radius: 15px;
    border-radius: 15px;
    width: 100%;
    min-height: 400px;
    margin: auto;
    position: relative;
}

div.left_container {
    float:left;
    position:absolute;
    width: 220px;
    background: red;
    margin: 0;
    min-height: 100%;
    padding: 0;
}

div.right_container {
    position: relative;
    margin-left: 220px;
    width: 715px;
    height: 100px;
    background: blue;
}

div.bottom_container {
    width: 100%;
    height: 100px;
    background: green;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:09:49.110

这应该将左侧容器的高度调整为除绿色容器之外的所有内容`100px`，并将绿色容器放在整个事物的底部。

```
div.bottom_container {
    width: 100%;
    height: 100px;
    background: green;
    position: absolute;
    bottom: 0;
}
div.left_container {
    position:absolute;
    bottom: 100px;
    top: 0;
    width: 220px;
    background: red;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:53:27.683

```
 position:fixed;
    bottom:0px; 
```

在 div.bottom_container 中添加这两个属性。希望你得到你所期望的

# c - 如何解析 json int 数组？

> ID：13914484
> 
> 赞同：-1
> 
> 时间：2012-12-17T12:48:12.927
> 
> 标签：c, json

我想将一个 JSON`int`数组解析到我的 C 程序中。这是我的输入的样子。

```
"category" : { "list" : [1, 2, 3, 4], "count" : 4}. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:51:36.663

您总是可以编写自己的 JSON 解析算法，但为什么要重新发明轮子呢？有一些可用于 C 的优秀 JSON 库可以为您做到这一点。有关所有常见编程语言的 JSON 库列表，请参见[http://www.json.org/ （它有 14 种不同的 C 可供选择）。](http://www.json.org/)

# json - Fullcalendar - 将参数传递给 json 页面

> ID：13914486
> 
> 赞同：0
> 
> 时间：2012-12-17T12:48:26.813
> 
> 标签：json, fullcalendar

我想在我的页面上发布一个生成事件的变量，所以我可以这样做：

```
$id = $_POST['id'];

$return_arr = array();
$fetch = mysql_query("SELECT * FROM events WHERE userid = " . £id); 
```

我目前正在使用：

```
eventSources: [

// your event source
{
url: 'json-events.php',
type: 'POST',
data: {
id: userid
},
error: function() {
alert('there was an error while fetching events!');
}
}

// any other sources...

] 
```

但是，没有任何事件发生，但我没有收到错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:50:06.667

固定的

在查询中使用英镑符号而不是美元符号！:D

# regex - htaccess RewriteRule 一个参数包括其他

> ID：13914488
> 
> 赞同：1
> 
> 时间：2012-12-17T12:48:32.883
> 
> 标签：regex, apache, .htaccess, mod-rewrite

我第一次遇到问题，不知道为什么会遇到这个问题。下面你会看到我的 .htaccess 文件的三行。`/urun/test-123`使用时`urundetay.php`，`/urunlerimiz/`不得不使用`urunlerimiz.php`。问题是因为 'urunlerimiz' 在其中包含 'urun'，所有这三个链接都使用`urundetay.php`.

```
RewriteRule ^urunlerimiz/?(.*)$ urunlerimiz.php [NC]
RewriteRule ^urun/?(.*)$ urundetay.php [NC]
RewriteRule ^urun-kategori/?(.*)$ urundetay.php [NC] 
```

当我将这些参数设置完全不同时，它可以正常工作。但我必须那样使用它，我想学习。解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:02:09.833

您需要在模式中使用负前瞻，以便字符串`lerimiz` 不会产生匹配。因为，根据[RewriteRule 文档](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewriterule)，使用的正则表达式模式与`RewriteRule`Perl 兼容，您应该可以这样做：

```
RewriteRule ^urun(?!lerimiz)/?(.*)$ urundetay.php [NC] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:08:10.517

我在我的一个项目中也遇到过这个问题，我是这样解决的：

```
RewriteRule ^urunlerimiz(/.*|)$ urunlerimiz.php [NC,L]
RewriteRule ^urun(/.*|)$ urundetay.php [NC,L]
RewriteRule ^urun-kategor(/.*|)$ urundetay.php [NC,L] 
```

诀窍是`(/.*|)`在每个关键字之后附加。

例如，对于正则表达式，`^urun(/.*|)$`这将匹配`/urun`OR `/urun/`OR`/urun/foo`但不会匹配`/urunlerimiz`and`/urun-kategor`

# java - Struts2 表单标签

> ID：13914490
> 
> 赞同：0
> 
> 时间：2012-12-17T12:48:45.513
> 
> 标签：java, forms, struts2, tags

我目前正在创建一个使用 Struts2 标记进行表单提交的 Web 应用程序。我看到的一个问题是，当我查看页面源代码时，它清楚地显示了我的代码，特别是 struts2 如何创建表单。像这样的东西。

```
<tr>
    <td class="tdLabel"><label for="register_userBean_username" class="label">User Name:</label></td>
    <td
><input type="text" name="userBean.username" value="" id="register_userBean_username" class="class java.util.HashMap"/></td>
</tr>

      <tr>
    <td class="tdLabel"><label for="register_userBean_password" class="label">Password:</label></td>
    <td
><input type="text" name="userBean.password" value="" id="register_userBean_password" class="class java.util.HashMap"/></td>
</tr> 
```

有没有办法阻止用户看到 struts2 为我的表单创建的底层代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:53:56.533

我认为没有办法在不破坏网站的情况下隐藏它。这些信息似乎对于使网站正常运行至关重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:20:07.040

我同意@Theolodis。您无法隐藏为您创建的 struts 标记的 html 代码。struts 标签的目标是通过提供扩展为所需 html 代码的标签来最小化您的视图页面编码。以及您将如何阻止用户查看其浏览器上的代码。

# python - Python处理系统关闭

> ID：13914495
> 
> 赞同：3
> 
> 时间：2012-12-17T12:48:57.963
> 
> 标签：python, windows, events, multiprocessing, shutdown

我有一个多处理的 python 应用程序，它在 Windows 上作为 EXE 运行。在选择关闭操作系统时，应用程序会由于进程关闭而引发许多异常。

有没有办法通过 Windows 捕获系统关闭请求，以便我可以自己处理多进程的关闭？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T14:12:38.333

nabble.com[页面](http://python.6.n6.nabble.com/Catching-Windows-Shutdown-events-td1950035.html)建议使用`win32api.SetConsoleCtrlHandler`：

> “当 Windows 关闭时，我需要做一些事情，比如有人按下电源按钮。我相信这是一个窗口消息，WM_QUERYENDSESSION 或 WM_ENDSESSION。我找不到任何方法可以在 python 中捕获它。atexit() 不起作用。使用信号模块捕获 SIGBREAK 或 SIGTERM 也不起作用。”<br> 您可以使用 win32api.SetConsoleCtrlHandler 并捕获发送到控制台的 CTRL_SHUTDOWN_EVENT。

另请参阅 [Python windows 关闭事件](https://stackoverflow.com/questions/1411186)，其中说，“使用 win32api.setConsoleCtrlHandler() 时，我能够从 Windows 接收关闭/注销/等事件，并干净地关闭我的应用程序”等。

# c# - 使用 linq 从 xml 获取特定数据

> ID：13914496
> 
> 赞同：0
> 
> 时间：2012-12-17T12:48:59.893
> 
> 标签：c#, linq

你能帮助从下面的 XML 获取特定数据吗？

我需要来自关系节点的以下字段，

谢谢你的帮助 ！

**tva:节目信息表**

tva:Title type="main" tva:Genre href=

**tva:节目位置表**

tva:PublishedStartTime

他们在**crid="............."上有关系**

```
<?xml version="1.0" encoding="utf-8"?>
<tva:TVAMain xmlns:tva="urn:tva:metadata:2005" xmlns:mpeg7="urn:tva:mpeg7:2005" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xml:lang="tr">
  <tva:ProgramDescription>

    <tva:ProgramInformationTable>

      <tva:ProgramInformation programId="2471154983201212170000" ChannelName="13951" xmlns:tva="urn:tva:metadata:2005">
        <tva:BasicDescription>
          <tva:Title type="main"><![CDATA[Krem]]></tva:Title>
          <tva:Title type="original"></tva:Title>
          <tva:Title type="episodeTitle"></tva:Title>
          <tva:Title type="seriesTitle"></tva:Title>
          <tva:Synopsis length="short"><![CDATA[Mucizeler sadece masallarda mı olur?]]></tva:Synopsis>
          <tva:Synopsis length="long"><![CDATA[Desc]]></tva:Synopsis>
          <tva:Genre href="urn:etsi:cs:GenreEtsiCS:2009:1.0" />
          <tva:Genre href="urn:engin:cs:GenreSectionCS:2009:9004">
            <tva:Name><![CDATA[Dizi]]></tva:Name>
          </tva:Genre>
          <tva:Genre href="urn:engin:cs:GenreSectionCS:2009:9801">
            <tva:Name><![CDATA[Yerli]]></tva:Name>
          </tva:Genre>
          <tva:Genre href="urn:engin:cs:GenreSectionCS:2009:1.7">
            <tva:Name><![CDATA[Dram]]></tva:Name>
          </tva:Genre>
          <tva:Language type="original" closed="true"><![CDATA[tr-TR]]></tva:Language>
          <tva:CaptionLanguage></tva:CaptionLanguage>
        </tva:BasicDescription>
        <tva:AVAttributes>
          <tva:System href="urn:engin:cs:VideoFormat:SD" />
        </tva:AVAttributes>
      </tva:ProgramInformation>

      <tva:ProgramInformation programId="2471051483201212170020" ChannelName="13951" xmlns:tva="urn:tva:metadata:2005">
        <tva:BasicDescription>
          <tva:Title type="main"><![CDATA[Dizi]]></tva:Title>
          <tva:Title type="original"></tva:Title>
          <tva:Title type="episodeTitle"></tva:Title>
          <tva:Title type="seriesTitle"></tva:Title>
          <tva:Synopsis length="short"><![CDATA[]]></tva:Synopsis>
          <tva:Synopsis length="long"><![CDATA[]]></tva:Synopsis>
          <tva:Genre href="urn:etsi:cs:GenreEtsiCS:2009:1.0" />
          <tva:Genre href="urn:engin:cs:GenreSectionCS:2009:9004">
            <tva:Name><![CDATA[Dizi]]></tva:Name>
          </tva:Genre>
          <tva:Genre href="urn:engin:cs:GenreSectionCS:2009:9801">
            <tva:Name><![CDATA[Yerli]]></tva:Name>
          </tva:Genre>
          <tva:Language type="original" closed="true"><![CDATA[tr-TR]]></tva:Language>
          <tva:CaptionLanguage></tva:CaptionLanguage>
          <tva:CreditsList>
            <tva:ReleaseInformation>
              <tva:ReleaseDate>
                <tva:Year></tva:Year>
              </tva:ReleaseDate>
            </tva:ReleaseInformation>
          </tva:CreditsList>
        </tva:BasicDescription>
        <tva:AVAttributes>
          <tva:System href="urn:engin:cs:VideoFormat:SD" />
        </tva:AVAttributes>
      </tva:ProgramInformation>

      <tva:ProgramInformation programId="2471155083201212170210" ChannelName="13951" xmlns:tva="urn:tva:metadata:2005">
        <tva:BasicDescription>
          <tva:Title type="main"><![CDATA[Unutulmaz]]></tva:Title>
          <tva:Title type="original"></tva:Title>
          <tva:Title type="episodeTitle"></tva:Title>
          <tva:Title type="seriesTitle"></tva:Title>
          <tva:Synopsis length="short"><![CDATA[Desc]]></tva:Synopsis>
          <tva:Synopsis length="long">
            <![CDATA[Desc]]>
          </tva:Synopsis>
          <tva:Genre href="urn:etsi:cs:GenreEtsiCS:2009:1.0" />
          <tva:Genre href="urn:engin:cs:GenreSectionCS:2009:9004">
            <tva:Name><![CDATA[Dizi]]></tva:Name>
          </tva:Genre>
          <tva:Genre href="urn:engin:cs:GenreSectionCS:2009:9801">
            <tva:Name><![CDATA[Yerli]]></tva:Name>
          </tva:Genre>
          <tva:Genre href="urn:engin:cs:GenreSectionCS:2009:1.7">
            <tva:Name><![CDATA[Dram]]></tva:Name>
          </tva:Genre>
          <tva:Language type="original" closed="true"><![CDATA[tr-TR]]></tva:Language>
          <tva:CaptionLanguage></tva:CaptionLanguage>        
        </tva:BasicDescription>
        <tva:AVAttributes>
          <tva:System href="urn:engin:cs:VideoFormat:SD" />
        </tva:AVAttributes>
      </tva:ProgramInformation>   

    </tva:ProgramInformationTable>

    <tva:ProgramLocationTable>

      <tva:ScheduleEvent xmlns:tva="urn:tva:metadata:2005">
        <tva:Program crid="2471154983201212170000" />
        <tva:PublishedStartTime>2012-12-17T00:00:00+02:00</tva:PublishedStartTime>
        <tva:PublishedEndTime>2012-12-17T00:20:00+02:00</tva:PublishedEndTime>
        <tva:PublishedDuration>PT00H20M00S</tva:PublishedDuration>
      </tva:ScheduleEvent>

      <tva:ScheduleEvent xmlns:tva="urn:tva:metadata:2005">
        <tva:Program crid="2471051483201212170020" />
        <tva:PublishedStartTime>2012-12-17T00:20:00+02:00</tva:PublishedStartTime>
        <tva:PublishedEndTime>2012-12-17T02:10:00+02:00</tva:PublishedEndTime>
        <tva:PublishedDuration>PT01H50M00S</tva:PublishedDuration>
      </tva:ScheduleEvent>

      <tva:ScheduleEvent xmlns:tva="urn:tva:metadata:2005">
        <tva:Program crid="2471155083201212170210" />
        <tva:PublishedStartTime>2012-12-17T02:10:00+02:00</tva:PublishedStartTime>
        <tva:PublishedEndTime>2012-12-17T03:50:00+02:00</tva:PublishedEndTime>
        <tva:PublishedDuration>PT01H40M00S</tva:PublishedDuration>
      </tva:ScheduleEvent>    

    </tva:ProgramLocationTable>

    <tva:ServiceInformationTable>
      <tva:ServiceInformation serviceId="ATV">
        <tva:Name>ATV</tva:Name>
      </tva:ServiceInformation>
    </tva:ServiceInformationTable>  

  </tva:ProgramDescription>
</tva:TVAMain> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:05:40.763

这可以作为一个起点。

```
var xDoc = XDocument.Load(filename);
XNamespace tva = "urn:tva:metadata:2005";

var pi = xDoc.Descendants(tva + "ProgramInformation")
            .Select(p => new
            {
                ProgramId = p.Attribute("programId").Value,
                ChannelName = p.Attribute("ChannelName").Value,
                Title = p.Descendants(tva+"Title")
                         .First(a=>a.Attribute("type").Value=="main")
                         .Value
            })
            .ToList(); 
```

# haskell - {-# OPTIONS_HADDOCK hide #-} 对未导出的模块有影响吗？

> ID：13914500
> 
> 赞同：3
> 
> 时间：2012-12-17T12:49:22.570
> 
> 标签：haskell, cabal, haddock

假设我有一个使用 Cabal 打包和构建的库，并且某些模块`Internal`不在我的 cabal 文件的`Exposed-modules`. 如果我指定一个编译指示，它会有什么不同吗

```
{-# OPTIONS_HADDOCK hide #-} 
```

在顶部`Internal.hs`，还是已经根据 Haddock 自动隐藏？

如果它确实有所作为，它有什么影响？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T17:02:38.300

如果包的黑线鳕是用`--internal`to 标志创建的，那确实会有所不同`cabal haddock`。

```
$ cabal help haddock
Usage: cabal haddock [FLAGS]

Flags for haddock:
 -h --help                  Show this help text
 -v --verbose[=n]           Control verbosity (n is 0--3, default verbosity
                            level is 1)
  <snip>
    --executables           Run haddock for Executables targets
    --internal              Run haddock for internal modules and include all
                            symbols
  <snip> 
```

如果创建的黑线鳕没有`--internal`标记，则`hide`模块属性无效：无论如何都不会为模块创建文档。

如果`--internal`给出，则为非公开模块创建文档，但指定属性的模块*除外。*`hide`

换句话说，如果`hide`未设置*并且*指定或`--internal`导出模块，则会生成文档。

`--internal`for的使用`cabal haddock`可以用 指定`cabal install --haddock-internal`，或者在手动调用时`cabal haddock`，或者用`runhaskell ./Setup.hs ...`接口指定。

大多数人只是`cabal install`使用默认选项运行，所以只有少数人会观察到差异。

# ios - 不使用动画 segue 会导致应用崩溃

> ID：13914508
> 
> 赞同：0
> 
> 时间：2012-12-17T12:49:44.440
> 
> 标签：ios

我正在使用一个`UIStoryboardSegue`子类来抑制推送动画序列。

```
#import "NoAnimationSegue.h"

@implementation NoAnimationSegue

- (void)perform
{
    UIViewController *src = (UIViewController *) self.sourceViewController;
    UIViewController *dst = (UIViewController *) self.destinationViewController;
    NSLog(@"src %@", src);
    [src.navigationController pushViewController:dst animated:NO];
}

@end 
```

在某些情况下，使用此 segue 有时会使我的应用程序崩溃。当我禁用此代码并改用 push segue 时，它​​工作正常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T06:39:38.583

出现这个问题是因为我在故事板中添加了一个手势识别器到我的 `destinationViewController`.

当我删除手势识别器或通过代码添加识别器时......它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:29:25.157

上面的代码对我来说工作正常。你如何在这个子类 segue 中调用“执行”方法？我用下面的例子检查了你的子类，它工作正常，你能编写你用来调用“执行”方法的代码吗？

```
SecondViewController *second = [[SecondViewController alloc] init];
NoAnimationSegue *animate = [[NoAnimationSegue alloc] initWithIdentifier:@"1" source:self destination:second];
[animate perform]; 
```

# javascript - 在 TypeScript 中具有类型化元素的 KnockoutObservableArray

> ID：13914512
> 
> 赞同：2
> 
> 时间：2012-12-17T12:49:50.800
> 
> 标签：javascript, knockout.js, typescript

我目前正在寻找将我们的项目迁移到 TypeScript。我已经找到[了](https://github.com/borisyankov/DefinitelyTyped)一组很棒的定义文件，我目前正在试验用于[Knockout](http://knockoutjs.com/)的定义文件。

我知道定义文件有一个 observableArray 的类型`KnockoutObservableArray`，我也知道你可以定义一个类型化的数组，比如`MyType[]`.

我想知道我是否可以以某种方式将这两者结合起来？我想创建一个`KnockoutObservableArray`元素应该是 type 的`MyType`。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T16:54:26.637

TypeScript 的路线图包括泛型，我认为这是您创建所需内容所需要的。以下代码不是真实的，甚至可能不是 TypeScript 团队实现泛型的方式，但它提供了我认为的实现方式的味道。我还遗漏了有关如何使其可观察等的实现细节：

```
class KnockoutObservableArray <T> {
    constructor(public Items: T[]) {
    }
}

var observableString = new KnockoutObservableArray<string>(['foo', 'bar']); 
```

但正如我所提到的，TypeScript 中还没有包含泛型，所以现在你必须让它动态化！

```
var observableString: any; 
```

# objective-c - 目标 C“错误 URL”错误

> ID：13914530
> 
> 赞同：2
> 
> 时间：2012-12-17T12:50:38.623
> 
> 标签：objective-c, ios, nsurlconnection

我正在尝试从我的 Objective C 代码设置对某个 URL 的 Http GET 请求。无论我做什么，或者我使用哪个 URL，我都会收到以下错误：

```
Connection Failed: Error Domain=NSURLErrorDomain 
Code=-1000 "bad URL" UserInfo=0x755c440 
{NSUnderlyingError=0x7561950 "bad URL", NSLocalizedDescription=bad URL} 
```

我是 iOS 开发的新手，所以我不确定我是否做对了。我遵循了苹果文档并在各种论坛中寻找答案，即使这样我也得到了这个错误。

这是我的代码：

```
NSString *url = [NSString stringWithFormat: @"http://example.com/api/%@/%@", str1, str2];

NSString *encodedUrl = [url stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding];

NSLog(@"URL - %@", encodedUrl);              // Checking the url

NSMutableURLRequest *theRequest= [[NSMutableURLRequest alloc] init];

[theRequest setHTTPMethod:@"GET"];

[NSMutableURLRequest requestWithURL:[NSURL URLWithString:encodedUrl]
                                          cachePolicy:NSURLRequestUseProtocolCachePolicy
                                      timeoutInterval:10.0];

NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self startImmediately:YES]; 
```

任何建议都是最受欢迎的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T12:55:26.240

你没有初始化你的`theRequest`. 如果您没有将其返回值分配给变量，则此行不执行任何操作。

```
[NSMutableURLRequest requestWithURL:[NSURL URLWithString:encodedUrl]
                                          cachePolicy:NSURLRequestUseProtocolCachePolicy
                                      timeoutInterval:10.0]; 
```

这是您应该使用的代码：

```
NSString *url = [NSString stringWithFormat: @"http://example.com/api/%@/%@", str1, str2];

NSString *encodedUrl = [url stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding];

NSLog(@"URL - %@", encodedUrl);              // Checking the url

NSMutableURLRequest *theRequest= [NSMutableURLRequest requestWithURL:[NSURL URLWithString:encodedUrl]
                                                           cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                       timeoutInterval:10.0];

NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self startImmediately:YES]; 
```

# python - Python修改生成器

> ID：13914531
> 
> 赞同：1
> 
> 时间：2012-12-17T12:50:45.557
> 
> 标签：python, generator

我实现了一个（简单的）python 生成器。现在，我想做另一个（从中），它将遍历所有值，但最后一个。

```
def gen(x):                   # Generate the interval [x, 10]
    if x <= 10:
        yield x
        for v in gen(x + 1):
            yield v 
```

实现这一目标的最佳方法是什么？是否可以使用装饰器更改原始生成器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T12:53:38.580

使用临时变量作为简单的“队列”，您可以转发来自任何迭代器的元素并将最后一个保留在末尾：

```
def islice_to_last(it):
    prev_value = next(it)
    for value in it:
        yield prev_value
        prev_value = value 
```

或更一般地（对于最多**x 个**最后一个元素的生成器）：

```
from collections import deque
import itertools as it

def islice_without_end(it, x):
    d = deque(it.islice(it, x))
    for value in it:
        yield d.popleft()
        d.append(value) 
```

# html - 100% 没有内容的高度

> ID：13914544
> 
> 赞同：1
> 
> 时间：2012-12-17T12:51:39.493
> 
> 标签：html, css

我有一个（小）问题。我试图给我的菜单栏的背景颜色，与我的主要内容 div 的高度相同，所以我想我会给 div 一个 100% 的高度，但这似乎不起作用，因为没有更多的内容可以使 div 的高度更高，我用我的意思做了一个例子（用jsfiddle制作）。我知道这是可能的，因为我以前做过。这是一个简单的问题，但你有那些日子，你几乎忘记了任何事情。

```
 <!DOCTYPE HTML>
<html>
    <head>
    </head>
    <body>
        <div id="wrapper">
            <div id="boxLeft">
                menu1 </br>
                menu2 </br>
                menu3 </br>
            </div>  
            <div id="boxMid">
                Lorem ipsum <br />
                Lorem ipsum <br />
                Lorem ipsum <br />
                Lorem ipsum <br />
                Lorem ipsum <br />
                Lorem ipsum <br />
                Lorem ipsum <br />
                Lorem ipsum <br />
                Lorem ipsum <br />
                Lorem ipsum <br />
                Lorem ipsum <br />
                Lorem ipsum <br />
                Lorem ipsum <br />
                Lorem ipsum <br />
            </div>
            <div id="boxRight">
            </div>              
        </div> 
    </body>
</html> 
```

​</p>

```
*{color:white;}
#wrapper{height:100% width:100%;}
#boxLeft{float:left; width:100px; height:100%; background-color:gray;}
#boxMid {float:left; width:400px; height:100%; background-color:blue; }
#boxRight{float:left; width:200px; height:50px; background-color:orange;}​ 
```

[http://jsfiddle.net/zEest/56/](http://jsfiddle.net/zEest/56/)

谢谢阅读，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:15:04.197

看一眼：

[等高列](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)

希望这对你有帮助。顺便说一句，您可以使用 jquery 来修复 dom 准备好的高度。

```
$(document).ready(function(){ // event when DOM is ready.
  //sets the height of the boxes the same as the wrapper.
  $('#boxLeft, #boxRight').css('height',$('#wrapper').height());

}); 
```

要使包装器具有正确的高度，请使用以下命令：

```
<div id="wrapper">
        <div id="boxLeft">
            menu1 </br>
            menu2 </br>
            menu3 </br>
        </div>  
        <div id="boxMid">
            Lorem ipsum <br />
            Lorem ipsum <br />
            Lorem ipsum <br />
            Lorem ipsum <br />
            Lorem ipsum <br />
            Lorem ipsum <br />
            Lorem ipsum <br />
            Lorem ipsum <br />
            Lorem ipsum <br />
            Lorem ipsum <br />
            Lorem ipsum <br />
            Lorem ipsum <br />
            Lorem ipsum <br />
            Lorem ipsum <br />
        </div>
        <div id="boxRight">
        </div>
         <div style="clear:both;"></div>  
    </div> 
```

使用 css 技巧明确：两个包装器高度都获得了他孩子的最大高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T12:59:21.607

只需添加

```
body {  height: 100%;}
#wrapper{overflow:auto;} 
```

***[演示](http://jsbin.com/ifidez/2)***

由于元素中的所有`#wrapper`元素都是浮动的，因此它们从正常流中移除。所以给`#wrapper`添加高度`{overflow:auto;}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T13:02:39.897

您可以通过使用 jQuery 来实现这一点。简单的两步

```
$(document).ready(function() {
   var midHeight = $('#boxMid').height();
   $('#boxLeft').height(midHeight);
}); 
```

这是**[小提琴](http://jsfiddle.net/zEest/87/)**

给出`widths`百分比..如果您需要这些 div 彼此相邻。

干杯:)

# google-apps-script - 带有 MySQL 的 JDBC 服务：UTF-8 编码/解码

> ID：13914545
> 
> 赞同：3
> 
> 时间：2012-12-17T12:51:41.883
> 
> 标签：google-apps-script, google-drive-api

我尝试将 MySQL 数据库与我在 Google Drive 中的文档同步。我在 Google App Script 上写了一个小脚本来完成这项工作。

我在处理字符编码时遇到了一些问题（默认字符集是 UTF-8，带有整理“general_ci”）。我尝试了不同的方法（encodeURIComponent、小型 UTF-8 工具类、Blob，...），但没有任何效果。这是小示例代码：

```
var title = result.getString("title");
title = Utilities.newBlob(title, Utilities.Charset.UTF_8);
if(title.getDataAsString() != file.getName()) {
          Logger.log('Updating title for document %s from %s to %s', file.getId(), title.getDataAsString(),          file.getName());
          stmt_update_title.setObject(2, file.getId());
          stmt_update_title.setObject(1, Utilities.newBlob(file.getName(), Utilities.Charset.UTF_8).getDataAsString());
          stmt_update_title.addBatch();
        } 
```

当我从 MySQL 中检索时，我得到一个带有“？”的不正确字符串 而不是重音字符（'é'、'è'、'à'）。当我更新时，字符串已损坏（但它在日志中打印得很好）。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-20T17:17:23.260

您需要为 JDBC 对象使用特殊的连接字符串，例如

```
jdbc:mysql://host:port/instance?useUnicode=true&characterEncoding=UTF-8 
```

# c# - 使用 DateTime.parseextract 时出错

> ID：13914546
> 
> 赞同：0
> 
> 时间：2012-12-17T12:51:42.553
> 
> 标签：c#, .net, sql-server, visual-studio-2010

我有一个文本框 - DateOfBirth 我按照以下步骤从验证数据到将其保存在数据库中。

第 1 步：当我提交文本时，我验证日期格式是否正确（dd/mm/yyyy）：

```
string Pattern = @"^(0?[1-9]|[12][0-9]|3[01])[/](0?[1-9]|1[012])[/](19|20)\d\d"; 
```

第 2 步：如果格式正确，我将文本框的输入值转换为日期时间格式：

```
IFormatProvider theCultureInfo = new System.Globalization.CultureInfo("en-GB", true);
DOB = DateTime.ParseExact(txtDOB.Value, "dd/mm/yyyy", theCultureInfo); 
```

第 3 步：然后我将值发送到数据库并按原样保存在我的表中。

我在这里遇到了一个问题：
对于日期“04/04/2012”，一切正常。
但如果我提交日期“4/04/2012”或“04/4/2012”，则第 2 步会引发异常：

```
String was not recognized as a valid DateTime. 
```

我该如何处理这个问题？

我应该跳过第 2 步并在数据库查询中进行转换吗？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T12:53:07.707

因为该方法希望您有两个位置的日期并且您只提供了一个值，所以要解决您的问题，请`d`在`ParseExact`格式中删除一个。

```
IFormatProvider theCultureInfo = new System.Globalization.CultureInfo("en-GB", true);
DOB = DateTime.ParseExact(txtDOB.Value, "d/M/yyyy", theCultureInfo); 
```

# spring - GWT Spring 安全集成（纯 GWT，无 JSP）

> ID：13914547
> 
> 赞同：11
> 
> 时间：2012-12-17T12:51:42.380
> 
> 标签：spring, gwt, login, spring-security, requestfactory

我正在使用*GWT 2.4*和*Spring 3.1*，我想用*Spring Security*保护我的应用程序。我一直在寻找没有单独 JSP 登录页面的仅 GWT 解决方案。我发现只有旧站点使用 JSP 进行登录，所以这个线程可能会导致以标准方式将 GWT 与 Spring Security 完全集成的解决方案。无论如何，如果有一个已经成功完成的参考，当然可以使用指向该参考的链接关闭该线程。

到目前为止，这是我的第一种方法：

**应用程序上下文-security.xml：**

```
<http auto-config="false" use-expressions="true" entry-point-ref="customAuthenticationEntryPoint">
    <intercept-url pattern="/ApplicationScaffold.html" access="permitAll" />
    <intercept-url pattern="/**" access="hasRole('ROLE_USER')" />
</http>

<beans:bean id="customAuthenticationEntryPoint" class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint" 
    c:loginFormUrl="/ApplicationScaffold.html" />

<!-- Configure Authentication mechanism -->
<authentication-manager alias="authenticationManager">
    <authentication-provider>
        ...
    </authentication-provider>
</authentication-manager> 
```

*ApplicationScaffold.html*（我的应用程序是使用 Spring Roo 创建的）是我的起始页面，其中包含 GWT 登录页面。

**网页.xml：**

```
<display-name>securitytest</display-name>

<description>Roo generated application</description>

<!-- Enable escaping of form submission contents -->
<context-param>
    <param-name>defaultHtmlEscape</param-name>
    <param-value>true</param-value>
</context-param>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath*:META-INF/spring/applicationContext*.xml</param-value>
</context-param>

<filter>
    <filter-name>CharacterEncodingFilter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
    <init-param>
        <param-name>forceEncoding</param-name>
        <param-value>true</param-value>
    </init-param>
</filter>

<filter>
    <filter-name>HttpMethodFilter</filter-name>
    <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
</filter>

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter> 
<filter>
    <filter-name>Spring OpenEntityManagerInViewFilter</filter-name>
    <filter-class>org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>CharacterEncodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<filter-mapping>
    <filter-name>HttpMethodFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<filter-mapping>
    <filter-name>Spring OpenEntityManagerInViewFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!-- Handles Spring requests -->
<servlet>
    <servlet-name>securitytest</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>WEB-INF/spring/webmvc-config.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet>
    <servlet-name>requestFactory</servlet-name>
    <servlet-class>com.securitytest.server.CustomRequestFactoryServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>securitytest</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>requestFactory</servlet-name>
    <url-pattern>/gwtRequest</url-pattern>
</servlet-mapping>

<session-config>
    <session-timeout>10</session-timeout>
</session-config> 
```

该类`CustomRequestFactoryServlet`扩展`RequestFactoryServlet`了提供额外的构造函数来解决 Spring 服务，并且不应该与安全问题相关。

在 GWT 小部件上输入用户名和密码后，将调用登录服务（通过`RequestFactory`），该服务仅执行以下操作：

```
public String loginUser(String username, String password) {
    UsernamePasswordAuthenticationToken token = 
            new UsernamePasswordAuthenticationToken(username, password);

    Authentication authenticatedUser = authenticationManager.authenticate(token);
    SecurityContextHolder.getContext().setAuthentication(authenticatedUser);

    return username;

} 
```

因此，当我输入像 .. */fooooooo*这样的 URL 时，我希望我的应用程序将我重定向到登录页面 ( *ApplicationScaffold.html* )。但是只有浏览器地址栏中的 URL 被设置为 ../ApplicationScaffold.html*并且*没有其他任何事情发生。

我究竟做错了什么？

堆栈跟踪显示以下内容：

```
[INFO] 2012-12-17 13:41:07,502 [btpool0-0] DEBUG org.springframework.security.web.FilterChainProxy - /fooooooooo at position 1 of 7 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
[INFO] 2012-12-17 13:41:07,502 [btpool0-0] DEBUG org.springframework.security.web.context.HttpSessionSecurityContextRepository - No HttpSession currently exists
[INFO] 2012-12-17 13:41:07,502 [btpool0-0] DEBUG org.springframework.security.web.context.HttpSessionSecurityContextRepository - No SecurityContext was available from the HttpSession: null. A new one will be created.
[INFO] 2012-12-17 13:41:07,502 [btpool0-0] DEBUG org.springframework.security.web.FilterChainProxy - /fooooooooo at position 2 of 7 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
[INFO] 2012-12-17 13:41:07,502 [btpool0-0] DEBUG org.springframework.security.web.FilterChainProxy - /fooooooooo at position 3 of 7 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
[INFO] 2012-12-17 13:41:07,502 [btpool0-0] DEBUG org.springframework.security.web.FilterChainProxy - /fooooooooo at position 4 of 7 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
[INFO] 2012-12-17 13:41:07,503 [btpool0-0] DEBUG org.springframework.security.web.authentication.AnonymousAuthenticationFilter - Populated SecurityContextHolder with anonymous token: 'org.springframework.security.authentication.AnonymousAuthenticationToken@9055e4a6: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@957e: RemoteIpAddress: 127.0.0.1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS'
[INFO] 2012-12-17 13:41:07,503 [btpool0-0] DEBUG org.springframework.security.web.FilterChainProxy - /fooooooooo at position 5 of 7 in additional filter chain; firing Filter: 'SessionManagementFilter'
[INFO] 2012-12-17 13:41:07,504 [btpool0-0] DEBUG org.springframework.security.web.session.SessionManagementFilter - Requested session ID1nkvhmubnkz6h is invalid.
[INFO] 2012-12-17 13:41:07,504 [btpool0-0] DEBUG org.springframework.security.web.FilterChainProxy - /fooooooooo at position 6 of 7 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
[INFO] 2012-12-17 13:41:07,504 [btpool0-0] DEBUG org.springframework.security.web.FilterChainProxy - /fooooooooo at position 7 of 7 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
[INFO] 2012-12-17 13:41:07,504 [btpool0-0] DEBUG org.springframework.security.web.util.AntPathRequestMatcher - Checking match of request : '/fooooooooo'; against '/applicationscaffold.html'
[INFO] 2012-12-17 13:41:07,504 [btpool0-0] DEBUG org.springframework.security.web.access.intercept.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /fooooooooo; Attributes: [hasRole('ROLE_USER')]
[INFO] 2012-12-17 13:41:07,504 [btpool0-0] DEBUG org.springframework.security.web.access.intercept.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.authentication.AnonymousAuthenticationToken@9055e4a6: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@957e: RemoteIpAddress: 127.0.0.1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS
[INFO] 2012-12-17 13:41:07,504 [btpool0-0] DEBUG org.springframework.security.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@5f8d13b8, returned: -1
[INFO] 2012-12-17 13:41:07,504 [btpool0-0] DEBUG org.springframework.security.web.access.ExceptionTranslationFilter - Access is denied (user is anonymous); redirecting to authentication entry point
[INFO] org.springframework.security.access.AccessDeniedException: Access is denied
...
[INFO] 2012-12-17 13:41:07,506 [btpool0-0] DEBUG org.springframework.security.web.savedrequest.HttpSessionRequestCache - DefaultSavedRequest added to Session: DefaultSavedRequest[http://127.0.0.1:8888/fooooooooo]
[INFO] 2012-12-17 13:41:07,506 [btpool0-0] DEBUG org.springframework.security.web.access.ExceptionTranslationFilter - Calling Authentication entry point.
[INFO] 2012-12-17 13:41:07,506 [btpool0-0] DEBUG org.springframework.security.web.DefaultRedirectStrategy - Redirecting to 'http://127.0.0.1:8888/ApplicationScaffold.html'
[INFO] 2012-12-17 13:41:07,506 [btpool0-0] DEBUG org.springframework.security.web.context.HttpSessionSecurityContextRepository - SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
[INFO] 2012-12-17 13:41:07,506 [btpool0-0] DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
[INFO] 2012-12-17 13:41:07,543 [btpool0-0] DEBUG org.springframework.security.web.FilterChainProxy - /ApplicationScaffold.html at position 1 of 7 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
[INFO] 2012-12-17 13:41:07,543 [btpool0-0] DEBUG org.springframework.security.web.context.HttpSessionSecurityContextRepository - HttpSession returned null object for SPRING_SECURITY_CONTEXT
[INFO] 2012-12-17 13:41:07,543 [btpool0-0] DEBUG org.springframework.security.web.context.HttpSessionSecurityContextRepository - No SecurityContext was available from the HttpSession: org.mortbay.jetty.servlet.HashSessionManager$Session:q0k5u6clocpc@1530548245\. A new one will be created.
[INFO] 2012-12-17 13:41:07,543 [btpool0-0] DEBUG org.springframework.security.web.FilterChainProxy - /ApplicationScaffold.html at position 2 of 7 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
[INFO] 2012-12-17 13:41:07,543 [btpool0-0] DEBUG org.springframework.security.web.savedrequest.DefaultSavedRequest - pathInfo: both null (property equals)
[INFO] 2012-12-17 13:41:07,543 [btpool0-0] DEBUG org.springframework.security.web.savedrequest.DefaultSavedRequest - queryString: both null (property equals)
[INFO] 2012-12-17 13:41:07,543 [btpool0-0] DEBUG org.springframework.security.web.savedrequest.DefaultSavedRequest - requestURI: arg1=/fooooooooo; arg2=/ApplicationScaffold.html (property not equals)
[INFO] 2012-12-17 13:41:07,543 [btpool0-0] DEBUG org.springframework.security.web.savedrequest.HttpSessionRequestCache - saved request doesn't match
[INFO] 2012-12-17 13:41:07,543 [btpool0-0] DEBUG org.springframework.security.web.FilterChainProxy - /ApplicationScaffold.html at position 3 of 7 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
[INFO] 2012-12-17 13:41:07,544 [btpool0-0] DEBUG org.springframework.security.web.FilterChainProxy - /ApplicationScaffold.html at position 4 of 7 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
[INFO] 2012-12-17 13:41:07,544 [btpool0-0] DEBUG org.springframework.security.web.authentication.AnonymousAuthenticationFilter - Populated SecurityContextHolder with anonymous token: 'org.springframework.security.authentication.AnonymousAuthenticationToken@9055e4a6: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@957e: RemoteIpAddress: 127.0.0.1; SessionId: q0k5u6clocpc; Granted Authorities: ROLE_ANONYMOUS'
[INFO] 2012-12-17 13:41:07,544 [btpool0-0] DEBUG org.springframework.security.web.FilterChainProxy - /ApplicationScaffold.html at position 5 of 7 in additional filter chain; firing Filter: 'SessionManagementFilter'
[INFO] 2012-12-17 13:41:07,544 [btpool0-0] DEBUG org.springframework.security.web.FilterChainProxy - /ApplicationScaffold.html at position 6 of 7 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
[INFO] 2012-12-17 13:41:07,544 [btpool0-0] DEBUG org.springframework.security.web.FilterChainProxy - /ApplicationScaffold.html at position 7 of 7 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
[INFO] 2012-12-17 13:41:07,544 [btpool0-0] DEBUG org.springframework.security.web.util.AntPathRequestMatcher - Checking match of request : '/applicationscaffold.html'; against '/applicationscaffold.html'
[INFO] 2012-12-17 13:41:07,544 [btpool0-0] DEBUG org.springframework.security.web.access.intercept.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /ApplicationScaffold.html; Attributes: [permitAll]
[INFO] 2012-12-17 13:41:07,544 [btpool0-0] DEBUG org.springframework.security.web.access.intercept.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.authentication.AnonymousAuthenticationToken@9055e4a6: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@957e: RemoteIpAddress: 127.0.0.1; SessionId: q0k5u6clocpc; Granted Authorities: ROLE_ANONYMOUS
[INFO] 2012-12-17 13:41:07,544 [btpool0-0] DEBUG org.springframework.security.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@5f8d13b8, returned: 1
[INFO] 2012-12-17 13:41:07,544 [btpool0-0] DEBUG org.springframework.security.web.access.intercept.FilterSecurityInterceptor - Authorization successful
[INFO] 2012-12-17 13:41:07,544 [btpool0-0] DEBUG org.springframework.security.web.access.intercept.FilterSecurityInterceptor - RunAsManager did not change Authentication object
[INFO] 2012-12-17 13:41:07,544 [btpool0-0] DEBUG org.springframework.security.web.FilterChainProxy - /ApplicationScaffold.html reached end of additional filter chain; proceeding with original chain
[INFO] 2012-12-17 13:41:07,544 [btpool0-0] DEBUG org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter - Opening JPA EntityManager in OpenEntityManagerInViewFilter
[INFO] 2012-12-17 13:41:07,544 [btpool0-0] DEBUG org.hibernate.impl.SessionImpl - opened session at timestamp: 13557480675
[INFO] 2012-12-17 13:41:07,545 [btpool0-0] DEBUG org.springframework.web.servlet.DispatcherServlet - DispatcherServlet with name 'securitytest' processing GET request for [/ApplicationScaffold.html]
[INFO] 2012-12-17 13:41:07,545 [btpool0-0] DEBUG org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Looking up handler method for path /ApplicationScaffold.html
[INFO] 2012-12-17 13:41:07,545 [btpool0-0] DEBUG org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Did not find handler method for [/ApplicationScaffold.html]
[INFO] 2012-12-17 13:41:07,545 [btpool0-0] DEBUG org.springframework.web.servlet.handler.SimpleUrlHandlerMapping - Matching patterns for request [/ApplicationScaffold.html] are [/**]
[INFO] 2012-12-17 13:41:07,545 [btpool0-0] DEBUG org.springframework.web.servlet.handler.SimpleUrlHandlerMapping - URI Template variables for request [/ApplicationScaffold.html] are {}
[INFO] 2012-12-17 13:41:07,545 [btpool0-0] DEBUG org.springframework.web.servlet.handler.SimpleUrlHandlerMapping - Mapping [/ApplicationScaffold.html] to HandlerExecutionChain with handler [org.springframework.web.servlet.resource.DefaultServletHttpRequestHandler@3e3bfa58] and 1 interceptor
[INFO] 2012-12-17 13:41:07,545 [btpool0-0] DEBUG org.springframework.web.servlet.DispatcherServlet - Last-Modified value for [/ApplicationScaffold.html] is: -1
[INFO] 2012-12-17 13:41:07,547 [btpool0-0] DEBUG org.springframework.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'securitytest': assuming HandlerAdapter completed request handling
[INFO] 2012-12-17 13:41:07,547 [btpool0-0] DEBUG org.springframework.web.servlet.DispatcherServlet - Successfully completed request
[INFO] 2012-12-17 13:41:07,547 [btpool0-0] DEBUG org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter - Closing JPA EntityManager in OpenEntityManagerInViewFilter
[INFO] 2012-12-17 13:41:07,547 [btpool0-0] DEBUG org.springframework.orm.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
[INFO] 2012-12-17 13:41:07,547 [btpool0-0] DEBUG org.springframework.security.web.access.ExceptionTranslationFilter - Chain processed normally
[INFO] 2012-12-17 13:41:07,547 [btpool0-0] DEBUG org.springframework.security.web.context.HttpSessionSecurityContextRepository - SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
[INFO] 2012-12-17 13:41:07,547 [btpool0-0] DEBUG org.springframework.security.web.context.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
[INFO] 2012-12-17 13:41:07,583 [btpool0-0] DEBUG org.springframework.security.web.FilterChainProxy - /applicationScaffold/C142D67E9948229BE2B28E2A99E7C59A.cache.html at position 1 of 7 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
[INFO] 2012-12-17 13:41:07,583 [btpool0-0] DEBUG org.springframework.security.web.context.HttpSessionSecurityContextRepository - HttpSession returned null object for SPRING_SECURITY_CONTEXT
[INFO] 2012-12-17 13:41:07,583 [btpool0-0] DEBUG org.springframework.security.web.context.HttpSessionSecurityContextRepository - No SecurityContext was available from the HttpSession: org.mortbay.jetty.servlet.HashSessionManager$Session:q0k5u6clocpc@1530548245\. A new one will be created.
[INFO] 2012-12-17 13:41:07,583 [btpool0-0] DEBUG org.springframework.security.web.FilterChainProxy - /applicationScaffold/C142D67E9948229BE2B28E2A99E7C59A.cache.html at position 2 of 7 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
[INFO] 2012-12-17 13:41:07,583 [btpool0-0] DEBUG org.springframework.security.web.savedrequest.DefaultSavedRequest - pathInfo: both null (property equals)
[INFO] 2012-12-17 13:41:07,583 [btpool0-0] DEBUG org.springframework.security.web.savedrequest.DefaultSavedRequest - queryString: both null (property equals)
[INFO] 2012-12-17 13:41:07,584 [btpool0-0] DEBUG org.springframework.security.web.savedrequest.DefaultSavedRequest - requestURI: arg1=/fooooooooo; arg2=/applicationScaffold/C142D67E9948229BE2B28E2A99E7C59A.cache.html (property not equals)
[INFO] 2012-12-17 13:41:07,584 [btpool0-0] DEBUG org.springframework.security.web.savedrequest.HttpSessionRequestCache - saved request doesn't match
[INFO] 2012-12-17 13:41:07,584 [btpool0-0] DEBUG org.springframework.security.web.FilterChainProxy - /applicationScaffold/C142D67E9948229BE2B28E2A99E7C59A.cache.html at position 3 of 7 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
[INFO] 2012-12-17 13:41:07,584 [btpool0-0] DEBUG org.springframework.security.web.FilterChainProxy - /applicationScaffold/C142D67E9948229BE2B28E2A99E7C59A.cache.html at position 4 of 7 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
[INFO] 2012-12-17 13:41:07,584 [btpool0-0] DEBUG org.springframework.security.web.authentication.AnonymousAuthenticationFilter - Populated SecurityContextHolder with anonymous token: 'org.springframework.security.authentication.AnonymousAuthenticationToken@9055e4a6: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@957e: RemoteIpAddress: 127.0.0.1; SessionId: q0k5u6clocpc; Granted Authorities: ROLE_ANONYMOUS'
[INFO] 2012-12-17 13:41:07,584 [btpool0-0] DEBUG org.springframework.security.web.FilterChainProxy - /applicationScaffold/C142D67E9948229BE2B28E2A99E7C59A.cache.html at position 5 of 7 in additional filter chain; firing Filter: 'SessionManagementFilter'
[INFO] 2012-12-17 13:41:07,584 [btpool0-0] DEBUG org.springframework.security.web.FilterChainProxy - /applicationScaffold/C142D67E9948229BE2B28E2A99E7C59A.cache.html at position 6 of 7 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
[INFO] 2012-12-17 13:41:07,584 [btpool0-0] DEBUG org.springframework.security.web.FilterChainProxy - /applicationScaffold/C142D67E9948229BE2B28E2A99E7C59A.cache.html at position 7 of 7 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
[INFO] 2012-12-17 13:41:07,584 [btpool0-0] DEBUG org.springframework.security.web.util.AntPathRequestMatcher - Checking match of request : '/applicationscaffold/c142d67e9948229be2b28e2a99e7c59a.cache.html'; against '/applicationscaffold.html'
[INFO] 2012-12-17 13:41:07,584 [btpool0-0] DEBUG org.springframework.security.web.access.intercept.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /applicationScaffold/C142D67E9948229BE2B28E2A99E7C59A.cache.html; Attributes: [hasRole('ROLE_USER')]
[INFO] 2012-12-17 13:41:07,584 [btpool0-0] DEBUG org.springframework.security.web.access.intercept.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.authentication.AnonymousAuthenticationToken@9055e4a6: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@957e: RemoteIpAddress: 127.0.0.1; SessionId: q0k5u6clocpc; Granted Authorities: ROLE_ANONYMOUS
[INFO] 2012-12-17 13:41:07,584 [btpool0-0] DEBUG org.springframework.security.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@5f8d13b8, returned: -1
[INFO] 2012-12-17 13:41:07,584 [btpool0-0] DEBUG org.springframework.security.web.access.ExceptionTranslationFilter - Access is denied (user is anonymous); redirecting to authentication entry point
[INFO] org.springframework.security.access.AccessDeniedException: Access is denied 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T13:42:26.013

纯 GWT 解决方案：

1.  **根本不使用** `http`元素（来自配置命名空间的 http 标签）
2.  定义您的 AuthenticationRpcService
3.  添加 AuthenticationRpcService.authenticate(user,password) 方法
4.  从 security-context.xml 注入 AuthenticationServiceImpl AuthenticationProvider bean
5.  将 AuthenticationRpcService.authenticate(user,password) 实现为：

    ```
    User user = new User(login, password, true, true, true, true, new ArrayList<GrantedAuthority>());
    Authentication auth = new UsernamePasswordAuthenticationToken(user, password,
            new ArrayList<GrantedAuthority>());
    try {
        auth = this.authenticationProvider.authenticate(auth);
    } catch (BadCredentialsException e) {
        throw new ClientSideBadCredentialsException(e.getMessage(), e);
    }
    SecurityContext sc = new SecurityContextImpl();
    sc.setAuthentication(auth);

    SecurityContextHolder.setContext(sc); 
    ```

6.  确保在处理每个 GWT RPC 调用期间执行 spring 安全过滤器链（**以确保将 SecurityContext 填充到 SecurityContextHolder 中**）。

7.  使用 @RolesAllowed({ "ADMIN_ROLE", "USER_ROLE" }) 注释保护所有业务服务
8.  准备您自己的可在客户端使用的 ClientSideAcessDeniedException
9.  在 spring AcessDeniedException 的情况下，将 ClientSideAcessDeniedException 传播到客户端
10.  在客户端通过 GWT.setUncaughtExceptionHandler 设置 UncaughtExceptionHandler
11.  在 UncaughtExceptionHandler 中检测 CustomAcessDeniedException 然后向用户显示错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:21:53.860

我发现使用 Spring Security 在 gwt 中可以保护的只是 RPC 调用，但就 gui 而言你不能。请记住，它们是 javascript，因此在安全配置中没有要定义的 url。这就是为什么所有示例都有 jsp 登录页面的原因。然后，您必须使用 userContext for frontend 来实现某种类型的客户端安全性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T21:49:35.647

您需要弄清楚为什么您的用户被视为匿名用户（stacktrace 中的第 77 行）。我想 Spring 然后发送另一个重定向（到登录），但 GWT 回调不知道如何处理 HTTP 302？

# javafx-2 - 滚动时在 javafx Web 视图中查找结束页面

> ID：13914549
> 
> 赞同：2
> 
> 时间：2012-12-17T12:51:46.717
> 
> 标签：javafx-2

我已经在 J​​avaFx2 中加载了本地 html 文件。我正在滚动网页视图页面。当我到达页面末尾时，我需要收到警报消息。

怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:06:21.660

由于您在 web 视图中，您可以使用[javascript](/questions/tagged/javascript "显示标记为“javascript”的问题")来执行此操作，将以下代码注入到加载的页面中：

```
setInterval(function() {
    var y = (window.pageYOffset !== undefined) ? window.pageYOffset : (document.documentElement || document.body.parentNode || document.body).scrollTop;
    y -= 12;
    var maxY = document.body.scrollHeight -  window.innerHeight;
    if (y == maxY)
    {
        alert('bottom');
    }
}, 200); 
```

这将检查您是否每 200 毫秒向下滚动到底部。请注意，`alert()`当前 JavaFX 2.x 中不提供标准 javascript（但计划在 3.0 版中使用）。你必须自己处理它：

```
webview.getEngine().setOnAlert(new EventHandler<WebEvent<String>>() {
        @Override
        public void handle(WebEvent<String> e)
        {
            System.out.println("Alert: " + e.getData());
        }
    }); 
```

`Alert: bottom`当滚动到底部时，这应该打印到标准输出。~~未测试。~~测试和工作。

**注意`y -= 12`**：这是为了说明水平滚动条是否可见。12 是滚动条的标准高度（因此，如果您使用 CSS 设置滚动条样式，则需要对其进行修改）。**此外，如果您不希望看到水平滚动条，则需要完全删除该行。**出于这个原因，我建议使用 CSS 手动禁用水平滚动条。

另外，在相关说明中，由于某种原因，如果您处于全屏状态`WebView`，则将`maxY`始终是`0`. 目前似乎没有解决方法

# flash-builder - 使用 flash builder 4.6 在 stagewebview 上放置一些东西

> ID：13914551
> 
> 赞同：1
> 
> 时间：2012-12-17T12:51:59.840
> 
> 标签：flash-builder, panel, displayobject, stagewebview

我正在使用 stagewebview > Flash Builder 4.6

我有一个 stagewebview，我在其中加载了一个 url。我有时想在 stagewebview 顶部显示一个幻灯片面板。我试过了，但是面板总是在stagewebview后面。我知道 stagewebview 不是显示对象，但是有谁知道我是否可以做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T08:18:01.383

我想我有答案，这有点诡计，但我认为这是唯一的方法

您需要为 stagewebview 拍照，将图片添加到舞台，隐藏真实的 stagewebview，然后您可以在图片顶部添加一些内容。

谢谢

# ruby-on-rails - 令人困惑的轨道路由

> ID：13914557
> 
> 赞同：0
> 
> 时间：2012-12-17T12:52:25.657
> 
> 标签：ruby-on-rails

在偶然发现 Michael Hartl 教程后，我无法弄清楚为什么会发生这种情况。

当我单击提交表单并期望失败时，呈现后的预期 url 应该是 '/signup' 但由于某些原因它是 '/users'

这是我的控制器

```
 def new
    @user = User.new
  end

  def show
    @user = User.find(params[:id])
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      redirect_to @user
    else
      render 'new'
  end 
```

这是我的路线

```
resources :users
match '/signup', to: 'users#new' 
```

首先，当我点击注册链接时，网址是

```
http://localhost:3000/signup 
```

然后提交失败这个网址是

```
http://localhost:3000/users 
```

谁能解释我为什么会这样？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:05:03.997

当您发布到 UsersController（从您的注册操作创建一个新用户）时，您正在调用该`#create`操作。如果您在该页面上查看源代码，您会看到表单操作是`/users`，表单方法是`POST`。因此，当您提交表单时，提出的请求是：

```
POST /users
(some data) 
```

如果保存失败，那么您在那里的创建操作只会呈现“新”模板。你不会被重定向到任何地方。`render :action => "new"`只是渲染`new`动作的模板——它实际上并不重定向到新动作，或者运行它的动作代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:00:42.643

根据rails 中的routes.rb 使用情况，`match`您的routes.rb 文件中的标记确定`controller/action`匹配时要到达的位置。

`user`所以在这里，您的注册网址与控制器->操作匹配`new`。但如果`new`操作失败，则 url**不是 /signup**而是`user`控制器的`new`函数。所以 url 就是这样显示的。希望我说得更清楚一些。

# objective-c - 在@"" 中打印双引号

> ID：13914558
> 
> 赞同：-2
> 
> 时间：2012-12-17T12:52:31.320
> 
> 标签：objective-c, ios, cocoa-touch, uilabel

> **可能重复：**
> [如何转义字符串中的双引号？](https://stackoverflow.com/questions/1352323/how-to-escape-double-quotes-in-string)

我需要在@"" 中打印一个“abc”

我当前的字符串是

```
[displayLbl setText:@"press stop"]; 
```

但是我需要：

```
[displayLbl setText:@"press "stop""]; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T12:53:07.753

```
[displayLbl setText:@"press \"stop\""]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T13:00:11.460

Roland Keesom 的回答当然是正确的。但您也可以考虑使用*印刷引号*，通常看起来更好：

```
[displayLbl setText:@"press “stop”"]; 
```

（您只需在键盘上找到它们 (-: )

# php - 获取特定时间之间存储的数据

> ID：13914562
> 
> 赞同：0
> 
> 时间：2012-12-17T12:53:04.957
> 
> 标签：php, html, mysql, database, oracle

我以这种格式（00:00:00）将时间存储在考勤表中。现在我需要找到存储在 09:00:00 之前的登录数据。

我正在使用此查询来查找数据。

```
SELECT user_name, 
       time_in 
  FROM attendance 
 WHERE user_name='Vignesh' 
  AND  time_in < 09:20:59 
```

这件事对我不起作用。有没有其他方法可以从数据库中获取 09:00:00 之前的数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T12:55:00.747

您需要将其括在引号中：

```
AND  time_in < '09:20:59'
               ^--------^--- single quote char 
```

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-literals.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-literals.html)

> MySQL 可以识别以下格式的[TIME值：](http://dev.mysql.com/doc/refman/5.5/en/time.html)
> 
> *   作为`'D HH:MM:SS'`格式的字符串。您还可以使用以下“宽松”语法之一：`'HH:MM:SS'`, `'HH:MM'`, `'D HH:MM'`, `'D HH'`, 或`'SS'`. 这里`D`代表天，可以有一个从 0 到 34 的值。
>     
>     
> *   作为`'HHMMSS'`格式中没有分隔符的字符串，前提是它作为时间有意义。例如，`'101112'`被理解为`'10:11:12'`，但是`'109712'`是非法的（它有一个无意义的微小部分）并且变成`'00:00:00'`。
>     
>     
> *   作为`HHMMSS`格式中的数字，前提是它作为时间有意义。例如，`101112`被理解为`'10:11:12'`。还可以理解以下替代格式：`SS`、`MMSS`或`HHMMSS`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T12:56:56.600

尝试这样做

```
 SELECT user_name, 
   time_in 
   FROM attendance 
 WHERE user_name='Vignesh' 
  AND  time_in < '09:20:59' 
```

编辑 ：

或者你也可以使用这个

```
 SELECT user_name,time_in
   FROM attendance 
   WHERE user_name='Vignesh' 
    AND startTime < TIME_FORMAT("00:00:00","%H:%i:%s") 
     AND endTime > TIME_FORMAT("05:00:00","%H:%i:%s") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T12:55:17.990

您可以使用以下语法获取两个日期之间的数据，

**“2011/02/25”和“2011/02/27”之间的日期**

对上述使用日期时间..它会工作....（时间戳）

或者像下面这样使用，

```
SELECT id FROM Parts WHERE (Time < EndTime) AND (Time > BeginTime) ORDER BY Time; 
```

# java - 样式化 Struts2 文本字段标签

> ID：13914564
> 
> 赞同：2
> 
> 时间：2012-12-17T12:53:06.333
> 
> 标签：java, css, forms, jsp, struts2

我有这个表格。

```
<s:form action="register">

      <s:textfield class = "formfield" name="userBean.username" label="User Name" />
      <s:textfield class = "formfield"  name="userBean.password" label="Password" />
      <s:textfield class = "formfield"  name="profileBean.firstName"  label ="First Name"/>  
      <s:textfield class = "formfield"  name="profileBean.lastName"  label="Last Name"  />
      <s:textfield class = "formfield"  name="profileBean.Age"  label="Age"  />

      <s:submit/>
</s:form> 
```

我想做的是通过css为其提供自定义样式，但问题是它没有被应用，解决方案是什么？我们的设计师将使用 css 为我们的表单设置样式，但是，如果我们在 struts 标签中转换他们的表单，则无法应用样式

我们的目标是将其样式设置为类似于您设置输入标签的样式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:27:08.427

我认为您应该使用该属性`cssClass`

例如`<s:textfield cssClass = "formfield" name="userBean.username" label="User Name" />`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T14:03:57.353

如另一个答案中所述，您必须使用`cssClass`instad of `class`，而`cssStyle`不是`style`.

如果您注意到 Struts2 组件的行为与标准 HTML 组件不同，那是由于[**Struts2 Themes 和 Templates**](http://struts.apache.org/2.3.4/docs/themes-and-templates.html)造成的。

默认主题是 XHTML；

例如，

当您在标签`label`上设置属性时`<s:textfield/>`，它将`<label/>`在标签之前创建 html 元素`<input="text"/>`。如果您不希望这样，您可以`theme="simple"`在您的`<s:textfield/>`或 在您中指定`<s:form/>`将设置应用于所有包含的元素。

# android - 内容提供者 Exa

> ID：13914571
> 
> 赞同：0
> 
> 时间：2012-12-17T12:53:19.123
> 
> 标签：android, android-contentprovider, android-contentresolver

嗨，我正在通过 Android 中的内容提供程序。我无法获得确切的代码示例。我用谷歌搜索了它，我找不到简单易懂的代码。请提前提供一些链接帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:59:03.893

在这个地方，您可以获得有关内容提供者所需的所有信息：http: [//developer.android.com/guide/topics/providers/content-providers.html](http://developer.android.com/guide/topics/providers/content-providers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:03:21.553

*ContentProvider 可以在应用程序内部用于访问数据。如果数据应该与另一个应用程序共享，则 ContentProvider 允许这样做。*

[内容提供者](http://developer.android.com/guide/topics/providers/content-providers.html)

[内容提供者基础](http://developer.android.com/guide/topics/providers/content-provider-basics.html)

[Android 教程：编写自己的内容提供程序](http://www.grokkingandroid.com/android-tutorial-writing-your-own-content-provider/)

[ContentProvider 用户演示](http://marakana.com/forums/android/examples/64.html)

[Android 内容提供者](http://www.androidcompetencycenter.com/2009/01/basics-of-android-part-iv-android-content-providers/)

# tomcat - 如何在 tomcat 中构建服务器级自定义错误页面？

> ID：13914575
> 
> 赞同：14
> 
> 时间：2012-12-17T12:53:31.013
> 
> 标签：tomcat

我在一台 Tomcat Web 服务器上部署了多个 Web 应用程序。对于所有部署的 Web 应用程序，如果在任何 Web 应用程序中发生 404 错误，我想显示相同的 404.jsp 页面。

一种方法是在每个 Web 应用程序的 web.xml 中放置一个 404 条目，并为 404.jsp 提供正确的位置。

有什么办法可以让所有的网络应用程序在 404 错误时显示 ROOT 的 404 页面？

谢谢，帕万

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-17T14:40:16.117

您可以将其添加到 $CATALINA_HOME/conf/web.xml

```
<error-page> 
    <error-code>404</error-code>
    <location>/error/404.html</location>
</error-page> 
```

并添加一个具有该页面的 webapp 并将回答下面的 URL`<location>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-06T12:06:01.357

1.  打开 conf/ 下的 web.xml

2.  转到页面底部。

为每个 http 错误代码添加这些行。

```
<error-page>
 <error-code>404</error-code>
 <location>/error.jsp</location>
 </error-page>
 <error-page>
 <error-code>500</error-code>
 <location>/error.jsp</location>
 </error-page> 
```

请参阅屏幕截图。

[![在此处输入图像描述](../Images/a1f065399057cc362d20d066a8485caa.png)](https://i.stack.imgur.com/D8uZm.png)

3.  创建一个微小的error.jsp

```
<html>

<body>

<h1>
    <center>The Page You looking for is not available, please connect with administrator.</center>
</h1>

</body>
</html>
```

参考截图

[![在此处输入图像描述](../Images/5850afdb787941ddd85a5876a3549926.png)](https://i.stack.imgur.com/YfvvM.png)

4.  将其部署到tomcat的ROOT文件夹中

请参阅随附的屏幕截图。

[![在此处输入图像描述](../Images/e82ef84cb106f69e4e2c105965010e88.png)](https://i.stack.imgur.com/yFgCz.png)

5 个结果。

[![在此处输入图像描述](../Images/c9d537aec00207659610c479483d3939.png)](https://i.stack.imgur.com/MjcKu.png)

# jquery - 使用 jquery 更改“n”行的可见性

> ID：13914577
> 
> 赞同：-1
> 
> 时间：2012-12-17T12:53:35.410
> 
> 标签：jquery

我有如下表，其中包含“n”行。

```
 <table>
    <tr><td>1</td></tr>
    <tr><td>2</td></tr>
    <tr><td>3</td></tr>
    <tr><td>4</td></tr>
    <tr><td>5</td></tr>
    <tr><td>6</td></tr>
    <tr><td>7</td></tr>
    <tr><td>8</td></tr>
    <tr><td>9</td></tr>
    <tr><td>10</td></tr>
</table>
    <span class="more">Show more</span> 
```

最初在页面加载时，我只想显示两行。如果我点击“更多”链接，我只想为每次点击显示或显示多 3 行。

如何使用 jquery 获取此信息。示例代码[在这里。](http://jsfiddle.net/Ce9UV/3/) 提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:09:25.733

首先用 css 隐藏除前两个 tr 之外的所有内容：

```
table tr {display:none;}
table tr:first-child, table tr:nth-child(2) {display:block}​ 
```

然后获取最后一个可见的 tr 的索引，并显示接下来的三个等。

```
$('.more')​.on('click', function() {
    var vis = $('table tr:visible').last().index();
    $('table tr').slice(vis, vis+4).show();
});​ 
```

[**小提琴**](http://jsfiddle.net/Ce9UV/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:59:07.043

`<tr>`您可以使用 CSS3选择器隐藏剩余部分`nth-child`：

```
​tr:nth-child(n+4) {
    display:none;
}​ 
```

然后在单击显示更多链接时使用 JQuery 来显示它们：

```
​$('.more')​.click(function() {
    $('tr').show();
});​ 
```

示例：http: [//jsfiddle.net/viralpatel/BNrKn/](http://jsfiddle.net/viralpatel/BNrKn/)

# sql - Oracle Number 数据类型转日期时间格式

> ID：13914579
> 
> 赞同：0
> 
> 时间：2012-12-17T12:53:40.803
> 
> 标签：sql, oracle, date, datetime

> **可能重复：**
> [Oracle current_timestamp 到秒的转换](https://stackoverflow.com/questions/5881235/oracle-current-timestamp-to-seconds-conversion)
> [将 Unixtime 转换为 Datetime SQL (Oracle)](https://stackoverflow.com/questions/10554405/convert-unixtime-to-datetime-sql-oracle)

我得到了一个数据库，其中日期时间/时间戳列已在 NUMBER 数据类型中定义。我应该使用什么 oracle 函数来获取日期时间？

前任。在我的表：Sample_Table 中，time_touched 列是用 oracle 数据类型 NUMBER 定义的。此列应该是日期时间/时间戳。当我查询数据库时，我得到了 1355218434,1355218851 等数字。这些是日期时间的表示。但是在查询中，我应该使用什么函数来显示日期时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:00:32.170

看起来它是一个 UNIX 时间戳（自纪元 1970-01-01 以来的秒数），例如 1355218434 代表 Tue, 11 Dec 2012 09:33:54 GMT（[请参见此处的转换器](http://www.epochconverter.com/)）

**编辑**：显然下面的示例仅适用于 MySQL，我认为它也适用于 Oracle，因为它所在的域但我错了。解决方案在这个 StackOverflow 问题的答案中：[Convert Unixtime to Datetime SQL (Oracle)](https://stackoverflow.com/questions/10554405/convert-unixtime-to-datetime-sql-oracle)

* * *

您可以使用该`FROM_UNIXTIME`函数来获得所需的内容，请参阅[http://docs.oracle.com/cd/E17952_01/refman-5.0-en/date-and-time-functions.html#function_from-unixtime](http://docs.oracle.com/cd/E17952_01/refman-5.0-en/date-and-time-functions.html#function_from-unixtime)以供参考。

尝试这样的事情（未经测试）：

```
SELECT FROM_UNIXTIME(time_touched) FROM Sample_Table 
```

* * *

您的问题与以下内容有些相关：

[https://forums.oracle.com/forums/thread.jspa?threadID=2473501&tstart=75](https://forums.oracle.com/forums/thread.jspa?threadID=2473501&tstart=75)

[将 Unixtime 转换为 Datetime SQL (Oracle)](https://stackoverflow.com/questions/10554405/convert-unixtime-to-datetime-sql-oracle)

# google-maps - 在新推出的谷歌地图应用程序中显示路线

> ID：13914580
> 
> 赞同：0
> 
> 时间：2012-12-17T12:53:43.567
> 
> 标签：google-maps

我正在寻找将用户从我们的应用程序重定向到谷歌地图应用程序以显示两个位置之间的路线的方法。目前苹果地图仅支持美国的路线，但我想为其他地区发布我的应用程序。

在苹果为 ios 推出谷歌地图应用程序前几天，我想在其中重定向我的用户。

现在我正在使用以下代码在苹果地图中重定向用户：

```
 NSString * myLocString = [NSString stringWithFormat:@"40.737893,-73.990173"];

    NSString * destString = [NSString stringWithFormat:@"40.733893,-73.993173"];
NSString* queryString = [NSString stringWithFormat:@"saddr=%@&daddr=%@",myLocString,destString];

NSString* searchQuery = nil;

searchQuery =  [queryString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

NSString* urlString = [NSString stringWithFormat:@"http://maps.apple.com/maps?%@",searchQuery];

[[UIApplication sharedApplication] openURL:[NSURL URLWithString:urlString]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:53:00.747

实现这一目标的简单方法：

> BOOL openurlflag=[[UIApplication sharedApplication] canOpenURL: [NSURL URLWithString:@"comgooglemaps://"]];
> 
> if (openurlflag==0)// 打开苹果地图 { NSString * myLocString = [NSString stringWithFormat:@"40.737893,-73.990173"];
> 
> ```
> NSString * destString = [NSString stringWithFormat:@"40.733893,-73.993173"];
> 
> NSString* queryString = [NSString stringWithFormat:@"saddr=%@&daddr=%@",myLocString,destString];
> 
> NSString* searchQuery = nil;
> 
> searchQuery =  [queryString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
> 
> NSString* urlString = [NSString stringWithFormat:@"http://maps.apple.com/maps?%@",searchQuery];
> 
> [[UIApplication sharedApplication] openURL:[NSURL URLWithString:urlString]];
>  } else if (openurlflag==1) // open google maps {
> NSString * myLocString = [NSString stringWithFormat:@"40.737893,-73.990173"];
> 
> NSString * destString = [NSString stringWithFormat:@"40.733893,-73.993173"];
> 
>         NSString* queryString = [NSString stringWithFormat:@"saddr=%@&daddr=%@&directionsmode=transit",myLocString,destString];
> 
> NSString* searchQuery = nil;
> 
> searchQuery =  [queryString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
> 
> NSString* urlString = [NSString stringWithFormat:@"comgooglemaps://?%@",searchQuery];
> 
> [[UIApplication sharedApplication] openURL:[NSURL URLWithString:urlString]]; } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:57:16.450

最后我得到了一个链接，您可以通过更改 URLScheme 来实现。

[https://developers.google.com/maps/documentation/ios/urlscheme](https://developers.google.com/maps/documentation/ios/urlscheme)

# c# - 如何在 SharpDevelop 4.2 中启动一个国际化的 WPF 项目？

> ID：13914581
> 
> 赞同：4
> 
> 时间：2012-12-17T12:53:45.830
> 
> 标签：c#, wpf, xaml, internationalization, sharpdevelop

我想创建一个软件，用户可以在其中选择多种语言。

首先，我想学习如何处理国际化，因为我以前从未这样做过。

作为 IDE，我使用 SharpDevelop 或#develop，但是你会拼写它。我想使用 C# 和 WPF，因为我现在也在学习 XAML/WPF。

所以我在 ShardDevelop 中创建了一个新的 WPF 项目。在主窗口上，我创建了一个 ComboBox 和一个 TextBlock。

ComboBox 得到两个条目：“德语”和“英语”。文本块应该显示“你好！” 或“Hello World！”，具体取决于所选的语言。

现在是我卡住的部分。我猜每种语言都有一个 XML/XAML 样式的单独文件（有意义）。这些文件在哪里，它们和它们的内容是如何加载的，以便加载所选语言的文本？

我发现了几个例子，但都是关于创建 Resource-DLL 并使用一些奇怪的程序将它们反编译回 csv 文件的东西......我不明白，没有更简单的方法吗？

* * *

我采取了下一步。TextBlock 的文本现在通过“{StaticResource Strings.MainForm.hwText}”加载。现在看起来像这样：

```
<TextBlock Text="{StaticResource Strings.MainForm.hwText}" /> 
```

我还为德语和英语创建了一个 ResourceDictionary，它们都定义了我在 TextBlock 中使用的键。

在 Application.Resources 部分中，我默认加载一个 ResourceDictionary。

现在的问题是：我如何在运行时“卸载”这个字典并用另一个替换它？

当然我使用 ComboBox 的 SelectionChange-Event，但是我在那里做什么呢？

* * *

问题解决了！！感谢 kmatyaszek

虽然我根据自己的需要更改了事件处理程序的代码：

```
Uri baseUri = new Uri(AppDomain.CurrentDomain.BaseDirectory);
Uri uri = new Uri(baseUri,"Languages\\lang."+((sender as ComboBox).SelectedItem as ComboBoxItem).Tag.ToString()+".xaml");
if(File.Exists(uri.LocalPath) || File.Exists((uri = new Uri(baseUri,"Languages\\lang.de-DE.xaml")).LocalPath)){
    ResourceDictionary dict = new ResourceDictionary();
    dict.Source = uri;
    this.Resources.MergedDictionaries.Add(dict);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T20:51:56.987

如果您创建了两个 ResourceDictionary 文件，您可以通过`DynamicResource`.

例子：

第一个资源文件（Lang.en-US.xaml）：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:system="clr-namespace:System;assembly=mscorlib">

    <system:String x:Key="Username">Username:</system:String>
    <system:String x:Key="Password">Password:</system:String>
    <system:String x:Key="close">Close</system:String>
    <system:String x:Key="login">Login</system:String>        
</ResourceDictionary> 
```

第二个资源文件（Lang.pl-PL.xaml）：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:system="clr-namespace:System;assembly=mscorlib">

    <system:String x:Key="Username">Login:</system:String>
    <system:String x:Key="Password">Hasło:</system:String>
    <system:String x:Key="close">Zamknij</system:String>
    <system:String x:Key="login">Zaloguj</system:String>
</ResourceDictionary> 
```

在应用程序资源中设置默认语言：

```
 <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Lang.en-US.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
 </Application.Resources> 
```

假设我们有如下 ComboBox：

```
<ComboBox Name="cbLang" Margin="2" SelectionChanged="cbLang_SelectionChanged" >
                <ComboBoxItem Content="English" Tag="en-US" />
                <ComboBoxItem Content="Polish" Tag="pl-PL" />
  </ComboBox> 
```

代码隐藏 SelectionChanged：

```
 private void cbLang_SelectionChanged(object sender, System.Windows.Controls.SelectionChangedEventArgs e)
        {
            ResourceDictionary dict = new ResourceDictionary();

            switch (((sender as ComboBox).SelectedItem as ComboBoxItem).Tag.ToString())
            {
                case "en-US":
                    dict.Source = new Uri("Lang.en-US.xaml", UriKind.Relative);
                    break;
                case "pl-PL":
                    dict.Source = new Uri("Lang.pl-PL.xaml", UriKind.Relative);
                    break;
                default:
                    break;
            }
            this.Resources.MergedDictionaries.Add(dict);
        } 
```

你可以像这样绑定：

```
 <TextBlock Text="{DynamicResource Username}" VerticalAlignment="Center" /> 
```

# php - Foreach 循环不正确

> ID：13914585
> 
> 赞同：-1
> 
> 时间：2012-12-17T12:54:10.823
> 
> 标签：php

在这个爬虫中，它搜索并爬取 bbc 主页的所有链接。

当它找到 BBC 新闻链接时，它会将它们插入到表格中。但是由于某种原因，当脚本运行时，它并没有像应有的那样将它们插入表中。

有任何想法吗？

```
 foreach ($links as $link) {
    $output = array(
"title"       => Titles($link), //dont know what Titles is, variable or string?
"description" => getMetas($link),
"keywords" => getKeywords($link), 
"link"        => $link
   );
  if (empty($output["description"])) {
  $output["description"] = getWord($link);
  }
 }
 foreach ($ouput as $value) {
 if (substr($value, 0, 26) == "http://www.bbc.co.uk/news/") {

  $data = '"' . implode('" , "', $value) . '"';
  $success = mysql_query( "INSERT INTO news_story (title, description , keywords, link)
  VALUES (" . $data . ")" );
  print_r($data);

}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T12:59:47.130

在您的第二个 foreach 循环中，您指定 $ouput 而不是 $output：

```
foreach ($ouput as $value) { 
```

应该：

```
foreach ($output as $value) { 
```

# javascript - 如何动画地显示/隐藏 div？

> ID：13914587
> 
> 赞同：1
> 
> 时间：2012-12-17T12:54:20.077
> 
> 标签：javascript

这是一个愚蠢的问题，但我无法弄清楚..

我想在单击链接时平滑地显示 div（向下滑动），并在单击页面的任何其他部分或滚动页面时隐藏它（向上滑动）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:55:36.240

如果您可以使用 jQuery，则可以使用**[`.slideDown('slow')`](http://api.jquery.com/slideDown/)**方法，例如。

用法：

```
$( 'a#myLink' ).click( function() {
    $( '#myDiv' ).slideDown( 'fast' );
}); 
```

请参阅[jsFiddle](http://jsfiddle.net/antyrat/UH4tD/)演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:01:57.383

使用 slideToggle，对您来说更轻松：

**[JSBIN 演示](http://jsbin.com/orutav/1/)**

**[滑动切换](http://api.jquery.com/slideToggle/)**

# selenium - 如何处理来自 xpath 的动态 id

> ID：13914588
> 
> 赞同：-1
> 
> 时间：2012-12-17T12:54:24.710
> 
> 标签：selenium, ide

我正在尝试通过此站点[http://www.barnesandnoble.com/](http://www.barnesandnoble.com/)探索 IDE ，只需录制和播放即可。

1.在搜索框中输入任何要搜索的文本， 2.十点击所有产品，选择书籍。

当我记录它的xpath如下

/html/body[@id='CDS']/div[@id='navContainer']/div[@id='bnnav2011']/div[@id='yui_3_3_0_1_1355746621091_93']/div[@id='bn -global-header']/div[@id='yui_3_3_0_1_1355746621091_92']/div[@id='yui_3_3_0_1_1355746621091_91']/form[@id='qs']/div[@id='yui_3_3_0_1_1355746621091_90']/div id='yui_3_3_0_1_1355746621091_89']/ul[@id='yui_3_3_0_1_1355746621091_88']/li[@id='yui_3_3_0_1_1355746621091_99']

但是当我们再次播放 ti 时，它会给出错误，[error] locator not found: Wehn i search for its xpath ，它的 chnaged 如下所示

/html/body[@id='CDS']/div[@id='navContainer']/div[@id='bnnav2011']/div[@id='yui_3_3_0_1_1355748592221_91']/div[@id='bn -global-header']/div[@id='yui_3_3_0_1_1355748592221_97']/div[@id='yui_3_3_0_1_1355748592221_96']/form[@id='qs']/div[@id='yui_3_3_0_1_135574859221_95']/div[@ id='yui_3_3_0_1_1355748592221_94']/ul[@id='yui_3_3_0_1_1355748592221_93']/li[@id='yui_3_3_0_1_1355748592221_98']

请注意，它的 ID 正在改变。

谁能告诉我如何处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:52:33.410

IDE 在生成 XPath 查询方面不是很聪明，事实上，没有一个自动化工具可以计算出可靠的 XPath 查询。为什么？原因是因为要生成 XPath 查询，它将从顶部（在`html`元素处）沿着树向下走，直到您正在与之交互的元素。

虽然这对很多事情都很好，但如果您的元素具有动态值（动态文本/ID/名称/类，或者即使它改变了位置），它永远不会起作用。

您需要寻找一种不同的方式来获取它，因此您必须覆盖 IDE 为您提供的内容。

查看源代码，他们为选择的任何内容赋予`ui-selectmenu-selected`. 因此，当页面加载时，“所有产品”列表项 ( `li`) 将具有该类，当您更改项目时，新项目将具有该类。

所以你可以使用这个 XPath：

```
//li[@class='ui-selectmenu-selected'] 
```

或者，这个 CSS 选择器：

```
li.ui-selectmenu-selected 
```

或者，使用此 XPath 专门获取“所有产品”项。它将使用实际菜单开始上一级，然后向下查找项目：

```
//ul[@class='ui-selectmenu']/li[text()='All Products' and not(@class='ui-selectmenu-hidden')] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:09:44.110

作为您问题的答案，您应该远离 id 并尝试使用 xpath 或 css 选择器，您可以在其中选择父级的第 n 个子级。由于您是 selenium 的新手，我想在这里指出我的笔记。- [http://selenium-testing-notes.blogspot.in/](http://selenium-testing-notes.blogspot.in/) 它将帮助您克服我陷入的许多其他陷阱。我最好的方法发现对选择器有帮助的方法是使用安装了 firepath 的 firebug。此设置可以帮助您验证 xpath 和 css 选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T05:10:36.630

我看到您基于该答案的问题是首先您需要在 Firefox 中添加 fire-path 。使用 firepath 您可以找到 xpath 定位器。这对你来说很简单

例子：

```
driver.find_element_by_xpath("see![image which i have attached in this question][1] the xpath path locator details").click() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T13:00:59.023

您可以尝试使用 xpath: Position。似乎ID一直在变化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-29T16:35:18.307

嗨，Arran，我可以使用您提供的 xpath （ xpath= //ul[@class='ui-selectmenu']/li[text()='All Products' 而不是（@class= 'ui-selectmenu-hidden')] 并获得可用列表。但随后无法从菜单中单击 Books 项。

# jsf-2 - JSF ViewScope - 在操作上返回 null 不会更新视图

> ID：13914594
> 
> 赞同：5
> 
> 时间：2012-12-17T12:54:53.993
> 
> 标签：jsf-2, view-scope

我在 ViewScope 模式下有一个托管 Bean。因此，当我从此托管 Bean 调用某些操作时，我的页面不会更新。我看到我的操作被很好地调用并返回 null（viewscope 工作流程正常）。

那么，我做错了什么？

如果我使用 Ajax 重新呈现页面，它可以正常工作。

编辑：

我的版本是：

JSF 2.1.14 和 Primefaces 3.4.1

我的代码：

```
@ManagedBean(name = "test")
@ViewScoped
public class TestMB implements Serializable {
   private String status;

   public String getStatus() { return this.status; }
   public void setStatus(String status) { this.status = status; } 

   public String changeStatus() {
      this.status = "ViewScope Works!";
      return null;
   }

} 
```

我的页面：

```
<!DOCTYPE HTML>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/template/ui.xhtml">
    <ui:define name="head">
    </ui:define>
    <ui:define id="teste" name="content">
        <h:form id="form">  
            <h:outputText id="status" value="OK?: #{test.status}" />
            <p:commandButton id="myAction" value="Do it!" action="#{test.changeStatus}"  />
        </h:form>  
    </ui:define>
</ui:composition> 
```

在我的屏幕上，状态变量不会改变。而且，是的..这个动作被称为OK。一些小费？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T16:00:53.373

您`<p:commandButton>`用于提交表单。它默认发送一个 ajax 请求。默认情况下它不会更新任何内容。因此，您正在观察的行为是完全可以预料的。有几种方法可以解决这个“问题”（引用，因为它实际上不是问题，而只是概念上的误解）：

1.  告诉它不要使用ajax。

    ```
    <p:commandButton ... ajax="false" /> 
    ```

2.  告诉它更新表格。

    ```
    <p:commandButton ... update="@form" /> 
    ```

3.  替换为默认不使用 ajax 的标准 JSF 组件。

    ```
    <h:commandButton ... /> 
    ```

请注意，这个具体问题与视图范围本身无关。使用另一个范围（包括请求范围）时，您会遇到完全相同的问题（使用完全相同的解决方案）。

# winforms - 如何在图片框中移动元素？

> ID：13914599
> 
> 赞同：1
> 
> 时间：2012-12-17T12:55:08.860
> 
> 标签：winforms, picturebox

是否有任何简单的方法来移动图片部分（使用`DrawImage`或创建的任何东西`DrawString`）？

我的聪明想法：覆盖`DrawImage(DrawString)`方法添加了将绘制图像的宽度、高度、左侧、顶部存储`DrawImage`到对象列表的能力（如果我使用方法，则可能是布尔变量'sizable'）。将函数“WhatToMove”附加到 PictureBox 的`MouseMove`事件，该事件遍历存储的矩形对象列表，检测矩形光标所在的位置，如果是可调整大小的矩形，则检测光标是否位于矩形的任何边框上，并将这些内容作为参数传递给`MouseDown`函数，当我点击。然后`MouseDown`函数会将新函数“MoverResizer”附加到`MouseMove`事件，该事件重绘带有移动或调整大小的图像部分的图片框，更新列表中正确的矩形对象，并将“WhatToMove”从`MouseMove`. 上`MouseUp`和离开图片框的事件分离“MoverResizer”并附加“WhatToMove”。

如果您认为这个想法可以实现，如果告诉我如何覆盖 DrawImage，您将真正帮助我。

我的愚蠢想法：

创建不带文本和带边框的标签，并将它们定位在 PictureBox 上正确的图像部分。然后用自己的事件使它们可拖动和变大。然后将标签的位置转换为图片部分的位置并重新绘制图片框。这很简单，但我认为没有上面的方法那么完美。

# macos - 获取真正的“最后打开”日期？

> ID：13914600
> 
> 赞同：3
> 
> 时间：2012-12-17T12:55:09.567
> 
> 标签：macos, cocoa, file-io

以下代码正在运行。预计会返回应用程序的上次发布日期，但是...

```
// e.g. entryPath = @"/Applications/Evernote.app"

struct stat output;
int ret = stat([entryPath fileSystemRepresentation], &output);
if (ret == 0)
{
    struct timespec accessTime = output.st_atimespec;
    NSDate * date1 = [[NSDate dateWithTimeIntervalSince1970:accessTime.tv_sec]
            dateWithCalendarFormat:nil timeZone:[NSTimeZone localTimeZone]];

    // and the 10.6+ version: (the result was always the same for me)
    NSDate * date2 = [[[[NSURL fileURLWithPath:entryPath]
            resourceValuesForKeys:[NSArray arrayWithObject:NSURLContentAccessDateKey]
                            error:nil]
            objectForKey:NSURLContentAccessDateKey]
            dateWithCalendarFormat:nil timeZone:[NSTimeZone localTimeZone]];
} 
```

它返回非常奇怪的日期，通常在今天或昨天凌晨 3:00-3:30 附近，当时我实际上正在睡觉。但在那之后，我在 Finder 中单击“获取信息”，它会显示真正的上次发布日期（通常小于`date1`和`date2`，但也可以相等）。如何以编程方式获取它？ ![Finder 获取信息：上次打开日期](../Images/4603d35b5ca1281856d708211e0ef3fc.png)

# c++ - 无限循环

> ID：13914601
> 
> 赞同：1
> 
> 时间：2012-12-17T12:55:16.050
> 
> 标签：c++, for-loop, infinite-loop

```
int i = 0;
double n = 1.24;
    for (; int(n) != n; i++) {
        n *= 10;
    } 
```

为什么会进入死循环？它不应该在两个循环后停止吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T12:59:01.130

`1.24`不能完全表示为 a `double`。如果你检查 的初始值`n`，你会发现它是`1.239999999999999991118215802998747...`

至于为什么循环永远不会停止，一旦`n`超过最大值的值`double`，它就会自动转换为`+Infinity`，这是一个特殊的浮点值。一旦你达到了那个点，就`n`停止改变，`int(n) != n`永远不会满足。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T12:58:38.043

因为 double 不是数字的精确表示，并且条件 int(n) == n 从未达到。阅读此[http://en.wikipedia.org/wiki/Floating_point](http://en.wikipedia.org/wiki/Floating_point)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T13:03:02.347

我试过了，它在两个循环后停止。我用过gcc。我将 int(n) 更改为 (int)n

由于某些舍入误差而发生无限循环，请尝试检查 (int)n 和 n 之间的差异

通常，不要使用 equal 来检查 double 是否相等。改为使用

> if (fabs(ab)<1e-10) //而不是 a==b

# php - 过滤数组，以便只保留以指定字符串开头的键

> ID：13914603
> 
> 赞同：0
> 
> 时间：2012-12-17T12:55:23.387
> 
> 标签：php, arrays, filter, callback

我有一个带有几个键的数组，我正在寻找一个回调来摆脱所有不符合特定条件的键（在这种情况下以“电子邮件”开头）。

我一直在寻找`array_walk()`这个，但无论如何，输出总是`1`. 我猜这个功能不是最适合这个任务，所以有人知道更好的方法吗？谢谢。

```
$test = array_walk($args, '_check_key_start_callback', 'email');

function _check_key_start_callback(&$value, $key, $str){

    return strncmp($key, $str, strlen($str));

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:13:51.637

我会这样做，使用`array_keys`和 lambda 函数：

```
$yourArray = array(
  'email' => 'some@email.com',
  'foo' => 'bar'
);

$allowedKey = "email";

$newArray = array_filter(array_keys($yourArray), function($key) use($yourArray, $allowedKey){

  return strncmp($yourArray[$key], $allowedKey, strlen($allowedKey)) === 1;

}); 
```

不管怎样，给猪涂口红。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:02:45.123

你必须去**array_map()**而不是**array_walk()** ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T21:52:22.350

这应该有效：

```
$args = array_intersect_key(
    $args,
    array_flip(array_filter(array_keys($args), function($key) {
        return preg_match('/^email/', $key);
    }))
); 
```

# javascript - Ajax 调用 restful WS 总是出错（fiddler 得到很好的响应）

> ID：13914604
> 
> 赞同：1
> 
> 时间：2012-12-17T12:55:25.243
> 
> 标签：javascript, jquery, iis-7, wcf-rest

我用两种简单的方法（一种 GET，另一种 POST）在 VS 2010 中制作了 Restfull WS。他们看着像是：

```
[ServiceContract]
public interface IService1
    {

    [OperationContract]
    [WebInvoke(Method = "POST", UriTemplate = "createUser")]
    string createUser();

    [OperationContract]
    [WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Xml, UriTemplate = "loginUser/{email}/{password}")]
    string loginUser(string email, string password);

    } 
```

这些方法的定义很简单：

```
public class Service1 : IService1
    {

 public string createUser()
        {
            return "Successful POST call !!! ";
        }

 public string loginUser(string email, string password)
        {
            return "Successful GET call !!! " + email + " - "+ password;
        }
  } 
```

我已将此服务发布到 IIS 并在浏览器中测试了我的方法（仅 loginUser (GET) 方法，无法通过浏览器测试 createUser (POST) 方法）和方法 (loginUser ) 工作正常。当我尝试通过 jQuery AJAX 调用方法时，我总是在没有任何通知的情况下收到错误调用。我检查了我的提琴手，并且有正确的反应。

我的 Ajax 方法：

```
$(document).ready(function(){

$("#button2").click(function(){

  $.ajax({
   type: "GET",                 
   url: "http://localhost/AutoOglasi/Service1.svc/loginUser/bole/bole",

   success: function (response) {
    alert("respons  "+response);
   },
       error: function (request, status, error) {
    alert(request.responseText+" -- " + status + " --- "+ error);
   }
     });                

});

}); 
```

我 mozila firebug 我部分 XML 我得到这个：

XML 解析错误：未找到元素位置：moz-nullprincipal:{ba25ef4a-f215-486e-b965-e70714c5af31} 第 1 行，第 1 列：^

我在这里做错了什么，我只是想不通，因为提琴手给了我很好的回应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:03:03.563

您声明`ResponseFormat = WebMessageFormat.XmlResponseFormat`并返回的不是 xml，而是一个字符串。它期望第一个字符是 < 但它是 S 这就是为什么它没有在位置 1 找到元素

# javascript - iframe onpagechange 事件？

> ID：13914607
> 
> 赞同：0
> 
> 时间：2012-12-17T12:55:41.467
> 
> 标签：javascript, iframe, hyperlink

众所周知，单击 iframe 中的普通链接会打开 iframe 中的相应页面。现在我的问题是是否有办法对 iframe 所在页面上打开的新页面做出反应。就像 iframe.onpagechange 事件一样，只要 iframe 中的页面发生更改，例如单击链接时，就会触发该事件。

有这样的事件吗？如果没有，您对可能的方法有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:06:00.240

在那种情况下，不，这是不可能的，在所有浏览器中都不可靠。

在更现代的浏览器中，它们确实允许您在 iframe 标记本身上使用“onload”事件，并且每次 iframe 重新加载时都会触发 - 即单击链接时。但是，旧浏览器不支持此功能，并且有许多网站旨在打破框架。如果站点超出您的框架，您将不会触发任何加载事件。最重要的是，因为您正在处理您的控制/域之外的 iframe，这几乎是您所能做的——告诉框架已加载——其他所有内容都将被阻止访问。

```
<iframe onload="iframeLoaded()" src="..." /> 
```

或者更好的方法是：

```
<iframe id="frame" src="..." />

<script>
  window.onload = function(){
    document.getElementById('frame').addEventListener('load', iframeLoaded);
  }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:51:36.637

正如我在[评论](https://stackoverflow.com/questions/13914607/iframe-onpagechange-event/13917429#comment19179768_13914607)中所说，*给 html 目标属性一个机会*。`open`在 javascripts函数的上下文中使用它。

**内嵌框架：HTML**

```
<a href="http://yckart.com">Link</a> 
```

**框架：JS**

```
$('a').on('click', function() {
    var target = this.href;
    window.open(target, "_parent");
    return false;
}); 
```

**页面：HTML**

```
<iframe src="http://fiddle.jshell.net/CGuHR/13/show"></iframe> 
```

**[小提琴](http://jsfiddle.net/Pzs2u/show/)**

# android - 具有上一页和下一页边界的 ViewPager

> ID：13914609
> 
> 赞同：150
> 
> 时间：2012-12-17T12:55:45.683
> 
> 标签：android, android-viewpager, viewflipper, viewanimator

我正在设计一个包含多个页面的视图。我希望上一页和下一页的边缘如下所示，并实现两指滑动以在页面之间切换。

![在此处输入图像描述](../Images/8473516f6abbaa6132a5f713e73c7258.png)

我尝试按照[此处](https://stackoverflow.com/questions/7725045/android-viewpager-with-previous-and-next-pages-visible)`ViewPager`的建议使用负页边距，但这仅显示屏幕上的一个边缘，而不是同时显示两个边缘。

或者，有什么方法可以将我的视图的一部分放置在屏幕外，然后对其进行动画处理，使其具有`ViewPager`类型效果。

我应该怎么做？谢谢 ！

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2014-05-26T12:37:58.133

我有一个类似的解决方案：

在 viewpager 上设置左右填充，例如 20dp。还要在 viewpager 上设置页边距，例如页面边距的一半。并且不要忘记禁用剪辑填充。

```
tilePager.setPadding(defaultGap, 0, defaultGap, 0);
tilePager.setClipToPadding(false);
tilePager.setPageMargin(halfGap); 
```

* * *

## 回答 #2

> 赞同：102
> 
> 时间：2012-12-21T20:29:31.253

[从关于这个主题的博客文章中](http://commonsware.com/blog/2012/08/20/multiple-view-viewpager-options.html)引用我自己的话：

> 第三种方法来自著名书籍 Android 食谱的合著者 Dave Smith。他采用了一个非常不同的方向，使用了一个自定义容器，该容器禁止儿童剪辑以一次显示多个页面。
> 
> 他[发布的示例代码](https://gist.github.com/8cbe094bb7a783e37ad1)显示了整个过程。他的容器 ( `com.example.pagercontainer.PagerContainer`) 包装了`ViewPager`并调用`setClipChildren(false);`自身，因此即使`ViewPager`聚焦在一个选定的页面上，其他坐标超出`ViewPager`边界的页面仍然可见，只要它们适合`PagerContainer`. 通过将 的大小设置`ViewPager`为小于`PagerContainer`，`ViewPager`可以将其页面调整为该大小，从而为其他页面留出空间。`PagerContainer`但是，需要在触摸事件方面提供一些帮助，因为`ViewPager`它只会在其自己的可见边界上处理滑动事件，而忽略任何侧面可见的页面。

![在此处输入图像描述](../Images/ba298cdbe632a5742da3bff2761aa8c5.png)

* * *

## 回答 #3

> 赞同：76
> 
> 时间：2013-04-02T19:47:27.340

1.  为整个项目视图设置左右填充。示例 xml (page_item.xml)：

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:paddingLeft="20dp"
    android:paddingRight="20dp"/>

    <TextView
        android:id="@+id/text1"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    </LinearLayout> 
    ```

2.  然后将负页边距设置为`PageView`等于 2*(previous view padding)

    ```
    int margin = (int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 20*2,     getResources().getDisplayMetrics());
    mViewPager.setPageMargin(-margin); 
    ```

3.  选修的。为第一项设置零左填充，为最后一项设置零右填充以隐藏空白边缘。您可以在`PageAdapter`或`Page`片段类中执行此操作。

* * *

## 回答 #4

> 赞同：49
> 
> 时间：2014-06-23T15:01:41.463

要显示左右页面的预览，请设置以下两个值

```
viewpager.setClipToPadding(false)
viewpager.setPadding(left,0,right,0) 
```

如果您需要 viewpager 中两个页面之间的空间，请添加 viewpager.setPageMargin(int)

[Android ViewPager - 在左右显示页面预览](https://stackoverflow.com/questions/10098040/android-viewpager-show-preview-of-page-on-left-and-right)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2018-02-23T11:46:39.503

如果有人仍在寻找解决方案，我已经自定义 ViewPage 以在不使用负边距的情况下实现它，请在此处找到示例项目[https://github.com/44kksharma/Android-ViewPager-Carousel-UI](https://github.com/44kksharma/Android-ViewPager-Carousel-UI) 它应该在大多数情况下都可以工作，但你仍然可以定义页边距 `mPager.setPageMargin(margin in pixel);`

[![](../Images/2b168a9e3884739f46f04aa6167d6cc1.png "在 imgflip.com 制作")](https://imgflip.com/gif/2557e5)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-11T04:45:40.120

从这里下载源代码（[带有上一页和下一页边界的 ViewPager](http://deepshikhapuri.blogspot.in/2017/07/viewpager-with-previous-and-next-page.html)）

**MainActivity.java**

```
package com.deepshikha.viewpager;

import android.content.Context;
import android.content.res.Configuration;
import android.os.Build;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.FragmentStatePagerAdapter;
import android.support.v4.view.ViewPager;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.util.DisplayMetrics;
import android.util.Log;
import android.util.SparseArray;
import android.view.ViewGroup;

import java.util.ArrayList;
import java.util.List;

public class MainActivity extends FragmentActivity {

    ViewPager pager;
    MyPageAdapter obj_adapter;
    String str_device;

    @Override

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        init();

    }

    private void init() {
        pager = (ViewPager) findViewById(R.id.viewpager);
        differentDensityAndScreenSize(getApplicationContext());
        List<Fragment> fragments = getFragments();
        pager.setAdapter(obj_adapter);
        pager.setClipToPadding(false);

        if (str_device.equals("normal-hdpi")){
            pager.setPadding(160, 0, 160, 0);
        }else if (str_device.equals("normal-mdpi")){
            pager.setPadding(160, 0, 160, 0);
        }else if (str_device.equals("normal-xhdpi")){
            pager.setPadding(160, 0, 160, 0);
        }else if (str_device.equals("normal-xxhdpi")){
            pager.setPadding(180, 0, 180, 0);
        }else if (str_device.equals("normal-xxxhdpi")){
            pager.setPadding(180, 0, 180, 0);
        }else if (str_device.equals("normal-unknown")){
            pager.setPadding(160, 0, 160, 0);
        }else {

        }

        obj_adapter = new MyPageAdapter(getSupportFragmentManager(), fragments);
        pager.setPageTransformer(true, new ExpandingViewPagerTransformer());
        pager.setAdapter(obj_adapter);
    }

    class MyPageAdapter extends FragmentPagerAdapter {

        private List<Fragment> fragments;

        public MyPageAdapter(FragmentManager fm, List<Fragment> fragments) {

            super(fm);

            this.fragments = fragments;

        }

        @Override

        public Fragment getItem(int position) {

            return this.fragments.get(position);

        }

        @Override

        public int getCount() {

            return this.fragments.size();

        }

    }

    private List<Fragment> getFragments() {

        List<Fragment> fList = new ArrayList<Fragment>();

        fList.add(MyFragment.newInstance("Fragment 1",R.drawable.imags));
        fList.add(MyFragment.newInstance("Fragment 2",R.drawable.image1));
        fList.add(MyFragment.newInstance("Fragment 3",R.drawable.image2));
        fList.add(MyFragment.newInstance("Fragment 4",R.drawable.image3));
        fList.add(MyFragment.newInstance("Fragment 5",R.drawable.image4));

        return fList;

    }

    public int differentDensityAndScreenSize(Context context) {
        int value = 20;
        String str = "";
        if ((context.getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_SMALL) {
            switch (context.getResources().getDisplayMetrics().densityDpi) {
                case DisplayMetrics.DENSITY_LOW:
                    str = "small-ldpi";
                    // Log.e("small 1","small-ldpi");
                    value = 20;
                    break;
                case DisplayMetrics.DENSITY_MEDIUM:
                    str = "small-mdpi";
                    // Log.e("small 1","small-mdpi");
                    value = 20;
                    break;
                case DisplayMetrics.DENSITY_HIGH:
                    str = "small-hdpi";
                    // Log.e("small 1","small-hdpi");
                    value = 20;
                    break;
                case DisplayMetrics.DENSITY_XHIGH:
                    str = "small-xhdpi";
                    // Log.e("small 1","small-xhdpi");
                    value = 20;
                    break;
                case DisplayMetrics.DENSITY_XXHIGH:
                    str = "small-xxhdpi";
                    // Log.e("small 1","small-xxhdpi");
                    value = 20;
                    break;
                case DisplayMetrics.DENSITY_XXXHIGH:
                    str = "small-xxxhdpi";
                    //Log.e("small 1","small-xxxhdpi");
                    value = 20;
                    break;
                case DisplayMetrics.DENSITY_TV:
                    str = "small-tvdpi";
                    // Log.e("small 1","small-tvdpi");
                    value = 20;
                    break;
                default:
                    str = "small-unknown";
                    value = 20;
                    break;
            }

        } else if ((context.getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_NORMAL) {
            switch (context.getResources().getDisplayMetrics().densityDpi) {
                case DisplayMetrics.DENSITY_LOW:
                    str = "normal-ldpi";
                    // Log.e("normal-ldpi 1","normal-ldpi");
                    str_device = "normal-ldpi";
                    value = 82;
                    break;
                case DisplayMetrics.DENSITY_MEDIUM:
                    // Log.e("normal-mdpi 1","normal-mdpi");
                    str = "normal-mdpi";
                    value = 82;
                    str_device = "normal-mdpi";
                    break;
                case DisplayMetrics.DENSITY_HIGH:
                    // Log.e("normal-hdpi 1","normal-hdpi");
                    str = "normal-hdpi";
                    str_device = "normal-hdpi";
                    value = 82;
                    break;
                case DisplayMetrics.DENSITY_XHIGH:
                    //Log.e("normal-xhdpi 1","normal-xhdpi");
                    str = "normal-xhdpi";
                    str_device = "normal-xhdpi";
                    value = 90;
                    break;
                case DisplayMetrics.DENSITY_XXHIGH:
                    // Log.e("normal-xxhdpi 1","normal-xxhdpi");
                    str = "normal-xxhdpi";
                    str_device = "normal-xxhdpi";
                    value = 96;
                    break;
                case DisplayMetrics.DENSITY_XXXHIGH:
                    //Log.e("normal-xxxhdpi","normal-xxxhdpi");
                    str = "normal-xxxhdpi";
                    str_device = "normal-xxxhdpi";
                    value = 96;
                    break;
                case DisplayMetrics.DENSITY_TV:
                    //Log.e("DENSITY_TV 1","normal-mdpi");
                    str = "normal-tvdpi";
                    str_device = "normal-tvmdpi";
                    value = 96;
                    break;
                default:
                    // Log.e("normal-unknown","normal-unknown");
                    str = "normal-unknown";
                    str_device = "normal-unknown";
                    value = 82;
                    break;
            }
        } else if ((context.getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_LARGE) {
            switch (context.getResources().getDisplayMetrics().densityDpi) {
                case DisplayMetrics.DENSITY_LOW:
                    str = "large-ldpi";
                    // Log.e("large-ldpi 1","normal-ldpi");
                    value = 78;
                    break;
                case DisplayMetrics.DENSITY_MEDIUM:
                    str = "large-mdpi";
                    //Log.e("large-ldpi 1","normal-mdpi");
                    value = 78;
                    break;
                case DisplayMetrics.DENSITY_HIGH:
                    //Log.e("large-ldpi 1","normal-hdpi");
                    str = "large-hdpi";
                    value = 78;
                    break;
                case DisplayMetrics.DENSITY_XHIGH:
                    // Log.e("large-ldpi 1","normal-xhdpi");
                    str = "large-xhdpi";
                    value = 125;
                    break;
                case DisplayMetrics.DENSITY_XXHIGH:
                    //Log.e("large-ldpi 1","normal-xxhdpi");
                    str = "large-xxhdpi";
                    value = 125;
                    break;
                case DisplayMetrics.DENSITY_XXXHIGH:
                    // Log.e("large-ldpi 1","normal-xxxhdpi");
                    str = "large-xxxhdpi";
                    value = 125;
                    break;
                case DisplayMetrics.DENSITY_TV:
                    //Log.e("large-ldpi 1","normal-tvdpi");
                    str = "large-tvdpi";
                    value = 125;
                    break;
                default:
                    str = "large-unknown";
                    value = 78;
                    break;
            }

        } else if ((context.getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_XLARGE) {
            switch (context.getResources().getDisplayMetrics().densityDpi) {
                case DisplayMetrics.DENSITY_LOW:
                    // Log.e("large-ldpi 1","normal-ldpi");
                    str = "xlarge-ldpi";
                    value = 125;
                    break;
                case DisplayMetrics.DENSITY_MEDIUM:
                    // Log.e("large-ldpi 1","normal-mdpi");
                    str = "xlarge-mdpi";
                    value = 125;
                    break;
                case DisplayMetrics.DENSITY_HIGH:
                    //Log.e("large-ldpi 1","normal-hdpi");
                    str = "xlarge-hdpi";
                    value = 125;
                    break;
                case DisplayMetrics.DENSITY_XHIGH:
                    // Log.e("large-ldpi 1","normal-hdpi");
                    str = "xlarge-xhdpi";
                    value = 125;
                    break;
                case DisplayMetrics.DENSITY_XXHIGH:
                    // Log.e("large-ldpi 1","normal-xxhdpi");
                    str = "xlarge-xxhdpi";
                    value = 125;
                    break;
                case DisplayMetrics.DENSITY_XXXHIGH:
                    // Log.e("large-ldpi 1","normal-xxxhdpi");
                    str = "xlarge-xxxhdpi";
                    value = 125;
                    break;
                case DisplayMetrics.DENSITY_TV:
                    //Log.e("large-ldpi 1","normal-tvdpi");
                    str = "xlarge-tvdpi";
                    value = 125;
                    break;
                default:
                    str = "xlarge-unknown";
                    value = 125;
                    break;
            }
        }

        return value;
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-08T12:29:15.457

前段时间我需要这样的功能并准备了一个`RecyclerView`与[PagerSnapHelper 一起](https://developer.android.com/reference/android/support/v7/widget/PagerSnapHelper.html)使用的小型库（在 v7 支持库的 25.1.0 版中添加）而不是经典`ViewPager`：

[MetalRecyclerPagerView](https://github.com/sandrfx/MetalRecyclerPagerView) - 您可以在那里找到所有代码以及示例。

它主要由一个类文件组成：[MetalRecyclerViewPager.java](https://github.com/sandrfx/MetalRecyclerPagerView/blob/master/library/src/main/java/com/sandrlab/widgets/MetalRecyclerViewPager.java)（和两个 xml：[attrs.xml](https://github.com/sandrfx/MetalRecyclerPagerView/blob/master/library/src/main/res/values/attrs.xml)和[ids.xml](https://github.com/sandrfx/MetalRecyclerPagerView/blob/master/library/src/main/res/values/ids.xml)）。

希望它可以帮助某人:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-27T15:59:11.907

**轮播 ViewPager 片段**

```
 ViewPager viewPager = findViewById(R.id.viewPager);
    TabPagerAdapter tabPagerAdapter = new TabPagerAdapter(this,getSupportFragmentManager());
    viewPager.setAdapter(tabPagerAdapter);
    // Disable clip to padding
    viewPager.setClipToPadding(false);
    // set padding manually, the more you set the padding the more you see of prev & next page
    viewPager.setPadding(40, 0, 40, 0);
    // sets a margin b/w individual pages to ensure that there is a gap b/w them
    viewPager.setPageMargin(20); 
```

[![轮播 ViewPager](../Images/b8db167963bb6dc0e329daaa15919997.png)](https://i.stack.imgur.com/7yxEg.jpg)

# prestashop - Prestashop importerosc 模块显示错误

> ID：13914611
> 
> 赞同：0
> 
> 时间：2012-12-17T12:55:55.260
> 
> 标签：prestashop, oscommerce

我正在将我的网站从 osc 迁移到 prestashop，但模块 importerosc 显示错误。

除类别外，其他所有内容均已成功导入。但是当我选择显示技术错误的类别模块时。

类别类扩展了 objectmodel 和 object model，显示 date_add 字段的 unsignedint。但是 ImportererOSC 模块没有从 oscommerce 数据库中获取 date_add 值，如果我更改查询，也没有任何变化。

技术错误

详细信息：致命错误：在 /home/xxxxxx/public_html/shop/classes/ObjectModel.php:790 中包含消息“Property Category->date_add is not valid”的未捕获异常“PrestaShopException” 堆栈跟踪：#0 /home/xxxxx/public_html /shop/classes/ObjectModel.php(265): ObjectModelCore->validateFields() #1 /home/xxxxxx/public_html/shop/classes/ObjectModel.php(551): ObjectModelCore->getFields() #2 /home/xxxxxx /public_html/shop/classes/Category.php(210): ObjectModelCore->update(false) #3 /home/xxxxxx/public_html/shop/modules/shopimporter/shopimporter.php(971): CategoryCore->update() # 4 /home/xxxxxx/public_html/shop/modules/shopimporter/shopimporter.php(533): shopimporter->updateCat() #5 /home/xxxxxx/public_html/shop/modules/shopimporter/ajax.php(148): shopimporter ->genericImport('Category', 数组,true) #6 {main} 在第 790 行的 /home/xxxxxx/public_html/shop/classes/ObjectModel.php 中抛出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:18:26.440

此问题可能是由于数据库 oscommerce 中的 iso 代码不正确造成的。你也可以尝试走这条路

```
Regards
$server = 'localhost'; // DATABASE SERVER
$db_user = ''; // DATABASE SERVER USER NAME
$db_password = ''; // DATABASE SERVER USER PASSWORD
$database = ''; // OLD OSCOMMERCE DATABASE
$databasenew = ''; // NEW PRESTASHOP DATABASE

// CONNECT TO DATABASE SERVER

$con = mysql_connect($server,$db_user,$db_password);
if (!$con)
{
  die('COULD NOT CONNECT TO DATABASE SERVER: ' . mysql_error());
}

$db1 = mysql_select_db($database, $con);
if (!$db1) {
    die ('COULD NOT SELECT OSCOMMERCE DATABASE: ' . mysql_error());
}

$result = mysql_query("SELECT * FROM customers");
echo '<h4>OSCOMMERCE > PRESTASHOP CUSTOMER IMPORT</h4>';

while($row = mysql_fetch_array($result)){

  // PREPARE ADDITIONAL FIELDS
  $date = date("Y-m-d H:m:s)");

  // random key for user
  $key = md5(uniqid(rand(), true));

  // customer newsletter y/n
  if($row['customers_newsletter'] == "1"){
     $newsletter = "1";
  } else {
     $newsletter = "0";
  }

  // SELECT NEW DATABASE

  $db2 = mysql_select_db($databasenew, $con);
  if (!$db1) {
    die ('COULD NOT SELECT PRESTASHOP DATABASE: ' . mysql_error());
  }

  $result1 = mysql_query("INSERT INTO `ps_customer` (
`id_customer` ,
`id_gender` ,
`id_default_group` ,
`firstname` ,
`lastname` ,
`email` ,
`passwd` ,
`last_passwd_gen` ,
`birthday` ,
`newsletter` ,
`ip_registration_newsletter` ,
`newsletter_date_add` ,
`optin` ,
`secure_key` ,
`note` ,
`active` ,
`is_guest` ,
`deleted` ,
`date_add` ,
`date_upd`
)

VALUES (

NULL , '1', '1', '".$row['customers_firstname']."', '".$row['customers_lastname']."', '".$row['customers_email_address']."', '1', '2000-05-27 15:53:08', NULL , '".$newsletter."', NULL , '".$date."' , '0', '".$key."', NULL , '1', '0', '0', '".$date."', '".$date."'

)");

// ADD USER TO GROUP - ( Default 1 )

$userid = mysql_insert_id();   
$result2 = mysql_query("INSERT INTO `ps_customer_group` (`id_customer` ,`id_group`)
VALUES ('".$userid."', '1')");
echo "SUCCESS!: " . $row['customers_firstname'] . " " . $row['customers_lastname'].'<br/>';

}

 ?> 
```

# groovy - 为什么 Gradle 中的配置和依赖不是 ExtensionAware？

> ID：13914613
> 
> 赞同：1
> 
> 时间：2012-12-17T12:56:06.197
> 
> 标签：groovy, build, gradle

根据这个页面， [http ://gradle.org/docs/current/dsl/org.gradle.api.plugins.ExtensionAware.html](http://gradle.org/docs/current/dsl/org.gradle.api.plugins.ExtensionAware.html)

Gradle 中的很多领域对象都支持扩展，这意味着可以通过 `ext.key = value`或其他方式在其上设置扩展属性

该页面说配置和依赖是扩展感知的，它们应该是，但它们不是，我看不到。

两个证据：

首先，这个代码片段应该在依赖对象上设置一个属性

```
dependencies {
    testCompile(group: 'junit', name: 'junit', version: '4.9') {
        provided = true
        ext.provided = true
    }
} 
```

但我无法从其他地方获得价值。

```
task test  { task ->
    task.project.configurations.testCompile.each { 
        println it
        println it.provided
        println it.ext.provided
        println it.hasProperty('provided')
    }
} 
```

什么都没有出现。

虽然当我设置时`provided=true`，Gradle 警告我动态属性已被弃用，但请使用扩展属性，顺便说一下，动态属性似乎也不起作用。

其次，根据 Gradle 的源代码，Configuration 和 Dependency 对象不是 ExtensionAware。

[https://github.com/gradle/gradle/blob/master/subprojects/core/src/main/groovy/org/gradle/api/artifacts/Dependency.java](https://github.com/gradle/gradle/blob/master/subprojects/core/src/main/groovy/org/gradle/api/artifacts/Dependency.java)

所以我错过了一些观点吗？或者这个功能目前还没有实现。我认为这是一个重要的特点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:26:11.590

`Configuration`并且`Dependency` *是* `ExtensionAware`。该接口是在运行时动态添加的。`project.configurations.testCompile.each`遍历已解析的文件。要遍历声明的依赖项，请使用`project.configurations.testCompile.(all)Dependencies.all`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-08T20:33:18.170

我知道这个问题真的很老，但我今天遇到了这个问题，使用复制和分离的配置，这些配置不是 ExtensionAware，即使我希望它们是并且认为它们会基于 OP 问题中引用的文档。这出现在我的谷歌查询的顶部，所以我想我会分享以防其他人遇到这个问题（没有足够的代表来回复 Peter Niederwieser 的回答）......彼得，这是一个错误（至少在文档中） ?)

```
$ cat build.gradle
apply plugin: 'base'

configurations {
    ericwashere
}

task test << {
    println configurations.ericwashere instanceof ExtensionAware
    println configurations.ericwashere.copy() instanceof ExtensionAware
    println configurations.detachedConfiguration() instanceof ExtensionAware
}

$ ./gradlew --version

------------------------------------------------------------
Gradle 2.11
------------------------------------------------------------

Build time:   2016-02-08 07:59:16 UTC
Build number: none
Revision:     584db1c7c90bdd1de1d1c4c51271c665bfcba978

Groovy:       2.4.4
Ant:          Apache Ant(TM) version 1.9.3 compiled on December 23 2013
JVM:          1.8.0_31 (Oracle Corporation 25.31-b07)
OS:           Windows 7 6.1 amd64

$ ./gradlew test
:test
true
false
false

BUILD SUCCESSFUL

Total time: 2.433 secs 
```

# sql - SQL 查询排除同一列的特定值

> ID：13914614
> 
> 赞同：0
> 
> 时间：2012-12-17T12:56:14.717
> 
> 标签：sql, ms-access

我想生成一个项目进度报告，其中几乎包括检查给定时间范围内已完成里程碑的百分比。（例如：A 公司今天有 10 个到期里程碑，但只有 8 个标记为已完成，因此它们的进度比计划慢 20%。）

这部分很简单，而且效果很好，但是在生成它之前，我确定项目计划是否获得批准。已批准的项目计划是具有里程碑 1 和 2 = 100 的项目计划。

您可以在下面看到我必须使用的表结构。

```
ID          Company     Project     Milestone   Date        Completion
170825240   Company A   Project 1   Milestone 1 29.10.12    100
170825311   Company A   Project 1   Milestone 2 29.10.12    0
170825242   Company A   Project 1   Milestone 3 05.11.12    100
170825173   Company A   Project 1   Milestone 4 17.12.12    0
170825104   Company B   Project 1   Milestone 1 29.10.12    100
170825035   Company B   Project 1   Milestone 2 29.10.12    100
170824966   Company B   Project 1   Milestone 3 05.11.12    100
170824897   Company B   Project 1   Milestone 4 17.12.12    0
170824828   Company C   Project 1   Milestone 1 29.10.12    100
170824759   Company C   Project 1   Milestone 2 29.10.12    100
170824690   Company C   Project 1   Milestone 3 05.11.12    0
170824621   Company C   Project 1   Milestone 4 17.12.12    0 
```

在此快照中，项目 1 被批准用于公司 B 和 C。

我面临的问题是如何在单个查询进度中组合仅过滤已批准的计划。我不想手动编写异常，因为我们正在讨论公司和项目的 1600 种组合。

有人知道怎么做吗？

谢谢！！！！

更新

```
SELECT S1.[Company], COUNT(S1.[Milestone]) AS ShouldBeMilestones

FROM Sheet1 AS S1

INNER JOIN Sheet1 S2
ON S2.[Company] = S1.[Company]
AND S2.[Project] = S1.[Project]
AND S2.[Milestone] = 'Milestone 1'
AND S2.[%compl#] = 100

INNER JOIN Sheet1 S3
ON S3.[Company] = S1.[Company]
AND S3.[Project] = S1.[Project]
AND S3.[Milestone] = 'Milestone 2'
AND S3.[%compl#] = 100

WHERE ((S1.[Task class] <> 'A') AND (S1.[Task class] <> 'B') AND (S1.[Task class] <> ''))
AND S1.[Milestone] NOT LIKE '0.*' AND S1.[Milestone] NOT LIKE '1.*'
AND S1.[Start] <= Now()

GROUP BY S1.[Company]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:58:44.127

添加两个`where`条件，每个条件都检查里程碑的完成情况：

```
from    Milestones m
where   exists
        (
        select  *
        from    Milestones m1
        where   m1.Company = m.Company
                and m1.Project = m.Project
                and m1.Milestone = 'Milestone 1'
                and m1.Completion = 100
        )
        and exists
        (
        select  *
        from    Milestones m2
        where   m2.Company = m.Company
                and m2.Project = m.Project
                and m2.Milestone = 'Milestone 2'
                and m2.Completion = 100
        ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:04:14.250

这也可以通过从上一个答案中借用的连接来实现；）

```
select m.* 
(from    Milestones m
inner join Milesones as m1 
      on m1.Company = m.Company
      and m1.Project = m.Project
      and m1.Milestone = 'Milestone 1'
      and m1.Completion = 100)
inner join Milestones as m2
        on m2.Company = m.Company
                and m2.Project = m.Project
                and m2.Milestone = 'Milestone 2'
                and m2.Completion = 100 
```

编辑应该解决一些 ms 访问问题，但不能老实说访问测试它我没有看到 () 围绕第一次加入的好处

# asp.net - ASP.NET：每次都在特定级别添加树节点

> ID：13914615
> 
> 赞同：0
> 
> 时间：2012-12-17T12:56:15.663
> 
> 标签：asp.net, treeview

我在页面上有一个树视图，我想在某些事件上更新/添加节点 - 例如，我有一个下拉列表，我有复选框列表等。树视图已经定义了级别 0 的节点。我只想在 dropdown_selectedIndexchanged 事件中添加一个节点作为节点 0 的子节点。为此，我正在这样做-

aspx 页面上的树形视图

```
<asp:TreeView ID="tv1" runat="server">
   <Nodes>
       <asp:TreeNode Text="parent" Value="" ShowCheckBox="False"></asp:TreeNode>
   </Nodes>
</asp:TreeView> 
```

.cs 页面上的代码

```
dropdown_SelectedIndexChanged(object sender, EventArgs e)
{
   tv1.Nodes[0].ChildNodes.Add(new TreeNode(dropdown.SelectedIndex.Text.Trim)));
} 
```

我看到了问题，但不确定如何解决。问题是 - 我想在 tv1 树视图的第 0 级添加一个且只有一个子节点。

我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:22:34.613

由于下拉菜单的“AutoPostBack”属性设置为 false，它可能无法正常工作。仅当您将此属性设置为 true 时，事件处理程序才会触发。以下代码对我有用。

```
 <asp:DropDownList ID="dropdown" runat="server" AutoPostBack="True" OnSelectedIndexChanged="dropdown_SelectedIndexChanged">
            <asp:ListItem>One</asp:ListItem>
            <asp:ListItem>Two</asp:ListItem>
        </asp:DropDownList>
    <asp:TreeView ID="tv1" runat="server">
   <Nodes>

       <asp:TreeNode Text="parent" Value="" ShowCheckBox="False"></asp:TreeNode>
   </Nodes>
</asp:TreeView> 
```

后面的代码（您可以直接或通过索引获取值）：

```
 protected void dropdown_SelectedIndexChanged(object sender, EventArgs e)
        {
            tv1.Nodes[0].ChildNodes.Clear();
            tv1.Nodes[0].ChildNodes.Add(new TreeNode(dropdown.SelectedValue));
        } 
```

# python - 如何在python中减去两个不同的字段日期？

> ID：13914617
> 
> 赞同：1
> 
> 时间：2012-12-17T12:56:19.240
> 
> 标签：python, date, python-datetime

我有一些问题，我使用python。

我有 2 个 var，比如

```
ads = fields.Date('Admission Date', help='Date of admission')
dds = fields.Date('Discharge Date', help='Date of discharge') 
```

我有一个 var 减去日期，

```
los=ads-dds 
```

但是，我有一些错误：

```
unsupported operand type(s) for -: 'datetime.datetime' and 'datetime.date' 
```

我应该怎么做才能得到 los 的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:59:32.113

这些字段之一是`date`对象，另一个是`datetime`对象。你必须决定你想要减法是什么*意思*。

例如，您可以将`date`对象变成`datetime`具有固定时间的对象，例如午夜：

```
los = ads - datetime.datetime.combine(dds, datetime.time.min) 
```

[`datetime.datetime.combine()`](http://docs.python.org/2/library/datetime.html#datetime.datetime.combine)接受一个`date`和一个`time`对象并创建一个新`datetime`对象；我们将其用作代表午夜[`datetime.time.min`](http://docs.python.org/2/library/datetime.html#datetime.time.min)的对象的简单快捷方式。`time`

或者，您可以将`datetime`对象变成`date`对象，然后减去：

```
los = ads.date() - dds 
```

该[`datetime.date()`方法](http://docs.python.org/2/library/datetime.html#datetime.datetime.date)仅返回对象的日期部分`datetime`。结果是一个`datetime.timedelta()`对象，表示两个日期之间的天数。

# javascript - 如何克隆具有给定类名的元素

> ID：13914618
> 
> 赞同：3
> 
> 时间：2012-12-17T12:56:25.193
> 
> 标签：javascript, jquery, html, dom, clone

我在`getElementById`需要克隆 div 元素时使用。

代码：

```
printHTML( document.getElementById("div_name").cloneNode(true)); 
```

现在我需要使用`getElementsByClassName`

CloneNode 在使用`getElementsByClassName`. 我怎样才能在这里输入班级名称？

谢谢

编辑：

当我尝试使用它时：

```
printHTML( $('.dataTables_scroll').clone(true) ); 
```

你可以看到我的功能：

```
function printHTML(clonedDive){
        var iframe = document.createElement("iframe");
        document.body.appendChild(iframe);
        iframe.contentWindow.onunload = function(){
        $(".DTTT_container").show("fast");
        $("#header_outer").show("fast");
        $(".ColVis.TableTools").show("fast");
        $("#footer").show("fast");
     };
      iframe.contentWindow.document.body.appendChild(clonedDive);
      iframe.contentWindow.print();

      document.body.removeChild(iframe); 
} 
```

我在这一行收到错误：

```
iframe.contentWindow.document.body.appendChild(clonedDive); 
```

这是一个错误描述：

```
Uncaught Error: NOT_FOUND_ERR: DOM Exception 8 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T12:59:14.923

`getElementsByClassName`获取一个节点列表，或者如果您愿意，可以获取一个包含元素的类数组对象，因为同一个类可以有多个元素。

`getElementsByClassName`即使只有一个元素与该类匹配，也会这样做。
您通常可以识别`s`in之类的方法`getElements`，这意味着它获取多个元素，即 nodeList。

`getElementById`只得到一个元素，因为 ID 是唯一的。

要获取节点列表中的第一个元素，请使用括号表示法，如下所示：

```
document.getElementsByClassName("div_name")[0].cloneNode(true); 
```

或者可以使用`querySelector`，它只获取第一个匹配元素

```
document.querySelector(".div_name").cloneNode(true); 
```

jQuery 解决方案是：

```
$('.div_name').clone(true); 
```

并迭代具有特定类名的元素，您将使用循环

```
var elems = document.getElementsByClassName("div_name");

for ( var i=0; i<elems.length; i++ ) {
    printHTML( elems[i].cloneNode(true) );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T12:58:40.867

由于*getElementsByClassName*返回的是一个对象的数组，所以必须使用 for 循环在它们之间进行迭代，如下：

```
 for (i = 0; i < document.getElementsByClassName("div_name").length; i++){  

printHTML( document.getElementsByClassName("div_name")[i].cloneNode(true));
} 
```

否则，如果您知道您拥有的元素的索引，我们就说 1

```
printHTML( document.getElementsByClassName("div_name")[1].cloneNode(true)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T12:58:32.410

这不行吗？：

```
printHTML( document.getElementsByClassName("class_name")[0].cloneNode(true)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T13:00:45.250

您可以遍历元素并一一克隆...

```
var e = document.getElementsByClassName('div');
for (var i = 0; i < e.length; i += 1) {
    // Clone e[i] here
    console.log(e[i].cloneNode(true));
} 
```

# android - Android：发回一个意图来分割丢失的数据

> ID：13914619
> 
> 赞同：0
> 
> 时间：2012-12-17T12:56:26.317
> 
> 标签：android, fragment

我不知道我做错了什么。好吧，我想将用户发送到谷歌地图并从片段中选择一个位置。但是在保存位置后，用户返回到片段，但保存的数据丢失了。

片段有这样的代码：

```
mapButton.setOnClickListener(new View.OnClickListener() {
    @Override
        public void onClick(View v) {
            Intent intent = new Intent(getActivity(), SlamMap.class);
            startActivityForResult(intent, 9998);
            getActivity().overridePendingTransition(R.anim.slide_in_left,
                    R.anim.slide_out_left);
        }
    }); 
```

并且片段像这样接收结果意图

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    switch (requestCode) {
    case (9998): {
        if (resultCode == Activity.RESULT_OK) {
            Log.i("RUN", data.toString());
            String lon = data.getStringExtra("LON");
            String lat = data.getStringExtra("LAT");
            setLocation(lon, lat);
        }
        break;
    }
    }
} 
```

好吧，MapActivity 中的代码处理数据如下：

```
@Override
public boolean onMenuItemSelected(int featureId, MenuItem item) {
    switch (item.getItemId()) {
    case R.id.addLoc:
        Intent resultIntent = new Intent();
        if (itemizedOverlay.getLat() != 0 && itemizedOverlay.getLon() != 0) {
            Log.i("RUN", "" + (long) (itemizedOverlay.getLon()));
            resultIntent.putExtra("LON",
                    String.valueOf((long) itemizedOverlay.getLon()));
            resultIntent.putExtra("LAT",
                    String.valueOf((long) itemizedOverlay.getLat()));
            setResult(Activity.RESULT_OK, resultIntent);
            finish();
            overridePendingTransition(R.anim.slide_out_right,
                    R.anim.slide_in_right);
        }
        return true;
    default:
        return super.onMenuItemSelected(featureId, item);
    }
} 
```

但正如我所说，onActivityResult 由 setResult 调用，但 Intent 没有关于我的两个字符串 LON 和 LAT 的信息。

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:05:04.580

代替：

```
String lon = data.getStringExtra("LON");
String lat = data.getStringExtra("LAT"); 
```

经过

```
String lon = data.getExtras().getString("LON");
String lat = data.getExtras().getString("LAT"); 
```

问候

# android - 使用 SharedPreferences.getAll() 调用 keySet()

> ID：13914621
> 
> 赞同：1
> 
> 时间：2012-12-17T12:56:33.490
> 
> 标签：android, map, call, sharedpreferences, keyset

我是 Java 和 Android 的新手，所以希望我的问题是有意义的（我想我知道我在问什么！）

我正在研究书中的一个例子，我有一个带有以下语句的查询：

```
String[] tags = savedSearches.getAll().keySet().toArray(new String[0]); 
```

savedSearches 是一个 SharedPreferences 对象。

`savedSearches.getAll()`返回一个允许调用的 Map `KeySet()`。我无法理解的是如何`KeySet()`调用。我的印象是，如果您要在代码中使用类/接口，那么您需要导入它或导入直接或间接扩展/实现进行调用的对象的类/接口，在这种情况下是参考到地图。

我正在处理的示例导入以下内容：

```
import java.util.Arrays;
import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.net.Uri;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.inputmethod.InputMethodManager;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TableLayout;
import android.widget.TableRow; 
```

我已经查看了 Java 和 Android API，但我看不到在上述任何一个中都实现了 Map（除非我错过了它！）所以原则上我不应该能够调用`KeySet()`. 那么如何进行此调用`KeySet()`呢？

希望以上内容具有某种意义：/任何有助于我理解这一点的正确方向的帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:00:41.157

`keySet()`是一种返回一组所有键的方法`Map(public Set<K> keySet ())`。所以，方法不能被导入。虽然 Map 没有导入，但是`getAll()`方法的返回类型是`Map<String, ?>`可以直接访问的。

如果你`getAll()`单独取喜欢，

```
Map<String, ?> map = preferences.getAll(); 
```

然后您将导入地图，否则您可以直接访问它。

# unit-testing - 映射集成测试 NHibernate Mapping

> ID：13914632
> 
> 赞同：1
> 
> 时间：2012-12-17T12:57:32.007
> 
> 标签：unit-testing, nhibernate, s#arp-architecture

这里的设置方法：

[NHibernate 单元测试](https://github.com/sharparchitecture/Northwind/blob/master/Solutions/Northwind.TestsUsingDevelopmentDatabase/Northwind.Data/NHibernateMaps/MappingIntegrationTests.cs)

使用 NHibernate.config：

```
[SetUp]
public virtual void SetUp()
{
    var mappingAssemblies = RepositoryTestsHelper.GetMappingAssemblies();
    this.configuration = NHibernateSession.Init(
    new SimpleSessionStorage(),
    mappingAssemblies,
    new AutoPersistenceModelGenerator().Generate(),
    "../../../Northwind.Web/NHibernate.config");
} 
```

这不是有点狡猾，因为它引入了外部依赖吗？我想也可以通过编程方式创建 NHibernate.config 内容并将其传递给正确的 Init 方法签名。我是正确的吗？有人在安装过程中这样做了吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:36:20.750

我已经成功地在我当前的项目中采用了类似的方法。首先它不是*单元*，而是*映射集成*测试，因为涉及外部资源即数据库，测试的执行时间和典型的技术问题：

1.  最好不要使用现有的数据库模式，而是每次使用带有*随机模式名称*的配置从 nHibernate 创建和导出它。这将消除两个或多个开发人员在同一模式上同时运行集成测试的可能性：

    var export = new SchemaExport(configuration); export.Execute（脚本：false，export：true，justDrop：false，connection：databaseConnection，exportOutput：null）；

2.  请记住在使用后清理此架构。很容易在几天内耗尽磁盘空间等

3.  考虑将此代码从 {[SetUp]} 移动到 {[FixtureSetUp]} 以节省测试夹具执行时间。与通常的内存单元测试执行时间相比，使用数据库需要大量时间

4.  由于时间和资源消耗，与通常的单元测试相比，开发人员/CI 服务器可以不那么频繁地触发这种测试。在我的项目中，它们仅安排在夜间构建或手动触发构建期间。

5.  您可以在运行时生成 nHibernate 配置，因此不需要“../../../Northwind.Web/NHibernate.config”

6.  在许多情况下，您可以使用 SQLite，而不是使用 SQL Server，但映射通常针对每个 SQL 引擎

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:32:26.123

您可以按照您提到的那样以编程方式执行它，或者只是在您的测试项目中创建一个不同的 NHibernate.Config 或者只是在您的项目中添加一个指向实际 nhibernate.config 的链接（右键单击项目，添加现有项目，然后找到 NHibernate.Config 而不是单击添加请单击添加旁边的箭头并选择“添加为链接”）。

我想说真正狡猾的部分是使用生产中的 NHibernate.Config 进行测试。

在我过去做过这样的事情的地方，我们将创建一个专门用于测试的数据库（通过 db 迁移工具）并将其用于我们的测试。通过使用创建的数据库详细信息为测试生成配置文件，或者生成与测试项目中的配置匹配的数据库。

# linux - mod_rewrite 不适用于子域

> ID：13914635
> 
> 赞同：0
> 
> 时间：2012-12-17T12:57:52.677
> 
> 标签：linux, apache, mod-rewrite

所以我在这件事上花了太多时间——有点绝望。

.ht 访问：

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^submit/?$ submit.php [NC,L] 
```

/etc/apache2/sites-available/applicapple：

```
<VirtualHost *:80>
    ServerAdmin support@perpetualcontrast.com

    DocumentRoot /var/www/applicapple
    ServerName applicapple.localhost
    <Directory /var/www/applicapple/>
            Options Indexes FollowSymLinks MultiViews
            RewriteEngine On
            AllowOverride All
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
            AllowOverride None
            Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
            Order allow,deny
            Allow from all
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost> 
```

submit.php 肯定存在。**在访问 applicapple.localhost/submit 时：**

在目录中使用 submit.php，我得到`The requested URL /submit was not found on this server.`

如果我删除 submit.php，我会得到`The requested URL /submit.php was not found on this server.`

如果我访问 localhost/applicapple 它会按预期工作。

有人能告诉我这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:36:19.090

看起来你忽略了'/'

试试这个

```
RewriteRule ^/submit/?$ submit.php [NC,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T03:52:54.783

问题是 Apache 中的 MultiViews 选项在目录中搜索具有相同名称的文件，因此如果 /submit.php 存在，/submit 会被解释为 /submit.php。我关闭了这个选项，它现在按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:48:06.777

你的 RewritRule 是

> RewriteRule ^/submit/?$ submit.php [NC,L]

我认为这不会按原样工作，因为它意味着'匹配/提交到 submit.php 所以如果 url 是**www.xyz.com/submit**它将被重定向为**www.xyz。*comsubmit.php***偏离课程这将导致“400 Bad request”，因为您的 apache 服务器不知道如何处理该请求。

我在我的电脑上测试了配置，只需编辑重写规则以重定向到 /submit.php 而不仅仅是 submit.php 就可以解决问题。

```
 Options +FollowSymLinks
 RewriteEngine On
 RewriteRule ^/submit/?$ /submit.php 
```

# android - 使用 Android 应用程序对 JSON 服务进行 Facebook 身份验证

> ID：13914639
> 
> 赞同：5
> 
> 时间：2012-12-17T12:58:09.257
> 
> 标签：android, web-services, security, facebook-access-token, facebook-android-sdk

我正在编写一个使用 JSON Web 服务的 android 应用程序，我想使用 Facebook 进行身份验证。

我不确定如何保护 Web 服务。

我应该使用从 Facebook 登录返回的身份验证令牌作为 Web 服务的密码吗？

我不确定令牌的存储位置以及如何检索它？另外，当新令牌过期时，如何使用新令牌更新 Web 服务？

我正在考虑只使用 api 密钥，但这意味着如果有人反编译 apk 并取出 api 密钥，他们可能会滥用 Web 服务。

欢迎任何建议。

我正在使用 PhoneGap，所以我想可以选择使用 cookie，但我不知道具体如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T10:24:13.277

Stack Overflow 讨论了两种方法

> 1>[使用 Facebook Connect 登录/创建帐户时，如何使用自己网站的 API 进行身份验证？](https://stackoverflow.com/questions/8949825/how-do-i-authenticate-with-my-own-sites-api-when-using-facebook-connect-for-log)
> 
> 2> [Facebook Connect 在个人 API 上进行身份验证](https://stackoverflow.com/questions/4817991/facebook-connect-to-authenticate-on-a-personal-api)

看看他们是否适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:18:28.070

> Should I use the authentication token returned from the Facebook login as the password to the web service?

I recommend using one of our supported SDK's to handle the login auth. You, as the developer, does not have to worry about storing passwords/tokens/etc. By using fb login, we handle all of that. I recommend reading more about using Facebook as a login [here](https://developers.facebook.com/docs/concepts/login/).

> I'm not sure on where the token is stored and how to retrieve it? Also how could I update the web service with the new token when it expires?

I would recommend reading [this doc](https://developers.facebook.com/roadmap/offline-access-removal/) to see how we recommend to retrieve and update access token when it expires.

# visual-studio-2012 - 使用 TypeScript 时 Visual Studio 没有响应

> ID：13914641
> 
> 赞同：11
> 
> 时间：2012-12-17T12:58:15.590
> 
> 标签：visual-studio-2012, typescript, web-essentials

我正在使用打字稿。我可以创建简单的打字稿样本并运行。当我创建复杂类型的代码时，Visual Studio 没有响应。

你们中的任何人都知道这个问题的原因吗？TaskManager 上的 Performance 选项卡大约占 35%。你们中的任何人都知道这个问题吗？

我实现的代码如下所示，

```
module myModule{
  export class myClass implements myInterface{
    // code to PartialUpdate, otalUpdate function declarations and 
    // extra properties and methods
  }
  export interface myInterface{
    PartialUpdate:void;
    TotalUpdate:void;
  }
} 
```

**注意：**在开始构建之前，Visual Studio 在创建代码本身时变得没有响应。

我使用了以下扩展：

*   微软网络开发工具，
*   Nuget 包管理器，
*   用于 VS 2012 的打字稿
*   VS Extensions for Windows Library for JavaScript 和
*   网络要点 2012

我的系统配置是

*   处理器：奔腾双核2.70GHZ
*   内存：4 GB
*   系统类型：64位

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T14:25:32.350

您使用的是最新版本的 Web Essentials 2012 吗？~~（撰写本文时为 2.0）~~和 TypeScript（[0.8.1.1](http://download.microsoft.com/download/2/F/F/2FFA1FBA-97CA-4FFB-8ED7-A4AE06398948/TypeScriptSetup.0.8.1.1.msi)）？我在 WE 和 TS 0.8.1 的早期组合中遇到了同样的问题，但它在最近的版本中得到了修复。

WebEssentials 可以配置为在保存和/或构建时编译。进入 VS2012`Tools > Options > Web Essentials > TypeScript`并尝试切换这些开关，看看是否有帮助。

禁用 Web Essentials，转到`Tools > Options`如上所述的，然后尝试关闭`Compile TypeScript on save`. 这样您就可以在不影响性能的情况下享受 WE 的所有好处

**更新**

WE 2012 刚刚切换到下一个版本：[2.1](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6?SRC=VSIDE)

# r - 格包R中的标题名称

> ID：13914655
> 
> 赞同：0
> 
> 时间：2012-12-17T12:58:50.873
> 
> 标签：r, lattice

我正在使用 R 绘制我的数据图。

我有两个文件：

```
1.
V1     V2
12.33  124.23
13.45  196.45
12.34  124.34
12.34  124.34

2.
V1 V2 
2  345.56
1  0.123
2  34.34
3  234.45 
```

我想根据第二个文件的第一列制作第一个文件的第一列的单独图表。那是在格子库中：

```
y=V1 of the first file
x=V2 of the second file
z=V1 of the second file 
```

使用此代码：

```
xyplot(y~x | z, pch=".") 
```

我已经获得了我想要的图，但是现在，我的问题是我想根据 z 写出每个图的数量，例如在图一的顶部，我想要 n=1。

我怎么能那样做？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:04:03.990

如果您将变量“z”转换为一个因子，`as.factor`那么 lattice 应该自动使每个图表的标题成为该级别的名称。

所以像

```
z <- as.factor(z)
xyplot(y~x | z, pch=".") 
```

应该将标题中的 z 更改为 z 代表的数字。

如果您想要“n = 1”等，那么更改级别的名称即可；

```
z <- as.factor(z)
levels(z)=c("n = 1","n = 2", "n = 3")  # and so on until you have named every level
xyplot(y~x | z, pch=".") 
```

# expression-blend - Visual Studio 2012 / Blend - 动画和 UI 状态

> ID：13914661
> 
> 赞同：0
> 
> 时间：2012-12-17T12:59:05.123
> 
> 标签：expression-blend, blend, blend-2012

我对用什么来编辑我的 WPF 前端的动画和 UI 状态部分感到非常困惑。Expression Blend 4 曾经是一个非常好的产品，但 MS在他们的产品政策中真的[让我失望了......](http://net-fx.blogspot.de/2012/12/current-and-future-microsoft-expression.html)

Blend Insider 博客前段时间[宣布了 Blend，如果我可以相信自己阅读了一张表格，那么此页面上的内容告诉我，.Net 4.5 应用程序的所有 Blend 功能都包含在 Visual Studio Professional 中。](http://blendinsider.com/technical/announcing-blend-sketchflow-preview-for-visual-studio-2012-2012-08-15/)

虽然我可以部分验证这一点（编辑控制模板等乍一看很好），但我真的想知道如何在 VS 2012 中编辑 UI 状态和关键帧/时间线动画？[似乎](https://stackoverflow.com/questions/10874005/how-can-i-design-an-animation-with-a-wpf-project-in-visual-studio-2012)我不是唯一一个想知道的人... VS 2012 Pro 附带的 Blend 版本仅适用于商店应用程序...另一方面，由于缺少功能，[冒烟...](https://stackoverflow.com/questions/12529238/blend-in-visual-studio-2012-missing-the-resources-window-i-used-to-use-in-ble)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:14:06.917

要在 VS2012 中启用对 WPF 应用程序的 Expression Blend 支持，您需要 VS2012 的更新 2。可在此处获得：

[http://www.microsoft.com/en-us/download/details.aspx?id=38188](http://www.microsoft.com/en-us/download/details.aspx?id=38188)

# python - 打印从 1 到 x 的数字，其中 x 在 python 中是无穷大

> ID：13914675
> 
> 赞同：2
> 
> 时间：2012-12-17T13:00:02.840
> 
> 标签：python, infinity

> **可能重复：**
> [Python Infinity - 任何警告？](https://stackoverflow.com/questions/1628026/python-infinity-any-caveats)
> [python无界xrange（）](https://stackoverflow.com/questions/7186336/python-unbounded-xrange)

我有一个关于 Python 的问题，您可以在其中编写一个简单的脚本，该脚本打印从 1 到*x*的数字序列，其中*x*是无穷大。这意味着，“ *x* ”可以是任何值。

例如，如果我们要打印一个数字序列，它将打印从 1 到“if”语句的数字，该语句表示在数字“10”处停止，并且打印过程将停止。

在我当前的代码中，我正在使用这样的“for”循环：

```
for x in range(0,100):
    print x 
```

我试图弄清楚如何将“范围”中的“100”替换为其他可以让循环继续连续打印序列而不指定值的东西。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-17T13:01:55.560

与[`itertools.count`](http://docs.python.org/2/library/itertools.html#itertools.count)：

```
import itertools
for x in itertools.count():
    print x 
```

用一个简单的`while`循环：

```
x = 0
while True:
    print x
    x += 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T13:03:17.273

`y`可以是一个数字。

```
for x in range(0,y):
    print x 
```

你不能有`y`无限大或负数。我认为以下示例将很有用。

```
>>> for y in range(0,):
...     print y
... 
>>> 
>>> for y in range(0,1000000000000000):
...     print y
... 
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
OverflowError: range() result has too many items
>>> for y in range(0,-1):
...     print y
... 
>>> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T17:14:22.270

你可以用发电机来做：

```
def infinity(start=0):
    x = start
    while True:
        yield x
        x += 1

for x in infinity(1):
    print x 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T13:04:56.257

```
x=0
while True:
  print x
  x = x +1 
```

# linux - 如果文件中存在另一个字符串，Linux bash脚本会更改一个字符串

> ID：13914682
> 
> 赞同：2
> 
> 时间：2012-12-17T13:00:37.740
> 
> 标签：linux, bash, shell

我需要一个 linux bash 脚本来循环所有文件的文件夹并检查其中是否有字符串，更改其中的另一个字符串。例如，我们检查文件是否为 AAAA，然后将 BBBB 替换为 CCCC，如果没有 AAAA，我们将 DDDD 更改为 EEEE。

我写了一些代码，但我不确定它们是否正常工作：

```
#!/bin/bash

PATH = /path/to/files/* # files has no extension

for file in $PATH; do
    if grep -q "AAAA" $file; then
        replace "BBBB" "CCCC" -- $file
    else
        replace "DDDD" "EEEE" -- $file
    fi
done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:16:48.573

一个单线人做你的工作：

```
for i in /path/to/files/* ; do if grep -q AAAA "$i" ; then sed -i 's/BBBB/CCCC/g' "$i" ; else sed -i 's/DDDD/EEEE/g' "$i" ; fi ; done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:32:09.183

有几点：`PATH`不是一个好的变量名，有关**变量**的信息，请参见[此处](http://www.linfo.org/path_env_var.html)文件，你也应该总是引用你的变量： **`PATH``replace``sed``sed -i 's/AAAA/BBBB/g'``AAAA``BBBB`**

 **```
#!/bin/bash

for file in /path/to/file/*; do       
    if grep -q "AAAA" "$file"; then
        sed -i 's/BBBB/CCCC/g' "$file"
    else
        sed -i 's/DDDD/EEEE/g' "$file"
    fi
done 
```

* * *

```
$ cat f1.txt 
AAAA
BBBB
DDDD

$ cat f2.txt
BBBB
DDDD

$ ./script.sh 

$ cat f1.txt
AAAA
CCCC
DDDD

$ cat f2.txt
BBBB
EEEE 
```

这将对目录产生问题，因此改进`find`了仅选择文件并现在处理带有空格的文件：

```
#!/bin/bash

find /path/to/file/ -maxdepth 1 -type f -name | while IFS= read -r file
do
    if grep -q "AAAA" "$file"; then
        sed -i 's/BBBB/CCCC/g' "$file"
    else
        sed -i 's/DDDD/EEEE/g' "$file"
    fi
done 
```**

# php - PHPMailer 类和 Gmail：已发送的电子邮件不会保留在 Gmail 的已发送目录中

> ID：13914688
> 
> 赞同：0
> 
> 时间：2012-12-17T13:00:47.073
> 
> 标签：php, gmail

我使用 PHPMailer 类发送电子邮件

[http://code.google.com/a/apache-extras.org/p/phpmailer/](http://code.google.com/a/apache-extras.org/p/phpmailer/)

已发送的电子邮件不会保留在 Gmail 的已发送目录中。

我哪里错了？

```
 try {
    $mail = new PHPMailer(true); //New instance, with exceptions enabled

    $body             = file_get_contents('ct.html');
    $body             = preg_replace('/\\\\/','', $body); //Strip backslashes

        $mail->IsSMTP(); // telling the class to use SMTP
        $mail->Host       = "smtp.gmail.com"; // SMTP server
        $mail->SMTPDebug  = 2;                     // enables SMTP debug information (for testing)
                                                   // 1 = errors and messages
                                                   // 2 = messages only
        $mail->SMTPAuth   = true;                  // enable SMTP authentication
        $mail->SMTPSecure = "ssl";                 // sets the prefix to the servier
        $mail->Host       = "smtp.gmail.com";      // sets GMAIL as the SMTP server
        $mail->Port       = 465;                   // set the SMTP port for the GMAIL server
        $mail->Username   = "*******@gmail.com";  // GMAIL username
        $mail->Password   = "*******";            // GMAIL password

        if($mail->SmtpConnect()){
            echo "SmtpConnect";
        }else{
            echo "ERROR";
        }

        $mail->IsSendmail();  // tell the class to use Sendmail

        $mail->AddReplyTo("*******@gmail.com", "*****");

        $mail->From = "*******@gmail.com";
        $mail->FromName = "*******";

        $to = "receiver@*******.***";

    $mail->AddAddress($to);

    $mail->Subject  = "First PHPMailer Message " . rand();

    $mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test
    $mail->WordWrap   = 80; // set word wrap

    $mail->MsgHTML($body);

    $mail->IsHTML(true); // send as HTML

    $mail->Send();
    echo 'Message has been sent.';
} catch (phpmailerException $e) {
    echo $e->errorMessage();
} 
```

如何将电子邮件存储在已发送目录中？

预先感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:09:14.963

[这](https://stackoverflow.com/questions/2264249/mails-sent-via-smtp-should-get-reflected-in-the-sent-folder-on-the-email-server)似乎与您的问题有关，并且似乎在使用 smtp 时它们没有被存储。但是，您可以密件抄送发送帐户，然后将这些邮件过滤到单独的文件夹中。

# javascript - 需要帮助在IE8中调试网站-

> ID：13914689
> 
> 赞同：-2
> 
> 时间：2012-12-17T13:00:51.827
> 
> 标签：javascript, internet-explorer, debugging, testing

我需要帮助检查网站在 IE 中是否正常工作。我通常使用 IETester 进行测试，但它现在对我来说经常崩溃，而且由于我需要实时查看网站，我不能依赖 Browserlab 等服务的屏幕截图。

网址：http: [//goo.gl/Fk29R](http://goo.gl/Fk29R)

我需要知道蓝色大按钮旁边的幻灯片是否正常工作。假设每张图像显示 4 秒，然后淡出 1.5 秒。共有三个图像，当它到达最后一个时，它应该从头开始循环。

任何人都可以检查它是否有效？如果不工作，也许检查控制台是否有错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:04:43.380

该网站适用于 IE9、IE8 和 IE7

您可能已经知道这一点，但您可以使用 Internet Explorer 9，按 F12 显示开发工具，然后通过选择“Broser 模式”在不同版本之间切换

# javascript - android.database.CursorWindowAllocationException：2048 kb 的光标窗口分配失败。......钛应用程序中的运行时错误

> ID：13914695
> 
> 赞同：0
> 
> 时间：2012-12-17T13:01:05.060
> 
> 标签：javascript, android, cursor, titanium, expandablelistview

我使用有时超过 500 个组的大型 ExpandableListView。android 在内部为每个组打开了一个游标。这会导致以下异常：

```
android.database.CursorWindowAllocationException: Cursor window allocation of 2048 kb failed. # Open Cursors=741 (# cursors opened by this proc=741) run time error in titanium app 
```

有没有办法规避这种崩溃？我唯一的想法是构建一个行为类似于可扩展列表的自定义列表。我不喜欢这种方法，因为它很费力。有任何想法吗？

谢谢 + 最好的问候 FL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:05:53.677

与其打开这么多游标，不如尝试只打开一个游标，但保留指向构成组项和子项的位置的指针。

# tsql - 通过SQL递归查询AD组成员

> ID：13914698
> 
> 赞同：7
> 
> 时间：2012-12-17T13:01:13.037
> 
> 标签：tsql, active-directory, sql-server-2008-r2, adsi, ldap-query

**背景**

我正在创建一些 SQL 来协助安全审计；这将从各种系统数据库和 Active Directory 获取安全信息，并将生成所有异常的列表（即帐户在一个系统中关闭但其他系统未关闭的情况。

**当前代码**

要获取属于安全组成员的用户列表，我运行以下 SQL：

```
if not exists(select 1 from sys.servers where name = 'ADSI') 
    EXEC sp_addlinkedserver 'ADSI', 'Active Directory Services 2.5', 'ADSDSOObject', 'adsdatasource'

SELECT sAMAccountName, displayName, givenName, sn, isDeleted --, lastLogonTimestamp --, lastLogon (Could not convert the data value due to reasons other than sign mismatch or overflow.)
FROM OPENQUERY(ADSI
, 'SELECT sAMAccountName, displayName, givenName, sn, isDeleted
FROM ''LDAP://DC=myDomain,DC=myCompany,DC=com''
WHERE objectCategory = ''Person''
AND objectClass = ''user'' 
AND memberOf = ''CN=mySecurityGroup,OU=Security Groups,OU=UK,DC=myDomain,DC=myCompany,DC=com''
')
order by sAMAccountName 
```

**问题/问题**

我希望这段代码能够递归地工作；即，如果用户是指定组成员的组的成员，则它们也应包括在内（对于完整的层次结构）。有谁知道如何通过 SQL 做到这一点？

**更新**

我现在已经解决了一些问题（与引用的问题无关，但我遇到的其他一些问题）。

*   lastLogon 抛出错误。这是因为服务器版本是 x86。使用 x64 数据库解决了这个问题。
*   lastLogon 作为数字返回。添加了一些代码将其转换为 DateTime2。
*   通过使 OpenQuery 本身动态化，我能够将组名从硬编码字符串中移出，因此在 OpenQuery 的上下文中，生成的字符串看起来是静态的。

..

```
--create linked server
if not exists(select 1 from sys.servers where name = 'ADSI')
begin
    --EXEC sp_addlinkedserver 'ADSI', 'Active Directory Services 2.5', 'ADSDSOObject', 'adsdatasource'
    EXEC master.dbo.sp_addlinkedserver 'ADSI', 'Active Directory Service Interfaces', 'ADSDSOObject', 'adsdatasource'
    EXEC master.dbo.sp_serveroption @server=N'ADSI', @optname=N'collation compatible',  @optvalue=N'false'
    EXEC master.dbo.sp_serveroption @server=N'ADSI', @optname=N'data access', @optvalue=N'true'
    EXEC master.dbo.sp_serveroption @server=N'ADSI', @optname=N'dist', @optvalue=N'false'
    EXEC master.dbo.sp_serveroption @server=N'ADSI', @optname=N'pub', @optvalue=N'false'
    EXEC master.dbo.sp_serveroption @server=N'ADSI', @optname=N'rpc', @optvalue=N'false'
    EXEC master.dbo.sp_serveroption @server=N'ADSI', @optname=N'rpc out', @optvalue=N'false'
    EXEC master.dbo.sp_serveroption @server=N'ADSI', @optname=N'sub', @optvalue=N'false'
    EXEC master.dbo.sp_serveroption @server=N'ADSI', @optname=N'connect timeout', @optvalue=N'0'
    EXEC master.dbo.sp_serveroption @server=N'ADSI', @optname=N'collation name', @optvalue=null
    EXEC master.dbo.sp_serveroption @server=N'ADSI', @optname=N'lazy schema validation',  @optvalue=N'false'
    EXEC master.dbo.sp_serveroption @server=N'ADSI', @optname=N'query timeout', @optvalue=N'0'
    EXEC master.dbo.sp_serveroption @server=N'ADSI', @optname=N'use remote collation',  @optvalue=N'true'
    EXEC master.dbo.sp_serveroption @server=N'ADSI', @optname=N'remote proc transaction promotion', @optvalue=N'true'
end

declare @path nvarchar(1024) = 'DC=myDomain,DC=myCompany,DC=com'
declare @groupCN nvarchar(1024) = 'CN=My Security Group,OU=Security Groups,OU=UK,' + @path
, @sql nvarchar(max)

--construct the query we send to AD
set @sql = '
SELECT sAMAccountName, displayName, givenName, sn, isDeleted, lastLogon
FROM ''LDAP://' + replace(@path,'''','''''') + '''
WHERE objectCategory = ''Person''
AND objectClass = ''user'' 
AND memberOf = ''' + replace(@groupCN,'''','''''') + '''
'

--now wrap that query in the outer query
set @sql = 'SELECT sAMAccountName, displayName, givenName, sn, isDeleted
, case     
    when cast([lastLogon] as bigint) = 0 then null
    else dateadd(mi,(cast([lastlogon] as bigint) / 600000000), cast(''1601-01-01'' as datetime2)) 
  end LastLogon
FROM OPENQUERY(ADSI, ''' + replace(@sql,'''','''''') + ''')
order by sAMAccountName'

--now run it
exec(@sql) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-08-14T14:31:40.160

虽然这是一篇旧帖子，但 Google 仍然喜欢将其放在结果的顶部，所以当我在同样的问题上苦苦挣扎时，我想发布我的发现/解决方案，感谢 Riverway 让我加入正确的轨道上。

创建存储过程：

```
CREATE PROCEDURE [dbo].[GetLdapUserGroups]
    (
    @LdapUsername NVARCHAR(max)
    )
AS
BEGIN
DECLARE @Query NVARCHAR(max), @Path NVARCHAR(max)

SET @Query = '
    SELECT @Path = distinguishedName
    FROM OPENQUERY(ADSI, ''
        SELECT distinguishedName 
        FROM ''''LDAP://DC=DOMAIN,DC=COM''''
        WHERE 
            objectClass = ''''user'''' AND
            sAMAccountName = ''''' + @LdapUsername + '''''
    '')
'

EXEC SP_EXECUTESQL @Query, N'@Path NVARCHAR(max) OUTPUT', @Path = @Path OUTPUT 

  SET @Query = '
    SELECT cn AS [LdapGroup]
    FROM OPENQUERY (ADSI, ''<LDAP://DOMAIN.COM>;
    (&(objectClass=group)(member:1.2.840.113556.1.4.1941:= ' + @Path + '));
    cn, adspath;subtree'')
    ORDER BY cn;
'

EXEC SP_EXECUTESQL @Query
END 
```

然后，只需传递用户名即可调用您的 SP：

```
DECLARE @UserGroup table (LdapGroup nvarchar(max))
INSERT INTO @UserGroup exec Datamart.dbo.GetLdapUserGroups @LdapUser 
```

然后，我使用哈希表将 AD 组与 SQL 数据以及最终用户应该看到的内容正确匹配。

```
DECLARE @RptPermissions table (ldapGroup nvarchar(max),scholarshipCode nvarchar(50),gender nvarchar(2))
INSERT INTO @RptPermissions VALUES('EMP_Enrollment_Admissions','ALL','MF') 
```

就我而言，我使用它来提取 SSRS 用户变量并将其传递到查询中，以根据 AD 组成员身份选择记录。

```
;WITH CTE_Permissions AS
(
    SELECT
        p.scholarshipCode
        ,p.gender
    FROM @UserGroup AS g
    JOIN @RptPermissions AS p ON
        g.ldapGroup = p.ldapGroup
) 
```

...稍后在查询中

```
JOIN CTE_Permissions AS p ON
         s.SCHOLARSHIP_ID = p.scholarshipCode
         OR p.scholarshipCode = 'ALL' 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-15T20:08:41.630

像这样？

```
--Get all members of a group
SELECT cn,AdsPath 
FROM OPENQUERY (ADSI, '<LDAP: dc="corp,dc=mycorp,dc=com">;(&(objectCategory=person)(memberOf:1.2.840.113556.1.4.1941:=CN=Administrators,CN=Builtin,DC=corp,DC=mycorp,DC=com));cn, adspath;subtree')
ORDER BY cn; 

--get all groups a user is a member of
SELECT cn,AdsPath
FROM OPENQUERY (ADSI, '<LDAP: dc="corp,dc=mycorp,dc=com">;(&(objectClass=group)(member:1.2.840.113556.1.4.1941:=CN=John Doe,OU=Developers,OU=Staff,DC=corp,DC=mycorp,DC=com));cn, adspath;subtree')
ORDER BY cn; 
```

有关递归搜索条件，请参阅[http://msdn.microsoft.com/en-us/library/aa746475(VS.85).aspx 。](http://msdn.microsoft.com/en-us/library/aa746475(VS.85).aspx)

# php - Zend Framework 2 - 最佳模块结构

> ID：13914701
> 
> 赞同：1
> 
> 时间：2012-12-17T13:01:20.690
> 
> 标签：php, module, zend-framework2

我已经工作`Django`了一段时间，但现在我必须切换到`Zend`.

我的问题是：当创建一个新模块时，即“后端”，我需要在这个后端管理例如 3 个不同的模型类。我是把所有文件都放在 Backend/src/Backend/... 中还是只是这样的结构：Backend/src/Class1/... Backend/src/Class2...

起初我认为模块类似于 Django 应用程序。但如果我进一步分叉它，它会像一个超级应用程序......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:06:08.997

假设您从问题的详细信息中确实是指 ZF2 而不是 ZF1：

类命名空间确定 src 文件夹内的路径（默认情况下）。您可以随意放置文件，但为了让自动加载器正常工作以及让其他人容易理解，遵循这个约定是明智的。

例子：

```
Class Namespace: Backend\Entity
Class Name: FirstEntity
Save Path: module/Backend/src/Backend/Entity/FirstEntity.php 
```

# java - Ant 脚本给类未找到异常 - 为什么？

> ID：13914702
> 
> 赞同：0
> 
> 时间：2012-12-17T13:01:23.123
> 
> 标签：java, ant, task, classnotfoundexception, dir

```
<project name="MyProject" default="run" basedir=".">
    <description>
        simple example build file
    </description>
  <!-- set global properties for this build -->
  <property name="src" location="./src"/>
  <property name="build" location="./build"/>
  <property name="lib" location="./lib"/>
  <property name="zmq.dir" location="/usr/local/share/java"/>

  <path id="classpath.compile">
      <fileset dir="${lib}">
          <include name="**/*.jar"/>
      </fileset>
      <pathelement location="${zmq.dir}/zmq.jar"/>
  </path>

  <path id="classpath.run">
     <path refid="classpath.compile"/>
      <fileset dir="${build}/classes">
          <include name="**/*.class"/>
      </fileset>
  </path>

  <target name="clean"
        description="clean up" >
    <delete dir="${build}"/>
  </target>

  <target name="init" depends="clean">
    <!-- Create the build directory structure used by compile -->
    <mkdir dir="${build}"/>
    <mkdir dir="${build}/classes"/> 
  </target>

  <target name="compile" depends="init"
        description="compile the source " >
    <property name="compile.classpath" refid="classpath.compile"/>
    <echo message="Compiling with classpath ${compile.classpath}"/>
    <javac srcdir="${src}" 
           destdir="${build}/classes">
        <classpath refid="classpath.compile"/>
    </javac>
  </target>

  <target name="run" depends="compile">
    <property name="run.classpath" refid="classpath.run"/>
    <echo message="Running with classpath ${run.classpath}"/>
    <java fork="true"
          dir="${build}/classes"
          classname="jgf.EMDR_Client"
          classpathref="classpath.run"/>
  </target>
</project> 
```

当我运行项目时`java.lang.ClassNotFoundException: jgf.EMDR_Client`

我回显类路径以进行编译和运行

编译是：

```
/Users/JGF/Projects/emdr/lib/json_simple-1.1.jar:/usr/local/share/java/zmq.jar 
```

运行是：

```
/Users/JGF/Projects/emdr/lib/json_simple-1.1.jar:/usr/local/share/java/zmq.jar:/Users/JGF/Projects/emdr/build/classes/jgf/EMDR_Client.class 
```

我的 JAVA_HOME 是：`/Library/Java/Home`

[ant java dir 属性](http://ant.apache.org/manual/Tasks/java.html)是不是很糟糕？

![在此处输入图像描述](../Images/360f0fae361cf94031347a4114ce1021.png)

![在此处输入图像描述](../Images/91c9b4bc8556b6335fee35e90233d777.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:34:27.587

您应该使用类路径标签，尽管路径也应该适用于恕我直言。但要正确使用。不要将类直接添加到路径中，而只添加 jar 或目录：

```
<path id="classpath.run">
  <path refid="classpath.compile"/>
  <pathelement location="${build}/classes" />
</path> 
```

那应该给你一个像这样的路径：

```
/Users/JGF/Projects/emdr/lib/json_simple-1.1.jar:/usr/local/share/java/zmq.jar:/Users/JGF/Projects/emdr/build/classes 
```

然后 Java 将首先查看 jars，然后查看目录`/Users/JGF/Projects/emdr/build/classes`。

为了找到类`jgf.EMDR_Client`，Java 将在名为`EMDR_Client.class`的子目录中查找名为 的文件`jgf`。所以它现在应该找到你的类。

同样：Classpath 元素不是类文件，而是目录或 JAR 文件（它们是压缩目录）

# c - 两种情况下指针的内存分配相同吗？

> ID：13914704
> 
> 赞同：-1
> 
> 时间：2012-12-17T13:01:27.587
> 
> 标签：c

两种情况下指针的内存分配是否相同

```
struct_datatype * p=NULL;

struct_datatype * p=malloc; 
```

除了从堆栈和堆分配内存？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:08:35.070

在第一种情况下，指针被初始化为指向地址 0，因此，如果您访问指针指向的数据，则会出现 0 指针异常，因为指针未指向可访问的内存位置。

第二种情况，p=(struct_datatype *)malloc(sizeof(struct_datatype)); 内存已分配并分配给指针，因此您可以通过 p 访问该内存，例如，如果 x 是结构中的 int 字段，则可以通过以下方式设置 x`p->x=123`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:07:52.813

这个问题不清楚你在问什么。

`struct_datatype * p=NULL;` 没有分配内存`p`。它指向没有分配的内存。

`struct_datatype * p=malloc();` 可能已经分配了一些内存，并且分配的内存的地址已分配给`p`. 如果 malloc 失败，NULL 将被分配给`p`.

注意：对于这两种情况，sizeof 都是`p`sizeof `struct_datatype*`。

注意：指针变量`p`将在编译时分配给*栈*中的内存，在这两种情况下都是 sizeof `struct_datatype*`。存储在指针中的地址`p`可能指向用户地址空间中可访问的任何有效内存地址。在`NULL`没有分配地址的情况下（并且 NULL 不是用户可访问的地址），但是当您这样做时`malloc`（如果成功），分配的内存地址将被分配给*堆*`p`空间中的指针，否则它将再次被分配给 NULL。

# c# - WIA 在 .NET C# 中保存图像

> ID：13914707
> 
> 赞同：2
> 
> 时间：2012-12-17T13:01:36.603
> 
> 标签：c#, .net, wia

我正在使用 WIA 以编程方式拍摄照片，然后此图像将被复制到我桌面上的特定文件夹中。一切都很顺利，除了储蓄部分。

```
void deviceManager_OnEvent(string EventID, string DeviceID, string ItemID)
    {

        for (int i = 1; i <= d.Items.Count; i++)
        {
            wiaImageFile = (WIA.ImageFile)d.Items[i].Transfer(FormatID.wiaFormatJPEG);
            wiaImageFile.SaveFile(Properties.Settings.Default.FolderNameRaw + "\\1.jpg");
            if (wiaImageFile != null)
                Marshal.ReleaseComObject(wiaImageFile);
        }
    } 
```

在这段代码中，我的 d.Items.Count 不断增加（例如 29 与实际计数完全不同），即使我的相机 SD 卡中只有 2 张照片。有没有办法将文件正确传输甚至剪切到我的电脑上？这是我收到的例外。 ![在此处输入图像描述](../Images/49c9f508765c0a55e8057932a2520d2d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T03:39:47.643

答案只是选择索引中的最后一个条目。就我而言，我只需要获取最新的照片就可以了。

```
if (EventID == WIA.EventID.wiaEventDeviceConnected)
        {
            Console.WriteLine("Connected: D5100");
        }
        if (EventID == WIA.EventID.wiaEventItemCreated)
        {
            if (d != null)
            {
                foreach (Property p in d.Properties)
                {
                    if (p.Name.Equals("Pictures Taken"))
                        Console.WriteLine("Taken");
                }

                wiaImageFile = (WIA.ImageFile)(d.Items[d.Items.Count].Transfer(FormatID.wiaFormatJPEG));
                wiaImageFile.SaveFile(Properties.Settings.Default.FolderNameRaw + "\\" + imageCount + ".jpg");
                imageCount++;
            }
        } 
```

这很好用。除了如果文件由于某种原因已经存在，您需要尝试捕获并修复问题。

# delphi - 如何在透明表单上创建具有清晰背景的位图？

> ID：13914710
> 
> 赞同：7
> 
> 时间：2012-12-17T13:01:50.457
> 
> 标签：delphi, graphics, delphi-xe2

我正在尝试创建一个完全透明的表单，在该表单上我绘制了一个具有 alpha 透明度的位图。问题是我不知道如何将位图的背景设置为 Alpha 0（完全透视）。

这是表单现在的样子（注意右上角不透明）。

![在此处输入图像描述](../Images/0532dcd8f8374b69550383a5c62ca932.png)

这是我希望它看起来的样子（右上角完全透明）：

![在此处输入图像描述](../Images/f3261130d197658468604548f6aa2935.png)

这是我的来源：

```
unit frmMain;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, ActiveX,

  GDIPObj, GDIPAPI, Vcl.StdCtrls, Vcl.ExtCtrls;

type
  TForm7 = class(TForm)
    Panel1: TPanel;
    Edit1: TEdit;
    Button1: TButton;
    Button2: TButton;
    procedure Button2Click(Sender: TObject);
  private
    function CreateTranparentForm: TForm;
  end;

var
  Form7: TForm7;

implementation

{$R *.dfm}

// Thanks to Anders Melander for the transparent form tutorial
// (http://melander.dk/articles/alphasplash2/2/)
function CreateAlphaBlendForm(AOwner: TComponent; Bitmap: TBitmap; Alpha: Byte): TForm;

  procedure PremultiplyBitmap(Bitmap: TBitmap);
  var
    Row, Col: integer;
    p: PRGBQuad;
    PreMult: array[byte, byte] of byte;
  begin
    // precalculate all possible values of a*b
    for Row := 0 to 255 do
      for Col := Row to 255 do
      begin
        PreMult[Row, Col] := Row*Col div 255;

        if (Row <> Col) then
          PreMult[Col, Row] := PreMult[Row, Col]; // a*b = b*a
      end;

    for Row := 0 to Bitmap.Height-1 do
    begin
      Col := Bitmap.Width;

      p := Bitmap.ScanLine[Row];

      while (Col > 0) do
      begin
        p.rgbBlue := PreMult[p.rgbReserved, p.rgbBlue];
        p.rgbGreen := PreMult[p.rgbReserved, p.rgbGreen];
        p.rgbRed := PreMult[p.rgbReserved, p.rgbRed];

        inc(p);
        dec(Col);
      end;
    end;
  end;

var
  BlendFunction: TBlendFunction;
  BitmapPos: TPoint;
  BitmapSize: TSize;
  exStyle: DWORD;
  PNGBitmap: TGPBitmap;
  BitmapHandle: HBITMAP;
  Stream: TMemoryStream;
  StreamAdapter: IStream;
begin
  Result := TForm.Create(AOwner);

  // Enable window layering
  exStyle := GetWindowLongA(Result.Handle, GWL_EXSTYLE);

  if (exStyle and WS_EX_LAYERED = 0) then
    SetWindowLong(Result.Handle, GWL_EXSTYLE, exStyle or WS_EX_LAYERED);

  // Load the PNG from a resource
  Stream := TMemoryStream.Create;
  try
    Bitmap.SaveToStream(Stream);

    // Wrap the VCL stream in a COM IStream
    StreamAdapter := TStreamAdapter.Create(Stream);
    try
      // Create and load a GDI+ bitmap from the stream
      PNGBitmap := TGPBitmap.Create(StreamAdapter);
      try
        // Convert the PNG to a 32 bit bitmap
        PNGBitmap.GetHBITMAP(MakeColor(0,0,0,0), BitmapHandle);

        // Wrap the bitmap in a VCL TBitmap
        Bitmap.Handle := BitmapHandle;
      finally
        FreeAndNil(PNGBitmap);
      end;
    finally
      StreamAdapter := nil;
    end;
  finally
    FreeAndNil(Stream);
  end;

  // Perform run-time premultiplication
  PremultiplyBitmap(Bitmap);

  // Resize form to fit bitmap
  Result.ClientWidth := Bitmap.Width;
  Result.ClientHeight := Bitmap.Height;

  // Position bitmap on form
  BitmapPos := Point(0, 0);
  BitmapSize.cx := Bitmap.Width;
  BitmapSize.cy := Bitmap.Height;

  // Setup alpha blending parameters
  BlendFunction.BlendOp := AC_SRC_OVER;
  BlendFunction.BlendFlags := 0;
  BlendFunction.SourceConstantAlpha := Alpha;
  BlendFunction.AlphaFormat := AC_SRC_ALPHA;

  UpdateLayeredWindow(Result.Handle, 0, nil, @BitmapSize, Bitmap.Canvas.Handle,
    @BitmapPos, 0, @BlendFunction, ULW_ALPHA);
end;

procedure CopyControlToBitmap(AWinControl: TWinControl; Bitmap: TBitmap; X, Y: Integer);
var
 SrcDC: HDC;
begin
  SrcDC := GetDC(AWinControl.Handle);
  try
    BitBlt(Bitmap.Canvas.Handle, X, Y, AWinControl.ClientWidth, AWinControl.ClientHeight, SrcDC, 0, 0, SRCCOPY);
  finally
     ReleaseDC(AWinControl.Handle, SrcDC);
  end;
end;

function MakeGDIPColor(C: TColor; Alpha: Byte): Cardinal;
var
  tmpRGB : TColorRef;
begin
  tmpRGB := ColorToRGB(C);

  result := ((DWORD(GetBValue(tmpRGB)) shl  BlueShift) or
             (DWORD(GetGValue(tmpRGB)) shl GreenShift) or
             (DWORD(GetRValue(tmpRGB)) shl   RedShift) or
             (DWORD(Alpha) shl AlphaShift));
end;

procedure TForm7.Button2Click(Sender: TObject);
begin
  CreateTranparentForm.Show;
end;

function TForm7.CreateTranparentForm: TForm;
const
  TabHeight = 50;
  TabWidth = 150;
var
  DragControl: TWinControl;
  DragCanvas: TGPGraphics;
  Bitmap: TBitmap;
  ControlTop: Integer;
  DragBrush: TGPSolidBrush;
begin
  DragControl := Panel1;

  Bitmap := TBitmap.Create;
  try
    Bitmap.PixelFormat := pf32bit;

    Bitmap.Height := TabHeight + DragControl.Height;
    Bitmap.Width := DragControl.Width;
    ControlTop := TabHeight;

    // <<<< I need to clear the bitmap background here!!!

    CopyControlToBitmap(DragControl, Bitmap, 0, ControlTop);

    DragCanvas := TGPGraphics.Create(Bitmap.Canvas.Handle);
    DragBrush := TGPSolidBrush.Create(MakeGDIPColor(clBlue, 255));
    try
      // Do the painting...
      DragCanvas.FillRectangle(DragBrush, 0, 0, TabWidth, TabHeight);
    finally
      FreeAndNil(DragCanvas);
      FreeAndNil(DragBrush);
    end;

    Result := CreateAlphaBlendForm(Self, Bitmap, 210);
    Result.BorderStyle := bsNone;
  finally
    FreeAndNil(Bitmap);
  end;
end;

end. 
```

...和 ​​DFM：

```
object Form7: TForm7
  Left = 0
  Top = 0
  Caption = 'frmMain'
  ClientHeight = 300
  ClientWidth = 635
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  PixelsPerInch = 96
  TextHeight = 13
  object Panel1: TPanel
    Left = 256
    Top = 128
    Width = 321
    Height = 145
    Caption = 'Panel1'
    TabOrder = 0
    object Edit1: TEdit
      Left = 40
      Top = 24
      Width = 121
      Height = 21
      TabOrder = 0
      Text = 'Edit1'
    end
    object Button1: TButton
      Left = 40
      Top = 64
      Width = 75
      Height = 25
      Caption = 'Button1'
      TabOrder = 1
    end
  end
  object Button2: TButton
    Left = 16
    Top = 16
    Width = 75
    Height = 25
    Caption = 'Go'
    TabOrder = 1
    OnClick = Button2Click
  end
end 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T02:19:23.443

You seem to have a misconception of how `UpdateLayeredWindow`/`BLENDFUNCTION` works. With `UpdateLayeredWindow`, you either use per-pixel alpha or a color-key. You're calling it with `ULW_ALPHA` as 'dwFlags' which means you intend to use per-pixel alpha, and you pass a fully opaque bitmap to your premultiplication routine (all pixels have alpha value of 255). Your premultiplication routine does not modify alpha channel, all it does is to calculate the red green and blue values according to the alpha channel of the passed bitmap. In the end, what you've got is a fully opaque bitmap with properly calculated r, g, b (also unmodified, since 255/255 = 1). All the transparency you will get is from the '210' that you assign to `SourceConstantAlpha` of `BlendFunction`. What `UpdateLayeredWindow` gives with these is a semi-transparent window, every pixel having the same transparency.

Filling a region of the bitmap, mentioned in the comments to the question, seems to work because the `FillRect` call overwrites the alpha channel. Pixels having an alpha of 255 now have an alpha of 0\. IMO, normally this should be considered to cause undefined behavior unless you fully understand how/why it works.

The question, in its current state, calls for an answer of using a color-key rather than per-pixel alpha, or cutting a region of the form (`SetWindowRgn`). If per-pixel alpha is to be used, it should be applied differently to parts of the bitmap. In the comments to the question, you mention the bitmap is to be scaled at some point. You've also got to be sure the scaling code preserves alpha channel, if it is used.

# jquery - 基于变量值的jQuery多个if语句简化？

> ID：13914713
> 
> 赞同：0
> 
> 时间：2012-12-17T13:01:56.277
> 
> 标签：jquery, banner, simplify

我已经为一些杂志问题建立了一个不断变化的横幅，它完全按照我想要的方式工作，但我想知道是否有比我用来检查“issueTotal”的所有 if 语句更好的选择，这似乎是一种回归实践但是这是目前我能想到的让它工作的唯一方法。

任何回复将不胜感激，在此先感谢。

jQuery

```
 var issueTotal = 0;

$(document).ready(function(){

$('#backIssue0').show();

$('.prevButton').hide();    

$('.nextButton').click(function(e) {
    e.preventDefault();

    issueTotal = issueTotal + 1;

    if(issueTotal > 0){
        $('.prevButton').show();
    }
    if(issueTotal < 4){
        $('.nextButton').show();
    }    
    if(issueTotal > 3){
        $('.nextButton').hide();
    }

    if(issueTotal == 0){
        $('#backIssue0').show();
    }
    if(issueTotal == 1){
        $('#backIssue0').hide();
        $('#backIssue1').show();
    }
    if(issueTotal == 2){
        $('#backIssue1').hide();
        $('#backIssue2').show();
    }
    if(issueTotal == 3){
        $('#backIssue2').hide();
        $('#backIssue3').show();
    }
    if(issueTotal == 4){
        $('#backIssue3').hide();
        $('#backIssue4').show();
    }

});

$('.prevButton').click(function(e) {
    e.preventDefault();

    issueTotal = issueTotal - 1;

    if(issueTotal > 1){
        $('.prevButton').show();
    }
    if(issueTotal < 1){
        $('.prevButton').hide();
    }
    if(issueTotal < 4){
        $('.nextButton').show();
    }    
    if(issueTotal > 3){
        $('.nextButton').hide();
    }

    if(issueTotal == 0){
        $('#backIssue0').show();
    }
    if(issueTotal == 1){
        $('#backIssue0').hide();
        $('#backIssue1').show();
    }
    if(issueTotal == 2){
        $('#backIssue1').hide();
        $('#backIssue2').show();
    }
    if(issueTotal == 3){
        $('#backIssue2').hide();
        $('#backIssue3').show();
    }
    if(issueTotal == 4){
        $('#backIssue3').hide();
        $('#backIssue4').show();
    }
});

 }); 
```

我为示例构建了一个 js fiddle：

[http://jsfiddle.net/huddds/5Z39B/](http://jsfiddle.net/huddds/5Z39B/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T13:07:40.090

你可以更换

```
if(issueTotal == 0){
    $('#backIssue0').show();
}
if(issueTotal == 1){
    $('#backIssue0').hide();
    $('#backIssue1').show();
}
if(issueTotal == 2){
    $('#backIssue1').hide();
    $('#backIssue2').show();
}
if(issueTotal == 3){
    $('#backIssue2').hide();
    $('#backIssue3').show();
}
if(issueTotal == 4){
    $('#backIssue3').hide();
    $('#backIssue4').show();
} 
```

有了这个：

```
$("#backIssue" + issueTotal).show();
if(issueTotal > 0) {
    $('#backIssue' + (issueTotal - 1)).hide();
} 
```

为其他人尝试类似的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:07:29.607

您可以将`issue`类属性附加到每个问题元素，然后在 prev-next 单击执行如下操作：

```
$('.issue').hide();
$('#backIssue' + issueTotal).show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T13:17:12.103

本节：

```
if(issueTotal < 4){
    $('.nextButton').show();
}    
if(issueTotal > 3){
    $('.nextButton').hide();
} 
```

有点尴尬。只有其中一个条件为真（如果您使用整数，它不能小于 4 并且大于 3），所以您不应该使用两个 if 语句；单个`if-else`语句将获得相同的结果并且更具可读性。你可以这样做：

```
$('.nextButton').toggle(issueTotal <= 3); 
```

`issueTotal`如果小于或等于 3 ，这将显示所有匹配的元素（相同，`< 4`但至少对我来说更有意义），否则它将隐藏它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T13:21:08.697

这是我的建议。**注意**这是完整的代码

我隐藏 prevbutton 默认并将 class="issue" 添加到 div 并使用此通用代码

[演示](http://jsfiddle.net/mplungjan/TfCcN/)

```
var issueTotal = $(".issue").size(); // or hardcode 5 if you must
var currentIssue=0;

$('#backIssue'+currentIssue).show(); // show initial cover

$('.nextButton, .prevButton').click(function(e) {
    e.preventDefault();

    $('#backIssue'+currentIssue).hide(); // hide current cover 
    currentIssue+=(this.className=="prevButton"?-1:1); // back or forward?

    $('.prevButton').toggle(currentIssue > 0); // show previous or not
    $('.nextButton').toggle(currentIssue <  issueTotal-1); // show next or not

    $('#backIssue'+currentIssue).show(); // show current issue
}); 
```

# blackberry - 通过蓝牙将任何硬件设备与我的黑莓设备连接？

> ID：13914720
> 
> 赞同：0
> 
> 时间：2012-12-17T13:02:07.703
> 
> 标签：blackberry, bluetooth

我正在开发一个应用程序，我需要通过 BLUETOOTH 将硬件设备与我的 BB 设备连接起来。

在 Android 中，我在一些示例应用程序的帮助下完成了这项工作。现在我正在寻找这个BB。请建议我，如果我们有任何示例应用程序需要帮助，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:22:57.897

您在这里：[BlackBerry Java Application Bluetooth - 示例应用程序概述](http://docs.blackberry.com/en/developers/deliverables/7719/index.jsp?name=Bluetooth%20Sample%20Application%20-%20Sample%20Application%20Overview%20-%20BlackBerry%20Java%20Development%20EnvironmentNo%20Info&language=English&userType=21&category=Java%20Sample%20Apps&subCategory=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:35:17.767

另一个帮助我的链接是：

[http://docs.blackberry.com/en/developers/deliverables/11938/Use_a_Bluetooth_serial_port_connection_508963_11.jsp](http://docs.blackberry.com/en/developers/deliverables/11938/Use_a_Bluetooth_serial_port_connection_508963_11.jsp)

编辑：很少有更多有用的链接 [http://supportforums.blackberry.com/t5/Java-Development/Bluetooth-Device-Discovery-and-Pairing/ta-p/446881](http://supportforums.blackberry.com/t5/Java-Development/Bluetooth-Device-Discovery-and-Pairing/ta-p/446881)

[http://www.blackberry.com/developers/docs/5.0.0api/javax/bluetooth/DiscoveryListener.html](http://www.blackberry.com/developers/docs/5.0.0api/javax/bluetooth/DiscoveryListener.html)

# wcf - 通过 https 使用 WCF 服务

> ID：13914724
> 
> 赞同：0
> 
> 时间：2012-12-17T13:02:21.470
> 
> 标签：wcf, authentication, https, ssl-certificate, x509certificate

我需要使用通过 https 连接公开的 Web 服务，该服务由给我证书 (.pfx) 和密码的客户端管理，所以我需要对该服务调用一个操作但是我在尝试时遇到了一些问题它。

也许我没有正确创建客户端和服务之间的 ssl 连接，我将展示我的 web.config 和一段调用服务的代码

`web.config`：

```
 <configuration>
  <system.serviceModel>
    <behaviors>
      <endpointBehaviors>
        <behavior name="credentialConfiguration">
          <clientCredentials>
            <clientCertificate 
                      findValue="10 14 08 f4 00 00 00 00 0f 3f"
                      storeLocation="CurrentUser"
                      x509FindType="FindBySerialNumber"/>
          </clientCredentials>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <bindings>
      <wsHttpBinding>
        <binding name="myBinding">
          <security mode="Transport">
            <transport clientCredentialType="Certificate" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
    <client>
      <endpoint address="https://aaaaaaaaaaaaaaaaaa:700/aaa/aa/"
                behaviorConfiguration="credentialConfiguration"
                binding="wsHttpBinding"
                bindingConfiguration="myBinding"
                contract="mydll.service"
                name="faturasSOAP" />
    </client>
  </system.serviceModel>
</configuration> 
```

调用服务的代码：

```
 //Create authentication header 
        CdoHeaderCredentials header = GetEncryptedCredentials();

        //Client Proxy 
        InvoiceService.faturasClient clientProxy = new faturasClient();

        //Custom header 
         AddWseSecurityHeaderEndpointBehavior customEndpointBehavior =
            new AddWseSecurityHeaderEndpointBehavior(header.Username, header.Password, header.Nonce, header.ClientDate);
                clientProxy.Endpoint.Behaviors.Add(customEndpointBehavior);

         //get document to register on service
         RegisterInvoiceType documentToSnyc = manager.DocumentToSnyc();

         //Load private certificate with key
         X509Certificate2 cert = new X509Certificate2(
          certPath,
            _certKey,
            X509KeyStorageFlags.Exportable);

         //Link the certificate with the proxy
         clientProxy.ClientCredentials.ClientCertificate.Certificate = cert;

            //invoke operation
        RegisterInvoiceResponse response =  clientProxy.RegisterInvoice(new RegisterInvoiceRequest(documentToSnyc)); 
```

每当我调用服务时，响应都是相同的：

```
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <s:Header xmlns:s="http://www.w3.org/2003/05/soap-envelope" />
  <env:Body>
    <env:Fault>
      <env:Code>
        <env:Value>
env:Receiver</env:Value>
      </env:Code>
      <env:Reason>
        <env:Text xml:lang="en-US">
Internal Error (from server)
</env:Text>
      </env:Reason>
    </env:Fault>
  </env:Body>
</env:Envelope> 
```

我的问题是，如果这个错误是关于客户端身份验证抛出 ssl，还是其他什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:24:02.267

这里没有足够的信息来确定您为什么在不了解服务器的情况下看到错误，但由于错误文本显示“内部错误（来自服务器）”，我的猜测是它与您的任何事情无关重新在客户端做。无论如何，一旦你看到这样的东西，你可能应该联系网络服务的所有者寻求帮助——如果这是一个“内部错误”，他们应该负责调试它或告诉你你的实际错误是什么这个“内部错误”代表的一面。

# android - Android Image View 数据？

> ID：13914728
> 
> 赞同：0
> 
> 时间：2012-12-17T13:02:27.917
> 
> 标签：android, android-intent, android-widget, android-imageview

在这里，我有一个`Activity`在其中创建`ImageButton`的`XML`，像这样`ImageButton`安排二`ImageViews`和二`TextViews`，请参阅单击此`ImageButton`数据在下一步中接收`Activity`。

我的问题是如何`ImageButton`从这个`Activity`到下一个获取所有数据`Activity`。任何人有想法给一些想法....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:15:18.010

您可以将所需的数据保存在 a 中`Bundle`并将其传递到`Intent`. `Button`如果您绝对需要`Serializable`传递`Button`. 并使用[此](https://stackoverflow.com/questions/8686938/how-to-pass-object-to-an-activity)答案中`Serializable`的方法`Activity`通过`Intent`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:28:12.687

单击按钮时，只需将要移动的数据放入其他活动中

```
public void onClick(View view) {
    Intent i = new Intent(this, ActivityTwo.class);
    i.putExtra("Value1", "This value one for ActivityTwo ");
    i.putExtra("Value2", "This value two ActivityTwo");
    // Set the request code to any code you like, you can identify the
    // callback via this code
    startActivityForResult(i, REQUEST_CODE);
  } 
```

然后您可以像这样将这些数据放入其他活动中

```
Bundle extras = getIntent().getExtras();
    if (extras == null) {
      return;
    }
    String value1 = extras.getString("Value1");
    String value2 = extras.getString("Value2"); 
```

这称为显式意图。

# ant - 如何为变量赋值并重用它 Ant

> ID：13914743
> 
> 赞同：3
> 
> 时间：2012-12-17T13:03:12.830
> 
> 标签：ant

我是 Ant 的新手，我有一个场景来分配我得到的当前时间 [1]，同时创建一个文件夹 [2] 并在文件中添加一些文件到文件夹 [3]。所以我需要得到我在[2]中得到的时间价值。我基本上是一个 java 人，如果它是在 java 中，拥有一个全局变量并重新使用它只需几秒钟的工作。但是在这里我不确定如何在不同的目标标签中全局重用该值。请分享您对此的想法。

[1]

```
<macrodef  name="set.timestamp">
      <sequential>
         <tstamp>
            <format property="current.time" pattern="MM-dd-yyyy_hh-mm-ss"/>
        </tstamp>
      </sequential>
   </macrodef> 
```

[2]

```
<target name="init" depends="setRuntimeArchive">
      <set.timestamp/>
      <mkdir dir="${results}/${classname}_${current.time}/xml" />
      <mkdir dir="${results}/${classname}_${current.time}/html" />
      <mkdir dir="${junit-report-output}" />
   </target> 
```

[3]：在这里我无法获得与上面 [2] 相同的 current.time 值

```
<target name="runTestResults">
      <copy
         file="${eclipse-home}/${report}.xml"
         tofile="${results}/${classname}_${current.time}/xml/${report}_${platform}.xml"
         failonerror="false" />
      <xslt
         style="${etf-home}/plugins/${org.eclipse.test}/JUNIT.XSL"
         basedir="${results}/${classname}_${current.time}/xml"
         destdir="${results}/${classname}_${current.time}/html" />
      <antcall target="runTestStatus" />
   </target> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T15:14:11.530

在 Ant 中，任何不在目标中的任务都会在任何目标之前执行。因此，您所要做的就是将您的属性设置`current.time`在任何目标之外，并且该属性将可用于您的所有目标：

```
<project name="foo" default="some.task" basedir=".">
    <tstamp>
        <format property="current.time"
             pattern="MM-dd-yyyy_hh-mm-ss"/>
    </tstamp>

    <target name="run.test.status"
         depends="run.test.results">
         ...
    </target>

    <target name="run.test.results">
         <property name="results.dir" 
             value="${results/${classname_$current.time}/xml"/>
         <mkdir dir="${results.dir}"/>
         <copy
             file="${eclipse-home}/${report}.xml"
             tofile="${results.dir}/${report}_${platform}.xml"
             failonerror="false" />
         <xslt
             style="${etf-home}/plugins/${org.eclipse.test}/JUNIT.XSL"
             basedir="${results}/${classname}_${current.time}/xml"
             destdir="${results}/${classname}_${current.time}/html" />
   </target> 
```

在上面，时间戳是在`build.xml`第一次执行时设置的，因为它不在任何目标中。现在，时间戳在所有目标中都可用。

顺便说一句，我设置了该属性`${results.dir}`以使其在 StackOverflow 中更易于阅读，因为否则目录名称会超出页面边缘。

# c# - WPF 转换器指南

> ID：13914746
> 
> 赞同：1
> 
> 时间：2012-12-17T13:03:28.057
> 
> 标签：c#, wpf, xaml, converter

是否有关于转换器实施的指导方针。我想重构所有可能的转换器，我认为如果它能够对应一些传统的方式会很好。奇怪的是我没有用谷歌搜索任何有用的东西。我对以下主题感到好奇：

1.  我应该有几个转换器，如 EnumStringConverter、EnumValuesConverter 还是只有一个 EnumConverter 来检查“targetType”并返回相应的结果？
2.  如何命名：FooToBooConverter 或 FooBooConverter？
3.  我应该关心 targetType、值的类型、对它有断言吗？

谢谢，丹尼尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:51:05.640

Converter 实现没有具体的指导方针。而不是要求转换器指南搜索 C# 指南。供参考，请查看以下链接

[http://msdn.microsoft.com/en-us/library/vstudio/ff926074.aspx](http://msdn.microsoft.com/en-us/library/vstudio/ff926074.aspx)

[http://www.codeproject.com/Articles/18309/Coding-Standards-for-C-Names](http://www.codeproject.com/Articles/18309/Coding-Standards-for-C-Names)

我认为你必须使用 Re-Sharper 来帮助编码。

现在关于你的问题。

1.  创建多个转换器使您的代码变得简单，并遵循单一负责的原则。因此，无论出于何种原因，您只能在特定课程中进行更改。这不会影响其他功能。
2.  命名转换易于阅读，因此将加入您的团队的其他人将很容易阅读和理解，例如 FooToBooConverter 很好。它的可读性。但是 FooBooConverter 的名字很难理解。
3.  您应该关心特定的目标类型。对于泛型类型，您不需要关心。比如从数字转换颜色。对于这件事你不必担心。

希望这些都能解决您的疑问。

我建议您阅读有关 SOLID 原则的内容。

[http://www.code-magazine.com/article.aspx?quickid=1001061&page=3](http://www.code-magazine.com/article.aspx?quickid=1001061&page=3)

# asp.net - 如何在asp.net中获取下拉列表中网站的网页名称和RichTextBox中的内容？

> ID：13914748
> 
> 赞同：0
> 
> 时间：2012-12-17T13:03:30.050
> 
> 标签：asp.net, web-applications, file-io, fckeditor

我想显示驻留在应用程序根目录中的所有网页名称（.aspx）并将其显示在 DropdownList 中。根据页面的选择，.aspx 页面的内容必须显示在 RichTextBox 或某些 FCKEditor 文本框中，并在编辑后保存页面内容。

请建议我正确的方法！

帮助赞赏！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:13:12.903

在这里从 MSDN 尝试这样的事情：http: [//msdn.microsoft.com/en-us/library/dd413233.aspx](http://msdn.microsoft.com/en-us/library/dd413233.aspx)

```
var files = Directory.EnumerateFiles(Server.MapPath("/"), "*.aspx");

foreach (string currentFile in files)
{
  string fileName = Path.GetFileName(currentFile);
}
// Add filename to drop down list etc.... 
```

# css - inline-block 不会堆叠我的“块”

> ID：13914749
> 
> 赞同：1
> 
> 时间：2012-12-17T13:03:31.257
> 
> 标签：css

我试图将这些“块”堆叠起来，它们之间有一些边距。问题是它们不会“阻塞”它们之间有 3 个像素的空间。它们只是堆叠在一起（典型的 div 标签）。

```
<div style="display: inline-block; margin: 3px; vertical-align: middle;">
    <div style="background-color: #000000; height: 100px; width: 100px;"></div>
    <div style="background-color: #000000; height: 100px; width: 100px;"></div>
    <div style="background-color: #000000; height: 100px; width: 100px;"></div>
    <div style="background-color: #000000; height: 100px; width: 100px;"></div>
</div>​ 
```

为什么它不起作用？演示：http: [//jsfiddle.net/edgren/Y9gCG/](http://jsfiddle.net/edgren/Y9gCG/)

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:05:56.393

您应该使用样式表。

除此之外，The`inline-block`和其他 css 语句必须在子 div 上：

```
<div>
    <div style="margin: 3px; vertical-align: middle; display: inline-block; background-color: #000000; height: 100px; width: 100px;"></div>
    <div style="margin: 3px; vertical-align: middle; display: inline-block; background-color: #000000; height: 100px; width: 100px;"></div>
    <div style="margin: 3px; vertical-align: middle; display: inline-block; background-color: #000000; height: 100px; width: 100px;"></div>
    <div style="margin: 3px; vertical-align: middle; display: inline-block; background-color: #000000; height: 100px; width: 100px;"></div>
</div>​ 
```

带有样式表：*

CSS

```
.child{
    margin: 3px;
    vertical-align: middle;
    display: inline-block;
    background-color: #000000;
    height: 100px;
    width: 100px;
} 
```

HTML

```
<div>
    <div class="child"></div>
    <div class="child"></div>
    <div class="child"></div>
    <div class="child"></div>
</div>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:05:21.327

在内部 div 上应用边距，而不是父级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T13:06:53.803

这是一个展示如何做到这一点的小提琴：http: [//jsfiddle.net/Y9gCG/3/](http://jsfiddle.net/Y9gCG/3/)

```
div.container div {
 margin-bottom:3px;
 background-color: #000;
 height: 100px;
 width: 100px;"
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T13:06:56.630

您正在将 margin 和 inline-block 属性添加到父元素而不是子元素，将代码更改为：

```
<div>
    <div style="background-color: #000000; height: 100px; width: 100px; display: inline-block; margin: 3px;"></div>
    <div style="background-color: #000000; height: 100px; width: 100px; display: inline-block; margin: 3px;"></div>
    <div style="background-color: #000000; height: 100px; width: 100px; display: inline-block; margin: 3px;"></div>
    <div style="background-color: #000000; height: 100px; width: 100px; display: inline-block; margin: 3px;"></div>
</div>​ 
```

它应该可以工作。

# asp.net - Gridview TemplateField 内的灯箱

> ID：13914754
> 
> 赞同：0
> 
> 时间：2012-12-17T13:03:38.333
> 
> 标签：asp.net, gridview, lightbox

```
<script type="text/javascript">
        $(document).ready(function () {
          $("#LightBox").click(function () {
                $.fancybox.open({
                    href: ($('#LightBox').val()),
                    type: 'iframe',
                    padding: 7
                });
            });
        });
    </script> 
```

* * *

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
                        DataSourceID="SqlDataSource1" >
                        <Columns>
                         <asp:TemplateField>
                         <ItemTemplate>
                         <asp:Button   ID="LightBox" runat="server" Text="http://www.apple.com/ipod" />
                         </ItemTemplate>
                         </asp:TemplateField>
                        </Columns>
   </asp:GridView> 
```

如果我将按钮放在gridview 之外，灯箱工作正常..我不明白为什么它不会从templateField 内部触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:11:24.197

可以尝试使用以下代码（使用类而不是 ID）

```
<script type="text/javascript">
        $(document).ready(function () {
          $(".LightBox").click(function () {
                var url = $(this).val();
                $.fancybox.open({
                    href: url,
                    type: 'iframe',
                    padding: 7
                });
            });
        });
    </script>

    <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
                        DataSourceID="SqlDataSource1" >
                        <Columns>
                         <asp:TemplateField>
                         <ItemTemplate>
                         <asp:Button   ID="LightBox" CssClass="LightBox" runat="server" Text="http://www.apple.com/ipod" />
                         </ItemTemplate>
                         </asp:TemplateField>
                        </Columns>
   </asp:GridView> 
```

# git - 无法使用 IntelliJ Idea12 推送到 Git

> ID：13914755
> 
> 赞同：3
> 
> 时间：2012-12-17T13:03:46.963
> 
> 标签：git, intellij-idea

我最近更新到 IntelliJ idea 12，但我无法推送到 Git。我收到的错误消息是

```
8:02:10 AM Push failed: Couldn't authorize 
```

我可以使用 Tortoise Git 毫无问题地推送。我认为这源于我的 LDAP 密码更改，但是我找不到任何地方可以更改 IntelliJ 中保存的 Git 密码。

我已尝试更改主密码，但这并没有解决问题。

我可以毫无问题地拉动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T14:31:26.987

我建议您[在跟踪器](http://youtrack.jetbrains.com/)中打开一个请求并将日志附加到那里（帮助 -> 显示日志）。

顺便说一句，要从 IDEA 中删除所有密码，确保您必须在重置主密码后重新启动，因为密码也可能会保存到内存中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-26T20:22:00.523

我知道这是一个迟到的答案，但我也遇到过这个问题（直到今天），我有一个简单的“修复”，直到 JetBrains 修复它。

无需`.IntelliJIdea12 folder`擦除整个. 现在将提示您再次输入凭据，它应该可以正常工作。`security.xml``~\.IntelliJIdea12\config\options`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T04:37:21.857

我刚刚退回到 11.1.5，因为 intellij 12 git 支持似乎完全被淹没了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T08:30:21.250

**尝试完全重新安装 IDEA v.12**，删除所有本地历史记录和清理寄存器。我在许多计算机上使用 IntellijIDEA。这个问题在其中一些随机发生。这种激进的方法以某种方式帮助解决了这个问题（但不是在所有计算机上）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T14:08:12.003

如果您在 mac 上使用 Intellij IDEA，请删除此目录：

```
rm -rf ~/Library/Preferences/IntelliJIdea12/ 
```

正如在 OS X 上的 IntelliJ 中所读[，您如何清除所有全局设置信息、许可等（任何项目外部）](https://stackoverflow.com/questions/2774315/in-intellij-on-os-x-how-do-you-clear-out-all-global-setting-info-licensing-etc)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-12T16:32:19.050

对于 IntelliJ 社区版，security.xml 文件位于 .IdeaIC12/config/options： [http ://odoepner.wordpress.com/2013/06/12/fix-password-issues-in-intellij-12/](http://odoepner.wordpress.com/2013/06/12/fix-password-issues-in-intellij-12/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-17T07:23:00.187

在您的项目文件夹中，转到 .git 文件夹（您不会在 Windows 中看到它，只需在地址栏中输入它）并在配置文件中编辑 url（问题仍然存在于 intellij 13.1.3 中）

# delphi - TMultiStringList & TStrings

> ID：13914756
> 
> 赞同：1
> 
> 时间：2012-12-17T13:03:49.597
> 
> 标签：delphi, delphi-xe2

我最近发现了这段代码，我一直在尝试修改它，但是没有运气。我怎样才能修改代码，以便它不仅接受文件，还接受 TStrings？

**它只能以这种方式使用**

```
TMultiStringList.LoadFromFile('somefile.txt',
 TMultiStringList.TFill.mfiClearBeforeFill,
 TMultiStringList.TMode.mslSpread); 
```

**但不是这样**

```
TMultiStringList.LoadFromStrings(StringList.Text,
 TMultiStringList.TFill.mfiClearBeforeFill,
 TMultiStringList.TMode.mslSpread); 
```

**来源：**

```
unit Multi;

interface

uses
  System.SysUtils,
  System.Classes,
  System.Generics.Collections;

type
  TMultiStringList = class
  public
    type
      TFill = (mfiAdd, mfiClearBeforeFill);

      TMode = (
        mslTrim,        // Trim lines before add
        mslLower,       // Lower lines before add
        mslUpper,       // Upper lines before add
        mslAssign,      // Just use Assign()
        mslSpread);     // Spread text to the lists
  private
    FLength: Integer;
    FLists: TArray<TStringList>;
    function ValidArray(): Boolean;
    procedure BuildArray(const Length: Integer);
    procedure FreeArray();
    function GetList(const Index: Integer): TStringList;
  public
    constructor Create(const Length: Integer);
    destructor Destroy(); override;
    procedure LoadFromFile(const FileName: string; const Fill: TFill; const Mode: TMode);
    property ListCount: Integer read FLength;
    property Lists[const Index: Integer]: TStringList read GetList;
  end;

implementation

{ TMultiStringList }

procedure TMultiStringList.BuildArray(const Length: Integer);
var
  I: Integer;
begin
  SetLength(FLists, Length);
  for I := Low(FLists) to High(FLists) do
    FLists[I] := TStringList.Create();
end;

constructor TMultiStringList.Create(const Length: Integer);
begin
  FLength := Length;
  BuildArray(Length);
end;

destructor TMultiStringList.Destroy;
begin
  FreeArray();
  inherited;
end;

procedure TMultiStringList.FreeArray;
var
  I: Integer;
begin
  if (Length(FLists) > 0) then
  begin
    for I := Low(FLists) to High(FLists) do
    begin
      FLists[I].Free();
      FLists[I] := nil;
    end;
    SetLength(FLists, 0);
  end;
end;

function TMultiStringList.GetList(const Index: Integer): TStringList;
begin
  Result := FLists[Index];
end;
procedure TMultiStringList.LoadFromFile(const FileName: string; const Fill: TFill; const Mode: TMode);

  procedure HandleLoad(Callback: TProc<TStringList, string>);
  var
    List, Target: TStringList;
    I, J: Integer;
  begin
    List := TStringList.Create();
    try
      List.LoadFromFile(FileName);
      for I := Low(FLists) to High(FLists) do
      begin
        if (Fill = TFill.mfiClearBeforeFill) then
          FLists[I].Clear();

        for J := 0 to List.Count - 1 do
          Callback(FLists[I], List[J]);
      end;
    finally
      List.Free();
    end;
  end;

  procedure HandleAssign();
  var
    I: Integer;
  begin
    if (Fill = TFill.mfiClearBeforeFill) then
      FLists[0].Clear();

    FLists[0].LoadFromFile(FileName);

    for I := 1 to High(FLists) do
    begin
      if (Fill = TFill.mfiClearBeforeFill) then
        FLists[I].Clear();

      FLists[I].Assign(FLists[0]);
    end;
  end;

  procedure HandleSpread();
  var
    List: TStringList;
    I: Integer;
    ItemsPerList: Integer;
    ListIndex: Integer;
  begin
    if (Fill = TFill.mfiClearBeforeFill) then
    begin
      for I := Low(FLists) to High(FLists) do
        FLists[I].Clear();
    end;

    List := TStringList.Create();
    try
      List.LoadFromFile(FileName);

      ItemsPerList := (List.Count + FLength - 1) div FLength;

      for I := 0 to List.Count - 1 do
      begin
        FLists[I div ItemsPerList].Add(List[I]);
      end;
    finally
      List.Free();
    end;
  end;

begin
  if (not ValidArray()) then
    raise Exception.Create('Array incomplete!');

  case Mode of
    mslTrim : HandleLoad(
                     procedure(Target: TStringList; S: string)
                     begin
                       Target.Add(Trim(S));
                     end);

    mslLower     : HandleLoad(
                     procedure(Target: TStringList; S: string)
                     begin
                       Target.Add(LowerCase(S));
                     end);

    mslUpper     : HandleLoad(
                     procedure(Target: TStringList; S: string)
                     begin
                       Target.Add(UpperCase(S));
                     end);

    mslAssign    : HandleAssign();

    mslSpread    : HandleSpread();
  else
    raise ENotImplemented.Create('Mode not implemented!');
  end;
end;

function TMultiStringList.ValidArray: Boolean;
begin
  Result := Length(FLists) = FLength;
end;

end. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:28:13.517

也许像这样？

```
procedure TMultiStringList.LoadFromFile(const FileName: string; const Fill: TFill; const Mode: TMode);
var
  list: TStringList;
begin
  list := TStringList.Create;
  try
    list.LoadFromFile(FileName);
    LoadFromStrings(list, Fill, Mode);
  finally
    list.Free;
  end;
end;

procedure TMultiStringList.LoadFromStrings(Source: TStrings; const Fill: TFill; const Mode: TMode);

  procedure HandleLoad(Callback: TProc<TStringList, string>);
  var
    list: TStringList;
    line: string;
  begin
    for list in FLists do
    begin
      if (Fill = TFill.mfiClearBeforeFill) then
        list.Clear();

      for line in Source do
        Callback(list, line);
    end;
  end;

  procedure HandleAssign();
  var
    I: Integer;
  begin
    if (Fill = TFill.mfiClearBeforeFill) then
      FLists[0].Clear();

    FLists[0].AddStrings(Source);

    for I := 1 to High(FLists) do
    begin
      if (Fill = TFill.mfiClearBeforeFill) then
        FLists[I].Clear();

      FLists[I].Assign(FLists[0]);
    end;
  end;

  procedure HandleSpread();
  var
    list: TStringList;
    I: Integer;
    ItemsPerList: Integer;
  begin
    if (Fill = TFill.mfiClearBeforeFill) then
    begin
      for list in FLists do
        list.Clear();
    end;

    ItemsPerList := (Source.Count + FLength - 1) div FLength;

    for I := 0 to Source.Count - 1 do
    begin
      FLists[I div ItemsPerList].Add(Source[I]);
    end;
  end;

begin
  if (not ValidArray()) then
    raise Exception.Create('Array incomplete!');

  case Mode of
    mslTrim : HandleLoad(
                     procedure(Target: TStringList; S: string)
                     begin
                       Target.Add(Trim(S));
                     end);

    mslLower     : HandleLoad(
                     procedure(Target: TStringList; S: string)
                     begin
                       Target.Add(LowerCase(S));
                     end);

    mslUpper     : HandleLoad(
                     procedure(Target: TStringList; S: string)
                     begin
                       Target.Add(UpperCase(S));
                     end);

    mslAssign    : HandleAssign();

    mslSpread    : HandleSpread();
  else
    raise ENotImplemented.Create('Mode not implemented!');
  end;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:29:09.910

这是一种选择。

首先添加一个方法来处理`string`变量中提供的输入。签名如下所示：

```
procedure LoadFromText(const Text: string; const Fill: TFill;
  const Mode: TMode); 
```

我们稍后会谈到实现。接下来添加几个依赖于的方法`LoadFromText`：

```
procedure TMultiStringList.LoadFromFile(const FileName: string; 
  const Fill: TFill; const Mode: TMode);
var
  Strings: TStringList;
  Text: string;
begin
  Strings := TStringList.Create;
  try
    Strings.LoadFromFile(FileName);
    Text := Strings.Text;
  finally
    Strings.Free;
  end;
  LoadFromText(Text, Fill, Mode);
end;

procedure TMultiStringList.LoadFromStrings(Strings: TStrings; 
  const Fill: TFill; const Mode: TMode);
begin
  LoadFromText(Strings.Text, Fill, Mode);
end; 
```

最后，我们可以实现完成所有实际工作的方法。我已从您的问题中获取代码并替换`LoadFromFile()`为`Text := ...`. 结果如下所示：

```
procedure TMultiStringList.LoadFromText(const Text: string; 
  const Fill: TFill; const Mode: TMode);

  procedure HandleLoad(Callback: TProc<TStringList, string>);
  var
    List, Target: TStringList;
    I, J: Integer;
  begin
    List := TStringList.Create();
    try
      List.Text := Text;
      for I := Low(FLists) to High(FLists) do
      begin
        if (Fill = TFill.mfiClearBeforeFill) then
          FLists[I].Clear();

        for J := 0 to List.Count - 1 do
          Callback(FLists[I], List[J]);
      end;
    finally
      List.Free();
    end;
  end;

  procedure HandleAssign();
  var
    I: Integer;
  begin
    if (Fill = TFill.mfiClearBeforeFill) then
      FLists[0].Clear();

    FLists[0].Text := Text;

    for I := 1 to High(FLists) do
    begin
      if (Fill = TFill.mfiClearBeforeFill) then
        FLists[I].Clear();

      FLists[I].Assign(FLists[0]);
    end;
  end;

  procedure HandleSpread();
  var
    List: TStringList;
    I: Integer;
    ItemsPerList: Integer;
    ListIndex: Integer;
  begin
    if (Fill = TFill.mfiClearBeforeFill) then
    begin
      for I := Low(FLists) to High(FLists) do
        FLists[I].Clear();
    end;

    List := TStringList.Create();
    try
      List.Text := Text;

      ItemsPerList := (List.Count + FLength - 1) div FLength;

      for I := 0 to List.Count - 1 do
      begin
        FLists[I div ItemsPerList].Add(List[I]);
      end;
    finally
      List.Free();
    end;
  end;

begin
  if (not ValidArray()) then
    raise Exception.Create('Array incomplete!');

  case Mode of
    mslTrim : HandleLoad(
                     procedure(Target: TStringList; S: string)
                     begin
                       Target.Add(Trim(S));
                     end);

    mslLower     : HandleLoad(
                     procedure(Target: TStringList; S: string)
                     begin
                       Target.Add(LowerCase(S));
                     end);

    mslUpper     : HandleLoad(
                     procedure(Target: TStringList; S: string)
                     begin
                       Target.Add(UpperCase(S));
                     end);

    mslAssign    : HandleAssign();

    mslSpread    : HandleSpread();
  else
    raise ENotImplemented.Create('Mode not implemented!');
  end;
end; 
```

* * *

写完所有这些后，我会评论说 Uwe 的方法更好。它使用完全相同的基本思想。将完成工作的代码放在一种方法中，并添加额外的适配器方法以支持来自不同来源的输入。

我认为 Uwe 的方法更好的原因是它减少了创建的临时字符串列表的数量。在这方面，Uwe 将其分割的方式更好。如果您想在`LoadFromText`Uwe 的答案中添加一个简单的答案：

```
procedure TMultiStringList.LoadFromText(const Text: string; 
  const Fill: TFill; const Mode: TMode);
var
  Strings: TStringList;
begin
  Strings := TStringList.Create;
  try
    Strings.Text := Text;
    LoadFromStrings(Strings, Fill, Mode);
  finally
    Strings.Free;
  end;
end; 
```

# grails - 从 Roo 迁移到 Grails

> ID：13914760
> 
> 赞同：4
> 
> 时间：2012-12-17T13:04:12.240
> 
> 标签：grails, spring-mvc, spring-roo

我有一个使用 Spring Roo 开发的 Web 应用程序。这只是一个标准的 Roo 应用程序，只有少数不是由 Roo 自身生成的 Java 类。在另一个应用程序中使用 Grails 一段时间后，由于 Groovy 及其大量插件，我决定将我的应用程序移至 Grails。

我的问题是：**我应该使用哪种策略从 Spring Roo 迁移到 Spring Grails？**[我的第一个猜测是按照此处](http://static.springsource.org/spring-roo/reference/html/removing.html)所述从我的应用程序中删除 Roo ，然后在新的 Grails 应用程序上安装[SpringMVC 插件](http://grails.org/plugin/springmvc)，这样我就可以在新项目中继续使用旧的应用程序工件。

第一步很简单，但第二步对我来说还不清楚。我在这里找到了一篇关于使用 spring 控制器和 jsps 的文章[，](http://burtbeckwith.com/blog/?p=58)但我仍然很担心，因为这是一个已经投入生产的应用程序。还有什么我没有考虑的吗？我将不胜感激有关此策略的任何建议或警告。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:17:42.747

# java - 使用 InstanceOf 实现访问者

> ID：13914762
> 
> 赞同：2
> 
> 时间：2012-12-17T13:04:16.123
> 
> 标签：java, design-patterns, visitor-pattern, open-closed-principle

我很好地掌握了**访问者模式**。但是，我想知道一些事情。

使用访问者模式最重要的动机是在客户端添加涉及特定数据模型的逻辑，而无需检查真实的数据对象类型。用于求解的技术称为双重调度。

因此，这里是实现`accept()`方法的数据模型的代码片段：

```
public class Ferrari extends Car {
    //......
    @Override
    public void accept(Visitor v){
      v.visit(this);
    }
  } 
```

这里是一个`PrintCarVisitor`实现`Visitor`接口：

```
public class PrintCarVisitor implements Visitor {
  //...
  @Override
  public void visit(Ferrari c){
    System.out.println("Ferrari");
  }
} 
```

因此，不需要`if/else`系列和`instanceof`系列。

任何客户都是：

```
Visitor visitor = new PrintCarVisitor();
car.accept(visitor);  //no need to know the exact Car's type 
```

但是，既然访问者没有保持开/关原则（因为一个新的数据模型会导致通过添加自己的`visit`方法来破坏类），我们为什么还要为双重调度而烦恼呢？

`if/else`我们不能只在访问者实现中隔离系列。

使用这种假设的替代方案，这部分代码将消失：

```
 public class Ferrari extends Car {
    //This method is not needed anymore with this alternative
    @Override
    public void accept(Visitor v){
      v.visit(this);
    }
  } 
```

`PrintCarVisitor`将会：

```
public class PrintCarVisitor {
   public void visit(Car c){
     if(c instanceof Ferrari){
       System.out.println("Ferrari");
     }
   }      
} 
```

使用这种替代方法，每个调用者仍然会像这样处理数据模型抽象：

`new PrintCarVisitor().visit(car); //no need to know the exact data type in client side`

先验地，第二种方法很棒，因为它不涉及在实现纯访问者模式期间生成的所有样板。

我想这种方法有两个缺点：

1）不保证（如`Visitor`接口强加）任何使用过的访问者都会处理与`Car`当前处理的方法相对应的方法。

2) BoilerPlate 代码在 Visitor 实现类中仍然较重，带有`instanceof`和`casting`。

他们是否有任何其他缺点解释了为什么访问者模式必须使用双重调度，因此不能简单地将`instanceof`系列隔离在一个类中（例如静态`Factory`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T13:16:01.450

1.  如果你这样做，你就不再有访客，你基本上有某种处理器。您的代码将只是一个列表迭代，每次通过循环时，您都会将以前使用的内容传递`accept`给处理器，即正式的访问者。从某种意义上说，您不是在访问被访问者，而是在颠倒范式。访问者成为访问者，因为它最初被传递给工作人员。你可以做到这一点; 你不会称它为访客。

2.  传统智慧通常规定`instanceof`应将使用保留为最后的手段。`instanceof`当你可以让Java的多态性为你做这件事时，你为什么要使用？拥有对象的要点之一就是这种好处。如果你这样做了，为什么不避开覆盖方法，而只使用`instanceof`来确定在类的方法中做什么，而不是依赖于动态调度，对于覆盖方法的情况？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:17:17.310

Xtext 项目也有同样的问题，他们创建了一个帮助类`PolymorphicDispatcher`。简而言之，`PolymorphicDispatcher`在运行时执行编译器在编译时执行的操作：找到最匹配一组参数的方法并调用它。

所以你的访客看起来像：

```
 public class PrintCarVisitor {
   public void visit(Car c){
      System.out.println("Just a car");
   }
   public void visit(Ferrari c){
      System.out.println("A Ferrari!");
   }
 } 
```

[这是来源。](http://git.eclipse.org/c/tmf/org.eclipse.xtext.git/tree/plugins/org.eclipse.xtext.util/src/org/eclipse/xtext/util/PolymorphicDispatcher.java)

# c# - 单击带有按钮的表单

> ID：13914767
> 
> 赞同：-1
> 
> 时间：2012-12-17T13:04:45.807
> 
> 标签：c#, winforms, button

我知道如何点击表单，但问题是我在该表单中有一些按钮，我想点击它们！但是之后

```
int initialStyle = GetWindowLong(Handle, -20);
SetWindowLong(Handle, -20, initialStyle | 0x80000 | 0x20); 
```

我不能点击我的按钮！

谢谢 ！

我认为我没有正确处理标志:(在vs2008中我尝试过它`BackColor = Color.Red; TransparencyKey = BackColor;`并且效果很好，但在vs2010中它没有点击。现在我会尝试在我的按钮上放置onmouseover事件以便我可以点击它们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:58:33.323

我明白了我在使用 TransparencyKey 时遇到的问题是 Windows 7 中的桌面合成，航空风格使其无法单击表单，只需禁用桌面合成和 bazinga ..！您可以单击透明表单 =D，如果您需要 ping 我的帮助，还可以使用代码停用桌面组合！

# messaging - 由于 CCSID 不匹配，发布时出现异常

> ID：13914771
> 
> 赞同：0
> 
> 时间：2012-12-17T13:05:16.657
> 
> 标签：messaging, ibm-mq, websphere-8

使用 WMB 6 开发了一个条形文件。

部署在 WMB 8 环境中。

有一个带有队列管理器“MSBK01”的代理“MSBK01”(WMB 8)。队列管理器的**CCSID**是**819**。

拥有另一个带有队列管理器“MSBK02”的代理“MSBK01”（WMB 8）。此队列管理器的**CCSID**是**1208**。

我正在**发布一条带有 CCSID 1208 的消息**（也在代码中设置 MQMD.CCSID=1208）。

该代码没有引发任何解析异常。我的**最后一个节点是发布**节点。我得到了“不可转换字符”的例外。

运行跟踪后，我发现消息到达发布节点（我的最终节点）后出现异常。

但是我的代码对于具有 CCSID 1208 的队列管理器的 MSBK02 运行良好。

现在，我将流程中的发布节点替换为 MQOutput 节点，并且在两个代理（CCSID 819 和 CCSID 1208）中都得到了正确的输出。因此，它的发布节点创建了问题。

**我的问题是如何确保发布节点不会尝试转换我的消息。**

我试图完成我的消息，但没有成功。

需要帮助。此外，该流程在 WMB 6（CCSID 为 850 的队列管理器）中运行良好。

下面是跟踪的最后一部分。

```
2012-12-13 16:02:53.256804     6239   UserTrace   BIP2537I: Node 'com.ms.sap.IP1_PFT_1_VNDR_MNG_P104.SF_IP1_PST_1_SAP_P104_CDF_TOPIC.ESQL_PROCESSING': Executing statement   ''PROPAGATE TO TERMINAL 'out' FINALIZE DEFAULT DELETE NONE;'' at ('com.ms.sap.SF_IP1_PST_1_SAP_P104_CDF_TOPIC_ESQL_PROCESSING.Main', '87.6'). 
 2012-12-13 16:02:53.258176     6239   UserTrace   BIP4016I: Message propagated to terminal ''out'' of node 'com.ms.sap.IP1_PFT_1_VNDR_MNG_P104.SF_IP1_PST_1_SAP_P104_CDF_TOPIC.ESQL_PROCESSING' with the following message trees: 'InputLocalEnvironment, OutputRoot, InputExceptionList'. 
2012-12-13 16:02:53.258276     6239   UserTrace   BIP7080I: Node 'com.ms.sap.IP1_PFT_1_VNDR_MNG_P104.Publication.ComIbmPSService': The Publication Node with Subscription Point '''' has received a message of type 'Publish'. 
                                       The Publication Node with Subscription Point '''' has started processing a message. 
                                       No user action required. 
2012-12-13 16:02:53.261320     6239   UserTrace   BIP2231E: Error detected whilst processing a message in node 'com.ms.sap.IP1_PFT_1_VNDR_MNG_P104.SF_Broker_Input_Basic.Queue_Name_Promoted'. 
                                       The message broker detected an error whilst processing a message in node 'com.ms.sap.IP1_PFT_1_VNDR_MNG_P104.SF_Broker_Input_Basic.Queue_Name_Promoted'. The message has been augmented with an exception list and has been propagated to the node's failure terminal for further processing. 
                                       See the following messages for details of the error. 
2012-12-13 16:02:53.261340     6239   RecoverableException  BIP2230E: Error detected whilst processing a message in node 'com.ms.sap.IP1_PFT_1_VNDR_MNG_P104.SF_AUDIT_VALIDATE_CME.MAIN'. 
                                       The message broker detected an error whilst processing a message in node 'com.ms.sap.IP1_PFT_1_VNDR_MNG_P104.SF_AUDIT_VALIDATE_CME.MAIN'. An exception has been thrown to cut short the processing of the message. 
                                       See the following messages for details of the error. 
2012-12-13 16:02:53.261348     6239   RecoverableException  BIP2488E:  ('.SF_AUDIT_VALIDATE_CME_MAIN.Main', '109.5') Error detected whilst executing the SQL statement ''PROPAGATE TO TERMINAL 'out3' FINALIZE DEFAULT DELETE DEFAULT;''. 
                                       The message broker detected an error whilst executing the given statement. An exception has been thrown to cut short the SQL program. 
                                       See the following messages for details of the error. 
2012-12-13 16:02:53.261380     6239   RecoverableException  BIP2230E: Error detected whilst processing a message in node 'com.ms.sap.IP1_PFT_1_VNDR_MNG_P104.SF_IP1_PST_1_SAP_P104_CDF_TOPIC.ESQL_PROCESSING'. 
                                       The message broker detected an error whilst processing a message in node 'com.ms.sap.IP1_PFT_1_VNDR_MNG_P104.SF_IP1_PST_1_SAP_P104_CDF_TOPIC.ESQL_PROCESSING'. An exception has been thrown to cut short the processing of the message. 
                                       See the following messages for details of the error. 
2012-12-13 16:02:53.261388     6239   RecoverableException  BIP2488E:  ('com.ms.sap.SF_IP1_PST_1_SAP_P104_CDF_TOPIC_ESQL_PROCESSING.Main', '87.6') Error detected whilst executing the SQL statement ''PROPAGATE TO TERMINAL 'out' FINALIZE DEFAULT DELETE NONE;''. 
                                       The message broker detected an error whilst executing the given statement. An exception has been thrown to cut short the SQL program. 
                                       See the following messages for details of the error. 
2012-12-13 16:02:53.261396     6239   ParserException  BIP5010E: XML Writing Errors have occurred. 
                                       Errors have occurred during writing of XML. 
                                       Review further error messages for an indication to the cause of the errors. 
2012-12-13 16:02:53.261412     6239   RecoverableException  BIP2136E: Source character ''0393'' in field ''003c003f0078006d006c002000760065007200730069006f006e003d00220031002e0030002200200065006e0063006f00640069006e0067003d0022005500540046002d00380022003f003e003c006d006e0073003a004d006e00530044006f00630075006d0065006e007400200078006d006c006e0073003a006d006e0073003d0022006d00610072006b0073007300700065006e006300650072002e0063006f006d002f00690073002f0032003000300039002f0073006300680065006d00610073002f0065006e00760065006c006f00700065002f0022003e003c006d006e0073003a004800650061006400650072003e003c004d00650073007300610067006500490064003e006e006900740069006e003500460037003900420031003300320030004500310030003000380030003000300030006e006900740074006500730074003c002f004d00650073007300610067006500490064003e003c004300720065006100740065006400540069006d0065007300740061006d0070003e0032003000310032002d00310032002d00310031005400310033003a00340034003a00340036003c002f004300720065006100740065006400540069006d0065007300740061006d0070003e003c0053006f0075007200630065004100700070006c00690063006100740069006f006e004e0061006d0065003e005300410050003c002f0053006f0075007200630065004100700070006c00690063006100740069006f006e004e0061006d0065003e003c0049006e007400650072006600610063006500490064003e0049003000330035003c002f0049006e007400650072006600610063006500490064003e003c0049006e0074006500720066006100630065004e0061006d0065003e00560065006e0064006f00720020004d0061007300740065007200200044006900730074007200690062007500740069006f006e003c002f0049006e0074006500720066006100630065004e0061006d0065003e003c005000610079006c006f00610064004e0061006d0065003e00560065006e0064006f00720020005500700064006100740065003c002f005000610079006c006f00610064004e0061006d0065003e003c00420061007400630068004d0065007300730061006700650043006f0075006e0074003e0031003c002f00420061007400630068004d0065007300730061006700650043006f0075006e0074003e003c00420061007400630068005200650063006f007200640043006f0075006e0074003e0031003c002f00420061007400630068005200650063006f007200640043006f0075006e0074003e003c006d006e0073003a0049006e0074006500670072006100740069006f006e0045007800740065006e00730069006f006e003e003c00560045004e0044004f0052003e003c005400720061006e00730061006300740069006f006e0054007900700065002000450031004c004600410031004d003d00220030003000350022002f003e003c004d0061007300740065007200520065006300440065006c0049006e0064002f003e003c002f00560045004e0044004f0052003e003c002f006d006e0073003a0049006e0074006500670072006100740069006f006e0045007800740065006e00730069006f006e003e003c002f006d006e0073003a004800650061006400650072003e003c006d006e0073003a005000610079006c006f00610064003e003c006d006e0073003a00560065006e0064006f0072004d00610073007400650072003e003c00560065006e0064006f0072004e006f003e0031003000300030003000300036003400310037003c002f00560065006e0064006f0072004e006f003e003c004100630063004700720070003e005a003000310031003c002f004100630063004700720070003e003c0049006e0074006c004c006f0063004e006f0031003e0030003000300030003000300030003c002f0049006e0074006c004c006f0063004e006f0031003e003c0049006e0074004c006f0063004e006f0032003e00300030003000300030003c002f0049006e0074004c006f0063004e006f0032003e003c0049006e0074004c006f0063004e006f0049006e0064003e0030003c002f0049006e0074004c006f0063004e006f0049006e0064003e003c0041006300740069007600650049006e0064003e0058003c002f0041006300740069007600650049006e0064003e003c00560065006e0064006f00720054007900700065003e00300031003c002f00560065006e0064006f00720054007900700065003e003c00560065006e0064006f00720044006500730063003e004400490052004500430054003c002f00560065006e0064006f00720044006500730063003e003c00560065006e0064006f0072004c006500670061006300790043006f00640065003e0039003600350039003c002f00560065006e0064006f0072004c006500670061006300790043006f00640065003e003c006d006e0073003a0043006f006e00740061006300740073003e003c0053007500700070006c006900650072004e0061006d0065003e005300680065006e007a00680065006e00200048006900670068007300740061007200200045006c0065006300200043006f0020004c00740064003c002f0053007500700070006c006900650072004e0061006d0065003e003c0053007500700070006c0069006500720041006c006900610073004e0061006d0065003e0020003c002f0053007500700070006c0069006500720041006c006900610073004e0061006d0065003e003c0053007500700070006c0069006500720041006c006900610073004e0061006d0065003e005300680065006e007a00680065006e00200048006900670068007300740061007200200045006c0065006300200043006f0020004c00740064003c002f0053007500700070006c0069006500720041006c006900610073004e0061006d0065003e003c0053007500700070006c0069006500720041006c006900610073004e0061006d0065003e0020003c002f0053007500700070006c0069006500720041006c006900610073004e0061006d0065003e003c005000720069005300650061007200630068005400650072006d003e005300480045004e005a00480045004e00200048003c002f005000720069005300650061007200630068005400650072006d003e003c005300650063005300650061007200630068005400650072006d003e005300480045004e005a00480045004e00200048004900470048005300540041005200200045004c0045004300200043004f003c002f005300650063005300650061007200630068005400650072006d003e003c004c0061006e0067004b00650079003e004d003000330030005f005300560031003c002f004c0061006e0067004b00650079003e003c0043006f006d00700061006e00790050006f007300740061006c0043006f00640065003e003000300030003000300030003c002f0043006f006d00700061006e00790050006f007300740061006c0043006f00640065003e003c00540065006c006500700068006f006e0065004e006f003e00320035003200350030003000360038003c002f00540065006c006500700068006f006e0065004e006f003e003c0045006d00610069006c00490044003e0065006c006c0061006500720069006300620065006100720065002e0063006f006d003c002f0045006d00610069006c00490044003e003c0050006f007300740061006c0041006400640072006500730073003e003c005300740072006500650074003e00310020004c00690061006e0077006500690020005300740072006500650074002c002000440061006c0061006e006700200053006f00750074006800200052006f00610064003c002f005300740072006500650074003e003c0043006900740079003e004c006f006e00670068007500610054006f0077006e002c002000420061006f039300c700ff0061006e00200043006f0075006e00740079002c0020005300680065006e007a00680065003c002f0043006900740079003e003c0052006500670069006f006e003e0053005a0058003c002f0052006500670069006f006e003e003c00430074007200790043006f00640065003e0043004e003c002f00430074007200790043006f00640065003e003c002f0050006f007300740061006c0041006400640072006500730073003e003c002f006d006e0073003a0043006f006e00740061006300740073003e003c0043006f006e00740061006300740050006500720073006f006e0073003e003c00460069007200730074004e0061006d0065003e0045006c006c0061003c002f00460069007200730074004e0061006d0065003e003c004c006100730074004e0061006d0065003e0043006800650075006e0067003c002f004c006100730074004e0061006d0065003e003c00540065006c006500700068006f006e0065004e006f003e003200350032003500200030003000360038003c002f00540065006c006500700068006f006e0065004e006f003e003c0044006500700074003e005a0043004e0054003c002f0044006500700074003e003c0052006f006c0065003e005a0034003c002f0052006f006c0065003e003c002f0043006f006e00740061006300740050006500720073006f006e0073003e003c0043006f006d00700061006e0079003e003c0043006f006d00700061006e00790043006f00640065003e0031003000300030003c002f0043006f006d00700061006e00790043006f00640065003e003c005200650063006f006e004100630063004e006f003e0030003000300030003300330030003000300030003c002f005200650063006f006e004100630063004e006f003e003c0050007200650076004100630063004e006f003e0039003600350039003c002f0050007200650076004100630063004e006f003e003c0044006f00750062006c00650049006e00760049006e0064003e0058003c002f0044006f00750062006c00650049006e00760049006e0064003e003c005000610079006d0065006e0074004d006500740068006f00640073003e0045003c002f005000610079006d0065006e0074004d006500740068006f00640073003e003c005000610079006d0065006e0074005400650072006d0073003e005a003000300036003c002f005000610079006d0065006e0074005400650072006d0073003e003c002f0043006f006d00700061006e0079003e003c00500075007200630068006100730069006e0067004f007200670061006e00690073006100740069006f006e003e003c00500075007200630068006100730069006e0067004f00720067003e0031003000300030003c002f00500075007200630068006100730069006e0067004f00720067003e003c0050004f00430075007200720065006e00630079003e004700420050003c002f0050004f00430075007200720065006e00630079003e003c0050007200690049006e0063006f005400650072006d0073003e004400440050003c002f0050007200690049006e0063006f005400650072006d0073003e003c0053006500630049006e0063006f005400650072006d0073003e0044004400500043004e003c002f0053006500630049006e0063006f005400650072006d0073003e003c0049006e00760056006500720069006600690063006100740069006f006e0049006e0064003e0058003c002f0049006e00760056006500720069006600690063006100740069006f006e0049006e0064003e003c0043007500730074006f006d0073004f00660066006900630065003e0030003000300031003c002f0043007500730074006f006d0073004f00660066006900630065003e003c005400720061006e00730070006f00720074004d006f00640065003e0033003c002f005400720061006e00730070006f00720074004d006f00640065003e003c0050006c0061006e006e0065006400440065006c0069007600650072007900540069006d0065003e0020002000200030003c002f0050006c0061006e006e0065006400440065006c0069007600650072007900540069006d0065003e003c0043006f00720070006f0072006100740069006f006e003e003c00560061006c00690064006900740079005300740061007200740044006100740065003e0032003000310030002d00300033002d00310038003c002f00560061006c00690064006900740079005300740061007200740044006100740065003e003c00560061006c006900640069007400790045006e00640044006100740065003e0039003900390039002d00310032002d00330031003c002f00560061006c006900640069007400790045006e00640044006100740065003e003c0043006f00720070006f0072006100740069006f006e004e006f003e003c002f0043006f00720070006f0072006100740069006f006e004e006f003e003c00560065006e0064006f00720044006100740061003e003c0043006f00720070006f0072006100740069006f006e004e006f003e004d00300030003500380038003c002f0043006f00720070006f0072006100740069006f006e004e006f003e003c00560065006e0064006f0072004e006f003e0030003500380038003c002f00560065006e0064006f0072004e006f003e003c002f00560065006e0064006f00720044006100740061003e003c002f0043006f00720070006f0072006100740069006f006e003e003c0050006100720074006e00650072003e003c0050006100720074006e0065007200460075006e00630043006f00640065003e00420041003c002f0050006100720074006e0065007200460075006e00630043006f00640065003e003c0050006100720074006e00650072004e006f003e004d00300037003500350030003c002f0050006100720074006e00650072004e006f003e003c00560065006e0064006f0072004e006f003e0031003000300030003000300036003400310037003c002f00560065006e0064006f0072004e006f003e003c002f0050006100720074006e00650072003e003c0050006100720074006e00650072003e003c0050006100720074006e0065007200460075006e00630043006f00640065003e004c0046003c002f0050006100720074006e0065007200460075006e00630043006f00640065003e003c0050006100720074006e00650072004e006f003e004d00300037003500350030003c002f0050006100720074006e00650072004e006f003e003c00560065006e0064006f0072004e006f003e0031003000300030003000300036003400310037003c002f00560065006e0064006f0072004e006f003e003c002f0050006100720074006e00650072003e003c0050006100720074006e00650072003e003c0050006100720074006e0065007200460075006e00630043006f00640065003e00520053003c002f0050006100720074006e0065007200460075006e00630043006f00640065003e003c0050006100720074006e00650072004e006f003e004d00300037003500350030003c002f0050006100720074006e00650072004e006f003e003c00560065006e0064006f0072004e006f003e0031003000300030003000300036003400310037003c002f00560065006e0064006f0072004e006f003e003c002f0050006100720074006e00650072003e003c0050006100720074006e00650072003e003c0050006100720074006e0065007200460075006e00630043006f00640065003e005a0043003c002f0050006100720074006e0065007200460075006e00630043006f00640065003e003c0050006100720074006e00650072004e006f003e004d00300030003500380038003c002f0050006100720074006e00650072004e006f003e003c00560065006e0064006f0072004e006f003e0031003000300030003000300036003400310037003c002f00560065006e0064006f0072004e006f003e003c002f0050006100720074006e00650072003e003c0050006100720074006e00650072003e003c0050006100720074006e0065007200460075006e00630043006f00640065003e005a0046003c002f0050006100720074006e0065007200460075006e00630043006f00640065003e003c0050006100720074006e00650072004e006f003e0031003000300030003000300036003400310037003c002f0050006100720074006e00650072004e006f003e003c00560065006e0064006f0072004e006f003e0031003000300030003000300036003400310037003c002f00560065006e0064006f0072004e006f003e003c002f0050006100720074006e00650072003e003c002f00500075007200630068006100730069006e0067004f007200670061006e00690073006100740069006f006e003e003c002f006d006e0073003a00560065006e0064006f0072004d00610073007400650072003e003c002f006d006e0073003a005000610079006c006f00610064003e003c002f006d006e0073003a004d006e00530044006f00630075006d0065006e0074003e'' cannot be converted from Unicode to codepage '819'. 
                                       The source character is an invalid code point within the given codepage. 
                                       Correct the application or message flow that generated the message to ensure that all data within the message can be represented in the target codepage. 
2012-12-13 16:02:53.262060     6239   UserTrace   BIP4163I: Message propagated to the first terminal of the FlowOrder node 'com.ms.sap.IP1_PFT_1_VNDR_MNG_P104.SF_Broker_Input_Basic.SF_Handle_Exception.FlowOrder'. 
                                       The FlowOrder node has received a message and has propagated it to the output terminal called first. Once the processing of the message down the first terminal has finished, the message will be propagated to the second terminal. 
                                       No user action required. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T12:23:19.840

发布节点尝试将消息转换为队列管理器的 CCSID。即使我将 MQMD 的 CCSID 设置为 1208，发布节点也会尝试将消息转换为队列管理器的 CCSID。

但是，似乎发布节点为 CCSID 而不是 MQMD 寻找 MQRFH2，因为我的消息类型是 MQRFH2。

当我如下设置 MQRFH2 CCSID 时，**没有任何异常**，并且消息已发布。

```
 SET OutputRoot.MQRFH2.(MQRFH2.Field)NameValueCCSID = 1208;
 SET OutputRoot.Properties.CodedCharSetId = 1208; 
```

# ruby-on-rails - 遵循 Ruby on Rails 指南：尽管记录了有效的 POST 数据，但表单仍发布“nil”值

> ID：13914773
> 
> 赞同：0
> 
> 时间：2012-12-17T13:05:33.603
> 
> 标签：ruby-on-rails

[我的问题与前一个](https://stackoverflow.com/questions/11910814/rails-form-data-not-getting-saved-to-db)问题有些相似，但就我而言，我更像是一个初学者，而且我的服务器在[Ruby-on-Rails 入门指南](http://guides.rubyonrails.org/getting_started.html)的第一页上出现故障。

基本上，该指南将引导我创建一个带有评论表单的简单博客文章应用程序。按照指南，我可以创建博客文章，并呈现评论表单。评论“显示”区域甚至呈现，它显示正确数量的评论，但存储在数据库中的值对于“评论者”和“正文”字段都是“nil”。

我直接从指南中复制了代码，因此发布它可能不会增加任何价值。这是我`development.log`为有趣的事件添加的空间，因此您可以看到我所看到的：

```
 Started POST "/posts/1/comments" for 127.0.0.1 at 2012-12-17 06:50:32 -0600
Processing by CommentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>
"YuuqmOYgsUHoHTYKBDjeE+zkYSAfWbsB4LcUz6btUkU=",

  "comment"=>{"commenter"=>"just me", "body"=>"Yes"},

 "commit"=>"Create Comment", "post_id"=>"1"}
  [1m[35mPost Load (0.1ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1  [["id",     "1"]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "comments" ("body", "commenter", "created_at",
"post_id",     "updated_at") VALUES (?, ?, ?, ?, ?)

 [["body", nil], ["commenter", nil],

 ["created_at", Mon, 17 Dec     2012 12:50:32 UTC +00:00], ["post_id", 1],
 ["updated_at", Mon, 17      Dec     2012 12:50:32 UTC +00:00]]
  [1m[36m (5.8ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/posts/1
Completed 302 Found in 26ms (ActiveRecord: 7.0ms) 
```

# 更新

这是`comment`模型：

```
class Comment < ActiveRecord::Base
 belongs_to :post
 attr_accessible :body, :commenter
 attr_accessor :body, :commenter
end 
```

和`post`控制器：

```
class PostsController < ApplicationController
  # GET /posts
  # GET /posts.json
  def index
    @posts = Post.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end
  end

  # GET /posts/1
  # GET /posts/1.json
  def show
    begin
       @post = Post.find(params[:id])

        respond_to do |format|
        format.html # show.html.erb
        format.json { render json: @post }
        end
    rescue ActiveRecord::RecordNotFound
        redirect_to posts_path
    end
  end

  # GET /posts/new
  # GET /posts/new.json
  def new
    @post = Post.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @post }
    end
  end

  # GET /posts/1/edit
  def edit
    @post = Post.find(params[:id])
  end

  # POST /posts
  # POST /posts.json
  def create
    @post = Post.new(params[:post])

    respond_to do |format|
      if @post.save
        format.html { redirect_to @post, notice: 'Post was successfully created.' }
        format.json { render json: @post, status: :created, location: @post }
      else
        format.html { render action: "new" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /posts/1
  # PUT /posts/1.json
  def update
    @post = Post.find(params[:id])

    respond_to do |format|
      if @post.update_attributes(params[:post])
        format.html { redirect_to @post, notice: 'Post was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /posts/1
  # DELETE /posts/1.json
  def destroy
    @post = Post.find(params[:id])
    @post.destroy

    respond_to do |format|
      format.html { redirect_to posts_url }
      format.json { head :no_content }
    end
  end
end 
```

最后是.erb：

```
<p id="notice"><%= notice %></p>

<p>
  <b>Name:</b>
 <%= @post.name %>
</p>

<p>
  <b>Title:</b>
  <%= @post.title %>
</p>

<p>
  <b>Content:</b>
  <%= @post.content %>
</p>

<h2>Comments</h2>
<% @post.comments.each do |comment| %>
  <p>
    <b>Commenter:</b>
    <%= comment.commenter %>
  </p>

  <p>
    <b>Comment:</b>
    <%= comment.body %>
  </p>
<% end %>

<h2>Add a comment:</h2>
<%= form_for([@post, @post.comments.build]) do |f| %>
  <div class="field">
    <%= f.label :commenter %><br />
    <%= f.text_field :commenter %>
  </div>
  <div class="field">
    <%= f.label :body %><br />
    <%= f.text_area :body %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>

<%= link_to 'Edit', edit_post_path(@post) %> |
<%= link_to 'Back', posts_path %> 
```

一定有一些明显的东西我在这里失踪了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:56:45.370

啊，来了！（加了空格）

```
class Comment < ActiveRecord::Base
 belongs_to :post
 attr_accessible :body, :commenter

 attr_accessor :body, :commenter

end 
```

通过添加访问器方法，我绕过了 rails 对数据成员的直接访问。我对此发表了评论，然后一切正常。我想我认为那必须在那里，因为我有这些`MASS-ASSIGN`错误。

感谢您的宝贵意见！

# gwt - GWT UiBinder 动态国际化

> ID：13914776
> 
> 赞同：0
> 
> 时间：2012-12-17T13:05:44.207
> 
> 标签：gwt, internationalization

我想通过`Dictionary`类方法在我的 GWT 应用程序中使用动态国际化。

我可以像这样将它与 uiBinder 一起使用吗？

```
<g:HTMLPanel>
    <span>{Dictionary.getDictionary("locale").get("hello_world_key")}</span>
</g:HTMLPanel> 
```

（Flex mxml 文件是这样工作的。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:39:30.027

不，UiBinder 仅支持调用零参数非静态方法或导入静态字段。

您必须将字典*隐藏*在类或接口后面才能执行类似`{myDictionary.hello_world_key}`.

IMO，如果您确实想使用动态 I18N，请使用类似于`com.google.gwt.i18N.shared.Constants`并制作您自己的生成器的接口，以便`String hello_world_key();`映射到`get("hello_world_key")`实例上`Dictionary`。您的代码将更好地阅读并变得更易于维护。

# c - FTPopen()、FTPclose() 等的 API 文档。人。在串联

> ID：13914777
> 
> 赞同：0
> 
> 时间：2012-12-17T13:05:50.207
> 
> 标签：c, ftp, sftp, tandem, hp-nonstop

我需要用 C 语言为 HP NonStop (Tandem) 编写一个 SFTP 服务器。现有的 FTP 服务器使用`FTPopen()`,`FTPput()`和等功能`FTPclose()`。

我在哪里可以找到有关这些功能的文档？

与 HP NonStop 文档一样，Google 用处不大……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T03:26:12.800

请参阅《HP NonStop TCP/IP 应用程序和实用程序用户指南》

第 8 章标题为“FTP API 外部规范”。有关常规 FTP 服务器 API 的信息在那里。

注意：如果您在 Itanium 或 Blade 服务器上安装了最新版本的 Guardian，那么它要么已经随附 HP NonStop SSH，要么您可以非常便宜地从 HP 购买它。这包括一个 SFTP 服务器作为 SSH 实现的一部分，它适用于 Guardian 和 OSS。它可以在没有任何停机时间的情况下实施。

如果您使用的是 S 系列服务器，则 HP 的该选项不可用，但相同的软件可在商业上获得。

# android - 应用程序在按下后退键时强制关闭

> ID：13914779
> 
> 赞同：2
> 
> 时间：2012-12-17T13:05:54.853
> 
> 标签：android, android-contacts, vcf-vcard

我正在开发一个 VCard 应用程序。在这里，我已经开始了默认联系人活动（通讯簿）。

现在，申请流程是这样的，

*   用户启动应用程序。
*   默认通讯录打开。
*   用户从列表中选择一个联系人，然后创建所选联系人的 Vcard。

现在，当用户在`Back Button`没有选择任何联系人的情况下按下时，应用程序会被强制关闭。

我有覆盖`BackKeyPress()`事件，但它不起作用。该应用程序仍在强制关闭。

我发布代码以供参考，

```
 protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
        startActivityForResult(intent, 1);
        Log.d("In Oncreate", "Activity Result");
    }
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
         if (keyCode == KeyEvent.KEYCODE_BACK) {
         //preventing default implementation previous to android.os.Build.VERSION_CODES.ECLAIR
             Toast.makeText(getApplicationContext(), "Back Pressed", 5000).show();
             finish();
         return true;
         }
         return super.onKeyDown(keyCode, event);    
    }
    @Override
    public void onActivityResult(int reqCode, int resultCode, Intent data) {
      super.onActivityResult(reqCode, resultCode, data);

      switch (reqCode) {
        case (1) :
            counter = "Yes";
    Log.d("My Tag", data.getExtras().keySet().toString());
    name_selected = data.getExtras().getString("android.intent.extra.shortcut.NAME");
    Log.d("My Tag", name_selected));
    Intent i = new Intent(getApplicationContext(), BusinessCardActivity.class);
    i.putExtra("name", name_selected);
    i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    getApplicationContext().startActivity(i);
       }
    }
} 
```

Logcat 错误：-

```
12-17 18:41:09.399: E/AndroidRuntime(23456): FATAL EXCEPTION: main
12-17 18:41:09.399: E/AndroidRuntime(23456): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=0, data=null} to activity {com.android.business/com.android.business.ReadContacts}: java.lang.NullPointerException
12-17 18:41:09.399: E/AndroidRuntime(23456):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2536)
12-17 18:41:09.399: E/AndroidRuntime(23456):    at android.app.ActivityThread.handleSendResult(ActivityThread.java:2578)
12-17 18:41:09.399: E/AndroidRuntime(23456):    at android.app.ActivityThread.access$2000(ActivityThread.java:117)
12-17 18:41:09.399: E/AndroidRuntime(23456):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:961)
12-17 18:41:09.399: E/AndroidRuntime(23456):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-17 18:41:09.399: E/AndroidRuntime(23456):    at android.os.Looper.loop(Looper.java:123)
12-17 18:41:09.399: E/AndroidRuntime(23456):    at android.app.ActivityThread.main(ActivityThread.java:3729)
12-17 18:41:09.399: E/AndroidRuntime(23456):    at java.lang.reflect.Method.invokeNative(Native Method)
12-17 18:41:09.399: E/AndroidRuntime(23456):    at java.lang.reflect.Method.invoke(Method.java:507)
12-17 18:41:09.399: E/AndroidRuntime(23456):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:874)
12-17 18:41:09.399: E/AndroidRuntime(23456):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:632)
12-17 18:41:09.399: E/AndroidRuntime(23456):    at dalvik.system.NativeStart.main(Native Method)
12-17 18:41:09.399: E/AndroidRuntime(23456): Caused by: java.lang.NullPointerException
12-17 18:41:09.399: E/AndroidRuntime(23456):    at com.android.business.ReadContacts.onActivityResult(ReadContacts.java:133)
12-17 18:41:09.399: E/AndroidRuntime(23456):    at android.app.Activity.dispatchActivityResult(Activity.java:3908)
12-17 18:41:09.399: E/AndroidRuntime(23456):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2532) 
```

在这里，用户应该从列表中选择一个联系人，但如果用户在没有选择任何联系人的情况下按下返回按钮，应用程序将被强制关闭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:41:03.737

用这个...

```
 @Override
public void onActivityResult(int reqCode, int resultCode, Intent data) {
  super.onActivityResult(reqCode, resultCode, data);

  switch (reqCode) {
    case 1:
    if(data!=null&&resultCode==RESULT_OK){

        counter = "Yes";
Log.d("My Tag", data.getExtras().keySet().toString());
name_selected = data.getExtras().getString("android.intent.extra.shortcut.NAME");
Log.d("My Tag", name_selected));
Intent i = new Intent(getApplicationContext(), BusinessCardActivity.class);
i.putExtra("name", name_selected);
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
getApplicationContext().startActivity(i);
   }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T13:16:25.547

在您的 OnActivityResult() 中执行此操作..

```
 @Override
  public void onActivityResult(int reqCode, int resultCode, Intent data) {
  super.onActivityResult(reqCode, resultCode, data);

  switch (reqCode) {
    case (1) :
     if (data != null && resultCode == RESULT_OK) {
        counter = "Yes";
    // Do some operations on the selected contact
     }
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T13:10:30.650

```
I have overidden BackKeyPress() event, but its not working. The app is still getting force closed. 
```

因为`backKeyPressed()`事件响应`Default Contacts activity(Address Book)`. 不适用于您的 Android 应用程序的活动。

当我看到您的代码`onActivityResult()`并且**没有任何 logcat 错误**时，我认为此崩溃可能发生`Default Contacts activity(Address Book)`在您的应用程序端而不是在您的应用程序端。此外，您必须检查是否`Default Contacts activity(Address Book)`已处理任何`Intent`（结果意图）以`onActivityResult()`作为对其他应用程序的响应目的。

所以**logcat 错误**在这里会更有帮助。

**编辑：**

**是的，我有疑问，**您的结果**数据**是`NULL`

在进行操作之前`Intent` 检查是否`data`为**空**，

```
if(data != null)
{
 Log.d("My Tag", data.getExtras().keySet().toString());
    name_selected = data.getExtras().getString("android.intent.extra.shortcut.NAME");
    Log.d("My Tag", name_selected));
    Intent i = new Intent(getApplicationContext(), BusinessCardActivity.class);
    i.putExtra("name", name_selected);
    i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    getApplicationContext().startActivity(i);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T13:17:31.227

由于在 onActivityResult 方法的第 133 行中抛出 NullPointerException，您的应用程序会被强制关闭。检查结果是否有效，并在其中放入一些 try catch。

```
12-17 18:41:09.399: E/AndroidRuntime(23456): Caused by: java.lang.NullPointerException
12-17 18:41:09.399: E/AndroidRuntime(23456):    at com.android.business.ReadContacts.onActivityResult(ReadContacts.java:133) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-17T13:11:36.587

您是否正在处理没有选定联系人的情况？如果用户按下并没有选择联系人，则在您的 onActivityResult 中，您应该处理“联系人”为空。

# c# - 如何在不阅读的情况下获取文件中的行数

> ID：13914786
> 
> 赞同：4
> 
> 时间：2012-12-17T13:06:12.650
> 
> 标签：c#

> **可能重复：**
> [如何快速计算行数？](https://stackoverflow.com/questions/6101367/how-to-count-lines-fast)

我有一些文件逐行包含数据。

我想获取文件中的行数以向用户显示进度状态。（我在后台逐行处理这些文件）

我可以通过完全读取文件来做到这一点，但是这些文件太大了，以至于我的应用程序不必要地占用了 RAM 空间。

所以我想在不读取整个文件的情况下获取文件中的行数。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T13:10:23.043

1.  读取文件的大小（以字节为单位）——操作系统会告诉你这一点。
2.  阅读前 1000 行（并处理它们）。
3.  计算平均线大小。
4.  将此平均大小除以文件大小。
5.  现在您已经估计了文件中的行数，对于进度条显示之类的东西来说足够准确。
6.  如果这不够准确，请在阅读文件时不时重新计算。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-17T13:07:49.403

显然你不能。获得行数的唯一方法是计算文件中的换行符，您需要为它读取文件。

> 我可以完全用读取文件来做到这一点。但是这些文件太大了。因此，我的应用程序不必要地消耗 RAM。

您可以部分读取文件（以便每个部分都足够小以容纳内存）并从每个小部分累积行数。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-17T13:08:10.527

```
var lineCount = File.ReadLines(@"C:\file.txt").Count(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T13:11:46.340

如果不将其读入内存（您不需要一次读取整个文件，您可以**逐行****读取**，例如*使用*，不会消耗太多内存）。也看看[类似的问题](https://stackoverflow.com/questions/6101367/how-to-count-lines-fast)****`ReadLine`****

 ****```
long count = 0;
using (StreamReader r = new StreamReader(f))
{
    string line;
    while ((line = r.ReadLine()) != null)
    {
        count++;
    }
}

return count; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T14:09:28.777

另一种可能性，但这仅适用于您还负责开发生成数据文件的应用程序的情况，即让它创建两个文件。一个包含数据，一个只包含数据文件的行数。然后当您准备好处理数据文件时，您的处理应用程序可以从行数文件中读取行数，然后开始处理数据文件。

如果您无权访问数据生成应用程序，请忽略此答案，因为它不适用于您的问题。****

# javascript - 如何为多次呈现的部分创建一个 html 代码

> ID：13914788
> 
> 赞同：1
> 
> 时间：2012-12-17T13:06:21.213
> 
> 标签：javascript, jquery, ruby-on-rails-3, modal-dialog, dry

我有一个`post`模型`has_many :comments`。对于每个评论（`_comment.html.erb`部分生成），我都有一个小星形图标，以便可以为评论加星标。

我想在用户单击星号时打开一个模式表单（引导程序）。

我知道如何创建模态。但是，如果我将该代码放在`_comment`部分中，它将为每个评论呈现。

有没有办法在没有 javascript 的情况下为每个评论打开一个模式窗口（或者这可能是唯一的方法）？

_评论：

```
<div id="comment-#{comment.id}>
<%= comment.content %>
<a href="#starModal" id="star"  data-toggle="modal"><i class="icon-star"> </i></a>
</div>

  <div id="starModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="starLabel" aria-hidden="true">
      <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3 style="text-align: center;">Star Me!</h3>
      </div>
      <div id="starpop">
        <%= render :partial => 'layouts/star_form' , :locals => {:comment => comment,:post => post} %>
      </div>
    </div> 
```

发布/show.html.erb

```
<div class="post">

<%= @post.body %>

<% @post.comments.each do |c| %>
<%= render :partial=>'comment', :locals=>{:comment => c, :post => @post} %>
<% end %>

</div> 
```

模式代码是正确的方法，还是可以以 DRY 的方式改进（而且对用户来说也不重（想象帖子在一个页面中有数百条评论......所以对于每个评论来说，它的数据只有一个模型的两倍） ?) ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:45:14.850

如果您还没有创建自己的明星资源，至少有一个“新”和“创建”操作，如何？然后你的模态将是通过 ajax onclick 加载的新动作。

```
<%= link_to "<img src='...' />".html_safe, new_star_path, remote: true %> 
```

在你的 starscontroller 新动作中：

```
...
respond_to do |format|
  format.js
end
... 
```

然后创建一个 new.js.erb：

```
$("#place_for_modal").html("<%= escape_javascript(render 'new') %>");
$('#starModal').modal('show') 
```

使您的 modal-div 成为 _new.html.erb 部分。

# objective-c - 带有子视图的 UIScrollView setContentSize 也使用约束布局

> ID：13914790
> 
> 赞同：2
> 
> 时间：2012-12-17T13:06:36.177
> 
> 标签：objective-c, uiscrollview, ios6, nslayoutconstraint

假设我有以下**实现**：

*   `UIPageViewController`
*   `UIScrollView`称为*mainScrollView*添加`subview`到`UIPageViewController.view`

    [UIScrollView setTranslatesAutoresizingMaskIntoConstraints:NO];

*   `UIScrollView`使用子视图布局，`NSLayoutConstraints`并且每个子视图都已`setTranslatesAutoresizingMaskIntoConstraints`设置为 NO。

如何将内容大小设置`UIScrollView`为等于其子视图中最大的 MaxY 坐标？

这是我的代码示例：

```
UIScrollView *scrollView = [self mainScrollView];
UIView *superView = [self view];
NSDictionary *viewsDictionary = NSDictionaryOfVariableBindings(scrollView, superView);
[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[scrollView(==superView)]|" options:0 metrics: 0 views:viewsDictionary]];
[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[scrollView(==superView)]|" options:0 metrics: 0 views:viewsDictionary]];

UIView *previousView = scrollView;
for (int i=0;i<150; i++) {
    UITextView * textView = [[UITextView alloc] init];
    [textView setBackgroundColor:[UIColor colorWithRed:101.1f/255.f green:175.f/255.f blue:105.f/255.f alpha:1.f]];
    [textView setTranslatesAutoresizingMaskIntoConstraints:NO];
    [scrollView addSubview:textView];
    [scrollView addConstraint:[NSLayoutConstraint constraintWithItem:textView
                                                           attribute:NSLayoutAttributeTop
                                                           relatedBy:NSLayoutRelationEqual
                                                              toItem:previousView
                                                           attribute:NSLayoutAttributeTop
                                                          multiplier:1
                                                            constant:50]];
    [scrollView addConstraint:[NSLayoutConstraint constraintWithItem:textView
                                                           attribute:NSLayoutAttributeLeft
                                                           relatedBy:NSLayoutRelationEqual
                                                              toItem:textView.superview
                                                           attribute:NSLayoutAttributeLeft
                                                          multiplier:1
                                                            constant:0]];
    [scrollView addConstraint:[NSLayoutConstraint constraintWithItem:textView
                                                           attribute:NSLayoutAttributeWidth
                                                           relatedBy:NSLayoutRelationEqual
                                                              toItem:scrollView
                                                           attribute:NSLayoutAttributeWidth
                                                          multiplier:1
                                                            constant:0]];
    [scrollView addConstraint:[NSLayoutConstraint constraintWithItem:textView
                                                           attribute:NSLayoutAttributeHeight
                                                           relatedBy:NSLayoutRelationEqual
                                                              toItem:scrollView
                                                           attribute:NSLayoutAttributeNotAnAttribute
                                                          multiplier:1
                                                            constant:40]];
    previousView = textView;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T01:59:54.143

我建议您使用 viewController *viewDidLayoutSubviews*来捕获约束求解器完成视图布局的点。然后获取最大 frame.origin.y 的 subView 并添加它的高度和可选的偏移量。像这样的东西：

```
scrollView.contentSize = CGSizeMake(superView.frame.size.width,maximumYView.origin.y + maximumYView.size.height + offset); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T13:17:59.777

你可以这样设置：

```
[mainScrollView setContentSize:CGSizeMake(yourWidth,yourHeight)]; 
```

# php - 如何在 jquery 选择器中传递 php 变量值？

> ID：13914792
> 
> 赞同：1
> 
> 时间：2012-12-17T13:06:41.260
> 
> 标签：php, jquery, mysql, jquery-selectors

我想突出显示其 id 是从 mysql 数据库中检索到的映射图像的那一部分。我已将 id 存储在 $loc 变量中。现在使用 jquery 选择器，我想在我的 jquery 选择器中传递这个 php 变量，以便它突出显示与 $loc 中具有相同 id 的图像部分。这是我的工作代码：

```
 <script type="text/javascript" src="jquery.js"></script>
 <script type="text/javascript" src="jquery.maphilight.js"></script>
<script type="text/javascript">
 $(function () {
        $(".mapping").maphilight();

    $(".hoverable").css("border", "3px solid red");

    var data = $('#cr2').data('maphilight') || {};  
    data.alwaysOn = !data.alwaysOn;
    $('#cr1').data('maphilight', data).trigger('alwaysOn.maphilight'); // portion to always highlight (I WANT TO PASS THE PHP VARIABLE $LOC INSTEAD OF '#CR1'

});<area shape="poly" id="cr1" class="room" coords="549,272,489,334,534,377,594,316" href="www.msn.com" target="_top" alt="CR1" name="room-1"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T13:11:32.550

将**#cr1**替换为`#<?php echo $loc ?>`

代替：

```
$('#cr1').data('maphilight', data).trigger('alwaysOn.maphilight'); 
```

利用：

```
$('#<?php echo $loc ?>').data('maphilight', data).trigger('alwaysOn.maphilight'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T13:11:03.790

您可以使用`json_encode`函数并将 php 变量`$loc`作为参数传递

例如

```
var data = <?php echo json_encode($loc); ?>;

jQuery.each(data, function(i,event) {
   // alert(event.toSource());
   var id = event.id;  // here id is the array of the value based on the php variable for $loc
   badge_name = event.name; // here name is the array of the value based on the php variable for $loc
}); 
```

# .net - .NET 反汇编、编辑和修补

> ID：13914796
> 
> 赞同：3
> 
> 时间：2012-12-17T13:06:59.830
> 
> 标签：.net, edit, patch, disassembly, ida

我需要编辑一个 .NET 可执行文件。我是十六进制编辑的新手。我已将其导入 IDA 6.1 Pro 并在 IDA-View Window 中对其进行编辑。

原来的：

```
ldstr    "Uri : " 
```

我改为（右键单击>手动...（手动操作数））：

```
ldstr    "Uri : localhost" 
```

我已经安装了 PatchDiff2（IDA 插件），但这对我不起作用：

```
Scanning for functions ...
parsing second idb...
Error: IDB2 parsing cancelled or failed. 
```

是否有另一种方法来提交对可执行文件的更改？原始字节值为：`72 BD 1B 00 70 02 7B 59 00 00 04 28 1B 00 00 0A`

我如何获得（我需要它从 Edit\Patch program\chenge Bytes 修补）新的 HEX 值

```
ldstr    "Uri : localhost" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:08:04.043

我使用 ildasm 而不是 IDA。它工作完美。

> IDA 不会是我的首选工具。只需使用 ildasm.exe 反编译程序集，编辑 IL，将 humpty-dumpty 与 ilasm.exe 重新组合在一起

感谢[汉斯·帕桑特](https://stackoverflow.com/users/17034/hans-passant)

# arrays - 如何为数组设置属性？

> ID：13914798
> 
> 赞同：2
> 
> 时间：2012-12-17T13:07:12.947
> 
> 标签：arrays, properties, d

我有：

```
@property float x(float[2] vector)
{
    return vector[0];
}

@property void x(float[2] vector, float value)
{
    vector[0] = value;
} 
```

例如，我可以声明一个数组，`float[2] a;`然后通过简单地调用来获取数组的第一个元素`a.x`，但是如果我想设置`a[0]`，我不能调用`a.x = 3.14`。它不会对编译器造成问题，也不会引发异常。后来当我得到`a[0]`它时说它是`NaN`which is `float.init`。这意味着 a[0] 从未被设置并且`a.x`同时有效和​​无效。

我只想要一个浮点数组并有一个获取和设置属性 x。有没有办法做到这一点？而且我知道我可以`a.x(3.14)`用于设置`a[0]`，但我想让它好像`x`是的成员属性`a`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T13:09:00.110

静态数组按值传递。您需要使用`ref`通过引用传递：

```
@property float x(ref float[2] vector)
@property void x(ref float[2] vector, float value) 
```

注意：我指的是 D2。D1 静态数组中的 AFAIK 过去是按引用传递的，但在 D2 中，它们默认按值传递。

# .net - 如何根据标签、时间和投票进行智能选择（Reddit）？

> ID：13914799
> 
> 赞同：-2
> 
> 时间：2012-12-17T13:07:15.730
> 
> 标签：.net, sql, asp.net-mvc, entity-framework

假设我们有以下表格：

**帖子**

*   投票（上/下）
*   标签
*   创建日期

**用户**

*   标签

现在我们需要生成一个像这样排序的特殊列表：

*   赞成/反对票
*   创建日期
*   标签（当前用户收听的）

此列表应基于帖子的主要流程，然后是混合帖子，其中我收听的标签的评分比其他标签高一些。

你可以说我需要在第一页上创建类似 reddit.com 的东西。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:33:34.070

在这里查看我提出的问题，我认为它大致解决了您如何加载计算值的相同问题（在我的情况下，通过使用 ViewModel 并查询存储库 - 使用存储库模式的 MVC 应用程序）。在您的情况下，也许您使用聚合数据在数据库中维护一个视图，以便您在插入而不是读取时进行一些密集计算？

[具有计算属性的实体框架](https://stackoverflow.com/questions/13882899/entity-framework-with-calculated-property)

# android - 如何为 iOS 和 Android 创建多轨播放器（如 dj 混音器）？

> ID：13914807
> 
> 赞同：0
> 
> 时间：2012-12-17T13:07:42.150
> 
> 标签：android, ios, html, actionscript-3, tablet

我想为网站创建一个多轨播放器（如 dj 混音器）。

我尝试使用 html 5 创建它，但它不适用于 safari iOS（iPad、iPhone），因为使用 <audio> 无法同时播放多个声音

```
<audio src='audio/son-AMBIANCE.mp3' id="yourAudio" preload='auto' autoplay loop></audio>
<audio src='audio/son-MUSIQUE.mp3' id="yourAudio" preload='auto' autoplay loop></audio>
<audio src='audio/son-VOIX.mp3' id="yourAudio" preload='auto' autoplay loop></audio> 
```

在 iOS 上，只播放第一个 mp3。

我想到了这个解决方案：创建一个应用程序。

你认为有可能在 Objective C 中创建一个 dj 混音器吗？或者对我来说更好的是，创建一个带有 flash 的 dj 混音器并将其导出到 Android 和 iOS（对我来说更好，因为我知道 actionScript 3）。

您认为这是一个好主意并且在技术上可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:32:16.107

[您可以使用 Adob​​e 的最新游戏 SDK](http://gaming.adobe.com/technologies/gamingsdk/)创建一个 AIR 应用程序，该应用程序在 Android 和 IOS 上运行良好。它将为您提供创建流畅的 DJ 混音器类应用程序并同时运行多个声音文件所需的一切。但是，如果您有任何非常大的列表，一些用户可能会抱怨大列表（超过 30 项）的迟缓

您也可以在 IOS 中创建应用程序，只要您使用正确的文件格式，就可以播放多层音频。

如果应用程序在视觉上很简单，一次只显示列表中的几个对象，我建议使用 AIR，如果你有非常重的动画或非常大的歌曲列表，我建议使用 Objective C 用于 IOS 或 Java 用于 Andorid。

# php - jQuery mobile ajax 登录表单认证

> ID：13914809
> 
> 赞同：2
> 
> 时间：2012-12-17T13:07:50.373
> 
> 标签：php, jquery, ajax, forms, jquery-mobile

我知道我已经问过类似的问题，但是现在当我使用 jQuery Mobile 时，我无法弄清楚。所以我有这个表格：

```
<div data-role="page" data-theme="a" id="login_page">
        <div data-role="header" data-position="fixed">
            <h1>****</h1>
        </div>
        <div data-role="content">
            <form id="login_form" method="POST" data-ajax="false">
            <label for="basic">Username:</label>
            <input type="text" name="name" id="username" value=""/>
            <label for="basic">Password:</label>
            <input type="password" name="password" id="password" value=""/>
            <input type="submit" value="Login" id="login" name="login"/>
            </form>
        </div>
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar"></div>
        </div>
</div> 
```

我需要将用户名和密码提交给 php 脚本，php 会在其中回复并发送“成功”或“失败”。这是php：

```
<?php
session_start();

$username = $_POST["name"];
$password = $_POST["password"];

include('mysql_connection.php');
mysql_select_db("jzperson_imesUsers", $con);

$res1 = mysql_query("SELECT * FROM temp_login WHERE username='$username' AND password='$password'");
$count=mysql_num_rows($res1);

if($count==1){
    echo "success";
}else{
    echo "failed";
}
?> 
```

为了做到这一切，我想使用这个脚本：

```
$(document).ready(function() {
        $("form").submit(function(){
            $.mobile.showPageLoadingMsg();

            $.ajax({
                url: "http://imes.jzpersonal.com/login_control.php",
                type: "POST",
                dataType: "jsonp",
                jsonp: "jsoncallback",
                data: $("form#login_form").serialize(),
                success: function( response ){
                    $.mobile.changePage( "http://imes.jzpersonal.com/user_panel.html");
                }
            });
            return false;
        });
    }); 
```

但我无法让它发挥作用，我知道我一定有错误，我只是找不到它们，或者更好的方法来做到这一点。预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:00:57.330

你的错误很少。

I. JSONP 只允许 type: "GET" 但你可以完全删除它。

这是 JSONP $.ajax 调用的一个工作示例：

```
 $.ajax({url: server_url,
        data: save_data,
        dataType: "jsonp",
        jsonpCallback: 'successCallback',
        async: true,
        beforeSend: function() {
            $.mobile.showPageLoadingMsg(true);
        },
        complete: function() {
            $.mobile.hidePageLoadingMsg();
        },
        success: function (result) {
            alert(result);
        },
        error: function (request,error) {
            alert(error);
        }, 
       successCallback:function(){

        }
    }); 
```

二、现在最重要的是，因为您使用的是 JSON/JSONP，所以您不能只在 PHP 中使用 echo "SOME_STRING"。首先，您必须使用 json_encode() 函数来正确格式化结果数据，并且需要将其包装在 jsonpCallback 函数中：

```
echo $_GET['callback'] . '(' . "{'some' : 'example'}" . ')'; 
```

或者：

```
echo $_GET['callback'] . '(' . ###your_serialized_json_output### . ')'; 
```

三、最后，您需要修改您的服务器，以便它可以处理 JSONP 调用。

在这里你会找到更多关于它的信息：

[http://www.geekality.net/2010/06/27/php-how-to-easily-provide-json-and-jsonp/](http://www.geekality.net/2010/06/27/php-how-to-easily-provide-json-and-jsonp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:02:42.317

虽然在客户端做尽可能多的工作通常是个好主意，但身份验证应该在服务器端完成。您的`user_panel`脚本应检查身份验证。

其次，您应该使用`mysql_real_escape_string`. 您的代码应该是：

```
$res1 = mysql_query("SELECT * FROM temp_login 
                     WHERE   username='".mysql_real_escape_string($_POST['username'])."' 
                     AND password='".mysql_real_escape_string($_POST['password'])."'"); 
```

# apache-flex - 如何在 Flex 中将字符串转换为 ArrayCollection？

> ID：13914810
> 
> 赞同：1
> 
> 时间：2012-12-17T13:07:51.243
> 
> 标签：apache-flex, flex4

实际上我的 Flex 应用程序..示例代码

```
private var selectedDays:String = null;
            protected function selectRepeatedDays(event:MouseEvent):void
            {
                selectedDays = new String();
                if(MON.selected==true)
                {
                    selectedDays += "MONDAY,";
                    Alert.show("Monday  :"+selectedDays);
                }
                if(TUE.selected==true)
                {
                    selectedDays +=  "TUESDAY,";
                }
                if(WED.selected==true)
                {
                    selectedDays += "WEDNESDAY,";
                    Alert.show("Monday  :"+selectedDays);
                }
                if(THU.selected==true)
                {
                    selectedDays += "THURSDAY,";
                }

}
var arr:ArrayCollection = new ArrayCollection();
arr = selectedDays.substr(0, selectedDays.length-1).toString();

Alert.show(arr.lenth) 
```

但这不是转换... Alert Statement Not Prompt .. 那么如何将此字符串转换为 ArrayCollection...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:50:14.787

使用[split](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/String.html#split%28%29)方法将 String 转换为 Array：

```
var array:Array = selectedDays.split(","); 
```

然后（如果需要）将 Array 的每个项目添加到 ArrayCollection：

```
var arr:ArrayCollection = new ArrayCollection();
for each (var str:String in array) {
    arr.addItem(str);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-15T10:27:28.940

使用下面的代码片段将 String 转换为 ArrayCollection

1.  使用 split 方法将字符串转换为数组

    ```
    var array:Array = selectedDays.split(","); 
    ```

2.  将数组转换为 ArrayCollection

    ```
    var selectedDaysArr:ArrayCollection = new ArrayCollection(array); 
    ```

# php - 从 MySQL 获取行的特定部分

> ID：13914813
> 
> 赞同：-1
> 
> 时间：2012-12-17T13:08:04.960
> 
> 标签：php, mysql

我正在做即将发生的事件，它从另一个脚本的 MySQL 中获取数据（在这种情况下，另一个 Joomla 扩展）

感谢 Alex Mihai，我知道如何展示即将举行的活动：

```
 SELECT * FROM EventTable
WHERE Date > CURDATE()
ORDER BY Date
LIMIT 1; 
```

现在我需要以特定方式显示该事件的日期。我有这种格式的事件日期（以数字为例）：2012-12-30

是否可以从此行中仅选择中间字符（月份编号）并进行如下操作：如果 12 = 十二月，如果 01 = 一月等（月份名称只是示例）

为了获得清晰的图像，我正在尝试使用以下数据制作即将举行的活动：

3 个以母语表示的月份首字母、月份中的某天、活动标题（活动标题已经生效）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:09:45.843

利用`DATE_FORMAT`

```
SELECT DATE_FORMAT(columnName, '%M %d, %Y') eventDate
FROM tableName 
```

顺便说一句，这输出`January 01, 2013`

更多格式请点击下方链接

*   [使用 MySQL DATE_FORMAT() 格式化日期字段](http://davidwalsh.name/format-date-mysql-date_format)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:13:26.027

使用 PHP，您也可以这样做：

```
$date = strtotime($row['Date']);
echo date('D j', $date); 
```

更多关于 date() 和格式化选项： http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

# php - 在模型中使用条件语句

> ID：13914818
> 
> 赞同：0
> 
> 时间：2012-12-17T13:08:23.257
> 
> 标签：php, yii

是否可以在 Yii 模型中添加条件语句

例如：

在用户模型中，我需要检查用户是否为管理员，然后在更新信息中控制器手机号码字段将显示为必填字段，但如果用户是普通用户，则将字段属性更改为空或不需要

```
array('mobile','length', 'max'=>14 ,'min'=>3), 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:18:23.397

回声（如果（isset（admin_session）））？'为管理员编写更新代码' : '编写普通用户更新代码';

# django - Django 管理员扩展视图

> ID：13914819
> 
> 赞同：1
> 
> 时间：2012-12-17T13:08:24.993
> 
> 标签：django, django-admin, django-views

我已经构建了一个 Django 投票应用程序。模型非常简单。我有一个类别、一个条目和参与者模型

```
class Category(models.Model):
    name = models.CharField(max_length=30)
    slug = models.SlugField()

class Participant(models.Model):
    name = models.CharField(max_length=30)

    def __unicode__(self):
        return self.name

class Entry(models.Model):
    votes = models.IntegerField()
    category = models.ForeignKey(Category)
    participant = models.ForeignKey(Participant)

    def __unicode__(self):
        output = 'Entry For {0} in Category {1}'.format(self.participant, self.category)
        return output 
```

很简单。您可以使用默认的 django 管理模型添加类别、条目和参与者。这真的很好用。

现在的问题：

在管理员中，我希望用户单击一个按钮，并显示数据库中所有类别的所有获奖者列表。我对如何实现这一点有一个想法，我基本上希望用户在管理界面中提交表单。我知道管理界面是通过所有 djanog 应用程序都是 MVC 风格的方式实现的。但我不知道我可以在哪里扩展，因为 adminBaseModel / adminModel 同时充当模型和视图控制器，以及 url-confs。在那里重新连接很多互联网似乎很困难。

有人可以指出我正确的方向吗？只想简单地实现我自己的视图，它只是用我自己的上下文和方法调用扩展管理视图。

我希望这很清楚。感谢您的所有帮助。

# jquery - 级联下拉列表

> ID：13914822
> 
> 赞同：0
> 
> 时间：2012-12-17T13:08:54.040
> 
> 标签：jquery, sql-server, asp.net-mvc-3, list, cascadingdropdown

对于我的应用程序，我需要合并一些下拉列表，以便根据这些列表中选择的不同值显示一些表格。但是当我在一个列表中选择一个值时，另一个填充该值的函数，我不知道该怎么做。

在我的应用程序中，我只使用这样的原始查询：

```
 string requeteAppli ="select distinct CD_APPLI, ORDRE_APPLI from dbo.REF_APPLI where CD_APPLI != 'PNB' order by ORDRE_APPLI"; 
```

使用这样的函数执行它们：

```
public List<DataRow> executerRequete(string query)
    {
        //Initialisation d'une variable Liste contenant des lignes de données où seront récupérés les résultats de la requête suivante.
        List<DataRow> liste = null;

        //Création d'une variable de connection où sont stockés toutes les informations nécessaires à la connexion à la base de données.
        //Ces informations sont stockées dans le fichier de config Web.config.
        string connString = ConfigurationManager.AppSettings["REF_ConnectionString"];

        //Création d'un objet instance de SqlConnection (classe permettant la connexion ouverte à une base de données) où est stocké le contenu de la variable connString.
        using (SqlConnection conn = new SqlConnection(connString))
        {
            //Création d'un objet de commande permettant de spécifier comment la commande sera inteprétée, ici en commande de texte SQL avec CommandType.Text.
            using (SqlCommand objCommand = new SqlCommand(query, conn))
            {
                //Création d'un objet de commande permettant de spécifier comment la commande sera inteprétée, ici en commande de texte SQL avec CommandType.Text.
                objCommand.CommandType = CommandType.Text;
                //Création d'un objet instance de DataTable qui va récupérer la résultat de la requête.
                DataTable dt = new DataTable();
                //Création d'un objet instance de SqlDataAdapter qui va effectuer le lien avec SQL Server afin de récupérer les données.
                SqlDataAdapter adp = new SqlDataAdapter(objCommand);
                //Ouverture de la connexion.
                conn.Open();
                //L'instruction FILL récupère les données de la source de données et les insère dans dt.
                adp.Fill(dt);
                //Vérification du contenu de dt.
                if (dt != null)
                {
                    //Remplissage de la liste.
                    liste = dt.AsEnumerable().ToList();
                }
            }
        }

        //Le résultat est retournée à l'action.
        return liste;
    } 
```

问题出在这些查询上，我看过很多关于如何使用 ASP.NET MVC 和 jQuery 实现级联下拉列表的教程，但它不是这种查询风格，我完全对它们感到困惑，我不能改变它们。

我在这样的操作中得到了这些查询的结果：

```
var queries = new query();
var items = rq.executerRequete(requeteIndex);
queries.Query2 = (from i in items2
                  select new Suivi { CD_APPLI = i.Field<String>("CD_APPLI") }).ToList(); 
```

我的目标是拥有第一个应用程序列表，当用户选择一个值时，另一个包含某个日期（取决于所选应用程序）的列表填充功能。这是获取所选应用程序功能日期的查询：

```
var itemsDate = rq.executerRequete(requetePERIODE);
var periode = (from i in itemsDate
               where i.Field<String>("CD_APPLI").Trim() == appli.Trim()
               select new Suivi { PERIODE = i.Field<Int64>("PERIODE") }); 
```

我完全迷失了这些级联下拉列表，我真的需要你的帮助：/如果你需要代码，我可以给你这个，但即使我已经为这些列表尝试了一些解决方案，我也不能给你一个我的例子代码（javascript）因为它根本不起作用而且我做任何事情，我的代码只是很多废话......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:35:32.513

服务器端，您使用应用程序 ID 和要显示的内容填充应用程序下拉列表

客户端，您需要在第一个下拉列表的更改事件上附加一个函数以获取数据并填写日期下拉列表，例如

```
 $(document).ready(function(){
     $('#CboApplications').change(function() {
      function getDates() {
      $.ajax({
          type: "POST",
          url: "Reg_Form.aspx/GetDates",
          data: "{'applicationId':" + ( $('#CboApplications').val()) + "}",
          contentType: "application/json; charset=utf-8",
          global: false,
          async: false,
          dataType: "json",
          success: function(jsonObj) {
             for (var i = 0; i < jsonObj.Table.length; i++){
               listItems+= "<option value='" + jsonObj.Table[i].PERIODE+ "'>" + jsonObj.Table[i].PERIODE+ "</option>";
              }
             $("#cboDates").html(listItems);
        }
    });
    return false;
}
    }); 
```

要获取数据，您将需要一个 Web 方法或一个带有执行查询代码的 Web 方法的 Web 服务

```
<WebMethod()> _
Public Sub GetDates(ByVal applicationId As String)
    //use correct qry based on applicationId 
    var itemsDate = rq.executerRequete(requetePERIODE);
    var periode = (from i in itemsDate
           where i.Field<String>("CD_APPLI").Trim() == appli.Trim()
           select new Suivi { PERIODE = i.Field<Int64>("PERIODE") });
    Return periode 
End Sub 
```

此代码不会 100% 正确，因为我无法自己在 atm 进行测试，但这个概念可能会对您有所帮助

页面中的示例 webmethod（重要的是用于 ajax 调用的静态、WebMethod 和 ScriptMethod）

```
public partial class Products : System.Web.UI.Page 

   { 
    [System.Web.Services.WebMethod()] 
    [System.Web.Script.Services.ScriptMethod()] 
    public static List<Product> GetProducts(int cateogryID) 
    {
      // Put your logic here to get the Product list 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:36:28.910

是的 ！！！有用 ！！

问题在于获得第二个列表结果的查询，我必须这样做：

```
var periode = (from i in itemsDate
                       where i.Field<String>("CD_APPLI").Trim() == appli.Trim()
                       select new { value = i.Field<Int64>("PERIODE").ToString(), text = i.Field<Int64>("PERIODE").ToString() }); 
```

而不是这样：

```
 var periode = (from i in itemsDate
                       where i.Field<String>("CD_APPLI").Trim() == appli.Trim()
                       select new SelectListItem { Value = i.Field<Int64>("PERIODE").ToString(), Text = i.Field<Int64>("PERIODE").ToString() }); 
```

我的其余代码相对于第二个答案没有变化。

现在我将尝试第三个列表，如果我有其他问题，我会回到这里。

真的感谢你的帮助，ufosnowcat :D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:51:33.510

作为对最后一条评论的回答

添加一个请选择将是一种方法；在您的 3d 列表数据的返回函数中，在位置 0 上插入一个值“请选择”，强制用户触发操作

另一种选择是：1）将您现在在 .change 函数中调用的逻辑放在一个单独的函数中，这样更容易从多个地方调用

然后在填充当前（3d）列表后绑定更改函数的位置检查列表中是否只有一项，如果调用该函数来填充第 4 个列表，您可以将其集成到每个列表的填充中：在

```
$.each(months, function (index, periode) {... })); 
```

放一些类似的东西（检查你可以用句号做什么）

```
if (periode.count() == 1) {fillnextList();}; 
```

# android - Asynctask：从设备电话簿中检索联系人图片

> ID：13914825
> 
> 赞同：0
> 
> 时间：2012-12-17T13:09:00.973
> 
> 标签：android, android-asynctask

在我的应用程序中，我试图检索电话簿联系人图像的图像并显示在列表中。下面是我的代码

```
public InputStream getContactPhoto(Context context, String profileId){
        try{
            ContentResolver cr = context.getContentResolver();
            Uri uri = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, Long.parseLong(profileId));
            return ContactsContract.Contacts.openContactPhotoInputStream(cr, uri);
        }catch(Exception e){
            return null;
        }
    }

    private Bitmap loadContactPhoto(ContentResolver cr, long id) {
        Uri uri = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, id);

        InputStream input = ContactsContract.Contacts.openContactPhotoInputStream(cr, uri);

        if (input == null) {
            return null;
        }
        return BitmapFactory.decodeStream(input);
    } 
```

它的工作，但不知何故它不顺利，所以想实现使用 asynctask 获取图像 关于如何使用上述代码实现的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:28:36.450

例如，如果您正在使用 ImageView 并想要加载图片（在此示例中，它从 SDCard 检索图像），您可以这样做：

- 创建一个扩展 ImageView 的自定义类

```
public class SDImageView extends CacheableImageView {
    ...
} 
```

- 使用您需要的参数创建一个名为`load()`（或任何您想要的）的方法。在我的情况下是图像的路径：

```
public final void loadImage(final String tpath) {
        if (tpath == null) {
            return;
        }

        SDLoadAsyncTask.load(this, tpath);
    } 
```

- 创建一个扩展AsyncTask的类，并在`doInBackground`方法中实现你想要做的操作

```
private static class SDLoadAsyncTask extends AsyncTask<Void, Void, Bitmap> {

        final SDImageView view;
        final String path;

        private SDLoadAsyncTask(SDImageView view, String path) {
            this.view = view;
            this.path = path;
        }

        @Override
        protected final Bitmap doInBackground(Void... params) {
            Bitmap bmp = null;
            InputStream is = null;
            try {
                is = new FileInputStream(mContext.getExternalFilesDir(null) + "/" + path);
                bmp = BitmapFactory.decodeStream(is);
            } catch (Exception e) {
                Utils.logMsg("Exception for img " + path, e);
            } finally {
                try {
                    is.close();
                } catch (Exception e2) {
                }
            }
            return bmp;

        @Override
        protected final void onPostExecute(Bitmap result) {
            view.setImageBitmap(result);
        }
} 
```

# javascript - jQuery Infinite-scroll 在同一页面上加载内容（非远程）

> ID：13914832
> 
> 赞同：1
> 
> 时间：2012-12-17T13:09:36.530
> 
> 标签：javascript, jquery, infinite-scroll

我使用这个 jQuery 插件： [https ://github.com/paulirish/infinite-scroll](https://github.com/paulirish/infinite-scroll)

我目前使用这个：

```
$container.infinitescroll({
    navSelector     : "#next:last",
    nextSelector    : "a#next:last",
    itemSelector    : ".veilingblok",
    path: function(index) {
        return "index2.html";
    }
}); 
```

一切都很好，很棒的插件，但是，我使用远程页面来获取额外的内容。

有没有办法滚动页面上已经存在但隐藏的数据？例如：我想加载总共 50 个 div。如果用户打开页面，会显示 10 个 div，隐藏 40 个。当他滚动到页面底部时，这 40 个隐藏 div 中的另外 10 个会显示出来。

所以我不想使用远程文件来加载新的 div。那可能吗？

希望有人能把我推向正确的方向。谢谢。

# coldfusion - 在 Coldfusion 中显示结构信息

> ID：13914841
> 
> 赞同：1
> 
> 时间：2012-12-17T13:10:27.583
> 
> 标签：coldfusion

我想显示结构键的值，例如：

```
 #stReviewDetail['tags']['travelParty']['value']# 
```

有可能`tags`，`travelParty`或`value`缺失。检查结构层次结构是否可用的最佳方法是什么？就像是：

```
<cfif StructKeyExists(stReviewDetail, 'tags') AND 
      StructKeyExists(stReviewDetail['tags'], 'travelParty') AND 
      StructKeyExists(stReviewDetail['tags']['travelParty'], 'value') >
    ....
</cfif> 
```

还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T16:38:47.793

多个 StructKeyExists 很难看，很容易编写一个函数来简化它：

**用法：**

```
<cfif CheckNestedKeys(stReviewDetail,['tags','travelParty','value']) >
    #stReviewDetail['tags']['travelParty']['value']#
</cfif> 
```

**代码：**

```
<cffunction name="CheckNestedKeys" returntype="Boolean" output=false>
    <cfargument name="Struct" type="Struct" required />
    <cfargument name="Keys"   type="Array"  required />

    <cfset var CurStruct = Arguments.Struct />

    <cfloop index="local.CurKey" array=#Arguments.Keys# >
        <cfif StructKeyExists(CurStruct,CurKey)>
            <cfset CurStruct = CurStruct[CurKey] />
        <cfelse>
            <cfreturn false />
        </cfif>
    </cfloop>

    <cfreturn true />

</cffunction> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T16:58:12.557

如果您知道特定的键，则可以使用`isDefined`：

```
<cfif isDefined("stReviewDetail.tags.travelParty.value")>
    <cfdump var="#stReviewDetail.tags#">    
</cfif> 
```

# php - Array_in_String

> ID：13914842
> 
> 赞同：2
> 
> 时间：2012-12-17T13:10:28.073
> 
> 标签：php, arrays, search

我刚刚写了这个函数：

```
function Array_in_String($Haystack1, $Values1)
{
    foreach ($Values1 as $token1) 
    {
        if (strpos($Haystack1, $token1) !== false) return true;
    }
} 
```

它基本上`$Haystack1`在一个字符串中搜索数组中的多个值，`$Values1`如果匹配则返回 true。

在此之前，我在 PHP 中搜索了很多类似的字符串函数。我还在想PHP是否有类似的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:14:18.647

不，PHP 没有您需要的功能。
**编辑**
如果您想多次使用某些代码，请创建您的自定义函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:27:23.307

我不知道这样的功能，但你的逻辑可以通过使用大大简化[`str_replace`](http://php.net/manual/en/function.str-replace.php)。

```
function array_in_string($haystack, $needles) {
    return str_replace($needles, '', $haystack) !== $haystack;
} 
```

[**小提琴**](http://codepad.viper-7.com/Dzolyq)

但是，如果您的针阵列真的很大，那么您问题中发布的代码可能会具有更好的性能，因为它将`true`在第一场比赛中返回，而我的解决方案总是遍历所有针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T13:40:44.310

```
return array_reduce(
  $Values1,
  function($result, $token1) use ($Haystack1) {
    return $result || strpos($Haystack1, $token1) !== false;
  }, 
  false
); 
```

或者

```
$matches = array_map(
  function($token1) use ($Haystack1) {
    return strpos($Haystack1, $token1) !== false;
  },
  $Values1
);
return (bool) count(array_filter($matches)); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-17T13:14:36.340

```
$array = array('lastname', 'email', 'phone');
$comma_separated = implode(",", $array); 
```

这会产生：

```
"lastname,email,phone" 
```

编辑：当然，之后你必须在这个字符串上做一个 preg_match 。

# html - 如何在后退按钮单击时使页面过期？

> ID：13914844
> 
> 赞同：2
> 
> 时间：2012-12-17T13:10:29.650
> 
> 标签：html, internet-explorer, jsp, firefox, tomcat

我在 jsp 页面中添加了以下元标记

```
<html>
<head>
<title>xyz</title>
<link type='text/css' rel="stylesheet" href="sdsds/sdsd"/>
<meta content="max-age=0" http-equiv="cache-control">
<meta content="no-store" http-equiv="cache-control">
<meta content="-1" http-equiv="expires">
<meta content="Tue, 01 Jan 1980 1:00:00 GMT" http-equiv="expires">
<meta content="no-cache" http-equiv="pragma">
</head>
<body><h1>jsdsdsds</h1>
<a href="abc">click me</a>
</body>
</html> 
```

通过单击链接“单击我”进行导航后，我将打开一个新页面。当我单击后退按钮时，它正在工作..我希望页面过期.. 注意：在两个 jsp 页面中，我都添加了相同的元标记。我试着添加这个

```
<%@ page import="java.lang.*" %>
<%
// Set to expire far in the past.
response.setHeader("Expires", "Sat, 6 May 1971 12:00:00 GMT");
// Set standard HTTP/1.1 no-cache headers.
response.setHeader("Cache-Control", "no-store, no-cache, must-revalidate");
// Set IE extended HTTP/1.1 no-cache headers (use addHeader).
response.addHeader("Cache-Control", "post-check=0, pre-check=0");
// Set standard HTTP/1.0 no-cache header.
response.setHeader("Pragma", "no-cache");
response.setDateHeader ("Expires", 0); //prevents caching at the proxy server
%> 
```

在 HTML 上方和 Head 内部..我仍然可以看到后页。，在 mozilla firefox 10.0 和 IE8 中测试有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:32:01.023

试试这个

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
   <html xmlns="http://www.w3.org/1999/xhtml" >
  <title>Untitled Page</title>
  <script type = "text/javascript" >
  function changeHashOnLoad() {
 window.location.href += "#";
 setTimeout("changeHashAgain()", "50"); 
 }

function changeHashAgain() {
window.location.href += "1";
}

var storedHash = window.location.hash;
 window.setInterval(function () {
 if (window.location.hash != storedHash) {
     window.location.hash = storedHash;
}
}, 50);

</script>
 </head>
 <body onload="changeHashOnLoad(); ">
  Try to hit back!
 </body>
 </html>` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:23:10.417

只要不涉及会话，您就不能使浏览器的后退按钮上的页面过期。它用于对许多用户执行的页面进行后退浏览，因此这取决于您希望用户如何浏览您的网站。您实际上需要处理浏览器的后退按钮。有几种方法可以做到这一点。突出的是在javascript中使用此代码：`

```
window.history.forward(); 
```

` 但它会将您的返回请求转发到历史记录中的当前页面对我有用的是：

```
<script type="text/javascript">
function noBack(){
            location.replace(logouturl);
            window.location="logouturl";
} 
```

HTML

```
<input type="button" value="SignOut" onclick="noBack()" align="middle"> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-17T13:14:57.087

试试这个

```
 <META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">
 <META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
 <META HTTP-EQUIV="EXPIRES" CONTENT="0"> 
```

[检查此链接](http://www.4guysfromrolla.com/webtech/111500-1.shtml)它可能对您有帮助...

# r - 在大型矩阵中计算非对角线平均值的更快方法

> ID：13914845
> 
> 赞同：10
> 
> 时间：2012-12-17T13:10:31.670
> 
> 标签：r, matrix, average

我需要计算 n × n 矩阵中每个非对角线元素的平均值。下三角和上三角是多余的。这是我目前正在使用的代码：

```
A <- replicate(500, rnorm(500))
sapply(1:(nrow(A)-1), function(x) mean(A[row(A) == (col(A) - x)])) 
```

这似乎有效，但不适用于较大的矩阵。我所拥有的并不大，大约 2-5000^2，但即使有 1000^2，它所花费的时间也比我想要的要长：

```
A <- replicate(1000, rnorm(1000)) 
system.time(sapply(1:(nrow(A)-1), function(x) mean(A[row(A) == (col(A) - x)])))
>   user  system elapsed 
> 26.662   4.846  31.494 
```

有没有更聪明的方法来做到这一点？

**编辑**为了澄清，我想独立地获得每个对角线的平均值，例如：

```
 1 2 3 4
 1 2 3 4
 1 2 3 4
 1 2 3 4 
```

我想：

```
 mean(c(1,2,3))
 mean(c(1,2))
 mean(1) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-17T14:02:40.480

您可以通过直接使用线性寻址直接提取对角线来获得更快的速度：`superdiag`这里从 A 中提取第 i 个超对角线（i=1 是主对角线）

```
superdiag <- function(A,i) {
  n<-nrow(A); 
  len<-n-i+1;
  r <- 1:len; 
  c <- i:n; 
  indices<-(c-1)*n+r; 
  A[indices]
}

superdiagmeans <- function(A) {
  sapply(2:nrow(A), function(i){mean(superdiag(A,i))})
} 
```

在 1K 方阵上运行此程序可实现约 800 倍的加速：

```
> A <- replicate(1000, rnorm(1000))

> system.time(sapply(1:(nrow(A)-1), function(x) mean(A[row(A) == (col(A) - x)])))
   user  system elapsed 
 26.464   3.345  29.793 

> system.time(superdiagmeans(A))
   user  system elapsed 
  0.033   0.006   0.039 
```

这为您提供与原始顺序相同的结果。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-17T13:44:29.990

您可以使用以下功能：

```
diagmean <- function(x){
  id <- row(x) - col(x)
  sol <- tapply(x,id,mean)
  sol[names(sol)!='0']
} 
```

如果我们在您的矩阵上检查这一点，速度增益是可观的：

```
> system.time(diagmean(A))
   user  system elapsed 
   2.58    0.00    2.58 

> system.time(sapply(1:(nrow(A)-1), function(x) mean(A[row(A) == (col(A) - x)])))
   user  system elapsed 
  38.93    4.01   42.98 
```

请注意，此函数同时计算上三角形和下三角形。您可以使用以下方法仅计算下三角形：

```
diagmean <- function(A){
  id <- row(A) - col(A)
  id[id>=0] <- NA
  tapply(A,id,mean)
} 
```

这导致另一个速度增益。请注意，与您的解决方案相比，解决方案将相反：

```
> A <- matrix(rep(c(1,2,3,4),4),ncol=4)

> sapply(1:(nrow(A)-1), function(x) mean(A[row(A) == (col(A) - x)]))
[1] 2.0 1.5 1.0

> diagmean(A)
 -3  -2  -1 
1.0 1.5 2.0 
```

# c# - 限制对附件文件夹的直接文件访问

> ID：13914846
> 
> 赞同：0
> 
> 时间：2012-12-17T13:10:54.867
> 
> 标签：c#, asp.net, iis-7, web-config, generic-handler

我们有这个网站，我们还有一个签证申请模块。签证申请模块需要用户创建一个帐户。每当用户上传附件时，它都会保存在附件内的特定文件夹中。此特定文件夹对应于分配给每个用户的唯一生成的号码。

现在我需要的是，如果用户没有登录，他们应该无法访问附件文件夹中的文件。

如何使用 http 处理程序实现这一点？

我有这个代码

```
if (HttpContext.Current.Session["UserRegistrationID"] != null)
            {
                if (HttpContext.Current.Session["UserRegistrationID"].ToString() != "")
                {
                    DownloadFile(context);
                }
                else
                {
                    context.Response.Write("You don't have the rights to access this file.");
                    context.Response.Flush();
                }
            }
            else
            {
                context.Response.Write("You don't have the rights to access this file.");
                context.Response.Flush();
            }

protected void DownloadFile(HttpContext context)
        {

        context.Response.ContentType = "image/jpg";
        context.Response.WriteFile(context.Request.PhysicalPath);
        context.Response.Flush();
    } 
```

但问题是我在网络配置中配置它时遇到问题。

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:21:11.740

看看我的一个答案

[如何限制未登录的未授权用户在asp net中查看网页](https://stackoverflow.com/questions/12550768/how-to-restrict-unlogged-unauthorized-users-from-viewing-web-pages-in-asp-net/12551115#12551115)

此规则实际上适用于文件夹，正是您要查找的内容。

# sql-server - REPLACE CHAR(0) NVARCHAR Latin1_General_CI_AS 排序规则

> ID：13914847
> 
> 赞同：1
> 
> 时间：2012-12-17T13:10:56.090
> 
> 标签：sql-server, replace

在 SQL Server 中，我试图替换`CHAR(0)`为`''`但它不起作用，因为我的字段实际上是一个`NVARCHAR`字段，我的排序规则是，`Latin1_General_CI_AS`但是当我转换为`SQL_Latin1_General_CP1_CI_AS`它时，它只适用于`VARCHAR`而不是`NVARCHAR`。

```
SELECT val, REPLACE(val , CHAR(0), 'x')
FROM    (
         SELECT 'a' + CHAR(0) + 'b' AS val
        ) AS X 
```

退货`a | a`

```
SELECT val, REPLACE(CAST(val COLLATE SQL_Latin1_General_CP1_CI_AS AS varchar(100)), CHAR(0), 'x')
FROM    (
         SELECT 'a' + CHAR(0) + 'b' AS val
        ) AS X 
```

退货`a | axb`

```
SELECT val, REPLACE(CAST(val COLLATE SQL_Latin1_General_CP1_CI_AS AS varchar(100)), CHAR(0), 'x')
FROM    (
         SELECT CAST('a' + CHAR(0) + 'b' AS NVARCHAR(100)) AS val
        ) AS X
SELECT val, REPLACE(CAST(val COLLATE SQL_Latin1_General_CP1_CI_AS AS nvarchar(100)), CHAR(0), 'x') 
```

退货`a | axb`

```
FROM    (
         SELECT CAST('a' + CHAR(0) + 'b' AS NVARCHAR(100)) AS val
        ) AS X
SELECT val, REPLACE(CAST(val COLLATE SQL_Latin1_General_CP1_CI_AS AS varchar(100)), nCHAR(0), 'x') 
```

退货`a | a`

```
FROM    (
         SELECT CAST('a' + CHAR(0) + 'b' AS NVARCHAR(100)) AS val
        ) AS X
SELECT val, REPLACE(CAST(val COLLATE SQL_Latin1_General_CP1_CI_AS AS nvarchar(100)), nCHAR(0), 'x') 
```

退货`a | a`

```
FROM    (
         SELECT CAST('a' + CHAR(0) + 'b' AS NVARCHAR(100)) AS val
        ) AS X 
```

退货`a | a`

有没有一种方法可以替换`0x0000`字符`''`而不丢失我的 NVARCHAR 状态

编辑：预期值为`a | axb`最后一个查询（或类似但支持`NVARCHAR`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:17:54.110

使用二进制整理子句，无需`CAST`

```
;WITH T
     AS (SELECT CAST('a' + CHAR(0) + 'b' AS NVARCHAR(100)) AS val)
SELECT val,
       REPLACE(val COLLATE Latin1_General_100_BIN, nCHAR(0), 'x')
FROM   T 
```

# asp.net-mvc - 填充一个用户从服务器端集合中选择另一个列表中的值时，如果用户从 HTML 下拉列表 A 中选择一个值，我想对服务器进行 ajax 调用以填充基于 HTML 下拉列表 B 中的值关于用户的选择。我正在使用带有 EF 4 的 ASP.NET MVC 4。我该怎么做？jQuery 是你最好的朋友。首先将更改事件绑定到您的下拉列表 A，然后对服务器进行 ajax 调用。最后获取响应并将其设置为您的下拉列表 B $('#ddlA').change(function() { $('#ddlB').lo

> ID：13914848
> 
> 赞同：1
> 
> 时间：2012-12-17T13:10:56.763
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, entity-framework-4, asp.net-mvc-4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:19:20.930

侦听第一个下拉列表的更改事件，然后以格式加载第二个下拉列表的内容`JSON`并将其注入第二个下拉列表

```
<select id="country">
  <option value='1'>USA</option>
  <option value='2'>Canada</option>
</select>
<select id="States"></select> 
```

和脚本

```
$(function(){
  $("#country").change(function(){
    var _this=$(this);
    var items="";
    $.getJSON("@Url.Action("GetStates","Country")/"+_this.val(),function(data){
           if(data.Status==="Success")
           {
              $.each(data.Items,function(index, item){
                 items=+"<option value='"+item.ID+'">"+item.Name+"</option>";
              });                 
           }
           $("#states").html(items);
    });
  });       
}); 
```

假设您的`GetStates`操作方法返回`JSON`具有 ID 和名称的数据，如下所示。

```
public ActionResult GetStates(int id)
{
  List<State> stateList=yourRepositary.GetStatesForCountry(id);
  return Json(new { Status="Success", Items=stateList},
                                           JsonRequestBehaviour.AllowGet);
} 
```

假设`GetStatesForCountry`方法返回一个包含`ID`和`Name`作为属性的 State 对象列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:14:11.253

jQuery 是你最好的朋友。首先将[更改](http://api.jquery.com/change/)事件绑定到您的下拉列表 A，然后对服务器进行 ajax 调用。最后接受响应并将其设置为您的下拉列表 B

```
$('#ddlA').change(function() {
    $('#ddlB').load('server/pageThatReturnsHtml')
}); 
```

这假设 'server/pageThatReturnsHtml' 返回 html，例如：

```
<option value="option1" selected="selected">Option 1</option>
 <option value="option2">Option 2</option> 
```

但是您也可以返回一个 json 对象并遍历结果以将项目添加到您的 ddl B

# c# - 在 C# 中，投射 ICollection 的正确方法是什么 到 ICollection ?

> ID：13914850
> 
> 赞同：1
> 
> 时间：2012-12-17T13:11:08.957
> 
> 标签：c#, .net, interface

例如：

```
public interface IFoo
{
    //...

    ICollection<IFoo> Children { get; }

    //...
}

public class Foo : IFoo
{
    //...

    public ICollection<Foo> Children { get; private set; }

    //...

    public ICollection<IFoo> IFoo.Children
    {
        get
        {
            return Children; // Obviously wrong datatype, how do I cast this?
        }
    }

    //...
} 
```

那么我该如何正确实施`IFoo.Children`呢？我试过`Children.Cast<IFoo>`了，但这`IEnumerable<IFoo>`会返回一个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T13:45:23.880

你需要考虑清楚这一点。如果这个转换可以工作，代码将被允许添加一个完全不同的类对象到你的集合中，一个实现 IFoo 但与 Foo 完全无关的类对象。您的收藏现在将不再是 Foo 的收藏。这当然是不允许的。IEnumerable<> 很好，它不能改变集合。ICollection<> 不是。

获得所需内容的唯一可能方法是创建集合的副本。像一个`List<IFoo>`. 你当然会为此付出代价。并且不能轻易看到对该列表的更改，这是可以修复的。但是您仍然会遇到根本问题，即修改该列表的客户端代码仍然允许添加或删除您不知道如何处理的对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T13:13:16.630

试试`Children.Cast<IFoo>().ToList()`。

# javascript - 功能问题（响应）

> ID：13914851
> 
> 赞同：0
> 
> 时间：2012-12-17T13:11:13.713
> 
> 标签：javascript, html, jquery-mobile

我用 jQuery mobile 制作了一个页面，其中有一个表单。当我按下提交时，它运行以下 javascript：

```
$(document).ready(function(e) {
$("#formOpretKunde").submit(function(){
    var data = {};
    data.kundenummer    =$("#kundenummer").val();
    data.navn           =$("#navn").val();
    data.adresse        =$("#adresse").val();
    data.postnummer     =$("#postnummer").val();
    data.byNavn         =$("#byNavn").val();
    data.email          =$("#email").val();
    data.telefon        =$("#telefon").val();
    data.cvrCpr         =$("#cvrCpr").val();
    $.post("klasser/opretKunde.php", data, function(response)
    {
        if(response == "")
        {
            // Det gik godt
            alert("Kunde blev oprettet");
            $.mobile.changePage( "./index.html", { transition: "none"} );
        }
        else
        {
            alert("Fejl! Kunden blev ikke oprettet");
        }
    });
    return false;
}); 
```

});

它工作正常，我的数据输入到我的数据库中。问题在于我的功能（响应）。它永远不会进入我的 if 语句，我不明白为什么。我看了又看，我的回复应该是空的？我究竟做错了什么？

我唯一想做的就是创建一个警报，说明客户已创建（Kunde blev oprett），然后在您按警报框上的确定时转到 index.html。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:28:36.847

你可以像这样使用ajax函数，

```
$.ajax({
    type: "POST",
    url: "klasser/opretKunde.php",
    data: data,
    success: function(response) {
        if(response == "")
        {
            // Det gik godt
            alert("Kunde blev oprettet");
            $.mobile.changePage( "./index.html", { transition: "none"} );
        }
        else
        {
            alert("Fejl! Kunden blev ikke oprettet");
        }
    }
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:51:13.350

为什么不只使用返回的 jqXHR 对象，`$.post`这意味着您不需要测试响应对象。

```
$.post("klasser/opretKunde.php", data )
.done( function( ) {

            // Det gik godt
            alert("Kunde blev oprettet");
            $.mobile.changePage( "./index.html", { transition: "none"} );
})
.fail( function( ) {

    alert("Fejl! Kunden blev ikke oprettet");
}); 
```

# php - 通过“强制”重定向到父窗口来避免 iframe？

> ID：13914852
> 
> 赞同：2
> 
> 时间：2012-12-17T13:11:14.697
> 
> 标签：php, javascript, redirect, iframe

有些网站似乎已经用（小型）iframe 替换了指向我网站的超链接。这些 iframe 导致我的带宽使用量增加，广告点击量减少（广告现在显示在折叠下方，滚动条被移除）。我说的不是点击几下，而是说每天至少损失 400 美元。

我想通过将父窗口重定向到我的网站来阻止我的网站的 iframe。我尝试了简单的“window.top.location.href”技巧，但这并没有解决问题。这些网站正在使用脚本来显示“您确定要离开...？” - 离开页面时确认弹出窗口（显然导致我的重定向停止）。

有什么办法我仍然可以强制重定向，或者可能是另一种解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:18:12.787

您可以在 facebook 中查看：

```
<script type="text/javascript">
        /* <![CDATA[ */if (top != self) { 
           try { if (parent != top) { throw 1; } 
           var disallowed = ["apps.facebook.com","\/pages\/","apps.beta.facebook.com"];
            href = top.location.href.toLowerCase(); 
              for (var i = 0; i < disallowed.length; i++) {
                  if (href.indexOf(disallowed[i]) >= 0) { throw 1; } 
              } 
          } catch (e) {
             setTimeout(
                   function() {var fb_cj_img = new Image(); 
                      fb_cj_img.src = "http:\/\/error.facebook.com\/common\/scribe_endpoint.php?c=si_clickjacking&m=on\u002509&t=8183";}, 5000); 
        window.document.write("\u003cstyle>body * { display:none !important; }\u003c\/style>\u003ca href=\"#\" onclick=\"top.location.href=window.location.href\" style=\"display: block !important; padding: 10px\">\u003ci class=\"img sp_8dfqpl sx_d67a9a\" style=\"display:block !important\">\u003c\/i>Go to Facebook.com\u003c\/a>");

        /* XRCm4Hhw */ }}/* ]]> *

</script> 
```

# php - 命令行 oci OCIEnvNlsCreate() 失败

> ID：13914857
> 
> 赞同：1
> 
> 时间：2012-12-17T13:11:24.110
> 
> 标签：php, oracle, oracle11g, oci8, instantclient

我收到 PHP 警告：oci_connect(): OCIEnvNlsCreate() 失败。当我尝试从命令行执行 php.exe "c:\xampp\htdocs\test.php" 时......

但是，如果我通过 (localhost/test || ip/test) 浏览器浏览它，它就可以工作....

同一台机器上的相同代码和 instandclint (INSTANTCLIENT_11_2) 版本可以工作......我确定我做错了什么。

基本上我想从命令提示符（计划运行）运行一个 php 文件，它会做一些事情并将数据上传到 oracle 服务器。手动它正在工作，但不是来自调度......

任何帮助都会非常感谢。（现在我正在从我的演示 PC 运行该计划，它可以将数据上传到不是的 LIVE pc）奇怪！

谢谢

法内斯

```
 **oci8**
     OCI8 Support   enabled
     Version    1.4.5
     Revision   $Revision: 305257 $
     Active Persistent Connections  0
     Active Connections     0
     Oracle Instant Client Version  11.1
     Temporary Lob support  enabled
     Collections support    enabled 
```

**测试文件**

```
 <?php
         $i=0;
     //    include('OraCon.php');
        $c = oci_connect('user', 'pass','localhost/BDDBERP.LOCALHOST');
         $s = oci_parse($c, "select DEST, DESTCODE from DESTCOUNTRY ORDER BY DEST");
         oci_execute($s);
         while (($row = oci_fetch_array($s, OCI_BOTH))) {
             echo $row['DEST']   . ", ".$row['DESTCODE'].";";
             $i++;
         }

         oci_free_statement($s);
         oci_close($c);
     ?> 
```

# spring - 如何在不实际创建 bean 的情况下获取 bean 定义？

> ID：13914864
> 
> 赞同：1
> 
> 时间：2012-12-17T13:11:56.350
> 
> 标签：spring, static-analysis

对于我的 Spring 配置的静态分析，我只需要 bean 定义 - 实际上创建 bean 会导致问题，因为有些需要（正确初始化的）数据库。

有没有办法防止`AnnotationConfigApplicationContext`创建任何bean？相反，它应该只加载和分析配置并停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:21:51.743

你可以实现`BeanDefinitionRegistryPostProcessor`接口。在`postProcessBeanDefinitionRegistry`您可以访问 BeanDefinition 的方法中

```
public class MyBeanDefinitionRegistryPostProcessor implements BeanDefinitionRegistryPostProcessor {

    @Override
    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException {
        // ...
    }

    @Override
    public void postProcessBeanDefinitionRegistry(BeanDefinitionRegistry registry) throws BeansException {
        registry.getBeanDefinition("myBean");
    }
} 
```

# ant - 使用 ant 任务时无法从资源加载定义

> ID：13914865
> 
> 赞同：1
> 
> 时间：2012-12-17T13:12:09.100
> 
> 标签：ant, ant-contrib

我在构建脚本中使用了 ant-contrib

```
<taskdef resource="net/sf/antcontrib/antcontrib.properties">
    <classpath>
        <pathelement location="ant/ant-contrib-0.6.jar"/>
    </classpath>
</taskdef> 
```

有用。但是当我使用`ant`任务从另一个 ant 文件调用这个脚本中的某个目标时，我得到了错误。

```
<ant antfile="build.xml" target="make" dir="${client.project.location}/ant"/> 
```

请帮我解决问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:40:32.863

在您的代码中，我们可以看到

```
 <classpath>
    <pathelement location="ant/ant-contrib-0.6.jar"/>
</classpath> 
```

1.  你需要给路径**location="/home/[some
    path]/ant-contrib-0.6.jar"**
2.  你可以再做一件事，你需要将你的 ant-contrib-0.6.jar 复制到**ANT_HOME/lib**文件夹中，并从你的代码中完全删除你的标签。 **注意：**第二个选项总是更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:46:21.937

`usenativebasedir="true"`调用蚂蚁任务时我必须设置

# javascript - 在 dojo.connect 中传递下拉列表的值

> ID：13914866
> 
> 赞同：0
> 
> 时间：2012-12-17T13:12:14.623
> 
> 标签：javascript, dojo, dom-events

我在选择框上使用 dojo.connect 来处理功能。我想获得下拉值。

这是 HTML

```
<select class="drop-down">
  <option value="0">option1</option>
  <option value="1">option2</option>
</select> 
```

以下是用dojo编写的Javascript

```
var selectBox = dojo.query('.drop-down');
dojo.connect(selectBox[0],'onchange',this,this.toggleForm); 
```

在这里，有没有办法通过函数传递值`toggleForm`，`dojo.connect`以便我可以获取函数中的值`toggleForm`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:19:11.940

您可以修改您的 toggleForm 函数以采用“事件”参数。通过该事件参数，您应该能够获取生成事件的元素的新值：

```
toggleForm =function(event){
  console.log('toggleForm',event.srcElement.value);  
};

var selectBox = dojo.query('.drop-down');
dojo.connect(selectBox[0],'onchange',this,this.toggleForm);​ 
```

# css - 使用 CSS 方法如何设置图像以填充 SVG 中的路径？

> ID：13914868
> 
> 赞同：8
> 
> 时间：2012-12-17T13:12:26.087
> 
> 标签：css, svg, fill

我想创建一个 CSS 类来用可以应用于任何 SVG 路径的图像填充路径，并用图像填充该路径。必须**拉伸图像以适应**该路径。

为达到这个; 我创建了一个带有**图像**标签的图案并将宽度和高度设置为**100%**。但图像占据了**整个屏幕**的 100%，而不是容器的**objectBoundingBox**（在本例中为**svg**标签）。

下面是示例代码：

```
.myClass {
  fill: url(#image);
  stroke: red;
  stroke-width: 5;
}

<svg id='pattern' xmlns="http://www.w3.org/2000/svg" version="1.1">
  <defs>
    <pattern id='image' x=0 y=0 width="100%" height="100%" patternUnits='objectBoundingBox'>
      <image xlink:href='myImage.png' x=0 y=0 width="100%" height="100%" preserveAspectRatio="none"></image>
    </pattern>
  </defs>
</svg>
<svg id='triangle' xmlns="http://www.w3.org/2000/svg" version="1.1" width='300px' height='300px'>
    <path d='M0 0 L300 0 L300 300 Z' class='myClass'></path>
</svg> 
```

可能是我做错了什么。

请为这个问题提出任何解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T14:12:19.707

这是你的工作 - [http://jsfiddle.net/eAfTc/](http://jsfiddle.net/eAfTc/)

```
.myClass {
  fill: url(#image);
  stroke: red;
  stroke-width: 5;
}

<svg id='pattern' xmlns="http://www.w3.org/2000/svg" version="1.1">
  <defs>
    <pattern id='image' width="1" height="1" viewBox="0 0 100 100" preserveAspectRatio="none">
      <image xlink:href='http://dummyimage.com/600x400/abc/333' width="100" height="100" preserveAspectRatio="none"></image>
    </pattern>
  </defs>
</svg>
<svg id='triangle' xmlns="http://www.w3.org/2000/svg" version="1.1" width='300px' height='300px'>
    <path d='M0 0 L300 0 L300 300 Z' class='myClass'></path>
</svg> 
```

请注意，有一个[patternContentUnits](http://www.w3.org/TR/SVG11/pservers.html#PatternElementPatternContentUnitsAttribute)和一个[patternUnits](http://www.w3.org/TR/SVG11/pservers.html#PatternElementPatternUnitsAttribute)，它们做不同的事情。我个人更喜欢使用 viewBox 来定义坐标系。

这是一个[新示例](http://jsfiddle.net/rafap/)，显示了应用于不同大小和纵横比的各种元素的模式，它也摆脱了第一个 svg 片段。

**更新：**我在 <pattern> 元素中添加了“preserveAspectRatio”，以及一个显示拉伸和缩放的新示例。

# android - 每次启动主要活动

> ID：13914870
> 
> 赞同：1
> 
> 时间：2012-12-17T13:12:30.220
> 
> 标签：android, android-activity, android-launcher

我的应用程序存在问题，当用户通过单击/按钮退出应用程序时，每次用户通过按下设备中的最近应用程序按钮启动应用程序时，我都需要调用`splashActivity`ie main 。我能做些什么来使事情正常进行吗？我尝试使用标志，但这也不起作用。`Activity``back``home``android:clearTaskOnLaunch="true"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:54:54.357

同样有趣当您终止进程并且您的应用程序可见（您看到页面，而不是按下主页按钮）时，
您的应用程序将重新启动

首先你需要这个来源

```
moveTaskToBack(true);  (in you MAIN page)
        android.os.Process.killProcess(android.os.Process.myPid()); 
```

或者

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_HOME);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent);

android.os.Process.killProcess(android.os.Process.myPid()); 
```

或者

进入你的主页

```
Intent i = new Intent(getApplicationContext(), [MAIN].class);
                i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                startActivityForResult(i, 1); 
```

在你的主要课程中

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        moveTaskToBack(true);
        android.os.Process.killProcess(android.os.Process.myPid());
    } 
```

# django - 使用已存储在数据库中的数据自动填充 ModelForm

> ID：13914880
> 
> 赞同：4
> 
> 时间：2012-12-17T13:13:16.070
> 
> 标签：django, django-models, django-forms

我得到了一个如下所示的表单，我希望它在呈现 HTML 时填充来自数据库的信息。我将 Coworker 的 id 作为视图的参数传递。

请参见下面的代码：

**视图.py**

```
def EditCoworker(request, id):
    form = FormEditCoworker(Coworkers.objects.get(id=id))
    if request.method == "POST":
        form = FormEditCoworker(request.POST)
        if form.is_valid():
            form.save()
            confirmation_message = "Coworker information updated successfully!"
            return render(request, "coworkers/coworkers.html", locals())
        else:
            return render(request, "coworkers/edit_coworker.html", locals())
    return render(request, 'coworkers/edit_coworker.html', locals()) 
```

**表格.py**

```
class FormEditCoworker(ModelForm):
    class Meta:
        model = Coworkers 
```

**网址.py**

```
url(r'^edit_coworker/(?P<id>[\d]+)$', views.EditCoworker), 
```

当然，我的views.py 中的代码是不对的。

有人可以帮我吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T13:51:15.470

这条线

```
form = FormEditCoworker(Coworkers.objects.get(id=id)) 
```

应该

```
form = FormEditCoworker(instance=Coworkers.objects.get(id=id)) 
```

尽管您应该真正处理 Coworker 不存在的情况

```
form = FormEditCoworker(instance=get_object_or_404(Coworkers, id=id)) 
```

编辑：正如 Alisdair 所说，您还应该将实例关键字 arg 传递给绑定表单

```
instance = get_object_or_404(Coworkers, id=id)
form = FormEditCoworker(instance=instance)
if request.method == "POST":
    form = FormEditCoworker(request.POST, instance=instance) 
```

# biztalk - BizTalk 2009 到 2010 升级路径

> ID：13914882
> 
> 赞同：3
> 
> 时间：2012-12-17T13:13:17.647
> 
> 标签：biztalk, biztalk-2010, biztalk-2009

我们正在迁移到 BTS 2010，我想知道我是否可以简单地将我们的 2009 应用重新部署到 2010？

我曾尝试在网络上查找此信息，并且我发现有人说 2009 年的应用程序在 2010 年运行，但微软在这个问题上没有任何证据。

微软[在此处](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CEIQFjAA&url=http://download.microsoft.com/download/0/F/F/0FFEF5D0-BE04-4D03-9125-75B8AD243E57/Upgrading%2520to%2520BizTalk%2520Server%25202010%2520from%2520BizTalk%2520Server%25202009%2520or%25202006%2520R2.docx&ei=3R3PUNnzBYqH0AXP9YHwDA&usg=AFQjCNHoWG5Xp4NfkbudqvenuZVVzOSaLA&sig2=-OOqchko_mchgfJVEDswJA)发布了有关*就地*升级路径的文档，但这根本没有提及应用程序。此外，我们不打算进行就地升级，而是为 2010 年构建一个全新的环境，然后进行切换。

有没有人试过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T08:22:47.640

是的，它确实有效 - 我们已将 BizTalk 2009 / VS 2008 环境生成的 MSI 直接安装到 BTS 2010 上，包括保留 2009 绑定文件。BTS 2010 环境是多服务器全新安装。

事实上，我们现有的许多稳定的 BTS 2009 应用程序仍在我们的 BTS 2010 产品服务器上运行——我们没有费心去重建它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:37:02.130

根据[Jeremie Devillard](http://jeremiedevillard.wordpress.com/2011/01/19/upgrade-biztalk-server-2009-to-biztalk-server-2010)的说法，可以在新的 2010 环境中部署 2009 应用程序（参见评论部分）。

非常感谢杰里米。

# java - 如何防止 Eclipselink 使用缓存消耗所有内存？

> ID：13914887
> 
> 赞同：2
> 
> 时间：2012-12-17T13:13:36.680
> 
> 标签：java, memory-leaks, persistence, eclipselink

我的应用程序提取大量几何数据。我使用 Eclipselink 2.4.1 将该数据保存在 MySQL 数据库中。该应用程序以批处理方式工作，即我收集一组数据，然后将其持久化，然后继续下一组数据，将其持久化，依此类推。另一个应用程序稍后会读取该数据并对其进行处理，但这个问题仅与第一个收集数据的应用程序有关。

数据收集应用程序运行了相当长的一段时间。我使用一组`EntityManagers`在启动时创建并一直存在到应用程序完成的固定组。提取是多线程的，每个线程有一个 EntityManager。我的问题是，无论我如何配置缓存，一段时间后 EclipseLink 会耗尽所有内存，一段时间后我会得到一个`OutOfMemoryError`.

我曾经`VisualVM`提取我使用分析的堆转储`Eclipse Memory Analyzer`。持有可疑的内存量`EntityManagerImpl.extendedPersistenceContext.cloneMapping`。此地图包含对我的几何数据对象的引用。随着时间的推移，这张地图的大小会达到数百兆字节，这就是导致内存不足错误的原因。

我已经尝试过以下方法：

*   我通过配置使用弱引用`eclipselink.persistence-context.reference-mode=weak`。我已经验证了`EntityManagerImpl.extendedPersistenceContext.cloneMapping`它的类型`IdentityWeakHashMap`。从[有关弱缓存的文档中，](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Caching/Shared_and_Isolated#Weak_Reference_Mode)我希望使用参考模式`weak`可以解决问题。不幸的是，垃圾收集器仍然没有认领这些条目，而且我不断出现内存不足的错误。
*   我试图用`eclipselink.cache.shared.default=false`. 问题仍然存在。

有人对这里发生的事情以及我如何解决这个问题有任何建议吗？我也愿意就如何规避这个问题提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:06:57.573

一些东西。

首先，您不应该保留长期存在的 EntityManager。您应该为每个事务或每个请求创建一个新的 EntityManger。

其次，确保您的应用程序（静态变量等）没有持有对对象的引用，如果有任何东西正在引用该对象，它将不会进行垃圾收集。

# android - 通过拨打号码启动应用程序

> ID：13914888
> 
> 赞同：0
> 
> 时间：2012-12-17T13:13:39.510
> 
> 标签：android

我是一名安卓开发者。（初学者）

而且我想知道如何通过输入/调用特定代码号（来自同一设备）来启动我的应用程序，例如智能锁应用程序，您可以通过调用此代码#000 来启动它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:42:01.753

**您必须使用广播接收器...**

```
public class OutgoingCallReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
            Bundle bundle = intent.getExtras();

            if(null == bundle)
                    return;

            String phonenumber = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);

            Log.i("OutgoingCallReceiver",phonenumber);
            Log.i("OutgoingCallReceiver",bundle.toString());

            if(code.equals("#000") {
 intent.setComponent(new ComponentName("com.example", "com.example.MyExampleActivity")); 
```

**还有你的 Android 清单**

```
<receiver android:name="com.varma.samples.detectcalls.receivers.OutgoingCallReceiver"> 
                    <intent-filter> 
                        <action android:name="android.intent.action.NEW_OUTGOING_CALL"/>
                    </intent-filter> 
            </receiver> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:22:03.827

您可以通过它的完整包名启动应用程序[如何在另一个应用程序中启动活动？](https://stackoverflow.com/questions/2209513/how-to-start-activity-in-another-application). 您可以在应用程序启动器中实现所需的逻辑。比如将代码 #000 绑定到特定的包，如“com.example.android”。

```
if(code.equals("#000") {
     intent.setComponent(new ComponentName("com.example", "com.example.MyExampleActivity"));
}
else if{code.equals(#???"){
     //another app
} 
```

# java - 为什么 Java 不支持强制和自动装箱？

> ID：13914896
> 
> 赞同：6
> 
> 时间：2012-12-17T13:14:10.050
> 
> 标签：java, autoboxing

> **可能重复：**
> [Java：长结果 = -1：无法从 int 转换为 long](https://stackoverflow.com/questions/4437358/java-long-result-1-cannot-convert-from-int-to-long)

例如`Integer foo = 4`，`Long foo = 4L`两者都编译，但`Long foo = 4`没有。这有什么理由吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T13:31:08.150

```
Long foo = 4; 
```

表示：将`int`值 4 分配给 class 的对象`Long`。它将尝试使用自动装箱来执行此操作并失败，因为自动装箱仅适用于适当的原语。它可以通过两种方式修复：

```
Long foo = (long) 4;
Long foo = 4L; 
```

在第一种情况下，您将`int`4 转换为`long`4。在第二种情况下，您提供了一个多头。

回答这个问题：Java 不支持自动转换并且在类型方面**非常**严格，这可能是它不支持自动转换的原因。

# sql - Oracle 数据库中的高级查询

> ID：13914898
> 
> 赞同：0
> 
> 时间：2012-12-17T13:14:16.357
> 
> 标签：sql, oracle

我有两种表。第一个排序有一个`TBL$`前缀，第二个排序有一个`LOG$`前缀。如果有一张`LOG$TABLE_NAME`桌子，那么也有一张`TBL$TABLE_NAME`桌子。因为`LOG$`表是从`TBL$`表中生成的。问题是当我想从 oracles`USER_TABLES`表中搜索所有用户表时。我只想按名称搜索`TBL$`具有 2 个参数的表。第一个是名称，第二个是一个字符串（“YES”或“NO”），它指示搜索的表是否有对应的`LOG$`表。如果没有第二个参数，我的查询看起来是这样的：

```
SELECT ut.table_name AS id,
       utc.comments  AS comments
  FROM user_tables ut
  LEFT JOIN user_tab_comments utc
    ON ut.table_name = utc.table_name
 WHERE SUBSTR(UPPER(ut.table_name), 1, 4) = 'TBL$'
   AND TRIM(UPPER(ut.table_name)) LIKE TRIM(UPPER('%'|| :table_name ||'%')) 
```

因此，如果您可以帮助我将第二个参数集成到查询中，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:20:50.117

您可以进行左外自连接并检查是否存在：

```
SELECT
  ut.table_name AS id
, CASE WHEN ut_log.table_name IS NOT NULL THEN 'YES' ELSE 'NO' END has_log
FROM user_tables ut
LEFT JOIN user_tables ut_log ON ut_log.table_name = replace(ut.table_name, 'TBL$', 'LOG$')
WHERE SUBSTR(UPPER(ut.table_name), 1, 4) = 'TBL$' 
```

# c - CUDA - 添加数组元素并将结果分配给另一个数组元素时执行缓慢和错误

> ID：13914900
> 
> 赞同：0
> 
> 时间：2012-12-17T13:14:18.130
> 
> 标签：c, cuda, gpu

我希望有人可以分享对我遇到的问题的见解。一个小程序采用一个双精度数组（100000 个元素），将该数组的一个子集相加，并将结果分配给另一个数组的一个元素。这似乎是一项非常基本的任务，但是我的 GT630 表现出奇怪的行为。发生的情况是它适用于较小的间隔长度值（但相当慢），但是一旦间隔长度变大，大约 300，代码就会失败。

更有趣的是，问题似乎不在于加法，而在于将结果分配回输出数组。如果下面代码的最后一行

```
output_dev[threadIdx.x] = totalSum; 
```

改为

```
output_dev[threadIdx.x] = input_dev[0]; 
```

然后代码运行得非常快——至少快 100 倍，并且适用于任何较大的 intervalLength 值。此外，如果一条线

```
totalSum=1; 
```

在分配之前，代码也可以快速运行并且没有错误。一些实验还表明，如果总和是通过一系列语句而不是使用循环来计算的，那么代码也可以正常工作。

我正在使用具有 96 个 CUDA 线程的 GT630 4GB，在一个块中启动 96 个线程。

编码：

```
extern "C" __global__ void TestCompute(double* input_dev, int input_devLen0, int* args_dev, int args_devLen0, double* output_dev, int output_devLen0)
{
    int intervalLength = args_dev[0];
    double totalSum = input_dev[num];
    if (num < input_devLen0)
    {
        for (int k = 0; k <= input_devLen0; k++)
        {
            totalSum = 0.0;
            for (int i = 0; i < intervalLength; i++)
            {
                if (input_devLen0 > i)
                {
                    totalSum += input_dev[i];
                }
            }
            if (output_devLen0 > threadIdx.x)
            {
                // totalSum = 1;
                output_dev[threadIdx.x] = totalSum; // input_dev[0];
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T20:00:44.490

我通过将处理拆分为较小的块然后循环遍历缝隙列表来解决了这个问题。显然问题在于寄存器数量有限。低端的 GT630 卡似乎很快就用完了寄存器。这可能不是理想的正确解决方案，但它适用于我的情况。

# maven - hdiutil：附加失败 - 在使用 AppleScript 的 Maven 项目中没有这样的文件或目录

> ID：13914903
> 
> 赞同：0
> 
> 时间：2012-12-17T13:14:31.627
> 
> 标签：maven, applescript

我正在尝试安装名为 x 的模块中存在的应用程序。我在这里使用 Maven 项目，因此为了安装应用程序，我使用的是 shell 脚本。我已经给出了模块 x 中存在的应用程序的路径。如果我尝试从存在此安装方法的类运行测试，它正在编译并且我得到正确的结果，但是当我在其他一些测试类中使用此安装方法并运行测试时，它说“没有这样的文件现在”我知道这看起来很奇怪，但我正面临这个问题。请告诉我如何克服这个问题。

```
do shell script "hdiutil mount ../../common/src/main/resources/Modulex/AdbeRdr11000_en_US.dmg" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:20:07.970

我能够解决上述问题，只是我需要更改路径，因为我正在从 testsuite 运行相同的测试。

执行 shell 脚本“hdiutil mount ../common/src/main/resources/Modulex/AdbeRdr11000_en_US.dmg”

# excel - 如何在VBA中对两个数组中的值进行求和

> ID：13914907
> 
> 赞同：0
> 
> 时间：2012-12-17T13:15:04.653
> 
> 标签：excel, vba, worksheet-function

我试图在 VBA 中对两个数组求和，因为我试图避免在写入时间之前引用工作表，因为它的大小和复杂性。

我知道我可以使用 applicationfunction 来运行 sumproduct 并定义两个范围，但这仍然引用了工作表，有没有办法只在代码中使用数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:26:07.327

当然，您只需调用 SUMPRODUCT 并将数组传递给它：（但请注意，它的效率有点低）

```
Sub testing2()
Dim varr1(1 To 10)
Dim varr2(1 To 10)
Dim vres As Variant
Dim j As Long
For j = 1 To 10
varr1(j) = j
varr2(j) = j * 10
Next j
vres = Application.WorksheetFunction.SumProduct(varr1, varr2)
End Sub 
```

# javascript - 如何将一系列 div 放入窗口的大小？

> ID：13914909
> 
> 赞同：1
> 
> 时间：2012-12-17T13:15:13.953
> 
> 标签：javascript, jquery

我有许多 div（范围从 2 到 80）作为内联块加载到我的 html 中。这些 div 的宽度旨在填满窗口宽度的整个空间（如单个条形）减去 div 的边距`(data.length*2)`并减去填充，`-20`具体取决于通过生成的变量`tag.duplicate_count/full_links.length`。

到目前为止，一切都很好

```
var tag_width = tag.duplicate_count/full_links.length;
tag_width = ($(window).width()-(data.length*2)-20)*(tag_width); 
```

结果：

| ***_* _** | *|*****__** |****__ *_* __ *_* _** |****_ *_*** |****__ *_* __ *_* __ *_* __ *_* __ *_*** |********

 ****<--------------- window.width --------------->

上面的这段代码实际上可以工作，但问题就从这里开始了。有些 div 有时会分配一个小于 10px 的宽度。为了解决这个问题，我把它放在我的代码中：

```
tag_width = tag_width < 10 ? 10 : tag_width; 
```

结果：

| ***_* _** |****__****|* **_****|* ***_* __ *_* ___****|* ***_* __****|* ***_* __ *_* __ *_* __ *_* ____********

 ********___** |**

 **<--------------- window.width --------------->

然而，所有 div 组合的总宽度变得大于屏幕的宽度，它将开始制作第二个栏（我真的不想要！）。我知道为什么，但我想阻止它。有没有人可以帮助解决这个问题，遇到过这个问题或知道答案？**********

# java - 为什么我的程序不能处理鼠标运动？（爪哇）

> ID：13914912
> 
> 赞同：0
> 
> 时间：2012-12-17T13:15:18.803
> 
> 标签：java, events, mouseevent

我尝试制作一些很酷的“鼠标跟踪器”。它会记录您的鼠标位置，直到您按下“跟踪”按钮，当您单击它时，它会“恢复”鼠标位置。

似乎它不处理 mouseMove 方法。为什么？

```
import java.awt.AWTException;
import java.awt.Dimension;
import java.awt.Point;
import java.awt.Robot;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionListener;
import javax.swing.JButton;
import javax.swing.JFrame;

public class Mouse implements MouseMotionListener {
    JFrame frame = new JFrame();
    JButton move = new JButton("Track");
    Point[] points = new Point[100000];
    int i = 0;

    public Mouse() {
        // restore on track
        move.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {
                try {
                    Mouse.this.restore();
                } catch (InterruptedException | AWTException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        });
        // initialize component
        frame.setPreferredSize(new Dimension(300, 300));
        frame.getContentPane().add(move);
        frame.addMouseMotionListener(this);
        frame.pack();
        frame.setVisible(true);
    }
    @Override
    public void mouseDragged(MouseEvent e) {}

    @Override
    public void mouseMoved(MouseEvent e) {
        System.out.println("Mouve move");
        if(i < 100000) {
            points[i] = e.getLocationOnScreen();
            i++;
        }
    }

    public void restore() throws InterruptedException, AWTException {
        System.out.println("Mouse restored");
        for(int j = 0; j < i; j++) {
            Robot r = new Robot();
            r.mouseMove(points[j].x, points[j].y);
            Thread.sleep(100);
        }
    }

    public static void main(String[] args) {
        Mouse s = new Mouse();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:36:50.970

1.  添加`MouseListener`到`JFrame`或它的`ContentPane`，不添加到`JButton`-**主要原因**
2.  使用在 EDT 线程中运行 Swing`SwingUtilities.invokeLater()`
3.  `mouseMotionListener`调用时从 JFrame 中删除`restore`
4.  将机器人创建置于循环之外

这

```
for(int j = 0; j < i; j++) {
    Robot r = new Robot(); 
```

到

```
Robot r = new Robot();
for(int j = 0; j < i; j++) { 
```

# python - 使用边缘和纹理进行图像比较

> ID：13914913
> 
> 赞同：0
> 
> 时间：2012-12-17T13:15:18.797
> 
> 标签：python, opencv

我正在使用 python 和 opencv 开发一个软件，该软件应该比较两个图像并返回一个表示它们相似性的值。

我首先尝试使用直方图，然后使用 SIFT 和 SURF，但第一种方法没有本地化，而第二种和第三种方法很慢，并且不太适合我的数据内容（主要是人群图片）。

我会避免使用人员检测器，所以我想应用一些与边缘和纹理比较相关的算法。你能提供一些提示或在线资源吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:24:46.220

这是一个有趣但具有挑战性的问题！最近，我看到了加州大学圣地亚哥分校[视觉小组](http://vision.ucsd.edu/)的一篇关于对人群场景进行分类的文章。这是链接：[城市部落：从社会角度分析集体照片](http://vision.ucsd.edu/sites/default/files/urbantribes.pdf)。

如您所见，没有万能的解决方案，但我认为这应该为您提供一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:28:51.323

你要问的是一个通用的图像分类框架。尝试谷歌搜索：图像分类、场景分类、图像索引和检索。

在大多数情况下，您必须使用多模式描述符。使用颜色、纹理、熵、关键点、边缘直方图。

你可以阅读[这个](http://www.tandfonline.com/doi/abs/10.1080/01431160600746456)并尝试[那个](http://www.cs.bilkent.edu.tr/~bilmdg/bilvideo-7/)。

# c# - 如何使 Linq2SQL 类的自定义属性可绑定？

> ID：13914914
> 
> 赞同：0
> 
> 时间：2012-12-17T13:15:29.787
> 
> 标签：c#, winforms, linq-to-sql, data-binding

我的数据库有一个属性为 IsTrue 的表 Foo。我为此数据库创建了一个 Linq2SQL 类“myData.dbml”，并将生成的 Foo 类添加到我的数据源栏中。我有一个带有 ToggleButton 的简单 Winforms 窗口，它应该绑定到 IsTrue 的反面。

为了实现这一点，我尝试将属性 NotTrue 添加到 myData.dbml，但这会导致 SQLException、无效的行名“NotTrue”。我尝试将属性代码添加到 myData.cs，如下所示：

```
public bool NotTrue {
    get {
        return !this._IsTrue;
    }
    set {
        if (this._IsTrue == value) {
            this.OnIsTrueChanging(!value);
            this.SendPropertyChanging();
            this._IsTrue = !value;
            this.SendPropertyChanged("IsTrue");
            this.SendPropertyChanged("NotTrue");
            this.OnIsTrueChanged();
        }
    }
} 
```

但是，即使在添加时，将 Foo 添加到 Datasources 时属性也没有出现`[Bindable(true)]`

有效的是绑定到 IsTrue 并以此否定绑定：

```
private void InvertBoolBinding(ControlBindingsCollection collection,string property) {
    foreach (Binding b in collection) {
        if (b.PropertyName.Equals(property)) {
            ConvertEventHandler invert = new ConvertEventHandler((sender, e) => { e.Value = !((bool)e.Value); });
            b.Format += invert;
            b.Parse += invert;
        }
    }
} 
```

像这样调用：

```
InvertBoolBinding(lockToggleButton.DataBindings, "IsChecked"); 
```

虽然在我的主要项目中有大量的绑定，但这种方法很麻烦。似乎 Datasources 无法通过部分类连接属性。当我将该属性添加到 myData.designer.cs 时，它被找到了。但是这个类会定期再生，我的财产会丢失。

所以也许我需要一种完全不同的方法，或者也许有一种方法可以使部分类扩展工作。我希望你对此有所了解。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:01:56.737

将 Linq2SQL 类移动到不同的程序集会使 Visual Studio 解析部分连接。

[在这里](https://stackoverflow.com/questions/9133349/bindingsource-doesnt-appear-to-contain-properties-created-in-partial-class)找到。

# html - 带有 z-index 的图像中心

> ID：13914917
> 
> 赞同：0
> 
> 时间：2012-12-17T13:15:41.300
> 
> 标签：html, css, z-index, image

我正在尝试制作头像创建网站，但图像不会居中。我尝试了书中的所有内容。有人知道我哪里出错了吗？

```
<img src="avatar/body_blue.png" class="body" id="body0"/>
<img src="avatar/body_green.png" class="body" id="body1"/>
<img src="avatar/body_grey.png" class="body" id="body2"/>
<img src="avatar/body_orange.png" class="body" id="body3"/>
<img src="avatar/body_purple.png" class="body" id="body4"/> 
```

这是这个 CSS：

```
.body {
    z-index:7;
    position:absolute;
    width:575px;
    height:750;
    margin:0px auto;
    text-align: center;
} 
```

[您可以在此处实时查看](http://www.xronn.co.uk/avatar)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:18:09.497

您可以尝试使用

```
 .body {
 margin:0 auto;
 display:table; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:19:28.500

我建议你阅读一下 CSS，这里是一个很好的例子，可以让任何东西居中。

[http://www.w3.org/Style/Examples/007/center.en.html](http://www.w3.org/Style/Examples/007/center.en.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T13:23:57.593

解决方案是将`<img>`标签放在`<div>`已经居中的 a 中。通过这种方式，您可以保持`<img>`标签的绝对位置，从而使您的图像保持堆叠在一起。

“绝对位置元素相对于第一个具有非静态位置的父元素定位。” - [W3学校](http://www.w3schools.com/css/css_positioning.asp)。这意味着您的绝对定位`<img>`标签将相对于您的容器放置`<div>`。

更新的 HTML：

```
<div class = "container">    
    <img src="avatar/body_blue.png" class="body" id="body0"/>
    <img src="avatar/body_green.png" class="body" id="body1"/>
    <img src="avatar/body_grey.png" class="body" id="body2"/>
    <img src="avatar/body_orange.png" class="body" id="body3"/>
    <img src="avatar/body_purple.png" class="body" id="body4"/>
</div> 
```

添加这个 CSS 类：

```
.container{margin: 0px auto; width: 575px;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T14:11:58.437

好的，我刚刚检查了您的 CSS 并提出了以下更改：

1.  删除宽度`#avatar`
2.  `position:absolute;`从中删除`.body`

这将使您拥有的蓬松大动物居中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T14:36:00.320

您使用以下样式设置了 DIV #avatar：

```
#avatar {
position: relative;
width: 300px;
height: 350px; 
```

如果这是您希望以页面为中心的 DIV，则将样式更改为：

```
#avatar {
margin: 0 auto;
width: 300px;
height: 350px; 
```

# python - Networkx：提取包含给定节点的连通分量（有向图）

> ID：13914920
> 
> 赞同：21
> 
> 时间：2012-12-17T13:15:48.010
> 
> 标签：python, networkx

我正在尝试从大图中提取包含特定节点的所有连接节点的子图。

Networkx 库中有解决方案吗？

[编辑]
我的图是有向图

[编辑]
简单地说：
我想要我的图形部分包含我的特定节点 N_i 以及使用任何传入或传出边直接或间接连接（通过其他节点）的所有节点。
例子：

```
>>> g = nx.DiGraph()
>>> g.add_path(['A','B','C',])
>>> g.add_path(['X','Y','Z',])
>>> g.edges()
[('A', 'B'), ('B', 'C'), ('Y', 'Z'), ('X', 'Y')] 
```

我想要的结果是：

```
>>> g2 = getSubGraph(g, 'B')
>>> g2.nodes()
['A', 'B', 'C']
>>> g2.edges()
[('A', 'B'), ('B', 'C')] 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-18T13:29:52.797

您可以使用 shortest_path() 查找从给定节点可到达的所有节点。在您的情况下，您需要首先将图形转换为无向表示，以便同时跟踪入边和出边。

```
In [1]: import networkx as nx

In [2]: >>> g = nx.DiGraph()

In [3]: >>> g.add_path(['A','B','C',])

In [4]: >>> g.add_path(['X','Y','Z',])

In [5]: u = g.to_undirected()

In [6]: nodes = nx.shortest_path(u,'B').keys()

In [7]: nodes
Out[7]: ['A', 'C', 'B']

In [8]: s = g.subgraph(nodes)

In [9]: s.edges()
Out[9]: [('A', 'B'), ('B', 'C')] 
```

或者在一行

```
In [10]: s = g.subgraph(nx.shortest_path(g.to_undirected(),'B'))

In [11]: s.edges()
Out[11]: [('A', 'B'), ('B', 'C')] 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-17T15:31:35.287

只需遍历子图，直到目标节点包含在子图中。

对于有**向**图，我假设子图是一个图，使得每个节点都可以从每个其他节点访问。这是一个[强连通](http://en.wikipedia.org/wiki/Strongly_connected_component)子图，其`networkx`函数是[`strongly_connected_component_subgraphs`](http://networkx.lanl.gov/reference/generated/networkx.algorithms.components.strongly_connected.strongly_connected_component_subgraphs.html#networkx.algorithms.components.strongly_connected.strongly_connected_component_subgraphs)。

（MWE）最小的工作示例：

```
import networkx as nx
import pylab as plt

G = nx.erdos_renyi_graph(30,.05)
target_node = 13

pos=nx.graphviz_layout(G,prog="neato")

for h in nx.connected_component_subgraphs(G):
    if target_node in h:
        nx.draw(h,pos,node_color='red')
    else:
        nx.draw(h,pos,node_color='white')

plt.show() 
```

![在此处输入图像描述](../Images/07275e2023483d563b5314e93d2934d9.png)

对于有向子图 ( **digraph** ) 示例，将相应的行更改为：

```
G = nx.erdos_renyi_graph(30,.05, directed=True)
...
for h in nx.strongly_connected_component_subgraphs(G): 
```

![在此处输入图像描述](../Images/1bb1ee86ad0eed95b2cdcb3b5ae6c579.png)

请注意，其中一个节点在连通分量中，但*不在*强连通分量中！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-15T05:23:01.953

我找到了三个解决方案来解决您的要求，就像我的一样。我的 Digraph 的大小在 6000 到 12000 个节点之间，最大子图大小将达到 3700。我使用的三个函数是：

```
def create_subgraph_dfs(G, node):
    """ bidirection, O(1)"""
    edges = nx.dfs_successors(G, node)
    nodes = []
    for k,v in edges.items():
        nodes.extend([k])
        nodes.extend(v)
    return G.subgraph(nodes)

def create_subgraph_shortpath(G, node):
    """ unidirection, O(1)"""
    nodes = nx.single_source_shortest_path(G,node).keys()
    return G.subgraph(nodes)

def create_subgraph_recursive(G, sub_G, start_node):
    """ bidirection, O(nlogn)"""
    for n in G.successors_iter(start_node):
        sub_G.add_path([start_node, n])
        create_subgraph_recursive(G, sub_G, n) 
```

测试结果总结如下：

[![时间毫秒](../Images/98964cf6ffe8d8f775662e108e895f18.png)](https://i.stack.imgur.com/BSv16.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T13:18:20.777

[使用页面connected_component_subgraphs](http://networkx.lanl.gov/reference/generated/networkx.algorithms.components.connected.connected_component_subgraphs.html)末尾的示例。

只需确保引用列表中的最后一个元素而不是第一个元素

```
>>> G=nx.path_graph(4)
>>> G.add_edge(5,6)
>>> H=nx.connected_component_subgraphs(G)[-1] 
```

# iphone - 随速度滑动的抛物线精灵运动

> ID：13914923
> 
> 赞同：-2
> 
> 时间：2012-12-17T13:16:12.317
> 
> 标签：iphone, ios, xcode, cocos2d-iphone

我想用滑动手势移动一个精灵，就像它从一个地方开始并以轨迹结束的角度一样，我真的不知道从哪里开始，这就是为什么我没有在这里发布任何代码。任何方向或一段代码将不胜感激。注意：我应该为此使用 cocos2d 还是需要任何物理引擎，如 box2d 或花栗鼠？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T04:06:42.133

我建议你从这里开始：[http](http://www.raywenderlich.com/tutorials) ://www.raywenderlich.com/tutorials 。有大量解释清楚的教程可以帮助您开始使用 cocos2d。我可能会建议考虑使用像 Box2D 这样的物理引擎。介绍教程在这里：[http](http://www.raywenderlich.com/457/intro-to-box2d-with-cocos2d-tutorial-bouncing-balls) ://www.raywenderlich.com/457/intro-to-box2d-with-cocos2d-tutorial-bouncing-balls 。

# excel - Excel 2003 - 行数限制

> ID：13914924
> 
> 赞同：1
> 
> 时间：2012-12-17T13:16:18.357
> 
> 标签：excel

我们有一个包含 70000 行的 Excel 2010 文件，我们需要将其粘贴到 Excel 2003 版本的文件中。

它通常不会接受这么多的行。知道怎么做吗？

提前致谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T13:22:05.597

你不能。但是您可以将行粘贴到 Access 数据库中，并使用 Excel 中的数据菜单加载数据子集（使用`Data`、`Import external data`、`Database query`）或基于外部数据制作数据透视表。
如果需要，这将允许您处理数百万行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:19:13.210

您必须在 2010 年将行拆分为 2 个工作表，然后您可以复制/粘贴到 2003 年

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-30T17:30:32.857

Excel 2003 中的最大行数为 65,536，因此您需要在两个或多个工作表之间拆分它，或者使用数据透视表来减少行数。根据信息的精细程度，您可能能够以较少的特异性获得所需的结果。

# ios - 特定格式的时间格式

> ID：13914925
> 
> 赞同：-6
> 
> 时间：2012-12-17T13:16:19.373
> 
> 标签：ios, datetime

> **可能重复：**
> [将 NSDate 格式化为 DDMMYYYY？](https://stackoverflow.com/questions/5894096/format-a-nsdate-to-ddmmyyyy)
> [想要 2000 年 1 月或 2000 年 1 月的 NSDateformatter](https://stackoverflow.com/questions/13134621/want-nsdateformatter-for-january-2000-or-january-2000)

我需要以下格式的日期和时间。我怎样才能得到 ..

2012-12-17 05:30

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:22:20.680

你可以随时用谷歌搜索这类问题

尝试查看[**NSDateFormatter**](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003643)类，
您要查找的格式类似于：

```
 [dateFormatter setDateFormat:@"MMM dd,yyy hh:mm:ss a"]; //dateFormatter is an object of class NSDateFormatter 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:59:34.723

```
 NSDate *selected_Date = //Your Date object here;
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"MMM dd,yyy hh:mm:ss a"];
    NSString* strDateObj [NSString stringWithFormat:@"%@",[dateFormat stringFromDate:selected_Date]];
    NSLog(@"Date %@",) 
```

# sql - 如何计算 DB2 中 VARCHAR 类型的最大长度？

> ID：13914926
> 
> 赞同：1
> 
> 时间：2012-12-17T13:16:22.113
> 
> 标签：sql, db2, varchar, page-size

据此：[_](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2z10.doc.intro/src/tpc/db2z_stringdatatypes.htm)

> VARCHAR(n) 最大长度为 n 字节的变长字符串。n 必须大于 0 且小于**取决于表空间页面大小的数字**。最大长度为 32704。

如果我正确理解这个定义，根据数据库的配置，最大长度可以小于 32704。

我想知道，如何使用 SQL 命令计算*特定*DB2 数据库的 VARCHAR 类型的*当前*最大长度？

 *请注意：解决方案必须包括自动确定页面大小；此值不能作为建议代码的参数。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T14:00:04.740

您可以从以下位置确定表空间的页面大小[`sysibm.systablespace`](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2z10.doc.sqlref/src/tpc/db2z_sql_createtable.htm)：

```
select pgsize from sysibm.systablespace where name='FOO' 
```

[create table 文档](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2z10.doc.sqlref/src/tpc/db2z_sql_createtable.htm)提供了有关最大大小如何与页面文件大小相关的信息`varchar`（搜索最大记录大小）。我不想给出明确的答案，因为它相当复杂，而且我没有 z/OS 上的 DB2 来测试它。但是您应该能够结合该信息和反复试验来确定每个页面大小的最大长度。

**注意：**此答案适用于 z/OS 上的 DB2（假设是因为这是上述文档引用的来源）。它在 LUW 上略有不同，但如果您访问相应的文档页面即可找到。*

# html - 使用 Modernizr 库，为什么要在 html 标签中添加类

> ID：13914931
> 
> 赞同：5
> 
> 时间：2012-12-17T13:16:42.457
> 
> 标签：html, modernizr

谁能解释（因为 github 页面没有）为什么 Modernizr 觉得有必要将所有这些类名添加到 HTML 标记中？加载 Modernizr 后，它看起来像这样：

```
<!doctype html>
<html class=" js flexbox canvas canvastext webgl ~~~~ etc etc 
```

我完全看不出它为什么要这样做。Modernizr 提供属性让我知道是否支持例如画布（Modernizr.canvas == true？）。是否为比这更容易的测试添加了这些 html 类名？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T13:38:25.413

这些类名旨在用于您的 CSS 代码，因此您可以添加备用样式以防某个功能不受支持。Modernizr 文档页面的示例：

```
/* Simulated box shadow using borders: */
.box {
   border-bottom: 1px solid #666;
   border-right:  1px solid #777;
}
.boxshadow div.box {
   border: none;
   -webkit-box-shadow: #666 1px 1px 1px;
      -moz-box-shadow: #666 1px 1px 1px;
           box-shadow: #666 1px 1px 1px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:21:16.860

我可能错了（如果我错了，请纠正我），这里的类表示 Modernizr 检测到的给定浏览器支持（或实际上不支持）的功能。

在这里查看文档：http: [//modernizr.com/docs/](http://modernizr.com/docs/)

**举个例子：**

```
<html class="no-js"> 
```

如果 JavaScript 被禁用，则modernizr 无法运行，因此该类将保留`"no-js"`，但如果启用 JavaScript，Modernizr 将替换`"no-js"`为`"js"`，同样会告诉您支持哪些其他功能

# html - 将 DOM 元素绑定到 Kineticjs 拖放形状

> ID：13914937
> 
> 赞同：1
> 
> 时间：2012-12-17T13:17:01.947
> 
> 标签：html, drag-and-drop, kineticjs

我一直在玩 Kineticjs 库。我已经成功添加了画布，创建了一个形状并将其拖放。

我希望将页面中的 html 内容绑定到或包装在形状中，以便能够以相同的方式使其可拖动，但仍保留 html/css/jquery 中的交互功能（因此不将 html 缓存为位图，我想过）。

我看不出该怎么做，也许以某种方式使用 id 选择器？

我是不是走错了，也许有更简单的方法可以达到相同的结果？

欣赏任何提示、建议或解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T01:18:10.550

好吧，在玩了一会儿之后，我放弃了寻找使用 DOM 的方法，而是使用 kineticjs 中的内置文本和图像对象来重新创建我最初使用 html/css 创建的东西。有点啰嗦，有兴趣看看是否有更短的方法。

```
// Create the Stage

var stage = new Kinetic.Stage({
    container: 'container-kinetic',
    width: 1024,
    height: 768
  });

// Start Steve  

// Create the layer
  var layer = new Kinetic.Layer();
  // var rectX = stage.getWidth() / 2 - 50;
  // var rectY = stage.getHeight() / 2 - 25;

 // create the group
var group = new Kinetic.Group({
    x: -365,
    y: -275,
    draggable: true
   });

// circle border for object
  var circ = new Kinetic.Circle({
    x: stage.getWidth() / 2,
    y: stage.getHeight() / 2,
    radius: 43,
    fill: '#fff',
    stroke: '#cccccc',
    strokeWidth: 1,
  });

   // this isn't doing anything - remove in cleanup
    var steve = new Kinetic.Image({
      x: stage.getWidth() / 2,
      y: stage.getHeight() / 2,
      image: steve,
      width: 81,
      height: 81,
    });

 // add the object title 
   var titleText = new Kinetic.Text({
    x: stage.getWidth() / 2 - 70,
    y: stage.getHeight() / 2 + 55,
    text: 'Steve Schofield - Founder',
    fontSize: 10,
    fontFamily: 'Maven Pro',
    textFill: '#252525'
  });

// add the object image
   var imageObj = new Image();
  imageObj.onload = function() {
    var yoda = new Kinetic.Image({
     x: stage.getWidth() / 2 - 41,
    y: stage.getHeight() / 2 - 41,
      image: imageObj,
      width: 81,
      height: 81
    });

    // add the shape to the layer
    group.add(yoda);

    // add the layer to the stage
    stage.add(layer);
  };
  imageObj.src = 'img/team_1_p3.png';

 // add the facebook icon
 var imageObjfb = new Image();
  imageObjfb.onload = function() {
    var fbIcon = new Kinetic.Image({
     x: stage.getWidth() / 2 - 26,
    y: stage.getHeight() / 2 + 82,
      image: imageObjfb,
      width: 8,
      height: 12
    });

    // add the shape to the layer
    group.add(fbIcon);

    // add the layer to the stage
    stage.add(layer);
  };
  imageObjfb.src = 'img/facebook_icon_small.png';

   // add the twitter icon
 var imageObjtwitter = new Image();
  imageObjtwitter.onload = function() {
    var twitterIcon = new Kinetic.Image({
     x: stage.getWidth() / 2 - 12,
    y: stage.getHeight() / 2 + 84,
      image: imageObjtwitter,
      width: 12,
      height: 10
    });

    // add the shape to the layer
    group.add(twitterIcon);

    // add the layer to the stage
    stage.add(layer);
  };
  imageObjtwitter.src = 'img/twitter_icon_small.png';

   // add the linkedin icon
 var imageObjli = new Image();
  imageObjli.onload = function() {
    var liIcon = new Kinetic.Image({
     x: stage.getWidth() / 2 - -4,
    y: stage.getHeight() / 2 + 82,
      image: imageObjli,
      width: 11,
      height: 12
    });

    // add the shape to the layer
    group.add(liIcon);

    // add the layer to the stage
    stage.add(layer);
  };
  imageObjli.src = 'img/linkedin_icon_small.png';

  // add the rss icon
 var imageObjrss = new Image();
  imageObjrss.onload = function() {
    var rssIcon = new Kinetic.Image({
     x: stage.getWidth() / 2 + 20,
    y: stage.getHeight() / 2 + 83,
      image: imageObjrss,
      width: 12,
      height: 11
    });

    // add the shape to the layer
    group.add(rssIcon);

    // add the layer to the stage
    stage.add(layer);
  };
  imageObjrss.src = 'img/rss_icon_small.png';

  // add cursor styling
  group.on('mouseover', function() {
    document.body.style.cursor = 'pointer';
  });
 group.on('mouseout', function() {
    document.body.style.cursor = 'default';
  });

  // add the shape to the layer
  group.add(circ);
  group.add(steve);
  group.add(titleText);
  layer.add(group);

  // add the layer to the stage
  stage.add(layer);

  steve.src = 'http://braindu.studiophp.net/investors.braindu/img/team_1_p3.png';  // end Steve 
```

# javascript - 如何动态分配DOM事件然后执行？

> ID：13914938
> 
> 赞同：0
> 
> 时间：2012-12-17T13:17:06.440
> 
> 标签：javascript, event-handling

我正在尝试在期望事件处理的函数中执行 DOM 事件，例如 onmouseover、onclick 等，按名称作为函数参数，如下所示：

```
...

doSomething(target, 'onmouseover');

doSomething : function(tgt, evt)
{
   ...
   o.evt = function() {
      alert(evt);
   }
   ...
}

... 
```

分配不会引发任何错误，所以我想，它在语法上是正确的，但它也不会发出警报。为什么？

（请不要推荐使用框架。我想了解我的错误以及如何管理它。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:23:02.610

`[]`您可以使用以下符号动态分配事件：

**[演示](http://jsfiddle.net/9CBWb/)**

```
var obj = {
   doSomething : function(tgt, evt)
   {
      tgt[evt] = function() {
         alert(evt);
      }
   }
};

obj.doSomething(document.getElementById("test"), 'onmouseover');
​ 
```

# wpf - 如何使用触发器更改 TextBlock 的前景色？

> ID：13914943
> 
> 赞同：4
> 
> 时间：2012-12-17T13:17:12.677
> 
> 标签：wpf, textblock, datatrigger, foreground

我想从依赖属性更改 TextBlock 的前景色。
但我不改变文本块的颜色。
我的代码中不知道这个问题。
如何使用触发器更改 TextBlock 的前景色？

**XAML：**

```
<TextBlock Name="TestBlock" Text="Test color" >
    <TextBlock.Style>
        <Style TargetType="TextBlock">
            <Style.Triggers>
                <Trigger Property ="IsMouseOver" Value="True">
                    <Setter Property= "Foreground" Value="Gray"/>
                </Trigger>
                <DataTrigger Binding="{Binding Path=TestColorMode2, RelativeSource={RelativeSource AncestorType={x:Type local:Window1}}}" Value="0">
                    <Setter Property="Foreground" Value="Red" />
                </DataTrigger>
                <DataTrigger Binding="{Binding Path=TestColorMode2, RelativeSource={RelativeSource AncestorType={x:Type local:Window1}}}" Value="1">
                    <Setter Property="Foreground" Value="Blue" />
                </DataTrigger>
                <DataTrigger Binding="{Binding Path=TestColorMode2, RelativeSource={RelativeSource AncestorType={x:Type local:Window1}}}" Value="2">
                    <Setter Property="Foreground" Value="Green" />
                </DataTrigger>
                <DataTrigger Binding="{Binding Path=TestColorMode2, RelativeSource={RelativeSource AncestorType={x:Type local:Window1}}}" Value="3">
                    <Setter Property="Foreground" Value="Black" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </TextBlock.Style>
</TextBlock> 
```

**代码：**

```
public static DependencyProperty TestColorModeProperty = DependencyProperty.Register("TestColorMode", typeof(int), typeof(UpdateProgressItem));

public int TestColorMode
{
    get { return (int)GetValue(TestColorModeProperty); }
    set { SetValue(TestColorModeProperty, value); }
}

            ....

private void button1_Click(object sender, RoutedEventArgs e)
{
    TestColorMode++;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T13:20:57.920

也指定类型：

```
<Trigger Property="TextBlock.IsMouseOver" Value="true">
     <Setter Property="TextBlock.Foreground" Value="Gray" />
</Trigger> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T13:35:59.427

这种方式将帮助您：

```
<Style x:Key="SimpleLabel" TargetType="{x:Type Label}">
    <Setter Property="HorizontalContentAlignment" Value="Left"/>
    <Setter Property="VerticalContentAlignment" Value="Top"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Label}">
                <Grid>
                    <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" RecognizesAccessKey="True"/>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Background" Value="{DynamicResource DisabledBackgroundBrush}" TargetName="Border"/>
                        <Setter Property="BorderBrush" Value="{DynamicResource DisabledBackgroundBrush}" TargetName="Border"/>
                        <Setter Property="Foreground" Value="{DynamicResource DisabledForegroundBrush}"/>
                    </Trigger>
                    <Trigger Property="TextBlock.IsMouseOver" Value="true">
                        <Setter Property="TextBlock.Foreground" Value="Gray" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# abap - 如何获取视图的所有 ui 元素？(Web Dynpro ABAP)

> ID：13914945
> 
> 赞同：1
> 
> 时间：2012-12-17T13:17:24.393
> 
> 标签：abap, webdynpro

当输入字段不可见时，我想使输入字段的标签不可见。我不能将它绑定到相同的上下文，因为它们是动态构建的。

有没有办法获取所有视图元素，以便我可以循环它们并使标签动态不可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-03T14:09:53.110

每个视图控制器都包含方法 WDDOMODIFYVIEW 和一个初始为空的实现。在此方法中，您可以访问整个 UI 元素层次结构，并且应该能够检索对标签和输入字段的引用，并在输入字段被隐藏的情况下隐藏标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T20:06:18.500

这是一些示例动作处理程序代码，它`MYLABEL`在容器内找到标签并将其隐藏。它并没有完全涵盖您的用例，但我认为它可以帮助您入门。

```
data view type ref to cl_wdr_view.
view ?= wd_this->wd_get_api( ).
data container type ref to cl_wd_uielement_container.
container ?= view->root_element.
data children type cl_wd_uielement=>tt_uielement.
children = container->get_children( ).
data element type ref to cl_wd_uielement.
loop at children into element.
  data id type string.
  id = element->get_id( ).
  if id = `MYLABEL`.
    element->set_visible( `01` ).
  endif.
endloop. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-13T21:19:50.357

首先，编写第二个程序，该程序将负责使用带有 EXPORTING LIST TO MEMORY 的 SUBMIT ABAP 指令调用您的程序。

当您运行此调用程序时，它将使用 SUBIT 调用您的程序，但系统不会在屏幕上生成输出，而是将输出发送到系统内存。

稍后，在 webdynpro 或任何其他程序中，您可以调用 ABAP 函数 LIST_FROM_MEMORY 将程序的早期输出检索到内部表。

干杯!

# java - foo.class java 文件中的指令数

> ID：13914948
> 
> 赞同：5
> 
> 时间：2012-12-17T13:17:53.193
> 
> 标签：java, .class-file

我有一个java程序的二进制文件说foo.class。我是否可以计算该类文件中的指令数？还是我必须有源代码才能计算指令的数量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T13:24:18.220

只需使用[javap](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/javap.html)[反汇编](http://www.vogella.com/blog/2009/11/16/decompiling-java-class/)类。**-c**选项_

 **> ...为类中的每个方法打印出反汇编代码，即组成 Java 字节码的指令。这些都记录在 Java 虚拟机规范中**

# php - 如何使用 PHP 将多行添加到对客户端的单个响应中

> ID：13914954
> 
> 赞同：0
> 
> 时间：2012-12-17T13:18:21.167
> 
> 标签：php, service, response

我正在尝试将多行从数据库传递到客户端作为响应，但我无法实现！`Error: {"src":null, "dest":null}`像这样，但是如果我尝试在它里面`echo`的值打印列值但它没有通过。`$s`

这是我的代码：

```
$c=$db->getcount($dest);
$user = $db->getUserByEmailAndPassword($dest);

if ($user != false) {
    $response["success"] = 1;

    for($j=0;$j<=$c;$j++) {
        $s= $user[$j]['src'];
        $d =$user[$j]['dest'];

        $response["user"]["src"] = $s;
        $response["user"]["dest"] = $d;  
    }

    echo json_encode($response);  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:25:00.010

尝试这个

```
 $response["user"][]["src"]= $s;
  $response["user"][]["dest"]= $d; 
```

代替

```
 $response["user"]["src"] = $s;
  $response["user"]["dest"] = $d; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:24:35.563

看来您在每次迭代时都覆盖了 $response["user"][...] ：

```
$response["user"][] = array(
    "src" => $user[$j]['src'],
    "dest" => $user[$j]['dest'],
); 
```

# php - 自动保存 PHP 表单

> ID：13914957
> 
> 赞同：0
> 
> 时间：2012-12-17T13:18:33.970
> 
> 标签：php, mysql

我有一个带有多个选项卡的表单。每个选项卡都有各种项目（文本框、单选按钮、下拉框）。我需要在空闲 15 秒后或当用户单击不同的选项卡/项目时保存内容。

目前，当用户单击按钮时，我正在保存。这会产生一个问题，如果用户在选项卡 x 上并单击按钮，则表单将返回到第一个选项卡。

我希望在最后一个选项卡上有保存按钮。当用户在不同的选项卡中填写数据时，它会自动被保存。当用户单击最后一个选项卡时，会显示命令按钮，然后在单击时执行另一个保存，并将用户带到包含所有记录的主屏幕。

请您的建议和指导:)

问候，

巴布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:24:16.017

我想说您要在选择另一个选项卡时使用AJAX调用提交每个选项卡内容（表单值）。这样，您可以让用户在选项卡之间导航，而无需重新加载整个表单。这些值被移交给服务器上的某个 ajax 端点，在那里可以存储它们。

您可以对自动保存功能执行相同的操作：设置一个计时器，当它触发您使用 ajax 调用在后台发布表单值时。

为了让您的生活更轻松，请使用 jquery 进行 ajax 调用，使用 jquery-ui 进行选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:24:51.730

在将数据保存在最后一个选项卡中之前，您不会保存以前的选项卡数据。因为如果用户在移动到最后一个选项卡后不愿意保存数据意味着.. 保存以前的数据并删除它是浪费..

所以你可以在会话中做到这一点......（即）你将每个选项卡的数据存储在会话中，会话 ID 为

```
$session[ID][fieldName1]
$session[ID][fieldName2]
$session[ID][fieldName3] 
```

最后，如果用户单击最后一个按钮选项卡..您从会话中获取数据并**使用 AJAX**保存在数据库中并取消设置会话变量....如果他单击取消也取消设置.....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T15:35:06.803

您还可以使用 Jquery 选项卡，以便将完整的表单放在一个页面上，并且可以将表单保存在最后一个选项卡上（使用您的按钮）。

这样您就不必担心您的数据会保存到最后一个选项卡。

# javascript - 三 js内存管理

> ID：13914959
> 
> 赞同：13
> 
> 时间：2012-12-17T13:18:39.383
> 
> 标签：javascript, memory-management, three.js

我有一个包含很多 Mesh 和 MorphAnimMesh 的大场景。我想在删除网格时释放内存。如果我知道正确，这是最好的方法：

```
for ( var i = scene.children.length - 1; i >= 0 ; i -- ) {
  var obj = scene.children[i];
  scene.remove(obj);
  obj.deallocate(); 
  obj.geometry.deallocate();
  obj.material.deallocate();
  obj.material.map.deallocate();
} 
```

如果我在此之后在任务管理器中检查内存使用情况，则没有任何变化。（试图为 GC 等待几分钟，但什么也没有。） Google Chrome 内存快照显示对象仍然存在。THREE.Geometry @1862203 等中的 morphTargets。

尝试将 obj 设置为 null，但仍然没有减少内存。

知道我在做什么错吗？

它是一个有关卡的游戏，玩家可以从一个到另一个。经过几次更改后，内存使用量增加到非常高。这就是为什么我想在级别更改之前从内存中删除所有对象。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T13:48:11.777

您很可能需要添加以下部分或全部内容：

```
geometry.dispose();
material.dispose();
texture.dispose(); 
```

看看这些例子：

[http://mrdoob.github.com/three.js/examples/webgl_test_memory.html](http://mrdoob.github.com/three.js/examples/webgl_test_memory.html)

[http://mrdoob.github.com/three.js/examples/webgl_test_memory2.html](http://mrdoob.github.com/three.js/examples/webgl_test_memory2.html)

三.js r.60

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-08-03T10:31:18.327

我确实尝试了所有的 dispose 和 deallocate 方法，但没有任何效果。

然后我为使用 webgl 渲染器渲染 360 图像的 ionic 应用程序执行了以下操作。

```
this.renderer = new THREE.WebGLRenderer({ antialias: true });
RicohView.prototype.stopRendering = function () {
    this.canRender = false;
    this.renderer.forceContextLoss();
    this.renderer.dispose();
    console.log('renderer disposed');
    cancelAnimationFrame(this.requestId);
} 
```

requestId 是可以从

```
this.requestId = requestAnimationFrame(render); 
```

# javascript - 可以在 asp.net 的 onblur 事件中将焦点设置为相同的控件

> ID：13914960
> 
> 赞同：0
> 
> 时间：2012-12-17T13:18:39.420
> 
> 标签：javascript, jquery, asp.net

即使失去焦点，是否可以将焦点放在同一个按钮上。

我保留了代码供您参考。

OnSuccess 是按钮 btnOK 的模糊事件。

```
 function OnSuccess() {
       document.getElementById('btnOk').focus();
       return true;
    } 
```

在btnOK上按tab时，它失去了焦点。如何在同一个控件中保持焦点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:22:59.280

尝试：

```
function OnSuccess() {
  setTimeout(function(){
       document.getElementById('btnOk').focus();
    }, 0);
   return true;
} 
```

# c# - 如何在我的 Web 应用程序中的图像上书写

> ID：13914962
> 
> 赞同：1
> 
> 时间：2012-12-17T13:18:43.207
> 
> 标签：c#, asp.net, image, mouse, gdi

我使用以下代码在我的 Web 应用程序中加载图像：

```
 Bitmap oCanvas = (Bitmap)Bitmap.FromFile(Server.MapPath("Images\\2.jpg"));
    Graphics g = Graphics.FromImage(oCanvas);
    Response.ContentType = "image/jpeg";
    oCanvas.Save(Response.OutputStream, ImageFormat.Jpeg);
    Response.End();
    g.Dispose();
    oCanvas.Dispose(); 
```

* * *

现在如何用鼠标在此图像上书写并将结果保存为图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:24:58.970

为了让最终用户使用鼠标在图像上书写，您的页面上需要一个客户端 ActiveX 控件。这仅适用于 Windows PC，并且很快就会变得非常复杂。

另一种选择是将图像托管在 Flash 应用程序中，该应用程序可以在所有平台上运行（iOS 除外 :-) 你可以在这里找到一个例子：http: [//active.tutsplus.com/tutorials/games/create-一个基本的绘图应用程序在闪存/](http://active.tutsplus.com/tutorials/games/create-a-basic-drawing-application-in-flash/)

第三种选择是使用 HTML5 Canvas + 客户端 JavaScript。并非所有浏览器都支持 HTML5（预）标准。你可以在这里找到一个很好的例子：http: [//www.williammalone.com/articles/create-html5-canvas-javascript-drawing-app/#demo-complete](http://www.williammalone.com/articles/create-html5-canvas-javascript-drawing-app/#demo-complete)，另一个例子在这里：[http://www.codicode。 com/art/how_to_draw_on_a_html5_canvas_with_a_mouse.aspx](http://www.codicode.com/art/how_to_draw_on_a_html5_canvas_with_a_mouse.aspx)

祝你好运！

# pthreads - 两个线程中的 HIDAPI

> ID：13914966
> 
> 赞同：1
> 
> 时间：2012-12-17T13:19:04.580
> 
> 标签：pthreads, libusb, hidapi

根据[https://github.com/signal11/hidapi/issues/72，HIDAPI](https://github.com/signal11/hidapi/issues/72)在 Linux 机器上应该是线程安全的。但是，我根本无法让它工作。这就是我所做的：

```
#ifdef WIN32
#include <windows.h>
#endif
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <pthread.h>
#include <stdlib.h>
#include <assert.h>

#include "hidapi.h"
hid_device *handle;

static void *TaskCode(void *argument)
{
    int res;
    //hid_device *handle;
    unsigned char buf[64];

//     res = hid_init();
//     if( res == -1 )
//     {
//         return (void*)1;
//     }
//
//     handle = hid_open(0x0911, 0x251c, NULL);
//     if( handle == NULL )
//     {
//         return (void*)2;
//     }

    printf( "while 2\n");

    while( 1 )
    {
        memset( buf, 64, 0 );
        res = hid_read(handle, buf, 0);
        if( res == -1 )
        {
            return (void*)3;
        }

        printf( "received %d bytes\n", res);

        for (int i = 0; i < res; i++)
            printf("Byte %d: %02x ", i+1, buf[i]);
        //printf( "%02x ", buf[0]);
        fflush(stdout);
    }

    return (void*)0;
}

int main(int argc, char* argv[])
{
    int res;
    //hid_device *handle;
    unsigned char buf[65];

    res = hid_init();
    if( res == -1 )
    {
        return 1;
    }

    handle = hid_open(0x0911, 0x251c, NULL);
    if( handle == NULL )
    {
        return 2;
    }

    hid_set_nonblocking( handle, 0 );

    pthread_t thread;
    int rc = pthread_create(&thread, NULL, TaskCode, NULL);

    printf( "while 1\n");

    while(1)
    {
        int a = getchar();
        if( a == 'a')
        {
            // Get Device Type (cmd 0x82). The first byte is the report number (0x0).
            buf[0] = 0x0;
            buf[1] = 0x82;
            res = hid_write(handle, buf, 65);
            if( res != -1 )
                printf( "write ok, transferred %d bytes\n", res );
            else
            {
                printf( "write error\n" );
                char* str = hid_error(handle);
                printf( "error: %s\n", str );
                return 1;
            }
        }
        else if( a== 'b')
            break;
    }

    void* trc;
    rc = pthread_join(thread, &trc);

    printf( "rc code: %d\n", (int)trc );

    // Finalize the hidapi library
    res = hid_exit();

    return 0;
} 
```

如果我不使用全局句柄，我每次都会收到“写入错误”。如果我这样做，如示例中那样，形式上一切正常，但 hid_read 总是返回 0 字节...当然，如果我执行简单的 hid_write() 后跟 hid_read()，我将按预期得到对命令 0x82 的正确回复. 我真的迷路了，我忽略了什么吗？

编辑：澄清一下，零字节也适用于所有内容，包括。鼠标等按钮。所以它*似乎*可以工作，但数据缓冲区始终为零字节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:41:05.543

惭愧，一个愚蠢的错误。代码应该是：

```
memset( buf, 0, 64 );
res = hid_read(handle, buf, 64); 
```

然后它就起作用了。应该多睡少写！

# c# - C#“预期的常量值”错误无处不在

> ID：13914968
> 
> 赞同：0
> 
> 时间：2012-12-17T13:19:08.700
> 
> 标签：c#, visual-studio-2008

我使用 Visual Studio 2008 对 C# 项目进行了一些更改。当我尝试编译时，我收到一个即时错误“CS0150 - 需要一个常量值”。但是编译器没有告诉我这个错误应该发生在哪里，既不是代码行，也不是 *.cs 文件。输出如下：

```
------ Build started: Project: MyProgram, Configuration: Release Any CPU ------
error CS0150: A constant value is expected 
```

这个错误来自哪里以及如何摆脱它？我确定我没有像 MSDN 建议的那样更改任何“切换”语句。我还尝试将项目升级到 Visual Studio 2010，但这并没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:19:04.760

以下伪代码导致此错误：

```
private static int NumEntries = 2;
private string[] Strings = new String[NumEntries] {"123", "abc"}; 
```

由于某种原因，编译器没有告诉我错误发生在哪里，所以我不得不搜索我的整个项目。

# android - 为什么自定义复合视图中的 EditText 会重复使用在另一个复合视图实例中输入的文本？

> ID：13914970
> 
> 赞同：26
> 
> 时间：2012-12-17T13:19:12.133
> 
> 标签：android, android-edittext, android-view, android-custom-view

我正在尝试编写一个由 a`TextView`和一个`EditText`_compound_view.xml_ 组成的自定义复合视图：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/compoundText"
android:layout_width="match_parent"
android:layout_height="wrap_content" >

<TextView
    android:id="@+id/textLabel"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Label" />

<EditText
    android:id="@+id/textEdit"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:hint="enter text here" >
</EditText> 
```

这是扩展类`LinearLayout`：

```
public class CompoundView extends LinearLayout {

public CompoundView(Context context, AttributeSet attrs) {
    super(context, attrs);

    readAttributes(context, attrs);
    init(context);
}

public CompoundView(Context context) {
    super(context);

    init(context);
}

private void init(Context c) {

    final LayoutInflater inflater = (LayoutInflater) c
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    inflater.inflate(R.layout.compound_view, this);

}
   } 
```

现在，如果我`View`在 _activity_main.xml_ 中使用其中的 2 个：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >
<it.moondroid.compoundview.example.CompoundView
    android:id="@+id/compoundview1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true" />

<it.moondroid.compoundview.example.CompoundView
    android:id="@+id/compoundview2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/compoundview1" />
</RelativeLayout> 
```

并且在 Activity 代码中，我只对 RelativeLayout 进行膨胀，而不管理 onSaveInstanceState：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

} 
```

然后当我在 2nd 中写一些东西`EditText`并旋转我的设备时，`text`第一个 custom 的 EditText 中也会出现同样的情况`View`。

为什么会发生这种行为？

**编辑：**

我通过删除*android:id*并在 Compound_view.xml 中使用*android:tag*解决了这个问题`EditText`，然后在 CompoundView 类中管理 EditText 状态的保存：

```
@Override
protected Parcelable onSaveInstanceState() {

    Bundle bundle = new Bundle();
    bundle.putParcelable("instanceState", super.onSaveInstanceState());
    bundle.putString("currentEdit", mEditText.getText().toString());
    bundle.putBoolean("isFocused", mEditText.hasFocus());
    return bundle;

}

@Override
protected void onRestoreInstanceState(Parcelable state) {

    if (state instanceof Bundle) {
        Bundle bundle = (Bundle) state;
        mEditText.setText(bundle.getString("currentEdit"));
        if (bundle.getBoolean("isFocused")) {
            mEditText.requestFocus();
        }
        super.onRestoreInstanceState(bundle.getParcelable("instanceState"));
        return;
    }

    super.onRestoreInstanceState(state);
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2018-04-17T11:44:49.000

您需要使用禁用EditText 的[SaveEnabled](https://developer.android.com/reference/android/view/View.html#attr_android:saveEnabled)属性`android:saveEnabled="false"`

在您的自定义视图中，您正在从定义了 ID 的 XML 扩展布局。如果视图定义了 ID，Android 操作系统具有保存和恢复视图状态的默认功能。

这意味着它将在 Activity 暂停时保存 EditText 的文本，并在 Activity 恢复时自动恢复。在您的情况下，您多次使用此自定义视图，并且正在膨胀相同的布局，因此您的所有 EditText 都具有相同的 ID。现在，当 Activity 将暂停时，Android 将检索 EditText 的值并保存它们的 ID，但由于每个 EditText 具有相同的 ID，值将被覆盖，因此它将在所有 EditText 中恢复相同的值。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-17T14:17:11.373

我首先要说我还没有确认这一点......但我在使用复合视图时遇到了同样的问题，类似于你正在做的事情。

我认为问题的根源在于Android如何自动保存`EditText`控件的状态，并且我认为它是通过“id”来保存的。因此，如果您的 xml 中有多个具有相同“id”的控件，那么当它保存状态然后恢复状态时，具有相同 id 的所有控件都会获得相同的值。您可以通过向`EditText`您的普通 xml 添加 2 个控制并给它们相同的`android:id`值并查看它们是否最终获得相同的值来尝试此操作。

在您的情况下，您可以尝试不在复合视图中使用 id，而是通过标签 ( `View.findViewWithTag`) 或名称以另一种方式查找元素，看看这是否会有所不同。

就我而言，我通过后者解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-21T19:00:51.893

我有同样的问题，这就是我让它工作的方式。首先需要为editText的saveEnabled设置false。我们可以在布局中保留**android:id**。

```
<EditText
  android:id="@+id/editText"
  android:saveEnabled="false" 
```

然后在您的复合视图中覆盖以下方法并自行管理状态。如果需要，请随时询问工作示例。

```
@Override
protected Parcelable onSaveInstanceState() {
    Bundle bundle = new Bundle();
    bundle.putParcelable("state", super.onSaveInstanceState());
    String text = editText.getText().toString();
    bundle.putString("text", text);
    return bundle;
}

@Override
protected void onRestoreInstanceState(Parcelable state) {
    if (state instanceof Bundle) {
        Bundle bundle = (Bundle) state;
        String text = bundle.getString("text");
        state = bundle.getParcelable("state");
        editText.setText(text);
    }
    super.onRestoreInstanceState(state);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T13:46:20.327

看看我在您的问题中的评论，并确保您正确获得了对您的观点的引用。

我正在使用您的代码，如下所示：

```
CompoundView cv1 = (CompoundView) findViewById(R.id.compoundview1);
TextView tv1 = (TextView) cv1.findViewById(R.id.textEdit);

CompoundView cv2 = (CompoundView) findViewById(R.id.compoundview2);
TextView tv2 = (TextView) cv2.findViewById(R.id.textEdit); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-04T20:38:17.250

如果您有更复杂的包含许多子视图的复合视图，您可以考虑覆盖`dispatchSaveInstanceState`最外层的`ViewGroup`类并且不要调用超级实现。

像这样：

```
@Override
protected void dispatchSaveInstanceState(SparseArray<Parcelable> container) {
    //If you don't call super.dispatchRestoreInstanceState(container) here,
    //no child view gets its state saved
} 
```

我使用它，因为在我的情况下，我有许多不同的复合视图的层次结构，这些视图具有共同的超类，我在其中做了这个覆盖。（对于新布局，我一直忘记将 SaveEnabled 属性设置为 false。）但是有许多警告，例如您需要手动保存焦点视图，然后请求其焦点，因此当屏幕旋转时，您的应用程序不会出现异常行为。

**编辑：** 如果您确实需要保存复合视图的状态，`dispatchSaveInstanceState`则用空主体覆盖将导致`onSave/RestoreInstanceState`不被调用。如果您想使用它们并且仍然不保存任何子视图的状态，则需要调用`super.dispatchFreezeSelfOnly(container)`您的覆盖。

更多信息在这里：[http ://charlesharley.com/2012/programming/views-saving-instance-state-in-android](http://charlesharley.com/2012/programming/views-saving-instance-state-in-android)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-09T20:07:01.087

问题的发生是由于From your code`id`上的字段`compound_view.xml`
，我刚刚注意到您在课堂 上夸大`compound_view`了布局文件。 一旦您在文件中创建并放入和id ，android studio 就会自动将这些s 创建到类中的值中。 因此，当您在布局文件中放置两次时间时，您只需创建两个实例，但是，这两个实例都只有一个地址位置。因此，它们指向在类中声明的相同地址位置。`CompoundView`

`compound_view.xml``android:id="@+id/textLabel"``android:id="@+id/textEdit"``layout xml``id``int``R`

`CompoundView``activity_main.xml``CompoundView``textEdit``textLabel``R`

这就是为什么，每当您以编程方式更改`textEdit`或`textLabel`发送文本时，它们也会更改`textEdit`您`textLabel`的`CompoundView`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-08T15:08:23.320

我想强调一篇[很棒的文章](https://www.netguru.com/codestories/how-to-correctly-save-the-state-of-a-custom-view-in-android)，它让我大开眼界。它基于重新实现`onSaveInstanceState()`和`onRestoreInstanceState(state: Parcelable?)`.

这样做的好处是您可以在同一个布局中多次使用同一个复合视图（没有重复的 id 问题）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-28T10:11:32.203

如果有人在屏幕旋转后由于内部视图的共享 id 而出现不正确的焦点恢复问题，您可以通过覆盖 findFocus 方法来控制将哪个 id 保存为焦点视图，如下所示：

```
 override fun findFocus(): View {
      if (focusedChild != null) {
          return this
      }

      return super.findFocus()
    } 
```

然后焦点恢复到您的复合视图，但是您应该处理 requestFocus 调用，以便正确的子视图在恢复时获得焦点。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-02-15T11:45:38.890

我遇到了同样烦人的问题，并用另一种解决方案解决了它，而不是建议的解决方案。当自定义视图膨胀时，我没有找到带有 ID 或标签的它们，我使用该`getChildAt`方法获取它们。我不必保存实例状态。

这是一个例子：

要膨胀的自定义 XML (custom_view.xml)：

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android" >
    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center"
        android:textAppearance="?android:attr/textAppearanceMedium"/>
    <EditText
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center"/>
</merge> 
```

然后，您只需在视图初始化期间以这种方式获取视图：

```
private void initView(Context context) {
    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    inflater.inflate(R.layout.custom_view, this, true);

    setOrientation(LinearLayout.HORIZONTAL);
    setGravity(Gravity.CENTER);

    TextView mTitleTV = (TextView) getChildAt(0);
    EditText mContentET = (EditText) getChildAt(1);
} 
```

**重要提示**：您必须从 XML 中删除所有 ID

# c++ - Windows Messagebox 没有在 C++ 中显示和终止？

> ID：13914975
> 
> 赞同：-4
> 
> 时间：2012-12-17T13:19:42.620
> 
> 标签：c++, windows, winapi

我`MessageBox`在 C++ 中使用，使用`winuser.h`头文件。

当我运行应用程序时，消息框不显示，程序在该行终止。

我的代码：

```
HWND hDlg=NULL;

MessageBox (hDlg, TEXT ("Check the UserName and Password is Correct"), TEXT ("Windows Logon"), MB_ICONINFORMATION); 
```

注意：我也在使用`winwlx.h`. 这会导致问题吗？我应该如何安排头文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:42:44.213

在正常情况下，`MessageBox()`不会使应用程序崩溃。您显示的代码没有将任何错误值传递给`MessageBox()`，因此它可能崩溃的唯一方法是如果您的应用程序的内存被其他代码严重损坏，或者安装了行为不端的外部消息/对话框挂钩。

# javascript - 移动引导上的导航栏下拉菜单

> ID：13914976
> 
> 赞同：0
> 
> 时间：2012-12-17T13:19:53.197
> 
> 标签：javascript, css, twitter-bootstrap

使用移动设备（触摸）时，我的导航栏与引导程序有问题。

如果我使用的是计算机，导航栏可以正常工作，但如果是触摸设备，如果尝试选择一个选项，则下拉菜单会被隐藏。

```
<div class="navbar navbar-inverse">
    <div class="navbar-inner">
        <div class="container">
                        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
                        <a class="btn btn-navbar" data-toggle="collapse"
                            data-target=".nav-collapse"> <span class="icon-bar"></span>
                            <span class="icon-bar"></span> <span class="icon-bar"></span>
                        </a>

                        <!-- Be sure to leave the brand out there if you want it shown -->
                        <a class="brand" href="/webga/index/index">Inicio</a>

                        <!-- Everything you want hidden at 940px or less, place within here -->
                        <div class="nav-collapse">
                            <ul class="nav">
                                <li class="dropdown"><a href="#" class="dropdown-toggle"
                                    data-toggle="dropdown" data-target=".nav-collapse">
                                        Cadastros <b class="caret"></b>
                                </a>
                                    <ul class="dropdown-menu">
                                        <li><a href="<c:url value="/empresa/novaEmpresa"/>">Empresa</a></li>
                                        <li><a
                                            href="<c:url value="/empreendedor/novoEmpreendedor"/>">Empreendedor</a></li>
                                        <li><a
                                            href="<c:url value="/empreendimento/novoEmpreendimento"/>">Empreendimento</a></li>
                                        <li><a href="<c:url value="/atividades/novaAtividade"/>">Atividades</a></li>
                                        <li><a
                                            href="<c:url value="/subatividade/novaSubAtividade"/>">Sub-Atividades</a></li>
                                        <li><a
                                            href="<c:url value="/responsavel/novoResponsavel"/>">Responsavel
                                                Técnico</a></li>
                                        <li><a
                                            href="<c:url value="/documentacao/novaDocumentacao"/>">Documentações</a></li>
                                    </ul></li>
                            </ul>
                            <ul class="nav">
                                <li class="dropdown"><a href="#" class="dropdown-toggle"
                                    data-toggle="dropdown"> Consultas <b class="caret"></b></a>
                                    <ul class="dropdown-menu">
                                        <li><a href="<c:url value="/processos/pesquisa"/>">Processos</a></li>
                                        <li><a href="<c:url value="/subatividade/lista"/>">SubAtividades</a></li>
                                        <li><a href="<c:url value="#"/>">Legislações</a></li>
                                        <li><a href="<c:url value="#"/>">Documentos</a></li>
                                    </ul></li>
                            </ul>
                            <ul class="nav">
                                <li class="dropdown"><a href="#" class="dropdown-toggle"
                                    data-toggle="dropdown"> Solicitações <b class="caret"></b></a>
                                    <ul class="dropdown-menu">
                                        <li><a href="<c:url value="#"/>">Licensa
                                                Ambiental/Florestal</a></li>
                                        <li><a href="<c:url value="#"/>">Declaração de
                                                isenção de licensa</a></li>
                                    </ul></li>
                            </ul>
                            <ul class="nav">
                                <li class="dropdown"><a href="#" class="dropdown-toggle"
                                    data-toggle="dropdown"> Relátorios <b class="caret"></b></a>
                                    <ul class="dropdown-menu">
                                        <li><a href="<c:url value="#"/>">Lista de
                                                Atividades/Sub-Atividades</a></li>
                                        <li><a href="<c:url value="#"/>">Solicitações por
                                                Empreendedor</a></li>
                                        <li><a href="<c:url value="#"/>">Solicitações por
                                                Empreendimento</a></li>
                                        <li><a href="<c:url value="#"/>">Solicitações por
                                                Atividade</a></li>
                                        <li><a href="<c:url value="#"/>">Estatística por
                                                Atividade</a></li>
                                        <li><a href="<c:url value="#"/>">Relação dos
                                                Usuarios</a></li>
                                        <li><a href="<c:url value="#"/>">Relação de
                                                Empreendedores e seus Empreendimentos</a></li>
                                    </ul></li>
                            </ul>
                            <ul class="nav">
                                <li class="dropdown"><a href="#" class="dropdown-toggle"
                                    data-toggle="dropdown"> Ajuda <b class="caret"></b></a>
                                    <ul class="dropdown-menu">
                                        <li><a href="<c:url value="#"/>">Informações</a></li>
                                        <li><a href="<c:url value="#"/>">Suporte</a></li>
                                    </ul></li>
                            </ul>
                            <ul class="nav">
                                <li class="dropdown"><a href="#" class="dropdown-toggle"
                                    data-toggle="dropdown"> Sistema <b class="caret"></b></a>
                                    <ul class="dropdown-menu">
                                        <li><a href="<c:url value="/usuario/alterarSenha"/>">Alterar
                                                Senha</a></li>
                                    </ul></li>
                            </ul>
                            <ul class="nav pull-right">
                                <li class="pull-right"><a href="<c:url value="/logout"/>">Logout</a></li>
                            </ul>
                        </div>

                    </div>
                </div>
            </div> 
```

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:24:11.210

您可能还没有更新到最新的 Bootstrap，是吗？

我在这里写了一篇博客文章，包括针对此问题的临时修复：http: [//forwebonly.com/fix-for-twitter-bootstrap-dropdown-on-ipad-and-iphone/](http://forwebonly.com/fix-for-twitter-bootstrap-dropdown-on-ipad-and-iphone/)

但是当你更新到最新的 Bootstrap（2.2.2 或更高版本）时，这个问题应该会得到解决，你可以在他们的[changelog](http://blog.getbootstrap.com/2012/12/08/bootstrap-2-2-2-released/)中阅读。

> 以下是此版本中新增内容的概要：
> 
> ...
> 
> 下拉菜单：为移动设备上的下拉菜单添加了临时修复，以防止它们提前关闭。

# r - 在 R 中，如何使用一个表来定义要用于另一个表中的双向 ANOVA 的列？

> ID：13914981
> 
> 赞同：1
> 
> 时间：2012-12-17T13:20:15.610
> 
> 标签：r

我有两张桌子，m和epi。Epi 表包含 m 列的名称。

```
 head(m[,1:6])
         Geno    11DPW      8266         80647        146207    146227
1 SB002XSB012 0.87181895    G/G           C/C          G/G        A/A
2 SB002XSB018         Na    G/G           C/T          G/G        A/A
3 SB002XSB044   1.057744    G/G           C/C          G/G        A/A
4 SB002XSB051 1.64736814    G/G           C/C          G/G        A/A
5 SB002XSB067 0.69987475    A/G           C/C          G/G        A/G
6 SB002XSB073 0.60552177    A/G           C/C          G/G        A/G

    > dim(m)

[1]   167 28234
and 
head(epi)
       SNP1      SNP2
1  7789543   12846898
2 12846898  7789543
3 24862913  4603896
4  4603896   24862913
5 50592569  7789543
6 27293494   57162585

    dim(epi)

[1] 561   2 
```

我想取每一行 Epi，并在 m 的 11DPW 上对 m 中的这 2 列进行双向方差分析。我试过了

```
f<-function (x) {
 anova(lm (as.numeric(m$"11DPW")~ m[,epi[x,1]]*m[,epi[x,2]]))
 }
apply(epi,1,f) 
```

并得到错误：`[.data.frame`（m，，epi [x，1]）中的错误：选择了未定义的列有什么建议吗？谢谢， 伊姆里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:35:52.850

暂时搁置使用整数作为列名的复杂性（也就是说，假设这个问题得到了正确处理）

### `"undefined columns selected"`如果 中指示的列`epi`不存在，您仍然会收到错误`m`

```
offendingElements <- !sapply(epi, "%in%", colnames(m))

# since an offending element likely disqualifies the row from the anova test, identify the whole row
offendingRows <- which(offendingElements) %% nrow(epi)   

# perform your apply statement over:
epi[-offendingRows, ] 
```

* * *

### 清理应用中使用的功能

当您使用`apply(epi, 1, f)`传递给每个调用的内容时，`f`是一整行`epi`. 因此，`epi[x, 1]`不是给你你想要的结果。例如，apply 语句的第 7 次迭代`x`相当于`epi[7, ]`. 因此，要获取第一列，您只需要`x`直接索引即可。因此，在您的功能中：

```
Instead of       epi[x, 1]   and    epi[x, 2]
You want to use  x[[1]]      and    x[[2]] 
```

这是第一部分。其次，我们需要将整数作为列名来处理。非常重要：如果您使用 m[, 7823] 这将为您提供 m 的第 7823 列。您必须确保将整数转换为字符串，表明您希望列名为“7823”，而不是（必须）第 7823 列。

用于`as.character`此：

```
 m[, as.character(x[[1]])] 
```

### 把它们放在一起

```
offendingElements <- !sapply(epi, "%in%", colnames(m))
offendingRows <- which(offendingElements) %% nrow(epi)   

apply(epi[-offendingRows, ], 1, function (x) 
   anova( lm ( as.numeric(m$"11DPW") ~ m[, as.character(x[[1]]) ] * m[, as.character(x[[2]]) ] ))
) 
```

* * *

有另一种处理名称的方法，最简单的方法是使它们成为适当的字符串

```
# clean up the elements in epi
epi.clean <- sapply(epi, make.names)

# clean up m's column names
colnames(m) <- make.names(colnames(m))

# use epi.clean  in your apply statement.  Dont forget offendingRows
apply(epi.clean[-offendingRows, ], 1, function (x) 
   anova( lm ( as.numeric(m$"11DPW") ~ m[, x[[1]] ] * m[, x[[2]] ] ))
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:34:27.233

我怀疑你的值`epi`是数字，但你想要使用的是它们的字符等价物，因为列名`m`是字符串（即使这些字符串是由数字组成的）。试试这个：

`m[[as.character(epi[x,])]]` （ETC）

接线员很古怪，`[[`但很酷。

# python - GAE memcache 是否旨在正确使用 django 1.4？

> ID：13914983
> 
> 赞同：1
> 
> 时间：2012-12-17T13:20:20.933
> 
> 标签：python, django, google-app-engine

我正在开发一个使用`Django`框架编写并在`GAE`实例上运行的项目。它还使用 Google`memcache`作为默认缓存后端。这个项目是使用 Django 1.3 开发的，并且运行良好。但是最近我们尝试在 Django 1.4 上运行我们的项目并遇到了一个奇怪的异常：`argument of type 'Client' is not iterable`.

此异常的原因在[于此](https://github.com/django/django/commit/c11f9c3193901215ec79732af6ab6c66b3c1c2ba#L0R31)提交。以下是自 Django 1.3 以来添加的两行代码：

```
 if (KEY_PREFIX + session_key) in cache:
        return True 
```

这些行假设`cache`对象是可迭代的。缓存对象本身是`google.appengine.api.memcache.Client`项目的`settings.py`. 这个类确实不提供可迭代的接口。

所以我的问题是：（如果是的话）`memcache`应该如何使用`Django 1.4`？

UPD。这是我们`settings.py`与该问题相关的片段：

```
 SESSION_ENGINE = "django.contrib.sessions.backends.cached_db"
    CACHES = {
        'default': {
            'BACKEND': 'google.appengine.api.memcache.Client',
         }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:06:45.580

尝试这个。我正在使用 django-nonrel，但是我没有看到任何代码表明这在普通 django 上不起作用（我可能是错的）

```
SESSION_ENGINE = 'django.contrib.sessions.backends.cached_db'
CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',
    }
} 
```

# jquery - JQuery .each() 返回未定义

> ID：13914984
> 
> 赞同：0
> 
> 时间：2012-12-17T13:20:22.693
> 
> 标签：jquery

我有两张桌子。第一个仅用于标题，因为我没有找到使标题不可滚动的解决方案。第二个包含内容，但在侧面加载时为空。首先是两个表的代码。

```
 <table width="100%">
                <caption class="splitselection">
                    <b>Downloads</b>
                </caption>
                <thead align="left">
                    <tr> 
                        <th scope="col" width="36%"   align="left"          >Dateiname           </th>
                        <th scope="col" width="32%"   align="left"          >Fortschritt         </th>
                        <th scope="col" id="status" width="22%"align="left" >Status              </th>
                        <th scope="col" width="10%" align="left"            >Ordner &ouml;ffnen  </th>
                    </tr>
                </thead>
            </table>
            <div style="overflow:auto; height:115px;  width:100%" class="downloadFrame">
                <table width="100%" id="download_table" align="center">
                    <tbody align="left">
                    </tbody>
                </table>
            </div> 
```

所以现在我想`<tr>`用这段代码来捕捉表格中的每个元素：

```
var interval = window.setInterval(function() {
    $('#download_table > tbody > tr').each(function() {
        alert($(this).find('td')[0].html);
    });
},5000); 
```

我正在创建一个检查特定表格单元的间隔。

在我的警报中，我想检索这个表格单元，但我的警报在这里返回“未定义”。如果我只是写`alert($(this).find('td')[0]);`它返回我 HTML `htmlObjectTableCell`。

在不添加任何表格的情况下，我的间隔什么也不做。如果我添加一行，我会收到警报。所以对我来说，当我想获取 tablecell html 时一定有问题

然而，我尝试使用 .html .val 和 .text，但得到的结果与以前相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:22:51.100

您正在循环遍历作为直接子元素的每个 tr 到作为 #download_table 的直接子元素的 tbody-element。您的标记显示的是 tbody-element 根本没有任何子元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:25:31.600

DOM 元素内容的 HTML 存储在`innerHTML`属性中，而不是名为 的属性`html`中，因此您需要将该行更改为：

```
alert($(this).find('td')[0].innerHTML); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T13:34:51.167

试试这个：

```
$(this).find('td').eq(0).html(); 
```

或者

```
$(this).find('td:first-child').html(); 
```

顺便说一句，`$("foo").html`返回对`html`函数的引用而不是调用它。确保您使用`function_name()`而不是`function_name`在您想要实际执行名为`function_name`.

## 解释

在 jQuery 中，`$('selector')[0]`, 不返回一个 jQuery 包装的对象，而是一个 PODO（Plain Old Dom Object 有人吗？）。这意味着您不能在返回的对象上调用 jQuery 函数。但是`$('selector').eq(0)`返回一个 jQuery 包装的对象，因此您可以在其上调用 jQuery 函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T13:26:21.343

`<td>`表中没有

# java - 可变长度数据需要考虑哪些散列算法

> ID：13914985
> 
> 赞同：2
> 
> 时间：2012-12-17T13:20:27.907
> 
> 标签：java, algorithm, hash, text-files

为避免任何混淆，我将根据我对哈希算法的研究重新提出我的问题

问题陈述 我有多个包含可变长度数据记录的文本文件。我需要查找输入中是否有重复记录。每个文本文件都可能有数百万的数据记录。

由于我无法一次将所有数据加载到内存中，因此我计划在处理记录时创建记录中关键字段的哈希。处理记录意味着验证、过滤和转换它。处理完所有文本文件中的所有记录后，将它们合并以创建整个输入的一个视图（文本文件或数据库表）。

如果为所有记录生成哈希值，则查找重复项会快得多。如果散列值存在冲突，则只能检查那些记录是否相等（假设散列算法是确定性的）

问题 - 对于此类输入（即可变长度数据），我应该考虑哪些哈希算法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T13:28:24.630

**简答**

不要这样做。使用 Java 映射。您可以在此处找到详细信息：http: [//docs.oracle.com/javase/6/docs/api/java/util/Map.html](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)

**长答案**

您可以通过将字符串视为 base-N 中的数字来创建完美的散列函数，其中 N 是任何字符可以采用的所有可能值。这里的问题是内存。散列函数旨在与数组一起使用，这意味着您需要一个足够大的数组来处理散列结果，这是不切实际的。

例如，以 10 个字符的键为例。让我们更加谦虚，假设它们保证只包含小写字母。这为每个字符和 10 个字符提供了 26 种可能性。这意味着可能的组合是：

```
26 ^ 10 = 141,167,095,653,376 
```

如果您查看散列算法，它们首先包含的内容之一就是碰撞检测，因为它们承认碰撞是生活中的事实。

现在你说你没有在内存中加载键，但你为什么要使用哈希呢？哈希的目的是为您提供到数组索引的映射。也许你最好使用另一种机制。

**可能的解决方案**

如果您担心内存，请获取有关文件中重复项的一些统计信息。如果您只存储一个标志来指示哈希中特定键的出现，并且您有很多重复项，那么您也许可以只使用 Java 的映射。Java 的映射处理冲突，因此不会阻止您检测唯一键。您可以放心，如果找到 A[x]，则意味着 x 在 A 中，即使 x 的哈希与先前的哈希冲突。

接下来，您可以尝试一些实用程序来提取重复项。由于它们是专门为此目的而编写的，因此它们应该能够处理大量数据。

最后，您可以尝试将您的条目放入数据库并使用它来处理重复项。这可能看起来有点矫枉过正，但数据库已针对处理大量记录进行了优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:41:42.463

这是 Map 理念的扩展。在诉诸于此之前，我会检查它不能通过简单地构建一个代表所有字符串的 HashSet 来完成。请记住，您可以使用 64 位 JVM 并设置较大的堆大小。

定义一个 StringLocation 类，其中包含对磁盘上的字符串进行随机访问所需的数据 - 例如，对 RandomAcessFile 的引用和文件内的偏移量。如果您不能一次打开所有文件，请根据需要打开和关闭，为最常用的文件缓存 RandomAcessFile。

创建一个`HashMap<Integer,List<StringLocation>>`.

开始阅读字符串。对于每一个字符串，转换为小写，得到它的hashCode()，hash，整数形式。如果 Map 中有一个以哈希为键的条目，则将新字符串与现有值中表示的每个字符串进行比较，执行随机文件访问以获取已处理的字符串。使用字符串 equalsIgnoreCase。如果有匹配项，则您有重复项。如果没有匹配项，则将表示当前字符串的新 StringLocation 附加到 List。

这需要一次最多两个字符串在内存中，一个是您当前正在处理的字符串，另一个是先前处理的字符串，它具有您要与之比较的相同 hashCode() 结果。

通过使用 MessageDigest 为小写字符串生成具有低冲突风险的宽校验和并将其保存在 StringLocation 对象中，您可以进一步减少必须重新读取字符串以进行等式检查的次数。在比较期间，如果校验和不匹配，则返回 false，无需重新读取字符串。

# windows-phone-7 - 如何将 DateTime 存储在 Windows Phone 的独立存储中？

> ID：13914989
> 
> 赞同：3
> 
> 时间：2012-12-17T13:20:39.883
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8, isolatedstorage

我为 Windows Phone 开发了一个应用程序。而且，在这里我需要将 DateTime 变量存储在隔离存储中。

这可能吗？我知道可以存储字符串和整数等基本类型。

请帮助我通过这个

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T14:04:16.080

您可以将值作为[Ticks](http://msdn.microsoft.com/en-us/library/system.datetime.ticks%28v=vs.100%29.aspx)存储在隔离存储中，然后在读取它时只需从中[初始化一个新的 DateTime](http://msdn.microsoft.com/en-us/library/z2xf7zzk%28v=vs.100%29.aspx)实例。蜱被定义为[很长](http://msdn.microsoft.com/en-us/library/system.int64%28v=vs.100%29.aspx)，因此应该直接存储它。

```
var valueToStore = DateTime.Now.Ticks;
// Save to isolated storage

var storedValue = ReadFromIsolatedStorage();
var dateTime = new DateTime(storedValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:50:28.517

你也可以使用

```
DateTime.Parse(string); 
```

转换为字符串并保存在隔离存储中。并使用上述语句从存储中检索。

# php - 奇怪的 mysql_fetch_array 输出

> ID：13914992
> 
> 赞同：-2
> 
> 时间：2012-12-17T13:20:51.443
> 
> 标签：php, mysql

我的代码是：

```
$query = "SELECT a.hash, a.full, a.partial, a.servers, a.lastupd, b.full, b.partial, b.servers, b.lastupd FROM table1 AS a, table2 AS b WHERE a.hash='".$hashcode."' AND a.hash=b.hash;";
$result = mysql_query($query); 
```

然后我执行一个

```
print_r(mysql_fetch_array($result)); 
```

我得到了这个奇怪的输出：

```
Array
(
    [0] => blah
    [hash] => blah
    [1] => 1,1,1
    [full] => 0,1
    [2] => 1,2,1
    [partial] => 4,2
    [3] => srv1,srv2,srv3
    [servers] => srv2,srv3
    [4] => 0000-00-00 00:00:00
    [lastupd] => 0000-00-00 00:00:00
    [5] => 0,1
    [6] => 4,2
    [7] => srv2,srv3
    [8] => 0000-00-00 00:00:00
) 
```

为什么 table 有数据重复`b`并且不创建带有键的关联数组`a.*`and `b.*`？

**注意：**设置为 0 的时间戳是正确的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T13:24:51.213

因为 mysql_fetch_array 返回关联数组和数值数组。如果只需要关联数组，请使用 mysql_fetch_assoc。

（顺便说一句，不推荐使用 mysql，[请阅读有关使用 mysqli 或 PDO](http://php.net/manual/en/mysqlinfo.api.choosing.php)的信息）

# c# - 光标在 ListView 单元格上时如何显示工具提示？

> ID：13914996
> 
> 赞同：0
> 
> 时间：2012-12-17T13:21:11.913
> 
> 标签：c#, .net, winforms, listview

我有`listview`对象，其中有几列。其中一列不适合所有文本信息，并且文本已被剪切。我需要实现这样的事情：当用户将鼠标光标移动到该列的单元格时，会显示所有文本。有可能这样做吗？我现在有：

```
 protected ListViewItem GetItem(ListView listView, Point mousePosition)
    {
       Point localPoint = listView.PointToClient(mousePosition);
       return listView.GetItemAt(localPoint.X, localPoint.Y);
    }

    private void myListView_MouseMove(object sender, MouseEventArgs e)
    {
       ListViewItem item = GetItem(myListView, Cursor.Position); 
       // or should I use e.Location instead of  Cursor.Position?

       item.ToolTipText = "my info"//Now I need to show "my info" on the cell 
       //that user move cursor on
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:50:06.243

试试这个代码

```
ListViewItem iListView = new ListViewItem("add");
iListView.ToolTipText = "Add Expanded";
myListView.Items.Add(iListView); 
```

通过将 ListView 的 ShowItemToolTips 属性设置为 true 来执行此操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:18:44.797

使用列表显示体面的工具提示的一种旧方法是隐藏标签并使其在所需位置可见，并在所需的持续时间内显示所需的文本。这样做的好处可能是多线、多色提示。

所以它是这样工作的：

*   标签位于列表视图或表单上，它是不可见的。
*   在鼠标移动时，您可以使用鼠标 X 和 Y 获取项目数据。位置、大小并显示填充数据的标签。
*   label 本身可以有一个计时器，它会在 label 可见时启动，并在 5 秒内使其不可见。

我记得今年就是这样做的。虽然我的“工具提示”是在列表框上完成的。用文本框替换标签，突然你可以让单元格中的数据可编辑:o)

# documentation - 在哪里可以找到 GDB 早期版本的文档？

> ID：13914998
> 
> 赞同：2
> 
> 时间：2012-12-17T13:21:16.480
> 
> 标签：documentation, gdb, gnu

在哪里可以找到 GDB 早期版本的文档？位于[http://sourceware.org/gdb/documentation/](http://sourceware.org/gdb/documentation/)的文档仅适用于当前版本。

我正在专门寻找 GDB 7.3.1 版的“Debugging with gdb”文档。当前在[http://sourceware.org/gdb/current/onlinedocs/gdb/](http://sourceware.org/gdb/current/onlinedocs/gdb/)上提供的文档并不可取，因为它适用于更高的 GDB 版本 7.5.50.20121217。

在我的工作场所，我们使用的是 GDB 7.3.1，因此需要。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:04:36.787

> 在我的工作场所，我们使用的是 GDB 7.3.1，因此需要。

下载 7.3.1 [tar 球](http://ftp.gnu.org/gnu/gdb/gdb-7.3.1.tar.gz)，并且（这些可能需要调整，从内存中键入它们）：

```
cd gdb-7.3.1
./configure
cd gdb/doc
make html 
```