# StackOverflow 问答 14449000-14449999

# python - 在 Python 上重复列表的长度？

> ID：14449000
> 
> 赞同：-5
> 
> 时间：2013-01-21T23:22:37.443
> 
> 标签：python, list, loops

> **可能重复：**
> [使用循环查找列表中的最大数量](https://stackoverflow.com/questions/14448692/find-the-maximum-number-in-a-list-using-a-loop)

我正在使用循环在 Python 的列表中找到最大数量。为了做到这一点，我需要有一个循环遍历整个列表。我可以使用什么循环来遍历整个列表？我是 Python 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T23:27:47.640

您可以使用 for 循环遍历列表，例如：

```
for item in lst:
    # do something with item 
```

但是，获取列表中最大项目（这似乎是您想要的）的更简单方法是：

```
max(lst) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T23:27:22.203

将一段代码重复 n 次，其中 n 是 some_list 的长度，如下所示：

```
for i in xrange(len(some_list)):
    # block of code 
```

或者...

```
i = 0
while i < len(some_list):
    # block of code
    i = i + 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T23:30:17.010

```
max = None
for e in lst:
    if max is None or e > max: max = e 
```

但正如大卫已经说过的那样，简单地打电话`max(lst)`就可以了。

# c++ - .exe窗口退出后

> ID：14449005
> 
> 赞同：0
> 
> 时间：2013-01-21T23:23:05.317
> 
> 标签：c++, visual-c++, visual-studio-2012

我使用了 Visual Studio 2012，这是我第一次使用它。我开始了

`NEW`→<kbd>Project-Empty→<kbd>Project-sourcethen `files-add`→<kbd>new items-Cpp文件并输入以下代码：

```
#include <iostream>
using namespace std;
int main()
{
    int cents;
    int dollars, quarters, dimes, nickels, pennies;

    cout << "Enter total cents: ";
    cin >> cents;

    dollars = cents / 100;
    cents = cents - dollars*100;
    quarters = cents / 25;
    cents = cents - quarters*25;
    dimes = cents / 10;
    cents = cents - dimes*10;
    nickels = cents / 5;
    cents = cents - nickels*5;
    pennies = cents;  

    cout << "This corresponds to "
         << dollars << " dollars, "
         << quarters << " quarters, "
         << dimes << " dimes, "
         << nickels << " nickels, and "
         << pennies << " pennies.\n\n";
    return 0;
} 
```

我想编写一个程序将美分分解为`dollars`、`quarters`、和`nickels`，窗口已成功形成，但在我输入美分数后，我想转换的窗口消失了。断点或系统（“暂停”）似乎不起作用。这是消息：`dimes``pennies``.exe`

```
'Project2.exe' (Win32): Loaded 'C:\Users\dell\Documents\Visual Studio 2012\Projects\Project2\Debug\Project2.exe'. Symbols loaded. 'Project2.exe' (Win32): Loaded 'C:\Windows\SysWOW64\ntdll.dll'. Cannot find or open the PDB file. 'Project2.exe' (Win32): Loaded 'C:\Windows\SysWOW64\kernel32.dll'. Cannot find or open the PDB file. 'Project2.exe' (Win32): Loaded 'C:\Windows\SysWOW64\KernelBase.dll'. Cannot find or open the PDB file. 'Project2.exe' (Win32): Loaded 'C:\Windows\SysWOW64\msvcp110d.dll'. Symbols loaded. 'Project2.exe' (Win32): Loaded 'C:\Windows\SysWOW64\msvcr110d.dll'. Symbols loaded. The thread 0xe24 has exited with code -1073741749 (0xc000004b). The program '[7476] Project2.exe' has exited with code -1073741510 (0xc000013a). 
```

如何保留`.exe`窗口并查看结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:14:58.290

程序的返回代码`0xc000013a`表明按下了 CTRL-C，导致程序退出。您是否按了CTRL-C？

如果您硬编码美分的数量（例如 1999），而不是提示用户输入数字，会发生什么情况？那么它工作正常吗？

如果添加“cin >> cents;”会发生什么？*在*显示计算值的 cout 语句之后？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T23:24:51.357

如果您要编写控制台程序，您应该从控制台运行它们。如果您想编写一个从 GUI 运行的程序，请编写一个 GUI 程序。

`system("pause")`没有工作的原因是你从不做`cout.flush();`或`cout << endl;`。在您实际产生输出之前暂停将无济于事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T23:43:46.103

使用`ctrl`+ `F5`在没有调试工具的情况下运行您的程序。

# css - 更改特定的 div，nth-child？

> ID：14449006
> 
> 赞同：5
> 
> 时间：2013-01-21T23:23:24.467
> 
> 标签：css, html, behavior, css-selectors

我这里有问题。我`div`的代码中提到了 4 次，例如：

```
<div class='box1'>
Hello 1
</div>
<div class='box1'>
Hello 2
</div>
<div class='box1'>
Hello 3
</div>
<div class='box1'>
Hello 4
</div> 
```

我想对这个`div`类做一些改变，但只有最后一个。我不能让第n班工作，看来我需要做一张`ul`桌子才能工作？我可以在**CSS**中的某个地方找到解决方法并使其工作而无需重写我的代码吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T23:45:47.347

您应该能够使用`nth-child`伪类来做到这一点。看看这个演示：http: [//jsfiddle.net/m7uW7/2/](http://jsfiddle.net/m7uW7/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-21T15:46:57.507

抱歉回答有点晚了。

要对**Last-DIV**进行任何更改，您只需要简单地添加一个选择器，即**:last-of-type**在 CSS 中进行更改。

附加组件：如果是**First-DIV**，添加一个选择器，即**first-of-type**

**HTML：**

```
 <div class="box1">
  Hello 1
</div>
<div class="box1">
  Hello 2
</div>
<div class="box1">
  Hello 3
</div>
<div class="box1">
  Hello 4
</div> 
```

**CSS：**

```
div.box1:first-of-type {
  color: #fff;
  background-color: green;
}
div.box1:last-of-type {
  color: #fff;
  background-color: blue;
} 
```

**编辑：** `https://jsfiddle.net/naheedshareef/09dwtfpu/8/`

# ajax - 清理 Django Ajax JSON GET 请求

> ID：14449008
> 
> 赞同：0
> 
> 时间：2013-01-21T23:23:27.677
> 
> 标签：ajax, django, json

所以我正在尝试使用 AJAX 来加载一些数据。我可以加载数据，但它卡在 json 中。我如何使它更清洁和更易于阅读？

```
//jquery
$.get("/get_artwork", function(data) {
         var obj = jQuery.parseJSON(data)
         $('.result').append("<br/> " + data + " ");
     });

#Views.py 
def get_artwork(request):
    if request.is_ajax():
    artwork = Artwork.objects.all()[1:]
    if request.method == 'GET':
        data = serializers.serialize("json", artwork, fields=('name','updated'),  indent=2, use_natural_keys=True)
        return HttpResponse(data,mimetype='application/javascript')
    elif request.method == 'POST':
            message = "This is an XHR POST request"
            # Here we can access the POST data
            print request.POST
    else:
        message = "Hello"
return HttpResponse(message) 
```

这就是呈现的内容：

```
[ { "pk": 3, "model": "artworks.artwork", "fields": { "updated": "2013-01-20T06:46:24Z" } }, { "pk": 2, "model": "artworks.artwork", "fields": { "updated": "2013-01-17T23:44:26Z" } }, { "pk": 1, "model": "artworks.artwork", "fields": { "updated": "2013-01-17T23:43:22Z" } } ] 
```

我怎样才能使它更易于阅读？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T23:35:58.457

根据您留下的评论..您的问题似乎在客户端下游（例如网络浏览器）。*目前尚不清楚卡在 JSON 中*是什么意思。如果您使用 JavaScript 解析 JSON，则需要使用`JSON.parse()`将其转换为原生 JavaScript 对象。如果您使用 jQuery 和该`$.ajax()`方法，则需要将其设置`mimetype`为`application/json`自动将其解析为 JSON。

**更新**

如果您想控制*JSON*数据在浏览器中的呈现方式，我建议您将 JSON 响应解析为原生 JavaScript 对象，然后遍历要在页面中呈现的对象和字段。例如，使用 jQuery：

```
$.ajax({
    url: '/some-url/',
    dataType: 'json',
    success: function(resp) {
        var i, k, li, obj, fields;

        for (i = 0; i < resp.length; i++) {
            obj = resp[i];
            // render obj pk or model name here... now iterate over fields
            fields = obj.fields;

            for (k of obj.fields) {
                li = $('<li>').text(k + ': ' + obj.fields[k]);
                // append the li to some element..
            }
        }
    }
}); 
```

# c++ - 持久未定义的引用

> ID：14449011
> 
> 赞同：0
> 
> 时间：2013-01-21T23:23:36.817
> 
> 标签：c++, eclipse

我在 MAC OS X 上的 Eclipse 中有一个持久的未定义符号错误。我无法找出错误的来源。

当我尝试使用下面的 GA_Operations 和 gaAlgorithm->run_algorithm..... 时，根据编译器会发生错误：

```
int Application::execute_Algorithm()
{

    if (this->GA_On)
{
    GA_Operations *gaAlgorithm = new GA_Operations();
    gaAlgorithm->run_algorithm(blocksSequence, bins);
}

else
{
    packingAlgorithm->run_algorithm(blocksSequence, bins); return 0;
}                       //

return 0;
} 
```

显示的错误是： `Undefined symbols for architecture x86_64: "binproject::GA_Operations::run_algorithm(binproject::Blocks_Sequence&, binproject::BinContainer&)", referenced from: binproject::Application::execute_Algorithm() in Application.o "binproject::GA_Operations::GA_Operations()", referenced from: binproject::Application::execute_Algorithm() in Application.o`

声明是：

```
class GA_Operations {
public:

GA_Operations();
~GA_Operations();

//call from main application to execute algorithm

void run_algorithm(Blocks_Sequence &b_seq, BinContainer &container);
... 

}; 
```

每当我尝试在实现 (CPP) 文件中定义声明的函数时，它也会引发类似的错误。

有任何想法吗？这似乎只发生在这个类中。

另外，如果代码缩进有问题，我深表歉意，我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T23:29:53.853

您显示的错误是链接器错误。这意味着编译器认为某些东西存在，但链接器找不到您定义（未声明）它的位置。在某个地方你需要这样的东西：

```
GA_Operations::GA_Operations()
{
   // construct
}

void GA_Operations::run_algorithm(Blocks_Sequence &b_seq, BinContainer &container)
{
   // stuff
} 
```

你有那个地方吗？如果是这样，它是否在同一个文件`Application::execute_Algorithm`中？

如果不是，它在哪里？您如何将整个程序编译在一起，以便这些不同文件中的内容最终出现在同一个可执行文件中？

我完全不确定如何让 Eclipse 做你需要的事情。我知道这是可能的，但我熟悉纯命令行工具。您需要告诉 Eclipse`.cpp`包含上述定义的文件是您项目的一部分，应该被编译并链接到您创建的可执行文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:14:53.060

原来这是链接器设置的问题。我打开了自动生成makefile，问题自行解决了。

# sql - 我将 SELECT 查询更改为包含 JOIN，现在我无法在 DataGridView 中编辑单元格

> ID：14449012
> 
> 赞同：0
> 
> 时间：2013-01-21T23:23:42.650
> 
> 标签：sql, vb.net, winforms, datagridview, visual-studio-2012

好吧，我在这里滚动了一段时间，现在我只是卡住了。我写了一个查询来为我的 DataGridView 获取一些数据，然后想出了一个更短的查询来替换它。出于某种原因，在我更改了选择查询后，我无法再编辑 datagridview 控件中的单元格。唯一的区别是，我没有选择我需要编辑的列的整个表（*ITEM*表或*i*），而是选择了一个不同的表并将 ITEM 表连接到它。

这`ITEM.Amount [Payment]`是我需要编辑的列。我可以在第一个但不是第二个查询中编辑它。. .

工作查询：

```
select ct.[Employee]
, cT.[Employee ID]
, cT.[Case Number]
, cT.[Usual Payment]
, cT.[Scheduled Ded.]
, i.amount [Payment]
, i.Paycard_Date [Paycard Date]
, i.ID [item_id]
, i.modified [iMod]
from dbo.Item i
right join

(select 
    case(ISNULL(e.middle_name,'99'))
    when '99' then e.First_Name + ' ' + e.Last_Name
    else (e.First_Name + ' ' + e.Middle_Name + ' ' + e.Last_Name)
    end as Employee
, e.Number [Employee ID]
, c.number [Case Number]
, c.weekly_payment [Usual Payment]
, c.payment_balance [Scheduled Ded.]
, s.Agency [Source]
, c.modified [cMod]
, e.modified [eMod]
, s.modified [sMod]
, c.ID
from tCase c
inner join Employee e
on e.ID = c.ID_Employee
inner join Source s
on s.ID = c.ID_Source) as cT
on cT.ID = i.ID_Case 
```

非工作查询：

```
declare @paycard_date datetime
set @paycard_date = '1/10/2013'

select (isnull(e.First_Name,'') + ' ' + ISNULL(e.Middle_Name,'') + ' ' + ISNULL(e.Last_Name, '')) [Employee]
, e.Number
, c.Number
, c.Weekly_Payment
, c.Payment_Balance
, ISNULL(i.amount,'') [Payment]
, s.Agency
, isnull(i.Created,'') [created]
, isnull(i.Modified,'') [modified]
, ISNULL(i.ID,'') [Item ID]
from tcase c
inner join Employee e
on e.ID = c.ID_Employee
inner join Source s
on s.ID = c.ID_Source
left join 
(select * 
from item i
where paycard_date = @paycard_date) as i
on i.id_case = c.ID 
```

重申一下，这两个查询都有效，但“无效”查询不允许我编辑 ITEM.Amount [Payment] 列。我假设这是因为无法通过 DGV 控件编辑连接的表/列，但我不确定。一旦用户退出*edit-cell-mode ，我添加了我的 VB.net 代码来更新数据，但如果用户无法进入**edit-cell-mode*开始它并没有多大用处。

**编辑：** 我将尝试解释我要完成的工作。例如，假设我有 100 个**案例**文件。这些存储在 tCase 表中。这些案件跟踪员工薪水的**扣押**。实际的扣押扣款存储在**Item**表中。每周，对于每种情况，用户都需要向下查看列表并添加（或编辑）该周的项目。在创建项目之前（即，直到它不再是 $0 金额），项目表中显然不存在该项目的行。这意味着查看新一周的数据实际上不会显示任何内容，而编辑旧一周的数据将忽略零数量。

因此，我编写的查询通过提取每个 Case 条目并左连接以下子表来解决问题：

```
(select * 
from item i
where paycard_date = @paycard_date) as i 
```

所以我的新问题是......我是否应该重新考虑我提取这些数据的方法，或者是否可以编辑 DataGridView 中的列，即使该列被拉为子表？

# android - 获取列表视图行 onContextItemSelected

> ID：14449013
> 
> 赞同：2
> 
> 时间：2013-01-21T23:23:47.583
> 
> 标签：android, listview, contextmenu

我正在做一个项目，我有一个在运行时创建的多个列表视图的视图，每个列表视图都加载数据库的特定行。我想实现一个上下文菜单。问题是如何获取列表视图的行来检索数据库的 ID？如何在上下文菜单中获取我的列表适配器？或其他一些解决方案。谢谢！这是代码的一部分...

```
private void makeView(){

   yearsArray = db.getUniqueYears(TABLE_NAME);

   for (int i = 0; i <  yearsArray.size()  ; i++){

        list = db.getDocByYear(TABLE_NAME,  yearsArray.get(i));
        custom_adapter = new Document_adapter(this, list);
        ListView lv = new ListView(this);
        lv.setAdapter(custom_adapter);
        lv.setBackgroundResource(R.drawable.title_container_bg);
        registerForContextMenu(lv);

        }
}
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);

    MenuInflater mi = getMenuInflater();
    mi.inflate(R.menu.doc_options, menu);

}

  @Override
public boolean onContextItemSelected(MenuItem item) {
     AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();

    /* 

            */

    return super.onContextItemSelected(item);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T23:34:29.430

如果您正确设置了数据库，则可以`info.id;`在您的数据库中执行此操作，`onContextItemSelected`并给出数据库 ID

# javascript - 如何在不刷新页面的情况下将数据发送到数据库

> ID：14449014
> 
> 赞同：-3
> 
> 时间：2013-01-21T23:23:48.683
> 
> 标签：javascript, jquery

如何在不刷新页面的情况下将数据发送到数据库以及在不按下提交按钮的情况下将数据发送到数据库

我看到很多解释，但都取决于按钮，当按下按钮时，数据被发送到数据库而不刷新页面

我想要的是如何在不按下提交按钮的情况下将数据发送到数据库

我希望直接发送脚本数据而不刷新页面

尝试这个

```
<script>

$(function(){

  var A = {name:'khaled', password: 1234, submit: 'submit'};

    $.post('index.php',A,function(data){   

    return false;

    alert("OK");
});
});

</script> 
```

但是没有将数据发送到数据库

**试试这个**

```
<script>

$(function(){

  var A = {name:'khaled', password: 1234};

    $.post('index.php',A,function(data){

    $(data).find("input[name=submit]").click();

    return false;

    alert("OK");
});
});

</script> 
```

**但是更新了页面**

（索引.php）

```
<body>

user : <input type="text" name='name' />
password : <input type="text" name='password' />
<input type="submit" name='submit' value='موافق' />

</body> 
```

**如何在不按提交按钮的情况下将数据发送到数据库？？！！以及如何在不刷新页面的情况下将数据发送到数据库？？！！**

我不想按此按钮发送数据

```
<input type="submit" name='submit' value='موافق' /> 
```

**我想直接发送数据**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T23:32:59.827

这有点倒退，你有正确的想法。但是有点混

```
<script>

$(function(){

  var A = {name:'khaled', password: 1234};

    $.post('index.php',A,function(data){

    $(data).find("input[name=submit]").click();

    return false;

    alert("OK");
});
});

</script> 
```

如果您想在不单击提交按钮的情况下执行此操作。

您可能希望`bind()`, `delegate()`, `on()`...`on()`成为您的最佳解决方案。一个 keypress 或 keyup 事件，当按下 enter 键时，它会提交表单。以这种方式触发提交按钮，或者只是以这种方式发帖，无论哪种方式。

但总的来说：

```
<script>
  var A = {
            name: $('input[name="name"]).val(),
            password: $('input[name="password"]).val()
          };
    $.post('index.php',A,function(data){
        return false;
        alert("OK");
    });
</script> 
```

是你在后面的例子中需要的东西。但是，除了与回车键相关的一种或另一种形式的按键事件之外，您还可以将其基于一个计时器，该计时器等待元素空闲，在 x 时间内没有按键事件并传递数据，您可以`blur`在元素上执行此操作或任何数量的其他东西。取决于你想走的整体路线

请注意您的输入，但请确保它们是您希望它们在后端出现的内容，永远不要相信 javascript 会向您发送您所期望的内容。我会阅读基本的数据库安全和注入预防技术。

# ruby - 在 Heroku 上使用 Nesta 创建页面

> ID：14449016
> 
> 赞同：1
> 
> 时间：2013-01-21T23:23:50.893
> 
> 标签：ruby, heroku, content-management-system, sinatra, nestacms

我正在寻找一个简单的 CMS 与 Ruby，最好是 Sinatra。www.nestacms.com 看起来像一个了不起的候选人。

一些关键目标：

*   允许业务用户添加/编辑/删除页面（不是通过，`git`而是通过应用功能）
*   在 Heroku 上部署

据我了解，Nesta 页面是由部署中的静态页面文件生成的。`git`如果您添加通过并推送到 Heroku，这很好。

但是，如果您想在 Heroku Web 应用程序中创建页面（文件），由于 Heroku 的只读文件系统，这是不可能的。

寻求帮助：

*   使用 Nesta 和 Heroku 实现目标
*   替代方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T01:44:39.357

[Github](https://github.com)有一个[编辑器](https://help.github.com/categories/81/articles)来操作文件和按钮以在浏览器中创建/合并分支。

您可能希望将与内容相关的媒体存储在云存储服务（例如[dropbox](https://www.dropbox.com/)、[google drive](https://drive.google.com)、[cloudflare](https://cloudflare.com)等）上。您还可以通过 WebDAV 或其他一些工具连接/安装这些存储，如驱动器，具体取决于您喜欢的服务提供商和操作系统。

[snap-ci为自动化测试和/或部署（](https://snap-ci.com) [heroku](https://heroku.com)或您的 VPS/服务器）提供免费且易于使用的集成服务。当 master 分支更改[github](https://github.com) webhook 触发[snap-ci](https://snap-ci.com)并且您的网站将平均部署 1 分钟。

# android - Android sqlite 数据库 sqlite 数据库空_id 字段

> ID：14449021
> 
> 赞同：0
> 
> 时间：2013-01-21T23:24:02.793
> 
> 标签：android, android-listview, android-sqlite

我的数据库创建和填充没有任何问题。我什至有一个自定义适配器来在我的活动中显示列表视图中的行。问题是我的 _id 列实际上没有任何 ID。我在 listItemClick 上出现了一个对话框，数据被放入文本框中，底部有按钮，我试图让“删除”按钮工作，以便用户可以删除该记录。我正在尝试删除调用 _id 的记录，但是我的数据库的 ID 列对于我的所有记录都是空的。对话框显示每个项目的 ID 号，所有项目都显示为 0，当我使用 sqlite 数据库浏览器打开数据库时，每条记录的 id 列都是完全空的。谁能帮忙告诉我这是为什么？这是我使用的教程： [http://android-er.blogspot.co.uk/2011/06/edit-row-in-sqlite-database-using.html](http://android-er.blogspot.co.uk/2011/06/edit-row-in-sqlite-database-using.html)

一些代码：

创建数据库和表：

```
 public static final String KEY_ID = "_id";
     public static final String KEY_LESSON = "Lesson";
     public static final String KEY_DAY = "Day";
     public static final String KEY_START = "Start";
     public static final String KEY_END = "End";
     public static final String KEY_LOCATION = "Location";

     private SQLiteDatabase db;
     private DBHelper dbHelper;
     private final Context context;

     private static final String DATABASE_CREATE = "create table Schedule" + " (" + KEY_ID + " INTERGER PRIMARY KEY," 
     + KEY_LESSON + " text not null, " + KEY_DAY + " text not null," + KEY_START + " text not null, " + KEY_END 

public void deleteEntry(int id) {

  db.delete(DATABASE_TABLE, KEY_ID + "=" +id, null);

 } 
```

对话：

```
 myDialog.setPositiveButton("Delete", new DialogInterface.OnClickListener() {

      public void onClick(DialogInterface arg0, int arg1) {

      db.open();
  db.deleteEntry(item_id);

  }
  }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T23:27:19.677

这是错误的：

```
" INTERGER PRIMARY KEY," 
```

这会更好：

```
" INTEGER PRIMARY KEY AUTOINCREMENT," 
```

# php - MySQL - 私人帖子显示

> ID：14449023
> 
> 赞同：0
> 
> 时间：2013-01-21T23:24:14.973
> 
> 标签：php, mysql, privacy

所以我有 3 个表：用户、帖子、私人。在此示例中，lizzy 创建了一个私人帖子“约会”，并且只希望她的女朋友在私人表中看到它“authorized_user_ids”，而她自己在帖子表中看到“user_id”。

```
users
user_id   user_name
   1        tony
   2        steph
   3        lizzy
   4        adam
   5        lara
   6        alexa

posts
post_id   user_id   post_name   private (0 is public, 1 is private to authorized users)
   1         1       Coding        0
   2         3       Dating        1
   3         3       Show Me       0

private
private_id   post_id   authorized_user_ids
    1           2             2,5,6 
```

只有私人发帖者 user_id 和 authorized_user_ids 可以看到 lizzy 的“约会”帖子，但每个人都应该可以看到 lizzy 的“Show Me”帖子。注销的用户和未授权的用户不应该看到任何东西。这是最有效的方法吗，还是应该是：

```
private
private_id   post_id   authorized_user_id
    1           2               2
    2           2               5
    3           2               6 
```

这是我的第一个问题。我的第二个是从 mysql 数据库中提取数据时在 php 中解决它的最佳方法（显示到 authorized_user_ids）是什么？我们是否根据帖子表中的“私人”标志进行第二次查询？如果是1，我们在while循环中查询，从私有表中获取'authorized_user_ids'，如果匹配到登录用户的$logged_in_id，那么我们显示'Dating'？或者是否应该在主查询中使用私有表和帖子表中的“post_id”与“授权_user_ids”进行连接？任何有关如何最有效地做到这一点的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:11:55.890

第一个问题：我肯定会选择第二个版本。**将authorized_user_id**存储为 CSV 将导致数据库读取和写入操作的效率大大降低，因为您最终会在应用程序代码中一直拆分 CSV 值并生成错误的动态 SQL 语句以处理更新。您永远不必编写 PHP 代码来帮助找到不同数据集的交集，使用 SQL。

第二个问题：使用连接，例如不使用 while 循环

```
SELECT DISTINCT p.post_id, p.post_name FROM users as u
JOIN posts as p on p.user_id=u.user_id 
LEFT JOIN private pv on pv.post_id=p.post_id
WHERE (p.private=0) OR  (authorized_user_id={$logged_in_id} and p.private=1) 
```

上面（或非常相似）将列出所有帖子 $logged_in_id 为 2，但仅当 $logged_in_id 为 4 时才列出公共帖子等。

# xtext - Xtext：与替代的交叉引用

> ID：14449040
> 
> 赞同：0
> 
> 时间：2013-01-21T23:25:37.910
> 
> 标签：xtext, cross-reference

我已经开始了我的第一个 Xtext 项目，但遇到了交叉引用的问题（我认为这可能是问题所在）。我有一个 DatType、InterfaceDescription 规则和一个枚举。我想做的是通过让用户从枚举中选择一种数据类型或定义一个新的数据类型来描述一个接口。

Enum 可以正常工作，但是当我使用“datatype test1”定义一个新的数据类型并在 InterfaceDescription 中使用它时，我收到以下错误：“XtextReconcilerJob”遇到了问题。在“XtextReconcileJon”期间发生内部错误。这就是错误堆栈： http: [//pastebin.com/evFki2mB](http://pastebin.com/evFki2mB)

```
 DataType:
        'datatype' name=ID ('mapto' mappedType = JAVAID)?
    ;

    Interface:
        interfaceType=InterfaceType name=ID datatype=([DataType]| DataTypeEnum)
    ;

enum InterfaceType:
    INLET = 'inlet' |
    OUTLET = 'outlet'
;

    DataTypeEnum:
        INT8 = 'int8' | INT16 = 'int16' | INT32 = 'int32' |
        DOUBLE = 'double' | SINGLE = 'single' | REAL = 'real' |
        BOOLEAN = 'boolean' | CHAR = 'char'
    ; 
```

当我在另一个规则中使用 DataType Cross-Reference 时，它​​可以工作：

```
ParamList:
    'param:' datatype=[DataType] name=ID
; 
```

有谁知道有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T20:21:22.080

语法有一些问题，共同导致了这种奇怪的行为：

1.  `DataTypeEnum`，与其名称相反，它不是`enum`一个奇怪的对象，它可能代表一些字符串值。这隐藏了编辑器中接口规则中的替代类型分配问题。
2.  生成编辑器时，输出中会出现一些神秘的错误消息：
    *   `error(208): ../org.xtext.example.mydsl/src-gen/org/xtext/example/mydsl/parser/antlr/internal/InternalMyDsl.g:447:1: The following token definitions can never be matched because prior tokens match the same input: RULE_ID`
    *   `ebnf2 is not supported for CrossReference`- 这意味着，一个扩展的结构，如“|” 定义参考时不允许使用模式
3.  通过`DataTypeEnum`使用`enum`关键字前缀，数据类型属性定义在编辑器中变得错误，因为 EMF 中没有类型可以同时是 an`enum`和 EObject，因此问题位置变得明显。

最后，运行时错误是由于生成的解析器/词法分析器工具中缺少某些内容而导致的，并且生成的模型也不正确。

为了更具建设性，我建议通过定义一个 TypeReference 元素来替换有问题的行，该元素可以引用映射到 Java 的类型或数据类型。我可以通过以下方式扩展您的语法：

```
Interface:
        interfaceType=InterfaceType name=ID datatype=(TypeReference)
;

TypeReference:
    JavaTypeReference | DataTypeReference
;

JavaTypeReference:
    type = [DataType]
;

DataTypeReference:
    type = DataTypeEnum
;

enum DataTypeEnum:
        INT8 = 'int8' | INT16 = 'int16' | INT32 = 'int32' |
        DOUBLE = 'double' | SINGLE = 'single' | REAL = 'real' |
        BOOLEAN = 'boolean' | CHAR = 'char'
; 
```

PS.：我建议在语言中添加一些关键字以简化解析，尤其是错误恢复。有关详细信息，请参阅以下博客文章：http: [//zarnekow.blogspot.hu/2012/11/xtext-corner-7-parser-error-recovery.html](http://zarnekow.blogspot.hu/2012/11/xtext-corner-7-parser-error-recovery.html)

# visual-studio - detect Visual Studio 2012 version

> ID：14449045
> 
> 赞同：1
> 
> 时间：2013-01-21T23:26:17.233
> 
> 标签：visual-studio, visual-studio-2012, envdte

How do I detect whether Visual Studio 2012 RTM or Visual Studio 2012 with Update 1 is running using EnvDTE? The DTE.Version contains "11.0" in both cases.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:01:21.497

Visual Studio 2010 and 2012 put the SP information under the Wow6432Node subtree - e.g. HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\DevDiv\VS\Servicing. However, since VS 2012 Update 1 is *not* a service pack, the SP value hasn't been incremented.

Possibly the best way to detect if Update 1 is installed is by checking the version of a component you're interested in. For example for Visual C++, check HKLM\SOFTWARE\Wow6432Node\Microsoft\DevDiv\VC\Servicing\11.0\CompilerCore\Version : for RTM it's 11.0.50727; Update 1 is 11.0.51106.

# emacs - 如何以交互方式读取两个输入并在函数调用中使用它们

> ID：14449048
> 
> 赞同：8
> 
> 时间：2013-01-21T23:26:32.043
> 
> 标签：emacs, elisp

我目前正在上课学习elisp，所以我没有这门语言的经验。我试图以交互方式读取两个输入（矩形的宽度和长度），然后使用它们调用一个函数来计算矩形的面积。我的代码如下：

```
(defun rectangle_Area(w l)
"Compute the area of a rectangle, given its width and length  interactively."
(interactive "nWidth: ")
(interactive "nLength: ")
(setq area (rectangleArea w l))      
(message "The rectangle's area is %f." area)) 
```

目前我收到错误数量的参数错误。就像我说的，我以前没有经验......我真正需要知道的是如何使用交互式存储/读取两个单独的值。

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T23:34:20.333

`C-h``f` `interactive` `RET`：

> 要获取多个参数，请连接各个字符串，并用换行符分隔它们。

所以我们有：

```
(defun rectangle_Area(w l)
    "Compute the area of a rectangle, given its width and length  interactively."
    (interactive "nWidth: \nnLength: ")
    (setq area (rectangleArea w l))      
    (message "The rectangle's area is %f." area)) 
```

# database - 数据库表中的智能显示顺序

> ID：14449052
> 
> 赞同：0
> 
> 时间：2013-01-21T23:26:56.187
> 
> 标签：database, algorithm

我们数据库中的许多表都使用字段“display_order”来决定屏幕上记录的顺序。我们在这个字段中使用 int。一开始，当我们插入记录时，我们会在它们之间留下一些间隙，例如，第一条记录我们给 display_order = 0，第二条记录 display_order = 1000。这样我们在第一和第二条记录之间就有了一些间隙。因此，如果我们想在这两者之间插入一条新记录，我们可以给出 display_order = 500。

这种方法有一个限制，即当您用完 2 个相邻记录之间的间隙时，您必须开始更新许多记录的 display_order 以产生一些间隙。

我曾考虑过为此使用浮点数或仅使用字符串，但不确定这会损害比较性能。

根据您的经验，您对此有何看法？

干杯，埃尔顿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T02:01:24.100

浮点不应该对性能产生任何影响，它是迄今为止最简单的解决方案：只使用周围值的平均值。在病态的情况下，您可能会用完除法的位数，因此您需要确保平均值与两个周围的值不同，如果结果相同，则需要重新编号。但这不应该经常发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T00:56:05.840

将显示顺序乘以 2 或 3 怎么样？这保留了原始顺序并在项目之间引入了更多空间。将其作为更新查询运行也很容易。

# php - arsort 工作正常，但什么不能？

> ID：14449054
> 
> 赞同：-1
> 
> 时间：2013-01-21T23:27:02.093
> 
> 标签：php, arrays, sorting

调用`die(var_dump($dias));`返回：

```
array (size=2)
  1 => 
    array (size=5)
      0 => float 0.079
      1 => float 0.103
      2 => float 0.128
      3 => float 0.093
      4 => float 0.084
  2 => 
    array (size=5)
      0 => float 0.082
      1 => float 0.083
      2 => float 0.094
      3 => float 0.071
      4 => float 0.094 
```

有或没有`foreach($dias as $k => $v) arsort($dias[$k]);`它返回相同的东西。

如何在不丢失键引用的情况下重新排序数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T23:30:55.900

要在 foreach 中修改 php 数组的值，您必须在您前面`$v`加上一个 & 符号 a la `foreach($dias as $k => &$v)`。然后使用`artsort($v)`对子数组进行排序；否则，您正在修改 foreach 执行后不存在的值的副本。有关更多信息，请参阅[foreach 手册](http://php.net/manual/en/control-structures.foreach.php)。

# algorithm - 排名比较算法

> ID：14449065
> 
> 赞同：1
> 
> 时间：2013-01-21T23:27:50.487
> 
> 标签：algorithm, sorting, ranking

我正在尝试为图像比较程序设计一种算法，该算法将按顺序排列图像。

例如，假设我们有 5 张图片 - ABCDE

```
A > B
C > B
B > D
E > D 
```

所以顺序是 ACBED - 但是，A 和 C 没有被比较。我希望创建的程序将使用 800 多个图像。对于允许所有图像以尽可能少的票数相互比较的算法有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T23:34:57.390

[拓扑排序](http://en.wikipedia.org/wiki/Topological_sort)将找到与给定偏序一致的元素排序，这就是您所拥有的。

# html - URL 内容是否会混淆 CSS 布局？

> ID：14449069
> 
> 赞同：1
> 
> 时间：2013-01-21T23:28:06.040
> 
> 标签：html, css

我有表格布局，其中出现了变量内容。
当我使用 FireFox 时，它看起来不错。
但是对于 Safari，当内容中包含 url 时，宽度会变得混乱。

有没有办法解决这个问题？

演示[http://jsfiddle.net/wyMjQ/](http://jsfiddle.net/wyMjQ/)

**使用 Safari，它会像这样搞砸**

```
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
age     18
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
gen     male
der     
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
bod     http://www.youtube.com/wa
y       tch?v=dA8O32jE
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
tag     tag1 tag2 tag3
s 
```

**应该是这样的**

```
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
age      18
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
gender   male
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
body     http://www.youtube.com/wa
         tch?v=dA8O32jE
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
tags     tag1 tag2 tag3 
```

**HTML**

```
 <div class="introduction">
  <table>
    <tr>
      <th>age</th>
      <td class="border">18</td>
    </tr>
    <tr>
      <th>gender</th>
      <td class="border">male</td>
    </tr>
    <tr>
      <th class="body">body</th>
      <td>http://www.youtube.com/watch?v=dA8O32jE</td>
    </tr>
    <tr>
      <th class="tag">tags</th>
      <td class="border">
      </td>
    </tr>
  </table>            
  </div> 
```

**CSS**

```
div.introduction{
    text-align:left;
    margin:5px 8px;
    overflow: hidden;
    padding-top: 10px;
    padding-bottom: 5px;
    padding-left: 0px;
    padding-right: 5px;
    border-spacing: 0px;
}

table th {
    width: 100px;
    padding-left: 9px;
    color: rgb(0, 0, 0);
    font-size: 83.3%;
    letter-spacing: 2px;
    vertical-align:top;
    border-top: 1px dashed rgb(191, 191, 186);
    border-bottom: 1px dashed rgb(191, 191, 186);
}

table th.body {
    height: 80px;
}

table th.tag {
    height: 80px;
}

table td {
    width: 140px;
    padding-left: 9px;
    font-size: 83.3%;
    letter-spacing: 2px;
    vertical-align:top;
}

td.border{
    border-top: 1px dashed rgb(191, 191, 186);
    border-bottom: 1px dashed rgb(191, 191, 186);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T23:32:39.587

你的宽度`100px`太小了。让它变大。喜欢`200px`。也尝试使用**空格：nowrap;** 在你的 CSS 中。

```
table th {
    width: 200px;
    white-space:nowrap;
} 
```

# ajax - 他们是怎么做到的，ajax，json

> ID：14449070
> 
> 赞同：0
> 
> 时间：2013-01-21T23:28:07.177
> 
> 标签：ajax

我的任务是向[与 flickr 上的此屏幕类似](http://www.flickr.com/photos/roblawton/3847668339/in/photostream/)的站点添加一些功能。

有谁知道他们如何做右边的照片流。图像不在 javascript、json 中或没有 ajax 请求。

如果有人知道他们是如何做到这一点的，那将非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T23:34:49.603

滚动时执行 AJAX 请求。

在浏览器中打开控制台并查看网络选项卡。它将显示一个类似于此的[链接：](http://www.flickr.com/services/rest/?format=json&clientType=yui-3-flickrapi-module&api_key=8800e2eb03db7fb99992039f14061dcf&auth_hash=e65c85db55a2671d8d5968171150c516&auth_token=&secret=9978895fa92da630&photo_id=3396195710&num_prev=4&num_next=0&order_by=&extras=url_sq,url_q,url_t,url_s,url_m,url_z,url_c,url_l,url_o,video_size,owner_name,path_alias,icon_server,needs_interstitial,count_comments,count_faves,url_h,url_k&method=flickr.photos.getContext&jsoncallback=YUI.flickrAPITransactions.flapicb23&cachebust=1358811052893)

```
http://www.flickr.com/services/rest/?format=json&clientType=yui-3-flickrapi-module&api_key=8800e2eb03db7fb99992039f14061dcf&auth_hash=e65c85db55a2671d8d5968171150c516&auth_token=&secret=9978895fa92da630&photo_id=3396195710&num_prev=4&num_next=0&order_by=&extras=url_sq%2Curl_q%2Curl_t%2Curl_s%2Curl_m%2Curl_z%2Curl_c%2Curl_l%2Curl_o%2Cvideo_size%2Cowner_name%2Cpath_alias%2Cicon_server%2Cneeds_interstitial%2Ccount_comments%2Ccount_faves%2Curl_h%2Curl_k&method=flickr.photos.getContext&jsoncallback=YUI.flickrAPITransactions.flapicb23&cachebust=1358811052893 
```

这是返回 JSON 数据的宁静链接。此 JSON 数据包含每张照片的缩略图的 url，以及其他信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T23:57:43.750

第一个当您滚动右侧的缩略图时有ajax请求。而且我认为他们使用流中的最后一张照片 ID、数据库或 prev 中的下一张图片以及上传图片的用户以及其他参数...在base64中，图片的url和数据库中的下一张图片ID..

例子

```
$("#photostream > .scroll").click(function(){
    leftOrRight = $(this).attr("id"); // Assume that there is two buttons to get next or previous img with id #next and #prev
    $.ajax({
        type: "GET",
        url: urlOfTheScriptFileThatWillProvideYouData.php, //aspx, jsp ...
        dataType: "json",
        data: "userId, photoId, leftOrRight",
    success: function(yourJson) {
        //... Do something with your data and append it in the slider etc..;

    },
    error: function (xhr, textStatus, errorThrown) {
        $("#error").html(xhr.responseText);
    }
})
}) 
```

看网址

`http://www.flickr.com/photos/roblawton/3847619643/in/photostream/`

`http://www.flickr.com/photos/USER-ID/PHOTO-ID/in/photostream/`

# apache - 使用 godaddy 安装 ssl 证书

> ID：14449071
> 
> 赞同：7
> 
> 时间：2013-01-21T23:28:24.947
> 
> 标签：apache, ssl, installation, dedicated

所以根据： http: [//support.godaddy.com/help/article/5238/installing-an-ssl-certificate-in-apache](http://support.godaddy.com/help/article/5238/installing-an-ssl-certificate-in-apache)

在 ssl.cof 中为 Apache 2.x 编辑以下行：

SSLCertificateChainFile /path/to/intermediate/bundle/file

好吧，我在一个 zip 文件中收到了 gd_bundle.crt 和我的域证书。但是，嘿，哪个是中间/捆绑/文件 - 它可能是 gd_bundle.crt 还是他们存储库中的任何人：

[https://certs.godaddy.com/anonymous/repository.seam](https://certs.godaddy.com/anonymous/repository.seam)

因为我已经用 gd_bundle.crt 填充了一行，所以我猜它是另一个文件，但是该存储库链接中的哪一个？

谢谢你。

```
#   Certificate Authority (CA):
#   Set the CA certificate verification path where to find CA
#   certificates for client authentication or alternatively one
#   huge file containing all of them (file must be PEM encoded)
SSLCACertificateFile /etc/httpd/conf/gd_bundle.crt 
```

这是要配置的四行，其中两行肯定可以，但另外两行我不知道，特别是 gd_bundle.crt 去哪里以及我缺少的证书是哪个证书没有出现在 zip 中文件并带我一路到达存储库链接，我不知道在哪个文件上决定下载应用程序。

```
SSLCertificateFile /etc/httpd/conf/subgram.com.crt

SSLCertificateKeyFile /etc/httpd/conf/server.key

SSLCertificateChainFile /etc/pki/tls/certs/server-chain.crt

SSLCACertificateFile /etc/httpd/conf/gd_bundle.crt 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T00:05:51.430

我会回答你的问题，但我想先向你指出一个方向，以帮助你在未来获得更好的帮助。

首先，您的问题没有引起太多关注是有原因的。它以一种不会从大门得到答案的方式被问到。1) 这更多是关于 serverfault 的问题，因为它与 Web 服务器管理有关，而不是编程。2）你没有在标题中提到apache。3）你提到了一个特定的公司，Godaddy，比如“在 Apache 2.x 中安装 SSL 证书”可能会更好，然后提到你的 CA 如何颁发证书的细节。这是一个非常常见的问题，并且可能存在一些现有的线程，很明显您在提问之前没有阅读过这些线程。这超出了您的单个问题，但将帮助您更好地回答您将来遇到的每一个问题。请参阅[http://www.catb.org/esr/faqs/smart-questions。](http://www.catb.org/esr/faqs/smart-questions.html)

这可能是阅读有关 SSL 证书如何工作以及它们在 Apache 中如何配置的一些文档的绝佳机会。

> 因为我已经用 gd_bundle.crt 填充了一行，所以我猜它是另一个文件，但是该存储库链接中的哪一个？

它们都不是，该链接仅包含证书链和根证书。

IBM 没有尝试描述证书链文件是什么，而是做得比我好得多。这是了解如何解决问题的第一步：

> [证书链如何工作](http://publib.boulder.ibm.com/infocenter/wmqv6/v6r0/index.jsp?topic=/com.ibm.mq.csqzas.doc/sy10600_.htm)
> 
> 当您收到另一个实体的证书时，您可能需要使用证书链来获取根 CA 证书。证书链，也称为证书路径，是用于对实体进行身份验证的证书列表。链或路径以该实体的证书开始，链中的每个证书都由链中下一个证书标识的实体签名。该链以根 CA 证书终止。根 CA 证书始终由 CA 本身签名。必须验证链中所有证书的签名，直到达到根 CA 证书。

这基本上意味着，您需要证书链文件才能正确验证您的证书。.crt 文件表示它在一个文件中包含公共、私有和根证书文件，或者它们的某种组合。

第2步

.pem 文件通常意味着只有一个公共证书，这是您将用于 SSLCertificateFile 的文件。仅当其中包含多个证书时，使用 .crt 命名此文件才是规范正确的，如果您从 CA 获得证书，则很可能没有。你提到你从 Godaddy 收到了一些文件，其中一个就是这个文件。

步骤#3

SSLCertificateKeyFile 将是一个私钥文件，在证书颁发之后/期间提供。Godaddy的流程我说不清楚，我只能描述流程的基本原理，每个CA在颁发证书的方式上都不一样。不要忘记在这个证书上设置适当的权限（实际上我认为如果这个文件没有设置为 600 权限，Apache 将无法启动）。

这应该为您提供足够的信息以继续启动和运行。任何其他涉及导航 Godaddy 的 SSL 颁发过程的问题都比 StackOverflow / ServerFault 更需要 Godaddy 支持。

祝你好运。

# vim - 使用 = 时，如何将光标留在 'equalprg' 输出的 *end* 处？

> ID：14449076
> 
> 赞同：2
> 
> 时间：2013-01-21T23:29:04.273
> 
> 标签：vim

当使用`=`重新缩进某些文本时，让光标结束在过滤输出的末尾而不是开头的好方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T13:46:42.180

之后可以使用[`']`](http://vimdoc.sourceforge.net/htmldoc/motion.html#%27%5d)跳转到最后。`=`是[`operator`](http://vimdoc.sourceforge.net/htmldoc/motion.html#operator)，因此会自动设置`[`和`]`标记，表示使用运算符的区域的开始和结束。

# c# - 如何创建新的 gridview 列类型

> ID：14449082
> 
> 赞同：1
> 
> 时间：2013-01-21T23:29:35.960
> 
> 标签：c#, asp.net, .net, custom-controls

我正在为我的 ASP.NET APP 创建一个自定义 gridview 控件，并且我希望它创建一个新的自定义列类型以执行以下操作：

（这就是现在创建列的样子）

```
<asp:TemplateField>
<HeaderTemplate>
    <asp:LinkButton Text="R. Name" ToolTip="Resource Name" CommandName="Sort" CommandArgument="ResourceName"
        runat="server" />
    <uc:GridViewFilter ID="ucGridViewFilterResourceName" ColumnName="ResourceName" AssociatedControlType="TextBoxString"
        OnFilterApplied="ucGridViewFilter_FilterApplied" runat="server" />
</HeaderTemplate>
<ItemTemplate>
    <%# Eval("ResourceName") %>
</ItemTemplate> 
```

我想要这样的东西：

```
<asp:GridViewExColumn HeaderTitle="R. Name" HeaderToolTip="Resource Name" ColumnName="ResourceName" SearchType="TextBoxString" OnFilterApplied="ucGridViewFilter_FilterApplied" Text='<%# Eval("ResourceName") %>' /> 
```

任何人都可以在隧道的尽头显示一些光？我完全迷失了，我可以成功地创建我的自定义网格视图，但不知道从哪里开始使用这种自定义列类型。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:28:16.700

我终于找到了做我正在寻找的事情的方法，我会为你提供我的发现，也许你甚至可以让它变得更好。

我创建了一个新的 .cs 扩展控件 DataControlField ，如下所示：

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Web.UI;
using System.Web.UI.WebControls;
using VMPortal.Tools;

public class GridViewExColumn : DataControlField
{
    public string HeaderToolTip { get; set; }
    public string GridViewID { get; set; }
    public string SearchType { get; set; }
    public string DataField
    {
        get
        {
            object value = ViewState["DataField"];

            if (value != null)
                return value.ToString();

            return string.Empty;
        }

        set
        {
            ViewState["DataField"] = value;
            OnFieldChanged();
        }
    }

    protected override DataControlField CreateField()
    {
        return new BoundField();
    }

    public override void InitializeCell(DataControlFieldCell cell, DataControlCellType cellType, DataControlRowState rowState, int rowIndex)
    {
        base.InitializeCell(cell, cellType, rowState, rowIndex);

        if (cellType == DataControlCellType.Header)
        {
            var lb = new LinkButton
            {
                Text = HeaderText,
                ToolTip = String.IsNullOrWhiteSpace(HeaderToolTip) ? HeaderText : HeaderToolTip,
                CommandName = "Sort",
                CommandArgument = DataField
            };

            var tt = cell.Controls;
            cell.Controls.Add(lb);

            if (!String.IsNullOrWhiteSpace(SearchType))
            {
                // Add filter control
                var ctrlFilter = Control.Page.LoadControl("~/Controls/GridViewFilter.ascx") as GridViewFilter;
                cell.Controls.Add(ctrlFilter);
                ctrlFilter.ID = GridViewID + DataField;
                ctrlFilter.ColumnName = DataField;
                ctrlFilter.AssociatedControlType = SearchType;
                ctrlFilter.FilterApplied += ctrlFilter_FilterApplied;
            }
        }
        else if (cellType == DataControlCellType.DataCell)
            cell.DataBinding += new EventHandler(cell_DataBinding);
    }

    protected void cell_DataBinding(object sender, EventArgs e)
    {
        var cell = (TableCell)sender;
        var dataItem = DataBinder.GetDataItem(cell.NamingContainer);
        var dataValue = DataBinder.GetPropertyValue(dataItem, DataField);
        string value = dataValue != null ? dataValue.ToString() : "";
        cell.Text = value;
    }

    protected void ctrlFilter_FilterApplied(object sender, EventArgs e)
    {
        var filterExpression = sender as FilterExpression;
        if (filterExpression != null)
        {
            if (FilterApplied != null)
                FilterApplied(null, EventArgs.Empty);
        }
    } 
```

现在我可以添加一个新列，如下所示

```
 <uc:GridViewExColumn HeaderText="R. Name" HeaderToolTip="Resource Name" DataField="ResourceName" SearchType="TextBoxString" GridViewID="ucGridViewEx" OnFilterApplied="ucGridViewFilter_FilterApplied" /> 
```

希望它可以帮助别人。

# ios - Monotouch.Dialog - 如何从元素推送视图

> ID：14449092
> 
> 赞同：0
> 
> 时间：2013-01-21T23:30:39.843
> 
> 标签：ios, xamarin.ios, monotouch.dialog

看起来这应该很容易，但我错过了一些东西。我有一个自定义元素：

```
public class PostSummaryElement:StyledMultilineElement,IElementSizing 
```

单击元素的附件时，我想将视图推送到堆栈上。即是这样的：

```
this.AccessoryTapped += () => {
    Console.WriteLine ("Tapped");
    if (MyParent != null) {
    MyParent.PresentViewController(new MyDemoController("Details"),false,null);
            }
}; 
```

MyDemoController 的 gui 是使用 monotouch.dialog 创建的。

我只是试图将 gui 分解为 Views 和 Controlls，其中控件可以将视图推送到堆栈上，等待发生某些事情，然后用户导航回包含该控件的上一个视图。

任何想法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T07:39:25.173

我建议您不要在 AccessoryTapped 方法中对行为进行硬编码，因为您希望在项目的另一个地方使用该组件的日子非常接近。并且可能在最近的将来您将需要一些其他行为，或者例如它将是另一个根本没有 MyDemoController 的项目。
所以我建议你创建以下属性：

```
public Action accessoryTapped; 
```

在您的元素及其视图中，然后修改您的 AccessoryTapped 是这样的：

```
this.AccessoryTapped += () => {
    Console.WriteLine ("Tapped");
    if (accessoryTapped != null) {
        accessoryTapped();
    }
}; 
```

因此，您需要通过以下方式创建 PostSummaryElement 对象：

```
var myElement = new PostSummaryElement() {
  accessoryTapped = someFunction,
}
...
void someFunction()
{
    NavigationController.PushViewController (new MyDemoController("Details"), true);
} 
```

# c - ANSI C 编译器可以删除延迟循环吗？

> ID：14449098
> 
> 赞同：6
> 
> 时间：2013-01-21T23:31:02.743
> 
> 标签：c, optimization, standards, c89

考虑 ANSI C 中的一个 while 循环，其唯一目的是延迟执行：

```
unsigned long counter = DELAY_COUNT;
while(counter--); 
```

我已经看到这在嵌入式系统上被大量使用来强制延迟，例如。没有`sleep`功能，定时器或中断是有限的。

我对 ANSI C 标准的解读是，这可以通过符合标准的编译器完全删除。**它没有5.1.2.3**中描述的副作用：

> 访问 volatile 对象、修改对象、修改文件或调用执行任何这些操作的函数都是副作用，它们是执行环境状态的变化。

...这部分还说：

> 如果一个实际的实现可以推断出它的值没有被使用并且没有产生所需的副作用（包括调用函数或访问易失性对象引起的任何副作用），则它不需要评估表达式的一部分。

这是否意味着可以优化循环？即使`counter`是`volatile`？

笔记：

1.  这与允许编译器消除无限循环不完全相同[吗？](https://stackoverflow.com/questions/2178115/are-compilers-allowed-to-eliminate-infinite-loops)，因为这指的是*无限*循环，并且关于何时允许程序终止的问题出现了。在这种情况下，程序肯定会在某个时候越过这条线，无论是否优化。
2.  我知道 GCC 做了什么（删除循环 for`-O1`或更高，除非`counter`is `volatile`），但我想知道标准规定了什么。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-21T23:35:36.243

C 标准合规性遵循“as-if”规则，编译器可以根据该规则生成任何行为“好像”它在抽象机器上运行您的实际指令的代码。由于不执行任何操作具有与执行循环“好像”相同的可观察行为，因此完全允许不为其生成代码。

换句话说，在真实机器上进行计算所花费的时间不是程序“可观察”行为的一部分，它只是特定实现的一种现象。

变量的情况有所不同`volatile`，因为访问 volatile 算作“可观察”的效果。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-21T23:34:49.910

> 这是否意味着可以优化循环？

是的。

> 即使计数器不稳定？

不，它会读取和写入具有可观察行为的 volatile 变量，因此它必须发生。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T23:35:31.203

如果计数器为`volatile`，则编译器无法合法地优化延迟循环。否则可以。

像这样的延迟循环很糟糕，因为它们燃烧的时间取决于编译器如何为它们生成代码。使用不同的优化选项，您可以实现不同的延迟，这几乎不是延迟循环想要的。

出于这个原因，这种延迟循环应该用汇编语言实现，程序员可以完全控制代码。这通常适用于具有简单 CPU 的嵌入式系统。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T23:36:44.447

标准规定了您所看到的行为。如果您为您创建一个依赖关系树，`DELAY_COUNT`您会看到它有一个 modify without use 属性，这意味着它可以被消除。这是参考非易失性案例。在 volatile 情况下，编译器无法使用依赖树来尝试删除此变量，因此延迟仍然存在（因为 volatile 意味着硬件可以更改内存映射值，或者在某些情况下意味着“我真的需要这个不要扔它away”）如果您正在查看是否标记为 volatile，它会告诉编译器，请不要把它扔掉它在这里是有原因的。

# sql - SQL 在 Oracle 的集合运算符中使用 to_char(null)、to_number(null) 等

> ID：14449104
> 
> 赞同：0
> 
> 时间：2013-01-21T23:31:56.647
> 
> 标签：sql, oracle, intersect, to-char, set-operations

我是第一次进入 SQL 世界的学生，我找不到任何关于如何使用 to_somedatatype(null) 替换 UNION、INTERSECT 等中缺失列的清晰易懂的文档。我正在使用 HR为我的前几个项目内置了 Oracle 数据库的架构，并且以下查询有效（我得到了一个只有那些有家属的员工的employee_id 编号列表）：

```
SELECT employee_id "Employees with Dependents"
FROM employees
INTERSECT
SELECT relative_id
FROM dependents; 
```

但是，一旦我想包含员工的姓名和受抚养人的出生日期，我就被卡住了。此变体执行无错误搜索但不产生任何结果（输出“未选择行”）：

```
SELECT e.employee_id "Employees with Dependents",
  e.first_name,
  e.last_name,
  to_date(NULL) "Dependent Birthdate"
FROM employees e
INTERSECT
SELECT d.relative_id,
  TO_CHAR(NULL),
  TO_CHAR(NULL),
  d.birthdate
FROM dependents d; 
```

将 to_date 替换为 to_number 或只是纯 null 和 to_char 替换为 to_varchar2 或 null 的几种变体无法生成任何行。

我想要为每个受抚养人制作一行，其中显示监护人的雇员编号、名字、姓氏和受抚养人的出生日期。我相信我的问题是这些空占位符的使用，以及对集合运算符的一般理解有限。（我的理解是，当我使用像 to_date(null) 这样的空占位符时，它不会包含在比较中，因为没有什么可以比较的。）

有人可以向我解释如何正确使用这些占位符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-09T07:55:56.493

当一个或另一个表中不存在列时，您必须匹配数据类型（使用 TO_CHAR 函数或任何其他转换函数）。例如：

SELECT location_id, department_name "部门", TO_CHAR(NULL) "仓库位置" FROM部门 UNION SELECT location_id, TO_CHAR(NULL) "部门", state_province FROM位置；

让你与你的场景联系起来

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T23:35:11.917

您的查询不起作用的原因是相应字段中没有 NULL 值。您正在使用`INTERSECT`. 实际上，您想将表格连接在一起，例如：

```
SELECT e.employee_id "Employees with Dependents",
  e.first_name,
  e.last_name,
  d.birthdate "Dependent Birthdate"
FROM employees e join
     dependents d
     on d.relative_id = e.employee_id 
```

# php - 来自 SWF 的 POST 请求中未发送 Cookie 值

> ID：14449106
> 
> 赞同：1
> 
> 时间：2013-01-21T23:32:04.227
> 
> 标签：php, cookies, flash

我有一个 SWF 文件，它允许用户在我的网站上上传文件。该 SWF 向我的服务器上发送一个 POST 请求`upload.php`，从而上传文件。

但在此之前，在 upload.php 中，我想确保执行此操作的人是`signed in`. 目前，我检查了`SID cookie value`请求标头中发送的内容，并根据我的数据库中的 SID 值检查了一个条目（我将会话存储在数据库中）。我工作得很好`chrome`但失败了，`firefox`因为当 SWF 生成请求时它不发送任何 cookie 标头。

我该怎么办。感谢帮助。

在 Chrome 中发送的标头

```
Content-Length: 355894
Origin: http://localhost 
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.52
Content-Type: multipart/form-data; boundary=----------ei4Ij5ae0ae0ei4Ef1Ef1KM7GI3Ef1 
Accept: */* 
Referer: http://localhost/home Accept-Encoding: gzip,deflate,sdch Accept-Language: en-US,en;q=0.8 
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
Cookie: PHPSSID = 238e320eewbjdbew923e092ejhwbjhwebd 
```

在 FireFox 中发送的标头

```
Accept: text/* 
Content-Type: multipart/form-data; boundary=----------GI3Ef1Ef1ae0GI3cH2Ef1Ef1cH2KM7 
User-Agent: Shockwave Flash 
Host: localhost 
Content-Length: 355894 
Connection: Keep-Alive 
Cache-Control: no-cache 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:40:55.973

这是 Chrome 的一个功能，但不是 FireFox 的一个错误。上传 SWF 必须明确发送浏览器 cookie。查看从 3.0 版开始的 FancyUpload。

另请注意，如果 User-Agent 标头不等于浏览器，则带有 suhosin 的 PHP 可以删除会话变量。这称为“会话固定”。所以上传 SWF 也必须在请求期间向浏览器发送用户代理（或者只是禁用 suhosin 补丁）。

# c# - 带有 SIMD 指令和 c# 集成的汇编器的编译器

> ID：14449109
> 
> 赞同：-3
> 
> 时间：2013-01-21T23:32:39.530
> 
> 标签：c#, dll, assembly

我需要一个可以生成（SSE 等）操作码的汇编器编译器`SIMD`，它还应该可以生成可以在 C#（Visual Studio 2010）中轻松使用的 .DLLs 库。或者，如果可能的话，我可以使用带有汇编功能的 Delphi/C++ 编译器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:55:37.263

老实说，我不知道这是否是您的问题，但我可以确认 Delphi 的内置汇编器 - 就像 Visual Studio 中的 C++ 编译器* - 支持 SIMD 指令（不同版本的 SIMD 指令集，根据编译器版本）。是的，它们都可以用来制作 DLL。

（* NB：内联汇编仅适用于 VC++ 中的 32 位平台；Delphi 支持 32 位和 64 位的内联汇编）

# python - Python：在linux下写入另一个进程的内存

> ID：14449114
> 
> 赞同：6
> 
> 时间：2013-01-21T23:33:06.560
> 
> 标签：python, linux, address-space

如何在 Ubuntu Linux 下使用 python 写入另一个进程的地址空间？我的尝试：

1) 使用虚拟文件 /proc/$PID/mem 并寻找地址。我已成功使用它来读取内存，但尝试写入会导致 IOError：

```
fd=open("/proc/"+pid+"/mem","r+")
fd.seek(address,0)
fd.write("ABC") 
```

输出：

```
IOError: [Errno 22] Invalid argument 
```

2) 尝试按照其他线程中的建议使用 python-ptrace 库。但是，我找不到好的文档或示例代码。

注意：这不是权限问题，以 root 身份运行会产生相同的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T17:48:32.640

在这里找到了解决方案：http: [//tito.googlecode.com/svn-history/r2/trunk/draft/fakefs.py](http://tito.googlecode.com/svn-history/r2/trunk/draft/fakefs.py)

它使用 ctypes 包来加载 libc，然后使用带有 POKEDATA 选项的 libc.ptrace 来写入字节。

# php - PHP + Ajax 登录

> ID：14449118
> 
> 赞同：9
> 
> 时间：2013-01-21T23:33:45.377
> 
> 标签：php, jquery, ajax

只是在通过 ajax 提交登录表单时遇到了一些问题，我主要是一名 PHP 开发人员，我不经常在 PHP 中使用 Jquery + Ajax。

目前，如果我在提交表单后检查 firebug POST 数据，它似乎确实获得了已添加到表单中的用户名和密码，但是无论是否添加了错误的用户名和密码，或者是否添加了错误的用户名和密码，页面都会重新加载它们是正确的，并且没有创建会话。

这是表格：

```
 <form id="loginform" method="post">
    Username: <input type="text" name="username" id="username" value="">

    Password: <input type="password" name="password" id="password" value="">

    <input type="submit" name="loginsub" id="loginsub" value="Login">
    </form> 
```

这是 Ajax/Jquery：

```
 <script type="text/javascript">
    $(document).ready(function() {

    $('#loginform').submit(function() {

    $.ajax({
        type: "POST",
        url: '/class/login.php',
        data: {
            username: $("#username").val(),
            password: $("#password").val()
        },
        success: function(data)
        {
            if (data === 'Login') {
                window.location.replace('/user-page.php');
            }
            else {
                alert('Invalid Credentials');
            }
        }
    });

});

});
</script> 
```

这是PHP：

```
 class Users {
 public $username = null;
 public $password = null;

 public function __construct( $data = array() ) {
     if( isset( $data['username'] ) ) $this->username = stripslashes(        strip_tags( $data['username'] ) );
     if( isset( $data['password'] ) ) $this->password = stripslashes( strip_tags( $data['password'] ) );
 }

 public function storeFormValues( $params ) {
    $this->__construct( $params ); 
 }

 public function Login() {
     $success = false;
     try{
        $con = new PDO( DB_DSN, DB_USERNAME, DB_PASSWORD ); 
        $con->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
        $sql = "SELECT * FROM users WHERE username = :username AND password = :password LIMIT 1";
                    $user = username;

        $stmt = $con->prepare( $sql );
        $stmt->bindValue( "username", $this->username, PDO::PARAM_STR );
        $stmt->bindValue( "password", md5($this->password), PDO::PARAM_STR );
        $stmt->execute();

        $valid = $stmt->fetchColumn();

        if( $valid ) {
        $success = true;
                    session_start();

        session_regenerate_id();
        $_SESSION['user'] = $user['user'];
        session_write_close();
        echo ('Login');
        exit();

        }

        $con = null;
        return $success;
        }catch (PDOException $e) {
        echo $e->getMessage();
        return $success;
     }

 } 
```

我想它不起作用，因为我没有调用类和函数，但我不确定如何成功地这样做。我尝试在两者之间创建一个控制器页面，该页面将启动 php 类和函数，但无济于事。

只是为了编辑，如果我删除 ajax 并通过登录表单操作调用 php 页面，登录确实可以正常工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-21T23:45:32.060

整个问题在 jquery 中使用这个代替

```
$(document).ready(function() {
  $('#loginform').submit(function(e) {
    e.preventDefault();
    $.ajax({
       type: "POST",
       url: '/class/login.php',
       data: $(this).serialize(),
       success: function(data)
       {
          if (data === 'Login') {
            window.location = '/user-page.php';
          }
          else {
            alert('Invalid Credentials');
          }
       }
   });
 });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T23:40:35.380

```
 $user = new User(array("username" => $_POST['username'], "password" => $_POST['password']));
 $user->Login(); 
```

将上面的代码放入 login.php 控制器文件（包括您的用户类）。或者编写一个处理请求的通用控制器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-23T16:42:07.483

```
$(document).ready(function(){

 $("#submit").click(function(){
    var email = $("#email").val();
    var password = $("#password").val();

 if(email.length == "" || password.length == ""){
    $("#message").html("please fill out this field first").fadeIn();
    $("#message").addClass("error");
     return false;
}else{
    $.ajax({
      type : 'POST',
      url  : 'redirect.php',
      data : {email:email,password:password},
      success : function(feedback){
         $("#text").html(feedback);
       }
      });
   }
});

$(".email_error_text").hide();
$(".password_error_text").hide();

var error_email = false;
var error_password = false;

$("#email").focusout(function(){
  check_email();
});
$("#password").focusout(function(){
  check_password();
});

function check_email(){
    $("#message").hide();
var pattern = new RegExp(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/);
if(pattern.test($("#email").val())){
     $(".email_error_text").hide();
  }else{
     $(".email_error_text").html("Invalid email address");
     $(".email_error_text").show().addClass("error");
     error_email = true;
  }
}

function check_password(){
    $("#message").hide();
var password_length = $("#password").val().length;
if(password_length < 8 ){
     $(".password_error_text").html("Should be at least 8 characters");
     $(".password_error_text").show().addClass("error");
     error_password = true;
  }else{
     $(".password_error_text").hide();
  }
} 
```

});

我会推荐你​​去这里阅读这篇文章[使用 ajax 和 php 登录](https://laramust.com/post/php-login-using-ajax-mysqli.html)

# ios - 分数 CGPoint 与核心图形的影响？

> ID：14449126
> 
> 赞同：2
> 
> 时间：2013-01-21T23:34:38.650
> 
> 标签：ios, core-graphics, cgpoint

我正在做一些相对于缩放图像的绘图，所以我最终得到了分数 CGPoints。我正在缩放 CoreImage 人脸检测例程的结果。

`CGPathAddLineToPoint`当我在通话中使用这些点时，我是想自己四舍五入还是留给 iOS 来做？如果舍入更好，我应该向上舍入还是向下舍入？

我已经阅读了有关像素边界等的信息，但我不确定如何在这里应用它。我正在画一个`CALayer`

```
CGPoint leftEye = CGPointMake((leftEyePosition.x * xScale), 
                              (leftEyePosition.y * yScale)); 
```

// 结果

```
features {
    faceRect = "{{92, 144.469}, {166.667, 179.688}}";
    hasLeftEyePosition = 1;
    hasMouthPosition = 1;
    hasRightEyePosition = 1;
    leftEyePosition = "{142.667, 268.812}";
    mouthPosition = "{176, 189.75}";
    rightEyePosition = "{207.333, 269.531}";
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-21T23:53:10.023

你是否圆了，朝什么方向，取决于你想要达到的效果。

CoreGraphics 本身对分数坐标绝对没有问题。但是，使用分数坐标绘制任何东西最终都会对绘制的对象进行抗锯齿处理。这通常会使它们看起来很模糊。适当地舍入坐标是避免这种情况的好主意。

但是请注意。根据您绘制的内容和方式，您可能需要 0.5 像素的坐标而不是积分坐标。例如，如果您正在绘制一条线，则该线将以您提供的坐标为中心。因此，在积分坐标上绘制的 1 像素线实际上最终会成为 2 像素宽的模糊线（每个像素占线的一半）。要记住的最简单的事情是笔触以坐标为中心，但填充以它们为界。所以在填充矩形时，最好使用积分坐标。描边矩形时，将坐标插入 0.5 个像素（或者，更确切地说，插入要使用的描边宽度的一半）。

Also, don't forget that when drawing an image that's meant to be displayed on a retina screen with scale=2, coordinates that are 0.5 units off are actually still on pixel boundaries. So if you know it's retina, you can avoid rounding to fully integral coordinates when the nearest half-unit coordinate is fine.

# c# - Entity Framework Code First 可选的一对一关系，没有反向导航属性

> ID：14449135
> 
> 赞同：1
> 
> 时间：2013-01-21T23:35:28.880
> 
> 标签：c#, ef-code-first, entity-framework-5

我正在尝试对我认为非常基本的场景进行建模，但我无法理解在 EF Code First 5 中定义它的正确方法。

我有三个班级：

员工邮寄地址 联系电话

规则如下：

*   邮政地址可以是独立的
*   联系电话号码可以是独立的
*   可选地，员工可以有一个“家庭”邮政地址
*   员工可以有零个或多个联系电话号码

如果我在 SQL 中对此进行建模，我最终会得到四个表；

*   邮寄地址
*   联系电话号码
*   员工
*   EmployeeContactTelephoneNumber（桥接表）

通过查看 SO 上的答案，我可以在 Code First 中生成类似于我的 SQL 模型的内容，但我必须在 PostalAddress 上拥有一个员工导航属性，在 ContactTelephoneNumber 上拥有一个员工导航属性。这违反了我的业务规则，因为 PostalAddress 和 ContactTelephoneNumber 都不会始终被称为员工。例如，我可以稍后添加一个 Premises 类，该类也有一个 PostalAddress。

通过代码示例，我现在拥有的类似于以下内容：

```
public class Employee
{
    public int EmployeeID {get;set;}
    public virtual PostalAddress? HomeAddress {get;set;}
}

public class PostalAddress
{
    public int PostalAddressID {get;set;}
    public string Address {get;set;} // It's not actually a string - this is for brevity!
}

public class ContactTelephoneNumber
{
    public int ContactTelephoneNumberID {get;set;}
    public string TelephoneNumber {get;set;} // It's not actually a string - this is for brevity!
} 
```

我正在尝试使用 Fluent API 而不是 Annotations 来定义我的关系，以确保我的表示层在使用这些类时不知道实体框架。我的映射当前类似于以下 - 这是“正确的”吗？

```
public class EmployeeMap : EntityTypeConfiguration<Employee>
{
    public EmployeeMap()
    {
        this.HasOptional(e => e.HomeAddress).WithOptionalDependent(p => p.Value).Map(m     => m.MapKey("PostalAddressID"));
    }
} 
```

这不编译；我得到：

> 类型“邮政地址？” 必须是引用类型才能将其用作泛型类型或方法“System.Data.Entity.ModelConfiguration.EntityTypeConfiguration.HasOptional(System.Linq.Expressions.Expression>)”中的参数“TTargetEntity”

此外，我不喜欢将“PostalAddressID”作为字符串常量传递给对 MapKey() 的调用。

请问有人可以强调我的方式的错误吗？我一直在寻找过去 3 个小时无济于事！

编辑：我应该提到，一旦我理解了这部分，我将尝试分别解决 Employee>ContactTelephoneNumbers 的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T23:38:31.463

您已将 HomeAddress 声明为值类型，特别是作为`Nullable<T>`.

去除那个 ？来自声明（引用类型允许为 null，因此不需要包装在 Nullable 结构中）。

```
public virtual PostalAddress HomeAddress {get;set;} 
```

要指定映射，我认为您可以使用以下命令：

```
this.HasOptional( e => e.HomeAddress ).WithMany().HasForeignKey( e => e.HomeAddressID ); 
```

您还需要将 HomeAddressID 属性添加到 Employee 类。

# javascript - asp.net 中的 Javascript 和 css 缓存

> ID：14449140
> 
> 赞同：3
> 
> 时间：2013-01-21T23:35:50.340
> 
> 标签：javascript, asp.net, css, caching

我知道这个问题被问了很多次，最常见的答案是：

1.  使用 .htaac​​cess 文件进行自动版本控制。
2.  虽然完全不建议这样做，但使用版本号作为查询参数例如：'/scripts/script1?v=1.0.0'。这将导致浏览器不缓存文件，而是完成工作。

我正在处理一些发布后的问题，由于我们不遵循软件项目的生命周期，因此我们会在测试和修复问题时更新站点。因此，有时我们可能不得不一天更新几次网站，而不是一周没有更新。

我不确定是否有办法仍然可以利用缓存，同时不需要让用户刷新页面/清除缓存以查看最新更改。

如果这是我需要做的，有没有办法可以在 asp.net 中实现 .htaac​​cess 解决方案？

我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:03:46.853

这是我用于 css 文件的解决方案，但应该适用于 JS：在 htaccess 中有一个规则：

```
RewriteRule ^(.*)_ver_.*(\..*)$ $1$2 [NC,L] 
```

这需要一个文件名，例如“Style_ver_12345.css”，并将其重写为 Style.css。

然后，当您包含文件时，将实际文件的 LastWriteTime （`File.GetLastWriteTime(filePath).Ticks.ToString()`我是这样做的）附加为版本号。我将拥有的示例文件名是 Style_ver_634909902200823172.css

这将确保文件的任何更改都会立即导致新的版本号，而物理文件不需要具有不同的名称，并且文件将被浏览器缓存。

用户仍然需要刷新页面，但他们不必清除缓存。如果需要，也许您可​​以通过 ajax 调用来强制刷新，该调用将加载脚本的版本号与服务器上的版本号进行比较。然后，服务器上的较新版本可能会强制刷新。

# c - asm、asm volatile 和 clobbering memory 的区别

> ID：14449141
> 
> 赞同：88
> 
> 时间：2013-01-21T23:35:52.180
> 
> 标签：c, gcc, inline-assembly

在实现无锁数据结构和时序代码时，通常需要抑制编译器的优化。通常人们会在 clobber 列表中使用`asm volatile`with来执行此操作`memory`，但有时您只会看到`asm volatile`或只是一个普通的`asm`clobbering 内存。

这些不同的语句对代码生成有什么影响（特别是在 GCC 中，因为它不太可能是可移植的）？

仅供参考，这些是有趣的变化：

```
asm ("");   // presumably this has no effect on code generation
asm volatile ("");
asm ("" ::: "memory");
asm volatile ("" ::: "memory"); 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-01-22T01:10:20.040

请参阅[GCC 文档中的“扩展 Asm”页面](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Extended-Asm.html)。

> 您可以通过在 . 后面写关键字来防止`asm`指令被删除。[...]关键字表明该指令具有重要的副作用。如果 asm 可访问，GCC 不会删除它。`volatile``asm``volatile``volatile`

和

> 没有任何输出操作数的`asm`指令将被视为与 volatile`asm`指令相同。

您的示例都没有指定输出操作数，因此`asm`和`asm volatile`表单的行为相同：它们在代码中创建了一个不能被删除的点（除非它被证明是不可访问的）。

这不等于什么都不做。有关更改代码生成的虚拟示例，请参阅[此问题](https://stackoverflow.com/questions/13955162)`asm`- 在该示例中，循环 1000 次的代码被矢量化为一次计算 16 次循环迭代的代码；`asm`但是循环内部的存在会抑制优化（`asm`必须达到 1000 次）。

clobber使`"memory"`GCC 假定任何内存都可以被`asm`块任意读取或写入，因此将阻止编译器重新排序加载或存储：

> 这将导致 GCC 不会在整个汇编器指令中将内存值缓存在寄存器中，并且不会优化对该内存的存储或加载。

（但这并不能阻止 CPU 相对于另一个 CPU 重新排序加载和存储；您需要真正的内存屏障指令。）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-21T23:41:58.587

`asm ("")`什么都不做（或者至少，它不应该做任何事情。

`asm volatile ("")`也什么都不做。

`asm ("" ::: "memory")`是一个简单的编译器围栏。

`asm volatile ("" ::: "memory")`AFAIK 与以前的相同。`volatile`关键字告诉编译器不允许移动这个汇编块。例如，如果编译器确定每次调用中的输入值都相同，它可能会被提升出循环。我不确定在什么条件下编译器会决定它对程序集有足够的了解以尝试优化其位置，但`volatile`关键字完全抑制了这一点。也就是说，如果编译器试图移动一个`asm`没有声明输入或输出的语句，我会感到非常惊讶。

顺便说一句，`volatile`如果编译器确定输出值未使用，它也会阻止编译器删除表达式。这只有在有输出值的情况下才会发生，所以它不适用于`asm ("" ::: "memory")`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-22T00:55:41.823

只是为了[Lily Ballard 的回答](https://stackoverflow.com/a/14449203/364696)的完整性，Visual Studio 2010 提供了`_ReadBarrier()`，`_WriteBarrier()`并且`_ReadWriteBarrier()`做同样的事情（VS2010 不允许 64 位应用程序的内联汇编）。

这些不会生成任何指令，但会影响编译器的行为。一个很好的例子是[here](http://msdn.microsoft.com/en-us/library/vstudio/65tt87y8.aspx)。

`MemoryBarrier()`生成`lock or DWORD PTR [rsp], 0`

# mysql - 使用 Spring 和 c3p0 和 MySQL 动态设置连接时区

> ID：14449147
> 
> 赞同：0
> 
> 时间：2013-01-21T23:36:18.083
> 
> 标签：mysql, jdbc, c3p0, spring-jdbc

我想以 c3p0 作为连接池动态设置 MySQL JDBC 连接的时区。要为给定的 MySQL JDBC 连接设置时区，我知道我可以使用“SET time_zone = '+02:00';”，但是如果我在从池中获取的连接上设置它，我假设连接将具有这个时区当它被归还给池并给一个新的请求时，女巫请求连接？！？我理解正确吗？

如果是，我如何以一种方式动态设置池连接将其时区恢复为原始时区（在我的情况下，我在 MySQL 和 JCM 中使用 UTC 作为默认值，在我的春天启动期间通过 TimeZone.setDefault(UTC)语境）。

这是我的（报告）道中的代码片段

```
public TrafficDuringDayGroupedByPhoneEvent countAllSummariesForTimeReport(Integer childId, Date start, Date end, MessageType type, TimeZone timezone) {

    Integer[] res = {0, 0, 0, 0};
    Session session = getSession();

    //SET time_zone = '+02:00';
    String sql = "select count(calls.d), d from (SELECT  start_time, \n"
            + "(case when hour(start_time) >= 6 and  hour(start_time) < 9 then 'morning'\n"
            + "when hour(start_time) >= 9 and  hour(start_time) < 15 then 'day'\n"
            + "when hour(start_time) >= 15 and  hour(start_time) < 21 then 'aft'\n"
            + "when hour(start_time) >= 21 and  hour(start_time) <= 24 then 'night'\n"
            + "when hour(start_time) < 6 then 'night' end) as d\n" + "FROM bpr_report_event b inner join ";

    ....
} 
```

我的问题类似于下面的问题，除了我想为每个连接动态设置它，而不是与下面问题中的那个人相同的时区。

[使用 Spring 和 DBCP 和 MySQL 设置连接时区](https://stackoverflow.com/questions/5970835/setting-connection-timezone-with-spring-and-dbcp-and-mysql)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T01:32:02.723

您可以编写一个 c3p0 ConnectionCustomizer 将时区设置回 UTC onCheckin。看

[http://www.mchange.com/projects/c3p0/apidocs/com/mchange/v2/c3p0/ConnectionCustomizer.html](http://www.mchange.com/projects/c3p0/apidocs/com/mchange/v2/c3p0/ConnectionCustomizer.html)

[http://www.mchange.com/projects/c3p0/#connection_customizers](http://www.mchange.com/projects/c3p0/#connection_customizers)

# java - 使用字符串数组 (JAVA) 的文件的字数

> ID：14449153
> 
> 赞同：0
> 
> 时间：2013-01-21T23:36:45.163
> 
> 标签：java, string, count, split, word

```
 while (scan.hasNextLine()) {
        String thisline = scan.nextLine();
        totalnumber.countthelines++; //linecount works
             for(int i = 0; i < thisline.length();i++){
                  totalnumber.charactercounter++;  //chararacter count works
                  String [] thewords = thisline.split (" ");
                  totalnumber.wordcounter = thewords.length;  //does not work
             }
        } 
```

我无法让我的 wordcounter 工作（我已经能够计算字符和行数）。我尝试了许多不同的方法来让它工作，但它总是只计算读入文件最后一行的单词。关于如何让它读取每一行而不是最后一行的任何建议？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T23:39:25.143

出色地 ：

```
totalnumber.wordcounter += thewords.length 
```

应该够了！

你只是忘了*添加*字数......所以整个代码是：

```
while (scan.hasNextLine()) {
    String thisline = scan.nextLine();
    totalnumber.countthelines++; //linecount works
    totalnumber.charactercounter+=thisline.length();  //chararacter count works
    String [] thewords = thisline.split (" ");
    totalnumber.wordcounter += thewords.length; 
    } 
```

（对多次编辑感到抱歉。有时，它是如此明显......;）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T23:39:43.033

你需要：

```
String [] thewords = thisline.split (" ");
totalnumber.wordcounter += thewords.length; 
```

在循环之外迭代字符。请注意，`+=`而不是`=`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T23:38:34.763

```
for(int i = 0; i < thisline.length(); i++) {
    totalnumber.charactercounter++;  //chararacter count works
}

String [] thewords = thisline.split (" ");
totalnumber.wordcounter = thewords.length;  //does not work 
```

# php - 使用 MySQL 用户通过 php 登录 - 为什么不呢？

> ID：14449154
> 
> 赞同：0
> 
> 时间：2013-01-21T23:36:46.023
> 
> 标签：php, mysql, login

2007 年，我在公司建立了一个内部网站，该网站一直沿用至今。那时我没有阅读太多关于安全的内容，因为我完全控制了数据库，所以我编写了用户管理系统，它创建了 MySQL 数据库用户（是的，'whoever'@'specifichost' 类型）。创建此类用户需要管理员，无法进行用户注册。特殊脚本计算出需要哪些 DB 对象权限。不可能“记住我”。

由于现在我需要重新访问登录/注册系统，并且每个人都在询问 Facebook 类型的登录，我想知道使用 MySQL 用户/密码是否是一个坏主意，直接在数据库上授予他们的权限？（假设虚拟主机允许创建多个用户）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T23:49:08.370

通常，人们会基于每个应用程序或每个服务为数据库创建用户/权限，而不是为单个应用程序最终用户帐户创建用户/权限。MySQL 的访问控制通常不够精细，无法用于用户特定的权限。用户特定的权限通常会在应用程序层实现，因为通常您需要记录级控制谁可以访问什么，这是 MySQL 不允许的。

这也将使您在使用数据库时更容易处理连接管理和故障排除问题，因为所有基于用户的访问逻辑都只驻留在您的应用程序层中。

# git - Git 分支跟随大师

> ID：14449155
> 
> 赞同：0
> 
> 时间：2013-01-21T23:36:47.453
> 
> 标签：git, github

是否可以设置一个始终包含不同分支所包含内容的分支？我问是因为我有一个使用 GitHub 的项目，我希望`pg-pages`分支始终包含`master`. 谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T01:00:04.837

这听起来像你在这里遗漏了一点。分支名称在 git 中没有什么特别之处——如果你希望`pg-pages`分支成为主分支，只需将其用作主分支并删除 master。

如果您确信被迫使用该名称会带来很多不便，因此值得麻烦，您可以通过其他方式解决：

*   使用此命令推送 master（或将其添加为别名）：

    ```
    git push origin master master:gh-pages 
    ```

*   添加一个 post-commit 钩子，检查您是否刚刚在 master 上提交（通过检查它是否是当前分支 / HEAD 是否指向它），如果是，则运行以下命令：

    ```
    git branch -f gh-pages master 
    ```

    请注意，之后您仍然需要推送 gh-pages。

# c# - 如何从 DataGrid 中的 DataTemplate 绑定到控件引用

> ID：14449156
> 
> 赞同：0
> 
> 时间：2013-01-21T23:36:49.003
> 
> 标签：c#, silverlight, datagrid, user-controls

我没有使用基于 MVVM 或 PRISM 的模型。我正在尝试将 DataGrid DataTemplate 内部绑定到与我的 DataGrid 处于同一级别的控件。当我这样做时，我返回 null。

**2个问题：**

1.  什么是布局根？当我引用它时，在这种情况下是一个网格，我返回一个对象。如果我将 LayoutRoot 更改为 XAML 中的画布，我将返回 null。

2.  如何在 DataGrid 列的 DataTemplate 中绑定到 XAML 中的 Canvas？

我有以下 XAML：（因长度而被修剪）

```
<Grid x:Name="LayoutRoot" Background="#F7F7F7">
    <Border>
        <Canvas x:Name="LayoutCanvas">
            <!-- A lot of Xaml -->
        </Canvas>
    </Border>
</Grid> 
```

在我的画布中，我有以下 DataGrid：

```
<sdk:DataGrid x:Name="dgOrderContents" AutoGenerateColumns="False">
    <sdk:DataGrid.Columns>
        <sdk:DataGridTemplateColumn Header="Thumb">
            <sdk:DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <ucp:PhotoComponentForDataGrid Source="{Binding PhotoUrl}" PopupTarget="{Binding ElementName='LayoutCanvas' }" Width="60" />
                </DataTemplate>
            </sdk:DataGridTemplateColumn.CellTemplate>
        </sdk:DataGridTemplateColumn
    </sdk:DataGrid.Columns>
</sdk:DataGrid> 
```

我的问题是当我尝试使用 'LayoutCanvas' 进行绑定时，该值为 null 会导致错误。如果我绑定到“LayoutRoot”，它可以工作，但我需要 Canvas，因为位于我的 UserControl 内的 FloatableWindow 控件依赖于 Canvas。

提前感谢您的任何帮助或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:20:37.840

我可能无法使绑定工作，因为我没有使用 MVVM 或 PRISM 模型。但我确实通过使用我的 DataGrid 的 LoadingRow 事件让它工作。

```
private void dgOrderContents_LoadingRow(object sender, DataGridRowEventArgs e)
{
    foreach (DataGridColumn col in dgOrderContents.Columns)
    {
        if (col.Header.ToString() == "Thumb")
        {
            PhotoComponentForDataGrid pcdControl = (PhotoComponentForDataGrid)col.GetCellContent(e.Row);
            pcdControl.PopupTarget= this.LayoutCanvas;
        }
    }
} 
```

这允许我从我的自定义用户控件中引用 LayoutCanvas 控件。

# css - 更改后 CSS 不刷新

> ID：14449163
> 
> 赞同：11
> 
> 时间：2013-01-21T23:38:02.957
> 
> 标签：css, eclipse, tomcat, web

这是我的简单（我希望）问题：

我正在通过 Tomcat 7 运行一个带有 Eclipse 的 Web 应用程序。我使用经典的 servlet-model-jsp 模式。我的问题是，当我更改样式表（CSS）中的某些内容并重新启动 tomcat 并在 chrome 上重新加载页面时，新的 css 未加载到浏览器上（我通过浏览器检查它，我看到与更改之前相同） .

出了什么问题，我该怎么办？！

先感谢您 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-13T08:14:18.413

我不认为这是客户的问题。我认为这是 Eclipse/Tomcat 插件中的错误。如果你检查`request.getPathTranslated()`里面的servelet`doGet`方法，它会是这样的

```
C:\Users\YourName\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp1\
wtpwebapps\yourAppName\ 
```

因此，在 eclipse 中运行的 tomcat 从那里提供静态内容，这与您正在编辑的静态内容的位置不同，通常类似于

```
C:\fullPathTo\yourAppName\src\main\webapp\static 
```

Eclipse 中的 Tomcat 经常忽略将静态内容从您编辑它的位置更新到插件......从它提供给您的网页的位置。

为了解决我使用 Beyond Compare 或类似的问题，并设置目录之间的比较

```
C:\fullPathTo\yourAppName\src\main\webapp\static 
```

和

```
...\.plugins\org.eclipse.wst.server.core\tmp1\wtpwebapps\yourAppName\static 
```

如果 css 或其他静态更改（例如 javascript 文件）未能在浏览器中显示，只需快速刷新 Beyond Compare 窗口，这将突出显示不匹配，手动复制它们，一切顺利。我知道这是一个 hack，但它对我有用，直到 eclipse 的家伙解决这个问题。

# matlab - ？？？输入参数“x”未定义

> ID：14449165
> 
> 赞同：-3
> 
> 时间：2013-01-21T23:38:20.240
> 
> 标签：matlab

我输入：

```
EDU>> %using the temporary variable levels
EDU>> levels=range/quantise_range;
levels=round(levels);
quantisation_bits=log2(levels) 
```

注意。任何地方都没有 x 变量

我的错误是：

```
??? Input argument "x" is undefined.

Error in ==> range at 18
    y = max(x) - min(x);

EDU>> %combining above process into one statement
quantisation_bits=log2(round(range/quantise_range));
??? Input argument "x" is undefined.

Error in ==> range at 18
    y = max(x) - min(x); 
```

有人愿意解释一下这个问题吗？我是编程初学者，我真的不明白如何阅读错误提示。

谢谢。

此外，可能是由于我对相同原则的误解，我在此代码中发现了问题，还包括错误：

%尝试创建自己的函数，我在行尾按 shift+enter 以保持整洁：

```
EDU>> function what_am_i()
disp 'I am a function'
??? function what_am_i()
    |
Error: Function definitions are not
permitted in this context.

EDU>> 
function what_am_i()
disp' I am a function'
??? function what_am_i()    
    |
Error: Function definitions are not
permitted in this context.

EDU>> end
??? end
    |
Error: Illegal use of reserved keyword
"end". 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T03:59:05.903

除了@ user1860611关于命令窗口中函数定义的答案之外，您遇到的另一个问题与[range](http://www.mathworks.com/help/stats/range.html)，这是一个内置函数。看来您正在尝试将`range`其用作变量名，但实际上并未将其初始化为值，因此它仍然是一个函数。

在这里的行中：

```
levels=range/quantise_range; 
```

您实际上是在调用该`range`函数，但没有向其传递参数。

```
Error in ==> range at 18
y = max(x) - min(x); 
```

错误消息告诉您调用的函数`range`产生了错误。没有一个名为 的变量并不重要`x`，因为该函数内部有一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T23:55:20.370

您可能会将“命令窗口”与“编辑器”混淆。在“命令行窗口”中可以输入几行代码，但不能创建函数。它更像是一个计算器。

如果您创建并保存文件，那么您在“编辑器”中打开它们，这时 Matlab 开始表现得更像一种编程语言。它保存`.m`可以在其中编写函数或算法的文件。

Matlab 有很多可用的帮助。我建议访问他们的网站并搜索一下。（或者只是谷歌“matlab 简介”）

# r - lapply 和 sapply 的日期

> ID：14449166
> 
> 赞同：5
> 
> 时间：2013-01-21T23:38:22.940
> 
> 标签：r

我已经导入了一个包含多个日期的 CSV 文件，并使用 as.Date 函数来转换日期。但是，当我使用 mapply 函数查找两个日期中较早的日期时，我要么得到一个包含日期的列表，要么得到一个数字向量。如何获得带有日期的向量？

```
POP.Start.final <- mapply(min, combinedOM$Cons.Start.Date.y, 
                               combinedOM$OS.Start.Date.y, 
                                MoreArgs = list(na.rm=T),SIMPLIFY=T) 
```

这将返回一个数字向量，更改为 SIMPLIFY=F 返回日期列表，但我想要一个日期向量。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T23:54:59.357

在这种特定情况下，我相信`pmin`可以解决问题：

```
POP.Start.final <- pmin(combinedOM$Cons.Start.Date.y,
  combinedOM$OS.Start.Date.y,
  na.rm=TRUE) 
```

在一般情况下，`SIMPLIFY=TRUE`（默认）使用效用函数通过 .`simplify2array`将列表转换为原子模式的向量`as.vector`。因为日期在内部存储为数字，`SIMPLIFY=TRUE`所以会将日期列表转换为模式数字的向量并删除`Date`该类。您可以设置`SIMPLIFY=FALSE`保留`Date`类，然后使用`do.call`with`c`将列表转换为向量。

```
POP.Start.final <- do.call(c,mapply(min, combinedOM$Cons.Start.Date.y, 
                               combinedOM$OS.Start.Date.y, 
                                MoreArgs = list(na.rm=TRUE),SIMPLIFY=FALSE)) 
```

一些可重现的代码：

```
a <- as.Date(c("2012-01-11","2012-06-30","2012-04-18"))
b <- as.Date(c("2013-04-21","2012-03-22","2012-05-01"))
pmin(a,b)
#[1] "2012-01-11" "2012-03-22" "2012-04-18"
do.call(c,mapply(min,a,b,MoreArgs=list(na.rm=TRUE),SIMPLIFY=FALSE))
#[1] "2012-01-11" "2012-03-22" "2012-04-18" 
```

顺便说一句，使用`T`and `F`for `TRUE`and`FALSE`有点令人担忧，因为`T`and`F`可以重新分配，而`TRUE`and`FALSE`不能重新分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T23:49:27.403

不确定这是否是最好的方法，但该`origin`函数`as.Date`是默认日期格式`January 1, 1970`或`1970-01-01`默认日期格式。

所以（用虚构的数据代替你的），这将起作用：

```
> one <- as.Date("2012-01-01")
> two <- as.Date("2012-03-13")
> 
> POP.Start.final <- as.Date(
                             mapply(min,
                                    one,
                                    two,
                                    MoreArgs=list(na.rm=T)
                                   ),
                                    origin="1970-01-01"
                            )
> str(POP.Start.final)
 Date[1:1], format: "2012-01-01" 
```

# java - JLabel 未添加到 JPanel

> ID：14449170
> 
> 赞同：1
> 
> 时间：2013-01-21T23:38:39.027
> 
> 标签：java, swing

我有这个类，它应该向 JPanel 添加一个 JLabel，但由于某种原因它没有这样做。为什么不将 JLabel 添加到 JPanel？这发生在我的`SwigWorker`课堂上的`done()`方法中

```
package sscce;

import java.io.IOException;
import java.io.StringReader;
import java.io.StringWriter;
import java.util.ArrayList;
import javax.swing.JLabel;
import javax.swing.SwingWorker;
import javax.swing.UIManager;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.OutputKeys;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;
import org.w3c.dom.CharacterData;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

public class sscce extends javax.swing.JFrame{
    protected XML xml = new XML();

    public sscce(){
        initComponents();
        GetNotes getNotes = new GetNotes();
        getNotes.execute();
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jScrollPane1 = new javax.swing.JScrollPane();
        notesPanel = new javax.swing.JPanel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        javax.swing.GroupLayout notesPanelLayout = new javax.swing.GroupLayout(notesPanel);
        notesPanel.setLayout(notesPanelLayout);
        notesPanelLayout.setHorizontalGroup(
            notesPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 494, Short.MAX_VALUE)
        );
        notesPanelLayout.setVerticalGroup(
            notesPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 433, Short.MAX_VALUE)
        );

        jScrollPane1.setViewportView(notesPanel);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 496, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 435, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>

    public static void main(String args[]){
        try{
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        }catch(  ClassNotFoundException | InstantiationException | IllegalAccessException | javax.swing.UnsupportedLookAndFeelException ex){
            java.util.logging.Logger.getLogger(sscce.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }

        java.awt.EventQueue.invokeLater(new Runnable(){
            public void run(){
                new sscce().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JPanel notesPanel;
    // End of variables declaration

    public class GetNotes extends SwingWorker{

        protected ArrayList<XML> notes;

        @Override
        public void done(){
            System.out.println(notes.size());
            for(XML note : notes){
                String n = note.getNode("notes", "note");
                System.out.println(n);
                JLabel lbl = new JLabel(n);
                lbl.setVisible(true);
                notesPanel.add(lbl);
            }
        }

        @Override
        public String doInBackground(){
            String xmlStr = "<?xml version=\"1.0\"?>"
                    + "<root>"
                    + "    <success>true</success>"
                    + "    <notes>"
                    + "        <note>Note 1</note>"
                    + "    </notes>"
                    + "    <notes>"
                    + "        <note>Note 2</note>"
                    + "    </notes>"
                    + "    <notes>"
                    + "        <note>Note 3</note>"
                    + "    </notes>"
                    + "</root>";
            xml.parse(xmlStr);
            notes = xml.getNodes("root", "notes");
            return null;
        }
    }
}

class XML{

    private Document doc;

    public XML(){
    }

    public void parse(String xml){
        try{
            DocumentBuilder db = DocumentBuilderFactory.newInstance().newDocumentBuilder();
            InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));

            doc = db.parse(is);
        }catch(ParserConfigurationException | SAXException | IOException ex){
            //Logger.getLogger(XML.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public Document getDoc(){
        return this.doc;
    }

    public ArrayList<XML> getNodes(String root, String name){
        ArrayList<XML> elList = new ArrayList<>();
        NodeList nodes = doc.getElementsByTagName(root);
        for(int i = 0; i < nodes.getLength(); i++){
            Element element = (Element)nodes.item(i);
            NodeList nl = element.getElementsByTagName(name);
            for(int c = 0; c < nl.getLength(); c++){
                Element e = (Element)nl.item(c);
                String xmlStr = this.nodeToString(e);
                XML xml = new XML();
                xml.parse(xmlStr);
                elList.add(xml);
            }
        }
        return elList;
    }

    private String nodeToString(Node node){
        StringWriter sw = new StringWriter();
        try{
            Transformer t = TransformerFactory.newInstance().newTransformer();
            t.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
            t.transform(new DOMSource(node), new StreamResult(sw));
        }catch(TransformerException te){
            System.out.println("nodeToString Transformer Exception");
        }
        return sw.toString();
    }

    public String getNode(String root, String name){
        NodeList nodes = doc.getElementsByTagName(root);
        for(int i = 0; i < nodes.getLength(); i++){
            Element element = (Element)nodes.item(i);

            NodeList n = element.getElementsByTagName(name);
            Element e = (Element)n.item(0);
            return getCharacterDataFromElement(e);
        }
        return "";
    }

    public static String getCharacterDataFromElement(Element e){
        Node child = e.getFirstChild();
        if(child instanceof CharacterData){
            CharacterData cd = (CharacterData)child;
            return cd.getData();
        }
        return "";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T23:47:01.200

1-更改`notesPanel`. `GroupLayout`真的不适合这样的手动编码。在我的测试中，我使用了`FlowLayout`.

```
//        javax.swing.GroupLayout notesPanelLayout = new javax.swing.GroupLayout(notesPanel);
//        notesPanel.setLayout(notesPanelLayout);
//        notesPanelLayout.setHorizontalGroup(
//                    notesPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
//                .addGap(0, 494, Short.MAX_VALUE));
//        notesPanelLayout.setVerticalGroup(
//                    notesPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
//                .addGap(0, 433, Short.MAX_VALUE));
        notesPanel.setLayout(new FlowLayout()); 
```

`JComponent#validate`2-在添加完标签后添加一个呼叫。

```
System.out.println(notes.size());
for (XML note : notes) {
    String n = note.getNode("notes", "note");
    System.out.println(n);
    JLabel lbl = new JLabel(n);
    lbl.setVisible(true);
    notesPanel.add(lbl);
}
notesPanel.validate(); 
```

这应该鼓励框架重新布局它的子组件。

# jquery - 遍历段落 jquery 中的每个单词

> ID：14449172
> 
> 赞同：0
> 
> 时间：2013-01-21T23:38:43.560
> 
> 标签：jquery

我有一段

```
 <div id="unique"> Lorem ipsum dolor</p> 
```

我想得到这个段落中的每个单词。我已经尝试过

```
 var $texts = $("#unique");
 $texts.each(function(i, text){
 var str = $(text).text();
    console.log(text);
 }); 
```

但这只会给我整个文本“Lorem ipsum dolor”，而不是“Lorem”、“ipsum”和“dolor”。任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T23:41:23.727

使用字符串原型`.split()`。

```
$.each($('#unique').text().split(' '), function(i, text) {
    console.log(text);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T23:42:02.317

您可以坚持使用标准 JavaScript，这将比访问 jQuery 方法快得多：

```
var str = 'Lorem ipsum dolor';
var arr = str.split(' ');

for (var i = 0; i < arr.length; i++) {
   var word = arr[i];
   console.log(word);
} 
```

以下是一些[基准测试](http://jsperf.com/js1-vs-jquery-iteration)，表明使用 jQuery 被证明要**慢 8%**：

```
Normal JS = 13,668 Ops/sec (±1.00% - fastest) 
jQuery = 12,442 Ops/sec (±0.43% - 8% slower) 
```

# javascript - 如何使用查询字符串 ASP 获取#

> ID：14449173
> 
> 赞同：0
> 
> 时间：2013-01-21T23:38:43.413
> 
> 标签：javascript, html, asp-classic

所以我们有一个 URL。这个网址看起来像：www.test.com/#test

我如何使用类似的东西来获取#test

```
statereq = request.querystring("state") 
```

我需要根据 # 是什么来执行操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T23:45:53.980

你不能。它不会发送到服务器。

# c# - 如何使用后面的代码中的参数来使用 C# 访问我的 aspx 文件中的某些控件

> ID：14449181
> 
> 赞同：0
> 
> 时间：2013-01-21T23:39:47.403
> 
> 标签：c#, asp.net

我有 2 个文本框，在我的 aspx 文件中有一个日期值。我想在我的选择语句中使用后面的代码访问这两个控件，但我收到这样的错误：'必须声明标量变量“@txtStartClosingDate”所以我在后面的代码中缺少什么？谢谢

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            MainGridView.DataSource = GetData("select   GroupCategory, Count(Status1) as TotalCount from  [MasterProject] where Closing_Date >= @txtStartClosingDate and Closing_Date <= @txtEndClosingDate and Status1 is not null group by  GroupCategory");
            MainGridView.DataBind();

        }
    } 
```

这是我要引用的文本框之一：

```
<asp:TextBox ID="txtStartClosingDate" runat="server" CssClass="datepicker"></asp:TextBox> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T23:46:05.680

尽管我强烈建议不要这样做（由于 SQL 注入漏洞），但我认为您要做的是：

```
if (!IsPostBack)
{
    MainGridView.DataSource = GetData("select   GroupCategory, Count(Status1) as TotalCount from  [MasterProject] where Closing_Date >= '"+ txtStartClosingDate.Text +"' and Closing_Date <= '"+ txtEndClosingDate.Text +"' and Status1 is not null group by  GroupCategory");
    MainGridView.DataBind();
} 
```

GetData 方法是什么样的？它需要任何 SQL 参数吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T23:59:11.043

在 aspx 页面后面的代码中编写 sql 查询是一种不好的做法。有许多解决方案，其中之一是使用 3 层结构的应用程序：GUI 是您的 aspx 页面，业务逻辑层将处理您的应用程序的逻辑和数据访问层，它将通过调用查询或存储过程实际与 DB 对话，这实际上比仅在代码中编写查询要好。为什么？因为存储过程在数据库中编译一次，而不像每次都会编译的内联查询，所以您可以将变量传递给存储的价格，这将帮助您防止 sql 注入。

查看架构示例：

[http://shoutingwords.com/creating-3-tier-layered-application-using-c-sharp.html](http://shoutingwords.com/creating-3-tier-layered-application-using-c-sharp.html)

存储过程：

[http://www.codeproject.com/Articles/38682/Overview-of-SQL-Server-Stored-Procedure](http://www.codeproject.com/Articles/38682/Overview-of-SQL-Server-Stored-Procedure)

# vb.net - 无需等待即可开始任务

> ID：14449183
> 
> 赞同：1
> 
> 时间：2013-01-21T23:40:09.933
> 
> 标签：vb.net, windows-runtime, windows-store-apps

我想在不使用`Await`关键字的情况下启动后台任务。相反，我想在各个点监视任务，并在必要时重新启动它以在后台更新信息。这是我试图调用的方法：

```
 Public Async Function UpdateVehicleSummaries(p_vehicleID As Int32) As Task(Of Boolean)
        Dim tempVehicle As Koolsoft.MARS.BusinessObjects.Vehicle
        For Each tempVehicle In Vehicles
            If p_vehicleID = 0 Or p_vehicleID = tempVehicle.VehicleID Then
                Await UpdateVehicleStats(tempVehicle)
            End If
        Next

        Return True
    End Function 
```

我试图启动任务的代码似乎不起作用，我不确定如何提供参数。我收到“Task(Of Boolean) 无法转换为 System.Action 和/或参数错误”的错误

```
 Dim tempTask As Task
    tempTask = New Task(UpdateVehicleSummaries(tempVehicleID))
    tempTask.Start() 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T23:41:51.723

由于`UpdateVehicleSummaries`已经是异步的，你应该只是这样做：

```
Dim tempTask As Task(Of Boolean) = UpdateVehicleSummaries(tempVehicleID) 
```

返回的`Task(Of T)`将是“热的”（正在运行），但不应阻塞，因为此时`Await`调用将立即将控制流返回给调用者。

* * *

如果您需要在运行时执行其他工作，则此方法的更典型用法是执行以下操作：

```
Dim tempTask = UpdateVehicleSummaries(tempVehicleID)

' Do your other work

Dim success = Await tempTask ' Get the boolean result asynchronously...

' use the result 
```

# jquery - Joomla jQuery 菜单项属性

> ID：14449185
> 
> 赞同：0
> 
> 时间：2013-01-21T23:40:16.740
> 
> 标签：jquery, joomla, menu, menuitem

有没有人成功地从 Joomla 菜单项中检索到属性？我需要将此属性捕获到 jQuery 中。在页面源中，菜单部分显示如下：

```
 < ul class="menudirectory">  
    < li class="item-182" >< a title="services" href = "/index.php/services">Services< /a>< /li>  
    < li class="item-183">< a title="education" href="/index.php/education">Education< /a>< /li>  
    < /ul> 
```

我尝试了各种选择器，例如

```
jQuery( 'ul.menudirectory' ) .attr ( 'title' ); 
```

或者

```
jQuery( '.menudirectory a' ) .attr ( 'title' ); 
```

我得到的只是“服务”，这是第一个菜单项，或者结果是“未定义”。

PS开始到达那里。我试过这个：

```
jQuery('.menudirectory a').click(function () {  
      var theid = jQuery(this).get(); 
```

我得到了 href 属性。关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:20:45.163

在这里，试试这个：

```
$('a','ul.menudirectory').attr('title'); 
```

**编辑**：上面的行意味着`$("elementToSearch", "Context")`

好像我写了`$("a, ul.menudirectory")`，这意味着 OR。注意逗号在第二行的引号内

# ruby - 当你有一个没有参数的 case 语句并且 when 子句是 lambda 时会发生什么？

> ID：14449188
> 
> 赞同：5
> 
> 时间：2013-01-21T23:40:22.460
> 
> 标签：ruby

这段代码没有像我预期的那样执行：

```
case    
when -> { false } then "why?"        
else "This is what I expect"        
end      
# => "why?" 
```

这也不

```
case
when ->(x) {false} then "why?"  
else "This is what I expect"
end  
# => "why?" 
```

第一个`then`子句在两种情况下都执行，这一定意味着我提供给该`when`子句的 lambda 没有被调用。我知道无论子句`===`的主题是什么，都应该调用大小写相等运算符。`when`我想知道`===`当没有参数提供给`case`. 我在想它可能是`nil`，但它不可能是：

```
-> {false} === nil
# => ArgumentError: wrong number of arguments (1 for 0)

->(x) {false} === nil
# => false 
```

这按预期执行，如果正在执行，将导致我的预期`case`结果或异常。有人可以解释上面的结果吗？似乎根本没有使用大小写相等运算符，但第一个`when`子句正在评估为`true`. 顺便说一句，我这样做是因为 a 的输出`case`可用于变量赋值，而且它比有几个`elsif`子句更简洁。我希望能够`Proc`在没有参数的 case 语句中使用任意 s。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T00:07:36.670

```
case    
when -> { false } then puts "why?"        
else puts "This is what I expect"        
end

case    
when 'cat' then puts "why?"        
else puts "This is what I expect"        
end

case    
when -> { false }.call then puts "why?"        
else puts "This is what I expect"        
end 
```

输出：

```
why?
why?
This is what I expect 
```

正如 The Pickaxe ( [http://pragprog.com/book/ruby3/programming-ruby-1-9](http://pragprog.com/book/ruby3/programming-ruby-1-9) ) 所说，有两种形式的案例陈述。

> 第一个允许评估一系列条件，执行对应于第一个为真条件的代码： case when ‹ boolean-expression ›+ ‹ then › ...
> 
> case 表达式的第二种形式在 case 关键字之后采用目标表达式。‹ 比较 ›+ ‹ then › ... 时的案例目标

在您的情况下（`case`没有目标），任何不是`false`或`nil`（例如 Proc 或字符串 'cat'）的表达式都计算为 true。除非您执行，否则不会执行 Proc `call`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T23:59:07.713

您可以使用`case`不带参数的语句来执行类似于`if`语句的操作。例如：

```
case
when x > 0 then puts "positive"
else puts "negative"
end 
```

您假设它正在尝试与 进行比较`nil`，但事实并非如此。相反，当没有参数时，该`case`语句仅测试“真实”值（除`nil`and之外的任何值`false`）。因此，当它遇到您的第一条`when`语句时，它会检查您的`Proc`（意思是实际的 ruby`Proc`​​ 对象，**而不是**执行 your 的结果`Proc`）是`nil`or `false`，而不是。由于它是“真实的”，因此该代码将被执行。

试试这个，你会注意到`Proc`never 甚至被调用/执行（你只会看到`"bar"`，而不是`"foo"`）：

```
case
when -> { puts 'foo' } then puts 'bar'
else puts "This line will never be printed"
end 
```

# twitter-bootstrap - 引导程序中的背景图像？

> ID：14449193
> 
> 赞同：0
> 
> 时间：2013-01-21T23:41:00.597
> 
> 标签：twitter-bootstrap

嗨，我有基本的引导带布局。现在在 css 上有两个 css 文件，我找到了一个带有正文参考的文件，我发现似乎没有其他任何东西干扰我的问题

我的主文件夹在根文件夹中有它的 index.html 然后我按照提供的 img css js 中断

我的背景之路很简单。img/bg.jpg 所以我放了 ../img/bg.jpg 什么都没有

我还尝试在 css 文件夹中创建一个 images 文件夹并将其放在那里

```
body {
  margin: 0;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 14px;
  line-height: 20px;
  color: #333333;

  background: url ('images/bg.jpg');

} 
```

我还尝试将来自 google 的 jpg 图像的链接放在什么都没有，我正在运行最新版本，我怎样才能实现我的目标。谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T23:46:18.127

您拥有的 CSS 指的是“images/bg.jpg”，但您的问题指的是“img/bg.jpg”。那是错字吗？

# python - 在 Google App Engine (python) 中安装 markdown 扩展 oembed

> ID：14449194
> 
> 赞同：0
> 
> 时间：2013-01-21T23:41:04.113
> 
> 标签：python, google-app-engine, markdown, oembed

我设法安装了[Python OEmbed](https://github.com/abarmat/python-oembed)，它是我系统中 markdown 的扩展。

当我在我的系统上使用它时，一切正常，

```
import markdown
md = markdown.Markdown(extensions=['oembed'])
md.convert('![video](http://www.youtube.com/watch?v=zqnh_YJBvOI)') 
```

我得到以下答案：

```
u'<iframe width="459" height="344" src="http://www.youtube.com/embed/zqnh_YJBvOI?feature=oembed" frameborder="0" allowfullscreen></iframe>' 
```

然后我尝试只导入库，从

```
/Library/Python/2.7/site-packages 
```

到我的应用程序文件夹。

Markdown 工作正常，但如果我尝试加载扩展：

```
md = markdown.Markdown(extensions=['oembed'])
html = md.convert(body) 
```

我收到以下错误。

```
ImportError: Failed loading extension 'oembed' from 'markdown.extensions.oembed' or 'mdx_oembed' 
```

似乎在其他地方安装了扩展，但我不知道在哪里。

我已经转了几个小时，不知道如何在我的应用程序中正确使用此扩展程序。

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:11:56.563

在考虑了一个不同的问题一段时间后，我意识到我必须复制两个文件夹

```
mdx-oembed
oembed 
```

到我的应用程序的主文件夹

这解决了我的问题

# java - OutputStream 和 InputStream 用于线程间通信

> ID：14449196
> 
> 赞同：0
> 
> 时间：2013-01-21T23:41:35.467
> 
> 标签：java

我有以下问题：

我得到了一个具有以下 API 的模块：

```
 public void start(InputStream input, OutputStream output,
        InputStream error, PipeListener<T> listener) 
```

该模块的目的是促进主系统和外部进程（在本例中为 Process 实例）之间的通信。

我要做的是实现一个“模拟进程”，它实际上是一个线程实例，但有自己的伪输入、输出和错误流。这里的关键是流本身的性质，例如，我想要返回的流实现

```
((MockProcess)mockProcess).getInputStream() 
```

在功能上与

```
((Process)realProcess).getInputStream(). 
```

出于所有意图和目的，它们应该是完全可互换的。

我应该使用哪个 InputStream 和 OutputStream 实现（分别）来实现这一点？我能找到的唯一建议是使用管道流......但这真的是最好的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T23:47:26.100

我会说它们是最好的选择，因为管道用于 unix 上的进程间通信。您应该避免在磁盘上进行任何形式的 I/O。你应该避免所有沉重的 tcp/ip 过载。所以管道确实是最好的选择。

# python - 来自flac文件的数组中的PCM数据

> ID：14449198
> 
> 赞同：1
> 
> 时间：2013-01-21T23:41:37.093
> 
> 标签：python, c, pcm, flac

我有一个 flac 文件，我需要分析它的波形，所以我需要将 pcm 数据放在一个数组中。是否有一些库可以为我执行此操作而无需使用命令行工具转换文件？我可以同时使用 Python 和 C。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:41:59.807

我建议你使用 libFLAC 来解码。[http://flac.sourceforge.net/](http://flac.sourceforge.net/)

# javascript - 启用 JQuery 工具提示时无法更改标题

> ID：14449204
> 
> 赞同：4
> 
> 时间：2013-01-21T23:41:59.903
> 
> 标签：javascript, jquery, jquery-ui

这是场景：

1.  我使用 JQuery[按钮](http://jqueryui.com/button/)小部件创建了一个按钮，并为其添加了一个标题
2.  我调用 JQuery 工具提示[小部件](http://jqueryui.com/tooltip/)

当我务实地更改标题时，工具提示会正确更新，但是当我**在悬停按钮**时更改标题时，标题属性不会改变（我在萤火虫上检查过） 这是一个说明此用例的[示例。](http://jsfiddle.net/AXTMG/)

在我的示例中，如果单击 [更改标题] 按钮它可以工作，要查看问题，请单击 [延迟更改标题] 并将光标放在 [主题按钮] 上并等待警报。

简而言之，此代码在悬停按钮时不起作用：

```
$('#div').attr('title', 'new title'); 
```

这对我来说看起来很奇怪，任何人都可以建议吗？

更准确地说，我的问题是：**为什么标题属性不会改变？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T00:29:47.003

不确定这是否正是您想要的，但您可以这样做：

```
setTimeout(function(){
       $(document).tooltip('destroy');
       $('#div').attr('title','new title');
       $(document).tooltip();
        alert('title changed');
    }, 2000);
 }); 
```

[在这里提琴](http://jsfiddle.net/aaaheatair/WMV9h/)

# ios - iOS 位置管理器多次启动

> ID：14449206
> 
> 赞同：0
> 
> 时间：2013-01-21T23:42:04.590
> 
> 标签：ios, objective-c

首先，我对 iOS Dev 和 Objective-C 非常陌生。所以请原谅任何愚蠢的问题或代码。

我一直在 iPhone 上测试定位服务。我有这个由 NSTimer 触发的代码：

```
- (void)startLocationTracking
{

  if(self.locationManager==nil){
    _locationManager=[[CLLocationManager alloc] init];

    _locationManager.delegate=self;

    _locationManager.desiredAccuracy=kCLLocationAccuracyBest;

    _locationManager.distanceFilter=1;

    self.locationManager=_locationManager;

  }

if([CLLocationManager locationServicesEnabled]){

    [self.locationManager startUpdatingLocation];

  }

} 
```

这是我的位置管理器功能：

```
-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation    *)newLocation fromLocation:(CLLocation *)oldLocation{

[self timerLog];

NSString *deviceID = [self getUUID];

double lat = newLocation.coordinate.latitude;
double lon = newLocation.coordinate.longitude;
double alt = newLocation.altitude;
double dir = newLocation.course;
double spd = newLocation.speed;
double ha = newLocation.horizontalAccuracy;
double va = newLocation.verticalAccuracy;

NSDateFormatter *formatter;
NSString        *ts;

formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss.SSS"];

ts = [formatter stringFromDate:[NSDate date]];   

[self geoTrackingWS :deviceID :lat :lon :alt :dir :spd :ha :va :ts];

[manager stopUpdatingLocation];

} 
```

出于某种原因，我的函数`geoTrackingWS`会随机触发多次。NSTimer 每 1 分钟运行一次（仅作为测试），有时它运行良好，它只调用`geoTrackingWS`一次，但其他时候它会达到 2 或 3 次。

我已经完成了日志记录，我可以看到我的 NSTimer 工作正常，并且可以正常启动。

我感觉它与我手机上的另一个应用程序有关，但我不确定。

对此的任何帮助或见解都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T23:53:24.320

您可能不想多次创建新的 CLLocationManager 实例，从计时器调用 -startLocationTracking 即可。从您的代码的外观来看，我认为您只想调用 -startLocationTracking 一次，然后位置 API 将在有新信息时向您的委托（您指定为自己）发送消息。您可能想刷新对委托模式的理解，并查看一些使用 CLLocationManager 的示例代码。我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T00:06:34.003

位置管理器通常有多种方法来确定您的位置，包括：

*   蜂窝塔三角测量；
*   wifi网络识别；
*   全球定位系统。

其中第一个最不准确但最容易获得，第二个通常更准确但需要一段时间才能弄清楚（因为有一个网络请求进行查找），最后一个最准确但可能需要很长时间才能弄清楚out（搜索卫星等）。

因此，位置管理器运行的时间越长，其响应的结果就越准确是预期的行为。例如，在运行地图时，您可以看到这样做的后果——它通常会很快将您锁定到相当广泛的区域，然后需要一些时间才能获得更准确的估计。

# mysql - 仅使用 mysql 和 php 删除旧日志

> ID：14449208
> 
> 赞同：0
> 
> 时间：2013-01-21T23:42:14.123
> 
> 标签：mysql

我有一个名为 log 的表，用于存储用户所做的一切。我想做的是在显示最后 100 个结果后运行一个脚本。

所以基本上，当管理员访问日志页面时，他/她会看到最后 100 个结果。在显示最后 100 个结果时，我想删除表日志中除刚刚显示的最后 100 个结果之外的任何内容。我怎样才能做到这一点？我只知道删除表的基本代码

```
DELETE FROM table_name
WHERE some_column = some_value 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T23:46:15.520

使用包含记录创建时间的列：

```
DELETE FROM log WHERE created < (SELECT created FROM (
  SELECT created FROM log ORDER BY created DESC LIMIT 100, 1
) t) 
```

# ios - 如何创建可以在播放时取消和/或还原的延迟 CAAnimation？

> ID：14449209
> 
> 赞同：4
> 
> 时间：2013-01-21T23:42:25.297
> 
> 标签：ios, animation, calayer, caanimation

我有一个图层，我想在用户执行操作时显示，并在他完成后隐藏。如果用户再次执行该操作，则该层将再次显示。

为了让 UI 不会因为动画而发狂，我想要：

*   淡出动画仅在一秒钟后开始（如果用户在开始之前执行操作，则会取消）
*   如果用户在图层消失之前正在执行操作，则显示图层的淡入淡出动画从当前的淡出不透明度开始

做这个的最好方式是什么？

我试过了，但这不能正常工作（层闪烁时有很多噪音）：

```
- (void)hideHintLayer:(bool)hide
{
  if(hide)
  {
    CABasicAnimation *animation = [CABasicAnimation animation];
    animation.beginTime = CACurrentMediaTime() + 1.0f;
    animation.duration = 1.0f;
    animation.fillMode = kCAFillModeForwards;
    animation.removedOnCompletion = NO;
    animation.keyPath = @"opacity";
    animation.fromValue = @(1.0f);
    animation.toValue = @(0.0f);
    [layer addAnimation:animation forKey:nil];
  }
  else
  {
    layer.opacity = 1.0f;
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T01:05:52.537

如果你想停止动画，你可以这样做

```
[layer removeAllAnimations]; 
```

如果您想`alpha`在动画隐藏视图期间知道当前（以便您可以反转动画，从正确的位置开始，您可以执行以下操作：

```
CALayer *presentationLayer = layer.presentationLayer;
CGFloat startingAlpha = presentationLayer.opacity; 
```

然后，您可以将 alpha 设置为从`startingAlpha`1.0 到 1.0，以便在不闪烁屏幕的情况下为取消隐藏设置动画。

您可以使用基于块的动画来制作实际的动画，或者我想您可以使用`CABasicAnimation`，尽管我不确定您为什么会这样做。

* * *

因此，例如，您可以执行以下操作（在我的示例中，我有一个“显示”按钮）。我正在使用块动画，但我怀疑它也可以正常工作`CABasicAnimation`：

```
- (IBAction)onPressShowButton:(id)sender
{
    [self showAndScheduleHide];
}

- (void)showAndScheduleHide
{
    [UIView animateWithDuration:1.0
                     animations:^{
                         self.containerView.alpha = 1.0;
                     }
                     completion:^(BOOL finished) {
                         [self scheduleHide];
                     }];
}

- (void)show
{
    [UIView animateWithDuration:1.0
                     animations:^{
                         self.containerView.alpha = 1.0;
                     }
                     completion:nil];
}

- (void)scheduleHide
{
    self.timer = [NSTimer scheduledTimerWithTimeInterval:5.0
                                                  target:self
                                                selector:@selector(startToHide)
                                                userInfo:nil
                                                 repeats:NO];
}

- (void)startToHide
{
    self.timer = nil;

    self.hiding = YES;

    [UIView animateWithDuration:5.0
                          delay:0.0
                        options:UIViewAnimationOptionAllowUserInteraction
                     animations:^{
                         self.containerView.alpha = 0.0;
                     }
                     completion:^(BOOL finished) {
                         self.hiding = NO;
                     }];
} 
```

然后，您可以使用一些实用方法来反转它或重新安排正在进行的隐藏：

```
- (void)reverseAndPauseHide
{
    // if we have a "hide" scheduled, then cancel that

    if (self.timer)
    {
        [self.timer invalidate];
        self.timer = nil;
    }

    // if we have a hide in progress, then reverse it

    if (self.hiding)
    {
        [self.containerView.layer removeAllAnimations];

        CALayer *layer = self.containerView.layer.presentationLayer;
        CGFloat currentAlpha = layer.opacity;

        self.containerView.alpha = currentAlpha;

        [self show];
    }
} 
```

然后，问题是您何时知道该调用它`reverseAndPauseHide`以及何时`scheduleHide`再次调用它。因此，例如，您可以处理触摸：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesBegan:touches withEvent:event];

    [self reverseAndPauseHide];
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesEnded:touches withEvent:event];

    [self scheduleHide];
} 
```

# javascript - Javascript 禁用容器，但启用其中的输入

> ID：14449211
> 
> 赞同：0
> 
> 时间：2013-01-21T23:42:31.247
> 
> 标签：javascript, jquery

我有以下 HTML：

```
<div class="section_rows">
    <div class="body-row crew">
        <input type="text" class="col1" name="cast_person" value="{{cast.person }}"/>
        <input type="text" class="col2" name="cast_character" value="{{ cast.character }}"/>
        <input class="ordering" type="hidden" name="cast_ordering" value="{{ cast.ordering }}" />
        <a href="#;" class="delete">X</a>
    </div>
</div> 
```

以及以下 jQuery：

```
// drag and drop of cast and crew
$('.section_rows').sortable();
$( ".section_rows" ).disableSelection(); 
```

目前，这会禁用整个`section_rows`div 容器。我将如何启用其中的`input`s ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T23:44:31.433

很明显，我相信：

```
$( ".section_rows" ).disableSelection().find('input').prop('disabled', false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T23:47:44.080

可以使用`handle`可拖动选项来仅使用容器内的元素进行拖动。最佳解决方案将取决于您的 UI，但这可能是一个有用的解决方案。然后不用担心打电话`disableSelection()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T23:45:25.663

这个怎么样？

```
$('.selection_rows :not(input)').disableSelection(); 
```

# iframe - 如何删除标题图像和 iframe 之间的白色边框？

> ID：14449223
> 
> 赞同：1
> 
> 时间：2013-01-21T23:44:12.670
> 
> 标签：iframe, header, space

我希望有一个单页网站，顶部有一个标题图像，随着浏览器页面的宽度展开，下面的 iframe 显示另一个网站。我主要完成了这个（感谢stackoverlow的代码），但问题是在我的iframe出现之前，我的标题图像下方有一个空白。知道如何删除此内容或对其他方式来完成我的网页的想法吗？这是我到目前为止的代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<style>
*{margin:0;padding:0}
html, body {height:100%;width:100%;overflow:hidden}
table {height:100%;width:100%;table-layout:static;border-collapse:collapse}
iframe {height:100%;width:100%}

.header {border-bottom:1px solid #000}
.content {height:100%}
</style>
</head>
<body>
<table>
  <tr><td class="header"><div><h1>Header</h1></div></td></tr>
  <tr><td class="content">
    <iframe src="http://google.com/" frameborder="0"></td></tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T23:46:51.140

你可以试试边界：无；

或者

```
border: 0; 
```

# json - 将一列作为 json/名称值对/等返回的 postgresql 查询

> ID：14449226
> 
> 赞同：0
> 
> 时间：2013-01-21T23:44:56.043
> 
> 标签：json, postgresql, hstore

我有一个查询有这样的列......

```
systemid | created | updated 
```

对于每个系统 ID，表中都有一组任意名称值对，如下所示。

```
systemid | name | value 
```

所以这张桌子可能有

```
1,'name','ben'
1,'age',42
2,'name','john'
2,'age',22
2,'favoritecolor','red' 
```

有没有人知道一种方法可以使查询返回 systemid 的所有名称值对作为名称/值对类型？我想得到这样的结果。

```
systemid | created | updated | profiledata

1,'name','ben','jan 1, 2012, 'name=>\'ben\',age=42'
2,'name','john','sept 15, 2011, 'name=>\'john\',age=22, favoritecolor=>\'red\'' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:26:04.877

我想您可以尝试以下方法：

```
postgres=# CREATE TABLE attr(systemid int, name varchar(32), value varchar(64));
CREATE TABLE
postgres=#
postgres=# INSERT INTO attr VALUES(1,'name','ben');
INSERT 0 1
postgres=# INSERT INTO attr VALUES(1,'age', '42');
INSERT 0 1
postgres=# INSERT INTO attr VALUES(2,'name','john');
INSERT 0 1
postgres=# INSERT INTO attr VALUES(2,'age', '22');
INSERT 0 1
postgres=# INSERT INTO attr VALUES(2,'favoritecolor','red');
INSERT 0 1
postgres=#
postgres=# SELECT systemid
postgres-#       ,array_agg( name || '=' || value) AS profile_data
postgres-#   FROM attr
postgres-#   GROUP BY systemid;
 systemid |             profile_data
----------+--------------------------------------
        1 | {name=ben,age=42}
        2 | {name=john,age=22,favoritecolor=red}
(2 rows) 
```

或者您可以查看 hstore 或 json 数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T00:34:43.987

对此的任何解决方案大致将具有以下形式之一：

```
SELECT table1.systemid,
       created,
       updated,
       some_aggregate_function(name, value) AS profiledata
FROM table1 JOIN table2 ON table1.systemid = table2.systemid
GROUP BY table1.systemid, created, updated 
```

或者

```
SELECT table1.systemid,
       created,
       updated,
       some_aggregate_function(some_function(name, value)) AS profiledata
FROM table1 JOIN table2 ON table1.systemid = table2.systemid
GROUP BY table1.systemid, created, updated 
```

这是第二种方法的一个相当hacky，丑陋的例子，它作为第四列返回一个带有名称/值对的JSON对象：

```
SELECT table1.systemid, 
       created,
       updated, 
       '{' || array_to_string(
         array_agg(
           '"' || name || '":"' || value || '"'
         ), ','
       ) || '}' AS profiledata
FROM table1
JOIN table2 
ON table1.systemid = table2.systemid
GROUP BY table1.systemid, created, updated; 
```

如果您想要更漂亮的东西来获得相同的结果，您可能需要考虑[定义自己的聚合函数](http://www.postgresql.org/docs/8.3/static/sql-createaggregate.html)。恐怕我不是任何一种 SQL 高手，所以我无法想出一个好的、优雅的解决方案，但希望这能让你走上正轨。

# c++ - C++/QT - 通过 QByteArray 将数据转换为不同的格式不同于读入结构

> ID：14449228
> 
> 赞同：1
> 
> 时间：2013-01-21T23:45:07.070
> 
> 标签：c++, qt, types

我正在尝试阅读标题。这是结构：

```
struct header
{
    uint32 offset;
    char identifier[4];
    uint32 unknown;
}; 
```

当我通过 memcpy 读取复制内存时，我可以正确输出偏移量（通常为大数）。

当使用带有字节数组的内置函数时，我读入了整个文件，然后使用以下方法获取前四个字节：

```
QByteArray offset = data.left(4); 
```

然后我验证它已经正确复制，它有。

我的问题是将这些字节转换为适当的数据类型。我努力了：

```
 qDebug() << "Offset1:" << offset.toUShort();
    qDebug() << "Offset2:" << offset;
    qDebug() << "Offset3:" << offset.toHex();
    qDebug() << "Offset4:" << offset.toInt();
    qDebug() << "Offset5:" << offset.toLong();
    qDebug() << "Offset6:" << offset.toUInt();
    qDebug() << "Offset7:" << offset.toULong();
    qDebug() << "Offset8:" << offset.toULongLong();
    qDebug() << "Offset9:" << offset.toULong(); 
```

它们都没有输出正确的值。另一方面，当我只是 memcpy 然后使用：

```
qDebug() << "Offset:" << header.offset; 
```

我得到了正确的值。从字节到 uint32 的转换中我缺少什么？

它与字节序有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T08:52:51.880

toInt() 等将字符串表示，如“100”转换为整数，而不是二进制表示。要将二进制文件转换回来，您必须强制转换它：

```
 const quint32 v = *reinterpret_cast<const quint32*>( offset.constData() ); 
```

请注意，由于字节顺序，这很脆弱。由于结构对齐（填充），带有结构的 memcpy 也不能安全地移植。更好地使用[QDataStream](http://doc.qt.digia.com/qt/qdatastream.html)或类似[Boost 序列化](http://www.boost.org/doc/libs/1_52_0/libs/serialization/doc/index.html)或[Google Protocol Buffers](https://developers.google.com/protocol-buffers/)的东西来实现更强大的序列化。

# embedded - 令人沮丧的 FreeRTOS xQueueCreate() 限制

> ID：14449235
> 
> 赞同：2
> 
> 时间：2013-01-21T23:45:48.463
> 
> 标签：embedded, avr, freertos

我正在尝试使用 a`queue`将我的 UART ISR 中的字符缓冲到后台任务。我希望队列长度为 512 字节。不幸的是，这是不可能的，因为 size 参数的类型`unsigned portBASE_TYPE`对于 xmega256a3 来说是单字节 ( `char`)。队列的最大大小浮动是否有原因`portBASE_TYPE`？而不是uint16_t？

我很好奇其他人是否也遇到了同样的限制，如果有的话，他们做了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T00:12:20.837

Richard Barry（FreeRTOS 作者）在 FreeRTOS 邮件列表上发布了以下回复：

> 这仅适用于 8 位架构。它已经被提及过几次（您可以在 FreeRTOS 网站上搜索支持档案），但多年来没有提及，因为大多数新项目都使用 32 位架构。简单的做法是在 portmacro.h 中更改 portBASE_TYPE 的定义，但这会使您的代码更大且效率更低。
> 
> 顺便说一句，许多 FreeRTOS 演示使用队列将字符传入和传出中断，以提​​供任务和中断通信的简单示例，但除非吞吐量非常低（例如命令控制台），否则不推荐编写生产代码的方式。使用循环缓冲区，最好使用 DMA，效率更高。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T04:14:06.100

`portBASE_TYPE`出于效率原因，使用大多数变量是很自然的。AVR 是 8 位架构，因此处理 8 位队列算法比 16 位更有效。对于某些应用，这种效率可能很关键。

在 32 位架构上使用 a`uint16_t`没有意义，您会注意到`portBASE_TYPE`ARM 内核的 32 位值，因此选择 a`uint16_t`作为队列长度的默认类型将是对这些内核的人为限制。

这里有一些选项：

*   重构您的任务以更频繁地从队列中读取。除非其他任务占用太多处理时间，否则应该可以降低 ISR 队列长度并在读取线程中缓冲数据。
*   使用不同的`portBASE_TYPE`. 我还没有尝试过，但我看不出为什么这不起作用的原因，除非 FreeRTOS 中有一些需要 8 位的汇编代码`portBASE_TYPE`。我快速浏览了一下，没有看到任何明显的汇编代码需要 8 位类型的迹象。
*   使用您自己的队列库，该库能够存储您需要的尽可能多的数据。使用其他 FreeRTOS 原语（例如信号量）向您的任务发出数据已添加到队列中的信号。它不会阻塞在队列读取上，而是阻塞在信号量上。在信号量发出信号后，您将使用自己的排队库来读取排队的数据。

# xcode4.5 - symbolicatecrash 不起作用，因为 mdfind 什么也没找到

> ID：14449237
> 
> 赞同：5
> 
> 时间：2013-01-21T23:45:54.860
> 
> 标签：xcode4.5, symbolicatecrash

在 OSX Mountain Lion (10.8.2) 上运行 Xcode 4.5.2

我正在尝试符号化崩溃报告，但 symbolicatecrash 脚本总是失败。我实际上对应用程序符号并不感兴趣。我想要系统库符号，但它甚至找不到那些：

```
..fetching symbol file for UIKit--[undef] 
Searching []...-- NO MATCH
Searching in Spotlight for dsym with UUID of cd513a2f22f53d698c3e10f6fe48a63e
Running mdfind "com_apple_xcode_dsym_uuids == CD513A2F-22F5-3D69-8C3E-10F6FE48A63E"
@dsym_paths = (  )
@exec_names = (  )
Did not find executable for dsym
## Warning: Can't find any unstripped binary that matches version of /System/Library/Frameworks/UIKit.framework/UIKit 
```

具有该 UUID 的 UIKit.framework 确实存在：

```
$ pwd
/Users/karl/Library/Developer/Xcode/iOS DeviceSupport/5.1.1 (9B206)/Symbols/System/Library/Frameworks
$ dwarfdump --uuid UIKit.framework/UIKit 
UUID: CD513A2F-22F5-3D69-8C3E-10F6FE48A63E (armv7) UIKit.framework/UIKit 
```

但是，mdfind 拒绝看到它：

```
$ mdfind "com_apple_xcode_dsym_uuids == CD513A2F-22F5-3D69-8C3E-10F6FE48A63E"
$ 
```

即使使用 mdfind "com_apple_xcode_dsym_uuids == *" 搜索也不会在库目录或任何系统库/框架内给出任何结果；仅列出了我编译的应用程序中的 dSYM 文件。

如何修复 mdfind 以便它在搜索中包含系统库？

# android - Android在发送UDP数据包时抛出异常

> ID：14449238
> 
> 赞同：1
> 
> 时间：2013-01-21T23:45:54.917
> 
> 标签：android, udp, send, ping

我正在尝试向服务器发送一个 UDP 数据包以查看它是否在线。我已经制作了一个独立的应用程序来做到这一点，它可以毫无问题地工作，但是当将代码放入应用程序并调用函数时，它会在实际发送数据包时引发异常。我做了很多研究，我找不到任何原因。我用假IP替换了IP，因为我不想发布实际IP。感谢您的帮助。

```
import java.io.IOException;
import java.net.*;

import android.app.Activity;

public class CheckStatus extends Activity {
//Check if the server is online

public static boolean check() {

    try {
        byte[] receiveData = new byte[1024];
        InetAddress address = InetAddress.getByName("11.11.11.11");
        //create socket
        DatagramSocket clientSocket = new DatagramSocket();
        //set timeout
        clientSocket.setSoTimeout(1000);
        //send packet

        DatagramPacket p = new DatagramPacket(Integer.toBinaryString(0x0006000000).getBytes(), 5, address, 44462);

        clientSocket.send(p);//throws exception here

        DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
        clientSocket.receive(receivePacket);
        clientSocket.close();
        return true;
    } catch (Exception e) {
        return false;
    }
}

} 
```

打印异常时，我得到“android.os.NetworkOnMainThreadException”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T23:59:00.803

`asyncTask`在中声明它并从那里`activity`调用你的方法。`check()`

**编辑：**

```
private class CheckStatusTask extends AsyncTask<Object, Object, Boolean> {        
    protected Boolean doInBackground(Object... arg0) {
        boolean flag = check();
        return flag;
    }

    protected void onPostExecute(Boolean flag) {
       // use your flag here to check true/false.
    }       
} 
```

并打这个电话：

```
new CheckStatusTask().execute(); 
```

参考 ：

[无痛穿线](http://android-developers.blogspot.in/2009/05/painless-threading.html)

# javascript - IE9 忽略角对象（在 ngRepeat 内）

> ID：14449244
> 
> 赞同：2
> 
> 时间：2013-01-21T23:46:18.213
> 
> 标签：javascript, html, internet-explorer-9, angularjs

我有一个`ng-include`and`ng-controller`在一个`ng-repeat`中，当 IE 看​​到重复的子实例对象时，它会随机地把自己搞砸：

在 main.html 里面

```
<section ng-repeat="panel in sidepanels">
  <h2 class="twelve columns">
    <span class="twelve">
      <i class="icon {{panel.icon}}"></i> <!-- resolves properly -->
      {{panel.controller.name}} <!-- empty -->
    </span>
  </h2>
  <div
    ng-include src="'views/'+panel.controller.name.toLowerCase()+'.html'"
    ng-controller="panel.controller"
  ></div>
</section> 
```

在 controllers.js 中

```
function Main($scope) {
  …
  $scope.sidepanels = [
    {
      "controller": Alerts,
      "icon": "icon-warning-sign"
    }
  ];
  …
}

function Alerts($scope,WebSocket) {
  $scope.alerts = [];
  WebSocket.on('…', function(data) { … });
  WebSocket… //WebSocket is a Service
} 
```

除了在控制台中抛出错误之外，它只是默默地忽略了它有时无法解决的事实`panel`。我只注意到这种情况是因为我看到 GET 失败`views/.html`。

我检查了[MSDN](http://msdn.microsoft.com/en-us/library/ie/ms534187%28v=vs.85%29.aspx)，据说 IE 支持该`name`属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T01:25:02.963

该属性`name`不适用于 IE 上的功能。

您可以使用以下代码段来检索函数的名称（如此[处](https://stackoverflow.com/a/6903860/651480)所述）：

```
func.toString().match(/^function ([^(\s]+)/)[1] 
```

向控制器添加一个`Main`创建模板路径的函数，如下所示：

```
$scope.getTemplatePath= function(controller) {
    return 'views/' + angular.lowercase(controller.toString().match(/^function ([^(\s]+)/)[1] + '.html');    
}; 
```

在 HTML 上：

```
<div ng-include="getTemplatePath(panel.controller)" ng-controller="panel.controller"></div> 
```

**jsFiddle**：http: [//jsfiddle.net/bmleite/faGRk/](http://jsfiddle.net/bmleite/faGRk/)

# javascript - 将Unicode解码为javascript中的字符

> ID：14449245
> 
> 赞同：0
> 
> 时间：2013-01-21T23:46:35.687
> 
> 标签：javascript, utf-8, utf-16

我有以下 unicode 序列：

```
 d76cb9dd0020b370b2c8c758 
```

我随机尝试了非英文字符（对于这个实验，我尝试了韩语语言）作为上述 unicode 行的原件：

```
 희망 데니의 
```

如何将上述 unicode 序列解码为原始形式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T00:04:00.403

作为 JavaScript 字符串文字，使用以下命令转义十六进制代码`\u`：

```
var koreanString = "\ud76c\ub9dd\u0020\ub370\ub2c8\uc758"; 
```

或者直接在字符串中输入韩文字符：

```
var koreanString = "희망 데니의"; 
```

要处理表示 unicode 字符的十六进制字符串，请将十六进制字符串解析为数字并构建 unicode 字符串，使用`String.fromCharCode()`：

```
var hex = "d76cb9dd0020b370b2c8c758";
var koreanString = "";
for (var i = 0; i < hex.length; i += 4) {
    koreanString += String.fromCharCode(parseInt(hex.substring(i, 4), 16));
} 
```

**编辑：**`length`您可以通过访问其属性来获取任何字符串的长度：

```
var stringLength = koreanString.length; 
```

这将返回`6`。没有“英文”字符串。您有一个表示十六进制数字的字符串，而十六进制数字由拉丁字符集中的字符组成，但这些不是任何口语。它们只是数字。当然，您可以使用该`length`属性获取十六进制字符串的长度，但我不确定您为什么要这样做。使用数字数组而不是字符串会更直接：

```
var charCodes = [0xd76c, 0xb9dd, 0x0020, 0xb370, 0xb2c8, 0xc758];
var koreanString = String.fromCharCode.apply(null, charCodes); 
```

这样，`charCodes.length`将与 相同`koreanString.length`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T23:55:35.610

怎么样

```
var str = 'd76cb9dd0020b370b2c8c758';
str = '"'+str.replace(/([0-9a-z]{4})/g, '\\u$1')+'"';
alert(JSON.parse(str)); 
```

[**演示**](http://jsfiddle.net/mowglisanu/Y9uea/)

# javascript - 将按钮分配给颜色框

> ID：14449246
> 
> 赞同：0
> 
> 时间：2013-01-21T23:46:39.657
> 
> 标签：javascript, jquery, html, css

我有一个 Colorbox 锚标记，它打开一个带有外部 html 的框。

我想在该锚点上附加一个 CSS 按钮来操作 Colorbox 而不是文本，但是 CSS 按钮已经有一个锚点类..

我应该如何将按钮添加到颜色框锚点？

按钮和颜色框：

```
Button: <a href="#" class="lightbutton">Signup</a>
Colorbox: <p><a class='iframe' href="/comp/form.html">Click Here</a></p> 
```

JS：

```
<script>
            $(document).ready(function(){
                //Examples of how to assign the ColorBox event to elements
                $(".group1").colorbox({rel:'group1'});
                $(".group2").colorbox({rel:'group2', transition:"fade"});
                $(".group3").colorbox({rel:'group3', transition:"none", width:"75%", height:"75%"});
                $(".group4").colorbox({rel:'group4', slideshow:true});
                $(".ajax").colorbox();
                $(".youtube").colorbox({iframe:true, innerWidth:425, innerHeight:344});
                $(".vimeo").colorbox({iframe:true, innerWidth:500, innerHeight:409});
                $(".iframe").colorbox({iframe:true, width:"80%", height:"80%"});
                $(".inline").colorbox({inline:true, width:"50%"});
                $(".callbacks").colorbox({
                    onOpen:function(){ alert('onOpen: colorbox is about to open'); },
                    onLoad:function(){ alert('onLoad: colorbox has started to load the targeted content'); },
                    onComplete:function(){ alert('onComplete: colorbox has displayed the loaded content'); },
                    onCleanup:function(){ alert('onCleanup: colorbox has begun the close process'); },
                    onClosed:function(){ alert('onClosed: colorbox has completely closed'); }
                });

                //Example of preserving a JavaScript event for inline calls.
                $("#click").click(function(){ 
                    $('#click').css({"background-color":"#f00", "color":"#fff", "cursor":"inherit"}).text("Open this window again and this message will still be here.");
                    return false;
                });
            });
        </script> 
```

*   我没有添加按钮 css，因为我不认为它是相对的，如果是，请说明并添加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T23:48:58.187

您可以将多个类添加到同一个元素：

```
<a href="#" class="lightbutton someOtherClass">Signup</a> 
```

两个类的样式都将被应用。如果样式冲突，将应用来自最强选择器的规则。

# c# - 如何在模型中包含用户

> ID：14449252
> 
> 赞同：0
> 
> 时间：2013-01-21T23:47:03.247
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-4

我想在我的模型中有一个用户。用户我的意思是拥有用户名的东西。电子邮件和其他东西也很好。

我试过这样：

模型：

```
public class MyModel
{
    public virtual MembershipUser Finder { get; set; }
    ...
} 
```

控制器：

```
[HttpPost]
        public ActionResult Create(MyModel mymodel)
        {
            if (ModelState.IsValid)
            {
                //mymodel.FinderId = Membership.GetUser(User.Identity.Name).ProviderUserKey;
                mymodel.Finder = Membership.GetUser(User.Identity.Name);
                _repo.Save(mymodel);
                return RedirectToAction("Index");  
            }

            return View(mymodel);
        } 
```

而不是在一个视图中：

```
@Html.DisplayFor(modelItem => item.Finder.UserName) 
```

在控制器中，poperty UserName 在视图中设置为“admin”，它为空。另一方面，在控制器和视图中都设置了电子邮件。

我究竟做错了什么？

# sql - 使用 Teradata 中的 varchar 列进行日期范围比较

> ID：14449253
> 
> 赞同：0
> 
> 时间：2013-01-21T23:47:03.650
> 
> 标签：sql, coldfusion, teradata

我的任务是从表单前端获取日历日期范围值，并使用它在没有日期时间列的 Teradata 表中提供查询。相反，日期是从两个 varchar 列聚合的：一个用于年份（CY = 当前年份，LY = 去年，LY-1 等），另一个用于格式为 MonDD 的日期（如 Jan13、Dec08 等）。

我将 Coldfusion 用于表单和结果页面，因此我有能力动态创建查询，但我想不出一种适用于所有可能情况的好方法。有任何想法吗？即使撇开年份差异不谈，除了查询中可能存在大量单独的 OR 语句的范围内的每一天的直接比较之外，我想不出任何东西。我对 SQL 知识很了解——也许有更好的方法在 SQL 本身中编写脚本，使用两个 varchar 列上的某种转换来形成一个实际的日期范围，然后可以在其中进行日期比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:03:02.063

下面是一些 SQL，它将获取`VARCHAR`日期值并对其执行一些基本操作以帮助您入门：

```
SELECT CAST(CAST('Jan18'||TRIM(EXTRACT(YEAR FROM CURRENT_DATE)) AS CHAR(9)) AS DATE FORMAT 'MMMDDYYYY') AS BaseDate_
     , CASE WHEN Col1 = 'CY'
            THEN BaseDate_
            WHEN Col1 = 'LY'
            THEN ADD_MONTHS(BaseDate_, -12)
            WHEN Col1 = 'LY-1'
            THEN ADD_MONTHS(BaseDate_, -24)
            ELSE BaseDate_
       END AS DateModified_
  FROM {MyDB}.{MyTable}; 
```

该`EXTRACT()`函数允许您拆分`DATE`、`TIME`或`TIMESTAMP`值。你有你使用`TRIM()`周围`EXTRACT`来摆脱添加转换`DATEPART`为`CHAR`数据类型的空白。Teradata 的日期很有趣，通常需要双精度`CAST()`才能将事情整理好。

该`CASE`语句仅采用您建议将使用的编码值并使用该`ADD_MONTHS()`函数来操作日期。日期`INTEGER`位于 Teradata 中，因此您还可以`INTEGER`向它们添加值以将日期移动一整天。与 Oracle 不同，您不能添加小数值来操作`TIME`. !=在 Teradata 中。`TIMESTAMP``DATE``TIMESTAMP`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T01:20:35.853

Rob 给了你一个 sql 方法。或者，您可以使用 ColdFusion 为您拥有的列生成值。这样的事情可能会奏效。

```
sampleDate = CreateDate(2010,4,12);  // this simulates user input

if (year(sampleDate) is year(now())
    col1Value = 'CY';
else if (year(now()) - year(sampleDate) is 1)
    col1Value = 'LY'
else
    col1Value = 'LY-' & DateDiff("yyyy", sampleDate, now());

col2Value = DateFormat(sampleDate, 'mmmdd'); 
```

然后您将 col1Value 和 col2Value 作为参数发送到您的查询。

# c# - 如何让 WPF/MVVM 应用程序在显示窗口之前进行后台处理？

> ID：14449254
> 
> 赞同：0
> 
> 时间：2013-01-21T23:47:05.567
> 
> 标签：c#, wpf, mvvm

我对 WPF 和 MVVM 相当陌生。我创建了几个标准的简单 WPF/MVVM 应用程序，它们显示启动屏幕并根据主窗口中的命令进行处理，包括显示其他用户控件。

但是现在我想制作一个 WPF/MVVM 监视/输入收集应用程序，它在不显示窗口的情况下启动，循环检查系统状态，直到条件需要显示窗口，然后才显示一个窗口，然后处理用户输入和回到循环。用户不会等待这个窗口，因为它只在有需要用户注意的事情时显示。它会“永远”在后台运行，只在需要时才显示自己。

我看到我可以制作自己的 Main() 方法，但我仍然无法找出将其保留在 MVVM 中的最佳方法，但只能在更大的循环中根据需要显示窗口。

谢谢！

编辑——我们终于做了理智的事情，做了两个不同的过程，一个做监控，一个做 WPFing。谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:00:22.757

Windows 服务似乎是进行监控的最佳方式。只要需要用户交互，您就可以向“世界”的其他地方发出信号，表明发生了某些事情。

WPF 客户端可以接收信号并显示 UI。可以使用 NotifyICon 隐藏 WPF 客户端。

MVVM 仅适用于 WPF 客户端。模型包含被监视的状态，视图模型将其转换为视图的模型，视图显示信息。

信号可以是由服务设置并由 WPF 客户端测试的[Mutex 。](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)服务和客户端之间的通信可以使用 WCF 来实现。

# matlab - Matlab中包含未知常数的矩阵的简化行梯队

> ID：14449255
> 
> 赞同：3
> 
> 时间：2013-01-21T23:47:05.810
> 
> 标签：matlab, matrix, symbolic-math

问题：

```
 >> syms('a', 'b', 'c');

    >>A =

    [ -2, 3,  1, a]
    [  1, 1, -1, b]
    [  0, 5, -1, c]

    >>rref(A)

    ans =

    [ 1, 0, -4/5, 0]
    [ 0, 1, -1/5, 0]
    [ 0, 0,    0, 1] 
```

我遇到的问题是我需要用 ab 和 c 来回答，所以我需要类似的东西：

```
 ans =
    [1, 0, 0, a+2b-c]
    [0, 1, 0, 3a-c]
    [0, 0, 1, a+b+c] 
```

有什么方法可以让 Matlab 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T01:35:40.597

您只需要将问题转换为相关的形式以便`rref`正确使用，即，而不是：

```
[1, 0, 0, a+2b-c]
[0, 1, 0, 3a-c]
[0, 0, 1, a+b+c] 
```

其中 x,y,z 形成单位矩阵块，写：

```
 syms x y z
 D =
[ 1, 2, -1, x]
[ 3, 0, -1, y]
[ 1, 1,  1, z]

rref(D)
ans =
[ 1, 0, 0,     (3*y)/10 - x/10 + z/5]
[ 0, 1, 0,       (2*x)/5 - y/5 + z/5]
[ 0, 0, 1, (3*z)/5 - y/10 - (3*x)/10] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-24T03:54:28.463

您想要为您提供 rref(A) 的消除矩阵。

但是什么是 rref(A)？

UpperTri=rref(A)=[LastStep]...[Step3][Step2][Step1]*A。

这是一系列步骤，可将 A 简化为上三角形或可能的最佳三角形。

Matlab有，

```
[ 1, 0, -4/5, (3*b)/5 - a/5]
[ 0, 1, -1/5, a/5 + (2*b)/5]
[ 0, 0,    0,             1] 
```

然后Matlab只是把它卷起来，你不再有步骤了。所以它显示为：

```
 [ 1, 0, -4/5, 0]
    [ 0, 1, -1/5, 0]
    [ 0, 0,    0, 1] 
```

如果你想要一系列步骤，你想要带有一系列步骤的消除矩阵，所以使用单位矩阵记录它。代替：

```
A = 
[ -2, 3,  1, a]
[  1, 1, -1, b]
[  0, 5, -1, c] 
```

利用

```
>>  A = [ -2, 3,  1, 1 0 0; 1, 1, -1, 0 1 0;  0, 5, -1, 0 0 1]

A =

    -2     3     1     1     0     0
     1     1    -1     0     1     0
     0     5    -1     0     0     1

>> E=rref(A)

E =

    1.0000         0   -0.8000         0    1.0000   -0.2000
         0    1.0000   -0.2000         0         0    0.2000
         0         0         0    1.0000    2.0000   -1.0000 
```

这就像 [A][I]，现在 [rref Steps matrix]*[A][I]=[rref(A)][rref Steps matrix]

现在 E=[rref(A)][rref Steps matrix] =

```
 E =

        1.0000         0   -0.8000         0    1.0000   -0.2000
             0    1.0000   -0.2000         0         0    0.2000
             0         0         0    1.0000    2.0000   -1.0000 
```

通过检查 E1=[rref Steps matrix]=

```
E1 =

         0    1.0000   -0.2000
         0         0    0.2000
    1.0000    2.0000   -1.0000 
```

所以现在：

```
E1 =

         0    1.0000   -0.2000
         0         0    0.2000
    1.0000    2.0000   -1.0000

>> B=[a;b;c;]

B =

 a
 b
 c

>> B1=E1*B

B1 =

     b - c/5
         c/5
 a + 2*b - c 
```

去检查：

```
A1 = [ -2, 3,  1, a; 1, 1, -1, b;  0, 5, -1, c]

A1 =

[ -2, 3,  1, a]
[  1, 1, -1, b]
[  0, 5, -1, c]

>> A2=E1*A1

A2 =

[ 1, 0, -4/5,     b - c/5]
[ 0, 1, -1/5,         c/5]
[ 0, 0,    0, a + 2*b - c] 
```

注意 a + 2b - c =0，因此 c=a+2b，因此 sub c，(c/5)= ((a+2b)/5)，并且 (bc/5)=(5b-(a+2b) ))/5

所以

```
[(-a+3*b)/5; (a+2*b)/5; a + 2*b - c ] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-02T21:00:36.900

Matlab 实际上为您的示例给出了正确答案，这似乎令人惊讶，因为它不依赖于`a`,`b`或`c`; 如果您使用另一个示例，例如

```
B = [1, 2, a; 2, 1, b];
rref(B) 
```

`a`那么答案将取决于`b`预期。

* * *

这里我只是解释一下为什么你的缩减排梯队形式`A`确实是

```
[ 1, 0, -4/5, 0]
[ 0, 1, -1/5, 0]
[ 0, 0,    0, 1] 
```

通过展示行缩减的一些重要步骤。Matlab 以 开头`A`，并将其简化为

```
[ 1, 0, -4/5, (3*b)/5 - a/5]
[ 0, 1, -1/5, a/5 + (2*b)/5]
[ 0, 0,    0,   a + 2*b - c] 
```

然后它将最后一行除以 (a + 2*b - c) 得到

```
[ 1, 0, -4/5, (3*b)/5 - a/5]
[ 0, 1, -1/5, a/5 + (2*b)/5]
[ 0, 0,    0,             1] 
```

然后它继续从它上面的行中减去该行以给出

```
[ 1, 0, -4/5, 0]
[ 0, 1, -1/5, 0]
[ 0, 0,    0, 1] 
```

Matlab 假设`a + 2*b - c`不等于 0（尝试用 替换`c`，`a + 2*b`然后`rref(A)`会给你不同的答案）。我知道没有办法强制 Matlab 不除以`a + 2*b - c`，即让 Matlab 假设`a + 2*b + c`可能等于零。

# php - 如何在代码点火器中执行选择查询

> ID：14449260
> 
> 赞同：0
> 
> 时间：2013-01-21T23:48:20.023
> 
> 标签：php, mysql, codeigniter, select

我刚开始使用 CodeIgniter 并想执行下面的查询。但我不知道如何使用 CodeIgniter 编写此代码。此查询在 phpMyAdmin 中成功执行。

```
 SELECT sales.sales_id
       , sales.sales_date
       , sold_item.item_id
       , sold_item.quantity
       , general_sales.cust_id
 FROM sales 
        JOIN general_sales ON sales.sales_id =general_sales.general_sales_id
        JOIN sold_item ON general_sales.general_sales_id= sold_item.sales_id
 WHERE sales_date= ? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T23:53:06.987

使用此代码，其中 $date 是您要查找的日期

```
$query = $this->db
->select("sales.sales_id,sales.sales_date,sold_item.item_id,sold_item.quantity,general_sales.cust_id")
->from("sales")
->join("general_sales", "sales.sales_id =general_sales.general_sales_id")
->join("sold_items", "general_sales.general_sales_id= sold_item.sales_id")
->where("sales_date", $date)
->get(); 
```

然后你可以使用例如结果`$query->result_array()`

# java - 如何使用 JDT 获取封闭方法节点？

> ID：14449262
> 
> 赞同：4
> 
> 时间：2013-01-21T23:48:31.553
> 
> 标签：java, eclipse, eclipse-jdt

当我有一个调用 bar() 的方法 foo() 时，如何从 MethodInvocation 节点（或方法中的任何语句/表达式）获取 foo() AST 节点？例如，我需要知道来自 b.bar() 的 IMethod foo。

```
public void foo()
{
    b.bar();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T02:30:12.713

我想出了这段代码，但我希望有更好的方法来获得结果。

```
public static IMethod getMethodThatInvokesThisMethod(MethodInvocation node) {
    ASTNode parentNode = node.getParent();
    while (parentNode.getNodeType() != ASTNode.METHOD_DECLARATION) {
        parentNode = parentNode.getParent();
    }

    MethodDeclaration md = (MethodDeclaration) parentNode;
    IBinding binding = md.resolveBinding();
    return (IMethod)binding.getJavaElement();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T07:07:52.453

在 JDT/UI 中，我们有一个辅助方法来执行此操作。看一眼`org.eclipse.jdt.internal.corext.dom.ASTNodes.getParent(ASTNode, int)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T20:34:37.280

另一个技巧可能是让访问者在访问 MethodInvocation 节点之前存储调用者信息：

```
ASTVisitor visitor = new ASTVisitor() {
    public boolean visit(MethodDeclaration node) {
        String caller = node.getName().toString();
        System.out.println("CALLER: " + caller);

        return true;
    }
    public boolean visit(MethodInvocation node) {
        String methodName = node.getName().toString();
        System.out.println("INVOKE: " + methodName); 
```

使用另一个类类型：

```
public class AnotherClass {

    public int getValue()
    {
        return 10;
    }

    public int moved(int x, int y)
    {
        if (x > 30)
            return getValue();
        else
            return getValue();
    }
} 
```

我可以得到以下信息：

```
TYPE(CLASS): AnotherClass
CALLER: getValue
CALLER: moved
INVOKE: getValue
INVOKE: getValue 
```

# php - 遍历日期并获得两个日期之间的最小天差

> ID：14449263
> 
> 赞同：0
> 
> 时间：2013-01-21T23:48:53.050
> 
> 标签：php, mysql, datetime, web-applications

你好这是我今年第一次提问。请帮帮我，我求你了。

我有这个有 startdate 和 enddate 的预订表，现在我想遍历它们并记下它们与我当前日期预订的不同间隔。在我得到所有不同的间隔之后，我还想遍历那个间隔并获得可能的或最近的一天。

最近的一天是`0(enddate == startdate)`因为入住时间是固定的。

假设在同一个房间里预订了一堆日期。

```
bookingstart = '2013-02-5 14:00:00' bookingend = '2013-02-7 14:00:00'
bookingstart = '2013-02-13 14:00:00' bookingend = '2013-02-16 14:00:00'
bookingstart = '2013-01-22 14:00:00' bookingend = '2013-02-23 14:00:00' 
```

现在初始代码如下所示：

```
$newbookingstart = '2013-01-24 14:00:00'
$newbookingend = '2013-01-27 14:00:00';

$sql = mysql_query("SELECT enddate, startdate FROM reservation WHERE rmlocation = 'RM24'");
if (!$sql) {
exit('Error: ' . mysql_error());
}

$diffInterval = array();

while ($row = mysql_fetch_array($sql)) {

if ($row['enddate'] >= $newbookingstart && $newbookingend <= $row['stardate']) {
    $diffInterval .= $row['startdate'] . $row['enddate'] . $row['rmlocation'];
}

}
//Get the $diffInterval, traverse and get the lowest date interval posible 
```

我的问题是如何正确获取这些代码，尤其是在获取数据库中的数据时。如何改进我在同一个房间中搜索所有其他结束日期和开始日期的搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T23:58:55.840

如果您使用 MySQL DateTime 字段，它应该能够将您从 DB 获取的字符串转换为您可以计算的内容，例如 strtotime 和 PHP 的其他日期函数。

其他可能性是直接在 SQL 中计算。

# mysql - drupal界面中的数据库用户警告

> ID：14449264
> 
> 赞同：0
> 
> 时间：2013-01-21T23:48:54.443
> 
> 标签：mysql, drupal, drupal-6

这是警告：

用户警告：“where 子句”查询中的未知列“student2”：SELECT first, last, id FROM sgp_student_log WHERE username1 =student2 in .../public_html/includes/common.inc(1731) : eval()'d code on第 18 行。

这是代码：

```
<?
global $user;
$rus = db_query("SELECT first, last, id FROM {student_log} WHERE username1 =%s", $user->name); 
$ruw = db_fetch_array($rus);
print_r($ruw);
?> 
```

当然，像下面这样的东西会起作用

```
<?
global $user;
$res = db_query("SELECT first, last, id FROM {student_log} WHERE username1 ='student2'"); 
$row = db_fetch_array($res);
print_r($row);
?> 
```

# java - 用多行遍历字符串

> ID：14449266
> 
> 赞同：7
> 
> 时间：2013-01-21T23:49:02.673
> 
> 标签：java, string, groovy, loops

我得到了一些数据：

```
def data = "# some useless text\n"+
        "# even more\n"+
        "finally interesting text" 
```

我怎样才能得到其中的“有趣的部分”？所以基本上所有的行，不以#开头。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T00:14:26.970

一个 Groovy 选项是：

```
def data = '''# some useless text
             |# even more
             |finally interesting text'''.stripMargin()

List lines = data.split( '\n' ).findAll { !it.startsWith( '#' ) }

assert lines == [ 'finally interesting text' ] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-03-31T20:10:41.307

```
data.eachLine {
    if (!it.startsWith( '#' )
        println it
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-22T00:05:08.653

使用[split 方法](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)获取子字符串，然后检查每个子字符串是否以“#”开头。例如：

```
String[] splitData = data.split("\n");
for (String eachSplit : splitData) {
  if (!eachSplit.startWith("#")) {
    print(eachSplit);
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T00:03:28.380

如何通过[split 函数用 \n 字符分割字符串](http://javarevisited.blogspot.co.uk/2011/09/string-split-example-in-java-tutorial.html)

现在你可以测试每个字符串是否以 # 开头`String.startsWith("#") .`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T18:38:17.767

这是使用 Groovy 的元编程功能 ( [http://groovy.codehaus.org/JN3525-MetaClasses](http://groovy.codehaus.org/JN3525-MetaClasses) ) 的解决方案：

```
def data = "# some useless text\n"+
    "# even more\n"+
    "finally interesting text"

String.metaClass.collectLines = { it ->
    delegate.split('\n').findAll it
}

def result = data.collectLines{ !it.startsWith( '#' )}

assert result == ["finally interesting text"] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T00:03:44.487

我会根据换行符 (\n) 拆分字符串，然后忽略以“#”开头的行。

```
String[] lines = data.split("\n");
for (String line : lines) {
    if (line.startsWith("#") {
        continue;
    }
    //Do stuff with the important part
} 
```

请注意，这是纯 Java。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-22T00:40:17.807

不需要将输入字符串转换为列表的基于正则表达式的解决方案是：

```
def data = '''\
# some useless text
# even more
finally interesting text'''

assert data.replaceAll(/#.*\n/, '') == 'finally interesting text' 
```

如果您仍然需要将输入拆分为行，您仍然可以使用正则表达式，使用以下[`Collection#grep`](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#grep%28java.lang.Object%29)方法：

```
assert data.split('\n').grep(~/[^#].*/) == ['finally interesting text'] 
```

PS：正则表达式 FTW！=P

# objective-c - cellForRowAtIndexPath 中的 NSStringFromClass 性能

> ID：14449271
> 
> 赞同：1
> 
> 时间：2013-01-21T23:49:57.907
> 
> 标签：objective-c, performance, uitableview

在某处`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {`：

```
static NSString *CellIdentifier = @"TagCell";
TagCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier
                                                forIndexPath:indexPath]; 
```

对比

```
NSString *CellIdentifier = NSStringFromClass([TagCell class]);
TagCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier
                                                forIndexPath:indexPath]; 
```

我认为第一个示例的性能更好，但第二个示例更适合重构。

我总是使用第二种方式。

这些代码示例之间的性能差异很大吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-08-05T07:51:19.020

```
 #define MacroStringFromClass(class) (@""#class)
    #define loopcout 1000000

    - (void)viewDidLoad {
        [super viewDidLoad];
        // Do any additional setup after loading the view, typically from a nib.

        [self loopForMacro];
        [self loopForString];
        [self loopForNSStringFromClass];
        [self loopForMacro];
        [self loopForString];
        [self loopForNSStringFromClass];
        [self loopForMacro];
        [self loopForString];
        [self loopForNSStringFromClass];

    }
    - (void)loopForMacro{
        NSDate *startDate = [NSDate date];
        NSMutableString *str = [NSMutableString string];
        for (int i = 0; i < loopcout; i++) {
            [str appendString:MacroStringFromClass(ViewController)];
        }
        NSTimeInterval cost = [[NSDate date]timeIntervalSinceDate:startDate];
        NSLog(@"loopForMacro cost:%f",cost);
    }

    - (void)loopForString{
        NSDate *startDate = [NSDate date];
        NSMutableString *str = [NSMutableString string];
        for (int i = 0; i < loopcout; i++) {
            [str appendString:@"ViewController"];
        }
        NSTimeInterval cost = [[NSDate date]timeIntervalSinceDate:startDate];
        NSLog(@"loopForString cost:%f",cost);
    }

    - (void)loopForNSStringFromClass{
        NSDate *startDate = [NSDate date];
        NSMutableString *str = [NSMutableString string];
        for (int i = 0; i < loopcout; i++) {
            [str appendString:NSStringFromClass([ViewController class])];
        }
        NSTimeInterval cost = [[NSDate date]timeIntervalSinceDate:startDate];
        NSLog(@"loopForNSStringFromClass cost:%f",cost);
    } 
```

结果：

```
2016-08-05 15:42:55.804 NSStringFromClassTest[40193:22217987] loopForMacro cost:0.092388
2016-08-05 15:42:55.919 NSStringFromClassTest[40193:22217987] loopForString cost:0.112828
2016-08-05 15:42:56.283 NSStringFromClassTest[40193:22217987] loopForNSStringFromClass cost:0.362415
2016-08-05 15:42:56.362 NSStringFromClassTest[40193:22217987] loopForMacro cost:0.076543
2016-08-05 15:42:56.440 NSStringFromClassTest[40193:22217987] loopForString cost:0.076628
2016-08-05 15:42:56.801 NSStringFromClassTest[40193:22217987] loopForNSStringFromClass cost:0.359302
2016-08-05 15:42:56.877 NSStringFromClassTest[40193:22217987] loopForMacro cost:0.074724
2016-08-05 15:42:56.953 NSStringFromClassTest[40193:22217987] loopForString cost:0.074211
2016-08-05 15:42:57.312 NSStringFromClassTest[40193:22217987] loopForNSStringFromClass cost:0.356701 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T23:54:40.173

两者之间没有明显的性能差异，因为单元格的渲染以绘制为主，而不是获取类名。您的第二个代码片段可以更好地进行重构，因此您应该继续使用它。

# ios - 我在哪里可以下载 iOS 5 SDK？

> ID：14449272
> 
> 赞同：-1
> 
> 时间：2013-01-21T23:50:00.433
> 
> 标签：ios, ios5, sdk

我无法在苹果应用商店中找到 iOS 5 SDK。我还能从哪里下载它？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-22T00:00:38.477

如果您只希望能够支持旧版本的 iOS，请将部署目标设置为您希望应用程序运行的最低操作系统。您不需要旧的 SDK。

# css - 使用 CSS 的三面板布局

> ID：14449274
> 
> 赞同：0
> 
> 时间：2013-01-21T23:50:09.220
> 
> 标签：css

是否可以单独使用 CSS 构建这样的布局？

我使用 jQuery 和 CSS 的组合多次构建了这种样式布局。计算页面宽度并扣除元素宽度和高度。在resize事件中重新计算这些宽度和高度，但就是感觉很脏，在移动设备上也不是很流畅。

![3 面板布局](../Images/cd78a87eab8b93d80649fed538e07b55.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T23:53:32.913

试试这个：（假设`<div id="box1">`, `<div id="box2">`, `<div id="box3">`）

```
#box1, #box2, #box3 {
    position: fixed;
    left:0; top:0; right:0; bottom:0;
    padding:20px;
}
#box1 {
    bottom:80%; /* 100 - 20 */
    border: 5px solid blue;
}
#box2 {
    top:20%;
    right:70%; /* 100 - 30 */
    border: 5px solid red;
}
#box3 {
    top:20%;
    left:30%;
    border: 5px solid lime;
} 
```

# android - Windows 64 位操作系统上的 32 位或 64 位 Android SDK？

> ID：14449279
> 
> 赞同：22
> 
> 时间：2013-01-21T23:51:09.343
> 
> 标签：android, windows, sdk

安装用于 Android 开发的开发机器。64位Win7，即将升级到Win8，16GB RAM。现在在android下载处选择：

```
64bit or 32bit Android SDK? 
```

达夫曼应该怎么做？似乎这里的大多数人都选择 64 位版本，但有支持/反对的论据吗？安装无忧？

编辑

发布此问题是因为我想将 JetBrains IntelliJ 与 SDK 一起设置。原因是我过去不喜欢 Eclipse。因此，当我在下载时遇到 32/64 问题时，我不确定并进行了研究。结果是依赖于 32/64 位版本有很多麻烦。最后，我尝试了当前的 Eclipse/ADT 版本并让它快速运行。我得到了 Jetbrains 人的大力支持，但最终没有遵循这条路线，因为 Eclipse 工具集刚刚工作。

编辑 29.7.2013

**64 位版本的 Eclipse 工作得很好**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-22T02:28:11.147

您应该使用 ADT Bundle 安装（有 64 位版本）。这是超级简化的，是 ADT 21 版本中的新增功能。

在这里找到它：http: [//developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

您需要的一切都包含在捆绑包中，这使事情变得非常容易。

最重要的是，使用 64 位，并使用 ADT 捆绑包，这应该很容易，并且会导致标准安装。

# c - GetSaveFileName() 如何更新“文件名：”控件中的文件扩展名？

> ID：14449280
> 
> 赞同：1
> 
> 时间：2013-01-21T23:51:18.973
> 
> 标签：c, winapi, visual-c++-6

我有以下代码（提取）来显示另存为对话框：

```
char FileName[MAX_PATH] = "TestImage.jpg"

...

lpofn.lStructSize = sizeof(OPENFILENAME);
lpofn.hwndOwner = hWnd;
lpofn.hInstance = GetWindowInstance (hWnd);
lpofn.lpstrFilter = "JPG - JPEG File\0*.JPG\0TIF - TIFF File\0*.TIF\0PNG File\0*.PNG\0BMP - Bitmat File\0*.BMP\0";
lpofn.lpstrCustomFilter = NULL;
lpofn.nMaxCustFilter = NULL;
lpofn.nFilterIndex = 0;
lpofn.lpstrFile = FileName;
lpofn.nMaxFile = MAX_PATH;
lpofn.lpstrFileTitle = NULL;
lpofn.nMaxFileTitle = NULL;
lpofn.lpstrInitialDir = NULL;
lpofn.lpstrTitle = NULL;
lpofn.Flags = OFN_HIDEREADONLY | OFN_ENABLEHOOK | OFN_EXPLORER;
lpofn.nFileOffset = 0;
lpofn.nFileExtension = 0;
lpofn.lpstrDefExt = NULL;
lpofn.lCustData = NULL;
lpofn.lpfnHook = &UpdateFilename;
lpofn.lpTemplateName = NULL;
if(!GetSaveFileName(&lpofn)) return;

... 
```

例如。- 用户保存为，默认文件名 =“TestImage.jpg”，默认文件类型 = JPG - 用户将文件类型更改为 PNG，文件名控制保持在“TestImage.jpg”而不是更改为“TestImage.png”

难道我做错了什么？是否可以指示 GetSaveFileName() 更改扩展名，或者我是否必须有一个自定义另存为对话框（任何示例？）

我正在使用 Win32 API，VC6。

**更新：**这是 Hook 函数：

```
UINT CALLBACK UpdateFilename(HWND hdlg, UINT uiMsg, WPARAM wParam, LPARAM lParam)
{
    switch (uiMsg)
    {
         case WM_NOTIFY:
          // Check for CDN_TYPECHANGE etc
              return FALSE;
    }

    return FALSE;
} 
```

请注意，钩子函数确实会在断点处停止。我故意不继续处理 CDN_TYPECHANGE，直到我弄清楚为什么启用钩子时对话框的外观会发生变化以及如何修复它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T00:14:11.523

为建议的文件名使用缓冲区，而不是静态字符串。

```
char szFile[MAX_PATH]; 
szFile[0] = '\0';
lpofn.lpstrFile= szFile; 
lpofn.nMaxFile = sizeof(szFile)/ sizeof(*szFile); 
```

除此之外，这是一个默认的 Windows 行为，可以追溯到 Win95 天。当您使用 VS6.0 时，您仍然拥有这些 DLL。我当时所做的是使用：

```
lpofn.lpstrDefExt = (LPSTR)NULL 
```

这可以防止添加任何扩展。然后我在返回时检查了**lpofn.nFileExtension**以找出选择了哪个扩展名。

```
if (lpofn.nFileExtension == 0)
{
// add default extension, no extension was selected/entered by user
}
else
{
 // there is an extension, save as entered.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T03:25:06.097

为了在对话框仍在运行时更新对话框，您需要在结构中提供指向`lpfnHook`回调的指针`OPENFILENAME`，并让回调处理[`CDN_TYPECHANGE`](http://msdn.microsoft.com/en-us/library/ms646868.aspx)通知。它可以发送对话框 a[`CDM_GETFILEPATH`](http://msdn.microsoft.com/en-us/library/ms646847.aspx)或[`CDM_GETSPEC`](http://msdn.microsoft.com/en-us/library/ms646852.aspx)消息以获取当前文件名，根据需要对其进行调整，然后发送[`CDM_SETCONTROLTEXT`](http://msdn.microsoft.com/en-us/library/ms646855.aspx)消息以使用新值更新编辑字段（文件名编辑字段的 ID 为`0x442`）。

**更新**：您的挂钩代码没有任何问题。 `GetSaveFileName()`从 Windows Vista 开始不推荐使用，取而代之的是（并成为包装）[Common Item Dialog](http://msdn.microsoft.com/en-us/library/bb776913.aspx)。GSFN 对话框 UI 不会被 XP 中的挂钩更改，因此您必须使用 Vista+，在这种情况下启用挂钩只会导致包装器在内部调用 CID 时使用不同的设置。许多新的 CID 功能基于 .[`IShellItem`](http://msdn.microsoft.com/en-us/library/bb761144.aspx)而不是文件名字符串，因此包装器删除了不能表示为旧样式文件名的任何内容，并使对话框看起来像 XP 和更早版本中的旧样式 GSFN 对话框。所以你看到的是在 Vista+ 下的**正常行为！**`GetSaveFileName()`如果您不喜欢它，请不要再使用它`GetSaveFileName()`。使用新的[`IFileSaveDialog`](http://msdn.microsoft.com/en-us/library/bb775688.aspx)而是界面。事实上，如果您配置多种文件类型，将其中一种指定为默认扩展名，然后设置与默认扩展名匹配的初始文件名，它会为您本机更改文件扩展名。但是，如果您愿意，您也可以[`IFileDialogEvents`](http://msdn.microsoft.com/en-us/library/bb775876.aspx)在代码中实现该接口以接收[`OnTypeChange`](http://msdn.microsoft.com/en-us/library/bb775885.aspx)通知，然后使用该[`IFileDialog::SetFileName()`](http://msdn.microsoft.com/en-us/library/bb775974.aspx)方法根据需要更新显示的文件名。

# perl - Perl eval 命令未按预期工作

> ID：14449281
> 
> 赞同：1
> 
> 时间：2013-01-21T23:51:20.623
> 
> 标签：perl, eval

我有一种 perl “终端”（[pastebin 代码](http://pastebin.com/xwp48zVy)），我们称之为我编写的，编写它背后的想法是我想逐行运行 perl 代码，允许我在现有的（大) 数据集，而无需更改脚本并重新加载数据集并重新运行我的脚本。

（请注意，我大约一年前写了这篇文章，它主要是一个学习实验（使用动态功能平板电脑），但是现在我对它有一些用处，并发现了一些阻碍我使用它的问题。）

因此，我`eval`用户输入了命令，但是，它们的行为与预期不同，也许有人可以解释为什么会这样。

这是“重要”位，我将命令行数据存储在 中`@args`，其中的第一个元素存储在`$prog`. 我检查是否存在现有函数（我允许用户创建函数，并且真的滥用引用来获取操作表）如果没有，我尝试评估命令。

```
if(exists($actions{$prog})){
        print "\n";
        $actions{$prog}->(@args);
        print "\n";
}else{
        print "\nEVALing '$command'\n";
        eval $command;
        warn $@ if $@;
        print "\n";
} 
```

如下所示，它在分配标量时按预期工作，但在分配数组和散列时失败。

```
user@host:~/$ perl term.pl 
1358811935>$a = 0;
EVALing '$a = 0;'

1358811937>print $a;
EVALing 'print $a;'
0
1358811944>@b = qw(2 3);                                                                                                      
EVALing '@b = qw(2 3);'
Global symbol "@b" requires explicit package name at (eval 5) line 1.

1358811945>print @b;
EVALing 'print @b;'
Global symbol "@b" requires explicit package name at (eval 6) line 1.

1358812008>my @b = qw(2 3);                                                                                                   
EVALing 'my @b = qw(2 3);'

1358812008>print "@b";
EVALing 'print "@b";'
Possible unintended interpolation of @b in string at (eval 9) line 1.
Global symbol "@b" requires explicit package name at (eval 9) line 1.

1358812016>print join(',',@b);                                                                                                
EVALing 'print join(',',@b);'
Global symbol "@b" requires explicit package name at (eval 10) line 1.

1358812018> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T23:54:22.697

变量`$a`和`$b`是特殊的，因为它们被`sort`. 因此，`strict`如果没有申报，也不会抱怨。使用`$x`会触发与数组和哈希相同的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T00:00:59.880

对于这种事情，您可能希望通过说来允许使用任意包变量`no strict 'vars';`。在 eval'd 代码中声明一个词法（我的）变量将起作用，但将不再在下一个 eval 的范围内。

或者，预先声明一组变量供 eval'd 代码使用（可能包括 %misc 哈希）。

一种完全不同的方法是每次通过 eval 连接到目前为止输入的所有代码（如果打印输出是一个因素，则将输出重定向到最近输入的代码）。

# ios - UICollectionViewFlowLayout 与子类化 UICollectionViewLayout

> ID：14449283
> 
> 赞同：16
> 
> 时间：2013-01-21T23:51:49.033
> 
> 标签：ios, uicollectionview, uicollectionviewlayout

我知道记录在案的建议是使用 UICollectionView *Flow* Layout 如果您正在做任何“像网格或基于行的中断布局”。但是，我不确定这是否适用于我的情况。

我想要一个网格，但**不**想要一个换行的布局。物品应该在水平和垂直方向上无限地布置，而无需堆叠。本质上，如果内容超出框架，则可以水平或垂直滚动​​的巨型棋盘。

要继承 UICollectionView*流*布局，我必须：

1.  覆盖`prepareLayout`以停止布局包装项目。这似乎需要做很多工作。
2.  覆盖`collectionViewContentSize`。

Apple 表示他们在制作 UICollectionView*流*布局方面做了“很多艰苦的工作”，所以如果可以的话，我应该利用它。但是如果我必须重写`prepareLayout`以关闭换行，我怀疑我正在丢弃他们的大部分工作。在他们剩下的工作中，我可能不会使用其中的大部分（例如，`minimumLineSpacingForSectionAtIndex`）。

因为我想要的布局是如此简单，我怀疑我应该继承 UICollectionViewLayout ，因为：

1.  我将有一个更简单、更清晰的实现，所有内容都在一个布局类中，而不是在子类和委托之间传播。
2.  我认为这不会比继承 UICollectionView *Flow* Layout 更难，因为在这两种情况下我都必须重写`prepareLayout`，我怀疑这就是所有艰苦工作的所在。
3.  *与尝试在 UICollectionView Flow* Layout 子类之上添加另一个 kludge 相比，我将处于更好的位置以自定义方式调整其他 UICollectionViewLayoutAttributes 。

我的结论正确吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T18:27:05.753

**UICollectionViewFlowLayout 无论如何**都不能支持两个方向，它只能沿着一个轴滚动，水平或垂直。所以你必须**继承 UICollectionViewLayout**而不是**UICollectionViewFlowLayout**。

然后你必须重写**prepareForLayout**，**layoutsAttributesForElementsInRect** 方法，正如你所说的那样......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T22:04:26.993

您描述的布局（项目以无限长的水平线排列，部分以无限长的垂直线排列）类似于 App Store 的“特色”部分:)

我也一直打算在我的一些应用程序中使用类似的概念，我认为这里的技巧是它不是由单个`UICollectionView`. 看起来您正在寻找的内容可以通过使用 a`UITableView`作为基础来实现，并且您的内容的每个部分都占据表格中的一个单元格。也就是说，每个`UITableViewCell`都包含一个`UICollectionView`水平滚动的。

它的关键限制`UICollectionView`有时并不容易理解，毕竟它是一个单一的`scrollView`. 您可以覆盖某些功能以启用双向滚动，但是如果您希望某些内容以一种方式滚动，而某些内容以另一种方式滚动，则必须创建嵌套`scrollView`的 s。

# javascript - d3 工具提示删除了我的轴（并且不起作用）

> ID：14449285
> 
> 赞同：0
> 
> 时间：2013-01-21T23:51:57.620
> 
> 标签：javascript, tooltip, d3.js, mouseover, jsfiddle

我正在尝试将工具提示添加到我的 D3 图表中：http: [//jsfiddle.net/ericps/b5v4R/1/](http://jsfiddle.net/ericps/b5v4R/1/)

但是添加这些鼠标事件会破坏所有内容的呈现方式，我不知道为什么。这是一个带轴的折线图

```
dots.enter()
    .append("circle")
    .attr("class", "dot")
    .attr("cx", open_line.x())
    .attr("cy", open_line.y())
    .attr("r",3.5)
    .on("mouseover", myMouseOverFunction)
    .on("mouseout", myMouseOutFunction); 
```

在第 144 行注释掉这两种`.on`方法会使一切都呈现出我期望的样子

对此有任何见解吗？

工具提示基于这个小提琴

[http://jsfiddle.net/ericps/E4vrX/](http://jsfiddle.net/ericps/E4vrX/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:09:44.910

你不见了`myMouseOverFunction`。

简单地定义函数将正确地呈现您的图形（使用轴），允许您正确定义 MouseOver 功能。

```
var myMouseOverFunction = function() {} 
```

您可以看到对您的 jsfiddle 的更新响应：http: [//jsfiddle.net/sahhhm/hQgbc/](http://jsfiddle.net/sahhhm/hQgbc/) 这可以以不同方式实现，但只需快速更改就是删除 CSS 中的 .FILL 定义，而是在创建时填充该值点本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T02:53:23.047

几个问题：

老鼠：

d3.mouse(container) 函数给出了鼠标相对于容器（一个节点）的位置。您指定`d3.mouse(this)`了 ，但这是指圆形节点，而您想引用 svg 容器：`d3.select("svg").node()`。

信息框：

信息框 div 没有在任何地方定义，所以没有任何显示。

查看更新的小提琴：http: [//jsfiddle.net/b5v4R/4/](http://jsfiddle.net/b5v4R/4/)

# node-gyp - 基于构建配置的 GYP 变量

> ID：14449287
> 
> 赞同：6
> 
> 时间：2013-01-21T23:52:18.260
> 
> 标签：node-gyp, gyp

是否可以定义一个 GYP 变量，其值取决于构建配置的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-27T13:16:35.810

Just use variable `$(BUILDTYPE)` or `$(ConfigurationName)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T16:53:44.273

[根据这个](https://code.google.com/p/gyp/wiki/InputFormatReference#Processing_Order)wiki页面看起来这是不可能的：

> *   执行“早期”或“预”变量扩展和条件评估。
> *   ...
> *   根据需要将目标设置合并到配置中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T05:09:52.063

我认为如果您通过“构建配置”来区分“调试”和“发布”，这是可能的。尝试在 *.gyp 文件中添加以下内容：

```
...
'configurations': {
    'Debug': {
        'variables': {
            'some_variable%' : 'debug_value',
    },
    'Release': {
        'variables': {
            'some_variable%' : 'release_value',
        },
    },
}
... 
```

带有更多示例的链接：[gyp - 如何指定链接库风格](https://stackoverflow.com/questions/13979860/gyp-how-to-specify-link-library-flavor/14058852#14058852)；[http://n8.io/converting-ac-library-to-gyp/](http://n8.io/converting-a-c-library-to-gyp/)

# apache - mod_rewrite 仅适用于索引

> ID：14449290
> 
> 赞同：0
> 
> 时间：2013-01-21T23:52:58.523
> 
> 标签：apache, mod-rewrite

我正在尝试应用一些 mod_rewrite 规则，但只能将其应用于我的索引页面。

```
Options +FollowSymlinks
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

将 localhost/site/index.php 更改为 localhost/site/。尽管转到任何其他页面，例如 localhost/site/login.php，但该规则不适用，并且仍显示文件扩展名。

此外，从索引转到另一页，然后返回索引读取扩展名。

如何解决这个问题？

如果这有什么不同的话，我目前正在使用 WAMP 在本地主机上工作。

# python - 如何获取 rq 队列中的作业数？

> ID：14449296
> 
> 赞同：2
> 
> 时间：2013-01-21T23:53:54.393
> 
> 标签：python, resque

我使用[rq](http://python-rq.org/)和 RedisToGo。如何获取队列中的作业数量？我在文档中找不到？（在 Python 中）

当我尝试：

```
print "Before: ", len(q.jobs)
result = q.enqueue(worker.A)
result = q.enqueue(worker.B)
print "After: ", len(q.jobs) 
```

它只是给 0 两次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T23:58:47.447

对于 RQ，您应该能够仅获取`len`队列中的作业：

```
from rq import Queue

queue = Queue()
len(queue.jobs) 
```

# php - 会话过期时无法执行查询

> ID：14449297
> 
> 赞同：0
> 
> 时间：2013-01-21T23:54:02.617
> 
> 标签：php, ajax, mysqli

我喜欢一个 if/else 语句，它检查用户是否仍然登录，否则显示消息说他们需要登录。这包括在会话过期的情况下。现在我在 else 语句中还有一个 mysqli 代码，它将执行查询以删除属于已登录用户和所在位置的表中的任何行`Session_Complete`和`Session`表。现在这不起作用，这真的很明显，因为显然会话已经过期，这意味着老师没有登录，因为他们的详细信息在会话过期时已被破坏，因此它无法识别哪个老师已登录，因此查询无法删除行。`TeacherId``Session_Complete``0`

所以我的问题是，如果有人试图解决相同的问题，如果用户由于会话到期而注销，则执行查询，那么你将如何做到这一点，以便在会话之前已经过期它会 somehpw 得到`TeacherId, $userid`已经登录的老师的，所以它可以在查询中使用，同时显示用户需要登录的消息？

以下是当前的 if/else 语句：

```
if ((isset($username)) && (isset($userid))){ //checks the logged in teacher's username and userid

//whole page code here

}else{ 

echo "Please Login to Access this Page | <a href='./teacherlogin.php'>Login</a>";

$incomplete = 0;            

    $deletesession = " DELETE session, session_complete FROM Session AS session 
    LEFT JOIN Session_Complete AS session_complete
    ON session_complete.SessionId = session.SessionId
    WHERE (session.TeacherId = ? AND Complete = ?) "; 

                if (!$delete = $mysqli->prepare($deletesession)) {
      // Handle errors with prepare operation here
    }

    //Dont pass data directly to bind_param store it in a variable
$delete->bind_param("ii",$userid, $incomplete);

 $delete->execute();

        if ($delete->errno) {
          // Handle query error here
        }

        $delete->close();

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:05:47.877

您唯一能做的就是跟踪会话的预期到期时间，基于您将会话 cookie 设置为持续多长时间，或用户的最后活动时间，并将其存储在数据库记录中。

您必须设置一个 cron 作业以每隔一段时间清理会话表，并检查已过期的会话。如果您出于某种原因无法使用 cron 作业，您可以将常规代码设置为每隔这么多视图随机调用会话垃圾收集器（取决于您的典型访问者数量）。

您还可以尝试检查 IP 地址和 User-Agent 标头，并尝试将它们与会话相关联，但这很容易出错，我不建议这样做。

# qt - 使用图像自定义 QPushButton

> ID：14449299
> 
> 赞同：0
> 
> 时间：2013-01-21T23:54:05.380
> 
> 标签：qt, stylesheet, qt5, qpushbutton

我正在使用 Qt5 并且在设置 QPushButton 的背景图像时遇到了一些问题。我正在使用 Qt Creator 和 Design 拖放 QPushButton。之后，我创建了一个源文件夹并将图像放在该目录中，然后我用谷歌搜索并尝试做

```
ui->pushButton_play->setStyleSheet(QString::fromUtf8("background-image: url(:/source/play.png);")); 
```

但没有成功...我是在错误的地方创建文件夹吗？...我创建`D:\Qt5_PROJECT_NAME\source`或将创建`url(:\\source\\play.png)`. 没有任何工作...请帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:46:44.043

您是否将图像文件添加到`.qrc`文件中？以 URL 开头的 URL`:`表明它将在`.qrc`文件中搜索。如果`.qrc`未使用文件，则 URL 不应以`:`. 也许你应该访问图像文件

```
ui->pushButton_play->setStyleSheet(QString::fromUtf8("background-image: url(source/play.png);")); 
```

这是[Qt 资源系统](http://doc.qt.digia.com/qt/resources.html)文档。

# java - 使用 WebDriver 获取子元素

> ID：14449302
> 
> 赞同：2
> 
> 时间：2013-01-21T23:54:27.843
> 
> 标签：java, selenium-webdriver

我有以下 HTML 代码：

```
<div class="ui-selectmenu-menu" style="z-index: 1; top: 251px; left: 37px;">
    <ul class="ui-widget ui-widget-content ui-selectmenu-menu-dropdown ui-corner-bottom" aria-hidden="true" role="listbox" aria-labelledby="gwt-uid-191-button" id="gwt-uid-191-menu" style="width: 270px; height: auto;" aria-disabled="false" aria-activedescendant="ui-selectmenu-item-999">
        <li role="presentation" class="ui-selectmenu-item-selected">
          <a href="#nogo" tabindex="-1" role="option" aria-selected="true" id="ui-selectmenu-item-999">All Applications</a></li>
        <li role="presentation" class="">
          <a href="#nogo" tabindex="-1" role="option" aria-selected="false">Option Alpha</a></li>
        <li role="presentation" class="ui-corner-bottom">
          <a href="#nogo" tabindex="-1" role="option" aria-selected="false">Option Beta</a></li>
    </ul>
</div>
...
<div class="ui-selectmenu-menu"...>...</div> 
```

我能够`ui-selectmenu-menu`像这样获得 WebElement（页面上有很多；因此，使用`findElements`）：

```
List<WebElement> dropdowns = driver.findElements(By.className("ui-selectmenu-menu")); 
```

`ul`下面是这样的：

```
WebElement ddChild = dropdowns.get(0).findElement(By.className("ui-selectmenu-menu-dropdown")); 
```

我什至可以像这样抓住所有`li`下面的`ddChild`东西：

```
List<WebElement> ddOpts = ddChild.findElements(By.xpath("//*[@id='gwt-uid-191-menu']/li[*]")); 
```

但是我似乎无法弄清楚如何获取每个元素`<a href="#nogo"...`下标签的文本值的问题。`li`

我希望能够遍历所有`ddOpts`并获取`<a href="#nogo"...`文本值并将它们保存到`ArrayList<String>`.

因此，例如，我的第一个`ArrayList<String>`值将包含`All Applications`, then `Option Alpha`, then `Option Beta`，然后从下一个元素跳转到下一个`ul`元素`dropdowns`并再次执行整个过程，同时添加到`ArrayList<String>`.

我确信它是一个简单的解决方案，但我对 Selenium WebDriver 的经验有限。

谢谢！

*PS：有没有一种简单的方法来获取 WebElement 的孩子？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T06:51:39.797

这也可以解决您的问题：

```
List<WebElement> dropdowns = driver.findElements(By.className("x-combo-list"));        
WebElement ddChild = dropdowns.get(0).findElement(By.className("x-combo-list-inner"));   
List<WebElement> ddOpts = ddChild.findElements(By.xpath("//*[@id=\"x-auto-98\"]/div[4]"));

for(WebElement we:ddOpts){
    System.out.println(we.getText());
    if(we.getText().contains("ROLE_MANAGER")){

        we.sendKeys("ROLE_MANAGER");
        we.click();
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T00:27:39.563

```
List<WebElement> ddOpts = ddChild.findElements(By.xpath("//*[@id='gwt-uid-191-menu']/li/a"));
ArrayList<String> links = new ArrayList<String>();
for(WebElement we : ddOpts) {
    links.add(we.getText();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T22:27:16.780

要提取 的`href`属性`WebElement`（参考`<a>`本示例中的锚标记，请执行以下操作：

```
List<WebElement> ddOpts = ddChild.findElements(By.xpath("//*[@id='gwt-uid-191-menu']/li/a"));
ArrayList<String> links = new ArrayList<String>();
for(WebElement we : ddOpts) {

    // ADD all the href attribute strings to the list
    links.add(we.getAttribute("href"));

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-13T13:35:55.830

下面的代码将在上面的 HTML 代码的下拉列表中选择 OptionAlpha

driver.findElement(By.xpath("//*[@class='ui-selectmenu-menu')).click();

driver.findElement(By.xpath("//*[@class='ui-widget ui-widget-content ui-selectmenu-menu-dropdown ui-corner-bottom']//**[text()='Option阿尔法']")).click();

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-14T05:59:37.303

请尝试以下代码以获取`<a href`

```
List<WebElement> allLis = driver.findElements(By.xpath("//*[@id='gwt-uid-191-menu']/li/a");
// Looping through above list using for-each loop
for(WebElement eachLi : allLis) {
    System.out.println(eachLi.getText());
} 
```

希望这可以帮助。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-04-13T11:51:43.657

`href="#nogo"`所有锚标签都相同，因此在通过该方法选择项目时可能会产生歧义

```
dropdowns.findelement(By.linktext("#nogo")); 
```

# c# - 实体框架返回旧数据

> ID：14449308
> 
> 赞同：16
> 
> 时间：2013-01-21T23:55:16.017
> 
> 标签：c#, entity-framework, dependency-injection, unity-container, unit-of-work

我有一个问题，EF 没有在 3 层 WPF 应用程序中返回最新数据，我怀疑这与我如何处理上下文的生命周期有关。这是场景：

UnitOfWork 中包含多个存储库。还有一项服务 (MyService)，它使用 UnitOfWork。这个 UnitOfWork 也必须直接从 UI 调用，而不通过服务。

在我的主窗口的 ViewModel 中，我创建了一个新窗口（首先使用 ViewModel）：

```
var dialog = new DialogViewModel(_eventAggregator, _unitOfWork, Container.Resolve<CarService>()); 
```

这个主窗口 ViewModel 有一个 UnitOfWork，它已被注入到构造函数中，并被传递给 DialogViewModel。

CarService 的构造函数还需要一个 UnitOfWork，它也被注入到它的构造函数中：

```
public CarService(IUnitOfWork unitOfWork){
    _unitOfWork = unitOfWork;
} 
```

当在 DialogViewModel 中使用 CarService 进行查询以检索一些数据并进行一些更新时，它第一次运行良好。但是，当下次进行相同的查询以检索该数据时，它不会返回最新修改的数据，而是返回旧的/缓存的数据。使用 UnitOfWork（在 CarService 内部）的查询如下所示：

```
var values = _unitOfWork.GarageRepository.GetSomeValues();
_unitOfWork.GarageRepository.MakeSomeChangesToTheValuesUsingStoredProcedure(); 
```

第二次调用时，值不包含最新版本的数据；但是它已在数据库中成功更新。

我正在使用 Unity 进行 DI，这就是我的容器的样子：

```
public class Container
{
     public static UnityContainer Container = new UnityContainer();

     // Called once in the AppBoostraper, as soon as the GUI application starts 
     public void BuildUp()
     {
          Container.RegisterType<IUnitOfWork, UnitOfWork>();
          Container.RegisterType<ICarService, CarService>();
     }
} 
```

为什么没有返回正确的数据，我该如何解决？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-22T15:27:40.917

我终于找到了问题，这与我对 unitOfWork/dbcontext 生命周期的管理有关。

我正在加载一些实体，然后使用存储过程更新它们（因此代码中的实体不再是最新的），然后再次加载查询；此时 EF 正在从缓存而不是从数据库中获取值。

我找到了两种解决方法：

1.  一个相当“hacky”的，强制实体重新加载：

    ```
    Context.Entry(entity).Reload(); 
    ```

2.  使用 using 封装 unitOfWork 用法，以便在每个事务结束时处理上下文，从而在下次获取新数据。我认为这更符合 UnitOfWork 的用途，并且对我来说更强大。我还将 UnitOfWork 包装在工厂中，因此现在将其注入构造函数中。

    ```
    using (var uOw = new unitOfWorkFactory.GetNew())
    {
         // make the queries
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T00:32:14.223

Unity 的默认 LifetimeManager 是 TransientLifetimeManager，这意味着每次解析（包括注入时）都会获得一个新实例。因此，根据您的注册，您将获得一个新的 CarService，每次调用 Resolve() 时都会有一个新的 UnitOfWork 实例，以及一个新的、不同的实例注入到您的主窗口 ViewModel 中。

因此，您的 ViewModel 获得一个 UoW，CarService 获得一个单独的 UoW，更新一个将意味着另一个由于缓存而现在已过期。

您需要做的是为具有适当范围的上下文设置 LifetimeManager，或者遵循工厂。Unity 没有内置那么多 LM，但 LifetimeManager 类基本上是一个美化的地图（本质上具有 Set、Get 和 Remove 方法）。

我对 WPF 及其生命周期知之甚少，无法建议实施。也许它可以是单例的（它将在程序运行的整个过程中保持相同的上下文），也许它可以由线程的 CallContext 支持。

您的另一个选择是在通过调用解决 CarService 时传递 UoW 实例`Container.Resolve<CarService>(new ParameterOverride("unitOfWork", _unitOfWork))`。这将使生命周期管理与主窗口 ViewModel 的生命周期保持联系。但是，这种方法存在问题，因为您的 VM 类对 CarService 了解得太多（特别是其中包含 UoW）。

# asp.net-mvc - 无法以表格形式显示数据

> ID：14449310
> 
> 赞同：0
> 
> 时间：2013-01-21T23:55:23.163
> 
> 标签：asp.net-mvc, entity-framework, razor, linq-to-entities

当我单击特定记录的编辑链接时，我想从视图剃刀中的控制器中检索该 ID 的数据，并以表格形式显示以进行编辑。但它抛出了一个错误。它正在从我的数据库中检索数据，但是一旦我点击视图，它就会在每个字段中引发错误：

错误：

> 编译器错误消息：CS1061：“System.Collections.Generic.IEnumerable”不包含“AppName”的定义，并且找不到接受“System.Collections.Generic.IEnumerable”类型的第一个参数的扩展方法“AppName”（您是否缺少 using 指令或程序集引用？

```
Source Error:
Line 8:      <fieldset>   
Line 9:      <div class="editor-label grid_2">
Line 10:         @Html.LabelFor(model => model.AppName) :
Line 11:     </div>
Line 12:     <div class="editor-field grid_3"> 
```

我不知道我做错了什么。这是我的代码：

单击编辑链接时调用的控制器：

```
 [Authorize]
        public ActionResult UpdateAPIForm(string id,string appname)
        {
            try
            {
                var a = HttpContext.User.Identity.Name;
                var context = new ndCorp_SiteEntities();

                var viewModel = (from du in context.DevUserInfoes
                                join dc in context.DevContactInfoes on du.UserName equals dc.UserName
                                join dm in context.DevMarketplaceInfoes on du.UserName equals dm.UserName
                                join dm1 in context.DevMarketplaceInfoes on dc.AppName equals dm1.AppName
                                where (du.UserName == a && dc.AppName == appname )
                                select new NewAPIFormModel()
                                    { 
                                        AppName = dc.AppName, 
                                        Email = dc.DevEmail ,
                                        OrgName = dc.OrgName ,
                                        DevName = dc.DevName ,
                                        ClientID = dc.ClientID ,
                                        ClientSecret = dc.ClientSecret ,
                                        RedUrl = dc.Url ,
                                        AppNameForMP = dm.NewAppNameForMP ,
                                        AppDesc = dm.AppDesc ,
                                        DoYouAgree = dm.DispInPublicMP.Value ,
                                        mobil = dm.ChkMobility.Value ,
                                        legal = dm.ChkLegal.Value ,
                                        docmgm = dm.ChkDocMgm.Value ,
                                        finser = dm.ChkFinSer.Value ,
                                        microoff = dm.ChkMicOff.Value  ,
                                        saleforce = dm.ChkSalesForce.Value ,
                                        scanner = dm.ChkScanMF.Value ,
                                        wordper = dm.ChkWordPer.Value ,
                                        deskext = dm.ChkDeskExt.Value ,
                                        other = dm.ChkOther.Value ,
                                        //updlogo = dm.UpdLogo,
                                       // pricing =Convert.ToString(dm.Pricing),
                                        pricingURL = dm.UrlPricing,
                                        contactinfo = dm.Contact,
                                    }).ToList();
                                //select dc;
                return View(viewModel);
                //return View();
            }
            catch (Exception ex)
            {
                Console.Write(ex);
                TempData["msg"] = ex.Message.ToString();
                return View();
            }
        } 
```

这是我的看法：

```
@model IEnumerable<N.Models.NewAPIFormModel>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>   
    <div class="editor-label grid_2">
        @Html.LabelFor(model => model.AppName) :
    </div>
    <div class="editor-field grid_3">
        @Html.TextBoxFor(model => model.AppName, new { @class = "demo-field-longer" })
    </div>
     <div class="editor-label1 grid_2">
        Must be unique
    </div>
    <div class="grid_3 error long" style="margin-left:250px">
    @Html.ValidationMessageFor(model => model.AppName)
    </div>

    <div class="clear"></div>
    <div class="editor-label grid_2">
        @Html.LabelFor(model => model.Email):
    </div>
    <div class="editor-field grid_3">
        @Html.TextBoxFor(model => model.Email, new { @class = "demo-field-longer" })
    </div>
    <div class="grid_3 error long" style="margin-left:250px">
    @Html.ValidationMessageFor(model => model.Email)
    </div>

      <div class="clear"></div>
    <div class="editor-label grid_2">
        @Html.LabelFor(model => model.DevName):
    </div>
    <div class="editor-field grid_3">
        @Html.TextBoxFor(model => model.DevName, new { @class = "demo-field-longer" })
    </div>
    <div class="grid_3 error long" style="margin-left:250px">
    @Html.ValidationMessageFor(model => model.DevName)
    </div>
    .
    .
    .
    .
 <div class="editor-field grid_2 submit">
        <input type="submit" value="Submit" id="demo-submit-button"/><br />
        @ViewData["DemoMessage"]
    </div>
    </fieldset> 
```

这是我的模型：

```
 public class NewAPIFormModel
    {
        [Required]
        [Email]
        [DisplayName("Developer Email")]
        public string Email { get; set; }

        [Required]
        [DisplayName("Application Name")]
        public string AppName { get; set; }

        [Required]
        [DisplayName("Organization Name")]
        public string OrgName { get; set; }

        [Required]
        [DisplayName("Developer Name")]
        public string DevName { get; set; }

        [Required]
        [DisplayName("App Key/ClientID")]
        public string ClientID { get; set; }

        [Required]
        [DisplayName("Client_Secret")]
        public string ClientSecret { get; set; }

        [Required]
        [DisplayName("Redirect_url")]
        public string RedUrl { get; set; }

        [Required]
        [DisplayName("Application Name")]
        public string AppNameForMP { get; set; }

        [Required]
        [DisplayName("Application Description")]
        public string AppDesc { get; set; }
.
.
.
. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:21:27.430

您将模型定义为不包含属性的 NewAPIFormModels 集合`AppName`。实际上，其中的对象具有该属性。你需要有一个`NewAPIFormModel`作为你的模型。为此，您不应该使用 `ToList()`函数来实现您的查询。

您应该使用`First()`或`FirstOrDefault()`根据您的需要使用。

```
var viewModel = (linq query here).First(); 
```

*   如果您确定您的选择查询将始终返回比 go with`First()`更有意义的内容。

*   否则，`FirstOrDefault()`当结果为空时继续处理。

这样，您可以获得单个`NewAPIFormModel`对象，而不是保留单个 `NewAPIFormModel`对象的集合。

在您的视图中定义您的强类型模型如下。

```
@model N.Models.NewAPIFormModel 
```

# ruby-on-rails - 使用 Rails、Ajax 和 Jquery 根据下拉菜单更改内容

> ID：14449315
> 
> 赞同：0
> 
> 时间：2013-01-21T23:55:47.033
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery

我正在尝试根据从 collection_select 下拉列表中的选择显示数据库中团队的最新分数。我知道我需要在下拉列表中侦听更改事件，但我不知道如何执行 AJAX 请求或如何在视图中显示数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:41:35.407

好的，我会用`category`和`subcategory`模型写一个例子。

首先是模型之间的关系：

```
class Category
 has_many :subcategories
 has_many :objects
end

class Subcategory
 belongs_to :category
 has_many :objects
end

class Object
 belongs_to :category
 belongs_to :subcategory
end 
```

现在查看表单，例如`simple_form gem`（您可以使用`form_for`）：

```
<%= simple_form_for(@object, :html => {:multipart => true }) do |f| %>
 <%= f.input :category, :collection => Category.all :prompt => "Select Category" %>
 <%= f.input :subcategory, :label_html => { :class => 'subcategory_label_class' } do %>
 <%= f.grouped_collection_select :subcategory_id, Category.order_by(:title), :subcategories, :title, :id, :name, include_blank: true %>
 <% end %>
 <%= f.button :submit %>
<% end %> 
```

有了这个，我们将子类别与其父类别分组。

下一步您必须将代码添加到您的 objects.js.coffee

```
$('#object_subcategory_id').parent().hide()
  subcategories = $('#object_subcategory_id').html()
  $('#object_category').change ->
    category = $('#object_category :selected').text()
    escaped_category = category.replace(/([ #;&,.+*~\':"!^$[\]()=>|\/@])/g, '\\$1')
    options = $(subcategories).filter("optgroup[label='#{escaped_category}']").html()
    if options
      $('#object_subcategory_id').html(options)
      $('.subcategory_label_class').show()
      $('#object_subcategory_id').parent().show()
    else
      $('#object_subcategory_id').empty()
      $('.subcategory_label_class').hide()
      $('#object_subcategory_id').parent().hide() 
```

您可以根据需要调整此示例。

我希望它有所帮助。

问候！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T00:25:38.437

您需要构建一个单独的控制器并在触发更改事件时发送 ajax 请求，控制器发回一个 js 响应，您必须在客户端 javascript 中处理...以下链接应该为您提供一个示例[http：/ /blog.bernatfarrero.com/jquery-and-rails-3-mini-tutorial/](http://blog.bernatfarrero.com/jquery-and-rails-3-mini-tutorial/)

# ios - 在 XCode 中使用加速度计模拟器

> ID：14449317
> 
> 赞同：2
> 
> 时间：2013-01-21T23:55:56.210
> 
> 标签：ios, cocos2d-iphone, accelerometer, uiaccelerometer

有没有人在他们的 iPhone 应用程序中成功使用过加速度计模拟器？我试图在 COCOS2D 应用程序中使用它，但无法让它工作。

该应用程序和代码及其用法在此处讨论：[http](http://code.google.com/p/accelerometer-simulator/wiki/Home) ://code.google.com/p/accelerometer-simulator/wiki/Home 。该系统由可从 App Store 下载的 AccSim 应用程序和一些您必须编译到 XCode 项目中的代码组成。

我当然想使用我的 iPhone 的加速度计读数来控制 IOS 模拟器中我的应用程序内部的某些东西。我的 iPhone 已打开 WIFI，并且与运行模拟器的 MAC 位于同一本地网络上。是的，我检查以确保我的 iPhone 和我的 MAC 都在同一个 WIFI 网络上。我 iPhone 上的 AccSim 应用程序在默认的 UDP 端口 10552 上广播加速器信息。两个设备都在我的家庭网络内，我的调制解调器是一个 2WIRE 调制解调器，提供来自 ATTUverse 的互联网服务。

在 AccSim 中，我将 Network 开关切换到 On。它处于广播模式，地址为 255.255.255.255 和端口 10552（默认）。我还尝试单播到网络内我的 MAC 的 IP 地址，但这也不起作用。

似乎无论我做什么，我在 XCode 中的应用程序永远不会看到任何加速度计输入 - 它永远不会看到任何 UDP 数据包，因为我可以告诉它。

有什么我想念的吗？

顺便说一句，我还验证了确实是 AccelerometerSimulation 类正在被 sed。在 COCOS2D 中，我必须将这些文件添加到 COCOS2D 本身并将 AccelerometerSimulation.h 导入 CCLayer。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:04:07.693

我最近重写了那个模拟器插件来支持新的服务，以及陀螺仪和磁力计数据。我使用了一个名为 SensorMonitor（它是免费的）的应用程序来记录来自手机的一组测量值，然后使用 matlab 通过 UDP 将这些信息播放回模拟器。[你可以在iOS Simulator Sensors](http://github.com/system123/ios_simulator_sensors)找到我的 CMMotionManagerSim 课程

该课程尚未完成，我正在根据我的项目的需要添加它，但希望它有所帮助。到目前为止，加速度计工作，但其他人很快就会工作。

# python - AttributeError: 'Sprite' 对象没有属性 'image'

> ID：14449320
> 
> 赞同：0
> 
> 时间：2013-01-21T23:56:08.687
> 
> 标签：python, image, pygame, sprite

我通过使用定义我的精灵

```
user = pygame.sprite.Sprite() 
```

然后我尝试这样做：

```
user.image == pygame.image.load(userstationary).convert() 
```

但我得到标题中的错误

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:19:14.117

`Sprite`我认为这个问题是由于对pygame 中类的目的的误解。它不打算直接使用，而应该是一个基类，供您用来定义自己的子类。

因此，您可以像这样定义自己的最小类：

```
class User(pygame.sprite.Sprite):
    def __init__(self, image_file):
        self.image = pygame.image.load(image_file).convert()
        self.rect = self.image.get_rect() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-16T04:41:54.087

简单的。您使用 == 而不是 =。例如，而不是`user.image == pygame.image.load(userstationary).convert()`，你需要把`user.image = pygame.image.load(userstationary).convert()`

# backbone.js - 模型更改时主干视图不刷新

> ID：14449325
> 
> 赞同：1
> 
> 时间：2013-01-21T23:56:50.193
> 
> 标签：backbone.js, backbone-views

我在控制台中收到错误消息“对象 [对象对象] 没有方法“应用”。请看小提琴.. [http://jsfiddle.net/vineet85/AQx63/6/](http://jsfiddle.net/vineet85/AQx63/6/)

```
var RefreshingView = new Backbone.View.extend({
    initialize: function() {
        this.model.on('change', this.render, this);
    },
    render: function() {
        this.$el.html(this.model.get('text'));
    }
});

var m = new Backbone.Model({text: new Date().toString()});
var myView = new RefreshingView({model: m, el: 'body'});

myView.render();

setInterVal(function() {
    m.set({text: new Date().toString()});
}, 1000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:15:27.163

您的语法有点偏离，首先要*“声明”*您的视图和模型，您应该省略 new 关键字，其次您不应该尝试直接*“实例化”* backbone.js 模型，请尝试以下操作

```
 var RefreshingView = Backbone.View.extend({
        el: 'body',

        initialize: function () {
            this.model.on('change', this.render, this);
        },
        render: function () {
            this.$el.html(this.model.get('text'));
        }
    });

    var MyModel = Backbone.Model.extend({
        text: null
    });

    var m = new MyModel({ text: new Date().toString() });
    var myView = new RefreshingView({ model: m, el: 'body' });

myView.render();

setInterval(function () {
    m.set({ text: new Date().toString() });
}, 1000); 
```

[更新了 jsFiddle](http://jsfiddle.net/AQx63/10/)

# trigger.io - trigger.io 找不到我的设备，但 Eclipse 设备选项卡显示

> ID：14449326
> 
> 赞同：0
> 
> 时间：2013-01-21T23:57:00.460
> 
> 标签：trigger.io

我是付费客户，点击支持，期待完整的知识库/电子邮件提交表单，但它直接链接到此处。

总之，trigger.io 找不到我的安卓设备。我能够使用 eclipse ADT 构建和开发 android 应用程序，但 trigger.io 似乎无法发现它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:58:54.577

我们使用与 eclipse 相同的工具 ( `adb`) 与 Android 设备进行通信，但它可能会混淆。以下任何一项有帮助吗？

*   关闭eclipse并重试，它可能保持与设备的连接打开
*   拔下并重新插入设备
*   重启设备
*   重启你的电脑

如果这些帮助都没有，您能否让我们知道您正在使用什么设备/操作系统以及您得到的输出是什么？

您也可以随时发送电子邮件至 support@trigger.io 寻求支持，我们使用 stackoverflow 提供支持，因为其他人经常遇到类似的问题，也许可以帮助您。

# c# - 延迟编写查询

> ID：14449327
> 
> 赞同：1
> 
> 时间：2013-01-21T23:57:01.717
> 
> 标签：c#, linq, system.reactive

我如何编写以下查询，如果学生失败，我希望学生重复任务，但他的下一次重试必须有一些延迟。

1.  做某事
2.  如果失败，请等待 5 分钟，然后重试。
3.  显示结果。

**代码部分：**

```
student.DoSomeTask()
       .Repeat()
       .SkipWhile(r => r.Succeeded == false); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:58:08.630

```
student.DoSomeTask()
    .SelectMany(r=>r.Succeeded 
        ? Observable.Empty<long>() 
        : Observable.Timer(TimeSpan.FromMinutes(5)).Concat(Observable.Throw<long>(new ExamFailedException())).IgnoreElements())
    .Retry() 
```

（注意以上代码未经测试）

如果学生通过，则完成，否则等待5分钟然后抛出如果异常，重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T01:50:20.263

我使用延迟参数创建了一个新的 DelayWhile 方法，该参数延迟了失败的结果。

```
public static IObservable<TSource> DelayWhile<TSource>(this IObservable<TSource> source, Func<TSource, bool> predicate, TimeSpan dueTime)
{
    return Observable.Create<TSource>(
        o => source
                    .Subscribe(value =>
                                {
                                    bool running;

                                    try
                                    {
                                        running = !predicate(value);
                                    }
                                    catch (Exception ex)
                                    {
                                        o.OnError(ex);

                                        return;
                                    }

                                    if (!running)
                                    {
                                        Thread.Sleep(dueTime);

                                        return;
                                    }

                                    o.OnNext(value);
                                },
                            o.OnError,
                            o.OnCompleted));
} 
```

新的查询是：

```
student.DoSomeTask()
       .Repeat()
       .SkipWhile(r => r.Succeeded == false, TimeSpan.FromMinutes(5)); 
```

# javascript - 选择单选按钮时发出警报

> ID：14449330
> 
> 赞同：0
> 
> 时间：2013-01-21T23:57:16.573
> 
> 标签：javascript, alert

我不知道javascript，所以无论如何这可能是在错误的轨道上。我有可以通过单选按钮选择的运输方式。如果选择了某种运输方式，我正在尝试创建警报，但是单选值会根据可用的运输选项而变化。

```
<label id="shippingMethod"><input type="radio" name="selectedShippingMethod" id="shippingCheck" value="5"> <span class="ShipperName">Collect Shipping</span>  <em class="ShipperPrice ProductPrice">$0.00</em></label> 
```

这是我正在尝试使用的警报代码

```
$(document).ready(function(){
    $('input:radio[name="selectedShippingMethod"]').change(function() {
        if ($(this).val() == '5'){
            alert('ALERT TEXT TO POPUP');
        }
    });
}); 
```

有没有一种方法可以使它基于`ShipperName`“收集运费”而不是无线电值触发警报，或者有更好的方法来开始这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:06:19.280

```
$(document).ready(function () {

    var $radios = $('input:radio[name="selectedShippingMethod"]');

    $radios.change(function () {
        var $selected = $radios.filter(':checked');
        if ( $selected.val() == 5 ) {
            alert( $selected.parent().text() );
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-13T16:37:14.847

Joseph Silber，我建议的唯一更改是根据 OP 的原始目标将警报设置为“收集运输”。

您的功能帮助我找到了我正在寻找的类似解决方案（谢谢！）

```
$(document).ready(function () {
  var $radios = $('input:radio[name="selectedShippingMethod"]');
  $radios.change(function () {
    var $selected = $radios.filter(':checked');
    if ( $selected.val() == 5 ) {
        alert("Collect Shipping" );
        }
    });
}); 
```

# ios - 唤醒 App 时重新加载单个 ViewController

> ID：14449333
> 
> 赞同：0
> 
> 时间：2013-01-21T23:57:29.897
> 
> 标签：ios, objective-c, uiviewcontroller

我有一个视图控制器，当应用程序退出后台时需要重新加载。我只需要这个单一的视图控制器来完全重新加载。如果应用程序在任何其他视图控制器上处于活动状态，我不需要做任何事情。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:04:57.047

让视图控制器注册`UIApplicationWillEnterForegroundNotification`通知或`UIApplicationDidBecomeActiveNotification`.

在`viewDidLoad`你可以这样做：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(foregrounded) name:UIApplicationWillEnterForegroundNotification object:nil]; 
```

在`dealloc`您需要注销：

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:UIApplicationWillEnterForegroundNotification object:nil]; 
```

您需要实现该`foregrounded`方法：

```
- (void)foregrounded {
    // app now in the foreground - do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T00:03:32.113

你独特的视图控制器有一个独特的名字吗？

如果不是，则为每个视图控制器添加一个名称。

当应用程序进入后台时，将活动视图控制器的名称保存到[NSUserDefaults](https://www.google.ru/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDAQFjAA&url=http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/&ei=Idf9UOWwBeWj4gTyvoGABw&usg=AFQjCNEAV7tJh-DYMhrMXdIrXEb9uu4mBg&sig2=AmzsfqKcOt3eHDtBk5Z8AQ&bvm=bv.41248874,d.bGE)

当应用程序恢复到前台时，请检查您保存的视图控制器名称。如果这是您独特的视图控制器，请重新加载。

希望这对你有帮助

# java - 用另一种颜色为 jtable 中的选定行着色

> ID：14449334
> 
> 赞同：3
> 
> 时间：2013-01-21T23:57:30.427
> 
> 标签：java, swing, jtable, rendering, selection

我使用此代码通过不同的颜色为 ly jtable 的行着色：

```
table.setDefaultRenderer(Object.class, new DefaultTableCellRenderer()
    {
        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column)
        {
            final Component c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
            c.setBackground(row % 2 == 0 ? Color.WHITE : Color.LIGHT_GRAY);

            return c;
        }
    }); 
```

它有效，现在我想将用户选择的行着色为不同于上述颜色的另一种颜色：

```
table.setSelectionBackground(Color.RED); 
```

但它有什么作用我怎么能做到这一点？

先感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T00:00:46.600

您的渲染器正在覆盖由`DefaultTableCellRenderer`

尝试类似...

```
Component c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
if (!isSelected) {
    c.setBackground(row % 2 == 0 ? Color.WHITE : Color.LIGHT_GRAY);
} 
```

反而

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-01T14:13:47.640

您可以使用`getSelectedRow()`or `getSelectedColumn()`，具体取决于您的需要。例如：

```
public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
        Component comp = super.prepareRenderer(renderer, row, column);
        comp.setForeground(Color.BLACK); // Default colour of cell
        if (this.getSelectedRow() == row || this.getSelectedColumn() == column) return comp;
        else { 
          .... // Other formatting rules here
        }

        return comp;
} 
```

# php - PHP从字符串中删除某些字符组

> ID：14449335
> 
> 赞同：-1
> 
> 时间：2013-01-21T23:57:33.460
> 
> 标签：php

> **可能重复：**
> [PHP 获取没有文件扩展名的文件名](https://stackoverflow.com/questions/2183486/php-get-file-name-without-file-extension)

使用 php，我将如何从字符串中删除特定的字符集。例如我想从：

```
http://www.domain.com/folder/image.gif 
```

至

```
image 
```

我想删除除图像名称之外的所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T23:58:57.367

所以你只想要文件名？使用`pathinfo()`.

```
$name = pathinfo('http://www.domain.com/folder/image.gif', PATHINFO_FILENAME); 
```

# ios - 异步声音

> ID：14449344
> 
> 赞同：1
> 
> 时间：2013-01-21T23:58:01.233
> 
> 标签：ios, objective-c, cocoa-touch, ios4, ios6

我有以下代码：

```
SystemSoundID soundID;
NSString *soundFile = [[NSBundle mainBundle] pathForResource: _sound ofType:@ "wav"];
AudioServicesCreateSystemSoundID((__bridge CFURLRef) [NSURL fileURLWithPath:soundFile], &soundID);
AudioServicesPlaySystemSound(soundID);

    [UIView animateWithDuration: 0.6f
                          delay: 0.1f
                        options: UIViewAnimationTransitionCurlUp
                     animations:^{
                         [appDelegate.presstobook setFrame:  CGRectMake(136, appDelegate.window.frame.size.height - 50, 47, 47)];
                     }
                     completion:^(BOOL finished){

                         presstobook = NO;
                     }
     ]; 
```

如何在不影响其余代码的情况下播放声音？我根本不想播放声音来暂停代码？如何更改代码以便在不影响其余代码的情况下异步播放声音？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T23:59:23.377

是什么让您认为这会暂停代码？文档说：

> 因为声音可能会播放几秒钟，所以这个函数是异步执行的。

如果这里的某些东西确实阻塞了，我猜它是`AudioServicesCreateSystemSoundID()`. 但即使这不会阻塞，每次你想播放声音时都创建一个可能不是一个好主意，特别是如果你从不处理它们。您应该在某种设置中创建一次，然后随时使用`AudioServicesPlaySystemSound()`.

# php - 设置外键只显示用户信息

> ID：14449347
> 
> 赞同：1
> 
> 时间：2013-01-21T23:58:14.847
> 
> 标签：php, mysql, foreign-keys

如何在我的页面中的“我的帐户”链接下仅显示登录用户的信息？我尝试在两个表之间设置一个外键，因为我有一个用于登录的表，另一个用于插入照片、信息的东西，并将照片的作者与我在表中的用户名相关联`users`。我的目标是只显示登录用户的用户信息和照片。

问题是当我尝试设置外键时，它设置了外键但数据没有进入表中。在我上传图片并插入一些信息的页面上，它显示上传成功，但是当我去查看我的数据库时，什么都没有。有什么帮助吗？我被困在这很长时间了。

这是我为创建表格所做的。

```
CREATE TABLE IF NOT EXISTS `users` (
`username` varchar(30) NOT NULL ,
`password` varchar(40) default NULL,
`usersalt` varchar(8) NOT NULL,
`userid` varchar(32) default NULL,
`userlevel` tinyint(1) unsigned NOT NULL,
`email` varchar(50) default NULL,
`timestamp` int(11) unsigned NOT NULL,
`actkey` varchar(35) NOT NULL,
`ip` varchar(15) NOT NULL,
`regdate` int(11) unsigned NOT NULL,
PRIMARY KEY  (`username`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE IF NOT EXISTS photos (
ref int(10) unsigned NOT NULL auto_increment,
    photo varchar(75),
Firstname varchar(35),
    Lastname varchar(35),
    Age INT(3),
    author varchar(30) NOT NULL,
PRIMARY KEY (ref)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

这是我在创建表后尝试添加 FK 的内容。

```
ALTER TABLE photos
ADD CONSTRAINT FK_photos
FOREIGN KEY (author) REFERENCES users(username)
ON UPDATE CASCADE
ON DELETE CASCADE; 
```

最后是我的 Upload.php

```
<?php
include("/include/session.php");
if(!$session->logged_in){ header("Location: ../main.php"); } else {
}
?>
<?php
$sub=0;

ini_set( "display_errors", 0);
if(isset($_REQUEST['submited'])) {
// your save code goes here

$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 2097152)
&& in_array($extension, $allowedExts))
{
if ($_FILES["file"]["error"] > 0)
{
echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
}
else
{
echo "";
if (file_exists("pictures/" . $_FILES["file"]["name"]))
{
echo "<font size='4' color='red'><b>We are sorry, the file you trying to upload already exists.</b></font>";
  }

else
{
move_uploaded_file($_FILES["file"]["tmp_name"],
"pictures/" . $_FILES["file"]["name"]);
$sub= 1;
$mysqli = new mysqli("localhost", "root", "", "secure_login");

// TODO - Check that connection was successful.

$photo= "pictures/" . $_FILES["file"]["name"];
$fname = $_POST["fname"];
$lname = $_POST["lname"];
$age   =$_POST["age"];
$stmt = $mysqli->prepare("INSERT INTO photos (photo, Firstname, Lastname, Age) VALUES (?, ?, ?, ?)");

// TODO check that $stmt creation succeeded

// "s" means the database expects a string
$stmt->bind_param("ssss", $photo, $fname, $lname, $age);

$stmt->execute();

$stmt->close();

$mysqli->close();

echo "<font size='7' color='white'><b> Success! Your Photo has been Uploaded.</b></font>";
echo '<meta http-equiv="refresh" content="2;url=home.php">';
}

}
}
else
{
echo "<font size='4' color='red'><b>We are sorry, the file you trying to upload is not an image or it exceeds 2MB in size.</b></font><br><font color='blue'><i>Only images under size of 2MB are allowed</i></font>.";
}
}

?>

<form action="" method="post" enctype="multipart/form-data">
<input type="hidden" name="submited" value="true" />

<?php
ini_set( "display_errors", 0);
if($sub==0)
{
?> 
<label  for="file"><font  size="5"><b>Choose Photo:</b></font></label>
<input id="shiny" type="file" name="file" onchange="file_selected = true;" required><br>
First Name:<input  type="text" name="fname" value="<?php echo (isset($_POST['fname']) ? htmlspecialchars($_POST['fname']) : ''); ?>"required><br> 
Last Name:<input  type="text" name="lname" required><br> 
Age:<input type="text" name="age" required><br>
<input id="shiny" type="submit" value="Submit" name="submit">
<?php
}
?>

</form>
</div> 
```

这是 main.php 页面，其中显示用户登录时的用户名

```
if($session->logged_in){
echo "<h1>Logged In</h1>";
echo "<table border='1' width='100%' bgcolor='red'>";
echo "<tr>";
echo "<td>";
echo "Welcome <b>$session->username</b>, you are logged in. <br><br>"
   ."[<a href=\"userinfo.php?user=$session->username\">My Account</a>] &nbsp;&nbsp;"
   ."[<a href=\"useredit.php\">Edit Account</a>] &nbsp;&nbsp;"; 
   echo "[<a href=\"upload.php\">Upload</a>]";
   echo "[<a href=\"test2.php\">My Uploads</a>]";

if($session->isAdmin()){
      echo "[<a href=\"admin/index.php\">Admin Center</a>] &nbsp;&nbsp;";
   }
   echo "[<a href=\"process.php\">Logout</a>]";
   }
   else{
   ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:22:05.603

您必须实际将用户 ID 添加到查询中：

```
$photo= "pictures/" . $_FILES["file"]["name"];
$fname = $_POST["fname"];
$lname = $_POST["lname"];
$age   =$_POST["age"];
$username = "?";//Add code here to get the username you are interested in
$stmt = $mysqli->prepare("INSERT INTO photos (photo, Firstname, Lastname, Age, author) VALUES (?, ?, ?, ?,?)");

// TODO check that $stmt creation succeeded

// "s" means the database expects a string
$stmt->bind_param("ssss", $photo, $fname, $lname, $age,$username); 
```

您没有显示获取用户信息的代码，但假设您当前的查询类似于：

```
SELECT * FROM users WHERE username = 'someUser'; 
```

您可以将其更改为包含照片（分组依据是在用户可以拥有多张照片的情况下：

```
SELECT * FROM users u
LEFT JOIN photos p ON (p.author = u.username)
WHERE u.username = 'someUser'
GROUP BY u.username; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T00:20:42.657

您已对`author`列设置约束并使其不为空。这意味着`photos`表中的每条记录都需要`author`填充，并且该列中的值必须存在于`users`表中的列中`username`。

在您的`INSERT`查询中，您没有设置任何值，`author`因此由于约束和表定义（`NOT NULL`）而失败。

要使其正常工作，您必须确保`author`始终填写列，或使其可为空以允许匿名上传。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T00:22:07.240

您需要`author`在插入中设置字段。由于您的外键约束，任何没有此值的插入尝试都将失败。

您还应该检查并记录任何 MySQL 错误。如果你这样做了，你就会知道插入失败是因为外键约束。

# c# - 构造函数中的 WinRT 异步数据加载

> ID：14449349
> 
> 赞同：8
> 
> 时间：2013-01-21T23:58:32.697
> 
> 标签：c#, windows-runtime, async-await

我想在 ViewModel 的构造函数中加载一些数据，但由于 WinRT 的异步特性，我被迫使用异步方法。不幸的是，我不能有一个异步构造函数，所以我试图将异步方法用作同步方法。我确信有一种更好的方法可以在应用程序加载时加载数据（异步），但目前我的想法是一片空白。

我正在寻找一种方法来使用我正在下降的思路来修复我的应用程序，或者使用更合适的方法永久修复这个问题。

代码非常简单（甚至缺少 ViewModel）只是为了演示我面临的问题。

```
public sealed partial class MainPage : Page
{

    public string Data { get; set; }

    public DataService _dataService { get; set; }

    public MainPage()
    {
        this.InitializeComponent();

        _dataService = new DataService();
        var t = _dataService.GetData();

        Data = t.Result;
    }

    /// <summary>
    /// Invoked when this page is about to be displayed in a Frame.
    /// </summary>
    /// <param name="e">Event data that describes how this page was reached.  The Parameter
    /// property is typically used to configure the page.</param>
    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
    }

}

public class DataService
{
    public async Task<string> GetData()
    {
        //Force async
        await Task.Delay(1);

        return "Hello";
    }
} 
```

亲切的问候

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T00:08:13.977

我最近写了一篇关于[`async`in constructors](http://nitoprograms.blogspot.com/2013/01/async-oop-2-constructors.html)的博客文章。

简而言之，我更喜欢`async`工厂方法：

```
public sealed class MyViewModel : INotifyPropertyChanged
{
  private readonly DataService _service;

  private MyViewModel(DataService service)
  {
    _service = service;
  }

  private async Task InitializeAsync()
  {
    var result = await _service.GetData(); // async initialization

    Data = result; // update data-bound properties with the results
  }

  // Data triggers INotifyPropertyChanged on write
  public string Data { get { ... } set { ... } }

  public static async Task<MyViewModel> CreateAsync()
  {
    var ret = new MyViewModel();
    await ret.InitializeAsync();
    return ret;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T00:17:09.557

Forcing async methods to run synchronously usually leads to deadlocks, so I would not recommend that. The thing with view models is that they usually support change notifications through `INotifyPropertyChanged` `PropertyChanged` event, so there is no need to have all data available immediately. In fact if your data isn't hard-coded - you shouldn't expect to see the data immediately and you would most likely want to show a progress indicator while the data is loading. Thus...

In your constructor call an async initialization method without awaiting the result (since you can't await in a constructor) and in the initialization method when all data is available - assign it to property/properties that your view binds to, raise PropertyChanged event for these properties and hide the progress indicator by changing the view model property that controls its visibility.

# java - Default values of attributes in Restful web service

> ID：14449359
> 
> 赞同：0
> 
> 时间：2013-01-21T23:59:58.580
> 
> 标签：java, spring, rest

I'm using Spring Restful web service using Java 1.7

I've a json mapper class which has getter / setter methods for fName, lName, address, currentTime, etc

Now, this class has below attribute:

```
@JsonSerialize(include = Inclusion.NON_DEFAULT) 
```

Because of this attribute, my rest web service does not return attributes which have default values.

What needs to be done to retain these values?

If I set the Inclusion to NON_NULL, it works but then it gives problem in heartbeat API where I need only currentTime.

I've getter/setter for currentTime in same jason mapper class & this returns all other attributes with default values if I set the inclusion to NON_NULL.

How do I handle this in RESTFul services? I just want time attribute to be returned for heartbeat API & for other APIs, I need all attributes along with default values.

I'll appreciate if any one can give suggestions!!

UPDATE: Here is my code:

Controller.java

```
@RequestMapping(value = "heartbeat", method = RequestMethod.GET, consumes="application/json")
public ResponseEntity<String> getHeartBeat() throws Exception {
    String curr_time = myService.getCurrentTime();      
    return MyServiceUtil.getResponse(curr_time, HttpStatus.OK);
}

@RequestMapping(value = "info", method = RequestMethod.POST, consumes="application/json")
public ResponseEntity<String> getData(@RequestBody String body) throws Exception {
    ....
    myInfo = myService.getMyInfo(myServiceJson);
    return MyServiceUtil.getResponse(myInfo, responseHeader, HttpStatus.OK);
} 
```

MyService.java

```
@Override
public String getCurrentTime() throws Exception {
    String currentDateTime = null;
    MyServiceJson json = new MyServiceJson();
    ObjectMapper mapper = new ObjectMapper();

    try {           
        Date currDate = new Date(System.currentTimeMillis());
        currentDateTime = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss").format(currDate);           
        json.setCurrentDateTime(currentDateTime);

        ObjectWriter writer = mapper.writerWithView(Views.HeartBeatAPI.class);
        return writer.writeValueAsString(json);

    } catch (Exception e) {
        throw new Exception("Excpetion in getCurrentTime: ", HttpStatus.BAD_REQUEST);           
    }
}

@Override
public String getMyInfo(MyServiceJson myServiceJson) throws Exception {             
    MyServiceJson json = new MyServiceJson();
    json.setFirstName("hhh");
    json.setLastName("abc");

    ObjectMapper mapper = new ObjectMapper();
    return mapper.writeValueAsString(json);
} 
```

Views.java

```
public class Views {
    public static class HeartBeatAPI {  }
} 
```

MyServiceJson.java

```
@JsonSerialize(include = Inclusion.NON_NULL)
public class MyServiceJson {
    private int id;
    private String firstName;   
    private String lastName;

    @JsonView(Views.HeartBeatAPI.class) 
    private String currentDateTime;

    // Getter/Setter for the above variables here
    .....

} 
```

When I run heartbeat API, I'm still getting id value as 0 which is default value.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:26:41.607

You might want to consider using either a @JsonFilter or @JsonView.

### Using JsonFilter

```
@JsonFilter("myBeanFilter")
public class MyBean implements Serializable {
    private String fName;
    private lName;
    private address;
    private Date currentTime;

    // Constructors, Getters/Setters
}

final MyBean bean = new MyBean();
final ObjectMapper mapper = new ObjectMapper();
final FilterProvider filters = new SimpleFilterProvider().addFilter("myBeanFilter",
    SimpleBeanPropertyFilter.filterOutAllExcept("currentTime"));
final String json = mapper.filteredWriter(filters).writeValueAsString(value); 
```

### Using JsonView

```
public class Views {
    static class HeartbeatAPI { }
}

public class MyBean implements Serializable {
    private String fName;
    private lName;
    private address;

    @JsonView(Views.HeartbeatAPI.class)
    private Date currentTime;

    // Constructors, Getters/Setters
}

final MyBean bean = new MyBean();
final ObjectMapper mapper = new ObjectMapper().configure(
    SerializationConfig.Feature.DEFAULT_VIEW_INCLUSION, false);;
final ObjectWriter writer = mapper.writerWithView(Views.HeartbeatAPI.class);
final String json = writer.writeValueAsString(bean); 
```

Both of these methods ***do*** require that you have control of the serialization process, via an `ObjectMapper`.

*   [JsonFilter Guide](http://wiki.fasterxml.com/JacksonFeatureJsonFilter)
*   [JsonView Guide](http://wiki.fasterxml.com/JacksonJsonViews)

# facebook - FB JS-API：GraphMethodException“不支持的获取请求”访问外部配置文件时

> ID：14449362
> 
> 赞同：1
> 
> 时间：2013-01-22T00:00:27.727
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-opengraph

我使用 Javascript API 编写了一个 facebook 应用程序，并希望使用该应用程序显示另一个用户的名称（我只知道另一个用户的 facebook ID）。用户不是彼此的朋友。

我用第一个用户登录并打电话

```
FB.api('/'+id_of_second_user, function(result) {alert(result);}); 
```

返回带有消息“不支持的获取请求”的 GraphMethodException。

当我以第一个用户身份登录 facebook 时，在浏览器中调用 http://graph.facebook.com/[id_of_second_user] 可以正常工作。

我不明白为什么，对于使用浏览器的调用不应该比通过 Javascript API 调用的 API 拥有更多的权限（至少应用程序有一个应用程序令牌并且用户使用 FB.login 登录。两者都是错误的对于使用浏览器的直接请求）

我是否必须对 http://graph.facebook.com/[id_of_second_user] 使用本机 ajax 调用，还是可以为此使用 Javascript API？

# python - 列表元素与数据框描述什么时候发生？

> ID：14449367
> 
> 赞同：4
> 
> 时间：2013-01-22T00:00:38.707
> 
> 标签：python, pandas

这可能很简单，但我不知道出了什么问题。我无法列出 DataFrame 的元素。有时会列出 DataFrame 的元素，有时它只是对数据列的数量和类型的描述。我知道行数是一个因素，但即使我只有几行，我也只能得到描述。例如：如果我有一个名为“allpledges”的 DataFrame，它会给我一个描述

```
In [5]:

allpledges

Out[5]:

<class 'pandas.core.frame.DataFrame'>
Int64Index: 305384 entries, 0 to 305383
Data columns:
Pledge#       305384  non-null values
Source        305384  non-null values
Date          305384  non-null values
Break         305384  non-null values
Progcode      237002  non-null values 
```

这是可以理解的，因为显示的行太多。但是当我尝试查看一些时，它仍然给了我同样的东西

```
In [13]:

allpledges[:5]

Out[13]:

<class 'pandas.core.frame.DataFrame'>
Int64Index: 5 entries, 0 to 4
Data columns:
Pledge#       5  non-null values
Source        5  non-null values
Date          5  non-null values
Break         5  non-null values
Progcode      0  non-null values 
```

当我想要的是列出的前五行时。我已经在教程中看到了这一点，但无法弄清楚我在这里做错了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T00:19:48.160

这些设置在[`options`](http://pandas.pydata.org/pandas-docs/dev/basics.html#working-with-package-options)（我怀疑您正在寻找`max_rows`or `max_columns`，但在文档字符串中可以看到许多选项`set_options`）中控制：

```
In [11]: pd.options.display.max_columns
Out[11]: 20 
```

并使用以下方法更改它们`set_option`：

```
In [12]: pd.set_option('display.max_columns', 10) 
```

*如果 DataFrame**具有**比这些设置更多的列或更多的行，它将缩写。*

例如：

```
In [17]: df = pd.DataFrame(pd.np.arange(10).reshape(5,2))

In [18]: pd.set_option('display.max_rows', 4)

In [19]: df
Out[19]: 
<class 'pandas.core.frame.DataFrame'>
Int64Index: 5 entries, 0 to 4
Data columns:
0    5  non-null values
1    5  non-null values
dtypes: int64(2 
```

# c# - 如何在 VS2012 中允许不安全的代码

> ID：14449368
> 
> 赞同：1
> 
> 时间：2013-01-22T00:00:42.017
> 
> 标签：c#, build, windows-phone-8

我读过的所有教程都只是说要转到项目的 BUILD 选项，然后选中“允许不安全代码”复选框。当我这样做时，该复选框被禁用并且无法单击...

这是一个 Windows Phone 8 类库，如果这有什么不同的话。

任何想法如何允许不安全的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:05:33.250

我不认为这是可能的。如果微软让每个应用程序都让手机崩溃，即使这不是他们的错，他们也会从客户那里得到非常糟糕的反馈。因此，我认为普通的 WP 永远不会被允许在运行时使用不安全的代码。

# c - Ubuntu递归列出文件，检测符号链接

> ID：14449370
> 
> 赞同：0
> 
> 时间：2013-01-22T00:00:48.257
> 
> 标签：c, linux, symlink, stat, dirent.h

我正在尝试使用递归列出我的本地文件系统`dirent.h`。为了防止遵循符号链接，我使用了`sys/stat.h`标头。在下面你可以找到我的 SSCCE 程序。

```
/**
 * coding: utf-8
 *
 * Copyright (C) 2013, Niklas Rosenstein
 *
 * listdir.c - List up directories and file-content recursively.
 */

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <dirent.h>
#include <sys/stat.h>

void list_dir(const char* directory_name) {
    DIR* directory_handle = opendir(directory_name);
    if (directory_handle == NULL) {
        fprintf(stderr, "Could not open directory %s.\n", directory_name);
        return;
    }

    char buffer[1024];
    struct dirent* dentry;
    int directory_name_length = strlen(directory_name);

    memcpy(buffer, directory_name, directory_name_length);
    buffer[directory_name_length] = '/';

    while ((dentry = readdir(directory_handle)) != NULL) {
        char* name = dentry->d_name;
        int length = strlen(name);

        // Skip the dotted elements.
        if (strcmp(name, ".") == 0 || strcmp(name, "..") == 0) continue;

        // Concatenate the directory name with the element name.
        memcpy(buffer + directory_name_length + 1, name, length);
        buffer[directory_name_length + 1 + length] = 0;

        printf("%s\n", buffer);

        // Proceed recursively if the element is a directory.
        struct stat s;
        if (stat(buffer, &s) != 0) {
            fprintf(stderr, "WARNING: stat() failed on %s\n", buffer);
            continue;
        }

        mode_t mode = s.st_mode;
        if (mode & S_IFDIR && !(mode & S_IFLNK)) {
            list_dir(buffer);
        }

    }
    closedir(directory_handle);
}

int main(int argc, char** argv) {
    if (argc != 2) {
        fprintf(stderr, "Expected exactly 2 arguments.\n");
        return -1;
    }
    list_dir(argv[1]);
    return 0;
} 
```

我只是无法正确检测符号链接。当它遇到一个符号链接时，链接到它的父目录，它会继续下去。我的系统上似乎有几个这样的文件夹，例如。`/usr/bin/X11`：

```
/usr/bin/X11/
    X11/ -> . 
```

此行不能完全正确：`if (mode & S_IFDIR && !(mode & S_IFLNK)) {`. 可能是该`stat()`功能的问题还是我在这里遗漏了一些明显的东西？

这是调用 后我的终端的图片，`./listdir /usr/bin/X11`大约一秒钟后按 停止程序`^C`。

![在此处输入图像描述](../Images/bc9e66300df42e5c0f0b893d4410a39a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:17:28.123

尝试`lstat`而不是`stat`：后者在符号链接上完成时，返回有关其目标的信息（最后一个，它不是符号链接）。

`S_IFDIR`并且`S_IFLNK`不应该像独占位标志一样使用。对于目录，使用`S_ISDIR(mode)`; 对于符号链接，您不需要测试：`lstat`不会将符号链接报告为目录，当您只想*跳过*符号链接时，这就足够了。

# php - 从 Twitter API 1 切换到 1.1（添加身份验证）

> ID：14449371
> 
> 赞同：0
> 
> 时间：2013-01-22T00:00:49.740
> 
> 标签：php, twitter, twitter-oauth, json

目前，我使用此代码来检索我的时间线上的最新 6 条推文。我阅读了 Twitter 文档，但我不明白如何实现我创建的应用程序的 Auth 密钥。

```
 <?php
    $json = wp_remote_get("http://api.twitter.com/1/statuses/user_timeline/username.json?count=6", true);
    $decode = json_decode($json['body'], true);
    echo "
        <ul style='color:#6E6E6E'>";
        $count = count($decode); //counting the number of status
        for($i=0;$i<$count;$i++){ echo '
        <li>'.$decode[$i]['text'].'<br><a href='; echo '"http://twitter.com/#!/'.$decode[0][user][name].'/status/'.$decode[$i][id].'"><small>'. strftime('%e %B',strtotime($decode[$i]['created_at'])) ."</small></a> - <a href='http://twitter.com/intent/tweet?in_reply_to=".$decode[$i][id]."'><small>rispondi</small></a> - <a href='http://twitter.com/intent/retweet?tweet_id=".$decode[$i][id]."'><small>retweet</small></a> - <a href='http://twitter.com/intent/favorite?tweet_id=".$decode[$i][id]."'><small>preferito</small></a></li>";} echo "
        </ul>
    ";
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:56:26.190

[http://ronzohan.blogspot.com/2013/01/how-to-connect-in-twitter-using-php.html](http://ronzohan.blogspot.com/2013/01/how-to-connect-in-twitter-using-php.html)，您可以尝试查看有关 twitter oauth 工作原理的说明。

# macos - 致命：提交时无法解析 HEAD 错误

> ID：14449372
> 
> 赞同：16
> 
> 时间：2013-01-22T00:00:51.780
> 
> 标签：macos, git, github, bitbucket

每当我尝试提交我的工作时，我都会收到此错误。

```
fatal: could not parse HEAD 
```

如果我想保留我的更改，我应该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T00:07:50.773

你知道`HEAD`应该指向哪个分支吗？是`master`吗？运行`git symbolic-ref HEAD refs/heads/master`。

基本上，带有名称的符号引用以`HEAD`某种方式损坏。`.git`您（或您运行的软件）必须在目录中闲逛。如果我是你，我会检查以确保你的回购中没有其他东西被损坏。您可以通过运行来验证您的对象数据库`git fsck`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-21T10:07:03.197

将您最近更改的新文件复制到另一个目录，删除计算机中的 git 本地存储库，使用“git clone URL”再次克隆存储库，将您复制到另一个最近更改的文件移回该目录，执行 git add files， git commit -m "ur msg"，并使用 git push 推送到远程仓库

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-12-20T21:29:02.567

我刚才也有同样的问题。我的项目中的其他存储库发生了更改`git changes field`。我试图取消暂存它们，并仅推送有关我想要的文件夹的更改。到目前为止，我为克服更改其他文件夹（使用 .git 等从 pc 中删除项目文件夹等）的问题而苦苦挣扎。我不确定我是否可以解释这种情况，但这对我有帮助：

我从回收站复制了`.git`我用项目文件夹**删除的文件。****复制文件**并**粘贴到**我在提交中遇到 HEAD 问题的项目文件夹中。我看到有零件丢失。它复制了文件夹中所有与当前不匹配的部分，并`.git`显示消息要跳过或保留那些已经存在的部分。我只是跳过了它们。它对我有用。我希望这将在未来对其他人有所帮助。

# java - 在对象数组列表中获取对象的属性

> ID：14449373
> 
> 赞同：0
> 
> 时间：2013-01-22T00:00:54.577
> 
> 标签：java, oop, arraylist

好的，所以我制作了一个名为的对象`Food`，它具有描述食物的各种属性（蛋白质（以克为单位）、卡路里、碳水化合物等）。然后我创建了一个名为的类`Foodlist`，它读取一个 excel 表，`Food`为电子表格的每一行创建一个新对象（用该行列中的信息填充对象）；然后`Foodlist`该类创建一个`ArrayList`Food 对象。我现在想做一个`ProteinList`，它是一个子列表，`FoodList`并且有一种方法可以将所有高蛋白食物分成一个数组。`Proteinlist`extends `Foodlist`，如何访问列表中 Food 对象的“蛋白质”属性？

这是我的代码卡住的地方：

```
 public Food[] groupProtein() {
        for(int i = 0; i < foodList.size(); i++)
        {
            if(foodList.get(i).protein > 6){//HERE IS THE PROBLEM, trying to get the property of the food object at i
                proteinFoods.add(foodList.get(i));
            }
        }

        Food[] temp = new Food[proteinFoods.size()];
        for (int i = 0; i < temp.length; i++) {
            temp[i] = proteinFoods.get(i);
        }

        return temp;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:04:35.997

```
public class ProteinList extends FoodList{
    //other stuff...
    public double get(int i){
        return super.get(i).getProtein();
    )
} 
```

这就是你想要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T00:06:57.147

如果该属性在您的类`protein`定义`private`中定义，您将无法从类外的任何方法访问它。你需要*在*你的类中定义一个 getter 方法：

```
public class Food {
    ...
    public int getProtein() {
        return protein;
    }
    ....
} 
```

因此，您可以从类外的方法中读取值：

```
foodList.get(i).getProtein() 
```

我假设这`foodList`是正确定义的，所以该`get(i)`方法将返回一个`Food`对象（或它要返回的任何类）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T08:53:32.953

如果您的`protein`财产有吸气剂，您的方法可能是：

```
public Food[] groupProtein() {
    for(Food food : foodList)
    {
        if(food.getProtein() > 6){
            proteinFoods.add(food);
        }
    }

    return proteinFoods.toArray(new Food[0]);
} 
```

我想`proteinFoods`是`List<Food>`……对吧？

# c - 创建一个函数来读取不同的数据类型

> ID：14449374
> 
> 赞同：3
> 
> 时间：2013-01-22T00:00:59.380
> 
> 标签：c

我正在创建一个 C99 程序，我需要一些帮助来摆脱我的代码的一点冗余。我想将以下代码转换为函数的两次调用，但我不知道该怎么做。

我想读取两个文件（每个文件有 15 个入口）并将它们的内容放入两个数组中。问题是这些数组属于不同的数据类型。

这是我所拥有的：

```
typedef char string[30];

int
    _vInt[15];

string
    _vString[15];

FILE
    *_fInt,
    *_fString;

int main(){

      ...

      for(int i = 0; !feof(_fInt) && i < 15; ++i){
           fscanf(_fInt, "%d", &_vInt[i]);
           ...
      }

      for(int i = 0; !feof(_fString) && i < 15; ++i){
           fscanf(_fString, "%s", _vString[i]);
           ...
      }

      ...

 } 
```

所以，我不想用这个`for`两次。我宁愿调用一个函数两次：

```
readFile(_fInt, "%d", _vInt);
readFile(_fString, "%s", _vString); 
```

问题是我不知道函数的原型应该如何，也不知道应该如何使用它。

是的，我可以使用丑陋的`void *`解决方案......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:17:52.410

您可以使用宏。

```
#define readFile(file, fmt, arr) \
    for (int i = 0; !feof(file) && i < 15; ++i) { \
        fscanf(file, fmt, arr[i]); \
    }

readFile(_fInt, "%d", &_vInt);
readFile(_fString, "%s", _vString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T01:04:49.473

另一种解决方案是在 readFile() 函数中使用枚举类型和表。

```
#include <stdlib.h>
#include <stdio.h>

// Put in Header file
typedef char string[30];
typedef enum {
    ITInt    =  0,
    ITString =  1,
    ITMax
} InputTypes;

// Should be in module with readFile()
struct inputTypeEntry_s{
    const char *format;
    size_t sz;
};

struct inputTypeEntry_s inputTypeLUT[ITMax] = {
    { "%d", sizeof(int) },      // ITInt
    { "%s", sizeof(string) },   // ITString
};

int readFile(FILE *fp, InputTypes type, void *data) {
    char *ptr = (char *)data;
    for(int i = 0; !feof(fp) && i < 15; ++i){
        fscanf(fp, inputTypeLUT[type].format, ptr + (i * inputTypeLUT[type].sz) );
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T00:07:09.317

您可以将类型提取到 a `(void *)`，但它不会很漂亮。

```
void foo(FILE *file, const char *format, void *arr, size_t size) {
  for(int i = 0; !feof(file) && i < 15; ++i){
       fscanf(file, format, ((char *)arr) + (size * i));
       ...
  }      
} 
```

函数调用看起来像

```
foo(_fInt, "%d", (void *)&_vInt, sizeof(int)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T01:00:21.337

既然您提到您可以使用 C11 功能，这里有一个使用 C11 类型泛型表达式的示例。我也用它来消除传递格式字符串的要求：

```
#include <stdio.h>

typedef char string[30];

#define generic_arg(X) _Generic(X, string: X, \
                                   default: &X)

#define generic_format(X) _Generic(X, string: "%s", \
                                      int:    "%d")

#define readFile(file, variable) for (int i = 0; i < 15; i++)            \
                                 {                                       \
                                     fscanf(file,                        \
                                            generic_format(variable[i]), \
                                            generic_arg(variable[i]));   \
                                 }

int main(void)
{
    int _vInt[15];
    string _vString[15];

    FILE *_fInt = fopen("ints", "r");
    FILE *_fString = fopen("strings", "r");

    readFile(_fInt, _vInt);
    readFile(_fString, _vString);

    for (int i = 0; i < 15; i++)
    {
        printf("%d %s\n", _vInt[i], _vString[i]);
    }

    fclose(_fInt);
    fclose(_fString);

    return 0;
} 
```

我不确定这是否是一个很好的例子——它肯定比你的两对循环解决方案更复杂，但我认为它符合你的要求。

# objective-c - 在 iTunes 已经启动或关闭时检查 [iTunes isRunning] 时出现问题 - OSX

> ID：14449378
> 
> 赞同：1
> 
> 时间：2013-01-22T00:01:25.663
> 
> 标签：objective-c, macos, cocoa, itunes, scripting-bridge

所以，我有一个状态栏应用程序，当我点击它时，它会做一些事情，比如检索当前艺术家、曲目等等......
所以当点击状态栏时，我会检查

```
if([iTunes isRunning]){
    NSLog(@"do my stuff...");
} 
```

它工作得很好，但有时在 iTunes 启动或关闭时我会遇到一些问题：

1.  如果 iTunes 正在启动（图标在 Dock 上弹跳）并且我单击我的应用程序的状态栏图标，当我的鼠标悬停状态栏图标并且我的应用程序只是冻结时会出现“彩虹加载圈”（或沙滩球）。当 iTunes 完成启动并显示我的库窗口时，我的应用程序将继续其工作而不会出现问题。这不是一个大问题，因为该应用程序继续工作，即使它在 iTunes 启动时冻结。
2.  当 iTunes 关闭时，如果我足够快地点击状态栏图标（在 iTunes 完全关闭之前），可能会发生 2 件事：1- iTunes 将重新打开，即使我选择关闭它，2- iTunes 已成功关闭但是我的应用程序将永远冻结，当我的鼠标悬停在状态栏图标时会出现“彩虹加载圈”。即使我尝试再次打开 iTunes，我的应用程序也会保持这种状态。我必须去活动监视器来停止这个过程。

关于如何解决其中一些问题的任何想法？
谢谢！

# c - OpenSSL向具有证书颁发机构的客户端提供服务器证书？

> ID：14449381
> 
> 赞同：1
> 
> 时间：2013-01-22T00:01:44.927
> 
> 标签：c, openssl, mutual-authentication

我正在尝试学习如何使用 OpenSSL 库（total newb）并且在弄清楚如何让客户端连接到具有正确证书的服务器时遇到了一些麻烦，如果证书不正确则失败。我的用例是构建一个没有中央 CA 的 p2p 应用程序，所以我不能依赖 CA 证书。具体来说，服务器和往常一样有一个cert/key，客户端会通过请求其他p2p节点投票来确定一个服务器的证书。

我有两个具体问题：

*   在下面的代码片段中，如果我注释掉“密码列表”下面的选择，我希望客户端无法连接。它仍然有效！我错过了一些东西，对吧？
*   有没有办法让客户端使用服务器证书，并且足以打开连接？即没有密钥，没有CA？

客户：

```
ctx = SSL_CTX_new(DTLSv1_client_method());
SSL_CTX_set_cipher_list(ctx, "HIGH:!DSS:!aNULL@STRENGTH");

// If I comment out below stuff, client still connects happily!?
if (!SSL_CTX_use_certificate_file(ctx, "certs/server-cert.pem", SSL_FILETYPE_PEM))
    printf("\nERROR: no certificate found!");

if (!SSL_CTX_use_PrivateKey_file(ctx, "certs/server-key.pem", SSL_FILETYPE_PEM))
    printf("\nERROR: no private key found!");

if (!SSL_CTX_check_private_key (ctx))
    printf("\nERROR: invalid private key!"); 
```

服务器：

```
SSL_CTX_set_cipher_list(ctx, "HIGH:!DSS:!aNULL@STRENGTH"); // high strength ciphers
SSL_CTX_set_session_cache_mode(ctx, SSL_SESS_CACHE_OFF);

if (!SSL_CTX_use_certificate_file(ctx, "certs/server-cert.pem", SSL_FILETYPE_PEM))
    printf("\nERROR: no certificate found!");

if (!SSL_CTX_use_PrivateKey_file(ctx, "certs/server-key.pem", SSL_FILETYPE_PEM))
    printf("\nERROR: no private key found!");

if (!SSL_CTX_check_private_key (ctx))
    printf("\nERROR: invalid private key!"); 
```

我的代码在[https://github.com/a34729t/exp/tree/master/tun2udp/dtls](https://github.com/a34729t/exp/tree/master/tun2udp/dtls)；它由 Robin Seggelmann 的 DTLS 示例构建而成。具体来说，我正在使用 server3_oo.c。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:24:58.410

SSL/TLS 可以在不同的模式下运行。最常见的模式是仅服务器认证，其中只有服务器有证书和密钥。然后是相互认证模式，也称为客户端认证，其中客户端也有一个（客户端）证书和密钥。然后有一个完全匿名的模式，服务器和客户端都不需要验证自己，也不需要证书和密钥。

除非您另外告诉 OpenSSL，否则它将在仅服务器身份验证模式下运行。在这种模式下，客户端中的这些行：

```
if (!SSL_CTX_use_certificate_file(ctx, "certs/server-cert.pem", SSL_FILETYPE_PEM))
    printf("\nERROR: no certificate found!");
if (!SSL_CTX_use_PrivateKey_file(ctx, "certs/server-key.pem", SSL_FILETYPE_PEM))
    printf("\nERROR: no private key found!"); 
```

将导致客户端加载客户端证书（顺便说一句，您永远不必在客户端中加载**服务器**证书和密钥）。但是，由于服务器不向客户端请求证书，因此客户端永远不会提供证书。注释掉这些行会使客户端不加载任何客户端证书，这没有什么区别，因为它们无论如何都没有被使用。

要让服务器向客户端请求证书，并在没有提供证书时让服务器拒绝连接，您必须像这样告诉服务器（省略错误处理）：

```
SSL_CTX_set_verify(ctx, SSL_VERIFY_PEER | SSL_VERIFY_FAIL_IF_NO_PEER_CERT, NULL); 
```

`SSL_VERIFY_PEER`使服务器请求客户端证书，并`SSL_VERIFY_FAIL_IF_NO_PEER_CERT`在客户端未提供证书时导致服务器中止连接（请参阅[文档](https://www.openssl.org/docs/ssl/SSL_CTX_set_verify.html)）。如果您不使用后一个选项，您可以自行检查客户端是否使用[SSL_get_peer_certificate](https://www.openssl.org/docs/ssl/SSL_get_peer_certificate.html)函数发送了证书。

# coldfusion - 如何在使用 ValueList 生成的 cfparam VARCHAR 列表中转义逗号？

> ID：14449384
> 
> 赞同：3
> 
> 时间：2013-01-22T00:02:42.403
> 
> 标签：coldfusion, coldfusion-8, cfquery, cfqueryparam

假设有一个 SQL 表`Fruit`

```
id | name
--- ------
 1 | 'apples'
 2 | 'pears'
 3 | 'kiwi'
 4 | 'bananas, peaches and plumbs' 
```

鉴于以下查询

```
<cfquery name="qAllFruit" datasource="#DSN#">
    SELECT name FROM Fruit
</cfquery>
<cfquery name="qLeftoverFruit" datasource="#DSN#">
    SELECT name FROM Fruit
     WHERE name NOT IN (<cfqueryparam CF_SQL_TYPE="CF_SQL_VARCHAR" 
                                      value="#ValueList(qAllFruit.name)#" 
                                      list="yes" />)
</cfquery> 
```

then`qLeftoverFruit`将错误地返回 1 行：`bananas, peaches and plumbs`因为扩展`cfqueryparam`列表的解释不正确：

```
WHERE name NOT IN ('apples','pears','kiwi','bananas','peaches and plumbs') 
```

有没有办法在仍然使用`cfqueryparam`标签的同时纠正这个问题`ValueList`？

**更新**这里有一个要点可以用来重新创建这个问题： http: [//gist.github.com/a642878c96b82b21b52c](http://gist.github.com/a642878c96b82b21b52c)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T03:08:21.297

@Daniel Mendel，我认为问题出在 ColdFusion 使用的默认分隔符上。您的数据中包含“，”，而 CF 中的默认分隔符是“，”。

像这样更改您的查询 -

```
WHERE name NOT IN ( <cfqueryparam CFSQLType="CF_SQL_VARCHAR" 
                       value="#ValueList(qTags.tag,';' )#" 
                       list="Yes" separator=";" />
                  ) 
```

只需将 valueList 中的分隔符更改为 ';' 从默认的 ',' 并将 QueryParam 分隔符设置为 ';'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:25:14.863

这个问题提供了两个例子。从 CF 退后一步，考虑在一个查询中单独完成这项工作。对于问题中的查询：

```
<cfquery name="qLeftoverFruit" datasource="#DSN#">
SELECT name FROM Fruit
WHERE name NOT IN (SELECT name FROM Fruit)
</cfquery> 
```

使用来自 github.com 的示例：

```
<cfquery name="qTest" dbtype="query">
SELECT id FROM qTags
WHERE tag IN (SELECT tag FROM qTags)
</cfquery> 
```

这些单个查询本质上执行了两个查询方法的逻辑。它消除了使用 cfqueryparam、处理潜在的巨大列表以及确定“安全”分隔符的陷阱的需要。

但是，我不确定为什么需要此查询。它应该始终返回一个空查询（来自问题的查询）或所有记录（来自 github.com 的查询）。原始问题中未提及的两个查询之间是否存在中间步骤？

# php - Facebook SDK：PHP 和 Javascript 之间的共享登录

> ID：14449389
> 
> 赞同：0
> 
> 时间：2013-01-22T00:03:08.797
> 
> 标签：php, javascript, facebook, facebook-javascript-sdk, facebook-php-sdk

我正在构建一个小型 Facebook 应用程序，我最终需要在客户端 (JS) 和服务器 (PHP) 上使用 Facebook SDK 中的方法。在客户端，我主要使用 FB.ui 方法，而在服务器上，我大量使用 Graph API。

但是，有没有办法做到这一点而不必强制用户登录两次？如何让用户登录一次，并将该登录名用于客户端和服务器？这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:56:22.767

在 JS 和 PHP 中仅通过一次登录（或不登录）使用 Facebook SDK 的最佳方式是使用**token**。“*服务器端*”过程在 JS 和 PHP 中是相同的。

*此过程对于首次用户登录或在过期时拥有新令牌很有用。*

1.  从您的页面，用户被重定向到 Facebook 以授权您的应用程序。
2.  用户接受后，Facebook 使用**令牌**、Facebook **ID**、名字、姓氏、电子邮件等重定向您页面上的用户。
3.  将用户信息保存在数据库中

现在，您的应用程序可以在没有用户登录的情况下与 Facebook 建立连接（在 JS、PHP 或其他中）。所需的元素是您的**appId**、您的**密码**、用户**ID**和用户**令牌**。

希望能帮到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T03:47:24.513

事实上，这不起作用，因为令牌过期得很快。offline_access 也被删除了，因此当您想与他保持联系时，用户必须明确使用 facebook 应用程序（当令牌过期时，您根本无法做任何事情）。

您仍然可以保存当前令牌以用于登录目的，但您应该在每次用户再次通过 FB 登录时更新用户表。

此外，您不能通过令牌登录，但您可以很容易地在 JS 或 PHP 中获取令牌。

```
 FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
        //user is logged in and has accepted you apps stuff.

        var uid = response.authResponse.userID;
        var accessToken = response.authResponse.accessToken;
        // do some fancy ajax function to send the token to the server here. 
    } 
    else if (response.status === 'not_authorized') {
        // the user is logged in to Facebook, 
        // but has not authenticated your app
        FB.login(function(response) {
           if (response.authResponse) {
             console.log('Welcome!  Fetching your information.... ');
             FB.api('/me', function(response) {
               console.log('Good to see you, ' + response.name + '.');
             });
           } else {
             console.log('User cancelled login or did not fully authorize.');
           }
         }), {scope: 'email,user_likes'}); //specify all the scopes you need for your app here. 
    } 
    else 
    {
        //user is not logged in to facebook. 
    }
 }); 
```

那将是获取令牌的 JS 部分，如果您想使用 PHP 获取它，那就更容易了。

```
 <?php
require_once("/FBAPI/src/facebook.php");
$config = array();
$config['appId'] = 'your_app_id';
$config['secret'] = 'your_app_secret';
$facebook = new Facebook($config);

$user = $facebook->getUser();
if(!$user){
    $loginUrl = $facebook->getLoginUrl(array('scope'=>'publish_stream', 'redirect_uri'=>'http://www.example.com'));
}
if($user){
    try{
        $user_profile = $facebook->api('/me');
        $access_token = $facebook->getAccessToken();
    }
    catch(FacebookApiException $e){
        error_log($e);
        $user = NULL;
    }
}
else{
    echo '<a href="'.$loginUrl.'"><img src="img/login.png"/></a>';
}
?> 
```

编辑：事实上，你可以这样做：

显示登录页面，让用户通过JS登录。登录过程完成后，您可以通过 $facebook->getUser(); 检查用户是否已登录。PHP SDK的功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T07:04:16.973

当我使用 Heroku 部署我的教程 Facebook 应用程序时，我没有学到一个巧妙的技巧。在 Heroku 提供的示例模板上，他们有 Facebook 登录按钮并订阅了**auth.authResponseChange**，如下所示：-

```
FB.Event.subscribe('auth.authResponseChange', function(response) {
    window.location = window.location;
}); 
```

这会导致页面刷新，并且在 Facebook 的身份验证后由 JavaScript SDK 设置的 cookie 将可用于 PHP SDK。您也可以通过 PHP SDK 登录用户，用户登录后 JavaScript SDK 将能够工作，无需再次从 JavaScript SDK 登录

# javascript - 将灯箱“关闭”按钮转换为下载按钮

> ID：14449392
> 
> 赞同：0
> 
> 时间：2013-01-22T00:03:26.093
> 
> 标签：javascript, jquery, download, lightbox2

我在我的网页上使用 lightbox2 javascript，但我想知道是否有办法将关闭按钮转换为下载按钮。我不使用的原因`title="<a href>...</a>"`是因为它搞砸了我的 php：我可以将照片放在一个文件夹中，其余的由网站完成。

所以，我找到了退出覆盖层的代码，`.lb-close`用于关闭按钮类......

```
 $lightbox.find('.lb-loader, .lb-close').on('click', function(e) {
    _this.end();
    return false;
  }); 
```

Lightbox2 代码： [https ://raw.github.com/lokesh/lightbox2/master/js/lightbox.js](https://raw.github.com/lokesh/lightbox2/master/js/lightbox.js)

ps 我尝试为我的画廊使用其他脚本，但这迫使我重建整个页面，这需要花费大量时间......

# java - 长字符串的正确格式

> ID：14449396
> 
> 赞同：0
> 
> 时间：2013-01-22T00:03:30.967
> 
> 标签：java, format, presentation

这与其说是一段代码的问题，不如说是当一个冗长的刺被强行放在单独的行上时应该如何正确布置它。

例如，假设我在一个小文本区域中有以下文本行。

```
JOptionPane.showMessageDialog(null, "The start position must be > 0 and the stop 
position must be < 12, please try again."); 
```

我意识到上述代码的功能不受格式的阻碍，但这是正确的布局方式吗？例如，一位朋友在法律上提到它应该使用连接来完成。

```
JOptionPane.showMessageDialog(null, "The start position must be > 0 and the stop"
                              + "position must be < 12, please try again."); 
```

我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:18:16.033

“从法律上”说，两者都同样正确。如果一个不合法，它就不会编译。

就可读性而言，我通常支持您的朋友（明确地将您的字符串分成两行并将其连接起来）。根据 Oracle 发布的[Java 代码约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-136091.html#313)，行不应超过 80 个字符。我（和几个人都同意）这太短了，应该使用 100 或 120 个字符的行限制。

基本上，如果您的代码行（包含长字符串）将超出您的行数限制，我推荐您朋友的连接两个字符串的解决方案。

# java - Google Chrome 是否像 IE 一样容易受到零日 Java 漏洞的攻击？

> ID：14449403
> 
> 赞同：-2
> 
> 时间：2013-01-22T00:04:07.303
> 
> 标签：java, security, internet-explorer, google-chrome, exploit

我已经看到 IE 6 到 10 可以使用 Zero Day Java Exploit (CVE-2013-0422) 轻松利用 如果 IE 已被利用.. 我们可以访问硬盘文件甚至 cookie 或密码.. 这非常危险

[这是截图](http://i.stack.imgur.com/dteBt.jpg)

而且谷歌浏览器必须有Java扩展..

问题是 Google Chrome 是否有可能成为 Java 0 Day Exploit？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:08:03.603

是的。如果浏览器启用了 Java（不是 Javascript），那么它与运行易受攻击的 Java 版本的其他任何东西一样易受攻击。这适用于 Firefox、Safari 等。

保护自己的唯一方法是禁用 Java 插件/扩展并等待补丁。

# c# - 使用 C# 编写 TEXT 文件

> ID：14449407
> 
> 赞同：2
> 
> 时间：2013-01-22T00:04:23.013
> 
> 标签：c#, savefiledialog

我正在尝试将 SaveFileDialog 添加到我的 Windows 应用程序中，在其中我从多行文本框的内容中保存一个简单的文本文件。该程序似乎在保存对话框之前工作正常，并且我没有收到任何错误，但是一旦我单击保存按钮，应用程序就会挂起。唯一的出路是单击“停止调试”按钮。以下是我尝试过的代码部分，但都创建了相同的挂起：

```
private void button_SaveToFile_Click(object sender, EventArgs e)
    {
        SaveFileDialog saveFileDialog1 = new SaveFileDialog();
        saveFileDialog1.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*";            
        saveFileDialog1.RestoreDirectory = true;

        if (saveFileDialog1.ShowDialog() == DialogResult.OK)
        {
               File.WriteAllText(saveFileDialog1.FileName, textBox_ListDestination.Text);
        }            
    } 
```

和

```
private void button_SaveToFile_Click(object sender, EventArgs e)
    {
        Stream myStream;
        SaveFileDialog saveFileDialog1 = new SaveFileDialog();

        saveFileDialog1.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*";
        saveFileDialog1.FilterIndex = 2;
        saveFileDialog1.RestoreDirectory = true;

        if (saveFileDialog1.ShowDialog() == DialogResult.OK)
        {
            if ((myStream = saveFileDialog1.OpenFile()) != null)
            {
                File.WriteAllText(saveFileDialog1.FileName, textBox_ListDestination.Text);
                myStream.Close();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T01:49:04.047

耶格尔，

当我尝试使用您的第一个示例代码重新创建问题时，我没有任何问题。如果我猜的话，您可能会遇到内存分配问题（使用非托管资源）以及多次调试尝试，并且可能一遍又一遍地重新保存到同一个文件可能会留下一个错误的文件指针。

你的第二个例子不起作用。当您调用 File.WriteAllText 时，它会自动为您打开、写入和关闭文件。（在这里阅读：http: [//msdn.microsoft.com/en-us/library/system.io.file.writealltext.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.writealltext.aspx)）

当您调用 OpenFile 时，您将锁定该文件。在您的代码中，当执行 File.WriteAllText 时，它会爆炸，因为该文件已在使用中。如果您想使用 OpenFile 处理文件，则必须更改处理文件的方式。这是一个示例： http: [//msdn.microsoft.com/en-us/library/system.windows.forms.savefiledialog.openfile](http://msdn.microsoft.com/en-us/library/system.windows.forms.savefiledialog.openfile(v=VS.71).aspx) (v=VS.71).aspx 如果需要，请注意示例如何关闭文件要在文件中工作，您需要在调用 CloseFile 方法之前编写该工作的代码。

如果您想了解如何使用 OpenFile 处理文件的示例，互联网上应该有几个示例，但根据您的需要，我认为 File.WriteAllText 会起作用。

回到第一个例子。

如果您在调试期间多次点击代码，我唯一的建议是将 SaveFileDialog 包装在“使用”语句中。这可能有助于系统挂起和一些调试。

```
private void button1_Click(object sender, EventArgs e)
    {
        using (var sfd = new SaveFileDialog())
        {
            sfd.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*";
            sfd.FilterIndex = 2;

            if (sfd.ShowDialog() == DialogResult.OK)
            {
                File.WriteAllText(sfd.FileName, textBox_ListDestination.Text);
            }     
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T00:16:46.447

虽然我不使用 C# 而是 C++，但我遇到了这个问题（即根本没有出现对话框）。通过将整个 OPENFILENAME 结构归零，然后填写我只需要的成员来解决它。事实上，在调用通用对话框之前不将结构归零也是打印对话框的一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T01:26:31.043

我最终使用下面的代码来让它工作。代码“ShowHelp = true”是解决问题的原因，然后稍微优化导致以下解决方案：

```
private static void SaveToFile(string List)
{
    var saveFileDialog1 = new SaveFileDialog
    {
       InitialDirectory = Environment.GetFolderPath(Environment.SpecialFolder.Personal),
       Filter = string.Format("{0}Text files (*.txt)|*.txt|All files (*.*)|*.*", "ARG0"),
       RestoreDirectory = true,
       ShowHelp = true,
       CheckFileExists = false
     };
     if (saveFileDialog1.ShowDialog() == DialogResult.OK)
        File.WriteAllText(saveFileDialog1.FileName, keywordList);
} 
```

# python - 通过重新定义字段更改具有继承的主键

> ID：14449416
> 
> 赞同：2
> 
> 时间：2013-01-22T00:05:31.743
> 
> 标签：python, django, django-models

使用继承时是否可以将表的主键显式指定给现有字段？

```
class TemporalModel(models.Model):
    time = models.DateTimeField() # This is normally not a primary key

    class Meta:
        abstract = True

class Temperatures(TemporalModel):
    time = models.DateTimeField(primary_key=True) # I want it to be a primary key for this model 
```

碰巧的是，温度“表”实际上是一个视图，所以我将主键设置为无关紧要（据我所知？-我的理解是，只要 django 不验证任何唯一性，这应该没问题约束本身，而是将其留给数据库）；重要的是 django 不会尝试访问 .id 表。因此，我有一个解决方法，但我很好奇你是否可以做到这一点。

# perl - 调试在启动时终止的 perl 守护程序

> ID：14449422
> 
> 赞同：0
> 
> 时间：2013-01-22T00:05:53.470
> 
> 标签：perl, debugging, nagios

我已经在我们的 nagios 机器上设置和配置了[Nagios 远程外部命令守护程序](http://exchange.nagios.org/directory/Addons/External-Commands/Nagios-remote-external-command-daemon/details "NRECD")，但我发现它一旦启动它似乎就终止而没有任何错误。

服务器是 ubuntu 12.10 并且 nrecd 是从 tar 文件作为一个简单的过程安装的 - 创建一个配置目录，在 /etc/rc.local 中添加一行，将 bin 文件复制到 /usr/bin 并进行配置。

当我运行时`sudo nrecd`，响应是`Server nrecd started successfully. PID = 10698.`，但是如果我立即运行，`ps -A | grep 10698`我什么也看不到。同样，a`netstat -an`显示没有服务在 5665 上侦听。

在日志文件中，我看到的唯一条目是当我停止服务器时（考虑到当我`sudo nrecd stop`删除陈旧的 pidfile 时实际发生的所有事情，即使这些都是虚假的）。

在 /usr/bin/nrecd 中，我查看了打印“服务器成功启动”行的代码，并`print`在该位置添加了一些其他代码：

```
my $mypid = daemonize();
print "Server $basename started successfully. PID = $mypid.\n" if $mypid;
print "line 122";
create_pid_file( $mypid, $pidfile );
print "line 124";
change_privileges( $user, $group );
print "line 126";
lock_stdio();
print "line 128";
chmod( 0666, $logfile );
print "line 130";
logmsg( "Server $basename Started Successfully.\n" ); 
```

现在我明白了：

```
Server nrecd started successfully. PID = 10698.
line 122line 124line 126 
```

这告诉我问题出在 lock_stdio(); 子。这接近我卡住的地方。我不是 perl 程序员，但即使对我来说，所有 sub 看起来都是标准的——只是将 IO 重定向到 /dev/null。我尝试使用 perl -d 运行它，但我最终所做的只是逐行浏览文件并且没有学到任何新东西。

子本身是：

```
sub lock_stdio {
    open( STDIN,  '<', '/dev/null'  ) or croak "Can't read /dev/null: $!";
    open( STDOUT, '>>', '/dev/null' ) or croak "Can't write to /dev/null: $!";
    open( STDERR, '>>', '/dev/null' ) or croak "Can't write to /dev/null: $!";
    return();
}; 
```

在解决这个问题方面，有人可以提出什么建议吗？如果它真的与那 3 行子线隔离，我觉得无法找到问题很荒谬（正如我所说的那样，它对我来说看起来很标准）。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:19:38.993

很抱歉没有将此作为评论，但我没有足够的代表。

您的`lock_stdio`sub 将所有输出发送到，因此在调用它后您将看不到语句`/dev/null`的任何输出。`print`如果你注释掉那个子，有什么改变吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T00:19:57.927

问题不在于 lock_stdio 子，这只是您的输出停止进入初始标准输出并开始进入 /dev/null 的地方。

尝试打开一个不同的文件：

```
open my $debugfile, '>>', 'somefilename' or die "couldn't open debug file: $!\n"; 
```

并将您的调试语句写入：

```
print $debugfile "line xxx\n"; 
```

您是否查看过似乎有任何错误消息的日志文件？

# symfony - Symfony 2：如何正确测试 Doctrine 模型？

> ID：14449424
> 
> 赞同：7
> 
> 时间：2013-01-22T00:06:01.367
> 
> 标签：symfony, doctrine-orm, phpunit

有没有办法在 Symfony 2 应用程序中正确地对 Doctrine 模型进行单元测试？现在我正在编写通过控制器的功能测试，以确保我的应用程序正确存储（和 CRUDing）数据。但这需要太长时间而且非常糟糕，因为我必须为每个套件设置固定装置，并在套件完成后清除数据库。

如何隔离 Entity 和 EntityRepository 单元测试？有这方面的教程吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T09:19:16.347

只要您将实体与数据库逻辑分离，您就不应该对实体进行单元测试有任何问题。

这是关于测试存储库的非常好的文章： [https](https://symfony2-document.readthedocs.org/en/latest/cookbook/testing/doctrine.html) ://symfony2-document.readthedocs.org/en/latest/cookbook/testing/doctrine.html 。

此外，您可能对此问答感兴趣：[Testing Controllers in Symfony2 with Doctrine](https://stackoverflow.com/questions/14414393/testing-controllers-in-symfony2-with-doctrine/14414605)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:54:07.527

我们设置了一个名为 TestManager 的单例，它为所有测试设置了一个空的测试数据库。然后我们在 setUp() 方法中只截断对测试很重要的表，并使用教义 API 在 PHP 中设置固定装置。我们为此使用 MySql。

这给了我们每次启动 phpunit 大约 10 秒的延迟，但这与测试的数量无关。我认为这可以通过使用内存版本的 sqlite 来改善很多。

[就我个人而言，通过查看 Johann Schmitt 的支付核心捆绑功能测试](https://github.com/schmittjoh/JMSPaymentCoreBundle/tree/master/Tests/Functional)代码，我学到了很多关于使用 symfony2/doctrine 设置功能测试的知识。

只是为了让事情更清楚：如果你想进行纯单元测试，你必须一起模拟学说。其他一切都是功能/集成测试。但是这种区分通常是相当学术的，而且它只是为了嘲笑教义而做的很多工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T00:21:50.190

我发现对单元测试有用的一个技巧是使用 sqlite 的基于文件的数据库。您可以在名为“emptydatabase.dat”的文件中创建空数据库表，并使用 sqlite 加载它。现在，在测试结束时，您可以覆盖空数据库文件并从新数据库开始。

您可以使用以下代码创建空架构文件：

```
 $classes = array(
            $em->getClassMetadata('MyAPIBundle:Currency'),
            $em->getClassMetadata('MyAPIBundle:Permission'),
            $em->getClassMetadata('MyAPIBundle:Role'),
            $em->getClassMetadata('MyAPIBundle:User'),
        );

        $tool = new \Doctrine\ORM\Tools\SchemaTool($em);
        $tool->createSchema($classes);
        rename($schemafile, dirname(__FILE__) . '/../Data/schema.dat');

        print "Schema file was regenerated\n"; 
```

**还**

我们还为每个需要运营的主要实体创建了一项服务，并轻松地单独测试了该独立服务。起初我们在存储库中拥有所有东西，但这没有意义，但是通过将它们移动到服务并模拟所有依赖对象，事情变得很好

# eclipse - 查找hsql数据库数据并查看数据？

> ID：14449425
> 
> 赞同：0
> 
> 时间：2013-01-22T00:06:08.913
> 
> 标签：eclipse, hsqldb

一直在玩 Hsqldb，能够创建数据库，插入数据然后查看数据。我使用 HsqlProperties 类，将属性设置为我桌面上的数据库文件夹 - 该文件夹现在包含脚本、属性、日志和 lck 文件。

我的问题是，实际存储的数据在哪里或哪个文件以及如何查看我插入到数据库中的数据，就像 Visual Studio 的数据库资源管理器（我正在使用 Eclipse IDE）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:52:29.470

我使用 HSQL 数据库管理器以树的形式查看数据库模式，尽管您必须编写查询来查看数据。它确实有一个用于进行选择和其他语句的上下文菜单。它还具有“最近查询”等有用的功能。要运行 HSQL 数据库管理器：

```
 @java -classpath hsqldb.jar org.hsqldb.util.DatabaseManagerSwing 
```

这是打开 HSQL 数据库管理器后使用的示例连接 url： url: jdbc:hsqldb:hsql://localhost/

从[文档](http://hsqldb.org/doc/guide/guide.html)中，数据位于以下文件中： .script - 表和其他对象的定义，以及非缓存表的数据。.data - 缓存表和备份文件的数据是数据文件最后已知一致状态的压缩备份。

使用 cached 关键字创建表时会对其进行缓存

```
create cached table ms.timeSlot (
    firstname varchar(5)
); 
```

# android - 播放/停止媒体播放器不工作

> ID：14449426
> 
> 赞同：0
> 
> 时间：2013-01-22T00:06:09.303
> 
> 标签：android, android-mediaplayer

我在资产文件夹中有一个带有曲目的媒体播放器，我想为每首歌曲制作一个开始/停止按钮。我可以播放它，但是如果我再次单击该按钮，它不会停止音乐，它将开始另一个音乐而不停止第一个：s。

这是我现在正在使用的代码：

```
 public void onClick(View v) {   

        try {
            AssetFileDescriptor afd = getAssets().openFd("4.mp3");
            player = new MediaPlayer();
            player.setDataSource(afd.getFileDescriptor(),afd.getStartOffset(),afd.getLength());
            player.prepare();
            if(player.isPlaying()){
                player.stop();
            } else {
                player.start();
            }
            } 
        catch (IllegalArgumentException e) {    } 
        catch (IllegalStateException e) { } 
        catch (IOException e) { }

    } 
```

编辑1：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    player = new MediaPlayer();

    TextView sound4 = (TextView) findViewById(R.id.cancionCuatro);
    sound4.setOnClickListener(soundFour);

    try {
        AssetFileDescriptor afd = getAssets().openFd("4.mp3");
        player.setDataSource(afd.getFileDescriptor(),afd.getStartOffset(),afd.getLength());
        player.prepare();
        } 
    catch (IllegalArgumentException e) {    } 
    catch (IllegalStateException e) { } 
    catch (IOException e) { }

}

OnClickListener soundFour = new OnClickListener() {

    public void onClick(View v) {   

        if(player.isPlaying()){
            player.stop();
        } else {
            player.start();
        }

    }
}; 
```

LogCat：在状态 0 错误中开始调用（-38，0）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:08:36.210

是因为你的呼唤

```
player = new MediaPlayer(); 
```

这是创建一个新的 mediaPlayer 实例，而不是引用同一个实例来测试是否有东西已经在播放并能够停止它。将您的新 MediaPlayer() 移到 onClick 之外，它应该会自行运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T06:42:13.023

```
try {if(player.isPlaying()){player.stop();} else {player.start();}if(player!=null) player.release();AssetFileDescriptor afd = getAssets().openFd("4.mp3");player = new MediaPlayer();player.setDataSource(afd.getFileDescriptor(),afd.getStartOffset(),afd.getLength());player.prepare(); } catch (IllegalArgumentException e) {} catch (IllegalStateException e) {} catch (IOException e) { } 
```

# java - 为什么 Java 中的 Observable 使用 Vector？

> ID：14449433
> 
> 赞同：0
> 
> 时间：2013-01-22T00:06:55.127
> 
> 标签：java

来自 SDK

```
public class Observable {
    private boolean changed = false;
    private Vector obs;

    /** Construct an Observable with zero Observers. */

    public Observable() {
    obs = new Vector();
    } 
```

`Vector`使用而不是更多类型安全的集合的主要原因是`List<Observer>`什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T00:09:35.690

这是一个非常古老的类，可以追溯到 JDK 1.0。当时，没有`List`.

# antlr - 如何在条件规则重写中使用 ANTLR 词法分析器标记值

> ID：14449439
> 
> 赞同：3
> 
> 时间：2013-01-22T00:07:12.397
> 
> 标签：antlr, lexer

我是 ANTLR 的新手，想做以下事情：

鉴于下面的语法片段，我有一个选择规则 *comparison_op* 可以匹配多个标记之一。我想做的是编写有条件的重写规则 - 例如，如果令牌是*DOESNOTENDWITH*做某事，如果它是*DOESNOTCONTAIN*做某事等。

我似乎无法做到这一点。甚至有可能做到这一点吗？当然，我可以为每个条件编写特定的规则，但这似乎也不是最好的方法。

有什么建议么？

* * *

```
{... snipped ...}

DOESNOTBEGINWITH        : 'does not begin with';
DOESNOTENDWITH          : 'does not end with';
DOESNOTCONTAIN          : 'does not contain';

comparison_op           : DOESNOTBEGINWITH | DOESNOTENDWITH | DOESNOTCONTAIN
condition_comparison    : (column_name comparison_op v1=valueExpression) 
                        ->  {$comparison_op.text == $DOESNOTBEGINWITH.text}?  
                                    ^(LIKE column_name $v1)
                        ->          ^(comparison_op column_name $v1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T07:32:23.863

尝试这个：

```
condition_comparison
 : (column_name comparison_op v1=valueExpression) 
    -> {$comparison_op.start.getType() == DOESNOTBEGINWITH}? 
       ^(LIKE column_name $v1)
    -> ^(comparison_op column_name $v1)
 ; 
```

但是，我认为这样写没有任何问题：

```
condition_comparison
 : column_name ( DOESNOTBEGINWITH valueExpression -> ^(LIKE column_name valueExpression)
               | DOESNOTENDWITH valueExpression   -> ^(DOESNOTENDWITH column_name valueExpression)
               | DOESNOTCONTAIN valueExpression   -> ^(DOESNOTCONTAIN column_name valueExpression)
               )
 ; 
```

# css - 我希望页面处于活动状态时菜单字体具有特定颜色

> ID：14449440
> 
> 赞同：2
> 
> 时间：2013-01-22T00:07:12.917
> 
> 标签：css

我正在尝试使菜单中所选页面链接的字体颜色具有颜色#EE4D10。它应该保持该颜色，直到导航到另一个页面。然后应该突出显示新页面的链接。

使用的css代码：

```
ul.links {
    margin: 0;
}

ul.links li {
    list-style: none;
    padding: 8px 0;
}

ul.links li a, ul.links li a:hover {
    padding: 0 0 0 28px;
    background: transparent url(../images/page.png) no-repeat left center;
    color: #06C4E6;
    text-decoration: underline;
} 

ul.links li a:hover {
    color: #5D5D5D;
    text-decoration: none;
} 

#nav, #nav ul {
    float: left;
    list-style: none;
    padding: 0;
    margin: 0;
    line-height: 35px;
    font: 115% helvetica;
}

#nav a {
    color: #2F80AF;
    display: block;
    text-decoration: none;
    list-style-type: none;
}

#nav li, #nav li.last {
    float: left;
    border-right: 1px solid #FFF;
    display: block;
    padding: 0;
    margin: 0;
    height: 35px;
}

#nav li.last {
    border-right: 0px;
}

#nav li a, #nav li.last a {
    padding: 9px 0;
    width: 175px;
    text-align: center;  
    height: 15px;
}

#nav li.last a {
    width: 176px;
}

#nav li ul {
    position: absolute;
    background: #e3eff7;
    font: 100% arial;
    width: 100%;
    left: -999em;
}

#nav li:hover ul, #nav li li:hover ul, #nav li li li:hover ul, #nav li.sfhover ul, #nav li li.sfhover ul, #nav li li li.sfhover ul {
    left: auto;
}

#nav a:hover {
    color: #FFF;
}

#nav li:hover, #nav li.sfhover {
    background: #00AFD8;
}

#nav li li:hover {
    background: #00AFD8;
}

#nav li li {
    border-bottom: 1px solid #FFF;
    width: 100%;
    padding: 0;
    display: block;
    float: left;
    height: auto;
}

#nav li li a {
    padding: 10px 43px 10px 43px;
    width: auto;
    height: auto;
}

#nav li:hover, #nav li.hover {
    position: static;
} 
```

使用的 Html（在所有页面上都相同）：

```
<ul id="nav">
  <li class="selected"><a href="hypnose.php">Hypnose</a></li>
  <li><a href="toepassing.php">Toepassing</a></li>
  <li><a href="FAQ.php">Veelgestelde vragen</a></li>
  <li><a href="Afspraak.php">Start met veranderen!</a></li>
  <li class="last"><a href="contact.php">Contact</a></li>
</ul> 
```

[网站在这里](http://www.hypnosta.nl)。谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:31:00.900

我看到你已经将`selected`css 类应用于你的第一个`li`元素，所以你现在只需要利用它，例如这样：

```
#nav li.selected a
{
    color: #EE4D10;
} 
```

编辑：

当然，您需要一段代码来确保将`selected`类应用于正确的`li`元素。与此同时，我自己也做了一些研究，但还没有奏效。它可以直接在 php 脚本中完成，这将是实现这一目标的最佳方式。或者，如果由于某种原因您无法编辑脚本，您可以添加一些 javascript 来“在运行时”将其破解。

# node.js - 如何断言调用了一个函数？

> ID：14449453
> 
> 赞同：2
> 
> 时间：2013-01-22T00:08:28.513
> 
> 标签：node.js, coffeescript, mocha.js

我有一个山羊课：

```
class Goat
  constructor: (@headbutt) -> 
    @isCranky = true

  approach: -> 
    if @isCranky
      @headbutt() 
```

我想编写一个 Mocha 测试来断言如果 isCranky 为真并且调用了方法，则调用了 headbutt()。

我能找到的唯一解释是 Ruby。尝试翻译它，但失败了。如何断言调用了正确的函数？我想我可以用一种 hacky 的方式解决它，但宁愿学习正确的方法。建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:48:22.873

怎么样？

```
describe 'Goat', ->
  it 'should call headbutt when approached', ->
    headbuttCalled = no
    headbutt = -> headbuttCalled = true
    goat = new Goat headbutt

    goat.approach()

    assert headbuttCalled 
```

如果你发现自己多次重复这种测试函数是否被调用的模式，你可能想要使用像[SinonJS](http://sinonjs.org/)这样的东西，它提供了一个“间谍”结构：

```
headbutt = sinon.spy()
goat = new Goat headbutt

goat.approach()

assert headbutt.called 
```

# facebook - FQL：获取朋友的最新帖子

> ID：14449455
> 
> 赞同：0
> 
> 时间：2013-01-22T00:08:47.143
> 
> 标签：facebook, facebook-fql

我尝试获取朋友的最新帖子/新闻（状态更新、新图片帖子等）

我正在使用以下方法，但它也返回用户喜欢的页面/电影等的新闻 - 我只想获取朋友的新闻。

```
SELECT post_id, actor_id, message FROM stream WHERE filter_key in (SELECT filter_key FROM stream_filter WHERE uid=me() AND type='newsfeed') AND is_hidden = 0  LIMIT 50 
```

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T02:02:33.370

尝试这个：

```
SELECT post_id, actor_id, message FROM stream 
  WHERE filter_key ='newsfeed' AND is_hidden = 0 
  AND type IN (46,56) LIMIT 50 
```

类型 46 是状态更新，类型 56 是另一个用户墙上的帖子。

您可以根据需要添加或减去不同`type`的 s。有关更多详细信息，请参阅[流文档](https://developers.facebook.com/docs/reference/fql/stream)。

顺便说一句，`newsfeed`是一个内置`filter_key`常量。您不需要子查询来返回它。

# transform - Java3D 变换向量的奇怪行为

> ID：14449457
> 
> 赞同：0
> 
> 时间：2013-01-22T00:09:01.893
> 
> 标签：transform, java-3d

这是应该绘制 2 个边为 0.3 的立方体彼此相邻的代码的一部分当我得到的是： http : [//imageshack.us/photo/my-images/189/89254345.png/](http://imageshack.us/photo/my-images/189/89254345.png/)彼此）我尝试打印转换，它们看起来还不错：

1

1.0, 0.0, 0.0, 0.0

0.0, 1.0, 0.0, 0.0

0.0, 0.0, 1.0, 0.0

0.0, 0.0, 0.0, 1.0

2

1.0, 0.0, 0.0, 0.3

0.0, 1.0, 0.0, 0.0

0.0, 0.0, 1.0, 0.0

0.0, 0.0, 0.0, 1.0

就好像第二个盒子只移动了 0.15，但是如果我将 dx 乘以 2，那么当更多不同尺寸的长方体通过 y 或 z 轴的变换添加时，事情就会中断

```
private BranchGroup rootGroup;

public void addBox(float dx){
    Cuboid Cuboid1 = new Cuboid(0.3f ,0.3f, 0.3f, appearence); 
    TransformGroup tg = new TransformGroup();
Transform3D transform = new Transform3D();
    Vector3f vector = new Vector3f(dx, 0f, 0f);
    transform.setTranslation(vector);
    tg.setTransform(transform);
    tg.addChild(Cuboid1);
    rootGroup.addChild(tg);
}

public void addBoxes(){
    for(int i=0;i<2;i++){
        addBox(i*0.3f);
    }
} 
```

长方体类来自这里：[http ://www.java2s.com/Code/Java/3D/Java3DBoxandacustomCuboidimplementation.htm](http://www.java2s.com/Code/Java/3D/Java3DBoxandacustomCuboidimplementation.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:19:58.783

看起来您正在创建一个大小为 0.6 的长方体，因此第一个框的 X、Y、Z 值为 +0.3 和 -0.3，因为长方体的中心点为 0,0,0。

第二个框相同，但在一个轴上偏移 0.3，这在其中一个轴上给出 0.3-0.3=0.0 和 +0.3+0.3 = 0.6 值。

这将给出两个在一个轴上重叠一半的框，这似乎与您的图片相匹配。

也许您的意思是创建一个宽度/高度/深度为 0.3/2 的框并将其平移 0.3/2 以使框的中心位于 0.15,0.15 并使用 0.15 而不是 0.3 的比例因子？

# java - 为android应用程序实现一个简单的httprequest队列时的并发问题

> ID：14449461
> 
> 赞同：0
> 
> 时间：2013-01-22T00:09:46.347
> 
> 标签：java, android, concurrency, request, queue

当我尝试从头开始为 http 请求实现队列时遇到问题。抱歉，这对某人来说可能是一个非常幼稚的并发问题。

基本上我希望我的应用程序在任何时候都只执行一个请求。额外的请求进入队列并稍后执行。

我知道其他高级的东西，例如 FutureTask 和 Execution pool，但我想要答案，因为我很好奇如何解决基本的并发问题。以下是我的班级维护 requestQueue

```
private Queue<HttpRequest> requestQueue;
private AsyncTask myAsyncTask=null;

public boolean send(HttpRequest hr){
   //if there isn't existing task, start a new one, otherwise just enqueue the request
   //COMMENT 1.
   if(myAsyncTask==null){
     requestQueue.offer(hr);
     myAsyncTask= new RequestTask();
     myAsyncTask.execute(null);
     return true;
   }
   else{
     //enqueue
     //COMMENT 2
     requestQueue.offer(hr);
   }

}

//nested class
RequestTask extends AsyncTask<boolean,void,void>{
      protected HttpResponse doInBackground(void... v){
           //send all request in the queue
           while(requestQueue.peek != null){
              HttpResquest r= requestQueue.poll
              //... leave out code about executing the request
           }
           return true;
      }

      protected void doPostExecute(boolean success){

           //COMMENT 3: if scheduler stop here just before myAsyncTask is set to null
           myAsyncTask=null;

      }
} 
```

问题是，如果线程调度程序在 COMMENT 3 点停止后台线程（就在 myAsyncTask 设置为 null 之前）。

```
 //COMMENT 3: if scheduler stop here just before myAsyncTask is set to null
       myAsyncTask=null; 
```

当时，其他线程碰巧到 COMMENT 1 点并进入 if ... else ... 块。因为 myAsyncTask 没有设置为 null，所以任务在 else 块中排队（注释 2），但不会创建新的 asyncTask，这意味着队列会卡住！

```
 //COMMENT 1.
   if(myAsyncTask==null){
     requestQueue.offer(hr);
     myAsyncTask= new RequestTask;
     myAsyncTask.execute(null);
     return true;
   }
   else{
     //enqueue
     //COMMENT 2
     requestQueue.offer(hr);
   } 
```

我希望很清楚。队列有可能停止处理。我很想知道如何避免这种情况。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:04:35.683

我通常实现这样的方式是创建一个扩展线程的类。这将包含一个队列对象（使用您喜欢的任何一个）并具有添加作业的方法。我会使用同步来保证所有线程的安全。可以使用通知和等待来避免轮询。

这是一个可能有帮助的例子......

```
 import java.util.*;

    public class JobProcessor extends Thread
    {
       private Queue queue = new LinkedList();

       public void addJob(Object job)
       {
           synchronized(queue)
           {
              queue.add(job);
              queue.notify(); // lests the thread know that an item is ready
           }
       }

       @Overide
       public void run()
       {
          while (true)
          {
              Object job = null;

              synchronized(queue) // ensures thread safety
              {
                 // waits until something is added to the queue.
                 try
                   while (queue.isEmpty()) queue.wait();
                 catch (InterruptedException e)
                   ; // the wait method can throw an exception you have to catch.
                 // but can ignore if you like.

                 job = queue.poll();
              }
              // at this point you have the job object and can process it!
              // with minimal time waiting on other threads.
              // be sure to check that job isn't null anyway!
              // in case you got an InterruptedException.

              ... processing code ...

              // job done loop back and wait for another job in the queue.
          }
       }
    } 
```

您几乎只需要像这样实例化一个类并启动线程，然后开始插入对象来处理作业。当队列为空时，等待会导致该线程休眠（并且还会暂时释放同步锁），addJob 方法中的 notify 会在需要时将其唤醒。同步是一种确保只有一个线程可以访问队列的方法。如果您不确定它是如何工作的，请在 java SDK 参考中查找。

您的代码中没有任何线程安全代码（同步内容），这就是您的问题所在。它可能有点过于复杂，也无法帮助您调试它。但最重要的是您需要添加同步块，但请确保它们尽可能短。

# javascript - 日期选择器关闭时的功能

> ID：14449465
> 
> 赞同：1
> 
> 时间：2013-01-22T00:10:15.817
> 
> 标签：javascript, jquery, datepicker

我有这个初始化代码：

```
$(document).ready(init);

function init() {
var currentDate = new Date();
currentDate.setHours(currentDate.getHours() + 1);
var dat = (currentDate.getDate()+"/"+(currentDate.getMonth()+1)+"/"+currentDate.getYear());
  $('input[name=category]').click(loadList);

      $('#datepicker').datepicker({  
        inline: true,  
        showOtherMonths: true,  
        dayNamesMin: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],  
        dateFormat: 'dd/mm/yy',
      });

    var currentDate = new Date();
    currentDate.setHours(currentDate.getHours() + 1);

    $("#datepicker").datepicker("setDate", currentDate); 

    $("#datepicker").datepicker({
     onClose: function() { 
        alert("wow");
        loadList;
      }
    });

  loadList();  

} 
```

类别部分（第 5 行）运行良好，每次点击都会成功响应。

我想得到相同的反应，但是`name=category`当 datepicker 关闭时，而不是像 in 那样的“点击”。我希望它用“哇”发出警报并调用 javascript 函数“loadList”（例如第 5 行）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T00:12:12.367

`onClose`只需在构造日期选择器时使用的选项对象中传递一个函数：

```
$('#datepicker').datepicker({  
    inline: true,  
    showOtherMonths: true,  
    dayNamesMin: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],  
    dateFormat: 'dd/mm/yy',
    onClose: function () {
        alert('wow');
        loadList();
    }
}); 
```

# html - 样式不接受没有按钮

> ID：14449467
> 
> 赞同：0
> 
> 时间：2013-01-22T00:10:31.640
> 
> 标签：html, css

当我更改“无按钮”的颜色时，它并没有改变。当我调试它时，我发现它被其他颜色覆盖了。我该如何解决？它适用于“是按钮”，但不适用于“否按钮”。

[http://jsfiddle.net/VXXPC/15/](http://jsfiddle.net/VXXPC/15/)

```
<div class="control-group">
    <label class="control-label" for="inputEmail">eWaste</label>
    <div class="controls">
        <input name="Finish" 
               style="width:70px; background-color:#0e6a91; height:24px;" 
               value="Yes"
               type="submit" >
        <input style="width:70px; height:24px; background-color: #la4567;"
               name="Finish" 
               value="No"
               type="submit" >
    </div>
</div>

<div class="control-group">
    <label class="control-label" for="inputEmail">Notes</label>
    <div class="controls">
        <textarea rows="3" cols="80" style="width: 280px;"></textarea>
     </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:13:46.270

`no`您的按钮颜色有错字。你有`#la4567`. `l`（小写 L）不是有效的十六进制字符。你打算把它变成一个`1`（一个）吗？

```
#1a4567 
```

# java - 使用 ThreadPoolExecutor 进行条件阻塞

> ID：14449470
> 
> 赞同：0
> 
> 时间：2013-01-22T00:11:12.960
> 
> 标签：java, threadpoolexecutor

`ThreadPoolExecutor`如果已达到最大线程数，我不仅想扩展为阻塞，而且还想在我可以设置的单独条件下扩展。我不确定该怎么做，或者是否有可能。

看起来提供一个 ThreadFactory 如果设置了条件则不会创建线程*可能*是要走的路，但我不确定这是否是最好的方法。是否有可能在设置标志后没有使用额外的线程，因此不需要使用工厂，因此我的操作没有放在队列中但可以运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T03:47:31.293

我建议你看看

[http://code.google.com/p/disruptor/](http://code.google.com/p/disruptor/)

这几乎可以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T00:44:16.947

我认为扩展 a`ThreadPoolExecutor`不会那么复杂。[JavaDocs](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)给出了一个例子。我也相当确定 executor 是扩展的地方。我相信 a`ThreadFactory`是一种产生新线程的更高级别的方式。执行者决定何时制作它们。

# c# - 使用可选参数创建函数 Visual Studio 2010

> ID：14449471
> 
> 赞同：0
> 
> 时间：2013-01-22T00:11:19.343
> 
> 标签：c#, asp.net, visual-studio-2008

在 Visual Studio 2010 中，我可以这样做：

```
 public static void setString(string x = "asd"){  } 
```

但是在 VS 2008 中标记了一个错误，

我正在使用框架 3.5

我该如何解决它或我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:12:46.760

它是[在 VS 2010 中引入的](http://msdn.microsoft.com/en-us/library/dd264739.aspx)。

但是，您可以通过重载获得几乎相同的效果：

```
public static void setString()
{
    setString("asd");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T00:12:57.203

Visual Studio 2010 中引入了可选参数（您在做什么）。它不适用于 VS 2008 中的 C#。请参阅[http://msdn.microsoft.com/en-us/library/dd264739.aspx](http://msdn.microsoft.com/en-us/library/dd264739.aspx)

要使您当前的代码在 VS 2008 中工作，您必须删除可选参数。

```
public static void setString(string x){  }

setString("asd"); 
```

# java - JAVA中的流结束

> ID：14449473
> 
> 赞同：3
> 
> 时间：2013-01-22T00:11:52.287
> 
> 标签：java, io, inputstream

[我对此处](http://www.cafeaulait.org/course/week10/06.html)出现的以下声明感到困惑

> InputStream 类的基本 read() 方法读取单个无符号数据字节并返回无符号字节的 int 值。这是一个介于 0 和 255 之间的数字。如果遇到流的结尾，则返回 -1；你可以用它作为一个标志来观察流的结束。

由于一个字节最多可以表示 256 个整数，我看不出它是如何表示 0 到 256 和 -1 的。有人可以评论我在这里缺少的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T00:13:40.877

虽然该`read()`操作只是读取一个字节，但它实际上返回一个`int`，所以没有问题。

但是，除了流值的特殊 -1 结尾之外，仅返回 0-255 范围内的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T00:14:01.720

它返回 a `int`，而不是 a `byte`，因此虽然它通常只包含 0-255，但它*可以*包含其他值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-22T00:14:26.260

[InputStream#read()](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#read%28%29)的返回类型是 an ，如果值在 0-255 的范围内，则`int`可以将其读取为 a 。`byte`

# hlsl - HLSL 错误 X3082

> ID：14449488
> 
> 赞同：1
> 
> 时间：2013-01-22T00:13:25.960
> 
> 标签：hlsl, directx-11, pixel-shader

我在 HLSL 中有以下像素着色器函数：

```
float GammaCorrectA(float3 color, float alpha) {
    float a = 1 - sqrt(1 - alpha);
    float b = sqrt(alpha);
    float t = (color.x + color.y + color.z) / 3;
    return a * (1 - t) + b^t;
} 
```

这是这样称呼的：

```
float screen = GammaCorrectA(strokeColor, alpha); 
```

`strokeColor`并且`alpha`都是浮点数。

这导致“返回”行出现以下错误：

> 错误 X3082：需要 int 或 unsigned int 类型。

我正在使用 Shader Model 4 Level 9_3 进行编译，禁用了优化并启用了调试信息。

我似乎在 MSDN 或任何地方都找不到此错误。

从广义上讲，有人可以指出我记录此错误的位置吗？我想了解这里发生了什么。更具体地说，有人能发现我的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:37:42.397

而不是`b^t`使用 HLSL [pow](http://msdn.microsoft.com/en-us/library/windows/desktop/bb509636%28v=vs.85%29.aspx)函数：

```
return a * (1 - t) + pow(b, t); 
```

# android - 如何将图像转换为位图

> ID：14449491
> 
> 赞同：0
> 
> 时间：2013-01-22T00:13:42.170
> 
> 标签：android

嗨，我有这段代码，如何将图像转换为位图？我正在从画廊访问图像。

```
_GaleryButton.setOnClickListener(new View.OnClickListener()
 {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent=new Intent();

            intent.setAction(Intent.ACTION_PICK);

               intent.setData(android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);

               startActivity(intent);
        }
    });

}
    protected void onGActivityResult(int GrequestCode, int GresultCode, Intent Gdata){

        super.onActivityResult(GrequestCode,GresultCode,Gdata);

        Uri uriimg = Gdata.getData();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:20:16.450

这是为实现此目的而给出的完整示例：

[从图库中选择图像](http://androidcodesnips.blogspot.in/2011/05/pick-image-from-gallery-set-to-image.html)

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T01:08:15.213

如果要将图像获取到 sd 卡，请使用此代码

```
//Get the root of your sd card
File sdcard = Environment.getExternalStorageDirectory();

//Folder from sd card
File storagePath = new File(sdcard.getAbsolutePath() + "/fb_image");

//Decode the file from the folder to bitmap
Bitmap bmp = BitmapFactory.decodeFile(storagePath + "/" + file_name+ ".jpg"); 
```

# asp.net-mvc-4 - 具有自定义角色的 MVC 4 Intranet 身份验证

> ID：14449499
> 
> 赞同：15
> 
> 时间：2013-01-22T00:14:41.553
> 
> 标签：asp.net-mvc-4, visual-studio-2012, security, intranet

我花了一些时间搜索并发现了很多令人困惑的答案，所以我将在这里发布以进行澄清。

我正在使用 MVC4 VS2012 使用域身份验证创建了一个 Intranet 站点。一切正常。但是，为了管理有权访问此 webapp 不同区域的用户，我不喜欢使用我无法管理的 AD 组，webapp 的用户也不能。

有替代方案吗？我认为这将涉及关联/存储属于自定义角色的域名并使用 Authorize 属性来控制访问。

```
[Authorize(Roles = "Managers")] 
```

谁能为此建议最好的模式或指出我正确的方向？

我看到了一个类似的解决方案[链接](https://stackoverflow.com/questions/6043100/asp-net-mvc-and-windows-authentication-with-custom-roles)，但我仍然不确定如何将其用于存储的角色列表并针对这些角色验证用户。谁能详细说明这个解决方案是否可行？

```
 protected void Application_AuthenticateRequest(object sender, EventArgs args)
    {
        if (HttpContext.Current != null)
        {
            String[] roles = GetRolesFromSomeDataTable(HttpContext.Current.User.Identity.Name);

            GenericPrincipal principal = new GenericPrincipal(HttpContext.Current.User.Identity, roles);

            Thread.CurrentPrincipal = HttpContext.Current.User = principal;
        }
    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-22T19:54:45.403

我将此配置与 SQL Server 和 MVC3 一起使用。

网络配置：

```
<system.web>
<roleManager enabled="true" defaultProvider="SqlRoleManager">
  <providers>
    <clear />
    <add name="SqlRoleManager" type="System.Web.Security.SqlRoleProvider"   connectionStringName="SqlRoleManagerConnection" applicationName="YourAppName" />
  </providers>
</roleManager> 
```

……

```
<authentication mode="Windows" /> 
```

……

```
<connectionStrings>

<add name="SqlRoleManagerConnection" connectionString="Data Source=YourDBServer;Initial Catalog=AppServices;Integrated Security=True;" providerName=".NET Framework Data Provider for OLE DB" />
</connectionStrings> 
```

初始化角色：

全球.asax.cs

```
using System.Web.Security;

////
protected void Application_Start()
{

   //You could run this code one time and then manage the rest in your application.
   // For example:

   // Roles.CreateRole("Administrator");    
   // Roles.AddUserToRole("YourDomain\\AdminUser", "Administrator");

   Roles.CreateRole("CustomRole");   

   Roles.AddUserToRole("YourDomain\\DomainUser", "CustomRole");

 } 
```

在你的控制器中

```
[Authorize(Roles ="CustomRole")]
public class HomeController : Controller
 { 
```

管理用户

```
 public class Usuario
{
    public string UserName { get; set; }
    public string RoleName { get; set; }
    public string Name { get; set; }
    public const string Domain = "YourDomain\\";

    public void Delete()
    {
        Roles.RemoveUserFromRole(this.UserName, this.RoleName);
    }

    public void Save()
    {
        if (Roles.IsUserInRole(Usuario.Domain + this.UserName, this.RoleName) == false)
        {
            Roles.AddUserToRole(Usuario.Domain + this.UserName, this.RoleName);
        }
    }
} 
```

用户类

```
public class Usuarios : List<Usuario>
{

    public void GetUsuarios() //Get application's users
    {

        if (Roles.RoleExists("CustomRole"))
        {
            foreach (string _usuario in Roles.GetUsersInRole("CustomRole"))
            {
                var usuario = new Usuario();
                usuario.UserName = _usuario;
                usuario.RoleName = "CustomRole";
                this.Add(usuario);
            }
        }
  //

  public void GetUsuariosRed() //Get Network Users (AD)
    {
        var domainContext = new PrincipalContext(ContextType.Domain);
        var groupPrincipal = GroupPrincipal.FindByIdentity(domainContext, IdentityType.SamAccountName, "Domain Users");

        foreach (var item in groupPrincipal.Members)
        {
            var usuario = new Usuario();
            usuario.UserName = item.SamAccountName;
            usuario.Name = item.Name;
            this.Add(usuario);
        }

    } 
```

您可以像这样创建一个“管理员”控制器来管理用户：

```
[Authorize(Roles = "AdminCustomRole")]
public class AdminController : Controller
{

//

public ActionResult Index()
    {

        var Usuarios = new Usuarios();
        Usuarios.GetUsuarios();
        return View(Usuarios);

    }

[HttpGet]
public ActionResult CreateUser()
    {

        var Usuarios = new Usuarios();
        Usuarios.GetUsuariosRed();

       return View(Usuarios);

    }

// 
```

在我的应用程序中，自定义角色是固定的。

# php - 使用 php($sql) 选择 (SKU) 和 (QTY) 哪些 (SKU) 在表 A 中但不在表 B 中

> ID：14449500
> 
> 赞同：0
> 
> 时间：2013-01-22T00:14:53.887
> 
> 标签：php, sql, sql-server

我在 mssql 服务器中有几个表，下面是我的表。

表 A 有 QTY、SKU、ItemID - 有 50,000 个 SKU 表 B 有 QTY、SKU - 有 10,000 个 SKU - 这些 sku 在表 A 中（表 A 的数据比表 B 多）

我想使用 php($sql) 选择 (SKU)s 和 (QTY)s，其中 (SKU)s 在表 A 但不在表 B

非常感谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:21:07.310

您的问题几乎使用了所需的确切语法。像这样的东西应该工作。

```
select sku, qty from tableA where tableA.sku not in (select sku from tableB) 
```

# java - 数据丢失 - 客户端/服务器

> ID：14449507
> 
> 赞同：0
> 
> 时间：2013-01-22T00:15:38.893
> 
> 标签：java

我正在尝试用 JAVA 为我的通信器客户端服务器编写简单的在线状态显示器。当有人连接时，它会在我的 JList 中在线显示新成员。简单的。我有一个名为“容器”的类（顾名思义）包含对列表对象和消息对象的引用。我的列表是一个简单的地图，其中 key 是每个用户的唯一 ID，String 是他的昵称。此地图在列表对象中作为一个字段。然后，我将此序列化对象发送给客户端。问题是当我有两个客户端时，第一个连接到服务器的人只看到 1 个在线（他自己），第二个看到两者（2 个在线）。这很奇怪，例如，当我只发送一个带有多个在线成员的整数时，两个客户端都看到“2” - 所以这是正确的，当我尝试在发送给客户端之前打印在线客户端的数量（map. 大小（））我看到“2”。所以在发送之前是好的，但在阅读之后只有“1”（对于第一个客户）。这怎么可能？

服务器端：

```
private void rewrite() {
    online.clear();
    for(int key : handlerMap.keySet()) {
        online.put(handlerMap.get(key).getId(), handlerMap.get(key).getNickname());              
    }     
}

public void run() {
    try {
        ObjectOutputStream oos = new ObjectOutputStream(socket.getOutputStream());
        container = new MsgContainer();
        list = new OnlineList();

        while(!interrupt) {
            rewrite();
            list.setOnlineList(online);
            container.setMessage(message);
            container.setList(list); 
            System.out.println("klucz - "+id+" ----------" 

+container.getList().getOnlineList().size()); //id is an unique id. It shows 2 online `for` 
//1st client and 2 for 2cnd. All ok. But when I send and read on first client's side it `//shows only 1,`
            oos.writeObject(container);
            message = null;
            Thread.sleep(100);
        }
        oos.close();
    } 
    catch(InterruptedException e) { System.out.println(e); }
    catch(IOException e) { System.out.println(e); } 

    threadOnlineList.interrupt();
} 
```

客户端：

```
public void run() {
    try {
        ObjectInputStream ois = new ObjectInputStream(socket.getInputStream());
        while(!interrupt) {
            if(ois.readObject() != null) {
                MsgContainer container = (MsgContainer) ois.readObject();
                //updateList(container.getList().getOnlineList());
                System.out.println(container.getList().getOnlineList().size()); 
////shows 
//1 for first client and 2 for second one.
            }
            Thread.sleep(100);
        }
        ois.close();
    } 
    catch(IOException e) { System.out.println(e); }
    catch(InterruptedException e) { System.out.println(e); }
    catch(ClassNotFoundException e) { System.out.println(e); }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:29:37.680

当第一个客户端连接时，您发送客户端列表。这包括客户端 1。当客户端 2 连接时，您发送客户端列表。这包括客户端 1 和客户端 2。第一个客户端只看到 1 个连接，因为只有一个。如果您希望第一个客户端看到两个连接，则每次客户端连接或断开与服务器的连接时，您都需要更新所有客户端。

# soundcloud - 无需 Web 浏览器的 Soundcloud API 身份验证

> ID：14449508
> 
> 赞同：9
> 
> 时间：2013-01-22T00:15:42.110
> 
> 标签：soundcloud, xbmc

我正在开发 Soundcloud XBMC 插件。该插件是开源的，并用 Python 编写。我希望允许用户通过插件登录到他们的 SoundCloud 帐户，但是可以在没有访问典型 Web 浏览器的环境中运行 XBMC 实例（例如[`raspbmc`](http://www.raspbmc.com/)，默认情况下不提供窗口管理器或图形浏览器） . 有没有办法让用户在不使用“SoundCloud 连接屏幕”且不违反 SoundCloud API TOS 的情况下使用此插件进行身份验证？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-27T10:25:37.817

这在他们的 API 中没有提供，但是在对库进行了一些研究之后，我发现了这一点。发帖到：`https://api.soundcloud.com/oauth2/token`

使用这些参数

`grant_type=password&client_id=YOUR_CLIENT_ID&client_secret=YOUR_SECRET_ID&username=USERNAME&password=PASSWORD&scope=non-expiring`

这将返回可用于未来经过身份验证的请求的非过期令牌。

# android - 如何为供应商提供的外部 SD 卡调用 Android 媒体扫描仪，而不是通过 getExternalStorage() 获得的

> ID：14449509
> 
> 赞同：3
> 
> 时间：2013-01-22T00:15:52.030
> 
> 标签：android

我的应用程序允许用户在 getExternalStorage() 路径之外的外部 SD 卡上保存文件。我知道 Android 没有外部 SD 卡的概念，但我们知道许多设备制造商为平板电脑/手机提供额外的 SD 卡插槽。并且此特定 SD 卡的路径可能取决于供应商。

我的应用程序为用户提供了一个首选项，他/她可以提供与 getExternalStorage() 返回的路径不同的 SD 卡供应商路径。

以前我会使用以下代码来调用媒体扫描仪，

```
 sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"
  + Environment.getExternalStorageDirectory()))); 
```

但现在我想知道以下代码是否可行：

```
 sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"
  + "/someotherpath/blah/"); 
```

它会起作用吗？我没有这种带有额外 SD 卡插槽的设备来测试它，您的意见对我很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T02:56:17.987

我看了一下Android开源代码（Android 4.1）

有一个名为 /packages/providers/MediaProvider/src/com/android/providers/media/MediaScannerReceiver.java 的文件

它有以下代码：

```
 @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        Uri uri = intent.getData();
        if (action.equals(Intent.ACTION_BOOT_COMPLETED)) {
            // scan internal storage
            scan(context, MediaProvider.INTERNAL_VOLUME);
        } else {
            if (uri.getScheme().equals("file")) {
                // handle intents related to external storage
                String path = uri.getPath();
                String externalStoragePath = Environment.getExternalStorageDirectory().getPath();

                Log.d(TAG, "action: " + action + " path: " + path);
                if (action.equals(Intent.ACTION_MEDIA_MOUNTED)) {
                    // scan whenever any volume is mounted
                    scan(context, MediaProvider.EXTERNAL_VOLUME);
                } else if (action.equals(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE) &&
                        path != null && path.startsWith(externalStoragePath + "/")) {
                    scanFile(context, path);
                }
            }
        }
    } 
```

如您所见，它将检查 ACTION_MEDIA_MOUNT（您使用的）并调用 scan()。但是，它将使用硬编码的 MediaProvier.EXTERNAL_VOLUME（而不是传递的文件 URI）。

回答您的问题，您更改代码没有意义。任何带有文件模式的 URI 都可以正常工作。

但是，供应商有可能会修改此代码。

还有一件事情。Android 4.2 引入了多用户概念，每个用户都有自己的外部存储。基于此，显示的代码可能已更改。

**更新 1**

这真有趣。最初，我只是浏览了 MediaScannerReceiver 的一部分，并认为它只会扫描一个外部卷。但是，在您告诉我您查看了代码并询问它是否可以工作之后。我进一步调查，发现它会搜索所有可挂载的卷（如你所说）。

据我了解，它通过以下执行路径（它以伪Java代码的形式忽略所有实例化等等）

*   MediaScannerReceiver.onReceive 调用 scan(context, MediaProvider.EXTERNAL_VOLUME);
*   MediaScannerReceiver.scan 调用 context.startService(new Intent(context, MediaScannerService.class).putExtras(args)); 其中 args 包含键/值对 "volume"=MediaProvider.EXTERNAL_VOLUME)
*   MediaScannerService.onStartCommand 调用 mServicehandler.sendMessage
*   MediaScannerService.ServiceHandler.handleMessage 接收消息并调用等效于 scan(StorageManager.getVolumePaths(),MediaProvider.EXTERNAL_VOLUME)
*   MediaScannerService.scan 调用 MediaScanner.scanDirectories
*   MediaScanner 一个一个地遍历每个目录

考虑到“StorageManager.getVolumePaths()”应该返回所有可挂载的卷，我认为你应该对你当前的代码没问题（它将扫描所有卷）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:04:03.353

对于 Api 8 及更高版本，您可以使用它

```
 MediaScannerConnection.scanFile(this,
      new String[] { file.toString() }, null,
      new MediaScannerConnection.OnScanCompletedListener() {
  public void onScanCompleted(String path, Uri uri) {
      Log.i("ExternalStorage", "Scanned " + path + ":");
      Log.i("ExternalStorage", "-> uri=" + uri);
  }
 }); 
```

这仅扫描单个文件，您可以在此处提供任何路径，包括替代外部存储。

# ios - 使用自动布局的 UISlider 不会调整大小

> ID：14449512
> 
> 赞同：0
> 
> 时间：2013-01-22T00:16:23.420
> 
> 标签：ios, xcode, interface-builder, autolayout

我在 XCODE 中使用约束，并且我在界面上的几个按钮之间有一个滑块，但是每当我尝试将我的滑块前导和尾随间距“固定”到超级视图时，它永远不会起作用。我需要滑块根据视图的左右边缘进行缩放，但没有任何效果。任何想法或有人知道我对自动布局中的 UISliders 不了解的事情吗？！![比例之前 - 您可以看到前导/尾随线](../Images/3bdcd6d0dbe38ffdddbf8c9d10a6f574.png)

![然后它失败了，每次。](../Images/a14dc57ea863059964fd0c40651bf734.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:33:28.840

没关系 - 如果您在同一元素上有任何别针，请不要忘记删除其他别针。现在效果很好。

:)

# java - 16x16 纹理太大，Java openGL

> ID：14449513
> 
> 赞同：1
> 
> 时间：2013-01-22T00:16:23.343
> 
> 标签：java, opengl, 2d, textures, terrain

我正在制作一个基于瓷砖的游戏，瓷砖的纹理是 16x16。每当我尝试加载纹理以便可以渲染它时，我都会收到此错误：

```
java.io.IOException: Attempt to allocate a texture to big for the current hardware
at org.newdawn.slick.opengl.InternalTextureLoader.getTexture(InternalTextureLoader.java:292)
at org.newdawn.slick.opengl.InternalTextureLoader.getTexture(InternalTextureLoader.java:231)
at org.newdawn.slick.opengl.InternalTextureLoader.getTexture(InternalTextureLoader.java:184)
at org.newdawn.slick.opengl.TextureLoader.getTexture(TextureLoader.java:64)
at org.newdawn.slick.opengl.TextureLoader.getTexture(TextureLoader.java:24)
at main.Tile.loadTexture(Tile.java:124)
at main.Draw.drawMap(Draw.java:282)
at main.Draw.render(Draw.java:324)
at main.LaunchWindow.main(LaunchWindow.java:65)
Exception in thread "main" java.lang.NullPointerException
at main.Draw.drawMap(Draw.java:284)
at main.Draw.render(Draw.java:324)
at main.LaunchWindow.main(LaunchWindow.java:65) 
```

现在，我知道我的 gpu 可以处理它，因为它是 1GB 卡。

我跑了

```
GL11.glGetInteger(GL11.GL_MAX_TEXTURE_SIZE) 
```

并得到 16384。

这是加载纹理的代码：

```
public void loadTexture(String a){
    try {
        texture = TextureLoader.getTexture("PNG", ResourceLoader.getResourceAsStream(a));
        System.out.println(texture.getTextureRef());

    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

需要渲染时调用的代码：

```
public void drawMap(Map b){
    Color.white.bind();
    glBegin(GL_QUADS);

    b.divideMap(10);
    Tile[][] t = b.makeMap(b.getK());

    for(int y = 0; y < b.tiles.length; y++){
        for(int x = 0; x < b.tiles[y].length; x++){
            Texture a;
            t[y][x].loadTexture(t[y][x].getLocation());
            a = t[y][x].getTexture();
            System.out.println(a.getTextureRef());
            a.bind();
            glTexCoord2f(0,0);
            glVertex2f(x,y);
            glTexCoord2f(1,0);
            glVertex2f(x + a.getWidth(), y);
            glTexCoord2f(1,1);
            glVertex2f(x + a.getWidth(), y +  a.getHeight());
            glTexCoord2f(0,1);
            glVertex2f(x, y +  a.getHeight());
        }
    }

    glEnd();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T04:23:39.617

不知道框架，但从代码中我看到你每帧都加载所有纹理并且从不释放它们。几帧后，你的内存不足。

# c++ - std::map 比较指针

> ID：14449515
> 
> 赞同：2
> 
> 时间：2013-01-22T00:16:48.420
> 
> 标签：c++, map, key

我将如何在下面的示例中实现比较运算符，使其`ObjectPair( &a, &b )`等于`ObjectPair( &b, &a )`？另外，我将如何使用`stdext::hash_map`而不是实现这个`std::map`？

```
struct ObjectPair
{
    public:

        ObjectPair( Object* objA, Object* objB )
        {
            A = objA;
            B = objB;
        }

        bool operator<( const ObjectPair& pair ) const
        {
            // ???
        }

        Object* A;
        Object* B;
};

int main()
{
    std::map< ObjectPair, int > pairMap;

    Object a;
    Object b;

    pairMap[ ObjectPair(&a, &b) ] = 1;
    pairMap[ ObjectPair(&b, &a) ]++;    

    /// should output 2
    std::cout<< pairMap[ ObjectPair( &a, &b ) ] << std::endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T00:25:09.807

您的基本问题是您需要实现`operator<`它不区分`a`and `b`，但为所有不相等的对象返回一致的结果。

最简单的做法可能是对指针进行排序，然后比较它们。就像是

```
bool operator<(const ObjectPair& pair) const {
    // Technically < is unspecified on most object pointers
    // but std::less<T> is guaranteed to have a total ordering
    std::less<Object*> comp;
    Object *ourlow = std::min(a, b, comp);
    Object *ourhigh = std::max(a, b, comp);
    Object *theirlow = std::min(pair->a, pair->b, comp);
    Object *theirhigh = std::max(pair->a, pair->b, comp);
    if (comp(ourlow, theirlow)) return true;
    if (comp(theirlow, ourlow)) return false;
    return comp(ourhigh, theirhigh);
    }
    return false;
} 
```

当然，这是假设这`Object`是不可排序的，因此我们只关心指针值是否相同。如果`Object`它本身有一个排序，那么你可能应该调用`Object::operator<()`而不是仅仅`<`在指针上使用，即`if (*ourlow < *theirlow)`

* * *

为了使这项工作在`std::unordered_map`（我假设它是一个 C++11 的东西`stdext::hash_map`是等价的）中工作，那么您需要实现`operator==`并专门`std::hash<>`针对您的对象。对于您的专业化，您可能只想散列两个指针并组合值（使用按位异或之类的东西）。

* * *

附加到这个问题的非常长的评论线程的要点与 C++ 标准关于指针比较的内容有关。即，比较不是同一对象/数组成员的相同类型的两个对象指针会调用未指定的行为。一般来说，这对于任何具有单一统一内存系统的架构（即您可能使用的任何架构）都无关紧要，但符合标准仍然很好。为此，比较已全部更改为使用`std::less<Object*>`，因为 C++ 标准保证`std::less<T>`具有总排序。

# python - 为什么这不适用于 Python？尽管最大的数字是 15，但它一直说 12

> ID：14449518
> 
> 赞同：-5
> 
> 时间：2013-01-22T00:17:18.947
> 
> 标签：python

最大的数字是 15，但它打印出 12。帮助？

```
nums = [12, 7, 8, 15, 2, 10, 3]

big = nums[0]

spot = 0

while spot == len(nums):
    spot = spot + 1
    if(nums[spot] > big):
        big = nums[spot]
print big 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:21:06.480

你应该`enumerate()`在这里使用，并迭代`nums[1:]`：

```
In [5]: nums = [12, 7, 8, 15, 2, 10, 3]

In [6]: big = nums[0]

In [7]: for i,x in enumerate(nums[1:],1):
   ...:     if x>big:
   ...:         big=x
   ...:         spot=i
   ...:         

In [8]: spot
Out[8]: 3

In [9]: big
Out[9]: 15 
```

`help()`上`enumerate()`：

> enumerate(iterable[, start]) -> 用于索引的迭代器，iterable 的值
> 
> 返回一个枚举对象。iterable 必须是另一个支持迭代的对象。枚举对象产生包含一个计数（从开始，默认为零）和一个由可迭代参数产生的值的对。enumerate 对于获取索引列表很有用：(0, seq[0]), (1, seq[1]), (2, seq[2]), ...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T00:19:36.387

因为您的循环终止条件没有意义。你永远不会进入循环，因为`spot == len(nums)`在循环开始时不是真的！

当您希望 while 循环退出时，再考虑一下条件 - 它最初应该为 true，当您到达列表末尾时变为 false。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T00:20:56.810

`while spot == len(nums):`

因为`spot`是 0 和`len(nums)`7，所以这永远不会是真的。你的意思`!=`不是`==`我相信。

这看起来更干净：

```
for i in nums:
 if i > big:
  big = i
print big 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T00:44:55.247

你可以做

```
nums = [12, 7, 8, 15, 2, 10, 3]
big = max(nums)
spot = nums.index(big) 
```

# c++ - 如何计算图像的梯度？

> ID：14449519
> 
> 赞同：2
> 
> 时间：2013-01-22T00:17:21.470
> 
> 标签：c++, image-processing, opencv

以下代码允许使用 OpenCV 中可用的 Sobel 算子计算图像的梯度。

```
IplImage* grad_x = cvCreateImage(cvGetSize(image),IPL_DEPTH_32F,1);
IplImage* grad_y = cvCreateImage(cvGetSize(image),IPL_DEPTH_32F,1);
cvSobel(image,grad_x,1,0,3);
cvSobel(image,grad_y,0,1,3); 
```

该函数如何处理边缘`cvSobel()`？这个功能和有什么区别~~[这个](http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=sobel)~~ [这个](http://docs.opencv.org/modules/imgproc/doc/filtering.html#sobel)？我阅读了有关可用`borderType`选项的信息，但是，我不知道哪些选项更适合使用。

此外，在计算图像的梯度之前执行平滑滤波器有什么好处？

最后，计算出一张图像的梯度后，如何计算对应的角度和大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T20:42:45.433

如果你对边缘图感兴趣，你应该考虑 OpenCV 中的[Canny](http://docs.opencv.org/modules/imgproc/doc/feature_detection.html?highlight=canny#void%20Canny%28InputArray%20image,%20OutputArray%20edges,%20double%20threshold1,%20double%20threshold2,%20int%20apertureSize,%20bool%20L2gradient%29)方法。`Sobel`将返回一个梯度图像，然后您可以使用[threshold](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html?highlight=threshold#double%20threshold%28InputArray%20src,%20OutputArray%20dst,%20double%20thresh,%20double%20maxval,%20int%20type%29)通过简单的阈值化从中派生边缘图，或者您可以执行更复杂的方法，例如该`Canny`方法。

平滑图像（例如，通过[GaussianBlur](http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=gaussian#void%20GaussianBlur%28InputArray%20src,%20OutputArray%20dst,%20Size%20ksize,%20double%20sigmaX,%20double%20sigmaY,%20int%20borderType%29)或[blur](http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=blur#void%20blur%28InputArray%20src,%20OutputArray%20dst,%20Size%20ksize,%20Point%20anchor,%20int%20borderType%29)）将降低操作导致的放大噪声水平`Sobel`。

我在[这里](https://stackoverflow.com/a/11157426/951860)有一个非常相似的答案，它显示了如何确定梯度的幅度和相位。

希望有帮助！

# android - 尝试在片段中使用 Mediaplayer

> ID：14449525
> 
> 赞同：2
> 
> 时间：2013-01-22T00:18:00.897
> 
> 标签：android, android-fragments

我是编程的初学者，并试图在片段中使用 MediaPlayer，但有以下相同的问题：

[在片段中使用 Mediaplayer](https://stackoverflow.com/questions/13073471/using-mediaplayer-within-a-fragment/14440656#14440656)

这个人似乎很快就解决了问题，但我无法理解。请有人帮助我

“使用getActivity（）”和“在onAttach（）之后调用”是什么意思？
我将“getActivity()”放在 MediaPlayer.create() 方法中，如下所示：

```
MediaPlayer mp = MediaPlayer.create( getActivity , resId ); 
```

然后编译错误消失了，但是当我尝试在设备上打开应用程序时出现错误。我应该怎么办？

该类是否必须扩展 Activity，尽管我想使用 Fragment 类？
类是否必须具有扩展片段的内部类？
我很困惑。

我找到了以下 URL...
[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)如何使用以编程方式创建的内容视图将片段添加到 Activity

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:21:51.313

你把`()`

```
MediaPlayer mp = MediaPlayer.create( getActivity() , resId ); 
```

getActivity 为媒体播放器提供它需要的上下文。把它想象成`this`在活动中使用

```
//in an activity you would do this
MediaPlayer mp = MediaPlayer.create( this , resId ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T00:29:19.260

使用**getActivity().getBaseContext()**

# django - 通过 Django 电子邮件发送时链接不可点击

> ID：14449531
> 
> 赞同：0
> 
> 时间：2013-01-22T00:18:57.323
> 
> 标签：django, email, gmail

当网站发送电子邮件时，它使用`a`标签来创建链接。出于某种原因，gmail（也可能是其他电子邮件）不会将`a`标签包含的文本转换为链接。

发送邮件功能：

```
def send_main(to, sbj, msg):
    msg = EmailMultiAlternatives(sbj, msg, '********@gmail.com', to)
    msg.content_subtype = "html"
    msg.send() 
```

在 shell 中传递给电子邮件的参数

```
send_main(['****@gmail.com'], 'test', '<a href="http://www.google.com"/>test</a>') 
```

然而，当我在 python shell 中执行该行时，它会发送电子邮件，但 gmail 无法识别该链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-04T09:32:06.037

它不可点击，因为某些邮件站点会阻止 href，但这将在 gmail 中起作用，并且要使这些站点中的链接可点击，请改用 send_mail

```
from django.core.mail import send_mail

send_mail('Subject', 'http://www.google.com', 'from@example.com',
['to@example.com'], fail_silently=False) 
```

希望这会奏效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T05:35:20.850

使用此方法：

```
html_content = render_to_string('emails/email_%s.html' % template_name, { parmas })
message = EmailMultiAlternatives(subject, html_content, settings.GENERIC_EMAIL_SENDER,[email])
message.attach_alternative(html_content, 'text/html')
message.send() 
```

将其传递到 HTML 模板并调用 render_to_string - 确保附件是“text/html”并且它应该可以正常工作。

# php - 使用关系数据库构建受 GitHub 启发的时间线的设计模式？

> ID：14449533
> 
> 赞同：11
> 
> 时间：2013-01-22T00:19:31.890
> 
> 标签：php, mysql, symfony, doctrine-orm

是否有构建受 GitHub 启发的时间线的设计模式？我正在尝试为我的应用程序编写一个有点复杂且用途广泛的时间线系统。它基于这个概念：

```
[Subject] [Verb] [DirectComplement] [IndirectComplement] (metadata: [date]) 
```

所以，在实践中：

```
John created a new post called Beautiful Post (12/01 00:01) 
```

John 是主语，created 是动词，Beautiful Post 是直接补语。

```
John commented "OMG" on Beautiful Post  (12/01 00:00) 
```

John是主语，commented是动词，“OMG”是直接补语，Beautiful Post是间接补语。

我正在使用 Symfony2 和 Doctrine，运行 MySQL。我创建了一个名为 Timeline 的实体，它以字符串的形式存储 Subject、DirectComplement 和 IndirectComplement 的模型以及它们的 ID。然后，我手动进行适当的查询以获取每个对象的对象。

有没有用 Doctrine 和 MySQL 做这件事的正确方法？一种更优雅、更通用的方法，它不会让我发疯并迫使我进行大量荒谬的查询和搜索？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-05-01T04:28:38.677

## 关于数据库架构

[ActivityStrea.ms](http://activitystrea.ms)是针对您想要的社交活动流的标准提案。SO上有很多类似的帖子，主要是关于这些活动流的数据库设计（最后的链接）。请不要低估[ActivityStrea.ms JSON Schema](http://activitystrea.ms/specs/json/1.0/)的阅读量。我相信你会从中学到很多东西。

我建议你使用这个数据库设计：

```
user_id        |  INTEGER  |  user being notified
actor_id       |  INTEGER  |  user performing the action
activity_type  |  STRING   |  classname/type of the object being notified
activity_id    |  INTEGER  |  id of the object being notified
context_type   |  STRING   |  classname/type of the object's parent
context_id     |  INTEGER  |  id of the object's parent
read/view_at   |  DATETIME |  timestamp of when user saw it 
```

因此，例如，如果有人评论某个帖子，您会得到如下信息：

```
$notification = array(
    'user_id'       => $id_of_the_user_being_notified
    'actor_id'      => $comment->user_id
    'activity_type' => 'comment'
    'activity_id'   => $comment->id
    'context_type'  => 'post'
    'context_id'    => $comment->post_id
    'read_at'       => NULL
); 
```

拥有所有这些领域似乎没有必要，但他们肯定会付出代价。

使用该设计，您可以：

1.  按用户、类型或上下文对相关通知进行分组
2.  按动作类型、上下文类型和特定参与者过滤通知（通过加入）
3.  轻松清除已删除对象的通知（假设用户删除了已评论的帖子。其评论的通知应该消失）

**注意：**时间戳（created_at/updated_at）并不是必需的。由于您将加载`activity`对象（在这种情况下为评论记录），因此您已经有了它的时间戳。复制它们的唯一原因是通过时间戳查询“通知”（您将无法在此处使用 JOIN）。无论如何，请随意添加您认为合适的内容。

## 关于 Doctrine 和 Symfony

对于 Symfony，我不能说太多，但我确信 Doctrine 支持多态查询。考虑到这一点，它应该与该设计很好地配合。

在 Laravel 上，我们使用模型实现`NotifiableInterface`. 这样，不同的模型可以有自己的逻辑来通知谁被它通知，哪个是它的上下文。

应用程序本身监听模型的`create`方法并在合适时生成通知，因此模型和控制器不必自己处理通知，很好地解耦并且更改存储应该尽可能容易。

### NotifiableInterface 示例

这是一个非常简单的示例`NotifiableInterface`。您应该将其用作灵感并根据您的需要进行调整。

```
interface NotifiableInterface {

    // Returns a string representation of the type
    // It may be a get_class($this), the model table
    // or anything you like really.          
    public function get_type();

    // Returns an identifier for the object (ie its ID)
    // get_key is for compatibility with Laravel models
    // but you may use get_id.
    public function get_key();

    // Returns the context object for this entity.
    // It's advisable that this object also implements
    // NotifiableInterface, so it also has get_type and get_key
    public function get_context();

    // Returns the user_ids to be notified.
    // A comment, for instance, should notify the post owner
    // as well as anyone else that commented that post.
    public function should_notify();

} 
```

## 相关问题

以下是一些关于该主题的大量信息的帖子：

*   [实施社交活动流的最佳方式是什么？](https://stackoverflow.com/q/202198/908579)
*   [如何在社交网络中实现活动流](https://stackoverflow.com/q/1443960/908579)
*   [Facebook 喜欢通知跟踪（数据库设计）](https://stackoverflow.com/q/1887602/908579)
*   [构建通知系统](https://stackoverflow.com/q/9735578/908579)
*   [数据库设计用于存储通知给用户](https://stackoverflow.com/q/2231886/908579)

# iis - 使用本地 IIS 服务器配置 Aptana Studio 3

> ID：14449537
> 
> 赞同：1
> 
> 时间：2013-01-22T00:19:46.303
> 
> 标签：iis, aptana, web-deployment

我对 Web 开发很陌生，所以我对 Aptana Studio 和 IIS 也很陌生。我今天刚在我的电脑上安装了这两个。我阅读了 Aptana Studio 帮助系统上关于添加 Web 服务器的说明，但它似乎不适用于 IIS。

我在我的机器上本地运行 IIS 7。在 Aptana 中，我转到服务器 --> 添加服务器 --> 简单 Web 服务器。然后我在对话框中给了它以下参数：

```
Name: IIS
URL: http://localhost:80
Document Root: C:\inetpub\wwwroot 
```

该服务器随后出现在“服务器视图”中，但状态为 N/A，任何网站的预览仍将使用 Aptana 随附的内置 Web 服务器。

我的 Google 搜索没有找到任何更具体的使用 IIS 配置 Aptana 的说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T17:45:51.693

通过转到调试配置，我取得了一些成功，从那里您可以使用单选按钮的组合切换启动位置（和浏览器可执行文件）。要访问菜单，请单击调试按钮旁边的下拉菜单。

# c# - 以代码为参数的函数

> ID：14449539
> 
> 赞同：4
> 
> 时间：2013-01-22T00:19:53.330
> 
> 标签：c#, .net

我有很多函数，但我确实需要在另一个函数中运行它们。

我知道我可以做这样的事情

```
public void Method1()
{
bla bla
}

public void Method2()
{
bla bla
}

public void Wrapper(Action<string> myMethod)
        {
        method{
            myMethod()
              }
            bla bla
         } 
```

然后使用类似这样的方式调用它们：

```
wrapper(Method1()); 
```

问题是有时我需要同时运行 Method1 和 Method2。他们很多。有时一个，有时几个同时。

所以我认为做这样的事情会很棒：

```
Wrapper({bla bla bla; method(); bla bla; }
{
method{
bla bla bla;
 method();
 bla bla;

        }
} 
```

在方法内部运行一个代码块，方法的参数就是代码块。你认为有可能还是你会推荐另一种方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T00:25:03.690

有

```
public static void Wrapper(Action<string> myMethod)
{
    //...
} 
```

您可以`myMethod`使用[lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)指定：

```
static void Main(string[] args)
{
    Wrapper((s) =>
    {
        //actually whatever here
        int a;
        bool b;
        //..
        Method1();
        Method2();
        //and so on
    });
} 
```

也就是说，您不需要显式定义具有所需签名的方法（此处为匹配`Action<string>`），但您可以编写内联 lambda 表达式，做任何您需要的事情。

来自 MSDN：

> 通过使用 lambda 表达式，您可以编写可以作为参数传递或作为函数调用的值返回的局部函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T00:56:35.943

如果您已经有一些方法可以接受 Action 参数，您可以使用匿名方法将一堆方法组合在一起以便顺序执行。

```
//what you have
public void RunThatAction(Action TheAction)
{
  TheAction()
}

//how you call it
Action doManyThings = () =>
{
  DoThatThing();
  DoThatOtherThing();
}
RunThatAction(doManyThings); 
```

* * *

如果按顺序调用方法是您经常做的事情，请考虑创建一个函数来接受尽可能多的操作...

```
public void RunTheseActions(params Action[] TheActions)
{
  foreach(Action theAction in TheActions)
  {
    theAction();
  }
}

//called by
RunTheseActions(ThisAction, ThatAction, TheOtherAction); 
```

* * *

你说了两次“同时”，这让我想到了并行性。如果您想同时运行多个方法，可以使用 Tasks 来执行此操作。

```
public void RunTheseActionsInParallel(params Action[] TheActions)
{
  List<Task> myTasks = new List<Task>(TheActions.Count);
  foreach(Action theAction in TheActions)
  {
    Task newTask = Task.Run(theAction);
    myTasks.Add(newTask);
  }
  foreach(Task theTask in myTasks)
  {
    theTask.Wait();
  }
} 
```

# mysql - 怎么找孙子？

> ID：14449549
> 
> 赞同：3
> 
> 时间：2013-01-22T00:20:51.657
> 
> 标签：mysql, sql, database

我正在尝试查找特定 ID 的所有孙子，但我似乎无法正确加入。下面的代码有效，但我需要从产品表中获取与之关联的产品。

```
SELECT b.category_id, b.category_name, b.parent, a.parent 
FROM categories AS a, categories AS b 
WHERE a.category_id = b.parent AND a.parent = 119 
```

当我尝试加入产品表时，我不断收到错误消息：

```
SELECT *
FROM products p
INNER JOIN products_categories pc
ON p.product_id = pc.product_id
INNER JOIN (
      SELECT b.category_id, b.category_name, b.parent, a.parent 
      FROM categories AS a, categories AS b 
      WHERE a.category_id = b.parent AND a.parent = 119
      )x 
```

我想要的结果将是以下内容：（注意：查看我的 SQL Fiddle 以查看代码视图中的架构）

```
(76, 'BR134', 'LEA530664', 'ITEM1234', 1499.99, 'yes', 'This is a nice gun'),
(77, 'mZCXGT', 'LEA471061', 'qwer345', 89.99, 'yes', 'Testing!'),
(78, 'ert', 'LEA023991', 'asdf34', 129.99, 'yes', 'Another test to get this right!'),
(79, 'model test', 'LEA355935', 'item test', 119.99, 'yes', 'This is another test dammit!'),
(80, 'CZV1354', 'LEA741837', 'LI-1234', 1299.99, 'yes', 'This is a hipoint weapon!'),
(81, 'PINK12G', 'LEA008558', 'PINK-SHG', 89.99, 'yes', 'YEP! This is pink!'),
(82, 'BOWTECH', 'LEA762521', 'asdf', 899.99, 'yes', 'This is a test!'),
(83, 'LX32', 'LEA346903', 'MADEUP', 1499.99, 'yes', 'This is Carters gun.'); 
```

SQL小提琴：

[http://sqlfiddle.com/#!2/dd66c/2](http://sqlfiddle.com/#!2/dd66c/2)

这是我的架构： ![在此处输入图像描述](../Images/cdb9e370ae30b3bbd8e15222cbbafb41.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:35:45.400

我认为您正在寻找这个（我为“可调试性”添加了类别名称）：

```
SELECT 
  p.product_id
, p.model
, p.sku
, p.item_number
, p.msrp
, p.availability
, p.description
, grand_child.category_name AS grand_child_category
, child.category_name AS child_category
, parent.category_name AS parent_category
FROM categories parent
INNER JOIN categories child 
ON parent.category_id = child.parent 
INNER JOIN categories grand_child
ON child.category_id = grand_child.parent 
INNER JOIN products_categories pc
ON grand_child.category_id = pc.category_id 
INNER JOIN products p
ON p.product_id = pc.product_id
WHERE parent.category_id = 119 
```

# postgresql - PostgreSQL 的 plperlu 解释器的 @INC 和/或缓存库：为不同的数据库分开？

> ID：14449550
> 
> 赞同：0
> 
> 时间：2013-01-22T00:20:54.060
> 
> 标签：postgresql, caching, include, plperl, global-namespace

我正在开发一些库的不同版本，并且希望从我编写的各种 plperl 函数中加载基于`current_database()`.

（IIRC 使用`use`而不是`require`首选，我认为是因为它可能会缓存库？）

但是，我担心同一台服务器上的不同数据库会出现问题，无论哪种方式我都在考虑这样做：

1)`use lib`然后`use`-- 如果不止一条路径卡在@INC 上，它可能不是正确的被使用的路径

2）`require`--即使这意味着在当前脚本中总是使用正确的，这是否意味着每次都重新加载库？无论哪种方式，如果库在使用后保持加载，是否有可能来自不同版本的命名空间污染可能导致错误？（例如，如果我有一些基于是否定义变量的分支，并且在一个版本中它是默认的，而在另一个版本中它不是 - 所有版本现在都会像它一样，除非我明确地取消定义它而不仅仅是没有定义它？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:19:54.100

如果 plperl**不是**通过[shared_preload_libraries](http://www.postgresql.org/docs/current/static/runtime-config-resource.html#RUNTIME-CONFIG-RESOURCE-KERNEL)加载的，那么每个数据库会话在第一次使用时都会有自己的解释器新初始化，因此一个会话包含的库不可能干扰另一个会话。

有关更多信息，请参阅手册中的[PL/Perl Under the Hood](http://www.postgresql.org/docs/current/static/plperl-under-the-hood.html)。

# wpf - WPF 的 PasswordBox 替代品

> ID：14449555
> 
> 赞同：0
> 
> 时间：2013-01-22T00:21:13.603
> 
> 标签：wpf, passwords, controls

我刚刚遇到了 WPF 的限制，导致当前的 PasswordBox 无法使用。我必须创建一个派生控件来实现我的 UI 需要的一些接口。

那就是说，是否有另一个控件具有相同的目的并且没有被密封？可能开源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:31:08.983

WPF 中控件的一般方法是组合（或重新设置样式）而不是继承。因此，如果要围绕 PasswordBox 创建包装行为，一种选择是派生一个包含 PasswordBox 的新 UserControl，然后在新 UserControl 上实现接口。如果 UserControl 的开销太高（在大多数情况下不应如此；它比旧的 WinForms 用户控件概念要轻得多），您可以直接从 FrameworkElement 派生，尽管这需要更多工作（必须重写一些方法来转发排列/测量步骤并将密码框添加到可视化树中。）

# c# - VS2010 奇怪的 ASP.NET 启动错误

> ID：14449557
> 
> 赞同：2
> 
> 时间：2013-01-22T00:21:28.160
> 
> 标签：c#, asp.net, visual-studio-2010, telerik, asp.net-development-serv

我有工作正常的现有 VS2010 ASP.NET 解决方案。但是现在当我尝试运行它时，我得到了一些非常奇怪（看似随机组合）的错误：

*   文件监控的文件名无效：'[Web App Path]\Controls'（这是一个目录）
*   不允许请求的注册表访问。（来源：mscorlib - 调用堆栈表示堆栈较高的父级来自 System.Web.Compliation.BuildManager.ExecutePreAppStart()）
*   System.Web.HttpException 发生/HResult=-2147467259/消息=文件不存在。
*   访问路径：'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\6c9c2bea\84b35c9c\App_Web_cyfzelmo.dll'被拒绝。（还有 App_Browsers.dvwnc2tw.dll、App_global.asax.wtigsdou.dll）
*   现有连接被远程主机强行关闭
*   访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）- System.Web.HttpRuntime.EnsureFirstRequestInit（HttpContext 上下文）中的 System.Threading.Monitor.ReliableEnter(Object obj, Boolean& lockTaken)
*   值不能为空。参数名称：source [堆栈父级：System.Web.Compilation.BuildManager.LoadCachedPreAppStartAssemblies(string preStartInitListPath)]

**这些仅在我设置了 Debug/Exceptions/CLR Exceptions (Thrown)**时显示，但是我不记得以前见过它们（我通常总是设置此选项）。我创建了一个空白的 ASP.NET 解决方案，启用了 CLR 异常（抛出）并且还得到了注册表和参数 null 错误 - 每当我重建并重新运行解决方案时。

我最近也安装了 VS2012，但不确定这是否是一个原因。我还升级了 Telerik 控件 - 但我的空白解决方案没有配置它们。

除了 VS2010 的修复安装还有什么建议吗？（当我有时间时，我可能会最终尝试）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T08:08:42.667

安装一定是损坏了。我们重新映像机器并重新安装 VS2010。

# regex - 我可以用正则表达式创建条件查找和替换吗？

> ID：14449560
> 
> 赞同：3
> 
> 时间：2013-01-22T00:21:32.153
> 
> 标签：regex, nginx

我正在尝试使用允许使用正则表达式的 NginX 替换过滤器。我可以让它以基本方式工作，即替换`phone`为`telephone`，但我似乎无法让它有条件地替换一串文本。

这是检查 XML 的检查：

```
eat apples cantaloupe bananas often 
```

我想执行以下规则集：

1.  查找以 开头`eat`和结尾的字符串`often`
2.  如果字符串包含`bananas`，则替换`bananas`为`and especially bananas`
3.  如果字符串不包含香蕉，则不对字符串执行任何操作

我知道我可以使用这样的东西来使部分字符串可用：

```
/(eat.*)(bananas)?(.*often)/ 
```

`bananas`假设存在，我可以使用以下规则进行替换：

```
 $1 and especially $2 $3 
```

`bananas`但是，如果不存在，这将给出一个奇怪的结果：

输入

```
eat apples cantaloupe often 
```

输出：

```
eat apples cantaloupe and especially often 
```

我需要前瞻运算符吗？我已经阅读[了这篇文章](http://www.regular-expressions.info/lookaround.html)，但我仍然遇到问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T00:41:38.777

没有前瞻的替代方案：

```
Raw Match Pattern:
^eat(.*)(bananas)(.*)often$

Raw Replace Pattern:
eat \1 and especially \2 often

$sourcestring before replacement:
do not eat bananas often
eat apples cantaloupe often
eat apples cantaloupe bananas often

$sourcestring after replacement:   
do not eat bananas often
eat apples cantaloupe often
eat apples cantaloupe and especially bananas often 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T00:28:27.913

尝试使用前瞻：

```
/(?=.*eat.*bananas.*often) bananas/ 
```

# python - Peewee - 查询 ['str' in item]

> ID：14449561
> 
> 赞同：1
> 
> 时间：2013-01-22T00:21:33.187
> 
> 标签：python, flask, peewee

我知道我这样做是错误的 - 我如何在没有列表理解但在 peewee 中查询的情况下做到这一点。我想查询一下搜索词是否“在”对象参数中。

```
knights = Knight.select()
knights = [knight for knights in knights if request.args.get('ni').lower() in \
knights.who_say.lower() ] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T04:35:22.437

看看[http://peewee.readthedocs.org/en/latest/peewee/querying.html#column-lookups](http://peewee.readthedocs.org/en/latest/peewee/querying.html#column-lookups)

一个真实的例子可能会更好我不清楚你到底想做什么......但看起来你想要不区分大小写的“喜欢”。

```
ni = request.args.get('ni')
Knights.select().where(Knights.who_say ** ni.join(('%', '%'))) 
```

# javascript - Javascript和JQuery for循环数组创建列表

> ID：14449578
> 
> 赞同：0
> 
> 时间：2013-01-22T00:23:24.573
> 
> 标签：javascript, arrays, loops

html:

```
<p>Order</p>
<div>
<ul data-role="listview" id="myorder"></ul>
</div> 
```

JS：

```
itemName = ["beer1", "beer2", "beer3", "beer4"];
itemQty = [0, 2, 0, 4];

for ( var i=0, len=itemName.length; i<len; ++i) { 
    if (itemQty[i] > 0) {
        var listItem = document.createElement("li");
        listItem.innerHTML = itemName[i] + "    Qty:" + itemQty[i];
        $('#myorder').append(listItem);
        $('#myorder').listview('refresh');
    }
} 
```

我知道它正盯着我的脸，但为什么这只显示我的第一个实例`Qty > 0`？

[http://jsfiddle.net/Sptx7/](http://jsfiddle.net/Sptx7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:25:40.993

您在这里遇到错误：

```
$('#myorder').listview('refresh'); 
```

因为`listview`is `undefined`，所以代码终止。

* * *

这是您对该行的注释：http: [//jsfiddle.net/Sptx7/2/](http://jsfiddle.net/Sptx7/2/)

如您所见，它呈现了两个列表项。

# c# - 安全使用 SecureString 登录表单

> ID：14449579
> 
> 赞同：25
> 
> 时间：2013-01-22T00:23:27.200
> 
> 标签：c#, security, securestring

所以有一个似乎很少使用的类：[SecureString](http://msdn.microsoft.com/en-us/library/system.security.securestring.aspx)。它至少从 2.0 开始就已经存在，并且有一些 SO 问题，但我想我会问我自己的具体问题：

我有一个登录表单；带有用户名和（屏蔽）密码字段的简单 WinForms 对话框。当用户同时输入并单击“登录”时，信息被传递给一个注入的身份验证类，该类执行一层密钥拉伸，然后对拉伸密钥的一半进行散列以进行验证，而另一半是加密用户的对称密钥账户数据。当这一切都完成后，loginForm 被关闭，身份验证器类被释放，系统继续加载主表单。相当标准的东西，可能比标准的哈希密码和比较涉及更多，但在我的情况下，通过以明文形式存储用户数据，简单的哈希密码将被击败，因为该数据包括第三个的凭据-派对系统（我们都知道人们喜欢重用密码）。

这是第一个问题；我将如何使用 SecureString 从 Password 文本框中检索密码，*而不会*通过文本框的 Text 属性将其公开为普通 System.String？我假设有一种方法可以访问由 CLR 类包装的文本框的非托管 GDI 窗口，并使用 Marshal 类提取文本数据。我只是不知道如何，我似乎无法找到好的信息。

这是第二个问题；将密码作为 SecureString 后，如何将其从 System.Security.Crypto 命名空间传递给哈希提供程序？我的猜测是我会使用 Marshal.SecureStringToBSTR()，然后从返回的 IntPtr 使用 Marshal.Copy() 回到字节数组中。然后我可以调用 Marshal.ZeroBSTR() 来清理非托管内存，并且一旦我有了哈希值，我就可以使用 Array.Clear() 将托管数组清零。如果有一种更简洁的方法可以让我完全控制内存的任何托管副本的生命周期，请告诉我。

第三个问题；这一切真的有必要吗，或者 System.String 在托管内存环境中固有的不安全性有点夸大其词？任何用于存储密码的东西，无论是加密的还是其他的，*都应该*在操作系统考虑将应用程序交换到虚拟内存之前（允许在硬关机）。冷启动攻击是一种理论上的可能性，但实际上，这有多普遍？更大的担忧是现在解密的用户数据，它作为用户的一部分在整个应用程序生命周期内一直存在（因此将成为使用 SecureStrings 的主要候选者，除了它们保持相当休眠的几个基本用法）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T00:36:05.143

如果您认为您需要，`SecureString`您必须相信攻击者也可以读取您的进程内存。如果后者是真的，他可以在输入密码字符时读取它们，或者直接从文本框内部字符缓冲区读取，或者从屏幕上读取像素。

这是一个不现实的场景。不要使用`SecureString`. 它帮助不大，而且会浪费你的时间。

冷启动攻击更为真实，但极为罕见。他们需要物理机器访问，通常完全拥有机器。*在这种情况下，攻击者阅读*是您最不关心的问题。

基本上，您必须设计一个案例，让您的**开发人员时间**充分利用`SecureString`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T00:50:30.580

首先，我想声明我同意 usr - 不要打扰。

现在到细节：

*   [这个](https://stackoverflow.com/a/141393/284111)答案为讨论提供了很好的背景。
*   [这](http://weblogs.asp.net/pglavich/archive/2006/03/14/440191.aspx)是一个使用 SecureString 的 TextBox 控件。我没有用过这个，所以我不能评论质量，但是在 MS 博客上，我不认为它是正确的。
*   要回答有关将数据传递给 System.Security.Crypto 的问题，基本上你不能也没有多少非托管内存编组会帮助你，因为在这种编组过程中，字符串会被解密。它必须这样做，否则它不能被您的目标 API 使用。如果您使用 CSP 或 X509Certificate，则可以使用 SecureSctring，因为框架支持这些，但仅此而已。

# c++ - “未解析的外部符号”从另一个类中引用一个类

> ID：14449582
> 
> 赞同：1
> 
> 时间：2013-01-22T00:24:11.593
> 
> 标签：c++, visual-studio-2012

我正在尝试做一些我认为应该很容易的事情（作为 C++ 菜鸟）：从另一个类中引用一个类。出于某种原因，我收到一个错误：

> 错误 6 错误 LNK2019：未解析的外部符号“public: float * __thiscall Foo::Test(void)”(?Test@Foo@@QAEPAMXZ) 在函数“void __cdecl Test(void)”(?Test@@YAXXZ) 中引用.obj

**Foo.h**

```
class Foo
{
public:
    Foo(void);
    ~Foo(void);
    float* Test();
}; 
```

**Foo.cpp**

```
#include "Foo.h"
float* Test()
{
    return new float[0];
} 
```

**酒吧.h**

```
class Bar
{
public:
    Bar(void);
    ~Bar(void);
    void Test();
}; 
```

**条形图.cpp**

```
#include "Bar.h"
#include "Foo.h"
void Test()
{
    Foo* foo = new Foo();
    foo->Test();
} 
```

为什么编译器不让我从**Bar引用类****Foo**？我不知道这个错误是什么意思，也不知道如何调试它。

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T00:25:37.980

```
#include "Foo.h"
float* Test()
{
    return new float[0];
} 
```

应该：

```
#include "Foo.h"
float* Foo::Test()
{
    return new float[0];
} 
```

您的版本只是定义了一个自由函数`Test`，与成员函数不同`Foo::Test`。

一个`Unresolved external symbol`错误意味着编译器告诉你*，你告诉我我会找到这个东西的定义，但是我看了看，在任何地方都找不到*。从本质上讲，你对它撒了谎，它把你叫出来了。

另一个垃圾是调用约定（`__cdecl`, `__thiscall`）和损坏的（实际）函数名（`?Test@@YAXXZ`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T00:26:01.280

您需要实现`Foo::Foo()`,`Foo::~Foo()`和类似的`Bar`. 此外，实施`float* Test()`应

```
float* Foo::Test() { ... } 
```

但是你真的应该避免将指向动态分配对象的指针返回给调用者。`std::vector<float>`例如，使用智能指针。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T00:27:25.257

您没有实现成员函数，`Foo`而是实现了`Bar`独立测试函数。要在类外实现成员函数，您需要提供具有范围解析的类名。

更新：

Foo.cpp

```
float* Test()
{
  return new float[0];
} 
```

到

```
float* Foo::Test()
{
  return new float[0];
} 
```

条形图.cpp

```
void Test()
{
  Foo* foo = new Foo();
  foo->Test();
} 
```

到：

```
void Bar::Test()
{
   Foo* foo = new Foo();
   foo->Test();
} 
```

`~Foo(void)`您还需要`~Bar(void)`实施**

# ios - 模拟器上未调用 UI 自动化 onAlert 方法

> ID：14449584
> 
> 赞同：4
> 
> 时间：2013-01-22T00:24:36.660
> 
> 标签：ios, ios-simulator, instruments, ios-ui-automation

首次启动我的应用程序时，我会收到一个权限警报，询问我是否允许该应用程序使用我当前的位置。我的`onAlert`方法成功消除了我设备上的警报。当我在模拟器上运行它时，它永远不会被调用。其他内部警报由`onAlert`模拟器上的方法处理。`SpringBoard`模拟器不处理来自的权限警报。有任何想法吗？

```
UIATarget.onAlert = function onAlert(alert)
{
    var title = alert.name();
    UIALogger.logMessage(title);
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-11T16:02:25.020

之所以会出现此问题，是因为您看到的警报来自系统本身——*在*应用程序实际启动和您的自动化环境初始化之前。

要看到这种情况发生，请在函数定义之前添加一个调试行`UIATarget.onAlert`：

```
UIALogger.logDebug("Now setting up the alert function");
UIATarget.onAlert = function onAlert(alert) {} 
```

接下来，`Reset Content and Settings...`在您的模拟器上并重新运行您的自动化。您应该注意到，直到您手动关闭有关使用当前位置的警报 *后*，调试行才会出现。

我看不出这将如何从 javascript 代码中修复。您必须延迟警报，直到应用程序正确启动，或按照[此答案中显示的示例进行](https://stackoverflow.com/a/11116095/2063546)操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:20:31.930

如果默认处理程序不适合您，那么您可以简单地使用“return true”而不是“return false”，以便您可以手动关闭弹出框。在“返回真”语句之前，您可以编写一些语句来点击您想要的按钮（关闭按钮）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T06:44:54.937

我在启动后立即显示警报的应用程序遇到了同样的问题。当我记录元素树时，我可以看到额外的警报窗口，我可以让 UIAutomation 点击​​警报中的 OK 按钮。但是从未调用过警报处理程序。
原因是警报出现在 UIAutomation 正确设置以处理它之前。如果我延迟了警报的呈现，UIAutomation 确实抓住了它。

# c# - 带有物理路径的图片网址？

> ID：14449590
> 
> 赞同：0
> 
> 时间：2013-01-22T00:25:02.853
> 
> 标签：c#, asp.net, .net, vb.net

在应用程序中，我有物理路径（图像的操作系统路径），并且要求将此路径分配给图像控件。图像控件 imageUrl 需要应用程序路径。请建议如何做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T03:38:35.353

就像 millimoose 所说，您的文件应该位于已部署应用程序的同一文件夹或子文件夹中。如果有任何机会（与您的应用程序一起部署或手动复制），您可以使用以下方式将其转换为相对路径：

```
 string phicalPath = @"C:\WebSite\Images\myimg.png";
        String desiredRelativePath = phicalPath.Replace(Request.ServerVariables["APPL_PHYSICAL_PATH"], String.Empty); 
```

希望有帮助。

# sql - 从 Windows Store App 复制或创建 Windows 移动服务中的 SQL 表

> ID：14449597
> 
> 赞同：1
> 
> 时间：2013-01-22T00:25:45.380
> 
> 标签：sql, azure, windows-store-apps, microsoft-metro

在“常规”SQL 中，我们可以通过发送如下查询来创建表：

```
CREATE TABLE table_name
(
column_name1 data_type,
column_name2 data_type,
column_name3 data_type,
....
) 
```

...并且可以像这样复制表格：

```
CREATE TABLE new_table AS (SELECT * FROM old_table); 
```

现在跳到 Windows Azure 移动服务世界，以及它的“特殊”SQL。我在使用 Azure 门户（非编程方式）创建表时取得了很大成功，然后像这样访问这些表：

```
var mobClient = new MobileServiceClient("[url]",                                              "[app key]");
var mobTable = mobClient.GetTable<MyTableClass>(); 
```

浏览客户端的智能感知没有显示创建或复制表的选项。

在 Windows Azure 移动服务及其独特的 SQL 品牌中，是否可以通过应用程序以编程方式创建新表或复制现有表？有谁知道怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:55:35.283

实际上，我在 Microsoft 的 msdn 上发现，今天的 Azure 无法做到这一点。我将其作为功能请求提交。

我一直在使用的一个不错的功能是动态模式。如果您在 Visual Studio 中的项目中有一个表定义类，其名称与 Azure 表匹配，则当您对 VS 类进行更改时，Azure SQL 表会自动更新。你仍然需要仔细检查和微调，但仍然很方便。

您在此页面上启用动态架构： ![在此处输入图像描述](../Images/34eab0e64c751421dcc87e729f07bca6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T01:13:07.030

不能通过[mssql](http://msdn.microsoft.com/en-us/library/windowsazure/jj554212.aspx)对象发送 SQL 吗？

# emacs - 将 emacs 中的 ^ 绑定到一些更简单的键

> ID：14449598
> 
> 赞同：3
> 
> 时间：2013-01-22T00:25:43.877
> 
> 标签：emacs, dired

我用 a 来深入挖掘。使用 ^ 进行备份对我来说非常不直观。我想将其更改为其他内容，例如 b 或 r 。我怎样才能做到这一点 ？我无法让 global-set-key 为同样的工作。

~干杯！新泽西州

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T00:34:56.217

`(define-key dired-mode-map [yourkey] 'dired-up-directory)`

代替 [yourkey]，您可以使用 [up]、“b”或“r”之类的名称，这只会在 dired 中，请注意。

`(define-key dired-mode-map "b" 'dired-up-directory)`

例如，您也可以控制起来。请注意，在某些情况下它更易于使用`[]`，因此您将替换`[yourkey]`为`[C-up]`(字面意思)

这个想法是：定义特定地图的键，并将其绑定到您想要的功能。

**编辑**：只是为了让你下次知道如何自己做这种事情，知道对于任何模式你都有结尾（-mode-map），所以 LaTeX-mode-map、emacs-lisp-mode-map 等。与`define-key`.

如果你想知道绑定到什么函数，使用`C-h k`(Control + h, then k) 后跟你的键，它会告诉你调用的函数可以绑定到其他东西（确保你但是，当 dired-mode 处于活动状态时调用它！）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T03:31:38.713

或者，如果您使用此处显示的 elisp：

`C-h``i``g` `(dired-x) Optional Installation Dired Jump` `RET`

您可以使用`C-x``C-j`来调用`dired-jump`.

这比`dired-up-directory`它在文件缓冲区中也有效（在这种情况下，它会将您带到 dired 的父目录）。

在所有情况下，生成的 dired 缓冲区都已将点设置为您来自的文件或目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T17:08:33.807

对于它的价值，我使用以下内容使用`e`.

```
(add-hook 'dired-mode-hook
          (lambda ()
            (define-key dired-mode-map (kbd "e")
              (lambda () (interactive) (find-alternate-file ".."))))) 
```

这与`dired-up-directory`它保留在当前缓冲区中不同，而不是将父目录加载到新缓冲区中。（我曾经关心未使用的缓冲区。）

# canvas - WebGL blit 纹理到画布

> ID：14449599
> 
> 赞同：4
> 
> 时间：2013-01-22T00:26:00.210
> 
> 标签：canvas, webgl, textures, blit

在 WebGL 中将纹理传送到 HTML 画布的最干净的方法是什么。我可以看到设置正交投影并渲染纹理四边形，但有更清洁的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:25:08.407

什么是“将纹理贴到 HTML5 画布上”？你的意思是只在画布上绘制一个 1x1 像素的纹理吗？不需要正交投影。最简单的事情是要么制作一个单位四边形并缩放，要么制作一个像素坐标的四边形并绘制。

这是像素坐标四边形着色器

```
attribute vec2 a_position;
attribute vec2 a_texCoord;

uniform vec2 u_resolution;

varying vec2 v_texCoord;

void main() {
   // convert the rectangle from pixels to 0.0 to 1.0
   vec2 zeroToOne = a_position / u_resolution;

   // convert from 0->1 to 0->2
   vec2 zeroToTwo = zeroToOne * 2.0;

   // convert from 0->2 to -1->+1 (clipspace)
   vec2 clipSpace = zeroToTwo - 1.0;

   gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);

   v_texCoord = a_texCoord;
} 
```

这个例子来自这里。(http://games.greggman.com/game/webgl-image-processing/)

单位四边形版本的比例偏移量为

```
attribute vec2 a_position;
attribute vec2 a_texCoord;

uniform vec2 u_offset;
uniform vec2 u_scale;

varying vec2 v_texCoord;

void main() {
   gl_Position = vec4(a_position * u_scale + u_offset, 0, 1);

   v_texCoord = a_texCoord;
} 
```

最后，无论哪种情况，您都可以使用 3x3 矩阵数学来简化代码

```
attribute vec2 a_position;

uniform mat3 u_matrix;

void main() {
  // Multiply the position by the matrix.
  gl_Position = vec4((u_matrix * vec3(a_position, 1)).xy, 0, 1);
} 
```

只需设置矩阵。您可以使用单位四边形（添加比例矩阵以放大像素）或使用像素。

一个矩阵

```
[
  2 / canvasWidth, 0, 0,
  0, -2 / canvasHeight, 0,
  -1, 1, 1
] 
```

将从像素转换为剪辑空间。一个矩阵

```
[
  imageWidth, 0, 0,
  0, imageHeight, 0,
  0, 0, 1
] 
```

将从单位四边形转换为图像的大小。

进入所有矩阵数学对于这个答案来说似乎太多了，但如果你有兴趣，你可以在这里找到它参见[http://games.greggman.com/game/webgl-2d-matrices/](http://games.greggman.com/game/webgl-2d-matrices/)

# c# - 在一个球体 C# 上的高度图上查找高度

> ID：14449602
> 
> 赞同：1
> 
> 时间：2013-01-22T00:26:07.397
> 
> 标签：c#, math, angle, heightmap

我正在寻找一些数学帮助。我有一个游戏是生成 2D 高度图，然后使用长度/方向公式在球体上拉伸。现在我需要知道如何计算高度图上两点之间的高度。

我知道的：

*   保存高度图的数组
*   我的对象的弧度角
*   高度图上有多少个点

我的问题看起来有点像这样：

[图片](http://memberfiles.freewebs.com/67/76/61827667/photos/undefined/gah.png)

[更多图片](http://spine-games.webs.com/apps/photos/album?albumid=14391435)

红线和蓝线是两个高度图点，浅蓝色是我想计算高度的地方。

这是我当前的代码，但效果不佳。

```
public double getheight(double angle)
{
    //find out angle between 2 heightmap point
    double offset = MathHelper.TwoPi / (heightmap.Length - 1);
    //total brainfart attempt
    double lowerAngle = offset * angle;
    double upperAngle = offset * angle + offset;
    //find heights
    double height1 = heightmap[(int)lowerAngle];
    double height2 = heightmap[(int)upperAngle];
    //find offset angle
    double u = angle - lowerAngle / (upperAngle - lowerAngle);
    //return the height
    return height1 + (height1 - height2) * u;
} 
```

从我的植被代码来看，这似乎可以正常工作，但是对于单位等来说使用起来很粗糙，因为它们在移动时会向上/向下跳跃，因为它仅使用 1 个高度图点。

```
double[] hMap = planet.getHeightMap();
double i = hMap.Length / (Math.PI * 2);
this.height = hMap[(int)(angle * i)]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T02:41:53.440

**编辑：最后基于附加问题信息的示例**

对我来说听起来像是线性插值 - 如果你从二维的角度来看它，你有两点：

```
(x1, y1) = point one on heightmap
(x2, y2) = point two on heightmap 
```

`(x1,x2)`和一个未知高度之间的某个点：

```
pu = (xu, yu) 
```

LERP 的通用公式是：

```
pu = p0 + (p1 - p0) * u 
```

在哪里：

*   `p0`= 第一个值
*   `p1`= 第二个值
*   `u`= % 你的未知点介于两者之间`(p0,p1)`

在这里，我们会说`p0`==`y2`和`p1`== `y1`。`x1`现在我们需要确定未知点之间的“多远” `x2`- 如果您知道两个高度图点的角度，这很容易：

```
u = ang(xu) - ang(x1) / (ang(x2) - ang(x1)) 
```

或者，您可以将角度投影到以`Max(y1,y2)`这种方式获得“未知 x 位置”，然后计算上述值。

所以，让我们尝试一个人为的例子：

```
p1 = point one in map = (1,2) therefore ang(p1) ~ 57 degrees
p2 = point two in map = (2,4) therefore ang(p2) ~ 114 degrees 
```

请注意，这里的“x 轴”是沿着球体表面的，“y 轴”是距球心的距离。

```
pu = object location = py @angle 100 degrees ~ 1.74 radians

px = (1.74 rad - 1 rad ) / (2 rad - 1 rad) = 0.74 / 1.0 = 0.74 => 74%

py = y0 + (y1 - y0) * u
   = 2 + (4 - 2) * 0.74
   = 2.96 
```

希望我没有在某处丢掉或放错标志...... :)

好的，您的示例代码 - 我已经对其进行了一些调整，这就是我想出的：

首先，让我们定义一些我自己的助手：

```
public static class MathHelper
{
    public const double TwoPi = Math.PI * 2.0;
    public static double DegToRad(double deg)
    {
        return (TwoPi / 360.0) * deg;
    }
    public static double RadToDeg(double rad)
    {
        return (360.0 / TwoPi) * rad;
    }

    // given an upper/lower bounds, "clamp" the value into that
    // range, wrapping over to lower if higher than upper, and
    // vice versa    
    public static int WrapClamp(int value, int lower, int upper)
    {
        return value > upper ? value - upper - 1
            : value < lower ? upper - value - 1
            : value;
    }
} 
```

我们的测试设置：

```
void Main()
{
    var random = new Random();

    // "sea level"
    var baseDiameter = 10;

    // very chaotic heightmap
    heightmap = Enumerable
        .Range(0, 360)
        .Select(_ => random.NextDouble() * baseDiameter)
        .ToArray();

    // let's walk by half degrees, since that's roughly how many points we have
    for(double i=0;i<360;i+=0.5)
    {
        var angleInDegrees = i;
        var angleInRads = MathHelper.DegToRad(i);
        Console.WriteLine("Height at angle {0}°({1} rad):{2} (using getheight:{3})",
            angleInDegrees,
            angleInRads,
            heightmap[(int)angleInDegrees],
            getheight(angleInRads));
    }
}

double[] heightmap; 
```

还有我们的“getheight”方法：

```
// assume: input angle is in radians
public double getheight(double angle)
{
    //find out angle between 2 heightmap point
    double dTheta = MathHelper.TwoPi / (heightmap.Length);

    // our "offset" will be how many dThetas we are
    double offset = angle / dTheta;

    // Figure out two reference points in heightmap
    // THESE MAY BE THE SAME POINT, if angle ends up
    // landing on a heightmap index!
    int lowerAngle = (int)offset;
    int upperAngle = (int)Math.Round(
        offset, 
        0, 
        MidpointRounding.AwayFromZero);

    // find closest heightmap points to angle, wrapping
    // around if we go under 0 or over max
    int closestPointIndex = MathHelper.WrapClamp(
        lowerAngle, 
        0, 
        heightmap.Length-1);
    int nextPointIndex = MathHelper.WrapClamp(
        upperAngle, 
        0, 
        heightmap.Length-1);

    //find heights
    double height1 = heightmap[closestPointIndex];
    double height2 = heightmap[nextPointIndex];

    // percent is (distance from angle to closest angle) / (angle "step" per heightmap point)
    double percent = (angle - (closestPointIndex * dTheta)) / dTheta;

    // find lerp height = firstvalue + (diff between values) * percent
    double lerp = Math.Abs(height1 + (height2 - height1) * percent);

    // Show what we're doing
    Console.WriteLine("Delta ang:{0:f3}, Offset={1:f3} => compare indices:[{2}, {3}]", 
        dTheta, 
        offset, 
        closestPointIndex, 
        nextPointIndex);
    Console.WriteLine("Lerping {0:p} between heights {1:f4} and {2:f4} - lerped height:{3:f4}", 
        percent,
        height1, 
        height2,
        lerp);

    return lerp;
} 
```

# ms-access - 获取访问表单以显示来自自定义类的属性值

> ID：14449607
> 
> 赞同：2
> 
> 时间：2013-01-22T00:26:44.470
> 
> 标签：ms-access, vba

我有一个 MS Access 表格和一个班级。该类有一个属性：成本

在我的表格代码上：

```
private clsMyClass as New MyClass 
```

如果在表单上，​​我使用以下代码创建一个按钮：

```
MsgBox clsMyClass.Cost  ' the value in cost is displayed 
```

我想要一个文本框来显示这个值。

我尝试放入`=clsMyClass.Cost`控制**源**，但我得到一个**#?NAME**

如何在表单的文本框中显示我的类属性的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T02:29:14.703

由于 Access 不与作为文本框控件源的类属性配合使用，因此请在窗体的 On Current 事件期间为其赋值。

这适用于 Access 2007：

```
Option Compare Database
Option Explicit
Private clsMyClass As MyClass

Private Sub Form_Current()
    Me.txtCost = clsMyClass.Cost
End Sub

Private Sub Form_Open(Cancel As Integer)
    Set clsMyClass = New MyClass
End Sub 
```

# xslt - 使用 xslt 排除元素不起作用

> ID：14449608
> 
> 赞同：0
> 
> 时间：2013-01-22T00:27:01.667
> 
> 标签：xslt

我正在尝试转换一个包含单词列表的 xml 文件，并且我正在尝试从结果文档中排除一些元素，更具体地说，

我的清单如下：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="merge.xsl"?>

    <dic:englishWords xmlns:dic = "dictionary">
        <dic:words>
                <dic:englishWords xmlns:dic = "dictionary">
    <dic:title>
    English Dictionary
    </dic:title>
    <dic:author>
        <dic:authorsName>
            Author:
        <dic:name>
            User
        </dic:name>
        <dic:lastName>
            Name
        </dic:lastName> 
        </dic:authorsName>
    </dic:author>
    <dic:words>
            <dic:name>Water</dic:name><br/>
            <dic:name>Room</dic:name><br/>
            <dic:name>Computer</dic:name><br/>
            <dic:name>Book</dic:name><br/>
            <dic:name>Garage</dic:name><br/>
            <dic:name>Car</dic:name><br/>
            <dic:name>Ship</dic:name><br/>
            <dic:name>Food</dic:name><br/>
            <dic:name>Coffee</dic:name><br/>
            <dic:name>Program</dic:name><br/>
    </dic:words>
</dic:englishWords> 
```

单词列表的路径包含在一个 xml 文件中，如下所示：

```
<dic:dictionary xmlns:dic = "dictionary">
    <dic:Logo>Logo</dic:Logo>
    <dic:Author>User Name</dic:Author>
    <dic:EnglishWords>english</dic:EnglishWords>
    <dic:SwedishTranslation>swedish</dic:SwedishTranslation>
    <dic:SwedishWords>swedish</dic:SwedishWords>
    <dic:EnglishTranslation>english</dic:EnglishTranslation>
</dic:dictionary> 
```

我的改造如下

```
 <!--Declare a parameter with the nodes to be removed-->
   <xsl:param name="removeElementsNamed" select="'|dic:author|dic:title'"/>

    <!--create a template and call it remove node-->
    <xsl:template match="node()|@*" name="removeNode">
          <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
          </xsl:copy>
    </xsl:template>

    <!--remove the actual nodes-->
    <xsl:template match="*">
          <xsl:if test="not(contains($removeElementsNamed, concat('|',name(),'|')))">
            <xsl:call-template name="removeNode"/>
          </xsl:if>
    </xsl:template> 
```

我正在尝试遵循我在这里找到的示例：

[如何排除元素](https://stackoverflow.com/questions/9385981/xslt-remove-elements-and-or-attributes-by-name-per-xsl-parameters)

...但在我的情况下它不起作用。

任何帮助将不胜感激...

蓝牙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:31:42.533

您可以匹配您不想要但不输出任何内容的元素。

```
 <xsl:template match="nodeToMatch" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T02:28:11.193

因此，您似乎正在尝试根据`|ELEMENTNAME|`$removeElementsNamed 中是否存在来排除元素，但`dic:author`它是该列表中唯一在两侧都有管道的项目。如果你这样做，它可能几乎可以工作：

```
<xsl:param name="removeElementsNamed" select="'|dic:author|dic:title|'"/> 
```

然而，这有点像黑客。

更好的方法是做这样的事情：

```
<xsl:template match="dic:author | dic:title" /> 
```

这应该从输出中排除`dic:author`和。`dic:title`

另一个问题是此模板名称错误：

```
<xsl:template match="node()|@*" name="removeNode"> 
```

这个模板实际上会做什么，如果它工作的话，将*包括*发送到它的方式的节点，但是一个模板不能同时具有一个`match`属性和一个`name`属性。我建议将您的 XSLT 重写为这样并从这里开始：

```
<!--Declare a parameter with the nodes to be removed-->
<xsl:template match="dic:author | dic:title" />

<!--create a template and call it remove node-->
<xsl:template match="node()|@*">
      <xsl:copy>
        <xsl:apply-templates select="node()|@*"/>
      </xsl:copy>
</xsl:template> 
```

# nsstring - 如何限制 NSNumberFormatterCurrencyStyle

> ID：14449612
> 
> 赞同：0
> 
> 时间：2013-01-22T00:27:42.567
> 
> 标签：nsstring, nsnumber, nsnumberformatter

我的代码中有这个：

```
 NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSString *currency = [defaults objectForKey:@"currencySymbol"];

    NSString *text = [textField.text stringByReplacingCharactersInRange:range withString:string];
    text = [text stringByReplacingOccurrencesOfString:@"." withString:@""];
    text = [text stringByReplacingOccurrencesOfString:currencySymbol withString:@""];
    NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
    [numberFormatter setNumberStyle: NSNumberFormatterCurrencyStyle];
    [numberFormatter setCurrencySymbol:currency];

    NSNumber *number = [NSNumber numberWithDouble:[text intValue]*0.01];
    text = [numberFormatter stringFromNumber:number];
    textField.text = text; 
```

并且在达到一定数量之前效果很好，然后就不能再高了，例如：

*   2,500.00（可能）
*   25,000.00（不可能）

也许这是愚蠢的事情，谁能提醒我我没有看到什么？

谢谢。

对于那些有同样问题的人，我们必须添加这行代码：

```
text = [text stringByReplacingOccurrencesOfString:@"," withString:@""]; 
```

因为（在逻辑上）`,`用于数千...

# android - Android: Miracast: prependSPSPPSToIDRFrames

> ID：14449613
> 
> 赞同：0
> 
> 时间：2013-01-22T00:27:49.497
> 
> 标签：android

在 Android 4.2 版本中，我观察到`miracast`实现要求`OMX`编码器支持新的扩展索引“ **OMX.google.android.index.prependSSPPSPSToIDRFrames** ”。`MediaCodec`但是，当我研究,`Converter`和的后续实现时`WifiDisplaySource`，我观察到现有框架中有足够的支持来支持该功能，而无需为`OMX`组件添加另一个索引。

有人可以确认我的理解是否正确吗？如果是这样，您能否提供一些有关其背后原因/理由的进一步信息？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:42:55.267

我在最新版本的`Android 4.2.2`. 根据我之前的问题，Google 已决定同时支持`index`内部`OMX Component`和`Stagefright`框架级别的`prepend SPS and PPS to IDR frames`. 这种方式`OMX Component`不需要支持新的索引。从接口创建组件`ACodec`不会失败，框架承担了`prepend`.

# java - 使用 XStreamMarshaller Spring 生成 XML 视图

> ID：14449619
> 
> 赞同：3
> 
> 时间：2013-01-22T00:28:57.170
> 
> 标签：java, xml, spring-mvc, marshalling, spring-oxm

我正在使用 spring 框架 3.1（带有休眠），并且我正在尝试生成 XML 表示形式，例如：

```
<user>
<iduser>1</iduser>
<email>bla@hello.com</email>
<firstName>bob</firstName>
</user> 
```

从这个java类：

 `````
@Entity
public class User {

    @GenericGenerator(name = "table-hilo-generator", strategy = "org.hibernate.id.IncrementGenerator")
    @GeneratedValue(generator = "table-hilo-generator")
    @Id
    @Column(name = "iduser", unique = true, nullable = false)
    private int iduser;

    @NotBlank
    @NotNull
    @NotEmpty
    @Length(max = EMAIL_MAX_SIZE)
    @Column(name = "email", nullable = false)
    private String email;

    @NotBlank
    @NotNull
    @NotEmpty
    @Length(max = FIRST_NAME_MAX_SIZE)
    @Column(name = "firstName", nullable = false)
    private String firstName;
} 
```` 

`我的 servlet-conf.xml 在 ContentNegotiatingViewResolver 中包含此视图：`

 ````
<!-- XML View -->
<bean class="org.springframework.web.servlet.view.xml.MarshallingView">
  <constructor-arg>
    <bean class="org.springframework.oxm.xstream.XStreamMarshaller">
        <property name="aliases">
        <map>
                <entry key="user123" value="com.....entities.User" />
        </map>
        </property>
    </bean>
   </constructor-arg>
</bean> 
```

但我不明白为什么结果是一个包含数百个元素的奇怪 xml，例如：

```
<org.springframework.validation.BeanPropertyBindingResult>
<nestedPath/>
<nestedPathStack serialization="custom">
<unserializable-parents/>
<vector>
<default>
<capacityIncrement>0</capacityIncrement>
<elementCount>0</elementCount>
<elementData>
<null/>
<null/>
<null/>
<null/>
<null/>
<null/>
<null/>
<null/>
<null/>
<null/>
</elementData>
</default>
</vector>
</nestedPathStack>
<objectName>user</objectName>
<messageCodesResolver class="org.springframework.validation.DefaultMessageCodesResolver">
<prefix/> 
```

1-可能是编组器对反射玩得太多了，我怎样才能获得我想要的预期结果？（2-我也有兴趣生成一个包含用户列表的 XML 文件）我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T01:06:07.233

就像您注意到的那样，发生的事情是因为您没有指定需要序列化的显式模型键，它正在序列化第一个非空值模型对象，在这种情况下它恰好是`BindingResult`（用于保持绑定/验证错误在您的模型中）。您可以进行一些修复：

一种。为您的编组视图指定确切`modelKey`的值，这应该可以工作并将模型设置为特定的模型键：

```
<bean class="org.springframework.web.servlet.view.xml.MarshallingView">
<property name="marshaller">
...
</property>
<property name="modelKey" value="command"/>
</bean>

model.addAttribute("command", mymodel); 
```

湾。一个更好的解决方法，恕我直言，可以在 Spring 中使用 http 转换器，这样您就可以从请求映射方法返回您的对象，使用它进行注释，`@ResponseBody`Spring 将负责将对象转换为有线表示（xml 或 json 等） ，您只需要注册正确的转换器：

```
@RequestMapping(...)
public @ResponseBody User myMethod(Model model){
    return user;
}

<mvc:annotation-driven conversion-service="conversionService"> 
   <mvc:message-converters register-defaults="false"> <!-- you may have to explicitly register other converters though-->
       <bean class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter">
           <property name="marshaller">
               <bean class="org.springframework.oxm.xstream.XStreamMarshaller"/>
           </property>
       </bean>
   </mvc:message-converters> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T05:48:12.930

我对 XStream 有同样的错误，通过应用以下更改解决了它：

您可以将“supportedClasses”属性添加到 Marshaller bean，而不是添加 modelKey：

* * *

```
<bean class="org.springframework.oxm.xstream.XStreamMarshaller">
    <property name="autodetectAnnotations" value="true"/>
    <property name="supportedClasses">
        <list>
            <value>com.rest.example.model.User</value>
        </list>
    </property>
</bean> 
```

* * *

其次，类 User 应该使用 XStream 别名进行注释，否则您将在 XML 中获得完整的包名称 - 例如：`<com.rest.example.model.User>`而不是`<user>`- 修复它的方法是：

```
@XStreamAlias("user")
public class User {
... 
`````

# javascript - 如果 input = "whatever"，则显示元素，如果不是，则显示不同的元素

> ID：14449620
> 
> 赞同：0
> 
> 时间：2013-01-22T00:29:01.093
> 
> 标签：javascript, jquery

我一直在尝试这样做大约一个小时，现在正在查找代码，但我就是不知道如何做到这一点。

我需要一种问答案的东西。可以说它就像一个快速数学测验，问题是“2 加 2 是多少？” 如果答案是 4，那么在他们单击按钮后会显示一个 div。

但如果他们回答其他任何问题，就会显示出不同的元素。这是我到目前为止所拥有的，

```
$(document).ready(function(){

  $("button#try").click(function(){
    if(!$('input#input1').val() = "4"){
      $('#yeselement').show();
    }

    else {
      $('#noelement').show();
    }
  });
}); 
```

但对我来说，它不起作用。代码有问题吗？我做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:29:39.000

你必须用来`!=`比较：

```
if ( $('input#input1').val() != "4") {
//                            ^ you want to compare, not assign 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T01:07:27.790

您应该更好地使用`!==`或`===`在您的情况下：

```
if($('input#input1').val() !== "4") { 
```

请注意，`==`and`!=`也可以工作，但不如`===`and安全`!==`。

资料来源：[在 JavaScript 比较中应该使用哪个等号运算符（== vs ===）？](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T00:30:03.810

用于`==`比较。您还需要一对括号进行分组：

```
if ( !($('input#input1').val() == "4") ) 
```

# html - 具有特定线条颜色的 HTML 文本区域

> ID：14449625
> 
> 赞同：0
> 
> 时间：2013-01-22T00:29:22.180
> 
> 标签：html, colors, textarea

我有一个`<textarea>`，但我需要为特定的线条着色不同的颜色。显然，我不能这样做。

我也许可以使用 a `<div>`，但我喜欢 a 的外观和滚动条`<textarea>`。

我可以检查的地方是否有任何类型的 HTML 元素数据库？每当我无法放置元素的名称时，不得不为 StackOverflow 的海报增加负担是相当烦人的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:32:52.460

Textareas 只能包含纯文本。无法通过 CSS 格式化。你需要一个所见即所得的编辑器（CKEditor 或 TinyMCE）

或者如果只读，由 javascript 填充：使用一个简单的 div，其中可以包含 HTML 标记，用于您的线条颜色。然后用 CSS 设置它的样式，让它看起来像一个 textarea（可能是滚动条）

# c# - Ajax 调用在 mvc 4 中不起作用

> ID：14449626
> 
> 赞同：1
> 
> 时间：2013-01-22T00:29:25.137
> 
> 标签：c#, asp.net-mvc, jquery

我正在拉我的头发。为了我一生的挚爱，我无法完成这项工作。我认为有一个表格：

```
 <div id="cancel" class="cancel">
    <form method="post" class="cancelForm">
     <input type="hidden" class="cancelId" name="cancelId" value="@appliedLvl.LeavesId" />
    <input id="cancelMe" class="cancelMe" type="submit" value="Cancel"/>
  </form>
</div> 
```

javascript

```
$(document).ready(function () {

$(".cancelForm").submit(function () {
    var MYcancelId = $('.cancelId').val();

    $.ajax({
        type: "POST",
        url: "/Home/Cancel",

       success: function (result) {
            alert("ok");
        },
        error: function (request, status, error) {
            debugger;
            confirm(request);
        }
    });
  })
}); 
```

和控制器

```
 [HttpPost]
    public ActionResult Cancel(Guid cancelId )
    {
        //do stuff here
        return PartialView();
    } 
```

我总是进入 ajax 的错误函数。不管我尝试过什么。相同的 javascript 代码在我的 php 项目中完美运行。不知道这里有什么问题。提前感谢您的帮助。

**编辑**

这里的错误是我在 Action 中期望的是 Guid 而不是字符串！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T00:42:59.920

您没有传入 cancelId 参数，因此它看不到您的控制器方法。

```
$(document).ready(function () {

$(".cancelForm").submit(function () {
    var MYcancelId = $('.cancelId').val();

$.ajax({
    type: "POST",
    url: "/Home/Cancel",
    data: { cancelId = MYcancelId },
   success: function (result) {
        alert("ok");
    },
    error: function (request, status, error) {
        debugger;
        confirm(request);
    }
});
})
}); 
```

# performance - 阵列管理的时间复杂度（算法）

> ID：14449630
> 
> 赞同：1
> 
> 时间：2013-01-22T00:29:40.503
> 
> 标签：performance, algorithm, sorting, search, time

我正在开发一个程序，该程序接收一堆（y）整数，然后需要按顺序返回 x 个最高整数。这段代码需要尽可能快，但目前我认为我没有最好的算法。

到目前为止，我的方法/算法是创建一个已经输入的整数的排序列表（从高到低），然后处理每个输入的项目。对于前 x 个项目，我维护一个排序的整数数组，当每个新项目进来时，我都会使用二进制排序确定它应该放在哪里。（我也在考虑只接收前 x 个项目，然后快速排序它们，但我不知道这是否更快）在前 x 个项目被排序后，我首先查看其余项目是否有资格进入已经排序的最高整数列表（通过查看新整数是否大于列表末尾的整数），如果是，则通过二进制搜索将其添加到排序列表中并删除末尾的整数列表。

我想知道是否有人对如何使这更快，或者可能是比这更快的全新方法有任何建议。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T01:02:56.847

这是[部分排序](http://en.wikipedia.org/wiki/Partial_sorting)：

最快的实现是快速排序，您只在包含底部/顶部*k*元素的范围上递归。

在 C++ 中，您可以使用`std::partial_sort`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T00:51:13.440

这称为**top-N 排序**。这是一个非常简单有效的方案。不需要花哨的数据结构。

1.  保留最高 x 元素的列表（开始为空）
2.  将您的输入拆分为`x * 10`项目块
3.  对于每个块，将到目前为止 x 最高项目的记忆列表添加到它并对其进行排序（例如快速排序）
4.  保留 x 最高的项目。它们形成了新的记忆列表
5.  转到 3 直到处理完所有块
6.  记住的列表现在是您的最终结果

这是`O(N)`项目的数量，只需要正常的快速排序作为原语。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T00:49:33.703

如果使用堆排序树数据结构来存储整数，则插入新整数不超过 lg N 次比较，删除最大值不超过 2 lg N 次比较。因此，插入`y`项目只需要`y lg N`比较，删除顶部`x`项目只需要`2x lg N`比较。[Wikipedia](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)条目引用了一系列实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T01:17:07.353

您似乎不需要按排序顺序排列的前 N ​​个项目。因此，您可以在线性时间内解决这个问题。

使用线性时间选择查找第 N 个最大的数组元素。返回它和所有比它大的数组元素。

# c# - 数据绑定到内存映射以进行实时图表更新

> ID：14449634
> 
> 赞同：1
> 
> 时间：2013-01-22T00:29:45.980
> 
> 标签：c#, charts, real-time, memory-mapped-files

我有一个生成数据点的过程（我有多个值存储在每个点的类对象中），我想在创建它们时实时绘制它们。我曾想过使用内存映射来使用 System.IO.MemoryMappedFiles 库保存数据。生成数据的过程和图表表格将在不同的线程上，不能同步。我唯一想访问图表数据的想法是在表单上创建一个计时器，以查找数据外的数据点，将它们添加到图表数据系列中，然后重新绘制该图表。我还没有尝试过这个，因为我担心读/写访问错误，因为线程没有同步。有可能在每个计时器事件上将零个或十个值附加到内存映射资源。我希望我能以 20-30 赫兹的频率重新绘制图表。

是否可以将数据绑定到内存映射文件？任何人都可以提示一些可以帮助我决定编写和绘制数据图表的正确方法的资源吗？

# ruby-on-rails - 用逗号分割 text_field 以实现嵌套的多态标记形式

> ID：14449637
> 
> 赞同：0
> 
> 时间：2013-01-22T00:30:02.867
> 
> 标签：ruby-on-rails, nested-attributes, polymorphic-associations

我有一个多态的标签模型，它也嵌套在微帖子下（以便用户可以在同一个“表单”中提交微帖子和标签）。

至此，表单提交成功，微博保存，标签保存到我的标签表中。

但是，我想要做的是将标签 text_field 中提交的任何内容（它在下面说“工作，工程”）拆分为单独的标签，并用 split(", ")

这是我单击提交按钮时的 POST 控制台输出：

```
Parameters: {"utf8"=>"✓", "authenticity_token"=>"T/GieqxRM7Kxl2jmC7hr3KPixM/jVG4pdMi/ceb1Vq0=", "micropost"=>{"content"=>"This is a post", "tags_attributes"=>{"0"=>{"name"=>"jobs, engineering"}}}, "commit"=>"Post"} 
```

最好的方法是将其写入微柱控制器中的“创建”方法（如果是这样，有人可以指出我正确的方向）吗？

（注意：我看到有一个相关的问题，但我认为他们使用的是 HAML，所以我没有关注它）

另外，我不确定为什么`0`显示为哈希键。我想这可能是因为我把它放在我的下面`form_for(@micropost)`，但如果我不把它放在那里，我的标签 text_field 就会消失。

```
% @micropost.tags.build % 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:08:38.343

首先哈希 tags_attributes 以 0 作为哈希键开始，因为它是一个嵌套资源。如果您同时提交了多个嵌套模型，您会看到

```
"tags_attributes" => { "0" => {...}, "1" => {...} } 
```

这会将每个嵌套记录的数据保存在一起，并将遍历哈希以创建与提交的记录一样多的记录。

其次，我将使用 before_filter 解决问题，该过滤器将采用提交的参数哈希并以您正在寻找的格式返回一个新的哈希。类似于以下内容：

```
before_filter :new_params, only: [:create, :update]

private

def new_params
  params["tags_attributes"].each do |key, value| 
    value["name"] = value["name"].split(", ") }
  end
  params
end 
```

# c++ - C++ 中有这种模式的名称吗？

> ID：14449641
> 
> 赞同：3
> 
> 时间：2013-01-22T00:30:17.583
> 
> 标签：c++, design-patterns

我想到了这种模式，它允许使用基类作为其派生类的命名空间，如果事先知道所有派生类，这可能会很整洁。这看起来不错的一种情况是当您想为您的子类使用形容词时。这种模式有名字吗？

```
class Flag
{
public:
  class White;
  class Chequered;
  // ...
};

class Flag::White: public Flag
{
  // ...
};

class Flag::Chequered: public Flag
{
  // ...
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T00:32:19.370

使用类作为命名空间是一种反模式。改为使用`namespace`。

嵌套类不能作为`using`声明的主题，因此如果没有 a，`typedef`您将别无选择，只能引用`Flag::Chequered`而不是`Chequered`在客户端代码中。正如您所提到的，必须事先知道所有导数。如果没有`class Flag`. 简单地使用封闭`namespace`具有允许您将运算符应用`std::relops`到类集群的好处。

美学永远无法弥补语言滥用。这是一个替代方案：

```
namespace flags {
class Base;
class White;
class Chequered;
}

typedef flags::Base Flag; // independent concept goes into enclosing namespace 
```

我不知道使用形容词命名类的做法的名称，但它看起来不错。短名称很好，`::`操作员总是会提供帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T00:33:18.497

它们被称为极其复杂的命名空间，实际上并没有使用关键字`namespace`。

这个概念本身被称为[Inner 类](https://en.wikipedia.org/wiki/Inner_class)，在 Java 等一些语言中并不少见。

# macos - mac有什么好的node.js IDE吗？

> ID：14449643
> 
> 赞同：14
> 
> 时间：2013-01-22T00:30:21.117
> 
> 标签：macos, node.js

最近，我开始研究 node.js

.. 我最喜欢的 IDE 是 eclipse，我想每个人都喜欢它。

但是，当我将 nodeclipse 插件安装到 Juno 时，是的，它起作用了，但没有我想象的那么花哨。

我搜索并发现 webmatrix2 对 node.js 非常好。

所以，我要试试。

无论如何，我的问题是mac是否有任何好的ide......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T15:54:43.210

Eclipse 是 nodeeclipse 插件的一个选项。访问：[http ://www.nodeclipse.org/](http://www.nodeclipse.org/)

我仍然更喜欢 JetBrains 的 Webstorm。他们还有一个正在进行中的浏览器调试器。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-08-05T21:54:43.890

这是一个很老的帖子，但我在搜索中遇到了它。

对于未来的人，我会推荐[https://atom.io](https://atom.io)

它有很好的 git 支持和大量很酷的插件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-16T10:06:57.713

Visual Studio Code 是适用于 Node.js 和 Javascript 的出色 IDE。它基于 GitHub 的 Atom 编辑器。

[https://code.visualstudio.com](https://code.visualstudio.com)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-22T16:00:46.460

试试[inteliJ Idea 12.0](http://www.jetbrains.com/idea/)它有很好的[node.js](http://plugins.jetbrains.net/plugin/?webide&pluginId=6098)插件。

我现在用它。Idea 有很多很酷的功能。当您开始使用它时，您会忘记其他 Ides))

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-03-21T06:54:35.487

MacOS 不支持节点插件。如果您想投票支持 MS 以在 MacOS 上添加对 VS 的支持，请参阅[此页面。](https://visualstudio.uservoice.com/forums/563332-visual-studio-for-mac/suggestions/17349802-node-js-project-support)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-22T03:15:30.390

Webstorm 非常好并且很受欢迎，并且可以在 OSX 上运行：http: [//www.jetbrains.com/webstorm/](http://www.jetbrains.com/webstorm/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-08-10T15:13:14.580

不确定是否有人提到过这一点，但我今天在搜索 Node.js 的 IDE 时发现了这一点。

它被称为 Nide ( [http://coreh.github.io/nide/](http://coreh.github.io/nide/) )。

似乎只针对 Node.js，虽然权衡的是，还没有原生 Windows 或 Linux 版本，但显然你可以通过 Web 浏览器运行它，否则如果你在 Mac 上，你可以安装原生应用程序dmg。

只是一个警告：它仍处于早期阶段，所以暂时不要依赖你的关键任务项目！:P

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-10-19T20:52:00.663

节点镜像值得一试。它有 - 语法高亮 - 错误检查 - 一个终端 - 和一个非常基本的 node.js 调试器，目前正在开发中。

[https://npmjs.org/package/node-mirror](https://npmjs.org/package/node-mirror)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-11-26T12:14:25.273

微软刚刚发布[了 Visual Studio for Mac](https://visualstudio.microsoft.com/vs/mac/)（相对于 Visual Studio Code）并且有一个 Node.js 插件。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-02-05T16:28:09.123

试试 jetbrains 的 Webstorm。它带有一个非常好的自动完成功能。这是[链接](https://www.jetbrains.com/webstorm/)。但它有一个价格。如果你需要一个免费的 IDE，去 atom.io。

# context-free-grammar - 这是一种自由上下文语法语言吗？

> ID：14449645
> 
> 赞同：1
> 
> 时间：2013-01-22T00:30:31.977
> 
> 标签：context-free-grammar, regular-language, automata

这是一种上下文无关的语言吗？

> `{a^(2k) b^n c^n : k >= 0 ∧ 0 <= n <= m}`∪<br> `{a^(2k+1) b^n c^m :k >= 0 ∧ n >= m >= 0}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:08:58.603

证明语言为上下文无关语言的一种方法是为给定语言编写上下文无关语法：（或绘制 PDA）

下面的语言：

> {a ^((2k)) b ^n c ^m : k >= 0 和 0 <= n <= m} U {a ^((2k+1)) b ^n c ^m : k >= 0 和 n >= m >= 0}

是上下文无关语言

[*我认为您在写问题时犯了错误，因为我对您的问题发表了评论*，我正在为上述语法做]

我们可以为这种语言编写上下文无关语法：

在 Context-Free-Grammar 产生式中，`α --> β`其中`α`是单个变量。

> S --> S [1] | [2] _

S [1]生成这部分 {a ^((2k)) b ^n c ^m : k >= 0 and 0 <= n <= m} 并且 S [2] 生成 {a ^((2k+1)) b ^n c ^m : k >= 0 and n >= 米 >= 0}

> S [1] --> AB
> 
> 一个 --> 啊 | ^
> 
> B --> bBc | ^
> 
> B --> Bc

和

> S [2] --> AaC
> 
> C --> bCc | ^
> 
> C --> bC

在语法`S`中是 start Variable 和 {S, S [1] , S [2] , A, B, C} 都是可变的。
因此，在上述语法中，每个产生式都采用单个变量 的形式`α --> β`，因此给定的语言是上下文无关语言。`α`

[如果您有其他疑问或*我误解了您的语言，请告诉我*]

# jquery - 点击 caroufredsel 时暂停轮播

> ID：14449646
> 
> 赞同：1
> 
> 时间：2013-01-22T00:30:33.243
> 
> 标签：jquery, image, wordpress, carousel, caroufredsel

我有一个旋转木马和一组拇指。轮播设置为在页面加载时自动滚动。但是，当单击缩略图时，我想暂停轮播。

我试图在缩略图的点击事件上实现这一点，然后使用触发器滑动到点击的拇指，然后暂停。

问题是，使用以下代码，它会暂停轮播，但不会将轮播图像更改为单击的图像。如果我删除暂停触发器，轮播将变为单击的拇指。

```
<script>
$(function(){
      /* Attached an unique class name to each thumbnail image */
    $('#thumbs .thumb a').each(function(i) {
        $(this).addClass( 'itm'+i );

        /* add onclick event to thumbnail to make the main 
        carousel scroll to the right slide*/
        $(this).click(function() {
            $('#project-carousel').trigger( 'slideTo', [i, 0, true] );
            $('#project-carousel').trigger('pause', true);
            return false;
        });
    }); 

    /* Highlight the first item on first load */
    $('#thumbs a.itm0').addClass( 'selected' );

      //slideshow
 projectCarousel = $("#project-carousel").carouFredSel({
        responsive:true,
        circular:true,
        infinite:true,
        width:983,
        height:534,
        scroll:{
            fx:'crossfade',
            duration:1000,
            onBefore: function() {
                /* Everytime the main slideshow changes, it check to 
                    make sure thumbnail and page are displayed correctly */
                /* Get the current position */
                var pos = $(this).triggerHandler( 'currentPosition' );

                /* Reset and select the current thumbnail item */
                $('#thumbs a').removeClass( 'selected' );
                $('#thumbs a.itm'+pos).addClass( 'selected' );
                /* Move the thumbnail to the right page */
                //var page = Math.floor( pos / 8 );
                //$('#thumbs').trigger( 'slideToPage', page );
            }
        },
        auto: {
          play:true,
        },
        items:{
            height:winHeight,
            visible:1,
            width:1000
        },
        prev:$("#left"),
        next:$("#right"),
    });

   /* Carousel for the thumbnails */
    $('#thumbs').carouFredSel({
        width:680,
        height:50,
        direction: 'left',
        circular: false,
        items: 9,
        infinite: false,
        align: false,
        auto: false,
        prev: '#prev',
        next: '#next'
    });

});
</script> 
```

如何让轮播进入点击的缩略图，然后暂停？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T17:31:22.417

这可能不是最好的方法，但这是我迄今为止在缩略图更改后停止轮播的方法：

我在函数中添加了延迟：

```
$(this).click(function() {
            $('#project-carousel').trigger( 'slideTo', [i, 0, true] );
            setTimeout(function() {
                $('#project-carousel').trigger('pause', true);
            }, 1000);
            return false;
        }); 
```

这允许过渡完成，然后暂停滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:08:06.177

不确定这是否是您要查找的内容...但是在此链接中，示例 pause onMouseHover

[http://caroufredsel.dev7studios.com/examples/continuously-scrolling.php](http://caroufredsel.dev7studios.com/examples/continuously-scrolling.php)

# javascript - Jquery：第一个选择器和fadeIn（），子div不随行

> ID：14449647
> 
> 赞同：0
> 
> 时间：2013-01-22T00:30:37.153
> 
> 标签：javascript, jquery

我有一个我正在处理的页面，并且正在尝试`fadeIn`和`fadeOut`特定`div`的 s。但是，当我`div`使用`:first`选择器淡入淡出时，我只得到父`div`项，没有一个子项。

Javascript（jQuery）：

```
$(document).ready(function () {
                setupLeftMenu(); //creates nav menu
                autoHeight(); //auto scales content
                $('.datatable').dataTable(); //creates sortable table, injects divs that are not showing up when 'fadeIn' is used.
                $('#outer div').hide();
                $('.submenu li:first').attr('id','current');
                $('#outer div:first').fadeIn('slow');
                $('.submenu li a').click(function() {
                    var top = $(this);
                    $('#outer div').fadeOut('slow');
                    $('.submenu li').attr('id','');
                    $(this).parent().attr('id','current');
                    $('#' + $(top).attr('name')).fadeIn('slow');

                    }); 
                }); 
```

这是我得到的 HTML 代码。注意`display:none`在 child `div`s 上。

```
 <div class="dataTables_wrapper" id="example_wrapper" style="display: block;">
   <div id="example_length" class="dataTables_length" style="display: none;"> 
     <label>Show 
       <select size="1" name="example_length">
         <option value="10" selected="selected">10</option>
         <option value="25">25</option><option value="50">50</option>
         <option value="100">100</option>
       </select>
        entries
     </label>
   </div>
   <div class="dataTables_filter" id="example_filter" style="display: none;">
     <label>Search: 
       <input type="text">
     </label>
   </div>
 </div> 
```

这是否与`div`其他 Javascript 代码创建的 child 有关？我查看了`:first-child`选择器，但这似乎只影响多个父母的第一个孩子，而不是第一个父母的所有孩子。我还假设孩子们会自动效仿。我在这里做错了什么，我应该如何修复我的代码，以便所有的孩子都`div id="example_wrapper"` `fadeIn`使用它？谢谢！

***更新***

只是想包含我修改后的代码，因为我已经让它工作了。仍然需要进行一些调整，但孩子`div`的问题已经完全解决。正如@Ben Felda 所说，这些元素还不存在。我所做的是向函数添加一个`callback`函数，该`dataTable`函数强制`fadeIn`and`fadeOut`效果和属性更改等到`div`s 完全形成。

```
$(document).ready(function () {
                setupLeftMenu();
                autoHeight();
                $('#outer div').hide();
                $('.submenu li:first').attr('id','current');
                $('#outer div:first').fadeIn('slow');
                var dbCallBack = $('.submenu a').click(function() {
                                    var top = $(this);
                                    $('#outer div').fadeOut('slow', function() {
                                        $('.submenu li').attr('id','');
                                        $(top).attr('id','current');
                                        $('#' + $(top).attr('name')).fadeIn('slow');
                                    });                         
                                }); 
                $('.datatable').dataTable(dbCallBack);                  
                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:45:11.943

没有看到其他功能很难说，但是您可能会遇到元素尚不存在的问题。尝试记录元素的长度属性以查看它是否存在。

```
console.log($('.submenu li:first').length) 
```

根据您的评论，该元素似乎尚不存在。这是我要做的：根据[回调模式](http://www.impressivewebs.com/callback-functions-javascript/)重构代码。简而言之，您需要将点击事件提取到一个单独的函数中，并将该函数名称与调用一起传递以构建元素。很实用的图案！

# c# - 无法在后面的代码上设置图像

> ID：14449650
> 
> 赞同：1
> 
> 时间：2013-01-22T00:30:50.527
> 
> 标签：c#, asp.net

我正在创建一个结果池，根据查询字符串，页面会在其中加载图像。我有以下对象

```
<li class="labelForm"><asp:Image ID="imgImagen" runat="server" /></li> 
```

在 page_load 事件上我得到：

```
string path = res == "OK" ? (Server.MapPath("~/Images/Results/OK/")) : (Server.MapPath("~/Images/Results/NO/"));

path = App_Code.FilePicker.FilePicker(path);
imgImagen.ImageUrl = path; 
```

图像路由是有效的。我在浏览器和资源管理器上测试过

> D:\Proyectos Web Forms\MyPage\MyPage\Images\Results\OK\thumbsUp2.jpg

由于代码在 Page_Load 事件上运行（在渲染事件之前），所以应该不是问题，并且文件路径是有效的。但是，浏览器会显示一个空图像的小图标。

我会错过什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:37:47.663

当我将本地文件添加到这样的 url 时，它通常会自动将其转换为：从：C:/Users/Carlos/Desktop/options.gif 到 file:///C:/Users/Carlos/Desktop/options .gif

如果您采用渲染路径（来自“查看源”）并将其直接粘贴到资源管理器中会发生什么？我已经看到 IE9 发出一条消息说它“阻止内容”，我必须单击“允许内容”才能工作。也许这就是正在发生的事情？

---- *** 编辑 *** 哦，我还注意到您没有指定文件名，例如 helloworld.gif :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T00:22:56.083

我使用的是绝对路线，而不是相对路线。而不是这个：
`"D:\\Proyectos Web Forms\\MyPage\\MyPage\\Images\\Results\\OK\\thumbsUp2.jpg"`

应该是这样的：
`"~/Images/Results/OK/thumbsUp2.jpg"`

# python - Pygame 碰撞检测

> ID：14449651
> 
> 赞同：1
> 
> 时间：2013-01-22T00:30:57.793
> 
> 标签：python, pygame, collision-detection, collision

**我的问题：**

在我的游戏中，我想添加一些功能，如二段跳、墙跳等。
但是我的碰撞检测遇到了问题，我似乎无法解决它。
问题是当我的角色与地面发生碰撞时，它会发生碰撞。
然而，即使我在地上，它也不再记录碰撞。
这会在检测我是否与墙壁碰撞或我当前是否与地面碰撞等方面产生问题。
这会产生更多问题，因为当它未检测到碰撞时，我的 y 速度将不断降低。
所以，我的玩家有一个恒定的 y 速度，它在增加，而不是在地面上时它只是 0。

**例子：**

[![](../Images/2e7d082246bb69bf8782644adee6020a.png "由 imgur.com 主办")](https://imgur.com/uRCkjpF)

正如您在左手角看到的那样，我的 y 速度在这样的数字中跳跃：

```
0  
0  
0.3  
0.6  
0.9 
```

然后重新开始。
我真正需要的是，当我在地面上时，它始终为 0，并且代码能够识别我在地面上。
但事实并非如此，我不知道为什么，有人可以帮忙吗？

**代码：**

```
import pygame
from pygame import *

WIN_WIDTH = 800
WIN_HEIGHT = 640
HALF_WIDTH = int(WIN_WIDTH / 2)
HALF_HEIGHT = int(WIN_HEIGHT / 2)

DISPLAY = (WIN_WIDTH, WIN_HEIGHT)
DEPTH = 32
FLAGS = 0
CAMERA_SLACK = 30

def main():
    pygame.init()
    screen = pygame.display.set_mode(DISPLAY, FLAGS, DEPTH)
    #pygame.display.set_caption("Use arrows to move!")
    timer = pygame.time.Clock()

    up = down = left = right = space = False
    bg = Surface((32,32))
    bg.convert()
    bg.fill(Color("#0094FF"))
    entities = pygame.sprite.Group()
    player = Player(32, 32)
    platforms = []
    plants = []

    space_num = 0

    x = 0
    y = 0
    level = [
        "PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                           PPPP     PPPPPPP",
        "P                           PPPP     PPPPPPP",
        "P                           PPPP     PPPPPPP",
        "P                           PPPP     PPPPPPP",
        "P                           PPPP     PPPPPPP",
        "P                           PPPP     PPPPPPP",
        "P                           PPPP     PPPPPPP",
        "P                           PPPP     PPPPPPP",
        "P                           PPPP     PPPPPPP",
        "P                           PPPP     PPPPPPP",
        "P                           PPPP     PPPPPPP",
        "P                           PPPP     PPPPPPP",
        "P                           PPPP     PPPPPPP",
        "P                           PPPP     PPPPPPP",
        "P                           PPPP     PPPPPPP",
        "P                           PPPP     PPPPPPP",
        "P                           PPPP     PPPPPPP",
        "P                           PPPP     PPPPPPP",
        "P                           PPPP     PPPPPPP",
        "P                                       PPPP",
        "P                                       PPPP",
        "P                                       PPPP",
        "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
        "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
        "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
        "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
        "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
        "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
        "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
        "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
        "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
        "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
        "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
        "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",]
    # build the level
    for row in level:
        for col in row:
            if col == "P":
                p = Platform(x, y)
                platforms.append(p)
                entities.add(p)
            if col == "E":
                e = ExitBlock(x, y)
                platforms.append(e)
                entities.add(e)
            if col == "p":
                p = Plant(x, y)
                plants.append(p)
                entities.add(p)
            x += 32
        y += 32
        x = 0

    total_level_width = len(level[0]) * 32
    total_level_height = len(level) * 32
    camera = Camera(complex_camera, total_level_width, total_level_height)
    entities.add(player)

    while 1:
        timer.tick(60)

        for e in pygame.event.get():
            if e.type == QUIT: raise SystemExit, "QUIT"
            if e.type == KEYDOWN and e.key == K_ESCAPE:
                raise SystemExit, "ESCAPE"
            if e.type == KEYDOWN and e.key == K_UP:
                up = True
            if e.type == KEYDOWN and e.key == K_DOWN:
                down = True
            if e.type == KEYDOWN and e.key == K_LEFT:
                left = True
            if e.type == KEYDOWN and e.key == K_RIGHT:
                right = True
            if e.type == KEYDOWN and e.key == K_SPACE:
                if space_num < 6:
                    space = True
                    space_num += 1

            if e.type == KEYUP and e.key == K_UP:
                up = False
            if e.type == KEYUP and e.key == K_DOWN:
                down = False
            if e.type == KEYUP and e.key == K_LEFT:
                left = False
            if e.type == KEYUP and e.key == K_RIGHT:
                right = False
            if e.type == KEYUP and e.key == K_SPACE:
                space = False

        # draw background
        for y in range(20):
            for x in range(25):
                screen.blit(bg, (x * 32, y * 32))

        camera.update(player)

        # update player, draw everything else
        player.update(up, down, left, right, platforms, space)
        for e in entities:
            screen.blit(e.image, camera.apply(e))
        pygame.display.update()

class Camera(object):
    def __init__(self, camera_func, width, height):
        self.camera_func = camera_func
        self.state = Rect(0, 0, width, height)

    def apply(self, target):
        return target.rect.move(self.state.topleft)

    def update(self, target):
        self.state = self.camera_func(self.state, target.rect)

#def simple_camera(camera, target_rect):
#    l, t, _, _ = target_rect
#    _, _, w, h = camera
#    return Rect(-l+HALF_WIDTH, -t+HALF_HEIGHT, w, h)

def complex_camera(camera, target_rect):
    l, t, _, _ = target_rect
    _, _, w, h = camera
    l, t, _, _ = -l + HALF_WIDTH, -t+HALF_HEIGHT, w, h

    l = min(0, l)                           # stop scrolling left
    l = max(-(camera.width-WIN_WIDTH), l)   # stop scrolling right
    t = max(-(camera.height-WIN_HEIGHT), t) # stop scrolling bottom

    return Rect(l, t, w, h)

class Entity(pygame.sprite.Sprite):
    def __init__(self):
        pygame.sprite.Sprite.__init__(self)

class Player(Entity):
    def __init__(self, x, y):
        Entity.__init__(self)
        self.xvel = 0
        self.yvel = 0
        self.onGround = False
        self.image = Surface((32,32))
        self.image.fill(Color("#0000FF"))
        self.image.convert()
        self.rect = Rect(400, 400, 32, 32)

    def update(self, up, down, left, right, platforms, space):
        if space:
            if not self.onGround:
                self.yvel = -12
            if self.onGround:
                self.yvel = 0
        else:
            if up:
                if self.onGround: self.yvel -= 10 # only jump if on the ground
            if down:
                pass
            if left:
                self.xvel = -8
            if right:
                self.xvel = 8
            if not self.onGround:
                self.yvel += 0.3 # only accelerate with gravity if in the air
                if self.yvel > 40: self.yvel = 40 # max falling speed
            if not(left or right):
                self.xvel = 0

            self.rect.left += self.xvel # increment in x direction
            self.collide(self.xvel, 0, platforms) # do x-axis collisions
            self.rect.top += self.yvel # increment in y direction
            self.onGround = False; # assuming we're in the air
            self.collide(0, self.yvel, platforms) # do y-axis collisions

    def collide(self, xvel, yvel, platforms):
        for p in platforms:
            if pygame.sprite.collide_rect(self, p):
                if isinstance(p, ExitBlock):
                    pygame.event.post(pygame.event.Event(QUIT))
                if xvel > 0: self.rect.right = p.rect.left
                if xvel < 0: self.rect.left = p.rect.right
                if yvel > 0:
                    self.rect.bottom = p.rect.top
                    self.onGround = True
                    self.yvel = 0
                if yvel < 0: self.rect.top = p.rect.bottom

class Platform(Entity):
    def __init__(self, x, y):
        Entity.__init__(self)
        self.image = Surface((32, 32))
        self.image.convert()
        self.image.fill(Color("#DDDDDD"))
        self.rect = Rect(x, y, 32, 32)

    def update(self):
        pass

class ExitBlock(Platform):
    def __init__(self, x, y):
        Platform.__init__(self, x, y)
        self.image = pygame.image.load("bush.png")

class Decoration(Entity):
    def __init__(self):
        pygame.sprite.Sprite.__init__(self)

class Plant(Decoration):
    def __init__(self, x, y):
        Entity.__init__(self)
        self.image = Surface((64, 64))
        self.image.convert()
        #self.image = pygame.image.load("bush.png")
        self.rect = Rect(x, y, 64, 64)

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:37:13.223

看起来只要不按住空间，更新代码就会让你在空中：

```
def update(self, up, down, left, right, platforms, space):
    if space:
    else:
        self.onGround = False; # assuming we're in the air
        self.collide(0, self.yvel, platforms) # do y-axis collisions 
```

如果角色没有移动单个像素以与平台重叠，那么pygame的碰撞代码可能不会检测到碰撞，而是就它而言正好在它上面？在这种情况下，你会经历一个着陆循环，将 yvel 设置为 0。好吧，我们正在下降，0.3，下降，0.6，下降，0.9，下降......好吧，我们移动了 1 个像素并且我们重叠了，我们降落，将 yvel 设置为 0。然后在开始时重复。

# javascript - 如何让 javascript 影响“.gallery a”但不影响“.gallery a h3”？

> ID：14449656
> 
> 赞同：1
> 
> 时间：2013-01-22T00:31:31.767
> 
> 标签：javascript, html

我像这样使用灯箱：

```
$('#gallery a').lightBox(); 
```

html 看起来像这样：

```
<div id="gallery">
<div class='holder'>
    <div class='thumb'> 
        <a href='images/all-tomorrows-parties.jpg'>
        <img src='images/thumbs/all-tomorrows-parties-t.jpg' width='140' height='120' /></a>
    </div>  
    <div class='title'>
        <h3>
            <a href="http://www.amazon.com/">
                All Tomorrow's Parties<br />
                William Gibson
            </a>
        </h3>
    </div>
</div> 
```

因此，javascript 会影响 .gallery div 中的每个链接 ()。我希望它只影响拇指类，而不是标题类。我怎样才能做到这一点？

我对 Javascript 很陌生：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T00:32:19.950

只需将该类添加到您的选择器中：

```
$('#gallery .thumb a').lightBox(); 
```

# android - 在 Cordova 中创建脚本失败并在 Ubuntu 12.10 中出现意外错误

> ID：14449664
> 
> 赞同：7
> 
> 时间：2013-01-22T00:32:30.800
> 
> 标签：android, cordova, ubuntu

在 Ubuntu 12.10 上，我正在尝试根据此处[http://docs.phonegap.com/en/2.3.0/guide_getting-started_android_index.md.html#Getting%20Started的说明设置cordova 2.3.0(PhoneGap) %20with%20Android](http://docs.phonegap.com/en/2.3.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)。

但是当我运行脚本时，出现以下错误：

```
An unexpected error occurred: [ ! -e "$BUILD_PATH"/framework/libs/commons-codec-1.7.jar ]  
exited with 1
Deleting project... 
```

我查看了 commons-codec-1.7.jar，它出现在它应该在的地方：

```
-rw-r--r-- 1 user user 259600 Jan 21 15:32 framework/libs/commons-codec-1.7.jar 
```

我尝试对路径进行硬编码，但仍然出现相同的错误。所以为什么会看到此错误。

有什么想法可能是错误的或遗漏的吗？

提前谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T09:25:47.190

这很可能是因为未正确安装 Java 和/或 Apache Ant。在使用以下命令安装 Oracle JDK 和 Ant 之前，我遇到了同样的问题：

```
sudo apt-add-repository ppa:webupd8team/java
sudo apt-get update && sudo apt-get install oracle-java6-installer
sudo apt-get install ant 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-27T21:12:05.303

我建议使`create`脚本输出更详细以研究构建问题。所以你可以编辑这一行：

```
(cd "$BUILD_PATH"/framework && ant jar &> /dev/null ) 
```

到

```
(cd "$BUILD_PATH"/framework && ant jar ) 
```

这有助于我确定我的问题：

```
makk@localhost:~/projects/eclipse/cordova-android/bin$ ./create ~/projects/eclipse/plackarta com.MyApp MyApp
Buildfile: build.xml

BUILD FAILED
/home/makk/projects/eclipse/cordova-android/framework/build.xml:33: The required minimum version of ant is 1.8.0, you have Apache Ant version 1.7.1 compiled on September 8 2010

Total time: 0 seconds 
```

您可以根据您的操作系统解决此问题。在现代系统上，您可能会在 fiznool 回答后获得好运。您也可以尝试此解决方案（风险自负！）：[https](https://askubuntu.com/questions/55488/install-upgrade-to-apache-ant-1-8-2) ://askubuntu.com/questions/55488/install-upgrade-to-apache-ant-1-8-2 。[http://ant.apache.org/bindownload.cgi](http://ant.apache.org/bindownload.cgi)上也有现成的二进制文件（帮助我使用旧的 10.04 Ubuntu）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T22:39:52.017

我遇到了同样的问题，我不确定最终是什么解决了它，但这是我所做的列表。

*   重新安装了android sdk
*   为 eclipse 安装了 ADT（因为我不使用 eclipse 我最初没有安装它）
*   在 SDK 管理器上，我安装了 extras 和 API 的 14~17

我应该在每个步骤之后尝试运行命令来查明问题。如果您确切知道解决了什么问题，请告诉。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T18:02:43.673

我也有同样的问题。安装 Apache Ant 已修复 az fiznool 为我建议了它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-09T14:21:23.133

我有同样的问题。

删除后`&> /dev/null`，我弄清楚了真正发生的事情。

该`commons-codec-1.7.jar`脚本返回以下错误：

`Error: JAVA_HOME is not defined correctly.`

所以我只需要`JAVA_HOME`在我的`.bashrc`文件中添加变量，如下所示：

`export JAVA_HOME=/usr/lib/jvm/java-6-oracle/`

之后一切正常。

谢谢！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-30T13:38:33.013

在我的情况下，我使用了“sudo cordova platform add android”，它就像一个魅力

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-19T04:51:21.080

我已经安装了 Android 4.2 (API 17) 并解决了错误

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-07T15:42:02.700

尝试：

```
chown -R xxxx:xxxx  /path_to_cordova 
```

这个对我有用！！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-08-02T14:04:27.053

如其他地方所述，如果您在项目名称中使用空格创建项目（即使您很好地将整个名称放在引号之间），则添加 Android 将失败。破折号 (-) 会导致同样的问题。

# macos - OSX-有播放 mp4、avi 和 wmv 文件的简单方法吗？

> ID：14449667
> 
> 赞同：0
> 
> 时间：2013-01-22T00:33:02.007
> 
> 标签：macos, mp4, quicktime, avi, wmv

在 Windows 7-8 Media Foundation 上允许播放多种类型的视频文件。OSX 10.6 及更高版本是否有类似的东西？例如，有没有一种简单的方法来使用 Quicktime？我不需要做任何花哨的事情，只需播放具有设置位置、停止和开始功能的视频即可。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T02:39:13.070

请参阅 Cocoa 类`QTMovie`和`QTMovieView`. 我记得，您需要第三方插件编解码器才能使用 QuickTime 播放 wmv 文件，但 mp4 和 avi 应该可以开箱即用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T03:17:49.083

vlc 播放器、MPlayer 都可用于 OSX。您可以从各自的 OSX 站点下载这两个播放器。

# ios - uitableview]如何防止用户在数据完全加载之前滚动？

> ID：14449669
> 
> 赞同：0
> 
> 时间：2013-01-22T00:33:18.757
> 
> 标签：ios, uitableview

我目前正在使用 MBProgressHUD 和 NSURLConnection 处理 tableview。问题是，例如，当用户位于第 80 行时，当用较少的数据刷新表时，只有 10 行存在，这个应用程序完全崩溃，因为用户正在查看的行导致第 80 行被释放 -内存访问错误。

我想确保无论用户在哪里，应用程序都不会崩溃。纠正这个问题的最佳方法是什么？:S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T02:01:15.773

@Bergasms 是对的，您的问题与正在滚动的表格无关，在这种情况下禁用它可能是不明智的（从设计角度来看）。话虽如此，您可以使用该[`scrollEnabled`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/instp/UIScrollView/scrollEnabled)属性并将其设置为`NO`

但是，要解决您的崩溃，您应该`[self.tableView reloadData]`在数据源更新后立即调用。

您还`tableView:numberOfRowsInSection:`应该从支持您的数据源的对象返回计数。

这是一个示例实现，它显示在滚动时更新数据源如果正确完成不会导致崩溃。

```
@interface CLViewController ()

@property (nonatomic, strong) NSMutableArray *stuffs;

@end

@implementation CLViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    self.stuffs = [NSMutableArray array];
    for (int i = 0; i <= 100; i++) {
        [self.stuffs addObject:[NSString stringWithFormat:@"%d", i]];
    }

    int64_t delayInSeconds = 3.0;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        [self.stuffs removeAllObjects];
        for (int i = 0; i <= 10; i++) {
            [self.stuffs addObject:[NSString stringWithFormat:@"%d", i]];
            [self.theTableView reloadData];
        }
    });
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return self.stuffs.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"StuffCell"];
    cell.textLabel.text = [self.stuffs objectAtIndex:indexPath.row];
    return cell;
}

@end 
```

这会将 100 行加载到数组中，该`stuffs`数组`viewDidLoad`在应用启动时可立即滚动。3 秒后，`stuffs`数组被清空并加载了 10 个项目，`[self.theTableView reloadData];`调用 next，交互有点颠簸，但基本上最后 90 行就消失了，一切都很好，没有崩溃。

# android - NullPointerException 使用 DialogFragment 调用活动

> ID：14449675
> 
> 赞同：0
> 
> 时间：2013-01-22T00:33:36.737
> 
> 标签：android, android-dialogfragment

我正在将我的对话框转换为`DialogFragments`. 我正在按照[此处](http://android-developers.blogspot.com/2012/05/using-dialogfragments.html)的说明进行操作，但看起来他们正在使用它，`Activity`而我正在使用它`Fragment`。我已经创建了`Listener`片段的背面，但是当我调用`getActivity()`它时，它会抛出一个`NullPointerException`：

```
public class DialogTextAdd extends DialogFragment implements OnEditorActionListener {

    private EditText mText;

    public interface DialogTextAddListener {
        void onDialogTextAdd(final String inputText);
    }

    public DialogTextAdd() {
        // Empty constructor required for DialogFragment
    }

    @Override
    public View onCreateView(final LayoutInflater inflater, final ViewGroup container, final Bundle savedInstanceState) {
        final View view = inflater.inflate(R.layout.dialog_edit, container);
        mText = (EditText)view.findViewById(R.id.Text_add);
        getDialog().setTitle("Add Text");

        // Show soft keyboard automatically
        mText.requestFocus();
        getDialog().getWindow().setSoftInputMode(LayoutParams.SOFT_INPUT_STATE_VISIBLE);
        mText.setOnEditorActionListener(this);

        return view;
    }

    @Override
    public boolean onEditorAction(final TextView v, final int actionId, final KeyEvent event) {
        if (EditorInfo.IME_ACTION_DONE == actionId) {

            new MyFragment().onDialogTextAdd(mText.getText().toString()); //think this is my problem
            this.dismiss();
            return true;
        }
        return false;
    }
}

public class MyFragment extends SherlockListFragment implements DialogKeywordAddListener
{
    @Override
    public void onDialogTextAdd(final String text) {
        Toast.makeText(getActivity(), text + " saved", Toast.LENGTH_SHORT).show();
    }

@Override
public void onAttach(Activity act) {
    super.onAttach(act);
}

} 
```

使用此代码使其工作：

```
 MyFragment mf = new MyFragment();
    Bundle args = new Bundle();
    args.putString("text", mText.getText().toString());
    mf.setArguments(args);

    getActivity().getSupportFragmentManager().beginTransaction().add(mf, "my_fragment").commit(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T01:15:04.530

你不应该使用`getSupportFragmentManager()`并将（`.add(fragment, tag)`）你的片段的新实例添加到`FragmentTransaction`通过做`.beginTransaction()`然后调用`commit()`吗？我想这就是你想要做的。

`getActivity()`返回`null`，因为您的新 Fragment 实例未附加到 Activity （本机`FragmentActivity/Activity`或`SherlockFragmentActivity/SherlockActivity`，无论它是什么）。

做一些关于使用片段的阅读。片段的实例化是不够的。查找实例化后的底层操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T00:38:52.753

利用 ：

```
getActivity().getApplicationContext() 
```

代替：

```
getActivity() 
```

**编辑：**

使用此方法

```
@Override
public void onAttach(SupportActivity activity) {
    super.onAttach(activity);
} 
```

# c# - 周一至周日的月历显示日期

> ID：14449676
> 
> 赞同：1
> 
> 时间：2013-01-22T00:33:41.377
> 
> 标签：c#, winforms, visual-studio-2010, monthcalendar

我正在创建一个小程序，它很快就会发展成一个时间表，我正在练习使用 C# `MonthCalendar`。到目前为止，我已经设法将所选日期显示到文本标签上，但是我正在寻找一些稍微不同的东西，我正在努力解决这个问题。

我在一个表格上放置了七个标签。当我单击一个日期时，我希望所有七个标签都填充与所选日期所在的特定周相对应的日期。谁能建议我需要做些什么来实现这一目标。

我要解决的问题：假设我从日历中选择一个日期。例如 22/01/1013 等标签上我想显示从 2012 年 1 月 21 日至 27 日开始的那一周的所有日期

为了进一步澄清这一点：

这是我想出的界面： ![在此处输入图像描述](../Images/d981ce1487e56d53d1fd1623c98f0309.png)

到目前为止我的代码：

```
 public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            timer1.Enabled = true;
        }
        private void button1_Click(object sender, EventArgs e)
        {
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        DateTime dt = DateTime.Now;
        label8.Text = dt.ToString();
    }

    private void monthCalendar1_DateSelected(object sender, DateRangeEventArgs e)
    {
        label1.Text = monthCalendar1.SelectionStart.ToString();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T01:28:45.583

From the answer of [zespri](https://stackoverflow.com/users/284111/zespri) and I got this idea from this [answer](https://stackoverflow.com/a/38049/1080742).

```
class Program
{
    static void Main(string[] args)
    {
        DateTime t = DateTime.Now; //Your selected date from Calendar
        t -= new TimeSpan((int)t.DayOfWeek, 0, 0, 0);
        Console.WriteLine("\tstart: " + t.Date.ToShortDateString());
        Console.WriteLine("\tend: " + t.Date.AddDays(7).ToShortDateString());
        Console.WriteLine("\t" + new string('-', 25));

        for (int i = 0; i < 7; i++)
        {
            var d = t.AddDays(i);
            if (d.DayOfWeek >= DayOfWeek.Monday && d.DayOfWeek <= DayOfWeek.Friday) //Range: Monday to Friday
                Console.WriteLine(d.DayOfWeek + " : " + d);
        }
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T01:13:14.533

首先，找出一周的第一天。你可以这样[做](https://stackoverflow.com/a/38064/284111)。然后从该日期开始将目标文本分配给每个标签。

您可以在 7 行代码中完成后者，每个标签一个，或者您可以将标签放在一个数组中，在您的表单初始化代码中并遍历该数组。请注意，将标签放入数组仍需要 7 行。最后，您可以使用[Form.Controls](http://msdn2.microsoft.com/en-us/library/system.windows.forms.control.controls)或[Form.FindControl](http://msdn.microsoft.com/en-us/library/system.web.ui.control.findcontrol.aspx)根据名称循环查找所有 7 个标签。

# database - 在数据库中存储用户的数据库密码。使用应用程序用户密码作为加密盐是一种好方法吗？

> ID：14449679
> 
> 赞同：0
> 
> 时间：2013-01-22T00:34:05.203
> 
> 标签：database, security, encryption

应用程序还没有完成，现在密码和数据库信息只是在数据库中加密，并在应用程序上使用密钥解密。

但我在想，如果我可以将数据库信息保存在加密表中，每个用户数据库组合都有一个条目，并且这些信息使用散列用户密码作为盐进行加密（与用户表中的散列不同，当然）。因此，如果攻击者以某种方式设法获得数据库或应用程序，它仍然无法读取所有数据库密码，因为它需要有权访问此类数据库的用户的密码。

我的想法是，当用户登录时，他的密码被散列（如在数据库盐中），并保存为寿命短的 cookie，以便在用户连接时使用它。

尽管我在想，如果攻击者在我的应用程序上获得执行权，他仍然可以通过每个请求访问已连接用户的 cookie。

另一个缺点是用户无法重置密码，因为如果他这样做了，他就无法解密密码以访问数据库。

那么，您对此有何看法？这是一个好方法吗？你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:45:54.133

这里有一个误解。仅靠密码学无法保护您的整个业务/公司/数据。

当您加密数据并且用户总是解密和使用这些数据时，您无法对其进行中继，因为如果您让黑客访问您的服务器，黑客将能够像其他用户一样解密数据。

为了保护数据，您必须采取其他措施，例如：

*   分析您的 Web 应用程序代码，防止所有类型的 SQL 注入、代码执行、LFI、RFI、XSSes 等。

*   分析您的数据库访问列表。即使用户知道用户名/密码，也不要让外部 IP 可以访问您的数据库服务器。使用适当的访问列表保护数据库。如果页面的大部分部分没有在表中输入数据而只是进行选择查询，则仅向用户授予 SELECT 权限并为 SQL 查询定义此用户/通行证。

*   始终保持服务器软件更新。它可以是服务器操作系统、Web 服务器应用程序或 Web 应用程序本身。

您可以使用上述方法保护您的数据/服务器，我认为始终在使用用户数据库被加密时进行整体加密并不是一个好主意。它会降低速度/性能，并且不会帮助您防止被黑客入侵。

# knockout.js - 使用 if 绑定引用 $root 内部和 Knockout 中的绑定时未定义属性

> ID：14449681
> 
> 赞同：0
> 
> 时间：2013-01-22T00:34:19.137
> 
> 标签：knockout.js

我很确定我在上下文方面遗漏了一些东西，但我就是不知道是什么。

我有以下视图模型：

```
var ViewModel = function(){
    var self = this;
    self.person = ko.observable();
    self.isPerson = ko.observable();

    self.person.subscribe(function(value){
        self.isPerson('firstName' in value);
    });
};

var vm = new ViewModel();
var personA = { };
var personB = { firstName: ko.observable("hello") };

vm.person(personA);
ko.applyBindings(vm);
setTimeout(function(){ vm.person(personB); }, 1000); 
```

和以下视图：

```
<span data-bind="with: person">
    <!-- ko if: $root.isPerson -->
        <span data-bind="text: firstName"></span> 
    <!-- /ko -->    
</span> 
```

[JSFiddle](http://jsfiddle.net/mdavis/73Xxs/16/)

一旦超时执行，我希望在视图中显示 firstName，但是，我收到以下错误：

```
 firstName is not defined; 
```

如果我从 viewModel 中的 personB 开始，它可以工作。如果我将 if 语句移到 with 语句之上，它就可以工作。

在这种情况下我做错了什么？

**更新[了 JSFiddle](http://jsfiddle.net/mdavis/73Xxs/17/)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T05:16:09.563

我不认为你做错了什么。问题是在更新与“with”的绑定之前，正在应用与 root.isEmployee 的“if”绑定。因此代码正在查看对 isEmployee 的更新，然后从那里重新评估视图，但当前上下文仍然是老人（因为该订阅尚未触发）。

[这可以通过http://jsfiddle.net/drdamour/X6pC9/2/](http://jsfiddle.net/drdamour/X6pC9/2/)中的自定义绑定来证明， 请注意更新接收 2 个事件，一次使用旧值导致 isEmployee 更新，第二次使用更新后的新值。第二次更新来自被触发的“with”绑定订阅。'with' 绑定的订阅发生在 applyBindings 调用期间，这发生在您的模型进行订阅之后。

您可以使用 $data.PropertyName 技巧来处理未定义的不引起问题的问题。阿拉：http: [//jsfiddle.net/drdamour/X6pC9/1/](http://jsfiddle.net/drdamour/X6pC9/1/)

```
<span data-bind="with: person">
    <span data-bind="text: firstName"></span> 
    <!-- ko if: $root.isEmployee -->
        <span data-bind="text: $data.employeeId"></span> 
        <span data-bind="text: $data.employer"></span> 
    <!-- /ko -->    
</span> 
```

解决这个问题的正确方法是拥有一个计算 isEmployee 的 PersonVM，这样你就不会绑定到根。见：http: [//jsfiddle.net/drdamour/eVXTF/1/](http://jsfiddle.net/drdamour/eVXTF/1/)

```
<span data-bind="with: person">
    <span data-bind="text: firstName"></span> 
    <!-- ko if: isEmployee -->
        <span data-bind="text: $data.employeeId"></span> 
        <span data-bind="text: $data.employer"></span> 
    <!-- /ko -->    
</span> 
```

和

```
var ViewModel = function(){
    var self = this;
    self.person = ko.observable();
};

var PersonVM = function()
{
    var self = this;
    this.firstName = ko.observable();
    this.employeeId = ko.observable();
    this.employer = ko.observable();

    self.isEmployee = ko.computed(function(){return self.employer() != null});
}

var vm = new ViewModel();
var customer = new PersonVM();
customer.firstName("John");

var employee = new PersonVM();
employee.firstName("Bill");
employee.employeeId(123);
employee.employer("ACME");

vm.person(customer);
ko.applyBindings(vm);
setTimeout(function(){ vm.person(employee); }, 3000); 
```

计算优先于订阅方法，因为它为您处理订阅链并将您从必须管理的所有内容中抽象出来。

# javascript - 如何确保扩展的 pageAction 显示预渲染页面？

> ID：14449684
> 
> 赞同：0
> 
> 时间：2013-01-22T00:34:49.510
> 
> 标签：javascript, google-chrome-extension, dom-events, prerender

我正在`pageAction`为特定站点开发一个 Chrome 扩展程序。我想将我的扩展程序转换为使用事件页面而不是背景页面。

我发现预渲染的页面在我读到的用于显示它们的建议方法中滑倒了。我能找到`pageAction`在预渲染页面上进行显示的唯一方法是监听`chrome.webNavigation.onTabReplaced`事件，并另外显示`pageAction`替换 url 是否正确。由于此事件的侦听器不支持过滤器，因此在每次预渲染时都会调用我的侦听器，因此如果它是事件页面就会被唤醒。

`pageAction`在预渲染页面的情况下，是否有其他方法可以确保我的节目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:20:23.017

我能够找到一种解决方法，也许是更好的解决方案。我现在使用 html5 api 来检测可见性状态。如果可见，我会向 backgroundPage 发送一条消息以显示 pageAction。这有效地替换了我用于显示 pageAction 的所有其他代码。

希望这会帮助其他人。

```
//contentScript.js
//This sections is to handle when we want to display the pageAction icon
function handleVisibilityChange(){
  if (!document.webkitHidden){
    //the page is now visible and is therefore not prerendering or in the background
    chrome.extension.sendMessage({message: "pageLoaded", userLoggedIn: loggedIn()}, function(response) {
      console.log(response.farewell);});
  }
}

document.addEventListener("webkitvisibilitychange", handleVisibilityChange, false);

//Call the function incase the document is already visible/
handleVisibilityChange();

//backgroundPage.js
chrome.extension.onMessage.addListener(
  function(request, sender, sendResponse){
    if (request.message == "pageLoaded"){
    sendResponse({farewell: "goodbye"}); //close the connection.

      console.log('detected page load');
      if(request.userLoggedIn == true){
        //Show regularPageAction
        console.log('user logged in so showing pageaction normal');
        chrome.pageAction.setPopup({tabId: sender.tab.id, popup: "popup.html"});
      }
      else{
        //show non logged in page action.
        console.log('user now logged in so showing pageaction non normal');
        chrome.pageAction.setPopup({tabId: sender.tab.id, popup: "notLoggedIn.html"});
      }
      chrome.pageAction.show(sender.tab.id);
  }
  }); 
```

# ios - CollectionVew 编辑菜单未出现

> ID：14449687
> 
> 赞同：2
> 
> 时间：2013-01-22T00:35:06.953
> 
> 标签：ios, cocoa-touch, uicollectionview

[有关执行 CollectionViews](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/CollectionViewPGforIOS/CreatingCellsandViews/CreatingCellsandViews.html)的 Apple文档说，默认行为是长按以调出编辑菜单。它接着说您必须实现 3 个委托方法，仅此而已。

我有一个扩展 UICollectionViewController 的 CollectionView（并因此实现了数据源委托），并且我实现了委托，但它们从未被调用。这个 CollectionView 是在 Interface Builder 中设置的。

我拖出一个长按手势识别器并制作了一个方法，是的，它可以检测到它，但这对我没有好处。根据文档，单元格应检测到长按并调用委托。

文档对此真的很蹩脚，这太糟糕了。CollectionViews 很棒，但说真的，这并不像宣传的那样工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T00:50:04.453

全部实现，请查看 UIKit.framework 中的 UICollectionView.h

// 这些方法为单元格上的复制/粘贴操作提供支持。// 如果有的话，这三个都应该实现。

```
- (BOOL)collectionView:(UICollectionView *)collectionView shouldShowMenuForItemAtIndexPath:(NSIndexPath *)indexPath{
return YES;
}

- (BOOL)collectionView:(UICollectionView *)collectionView canPerformAction:(SEL)action forItemAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender{
return YES;
}

- (void)collectionView:(UICollectionView *)collectionView performAction:(SEL)action forItemAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender{
//your action
} 
```

# javascript - Javascript：无法将 document.getElementById(fieldname).label 转换为对象

> ID：14449693
> 
> 赞同：1
> 
> 时间：2013-01-22T00:35:59.027
> 
> 标签：javascript, html

> **可能重复：**
> [查找与给定输入关联的 html 标签](https://stackoverflow.com/questions/285522/find-html-label-associated-with-a-given-input)

我有以下html代码-

```
 <label for='useremail'>Registered email address</label>
        <input type='text' value='' name='useremail' onfocus='hideLabel("useremail");' id='useremail' class='useremail'> 
```

在我的网页和下面的 Javascript 代码中

```
function hideLabel (fieldname) {
document.getElementById(fieldname).label.style.visibility = 'hidden'; } 
```

我的意图是在用户单击输入字段时隐藏标签。当我对此进行测试时，出现以下错误。我的代码有问题吗？

```
Unhandled Error: Cannot convert 'document.getElementById(fieldname).label' to object 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:43:05.920

我从来没有听说过`.label`- 我发现这个关于创建它的 SO 问题：[Find html label associated with a given input](https://stackoverflow.com/questions/285522/find-html-label-associated-with-a-given-input)

顺便说一句，如果您在脚本中包含该解决方案，它将起作用。

这是一个展示它的[jsfiddle 。](http://jsfiddle.net/Q6J4M/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T00:57:10.763

将您的 javascript 更改为：

```
document.getElementById(fieldname).style.visibility = 'hidden' 
```

无需贴姓名标签。更改后，给您的标签和 id="useremail"

```
<label id='useremail'>Registered email address</label> 
```

# php - 将两个变量并排放置

> ID：14449695
> 
> 赞同：0
> 
> 时间：2013-01-22T00:36:07.730
> 
> 标签：php

我继承了一些代码并试图理解这一点。我唯一一次看到这样的语法（将一些东西放在变量旁边的括号中）是在类型转换中。我还看不到 $var2 的任何实例（可能在某个地方调用该函数的脚本中）。这可能是什么？

这是我在代码中看到的：

```
$var1 = $arrayName['element']($var2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:37:30.820

它正在从数组中调用一个函数。它以带有函数名称的字符串形式存储在数组中，或者[函数本身存储在其中](http://php.net/manual/en/functions.anonymous.php)。

# php - 似乎无法连接到本地主机 msql？

> ID：14449696
> 
> 赞同：0
> 
> 时间：2013-01-22T00:36:12.470
> 
> 标签：php, mysql, sql, localhost, mysql-connect

我似乎无法在本地主机下运行此代码，我的目标是制作一个应该在网站上显示的表格，但是当我尝试连接时出现错误：

> 警告：mysql_connect(): in C:\xampp\htdocs\PhpProject2\hent.php 第 5 行无法连接

```
my site name: http://localhost/PhpProject2/hent.php 
```

编码：

```
<html>
<body>
<?php 

mysql_connect('<server is here>','<my username here>','<password here>') 
or die('can not connect' );
mysql_select_db('<my username here>') or die ('can not connect to <username here>');  

$sql = "Select * from Customer";
$result = mysql_query($sql);
$number= mysql_num_rows($result);

for($i=0; $i < $number; $i++)
{
    $table = mysql_fetch_row($result);
    echo  $table[0], $table[1];
    echo '<br>';
}
?>
    </body>
</html> 
```

我正在使用 xampp 并且 MySQL 在端口 3306 上运行：]

而不是我的<username here>，<server is here>，<password here>有真实代码：]

我会很感激任何答案:]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:40:02.543

您可以执行以下操作来查看错误：

```
mysql_connect('<server is here>','<my username here>','<password here>') 
or die('Error: '.mysql_error() ); 
```

并尽量避免使用以 . 开头的所有函数`mysql_*`。他们目前正在被贬低。

使用 mysqli 或 pdo

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T01:11:15.377

尝试这个：

```
<?php
  $host = "hostname";
  $user = "username";
  $password = "password";
  $database = "database";

  $link = mysqli_connect($host, $user, $password, $database);
  If (!$link){
      echo ("Unable to connect to database!");
  }
  else {
  $query = "SELECT * FROM Customer";    
  $result = mysqli_query($link,$query);

  while ($row = mysqli_fetch_array($result, MYSQLI_BOTH)){
   echo  $row['<insert column name>']. "<br>";
  }
}
mysqli_close($link);
?> 
```

我在这段代码中使用了 MYSQL 库。您应该检查 mysql 中的列是否称为 0 和 1。顺便说一句，我使用的是 WHILE 而不是 FOR 循环，这只是个人喜好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T02:32:43.010

这就是我通常连接到 MySQL 数据库的方式。我有 config.php

```
<?php

function db_connect(){
   $conn = new mysqli('localhost', 'root', 'leave_black_if_no_password_set', 'database_name');
   if (!$conn) {
      return false;
   }
   $conn->autocommit(TRUE);  
    return $conn;

}

?> 
```

//结束配置

现在，在你的其他文件中调用 config.php: `include 'config.php';

```
 <html>
    <body>
    <?php 
    include 'php/config.php';
    $dbCon = db_connect();

    $sql = "Select * from Customer";
    $result = mysqli_query($dbCon, $sql);
    $number= mysqli_num_rows($result);

   while($row=mysqli_fetch_array($result)){
    {
        echo  $row['column_name'];
        echo '<br>';
    }
//close conn
 mysqli_close($dbCon);
    ?>
        </body>
    </html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T00:44:33.860

我建议你开始使用 PDO；

**索引.php**

```
<?php 
require "dbc.php";

$getList = $db->getAllData(25);

foreach ($getList as $key=> $row) {
         echo $row['columnName'] .' key: '. $key;
    }
?> 
```

**dbc.php**

```
<?php
class dbc {
public $dbserver = 'server';
public $dbusername = 'user';
public $dbpassword = 'pass';
public $dbname = 'db';

function openDb() {    
    try {
        $db = new PDO('mysql:host=' . $this->dbserver . ';dbname=' . $this->dbname . ';charset=utf8', '' . $this->dbusername . '', '' . $this->dbpassword . '');
    } catch (PDOException $e) {
        die("error, please try again " . $e);
    }        
    return $db;
}

function getAllData($qty) {
    //prepared query to prevent SQL injections
    $query = "Select * from Customer where zip= ?";
    $stmt = $this->openDb()->prepare($query);
    $stmt->bindValue(1, $qty, PDO::PARAM_INT);
    $stmt->execute();
    $rows = $stmt->fetchAll(PDO::FETCH_ASSOC);
    return $rows;
}    
?> 
```

# css - CSS - 缩放元素和图像 rel。使用 % 到窗口大小

> ID：14449698
> 
> 赞同：0
> 
> 时间：2013-01-22T00:36:13.250
> 
> 标签：css, positioning, scale, scaling, percentage

我有一个 1920x650 的图像和一个透明的水平矩形在它的左下角。我已经设法使它与图像一起缩放。问题是我无法弄清楚如何让它以一种会失去更多宽度的方式进行缩放。它与 img 精确缩放。

```
.container{
    position: relative;
    width: 100%;
    height: 100%;}

.bg-img{
    display:block;
    position: relative;
    width: 100%;
    height: 100%;
    z-index:1;}

.transblock{
    position:absolute; 
    width:44%; 
    height:6%; 
    top:90%; 
    left:0%; 
    z-index:5;} 
```

[http://jsfiddle.net/FA7XE/2/](http://jsfiddle.net/FA7XE/2/) - 开始全屏，缩小窗口 - 框和文本向中间偏移太多。（它与图像完美缩放，在这种情况下这是一件坏事:(）。我想让它相对于下面的菜单保持在原位。任何想法如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:26:34.813

用于显示绿色矩形和文本的容器使用前角宽度。查看 CSS，您会发现没有为父元素指定固定宽度。这将转化为浏览器获取正文宽度值并使用它来计算尺寸。

基本上，'.transblock' div 的宽度始终为 44%（取自主体宽度），'.h1text' div 的宽度为 30%。

实现所需效果的解决方法可能是使用一些 javascript(jQuery) 代码来动态计算元素的宽度和位置：

```
jQuery('.transblock').width(jQuery('body').width() * 0.44);
jQuery('.h1text').width(jQuery('body').width() * 0.3);
jQuery('.h1text').css('left', jQuery('body').width() * 0.135); 
```

你可以看看[这个小提琴](http://jsfiddle.net/gabi/3zFhf/)

注意：注意如何使用图像的宽度和高度。设定宽度：100%；和高度：100%；在非方形图像上可能会出现不需要的纵横比：

```
.bg-img{
    width: 100%;
    height: 100%;
} 
```

指定 width: 100% 就足够了 - 浏览器将使图像适合容器而不强制图像的高度，保持比例为 1:1。

# c# - 将类型用作“属性”是不好的做法吗？

> ID：14449699
> 
> 赞同：3
> 
> 时间：2013-01-22T00:36:15.783
> 
> 标签：c#, inheritance

我目前正在使用一些旧的 C# 代码，它基本上使用派生类型，其唯一目的是使用 Type 作为“属性”，例如：

```
public abstract class Fruit
{
    public int Property { get; set; }
}

public class Apple : Fruit {}

public class Pear : Fruit {} 
```

接着：

```
public void Foo(Fruit item)
{
    if(item is Apple)
    {
        // do something
        return;
    }
    if(item is Pear)
    {
        // do something
        return;
    }

    throw new ArgumentOutOfRangeException("item");
} 
```

我会在 BaseClass 上包含一个枚举属性来指定“类型”：

```
public class Fruit
{
    public int Property { get; set; }

    public FruitType Type { get; set; }
}

public enum FruitType
{
    Apple,
    Pear
} 
```

然后这样使用它：

```
public void Foo(Fruit item)
{
    switch(item.Type)
    {
        case FruitType.Apple:
            // do something
            break;
        case FruitType.Pear:
            // do something
            break;
        default:
            throw new ArgumentOutOfRangeException();
    }
} 
```

我觉得前一种模式是对继承的滥用，但是在重写这段代码之前我应该​​考虑它的任何优点吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T00:42:45.890

处理这种情况的标准“OO”方法是使 DoSomething 成为 Fruit 上的抽象方法。然后调用者只是调用 DoSomething，知道实现会做正确的事。

这种方法的缺点是它将计算用户可能想要的所有可能的“东西”的责任交给了抽象类的作者。

使用“访问者模式”可以减轻这种不利影响。访问者模式是使第三方能够根据值的运行时类型有效地切换行为的标准方式。你可以考虑研究一下。

您的第二种方法 - 用标签区分类型 - 很常见并且非常有效。Roslyn 广泛使用这种技术。OO纯粹主义者认为有点臭，但幸运的是我不是OO纯粹主义者。

我喜欢的第二种技术的变体是：

```
public enum FruitKind { Apple, Orange }
public abstract class Fruit
{
  private Fruit(FruitKind kind)
  {
      this.Kind = kind;
  }
  public FruitKind Kind { get; protected set; }
  private class Apple : Fruit
  {
      public Apple() : base(FruitKind.Apple) {}
  }
  public static Fruit MakeApple() { return new Apple(); }
  // similarly for orange
} 
```

现在Fruit 用户可以确定类型的*唯一方法是通过标签，因为 Apple 和 Orange 不可访问。*您知道没有第三方会制作自己的 Fruit，因为唯一的 Fruit 构造函数是私有的。

# url - UDiD 到 URL：重新定义错误

> ID：14449702
> 
> 赞同：2
> 
> 时间：2013-01-22T00:36:54.597
> 
> 标签：url, redefinition

所以我试图将设备的 UDiD 传递到 URL 中，我注意到 StackOverflow 上的另一个问题，但它似乎不起作用。我收到了“重新定义 'url'，任何人都可以帮助我吗？

```
NSString *udid = [UIDevice currentDevice].uniqueIdentifier;
NSString *string = [NSString stringWithFormat:@"http://example.com/?udid=%@",udid];
NSURL *url = [NSURL URLWithString:string];
[home loadRequest:[NSURLRequest requestWithURL:url]]; 
```

谢谢大家，任何帮助将不胜感激。

# version-control - 如何从 mercurial 存储库中安全地禁用/删除 largefiles 目录？

> ID：14449707
> 
> 赞同：5
> 
> 时间：2013-01-22T00:37:21.300
> 
> 标签：version-control, mercurial, large-files, mercurial-extension

过去，我一直在使用 mercurial 中的 largefiles 扩展来保存数据以及我一直在处理的代码。我认为这是一个错误，我想删除“大文件”目录（8GB）。我们的网络用户目录限制为 10 GB，我需要空间。我已经很长时间没有使用任何大文件了。当他们永远离开时，我不会想念他们。

所以我的问题是

1.  我可以在不损坏 repo 的情况下删除 .hg 下的 largefiles 目录吗？
2.  如果我这样做了，即使丢失了一些大型数据文件，我是否能够检查出旧代码？
3.  我是否应该从该存储库的*所有*克隆中删除这些文件，以避免再次使用来自另一个克隆的大文件污染所有存储库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T07:22:06.653

对于你的第一个问题，我做了一个实验：

1.  创建了一个带有大文件的仓库。
2.  `hg update null`
3.  已删除`.hg\largefiles`
4.  `hg update`

大文件回来了！事实证明，至少在 Windows 上，大文件也缓存在`%UserProfile%\AppData\Local\largefiles`. 由于这是我唯一的大文件数据库，它只包含我的一个大文件，所以我也删除了它。这个缓存包含来自多个本地启用大文件的数据库的大文件，所以你必须小心这个。如果拥有两个副本似乎很浪费，那么事实证明，如果本地数据库与`%UserProfile%`. 我的系统中有两个驱动器，事实证明，如果数据库位于不同的驱动器上，它仍会复制到该`AppData`位置，但不是硬链接，并且会使您的磁盘使用量翻倍。

删除大文件的所有副本后，`hg update`给出：

```
1 files updated, 0 files merged, 0 files removed, 0 files unresolved
getting changed largefiles
largefile.dat: can't get file locally
(no default or default-push path set in hgrc)
0 largefiles updated, 0 removed 
```

然后我删除`[extensions], largefiles=`以`.hg\hgrc`禁用扩展。此时存储库工作正常，但`.hglf`在过去有大文件的变更集中仍然有带有哈希的目录。所以第二个问题的答案是肯定的，你可以查看旧代码。

对于您的第三个问题，要消除大文件和散列的所有痕迹，请创建一个文件：

```
exclude .hglf 
```

并运行：

```
hg convert --filemap <file> <srcrepo> <destrepo> 
```

然后，您的用户将不得不克隆这个新的、修改过的存储库，因为 convert 会修改变更集，并且新数据库将与旧数据库无关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-20T09:57:27.323

将普通存储库转换为大文件的相同命令`lfconvert`也可用于其他方向：

```
$ hg --config extensions.largefiles= help lfconvert
hg lfconvert SOURCE DEST [FILE ...]

convert a normal repository to a largefiles repository

Convert repository SOURCE to a new repository DEST, identical to SOURCE
except that certain files will be converted as largefiles [...]

Use --to-normal to convert largefiles back to normal files; after this,
the DEST repository can be used without largefiles at all. 
```

所以下面的命令可以解决问题：

```
$ hg --config extensions.largefiles= lfconvert --to-normal <LARGEFILE_REPO> <PLAIN_REPO> 
```

您需要与您的团队协调，以便：

1.  每个人都将他们的最新更改推送到大文件主存储库
2.  永久禁用对主仓库的访问（以避免意外推送）
3.  每个人都`largefiles`从他们的`$HOME/.hgrc`
4.  从提供对主存储库的访问权限的用户中删除`largefiles`扩展名（位置取决于主存储库是服务器、SSH 还是 HTTP）。这将使某人不可能不小心将大文件添加到新仓库的克隆中并推送它！`hgrc``hgrc`
5.  执行主仓库到普通仓库的转换
6.  决定新主仓库的名称/路径更改（如果有）
7.  允许访问新的、普通的主存储库
8.  每个人都克隆新的普通回购

请注意，`lfconvert`仅在`largefiles`启用扩展时才可用。我的建议是，按照第 3 点，从`$HOME/.hgrc`带有选项的单个命令中删除它并启用它`--config extensions.largefiles=`，如上面的示例所示。

另请注意，转换为普通 repo 将启用最近的[`fsmonitor`扩展](https://www.mercurial-scm.org/wiki/FsMonitorExtension)，它使用内核 inotify 机制（或 MacOSX 上的等效机制）来*显着*加快某些操作，例如`hg status`. 例如对于我拥有的一个巨大的存储库，`hg status`从 10 秒到 0.5 秒 :-)

# javascript - .sortable() 添加 50px 高度，扰乱滚动条

> ID：14449709
> 
> 赞同：1
> 
> 时间：2013-01-22T00:37:30.450
> 
> 标签：javascript, jquery

我有一个可拖动的元素列表。我使用的唯一 jQuery 是：

```
$('.section_rows').sortable(); 
```

这工作正常。但是，当我在页面底部（在底部一直垂直滚动）并单击一行进行拖动和排序时，页面“跳转”了`55px`. 虽然这在功能上没什么大不了的，但它是一个糟糕的用户体验（并且可拖动的行位于此页面的底部，所以这种打嗝总是会发生）。

我看了一下 HTML，看起来 jQuery 正在添加一个名为的类`'.ui-sortable-helper'`，其中包含一个高度为 55px 的样式。

是否有一种方法可以禁用此功能或迫使该页面在选择可拖动物品时“不移动”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:00:15.303

听起来您需要一个放置占位符来将列表保持在相同的高度。尝试：

```
$(".section_rows").sortable(P{
   placeholder: 'ui-state-highlight'
}); 
```

确保将 CSS`.ui-state-highlight`设置为适当的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T00:53:03.413

手动将占位符添加到`sortable`函数 ( [http://jqueryui.com/sortable/#placeholder](http://jqueryui.com/sortable/#placeholder) )，并设置如下样式：

```
$('.section_rows').sortable({placeholder: "ui-state-highlight"});

.ui-state-highlight {
    height: 55px;
    line-height: 1.2em;
    background: rgb(250, 252, 255)!important;
    border: none!important;
} 
```

# angularjs - Angular 教程第 4 步 :: 为选择问题分配默认值

> ID：14449711
> 
> 赞同：0
> 
> 时间：2013-01-22T00:37:31.420
> 
> 标签：angularjs

我将通过 AngularJs 教程。在第 4 步[http://docs.angularjs.org/tutorial/step_04](http://docs.angularjs.org/tutorial/step_04)而不是硬编码的 Select 标记中，我创建了一个 JavaScript 对象来进行测试。

这是我添加到 controller.js 的 javascript 代码

```
 $scope.sortOptions = [{
        "optionValue": "name",
        "desc": "Alphabetical"
    }, {
        "optionValue": "age",
        "desc": "Newest"
    }]; 
```

现在 $scope.orderProp = "age" 不起作用。（假设为选择设置默认值）。我想知道这里有什么问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T00:49:12.530

使用 上的`ng-options`属性`<select>`创建`<option>`条目，如下所示：

```
<select ng-model="orderProp" 
        ng-options="option.optionValue as option.desc for option in sortOptions">                        
</select> 
```

`option.optionValue as option.desc for option in sortOptions`对应于：

*   遍历`sortOptions`数组并将每个项目分配给一个`option`变量
*   将每个标签设置`<option>`为`option.desc`
*   将每个值设置`<option>`为`option.optionValue`

更多关于这里的信息：[http ://docs.angularjs.org/api/ng.directive:select](http://docs.angularjs.org/api/ng.directive:select)

jsFiddle：http: [//jsfiddle.net/bmleite/m6Z5Z/2/](http://jsfiddle.net/bmleite/m6Z5Z/2/)

# performance - 在 R 向量中“向下”复制单元格值的惯用方法

> ID：14449717
> 
> 赞同：1
> 
> 时间：2013-01-22T00:38:15.793
> 
> 标签：performance, r, loops, vectorization, idioms

> **可能重复：**
> [使用先前的非 NA 值填充向量中的 NA？](https://stackoverflow.com/questions/9023072/populate-nas-in-a-vector-using-prior-non-na-values)

是否有一种惯用的方法可以在 R 向量中“向下”复制单元格值？通过“向下复制”，我的意思是用最接近的先前非 NA 值替换 NA。

虽然我可以使用 for 循环非常简单地做到这一点，但它运行得非常慢。任何有关如何矢量化的建议将不胜感激。

```
# Test code
# Set up test data
len <- 1000000
data <- rep(c(1, rep(NA, 9)), len %/% 10) * rep(1:(len %/% 10), each=10)
head(data, n=25)
tail(data, n=25)

# Time naive method
system.time({
  data.clean <- data;
  for (i in 2:length(data.clean)){
    if(is.na(data.clean[i])) data.clean[i] <- data.clean[i-1]
  }
})

# Print results
head(data.clean, n=25)
tail(data.clean, n=25) 
```

试运行结果：

```
> # Set up test data
> len <- 1000000
> data <- rep(c(1, rep(NA, 9)), len %/% 10) * rep(1:(len %/% 10), each=10)
> head(data, n=25)
 [1]  1 NA NA NA NA NA NA NA NA NA  2 NA NA NA NA NA NA NA NA NA  3 NA NA NA NA
> tail(data, n=25)
 [1]     NA     NA     NA     NA     NA  99999     NA     NA     NA     NA
[11]     NA     NA     NA     NA     NA 100000     NA     NA     NA     NA
[21]     NA     NA     NA     NA     NA
> 
> # Time naive method
> system.time({
+   data.clean <- data;
+   for (i in 2:length(data.clean)){
+     if(is.na(data.clean[i])) data.clean[i] <- data.clean[i-1]
+   }
+ })
   user  system elapsed 
   3.09    0.00    3.09 
> 
> # Print results
> head(data.clean, n=25)
 [1] 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3
> tail(data.clean, n=25)
 [1]  99998  99998  99998  99998  99998  99999  99999  99999  99999  99999
[11]  99999  99999  99999  99999  99999 100000 100000 100000 100000 100000
[21] 100000 100000 100000 100000 100000
> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T05:40:43.360

我不知道惯用语，但在这里我们识别非 NA 值 ( `idx`)，以及最后一个非 NA 值的索引 ( `cumsum(idx)`)

```
f1 <- function(x) {
    idx <- !is.na(x)
    x[idx][cumsum(idx)]
} 
```

这似乎比`na.locf`示例数据快 6 倍。它会像默认情况下一样放弃领先的 NA `na.locf`，所以

```
f2 <- function(x, na.rm=TRUE) {
    idx <- !is.na(x)
    cidx <- cumsum(idx)
    if (!na.rm)
        cidx[cidx==0] <- NA_integer_
    x[idx][cidx]
} 
```

这似乎增加了大约 30% 的时间`na.rm=FALSE`。大概`na.locf`还有其他优点，捕获更多的极端情况并允许填充而不是向下填充（`cumsum`无论如何，这在世界上是一个有趣的练习）。同样清楚的是，我们至少对可能的大数据进行了五次分配—— `idx`（实际上，我们计算`is.na()`它是补码）、、、`cumsum(idx)`和`x[idx]`——`x[idx][cumsum(idx)]`因此还有进一步改进的空间，例如，在 C

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T00:48:22.500

利用`zoo::na.locf`

将代码包装在函数中`f`（包括`data.clean`最后返回）：

```
library(rbenchmark)
library(zoo)

identical(f(data), na.locf(data))
## [1] TRUE

benchmark(f(data), na.locf(data), replications=10, columns=c("test", "elapsed", "relative"))
##            test elapsed relative
## 1       f(data)  21.460   14.471
## 2 na.locf(data)   1.483    1.000 
```

# python - 有效使用while循环

> ID：14449718
> 
> 赞同：-1
> 
> 时间：2013-01-22T00:38:24.327
> 
> 标签：python, while-loop, nested-loops

我知道在我的循环中输入了一个预告片值来结束程序。我的程序的目的是输入孩子的名字，然后输入他们的成绩。当您完成一个孩子时，您输入 -1 以结束该部分程序。在你完成一个孩子之后，程序应该要求你输入另一个孩子的名字。预告片值“完成”有效，但是当我输入一个随机孩子的名字时，它会说这个名字没有定义，它不会运行程序的其余部分。帮助？

```
#By: Christian Braverman 01/02/13

#Variables

TotalNum_A = 0
TotalNum_B = 0
TotalNum_C = 0
TotalNum_D = 0
TotalNum_F = 0
studentname = 0
Done = 0
grade = 0

#Loop
studentname = input("Enter student name ")
while studentname != Done :                    
    studentname = input ("Enter student name ")
    grade = input("Enter a Grade ")
    while grade != -1:
        grade = input("Enter a Grade: ")

        if grade >=90 :
            print "A!"
            TotalNum_A = TotalNum_A + 1

        if grade >=80 and grade <90:
            print "B!"
            TotalNum_B = TotalNum_B + 1

        if grade >=70 and grade <80:
            print "C"
            TotalNum_C = TotalNum_C + 1

        if grade >=60 and grade <70:
            print "D"
            TotalNum_D = TotalNum_D + 1

        if grade <=59:
            print "F :("
            TotalNum_F = TotalNum_F + 1
    grade = input("Enter a Grade: ")

#Printing Totals

print ("You received " + str(TotalNum_A) + " A's.")

print ("You recieved " + str(TotalNum_B) + " B's.")

print ("You recieved " + str(TotalNum_C) + " C's.")

print ("You recieved " + str(TotalNum_D) + " D's.")

print ("You recieved " + str(TotalNum_F) + " F's.") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:42:51.580

您应该使用`raw_input`而不是`input`- 这样，它将采用字符串而不是要求输入是已经存在的变量。然后更换

```
while studentname != Done: 
```

和

```
while studentname != "Done": 
```

请注意，到目前为止，甚至没有理由询问学生的姓名，因为到目前为止，您的程序还没有对他们做任何事情。

# asp.net-mvc - 编写一条捕获所有 mvc 路由

> ID：14449719
> 
> 赞同：0
> 
> 时间：2013-01-22T00:38:33.060
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

我正在使用 MVC4 并希望编写一条路线，但不确定如何去做。

在我的网站上，我有许多路线。我想要实现的目标如下：

*   任何与路由对应的 url，都会触发该路由的控制器操作
*   但是，如果没有为 url 找到控制器操作，我希望触发特定的控制器操作，例如。www.mywebsite.com/level1/level2/level3 没有对应的路由，所以我想调用一个特定的路由并将字符串列表中的 level1、level2 和 level3 作为控制器操作的参数传递给它。项目数量没有限制。

有了这些信息，我将检查数据是否存在于内容管理系统等中。

有什么想法可以为上述创建路线吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:26:05.170

你的建议基本上是一个 404 捕获。它可能听起来并不优雅，因为它感觉像是导致错误并捕获它，但 404 只是在无法识别正确路线后采取的步骤。如果 MVC 框架有一个“最终选项”路由，它将在没有找到合适的路由后被采用。

2 种方法

**路由方法**

*   // 我们找不到处理请求的路由。显示 404 页面。routes.MapRoute("Error", "{*url}", new { controller = "Error", action = "404" } );

-

或者

## -

**web.config 中的自定义错误处理程序**

```
<customErrors mode="On" >
       <error statusCode="404" redirect="~/CatchallController/CatchallAction" />
</customErrors> 
```

没有路由匹配引发的条件是 404。这样你就可以将所有不匹配的`~/CatchallController/CatchallAction`

|

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:56:22.857

您可以在路线模式中使用星号来表示“包罗万象”（“可变长度”路线）。

例如“{controller}/{action}/{id}/{*catchall}”

这将匹配任何 url 与从 catchall 段开始的任意数量的段。

请记住在更一般的路线之前指定更具体的路线。

# string - C++ Stringbuilder 插入、反转和重新排列多个字符串

> ID：14449720
> 
> 赞同：0
> 
> 时间：2013-01-22T00:38:33.010
> 
> 标签：string, c++-cli, stringbuilder

我今天了解了 Stringbuilder 并且一直在搞乱它，因为它可能是完成我需要做的事情的最简单或最快的方法。

我有一个这样的文本文件：

```
Zach LCPL Schytt
Bill CPL John
Mark LCPL Simmons
...etc 
```

我使用下面的函数将它从列表框读取到文本框。

```
StringBuilder^ sb = gcnew StringBuilder();
        Convertor^ form2 = gcnew Convertor();
            for (int i = 0; i < listBox1->Items->Count; i++){
                String^ temp = listBox1->Items[i]->ToString();
                sb->AppendFormat("{0}", temp)->AppendLine();
            }
            form2->textBox1->Text = sb->ToString();
            form2->ShowDialog(); 
```

我该如何让它看起来像下面呢？对于每个名字，

```
dn: CN=Schytt LCPL Zach,DC=Sample,DC=Site
changetype: add
displayName: Schytt.Zach 
```

我调查了`insert`, 和东西，但不太明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:46:07.387

你在寻找这样的东西吗？

```
StringBuilder^ sb = gcnew StringBuilder();
for (int i = 0; i < listBox1->Items->Count; i++)
{
    String^ temp = listBox1->Items[i]->ToString();

    // First, separate the input string.
    array<String^>^ strings = temp->Split();
    String^ firstName = strings[0];
    String^ rank = strings[1];
    String^ lastName = strings[2];

    // Then build the output string. (Remember that the C++ compiler 
    // concatenates strings at compile time, so we don't need a plus sign.)
    sb->AppendFormat("dn: CN = {2} {3} {1},DC=Sample,DC=Site{0}"
                     "changetype: add{0}"
                     "displayName: {2}.{1}{0}", 
                     Environment::Newline, //0
                     firstName, //1
                     lastName, //2
                     rank); //3
}

form2->textBox1->Text = sb->ToString();
form2->ShowDialog(); 
```

# jquery - 在嵌套内容可编辑后设置光标位置

> ID：14449721
> 
> 赞同：7
> 
> 时间：2013-01-22T00:38:52.200
> 
> 标签：jquery, html, contenteditable, caret

我有这个标记

```
<div contentEditable="true">
    Some other editable content
    <div class="field" contentEditable="false">
        <span class="label">This is the label</span>
        <span class="value" contentEditable="true">This is where the caret is</span>
    </div>
    <!-- This is where I want the Caret -->
</div> 
```

插入符号当前位于`.field`跨度中。

我需要在 parent**之后**将其移出。`.field``contentEditable`

![例子](../Images/4c03b5ac5a2f274f354f70473b7c28e9.png)

这如何通过 javascript 来完成（如果需要，可以使用 jQuery）？

当插入符号位于 .value 范围内时，它将尝试在 keydown 事件上触发它，如图所示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T23:21:22.970

我假设您想进入下一部分。为了清楚起见，我添加了一个文本“这里！” 在演示中向您展示它确实会走到最后。

在下面的演示中，按`Enter key`从`.field .value`到结束。

**演示：http:** [//jsfiddle.net/GLzKy/1/](http://jsfiddle.net/GLzKy/1/)

下面是来自[https://stackoverflow.com/a/4238971/297641](https://stackoverflow.com/a/4238971/297641)的函数，它实际上完成了所有工作。

```
$('.field .value').keydown(function (e) {
    if (e.which == 13) { //Enter Key
        e.preventDefault();            
        placeCaretAtEnd($(this).closest('.parent')[0]);
    }
});

/**
  This below function is from https://stackoverflow.com/a/4238971/297641
  All credits goes to the original author.
*/
function placeCaretAtEnd(el) {
    el.focus();
    if (typeof window.getSelection != "undefined"
            && typeof document.createRange != "undefined") {
        var range = document.createRange();
        range.selectNodeContents(el);
        range.collapse(false);
        var sel = window.getSelection();
        sel.removeAllRanges();
        sel.addRange(range);
    } else if (typeof document.body.createTextRange != "undefined") {
        var textRange = document.body.createTextRange();
        textRange.moveToElementText(el);
        textRange.collapse(false);
        textRange.select();
    }
} 
```

**在 FF、IE8 和 Chrome 中测试**

**参考：** [https ://stackoverflow.com/a/4238971/297641](https://stackoverflow.com/a/4238971/297641)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T23:54:16.793

对上一个答案的更新。 [http://jsfiddle.net/GLzKy/4/](http://jsfiddle.net/GLzKy/4/)

```
placeCaretAtEnd($(this).parent().nextAll('.field').children('value')); 
```

**更新**

用评论中的正确答案更新答案

> 要直接在当前字段之后移动，您可能需要使用 range.setStartAfter 和 range.setEndAfter：http: [//jsfiddle.net/GLzKy/5](http://jsfiddle.net/GLzKy/5)

# java - 我应该如何包装来自未知来源的对象

> ID：14449723
> 
> 赞同：0
> 
> 时间：2013-01-22T00:39:00.407
> 
> 标签：java, wrapper

我有一个应用程序，其中包含许多来源未知的接口实现。我想清理我的源代码，这样我就不需要编写：

```
A a = AFactory.getImpl();
B b = a.getB();
if(b == null) return;
b.doSomething(); 
```

这变得很啰嗦。我是否应该包装这个对象，这样它就`A`永远不会`null`从`getB()`; 如果这是一个好主意，我应该怎么做，我应该提供一个引发错误的实现`InvalidImplemetationException`并强制它被捕获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:47:34.073

您应该考虑使用 Null 对象模式：定义一个值`B`来封装您在没有`B`. 在这种情况下，这意味着`doSomething()`什么都不做。

`B`看起来像这样：

```
public class B {
    public static final B NULL = new B() {
        public void doSomething() {
        }
    };

    public static B fromA(A a) {
        B b = a.getB();
        return b == null ? NULL : b;
    }

    public void doSomething() {
        ...
    }
} 
```

你会像这样使用它：

```
A a = AFactory.getImpl();
B.fromA(a).doSomething(); 
```

如果你可以改变`AFactory.getImpl`，让它返回`B.NULL`而不是`null`. 然后你不需要`B.fromA`，你可以这样做：

```
A a = AFactory.getImpl();
a.getB().doSomething(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T00:43:59.587

在这种情况下，我建议您将`b == null`代码放入`getB`函数中。

看来您确实做了一些研究并选择了一个非常好的例外。

一个很好的选择是，而不是抛出一个返回一个新对象的异常`B`。

# html - 文本与下一个表格列重叠

> ID：14449727
> 
> 赞同：0
> 
> 时间：2013-01-22T00:39:11.870
> 
> 标签：html, css

我有一个下表：

```
 <table id="tableqanda" align="center" cellpadding="0" cellspacing="0">
    <thead>
    <tr>
        <th width="6%" class="noofanswers">Number of Answers</th>
        <th width="5%" class="answer">Answer</th>
        <th width="6%" class="noofreplies">Number of Replies</th>
    </tr>
    </thead>
    </table>
    <div id="tableqanda_onthefly_container">
    <table id="tableqanda_onthefly" align="center" cellpadding="0" cellspacing="0">
    <tbody>
        <?php
          foreach ($arrQuestionId as $key=>$question) {
        echo '<tr class="tableqandarow">'.PHP_EOL;
        echo '<td width="6%" class="noofanswers">'.htmlspecialchars($arrNoofAnswers[$key]).'</td>' . PHP_EOL;
        echo '<td width="5%" class="answers">'.htmlspecialchars($arrAnswer[$key]).'</td>' . PHP_EOL;
        echo '<td width="6%" class="noofreplies">'.htmlspecialchars($arrReplyType[$key]).'</td>' . PHP_EOL; 
        echo '</tr>'.PHP_EOL;
        }
?>
    </tbody>
    </table>
    </div> 
```

该表是一个带有固定标题的滚动表。但这不是问题。我遇到的问题是答案列，如果您查看下面的屏幕截图，您可以看到列下的第一行`Answer`，答案与其旁边的列重叠，而不是显示下面的其余内容。为什么会这样？

下面是截图：

![在此处输入图像描述](../Images/497ea8d19878d29d99891c44d2000097.png)

下面是CSS：

```
#tableqanda_onthefly_container
{
    width:100%;
    overflow-y: auto;
    overflow-x: hidden;
    max-height:500px;
}

#tableqanda_onthefly
{
    width:100%;
    overflow:auto;
    clear:both;
}

#tableqanda_onthefly td
{
    border:1px black solid;
    border-collapse:collapse;
}

#tableqanda, #tableqanda_onthefly{
    border:1px black solid;
    border-collapse:collapse;
    table-layout:fixed;
}       

#tableqanda{
    width:100%;
    margin-left:0;
    float:left;
}

#tableqanda td { 
    vertical-align: middle;
    border:1px black solid;
    border-collapse:collapse;
}

#tableqanda th{
    border:1px black solid;
    border-collapse:collapse;
    text-align:center;
}

.tableqandarow{
    border:1px black solid;
    border-collapse:collapse;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:46:40.290

几点建议： 1\. 不要试图将表头和明细行放在两个不同的表中。我知道这不是你问的问题，而是一个建议。2\. 您想更改表格的 CSS，使其不是固定布局。

```
#tableqanda, #tableqanda_onthefly{
    border:1px black solid;
    border-collapse:collapse;
    table-layout:fixed;
} 
```

您的数据大于分配的空间。您还可以使用 wrap 将文本换行以确保它不会超出布局。

# php - 通过PHP上传文件，不起作用

> ID：14449731
> 
> 赞同：7
> 
> 时间：2013-01-22T00:39:28.800
> 
> 标签：php, file-upload

我从这个页面复制了代码：http: [//www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp)

问题是我在上传文件时没有收到错误，而是显示哪个应该是正确的：

上传：images.jpeg 类型：image/jpeg 大小：5.8603515625 kB 临时文件：/tmp/phpZ67YXk 存储在：upload/images.jpeg

但没有文件保存在服务器上。

我不知道出了什么问题，但我在考虑权限，仍然有一个名为 upload 的文件夹具有 777 权限。

这些 php 文件托管在在线 Web 主机上，因此我不在本地运行它。

HTML 格式

```
<form action="upload_file.php" method="post"
enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file"><br>
<input type="submit" name="submit" value="Submit">
</form>

</body>
</html> 
```

上传文件.php

```
<?php
$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

    if (file_exists("upload/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "upload/" . $_FILES["file"]["name"]);
      echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
      }
    }
  }
else
  {
  echo "Invalid file";
  }
?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T01:02:13.600

我想问题出在您的目标相对路径（相对于您当前的工作目录 = .php 文件的路径），尝试将其设为绝对路径，如下所示：

```
move_uploaded_file(
  $_FILES["file"]["tmp_name"],
  $_SERVER['DOCUMENT_ROOT'] . 'upload/' . $_FILES["file"]["name"]
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-05T18:26:13.250

这可以帮助您：

```
chmod 777 foldername 
```

php代码：

```
<?php
if(isset($_FILES['image'])){
  $errors= array();
  $file_name = $_FILES['image']['name'];
  $file_size =$_FILES['image']['size'];
  $file_tmp =$_FILES['image']['tmp_name'];
  $file_type=$_FILES['image']['type'];
  $file_ext=strtolower(end(explode('.',$_FILES['image']['name'])));
  $expensions= array("jpeg","jpg","png", "mp3",
                     "acc", "wav", "3gpp", "mp4", "3gp", "m4a", "amr", "avi",
                    "flv", "gif");

  if(in_array($file_ext,$expensions)=== false){
     $errors[]="extension not allowed, please choose a JPEG or PNG file.";
  }

  if($file_size > 2097152666655){
     $errors[]='File size must be excately 2 MB';
  }

  if(empty($errors)==true){
     move_uploaded_file($file_tmp,"/var/www/upload/users/".$file_name);
     echo "Success";
  }else{
     print_r($errors);
  }
}
?> 
```

html:

```
<html>
<body>

  <form action="" method="POST" enctype="multipart/form-data">
     <input type="file" name="image" />
     <input type="submit"/>
  </form>

</body>
</html> 
```

# fonts - 从图像和脚本创建 ttf

> ID：14449733
> 
> 赞同：3
> 
> 时间：2013-01-22T00:39:34.357
> 
> 标签：fonts

有谁知道软件可以从现有图像和脚本创建真字体（ttf）？

脚本可能如下所示：

```
[aA]:./a.png
[bB]:font/b.tga
[花]:chinese/flower.png 
```

**我已经有了图像**，而且我知道其中的每一个字。所以我只需要一个工具（GUI或CLI）可以通过解析脚本导出ttf文件**并将图像（无论这些图像代表正确的单词）放入ttf文件**。

那么，有人有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:43:47.260

因为 .ttf 是矢量化图形格式（类似于 flash，但精度更高），光栅图形和 .ttf 之间没有有意义的转换。

也许您想制作位图字体？ [http://en.wikipedia.org/wiki/Computer_font#Bitmap_fonts](http://en.wikipedia.org/wiki/Computer_font#Bitmap_fonts)

# magento - 有没有办法通过 API 将跟踪信息从我们的 Fedex 帐户添加到 Magento？

> ID：14449744
> 
> 赞同：0
> 
> 时间：2013-01-22T00:40:55.780
> 
> 标签：magento, fedex, ups

我们不发货，我们的供应商使用我们的帐号和参考号代表我们发货。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:50:21.210

有一个 API 方法可以将跟踪号添加到现有订单。效果很好！！

以下是该方法的 Web 服务详细信息：http: [//www.magentocommerce.com/api/soap/sales/salesOrderShipment/sales_order_shipment.addTrack.html](http://www.magentocommerce.com/api/soap/sales/salesOrderShipment/sales_order_shipment.addTrack.html)

您需要在 addTrack 调用中传入一个 shippingIncrementId，因此您需要首先调用 create 方法。

如果您可以让您的供应商向您发送 Magento OrderID 和 Tracking #，您应该能够使用该信息调用 .create 和 .addTrack 方法，以使用跟踪信息更新您的客户订单。希望这可以帮助！

# objective-c - 如何让子类引用其超类的XIB？

> ID：14449745
> 
> 赞同：3
> 
> 时间：2013-01-22T00:41:00.950
> 
> 标签：objective-c, xcode4.5

我有一个`BaseClass`UIViewController 类。它运作良好。`BaseClass`有 BaseClass.xib

然后我创建了该基类的子类。

结果没有一个插座连接。

我放

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    return self;
} 
```

是的，就这样。它被称为。我不确定 aDecoder 是什么。我认为它是 childClass 的 XIB 的表示，它不存在。我想用super的xib初始化super。

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
    }
    return self;
} 
```

永远不会被调用。

事实上，我自己也很困惑。当我们有 xib 时，它似乎就是 `-(id)initWithCoder:(NSCoder *)aDecoder`被调用的那个。所以我想知道 initWithNibName 是干什么用的？

我试过了

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithNibName:NSStringFromClass([super class]) bundle:nil];
    return self;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T00:48:56.843

`- (id)initWithNibName:(NSString *)nibName bundle:(NSBundle *)nibBundle`是 的指定初始值设定项`UIViewController`。所以在你继承的类中，

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:@"BaseClass" bundle:nibBundleOrNil];
    if (self) {
    }
    return self;
} 
```

每当 Apple 将初始化器标记为指定初始化器时，其他初始化器将仅指向指定初始化器。您不需要实现其他初始化程序。

NIB 加载使用 initWithCoder 这就是为什么您会在加载 nib 时看到它被调用的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T00:49:59.887

如果要更改对象的初始化方式或进行其他初始化，则只需覆盖 init 方法。从 xib加载（或任何东西）时，调用该方法`UIViewController`时您的插座将不会连接。`init`

一旦加载了 xib 中的所有对象并设置了连接，`awakeFromNib`就会被调用。实现它以查看是否所有内容都已正确加载（应该）。

# java - 确定 2 个矩形棱镜是否接触/相交

> ID：14449746
> 
> 赞同：1
> 
> 时间：2013-01-22T00:41:12.967
> 
> 标签：java, math, shapes

我在确定 2 个矩形棱镜是否接触或重叠时遇到了一些麻烦。我只有两个矩形棱镜的 highX,Y,Z 和 lowX,Y,Z。这是我到目前为止所拥有的：

```
 public boolean overlaps(AreaSelection other) {
    boolean Xs = (lowX <= other.getHighestX()) && (other.getLowestX() <= highX);
    boolean Ys = (lowY <= other.getHighestY()) && (other.getLowestY() <= highY); 
    boolean Zs = (lowZ <= other.getHighestZ()) && (other.getLowestZ() <= highZ);
    return (Xs && Ys && Zs);        
} 
```

有谁知道这是否正确？如果没有，解决方案是什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T03:26:26.227

当且仅当坐标轴上相应的三对投影间隔都重叠时，两个边平行于坐标轴的直角棱柱重叠。

因此，有一个“实用程序”方法来检查间隔的重叠是有意义的，我们调用了三次来检查棱镜的重叠。我们假设这个方法将在间隔的端点正确排序的情况下被调用：

```
public boolean overlap_1d(double aLow, double aHigh, double bLow, double bHigh)
{
    if (aLow <= bLow) return (bLow <= aHigh);
    /* else aLow > bLow */
    return (aLow <= bHigh);
} 
```

原始代码将变为：

```
public boolean overlaps(AreaSelection other)
{
    boolean Xs = overlap_1D(lowX,highX,other.getLowestX(),other.getHighestX());
    boolean Ys = overlap_1D(lowY,highY,other.getLowestY(),other.getHighestY());
    boolean Zs = overlap_1D(lowZ,highZ,other.getLowestZ(),other.getHighestZ());
    return (Xs && Ys && Zs);        
} 
```

请注意，在这种方法中，重叠可能由单个交点组成（无论是一维还是三维）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T01:07:49.613

如果棱镜没有旋转，则您的方法是正确的，否则无法计算它们是否仅与这些值重叠。

# .htaccess - htaccess 重写不同的变量集

> ID：14449748
> 
> 赞同：1
> 
> 时间：2013-01-22T00:41:36.203
> 
> 标签：.htaccess, variables, mod-rewrite, url-rewriting

我有几组不同的变量可以是 alhpa 数字。

如果我注释掉任何两组，另一组将起作用。只有一组可以工作，但需要三个都可以工作。

第一组只有一个级别：

domain.com/index.php?var1a=var1a

第二组可以是一级、二级或三级：

domain.com/index.php?var2a=var2a

domain.com/index.php?var2a=var2a&var2b=var2b

domain.com/index.php?var2a=var2a&var2b=var2b&var2c=var2c

第三组可以是一级、二级或三级：

domain.com/index.php?var3a=var3a

domain.com/index.php?var3a=var3a&var3b=var3b

domain.com/index.php?var3a=var3a&var3b=var3b&var3c=var3c

htaccess 文件如下所示：

```
RewriteEngine on
RewriteRule ^([a-zA-Z0-9_-]+)$ index.php?var1a=$1 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/$ index.php?var1a=$1 [L]

RewriteRule ^([a-zA-Z0-9_-]+)$ index.php?var2a=$1 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/$ index.php?var2a=$1 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)$ index.php?var2a=$1&var2b=$2 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/$ index.php?var2a=$1&var2b=$2 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)([a-zA-Z0-9_-]+)/$ index.php?var2a=$1&var2b=$2&var2c=$3 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/$ index.php?var2a=$1&var2b=$2&var2c=$3 [L]

RewriteRule ^([a-zA-Z0-9_-]+)$ index.php?var3a=$1 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/$ index.php?var3a=$1 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)$ index.php?var3a=$1&var3b=$2 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/$ index.php?var3a=$1&var3b=$2 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)$ index.php?var3a=$1&var3b=$2&var3c=$3 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/$ index.php?var3a=$1&var3b=$2&var3c=$3 [L] 
```

经过测试，我明白为什么这不起作用但无法弄清楚如何定义不同的集合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T23:47:57.947

根据上面的评论，搜索 URL 是最容易适应的，因为它们以一致的 /search 开头，因此该规则将首先执行：

```
RewriteRule ^search/?$ index.php?search=true [L, NC]
RewriteRule ^search/([a-zA-Z0-9_-]+)/?$ index.php?search=true&keyword=$1 [L, NC]
RewriteRule ^search/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/?$ index.php?search=true&keyword=$1&keyword2=$2 [L, NC] 
```

`/?`使尾部斜杠可选，因此您可以在同一规则上匹配或不匹配。

这留下了附属和发布链接。假设帖子链接有多种起始词（类别），与“搜索”不同，我们需要将它们与用户名区分开来。不过，用户名只有一级，所以首先我们可以捕获任何两级或三级 URL 作为帖子链接：

```
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/?$ index.php?c=$1&m=$2 [L, NC]
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/?$ index.php?c=$1&m=$2&t=$3 [L, NC] 
```

最后，对于区分类别和用户名的单级 URL，可能存在有限数量的已知类别不经常更改，而用户名更多且更容易更改的情况。因此，您需要一种查找类别的方法，然后将任何不匹配的默认设置为用户名。

要查找类别，您需要使用`RewriteMap`. 您需要查看[RewriteMap 文档](http://httpd.apache.org/docs/2.2/rewrite/rewritemap.html)以确定哪种类型最适合您的情况，但最终会是这样的：

```
#Map is declared in virtual host context, not in .htaccess
RewriteMap categorymap txt:/path/to/file/categories.txt

RewriteCond ^([a-zA-Z0-9_-]+)/?$,${categorymap:$1} ^([^,]+),\1
RewriteRule ^([a-zA-Z0-9_-]+)/?$ index.php?c=$1

RewriteRule ^([a-zA-Z0-9_-]+)/?$ index.php?affiliate=$1 
```

我自己没有使用过 RewriteMaps 或该特定格式的 RewriteConds，所以它可能需要调整，但想法是 RewriteCond 表示将传入路径与逗号 ( `^([^,]+)`) 之前的所有内容的捕获相匹配，然后匹配 categorymap针对捕获的模式 ( `\1`)。

# ios - 表格显示详细视图并返回到表格视图中的同一位置

> ID：14449749
> 
> 赞同：0
> 
> 时间：2013-01-22T00:41:37.917
> 
> 标签：ios, cocoa-touch, twitter, tableview

我正在做一个简单的推特客户端。（`TableView`那个谈话是时间线）。

用户选择一个`Tweet`from`Tableview`并因此通过 a `Segue`，出现一个包含所有详细信息的视图`Tweet`，但是当用户返回到该方法时，该`TableView` `ViewDidLoad`方法被执行，并且从中获取数据的方法`TimeLine`被激活，因此 tableview 返回到顶部（这很无聊）。我想查看用户详细信息推文，当他们返回时，`TableView tweet`它在左侧用户的同一位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:08:11.413

UITableView 有一个方便的方法来做到这一点
`- (void)scrollToRowAtIndexPath:(NSIndexPath *)indexPath atScrollPosition:(UITableViewScrollPosition)scrollPosition animated:(BOOL)animated`

[参考这里](http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)

# php - 从数据库中的json加载数据+调用未定义的方法错误+ Zend Framework

> ID：14449751
> 
> 赞同：0
> 
> 时间：2013-01-22T00:42:04.500
> 
> 标签：php, sql, json, zend-framework, methods

我想从我的数据库中的 2 个 json 文件加载数据。json-file 1的标记：

```
{
    "wijken": {
        "11": {
            "coords": "3.79073170001967,51.1717753664505,0 3.79020920176376,51.1723018883706,0 3.78989543642226,51.1729670713336,0 3.78983091856725,51.1736482209016,0 3.79035112720225,51.174896701853,0 3.79089521566258,51.1755715564749",
            "id": "kml_1",
            "fid": "0",
            "wijziging": "Ja",
            "nieuwnr": "11",
            "naam": "Noordoost",
            "wijk": "Kanaaldorpen en -zone",
            "wijknr": "11",
            "objectid": "1",
            "area": "0",
            "len": "0"
        },
        "12": {
            "coords": "3.78365655007178,51.0788871010895,0 3.78236442099369,51.078059164252,0 3.78145483809257,51.0772221613719,0 3.77888089082956,51.0750304363252,0 3.77670256394985,51.0734391195385,0 3.77279418332369,51.0714074143415",
            "id": "kml_2",
            "fid": "1",
            "wijziging": "Ja",
            "nieuwnr": "12",
            "naam": "Noordoost",
            "wijk": "Oostakker",
            "wijknr": "12",
            "objectid": "2",
            "area": "0",
            "len": "0"
        },
        "14": {
            "coords": "3.75380711028508,51.0773171406482,0 3.75436966210847,51.0771805986634,0 3.75572764083826,51.077128950619,0 3.75568978579317,51.0768781807292,0 3.75764106686573,51.0767833829573,0 3.75931252603489,51.0764226285855",
            "id": "kml_3",
            "fid": "2",
            "wijziging": "Ja",
            "nieuwnr": "14",
            "naam": "Noordoost",
            "wijk": "Sint Amandsberg",
            "wijknr": "14",
            "objectid": "3",
            "area": "0",
            "len": "0"
        },
        ......
} 
```

json-file 2的标记：

```
{
    "geboortes": [
        {
            "wijk": "Binnenstad",
            "year_1999": 167,
            "year_2000": 156,
            "year_2001": 167,
            "year_2002": 179,
            "year_2003": 150,
            "year_2004": 196,
            "year_2005": 187,
            "year_2006": 204,
            "year_2007": 189,
            "year_2008": 206,
            "year_2009": 218
        },
        {
            "wijk": "Bloemekenswijk",
            "year_1999": 106,
            "year_2000": 105,
            "year_2001": 106,
            "year_2002": 101,
            "year_2003": 125,
            "year_2004": 133,
            "year_2005": 138,
            "year_2006": 138,
            "year_2007": 120,
            "year_2008": 177,
            "year_2009": 143
        },
        {
            "wijk": "Brugse Poort - Rooigem",
            "year_1999": 231,
            "year_2000": 219,
            "year_2001": 198,
            "year_2002": 205,
            "year_2003": 207,
            "year_2004": 206,
            "year_2005": 256,
            "year_2006": 277,
            "year_2007": 258,
            "year_2008": 298,
            "year_2009": 295
        },
        .....
} 
```

我的两张桌子：

> *   带有字段的“区域”（= json 的字段）：coords、id、fid、wijziging、nieuwnr、naam、wijk、wijknr、objectid、area、len
>     
>     
> *   带有字段（= json 字段）的“出生”：wijk、year_1999、year_2000、year_2001、year_2002、year_2003、year_2004、year_2005、year_2006、year_2007、year_2008、year_2009

我有一个 updateAction，我从 2 个表中的 2 个 json 加载数据：

```
public function updateAction()
    {

        $view = $this->view;
        $view->title = $this->_translate->_('Edit') . ' - ' . $this->_translate->_('Back office');

        $url = "http://data.appsforghent.be/poi/wijken.json";
        $url2 = "http://data.appsforghent.be/demografie/geboortes.json";
        $url3 = "http://data.appsforghent.be/demografie/overlijdens.json";

        $json = file_get_contents($url);
        $json2 = file_get_contents($url2);

        $out = Zend_Json::decode($json);
        $out2 = Zend_Json::decode($json2);

        // WIJKEN JSON
        foreach($out["wijken"] as $w) 
    {           
            $coords = addslashes($w['coords']);
            $id = addslashes($w['id']);
            $fid = addslashes($w['fid']);
            $wijziging = addslashes($w['wijziging']);
            $nieuwnr = addslashes($w['nieuwnr']);
            $naam = addslashes($w['naam']);
            $wijk = addslashes($w['wijk']);
            $wijknr = addslashes($w['wijknr']);
            $objectid = addslashes($w['objectid']);
            $area = addslashes($w['area']);
            $len = addslashes($w['len']);

        $data = array('coords'  => $coords,
                      'id' => $id,
                      'fid'      => $fid,
                      'wijziging'   => $wijziging,
                      'nieuwnr'   => $nieuwnr,
                      'naam'   => $naam,
                      'wijk'   => $wijk,
                      'wijknr'   => $wijknr,
                      'objectid'   => $objectid,
                      'area'   => $area,
                      'len'   => $len,      
        );

        $district = new Backoffice_Model_District($data);

        $districtMapper = new Backoffice_Model_DistrictMapper();
        $districtMapper->save($district);

        }

        // GEBOORTES JSON
        foreach($out2["geboortes"] as $g) 
    {           
            $wijk = addslashes($g['wijk']);
            $year_1999 = addslashes($g['year_1999']);
            $year_2000 = addslashes($g['year_2000']);
            $year_2001 = addslashes($g['year_2001']);
            $year_2002 = addslashes($g['year_2002']);
            $year_2003 = addslashes($g['year_2003']);
            $year_2004 = addslashes($g['year_2004']);
            $year_2005 = addslashes($g['year_2005']);
            $year_2006 = addslashes($g['year_2006']);
            $year_2007 = addslashes($g['year_2007']);
            $year_2008 = addslashes($g['year_2008']);
            $year_2009 = addslashes($g['year_2009']);

        $data2 = array('wijk'        => $wijk,
                      'year_1999'   => $year_1999,
                      'year_2000'   => $year_2000,
                      'year_2001'   => $year_2001,
                      'year_2002'   => $year_2002,
                      'year_2003'   => $year_2003,
                      'year_2004'   => $year_2004,
                      'year_2005'   => $year_2005,
                      'year_2006'   => $year_2006,
                      'year_2007'   => $year_2007,
                      'year_2008'   => $year_2008,
                      'year_2009'   => $year_2009,

        );

        $birth = new Backoffice_Model_Birth($data2);

        $birthMapper = new Backoffice_Model_BirthMapper();
        $birthMapper->save($birth);

        }

        echo "Worked!";

    } 
```

我的 DistrictMapper 中的保存功能：（与 BirthMapper 相同，但值不同）

```
public function save(Backoffice_Model_District $district)
    {

        $data = array('coords'   => $district->getCoords(),
                      'id'       => $district->getId(),
                      'fid'      => $district->getFid(),
                      'wijziging'=> $district->getWijziging(),
                      'nieuwnr'  => $district->getNieuwnr(),
                      'naam'     => $district->getNaam(),
                      'wijk'     => $district->getWijk(),
                      'wijknr'   => $district->getWijknr(),
                      'objectid' => $district->getObjectid(),
                      'area'     => $district->getArea(),
                      'len'      => $district->getLen(),
        ); 
```

他将数据从 json 加载到 table1，但是当他想将 json2 加载到 table 2 时，我收到此错误：

> 致命错误：在第 40 行的 /Applications/MAMP/htdocs/StaGent/library/Ahs/Model/Abstract.php 中调用未定义的方法 Backoffice_Model_Birth::setYear_1999()

我的摘要.php

```
abstract class Ahs_Model_Abstract
{
    /**
     * @param array $values
     */
    public function __construct(array $values) {
        foreach($values as $key => $value) {
            $setter = 'set' . ucfirst($key);
            $this->{$setter}($value);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:39:41.880

我在变量中留下了下划线，现在它可以工作了！

# ironpython - 如何将 IronPython 作为脚本运行

> ID：14449752
> 
> 赞同：4
> 
> 时间：2013-01-22T00:42:05.357
> 
> 标签：ironpython

我想将 ironpython 作为脚本运行，而不是将 ironpython 代码编译为可执行文件。有没有办法将 ironpython 作为脚本运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T00:52:48.163

是的，解释器安装在 Program Files 文件夹下的 IronPython 子目录中。名字是`ipy.exe`。因此，如果您的脚本是`myscript.py`：

```
 C:> c:\Program Files (x86)\IronPython 2.7.1\ipy.exe" myscript.py 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-22T06:40:51.020

为避免使用完整路径，请在环境变量 PATH 中添加 IronPython 文件夹路径。然后启动**cmd**并输入

```
ipy 
```

[![在此处输入图像描述](../Images/48f60b0de620904ae193ba60050845a4.png)](https://i.stack.imgur.com/QYlzO.png)

# python - 在matplotlib中制作更长的子图刻度线？

> ID：14449753
> 
> 赞同：25
> 
> 时间：2013-01-22T00:42:13.383
> 
> 标签：python, matplotlib, subplot

我正在尝试沿 python 多面板子图的轴更改刻度线。我有两个面板共享一个共同的 x 轴。我使绘图周围的边框更粗，并使沿轴的所有刻度线更粗。我有两个问题：

如何使所有刻度线（两个轴）更长，以便更明显？

如何在主要刻度线之间添加较小但仍显着的刻度线？

这是迄今为止我所拥有的最小工作示例。

```
from numpy import *
from scipy import *
from pylab import *
from random import *
import pylab
import matplotlib.pyplot as plt

#make the axis border thick
pylab.rc("axes", linewidth=4.0)
pylab.rc("lines", markeredgewidth=4)

#create a figure with two panels that shares the x-axis
f, (ax1, ax2) = plt.subplots(2, sharex=True, sharey=False)
#example figure1
ax1.plot(range(2),range(2),linewidth=2)
#example figure 2
ax2.plot(range(2),range(2),linewidth=2)

# Fine-tune figure; make subplots close to each other and hide x ticks for
# all but bottom plot.
f.subplots_adjust(hspace=0)
plt.setp([a.get_xticklabels() for a in f.axes[:-1]], visible=False)
show() 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-22T01:18:21.713

尝试以下操作：

```
#example figure1
ax1.plot(range(2),range(2),linewidth=2)
ax1.minorticks_on()
ax1.tick_params('both', length=20, width=2, which='major')
ax1.tick_params('both', length=10, width=1, which='minor') 
```

您可以对 重复相同的操作`ax2`。这对你有用吗？

# c# - C# 属性可以使程序运行速度变慢吗？

> ID：14449756
> 
> 赞同：1
> 
> 时间：2013-01-22T00:42:39.353
> 
> 标签：c#, properties, setter, getter

我担心人们总是使用 getter-setter 模式：

```
 public int MyVariable { get; private set; }

    public void SomeFunction(){
        MyVariable = 10;
    } 
```

据我了解，编译为：

```
 private int myVariable;

    public int GetMyVariable(){
        return myVariable;
    }

    private void SetMyVariable(int value){
        myVariable = value;
    }

    public void SomeFunction()
    {
        SetMyVariable(10);
    } 
```

如果经常使用它不会影响程序的性能吗？这样做不是更好吗：

```
 private int myVariable;
    public int MyVariable { get {return myVariable; } }

    public void SomeFunction(){
        myVariable = 10;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T00:54:32.480

首先，这种类型的优化通常会适得其反——尝试优化单个方法调用通常不会对任何现实世界产生影响，测量性能。您可能最好将精力集中在优化您在更高级别使用的算法上，而不是对所使用的语言功能进行微优化。

> 如果经常使用它不会影响程序的性能吗？这样做不是更好吗：

不，这在编译后实际上是相同的。

此外，在发布版本中，JIT 编译器通常会完全优化 get 和 set 方法，完全内联它们。这将有效地使它像使用公共字段一样执行，并具有与直接成员访问相同的性能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T00:43:32.987

编译的时候也是一样的。

为了证明，您可以查看[此](http://www.csharp-station.com/tutorials/lesson10.aspx)链接。这是它的摘录：

> 注意示例 10-5 中的 get 和 set 访问器没有实现。在自动实现的属性中，C# 编译器在后台创建后备存储字段，提供与传统属性相同的逻辑，但您不必使用传统属性的所有语法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-21T13:24:10.180

这取决于编译器。是的，它可能会影响性能。例如，如果您正在开发一个游戏，其 Unity Engine 属性可能不会自动转换为字段，您可以检查生成的 IL2CPP 代码并找到它们的 C++ 包装器。所以，如果你在渲染和物理循环中使用字段，你可以赢一点。如果您拥有大量此类属性访问权限，您可能不会在分析器中单独找到它们中的任何一个，因此如果您所有庞大的代码库在关键位置都有很多属性，那么将来将很难优化，因为它们的影响将均匀分布. 因此，我更喜欢在开发时间的关键位置使事情变得更加优化，而不是将它们延迟到分析时间。但是在不太重要的地方拥有房产是可以的。

# jboss-arquillian - Arquillian - 不匹配任何已定义的 WebLogic 容器

> ID：14449760
> 
> 赞同：1
> 
> 时间：2013-01-22T00:42:57.107
> 
> 标签：jboss-arquillian, weblogic12c, jsfunit

我正在尝试使用 Weblogic 12c 设置 arquillian。我没有使用 Maven，这是困难的一部分。我正在使用蚂蚁。我不断收到以下错误：

```
Could not read active container configuration: null 
```

这是由以下原因引起的：

```
DeploymentScenario contains targets not matching any defined Container in the registry. _DEFAULT_ 
```

我的理解是，这意味着我的 arquillian.xml 中的 WebLogic 配置未找到，因此它不知道该怎么做。

有任何想法吗？

## 使用的 Jar 文件：

1.0.0.Alpha5 版本：

*   arquillian-junit
*   arquillian-spi
*   arquillian-impl-base
*   arquillian-api

1.0.0.Alpha2 版本：

*   arquillian-wls-common
*   arquillian-wls-remote-12.1

## 支持文件

我的测试班是

```
import java.io.File
@RunWith(Arequillian.class)
public class MyTest {

    @Deployment
    public static WebArchive createDeployment() {
        WebArchive war = ShrinkWrap.createFromZipFile(WebArchive.class,new File("dist/mptd.test.war"));
        war.addAsWebInfResource(new File("test/resources/arquillian.xml"));

        return war;
    }

    @Test
    public void testIndexPagee() {
        System.out.println("In JSFUnit Test Case!! ");

    }
} 
```

我的 arquillian.xml 文件是

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<arquillian xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://jboss.org.schema/arquillian" xsi:schemaLocation="http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd">

    <container qualifier="weblogic" default="true"
        <protocol type="Servlet 3.0">
            <property name="executionType">REMOTE</property>
        </protocol>

        <configuration>
            <property name="adminUrl">t3://xdare001:19000</property>
            <property name="adminUserName">weblogic</property>
            <property name="adminPassword">weblogic1</property>
            <property name="weblogicJarPath">/opt/oracle/middleware_12.1.1./wlserver_12.1.1/server/lib/weblogic.jar</property>
            <property name="wlsHome">/opt/oracle/middleware_12.1.1</property>
            <property name="target">MP1_MS</property>
        </configuration>
    </container>
</arquillian> 
```

## 更新

我搞砸了构建，我认为将适当的 weblogic jar 放在类路径中。此外，我修复了 wlsHome 变量的错误。我们得到的新错误是：

```
Caused by: org.jboss.arquillian.impl.domain.ContainerCreationException: Could not create Container weblogic 
```

和

```
Caused by: java.lang.IllegalStateException: No implementation found for org.jboss.arquillian.spi.client.container.DeployableContainer, please check your classpath ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:37:58.040

根据您的评论，您的类路径中似乎没有 WLS 容器适配器 JAR。对于 WLS 容器 12c 适配器的 1.0.0.Alpha2 版本，您需要添加[arquillian-wls-common](http://repo1.maven.org/maven2/org/jboss/arquillian/container/arquillian-wls-common/1.0.0.Alpha2/arquillian-wls-common-1.0.0.Alpha2.jar)和[arquillian-wls-remote](http://repo1.maven.org/maven2/org/jboss/arquillian/container/arquillian-wls-remote-12.1/1.0.0.Alpha2/arquillian-wls-remote-12.1-1.0.0.Alpha2.jar)工件。

注意 - 要对任何容器使用 Arquillian，您需要在类路径中拥有`arquillian-junit-container`or`arquillian-testng-container`工件和容器适配器工件。当然，还有 JUnit 或 TestNG。

# r - R 余数函数，提取特定值

> ID：14449767
> 
> 赞同：2
> 
> 时间：2013-01-22T00:43:40.457
> 
> 标签：r, function, vector, extract, modulo

我正在用 R 编写一个函数，它给出数字索引的向量，其中向量除以没有余数的数字列在结果向量中。

这就是我到目前为止所拥有的

```
myfunction <-function(x,d)
{ 
    {y<- x%%d 
    return(y)}
} 
```

如果您输入：

```
myfunction(x=2:12,d=3) 
```

结果如下：

```
[1] 2 0 1 2 0 1 2 0 1 2 0 
```

就我而言，我正在尝试提取所有 0 值，因为这些值表明不存在余数。我不知道该怎么做...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T00:50:33.510

```
myfunction <- function(x,d) which(x%%d==0)
x <- 2:12
x[myfunction(x,3)] 
```

您想通过函数执行此操作的任何特定原因？否则你可以做

```
x[x%%3==0] 
```

# routes - 路由表中不正确但有效的 src 字段

> ID：14449768
> 
> 赞同：2
> 
> 时间：2013-01-22T00:43:42.423
> 
> 标签：routes, hostname, archlinux

我在运行 arch linux 的树莓派上的路由表有一个奇怪的问题。

```
greg@pi etc]$ uname -a
Linux pi 3.6.11-2-ARCH+ #1 PREEMPT Mon Dec 31 23:00:25 UTC 2012 armv6l GNU/Linux 
```

我有一个静态 IP 地址的 pi 设置。使用 netcfg 和 net-auto-wired 服务。

我还使用 nmbd 服务作为 samba 的一部分，以允许我通过其主机名 ping 设备奇怪的是，我分配给设备的静态 ip 不是我在通过主机名通信时收到回复的 ip。

查看路由表似乎暗示了问题：

```
[greg@pi ~]$ ip route show
default via 192.168.1.1 dev eth0
default via 192.168.1.1 dev eth0  metric 204
192.168.0.0/24 via 192.168.1.1 dev eth0
192.168.1.0/24 dev eth0  proto kernel  scope link  src 192.168.1.20  metric 204
[greg@pi ~]$ 
```

我的界面设置：

```
[greg@pi ~]$ ifconfig -a
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.1.3  netmask 255.255.255.0  broadcast 192.168.1.255
        inet6 fe80::ba27:ebff:fec9:1caf  prefixlen 64  scopeid 0x20<link>
        ether b8:27:eb:c9:1c:af  txqueuelen 1000  (Ethernet)
        RX packets 1127  bytes 93818 (91.6 KiB)
        RX errors 0  dropped 3  overruns 0  frame 0
        TX packets 684  bytes 76203 (74.4 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

ifb0: flags=130<BROADCAST,NOARP>  mtu 1500
        ether e2:bb:30:e7:d0:8a  txqueuelen 32  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

ifb1: flags=130<BROADCAST,NOARP>  mtu 1500
        ether 8a:e3:26:d4:38:b8  txqueuelen 32  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 16436
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10<host>
        loop  txqueuelen 0  (Local Loopback)
        RX packets 20  bytes 1890 (1.8 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 20  bytes 1890 (1.8 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0 
```

从网络上的另一台电脑上，我验证了两个 IP 都指向同一个接口（它们具有相同的物理地址）。

通信工作示例：

```
[2013-01-22 00:37.47]  ~
[GKuhn.GKUHN-L01] ? ping pi

Pinging pi [192.168.1.20] with 32 bytes of data:
Reply from 192.168.1.20: bytes=32 time=36ms TTL=64
Reply from 192.168.1.20: bytes=32 time=7ms TTL=64
Reply from 192.168.1.20: bytes=32 time=3ms TTL=64
Reply from 192.168.1.20: bytes=32 time=2ms TTL=64

Ping statistics for 192.168.1.20:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 2ms, Maximum = 36ms, Average = 12ms

[2013-01-22 00:37.54]  ~
[GKuhn.GKUHN-L01] ? ping 192.168.1.3

Pinging 192.168.1.3 with 32 bytes of data:
Reply from 192.168.1.3: bytes=32 time=2ms TTL=64
Reply from 192.168.1.3: bytes=32 time=2ms TTL=64
Reply from 192.168.1.3: bytes=32 time=2ms TTL=64
Reply from 192.168.1.3: bytes=32 time=26ms TTL=64

Ping statistics for 192.168.1.3:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 2ms, Maximum = 26ms, Average = 8ms 
```

现在正如我所说，这个设置仍然有效。但我很困惑，想知道a）这实际上是如何工作的b）如何解决它

PS 查看我的日志（以下来自“everything.log”）我看到更多对 dhcpcd 的引用

```
Jan  1 01:00:09 pi dhcpcd[108]: eth0: rebinding lease of 192.168.1.20
Jan  1 01:00:10 pi dhcpcd[108]: eth0: acknowledged 192.168.1.20 from 192.168.1.1
Jan  1 01:00:10 pi dhcpcd[108]: eth0: checking for 192.168.1.20
Jan  1 01:00:14 pi dhcpcd[108]: eth0: leased 192.168.1.20 for 3600 seconds 
```

但是我没有此过程的自定义配置。任何关于我应该在哪里调试的建议将不胜感激。

更多细节：覆盆子连接到 edimax wifi usb 加密狗，所以我在设置它时**也**考虑到了这个接口。我一直使用拱形[无线设置](https://wiki.archlinux.org/index.php/Wireless_Setup)页面作为指南。

我安装了 wireless_tools、dhcpcd（如果还没有的话，我不记得了）和 netcfg。我还安装了 net-auto-wired 和 net-auto-wireless，希望连接能够根据插入的连接正常工作。

下面是相关的配置文件：

```
[greg@pi multi-user.target.wants]$ pwd
/etc/systemd/system/multi-user.target.wants
[greg@pi multi-user.target.wants]$ ls
cronie.service          openntpd.service  sshdgenkeys.service
dhcpcd@eth0.service     remote-fs.target  syslog-ng.service
net-auto-wired.service  smbd.service
nmbd.service            sshd.service
[greg@pi multi-user.target.wants]$ 
```

dhcpcd@eth0.service：

```
[greg@pi multi-user.target.wants]$ cat dhcpcd\@eth0.service
[Unit]
Description=dhcpcd on %I
Wants=network.target
Before=network.target
BindsTo=sys-subsystem-net-devices-%i.device
After=sys-subsystem-net-devices-%i.device

[Service]
Type=forking
PIDFile=/run/dhcpcd-%I.pid
ExecStart=/usr/sbin/dhcpcd -q -w %I
ExecStop=/usr/sbin/dhcpcd -x %I

[Install]
Alias=multi-user.target.wants/dhcpcd@eth0.service 
```

网络自动连线服务：

```
[greg@pi multi-user.target.wants]$ cat net-auto-wired.service
[Unit]
Description=Provides automatic netcfg wired connection

[Service]
EnvironmentFile=/etc/conf.d/netcfg
ExecStart=/usr/bin/ifplugd -i $WIRED_INTERFACE -r /etc/ifplugd/netcfg.action -fIns
ExecStop=/usr/bin/netcfg iface-down $WIRED_INTERFACE

[Install]
WantedBy=multi-user.target
[greg@pi multi-user.target.wants]$

[greg@pi network.d]$ pwd
/etc/network.d
[greg@pi network.d]$ ls
ethernet-static  examples  interfaces  wlan0-xxx
[greg@pi network.d]$ cat wlan0-xxx
CONNECTION='wireless'
DESCRIPTION='Automatically generated profile by wifi-menu'
INTERFACE='wlan0'
SECURITY='wpa'
ESSID=xxx
IP='dhcp'
KEY=xxx
[greg@pi network.d]$ cat ethernet-static
CONNECTION='ethernet'
DESCRIPTION='A basic static ethernet connection using iproute'
INTERFACE='eth0'
IP='static'
ADDR='192.168.1.3'
ROUTES=('192.168.0.0/24 via 192.168.1.1')
GATEWAY='192.168.1.1'
DNS=('192.168.1.1')

## For IPv6 autoconfiguration
#IP6=stateless

## For IPv6 static address configuration
#IP6='static'
#ADDR6=('1234:5678:9abc:def::1/64' '1234:3456::123/96')
#ROUTES6=('abcd::1234')
#GATEWAY6='1234:0:123::abcd'
[greg@pi network.d]$

[greg@pi log]$ cat /etc/dhcpcd.conf
# A sample configuration for dhcpcd.
# See dhcpcd.conf(5) for details.

# Inform the DHCP server of our hostname for DDNS.
hostname
# To share the DHCP lease across OSX and Windows a ClientID is needed.
# Enabling this may get a different lease than the kernel DHCP client.
# Some upstream DHCP servers may also require a ClientID, such as FRITZ!Box.
#clientid

# A list of options to request from the DHCP server.
option domain_name_servers, domain_name, domain_search, host_name
option classless_static_routes
# Most distributions have NTP support.
option ntp_servers
# Respect the network MTU.
option interface_mtu
# A ServerID is required by RFC2131.
require dhcp_server_identifier

# A hook script is provided to lookup the hostname if not set by the DHCP
# server, but it should not be run by default.
nohook lookup-hostname
noipv4ll

#static dns lookup address
#nohook resolv.conf
[greg@pi log]$ 
```

如果有什么我遗漏的，请告诉我，我会发布的。

systemctl 报告的服务摘要：

```
[greg@pi ~]$ systemctl > services
[greg@pi ~]$ cat services
UNIT                        LOAD   ACTIVE SUB       DESCRIPTION
proc-sys...t_misc.automount loaded active running   Arbitrary Executable File Formats File System Automount Point
sys-devi...y-ttyAMA0.device loaded active plugged   /sys/devices/dev:f1/tty/ttyAMA0
sys-devi...-net-eth0.device loaded active plugged   ec00
sys-devi...mmcblk0p1.device loaded active plugged   /sys/devices/platform/mmc_host/mmc0/mmc0:e624/block/mmcblk0/mmcblk0p1
sys-devi...mmcblk0p2.device loaded active plugged   /sys/devices/platform/mmc_host/mmc0/mmc0:e624/block/mmcblk0/mmcblk0p2
sys-devi...k-mmcblk0.device loaded active plugged   /sys/devices/platform/mmc_host/mmc0/mmc0:e624/block/mmcblk0
sys-devi...-net-ifb0.device loaded active plugged   /sys/devices/virtual/net/ifb0
sys-devi...-net-ifb1.device loaded active plugged   /sys/devices/virtual/net/ifb1
sys-devi...ttyprintk.device loaded active plugged   /sys/devices/virtual/tty/ttyprintk
sys-module-configfs.device  loaded active plugged   /sys/module/configfs
sys-subs...ices-eth0.device loaded active plugged   ec00
sys-subs...ices-ifb0.device loaded active plugged   /sys/subsystem/net/devices/ifb0
sys-subs...ices-ifb1.device loaded active plugged   /sys/subsystem/net/devices/ifb1
-.mount                     loaded active mounted   /
boot.mount                  loaded active mounted   /boot
dev-mqueue.mount            loaded active mounted   POSIX Message Queue File System
proc-sys...infmt_misc.mount loaded active mounted   Arbitrary Executable File Formats File System
sys-kernel-config.mount     loaded active mounted   Configuration File System
sys-kernel-debug.mount      loaded active mounted   Debug File System
tmp.mount                   loaded active mounted   Temporary Directory
systemd-...ord-console.path loaded active waiting   Dispatch Password Requests to Console Directory Watch
systemd-...ssword-wall.path loaded active waiting   Forward Password Requests to Wall Directory Watch
crond.service               loaded failed failed    LEGACY unit for "crond" rc script
cronie.service              loaded active running   Periodic Command Scheduler
dbus.service                loaded active running   D-Bus System Message Bus
dhcpcd@eth0.service         loaded active running   dhcpcd on eth0
getty@tty1.service          loaded active running   Getty on tty1
hwclock.service             loaded active exited    LEGACY unit for "hwclock" rc script
net-auto-wired.service      loaded active running   Provides automatic netcfg wired connection
network.service             loaded active exited    LEGACY unit for "network" rc script
nmbd.service                loaded active running   Samba NetBIOS name server
openntpd.service            loaded active running   OpenNTP Daemon
rc-local.service            loaded active exited    /etc/rc.local Compatibility
smbd.service                loaded active running   Samba SMB/CIFS server
sshd.service                loaded active running   OpenSSH Daemon
syslog-ng.service           loaded active running   System Logger Daemon
systemd-journald.service    loaded active running   Journal Service
systemd-logind.service      loaded active running   Login Service
systemd-remount-fs.service  loaded active exited    Remount Root and Kernel File Systems
systemd-sysctl.service      loaded active exited    Apply Kernel Variables
systemd-...es-setup.service loaded active exited    Recreate Volatile Files and Directories
systemd-...-trigger.service loaded active exited    udev Coldplug all Devices
systemd-udevd.service       loaded active running   udev Kernel Device Manager
systemd-...sessions.service loaded active exited    Permit User Sessions
systemd-...le-setup.service loaded active exited    Setup Virtual Console
dbus.socket                 loaded active running   D-Bus System Message Bus Socket
syslog.socket               loaded active running   Syslog Socket
systemd-initctl.socket      loaded active listening /dev/initctl Compatibility Named Pipe
systemd-journald.socket     loaded active running   Journal Socket
systemd-shutdownd.socket    loaded active listening Delayed Shutdown Socket
systemd-...d-control.socket loaded active listening udev Control Socket
systemd-udevd-kernel.socket loaded active running   udev Kernel Socket
arch-daemons.target         loaded active active    Arch Daemons
basic.target                loaded active active    Basic System
cryptsetup.target           loaded active active    Encrypted Volumes
getty.target                loaded active active    Login Prompts
graphical.target            loaded active active    Graphical Interface
local-fs-pre.target         loaded active active    Local File Systems (Pre)
local-fs.target             loaded active active    Local File Systems
multi-user.target           loaded active active    Multi-User
network.target              loaded active active    Network
remote-fs.target            loaded active active    Remote File Systems
sockets.target              loaded active active    Sockets
swap.target                 loaded active active    Swap
sysinit.target              loaded active active    System Initialization
syslog.target               loaded active active    Syslog
systemd-...iles-clean.timer loaded active waiting   Daily Cleanup of Temporary Directories

LOAD   = Reflects whether the unit definition was properly loaded.
ACTIVE = The high-level unit activation state, i.e. generalization of SUB.
SUB    = The low-level unit activation state, values depend on unit type.

67 loaded units listed. Pass --all to see loaded but inactive units, too.
To show all installed unit files use 'systemctl list-unit-files'.
[greg@pi ~]$ 
```

有趣的是，我尝试禁用 dhcpcd 服务，正如 Martin 在下面的评论中建议的那样，在确认它被禁用并重新启动后，我没有看到任何变化，ping 覆盆子显示来自 192.168.1.3 的响应不同但`ip route show`产生了相同的结果。然后我尝试禁用`net-auto-wired`服务。我重新启动了覆盆子，然后我认为我无法访问设备（通过 ssh 无头），因为我没有重新启用 dhcpcd 服务。有趣的是我没有，我的 IP 地址现在是 192.168.1.20。

dhcpcd 服务目前没有运行：

```
[greg@pi log]$ systemctl | grep -i dhcp
[greg@pi log]$ 
```

因此，这告诉我必须有其他一些我还不知道的 dhcp 机制。

查看 systemctl 并寻找 eth0：

```
[greg@pi log]$ systemctl -a --full | grep -i eth
sys-devices-platform-bcm2708_usb-usb1-1\x2d1-1\x2d1.1-1\x2d1.1:1.0-net-eth0.device loaded active   plugged   ec00
sys-subsystem-net-devices-eth0.device                                              loaded active   plugged   ec00
LOAD   = Reflects whether the unit definition was properly loaded.
[greg@pi log]$ 
```

我还不确定上述 2 项服务是什么，但它们可能与问题有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T23:02:21.727

答案

> a) 这实际上是如何工作的

是[IP 地址别名](https://wiki.archlinux.org/index.php/Network_Configuration#IP_address_aliasing)。来自 Arch 维基：

> > > IP 别名是向网络接口添加多个 IP 地址的过程。这样，网络上的一个节点可以与网络有多个连接，每个连接都有不同的用途。

现在来回答

> b) 如何解决

`192.168.1.3`看起来te是你要使用的ip并且你希望它是静态的，这意味着这`192.168.1.20`是dhcpcd获得的ip，这也是根据你的`/etc/systemd/system/multi-user.target.wants`文件夹内容启动的服务。因此，通过禁用此服务，问题应该会消失。您可以运行（以 root 身份）

```
systemctl disable dhcpcd@eth0.service 
```

或者

```
rm /etc/systemd/system/multi-user.target.wants/dhcpcd@eth0.service 
```

现在，如果您想使用 USB 加密狗，我建议您放弃`net-auto-wired`（以类似方式删除服务）并使用，`wicd`或者`networkmanager`，两者都可以配置为使用静态 ip，并在第一个不存在时默认使用另一个接口。而且它们更容易设置。

最后，简单地使用 dhcp 为您的接口获取 IP 并配置您的路由器或调制解调器以根据 MA​​C 地址分配固定 IP 并不是一个坏主意。

# python - django：一种在管理员中为查询集过滤器获取模型实例的方法？

> ID：14449770
> 
> 赞同：0
> 
> 时间：2013-01-22T00:43:51.300
> 
> 标签：python, django

所以，我有两个模型，一个持有对另一个的外键引用：

```
Model1:
 blah = models.ForeignKey(Model2) 
```

我还有以下 Model2 管理员：

```
model2admin(models.ModelAdmin)
  inline = [model1inline]

model1admin(admin.TabularLine):
  def queryset(self, request):
    qs = super(model2admin, self).queryset(request)
    return qs.filter(...) 
```

我正在尝试过滤 model1admin 中的查询集以查找 model2 的实例（这对我来说很有意义，因为当您单击管理页面上的一项时，它将是单个模型实例）。那我该怎么做呢？在文档中，我只看到一些可以将 obj 作为参数的函数，但我认为这些函数只能“可调用”用于显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:27:08.423

没关系，显然，当您有一个内联模型管理员时，这些模型的查询集会自动缩减为仅与另一个模型匹配的那些（没有看到这个记录，但我通常只是浏览并 ctrl f 一切）

# java - 多个登录页面 Spring

> ID：14449772
> 
> 赞同：1
> 
> 时间：2013-01-22T00:44:02.347
> 
> 标签：java, spring, tomcat, spring-mvc, spring-security

我一直在寻找最好的方法来做到这一点，但还没有找到答案。

所以总的来说，使用spring mvc + spring security拥有多个登录页面（不仅是表单，还有控制器访问）的最佳方式是什么。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:41:02.017

您需要在配置文件中设置两个 http 元素。并在其中设置 url 模式。

[这个](https://stackoverflow.com/questions/8306063/multiple-login-forms-different-authentication-managers-latest-spring-security)答案可能会有所帮助。

# java - Sams 在 24 小时内自学 Java 第六版 Rogers Cadenhead MP3 第 20 章 MP3 文件错误

> ID：14449773
> 
> 赞同：2
> 
> 时间：2013-01-22T00:44:04.677
> 
> 标签：java, file-io, arguments, runtime-error, filenotfoundexception

我是一名 java 新手，试图通过这篇文章标题中列出的书。这也是我在堆栈溢出上发布的第一个问题。这本书似乎没有论坛，所以我决定在这里问。

我在第 20 章：用 Java 24 小时读取和写入文件，并且已经进入了 ID3Reader.java 项目。我正在使用 Netbeans 7 创建这个项目。该代码应该分析一个 MP3 文件（我已经使用绝对路径进行了论证）并跳过除了最后 128 个字节之外的所有内容。然后，检查剩余字节以查看它们是否包含任何 ID3 数据。如果有，前三个字节是数字 84、65、71。然后它会按降序显示标题、艺术家、专辑和年份。

```
import java.io.*;

public class ID3Reader {
public static void main(String[] arguments) {
    try {
        File song = new File(arguments[0]);
        FileInputStream file = new FileInputStream(song);
        int size = (int) song.length();
        file.skip(size - 128);
        byte[] last128 = new byte[128];
        file.read(last128);
        String id3 = new String(last128);
        String tag = id3.substring(0, 3);
        if (tag.equals("TAG")) {
            System.out.println("Title: " + id3.substring(3, 32));
            System.out.println("Artist: " + id3.substring(33, 62));
            System.out.println("Album: " + id3.substring(63, 91));
            System.out.println("Year: " + id3.substring(93, 97));
        } else {
            System.out.println(arguments[0] + " does not contain"
                + " ID3 info.");
        }
        file.close();
    } catch (Exception e) {
        System.out.println("Error — " + e.toString());
    }
    } 
```

我再次将参数设置为 MP3 文件的确切位置，甚至从本书的网站上获得了代码。

```
C:\Documents and Settings\Administrator\My Documents\NetBeansProjects\Java24\Where The Moon Came From - Moonbrows (Twin Of Pangaea). 
```

但相反，我得到了这个错误。

```
Error — java.io.FileNotFoundException: C:\Documents (The system cannot find the file specified) 
```

我已经拔出头发试图找到可以帮助我解决这个问题的东西，但我似乎找不到任何可以转化为这个问题的东西。我非常感谢你能给我的任何信息。如果在您回答之前需要了解更多信息，请说出我会得到它的词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:46:27.587

“设置参数”时，您可能需要将路径放在引号之间；像这样：

```
java ID3Reader "C:\Documents and Settings\Administrator\My Documents\NetBeansProjects\Java24\Where The Moon Came From - Moonbrows (Twin Of Pangaea)." 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T00:46:31.567

```
C:\Documents and Settings\Administrator\My Documents\NetBeansProjects\Java24\Where The Moon Came From - Moonbrows (Twin Of Pangaea) 
```

你有那个文件吗？也许你最后忘记了`.mp3`，或者你一开始就没有文件。如果没有，请将路径更改为您的文件所在的位置，如下所示：

```
C:\Users\Somebody\Desktop\song.mp3 
```

此外，如果您想在路径中使用空格，则必须使用引号：

```
"C:\Path with spaces\More spaces\song_thing.mp3" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T00:46:44.423

在您的运行命令中将您的文件参数括在引号中，否则第一个字符串标记将用作`arguments[0]`，由命令外壳传入：

```
java ID3Reader  "C:\Documents and Settings\Administrator\My Documents\NetBeansProjects\Java24\Where The Moon Came From - Moonbrows (Twin Of Pangaea).mp3" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T00:46:51.693

如错误消息所示，文件名被解析为`C:\Documents`. 这是因为后面的空格`Documents`表示第一个参数的结束，第二个参数的开始。您需要将参数括在引号中，以便将其视为单个参数。

```
java ID3Reader "C:\Documents and Settings\..." 
```

# css - list-style-none + background-image = margin 不起作用？

> ID：14449776
> 
> 赞同：0
> 
> 时间：2013-01-22T00:44:14.893
> 
> 标签：css, list, styles, background-image, margin

我正在设计一个列表的样式，并且需要精确地设置边距以使其看起来不错。但是我对每个元素都使用`list-style-none`了一个，它似乎使该属性完全无用 Oo`background-image``<li>``margin`

好吧，没什么好说的，这里有一个例子：http: [//symael.servhome.org/buglist.html](http://symael.servhome.org/buglist.html)

问题很明显：页面上的每个内边距和边距都是相同的，`<ul>`但在“树”div 中有`<li>`元素的样式。它似乎激活了默认保证金或有点......

有人知道如何解决这个问题吗？目的是在顶部文件夹下方放置“+”或“-”...是的，就这么简单：p

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:46:02.563

这与保证金无关。s的填充`li`将其子项进一步向右推。您应该减少填充：

```
#tree li {
    padding-left: 18px;
}
#tree li a {
    padding-left: 20px;
} 
```

# php - 使用子选择器进行 Jquery

> ID：14449781
> 
> 赞同：0
> 
> 时间：2013-01-22T00:44:44.187
> 
> 标签：php, jquery

我有一个从 PHP 填充的 div 我正在尝试将 div 中的所有输入框绑定到变量，（我不希望使用序列化）如何使用 Jquery 选择每个输入框并将其绑定到变量，例如

```
var location_id = $('#Wednesday').find('input').nth-child(0);
var static_id  =$('#Wednesday').find('input').nth-child(1); 
```

那种性质的东西谢谢！

```
<div id='Wednesday' class='ui-widget-content ui-state-default' name='' value=''>  ";

echo "<input name='".$day."_".$locationid."_locationID' value='".$locationid."'  type='hidden'> ";
echo "<input name='".$day."_".$locationid."_static' value='".$static."'  type='hidden'> ";
echo "<input name='".$day."_".$locationid."_primary' value='".$first_always."' type='hidden'> ";
echo "<input name='".$day."_".$locationid."_all_locations' value='".$all_locations."' type='hidden'> ";

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:29:24.283

As a side note (since you already have your answer), any time I see input names of a form similar to what you have:

```
'name="' . $day . '_' . $location_id . '_locationID"' 
```

It screams out to me that this might be a case where you should be using array-style form inputs like this:

```
'name="locationID[' . $day . '][' . $location_id . ']"' 
```

That way in PHP, you already have a nice array built for you in `$_POST` and you don't need to `explode()` to build arrays out of all the input fields.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T00:51:36.693

```
var inputs = $('#Wednesday').find('input');

var location_id = inputs.eq(0).val();
var static_id  = inputs.eq(1).val(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T00:46:15.743

使用`.eq`而不是`.nth-child()`.

# ios - 尝试验证 iOS 应用程序时出错：iPhone/ipod info.plist：无法验证图标尺寸，未找到图标。您必须定义 CFBundleIcons

> ID：14449789
> 
> 赞同：1
> 
> 时间：2013-01-22T00:45:13.457
> 
> 标签：ios, xcode, validation

我知道其他人也遇到过这个问题。我已经尝试了一切，我想我忽略了一些简单的东西。我无法发布我的 info.plist 文件的屏幕截图，但所有图标文件都是大写的，并且所有 .png 文件名都与 -info.plist 文件中图标文件数组中的内容匹配。有人可以帮忙吗？

![http://i45.tinypic.com/amb15i.png](../Images/0ec1001e45b3cc8ebaf731f6e0d0fe51.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:04:24.770

查看有关图标文件的[Apple 文档和有关图标](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW1)[的 Mobile HIG](https://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)。

这是Apple的[这个旧链接中提到的内容：](http://developer.apple.com/library/ios/#qa/qa1686/_index.html)

![在此处输入图像描述](../Images/33592018623a1a52dea1d03b5f8d0638.png)

因此，请根据文档更正所有图标及其名称。基本上 57x57 图标标题将是`Icon.png`and for @2x, `Icon@2x.png`. 对于 72x72 图标，标题应为`Icon-72.png`. 同样更改其他标题。

这是[关于图标名称的博客](http://pinchmultimedia.com/blog/ios-5-icon-sizes-and-names-new-ipad)。

# jquery - 带有 Jquery ajax 的 PhpMailer 不起作用

> ID：14449792
> 
> 赞同：0
> 
> 时间：2013-01-22T00:45:30.083
> 
> 标签：jquery, ajax, phpmailer

我尝试使用 PhpMailer 和 jquery ajax 发送和自动邮件，但我没有让它工作。当我禁用 ajax 功能并正常发送表单时，邮件会正确发送，但是当我打开 ajax 功能时它不起作用。我认为他们的问题在于 $mail->AddAddress 因为如果我手动设置它：

```
$mail->AddAddress=("emailexample.com") 
```

发送邮件（即使使用 ajax）

但如果我像这样动态设置它：

```
$mail->AddAddress=($email) 
```

它在使用 ajax 时不起作用。

这是我的代码。

```
<form id="reserva" name="reserva" action="http://elsalvadorenelmundo.com/restaurantes/mail.php" method="post" >

                            <input type="hidden" id="date" name="date" />

                           <div style=" padding-top:15px;"> 

                            <select name="hora"  id="hora">

                                <option value=11>11</option>
                                <option value="12">12</option>

                            </select>

                            :

                            <select name="minuto" id="minuto">

                                <option value="00">00</option>
                                <option value="15">15</option>

                            </select>
                            <input type="hidden" name="mail" value="<?php echo $row['mail']; ?>" />

                            <input type="text" name="name" id="name" size="25" value="" class="text-input" />  

                            <input type="text" name="lname" id="lname" size="25" value="" class="text-input" />  
                           >

                            <input type="text" name="cel" id="cel" size="25" value="" class="text-input" />  

                            <input type="text" name="email" id="email" size="25" value="" class="text-input" />  

                            <div style="float:right;">
                            <input type="text" name="comensales" id="comensales" size="5" value="" maxlength="3" class="text-input" />  

                            <input type="hidden" id="nombre" name="date" value="<?php echo $row['tittle']; ?>" />

                       <div id="tester" title="Reservar"><button id="chooseDateBtnSidebar" type="submit" name="submit" class="submitBtn  big sidebarbutton boton"  ><span>Reservar</span></button></div>

                    </div>

                </form> 
```

jQuery：

```
 $("#submit").click(function() {  

  $('.error').hide();  
    var mail= $("input#mail").val(); 
    var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;

            if (mail == "") {  
              $("span#textfieldRequiredMsg").show();  
              return false; 
            }else if (!emailReg.test(mail)){  
              $("span#textfieldInvalidFormatMsg").show();  
              return false; 
            }

  })

  $('.error').hide();  
  $(".boton").click(function() {  
    // validate and process form here  
        $('.error').hide();  
            var date = $("input#date").val();  
            if (date == "") {  
              $("div#date_error").show();  
              return false; 
            } 
              var hora = $("select#hora").val();  
                if (hora == "") {  
              $("label#hora_error").show();  
              $("select#hora").focus();  
              return false;  
            }  
              var minuto = $("select#minuto").val();  
                if (minuto == "") {  
              $("label#hora_error").show();  
              $("select#hora").focus();  
              return false;  
            }  
            hora = hora + ":" + minuto;

              var name = $("input#name").val();  
                if (name == "") {  
              $("label#name_error").show();  
              $("input#name").focus();  
              return false;  
            }  
              var lname = $("input#lname").val();  
                if (lname == "") {  
              $("label#lname_error").show();  
              $("input#lname").focus();  
              return false;  
            }  
              var cel = $("input#cel").val();  
                if (cel == "") {  
              $("label#cel_error").show();  
              $("input#cel").focus();  
              return false;  
            }  
                var email = $("input#email").val();  
                if (email == "") {  
              $("label#email_error").show();  
              $("input#email").focus();  
              return false;  
            }   

                var comensales = $("input#comensales").val();  
                if (comensales == "") {  
              $("label#comensales_error").show();  
              $("input#comensales").focus();  
              return false;  
            }   
            var nombre= $("input#nombre").val();
            var mail= $("input#mail").val();

            var dataString = 'date='+ date + '&hora='+ hora + '&name='+ name + '&nombre='+ nombre + '&lname=' + lname + '&cel=' + cel + '&email=' + email  + '&mail=' + mail + '&comensales=' + comensales + '&submit=' + "submit"; 
        //  alert (dataString);return false;  

            $.ajax({  
              type: "POST",  
              url: "/restaurantes/mail.php",  
              data: dataString,  
              success: function() {  
                top.location.href = '#';
                $('#weekendReservation').html("<div class='tiempo'></div>");  
                $('.tiempo').html("<h3>Su reserva no ha sido procesada</h3>")  
                .append("<p>Lo sentimos pero tu reserva no ha podido ser procesada, el restaurante no posee mesas disponibles para la fecha que has seleccionado. Si tienes cualquier problema no dudes en contactarnos.</p> ")  

                .hide()  
                .fadeIn(5500, function() {  
                  $('#message').append("<img id='checkmark' src='images/check.png' />");  
                });  
              }  
            });  
            return false;  

    }); 
```

和 mail.php

```
<?php 
require_once("class.phpmailer.php");
require_once("class.smtp.php");
$email= $_POST['mail'];
var_dump($_POST);
if(isset($_POST['submit'])){
    //Datos de la persona
    $msj= "<strong>Nombre:</strong> ";
    $msj.= $_POST['name'] . " " . $_POST['lname'];
    $msj.= "<br/> <strong>Telefono: </strong>";
    $msj.= $_POST['cel'];
    $msj.= "<br/> <strong>Email: </strong>";
    $msj.= $_POST['email'];
    //Datos de la reserva
    $msj.= "<br/><br/> <strong>Datos de la Reservaci&oacute;n</strong><br/>";
    $msj.= "<strong>Fecha:</strong> ";
    $msj.= $_POST['date'];
    $msj.= "<br/><strong>Hora: </strong>";
    $msj.= $_POST['hora'];
    $msj.= "<br/><strong>N&deg; de personas: </strong>";
    $msj.= $_POST['comensales'];
    $msj.= "<br/><br/> <strong>Restaurante: </strong>";
    $msj.= $_POST['nombre'];
    // PHPMailer's Object-oriented approach
    $mail = new PHPMailer();

// Can use SMTP
// comment out this section and it will use PHP mail() instead
$mail->IsSMTP();
$mail->SMTPSecure = "ssl";
$mail->Host = "x.x.x";
$mail->SMTPDebug = 2;
$mail->SMTPAuth = true;
$mail->Port = 465;
$mail->IsHTML(true);
$mail->Username = "xxxxxxxxx";
$mail->Password = "xxxxxxxxx";

    // Could assign strings directly to these, I only used the 
    // former variables to illustrate how similar the two approaches are.
    $mail->FromName = "El Salvador en el Mundo";
    $mail->From     = "mail@mail.com";
    $mail->AddAddress($email);
    $mail->AddAddress("mail@mail.com");

    $mail->Subject  = "Reservaci&oacute;n para ". $_POST['name']. " " . $_POST['lname']. " ({$_POST['comensales']} personas)";
    $mail->Body     = $msj;

    $result = $mail->Send();

} 
```

?>

我不明白，但是当我关闭 ajax 功能时，它工作得很好。我需要帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:49:15.940

更改`$email= $_POST['mail'];`为`$email = $_POST['email'];`

如果这不是问题，那么请确保`dataString`作为 ajax 请求的一部分包含您需要的所有参数（例如两者`mail`和`email`）。

# center - CSS 居中边距：0 自动；问题

> ID：14449793
> 
> 赞同：0
> 
> 时间：2013-01-22T00:45:31.580
> 
> 标签：center, margin

抱歉，如果之前有人问过这个问题，但我阅读并没有看到我的错误。我尝试将 #wrapper 与 margin:0 auto 居中；但没有任何反应......宽度也已设置。

这是 CSS：我希望孔页居中

```
@charset "utf-8";
body {
    margin-left:0px;
    margin-top:0px;
    margin-right:0px;
    margin-bottom:0px;
    padding:0;
    background-color:#000000;
    text-align:center

}
#wrapper {
    width: 901px;
    ***margin: 0 auto;***
}
#header {
    background-image: url(images/banner.jpg);
    background-repeat: no-repeat;
    float: left;
    height: 233px;
    width: 901px;
}
#menu {
    font-family: Arial, Helvetica, sans-serif;
    background-image: url(images/menu.gif);
    background-repeat: no-repeat;
    text-align: center;
    word-spacing: 70px;
    padding-top: 17px;
    float: left;
    height: 33px;
    width: 901px;
}
#main {
    float:left;
    height:auto;
    width:901px;
}
#leftcol {
    float:left;
    height:auto;
    width:300px;
    padding-top:5px;
    padding-right:0px;
    padding-bottom:0px;
    padding-left:30px;
}
#rightcol {
    float:right;
    height:auto;
    width:500px;
    padding-right:35px;
    margin-right:0px;
}
#footer {
    font-family:Arial, Helvetica, sans-serif;
    font-size:x-small;
    float:left;
    height:250px;
    width:900px;
    color:#666666;
    clear:both
} 
```

还有html：

这是基本的html文件

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link href="style.css" rel="stylesheet" type="text/css" />

</head>

<body>
<div id="wrapper">Content for  id "wrapper" Goes Here</div>
<div id="header">Content for  id "header" Goes Here</div>
<div id="menu">Content for  id "menu" Goes Here</div>
<div id="main">
  <div id="leftcol">Content for  id "main" Goes Here</div>
  <div id="rightcol">Content for  id "rightcol" Goes Here</div>
  <div id="footer">Content for  id "footer" Goes Here</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:47:21.873

你需要给 body （你的元素的父元素）一个宽度：

```
html, body{
    width:100%;
} 
```

此外，考虑到您的标记，如果您希望整个站点居中，您应该使用 your`#wrapper`作为实际的包装器，这意味着它应该包括其他内容节点：

```
<body>
<div id="wrapper">
    <div id="header">Content for  id "header" Goes Here</div>
    <div id="menu">Content for  id "menu" Goes Here</div>
    <div id="main">
        <div id="leftcol">Content for  id "leftcol" Goes Here</div>
        <div id="rightcol">Content for  id "rightcol" Goes Here</div>
        <div id="footer">Content for  id "footer" Goes Here</div>
    </div>
</div>
</body> 
```

# asp.net - HttpContext.Current.ApplicationInstance.Application 与 HttpContext.Current.Application

> ID：14449794
> 
> 赞同：3
> 
> 时间：2013-01-22T00:45:39.457
> 
> 标签：asp.net, httpapplication, httpapplicationstate

如果我想存储一些对象以跨页面和会话共享，我应该使用哪一个？

`HttpContext.Current.ApplicationInstance.Application`或`HttpContext.Current.Application`。

我正在使用`HttpContext.Current.Application`，但只是在两者之间感到困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T00:54:36.480

他们都指的是同一个东西，`HttpApplicationState`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-10T18:07:31.290

`Application`并且`ApplicationInstance.Application`是同一个 HttpApplicationState 对象的两个版本。

从[HttpApplicationState](https://msdn.microsoft.com/en-us/library/system.web.httpapplicationstate(v=vs.110).aspx)参考：

> 当客户端第一次从特定的 ASP.NET 应用程序虚拟目录中请求任何 URL 资源时，将创建 HttpApplicationState 类的单个实例。为 Web 服务器上的每个 ASP.NET 应用程序创建一个单独的实例。然后通过内部应用程序对象公开对每个实例的引用。

总结一下：

*   `Application`对象对于 Web 服务器是全局的。
*   `ApplicationInstance.Application`对象是请求引用的应用程序的本地对象。（例如站点或虚拟目录应用程序）

这在这篇[博](http://debugguru.blogspot.com/2013/01/application-vs-applicationinstance.html)文中有进一步的解释。

# mysql - Mysql 选择如果有的话

> ID：14449798
> 
> 赞同：0
> 
> 时间：2013-01-22T00:45:59.010
> 
> 标签：mysql

现在我有一些疑问，比如

> SELECT * FROM table WHERE row='$row_value'

我应该在 $row_value 中输入什么来显示所有条目？（我不能删除那部分“WHERE row='$row_value'”）。有可能做我想做的事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T01:18:53.873

尝试像这样措辞你的 where 子句：

```
where ('$row_value' = 'specialvalue' or (row = '$row_value')) 
```

这将允许您设置一次值以返回所有内容或仅返回一次比较的结果。特殊值可以为空：

```
where ('$row_value' = '' or (row = '$row_value')) 
```

# sql-server - 使用 charindex 定位撇号

> ID：14449799
> 
> 赞同：0
> 
> 时间：2013-01-22T00:45:59.610
> 
> 标签：sql-server, substring, where, locate

我有这样的数据：

```
State   ID
-----   --
'CA'    5
'CA'    3
'MA'    2
'NH'    1
'NJ'    8
'NH'    9 
```

对于所有州，它都在州周围加上撇号。

我希望以某种方式通过州缩写进行搜索，但它不会让我这样搜索：

```
where state=''CA'' 
```

...因为它在每个撇号后面加上一个撇号。

我也试过这个：

```
substring(state,charindex(''',state)+1),
    charindex(''',state)-charindex(''',state),+1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:54:37.093

尝试这个。我相信这就是你想要的......

```
Where state like '''CA''%' 
```

这样做更好，因为您可以使用索引。如果您对列应用函数，则它必须对整个表应用该函数。

# c++ - C++ 头文件需要引用另一个类的函数

> ID：14449802
> 
> 赞同：0
> 
> 时间：2013-01-22T00:46:06.850
> 
> 标签：c++, polymorphism, header-files

我现在已经将多态性与单个子类结合起来。如以下代码所示，其中两个函数 Draw() 和 SetValue(int,int,int) 导致链接器错误。

```
 #include "Header.h"

 class Object{
int tag;
 public:
void SetValues(int,int,int);
void Draw();
int getTag(){
    return tag;
}
 };
class Square: public Object{
int red;
int green;
int blue;
void Draw();
void SetValues(int red2,int green2, int blue2){
red=red2;
green=green2;
blue=blue2;
}
};
void Square::Draw(){
 // Draws a square with a gradient color at coordinates 0, 10
  glBegin(GL_QUADS);
  {
glColor3f(red, green, blue);
glVertex2i(1, 11);
glColor3f(red * .8, green * .8, blue * .8);
glVertex2i(-1, 11);
glColor3f(red * .5, green * .5, blue * .5);
glVertex2i(-1, 9);
glColor3f(red * .8, green * .8, blue * .8);
glVertex2i(1, 9);
  }
  glEnd();
} 
```

错误

```
Error   1   error LNK2019: unresolved external symbol "public: void __cdecl Object::SetValues(int,int,int)" (?SetValues@Object@@QEAAXHHH@Z) referenced in function "public: void __cdecl State::DrawAll(void)" (?DrawAll@State@@QEAAXXZ)    C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\State.obj    Procedural Terrain
Error   2   error LNK2019: unresolved external symbol "public: void __cdecl Object::Draw(void)" (?Draw@Object@@QEAAXXZ) referenced in function "public: void __cdecl State::DrawAll(void)" (?DrawAll@State@@QEAAXXZ)    C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\State.obj    Procedural Terrain 
```

在一个较大的类中，它不继承 Object 的函数，使用 DrawAll() 并在其中调用 Draw()。cpp文件和各自的两个头文件如下。

```
#include "Header.h"
#include "Object.h" 
float rotate_z=0;
class State{
private:
std::vector<Object> storage;
public:
State();
State Interpolate(State, State, double);
void Integrate(State,double, const double);
void DrawAll();
void AddObject(Object);
void RemoveObject(int);
};
State::State(){

}
State State::Interpolate(State current,State previous,const double alpha){
//current*alpha + previous * ( 1.0 - alpha );
return current;
}
void State::Integrate(State current, double t, const double dt){
}
void State::AddObject(Object object){
storage.push_back(object);
}
void State::RemoveObject(int tag){
//for(int i=0;i<storage.size;i++){
//  if(storage.at(i).getTag==tag){
//storage.erase(storage.begin()+i);
//  }
//}
}
void State::DrawAll(void)
{
  // reset view matrix
  glLoadIdentity();
// move view back a bit
glTranslatef(0, 0, -30);
// apply the current rotation

glRotatef(rotate_z, 0, 0, 1);
rotate_z += 5;
// by repeatedly rotating the view matrix during drawing, the
// squares end up in a circle
int i = 0, squares = 15;
float red = 0, blue = 1;
for (; i < squares; ++i){
  Square square;
Object * squareP=&square;
glRotatef(360.0/squares, 0, 0, 1);
// colors change for each square
red += 1.0/12;
blue -= 1.0/12;
squareP->SetValues(red,0.6,blue);
squareP->Draw();
  }
} 
```

对象标题 -

```
#ifndef Object_H
#define Object_H

class Object{
int tag;

public:
void SetValues(int,int,int);
void Draw();
int getTag();
};
class Square: public Object{
int red;
int green;
int blue;
void Draw();
void SetValues(int red2,int green2, int blue2);
};
#endif 
```

最后是状态标题 -

```
#ifndef State_H
#define State_H

#include "Object.h"
#include <vector>
class State{
private:
std::vector<Object> storage;
public:
State();
State Interpolate(State, State, double);
void Integrate(State,double, const double);
void DrawAll();
void AddObject(Object);
void RemoveObject(int);
};
#endif 
```

这是我从事的第一个 C++ 项目，但尚未完全从 Java 背景转移。问题可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:52:37.423

没有任何内容被标记为`virtual`，并且我看不到 Object::Draw() 或 Object::SetValues() 的任何实现。

In C++ to allow a subclass to override a function in the base class, it needs to be marked as `virtual` (in Java everything is always "virtual").

You can have "abstract" methods (like Java) by saying

```
class Object {
    public:
        virtual void SetValues(int,int,int) = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T00:53:05.087

Your `Object` class has no implementation of `SetValues` function. You may want a pure virtual function. Same for `Draw`.

```
class Object {
    virtual void SetValues(int,int,int) = 0;
} 
```

Also note that in C++ functions are not virtual by default. You have to use the `virtual` keyword explicitly in the base class.

Also `class Object` seems to be defined at multiple places. Why? Defining it in Object.h would be sufficient.

Also **please indent** your code because it is very hard to read.

Also `std::vector<Object>` will not do what you want! Unline Java, where everything is a reference, in C++ things are stored by value in an `std::vector` and therefore your code is subject to the slicing problem. You want to use at lease a pointer there (`std::vector<Object*>`) but a smart pointer would be even better (`std::vector<std::shared_ptr<Object>>`)

# android - Android FrameLayout 不同行为 API 10 和 11

> ID：14449804
> 
> 赞同：2
> 
> 时间：2013-01-22T00:46:16.337
> 
> 标签：android, api, android-framelayout, multiple-versions

我设计了一个带有 FrameLayout 作为 ImageView 和 TextView 的父级的视图，当在 API <10 的设备上进行测试时，我意识到 FrameLayout 高度不符合 fill_parent 规则（每个组件都被覆盖）

尽管如此，在 Android 4.x 上它似乎运行良好。

有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-27T08:32:23.130

我有类似的问题，在 v2.x 和 4.x 的 FrameLayout 下，边距被忽略在这里找到答案： [FrameLayout margin not working](https://stackoverflow.com/questions/5401952/framelayout-margin-not-working)

简而言之：android:layout_gravity="top"

# c++ - DirectX/C++ 如何取消引用向量数据数组以初始化 D3D11 子资源数据

> ID：14449812
> 
> 赞同：0
> 
> 时间：2013-01-22T00:46:48.143
> 
> 标签：c++, c++11, directx, directx-11

我正在尝试将指向顶点数据数组（基类成员）的指针传递到用于初始化 Direct3D 顶点缓冲区（ID3D11Buffer）的方法中。

我想使用变量“v4”，指向数组的指针，但我认为我没有正确取消引用指针。有人能指出我正确的方向吗？

我已经尝试了很多方法来完成这个任务，但我只能得到一个基本的数组工作，（有时我最终会转换为“const void *”错误）。

我将如何使用指针？

我遇到的问题是... vertexSubResourceData.pSysMem = v1;

（ps 使用 VS C++ Nov 2012 CTP 编译器.. 尚未发布..）

***已回答：已确认这是 Visual Studio 2012 C++ Nov. CTP Compiler Bug。即使在类之外，使用 C++ 11 初始化语法声明的 Vector 结构数组也被错误地解释（当然，除非我使用了不正确的数组初始化语法）。另请注意：这仅适用于与指针关联的初始化列表。***

谢谢！

// 简化代码

```
void Triangle::InitializeVertexBuffer()
{
    struct V
    {
        float X, Y, Z;    // vertex position
    };

    // Compiles But doesn't work as desired.
    // changed from V* v4 = new V[] // Compiled without range.
    // Pointer to this data would ideally come from base static pointer, or file.
    V* v4 = new V[3]     
    {
        { 0.50f, 0.5f, 0.0f },
        { 0.50f, -0.5f, 0.0f },
        { -0.50f, -0.5f, 0.0f },
    };

    // Compiles and Works to prove compiler issue with initialization lists. 
    V* vectorList = new V[3];
    vectorList[0].X = 0.5f;
    vectorList[0].Y = 0.5f;
    vectorList[0].Z = 0.00f;

    vectorList[1].X = 0.5f;
    vectorList[1].Y = -0.5f;
    vectorList[1].Z = 0.00f;

    vectorList[2].X = -0.5f;
    vectorList[2].Y = -0.5f;
    vectorList[2].Z = 0.00f;

    unsigned int size = sizeof(V) * 3; //sizeof(* Model::Vertices);

    // The Description of the Vertex Buffer
    D3D11_BUFFER_DESC vertexBufferDescription = {0};
    vertexBufferDescription.ByteWidth = size;
    vertexBufferDescription.BindFlags = D3D11_BIND_VERTEX_BUFFER; 

    // Model Data to be transferred to GPU Buffer.

    D3D11_SUBRESOURCE_DATA vertexSubResourceData = {0};
    vertexSubResourceData.SysMemPitch = 0;
    vertexSubResourceData.SysMemSlicePitch = 0;

    // Can't figure out how to dereference v4

    vertexSubResourceData.pSysMem = vectorList; // works, but using "v4" doesn't.

    // vertexSubResourceData.pSysMem = Model::Vertices; 
    // This is what I /really/ want .. Pointer to vertice array data from base class

    NS::DeviceManager::Device->CreateBuffer(
        &vertexBufferDescription, 
        &vertexSubResourceData, 
        &NS::ModelRenderer::VertexBuffer);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:17:32.720

当您编写`V* v4 = new V[]{...};`它时，它是非法的 C++。CTP 编译器正在接受格式错误的代码。尝试`V* v4 = new V[3]{...};`

从 5.3.4p1 检查 C++ 标准：

> [ 表达式 ] 属性说明符-seqopt

因此*，*在`[]`. 我相信`new V[]`是编译器的扩展（仍在检查）。

正如 ildjarn 指出的那样，您想要`vertexSubResourceData.pSysMem = v4;`给`&4`您指针的地址，而不是数组。

**更新**

我认为这是编译器中的一个错误。尝试旧的 C++03 语法：`V* v4 = new V[3]; v4[0] = ...;`如果可行，那么它肯定是一个错误。

# python - 用于 python 桌面应用程序的轻量级 HTTP 服务器

> ID：14449814
> 
> 赞同：2
> 
> 时间：2013-01-22T00:47:14.300
> 
> 标签：python, webserver

我目前正在开发一个桌面应用程序，其中一对应用程序必须使用 HTTP 相互通信，这意味着两者都将同时作为客户端/服务器服务器。对于这样的桌面应用程序，什么 python 网络服务器就足够了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T00:52:54.107

您并没有真正向我们提供太多信息，但根据您的用例[SimpleHTTPServer](http://docs.python.org/2/library/simplehttpserver.html)可能就足够了。它在标准库中，很方便。

还有[Bottle](http://bottlepy.org/docs/dev/)，[Flask](http://flask.pocoo.org/)，[web.py](http://webpy.org/) ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:24:51.283

I think you are looking at a bi-directional HTTP communication.

You can get many resources over it. HTML5 websocket, my favourite.

Check [this resource](https://datatracker.ietf.org/doc/html/draft-loreto-http-bidirectional-00) or BOSH.

Hope this helps.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T03:39:29.127

我有一个示例 HTTP 服务器，您可以在此处找到它。

[http://snipplr.com/view/57745/python-web-server/](http://snipplr.com/view/57745/python-web-server/)

# javascript - Typescript - 使用 Frame.js 的同步 ajax 调用（解决方案：JQueryDeferred）

> ID：14449816
> 
> 赞同：2
> 
> 时间：2013-01-22T00:47:25.310
> 
> 标签：javascript, typescript, framejs

这个问题与打字稿并不完全相关，但如果没有上下文，就不清楚为什么我什至需要这种行为。应该相对直接地了解您是否了解 Typescript。

我在 Typescript 中有一个对话框类实现，看起来像这样（仅显示相关的方法和字段）：

```
class BaseDialog{
     ...
     public dialogEl: JQuery;

     public AjaxLoadContent(route: string) { 
        if (this.dialogEl !== undefined)
           this.dialogEl.load(route);
        return this;
    }

    public HtmlLoadContent(html: string) { 
        if (this.dialogEl !== undefined)
           this.dialogEl.empty().html(html);
        return this;
    }

    public Show() { 
        if (this.dialogEl !== undefined)
            this.dialogEl.dialog("open");
    }
    ...
} 
```

我正在返回`this`，以便可以按如下方式链接对 Show() 的调用`AjaxLoadContent()`：`HtmlLoadContent()`

```
var dialog = new BaseDialog();
dialog.AjaxLoadContent("/Account/Login").Show();  //Ajax call
dialog.HtmlLoadContent(someHtml).Show();          //Load from variable, no ajax call 
```

我发现这种链接语法非常干净且合乎逻辑，因此我想坚持使用它，但是，在 ajax 场景中，`Show()`在 ajax 完成之前被调用，`load()`因此对话框打开，然后在内容出现之前会有延迟。我无法提供回调，`load()`因为我想显式链接`Show()`到调用而不是在内部调用它......因此，我需要某种同步机制。

我现在正在研究 Frame.js 来完成这种“同步”风格，而不用像`$.ajaxSetup({async: false;})`. 这是我希望能起作用的答案：[https ://stackoverflow.com/a/10365952](https://stackoverflow.com/a/10365952)

但是，以下代码仍然存在延迟：

```
 public AjaxLoadContent(route: string) { 
        if (this.dialogEl !== undefined){
             var that = this;
             Frame(function (next) { 
                 $.get(route, next);
             });
             Frame(function (next, response) { 
                 that.dialogEl.html(response);   //Breakpoint 1
             });
             Frame.init();
             return this;                            //Breakpoint 2
        }    
    } 
```

然而，这似乎不起作用，因为尽管我已经定义了明确的控制流，但断点 2 首先被击中。`Show()`调用之后立即发生（因此`return this`加载一个空白对话框），然后最终`that.jQueryDialog.html(response)`从第二个 Frame 调用，在对话框已经显示后加载内容（因此仍然存在延迟）。

我怎样才能完成这种同步行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T03:07:02.063

这正是（IMO）[JQueryDeferred](http://api.jquery.com/category/deferred-object/)的用途。您可以将其用于所有这些，而无需在 Frame.js 上添加另一个依赖项。最简单的方法是从每个 Async 方法返回一个 JQueryPromise，如下所示：

```
///<reference path="./jquery.d.ts">

class BaseDialog{

     public dialogEl: JQuery;

     public AjaxLoadContent(route: string):JQueryPromise { 
            var deferred = $.Deferred();
            if (this.dialogEl !== undefined)
                this.dialogEl.load(route)
                    .done(() => deferred.resolve())
                    .fail(() => deferred.reject());

        return deferred.promise();
    }

    public HtmlLoadContent(html: string):void { 
        if (this.dialogEl !== undefined) {
            this.dialogEl.empty().html(html);
    }

    public Show():void { 
        if (this.dialogEl !== undefined)
            this.dialogEl.dialog("open");
    }
} 

var dialog = new BaseDialog();
dialog.AjaxLoadContent("something")
    .done(() => dialog.Show()); 
```

这不是一个干净的接口，但另一种方法是进行一些非常聪明的编码，您的类将每个 Deferred 扔到 FIFO 队列中，并且每个后续方法在开始执行之前等待队列中的前一个 Deferred。当然有可能，如果您正在设计此 API 以供大量外部使用，那么可能值得这样做。但是如果你只是打算将它用于一些内部项目，对我来说这听起来像是太多的工作和维护。（当然只是我的意见 ：-）。

（您提出的接口的其他问题：（1）它没有任何处理错误的方法，类似于`JQueryDeferred.fail()`处理程序；和（2）它没有任何方法在对您的类的调用之间进行任何外部处理. 如果您想在调用`Show()`方法之前对内容进行转换怎么办？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:30:14.203

“但是，尽管有明确的控制流程，但这似乎不起作用，因为断点 2 首先被击中”

实际上，流控制的工作方式与您编写的完全一样。只有 Frame 函数内部的东西会被 Frame 控制。您不能在回调中使用 return 语句并期望它们返回调用函数。

Ken 的回答是正确的，即使用 jQuery Deferred 将实现与 Frame 在上述示例中相同的目标。Frame 专为比您创建的序列长得多的序列而设计。两者的行为方式相同，主要区别在于语法。

老实说，我认为您遇到的延迟是进行 AJAX 调用所需的时间。也许我不理解您的问题，但 Frame 部分看起来正确。以下是一些注意事项：

```
public AjaxLoadContent(route: string) { 
    if (this.dialogEl !== undefined){
         var that = this;
         Frame(function (next) { 
             $.get(route, next); // great!
         });
         Frame(function (next, response) { // good use of passing variables!
             that.dialogEl.html(response); // yep, will happen synchronously!
             // return that; // unfortunately, this would only return 'that'
                             // to Frame, not to AjaxLoadContent.
                             // It's not possible to return the calling function
                             // from inside a callback.
             next(); // the callback should be called here
                     // to complete the Frame sequence.
         });
         Frame.init();
         return this; // notice that the return statement here is not in Frame?
    }    
} 
```

# c# - 重复单元测试可以吗？

> ID：14449817
> 
> 赞同：2
> 
> 时间：2013-01-22T00:47:41.327
> 
> 标签：c#, unit-testing

我有以下课程

```
public interface IAuthProvider
{
    string GenerateKey();
}

public class AuthProvider : IAuthProvider
{
    public string GenerateKey()
    {
        using (var rng = new RNGCryptoServiceProvider())
        {
            var data = new byte[16];
            rng.GetBytes(data);
            return BitConverter.ToString(data).Replace("-","");
        }
    }
} 
```

我也有以下单元测试来配合它

```
[TestClass]
public class AuthProviderTests
{
    private AuthProvider _provider;
    private string _key;

    [TestInitialize]
    public void Initialize()
    {
        _provider = new AuthProvider();
        _key = _provider.GenerateKey();
    }

    [TestMethod]
    public void GenerateKey_key_length_is_32_characters()
    {
        Assert.AreEqual(32, _key.Length);
    }

    [TestMethod]
    public void GenerateKey_key_is_valid_uppercase_hexidecimal_string()
    {
        Assert.IsTrue(_key.All(c =>
            (c >= '0' && c <= '9') || 
            (c >= 'A' && c <= 'F')
        ));
    }

    [TestMethod]
    public void GenerateKey_keys_are_random()
    {
        var keys = new List<string>
            {
                _provider.GenerateKey(),
                _provider.GenerateKey(),
                _provider.GenerateKey(),
                _provider.GenerateKey(),
                _provider.GenerateKey()
            };

        var distinctCount = keys.Distinct().Count();

        Assert.AreEqual(5, distinctCount);
    }
} 
```

一切都很好。但是，我需要创建一个名为 GenerateSecret 的方法（以及与之配套的测试）。此方法的作用与 GenerateKey() 完全相同。

现在我想我应该创建一个名为 GenerateRandomHexString(int bytes) 的方法并将代码从 GenerateKey 复制到其中。然后对于 GenerateKey 和 GenerateSecret 我应该使用以下代码：

```
public interface IAuthProvider
{
    string GenerateKey();
    string GenerateSecret();
    string GenerateRandomHexString(int bytes);
}

public class AuthProvider : IAuthProvider
{
    public string GenerateKey()
    {
        return GenerateRandomHexString(16);
    }

    public string GenerateSecret()
    {
        return GenerateRandomHexString(16);
    }

    public string GenerateRandomHexString(int bytes)
    {
        using (var rng = new RNGCryptoServiceProvider())
        {
            var data = new byte[bytes];
            rng.GetBytes(data);
            return BitConverter.ToString(data).Replace("-","");
        }
    }
} 
```

现在进行测试，我应该只为 GenerateRandomHexString 方法编写测试，还是应该为 GenerateSecret 和 GenerateKey 编写测试（这将是几乎相同的测试）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:57:33.713

为什么需要两种做同样事情的方法？

无论如何，您应该编写单独的测试。

*   通常单元测试应该覆盖公共接口而不是非公共成员，如果它只被其他方法使用，你的 GenerateHexString 可能不应该是公共的
*   您的实现现在是相同的，但将来它们可能会有所不同。如果没有不同的测试用例，您可能会错过由更改其中一种实现的人引入的重大更改
*   最终你的测试不应该知道或关心你的代码的内部实现细节

在 nUnit 中可能有帮助的一件事是 TestCaseSource 属性。这将允许您为两种方法定义相同的测试用例，从而在代码中节省一些重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T04:07:50.433

创建许多接口方法来做同样的事情是个坏主意。我也不会在接口上重载。这造成的问题是具有相同语义含义的方法可能具有截然不同的实现。它们可能不会出现在最简单的情况下，但简单的情况最终往往会变成复杂的情况。

我**喜欢**这个问题的扩展方法。

```
public interface IAuthProvider
{
    string GenerateKey();
}

public static class IAuthProviderExtensions
{
    public static string GenerateSecret(this IAuthProvider provider)
    {
         return provider.GenerateKey();
    }
} 
```

测试：

```
[Test]
public void GenerateSecretIsAliasForGenerateKey()
{
    var mockProvider = new Mock<IAuthProvider>();
    var key = GenerateARandomStringSomehow();
    mockProvider.Setup(p=>p.GenerateKey()).Returns(key);
    Assert.That(mockProvider.Object.GenerateSecret(), Is.EqualTo(key));
} 
```

# css - 占位符光标颜色 - Firefox

> ID：14449820
> 
> 赞同：3
> 
> 时间：2013-01-22T00:47:54.247
> 
> 标签：css, firefox, colors, placeholder

![](../Images/90ac415a163d7485364d3b43e7db3a6a.png)

我的问题是关于这张图片的。当我在 Firefox 中有一个占位符时，光标（我们聚焦输入时的垂直条）变为黑色而不是白色（我的字体颜色）。[第一张图片，不太容易看到，但我专注于“密码”输入，并且有黑色光标]

如果输入没有占位符，则该栏应为白色。[第二张图片]

无论如何我可以让那个酒吧变白吗？

谢谢

编辑[代码]：

CSS

```
input, select {
    background-color: #232323;
    margin: 3px 0px;
    padding: 0px 2px;
    border: 1px solid #ffffff;
    color: #ffffff;
    font-size: 11px;
} 
```

HTML

```
<input type="text" name="username" class="right" /><br/>
<input type="password" name="passord" placeholder="Password" class="right" /><br/> 
```

这就是我正在使用的代码，目标是使顶部图像 [密码字段] 中的竖线变为白色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:05:06.620

可悲的是，这是 Firefox 中的一个错误。它在 v15 中被检测到，应该在 v19 中修复（这就是为什么它现在被标记为已修复）：

[https://bugzilla.mozilla.org/show_bug.cgi?id=769405](https://bugzilla.mozilla.org/show_bug.cgi?id=769405)

恐怕你什么也做不了，只能等……

# python - SQLAlchemy：限制在与 where 相同的字符串中

> ID：14449822
> 
> 赞同：9
> 
> 时间：2013-01-22T00:48:13.430
> 
> 标签：python, sql, postgresql, sqlalchemy

我们正在尝试为我们的 Web 应用程序启用 SQL 查询前端，它是 WSGI 并使用 Python，使用 SQLAlchemy（核心，而不是 ORM）来查询 PostgreSQL 数据库。我们设置了几个数据层函数来帮助构建查询，现在我们正在尝试设置一些允许这种类型的查询：

```
select id from <table_name> where ... limit ... 
```

在前端，我们有一个文本框，让用户输入 where 子句和 limit 子句，这样就可以从前端灵活动态地查询数据，也就是我们要启用*即席*查询。所以，我们现在唯一的第一手资料是：

```
select id from <table_name> 
```

用户将输入，例如：

```
where date > <some_date>
where location is not null limit 10 order by location desc 
```

使用**相同**的后端功能。select、column 和 table 应该由数据层管理（即它知道它们是什么，用户不需要知道这些）。但是，我不知道有什么方法可以让 SQLAlchemy 自动解析`where`子句和`limit`子句。我们现在拥有的是一个函数，它可以返回表名和 id 列的名称，然后使用它来创建一个文本查询，将其传递给 SQLAlchemy，作为`text()`调用的输入。

有什么办法可以用 SQLAlchemy 或其他库来做到这一点？或者是否有更好的模式我应该知道，它不涉及解析 SQL，同时仍然允许来自前端的此功能？

非常感谢！所有建议将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T01:52:27.203

我不确定我是否遵循，但一般 SQL-Alchemy 用法如下：

```
 results = db.session.query(User).filter(User.name == "Bob").order_by(User.age.desc()).limit(10) 
```

这将查询 User 表以返回名为“Bob”的前十个最古老的成员

# mysql - 数据库表之间的哪种关系是正确的？

> ID：14449833
> 
> 赞同：0
> 
> 时间：2013-01-22T00:49:34.003
> 
> 标签：mysql, database

我们有一个数据库，用于保存有关音乐的信息——例如，我们有艺术家、乐队、歌曲、专辑等的表格。下一步是允许用户使用 10 分评分标准对这些内容进行评分。

记住所有用户评分的最佳方式是什么？当然，我可以创建简单的表，其中包含 user_id、rating_value 和rated_thing_element，但显然我不能将它加入到每个表中。

那么是不是更好，例如，创建一个名为的表`ratings`和几个额外的表，如 rating_albums、ratings_songs、ratings_bands 等来绑定，或者`ratingsXXX`为我上面提到的每个元素创建几个表？

我不确定我应该走哪条路……或者这真的很重要。=？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T01:11:17.293

我个人的偏好是使用规范化的表格和严格的外国参考。所以我会使用artist_ratings、album_ratings 和song_ratings 表。为了使查询更容易，我将创建视图来表示最常连接的表。

您可以使用没有外键的评级表（除了用户引用），但您会失去参照完整性强制执行。这张桌子是

```
ratings {
  id integer,
  userId integer, -- FK to users table
  referenceId integer, -- This is not a FK, but will contain the ID of the artist/album/song
  type char, -- a = album, A = artist, s = song
  rating int
} 
```

# javascript - 在javascript中加密字符串的简单方法？

> ID：14449836
> 
> 赞同：1
> 
> 时间：2013-01-22T00:50:03.130
> 
> 标签：javascript, encryption

我想在我的客户端和 NodeJS 服务器之间发送信息。我需要一种*简单*的方法来加密来自客户端的消息。

我试过了：http: [//javascript.about.com/library/blencrypt.htm](http://javascript.about.com/library/blencrypt.htm)

但我需要一些更简单的东西

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T00:50:49.773

你试过[http://crypto.stanford.edu/sjcl/](http://crypto.stanford.edu/sjcl/)吗？

使用非常简单，

```
var sensitiveInfo = "yodawgpasswords";
var encryptedInfo = sjcl.encrypt("password", sensitiveInfo);
var decryptedInfo = sjcl.decrypt("password", encryptedInfo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T00:59:15.263

您可以使用 HTTPS Node.js 模块。

文档：[http ://nodejs.org/api/https.html](http://nodejs.org/api/https.html)

# html - 无法正确显示表单边框

> ID：14449838
> 
> 赞同：0
> 
> 时间：2013-01-22T00:50:04.753
> 
> 标签：html, css, forms, border

我对 CSS 不是很熟悉，我正在尝试在我的登录表单上应用边框，这是我使用的代码：

登录.html：

```
<head>
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>

<div id="login_container">
    <form action="#" method="POST">
        <div class="row">
            <label for="username" class="label">Username</label>
            <input type="text" class="field" name="username" />
        </div>
        <div class="row">
            <label for="password" class="label">Password</label>
            <input type="password" class="field" name="password" />
        </div>
    </form>
</div> 
```

css/style.css：

```
#login_container {
    margin-top:50px;
    margin-left: auto;
    margin-right: auto;
    width: 300px;
    border:1px solid black;
    display:block;
}

.field {
    float:right;
    margin-left: 10px;
}

label {
    float:left;

}

.row{
    display:block;
    clear:both;
} 
```

和输出：

![前面代码的输出](../Images/3b39a549eb814cb003959edbcec719d2.png)

为什么边框会越过密码文本字段？

编辑：

带形式{边框：1px纯黑色；}

输出是：

![使用表单边框而不是 og #login_container 边框输出](../Images/ec77d5ec4d1e817b720e50432a0874a9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T01:29:01.340

Add `overflow:auto;` to your `#login_container` div.

**[jsFiddle example](http://jsfiddle.net/j08691/dznHn/)**

Because the inner elements are floated, you need to specify the overflow property to bring the border back around them.

# html - Gumby 框架网格的 Div 嵌套问题

> ID：14449845
> 
> 赞同：0
> 
> 时间：2013-01-22T00:50:42.260
> 
> 标签：html, css, gumby-framework

使用 Gumby 框架时，我遇到了嵌套 div 的问题。

我正在尝试在十列网格中嵌套三列和七列网格。

我用我的 HTML/CSS 尝试了一些变体，但无济于事。图我一定遗漏了一些相当简单的东西。

[网站链接](http://portfolioprep.suissamesser.com)

HTML 代码示例：

```
 <div class="ten columns main_col">
 <p>Text removed</p>

 <div class="row">
 <div class="three"><h2 class="100width">Core Services</h2></div>
 <div class="seven"></div>
 </div>

 </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T22:27:55.427

该框架并不“智能”。一切都基于 12 或 16 列。所以你必须为这种性质的事情做所有的思考。如果你想在 12 列网格内有一个 3-7 居中的容器，下面的代码就是这样做的：

```
<!-- 10 Columns -->
<div class="row">
    <div class="three columns push_one">3 col</div>
    <div class="seven columns">7 col</div>
</div>
<!-- // End 10 --> 
```

原因如下：10 列 = 10 of 12（为了论证），该容器中的 3 列和 7 列实际上是 12 列的 30%，而 12 列的 70% 位于 83.333% 的 12 列容器内。扔`class="ten columns"`在容器上不会触发某种递归函数来将容器“重置”为 10 列网格系统；因此，愚蠢的边距，填充等。它实际上按预期工作。希望这是有道理的。

# vb.net - 在 Windows 窗体中突出显示富文本框中的文本

> ID：14449847
> 
> 赞同：3
> 
> 时间：2013-01-22T00:50:53.343
> 
> 标签：vb.net, winforms, fonts, richtextbox, syntax-highlighting

当我输入`RichTextBox`某个单词时，如何使它被突出显示？

我如何在文本中找到要使用的单词`SelectionColor`或`SelectionFont`

例如：我希望“你好”这个词出现在`RichTextBox`它变成**粗体**或变成颜色的时候......

然后，如果我打开我的程序并输入“**你好**，你好吗？” 你好这个词变成了粗体......有什么想法吗？（我的想法是制作一个带有语法高亮的文本编辑器，它不能指定单词）

（对不起，如果还有其他类似的问题，我试图搜索但我没有找到对我有帮助的答案）

它的窗体，visual basic

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T22:04:10.517

这段代码应该可以完成工作：

```
Dim searchstring As String = "hello"
' The word you're looking for
Dim count As New List(Of Integer)()
For i As Integer = 0 To richTextBox1.Text.Length - 1
    If richTextBox1.Text.IndexOf(searchstring, i) <> -1 Then
        'If the word is found
            'Add the index to the list
        count.Add(richTextBox1.Text.IndexOf(searchstring, i))
    End If
Next
Try
    For i As Integer = 0 To count.Count - 1

        richTextBox1.[Select](count(i), searchstring.Length)
        richTextBox1.SelectionFont = New Font(richTextBox1.Font, FontStyle.Bold)
        count.RemoveAt(i)
    Next
Catch
End Try
richTextBox1.[Select](richTextBox1.Text.Length, 0)
richTextBox1.SelectionFont = New Font(richTextBox1.Font, FontStyle.Regula 
```

对于每个索引，选择文本并使其变为粗体。

现在将此代码添加到`TextChanged`-Event 以检查文本更改为您的单词的任何时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T01:14:30.277

我以不同的方式得到它：

```
 While Not RichTextBox1.Text.IndexOf("hello", startIndex) = -1
               selectedIndex= RichTextBox1.SelectionStart
        Try
                RichTextBox1.Select(RichTextBox1.Text.IndexOf("test", startIndex) - 1, 1)
        Catch
        End Try
        If RichTextBox1.SelectedText = " " Or RichTextBox1.SelectedText = Nothing Then
            RichTextBox1.Select(RichTextBox1.Text.IndexOf("hello", startIndex) + "test".Length, 1)
            If RichTextBox1.SelectedText = " " Or RichTextBox1.SelectedText = Nothing Then
                RichTextBox1.Select(RichTextBox1.Text.IndexOf("hello", startIndex), "test".Length)
                RichTextBox1.SelectionColor = Color.Blue
            End If
        End If

        startIndex = RichTextBox1.Text.IndexOf("hello", startIndex) + "hello".Length
        RichTextBox1.SelectionStart = selectedIndex
        RichTextBox1.SelectionLength = 0
        RichTextBox1.SelectionColor = Color.Black
    End While 
```

我不知道这是否是最好的方法，但有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T05:40:09.523

这是在找到它后以黄色突出显示选定文本的代码（可以用任何其他颜色替换）：

```
 'find the text that need to be highlighted.
    foundIndex = RichTextBox1.Find("hello", foundIndex + 1, -1, selectedFinds)
    RichTextBox1.Focus()

    If foundIndex = -1 Then
        MessageBox.Show("This document don't contains the text you typed, or any of the text you typed as a whole word or mach case.", "Find Text Error", MessageBoxButtons.OK, MessageBoxIcon.Asterisk)
 else
'now the text will be highlighted.
 RichTextBox1.SelectionBackColor = Color.Yellow
Richtextbox1.focus
    End If 
```

我希望该代码会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-12T12:11:08.667

Private Sub RichTextBox1_DragOver(sender As Object, e As DragEventArgs) 处理 RichTextBox1.DragOver

```
 Dim p As Point
    p.X = e.X
    p.Y = e.Y
    Dim num As Integer
    Dim rightTXT As String
    Dim leftTXT As String
    Dim textpart As String
    Dim TSelect As Boolean
    Dim curpos As Integer = RichTextBox1.GetCharIndexFromPosition(RichTextBox1.PointToClient(p))
    Dim PosStart As Integer

    TSelect = False
    If e.Data.GetDataPresent(DataFormats.StringFormat) Then

        e.Effect = DragDropEffects.All

        Try
            leftTXT = Microsoft.VisualBasic.Left(RichTextBox1.Text, curpos)
            If InStr(leftTXT, "%", CompareMethod.Text) Then
                rightTXT = Microsoft.VisualBasic.Right(RichTextBox1.Text, Len(RichTextBox1.Text) - curpos)

                If InStr(rightTXT, "%", CompareMethod.Text) Then
                    PosStart = curpos - InStr(StrReverse(leftTXT), "%") + 1
                    num = curpos + InStr(rightTXT, "%") - PosStart - 1

                    textpart = (RichTextBox1.Text.Substring(PosStart, num).TrimEnd)

                    Label3.Text = "mouse drag over:" + textpart
                    Label5.Text = num.ToString()

                    If ListBox1.Items.Contains(textpart) Then
                        TSelect = True
                    End If
                End If
            End If
        Catch ex As Exception
            Label4.Text = ex.ToString()
        End Try

    End If

    If TSelect Then      
        Me.RichTextBox1.Select(PosStart - 1, num + 2)
        wordSearch = RichTextBox1.SelectedText

        Label4.Text = "word drag state: true"
        match = True   
    Else
        Label3.Text = "mouse drag over:"
        Label4.Text = "word drag state: false"
        Me.RichTextBox1.Select(0, 0)
    End If
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-07T11:44:29.763

我发现上面的代码对于一个简单的任务来说太长/太复杂了......

```
 Dim c As Integer = 0

    Dim o As Integer = 0
    Dim s As Integer = 0

    Dim txt As String = RTB.Text
    RTB.BackColor = Color.Black

    Dim starts As Integer = 0

    Do While txt.Contains(key) ' this avoids unnecessary loops

        s = txt.IndexOf(key)
        starts = s + o
        RTB.Select(starts, key.Length)
        RTB.SelectionBackColor = Color.Yellow
        RTB.SelectionColor = Color.Blue

        txt = txt.Substring(s + key.Length)
        o += (s + key.Length)

        c += 1

    Loop
    Me.Status.Text = c.ToString() & " found" ' and the number found 
```

# python - Looping data: maximum recursion depth exceeded in cmp

> ID：14449848
> 
> 赞同：0
> 
> 时间：2013-01-22T00:50:58.593
> 
> 标签：python, django

I'm using Django that iterate through items to see if they exists using get_or_create. Right now I'm having this problem

```
def insert_titles(self):
    game = None
    title = None
    for k,v in self.data.items():

        game_exists = Game.objects.all().get_or_create(game_name=v['title']) #will get RuntimeError: maximum recursion depth exceeded in cmp
        print game_exists 
```

Basically, this is an script that will run as a cron job, so I kind of have to iterate through a bunch of items to get to the point I want

```
 while True:
            try:

                data = strategy.process()
                filter = FilterGames(data, link) 
```

Filter Games code:

```
def __init__(self, data):
    self.data = data
    self.insert_titles()
    print "init" 
```

I've done this in the past with Play Framework, maybe since I'm still inexperienced in Python I'm looking at it the wrong way, not sure how to proceed when it gives me this type of error. I have tried change the structure a bit to no avail. Weird thing is that if I use a `string` in `game_name` it will work as expected, but if I use data gathered from a loop, it starts throwing that error.

Finally, I want to know how to correct this type of error, and hopefully understand a bit more of why it does that.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:13:42.783

Okay, so after poking and investigating why it did that. I noticed that the `type` of the object wasn't a true `string` type, or in this case `str`. I use BeautifulSoup to get data from some XML files and when I used `bs4.find().string` it gave me a `NavigableString` instead of a normal string.

So for future reference, be sure that the `type` is the right one. Feeding a `NavigableString` to Django filter gave me this unexpected error

# formatting - Ocaml 格式化工具

> ID：14449849
> 
> 赞同：1
> 
> 时间：2013-01-22T00:50:59.220
> 
> 标签：formatting, ocaml, indentation

问题很简单，我有一个非常混乱的 ocaml 代码，缩进错误，换行 ecc。是否有任何工具可以正确格式化 ocaml 代码？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T08:18:58.207

您可以在编辑器中使用[ocp-indent](https://github.com/OCamlPro/ocp-indent)或作为外部工具来缩进代码。它应该在 Windows 上工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:41:53.530

您可以将 Emacs 与[TypeRex 扩展](http://www.typerex.org/)一起使用。我不是每天都使用 Emacs，而是用它来缩进我的代码，它是一个非常好的工具！

# java - 调用 .exe 文件，但 stdInput.readline 为每个输入提供相同的输出

> ID：14449852
> 
> 赞同：0
> 
> 时间：2013-01-22T00:51:19.140
> 
> 标签：java, exe, command-prompt, runtime.exec, input-parameters

我正在从 java 调用外部 myexefile.exe。.exe 文件在 java 中正确执行，但是当我通过以下代码捕获 .exe 文件的输出时，每次输入都给出相同的输出 55​​.11 。但是在命令提示符下，每个输入的输出都不同。我的示例代码如下： a 和 b 是 .exe 文件的输入（双精度类型）参数。我在这段代码之前随机生成了 a 和 b 值。当我在命令提示符下运行时，请不要让 exe 文件给出正确的输出。

```
Process p = Runtime.getRuntime().exec("C:\\filepath\\myexefile.exe a b");

BufferedReader stdInput = new BufferedReader(new InputStreamReader(p.getInputStream()));
           String s;
           while ((s = stdInput.readLine()) != null) {
                System.out.println(new String(s));
           } 
```

我只想在 Java 中获取 .exe 文件的输出。或者有什么办法可以将该输出写为文本文件？

# ios - 加载许多 UIWebviews 会触发 ios 应用程序的内存峰值

> ID：14449853
> 
> 赞同：0
> 
> 时间：2013-01-22T00:51:21.377
> 
> 标签：ios, objective-c, memory-management, uiwebview, rubymotion

我正在开发一个应用程序，该应用程序需要在单个视图控制器（整个应用程序的第二个）上加载许多 uiwebviews（大约 50 个或更多）以预渲染它们。问题是创建这些 webviews 并用 js 加载 html 会产生一个巨大的内存峰值，达到大约 200 MB，这显然有时会使应用程序崩溃。

我需要传递一个数组，其中已经在下一个视图控制器中加载了这些 webview，并且我只能在它们全部显示后才能摆脱它们。

我已经找到了一个供应商来正确清除 webviews ， cleanWebViewDealloc 并将链接检测设置为关闭，但这仍然不够。

请注意，循环不断重复。那么有没有其他方法可以改善这种情况？还有什么我没有做或我可以做的事情吗？

PD：我与 ruby​​motion 和一些供应商合作。

# java - 按钮保持焦点

> ID：14449858
> 
> 赞同：2
> 
> 时间：2013-01-22T00:51:49.723
> 
> 标签：java, swing, jdialog

`JDialog`每当单击按钮时，我都会创建并设置为可见。我的问题是按钮保持焦点并且不将其提供给`JDialog`.

这是正常行为还是发生了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:54:40.197

`JDialog`默认情况下， s[不是模态的（“无模态”）](http://docs.oracle.com/javase/7/docs/api/javax/swing/JDialog.html#JDialog%28%29)：

> 创建一个没有标题且没有指定 Frame 所有者的*无模式对话框。*

尝试将其构建为：

```
new JDialog(owner, title, ModalityType.APPLICATION_MODAL); 
```

（或等效`super()`调用，如果您是 JDialog 的子类。或您想要的任何[模态类型](http://docs.oracle.com/javase/7/docs/api/java/awt/Dialog.ModalityType.html)。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T00:55:03.883

尝试使用`dialog.requestFocus()`if`dialog`是新创建的`JDialog`.

请参阅[`requestFocus()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#requestFocus%28%29)或[`requestFocusInWindow()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#requestFocusInWindow%28%29)了解更多信息。

# javascript - javascript Date.parse 0000-00-00 00:00 AM 格式结果为 NaN

> ID：14449859
> 
> 赞同：0
> 
> 时间：2013-01-22T00:52:07.087
> 
> 标签：javascript, jquery, timestamp

我正在尝试将日期字符串解析为 javascript 时间戳，字符串的格式是，`2013-01-01 12:00 AM`但是当我尝试提醒输出时，我能得到的只是`NaN`我的尝试是：

```
var ts_begin = Date.parse($('#fromdate').val()+' '+$('#fromtime').val());
alert(ts_begin); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:54:18.560

该[`parse()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)方法对它接受的日期格式非常挑剔。您可能希望查看另一个名为[Moment.js](http://momentjs.com/)的 JavaScript 库来解析您的日期（它还可以对日期/时间值做更多的事情）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T00:55:34.627

`Date.parse`只能使用特定格式。它不喜欢上午/下午之前空间不足。尝试：

```
Date.parse($("#fromdate").val() + ' ' + $("#fromtime").val()
   .replace(/[AP]M/, ' $&')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T01:03:34.943

```
var utc_timestamp = Date.UTC(now.getFullYear(),now.getMonth(), now.getDate(), 
    now.getHours(), now.getMinutes(), now.getSeconds(), now.getMilliseconds());
alert(utc_timestamp); 
```

# c - 不允许 malloc()？

> ID：14449860
> 
> 赞同：1
> 
> 时间：2013-01-22T00:52:08.277
> 
> 标签：c, malloc

我有一个生成文件，可以构建、运行单元测试、内存泄漏等。但是有没有办法可以阻止 malloc()、free()、calloc() 等在源代码中使用？

我有替换内存函数来处理诸如模拟之类的事情。例如，有没有办法可以强制使用 EagleMemory_Free() 而不是 free()。

我的替换函数有不同的签名，所以我不能简单地创建一个将内部函数指向我自己的宏：

```
void* EagleMemory_Allocate(char *id, size_t size);
void EagleMemory_Free(void *ptr);
void** EagleMemory_MultiAllocate(char *id, size_t size, int quantity);
void EagleMemory_MultiFree(void **ptr, int quantity);
void EagleMemory_MockInit(void);
void EagleMemory_Mock(char *id);
void EagleMemory_MockFinish(void);
int EagleMemory_GetMockInvocations(void); 
```

哦，我还应该指出我不想在运行时替换函数并导致我的软件崩溃——这太愚蠢了。我想在构建时或在软件运行之前通过其他脚本来捕捉 std 函数的使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T01:44:27.610

感谢 Alexey Frunze。该`nm`命令正是我所需要的。我将此添加到我的makefile中：

```
NM = nm $(OBJS)/*.o -o 2>&1 | grep -v EagleMemory.o | grep -w '_malloc\|_calloc\|_free'

leaks: build_eagle_test
    if [ `$(NM) | wc -l` -gt 0 ]; then \
        echo "\n==> Do not use stdlib memory functions, use EagleMemory functions instead. <=="; \
        $(NM); \
        exit 1; \
    fi

    ... 
```

效果很好！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T01:08:05.987

部分解决方案是编译所有内容：

```
 -Dmalloc=@ERROR -Dfree=@ERROR 
```

（可能同样适用于`calloc`and `realloc`）。这不会强制替换`malloc`by `EagleMemory_Malloc`，但会导致任何调用`malloc`无法编译。

（我之所以选择`@ERROR`它是因为它不会出现在合法的 C 源代码中。）

请注意，可能仍有*间接*呼叫`malloc`和朋友；例如，`strdup()` 调用`malloc()`. （`strdup`不是由 ISO C 定义的，而是由 POSIX 定义的。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T00:54:51.290

怎么定义：

```
void *malloc(size_t size)
{ 
    return EagleMemory_Malloc(size);
} 
```

等等...

编辑 ：

我用这个全新的版本给你可变参数的力量，它可能有点矫枉过正，但你的“不同的签名”值得最好的！

```
#define malloc(...) EagleMemory_Malloc(__VA_ARGS__) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T00:55:15.267

使用宏：

```
#define free EagleMemory_Free 
```

# scala - 在 Scala 2.10 中杀死或超时未来

> ID：14449862
> 
> 赞同：9
> 
> 时间：2013-01-22T00:52:37.053
> 
> 标签：scala, timeout, future, scala-2.10

你好，

我将 Scala 2.10 与新的期货库一起使用，我正在尝试编写一些代码来测试无限循环。我使用 a`scala.concurrent.Future`在单独的线程中运行带有循环的代码。然后我想等一会儿做一些测试，然后杀死单独的线程/未来。我看过，`Await.result`但这实际上并没有扼杀未来。有什么方法可以超时或终止新的 Scala 2.10 期货？

我宁愿不必为这个简单的部分添加诸如 Akka 之类的外部依赖项。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T01:23:44.043

不要在家里尝试。

```
import scala.concurrent._
import scala.concurrent.duration._

class MyCustomExecutionContext extends AnyRef with ExecutionContext {
  import ExecutionContext.Implicits.global
  @volatile var lastThread: Option[Thread] = None
  override def execute(runnable: Runnable): Unit = {
    ExecutionContext.Implicits.global.execute(new Runnable() {
      override def run() {
        lastThread = Some(Thread.currentThread)
        runnable.run()
      }
    })
  }
  override def reportFailure(t: Throwable): Unit = ???
}    

implicit val exec = new MyCustomExecutionContext()
val f = future[Int]{ do{}while(true); 1 }
try {
  Await.result(f, 10 seconds) // 100% cpu here
} catch {
  case e: TimeoutException => 
    println("Stopping...")
    exec.lastThread.getOrElse(throw new RuntimeException("Not started"))
      .stop() // 0% cpu here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T01:22:24.190

否 - 您必须添加一个循环检查的标志。如果设置了标志，则停止循环。确保标志至少为`volatile`.

请参阅[Java 并发实践](https://rads.stackoverflow.com/amzn/click/com/0321349601)，第 135-137 页。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-28T17:20:27.640

I had a similar problem and wrote the following nonblocking future op:

```
class TerminationToken(var isTerminated: Boolean)
object TerminationToken { def apply() = new TerminationToken(false) }

 implicit class FutureOps[T](future: Future[Option[T]]) {
 def terminate(timeout: FiniteDuration, token: TerminationToken): Future[Option[T]] = {
   val timeoutFuture = after[Option[T]](timeout, using = context.system.scheduler) {
     Future[Option[T]] { token.isTerminated = true; None } }
          Future.firstCompletedOf[Option[T]](Seq (future recover { case _ => None }, timeoutFuture))
     }
   } 
```

Then just create a future that returns an option, and use .terminate(timeout, token) on it

# hibernate - HQL Hibernate 嵌套连接

> ID：14449869
> 
> 赞同：0
> 
> 时间：2013-01-22T00:53:39.623
> 
> 标签：hibernate, join, hql

我有以下参考约束设置，以便：

```
Table A, Table B, Table C

A.bid = B.id
B.cid = c.id 
```

我需要运行一个查询来检索具有以下过滤器的表 A 对象：

```
A.someCol = 'someVal' and C.someCol='someVal' 
```

到目前为止，我已经能够想出这个。这将返回一个 TableAObj 但 TableCObj 为空：

```
select new TableAObj(TableBObj,TableCObj)
from TableAObj as tao 
left join tao.TableBObj as tbo 
left join tbo.TableCObj as tco 
where tao.someCol = ? and tco.someCol = ? 
```

我的查询缺少什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:36:29.023

弄清楚了。这是查询：

```
select from TableAObj where TableAOb.someCol = ? 
and TableAObj.TableBObj.TableCObj.someCol = ? 
```

不需要重载的构造函数或显式连接。

# android - 在运行时更改标记图标

> ID：14449870
> 
> 赞同：11
> 
> 时间：2013-01-22T00:53:55.953
> 
> 标签：android, google-maps, google-maps-android-api-2

有没有办法在运行时更改 Google Maps Android API v2 标记的图标，而无需删除/重新添加我想更改其图标的标记？我可以对其应用变换（如旋转）吗？

谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-06-19T13:33:36.743

`Google Play Services Rev 7`现在 更新到之后，我可以在运行时轻松更改标记图标

> Marker.setIcon（BitmapDescriptor 图标）

是可用的，以前我确实删除并添加了标记来改变它的颜色。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T10:38:33.413

目前您不能在运行时更改标记，也不能对其应用旋转。

不过，您可以使用一种解决方法 - 我正在研究 BlinkingMarker 类，我必须在运行时调整标记图像的不透明度。

目前唯一的解决方案是创建具有不同旋转的位图，然后定期添加/删除它们。这个解决方案的问题是添加/删除标记需要大量的内存分配，因此会导致不断的垃圾收集。更好、更流畅的解决方法是预先创建所有图像，然后一次将所有图像添加到地图中。之后，您可以使用该`Marker.setVisible(boolean)`功能显示您当前需要的。

注意：在执行此操作之前测量您的位图，因为添加大量大位图可能会导致您的应用程序的内存大小变得非常大。

您可以在这里查看我的解决方法： [https ://github.com/balazsbalazs/blinking-marker-mapsv2](https://github.com/balazsbalazs/blinking-marker-mapsv2)

这是闪烁的标记（更改位图的不透明度），但在同一行上，您可以应用任何类型的转换。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-23T21:36:25.817

在2013 年[9 月的 Google Maps Android API v2 版本](https://developers.google.com/maps/documentation/android/releases#september_2013)中，现在有一种新[`setRotation()`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/Marker#setRotation(float))的标记方法以及一种新[`setFlat()`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/Marker#setFlat(boolean))方法。

以下是谷歌对新功能的描述：

> **给你的标记一个方向感**
> 
> 我们添加了一个标记旋转属性，允许您围绕它的锚点旋转标记。新的 flat 属性允许您使标记平放在地图表面上，而不是弹出以面对相机。这两个新属性对于在地图旋转或倾斜时指示指南针方向特别有用。

这[是一篇](http://googlegeodevelopers.blogspot.com.au/2013/09/full-screen-maps-and-new-marker.html)描述新功能的文章。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-22T02:59:25.697

[文档](https://developers.google.com/maps/documentation/android/marker)在这个问题上非常清楚——

> ```
> Icon
>     A bitmap that's displayed in place of the default marker image. You can't change the icon once you've created the marker. 
> ```

如果你想改变标记的外观，你有一些选择。正如您所注意到的，一种是删除标记并添加另一个标记。另一种是在同一位置放置多个标记，并在任何给定时间切换哪个标记可见。

> 我可以对其应用变换（如旋转）吗？

在使用图像创建标记**之前**，您可以对图像应用任何您喜欢的转换。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-07-22T07:09:49.963

要在运行时更改选定的标记图标，只需添加

```
 @Override
      public boolean onMarkerClick(Marker marker) {

       Marker.setIcon (BitmapDescriptor icon);
       } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-12-24T05:15:42.987

**仅针对 Android 测试**

为了在运行时更改标记的图标，我通过删除第 186 行中的“final”键将 icon 变量从**final**更改为**non-final ：**

```
final BitmapDescriptor icon;

BitmapDescriptor icon; 
```

并在第 136 行将 Marker Constructor 从“const”更改为“non-const”：

```
const Marker({

Marker({ 
```

要在包中进行更改，您必须遵循[此说明](https://medium.com/flutter-community/how-to-modify-an-existing-pub-package-to-use-in-your-flutter-project-4e909452ee66)。

使用 google_maps_flutter 存储库，您将收到类似“找不到 pubspec.yaml”的错误。那是因为 google_maps_flutter 包被放置在存储库的子目录中。

要获得正确的依赖项，您必须在 pubspec.yaml 中添加包的特定路径：

```
 dependencies:
  # google_maps_flutter: ^2.1.1
  google_maps_flutter:
    git:
      url: https://github.com/[username]/plugins.git
      path: packages/google_maps_flutter/google_maps_flutter/ 
```

然后，您可以通过直接将其设置在标记上来更改图标。我通过使用“OnTap”方法来做到这一点。

```
Marker marker = Marker(
  icon: firstIcon,
  markerId: MarkerId(id),
  position: position,
  infoWindow: InfoWindow(
    title: name,
    snippet: address,
  ),
  onTap: () {
    setState(() {
      _markers[name]?.icon = secondIcon;
    });
  }
); 
```

整个标记类：

```
@immutable
class Marker implements MapsObject {
  /// Creates a set of marker configuration options.
  ///
  /// Default marker options.
  ///
  /// Specifies a marker that
  /// * is fully opaque; [alpha] is 1.0
  /// * uses icon bottom center to indicate map position; [anchor] is (0.5, 1.0)
  /// * has default tap handling; [consumeTapEvents] is false
  /// * is stationary; [draggable] is false
  /// * is drawn against the screen, not the map; [flat] is false
  /// * has a default icon; [icon] is `BitmapDescriptor.defaultMarker`
  /// * anchors the info window at top center; [infoWindowAnchor] is (0.5, 0.0)
  /// * has no info window text; [infoWindowText] is `InfoWindowText.noText`
  /// * is positioned at 0, 0; [position] is `LatLng(0.0, 0.0)`
  /// * has an axis-aligned icon; [rotation] is 0.0
  /// * is visible; [visible] is true
  /// * is placed at the base of the drawing order; [zIndex] is 0.0
  /// * reports [onTap] events
  /// * reports [onDragEnd] events
  Marker({
    required this.markerId,
    this.alpha = 1.0,
    this.anchor = const Offset(0.5, 1.0),
    this.consumeTapEvents = false,
    this.draggable = false,
    this.flat = false,
    this.icon = BitmapDescriptor.defaultMarker,
    this.infoWindow = InfoWindow.noText,
    this.position = const LatLng(0.0, 0.0),
    this.rotation = 0.0,
    this.visible = true,
    this.zIndex = 0.0,
    this.onTap,
    this.onDrag,
    this.onDragStart,
    this.onDragEnd,
  }) : assert(alpha == null || (0.0 <= alpha && alpha <= 1.0));

  /// Uniquely identifies a [Marker].
  final MarkerId markerId;

  @override
  MarkerId get mapsId => markerId;

  /// The opacity of the marker, between 0.0 and 1.0 inclusive.
  ///
  /// 0.0 means fully transparent, 1.0 means fully opaque.
  final double alpha;

  /// The icon image point that will be placed at the [position] of the marker.
  ///
  /// The image point is specified in normalized coordinates: An anchor of
  /// (0.0, 0.0) means the top left corner of the image. An anchor
  /// of (1.0, 1.0) means the bottom right corner of the image.
  final Offset anchor;

  /// True if the marker icon consumes tap events. If not, the map will perform
  /// default tap handling by centering the map on the marker and displaying its
  /// info window.
  final bool consumeTapEvents;

  /// True if the marker is draggable by user touch events.
  final bool draggable;

  /// True if the marker is rendered flatly against the surface of the Earth, so
  /// that it will rotate and tilt along with map camera movements.
  final bool flat;

  /// A description of the bitmap used to draw the marker icon.
  BitmapDescriptor icon;

  /// A Google Maps InfoWindow.
  ///
  /// The window is displayed when the marker is tapped.
  final InfoWindow infoWindow;

  /// Geographical location of the marker.
  final LatLng position;

  /// Rotation of the marker image in degrees clockwise from the [anchor] point.
  final double rotation;

  /// True if the marker is visible.
  final bool visible;

  /// The z-index of the marker, used to determine relative drawing order of
  /// map overlays.
  ///
  /// Overlays are drawn in order of z-index, so that lower values means drawn
  /// earlier, and thus appearing to be closer to the surface of the Earth.
  final double zIndex;

  /// Callbacks to receive tap events for markers placed on this map.
  final VoidCallback? onTap;

  /// Signature reporting the new [LatLng] at the start of a drag event.
  final ValueChanged<LatLng>? onDragStart;

  /// Signature reporting the new [LatLng] at the end of a drag event.
  final ValueChanged<LatLng>? onDragEnd;

  /// Signature reporting the new [LatLng] during the drag event.
  final ValueChanged<LatLng>? onDrag;

  /// Creates a new [Marker] object whose values are the same as this instance,
  /// unless overwritten by the specified parameters.
  Marker copyWith({
    double? alphaParam,
    Offset? anchorParam,
    bool? consumeTapEventsParam,
    bool? draggableParam,
    bool? flatParam,
    BitmapDescriptor? iconParam,
    InfoWindow? infoWindowParam,
    LatLng? positionParam,
    double? rotationParam,
    bool? visibleParam,
    double? zIndexParam,
    VoidCallback? onTapParam,
    ValueChanged<LatLng>? onDragStartParam,
    ValueChanged<LatLng>? onDragParam,
    ValueChanged<LatLng>? onDragEndParam,
  }) {
    return Marker(
      markerId: markerId,
      alpha: alphaParam ?? alpha,
      anchor: anchorParam ?? anchor,
      consumeTapEvents: consumeTapEventsParam ?? consumeTapEvents,
      draggable: draggableParam ?? draggable,
      flat: flatParam ?? flat,
      icon: iconParam ?? icon,
      infoWindow: infoWindowParam ?? infoWindow,
      position: positionParam ?? position,
      rotation: rotationParam ?? rotation,
      visible: visibleParam ?? visible,
      zIndex: zIndexParam ?? zIndex,
      onTap: onTapParam ?? onTap,
      onDragStart: onDragStartParam ?? onDragStart,
      onDrag: onDragParam ?? onDrag,
      onDragEnd: onDragEndParam ?? onDragEnd,
    );
  }

  /// Creates a new [Marker] object whose values are the same as this instance.
  Marker clone() => copyWith();

  /// Converts this object to something serializable in JSON.
  Object toJson() {
    final Map<String, Object> json = <String, Object>{};

    void addIfPresent(String fieldName, Object? value) {
      if (value != null) {
        json[fieldName] = value;
      }
    }

    addIfPresent('markerId', markerId.value);
    addIfPresent('alpha', alpha);
    addIfPresent('anchor', _offsetToJson(anchor));
    addIfPresent('consumeTapEvents', consumeTapEvents);
    addIfPresent('draggable', draggable);
    addIfPresent('flat', flat);
    addIfPresent('icon', icon.toJson());
    addIfPresent('infoWindow', infoWindow._toJson());
    addIfPresent('position', position.toJson());
    addIfPresent('rotation', rotation);
    addIfPresent('visible', visible);
    addIfPresent('zIndex', zIndex);
    return json;
  }

  @override
  bool operator ==(Object other) {
    if (identical(this, other)) return true;
    if (other.runtimeType != runtimeType) return false;
    final Marker typedOther = other as Marker;
    return markerId == typedOther.markerId &&
        alpha == typedOther.alpha &&
        anchor == typedOther.anchor &&
        consumeTapEvents == typedOther.consumeTapEvents &&
        draggable == typedOther.draggable &&
        flat == typedOther.flat &&
        icon == typedOther.icon &&
        infoWindow == typedOther.infoWindow &&
        position == typedOther.position &&
        rotation == typedOther.rotation &&
        visible == typedOther.visible &&
        zIndex == typedOther.zIndex;
  }

  @override
  int get hashCode => markerId.hashCode;

  @override
  String toString() {
    return 'Marker{markerId: $markerId, alpha: $alpha, anchor: $anchor, '
        'consumeTapEvents: $consumeTapEvents, draggable: $draggable, flat: $flat, '
        'icon: $icon, infoWindow: $infoWindow, position: $position, rotation: $rotation, '
        'visible: $visible, zIndex: $zIndex, onTap: $onTap, onDragStart: $onDragStart, '
        'onDrag: $onDrag, onDragEnd: $onDragEnd}';
  }
} 
```

# android - jquery mobile 和 phonegap 免费应用程序需要许可证吗？

> ID：14449871
> 
> 赞同：-1
> 
> 时间：2013-01-22T00:53:58.317
> 
> 标签：android, cordova, jquery-mobile, licensing

因为我是 android 平台的新手，所以我正在使用 jquery mobile ui 和 phonegap/cordova 进行编码。提交包含 jquery mobile 和 phonegap/cordova 的应用程序需要任何许可流程吗？该应用程序是免费/非商业的（不用于销售/商业）...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T01:44:19.653

没有！两者都是开源的，它们的许可证允许您将应用程序提交到 Google 的 Play 商店

# jquery - 对带有孩子的 json 执行 jQuery.grep

> ID：14449873
> 
> 赞同：0
> 
> 时间：2013-01-22T00:54:20.177
> 
> 标签：jquery, json

我有一个 json 字符串，其中包含这些产品、尺寸、类型、价格、...

一个看起来像这样：

```
"products": [
    {
        "id": 10,
        "product_prices": [
            {
                "product_size_id": 2,
                "price": "2.0"
            },
            {
                "product_size_id": 3,
                "price": "3.0"
            },
            {
                "product_size_id": 5,
                "price": "4.0"
            },
            {
                "product_size_id": 6,
                "price": "5.0"
            }
        ] 
```

现在我发现这篇文章要查询并且小提琴正在工作：[How to filter a Multi-dimension JSON object with jQuery.grep()](https://stackoverflow.com/questions/7496439/how-to-filter-a-multi-dimension-json-object-with-jquery-grep)

但是，当我尝试这样做时，它会返回所有对象，而不仅仅是 id=20 的产品

这是我正在使用的代码：

```
json.data = jQuery.grep(json.products,function(element, index){ return element.id=20})

console.log(json.data); 
```

这是我第一次忍受我的 json 体验 :-)

我为它创建了一个小提琴：

[http://jsfiddle.net/rept/TC25X/](http://jsfiddle.net/rept/TC25X/)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:55:50.670

用于`==`比较值：

```
json.data = jQuery.grep(json.products, function (element, index) {
    return element.id == 20;
}); 
```

这是你的小提琴：http: [//jsfiddle.net/TC25X/1/](http://jsfiddle.net/TC25X/1/)

# c# - 如何在 Visual Studio 2010 Express for C# 中构建调试

> ID：14449878
> 
> 赞同：0
> 
> 时间：2013-01-22T00:54:37.333
> 
> 标签：c#, visual-studio-2010, debugging, exception

我最近开始学习 C#，并很快发现在我运行我的项目时没有抛出一个异常。我正在观看的教程提到异常在发布配置中的工作方式与在调试配置中的工作方式不同，所以我认为我必须使用发布配置运行。

我在[Microsoft 的网站](http://msdn.microsoft.com/en-us/library/wx0123s5.aspx)上找到了一篇文章，说明了如何切换配置，但是我必须在说明中遗漏一些内容，因为我仍然无法弄清楚如何切换设置。

我正在为 C# 使用 Visual Studio Express 2010。有人可以告诉我为什么没有抛出下面的异常以及如何解决它？

这是我正在使用的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace ReallySimpleLifeCounter
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {
            _testLabel.Content = "Working";
            throw new Exception(); //not being thrown
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T01:00:13.633

您可以使用配置管理器设置模式，通常是热键 F5。

确保您从那里选择了“标准”工具栏，您可以选择运行构建 {Debug, Release} 的模式

# php - 通过 PHP 驱动程序进行 MongoDB 查询

> ID：14449880
> 
> 赞同：0
> 
> 时间：2013-01-22T00:54:46.583
> 
> 标签：php, mongodb

我正在使用运行 PHP 5.4 的 windows xampp 服务器和[来自此处](https://github.com/mongodb/mongo-php-driver/downloads)的 PHP Mongo 驱动程序。

我正在使用以下方法查询数据：

```
$results = $collection->find( array('league'=>'nba') );
  foreach ($results as $user) {
      var_dump($user);
      echo "</br>";
  } 
```

结果：

```
array(5) { ["_id"]=> float(3.1677054844223E+18) ["league"]=> string(3) "nba" ["homeTeam"]=> string(10) "Washington" ... 
```

我正在将 ID 转换为字符串：

```
$cursorID = new MongoID($result['_id']);
$gameLink = "<a href='/home/game/".$cursorID."'>".$cursorID."</a>"; 
```

它将 ID 从浮点数转换为此值： 50fde048f1568a204c0002a1 并尝试查询游戏详细信息：

```
$gameID = new MongoID("50fde048f1568a204c0002a1"); //default
$con = new Mongo("mongodb://mongo.example.net"); // Connect to Mongo Server
$db = $con->selectDB('mydb');
$games = $db->games->find( array('_id'=>$gameID) ); 
```

但这不会返回任何结果。

关于可能出现问题的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:05:02.227

是的，有人一直在摆弄你`ObjectId`的 s 而他们不再是了`ObjectIds`。

您需要使用`ObjectId`s 来查询它们，因此您不能通过`ObjectId` (`MongoId`在 PHP 中) 查询。

你应该能够在不包装图形的情况下进行查询，`MongoId`因为如果你`native_long`在你的 php.ini 中设置了：http: [//php.net/manual/en/mongo.configuration.php#ini.mongo.native-long](http://php.net/manual/en/mongo.configuration.php#ini.mongo.native-long)（默认情况下在我相信的较新的驱动程序中），驱动程序应该自动`NumberLongs`为您来回转换。

因此，从字面上看，只需通过查询，`$result['_id']`而不将其放入`MongoId`.

不过需要注意的是，使用 _id 并不是那么好，我建议您再次使用`ObjectId`(`MongoId`在 PHP 中) 重新填充所有记录，因为这将比您当前使用的 ID 更有效和更容易。

# html - 如何创建一个完全空的 Span（没有空格）？

> ID：14449886
> 
> 赞同：0
> 
> 时间：2013-01-22T00:55:37.080
> 
> 标签：html, is-empty

我试图弄清楚我怎么能拥有：

```
 <span contentEditable="true"></span> 
```

没有任何空格。

关于如何在 JavaScript 中执行此操作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T20:06:11.597

我不确定这是否是正确的方法，但它确实有效。您必须设置一些 css 属性，例如 display:block、宽度和高度值。

```
 <span contentEditable="true" style="width:120px;height:20px;display:block;"></span> 
```

在这里你可以看到一个例子[http://jsfiddle.net/NBfpC/](http://jsfiddle.net/NBfpC/)

# jquery - 使用 jQuery Cycle 插件在动画前后延迟

> ID：14449888
> 
> 赞同：1
> 
> 时间：2013-01-22T00:55:49.997
> 
> 标签：jquery, animation, slider, jquery-cycle, jquery-cycle2

使用 jQuery Cycle2 插件回调事件处理幻灯片脚本。实际循环本身使用`div`元素上的淡入淡出过渡。在 div 中是图像。然后，我使用回调事件从屏幕右到左为图像设置动画。然后下一个事件使右侧屏幕上的图像动画化。

该脚本有效，但我遇到的问题是图像动画与淡入淡出过渡顺序运行。一旦触发事件，图像就会滑出视图并且 div 会同时淡出。我想要达到的效果就像这个模型：

*   触发事件
*   div 淡入
*   短暂的延迟
*   图像动画滑入
*   触发事件
*   图像动画滑出
*   短暂的延迟
*   div 淡出

本质上，我想让图像动画在循环插件淡入淡出过渡运行之前完成。我只是不知道如何设置延迟。

作为参考，Cycle2 API：http: [//jquery.malsup.com/cycle2/api/](http://jquery.malsup.com/cycle2/api/)

```
$('.slides').on('cycle-next, cycle-before', function(e, opts) {
    $('.slide.active img').each(function() {
        $(this).stop().animate({
            left: -3000,
        }, 1000);
    });
});

$('.slides').on('cycle-next', function(e, opts) {
    $('.slide.active img').each(function() {
        $(this).css({
            left: 3000,
            display: 'block'
        });
        $(this).stop().animate({
            left: 0
        }, 1000, 'easeOutQuad');
    });
}); 
```

任何人都可以提供的任何帮助将不胜感激！

编辑：设置工作脚本的快速小提琴：http: [//jsfiddle.net/ardsN/](http://jsfiddle.net/ardsN/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:31:39.920

最简洁的方法是在 Cycle2 插件[Cycle2 Advanced API中定义它](http://www.malsup.com/jquery/cycle2/api/advanced.php)

以下是 Malsup 如何使用[shuffle](http://malsup.github.io/jquery.cycle2.shuffle.js)和[tile](http://malsup.github.io/jquery.cycle2.tile.js)插件完成此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-27T16:04:36.933

尝试以这种方式获取滑块的状态：

```
jQ('.cycle-slideshow').data( 'cycle.opts').busy 
```

你可以使用：

```
jQ( document ).ready(function() {
    jQ(document.documentElement).keypress(function (e) {
        if (e.keyCode == 39 && jQ('.cycle-slideshow').data( 'cycle.opts').busy !== true)
        {
           jQ('.cycle-slideshow').cycle("next");
        }
        if (e.keyCode == 37 && jQ('.cycle-slideshow').data( 'cycle.opts').busy !== true)
        {
            jQ('.cycle-slideshow').cycle('prev');
        }
    });
}); 
```

# c# - 在 asp.net 页面上重新排序控件

> ID：14449891
> 
> 赞同：2
> 
> 时间：2013-01-22T00:55:58.137
> 
> 标签：c#, asp.net, controls, servercontrols

是否可以重新排序静态放置在页面上的 HtmlGenericControls？例如，我有一个菜单，每个部分都有一个容器元素。我想重新排列这些部分的位置。

```
<!-- hard coded in master page frontend -->

    <!-- In Masterpage frontend -->
    <div runat="server" id="menuItem1">    
    </div>

    <div runat="server" id="menuItem2">    
    </div>

    <div runat="server" id="menuItem3">    
    </div> 
```

有什么方法可以重新排序前三个控件的显示...

*我知道这很奇怪，所以请试着专注于这个问题*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T01:00:22.370

您可以获取对父控件的引用，然后按您想要的顺序重新添加控件：

```
var parent = menuItem1.Parent;
parent.Controls.Add(menuItem2);
parent.Controls.Add(menuItem1);
parent.Controls.Add(menuItem3); 
```

在此示例中，`divs`将重新排序为`menuItem2`, `menuItem1`, `menuItem3`。请注意，如果同一个容器中已经有其他控件，这也会将它们移动到最后。如果您想对放置进行更多控制，可以使用[**`.Controls.AddAt`**](http://msdn.microsoft.com/en-us/library/system.web.ui.controlcollection.addat.aspx)在指定索引处添加。

# javascript - Javascript - 使用 FileReader 将二进制记录读入 ArrayBuffers

> ID：14449893
> 
> 赞同：0
> 
> 时间：2013-01-22T00:56:11.017
> 
> 标签：javascript, html, filereader

我有一个二进制数据文件，其中每个`x`字节都是一条记录，并且我有一些格式/掩码（但是您更喜欢看到它）来破译该数据。这就像`short short int short float double`，，，废话。所以我正在使用[File API](http://www.w3.org/TR/FileAPI/)读取这个文件，我最终需要使用[ArrayBuffer](https://developer.mozilla.org/en-US/docs/JavaScript/Typed_arrays)，但我还没有……所以我的问题有两个。首先，也是最直接的，将二进制文件**中的每个字节读`x`入 ArrayBuffer 的最佳方法是什么？**

其次，当我遇到一些问题时......**为什么下面的脚本在读取 500kb 二进制文件时几乎立即填充了 5gb+ 的 RAM？**

```
$('input[type="file"]').change(function(event) {

  // FileList object
  var files = event.target.files;
  for (var i = 0, f; f = files[i]; i++) {

    var reader = new FileReader();

    // closures and magnets, how do they work
    reader.onload = (function(f) {
      return function(event) {

        // data file starts with header XML
        // indexOf +9 for </HEADER> and +1 for null byte
        var data_start = event.target.result.indexOf('</HEADER>')+10,

          // leverage jQuery for XML
          header = $(event.target.result.slice(0,data_start)),
          rec_len = parseInt(header.find('REC_LEN').text(),10);

        // var ArrayBuffer
        // define ArrayBufferView

        // loop through records
        for (var i = data_start; i<event.target.result.length; i+=rec_len) {

          // fill ArrayBuffer
          // add data to global data []
          console.log(i+' : '+event.target.result.slice(i, i+rec_len));
        }
      };
    })(f);

    // Read as Binary
    reader.readAsBinaryString(f);
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:56:42.260

至少有几个一般提示：

使用[DataView](https://developer.mozilla.org/en-US/docs/JavaScript/Typed_arrays/DataView)很灵活，但有点慢——它应该比`parseInt`调用字符串快，但不如数组视图快。好处是它支持不同的字节顺序，如果你的二进制数据需要的话。使用`reader.readAsArrayBuffer(f)`，然后在你的`onload`回调中，使用类似的东西

```
var dv = new DataView(arrayBuffer, [startCoord, [endCoord]]),
    result = [];
// in some loop for i...
    result[i] = [];
    result[i].push(dv.getInt8(coord));
    // coord += offset;
    result[i].push(dv.getFloat32(coord));
// end some loop 
```

正如我所提到的，更快的是在 ArrayBuffer 上创建多个[视图](https://developer.mozilla.org/en-US/docs/JavaScript/Typed_arrays/ArrayBufferView)，但是（据我所知）您不能随时更改光标位置——因此您的混合数据类型将是一个问题。

要将结果放入类型数组中，只需声明类似`var col1 = Uint8Array(length);`. [这里](https://developer.mozilla.org/en-US/docs/JavaScript/Typed_arrays/ArrayBufferView#Typed_array_subclasses)列出了类型化数组的子类。请注意，根据我的经验，类型化数组在性能方面不会给您带来太多好处。谷歌搜索一些类型化数组的 jsperf 测试。

# css - WordPress下拉菜单颜色更改CSS

> ID：14449894
> 
> 赞同：0
> 
> 时间：2013-01-22T00:56:17.190
> 
> 标签：css, wordpress, dom

是否可以在 CSS 中仅定位下面的“下拉父菜单”链接（我无法修改下面的代码）？

我希望定位以便我可以在 CSS 中修改它的代码行是：

```
<li class="page_item page-item-8"><a href="http://www.kb8b.com/?page_id=8">Pulldown Menu Parent</a> 
```

page-item-8 类是动态生成的，所以我不能依赖它。

完整的代码是：

```
<div id="access" role="navigation">

<div class="skip-link screen-reader-text"><a href="#content" title="Skip to content">Skip to content</a></div>

<div class="menu">
<ul>

<li class="current_page_item"><a href="http://www.kb8b.com/" title="Home">Home</a></li>

<li class="page_item page-item-19"><a href="http://www.kb8b.com/?page_id=19">Contact</a></li>

<li class="page_item page-item-8"><a href="http://www.kb8b.com/?page_id=8">Pulldown Menu Parent</a>

<ul class='children'>
<li class="page_item page-item-9"><a href="http://www.kb8b.com/?page_id=9">Test Page 2</a></li>
<li class="page_item page-item-11"><a href="http://www.kb8b.com/?page_id=11">Test Page 3</a></li>
<li class="page_item page-item-13"><a href="http://www.kb8b.com/?page_id=13">Test Page 4</a></li>
<li class="page_item page-item-15"><a href="http://www.kb8b.com/?page_id=15">Test Page 5</a></li>
<li class="page_item page-item-17"><a href="http://www.kb8b.com/?page_id=17">Test Page 6</a></li>
</ul>

</li>

</ul>

</div>

</div><!-- #access --> 
```

如何在 CSS 中访问上面的下拉菜单父链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:27:38.333

![在此处输入图像描述](../Images/902a59c4983a2cd0c2689246dbaf8bec.png)

在您的外观 > 菜单中，您可以单击`Screen Options`并单击`CSS Classes`为特定菜单项添加特定类。

[单击此处查看完整图像](https://i.stack.imgur.com/Umqfo.png)

# python - Python中线程的重复

> ID：14449898
> 
> 赞同：1
> 
> 时间：2013-01-22T00:56:35.420
> 
> 标签：python, linux

我正在尝试在 4 个内核上运行总共 8 个线程。

我通过设置亲和力将线程以 2 个为一组绑定到每个内核。

```
0,1 -> core A
2,3 -> core B
4,5 -> core C
6,7 -> core D 
```

我可以轮询线程以检查它们是否正在运行。我还能够准确地收集它（s）开始的时间、（e）nd 和（p）性能事件的收集时间。我知道集合中的两个线程中的哪一个已经死了（死了，我的意思是，执行时间已经结束）。可能存在线程 0 或线程 1 比另一个长的情况。

在任何一种情况下，即当线程 0 或线程 1 较长时，我想重复较短的线程，直到较大的线程结束。

以前，当我在整个系统上每个核心只有两个线程时。我曾经做过手动检查，比如……如果其中一个线程死了……继续运行它，直到另一个线程也死了。

但这会带来很多冗余和效率损失（因为我使用的是 IF 语句）

如果我想将它扩展到两个线程/每个核心超过两个线程，当每个核心有两个/两个以上时。我们怎么能这样？

```
I need ideas so that we can discuss on that. 
```

这就是我得到的：作为一个例子，以“ted”和“talks”作为核心 A 上的两个线程。假设 ted 是两个线程中较短的一个。我们拥有的数据：它开始、结束的时间和数据收集时间。我们可以计算线程 ted 的 end-start 和线程 talk 之间的时间差。

```
TED_TIME_DIFF = 100ms 
```

但是线程对话的时间段不断增加（从收集时间的计算中检查（c））。假设收集时间是 1 毫秒，例如它可以`TALKS_TIME_DIFF = 110ms`下一个毫秒，它是 111 毫秒 .. 等等。

我们可以继续重申 ted，直到会谈时间差异停滞不前。

```
Scripting language: Python 2.7
OS: Linux
Kernel:2.6.xx
using SPEC CPU BENCHMARK threads - if that is any importance 
```

如果你能帮助我，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:01:21.470

> *我正在尝试在 4 个内核上运行总共 8 个线程。**

除非您 (a) 生成多个进程（不是线程）或 (b) 使用没有[Global Interpreter Lock](http://en.wikipedia.org/wiki/Global_Interpreter_Lock)的备用解释器，否则您永远不会使用 Python 在超过 1 个内核上运行。

标准 Python 不会同时在多个线程中运行 Python 代码。

# asp.net-mvc - 如何在全局错误过滤器 (MVC4) 中将静态页面作为 ViewResult 返回？

> ID：14449900
> 
> 赞同：1
> 
> 时间：2013-01-22T00:56:59.830
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在尝试编写一个 FilterAttribute，IExceptionFilter 全局错误处理属性，它应该提供一个自定义错误视图。我覆盖 public void OnException(ExceptionContext context) 并做

```
context.HttpContext.Response.Clear();
context.HttpContext.Response.TrySkipIisCustomErrors = true;
context.HttpContext.Response.StatusCode = 403;

context.ExceptionHandled = true;
context.Result = new ViewResult { ... not sure what to put here... } 
```

这就是我卡住的地方。到目前为止，我所做的一切都会让我看到内部服务器错误页面。我怀疑我想要类似的东西

```
context.Result = new ViewResult
{
    ViewName = "~/Errors/ReadOnlyMode.cshtml",
} 
```

但是，这似乎不起作用（内部服务器错误......）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T07:11:57.983

这应该工作

```
context.Result = new ViewResult
{
    ViewName = "~/Views/Errors/ReadOnlyMode.cshtml",
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T01:03:29.933

```
context.Result = new RedirectToRouteResult(
    new RouteValueDictionary 
    { 
        { "Controller", "Errors" }, 
        { "Action", "ReadOnlyMode" } 
    }); 
```

这对我来说很好。

# php - 知道如何确定它是文件夹还是文件的最佳方法

> ID：14449906
> 
> 赞同：0
> 
> 时间：2013-01-22T00:57:36.410
> 
> 标签：php, codeigniter, directory

我正在寻找如何确定它是文件还是文件夹类型的最佳方法。我在这里的主要动机是计算文件夹，但我有一种情况，我的文件夹可以命名为 test.ok 并且代码也应该计算这个，只要它是我的计数器应该增加的文件夹。

关于这个的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T00:59:25.303

[is_dir](http://php.net/manual/en/function.is-dir.php)似乎是您要查找的 PHP 命令：判断给定文件名是否为目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T01:00:29.797

我会说用它来检查目录/文件

```
if(is_file($file))#File
if(is_dir($file))#directory/folder 
```

**根据您可能想尝试的评论进行**编辑**`echo filetype($file)`**

# java - 需要来自 Google Places api 的 photo_reference

> ID：14449910
> 
> 赞同：0
> 
> 时间：2013-01-22T00:57:51.667
> 
> 标签：java, php, android, json

我正在使用谷歌地方的 api 来获取照片，但我遇到了问题。这里是：

所以我正在使用谷歌地方的api。我得到一个地方的结果。但这是我保存结果的代码：

```
 @Key
public String id;

@Key
public String name;

@Key
public String reference;

@Key
public String icon;

@Key
public String vicinity;

@Key
public String website; 
```

现在我从谷歌得到的结果是这样的：

```
"icon" : "http://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png",
      "id" : "4f89212bf76dde31f092cfc14d7506555d85b5c7",
      "name" : "Google Sydney",
      "photos" : [
         {
            "height" : 1536,
            "html_attributions" : [ "Van Google-gebruiker" ],
            "photo_reference" : "CoQBdQAAAPga2KHTGQ7bwXYWqWdcjk3ysuclkMPLwteQJQKCLDTNSIW3r3UXXph7Xvd1xDglxSo4Tj_kQ7PtbmEp7nFbXs8-_TgX15Uw3yvjSs6InXSypn9RXEG46sjFZ1jnIK53_mGtwPf9X2IAUriXYsBaSq-eQ5y5QN6XuzjxoAPm-MBjEhD6ijhkCpZni0RmQthFsmBaGhSFdmnUCWAm_yacKUUWCRvP1Ci7Sg",
            "width" : 2048
         },
         {
            "height" : 480,
            "html_attributions" : [ "Van Google-gebruiker" ],
            "photo_reference" : "CnRqAAAAP3g4h5maCy8vR4D--VmH_LCCdoo07fGP9nsi0EvYF_U9dsdmGf_pLNl71drFGkAi4DOHkyv1SD66iaRUL7C-C8Ywjh1I5Z5zexGdzmVV4ST9FKrPRQzW3nalzEF4cf2hJYPKD_QjcW9a-4mhR1eaihIQpipj9088MwpwIDEUiQ85PRoUENmOYDyfcp2INEjovgLgUVVx7k8",
            "width" : 640
         }
      ], 
```

现在我只需要 photo_reference。我怎样才能做到这一点？因为它在一个数组中？我只需要第一个 photo_reference。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T02:34:04.487

在您的代码中使用此 url 和您的密钥和您的 photo_reference：

```
https://maps.googleapis.com/maps/api/place/photo?maxwidth=70&photoreference=CoQBdQAAAPga2KHTGQ7bwXYWqWdcjk3ysuclkMPLwteQJQKCLDTNSIW3r3UXXph7Xvd1xDglxSo4Tj_kQ7PtbmEp7nFbXs8-_TgX15Uw3yvjSs6InXSypn9RXEG46sjFZ1jnIK53_mGtwPf9X2IAUriXYsBaSq-eQ5y5QN6XuzjxoAPm-MBjEhD6ijhkCpZni0RmQthFsmBaGhSFdmnUCWAm_yacKUUWCRvP1Ci7Sg&sensor=true&key=YOURKEYHERE 
```

请记住：参数 maxwidth 可以设置到您的响应参数上的图片限制：“height”：480

# php - 约定表名（带下划线）

> ID：14449912
> 
> 赞同：18
> 
> 时间：2013-01-22T00:58:16.893
> 
> 标签：php, orm, laravel, eloquent

Laravel 3/4 中该表的正确**表名是什么？**

**结构**
image_projects (id, project_id, image, ext, size, created_at, updated_at, active)

```
image_projects
imageprojects
imageProjects 
```

而且，我如何创建模型？

```
app/models/image_projects.php
app/models/imageprojects.php
app/models/imageProjects.php
app/models/image/projects.php
app/models/projects/image.php 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-22T00:59:35.647

只要你以单数形式命名文件和类，类名以大写字母开头，你命名你的表就没有区别。

您可以使用以下任何选项：

**表名：** `image_projects`

**文件名：** `ImageProject.php`

**班级名称：** `ImageProject`

* * *

**表名：** `imageprojects`

**文件名：** `Imageproject.php`

**班级名称：** `Imageproject`

* * *

**表名：** `imageProjects`

**文件名：** `ImageProject.php`

**班级名称：** `ImageProject`

在这种情况下，您必须`$table`自己设置属性。

* * *

**记住：**如果你没有以你命名表的单数形式命名你的类，你必须在你的模型中手动设置它：

```
class ImageProjects extends Eloquent
{
    public $table = 'image_projects';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-08T14:30:20.030

当前的 Laravel 4.2 版表名约定可以这样工作：

**表名：** `image_projects`

**文件名：** `ImageProject.php`

**班级名称：** `ImageProject`

驼峰式类名迫使我例外地使用表名下划线。

# ruby - 了解 ActiveRecord 是如何存在的？在建立协会时工作

> ID：14449913
> 
> 赞同：0
> 
> 时间：2013-01-22T00:58:52.030
> 
> 标签：ruby, activerecord, factory-bot, activemodel

我有两个通过`has_many`关系关联的模型。例如

```
class Newspaper < ActiveRecord::Base
  has_many :articles
end

class Article < ActiveRecord::Base
  belongs_to :newspaper

  validates :uid, presence: true,
                  uniqueness: { case_sensitive: true }
end 
```

一份报纸每天更新几次，但我们只想构建和添加不存在的文章到关联中。以下代码是我实现这一目标的第一步。

```
new_articles.each do |article|
  unless newspaper.articles.exists? uid: article.uid
    newspaper.articles.build(uid: article.uid)
  end
end 
```

报纸对象要么是新的且未保存，要么是在此时使用现有关系检索到的。

我的测试表明，我可以使用上面的代码向报纸添加具有相同 UID 的两篇文章，这显然不是我想要的。

*在我看来，我当前的代码在保存时*会导致验证失败，因为验证着眼于整个*文章*表的唯一性，而不是*关联*。

我正在努力理解的是该`exists?`方法在这种情况下的行为方式（以及为什么它没有按计划保存我的培根）。我正在使用 FactoryGirl 构建一份报纸，添加一篇文章，然后模拟包含与我已经添加的文章具有相同 uid 的文章的更新。如果代码有效，我应该只得到一篇相关的文章，但我得到了两篇。使用其中之一`build`或`create`没有区别，因此文章记录是否已经存在于数据库中似乎不会改变结果。

谁能阐明我如何才能达到预期的结果*，或者*为什么该`exists?`方法没有达到我的预期？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:21:22.540

根据关联，该关联`exists?`实际上创建了一个范围查询。这就是您现有的文章过滤器不起作用的原因。

```
unless newspaper.articles.exists? uid: article.uid

# `articles.exists?` here will produce this if the newspaper is new 
#   ... WHERE "articles"."newspaper_id" IS NULL AND "articles.uid" = '<your uid>'

# and this, if the newspaper is persisted (with an id of 1)
#   ... WHERE "articles"."newspaper_id" = 1 AND "articles.uid" = '<your uid>' 
```

新报纸的案例显然是错误的，因为它只会返回带有`nil`报纸 ID 的文章。但是持久化的情况也可能是不可取的，因为它仍然不必要地过滤报纸 ID，而您真正关心的是 UID 是唯一的。

相反，您可能只想简单地反对`Article`，而不是`exists?`通过关联来确定范围，例如：

```
unless Article.exists? uid: article.uid 
```

* * *

关于您的其他问题：

> 这似乎是一个 FactoryGirl 问题，其中 create 方法没有像在 irb 中那样创建数据库条目。

`FactoryGirl.create`仍应遵守验证。查看您的测试可能会有所帮助。

# jquery - 在 setTimeout 事件上使用 live()

> ID：14449918
> 
> 赞同：-1
> 
> 时间：2013-01-22T00:59:03.230
> 
> 标签：jquery, settimeout, live

所以我有这两段代码。

```
$(".hideMessage").live("click", function(event) {
   $('.messageSuccess').hide("slow");
   return false;
}); 
```

和

```
setTimeout(function(){
   $(".messageSuccess").hide("slow") 
}, 10000); 
```

基本上第一段`.messageSuccess`在`.hideMessage`被点击时隐藏，并且使用`live()`所以如果我`.messageSuccess`之后通过 AJAX 生成任何内容，我仍然可以到达它们。

`.messageSuccess`如果用户`.hideMessage`在 10 秒内未单击链接，则第二段隐藏。问题是，我怎样才能`live()`在第二段中使用，以便控制生成的 AJAX `.messageSuccess`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T01:01:27.357

您需要知道何时`.messageSuccess`添加新元素以便在创建时设置超时。最好的选择是修改脚本以在添加新元素时设置超时。但是，如果您不能这样做（例如您无法控制的第三方脚本），那么您需要设置轮询间隔来检查新元素的存在。

例如：

```
setInterval(function(){
    $('div.messageSuccess').each(function(){
        var $this = $(this);
        if ($this.data('hideScheduled'))
            return;
        $this.data('hideScheduled', true);
        setTimeout(function(toHide){ toHide.hide('slow'); }, 10000, $this);
    });
}, 2000); 
```

该脚本将在新`div.messageSuccess`元素出现 10-12 秒后自动隐藏它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T01:02:30.727

您不需要这样做，因为`$(".messageSuccess")`选择`.messageSuccess`当前在 DOM 中的所有元素，无论它们是否由 AJAX 添加。

在不相关的说明中，如果您使用 jQuery 1.7+ 更新`.live`到`.on`.

# imagemagick - ImageMagick 绘制文本在山狮中不起作用

> ID：14449919
> 
> 赞同：2
> 
> 时间：2013-01-22T00:59:07.827
> 
> 标签：imagemagick, osx-mountain-lion, imagemagick-convert

刚刚在我的 Mac 上将 ImageMagick 升级到 6.8.0-19，文本的绘制突然停止工作。当前代码是：

```
system("convert #{output.path} -fill black -pointsize 26 -gravity SouthWest -draw \"text 30,8 #{string}\" #{output.path}") 
```

当我将代码推送到 Heroku（运行 ImageMagick 6.5.7-8）时，文本仍然可以很好地呈现。有谁知道出了什么问题？

# facebook-graph-api - 在 Facebook Graph API 中获取没有用户登录的访问令牌？

> ID：14449927
> 
> 赞同：4
> 
> 时间：2013-01-22T00:59:57.010
> 
> 标签：facebook-graph-api, coldfusion, facebook-javascript-sdk, facebook-php-sdk

我正在使用 facebook graph api rsvp_event。我正在使用 JavaScript SDK。用户登录时一切正常。但是当用户未登录时，它会出错。

我需要有关谁参加公共活动的信息。我现在明白我需要一个访问令牌来检索此信息。所以，我的问题是**如果没有用户登录，我如何获得访问令牌？**这是不可能的还是有解决方法？可以在服务器端使用`app_id`and完成`client_secret`吗？

我正在开发一个 ColdFusion 页面，但如果需要，我可以使用 PHP。我对两者都有支持。

我听说过 *offline_access_permission* 这个词。他们已删除此功能。可以在它仍然可用的时候完成吗？

**编辑：**

这可以通过以下方式实现`test user`吗？比如说，在服务器端我通过测试用户登录，获取事件信息（只是一个“获取”请求来读取谁正在参加一个事件）然后注销。在客户端，我做剩下的事情（用户登录，回复一个事件）。

我不太了解“测试用户”或其目的。谁能确认这是否可以实现？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T07:42:40.533

您确定您确实需要用户的访问令牌吗？根据[此处](https://developers.facebook.com/docs/reference/api/event/)的文档，您可能需要：

```
- a generic access_token for public events (those whose privacy is set to OPEN)
- a user access_token for a user who can see the event for non-public events
- an app access_token (for non-public events, must be the app that created the event)
- a page access_token (for non-public events, must be the page that created the event) 
```

您可以在此处获取有关如何获取这些令牌的信息[https://developers.facebook.com/docs/concepts/login/access-tokens-and-types/](https://developers.facebook.com/docs/concepts/login/access-tokens-and-types/)

一个好主意可能是在您有权访问事件时存储参加用户（在数据库中） - 当某个用户登录时。

从 FileContent 获取数据的更新。

我不知道您到底指的是什么 API 响应，但根据我的经验，它们正在返回数据： - 使用 JSON 序列化 - 您需要使用 DeserializeJSON()，例如像这样：

```
local.returnStruct = DeserializeJSON( local.requestResult.FileContent ); 
```

或者

```
local.returnStruct = DeserializeJSON( local.requestResult.FileContent.toString() ); 
```

*   以类似于 URI 的形式发送。我正在使用一个函数来获取该数据：

    ```
    function getStructFromQueryString( queryString ) {
        var ret = StructNew();
        var i = 0;
        var key = '';

        for(i=1; i LTE ListLen(arguments.queryString,'&'); i++) {
            key = ListGetAt(arguments.queryString, i, '&');
            ret[ListFirst(key,'=')] = URLDecode(ListLast(key,"="));
        }

        return ret;
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T01:22:43.380

基本上你想要的是一个刷新令牌，当用户离线时可以获得访问令牌，不幸的是，据我所知，facebook不再提供它们。

要了解有关 oauth2 的更多信息，请使用[https://developers.google.com/oauthplayground/](https://developers.google.com/oauthplayground/) ，它是了解 oauth2 过程的非常好的工具。

# php - 使用 PHP 的 MySQL 动态数据透视表

> ID：14449928
> 
> 赞同：0
> 
> 时间：2013-01-22T01:00:00.687
> 
> 标签：php, mysql, dynamic, pivot

我使用 MySQL Workbench 进行了以下动态枢轴工作。然而，我有使用 PHP 执行它的问题。在过去的 7 天里，我尝试了很多次，但它根本不起作用。需要一些关于 PHP 代码应该如何运行的信息。

```
SET @sql = NULL;
SET group_concat_max_len=15000;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'COUNT(IF(int_supplierid = ',
      int_supplierid,
      ', int_projectid, NULL)) AS NO',
      int_supplierid
    )
  ORDER BY int_supplierid) INTO @sql
FROM tbl_po;
SET @sql = CONCAT('SELECT int_userid, ', @sql, ' FROM tbl_po GROUP BY int_userid');
PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

我使用的第一个 php 代码；

```
<?php
require_once('myconn.php');

$approval="SET @sql = NULL;
SET group_concat_max_len=15000;"

$approval3="
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'COUNT(IF(int_supplierid = ',
      int_supplierid,
      ', int_projectid, NULL)) AS NO',
      int_supplierid
    )
  ORDER BY int_supplierid) INTO @sql
FROM tbl_po;
SET @sql = CONCAT('SELECT int_userid, ', @sql, ' FROM tbl_po GROUP BY int_userid');
PREPARE stmt FROM @sql;
EXECUTE stmt;"

$RSFeed2 = mysql_query($approval) or die(mysql_error());
$RSFeed2 = mysql_query($approval3) or die(mysql_error());
$totalRows_RSFeed = mysql_num_rows($RSFeed2);
echo $RSFeed2['int_userid'];
echo $totalRows_RSFeed;
?> 
```

我使用并尝试过的第二个；

```
$host="127.0.0.1";
$port=3306;
$socket="";
$user="root";
$password="pwd";
$dbname="kelupis";

$con = new mysqli($host, $user, $password, $dbname, $port, $socket)
    or die ('Could not connect to the database server' . mysqli_connect_error());

//1st query
$query1 = "SET @sql = NULL;
SET group_concat_max_len=15000; SELECT   GROUP_CONCAT(DISTINCT     CONCAT('COUNT(IF(int_supplierid = ',int_supplierid,', int_projectid, NULL)) AS NO',int_supplierid)   ORDER BY int_supplierid) INTO @sql FROM tbl_po;";

if ($stmt = $con->prepare($query1)) {
    $stmt->execute();
    $stmt->bind_result($int_supplierid);
    while ($stmt->fetch()) {
        printf("%s\n", $int_supplierid);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:13:46.303

PHP 的 mysql API 不支持多查询。

换句话说，您不能准备和执行包含多个用分号分隔的 SQL 语句的字符串。

同样，mysqli 不支持使用普通 mysqli::query() 函数进行多查询。您必须使用[mysqli::multi_query()](http://php.net/manual/en/mysqli.multi-query.php)。

但是多查询[确实是个坏主意](http://xkcd.com/327/)。您应该坚持一一执行语句。

PS：从PHP 5.3.0 开始， mysql 扩展已被[弃用，因此您应该在任何新代码中使用 mysqli 或 PDO。](http://php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)

* * *

我从您的示例中看到您正在尝试进行动态支点。您希望每个供应商标识有一列，该列的值应该是该供应商标识的计数。

将这些计数输出为*行*而不是列更简单、更有效：

```
$query = "SELECT int_supplierid, COUNT(int_projectid) 
    FROM tbl_po GROUP BY int_supplierid";

if (!($stmt = $con->prepare($query))) {
    die($con->error);
}
if (!$stmt->execute()) { 
    die($stmt->error); 
}
$stmt->bind_result($int_supplierid, $no);
while ($stmt->fetch()) {
    printf("%s: %d\n", $int_supplierid, $no);
} 
```

# python - Django：跨子模型字段聚合

> ID：14449938
> 
> 赞同：3
> 
> 时间：2013-01-22T01:00:57.077
> 
> 标签：python, django

我目前有以下模型，其中有一个`Product`类，其中有很多`Ratings`. 每个`Rating`都有一个`date_created`DateTime 字段和一个`stars`字段，该字段是从 1 到 10 的整数。有没有办法可以将某一天所有产品的星级总数相加？

例如，在 12 月 21 日，所有产品总共获得了 543 颗星（即 A 项为 200 颗星，B 项为 10 颗星，C 项为 233 颗星）。第二天，可能会有 0 颗星，因为没有任何产品的评分。

我可以想象首先获取日期列表，然后过滤每个日期，然后汇总每个日期，但这似乎非常密集。有没有更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T01:22:29.107

您应该能够在一个查询中完成所有操作，使用`values`：

```
from datetime import date, timedelta
from django.db.models import Sum

end_date = date.now()
start_date = end_date - timedelta(days=7)

qs = Rating.objects.filter(date_created__gt=start_date, date_created__lt=end_date)
qs = qs.values('date_created').annotate(total=Sum('stars'))

print qs 
```

应该输出如下内容：

```
[{'date_created': '1-21-2013', 'total': 150}, ... ] 
```

它的 SQL 看起来像这样（省略了 WHERE 子句）：

```
SELECT "myapp_ratings"."date_created", SUM("myapp_ratings"."stars") AS "total" FROM "myapp_ratings" GROUP BY "myapp_ratings"."date_created" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T01:27:10.033

您总是可以只执行一些原始 SQL：

```
from django.db import connection, transaction
cursor = connection.cursor()
cursor.execute('SELECT date_created, SUM(stars) FROM yourapp_rating GROUP BY date_created')
result = cursor.fetchall()  # looks like [('date1', 'sum1'), ('date2', 'sum2'), etc] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T01:06:02.680

你会想要使用 Django 的[聚合函数](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)；具体来说，[`Sum`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#sum).

```
>>> from django.db.models import Sum
>>>
>>> date = '2012-12-21'
>>> Rating.objects.filter(date_created=date).aggregate(Sum('stars'))
{'stars__sum': 543} 
```

附带说明一下，您的方案实际上根本不需要使用任何子模型。由于`date_created`字段和`stars`字段都是`Rating`模型的成员，因此您可以直接对其进行查询。

# c# - WCF web 服务和 getJSON 返回空数据以进行跨域调用

> ID：14449940
> 
> 赞同：1
> 
> 时间：2013-01-22T01:01:02.393
> 
> 标签：c#, jquery, asp.net-mvc, wcf, rest

我有一个返回 JSON 格式数据的 WCF 服务。当我使用 Web 浏览器时，我可以很容易地看到结果，但是当使用 Jquery getJSON 时，我无法让它工作。我可以在提琴手中看到它正在返回数据，但在萤火虫中它显示为红色字体和空响应。

这是我的 WCF 服务

```
[OperationContract]
[WebInvoke(Method = "GET",
    ResponseFormat = WebMessageFormat.Json,
    BodyStyle = WebMessageBodyStyle.Wrapped,
    UriTemplate = "GetUrl/{iType}")]
String GetUrl(string iType);

    public String GetUrl(string iType)
    {

            return strurl;
        } 
```

我的 JSON 调用看起来像这样

```
 $.getJSON("http://localhost/UrlSvc/UrlService.svc/GetUrl/1",
function (data) {
    console.log("Data JSOn Got");
    $.each(data.items, function (i, item) {
        console.log("Data Received");
    });
}); 
```

当我只是将该网址放在浏览器中时，我会得到下面的响应，如预期的那样

```
{"GetChartUrlResult":"ulr_fdba9bc2-7ff7-467f-a6e0-6f4d234169d2.png"} 
```

但是 getJSOn 返回 Empty Response，如 Firebug 中所见，url 本身带有红色字体。这是一个跨域调用，我已经启用了跨域它 WCF

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T01:14:25.717

浏览器不允许跨域 AJAX 调用并阻止 XMLHTTPRequest 发生在任何域，但加载包含脚本或页面的域除外。

为了解决这个问题，您可以使用将 AJAX 响应包装在 javascript 中的 JSONP 调用。您将以下查询字符串条目添加到您的请求中：

```
callback=? 
```

另外，请注意，如果您使用 WCF，则需要在您的服务中启用 JSONP。您可以通过在您的配置文件中将 crossDomainScriptAccessEnabled 属性设置为 true 来执行此操作：

```
<system.serviceModel>
  <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
  <standardEndpoints>
    <webScriptEndpoint>
      <standardEndpoint name="" crossDomainScriptAccessEnabled="true"/>
    </webScriptEndpoint>
  </standardEndpoints>
</system.serviceModel> 
```

有关 JSONP 和 WCF 的更多信息，请参见[此处](http://msdn.microsoft.com/en-us/library/ee834511.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T01:08:37.097

如果调用是跨域的，你必须使用jsonp。`$.getJSON`您可以通过添加到 URL来使用它`?callback=?`（取决于服务器端 API）。确保您的 API 确实支持适当地发出回调。

此处的文档：http: [//api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-07T00:05:39.257

很抱歉迟到了——你不必使用 jsonp，我将 WCF 与 angularjs、jquery、移动应用程序等一起使用——从不使用 jsonp。

只需像下面这样装饰您的类和属性，它就会序列化。

```
[DataContract]
public class MyCustomClass
{
   [DataMemember]
   public string Name { get;  set;}
} 
```

# cocoa - 可可相当于 AppleScript 'tell application'

> ID：14449944
> 
> 赞同：0
> 
> 时间：2013-01-22T01:01:47.023
> 
> 标签：cocoa, applescript

在 AppleScript 中，我可以简单地运行

```
tell application "Spotify" to playpause 
```

Spotify 神奇地暂停了。但是我可以在 Cocoa 中做到这一点吗？我说的是内置的 Cocoa 方法。即使我可以只运行 AppleScript 文件，也必须有一种更有效的方法来完成它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T01:04:15.013

阅读[Scripting Bridge](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ScriptingBridgeConcepts/Introduction/Introduction.html)。

# xcode - 显示后调整 NSPopover 的大小

> ID：14449945
> 
> 赞同：7
> 
> 时间：2013-01-22T01:01:49.130
> 
> 标签：xcode, cocoa, nspopover

我有一个 NSPopover，他的内容是 NSView。我创建弹出窗口并添加如下视图：

```
NSPopover *thePopover = [[NSPopover alloc] init];
[thePopover setContentViewController:myViewController]; 
```

然后我显示弹出框并设置大小：

```
[thePopover setContentSize:NSMakeSize(300.0f, 160.0f)]; 
```

此时弹出框是可见的并且其内容视图是正确的。有没有一种方法可以在不关闭并重新显示它的情况下调整弹出框的大小？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T23:53:40.230

我能够通过委托协议回调启动弹出框的控制器并使用重置大小来实现这一点`setContentSize:`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T08:02:47.317

从[文档中](http://developer.apple.com/library/mac/documentation/AppKit/Reference/NSPopover_Class/Reference/Reference.html#//apple_ref/occ/instp/NSPopover/contentSize)：

> 设置内容视图控制器时，弹出框的内容大小设置为与内容视图的大小匹配。

因此，[设置](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/setFrame%3a)弹出框内容视图的框架。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-29T14:40:37.233

`NSWindow``_popover`具有存储对 . 的引用的私有属性`NSPopover`。您可以使用它从任何（然后调用它）访问`NSPopover`实例，如下所示：`NSViewController``setContentSize:`

```
- (NSPopover *)popover
{
    NSWindow *window = self.view.window;
    NSPopover *popover = [window valueForKey:@"_popover"];
    return popover;
} 
```

# sql - Informix 更改/更新表信息

> ID：14449952
> 
> 赞同：1
> 
> 时间：2013-01-22T01:03:39.477
> 
> 标签：sql, sql-update, informix

我正在使用 informix 数据库，并且想将显示的值从“N”更改为“Y”...我正在运行以下 sql，但似乎遇到了语法错误：

```
UPDATE tablename 
SET displayed ='Y' 
WHERE flag= 'S' OR flag ='DEP' OR flag = 'WTD'; 
```

我正在使用 or，因为在所有 3 种情况下我都希望显示为 Y。有关正确语法以及如何更新或更改 informix 中的表的任何帮助都会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:21:22.843

如果我理解正确，如果该列包含所有三个值，则您希望更新该列：
`'S', 'DEP', 'WTD'`.

您可以创建一个子查询来获取具有所有三个值的行，例如。

```
UPDATE  tableName 
SET     displayed = 'Y'
FROM    tableName, 
        (
            SELECT  primary
            FROM    tableName
            WHERE   flag IN ('S', 'DEP', 'WTD')
            GROUP   BY primary
            HAVING  COUNT(flag) = 3
        ) b 
WHERE   tableName.primary = b.primary 
```

只需将列更改`Primary`为组内的公共行值。

*   [Informix 更新与加入](http://publib.boulder.ibm.com/infocenter/idshelp/v10/index.jsp?topic=/com.ibm.sqlt.doc/sqltmst150.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T12:52:15.827

在理解了您的问题后，我尝试了以下方法并且它对我有用，我没有在 Informix 上发现任何语法错误。

以下是我尝试过的

```
UPDATE <TABLE_NAME>
SET action='A'
WHERE action = 'I' OR action = 'U';"

Database selected.

57 row(s) updated.

Database closed. 
```

所以在语法上我没有发现错误。

你能分享你得到的语法错误吗？

确保所有列都存在于同一个表中，如果它们在另一个表中，则使用别名。

与 EXISTS 相比，使用 IN 关键字效率低下

以下替代方法：

```
UPDATE <TABLE_NAME>
SET action='A'
WHERE EXISTS
(    SELECT action 
     FROM <SAME_TABLE_NAME>
     WHERE action = 'I' OR action = 'U'
); 
```

这也经过了试验和测试，并为我工作。

干杯。

# c# - 如何从屏幕创建图像并在屏幕上找到它们？

> ID：14449953
> 
> 赞同：0
> 
> 时间：2013-01-22T01:04:05.837
> 
> 标签：c#, bitmap, screen

我正在使用一个名为 simba 的工具，它有用于 pascal 的库，我正在使用的函数被调用和使用如下：

```
bitmapfromscreen(x, y, x', y') : integer
findbitmapin(bmp, x, y, x', y') : boolean 
```

我开始学习 C#，但我找不到 Visual C# 的类似函数（有这个函数 getpixel，但我无法产生任何有效的东西）我查看了许多采用类似过程的示例，但它们是相当复杂的程序我无法解决。如果有办法做这些工作，你能告诉、展示或提供链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T14:55:45.837

我在互联网上找到的代码如下所示：

```
public Bitmap PrintScreen()
    {
        Rectangle rect = new Rectangle(Cursor.Position.X, Cursor.Position.Y, 500, 360);//Screen.PrimaryScreen.Bounds;
        int color = Screen.PrimaryScreen.BitsPerPixel;
        PixelFormat pFormat;
        switch (color)
        {
            case 8:
            case 16:
                pFormat = PixelFormat.Format16bppRgb565;
                break;

            case 24:
                pFormat = PixelFormat.Format24bppRgb;
                break;

            case 32:
                pFormat = PixelFormat.Format32bppArgb;
                break;

            default:
                pFormat = PixelFormat.Format32bppArgb;
                break;
        }
        Bitmap bmp = new Bitmap(rect.Width, rect.Height, pFormat);
        Graphics g = Graphics.FromImage(bmp);
        g.CopyFromScreen(rect.Left, rect.Top, 0, 0, rect.Size);
        return bmp;
    } 
```

然后在你的代码中你可以这样做：

```
Bitmap screenImage = PrintScreen(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T01:09:40.173

您是否尝试过这种从屏幕复制的方法？

[http://msdn.microsoft.com/en-us/library/system.drawing.graphics.copyfromscreen.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.copyfromscreen.aspx)

# windows - Python 在 KeyDown [ctrl]+[c] 上使用 pyHook.HookManager() 崩溃

> ID：14449956
> 
> 赞同：0
> 
> 时间：2013-01-22T01:04:18.187
> 
> 标签：windows, python-3.x, pyhook

我正在创建一个 python 脚本来记录我在系统上按下的键（键盘记录器），并用我的打字习惯的信息打电话回家。我是 python 新手，我正在使用这个应用程序来了解它。我正在使用 python-3.x 和 windows 8

完整的源代码可以在这里找到 [https://github.com/funvill/QSMonitor/blob/master/monitor.py](https://github.com/funvill/QSMonitor/blob/master/monitor.py)

使用这个片段，我可以记录整个系统中的所有按键。问题是当我 [ctrl]+[c] 在另一个窗口中复制某些内容时，python 代码会崩溃。

**重现步骤**

1.  运行 monitor.py 脚本
2.  在另一个窗口 (notepad.exe) 中键入几个字母 (abcd)。
3.  突出显示记事本中的字母并按住 [ctrl] 并按 [c]

**有经验的：**

将弹出一条 Windows 错误消息并告诉我 python.exe 已停止运行，需要重新启动。命令窗口中没有 python 错误消息。

```
def OnKeyboardEvent(event):
    global keyDatabase
    global keyLoggerCount 
    keyLoggerCount += 1 

    # http://code.activestate.com/recipes/553270-using-pyhook-to-block-windows-keys/ 
    print ('MessageName:',event.MessageName )
    print ('Message:',event.Message)
    print ('Time:',event.Time)
    print ('Window:',event.Window)
    print ('WindowName:',event.WindowName)
    print ('Ascii:', event.Ascii, chr(event.Ascii) )
    print ('Key:', event.Key)
    print ('KeyID:', event.KeyID)
    print ('ScanCode:', event.ScanCode)
    print ('Extended:', event.Extended)
    print ('Injected:', event.Injected)
    print ('Alt', event.Alt)
    print ('Transition', event.Transition)
    print ('---')    

    # check to see if this key has ever been pressed before 
    # if it has not then add it and set its start value to zero. 
    if event.Key not in keyDatabase:
        keyDatabase[ event.Key ] = 0 ; 

    # Incurment the key value 
    keyDatabase[ event.Key ] += 1 ; 
    return True

# When the user presses a key down anywhere on their system 
# the hook manager will call OnKeyboardEvent function.     
hm = pyHook.HookManager()
hm.KeyDown = OnKeyboardEvent
hm.HookKeyboard()

while True : 
    pythoncom.PumpWaitingMessages() 
```

**我的问题是：**

*   什么可能导致副本和过去崩溃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T13:45:12.080

如果要捕获`KeyboardInterrupt`异常，可以使用嵌套循环。这样，当发生 KeyboardInterrupt 时，程序只退出内部循环。

```
while True:
    try:
        while True:
            pythoncom.PumpWaitingMessages()
    except KeyboardInterrupt:
        pass 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T01:05:18.677

在 python 中，Ctrl+C 会抛出 KeyboardInterrupt 异常。

[http://docs.python.org/2/library/exceptions.html#exceptions.KeyboardInterrupt](http://docs.python.org/2/library/exceptions.html#exceptions.KeyboardInterrupt)

# mysql - 使用一个应用程序连接到 mysql 和 gae RDBMS

> ID：14449959
> 
> 赞同：0
> 
> 时间：2013-01-22T01:04:36.157
> 
> 标签：mysql, eclipse, squirrel-sql

我已经在本地安装了 MySQL，并尝试将其用作开发服务器，然后将历史记录和主数据上传到 GAE 上的 RDBMS。我可以使用 ... c:>mysql -u root -p ...连接到本地 MySQL 并
使用 ...c:>google_sql.cmd [instance] ...连接到 RDBMS ...但是我该怎么做一个程序中的两个连接。我试过使用 Squirrel 和 Eclipse，我可以连接到本地但不能连接到 GAE。在一个应用程序中附加到两者的最佳方法是什么。

谢谢丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:57:12.590

您是否阅读（并遵循）[Google 关于如何让 Squirrel 工作的说明？](https://developers.google.com/cloud-sql/docs/admin_tools)因为我已经使用 Squirrel 的 DBCopy 插件在几个品牌的 db 之间复制数据，而且据我所知，从 Squirrel 的角度来看，Google 的 db 只是正确设置后的另一个 jdbc 连接。

# .net - powershell中哈希表的数组/对象键

> ID：14449961
> 
> 赞同：3
> 
> 时间：2013-01-22T01:04:51.803
> 
> 标签：.net, powershell, clr, value-type, reference-type

使用数组键创建散列时，如何生成键来查找散列值。也就是说，没有从哈希的枚举器中获取它

```
$a = @{"a" = "1"
        "b" = "2"
        ("c","c1") = "3"} 
```

使用常规数组似乎不起作用。

```
$k1 = @("c","c1")
$a.ContainsKey($k1)  #false 
```

但是，如果在创建时使用数组对象，这似乎可行。

```
$k1 = @("c","c1")
$a = @{"a" = "1"
     "b" = "2"
 $k1 = "3"}
$a.ContainsKey($k1) #true 
```

例如，如果我用它来生成一个哈希表：

```
$a = Get-Eventlog system -newest 100 | Group-Object {$_.EntryType, $_.Source } -AsHashTable 
```

我如何自己生成可用于键查找的变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T05:43:14.017

下面的修改有帮助吗？它将键变成字符串。

```
$a = Get-Eventlog system -newest 100 | Group-Object {  
    $_.EntryType, $_.Source  
} -AsHashTable -AsString 
```

也许你可以试一试。

* * *

**更新**回答，解释为什么你不能使用数组来散列你想要的方式，但字符串可以工作。

基本上，你需要知道两件事。

1.  .NET（实际上，实际上是[CLR](http://en.wikipedia.org/wiki/Common_Language_Runtime)）具有具有**值语义**的事物与具有**引用语义**的事物的概念。值语义通常用于具有简单值的事物，例如字符串和数字、、`"xyz"`和`167`（任意示例）。引用语义用于对象。 **当它们的值相同时，具有值语义的事物被认为是相等的**。 **具有引用语义的事物是不相等的，除非它们是完全相同的对象**（位于内存中的相同地址）。
    **额外的皱纹**：具有值语义的事物可以由对象表示（这可能涉及称为装箱和拆箱的东西，但我只是将它们放在那里以指向您将来的探索-现在太多了）。当使用对象来表示具有值语义的事物时，使用的基类（我认为实际上是一个结构体`System.ValueType`）`System.ValueType`是两个对象包含相等的值，它们被认为是“相等的”。
    看看下面的例子（比较两个整数与两个数组），它说明了这些事情。看看整数是如何“相等”的，而数组不是。

    `$a = 167; $b = 167; echo $($a.Equals($b)); #prints True
    $c = @(167,"xyz"); $d = @(167,"xyz"); echo $($c.Equals($d)); #prints False`

2.  任何 .NET（实际上是 CLR）对象都能够在其上计算哈希码值，如果您将该对象用作哈希键，则使用该值。函数 GetHashCode() 将为项目生成一个哈希码。例子：`$a = "xyz"; $a.GetHashCode();`

**你遇到了什么的解释**

关于您的问题，让我们将上面的 1 和 2 放在一起。由于数组具有引用语义，因此比较两个数组对象是比较两个不同内存位置的两个不同对象，并且它们不相等。此外，这意味着**它们的哈希码将不相等**。

使用上面的数组，这`echo $c.GetHashCode(); echo $d.GetHashCode();`会产生两个**不同的**哈希码。

但是，具有值语义的事物，例如两个值相同的字符串，实际上会产生相同的哈希码： `$e = "xyz"; $f = "xyz"; echo $e.GetHashCode(); echo $f.GetHashCode();`

> 因此，数组散列会给您带来问题，因为为键生成的散列码是不同的（除非您使用完全相同的数组，这是您正确观察到的）。但是通过字符串进行散列可以解决问题，因为散列码是相同的。

**最后说明**

您不需要知道这一点即可获得上述解释的实质内容，但 CLR 将为您做的一件事（通常）实际上是创建两个值相同的值类型，**当它们是**同一个对象（或结构）时您正在通过对象表示值类型。所以`$a = "xyz"; $b = "xyz";`实际上将引用同一个对象，即，$a 与 $b 是同一个对象——它们不仅值相同，而且它们是相同的。此附加信息无需与上述简化信息相冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:02:25.560

这可以接受吗？这是我的哈希表：

```
$a = @{"Aurillac"="rouge et bleu";"Lyon"="Jaune";"Paris"="Blanc"} 
```

假设`$a.keys`给出：

```
Paris
Aurillac
Lyon 
```

寻找`$b = "Aurillac","Lyon"`as 的键`$a`是两个数组之间的比较，所以：

```
$a.Keys | ? {$b -contains $_}
Aurillac
Lyon 
```

或者

```
$a.Keys | ? {$b -notcontains $_}
Paris 
```

如果你想要一个布尔结果：

```
($a.Keys | ? {$b -contains $_}) -eq $null 
```

# android - 如何在插入文本时使 android edittext 显示模式？

> ID：14449963
> 
> 赞同：0
> 
> 时间：2013-01-22T01:05:04.707
> 
> 标签：android, design-patterns, android-edittext, hint

我正在开发一个 Android 应用程序，用户必须在其中输入一个 edittext 视图的答案。为了使事情更简单，我希望编辑文本继续显示编辑文本提示的其余部分。例如，如果正确答案是：“大乔”。我生成以下提示："--- ---" 是 3 个破折号，然后是一个空格，然后是另外 3 个破折号。但是，将其设置为提示没有问题，一旦用户按下编辑文本视图，提示就会消失。我希望它保持原样并被用户输入淹没。继续这个例子，id 用户只输入（错误地）“Ji”（但还没有完成！）然后我希望 edittext 视图包含文本：“Ji- ---”。而不仅仅是“Ji”，因为它通常会。提示应该像“shdow text”或“Sit Fillers”一样，因此，一旦“坐”被填满，它就会消失。因此，对于正确答案，会发生以下情况#标记光标：开始：#-- --- 1st：B#- --- 2nd：Bi# --- 3rd：Big #-- 4th：Big j#-第五名：大乔# 第六名：大乔#。在这一点上，我不太确定是否有理由让用户输入更多字母。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T01:36:33.457

`.setText()`首先使用设置提示设置破折号。使用. 添加到您的`EditText`实例中。覆盖这些方法并使用它们来操作作为用户类型。`TextWatcher``.addTextChangedListener()``TextWatcher``EditText`

[https://developer.android.com/reference/android/text/TextWatcher.html](https://developer.android.com/reference/android/text/TextWatcher.html) 查看`Selection`类 [https://developer.android.com/reference/android/text/Selection.html](https://developer.android.com/reference/android/text/Selection.html)

# symfony - Symfony - Setting Flash and Checking in TWIG

> ID：14449967
> 
> 赞同：21
> 
> 时间：2013-01-22T01:05:30.527
> 
> 标签：symfony, twig

I am trying to set Flash in my controller, then check in TWIG if a Flash has been set. My problem is that TWIG always reports that my Flash has not been set and I am unsure why.

Controller:

```
$session->getFlashBag()->add('error', 'Does Not Exist'); 
```

TWIG:

```
{{ dump( app.session.hasFlash('error') ) }} //outputs false
{{ dump( app.session.getFlashBag().get('error') ) }} //outputs false 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-01-22T04:33:03.220

**In Controller**

```
$this->get('session')->getFlashBag()->set('error', 'Does Not Exist');

or 

$this->get('session')->getFlashBag()->add('error', 'Does Not Exist'); 
```

**In Twig**

```
{% for flashMessage in app.session.flashbag.get('error') %}

    {{ flashMessage }}

{% endfor %} 
```

FYI: [Doc](http://symfony.com/doc/master/book/controller.html#flash-messages)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-01-29T06:17:16.230

In Controller :

```
$this->get('session')->getFlashBag()->add('error', "User does not exists."); 
```

In View :

```
{% for type, messages in app.session.flashbag.all() %}
    {% for message in messages %}
        {% if type == 'error' %}
            {{ message }}
        {% endif %}
        {# Or even with css class rendering:
            <div class="flash-{{type}}">{{message}}</div>
        #}
    {% endfor %}
{% endfor %} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-07-23T12:39:55.857

It is worth noting that in the Symfony 3.3 and up we can use simplified version `app.flashes()`. Example:

```
{% for message in app.flashes('notice') %}
    <div class="flash-notice">
        {{ message }}
    </div>
{% endfor %} 
```

[Source](http://symfony.com/doc/current/controller.html#flash-messages)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-03-28T12:46:39.650

it s simplified in symfony 4 (it should works in 3.4 too)

Your controler :

```
if ($form->isSubmitted() && $form->isValid()) {
    // do some sort of processing

    $this->addFlash(
        'notice',
        'Your changes were saved!'
    );
    // $this->addFlash() is equivalent to $request->getSession()->getFlashBag()->add()

    return $this->redirectToRoute(...);
} 
```

Twig :

```
{% for message in app.flashes('notice') %}
    <div class="flash-notice">
        {{ message }}
    </div>
{% endfor %} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-07-04T20:59:11.190

Using Symfony 5\. If you want to display **all** flashes using bootstrap class naming, simply set the flash type to the bootstrap class name (success/danger/warning... etc)

In the controller set like this:

```
$this->addFlash('success', 'Action completed successfully.');
or...
$this->addFlash('danger', 'An error occurred.'); 
```

In Twig display once, in a base template for example - like this (notice the simplified app.flashes array var):

```
{% for type, messages in app.flashes %}
    {% for message in messages %}
        <div class="alert alert-{{ type }}">{{ message }}</div>
    {% endfor %}
{% endfor %} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-03T08:07:59.513

Use [FlashAlertBundle](https://github.com/rasanga/FlashAlertBundle), it provides a simplified way to handle (add/display) **Symfony flash messages**.

**Available through**
[https://github.com/rasanga/FlashAlertBundle](https://github.com/rasanga/FlashAlertBundle)
[https://packagist.org/packages/ras/flash-alert-bundle](https://packagist.org/packages/ras/flash-alert-bundle)

You just need a single line

```
{{ render_flash_alerts() }} 
```

to render flash messages

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-11T10:26:24.243

This question is pretty old now but I have not seen this answer yet.

For checking if a flash message with a specific type has been set:

Twig:

```
{% if app.session.flashBag.has('error') %}
    ...
{% endif %} 
```

The code inside the if statement will be executed, if a message with type "error" has been set. You can use iteration inside, but this is only for checking, if a message exists.

# linux - 用shell在pdf中查找字符串

> ID：14449968
> 
> 赞同：1
> 
> 时间：2013-01-22T01:05:36.930
> 
> 标签：linux, bash, shell, unix, pdf

我想知道是否有任何方法可以`pdf`使用 shell 脚本检查文件中是否有字符串？我正在寻找类似的东西：

```
if [search(string,pdf_file)] > 0 then  
   echo "exist"
fi 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T03:16:37.760

这种方法按页面转换 .pdf 文件，因此`$query`可以更具体地定位搜索字符串的出现。

```
# search for query string in available pdf files pagewise
for i in *.pdf; do
    pagenr=$(pdfinfo "$i" | grep "Pages" | grep -o "[0-9][0-9]*")
    fileid="\n$i\n"
    for (( p=1; p<=pagenr; p++ )); do
        matches=$(pdftotext -q -f $p -l $p "$i" - | grep --color=always -in "$query")
        if [ -n "$matches" ]; then
            echo -e "${fileid}PAGE: $p"
            echo "$matches"
            fileid=""
        fi
    done
done 
```

`pdftotext -f $p -l $p`将要转换的范围限制为仅由数字标识的一页`$p`。`grep --color=always`允许在随后的`echo`. `fileid=""`只需确保 .pdf 文档的文件名仅针对多个匹配项打印一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T02:00:25.827

正如 Simon 指出的那样，您可以`pdf`使用 简单地将 转换为纯文本`pdftotext`，然后搜索您要查找的内容。

转换后，您可以使用`grep`、 bash 正则表达式或您想要的任何变体：

```
while read line; do

    if [[ ${line} =~ [0-9]{4}(-[0-9]{2}){2} ]]; then
        echo ">>> Found date;";
    fi

done < <(pdftotext infile.pdf -) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T02:56:28.220

PDF 文档中的每个字母通常是单独设置的。因此，您必须将 .pdf 转换为文本，这会将文本简化为简单的流。

我会试试这个：

```
grep -q 'a \+string' <(pdf2text some.pdf - | tr '\n' ' ') && echo exists 
```

`tr`连接换行符。`\+`允许单词之间有 1 个或多个空格字符。最后，仅根据匹配`grep -q`返回退出状态。`0/1`它不打印匹配的行。

# c# - 如何判断文件是否在 C# 中是文本可读的

> ID：14449973
> 
> 赞同：0
> 
> 时间：2013-01-22T01:06:10.200
> 
> 标签：c#, file, text, encoding, human-readable

我正在做的项目列表的一部分是一个小文本编辑器。

[在某一时刻，您可以加载给定目录中的所有子目录和文件。](http://i.imgur.com/TsTmmae.png)该程序会将每个节点添加为 TreeView 中的一个节点。

我想要的功能是只添加普通文本阅读器可读的文件。

此代码当前将其添加到树中：

```
TreeNode navNode = new TreeNode();
navNode.Text = file.Name;
navNode.Tag = file.FullName;

 directoryNode.Nodes.Add(navNode); 
```

我知道我可以轻松地创建一个 if 语句，例如：

```
if(file.extension.equals(".txt")) 
```

但我必须扩展该语句以包含它可能的每一个扩展。

有没有更简单的方法来做到这一点？我认为这可能与 mime 类型或文件编码有关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T01:10:18.730

没有通用的方法来确定文件中存储的信息类型。

即使您事先知道它是某种文本，如果您不知道用于创建文件的编码是什么，您也可能无法正确加载它。

请注意，HTTP 通过 content-type 标头为您提供有关文件类型的一些提示，但在文件系统上没有此类信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T01:27:11.700

您可以使用几种方法来“最佳猜测”该文件是否为文本文件。当然，您支持的编码越多，这就越难，特别是如果计划支持 CJK（*中文*、*日文*、*韩文*）脚本。让我们从`Encoding.Ascii`现在开始`Encoding.UTF-8`。

幸运的是，大多数非文本文件（*可执行文件*、*图像*等）在其前几 KB*中*都有很多不可解析的字符。

您可以做的是获取一个文件并扫描前 1-4KB（由您决定），看看是否出现任何“不可打印”字符。此操作不会花费太多时间，并且至少可以让您确定文件的内容。

```
public static async Task<bool> IsValidTextFileAsync(string path,
                                                    int scanLength = 4096)
{
  using(var stream = File.Open(path, FileMode.Open, FileAccess.Read, FileShare.Read))
  using(var reader = new StreamReader(stream, Encoding.UTF8))
  {
    var bufferLength = (int)Math.Min(scanLength, stream.Length);
    var buffer = new char[bufferLength];

    var bytesRead = await reader.ReadBlockAsync(buffer, 0, bufferLength);
    reader.Close();

    if(bytesRead != bufferLength)
      throw new IOException("There was an error reading from the file.");

    for(int i = 0; i < bytesRead; i++)
    {
      var c = buffer[i];

      if(char.IsControl(c))
        return false;
    }

    return true;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-04T19:40:12.967

我的方法基于@Rubenisme 的评论和@Erik 的回答。

```
 public static bool IsValidTextFile(string path)
    {
        using (var stream = System.IO.File.Open(path, System.IO.FileMode.Open, System.IO.FileAccess.Read, System.IO.FileShare.Read))
        using (var reader = new System.IO.StreamReader(stream, System.Text.Encoding.UTF8)) 
        {
            var bytesRead = reader.ReadToEnd();
            reader.Close();
            return bytesRead.All(c => // Are all the characters either a:
                c == (char)10  // New line
                || c == (char)13 // Carriage Return
                || c == (char)11 // Tab
                || !char.IsControl(c) // Non-control (regular) character
                );
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T01:15:00.887

一个 hacky 方法是查看文件是否包含任何不是空格形式的较低控制字符 (0-31)（回车、制表符、垂直制表符、换行符，只是为了安全起见null 和文本结尾）。如果是这样，那么它可能是二进制的。如果没有，它可能不是。我没有做任何测试或任何事情来看看将这个规则应用于非 ASCII 编码时会发生什么，所以你必须自己进一步调查:)

# networking - 使用 tor 作为带有 python urllib2 或 mechanize 的 SOCKS5 代理

> ID：14449974
> 
> 赞同：4
> 
> 时间：2013-01-22T01:06:35.867
> 
> 标签：networking, ubuntu, urllib2, mechanize, tor

我的目标是将python的机械化与tor SOCKS代理一起使用。

我没有使用具有以下 Ubuntu 版本的 GUI：描述：Ubuntu 12.04.1 LTS 版本：12.04 代号：精确

根据 nmap 扫描，Tor 已安装并正在侦听端口 9050：

```
 Starting Nmap 5.21 ( http://nmap.org ) at 2013-01-22 00:50 UTC
    Nmap scan report for localhost (127.0.0.1)
    Host is up (0.000011s latency).
    Not shown: 996 closed ports
    PORT     STATE SERVICE
    22/tcp   open  ssh
    80/tcp   open  http
    3306/tcp open  mysql
    9050/tcp open  tor-socks 
```

我还认为看看我是否可以远程登录到端口 9050 是合理的，我可以：

```
 telnet 127.0.0.1 9050
    Trying 127.0.0.1...
    Connected to 127.0.0.1.
    Escape character is '^]'.
    quit
    Connection closed by foreign host. 
```

我对这篇文章中的建议寄予厚望，以使 tor 与 urllib2 一起工作： [如何将 SOCKS 4/5 代理与 urllib2 一起使用？](https://stackoverflow.com/questions/2317849/how-can-i-use-a-socks-4-5-proxy-with-urllib2)

所以我在python中尝试了以下脚本：

```
 import socks
    import socket
    socks.setdefaultproxy(socks.PROXY_TYPE_SOCKS5, "127.0.0.1", 9050)
    socket.socket = socks.socksocket
    import urllib2
    print urllib2.urlopen('http://icanhazip.com').read() 
```

脚本只是挂起而没有响应。

我认为由于 mechanize 似乎与 urllib2 有关，因此以下脚本可能有效：

```
 import socks
    import socket
    import mechanize
    from mechanize import Browser
    socks.setdefaultproxy(socks.PROXY_TYPE_SOCKS5, "127.0.0.1", 9050)
    socket.socket = socks.socksocket
    br = Browser()
    print br.open('http://icanhazip.com').read() 
```

我使用 urllib2 脚本得到与上面相同的结果。

我对 python 和网络非常陌生，所以我需要关于如何使 python urllib2 在非 GUI Ubuntu 服务器上使用 tor 作为 SOCKS 的第二个意见。

我运行了这个脚本并收到了预期的响应。我没有使用 tor 代理：

```
 In [1]: import urllib2

    In [2]: print urllib2.urlopen('http://icanhazip.com').read()
    xxxx:xxxx:xxxx:512:13b2:ccd5:ff04:c5f4 
```

谢谢。

我发现了一些有用的东西！我不知道它为什么会起作用，但确实如此。我在这里找到它： [Python urllib over TOR？](https://stackoverflow.com/questions/5148589/python-urllib-over-tor?rq=1)

```
 import socks
    import socket
    def create_connection(address, timeout=None, source_address=None):
        sock = socks.socksocket()
        sock.connect(address)
        return sock

    socks.setdefaultproxy(socks.PROXY_TYPE_SOCKS5, "127.0.0.1", 9050)

    # patch the socket module
    socket.socket = socks.socksocket
    socket.create_connection = create_connection

    import urllib2

    print urllib2.urlopen('http://icanhazip.com').read()

    import mechanize
    from mechanize import Browser

    br = Browser()
    print br.open('http://icanhazip.com').read() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T22:45:02.873

见问题结尾。

```
import socks
import socket
def create_connection(address, timeout=None, source_address=None):
    sock = socks.socksocket()
    sock.connect(address)
    return sock

socks.setdefaultproxy(socks.PROXY_TYPE_SOCKS5, "127.0.0.1", 9050)

# patch the socket module
socket.socket = socks.socksocket
socket.create_connection = create_connection

import urllib2

print urllib2.urlopen('http://icanhazip.com').read()

import mechanize
from mechanize import Browser

br = Browser()
print br.open('http://icanhazip.com').read() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-06T07:23:22.350

上述解决方案对我不起作用。我在 Ubuntu 14.04 上。每当我尝试运行上述脚本时，它都会抛出以下错误。

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/usr/lib/python2.7/urllib2.py", line 127, in urlopen
  return _opener.open(url, data, timeout)
File "/usr/lib/python2.7/urllib2.py", line 404, in open
  response = self._open(req, data)
File "/usr/lib/python2.7/urllib2.py", line 422, in _open
  '_open', req)
File "/usr/lib/python2.7/urllib2.py", line 382, in _call_chain
  result = func(*args)
File "/usr/lib/python2.7/urllib2.py", line 1214, in http_open
  return self.do_open(httplib.HTTPConnection, req)
File "/usr/lib/python2.7/urllib2.py", line 1184, in do_open
  raise URLError(err)
urllib2.URLError: <urlopen error ((1, 'general SOCKS server failure'),)> 
```

使用 nmap 命令检查 tor 是否正在运行。

```
Nmap scan report for localhost (127.0.0.1)
Host is up (0.00026s latency).
Not shown: 993 closed ports
PORT     STATE SERVICE
22/tcp   open  ssh
139/tcp  open  netbios-ssn
445/tcp  open  microsoft-ds
631/tcp  open  ipp
902/tcp  open  iss-realsecure
3306/tcp open  mysql
9050/tcp open  tor-socks 
```

安装[Vidalia](https://www.torproject.org/projects/vidalia.html.en)解决了这个问题。显然，socks 代理不允许连接通过它。希望这可以帮助面临同样问题的人。

# xcode - 使用红色 X 按钮退出应用程序？

> ID：14449986
> 
> 赞同：1
> 
> 时间：2013-01-22T01:08:29.887
> 
> 标签：xcode, macos, applescript

我制作了我的第一个 Mac 应用程序，它只有一个窗口，我希望它在您按下红色按钮时退出。此按钮关闭窗口，而不是目前退出应用程序，我似乎无法找到一种方法来编辑此按钮的行为任何提示？请注意，这是在 Xcode 4 中，并且是基于 Applescript 的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T04:46:00.643

我不知道 AppleScriptObjC，但这是你在 Objective-c 中的做法。我相信你可以很容易地转换这些。

基本上你不需要修改任何东西。只需将此方法放在您的应用程序委托中即可。当最后一个窗口关闭时，应用程序会自动调用它，因为它是一个 NSApplication Delegate 方法。还有许多其他 NSApplication Delegate 方法，因此您应该查看这些方法以了解您还能做什么。祝你好运。

```
- (BOOL)applicationShouldTerminateAfterLastWindowClosed:(NSApplication *)theApplication {
    return YES;
} 
```

顺便说一句，替代方法是使用 NSWindowDelegate 方法。您只需要将您的 AppDelegate （或任何其他类）设置为窗口的委托...

```
[[self window] setDelegate:self]; 
```

具体来说，您可以使用这些 NSWindowDelegate 方法中的任何一个来修改红色关闭按钮的行为。例如，您可以在其中发出 NSApp 的 terminate: 方法来按照您的要求进行操作，但您可以在其中执行任何操作。

```
- (BOOL)windowShouldClose:(id)sender

- (void)windowWillClose:(NSNotification *)notification 
```

但是 applicationShouldTerminateAfterLastWindowClosed: 是你想要的。我只是想表明有很多方法可以完成任务。

恭喜你的第一个应用程序！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-12T23:42:43.253

@regulus6633 提供的答案对我不起作用。Xcode 构建失败。

这是因为，与 OP 一样，我的 Xcode 应用程序是“Cocoa-AppleScript”应用程序，而 AppDelegate 是用 AppleScript 编写的。

所以，解决方案是：

```
script AppDelegate

--- YOUR OTHER CODE ---

   --- QUIT APP WHEN WINDOW IS CLOSED ---
   on applicationShouldTerminateAfterLastWindowClosed_(sender)
      return true
   end applicationShouldTerminateAfterLastWindowClosed_

end script 
```

我将此处理程序放在脚本块的末尾，但这可能无关紧要。

我在[http://www.macscripter.net/viewtopic.php?pid=117933#p117933找到了这个解决方案](http://www.macscripter.net/viewtopic.php?pid=117933#p117933)

# c# - MonoGame XNA Helloworld 与 Texture2D

> ID：14449988
> 
> 赞同：1
> 
> 时间：2013-01-22T01:08:43.473
> 
> 标签：c#, xna, monogame

我在使用 Texture2D 类时遇到了一些麻烦。我很确定这是一个相当简单的问题。我收到以下错误：

```
Error   1   Expected class, delegate, enum, interface, or struct    D:\_Projects\MonoGameWindowsApplication1\MonoGameWindowsApplication1\Game1.cs   14  13  MonoGameWindowsApplication1 
```

我似乎没有提到 Texture2D 类，但我不知道为什么我没有。任何帮助都会很棒。

```
#region Using Statements
using System;
using System.Collections.Generic;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Storage;
using Microsoft.Xna.Framework.GamerServices;
#endregion

namespace MonoGameWindowsApplication1
{
    private Texture2D background; // <---- This is where I get the above error.

    /// <summary>
    /// This is the main type for your game
    /// </summary>
    public class Game1 : Game
    {
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;

        public Game1()
            : base()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";

        }

        /// <summary>
        /// Allows the game to perform any initialization it needs to before starting to run.
        /// This is where it can query for any required services and load any non-graphic
        /// related content.  Calling base.Initialize will enumerate through any components
        /// and initialize them as well.
        /// </summary>
        protected override void Initialize()
        {
            // TODO: Add your initialization logic here

            base.Initialize();
        }

        /// <summary>
        /// LoadContent will be called once per game and is the place to load
        /// all of your content.
        /// </summary>
        protected override void LoadContent()
        {
            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(GraphicsDevice);

            // TODO: use this.Content to load your game content here
        }

        /// <summary>
        /// UnloadContent will be called once per game and is the place to unload
        /// all content.
        /// </summary>
        protected override void UnloadContent()
        {
            // TODO: Unload any non ContentManager content here
        }

        /// <summary>
        /// Allows the game to run logic such as updating the world,
        /// checking for collisions, gathering input, and playing audio.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Update(GameTime gameTime)
        {
            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed || Keyboard.GetState().IsKeyDown(Keys.Escape))
                Exit();

            // TODO: Add your update logic here

            base.Update(gameTime);
        }

        /// <summary>
        /// This is called when the game should draw itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.CornflowerBlue);

            // TODO: Add your drawing code here

            base.Draw(gameTime);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T01:22:56.267

将`private Texture2D background`变量移动到`Game1`类中。

变量必须在`class`,`interface`或`struct`而不是命名空间中。

```
public class Game1 : Game
{
    private Texture2D background; //Error free
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T01:12:31.200

你在一个命名空间中，它需要一个类、委托、枚举、接口或结构。

-- 编辑：上面的海报说得对，哈哈。

# javascript - javascript初学者：确认/代码

> ID：14449990
> 
> 赞同：3
> 
> 时间：2013-01-22T01:08:43.690
> 
> 标签：javascript, confirm

我是使用 Code Academy 学习的初学者，我正在尝试用 JavaScript 编写一个简单的游戏，只是为了扩展我的理解。我无法破译为什么我的前几行代码不起作用。我要做什么应该很明显，但是确认命令根本不起作用。

这是代码：

```
var classChoice=prompt("You need to choose a class.  Will you play as a wizard or as  a warrior?").toLowerCase;

if (classChoice==="wizard"){
    confirm("You have chosen wizard.  Is this correct? (yes or no)");
}else if (classChoice==="warrior"){
    confirm("You have chosen warrior.  Is this correct?");
} 
```

有人可以评论吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T01:09:23.597

`toLowerCase`是一个你必须调用的函数：`.toLowerCase()`.

* * *

**注意：**当他们输入您要检查的 2 以外的值时会发生什么...？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-01T01:51:44.800

在您的代码中，虽然正确地用 camelCase 编写，但在其名称调用的末尾`.toLowerCase`没有必要的括号。`()`因此，基本上没有括号，您只是试图提供函数的内容，而不是实际调用它。

此外，通常最好不要相信用户正确输入必要的信息，至少不是 100% 的时间。因此，为什么您首先尝试使用该`.toLowerCase()`功能——以减少人为错误的机会。

因此，正如在其他答案之一中所提到的，您应该有一个 else 块，如下所示：

```
else {
    // Handle input that does not match either choice
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-30T22:25:09.347

100% 的函数需要以 () 结尾，否则浏览器会将其视为变量

因此，调用成员`.toLowerCase()`而不是`.toLowerCase`

# r - 使用 R 在一张图像中绘制多个线图

> ID：14449991
> 
> 赞同：1
> 
> 时间：2013-01-22T01:08:57.757
> 
> 标签：r, loops, graph

我是 R 的绝对初学者。所以这可能是一个愚蠢的问题。我有一张这样的表格（csv格式）：

```
,1A+,2A+,3A-,3A+,5A-,5A+,6A-,6A+,7A-,7A+
6,4.530309305,5.520356001,3.437626731,5.146758132,,4.355022819,,4.191337618,,4.076583859
10,8.697814022,9.765817956,,9.636004092,3.725756716,8.600484774,3.457423715,8.358842335,2.246622784,7.244668991
12,,,8.176341701,,,,,,,
17,,,,,6.24785396,,5.077069513,,3.137524578 
```

我想在 R 中创建一个折线图，绘制所有不同的 Y 值（1A+、2A+ 等）与 Y 值（6、10、12、17）。

我在做：

```
new_curves   <- read.csv("new_curves_R.csv", as.is = TRUE)
g_range <- range(0,new_curves$X)
axis(2, las=1, at=4*0:g_range[2])
plot(new_curves$X1A.,new_curves$X,type="o", col="blue")
legend(1, g_range[2], c("new_curves$X1A."), cex=0.8, col=c("blue"));
title(xlab="Days", col.lab=rgb(0,0.5,0))
title(ylab="Total", col.lab=rgb(0,0.5,0)) 
```

但是，这（显然）仅绘制第一个数据点。（由于某种原因，传说也不起作用）。我猜我需要某种 for 循环来递归地将每个 Y 值添加到图中。同样，需要一个循环来制作图例。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:24:39.293

```
dat <- read.table(text=", 1A+,2A+,3A-,3A+,5A-,5A+,6A-,6A+,7A-,7A+
6,4.530309305,5.520356001,3.437626731,5.146758132,,4.355022819,,4.191337618,,4.076583859
10,8.697814022,9.765817956,,9.636004092,3.725756716,8.600484774,3.457423715,8.358842335,2.246622784,7.244668991
12,,,8.176341701,,,,,,,
17,,,,,6.24785396,,5.077069513,,3.137524578", header=TRUE, sep=",", fill=TRUE)

matplot(dat[1], dat[-1]) 
```

# html - 混合固定和百分比宽度

> ID：14449997
> 
> 赞同：-1
> 
> 时间：2013-01-22T01:10:19.260
> 
> 标签：html, css, positioning

我正在尝试在我的“app-view”div 中构建一个布局，其中“leftPane”具有固定的宽度，“rightPane”的宽度随着浏览器宽度（百分比）扩展。这可以用 CSS（没有 Javascript）吗？下面是我在 div 中布局的基本样式。

```
#app-view
{
    width: 100%;
    height: 400px;
}

#leftPane
{
    float: left;
    width: 33.33%;
    max-width: 250px;
    height: 400px;
    background: blue;
}

#rightPane
{
    float: left;
    width: 66.66%;
    height: 400px;
    background: green;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:20:38.483

您可以使用`left`and `right`on`#rightPane`代替宽度。您还需要`#app-view`相对定位并且两个窗格都是绝对的。

```
#app-view
{
    width: 100%;
    height: 400px;
    position: relative;
}

#leftPane, #rightPane 
{
    height: 100%;
    position: absolute;
}

#leftPane
{
    width: 250px;
    background: blue;
}

#rightPane
{
    left: 250px;
    right: 0;
    background: green;
} 
```

**[JSFiddle](http://jsfiddle.net/wRH9a/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T01:17:52.757

```
<div>
  <div id="leftpane" style="float: left; width: 250px;">left pane content</div>
  <div id="rightpane" style="margin-left: 250px;">right pane content</div>
</div> 
```

# c# - 没有成员的界面是否适合向图书馆用户指示“不透明句柄”？

> ID：14449999
> 
> 赞同：3
> 
> 时间：2013-01-22T01:10:47.813
> 
> 标签：c#, .net, interface

假设我有一个抽象对象，可以由多个单独的插件作者实现。（例如，一个错误数据库连接）我不希望我的位的消费者必须处理每个特定的插件类型。

我还想将解析配置文件的过程与实际初始化数据库插件和其他类似事情的过程分开。

为此，我想出了这样的事情：

```
public interface IConfiguration
{
    // No members
}

public interface IConnection
{
    // Members go in here
    void Create();
    void Update();
    void Delete();
}

public interface IConnectionProvider
{
    // Try to interpret file as a configuration, otherwise return null
    IConfiguration ParseConfiguration(Stream configurationContents);
    IConnection Connect(IConfiguration settings);
}

public class ThingyRepository
{
    // Lets say there is a constructor that initializes this with something
    List<IConnectionProvider> providers;

    // Insulates people from the actual connection provider
    KeyValuePair<IConfiguration, IConnectionProvider> Parse(string filename)
    {
        IConnection result = null;
        IConnectionProvider resultProvider = null;
        foreach (var provider in this.providers)
        {
            using (Stream fs = OpenTheFileReadonly(filename))
            {
                IConnection curResult = provider.ParseConfiguration(fs);
                if (curResult == null)
                {
                    continue;
                }
                else
                {
                    if (result == null)
                    {
                        result = curResult;
                        resultProvider = provider;
                    }
                    else
                    {
                        throw new Exception ("ambguity!");
                    }
                }
            }
        }

        if (result == null)
        {
            throw new Exception ("can't parse!");
        }

        return new KeyValuePair<IConfiguration, IConnectionProvider>(
            result, resultProvider);
    }
} 
```

我的问题是，我有这个空界面，它应该用作从指定文件加载的任何设置的不透明句柄。IConnectionProvider 的特定实现者知道它需要从文件加载的配置中的哪些位，但是该库的用户应该与该信息隔离。

但是有一个空的界面对我来说似乎很奇怪。这种事情有意义还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T01:23:36.313

没有成员的接口的基本概念被称为“标志接口”，它只是将实现者识别为某种东西，而不是接口识别对象具有或做什么的正常工作*。*它有它的用途，但要谨慎使用。例如，我通常以分层格式使用它们来识别应该持久化到特定数据存储的域对象：

```
//no direct implementors; unfortunately an "abstract interface" is kind of redundant
//and there's no way to tell the compiler that a class inheriting from this base 
//interface is wrong,
public interface IDomainObject
{
   int Id {get;}
}

public interface IDatabaseDomainObject:IDomainObject { }

public interface ICloudDomainObject:IDomainObject { }

public class SomeDatabaseEntity:IDatabaseDomainObject
{
    public int Id{get;set;}

    ... //more properties/logic
}

public class SomeCloudEntity:ICloudDomainObject
{
    public int Id{get;set;}

    ... //more properties/logic
} 
```

派生接口没有告诉我关于实现对象结构的任何新信息，*除了*该对象属于那个特定的子域，允许我进一步控制可以传递的内容：

```
//I can set up a basic Repository pattern handling any IDomainObject...
//(no direct concrete implementors, though I happen to have an abstract)
public interface IRepository<T> where T:IDomainObject
{
    public TDom Retrieve<TDom>(int id) where TDom:T;
}

//... Then create an interface specific to a sub-domain for implementations of
//a Repository for that specific persistence mechanism...
public interface IDatabaseRepository:IRepository<IDatabaseDomainObject>
{
    //... which will only accept objects of the sub-domain.
    public TDom Retrieve<TDom>(int id) where TDom:IDatabaseDomainObject;
} 
```

可以在编译时检查生成的实现及其用法，以证明 ICloudDomainObject 没有被传递到 IDatabaseRepository，并且任何时候都不能将 String 或 byte[] 传递到存储库中进行存储。这种编译时安全性对于属性或属性是不可能的，这是将类“标记”为具有某些特殊意义的其他主要方法。

所以简而言之，这本身并不是一个*坏*习惯，但一定要问自己你想要从标志接口中得到什么，并问自己是否有任何通常会在 IConfiguration 上实现的状态或逻辑数据（可能是所述的名称或其他标识符配置，或将其加载或持久保存到所选数据存储的方法）可以通过一些强制标准化来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-18T08:30:37.767

我认为这是完全正确的。我正在设计一个 API，调用者必须首先获取一个不透明的“会话”对象，然后将其传递给后续调用。

API 的不同实现会使用完全不同的会话对象实现，所以会话对象显然不是具有不同子类的抽象类；这是一个界面。由于会话对象对调用者没有可见的行为，在我看来，唯一的逻辑模型是没有成员的接口。