# StackOverflow 问答 16144000-16144999

# javascript - 移动后将可移动图像按钮设为静态

> ID：16144002
> 
> 赞同：2
> 
> 时间：2013-04-22T09:45:52.603
> 
> 标签：javascript, jquery

我目前有这段代码可以让我在屏幕上移动图像按钮。但我想知道如何将图像按钮移动到另一个位置，一旦它发生变化，我就可以单击按钮但不能移动。是的，我希望在他们第一次移动按钮时移动按钮，然后在下次他们返回站点时按钮不可移动。

```
 var x; 
    var y;
    var bool;
    bool =1;
    function move(event){
          x= event.clientx;
          y = event.clienty
          document.getElementByID('img_btn').style.top=y+'px';
          document.getElementByID('img_btn').style.left=y+'px';
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:02:39.070

如果您希望按钮在下次访问时保持静态，则应将“已移动”变量保存到 cookie 或服务器端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:40:00.437

您可以尝试使用布尔值作为按钮是否已被移动的条件语句。例如：

```
var x; 
var y;
var moved;
moved = false;
function move(event){
      if(!moved){
          x = event.clientx;
          y = event.clienty
          document.getElementByID('img_btn').style.top=y+'px';
          document.getElementByID('img_btn').style.left=y+'px';

          moved = true;
      }
} 
```

# wcf - WCF - 如何在服务响应中包含/添加 WS-Addressing“TO”标头

> ID：16144004
> 
> 赞同：2
> 
> 时间：2013-04-22T09:45:55.410
> 
> 标签：wcf, response, ws-addressing

我有一个我正在处理的 WCF 主机服务，需要按照特定标准创建它。我正在使用自定义绑定来实现标准的大部分要求。

响应和请求标头中需要 WS-Addressing 标头，尽管有些似乎是自动配置的，但我们缺少“MessageID”、“From”和“To”元素。

我们使用消息检查器和“BeforeSendRequest”方法在测试客户端上添加了“From”、“To”和“ReplyTo”标头。这按预期工作。

在主机服务上，我们尝试使用“BeforeSendReply”方法对“MessageID”、“From”和“To”元素使用相同的方法。但是，消息中仅显示“MessageID”和“From”标头。未添加“To”标头。

任何人都可以提供任何建议
1\. 如何在响应消息中包含/添加“TO”ws-addressing 标头？
2\. WCF 没有使用消息检查器方法在消息中添加“To”标头进行响应的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-16T20:54:41.897

它基本上归结为将您的[ManualAddressing](https://msdn.microsoft.com/en-us/library/system.servicemodel.channels.transportbindingelement.manualaddressing.aspx)属性设置为 true，以便通知服务底层的通道他不应再干预 To: 标头。

这可以通过 web.config 中的自定义绑定来完成：

```
<customBinding>
  <binding name="customBinding_manualAddressingEnabled">
    <textMessageEncoding />
    <httpTransport manualAddressing="true"/>
  </binding>
</customBinding> 
```

请参阅[答案](https://stackoverflow.com/questions/42701721/why-is-the-wsato-header-in-my-reply-message-removed-by-wcf/43442001#43442001)以获取更多详细信息。

# c# - File.Exists(file) 为假但文件存在

> ID：16144005
> 
> 赞同：3
> 
> 时间：2013-04-22T09:46:05.360
> 
> 标签：c#, file, asp.net-mvc-4

我在一个控制器中添加一个文件，在另一个控制器中我想检查该文件是否存在。我正在使用`File.Exist(file)`，但它总是错误的，即使文件存在......

我添加文件，图像添加成功。

```
if ((image!= null & image.ContentLength > 0))
                    {
                        string name = event.EventId.ToString() + ".jpg";

                        var fileName = name;
                        var path = Path.Combine(Server.MapPath("~/App_Data/Plakaty"), fileName);
                        plakat.SaveAs(path);
                    } 
```

如果此文件存在，我正在检查另一个控制器：

```
string file = "~/App_Data/Plakaty/" + wyd.EventId.ToString() + ".jpg";

            ViewBag.file_exist = System.IO.File.Exists(file); //always is false 
```

我的观点：（它只返回“无文件”）

```
 @if (ViewBag.file_exist == true)
        {
            <p>File exist</p>
        }
        else
        {
            <p>No file</p>
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T09:50:05.393

检查文件时需要`Server.MapPath`再次执行并执行正斜杠。

```
string file = Server.MapPath("~") + @"\App_Data\Plakaty\" 
    + wyd.EventId.ToString() + ".jpg";

ViewBag.file_exist = System.IO.File.Exists(file ); //always is false 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T09:49:27.387

`Server.MapPath`检查文件是否存在时忘记写

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T09:49:09.883

你检查权限了吗？

如果在尝试确定指定文件是否存在时发生任何错误，Exists 方法将返回 false。这可能发生在引发异常的情况下，例如传递包含无效字符或过多字符的文件名、磁盘故障或丢失，或者调用者没有读取文件的权限。[查看文档](http://msdn.microsoft.com/en-us/library/system.io.file.exists.aspx)

但是很可能是@Obama 回答的关于路径错误的内容，因为您没有调用 Server.MapPath

# android - 关于生产状态的保管箱

> ID：16144012
> 
> 赞同：0
> 
> 时间：2013-04-22T09:46:22.923
> 
> 标签：android, dropbox, dropbox-api

我是一名 android 开发人员，我在我的项目中使用了 dropbox api。

我确实注册了我的应用程序，并且确实获得了 api 密钥和秘密。我正在寻找生产状态信息。根据我的阅读，这使您能够为 100 多个用户使用密钥/密码。

我在哪里可以找到有关此生产状态和成本的信息？

有人能帮我吗？到目前为止，我还没有在互联网上找到任何东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:48:55.070

生产状态是您的应用程序的状态。这意味着，您无需购买任何东西，前往您注册应用的 DropBox 开发者控制台，然后选择“App Console”。在这里您应该能够更改您的应用程序的状态。您必须填写一些问题才能更改您的状态。状态更改可能需要一些时间，有时大约需要 24 小时。

在您的状态不是“生产”之前，您的用户无法使用 dropBox 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-18T09:49:44.447

如果您的应用超过 50 个 Dropbox 用户，您必须申请生产状态。同样作为开发人员，如果您不申请生产状态，他们将在您的应用程序被冻结之前提供 500 个 Dropbox 用户。

# python - python TypeError：'NoneType'对象没有属性'__getitem__'

> ID：16144015
> 
> 赞同：5
> 
> 时间：2013-04-22T09:46:33.590
> 
> 标签：python, typeerror, nonetype

这次我正在尝试[Solem 博客中的](http://www.janeriksolem.net/2012/08/reading-gauges-detecting-lines-and.html)另一个示例。它是一个使用霍夫变换检测图像中的线和圆的模块。这是代码（houghlines.py）：

```
import numpy as np
import cv2

"""
Script using OpenCV's Hough transforms for reading images of 
simple dials.
"""

# load grayscale image
im = cv2.imread("house2.jpg")
gray_im = cv2.cvtColor(im, cv2.COLOR_RGB2GRAY)

# create version to draw on and blurred version
draw_im = cv2.cvtColor(gray_im, cv2.COLOR_GRAY2BGR)
blur = cv2.GaussianBlur(gray_im, (0,0), 5)

m,n = gray_im.shape

# Hough transform for circles
circles = cv2.HoughCircles(gray_im, cv2.cv.CV_HOUGH_GRADIENT, 2, 10, np.array([]), 20, 60, m/10)[0]

# Hough transform for lines (regular and probabilistic)
edges = cv2.Canny(blur, 20, 60)
lines = cv2.HoughLines(edges, 2, np.pi/90, 40)[0]
plines = cv2.HoughLinesP(edges, 1, np.pi/180, 20, np.array([]), 10)[0]

# draw 
for c in circles[:3]:
 # green for circles (only draw the 3 strongest)
 cv2.circle(draw_im, (c[0],c[1]), c[2], (0,255,0), 2) 

for (rho, theta) in lines[:5]:
 # blue for infinite lines (only draw the 5 strongest)
 x0 = np.cos(theta)*rho 
 y0 = np.sin(theta)*rho
 pt1 = ( int(x0 + (m+n)*(-np.sin(theta))), int(y0 + (m+n)*np.cos(theta)) )
 pt2 = ( int(x0 - (m+n)*(-np.sin(theta))), int(y0 - (m+n)*np.cos(theta)) )
 cv2.line(draw_im, pt1, pt2, (255,0,0), 2) 

for l in plines:
 # red for line segments
 cv2.line(draw_im, (l[0],l[1]), (l[2],l[3]), (0,0,255), 2)

cv2.imshow("circles",draw_im)
cv2.waitKey()

# save the resulting image
cv2.imwrite("res.jpg",draw_im) 
```

当我通过以下方式在python中执行文件时：

```
execfile('houghlines.py') 
```

出现以下错误：

```
File "houghlines.py", line 24, in <module>
    lines = cv2.HoughLines(edges, 2, np.pi/90, 40)[0]
TypeError: 'NoneType' object has no attribute '__getitem__' 
```

你们知道如何解决吗？
提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-07-24T20:50:12.900

这是因为`lines = cv2.HoughLines(edges, 2, np.pi/90, 40)[0]`您传递的最后一个参数中的阈值。它表示被视为一条线的最小长度，在您的情况下为 40 像素。尝试减少它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-10T17:47:54.410

有时 HoughLines 和 HoughLinesP 不返回任何值。我认为这意味着“没有线”。令我惊讶的是，文档中的示例并未说明这一点。也许这是一个错误。

在任何情况下，您都可以通过简单的`if result != None:`或将 None 替换为默认列表（如`(HoughLinesP(... args ...) or [[]])`. 这不会解决您的线路未被检测到的事实，但它允许您在这种情况下做某事而不是失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-06T11:30:19.750

我也在处理这个错误。当函数`cv2.HoughCircles`没有检测到任何圆圈时，它将返回 None。所以我有两种方法来解决它，如下所示：

*   使用**try/exception**包围您的代码块

```
 try:
    ...
 except Exception as e:
    print 'There is no circles to be detected!' 
```

*   使用**if/else**避免操作 None 对象

```
 if circles is not None:
   ...
 else:
   print 'There is no circles to be detected!' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-11T10:50:27.367

我已经使用此代码来克服这个问题：

```
 lines = []
    linesDetected = False
    while not linesDetected:
        lines = cv.HoughLinesP(edges, 1, np.pi/180, 30, minLineLength = 60, maxLineGap=300)
        try:
            if len(lines) !=0:
                linesDetected = True
        except:
            linesDetected = False 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-12T11:20:26.263

更改阈值将起作用

canny=cv2.Canny(灰色,50,150,apertureSize=3)

行=cv2.HoughLines(canny,1,numpy.pi/180,40)

打印（行）

# javascript - 过滤后更新AngularJS中的分页

> ID：16144017
> 
> 赞同：34
> 
> 时间：2013-04-22T09:46:55.297
> 
> 标签：javascript, angularjs, pagination

我已经实现了分页。现在我希望在过滤我的结果后更新分页。

表格：

```
<input type="text" data-ng-model="search.name" data-ng-change="filter()"/> 
```

名单：

```
<li data-ng-repeat="data in filtered = (list | filter:search) | filter:search | startFrom:(currentPage-1)*entryLimit | limitTo:entryLimit">{{data.name}}</li> 
```

分页：

```
<pagination data-boundary-links="true" data-num-pages="noOfPages" data-current-page="currentPage" max-size="maxSize"></pagination> 
```

控制器：

```
$scope.filter = function() {
    window.setTimeout(function() { //wait for 'filtered' to be changed
        $scope.noOfPages = Math.ceil($scope.filtered.length/$scope.entryLimit);
        $scope.setPage = function(pageNo) {
            $scope.currentPage = pageNo;
        };
    }, 10);
}; 
```

我的问题是，在单击页码或在输入字段中输入下一个字符后才更新分页。所以更新一步晚了。

**编辑**：我将源代码添加到 jsFiddle：http: [//jsfiddle.net/eqCWL/2/](http://jsfiddle.net/eqCWL/2/)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-12-20T07:12:35.760

@abject_error 的答案使用`$timeout`确实有效。我用他的建议编辑了你的小提琴并制作了这个[jsFiddle](http://jsfiddle.net/nackjicholson/5p6vF/2/)

**警告**

我认为解决方案以竞争条件的形式表明了一个更大的问题！

# [jsFiddle 使用 filterFilter 和 $watch](http://jsfiddle.net/nackjicholson/5p6vF/)

而那个小提琴是真正的解决方法。

**这是解释**

`search`您的竞争条件介于处理`$scope.filtered`.

我认为为了解决这种竞争状况而要消除的罪魁祸首是：

```
ng-model="search" ng-change="filter()" 
```

和

```
ng-repeat="data in filtered = (list | filter:search)......." 
```

使用`ng-change`触发“filter()”来进行计算，`noOfPages`但也取决于搜索的变化以创建`filtered`. 这样做可以确保过滤后的列表可能无法及时准备好计算页数，这就是为什么在超时的情况下将“filter()”延迟 10 毫秒会给您一种工作程序的错觉。

您需要的是一种“观察”更改的方法，然后在您可以访问创建和计算`search`的地方过滤列表。全部按顺序进行，没有种族。`$scope.filtered``$scope.noOfPages`

Angular就是这样！可以将`filter`控制器中的过滤器用作名称非常糟糕的函数：`filterFilter`. 在过滤器指南中查看这一点[- 在控制器和服务中使用过滤器](http://docs.angularjs.org/guide/filter)

将其注入控制器。

```
function pageCtrl($scope, filterFilter) {
    // ...
} 
```

[在范围文档](http://docs.angularjs.org/api/ng.%24rootScope.Scope)`$watch`中记录的函数中使用它

```
$scope.$watch('search', function(term) {  
    // Create filtered 
    $scope.filtered = filterFilter($scope.list, term);  

    // Then calculate noOfPages
    $scope.noOfPages = Math.ceil($scope.filtered.length/$scope.entryLimit);  
}) 
```

更改模板以反映我们的新方式。不再使用 DOM 过滤器，或者`ng-change`

```
<input type="text" ng-model="search" placeholder="Search"/> 
```

和

```
<li ng-repeat="data in filtered | startFrom:(currentPage-1)*entryLimit | limitTo:entryLimit">
    {{data.name}}
</li> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-10T12:04:51.567

您可以简单地使用此指令：

[https://github.com/michaelbromley/angularUtils/tree/master/src/directives/pagination](https://github.com/michaelbromley/angularUtils/tree/master/src/directives/pagination)

它提供带有过滤器的分页，同时保持代码整洁。

感谢 michaelbromley 的出色代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-22T13:00:45.557

使用`$timeout`而不是`window.setTimeOut`. `$timeout`正确包装以在 Angular 中始终如一地工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-16T18:45:57.740

使用角度`$scope.$watch`

```
$scope.$watch('search', function(term) {
    $scope.filter = function() {
        $scope.noOfPages = Math.ceil($scope.filtered.length/$scope.entryLimit);
    }
}); 
```

资源 ; [http://jsfiddle.net/eqCWL/2/](http://jsfiddle.net/eqCWL/2/)

演示；[http://jsfiddle.net/eqCWL/192/](http://jsfiddle.net/eqCWL/192/)

# javascript - 如何使用 JQuery 获取特定的表单字段值

> ID：16144018
> 
> 赞同：3
> 
> 时间：2013-04-22T09:46:59.657
> 
> 标签：javascript, jquery

我有一个表格

```
<form id="post_comment" action="cmt.php" method="post">
   <input type="hidden" name="type" value="sub" />
   <textarea id="body"></textarea>
</form> 
```

我正在使用此代码访问表单

```
$("#post_comment").submit(function(event){

    var form = $(this);

}); 
```

我怎样才能`<input type="hidden" name="type" value="sub" />`从这个表格中获得价值。我试图开始使用`form.input("type")`，但它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T09:48:20.617

```
$("#post_comment").submit(function(event){
    var inputValue = $("input[name='type']",this).val(); 
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T10:31:57.463

尝试使用这样的 id：

```
<form id="post_comment" action="cmt.php" method="post">
 <input type="hidden" id='hidden' name="type" value="sub" />
 <textarea id="body"></textarea>
</form> 
```

然后：

```
$("#post_comment").submit(function(event){
 var hiddenValue = $("#hidden").val(); 
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-19T06:47:54.477

```
<form id="post_comment" action="" method="post">
 <input type="hidden" class="hidden" name="type" value="sub" />
 <textarea id="body"></textarea>
 <input type="submit" value="submit" class="submit"/>
</form>

 $(".submit").click(function(){
   var hiddenVal=jQuery("#post_comment .hidden").val();
   //alert(hiddenVal);
 }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-22T09:50:19.090

```
var form = $(this);
var inputValue =  form.find('input[name="type"]').val();

or 

var form = $(this);
var inputValue =  form.find('input:hidden').val(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-02-14T10:42:33.767

另一种方法
考虑如果您有**多个表单**，其中**多个输入字段**具有 name 属性，那么此代码将对您有所帮助：

```
$("#formId input[name='valueOfNameAttribute']").val()
$("#formId textarea[name='message']").val() 
```

希望它会帮助某人。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T09:54:13.747

```
 $("#post_comment").submit(function(event){

        var form = $("input[name='type']").val();

    }) 
```

# php - 从客户数据中获取 magento 订单 ID

> ID：16144019
> 
> 赞同：0
> 
> 时间：2013-04-22T09:47:02.173
> 
> 标签：php, sql, magento, collections

我在收集加入工作时遇到问题。我正在尝试将订单 ID 连接到客户电话号码，并保存在`sales_flat_order_address`. `sales/order`因此，使用包含我的电话号码的变量加入集合并进行过滤。我已经尝试了各种组合，但到目前为止我只收到错误，现在我已经删除了我的代码并将从头开始尝试。关于此的任何想法或教程链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:01:28.147

下面的小代码片段

```
$customer = Mage::getModel('customer/customer')->getCollection()
->addAttributeToFilter('attribute_code', value)->load();
//Here your attribute code is phone
$orderCollection = Mage::getModel(’sales/order’)->getCollection();
$orderCollection->getSelect()->where(’e.customer_id =’.$customer->getId()); 
```

:)

# git - 从 SourceTree 或 Git 恢复已删除的文件

> ID：16144022
> 
> 赞同：10
> 
> 时间：2013-04-22T09:47:08.817
> 
> 标签：git, atlassian-sourcetree

我最近开始使用 SourceTree 来处理 Bitbucket。我正在处理一个项目，然后我决定需要将其移动到不同的文件夹（出于各种原因）。所以，我剪切了我在 repo 中处理的文件，然后单击 SourceTree 中的删除按钮，没有意识到这样做实际上会删除文件。我剪切了文件以防万一，但不记得粘贴这些文件需要原始文件存在。

现在，我只有 SourceTree 没有删除的 repo 剩下的文件。这些是`objects`目录中的文件，我没有目录中的`info`or`pack`文件夹`objects`。

有什么办法可以恢复文件吗？我已经查看了[这个问题](https://stackoverflow.com/questions/6545232/recovering-files-from-git-objects)和[这个问题](https://stackoverflow.com/questions/5767593/recovering-git-repository-from-objects-only)，但是我是 git 新手，无法弄清楚如何实际执行这些操作。

请帮忙！如何恢复 repo 中的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-08T14:18:40.483

如果该文件已提交，您只需制作`git checkout HEAD -f`.
如果文件未提交，则它们不会存储为对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-25T01:23:06.530

这是 Sourcetree 中对我有用的解决方法：

1.  确定文件被删除的提交。

2.  转到工具-> 选项-> 自定义操作。

3.  像这样创建一个新的自定义操作： [自定义操作屏幕](https://i.stack.imgur.com/ExUY8.png)

    结帐 $SHA~1 -- $FILE

4.  转到删除文件的提交（在步骤 1 中找到），点击文件并选择自定义操作-> 您刚刚定义的自定义操作： [恢复文件](https://i.stack.imgur.com/94JO3.png)

5.  不幸的是，Sourcetree 显示错误并且没有完成这项工作。 [Sourcetree GUI 中的错误](https://i.stack.imgur.com/us7RM.png)

6.  我始终启用“显示完整输出”选项，因此我必须手动关闭窗口，这在您需要创建合并请求时很有用（链接将在那里您只需复制它，没有这个窗口会自动关闭你会错过复制它的更改）。如果您看不到该窗口，可能是因为您禁用了该功能（这是默认设置）

7.  从窗口复制命令。

8.  在 Sourcetree 上打开一个 git 终端（从 sourcetree 右上角） [Git 终端启动器](https://i.stack.imgur.com/Fu9sa.png)

9.  粘贴命令（shift + insert）并按回车键。 [Git 控制台](https://i.stack.imgur.com/jkM9U.png)

10.  瞧！您的文件已恢复。

在最后一张图片中，您可以看到（失败）尝试从文件被删除的提交中恢复，但实际上您需要从上一次提交中恢复，这就是前两次尝试失败而后来成功的原因（这就是`~1`在 SHA 的末尾）。

希望它有帮助，快乐的编码。

# sql-server - SQL-SERVER 从表中获取结果，其中值类似于 1-9

> ID：16144023
> 
> 赞同：1
> 
> 时间：2013-04-22T09:47:15.907
> 
> 标签：sql-server, sql-server-2008

我有一张表，其中有一列的数量范围为 1-5、6-9 等，另一列中的价格。IE

```
价格 数量
----------------------
价格数量范围
----- ----------
45 1-5
35 6-9
30 10-18

```

现在我想从 Qty 为 7 的表中获取结果，因此返回的价格应该是 35（因为 Qty 7 在 6-9 范围内

任何帮助都非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:58:58.993

尝试这个 ：-

```
 Declare @val int
  Set @val=7

 ;with cte(price,startVal,endVal) as
  ( Select price,
    parsename(replace([Qty Range],'-','.'),2),
    parsename(replace([Qty Range],'-','.'),1)
    from yourTable
  )
  Select Price from cte 
  where @val between startVal and endVal 
```

结果 ：`35`

[SQL FIDDLE](http://sqlfiddle.com/#!3/54e1c/7)中的演示

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T09:53:01.897

如果您无法将表重新设计为健全，则可以使用几个[CTE](http://msdn.microsoft.com/en-gb/library/ms190766%28v=sql.105%29.aspx)将其重建为该查询的健全表：

```
declare @PriceRanges table (Price int,QtyRange varchar(20))
insert into @PriceRanges (Price,QtyRange) values
(45,'1-5'),
(35,'6-9'),
(30,'10-18')

declare @Search int
set @Search = 7

;with FoundDashes as (
    select Price,QtyRange,CHARINDEX('-',QtyRange) as DashPos
    from @PriceRanges
)
, SaneRanges as (
    select Price,CONVERT(int,SUBSTRING(QtyRange,1,DashPos-1)) as LowRange,CONVERT(int,SUBSTRING(QtyRange,DashPos+1,8000)) as HighRange
    from FoundDashes
)
select Price from SaneRanges where @Search between LowRange and HighRange 
```

结果产生`35`。

# lisp - 简单的计划练习。第06章 真假

> ID：16144024
> 
> 赞同：1
> 
> 时间：2013-04-22T09:47:17.140
> 
> 标签：lisp, scheme

问候，我是新来的所以请照顾我。

[Simply Scheme](http://www.eecs.berkeley.edu/~bh/ss-toc2.html)中的练习[6.1](http://www.eecs.berkeley.edu/~bh/ssch6/true.html)有如下表达式：

```
(cond (empty? 3)
      (square 7)
      (else 9)) 
```

我的想法是它应该评估（正方形 7）并返回它。(empty? 3) 被评估（返回原子 - 与其他原子和列表一起尝试，同样的处理）。

我很困惑。

我知道的：

1.  Scheme中所有不为假的都是真的。如果 3 为真且不为空 (#f)，为什么 cond 表达式返回 (empty?3)？
2.  对 cond 表达式的第一个参数进行求值，如果它为真，则返回 #t、定义的值或 #undefined 取决于上下文。如果为 false，它将继续连续评估 cond 参数，直到它这样做（或找不到合适的返回值）然后退出 cond。

我不知道的是：

1.  （空？3）自己返回#f。为什么 cond 在这里终止而不评估（正方形 7）？
2.  为什么在 cond 中对 (empty?3) 的评估返回原子，而不是 #t 或 #f？

我正在使用带有 Slib 的 SCM 以及加载了简单方案（simply.scm、functions.scm、ttt.scm、match.scm、database.scm）提供的其他库。

空的？现在，simple.scm 中的定义超出了我的计划范围。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:30:28.363

`cond`表格是这样的：

```
(cond (something-to-check-for-truthiness value-if-truthiness-succeed)
        ...other checks in the same format as above  ) 
```

现在，如果您将代码转换为这种格式。 `empty?`即只有空函数（不是它的调用）代替`something-to-check-for-truthiness`并且函数始终是真值，因此`3`返回数字，该数字在插槽之后`empty?`并适合`value-if-truthiness-succeed`插槽。因此，根本没有调用`empty?`函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T01:28:04.703

这不是 cond 所做的。cond 接受一个或多个参数，每个参数必须是一个方案表达式列表。

(cond (#t)) 是有效的 cond 语句。

它计算第一个表达式，如果为真，则计算该列表中尽可能多的附加 s-epressions，并返回最后一个计算的表达式的值。

(cond (#t 1 2 3 4 (if (number? 0) "Yeah, sanity!" "It rubs Lotion on it's skin"))) 是一个有效的 cond 语句

# php - php web的整数与字符串字段mysql设计方法

> ID：16144030
> 
> 赞同：0
> 
> 时间：2013-04-22T09:47:38.127
> 
> 标签：php, mysql

我有一个包含 2 个字段的产品表。

1）产品的id int-7digits

2）产品名称

产品名称只能是 27 个不同的值，如香蕉、苹果等

现在我想知道我的网络服务器资源的最佳方法是什么。我的意思是我应该使用 1,2,3,... 值还是字符串值？

~编辑我的表将有大约 100 万行，并且随着时间的推移稳步增加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:50:40.040

为了便于阅读，您应该使用`VARCHAR`名称字段。如果你必须在 9 个月后回到这个问题，并记住 1 是苹果还是香蕉，你会遇到很多困难。

因为我假设您必须打印出产品名称，所以您基本上是在选择 PHP 或 MySQL 中的字符串之间进行选择。要么`SELECT * FROM fruit WHERE product_name = 'Banana'`要么`SELECT * FROM fruit where product = 7`然后`foreach($fruits as $fruit): if $fruit['id'] = $row['product'] { return $fruit['name']; } endforeach;`

从 PHP 数组分配值也将比在字段上的 MySQL语句`array(1 => 'apple', 2 => 'banana' ... 27 => 'eggplant');`使用更多的开销。您在数据库方面获得的任何性能都将在应用程序方面损失五倍。`SELECT``VARCHAR`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:53:40.493

使用 VARCHAR。

或者，如果您绝对确定产品将保持静态，您可以使用[ENUM](http://dev.mysql.com/doc/refman/5.6/en/enum.html)来节省一些空间，但仅 27 行不会有太多空间可以节省。

但是，如果您需要引用其他表中的产品，请考虑创建[代理键](https://stackoverflow.com/tags/surrogate-key/info)（自动递增整数），以节省引用表中的空间（与重复 VARCHAR 产品名称或 7 位产品 ID 相比）。

注意：“节省空间”不仅仅是存储空间——更小的数据意味着更少的 I/O 和在给定数量的 RAM 下更有效的缓存。这对于小表并不重要，但对大表可能会有所不同（例如，如果您有一个引用产品的大“订单项”表）。

# android - 从类扩展视图调用方法（使用构造函数）

> ID：16144032
> 
> 赞同：1
> 
> 时间：2013-04-22T09:47:46.013
> 
> 标签：android, view, constructor, call, extends

我用画布画了一些位图。一切都很好，我使用了一个类扩展视图并使用构造函数 super(context, attributeset); 现在我想使用另一个类的方法，但是如何让它工作，据我所知，视图扩展类需要这两个构造函数，它们必须设置为与 android 一起使用（我试图改变它，它告诉我它需要像这样的这些构造函数，因为它扩展了视图）。

这是我的代码：

```
public class GameBoard extends View{

    private static final String tag = "GameBoard";

    private Paint p;
    private Load load;

    public GameBoard(Context context, Load load) {

            super(context);
            p = new Paint();
            this.load = load; 
```

//这个类还有很多，但这里不重要。

```
 } 
```

这是另一类：

```
public class Load{

Context context; 
```

// TODO 从文件中加载这些信息并使纹理适合手机屏幕尺寸 int mSize = 99; 整数 tSize = 48; int screenCoords = 160; int rectX = 10; int rectY = 16;

```
String coordsFileName ="coordsData.txt";

public Load (Context context) {
    this.context = context;
} 
```

**编辑：**

我为每个有同样问题的人找到了解决方案。只需在扩展类中创建一个对象，例如：扩展类：//上面的构造函数声明对象关闭其他类

```
private OtherClass otherclass; 
```

//并且在它的构造函数中你只需要创建一个新对象

```
this.otherclass = new OtherClass(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:13:01.853

尝试`GameBoard`不是从 XML 布局创建对象，而是在代码中创建对象，然后将其添加到您的布局中。在这种情况下，您可以创建构造函数并传递您需要的对象。您可以在 xml 中创建一个`FrameLayout`，然后将您的视图添加到该布局中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T18:40:48.863

我还没有创建我想要的类的新对象，所以我不需要将它过度交给构造函数：

```
public class GameBoard extends View{

private static final String tag = "GameBoard";

private Paint p;
private Load load;

public GameBoard(Context context) {

        super(context);
        p = new Paint();
        load = new Load(); 
```

# c - 使用缓冲区加载opencv图像而不保存？

> ID：16144033
> 
> 赞同：2
> 
> 时间：2013-04-22T09:47:46.610
> 
> 标签：c, opencv, plugins, layer, gimp

gimp 的插件，用于从相机捕获帧并将其加载到 gimp 工作区。直到 nw 我得到了捕获图像并加载图像的代码，但它是通过保存捕获的图像来完成的，但我想加载图像而不保存图像。

```
#include <libgimp/gimp.h>
#include <stdlib.h>
#include <string.h>
#include <opencv/cv.h>
#include <opencv/highgui.h>
#include <opencv/cxcore.h>
#include <stdio.h>

static void query (void);
static void run   (const gchar      *name,
               gint              nparams,
               const GimpParam  *param,
               gint             *nreturn_vals,
               GimpParam       **return_vals);

GimpPlugInInfo PLUG_IN_INFO =
{
  NULL,
  NULL,
  query,
  run
};

MAIN()

static void
query (void)
{
  static GimpParamDef args[] =
  {
    {
  GIMP_PDB_INT32,
  "run-mode",
  "Run mode"
    },
    {
  GIMP_PDB_IMAGE,
  "image",
  "Input image"
    },
    {
  GIMP_PDB_DRAWABLE,
  "drawable",
  "Input drawable"
    }
  };

  gimp_install_procedure (
    "plug-in-trail",
 "trail, SHOT!",
 "Displays \"trail!\" in a dialog",
 "JOSEPH,ARYA,CHINJU",
 "Copyright To JOSEPH",
 "2013",
 "_trail...",
 "RGB*, GRAY*",
 GIMP_PLUGIN,
 G_N_ELEMENTS (args), 0,
 args, NULL);

gimp_plugin_menu_register ("plug-in-trail",
                         "<Image>/Filters/misc");
}

static void
run (const gchar      *name,
 gint              nparams,
 const GimpParam  *param,
 gint             *nreturn_vals,
 GimpParam       **return_vals)
{
 static GimpParam  values[1];
GimpPDBStatusType status = GIMP_PDB_SUCCESS;
GimpRunMode       run_mode;

*nreturn_vals = 1;
*return_vals  = values;

values[0].type = GIMP_PDB_STATUS;
values[0].data.d_status = status;

 gint32 image_ID;
 gint32 layer_ID;
 run_mode = param[0].data.d_int32;
image_ID = param[1].data.d_image;
CvCapture* camera = cvCreateCameraCapture(0); 

IplImage*     frame = 0;

cvSetCaptureProperty(camera,CV_CAP_PROP_FRAME_WIDTH,1024) ;
cvSetCaptureProperty(camera,CV_CAP_PROP_FRAME_HEIGHT,768); 

frame = cvQueryFrame(camera); 

if (frame != NULL) {
printf("Frame extracted from CAM1\n\r");
    cvSaveImage("/bin/test.jpg", frame,0);
} else {
  printf("Null frame 1\n\r");
}
cvReleaseCapture(&camera);
cvReleaseImage(&frame);
layer_ID = gimp_file_load_layer (GIMP_RUN_NONINTERACTIVE,image_ID,"/bin/test.jpg");

gimp_image_add_layer (image_ID,layer_ID,-1);
gimp_displays_flush();
if (run_mode != GIMP_RUN_NONINTERACTIVE)
 g_message("SNAPSHOT TAKEN!!");
} 
```

我想在不保存图像的情况下加载图像。如何找到捕获图像的 layer_id 或者我想知道是否有任何方法可以在不保存捕获图像的情况下将图像加载到 gimp？

# performance - :last-child 选择器对性能不利吗？

> ID：16144036
> 
> 赞同：7
> 
> 时间：2013-04-22T09:48:00.117
> 
> 标签：performance, css, css-selectors

我经常使用`:last-child`选择器，主要是`border-bottom`在我用于最后一个孩子的列表中使用选择器时`border: none;`，或者使用边距时。所以我的问题是，`:last-child`从性能的角度来看，选择器是否不好？

此外，我听说它已从 CSS2 规范中删除，因为使用`:first-child`很容易被浏览器检测到，但为了检测`:last-child`它需要循环返回。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T10:24:32.140

如果它出于性能问题而从 CSS2 推迟，但在 Selectors 3 中重新引入，我怀疑这是因为性能不再像以前那样成为问题。

请记住，这`:last-child`是选择父母的最后一个孩子的**最终**且**唯一**`:nth-last-child(1)`的方法（显然，除了 ）。如果浏览器实现者不再担心性能问题，我们作为作者也不应该。

我能想到的唯一令人信服的理由是要允许与 IE7 和 IE8 兼容`:first-child`。`:last-child`如果这提高了性能，那就让它成为一个副作用。如果您*不需要*IE7 和 IE8 支持，那么您不应该被迫使用`:first-child`over `:last-child`. 即使浏览器性能绝对至关重要，您也应该通过测试和基准测试以正确的方式解决它，而不是过早的优化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T11:22:39.597

一般来说，核心 CSS 选择器的性能足够好，我们大多数人不应该担心使用它们。是的，其中一些确实比其他的性能更差，但即使是性能最差的也不太可能成为您网站的主要瓶颈。

除非您已经将其他所有内容优化到完美，否则我建议您不要担心这一点。使用像 YSlow 这样的分析工具来查找您网站上*真正的*性能问题并解决这些问题。

无论如何，即使对于给定的 CSS 选择器（或任何其他浏览器功能）存在显着的性能影响，我会说修复它是浏览器制造商的责任，而不是你的责任。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-22T10:07:19.220

I believe it's still the simplest, low-performance way to get your last child. by that I mean, all others way to get the last child will be worse for performance, because it won't have any work done by the W3C community before.

# iphone - mfmailcomposer 中发送邮件的邮件大小限制是多少

> ID：16144038
> 
> 赞同：1
> 
> 时间：2013-04-22T09:48:05.830
> 
> 标签：iphone, ios, objective-c, ios5, ios6

当我使用 mfmailcomposer 发送邮件时，当我将大尺寸文件附加到我的 mailcomposer 时，mailComposer 会崩溃。如何解决这个问题，请告诉我使用 mfmailcomposer 发送的数据大小（包括附件文件）有多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:38:03.207

考虑因素的两个限制：

1.  设备内存，如果您超过它，您的应用程序很可能会崩溃。（不知道这里是不是这样）

2.  邮件提供商的文件大小限制（在 SMTP 上）。例如，Gmail 限制是一个文件中每封电子邮件 25MB。[链接](https://support.google.com/mail/answer/6584?hl=en) ，因此如果您的应用程序尚未准备好应对失败的响应，则很有可能发生崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:56:00.770

我认为不会有明确的限制。但是，您的设备拥有多少内存总是有限制的。

请注意，API 不会添加文件，而是添加`NSData`实例，可能会复制它，因此所需的内存可能非常大。

# zend-framework - HTACCESS 子域和环境 ZEND

> ID：16144041
> 
> 赞同：1
> 
> 时间：2013-04-22T09:48:16.253
> 
> 标签：zend-framework, parameters, subdomain

我们目前正在使用 ZEND 创建一个应用程序，我们希望能够通过域的第二个参数 IN FRONT 设置环境。

像这样的东西：

```
app.production.mysite.com 
```

App 将指示文件夹 (mysite.com/app)、生产环境和 mysite 我们的域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:27:54.193

您可以将 apache2 别名与 mod_rewrite 规则一起使用以实现此目的。

这是一个示例 httpd.conf 部分，它在 中设置了一个根 zend 框架应用程序，并在&文件夹`/var/rootapp`下设置了另外 2 个单独的 ZF 应用程序。`app1``app2`

```
<Directory "/var/app1/public">
  Options Indexes FollowSymLinks MultiViews
  AllowOverride All
  Order allow,deny
  allow from all

  RewriteEngine On
  RewriteBase /app1
  RewriteCond %{REQUEST_FILENAME} -s [OR]
  RewriteCond %{REQUEST_FILENAME} -l [OR]
  RewriteCond %{REQUEST_FILENAME} -d
  RewriteRule ^.*$ - [NC,L]
  RewriteRule ^.*$ index.php [NC,L]
</Directory>

<Directory "/var/app2/public">
  Options Indexes FollowSymLinks MultiViews
  AllowOverride All
  Order allow,deny
  allow from all

  RewriteEngine On
  RewriteBase /app2
  RewriteCond %{REQUEST_FILENAME} -s [OR]
  RewriteCond %{REQUEST_FILENAME} -l [OR]
  RewriteCond %{REQUEST_FILENAME} -d
  RewriteRule ^.*$ - [NC,L]
  RewriteRule ^.*$ index.php [NC,L]
</Directory>

<VirtualHost *:80>
  ServerName app.production.mysite.com
  DocumentRoot /var/rootapp/public

  Alias /app1 /var/app1/public
  Alias /app2 /var/app1/public
</VirtualHost> 
```

# c# - TextBox AppendText 不适用于 Log4Net 日志

> ID：16144045
> 
> 赞同：1
> 
> 时间：2013-04-22T09:48:21.753
> 
> 标签：c#, textbox, log4net, appender

我正在尝试使用`Form`with`TextBox`作为附加器，`log4net`但`TextBox`根本不附加文本。我看到，该`AppendText`方法被调用（从 UI 线程），属性`Text`被更改，但有时附加值消失了，`Text`属性仍然为空。

我不确定是否有`log4net`问题，但问题仅出现在日志中。

应用程序启动和表单（`InvokeIfRequired`这里是非常常见的扩展：[自动化 InvokeRequired 代码模式](https://stackoverflow.com/questions/2367718/automating-the-invokerequired-code-pattern)）：

```
public partial class FormMain : Form, IAppender
{
    readonly ILog log;

    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        XmlConfigurator.Configure();

        Application.Run(new FormMain());
    }
    public FormMain()
    {
        log = LogManager.GetLogger(typeof(FormMain));

        InitializeComponent();
    }

    public void DoAppend(LoggingEvent le)
    {
        tbLog.AppendText("This msg is NOT shown");

        tbLog.InvokeIfRequired(() =>
            {
                // NOT SHOWN
                tbLog.AppendText(string.Format("{0:yyyyMMdd HH:mm:ss.fff}> [{1}] [{2}] {3}", le.TimeStamp, le.LoggerName, le.Level, le.MessageObject));
            });
    }

    private void bTestLog_Click(object sender, EventArgs e)
    {
        tbLog.AppendText("This msg is shown");

        log.Debug("Test logs");
    }
} 
```

应用程序配置：

```
<?xml version="1.0"?>
<configuration>

  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
  </configSections>

  <log4net>
    <appender name="FileAppender" type="log4net.Appender.FileAppender,log4net">
      <file value="mylogfile.txt" />
      <appendToFile value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger [%ndc] - %message%newline" />
      </layout>
    </appender>

    <appender name="FormMain" type="Client.FormMain,Client" />

    <root>
      <level value="DEBUG"/>
      <appender-ref ref="FormMain"/>
    </root>
  </log4net>

</configuration> 
```

装配信息.cs：

```
[assembly: log4net.Config.XmlConfigurator(Watch = true)] 
```

单击按钮后，`bTestLog`仅显示一条消息`tbLog`：“显示此消息”

**UPD** 我已经监视了它`Text`的财产，`tbLog`发现它很奇怪。在第一次附加之后，正如预期的那样，它是“显示此消息”。但是当程序进入`DoAppend`方法时，它是空的。进一步的附加按预期更改它，但是当回到`bTestLog_Click`它时再次显示“此消息显示”！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:56:59.147

好吧，我*想*我明白了。

我强烈怀疑这是：

```
<appender name="FormMain" type="Client.FormMain,Client" /> 
```

...正在让 log4net 创建一个*新*的`FormMain`. 因此，您已经显示了一个实例，但还有另一种形式没有显示，但正在接收附加调用。

您应该能够在调试器中看到这一点——如果您在`DoAppend`and中都设置断点`bTestLog_Click`，您将看到调用方法不同的实例。

我不知道将 log4net 挂钩到*现有*对象的最佳方法，但您可能会发现您可以通过编程方式在 log4net 中添加一个附加程序；您应该查看 API 以了解更多详细信息。

顺便说一句，我可能会将“作为附加程序”和“作为表单”的关注点分开 - 我会创建一个实现，`IAppender`它附加到其构造函数中提供的文本框，然后传递相关文本构建附加程序时从表单中获取框。不过，这是一个稍微不同的问题:)

# delphi - 如何设置注册表项的值

> ID：16144046
> 
> 赞同：2
> 
> 时间：2013-04-22T09:48:23.693
> 
> 标签：delphi, delphi-xe2

我有一个 Delphi XE2 项目在注册表项中写一些东西。所以我定义了以下代码：

```
procedure TMainForm.BitBtn01Click(Sender: TObject);
var
  RegistryEntry: TRegistry;
begin
  RegistryEntry:= TRegistry.Create(KEY_READ);
  RegistryEntry.RootKey:= HKEY_LOCAL_MACHINE;
  if (not RegistryEntry.KeyExists('Software\MyCompanyName\MyName\')) then
  begin
    RegistryEntry.Access:= KEY_WRITE;
    RegistryEntry.OpenKey('Software\MyCompanyName\MyName\',True);
  end;
  RegistryEntry.CloseKey();
  RegistryEntry.Free;
end; 
```

如果有任何字符串添加，我已经定义了以下代码：

```
if (not RegistryEntry.KeyExists('Licenced To')) then
  begin
    RegistryEntry.WriteString('Licenced To', 'MySurname MyFirstName');
  end; 
```

**我的要求：**

**01.设置默认值如图：![图片](https://i.stack.imgur.com/j3UQ6.jpg)**

**02\. 在 Win64 操作系统中，节点创建在 HKEY_LOCAL_MACHINE\WOWSys64\Software 下，但不在 HKEY_LOCAL_MACHINE\Software 下。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T09:55:04.777

32 位应用程序所需的行为。
如果您需要写入 64 位根目录，您可以使用 KEY_WOW64_64KEY；
在任何情况下，您都需要提升写入 HKEY_LOCAL_MACHINE 的权限

```
RegistryEntry.Access:= KEY_WRITE or KEY_WOW64_64KEY; 
```

# javascript - 浮点数的正则表达式

> ID：16144056
> 
> 赞同：0
> 
> 时间：2013-04-22T09:48:47.797
> 
> 标签：javascript, node.js

我正在使用这个正则表达式检查浮点值

```
var re = /^\d{1,5}\.\d{1}$/; 
```

但它目前检查的值只有小数且不允许整数，我可以修改这个表达式以接受整数和浮点数吗

目前接受 100.0 我想同时输入 100 和 100.0 以便我想更改这个正则表达式

一些输入对我来说很有价值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:52:29.100

试试这个：`/^\d{1,5}(\.\d{1})?$/;`

# javascript - 存储表单输入的值，因为 onsubmit 表单将被删除？Javascript DOM

> ID：16144061
> 
> 赞同：0
> 
> 时间：2013-04-22T09:49:07.117
> 
> 标签：javascript, forms, dom, global-variables, storing-data

我遇到了一个问题，我试图存储表单输入的值，以便稍后调用它，但在提交时，表单被删除。我试图实现的过程是，一旦表单在提交时被删除，它将使用表单输入值填充一个 div 以传递消息。

我有两个功能：

第一个函数验证 window.onload 上的输入字段，并具有输入值

第二个函数处理数据以在提交时提供结果

这些是存储在执行验证的函数中的变量：

```
var fnamez = document.getElementById("last_name_id").value;
var ftext = document.createTextNode(fnamez); 
```

这是提交时执行的功能

```
function processForm(e) {
e.preventDefault();

if (q1_valid == true && q2_valid == true && q3_valid == true && q4_valid == true && q5_valid == true) {
    var badge = document.getElementById("badge");
    badge.setAttribute('class', 'badge');

    var form_div = document.getElementById('form');
    // remove all child nodes
    while (form_div.hasChildNodes()) {
        form_div.removeChild(form_div.lastChild);
    }

    var congrats = document.createTextNode('congratulations!');
    badge.appendChild(congrats);

    // issue occurs here; thinking its a result of the removal of form
    var zfname = document.getElementById('first_name_id').value;
    var fnametext = document.createTextNode(zfname);
    badge.appendChild(fnametext);

} 
```

badge 是定位 div 的变量的名称 id = badge

先感谢您！

# php - codeIgniter 使用 attechment 发送邮件不起作用

> ID：16144062
> 
> 赞同：1
> 
> 时间：2013-04-22T09:49:08.237
> 
> 标签：php, codeigniter

```
$path=$this->email->config->item('server_root');
$file=$path.'/mail_demo/attechment/mytext.txt'; 
```

我的邮件没有发送，我不知道有什么问题生成以下错误未定义的属性：`CI_Email::$config`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:45:37.003

尝试：

```
$this->email->attach('/mail_demo/attechment/mytext.txt'); 
```

使用 CodeIgnigters 电子邮件类。

# cocoa - SCNView 调整大小问题

> ID：16144074
> 
> 赞同：1
> 
> 时间：2013-04-22T09:49:29.220
> 
> 标签：cocoa, scenekit

我正在尝试使用 ScreenKit 框架在 SCNView 中呈现 3D 条形图。

我的渲染代码是，

```
int height=10,y=0,x=0;
for (int i=0; i<10; i++) {

    SCNBox *box1 = [SCNBox boxWithWidth:4 height:height length:2 chamferRadius:0];
    boxNode1 = [SCNNode nodeWithGeometry:box1];
    boxNode1.position = SCNVector3Make(x, y, 0);
    SCNMaterial *material = [SCNMaterial material];
    material.diffuse.contents  = (NSColor *)[self.colorArray objectAtIndex:i%6];
    material.specular.contents = [NSColor whiteColor];
    material.shininess = 1.0;
    box1.materials = @[material];
    //boxNode1.transform = rot;
    [scene.rootNode addChildNode:boxNode1];
    x+=6;
    height+=10;
    y += 5 ;
} 
```

我可以渲染，但在重新调整视图大小时，图表栏会转到视图的中心。

我需要渲染图表，它覆盖了视图的边距，当重新调整大小时，它必须相应地改变。下面的图片显示了我的问题。

* * *

## 原图：

![在此处输入图像描述](https://i.stack.imgur.com/9Qaep.png)

* * *

## 两个窗口的拉伸较少的图像：

![在此处输入图像描述](https://i.stack.imgur.com/ddK4K.jpg)

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-16T12:41:46.170

您在原始问题中链接到的图像中的窗口非常拉伸，这使得很难看到发生了什么。当我拍摄那张照片并减少窗户的拉伸时，更容易了解发生了什么。

我认为您看到了一个普遍的调整大小问题。您正在使用弹簧和支柱并在左侧和右侧配置了灵活的边距，或者您正在使用具有固定宽度的居中视图的自动布局。

我假设我在下图中绘制的红色框是这两种情况下场景视图的边界。您可以通过为场景视图提供不同的背景颜色并再次调整其大小来轻松查看是否是这种情况。

我对您的问题的解决方案是更改您的视图在窗口调整大小时调整大小的方式，以更好地满足您的期望。

![在此处输入图像描述](https://i.stack.imgur.com/abTfH.jpg)

# c# - 由于 SMTP 异常而未发送电子邮件

> ID：16144077
> 
> 赞同：2
> 
> 时间：2013-04-22T09:49:35.603
> 
> 标签：c#, email, smtpclient

我有一个通用邮箱，可用于从我的网站发送电子邮件。它已停止工作并引发异常。以下是错误的屏幕截图。

[错误 http://img7.imageshack.us/img7/7227/42097647.png](http://img7.imageshack.us/img7/7227/42097647.png)

代码是

```
 protected void Submit_Click(object sender, EventArgs e)
   {
    if (ValidateBox.Text == "6")
    {
        MailMessage message = new MailMessage();
        message.From = new MailAddress(EmailBox.Text.ToString());
        message.To.Add(new MailAddress("praveendaniel86@gmail.com"));
        message.Subject = "Message via CAM Website General Mailbox";
        string body = "Name: " + NameBox.Text.ToString() + Environment.NewLine + Environment.NewLine +
                      "Home Tel: " + HomeTelBox.Text.ToString() + Environment.NewLine + Environment.NewLine +
                      "Work Tel: " + WorkTelBox.Text.ToString() + Environment.NewLine + Environment.NewLine +
                      "Comment/Question: " + CommentBox.Text.ToString();

        message.Body = body;

        SmtpClient client = new SmtpClient();
        client.Send(message);

        Response.Redirect("~/Thank-You.aspx");
    }

    else
    {
        Label1.Visible = true;
    }

} 
```

这可能是我的 webconfig 中提到的 SMTP 客户端的错误，我如何检查它是否工作正常？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:53:57.217

您没有设置[网络凭据](http://msdn.microsoft.com/en-us/library/system.net.networkcredential.aspx)。换句话说，您没有对电子邮件进行身份验证。

```
NetworkCredential myCredentials = new NetworkCredential(
"myemail@domain.com","myPassword","mail.myDomainName.com");

client.Credentials = myCredentials; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:56:58.750

这是一个配置问题。

您的 web.config (system.net > mailSettings > smtp) 中指定的 SMTP 服务器未配置为进行中继。您有两种选择来解决此问题：

1.  配置 SMTP 服务器以允许中继*Web 服务器的 IP 地址*（仅限！​​）。
2.  使用 SmtpClient 发送 SMTP 凭据（请参阅 Dave 的回答）。

# ruby-on-rails-3 - 在表的列值中为所有记录添加数字

> ID：16144079
> 
> 赞同：0
> 
> 时间：2013-04-22T09:49:44.940
> 
> 标签：ruby-on-rails-3

我有一个名为“产品”的表。它有一个包含一些值的列“delivery_price”。我想在所有字段中添加 100。

像这样的东西：

```
 delivery_price = 100 + delivery_price 
```

这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:11:53.533

您可以使用此 SQL 查询：

```
UPDATE TABLE products SET delivery_price = delivery_price + 100; 
```

打开您的 RDBMS 控制台/UI Manager/Whatever，连接到数据库并启动这个小查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:18:01.067

在你的`rails console`你可以做：

```
Product.all.each do {|p| p.update_attribute(:delivery_price, p.delivery_price + 100) } 
```

或如下以避免看到所有的 SQL 输出

```
Product.all.each do {|p| p.update_attribute(:delivery_price, p.delivery_price + 100) }.count 
```

这将加载您的所有产品记录并将 100 添加到 delivery_price。

# facebook - Opengraph 显示为一对一 - 没有对象标题

> ID：16144080
> 
> 赞同：10
> 
> 时间：2013-04-22T09:49:45.517
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, facebook-opengraph

在我的 facebook 应用程序中，我为打开的图形 url 提供了必要的元标记。当我使用开放图发布故事时，故事以`One to One - Without Object Title`模式发布在墙上。当我在打开的图形设置中查看它时，`the One to One`模式显示正确。我添加了一个屏幕截图以便更好地理解

![在此处输入图像描述](https://i.stack.imgur.com/jdnKH.png) ![在此处输入图像描述](https://i.stack.imgur.com/Liw4e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-05T10:04:28.707

在这里回答了同样的问题[Facebook Open Graph Not Showing Object Title](https://stackoverflow.com/questions/17392373/facebook-open-graph-not-showing-object-title/18633330#18633330)

我有一个解决方法：

1.  向您的“学校”对象添加字符串类型的属性“名称”。
2.  编辑您的故事“参观学校”：在**一对一的无对象标题**中，将故事从“通过 Eduraft 访问 {school.title}”更改为“通过 Eduraft 访问 {school.name}”
3.  保存更改。
4.  创建学校对象时，与“title”一起为属性名称提供相同的字符串。发布故事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-23T09:47:19.973

我有同样的问题。我得到了完美的解决方案试试这个：

*   将类型“一对一 - 没有对象标题”的故事从“ **Object.noun ”更改为****“对象**”。

 **例如：故事句子如下：

**“光辉与样品赛跑。”** 种族是我的目标。

*   将“一对一”类型的故事的句子原样保留为**Object.title**。

例如：**“Tejas 使用样本运行 race.title。”** 种族是我的目标。

谢谢，光辉**

# java - Xpath 和条件

> ID：16144084
> 
> 赞同：0
> 
> 时间：2013-04-22T09:49:51.423
> 
> 标签：java, xpath

如果父节点下存在两个节点，我如何获取节点的值。例如：我有以下 Xml。

```
<?xml version="1.0" encoding="UTF-8"?>
<Services xmlns="http://sample.schema.com/abc">
    <service>
        <name>Sample</name>
        <uri>/v9.0/sample.123.com
        </uri>
    </service>
    <service>
        <name>Sample 2</name>
    </service>
    <service>
        <name>Sample 3</name>
        <uri>/v9.0/sample3.123.com
        </uri>
    </service>
    <service>
        <name>Sample 4</name>
        <uri>/v9.0/sample4.123.com
        </uri>
    </service>
    <service>
        <name>Sample 5</name>
        <uri>/v9.0/sample5.123.com
        </uri>
    </service>
    <service>
        <name>Sample 6</name>

    </service>
    <service>
        <name>Sample 7</name>
        <uri>/v9.0/sample7.123.com
            </uri>
    </service>
    <service>
        <name>Sample 8</name>
    </service>
</Services> 
```

**我的代码：**

```
import java.io.IOException;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathConstants;
import javax.xml.xpath.XPathExpression;
import javax.xml.xpath.XPathExpressionException;
import javax.xml.xpath.XPathFactory;
import org.w3c.dom.Document;
import org.w3c.dom.NodeList;
import org.xml.sax.SAXException;
public class SimpleXpath {
    public static void main(String[] args) throws ParserConfigurationException,
            SAXException, IOException, XPathExpressionException {
          DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
            domFactory.setNamespaceAware(false); // never forget this!
            DocumentBuilder builder = domFactory.newDocumentBuilder();
            Document doc = builder.parse("testService1.xml");
            XPathFactory factory = XPathFactory.newInstance();
            XPath xpath = factory.newXPath();
            XPathExpression expr = xpath.compile("//Services/service[(name) and (uri)/text()]");
            Object result = expr.evaluate(doc, XPathConstants.NODESET);
            NodeList nodes = (NodeList) result;
           for (int i = 0; i < nodes.getLength(); i++) {
            String value=nodes.item(i).getNodeValue();
               System.out.println(" output : "+i+"  "+value); 
            }
    }

} 
```

我想从上面的 xml 中读取 name 和 url 的值，如果 name 和 uri 存在于服务节点下。我们可以看到，有些服务节点只包含名称。我想避免那些。我的 xpath 表达式将 null 值作为输出。

如果服务包含两者，我如何获取名称和 uri 的“文本”？

我可以使用 xpath 将输出作为名称作为第一个，将 uri 作为第二个（如果两者都在服务中）？

非常感谢。

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:08:25.740

首先，您可以只使用更简单的 xpath: `//Services/service[name and uri]`。然后 NodeList 会返回一个`service`元素列表。您可以迭代它的其他子元素并找到名为`name`and的元素`uri`，然后获取它们的文本值。或者您可以再创建两个这样的 xpath 表达式：

```
 XPathExpression exprName = xpath.compile("normalize-space(name)");
        String name = (String)exprName.evaluate(serviceNode, XPathConstants.STRING); 
```

和 uri 一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:17:28.090

谢谢大家....以下代码满足要求。如果有任何其他选项可以提高质量，请提出建议。

```
public static void main(String[] args) throws ParserConfigurationException,
            SAXException, IOException, XPathExpressionException {
          DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
            domFactory.setNamespaceAware(false); // never forget this!
            DocumentBuilder builder = domFactory.newDocumentBuilder();
            Document doc = builder.parse("testService1.xml");
            XPathFactory factory = XPathFactory.newInstance();
            XPath xpath = factory.newXPath();
            XPathExpression expr = xpath.compile("//Services/service[(name) and (uri)]/name/text()");
            Object result = expr.evaluate(doc, XPathConstants.NODESET);
            NodeList nodes = (NodeList) result;

            XPathExpression expr1 = xpath.compile("//Services/service[(name) and (uri)]/uri/text()");
            Object result1 = expr1.evaluate(doc, XPathConstants.NODESET);
            NodeList nodes1 = (NodeList) result1;

           for (int i = 0; i < nodes1.getLength()&&i < nodes.getLength(); i++) {
               String value=nodes.item(i).getNodeValue();
            String value1=nodes1.item(i).getNodeValue();
               System.out.println(" output : "+i+"  "+value+ " "+ value1); 
            }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T21:55:17.090

这个 xpath 选择有 2 个孩子的元素

```
//*[count(*)=2] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-22T10:59:01.290

```
for(int j=0; j<children.getLength();j++) {
   if (children.item(j) instanceof Element == false)
       continue;

   NamedNodeMap n = children.item(j).getAttributes();
   passwordTagAttr=(Attr) n.getNamedItem("name");
   passwordTagAttr=(Attr) n.getNamedItem("uri");
   passwordTag=stopTagAttr.getValue();  
   passwordList.add(passwordTag);                   
} 
```

# c++ - C++ 重新定义 - 头文件

> ID：16144085
> 
> 赞同：1
> 
> 时间：2013-04-22T09:49:54.417
> 
> 标签：c++, include, header-files, redefinition

我是 C++ 的一个完整的初学者，对你来说似乎很愚蠢的事情我就是无法理解。

测试应用程序.h

```
#ifndef TESTAPP_H
#define TESTAPP_H
using namespace std;
class Testapp {
private: 
public:
Testapp() { };   
};
#endif 
```

主文件

```
#include <cstdlib>
#include <iostream>
#include "Testapp.h"
Testapp::Testapp(){
}
int main(int argc, char *argv[])
{
system("PAUSE");
return EXIT_SUCCESS;
} 
```

错误信息：`Redefinition of 'Testapp::Testapp()'`

猜测它定义了两次构造函数，虽然我不确定如何克服这个问题。我正在使用 DEV-C++。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T09:51:35.827

函数声明在给出函数的实现或主体时也是一个定义。您在类定义中有一个构造函数定义，如下所示：

```
Testapp() { }; 
```

它的身体`{ }`是空的。然后您的`main.cpp`文件中有另一个定义，如下所示：

```
Testapp::Testapp(){
} 
```

同样，这个函数定义有一个空的主体。仅仅因为功能实现完全一样，并不意味着没问题。在一个定义规则下，一个函数不能有多个定义。一个简单的解决方法是通过不提供主体使类定义中的一个仅声明：

```
Testapp(); 
```

或者，您可以完全摆脱定义`main.cpp`。你最终会做什么取决于你想要如何布局你的代码。一个典型的方法是有一个包含类定义和成员函数声明的头文件，`Testapp.h`：

```
#ifndef TESTAPP_H
#define TESTAPP_H
using namespace std;
class Testapp {
private: 
public:
Testapp(); // Just a declaration
};
#endif 
```

然后在这个类的实现文件中`Testapp.cpp`，给出成员函数定义：

```
#include "Testapp.h"

Testapp::Testapp() { } 
```

然后在 中`main.cpp`，只需包含头文件并使用它定义的类：

```
#include "Testapp.h"

int main(int argc, char *argv[])
{
  Testapp test;
  return 0;
} 
```

我建议`using namespace std;`从你的头文件中删除。即使在污染全局命名空间的源文件中，这也被认为是非常糟糕的做法，但是如果您在头文件中这样做，这将变得具有积极的传染性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T09:51:51.310

在您的头文件中，您只想编写一个函数“存根”或**[函数原型](http://en.wikipedia.org/wiki/Function_prototype)**：

```
class Testapp {
  private: 
  public:
  Testapp();   
}; 
```

您需要了解C++ 中函数[***声明***](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration)[（原型）和函数](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration)[***定义***](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration)[之间的区别。](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration)

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T09:51:17.970

你已经`Testapp::Testapp`在你的类声明中定义了

```
Testapp() { }; 
```

您需要删除

```
Testapp::Testapp(){
} 
```

或将构造函数定义更改为声明

```
Testapp(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T09:51:42.290

它确实定义了两次——一次在 Testapp.h 中，一次在 main.cpp 中，只需删除其中一个。**

# javascript - 如何使用 TinyMCE 粘贴插件允许 HTML 标签？

> ID：16144086
> 
> 赞同：3
> 
> 时间：2013-04-22T09:50:01.053
> 
> 标签：javascript, jquery, jquery-plugins, tinymce, wysiwyg

在搜索了几个小时后，我想知道我找不到这个问题的解决方案。

我想要在我的全能 TinyMCE 编辑器中有两种模式：

1.  允许复制/粘贴具有大多数样式和格式属性的 HTML 文本或 Word/OpenOffice 文本
2.  默认启用粘贴插件并删除大部分 HTML，**但允许简单格式化**。

我能够复制/粘贴大多数样式的 HTML 文本或 Word/OpenOffice 文本。粘贴插件按钮也是默认启用的。

**但是我不确定如何配置粘贴插件以允许某些 HTML 标签、特定列表（ol、ul、li）、换行符（br）和简单格式（b、i、u），如果粘贴插件-在按钮被点击。**

我试图修改`paste_postprocess`and`paste_preprocess`函数，但没有找到解决办法。配置`valid_elements`也没有给我带来成功。

我的设置（重要部分）：

```
plugins : "paste,tabfocus,table,safari",
paste_auto_cleanup_on_paste : true,
paste_create_paragraphs: false,
paste_create_linebreaks : false,
paste_postprocess : function(pl, o) { },
paste_preprocess : function(pl, o) { },
paste_remove_spans:true,
paste_remove_styles:true,
paste_remove_styles_if_webkit:true,
paste_retain_style_properties:"none",
paste_strip_class_attributes:"all",
paste_text_sticky:true,
convert_urls : false,
entity_encoding : "raw",
valid_elements : "em/i,strong/b,ol,ul,li,br",
force_br_newlines : true,
force_p_newlines : false,
forced_root_block : false,
invalid_elements : "font",
setup : function(ed) {
  ed.onInit.add(function(ed) {
    ed.pasteAsPlainText = true; // select "paste" on startup
  });
},
verify_html : false 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T13:10:36.417

使用粘贴配置设置 paste_preprocess 您可以过滤传入的内容并仅保留您想要保留的标签。在这里仔细看看：[TinyMCE 粘贴为纯文本](https://stackoverflow.com/questions/4122451/tinymce-paste-as-plain-text/4122969#4122969)

# javascript - 删除每个输入 Javascript 的值

> ID：16144087
> 
> 赞同：-1
> 
> 时间：2013-04-22T09:50:01.323
> 
> 标签：javascript, events, onclick, attr

我有 3 个输入（JqueryMobile 的自动完成）。使用此功能：

```
$('.ui-input-clear').attr('onclick', 'delete_email();'); 
```

我将 onclick 事件添加到每个清除按钮，但我只能删除同一个按钮的输入怎么办？

例子：

```
[<------INPUT------>]  [BUTTON] //If I click, the value of THIS input turns ""

[<------INPUT------>]  [BUTTON] //If I click, the value of THIS input turns ""

[<------INPUT------>]  [BUTTON] //If I click, the value of THIS input turns "" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:53:39.723

```
$(document).ready(function(){
$('.ui-input-clear').click(function(){
   $(this).prev().find('input').val('');
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:57:06.633

由于您没有提供`delete_email()`. 给所有输入唯一`id`的，然后：

```
$('.ui-input-clear').click(function() {
  delete_email($(this).attr('id'));
}); 
```

并修改你的delete函数来带一个id参数，然后用这个id来标识需要删除的输入。

# javascript - Replace single backslash "\" with double backslashes "\\"

> ID：16144090
> 
> 赞同：23
> 
> 时间：2013-04-22T09:50:09.867
> 
> 标签：javascript, regex, replace

I have string with file path. I want to replace all single backslashes ("\") with double backslashes ("\\").

```
 var replaceableString = "c:\asd\flkj\klsd\ffjkl";
   var part = /@"\\"/g;
   var filePath = replaceableString .replace(part, /@"\\"/);
   console.log(filePath); 
```

Console showed me it.

```
 c:asdlkjklsdfjkl 
```

I found something like this, unfortunately it didn't work. [Replacing \ with \\](https://stackoverflow.com/questions/3457715/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T09:55:13.420

Try:

```
 var parts = replaceableString.split('\\');
   var output = parts.join('\\\\'); 
```

Personally, as I am not so expert in reg exps, I tend to avoid them when dealing with non-alphanumeric characters, both due to readability and to avoid weird mistake.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-22T09:55:57.800

```
var replaceableString = "c:\asd\flkj\klsd\ffjkl";
alert(replaceableString); 
```

This will alert you `c:asdlkjklsdfjkl` because '\' is an escape character which will not be considered.

To have a backslash in your string , you should do something like this..

```
var replaceableString = "c:\\asd\\flkj\\klsd\\ffjkl";
alert(replaceableString); 
```

This will alert you `c:\asd\flkj\klsd\ffjkl`

[JS Fiddle](http://jsfiddle.net/JJwkd/)

[Learn about Escape sequences here](http://blogs.learnnowonline.com/blog/bid/191997/Escape-Sequences-in-String-Literals-Using-JavaScript)

If you want your string to have '\' by default , you should escape it .. Use [escape()](http://www.w3schools.com/jsref/jsref_escape.asp) function

```
var replaceableString = escape("c:\asd\flkj\klsd\ffjkl");
alert(replaceableString); 
```

[JS Fiddle](http://jsfiddle.net/JJwkd/1/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-22T09:56:37.110

You have several problems in your code.

1.  To get a `\` in your string variable you need to escape it.

    When you create a string like this: `replaceableString = "c:\asd\flkj\klsd\ffjkl";` characters with a `\` before are treated as escape sequences. So during the string creation, it tries to interpret the escape sequence `\a`, since this is not valid it stores the `a` to the string. E.g. `\n` would have been interpreted as newline.

2.  I assume the `@` is coming from a .net example. Javascript does not know "raw" strings.

3.  remove the quotes from your regex.

This would do what you want:

```
var string = "c:\\asd\\flkj\\klsd\\ffjkl";
var regex = /\\/g;
var FilePath = string.replace(regex, "\\\\"); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-01-14T09:35:49.987

Here is the answer:

For replacing **single backslash** with **single forward slash**:

```
var stringReplaced = String.raw`c:\asd\flkj\klsd\ffjkl`.split('\\').join('/')
console.log(stringReplaced); 
```

For replacing **double backslash** with **single forward slash**:

```
var stringReplaced = String.raw`c:\\asd\\flkj\\klsd\\ffjkl`.split('\\\\').join('/')
console.log(stringReplaced); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-22T09:55:18.063

\ is a escape character. Therefore `replaceableString` does not contain any backslashes.

To fix this you should declare the string like this:

```
var replaceableString = "c:\\asd\\flkj\\klsd\\ffjkl"; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-08-29T12:54:57.597

First encode the string

then replace all occurrences of %5C with %5C%5C

At the end decode the string

```
var result = encodeURI(input);
result=decodeURI(result.replace(/%5C/g,"%5C%5C")); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-25T04:54:07.060

If you have no control over the contents of the string you are trying to find backslashes in, and it contains SINGLE `\` values (eg. variable myPath contains `C:\Some\Folder\file.jpg`), then you can actually reference the single backslashes in JavaScript as `String.fromCharCode(92)`.

So to get the file name in my filepath example above.

```
var justTheName = myPath.split(String.fromCharCode(92)).pop(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-12T14:52:22.010

In case of string matching, it is better to use encodeURIComponent, decodeURIComponent.

```
match(encodeURIComponent(inputString));

function match(input)
{

for(i=0; i<arr.length; i++)
{
if(arr[i] == decodeURIComponent(input))
return true;
else return false;
}
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-05-11T20:03:48.083

In the case of a single back slash in the string, the javascript replace method did not allow me to replace the single back slash.

Instead I had to use the split method which returns an array of the split strings and then concatenate the strings without the back slash (or whatever you want to replace it with)

Solution (replaced backslash with underscore):

```
var splitText = stringWithBackslash.split('\\');
var updatedText = splitText[0] + '_' + splitText[1]; 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2021-04-12T21:44:40.550

You need to pass to pass value of a string through String.raw before you assign value to a variable.

```
var replaceableString = String.raw`c:\asd\flkj\klsd\ffjkl`.replace(/\\/g,"\\\\");
console.log(replaceableString)
```

# magento - 为什么我上传的 tables_rates 不起作用

> ID：16144098
> 
> 赞同：0
> 
> 时间：2013-04-22T09:50:28.640
> 
> 标签：magento

使用两种语言在 Magento 网站上工作，当我在 .

```
Config => syetem => Shipping`   

Pays,Région/État,"Code postal","Poids (et au-delà)","Tarif de livraison" 
BEL,*,,5000.0000,17.0000
BEL,*,,4000.0000,15.0000
BLM,*,,4000.0000,29.0000... 
```

规则根本不起作用！？

你能帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:17:57.537

这是一个配置错误，客户将免费送货更改为是，这就是为什么：s 谢谢

# symfony - 将数据对象传递/绑定到内部/嵌入的 Symfony2 表单

> ID：16144103
> 
> 赞同：2
> 
> 时间：2013-04-22T09:50:50.753
> 
> 标签：symfony, symfony-forms

我有以下表单，我想将一些对象传递给内部表单，以便在编辑时用数据填充它们：

```
        公共函数 __construct($em, $id)
        {
            $this->_em = $em;
        }

        公共函数 buildForm(\Symfony\Component\Form\FormBuilderInterface $builder, array $options)
        {        
            $builder->add( 'accessInfo', new AccessInfoType( $this->_em, $options[ 'entities' ][ 'user' ] ) , array(
                                                                'attr' => 数组（'class' => 'input-medium' ），
                                                                '必需' => 假，
                                                                '标签' => 假
                                                             )
            );
            $builder->add( 'profileInfo', new ProfileInfoType( $this->_em, $options[ 'entities' ][ 'profile' ] ) , array(
                                                                '必需' => 假，
                                                                '标签' => 假
                                                             )
            );
        }

        公共函数 setDefaultOptions( \Symfony\Component\OptionsResolver\OptionsResolverInterface $resolver )
        {
            $resolver->setDefaults($this->getDefaultOptions(array()));
            返回 $resolver->setDefaults(array());
        }

        /**
         * {@inheritDoc}
         */
        公共函数 getDefaultOptions( 数组 $options )
        {
            $options = parent::getDefaultOptions( $options );
            $options['entities'] = array();

            返回$选项；
        }

        公共函数 getName()
        {
            返回“用户类型”；
        }

```

我用以下代码实例化：

```
$form = $this->createForm( new UserType( $em ), null, array( 'entities' => array( 'user' => $userObj, 'profile' => $profileObj ) ) ); 
```

一旦我通过构造函数获得包含所需数据的对象，有人知道我如何将该对象绑定到表单吗？

```
类 ProfileInfoType 扩展 AbstractType
{
    私人 $_em;

    公共函数 __construct($em, $dataObj)
    {
        $this->_em = $em;
        $this->_dataObj = $dataObj;
    }

```

先谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-10T10:22:07.720

我遇到了同样的问题并解决了这个问题`inherit_data`

```
public function configureOptions(OptionsResolver $resolver)
{
    $resolver->setDefaults(array(
        'inherit_data' => true,
    ));
} 
```

另请参阅[http://symfony.com/doc/current/cookbook/form/inherit_data_option.html](http://symfony.com/doc/current/cookbook/form/inherit_data_option.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:44:16.693

Inside your controller yo should get the request data

```
$request = $this->getRequest(); 
```

or request it through the method parameters

```
public function newAction(Request $request) 
```

and then bind it to the form

```
$form->bind($request); 
```

For further details have a look at [http://symfony.com/doc/2.1/book/forms.html#handling-form-submissions](http://symfony.com/doc/2.1/book/forms.html#handling-form-submissions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-18T16:48:03.023

这很好地添加了一个 attr 以使用 html 属性“值”取决于表单类型，也许这可以帮助你。

枝条

```
{{ form_label(blogpostform.title) }}
{{ form_widget(blogpostform.title, {'attr': {'value': titleView }}) }}
{{ form_errors(blogpostform.title) }} 
```

# php - 将数组保存在 mysql 字段中并在该字段中搜索

> ID：16144105
> 
> 赞同：0
> 
> 时间：2013-04-22T09:50:57.510
> 
> 标签：php, mysql, sql, arrays, dynamic

我有一个如下所示的 mysql 表：

```
id
some_field1
some_field2
variable_fields
datetime
... 
```

现在我想在 variable_fields 中存储超过 1 个值，如下所示：

```
user_id:5;message_id:10 
```

我不为要存储的每个值创建单独的字段的原因是这些值在整个项目中都不同。所以我在项目中存储了不同的值。有时`variable_fields`包含此值：

```
user_id:5;message_id:10 
```

而在其他时候它包含这个值：

```
car_id:56;payment_id:45 
```

这不会是一个大问题，但我希望能够在这个领域进行搜索。所以像：`variable_fields LIKE '%payment_id:45%'.`

这显然需要 mysql 的时间。有没有另一种方法来处理这个而不是为每个值创建一个字段？那么mysql中的某种动态字段？

我很高兴得到各种帮助。先感谢您！

此致，

弗雷迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:10:07.333

如果您将添加 myisam 全文索引或在该列上使用任何其他全文工具（例如 sphinx、lucene），那么您描述的那些搜索将工作得更好，但这不是可取的。

我建议将动态元数据按情况划分为不同的表，并在主表中保留一个 type_id，或者保留默认设置为 NULL 的所有选项的列。真的取决于是否有一个简单的划分，或者这是否真的是动态的并且随着时间的推移而变化。如果您将数据放入多个表中，根据 type_id 的 JOIN 将能够通过这些特定字段值进行查询。请务必在两个表中的共同 id 上创建索引。

# sql - Oracle UPDATE 从列数据中删除前缀值

> ID：16144106
> 
> 赞同：0
> 
> 时间：2013-04-22T09:50:57.637
> 
> 标签：sql, oracle

我有以下查询，它在 p_id 前面加上 p_number

```
UPDATE table1 t1 
   SET t1.p_id = CONCAT((SELECT CONCAT(t2.p_number,' ') 
                           FROM tble2 t2 
                          WHERE t2.id = t1.p_id)
                        , t1.p_id) 
 WHERE t1.p_id = '19680'; 
```

这基本上需要像

```
t2.p_number:X12
t1.p_id:    19680 
```

并将其变成

```
t2.p_number:X12
t1.p_id:    X12 19680 
```

我被要求的是一个“回滚”脚本，记住我知道的唯一列是“19680”！我查看了 REPLACE 命令，但不确定我是否可以让它工作；有任何想法吗？

* * *

解决！

谢谢大家，那里有一个很好的提示日志，我已经找到了 Ben 的一个非常简单的查询。

这个问题背后有相当多的历史，基本上客户已经输入了 p_id 的值并输入了重复项。因此，他们希望在 p_id 上添加 p_number 前缀，以使它们再次唯一（一旦进入客户端就无法更新），但他们也想要一个 get-out 子句，以防出现问题，因此他们希望能够删除前缀数据。

p_id 实际上是在系统中使用的，因此在这种情况下虚拟表和代码更改实际上并不可行，而是为它们更新客户端数据是最简单的。

干杯，希望客户对提案感到满意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:03:03.410

这是我的2c。

**不要**更新您的原始字段。如果你有可能想要回滚它，那么你会给自己带来巨大的问题。创建一个使用新值更新的新字段。当您想引用此字段时，您可以这样做。当您想引用另一个字段时，您可以这样做。

更一般地说，这对于您想要“修复”的任何字段都是一个很好的策略。您可以稍后改进您“修复”的内容，如果您覆盖了您无法做到的原始数据。始终保留原始数据，然后您可以随意重复使用它。

如果您只想删除第一个空格之前的所有内容，则以下内容将起作用：

```
update the_table
   set p_id = substr(p_id, instr(p_id, ' ') + 1); 
```

[SQL小提琴](http://www.sqlfiddle.com/#!4/aa4ae/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:08:31.763

作为一般规则，不要存储您可以**推断**的数据。

只需在客户端代码、视图或虚拟列 (Oracle 11) 中为字段添加前缀，而无需修改原始值。由于您尚未对其进行修改，因此没有什么可回滚的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:05:58.567

如果你问如何简单地做到这一点，那么修剪掉前缀直到空格并取回你的原始值。如果您正在寻找更好的选择，那么我会说创建另一列，如“old_p_id”，然后将旧的推入其中。如果你想回滚，你总是可以用 old_p_id 更新 p_id。

```
+----------------------+
¦ p_id      ¦ old_p_id ¦
¦-----------+----------¦
¦ X12 19680 ¦  19680   ¦
¦ X13 19681 ¦  19681   ¦
+----------------------+ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T10:09:18.330

您使用的是哪个版本的 Oracle？如果是 Oracle 11g，您可以为此使用虚拟列！

```
alter table table1
add new_column as p_number || ' ' || p_id; 
```

我在这里假设您的所有列都是 varchar 类型。

使用这种方法，您必须更新客户端代码以引用新列。

# mysql - 错误代码：1064。您的 SQL 语法有错误；3表mysql连接

> ID：16144113
> 
> 赞同：-3
> 
> 时间：2013-04-22T09:51:13.353
> 
> 标签：mysql, join

当我尝试使用 mysql 启动查询以加入 3 个表时，出现以下错误：

错误代码：**1064。您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以`mahara.group_member`在第 6 行的“group INNER JOIN as group_members ON group_id = member”附近使用正确的语法**

mysql是：

```
SELECT `mahara.group.id` as group_id,
       `mahara.group.name` as group_name,
       `mahara.group_member.member` as member_id,
       `mahara.group_member.group` as member_groupid,
       `mahara.usr.id` as user_id
FROM `mahara.group` as group
     INNER JOIN `mahara.group_member` as group_members ON group_id = member_id,
     INNER JOIN `mahara.usr` as users ON member_id = user_id
LIMIT 0, 200; 
```

对于我的生活，我看不到我做错了什么。任何帮助表示赞赏。

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T10:18:15.473

您的查询存在一些问题。

首先，您尝试使用保留字创建别名`group`。您必须使用反引号转义保留字。此外，您应该在表格和列名称周围有单独的反引号集，它们不应包含在一对中。

其次，在表的连接之后有一个额外的逗号，应该删除`mahara.group_member`之后的逗号。`member_id,`

查询应该是：

```
SELECT `group`.`id` as group_id,
       `group`.`name` as group_name,
       group_members.`member` as member_id,
       group_members.`group` as member_groupid,
       users.`usr.id` as user_id
FROM `mahara`.`group` as `group`
INNER JOIN `mahara`.group_member` as group_members 
  ON group_id = member_id
INNER JOIN `mahara`.`usr` as users 
  ON member_id = user_id
LIMIT 0, 200; 
```

另外，请注意您应该避免使用[保留字](http://dev.mysql.com/doc/mysqld-version-reference/en/mysqld-version-reference-reservedwords-5-5.html)作为表、列和别名的名称。

# makefile - makefile：删除重复的单词而不进行排序

> ID：16144115
> 
> 赞同：24
> 
> 时间：2013-04-22T09:51:15.760
> 
> 标签：makefile

是否有可能删除单词列表中的重复项而不*在 makefile 中*排序？

```
$(sort foo bar lose) 
```

确实删除了重复项（这对我来说是这种情况下的主要功能），但也有排序（对我来说，在这种情况下是一个不幸的副作用）。我想避免这种情况。

[更新]

**bobbogo**的回答效果很好。只记得使用`define uniq`v3.81 和（没有检查这个）`define uniq =`以后的版本。

***如果您的记录分隔符不是空格，则***larsmans**的回答也非常有效，例如，如果您想从中删除重复项`_foo_bar_lose_lose_bar_baz_`等。只要记住使用`RS`and `ORS`awk 选项而不是`tr`, 并用`$(firstword $(shell ... ))`**

 *** * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-22T15:41:49.050

基于无聊`$eval`的方法：

```
define uniq =
  $(eval seen :=)
  $(foreach _,$1,$(if $(filter $_,${seen}),,$(eval seen += $_)))
  ${seen}
endef

w := z z x x y c x

$(info $(sort $w))
$(info $(call uniq,$w)) 
```

极其可怕的使标准库递归调用（*递归使被认为是极其可怕的*？）：

```
uniq = $(if $1,$(firstword $1) $(call uniq,$(filter-out $(firstword $1),$1))) 
```

值得注意的是，在第二个公式中没有损坏任何变量（见`seen`第一个）。**最好**只是这样做（鉴于*make*中缺乏当地人）！

## 编辑

我对上述递归 make 的晦涩评论似乎使情况有些混乱。在这篇文章的上下文中，“递归”是指*递归函数*。*它实际上与可恶的递归 make*无关。

*uniq*的后一个（递归）定义非常好，性能好，体积小，绝对是可以使用的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-10-23T23:39:44.463

取决于你在哪里需要它以及你是否使用 GNU make。如果您只想对目标先决条件列表进行 uniq，那么它就像 ( [http://www.gnu.org/software/make/manual/make.html#Quick-Reference](http://www.gnu.org/software/make/manual/make.html#Quick-Reference) ) 一样简单：

> $^ 的值省略了重复的先决条件，而 $+ 保留它们并保留它们的顺序。

所以，像这样的规则

```
exe: $(OBJS)
        $(LD) -o $@ $^ 
```

将自动过滤 $(OBJS) 中的重复项，同时仍保持其他项目的顺序相同。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-22T10:07:24.120

You could `echo` the words through `awk`:

```
echo foo bar foo baz bar | tr ' ' '\n' | awk '!a[$0]++' 
```

Deduping one-liner taken from [catonmat](http://www.catonmat.net/blog/wp-content/uploads/2008/09/awk1line.txt).

(Don't forget to double the `$` to `$$` in a Makefile.)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-11T11:45:33.553

以下适用于我在 GNU make v3.82 下：

```
uniq = $(eval _uniq := $1)$(strip $(foreach _,$(_uniq),$(if $(filter $_,$(_uniq)),$(eval _uniq := $(filter-out $_,$(_uniq)))$_))) 
```

它不会通过在 中创建副本来修改其输入`_uniq`，并且它不是递归的。**

# ios - 异步调度队列触发错误

> ID：16144121
> 
> 赞同：0
> 
> 时间：2013-04-22T09:51:31.263
> 
> 标签：ios, objective-c, multithreading

我正在尝试编写一个简单的 iPhone 应用程序，对应用程序沙箱中的文件内容进行一些修改。

我需要让这个过程变得懒惰。确保连续文件添加/修改操作的序列化也很重要。

我有这个方法：

```
 #import "ProcessData.h"
   #import <dispatch/dispatch.h>
   @interface ProcessData ()
   @end

   dispatch_queue_t backgroundQueue;
   NSLock *lock;

   @implementation ProcessData
   -(int)newEffects: (int) idNo : (NSString*) someData
   {
    [lock lock];
    dispatch_async(backgroundQueue, ^(void)
     {
      @try
        {
         DiskAccess *dAccess = [[DiskAccess alloc] init];
         //some operations here
         [dAccess release];
         }
        @catch (NSException *exception)
        {
        }
        @finally
        {
            printf("done with this stuff!");
        }
       })
      [lock release];
      }
      @end 
```

当我运行此代码时，应用程序会毫不客气地崩溃，我会看到：

```
 0x1b1f2b5:  cmpl   $1, 36(%esi)     Thread 1: EXC_BAD_ACCESS(code=2,address=0x24) 
```

但是，如果我换行：

```
 dispatch_async(backgroundQueue, ^(void) 
```

**至**

```
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^(void) 
```

...系统运行没有打嗝。

我想知道：

1.  如何让我的后台队列工作。我在这里做错了什么？

2.  如果我使用**dispatch_get_global_queue**并且如果有多个背靠背文件访问请求，我如何确保操作按顺序执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:01:17.943

我对你初始化 backgroundQueue 无处吗？您必须在使用前初始化 backgroundQueue。例如添加代码

```
 backgroundQueue = dispatch_queue_create(@"Background queue name", NULL); 
```

只有在那通电话之后

```
 dispatch_async(backgroundQueue, ^{
        //some code here
    }); 
```

可能与锁定类似的错误。

# python - 基于Python中的字符串列表进行迭代

> ID：16144130
> 
> 赞同：0
> 
> 时间：2013-04-22T09:51:45.857
> 
> 标签：python, api, loops, youtube

使用文本文件中的 YouTube videoID 列表，下面的代码旨在循环这些内容，同时从所有这些视频中获取评论源。谁能发现我必须犯但找不到的循环错误？

```
# Set the videoID list
f = open('video_ids.txt', 'r')
videoID_list = f.read().splitlines()
f.close()

# Cycle through videoID list getting comments via the YouTube API
for video_id in videoID_list:
#Define the comments generator
def comments_generator(yt_service, video_id):
    comment_feed = yt_service.GetYouTubeVideoCommentFeed(video_id=video_id)
    while comment_feed is not None:
        for comment in comment_feed.entry:
            yield comment
        next_link = comment_feed.GetNextLink()
        if next_link is None:
            comment_feed = None
        else:
            comment_feed = yt_service.GetYouTubeVideoCommentFeed(next_link.href)

        for comment in comments_generator(yt_service, video_id):

            # About the video
            video_title = entry.media.title.text
            video_date = entry.published.text

            # About comments
            author_name = comment.author[0].name.text
            raw_text = comment.content.text 
            comment_date = comment.published.text

            # Keep only alphanumeric characters and spaces in the comment text
            text = re.sub(r'\W+', ' ', raw_text)

            # Write to a file ('a' means append) - Comment text is set to lowercase [.lower()]
            f = open('video_comments.tsv', 'a')
            f.write("{}\t{}\t{}\t{}\t{}\t{}\t\r".format(video_title, video_date[:10], comment_date[:10], comment_date[11:19], author_name, text.lower()))

            # Also print results on screen - Comment text is set to lowercase [.lower()]
    print("{}\t{}\t{}\t{}\t{}\t{}\t\r".format(video_title, video_date[:10], comment_date[:10], comment_date[11:19], author_name, text.lower())) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:32:40.290

修复代码中的一些错误后：

```
import gdata.youtube
import gdata.youtube.service
import re

yt_service = gdata.youtube.service.YouTubeService()

# Set the videoID list
f = open('video_ids.txt', 'r')
videoID_list = f.read().splitlines()
f.close()

#Define the comments generator
def comments_generator(yt_service, video_id):
  comment_feed = yt_service.GetYouTubeVideoCommentFeed(video_id=video_id)
  while comment_feed is not None:
    for comment in comment_feed.entry:
      yield comment
    next_link = comment_feed.GetNextLink()
    if next_link is None:
      comment_feed = None
    else:
      comment_feed = yt_service.GetYouTubeVideoCommentFeed(next_link.href)

f = open('video_comments.tsv', 'a')

# Cycle through videoID list getting comments via the YouTube API
for video_id in videoID_list:

  for comment in comments_generator(yt_service, video_id):

    video_entry = yt_service.GetYouTubeVideoEntry(video_id=video_id)

    # About the video
    video_title = video_entry.title.text
    video_date = video_entry.published.text
    # About comments
    author_name = comment.author[0].name.text
    raw_text = comment.content.text
    comment_date = comment.published.text

    # Keep only alphanumeric characters and spaces in the comment text
    text = re.sub(r'\W+', ' ', raw_text)
    # Write to a file ('a' means append) - Comment text is set to lowercase [.lower()]

    f.write("{}\t{}\t{}\t{}\t{}\t{}\t\r".format(video_title, video_date[:10], comment_date[:10], comment_date[11:19], author_name, text.lower()))

    # Also print results on screen - Comment text is set to lowercase [.lower()]
f.close()
print("{}\t{}\t{}\t{}\t{}\t{}\t\r".format(video_title, video_date[:10], comment_date[:10], comment_date[11:19], author_name, text.lower())) 
```

# vhdl - 避免在 VHDL 中重复代码

> ID：16144135
> 
> 赞同：1
> 
> 时间：2013-04-22T09:51:58.677
> 
> 标签：vhdl

我有一个代码清单，其中充满了如下代码，但代码块更大。

```
if (m = '00000') then 
  done <= '1';
else
  done <= '0';
end if; 
```

有没有办法让它像#define 这样的ac 函数，这样我就不必到处写相同的代码了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T10:30:01.817

这段代码首先不是 VHDL，所以你还有其他事情要担心。（编辑后更像VHDL）

谢天谢地，VHDL 与 C 的#define 完全不同。相反，它具有用于适当抽象的工具，例如包（非常粗略地，C++ 命名空间，但做得正确）、函数和过程。

这允许你写

```
done <= test_zero(m); 
```

假设`done`是一个信号（或者`done := test_zero(m);`如果它是一个变量）

test_zero 然后是一个函数，类似于

```
function test_zero ( word : in std_logic_vector) return std_logic is
begin
   if word = (word'range => '0') then
      return '1';
   else 
      return '0';
   end if;
end test_zero; 
```

其中（因为它使用“范围”属性）将适用于不同大小的“m”。

您最终将获得一组有用的功能：将它们保存在一个包中并在整个项目中使用它们。

一个包通常表现为两部分：包规范（有点像正确完成的 C 头文件）

```
package my_tools is

   function test_zero ( word : in std_logic_vector) return std_logic;

end my_tools; 
```

和一个包含实现的包体

```
package body my_tools is

   function test_zero ( word : in std_logic_vector) return std_logic is
      ...
   end test_zero;

end my_tools; 
```

为了使用它，它被编译成一个库（我们将使用默认库“work”，它已经由`library work;`每个 VHDL 文件中的隐式声明）。然后，您可以选择使包中的所有内容在您的代码中可见：

```
use work.my_tools.all; 
```

或者只显示一个功能：

```
use work.my_tools.test_zero; 
```

或者让任何阅读神秘“test_zero”函数来自的代码的人都清楚：

```
done <= my_tools.test_zero(m); 
```

如果您使用过 C++ 命名空间，您将认识到这些不同的策略。

使 VHDL 等效的“命名空间正确”的原因在于，VHDL 编译器使用这些声明来自动跟踪依赖关系并编译正确的位，而不需要额外的#includes 和必须与实际代码保持同步的 makefile 等外部工具手。

# maven - Jenkins 无法使用 Maven 构建。可能是代理问题

> ID：16144137
> 
> 赞同：4
> 
> 时间：2013-04-22T09:52:03.997
> 
> 标签：maven, proxy, jenkins, nexus

我正在尝试使用 Maven、Jenkins、SVN 和 Nexus 设置环境。我通过 SVN 将 Jobs 添加到 Jenkins，但由于 Maven 错误，Jenkins 无法构建这些 Jobs。

这是错误日志

```
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building imagetools 1.0
[INFO] ------------------------------------------------------------------------
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-dependency-plugin/2.1/maven-dependency-plugin-2.1.pom
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 21.756s
[INFO] Finished at: Mon Apr 22 11:43:05 CEST 2013
[INFO] Final Memory: 7M/152M
[INFO] ------------------------------------------------------------------------
[JENKINS] Archiving C:\Users\franzm\.jenkins\jobs\ImageTools\workspace\pom.xml to C:\Users\franzm\.jenkins\jobs\ImageTools\modules\com.ee$imagetools\builds\2013-04-22_11-42-40\archive\com.ee\imagetools\1.0\imagetools-1.0.pom
Warte bis Jenkins die Datensammlung abgeschlossen hat
mavenExecutionResult exceptions not empty
message : Plugin org.apache.maven.plugins:maven-dependency-plugin:2.1 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-dependency-plugin:jar:2.1
cause : Failed to read artifact descriptor for org.apache.maven.plugins:maven-dependency-plugin:jar:2.1
Stack trace : 
org.apache.maven.plugin.PluginResolutionException: Plugin org.apache.maven.plugins:maven-dependency-plugin:2.1 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-dependency-plugin:jar:2.1
    at org.apache.maven.plugin.internal.DefaultPluginDependenciesResolver.resolve(DefaultPluginDependenciesResolver.java:129)
    at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getPluginDescriptor(DefaultMavenPluginManager.java:142)
    at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getMojoDescriptor(DefaultMavenPluginManager.java:261)
    at org.apache.maven.plugin.DefaultBuildPluginManager.getMojoDescriptor(DefaultBuildPluginManager.java:185)
    at org.apache.maven.lifecycle.internal.DefaultLifecycleExecutionPlanCalculator.setupMojoExecution(DefaultLifecycleExecutionPlanCalculator.java:152)
    at org.apache.maven.lifecycle.internal.DefaultLifecycleExecutionPlanCalculator.setupMojoExecutions(DefaultLifecycleExecutionPlanCalculator.java:139)
    at org.apache.maven.lifecycle.internal.DefaultLifecycleExecutionPlanCalculator.calculateExecutionPlan(DefaultLifecycleExecutionPlanCalculator.java:116)
    at org.apache.maven.lifecycle.internal.DefaultLifecycleExecutionPlanCalculator.calculateExecutionPlan(DefaultLifecycleExecutionPlanCalculator.java:129)
    at org.apache.maven.lifecycle.internal.BuilderCommon.resolveBuildPlan(BuilderCommon.java:92)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:81)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.jvnet.hudson.maven3.launcher.Maven3Launcher.main(Maven3Launcher.java:79)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchStandard(Launcher.java:329)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:239)
    at org.jvnet.hudson.maven3.agent.Maven3Main.launch(Maven3Main.java:158)
    at hudson.maven.Maven3Builder.call(Maven3Builder.java:100)
    at hudson.maven.Maven3Builder.call(Maven3Builder.java:66)
    at hudson.remoting.UserRequest.perform(UserRequest.java:118)
    at hudson.remoting.UserRequest.perform(UserRequest.java:48)
    at hudson.remoting.Request$2.run(Request.java:326)
    at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.sonatype.aether.resolution.ArtifactDescriptorException: Failed to read artifact descriptor for org.apache.maven.plugins:maven-dependency-plugin:jar:2.1
    at org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.loadPom(DefaultArtifactDescriptorReader.java:296)
    at org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.readArtifactDescriptor(DefaultArtifactDescriptorReader.java:186)
    at org.sonatype.aether.impl.internal.DefaultRepositorySystem.readArtifactDescriptor(DefaultRepositorySystem.java:279)
    at org.apache.maven.plugin.internal.DefaultPluginDependenciesResolver.resolve(DefaultPluginDependenciesResolver.java:115)
    ... 33 more
Caused by: org.sonatype.aether.resolution.ArtifactResolutionException: Could not transfer artifact org.apache.maven.plugins:maven-dependency-plugin:pom:2.1 from/to central (http://repo.maven.apache.org/maven2): Connection to http://repo.maven.apache.org refused
    at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:538)
    at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:216)
    at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArtifact(DefaultArtifactResolver.java:193)
    at org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.loadPom(DefaultArtifactDescriptorReader.java:281)
    ... 36 more
Caused by: org.sonatype.aether.transfer.ArtifactTransferException: Could not transfer artifact org.apache.maven.plugins:maven-dependency-plugin:pom:2.1 from/to central (http://repo.maven.apache.org/maven2): Connection to http://repo.maven.apache.org refused
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(WagonRepositoryConnector.java:951)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(WagonRepositoryConnector.java:941)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.run(WagonRepositoryConnector.java:669)
    at org.sonatype.aether.util.concurrency.RunnableErrorForwarder$1.run(RunnableErrorForwarder.java:60)
    ... 3 more
Caused by: org.apache.maven.wagon.TransferFailedException: Connection to http://repo.maven.apache.org refused
    at org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.resourceExists(AbstractHttpClientWagon.java:597)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.run(WagonRepositoryConnector.java:577)
    ... 4 more
Caused by: org.apache.maven.wagon.providers.http.httpclient.conn.HttpHostConnectException: Connection to http://repo.maven.apache.org refused
    at org.apache.maven.wagon.providers.http.httpclient.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:158)
    at org.apache.maven.wagon.providers.http.httpclient.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)
    at org.apache.maven.wagon.providers.http.httpclient.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)
    at org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:573)
    at org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:425)
    at org.apache.maven.wagon.providers.http.httpclient.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
    at org.apache.maven.wagon.providers.http.httpclient.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)
    at org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.execute(AbstractHttpClientWagon.java:674)
    at org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.resourceExists(AbstractHttpClientWagon.java:593)
    ... 5 more
Caused by: java.net.ConnectException: Connection timed out: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at org.apache.maven.wagon.providers.http.httpclient.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:123)
    at org.apache.maven.wagon.providers.http.httpclient.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148)
    ... 13 more
channel stopped
Finished: FAILURE 
```

如果我通过命令行使用 Maven 构建 Jenkins，一切正常。它从 Nexus 下载所有依赖项。我还必须向 Maven 添加代理。

我下载了配置文件管理插件来为 Maven 添加自己的 settings.xml：

```
 <mirror>  
 <id>nexus</id>  
 <url>http://mynexusadress.com:6060/nexus/content/groups/public</url> <mirrorOf>central</mirrorOf> 
```

对代理的访问在 Nexus 配置文件中配置。（如上所述，在本地使用 Maven 工作正常，它从 Nexus 下载所有依赖项并将构建 jar 上传到它）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T10:43:14.307

好的，解决了这个问题，很简单。我只需要在我的 Jenkins 目录中编辑 Maven 的 settings.xml。以为这是自动完成的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-09-07T04:11:45.203

我为此挣扎了好几个小时。对于那些通过搜索引擎登陆此页面的人：

确保 maven settings.xml 适用于运行 jenkins 的用户。在 Linux 机器上，用户“jenkins”运行 jenkins 应用程序，所以

```
sudo su - jenkins
cd ~/.m2
vi settings.xml 
```

（是的，vi。真正的男人使用 vi。）

然后按照添加代理的标准程序进行修改

```
<settings>
<proxies>
<proxy>
  <id>example-proxy</id>
  <active>true</active>
  <protocol>http</protocol>
  <host>proxy.example.com</host>
  <port>8080</port>
  <username>proxyuser</username>
  <password>somepassword</password>
  <nonProxyHosts>www.google.com|*.example.com</nonProxyHosts>
</proxy>
 </proxies>
 .
 .
</settings> 
```

[https://maven.apache.org/guides/mini/guide-proxies.html](https://maven.apache.org/guides/mini/guide-proxies.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T10:05:46.623

[您应该按照此处](https://web.archive.org/web/20130414055345/http://blogs.wandisco.com/2012/08/15/jenkins-configuring-proxy/)所述在 Jenkins 中配置代理。

# data-binding - SWT 和 Xtext 之间的数据绑定

> ID：16144138
> 
> 赞同：0
> 
> 时间：2013-04-22T09:52:04.750
> 
> 标签：data-binding, eclipse-plugin, jface, eclipse-emf

我正在为 Eclipse 构建一个提供图形编辑器的插件。

在这个编辑器中，我想在`XText`模型和 SWT 小部件之间绑定一些数据。自动更新时如何执行此操作`XTextDocument`？

是否有现有的工具可以帮助解决这个问题，或者为此进行代码生成？

到目前为止，我已经创建了带有控制器类的窗口构建器插件 JFace 自动数据绑定。似乎每当我更改 xtext 数据模型（JString）绑定到的文本字段时，绑定都会将 JString 的 null/new 实例放入 JString 实例中。所以文档不熟悉新的 JString 实例，并且没有使用新数据进行更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T10:12:07.073

Dana ，[仅供](http://www.youtube.com/watch?v=7RThXRyo3ik)参考，我在[https://github.com/vorburger/xtext-sandbox/tree/master/XtextDocumentBinding（http://www.youtube.com/watch?v=](https://github.com/vorburger/xtext-sandbox/tree/master/XtextDocumentBinding) [7RThXRyo3ik](http://www.youtube.com/watch?v=7RThXRyo3ik) ).. 基本上工作，除了列表 - 补丁和拉请求最受欢迎！;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T12:31:05.093

我扩展了 AbstractObservableValue 以使用简单的 xtext 模型作为字符串布尔值和数字。这有助于我在 swt 模型和我的 xtext 模型之间进行绑定。

# api - 有人可以解释一下什么是 API。

> ID：16144143
> 
> 赞同：3
> 
> 时间：2013-04-22T09:52:25.447
> 
> 标签：api, unix, shared-libraries

我已经用谷歌搜索了它，但无法正确理解它..不确定它是库还是服务器内通信器..

有人可以从高级/低级向我解释 API 的含义吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:56:06.950

[http://en.wikipedia.org/wiki/Application_programming_interface](http://en.wikipedia.org/wiki/Application_programming_interface)

从这里阅读它，希望能消除您的大部分疑虑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:57:44.880

API代表应用程序编程接口，这意味着使用现有程序或代码并使用您的代码访问它。

=== 示例，搜索引擎：

搜索引擎 1：提供搜索和 api（如果你想要这可以是 google） 搜索引擎 2：使用 googles api 来获取结果（这是你的）

要获得结果，您基本上搜索其他搜索引擎并将其结果提供给您

====

API可以以多种方式使用，以访问其他数据或代码等

可以在这里找到深入的解释：[http ://en.wikipedia.org/wiki/Application_programming_interface](http://en.wikipedia.org/wiki/Application_programming_interface)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:02:27.420

应用程序编程接口 (API) 是一组编程指令和标准，用于访问基于 Web 的软件应用程序或 Web 工具。一家软件公司向公众发布其 API，以便其他软件开发人员可以设计由其服务提供支持的产品。

例如，Amazon.com 发布了其 API，以便网站开发人员可以更轻松地访问 Amazon 的产品信息。使用亚马逊 API，第三方网站可以发布直接链接到亚马逊产品的最新价格和“立即购买”选项。

API 是软件到软件的接口，而不是用户接口。使用 API，应用程序可以在没有任何用户知识或干预的情况下相互交谈。当您在线购买电影票并输入您的信用卡信息时，电影票网站使用 API 将您的信用卡信息发送到远程应用程序，该应用程序验证您的信息是否正确。确认付款后，远程应用程序会向电影票网站返回一个响应，表示可以发行票。

作为用户，您只能看到一个界面——电影票网站——但在幕后，许多应用程序正在使用 API 协同工作。这种类型的集成称为无缝集成，因为用户永远不会注意到软件功能何时从一个应用程序传递到另一个应用程序。

这篇文章展示了一个例子

[http://www.codeproject.com/Tips/127316/Integrate-FB-javascript-API-to-your-asp-net-app-to](http://www.codeproject.com/Tips/127316/Integrate-FB-javascript-API-to-your-asp-net-app-to)

# r - 我该怎么做才能避免使用 foreach 命名所有函数

> ID：16144145
> 
> 赞同：1
> 
> 时间：2013-04-22T09:52:38.533
> 
> 标签：r, foreach, parallel-processing

您好我正在使用包的`%dopar%`并行功能`foreach`（`parallel`作为后端）我有一行这样的代码

```
exportedFn <- #STUFF
exportedPkg <- #STUFF
allDataT <- foreach(myFile=orderFiles, .combine='rbind', .packages=exportedPkg, .export=exportedFn) %dopar% getSetOrderData(myFile, f.type="SUBMIT"); 
```

问题是`getSetOrderData`调用不同的函数，这些函数本身调用函数。看来我必须指定所有子功能...

有没有办法让我避免这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T10:35:27.180

确保所有变量都在相同的环境中定义`getSetOrderData`？我发现如果我定义

```
fsub <- function( x ){
  return( x^2 )
}

fmain <- function( x ){
  x <- fsub( x ) + 2
  return(x)
} 
```

然后我这样使用它们：

```
require(doParallel)
cl <- makeCluster( 2 , outfile = "" )
registerDoParallel( cl )
foreach( k = 1:2 , .verbose = TRUE , .combine = c ) %dopar%{
  fmain( k )
} 
```

我得到了预期的结果：

```
numValues: 2, numResults: 0, stopped: TRUE
automatically exporting the following variables from the local environment:
  fmain, fsub 
got results for task 1
numValues: 2, numResults: 1, stopped: TRUE
returning status FALSE
got results for task 2
numValues: 2, numResults: 2, stopped: TRUE
first call to combine function
evaluating call object to combine results:
  fun(result.1, result.2)
returning status TRUE
[1] 3 6 
```

此外，如果我`.GlobalEnv`在另一个函数内部调用函数（未在其中定义的函数），使用`source()`它仍然可以工作。假设我`util_funcs.R`在我的主目录中创建了一个名为的脚本并将这两个函数粘贴到其中，但调用它们`fsub2`和`fmain2`. 如果我通过以下方式调用它：

```
fsource <- function( x ){
  source( "~/util_funcs.R" )
  x <- fmain2( x )
  return( x )
} 
```

它仍然有效：

```
numValues: 2, numResults: 0, stopped: TRUE
automatically exporting the following variables from the local environment:
  fsource 
got results for task 1
numValues: 2, numResults: 1, stopped: TRUE
returning status FALSE
got results for task 2
numValues: 2, numResults: 2, stopped: TRUE
first call to combine function
evaluating call object to combine results:
  fun(result.1, result.2)
returning status TRUE
[1] 3 6 
```

您可以在一个简单的 R 脚本中复制/粘贴所有功能并使用`source()`吗？

# vba - VBA 从 Outlook 邮件中检索 HTMLBody

> ID：16144149
> 
> 赞同：4
> 
> 时间：2013-04-22T09:52:54.810
> 
> 标签：vba, outlook

首先，我通过 Outlook 创建一封电子邮件：

```
Sub CreateHTMLMail()
'Creates a new e-mail item and modifies its properties.

Dim olApp As Outlook.Application
Dim objMail As Outlook.MailItem
Set olApp = Outlook.Application
'Create e-mail item
Set objMail = olApp.CreateItem(olMailItem)

Dim sHTML_Open              As String
Dim sHTML_Introduction      As String
Dim sHTML_Goodbye           As String
Dim sHTML_Close             As String
Dim sHTML_Process_Date      As String
Dim sHTML_Processor         As String
Dim sHTML_Issuer            As String
Dim sHTML_Details           As String

Dim sHTML_Body              As String

sHTML_Open = "<HTML><BODY>"
sHTML_Introduction = "Hi team,<BR/><BR/>" & _
                        "Data is ready to process. Please find details as below.<BR/>"
sHTML_Process_Date = "<P ID='PROCESSDATE'>28 February 2013</P>"
sHTML_Processor = "<P ID='PROCESSOR'>AKSHAY</ID></P>"
sHTML_Issuer = "<P ID='ISSUER'>DATAGROUP.COM</ID></P>"
sHTML_Details = "<P ID='DETAILS'>" & _
                    "<UL>" & _
                        "<LI>Fimta23456 09:00:00 flor345</LI>" & _
                        "<LI>Fimta23456 09:00:00 flor345</LI>" & _
                    "</UL>" & _
                "</P><BR/>"
sHTML_Goodbye = "Thanks"
sHTML_Close = "</BODY></HTML>"

sHTML_Body = sHTML_Open & sHTML_Introduction & sHTML_Process_Date & sHTML_Processor & sHTML_Issuer & _
          sHTML_Details & sHTML_Goodbye & sHTML_Close

With objMail
   'Set body format to HTML
   .BodyFormat = olFormatHTML
   .To = "Kim Gysen"
   .Subject = "data remit file"
   .HTMLBody = sHTML_Body
   .Display
End With
End Sub 
```

通过代码，我想根据 ID 检索值。这对我来说似乎是最干净的方式，我并不特别喜欢“拆分”方法，因为它是一种硬编码；不是很有活力，有点不可靠。

不幸的是，当我检索 HTML 正文时，我无法检索原始 HTML，因为它被 Outlook 扭曲了：

```
Sub Get_OL()

Dim oFolder                 As MAPIFolder
Dim oItem                   As Variant

Dim sHTML_Body              As String
Dim sHTML_Process_Date      As String
Dim sHTML_Processor         As String
Dim sHTML_Issuer            As String
Dim sHTML_Details           As String

Dim oExcel              As Object
Dim oBook               As Workbook

Set oExcel = CreateObject("Excel.Application")
Set oBook = oExcel.Workbooks.Add

'Access the outlook inbox folder

Set oFolder = GetNamespace("MAPI").PickFolder

'On error resume next usually not to use, but feteching emails may give unexpected errors
On Error Resume Next
For Each oItem In oFolder.Items
    If TypeOf oItem Is Outlook.MailItem Then
        If oItem.Subject Like "*data remit file*" Then
            'Turn off on error resume next asap
            On Error GoTo 0
            sHTML_Body = oItem.HTMLBody
            Debug.Print sHTML_Body

            Exit For
        End If
    End If
Next oItem

End Sub 
```

在 debug.print 上，这就是我得到的（只放格式的最后一行）：

```
</o:shapelayout></xml><![endif]--></head><body lang=EN-GB link=blue vlink=purple><div class=WordSection1><p class=MsoNormal>Hi team,<br><br>Data is ready to process. Please find details as below.<br><br><o:p></o:p></p><p>28 February 2013<o:p></o:p></p><p id=PROCESSOR>AKSHAY<o:p></o:p></p><p id=ISSUER>DATAGROUP.COM<o:p></o:p></p><ul type=disc><li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;mso-list:l0 level1 lfo1'>Fimta23456 09:00:00 flor345<o:p></o:p></li><li class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;mso-list:l0 level1 lfo1'>Fimta23456 09:00:00 flor345<o:p></o:p></li></ul><p class=MsoNormal><br>Thanks<o:p></o:p></p></div></body></html> 
```

我想检索我放入 HTMLBody 中的原始 HTML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-05T21:03:47.927

2种方式：

**1）**解析文本 - 几件事要做（*不推荐*：硬编码）

您所需要的只是[解析文本](http://msdn.microsoft.com/en-us/library/office/dd492012%28v=office.12%29.aspx#Outlook2007ProgrammingCh17_ParsingTextFromAMessageBody)，但 MSDN 展示了如何使用**InStr**函数进行解析。我强烈建议使用[RegEx](http://msdn.microsoft.com/en-us/library/ms974570.aspx)来解析 html 文本。注意：需要参考*MS VBScript 正则表达式 xx*。

[Excel VBA 的简单正则表达式教程](http://www.macrostash.com/2011/10/08/simple-regular-expression-tutorial-for-excel-vba//)

**2）**使用MailItem对象的[UserProperites](http://msdn.microsoft.com/en-us/library/office/ff866403.aspx)（*推荐*）

如果 MailItem 不包含您的属性（y），则无事可做；）

[如何：添加自定义属性](http://msdn.microsoft.com/en-us/library/office/ff862196.aspx)

# url - Wilcard in url patterns Yii Framework

> ID：16144153
> 
> 赞同：0
> 
> 时间：2013-04-22T09:53:09.287
> 
> 标签：url, yii, pattern-matching

I'm trying to create a dynamic url pattern for the following url:

[http://domain.com/content/pagetitle](http://domain.com/content/pagetitle)

This is what I have added in the url.rules:

```
'content/<page:.*?>' => 'cms/default/home', 
```

this works fine for /`content/pagetitle.html` but not for `/content/pagetitle` while my url suffix is empty. Does anyone know what I'm doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-03T14:07:55.353

您的问题也可能是，*如果在命名 group 之外，*`.`正则表达式“任何字符”字符会转义。

 *```
<controller:[a-zA-Z]>/(.*) 
```

变成

```
<controller:[a-zA-Z]>/(\.*)
//                     ^ It escaped it for us even though we didn't want it 
```

解决方案是简单地为它组：

```
<controller:[a-zA-Z]>/<wildcard:.*> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T06:01:34.273

在这种情况下，您不需要通配符：

```
'content/<page>' => 'cms/default/home', 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:13:12.880

不确定为什么要添加 .*？那里...

下面的例子应该工作

```
'content/<page:.+>' => 'cms/default/home', 
```*

# ios - 复杂单元格的动态 UITableViewCell 高度

> ID：16144154
> 
> 赞同：-1
> 
> 时间：2013-04-22T09:53:10.997
> 
> 标签：ios, dynamic, uitableview

我正在尝试计算 UITableView 中单元格的动态高度。

我的单元格非常复杂：它可能是一打标签、uitextfield、按钮等。事实上，它就像一个单元格中的表单（使用 de UITableViewGroupedStyle，它看起来真的很像一个表单！）。所以我不在乎“sizeWithFont:withConstrainedSize: etc...”

我的单元格中有一个自定义类方法，它计算单元格的高度（从内部组件的高度）。

现在在我的 UITableViewController 中，我想为我的单元格设置正确的高度。为此，我需要在我的手机上调用 getHeight。但是...如果我在“heightForRowAtIndexPath”中调用“cellForRowAtIndexPath”，它会循环（因为 cellForRow ... 需要 heightForRow .... 来构建一个单元格）。

我还尝试在我的 cellForRowAtIndexPath 中构建单元，获取它的高度并将其存储在一个数组中以在 heigtForRowAtIndexPath 中检索它。因为“heightForRowAtIndexPath”在“cellForRow...”之前被调用，所以我第一次返回一个默认值（CGFLOAT_MAX）。构建单元格后，我返回从数组中检索到的高度。但是要第二次调用它，我需要手动调用它，所以当我的单元格构建在“CellForRow ...”中时，我调用 reloadData。但是......（一次又一次）它无论如何都不起作用......事实上，有时它工作（使用 UITableViewGroupedStyle）有时不工作（使用 UITableViewPlainStyle，因为它不像 CGFLOAT_MAX 默认值......）

它让我疯狂！

此版本适用于 UITableViewGroupedStyle ：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    MFFormListCell *cell = [self.cellSizeMap objectForKey:indexPath];
    return cell;

}

-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

    MFFormListCell *cell = [self.cellSizeMap objectForKey:indexPath];
    if(!cell || ![cell isEqual:[NSNull null]]) {
        [self.cellSizeMap setObject:[NSNull null] forKey:indexPath];
        cell = [tableView dequeueReusableCellWithIdentifier:@"FormListCell" forIndexPath:indexPath];
        [self.cellSizeMap setObject:cell forKey:indexPath];
    }

    if([cell isEqual:[NSNull null]])
        return CGFLOAT_MAX;     //Valeur max pour que le système prennent en compte toutes les cellules à afficher
    else
        return [[cell getHeight] floatValue];

} 
```

不要问“heightForRowAtIndexPath:”中的第一个“if”，这是避免循环的坏技巧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:10:35.270

您的表格数据源应该知道单元格的高度，而不是您的单元格。根据将显示的内容计算视图控制器中每个单元格的高度，并将它们存储在数组中。当你重新加载你的表时，你只需要在相应的索引处返回数组中先前计算的高度的索引。

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
     return [_cellHeights objectAtIndex:indexPath.row];
} 
```

# java - Using Radio button (radio group) instead of two simple button

> ID：16144158
> 
> 赞同：-2
> 
> 时间：2013-04-22T09:53:19.923
> 
> 标签：java, android, radio-button, android-wifi, radio-group

I am successfully passing string from my android to computer(through WiFi) using two simple button.but my question is i want to use single radio button (as toggle) instead of two simple button .here is my code

```
 import java.io.IOException;
          import java.io.PrintWriter;
          import java.net.Socket;
          import java.net.UnknownHostException;

          import android.os.Bundle;
          import android.app.Activity;
          import android.view.View;
          import android.view.View.OnClickListener;
          import android.widget.Button;

          public class MainActivity extends Activity {

          private Socket client;
          private PrintWriter printwriter;

          private Button button;
          private Button button1;
          private String messsage;

          @Override
          protected void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.main);

          button = (Button) findViewById(R.id.button1);
          button1 = (Button) findViewById(R.id.button2);
          button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            messsage = "TV ON" ; //etMsg.getText().toString();
            //etMsg.setText("");
           // port = Integer.parseInt(etPort.getText().toString());

            new Thread(new Runnable() 
            {

                @Override
                public void run() {
                    // TODO Auto-generated method stub
                    try 
                    {
                      //  client = new Socket(etIP.getText().toString(), port);
                        client = new Socket("1.2.3.4",2000);

                        printwriter = new    PrintWriter(client.getOutputStream(),true);
                        printwriter.write(messsage);
                        printwriter.flush();
                        printwriter.close();
                        client.close();
                    }

                    catch (UnknownHostException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }       
                }
            }).start();

        }
    });

button1.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        messsage = "TV OFF" ; //etMsg.getText().toString();
        //etMsg.setText("");
       // port = Integer.parseInt(etPort.getText().toString());

        new Thread(new Runnable() 
        {

            @Override
            public void run() {
                // TODO Auto-generated method stub
                try 
                {
                  //  client = new Socket(etIP.getText().toString(), port);
                    client = new Socket("1.2.3.4",2000);

                    printwriter = new PrintWriter(client.getOutputStream(),true);
                    printwriter.write(messsage);
                    printwriter.flush();
                    printwriter.close();
                    client.close();
                }

                catch (UnknownHostException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }       
            }
        }).start();

    }
});
       }

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:41:00.990

我认为您想研究使用 a[`CheckBox`](http://developer.android.com/reference/android/widget/CheckBox.html)而不是单选按钮组。这是一个简单的两种状态按钮（选中或未选中）。从文档中：

```
final CheckBox checkBox = (CheckBox) findViewById(R.id.checkbox_id);
if (checkBox.isChecked()) {
    checkBox.setChecked(false);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:17:56.263

让我们考虑一下，

> 单选按钮组 ID：ControlTVRadioButtonGroup
> 
> 该组中的单选按钮是：TV_on_rb 和 TV_off_rb

**代码：**

```
ControlTVRadioButtonGroup= (RadioGroup) view.findViewById(R.id.ControlTVRadioButtonGroup);

ControlTVRadioButtonGroup.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {

            if(checkedId == R.id.TV_on_rb)
            {
                   //code you have written in onclick of button (i.e for tv_on)
            }
            else if(checkedId == R.id.TV_off_rb)
            {
                 //code you have written in onclick of button1 (i.e for tv_off)
            }
        }
    }); 
```

# python - 如何将 Python C 模块与 `ld` 链接。对“__dso_handle”的未定义引用

> ID：16144160
> 
> 赞同：3
> 
> 时间：2013-04-22T09:53:28.413
> 
> 标签：python, linux, ld

我当前的命令：

```
c++ -fPIC -c algo_cython.cpp
ld -shared algo_cython.o -L/usr/lib/gcc/x86_64-linux-gnu/4.7 -lc -lstdc++   -o algo_cython.so 
```

和错误：

```
algo_cython.o: In function `__static_initialization_and_destruction_0(int, int)':
algo_cython.cpp:(.text+0x83e4): undefined reference to `__dso_handle'
ld: algo_cython.o: relocation R_X86_64_PC32 against undefined hidden symbol `__dso_handle' can not be used when making a shared object
ld: final link failed: Bad value 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:00:42.200

`algo_cython.cpp`使用该选项编译`-fPIC`- 如果没有此标志，您无法在 intel 上编译 64 位共享对象，因此编译行应为：

```
c++ -fPIC -c algo_cython.cpp 
```

此外，我实际上会使用编译器驱动程序来生成共享对象，而不是直接调用`ld`ie 你可以使用：

```
c++ -shared algo_cython.o -L/usr/lib/gcc/x86_64-linux-gnu/4.7 -lc -lstdc++   -o algo_cython.so 
```

除非你**真的**想做一些编译器驱动无法驱动的事情，否则直接调用`ld`不是你想做的。

# objective-c - Shell Script Invocation Error Command /bin/sh failed with exit

> ID：16144162
> 
> 赞同：2
> 
> 时间：2013-04-22T09:53:33.840
> 
> 标签：objective-c

i am trying to make framework for third party in ios for iphone.when i build my project i got an error that error is Shell Script Invocation Error Command /bin/sh failed with exit code 1

my Shell Script is-

```
set -e

mkdir -p "${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.framework/Versions/A"

mkdir -p "${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.framework/Versions/A/Headers"

# Link the "Current" version to "A"

ln -sf A "${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.framework/Versions/Current"

ln -sf Versions/Current/Headers "${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.framework/Headers"

ln -sf "Versions/Current/${PRODUCT_NAME}" "${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.framework/${PRODUCT_NAME}"

# The -a ensures that the headers maintain the source modification date so that we don't constantly

# cause propagating rebuilds of files that import these headers.
cp -a "${BUILT_PRODUCTS_DIR}/${PUBLIC_HEADERS_FOLDER_PATH}/" "${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.framework/Versions/A/Headers" 
```

and my error is-

```
PhaseScriptExecution Prepare_Framework.sh "\"/Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Products/Debug-iphoneos\"  \"/Users/manoj/Desktop/Serenity/..\""
    setenv FRAMEWORK_VERSION A
    setenv FULL_PRODUCT_NAME libSerenity.a
    setenv GCC3_VERSION 3.3
    setenv GCC_C_LANGUAGE_STANDARD gnu99
    setenv GCC_DYNAMIC_NO_PIC NO
    setenv GCC_ENABLE_SSE42_EXTENSIONS YES
    setenv GCC_ENABLE_SYMBOL_SEPARATION NO
    setenv GCC_OPTIMIZATION_LEVEL 0
    setenv GCC_PFE_FILE_C_DIALECTS "c objective-c c++ objective-c++"
    setenv GCC_PRECOMPILE_PREFIX_HEADER YES
    setenv GCC_PREFIX_HEADER Serenity/Serenity-Prefix.pch
    setenv GCC_PREPROCESSOR_DEFINITIONS "DEBUG=1 "
    setenv GCC_SYMBOLS_PRIVATE_EXTERN NO
    setenv GCC_THUMB_SUPPORT YES
    setenv GCC_TREAT_WARNINGS_AS_ERRORS NO
    setenv GCC_VERSION com.apple.compilers.llvm.clang.1_0
    setenv GCC_VERSION_IDENTIFIER com_apple_compilers_llvm_clang_1_0
    setenv GCC_WARN_ABOUT_MISSING_PROTOTYPES YES
    setenv GCC_WARN_ABOUT_RETURN_TYPE YES
    setenv GCC_WARN_UNUSED_VARIABLE YES
    setenv GENERATE_MASTER_OBJECT_FILE NO
    setenv GENERATE_PKGINFO_FILE NO
    setenv GENERATE_PROFILING_CODE NO
    setenv GID 20
    setenv GROUP staff
    setenv HEADERMAP_INCLUDES_FLAT_ENTRIES_FOR_TARGET_BEING_BUILT YES
    setenv HEADERMAP_INCLUDES_FRAMEWORK_ENTRIES_FOR_ALL_PRODUCT_TYPES YES
    setenv HEADERMAP_INCLUDES_NONPUBLIC_NONPRIVATE_HEADERS YES
    setenv HEADERMAP_INCLUDES_PROJECT_HEADERS YES
    setenv HEADER_SEARCH_PATHS "\"/Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Products/Debug-iphoneos/include\" "
    setenv ICONV /usr/bin/iconv
    setenv INFOPLIST_EXPAND_BUILD_SETTINGS YES
    setenv INFOPLIST_OUTPUT_FORMAT binary
    setenv INFOPLIST_PREPROCESS NO
    setenv INSTALL_DIR /tmp/Serenity.dst/usr/local/lib
    setenv INSTALL_GROUP staff
    setenv INSTALL_MODE_FLAG u+w,go-w,a+rX
    setenv INSTALL_OWNER manoj
    setenv INSTALL_PATH /usr/local/lib
    setenv INSTALL_ROOT /tmp/Serenity.dst
    setenv IPHONEOS_DEPLOYMENT_TARGET 4.3
    setenv JAVAC_DEFAULT_FLAGS "-J-Xms64m -J-XX:NewSize=4M -J-Dfile.encoding=UTF8"
    setenv JAVA_APP_STUB /System/Library/Frameworks/JavaVM.framework/Resources/MacOS/JavaApplicationStub
    setenv JAVA_ARCHIVE_CLASSES YES
    setenv JAVA_ARCHIVE_TYPE JAR
    setenv JAVA_COMPILER /usr/bin/javac
    setenv JAVA_FRAMEWORK_RESOURCES_DIRS Resources
    setenv JAVA_JAR_FLAGS cv
    setenv JAVA_SOURCE_SUBDIR .
    setenv JAVA_USE_DEPENDENCIES YES
    setenv JAVA_ZIP_FLAGS -urg
    setenv JIKES_DEFAULT_FLAGS "+E +OLDCSO"
    setenv KEEP_PRIVATE_EXTERNS NO
    setenv LD_GENERATE_MAP_FILE NO
    setenv LD_MAP_FILE_PATH /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Intermediates/Serenity.build/Debug-iphoneos/Serenity.build/Serenity-LinkMap-normal-armv7.txt
    setenv LD_NO_PIE NO
    setenv LD_OPENMP_FLAGS -fopenmp
    setenv LEGACY_DEVELOPER_DIR /Developer/Library/Xcode/PrivatePlugIns/Xcode3Core.ideplugin/Contents/SharedSupport/Developer
    setenv LEX /Developer/usr/bin/lex
    setenv LIBRARY_FLAG_NOSPACE YES
    setenv LIBRARY_FLAG_PREFIX -l
    setenv LIBRARY_SEARCH_PATHS "\"/Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Products/Debug-iphoneos\" "
    setenv LINKER_DISPLAYS_MANGLED_NAMES NO
    setenv LINK_FILE_LIST_normal_armv7 /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Intermediates/Serenity.build/Debug-iphoneos/Serenity.build/Objects-normal/armv7/Serenity.LinkFileList
    setenv LINK_WITH_STANDARD_LIBRARIES YES
    setenv LOCAL_ADMIN_APPS_DIR /Applications/Utilities
    setenv LOCAL_APPS_DIR /Applications
    setenv LOCAL_DEVELOPER_DIR /Library/Developer
    setenv LOCAL_LIBRARY_DIR /Library
    setenv MACH_O_TYPE staticlib
    setenv MAC_OS_X_PRODUCT_BUILD_VERSION 10K549
    setenv MAC_OS_X_VERSION_ACTUAL 1068
    setenv MAC_OS_X_VERSION_MAJOR 1060
    setenv MAC_OS_X_VERSION_MINOR 0608
    setenv NATIVE_ARCH armv7
    setenv NATIVE_ARCH_32_BIT i386
    setenv NATIVE_ARCH_64_BIT x86_64
    setenv NATIVE_ARCH_ACTUAL x86_64
    setenv NO_COMMON YES
    setenv OBJECT_FILE_DIR /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Intermediates/Serenity.build/Debug-iphoneos/Serenity.build/Objects
    setenv OBJECT_FILE_DIR_normal /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Intermediates/Serenity.build/Debug-iphoneos/Serenity.build/Objects-normal
    setenv OBJROOT /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Intermediates
    setenv ONLY_ACTIVE_ARCH NO
    setenv OPTIMIZATION_LEVEL 0
    setenv OS MACOS
    setenv OSAC /usr/bin/osacompile
    setenv OTHER_LDFLAGS -ObjC
    setenv PACKAGE_TYPE com.apple.package-type.static-library
    setenv PASCAL_STRINGS YES
    setenv PATH "/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    setenv PATH_PREFIXES_EXCLUDED_FROM_HEADER_DEPENDENCIES "/usr/include /usr/local/include /System/Library/Frameworks /System/Library/PrivateFrameworks /Developer/Headers /Developer/SDKs /Developer/Platforms"
    setenv PFE_FILE_C_DIALECTS objective-c
    setenv PKGINFO_FILE_PATH /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Intermediates/Serenity.build/Debug-iphoneos/Serenity.build/PkgInfo
    setenv PLATFORM_DEVELOPER_APPLICATIONS_DIR /Developer/Platforms/iPhoneOS.platform/Developer/Applications
    setenv PLATFORM_DEVELOPER_BIN_DIR /Developer/Platforms/iPhoneOS.platform/Developer/usr/bin
    setenv PLATFORM_DEVELOPER_LIBRARY_DIR /Developer/Library/Xcode/PrivatePlugIns/Xcode3Core.ideplugin/Contents/SharedSupport/Developer/Library
    setenv PLATFORM_DEVELOPER_SDK_DIR /Developer/Platforms/iPhoneOS.platform/Developer/SDKs
    setenv PLATFORM_DEVELOPER_TOOLS_DIR /Developer/Platforms/iPhoneOS.platform/Developer/Tools
    setenv PLATFORM_DEVELOPER_USR_DIR /Developer/Platforms/iPhoneOS.platform/Developer/usr
    setenv PLATFORM_DIR /Developer/Platforms/iPhoneOS.platform
    setenv PLATFORM_NAME iphoneos
    setenv PLATFORM_PREFERRED_ARCH armv7
    setenv PLATFORM_PRODUCT_BUILD_VERSION 9A334
    setenv PLIST_FILE_OUTPUT_FORMAT binary
    setenv PRECOMPS_INCLUDE_HEADERS_FROM_BUILT_PRODUCTS_DIR YES
    setenv PRECOMP_DESTINATION_DIR /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Intermediates/Serenity.build/Debug-iphoneos/Serenity.build/PrefixHeaders
    setenv PRESERVE_DEAD_CODE_INITS_AND_TERMS NO
    setenv PRIVATE_HEADERS_FOLDER_PATH /usr/local/include
    setenv PRODUCT_NAME Serenity
    setenv PRODUCT_SETTINGS_PATH 
    setenv PRODUCT_TYPE com.apple.product-type.library.static
    setenv PROFILING_CODE NO
    setenv PROJECT Serenity
    setenv PROJECT_DERIVED_FILE_DIR /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Intermediates/Serenity.build/DerivedSources
    setenv PROJECT_DIR /Users/manoj/Desktop/Serenity
    setenv PROJECT_FILE_PATH /Users/manoj/Desktop/Serenity/Serenity.xcodeproj
    setenv PROJECT_NAME Serenity
    setenv PROJECT_TEMP_DIR /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Intermediates/Serenity.build
    setenv RECURSIVE_SEARCH_PATHS_FOLLOW_SYMLINKS YES
    setenv REMOVE_CVS_FROM_RESOURCES YES
    setenv REMOVE_GIT_FROM_RESOURCES YES
    setenv REMOVE_HG_FROM_RESOURCES YES
    setenv REMOVE_SVN_FROM_RESOURCES YES
    setenv REZ_COLLECTOR_DIR /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Intermediates/Serenity.build/Debug-iphoneos/Serenity.build/ResourceManagerResources
    setenv REZ_EXECUTABLE YES
    setenv REZ_OBJECTS_DIR /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Intermediates/Serenity.build/Debug-iphoneos/Serenity.build/ResourceManagerResources/Objects
    setenv REZ_SEARCH_PATHS "\"/Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Products/Debug-iphoneos\" "
    setenv RUN_CLANG_STATIC_ANALYZER NO
    setenv SCAN_ALL_SOURCE_FILES_FOR_INCLUDES NO
    setenv SCRIPT_INPUT_FILE_COUNT 0
    setenv SCRIPT_OUTPUT_FILE_COUNT 0
    setenv SDKROOT /Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.0.sdk
    setenv SDK_DIR /Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.0.sdk
    setenv SDK_NAME iphoneos5.0
    setenv SDK_PRODUCT_BUILD_VERSION 9A334
    setenv SED /usr/bin/sed
    setenv SEPARATE_STRIP YES
    setenv SEPARATE_SYMBOL_EDIT NO
    setenv SET_DIR_MODE_OWNER_GROUP YES
    setenv SET_FILE_MODE_OWNER_GROUP NO
    setenv SHARED_DERIVED_FILE_DIR /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Products/Debug-iphoneos/DerivedSources
    setenv SHARED_PRECOMPS_DIR /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/PrecompiledHeaders
    setenv SKIP_INSTALL YES
    setenv SOURCE_ROOT /Users/manoj/Desktop/Serenity
    setenv SRCROOT /Users/manoj/Desktop/Serenity
    setenv STRINGS_FILE_OUTPUT_ENCODING binary
    setenv STRIP_INSTALLED_PRODUCT YES
    setenv STRIP_STYLE non-global
    setenv SUPPORTED_DEVICE_FAMILIES 1,2
    setenv SUPPORTED_PLATFORMS "iphonesimulator iphoneos"
    setenv SYMROOT /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Products
    setenv SYSTEM_ADMIN_APPS_DIR /Applications/Utilities
    setenv SYSTEM_APPS_DIR /Applications
    setenv SYSTEM_CORE_SERVICES_DIR /System/Library/CoreServices
    setenv SYSTEM_DEMOS_DIR /Applications/Extras
    setenv SYSTEM_DEVELOPER_APPS_DIR /Developer/Applications
    setenv SYSTEM_DEVELOPER_BIN_DIR /Developer/usr/bin
    setenv SYSTEM_DEVELOPER_DEMOS_DIR "/Developer/Applications/Utilities/Built Examples"
    setenv SYSTEM_DEVELOPER_DIR /Developer
    setenv SYSTEM_DEVELOPER_DOC_DIR "/Developer/ADC Reference Library"
    setenv SYSTEM_DEVELOPER_GRAPHICS_TOOLS_DIR "/Developer/Applications/Graphics Tools"
    setenv SYSTEM_DEVELOPER_JAVA_TOOLS_DIR "/Developer/Applications/Java Tools"
    setenv SYSTEM_DEVELOPER_PERFORMANCE_TOOLS_DIR "/Developer/Applications/Performance Tools"
    setenv SYSTEM_DEVELOPER_RELEASENOTES_DIR "/Developer/ADC Reference Library/releasenotes"
    setenv SYSTEM_DEVELOPER_TOOLS /Developer/Tools
    setenv SYSTEM_DEVELOPER_TOOLS_DOC_DIR "/Developer/ADC Reference Library/documentation/DeveloperTools"
    setenv SYSTEM_DEVELOPER_TOOLS_RELEASENOTES_DIR "/Developer/ADC Reference Library/releasenotes/DeveloperTools"
    setenv SYSTEM_DEVELOPER_USR_DIR /Developer/usr
    setenv SYSTEM_DEVELOPER_UTILITIES_DIR /Developer/Applications/Utilities
    setenv SYSTEM_DOCUMENTATION_DIR /Library/Documentation
    setenv SYSTEM_LIBRARY_DIR /System/Library
    setenv TARGETED_DEVICE_FAMILY 1
    setenv TARGETNAME Serenity
    setenv TARGET_BUILD_DIR /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Products/Debug-iphoneos
    setenv TARGET_NAME Serenity
    setenv TARGET_TEMP_DIR /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Intermediates/Serenity.build/Debug-iphoneos/Serenity.build
    setenv TEMP_DIR /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Intermediates/Serenity.build/Debug-iphoneos/Serenity.build
    setenv TEMP_FILES_DIR /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Intermediates/Serenity.build/Debug-iphoneos/Serenity.build
    setenv TEMP_FILE_DIR /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Intermediates/Serenity.build/Debug-iphoneos/Serenity.build
    setenv TEMP_ROOT /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Intermediates
    setenv TEST_AFTER_BUILD NO
    setenv UID 501
    setenv UNSTRIPPED_PRODUCT NO
    setenv USER manoj
    setenv USER_APPS_DIR /Users/manoj/Applications
    setenv USER_LIBRARY_DIR /Users/manoj/Library
    setenv USE_DYNAMIC_NO_PIC YES
    setenv USE_HEADERMAP YES
    setenv USE_HEADER_SYMLINKS NO
    setenv VALIDATE_PRODUCT NO
    setenv VALID_ARCHS "armv6 armv7"
    setenv VERBOSE_PBXCP NO
    setenv VERSION_INFO_BUILDER manoj
    setenv VERSION_INFO_FILE Serenity_vers.c
    setenv VERSION_INFO_STRING "\"@(#)PROGRAM:Serenity  PROJECT:Serenity-4.3.2\""
    setenv XCODE_APP_SUPPORT_DIR /Developer/Library/Xcode
    setenv XCODE_PRODUCT_BUILD_VERSION 4C199
    setenv XCODE_VERSION_ACTUAL 0420
    setenv XCODE_VERSION_MAJOR 0400
    setenv XCODE_VERSION_MINOR 0420
    setenv YACC /Developer/usr/bin/yacc
    /bin/sh -c /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Intermediates/Serenity.build/Debug-iphoneos/Serenity.build/Script-AF9704D4171D31C2007A7DCE.sh

cp: /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Products/Debug-iphoneos/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers: name too long (not copied)
cp: /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Products/Debug-iphoneos/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/.DS_Store: name too long (not copied)
cp: /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Products/Debug-iphoneos/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/libSerenity.a: name too long (not copied)
cp: /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Products/Debug-iphoneos/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/mathfunc.h: name too long (not copied)
cp: /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Products/Debug-iphoneos/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework: name too long (not copied)
cp: /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Products/Debug-iphoneos/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Headers: name too long (not copied)
cp: /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Products/Debug-iphoneos/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Serenity: name too long (not copied)
cp: /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Products/Debug-iphoneos/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions: name too long (not copied)
cp: /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Products/Debug-iphoneos/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A: name too long (not copied)
cp: /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Products/Debug-iphoneos/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A: name too long (not copied)
cp: /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Products/Debug-iphoneos/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions: name too long (not copied)
cp: /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Products/Debug-iphoneos/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework: name too long (not copied)
cp: /Users/manoj/Library/Developer/Xcode/DerivedData/Serenity-guqdsmsjkaeyodcpcowssogdpfoi/Build/Products/Debug-iphoneos/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers/Serenity.framework/Versions/A/Headers: name too long (not copied)
Command /bin/sh failed with exit code 1

please Help me

thanks in advance 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:55:30.710

我不知道`${PUBLIC_HEADERS_FOLDER_PATH}` *应该*包含什么，但根据输出，这个变量是未定义的或为空的。因此这

```
cp -a "${BUILT_PRODUCTS_DIR}/${PUBLIC_HEADERS_FOLDER_PATH}/" "${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.framework/Versions/A/Headers" 
```

实际上是

```
cp -a "${BUILT_PRODUCTS_DIR}/" "${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.framework/Versions/A/Headers" 
```

您将 BUILT_PRODUCTS_DIR 复制到其自身的子目录中，导致复制过程中出现递归，并且目录结构*非常深* ，最终超出了允许的最长路径名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-04T17:52:55.903

进入公共标题并添加“include/”。应该解决符号链接问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T05:48:27.427

就我而言，我不必直接在 shell 脚本中编辑任何内容。在 Xcode 中工作时，我不小心切换/删除了 Info 面板中两个目标属性设置的值。重新创建它们使此错误消失。有趣的是，在 git 上恢复到以前版本的应用程序并没有解决这个问题。幸运的是，我有另一个文件副本可供参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T10:51:24.650

cp 命令失败，因为文件名太长（只需查看日志文件条目的右端）。看起来好像您的变量中正在进行某种递归，我认为是您的符号链接导致了问题。

尝试像这样运行您的脚本...

```
bash -x <your_shell _script> 
```

并再次检查日志 - 它应该会给你一个线索。

# mongodb - 我们可以查询值内的键吗

> ID：16144169
> 
> 赞同：0
> 
> 时间：2013-04-22T09:53:42.713
> 
> 标签：mongodb

在我的文档中，如果键的值本身就是一个 json（具有键值）。我如何在值内搜索文档的键。

例如：

```
 { "_id": { "$oid" : "51711cd87023380037000001" }, 
    "dayData": "{ "daysdata":{"date":"02-12-  2013","week_day":"","month":"","date_day":"","year":"2013"}}" 
    } 
```

如果我有多个这样的文档，并且我想获取日期为“02-12-2013”​​的文档。我的返回值应该是使用 mongodb java driver 的 key daydata 的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:06:33.903

您可以使用点符号，因此在您的情况下：

```
db.collection.ensureIndex({'dayData.daysdata.date': 1}); 
```

接着

```
db.collection.find({'dayData.daysdata.date': 02-12-2013}); 
```

举个例子：

```
> db.test.insert({x: {x: {x: 1}}})
> db.test.insert({x: {x: {x: 2}}})
> db.test.insert({x: {x: {x: 3}}})
>
> db.test.ensureIndex({'x.x.x': 1})
> 
> db.test.find({'x.x.x': 2}, {_id: false})
  {"x" : { "x" : { "x" : 2} } }
> 
```

证明它使用索引：

```
> db.test.find({'x.x.x': 2}, {_id: false}).explain()
  {
    "cursor" : "BtreeCursor x.x.x_1",
    "n" : 1,
    "nscannedObjects" : 1,
    "nscanned" : 1,
        ....
  }
> 
```

# javascript - javascript中的空字符串是否被视为虚假？

> ID：16144174
> 
> 赞同：2
> 
> 时间：2013-04-22T09:53:58.897
> 
> 标签：javascript

我注意到，如果您有如下声明：

```
var test = "" || null 
```

`test`将评估为，`null`但如果我们执行以下操作：

```
var test = "test" || null 
```

`test`将评估为“测试”，对于任何代替字符串的对象也是如此，因此 javascript 是否将空字符串视为假值或空值，如果是，为什么？空字符串不还是一个对象，所以不应该同样处理吗？

我已经在 FireFox、Chrome、IE7/8/9 和 Node.js 中对此进行了测试。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T09:56:20.007

> javascript 是否将空字符串视为假值或空值，如果是，为什么？

是的，因为[规范是这样说的（§9.2）](http://es5.github.io/#x9.2)。

> 空字符串不还是对象吗

不。原始字符串值不是对象，只有 a`new String("")`是（并且是真实的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:55:22.780

String is not an object, it's a primitive like number or boolean.

The empty string, NaN, +0, -0, false, undefined and null are the only values which evaluate to false in direct boolean conversion.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:56:41.597

字符串不是 JS 中的对象。其他“虚假”值是：`0`, `NaN`, `null`, `undefined`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T09:57:50.237

您必须注意的一个危险的错误值问题是在检查某个属性的存在时。

假设你想测试一个新属性的可用性；当这个属性实际上可以有 0 或 "" 的值时，你不能简单地检查它的可用性使用

```
 if (!someObject.someProperty)
    /* incorrectly assume that someProperty is unavailable */
In this case, you must check for it being really present or not:

if (typeof someObject.someProperty == "undefined")
    /* now it's really not available */ 
```

[**看这里**](https://stackoverflow.com/questions/3982663/falsey-values-in-javascript)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T10:01:04.703

是的，空字符串是虚假的，但`new String("")`不是。

另请注意，很可能

```
if (x) { ... } 
```

已验证，但

```
if (x == false) { ... } 
```

也经过验证（例如，使用空数组`[]`或使用时会发生这种情况`new String("")`）。

# javascript - 如何在 Internet Explorer 9 或 10 中安装 JavaScript？

> ID：16144175
> 
> 赞同：1
> 
> 时间：2013-04-22T09:54:05.697
> 
> 标签：javascript, internet-explorer, plugins, add-on, browser-addons

我有 1 个 JavaScript 文件。我想将它安装在 Internet Explorer 9 或 10 中，就像我们使用 GreaseMonkey 在 Firefox 中安装 JavaScript 一样。Internet Explorer 中是否有类似 GreaseMonkey 的插件？请帮我。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:58:12.420

[Trixie](http://www.pcworld.com/product/952510/trixie.html) -- 只需下载并安装它，它就会出现在 IE 工具菜单中。

您可以获取为 Trixie 制作的脚本，也可以访问主要的 Greasemonkey 脚本存储库 Userscripts.org，然后尝试这些脚本——许多作者也测试了 Trixie 的兼容性。

# perl - 如果磁盘空间不足，如何从 shell 脚本重写文件而不会有截断文件的危险？

> ID：16144178
> 
> 赞同：4
> 
> 时间：2013-04-22T09:54:09.997
> 
> 标签：perl, shell, diskspace

如果磁盘空间不足，如何从 shell 脚本重写文件而不会有截断文件的危险？

这个方便的 perl one liner 在名为 test.txt 的文件中将所有出现的“foo”替换为“bar”：

```
perl -pi -e 's/foo/bar/g' test.txt 
```

这非常有用，但是...

如果 test.txt 所在的文件系统磁盘空间不足，test.txt 将被截断为一个零字节文件。

有没有一种简单的、无竞争条件的方法来避免这种截断的发生？

我希望 test.txt 文件保持不变，如果文件系统空间不足，命令返回错误。

理想情况下，该解决方案应该可以通过 shell 脚本轻松使用，而无需安装额外的软件（除了“标准”UNIX 工具，如 sed 和 perl）。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T10:12:49.383

一般来说，这是做不到的。请记住，空间不足的情况可能会在*出现*就地编辑的操作序列中的任何位置出现。一旦文件系统已满，perl 可能无法撤消先前的操作以恢复原始状态。

使用`-i`开关的更安全的方法是使用非空备份后缀，*例如*，

```
perl -pi.bak -e 's/foo/bar/g' test.txt
```

这样，如果在此过程中出现问题，您仍然拥有原始数据。

如果您想自己滚动，请务必检查`close`系统调用返回的值。正如 Linux 手册页所述，

> 不检查返回值`close()`是一个常见但严重的编程错误。*上一次write(2)*操作的错误很有可能首先在 final 中报告`close()`。关闭文件时不检查返回值可能会导致数据无声丢失。这在 NFS 和磁盘配额中尤其明显。

就像生活中的其他事情一样，给自己留出更多的错误余地。磁盘便宜。从沙发垫上掏出零钱，然后去给自己买半 TB 左右的内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T10:11:19.380

来自[`perldoc perlrun`](http://perldoc.perl.org/perlrun.html#%2a-i%2a%5b_extension_%5d)：

> ### `-i[extension]`
> 
> 指定由“ `<>`”构造处理的文件将被就地编辑。它通过重命名输入文件、按原始名称打开输出文件并选择该输出文件作为`print()`语句的默认文件来实现此目的。扩展名（如果提供）用于修改旧文件的名称以制作备份副本，遵循以下规则：
> 
> 如果未提供扩展名，则不进行备份并覆盖当前文件。
> 
> […]

改写：

1.  备份文件名由`-i`-switch 的值（如果给定）确定。
2.  原始文件被重命名为新文件名，并为脚本打开。重命名在大多数文件系统上是原子的。
3.  打开具有原始文件名称的文件进行写入。该文件将从长度零开始，但与原始文件不同（现在具有不同的名称）。
4.  脚本完成后，如果未提供显式备份扩展名，则删除备份文件。原始文件随即丢失。

如果系统用完驱动器空间，那么新文件将受到威胁，而不是从未被复制或移动的原始文件（至少在具有类似 inode 概念的文件系统上）。

# opencv - memory leak due to mat to IplImage* conversion Segmentation fault core dumped

> ID：16144180
> 
> 赞同：0
> 
> 时间：2013-04-22T09:54:13.693
> 
> 标签：opencv

I have a function as

```
void doCorrectIntensityVariation(Mat& image)
{   
            Mat kernel = getStructuringElement(MORPH_ELLIPSE, Size(19,19));
            Mat closed;
            morphologyEx(image, closed, MORPH_CLOSE, kernel);
            image.convertTo(image, CV_32F); // divide requires floating-point
            divide(image, closed, image, 1, CV_32F);
            normalize(image, image, 0, 255, NORM_MINMAX);
            image.convertTo(image, CV_8UC1); // convert back to unsigned int
            imshow("gamma corrected",image); cvWaitKey(0); 
```

}

and

```
IplImage* processImage(IplImage *imrgb, IplImage *n_im)
{
..................
..................
Mat pre(n_im);    
doCorrectIntensityVariation(pre);
n_im=new IplImage( pre);// this line throws segmentation fault (core dumped)
...............
...............
return n_im;
} 
```

My program runs till last line But at the end throws glibc detected *** : double free or corruption (!prev): 0x0886dee8 *** segmentation fault (core dumped) I have tried all the tricks I knew but I am stuck and dont know what is going wrong

# iphone - 带有 Mac 操作系统的 TFS

> ID：16144181
> 
> 赞同：3
> 
> 时间：2013-04-22T09:54:15.843
> 
> 标签：iphone, macos, git-tf

我必须在我的 Mac 机器上使用 TFS 来开发 iPhone 应用程序。这样我就使用了 Git-TF_GettingStarted.html 中的以下步骤

**将 Git-TF-Release-Preview.zip 的内容解压缩到本地计算机上的文件夹，即 Windows 上的 C:\git-tf 或 Mac/Linux 上的 /user/git-tf。**用于安装。

但是在给出命令时`"git tf clone http://myserver:8080/tfs $/TeamProjectA/Main "` ，一个错误即将到来

**git: 'tf' 不是 git 命令**。

然后我从命令中删除了 tf，当时它开始工作并询问用户名和密码，但身份验证失败。

我该如何解决这个问题？，如果有人有想法，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T12:33:24.253

您实际上还没有设置`PATH`变量，这就是您遇到`command not found`问题的原因。

如果您已经设置了路径，例如使用: `PATH=$PATH:$HOME/git-tf-2.0.2.20130214`，那么该`git`命令将允许 sub-command `tf`，它应该像文档建议的那样工作，如下所示：

```
git tf clone … 
```

设置变量后将起作用`PATH`，否则您必须`git-tf`直接引用该命令。

提取的命令是，如果你设置了git并且尝试使用该操作`git-tf`，git 足够聪明地寻找命令。`git-tf``PATH``git tf`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T18:06:47.227

您最好使用 TFS Everywhere [http://www.microsoft.com/en-us/download/details.aspx?id=4240](http://www.microsoft.com/en-us/download/details.aspx?id=4240)

并像使用客户端一样使用 Eclipse 在 XCode 中进行开发。

# javascript - 正则表达式用美元符号内的 \_ 替换 _

> ID：16144183
> 
> 赞同：1
> 
> 时间：2013-04-22T09:54:29.477
> 
> 标签：javascript, regex

我有一个字符串

```
var str = "__Definition:__ $x_0$ is an _ordinary point_ of the ODE $L[y] = 0$"; 
```

我想替换里面的所有下划线，`$$`以便字符串变成

```
var str = "__Definition:__ $x\_0$ is an _ordinary point_ of the ODE $L[y] = 0$"; 
```

我怎样才能在javascript中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:05:43.837

这可以在单个正则表达式替换调用中完成：

```
var str = "__Definition:__ $x_0$ is an _ordinary point_ of the ODE $L[y] = 0$";
var repl = str.replace(/_(?!(?:(?:[^$]*\$){2})*[^$]*$)/g, '\\_');
console.log(repl); 
```

**解释**：这意味着匹配下划线字符后跟偶数个`$`符号。因此`_`，两个`$`标志之间将被匹配，而外部将不匹配（因为它们后面跟着偶数个`$`标志）。

### 现场演示：http: [//ideone.com/lAKto5](http://ideone.com/lAKto5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:04:05.060

将正则表达式用于此类解析活动不是一个好主意，但是，如果您想要快速而肮脏

```
var replaced = str.replace(/\$([^$]+)\$/, function(m, g) { 
  return '$' + g.replace(/_/, '\\_') + '$'; 
}); 
```

# linux - 如何在 ubuntu 12.10 上安装 Qt.-5.0.2？

> ID：16144185
> 
> 赞同：0
> 
> 时间：2013-04-22T09:54:36.393
> 
> 标签：linux, qt, ubuntu, ubuntu-12.10

我已经下载了 qt-linux-opensource-5.0.2-x86-offline.run，但我无法在 ubuntu 上安装它。

这就是我所做的一切。

```
$ cd /media/moslem/0EB40068B400549D/
$ chmod +x qt-linux-opensource-5.0.2-x86-offline.run
$ sudo ./qt-linux-opensource-5.0.2-x86-offline.run
    [sudo] password for moslem:
    sudo: ./qt-linux-opensource-5.0.2-x86-offline.run: command not found 
```

请告诉我如何安装它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:02:49.007

您可以在所有命令上尝试 sudo ...

# eclipse - 在 Orbeon 中设置请求参数

> ID：16144186
> 
> 赞同：0
> 
> 时间：2013-04-22T09:54:40.560
> 
> 标签：eclipse, orbeon, xforms

我对 Orbeon 和 XForms 非常陌生。

我创建了一个带有输入字段“BaseId”的表单

```
<xf:input id="control-3-control" bind="control-3-bind">
    <xf:label ref="$form-resources/control-3/label"/>
    <xf:hint ref="$form-resources/control-3/hint"/>
    <xf:help ref="$form-resources/control-3/help"/>
    <xf:alert ref="$fr-resources/detail/labels/alert"/>
</xf:input> 
```

我想当我登上这个表格时，在 crud.xpl
方法 PUT 中我无法通过

```
<sql:param type="xs:string" select="/request/baseid"/> 
```

帮助我，请
原谅我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:01:40.373

控件的值以 XML 文档的形式传递给持久层 REST API，作为 HTTP 请求的正文。所以在`crud.xpl`（比如说[eXist 的那个](https://github.com/orbeon/orbeon-forms/blob/master/src/resources/apps/fr/persistence/exist/crud.xpl)）中，这将是`/request/body`. 确切的路径取决于您的部分和控件名称。例如，如果该部分被命名`address`并且字段为`city`，则该值将在 之下`/request/body/form/address/city`。

# javascript - How to detect browser size using javascript?

> ID：16144187
> 
> 赞同：0
> 
> 时间：2013-04-22T09:54:43.113
> 
> 标签：javascript, jquery, browser

I am using the below code in one of my pages to help me work on a site to make it responsive:

```
document.write(screen.width+'x'+screen.height); 
```

The only problem is I don't wan't it showing my screen resolution size, I want it to show the browser size.

I.E, so it changes when I shrink the browser.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:57:03.737

```
$(window).resize(function() {
   var width = $(this).width();
   var height = $(this).height();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:01:39.487

使用`$(window).width()`和`$(window).height()`。

检查以下链接，希望它可以帮助您理解逻辑：

[http://api.jquery.com/category/dimensions/](http://api.jquery.com/category/dimensions/)

# vba - VBA - 库中的正确名称管理

> ID：16144193
> 
> 赞同：2
> 
> 时间：2013-04-22T09:55:01.467
> 
> 标签：vba, excel

我有一个 VBA .xla 文件，其中包含

*   一个带有主界面的主模块，例如`readDiagram()`
*   大约 10 个模块提供功能实现到`readDiagram()`. 由于我不喜欢具有数千行代码的模块，因此我决定将接口与实现分开。

为了让接口函数看到实现，实现函数必须声明为`public`. 但是，这意味着在另一个项目中引用 .xla 时，可以从该项目中看到所有实现功能，这是不可取的。有没有办法将 .xla 分成更多模块，同时只让整个 .xla 的一个功能对外界可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:58:43.807

在所有实现 Subs 中，将此作为第一行

```
Option Private Module 
```

# ef-code-first - EF Code First: Migrations removing needed columns and adding unwanted ones

> ID：16144196
> 
> 赞同：2
> 
> 时间：2013-04-22T09:55:09.333
> 
> 标签：ef-code-first, entity-framework-5

Note: there is a "better" iteration of this question here:

[EF Code First migrations: Table Per Hierarchy Bug](https://stackoverflow.com/questions/16274653/ef-code-first-migrations-table-per-hierarchy-bug)

* * *

I am trying to figure out the exact steps need to take an existing database and overlay entity framework code first with a Table Per Hierarchy structure. However no matter what I do, the end result migration is "wrong".

Here is the sample database, exact steps and output.

Existing database structure

```
CREATE TABLE [dbo].[Categories](
    [Id] [int] IDENTITY(1,1) NOT NULL Primary Key,
    [Name] [nvarchar](100) NOT NULL, 
 ) 
GO
CREATE TABLE [dbo].[A](
    [Id] [int] IDENTITY(1,1) NOT NULL Primary Key,
    [Discriminator] [nvarchar](20) NOT NULL,
    [Description] [nvarchar](100) NOT NULL,
    [CategoryId] [int] NULL
)GO
ALTER TABLE [dbo].[A]  
WITH CHECK ADD  CONSTRAINT [FK_dbo.A_dbo.Categories_CategoryId] 
FOREIGN KEY([CategoryId])
REFERENCES [dbo].[Categories] ([Id])
GO
ALTER TABLE [dbo].[A] 
CHECK CONSTRAINT [FK_dbo.A_dbo.Categories_CategoryId]
GO 
```

"Reverse Engineer Code First" generates the following:

```
 public partial class EntityContext : DbContext {
        static EntityContext() {
            Database.SetInitializer<EntityContext>(null);
        }

        public EntityContext()
            : base("Name=Test47Context") {
        }

        public DbSet<A> A { get; set; }
        public DbSet<Category> Categories { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder) {
            modelBuilder.Configurations.Add(new AMap());
            modelBuilder.Configurations.Add(new CategoryMap());
        }
    }

    public partial class A {
        public int Id { get; set; }
        public string Discriminator { get; set; }
        public string Description { get; set; }
        public Nullable<int> CategoryId { get; set; }
        public virtual Category Category { get; set; }
    }

    public partial class Category {
        public Category() {
            this.A = new List<A>();
        }

        public int Id { get; set; }
        public string Name { get; set; }
        public virtual ICollection<A> A { get; set; }
    }

    public class AMap : EntityTypeConfiguration<A> {
        public AMap() {
            // Primary Key
            this.HasKey(t => t.Id);

            // Properties
            this.Property(t => t.Discriminator)
                .IsRequired()
                .HasMaxLength(20);

            this.Property(t => t.Description)
                .IsRequired()
                .HasMaxLength(100);

            // Table & Column Mappings
            this.ToTable("A");
            this.Property(t => t.Id).HasColumnName("Id");
            this.Property(t => t.Discriminator).HasColumnName("Discriminator");
            this.Property(t => t.Description).HasColumnName("Description");
            this.Property(t => t.CategoryId).HasColumnName("CategoryId");

            // Relationships
            this.HasOptional(t => t.Category)
                .WithMany(t => t.A)
                .HasForeignKey(d => d.CategoryId);

        }
    }

    public class CategoryMap : EntityTypeConfiguration<Category> {
        public CategoryMap() {
            // Primary Key
            this.HasKey(t => t.Id);

            // Properties
            this.Property(t => t.Name)
                .IsRequired()
                .HasMaxLength(100);

            // Table & Column Mappings
            this.ToTable("Categories");
            this.Property(t => t.Id).HasColumnName("Id");
            this.Property(t => t.Name).HasColumnName("Name");
        }
    } 
```

Implement TPH, by

*   Adding `Derived.cs` inherits from `A.cs`
*   Moving `Category` and `CategoryId` properties from `A.cs` to `Derived.cs`
*   Remove `Discriminator` property from `A.cs`
*   In `AMap.cs` remove `Discriminator`, `CategoryId` and `Category` Foreign Key mapping.
*   Adding TPH mapping to `OnModelCreating`

    ```
    public partial class EntityContext : DbContext {
        static EntityContext() {
            Database.SetInitializer<EntityContext>(null);
        }

        public EntityContext()
            : base("Name=Test47Context") {
        }

        public DbSet<A> A { get; set; }
        public DbSet<Category> Categories { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder) {
            modelBuilder.Configurations.Add(new AMap());
            modelBuilder.Configurations.Add(new CategoryMap());

            modelBuilder.Entity<A>()
                .Map<Derived>(x => x.Requires("Discriminator").HasValue("Derived"));
        }
    }

    public partial class A {
        public int Id { get; set; }
        public string Description { get; set; }
    }

    public class Derived : A {
        public Nullable<int> CategoryId { get; set; }
        public virtual Category Category { get; set; }
    }

    public partial class Category {
        public Category() {
            this.A = new List<A>();
        }

        public int Id { get; set; }
        public string Name { get; set; }
        public virtual ICollection<A> A { get; set; }
    }

    public class AMap : EntityTypeConfiguration<A> {
        public AMap() {
            // Primary Key
            this.HasKey(t => t.Id);

            this.Property(t => t.Description)
                .IsRequired()
                .HasMaxLength(100);

            // Table & Column Mappings
            this.ToTable("A");
            this.Property(t => t.Id).HasColumnName("Id");
            this.Property(t => t.Description).HasColumnName("Description");

        }
    }

    public class CategoryMap : EntityTypeConfiguration<Category> {
        public CategoryMap() {
            // Primary Key
            this.HasKey(t => t.Id);

            // Properties
            this.Property(t => t.Name)
                .IsRequired()
                .HasMaxLength(100);

            // Table & Column Mappings
            this.ToTable("Categories");
            this.Property(t => t.Id).HasColumnName("Id");
            this.Property(t => t.Name).HasColumnName("Name");
        }
    } 
    ```

"Add-migration TPH" generates the following

```
public partial class TPH : DbMigration
{
    public override void Up()
    {
        AddColumn("dbo.A", "Category_Id", c => c.Int());
        AddForeignKey("dbo.A", "Category_Id", "dbo.Categories", "Id");
        CreateIndex("dbo.A", "Category_Id");
        DropColumn("dbo.A", "Discriminator");
    }

    public override void Down()
    {
        AddColumn("dbo.A", "Discriminator", c => c.String(nullable: false, maxLength: 20));
        DropIndex("dbo.A", new[] { "Category_Id" });
        DropForeignKey("dbo.A", "Category_Id", "dbo.Categories");
        DropColumn("dbo.A", "Category_Id");
    }
} 
```

*   Why does it drop the `Discriminator` column instead of just altering it to `nvarchar(128)`?
*   Why doesn't just use the existing `CategoryId` column instead of adding `Category_Id`?

# spring - 客户端发送的请求语法错误，Spring with Hibernate Annotations

> ID：16144200
> 
> 赞同：0
> 
> 时间：2013-04-22T09:55:21.963
> 
> 标签：spring, hibernate, annotations, request

我到处搜索此错误并查看了此处具有相同标题的每个线程，在我的代码中进行了很多更改，但仍然存在错误。

它说：

```
HTTP Status 400 -

type Status report

message

description The request sent by the client was syntactically incorrect.
Apache Tomcat/7.0.35 
```

我的控制器代码是：

```
@RequestMapping(value = "/manageInventory.htm", method = RequestMethod.GET)
    public ModelAndView manageInventory(HttpSession session) {

        ArrayList<Product> products = new ArrayList<Product>();
        Manufacturer manufacturer = (Manufacturer) manufacturerDAO
                .getByUsername(((UserAccount) session.getAttribute("user"))
                        .getUsername());
        products = productDAO.getProductListByManufacturer(manufacturer
                .getManufacturerName());
        System.out.print(products.get(0).getProductName());
        ModelAndView view = new ModelAndView("manageInventory");
        view.addObject("products", products);
        InventoryItem inventoryItem = new InventoryItem();
        view.addObject("inventoryItem", inventoryItem);
        return view;
    }

    @RequestMapping(value = "/manufacture.htm", method = RequestMethod.POST)
    public ModelAndView manufactureProduct(HttpSession session, BindingResult result,
            @ModelAttribute("inventoryItem") @Valid InventoryItem inventoryItem) {

        System.out.print(result.getErrorCount()+" "+result.getAllErrors());

        ModelAndView view = null;
        if(!result.hasErrors())
        {
        Manufacturer manufacturer = manufacturerDAO
                .getByUsername(((UserAccount) (session.getAttribute("user")))
                        .getUsername());
        inventoryItem.setAvailability(true);
        inventoryItem.setManufacturer(manufacturer);
        manufacturer.getInventory().add(inventoryItem);
        manufacturerDAO.update(manufacturer);
        view =  new ModelAndView("done");
        }
        else
        {
            view = new ModelAndView("manageInventory");
        }
        return view;

    } 
```

第一种方法将inventoryItem 添加到模型中，然后我将其获取以进行验证。

我正在使用瓷砖，所以我的瓷砖是：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<body>
    <h2>Add Inventory</h2>
    <br />
    <form:form modelAttribute="inventoryItem" action="manufacture.htm" method="post">
        <table>
            <tr>
                <td>Select Product:</td>
                <td><form:select path="product">
                        <c:forEach var="product" items="${products}">
                            <form:option value="${product}">${product.productName}</form:option>
                        </c:forEach>
                </form:select></td>
                <td>Select Quantity:</td>
                <td>
                <form:input path="quantity" placeholder="Quantity"/><br />
                <font color="red"><form:errors path="quantity"/> </font>
                </td>
            </tr>
            <tr>
                <td colspan="2" align="center"><input type="submit" value="Manufacture">
                </td>
            </tr>
        </table>
    </form:form>
</body> 
```

我的 POJO 具有以下验证：

```
@NotNull
    private int quantity; 
```

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T20:50:55.023

我忘了添加`HttpServletRequest request`到方法输入参数。我添加了它，它开始工作了。奇怪，但有效。:)

# mysql - MySQL 索引使用情况

> ID：16144202
> 
> 赞同：4
> 
> 时间：2013-04-22T09:55:28.340
> 
> 标签：mysql, sql, performance

我正在对一个简单的表执行一个非常简单的选择，其中我过滤的列有一个索引。

这是架构：

```
 CREATE TABLE IF NOT EXISTS `tmp_inventory_items` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `transmission_id` int(11) unsigned NOT NULL,
  `inventory_item_id` int(11) unsigned DEFAULT NULL,
  `material_id` int(11) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `transmission_id` (`transmission_id`)
  KEY `inventory_item_id` (`inventory_item_id`),
  KEY `material_id` (`material_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=21 ; 
```

这是SQL：

```
SELECT * FROM `tmp_inventory_items` WHERE `transmission_id` = 330 
```

但是，在解释查询时，**我看到索引没有被使用，为什么会这样**（表在我的本地机器上有大约 20 行）？

```
id  select_type table                   type    possible_keys   key     key_len ref     rows    Extra
1   SIMPLE      tmp_inventory_items...  ALL     transmission_id NULL    NULL    NULL    13      Using where 
```

即使我用 USE INDEX(transmission_id) 提示 mysql 也没有使用任何键...这对我来说看起来很奇怪（MySQL 版本 5.5.28）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:27:34.927

因为 MySQL 的算法告诉它，准备一个索引并使用它会比简单地在没有索引的情况下执行查询使用更多的资源。

当您向 DBMS 提供查询语法时，它所做的一件事就是尝试确定处理查询的最有效方式（通常至少有几十种方式）。

如果你愿意，你可以使用`FORCE INDEX(transmission_id)`（[记录在这里](http://dev.mysql.com/doc/refman/5.1/en/index-hints.html)）这将通知 MySQL 一个表扫描被认为是非常昂贵的，但不建议确定 20 行，它只是没有价值。

# json - 来自 putty 的 JSON HTTP POST 请求中的文件结束命令

> ID：16144204
> 
> 赞同：0
> 
> 时间：2013-04-22T09:55:40.920
> 
> 标签：json, http, post, putty, eof

这只是一个幼稚的问题，但我通过 putty 命令行坚持 HTTP POST 请求。执行初始请求后：

```
~$ POST <url:port/directory>
Please enter content (application/x-www-form-urlencoded) to be POSTed:
...(content posted there) 
```

我没有发送命令的选项，因为唯一有效的键盘序列是 CTRL-Z，它会停止程序，而不是发送命令。END-OF-FILE 还有其他交互吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:08:22.730

CTRL-D 将模拟 EOF。您还可以通过管道进入 POST，这可能会使测试变得更容易，例如：

```
cat ~/my-json-file.json | POST <url:port/directory> 
```

# php - Write an existing PDF file, when the user directly call the .pdf extension?

> ID：16144205
> 
> 赞同：2
> 
> 时间：2013-04-22T09:55:43.183
> 
> 标签：php, pdf

I can write text in the pdf file with using code at [web site link](https://stackoverflow.com/questions/4299315/writing-drawing-over-a-pdf-template-document-in-php)

If user enter the xxx.com/sample.php .. link shows the manipulated pdf file in the php page.

To make a manipulation we need to call PHP page.

If user directly enter the xxx.com/SAMPLE.pdf .. link shows the original pdf file...

How can I write the PDF file, when the user directly call the .pdf extension?

Should I write special code in the httpdocs file ?

For Example; If user call .pdf extension from special directory like directory/SAMPLE.pdf execute the special function to process pdf file.

How do I solve this problem ?

I thank you for your interest in my question.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T10:11:50.633

我会使用 htaccess 将所有请求重定向到“folder/whatever.pdf”到“folder/pdfgenerator.php?file=whatever.pdf”。

这样，您可以在 PHP 中做任何您想做的事情，包括在显示文件之前生成文件或将其命名为“whatever.pdf”，您可以在我描述的示例中使用 $_GET["file"] 来获得它。

这里有一个类似的问题：[mod_rewrite & .htaccess - redirect request for a file extension to a script](https://stackoverflow.com/questions/7080996/mod-rewrite-htaccess-redirect-request-for-a-file-extension-to-a-script)

在您的情况下，它将类似于：

```
RewriteEngine On
RewriteRule (.+\.pdf)$ /pdfgenerator.php?file=$1 [NC,L] 
```

# java - 如何使用java在mySql的表列中存储数组值

> ID：16144211
> 
> 赞同：3
> 
> 时间：2013-04-22T09:56:11.847
> 
> 标签：java, mysql, jsp, liferay

您好，我正在尝试检索两个结果集中的数据。然后我在两个结果集中都存储到字符串数组，在这个过程之后我必须将我的字符串数组存储到另一个表中，所以请告诉我..

```
try {
    Class.forName("com.mysql.jdbc.Driver");
    Connection con = (Connection) DriverManager.
         getConnection("jdbc:mysql://localhost:3306/lportal", "root", "ubuntu123");
    PreparedStatement stmt = (PreparedStatement) con.
         prepareStatement("SELECT * FROM  Testi_Testimonial where subject = ?");
    stmt.setString(1, search);
    stmt.execute();
    rs = (ResultSet) stmt.getResultSet();
    while (rs.next()) {
      anArray[i] = rs.getString("subject");
      System.out.println(anArray[i]);
      i++;
      count++;
    }
    PreparedStatement stmt1 = (PreparedStatement) con.
         prepareStatement("SELECT * FROM Testi_Testimonial where subject != ?");
    stmt1.setString(1, search);
    stmt1.execute();
    rs1 = (ResultSet) stmt1.getResultSet();
    while (rs1.next()) {
      anArray[i] = rs1.getString("subject");
      System.out.println(anArray[i]);
      i++;
      count++;
    }
} catch (Exception e) {
  e.printStackTrace();
  System.out.println("problem in connection");
} 
```

请告诉我应该如何将数组存储到`Temp`表中？我的“临时”表有`subject`我想存储`myArray`到列的`subject`列...请告诉我该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T10:14:35.970

在 rs 中获得结果集后试试这个：

```
 PreparedStatement st = (PreparedStatement) con.prepareStatement("insert into temp values(?)");
    i=0;
   while(rs.next())
    {
      st.setString(1,anArray[i]);
      st.executeUpdate();
      i++;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:47:59.783

您只需迭代arrayList。您分别获得了主题列表。

```
public class TestArrayList {
    public static void main(String[] args) {

        /*create two arrayList*/
        List<String> tempOneList = new ArrayList<String>();
        try {

            Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/vijay", "root", "root");
            Statement st = con.createStatement();

            ResultSet res = st.executeQuery("SELECT * FROM  subjecttable");

            while (res.next()) {
                tempOneList.add(res.getString("subject"));
            }

            ResultSet resOne = st.executeQuery("SELECT * FROM  subjecttabletwo");
            while (resOne.next()) {
                tempOneList.add(resOne.getString("subject"));
            }
            System.out.println("temp/List>>--" + tempOneList.size());
            for(int i=0;i<tempOneList.size();i++){
                System.out.println(tempOneList.get(i));
            }

        } catch (Exception e) {
            e.printStackTrace();
            System.out.println("problem in connection");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:52:32.647

```
PreparedStatement ps = 
    (PreparedStatement) con.prepareStatement("insert into temp values(?)");

j=0;
while(rs.next())
{
    ps.setString(1,anArray[j]);
    ps.executeUpdate();
    j++;
} 
```

# cakephp - ACL cakePHP 错误

> ID：16144216
> 
> 赞同：0
> 
> 时间：2013-04-22T09:56:28.097
> 
> 标签：cakephp, cakephp-2.0, acl, cakephp-acl

```
AclNode::node() - Couldn't find Aro node identified by "Array ( [Aro0.model] => User [Aro0.foreign_key] => 1 ) "

Error: An Internal Error Has Occurred.
Stack Trace 
```

我的模型名称是 Admin 而不是用户，我已在 Auth 组件配置中设置它

```
public $components = array('Acl',
    'Auth' => array(
        'loginRedirect' => array('controller' => 'admins', 'action' => 'index'),
        'logoutRedirect' => array('controller' => 'admins', 'action' => 'login'),
        'loginAction' => array('controller' => 'admins','action' => 'login'),
        'authError' => '<font color="red">Did you really think you are allowed to see that? If yes then login!</font>',
        'authenticate' => array(
            'Form' => array(
                'userModel' => 'Admin',
                'fields' => array('username' => 'username', 'password' => 'password')
            )
        )
    ), 'Session', 'Email'); 
```

我不知道错误中的用户不是管理员。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:35:42.243

请注意**Authentication**与**Access Control**不同，尽管您正确配置了`AuthComponent`(Form) 身份验证以使用 Admin 模型，但 ACL 可能仍在尝试访问 User 模型。

有关更多信息，请参阅此处的手册；

[http://book.cakephp.org/2.0/en/core-libraries/components/access-control-lists.html#assigning-permissions](http://book.cakephp.org/2.0/en/core-libraries/components/access-control-lists.html#assigning-permissions)

和这里;

[http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html#acts-as-a-requester](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html#acts-as-a-requester)

特别是分配权限时的“模型”列和“请求者”部分。

我意识到这不是一个完整的答案，我手头没有正确的例子，但也许这些建议会帮助你找到解决方案。

# flex4.6 - 在 flex 中，我应该如何复制和粘贴连接两个对象的连接器

> ID：16144219
> 
> 赞同：3
> 
> 时间：2013-04-22T09:56:39.943
> 
> 标签：flex4.6

我已将对象从图表调色板拖到组容器上。之后我单击连接器按钮，然后通过鼠标移动连接拖动的对象。现在我想执行复制和粘贴。复制时只有对象是复制而不是连接器。我怎么能复制带有拖动对象的连接器。![在此处输入图像描述](https://i.stack.imgur.com/jPSad.png)

# version-control - 从 cvs 存储库获取文件的最新修订号

> ID：16144227
> 
> 赞同：0
> 
> 时间：2013-04-22T09:56:47.767
> 
> 标签：version-control, cvs

有没有办法在不检查该文件的情况下知道 cvs 存储库中文件的最新修订号。

确切的问题是，假设我知道 cvs repo 中的文件名。我们称之为file1.text。

那么，是否有任何命令或任何方式可以让我在 repo 中搜索该文件并获取该文件的最新修订号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:55:43.550

您可以使用 CVS 日志并将修订作为“起点”：

```
$ cvs log -r{REVISION}:: file1.text 
```

将`-r{REVISION}::`仅在之后搜索修订`{REVISION}`（可以是数字或标签）。

如果没有工作副本，可以使用`rls`cvs 命令。使用`-l`参数，它将打印文件的版本。

```
$ cvs rls -l MyModule/path/to/the/file 
```

您可以使用`-r`来指定一个分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-01T19:22:57.290

这是要使用的命令：

> cvs history -a -c -l module/file1.text

这将显示文件最后修改的版本和日期。这不需要签出模块或文件。

# iphone - 用于 armv7s 的 libmysqlclient.a

> ID：16144230
> 
> 赞同：1
> 
> 时间：2013-04-22T09:57:03.330
> 
> 标签：iphone, ios, xcode

如何获得用于 armv7s 的 libmysqlclient.a，以便我可以将它用于我的 iPhone 5？现在我得到这个错误：

```
ld: file is universal (6 slices) but does not contain a(n) armv7s slice: /Users/x/Documents/Xcode/Projecten/DirectMySQL/DirectMySQL/Objc_Mysql_iPhone_OSX/lib/libmysqlclient.a for architecture armv7s
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

谢谢，

大安！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:03:46.740

从架构构建设置中删除 armv7s。这对于 iPhone 5 处理器上的高性能游戏以外的任何东西都是不必要的。Apple 的默认项目包括 armv7s，但您不需要它。

# android - onSignalStrengthsChanged 返回未知信号强度 99 asu

> ID：16144231
> 
> 赞同：1
> 
> 时间：2013-04-22T09:57:03.480
> 
> 标签：android

我目前正在编写一个用于测试信号强度的 Android 应用程序。但后来我有一个关于信号强度读数的问题。此代码在其他设备上非常好。但是当我尝试使用摩托罗拉（Froyo）时，它返回 99-asu UNKNOWN（信号强度）。关于这个问题的任何想法？谢谢。

目前我正在使用这段代码：

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    signalStrengthListener = new SignalStrengthListener();
    ((TelephonyManager)getSystemService(TELEPHONY_SERVICE)).
    listen(signalStrengthListener,SignalStrengthListener.LISTEN_SIGNAL_STRENGTHS);
}

private class SignalStrengthListener extends PhoneStateListener{  
@Override
public void onSignalStrengthsChanged(android.telephony.SignalStrength signalStrength) {
int strengthAmplitude = signalStrength.getGsmSignalStrength();   
Toast.makeText(getApplicationContext(),strengthAmplitude, Toast.LENGTH_LONG).show();
super.onSignalStrengthsChanged(signalStrength);    
}} 
```

# c# - 选择日期时间最长的用户名

> ID：16144240
> 
> 赞同：2
> 
> 时间：2013-04-22T09:57:39.707
> 
> 标签：c#, database, sqlite

我有一个`sqlite database`如下`table Users`所示的：

```
Username         |  InsertDateTime

User101             4/22/2013 11:44 
User102             3/22/2013 12:43
User103             4/22/2013 15:20
User104             1/21/2012 16:31 
```

我想`select`与`Username`. `highest datetime`在这种情况下是 User103。

我尝试了一些`queries`类似的东西：

```
Select Username from Users where InsertDateTime = MAX(datetime); 
```

但这不是有效的`sqlite query`.

有人可以帮帮我吗？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T09:59:59.757

怎么样：

```
SELECT Username FROM Users ORDER BY InsertDateTime DESC LIMIT 1 
```

希望 Sqlite 足够聪明，不会真正执行完整的排序:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:04:47.240

尝试这个：

```
select Username
from Users
order by InsertDateTime desc
limit 1 
```

# html - 多语言网站 - 字符编码

> ID：16144245
> 
> 赞同：0
> 
> 时间：2013-04-22T09:57:54.883
> 
> 标签：html, encoding, character-encoding

我知道这个问题几乎和一个世界一样古老，网络上存在数千个答案，但我仍然找不到我的问题是什么以及为什么字符显示为黑色问号 (�) :(

我们有一个多语言网站，目前支持 10 种语言。某些字符显示不正确（ве��сией，联合国���际）。非拉丁语言中的常规字符可能会发生这种情况，换句话说，在同一页面上，相同的字符可以正确显示。在拉丁语言中，所有特殊字符和常规字符都能正确显示。

我尝试使用编码，但是当它在一个地方解决问题时，问题出现在另一个地方。

在这里，我的编码是如何配置的：
1) 在 MS SQL Server 中，我们使用 NVARCHAR(MAX) 列和`SQL_Latin1_General_CP1_CI_AS`排序规则。
2) 在 web 应用程序中，在 web.config 文件中我有：`<globalization requestEncoding="utf-8" responseEncoding="utf-8" />`.
3）在页面本身，我们有`<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />`.

在响应标头中，Chrome 显示：`Content-Type:text/html; charset=utf-8`.

我想念什么？为什么我仍然看到那些黑色问号？为了正确显示所有字符，我应该检查/更改什么。

谢谢

**更新**

我发现了一个问题，它与传输编码完全无关。我认为问题出在编码上，它通过 DB -> ASP.NET -> 浏览器的方式，但经过大量调试，我发现问题出在方式上，输出如何写入`HttpContext.Current.Response.Filter`....we有我们的自定义过滤器，不知何故，缓冲区（`byte[]`）传递给过滤器的Write方法。它损坏了 Unicode 字符串数组，因此有时以字节为单位的字符串的最后一个字符被翻译为乱码。我仍然没有找到如何正确解决它，但现在，我可以禁用我们的过滤器并且不再有问号。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:41:39.893

如果页面以缺少这些字形的字体呈现，它们将使用占位符呈现。

例如，在我的手机上，您所说的几个正确显示的示例显示给我，其中一些文本带有占位符。

![在此处输入图像描述](https://i.stack.imgur.com/IA4jIm.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:29:15.860

我不知道 MS SQL 服务器，但你试过让它使用 UTF-8 编码而不是 latin-1 吗？快速[谷歌搜索](http://www.google.com/search?q=collate+utf8)显示：

```
DEFAULT CHARACTER SET utf8;
DEFAULT COLLATE utf8_general_ci; 
```

我认为这将是一个比`SQL_Latin1_General_CP1_CI_AS`.

# arrays - 复制数组时无用的pin_ptr

> ID：16144246
> 
> 赞同：0
> 
> 时间：2013-04-22T09:58:06.023
> 
> 标签：arrays, c++-cli, pin-ptr

我有一些遗留代码，它们将本机数组复制到托管数组中：

```
float* nativeValues = new float[NumberOfSamples];
array<double>^ managedValues = gcnew array<double>(NumberOfSamples);

pin_ptr<double> pinnedValues = &managedValues[0];
for (int i = 0; i < managedValues->Length; i++)
{
    nativeValues[i] = (float) pinnedValues[i];
} 
```

我无法重构它，`Runtime::InteropServices::Marshal::Copy`因为原始数组是双精度的，而目标是浮点数。

我的问题是我不明白为什么 pin_ptr。我不认为这是必要的，但它是一段关键的代码，我想在删除它之前确定。

您认为删除它是否安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:34:36.367

*如果您要将*pin_ptr作为`double*`.

```
void SomeUnmanagedAPI(double* data, int length);

// Example of where pin_ptr would be needed.
pin_ptr<double> pinnedValues = &managedValues[0];
SomeUnmanagedAPI(pinnedValues, managedValues->Length); 
```

对于手动副本或 Marshal::Copy，不需要它。继续删除它，然后迭代 managedValues。

# dojo - Dojo 方面未准备就绪

> ID：16144248
> 
> 赞同：0
> 
> 时间：2013-04-22T09:58:13.527
> 
> 标签：dojo

我希望有一个方面在调用 dojo 就绪后执行某些任务。代码如下，

```
aspect.after(dojo, "ready", function(deferred) {
    loader.hide();
}); 
```

调用页面就绪函数后不调用 loader.hide()。但是上面的代码在 xhr 上运行良好，而不是 ready。方面是否适用于 dojo/ready ？我在这里错过了什么吗？

在此先感谢您的帮助

================================================

经过几次试验和错误，通过使用得到这个工作

```
dojo.ready(function() {
}); 
```

想知道为什么这个方面不工作

```
 require(["dojo/ready"], function(ready) {
        ready(function() {
        });  
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:00:53.423

也尝试使用 dojo/domReady。不允许**将**domReady 映射到任何变量，因此它必须出现在末尾：

```
require(["dojo/ready","dojo/domReady!"],function(ready) {
    ready(function()  {
     // Your code
    });

}); 
```

# phantomjs - 在 PhantomJs 的 POST 请求响应中下载作为附件的文件

> ID：16144252
> 
> 赞同：17
> 
> 时间：2013-04-22T09:58:21.803
> 
> 标签：phantomjs, casperjs

我想下载一个 CSV 文件，它是通过 POST 请求单击按钮生成的。我在 casperJs 和 phantomJS 论坛上尽我所能进行了研究，结果空手而归。在像火狐这样的普通浏览器中，在发布请求之后会出现一个浏览器下载对话框窗口。如何在 PhantomJS 中处理这种情况

```
TTP/1.1 200 OK
Cache-Control: private
Content-Type: text/html; charset=utf-8
Content-Encoding: gzip
Vary: Accept-Encoding
Server: Microsoft-IIS/7.5
Content-disposition: attachment;filename=ExportData.csv
X-AspNet-Version: 2.0.50727
X-Powered-By: ASP.NET
Date: Fri, 19 Apr 2013 23:26:40 GMT
Content-Length: 65183 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-07T15:26:56.643

我找到了一种使用 casperjs 的方法（如果您使用 XMLHttpRequest 实现下载功能，它应该单独与 phantomjs 一起使用，但我没有尝试过）。

我会给你留下一个工作示例，它试图从[这个页面](https://sede.gobcan.es/tributos/jsf/publico/notificaciones/comparecencia/ultimosanuncios.jsp)下载最新的 PDF 。当您单击下载链接时，会触发一些 javascript 代码，这些代码会生成一些隐藏的输入字段，然后将其发布。

我们所做的是替换表单的 onsubmit 函数，使其取消提交，并获取表单目标（操作）及其所有字段。我们稍后会使用此信息进行实际下载。

```
var casper=require('casper').create();
casper.start("https://sede.gobcan.es/tributos/jsf/publico/notificaciones/comparecencia/ultimosanuncios.jsp", function() {

    var theFormRequest = this.page.evaluate(function() {
        var request = {}; 
        var formDom = document.forms["resultadoUltimasNotif"];
        formDom.onsubmit = function() {
            //iterate the form fields
            var data = {};
            for(var i = 0; i < formDom.elements.length; i++) {
               data[formDom.elements[i].name] = formDom.elements[i].value;
            }
            request.action = formDom.action;
            request.data = data;
            return false; //Stop form submission
        }

        //Trigger the click on the link.
        var link = $("table.listado tbody tr:first a");
        link.click();

        return request; //Return the form data to casper
    });

    //Start the download
    casper.download(theFormRequest.action, "downloaded_file.pdf", "POST", theFormRequest.data);
});

casper.run(); 
```

注意：您必须使用 --ignore-ssl-errors 运行它，因为它们使用的 CA 不在您的浏览器默认 CA 列表中。

```
casperjs --ignore-ssl-errors=true downloadscript.js 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-09T15:47:29.717

`page.resource.received`您可以在收到事件和`download()`文件时收听：

```
casper.on('page.resource.received', function(resource) {
    if (resource.stage !== "end") {
        return;
    }
    if (resource.url.indexOf('ExportData.csv') > -1) {
        this.download(resource.url, 'ExportData.csv');
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-29T19:33:00.300

@julianjm 方法几乎是解决方案，但就我而言，我没有正确的表单名称来替换表单提交。

所以我找到了另一个使用 phantomjs beta 的解决方案：

有一个 phantomjs 2.0 的 beta 版本，其中包含一个解决此问题的事件处理程序。

**它仍然是一个测试版，所以没有调试。**

所以我在发布版本上开发了点击和页面处理，然后更改了幻像版本以使下载工作。

```
 casper.start('http://www.website.com.br/', function() {
    this.page.onFileDownload = function(status){console.log('onFileDownload(' + status + ')'); 

//SYSTEM WILL DETECT THE DOWNLOAD, BUT YOU WILL HAVE TO NAME THE FILE BY YOURSLEF!!
return "ContactList_08-25-14.csv"; };

    });
      casper.then(function() {
        //DO YOUR STUFF HERE TO CLICK ON THE DOWNLOAD LINK. 
      });
    casper.run(); 
```

**下载：** [Phantom 2.0 BETA](https://github.com/ankitgr8/phantomjs2.0)

**下载exe，将phantom.exe的release版本重命名为phantom.bkp.exe，在这个地方插入这个2.0版本。然后，在 casperjs 中，您需要在 casperjs/bin/bootstrap.js 的开头添加一些行**

```
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 * DEALINGS IN THE SOFTWARE.
 *
 */
var system = require('system');
    var argsdeprecated = system.args;
    argsdeprecated.shift();
    phantom.args = argsdeprecated; 
```

**还注释版本检查（同一文件）：**

```
(function(version) {
        // required version check
      /*  if (version.major !== 1) {
            return __die('CasperJS needs PhantomJS v1.x');
        } if (version.minor < 8) {
            return __die('CasperJS needs at least PhantomJS v1.8 or later.');
        }
        if (version.minor === 8 && version.patch < 1) {
            return __die('CasperJS needs at least PhantomJS v1.8.1 or later.');
        } */
    })(phantom.version); 
```

请记住，**这是一个调整！**

因此，如果您想运行 phantom 发行版或 slimerjs，则 bootstrap 上的这些行会导致问题。

**所以开发发布版本，而不是调整到这个版本才能下载。如果需要调试，则必须删除 bootstrap.js 的行**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-14T21:51:59.053

我必须处理一个用某种 ASP.Net 框架编写的站点，该框架在每个请求中发送大量的 POST 数据（大约 100 Kb 的数据，其中大约 95 个似乎从未在请求​​之间改变 - 显然与视口状态相关） .

但是，我找不到任何适合我的方法。我已经研究过[拦截 XHR](https://stackoverflow.com/questions/24555370/how-can-i-catch-and-process-the-data-from-the-xhr-responses-using-casperjs)，我什至发现[有人正在处理相同的框架](https://stackoverflow.com/questions/33903418/downloading-a-file-with-casperjs-from-post-attachment)（至少从选择器来看）但有一个更简单的案例，受这个问题的启发。我发现[在过去，这不能](https://github.com/casperjs/casperjs/issues/255)用 PhantomJS 完成。

我的问题是单击按钮会启动一系列 AJAX 请求，最终发送这个巨大的 POST 表单，最后服务器用“Content-Disposition：附件”回复。

最后，我发现这种方法对我有用，即使它是网络效率低下的：

```
...setting up everything, until I just need to click on a button...

phantomData    = null;
phantomRequest = null;

// Here, I just recognize the form being submitted and copy it.

casper.on('resource.requested', function(requestData, request) {
    for (var h in requestData.headers) {
        if (requestData.headers[h].name === 'Content-Type') {
            if (requestData.headers[h].value === 'application/x-www-form-urlencoded') {
                phantomData         = requestData;
                phantomRequest      = request;
            }
        }
    }
});

// Here, I recognize when the request has FAILED because PhantomJS does
// not support straight downloading.

casper.on('resource.received', function(resource) {
    for (var h in resource.headers) {
        if (resource.headers[h].name === 'content-disposition') {
            if (resource.stage === 'end') {
                if (phantomData) {
                    // to do: get name from resource.headers[h].value
                    casper.download(
                        resource.url,
                        "output.pdf",
                        phantomData.method,
                        phantomData.postData
                    );
                } else {
                    // Something went wrong.
                }
                // Possibly, remove listeners?
            }
        }
    }
});

// Now, click on the button and initiate the dance.
casper.click(pdfLinkSelector); 
```

下载工作完美无缺，即使我可以看到文件被请求（和发送）*两次*。

```
[debug] [phantom] Navigation requested: url=https://somesite/SomePage.aspx, type=FormSubmitted, willNavigate=true, isMainFrame=true
[debug] [application] GOT FORM, REQUEST DATA SAVED
[warning] [phantom] Loading resource failed with status=fail (HTTP 200): https://somesite/SomePage.aspx
[debug] [application] END STAGE REACHED, PHANTOMDATA PRESENT
[debug] [application] ATTEMPTING CASPERJS.DOWNLOAD
[debug] [remote] sendAJAX(): Using HTTP method: 'POST'
[debug] [phantom] Downloaded and saved resource in output.pdf
[debug] [application] TERMINATING SUCCESSFULLY
[debug] [phantom] Navigation requested: url=about:blank, type=Other, willNavigate=true, isMainFrame=true
[debug] [phantom] url changed to "about:blank" 
```

（接下来，我可能会修改脚本以尝试`request.abort()`从侦听器内部调用`resource.requested`，设置信号量并再次调用下载器 - 我将无法获取附件文件名，但这对我来说无关紧要）。

# c# - 如何从 app.config 访问 VS2012 WPF 应用程序中的连接字符串？

> ID：16144253
> 
> 赞同：10
> 
> 时间：2013-04-22T09:58:23.073
> 
> 标签：c#, .net

我正在使用VS2012。我必须在 app.config 中保留连接字符串，并且必须从我的 cs 文件中访问它。但我无法在 VS2012 中做到这一点。以下是我从网上找到的，但我认为它适用于早期版本的 VS，而不适用于 VS2012。

app.config 文件

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
   <connectionStrings>
      <add name="DataFormConnection"
            connectionString="Data Source=abcdd;database=xyz;uid=4566;pwd=987"
            providerName="System.Data.SqlClient" />
   </connectionStrings>
</configuration> 
```

我如何访问它：

```
connectionString = ConfigurationManager.ConnectionStrings["DataFormConnection"].ConnectionString; 
```

出现错误：System.Configuration.ConfiguarationSettings 中不存在类型或名称

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-22T10:02:24.230

转到引用，并添加对 的引用`System.Configuration`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T10:02:37.533

转到`References`，并添加对`System.Configuration`

完成此操作后，您应该可以参考`System.Configuration.ConfigurationManager`.

# sublimetext2 - Sublime Text: select the object containing the insertion point?

> ID：16144255
> 
> 赞同：0
> 
> 时间：2013-04-22T09:58:24.813
> 
> 标签：sublimetext2, sublimetext, sublimetext3

I'd like to select an object around the insertion point/cursor in Sublime Text,

eg, given:

```
{
    'foo':'bar',
    'baz':{
        'zoo|':'zam' <- Note insertion point here
    }
} 
```

I'd like to be able to highlight the object around the insertion point, in this case:

*   The string 'zoo'

*   The hashmap containing that string

*   The parent hashmap

Depending on how many times I repeat the key combo / mouse action.

Is there a way to do this, either built into sublime or with an extension?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:36:13.880

Check out the Selection menu. Specifically, the Expand to Scope option. I know there us a key command for it (ctrl+shift+space in Windows/Linux, Shift+Command+Space in OS X)

# c# - 从 MultiFriendSelector 获取受邀好友列表

> ID：16144257
> 
> 赞同：0
> 
> 时间：2013-04-22T09:58:32.777
> 
> 标签：c#, asp.net, facebook, multi-friend-selector

我正在将 ASP.net C# 用于与 Facebook API 集成的 Web 应用程序。我的应用程序将允许用户创建一个组来共享代码。我需要使用 Facebook API 让用户邀请 Facebook 的朋友加入他在我的应用程序中的群组。这是分配的要求，因此请不要建议创建仅在我的网站上注册的用户组。

到目前为止，我使用以下代码列出了所有朋友的请求对话框（MultiFriendSelector()）：

```
<p> Click <span id="span-link" onclick="sendRequestViaMultiFriendSelector(); return     false;">here</span> to add friends from your Facebook account to your group! </p> 
```

但是我被困在如何获取这些受邀用户的 id 和详细信息，以便我可以将它们保存在我的数据库中并允许他们访问他们被邀请的组。请问我该怎么做？我似乎找不到与此相关的任何内容。

顺便说一句，我知道有一个相关的问题给出了这个代码：

```
if( Request["ids"] != null )
   ((Site)Master).FbInviteSent(Request.QueryString.GetValues("ids")); 
```

但我不知道Master是什么，我无法让它工作。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:27:55.640

通过查看另一个答案中的代码，看起来 facebook API 将使用 ids 的查询字符串参数回调到您的页面。

即它会用这样的网址调用你的网站。
[http://www.yoursitesulr.com/mypage.aspx?ids=13,22,44](http://wwww.yoursitesulr.com/mypage.aspx?ids=13,22,44)

然后，您可以使用从查询字符串中提取 id

string myIds = Request.QueryString["ids"];

然后，您可以将它们转换为数组。

var ids = myIds.Split(',');

如果您使用的是 MVC，那么您可以利用模型绑定器，只需在您的视图模型中放置一个 int 数组，它就会自动绑定。

下面的答案解决了您的具体问题，所以我会以此为起点。

[Facebook：使用多个朋友选择器和 JS SDK 发布到多个朋友的墙](https://stackoverflow.com/questions/8524195/faceboook-posting-to-multiple-friends-walls-using-multiple-friend-selector-and)

如果您对上述解决方案有任何疑问，请告诉我。

问候

史蒂夫

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T11:31:35.080

每当您调用请求对话框时，您都可以传递一个回调函数：

```
function sendRequestViaMultiFriendSelector() {
  FB.ui({method: 'apprequests',
    message: 'My Great Request'
  }, requestCallback);
} 
```

requestCallback 将收到响应，此响应返回被邀请用户的 facebook id

```
function requestCallback(response){
  for (var i = 0; i < response.to.length; i++) {
   fb_id = response.to[i];
   // Do something with fb_id.
  }
} 
```

# iphone - 在 UIPageViewController 的底部放置一个栏

> ID：16144258
> 
> 赞同：2
> 
> 时间：2013-04-22T09:58:38.400
> 
> 标签：iphone, ios, objective-c

我在故事板中使用 UIPageViewController，我想在屏幕底部创建一个带有标签的栏。所以像导航栏这样的东西，当你从 UIPageViewController 切换页面时，它总是留在那里。但是在我的情节提要上，我无法在 PageViewController 上放置视图或标签，我该如何实现呢？例子： ![在此处输入图像描述](https://i.stack.imgur.com/cNjQm.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T10:23:23.790

将 PageViewController 嵌入到容器中，该容器添加到另一个视图控制器上。这张图片将更好地解释它。

![在此处输入图像描述](https://i.stack.imgur.com/RH4ci.png)

完成后，您可以将自定义视图添加为子视图。

# android - 屏幕锁定时如何获取音量键事件？

> ID：16144259
> 
> 赞同：4
> 
> 时间：2013-04-22T09:58:41.923
> 
> 标签：android

```
@Override
public boolean dispatchKeyEvent(KeyEvent event) {
    int action = event.getAction();
    int keyCode = event.getKeyCode();
        switch (keyCode) {
        case KeyEvent.KEYCODE_VOLUME_UP:
            if (action == KeyEvent.ACTION_UP) {
                //TODO
            }
            return true;
        case KeyEvent.KEYCODE_VOLUME_DOWN:
            if (action == KeyEvent.ACTION_DOWN) {
                //TODO
            }
            return true;
        default:
            return super.dispatchKeyEvent(event);
        }
    } 
```

此代码在屏幕打开时有效。但不是在屏幕锁定时。屏幕锁定时有没有办法获取音量键事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:14:09.110

**该事件仅在屏幕打开时触发。否则需要 root 权限。**

> 制作一个 BroadcastReceiver 扩展类

```
 public class YourBoardcastReceiver extends BroadcastReceiver {
                @Override
                public void onReceive(Context context, Intent intent) {

Log.e("get something", "i dont know what!!");

        String intentAction = intent.getAction();
        KeyEvent event = null;
        if (Intent.ACTION_MEDIA_BUTTON.equals(intentAction)) {
            event = (KeyEvent) intent
                    .getParcelableExtra(Intent.EXTRA_KEY_EVENT);
        }

        if (event == null) {
            return;
        }

        int keycode = event.getKeyCode();
        int action = event.getAction();
        long eventtime = event.getEventTime();

        if (keycode == KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE
                || keycode == KeyEvent.KEYCODE_HEADSETHOOK) {
            if (action == KeyEvent.ACTION_DOWN) {
                // Start your app here!

                // ...
                Log.e("event/////", "Trigerd");

                if (isOrderedBroadcast()) {
                    abortBroadcast();
                }
            }
        }
    }
                }
        } 
```

> 在你的清单中：

```
<receiver android:name="YourBoardcastReceiver">
                <intent-filter>
                        <action android:name="android.intent.action.SCREEN_ON" />
                </intent-filter>
</receiver> 
```

> 并这样称呼它。

```
mAudioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
    mRemoteControlResponder = new ComponentName(getPackageName(),
            YourBoardcastReceiver.class.getName()); 
```

# vba - 鼠标移到 VBA 时如何启用突出显示？

> ID：16144260
> 
> 赞同：0
> 
> 时间：2013-04-22T09:58:42.487
> 
> 标签：vba, powerpoint, powerpoint-2010

鼠标移到VBA时如何启用突出显示？我在 VBA 中编写了一个宏，在创建新形状后，当鼠标悬停时，形状应该启用高亮显示。也许有颜色？

谢谢氩气师

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:21:18.463

您的宏需要在特定事件上运行。因此，在 Powerpoint 中，您可以选择以下选项：

*   鼠标按下
*   鼠标移动
*   鼠标向上

您可以按 F1 键来准确告诉您哪个事件做了什么。
在 VBA 中没有称为“MouseOver”的事件，因此您需要即兴发挥，例如当您将鼠标悬停在它上面时使用“MouseMove”事件来更改颜色，然后可能是页面“MouseMove”事件将其更改回默认颜色当您将鼠标移动到其他东西上时。
您应该能够在 Visual Basic 窗口中对象的下拉列表中找到所有这些事件

与使用 VBA 相比，另一种选择是使用 powerpoints 动画和效果，这可能会为您带来相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T15:08:13.927

在幻灯片中的 ActiveX 图片附加上试试这个（代码在显示模式下运行）

```
'zmien_w_trybie_prezentacji - VBATools.pl
Private Sub Image1_MouseMove(ByVal Button As Integer, ByVal Shift As Integer, ByVal X As Single, ByVal Y As Single)
Call kolor2(Image1)
End Sub

Sub kolor2(osh As Image)
    If osh.BackColor = 255 Then _
       osh.BackColor = 13998939 Else _
       osh.BackColor = 255
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:39:16.413

我找到了简单的方法。

```
myshape.ActionSettings(ppMouseOver).AnimateAction = msoTrue 
```

但我无法更改颜色和线条大小。这对我来说已经足够了。谢谢你。

# android - 使用 adapter.getItem(position) 时出现 NullPointerException

> ID：16144268
> 
> 赞同：0
> 
> 时间：2013-04-22T09:59:04.153
> 
> 标签：android, android-adapter

**我在WeekDays.java**中有以下代码

 **```
ArrayAdapter<TaskInAWeek> adapter1 = (ArrayAdapter<TaskInAWeek>) getListAdapter() ;
TaskInAWeek taski;
ArrayList<Long> checkedItms = new ArrayList<Long>();
ArrayList<Long> uncheckedItms = new ArrayList<Long>();

    for(int i=0;i<values.size();i++)
    {
        Log.i("value's size:" +values.size()," ");
        if(EditStatusAdapter.tog==1)
        {
            Log.i("i::"+i," ");
                taski = adapter1.getItem(i);
                long id = taski.getId();
                Log.i("nid:"+id," ");
                checkedItms.add(id);
            }
        else 
        {
            Log.i("i::"+i," ");
            taski = adapter1.getItem(i);
            long id = taski.getId();
            Log.i("nid:"+id," ");
            uncheckedItms.add(id);
        }
    } 
```

它的自定义数组适配器是 EditStatusAdapter.java。我`NullPointerException`在这个 pt得到一个`taski = adapter1.getItem(i);`。

我在我的一项活动中使用了类似的，但它确实工作得很好。我猜它是由于自定义数组适配器。但我也不能忽视它。谁能告诉我如何清除异常？**

# jquery - prettyPhoto 打破了其他 js

> ID：16144273
> 
> 赞同：0
> 
> 时间：2013-04-22T09:59:38.250
> 
> 标签：jquery, prettyphoto

我正在使用 prettyPhoto 来展示我的照片，但是当我使用它时会破坏其他 js。

```
 <script src="/js/UItoTop/js/easing.js" type="text/javascript"></script>
    <script src="/js/UItoTop/js/jquery.ui.totop.js" type="text/javascript"></script>
    <link rel="stylesheet" media="screen,projection" href="/js/UItoTop/css/ui.totop.css" />

    <!-- Media LightBox -->
    <link rel="stylesheet" href="css/prettyPhoto.css" type="text/css" media="screen" title="prettyPhoto main stylesheet" charset="utf-8" />
    <script src="js/jquery.prettyPhoto.js" type="text/javascript" charset="utf-8"></script>

    {literal}  
        <script type="text/javascript">
            onload = function(){
                readyVisorFotos();
            }
        </script>
        <script type="text/javascript">
            $(document).ready(function() {

            var defaults = {
                containerID: 'toTop', // fading element id
                containerHoverID: 'toTopHover', // fading element hover id
                scrollSpeed: 1200,
                easingType: 'linear' 
            };

            $().UItoTop({ easingType: 'easeOutQuart' });

            });
        </script> 
```

当我使用 prettyPhoto 时，UItoTop 停止工作。UItoTop 工作正常，只要你不点击任何图像来启动 prettyPhoto。

readyVisorFotos() 的代码是

```
 function readyVisorFotos(){
$("a[rel^='prettyPhoto']").prettyPhoto({show_title:false,autoplay_slideshow: true,slideshow: 5000});
$(".clipping a[rel^='prettyPhoto']").prettyPhoto({show_title:true,autoplay_slideshow: true,slideshow: 5000});
$(".noticiabrief a[rel^='prettyPhoto']").prettyPhoto();
 } 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:32:14.117

我使用回调。

```
 function readyVisorFotos(){
$("a[rel^='prettyPhoto']").prettyPhoto({show_title:false,autoplay_slideshow: true,slideshow: 5000,callback: function(){UItoTop();}});
$(".clipping a[rel^='prettyPhoto']").prettyPhoto({show_title:true,autoplay_slideshow: true,slideshow: 5000,callback: function(){UItoTop();}});
$(".noticiabrief a[rel^='prettyPhoto']").prettyPhoto({show_title:false,callback: function(){UItoTop();}});
}

function UItoTop(){
var defaults = {
    containerID: 'toTop', // fading element id
    containerHoverID: 'toTopHover', // fading element hover id
    scrollSpeed: 1200,
    easingType: 'linear' 
};
$().UItoTop({ easingType: 'easeOutQuart' });
} 
```

# node.js - 我需要从 npm 安装加密模块吗？

> ID：16144274
> 
> 赞同：17
> 
> 时间：2013-04-22T09:59:39.767
> 
> 标签：node.js, npm, node-crypto

我正在我的应用程序中使用加密模块。似乎在 nodejs [http://nodejs.org/api/crypto.html](http://nodejs.org/api/crypto.html)中分布了加密模块， 所以我需要做 npm install crypto 吗？[https://npmjs.org/package/crypto](https://npmjs.org/package/crypto)和 nodejs api 加密模块有什么区别？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-22T10:10:23.693

如果您使用的是 NodeJS 附带的 Crypto 模块中的方法，即[http://nodejs.org/api/crypto.html](http://nodejs.org/api/crypto.html)上描述的那些方法，那么不，您不需要这样做`npm install crypto`。

# google-apps-script - 如何使用时钟触发器获取电子表格 ID？

> ID：16144275
> 
> 赞同：0
> 
> 时间：2013-04-22T09:59:42.070
> 
> 标签：google-apps-script

我在电子表格中构建了一个工作流系统，其中电子邮件通知是其中一项功能。电子邮件提醒功能由每天一次的时钟触发器触发。

今天它看起来像这样：

```
function sendMailReminder(){
var ss = SpreadsheetApp.openById("XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"); 
```

只要我只有一个电子表格，我就可以毫无问题地使用 ID，但现在我想与其他工作组共享这个电子表格。我想这样做，而不必每次都访问代码和更改 ID。

那么 - 我如何访问与时钟触发器相关的电子表格 ID？可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:10:21.237

您可以创建嵌入电子表格的脚本，获取活动电子表格的 ID 并通过电子邮件发送。

```
var spreadsheet_id = SpreadsheetApp.getActiveSpreadsheet().getId(); 
```

# java - Java-Annotations 单独获取声明的方法

> ID：16144277
> 
> 赞同：0
> 
> 时间：2013-04-22T09:59:55.983
> 
> 标签：java, annotations

我使用以下代码来获取类中声明的方法。但是代码也返回了不必要的值以及声明的方法。

以下是我的代码：

编辑 ：

```
Class cls;
List classNames = hexgenClassUtils.findMyTypes("com.hexgen.*");
            Iterator<Class> it = classNames.iterator();
            while(it.hasNext())
            {

                Class obj = it.next(); 
                System.out.println("Methods available in : "+obj.getName());
                System.out.println("===================================");
                cls = Class.forName(obj.getName());
                Method[] method = cls.getDeclaredMethods();
                int i=1;
    Method[] method = cls.getDeclaredMethods();
     int i=1;
     for (Method method2 : method) {
    System.out.println(+i+":"+method2.getName());
    }
} 
```

我也试过`getMethods()`

以下是我的输出：

```
1:ajc$get$validator
2:ajc$set$validator
3:ajc$get$requestToEventTranslator
4:ajc$set$requestToEventTranslator
5:ajc$interMethodDispatch2$com_hexgen_api_facade_HexgenWebAPIValidation$validate
6:handleValidationException 
```

在此之后，只有我得到我在课堂上声明的方法。什么是上述值以及如何避免它们。？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:13:19.530

尝试这个：

```
Method[] method = cls.getClass().getDeclaredMethods(); 
```

代替

```
Method[] method = cls.getDeclaredMethods(); 
```

看这个例子：

```
import java.lang.reflect.Method;

public class Example {
    private void one() {
    }

    private void two() {
    }

    private void three() {
    }

    public static void main(String[] args) {
        Example program = new Example();
        Class progClass = program.getClass();

        // Get all the methods associated with this class.
        Method[] methods = progClass.getDeclaredMethods();
        for (int i = 0; i < methods.length; i++) {
            System.out.println("Method " + (i + 1) + " :"
                    + methods[i].toString());
        }
    }
} 
```

输出：

```
Method 1 :public static void Example.main(java.lang.String[])
Method 2 :private void Example.one()
Method 3 :private void Example.two()
Method 4 :private void Example.three() 
```

# mobile - 移动应用程序 ASP.NET MVC 4 中的 SimpleMembershipProvider

> ID：16144278
> 
> 赞同：0
> 
> 时间：2013-04-22T09:59:57.673
> 
> 标签：mobile, asp.net-mvc-4, simplemembership

我正在尝试使用 SimpleMembershipProvider 来管理我的移动应用程序的身份验证过程。

我使用 Mobile 模板生成了项目，但这并没有生成与 Internet 应用程序模板相同的文件。它没有`Filters`使用`InitializeSimpleMembershipAttribute.cs`file 和, 创建文件夹`web.config`，`AccountController`并且`AccountModel`是不同的。

我可以在移动应用程序中使用 SimpleMembershipProvider 吗？如果是，我该怎么做？如果没有，有什么替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:27:08.383

您可以在移动应用程序中使用 SimpleMembershipProvider。[本文提供了](http://kevin-junghans.blogspot.com/2013/04/using-simplemembership-with-mobile.html)有关如何执行此操作的完整说明，并提供了可下载的示例 VS 项目的链接。

# ruby-on-rails - 高效的 ActiveRecord 关联条件

> ID：16144284
> 
> 赞同：2
> 
> 时间：2013-04-22T10:00:13.023
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, associations

假设您在其中一个模型中有一个关联，如下所示：

```
class User
  has_many :articles
end 
```

现在假设您需要获取 3 个数组，一个用于昨天写的文章，一个用于最近 7 天写的文章，一个用于最近 30 天写的文章。

当然你可以这样做：

```
articles_yesterday = user.articles.where("posted_at >= ?", Date.yesterday)
articles_last7d    = user.articles.where("posted_at >= ?", 7.days.ago.to_date)
articles_last30d   = user.articles.where("posted_at >= ?", 30.days.ago.to_date) 
```

但是，这将运行 3 个单独的数据库查询。更有效的是，您可以这样做：

```
articles_last30d   = user.articles.where("posted_at >= ?", 30.days.ago.to_date)
articles_yesterday = articles_last30d.select { |article| 
  article.posted_at >= Date.yesterday 
}
articles_last7d    = articles_last30d.select { |article| 
  article.posted_at >= 7.days.ago.to_date
} 
```

当然，这是一个人为的例子，并不能保证数组选择实际上会比数据库查询快，但让我们假设它是。

我的问题是：有什么方法（例如一些 gem）可以通过确保您简单地指定关联条件来消除此问题的方式编写此代码，并且应用程序本身将决定是否需要执行另一个数据库查询或不是？

ActiveRecord 本身似乎并没有适当地解决这个问题。您被迫在每次查询数据库或将关联视为数组之间做出决定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:14:53.543

您可以使用下面的代码摆脱检查查询的必要性。

```
class User
  has_many :articles

  def article_30d
    @articles_last30d ||= user.articles.where("posted_at >= ?", 30.days.ago.to_date)
  end

  def articles_last7d 
    @articles_last7d ||= articles_last30d.select { |article| article.posted_at >= 7.days.ago.to_date }
  end

  def articles_yesterday 
    @articles_yesterday ||= articles_last30d.select { |article| article.posted_at >= Date.yesterday }
  end

end 
```

它能做什么：

*   如果使用了三个中的任何一个，则最多只进行一个查询
*   只计算使用的数组，以及任何情况下的 30d 版本，但只计算一次

但是，即使您不使用它，它也不会简化最初的 30 天查询。够了吗，还是需要更多？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:40:28.567

有几种方法可以处理这个问题：

您可以通过在关联定义上指定条件哈希来为所需的每个级别创建单独的关联。然后，您可以简单地为您的用户查询加载这些关联，并且您将在整个操作中使用 db 3x，而不是为每个用户使用 3x。

```
class User
  has_many articles_yesterday, class_name: Article, conditions: ['posted_at >= ?', Date.yesterday]
   # other associations the same way
end

User.where(...).includes(:articles_yesterday, :articles_7days, :articles_30days) 
```

你可以做一个小组。

归根结底是您需要分析您的代码并确定对您的应用程序来说最快的是什么（或者您是否应该为此烦恼）

# c# - 使用自定义基页类时如何防止覆盖 Page_Load 方法

> ID：16144285
> 
> 赞同：1
> 
> 时间：2013-04-22T10:00:15.827
> 
> 标签：c#, inheritance, webforms

我正在使用 ASP.NET 4.5 开发一个 ASP.NET Webforms 网站。我有一个用于表单的母版页，但我希望页面类从另一个`SitePage`类继承，其代码如下：

```
public abstract class SitePage : Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        // common logic here
        Page_LoadImpl(sender, e);
    }

    protected abstract void Page_LoadImpl(object sender, EventArgs e);
} 
```

页面的类将如下所示：

```
public partial class MyPage: SitePage
{
    protected override void Page_LoadImpl(object sender, EventArgs e)
    {
       //page specific logic here
    }
} 
```

我来自 Java 背景，如何使我的 SitePage`Page_Load`方法成为最终的、不可覆盖的？我知道我可以使用嵌套母版页来实现相同的目的，但我不想重新定义页面的内容。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:03:10.203

使用-keyword，其作用与中`sealed`相同。`final``Java`

[来自MSDN](http://msdn.microsoft.com/en-us/library/88c54tsw%28v=vs.110%29.aspx)的示例

```
class X
{
    protected virtual void F() { Console.WriteLine("X.F"); }
    protected virtual void F2() { Console.WriteLine("X.F2"); }
}
class Y : X
{
    sealed protected override void F() { Console.WriteLine("Y.F"); }
    protected override void F2() { Console.WriteLine("X.F3"); }
}
class Z : Y
{
    // Attempting to override F causes compiler error CS0239\. 
    // protected override void F() { Console.WriteLine("C.F"); }

    // Overriding F2 is allowed. 
    protected override void F2() { Console.WriteLine("Z.F2"); }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:07:47.237

```
public abstract class SitePage : Page
{
    sealed protected void Page_Load(object sender, EventArgs e)
    {
        // common logic here
        Page_LoadImpl(sender, e);
    }

    protected abstract void Page_LoadImpl(object sender, EventArgs e);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:13:34.407

只有当一个方法被标记为“virtual”或“abstract”时，它才是可覆盖的。

您的方法“Page_Load”没有用这些关键字标记，因此它已经不可覆盖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T12:49:10.397

覆盖 SupportAutoEvents。

受保护的密封覆盖 bool SupportAutoEvents { get { return false; } }

# c# - TeamCity 上的插件安装

> ID：16144286
> 
> 赞同：2
> 
> 时间：2013-04-22T10:00:20.523
> 
> 标签：c#, teamcity

根据文档，[tcWebhooks](http://sourceforge.net/apps/trac/tcplugins/wiki/TcWebHooks)的安装如下

> 下载 jar 文件。找到您的 TeamCity 安装的插件目录。这通常是 $HOME/.BuildServer/plugins/。在名为“tcWebHooks”的插件目录中创建一个新目录（文件夹）（可以任意命名）。将您下载的 jar 复制到 tcWebHooks 目录中。重新启动 TeamCity。

TeamCity Professional 7.1.4（内部版本 24331）没有创建 .BuildServer 文件夹，我在机器上的任何地方都找不到它。有谁知道插件安装的默认路径？我看到“C:\TeamCity\buildAgent\plugins”中有一个插件文件夹，其中包含很多插件，但按照上述说明操作似乎仍然没有找到插件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T10:09:14.587

您应该将插件放入服务器。它们将自动部署到代理。

只需将插件的 zip 文件复制到 teamcity 数据文件夹中的 plugins 文件夹中，默认为`C:\ProgramData\JetBrains\Teamcity\plugins`.

如果您不确定是否可以在管理 > 全局设置下找到它

# svn - SVN 无法识别特定目录中的本地更改

> ID：16144288
> 
> 赞同：1
> 
> 时间：2013-04-22T10:00:22.127
> 
> 标签：svn, version-control, command-line

`/downloads/assets/guidance/`我在我的 SVN 存储库中有一个名为的目录，其中包含许多图像。但是，这些图像*不在*存储库中并且是内容管理的。

我正在使用 svn，版本 1.6.11 (r934486)。

我在该目录中有许多图像显示为 unrecognized `?`，但是其中有很多图像填充了命令行中的缓冲区，我无法查看我的*实际*更改。

我留下了很多这些（输出`svn stat`）：

```
?       downloads/assets/guidance/55.jpg
?       downloads/assets/guidance/19.jpg
?       downloads/assets/guidance/38.jpg
?       downloads/assets/guidance/56.jpg
?       downloads/assets/guidance/39.jpg
?       downloads/assets/guidance/57.jpg
?       downloads/assets/guidance/58.jpg 
```

如何在不影响与许多其他开发人员共享的 SVN存储库的情况下**仅忽略本地工作副本中的这些文件/目录？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:23:09.870

我猜你在谈论`svn stat`. 只需使用选项`-q`( `--quiet`)。它将抑制所有未版本化的项目：

```
svn stat -q downloads/assets/ 
```

**更新：**您还可以将属性设置`svn:ignore`为自动抑制一些未版本控制的文件：

```
svn propset svn:ignore '*.jpg' download/assets 
```

在这种情况下，您可以使用`--no-ignore`忽略 svn:ignore 属性的选项，即显示将被抑制的文件。

# sharepoint - 用于 vs 2012 的 WSPBuilder

> ID：16144289
> 
> 赞同：1
> 
> 时间：2013-04-22T10:00:28.993
> 
> 标签：sharepoint, web-parts, sharepoint-designer, sharepoint-2013, wspbuilder

我是 SharePoint 2013 的新手。我使用的是试用版 vs 2012。我想使用 WSPBuilder 开发 Web 部件。我已经安装了 WSPBuilder，但它没有在 vs 2012 中显示。

我使用了以下链接，但没有解决问题。

[http://gblsharepoint.blogspot.in/2013/01/using-wspbuilder-with-visual-studio-2012.htm](http://gblsharepoint.blogspot.in/2013/01/using-wspbuilder-with-visual-studio-2012.htm)

我已经完成了复制并通过了“Microsoft Visual Studio”和“Microsoft Visual Studio Macros”热门应用程序，并将版本指定为“11.0”。这是工作。

谁能帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T08:17:52.147

WSP Builder 早在 SharePoint 2007 时代就已经使用它，当时 Visual Studio 不支持 SharePoint 包。

自 Visual Studio 2010 和 Visual Studio 2012 发布以来，不再需要 WSP Builder。

不过，为了将 Visual Studio 2012 与 SharePoint 2013 一起使用，您必须安装一个额外的包。要安装它，请启动 Web 平台安装程序（如果它不在您的服务器上，则从[http://www.microsoft.com/web/downloads/platform.aspx](http://www.microsoft.com/web/downloads/platform.aspx)下载安装程序）。在安装程序中，搜索 SharePoint。根据结果​​，安装 Microsoft Office Developer Tools for Visual Studio 2012。

启动 Visual Studio，当您创建新项目/解决方案时，您应该会看到 Office/SharePoint 类别。在下方，选择 SharePoint 解决方案类别。如果您只想在 WSP 文件中创建单个 webpart，那么最简单的方法是选择“SharePoint 2013 - Visual Web Part”项目项。这将为您设置一个包含功能的项目，一个您可以使用自己的代码扩展的可视化 Web 部件等。构建 Web 部件，您最终将在您的调试/发布文件夹中获得一个 WSP 文件，您可以将其部署到您的服务器（或者只需按 F5，它就会自动将其部署到您在创建项目时指定的场/站点）。

如果您使用 F5 进行部署，请不要忘记在部署后将 Web 部件添加到页面，因为 Visual Studio 不会为您执行此操作（编辑页面，切换到功能区中的插入选项卡，选择您的 Web 部件。您的 Web 部件将如果您不修改 webpart 的 elements.xml 文件，则位于“自定义”类别下）。

# matlab - 避免 sub2ind 和 ind2sub

> ID：16144291
> 
> 赞同：3
> 
> 时间：2013-04-22T10:00:32.487
> 
> 标签：matlab, indexing, computer-vision, bsxfun

我需要访问 3D 中某个点周围的多个索引。例如，对于点 ( `x1`, `y1`, `z1`)，我需要获取其 3x3x3 邻域的所有索引，使得 ( `x1`, `y1`, `z1`) 居中。为大小 3 的附近，我做

```
 [x,y,z] = meshgrid(-1:1,-1:1,-1:1);
 x_neighbors = bsxfun(@plus,x,x1);
 y_neighbors = bsxfun(@plus,y,y1);
 z_neighbors = bsxfun(@plus,z,z1); 
```

在这里，我通过添加从 ( , , ) 到 3x3x3 框中任意点的距离来`x1`将`y1`、、居中。`z1``x1``y1``z1`

`x1`这给了我 ( , `y1`, `z1`) 3x3x3 邻域的坐标。然后我需要将它们转换为线性索引，以便我可以访问它们：

```
 lin_ind = sub2ind(size(volume),y_neighbors,x_neighbors,z_neighbors); 
```

这是我所做的代价高昂的事情。

我的问题是，如何避免`sub2ind`. 如果`inx`是 ( `x1`, `y1`, `z1`) 的线性索引，

```
inx = sub2ind(size(volume),y1,x1,z1); 
```

如何通过加减或任何其他简单操作找到线性索引的 3x3x3 邻域`inx`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:29:51.840

只要您知道 3D 数组的尺寸，就可以计算 3x3x3 邻域的所有元素的线性偏移。为了说明这一点，考虑一个 4x5 矩阵的 2D 示例。线性索引如下所示：

```
1 5  9 13 17
2 6 10 14 18
3 7 11 15 19
4 8 12 16 20 
```

10 的 3x3 邻域是`[5 6 7 9 10 11 13 14 15]`. 15 的 3x3 邻域是`[10 11 12 14 15 16 18 19 20]`. 如果我们减去中心元素的索引，在这两种情况下我们都会得到`[-5 -4 -3 -1 0 1 3 4 5]`. 更一般地，对于`M`x`N`矩阵，我们将有`[-M-1 -M -M+1 -1 0 1 M-1 M M+1]`或`[(-M+[-1 0 1]) -1 0 1 (M+[-1 0 1])]`。

推广到三个维度，如果数组是`M`x `N`x `P`，则从中心元素的线性索引偏移量将为`[(-M*N+[-M-1 -M -M+1 -1 0 1 M-1 M M+1]) [-M-1 -M -M+1 -1 0 1 M-1 M M+1] (M*N+[-M-1 -M -M+1 -1 0 1 M-1 M M+1])]`。如果您愿意，您可以将其重塑为 3x3x3。

请注意，这种索引不能很好地处理边缘。如果你想在数组的边缘找到一个元素的邻居，你可能应该首先在所有边上填充数组（从而改变`M`、`N`和`P`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T07:08:04.560

只需将（通用）代码添加到@nhowe 答案：这是大小为 5X5X5 的邻域的示例，因此 r（半径）为 2：

```
ns = 5;
r = 2;

[M,N,D] = size(vol);
rs = (1:ns)-(r+1);
% 2d generic coordinates:
neigh2d = bsxfun(@plus, M*rs,rs');
% 3d generic coordinates:
pages = (M*N)*rs;
pages = reshape(pages,1,1,length(pages));

neigh3d = bsxfun(@plus,neigh2d,pages); 
```

要获得 vol 的任何线性索引的任何邻域，只需将线性索引添加到 neigh3d：

```
new_neigh = bxsfun(@plus,neigh3d, lin_index); 
```

# linux - MATLAB MCC "??? 使用 ==> mcc 时出错，返回状态 = 1"

> ID：16144304
> 
> 赞同：0
> 
> 时间：2013-04-22T10:01:00.760
> 
> 标签：linux, matlab, matlab-compiler, mcc

我正在尝试使用 mcc 在 linux 集群上编译 matlab .m 文件。R2008b 安装在集群上。

我使用[http://www.it.northwestern.edu/research/sscc/matlabcompiler.html](http://www.it.northwestern.edu/research/sscc/matlabcompiler.html)作为指南。

我的 plusone.m 文件如下：

```
function y = plusone(x)
if(ischar(x)), x = str2num(x), end;
y = x + 1; 
```

我正在使用命令“matlab -nodisplay”在集群上运行 matlab。我已经运行 mbuild -setup 并将（我的 matlab 根文件夹）/bin 和 /sbin 添加到 $PATH。

我在 MATLAB 中使用命令 mcc -m -v plusone.m，完整输出为：

> “??? Error using ==> mcc Error execution mcc, return status = 1.”

对于几个不同的 .m 文件和许多不同的标志设置，此输出是相同的。

没有更多的错误信息，我有点难过。关于可能导致错误的原因或获取有关错误的更多信息的方法的建议将不胜感激。

# c - c中的可变数组大小

> ID：16144307
> 
> 赞同：0
> 
> 时间：2013-04-22T10:01:07.133
> 
> 标签：c, arrays

我正在尝试声明由用户输入给出的可变大小的数组。

到目前为止，我有这样的事情：

```
typedef struct _object{   
    int rowsAmount;  
    int columsAmount;
    int* rows;
    int* colums;
} object;

object* newObject(int ra, int ca){
    object* o = malloc(sizeof(object));
    o->rowsAmount = ra;
    o->columsAmount = ca;
    o->rows = [ra];    
    o->colums = [ca];
    return o;
}

int main(){
    newObject(3,4);
} 
```

我预计这行不通，但我想要这样的东西，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T10:04:23.113

看起来你基本上在这里实现了一个动态 Matrix 对象。你想要这样的东西：

```
typedef struct _object{   
    int rowsAmount;  
    int columsAmount;
    int* matrix;
    int** rows;
} object;

object* newObject(int ra, int ca){
    object* o = malloc(sizeof(object));
    o->rowsAmount = ra;
    o->columsAmount = ca;
    o->matrix = malloc(ra * ca * sizeof(int));
    o->rows = malloc(ra * sizeof(int*));
    for (size_t i = 0; i != ra; ++i) o->rows[i] = o->matrix + (i * ca);
    return o;
} 
```

您还应该创建一个析构函数`destroyObject`，它同样是为and`free`分配的所有内存。`o``o->matrix`

***编辑***：

但是，您的评论是：

> “我只是想学习c，这只是关于设置大小。我只是碰巧用2个数组尝试了它”

...使这个问题有些混乱，因为它表明您实际上并没有尝试创建矩阵（二维数组），尽管您在这里使用了“行”/“列”术语，但您只是想了解如何在 C 中动态分配数组。

如果是这种情况，C 中的数组是使用指针变量动态分配的，并且`malloc`：

```
size_t array_size = 10; /* can be provided by user input */
int* array = malloc(sizeof(int) * array_size); 
```

稍后，一旦您完成使用动态分配的数组，就必须释放它：

```
free(array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:04:24.103

我认为当可以使用范围变量时，人们经常使用动态内存分配。例如，根据用户输入调整大小的数组可以在堆栈上分配，而无需使用 malloc/free：

```
int array_size;
scanf("%d", &array_size);
if (array_size > 0) {
    /* Allocate array on stack */
    float array[array_size];

    /* ... do smth with array ... */
}
/* Out of scope, no need to free array */ 
```

当然，如果你的数据块很大，堆内存是必须的，但对于小的分配范围就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:17:57.263

您可以使用用户输入的大小创建一个数组，而无需结构。

```
int *array1;
int size;
// get input from user
array1 = malloc(sizeof(int)*size);
// do your stuff
free(array1); 
```

如果你想要一个二维数组，

```
int **array2;
int row, col;
int i;
array2 = malloc(sizeof(int*)*row);
for(i=0;i<row;++i)
    array2[i] = malloc(sizeof(int)*col);
//use the array
for(i=0;i<row;++i)
    free(array2[i]);
free(array2); 
```

如果你真的需要一个结构数组，那么在你的`newObject()`函数中为它分配内存

```
typedef struct _object{   
    int rowsAmount;  
    int columsAmount;
    int** array;
    //int* colums;
} object;

object* newObject(int ra, int ca){
    int i;
    object* o = malloc(sizeof(object));
    o->rowsAmount = ra;
    o->columsAmount = ca;
    o->array = malloc(sizeof(int*)*ra);    
    for(i=0;i<ra;i++)
        o-<array[i]=malloc(sizeof(int)*ca);
    return o;
}

int main(){
    newObject(3,4);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T10:03:39.807

在 C 中动态分配二维数据数组：

*   为整个数据分配内存。该内存由 指向`arrayData`。
*   为每一行分配一个指针的一维数组
*   将这些指针指向每行对应的内存地址

代码：

```
int *arrayData = malloc(sizeof(int) * rows * columns);
int **array = malloc(sizeof(int*) * rows);
for(int i=0; i < rows;++i){
   array[i] = arrayData + i * columns;
} 
```

您现在可以以`array[row][col]`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-22T10:27:05.363

```
#include <stdio.h>
#include <stdlib.h>

typedef struct _object{   
    int rowsAmount;  
    int columsAmount;
    int **rows;
//  int* colums;
} object;

object* newObject(int ra, int ca){
    int r;
    object* o = malloc(sizeof(object));
    o->rowsAmount = ra;
    o->columsAmount = ca;
    o->rows = (int **)malloc(ra*sizeof(int *));
    for(r=0;r<ra;++r)
        o->rows[r] = (int*)malloc(ca*sizeof(int));
    return o;
}

int main(){
    object *obj= newObject(3,4);
    obj->rows[2][3]=5;
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-22T10:12:41.073

最简单的方法是使用 boost::multi_array 不仅可以获得任意数量的维度，而且还可以非常有效地存储为单个连续的内存块，而不是 n 维数组。

CPU 旨在快速遍历数组，您可以使用它来潜在地利用编译器的缓存/预取/流水线功能。

例如

```
// 2 dimensions
int xDim;
int yDim;
cin >> xDim; // From user..
cin >> yDim;
// Initialise array
boost::multi_array<int,2> my2dgrid(boost::extents[xDim][yDim]);
// Iterate through rows/colums
for(int j = 0 ; j < yDim-1; j++) { // Row traversal
for(int i = 0 ; i < xDim-1; i++) { // Column traversal
   int value = grid[j][i]; // Get a value
   grid[j][i] = 123; // set a value
   // Do something...
} 
```

# java - R-tree 节点应该有多少个孩子（最小，最大）？

> ID：16144310
> 
> 赞同：1
> 
> 时间：2013-04-22T10:01:10.443
> 
> 标签：java, tree, r-tree

我有 500.000 个独特的 3D 点，我想将它们插入到 R-tree 中。R-tree 的构造函数接受两个参数：

*   一个节点可以拥有的最小子节点数
*   一个节点可以拥有的最大子节点数

我在[wikipedia](http://en.wikipedia.org/wiki/R-tree)上读到：“......最佳性能已经体验到最小填充为最大条目数的 30%–40%。”

那么这两个参数的最佳值是多少？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T14:21:51.980

好吧，维基百科说的是：

```
minimum = approximately 0.3 * maximum to 0.4 * maximum 
```

至于最大值，这取决于您的确切设置和实施。特别是您的数据集的维度起着巨大的作用，而且您执行的查询类型（想想每个查询返回的平均点数！）因此，*不能*成为一般规则。

但是，由于 R-tree 被设计为在磁盘上操作，您可能应该选择最大值，以便它以最佳方式填充**磁盘上的单个块**（8kb？）

# ios - 如何使用开源框架或免费工具创建报亭杂志应用程序？

> ID：16144312
> 
> 赞同：1
> 
> 时间：2013-04-22T10:01:16.847
> 
> 标签：ios, ipad, ios6, newsstand-kit

我想创建一个交互式 iOS 报亭杂志应用程序，其功能包括页面卷曲效果、从目录直接到页面、双标签以在水平线底部获取页面列表图标、带有图像的页面和指向网页的链接里面应该用 Safari 打开的杂志。

1.  是否有免费的开源框架/工具（Baker 除外）或教程？
2.  是否可以使用 PageViewController 完成所有工作？
3.  杂志应用程序中的页数是否也有任何限制（每期杂志的最小或最大页数）？

目标平台是 iOS 6.0 及更高版本，目标设备是运行 iOS 6.0 及更高版本的 iPad/iPad mini。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:00:02.217

1.  [本教程](http://www.viggiosoft.com/blog/blog/2011/10/17/ios-newsstand-tutorial/)解释了您需要了解的大部分内容。需要更具体地了解您需要哪些开源工具。
2.  是的
3.  苹果没有具体说明，但你*应该*定期发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T14:03:39.257

创建报亭应用程序可能是一个漫长的过程。[你也可以走简单的路，通过类似http://uninkd.com](http://uninkd.com)的方式发布你的杂志。

# android - Android - 最佳位置追踪策略

> ID：16144313
> 
> 赞同：0
> 
> 时间：2013-04-22T10:01:16.980
> 
> 标签：android, locationmanager

我正在尝试编写一个位置跟踪服务，该服务在应用程序启动后立即启动，在应用程序进入后台后立即停止，并在应用程序返回前台后立即重新启动。

该服务应在运行时每 5 分钟轮询一次新位置（以节省电池），并在找到新位置时 (onLocationChanged()) 更新一个我可以从任何活动中检索的变量。

我已经尝试在我的自定义 Application 类中绑定一个服务，但是在我的初始 Activity 加载之前该服务从未被绑定 - 我的初始 Activity 需要这个服务，所以我在尝试访问该服务时不断收到一个空指针异常。

但也许我走错了方向——最好的策略是什么？我不需要超级精确的位置，我不在乎它来自 GPS 还是网络。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:22:57.767

下面的代码对我有用...

您将获得该位置，只需在您想要的任何地方明智地使用它...

```
public Location getLocation() {
    try {
        locationManager = (LocationManager) mContext
                .getSystemService(LOCATION_SERVICE);

        // getting GPS status
        isGPSEnabled = locationManager
                .isProviderEnabled(LocationManager.GPS_PROVIDER);

        // getting network status
        isNetworkEnabled = locationManager
                .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        if (!isGPSEnabled && !isNetworkEnabled) {
            // no network provider is enabled
        } else {
            this.canGetLocation = true;
            if (isNetworkEnabled) {
                locationManager.requestLocationUpdates(
                        LocationManager.NETWORK_PROVIDER,
                        MIN_TIME_BW_UPDATES,
                        MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                Log.d("Network", "Network Enabled");
                if (locationManager != null) {
                    location = locationManager
                            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                    if (location != null) {
                        latitude = location.getLatitude();
                        longitude = location.getLongitude();
                    }
                }
            }
            // if GPS Enabled get lat/long using GPS Services
            if (isGPSEnabled) {
                if (location == null) {
                    locationManager.requestLocationUpdates(
                            LocationManager.GPS_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("GPS", "GPS Enabled");
                    if (locationManager != null) {
                        location = locationManager
                                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
            }
        }

    } catch (Exception e) {
        e.printStackTrace();
    }

    return location;
} 
```

# magento - Magento 无法使用管理员登录

> ID：16144316
> 
> 赞同：2
> 
> 时间：2013-04-22T10:01:25.983
> 
> 标签：magento, login, admin

我将我的 Magento 网站移动到另一个主机，一切都很好。但我无法登录！

我有 Magento 1.7.0.2

我尝试了网络上的所有解决方案，但我还没有成功！

* * *

**解决方法：** [处理您的请求时出现错误，Error log record number](https://stackoverflow.com/questions/15473705/magento-admin-panel-errors)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:49:04.090

检查安全和不安全的 url 在 db 中是否正确

如果它们正确，则删除 var 的所有子文件夹，例如：var/cache

然后在缓存管理中刷新缓存

在此之后它肯定会起作用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T20:06:57.613

这是为我解决的问题。找到你的 .htaccess 文件

`##cookie-free domains` `Header unset Cookie` `Header unset Set-Cookie`

并将它们注释掉

`##cookie-free domains` `#Header unset Cookie` `#Header unset Set-Cookie`

那应该解决它。

# javascript - 在 document.ready 中添加 youtube iframe 代码时出现问题

> ID：16144321
> 
> 赞同：7
> 
> 时间：2013-04-22T10:01:45.990
> 
> 标签：javascript, jquery, youtube, youtube-api

我想在我的 $(document).ready() 函数中添加 youtube iframe api 代码，但是当我这样做时，播放器似乎没有加载，当我将代码移到 document.ready 之外时，播放器加载正常。任何人都可以就我如何在函数内显示此视频提供任何建议吗？

**JS**

```
$(document).ready(function() {
var tag = document.createElement('script');
    tag.src = "//www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    var player;
    function onYouTubePlayerAPIReady() {
        player = new YT.Player('player', {
            height: '390',
            width: '640',
            videoId: 'u1zgFlCw8Aw',
            events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
            }
        });
    }

    function onPlayerReady() {
        console.log('ready');
    }

    function onPlayerStateChange() {
        console.log('player changed');
    }
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T20:54:25.840

如果您更改`function onYouTubePlayerAPIReady() {...}`为`window.onYouTubePlayerAPIReady = function() {...}`then ，则可以在函数中定义您的 YouTube iframe API 回调`$(document).ready()`，并可能将其他变量从`$(document).ready()`范围拉入您的回调范围。

不过，我不确定这样做有多大好处，但如果你真的想这样做，这是一个选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:18:46.213

该脚本将`onYouTubePlayerAPIReady()`在加载时调用。当您...假设...在您的 DOM 就绪包装器中“隐藏”这些函数时，它们不再可供 YT API 调用（超出范围）。

因为您无法直接访问 YT API 脚本文件，所以您无法更改此行为，恕我直言，您的要求是不可能的。

# iphone - 在 xcode 中更改应用程序/目标名称

> ID：16144322
> 
> 赞同：3
> 
> 时间：2013-04-22T10:01:48.807
> 
> 标签：iphone, xcode4.5

我想开发相同的应用程序（相同的编码）但名称不同。所以重命名应用程序。我尝试更改各种参数，例如`Bundle Name, Bundle Display Name, Product Name`并清理应用程序，然后构建它。`But build is succeeded`. 几分之一秒后，我看到了状态。我`Finished running 'appname' on iphone 6.0 simulator and my app stops` `running`应该改变什么来重命名我的应用程序？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-04-26T21:58:45.870

转到项目编辑器并选择您想要的目标（将变为蓝色）

![在此处输入图像描述](https://i.stack.imgur.com/vChMj.png)

在目标视图窗口中双击目标名称。

![在此处输入图像描述](https://i.stack.imgur.com/bqMBs.png)

输入新名称

![在此处输入图像描述](https://i.stack.imgur.com/WLhik.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T10:20:25.420

捆绑显示名称和捆绑标识符。

显示在设备上的应用程序图标下的名称的捆绑显示名称。Bundle Identifier 让设备、模拟器和应用商店明白有两个不同的应用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T10:11:48.733

![在此处输入图像描述](https://i.stack.imgur.com/quBmu.png)

![在此处输入图像描述](https://i.stack.imgur.com/cV1Jz.png)

更改项目名称，然后单击输入按钮。

# javascript - Javascript 匹配正则表达式链接

> ID：16144326
> 
> 赞同：2
> 
> 时间：2013-04-22T10:01:58.897
> 
> 标签：javascript, regex

嗨，我在 div 中有以下文本：

```
[http://www.google.com Google this link] some other random text [http://example.com and another website] but don't parse [this is not a link, leave me alone]. 
```

我试图做的是将链接转换为普通的 html 链接。格式总是这样，所以它以 [ 开头，然后是 url，然后是链接文本，然后是结束 ]。但我只想匹配链接，*而不是方括号中的所有文本*。

我想`.match()`在 javascript 中使用该函数来完成此任务，但我无法弄清楚正则表达式（我只需要作为链接的文本部分 - 其余部分应该是一个简单的拆分）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T10:07:00.697

Why `.match` and not `.replace`?

```
string.replace(/\[(https?:\/\/[^\]\s]+)(?: ([^\]]*))?\]/g, "<a href='$1'>$2</a>"); 
```

# android - Android GoogleMap 2 通过通用图像加载器在 InfoWindow 中使用 ImageView 动态更新信息

> ID：16144341
> 
> 赞同：10
> 
> 时间：2013-04-22T10:02:40.807
> 
> 标签：android, android-maps-v2, universal-image-loader

我正在开发新的 Google Map v2 API。

我使用 ImageLoader 在 Marker 上动态显示图像。

但问题是，当我获得 Universal Image Loader 的 onLoadingComplete() 时，ImageView 既不会自动失效，也不会手动失效。

下次如果我单击相同的标记，图像将从通用图像加载器的缓存中显示。

下面是我的**CustomInfoWindowAdapter**代码：

```
private class CustomInfoWindowAdapter implements InfoWindowAdapter {

    @Override
    public View getInfoContents(Marker marker) {
        return null;
    }

    @Override
    public View getInfoWindow(Marker marker) {
        final View mWindow = getLayoutInflater().inflate(R.layout.custom_info_window, null);

        render(marker, mWindow);
        return mWindow;
    }

    private void render(final Marker marker, View view) {

        final String url = markers.get(marker.getId()).getStrProfilePic();
        final ImageView image = ((ImageView) view.findViewById(R.id.badge));
        Log.e(TAG, "URL : " + url);

        if ( url != null && !url.equalsIgnoreCase("null")
                && !url.equalsIgnoreCase("")) {
            imageLoader.displayImage(url, image, options, new SimpleImageLoadingListener() {
                @Override
                public void onLoadingComplete(String imageUri, View view,
                        Bitmap loadedImage) {
                    super.onLoadingComplete(imageUri, view, loadedImage);
                    ((ImageView) view).invalidate();
                }
            });
        } else {
            image.setImageResource(R.drawable.noimage);
        }

        final String title = marker.getTitle();
        final TextView titleUi = ((TextView) view.findViewById(R.id.title));
        if (title != null) {
            titleUi.setText(title);
        } else {
            titleUi.setText("");
        }

        final String snippet = marker.getSnippet();
        final TextView snippetUi = ((TextView) view.findViewById(R.id.snippet));
        if (snippet != null) {
            snippetUi.setText(snippet);
        } else {
            snippetUi.setText("");
        }
    }
} 
```

添加标记时，我将标记 ID 存储在 HashTable 中。从他们那里我会得到照片的 URL。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T10:45:03.967

我在类级别采用了一个 Marker 对象，并使用该对象来更新 Marker 信息。

我已经按如下方式自定义了我的课程以更新 ImageView ：

```
private class CustomInfoWindowAdapter implements InfoWindowAdapter {

    private View view;

    public CustomInfoWindowAdapter() {
        view = getLayoutInflater().inflate(R.layout.custom_info_window, null);          
    }

    @Override
    public View getInfoContents(Marker marker) {

        if ( YourClassName.this.marker != null &&
                ClassName.this.marker.isInfoWindowShown() ) {
            YourClassName.this.marker.hideInfoWindow();
            YourClassName.this.marker.showInfoWindow();
        }
        return null;
    }

    @Override
    public View getInfoWindow(final Marker marker) {
        YourClassName.this.marker = marker;

        final String url = markers.get(marker.getId()).getStrProfilePic();
        final ImageView image = ((ImageView) view.findViewById(R.id.badge));

        if ( url != null && !url.equalsIgnoreCase("null")
                && !url.equalsIgnoreCase("")) {
            imageLoader.displayImage(url, image, options, new SimpleImageLoadingListener() {
                @Override
                public void onLoadingComplete(String imageUri, View view,
                        Bitmap loadedImage) {
                    super.onLoadingComplete(imageUri, view, loadedImage);
                    getInfoContents(marker);
                }
            });
        } else {
            image.setImageResource(R.drawable.noimage);
        }

        final String title = marker.getTitle();
        final TextView titleUi = ((TextView) view.findViewById(R.id.title));
        if (title != null) {
            titleUi.setText(title);
        } else {
            titleUi.setText("");
        }

        final String snippet = marker.getSnippet();
        final TextView snippetUi = ((TextView) view.findViewById(R.id.snippet));
        if (snippet != null) {
            snippetUi.setText(snippet);
        } else {
            snippetUi.setText("");
        }

        return view;
    }
} 
```

[检查示例](http://androidfreakers.blogspot.in/2013/08/display-custom-info-window-with.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T13:21:37.047

之后无法更新从信息窗口回调返回的视图。

尝试遵循以下建议：[Maps V2 InfoWindow 中的动态内容](https://stackoverflow.com/questions/15503266/dynamic-contents-in-maps-v2-infowindow/15512984#15512984)

# java - 没有 instanceof 的 Netty.io messageReceived 覆盖

> ID：16144342
> 
> 赞同：0
> 
> 时间：2013-04-22T10:02:47.590
> 
> 标签：java, polymorphism, netty, instanceof, visitor-pattern

在netty中，MessageEvent（消息的包装器）有一个方法Object getMessage()可以从网络中获取真正携带的消息。阅读源代码我注意到他们大量使用**instanceof**运算符在方法之间切换。

但是，有各种各样的消息类型，我想避免这样的方法：

```
public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) throws Exception {
   if (e.getMessage() instanceof MessageType1) {
      ...
   } else if (e.getMessage() instanceof MessageType2) {
      ...
   } ... {
      ...
   } else if (e.getMessage() instanceof MessageTypeN) {
      ...
   } else {
      ctx.sendUpstream(e);
   }
} 
```

利用多态性编写不同的方法会好得多，例如：

```
public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) throws Exception {
   // MessageType implements Message
   if (e.getMessage() instanceof Message) {
      handleMessage(ctx, (Message) e.getMessage());
   } else {
      ctx.sendUpstream(e);
   }
}

void handleMessage(ChannelHandlerContext ctx, MessageType1 m) {
    ...
}

...

void handleMessage(ChannelHandlerContext ctx, MessageTypeN m) {
    ...
} 
```

但由于向下转换的限制，我不能。有没有一种干净的方法可以做到这一点，或者我是否与**instanceof**级联有关？我可以使用 Message 子类型中的 .doSomething() 方法将逻辑带出处理程序，但我想将业务逻辑保留在 netty 管道中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:30:49.303

解决了应用访客模式：

```
public interface Handler {
    void handleMessage(ChannelHandlerContext ctx, MessageType1 m);
    void handleMessage(ChannelHandlerContext ctx, MessageType2 m);
    ...
    void handleMessage(ChannelHandlerContext ctx, MessageTypeN m);
} 
```

然后：

```
@Sharable
public class MessageHandler extends SimpleChannelHandler implements Handler {
   ...
   @Override
   public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) throws Exception {
     if (e.getMessage() instanceof Message) {
        Message m = (Message) e.getMessage();
        m.handleTo(ctx, this);
    } else {
        ctx.sendUpstream(e);
    }
}

@Override
public void handleMessage(ChannelHandlerContext ctx, MessageType1 m) {
    ...
} 
```

和

```
public interface Message {
   /*
    * Will be {
    *    handler.handleMessage(ctx, this);
    * }
    * everywhere.
    */
   void handleTo(ChannelHandlerContext ctx, Handler handler);
} 
```

# c# - 如何以最有效的方式获取惰性列表的计数？

> ID：16144344
> 
> 赞同：5
> 
> 时间：2013-04-22T10:02:51.297
> 
> 标签：c#, asp.net-mvc, entity-framework, entity-framework-4

我在使用 EF 查询时遇到了一些性能问题。

我们基本上有这个：

```
public class Article
{
    public int ID { get; set; }
    public virtual List<Visit> Visits { get; set; }
}
public class Visit
{
    public int? ArticleID { get; set; }
    public DateTime Date { get; set; }
} 
```

现在，我想做：

```
Article a = ...;
vm.Count = a.Visits.Count; 
```

问题是，据我所知，这首先导致整个列表被获取，然后是它的计数。在循环中执行此操作时，会产生性能问题。

我认为这是由于对象“过于具体”，所以我试图将`Visits.Count`调用尽可能地移回存储库（这样我们就可以直接使用 DbContext）。那没有帮助。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:07:06.630

最后我用了另一种方式。

我发现这以不同的方式一遍又一遍地被击中，并且由于域模型的其余部分的设置方式，我做了一些修改：

在我的 VisitRepository 中，我创建了一个新函数 GetArticleIDsWithVisit()，它通过 db.SqlQuery 进行直接 sql 调用，返回一个 Dictionary。该字典被缓存并用于所有需要访问计数的地方。

不是很漂亮，但我已经将它包装在存储库中，所以我认为没关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:50:47.280

假设您的数据上下文有一个 Visits 属性：

```
public class MyDbContext: DbContext
{
    public IDbSet<Article> Articles { get; set; }
    public IDbSet<Visit> Visits { get; set; }
} 
```

你可以这样做：

```
using (var ctx = new MyDbContext())
{
    var count = ctx.Visits.Where(x => x.ArticleID == 123).Count();
} 
```

此外，如果在处理文章时并不总是需要 Visits 集合，您可以将其声明为`IEnumerable<T>`：

```
public class Article
{
    public int ID { get; set; }
    public virtual IEnumerable<Visit> Visits { get; set; }
} 
```

然后依靠延迟加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:18:47.210

我认为性能问题可能在于延迟加载。（但需要查看更多代码）。

在您从 dbcontext 检索文章时尝试包含（a => a.Visits）。

有关 EF 性能的更多信息：[http ://www.asp.net/web-forms/tutorials/continuing-with-ef/maximizing-performance-with-the-entity-framework-in-an-asp-net-web -应用](http://www.asp.net/web-forms/tutorials/continuing-with-ef/maximizing-performance-with-the-entity-framework-in-an-asp-net-web-application)

# php - htaccess 将 .htm 重写为 html 不起作用

> ID：16144345
> 
> 赞同：1
> 
> 时间：2013-04-22T10:02:53.763
> 
> 标签：php, html, .htaccess, mod-rewrite

在我网站的 .htaccess 文件中，我添加了以下规则以将所有扩展名为 .htm 的请求重写为 .html：

```
RewriteRule ^(.*)\.htm$ $1.html [NC] 
```

我网站中的大多数 URL 都已正确重写，但以下 URL 不正确。我不知道为什么这个 URL 没有被重写规则捕获：

```
http://www.mydomain.com/view/186/4-test-limited.htm 
```

任何帮助都感激不尽

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T10:05:15.340

您需要先激活 mod_rewrite。

**尝试：**

```
RewriteEngine on
RewriteBase /
RewriteRule ^(.*)\.htm$ $1.html [R=permanent] 
```

该`R=permanent`标志告诉 Apache 发出永久重定向 301 响应，这是搜索引擎友好的。

此外，网上还有这些很棒的资源：

*   [配置 Apache 的 mod_rewrite 的技巧](http://www.xinsight.ca/blog/tips-for-configuring-apaches-mod_rewrite/)
*   [modrewrite.com](http://www.modrewrite.com)
*   [学习 Apache mod_rewrite：13 个真实示例](http://www.sitepoint.com/apache-mod_rewrite-examples/)

也值得检查：

*   [你应该知道的 10+ 条 Mod_Rewrite 规则](http://www.noupe.com/php/10-mod_rewrite-rules-you-should-know.html)

# php - 使用 CRON 作业执行 PHP 脚本

> ID：16144350
> 
> 赞同：24
> 
> 时间：2013-04-22T10:03:29.080
> 
> 标签：php, automation, cron

我想每天午夜运行一个 PHP 脚本。在研究了如何做到这一点之后，似乎实现这一目标的最佳方法是使用 CRON 作业。

如果我的 php 脚本位于[http://example.com/scripts/scriptExample.php](http://example.com/scripts/scriptExample.php)，有人可以展示这个 CRON 命令的最简单示例吗？

我浏览了很多帖子，但我找不到一个足够简单的例子来学习和构建。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-22T10:11:26.720

Crontab 需要服务器上的完整路径。

```
0 0 * * * php /var/www/vhosts/domain.com/httpdocs/scripts/example.php 
```

这将在每天午夜执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T10:14:37.073

如果您对 linux 服务器具有 sudo 访问权限：- 然后执行以下操作

```
sudo crontab -e 
```

这将在您的服务器上为您打开 cron 选项卡。

接下来是您必须为要执行的文件执行 cron 条目

```
00 00 * * * /usr/local/bin/php "path of the php file which you want to execute" 
```

`00 00 * * *`这将在每天午夜运行你的 cron，意味着在 0 小时和 0 分钟

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T10:11:23.040

所以是这样的：

```
00 * * * * /usr/local/bin/php /home/john/myscript.php 
```

00 * * * * 表示每小时 /usr/local/bin/php - php 主引擎位于 /home/john/myscript.php - 要运行的脚本（物理路径）

您还可以使用 @hourly 特殊键：

```
@hourly /usr/local/bin/php /home/john/myscript.php 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T10:06:36.310

您是否使用公司来托管您的网站？

因为您应该在从那里`c panel`调用的图标中有一个图标，`cron jobs`所以您可以告诉它要执行什么脚本以及何时执行。

# activemq - 如何使用 NMS API 删除/移除 ActiveMQ 订阅者

> ID：16144352
> 
> 赞同：1
> 
> 时间：2013-04-22T10:03:39.450
> 
> 标签：activemq, subscriber, apache-nms

我需要删除/删除我的主题订阅者。我找到了这个[http://activemq.apache.org/manage-durable-subscribers.html](http://activemq.apache.org/manage-durable-subscribers.html)
但是，它对我们来说还不够好。我们要控制移除订阅者的时间，不管有没有消息。此外，我们的程序是用 C# 编写的。所以对我们来说最好的解决方案是 NMS API。

谢谢。

* * *

这是代码，

```
Apache.NMS.ActiveMQ.ConnectionFactory factory = new Apache.NMS.ActiveMQ.ConnectionFactory(m_brokerURI);
m_connection = factory.CreateConnection(username, password);

Apache.NMS.ActiveMQ.Connection con = (Apache.NMS.ActiveMQ.Connection)m_connection;
ISession session = m_connection.CreateSession(AcknowledgementMode.AutoAcknowledge);

try
{
    session.DeleteDurableConsumer(strQueueName);
}
catch (Exception ex)
{
    // log the error message
} 
```

* * *

更新

我们的场景非常简单。

1.  客户端构建了一个队列并订阅了一个主题的消费者。
2.  客户端关闭了连接。
3.  删除服务器端的消费者（如上次更新中的示例代码）

这是通过 jconsole 的 activemq 代理的快照： [jconsole 快照](https://www.dropbox.com/s/veratd4o9eelug0/jconsole.png)

我们想通过以下方法删除订阅者“7B0FD84D-6A2A-4921-967F-92B215E22751”，但总是收到此错误“javax.jms.InvalidDestinationException：不存在持久订阅：7B0FD84D-6A2A-4921-967F-92B215E22751”

```
strSubscriberName = “7B0FD84D-6A2A-4921-967F-92B215E22751”
session.DeleteDurableConsumer(strSubscriberName); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:34:03.613

要从 NMS API 中删除持久订阅，请使用`DeleteDurableConsumer`ISession 中定义的方法。您必须从使用与创建订阅时使用的相同客户端 ID 的连接调用此方法，并且您传递要删除的订阅的名称。如果存在活动订阅者，该方法将失败，但请为该异常做好准备。

在示例代码中，您没有在连接上设置客户端 ID。使用持久订阅时，您必须、必须、必须始终使用相同的客户端 ID 和订阅名称。因此，在您将客户端 ID 设置为与最初创建订阅的连接相同的值之前，您将收到此错误。

# kendo-ui - kendo crud listview 插入后更改模型值

> ID：16144354
> 
> 赞同：1
> 
> 时间：2013-04-22T10:03:48.740
> 
> 标签：kendo-ui

这是我的代码。

```
$(document).ready(function() {

    var kendoWindow_room = $("#window_room");
    kendoWindow_room.hide();

    $("#roombut").on(
            'click',
            function()
            {
                home_id = $("#home_id").val();
                if (home_id) {
                    kendoWindow_room.data("kendoWindow").open();
                    $('.k-window').css({'marginLeft': -$('.k-window').width() / 2});
                    dataSource.read();
                    $("#room_listview_pager .k-link:first").hide();
                    $("#room_listview_pager .k-link:last").hide();

                    $("#room_listview_pager a.k-link").each(function(index) {
                        $(this).addClass("pager_new_icons");
                        $(this).addClass("mortgage");
                    });
                }
            }
    );

    home_datasource = new kendo.data.DataSource({
        transport: {
            read: {
                url: "<?php echo BASE_URL . 'user/get_edit_home_name' ?>",
                dataType: "json"
            }
        }
    });
    room_datasource = new kendo.data.DataSource({
        transport: {
            read: {
                url: "<?php echo BASE_URL . 'common/get_dropdown_entries' ?>",
                dataType: "json",
                data: {thisisfor: "floortype"}
            }
        }
    });

    var crudServiceBaseUrl = "<?php echo BASE_URL . 'user/room_crud_listview_' ?>",
            dataSource = new kendo.data.DataSource({
        transport: {
            read: {
                url: function() {
                    return crudServiceBaseUrl + "read?home_id=" + $("#home_id").val()
                },
                dataType: "json",
                contentType: "application/json"
            },
            update: {
                url: crudServiceBaseUrl + "update",
                dataType: "json",
                type: "POST"
            },
            destroy: {
                url: crudServiceBaseUrl + "destroy",
                dataType: "json",
                type: "POST"
            },
            create: {
                url: crudServiceBaseUrl + "create",
                dataType: "json",
                type: "POST"
            }
        },
        batch: true,
        pageSize: 1,
        schema: {
            model: {
                id: "id",
                fields: {
                    rd_home_id: "rd_home_id",
                    homename: "homename",
                    nickname: "nickname",
                    type: "type",
                    wallcolor: "wallcolor",
                    trimcolor: "trimcolor",
                    floorcolor: "floorcolor",
                    floortype: "floortype",
                    windows: "windows"
                }
            }
        }
    });

    $("#room_listview_pager").kendoPager({
        dataSource: dataSource,
        info: false,
        numeric: false
    });

    var room_listview = $("#room_listview").kendoListView({
        dataSource: dataSource,
        template: kendo.template($("#room_listview_template").html()),
        editTemplate: kendo.template($("#room_editview_template").html())
    }).data("kendoListView");

    // Add Row
    $("#room_add_row").on("click", function(event) {
        event.preventDefault();
        room_listview.add();
    });

    // Delete Row
    $("#room_delete_row").on("click", function(event) {
        event.preventDefault();
        room_listview.remove(room_listview.element.children().first());
        if (dataSource.total() < 1) {
            room_listview.add();
        } else {
            dataSource.read();
        }
    });

    // edit row
    $("#room_edit_row").on("click", function(event) {
        event.preventDefault();
        room_listview.edit(room_listview.element.children().first());
    });

    // save row
    $("#room_save_row").on("click", function(event) {
        event.preventDefault();
        room_listview.save();
    });

    if (!kendoWindow_room.data("kendoWindow")) {
        kendoWindow_room.kendoWindow({
            width: "520px",
            title: "Room Designer"
        });
    }

}); 
```

```
<div style="background-color: #FFFFFF; border: 0; max-width: 90px; float: left;" id="room_listview_pager"></div>
<span style="float: right; margin-top: 4px;">
    <a id="room_add_row" class="k-add" href="#"><img src="<?php echo STATIC_DIR; ?>images/icon7.png" alt="" height="36" width="37"></a>
    <a id="room_delete_row" class="k-delete" href="#"><img src="<?php echo STATIC_DIR; ?>images/icon8.png" alt="" height="36" width="37"></a>
    <a id="room_edit_row" class="k-edit" href="#"><img src="<?php echo STATIC_DIR; ?>images/icon9.png" alt="" height="36" width="37"></a>
    <a id="room_save_row" class="k-insert" href="#"><img src="<?php echo STATIC_DIR; ?>images/icon10.png" alt="" height="36" width="37"></a>
</span><div class="clear"></div> 
```

```
This is the kendo template with id - "room_listview_template"
<div class="product-view k-widget">            
    <dl>    
        <dt>Home</dt>
        <dd>#:homename#</dd>            
        <dt>Nickname</dt>
        <dd>#:nickname#</dd>
        <dt>Type</dt>
        <dd>#:type#</dd>
        <dt>Wall Color</dt>
        <dd>#:wallcolor#</dd>
        <dt>Trim Color</dt>
        <dd>#:trimcolor#</dd>
        <dt>Floor Color</dt>
        <dd>#:floorcolor#</dd>
        <dt>Floor Type</dt>
        <dd>#:floortype#</dd>
        <dt>Windows</dt>
        <dd>#:windows#</dd>
    </dl>
</div>

This is the kendo template with id - "room_editview_template"

<div class="product-view k-widget">            
<dl>
    <dt>Home</dt>
    <dd>
        <select id="home" 
        data-role="dropdownlist" 
        data-text-field="nickname" 
        data-value-field="id"
        data-source="home_datasource" 
        data-bind="value:rd_home_id" 
        name="rd_home_id" 
        required="required" 
        validationMessage="required">
        </select>
        <span data-for="rd_home_id" class="k-invalid-msg"></span>
    </dd>
    <dt>Nickname</dt>
    <dd>
        <input type="text" class="k-textbox" data-bind="value:nickname" name="nickname" required="required" validationMessage="required" />
        <span data-for="nickname" class="k-invalid-msg"></span>
    </dd>
    <dt>Type</dt>
    <dd>
        <input type="text" class="k-textbox" data-bind="value:type" name="type" required="required" min="1" validationMessage="required" />
        <span data-for="type" class="k-invalid-msg"></span>
    </dd>
    <dt>Wall Color</dt>
    <dd>
        <input type="text" class="k-textbox" data-bind="value:wallcolor" name="wallcolor" required="required" validationMessage="required" />
        <span data-for="wallcolor" class="k-invalid-msg"></span>
    </dd>
    <dt>Trim Color</dt>
    <dd>
        <input type="text" class="k-textbox" data-bind="value:trimcolor" name="trimcolor" required="required" validationMessage="required" />
        <span data-for="trimcolor" class="k-invalid-msg"></span>
    </dd>
    <dt>Floor Color</dt>
    <dd>
        <input type="text" class="k-textbox" data-bind="value:floorcolor" name="floorcolor" required="required" validationMessage="required" />
        <span data-for="floorcolor" class="k-invalid-msg"></span>
    </dd>
    <dt>Floor Type</dt>
    <dd>
        <select 
        data-role="dropdownlist" 
        data-text-field="name" 
        data-value-field="value"
        data-source="room_datasource" 
        data-bind="value:floortype" 
        name="floortype" 
        required="required" 
        validationMessage="required">
        </select>
        <span data-for="floortype" class="k-invalid-msg"></span>
    </dd>
    <dt>Windows</dt>
    <dd>
        <input type="text" class="k-textbox" data-bind="value:windows" name="windows" required="required" validationMessage="required" />
        <span data-for="windows" class="k-invalid-msg"></span>
    </dd>
</dl>
</div> 
```

我在 kendowindow 中有一个列表视图，其中包含创建、读取、更新和删除的选项。

它使用一个模板列出记录并使用另一个模板进行编辑。

在字段中，我有一个下拉列表，字段名称为“rd_home_id”，其数据文本字段和数据值字段不同。它将家庭名称显示为选项，每个选项都有其整数值。

插入和更新工作正常，我在服务器端得到整数值。

在阅读时，显然我想显示家庭名称 - 所以，我有字段名称“homename” - 从服务器，我传递了这个值，我可以在列表模板中看到它 - 效果很好。

剩下的唯一问题是 - 在我插入一条记录后，“homename”没有出现 - 它的 null - 所有其他值都显示出来并且是正确的。

如何在插入后立即显示值“homename”？

我知道我可以在调用 listview 的保存函数后立即调用 room_save_row 的 onclick 中数据源的读取函数 - 这将解决问题，但这样做会使验证不起作用。

有没有办法改变模板中呈现的字段的值？

谢谢

刚刚解决了问题

如果插入的记录作为来自服务器的响应（来自创建 URL）发送 - 它会被更新 - 并且该值将反映在列表模板中 - 在我没有从服务器发送任何内容之前。这就是问题所在。

# eclipse-gmf - 使用 PDFCreator 打印 GMF 图无法打开生成的 pdf

> ID：16144356
> 
> 赞同：0
> 
> 时间：2013-04-22T10:03:49.793
> 
> 标签：eclipse-gmf

我已经实现了对一些 GMF 图文件的直接打印。打开图表，打印到文件，然后关闭图表。我面临的问题是以下几点：

```
private static void printDiagrams(IEditorPart editorPart,org.eclipse.gmf.runtime.diagram.ui.printing.internal.util.SWTDiagramPrinter 
            diagramPrinter,String diagName) {

    PrinterData printData = new PrinterData("winspool","PDFCreator");
    if(printData!=null)
    {
        printData.printToFile = true;
        printData.fileName = "D:\\"+diagName+".pdf";
        printData.scope= 0;

        final Printer printer = new Printer(printData);

        diagramPrinter.setPrinter(printer);
        diagramPrinter.setDisplayDPI(Display.getDefault().getDPI());
        diagramPrinter.setFitToPage(true);

        DiagramEditPart dgrmEP = ((DiagramEditor) editorPart).getDiagramEditPart();

        assert dgrmEP != null;

        diagramPrinter.setDiagrams(Collections.singletonList(((DiagramEditor) editorPart).getDiagram()));
        diagramPrinter.run();
        printer.dispose();
} 
```

问题是使用上面的代码我在打开 pdf 文件时收到错误。“ Acrobat Reader 无法打开 ....pdf，因为它不是支持的文件类型或文件已损坏”

还尝试进入睡眠状态，以确保在处理打印机之前完成打印。最后出现同样的错误。

任何提示都是有帮助的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:43:18.677

发现生成的文件根本不是pdf，而是prn文件，打印机在转换为最终输出之前存储的中间文件。创建 prn 文件后，需要转换为所需的格式，在我的情况下为 pdf。

希望这也会对某人有所帮助。干杯。

# c# - 使用 c#5.0 调用异步方法

> ID：16144358
> 
> 赞同：2
> 
> 时间：2013-04-22T10:03:53.303
> 
> 标签：c#, task-parallel-library, async-await, c#-5.0, synchronizationcontext

我使用 C# 5.0 (async/await) 的新异步模式进行了一些测试，但我在理解如何调用异步方法时遇到了问题。

考虑到这段代码：

```
private async Task<string> DownloadAsync()
    {
        progress.ProgressChanged += (s, e) =>
            {
                progressBar1.Value = e.value;
            };

            return await DownloadSomething(myurl, progress);

    }

private async void CallDownloadAsync()
    {
        string text = await DownloadAsync();
        progressBar1.Value = 0;
        label1.Text = "Done!";
    }

private void button4_Click(object sender, EventArgs e)
    {
        CallDownloadAsync();
    } 
```

所以，这段代码工作得很好。当我单击“button4”时，下载任务开始并且我的 ProgressBar 已正确更新。

但是，我想通过删除这样的 CallDownloadAsync() 方法来进一步压缩我的代码：

```
private void button4_Click(object sender, EventArgs e)
    {
        new Action(async () =>
        {
            string result = await Task.Run<string>(() => DownloadAsync());
        }).Invoke();
        label1.Text = "Running...";
    } 
```

所以在这里，我想直接启动一个调用 DownloadAsync 方法的操作，但是当我点击我的 Button4 时，我的**跨线程操作在进度条上无效**。所以我不明白 Action() 和我的 CallDownloadAsync() 方法的调用之间的主要区别是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T11:31:29.090

您可能会发现我的[`async`/`await`介绍](http://blog.stephencleary.com/2012/02/async-and-await.html)很有帮助。特别是，`async`方法不在后台线程上运行；`Task.Run`用于在后台线程上运行某些东西，因此您的代码有所不同。

通常，您应该避免`async void`使用 ，除非您正在编写`async`事件处理程序。像这样：

```
private async void button4_Click(object sender, EventArgs e)
{
    label1.Text = "Running...";
    string result = await DownloadAsync();
    progressBar1.Value = 0;
    label1.Text = "Done!";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T11:11:19.320

不同之处在于，在前一种情况下，您`CallDownloadAsync()`从 UI 线程（上下文）调用。

在后一种情况下，`DownloadAsync()`从启动的任务中调用，该任务通常在由 TPL（任务并行库）创建的 UI 线程或从它创建的线程中创建的不同线程中执行。

在 WPF 中，UI 组件只能由专用的 UI 线程或从其下创建的（其子）线程（即具有相同的 UI 上下文）访问。

# c - 在c中向char添加值？

> ID：16144362
> 
> 赞同：-1
> 
> 时间：2013-04-22T10:04:05.077
> 
> 标签：c, char, unsigned-char

嘿伙计们，所以我有一个`char`，我想给它添加一些整数/双精度数。char 必须是有符号的 char，所以我不能将其设为 int。

```
char var = -55;
printf("Char is %d, add, char is now: %d\n", var, var+2); 
```

该代码有效，但只要我想添加一个分数或其他东西......

```
printf("Char is %d, add, char is now: %d\n", var, var+2/3*2); 
```

它根本没有添加。任何想法为什么？可能与舍入等有关。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:07:06.010

Try this

```
printf("Char is %d, add, char is now: %d\n", var, (int)(var+2/3.0*2)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:06:42.677

尝试做

```
printf("Char is %d, add, char is now: %d\n", var, (int)( var+(2/(double)3)*2 )); 
```

# dynamics-crm-2011 - 从审核详细信息响应中获取实体记录值

> ID：16144368
> 
> 赞同：0
> 
> 时间：2013-04-22T10:04:21.310
> 
> 标签：dynamics-crm-2011, dynamics-crm, dynamics-crm-online

启用了实体审计，我想要删除后的实体记录。所以我试图从审计实体记录中获取它，如下所示：

```
RetrieveAuditDetailsRequest request = new RetrieveAuditDetailsRequest();
request.AuditId = _selectedId;
RetrieveAuditDetailsResponse response = (RetrieveAuditDetailsponse)_orgService.Execute(request);
EntityReference ObjectId = (EntityReference)response.AuditDetail.AuditRecord.Attributes["objectid"];
string ObjectName = ObjectId.LogicalName;
Guid Id = ObjectId.Id;
ColumnSet col = new ColumnSet(true);
Entity ent = _orgService.Retrieve(ObjectName,Id,col); 
```

它抛出错误“预期非空Guid”。仅供参考，我想要这个记录值，因为我想通过再次创建它来恢复/恢复记录。

请帮忙看看有什么问题？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:42:40.577

每当您尝试检索具有空 GUID（Guid.Empty、00000000-0000-0000-0000-000000000000）的内容时，都会引发“预期的非空 Guid”错误。我猜你的 _selectedId 没有设置为实际的 GUID。也许您是从一个 Nullable GUID 设置它并且您正在调用 ValueOrDefault()，这导致它被设置为空 Guid，并在您的请求中失败？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:54:17.183

您正在尝试使用以下代码检索已删除的记录：

```
字符串 ObjectName = ObjectId.LogicalName;
Guid Id = ObjectId.Id;
ColumnSet col = new ColumnSet(true);
实体 ent = _orgService.Retrieve(ObjectName,Id,col);

```

这将失败并出现您收到的错误，因为不存在此类记录（已删除。）与 CRM 4 及更早版本不同，2011 年没有软删除，一旦删除，它就会从数据库中消失。

将其替换为以下代码：

```
RetrieveRecordChangeHistoryRequest retrieveRequest = new RetrieveRecordChangeHistoryRequest();
changeRequest.Target = new EntityReference(ObjectName, Id);

RetrieveRecordChangeHistoryResponse 响应 =
   (RetrieveRecordChangeHistoryResponse)_orgService.Execute(retrieveRequest);

如果（response.AuditDetailCollection ！= null）
{
var auditDetails = response.AuditDetailCollection;

// 做工作
}

```

然后你通过枚举`auditDetails`来获得正确的属性。

[您可以在http://blogs.msdn.com/b/crm/archive/2011/05/23/recover-your-deleted-crm-data-and-recreate-them-using-crm-api.aspx](http://blogs.msdn.com/b/crm/archive/2011/05/23/recover-your-deleted-crm-data-and-recreate-them-using-crm-api.aspx)找到更多信息.

# jquery - jQuery：如何不选择任何元素？

> ID：16144371
> 
> 赞同：0
> 
> 时间：2013-04-22T10:04:27.140
> 
> 标签：jquery, jquery-selectors, identity, empty-list

我想创建一个保证其中没有 DOM 节点的 jQuery 选择。显然，我可以用各种技巧来做到这一点，比如选择一个我知道不存在的 id，但这很糟糕。我该如何习惯性地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:09:07.750

这就是你可以做到这一点的方法 -

```
var empty = $(); 
```

这将创建一个空的 jQuery 对象：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:14:59.827

我从来没有遇到过这种情况，但你可以使用它。

```
$("<div></div>"); 
```

或者

```
var empty = {};

console.log($(empty).attr("id"));

console.log($(empty).text());

console.log($(empty)); 
```

输出：

```
undefined

""

{"0": {}, "add": function (e,t){var n=typeof e=="string"?v(e,t):v.makeA.................. 
```

# mysql - 对 ORDER BY 强制使用索引会更好吗？

> ID：16144373
> 
> 赞同：0
> 
> 时间：2013-04-22T10:04:33.770
> 
> 标签：mysql, indexing, sql-order-by, range, filesort

我目前正在尝试优化 Doctrine 2 在此表上生成的查询：

```
CREATE TABLE `publication` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `global_order` int(11) NOT NULL,
  `title` varchar(63) COLLATE utf8_unicode_ci NOT NULL,
  `slug` varchar(63) COLLATE utf8_unicode_ci NOT NULL,
  `type` varchar(7) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `UNIQ_AF3C6779B12CE9DB` (`global_order`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

查询是

```
SELECT *
FROM publication
WHERE type IN ('article', 'event', 'work')
ORDER BY global_order DESC 
```

`type`是 Doctrine 添加的鉴别器列。尽管该`WHERE`子句`type`始终是其中一个`IN`值，但我无法删除它。

`EXPLAIN`给我看

```
+------+---------------+------+------+-----------------------------+
| type | possible_keys | key  | rows |            Extra            |
+------+---------------+------+------+-----------------------------+
| ALL  | NULL          | NULL |  562 | Using where; Using filesort |
+------+---------------+------+------+-----------------------------+ 
```

（`rows`每次执行查询时都不同）

经过一番阅读，我发现我可以强制使用这样的索引：

```
ALTER TABLE  `publication` DROP INDEX  `UNIQ_AF3C6779B12CE9DB` ,
ADD UNIQUE  `UNIQ_AF3C6779B12CE9DB` (  `global_order` ,  `type` ) 
```

和

```
SELECT *
FROM publication
    FORCE INDEX(UNIQ_AF3C6779B12CE9DB) 
WHERE global_order > 0
    AND type IN ('article', 'event', 'work')
ORDER BY global_order DESC 
```

`WHERE`子句总是没用，但这次给`EXPLAIN`我看

```
+-------+-----------------------+-----------------------+------+-------------+
| type  |     possible_keys     |          key          | rows |    Extra    |
+-------+-----------------------+-----------------------+------+-------------+
| range | UNIQ_AF3C6779B12CE9DB | UNIQ_AF3C6779B12CE9DB |  499 | Using where |
+-------+-----------------------+-----------------------+------+-------------+ 
```

在我看来它更好，但是强制索引似乎并不常见，所以我想知道它对于这样一个简单的查询是否真的有效。

有谁知道执行此查询的更好方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T07:43:39.160

如果您的查询确实是：

```
SELECT *
FROM publication
WHERE type IN ('article', 'event', 'work')
ORDER BY global_order DESC 
```

...并且所有条目（或几乎所有条目）都将匹配 IN 子句，实际上完全没有索引会更好。如果您在限制子句中折腾，那么您想要的索引实际上是 on `global_order`，没有该`type`字段。这样做的原因是，读取索引实际上要花一些钱。

如果您要查找整个表格，则按顺序读取表格并在内存中对其行进行排序将是您最便宜的计划。如果您只需要几行并且大多数都将匹配 where 子句，那么选择最小的索引就可以了。

要了解原因，请想象所涉及的磁盘 IO。

假设您想要整个表没有索引。为此，您读取 data_page1、data_page2、data_page3 等，依次访问涉及的各个磁盘页，直到到达表的末尾。然后，您排序并返回。

如果您想要前 5 行没有索引，您可以像以前一样顺序读取整个表，同时对前 5 行进行堆排序。诚然，对于少数几行，这需要大量的阅读和排序。

现在假设您希望整个表都有一个索引。为此，您依次读取 index_page1、index_page2 等。然后，这会导致您以完全随机的顺序（排序后的行出现在数据中的顺序）访问，比如说，data_page3，然后是 data_page1，然后是 data_page3，然后是 data_page2，等等。所涉及的 IO 使得按顺序读取整个混乱并在内存中对抓包进行分类变得更便宜。

相反，如果您只想要索引表的前 5 行，则使用索引成为正确的策略。在最坏的情况下，您在内存中加载 5 个数据页并继续前进。

顺便说一句，一个好的 SQL 查询计划器将根据数据的碎片程度来决定是否使用索引。如果按顺序获取行意味着在表格中来回缩放，那么优秀的计划者可能会认为不值得使用索引。相反，如果使用相同的索引对表进行集群，则可以保证行是有序的，从而增加了它被使用的可能性。

但是，如果您将同一个查询与另一个表连接起来，并且该表有一个非常有选择性的 where 子句可以使用一个小索引，那么规划器可能会决定实际上更好，例如获取标记为的行的所有 ID `foo`，散列将它们与出版物一起加入，并在内存中对它们进行堆排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:06:37.083

MySQL 尝试确定运行给定查询的最佳方式，并根据它认为最好的方式决定是否使用索引。

它并不总是正确的。有时手动强制查询使用索引更快，有时则不然。

如果您在特定情况下使用样本数据进行一些测试，您应该能够看到哪种方法执行得更快，并坚持使用该方法。

确保考虑到查询缓存以获得准确的性能基准。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T00:44:53.980

强制使用索引很少是最好的答案。一般来说，最好创建和/或优化索引（索引），以便 MySQL 选择使用它们。（优化查询会更好，但我知道你不能在这里这样做。）

当您使用诸如 Doctrine 之类的东西时，您无法优化查询并且索引也无济于事，最好的选择是专注于查询缓存。:-)

# sql - 创建 .csv 输出的过程

> ID：16144380
> 
> 赞同：0
> 
> 时间：2013-04-22T10:04:57.507
> 
> 标签：sql, oracle, plsql

请帮助我创建一个程序，将数据从 oracle 数据库导出到指定路径，因为 .csv 文件从另一个表中获取研究名称。

**询问 ：** `select * from enrollment where study_name = 'FTY67' ;`

我在同一个数据库中有另一个表（研究），其中包含所有研究名称。

有什么方法可以创建从研究表中获取研究名称并重复此过程以创建所有研究的 .csv 文件的程序？

在互联网上阅读了一些文章，但没有找到与此相关的任何内容。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:46:29.597

您应该查看 spool 和 set 命令。由于数据库通常在远程服务器上运行，它无法将文件写入本地计算机。为了实现这一点，你必须在终端中禁用某些特性的地方编写一个 sql，然后将结果假脱机到一个您可以访问的文件中。

这样的事情可能会让你开始：

```
set term off colsep ";" pause off
spool myfile
select * from x;
spool off
exit 
```

有关可与 SET 一起使用的选项的概述，请参阅此处的 oracle 文档：http: [//docs.oracle.com/cd/B19306_01/server.102/b14357/ch12040.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12040.htm)

使用正确的设置命令，您可以创建 CSV 文件。

上述设置命令只是您可能需要的一些命令，但您可能需要其他参数才能使您的 CSV 可用。

最好将其写入 file.sql 并使用 sqlplus 运行它：

```
sqlplus user@db @file 
```

# ruby - Aptana Studio，编写 Ruby：自动完成未完成

> ID：16144381
> 
> 赞同：1
> 
> 时间：2013-04-22T10:04:58.803
> 
> 标签：ruby, autocomplete, aptana

我目前正在研究 Ruby 的一个项目。我已经独立于我的 Eclipse 安装（不是作为插件）下载并安装了 Aptana Studio 3.3.2.20130281546。

我正在使用[why's (poignant) guide to ruby](http://mislav.uniqpath.com/poignant-guide/)​​ 并且已经到了[第 4 章](http://mislav.uniqpath.com/poignant-guide/book/chapter-4.html)。我正在查看数组和散列，尤其是数组内部的散列。我在这个代码示例中：

```
kitty_toys = [
  {:shape => 'sock', :fabric => 'cashmere'},
  {:shape => 'mouse', :fabric => 'calico'},
  {:shape => 'eggroll', :fabric => 'chenille'}
]

kitty_toys.sort_by { |toy| toy[:shape] }.each do |toy|
  puts "Blixy has a #{ toy[:shape] } made of #{ toy[:fabric] }"
end 
```

现在，对于探索 ruby​​ 方法，自动完成是一个非常有用的工具。但是，它似乎没有像我预期的那样工作。上面的排序不是由 Aptana 自动完成的。试图重现这种排序，我做到了

```
kitty_toys. 
```

但是，自动完成提供的内容不会显示使用的方法 sort_by。列出的方法是：

```
abbrev
dclone
pretty_print
pretty_print_cycle
quote
shelljoin
to_csv 
```

代码有问题吗？好像不是职位的问题。在排序之前尝试自动完成并没有显示任何不同。

谢谢你。

# android - 在android中以编程方式获取选择句柄

> ID：16144391
> 
> 赞同：2
> 
> 时间：2013-04-22T10:05:19.503
> 
> 标签：android, selection, handles

在我的应用程序中，我有 EditText 元素，但我像 TextView 一样使用它（它不可编辑）。

我想通过单击某个按钮来选择该字段中的所有文本。我用下一个代码来做

```
Selection.setSelection((Spannable) et.getText(),0, et.getText().length());
et.setSelected(true); 
```

它工作正常并选择了文本，但之后我无法更改选择的结束。如何以编程方式调用选择句柄？

我也阻止了 OnLongClick，因为我只需要复制选项并将其添加到自定义按钮中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:26:35.560

您需要确保在布局文件中`EditText`具有该属性。`android:textIsSelectable="true"`

你也可以做同样的事情 `et.setTextIsSelectable(true);`

但请确保您的应用程序 `minSdkVersion`使用`11`它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:23:09.280

尝试这样的事情

```
 et.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
            int strt=   et.getSelectionStart();
            int end =   et.getSelectionEnd();
                Log.i(" Selectionm",et.getText().toString().substring(strt, end));
                return false;
            }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-26T16:39:43.307

使用 required `android:textIsSelectable="true"`，使用 EditText 或 TextView 作为参数调用以下方法：

 ````
private fun forceSelectionWithHandlesVisible(view: TextView) {
    if (!view.hasSelection()) {
        view.performLongClick()
    }
    if (Build.VERSION.SDK_INT > Build.VERSION_CODES.LOLLIPOP_MR1) {
        // Hack required to make the selection handles visible when focus programmatically
        val event = MotionEvent.obtain(0L, 0L, MotionEvent.ACTION_UP, 0F, 0F, 0)
        with(event) {
            view.onTouchEvent(this)
            recycle()
        }
    }
} 
```` 

为我工作。

# c - MPI error: expected expression before ‘,’ token

> ID：16144396
> 
> 赞同：1
> 
> 时间：2013-04-22T10:05:39.373
> 
> 标签：c, mpi

i have a strange error when using MPI_Send --i get this error when trying to send a portion of a bi-dimensional array (matrix): "MPI_matrixMultiplication.c:68:99: error: expected expression before ‘,’ token". The specific line is the one where i try to send a portion if the matrix: MPI_Send(&a[beginPosition][0],... ); (and as you can see, i have commented the other send and receive related with the matrix.

```
 /////////////////////////////////////////////////////////
// multiplication of 2 matrices, parallelized using MPI //
/////////////////////////////////////////////////////////
#include <stdio.h>
#include <mpi.h>

// must use #define here, and not simply int blahblahblah, because "c" doesnt like ints for array dimension :(
#define matrixARowSize  3       // size of the row for matrix A
#define matrixAColumnSize  3    // size of the column for matrix A
#define matrixBRowSize  3       // size of the row for matrix B
#define matrixBColumnSize  3    // size of the column for matrix B

// tags used for sending/receiving data:
#define LOWER_BOUND 1   // first line to be processed
#define UPPER_BOUND 2   // last line to be processed
#define DATA        // data to be processed

int a[matrixARowSize][matrixAColumnSize];       // matrix a
int b[matrixBRowSize][matrixBColumnSize];       // matrix b
int c[matrixARowSize][matrixBColumnSize];       // matrix c
int main()
{
    int currentProcess; // current process
    int worldSize;      // world size
    int i, j, k;        // iterators
    int rowsComputedPerProcess;     // how many rows of the first matrix should be computed in each process
    int numberOfSlaveProcesses;     // the number of slave processes
    int processesUsed;      //how many processes of the available ones are actually used

    MPI_Init(NULL, NULL);       // MPI_Init()
    MPI_Comm_size(MPI_COMM_WORLD, &worldSize);      // get the world size
    MPI_Comm_rank(MPI_COMM_WORLD, &currentProcess);     // get current process

    numberOfSlaveProcesses = worldSize - 1;     // 0 is the master, rest are slaves
    rowsComputedPerProcess = worldSize > matrixARowSize ? 1 : (matrixARowSize/numberOfSlaveProcesses);
    processesUsed = worldSize > matrixARowSize ? matrixARowSize : numberOfSlaveProcesses;

    /*
     * in the first process (the father);
     * initialize the 2 matrices, then start splitting the data to the slave processes
     */ 
    if (!currentProcess)        // in father process
    {
        printf("rows per process: %d\n", rowsComputedPerProcess);
        printf("nr of processes used: %d\n", processesUsed);
        // init matrix A
        for(i = 0; i < matrixARowSize; ++i)
            for(j = 0; j < matrixAColumnSize; ++j){
                a[i][j] = i + j + 1;
                // printf("%d\n", a[i][j]);
                // printf("%d\n", *(a[i] + j));
            }

        // init matrix B
        for(i = 0; i < matrixBRowSize; ++i)
            for(j = 0; j < matrixBColumnSize; ++j)
                b[i][j] = i + j + 1;

        // start sending data to the slaves for them to work >:)
        int beginPosition;  // auxiliary values used for sending the offsets to slaves
        int endPosition;
        for(i = 1; i < processesUsed; ++i)      // the last process is dealt with separately
        {
            beginPosition = (i - 1)*rowsComputedPerProcess;
            endPosition = i*rowsComputedPerProcess;
            MPI_Send(&beginPosition, 1, MPI_INT, i, LOWER_BOUND, MPI_COMM_WORLD);
            MPI_Send(&endPosition, 1, MPI_INT, i, UPPER_BOUND, MPI_COMM_WORLD);
            MPI_Send(&a[beginPosition][0], ((endPosition - beginPosition)*matrixARowSize), MPI_INT, i, DATA, MPI_COMM_WORLD);
            // MPI_Send(a[beginPosition], (endPosition - beginPosition)*matrixARowSize, MPI_INT, i, DATA, MPI_COMM_WORLD);
            // for(j = beginPosition; j < endPosition; ++j)
            //  for (k = 0; k < matrixAColumnSize; ++k)
            //  {
            //      printf("%d ", *(a[j] + k));

            //  }
            // printf("\n");
            // printf("beg: %d, end: %d\n", beginPosition, endPosition);
            // printf(" data #%d\n", (endPosition - beginPosition)*matrixARowSize);
        }

        // deal with last process
        beginPosition = (i - 1)*rowsComputedPerProcess;
        endPosition = matrixARowSize;
        MPI_Send(&beginPosition, 1, MPI_INT, i, LOWER_BOUND, MPI_COMM_WORLD);
        MPI_Send(&endPosition, 1, MPI_INT, i, UPPER_BOUND, MPI_COMM_WORLD);
        // MPI_Send(a[beginPosition], (endPosition - beginPosition)*matrixARowSize, MPI_INT, i, DATA, MPI_COMM_WORLD);
        // printf("beg: %d, end: %d\n", beginPosition, endPosition);
        // printf(" data #%d\n", (endPosition - beginPosition)*matrixARowSize);
    }
    else {      // if this is a slave (rank > 0)
        int beginPosition;  // auxiliary values used for sending the offsets to slaves
        int endPosition;

        MPI_Recv(&beginPosition, 1, MPI_INT, 0, LOWER_BOUND, MPI_COMM_WORLD, MPI_STATUS_IGNORE);
        MPI_Recv(&endPosition, 1, MPI_INT, 0, UPPER_BOUND, MPI_COMM_WORLD, MPI_STATUS_IGNORE);
        // MPI_Recv(a[beginPosition], (endPosition - beginPosition)*matrixARowSize, 0, DATA, MPI_COMM_WORLD, MPI_STATUS_IGNORE);

        for(i  = beginPosition; i < endPosition; ++i) {
            for (j = 0; j < matrixAColumnSize; ++j)
                printf("(# %d, i=%d, j=%d: %d ", currentProcess, i, j, a[i][j]);
            // printf("\n");
        }

    }

    MPI_Finalize();
    return 0;       // bye-bye
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:16:36.083

Your `DATA` constant is empty.

```
#define DATA        // data to be processed 
```

So you're trying to do :

```
MPI_Send(&a[beginPosition][0], ((endPosition - beginPosition)*matrixARowSize), MPI_INT, i, , MPI_COMM_WORLD); 
```

Which logically generates an `expected expression before ',' token` error.

# java - 用正则表达式“.*”替换字符串会返回替换两次

> ID：16144397
> 
> 赞同：7
> 
> 时间：2013-04-22T10:05:40.503
> 
> 标签：java, regex

鉴于此代码：

```
String replaced = "A".replaceAll(".*", "HI"); 
```

为什么`replaced`包含字符串`HIHI`而不是`HI`我猜的？`^.*`自从使用模式yield以来，它似乎与行首有关`HI`，但我不明白这是为什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T10:12:31.037

查看replaceAll javadoc：用给定的替换替换这个字符串中与给定正则表达式匹配的每个子字符串。这匹配两个子字符串：“”和“A”。你可以通过测试看到这一点

```
String replaced = "".replaceAll( ".*", "HI" ); 
```

这会导致打印单个“HI”

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T10:18:22.553

我*认为*这是因为`.*`首先匹配整个字符串，然后匹配字符串末尾的空字符串。当然，`^.*`不会匹配 "A" 末尾的空字符串，所以你最终只有一个 "HI"。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:31:45.573

Matcher类的find方法找到“A”和“A”后面的一个空String，所以有2个替换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T11:01:08.140

该`replaceAll`方法采用正则表达式和替换参数（[阅读更多](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)）：-

```
public String replaceAll(String regex,
                         String replacement) 
```

在这个例子`.*`中代表正则表达式。

`.`表示任何字符（可能匹配也可能不匹配行终止符）

`*`表示零次或多次（[阅读更多正则表达式](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#sum)）

您给定代码的输出是正确的。正则表达式与`*` 均值匹配零次或多次。它会影响结果。

```
String replaced = "A".replaceAll(".*", "HI"); 
```

输出：- HIHI

希望它会帮助你。

# android - 每个活动中的侧边栏

> ID：16144399
> 
> 赞同：0
> 
> 时间：2013-04-22T10:05:42.060
> 
> 标签：android, android-layout, android-activity

对于我正在设计的应用程序，我们必须处理用户的一些“特殊”需求。其中之一是创建一个必须出现在几乎所有活动中的导航侧边栏。

此导航栏必须始终包含链接到三个活动的相同三个按钮：HOME、INFO、CONFIGURATION。

这三个活动中的每一个都可以加载可以（或不能）包含此导航栏的其他活动。这些按钮中的每一个都必须重置当前的活动堆栈状态，从而将用户选择的相应活动置于顶部。

导航栏必须是可定制的（可见/不可见），我还想停用一些按钮。

**编辑：**它必须类似于抽屉，但按钮必须是高度可定制的（在大小和外观上）并且它必须始终打开（没有滑动功能）。

如果不手动在我的每个布局中包含这些按钮，最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:12:27.447

您可以手动创建此布局，但只能在`ActivityBase`课堂上创建一次。其他活动可以扩展这个基类。

**编辑：**

正如我所说，我正在改进我的答案。所以我的想法是创建一个`Activity`带有菜单的菜单。如果其他`Activity`人需要相同的菜单，它可以扩展它`ActivityBase`并添加它自己的布局。让我们看一个简单的例子。

`ActivityBase`布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <RelativeLayout
        android:id="@+id/menu"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:background="@android:color/black" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:text="Button" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/button1"
            android:layout_centerHorizontal="true"
            android:text="Button" />

        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/button2"
            android:layout_alignBottom="@+id/button2"
            android:layout_alignParentRight="true"
            android:text="Button" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/container"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/menu" >
    </RelativeLayout>

</RelativeLayout> 
```

如您所见，我创建了一个简单的布局，其中包含**菜单栏**和一个用于将要扩展的活动的布局**容器**`AcivityBase`。

现在`ActivityBase`：

```
public class ActivityBase extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_base);
    }

} 
```

这是一个简单的`Activity`，但如果你愿意，你也可以在这里放置菜单事件处理，如果它们对于将扩展它的所有活动都是相同的。

现在让我们看看`SecondActivity's`布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10" >

        <requestFocus />
    </EditText>

</LinearLayout> 
```

这是一个正常的布局，没什么特别的。为了这个例子，我放了一些控件。

和`SecondActivity`类：

```
public class SecondActivity extends MainActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        LayoutInflater inflater = getLayoutInflater();

        inflater.inflate(R.layout.second_activity, (ViewGroup) findViewById(R.id.container));
    }

} 
```

它扩展`ActivityBase`并且什么是重要的 - 它**不**调用`setContentView`. 相反，我们正在创建并且我们在我们在布局中创建的布局`LayoutInflater`中膨胀。`second_activity``container``activity_base`

# c - 在 Makefile 中从 Makefile 读取变量

> ID：16144408
> 
> 赞同：4
> 
> 时间：2013-04-22T10:06:09.630
> 
> 标签：c, makefile

我的工作文件夹的树：

```
.
|-- work_folder1
|    |-- some.c file
|    |-- Makefile B
|
|-- some.c file
|-- Makefile A 
```

我的makefile A 在Makefile B 中调用'all' 规则。Makefile B 的'all' 规则生成一个名为'Bo' [$(NAME) variable] 的.o 文件并将其复制到工作文件夹(cp ../)。Makefile A 编译.c 文件并将它们与“Bo”链接。但是，如果我决定更改 Makefile B 中“Bo”的名称，例如“my_B.o”，则 Makefile A 无法编译，因为“Bo”不再存在。

如何从 Makefile A 读取 Makefile B 的 $(NAME) 变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T10:19:15.377

您可以在 Makefile B 中添加一个特殊`.PHONY`规则，以便它输出您想要的名称。

在 Makefile B

```
.PHONY: get_names

get_names:
    @echo "B.o" 
```

在 Makefile A

```
B_Files:=$(shell $(MAKE) -C work_folder_B get_names)

# You can use $(B_Files) that will contain `B.o`. 
```

请注意`:=`Makefile A 中的使用，以便您`make`只运行一次以获取名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:01:27.533

我找到了 ！非常感谢迪迪埃！

在我的 Makefile B 中：

```
$(NAME): my_B.o

PHONY: get_name

get_name:
    @echo $(NAME) 
```

在我的 Makefile A 中：

```
B_Files:=$(shell make -s -C work_folder_B get_name) 
```

# database-design - 在 Cassandra 列族中定义数据类型

> ID：16144412
> 
> 赞同：0
> 
> 时间：2013-04-22T10:06:19.693
> 
> 标签：database-design, nosql, cassandra

```
create column family testing
  with key_validation_class = 'SomeType1'
  and comparator = 'SomeType2'
  and default_validation_class = 'SomeType3' 
```

这些在这一行中代表什么。

```
set testing[a][b] = c 
```

我的观点正确吗？

```
a is of type SomeType1 
SomeType2 is how columns are sorted / sliced.
c is of type SomeType3 
```

我的目标是创建一个包含时间序列数据的商店

```
testing[a][b] = c;
a is of type 'String' or 'UTF8Type'
b is 'LongType'
c is 'FloatType' 
```

我应该能够做到

```
set testing['stats.randomNumber'][123456789] = 0.56;
set testing['stats.randomNumber'][123456790] = 90.33; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:24:21.227

在您的 cassandra-cli 语句中`set testing[a][b] = c`

`a`代表你的行键

`b`代表您的列名

`c`代表您的列值

有关 cassandra-cli 的进一步说明，请参阅[Cassandra 文档](http://wiki.apache.org/cassandra/CassandraCli)

# java - Play Framework 2.1.1 不调用 mockito。

> ID：16144413
> 
> 赞同：0
> 
> 时间：2013-04-22T10:06:20.287
> 
> 标签：java, mocking, playframework-2.0, mockito

我正在尝试模拟 Model.finder 来测试我的服务，但似乎由于某种原因没有注入 mockito，我不知道为什么。请帮忙。

```
public static Result deals() {
    List<Product> finder = new Model.Finder<Long, Product>(Long.class, Product.class).all();
    JsonNode jsonNode = Json.toJson(finder);

    return ok(Json.stringify(jsonNode));
} 
```

这是我的测试

```
@Mock
    private Model.Finder finder;

    @Before
    public void setUp() throws Exception {
        initMocks(this);
        start(fakeApplication());

        Product product = new Product();
        product.id = 1L;
        product.title = "Milk";

        List<Product> products = Arrays.asList(product);

        when(finder.all()).thenReturn(products);

    }

    @Test
    public void shouldGetDeals() {
        Result result = routeAndCall(fakeRequest(GET, "/products"));
        assertThat(status(result), is(200));

        String deals = contentAsString(result);

        assertThat(deals, containsString("Milk"));
    } 
```

所以，结果是 Model.Finder 返回 0 因为模拟没有被调用。我不确定这是否是您在 Play 2.1 中模拟的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:27:00.060

您的`deals()`方法是制作一个新的`Finder`，而不是使用您创建的模拟。您将需要稍微重构您的代码，以使其更具可测试性。您可能想阅读[https://code.google.com/p/mockito/wiki/MockingObjectCreation](https://code.google.com/p/mockito/wiki/MockingObjectCreation)以了解有关如何执行此操作的一些想法。

# javascript - 在 Javascript 中动态创建选项元素

> ID：16144415
> 
> 赞同：21
> 
> 时间：2013-04-22T10:06:27.510
> 
> 标签：javascript, createelement, html-select

Javascript 中动态创建 DOM 选项元素的首选方式是什么？我发现了在实际代码中使用的 Option 构造函数和 createElement 变体，如下所示：

```
var option = new Option(text, value); 
```

还有这个：

```
var option = document.createElement('option');
option.text = text;
option.value = value; 
```

这些方法是否有任何缺点/兼容性问题？此外，由于某些原因，是否有任何其他方法可以动态创建比上述更受欢迎的选项？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T10:11:36.820

我所知道的两种方法之间没有区别。使用`Option`构造函数可以方便地设置选项的值和文本，但您可以使用`value`和`text`属性来做同样的事情。

可能有`innerHTML`办法，但是 IE8 和更早版本在这方面失败了......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-12T16:25:24.783

例如，我注意到在 IE9 下使用 new Option() 不能很好地工作，而它在 IE10 和 IE11 中工作。我最近回到原始代码并恢复有人使用 document.createElement('option') 返回所做的更改，以便 IE9 正常工作。

# php - Database Design | PHP-Mysql | JSON

> ID：16144420
> 
> 赞同：1
> 
> 时间：2013-04-22T10:06:36.643
> 
> 标签：php, mysql, json, report

I am developing an application using F3 in which report generation is a sub-app. Now i have the reports in the form of json data which will be large.

Problem is that, JSON data is in multiple levels and difficult to define schema for it.

Now, any suggestion on how i should store the JSON, as file? or in mysql database as blob or text?

Note: I would JSON data only to generate report (PDF, Excel etc) . I never modify it.

Thank you, Sash.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:53:56.030

Ok, if you're going to be using that JSON data as read-only material, to build PDF's then it sort of depends on a number of things:

*   How many JSON formatted objects are we talking about? Storing them stringified isn't that much of a problem (as the question I marked as duplicate states). Of course, if we're talking about thousands of JSON strings, you'll need to index that table (those tables) and that requires either a unique id that's unrelated to the actual data, or parsing the string, and using some properties you could use to query.

*   You say the JSON-objects are fairly large (because you're talking about TEXT/BLOB fields) which can hold up to 65k characters... Are you sure you're going to be using even half that amount of chars, 20% of the time?? It does feel like overkill to me, to be honest

*   How variable is the JSON's structure? does one object consist of a simple JS-style object literal while the other one is a 7-level-deep nested object? If all objects share a certain structure, you're probably going to be better of building a schema.

*   I don't know if you're comfortable with it, or it's an option in your case, but since you're not going to be writing to that table too often, and it's al JSON formatted, why not look into another DB system? It's been a while, but I have worked with [mongoDB](http://www.mongodb.org/) which could be useful to you.

Recap: If you only have, say, ~10 JSON objects: just store them in a simple table as VARCHARS (or TEXT), add an id field if needs must. If you can, a simple file will do, too, of course. No need to connect to a MySQL server, no need for all that overhead just `file_get_contents('JSON_DATA1.json');` can do the trick. Of course, take safety precautions where needed.
If you have tons of objects, build a MySQL schema... unless the objects have *truly* no similarities as far as format goes (no similar properties @ the same level)
Do take a look at alternatives like mongoDB and, perhaps, other NoSQL DB's. They might be of use to you. Mongo, for example, stores its data in JSON-style documents and is quite easy to work with because of it's JavaScript-like interface.

# ruby-on-rails - 如何在创建操作中捕获用户以发送消息？

> ID：16144429
> 
> 赞同：0
> 
> 时间：2013-04-22T10:06:57.537
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我想实现用户 A 可以向用户 B 发送消息的功能。假设用户 A 正在查看用户 B 的个人资料并单击发送消息链接，我如何确保只有用户 B 会收到消息。换句话说，在创建操作中如何捕获用户 B？我能够在新操作中捕获用户 B，但不能在创建操作中捕获。这是我到目前为止所拥有的：

```
class MessagesController < ApplicationController

  def new
      @message = Message.new
      @recipient = User.find_by_identifier!(params[:id])
  end

  def create
      @message = Message.new(params[:message])
      @message.recipient = @recipient
      @message.sender = current_user
      if @message.save
        flash[:notice] = "Message has been sent"
        redirect_to messages_path(:mailbox=>:sent)
      else
        render :action => :new
      end
  end
end 
```

因此，发送消息链接传入用户 B 的参数以执行新操作。因此`@recipient`，在新操作中是用户 B，我能够显示用户 B 的姓名和图片。但`@recipient`在创建动作中为零。如何确保创建操作中的@recipient 是用户 B？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:17:59.787

控制器中的实例变量仅适用于一个请求 -在请求期间`@recipient`不再设置。`new``create`

所以再看一遍！确保`:id`它仍然存在于您的 HTTP 参数中，然后执行`@message.recipient = User.find(params[:id])`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:18:10.457

在提交消息表单中添加一个隐藏字段，即收件人用户 ID。

在您的表格中：

```
<%= f.hidden_field :recipient_id, :value => @recipient.id %> 
```

这样，您的参数将拥有收件人，您将使用收件人信息创建新消息。

它还取决于您创建操作的路线是什么。如果您`recepient_id`在路线中有可用的，只需像在操作中一样再次使用它`new`。

# python - Django：直接从 request.POST["item"] 处理数据的风险

> ID：16144431
> 
> 赞同：2
> 
> 时间：2013-04-22T10:06:59.363
> 
> 标签：python, django, security, django-models, django-forms

有时我有一个逻辑有点复杂的表单，并且需要验证而不仅仅是类型检查或正则表达式，所以我最终直接从 处理数据`request.POST['item']`，例如：

*   `datetime.strptime(request.POST['item'], FORMAT)`
*   `MyModel.objects.filter(name=request.POST['item2']`

据我所知，第一个示例在最坏的情况下会抛出异常，因此没有安全问题，而对于第二个示例，Django ORM 会阻止 SQLi。那是对的吗？

我在 URLConf 中也有正则表达式，所以我想在 views.py 中处理从 URL 获取的数据是安全的，因为 URLConf 已经使用正则表达式对其进行了验证，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:21:50.587

是的。如果这些情况不安全，它们将是安全问题，如果发现会迅速修补。

# sql - Summing cost by id that appears on multiple rows

> ID：16144438
> 
> 赞同：2
> 
> 时间：2013-04-22T10:07:19.143
> 
> 标签：sql, postgresql

**SOLUTION**

I solved it by simple doing the following.

```
SELECT table_size, sum(cost) as total_cost, sum(num_players) as num_players
FROM
(
  SELECT table_size, cost, sum(tp.uid) as num_players
  FROM tournament as t
  LEFT JOIN takes_part AS tp ON tp.tid = t.tid
  LEFT JOIN users as u on u.uid = tp.tid
  JOIN attributes as a on a.aid = t.attrId
  GROUP BY t.tid
) as res
GROUP BY table_size 
```

I wasn't sure it would work, what with the other aggregate functions that I had to use in my real sql, but it seems to be working ok. There may be problems in the future if I want to do other kind of calculations, for instance do a COUNT(DISTINCT tp.uid) over all tournaments. Still, in this case that is not all that important so I am satisfied for now. Thank you all for your help.

**UPDATE!!!** Here is a Fiddle that explains the problem: [http://www.sqlfiddle.com/#!2/e03ff/7](http://www.sqlfiddle.com/#!2/e03ff/7)

I want to get:

```
table_size  |  cost
-------------------------------
5           |  110
8           |   80 
```

**OLD POST**

I'm sure that there is an easy solution to this that I'm just not seeing, but I can't seem to find a solution to it anywhere. What I'm trying to do is the following:

I need to sum 'costs' per tournament in a system. For other reasons, I've had to join with lots of other tables, making the same cost appear on multiple rows, like so:

```
id | name | cost | (hidden_id)
-----------------------------
0  | Abc  | 100  | 1
1  | ASD  | 100  | 1
2  | Das  | 100  | 1
3  | Ads  |  50  | 2
4  | Ads  |  50  | 2
5  | Fsd  |   0  | 3
6  | Ads  |   0  | 3
7  | Dsa  |   0  | 3 
```

The costs in the table above are linked to an id value that is not necessary selected in by the SQL (this depends on what the user decides at runtime). What I want to get, is the sum 100+50+0 = 150\. Of course, if I just use SUM(cost) I will get a different answer. I tried using SUM(cost)/COUNT(*)*COUNT(tourney_ids) but this only gives correct result under certain circumstances. A (very) simple form of query looks like this:

```
SELECT SUM(cost) as tot_cost -- This will not work as it sums all rows where the sum appears.
FROM t
JOIN ta ON t.attr_id = ta.toaid
JOIN tr ON tr.toid = t.toid  -- This row will cause multiple rows with same cost
GROUP BY *selected by user*  -- This row enables the user to group by several attributes, such as weekday, hour or ids of different kinds. 
```

UPDATE. A more correct SQL-query, perhaps:

```
SELECT
*some way to sum cost*
FROM tournament AS t
JOIN attribute AS ta ON t.attr_id = ta.toaid
JOIN registration AS tr ON tr.tourneyId = t.tourneyId
INNER JOIN pokerstuff as ga ON ta.game_attr_id = ga.gameId
LEFT JOIN people AS p ON p.userId = tr.userId
LEFT JOIN parttaking AS jlt ON (jlt.tourneyId = t.tourneyId AND tr.userId = jlt.userId)
LEFT JOIN (
    SELECT t.tourneyId,
    ta.a - (ta.b) - sum(c)*ta.cost AS cost
    FROM tournament as t
    JOIN attribute as ta ON (t.attr_id = ta.toaid)
    JOIN registration tr ON (tr.tourneyId = t.tourneyId)
    GROUP BY t.tourneyId, ta.b, ta.a
) as o on t.tourneyId = o.tourneyId
AND whereConditions
GROUP BY groupBySql 
```

**Description of the tables**

*   tournament (tourneyId, name, attributeId)
*   attributes (attributeId, ..., gameid)
*   registration (userId, tourneyId, ...)
*   pokerstuff(gameid,...)
*   people(userId,...)
*   parttaking(userId, tourneyId,...)

Let's assume that we have the following (cost is actually calculated in a subquery, but since it's tied to tournament, I will treat it as an attribute here):

tournament:

```
tourneyId | name         | cost
1         | MyTournament |  50
2         | MyTournament |  80 
```

and

```
userId | tourneyId
1      | 1
2      | 1
3      | 1
4      | 1
1      | 2
4      | 2 
```

The problem is rather simple. I need to be able to get the sum of the costs of the tournaments without counting a tournament more than once. The sum (and all other aggregates) will be dynamically grouped by the user.

A big problem is that many solutions that I've tried (such as SUM OVER...) would require that I group by certain attributes, and that I cannot do. The group by-clause must be completely decided by the user. The sum of the cost should sum over any group-by attributes, the only problem is of course the multiple rows in which the sum appears.

Do anyone of you have any good hints on what can be done?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:17:16.417

尝试以下操作：

```
select *selected by user*, sum(case rownum when 1 then a.cost end)
from
(
    select
        *selected by user*, cost,
        row_number() over (partition by t.tid) as rownum
    FROM t
    JOIN ta ON t.attr_id = ta.toaid
    JOIN tr ON tr.toid = t.toid
) a
group by *selected by user* 
```

row_number 用于对具有相同锦标赛行的每一行进行编号。在对成本求和时，我们只考虑那些 rownum 为 1 的行。所有其他行在成本方面都是这一行的副本。

* * *

就小提琴而言：

```
select table_size, sum(case rownum when 1 then a.cost end)
from
(
  SELECT
      table_size, cost,
      row_number() over (partition by t.tid) as rownum
  FROM tournament as t
  LEFT JOIN takes_part AS tp ON tp.tid = t.tid
  LEFT JOIN users as u on u.uid = tp.tid
  JOIN attributes as a on a.aid = t.attrId
) a
group by table_size 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:44:36.453

由于每次重复成本都是相同的，因此您可以通过隐藏 id 对它们进行平均并执行以下操作：

```
WITH MrTable AS (
  SELECT DISTINCT hidden_id, AVG(cost) OVER (PARTITION BY hidden_id) AS cost
  FROM stuff
)
SELECT SUM(cost) FROM MrTable; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:07:38.780

（更新）鉴于当前返回的成本是每次锦标赛的总成本，您可以在内部选择的每一行上包含成本的小数值，这样所有这些值的总和就等于总成本（允许事实上，每个给定锦标赛的值可能会出现多次），然后在您的外部选择中将分数成本相加，如下所示：

```
select table_size, sum(frac_cost) as agg_cost from
(SELECT a.table_size , cost / count(*) over (partition by t.tid) as frac_cost
 FROM tournament as t
 LEFT JOIN takes_part AS tp ON tp.tid = t.tid
 LEFT JOIN users as u on u.uid = tp.uid
 JOIN attributes as a on a.aid = t.attrId) sq
GROUP BY table_size 
```

SQLFiddle[在这里](http://www.sqlfiddle.com/#!1/e03ff/15)。

# sublimetext - 崇高的文本：将符号添加到新的语言定义（语法突出显示）

> ID：16144443
> 
> 赞同：4
> 
> 时间：2013-04-22T10:07:26.147
> 
> 标签：sublimetext, cadence

我在 sublime text 2 中为一种稍微不熟悉的语言（Cadence SKILL）编写了语法高亮。

它的工作就像一个魅力，但是我想念 CTRL + R 的功能，它以一种易于访问的方式定位当前文件中的所有符号（函数）。

谁能建议如何告诉 Sublime Text 在哪里寻找函数（过程）声明的模式？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T17:31:33.263

看看`Default/Symbol List.tmPreferences`。您可以创建此首选项文件并指定要包含在符号列表中的范围。您可能还想查看`Java/Symbol List <some specifier>.tmPreferences`特定语言符号列表的示例。或者，您可以确保要包含的内容具有范围`entity.name.function`或`entity.name.type`.

**编辑**

您将需要查看您的配色方案文件。这些文件是 Plist，因此您可能希望使用[PlistJsonConverter](https://github.com/facelessuser/PlistJsonConverter)之类的东西来使其更具可读性（尽管这更多是个人喜好）。在此文件中，您将看到许多字典条目。这些条目的关键之一是范围。当找到您的语言定义所定义的匹配范围时。您还将看到一个“设置”键，它定义了有关颜色、字体样式等的详细信息。由于您需要不同的颜色，因此您需要应用不同的范围。您将需要定义一个自定义符号列表首选项文件，以便正确包含所有内容。以下来自Java包。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>name</key>
    <string>Symbol List: Classes</string>
    <key>scope</key>
    <string>source.java meta.class meta.class.identifier</string>
    <key>settings</key>
    <dict>
        <key>showInSymbolList</key>
        <integer>1</integer>
    </dict>
    <key>uuid</key>
    <string>22E489AE-989E-4A76-9C18-89944CF5013D</string>
</dict>
</plist> 
```

您将定义要应用于列表中的条目的任何范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T10:46:50.077

我自己也为Cadence Skill制作了一个。你可以在这里试试

[https://github.com/noisyass2/SublimeCadenceSkill](https://github.com/noisyass2/SublimeCadenceSkill)

# jdbc - Edit JDBC connection string in Saiku

> ID：16144444
> 
> 赞同：2
> 
> 时间：2013-04-22T10:07:29.940
> 
> 标签：jdbc, olap, pentaho, mondrian, saiku

I am using Microsoft SQL Server as database for my web application. I'd like to use Saiku as part of the application. I found the solution to set up the JDBC connection string as below:

```
type=OLAP
name=foodmart
driver=mondrian.olap4j.MondrianOlap4jDriver

location=jdbc:mondrian:Jdbc=jdbc:sqlserver://localhost:1433;databaseName=foodmart;Catalog=res:warehouses/FoodMart.xml;JdbcDrivers=com.microsoft.sqlserver.jdbc.SQLServerDriver; username=sa
password=XXXX 
```

Anyway, I don't know which file in the package I downloaded (Saiku Server 2.4 (Including Foodmart DB)) is for changing the connection string as I mentioned.

Please help. Thank you in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-04T15:52:04.277

如果其他人有同样的问题，我想我会分享我的解决方案，因为我在其他任何地方都找不到任何 Saiku 特定的答案。

挣扎了几个小时后，收到错误“com.microsoft.sqlserver.jdbc.SQLServerException: Invalid object name 'TableName'.”，我发现了正确的方法，或者至少是对我有用的方法，以指定数据库名称，是将 jdbc 前缀添加到 databaseName 参数。

这是我的工作示例：

```
type=OLAP
name=foodmart
driver=mondrian.olap4j.MondrianOlap4jDriver
location=jdbc:mondrian:Jdbc=jdbc:sqlserver://localhost:1433;jdbc.databaseName=foodmart;Catalog=res:foodmart/FoodMart.xml;JdbcDrivers=com.microsoft.sqlserver.jdbc.SQLServerDriver;
username=sa
password=sa 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:35:47.080

只需使用谷歌：

[http://docs.analytical-labs.com/DataSources.html](http://docs.analytical-labs.com/DataSources.html)

仅供参考，如果您使用 Freenode 上的 IRC 频道 ##saiku 或 ask.analytical-labs.com，您可能会在 Saiku 问题上得到更快的回复

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-09T15:39:50.197

解决方案是 migueletes 花费数小时试图找到解决方案。我的问题是尝试包含 instanceName 参数以将集线器连接到集群 mssql 并且实际上必须将参数 jdbc.instanceName 添加到它被考虑在内，否则省略该参数。

[https://groups.google.com/a/saiku.meteorite.bi/forum/#!topic/user/q9_5OG6_wrw](https://groups.google.com/a/saiku.meteorite.bi/forum/#!topic/user/q9_5OG6_wrw)

# mysql - 找出 MySQL 在 Mac OS X 上的安装位置

> ID：16144450
> 
> 赞同：85
> 
> 时间：2013-04-22T10:08:02.340
> 
> 标签：mysql, macos

如何找出 MySQL 在 Mac OS X 10.7.9 上的安装位置？我安装了 MAMP，所以我认为它与此安装捆绑在一起？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-04-22T10:10:34.880

要检查 MAMP 的 MySQL 版本，请在终端中使用以下命令：

```
/Applications/MAMP/Library/bin/mysql --version 
```

假设您已经启动 MAMP 。

示例输出：

```
./mysql  Ver 14.14 Distrib 5.1.44, for apple-darwin8.11.1 (i386) using  EditLine wrapper 
```

**更新：**此外，如果您想查找 mysql 在系统中的安装位置，请使用以下命令：

```
type -a mysql 
```

`type -a`相当于 OS X bash shell 中的 tclsh 内置命令`where`。如果找到 MySQL，它将显示：

```
mysql is /usr/bin/mysql 
```

如果没有找到，它会显示：

```
-bash: type: mysql: not found 
```

默认情况下，MySQL 未安装在 Mac OS X 中。

**旁注：**对于 XAMPP，命令应该是：

```
/Applications/XAMPP/xamppfiles/bin/mysql --version 
```

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2014-03-19T17:01:55.887

**`/usr/local/mysql`**如果您使用 mysql 二进制文件或 dmg 将其安装在您的系统上而不是使用 MAMP，它将在

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-04-22T10:20:40.900

如果您`SHOW VARIABLES`从*mysql 控制台*运行，则可以查找**basedir**。

当我运行以下命令时：

```
mysql> SHOW VARIABLES WHERE `Variable_name` = 'basedir'; 
```

在我的系统上，我得到`/usr/local/mysql`了返回的值。（我没有使用 MAMP - 我用[homebrew](http://mxcl.github.io/homebrew/)安装了 MySQL 。

`mysqld`在我的机器上，`/usr/local/mysql/bin`所以 basedir 是安装大多数东西的地方。

还有实用程序：

```
mysql> SHOW VARIABLES WHERE `Variable_name` = 'datadir'; 
```

查找数据库的存储位置。

更多信息： http: [//dev.mysql.com/doc/refman/5.0/en/show-variables.html](http://dev.mysql.com/doc/refman/5.0/en/show-variables.html)

和 [http://dev.mysql.com/doc/refman/5.0/en/server-options.html#option_mysqld_basedir](http://dev.mysql.com/doc/refman/5.0/en/server-options.html#option_mysqld_basedir)

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-12-16T20:35:11.757

如果你在终端中使用 DMG 下载了 mySQL（最简单的下载方式在这里[http://dev.mysql.com/downloads/mysql/](http://dev.mysql.com/downloads/mysql/)），请尝试：`cd /usr/local/`

当您键入时，`ls`您应该看到 mysql-YOUR-VERSION。您还将看到安装目录 mysql。

来源： http: [//geeksww.com/tutorials/database_management_systems/mysql/installation/how_to_download_and_install_mysql_on_mac_os_x.php](http://geeksww.com/tutorials/database_management_systems/mysql/installation/how_to_download_and_install_mysql_on_mac_os_x.php)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-03-31T01:25:38.600

如果你已经安装了 dmg，你也可以进入 Mac 的“系统偏好设置”菜单，点击“MySql”，然后在配置选项卡上查看所有 MySql 目录的位置。

参考：[https ://dev.mysql.com/doc/refman/8.0/en/osx-installation-prefpane.html](https://dev.mysql.com/doc/refman/8.0/en/osx-installation-prefpane.html)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-10-16T09:44:13.007

对我来说，它安装在**/usr/local/opt**

我用于安装的命令是**brew install mysql@5.6**

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-07-04T09:44:35.260

或使用旧的“查找”。例如，为了查找旧的 mysql v5.7：

```
cd /
find . type -d -name "mysql@5.7" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-15T09:03:28.570

对我来说，我能够在路径“/opt/homebrew/etc”中获得位置

我已经使用自制软件安装了 mysql。

如果您无法获得确切的路径，请启动 mysql 服务器 -> mysql.server start

然后运行 ​​mysql -v 检查版本，它将带你进入 mysql。运行 SHOW VARIABLES WHERE `Variable_name`= 'basedir'。导航到路径“/opt/homebrew/etc”

# node.js - 带有额外选项或参数的 Mocha 测试

> ID：16144455
> 
> 赞同：92
> 
> 时间：2013-04-22T10:08:11.220
> 
> 标签：node.js, mocha.js

我正在使用 Mocha 为我的 Node.js 应用程序编写测试用例。测试用例需要一个 API 密钥作为额外的输入选项或参数。API 密钥是私有的，所以我不想将它直接包含在测试文件中，因为每个人都可以在 GitHub 上看到它。我知道 Mocha 有一些可用的选项：

[http://mochajs.org/#usage](http://mochajs.org/#usage)

但是是否可以包含一些参数让测试人员在命令行中为测试指定自己的 API 密钥？如：

```
./node_modules/mocha/bin/mocha test/*.js --key YOUR_KEY 
```

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-04-22T10:36:51.407

我认为 Mocha 本身不支持将额外参数传递给您的测试，但您可以使用环境变量：

```
env KEY=YOUR_KEY mocha test/*.js # assumes some sort of Unix-type OS. 
```

并在您的测试文件中阅读它们：

```
var key = process.env.KEY; 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2016-01-23T00:12:17.580

传递类似于此线程中提到的 process.argv[index] 方法的参数的最简单方法之一是使用 npm 配置变量。这使您可以更清楚地看到变量名称：

**测试命令：**

```
npm --somevariable=myvalue run mytest 
```

**包.json：**

```
"scripts": {
"mytest": "mocha ./test.js" } 
```

**测试.js**

```
console.log(process.env.npm_config_somevariable) // should evaluate to "myvalue" 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2013-04-22T15:04:14.450

看看 Substack 的[optimist](https://github.com/substack/node-optimist)模块和[flatiron](https://github.com/flatiron/nconf.git)的 nconf 。我的很多测试都依赖于外部参数，而 optimist 和 nconf 模块可以轻松地从 json 文件加载配置选项

在您的测试命令中，将路径传递给 config.json 文件

## 测试命令

```
mocha test/api-test.js --config=/path/to/config.json --reporter spec 
```

## api-test.js

```
var path = require('path')
var fs = require('fs')
var assert = require('assert')
var argv = require('optimist').demand('config').argv
var configFilePath = argv.config
assert.ok(fs.existsSync(configFilePath), 'config file not found at path: ' + configFilePath)
var config = require('nconf').env().argv().file({file: configFilePath})
var apiConfig = config.get('api')
var apiKey = apiConfig.key 
```

## 配置文件

```
{
  "api": {
    "key": "fooKey",
    "host": "example.com",
    "port": 9000
  }
} 
```

* * *

# 选择

我最近使用的另一种模式是[配置](https://npmjs.org/package/config)模块。您可以指定一个`./config/default.yml`用于定期运行的`./config/test.yml`文件和一个用于测试的文件。

运行测试套件时，导出 NODE_ENV=test 并加载配置模块`test.yml`

在您的代码中很容易访问配置对象

```
var config = require('config')

// config now contains your actual configuration values as determined by the process.env.NODE_ENV
var apiKey = config.api.key 
```

设置 NODE_ENV=test 的一种简单方法是使用 makefile 运行测试。通过运行所有测试`make test`。运行单个测试执行`make one NAME=test/unit/sample-test.js`

## 示例生成文件

```
MOCHA?=node_modules/.bin/mocha
REPORTER?=spec
GROWL?=--growl
FLAGS=$(GROWL) --reporter $(REPORTER) --colors --bail

test:
        @NODE_ENV="test" \
        $(MOCHA) $(shell find test -name "*-test.js") $(FLAGS)

one:
        @NODE_ENV="test" \
        $(MOCHA) $(NAME) $(FLAGS)

unit:
        @NODE_ENV="test" \
        $(MOCHA) $(shell find test/unit -name "*-test.js") $(FLAGS)

integration:
        @NODE_ENV="test" \
        $(MOCHA) $(shell find test/integration -name "*-test.js") $(FLAGS)

acceptance:
        @NODE_ENV="test" \
        $(MOCHA) $(shell find test/acceptance -name "*-test.js") $(FLAGS)

.PHONY: test 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2017-01-26T13:32:51.493

其他答案的局限性在于它们不支持在运行测试套件之前执行代码。它们只支持传递参数。

**此答案支持在您的测试套件执行之前执行代码，并由 mocha 完整记录**

摩卡文档：[http ://unitjs.com/guide/mocha.html#mocha-opts](http://unitjs.com/guide/mocha.html#mocha-opts)

创建 ./test/mocha.opts

```
--recursive
--reporter spec
--require ./server.bootstrap
--require ./test/test.bootstrap 
```

创建 ./server.bootstrap.js

```
global.appRoot = require('app-root-path');
// any more server init code 
```

创建 ./test/test.bootstrap.js

```
process.env.NODE_ENV='test';
// any more test specific init code 
```

最后在你的 server.js 中：

```
require('./server.bootstrap'); 
```

完毕！

服务器引导程序中的代码将在测试和服务器执行之前执行（npm start 和 npm test）

测试引导程序中的代码只会在测试之前执行（npm test）

感谢@damianfabian 提供的这个 - 请参阅[如何在单元测试运行中初始化全局变量？](https://stackoverflow.com/questions/41874060/how-to-initialise-a-global-variable-in-unit-test-runs/41875048#41875048)

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2013-04-22T10:36:25.830

没有受支持的方式来使用 Mocha 执行此操作。建议的方法是使用一个文件（例如 config.json），要求它，然后让其他人更改它。

话虽如此，如果您在命令行末尾（在要测试的文件之后）传递您的密钥并使用 - 它应该可以使用 process.argv （如果您不使用 - 或者它不在常规文件之后名称，那么 mocha 将失败）。

如果你运行`./node_modules/mocha/bin/mocha --reporter spec test.js --apiKey=someKey`，并且 test.js 包含代码：

```
var assert = require("assert")
describe("testy", function () {
    it("shouldy", function (done) {
        var value;
        for (var index in process.argv) {
            var str = process.argv[index];
            if (str.indexOf("--apiKey") == 0) {
                value = str.substr(9);
            }
        }
        assert.equal(value,"someKey")
        done();
    })
}) 
```

测试应该通过

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2016-02-11T13:07:16.947

您可以使用“minimist”模块将参数传递给 mocha 测试脚本。安装`npm install minimist`

终端：

```
mocha test.js --config=VALUE 
```

摩卡节点脚本：

```
var argv = require('minimist')(process.argv.slice(2));
console.log('config', argv.config); 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-08-05T16:04:02.723

一种简单的方法，使用包含命令行参数的 process.argv

```
$ mocha  -w test/*.js --KEY=YOUR_VALUE 
```

稍后，您可以`YOUR_VALUE`输入您的代码：

```
let LAST_PARAM = process.argv[process.argv.length-1]

let PARAM_NAME  = LAST_PARAM.split("=")[0].replace("--","")
let PARAM_VALUE = LAST_PARAM.split("=")[1]

console.log("KEY: ", PARAM_VALUE) 
```

查看全部`process.argv`：

```
process.argv.forEach((value, index) => {
        console.log(`process.argv[${index}]: ${value}`);
}) 
```

输出：

```
$ mocha  -w test/*.js --KEY=YOUR_VALUE

KEY:  YOUR_VALUE
process.argv[0]: /usr/local/bin/node
process.argv[1]: /Users/pabloin/.npm-packages/lib/node_modules/mocha/bin/_mocha
process.argv[2]: -w
process.argv[3]: test/tt.js
process.argv[4]: test/tt2.js
process.argv[5]: --KEY=YOUR_VALUE

KEY:  YOUR_VALUE
process.argv[0]: /usr/local/bin/node
process.argv[1]: /Users/pabloin/.npm-packages/lib/node_modules/mocha/bin/_mocha
process.argv[2]: -w
process.argv[3]: test/tt.js
process.argv[4]: test/tt2.js
process.argv[5]: --KEY=YOUR_VALUE 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-01-31T01:07:35.757

我可以发送参数认为 mochaStream (require('spawn-mocha-parallel').mochaStream)。

喜欢：

```
var mochaStream = require('spawn-mocha-parallel').mochaStream;

var mocha = mochaStream({
    env: function(){
        return {yourParam: 'value'}
    }
});

return gulp.src('test/**/*-specs.js', {read: false})
    .pipe(mochaStream)
    .on('error', console.warn.bind(console)); 
```

在 ..spec.js 文件中

```
var yourParam = process.env.yourParam; 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-10-10T14:13:30.417

我一直在阅读很多答案，其中大多数比实际解决方案要复杂。

假设我有`config.yml`or `config.json`。就我而言，它是一个 YAML 文件。

首先，我安装`yamljs`依赖项。它有一个名为`load`.

基本上我做什么：

`const YAML = require('yamljs'); const ymlConfig = YAML.load('./config.yml');`

然后我去：

`process.env.setting1 = ymlConfig.setting1; process.env.setting2 = ymlConfig.setting2;`

当然 - 这一切都在您的测试文件中完成。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-06-12T23:40:58.120

如果您正在使用 Mocha 侧边栏（VS Code 扩展）进行调试/测试，只需输入：

```
{
    "mocha.env": {
        "KEY": "YOUR_KEY",
        "MY_VARIABLE": "MY VALUE"
    }
} 
```

在`.vscode/settings.json`

# xsd - 使用 XJC 编译具有多个模式的 XSD

> ID：16144456
> 
> 赞同：0
> 
> 时间：2013-04-22T10:08:13.577
> 
> 标签：xsd, xjc

我有一个格式的 XSD：

```
<?xml version="1.0" encoding="utf-16"?>
<root>

    <xs:schema --->
      ..
      ..
      </xs:schema>

       <xs:schema -->
      ..
      ..
      </xs:schema -->

       <xs:schema -->
      ..
      ..
      </xs:schema -->

</root> 
```

使用 XJC 编译器在第 1 行“Prolog 中不允许内容”进行编译时会出错。如果我将编码更改为，“ISO-8859-1”

它给出了以下错误：

```
[ERROR] Unexpected <root> appears at line 2 column 10
  line 2 of ****.xsd Failed to parse a schema. 
```

如果我从 XSD 中删除“根”标签，它会开始给出以下错误：

```
 [ERROR] The markup in the document following the root element must be well-formed.
  line 44 of file:****.xsd 
```

无法解析架构。

我的问题是我们是否可以使用 XJC 编译具有多个模式标记的 XSD。我曾尝试使用以下文件格式：

```
 <?xml version="1.0" encoding="ISO-8859-1" ?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

<xs:element name="shiporder">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="abc" type="xs:string"/>
      <xs:element name="cdf">
      /xs:element>

    </xs:sequence>
    <xs:attribute name="orderid" type="xs:string" use="required"/>
  </xs:complexType>
</xs:element>

</xs:schema> 
```

它对上述情况非常有效，可以适当地创建类。

它与命名空间声明有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:18:03.697

原则上，XSD 规范允许在同一个 XML 文档中包含多个 xs:schema 元素，因此您尝试做的事情并非不合理。在实践中，很多 XSD 软件（可能是大多数 XSD 软件）都没有为 xs:schema 元素不是 XML 文档中最外层元素的模式文档做好准备，即使软件确实支持其他情况，不同的程序也不t 总是就如何表现达成一致。

请参阅[此 Stack Overflow 问题](https://stackoverflow.com/questions/12514361/is-it-possible-to-flatten-an-xml-schema-package-in-only-one-xsd-file)以进行进一步讨论，包括来自误导方的激烈争论，即根本没有 XSD 软件支持您描述的那种输入。

使用 XJC，您最好的选择似乎是将每个 xs:schema 元素放在单独的 XML 文档中，并使用 (a) 单个驱动程序文件依次导入或包含它们中的每一个，或者 (b) 将它们全部放在相同的目录和手XJC的目录名称；它将扫描目录中的模式文件并编译它们。您也可以使用该`-wsdl`选项做一些事情。

# qt - 在 QListWidget 上使用模型/视图

> ID：16144457
> 
> 赞同：0
> 
> 时间：2013-04-22T10:08:14.727
> 
> 标签：qt

是的你是对的。我们已经有了 QListView，当我们尝试使用模型/视图显示简单列表时，它是完美的。

但是，当我们需要显示带有富文本和小部件的复杂列表时，QListView 有很多问题。想想 Facebook 或 Twitter 的时间线列表视图。

当然，我们可以为富文本或图像实现自己的委托，但**ListView 只能打印静态项目**。因此，没有办法显示可点击的超链接（您可以计算鼠标和超链接的位置，但这是一项非常枯燥的工作）或加载异步图像。

好吧，QListWidget 似乎是我们的解决方案。我们可以将小部件放入其中。但。**我们将失去我们的模型/视图/委托架构**，这太可怕了！

现在，我的解决方案是用 QML 编写我的列表视图。其他小部件仍然是原生 Qt 小部件。（我不喜欢非原生的纯 QML 用户界面。）

QML 在做这类工作时非常灵活。然后导出我的模型，最后在我的 QMainWindow 中放一个查看器。但是用两种编程语言进行编码并尝试与其他本地小部件进行通信确实很困难。

那么，有没有办法将 Qt 的模型/视图架构与 QListWidget 一起使用？还是我必须自己实现它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:50:47.153

`QListWidget` [确实使用 Qt 的 MVC](http://qt-project.org/doc/qt-4.8/qlistwidget.html#details)，因为它源自`QListView`和...

> QListWidget 使用内部模型来管理列表中的每个 QListWidgetItem。

只需用于`QListWidget::model () const`访问模型。

# javascript - 如何动态地为 phonegap-android 实现 SWIPE VIEW？

> ID：16144459
> 
> 赞同：1
> 
> 时间：2013-04-22T10:08:21.177
> 
> 标签：javascript, jquery, cordova, iscroll, swipeview

我的目标是做一个手机gap-android项目。

我想在电话间隙中实现滑动视图**（如在带有页面控制器的 android 中）**，但最好使用 Java 脚本。

我看到有很多选择，例如

[锤子](http://eightmedia.github.io/hammer.js/)、[zepto](http://zeptojs.com/#Touch%20events)、[jquerysloution](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)、[quo](http://quojs.tapquo.com/)和[iScroll](https://github.com/ccoenraets/mobile-ui-patterns/tree/master/page-swipe-iscroll)。

**其中哪一个是最好的，还是其他更好的实现？（最好在 java 脚本中）**

我还注意到，对于所有这些，我们需要提供滑动的内容编号，例如第 1 页、第 2 页 ....等。

**如何根据数据库中的内容数量创建滑动视图？

我已经尝试使用 iscroll 实现...

这是scroll.js代码..

```
document.addEventListener("orientationchange", updateLayout);

// The wrapperWidth before orientationChange. Used to identify the current page number in updateLayout();
wrapperWidth = 0;

var myScroll = new iScroll("pageWrapper", {
    snap: true,
    momentum: false,
    hScrollbar: false,
    vScrollbar: false,
        lockDirection: true});

    updateLayout();

    function updateLayout() {

        var currentPage = 0;

        if (wrapperWidth > 0) {
            currentPage = - Math.ceil( $("#swipe_body").position().left / wrapperWidth);
        }

        wrapperWidth = $("#pageWrapper").width();

        $("#swipe_body").css("width", wrapperWidth * 4);
        $(".page").css("width", wrapperWidth - 40);
        myScroll.refresh();
        myScroll.scrollToPage(currentPage, 0, 0);
    }

    page3Scroll = new iScroll("wrapper", {hScrollbar: false, vScrollbar: false, lockDirection: true }); 
```

我从[这里](https://github.com/ccoenraets/mobile-ui-patterns/blob/master/page-swipe-iscroll/iscroll.js)复制了**iscroll.js**

当我运行程序时，我得到一个错误

```
04-22 18:26:01.892: E/Web Console(2453): TypeError: Result of expression 'that.wrapper' [null] is not an object. at file:///android_asset/www/iscroll.js:57 
```

**因为，我遇到了错误，所以我尝试使用 [这里] （[https://github.com/cubiq/SwipeView/blob/master/src/swipeview.js](https://github.com/cubiq/SwipeView/blob/master/src/swipeview.js)）的 SwipeView.js 来实现它，它进入了循环..显示页面控制器，但缺少以下内容**

*   页面控制器被垂直而不是水平看到
*   为滑动视图设置的图像不可见。
*   页面垂直移动而不是水平移动

**我还发现一个 WARNING 作为 Miss a drag ，因为我们正在等待 WebCore 对着陆的响应。**

我尝试添加以下代码...没有变化

```
document.addEventListener( "touchstart", function(e){ onStart(e); }, false );
    function onStart ( touchEvent ) {
      if( navigator.userAgent.match(/Android/i) ) {
       touchEvent.preventDefault();
      }
    } 
```

**有什么补救措施或解决方案吗？**

# xml - 从标题中删除 html (wordpress)

> ID：16144461
> 
> 赞同：0
> 
> 时间：2013-04-22T10:08:24.530
> 
> 标签：xml, title

我使用产品的导入插件，从 xml 文件（通过 url）导入的产品，一个 xml 文件的标题中有这个字符串：

```
< product_title >
< ![CDATA[
< font color=red >All cities:< /font > Lorem Ipsum is simply dummy text of the printing and typesetting industry. !
]] >
< /product_title > 
```

从我的标题中删除它的功能是什么：（`< font color=red > .. < /font >`
它按原样显示，没有编码）

非常感谢，斯塔西斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:26:08.160

您可以[`strip_tags()`](http://php.net/manual/en/function.strip-tags.php)在 PHP 中使用。

```
<title><?php echo strip_tags($title); ?></title> 
```

* * *

```
<h1 class="page-title"> <?php if (strlen($btp_title) > 160) { $btp_title = substr($btp_title, 0, 160).'...'; } echo esc_html( $btp_title ); ?> </h1> 
```

会成为

```
<h1 class="page-title"> <?php if (strlen($btp_title) > 160) { $btp_title = substr($btp_title, 0, 160).'...'; } echo strip_tags( esc_html( $btp_title ) ); ?> </h1> 
```

# php - 使用单例模式获取 last_insert_id

> ID：16144470
> 
> 赞同：1
> 
> 时间：2013-04-22T10:08:43.537
> 
> 标签：php, oop, singleton

在数据库连接类上使用单例模式时，我想知道一件事。

据我了解，单例模式阻止创建使用该模式的给定类的超过 1 个对象。

假设我需要我刚刚插入的行中的 id，我通过`mysqli::$insert_id`. 如果连接对象的另一种用法同时用于插入一行，这可能会导致返回与预期不同的 id 的机会，还是肯定总是返回正确的 id？

对于新手问题，我很抱歉，我只是想知道在多用户应用程序上是否有很小的机会以这种方式获取 id 可能不一致。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T10:13:10.267

从 MySQL 开始：

[http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)

> 生成的 ID 在每个连接的基础上维护在服务器中。这意味着函数返回给给定客户端的值是为影响该客户端的 AUTO_INCREMENT 列的最新语句生成的第一个 AUTO_INCREMENT 值。此值不受其他客户端的影响，即使它们生成自己的 AUTO_INCREMENT 值。这种行为确保每个客户端都可以检索自己的 ID，而不用担心其他客户端的活动，也不需要锁或事务。

* * *

让我们进行一些测试：

```
<?php
header('Content-Type: text/plain');

$con1 = new mysqli('localhost', 'root', '1', 'new_schema');
$con2 = new mysqli('localhost', 'root', '1', 'new_schema');

$sql = 'DROP TABLE IF EXISTS `x`';

$con1->query($sql);

$sql = <<<SQL
CREATE TABLE `x`(
    `id` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `value` VARCHAR(20)
)ENGINE=InnoDB;
SQL;

$con1->query($sql);

$sql = <<<SQL
INSERT INTO `x` (`id`, `value`)
VALUES (NULL, NULL);
SQL;

$con1->query($sql);
$con2->query($sql);

echo 'con1 == con2 is ',  $con1 == $con2  ? 'true' : 'false', PHP_EOL;
echo 'con1 === con2 is ', $con1 === $con2 ? 'true' : 'false', PHP_EOL;

echo '1: ', $con1->insert_id, PHP_EOL;
echo '2: ', $con2->insert_id, PHP_EOL;

$con1->close();
$con2->close();
?> 
```

显示：

```
con1 == con2 is true
con1 === con2 is false
1: 1
2: 2 
```

测试对象： `PHP 5.4.5`, `MySQL 5.6.10`.

# python - python 使用从 pip 安装的应用程序运行测试

> ID：16144475
> 
> 赞同：8
> 
> 时间：2013-04-22T10:09:16.790
> 
> 标签：python, ubuntu, pip

对于一些 python 应用程序，如果我手动安装它们，我可以`python setup.py test`在应用程序文件夹中运行以执行测试脚本。但是如果我通过 pip 安装它们，dist-packages 中只有一个 .egg 文件，那么我应该如何运行它们的测试呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-24T00:26:51.903

我在 virtualenv 中执行了以下操作，并且能够运行测试。

```
$ pip install pyelasticsearch
$ pip install nose virtualenv scripttest mock
$ cdsitepackages #virtualenvwrapper shortcut to go to the site-packages directory
$ cd pyelasticsearch/tests
$ nosetests 
```

根据您的站点包目录所在的位置，您可能会将 cdsitepackages 替换为其他内容。正如@thaven 提到的，创建了两个目录——一个是 pyelasticsearch-0.5-py2.7.egg-info/，一个是 pyelasticsearch。如果 pyelasticsearch 包实际上不存在，您将无法导入任何内容。

# jquery - 如何将 jquery 事件与 html5 动力学形状绑定？

> ID：16144478
> 
> 赞同：0
> 
> 时间：2013-04-22T10:09:24.057
> 
> 标签：jquery, html, kineticjs

我有一个 html 5 画布，其中有一个多边形。我想用 jquery 绑定这个多边形。但我不知道该怎么做。

多边形：

```
 var poly = new Kinetic.Polygon({
    points: [37,224,250,296,388,239,391,336,250,416,151,374,150,368,127,360,127,364,37,325],
    fill: 'none',
    stroke: '#000',
    strokeWidth: 0,
    name: 'poly',
    draggable: false,
    id:'skirt'
    }); 
```

查询：

```
 $('what to put here?').droppable({
     function body..................
    }); 
```

希望任何人都可以在这里帮助或纠正我...在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:10:50.580

在画布上绘制的东西不是 DOM 树的一部分（只有画布本身），因此您不能将任何事件绑定到它们。

# mysql - 需要提高sql性能

> ID：16144479
> 
> 赞同：1
> 
> 时间：2013-04-22T10:09:30.457
> 
> 标签：mysql, sql, join

```
Table temporary_search_table
post_id,property_status, property_address,....more 30 field

Table search_meta
meta_id,search_id,status,created_date 
```

好的，我需要 created_date 是昨天的总数据。对于每个temporary_search_table 数据，search_meta 中可能有多个条目。所以我们需要从 search_meta 中选择最后一个字段并检查创建日期是昨天并且 property_status 是待定的。如果是，那么我们可以数一数。如果 search_meta 中没有可用于temporary_search_table 条目的数据，那么我们不需要在结果中计算该行。

在这里，我附上了我的 sql 数据。它的工作，但对于 30000 行它需要很多时间。

```
SELECT COUNT(id) FROM temporary_search_table 
    WHERE property_status = 'pending' AND (1 = (SELECT DATEDIFF(NOW(), created_date) 
    FROM search_meta WHERE post_id = search_id ORDER BY created_date DESC LIMIT 0,1 )) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:19:18.070

除了检查表上的索引之外，最好不要使用相关子查询，而是使用直接连接。

```
SELECT COUNT(id) 
FROM temporary_search_table 
INNER JOIN search_meta ON post_id = search_id
WHERE property_status = 'pending' AND DATEDIFF(NOW(), created_date) = 1
ORDER BY created_date DESC 
LIMIT 1 
```

# video - [通用视频规范]：是否有兼容所有设备的视频规范？

> ID：16144483
> 
> 赞同：0
> 
> 时间：2013-04-22T10:09:35.020
> 
> 标签：video, video-streaming, h.264, video-processing, multimedia

是否有与所有（桌面和移动）设备兼容的视频规范？（特别是在浏览器中）

规格包括`bit rate`，`resolution`等。

# python - 多线程代理更改但一次

> ID：16144486
> 
> 赞同：0
> 
> 时间：2013-04-22T10:09:52.293
> 
> 标签：python, multithreading, locking, tor

假设我有这样的代码：

```
def func1(a,b,c):
    try:
        p = pycurl.Curl()

        p.setopt(pycurl.PROXY, "127.0.0.1")
        p.setopt(pycurl.PROXYPORT, 9050)
        p.setopt(pycurl.PROXYTYPE, pycurl.PROXYTYPE_SOCKS5)

        p.perform()
        p.close()

    except pycurl.error as error:
        if error[0] == 28:   # timeout - change proxy
            print "Tor timeout, need to change"
            queue.put((a,b,c))
            new_tor()
            return

def new_tor():
    # send_signal_for_new_ident_is_here 
```

我在 7 个线程中启动此代码。
当线程收到错误 28 时，它会更改标识。但是碰巧所有 7 个线程都发送信号来更改标识。

如何做到这一点：
如果线程收到错误 28，那么它调用 new_tor() 并且其他 6 个线程不等待结果，然后它们才继续工作。这个怎么同步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:51:33.353

只需将错误“id”放入队列中，如果遇到，将值放回队列中，然后根据需要进行处理。

你不希望结束线程，这就是我所做的。
因此，您可以为每个线程设置一些唯一标识符，这样一旦线程遇到错误，它还会添加表示它之前遇到此错误的数据（它的标识符），以便如果所有线程都遇到此错误，则错误从队列中移除。

代码：

```
import threading
import Queue
y = 0
def f1():
    global y
    y += 1
    if y > 100:
        raise ValueError('trial')
def f2():
    return

class Test(threading.Thread):
    def __init__(self, func, name):
        threading.Thread.__init__(self)
        self.func = func
        self.name = name
    def run(self):
        while True:
            x = ''
            if not queue.empty():
                x = queue.get()
                if x == 'error':
                    queue.put(x)
                    print 'Stopping %s' % (self.name,)
                    return
            try:
                self.func()
            except Exception as e:
                queue.put('error')

queue = Queue.Queue()
thread1 = Test(f1, '1')
thread2 = Test(f2, '2')

thread1.start()
thread2.start() 
```

# javascript - 在 jsf 中使用 javascript 禁用动态上下文菜单

> ID：16144487
> 
> 赞同：1
> 
> 时间：2013-04-22T10:09:58.550
> 
> 标签：javascript, css, jsf-2, primefaces, contextmenu

是否可以使用 java 脚本禁用 JSF2.1 中的动态上下文菜单？

```
document.getElementById("myForm:contextMenuId:contextMenuItemId").style.display = 'none'; 
```

这适用于如下编写的 ap:menuItem。

```
 <p:contextMenu id="contextMenuId">                 
   <p:menuitem id="contextMenuItemId" value="Hi"></p:menuitem>
</p:contextMenu> 
```

我怎样才能对下面写的 p:contextMenu(dynamic) 执行类似的操作

```
<p:contextMenu id="contextMenuId1" model="#{myBean.model}" ></p:contextMenu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:27:51.187

您可以交换 svg `<p:outputPanel`：

```
<h:form>
            <p:outputPanel id="test">
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="190">
                    <polygon points="100,10 40,180 190,60 10,60 160,180"
                             style="fill:lime;stroke:purple;stroke-width:5;fill-rule:evenodd;" />
                </svg>
            </p:outputPanel>
            <p:contextMenu for="test">  
                <p:menuitem value="Save" 
                            icon="ui-icon-disk"/>  
                <p:menuitem value="Update"

                            icon="ui-icon-arrowrefresh-1-w"/>  
                <p:menuitem value="Delete" icon="ui-icon-close"  
                            ajax="false"/>  
                <p:menuitem value="Homepage" url="http://www.primefaces.org"  
                            icon="ui-icon-extlink"/>  
            </p:contextMenu>  
        </h:form> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T13:47:52.327

在我不想呈现自定义 contextMenu 的所有情况下，我通过单击呈现为 false 的新 p:contextMenu 使其工作。（我找不到更好的解决方案，但这应该可以解决问题，直到我找到更好的方法）

# c++ - C++：如何修改类变量？

> ID：16144489
> 
> 赞同：-1
> 
> 时间：2013-04-22T10:10:02.167
> 
> 标签：c++, oop, scope, pass-by-value

来自有关[const 函数的 MSDN 页面](http://msdn.microsoft.com/en-us/library/6ke686zh%28v=vs.80%29.aspx)

编码：

```
 // constant_member_function.cpp
class Date
{
public:
   Date( int mn, int dy, int yr );
   int getMonth() const;     // A read-only function
   void setMonth( int mn );   // A write function; can't be const
private:
   int month;
};

int Date::getMonth() const
{
   return month;        // Doesn't modify anything
}
void Date::setMonth( int mn )
{
   month = mn;          // Modifies data member
}
int main()
{
   Date MyDate( 7, 4, 1998 );
   const Date BirthDate( 1, 18, 1953 );
   MyDate.setMonth( 4 );    // Okay
   BirthDate.getMonth();    // Okay
   BirthDate.setMonth( 4 ); // C2662 Error
} 
```

但是如何`month`在函数中进行修改`setMonth`？该函数按值传递并且不返回任何内容。此外，函数如何知道月份变量以在不传入的情况下对其进行修改？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T10:15:02.453

> 此外，函数如何知道月份变量以在不传入的情况下对其进行修改？

**成员函数**（如`setMonth()`）隐式接收`this`指向`Date`它们被调用的类型（在这种情况下）对象的指针。对于限定为`const`的成员函数，`this`指针是指向 的指针`const`，它不允许您修改指向对象的状态。

事实上，如下：

```
void Date::setMonth( int mn )
{
    month = mn;          // Modifies data member
} 
```

等价于以下内容：

```
void Date::setMonth( int mn )
{
    this->month = mn;          // Modifies data member
//  ^^^^^^
//  "this" is a pointer to an object of type Date (i.e. Date*),
//  and that is the object on which setMonth() is invoked
} 
```

所有其他成员函数的情况相同，因此：

```
int Date::getMonth() const
{
    return month;        // Doesn't modify anything
} 
```

相当于：

```
int Date::getMonth() const
//                   ^^^^^ Means the implicit "this" pointer is const
{
    return this->month;        // Doesn't modify anything
//         ^^^^^^
//         Here, "this" is a pointer to a CONST Date object (i.e. Date const*),
//         and that is the object on which getMonth() is invoked
} 
```

**重要提示：**如果调用成员函数的对象具有-qualified 类型，则隐式`this`指针实际上是一个指针。`const``const`

`const`这就是为什么您不能在类型*为* `const`-qualified的对象上调用本身不是 -qualified 的成员函数：对象*的状态* `const` *永远不应该被改变*，并且非`const`函数不承诺永远不会改变它。

因此，编译器将通过引发错误来阻止您在- 限定类型（例如）的对象上调用非`const`函数（例如）。`Date::setMonth()``const``const Date`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:16:57.870

答案是`const`声明的函数表示该函数不会修改调用该函数的对象。也就是说，如果你这样做：

```
BirthDate.getMonth(); 
```

这没关系，因为 while`BirthDate`是一个`const Date`,`getMonth`被声明`const`，因此保证它不会改变它。

这不起作用的原因：

```
BirthDate.setMonth( 4 ); 
```

是`setMonth`没有声明`const`的，这意味着它不保证它不会改变`BirthDate`，即调用它的对象。

改变的不是输入参数，而是调用函数的对象。在 的情况下`setMonth`，它是`month`您的实例中的变量`Date`被修改。

至于程序如何知道该函数将修改一个对象：它不知道。但是你不能调用一个没有`const`在一个对象上声明的函数`const`。此外，尝试`mutable`在声明的函数中修改（非）成员变量`const`会给您带来编译器错误。因此，编译器确保您不会违背承诺。（当然，有一些邪恶的符合标准的方式偷偷违背这个承诺。但这只是不道德和危险的。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T10:14:22.640

`setMonth`是成员函数。`this`因此，它有一个指向它正在操作的对象的隐式指针。也就是说，特定对象的每个成员变量都在范围内，并且（非常量）成员函数可以修改它们。

重写可能会更清楚`setMonth`，

```
void Date::setMonth( int mn )
{
   this->month = mn;          // Modifies data member
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T10:13:24.497

setMonth 是 Date 类的成员方法，因此可以看到 Date 类的所有成员变量

```
void Date::setMonth( int mn )
{
   month = mn;          // Modifies data member
} 
```

*mn*作为参数传入。这样，无论您作为参数输入什么，都将分配给该类的月份成员变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T10:17:18.310

`MyDate`是`Date`类的对象。每个`Date`对象都有自己的`int month`，因为它被声明了。（即使从您知道`Date`包含 an`int month`但您无法访问它的类外部，因为它是私有的。您也可以使用`this`指针（这是每个类中可用的指针，指向 ist 自己的内存位置）。

setMonth 的代码隐含地执行以下操作：

```
void Date::setMonth( int mn )
{
   (*this).month = mn;          // Modifies data member
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T10:15:17.720

通过定义您的对象，`const`您可以向编译器保证对象的状态不会改变。它保持在创建时的状态。
当调用你的方法`setMonth()`时，你正在改变对象的状态，不管你是通过引用还是通过值。

```
void Date::setMonth( int mn )
{
   month = mn;          // Modifies data member <--- Trying to modify the whole object by changing a part of it
} 
```

# sql - 总结 sql server 2008 中的一些 xml 节点值

> ID：16144494
> 
> 赞同：5
> 
> 时间：2013-04-22T10:10:18.333
> 
> 标签：sql, sql-server, xml, sql-server-2008, xpath

请考虑这个 XML：

```
<Parent ID="p">
    <Child ID="1">10</Child > 
    <Child ID="2">20</Child > 
    <Child ID="3">0</Child > 
</Parent > 
```

我想用 .对节点内的所有子值**求和**。对于上面的例子，我想查询返回`Parent``ID="p"``30`

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T10:35:58.043

```
select @xml.value('sum(/Parent[@ID = "p"]/Child)', 'float') as Sum 
```

的使用`float`防止没有`Parent`那个`ID`。然后，您可以将此结果转换为`int`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T10:16:05.340

试试这个 ：-

```
 Declare @xml xml 
set @xml='<Parent ID="p">
         <Child ID="1">10</Child > 
         <Child ID="2">20</Child > 
         <Child ID="3">0</Child > 
          </Parent >'

 Select @xml.value('sum(/Parent/Child)','int') as Sum 
```

结果 ：`30`

或者如果您想要特定的总和，请`Parent ID`尝试以下查询

```
 Select @xml.value('sum(/Parent/Child)','int') AS SumVal
 where @xml.exist('/Parent[@ID="p"]') = 1; 
```

[SQL FIDDLE](http://sqlfiddle.com/#!3/68aa1/1)中的演示

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T10:22:23.203

试试这个——

```
DECLARE @XML XML
SELECT @XML = '
<Parent ID="p">
    <Child ID="1">10</Child > 
    <Child ID="2">20</Child > 
    <Child ID="3">0</Child > 
</Parent >
<Parent ID="p2">
    <Child ID="1">15</Child > 
    <Child ID="2">20</Child > 
    <Child ID="3">5</Child > 
</Parent >'

SELECT 
      value = SUM(t.value)
    , t.id 
FROM (
    SELECT 
          value = p.value('.', 'INT')
        , id = p.value('./../@ID', 'VARCHAR(50)')
    FROM @XML.nodes('/Parent/Child') t(p)
) t
--WHERE t.id = 'p'
GROUP BY t.id 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T10:28:37.783

试试这个 ：

```
DECLARE @SearchKeyWords XML 

SET @SearchKeyWords =
'<Parent ID=''p''>
    <Child ID="1">10</Child > 
    <Child ID="2">20</Child > 
    <Child ID="3">0</Child > 
</Parent >' 

DECLARE @TempSearchKeyWords TABLE
        (
            SearchKeyWord INT
        )

INSERT INTO @TempSearchKeyWords                     
SELECT SearchKeyWords.SearchKeyword.value('.',' int ') AS SearchKeyword             
FROM @SearchKeyWords.nodes('/Parent/Child') AS SearchKeyWords(SearchKeyword)

SELECT SUM(SearchKeyWord) FROM @TempSearchKeyWords 
```

这将返回 30。

# ios - wordpress 中的 JSON API

> ID：16144504
> 
> 赞同：0
> 
> 时间：2013-04-22T10:10:49.613
> 
> 标签：ios, json, wordpress, login

这是我第一次创建使用 wordpress 作为网络服务器的移动应用程序在移动应用程序上注册或登录？以及如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:38:56.267

我也在寻找解决这个问题的方法。

我目前的想法是一个丑陋的黑客。我会使用用户名和密码向 wp-login.php 发送请求，并检查您是否被重定向离开 wp-login.php，如果是，则在 localStorage 中存储一些内容，告诉应用程序它能够成功登录。

这有点难看，但它可能只是工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T09:02:35.887

您可以使用 wordpress 自定义页面模板为登录用户制作 JSON api。例如：

```
<?php
/*
Template Name: Logged-in users
*/
?>

{
<?php if( is_user_logged_in() ) { ?>
"users": {
"logged-in": "true"
}
<?php } else { ?>
"users": {
"logged-in": "false"
}
<?php } ?>
} 
```

之后，您可以在应用程序中包含 Web 视图，显示 WordPress 网站的登录页面。然后您可以每 10 秒刷新一次 JSON api url 以查看用户是否已登录。当登录的值为 true 时，用户将能够使用该应用程序。您也可以使用此方法通过共享 cookie 为当前登录的用户创建用户特定的 api。希望这可以帮助！

# blackberry - 将我的应用程序分散到黑莓设备

> ID：16144507
> 
> 赞同：3
> 
> 时间：2013-04-22T10:10:53.493
> 
> 标签：blackberry, appworld

无论 bb 版本，将我的应用程序交付到黑莓设备需要哪些步骤？

注意：我的应用程序有 6 个文件 COD。

我可以将这些文件的直接链接发送到 bb 设备并依次单击它们以将我的应用程序下载到 bb 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-11T15:36:31.837

构建应用程序后，将 /OTAInstall 文件夹的内容发布到 Web 服务器上。然后在 BlackBerry 浏览器中加载 *.JAD 文件的 URL，它将提示您下载页面。

注意：您需要在 Web 服务器上为 *.jad 和 *.cod 文件类型设置 MIME 类型。

本教程对此进行了详细说明：[如何为 BlackBerry (Java) Smartphones 部署和分发应用程序](http://supportforums.blackberry.com/t5/Testing-and-Deployment/How-to-Deploy-and-Distribute-Applications/ta-p/442794)。

# jquery - 将所选行克隆并删除到另一个表

> ID：16144508
> 
> 赞同：0
> 
> 时间：2013-04-22T10:10:54.087
> 
> 标签：jquery, html, clone

我正在尝试将选定对象从一个表克隆到另一个表。到目前为止，我正在获取要克隆的所选 td 的 id。以下是我正在尝试的代码。

```
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head>  
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"></script>  
<style type="text/css"> 
    .row-highlight 
    { 
        background-color: Yellow; 
    } 
</style>  
<script type="text/javascript"> 
    $(function() { 
        var message = $('#message'); 
        var tr = $('#tbl,#tbl2').find('tr'); 
        tr.bind('click', function(event) { 
            var values = ''; 
            tr.removeClass('row-highlight'); 
            var tds = $(this).addClass('row-highlight').find('td'); 

            $.each(tds, function(index, item) { 
               values =  item.id; 
            }); 
            message.html(values);  
        }); 
    }); 
</script> 
</head> 
<body> 
<form> 
<table>
<tr>
  <td>  
   <table id="tbl" style="border: solid 1px black"> 
    <tr> 
        <td id="a"> 
            1 
        </td>           
    </tr> 
    <tr> 
        <td id="b"> 
            2 
        </td>              
    </tr> 
    <tr> 
        <td id="c">  
            3 
        </td>             
    </tr> 
   </table> 
 </td>
   <td>
   <table>
    <tr>
<td><input type="button"name="button one" value=">>" onclick=""</td>
    </tr><tr> 
   <td><input type="button" name="button two" value="<<" onclick=""</td>
   </tr>
   </table>
   </td>
  <td>
    <table id="tbl2" style="border: solid 1px black"> 
    <tr> 
        <td>
        </td>             
     </tr> 
    </table>
  </td>
 </tr>
</table>            
<br /> 
<div id="message"> 
</div> 
</form> 
</body> 
</html> 
```

如何从表“tbl”克隆和删除选定的项目到“tbl2”按钮“按钮一”的单击功能，反之亦然单击按钮“按钮二”。提前致谢。////

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T10:22:20.850

只需使用 prepend() 、 append() 方法。这些方法将很好地满足您的目的。

你可以像这样使用它：

```
var row = $(this).closest('tr').html();
$('#otherTable tbody').append('<tr>'+row+'</tr>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:37:56.050

无需明确`.clone()`，以防万一您想到。

您可以通过直接使用`.append()`、`.appendTo()`或`prepend()``prependTo()`

伪代码：

```
$A.appendTo($B);
// or
$B.append($A); 
```

例子：

```
$('tr.highlighted').appendTo( $('#otherTable tbody') ); 
```

反过来也有效：

```
$('#otherTable tbody').append($('tr.highlighted')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T10:27:13.850

prepend() 和 append() 函数应该可以解决问题。我在 js 中尝试过类似场景的另一件事是使用 document.getElementById(tableIDA) 首先获取相关表，然后使用 tableA.insertRow(rowCountA) [其中 rowCountA 是表 A 的行数]，然后是tableA.insertCell() 函数，最后是 cell.appendChild()。它看起来很长，但实际上使用起来非常容易和程序化。可能这将有助于您的目的。

# javascript - Mottie 虚拟键盘，隐藏原生 Android 输入键盘

> ID：16144509
> 
> 赞同：0
> 
> 时间：2013-04-22T10:10:58.173
> 
> 标签：javascript, jquery, css, jquery-mobile

我正在尝试使用 jquery 虚拟键盘 - [http://mottie.github.io/Keyboard/mobile.html](http://mottie.github.io/Keyboard/mobile.html)为移动 Web 应用程序创建一个仅带有几个加速键的数字输入文本。

但是，我遇到了一个巨大的问题，即当我按下输入框触发屏幕/虚拟键盘时，会触发原生 android 键盘。如何只触发虚拟键盘，其他插件也可以。我测试了一些都有相同问题的。

也许有一种方法可以禁用输入字段，这样它就不会触发本机键盘但仍会触发屏幕键盘？使输入“只读”有一些问题。

我和其他用户有同样的问题：[https](https://stackoverflow.com/questions/15289281/disable-mobile-default-keyboard-to-show-up-using-my-own-virtual-keyboard-web-a) ://stackoverflow.com/questions/15289281/disable-mobile-default-keyboard-to-show-up-using-my-own-virtual-keyboard-web-a但是他的问题没有答案。

第一次尝试

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">

    <title>Virtual Keyboard Basic Demo</title>

    <!-- demo -->
    <link href="demo/demo.css" rel="stylesheet">

    <!-- jQuery & jQuery UI + theme (required) -->
    <link href="http://code.jquery.com/ui/1.9.0/themes/ui-darkness/jquery-ui.css" rel="stylesheet">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.js"></script>
    <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.min.js"></script>

    <!-- keyboard widget css & script (required) -->
    <link href="css/keyboard.css" rel="stylesheet">
    <script src="js/jquery.keyboard.js"></script>

    <!-- keyboard extensions (optional) -->
    <script src="js/jquery.mousewheel.js"></script>
    <!--
    <script src="js/jquery.keyboard.extension-typing.js"></script>
    <script src="js/jquery.keyboard.extension-autocomplete.js"></script>
    -->

    <!-- initialize keyboard (required) -->
    <script>
        $(function(){
            alert("Keyboard ON");
            //$('#keyboard').keyboard();
            $('#keyboard').on('click tap vclick', function (event) {
                //alert("detected touch");
                event.stopImmediatePropagation();
                event.preventDefault();

                $('#keyboard').keyboard();
            });
        });
    </script>

</head>

<body>

    <!-- Links to other demo pages & docs -->
    <div id="nav">
        <a href="index.html">Main Demo</a>
        <a class="current" href="basic.html">Basic</a>
        <a href="mobile.html">Mobile</a>
        <a href="layouts.html">Layouts</a>
        <a href="navigate.html">Navigate</a>
        <a href="calculator.html">Calculator</a>
        <a class="play" href="http://jsfiddle.net/Mottie/MK947/">Playground</a>
        <a class="git" href="https://github.com/Mottie/Keyboard/wiki">Documentation</a>
        <a class="git" href="http://github.com/Mottie/Keyboard/downloads">Download</a>
        <a class="issue" href="https://github.com/Mottie/Keyboard/issues">Issues</a><br><br>
    </div>
    <!-- End Links -->

    <div id="wrap"> <!-- wrapper only needed to center the input -->

        <!-- keyboard input -->
        <input id="keyboard" type="text">
        <div><p>Static TEST</p></div>

    </div> <!-- End wrapper -->

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:16:38.117

我添加了以下代码，它似乎确实可以工作，但是需要进行更多测试才能使其成为可靠的解决方法：

```
$('.keyboard').on('focus click tap vclick', function (event) {
                event.stopImmediatePropagation();
                event.preventDefault();

                $('.keyboard').blur();
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-29T14:43:56.137

只需使用全局属性`<div inputmode="none">`，它应该有帮助。 [https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/inputmode](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/inputmode)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-09T00:59:54.737

您可以添加`readonly`到`<input>`标签中，这将阻止本机键盘出现。虽然记得为桌面用户删除它，这将需要一些设备检测，这永远不会有趣。

# python - 使用已编译的扩展调试 Python

> ID：16144510
> 
> 赞同：6
> 
> 时间：2013-04-22T10:11:01.907
> 
> 标签：python, debugging, fortran, cython, fortran-iso-c-binding

我将 Python 与已编译的 Cython 和 Fortran 扩展（使用现代 Fortran 的`iso_c_binding`模块和 Cython 包装）一起用于数字运算。

到目前为止，我还没有一个方便的调试策略。我[`pudb`](http://mathema.tician.de/software/pudb)用于 Python 部分。尽管我可能能够在项目的 Cython&Fortran 部分使用 gdb，但我发现自己正在使用控制台文本输出 ( `print()!`)。

我想知道是否有工具可以使不同级别的代码对调试透明，即我正在寻找一种“one-tool-debugs-it-all”的解决方案，它不关心它是否使用 Python， Cython 或 Fortran 代码。

我更喜欢允许用户友好交互的工具，例如前面提到的 pudb。这样的万能调试工具是否存在？[Python模式是`GDB`](http://wiki.python.org/moin/DebuggingWithGdb)我能得到的最好的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-27T16:25:12.963

您可以使用[Cython 调试器](http://docs.cython.org/src/userguide/debugging.html)`gdb`，它使用开头的新命令进行扩展`cy`。`py`这些让您可以单步执行 Cython 代码、设置断点、检查本地变量等，并且当您碰巧在 Python 框架中时，仍然可以像 GDB 的 Python 模式中的命令一样工作。不幸的是，没有 Fortran 支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-17T04:20:16.167

您可以尝试免费 PTVS + 试用 Intel Fortran + 混合模式调试

也可以看看

[http://pytools.codeplex.com/wikipage?title=Mixed-mode%20debugging](http://pytools.codeplex.com/wikipage?title=Mixed-mode%20debugging) [http://pytools.codeplex.com/workitem/1974](http://pytools.codeplex.com/workitem/1974)

# java - 如何使用 JACOB 创建对象

> ID：16144511
> 
> 赞同：3
> 
> 时间：2013-04-22T10:11:02.290
> 
> 标签：java, jacob

我设法加载了两个dll

```
 System.load("C:\\Program Files (x86)\\EXAMPLE Client\\Bin\\EXAMPLE.Client.SDK.dll");
    System.load("C:\\Program Files (x86)\\EXAMPLE Client\\Bin\\EXAMPLE.Common.SDK.dll"); 
```

下一步是创建对象调用`SDKModel`。我该怎么做呢？我试过了：

`ActiveXComponent example = new ActiveXComponent("EXAMPLE.Common.SDK.SDKModel");`

但后来我得到以下异常：

```
Exception in thread "main" com.jacob.com.ComFailException: Can't get object clsid from progid 
```

我不确定我是否走在正确的轨道上。将如何创建对象`SDKModel`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T10:36:55.507

这是因为您没有在系统中注册您的dll。检查`cd`两个代码中的路径

要注册，请遵循 [重要：小心使用**regasm.exe**，因为它与取消注册的文件不同]

```
c:
cd\
cd C:\Windows\Microsoft.NET\Framework64\v2.0.50727 
RegAsm /verbose /nologo /codebase D:\path_to_dll\mydll.dll 
```

要取消注册，请关注

```
c:
cd\
cd C:\Windows\Microsoft.NET\Framework\v2.0.50727
RegAsm.exe /unregister D:\path_to_dll\mydll.dll 
```

* * *

**更新：**

注册/注销使用`C:\Windows\Microsoft.NET\Framework\v2.0.50727`框架..

# python - 当我在其他类中调用方法时出现 AttributeError

> ID：16144513
> 
> 赞同：1
> 
> 时间：2013-04-22T10:11:10.487
> 
> 标签：python

我对 Python 很陌生，我有这样的代码：

```
class Configuration:
 @staticmethod
 def test():
    return "Hello World" 
```

`test`当我像这样从其他 python 代码调用该方法时：

```
import test

test.Configuration.test() 
```

我收到这样的错误：

```
Traceback (most recent call last):
  File "example.py", line 3, in <module>
    test.Configuration.test()
AttributeError: 'module' object has no attribute 'test' 
```

我在哪里犯了错误？

## 编辑：

我的目录结构：

```
root
--example.py
--test
----__init.py__
----Configuration.py 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:27:17.663

Python 模块名称和它们包含的类是*分开*的。您需要使用完整路径：

```
import test

print test.Configuration.Configuration.test() 
```

您的`test`包有一个名为 的模块`Configuration`，该模块*内部*是您的`Configuration`类。

请注意，与 Java 不同，Python 也允许您在类之外定义方法，无需将其设为静态方法。您也不需要为每个班级使用单独的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:19:42.887

尝试将您的模块重命名为“test”以外的名称，因为这是标准库模块的名称（[http://docs.python.org/2/library/test.html](http://docs.python.org/2/library/test.html)），并且您可能正在导入该模块而不是你自己的。另一种选择是将包含测试模块的目录添加到 PYTHONPATH 环境变量中，以便 python 可以找到它而不是标准库模块（但不建议这样做，因为它会隐藏标准模块并且您将无法导入稍后再说）。

要检查您从哪个文件导入，请执行以下操作：

```
import test
print test 
```

# java - 如何从 ArrayList 中获取值

> ID：16144516
> 
> 赞同：-1
> 
> 时间：2013-04-22T10:11:19.587
> 
> 标签：java, arraylist, println

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class clsWarehouse {

private static int iChoice;
private int iItemID;
private String strItemName;
private String strItemDescription;
private int iItemPrice;
private String strSize;
private String strSex;

public clsWarehouse (int id, String name, String description, int price, String size, String sex){
    iItemID = id;
    strItemName = name;
    strItemDescription = description;
    iItemPrice = price;
    strSize = size;
    strSex = sex;   
}

public ArrayList <clsWarehouse> AllItems;
    public clsWarehouse(){
        AllItems = new ArrayList <clsWarehouse>();  
        AllItems.add(new clsWarehouse(3, "T-Shirt", "Male T-Shirt", 30, "15", "Male"));
        System.out.println(AllItems);
    }

public static void main(String[] args){
    clsWarehouse c = new clsWarehouse();
    }
}
 } 
```

您好，我想获取存储在 ArrayList AllItems 中的值，但我得到的只是内存位置 [clsWarehouse@a83b8a]。有人可以帮我弄这个吗。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T10:12:30.900

你需要`toString()`在你的`clsWarehouse`类中覆盖。内部`System.out.println`调用`toString()`列表中对象的 。由于您的类中没有`toString()`覆盖该方法，因此您将得到以下输出。

```
getClass().getName() + '@' + Integer.toHexString(hashCode()) 
```

以上是类的[`toString()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#toString%28%29)实现`Object`。

**更新：-**

在您的`clsWarehouse`课程中，添加以下方法。

```
public String toString(){
    return  "clsWarehouse"; //Modify this to return whatever you want to display in your sysout.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:22:20.410

您需要遍历数组列表以获取值。还需要使用 toString() 将这个家伙转换为字符串格式。然后，

```
 for (int i=0;i<AllItems .length();i++){
 //Then get the values one by one
 } 
```

希望这可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:24:47.403

在 clsWarehouse 类中添加此方法

```
public String toString(){
    return  "iItemID: " + iItemID +" strItemName: "+ strItemName + " strItemDescription: "+ strItemDescription +" iItemPrice  "+ iItemPrice: + " strSize: " + strSize + " strSex: "+strSex; 
} 
```

改变这个

```
System.out.println(AllItems); 
```

至

```
for(clsWarehouse item : AllItems){
     System.out.println(item.toString());
} 
```

# apache - Apache 配置 - 可以按组和个人用户进行身份验证吗？

> ID：16144517
> 
> 赞同：0
> 
> 时间：2013-04-22T10:11:19.830
> 
> 标签：apache, authentication, httpd.conf

我想知道我是否可以合并组和特定用户授权。

我的 httpd.conf 中有类似的内容：

```
 <Directory /path/to/dir>
    AuthType Basic
    AuthName "Private pages"
    AuthBasicProvider file
    AuthUserFile /path/to/dir/.htpasswd
    AuthGroupFile /path/to/dir/.htgroup
    Require user user1 user2 user3
    Require group group1 group2
   </Directory> 
```

然后我从浏览器访问它。我使用 user1，但没有成功，并且在 error_log 中出现错误：

```
 Authorization of user user1 to access /path/to/dir failed, reason: user is not part of the 'require'ed group(s). 
```

我可以做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:31:24.470

是的，但是用户必须同时匹配用户指令和组指令。您应该可以使用

```
Satisfy Any 
```

设置是否只希望组或用户指令匹配

# c# - 插件和宿主应用程序之间的 C# 通信

> ID：16144520
> 
> 赞同：0
> 
> 时间：2013-04-22T10:11:26.590
> 
> 标签：c#, plugins, interface, communication

我正在编写基于插件的应用程序。

主机应用：

```
namespace CSK
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{

    public MainWindow()
    {                  
        InitializeComponent();
        LoadPlugins();

    }

    public void LoadPlugins()
    {
        DirectoryInfo di = new DirectoryInfo("./Plugins");

        foreach (FileInfo fi in di.GetFiles("*_Plugin.dll"))
        {
            Assembly pluginAssembly = Assembly.LoadFrom(fi.FullName);

            foreach (Type pluginType in pluginAssembly.GetExportedTypes())
            {

                if (pluginType.GetInterface(typeof(MainInterface.PluginHostInterface).Name) != null)
                {
                    MainInterface.PluginHostInterface TypeLoadedFromPlugin = (MainInterface.PluginHostInterface)Activator.CreateInstance(pluginType);
                    MainInterface.IMother mother = new ApiMethods(this);
                    TypeLoadedFromPlugin.Initialize(mother);
                }

            }
        }
    }
} 
```

界面：

```
namespace MainInterface
{
public interface PluginHostInterface
{
    void Initialize(IMother mother);
}

public interface IMother
{
    MenuItem addMenuItem(String header, String name);
    MenuItem addSubMenuItem(MenuItem menu, String header, String name);
    Boolean receiveMessage(String message, String from);
    Boolean addContact(String name, String status, String proto, String avatar = "av");
}
} 
```

测试插件：

```
namespace Plugin_Test
{
public class MainClass : MainInterface.PluginHostInterface
{
    private MainInterface.IMother CSK;

    public void Initialize(MainInterface.IMother mainAppHandler)
    {
        CSK = mainAppHandler;

    }

}
} 
```

现在，我想从我的主机应用程序中执行插件测试中的一些方法。当然，会有很多插件，并不是每个插件都包含指定的方法。我试图使用事件但没有成功。知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:27:01.553

带事件的类：

```
public class EventProvidingClass {

    public event EventHandler SomeEvent;

    public void InvokeSomeEvent() {
        if(SomeEvent != null) SomeEvent.Invoke(this, new EventArgs());
    }

} 
```

您的插件界面：

```
public interface PluginHostInterface
{
    void Initialize(IMother mother);
    void InitializeEvents(EventProvidingClass eventProvider);
} 
```

插件类：

```
public class MainClass : MainInterface.PluginHostInterface
{
    private MainInterface.IMother CSK;

    public void Initialize(MainInterface.IMother mainAppHandler)
    {
        CSK = mainAppHandler;
    }

    public void InitializeEvents(EventProvidingClass eventProvider)
    {
        eventProvider.SomeEvent += someEventHandler;
    }

    private void someEventHandler(object sender, EventArgs e)
    {

    }
} 
```

然后在函数之后`InitializeEvents`调用`Initialize`。当然，您可以将事件放在您想要的位置，您只需要确保它们可用于插件，以便插件可以分配其 EventHandlers

# jsp - struts2，jsp项目；显示pdf

> ID：16144526
> 
> 赞同：2
> 
> 时间：2013-04-22T10:11:39.603
> 
> 标签：jsp, struts2, jasper-reports, dynamic-jasper

我尝试在 jsp 页面中显示 pdf 而不将其保存在硬盘中。我能够生成一个 pdf，并通过将其保存在硬盘中对其进行了测试。我使用**DynamicJasper**作为报告引擎。

这是我用于动态碧玉的 strut.xml：

```
<action name="myJasperTest" class="com.via.qcm.view.JasperAction">
  <result name="success" type="dynamic-jasper">
    <param name="dynamicReport">DynamicReport</param>
    <param name="layoutManager">classic</param>
    <param name="parameters">dynamicReportDs</param>
    <param name="documentName">report</param>
    <param name="contentDisposition">application/download</param>
    <param name="format">PDF</param>
  </result> 
```

我正在生成 pdf 并将其保存在`ByteArrayOutputStream()`.

```
baos = new ByteArrayOutputStream();
//export to pdf
Exporter.exportToPdf(jp, baos); 
```

现在我的问题是如何在网页中将这个“baos”显示为 pdf？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:07:47.760

有两个问题：

*   您需要返回一个`DynamicReport`对象，而不是`Byte Array`;
*   dynamicReport 变量必须以`lowercase`字母开头：

在`Struts.xml`

```
 <param name="dynamicReport">dynamicReport</param> 
```

在里面`Action`

```
public DynamicReport getDynamicReport(){
    DynamicReport dynamicReport = null;
    // do all your stuff
    return dynamicReport;
} 
```

# html - JQM 弹出标题太短

> ID：16144532
> 
> 赞同：-2
> 
> 时间：2013-04-22T10:11:51.427
> 
> 标签：html, jquery-mobile

当我将类似`<h1>Confirm deletion for operator named not extremely long</h1>`弹出的内容作为标题放置时，最后在弹出的窗口中我看到截断的标题“确认删除...”。这不是我想在这里看到的。哪个选项负责“按原样”显示标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:45:36.363

您需要覆盖类的样式`ui-title`，例如

```
.ui-title {
 padding-left: 5px !important;
 padding-right: 5px !important;
 margin:5px !important;
 white-space: normal !important;
 font-size: 15px !important;
} 
```

> **[演示](http://jsfiddle.net/Palestinian/p2d6P/)**

# c++ - 传递数组、固定大小数组和数组基地址作为函数参数的区别

> ID：16144535
> 
> 赞同：70
> 
> 时间：2013-04-22T10:11:57.880
> 
> 标签：c++, arrays, pointers

如果我想将已知或未知大小的数组作为函数参数传递，我对使用哪种语法感到困惑。

假设我有这些变体的目的：

```
void func1(char* str) {
    //print str
}

void func2(char str[]) {
    //print str
}

void func3(char str[10]) {
    //print str
} 
```

使用其中每一种的优缺点是什么？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-04-22T10:16:43.023

所有这些变体都是相同的。C 只允许您使用替代拼写，但即使是最后一个用数组大小​​显式注释的变体也会衰减为普通指针。

也就是说，即使使用最后一个实现，您也可以使用*任意*大小的数组调用函数：

```
void func3(char str[10]) { }

func("test"); // Works.
func("let's try something longer"); // Not a single f*ck given. 
```

不用说不应该*使用*它：它可能会给用户一种错误的安全感（“哦，这个函数只接受长度为 10 的数组，所以我不需要自己检查长度”）。

正如 Henrik 所说，*C++*中的正确方法是使用`std::string`,`std::string&`或`std::string const&`（取决于您是否需要修改对象，以及是否要复制）。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-04-22T13:15:20.907

请注意，在 C++ 中，如果数组的长度在编译时已知（例如，如果您传递了一个字符串文字），您实际上可以获得它的大小：

```
template<unsigned int N>
void func(const char(&str)[N])
{
    // Whatever...
}

int main()
{
    func("test"); // Works, N is 5
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-04-22T10:50:56.600

这些在功能上都是相同的。当您将数组传递给 C 中的函数时，数组会隐式转换为指向数组第一个元素的指针。因此，这三个函数将打印相同的输出（即指向 的指针的大小`char`）。

```
void func1(char* str) {
    printf("sizeof str: %zu\n", sizeof str);
}

void func2(char str[]) {
    printf("sizeof str: %zu\n", sizeof str);
}

void func3(char str[10]) {
    printf("sizeof str: %zu\n", sizeof str);
} 
```

此转换仅适用于数组的第一维。A`char[42][13]`转换为 a `char (*)[13]`，*而不是*a `char **`。

```
void func4(char (*str_array)[13]) {
    printf("sizeof str_array: %zu\n"
           "sizeof str_array[0]: %zu\n", sizeof str_array, sizeof str_array[0]);
} 
```

`char (*)[13]`是 的类型`str_array`。`char`这就是您编写“指向 13 s数组的指针”的方式。这也可以写成`void func4(char str_array[42][13]) { ... }`，尽管 42 在功能上没有意义，正如您通过实验看到的那样，将不同大小的数组传递到`func4`.

在 C99 和 C11（但不是 C89 或 C++）中，您可以将指向可变大小数组的指针传递给函数，方法是将其大小连同它一起传递，并将大小标识符包含在`[square brackets]`. 例如：

```
void func5(size_t size, char (*str_array)[size]) {
    printf("sizeof str_array: %zu\n"
           "sizeof str_array[0]: %zu\n", sizeof str_array, sizeof str_array[0]);
} 
```

*这声明了一个指向大小* `char`为s的数组的指针。请注意，您必须先取消引用*指针*，然后才能访问数组。在上面的示例中，`sizeof str_array[0]`计算数组的大小，而不是第一个元素的大小。例如，要访问第 11 个元素，请使用`(*str_array)[11]`or `str_array[0][11]`。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-04-22T10:13:49.817

在 C++ 中，使用`void func4(const std::string& str)`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-22T10:16:54.360

在 C 中，前两个定义是等价的。第三个基本相同，但它给出了关于数组大小的概念。

如果打印`str`是您的意图，那么您可以安全地使用它们中的任何一个。基本上所有三个函数都传递了一个类型的参数`char*`，正是`printf()`需要打印一个字符串的参数。以免你不知道，尽管看起来，在 C 中传递的所有参数都是在`pass-by-value`模式下完成的。

**编辑：**似乎我以后在选择 SO 时必须非常严格。好吧，在第三种情况下，它不知道数组的大小给它传递**给的函数**，因为它最终会减少就像在前两种情况下一样输入`char*`。我的意思是说它有点告诉阅读它的人数组的大小是 10。此外，它在 C 中并没有错/非法。但是对于程序来说，这样做就像没用。它对传递给它的函数的数组大小一无所知。Downvoter 先生，感谢您指出 SO 不容忍随意的态度和疏忽。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-22T10:29:18.383

在一个一维数组中，编译器对它们的处理都是一样的。然而，对于二维或多维数组（例如`myArray[10][10]`），它很有用，因为它可用于确定数组的行/列长度。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-22T11:01:43.713

附加组件，以点为单位进行描述。

1）正如大家所说的一样。

2) 数组在函数参数中传递时会衰减为指针。

3）基本问题可能是在函数中找到数组的大小。为此，我们可以使用类似宏。

```
 #define noOfElements(v) sizeof(v)/sizeof(0[v])

   int arr[100]
   myfunction ( arr, noOfElements(arr)) 
```

宏中可以使用 0[v] 或 v[0]，其中第一个用于避免将用户定义的数据类型传递给 noOfElements。

希望这可以帮助。

# android - 如何控制android中的调用活动

> ID：16144537
> 
> 赞同：0
> 
> 时间：2013-04-22T10:12:00.870
> 
> 标签：android, telephonymanager

我的应用程序需要控制呼叫活动。我使用过 Itelephonyaidl，但它在真实设备中不起作用。我搜索了很多景点，但它们都在使用 ITelephonyaidl。我的问题是如何以编程方式结束与所有版本兼容的调用。我正在使用以下方法中的对象执行结束调用..

```
protected Object getITelephony(final Context context)
        throws SecurityException, NoSuchMethodException,
        IllegalArgumentException, InvocationTargetException,
        IllegalAccessException
    {
        final TelephonyManager tm = (TelephonyManager)
                context.getSystemService(Context.TELEPHONY_SERVICE);
        final Method getITelephony
                = tm.getClass().getDeclaredMethod("getITelephony");
        if (!getITelephony.isAccessible()) {
            getITelephony.setAccessible(true);
        }
        return getITelephony.invoke(tm);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:18:06.953

使用反射来访问“getITelephony”在 Android 2.3+ 中不起作用

参考：

[http://hive-mind.org/android-call-blocking](http://hive-mind.org/android-call-blocking)

[您如何以编程方式结束 2.3+ 的通话？](https://stackoverflow.com/questions/10054348/how-do-you-programmatically-end-a-call-on-2-3)

请参阅此链接可能对您有所帮助...因为 ITelephony 无法在 API 级别 2.3 以上运行。

# opengl - 通过 HDMI 保持视频的 alpha 透明度

> ID：16144540
> 
> 赞同：2
> 
> 时间：2013-04-22T10:12:12.417
> 
> 标签：opengl, gpu, video-processing, alpha-transparency, hdmi

我正在处理的场景实际上如下：我需要获取 OpenGL 生成的屏幕并通过 HDMI 将其发送到 FPGA 组件，同时保持 alpha 通道。但是现在通过 HDMI 发送的数据只有 RGB（没有 alpha 通道的 24 位）所以我需要一种方法来强制通过这个端口发送 Alpha 位。

见图片：http: [//i.imgur.com/hhlcbb9.jpg](http://i.imgur.com/hhlcbb9.jpg)

我能想到的一种解决方案是将屏幕缓冲区从 RGBA 模式转换为 RGB，同时在 RGB 缓冲区中混合 Alpha 通道。

例如：

```
The original buffer: [R G B A][R G B A][R G B A]
The output i want: [R G B][A R G][B A R][G B A] 
```

重点是不必遍历每一个像素。但我不确定是否可以使用 OpenGL 或任何技术（VideoCore 内核？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:07:06.553

> opengl 帧缓冲区

您实际上是指*[framebuffer](http://www.opengl.org/wiki/Framebuffer)*还是某种纹理？因为帧缓冲区无法调整大小，因此生成的图像的大小将比*像素*数大 25%。你实际上不能那样做。

你可以用纹理来做，但只能通过调整它的大小。您必须将 texel 数据`glGetTexImage`带入某个缓冲区，然后将 texel 数据上传到另一个带有`glTexImage2D`. 您只需适当地更改[像素传输格式](http://www.opengl.org/wiki/Pixel_Transfer#Pixel_format)和纹理宽度。读取将使用`GL_RGBA`，写入将使用`GL_RGB`，内部格式为`GL_RGB8`.

这样的*表现*几乎肯定不会很好。但它应该*工作*。

但是不，没有简单的调用可以导致这种情况发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-19T11:43:59.923

您可以通过视频卡上的不同 rgb 或 hdmi 视频输出在 opengl 中单独发送 alpha 通道。因此，您的电脑现在通过一根电缆输出 RGB，然后通过另一根电缆输出 Alpha。您的 alpha 可能需要转换为灰度，以便它仍然是 24 位。然后您选择哪个信号是您的 fpga 中的关键。我假设您的 fpga 支持色度键。

我之前做过类似的事情，但使用了一个名为 Brainstorm 的程序，它使用支持 SDI 输出的特定视频卡，并将 RGB 和 Alpha 拆分为单独的视频通道（电缆），然后视觉混合器进行键控。

然而，今天，我创建了一个新的解决方案，它首先在 pc 上混合多个视频通道，然后将最终混合的视频直接输出到 RTMP 流服务器或 DVI 到 SDI 扫描转换器。

# php - 如何将我自己的文本/css 样式添加到这个 PHP 代码（数组）

> ID：16144543
> 
> 赞同：-4
> 
> 时间：2013-04-22T10:12:24.700
> 
> 标签：php, arrays

你能告诉我如何将我自己的文本/css样式添加到这个PHP代码中吗？

```
.l(  $term->name,  'taxonomy/term/'.$term->tid,   array('title' => $term->name  )). 
```

PHP 代码会生成一个指向该类别的链接，我需要添加它。

感谢您的回复。

所有代码看起来像：

```
 <?php
$vid = 59;
function termSort($a, $b) {return strcmp($a->name, $b->name);}
$terms = taxonomy_get_tree($vid);
print  usort ($terms,'termSort');
foreach ($terms as $term) {
if ($term->depth == 1) 
{  
print  "Travel Insurance to" .l(  $term->name,  'taxonomy/term/'.$term->tid,   array('title' => $term->name)). " - Order Cheap Flights";
} 

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:13:48.080

如果我不得不完全猜测（因为我不知道函数 'l' 实际做了什么，但我可以根据类似的框架假设），我会说添加`'style' => 'your custom css'`到数组中以实现内联样式或`'class' => 'your class'`与样式表一起使用。

IE：

```
.l(  $term->name,  'taxonomy/term/'.$term->tid,   array('title' => $term->name, 'style' => 'color: red'  )). 
```

如果您只是想向可点击链接添加单词，您可以编辑 $term->name 部分。

```
.l(  $term->name . "Your text here",  'taxonomy/term/'.$term->tid,   array('title' => $term->name  )). 
```

# java - Java中的GLEnum？

> ID：16144545
> 
> 赞同：0
> 
> 时间：2013-04-22T10:12:29.023
> 
> 标签：java, opengl, jna

我正在`opengl32.DLL`使用 JNA 导入 Java，但由于`GLEnum`. 由于我不知道 OpenGL 的来源，我不知道 GLEnum 是什么。它是枚举、整数还是什么？我如何在Java中弥补它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T19:51:14.367

正如评论中已经提到的，GLEnum 是一个 int，通常从不以其“数字形式”使用，而是在常量上使用。对于每个 gl-Function，GLEnum 都有其他含义。

您可以通过分析 C/C++ 或任何其他本机语言 OpenGL 绑定或阅读 OpenGL 规范来找到数值（我想我也看到了十六进制值）

说到这里，我强烈建议改用预定义的 Java OpenGL 绑定。在构建路径中避免使用第 3 方 jar 并没有任何好处。这就是java的工作方式。

# amazon-ec2 - Amazon EBS EC2 实例 IP 在重启时更改

> ID：16144551
> 
> 赞同：2
> 
> 时间：2013-04-22T10:12:38.467
> 
> 标签：amazon-ec2, ip, virtual-machine, amazon-ebs

我正在运行一个 EBS 支持的 Amazon EC2 Linux 实例。出于某些维护目的，我关闭了机器并再次启动它。但是，我的机器IP现在已经改变了。这会影响我的服务，因为服务器现在无法访问。

这个可以修吗。我可以再次为机器分配相同的 IP 吗？

非常感谢任何帮助。

谢谢。

PS - 维护是我关闭了机器，以便我可以创建并从中创建 AMI 以与其他用户共享。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T10:15:42.590

你应该给 EC2 盒子一个弹性 IP，否则当你重启机器时它会有一个新的 IP。您可以在不同的 EC2 机器上重复使用此 IP，但这意味着您有一个恒定 IP 可供参考，因此假设您丢失了 EC2 机器并且必须从 EBS 再次恢复，它仍将具有分配的静态 IP。

# angularjs - 如何禁用 angular-ui 引导选项卡？

> ID：16144555
> 
> 赞同：1
> 
> 时间：2013-04-22T10:12:52.273
> 
> 标签：angularjs, angular-ui-bootstrap

我正在尝试在 angularjs 和 angularjs bootstrap 中创建一个多步骤表单。

我有以下 html 代码，每个步骤上的按钮都可以验证当前选项卡并移至下一个选项卡。我正在寻找的是每个选项卡的“禁用”状态，当表单在当前状态“isStepClean(0)”下未验证时，该状态将设置为 true。

我试过使用 class="disabled" 和 disabled 作为属性，但没有用。任何想法如何做到这一点？

```
<tabs>
    <pane heading="1\. Recipients" active="panes[0].active" disabled="panes[0].disabled">
        ....
        <input type="button" ng-disabled="isStepClean(0)" class="btn btn-info pull-right" ng-click="panes[1].active = true" name="" value="Next step" />
    </pane>
    <pane heading="2\. Information" active="panes[1].active" disabled="panes[1].disabled">
         ....
         <input type="button" ng-disabled="isStepClean(1)" class="btn btn-info pull-right" ng-click="panes[2].active = true" name="" value="Next step" />
    </pane>
    <pane heading="3\. Preview" active="panes[2].active" disabled="panes[2].disabled">
         ....
         <input type="button" ng-disabled="isStepClean(2)" class="btn btn-info pull-right" ng-click="panes[3].active = true" name="" value="Next step" />
    </pane>
</tabs> 
```

在控制器中我有：

```
$scope.panes = [
        {active:true},
        {active:false},
        {active:false},
        {active:false}
    ]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-09T00:42:40.427

有人刚刚告诉我，这个修改已经在 Angular-UI 中进行了。它不在分解的 Angular-Bootstrap 上，但它是 Angular-UI 的引导组件的一部分。希望他们能尽快同步更改：

[https://github.com/angular-ui/bootstrap/commit/2b78dd16abd7e09846fa484331b5c35ece6619a2](https://github.com/angular-ui/bootstrap/commit/2b78dd16abd7e09846fa484331b5c35ece6619a2)

编辑：以前的答案，因为我花了一段时间才弄清楚。

目前，它没有内置在 Angular-Bootstrap 中，但您可以像这样修改库：

在您的窗格中添加一个 disabled 属性（下面的示例是使用 ng-repeat，但您可以像在示例中一样手动添加它）：

```
 <tabs>
     <pane ng-repeat="pane in panes" heading="{{pane.title}}" disabled="{{pane.disabled}}" active="pane.active">{{pane.content}}</pane>
 </tabs> 
```

然后对您的文件进行以下修改，`ui-bootstrap-tpls.js`如果使用`ui-bootstrap.js`我假设您知道如何修改外部模板的这些说明）：

搜索`$templateCache.put("template/tabs/tabs.html"...`并将`disabled:pane.disabled`属性添加到`ng-class`（使用适当的转义）：

```
<div class="tabbable">
  <ul class="nav nav-tabs">
    <li ng-repeat="pane in panes" ng-class="{active:pane.selected, disabled:pane.disabled}">
      <a ng-click="select(pane)" href="">{{pane.heading}}</a>
    </li>
  </ul>
  <div class="tab-content" ng-transclude></div>
</div> 
```

搜索`.directive('pane', ['$parse', function($parse) {`和更改：

```
scope:{
  heading:'@'
}, 
```

至：

```
scope:{
  heading:'@',
  disabled:'@'
}, 
```

通过将 disabled 添加到 panes 数组来测试它：

```
$scope.panes = [
        {active:true},
        {active:false, disabled:true},
        {active:false, disabled:true},
        {active:false}
    ]; 
```

现在使用您的验证功能（例如，`isStepClean()`）在窗格数组上设置禁用。

注意：这只会将`disabled`类应用于`li`元素（即，这将在外观上改变你的`li`元素以适应`disabled`Twitter Bootstrap 中的类）。您可以添加任何您想要的禁用行为作为自定义指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-02T13:46:41.713

如果您使用 angular-ui tabset，则不推荐使用*disabled*。您应该改用**禁用**。

```
<tabset>
    <tab heading='Tab Title' disable="hasErrors">
        ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-31T13:37:22.670

添加了一个复选框以使用范围禁用选项卡。

如果复选框为真，则触发一个函数，将作用域的值分配给类属性 {{btnClass}}。通过 data-toggle 中的条件语句，我们可以设置这个属性。

**data-toggle="{{btnClass == '禁用' ? '' : 'tab'}}"**

HTML

```
<input type="checkbox" ng-model="vm.target[isselected]" name="" ng-click="checkbox(isselected)"> TARGET ALL USERS

    <ul class="nav nav-tabs tabs-left" role="tablist">
  <span class="navTitle">TARGET GROUP</span><!-- 'tabs-right' for right tabs -->
    <li class="active" role="presentation"><a href='' data-target="#everyone" aria-controls="everyone" data-toggle="tab">EVERYONE</a></li>
<li class="{{btnClass}}"><a href='' data-target="#userprofile" aria-controls="userprofile" data-toggle="{{btnClass == 'disabled' ? '' : 'tab'}}">USER PROFILE</a></li>
<li class="{{btnClass}}"><a href='' data-target="#customergroup" aria-controls="customergroup" data-toggle="{{btnClass == 'disabled' ? '' : 'tab'}}">CUSTOMER GROUP</a></li>
<li class="{{btnClass}}"><a href='' data-target="#customer" aria-controls="customer" data-toggle="{{btnClass == 'disabled' ? '' : 'tab'}}">CUSTOMER</a></li>
<li class="{{btnClass}}"><a href='' data-target="#catalog" aria-controls="catalog" data-toggle="{{btnClass == 'disabled' ? '' : 'tab'}}">CATALOG</a></li>
<li class="{{btnClass}}"><a href='' data-target="#customerwarehouse" aria-controls="customerwarehouse" data-toggle="{{btnClass == 'disabled' ? '' : 'tab'}}">CUSTOMER WAREHOUSE</a></li>
  </ul> 
```

Angularjs

```
$scope.checkbox = function(isselected) {
if (vm.target[isselected]) {
$scope.btnClass = "disabled";
}
else {
  $scope.btnClass = "";
}
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-20T09:45:59.220

使用两个具有相同标题的选项卡，一个使用`ng-hide="yourDisableCondition"`，另一个（不需要内容）使用`ng-show="yourDisableCondition"`AND `disabled="true"`。

# c# - PortoBuf-net 反序列化一个双倍大小版本的序列化双精度数组

> ID：16144557
> 
> 赞同：1
> 
> 时间：2013-04-22T10:13:09.263
> 
> 标签：c#, serialization, deserialization

```
[Serializable]
[ProtoContract]
public class DataWrapper
{
    [ProtoMember(1)]
    public double[] Data = new double[] { 1, 2, 3, 4 };
}

class Program
{
    static void Main(string[] args)
    {

        Dictionary<int, DataWrapper> serialized = new Dictionary<int, DataWrapper>();
        Dictionary<int, DataWrapper> deserialized;// = new Dictionary<int, OHLC>();
        for (int i = 0; i < 10; i++)
        {
            serialized.Add(i, new DataWrapper());                
        }
        using (FileStream ms = new FileStream("dictionary", FileMode.Create, FileAccess.Write))
        {
            Serializer.Serialize<Dictionary<int, DataWrapper>>(ms, serialized);
        }

        using (FileStream ms = new FileStream("dictionary", FileMode.Open, FileAccess.Read))
        {
            deserialized = Serializer.Deserialize<Dictionary<int, DataWrapper>>(ms);
        }

        Console.WriteLine("serialized {0} and deserialized {1}", serialized[0].Data.Length, deserialized[0].Data.Length);

        }
} 
```

我期望反序列化一个长度为 4 的数组，而我收到一个长度为 8 的数组。这是一个错误，还是我在这里做错了？

请注意，代码是没有意义的。这只是试图解释我在真实场景中面临的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:38:14.623

我不是 Protobuf-net 专家，但这似乎与[这个问题](https://code.google.com/p/protobuf-net/issues/detail?id=261)有关。我怀疑这是因为您明确地将 初始化`double[]`为具有 4 个元素，并且 protobuf-net 在反序列化期间“附加”了额外的 4 个元素。

作为一种解决方法，您可以在 中设置`SkipConstructor=true`选项，`ProtoContract`然后它可以按预期工作：

```
[ProtoContract(SkipConstructor=true)] 
```

# ruby-on-rails - 在 Rails 3.2 中加入两个表

> ID：16144569
> 
> 赞同：0
> 
> 时间：2013-04-22T10:13:57.440
> 
> 标签：ruby-on-rails, join

我有两张桌子。
1.“SharedInfo”有4个属性：id、info_name、description、type_id
2.“Type”有3个属性：id、type_name、code

关系是：“SharedInfo”belongs_to“Type”，“Type”has_many“SharedInfo”。外键是：type_id。

我想加入 2 个表并选择 info_name、description、type_id、type_name、code
如何在 RoR 应用程序（控制器）中执行

我更具体地编辑我的问题：

在控制器中，我想检索一个实例@instance，它具有表“SharedInfo”的所有属性和基于“type_id”属性的表“Type”的属性“code”。（@instance 有 'id'、'info_name'、'description'、'type_id'、'code' 属性）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:32:34.917

您可以使用`.joins()` Try this 假设，`id = 1`例如：

```
select("si.info_name, si.description, si.type_id, t.type_name, t.code")
.from("SharedInfo AS si ON t.type_id = si.type_id")
.joins("Type AS t ON si.type_id = t.type_id")
.where("si.id = 1") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:01:05.730

因此，您可以使用它`Active Record Associations`来执行此操作。 `SharedInfo has_many Type`和`Type belongs_to SharedInfo`。使用它，您可以对两个表进行连接查询。

至于您稍后将其转换为 json 并在视图中显示的部分，您可以将 Active Record 对象呈现为 json 并使用它。

[在此处](http://guides.rubyonrails.org/association_basics.html#the-belongs_to-association)阅读有关 Active Record 关联的更多信息。您还可以参考此[SO 答案](https://stackoverflow.com/a/5228066/277553)以获取示例。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:16:18.997

没关系，我解决了我的问题：通过使用这个：

```
@locations = SharedInfo.select("shared_infos.info_name, shared_infos.description, shared_infos.type_id, types.type_name, types.code").joins("LEFT OUTER JOIN types ON types.id = shared_infos.type_id") 
```

希望对像我一样有问题的人有所帮助。
感谢大家的帮助。

# c++ - 通过 OpenCV 的热图数据

> ID：16144571
> 
> 赞同：-3
> 
> 时间：2013-04-22T10:14:06.033
> 
> 标签：c++, visual-studio-2010, opencv

根据所做的一些研究，热图数据无法通过 OpenCV 完成。还有一些其他的彩色地图（HSV、jet...），但不是我要找的。你有什么建议来展示它们吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T11:44:33.913

您可以像这样显示热图：

```
cv::Mat heatmap = getHeatMap(grayscaleImage); // create your heat map from a grayscale image (CV_8UC1)
cv::imshow("Heat Map", heatmap); // display your heat map
waitkey(0); // make sure the application does not close immediately 
```

`getHeatMap()`看起来像这样（未经测试）：

```
cv::Mat getHeatMap(cv::Mat input) // input is of type CV_8UC1, return is of type CV_8UC3
{
    cv::Mat result(input.rows, input.cols, CV_8UC3);
    for (int yy = 0; yy < input.rows; ++yy)
    {
        for (int xx = 0; xx < input.cols; ++xx)
        {
            int pixelValue = input.at<uchar>(yy, xx);
            if (pixelValue < 128) {
                result.at<cv::Vec3b>(yy, xx) = cv::Vec3b(0, 0 + 2*pixelValue, 255 - 2 * pixelValue);
            } else {
                result.at<cv::Vec3b>(yy, xx) = cv::Vec3b(0 + 2*pixelValue, 255 - 2 * pixelValue, 0);
            }
        }
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-21T09:24:49.140

看看`cv::applyColorMap(InputArray src, OutputArray dst, int colormap)`，它至少从[OpenCV 2.4](http://docs.opencv.org/2.4.13/modules/contrib/doc/facerec/colormaps.html?highlight=applycolormap#void%20applyColorMap(InputArray%20src,%20OutputArray%20dst,%20int%20colormap))开始可用。

这是[该网站](https://www.learnopencv.com/applycolormap-for-pseudocoloring-in-opencv-c-python/)的一个最小示例：

```
using namespace cv; 

Mat im_gray = imread("pluto.jpg", IMREAD_GRAYSCALE);
Mat im_color;
applyColorMap(im_gray, im_color, COLORMAP_JET); 
```

# jpa - 在 JPA 中加载列表时出现 Stackoverflow 错误

> ID：16144572
> 
> 赞同：-1
> 
> 时间：2013-04-22T10:14:11.347
> 
> 标签：jpa, stack-overflow

我正在使用 JSF 2.1 并且在加载包含大量数据的列表时遇到问题。数据是通过 JPA 从数据库中获取的，基本上如下所示：（只是相关部分，省略了 getter 和 setter）

```
public class HostController {

    private List<Host> allHosts;
    @Inject
    private HostService hostService;

    public void beforeRenderLoadList(final ComponentSystemEvent event) {
        allHosts = hostService.findAll();
    }
} 
```

此代码用于`preRenderView`xhtml 页面上的元事件。

它适用于少量数据，但由于原始表包含大约 6500 个条目，因此会引发 stackoverflow 错误。

有什么方法可以延迟加载此列表或解决错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:51:50.493

在这种情况下，我们通常做的是提供数据**分页**。很明显，当数据量和/或用户负载很高时，实际上*必须解决这种情况。*

这基本上意味着您将拥有将接受`from`and`to`或`size`参数的方法来说明从数据库中获取的记录数：

```
public List<Host> getHosts(int from, int to) {
    hostService.findAllIn(int from, int to);
} 
```

例如，`Query#setFirstResult`Query[类](http://docs.oracle.com/javaee/6/api/javax/persistence/Query.html)`Query#setMaxResults`可用于在您的服务中实现该功能。

视图中的分页可以由`<h:commandButton>`s 通过 POST 或`<h:link>`s 和`<f:param>`/`<f:viewParam>`通过 GET 处理。粗略的例子：

```
<h:commandButton value="Next" action="#{bean.next}"/> 
```

带有视图范围的 bean

```
private int from;
private int to;
private int step;
private int page;
public String next() {
    page++;
    from = (page - 1) * step + 1;
    to = page * step;
    return null;
} 
```

或者

```
<h:link value="Next" outcome="viewhost">
    <f:param name="page" value="#{bean.page + 1}" />
</h:link> 
```

请注意，增加内存大小并不是解决问题的方法，而是延迟其后果。

或者，您可以使用一些组件库，例如具有默认分页功能的 Primefaces，例如[`<p:dataTable>`](http://www.primefaces.org/showcase/ui/datatablePagination.jsf).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T05:16:15.707

感谢您的回答！

通过将每个实体的 FetchType 设置为 LAZY，终于解决了这个问题！

# php - 模拟器不显示消息框

> ID：16144576
> 
> 赞同：0
> 
> 时间：2013-04-22T10:14:29.313
> 
> 标签：php, android, messagebox

我想在从服务器获得 JSON 响应后显示一个消息框。在下面给出的代码中，数据库正在正确更新，但未显示消息框。它只是显示“不幸的是，myapp 已停止”消息。我不知道实际在哪里代码出错。在编码中发现NOo 错误。这是我的 .java 文件

```
package com.example.loga;

import android.os.Bundle;

import android.app.Activity;
import android.app.AlertDialog;

import android.util.Log;
import android.view.Menu;
import android.widget.Button;

import java.util.ArrayList;
import java.util.List;
import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONObject;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.view.View;
import android.widget.EditText;

public class MainActivity1 extends Activity {

     private ProgressDialog pDialog;

     JSONParser jsonParser = new JSONParser();
        EditText inputuserid;
        EditText inputserverid;

        private static String url_register = "http://10.0.2.2/android_connect/register.php";
        // JSON Node names
        private static final String TAG_SUCCESS = "success";

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_activity1);
         // Edit Text
        inputuserid = (EditText) findViewById(R.id.editText1);
        inputserverid= (EditText) findViewById(R.id.editText2);
        Button button1 = (Button) findViewById(R.id.button1);
        button1.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View view) {
                // creating new product in background thread
                new add().execute();
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main_activity1, menu);
        return true;
    }
    class add extends AsyncTask<String, String,String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(MainActivity1.this);
            pDialog.setMessage("your Registration is processing..wait for few sec..");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
         * Creating product
         * */
        protected String doInBackground(String... args) {
            return null;

        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
              String userid = inputuserid.getText().toString();
              String serverid = inputserverid.getText().toString();

              // Building Parameters
              List<NameValuePair> params = new ArrayList<NameValuePair>(2);
              params.add(new BasicNameValuePair("userid",userid));
              params.add(new BasicNameValuePair("serverid", serverid));

            JSONObject json = jsonParser.makeHttpRequest(url_register,
                    "POST", params);
            Log.d("Create Response", json.toString());
            try
            {
            int success = json.getInt(TAG_SUCCESS);
                if (success == 1) {

                AlertDialog alertDialog;
                alertDialog = new AlertDialog.Builder(MainActivity1.this).create();
                alertDialog.setTitle("password verification..");
                alertDialog.setMessage("success.!!");
                alertDialog.show();

                 finish();
             } else {
                 // failed to create product
             }
            }
            catch (Exception e) {
                    e.printStackTrace();
                }
            }

        }

    } 
```

我的PHP文件是：

```
<?php
$response = array();
 // check for required fields
if (isset($_POST['userid']) && isset($_POST['serverid']))
{

    $userid = $_POST['userid'];
    $serverid= $_POST['serverid'];
       // include db connect class
    require_once __DIR__ . '/db_connect.php';

    // connecting to db
    $db = new DB_CONNECT();

    // mysql inserting a new row
    $result = mysql_query("INSERT INTO opass(User_ID, Server_ID ) VALUES('$userid', '$serverid')");

    // check if row inserted or not
    if ($result) 
{
        // successfully inserted into database
        $response["success"] = 1;
        $response["message"] = " Registered successfully";

        // echoing JSON response
        echo json_encode($response);
    }
 else 
{
        // failed to insert row
        $response["success"] = 0;
        $response["message"] = "Oops! An error occurred.";

        // echoing JSON response
        echo json_encode($response);
    }
}
 else 
{
    // required field is missing
    $response["success"] = 1;
    $response["message"] = "Required field(s) is missing";

    // echoing JSON response
    echo json_encode($response);
}
?> 
```

所以我的logcat错误：

```
04-21 17:00:14.941: I/Choreographer(27578): Skipped 89 frames!  The application may be doing too much work on its main thread.
. 
.
.
.
.
4-21 17:00:14.921: E/AndroidRuntime(27578): FATAL EXCEPTION: AsyncTask #2
04-21 17:00:14.921: E/AndroidRuntime(27578): java.lang.RuntimeException: An error occured while executing doInBackground()
04-21 17:00:14.921: E/AndroidRuntime(27578):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
04-21 17:00:14.921: E/AndroidRuntime(27578):    at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
04-21 17:00:14.921: E/AndroidRuntime(27578):    at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
04-21 17:00:14.921: E/AndroidRuntime(27578):    at java.util.concurrent.FutureTask.run(FutureTask.java:239)
04-21 17:00:14.921: E/AndroidRuntime(27578):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
04-21 17:00:14.921: E/AndroidRuntime(27578):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
04-21 17:00:14.921: E/AndroidRuntime(27578):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
04-21 17:00:14.921: E/AndroidRuntime(27578):    at java.lang.Thread.run(Thread.java:856)
04-21 17:00:14.921: E/AndroidRuntime(27578): Caused by: java.lang.NullPointerException
04-21 17:00:14.921: E/AndroidRuntime(27578):    at com.example.loga.MainActivity1$add.doInBackground(MainActivity1.java:97)
04-21 17:00:14.921: E/AndroidRuntime(27578):    at com.example.loga.MainActivity1$add.doInBackground(MainActivity1.java:1)
04-21 17:00:14.921: E/AndroidRuntime(27578):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-21 17:00:14.921: E/AndroidRuntime(27578):    at java.util.concurrent.FutureTask.run(FutureTask.java:234)
04-21 17:00:14.921: E/AndroidRuntime(27578):    ... 4 more
04-21 17:00:14.992: I/Choreographer(27578): Skipped 44 frames!  The application may be doing too much work on its main thread.
04-21 17:00:17.361: I/Choreographer(27578): Skipped 134 frames!  The application may be doing too much work on its main thread.
04-21 17:00:17.941: E/WindowManager(27578): Activity com.example.loga.MainActivity1 has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{40d28880 V.E..... R.....ID 0,0-240,77} that was originally added here
04-21 17:00:17.941: E/WindowManager(27578): android.view.WindowLeaked: Activity com.example.loga.MainActivity1 has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{40d28880 V.E..... R.....ID 0,0-240,77} that was originally added here
04-21 17:00:17.941: E/WindowManager(27578):     at android.view.ViewRootImpl.<init>(ViewRootImpl.java:354)
04-21 17:00:17.941: E/WindowManager(27578):     at android.view.WindowManagerGlobal.addView(WindowManagerGlobal.java:216)
04-21 17:00:17.941: E/WindowManager(27578):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:69)
04-21 17:00:17.941: E/WindowManager(27578):     at android.app.Dialog.show(Dialog.java:281)
04-21 17:00:17.941: E/WindowManager(27578):     at com.example.loga.MainActivity1$add.onPreExecute(MainActivity1.java:81)
04-21 17:00:17.941: E/WindowManager(27578):     at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:586)
04-21 17:00:17.941: E/WindowManager(27578):     at android.os.AsyncTask.execute(AsyncTask.java:534)
04-21 17:00:17.941: E/WindowManager(27578):     at com.example.loga.MainActivity1$1.onClick(MainActivity1.java:58)
04-21 17:00:17.941: E/WindowManager(27578):     at android.view.View.performClick(View.java:4204)
04-21 17:00:17.941: E/WindowManager(27578):     at android.view.View$PerformClick.run(View.java:17355)
04-21 17:00:17.941: E/WindowManager(27578):     at android.os.Handler.handleCallback(Handler.java:725)
04-21 17:00:17.941: E/WindowManager(27578):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-21 17:00:17.941: E/WindowManager(27578):     at android.os.Looper.loop(Looper.java:137)
04-21 17:00:17.941: E/WindowManager(27578):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-21 17:00:17.941: E/WindowManager(27578):     at java.lang.reflect.Method.invokeNative(Native Method)
04-21 17:00:17.941: E/WindowManager(27578):     at java.lang.reflect.Method.invoke(Method.java:511)
04-21 17:00:17.941: E/WindowManager(27578):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-21 17:00:17.941: E/WindowManager(27578):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-21 17:00:17.941: E/WindowManager(27578):     at dalvik.system.NativeStart.main(Native Method)
04-21 17:00:17.941: I/Choreographer(27578): Skipped 317 frames!  The application may be doing too much work on its main thread.
04-21 17:05:16.065: I/Process(27578): Sending signal. PID: 27578 SIG: 9
04-21 17:16:06.902: E/Trace(27969): error opening trace file: No such file or directory (2)
04-21 17:16:08.042: I/Choreographer(27969): Skipped 107 frames!  The application may be doing too much work on its main thread.
04-21 17:16:08.122: D/gralloc_goldfish(27969): Emulator without GPU emulation detected.
04-21 17:16:47.102: I/Choreographer(27969): Skipped 41 frames!  The application may be doing too much work on its main thread.
04-21 17:16:48.292: I/Choreographer(27969): Skipped 82 frames!  The application may be doing too much work on its main thread.
04-21 17:16:49.062: I/Choreographer(27969): Skipped 224 frames!  The application may be doing too much work on its main thread.
04-21 17:16:52.293: I/Choreographer(27969): Skipped 92 frames!  The application may be doing too much work on its main thread.
04-21 17:16:52.652: D/dalvikvm(27969): GC_CONCURRENT freed 152K, 11% free 2610K/2904K, paused 7ms+111ms, total 231ms
04-21 17:16:53.564: I/Choreographer(27969): Skipped 89 frames!  The application may be doing too much work on its main thread.
04-21 17:16:54.021: D/InputEventConsistencyVerifier(27969): KeyEvent: ACTION_UP but key was not down.
04-21 17:16:54.021: D/InputEventConsistencyVerifier(27969):   in android.widget.EditText{40d27d40 VFED..CL .F....I. 90,74-228,104 #7f080007 app:id/editText2}
04-21 17:16:54.021: D/InputEventConsistencyVerifier(27969):   0: sent at 109014528000000, KeyEvent { action=ACTION_UP, keyCode=KEYCODE_TAB, scanCode=15, metaState=0, flags=0x8, repeatCount=0, eventTime=109014528, downTime=109014528, deviceId=0, source=0x101 }
04-21 17:16:54.721: I/Choreographer(27969): Skipped 109 frames!  The application may be doing too much work on its main thread.
04-21 17:16:56.826: I/Choreographer(27969): Skipped 89 frames!  The application may be doing too much work on its main thread.
04-21 17:16:57.531: I/Choreographer(27969): Skipped 275 frames!  The application may be doing too much work on its main thread.
04-21 17:16:57.831: D/AndroidRuntime(27969): Shutting down VM
04-21 17:16:57.831: W/dalvikvm(27969): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-21 17:16:57.981: E/AndroidRuntime(27969): FATAL EXCEPTION: main
04-21 17:16:57.981: E/AndroidRuntime(27969): android.os.NetworkOnMainThreadException
04-21 17:16:57.981: E/AndroidRuntime(27969):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at libcore.io.IoBridge.connect(IoBridge.java:112)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at java.net.Socket.connect(Socket.java:842)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at com.example.loga.JSONParser.makeHttpRequest(JSONParser.java:51)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at com.example.loga.MainActivity1$add.onPostExecute(MainActivity1.java:97)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at com.example.loga.MainActivity1$add.onPostExecute(MainActivity1.java:1)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at android.os.AsyncTask.finish(AsyncTask.java:631)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at android.os.AsyncTask.access$600(AsyncTask.java:177)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at android.os.Looper.loop(Looper.java:137)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at android.app.ActivityThread.main(ActivityThread.java:5041)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at java.lang.reflect.Method.invokeNative(Native Method)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at java.lang.reflect.Method.invoke(Method.java:511)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-21 17:16:57.981: E/AndroidRuntime(27969):    at dalvik.system.NativeStart.main(Native Method)
04-21 17:16:58.221: D/dalvikvm(27969): GC_CONCURRENT freed 214K, 12% free 2812K/3164K, paused 71ms+19ms, total 322ms
04-21 17:17:01.412: I/Process(27969): Sending signal. PID: 27969 SIG: 9
04-21 17:17:02.322: E/Trace(28003): error opening trace file: No such file or directory (2)
04-21 17:17:02.862: I/Choreographer(28003): Skipped 125 frames!  The application may be doing too much work on its main thread.
04-21 17:17:02.892: D/gralloc_goldfish(28003): Emulator without GPU emulation detected. 
```

帮助我找出我做的任何错误。谢谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:16:41.930

你不能跑

```
 AlertDialog alertDialog;
  alertDialog = new AlertDialog.Builder(MainActivity1.this).create();
  alertDialog.setTitle("password verification..");
  alertDialog.setMessage("success.!!");
  alertDialog.show(); 
```

这`thread`与 `UI thread`

使用`Handler`或`runOnUiThread()`

编辑以这种方式更改对话框中的部分：

```
runOnUiThread(new Runnable() {

   @Override
   public void run() {

        AlertDialog alertDialog;
        alertDialog = new AlertDialog.Builder(MainActivity1.this).create();
        alertDialog.setTitle("password verification..");
        alertDialog.setMessage("success.!!");
        alertDialog.show();
   }

}); 
```

# google-drive-api - 使用 drive.changes.list 观察更改需要多长时间？

> ID：16144577
> 
> 赞同：2
> 
> 时间：2013-04-22T10:14:31.127
> 
> 标签：google-drive-api

我们在应用程序中围绕 drive.changes.list 编写了单元测试

1.  用户 A 修改文件
2.  用户 B 尝试使用 drive.changes.list() 观察更改

有时需要大约 5 分钟才能显示更改，而在其他极端情况下，更改会在几秒钟内显示出来。有时他们甚至在 5 分钟后也没有出现。

即使在 5 分钟后，drive.changes.list 中的更改也不会出现，这是一个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:31:47.710

这听起来像是我们的缓存失效策略。我不确定我们能否在短期内解决/改善这个问题。更改并非旨在满足实时需求。但好消息是，我们的范围内还有另一个功能可以满足您的需求。

# tcp - 奇怪的 tcp 转储收集

> ID：16144585
> 
> 赞同：0
> 
> 时间：2013-04-22T10:14:47.750
> 
> 标签：tcp, tcpdump

我曾尝试将手机上的互联网 pdn 绑定到特定接口，如 wlan0 或 cdma0。因此，我将 IP 地址绑定到创建的 tcp 套接字，并尝试向 google.com 发送 http get 请求。我在 tcpdump 中得到的是一个非常奇怪的日志。

我的疑问是。1.这些协议名0c4a7d和0xdb40是什么？什么我看不到任何 TCP 协议![在此处输入图像描述](https://i.stack.imgur.com/MgeWy.png)？2\. 我怎么知道数据是否真的从我希望它通过的 pdn 传递，因为没有任何 http 数据包等？

如果需要更多信息，请告诉我。

问候塔里克

![第一张图片显示了请求](https://i.stack.imgur.com/sreiG.png)

![第二张图片显示了响应](https://i.stack.imgur.com/BklxE.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:21:44.733

对于问题 1：检查您的首选项 ( `Edit -> Preferences`) 并选择 then`User Interface -> Columns`并检查列`Title = Protocol`是否也是字段类型协议。如果没有，请删除那个并将其添加到底部。

# unit-testing - DotCover 仅显示单元测试源代码而不是生产代码

> ID：16144592
> 
> 赞同：4
> 
> 时间：2013-04-22T10:15:12.270
> 
> 标签：unit-testing, resharper, mstest, code-coverage, dotcover

我开始使用dotCover。我有一组调试编译的 dll + 他们的 pdb。然后我创建了一个测试项目并对其执行了 resharper 以查看覆盖率。我得到的只是单元测试项目的覆盖范围，而不是整个覆盖范围：

![在此处输入图像描述](https://i.stack.imgur.com/WNf1z.png)

我希望在覆盖选项卡上找到从我的单元测试及其覆盖范围中引用的 dll。我对吗？也许我错过了什么或者我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-14T15:06:35.307

您可以尝试取消选中“将覆盖结果与当前项目结构匹配”按钮，否则 dotCover 仅显示当前解决方案的测试覆盖结果。

[![在此处输入图像描述](https://i.stack.imgur.com/JJ9fi.png)](https://i.stack.imgur.com/JJ9fi.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-02T18:00:58.703

您是否检查了项目设置以确保您正在创建和导出 PDB？

我遇到了同样的问题，因为我被设置为发布，并且在我的发布设置中我没有导出 PDB。一旦我回到调试模式，dotCover 就会显示我想要的程序集。

# windows - 如何将当前目录下的所有内容输入到 Windows 批处理（cmd）的可执行文件中？

> ID：16144593
> 
> 赞同：0
> 
> 时间：2013-04-22T10:15:12.680
> 
> 标签：windows, opencv, batch-file, cmd, jpeg

我是一个新手，使用 Windows cmd 批处理来运行我的 OpenCV 可执行文件。

我希望这样做：我已经在当前目录下成功创建了一个可执行文件（myImgProc.exe）。我有几个**任意命名**的 JPEG 文件需要输入到 myImgProc.exe 中。通过蛮力方法，我可以编写 .bat 文件如下：

```
 @ECHO OFF
    ECHO Start running myImgProc.exe on JPEG files

    START myImgProc.exe abc_01.jpg
    START myImgProc.exe def_02.jpg
    START myImgProc.exe ert-01.jpg
    START myImgProc.exe tyh-04.jpg
    ... 
```

但这太详尽了，因为我至少有数千个 JPEG 文件！

有更好的方法吗？比如，如何告诉 Windows 找到当前目录下的每个 JPEG 文件并将它们设置为 cmd 的参数？

谢谢回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:20:13.607

试试这个

```
pushd "myStartFolder"
for %%i in (*.jpg) do START "" "myImgProc.exe" "%%~i"
popd 
```

# javascript - 变量在控制台中为空

> ID：16144596
> 
> 赞同：0
> 
> 时间：2013-04-22T10:15:18.273
> 
> 标签：javascript, facebook

所以，我通过 Facebook FQL 获得了一个变量，在某些情况下它是`null`. 即使我试图避免空部分，在控制台中它仍然返回空值。我有这样的东西，所以当变量为空时，它会显示一个后备。

```
if(group[i].pic_cover) {
    groupcover.src = group[i].pic_cover.source;                   
} else {
    groupcover.src = "../images/noimg.png"; 
} 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:22:23.163

你不是在检查是否`.source`是假的，只是如果`.pic_cover`是。也许您打算检查所有内容。

```
if(group[i] && group[i].pic_cover && group[i].pic_cover.source) {
    groupcover.src = group[i].pic_cover.source; 
} else{
    groupcover.src = "../images/noimg.png"; 
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T10:20:53.300

尝试使用 typeof

```
if(typeof group[i].pic_cover !='null')
                    {
                        groupcover.src = group[i].pic_cover.source; 

                    }
                    else{
                       groupcover.src = "../images/noimg.png"; 
                    } 
```

# jquery - 让 jquery 在不存在的 div 上运行

> ID：16144597
> 
> 赞同：0
> 
> 时间：2013-04-22T10:15:24.620
> 
> 标签：jquery, jquery-ui, javascript-events

我希望 jQuery 对**加载页面时不存在的 Div**进行操作；div 是在客户端操作之后动态创建的（即在页面加载之后）。

下面是一些非常简单的代码来说明这一点：

### HTML 代码

```
<div id="test">
    <div id="ExistsWhenDocIsLoaded"> Click here </div>
</div> 
```

### jQuery 代码

```
<script>
    $("#ExistsWhenDocIsLoaded").on('click',function(){
        var s = '<div id="DivCreatedOnTheFly">New Stuff</div>'  ;
        $("#ExistsWhenDocIsLoaded").append(s);
        // Code below works fine as expected, 
        // but is nested and is hard to read / debug
        // $("#DivCreatedOnTheFly").on('click', 
        //   function(){alert("Click On New Stuff");});
    });

    // The code below fails, 
    // it operate on $("#DivCreatedOnTheFly"), 
    // that doesn't exist when the page is loaded

    $("#DivCreatedOnTheFly").on('click',function(event){alert("Click On New Stuff");}); 
</script> 
```

当用户单击“单击此处”时，会附加一个新的 Div。当用户单击新的 Div 时，用户会收到一条警报消息。

如果警报消息嵌套在`$("#ExistsWhenDocIsLoaded")`代码中，它会按预期工作，但会更难阅读和调试。

如果警报消息是用与 相关的代码编写的`$("#DivCreatedOnTheFly")`，它永远不会被触发，因为代码在第一次解释时`$("#DivCreatedOnTheFly")`返回。`NULL`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:17:57.537

你需要用`.on()`这种方式——

```
$("#ExistsWhenDocIsLoaded").on('click',"#DivCreatedOnTheFly",function(event){
    alert("Click On New Stuff");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:21:22.750

你可以把事件放在`$(document).load(function(){ });`

或动态加载元素后（使用回调......）

你的代码将是这样的：

```
<script>

$(document).load(function(){
    $("#ExistsWhenDocIsLoaded").on('click',function(){
        var s = '<div id="DivCreatedOnTheFly">New Stuff</div>'  ;
        $("#ExistsWhenDocIsLoaded").append(s);
        // Code below works fine as expected, 
        // but is nested and is hard to read / debug
        // $("#DivCreatedOnTheFly").on('click', 
        //   function(){alert("Click On New Stuff");});
    });

    // The code below fails, 
    // it operate on $("#DivCreatedOnTheFly"), 
    // that doesn't exist when the page is loaded

    $("#DivCreatedOnTheFly").on('click',function(event){alert("Click On New Stuff");}); 
 });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:24:08.073

您可以为此使用该[`.on()`](http://api.jquery.com/on/)方法，但您也可以在创建元素时添加功能。只需将创建元素包装在 jQuery 函数中，即可创建一个 jQuery 对象。

```
$("#ExistsWhenDocIsLoaded").on('click',function(){
    var $s = $('<div id="DivCreatedOnTheFly">New Stuff</div>');

    $s.on('click', function() {
        alert('clicked');
    });

    $("#ExistsWhenDocIsLoaded").append($s);
}); 
```

[JSFiddle 示例](http://jsfiddle.net/ruCVy/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T18:23:03.383

感谢大家的贡献。这是到目前为止的结果。我希望它会有所帮助，尽管它不像我希望的那样优雅。

[http://jsfiddle.net/siba/z7Xcx/2/](http://jsfiddle.net/siba/z7Xcx/2/)

```
$("#ExistsWhenDocIsLoaded").on('click', function () {
    var s = '<div id="DivCreatedOnTheFly" class="Reload">New Stuff</div>';

    // the 'if' test prevents the div to appear twice

    if ($("#DivCreatedOnTheFly").length == 0) {
        $("#ExistsWhenDocIsLoaded").append(s);
    }

});

$("#ExistsWhenDocIsLoaded").on('click', "#DivCreatedOnTheFly", function (event) {
    alert("Click On New Stuff");
}); 
```

# jquery - 如何在下一次自动完成时使用自动完成返回

> ID：16144602
> 
> 赞同：0
> 
> 时间：2013-04-22T10:15:31.723
> 
> 标签：jquery

我在同一张桌子上有类别和子类别。
例如;
catid = 1 parentid = 0 name = UCLA

catid = 2 parentid = 1 name = 商学院

catid = 3 parentid = 2 name = 市场营销专业

我使用自动完成来获取大学领域的大学名称。

现在，我想要教师领域，但只加载大学的院系。

我怎样才能`UniversityID`在下一个字段上返回？

谢谢！

```
 $( ".signup-form input[name='COMMUNITY']").autocomplete({
        source: function( request, response ) {
            $.ajax({
            url: "/content/signup/index.cs.asp?Process=CheckEmail&PARENTID=0&COMMUNITY=" + request.term,
            dataType: "json",
            success: function( data ) {
                response( $.map( data.CheckEmail, function( item ) {
                return {
                    label: item.Name,
                    value: item.Name,
                    emailURL: item.emailURL,
                    UniversityID: item.UniversityID
                }
                }));
            }
            });
        },
    $( ".signup-form input[name='COMMUNITY']").autocomplete({
        source: function( request, response ) {
            $.ajax({
            url: "/content/signup/index.cs.asp?Process=CheckEmail&PARENTID=????&COMMUNITY=" + request.term,
            dataType: "json",
            success: function( data ) {
                response( $.map( data.CheckEmail, function( item ) {
                return {
                    label: item.Name,
                    value: item.Name,
                    emailURL: item.emailURL,
                    FacultyID: item.FacultyID
                }
                }));
            }
            });
        }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:43:36.040

您可以通过 访问选定的项目`$("input").data("autocomplete").selectedItem`。

所以你的第二个自动完成的网址可能是`"/content/signup/index.cs.asp?Process=CheckEmail&PARENTID=" + $("input#university").data("autocomplete").selectedItem.UniversityId + "&COMMUNITY=" + request.term`

### 编辑

也许您应该在使用它之前先检查是否有选定的值：

```
var uniID = $("input#university").data("autocomplete").selectedItem;
uniID = uniID && uniID.UniversityId || 0;
$.ajax({
  url : "/content/signup/index.cs.asp?Process=CheckEmail&PARENTID="+uniID+"&COMMUNITY=" + request.term,
  ....
}) 
```

# authentication - 基于 Worklight 表单的身份验证：未找到 j_security_check

> ID：16144607
> 
> 赞同：1
> 
> 时间：2013-04-22T10:15:46.520
> 
> 标签：authentication, ibm-mobilefirst, j-security-check

我尝试使用 Worklight 应用程序实现一个非常简单的、基于表单的身份验证。但是，当我激活登录功能时，它会因 404 错误而停止，说 /apps/services/j_security_check 找不到。奇怪的是，当我从 IBM 的 developerWorks 站点运行基于表单的身份验证示例时，它运行良好。我不知道有什么区别，与身份验证有关的所有功能都完全相同，但是使用我自己的应用程序时，我会收到此错误消息。以下是来源的相关部分：

```
 var sampleAppRealmChallengeHandler = WL.Client.createChallengeHandler("SampleAppRealm");

sampleAppRealmChallengeHandler.isCustomResponse = function(response) {
    if (!response || response.responseText === null) {
        return false;
    }
    var indicatorIdx = response.responseText.search('j_security_check');

    if (indicatorIdx >= 0){
        return true;
    }
    return false;
};

sampleAppRealmChallengeHandler.handleChallenge = function(response) {
    $.mobile.changePage($('#Login'));
    $('#passwordInputField').val('');
};

sampleAppRealmChallengeHandler.submitLoginFormCallback = function(response) {
    var isLoginFormResponse = sampleAppRealmChallengeHandler.isCustomResponse(response);
    if (isLoginFormResponse){
        sampleAppRealmChallengeHandler.handleChallenge(response);
    } else {
        $.mobile.changePage($('#page0'));
        sampleAppRealmChallengeHandler.submitSuccess();
    }
};

function proceedWithLogin() {

    console.log("proceedWithLogin");

    var reqURL = '/j_security_check';
    var options = {};
    options.parameters = {
        j_username : $('#loginEmail').val(),
        j_password : $('#loginPassword').val()
    };
    options.headers = {};
    sampleAppRealmChallengeHandler.submitLoginForm(reqURL, options, sampleAppRealmChallengeHandler.submitLoginFormCallback);
} 
```

知道是什么原因造成的吗？是否有我忽略的隐藏项目设置？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:50:00.497

您是否尝试在表单的响应到达之前发送您的凭据？这可以解释收到 404 j_security_check not found。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:48:18.127

看起来这是 Worklight 项目的问题。我已经建立了一个新项目并复制了所有内容，现在它可以工作了。不知道问题是什么，但它消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T04:55:43.087

我想你还没有部署适配器。您可以在部署 DummyAdapter 后通过右键单击它 -> 运行方式 -> 部署适配器来尝试测试。

# android - 自定义对话框上的自定义键盘 (Android)

> ID：16144608
> 
> 赞同：3
> 
> 时间：2013-04-22T10:15:48.020
> 
> 标签：android, dialog, keyboard

使用 EditText 打开自定义对话框时如何使用自定义键盘？

我在我的项目中使用键盘视图，我想在打开自定义对话框时显示我的自定义键盘

*   **打开自定义对话框时，我的自定义键盘在对话框后面打开**

当显示自定义对话框时，键盘会显示在其后面，因此用户无法使用键盘键入。像这样的东西

[![像这样的东西：示例图像](https://i.stack.imgur.com/nOsQd.png)](https://i.stack.imgur.com/nOsQd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:19:11.207

检查本教程[创建您自己的自定义键盘](http://tutorials-android.blogspot.in/2011/06/create-your-own-custom-keyboard-for.html)

此外，为了拦截键盘事件，您可以覆盖`onTouch` 事件，请参阅我发布的链接

# selenium - ZK 硒测试。如何使用它？

> ID：16144609
> 
> 赞同：0
> 
> 时间：2013-04-22T10:15:59.520
> 
> 标签：selenium, zk

我是AQC的初学者。我想知道如何在 Selenium IDE 中使用 ZK Selector。但是我找不到任何关于在 Selenium 中集成 ZK 的信息。

那么，如何让我的 Selenium IDE 使用 ZK 录制脚本。以及如何使用像 ZTL 测试这样的脚本？

任何帮助表示赞赏！

在此先感谢乌克兰的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T13:57:45.870

非常有用的文章：

[http://books.zkoss.org/wiki/Small_Talks/2013/July/ZK_Testing_with_Selenium_IDE](http://books.zkoss.org/wiki/Small_Talks/2013/July/ZK_Testing_with_Selenium_IDE) [http://books.zkoss.org/wiki/Small_Talks/2009/February/How_to_Test_ZK_Application_with_Selenium](http://books.zkoss.org/wiki/Small_Talks/2009/February/How_to_Test_ZK_Application_with_Selenium) [http://books.zkoss.org/wiki/ ZK_Developer%27s_Reference/Testing/Testing_Tips](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/Testing/Testing_Tips)

来自乌克兰的问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:45:51.473

测试 ZK 应用程序的最简单方法是**ZTL**。你用过这个产品吗？这是一个用于测试的官方工具，您可以浏览下面的链接了解更多信息。

[ZTL](http://www.zkoss.org/product/ztl)

[没有 UUID 的 ZK Selenium 测试](http://blog.zkoss.org/index.php/2010/05/25/zk-selenium-testing-without-uuids/)

可能这会是你。

# javascript - 检测由 Tab 键启动的焦点？

> ID：16144611
> 
> 赞同：52
> 
> 时间：2013-04-22T10:16:09.553
> 
> 标签：javascript, jquery, event-handling, jquery-events

我想检测元素的焦点事件，但前提是它是由用户按 Tab 键启动的。例如：

```
<input type="text" id="foo" />
<input type="text" id="detect" /> 
```

如果用户专注于`#foo`并按下`Tab`，我希望事件在`#detect`成为焦点后触发（或者焦点事件中的条件为真）。相反，如果用户只是单击该`#detect`字段以使其聚焦，我不希望触发事件（或者我希望聚焦事件调用中的条件为 false）。

我不想使用 keydown 事件`#foo`并检查是否按下了 tab 键，因为我希望该方法独立于任何其他元素。

我查看了以下代码的控制台输出，但没有注意到两种聚焦方法之间的任何真正区别：

```
$('#detect').on('focus', function(e){
   console.log(e); 
}); 
```

（[小提琴](http://jsfiddle.net/LPGLm/)）

这有可能以相对简单的方式完成吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-22T10:38:56.820

我知道您已接受答案，但您可以使用以下命令测试按下的按钮：

```
$('#detect').on('focus', function(e){
    $(window).keyup(function (e) {
        var code = (e.keyCode ? e.keyCode : e.which);
        if (code == 9) {
           alert('I was tabbed!');
        }
    });
}); 
```

[http://jsfiddle.net/LPGLm/1/](http://jsfiddle.net/LPGLm/1/)

**编辑：**改变监听器：

```
$(window).keyup(function (e) {
    var code = (e.keyCode ? e.keyCode : e.which);
    if (code == 9 && $('#detect:focus').length) {
        alert('I was tabbed!');
    }
}); 
```

[http://jsfiddle.net/LPGLm/7/](http://jsfiddle.net/LPGLm/7/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-11-22T20:52:55.360

一个更具响应性的解决方案是使用两个侦听器：

```
var mousedown = false;
$('#detect').on('mousedown', function () {
    mousedown = true;
});

$('#detect').on('focusin', function () {
    if(!mousedown) {
        // logic
    }
    mousedown = false;
}); 
```

小提琴显示速度差异：

[http://jsfiddle.net/u2y45/1/](http://jsfiddle.net/u2y45/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T10:25:11.127

正如您所注意到的，事件对象本身并不区分访问方式。您*可以*做的是绑定一个`mousedown`侦听器，该侦听器将在之前触发`focus`，并设置一些时间戳标志，您可以将其与`focus`处理程序中的某个阈值进行比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T11:32:26.817

您可以通过此代码检查特定输入的焦点事件

```
$(window).on('keyup', function(event){
    if(event.keyCode == '9'){

      getFocused(event);
    }

})
var focused = 0;
function getFocused(e){
var ida =  $(':focus').eq(0).prop('id');
    if(ida=='detect' && focused==0){
        focused = 1;
        console.log(e);
    }
} 
```

[（小提琴）](http://jsfiddle.net/LPGLm/6/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-19T19:48:50.787

我使用以下内容：

```
(function() {
  const tabHistory = [];

  window.addEventListener('keyup', function (e) {
    const code = e.keyCode || e.which;
    const index = tabHistory.length === 0 ? 1 : tabHistory.length + 1;

    if (code == 9) {
      tabHistory.push({
        element: e.target,
        index
      });

      console.log(index, e.target, tabHistory);
    }
  });
})(); 
```

我建议跟踪关注的元素，这样可以确保用户能够按预期进行选项卡。

[![控制台截图](https://i.stack.imgur.com/v4btL.png)](https://i.stack.imgur.com/v4btL.png)

希望能帮助到你！

# iphone - 像打开带有动画的卡片一样翻转 uiview

> ID：16144614
> 
> 赞同：0
> 
> 时间：2013-04-22T10:16:39.883
> 
> 标签：iphone, objective-c, animation, flip

我正在开发一个应用程序，我必须在其中打开像这个视频这样的卡片。

[http://www.youtube.com/watch?v=srnRuhFvYl0&feature=youtu.be](http://www.youtube.com/watch?v=srnRuhFvYl0&feature=youtu.be)

有人可以建议我任何图书馆或任何方式，我可以在 2 uiviews 之间制作这种类型的动画

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:26:35.163

试试这个演示以获得你的效果。

[MPFlipViewController](https://github.com/mpospese/MPFlipViewController)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:00:29.323

试试看....

```
- (IBAction)viewCommentBtnClk:(id)sender
{
ShowCommentViewController *showCommentVC = [[ShowCommentViewController alloc]init];
showCommentVC.buss_id = business_id;
[UIView beginAnimations:@"animation" context:nil];
[UIView setAnimationDuration:1.0];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.navigationController.view cache:NO];
[self.navigationController pushViewController:showCommentVC animated:YES];
[UIView commitAnimations];
[self presentModalViewController:showCommentVC animated:YES];
[showCommentVC release];
} 
```

希望我有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T15:33:05.030

他们有很多可用于这个问题的帖子

[像书一样翻页](https://stackoverflow.com/questions/477078/turn-a-page-like-a-book-with-uiview)

[3d-door-open-animation-between-two-uiviewcontrollers](https://stackoverflow.com/questions/7685547/3d-door-open-animation-between-two-uiviewcontrollers)

[实施-ibooks-page-curling 这很棒](http://wdnuon.blogspot.in/2010/05/implementing-ibooks-page-curling-using.html)

希望您能从中找到解决方案......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T10:24:12.123

在这里你可以用波纹管动画实现逻辑..

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:1.0];
[UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:yourView2 cache:YES];// Here i set UIView2
[yourView1 removeFromSuperview];// And here i remove UIView1
[UIView commitAnimations]; 
```

在这里你也可以使用`UIViewAnimationTransitionCurlDown`而不是`UIViewAnimationTransitionCurlUp`

另请参阅此演示 ..[离开开发人员](https://github.com/ole/leaves/tree/twopages)

# angularjs - 我如何离开有角度的应用程序

> ID：16144619
> 
> 赞同：7
> 
> 时间：2013-04-22T10:16:53.827
> 
> 标签：angularjs

所以我有一个带有自定义路由设置的角度应用程序。

`<a>`任何角度范围之外的所有链接`$route`（在我的情况下，唯一的范围是`ng-view`）像正常一样导航（即标准位置更改和页面重新加载，好像角度不存在）

带有 $route （即 my ）的角度范围内的所有链接`ng-view`都通过角度进行路由`$routeProvider`- 它们被赋予模板和控制器。

**我的问题**

如何`<a>`在我的导航中创建一个链接，使其`ng-view`远离 Angular 应用程序，指向网站中不同的、静态的、非 Angular 位置？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T10:23:20.350

只需使用

```
<a target="_self" href="url"> 
```

# c# - 页面重定向而不更改 URL-Umbraco | C＃

> ID：16144629
> 
> 赞同：2
> 
> 时间：2013-04-22T10:17:26.543
> 
> 标签：c#, asp.net, umbraco, umbraco5, umbraco-blog

我在 Umbraco 中有两个模板。一个用于台式机，另一个用于移动设备。我有一个小脚本，它检测请求的用户代理并相应地重定向用户。

如果请求是从桌面发出的，则用户将被重定向到带有 URL 的桌面模板`www.abc.com`。

如果从移动设备发出请求，用户将被重定向到带有 url 的移动模板`www.abc.com/?alttemplate=mobilehomepage`

**如何使桌面和移动设备的 URL 相同。**

我正在使用`Response.Redirect`重定向。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T13:37:48.337

所有 umbraco 模板决策都通过 default.aspx(.cs) 运行，您可以通过重写 Page PreInit 方法以编程方式更改模板。

所以这就是我在 default.aspx.cs 文件中使用 templatenameMobile、templatenameDesktop 和 templateNameTablet 模板实现这一点的方法，显然你需要方法来说明你是在为移动设备、平板电脑还是桌面提供服务（你可以从用户代理中推断出来） ：

```
 protected override void OnPreInit(EventArgs e)
        {
            base.OnPreInit(e);

            string userAgent = Request.UserAgent;
            bool isTablet = IsTablet(userAgent);
            bool isMobile = IsMobile(userAgent);

            int templateId = umbraco.NodeFactory.Node.GetCurrent().template;
            umbraco.template template = new umbraco.template(templateId);
            string templateName = StripDevice(template.TemplateAlias);

            if (isTablet)
            {
                Page.MasterPageFile = GetTabletMaster(templateName);
            }
            else if (isMobile)
            {
                Page.MasterPageFile = GetMobileMaster(templateName);
            }
            else
            {
                Page.MasterPageFile = GetDesktopMaster(templateName);
            }

}

    public string GetMobileMaster(string templateName)
    {
        try
        {
            MasterPage masterPage = new MasterPage();
            masterPage.MasterPageFile = string.Format("/masterpages/{0}mobile.master", templateName);
            if (masterPage == null)
            {
                masterPage.MasterPageFile = string.Format("/masterpages/{0}desktop.master", templateName);
            }
            if (masterPage == null)
            {
                return Page.MasterPageFile;
            }
            else
            {
                return masterPage.MasterPageFile;
            }
        }
        catch (Exception ex)
        {
            umbraco.BusinessLogic.Log.Add(umbraco.BusinessLogic.LogTypes.Error, umbraco.BusinessLogic.User.GetUser(0), -1, "Switch template to MOBILE fail " + templateName + " : " + ex.Message);
            return Page.MasterPageFile;
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T10:45:14.987

您可以尝试使用 UrlRewriting。它包含在 Umbraco 中。尝试使用 config\UrlRewriting.config

这是文档：

[http://www.urlrewriting.net/160/en/documentation/documentation/documentation/documentation/documentation/documentation.html](http://www.urlrewriting.net/160/en/documentation/documentation/documentation/documentation/documentation/documentation.html)

# javascript - iphone/ipad web app mode - 允许跨子域链接在app模式下打开

> ID：16144633
> 
> 赞同：1
> 
> 时间：2013-04-22T10:17:32.300
> 
> 标签：javascript, ios, mobile-safari

我有网络应用程序在头部使用此代码以允许 iOS 设备以应用程序模式打开它（无 safari 页眉/页脚）

这是我的代码。

*来源取自[http://html5boilerplate.com/](http://html5boilerplate.com/)*

```
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="">

<script>
    (function (a, b, c) {
        if (c in b && b[c]) {
            var d, e = a.location,
                f = /^(a|html)$/i;

            a.addEventListener("click", function (a) {
                d = a.target;

                while (!f.test(d.nodeName)) d = d.parentNode && !$(noddy).hasClass('lightbox');
                "href" in d && (d.href.indexOf("http") || ~d.href.indexOf(e.host)) && (a.preventDefault(), e.href = d.href)

            }, !1)
        }
    })
    (document, window.navigator, "standalone")
</script> 
```

**我的问题**

我创建的这个网络应用程序是一个使用通配符子域映射的网络 wordpress 网站。

所以例如我的wordpress url是这样的......

*   **one.wordpress-network.com**
*   **二.wordpress-network.com**
*   **三.wordpress-network.com**
*   **四.wordpress-network.com**

好的，当我在**one.wordpress-network.com**上时我的问题出在我的网络应用程序中有一个链接到**two.wordpress-network.com**

如果我单击此链接，则它什么也不做。如何修改上面的脚本以允许我的**wordpress-network.com**的子域在 iOS 网络应用程序模式下访问。

提前感谢您的任何建议或代码。乔什

# android - 图像获取器不工作

> ID：16144634
> 
> 赞同：1
> 
> 时间：2013-04-22T10:17:34.487
> 
> 标签：android

我想在`TextView`活动内部显示包含一些图像的 html 文本。我无法显示图像。我正在使用`ImageGetter`. 如果我尝试显示本地可绘制对象，它可以工作，但是当我尝试从 url 获取图像时，它不会显示我的任何东西。这是我的代码：

```
package com.example.imagegetter;

import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.Drawable;
import android.text.Html;
import android.util.Log;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends Activity {
    String htmlTextWithImage = "<h1>Image Getter Example</h1>"
            + "<img src=\"http://allisonnazarian.com/wp-content/uploads/2012/02/random.jpg\"/>";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        TextView tv = (TextView) findViewById(R.id.tv);
        tv.setText(Html.fromHtml(htmlTextWithImage,new MyImageGetter(),null));
    }

    private class MyImageGetter implements Html.ImageGetter{

        @Override
        public Drawable getDrawable(String arg0) {
            Bitmap bitmap;
            try {
                bitmap = BitmapFactory.decodeStream(new URL(arg0).openStream());
                Drawable drawable = new BitmapDrawable(bitmap);
drawable.setBounds(0,0,drawable.getIntrinsicWidth(),drawable.getIntrinsicHeight());
                return drawable;
            } catch (Exception e) {
                Drawable d = getResources().getDrawable(R.drawable.ic_launcher);
                d.setBounds(0,0,d.getIntrinsicWidth(),d.getIntrinsicHeight());
                return d;
            }   
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:37:26.783

使用它转换位图-

bitmap=BitmapFactory.decodeStream((InputStream) new URL(arg0).getContent(), null, null);

检查此链接[Android HTML ImageGetter as AsyncTask](https://stackoverflow.com/questions/7424512/android-html-imagegetter-as-asynctask/7442725#7442725)

# html - 有没有办法防止设备在 iOS HTML5 Web 应用程序中休眠？

> ID：16144638
> 
> 赞同：0
> 
> 时间：2013-04-22T10:17:51.893
> 
> 标签：html, ipad

嗨，我想知道是否有 js 或其他方法可以防止设备在 iOS Web 应用程序中进入睡眠状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T20:08:38.847

如果您正在谈论使用 webview 的 iOS 应用程序，请从 js 本地调用以下方法。这需要原生 iOS 应用程序才能工作。

```
application.idleTimerDisabled = YES 
```

正如其他人指出的那样，真正的网络应用程序（非本机）的另一个技巧是不断播放音频文件。

```
<audio src="loop.mp3" onended="this.play();" controls="controls" autobuffer></audio> 
```

# sql - IS NULL 检查未执行的列

> ID：16144650
> 
> 赞同：-1
> 
> 时间：2013-04-22T10:18:07.613
> 
> 标签：sql, oracle, triggers, oracle10g

我有以下触发器：

```
CREATE OR REPLACE TRIGGER test 
  AFTER INSERT OR UPDATE ON table_cust 
  FOR EACH row 
BEGIN
   IF(:NEW.visibility_flag='True') THEN
      --Do something
   END IF;      

   IF(:NEW.visibility_flag is null) THEN
      --do something
   END IF;
END test; 
```

每次我检查 IS NULL 条件时，我的触发器都不会执行。如果删除了空检查，则执行。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:21:46.803

我认为那是您删除了“为空”部分，那么您将只有 IF(:NEW.visibility_flag) -> 就其而言，就像上一个 (if (expression = 'True') - 下面的示例你可以看到只有一个 IF 语句会被输入：

```
CREATE OR REPLACE TRIGGER test 
  AFTER INSERT OR UPDATE ON table_cust 
  FOR EACH row 
BEGIN
   IF(:NEW.visibility_flag='True') THEN
      --Do something
   ELSE IF(NVL(:NEW.visibility_flag, '0') = '0') THEN
      --do something
   END IF;
END test; 
```

# android - Android：即使在工作时，异步任务也会返回 null

> ID：16144653
> 
> 赞同：1
> 
> 时间：2013-04-22T10:18:14.530
> 
> 标签：android, android-asynctask

大家早上好，

我有一个从互联网下载图片的异步任务。我有三个带有名称的按钮，如果按下与已经下载的名称不同的名称，我希望它取消任务并使用新名称启动一个。

```
DownloadImageTask downloadPicTask = null;
int tasksRunning;

 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    rootView = inflater.inflate(R.layout.detail, container, false);

    fillData();

    return rootView;

}

public void fillData(){

    if(downloadPicTask != null){
        Log.i(TAG,"Trying to cancel task...");
        downloadPicTask.cancel(true);
    }else{
        Log.i(TAG,"why why why");
    }

    ... 

    downloadPicTask = new DownloadImageTask(imageView);
    downloadPicTask.execute(firstName,lastName);

tasksRunning = tasksRunning + 1;
    Log.i(tag,String.valueOf(tasksRunning));    
    ...

}

private class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {
    ImageView bmImage;
    boolean canceled = false;

    public DownloadImageTask(ImageView bmImage) {
        this.bmImage = bmImage;
    }

    @Override
    protected void onCancelled() {
       Log.i(TAG, "Async Cancelled");
        canceled = true;

    }

    protected Bitmap doInBackground(String... params) {
        ... //downloading the bitmap here

    }

    protected void onPostExecute(Bitmap result) {
        if(!canceled){
            bmImage.setImageBitmap(result);

        }
    }

} 
```

出于某种原因，一旦第一个任务开始并且我按了不同的名称，downloadPicTask 将返回 null，因此它不会取消。***这只发生在第一次取消尝试！*** 即使任务返回 null，它也可以正常运行，并在完成时设置 imageview。后续尝试取消任务都成功，因为第一次 downloadPicTask 后不再返回 null。

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:04:28.210

AsyncTask的`cancel()`方法不会中断您的`doInBackground()`方法，它只会导致`onCancelled()`被调用，而不是在`onPostExecute()`您的`doInBackground()`方法返回时调用。如果您希望能够取消执行，则`doInBackground()`需要定期调用`isCancelled()`您的`doInBackground()`方法并在检测到取消状态时提前返回。

有关详细信息，请参阅有关该方法的[文档。](http://developer.android.com/reference/android/os/AsyncTask.html#cancel%28boolean%29)`cancel()`

# c# - C# 代码中的 div 样式

> ID：16144657
> 
> 赞同：2
> 
> 时间：2013-04-22T10:18:21.780
> 
> 标签：c#

是否可以将 div 样式放在 C# 标签控件中？使用 iTextSharp。

```
var background = new Label
{
        Text = "<div style='margin-left: 40px;'>" + "<br/><b><u>" + LabelBackground.Text + "</u></b><br/>" + "<b>" + LabelDoB.Text + "</b>" + LabelDoBFromDb.Text +
                                                 "<br/>" + "<b>" + LabelPhone.Text + "</b>" + LabelPhoneFromDb.Text + "<br/>" + "<b>" + LabelEmail.Text + "</b>" +
                                                 LabelEmailFromDb.Text + "<br/>" + "<b>" + LabelPosition.Text + "</b>" +
                                                 LabelPositionFromDb.Text + "<br/>" + "</div>"
}; 
```

我的`<br/>`标签有效，但不是`<div>`

整个代码：

```
 //Create Document class object and set its size to letter and give space left, right, Top, Bottom Margin
            Document doc = new Document(PageSize.A4, 10, 10, 42, 35);

            try
            {
                PdfWriter.GetInstance(doc, new FileStream("c:\\Test11." + DropDownListDownload.SelectedItem.Text, FileMode.Create));
                var sv = new StringWriter();
                doc.Open();//Open Document to write 

                var hTextWriter = new HtmlTextWriter(sv);

                var background = new Label
                                     {
                                         Text = "<div style='margin-left: 40px;'>" + "<br/><b><u>" + LabelBackground.Text + "</u></b><br/>" + "<b>" + LabelDoB.Text + "</b>" + LabelDoBFromDb.Text +
                                             "<br/>" + "<b>" + LabelPhone.Text + "</b>" + LabelPhoneFromDb.Text + "<br/>" + "<b>" + LabelEmail.Text + "</b>" +
                                             LabelEmailFromDb.Text + "<br/>" + "<b>" + LabelPosition.Text + "</b>" +
                                             LabelPositionFromDb.Text + "<br/>" + "</div>"
                                     };
                background.RenderControl(hTextWriter);

                //LANGUAGES
                string languages = string.Empty;
                var lbLanguages = new Label();
                foreach (var vLang in BulletedListLanguages.Items)
                {
                    languages += vLang + "<br/>";
                }

                lbLanguages.Text = "<br/><b><u>" + LabelLanguages.Text + "</u></b><br/>" + languages;
                lbLanguages.RenderControl(hTextWriter);

                String strHtml1 = sv.ToString();

                var hw = new HTMLWorker(doc);
                hw.Parse(new StringReader(strHtml1));
            }

            finally
            {
                doc.Close();
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:24:13.293

我认为`asp:Literal`在这种情况下最好添加。所以标签的默认 asp 样式不会有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:20:59.437

您可以将标签添加到某些控件（根据您的需要查看“文字”标签），但是，您可能会发现使用[CssClass 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.cssclass.aspx)添加类会更好。

```
Label label = new Label();
label.CssClass="class";
label.Text = "My content"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:22:59.860

您将 a`<div>`放入标签中，这在语义方面是个坏主意。我个人会做的是制作一个`Panel`标签，`<div`无论如何都会呈现 > 。

IE

```
var background = new Panel();

var text = new Literal
{
        Text = "<br/><b><u>" + LabelBackground.Text + "</u></b><br/>" + "<b>" + LabelDoB.Text + "</b>" + LabelDoBFromDb.Text +
                                                 "<br/>" + "<b>" + LabelPhone.Text + "</b>" + LabelPhoneFromDb.Text + "<br/>" + "<b>" + LabelEmail.Text + "</b>" +
                                                 LabelEmailFromDb.Text + "<br/>" + "<b>" + LabelPosition.Text + "</b>" +
                                                 LabelPositionFromDb.Text + "<br/>"
};

background.Controls.Add(text);

background.Attributes["margin-left"] = "40px"; // Preferably, I'd add a class and do this plainly in CSS. 
```

而且，这取决于你如何做，但在代码可维护性和设计方面，我会这样做：

(aspx)

```
<div style="margin-left: 40px">
    <br/><b><u><asp:Literal runat="server" ID="DisplayLabelBackground" /></u></b> // etc, but I *definitely* wouldn't use <b> and <u> tags either
</div> 
```

然后，在您的代码中：

```
DisplayLabelBackground.Text = LabelBackground.Text; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T10:34:11.550

asp:Label 渲染一个作为内联标签的跨度。因此，您不能将 div 放在跨度中。您可以用带有 runat 服务器的简单 div 替换您的标签，并将您的文本与 InnerHtml 或 InnerText 属性

aspx

```
<div id="myDiv" runat="server" style="margin-left:40px"></div> 
```

aspx.cs

```
myDiv.InnerHtml = "..." 
```

# linux - 守护进程拒绝执行不安全的程序

> ID：16144662
> 
> 赞同：2
> 
> 时间：2013-04-22T10:18:35.267
> 
> 标签：linux, ubuntu, python-daemon, start-stop-daemon

我想在系统启动后启动服务，这是我在**/etc/rc.local**中的脚本：

```
daemon /usr/bin/python /usr/local/google/home/yowang/Downloads/ftp.py > /var/log/pyftpd.log 2>&1 
```

/var/log/pyftpd.log 的错误输出如下所示：

```
daemon: ignoring unsafe /etc/daemon.conf (/ is group and world writable)
daemon: fatal: refusing to execute unsafe program: /usr/bin/python (/ is group and world writable) 
```

任何人都可以帮忙吗？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:51:37.267

您的权限一团糟。

系统认为每个人（组和世界）都可以编写和更改这些文件。

尝试（su 为 root 或添加 sudo）：

```
#chmod 644 /etc/daemon.conf
#chmod 755 /usr/bin/python 
```

# html - 条件注释未按预期工作

> ID：16144663
> 
> 赞同：0
> 
> 时间：2013-04-22T10:18:40.017
> 
> 标签：html, internet-explorer, conditional-comments

我正在开发一个网站，我发现来的内容在 IE 上显示不正确，所以我想用其他与 IE 兼容的内容替换它们。

这就是我正在使用的：

```
<!--[if !IE]> -->
    <div id="container">
        This is not IE, you are seeing the normal content
    </div>
<!-- <![endif]-->

<!--[if IE]>
    <div id="container">
        This is IE, you are seeing IE-compatible content
    </div>
<![endif]--> 
```

问题是 IE 版本 < 10，甚至是兼容模式为 ON 的版本 10 我看到了

```
This is IE, you are seeing IE-compatible content 
```

但是在兼容模式关闭的 IE 10 中，我看到了

```
This is not IE, you are seeing the normal content 
```

为什么？

对于那些想尝试的人：[JSFiddle](http://jsfiddle.net/G6STq/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:20:06.757

IE10不再有条件注释

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:26:49.870

Internet Explorer 10[删除了对条件注释](http://blogs.msdn.com/b/ie/archive/2011/07/06/html5-parsing-in-ie10.aspx?Redirected=true)的支持，因此它们现在被视为常规注释。

# node.js - node-amqp 无法向 RabbitMQ 发送消息

> ID：16144665
> 
> 赞同：9
> 
> 时间：2013-04-22T10:18:46.693
> 
> 标签：node.js, rabbitmq, amqp, node-amqp

我正在尝试[rabbitmq-tutorials](https://github.com/rabbitmq/rabbitmq-tutorials)，ruby 版本可以正常工作，但是 node.js 版本无法发送消息。我不知道出了什么问题。

```
var amqp       = require('amqp');
var amqp_hacks = require('./amqp-hacks');

var connection = amqp.createConnection({host: 'localhost'});

connection.on('ready', function(){
    connection.publish('hello_node', 'Hello World!');
    console.log(" [x] Sent 'Hello World!'");

    amqp_hacks.safeEndConnection(connection);
}); 
```

运行后`node send.js`，运行过程`node recv.js`无法接收任何内容。并且`rabbitmqctl list_queues`不显示`hello_node`队列。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T19:27:36.387

您需要指明队列然后发布。该版本应该有效：

```
 var amqp       = require('amqp');
    var amqp_hacks = require('./amqp-hacks');

    var connection = amqp.createConnection({host: 'localhost'});

    connection.on('ready', function(){
            connection.queue('hello_node', {'durable': false}, function(q){
                connection.publish('hello_node', 'Hello World!');
                console.log(" [x] Sent 'Hello World!' to 'hello_node'");

                amqp_hacks.safeEndConnection(connection);
            });
    }); 
```

# xcode - 即使在将 .m 类文件链接到 Xcode 中的构建阶段后，Apple Mach-O 链接器也会出现重复符号错误

> ID：16144666
> 
> 赞同：2
> 
> 时间：2013-04-22T10:18:46.877
> 
> 标签：xcode, ios6, linker-errors, objective-c++, mach-o

当我构建并运行我的项目时，我得到的唯一错误是 Apple Mach-O 链接器错误

**架构 i386 的 20 个重复符号**

**链接器命令失败，退出代码为 1（使用 -v 查看调用）**

问题是我已经检查了我的项目中是否存在任何重复的类文件、图片、音频文件（没有）。我已将所有 .m 文件导入到***build phase-> compile sources***。还***通过二进制库链接***导入正确的框架，并检查图片、xib、音频文件是否已正确导入到***复制包资源***中，到目前为止一切看起来都很好。但事实并非如此，当我尝试运行该项目时，链接器错误仍然存​​在。谁能告诉我我哪里出错了？

```
 Ld /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Products/Debug-iphonesimulator/Taukytable.app/Taukytable normal i386
        cd "/Users/User/Desktop/Taukytable Newone"
        setenv IPHONEOS_DEPLOYMENT_TARGET 6.0
        setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
        /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk -L/Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Products/Debug-iphonesimulator -F/Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Products/Debug-iphonesimulator -filelist /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/Taukytable.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -fobjc-link-runtime -Xlinker -no_implicit_dylibs -stdlib=libc++ -mios-simulator-version-min=6.0 -framework CoreAudio -framework CoreMedia -framework CoreFoundation -framework Accelerate -framework CoreData -framework CoreVideo -framework Security -framework CoreImage -framework MessageUI -framework MobileCoreServices -framework AVFoundation -framework QuartzCore -framework SystemConfiguration -framework OpenGLES -framework AssetsLibrary -lsqlite3.0 -framework AudioToolbox -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Products/Debug-iphonesimulator/Taukytable.app/Taukytable
    duplicate symbol _SavedImage in:
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/AppDelegate.o
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/MasterViewController.o
    duplicate symbol _SavedImage1 in:
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/AppDelegate.o
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/MasterViewController.o
    duplicate symbol _vvvalue in:
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/AppDelegate.o
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/MasterViewController.o
    duplicate symbol _lll in:
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/AppDelegate.o
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/MasterViewController.o
    duplicate symbol _vvvalue in:
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/AppDelegate.o
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/PAsavee.o
    duplicate symbol _SavedImage in:
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/AppDelegate.o
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/PAsavee.o
    duplicate symbol _lll in:
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/AppDelegate.o
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/PAsavee.o
    duplicate symbol _SavedImage1 in:
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/AppDelegate.o
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/PAsavee.o
    duplicate symbol _SavedImage in:
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/AppDelegate.o
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/Preview.o
    duplicate symbol _SavedImage1 in:
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/AppDelegate.o
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/Preview.o
    duplicate symbol _vvvalue in:
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/AppDelegate.o
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/Preview.o
    duplicate symbol _lll in:
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/AppDelegate.o
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/Preview.o
    duplicate symbol _SavedImage in:
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/AppDelegate.o
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/NSObject+ShareClass.o
    duplicate symbol _SavedImage1 in:
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/AppDelegate.o
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/NSObject+ShareClass.o
    duplicate symbol _vvvalue in:
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/AppDelegate.o
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/NSObject+ShareClass.o
    duplicate symbol _lll in:
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/AppDelegate.o
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/NSObject+ShareClass.o
    duplicate symbol _vvvalue in:
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/AppDelegate.o
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/CustomOverlayView.o
    duplicate symbol _SavedImage in:
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/AppDelegate.o
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/CustomOverlayView.o
    duplicate symbol _SavedImage1 in:
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/AppDelegate.o
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/CustomOverlayView.o
    duplicate symbol _lll in:
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/AppDelegate.o
        /Users/User/Library/Developer/Xcode/DerivedData/Taukytable-bwphmaegucpyjhfinxfulunsuhag/Build/Intermediates/Taukytable.build/Debug-iphonesimulator/Taukytable.build/Objects-normal/i386/CustomOverlayView.o
    ld: 20 duplicate symbols for architecture i386
    clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T15:22:33.067

这真的是非常基本的初学者东西，向我暗示你不理解 C 系列语言的“头文件”和“实现文件”之间的区别。

您是否搜索过您的项目并没有注意到您在头文件中声明变量但没有`extern`？您甚至在链接器错误中有全局变量的名称。是的，全局变量作为符号发送到目标文件 (.o) 中，如果您在三个文件中包含头文件并且所有三个文件都声明相同的全局变量，则会出现此错误。正是为了这个问题，`extern`才发明了强大而美妙的关键词。

在头文件的上下文中，您不应声明实际变量，而应仅声明`extern`对它们的引用。这是您在 C、C++ 或 Objective C 编程的第一天就应该学习的东西。但是，您可以将代码放入头文件中，但是，包含该头文件的每个文件都会生成一组重复的符号，从而导致链接错误，并进一步加快全球变暖的步伐，并导致冰山融化。（只是在开玩笑说最后一部分。）

这是您的错误，这是一个头文件，但您将其视为实现文件并声明不是外部变量声明而是实际发出全局变量到对象文件声明：

```
#import <Foundation/Foundation.h>

UIImage *SavedImage;
UIImage *SavedImage1;

NSString * vvvalue;
//UILabel * l2;
NSString * lll;

@interface NSObject (ShareClass)

@end 
```

你现在告诉我。关键字应该`extern`出现在上面的代码示例中的什么位置？变量的真正“将此变量发送到目标文件”声明在哪里？在头文件中？不。在实现文件中（.m 或 .c 或 .cpp 视情况而定）。

其次，在添加了 extern 关键字之后，您现在遇到了第二个问题。您可能需要在相应`.m`文件中添加该全局变量的真实声明。是的，没错，您必须在 C 系列语言程序中“声明”每个全局两次。如果您确实需要系统中的所有模块才能*看到该全局变量*，则一次作为头文件中的 extern 一次，一次没有 extern 关键字，仅在您的一个 .m 文件中。

当然，您确实知道要避免这种“全局变量混乱”，并且是糟糕的编程习惯，对吗？您应该考虑将全局变量保留在代码之外，并尽可能使用将其范围限制为单个实现模块的变量。

在 .h 文件中：

```
extern UIImage * myImage; 
```

在 .m 文件中：

```
UIImage *myImage; 
```

请阅读您的书，了解`extern`关键字的含义。另外，我怀疑您可能打算这样做：

```
@interface NSObject (ShareClass)
  UIImage * InstanceVariable;  
@end 
```

上面是一个实例变量（属于类的每个实例）。如果您需要将一些东西分组并将其放在一个对象中而不是使其成为全局变量，这是很常见的。

# ios - NSTextAlignmentJustified 抛出错误

> ID：16144671
> 
> 赞同：-1
> 
> 时间：2013-04-22T10:19:03.877
> 
> 标签：ios, objective-c

这是代码： -

`lblValue`是 UILabel 的一个实例。

```
[lblValue setText:@"Some Big String"];
[lblValue setTextAlignment: NSTextAlignmentJustified]; 
```

错误：`*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'textAlignment does not accept NSTextAlignmentJustified'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:22:14.657

如果您使用的是 iOS6，则不`UITextAlignment`推荐使用。为此，您可以使用[NSAttributedString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSAttributedString_Class/Reference/Reference.html)或使用一些具有精细对齐的第 3 方属性标签。

**UIKit**

> NSString 绘图添加和 UILabel 不支持 NSTextAlignmentJustified 或 NSTextAlignmentNatural 文本对齐方式。相反，使用支持文本对齐的 NSAttributedString 绘图添加。

**[来自 UILabel 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UILabel_Class/Reference/UILabel.html)**

> 如果您在 iOS 6 或更高版本中使用样式化文本，则为该属性分配一个新值会导致文本对齐应用于属性文本属性中的整个字符串。如果您只想将对齐应用到文本的一部分，请使用所需的样式信息创建一个新的属性字符串并将其与标签相关联。如果您不使用样式文本，则此属性适用于 text 属性中的整个文本字符串。

# django - 我怎样才能让我的南方移民工作？

> ID：16144674
> 
> 赞同：6
> 
> 时间：2013-04-22T10:19:15.977
> 
> 标签：django, migration, django-south

我在南方与我的 django 项目一起工作时遇到了麻烦，我遵循了关于将应用程序转换为南方的南方文档，也看了这里（[为什么我的南方迁移不起作用？](https://stackoverflow.com/questions/4840102/how-come-my-south-migrations-doesnt-work-for-django)）但一切都是徒劳的。

添加到南`INSTALLED_APPS`并运行后`syncdb`，

```
Synced:
 > django.contrib.messages
 > django.contrib.staticfiles
 > smartmin
 > nsms.console
 > django_extensions
 > pagination
 > restaurant_detail
 > live
 > debug_toolbar
 > orders
 > django.contrib.admindocs

Not synced (use migrations):
 - django.contrib.auth
 - django.contrib.contenttypes
 - django.contrib.sessions
 - django.contrib.sites
 - guardian
 - south
 - django_quickblocks
 - rapidsms
 - rapidsms_httprouter
 - sorl.thumbnail
 - djangoratings
 - agon_ratings
 - django.contrib.admin
(use ./manage.py migrate to migrate these) 
```

此时我执行此命令，`python manage.py migrate`这给出了错误`django.db.utils.DatabaseError: relation "south_migrationhistory" does not exist LINE 1: ...gration", "south_migrationhistory"."applied" FROM "south_mig...` 我在这里做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-22T11:01:54.047

如果这是您的第一次迁移，或者您只想重新开始：

1.  删除并创建您当前的数据库
2.  删除您的迁移目录：`rm -Rf your_app/migrations/`
3.  只需一个命令即可同步和迁移：`python manage.py syncdb --migrate`

下一次迁移需要：

1.  `python manage.py schemamigration your_app --auto`
2.  `python manage.py migrate your_app`

这对我行得通 ：）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-26T12:34:21.053

这一切都是因为我的南方`site_packages`已经有一个迁移目录，我不知道它在那里。当我摆脱目录时，一切都很好。向那些辛勤工作以解决由于我的心不在焉引起的问题的 stackoverflow 人员表示歉意。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-23T22:49:44.320

这个问题可以通过遵循善意的建议来解决：如果您`python manage.py schemamigration south --initial`在调试尝试中的任何时候尝试过，您将在 South 应用程序本身的站点包中创建一个“迁移”文件夹。不幸的是，`migrations`文件夹的存在是 South 在执行更改后的 syncdb 进程时确定是否应该跳过应用程序的方式。包括如果那个应用程序......是南方。

当您删除数据库并尝试从头开始调试时，South 修改后的 syncdb 将跳过创建`south_migrationhistory`表，假设迁移文件夹会更好地了解，并且迁移表需要该`south_migrationhistory`表才能工作。

要解决问题：

1.  进入您的站点包并删除`migrations/`南应用程序中的文件夹。
2.  最后运行`python ./manage.py syncdb`一次

通过 pip 卸载/重新安装 South 实际上不会删除它，因为它会使有问题的文件夹保持不变。

或者，[Marius Grigaitis](https://stackoverflow.com/questions/9626979/problems-installing-south-with-django-south-migrationhistory-tables-do-not-get)提出了针对同一错误的解决方法，尽管当时它被归咎于南方虫子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T11:06:46.353

您必须先迁移 south 本身以创建 south 表，然后才能迁移其他应用程序：

```
# python manage.py migrate south
# python manage.py migrate 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T18:28:33.960

似乎没有在您的数据库中创建迁移表。这有点奇怪，也许这会起作用：

```
python manage.py schemamigration south --initial
python manage.py migrate south 
```

然后继续其他迁移。

# websocket - 使用 chrome 框架代替 SockJS

> ID：16144682
> 
> 赞同：0
> 
> 时间：2013-04-22T10:19:39.193
> 
> 标签：websocket, push-notification, go, google-chrome-frame, sockjs

我正在使用 Go 编程语言创建 Web 应用程序。

在我的项目中，我需要支持 IE>=8，Firefox >=13 Opera >=12 ...
项目的一部分依赖于实时推送通知。Go 没有很好地支持 Socket.IO 或 SockJS 从 http 推送方法中抽象出来，但它内置了对 websockets 的支持。

我想使用 Go websockets 在 Go 中实现实时推送模块 - 在 http Web 应用程序中，而不是使用 SockJS 的其他语言创建其他服务。这将需要 IE8、IE9 用户安装[chrome frame](https://developers.google.com/chrome/chrome-frame/)插件。

**Q：**这个方案除了强制IE8和IE9用户安装chrome frame外，还有什么缺点吗？

**Q2**为推送通知提供单独的服务有什么优点吗？（除了具有更好的浏览器兼容性）？

优点是我不需要维护单独的服务，我可以重用 Go 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:13:30.497

听起来你对权衡有一个很好的想法。只有您才能知道您的用户是否可以接受安装镀铬框架。

如果您只/大部分需要将数据推送给用户，那么还要查看 EventSource API。它得到更广泛的支持并且在服务器上实现起来非常简单。

# r - c() 和 append() 的区别

> ID：16144683
> 
> 赞同：42
> 
> 时间：2013-04-22T10:19:41.943
> 
> 标签：r, function

使用`c()`和 和有什么不一样`append()`？有没有？

```
> c(      rep(0,5), rep(3,2) )
[1] 0 0 0 0 0 3 3

> append( rep(0,5), rep(3,2) )
[1] 0 0 0 0 0 3 3 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-22T10:32:32.293

您使用它的方式并没有显示`c`和之间的区别`append`。*在某种意义上是不同的，它允许在某个位置之后将*`append`值插入到向量中。

 *例子：

```
x <- c(10,8,20)
c(x, 6) # always adds to the end
# [1] 10 8 20 6
append(x, 6, after = 2)
# [1] 10  8  6 20 
```

如果您输入`append`R 终端，您会看到它用于`c()`附加值。

```
# append function
function (x, values, after = length(x)) 
{
    lengx <- length(x)
    if (!after) 
        c(values, x)
    # by default after = length(x) which just calls a c(x, values)
    else if (after >= lengx) 
        c(x, values)
    else c(x[1L:after], values, x[(after + 1L):lengx])
} 
```

您可以看到（注释部分）默认情况下（如果您没有`after=`像示例中那样设置），它只是返回`c(x, values)`. `c`是一个更通用的函数，可以将值连接到`vectors`or `lists`。*

# android - GPS 位置更改时更新用户覆盖可绘制的问题

> ID：16144686
> 
> 赞同：0
> 
> 时间：2013-04-22T10:19:49.980
> 
> 标签：android, geolocation, overlay, android-mapview, itemizedoverlay

我正在使用 Mapsforge 显示离线地图，我想实时显示用户 GPS 位置。我有一个 Overlay 类，它表示地图上显示可绘制对象的用户位置。

当设备接收到新的 GPS 位置时，将调用 Overlay 类的方法。方法是locationChanged。该方法改变Overlay的位置并调用mapView.invalidate()；

它适用于 GoogleMaps，但不适用于 Mapsforge。使用 Mapsforge，drawable 第一次正确显示用户的 GPS 位置，但是当设备接收到新的 GPS 位置时，drawable 不会移动。只有当用户用手指移动地图时才会移动。我认为 Mapsforge 库的 invalidate() 方法无法正常工作。

方法 locationChanged 被调用，因为我用断点检查了它。位置被正确接收并且 mapView 的实例是正确的。

这是我的覆盖类：

```
public class CapoMyLocationOverlay extends Overlay implements CapoLocationListener{
    Bitmap pointer;
    GeoPoint location;
    int radius;
    boolean valid_location;
    public MapView mapView;

    public CapoMyLocationOverlay(MapView mapView){       
        Drawable d = ApplicationContextProvider.getContext().getResources().getDrawable(R.drawable.target_location);
        pointer = ((BitmapDrawable) d).getBitmap();
        radius = pointer.getWidth() / 2;       
        valid_location = false;
        this.mapView=mapView;
    }

    @Override
    protected void drawOverlayBitmap(Canvas canvas, Point drawPosition, Projection projection, byte drawZoomLevel) {
        if( valid_location ){           
            Point screenPts = new Point();
            //GeoPoint location = SectionManager.instance.lastLocationGeoPoint;
            mapView.getProjection().toPixels( location , screenPts);
            canvas.drawBitmap(pointer, screenPts.x-radius, screenPts.y-radius , null);   
        }       
    }   

    @Override
    public void locationChanged(Location newLocation) {
        location = new GeoPoint( (int)(newLocation.getLatitude() * 1000000) , (int)(newLocation.getLongitude()*1000000) );       
        valid_location = true;
        mapView.invalidate();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-06T05:32:39.480

I had the exact same problem, after some searching, I did the simplest thing:

```
 new Timer().scheduleAtFixedRate(tasknew, 500, 1000);
        TimerTask tasknew = new TimerTask() {
                    @Override
                    public void run() {
                        Refresh();
                    }
                }; 
```

Well, we needed to refresh the MapView, but since "mfMapView.invalidate();" was going to call another thread to edit UI,we couldn't use that kinda refresh, so the easiest way to refresh with least overload was the lines below

```
 public void Refresh() {

            mfMapView.getModel().mapViewPosition.setZoomLevelMin((byte) 00);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:42:26.717

您是否尝试过使用或扩展`MyLocationOverlay`？这可能会更简单。至少，你可以从它的[代码](https://code.google.com/p/mapsforge/source/browse/mapsforge-map/src/main/java/org/mapsforge/android/maps/overlay/MyLocationOverlay.java)中得到灵感：

```
 @Override
    public void onLocationChanged(Location newLocation) {
            synchronized (this) {
                    location = new GeoPoint((int)(newLocation.getLatitude() * 1000000) , (int)(newLocation.getLongitude()*1000000));
                    // [...]
            }
            mapView.getOverlayController().redrawOverlays();
    } 
```

# ruby-on-rails - 如何触发电子邮件？导轨

> ID：16144699
> 
> 赞同：1
> 
> 时间：2013-04-22T10:20:35.077
> 
> 标签：ruby-on-rails, ruby, actionmailer

我想在@post 视图中触发邮件“操作”。

```
class UserMailer < ActionMailer::Base
  default from: "example@gmail.com"

  def newsletter(post)
    @greeting = ""
    @users = User.all
    @users.each do |user|
      mail to: user.email, subject: post.title
    end
  end
end 
```

* * *

```
 = button_to 'Deliver' do
    UserMailer.newsletter(@post).deliver
  end 
```

如果我按下此按钮，它会在明显存在时弹出错误“No route matches posts/6”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:05:00.233

您必须编写一个操作，该操作将调用 UserMailer.newsletter(@post).deliver

```
def send_newsletter
  @post = Post.find params[:id]
  UserMailer.newsletter(@post).deliver
  render :nothing => true 
end 
```

添加必要的路线，并将按钮链接到该操作

在路线.rb

```
resources :posts do
  member do
    get :send_newsletter
  end
end 
```

在视图中

```
link_to 'Deliver', send_newsletter_post_path(@post) 
```

此外，您可以更改 get 方法以发布和提交用于发送时事通讯的表单

# actionscript-3 - 在 as3 中停止嵌入的声音

> ID：16144701
> 
> 赞同：0
> 
> 时间：2013-04-22T10:20:43.790
> 
> 标签：actionscript-3, audio

我的声音作为 Assets 类嵌入

```
[Embed(source="../../assets/gameloop.mp3")]
        private static var gameLoopSound:Class;
        public static var gameLoop:Sound; 
```

声音在另一个班级播放

```
Assets.gameLoop.play() 
```

但我该如何停止这种声音？在我看来， .stop() 方法将是显而易见的方法，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:44:49.873

使用这种方法，您会丢失`SoundChannel`可用于停止正在播放的声音的对象的链接。你做了两件事：首先，创建一个公开可用的类型变量`SoundChannel`并将调用的结果值分配给它`Assets.gameLoop.play()`。其次，`yourVariable.stop()`在你需要音乐停止的地方放一个。您很可能会在`Assets`课堂上使用另一个变量。但是，为了更好的安全性，请创建一对静态函数来处理这对变量，如下所示：

```
private static var gameLoopChannel:SoundChannel;
private static var gameLoop:Sound=new gameLoopSound(); 

public static function playGameLoop():void {
    if (gameLoopChannel) return;
    gameLoopChannel=gameLoop.play();
}
public static function stopGameLoop():void {
    if (!gameLoopChannel) return; // no sound is being played
    gameLoopChannel.stop();
    gameLoopChannel=null;
} 
```

# oracle11g - Apex 4.2 - 为表中的 1 条记录选择多个项目

> ID：16144705
> 
> 赞同：1
> 
> 时间：2013-04-22T10:21:07.277
> 
> 标签：oracle11g, oracle-apex

我有一个表，其中的一列每行包含多个、一个或没有值。

使用 Apex，我认为可以自动定义这些值的唯一字段（需要动态填充，因为可以更改）是穿梭。

有没有办法将列值更改为穿梭列表？将右侧的值作为逗号分隔值（或其他任何值）输入到数据库的列中？

例如我的表：用户 varchar - 只是他们的名字 Role(s) varchar - 与该用户相关的无/一个/多个角色分隔

谢谢，瑞克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:03:02.110

如果您希望将值存储在这样的单个列中：

> 角色 1：角色 2：角色 3

然后穿梭机可以满足您的一切需求。保存页面时，您在穿梭右侧选择的任何值都使用冒号作为项目值连接在一起。同样，当从数据库中加载像“ROLE6:ROLE7”这样的值时，这两个角色将出现在穿梭机的右侧。

如果您想将它们分开存储在单独的数据库行中，您可以使用以下函数`apex_util.string_to_table`：

```
declare
    l_tab apex_application_global.vc_arr2;
begin
    l_tab := apex_util.string_to_table(:p1_role_shuttle);
    for i in 1..l_tab.count loop
        -- l_tab(i) contains the i'th role selected.
    end loop;
end; 
```

也有`apex_util.table_to_string`做相反的事情。

# iphone - CGAffineTransformMakeScale 无法正常运行

> ID：16144706
> 
> 赞同：0
> 
> 时间：2013-04-22T10:21:08.723
> 
> 标签：iphone, core-graphics, cgaffinetransform, uianimation

我遇到了麻烦`CGAffineTransformMakeScale`。我正在显示一个视图并使用下面的代码隐藏它。这是第一次完美地显示和解雇。但之后它不再出现。在我打印日志后，它实际上已经超出了屏幕 coorediantes。

我在解雇中应用重置转换，使用`CGAffineTransformIdentity`但仍然无法正常工作。

```
 - (void) showWithAnimation
    {
        float mheight = customView.frame.size.height;

        UIWindow *keyWindow = [UIApplication sharedApplication].keyWindow;

        if(!keyWindow)
        {
            NSArray *windows = [UIApplication sharedApplication].windows;

            if(windows.count > 0)
                keyWindow = [windows lastObject];

            keyWindow = [windows objectAtIndex:0];
        }

        UIView *containerView = [[keyWindow subviews] objectAtIndex:0];

        CGRect frame = customView.frame;
        frame.origin.y = -mheight;
        customView.frame = frame;

        NSLog(@"customView - %@", customView);

        [containerView addSubview:customView];

        customView.alpha = 0;
        customView.transform = CGAffineTransformMakeScale(0.01, 0.01);
        customView.center = CGPointMake((ScreenBounds().size.width / 2) - 24, ScreenBounds().size.height / 2);

        NSLog(@"customView After applying transfrom - %@", customView);

        [UIView animateWithDuration:0.3
                              delay:0.0
                            options:UIViewAnimationCurveEaseInOut
                         animations:^{
                             customView.transform = CGAffineTransformMakeScale(1, 1);
                                customView.alpha = 1;
                         }
                         completion:^(BOOL finished){

                             self.isVisible = YES;
                             NSLog(@"customView Displayed .....");
                             NSLog(@"customView - %@", customView);
        }];
    }

    - (void)dismissWithAnimation
    {
        [UIView animateWithDuration:0.3
                              delay:0.0
                            options:UIViewAnimationCurveEaseInOut
                         animations:^{
                             customView.transform = CGAffineTransformMakeScale(0.01, 0.01);
                             customView.alpha = 0;
                         }
                         completion:^(BOOL finished)
                         {
                             self.isVisible = NO;

**//Edit: I tried applying CGAffineTransformIdentity at here**

                             [customView removeFromSuperview];
                         }];
    } 
```

以下是日志，

```
--> 1st time logs

customView -> <UIView: 0x205a1e50; frame = (24 -150; 272 150); layer = <CALayer: 0x205a1eb0>>

customView After applying transfrom - <UIView: 0x205a1e50; frame = (134.64 283.25; 2.72 1.5); transform = [0.01, 0, 0, 0.01, 0, 0]; alpha = 0; layer = <CALayer: 0x205a1eb0>>

customView Displayed .....
customView - <UIView: 0x205a1e50; frame = (0 209; 272 150); layer = <CALayer: 0x205a1eb0>>

--> 2nd time logs

customView -> <UIView: 0x205a1e50; frame = (24 -204; 272 204); transform = [0.01, 0, 0, 0.01, 0, 0]; alpha = 0; animations = { transform=<CABasicAnimation: 0x2072c620>; opacity=<CABasicAnimation: 0x2072df20>; }; layer = <CALayer: 0x205a1eb0>>

customView After applying transfrom - <UIView: 0x205a1e50; frame = (3.03984e-06 182; 272 204); transform = [0.01, 0, 0, 0.01, 0, 0]; alpha = 0; animations = { transform=<CABasicAnimation: 0x2072c620>; opacity=<CABasicAnimation: 
0x2072df20>; }; layer = <CALayer: 0x205a1eb0>>

customView Displayed .....

customView - <UIView: 0x205a1e50; frame = (-13464 -9916; 27200 20400); layer = <CALayer: 0x205a1eb0>> 
```

这是怎么回事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:00:39.637

我总是检查动画是否完成......并在动画开始之前重置动画......像这样......

```
 // skipping some of ur code... 

    customView.transform = CGAffineTransformMakeScale(0.01, 0.01);
        [UIView animateWithDuration:0.3
                              delay:0.0
                            options:UIViewAnimationCurveEaseInOut
                         animations:^{
                             customView.transform = CGAffineTransformMakeScale(1, 1);
                                customView.alpha = 1;
                         }
                         completion:^(BOOL finished){
                         if (finished)
                         {

                             customView.transform = CGAffineTransformMakeScale(1, 1);
                                customView.alpha = 1;

                             self.isVisible = YES;
                             NSLog(@"customView Displayed .....");
                             NSLog(@"customView - %@", customView);
                         }
        }]; 
```

//关闭动画

```
- (void)dismissWithAnimation
{
    customView.transform = CGAffineTransformMakeScale(1.0, 1.0);
    [UIView animateWithDuration:0.3
                          delay:0.0
                        options:UIViewAnimationCurveEaseInOut
                     animations:^{
                         customView.transform = CGAffineTransformMakeScale(0.01, 0.01);
                         customView.alpha = 0;
                     }
                     completion:^(BOOL finished) {
                     if (finished)
                     {
                         self.isVisible = NO;
                         customView.transform = CGAffineTransformMakeScale(0.01, 0.01);
                         customView.alpha = 0;
                        [customView removeFromSuperview];
                    }

                     }];
} 
```

// 编辑 - 试试这个。

```
customView.alpha = 0;

customView.transform = CGAffineTransformIdentity; //Reset the transformation...
customView.transform = CGAffineTransformMakeScale(0.01, 0.01);

customView.center = CGPointMake((ScreenBounds().size.width / 2) - 24, ScreenBounds().size.height / 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T08:38:35.217

使用以下功能添加.....

```
-(void) addSubViewWithPopUpAnimation:(UIView *)subView toView:(UIView *)containerView
{
    [subView setTransform:CGAffineTransformMakeScale(0.1, 0.1)];

    [subView setAlpha:0.0f];

    [containerView addSubview:subView];

    [UIView animateWithDuration:0.3 animations:^
     {
         [subView setTransform:CGAffineTransformMakeScale(1.15, 1.15)];
     }
                     completion:^(BOOL finished)
     {
         if(finished)
         {
             [UIView animateWithDuration:0.15 animations:^
              {
                  [subView setTransform:CGAffineTransformMakeScale(1.0, 1.0)];
                  [subView setAlpha:1.0f];
              }];
         }

     }];
} 
```

并使用以下功能删除.....

```
-(void) removeSubViewWithPopUpAnimation:(UIView *)subView
{
    [subView setAlpha:1.0f];

    [subView setTransform:CGAffineTransformMakeScale(1.0, 1.0)];

    [UIView animateWithDuration:0.3 animations:^
     {
         [subView setTransform:CGAffineTransformMakeScale(0.01, 0.01)];
     }
                     completion:^(BOOL finished)
     {
         if(finished)
         {
             if([subView superview])
             {
                 [subView removeFromSuperview];
                 [subView setAlpha:0.0f];
             } 
         }
     }];

} 
```

这肯定会帮助你............

# git - github - 如何从分支中删除提交

> ID：16144708
> 
> 赞同：0
> 
> 时间：2013-04-22T10:21:12.807
> 
> 标签：git, github, commit

我已经阅读了很多可能与我的问题有关的问题和答案，但我找不到答案。也许是因为我不是经验丰富的 git 用户。那么我很抱歉，并会感谢链接到答案。

有一个主仓库，我把它分叉给我自己的。然后我从我自己的 repo 克隆到我自己的机器上并在我的机器上工作，然后我将更改推送到我的 repo 并创建 PR 到主 repo。这是一种流动。

一开始，我在代码中创建了一个新文件（conf 文件）并创建了一个与任何分支无关的提交。我已经将它提交给我的回购并忘记了它。然后我创建了新分支，进行了更改等等。在我的工作结束时，我从主仓库中获取和拉取 --rebase 并拥有最新的所有内容，我已经对我的仓库做出了承诺。然后我将新分支推送到我在 git hub 上的仓库。

当我在 PR 之前检查文件和更改时，我注意到我的第一个配置文件提交被添加到这个分支。我工作的人告诉我没关系。当 PR 将被合并时，文件将被添加到主 repo。

完美的。

但是现在我已经创建了新分支并且我有新的提交并且仍然提交我的配置文件显示为与新分支相关的提交......

那么我该如何删除它呢？

或者我可能需要等到 QA 接受我之前的 PR 并合并它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:05:07.967

与其重写你的历史记录，你可以做的只是**在你的主分支上添加一个额外的提交，这会删除配置文件**，如果我的理解是正确的，那是你只想包含在特定分支中的东西。

所以，试试：

```
git checkout master
git rm --cached <configfile>
git commit -m "Removing the configuration file"
git push origin master 
```

从那里开始，您可以从 master 分支，这些分支将没有配置文件。这有一个很好的属性，它不会影响任何已经推送的分支的历史。

# ios - NSCondition 或 @synchronized

> ID：16144709
> 
> 赞同：2
> 
> 时间：2013-04-22T10:21:15.107
> 
> 标签：ios, objective-c, locking

我正在使用最新的 SDK 开发 iOS 5.0+ 应用程序。

我有这个代码：

```
@interface ServerManager()
{
    NSCondition* statusLock;

[ ... ]

}

@end

@implementation ServerManager

[ ... ]

- (void)setStatus:(ServerStatus)newStatus
{
    [statusLock lock];

    status = newStatus;

    [statusLock unlock];
} 
```

如果我`- (void)setStatus:(ServerStatus)newStatus`用这个改变实现：

```
- (void)setStatus:(ServerStatus)newStatus
{
    @synchronized(statusLock)
    {
        status = newStatus;
    }
} 
```

**我也在做同样的事情吗？**

这是我第一次使用 NSThread，我不知道锁是如何在 iOS 上工作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:32:33.640

我的理解是这两段代码是*不*等价的——为了和 with 做同样的事情`NSCondition`，`@synchronized`你必须编写更多的代码。根据[文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/NSCondition_class/Reference/Reference.html)的概述部分，`setStatus`实现`NSCondition`应该如下所示：

```
- (void)setStatus:(ServerStatus)newStatus
{
    static BOOL safe_to_set_status = YES;
    [statusLock lock];
    while (!safe_to_set_status) {
        [statusLock wait];
    }
    safe_to_set_status = NO;
    status = newStatus;
    safe_to_set_status = YES;
    [statusLock signal];
    [statusLock unlock];
} 
```

如果您所需要的只是防止并发修改，那么使用`@synchronized`看起来是一个更简单的选择。

# iphone - 实施视频通话的问题？

> ID：16144711
> 
> 赞同：1
> 
> 时间：2013-04-22T10:21:19.090
> 
> 标签：iphone, ios

我必须在我的应用程序中实现视频通话。但在谷歌上找不到与此相关的任何内容。如果您对视频通话有一些了解，请指导我。

你能建议我吗，我可以去第三方库还是我应该自己编写模块。因为我必须从相机捕获帧并压缩它们，然后我必须将该帧实时流式传输到服务器，然后使用 http 实时流传输服务器到 iphone。它可能会导致太多的延迟？

我能做些什么？我会去第三方 api 或者我可以编码视频通话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:25:16.657

看看这个项目：[http ://trac.pjsip.org/repos/wiki/Getting-Started/iPhone](http://trac.pjsip.org/repos/wiki/Getting-Started/iPhone)

> PJSIP 是一个免费的开源多媒体通信库，用 C 语言编写，实现了基于标准的协议，如 SIP、SDP、RTP、STUN、TURN 和 ICE。它将信令协议 (SIP) 与丰富的多媒体框架和 NAT 穿越功能结合到高级 API 中，该 API 具有可移植性，适用于从台式机、嵌入式系统到手机的几乎任何类型的系统。

PJSIP 支持 SIP 协议：

> 会话发起协议 (SIP) 是 IETF 定义的信令协议，广泛用于控制通信会话，例如 通过 Internet 协议 (IP)进行的**语音和视频呼叫。**该协议可用于创建、修改和终止两方（单播）或多方（多播）会话。会话可能由一个或多个媒体流组成。

# c# - 如何在智能感知演示者中获得最长的项目

> ID：16144713
> 
> 赞同：0
> 
> 时间：2013-04-22T10:21:26.573
> 
> 标签：c#, visual-studio, intellisense

我正在创建自己的 VS 智能感知演示者，我想将演示者的宽度绑定到最长项目的宽度，但我不知道如何获得最长的项目，有人可以帮忙吗？

# android - 左按钮不出现 [XML 布局]

> ID：16144714
> 
> 赞同：1
> 
> 时间：2013-04-22T10:21:27.030
> 
> 标签：android, xml, button, layout

我可能在这个布局中做错了什么，我已经花了一个小时试图找到错误，但我找不到它..第一个文本为“-”的按钮没有出现..

这是xml中的布局：

```
<RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="30dp"
        android:layout_marginTop="10dip" >

        <Button
            android:id="@+id/accuracyMinus"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toLeftOf="@+id/textAccuracy"
            android:clickable="true"
            android:text="-" />

        <TextView
            android:id="@id/textAccuracy"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:text="Accuracy Buttons"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#ffffff" />

        <Button
            android:id="@+id/accuracyPlus"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/textAccuracy"
            android:clickable="true"
            android:text="+" />
    </RelativeLayout> 
```

提前致谢 ;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:27:20.953

线性布局的变化

```
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:36:50.820

我对您的布局进行了一些更改以使“-”按钮可见，下面是更新的代码。我也在线性布局中尝试过：

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="30dp"
    android:layout_marginTop="10dip" >

    <TextView
        android:id="@+id/textAccuracy"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:text="Accuracy Buttons"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#ffffff" />

    <Button
        android:id="@+id/accuracyMinus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@+id/textAccuracy"
        android:clickable="true"
        android:text="-" />

    <Button
        android:id="@+id/accuracyPlus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/textAccuracy"
        android:clickable="true"
        android:text="+" />
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:30:29.530

使用此代码。在我的设备中出现左键

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_marginBottom="30dp"
     android:layout_marginTop="10dip" >

    <Button
        android:id="@+id/accuracyMinus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@+id/textAccuracy"
        android:clickable="true"
        android:text="-" />

    <TextView
        android:id="@id/textAccuracy"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:text="Accuracy Buttons"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#ffffff" />

    <Button
        android:id="@+id/accuracyPlus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/textAccuracy"
        android:clickable="true"
        android:text="+" />
</RelativeLayout> 
```

# mysql - MySQL - 如何存储执行结果

> ID：16144715
> 
> 赞同：3
> 
> 时间：2013-04-22T10:21:32.373
> 
> 标签：mysql, sql, executequery

我在 mysql 中编写了一个程序，它从表中返回一个随机值。但是我有很多表，我想多次使用这个过程，所以我添加了作为过程参数名称的表，我想从中获取 rand 值，我将传递给过程的名称也作为参数：

```
delimiter //

CREATE PROCEDURE randomDefVal(val varchar(50), tableName varchar(50),OUT randomVal varchar(50))

  BEGIN

  SET @tmpTableName = tableName;

  SET @sql_querry = concat('SELECT',@tmpVal,'FROM',@tmpTableName,'ORDER BY rand() LIMIT 1');

  PREPARE stmt FROM @sql_text;

  EXECUTE stmt using @randomVal;

  DEALLOCATE PREPARE stmt;       

END 
```

但是当我运行这段代码时，我有一个错误：

```
Error Code: 1064\. You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'NULL' at line 1 
```

谁能解释我如何将结果存储`EXECUTE`在变量中？

//解决方案

对于那些与我有同样问题的人，我想展示一个我制作的示例解决方案：

```
delimiter //

CREATE PROCEDURE tmpProcedure(tableName varchar(20))

BEGIN

DECLARE my_query varchar(60);

DECLARE value varchar(20);

SET @my_query = concat('Select Name FROM ',tableName,' ORDER BY rand() LIMIT 1 INTO @outvar');

PREPARE stmt from @my_query;

EXECUTE stmt;

SET val = (SELECT @outvar); 

END// 
```

我希望它对你有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:37:27.063

我在您的代码中看到了一些错误，特别是关于变量名的拼写不同或根本没有声明。查看应该有效的代码：

```
delimiter //

CREATE PROCEDURE randomDefVal(val varchar(50), tableName varchar(50),OUT randomVal varchar(50))

BEGIN

SET @tmpTableName = tableName;
SET @tmpVal = val;
SET @randomVal = randomVal;

SET @sql_querry = concat('SELECT',@tmpVal,'FROM',@tmpTableName,'ORDER BY rand() LIMIT 1');

PREPARE stmt FROM @sql_text;

EXECUTE stmt using @randomVal;

DEALLOCATE PREPARE stmt;

END 
// 
```

# windows - %* 在批处理文件中是什么意思？

> ID：16144716
> 
> 赞同：44
> 
> 时间：2013-04-22T10:21:36.720
> 
> 标签：windows, batch-file, cmd

我已经看到了`%*`批处理文件和命令行中的用法。

`%*`有人可以用一个例子解释一下的典型用法吗？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-04-22T10:23:56.200

它的意思是“命令行中的所有参数”。

例如，当您想将命令行从批处理文件转发到另一个程序时，它很有用：

```
REM mybatchfile.cmd
echo You called this with arguments: %*
echo I will now forward these to the DIR command.
dir %* 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-04-22T13:50:50.127

前面的任何答案中都没有列出一个重要的点：从命令行`%*`扩展到*所有*`SHIFT`参数，即使在操作之后也是如此。

通常 a`SHIFT`会将参数移动到`%2`、`%1`等，并且不再可用。但忽略 any ，因此完整的参数列表始终可用。这既可以是祝福，也可以是诅咒。`%3``%2``%1``%*``SHIFT`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-22T10:22:49.797

`%*`展开为传递给脚本的完整参数列表。

当您想调用其他程序或脚本并传递与您的脚本相同的参数时，通常会使用它。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-22T10:24:44.303

> 修饰符是一个唯一的`%*`修饰符，表示批处理文件中传递的所有参数。您不能将此修饰符与`%~`修饰符结合使用。`%~`语法必须由有效的参数值终止。

来源：

*   [Microsoft.com 上的“使用批处理参数”](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/percent.mspx?mfr=true)（已停用）
*   [“使用批处理参数”（Archive.org 镜像）](https://web.archive.org/web/20180120021145/http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/percent.mspx?mfr=true)

# r - 测试文件中是否存在字符串（使用 R）

> ID：16144718
> 
> 赞同：0
> 
> 时间：2013-04-22T10:21:39.153
> 
> 标签：r

我有几个相当大的 csv 文件（几百万行），我想知道我需要加载哪一个。其中一些持有`GOTCHASTR`一些不持有。假设我只加载包含此字符串的那些，如果不加载所有文件并在之后进行测试，我该如何测试。

我意识到这看起来像一个`bash/grep`问题，但是当 R 导入一些 UNIX 功能时，我希望这可以工作。我正在使用 Windows 7 + gnuWin32

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T11:06:36.510

```
patterns <- sapply(list.files("/your/dir", full.names=TRUE), FUN=function(x){
  grep("GOTCHASTR", readLines(x))
}) 
```

# java - 如何使用 Java 将 Unicode 文本文件转换为 ANSI 格式

> ID：16144734
> 
> 赞同：1
> 
> 时间：2013-04-22T10:22:43.180
> 
> 标签：java

我有一个 Unicode 格式的文本文件 abc.txt。我想把它转换成 ANSI 格式。这个怎么做。

我已经完成了谷歌并得到了以下内容，但是理解起来非常冗长。

[Java - 从 unicode 转换为 ANSI](https://stackoverflow.com/questions/7943781/java-converting-from-unicode-to-ansi)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:16:02.087

胡乱猜测，因为您使用的是[`pywinauto`](http://code.google.com/p/pywinauto/)，这意味着您拥有的数据是 unicode 的默认 win32 编码格式，即 UTF-16LE。unicode中**没有文件之类的东西**，文件是 unicode 的编码表示形式。

要将文件从 UTF-16 转换为 ASCII，您需要执行以下操作：

```
unicode_data = open(filename).read().decode('utf-16le')
ascii = unicode_data.decode('ascii') 
```

# java - 如何在java中拆分字符串

> ID：16144737
> 
> 赞同：-2
> 
> 时间：2013-04-22T10:22:56.540
> 
> 标签：java

我有以下字符串格式的数据。

```
String value="/SOKS/
/SREF/12345-1
/PREF/23456-1
/CREF/123" 
```

预期值：

```
SOKS     setEvent("SOKS")
SREF  setRef("12345-1")
PREF  setRef1("23456-1")
CREF      setRef2("123") 
```

# 2：

```
String value="/SOKS/
    /SREF/
    /PREF/23456-1
    /CREF/ 
```

预期值：

```
SOKS1    setEvent("SOKS1")
SREF     setRef("")
PREF     setRef1("23456-1")
CREF     setRef2("") 
```

# 3：

```
String value="/SOKS2/
    /SREF/
    /PREF/23456-1 
```

预期值：

```
SOKS2     setEvent("SOKS2")
SREF      setRef("")
PREF      setRef1("23456-1")
CREF      setRef2("") 
```

我想拆分上面的字符串并将所有值设置为 POJO。上面的字符串 /SOKS/ 是动态的，值可以是任何值。

所以我想`value(SOKS)`在`setEvent(string)`方法中设置它。对于`/SREF/`（这是静态的），我想将值 12345-1 存储到`setSref(string)`.

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:24:13.463

使用 String.split() 方法拆分字符串（在 / 上），然后检索所需的值。其他选项是获取子字符串，从 / 的最后一个索引开始，直到字符串的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:25:40.470

您可以为此使用[StringTokenizer 。](http://docs.oracle.com/javase/7/docs/api/java/util/StringTokenizer.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:29:59.127

使用`String.split()`或 [StringTokenizer](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)来分割你的字符串。然后使用switch case根据那里的功能设置相应的值。

喜欢：

```
switch( str){
 case "SREF":
     setSref(valuse);
     break;

    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T10:28:57.030

您可以使用：

```
 String value="/SOKS/\r\n/SREF/12345-1\r\n/PREF/23456-1\r\n/CREF/123";
String[] arr = value.split("\\r?\\n?/"); 
```

然后：

```
setEvent(arr[1]); // SOKS

if (arr[3].equals("SREF"))
    setSref(arr[4]); // 12345-1 
```

### 现场演示：http: [//ideone.com/VlcNrB](http://ideone.com/VlcNrB)

# r - 按ID获取data.frame行

> ID：16144739
> 
> 赞同：3
> 
> 时间：2013-04-22T02:26:37.167
> 
> 标签：r

我有一个 data.frame $X$ 通过过滤掉一些行从 data.frame $Y$ 获得。我现在有兴趣访问 ID 为 $i$ 的行（ID 是指出现在第一列中的值，由 R 生成）。我只知道 $X[i,]$ 命令，据我所知，它给了我 $X$ 中的第 $i$ 行，而不是 ID 为 $i$ 的行。

是否有任何其他命令可以通过其 id 访问行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T10:32:56.827

作为替代方案，您可以使用引号`""`通过其各自的元素来引用给定的行`rownames()`，例如：

```
X["35",] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T03:39:41.443

您可以`row.names(X)`用来访问 ID 信息。下面给出示例。

```
X <- subset(airquality, Temp > 80, select = c(Ozone, Temp))
X$id <- row.names(X)
head(X)
        #   Ozone Temp id
        #29    45   81 29
        #35    NA   84 35
        #36    NA   85 36
        #38    29   82 38
        #39    NA   87 39
        #40    71   90 40
X[X$id==35,]
        #   Ozone Temp id
        #35    NA   84 35 
```

# ninject - Ninject 单例范围加载

> ID：16144741
> 
> 赞同：2
> 
> 时间：2013-04-22T10:22:58.660
> 
> 标签：ninject, ninject.web.mvc

我对 ASP.NET MVC 非常陌生，我需要帮助使用 Ninject 在单例范围内加载某些类型。

--- 现有代码看起来像 ----

```
List<Type> types = loading some types into list here.

foreach (var type in types.Where(O => O.Name.StartsWith("I")))
{
    Kernel.Bind(type).To(Type.GetType(type.FullName.Replace(".I", ".")));
} 
```

* * *

我的工作是在单例范围内绑定这些类型，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T11:15:15.660

还可以查看 Ninject 约定扩展。它使这样的事情变得容易得多。例如，你可以这样写。

```
kernel.Bind(x =>
x.FromThisAssembly()
.SelectAllClasses()
.Where(types.Contains)
.BindDefaultInterface()
.Configure(b => b.InSingletonScope())); 
```

根据您获取类型列表的方式，这可能会更容易编写。只需查看 wiki 上的文档和示例。

[https://github.com/ninject/ninject.extensions.conventions/wiki](https://github.com/ninject/ninject.extensions.conventions/wiki)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T10:24:35.403

`kernel.Bind().To()`放好后`.InSingletonScope()`

# html - 表格图片对齐问题

> ID：16144743
> 
> 赞同：0
> 
> 时间：2013-04-22T10:23:08.133
> 
> 标签：html, css, html-table, alignment

我第一次在这里发帖，因为如果通常我能够在其他答案中找到我的代码问题的解决方案，这一次，无论我尝试什么，它都不起作用。

我正在做一个有两行的表格，第一行基本上是图片，将一些 PDF 文档链接到下面的标题（第二行）。

问题是图片的大小不同（不能更改）。我希望它们在行的底部对齐，在分隔线之前有一个小的边距。

现在，它们居中（我猜默认情况下）这还不错，但无论如何都不是我想要的。当它们居中时我遇到的第二个问题是，由于某种原因，该行的第一张图片总是比其他图片高一点。想不通为什么。

希望你能帮助我编写下面的代码（我假设它充满了错误，因为几个调用不起作用并且可能会被删除）。

```
<table width="780"; bgcolor="#e8e8e8" style="table-layout:fixed" VALIGN="top">

<tr>

<td style="word-wrap: break-word;"; ALIGN="CENTER">
<div align="center";>

<a href="PDF URL" target="_blank">
        <img src="URL" alt="ALT">
    </a>
</div>
</td>

<td>
<div align="center">
<a href="PDF URL" target="_blank">
       <img src="URL" alt="ALT">
    </a>
</div>
</td>

<td>
<div align="center">
<a href="PDF URL" target="_blank">
       <img src="URL" alt="ALT">
    </a>
</div>
</td>

</tr>
<tr>
<td><div align="center"><p style="font-size:11px"><a title="TITLE1" href="URL" target="_blank">TITLE1</p></a>
</div></td>
<td><div align="center"><p style="font-size:11px"><a title="TITLE2" href="URL" target="_blank">TITLE2</p></a>
</div></td>
<td><div align="center"><p style="font-size:11px"><a title="TITLE3" href="URL" target="_blank">TITLE3</p></a>
</div></td>
<td><div align="center"><p style="font-size:11px"><a title="TITLE4" href="URL" target="_blank">TITLE4</p></a>
</div></td>

{/tr}
{/table} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-22T10:41:03.687

您应该首先在标题中包含一个 .css 文件调用，如下所示：

```
<head>
<link rel="stylesheet" type="text/css" href="mystyle.css">
</head> 
```

然后你可以创建一个“mystyle.css”文件，以便为你的表格应用你想要的所有样式。

看看这个页面。[W3School - CSS](http://www.w3schools.com/css/css_howto.asp)

有一些关于如何更改颜色、边距、背景图像等的示例。

编辑：

如果您想应用 .html 文件中的所有样式，请尝试查看此网页。[http://www.w3schools.com/tags/](http://www.w3schools.com/tags/)

你有所有的html标签，选择你想要的，看看属性可以使用。

# scala - 在 Play Framework 2.1 上测试非阻塞 Redis 客户端 (Fyrie) 时出现编译错误

> ID：16144747
> 
> 赞同：1
> 
> 时间：2013-04-22T10:23:15.667
> 
> 标签：scala, playframework, redis, akka, playframework-2.1

当我尝试编译以下代码时

```
import play.api._
import play.api.mvc._
import scala.collection.mutable.StringBuilder
import net.fyrie.redis.RedisClient
import net.fyrie.redis.RedisClientConfig
//import akka.dispatch._
//import akka.dispatch.Future

object Application extends Controller {

  //  val rd: RedisClient = new RedisClient("localhost", 6379, new RedisClientConfig(1, true, true, 50 to 100))(akka.actor.ActorSystem.create)
  val rd = RedisClient.apply("localhost", 6379, new RedisClientConfig(1, true, true, 50 to 100))(akka.actor.ActorSystem.create)

  def nonblocktest(application: String, platform: String) = Action {
    val future: akka.dispatch.Future[Option[akka.util.ByteString]] = rd.get(StringBuilder.newBuilder.append(application).append('-').append(platform).toString)
    future onSuccess {
      case x => Ok(x.get.toString)
    } onFailure {
      case t: Throwable => Results.NoContent
    }
    Results.NoContent
  }

} 
```

我收到以下错误

```
sbt.PlayExceptions$CompilationException: Compilation error[package dispatch contains object and package with same name: japi
one of them needs to be removed from classpath]
        at sbt.PlayReloader$$anon$2$$anonfun$reload$2$$anonfun$apply$15$$anonfun$apply$16.apply(PlayReloader.scala:349) ~[na:na]
        at sbt.PlayReloader$$anon$2$$anonfun$reload$2$$anonfun$apply$15$$anonfun$apply$16.apply(PlayReloader.scala:349) ~[na:na]
        at scala.Option.map(Option.scala:133) ~[scala-library.jar:na]
        at sbt.PlayReloader$$anon$2$$anonfun$reload$2$$anonfun$apply$15.apply(PlayReloader.scala:349) ~[na:na]
        at sbt.PlayReloader$$anon$2$$anonfun$reload$2$$anonfun$apply$15.apply(PlayReloader.scala:346) ~[na:na]
        at scala.Option.map(Option.scala:133) ~[scala-library.jar:na] 
```

如果我取消注释最后两个导入中的任何一个，我会得到相同的结果。我正在尝试在 play framework 2.1.0 中将 fyrie 用于 scala 2.10.0。我的目标是针对 sedis（阻塞）测试 fyrie 非阻塞异步调用的性能。那么我做错了什么？了解自己这可能是非常（非常）愚蠢的事情。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:49:33.773

您可能应该尝试使用fyrie redis 的[这个分支](https://github.com/trafficland/fyrie-redis/tree/akka2.1)，因为主 repo 似乎已经死了，并且正在使用 scala 和 akka 的旧开发版本。

# c# - OpenNI C# 包装器：WaitAnyUpdateAll 超时

> ID：16144753
> 
> 赞同：7
> 
> 时间：2013-04-22T10:23:41.243
> 
> 标签：c#, openni

我目前正在做一个涉及带有 OpenNI C# 包装器的 Kinect 的小项目。对于这个项目，深度、图像和用户节点是使用 xml 配置文件和`Context.CreateFromXmlFile`方法创建的。启动一个单独的线程，它执行一个非常简单的循环（基于 UserTracker.net 示例）：

```
private void RunThread()
{
   while(true) 
   {
       try 
       {
           context.WaitAnyUpdateAll(); //context is an OpenNI context object. 
       }
       catch (Exception ex) 
       {
           Console.WriteLine(ex.ToString());
       }

       //process some data

   }
} 
```

这在一段时间内工作得很好，直到相机接收到的图像没有改变。片刻之后，显示以下异常：

```
A timeout has occured when waiting for new data!
    at OpenNI.Context.WaitAnyUpdateAll()
    at <file described above> 
```

抛出此异常后，所有后续调用都`context.WaitAnyUpdateAll`将抛出相同的异常，无论输入是什么。过了一会儿，错误消息变为：

```
OpenNI.StatusException: The server has disconnected!
    at OpenNI.Context.WaitAnyUpdateAll()
    at <file described above> 
```

如何使用 OpenNI 处理没有新输入？我知道当没有新数据可用时我们会遇到超时异常，但是我们如何从这个异常中恢复呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T08:48:42.870

事实证明，问题在于我没有使用不安全的循环。似乎`WaitAnyUpdateAll`需要在不安全的上下文中运行，而我在这里没有这样做。在函数定义中添加 unsafe 关键字解决了这个问题。

# c# - 在子控件后面放置一个装饰层

> ID：16144754
> 
> 赞同：1
> 
> 时间：2013-04-22T10:23:52.337
> 
> 标签：c#, .net, wpf

我有一个画布，我需要在其中绘制一个网格，但在子控件后面。我试图创建一个新的装饰器并将其添加到画布中，但是这个装饰器显示在子控件上。我怎样才能让这个装饰器在画布的孩子后面？我不想在画布的 OnRender 函数中绘制这个网格......

澄清：网格不是控件。它是画布上绘制的网格或网。它是为了使位置元素更容易而创建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:10:18.847

An`Adorner`只能在顶部（它总是具有最高的 zindex）。您需要为您的潜在问题寻找另一种解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-10T14:28:32.717

一种方法是使用 a`TileBrush`作为`Canvas.Background`并将 TileBrush 设置为适当的网格图案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:36:57.983

使用[Panel.ZIndex](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.zindex.aspx)属性设置在 z 平面上显示的顺序元素。

# ruby - 枚举可设置参数

> ID：16144755
> 
> 赞同：0
> 
> 时间：2013-04-22T10:23:53.263
> 
> 标签：ruby, rally

`"Submitted By"`我成功建立了与我的 Rally 项目的连接，但在打开缺陷时无法以编程方式设置该字段。我错误地命名了参数，或者它不能通过 REST API 设置。任何有关查询可修改参数、链接到属性名称或设置`"Submitted By"`参数的代码的帮助将不胜感激。

我的目标是有一个网页，人们可以在其中提交缺陷或故事以及他们的电子邮件，并使用它在“提交者”字段中填充他们的用户名。我当前的设置可以打开故事和缺陷，但只能匿名打开，因为倒数第二行无效。

我正在使用 Ruby API，以下是当用户单击主页上的按钮时调用的 ruby​​ 代码，它将它们重定向到 Sinatra 正在侦听的 localhost:4567/rally_defect。

```
require 'rubygems'
require 'rally_rest_api'
require 'sinatra'

custom_headers = CustomHttpHeader.new
custom_headers.name = 'Mail 2 Rally'
custom_headers.version = '0.1'
custom_headers.vendor = 'Rally Software'

rally_server = 'https://rally1.rallydev.com/slm'
rally_username = <insert rally username>
rally_pwd = <insert rally password>

rally = RallyRestAPI.new(:base_url => rally_server,
                         :username => rally_username,
                         :password => rally_pwd,
                         :http_headers => custom_headers)

get '/rally_defect' do
  rally.create(:defect, :name => "Test Defect", 
                        :description => "This is a test",
                        :SubmittedBy => "test")                     
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:19:47.900

如果您开始构建此集成，我强烈建议您使用[rally_api](http://rubygems.org/gems/rally_api)而不是[rally_rest_api](http://rubygems.org/gems/rally_rest_api)。

rally_rest_api 正在因性能和稳定性方面的一些问题而被弃用。rally_rest_api 不会有任何进一步的发展。

您可以在此处找到有关 rally_api 的文档：

[https://developer.help.rallydev.com/ruby-toolkit-rally-rest-api-json](https://developer.help.rallydev.com/ruby-toolkit-rally-rest-api-json)

rally_api 确实需要 Ruby 1.9.2 或更高版本。

rally_api 的语法与 rally_rest_api 非常相似。您在上面尝试的 rally_api 版本看起来类似于下面的代码示例。请注意，任何“可设置”参数都可以通过在对象哈希中包含其名称并将其设置为一个值来简单地设置。

查找 Rally Webservices API 对象模型（包括工件属性、允许值以及它们是否可写）的最佳位置是 Webservices API 文档：

[https://rally1.rallydev.com/slm/doc/webservice](https://rally1.rallydev.com/slm/doc/webservice)

例如，当 Rally Artifact 的属性本身是像用户这样的 Rally 对象时，要么首先在 Rally 中查找对象（下面的示例就是这样做的），要么将值设置为对 Rally 中对象的 REST URL 引用。例如，如果您知道`user@company.com`Rally 中的 ObjectID 为 12345678910，那么您可以执行以下操作：

```
user_ref = "/user/12345678910"
new_defect["SubmittedBy"] = user_ref 
```

下面的代码显示了在给定电子邮件格式的用户 ID 的情况下查找 Rally 以获取用户对象的方法，因为我假设您可能需要容纳多个不同的用户。

```
require 'rubygems'
require 'rally_api'
require 'sinatra'

#Setting custom headers
headers = RallyAPI::CustomHttpHeader.new()
headers.name = 'Mail 2 Rally'
headers.vendor = "My Company"
headers.version = "0.1"

# Rally credentials
rally_username = <insert rally username>
rally_pwd = <insert rally password>
rally_server = 'https://rally1.rallydev.com/slm'

# Rally REST API config
config = {:base_url => rally_server}
config[:username] = rally_username
config[:password] = rally_pwd
config[:workspace] = "Workspace Name"
config[:project] = "Project Name"
config[:headers] = headers #from RallyAPI::CustomHttpHeader.new()

# New up rally connection config
@rally = RallyAPI::RallyRestJson.new(config)

# Lookup UserID for SubmittedBY
submitted_by_user_id = "user@company.com"    

user_query = RallyAPI::RallyQuery.new()
user_query.type = :user
user_query.fetch = "ObjectID,UserName,DisplayName"
user_query.order = "UserName Asc"
user_query.query_string = "(UserName = \"#{submitted_by_user_id}\")"

# Query for user
user_query_results = @rally.find(user_query)
submitted_by_user = user_query_results.first

# Create the Defect
new_defect = {}
new_defect["Name"] = "Test Defect"
new_defect["Description"] = "This is a test"
new_defect["SubmittedBy"] = submitted_by_user

new_defect_create_result = @rally.create(:defect, new_defect)

puts "New Defect created FormattedID: #{new_defect_create_result.FormattedID}" 
```

# c# - EF：在相同的上下文下，将新的导航属性添加到数据库实体中的现有属性

> ID：16144759
> 
> 赞同：0
> 
> 时间：2013-04-22T10:24:01.603
> 
> 标签：c#, asp.net, entity-framework

我正在尝试更新数据库实体中的现有内容。

我想向它添加一个引用（导航）成员。

我正在从数据库中获取要更新的实体，

并使用相同的上下文 ( `mMamDbEntities`)

我添加了参考成员。

但是我得到一个数据库错误，违反唯一性限制

> {"违反 UNIQUE KEY 约束 'UQ_MamConfigurations_V1'。无法在对象 'dbo.MamConfiguration_V1' 中插入重复键。重复键值为 (elad_14Apr_1315)。\r\n语句已终止。"}

怎么会这样？我认为双向参考可能是问题所在

所以我什至试图取消它（见注释代码）

```
 public void SaveCofiguration(MamConfiguration_V1Ui itemUi)
    {
        var itemEf = mMamConfiguration_V1UiToEfConvertor.ConvertToNewEf(itemUi);

        using (var maMDBEntities = new MaMDBEntities())
        {
            IDal<MamConfiguration_V1> mamConfigurationDal = mDalFactory.GetDal<MamConfiguration_V1>(maMDBEntities);

            mamConfigurationDal.Save(itemEf);
        }
    }

     public MamConfiguration_V1 GetById(object id)
    {           
            id.ThrowIfNull("id");

            int configurationId = Convert.ToInt32(id);

            var result =
                mMaMDBEntities.MamConfiguration_V1.SingleOrDefault(item => item.ConfigurationId == configurationId);

            return result;

    }

   public MamConfiguration_V1 Save(MamConfiguration_V1 item)
    {

            item.ThrowIfNull("item");

            var itemFromDB = GetById(item.ConfigurationId);

            if (itemFromDB != null)
            {
                UpdateEfItem(itemFromDB, item);

               // if (mMaMDBEntities.ObjectStateManager.GetObjectStateEntry(itemFromDB).State == EntityState.Detached) 
```

// { // mmaMDBEntities.MamConfiguration_V1.AddObject(itemFromDB); // }

```
 // Attached object tracks modifications automatically
                mMaMDBEntities.SaveChanges();

                return item;
            }

   private void UpdateEfItem(MamConfiguration_V1 itemFromDb, MamConfiguration_V1 itemFromUi)
        {
            itemFromDb.UpdatedDate = DateTime.Now;

            itemFromDb.Description = itemFromUi.Description;

            itemFromDb.StatusId = itemFromUi.StatusId;

            itemFromDb.Name = itemFromUi.Name;

            itemFromDb.NumericTraffic = itemFromUi.NumericTraffic;

            itemFromDb.PercentageTraffic = itemFromUi.PercentageTraffic;

            itemFromDb.Type = itemFromUi.NumericTraffic;

            foreach (var item in itemFromDb.MamConfigurationToBrowser_V1.ToList())
            {
                if (itemFromUi.MamConfigurationToBrowser_V1.All(b => b.BrowserVersionId != item.BrowserVersionId))
                {
                    mMaMDBEntities.MamConfigurationToBrowser_V1.DeleteObject(item);
                }
            }

            for (int i = 0; i < itemFromUi.MamConfigurationToBrowser_V1.Count; i++)
            {
                var element = itemFromUi.MamConfigurationToBrowser_V1.ElementAt(i);
                var item = itemFromDb.MamConfigurationToBrowser_V1.SingleOrDefault(b => b.BrowserVersionId == element.BrowserVersionId);
                if (item != null)
                {
                    // copy properties from element to item
                }
                else
                {
                    element.Browser = mMaMDBEntities.Browsers.Single(browserItem =>
                        browserItem.BrowserID == element.BrowserID);

                    //element.MamConfiguration_V1 = itemFromDb;

                    //have also tried: element.MamConfiguration_V1 = null;

                    //element.MamConfiguration_V1Reference = null;

                    itemFromDb.MamConfigurationToBrowser_V1.Add(element);
                }
            }
        } 
```

**更新：**

`mMaMDBEntities.SaveChanges();`抛出异常

这些是数据库表：

```
CREATE TABLE [dbo].[MamConfiguration_V1](
    [ConfigurationId] [int] IDENTITY(1,1) NOT NULL,
    [Name] [nvarchar](50) NOT NULL,
    [Description] [nvarchar](200) NOT NULL,
    [StatusId] [int] NOT NULL,
    [Type] [int] NOT NULL,
    [CreatedDate] [datetime2](7) NOT NULL,
    [UpdatedDate] [datetime2](7) NOT NULL,
    [PercentageTraffic] [int] NOT NULL,
    [NumericTraffic] [int] NOT NULL,
 CONSTRAINT [PK_MamConfigurations_V1] PRIMARY KEY CLUSTERED 
(
    [ConfigurationId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [SECONDARY],
 CONSTRAINT [UQ_MamConfigurations_V1] UNIQUE NONCLUSTERED 
(
    [Name] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [SECONDARY]
) ON [SECONDARY]

GO

ALTER TABLE [dbo].[MamConfiguration_V1]  WITH CHECK ADD  CONSTRAINT [FK_MamConfiguration_V1_ConfigurationType_V1] FOREIGN KEY([StatusId])
REFERENCES [dbo].[MamConfigurationStatuses] ([StatusId])
GO

ALTER TABLE [dbo].[MamConfiguration_V1] CHECK CONSTRAINT [FK_MamConfiguration_V1_ConfigurationType_V1]
GO

ALTER TABLE [dbo].[MamConfiguration_V1] ADD  CONSTRAINT [DF_MamConfigurations_V1_CreatedDate]  DEFAULT (getdate()) FOR [CreatedDate]
GO

ALTER TABLE [dbo].[MamConfiguration_V1] ADD  CONSTRAINT [DF_MamConfigurations_V1_UpdatedDate]  DEFAULT (getdate()) FOR [UpdatedDate]
GO

CREATE TABLE [dbo].[MamConfigurationToBrowser_V1](
    [MamConfigurationId] [int] NOT NULL,
    [BrowserVersionId] [uniqueidentifier] NOT NULL,
    [IsWhiteListed] [bit] NOT NULL,
    [BrowserID] [int] NOT NULL,
    [VersionNumberLowRange] [varchar](50) NOT NULL,
    [CreatedDate] [datetime] NOT NULL,
    [UpdatedDate] [datetime] NOT NULL,
    [VersionNumberUpperRange] [varchar](50) NULL,
 CONSTRAINT [PK_MamConfigurationToBrowser_V1_1] PRIMARY KEY CLUSTERED 
(
    [BrowserVersionId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [SECONDARY]
) ON [SECONDARY]

GO

SET ANSI_PADDING OFF
GO

ALTER TABLE [dbo].[MamConfigurationToBrowser_V1]  WITH CHECK ADD  CONSTRAINT [FK_MamConfigurationToBrowser_V1_Browsers] FOREIGN KEY([BrowserID])
REFERENCES [dbo].[Browsers] ([BrowserID])
GO

ALTER TABLE [dbo].[MamConfigurationToBrowser_V1] CHECK CONSTRAINT [FK_MamConfigurationToBrowser_V1_Browsers]
GO

ALTER TABLE [dbo].[MamConfigurationToBrowser_V1]  WITH CHECK ADD  CONSTRAINT [FK_MamConfigurationToBrowser_V1_BrowserVersion] FOREIGN KEY([MamConfigurationId])
REFERENCES [dbo].[MamConfiguration_V1] ([ConfigurationId])
GO

ALTER TABLE [dbo].[MamConfigurationToBrowser_V1] CHECK CONSTRAINT [FK_MamConfigurationToBrowser_V1_BrowserVersion]
GO

ALTER TABLE [dbo].[MamConfigurationToBrowser_V1] ADD  CONSTRAINT [DF_Browser_V1_CreatedDate]  DEFAULT (getdate()) FOR [CreatedDate]
GO

ALTER TABLE [dbo].[MamConfigurationToBrowser_V1] ADD  CONSTRAINT [DF_Browser_V1_UpdatedDate]  DEFAULT (getdate()) FOR [UpdatedDate]
GO 
```

**更新 2**

我已经尝试过@AzharKhorasany 解决方案，但出现了同样的错误：

```
for (int i = 0; i < itemFromUi.MamConfigurationToBrowser_V1.Count; i++)
            {
                var element = itemFromUi.MamConfigurationToBrowser_V1.ElementAt(i);
                var item = itemFromDb.MamConfigurationToBrowser_V1.SingleOrDefault(b => b.BrowserVersionId == element.BrowserVersionId);
                if (item != null)
                {
                    // copy properties from element to item
                }
                else
                {
                    element.Browser = mMaMDBEntities.Browsers.Single(browserItem =>
                        browserItem.BrowserID == element.BrowserID);

                    element.MamConfigurationId = itemFromDb.ConfigurationId;

                    //element.MamConfiguration_V1 = itemFromDb;

                    //have also tried: element.MamConfiguration_V1 = null;

                    //element.MamConfiguration_V1Reference = null;
                    //mMaMDBEntities.AddToMamConfigurationToBrowser_V1(itemFromUi.MamConfigurationToBrowser_V1.ElementAt(0)); // add as inserted

                    itemFromDb.MamConfigurationToBrowser_V1.Add(element);
                }
            } 
```

# java - 局部变量可能尚未初始化

> ID：16144767
> 
> 赞同：0
> 
> 时间：2013-04-22T10:24:21.327
> 
> 标签：java, android, timepicker

问题：

我有一个 TimePicker，我想用它来保存长/字符串“分钟”的值，它表示当前时间和时间选择器选择的时间之间的总分钟数。

例如：如果当前是 7:30 并且用户选择 8:30 它将节省 60 分钟作为分钟的值。

我已经设法实现了以下源代码（如下所示）但是我收到了一些错误说明：

```
"The local variable tp may not have been initialized" 
```

使用下面评论中建议的方法 - 尽管我严格按照说明进行操作。

编译器问题：

```
Description Resource    Path    Location    Type
The local variable tp may not have been initialized AddEditDevice.java      line 119    Java Problem
The local variable tp may not have been initialized AddEditDevice.java      line 120    Java Problem 
```

资源：

```
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.net.wifi.WifiInfo;
import android.net.wifi.WifiManager;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.ViewGroup;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.TextView;
import android.widget.TimePicker;
import java.text.DecimalFormat;
import android.util.Log;
import java.util.Calendar;

public class AddEditDevice extends Activity {

     private long rowID; 
     private EditText nameEt;
     private EditText capEt;
     private EditText codeEt;
     private TimePicker timeEt;
     private TextView ssidTextView;
     Calendar cal = Calendar.getInstance();
     TimePicker tp;

      // @Override
       public void onCreate(Bundle savedInstanceState) 
       {
          super.onCreate(savedInstanceState); 
          setContentView(R.layout.add_country);
          WifiManager wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
          WifiInfo info = wifi.getConnectionInfo();
          String ssidString = info.getSSID();

          if (ssidString.startsWith("\"") && ssidString.endsWith("\"")){
              ssidString = ssidString.substring(1, ssidString.length()-1);
 }

          //TextView ssidTextView = (TextView) findViewById(R.id.wifiSSID);
          ssidTextView = (TextView) findViewById(R.id.wifiSSID);
          ssidTextView.setText(ssidString); 

          nameEt = (EditText) findViewById(R.id.nameEdit);
          capEt = (EditText) findViewById(R.id.capEdit);
          codeEt = (EditText) findViewById(R.id.codeEdit);
          timeEt = (TimePicker) findViewById(R.id.timeEdit);

          Bundle extras = getIntent().getExtras(); 

          if (extras != null)
          {
             rowID = extras.getLong("row_id");
             nameEt.setText(extras.getString("name"));  
             capEt.setText(extras.getString("cap"));  
             codeEt.setText(extras.getString("code"));    
             String time = extras.getString("time");
             String[] parts = time.split(":");
             timeEt.setCurrentHour(Integer.valueOf(parts[0]));
             timeEt.setCurrentMinute(Integer.valueOf(parts[1]));
             timeEt.setIs24HourView(false);

          }

          Button saveButton =(Button) findViewById(R.id.saveBtn);
          saveButton.setOnClickListener(new OnClickListener() {

              public void onClick(View v) 
              {
                 if (nameEt.getText().length() != 0)
                 {
                    AsyncTask<Object, Object, Object> saveContactTask = 
                       new AsyncTask<Object, Object, Object>() 
                       {
                          @Override
                          protected Object doInBackground(Object... params) 
                          {
                             saveContact();
                             return null;
                          }

                          @Override
                          protected void onPostExecute(Object result) 
                          {
                             finish();
                          }
                       }; 

                    saveContactTask.execute((Object[]) null); 
                 }

                 else
                 {
                    AlertDialog.Builder alert = new AlertDialog.Builder(AddEditDevice.this);
                    alert.setTitle(R.string.errorTitle); 
                    alert.setMessage(R.string.errorMessage);
                    alert.setPositiveButton(R.string.errorButton, null); 
                    alert.show();
                 }
              } 
         });}

       public static void main(String[] args) {
           Calendar cal = Calendar.getInstance();
           TimePicker tp;
           cal.set(Calendar.HOUR_OF_DAY, tp.getCurrentHour());
           cal.set(Calendar.MINUTE, tp.getCurrentMinute());
           long minutes = (cal.getTimeInMillis() -
               Calendar.getInstance().getTimeInMillis()) / 1000 / 60;
       }

           private void saveContact() 
           {
              DatabaseConnector dbConnector = new DatabaseConnector(this);

              if (getIntent().getExtras() == null)
              {
//                Log.i("Test for Null", ""+dbConnector+" "+nameEt+" "+capEt+" "+timeEt+" "+codeEt+" "+ssidTextView);
                  dbConnector.insertContact(nameEt.getText().toString(),
                          capEt.getText().toString(),
                          timeEt.getCurrentHour().toString() + ":"
                              + timeEt.getCurrentMinute().toString(),
                          codeEt.getText().toString(),
                       ssidTextView.getText().toString());

              }
              else
              {
                 dbConnector.updateContact(rowID,
                         nameEt.getText().toString(),
                            capEt.getText().toString(),
                              timeEt.getCurrentHour().toString() + ":"
                                  + timeEt.getCurrentMinute().toString(),
                              codeEt.getText().toString(),
                              ssidTextView.getText().toString());
              }
           }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:27:48.137

用于`java.util.Calendar`获取当前值并减去。

```
Calendar cal = Calendar.getInstance();
TimePicker tp;

// ...

cal.set(Calendar.HOUR_OF_DAY, tp.getCurrentHour());
cal.set(Calendar.MINUTE, tp.getCurrentMinute());
long minutes = (cal.getTimeInMillis() -
    Calendar.getInstance().getTimeInMillis()) / 1000 / 60; 
```

**编辑**：试试这个 Java 控制台应用程序。证明它有效。

```
import java.util.Calendar;

public class Main {

    public static void main(String[] args) {
        Calendar cal = Calendar.getInstance();

        cal.set(Calendar.HOUR_OF_DAY, 20);
        cal.set(Calendar.MINUTE, 58);

        long minutes = (cal.getTimeInMillis() - Calendar.getInstance().getTimeInMillis()) / 1000 / 60;

        System.out.println(minutes);
    }

} 
```

`4`在`20:54`我当地时间返回。

# android - 如何获取英国密码列表

> ID：16144772
> 
> 赞同：1
> 
> 时间：2013-04-22T10:24:40.053
> 
> 标签：android, maps

我想在字段中输入一个地址作为字符串，并想根据它获取 POSTCODE（仅适用于英国）。是否有任何免费的 API 可以为我提供详细信息，或者是否有任何数据库可以下载以获取英国邮政编码列表，并且可以帮助我在用户输入地址时提供建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:40:44.453

我假设您的意思是邮政编码而不是密码。在这种情况下，唯一保证正确的数据来自[皇家邮政](http://www.royalmail.com/marketing-services/address-management-unit/address-data-products/postcode-address-file-paf?campaignid=paf_redirect)

# opengl - GL_SCISSOR_TEST 不工作

> ID：16144777
> 
> 赞同：2
> 
> 时间：2013-04-22T10:25:10.230
> 
> 标签：opengl, go, glfw

我在 OS X 10.7、OpenGL 版本 3.x 上使用[OpenGL](http://godoc.org/github.com/go-gl/gl)和[glfw的绑定。](http://godoc.org/github.com/go-gl/glfw)

我启用`GL_SCISSOR_TEST`并将剪刀矩形设置为`(0, 0, 1, 1)`. 但它对渲染绝对没有影响——整个视口正在更新。

这是代码：

```
gl.Enable(gl.SCISSOR_TEST)
gl.Scissor(0, 0, 1, 1)
fmt.Printf("scissor enabled = %v\n", gl.IsEnabled(gl.SCISSOR_TEST))
box := make([]int32, 4)
gl.GetIntegerv(gl.SCISSOR_BOX, box)
fmt.Printf("scissor box = %v\n", box) 
```

控制台输出：

```
scissor enabled = true
scissor box = [0 0 1 1] 
```

我不知道该怎么做。`glIsEnabled()`两者都报告正确值的事实`glGetIntegerv()`使我认为仍然缺少一些激活剪刀测试所必需的状态。我尝试为模板启用`GL_STENCIL_TEST`和初始化`glfw`1 位和 8 位，但仍然没有效果，尽管`glIsEnabled(GL_STENCIL_TEST)`返回`true`.

# java - 使用 sql server 的带有 concat 函数的休眠查询

> ID：16144781
> 
> 赞同：0
> 
> 时间：2013-04-22T10:25:21.363
> 
> 标签：java, hibernate

我想在`sql server`. 这是`hibernate query`它在我的`sql`. 我想运行它`sql server 2005`。我该怎么办？

```
strQuery = "from TempData where englishLex=:englishLex and category =:category and language=:language and login=:login and domain=:domain group by (concat(englishlex,category)) "; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:29:51.813

在 Sql Server 中，您没有 concat 函数，而是可以简单地使用 + 号。你试过吗？

```
strQuery = "from TempData where englishLex=:englishLex and category =:category and language=:language and login=:login and domain=:domain group by (englishlex + category) "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:28:38.953

concat() 是 HQL 中的有效函数。

看起来情况在导致问题的englishLex 上不正确。

尝试以下...

```
strQuery = "from TempData where englishLex=:englishLex and category =:category and language=:language and login=:login and domain=:domain group by (concat(englishLex,category)) "; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-07T11:19:39.077

正如[官方手册](https://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)所说，我们可以使用`||`or`concat`组合两个`String`s。

在我的情况下，以下在 SQL Server 2012 中工作：

```
Query query = currentSession().createQuery("SELECT DISTINCT u FROM UserBean u WHERE CONCAT (u.name, ' ', u.surname) like :fullname"); 
```

请注意，这`UserBean`是 Java bean 类名，并且在 Java 代码中，必须与类名完全相同。

# php - php：WP循环中的日期时间

> ID：16144783
> 
> 赞同：0
> 
> 时间：2013-04-22T10:25:32.887
> 
> 标签：php, wordpress, datetime

我在 WP 循环中使用 DateTime 函数，将一系列日期附加到每个帖子（开始日期到结束日期），然后可以使用 jQuery 日历将其过滤掉。唯一的问题是，每个帖子都被赋予相同的日期，所有帖子都采用第一个帖子的日期，而不是有自己的个人日期。
PHP：

```
<?php
$args = array(
    'post_type' => array( 'title01' ),
    'order' => 'asc',
    'orderby' => 'title',
    'posts_per_page' => -1
);

$loop = new WP_Query( $args );?>
<?php while ( $loop->have_posts() ) : $loop->the_post();?>

<a href="<?php the_permalink(); ?>">
<div class="grid-block-calendar" data-value="<?php $newBegin = DateTime::createFromFormat('dnY', get_field('title01_date_select'));
$newEnd = DateTime::createFromFormat('dnY', get_field('exhibition_date_end'));
$newEnd = $newEnd->modify( '+1 day' );

$newDaterange = new DatePeriod($newBegin, new DateInterval('P1D'), $newEnd);

foreach($newDaterange as $newDate){
    echo $newDate->format("jnY") . " ";
} ?>">
</div>
</a>

<?php endwhile; ?>

<?php wp_reset_query(); ?>

<?php
$args = array(
    'post_type' => array( 'title02' ),
    'order' => 'asc',
    'orderby' => 'title',
    'posts_per_page' => -1
);

$loop = new WP_Query( $args );?>
<?php while ( $loop->have_posts() ) : $loop->the_post();?>

<a href="<?php the_permalink(); ?>">
<div class="grid-block-calendar" data-value="<?php $begin = DateTime::createFromFormat('dnY', get_field('title02_date_select'));
$end = DateTime::createFromFormat('dnY', get_field('title02_date_end'));
$end = $end->modify( '+1 day' );

$daterange = new DatePeriod($begin, new DateInterval('P1D'), $end);

foreach($daterange as $date){
    echo $date->format("jnY") . " ";
} ?>">
</div>
</a>

<?php endwhile; ?> 
```

例如，第一个帖子显示的日期范围介于 2013 年 5 月 5 日和 2013 年 9 月 9 日之间，而不是仅第一个帖子的日期范围，而是显示在`data-value`所有帖子的日期范围内，但每个单独的帖子都有单独的开始日期和结束日期。

我所有的帖子都在同一日期有原因吗？我知道这可能很简单，但我无法弄清楚问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:37:17.783

最有可能的问题是：`get_field('title02_date_end')`
如果你 var_dump 它里面是什么？

我建议像这样使用它：`get_field('title02_date_end', get_the_ID())`
看看 var_dumping 是否提供了其他东西。

# ios - 如何获取安全令牌然后导航到我们的应用程序？

> ID：16144785
> 
> 赞同：1
> 
> 时间：2013-04-22T10:25:37.730
> 
> 标签：ios, objective-c, access-token

我正在使用 OpenID 身份验证构建一个应用程序，我从 URL 加载 UITableview 中的数据（Google、Yahoo、Facebook），一旦我单击它重定向到 UIWebview 中的登录页面。

当我登录 Google 或其他页面时，页面显示为空。

现在我想在登录后重定向到我的应用程序。如何获取安全令牌？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:19:43.070

`Step 1`：您需要在 Google、facebook、Twitter、Instagram 等的应用程序设置面板中定义回调 URL，对于使用您的开发者帐户登录，转到相应提供商的管理应用程序部分，并相应地设置您的回调 URL，我举个例子Instagram 中的回调 URL，例如。"ig://authorize" CALLBACK URL/URI : ig123456789012345://authorize 这里`ig`代表 instagram，如果它的 facebook 使用 fb1233454667://authorize

`Step 2`：在您的 AppDelegate 文件中编写回调处理程序方法

```
-(BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    return [self.instagram handleOpenURL:url];
}

-(BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    return [self.instagram handleOpenURL:url];
} 
```

`Step 3`：在您的应用程序设置中设置 URL 类型，。![有关详细信息，请参阅以下屏幕截图](https://i.stack.imgur.com/yq0WW.png)

`Step 4`：这就是你现在可以提出身份验证请求的全部内容，成功身份验证后，你的应用程序将被启动。

# silverlight - Silverlight - 管理色彩资源 - 错误

> ID：16144787
> 
> 赞同：1
> 
> 时间：2013-04-22T10:25:45.730
> 
> 标签：silverlight, templates, styling

我正在尝试管理我在 VS2012 中构建的 Silverlight 5 应用程序中的资源。出于主题的目的，我提取了各种自定义模板中的所有颜色代码，并将它们移动到单独的资源文件中，以便可以独立于主模板进行更改。

我已将它们声明如下：

```
<Color x:Name="ButtonForeground">#FFFFFF</Color>
<Color x:Name="ButtonBackground">#004760</Color>
<Color x:Name="ButtonAltBackground">#0089B7</Color> 
```

虽然这可以正常构建和运行，但每当我构建项目时，这些行中的每一行都会出现两个“错误”：

*   无法向“颜色”类型的对象添加内容
*   处理初始化字符串“#ColorCode”时遇到 TypeConverter 语法错误。通过 TypeConverter 创建的对象不允许使用元素属性。

定义了 30 种颜色后，我在错误列表窗口中有 60 个构建错误，即使项目构建并运行良好，这会在出现真正的错误时减损。

这也产生了无法引用我的颜色 ResourceDictionary 的连锁反应，因为他们无法找到包含颜色的主题文件，并且由于依赖于它们的字典不起作用，我无法引用他们依次，所以没有找到我的模板。（这会导致另外 100 多个错误，这些错误不会停止应用程序的构建和运行）

谁能向我解释为什么会出现这些错误，以及我需要做些什么才能让它们消失？

更新：我也尝试过使用以下方法，它对 XAML 没有问题，并且就资源字典而言可以工作，但在运行时抛出异常：

```
<Color x:Name="ButtonForeground" R="255" G="255" B="255"><!--#FFFFFF--></Color>
<Color x:Name="ButtonBackground" R="0" G="71" B="96"><!--#004760--></Color>
<Color x:Name="ButtonAltBackground" R="0" G="137" B="183"><!--#0089B7--></Color> 
```

这看起来与此处发布的错误有关：[Silverlight XAML BUG](https://stackoverflow.com/questions/11281706/silverlight-xaml-bug)

更新 2：我尝试了以下两种方法，两者都有效，但注释掉的版本会导致错误，因此我已将其删除。

```
<VisualState x:Name="Normal">
<Storyboard>
    <ObjectAnimationUsingKeyFrames Duration="0" Storyboard.TargetProperty="Background" Storyboard.TargetName="BtnBorder">
        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ButtonBackgroundBrush}"/>
    </ObjectAnimationUsingKeyFrames>
    <!--<ColorAnimation Duration="0:0:0.1" To="{StaticResource ButtonBackgroundColor}" Storyboard.TargetProperty="Color" Storyboard.TargetName="RbBorderBackground"/>-->
</Storyboard> 
```

活动部分直接指向边框对象并使用它的 Brush 属性，注释掉的版本指向边框使用的 Brush，并使用 Color 属性。注释掉的版本动画流畅且看起来不错，当前版本只是立即换掉画笔。

谢谢

特里斯坦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:14:53.137

对于资源，您必须使用 x:Key，而不是 x:Name。当您有 x:Name 属性但没有 x:Key 时，会发生转换错误。

```
<Color x:Key="ButtonForeground">#FFFFFFFF</Color> 
```

`x:Key`用于标识 ResourceDictionary 中的资源，而`x:Name`用于命名元素（网格、控件等）...

# python - ImportError：无法导入名称 iocpsupport

> ID：16144789
> 
> 赞同：1
> 
> 时间：2013-04-22T10:26:07.217
> 
> 标签：python, twisted

我正在使用扭曲的 API 并收到以下错误

```
Traceback (most recent call last):
  File "C:\Documents and Settings\ggne0622\Desktop\Python\google-python-exercises\babynames\SimpleAgent.py", line 16, in <module>
    from twisted.internet.iocpreactor import reactor
  File "C:\Python27\Lib\site-packages\twisted\internet\iocpreactor\__init__.py", line 8, in <module>
    from twisted.internet.iocpreactor.reactor import install
  File "C:\Python27\Lib\site-packages\twisted\internet\iocpreactor\reactor.py", line 17, in <module>
    from twisted.internet.iocpreactor import iocpsupport as _iocp
ImportError: cannot import name iocpsupport 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:41:34.463

看起来您在没有构建 IOCP 扩展的情况下安装了 Twisted。构建它们（需要与您的 Python 安装兼容的 MSVC 版本）或使用二进制安装程序 - 例如[https://pypi.python.org/pypi/Twisted上的几个安装程序之一](https://pypi.python.org/pypi/Twisted)

# java - 访问变量 EL 表达式中的嵌套属性

> ID：16144794
> 
> 赞同：1
> 
> 时间：2013-04-22T10:26:32.427
> 
> 标签：java, jsf, jsf-2, seam, el

通常，我可以访问嵌套 bean 的属性，在这种情况下，`address_name`如下`address`所示：

```
#{customer.address.address_name} 
```

假设，我有一个字符串：

```
String addressPath = address.address_name 
```

如何`address_name`使用`#{customer}`and访问`#{addressPath}`？

我试过了

```
#{customer[addressPath]} 
```

但它只适用于直接财产。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T05:46:49.810

我不知道是否存在执行此操作的标准方法......但我使用在“costumer”bean（或范围内的帮助 bean）中创建一个方法，以编程方式评估 EL 表达式。

你可以实现这样的方法：

```
 public class Costumer{
        ...
            public Object eval(String exp) {
               //Concatenate your bean name or do it before method call instead
               //to get a String with a content like: "customer.address.address_name"
               exp = "customer." + exp;

               FacesContext facesContext = getFacesContext();
               Application appContext = facesContext.getApplication();
               ExpressionFactory expFactory = appContext.getExpressionFactory();
               ELContext expContext = facesContext.getELContext();
               ValueExpression valExp = expFactory.createValueExpression(expContext,exp, Object.class);

               return valExp.getValue(expContext);
             }
       ...
    } 
```

然后你只需要像这样调用这个方法：

`#{customer.eval(addressPath)}`或者 `#{customer.eval(myScopedBean.addressPath)}`

我认为存在更好的解决方案，也许您的 JSF 框架或组件库（seam、primefaces、richfaces、omnifaces 等）有一种方法来做这样的事情。

# java - 如何检查请求是否来自同一个客户端浏览器？

> ID：16144807
> 
> 赞同：1
> 
> 时间：2013-04-22T10:27:16.293
> 
> 标签：java

我需要像在 Gmail 中那样实现验证码功能。如果用户第一次请求，则不会显示验证码图像。但是，如果用户要求第二次登录，（用户第一次输入错误的密码）需要显示验证码。

请让我知道如何检查请求是否来自同一用户，以便我可以在我的 spring 类中实现一些业务逻辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:04:39.537

您为什么要尝试将登录尝试绑定到具体用户？如果我是不法分子并且我想猜测密码，我将使用可以使用代理的暴力破解器。

每次我都会有新的 IP，所以你的验证码对我不起作用。

在我看来，更好的解决方案是存储错误登录尝试的计数器。每次任何人为特定登录名输入错误密码时，您都会增加此登录的计数器值。如果密码正确，则将此值设置为 0。如果计数器值大于 0，您将显示您的验证码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:33:03.193

将计数器附加到 HTTP 会话。您可能需要将会话存储在服务器端，并且在分布式 ENV 中，您应该跨服务器同步 HTTP 会话。您还可以将该信息存储到客户端 cookie 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:29:44.817

在服务器端（servlet）创建`HttpSession`

```
HttpSession session = request.getHttpSession(); 
```

并在此会话中保持命中数

```
session.setAttribute("count",i);  //you can use getAttribute() method to check the count. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T10:35:41.557

有几种方法可以做到这一点：

*   首次加载页面时，启动会话（或发送一个 cookie）。对会话/cookie 使用计数。第二次找到 cookie 后，您可以吐出验证码。
*   使用隐藏的表单域。在第二个请求中放置一个您可以识别的特殊名称/值对并发送验证码。
*   使用 AJAX！这将涉及使用 XMLhttprequest 提交您的表单，如果无效，您可以显示验证码！这可能会给你更多的控制权，但代价是重新工作。

最后两个项目符号假设您希望在错误密码上而不是在不同的请求/页面重新加载上进行验证码。

上述每一种方法都有其优缺点。您需要根据需要选择一种或组合或多种。

# python - 如何让 emacs-jedi 中的自动补全信息更加紧凑？

> ID：16144812
> 
> 赞同：3
> 
> 时间：2013-04-22T10:27:25.727
> 
> 标签：python, emacs, jedi

我已经学习python大约一个月了，我使用emacs24.3和jedi来编写python代码。绝地武士效果很好，我很喜欢。但是，我想让自动完成菜单更紧凑： ![在此处输入图像描述](https://i.stack.imgur.com/KqDkH.png) 我们可以看到自动完成信息有一些冗余，并且由于自动完成菜单太长而隐藏了文档信息。代替：

```
array                          Import: from numpy.core.numeric import array i
array_str                                       Function: numeric.array_str f
array_type Statement: array_type = [{balabalabalaxxxxxxxxxxxxxxxxxxxxxxx }] s 
```

我想要这样的东西：

```
array               numpy.core.numeric i
array_str            numeric.array_str f
array_type              [{xxxxxx... }] s 
```

这里是 PyCharm 的自动完成弹出菜单进行比较。 ![在此处输入图像描述](https://i.stack.imgur.com/LRrHW.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:55:38.953

有一个 popup.el 的拉取请求（emacs-jedi 依赖于 auto-complete.el 和 auto-complete.el 依赖于 popup.el）来解决这个问题： [https ://github.com/auto-complete/popup -el/拉/28](https://github.com/auto-complete/popup-el/pull/28)

您可能想观看此拉取请求。审查过程接近完成。

同时，如果您不想隐藏弹出文档，可以使用 pos-tip.el ( [http://www.emacswiki.org/emacs/pos-tip.el](http://www.emacswiki.org/emacs/pos-tip.el) )

* * *

编辑：

我认为使摘要信息更紧凑是一个很好的建议。为什么不在 Jedi 的问题跟踪器中发布功能请求：[https ://github.com/davidhalter/jedi](https://github.com/davidhalter/jedi)

# php - 在 PHP 中对二维数组进行排序

> ID：16144819
> 
> 赞同：1
> 
> 时间：2013-04-22T10:27:58.393
> 
> 标签：php, arrays, sorting

我有以下二维数组：

```
Array (
[ID] => Array
    (
        [0] => 150
        [1] => 250
    )

[Group] => Array
    (
        [0] => 120
        [1] => 120
    )

[Name] => Array
    (
        [0] => Name 1
        [1] => Name 2
    )

[Price] => Array
    (
        [0] => 9.99
        [1] => 11.99
    )

[Date] => Array
    (
        [0] => 12.04.2013
        [1] => 11.04.2013
    )

[SortIndex] => Array
    (
        [0] => 20
        [1] => 10
    ) 
```

)

我想在 SortIndex-Array 升序之后对它们进行排序。但是数组中的不同值与其他值相关。因此无法更改关联。我怎样才能对它们进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:33:25.277

有没有理由不将数组转换为更合适的形式？

```
Array (
[0] => Array
    (
        [ID] => 150
        [Group] => 120
    )

[1] => Array
    (
        [ID] => 250
        [GROUP] => 120
    )
.... 
```

# javascript - javascript - 打开隐藏的 iframe 以在文档准备好时下载文件

> ID：16144820
> 
> 赞同：1
> 
> 时间：2013-04-22T10:28:07.090
> 
> 标签：javascript, jquery, iframe, popup, document-ready

我正在尝试使用此技巧在准备好文档时打开文件下载对话框。同样的技巧对我来说又一次奏效了，但那次 iframe 是在 ajax 调用之后添加的。这是片段：

```
<script type="text/javascript">
  $(document).ready(function() {
     var url='/my_file_url/';
     var _iframe_dl = $('<iframe />')
                       .attr('src', url)
                       .hide()
                       .appendTo('body');
  });
</script> 
```

虽然 iframe 在 html 代码中正确打印，但它没有预期的行为：加载页面后不会出现下载文件弹出窗口。为什么有任何帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T10:39:49.733

[**它工作得很好**](http://jsfiddle.net/aMcNV/)，假设 MIME 是一种将开始下载的类型，例如*application/octet-stream*。由于内置的​​ pdf 阅读器，您可能会遇到浏览器正在呈现它并且不提供下载的问题。

```
$(document).ready(function(){
var url='data:application/octet-stream,hello%20world';
var _iframe_dl = $('<iframe />')
       .attr('src', url)
       .hide()
       .appendTo('body');
}); 
```

如果客户端在现代浏览器上，另一种解决方案是使用`<a>`with *href*和*下载*集，然后模拟点击它。

```
var a = document.createElement('a'),
    ev = document.createEvent("MouseEvents");
a.href = url;
a.download = url.slice(url.lastIndexOf('/')+1);
ev.initMouseEvent("click", true, false, self, 0, 0, 0, 0, 0,
                  false, false, false, false, 0, null);
a.dispatchEvent(ev); 
```

# sql - 选择相同 ID 的 Sum

> ID：16144823
> 
> 赞同：-3
> 
> 时间：2013-04-22T10:28:15.800
> 
> 标签：sql, ms-access

这是一个 order_table

```
order_id    name            address     telp_num       pay

1         Mamen Suramen    Indonesia     0888888       1.250
2         Edi              Indonesia     0888888       300 
```

我有订单的详细信息，我添加到名为“q1”的查询中，这是列

```
|order_id|destination  |    car_id | driver |   date   |sub_total| 

    1        b1           D1000A       sp1      jd1       225
    1        b3           D1000A       sp1      jd2       225
    1        b1           D1000A       sp2      jd1       375
    1        b1           D1000B       sp2      jd3       300
    2        b1           D1000A       sp2      jd3       225 
```

我想要总的结果， 可能像这样`q1.order_id`，`order_table.order_id`

```
order id|total|

1        1125
2        225 
```

感谢你的回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:32:08.480

```
select q1.order_id,SUM(q2.sub_total)
from order q1 join order_detail q2
on q1.order_id=q2.order_id
group by q1.order_id 
```

# php - 如何避免未经授权的资源在运行 php 的 Apache Server 中向公众展示？

> ID：16144829
> 
> 赞同：0
> 
> 时间：2013-04-22T10:28:38.903
> 
> 标签：php, apache, security

好的，问题来了，用户上传图片，并仅为该用户设置图片，如 facebook：

![在此处输入图像描述](https://i.stack.imgur.com/rYJ0P.jpg)

但是，当我复制网址并发送给其他人时：

[https://fbcdn-sphotos-da.akamaihd.net/hphotos-ak-ash3/48062_4848804102040_906119890_n.jpg](https://fbcdn-sphotos-d-a.akamaihd.net/hphotos-ak-ash3/48062_4848804102040_906119890_n.jpg)

其他人仍然可以访问该图像。`Only Me`所以，在 Facebook 的情况下，这并不是真正可以访问的图像。所以，如果我的图像或文件真的很重要，我可能会泄露信息。那么，我该如何避免这种情况呢？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:58:26.653

Facebook 需要身份验证（他们检查您的用户名和密码）和授权（他们检查图像是公开的，或者图像是给朋友的朋友的，而您是朋友的朋友，等等），然后他们才会给您图片的链接。

为了避免您所描述的情况，您需要在提供图像之前执行与提供 URL 之前相同的 auth/authz。

围绕图像包装这种保护通常（在 PHP 领域）通过将图像存储在 webroot 之外来完成，然后仅通过 PHP 脚本（执行 auth/authz，设置适当的内容类型标头）提供对它的访问，然后读取图像的字节并将它们输出到服务器以传递给浏览器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:06:10.110

简单的方法：将 php 与会话一起使用，您将图像*存储*在公共目录之外，并在验证用户时使用 php-script 获取图像。

```
**getimg.php**
session_start();
if ($_SESSION['okToViewImage']) {
  $fn = $_GET['fn'];
  $type = explode('.',$fn);
  header('content-type: image/' . $fn[1]); 
  echo file_get_contents('dirOutsideWWWpubScope/'. $fn);
} 
```

# three.js - 事件调度程序 (r58)

> ID：16144840
> 
> 赞同：3
> 
> 时间：2013-04-22T10:28:59.013
> 
> 标签：three.js

r58 中的 EventDispatcer 发生了一些变化，我无法向对象添加更多自定义事件。根据[向 Object3D 添加自定义事件，](https://stackoverflow.com/questions/14397596/add-custom-event-to-object3d)我曾经拥有：

```
var spinner_obj = new THREE.Object3D();
THREE.EventDispatcher.call( spinner_obj );
spinner_obj.addEventListener('start', function(event) {alert("GOT THE EVENT");});
spinner_obj.dispatchEvent({type:'start'}); 
```

但这在 r58 中停止工作并出现错误消息：

```
Object [object Object] has no method 'addEventListener' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:25:12.237

现在它使用函数的单个实例，而不是在每个对象中复制它。

这是迄今为止我发现的最好的方法： [https ://github.com/mrdoob/three.js/blob/master/examples/js/loaders/OBJLoader.js#L11-L14](https://github.com/mrdoob/three.js/blob/master/examples/js/loaders/OBJLoader.js#L11-L14)

我想我会让 Object3D 扩展 EventDispatcher 原型......

# drupal - Drupal：更改 RSS 提要展示

> ID：16144841
> 
> 赞同：1
> 
> 时间：2013-04-22T10:29:01.657
> 
> 标签：drupal, rss

我正在尝试管理由代理机构制作的 Drupal 网站，但我对 Drupal 有点不懂……而且与代理机构的关系不好。

问题是：如何管理 rss.xml 文件的显示。

例如，人们可以在一个地方的网站上添加事件：

```
"ThePlace" and one title "DjTitle". 
```

实际上它会像 rss 提要中的那样：

```
Details of place : "ThePlace"
Details of title : "DjTitle" 
```

我想要类似的东西：

```
Tonight, "DjTitle" play in "ThePlace" 
```

我查看了管理 > RSS 提要，但没有这样的... .

如果您需要查看一些文件，请告诉我，我会更新，但我不知道在哪里再看！

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:40:25.150

您可以创建视图并以您想要的方式构建 RSS 提要。要更改默认 RSS，您可能需要在一两个自定义模块中进行一些自定义！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T18:43:10.323

您所描述的听起来像是带有分类设置的自定义视图。首先，您需要检查 /var/www/html/sites 文件夹。此文件夹应包含 /all 和 /default。如果此处有其他文件夹，则您的站点可能配置为“多站点”。如果您的站点不是多站点配置，请查看 /var/www/html/sites/all/themes 文件夹。如果您的站点是多站点配置，请查看 /var/www/html/sites/yoursite/themes（其中 yoursite = /var/www/html/sites 中的文件夹名称）。

如果您不确定您的站点使用的是什么主题，请使用管理员帐户登录您的 Drupal 站点以查看管理界面。查看外观部分。顶部列出的主题是您当前的默认主题。/var/www/html/sites/all/themes/ 中的文件夹将对应于外观下显示的主题。

确定主题后，您需要找到 RSS 提要使用的模板文件。这些文件的命名将根据提要的设置方式而有所不同。最常见的是，RSS 提要通过views-view-ros-rss.tpl.php 或views-view-rss.tpl.php 进行调整。[您可以从有关 Drupal 的自定义 RSS 主题](http://www.timtoon.com/2009/05/27/customizing-an-rss-feed-using-drupal-and-views/)的许多教程中了解更多信息。

# magento - Magento 折扣和税收计算

> ID：16144844
> 
> 赞同：7
> 
> 时间：2013-04-22T10:29:14.483
> 
> 标签：magento

![在此处输入图像描述](https://i.stack.imgur.com/j7VwU.png)

请查看显示我的 magento 商店结帐详细信息的图像。6929.82 的小计价格是正确的 - 将应用 10% 的折扣。692.98 的折扣金额也是正确的。但是我不知道magento如何将 6929.82 和 692.98 的差异计算为 6321.94 。虽然我使用的是自定义主题，但我尝试恢复到默认主题，结果保持不变，这表明问题出在后端设置或核心 magento 文件中。进一步计算 - 折扣后的 14% 税的应用正确计算并添加到数字中。

任何人都可以帮助我找到导致 Magento 这种奇怪行为的设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-29T11:38:37.820

看起来它是一个错误。请参阅[https://magento.stackexchange.com/questions/2900/completely-incorrect-tax-calculation](https://magento.stackexchange.com/questions/2900/completely-incorrect-tax-calculation)

尝试以下解决方案

```
app/code/local/Mage/Tax/Model/Sales/Total/Quote/Tax.php 
```

第 144 行

```
 if('cart' == Mage::app()->getRequest()->getControllerName()){
    $address->setGrandTotal($address->getGrandTotal() + $address->getTaxAmount());
    $address->setBaseGrandTotal($address->getBaseGrandTotal() + $address->getBaseTaxAmount());
} // if 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-29T11:43:24.720

可能没有显示 Shipping&handling 总计（金额 85.1）。您可以通过数据库查看所有总计及其值，查看 sales_flat_quote_address 表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-20T06:25:15.920

经过大量寻找可能的解决方案后，我无法找到任何完整的证明解决方案来解决我的问题。我也不建议修改 Core Magento 文件，除非您非常确定它会影响您网站的所有区域。

我实施的解决方案是在税收设置中将目录价格设置为“不含税”，然后通过扣除适用于它们的税款手动更改所有产品价格。

例如在实施解决方案之前：

**税收设置**-*目录价格含税*

**商品价格**（在产品规格中输入）- *100* {subtotal 86 + 14@14% tax}

解决后

**税收设置**-*目录价格不含税*

**商品价格**（在产品规格中输入）- *86*

实施此操作后，我发现折扣总额和一切都被正确计算。因为我只有 400 多种产品，所以为了确定，我在一周内手动完成。但是，对于大量产品，您还可以通过 phpmyadmin(etc) 运行查询以直接更改数据库中的值。请记住在这样做之前备份您的数据库。

# javascript - 可以隐藏函数属性，使其在函数外看不到吗？

> ID：16144847
> 
> 赞同：1
> 
> 时间：2013-04-22T10:29:16.210
> 
> 标签：javascript, static-variables

我正在编写一个函数来存储画布模式。如果请求画布模式并且它存在，则返回对画布的引用，否则首先创建画布，然后返回引用。

我的第一次尝试是将这些画布引用添加到一个单独的全局变量，但后来我将其更改为将它们添加到函数中（因为这会保存一个变量）。

但是，我可以从代码中的任何位置读取该属性（无需调用该函数）。这并不是一个真正的大问题，但我想知道它是否可以隐藏（因此，只有调用允许通过返回访问该属性）。

```
alert(myFunction("keyOne")); // "keyOne " + timestamp of now
alert(myFunction("keyTwo"));

alert(myFunction("keyOne")); // same as above, because there it was created
alert(myFunction("keyTwo"));

alert(myFunction.keyOne); // can read it without calling the function, is it possible to hide it?

function myFunction(myKey)
{
    if (!(myFunction.hasOwnProperty(myKey))) { myFunction[myKey] = myKey + " " + Date(); }
    return myFunction[myKey];
} 
```

**编辑：我不知道接受哪个答案。添加变量正是我试图避免的事情。此外，它还给代码增加了很多麻烦，使其难以阅读（但这可能是唯一的方法）。如果这是真的，我就这样离开它。可读性对我来说非常重要。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:32:07.200

您可以在闭包中捕获键和值的映射，而不是将其设置为函数对象的静态属性：

```
var myFunction = (function () {

    var keys = {};

    return function (myKey) {
        if (!keys.hasOwnProperty(myKey)) {
            keys[myKey] = myKey + " " + Date();
        }
        return keys[myKey];
    };

}()); 
```

看起来被赋值的函数表达式`myFunction`被立即调用，所以它的返回值实际上是被赋值的。它的返回值恰好是另一个函数，所以`myFunction`现在包含对该内部返回函数的引用。

由于返回的函数包含对`keys`父作用域中声明的变量的引用，因此一旦包含它的函数返回，该变量就不能被垃圾回收。您创建了一个闭包，它保持对`keys`可用的引用，即使它`keys`本身不再可以直接访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:32:10.747

你可以这样做。

只需创建一个立即调用的函数表达式，以实现闭包的目的，该闭包将包含对包含 myFunction 操作的数据的对象的引用。

```
var myFunction;
(function () {
    var inner = {};

    myFunction = function (myKey) {
        if (!(inner.hasOwnProperty(myKey))) { inner[myKey] = myKey + " " + Date(); }
        return inner[myKey];
    }
}()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T10:34:36.837

您可以将其隐藏在匿名函数中：

```
(function(ns) {

    var store = {};

    ns.myFunction = function(myKey) {
        if (!store.hasOwnProperty(myKey)) {
            store[myKey] = myKey + ' ' + Date();
        }
        return store[myKey];
    }
}(this)); 
```

我隐含地`window`将包装函数作为应该在其下定义函数的“命名空间”传递。`store`无法从外部访问该变量。

# vb.net - 使用 .Net 2.0 在循环中读取串行端口时应用程序崩溃

> ID：16144851
> 
> 赞同：0
> 
> 时间：2013-04-22T10:29:30.753
> 
> 标签：vb.net, crash, serial-port, .net-2.0

我参与了一个项目，经过多次测试，我和我的同事们对我们的编码技能和方法没有什么失望。问题如下：

应用程序必须从通过一个或多个串行端口连接在单一总线上的某种类型的 RS-485 设备读取数据。但是，这些设备来自不同的制造商，因此它们具有不同的连接设置、不同的命令集并返回不同的数据。此外，每个串行端口可以同时处理一个、一个或多个设备。

我们的每个自定义 COMPort 对象都包含一个设备列表，每个设备都包含推荐的类型和设备设置。因此，在加载所有设置并构建所有对象后，应用程序开始轮询每个 COMPort 对象列表中的每个设备。每次，在写入每个命令之前，串行端口缓冲区都会被清空，并且其设置会更改（波特率、奇偶校验、握手），而无需关闭和重新打开端口。在每个命令之后，a`Threading.Thread.Sleep(delay)`会以可变延迟执行，具体取决于每个设备的响应时间（延迟从 150 毫秒到 800 毫秒不等）。Sleep() 结束后，应用程序读取串口并获取预期数据。之后，如果`BytestoRead`> 0 或`BytestoRead`= 0 或发生异常（返回错误数据、校验和错误等），此函数返回并且应用程序继续读取列表中的下一个设备。

因此，应用程序在无限循环中执行，从头到尾读取所有设备，直到用户从 UI 停止它（当项目是 Windows 窗体时）或服务停止时（当项目是 Windows 服务时）它最终结束. 应用程序不使用 DataReceived 事件，因为我们遇到了很多麻烦，因此手动完成读取过程。

最后，应用程序有一个全局日志文件，可以从所有对象访问并保存所有常见和不寻常的事件，每个 COMPort 对象都有自己的日志文件，所有有效的读取数据都写入其中。此外，每个 COMPort 都有一个计时器对象，该对象每秒检查白天的变化，每天午夜所有日志文件关闭并打开新文件。

主要问题是所有这一切似乎都很好，但不幸的是，应用程序在 1-2 小时后停止写入日志（大部分时间在 1:58 分钟后恰好在一台客户端计算机上），然后在几分钟后崩溃，有时会出现发送或不发送窗口，有时无声。CPU 负载从不超过 1%，私有和虚拟内存似乎没有泄漏，因为它没有增长。

我不得不提到，这个应用程序在 3 台机器（Windows XP、Windows 2003）上进行了测试，在以下情况下：混合类型的设备、一种类型的设备、没有连接设备（在一台开发机器上使用空调制解调器电缆。）甚至在最后一种情况下，应用程序静默崩溃。这让我想到这个问题与读取过程无关，因为在“没有连接设备”的情况下，没有要读取的数据。此外，该项目是使用 .Net Framework 2.0 使用 VB.Net 2008 构建的。

**编辑：** *下面是读、写和轮询过程的小总结。我把它写在 Notepad++ 上作为一个例子，因为我现在无法访问真正的代码，所以请原谅任何语法错误。这样做的目的是更好地解释我上面描述的情况，仅此而已。*

```
Private deviceIndex as Integer = -1
Private deviceList as List(Of Devices)
Private serialPort as SerialPort()

Private Sub PollSensor()
    Try
        If (deviceIndex <> -1) And deviceIndex > deviceList.Count then
            deviceIndex = 0
        End If

        With serialPort
            If .IsOpen then
                .DiscardInBuffer()
                .DiscardOutBuffer()
                ' SerialPort attributes must change during runtime to suit device requirements.
                ' Some devices require for example 4800 BaudRate and some other 9600.
                .BaudRate = deviceList(deviceIndex).BaudRate
                .Parity = deviceList(deviceIndex).Parity
                .Handshake = deviceList(deviceIndex).HandShake
                ' Write command to device, passing device specific response time.
                ' Some devices have for example 150ms response time and some other 800ms.
                WritetoDevice(new Byte[] {01, 01}, deviceList(deviceIndex).ResponseTime)
            End If
        End With
    Catch ex As Exception
        ' Log
    End Try
End Sub

Private Sub WritetoDevice(ByVal command As Byte[], ByVal responseTime As Integer)
    Try
        serialPort.Write(command, 0, command.Length)
        ' Cause application to pause for time equal with the device response time.
        Threading.Thread.Sleep(responseTime)
        ' If device response is regular, data may have been available in serial port.
        If ReadDevice() = 0 then
            ' Poll next device
            deviceIndex += 1
            PollSensor()
        End If
    Catch ex As Exception
        ' Log
    End Try
End Sub

Private Function ReadDevice() As Integer
    Dim data as String = ""

    Try
        With serialPort
            If .IsOpen then
                If .BytesToRead() > 0 Then
                    Do
                        data += .ReadExisting()
                    Until .BytesToRead() = 0

                    ' Do something with data
                End If
            End If
        End With
    Catch ex As Exception
        ' Log
    Finally
        ' Continue with the next device in deviceList, ignoring the current device Read() result
        ' This happens because devices return faulty data too often and the polling must continue
        Return 0
    End Try
End Function 
```

我们曾尝试使用 Debug Diagnostics Tool 1.2 x86 但返回结果，这无助于我们了解问题的根源。一些导出的报告包含以下内容，尽管所有异常都在 Try..Catch 块中处理：

```
 - The following threads in ... are waiting in a WaitOne
 - 6,25% of threads blocked
 - System.ExecutionEngineException
 - System.StackOverflowException
 - System.OutOfMemoryException
 - System.FormatException
 - System.Threading.ThreadAbortException 
```

有没有人对上述情况如何工作有更好的了解？

随意批评上述任何方法，因为这将帮助我们变得更好。

# c# - 在单个视图中对单选按钮进行分组，并正确回发表单数据

> ID：16144852
> 
> 赞同：3
> 
> 时间：2013-04-22T10:29:37.173
> 
> 标签：c#, asp.net-mvc-3

我目前正在开发一个 MVC 应用程序，该应用程序在单个视图中涉及多组单选按钮。

当视图被回发时，我希望表单数据被自动解析和键入，以便控制器中的回发方法传递为每组单选按钮选择的选项。

下面是一些示例代码来说明这一点：

**模型**

```
public class SurveyViewModel {

    public List<SurveyQuestion> Questions { get; set; }

}

public class SurveyQuestion

{

    public string Question { get; set; }

    public IEnumerable<SelectListItem> Options { get; set; }

    public int Answer { get; set; }

}

public class Option

{
    public int Value { get; set; }

    public string Text { get; set; }

} 
```

**控制器**

```
 public ActionResult Survey()

    {
        List<string> questions = new List<string> { "Question 1", "Question 2", "Question 3" };

        SurveyViewModel model = new SurveyViewModel {

            Questions = new List<SurveyQuestion>()

        };

        foreach (string question in questions)

        {

            List<Option> list = new List<Option>();

            list.Add(new Option() { Value = 1, Text = "Answer 1" });

            list.Add(new Option() { Value = 2, Text = "Answer 2" });

            list.Add(new Option() { Value = 3, Text = "Answer 3" });

            SelectList sl = new SelectList(list, "Value", "Text");

            model.Questions.Add(new SurveyQuestion {

                Question = question,

                Answer = 1, // TODO: Get this from DB

                Options = sl

            });

        }

        return View(model);

    } 
```

**看法**

```
 @foreach (SurveyQuestion question in Model.Questions)

    {
        <p>@question.Question</p>

        @Html.RadioButtonForSelectList(m => question.Answer, question.Options)

    } 
```

**帮手**

[http://jonlanceley.blogspot.co.uk/2011/06/mvc3-radiobuttonlist-helper.html](http://jonlanceley.blogspot.co.uk/2011/06/mvc3-radiobuttonlist-helper.html)

如果我们只是坚持使用标准 MVC（无扩展），`Html.RadioButtonFor`帮助程序最终会输出在客户端中重复 Option[0]、Option[1]、Option[2] 等命名约定的单选按钮组。

这导致每个组的第一个选项被分组，每个组的第二个选项被分组，依此类推。

另一种方法是在控制器的回发动作中检查当前请求表单数据，并手动解析它，但我希望利用 MVC 将传入数据自动转换为类型参数的能力 - 而不是自己做。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:44:07.947

不要`foreach`为集合使用循环，因为模型绑定器无法编写正确的标记以使其正确绑定集合中的每个项目。您需要使用`for-loop`：

```
for (var i = 0; i < Model.Questions.Count(); i++)
{
    <p>@Model.Questions[i].Question</p>

    @Html.RadioButtonForSelectList(m => Model.Questions[i].Answer, Model.Questions[i].Options)
} 
```

您可以检查使用`forloop`. 现在每个问题都有索引（例如`Questions[0].Answer`，`Questions[1].Answer`等等），因此模型绑定器可以正常工作。我敢打赌，radiobuttonlist 助手甚至无法使用您当前的代码，因为它会写出具有相同名称的选项（例如 question.Answer）。因此，所有选项都被视为一组。

# android - android: 查看分页器和 DisplayImage 加载器，NullPointerException

> ID：16144854
> 
> 赞同：0
> 
> 时间：2013-04-22T10:29:44.117
> 
> 标签：android, android-viewpager, android-pageradapter

我在开发的应用程序中有一些讨厌的错误，基本上在主要活动中我有两个列表视图和一个页面适配器，它们从网络加载数据 - 保存到 sql - 然后显示在视图上，

所有功能都很好，只是在向 viewPager 显示图像时出现了一个问题，它说 NullPointerException

这是显示图像适配器[http://tny.cz/04b77f28](http://tny.cz/04b77f28)

这是适配器代码

```
private class pageAdapter extends PagerAdapter {

    @Override
    public int getCount() {
        return JML_SLIDE;
    }

    @Override
    public Object instantiateItem(View collection, int position) {

        LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View p = inflater.inflate(R.layout.list_headline_home, null);
        Cursor cursor;
        cursor = managedQuery(Uri.withAppendedPath(RolProvider.CONTENT_URI,
                Database.Project.NAME),
                new String[] { BaseColumns._ID,
                        Database.Project.THE_TITLE,
                        Database.Project.THE_BIGIMAGE }, null, null, null);
        cursor.moveToPosition(position);
        TextView judul = (TextView) p.findViewById(R.id.headline_title);
        judul.setText(cursor.getString(1));
         ImageView img = (ImageView) p.findViewById(R.id.headline_img);
         String imageUrl = cursor.getString(2);
         img.setTag(imageUrl);
//line:299   loader.DisplayImage(imageUrl, (Activity) p.getContext(), img);

         btnAction(cursor.getPosition());

        ((ViewPager) pager).addView(p, 0);

        return p;

    }

    @Override
    public void destroyItem(View collection, int position, Object view) {
        ((ViewPager) collection).removeView((View) view);

    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view == ((View) object);
    }

    @Override
    public void finishUpdate(View arg0) {
    }

    @Override
    public void restoreState(Parcelable arg0, ClassLoader arg1) {
    }

    @Override
    public Parcelable saveState() {
        return null;
    }

    @Override
    public void startUpdate(View arg0) {
    }

}

private void btnAction(int action) {
    for (int i = 0; i < 5; i++) {
        String buttonA = "btn" + Integer.toString(i + 1);
        int resID = getResources().getIdentifier(buttonA, "id",
                getPackageName());
        Button buttonsIA = ((Button) findViewById(resID));
        setButton(buttonsIA, Integer.toString(i + 1), 5, 5);
    }

    String buttonID = "btn" + Integer.toString(action + 1);
    int resID = getResources().getIdentifier(buttonID, "id",
            getPackageName());
    Button buttonsI = ((Button) findViewById(resID));
    setButton(buttonsI, Integer.toString(action + 1), 10, 10);

}

private void setButton(Button btn, String text, int h, int w) {

    btn.setWidth(w);
    btn.setHeight(h);
//  btn.setText(text);
} 
```

这是我在寻呼机中使用的 xml

```
<?xml version="1.0" encoding="utf-8"?>
   <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"

    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/headline_img"
        android:layout_width="fill_parent"
        android:layout_height="200dp"
        android:adjustViewBounds="true"
        android:scaleType="fitXY"
        android:src="@drawable/stub">
    </ImageView>

    <TextView
        android:id="@+id/headline_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@id/sample_image"
        android:layout_alignParentLeft="true"
        android:background="#AA000000"
        android:padding="5dp"
        android:textColor="#ffffffff"
        android:textSize="12dp" >
    </TextView>

    <TextView
        android:id="@+id/sample_title22"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@id/sample_title"
        android:layout_alignParentLeft="true"
        android:background="#AA000000"
        android:padding="5dp"
        android:textColor="#ffffffff"
        android:textSize="12dp" >
    </TextView>
</RelativeLayout> 
```

这是logcat说的

```
04-22 17:05:00.578: E/AndroidRuntime(280): java.lang.NullPointerException
04-22 17:05:00.578: E/AndroidRuntime(280):  at com.Myapp.mobile.MainActivity$pageAdapter.instantiateItem(MainActivity.java:299)
04-22 17:05:00.578: E/AndroidRuntime(280):  at android.support.v4.view.PagerAdapter.instantiateItem(PagerAdapter.java:110)
04-22 17:05:00.578: E/AndroidRuntime(280):  at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:649)
04-22 17:05:00.578: E/AndroidRuntime(280):  at android.support.v4.view.ViewPager.populate(ViewPager.java:783)
04-22 17:05:00.578: E/AndroidRuntime(280):  at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1016)
04-22 17:05:00.578: E/AndroidRuntime(280):  at android.view.View.measure(View.java:8171)
04-22 17:05:00.578: E/AndroidRuntime(280):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
04-22 17:05:00.578: E/AndroidRuntime(280):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1012)
04-22 17:05:00.578: E/AndroidRuntime(280):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:381)
04-22 17:05:00.578: E/AndroidRuntime(280):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:304) 
```

任何线索怎么会发生？提前感谢您的所有帮助

更新了活动类：

```
public class MainActivity extends SherlockActivity implements
    OnItemClickListener {

public static ProgressDialog progressDialog;
private ViewPager pager;
private static int JML_SLIDE = 5;
private pageAdapter adaptador;
ImageLoader loader = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    getSupportActionBar().setDisplayShowHomeEnabled(false);
    getSupportActionBar().setDisplayShowTitleEnabled(false);
    setContentView(R.layout.act_main);

    adaptador = new pageAdapter();
    pager = (ViewPager) findViewById(R.id.pager);
    pager.setAdapter(adaptador);
    pager.setCurrentItem(0);
    btnAction(0);

    Button load_btn = (Button) findViewById(R.id.btn_terpopuler);
    load_btn.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            getTerpopuler();
        }
    });

} 
```

# c# - 如何在 foreach 循环中验证元素是否在集合中的最后一个？

> ID：16144860
> 
> 赞同：3
> 
> 时间：2013-04-22T10:29:59.520
> 
> 标签：c#, if-statement, foreach

我有一个 foreach 循环，我需要在其中验证元素是否是我正在迭代的集合中的最后一个。我试过的：

```
foreach (var character in list) // list is of type `string` 
{
    if (character == list.Last())
    {

    }
} 
```

但在这种情况下，如果我有`"la la la"`该`if`语句将在第二个字符上执行。

**问题：**如何编写`if`语句以便在访问序列的最后一个元素时执行？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T10:32:33.000

我建议使用索引而不是对象引用进行迭代，即

```
for (int i = 0; i <= list.Count-1; i++)
{
    if (i == list.Count-1)
    {
        // so something special with last item
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T10:41:42.570

```
foreach (var character in list) // list is of type `string` 
{
    if (character == list[list.Count - 1])
    {

    }
} 
```

这是一个[`DEMO`](http://ideone.com/JiopW9).

作为替代方案，由于`List`实现了`IEnumerable`接口，您可以使用[`Enumerable.Last`](http://msdn.microsoft.com/en-us/library/bb358775.aspx)方法

> 返回序列的最后一个元素。

```
foreach (var character in list) // list is of type `string` 
{
    if (character == list.Last())
    {

    }
} 
```

这是一个[`DEMO`](http://ideone.com/63y0qq).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:37:54.100

由于您的列表实际上是一个字符串，因此您需要将其转换为列表。

```
var elementList = list.Split(" "); 
```

然后您可以找到最后一个元素。

```
var lastElement = elementList.LastOrDefault(); 
```

只需检查使用 IsNullOrEmpty 来处理空列表的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T10:41:10.840

如果你发现自己经常做这种事情，你可以使用扩展方法，让你询问序列中的元素是否是最后一项。

这最初是由 Jon Skeet 写的；[他称它为“Smart Enumerable”](http://www.yoda.arachsys.com/csharp/miscutil/usage/smartenumerable.html)，我相信它是[MoreLinq Linq Extensions](http://code.google.com/p/morelinq/)的一部分（也是 Jon Skeet 的）。

如果您确实使用了这样的东西，您的代码将如下所示：

```
foreach (var character in list.AsSmartEnumerable()) 
    if (character.IsLast)
        // Do something with character.Value 
```

* * *

这是 Jon Skeet 实现的稍微修改的副本：

```
/// <summary>
/// Static class to make creation easier. If possible though, use the extension
/// method in SmartEnumerableExt.
/// </summary>

public static class SmartEnumerable
{
    /// <summary> method to make life easier.</summary>
    /// <typeparam name="T">Type of enumerable</typeparam>
    /// <param name="source">Source enumerable</param>
    /// <returns>A new SmartEnumerable of the appropriate type</returns>

    public static SmartEnumerable<T> Create<T>(IEnumerable<T> source)
    {
        return new SmartEnumerable<T>(source);
    }
}

/// <summary>Wrapper methods for SmartEnumerable[T].</summary>

public static class SmartEnumerableExt
{
    /// <summary>Extension method to make life easier.</summary>
    /// <typeparam name="T">Type of enumerable</typeparam>
    /// <param name="source">Source enumerable</param>
    /// <returns>A new SmartEnumerable of the appropriate type</returns>

    public static SmartEnumerable<T> AsSmartEnumerable<T>(this IEnumerable<T> source)
    {
        return new SmartEnumerable<T>(source);
    }
}

/// <summary>
/// Type chaining an IEnumerable&lt;T&gt; to allow the iterating code
/// to detect the first and last entries simply.
/// </summary>
/// <typeparam name="T">Type to iterate over</typeparam>

[System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Naming", "CA1710:IdentifiersShouldHaveCorrectSuffix", Justification="This is too general to end in 'Collection'")]

public class SmartEnumerable<T>: IEnumerable<SmartEnumerable<T>.Entry>
{
    /// <summary>Enumerable to which we proxy</summary>

    readonly IEnumerable<T> _enumerable;

    /// <summary>Constructor.</summary>
    /// <param name="enumerable">Collection to enumerate. Must not be null.</param>

    public SmartEnumerable(IEnumerable<T> enumerable)
    {
        if (enumerable==null)
        {
            throw new ArgumentNullException("enumerable");
        }

        this._enumerable = enumerable;
    }

    /// <summary>
    /// Returns an enumeration of Entry objects, each of which knows
    /// whether it is the first/last of the enumeration, as well as the
    /// current value.
    /// </summary>

    public IEnumerator<Entry> GetEnumerator()
    {
        using (IEnumerator<T> enumerator = _enumerable.GetEnumerator())
        {
            if (!enumerator.MoveNext())
            {
                yield break;
            }

            bool isFirst = true;
            bool isLast  = false;
            int  index   = 0;

            while (!isLast)
            {
                T current = enumerator.Current;
                isLast = !enumerator.MoveNext();
                yield return new Entry(isFirst, isLast, current, index++);
                isFirst = false;
            }
        }
    }

    /// <summary>Non-generic form of GetEnumerator.</summary>

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }

    /// <summary>
    /// Represents each entry returned within a collection,
    /// containing the value and whether it is the first and/or
    /// the last entry in the collection's. enumeration
    /// </summary>

    public class Entry
    {
        internal Entry(bool isFirst, bool isLast, T value, int index)
        {
            this._isFirst = isFirst;
            this._isLast  = isLast;
            this._value   = value;
            this._index   = index;
        }

        /// <summary>The value of the entry.</summary>

        public T Value
        {
            get
            {
                return _value;
            }
        }

        /// <summary>Whether or not this entry is first in the collection's enumeration.</summary>

        public bool IsFirst
        {
            get
            {
                return _isFirst;
            }
        }

        /// <summary>Whether or not this entry is last in the collection's enumeration.</summary>

        public bool IsLast
        {
            get
            {
                return _isLast;
            }
        }

        /// <summary>The 0-based index of this entry (i.e. how many entries have been returned before this one)</summary>

        public int Index
        {
            get
            {
                return _index;
            }
        }

        readonly bool _isFirst;
        readonly bool _isLast;
        readonly T    _value;
        readonly int  _index;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T10:45:38.107

如果您只想对最后一个字符执行操作，那么[Mare Infinitus](https://stackoverflow.com/users/863502/mare-infinitus)的代码应该可以解决问题。

> 关于什么：

```
var elementList = list.Split(" ");
if (elementList.Last().Equals(character))
{
   // do something here
} 
```

> 这应该这样做，不需要foreach。

但是，如果您想循环并为最后一个字符执行*特定*操作，则可以使用标准`for`循环。[詹姆斯](https://stackoverflow.com/users/82586/james)的回答：

```
for (int i = 0; i <= list.Count-1; i++)
{
    if (i == list.Count-1)
    {
        // so something special with last item
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T10:52:55.100

如果您只有`IEnumerable`，则必须手动触发枚举器。这是一个示例扩展方法，可能对您有所帮助：

```
public static class IEnumerableExtensions
{
    public static void Action<T>(this IEnumerable<T> source, Action<T> sequenceElement, Action<T> lastElement)
    {
        if (source == null)
            throw new ArgumentNullException("source");

        if (sequenceElement == null)
            throw new ArgumentNullException("sequenceElement");

        if (lastElement == null)
            throw new ArgumentNullException("lastElement");

        T element = default(T);

        using (var enumerator = source.GetEnumerator())
        {
            if (enumerator.MoveNext())
                element = enumerator.Current;

            while (enumerator.MoveNext())
            {
                sequenceElement(element);
                element = enumerator.Current;
            }

            lastElement(element);
        }
    }
} 
```

然后你可以这样称呼它：

```
var myElements = Enumerable.Range(1, 10);

myElements.Action(value => Console.WriteLine("Something out of the sequence: " + value),
                    value => Console.WriteLine("The last element: " + value)); 
```

# c# - 在 ext.net 网格面板中执行编辑和删除操作

> ID：16144863
> 
> 赞同：0
> 
> 时间：2013-04-22T10:30:19.177
> 
> 标签：c#, ext.net

如何在 ext.net 网格面板中执行编辑和删除？并且更改应反映在 sql server 数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T12:08:41.347

要删除记录，请使用商店的删除方法。 [http://docs.sencha.com/extjs/4.2.0/#...-method-remove](http://docs.sencha.com/extjs/4.2.0/#...-method-remove)

要编辑记录，您应该选择一种编辑方式。Ext.NET 中有一些。 [http://examples.ext.net/#/GridPanel/...s/CellEditing/](http://examples.ext.net/#/GridPanel/...s/CellEditing/) [http://examples.ext.net/#/GridPanel/Plugins/RowEditor/](http://examples.ext.net/#/GridPanel/Plugins/RowEditor/) [http://examples.ext.net/# /GridPanel/...Column/Editor/](http://examples.ext.net/#/GridPanel/...Column/Editor/) [http://examples.ext.net/#/GridPanel/...n/Over_Editor/](http://examples.ext.net/#/GridPanel/...n/Over_Editor/) [http://examples.ext.net/#/GridPanel/...mn/ Pin_Editor/](http://examples.ext.net/#/GridPanel/...mn/Pin_Editor/)

关于保存到服务器。请研究保存功能的示例。 [http://examples.ext.net/#/search/saving](http://examples.ext.net/#/search/saving) [http://examples.ext.net/#/GridPanel/Update/AutoSave/](http://examples.ext.net/#/GridPanel/Update/AutoSave/) [http://examples.ext.net/#/GridPanel/Update/Batch /http://examples.ext.net/#/GridPanel/...SqlDataSource/](http://examples.ext.net/#/GridPanel/Update/Batch/) [_](http://examples.ext.net/#/GridPanel/...SqlDataSource/)

[来源](http://forums.ext.net/showthread.php?24538)。_

# node.js - 当所有并行运行的函数完成他们的工作时如何运行回调？

> ID：16144865
> 
> 赞同：1
> 
> 时间：2013-04-22T10:30:19.770
> 
> 标签：node.js, asynchronous

我的问题是：“如何在所有异步函数完成工作后运行回调”

这里有一个例子：

```
function doTasks(**callback**) {
   doTask1(function() {
   ...
   });

   doTask2(function() {
   ...
   });
} 
```

我不想一个接一个地运行一个任务。并行运行它们的想法，但我需要在完成后立即进行回调。nodeJs 有内置功能吗？

现在我正在使用 EventEmitter 和计数器的组合。每次任务完成时，它都会运行一个事件。因为我知道已经运行了多少任务。我可以数数并发出回调。但必须采用更灵活的方式。这是我现在使用的。

```
var EventEmitter = require("events").EventEmitter;

var MakeItHappen = module.exports = function (runAfterTimes, callback) {
    this._aTimes                = runAfterTimes || 1;
    this._cTimes                = 0;
    this._eventEmmiter          = new EventEmitter();
    this._eventEmmiter.addListener("try", callback);
}

MakeItHappen.prototype.try = function () {
    this._cTimes += 1;
    if (this._aTimes === this._cTimes) {
        this._cTimes = 0;
        this._eventEmmiter.emit("try", arguments);
    }
} 
```

还有另一种方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T10:52:27.617

你可以使用异步库，[https://github.com/caolan/async](https://github.com/caolan/async)

```
async.parallel([
    function(){ ... },
    function(){ ... }
], callback); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T11:27:11.200

使用计数器：

```
var a = function (cb){
    //Asynchronous stuff
    cb ();
};

var b = function (cb){
    //Asynchronous stuff
    cb ();
};

var remaining = 2;

var finish = function (){
    if (!--remaining){
        //a and b finished...
    }
};

a (finish);
b (finish); 
```

# sharedpreferences - BlackBerry 10 中的共享首选项或持久存储

> ID：16144866
> 
> 赞同：2
> 
> 时间：2013-04-22T10:30:20.503
> 
> 标签：sharedpreferences, key-value, blackberry-10, persistent-storage

我想知道是否可以选择将 KEY-VALUE 对存储在 Blackberry 10 的移动设备的持久存储中。

如果是，如何使用它。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T12:18:10.400

Cascades 提供了[QSettings](https://developer.blackberry.com/cascades/reference/qsettings.html)类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:03:31.650

课堂上有QSettings，我提供了读写QSettings的方法

```
void MainWindow::writeSettings()
 {
     QSettings settings("Moose Soft", "Clipper");

     settings.beginGroup("MainWindow");
     settings.setValue("size", size());
     settings.setValue("pos", pos());
     settings.endGroup();
 }

 void MainWindow::readSettings()
 {
     QSettings settings("Moose Soft", "Clipper");

     settings.beginGroup("MainWindow");
     resize(settings.value("size", QSize(400, 400)).toSize());
     move(settings.value("pos", QPoint(200, 200)).toPoint());
     settings.endGroup();
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T03:45:13.373

查看 Starship 设置示例以了解如何使用它。[github 上的 Starship 设置代码](https://github.com/blackberry/Cascades-Samples/tree/next/starshipsettings)

# asp.net-mvc - 在 SPA 应用程序中设置主页

> ID：16144868
> 
> 赞同：0
> 
> 时间：2013-04-22T10:30:27.430
> 
> 标签：asp.net-mvc, single-page-application, durandal

嗨，我正在使用 Hot Towel 模板和 asp.net MVC 开发 SPA 应用程序。我的应用程序主页当前设置为指向 RouteConfig.cs 中的 Home 和 Index 控制器。

我必须更改该路线以指向 Durandel 视图。

这个链接应该是打开我主页的链接：

```
http://localhost:61620/Home/MyCourses#/dashboard 
```

如果是 asp.net mvc，我会在 RouteConfig.cs 中设置它。如果仍然是这种情况，我该怎么做？如果不是，我应该在哪里设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:31:45.210

通常，在基于 Durandal 的 SPA 中，shell 的激活函数中有代码使用路由器来激活“主页”页面。在 Hot Towel 模板中，此代码位于 shell 的`boot()`函数中。此代码通常如下所示：

```
 function activate() {
        return boot();
    }

    function boot() {
        ... //router setup
        return router.activate('home');
    } 
```

这将设置应用程序，以便当用户浏览到时`http://localhost:61620/Home/MyCourses#/`，应用程序将自动加载`dashboard`路由，即使它可能不是文字 url 的一部分。

# .net - Windows 2003 服务器上的声纳配置

> ID：16144872
> 
> 赞同：0
> 
> 时间：2013-04-22T10:30:38.420
> 
> 标签：.net, hudson, sonarqube, sonar-runner

我已经安装了`sonar`，`sonar-runner`并且`hudson`在`windows 7`机器上它工作正常，但是当我想在我的生产服务器上复制这些步骤时，`windows 2003 server`我得到了文件路径的错误，`fx-cop`尽管我已经在**project.properties**`FxCop`中提供了安装路径， 但它仍然看起来

 ****C:\Program 文件 (x86)\Microsoft FxCop 1.36\FxCopCmd.exe**

除了存储默认路径的项目中的属性文件 ????

我怎样才能解决这个路径问题。`windows 2003 server`任何帮助？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:31:22.747

您不应该在“sonar-project.properties”文件中设置该属性，因为该属性可能不会指向不同机器上的同一个文件夹。

相反，您应该在安装 Sonar Runner 的 %SONAR_RUNNER_HOME% 文件夹中的“conf/sonar-runner.properties”文件中设置此属性。它应该看起来像：

```
sonar.fxcop.installDirectory=C:/FooFolder/FxCopInstallFolder 
```

请注意，您必须使用“/”而不是“\”。**

# c# - 启用 WCF 服务以与 JSON 一起使用

> ID：16144873
> 
> 赞同：10
> 
> 时间：2013-04-22T10:30:40.610
> 
> 标签：c#, .net, json, wcf

我创建了一个 wcf 服务。当我通过添加为 Web 服务在 .net 中简单地使用时，这工作正常。但我想让它能够作为 JSON 调用用于 iPhone 应用程序。为了测试，我在 .net 中使用了它和 JSON，但它不起作用。

我知道以前有人问过这种问题，我已经在寻找这个无法为我找到解决方案。

我的配置：

```
<system.serviceModel>
<behaviors>
  <serviceBehaviors>
    <behavior name="servicebehavior">
      <serviceMetadata httpsGetEnabled="true" />
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="endpointBehavior">
      <enableWebScript />
      <webHttp defaultBodyStyle="Wrapped" defaultOutgoingResponseFormat="Json" />
    </behavior>
  </endpointBehaviors>

</behaviors>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
<services>
  <service name="MyService" behaviorConfiguration="servicebehavior">
    <endpoint address=""
              behaviorConfiguration="endpointBehavior"
              binding="webHttpBinding"
              contract="IMyService" />
  </service>
</services> 
```

接口代码：

```
[ServiceContract]
public interface IGolfPyramidService
{

    [WebInvoke(UriTemplate = "/Test", Method = "POST", ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.WrappedRequest)]
    [OperationContract]
    string Test();

} 
```

Myservice.cs 代码：

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class MyService : IMyService
{        
    public string Test()
    {
        return "success";
    }
} 
```

我希望可以使用 url 格式调用该方法，例如： [http ://example.com/MyService.svc/test](http://example.com/MyService.svc/test)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T10:36:27.827

如果您是初学者，那么这将指导您创建支持 json 和 xml 的 Web 服务，供 IOS 和 android 使用。
[http://www.codeproject.com/Articles/105273/Create-RESTful-WCF-Service-API-Step-By-Step-Guide](http://www.codeproject.com/Articles/105273/Create-RESTful-WCF-Service-API-Step-By-Step-Guide)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-22T11:17:15.767

为什么你使用 post 方法来获取一个简单的字符串值？试试这个应该正常工作的例子。

配置

```
 <system.serviceModel>
<services>
  <service behaviorConfiguration="RestServiceBehavior" name="WcfService1.MyService">
    <endpoint address="" behaviorConfiguration="web" binding="webHttpBinding" bindingConfiguration="webHttpBindingWithJSONP" contract="WcfService1.IMyService" />
  </service>
</services>
<bindings>
  <webHttpBinding>
    <binding name="webHttpBindingWithJSONP" />
  </webHttpBinding>
</bindings>
<behaviors>
  <endpointBehaviors>
    <behavior name="web">
      <webHttp />
    </behavior>
  </endpointBehaviors>
  <serviceBehaviors>
    <behavior name="RestServiceBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" /> 
```

IMyService.cs

```
namespace WcfService1
{
[ServiceContract]
public interface IMyService
{
    [WebGet(UriTemplate = "Test",
        ResponseFormat = WebMessageFormat.Json
    )]
    [OperationContract]
    string Test();
}
} 
```

我的服务.svc.cs

```
namespace WcfService1
{
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class MyService : IMyService
{
    public string Test()
    {
        return "Test";
    }
}
} 
```

# google-apps-script - 谷歌应用程序脚本电子表格服务 appendrow 复式

> ID：16144875
> 
> 赞同：1
> 
> 时间：2013-04-22T10:30:47.513
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api

我正在使用 GAS 将数据写入电子表格，除了每次保存 TWICE 记录的部分外，一切都按预期工作。我不认为客户端或服务器功能会触发两次，所以它可能是我错过的其他东西。任何见解将不胜感激。谢谢！

客户端功能：

```
//save data
function savedata() {
  var data = $('#dataSetter');
  var startTime = data.find('#startTime').val();
  var firstName = data.find('#firstName').val();
  var lastName = data.find('#lastName').val();
  var phone = data.find('#phone').val();
  var email = data.find('#email').val();
  var obj = $(this).parent();
  var weekDate = getSuffix(obj.attr('id'));
      weekDate = weekDate.replace('-', '/');
  var year = getSuffix(obj.attr('class'));
  var date = weekDate+'/'+year;

  google.script.run.withSuccessHandler(dataSaved).setdata(office, firstName, lastName, phone, email, date, startTime);
  google.script.run.withFailureHandler(onFailure).setdata(office, firstName, lastName, phone, email, date, startTime);
} 
```

服务器功能：

```
//saves data
function setdata(office, firstName, lastName, phone, email, date, startTime) {
  var dataSheet = dataBook.getSheets()[0];
  var membersSheet = membersBook.getSheets()[0];
  var membersLastRow = membersSheet.getLastRow();

  var lastmemberID = membersSheet.getRange('A'+membersLastRow).getValue();

  var newmemberID = memberID(lastmemberID);

  membersSheet.appendRow([newmemberID, lastName, firstName, phone, email]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:48:09.800

您正在对 setdata 函数进行两次调用，因此应该会出现两次输入。尝试这个：

```
google.script.run.withSuccessHandler(dataSaved).withFailureHandler(onFailure).setdata(office, firstName, lastName, phone, email, date, startTime); 
```

代替：

```
google.script.run.withSuccessHandler(dataSaved).setdata(office, firstName, lastName, phone, email, date, startTime);
  google.script.run.withFailureHandler(onFailure).setdata(office, firstName, lastName, phone, email, date, startTime); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:31:42.080

我也曾多次经历过 tbsi 错误，尽管只是偶尔发生。它插入的行数是我要求的两倍。我用锁保护了所有代码（锁服务，你也应该使用它，因为你使用 getastrow 等）所以我知道代码没有并行运行。

# c# - WebAPI 接受通过 Fiddler 发送的损坏的 JSON

> ID：16144877
> 
> 赞同：0
> 
> 时间：2013-04-22T10:30:52.600
> 
> 标签：c#, json, asp.net-mvc-4, asp.net-web-api

出于某种原因，我可以将这两个 JSON 请求发送到我的 WebAPI，它会接受并创建一个用户。一个带双引号，一个不带。

```
{"Username":"Bob", "FirstName":"Foo", "LastName":"Bar", "Password":"123", "Headline":"Tuna"}

{Username:"Bob", FirstName:"Foo", LastName:"Bar", Password:"123", Headline:"Tuna"} 
```

这是创建用户的方法。

```
 // localhost:12345/api/controller/create
    [ActionName("create")]
    public HttpResponseMessage PostUser(User user)
    {
        if (ModelState.IsValid)
        {
            db.Users.Add(user);
            db.SaveChanges();

            HttpResponseMessage response = Request.CreateResponse(HttpStatusCode.Created, user);
            response.Headers.Location = new Uri(Url.Link("DefaultApi", new { id = user.UserId }));
            return response;
        }
        else
        {
            return Request.CreateErrorResponse(HttpStatusCode.BadRequest, ModelState);
        }
    } 
```

但是，我可以在没有`/create`URL 末尾的情况下发出成功的 POST 请求。我假设 POST 请求成功的原因是因为无论操作名称是否存在，它都会`Post`在方法名称中搜索 a 。

所以我的问题是，动作名称的目的是什么？我怎样才能使它成为 URL 中的必须项？还有为什么它同时接受 JSON 请求，我怎样才能让它接受一个或另一个。

**编辑：**

```
config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

// Routing by Action-name
config.Routes.MapHttpRoute(
            name: "ActionApi",
            routeTemplate: "api/{controller}/{action}/{username}",
            defaults: new { username = RouteParameter.Optional }
        ); 
```

感谢您的时间

/两次

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:37:34.250

> 我怎样才能使它成为 URL 中的必须项？

通过更改您的路由定义`~/App_Start/WebApiConfig.cs`并使操作名称显式出现在您的路由中：

```
config.Routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

> 还有为什么它同时接受 JSON 请求，我怎样才能让它接受一个或另一个。

因为 Web API 使用 JSON.NET 作为接受这两者的 JSON 序列化程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:36:21.100

如果您查看`App_Start`为您的 API 调用注册的路由，您将看到：

```
config.Routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

您会注意到没有`action`指定。如果要映射到操作名称，可以将其更改为：

```
config.Routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: new { action = "get", id = RouteParameter.Optional }
); 
```

但是你总是需要设置一个动作（除非它`GET`是默认的）。您不能再`POST`直接使用控制器，您总是需要添加一个`action`.

根据[此链接](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api)，默认行为是查找以使用的 HTTP 方法开头的方法：

> 为了找到该操作，Web API 会查看 HTTP 方法，然后查找名称以该 HTTP 方法名称开头的操作。例如，对于 GET 请求，Web API 会查找以“Get...”开头的操作，例如“GetContact”或“GetAllContacts”。此约定仅适用于 GET、POST、PUT 和 DELETE 方法。您可以通过使用控制器上的属性来启用其他 HTTP 方法。我们稍后会看到一个例子。

另一种选择是为您的不同`GET`调用创建不同的控制器，这是我过去所做的。

# php - 尝试访问 upload.php 时，plupload 运行时返回 403 FORBIDDEN 错误

> ID：16144879
> 
> 赞同：8
> 
> 时间：2013-04-22T10:30:53.540
> 
> 标签：php, javascript, jquery, iis, plupload

## 介绍

我试图在一个可能很复杂的环境中实现一些相对简单的东西。我想使用[plupload jQuery UI 插件将文件从 JavaScript 小部件（](http://www.plupload.com/) [Netvibes UWA 格式](http://dev.netvibes.com/)）上传到本地 Intranet 服务器。

## 问题

我似乎正确地设置了我的代码 -`plupload`容器出现了，我可以愉快地选择和上传文件。上传似乎工作 - 每个文件都达到 100% - 但是当我检查我的 Firebug 控制台时，我收到以下错误：

`OPTIONS upload.php - 403 Forbidden`

并且文件**不会**上传到我指定的`files`目录。

![Firebug 网络输出](https://i.stack.imgur.com/HWB1T.png)

## 环境

*   源服务器`frogserver.curriculum.local`位于内部 IP 192.168.3.15
*   收件人服务器`staff.curriculum.local`位于内部 IP 192.168.3.60
*   源服务器是 linux，但我无法直接访问 HTML/JS/PHP/SQL，一切都必须通过前面提到的 Netvibes Universal Widget API 完成。这是 www.frogtrade.com 提供的封闭式虚拟学习环境解决方案
*   接收服务器是 Windows/IIS

## 代码

**JavaScript**

```
widget.onLoad = function(){
    $( "#datetime" ).datepicker({ dateFormat: "yy-mm-dd" });
    Input.init();

    /* plupload */
    $("#uploader").plupload({
        // General settings
        runtimes : 'html5,flash,html4',
        url : 'http://staff.curriculum.local/frog/LOTS/upload.php',
        max_file_size : '1000mb',
        max_file_count: 20, // user can add no more then 20 files at a time
        chunk_size : '1mb',
        rename: true,
        multiple_queues : true,

        // Resize images on clientside if we can
        resize : {width : 320, height : 240, quality : 90},

        // Rename files by clicking on their titles
        rename: true,

        // Sort files
        sortable: true,

        // Specify what files to browse for
        filters : [
            {title : "Image files", extensions : "jpg,gif,png"},
            {title : "Zip files", extensions : "zip,avi"}
        ],

        // Flash settings
        flash_swf_url : '/user/74/186718.swf'
    });

    // Client side form validation
    $('form').submit(function(e) {
        var uploader = $('#uploader').plupload('getUploader');

        // Files in queue upload them first
        if (uploader.files.length > 0) {
            // When all files are uploaded submit form
            uploader.bind('StateChanged', function() {
                if (uploader.files.length === (uploader.total.uploaded + uploader.total.failed)) {
                    $('form')[0].submit();
                }
            });

            uploader.start();
        } else
            alert('You must at least upload one file.');

        return false;
    });
} 
```

**HTML**

```
<form  method="post" action="../dump.php">
    <div id="uploader">
        <p>Your browser doesn't have Flash, Silverlight, Gears, BrowserPlus or HTML5 support.</p>
    </div>
</form> 
```

**PHP**

我使用的 PHP 脚本是捆绑的`upload.php`文件处理脚本，在顶部添加了以下代码：

```
// * - stands for all domains
header("Access-Control-Allow-Origin: *"); 
```

我还更改了上传目录目标：

```
// Settings
//$targetDir = ini_get("upload_tmp_dir") . DIRECTORY_SEPARATOR . "plupload";
$targetDir = 'files'; 
```

## 想法

*   我不确定这是否被归类为“跨域”文件传输？我试图将其设置为就好像它一样，因此`Access-Control-Allow-Origin`我的 PHP 脚本中的标头
*   Netvibes UWA 和 VLE 设置可能会以某种方式阻碍
*   Internet Guest 帐户的 LOTS 文件夹上的 IIS 权限似乎是正确的（即“读取”权限），但我不完全确定；它在“特殊权限”上有“拒绝”，我似乎看不到这些权限是什么，或者改变它

## 编辑：IIS 权限

刚刚检查，一切似乎都是正确的：

![权限](https://i.stack.imgur.com/934fV.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:56:39.523

## [编辑] CORS

由于权限似乎没问题，这可能是 CORS 问题。

我偶然发现了[monsur](https://stackoverflow.com/users/107250/monsur)对这个问题的回答： [Is it possible to use XMLHttpRequest across Domains](https://stackoverflow.com/a/8536409/1437016) , 引用：

> CORs 请求实际上由两个物理 HTTP 请求组成：1) 预检请求，以及 2) 实际请求。您在上面发布的请求看起来像预检请求，因为它使用 HTTP OPTIONS 方法。因此，您要做的第一件事是验证您的服务器是否接受 OPTIONS 请求（我相信这应该可以正常工作，但它可以解释为什么您会收到 403）。

## 权限

根据这个[文档](http://support.microsoft.com/kb/979124)：

> 为您上传的内容创建一个单独的文件夹并更改上传文件夹的 NTFS 文件权限
> 
> 通过这样做，您可以配置不同于 Web 应用程序其余部分的上传内容的行为。授予 IIS 工作进程标识的上传文件夹读取和写入权限。对于Windows Server 2003 中的**IIS 6.0 ，您可以为此使用****IIS_WPG**用户组。对于**IIS 7.0**及更高版本，您可以使用**IIS_IUSRS**用户组。

您可能正在检查错误用户 ( **IUSR_ASHVOIP** ) 的权限，请尝试**IIS_WPG**（似乎适合您）或**IIS_IUSRS**，具体取决于您的配置。

# jquery - jquery getJson 和数组

> ID：16144882
> 
> 赞同：0
> 
> 时间：2013-04-22T10:30:58.257
> 
> 标签：jquery, json, getjson

我对 jQuery getJSON 和显示结果有疑问。

jQuery 代码

```
jQuery(document).ready(function(){
jQuery.getJSON("gsm.php",{getproducts:'495074, 495061, 495060'},function(response){
    jQuery.each(response, function() {
        jQuery('#item1').html(response.item1);
        jQuery('#item2').html(response.item2);
    });

});
}); 
```

gsm.php JSON 响应

```
[
{
    "item1": "test data 1",
    "item2": "test data 1a"
},
{
    "item1": "test data 2",
    "item2": "test data a"
}
] 
```

很抱歉，但我无法解决其他帖子的问题。

我将不胜感激任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:49:34.713

```
$(document).ready(function() {

        $.getJSON("gsm.php", { getproducts: '495074, 495061, 495060' }, function(response) {
            $.each(response, function(key, value) {
                $('#item1').html(value.item1);
                $('#item2').html(value.item2);
            });
        });

    }); 
```

您错过了这一点`function(key, value)`并使用 value 从 json 获取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:38:24.490

尝试这个 -

```
jQuery.each(response, function(index,value) {
        jQuery('#item1').html(value.item1);
        jQuery('#item2').html(value.item2);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:44:19.293

尝试这个

```
jQuery.each(response, function() {
    jQuery('#item1').html(this.item1);
    jQuery('#item2').html(this.item2);
}); 
```

# sql-server-2008-r2 - 显示创建表 SQL 的语句

> ID：16144884
> 
> 赞同：1
> 
> 时间：2013-04-22T10:31:03.900
> 
> 标签：sql-server-2008-r2, shortcuts

是否有一个`stored procedure`或一些我可以运行的 SQL 来显示用于从现有表创建表的 SQL？喜欢`sp_helptext`显示 a`function`或的内容`stored procedure`。基本上，有没有办法做到这一点`Script Table As->CREATE TO`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:45:13.433

答案是不。如果您启动分析器，并在 SSMS 中运行 [scirpt table]>[create to]，那么您将看到一系列 sp_executesql 在 sys.* 表上运行。这意味着没有 CREATE TABLE 命令存储在 SQL Server 中的任何位置，并且 SSMS 为来自许多不同来源的表组装 CREATE 语句。

另一方面，如果运行 [script view]>[create to]，您将看到来自 sys.all_objects、sys.sql_modules、sys.system_sql_modules 的简单查询，其中存储了定义。

# mysql - 使用 Mule Studio 读取 CSV

> ID：16144885
> 
> 赞同：1
> 
> 时间：2013-04-22T10:31:06.353
> 
> 标签：mysql, csv, mule, mule-studio

我试试这个例子： [使用 Mule Studio 逐步读取 CSV](http://www.dotnetfunda.com/articles/article2070-using-mule-studio-to-read-csv-comma-seperated-value-data-from-fileinboun.aspx?com=added)，但 csv 的内容不会复制到数据库。我离开控制台和 myflow 没有任何错误：

```
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:file="http://www.mulesoft.org/schema/mule/file" xmlns:jdbc="http://www.mulesoft.org/schema/mule/jdbc" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" version="CE-3.3.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd 
http://www.mulesoft.org/schema/mule/jdbc http://www.mulesoft.org/schema/mule/jdbc/current/mule-jdbc.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd ">

   <configuration doc:name="Configuration">
        <expression-language autoResolveVariables="true">
            <import class="org.mule.util.StringUtils" />
        </expression-language>
    </configuration>

    <jdbc:mysql-data-source name="MySQL_Data_Source" user="roor" url="jdbc:mysql://localhost:3306/csv" transactionIsolation="UNSPECIFIED" doc:name="MySQL Data Source" password="1234"/>

    <jdbc:connector name="Database" dataSource-ref="MySQL_Data_Source" validateConnections="true" queryTimeout="-1" pollingFrequency="0" doc:name="Database">
        <jdbc:query key="InsertRecord" value="INSERT INTO &quot;tblFamily&quot;(&quot;Title&quot;, &quot;FirstName&quot;, &quot;LastName&quot;) VALUES (#[message.payload[0]],#[message.payload[1]],#[message.payload[2]])"/>
    </jdbc:connector>
    <flow name="csvFlow1" doc:name="csvFlow1">
     <!-- Step 1: CSV file source -->
    <file:inbound-endpoint path="C:\Users\masoudy\Downloads\Compressed\Resoes" pollingFrequency="5000" doc:name="Source"/>
        <!-- Step 2: Convert between object arrays and strings -->
    <object-to-string-transformer doc:name="Object to String"/>
        <splitter expression="#[StringUtils.split(message.payload, '\n\r')]" doc:name="Splitter"/>
    <expression-transformer expression="#[StringUtils.split(message.payload, ',')]" doc:name="Expression"/>
        <jdbc:outbound-endpoint exchange-pattern="one-way" queryTimeout="-1" doc:name="Destination" connector-ref="Database" queryKey="InsertRecord"/>

</flow>

</mule> 
```

我的控制台：

......

```
**********************************************************************
* Application: csv                                                   *
* OS encoding: Cp1256, Mule encoding: UTF-8                          *
*                                                                    *
* Agents Running:                                                    *
*   JMX Agent                                                        *
**********************************************************************
INFO  2013-04-22 14:55:54,437 [main] org.mule.module.launcher.DeploymentService: 
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+ Started app 'csv'                                        +
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ 
```

**[控制台](http://www.uploadmb.com/dw.php?id=1366697897)** [csv](http://www.uploadmb.com/dw.php?id=1366697987)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:39:12.600

我可以取得好的结果并将 csv 文件转换为数据库。

我有两个错误：

1.  运行程序后，`.csv`文件从路径中清除，我没有，在没有`.csv`文件的情况下再次运行程序

2.  查询 xml 中的字段名称与数据库中的列名称不同

# c# - SQL Server 2008：删除后重新增加表

> ID：16144887
> 
> 赞同：1
> 
> 时间：2013-04-22T10:31:08.290
> 
> 标签：c#, sql, sql-server-2008

使用 SQL Server 2008，使用 MS Visual Studio 2012 C# .NET4.5

上周我问了一个类似的问题，通过以下查询解决了这个问题：

```
DECLARE @from int = 9, @to int = 3

UPDATE MainPareto 
SET pareto = m.new_pareto
FROM (
SELECT pKey, -- this is your primary key for the table
new_pareto = row_number() 
over(ORDER BY   CASE WHEN pareto = @from THEN @to ELSE pareto END, 
                CASE WHEN pareto = @from THEN 0 ELSE 1 END)
FROM MainPareto
-- put in any conditions that you want to restrict the scores by.
WHERE PG = @pg AND pareto IS NOT NULL
-- end condtions
) as m
INNER JOIN MainPareto ON MainPareto.pKey = m.pKey
WHERE MainPareto.pareto <> m.new_pareto 
```

如您所见，这很好用，在进行更改时会增加“联盟”。
现在，在某些功能用户请求删除和恢复之后。

在我的 winform 上，用户可以右键单击网格并删除“零件”编号。

如果需要，用户也可以恢复。

但是，我需要一个存储过程，它将在从另一个存储过程中删除之后像这种方法一样使用网格和更新，我的 Winform 会对该部分进行排序，但我确实需要一个可以完成我当前的过程的过程删除。

希望你们理解，如果不问我，我会尽力澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T22:17:59.143

我不完全确定这是否是您要查找的内容，但这就是您可以重新设置主键列的方法（如果您的主键也是`identity`）。请注意我在截断后的插入不包括第 1 列（主键列）。

```
select *
into #temp
from MainPareto

truncate table MainPareto

insert into MainPareto (col2, col3, col4) --...
    select col2, col3, col4 --...
    from #temp 
```

# https - 如何在客户端处理 https（record_too_long 错误）

> ID：16144888
> 
> 赞同：1
> 
> 时间：2013-04-22T10:31:09.900
> 
> 标签：https, go

我正在构建代理，我也想处理 https url。
问题是当我尝试访问[https://google.com时出现错误](https://google.com)

```
SSL  received a record that exceeded the maximum permissible length.
(Error code: ssl_error_rx_record_too_long) 
```

我的代理的代码是这样的：

```
package main

import (
    "crypto/tls"
    "flag"
    "io/ioutil"
    "log"
    "net/http"
    "strings"
    "unicode"
)

var (
    listen = flag.String("listen", "localhost:1080", "listen on address")
    logp   = flag.Bool("log", true, "enable logging")
)

func main() {
    flag.Parse()
    proxyHandler := http.HandlerFunc(proxyHandlerFunc)

    log.Fatal(http.ListenAndServe(*listen, proxyHandler))

    //log.Fatal(http.ListenAndServeTLS("localhost:1080", "cert.pem","key.pem",proxyHandler))

}
func copyHeaders(dst, src http.Header) {
    for k, _ := range dst {
        dst.Del(k)
    }
    for k, vs := range src {
        for _, v := range vs {
            dst.Add(k, v)
        }
    }
}

func proxyHandlerFunc(w http.ResponseWriter, r *http.Request) {
    log.Println(r.Method)

    if r.Method == "CONNECT" && 1 == 2 {

    } else {
        // Log if requested
        if *logp {
            log.Println(r.URL)
        }

        tr := &http.Transport{
            TLSClientConfig: &tls.Config{InsecureSkipVerify: true},
        }

        // We'll want to use a new client for every request.
        client := &http.Client{Transport: tr}

        // Tweak the request as appropriate:
        //  RequestURI may not be sent to client
        //  URL.Scheme must be lower-case
        r.RequestURI = ""

        r.URL.Scheme = strings.Map(unicode.ToLower, r.URL.Scheme)
        if r.URL.Scheme == "" {
            r.URL.Scheme = "https"
        }
        log.Println(r.Host)

        // And proxy
        resp, err := client.Do(r)
        if err != nil {
            log.Fatal(err)

        }
        for n, v := range resp.Header {
            log.Printf("%s %s", n, v[0])
        }

        bodyBytes, err := ioutil.ReadAll(resp.Body)
        resp.Body.Close()

        copyHeaders(w.Header(), resp.Header)

        w.Write(bodyBytes)

        log.Print("----------")

    }
} 
```

上面的代码适用于普通网址（http），我应该怎么做才能获得 https 网址？

**编辑：** 我更新了代码。

# android - 将应用程序移动到系统应用程序时找不到Android jni lib

> ID：16144893
> 
> 赞同：3
> 
> 时间：2013-04-22T10:31:21.323
> 
> 标签：android, java-native-interface, shared-libraries, system

我一直无法解决我的问题，我环顾四周，找不到好的解决方案。

问题是我有一个必须是系统应用程序的 Android 应用程序。我有自己的设备，所以我可以将它们安装在系统应用程序上。

我正在使用系统应用程序上的预安装应用程序来执行此操作。此应用程序将 .apk 文件从资产中保存`data/data`并移动到`system/app/`文件夹。

一切顺利，除了当我启动它时，它得到一个异常`java.lang.ExceptionInInitializerError`，这意味着找不到 jni lib。可能是因为它没有安装在`/system/lib`目录中。

有谁知道我该如何解决这个问题？

我知道一种解决方案是在系统中查找 jni lib 并将其移动到，`system/lib`但我想避免这种情况。

谢谢你。

# powershell - 在powershell中保存编辑的文件

> ID：16144894
> 
> 赞同：1
> 
> 时间：2013-04-22T10:31:21.913
> 
> 标签：powershell

到目前为止，我正在尝试将所有 .aspx / aspx.cs 文件中的 CodeFile 替换为 CodeBehind

```
$FileLocation = "F:\Code\trunk\Source\"

$FindAllItems = Get-ChildItem $FileLocation -Rec -Inc *.aspx,*.aspx.cs 

foreach ($file in $FindAllItems)
{

  foreach($line in @(Get-Content $file))
   {       
     if ($line -match  "CodeFile")
     {  
        Write-Host $line
        Write-Host "Renaming CodeFile to CodeBehind"
        $replacedLine = $line.Replace("CodeFile", "CodeBehind")
        Write-Host "edited line:" $replacedLine
        Write-Host "Saving change, naming" $file.fullname
     }         

   }    
}
Write-Host "Done" 
```

在这种情况下如何使用 .save 参数或者提交编辑的最佳方式是什么？

更新：

在被告知 Set-Content 后，我​​重新编写了脚本，下面是工作代码。

```
$FileLocation = "F:\Code\trunk\Source\"

$FindAllItems = Get-ChildItem $FileLocation -Rec -Inc *ascx,*ascx.cs

foreach ($file in $FindAllItems)
{

(Get-Content $file) | 
Foreach-Object {$_ -replace "CodeFile", "CodeBehind"} | 
Set-Content $file

}
Write-Host "Done" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:40:16.210

[1](https://stackoverflow.com/questions/15662799/powershell-function-to-replace-or-add-lines-in-text-files) & [2](https://stackoverflow.com/questions/1875617/insert-content-into-text-file-in-powershell)的可能重复项。您可以使用[Set-Content](http://technet.microsoft.com/en-us/library/ee176959.aspx) Cmdlet 提交更改。[请参阅此处](http://blogs.technet.com/b/heyscriptingguy/archive/2008/01/17/how-can-i-use-windows-powershell-to-replace-characters-in-a-text-file.aspx)的示例和说明。

# java - 休眠，更新表单 bean 给出错误？

> ID：16144896
> 
> 赞同：0
> 
> 时间：2013-04-22T10:31:24.900
> 
> 标签：java, spring, hibernate, lamp

在我的 Java 应用程序中，我有一个表用户，并且这个表有`only one value`（这在数据库中只有一个值很重要）。

现在我只是使用 UserVO bean 更新用户表..

这只是一个简单的更新逻辑

```
 public void updateUserVO(UserVO uservo)throws DataAccessException {
    -------//set values
    entityManager.merge(uservo);
    entityManager.flush();
} 
```

但我得到

```
 SEVERE: Servlet.service() for servlet [spring] in context with path [/EClass] threw exception [Request processing failed; nested exception is javax.persistence.PersistenceException: org.hibernate.HibernateException: More than one row with the given identifier was found: U1, for class: com.sits.ec.valueObjects.UserVO] with root cause
org.hibernate.HibernateException: More than one row with the given identifier was found: U1, for class: com.sits.ec.valueObjects.UserVO
    at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:108)
    at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:76)
    at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3294)
    at org.hibernate.event.def.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:496)
    at org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:477)
    at org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:227)
    at org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:285)
    at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:152)
    at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:1090)
    at org.hibernate.impl.SessionImpl.internalLoad(SessionImpl.java:1038)
    at org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:630)
    at org.hibernate.type.EntityType.resolve(EntityType.java:438)
--------- 
```

有趣的是......相同的代码运行另一个系统，并且在数据库中也只有一列......

而且我有近 10 次更新操作，它们使用相同的用户对象 ( `id=U1`) 一小时前该代码运行良好，但现在至少有一个无法运行.. 每个更新的操作都会给出上述错误。

```
Specifications:  OS - Ubuntu(Linux) 
```

`Database - MySql (Lamp Sever)`. 请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T19:15:28.263

堆栈跟踪的重要部分是

在 org.hibernate.event.def.DefaultLoadEventListener.onLoad（DefaultLoadEventListener.java:152）

当你调用合并（我猜是一个分离的实体）时，它会尝试通过它的主键加载实体。这失败了，因为返回了多个对象。查看您的数据库，您的这一列有不止一行具有相同值。所以这张表确实只有一行，或者还有更多，但你只映射这一行？你在更新主键吗？我可以想象 orm-frameworks 对此有问题，如果是这样，请为您要更新的值引入另一列。你正在更新什么样的财产。

# struts2 - 使用struts 2标签遍历jsp中的两个数组

> ID：16144897
> 
> 赞同：-1
> 
> 时间：2013-04-22T10:31:29.430
> 
> 标签：struts2

任何人都可以帮助我。我的意图是遍历两个二维数组

1.  `Org_Positions_IdTitle`其中包含 a) 提升职位的 ID 和 b) 他们的头衔。
2.  `Org_Apps`其中包含 a) 学生 ID 和 b) 升职的 ID。

因此，我希望每当检查两个数组中的位置 ID 等于显示该位置的标题时。非常感谢你们的帮助。

```
 ResultSet ResSet_Org_Positions_IdTitle = OrgInfo.Get_Organisation_Positions_IdTitle(username,password);   
            ResultSet ResSet_Org_Apps = OrgInfo.Get_Organisation_Apps(username,password);

        int i=0;
        while(ResSet_Org_Positions_IdTitle.next()){ 
            Org_Positions_IdTitle[i][0] = new String(String.valueOf(ResSet_Org_Positions_IdTitle.getInt("P_Ps_Id")));
            Org_Positions_IdTitle[i][1]= new String(ResSet_Org_Positions_IdTitle.getString("Title")); i++;
            Org_Positions_IdTitle[i][0]= new String("Last");
            //System.out.println(i+":"+Org_Positions_IdTitle[i-1][j-1]+Org_Positions_IdTitle[i-1][j]);
        }

        int m=0; //Org_Apps A_St_Id A_Ps_Id
        while(ResSet_Org_Apps.next()){ 
            Org_Apps[m][0] = new String(String.valueOf(ResSet_Org_Apps.getInt("A_St_Id"))); 
            Org_Apps[m][1]= new String(ResSet_Org_Apps.getString("A_Ps_Id")); m++;
            Org_Apps[m][0]= new String("Last");
            //System.out.println(i+":"+Org_Positions_IdTitle[i-1][j-1]+Org_Positions_IdTitle[i-1][j]);
        }

        session.put("Org_Positions_IdTitle", getOrg_Positions_IdTitle());
        session.put("Org_Apps", getOrg_Apps());

        <s:iterator value="Org_Positions_IdTitle" id="P_Ps_Id" >
            <s:iterator value="Org_Apps" id="A_Ps_Id" >
                <s:if test="%{#P_Ps_Id==#A_Ps_Id} ">
                    <s:property value="Title" />        
                </s:if>
            </s:iterator>
        </s:iterator> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:22:16.673

所以它应该看起来像这样：

```
<s:iterator value="firstArray" var="arr1">
  <s:iterator value="secondArray" var="arr2">
    <s:if test="#arr1[0] == #arr2[1]">
      <s:property value="#arr1[1]" />        
    </s:if>
  </s:iterator>
</s:iterator> 
```

不要忘记您需要在动作类中为您的数组设置设置器/获取器。

Struts2 标签中的BTW`id`属性很久以前就被弃用了，请`var`改用。

还可以考虑更改代码以使用地图而不是数组。那么就不需要在JSP上迭代了。

# javascript - (CKEDITOR) Internet Explorer 删除调整大小处理程序

> ID：16144899
> 
> 赞同：9
> 
> 时间：2013-04-22T10:31:37.673
> 
> 标签：javascript, internet-explorer, resize, ckeditor

我的问题是，在 Internet Explorer 上，编辑器中的每个 div 都会显示一个调整大小框。Mozilla Firefox 没有显示这个框。如何删除此调整大小框/调整大小处理程序并将元素直接集中在键入或选择它上？

实际上我需要这个：[http](http://docs.ckeditor.com/#!/api/CKEDITOR.config-cfg-disableObjectResizing) ://docs.ckeditor.com/#!/api/CKEDITOR.config-cfg-disableObjectResizing但它还需要删除奇怪的框。如果它没有被删除，我需要单击两次并且 Ckeditor 右键单击​​菜单失败......

![调整盒子大小？](https://i.stack.imgur.com/qMMpp.jpg)

### 部分解决方案

此网址提供了部分答案 [http://chris.photobooks.com/tests/rte/IE_resizing/IE_resizing.html](http://chris.photobooks.com/tests/rte/IE_resizing/IE_resizing.html)

这不是来自 CKEDITOR 的东西，而是来自 html5/javascript/ie 这是一个临时修复，可以让右键菜单再次正常工作。

```
 $("iframe")[0].contentDocument.attachEvent( 'oncontrolselect', function( event )
    {
            event.srcElement.focus();
            return false;
    }); 
```

测试/重现错误/问题：

```
<script src="http://ckeditor.com/apps/ckeditor/4.0.1/ckeditor.js"></script> 
<div id="testEditor">test text<div style="min-height:200px;"> test div</div></div> 
<script>CKEDITOR.replace("testEditor");</script> 
```

注意：您需要单击 div 元素才能看到该框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-18T10:14:45.073

当可编辑元素包含在不可编辑元素中时，IE 不显示框：

```
<div contenteditable="false">
    <div contenteditable="true">
       . . .
    </div>
</div> 
```

ckeditor 内容在 HTML 文档中进行编辑。contenteditable 标志由 ckeditor 在该文档的主体标签上设置。似乎不可能将 contenteditable=false 属性设置为其父级 HTML 标记。

我的（jQuery）解决方法是将 iframe 正文 contenteditable 属性设置为 false，并将正文内容包装在具有 contenteditable=true 的 div 中。您必须在每次模式更改时都这样做，但模式事件也会在 instanceReady 上引发：

```
editor.on('mode', function (evt) {
   //-- in system mode return, editor has no document here
   if (!evt.editor.document) return false;

   //-- get the body of the document in the cdeditor iframe
   var $editorDocumentBody = $(evt.editor.document.getBody().$);

   //-- if ie hasLayout property, wrapper needed to avoid resize borders
   var documentStyle = $editorDocumentBody[0].currentStyle;
   if (typeof documentStyle.hasLayout != 'undefined' && documentStyle.hasLayout){

      //-- check if wrapper div already exists
      var $insertedElement = $editorDocumentBody.find('div[contenteditable="true"]');

      //-- if not, create wrapper, append body content to it, append to body
      if (!$insertedElement.length) {
         $insertedElement = $('<div/>', {
            contenteditable: 'true'
         }).append($editorDocumentBody.contents()).appendTo($editorDocumentBody);
      };

      //-- set the contenteditable attributes
      $editorDocumentBody.attr('contenteditable', 'false');
      $insertedElement.attr('contenteditable', 'true');
   };
} 
```

您可能需要允许具有 contenteditable 属性的元素。您可以编辑 config.js 并添加如下内容：

```
config.allowedContent = 
   'span p a img hr h6 h5 h4 h3 h2 h1 th td tr div;*[contenteditable]'; 
```

请注意，此解决方法在用户内容周围包裹了一个 div，这可能不是可取的。您可以在 HTML 模式下看到具有 contenteditable 属性的 div。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-03T08:33:17.403

看起来 IE 会自动在具有定义尺寸的可编辑元素上添加调整大小手柄。如果你摆脱了最小高度，把手就会消失。

```
<div contenteditable="true">
    <!-- IE9 displays resize handles around this div because
         its height is defined. -->
    <div style="height: 100px">test</div>
</div>

<div contenteditable="true">
    <!-- No resize handles here because size is auto. -->
    <div>test</div>
</div>

<div>
    <!-- Obviously no handles here either because content is
         not editable. -->
    <div style="height: 100px">test</div>
</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-12-04T09:14:45.563

就我而言，我在[Summernote](https://summernote.org)所见即所得编辑器中删除 IE11 中的调整大小处理程序时遇到了问题。我还回顾了**Stackoverflow**上的许多主题。原因是我在段落 p 的样式中有属性**width: 705px**。当我删除此属性时，该死的调整大小处理程序消失了！

# excel - 您尝试打开的文件的格式与 Asp.Net 中文件扩展名指定的格式不同

> ID：16144900
> 
> 赞同：18
> 
> 时间：2013-04-22T10:31:37.670
> 
> 标签：excel, c#-4.0, asp.net-mvc-4, export-to-excel

尝试在 excel 中打开文件时，您尝试打开的文件的格式与文件扩展名 c# 错误指定的格式不同。

这是我的代码

```
public ActionResult Export(string filterBy)
{
    MemoryStream output = new MemoryStream();
    StreamWriter writer = new StreamWriter(output, Encoding.UTF8);

    var data = City.GetAll().Select(o => new
    {
        CountryName = o.CountryName,
        StateName = o.StateName,
        o.City.Name,
        Title = o.City.STDCode
    }).ToList();
    var grid = new GridView { DataSource = data };
    grid.DataBind();
    var htw = new HtmlTextWriter(writer);

    grid.RenderControl(htw);

    writer.Flush();
    output.Position = 0;

    return File(output, "application/vnd.ms-excel", "test.xls");

} 
```

当我试图打开 excel 我得到这个错误

> 您尝试打开的文件与文件扩展名指定的格式不同

![在此处输入图像描述](https://i.stack.imgur.com/DKmXl.png)

单击是后，文件正确打开。但我不希望这个味精出现。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-29T05:35:42.287

我已经使用[CloseXML](http://closedxml.codeplex.com/)来解决这个问题。

```
public static void ExportToExcel(IEnumerable<dynamic> data, string sheetName)
{
    XLWorkbook wb = new XLWorkbook();
    var ws = wb.Worksheets.Add(sheetName);
    ws.Cell(2, 1).InsertTable(data);
    HttpContext.Current.Response.Clear();
    HttpContext.Current.Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
    HttpContext.Current.Response.AddHeader("content-disposition", String.Format(@"attachment;filename={0}.xlsx",sheetName.Replace(" ","_")));

    using (MemoryStream memoryStream = new MemoryStream())
    {
        wb.SaveAs(memoryStream);
        memoryStream.WriteTo(HttpContext.Current.Response.OutputStream);
        memoryStream.Close();
    }

    HttpContext.Current.Response.End();
} 
```

[使用Nuget Package Manager](https://www.nuget.org/packages/ClosedXML/)在我的项目中安装了 ClosedXML 。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T12:27:50.450

> 您尝试打开的文件与文件扩展名指定的格式不同

您不断收到该警告消息，因为创建的文件不是实际的 excel 文件。如果您查看生成的文件，它只是一堆 html 标签。记住 a`GridView`的 RenderControl 会生成一个 html 表格。

要解决您的问题，您需要使用第三方工具来创建一个真正的 excel 文件（您可能想要使用的一个工具是[NPOI](http://npoi.codeplex.com/)）或创建一个逗号分隔的文件，或者只是一个 csv 文件，然后返回该文件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-18T17:34:11.333

以防其他人偶然发现...我需要在 C# 中即时将 blob 转换回文件。Pdf 运行良好，excel 给了我与 OP 解释的相同的错误。

这是我编写的代码，它处理 excel 与其他文件类型的方式不同。

给 excel application/octet-stream 提供一个实际的文件名解决了我的问题。可能不是最干净的方法，但对于我的目的来说已经足够了。

```
string theExt = Path.GetExtension(theDoc.documentFileName).ToUpper();

Response.Clear();

if (theExt == ".XLS" || theExt == ".XLSX"){
    Response.ContentType = "application/octet-stream";
    Response.AddHeader("Content-Disposition", string.Format("inline; filename={0}", theDoc.documentFileName));
    }
else{
    Response.ContentType = theDoc.documentMimeType;
    Response.AddHeader("Content-Disposition", string.Format("inline; filename={0}", theDoc.documentTitle));
}

using (MemoryStream stream = new MemoryStream(theDoc.file))
{
    stream.WriteTo(Response.OutputStream);
    stream.Close();
};

Response.End(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-18T18:11:19.310

[如果有人需要使用CloseXML](http://closedxml.codeplex.com/)将数据集导出为 excel 文件。

```
Dataset ds = { your data from db }
var xlsx = new XLWorkbook();
var dataTable = ds.Tables[0];

xlsx.Worksheets.Add(dataTable);

xlsx.SaveAs("export.xlsx"); 
```

# mysql - 根据一次操作的结果进行 SQL 排序

> ID：16144901
> 
> 赞同：1
> 
> 时间：2013-04-22T10:31:42.120
> 
> 标签：mysql, sql, operation

我需要通过 (LIKES (puntuacion=1) - DISLIKE (puntuacion=0) 的结果来排序此查询的结果。

这是我按喜欢的总和（puntuacion = 1）排序的旧查询。

```
"SELECT entradas.* , SUM(puntuacion) AS total_likes
            FROM entradas
            LEFT JOIN valoraciones ON valoraciones.entradas_id = entradas.id
            and valoraciones.puntuacion=1
            WHERE fecha>=:fecha1 AND aceptada=1
            GROUP BY entradas.id
            ORDER BY  `total_likes` DESC
            limit 5"; 
```

试过这个，但 total_likes / total_dislikes 是时间变量，不能对它们进行操作。

```
 SELECT entradas.* , SUM(puntuacion=1) AS total_likes, SUM(puntuacion=0) AS total_dislikes, total_likes-total_dislikes AS TOTAL
            FROM entradas
            LEFT JOIN valoraciones ON valoraciones.entradas_id = entradas.id
            WHERE aceptada=1
            GROUP BY entradas.id
            ORDER BY  `total_likes` DESC
            limit 5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:40:54.603

```
SELECT entradas.* , (SUM(v1.puntuacion) - SUM(v0.puntuacion)) AS total_likes
FROM entradas
LEFT JOIN valoraciones v1 ON v1.entradas_id = entradas.id and v1.puntuacion=1
LEFT JOIN valoraciones v0 ON v0.entradas_id = entradas.id and v0.puntuacion=0
WHERE fecha >= :fecha1 AND aceptada=1
GROUP BY entradas.id
ORDER BY  `total_likes` DESC
limit 5 
```

[编辑]

对不起，伙计，上面的查询不太好。我认为您正在寻找的正确答案是以下这个：

```
SELECT entradas.* , SUM(IF(v.puntuacion = 1, 1, -1)) AS total_likes
FROM entradas
LEFT JOIN valoraciones v ON v.entradas_id = entradas.id
WHERE fecha >= :fecha1 AND aceptada=1
GROUP BY entradas.id
ORDER BY  `total_likes` DESC
LIMIT 5 
```

# android - 如何在android中的位图中平移和旋转？

> ID：16144902
> 
> 赞同：1
> 
> 时间：2013-04-22T10:31:44.000
> 
> 标签：android, matrix, bitmap

我正在尝试在 android 中翻译和旋转位图`ImageView`。但我无法得到结果。任何指针都会有所帮助。

```
 int width = mb.getWidth();
    int height = mb.getHeight();

    // create a matrix for the manipulation
    Matrix matrix = new Matrix();
    matrix.preTranslate(width/2, height/2)
    matrix.postRotate(angle);
    Bitmap resizedBitmap = Bitmap.createBitmap(mb, 0, 0,
                      width, height, matrix, true);
    imageview.setImageBitmap(resizedBitmap); 
```

# php - mysql_query 不返回数据

> ID：16144903
> 
> 赞同：2
> 
> 时间：2013-04-22T10:31:45.053
> 
> 标签：php, mysql

该表`Users`包含数据，但仍显示`Records Not Found`

```
<?php

$conn = mysql_connect("localhost", "root", "pass", "Assign1");
$records = mysql_query($conn, "select * from Users");

if(!$records)
{
    echo "No Records Found";
    exit();
}

while($row = mysql_fetch_array($records))
{
    echo $row['name'] . " " . $row['pwd'];
    echo "<br />";
}

mysql_close($conn);

?> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T10:33:31.660

您有要`mysql_query`反转的参数。它应该是：

```
$records = mysql_query("select * from Users", $conn); 
```

你的另一个问题是`if`声明。您正在检查`if`查询，而不是结果集。

另外，我敢肯定您可能知道，但是`mysql`库已被弃用并且正在被删除。你真的应该学会使用`mysqli`函数，因为它们将来对你有用得多。

[链接到 MySQLi 文档](http://www.php.net/manual/en/book.mysqli.php)- 这真的不比`mysql`库难。

要在正确的库中重新实现：

```
<?php

$mysqli = new mysqli("localhost", "user", "pass", "database");
$query = $mysqli->query("SELECT * FROM users");
$results = $query->fetch_assoc();

if($results) {
    foreach($results as $row) {
        echo $row['name'] . " " . $row['pwd'] . "<br/>";
    }
} else {
    echo "No results found.";
}

?> 
```

希望我不只是为你完成了你的全部任务，但让另一个人正确使用 mysqli 可能是值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:35:51.623

`mysql_query`你对函数的使用有误

像这样使用它：

```
 <?php
$conn = mysql_connect("localhost", "root", "pass","Assign1");
$result = mysql_query("select * from Users", $conn);
if(!$records)
{
echo "No Records Found";
exit();
}
while($row = mysql_fetch_array($result))
{
  echo $row['name'] . " " . $row['pwd'];
  echo "<br />";
}
mysql_close($conn);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:48:57.367

干得好

```
 <?php

 $conn = mysql_connect("localhost", "root", "pass", "Assign1");
 mysql_select_db(' ----your-database-here---', $conn ) ;
 $records = mysql_query($conn, "select * from Users");

 if(mysql_num_rows($records) > 0 )
 {
 while($row = mysql_fetch_array($records))
 {
echo $row['name'] . " " . $row['pwd'];
echo "<br />";
}   

 }else
{
echo "No Records Found";
exit();
}

mysql_close($conn);

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T10:53:44.340

让我们先解决这个问题。**它实际显示的错误是没有**选择数据库，您必须选择需要代码的数据库

> mysql_select_db("赋值1",$conn);

希望这段代码能完美解决您的问题。试一试............

```
 <?php
$conn = mysql_connect("localhost", "root", "pass");
mysql_select_db("Assign1",$conn);
$result = mysql_query("select * from users", $conn);
if(!$result)
{
    echo "No Records Found";
    exit();
}
while($row = mysql_fetch_array($result))
{
  echo $row[0]['name'];
  echo "<br />";
}
mysql_close($conn);
?> 
```

# javascript - 使用 Google Feeds API 阅读 Twitter RSS

> ID：16144904
> 
> 赞同：0
> 
> 时间：2013-04-22T10:31:45.520
> 
> 标签：javascript, twitter, google-feed-api

我写了这段代码：

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript">
                        google.load("feeds", "1");
            function initialize() {

            var feed = new google.feeds.Feed("http://search.twitter.com/search.rss?q=HMTL5");
            feed.setNumEntries(100);
            feed.includeHistoricalEntries();
            //feed.setResultFormat(google.feeds.Feed.XML_FORMAT);
            feed.load(function(result) {
            if (!result.error) {
            for (var i = 0; i < result.feed.entries.length; i++) {
            var entry = result.feed.entries[i];

            alert(entry.title);
            alert(entry.author);
            alert(entry.WHAT_SHOULD_I_TYPE_HERE);

} 
```

我能得到标题和作者，但不能得到图像。我需要从标签中提取用户图像 URL 但不知道如何。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T08:55:08.837

你得到你的问题的答案了吗？为什么不在 'var entry =' 下添加以下行并发布结果：

```
var entry = result.feed.entries[i];

console.log(entry); 
```

或发布 URL TAG 输出

# javascript - 是否可以使用 HTML5 本地存储在不同站点的页面之间共享数据？

> ID：16144906
> 
> 赞同：9
> 
> 时间：2013-04-22T10:31:47.013
> 
> 标签：javascript, html, local-storage, same-origin-policy

我想在用户端创建数据并让来自另一个 URL 的 javascript 也访问它。我知道相同的来源政策，但我想知道是否可以创建一些例外。或者，我可以使用任何技巧/功能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-22T11:48:54.447

我知道的最好的技巧是使用 iframe 和`postMessage`API 确实可以从外部域访问 localStorage。

这种技术非常简单：

*   在您的页面上，您必须为要从中获取数据的域创建 iframe
*   您的数据域需要监听`message`事件：

    document.addEventListener("消息", handler, useCapture);

*   处理程序将负责访问`localStorage`其内容并将其发布到源域

*   您的源域可以使用API [https://developer.mozilla.org/en-US/docs/DOM/window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)`handler`调用数据域上的函数`postMessage`

为了数据的安全，您可以使用 HTTP 标头**X-Frame-Options ALLOW-FROM uri** [https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options?redirectlocale=en-US&redirectslug=The_X -FRAME-OPTIONS_response_header](https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options?redirectlocale=en-US&redirectslug=The_X-FRAME-OPTIONS_response_header)

希望它会有所帮助。

# php - 未显示 JSON 输出

> ID：16144908
> 
> 赞同：4
> 
> 时间：2013-04-22T10:31:55.963
> 
> 标签：php, javascript, html, json

我有一个 PHP 文件，它以 JSON 格式提供输出。代码如下 -

```
<?php
    include 'configure.php';
    $qr = "SELECT * FROM student_details";
    $res= mysql_query($qr);
    $i=0;
    while($row = mysql_fetch_array($res))
         {
         $stud_arr[$i]["full_name"] = $row["full_name"];
         $stud_arr[$i]["reg_no"] = $row["regno"];
         $stud_arr[$i]["address"] = $row["address"];
         $stud_arr[$i]["mark1"] = $row["mark1"];
         $stud_arr[$i]["mark2"]= $row["mark2"];
         $stud_arr[$i]["mark3"] = $row["mark3"];
    $i++;
     }
    header('Content-type: application/json'); 
    echo json_encode($stud_arr);
    ?> 
```

这个文件在我的服务器上运行时，给了我完美的结果，即所有学生的详细信息和他们的分数在这里 -

```
[{"full_name":"Lohith","reg_no":"100","address":"street, lane","mark1":"90","mark2":"87","mark3":"88"},{"full_name":"Ranjeet","reg_no":"101","address":"dfkljg","mark1":"56","mark2":"45","mark3":"39"},{"full_name":"karthik","reg_no":"102","address":"askjldf","mark1":"85","mark2":"90","mark3":"100"}] 
```

现在我正在尝试在 HTML 文件中使用 -

```
function getAllDetails()
{
var myTable = '' ;
myTable += '<table id="myTable" cellspacing=0 cellpadding=2 border=1>' ;
  myTable +=   "<tr><td><b>No</b></td><td><b>Full Name</b></td><td><b>Mark1</b></td><td><b>Mark2</b></td><td><b>Mark3</b></td></tr>";var url = "json-example2.php";
  $.getJSON(url, function(json) { $.each(json, function(v) {    
                myTable +=   "<tr><td>"+v.reg_no+"</td><td>"+v.full_name+"</td><td>"+v.mark1+
                "</td><td>"+v.mark2+
                "</td><td>"+v.mark3+
                "</td></tr>";   });

                $("#stud_tbl").html(myTable);});}; 
```

上面的代码显示了一个表格，但在表格的每个数据单元格中都显示“未定义”。

```
 No  Full Name     Mark1           Mark2           Mark3
undefined   undefined   undefined   undefined   undefined
undefined   undefined   undefined   undefined   undefined
undefined   undefined   undefined   undefined   undefined 
```

请帮助如何调试它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T10:36:21.910

[jQuery.each()](http://api.jquery.com/jQuery.each/)的第一个参数是值的索引，第二个参数是值。

解决方案更改`$.each(json, function(v) {`为`$.each(json, function(i v) {`

```
function getAllDetails() {
  var myTable = '';
    myTable += '<table id="myTable" cellspacing=0 cellpadding=2 border=1>';
    myTable += "<tr><td><b>No</b></td><td><b>Full Name</b></td><td><b>Mark1</b></td><td><b>Mark2</b></td><td><b>Mark3</b></td></tr>";
    var url = "data.json";
    $.getJSON(url, function(json) {
                $.each(json, function(i, v) {
                            myTable += "<tr><td>" + v.reg_no + "</td><td>"
                                    + v.full_name + "</td><td>" + v.mark1
                                    + "</td><td>" + v.mark2 + "</td><td>"
                                    + v.mark3 + "</td></tr>";
                        });

                $("#stud_tbl").html(myTable);
            });
}; 
```

演示：[Plunker](http://plnkr.co/edit/zvhZMgbnEXSRUtASNIEe?p=preview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:38:04.380

`$.each` 有两个参数一个是`index`另一个是`value`

```
 $.each(json, function(index, value) {
                        myTable += "<tr><td>" + value.reg_no + "</td><td>"
                                + value.full_name + "</td><td>" + value.mark1
                                + "</td><td>" + value.mark2 + "</td><td>"
                                + value.mark3 + "</td></tr>";
                    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:47:25.850

尝试以下。这是[http://jsfiddle.net/H3cjC/3/的演示](http://jsfiddle.net/H3cjC/3/)

html是

```
<div class="tbl">
</div>

var data='[{"full_name":"Lohith","reg_no":"100","address":"street, lane","mark1":"90","mark2":"87","mark3":"88"},{"full_name":"Ranjeet","reg_no":"101","address":"dfkljg","mark1":"56","mark2":"45","mark3":"39"},{"full_name":"karthik","reg_no":"102","address":"askjldf","mark1":"85","mark2":"90","mark3":"100"}]'
data=$.parseJSON(data);
var myTable = '' ;
myTable += '<table id="myTable" cellspacing=0 cellpadding=2 border=1>' ;
  myTable +=   "<tr><td><b>No</b></td><td><b>Full Name</b></td><td><b>Mark1</b></td><td><b>Mark2</b></td><td><b>Mark3</b></td></tr>";var url = "json-example2.php";
 $.each(data, function(i,v) {    
   myTable +=   "<tr><td>"+data[i].reg_no+"</td><td>"+data[i].full_name+"</td>   <td>"+v.mark1+
                "</td><td>"+data[i].mark2+
                "</td><td>"+data[i].mark3+
                "</td></tr>";   
 });
$('.tbl').html(myTable); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T10:54:16.487

您必须使用每个函数的第二个参数。

```
function getAllDetails()
    {
    var myTable = '' ;
    myTable += '<table id="myTable" cellspacing=0 cellpadding=2 border=1>' ;
    myTable +=   "<tr><td><b>No</b></td><td><b>Full Name</b></td><td><b>Mark1</b></td><td><b>Mark2</b></td><td><b>Mark3</b></td></tr>";
    var url = "SCRIPTNAME.php";
    $.getJSON(url, function(json) { $.each(json, function(v, x) {
        console.log("REG NR = "+x.reg_no);
        myTable +=   "<tr><td>"+x.reg_no+"</td><td>"+x.full_name+"</td><td>"+x.mark1+
            "</td><td>"+x.mark2+
            "</td><td>"+x.mark3+
            "</td></tr>";   });

        $("#stud_tbl").html(myTable);
    });
    } 
```

# android - Ruby on Rails + Android 距离计算器

> ID：16144912
> 
> 赞同：0
> 
> 时间：2013-04-22T10:32:07.057
> 
> 标签：android, ruby-on-rails, ruby

我创建了一个 Ruby on Rails 项目，它与我创建的 Android 应用程序交互。这是一个 Geocaching 应用程序（用于学校项目）。我有一个表，其中记录了、、、和`Item`的字段。我能够使 android 应用程序使用这些详细信息创建一个新记录。`name``user_id``found``longitude``latitude`

我正在添加计算客户端（Android 手机）与列表中的一项之间的距离的功能。这个功能应该在客户端还是服务器端完成？如果是服务器端，那将如何完成？

# python - 通过python远程单击按钮

> ID：16144922
> 
> 赞同：1
> 
> 时间：2013-04-22T10:32:24.530
> 
> 标签：python, http, buttonclick

我尝试通过`telit`调制解调器单击一个按钮，这些是我通过调制解调器作为 http 请求发送的命令，如果单击该按钮，文本中的文本`Textbox`将存入数据库。

```
POST / HTTP/1.1

Host: www.apcogsys.com
Connection: keep-alive
Content-Length: 253
Cache-Control: max-age=0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Origin: http://www.apcogsys.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.64 Safari/537.31
Content-Type: application/x-www-form-urlencoded
Referer: http://www.apcogsys.com/
Accept-Encoding: gzip,deflate,sdch
__VIEWSTATE=%2FwEPDwULLTE0MDM4MzYxMjNkZMHxueuplKms5LprRiXrYhjNw1RQHyrxnbqdvUd7WuME&__EVENTVALIDATION=%2FwEdAAOXYiZ8Tx8yD9ysXMQzXW6cESCFkFW%2FRuhzY1oLb%2FNUVM34O%2FGfAV4V4n0wgFZHr3cvuT1CKH816XKYM4BbXnMYv8RXVACd0FKbHPtTjQthHg%3D%3D&TextBox1=abcde&Button1=click 
```

`Button1=click`表示该按钮已被单击。我已从 http 调试器复制了这组命令。但这不起作用，并且文本框中的文本未存入数据库。所要做的就是将其中的`TextBox1=abcde`一部分`viewstate`存入数据库。

# android - Android ImageView 根据标签设置图片

> ID：16144923
> 
> 赞同：1
> 
> 时间：2013-04-22T10:32:27.607
> 
> 标签：android, android-imageview, android-resources

我想知道 Android 中是否有任何方法`ImageView`可以通过使用`tag`.

理想情况下应该是这样的：

```
// image_view_style.xml
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:tag="1"
        android:drawable="@drawable/image_for_tag_1"/>
  <item android:tag="2"
        android:drawable="@drawable/image_for_tag_2"/>
  <item android:tag="3"
        android:drawable="@drawable/image_for_tag_3"/>
</selector> 
```

只需使用我想要的值调用`ImageView`'方法。`setTag()`

我试过这个，但它不起作用。是否有任何干净的方法可以在资源文件中进行图像选择（对于 , 等以外的其他内容`state_selected`）`state_pressed`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T10:37:33.870

我认为您可以使用它`LevelListDrawable`来实现您想要的：

[https://developer.android.com/reference/android/graphics/drawable/LevelListDrawable.html](https://developer.android.com/reference/android/graphics/drawable/LevelListDrawable.html)

从文档中：

```
<level-list xmlns:android="http://schemas.android.com/apk/res/android">
<item android:maxLevel="0" android:drawable="@drawable/ic_wifi_signal_1" />
<item android:maxLevel="1" android:drawable="@drawable/ic_wifi_signal_2" />
<item android:maxLevel="2" android:drawable="@drawable/ic_wifi_signal_3" />
<item android:maxLevel="3" android:drawable="@drawable/ic_wifi_signal_4" />
</level-list> 
```

然后`setLevel(...)`在代码中使用来设置一个级别。

# java - java.sql.SQLException：用尽的结果集

> ID：16144932
> 
> 赞同：-1
> 
> 时间：2013-04-22T10:32:38.687
> 
> 标签：java, multithreading

我不知道如何解决这个异常。

我将Resultset对象传递给每个线程。并做一些逻辑

我的示例程序是：

```
public class dataimport

{

  public dataimport()

          {

         connect(); /*connect to database 

         }

private void connect()

{

try
   {

       /* connected data base

        str="SELECT * FROM tablename where rownum<=5";

          rs1 = statement.executeQuery(str);

            while (rs1.next()) 
            { 

                    Runnable r = new MyThreadClass(rs1);

                                        System.out.println(new Thread().getName());

                                         new Thread(r).start();

            }               
} 
```

线程类

```
class MyThreadClass implements Runnable

 {

public MyThreadClass(ResultSet rs1) 
   {

     rs2=rs1; 

    }

 public void run() 
   {   

           int i=1;

               try

                   {        

                      while (rs2.next())

                {

                                date=rs2.getString("mydate");

                                System.out.println("mydate="+date);

                                }

        }
     catch (Exception ex)
        {
            ex.printStackTrace();
        }

}

} 
```

如果我在线程类中添加while（rs2.next（）），也不会有例外，但是mydate它会

仅打印两个见解的少数记录。

请任何人都可以帮助我。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:40:19.880

没门。您遇到并发错误。

你得到 N 个结果 -> 启动 N 个线程。在每个线程内，**您再次循环**遍历结果集。这没有什么意义，更糟糕的是，一个线程可能会检查是否`rs.next`为真，进入迭代，被另一个完成结果集数据的线程挂起，并且在恢复时尝试从没有数据的结果集中读取数据。

最简单（不改变机制）的解决方案是将线程主循环置于同步循环中，但这会导致大量死锁，因此您将以与没有线程相同的性能结束。

至于你的代码，我认为你真正想要的是，在主循环中，将所有结果提取到一个数据结构中，并将该数据结构传递给每个线程，以便它可以直接处理它（并且不传递共享结果设置导致此类问题的对象）。

# python-2.7 - 安装 PIP Windows 时遇到问题

> ID：16144934
> 
> 赞同：6
> 
> 时间：2013-04-22T10:32:41.127
> 
> 标签：python-2.7, pip, easy-install

我在这里阅读了帖子，但似乎有些东西不起作用。我是新手`Python dev`。我正在跑步`windows 7 64bit`。

我正在尝试安装`pip`我已经下载并`easy_install`在我的`c:\python27\scripts`目录中的。当我使用`powershell`并输入

```
"python easy_install pip" 
```

我收到错误消息：

> “无法打开文件easy_install”：[Errno 2] 没有这样的文件或目录。

这似乎很奇怪，因为我可以看到该`easy_install.exe`目录中的内容。

我已经添加`c:\python27\scripts`到我的`system PATH`但是，老实说，我不确定这是否正确。

有人可以帮忙吗？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-07T18:42:29.357

选定的答案 dint 修复它

这样做了：**python -m pip install -U pip**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-22T10:37:50.647

解决这个问题的最好方法是`easy_install`自己编译。先下载源代码，然后用python编译。

1-去[这里](https://pypi.python.org/pypi/setuptools)。

![在此处输入图像描述](https://i.stack.imgur.com/KXRYA.png)

2 - 然后使用 7-zip 或任何可以解压缩 tar 文件的软件解压缩文件。这是一个`tar.gz`文件，所以在一次提取后，它会给你`tar`文件，然后它会给你安装工具的实际目录和文件

3 - 进入存储提取内容的目录（使用命令提示符）。例如，如果您将目录存储在桌面上，`cd Desktop`然后您就去

`cd dir_where_easy_install_is`.

4 - 然后运行此命令`python setup.py install`

这将为`easy_install`您安装。

5 - 再次返回命令行，然后输入`easy_install pip`，这将安装 pip。

然后继续，通过安装 django 进行测试，只需进入命令提示符，然后输入这个`pip install django`. 下载和安装后，输入`pip list`，看看 django 是否在里面。如果是，则 pip 已成功安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T00:34:58.577

这可以从它的主目录针对提取的 setuptools 目录中的 easy_install.py 运行 python。

![在此处输入图像描述](https://i.stack.imgur.com/M0fgT.jpg)

然后 pip 文件应该在 Scripts 目录中。

![在此处输入图像描述](https://i.stack.imgur.com/svtId.jpg)

不要忘记以管理员身份运行 CMD。

# php - 使用 PHP 进行 SMTP/HTTP/FTP 状态检查

> ID：16144936
> 
> 赞同：0
> 
> 时间：2013-04-22T10:33:01.080
> 
> 标签：php, ftp, smtp, status

我需要一段代码来检查网站是活着还是关闭。我认为这可以通过 php curl 或 fsockopen 来完成。但我确实想检查其他服务，如 ftp、smtp、https、mysql 等是否启动或关闭。任何人都可以告诉一个方法来实现这个使用 php 。我有一个要持续监控的站点，但只需要一个简单的脚本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:11:00.570

您可以使用套接字。只需尝试打开与您需要的端口的连接。如果您收到错误 - 服务已关闭。

[http://php.net/manual/en/function.socket-connect.php](http://php.net/manual/en/function.socket-connect.php)

# javascript - 使用用户凭据使用 javascript sdk 登录 facebook

> ID：16144941
> 
> 赞同：0
> 
> 时间：2013-04-22T10:33:08.973
> 
> 标签：javascript, facebook

我正在使用带有 facebook 应用程序的 Javascript sdk 为用户创建登录页面。FB.login 提示用户输入 facebook 用户名和密码。我已经保存了所有信息，例如 user_id、Access_token 和所有信息。但是，当用户注销时。我想登录 facebook 而无需再次重新输入用户名和密码。我想使用用户 ID 和访问令牌直接使用 javascript API 登录。

谢谢

```
 function updateButton(response) {
                button       =   document.getElementById('fb-auth');
                userInfo     =   document.getElementById('user-info');

                testbut     =   document.getElementById('test');

                var rr = getResponse("user_profile.xml");

                if(rr != null)
                    {
                response = rr;
                    }
                if (response.authResponse) {alert('me/permissions/?access_token='+     

      response.authResponse.accessToken);
    FB.api('me/permissions/?access_token='+ response.authResponse.accessToken    

          ,function(response)

    {
  for (var name in response) {
               alert(response.data);
           }
        alert(response);

  });

                    //user is connected
                    FB.api('/me', function(info) {

                        login(response, info);

                    });

                    button.onclick = function() {
                        FB.logout(function(response) {
                            logout(response);
                        });
                    };
                } else {
                    //user is not connected

                    button.innerHTML = 'Login';
                    button.onclick = function() {

                        FB.login(function(response) {
                            if (response.authResponse) {
                                FB.api('/me', function(info) {
                                    login(response, info);

                                });
                            } else {
                                //user cancelled login or did not grant authorization
                                showLoader(false);
                            }
                        },  

    {scope:'email,user_birthday,status_update,publish_stream,user_about_me'});
                    }
                }
            }

            // run for the current status and whenerve it is changed
            FB.getLoginStatus(updateButton);
            FB.Event.subscribe('auth.statusChange', updateButton);
        };

        (function() {
            var e = document.createElement('script'); e.async = true;
            e.src = document.location.protocol
                + '//connect.facebook.net/en_US/all.js';
            document.getElementById('fb-root').appendChild(e);
        }());

        function login(response, info){
            if (response.authResponse) {

                ajaxFunction(response);
                var accessToken =   response.authResponse.accessToken;

                userInfo.innerHTML  = '<img src="https://graph.facebook.com/' + info.id  
                                  + "<br /> Your Access Token: " + accessToken;
                button.innerHTML  = 'Logout';
                document.getElementById('other').style.display = "block";

            }
        }

        function logout(response){
            userInfo.innerHTML  =   "";
            document.getElementById('debug').innerHTML = "";
             document.getElementById('other').style.display = "none";

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:34:38.713

您必须将用户访问令牌存储在数据库中以供下次使用。这是使用 javascript sdk 传递访问令牌的一些小提示

```
FB.api('me/permissions/?access_token=Your access token',function(response){console.log(response)}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-03T15:31:55.360

有点晚了，但我猜你正在尝试使用过期或无效的短期访问令牌登录。对于未来的登录，您应该将短期访问令牌转换为长期访问令牌，有效期约为 60 天。转换为长期令牌需要在您的服务器上进行，因为它需要您的应用程序机密。详情在[这里](https://developers.facebook.com/docs/facebook-login/access-tokens#extending)。长期令牌是您应该存储在数据库（或类似数据库）中以供将来使用的内容。

# sql - SQL Server：向存储过程中的有限用户授予非常高的权限

> ID：16144946
> 
> 赞同：0
> 
> 时间：2013-04-22T10:33:27.397
> 
> 标签：sql, sql-server

我们正在为我们的系统构建一个管理应用程序，该应用程序的一项功能是为新用户创建新数据库。这个应用程序需要创建数据库、恢复数据库、创建用户、授予权限等 - 所以用户需要有一些非常强大的权限。

我们将这些服务承包给了一家外部公司，我们不想让他们不受限制地访问我们的系统，我们只希望他们能够做我们允许他们做的事情。因此，我们考虑将整个过程封装在一个存储过程中，将此 EXECUTE 授予特定域用户，并使用 EXECUTE AS 'SA' 运行它。

不幸的是，这是不可能的 - SA 不是数据库用户，当我们尝试将其定义为一个时，我们收到错误

```
Msg 15405, Level 16, State 1, Line 1
Cannot use the special principal 'sa'. 
```

然后我们考虑使用 DBO 并设置跨数据库所有权链接，但这一切都开始令人头疼。有谁知道这样做的优雅方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T10:53:36.200

这完全可以通过[模块签名](http://msdn.microsoft.com/en-us/library/ms345102%28v=sql.105%29.aspx)实现。

*   创建一个执行提升代码的过程。
*   添加`EXECUTE AS CALLER`到程序
*   创建证书和私钥
*   签署程序
*   删除私钥
*   导出证书
*   将证书导入`[master]`
*   创建从证书派生的登录名
*   授予证书派生登录所需的权限

请注意，对程序的*任何*更改都会使签名无效，并且需要重做该程序。删除私钥非常重要，因为否则供应商可以签署*不同*的程序并获得对任意代码的提升权限。有关示例，请参阅[签署激活的过程。](http://rusanu.com/2006/03/01/signing-an-activated-procedure/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T10:52:43.313

要管理数据库中的内容，您可以使用`EXECUTE AS OWNER`并确保 dbo 拥有存储过程。那里没有问题

但是，CREATE DATABASE 等需要服务器级别的权限。注意：您不需要`sysadmin`权限。

使用 SQL Server 2012，您可以使用[服务器角色](http://msdn.microsoft.com/en-gb/library/ms188659.aspx)，并`GRANT CREATE DATABASE`使用此服务器角色。对于早期版本，您可以将其直接授予登录名。或者`dbcreator`，如果您愿意，可以使用。

但是，如果您决定他们需要管理登录，`securityadmin`则具有与`sysadmin`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-22T10:50:23.147

```
create database admin;
GO

alter database admin set trustworthy on
GO

alter authorization on database::admin to [sa]
GO

use admin
GO

create procedure adminProc
with execute as 'dbo'
as
create database test
GO

create login tmp with password = 'tmp', check_policy = off
GO

create user tmp
GO

grant execute on adminProc to tmp
GO

execute as login = 'tmp'
GO

-- This fails
create database test

-- This works
exec adminProc
GO

revert
GO

drop database test
GO 
```

# ssis - 如何修复从 SQL 代理到 SSAS 的连接？

> ID：16144947
> 
> 赞同：0
> 
> 时间：2013-04-22T10:33:28.147
> 
> 标签：ssis, ssas, sql-agent

我有 3 台服务器： Server1 - Prod DB Server Server2 - Prod ETL Server Server3 - Dev Server

我创建了 SSIS 包来每晚处理多维数据集。

所以 Package 位于**Server2**上，它使用 Windows 身份验证（模拟用户）来访问 SSAS db。SQL 代理作业也在**Server2**上创建。

当我在 Job Step 中设置与**Server3**的连接时（还有 SSAS db） - 一切正常。

但是当我设置到**Server1**的连接时- 我在作业步骤中收到错误：**“无法建立连接。确保服务器正在运行。”**

当我手动（从文件系统或 Visual Studio）运行这个包时 - 它运行良好。

我的问题是：为什么使用 SQL 代理作业执行包时连接不起作用，而手动执行包时连接不起作用？

我会很感激这方面的任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:06:35.187

听起来像 Windows 权限 - SQL Server 代理帐户无法访问服务器 1。

# spring - 构建可扩展的 Spring MVC 应用程序

> ID：16144951
> 
> 赞同：4
> 
> 时间：2013-04-22T10:33:39.673
> 
> 标签：spring, rest, model-view-controller, spring-mvc, scalability

我正在尝试使用 Spring MVC 构建一个 Web 应用程序。我将使用它来服务器 GUI 以及 JSON 内容。

有没有人部署过这样的解决方案并且可以保证它有效？在设计、部署这样的解决方案时要记住的任何提示/技巧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T11:38:53.710

根据您需要多少*可扩展性*和*分布*，您可能有两个通用选项：

*   将 REST API 和 UI 层捆绑在一个模块中。在这种方式下，您可以直接使用 Spring MVC 访问业务/数据层并交付服务。
*   在一个模块中提供 REST 点，在另一个模块中提供 UI。在这种方法中，您需要在“控制器”中有一个客户端来访问 REST API 并提供用户界面。

无论如何，我相信[Spring REST Data](http://www.springsource.org/spring-data/rest)是一个很好的项目，特别是如果你需要在你的应用程序中除了 REST API 之外还有 CRUD。

# c - 在 C 中查找 a^2 + b^2 的所有组合

> ID：16144954
> 
> 赞同：5
> 
> 时间：2013-04-22T10:33:50.043
> 
> 标签：c

我试图找到 x 的所有组合，其中 x = a^2 + b^2，x 介于 100 和 999 之间。

到目前为止，我有：

```
#include <stdio.h>
#include <stdlib.h>

#define MAX 31 // given that 31^2 = 961

int main(){
    int i = 0;
    int poss_n[] = {0};

    for (int a=0; a <= MAX; a++){
        for (int b=0; b <= MAX; b++){
            if (a*a + b*b >= 100 && a*a + b*b <= 999){ 
                poss_n[i] = a*a + b*b;
                printf("%i\n", poss_n[i]);
                i++;
            }
        }
    }
} 
```

然而，它只给出部分正确的输出，并且过早地以分段错误 11 结束：

> 100 1380405074 144 169 196 225 256 289 324 361 400 441 484 529 576 625 676 729 784 841 900 961 101 122 145 170 197 226 257 290 325 362 401 442 485 530 577 626 677 730 785 842 901 962 104 125 148 173 200 229 260 293 328 365 404 445 488 533 580 629 680 733 788 845 904 965 109 130 153 178 205 234 265 298 333 370 409 450 493 538 585 634 685 738 793 850 909 970 116 137 160 185 212 241 272 305 340 377 416 457 500 545 592 641 692 745 800 857 916 977 106 125 146 169 194 194 221 250 250 281 314 349 349 386 425 466 554 601 554 601 650 701 650 701 754 809 866 866 866 925 925 986 100 117 100 117 136 136 136 157 136 157 180 180 205 261 292 261 292 292 261 292 292 292 292 292 292 292 292325 360 397 436 477 520 分段错误：11

我应该对我的代码进行哪些修改？

**更新**

除了数组问题，我的代码还有什么问题吗？例如，它仍然打印 100 作为第一个值，它似乎不是 a^2 + b^2 的任何组合，即使 b = 0 也是如此。

**更新 2**

没关系，忘了a = 10，b = 0，这将是100。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T10:35:48.310

尝试：

```
int poss_n[(MAX + 1) * (MAX + 1)] = {0}; 
```

这样您就可以分配足够的内存来存储您的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:37:03.733

您的错误是您没有分配位置来保存结果。

尝试这个：

```
#include <stdio.h>
#include <stdlib.h>

#define MAX 31 // given that 31^2 = 961

int main(){
    int i = 0;
    int poss_n[(MAX + 1) * (MAX + 1)] = {0}; //<<- Give it a size
    int result; //<<- Using this to reduce calculation of the value multiple times.

    for (int a=0; a <= MAX; a++){
        for (int b=0; b <= MAX; b++){
            result = a*a + b*b;
            if (result  >= 100 && result  <= 999){ 
                poss_n[i] = result ;
                printf("%i\n", result);
                i++;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:35:59.703

```
int poss_n[] = {0}; 
```

这将定义包含一个元素的数组，稍后当您尝试访问索引 > 1 的元素时会导致 Segfault

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T10:43:51.453

正如其他人已经说过的那样，您在堆栈上分配的空间太少。堆栈从高地址开始递减。因此，首先您覆盖破坏它的堆栈数据，然后您到达堆栈的末尾并尝试写入未分配给您或根本未分配的内存空间。CPU 产生一个异常，这就是`Segmentation fault`错误发生的原因。

此外，您可以在堆上而不是在堆栈上使用[malloc(3)](http://linux.die.net/man/3/malloc)分配一些内存，当您发现更多结果时，您可以使用 realloc 进行扩展。它使用更多的系统 CPU 资源，但减少了内存过度分配。

在某些 un*ces 上，您还可以使用[alloca(3)](http://linux.die.net/man/3/alloca)函数在堆栈上动态分配内存。它的行为非常相似`some_type array[some_value]`，但`some_value`可以计算运行时而不是编译时间。

您也可以使用[C++ STL 容器](http://www.cplusplus.com/reference/stl/)，例如`vector`and`list`和您可以推送找到的元素。在堆上自动分配内存段。

一些评论： 可以使用加法而不是乘法计数平方。(a+1)^2 - a^2 = 2a + 1。因此将 (a<<1) + 1 添加到从 0 开始的临时变量。类似的可以应用于 b。如果总和超过 999，也可以从内部循环中跳转。您不需要检查剩余值。值 b 可以从 (int)sqrt(100-a*a) 开始（或使用临时变量来跟踪第一个 b 值）以减少内部循环的数量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T10:49:06.320

试试这个，它会工作

```
#include <stdio.h>
#include <stdlib.h>

#define MAX 31 // given that 31^2 = 961

int main(){
    int i = 0;
    int poss_n[301];
int a,b;
    for (a=0; a <= MAX; a++){
        for (b=0; b <= MAX; b++){
            if (a*a + b*b >= 100 && a*a + b*b <= 999){ 
                poss_n[i] = a*a + b*b;
                printf("%i\t i = %d , a = %d , b = %d\n", poss_n[i],i,a,b);
                i++;
            }
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T11:33:20.880

这里有很多答案，但没有一个很准确。

Ff 我们假设只有唯一的输出被打印出来，循环应该是这样的（正如 Roee Gavirel 所说）：

```
for (int a=0; a <= MAX; a++){
    for (int b=a; b <= MAX; b++){ 
```

poss_n 将保存此数量的元素：`(32+(32-1)+(32-2)+..+1)=1/2*32*(32+1)`

所以应该定义为：

```
int elements = MAX+1;
int *poss_n = (int*)malloc ((1/2)*(elements)*(elements+1)); 
```

由于规则 100< 值 <999，它将包含更多元素，但如果没有该规则，它将包含确切数量的元素。

# hadoop - 如何运行 HBase 程序

> ID：16144955
> 
> 赞同：5
> 
> 时间：2013-04-22T10:33:58.550
> 
> 标签：hadoop, hbase

如何从命令行运行下面的代码？

```
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.hbase.*;
import org.apache.hadoop.hbase.client.*;
import org.apache.hadoop.hbase.util.*;

public class MyHBase {
    public static void main(String[] args) throws Exception {
        Configuration conf = HBaseConfiguration.create();
        HBaseAdmin admin = new HBaseAdmin(conf);
        try {
            HTable table = new HTable(conf, "test-table");
            Put put = new Put(Bytes.toBytes("test-key"));
            put.add(Bytes.toBytes("cf"), Bytes.toBytes("q"), Bytes.toBytes("value"));
            table.put(put);
        } finally {
            admin.close();
        }
    }
} 
```

如何设置我的 hbase 类路径？我的类路径中有一个巨大的字符串。

更新

```
root# vi MyHBase.java 
hbase-0.92.2 root# java -classpath `hbase classpath`:./ /var/root/MyHBase
-sh: hbase: command not found
Exception in thread "main" java.lang.NoClassDefFoundError: /var/root/MyHBase
Caused by: java.lang.ClassNotFoundException: .var.root.MyHBase
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

我能做到

```
hbase-0.92.2 root# bin/hbase shell
HBase Shell; enter 'help<RETURN>' for list of supported commands.
Type "exit<RETURN>" to leave the HBase Shell
Version 0.92.2, r1379292, Fri Aug 31 13:13:53 UTC 2012

hbase(main):001:0> exit 
```

我做错什么了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-20T13:41:23.980

你也可以这样做： -

```
# export HADOOP_CLASSPATH=`./hbase classpath` 
```

然后将这个java捆绑在jar中以在hadoop集群中运行它，如下所示： -

```
#hadoop jar <jarfile> <mainclass> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T15:39:47.760

Use this

```
java -classpath `hbase classpath`:./ MyHBase 
```

this will get the entire classpath string that HBase uses and adds the current directory as well to the classpath.

Cheers Rags

# c# - 如何从另一个 DLL 中的对象获取类型？

> ID：16144959
> 
> 赞同：2
> 
> 时间：2013-04-22T10:34:29.553
> 
> 标签：c#, object, reflection, gettype

我有一个名为“Communication”的对象，它有一个“CreatePdfFromTemplate”的方法。此方法将从 Windows 服务中调用，该服务在表上具有 SqlDependancy，该表将在网站上的方法添加新行时发​​出通知。

在我的方法中，我传递了一个具有“Id”和“Name”的自定义对象列表。该名称是我需要使用反射加载的对象的名称。例如，“指令”。“Id”是需要从数据库加载的“Name”中引用的对象的Id。此对象在我的“通信”DLL 的运行时中未引用或不可用。

我目前正处于第一个障碍。作为第一步，我正在尝试执行以下操作：

```
// Load object information using Reflection
Type objectType = Assembly.GetExecutingAssembly().GetType(queueObject.Name);
int objectId = queueObject.Id; 
```

我从搜索答案中发现了一些信息，这些信息说有一种方法可以通过在应用程序缓存或 GAC 中提供 DLL 来加载它，但我不确定这是否是最好的方法。

我以前从未使用过反射，所以如果您对此有任何建议，或者对我选择的一般结构方式有任何建议（即网站向 DB 表添加行，Windows 服务中的 SqlDependancy 触发，对通信服务 DLL 的调用创建 PDF）。

只是为了给您更多信息，我之所以选择这样做，是因为我的模板包含诸如 {Instruction.CreatedDate} 之类的标签，其中“Instruction”是对象的名称，“CreatedDate”是对象的名称一个属性，其值将替换标签。

非常感谢有关如何在我的反射中或仅在我的结构上加载此“指令”对象的任何帮助。如果我没有提供足够的信息或者我所说的不够清楚，请告诉我（这是我的第一个 StackOverflow 问题，尽管我是一个很长时间的潜伏者）。

谢谢。

**- 更新 -**

好的，使用 Maarten 提出的想法，我已经设法加载我的程序集并从中获取一个类型，但我的做法略有不同。我无法使用 Assembly.LoadFile 方法输入特定路径，所以我这样做了：

```
Assembly executingAssembly = Assembly.GetExecutingAssembly();
Assembly objectAssembly = Assembly.Load(executingAssembly
                                          .GetReferencedAssemblies()
                                          .Where(a => a.Name == "Common")
                                          .FirstOrDefault()); 
```

这是有效的，因为我试图获取的类型是我的通信服务中一个名为“Common”的引用程序集的一部分（这是一个使用 nuget 帮助保持最新的已安装包，因为它经常更改）。

任何关于我如何做到这一点以及它是正确还是错误方式的进一步帖子将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T10:58:54.767

使用[Assembly.LoadFile](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.loadfile.aspx)或其他重载加载程序集。

[使用Assembly.GetType](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.gettype.aspx)获取类型。

拥有类型后使用[Activator.CreateInstance](http://msdn.microsoft.com/en-us/library/system.activator.createinstance.aspx)。

将其转换为[dynamic](http://msdn.microsoft.com/en-us/library/vstudio/dd264741.aspx)，并调用您的方法，或设置您的属性。我假设您使用的是 .net 4.0。

```
var myAssembly = Assembly.LoadFile(...);
var myType = myAssembly.GetType(...);
dynamic myObject = Activator.CreateInstance(myType);
if (myObject != null) {
    var createdDate = myObject.CreatedDate;
} 
```

# java - Java将具有属性的元素添加到xml文件

> ID：16144962
> 
> 赞同：1
> 
> 时间：2013-04-22T10:34:41.870
> 
> 标签：java, xml, file, fullcalendar

各位程序员你好 :)。

我对Java很陌生，如果这是PHP我已经这样做了：P，无论如何我试图在这里搜索所有答案（stackoverflow）但没有一个适合我的具体问题，或者我没有看到一个例子或者我错过了某事...无论如何，如果您知道与我的问题类似的任何解决方案，请发布答案链接。

好的问题;）

我在一个文件中有这个 XML，我需要它是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<events>
    <event id="46" title="Ferias" start="2013-04-25" end="2013-04-26" allDay="false" editable="true"/>
    <event id="47" title="Falta" start="Wed Apr 17 2013 00:00:00 GMT+0100" end="Thu Apr 18 2013 00:00:00 GMT+0100" allDay="false" editable="true"/>
    <event id="48" title="Tolerancia de Ponto" start="Mon Apr 01 2013 00:00:00 GMT+0100" end="" allDay="false" editable="true"/>    
    <event id="49" title="Titulo teste" start="Thu Apr 11 2013 00:00:00 GMT+0100" end="Sat Apr 13 2013 00:00:00 GMT+0100" allDay="true" editable="true"/>
    <event id="50" title="dfgfdgf" start="Fri Apr 12 2013 00:00:00 GMT+0100" end="Sat Apr 13 2013 00:00:00 GMT+0100" allDay="true" editable="true"/>
    <event id="51" title="hghfjfghj" start="Tue Apr 16 2013 00:00:00 GMT+0100" end="Wed Apr 17 2013 00:00:00 GMT+0100" allDay="true" editable="true"/>
    <event id="52" title="grande evento" start="Tue Apr 23 2013 00:00:00 GMT+0100" end="Wed May 01 2013 00:00:00 GMT+0100" allDay="true" editable="true"/>
</events> 
```

我正在尝试添加一个带有属性的新元素“事件”，我正在使用它来加载和修改：

```
 String FilePath = "D:/myxml.xml";
    Document doc = openXMLfile(FilePath); 
```

它在这里加载没问题..

openXMLfile 是这样的：

```
protected Document openXMLfile(String filepath){
    Document doc = null;
    try {
        File fXmlFile = new File(filepath);
        DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
        doc = dBuilder.parse(fXmlFile);         
    } catch (Exception e) {
        e.printStackTrace();
    }
    return doc;
} 
```

然后在我的函数中添加元素我这样做：

```
File file = new File("D:\myxml.xml");
Element event = doc.createElement("event");
    event.setAttribute("test","testvalue");
    doc.getDocumentElement().appendChild(event);

    filePutContents(doc,file); 
```

其中 filePutContents 我有这个功能：

```
protected void filePutContents(Document doc,File file){
    try{                    
        TransformerFactory tFactory = TransformerFactory.newInstance();
        Transformer transformer = tFactory.newTransformer();    
        transformer.setOutputProperty(OutputKeys.INDENT,"yes");

        DOMSource source = new DOMSource(doc);
        //StreamResult result = new StreamResult(System.out);//problem was this
        StreamResult result = new StreamResult(file);//correct way
                transformer.transform(source, result);

    }catch(TransformerConfigurationException tce){
        /*ERRO do Transformer*/         
        System.out.println("* Transformer Factory error");
        System.out.println(" " + tce.getMessage());

        Throwable x = tce;
        if (tce.getException() != null)
            x = tce.getException();
            x.printStackTrace(); 
    }catch(TransformerException te){
        /*ERRO da Factory*/
        System.out.println("* Transformation error");
        System.out.println(" " + te.getMessage());

        Throwable x = te;
        if (te.getException() != null)
            x = te.getException();
            x.printStackTrace();
    }
} 
```

问题是，没有元素被添加到文件中，我想要更新文件，我做错了什么？谢谢

问题解决了，我已经反映了代码的变化；）感谢做帮手:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:39:44.940

```
StreamResult result = new StreamResult(System.out); 
```

上面的语句将您的输出定向到控制台（System.out）。如果要更新文件，请将其指向文件。

试试这个-

```
StreamResult result = new StreamResult(new FileOutputStream("somefile.xml")); 
```

# c# - 为什么我必须在使用之前将 JValue 显式转换为目标类型？

> ID：16144964
> 
> 赞同：6
> 
> 时间：2013-04-22T10:34:45.990
> 
> 标签：c#, json, dynamic, json.net

我有一些这样的代码：

```
var jsonSerializer = new JsonSerializer();
var json = @"{ ""LastModifiedTime"": ""2013-04-19T18:18:09+03:00"" }";
var result = jsonSerializer.Deserialize<dynamic>(new JsonTextReader(new StringReader(json)));

File.SetLastWriteTime("c:/temp/somefile.txt", result.LastModifiedTime); 
```

但是，这给了我（在运行时，因为我们在这里谈论动态）：

```
RuntimeBinderException
The best overloaded method match for 'System.IO.File.SetLastWriteTime(string, System.DateTime)' has some invalid arguments 
```

这感觉有点傻。对我来说，动态的一点是*不必*显式指定类型等等。这应该（理想情况下）由运行时处理。当然，对于 JSON.NET 来说，在给定的情况下知道它应该伪装成什么可能有点困难......

James（或其他任何熟悉 JSON.NET 内部的人），这是设计使然吗？如果我像这样添加手动 DateTime 演员表：

```
File.SetLastWriteTime("c:/temp/somefile.txt", (DateTime) result.LastModifiedTime); 
```

...一切正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T10:34:45.990

[在发布之前在这里](http://james.newtonking.com/projects/json/help/html/JValueValue.htm)找到了答案...

事实证明，我要么必须强制转换，要么使用 JValue 的 Value 属性。不过，关于这方面的更多细节会很好。当然，仅仅能够神奇地使用我的 JValue 作为 3rd 方方法的参数而不必担心转换将是最佳的，从而提供最“动态语言”的体验，使用 JSON 的这个（否则真的很棒！）功能。网。

# macos - 用 cuda 为 MAC 编译 opencv

> ID：16144966
> 
> 赞同：0
> 
> 时间：2013-04-22T10:34:47.603
> 
> 标签：macos, opencv, g++, clang

我正在尝试在 Mac OS X 中编译带有 CUDA 支持的 opencv 2.4.5。我正在使用带有 Qt 4.8 的 cmake gui 2.8.10

之后

```
clang: error: unsupported option '-dumpspecs' 
```

在制作中，我已将条目 CUDA_HOST_COMPILER 设置为 /usr/bin/llvm-g++ 。但现在我收到此错误：

```
[ 16%] Built target IlmImf
[ 16%] Building NVCC (Device) object modules/core/CMakeFiles/cuda_compile.dir/src/cuda/./cuda_compile_generated_matrix_operations.cu.o
cc1plus: warning: command line option "-Wmissing-declarations" is valid for C/ObjC but not for C++
cc1plus: warning: command line option "-Wstrict-prototypes" is valid for Ada/C/ObjC but not for C++
cc1plus: error: unrecognized command line option "-Wno-narrowing"
cc1plus: error: unrecognized command line option "-Wno-delete-non-virtual-dtor"
cc1plus: error: unrecognized command line option "-Wno-unnamed-type-template-args" 
```

我现在能做什么？

### 系统设置

```
OS X 10.8.3 (12D78) 
```

和

```
>>> clang --version
Apple LLVM version 4.2 (clang-425.0.24) (based on LLVM 3.2svn)
Target: x86_64-apple-darwin12.3.0
Thread model: posix 
```

和

```
>>> g++ --version
i686-apple-darwin11-llvm-g++-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)
>>> ls -al /usr/bin/g++
/usr/bin/g++ -> llvm-g++-4.2 
```

和

```
>>> cc --version
Apple LLVM version 4.2 (clang-425.0.24) (based on LLVM 3.2svn)
Target: x86_64-apple-darwin12.3.0
Thread model: posix
>>> ls -al /usr/bin/cc
/usr/bin/cc -> clang 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T23:05:39.737

使用 GCC 和 G++ 编译。我在 OSX Mountain Lion 上使用了 CMake 2.8.11 和最新的 Xcode 编译器：

g++ --version 返回 i686-apple-darwin11-llvm-g++-4.2 (GCC) 4.2.1（基于 Apple Inc. build 5658）（LLVM build 2336.11.00）

将 CUDA_HOST_COMPILER 从 /usr/bin/cc 更改为 /usr/bin/gcc

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-15T03:06:26.520

您必须使用 GCC 4.5 编译 CUDA 组件，同时使用 Clang 编译 OpenCV 的其余部分，否则您无法让 HighGui 模块工作。HighGui 将仅使用 Apple 安装的编译器进行编译，因为它使用 Cocoa。如果不需要 HighGui，可以使用 GCC 编译 OpenCV。您可以使用 cmake 轻松指定正确的编译器。

我发现最简单的方法是使用 Homebrew 安装 cmake 和 gcc。

我写了一个关于如何使它工作的详细要点，[其中](https://gist.github.com/mlhales/5785725#file-gistfile1-md)还包括使用 Homebrew 版本启用 Python 支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T14:09:56.943

在 cmake/OpenCVCompilerOptions 中禁用警告标志。查找相应的警告并使用 '#' 取消注释

# css - 分区透明。里面的文字不透明

> ID：16144969
> 
> 赞同：4
> 
> 时间：2013-04-22T10:34:50.303
> 
> 标签：css, transparency

是否可以使 div 透明但保持里面的文本不透明？

（我能想象的唯一解决方案是将文本放置在 div 之外并尝试将其放置在带有 z-index 的 div 顶部。但这会非常复杂，因为我有一个非常复杂的菜单）

这是简化的案例：http: [//jsfiddle.net/5Jmzh/3/](http://jsfiddle.net/5Jmzh/3/)

HTML：

```
<ul class="menu">
    <li>first</li>
    <li id="second"> second </li>
    <li>third</li>
</ul> 
```

CSS：

```
#second {
    background:red;
    opacity: 0.3;
    filter: alpha(opacity = 30); /* A lower value makes the element more transparent */
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T10:37:25.550

不透明度设置该 div 内的所有内容，无法覆盖它。

使用着色背景的 rgba 方法：

```
#four {
    background: rgba(255, 0, 0, .3);
...
} 
```

这使用红色、绿色、蓝色和 alpha 值（很像 Photoshop）而不是十六进制来计算颜色，并且因为它是背景颜色，所以它不会影响子元素。

[http://jsfiddle.net/5Jmzh/1/](http://jsfiddle.net/5Jmzh/1/)

:)

# windows - 如何在 windows 2008 r2 服务器中使用 runas 命令？

> ID：16144974
> 
> 赞同：2
> 
> 时间：2013-04-22T10:35:07.273
> 
> 标签：windows, batch-file

我写了一个批处理文件，它将调用另一个批处理文件并删除一些文件。为此，我需要拥有管理员权限。我尝试了以下命令...

```
runas /user:bala@nsc cmd
Enter the password for bala@nsc: xxxxxxx 
```

即使 bala@nsc 具有管理员权限，命令提示符也以简单用户而不是管理员身份打开。

我想，我错过了一些东西。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:10:45.880

你的结果也不是我所期望的。但我有一些解决方法可以建议。

*   您可以关闭用户帐户控制。
*   您可以转到开始->所有程序->附件，然后右键单击“命令提示符”并选择“以管理员身份运行”。
*   您可以右键单击批处理脚本并执行相同操作。
*   您可以在桌面上创建 cmd 或批处理脚本的快捷方式，然后修改该快捷方式的属性以以管理员身份运行。
*   您可以在批处理脚本中添加一些代码来[检查管理员权限并](https://sites.google.com/site/eneerge/home/BatchGotAdmin)在需要时提示升级。

关闭 UAC 将是我的选择。

# verilog - 如何防止逻辑微调

> ID：16144977
> 
> 赞同：0
> 
> 时间：2013-04-22T10:35:21.617
> 
> 标签：verilog, fpga

我正在尝试为模块的基本结构编写`verilog`代码，`rsa cryptosystem`如下所示。

尽管代码在模拟中运行良好，但会发出警告：

```
Xst:1710 - FF/Latch <out_en> (without init value) has a constant value of 1 in block <o1>. This FF/Latch will be trimmed during the optimization process.
and Xst:1895 - Due to other FF/Latch trimming, FF/Latch <aa_1> (without init value) has a constant value of 0 in block <test1>. This FF/Latch will be trimmed during the optimization process. 
```

我正在使用赛灵思 ise 13.1。

请帮我

```
 module okletssee(
input en,

input clk,

input[2:0] a,b,

output reg[2:0] c,

output reg out_en
    );

always @(posedge clk)

begin

if(en==1'b1)
 begin

c=a+b;

out_en=1'b1;

end

else out_en=1'b0;

end

endmodule

module test1(

input[2:0] a,b,

input clk,

output reg[2:0] out_reg
    );

wire[2:0] cc;

     wire out1_en;

     reg[2:0] aa,bb;

     reg en;

okletssee o1(en,clk,aa,bb,cc,out1_en);

reg cse;

always @(posedge clk)

begin

case(cse)

default: begin

        aa=a;

        bb=b;

        en=1'b1;

        cse=1'b1;

        end

1'b1: begin

        if(out1_en==1'b1)

        out_reg=cc;

        else cse=1'b1;

        end

endcase 

end

endmodule 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:15:07.353

好的......你的代码真的很糟糕。逻辑完全混乱；它不可能模拟“罚款”。您的第一个明显问题是它`test1.en`实际上**被** 高估了，因此是多余的。这正是你的合成器告诉你的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T21:02:10.300

如果您不想修剪输出，您应该以某种方式使用它。例如在另一个模块中或作为输出引脚。

# iphone - UIActivityViewController 不使用 Facebook 登录

> ID：16144978
> 
> 赞同：-1
> 
> 时间：2013-04-22T10:35:25.577
> 
> 标签：iphone, ios, xcode, facebook, share

我在我的新应用中为 Facebook 分享选项使用**UIActivityViewController 。**

但是，如果用户未登录到设备，则无法正常工作。选择设置时，登录页面不显示..

```
IActivityViewController *activityVC = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];
activityVC.excludedActivityTypes = @[UIActivityTypeAssignToContact, UIActivityTypePrint];
[self presentViewController:activityVC animated:TRUE completion:nil]; 
```

我能对此做些什么..？这是我的代码问题还是常见错误..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:47:12.297

iOS 6 引入了 UIActivityViewController 类和 Social Framework，两者都可以用来将 Twitter、Facebook 和新浪微博功能集成到 iOS 6 应用程序中。对于通用要求，UIActivityViewController 和 SLComposeViewController 类提供了一种易于实现的社交网络集成路径。

```
UIActivityViewController *activityController =[[UIActivityViewController alloc]initWithActivityItems:activityItems applicationActivities:nil]; 
```

self presentViewController:activityController 动画：YES 完成：nil];

为了使用 SLComposeViewController 类，应按顺序执行多个步骤。首先，应用程序可以可选地检查以验证是否可以将消息发送到指定的社交网络服务。这实质上等同于检查是否已在设备上配置了有效的社交网络帐户，并使用 isAvailableForServiceType: 类方法实现，将以下选项所需的服务类型作为参数传递：

1.  SLServiceTypeFacebook
2.  SLServiceTypeTwitter
3.  SLServiceType新浪微博

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T10:41:36.657

这就是使用 Loading 标签启动 ActivityIndi​​catorView 的方式

```
 UIActivityIndicatorView *tempSpinner = [[UIActivityIndicatorView alloc]     initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];

 lable =[[UILabel alloc]init];
 lable.center = self.view.center;
 lable.text = @"Loading...";

 lable.hidden=NO;

 lable.backgroundColor = [UIColor clearColor];

 lable.textColor = [UIColor blackColor];

 [lable sizeToFit];
 lable.center = CGPointMake(160, 255);

 tempSpinner.center = self.view.center;  

 [self.view addSubview:tempSpinner];

[self.view addSubview:lable];           
start where ever you want like this 
 [tempSpinner startAnimating]; 
stop it like this where ever you want
[tempSpinner stopAnimating]; 
hide unhide loading label as per requirement 
```

# django - django 管理员，无添加日期字段

> ID：16144996
> 
> 赞同：1
> 
> 时间：2013-04-22T10:36:05.060
> 
> 标签：django, django-models

我在 django 中有一个简单的模型。

```
class Period(models.Model):
    date_beg = models.DateField(default=date.today, null=False, editable=True)
    date_end = models.DateField(default=date.today, null=False, editable=True) 
```

当我在 django admin 中插入数据时，它仍然显示`None`在日期字段中。我当然设置了正确的日期格式。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-22T12:13:02.050

也许可以帮助你：[Django datetime issues (default=datetime.now())](https://stackoverflow.com/questions/2771676/django-default-datetime-now-problem)

对于 DateTimeField、DateField、TimeField 等

设置 null=True 好的，如果您希望能够在数据库中将值设置为 NULL

设置 blank=True 如果您希望相应的表单小部件接受空值，或者您正在使用 auto now 或 auto now add，则可以。如果是这样，您还需要设置 null=True。

这取自[Django 1.5 书](https://django.2scoops.org/)